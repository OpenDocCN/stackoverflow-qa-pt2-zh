# StackOverflow 问答 14284000-14284999

# mysql - 查询以返回（分组）行，其中不存在具有 column=condition 的行

> ID：14284004
> 
> 赞同：0
> 
> 时间：2013-01-11T18:00:55.023
> 
> 标签：mysql

假设我有一个包含两列的表，一个 client_id 和一个布尔值。

给定的 client_id 有多个数据条目，每个条目的布尔值可能设置为 true，也可能不设置。

我需要一个查询，它只返回没有 ROWS 且布尔值设置为 true 的 client_id，并且我需要将它按 client_id 分组。

我敢肯定这很简单，它现在就逃脱了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:05:39.443

使用`HAVING`子句过滤组：

```
SELECT client_id FROM my_table GROUP BY client_id HAVING SUM(boolean) = 0 
```

请注意，`SUM(boolean)`它在 MySQL 中有效，因为它没有真正的布尔类型；在其他 RDBMS 中，您要么必须使用不同的聚合函数，要么测试布尔值并返回可用于`SUM()`：

```
... HAVING SUM(CASE WHEN boolean THEN 1 END) = 0 
```

# mysql - 找不到类“Silex\Provider\PDO”。怎么解决？

> ID：14284010
> 
> 赞同：0
> 
> 时间：2013-01-11T18:01:06.897
> 
> 标签：mysql, symfony, pdo, doctrine, silex

我正在使用 Silex 和 Doctrine。在我需要为 LIMIT 值绑定值之前，它对我来说一切都很好。PDO 的默认行为是在数字周围插入引号，这显然是行不通的。因此，解决方案是设置`data_type`参数。不幸的是，它会引发错误。

**我的代码**

```
$start_num = 3;
$stmt = $app['db']->prepare('SELECT * FROM myTable LIMIT ?,10');
$stmt->bindValue(1, $start_num, PDO::PARAM_INT); 
```

**错误**

```
Fatal error: Class 'Silex\Provider\PDO' not found in ... 
```

我发现的关于这个问题的大多数答案都说这是 PDO 没有被编译/启用的迹象，但是我已经成功使用 Doctrine （它依赖于 PDO？）一段时间没有问题。

这是教义的问题吗？我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T18:24:32.910

这是一个命名空间问题，如果此代码位于`Silex\Provider`命名空间下的类中

尝试

```
\PDO::PARAM_INT 
```

# jquery-ui - UI 滑块 - 仅在 IE 中单击拖动问题

> ID：14284016
> 
> 赞同：0
> 
> 时间：2013-01-11T18:01:42.993
> 
> 标签：jquery-ui, internet-explorer, jquery-ui-slider

有没有人在 IE 中遇到过 UI Slider 这个相当奇怪的问题。这是一个基本的滑块，带有自定义的手柄图像。在 IE 中，当您单击并拖动手柄时，它只会将值增加一步（通过 'step' 参数定义）。它不会让您继续拖动到下一个“步骤”，除非您再次单击然后手动再次拖动它。

在所有其他浏览器中都可以正常工作 - 您只需单击并拖动即可滑动到任何步骤。

想法赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:34:41.073

这是一个老问题，但对于后代来说：我也遇到了这个问题，升级到最新版本的 jQuery UI 解决了它。

# twitter-bootstrap - Twitter bootstrap 手风琴不适用于 Sammy.js

> ID：14284022
> 
> 赞同：1
> 
> 时间：2013-01-11T18:01:59.317
> 
> 标签：twitter-bootstrap, sammy.js, single-page-application

我正在尝试在单页应用程序中使用 twitter 手风琴，但它与 sammy.js 冲突

```
<a class="ac-toggle" data-toggle="collapse" data-parent="#ac2" href="#collapseOne">Company</a> 
```

当我尝试折叠它时，它会更改 url。我忽略了 sammy.js 中的路线，但它不起作用。是否有其他方法使用 jquery 或忽略 sammy.js 中的路线？

```
 this.get(/\#collapse(.*)/, function (cx, match) {
    ????
 }); 
```

# sql-server - SQL Server 2005 - 无法绑定多部分标识符

> ID：14284025
> 
> 赞同：2
> 
> 时间：2013-01-11T18:02:02.637
> 
> 标签：sql-server

这段代码：

```
USE [db]
GO
/****** Object:  UserDefinedFunction [dbo].[GetFieldPickerReports]    Script Date: 01/11/2013 19:12:27 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER  FUNCTION [dbo].[GetFieldPickerReports] (@CustomerName  varchar(100))
RETURNS TABLE
AS 
  RETURN SELECT [fpr].[ID], [fpr].[Name], [fpr].[Global], [fpr].[FPRCategoryID]
  FROM FieldPickerReport fpr, dbo.GetProductKeyIdByCustomer(@CustomerName) pk 
  LEFT JOIN [FPRCategory] fprcat on ([fpr].[FPRCategoryID]=[fprcat].[ID])
  WHERE [Global]=1 OR ProductKeyID=pk.id 
```

产生错误：

> 无法绑定多部分标识符“fpr.FPRCategoryID”。

此查询在没有`Left Join`（我目前需要添加的）或删除`dbo.GetProductKeyIdByCustomer()`and`Where`子句的情况下工作。

这是代码`dbo.GetProductKeyIdByCustomer()`

```
USE [db]
GO
/****** Object:  UserDefinedFunction [dbo].[GetProductKeyIdByCustomer]    Script Date: 01/11/2013 19:58:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER  FUNCTION [dbo].[GetProductKeyIdByCustomer] (@CustomerName  varchar(100))
RETURNS TABLE
AS
   RETURN SELECT id
   FROM ProductKey
   WHERE [CustomerName]=@CustomerName AND Enabled=1 
```

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:06:28.810

首先，我认为这些 UDF 会更好地实现为视图。

其次，您正在混合隐式和显式连接。使用所有显式连接应该可以解决您的问题：

```
SELECT 
    [fpr].[ID], 
    [fpr].[Name], 
    [fpr].[Global], 
    [fpr].[FPRCategoryID]
FROM 
    FieldPickerReport fpr
    JOIN dbo.GetProductKeyIdByCustomer(@CustomerName) pk 
        ON [Global] = 1 OR ProductKeyID = pk.id
    LEFT JOIN FPRCategory fprcat 
        ON fpr.FPRCategoryID = fprcat.ID 
```

# jquery - 停止特定事件处理程序的 JQuery 事件传播

> ID：14284030
> 
> 赞同：0
> 
> 时间：2013-01-11T18:02:21.290
> 
> 标签：jquery, javascript-events

我试图仅针对特定事件处理程序停止事件传播，同时允许同一事件上的其他人传播，这是一个示例：

```
function Control(parent) {
    this.Parent = $(parent);
    this.Parent.append('<div class="test"></div>');
    this.Test = $('.test', this.Parent).last();
    this.Test.bind('mousedown', this, Control_All);
    this.Test.bind('mousedown', this, Control_Top);
}
function Control_All(event) {
    //this should bubble up through both c1 and c2
}
function Control_Top(event) {
    //this should stop at c2
}
Control.prototype.constructor = Control;
Control.prototype.All = Control_All;
Control.prototype.Top = Control_Top;

var c1 = new Control('body');
var c2 = new Control(c1.Test); 
```

在上面的示例中，c1.Test 和 c2.Test 的大小相同。我正在尝试让 mousedown 事件调用这三个事件（我知道 OO 方法没有维护，状态是通过 event.data 保存的，但是为了简单起见，我使用 OO 表示法，在我的实际用例中全部和单个委托是绑定变量顺序，并且仅在某些情况下，因此无法控制它们绑定的顺序）： c1.All c2.All c2.Single

我已经在 Control_Top 的末尾尝试了 event.preventDefault()、event.stopPropagation()、event.stopImmediatePropagation() 和 return(false)，但是如上所述，没有任何工作要做。

编辑：[这是一个 JSFiddle 链接](http://jsfiddle.net/CoryG/cvmEz/)，可以帮助任何有兴趣帮助它的人。

再次编辑：使用全局和额外绑定来解决 body.mousedown，[如果](http://jsfiddle.net/CoryG/DeFj5/)有人需要它，将欢迎不使用全局或额外绑定的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:41:13.050

只需确认事件目标等于您将事件绑定到的元素。

[http://jsfiddle.net/cvmEz/2/](http://jsfiddle.net/cvmEz/2/)

```
function Control(parent,name) {
    this.Parent = $(parent);
    this.Parent.append('<div class="test" data-name="' + name + '"></div>');
    this.Test = $('.test', this.Parent).last();
    this.Test.bind('mousedown', this, Control_All);
    this.Test.bind('mousedown', this, Control_Top);
}
function Control_All(event) {
  if ( event.target == this) {
    console.log(this.getAttribute('data-name') + '.All');
  }
}
function Control_Top(event) {
  if ( event.target == this) {
    console.log(this.getAttribute('data-name') + '.Top');
  }
}
Control.prototype.constructor = Control;
Control.prototype.All = Control_All;
Control.prototype.Top = Control_Top;

var c1 = new Control('body', 'c1');
var c2 = new Control(c1.Test, 'c2');

console.log('--------'); 
```

# c# - 用于 Twitter 更新检查的 Azure 脚本

> ID：14284036
> 
> 赞同：0
> 
> 时间：2013-01-11T18:02:49.250
> 
> 标签：c#, twitter, windows-8, toast, azure-mobile-services

我知道我之前的问题太模糊了，并没有解释太多。我希望这篇文章会更容易理解。

我目前正在创建一个应用程序，它将提取某些@Twitter 提要以及某些 Twitter #hashtags 并在 Windows 8 Modern UI 应用程序中显示它们。在应用程序中显示这些提要效果很好，但我想在某个@Twitter 用户之一发布新推文时，或者当一条新推文被标记为某个#hashtag 时，通过 toast 通知通知用户。

从我的最后一个问题中，我意识到 Azure 在这方面的作用，并且在尝试使用到目前为止我发现的片段创建一个有效的通知脚本之后，我最终得到了一些不起作用的东西：（
*基于：[http](http://webhole.net/2010/05/10/how-to-check-for-new-tweets-from-a-user/) ://webhole.net/2010/05/10/how-to-check-for-new-tweets-from-a-user/ ）*

```
function insert(item, user, request) {

    var oldTweetId=0;
    var username="9gag";
    var url='http://api.twitter.com/1/statuses/user_timeline/'+username+'.json?callback=?';
setInterval(checkStream,5000);

    function checkStream()
    {
        $.getJSON(url,function(tweets){
            if(tweets[0].id!=oldTweetId)
            {
                request.respond();
                push.wns.sendToastText04( {
                     text1: "ny tweet!"
            }, {
                success: function(pushResponse) {
                    console.log("Sent push:", pushResponse);
                }
            });
            }
        });
    }
} 
```

有人知道如何真正做到这一点吗？我尝试了几种不同的方法，但为了避免不必要的非工作代码片段，我将发布我最新的一个（它不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:05:26.280

Toast 通知可以由您正在运行的应用程序发出，也可以由两部分 Web 服务推送到用户的设备。对我来说，您的 JS 代码片段究竟在哪里运行并不明显。您是否在服务器上的 Node.js 应用程序中运行它并调用 WNS？

我将首先致力于让 toast 通知在您的独立应用程序中工作，而不是使用推送服务。JS/C# 中的[Windows 8 Toast 通知示例](http://code.msdn.microsoft.com/windowsapps/Toast-notifications-sample-52eeba29)将向您展示如何操作。一旦您对本地生成的 toast 通知感到满意，您就可以使用 WNS 解决问题。

我提到的两部分 Web 服务包括：

1.  您编写并托管在某个地方的 Web 服务，以确定何时发送通知以及说什么。这可以托管在 Azure 或其他任何地方。显而易见的选择是 Windows Azure 移动服务，但您不必使用它。
2.  第 1 部分中的 Web 服务与 Windows 通知服务 (WNS) 通信以实际将通知推送到设备。

从云端推送通知的最简单方法可能是使用 Windows Azure 移动服务。 [Nick Harris 的示例将向您展示如何](http://code.msdn.microsoft.com/windowsapps/Tile-Toast-and-Badge-Push-90ee6ff1)操作，但您需要先阅读 WAMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:20:28.087

请参阅[我的博客文章](http://hashtagfail.com/post/38488024433/mobile-services-scheduler)，其中包含一个有效的移动服务脚本，您可以将其用作计划工作的一部分来轮询 Twitter。

# javascript - 将实时数据流式传输到网页

> ID：14284040
> 
> 赞同：1
> 
> 时间：2013-01-11T18:03:13.683
> 
> 标签：javascript, ajax, web-applications, lighttpd

我正在做一个项目，我们希望监控通信频道上的数据并向网页提供反馈。数据将由运行在网络服务器上的进程读取，然后通过 IPC 提供。问题是捕获这些数据并通过网页将其流式传输到客户端的最佳方法是什么？我们可能会使用 lighttpd 作为我们的网络服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:35:57.063

您将要使用一种称为“彗星”的技术。

从前端，您将需要利用 HTML5 Web 套接字、长轮询或隐藏 iframe 技术来提供启用实时的界面（或所有 3 种的组合，具体取决于检测到的浏览器引擎）

从服务器端（如果您使用的是 lighttpd），我建议使用像 beanstalkd 这样的消息队列系统。结合 beanstalkd、lighttpd 和 php，您可以创建“无限加载”页面，当新消息到达 beanstalkd 队列（称为管）时，该页面将等待（“阻塞”）新消息。一旦收到新消息，就可以输出到浏览器前端

# jquery - 制作将切换 textarea 位置的 onClick 功能

> ID：14284041
> 
> 赞同：0
> 
> 时间：2013-01-11T18:03:21.090
> 
> 标签：jquery

我有以下代码：

> ```
>  var counter=0; 
>      function appendText(){     
>      var text = $("#text").val();
> if ($("#text").val()){ 
> ```

```
var textArea = "<div> <textarea id='t"+counter+"'>"+text+
    "</textarea><button id='b"+counter+"' name='t"+counter+"' >edit</button> <button onClick='moveUp();'>Up</button></div>"; 

    $("#addedText").after(textArea);    
    $("#t"+counter).attr('readonly','readonly');    
    $("#t"+counter).attr('readonly','readonly');

    $("#t"+counter).css('width','500px');
$("#t"+counter).css('resize','none');
$("#t"+counter).css('background-color','#5CCCCC'); 
$("#t"+counter).css('font-weight','bold');             

$("#b"+counter).bind('click',makeAreaEditable);                  
counter++;  }   else{   }            };                                                                 

 var makeAreaEditable = function() {
 var target = event.target||event.srcElement||event.originalTarget;     
 var targetArea =$("#"+target.name);    
 targetArea.removeAttr('readonly');     
 var button =  $("#"+target.id);    
 button.text("OK");     
 button.unbind('click');
 button.bind('click',saveEdit); };

  var saveEdit =  function() {  
  var target = event.target || event.srcElement || event.originalTarget;    
  var button =  $("#"+target.id);   
  button.text("edit");  
  button.unbind('click');
  button.bind('click',makeAreaEditable);    
  var targetArea = $("#"+target.name);  
  targetArea.attr('readonly', 'readonly'); }; 
```

我不知道如何制作 moveUp() 函数，以便它将 textarea 向上移动一个空格。之前的文本区域应该与您按下向上按钮的文本区域交换位置。

html 看起来像这样：

```
 <textarea id="text" placeholder="baga text aici"></textarea> <button
 id="addText" onClick="appendText()" >Add text </button>        <div
 id="addedText" style="float:left"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:10:25.487

```
$(".moveup").on("click",function()   {
       var $divcontainer = $(this).parent();            
      if ( $divcontainer.prev().get(0))  $divcontainer.prev().before($divcontainer);

      });
//append whatever how many textarea & its up button in div.allthetextarea 
```

html

```
 <div class="allthetextarea">
      <div><textarea/><input class="moveup"/></div>
      <div><textarea/><input class="moveup"/></div>
   ...
</div> 
```

css

```
 .allthetextarea .moveup:first-child {display:none;} 
```

# crystal-reports - Crystal 报表地址标签连续显示一个标签而不是两个

> ID：14284046
> 
> 赞同：0
> 
> 时间：2013-01-11T18:03:45.343
> 
> 标签：crystal-reports, crystal-reports-2008

使用 Crystal 报表打印地址标签。每行显示两个标签。

选择的水晶格式是邮件列表类型（6 行 X 每行 2 项）

每个邮件列表标签中都添加了一个图像。

有时由于一些奇怪的原因，报告每行只显示一个地址标签。它只发生一段时间。

这是报告设计的问题还是标签行数据的长度问题？

我使用的是 Visual Studio 2008 自带的水晶报表。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:51:11.140

您是否总是使用同一台机器、同一台打印机等？

如果我也从上面猜测，我会说它是附加的打印机/纸张尺寸影响每行标签的数量。尝试取消打印机/纸张与报告的关联。

# ios - 如何正确添加自定义 TableViewCell？

> ID：14284047
> 
> 赞同：0
> 
> 时间：2013-01-11T18:03:44.993
> 
> 标签：ios, cocoa-touch, uitableview

我的 iPad 应用程序中有一个分组的 tableView，我一直在尝试将`cell.imageView.center = cell.center`图像设置为居中，而不是将其放在最左边的位置。如果没有 的子类，这显然是不可能的`UITableviewCell`（如果有人可以解释原因，那也将不胜感激。现在我只是假设它们是 Java 开发人员所称的“私有”变量）。所以，我创建了一个自定义的 tableViewCell，但我只想在这个 tableView 的一行中使用这个单元格。所以在`cellForRowAtIndexPath`我基本上写

```
cell = [[UITableViewCell alloc]initWith//blahblah

if(indexPath.row == 0)
    cell = [[CustomCell alloc]initWith//blahblah 
```

这当然不是我要写的，但这就是它的想法。

现在，当我这样做时，它可以工作，但是这个**GROUPED** tableView 中的第一个单元格比其他单元格更宽，而我没有在自定义单元格中做任何事情。customCell 类尚未更改。虽然它仍然有圆角，所以它似乎知道它是一个分组的 tableView。

另外，我一直在努力以编程方式获取单元格的大小，在 中`cellForRowAtIndexPath`，我尝试注销，`cell.frame.size.width`并且`cell.contentView.frame.size.width`当我知道它们更宽时，它们都返回 320 .. 就像，所有行都大约 400宽，第一个单元格是 420 或其他东西。它仍然为所有单元格写出 320 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:49:43.540

由于以下几个原因，此代码将不起作用：

```
cell.imageView.center = cell.center; 
```

首先，中心是相对于它的superview的。我相信单元格的超级视图是 tableView。imageView 的超级视图将是单元格的内容视图。因此坐标系是不同的，所以centens 将被偏移。例如，向下的第 3 个单元格的中心为 0.5 宽度 + 3.5 高度。您应该能够通过执行以下操作来解决此问题：

```
cell.imageView.center = CGPointMake( width / 2 , height / 2 ); 
```

第二个问题与表格视图的工作方式有关。表格视图管理其单元格视图。单元格的宽度由表格视图的宽度定义，高度由表格视图的行高属性定义。这意味着单元格本身无法控制其大小。

但是，您可以调整其子视图的大小，但您必须在设置单元格大小后执行此操作（否则您会得到奇怪的结果）。您可以在布局子视图（自定义 UITableViewCell 类）中执行此操作。 [看到这个答案](https://stackoverflow.com/a/4866205/296446)。

```
- (void)layoutSubviews {
    [super layoutSubviews];
    self.imageView.frame = ....
} 
```

何时`layoutSubviews`调用单元格框架已设置，因此您的视图日志记录在这里而不是`cellForRowAtIndexpath`.

至于 GROUPED 样式。我不确定这是否旨在与自定义视图一起使用。我怀疑它会将其单元格的大小设置为自己的宽度减去每个大小的 20 像素边距，然后将遮罩应用于部分中的顶部和底部单元格以获得圆角效果。如果您使用自定义视图，请尝试使用标准的表格视图样式。

# internet-explorer - 某些图标字体字母在 IE 中不起作用

> ID：14284048
> 
> 赞同：1
> 
> 时间：2013-01-11T18:03:46.473
> 
> 标签：internet-explorer, fonts, icons, font-face, webfonts

我们使用 Illustrator 构建了一个自定义图标集来绘制图标，将形状复制/粘贴到 Glyphs，导出到 ttf，使用字体松鼠创建各种版本的字体。

所有图标都适用于除 IE 之外的所有浏览器。在 explorer 9 及以下版本中，不会呈现 twitter 徽标的“t”。

我已经多次重新导出字体，但没有成功。有没有人听说过这个。矢量绘图会以某种方式出错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:53:42.460

将 Illustrator 中的形状粘贴到 Glyphs 时，您必须在 Illustrator 中“分组”该形状。即使形状是一​​条路径。

# javascript - 如何使用 Require JS 管理非 AMD 依赖项？

> ID：14284049
> 
> 赞同：2
> 
> 时间：2013-01-11T18:03:46.647
> 
> 标签：javascript, requirejs, amd

我尝试管理一个没有 AMD 支持的库，它依赖于其他 3 个 JS 文件（https://github.com/augustl/js-epub）。

我必须按以下顺序包含文件：

```
<script type="text/javascript" src="zip/jszip.js"></script>
<script type="text/javascript" src="zip/jszip-load.js"></script>
<script type="text/javascript" src="zip/jszip-deflate.js"></script>
<script type="text/javascript" src="zip/jszip-inflate.js"></script> 
```

目前，我尝试像这样通过 shim 处理依赖项：

```
shim {

      "zip/jszip": {
        "deps": ["zip/jszip-deflate", "zip/jszip-inflate", "zip/jszip-load"],
        "exports": "JSZip"
      }
} 
```

但是脚本包含在错误的顺序中。我该如何管理？

最好的问候， hijolan

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:12:54.100

`deps`依赖项数组定义了需要在填充脚本**之前**加载的脚本。您的 shim 声明是错误的方法：您需要填充依赖于 jszip 的模块并将 jszip 列为它们的依赖项。

```
shim: {
  "zip/jszip": {
    "deps": [],
    "exports": "JSZip"
  },
  "zip/jszip-load": {
    "deps": ["zip/jszip"],
    "exports": "JSZip"
  },
  "zip/deflate": {
    "deps": ["zip/jszip"],
    "exports": "JSZip"
  },
  "zip/inflate": {
    "deps": ["zip/jszip"],
    "exports": "JSZip"
  } 
```

# jquery - 删除列表中的第一项时 isotope.js reLayout 方法不起作用

> ID：14284053
> 
> 赞同：0
> 
> 时间：2013-01-11T18:03:55.783
> 
> 标签：jquery, jquery-isotope

我正在使用 isotope.js 以简单的 cms 显示图像，当图像被删除时，它会从列表中删除图像，我正在调用 reLayout 方法：

```
$('.item').on('click',function(){
        $(this).remove();
        $('ul').isotope( 'reLayout' );
    }); 
```

这适用于除了列表中的第一项之外的每一项。

我在这里复制了这个问题：

[http://jsfiddle.net/FgVLV/2/](http://jsfiddle.net/FgVLV/2/)

有谁可以帮我离开这里吗？我这辈子都想不通！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:37:37.650

好的，我想通了。同位素中有一个删除方法可以完成我手动执行的操作。一切都很好，结局很好。这是为您未来可能需要它的人提供的文档：

[http://isotope.metafizzy.co/docs/methods.html#remove](http://isotope.metafizzy.co/docs/methods.html#remove)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T22:39:07.770

```
//#container_+id is container element
$obj = $('#container_'+id); //VERY IMPORTANT!

$('#container_'+id).animate({
    opacity: 0,
    height: 'toggle'                
}, 1000, function() {
    elem_isotope.isotope('remove', $obj);
    $("#container_" + id).remove();
    $.when($("#container_" + id).remove()).then( elem_isotope.isotope('reLayout'));

}); 
```

# ssh - 通过 ssh 将最新文件复制到另一个目录

> ID：14284055
> 
> 赞同：-2
> 
> 时间：2013-01-11T18:04:07.893
> 
> 标签：ssh, copy

我想将过去 3 天内创建的文件从一个目录复制到另一个目录。我正在使用该命令`find . -mtime -3`列出最新文件，但是如何将其复制到另一个目录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:06:14.717

[这个答案](https://stackoverflow.com/a/5241677/163495)应该可以帮助你

```
find . -mtime -3 -exec cp {} /destinationfolder  \; 
```

# iphone - gamecenter 多人游戏卡住连接

> ID：14284060
> 
> 赞同：1
> 
> 时间：2013-01-11T18:04:24.063
> 
> 标签：iphone, game-center

我想在我的游戏中添加多人模式，但出现了问题。有时它可以连接我的 iDevice 和模拟器，但大多数时候它只是停留在显示“正在连接...”的游戏中心屏幕上。我选择自动匹配，很快就找到了另一个玩家，并且屏幕上显示了彼此的帐户名称。但从那时起，就没有任何效果了。大约一分钟后，名称再次消失，只是无法连接。这是一个普遍问题还是我网站上的错误？当它工作时，游戏中心屏幕消失了，比赛开始了，这是我想要的。

游戏中心屏幕由以下代码调用：

 **```
UIViewController  *myView = [[UIViewController alloc] init];
UIView *viewHost = myView.view;
[[[CCDirector sharedDirector] openGLView] addSubview:viewHost];
[[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:myView delegate:self];
[myView shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeLeft]; 
```**

# c++ - 读取和写入图像数据 C++

> ID：14284063
> 
> 赞同：3
> 
> 时间：2013-01-11T18:04:36.543
> 
> 标签：c++, image, file

我刚刚开始学习 C++，我正在开发一个程序，该程序应该从硬盘中抓取图像，然后将其另存为另一个名称。原始图像仍应保留。我可以使用文本文件，因为我可以这样做：

```
ifstream fin("C:\\test.txt");
ofstream fout("C:\\new.txt");

char ch;
while(!fin.eof())
{
    fin.get(ch);
    fout.put(ch);
}

fin.close();
fout.close();
} 
```

但我想图像不是这样的。我是否必须安装一个库或类似的东西才能让它工作？或者我可以“只”使用包含的库吗？我知道我并不是真正的 C++ 专家，所以如果我完全错了，请告诉我。

我希望有人可以并且愿意帮助我！提前致谢！

顺便说一句，图像是 .png 格式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T18:09:00.730

您可以使用 std 流，但在打开流时使用 ios::binary 参数。它有据可查，互联网上有几个例子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:15:16.237

您显然正在使用 MS Windows：Windows 通过对行分隔符的不同处理来区分“文本”和“二进制”文件。对于二进制文件，您不希望它在阅读时转换`\n\r`为`\n`。为了防止这种情况，请在打开文件时使用 ios::binary 模式，正如[@Emil 告诉你](https://stackoverflow.com/a/14284119/198536)的那样。

顺便说一句，您不必`\\`在 windows 下的路径中使用。只需使用正斜杠：

```
ifstream fin("C:/test.txt"); 
```

这甚至可以在二战中使用 MS-DOS 进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:52:49.227

如果目标只是复制文件，那么[CopyFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363851%28v=vs.85%29.aspx)可能是比手动执行更好的选择。

```
#include <Windows.h>
// ...
BOOL const copySuccess = CopyFile("source.png", "dest.png", failIfExists);
// TODO: handle errors. 
```

如果使用 Windows API 不是一个选项，那么像您所做的那样一次复制一个字符的文件是非常低效的方法。正如其他人所指出的，您需要以二进制文件形式打开文件以避免 I/O 与行尾混淆。比一次一个字符更简单、更有效的方法是：

```
#include <fstream>
// ...
std::ifstream fin("source.png", std::ios::binary);
std::ofstream fout("dest.png", std::ios::binary);
// TODO: handle errors.
fout << fin.rdbuf(); 
```

# c++ - CMAKE on (tortoisesvn) SVN project :: 配置过程出错，项目文件可能无效

> ID：14284067
> 
> 赞同：0
> 
> 时间：2013-01-11T18:05:02.060
> 
> 标签：c++, svn, visual-c++, tortoisesvn, cmake

我已经从 SVN 签出了一个项目版本。以下是我在尝试从 SVN CMAKE 项目时遇到的不同类型的错误。可能是某些文件没有**签出**吗？请通过这三种错误并帮助我解决它。

==================类型1============================== ====
CMakeLists.txt:184 (add_subdirectory) 处的 CMake 错误：add_subdirectory 给定源“google/gmock”，它不是现有目录。

==================类型2============================== ====

未找到 Subversion 可执行文件。CMakeLists.txt:14 (UpLinqSVN_WC_INFO) 处的 CMake 错误：未知的 CMake 命令“UpLinqSVN_WC_INFO”。调用堆栈（最近调用优先）：CMakeLists.txt:207 (CreateVersionInfo)

========================类型3======================== ===================

CMake 错误：此项目中使用了以下变量，但它们设置为 NOTFOUND。请设置它们或确保它们在 CMake 文件中正确设置和测试： FFMPEG_AVCODEC_LIB 由目录 C:/Users/Krishna/Desktop/2.5/GUI 中的目标“UpLinq”链接 FFMPEG_AVCORE_LIB 由目录 C:/ 中的目标“UpLinq”链接Users/Krishna/Desktop/2.5/GUI FFMPEG_AVDEVICE_LIB 由目录 C:/Users/Krishna/Desktop/2.5/GUI 中的目标“UpLinq”链接

配置不完整，出现错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:44:30.827

错误 1 ​​确实表明 CMakeLists.txt 预计会有一个名为 google/gmock 的目录（相对于`add_subdirectory`在第 184 行调用的 CMakeLists.txt）。

如果没有更多信息，就无法判断这是 CMakeLists 文件还是存储库中的错误。

错误 2 的第一部分（找不到 Subversion exe）看起来像自定义错误消息。它可能正在项目根目录中寻找“.svn”文件夹，并假设 Subversion 可用。大概它然后寻找Subversion exe并且找不到它（可能不在路径中？）

error2 的第二部分（未知的 CMake 命令）是说在 CMakeLists.txt 的第 14 行，有一个命令`UpLinqSVN_WC_INFO`被调用。它不认为这是一个有效的命令，这可能意味着它被定义为一个[`function`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afunction)或[`macro`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3amacro)在某个地方的另一个 CMake 文件中。它需要在第 14 行调用*之前*进行定义。您正在执行的 CMakeLists.txt 可能会作为更大构建的一部分运行，这将在您的 CMakeLists.txt 开始之前定义此函数。

错误 3 表示有一个名为“UpLinq”（一个 exe 或 lib）的 CMake 目标，它依赖于`${FFMPEG_AVCODEC_LIB}`. 在某些时候，可能有人在[`find_library`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_library)寻找同样失败的 avcodec 库。搜索结果保存在变量`FFMPEG_AVCODEC`中，它显示`${FFMPEG_AVCODEC}`的值为`FFMPEG_AVCODEC-NOTFOUND`。

如果您需要更多帮助，则需要提供所涉及的 CMakeLists 文件相关部分的副本，以及有关您的环境/目录结构的更多信息。

# regex - 在 Scala 中解析 HTML 元标记

> ID：14284068
> 
> 赞同：0
> 
> 时间：2013-01-11T18:05:02.230
> 
> 标签：regex, scala

我正在尝试使用 Scala 解析元标记。我试过用 XML 匹配来做这个，比如

```
`html // meta ...` etc, 
```

但我收到格式错误的 XML 错误，因为此特定页面上的这些元标记没有结束标记或`... />`附件。

所以对于下面的 HTML，

```
val html = """<meta name="description" content="This is some meta description">""" 
```

我正在使用以下正则表达式匹配器：

```
val metaDescription = """.*meta name="Description" content="([^"]+)"""".r 
```

*   当我尝试匹配时，`val metaDescription(desc) = html`我得到一个 scala.MatchError。
*   当我尝试`metaDescription.findAllIn(html)`和迭代时，我得到了整个字符串——而不仅仅是描述。

我怎样才能得到里面的价值，`content`而不是别的？

**编辑**

我得到了我想要的结果：

```
metaDescription.findAllIn(html).matchData foreach {
  desc => println(desc.group(1))
} 
```

但这似乎还有很长的路要走。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:48:35.683

[Scala XML 和 TagSoup](http://blog.dub.podval.org/2010/08/scala-and-tag-soup.html%20%22Scala%20and%20TagSoup%2a)提供了一种直接在 Scala XML 中使用标签汤的方法。

如果您对替代方案持开放态度，那么[Scales Xml](https://github.com/chris-twiner/scalesXml "秤 Xml")提供了一种类似的有用方法来[通过替代 SAX 解析器解析 html](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.4.4/FullParsing.html#Direct_SAX_XMLReader_Usage "Scales Xml 替代 SAX")：

```
val html = loadXmlReader(htmlStream, parsers = AlternateSAXFactoryPool) 
```

该链接上提供了 Tagsoup 和 Nu.Validator 的示例工厂。

# ios - 暂停/播放其他应用程序的背景音频

> ID：14284069
> 
> 赞同：2
> 
> 时间：2013-01-11T18:05:02.017
> 
> 标签：ios

我知道这很可能在沙盒之外，但我想我还是会问：

我想在我的应用程序中放置一个“暂停/播放”按钮，该按钮将暂停或播放任何背景音频。基本上我正在寻找实现多任务栏中的播放/暂停按钮。

一个简单的例子是有人用 Pandora 应用为音乐添加星标，然后启动我的应用。是否可以暂停背景音频并恢复它？

出于好奇，我想知道是否有一种方法可以创建或广播“远程控制”事件。我可以向操作系统发布暂停/播放事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:57:00.160

我想[这](https://stackoverflow.com/questions/6448043/resume-background-audio-after-playing-sound-with-avaudioplayer)就是你要找的东西。诀窍是当您希望其他音频停止时，以静音循环一个简短的音频文件。然后按照链接中的建议在完成后告诉 iOS 音频系统。

# java - 使用 ProGuard 进行文件混淆

> ID：14284072
> 
> 赞同：1
> 
> 时间：2013-01-11T18:05:11.740
> 
> 标签：java, file, classpath, obfuscation, proguard

我想知道是否有人可以告诉我如何使用 proguard 在 jar 文件中混淆单个文件，或者只是两个文件。我希望保留每一个类，但我想要混淆的不是我唯一的选择，因为这需要大量时间并且非常乏味.. 那么，是否可以只混淆一个类？如果是这样，如何..提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:47:07.013

混淆单个类通常不是很有用：它很容易找到并且很容易进行逆向工程，因为其他类和对它们的引用仍然是可读的。因此，ProGuard 默认会混淆所有类（指定的类除外）。

话虽如此，这应该有效：

```
-keep class !mypackage.MySecretClass, !mypackage.MyOtherSecretClass {
    *;
} 
```

它保留除指定类之外的所有类的类/字段/方法名称。换句话说，它只会混淆指定的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:24:50.210

您可以排除除要混淆的项目之外的所有项目；请参阅[使用 proguard 时如何保留/排除特定的包路径？](https://stackoverflow.com/questions/4830474/how-to-keep-exclude-a-particular-package-path-when-using-proguard)

如果这看起来不切实际，一种解决方法是将要混淆的文件打包到自己的 jarfile 中，运行 ProGuard，然后将这些文件与要包含在新 jarfile 中的其他文件重新打包。

# php - PHP MVC - 没有动作的 URL

> ID：14284076
> 
> 赞同：1
> 
> 时间：2013-01-11T18:05:27.257
> 
> 标签：php, model-view-controller, url, frameworks, action

我目前正在使用 MVC URL 标准的 PHP 中创建自己的自定义 MVC 框架： **example.com/{controller}/{action}/{id}**

这很好用，但是，我的一个名为“books”的控制器不需要 URL 中的操作： **example.com/{controller}/{id}**

书籍控制器的 index 方法显示书籍列表： **example.com/books**

如果 ID 如下，我希望控制器显示特定的书： **example.com/books/47**

目前，我必须使用此 URL 来查看不太好的特定书籍： **example.com/books/view/47**

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:01:10.147

如果您想提供创建自定义 URL 的能力，那么您将不得不考虑创建路由机制。通常在 PHP 中它是通过使用简化的 URL 模式来完成的，这些模式被转换为正则表达式。

然后，当用户的请求在引导阶段得到处理时，路由机制将所有正则表达式应用到一个。当找到匹配时，选择适当的路由。

请求实例的结果状态是使用正则表达式提取的数据的组合，并辅以与每个模式相关联的默认值。

# xcode - 在 XCode 中从 SVN 存储库中删除文件

> ID：14284078
> 
> 赞同：2
> 
> 时间：2013-01-11T18:05:31.137
> 
> 标签：xcode, svn

我错误地将文件添加到 Xcode 中的项目中，并将其推送到服务器。现在我想删除它。

从本地项目中删除文件是否会导致在第一次提交时也将其从远程存储库中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:23:28.980

从 Xcode 项目中删除文件不会从存储库中删除文件。如果要从 Xcode 的存储库中删除文件，则必须使用 Organizer。

打开管理器并单击管理器顶部的存储库按钮。从管理器左侧的存储库列表中选择存储库的 Trunk 文件夹。选择要删除的文件。单击管理器底部的删除按钮以从存储库中删除文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T21:06:26.483

Subversion 就像 Roach 汽车旅馆之一：*文件签入，但从不签出*。

一旦你将一个文件添加到 Subversion，它就会***永远***存在。您可以从存储库的当前版本中删除它（通过`svn rm`命令），但您永远不能完全删除它。有人将始终能够在日志中看到它，并且有人可以通过在您删除文件之前检查该目录的修订来访问它。

关于这个*特性*有很多争论。大多数版本控制系统都有某种*删除*命令，允许您删除文件的版本或从存储库中完全删除文件。问题是 Subversion 不会修改文件——它会修改整个存储库。

我不知道 Xcode，所以我无法帮助您执行确切的步骤。但是，在 Xcode 中必须有一个 Repository 视图，就像在 Eclipse 中一样，或者是一系列处理存储库的子命令（很像 Eclipse 的*Team*命令）。您应该能够从那里删除该文件，然后提交您的更改。

这将从代码的最新版本（和未来版本）中删除该文件。但是，它仍然存在于存储库中，因此有人可以通过历史日志找到它，然后在您删除文件之前检查存储库的版本。如果此文件包含您的瑞士银行帐号，那么您就有麻烦了。

* * *

***注意***：有一种方法可以完全从 Subversion 中删除文件，但是您必须关闭存储库，将其转储，过滤掉文件，然后将存储库转储加载到新存储库中。通常不值得付出努力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T18:07:17.367

您可以从命令行使用`svn rm filename`

[http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.delete.html](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.delete.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T04:42:04.683

从 Xcode 中删除一个文件会在你提交时从你的远程仓库中删除它（用 svn 测试）。

使用 Xcode 4.6.3 我从我的项目中删除了一个文件。已提交，然后它又从我的远程存储库中删除。当你从 Xcode 中删除时，当提示你做什么时，你必须选择“移动到垃圾箱”。如果您选择“删除引用”，那么该文件将保留在您的远程存储库中，就像它仍然是您的项目文件的一部分但在实际的 Xcode 项目中没有被引用一样。

当你提交你的文件时，对上面有复选标记的文件进行计数，然后查看右下角 Xcode 报告的计数，Xcode 报告了一个额外的文件！那是已删除的文件，这意味着它正在提交该更改。

再次，在提交之前，转到终端并“cd”到您删除文件所在的目录。输入这个：

```
svn info ./yourFilesName.txt 
```

你会看到一个结果：

```
Schedule: delete 
```

这意味着当您进行提交时，该文件将从您的远程仓库中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T02:34:52.513

从 Xcode 中删除时，必须选择“移动到垃圾箱”，然后提交“.xcodeproj”文件

# php - JQuery - 将 HTML 加载到 textarea 中

> ID：14284082
> 
> 赞同：2
> 
> 时间：2013-01-11T18:05:37.543
> 
> 标签：php, jquery, html, mysql-real-escape-string

好的，我有这个 php 变量：

```
<?php
$htmlstring = '<p>This is a test email<br /><br /><br /></p>
<p><span style="color: #808080; font-size: 12px; font-family: Tahoma,sans-serif;"><strong>Some Text here with an apostophe or image: <br /><img title="Test Img" src="http://somefakeurl.com/img/somefakeimg.gif" alt="test img" width="112" height="59" />';
?> 
```

我在 main.php 的下面有这个

```
<textarea name="testload" id="testload"></textarea>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

   $("#testload").val('<?=$htmlstring;?>');

}); 
```

这不会显示。
但是，如果我将其更改为下面的代码，它将显示：

```
 $("#testload").val('<?=mysql_real_escape_string($htmlstring);?>'); 
```

我觉得我在包扎这个过程，但也许没关系？（另外，我计划将其他 html 动态加载到同一个 textarea 中，这只是为了测试单个 html 字符串）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:08:20.300

如果没有理由说明为什么要通过 jQuery 加载它，为什么不这样做：

```
<textarea name="testload" id="testload">
    <?php echo htmlspecialchars($htmlstring); ?>
</textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:13:57.463

您不需要为 SQL 转义它，但为 javascript。

```
$("#testload").val(<?= json_encode($htmlstring);?>); 
```

# jquery - 上传文件和数据jQuery

> ID：14284089
> 
> 赞同：0
> 
> 时间：2013-01-11T18:06:07.707
> 
> 标签：jquery, ajax, file-upload

我已经创建了一个表单来使用 jquery ajax 发送数据和文件。此代码与 firefox 分叉，但上传在 chrome 和其他浏览器中不起作用。

这是我的代码：html

```
<form method="post" enctype="multipart/form-data" id="form_foto">
<table>
<tr>
    <td class="form_label">
        <label for="nome">Nome</label>
    </td>
    <td class="form_input">
        <input type="text" name="nome" value="" id="nome" />
    </td>
</tr>
<tr>
    <td class="form_label">
        <label for="cognome">Cognome</label>
    </td>
    <td class="form_input">
        <input type="text" name="cognome" value="" id="cognome" />
    </td>
</tr>
<tr>
    <td class="form_label">
        <label for="email">Email</label>
    </td>
    <td class="form_input">
        <input type="text" name="email" value="" id="email" />
    </td>
</tr>
<tr>
    <td class="form_label">
        <label for="personaggio">Personaggio</label>
    </td>
    <td class="form_input">
        <input type="text" name="personaggio" value="" id="personaggio" />
    </td>
</tr>
<tr>
    <td class="form_label">
        <label class="form_label_upload" for="file">UPLOAD FOTO</label>
    </td>
    <td class="form_input">
        <div class="porel">
    <span class="file-wrapper">
        <input type="file" name="file-0" id="file" />
        <span class="button"></span>
    </span>
        </div>
    </td>
</tr>
<tr>
<td colspan="2">
<div class="footer_dialog">
<p><input type="submit" id="submit_form" value="" /></p> 
```

js代码：

```
(function ($) {
$.performAjaxSubmit = function() {

        var nome = document.getElementById("nome").value;
        var cognome = document.getElementById("cognome").value;
        var email = document.getElementById("email").value;
        var personaggio = document.getElementById("personaggio").value;
        var exist = document.getElementById("exist").value;
        var fb_id = document.getElementById("fb_id").value;
        var first_name = document.getElementById("first_name").value;
        var last_name = document.getElementById("last_name").value;

        emailExp = /^[^\s()<>@,;:\/]+@\w[\w\.-]+\.[a-z]{2,}$/i;

        if (nome.length == 0 ) {
            $("div.errore").html("Inserisci il nome");
            return false;
        }

        if (cognome.length == 0 ) {
            $("div.errore").html("Inserisci il cognome");
            return false;
        }

        if (personaggio.length == 0 ) {
            $("div.errore").html("Inserisci il personaggio");
            return false;
        }
        if (email.length == 0 || !emailExp.test(email) ) {
            $("div.errore").html("Inserisci l'email");
            return false;
        }

        var formdata = new FormData();
        formdata.append("nome", nome);
        formdata.append("cognome", cognome );
        formdata.append("email", email);
        formdata.append("personaggio", personaggio);

        var dim = $('input[type="file"]').length;
        for(j=0;j<dim;j++){
            $each($('input[type="file"]')[j].files, function(i, file) {
                formdata.append('file-'+j, file);
            });
        }

        var xhr = new XMLHttpRequest();
        xhr.open("POST","index.php/upload/index_upload", true);
        xhr.send(formdata);
        $("div#dialog_content").html("<img src='<?php echo base_url(); ?>asset/public/images/loading.gif'/>");
        xhr.onload = function(e) {
            if (this.status == 200) {
                $("div#dialog_content").html(this.responseText);
                //alert(this.responseText);
            }
            else{
                alert(this.responseText);
            }
        };
    }; 
```

与 firefox 配合得很好，在 chrome 和 safari 上有问题。任何想法？

我如何使用 ajax 发送数据和文件？我从这篇文章中获取了代码

[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects#Creating_a_FormData_object_from_scratch](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects#Creating_a_FormData_object_from_scratch)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:19:46.507

在 Internet Explorer 上通过“ajax”上传文件的唯一方法是使用 iframe，而其他浏览器支持通过 ajax 上传。您最好的方法是使用插件，如建议的那样。

就个人而言，我使用 jQuery 表单插件[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

# shell - Prosyst Shell 命令

> ID：14284092
> 
> 赞同：1
> 
> 时间：2013-01-11T18:06:25.373
> 
> 标签：shell, command, osgi

我已经在 felix 中实现了控制台命令行 shell 命令。

界面是

org.apache.felix.shell.Command

有人知道 Prosyst 中的类似接口吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:40:34.033

I contacted Prosyst and here is their answer:

The default command interface used by ProSyst is PluggableCommands. You may found further documentation on the API here:

[http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/api/bundles/com/prosyst/util/pcommands/PluggableCommands.html](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/api/bundles/com/prosyst/util/pcommands/PluggableCommands.html)

# asp.net-mvc - 实体框架和网络无状态问题

> ID：14284099
> 
> 赞同：0
> 
> 时间：2013-01-11T18:07:03.967
> 
> 标签：asp.net-mvc, entity-framework-5

由于Web的无状态问题，在创建ASP.NET Web Forms站点时避免使用Entity Framework更好吗？ViewState 和 Session 不支持像 DBContext 这样的不可序列化的类，这使得使用实体框架相当尴尬。

EF 是否更适合 ASP.NET MVC，因为它不依赖于 ViewState 和 Session？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:15:18.957

我会说这两者没有任何关系。

实体框架为在数据库中持久化信息创建了一个抽象。在 Web 应用程序中，其*状态*在 HTTP 请求期间存在，并且在响应结束时保留任何待处理的更改。EF 不需要在回发之间存储状态信息，因此视图状态和会话状态是不相关的。确实，数据库连接可以在请求之间保持打开状态，但是这是由连接池或驱动程序管理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:14:59.493

ASP.NET MVC 不依赖 ViewState，但默认情况下它仍然是无状态的。无论如何，EF 应该与 ASP.NET 和 ASP.NET MVC 一起使用，但您必须为每个处理的请求使用一个新的上下文实例。任何在请求中“存储”上下文的努力都是灾难的唯一途径。

# ios - iOS UI 自定义优化

> ID：14284103
> 
> 赞同：1
> 
> 时间：2013-01-11T18:07:22.643
> 
> 标签：ios, optimization, uiview, customization

我即将开始一个包含大量 UI 定制的大项目。例如，我需要一个看起来像这样的 UIView：

![在此处输入图像描述](../Images/75081fba82ae766bc045e754ea4d71b6.png)

所以我写了一个 UIView 自定义类，但我真的不知道我的代码是否经过优化以及是否有最好的方法来做到这一点，所以你能给我一些建议吗？

这是我的代码：

// DPIViewHeader.h

```
#define     HEADER_HEIGHT   30.0f
#define     HEADER_COLOR    [UIColor colorWithRed:161.0f/255.0f green:209.0f/255.0f blue:249.0f/255.0f alpha:1.0f]

#define     BORDER_WIDTH    2.0f
#define     BORDER_COLOR    [[UIColor colorWithRed:82.0f/255.0f green:159.0f/255.0f blue:210.0f/255.0f alpha:1.0f] CGColor]

#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface DPIViewWithHeaderTest : UIView

// properties
@property (strong, nonatomic) NSString *title;
@property (strong, nonatomic) UIColor *headerColor;

@property (strong, nonatomic) UIView *headerView;
@property (strong, nonatomic) UIView *contentView;

// methods
- (id)initWithFrame:(CGRect)frame title:(NSString *)title;
- (id)initWithFrame:(CGRect)frame title:(NSString *)title headerColor:(UIColor *)headerColor;

@end 
```

// DPIViewHeader.m

```
#import "DPIViewWithHeaderTest.h"

@implementation DPIViewWithHeaderTest

- (id)initWithFrame:(CGRect)frame title:(NSString *)title {
    self = [super initWithFrame:frame];
    if (self) {
        self.title = title;
    }
    return self;
}

- (void)layoutSubviews {
    // set header view and content view
    self.headerView = [[UIView alloc] initWithFrame:CGRectMake(self.bounds.origin.x, self.bounds.origin.y, self.frame.size.width, HEADER_HEIGHT)];
    self.contentView = [[UIView alloc] initWithFrame:CGRectMake(self.bounds.origin.x, self.bounds.origin.y + HEADER_HEIGHT, self.frame.size.width, self.frame.size.height - HEADER_HEIGHT)];

    // add title label
    UILabel *label = [[UILabel alloc] init];
    label.text = self.title;
    [label sizeToFit];
    label.center = CGPointMake(label.frame.size.width/2 + 10, self.headerView.frame.size.height/2);
    label.backgroundColor = [UIColor clearColor];
    [self.headerView addSubview:label];

    // set color header
    self.headerView.backgroundColor = HEADER_COLOR;

    // set border attributes
    self.layer.borderWidth = BORDER_WIDTH;
    self.layer.borderColor = BORDER_COLOR;

    self.headerView.layer.borderWidth = BORDER_WIDTH;
    self.headerView.layer.borderColor = BORDER_COLOR;

    // add subviews
    [self addSubview:self.headerView];
    [self addSubview:self.contentView];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:40:31.547

这真的取决于（就像一切一样:)）。让我告诉你为什么使用两种场景：

* * *

*   视图是不可定制的：

    *   如果将 DPIViewWithHeaderTest 嵌入到 UITableViewCell 中，那么由于内存使用率高，滚动性能将很糟糕。因此不适合此目的。

    *   下一个场景：只是一个简单的视图，在某个地方，具有静态背景和一些数据。还可以，但不是最好的解决方案。

### 好的解决方案

出于这两个目的，我建议创建图像。预渲染的图像被缓存并留下非常小的内存占用。此外，在这种情况下，您甚至可以创建可拉伸的。这不是很棒吗？

* * *

*   如果 UIView 必须是可定制的（如颜色、大小）怎么办？那么这是唯一的解决方案，但我会考虑根据目的重写实现。

    *   如果会有很多这样的视图，它们是动画的，例如这是 UITableViewCell 的背景，你应该考虑使用 QuartzCore/Core Graphics 来绘制它们以获得更好的性能。

    *   对于一个（或几个）视图，这个实现很好:)。

## 最后一条建议

一般来说，除非视图是可定制的，否则我建议创建图像。出于三个原因：性能、外观和易于创建。相信我，精心制作的图像比自定义绘图看起来更好:)

# f# - 如何为生成的程序集创建 F# 类型提供程序？

> ID：14284104
> 
> 赞同：9
> 
> 时间：2013-01-11T18:07:27.617
> 
> 标签：f#, type-providers

我在为 F# 生成类型提供程序使用在程序集中创建的任何类型时遇到问题。我创建了一个[YouTube 视频](http://youtu.be/pq7ap8mrN18)来演示这一点。

我收到的错误消息是：

*   编译单元“Addressbook1”中的模块/命名空间“教程”不包含命名空间、模块或类型“Person”
*   在程序集“Addressbook1”中找到对类型“tutorial.Person”的引用，但在该程序集中找不到该类型

我不明白，因为类型肯定在程序集中。为了解决这个问题，程序集是一个非常基本的 C# dll。视频中的代码可通过 git 获得：

git 网址：[https](https://code.google.com/p/froto/)
://code.google.com/p/froto/ git 分支：帮助

任何故障排除想法将不胜感激。我希望在[.proto 文件的 F# 类型提供程序](http://blog.ctaggart.com/2012/11/1st-build-of-f-type-provider-for-proto.html)上取得更多进展，但我坚持这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:30:14.767

我快速浏览了您的代码 - 正如我在评论中提到的，我认为使用由 F# 3.0 示例包定义并在 MSDN 上记录（有点）的 ProvidedTypes API 会更好地为您服务。

基本上，原始类型提供程序 API 有很多假设，您很难手动维护这些假设。我认为您遇到的具体问题是编译器希望看到`tutorial.Person`在您的程序集中命名的类型（因为它是 on 方法的返回类型`tutorial.AddressbookProto`，您将其公开为生成的类型），但它从未嵌入到你的大会。

然而，这实际上只是几个问题之一——您可能已经意识到，如果您定义的类型不是`tutorial.AddressbookProto`. 这是因为您使用具体类型作为返回 from `ApplyStaticArguments`，但您通常希望使用`System.Type`准确反映用户使用的命名空间和类型名称的合成实例（例如，在 ProvidedTypes API 中，`ProvidedTypeDefinition`该类继承自`System.Type`并处理此簿记）。

# c++ - QCalendarWidget 带日期

> ID：14284106
> 
> 赞同：0
> 
> 时间：2013-01-11T18:07:34.727
> 
> 标签：c++, qt, datetime, widget

我想要在按钮按下时弹出视觉元素并允许用户选择日期和时间。在 Qt 中是否有一些像 QCalendarWidget 这样的可视化小部件，但也有时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:45:04.637

*你在哪里看到过这样的弹出窗口？*

*希望，它适合你的问题。*您可以使用`QDateTimeEdit`选中的参数`calendarPopup`——在那里您将获得带有日历弹出窗口的日期和时间，以及在一个视觉元素中进行时间编辑的可能性。

# php - PHP表单复选框总是返回值

> ID：14284108
> 
> 赞同：1
> 
> 时间：2013-01-11T18:07:50.203
> 
> 标签：php, checkbox

即使未选中该复选框，它仍会返回值。我通过 Ajax 请求传递表单并打印返回的值，但检查或未检查的结果相同。Isset 也无法正常工作。

```
<input type="checkbox" value="Agree" id="siteAgreement">

if(!isset($siteAgreement) || !$siteAgreement || $siteAgreement != "Agree"){
//////Unchecked
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:07:57.827

改变

```
siteAgreement = $("#siteAgreement").value; 
```

像这样：

```
siteAgreement = $("#siteAgreement").is(':checked') ? $("#siteAgreement").val() : null; 
```

但是您还应该添加名称属性，以便关闭 javascript 的浏览器也可以使用您的站点。

您还可以使用一些从表单自动生成请求的代码（例如[jquery.form](http://malsup.com/jquery/form/)），因此您不必在更改表单时更新 javascript。

这里的例子：http: [//jsfiddle.net/RhasK/](http://jsfiddle.net/RhasK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:09:04.737

在这里试试这个：

```
 if(!isset($_POST['siteAgreement']) || !$_POST['siteAgreement'] || $_POST['siteAgreement'] != "Agree"){
 //////Unchecked
 } 
```

除非您之前提取了变量，否则不会设置 $siteAgreement。您可以使用`$_POST['nameofelement']`来访问数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:10:54.033

```
if($_POST["siteAgreement"] !== "Agree") {
//not checked
} 
```

会正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T18:12:20.617

您只需要检查它是否已设置。

```
if(!isset($_POST['siteAgreement'])){
//then it is unchecked
} 
```

另外，您没有给输入命名。你需要放...

```
<input type="checkbox" name="siteAgreement" value="Agree" id="siteAgreement"> 
```

您需要一个名称才能在 PHP 中访问它。

# visual-studio-2010 - 调试器总是保存我的项目，我不能后退

> ID：14284111
> 
> 赞同：0
> 
> 时间：2013-01-11T18:08:02.427
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, visual-studio-debugging

我经常需要回到之前的里程碑。有一个恶性循环：我的错误只在调试过程中暴露出来，但我不能后退，因为调试器已经保存了我的项目。

在简单的项目中，我总是用来制作我的 cpp 文件的副本（只需保留 ctrl 并稍微给你的文件下药）。

但是现在项目变得更加复杂（带有头文件）。我曾尝试使用保存解决方案作为。但它似乎只是重命名 sln 文件而不复制整个项目。

那么，我该怎么办？像我对文件一样复制整个项目？

这个问题看起来有点笨拙，但真的让我很困扰：有什么优雅的决定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:17:08.007

您可以使用 SVN 或 Git 等软件版本控制系统来撤消节省并返回到项目中的前一点，您还可以使用一些 Visual Studio 扩展，例如[ankhsvn](http://ankhsvn.open.collab.net/)和[Gitextention](http://code.google.com/p/gitextensions/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:22:05.437

如果您使用的是 vs 2010，您可以从 Tools>Options>Projects and Solutions>Build and Run 禁用保存构建事件

# php - 将变量设置为sql查询的字段名

> ID：14284116
> 
> 赞同：0
> 
> 时间：2013-01-11T18:08:35.967
> 
> 标签：php, mysql, variables, dynamic

我的目标是将变量设置为 mysql 查询中的字段名称。下面的一些伪代码

```
1\.    $query = "SELECT firstName, lastName FROM users WHERE userName = 'mhopkins321';"
2\.    $result = mysql_query($result);
3\.    $while($row = mysql_fetch_assoc($result)){
4\.         $column1 = name_of_column($row['firstName']);
5\.    }
6\.    echo $column1

      //Would return the string

      firstName 
```

显然第 4 行是真正的伪部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:10:57.473

你想用列名来命名一个变量吗？

```
$$row['firstName'] = $row['firstName']; 
```

另一种方式是这样的：

```
 $query = "SELECT firstName, lastName FROM users WHERE userName = 'mhopkins321'";
    $result = mysql_query($result);
    $row = mysql_fetch_assoc($result);

    foreach($r as $key=>$value){
        $$key = $value;
    } 
```

现在您可以通过列名来回显这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:27:10.257

这听起来是多余的，但你总是可以使用 array_search：

```
while($row = mysql_fetch_assoc($result)){
    $value = $row['firstName'];
    $key = array_search($value, $row);
} 
```

[在array_search](http://php.net/manual/en/function.array-search.php)上查看更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T18:46:08.843

这就是你所追求的吗？

```
$query = "SELECT firstName, lastName FROM users WHERE userName = 'mhopkins321';"
$result = mysql_query($result);

$all_results = array();
$while($row = mysql_fetch_assoc($result)) {
     $formatted_row = array();
     foreach ( $row as $column => $value ) {
         $formatted_row[] = array($column, $value);
     }
     $all_results[] = $formatted_row;
} 
```

或者只是在循环中使用`$column`以及`$value`您喜欢的方式。`foreach`

或者您是否特别想要第一列，可以使用 访问`reset($row); $first_key = key($row);`？

# javascript - 使用 HTML5 File API 检查文件是否已更改

> ID：14284124
> 
> 赞同：15
> 
> 时间：2013-01-11T18:09:40.047
> 
> 标签：javascript, html

好的，所以我有一个程序可以将一些特定数据输出到制表符分隔的变量文件中。

我一直在使用 Excel 打开和查看文件内容，但是我发现 excel 坚持锁定它打开的每个文件非常烦人，因为如果我在 Excel 中打开文件，我的程序会崩溃......但我真的很喜欢每次运行程序后数据都会整齐地更新，因此我不必一直关闭并重新打开文件。

因此，我决定使用 Javascript 来解析文件并将其显示在 html 表格中是最简单的，而且确实如此。我很快就把东西撞到了一起。现在，如果我将文件保留在显示屏上，我的程序不会崩溃，但是，它仍然没有更新……而且我每次都必须打开新生成的文件。

所以，我想知道是否有一种机制可以让我的 Javascript 以某种方式通知另一个进程对文件的更改？我知道这不太可能，但我想避免出于明显的原因简单地轮询文件。

我对 JS 非常熟悉，但 HTML5 和新的 API 对我来说都是新的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T18:14:39.190

我不相信[File API](http://www.w3.org/TR/FileAPI/)有任何文件更改事件，只有进度事件等。

2020 年 8 月更新：下面的替代方案不再有效，规范[明确禁止它](https://w3c.github.io/FileAPI/#file-section)，指出`File`对象的信息必须反映基础文件在被选中时的状态。从规范：

> 用户代理应努力将 File 对象的快照状态设置为获取引用时磁盘上底层存储的状态。如果在进行引用之后文件在磁盘上被修改，则文件的快照状态将不同于底层存储的状态。

* * *

~~你可以使用轮询。记住 的[`lastModifiedDate`](http://www.w3.org/TR/FileAPI/#dfn-lastModifiedDate)，`File`然后当您的轮询函数触发时，获取`File`输入的新实例并查看 是否`lastModifiedDate`已更改。~~

这适用于我在 Chrome 上，例如：[Live Copy](http://jsbin.com/ajepef/1) | [来源](http://jsbin.com/ajepef/1/edit)

```
(function() {
  var input;
  var lastMod;

  document.getElementById('btnStart').onclick = function() {
    startWatching();
  };
    function startWatching() {
        var file;

        if (typeof window.FileReader !== 'function') {
            display("The file API isn't supported on this browser yet.");
            return;
        }

        input = document.getElementById('filename');
        if (!input) {
            display("Um, couldn't find the filename element.");
        }
        else if (!input.files) {
            display("This browser doesn't seem to support the `files` property of file inputs.");
        }
        else if (!input.files[0]) {
            display("Please select a file before clicking 'Show Size'");
        }
        else {
            file = input.files[0];
      lastMod = file.lastModifiedDate;
            display("Last modified date: " + lastMod);
      display("Change the file");
      setInterval(tick, 250);
        }
    }

  function tick() {
    var file = input.files && input.files[0];
    if (file && lastMod && file.lastModifiedDate.getTime() !== lastMod.getTime()) {
      lastMod = file.lastModifiedDate;
            display("File changed: " + lastMod);
    }
  }

  function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = msg;
    document.body.appendChild(p);
  }
})();
```

```
<input type='file' id='filename'>
<input type='button' id='btnStart' value='Start'>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-29T20:20:07.583

这个问题有两种解决方案，而且`<input type="file">`不是其中之一。根据规范，它会创建文件的“快照”。

* * *

# 本机文件系统

此[api](https://github.com/wicg/native-file-system/issues/)是实验性的，需要在闪烁时启用标志（又名 chromium 浏览器）。这个想法是你得到一个文件句柄，当你需要文件时，你调用异步“getFile”函数来检索实际文件。

此功能是一项“强大功能”，需要您的网站安全，并且无法在沙盒 iframe 中使用。

所以这里没有测试是一些“黑暗中的代码”：

```
// triggerd on click
async function pickFile () {
  const handle = showOpenFilePicker()
  let lastModificationTime = 0

  async function compare () {
    const file = await handle.getFile()
    if (file.lastModified > lastModificationTime) {
      lastModificationTime = +file.lastModified
      console.log(await file.text())
    }
  }

  setInterval(compare, 1000)
} 
```

* * *

# 通过拖放获取条目

与本机文件系统类似，您也可以检索文件句柄并执行相同的操作，但此功能适用于当今的所有浏览器。但是这个代码片段在 stackoverflow 中不起作用，因为它使用了一些沙盒使其不兼容，所以这里[有](https://jsfiddle.net/7cs4bote/)一些评论

```
function drop(event) {
  event.stopPropagation();
  event.preventDefault();

  // get the file as an fileEntry (aka file handle)
  const fileEntry = event.dataTransfer.items[0].webkitGetAsEntry()
  let lastModificationTime = 0

  async function read (file) {
    // use the new async read method on blobs.
    console.log(await file.text())
  }

  function compare (meta) {
    if (meta.modificationTime > lastModificationTime) {
      lastModificationTime = meta.modificationTime
      fileEntry.file(read)
    }
  }

  setInterval(fileEntry.getMetadata.bind(fileEntry, compare), 1000)
} 
```

编辑：现在还有一种方法可以将拖放文件作为 FileSystemFileHandle 更好地使用

```
elem.addEventListener('dragover', evt => {
  // Prevent navigation.
  evt.preventDefault()
})
elem.addEventListener('drop', async evt => {
  // Prevent navigation.
  evt.preventDefault()

  // Process all of the items.
  for (const item of evt.dataTransfer.items) {
    // kind will be 'file' for file/directory entries.
    if (item.kind === 'file') {
      const entry = await item.getAsFileSystemHandle();
      if (entry.kind === 'file') {
        // use same solution as the first Native File System solution
      }
    }
  }
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-17T12:01:55.980

虽然 TJ Crowder 的回答是正确的，但 Chrome 的实现似乎违反了规范。

> 每个 Blob 都必须有一个内部快照状态，如果存在任何此类底层存储，则必须将其初始设置为底层存储的状态，并且必须通过结构化克隆进行保存。可以为文件找到快照状态的进一步规范定义。

选择文件时，输入具有此点的内容的快照。磁盘上的本地更改不会更新快照。

# html - 同一类标签上的 CSS 嵌套规则

> ID：14284134
> 
> 赞同：3
> 
> 时间：2013-01-11T18:10:27.423
> 
> 标签：html, css, nested

我有两种css样式，其中第二种我只想在第一种出现时生效。我该怎么做呢？我知道您可以将多个类添加到类标记中，但是以相同的方式嵌套 css 标记似乎不起作用。

```
.stat{float: left; width: 200px; height: 40px; padding: 5px; margin: 5px; border: 1px solid #000;}
.stat .red{background-color: #c00;}

<!-- This should have the background color -->
<div class="stat red">

<!-- This should not have the background color -->
<div class="red">

<!-- This should not have the background color -->
<div class="stat"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:12:03.743

只留下空间：

```
.stat.red{background-color: #c00;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T18:41:24.867

只是为了澄清

```
.stat .red { ... } 
```

或者更准确地说，类名之间的“”称为后代选择器。在您的情况下，这意味着只有具有类“red”的元素，即具有类“stat”的元素的**后代**才会成为目标。例如

```
<div class="stat">
   <div class="red"></div>
</div> 
```

# php - 我如何动态创建此表单

> ID：14284135
> 
> 赞同：0
> 
> 时间：2013-01-11T18:10:30.573
> 
> 标签：php, html

我将使用 php 动态创建一个 HTML 表单。使用该表格，用户可以选择不同类别下的主题。一个类别及其主题已分解为一个逻辑部分并应用了 jquery 手风琴。在我的表单中，我需要创建更多这样的逻辑部分。

```
// Check SESSION fromm category page
if ( isset ( $_SESSION['category']) && is_array( $_SESSION['category'])) { 

    $categoryIds = implode(',', $_SESSION['category']);

    $q = "SELECT  c. category_id AS ci, c.category_name AS cn, s.subject_name AS sn, s.subject_id AS si
            FROM    category AS c 
            INNER JOIN category_subjects AS cs ON cs.category_id = c.category_id
            INNER JOIN subjects AS s ON s.subject_id = cs.subject_id
          WHERE   c.category_id IN ($categoryIds)";

    $r = mysqli_query( $dbc, $q) ;

    $catID = false;
    $max_columns = 2;

    while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC))
    {
        $categoryId = $row['ci'];
        $category = $row['cn'];

        $subjects = array();

        $subjects[] = $row['sn'];

        echo '<div>';

        //Detect change in category
        if($catID != $categoryId) 
        {
            echo "<h3>Category 01: <span>{$category}</span><span></span></h3>";
            echo "<div class='container'>";

            echo '<table>'; 

            $j = 0;

            foreach ( $subjects AS $sub ) {
                if($j%2 == 0 && $j == 0)
                {
                    echo '<tr>';
                    echo '<td width="50%"><input type="checkbox" value="1" name="subjects[]">'.$sub.'</td>';
                }
                else if($j%2 == 0)
                {
                    echo '</tr><tr>';
                    echo '<td width="50%"><input type="checkbox" value="1" name="subjects[]">'.$sub.'</td>';
                }
                echo '<td width="50%"><input type="checkbox" value="1" name="subjects[]">'.$sub.'</td>';
                $j++;
            }
            echo '</tr>'; 
            echo '</table>';    
            echo "</div> <!-- End .container DIV -->\n";            
        }
        $catID = $categoryId;       
        echo '</div>';
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:24:44.817

您将必须有 2 个循环，如下所示。

```
foreach/for loop to create the categories
{
 foreach/for another loop inside above loop to create levels
 here you can have a table with two columns`<td>`

  Apply below logic to create a row with two columns`<td>`
  //$i is the counter, when you loop through once you increase the $i by one.
  if($i%2 == 0)
  //add new `<tr>`. If it's $i != 0 close the <tr> before opening one.
} 
```

如果您有任何问题，请告诉我。

我们假设如下。从 SQL 创建如下数组

```
 levels_array[1][] = "pre school" //cat 1 levels
    levels_array[1][] = "pre school 1" //cat 1 levels 
    levels_array[1][] = "pre school 2"  //cat 1 levels
    levels_array[2][] = "school 2"  //cat 2 levels
    levels_array[2][] = "school 2"  //cat 2 levels
    levels_array[3][] = "college" //cat 3 levels

    cat_array[1] = "catgeory 1" 
    cat_array[2] = "catgeory 2" 
    cat_array[3] = "catgeory 3" 

for($i = 1; < count($cat_array); $i++)
{

foreach(levels_array[$i] as $item)
{
//create the table with the above mentioned logic
}

} 
```

根据更新的问题

```
echo '<table>'; $j = 0;
foreach ( $subjects AS $sub ) {
if($j%2 == 0 && $j == 0)
{
  echo '<tr>';
  echo '<td>'.$sub.'</td>';
}
else if($j%2 == 0)
 {
  echo '</tr><tr>';
  echo '<td>'.$sub.'</td>';
 }
echo '<td>'.$sub.'</td>';
$j++;

}
echo '</tr>'; 
echo '</table>'; 
```

# wpf - WPF 中的 DispatcherObject 强制转换问题和 Async / ObservableCollection 问题

> ID：14284136
> 
> 赞同：0
> 
> 时间：2013-01-11T18:10:32.200
> 
> 标签：wpf, multithreading, events, asynchronous, observablecollection

下面的代码从 Access 2010 数据库中提取了一堆记录；因此滚动我自己的连接器位。我已经成功地完成了 observablecollection 并通过我自己的对象的漂亮拖放数据源将其全部绑定在一起。但是，像一个愚蠢的人一样，我想异步执行此操作。然而，我有一个小怪物问题，我不知道该喂它什么！谁能给我建议-我已经尝试了很多阅读，但是在星期五下午，这些概念一次太多了，我正在努力取得任何真正的进展。

我遇到的问题是： `Dim dispatcherObject As DispatcherObject = CType (handler.Target, DispatcherObject )`

例外是： `Unable to cast object of type '_Closure$__2[SomeRecord_Viewer.SomeRecord]' to type 'System.Windows.Threading.DispatcherObject'.`

我已经设法通过下面的代码填充了 WPF 列表框，但是只能通过注释掉 ObservableCollectionEx 类的一部分。这会导致同步问题并在输入数百条记录后崩溃。

构建实体的线程列表的类 - 在本例中为 ObservableCollectionEx(Of SomeRecord)：

```
Class SomeRecordSet
Inherits ObservableCollectionEx( Of  SomeRecord)

Private Shared Property _SomeRecordList As New ObservableCollectionEx(Of  SomeRecord )
Public Shared ReadOnly Property SomeRecordList As ObservableCollectionEx(Of  SomeRecord )
    Get
        If _SomeRecordList.Count = 0 Then BuildSomeRecordListAsync()
        Return _SomeRecordList
    End Get
End Property

Public Shared ReadOnly Property ReturnSingleSomeRecord(id As Integer) As SomeRecord
    Get
        Return ( From SomeRecord In _SomeRecordList Where SomeRecord.id = id Select        SomeRecord).First()
    End Get
End Property

Private Shared Async Sub BuildSomeRecordListAsync()
    Await Task.Run( Sub() BuildSomeRecordList())
    Return
End Sub

Private Shared Sub BuildSomeRecordList()
    Db.newcmd( "Select * from  RecordList ")
    While Db.read
        Dim SomeRecord As New SomeRecord
        With SomeRecord
            .id = Db.dbint( "ID")
            .type = Db.dbin( "type")
         End With
        _SomeRecordList.Add(SomeRecord)
    End While
End Sub` 
```

SomeRecord 类的部分代码：

```
Class SomeRecord
Implements INotifyPropertyChanged
Public Event PropertyChanged As PropertyChangedEventHandler Implements                   INotifyPropertyChanged.PropertyChanged
Private Sub NotifyPropertyChanged( ByVal info As String)
    RaiseEvent PropertyChanged(Me , New PropertyChangedEventArgs (info))
End Sub

...'lots of simple properties.
End Class 
```

线程集合类代码 - 翻译自另一个在线资源。

'我使用 PostSharp 来尝试捕捉东西。` Public Class ObservableCollectionEx (Of T) Inherits ObservableCollection(Of T) ' 覆盖事件，以便此类可以访问它 Public Shadows Event CollectionChanged As System.Collections.Specialized.NotifyCollectionChangedEventHandler

```
Protected Overrides Sub OnCollectionChanged( ByVal e As System.Collections.Specialized.NotifyCollectionChangedEventArgs )

    Using BlockReentrancy()

        Dim eventHandler As System.Collections.Specialized.NotifyCollectionChangedEventHandler = Sub () RaiseEvent CollectionChanged(Me , e)
        If (eventHandler Is Nothing) Then Return

        Dim delegates() As [Delegate] = eventHandler.GetInvocationList
*******If I comment this out I can populate the Listbox via a CollectionView, however it dies with issues to do with the list not staying synchronised :).
        'Walk thru invocation list 
        For Each handler As System.Collections.Specialized.NotifyCollectionChangedEventHandler     In delegates
            Dim dispatcherObject As DispatcherObject = CType (handler.Target, DispatcherObject)
            ' If the subscriber is a DispatcherObject and different thread
            If (( Not (dispatcherObject) Is Nothing) AndAlso (dispatcherObject.CheckAccess = False )) Then
                ' Invoke handler in the target dispatcher's thread
                dispatcherObject.Dispatcher.Invoke(DispatcherPriority .DataBind, handler, Me, e)
            Else
                handler( Me, e)
            End If
        Next

*******End of stuff I comment out to get working partially***

    End Using
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:41:14.730

据我所知，你有两个问题。

1.  您将局部变量分配给`eventHandler`匿名方法，而不是实际的事件处理程序。它应该是：

    ```
    Dim eventHandler As NotifyCollectionChangedEventHandler = CollectionChangedEvent 
    ```

    *注意：*您需要`CollectionChangedEvent`在 VB 中使用，而不是`CollectionChanged`.

2.  您`CType`用于将目标强制转换为 a `DispatcherObject`，如果目标不是 a ，这将不起作用`DispatcherObject`。改用`TryCast`：

    ```
    Dim dispatcherObject As DispatcherObject = TryCast(handler.Target, DispatcherObject) 
    ```

您还可以使用以下命令整理下一行的测试`IsNot`：

```
If dispatcherObject IsNot Nothing AndAlso Not dispatcherObject.CheckAccess Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:40:25.753

警告 - 下面的代码与 C# 版本的行为不同。关键的区别似乎在于，在 VB 中你不能覆盖事件（为什么不呢？）但在 C# 中你可以。

结果是 Handler 在 VB 中是 Nothing 但在 C# 中不是 :(。

所以语法构建没有错误，但 VB 版本没有做任何事情。

用 VB 中的更新答案重做。谢谢！

请注意，我还不能使用 Entity Framework 进行这项工作。但我认为这是我和 EF 的问题，而不是集合。

代码本身在这里供任何感兴趣的人使用。我的列表现在确实填充得很好。但是，我会用一小撮盐来回答我的这个答案，直到我更新说我可能已经广泛测试了:)

然而，预兆是好的 - 这是原始 C# 作者的站点：[Original Site](http://geekswithblogs.net/NewThingsILearned/archive/2008/01/16/have-worker-thread-update-observablecollection-that-is-bound-to-a.aspx)

```
Public Class ObservableCollectionEx(Of T)
Inherits ObservableCollection(Of T)

'Override the event so this class can access it
Public Shadows Event CollectionChanged As NotifyCollectionChangedEventHandler

Protected Overrides Sub OnCollectionChanged(ByVal e As NotifyCollectionChangedEventArgs)
    Using BlockReentrancy()
        Dim eventHandler As System.Collections.Specialized.NotifyCollectionChangedEventHandler = CollectionChangedEvent
        If eventHandler Is Nothing Then
            Return
        End If

        Dim delegates() As [Delegate] = CollectionChangedEvent.GetInvocationList
        'Walk thru invocation list
        For Each handler As NotifyCollectionChangedEventHandler In delegates
            Dim dispatcherObject As DispatcherObject = TryCast(handler.Target, DispatcherObject)
            ' If the subscriber is a DispatcherObject and different thread
            If dispatcherObject IsNot Nothing AndAlso Not dispatcherObject.CheckAccess Then
                ' Invoke handler in the target dispatcher's thread
                dispatcherObject.Dispatcher.Invoke(DispatcherPriority.DataBind, handler, Me, e)
            Else
                handler(Me, e)
            End If
        Next
    End Using
End Sub 
```

结束类

# wcf - 客户端服务器通信

> ID：14284139
> 
> 赞同：0
> 
> 时间：2013-01-11T18:10:37.177
> 
> 标签：wcf, client, client-server, communication, client-side

我正在公开分发一个可以安装在用户 PC 上的应用程序。客户端将定期与服务器通信以从客户端发送信息。服务器必须确认成功接收到信息。有时，服务器会与客户端进行单向通信。我的问题是当客户端大规模分布时，进行客户端-服务器通信的最佳/防故障/推荐方式是什么？我目前专注于自托管服务来进行通信。如果客户端 IP 地址频繁更改，我应该采取什么预防措施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:08:53.030

我的建议是：

*   在默认端口上使用 HTTP 或 HTTPS。*我*非常了解您将无法控制网络限制、防火墙、NAT 穿越等。使用 HTTP(S) 并通过简单的 Web 请求从客户端发起连接将为您省去很多麻烦。
*   定期/智能地使用轮询来解决*偶尔*由服务器启动的数据传输。在工作站上运行的客户端不会有公共 IP 地址，更不用说固定的了。

# python - Python：这两个 import 语句有什么区别？

> ID：14284141
> 
> 赞同：4
> 
> 时间：2013-01-11T18:10:47.527
> 
> 标签：python, import, tuples

它们在我看来在功能上都一样。使用其中一个有什么区别和优势吗？

```
>>> from datetime import datetime, timedelta
>>> from datetime import (datetime, timedelta) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T18:13:22.183

如果您将导入包装在括号中，则如果您在导入语句中放置换行符，则不必使用反斜杠来续行，这是首选样式。从功能上讲，它们是相同的，如果在一行上，省略括号会更干净。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T18:13:43.943

两者都是一样的：

```
In [17]: import dis

In [18]: def func1():
   ....:     from datetime import datetime, timedelta
   ....:     

In [19]: def func2():
   ....:     from datetime import (datetime, timedelta)
   ....:     

In [20]: dis.dis(func1)
  2           0 LOAD_CONST               1 (-1)
              3 LOAD_CONST               2 (('datetime', 'timedelta'))
              6 IMPORT_NAME              0 (datetime)
              9 IMPORT_FROM              0 (datetime)
             12 STORE_FAST               0 (datetime)
             15 IMPORT_FROM              1 (timedelta)
             18 STORE_FAST               1 (timedelta)
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE        

In [21]: dis.dis(func2)
  2           0 LOAD_CONST               1 (-1)
              3 LOAD_CONST               2 (('datetime', 'timedelta'))
              6 IMPORT_NAME              0 (datetime)
              9 IMPORT_FROM              0 (datetime)
             12 STORE_FAST               0 (datetime)
             15 IMPORT_FROM              1 (timedelta)
             18 STORE_FAST               1 (timedelta)
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-11T18:11:13.867

除了第一个看起来对我来说更好一点之外[没有任何区别。](http://docs.python.org/2/reference/simple_stmts.html#the-import-statement)

[附带说明一下， PEP 8](http://www.python.org/dev/peps/pep-0008/#imports)似乎也在示例中使用了第一种形式，尽管它没有明确排除首选第二种形式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T18:19:50.363

@sr2222 的答案的补充。一般来说，如果你想在下一行继续写，你只需要这些括号。例如，您可以通过以下两种方式使用括号在两行上声明一个字符串：

```
In [1]: s1 = 'abc' \
   ...:     'def'

In [2]: s1
Out[2]: 'abcdef'

In [3]: s2 = ('abc'
   ...:    'def')

In [4]: s2
Out[4]: 'abcdef' 
```

例如，if 语句也是如此。使用括号将表达式拆分为多行：

```
In [6]: if 1 in \
   ...:     [1,2,3]:
   ...:     pass

In [7]: if (1 in
   ...:     [1,2,3]):
   ...:     pass 
```

两个版本在功能上是相同的。但是使用括号而不是反斜杠是一种更好的样式。您的导入语句也是如此。如果整个表达式适合一行，则根本不需要括号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T19:03:05.160

**不，没有任何区别**。逗号和方括号是元组文字的通用 Python 语法。你可能会在任何地方看到它们。正如您所发现的，语法有两种变体，因为括号是可选的。两种选择都返回相同的值：

```
>>> 4,5
(4, 5)

>>> (4,5)
(4, 5) 
```

但是在一些更复杂的上下文中，解析器对逗号的理解不同，所以如果你真的想要一个元组，就必须使用括号。例如`f(3,4)`不等于`f((3,4))`.

[请参阅http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)和[http://docs.python.org/](http://docs.python.org/2/reference/grammar.html)上的文档[2/reference/grammar.html](http://docs.python.org/2/reference/grammar.html)（硬核）

# mongodb - 查找带有子属性条件的查询 找不到模型

> ID：14284152
> 
> 赞同：0
> 
> 时间：2013-01-11T18:11:12.820
> 
> 标签：mongodb, mongoose

我想提出一个简单的`findOne`请求，我有一个问题试图在“子属性”上设置条件。

我试图找到的模型确实存在于我的 bdd 上，但我每次都去这个`else`案例：

```
Model.findOne({ email : { value: 'toto@gmail.com' } }, 'username email', function(error, User){
    if (error){
        console.log('Error query.');
    }else if (User){
        console.log('User found from email.'); //Expected to go here
    }else{
        console.log('Any user found.'); //Goes here everytime
    }
}); 
```

我想这很正常，因为我不在“子属性”上的其他查询运行良好，那么该怎么做（从“子属性”中查找模型）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:17:38.350

您需要使用[点符号](http://docs.mongodb.org/manual/core/document/#dot-notation)来查询子文档的字段：

```
Model.findOne({ 'email.value': 'toto@gmail.com' }, ... 
```

# scroll - YUI 对话框不滚动

> ID：14284155
> 
> 赞同：0
> 
> 时间：2013-01-11T18:11:28.200
> 
> 标签：scroll, yui

我正在使用 YUI Dialog。但即使在溢出到自动之后，垂直滚动条也不会出现。如果我在创建对话框时给出高度属性，它工作正常

```
Here is the  code http://jsfiddle.net/SNfcG/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:34:00.000

我认为您将需要动态设置高度以使其获得滚动条（因此根据页面加载时的视口大小设置高度，然后在调整窗口大小时将其重置）。我不认为 YUI2 面板可以为您提供开箱即用的功能。

# facebook-apps - 生成 App ID 和 App Secret 时出错

> ID：14284157
> 
> 赞同：0
> 
> 时间：2013-01-11T18:11:44.190
> 
> 标签：facebook-apps, blacklist

> **可能重复：**
> [网站无效 - 但它是](https://stackoverflow.com/questions/10190649/site-not-valid-but-it-is)

我的网站开发人员要求我生成一个`App ID`，`App Secret`但我被卡住了，因为系统正在生成一条错误消息：`App Domain is not a valid domain. Site URL is not a valid URL.`我很确定我输入了正确的信息。不久前，我认为一个竞争对手将我的 URL 列入了黑名单，尽管它今天才上线。我认为这可能是原因。如果是这样，我该怎么办？

请问有人可以帮忙吗？

# css - 使用 CSS 裁剪图像以在屏幕上居中调整大小

> ID：14284159
> 
> 赞同：3
> 
> 时间：2013-01-11T18:11:56.870
> 
> 标签：css

我正在尝试拍摄图像并将其置于屏幕中央。假设图像是屏幕的整个宽度，例如 1400px ---

当您调整浏览器窗口的大小时，我试图让图像裁剪但随着浏览器窗口变小而保持居中。

这可以用css吗？

我用溢出尝试了一些东西：隐藏 - 没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:13:50.470

我会看一下背景大小，然后将其垂直和水平居中。

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# c - 设置对话框不可调整大小或创建另一个 gtk 窗口

> ID：14284166
> 
> 赞同：0
> 
> 时间：2013-01-11T18:12:07.507
> 
> 标签：c, gtk, gtk3

我有一个包含 4 个按钮的 gtk_window。
其中一个按钮将打开一个文件选择对话框（另一个功能），当文件被选择时，它会显示一个带有 3 gtk_entry 的对话框（这个功能）。

```
static void function_with_3_gtk_entry (gchar *message, gpointer mainwin){
   GtkWidget *dialog, *label, *content_area, *entry1, *entry2, *entry3;
   /* Create the widgets */
   dialog = gtk_dialog_new_with_buttons ("Nome File", mainwin, GTK_DIALOG_DESTROY_WITH_PARENT, GTK_STOCK_OK, GTK_RESPONSE_NONE, NULL);
   content_area = gtk_dialog_get_content_area (GTK_DIALOG (dialog));
   entry1 = gtk_entry_new();
   entry2 = gtk_entry_new();
   entry3 = gtk_entry_new();
   gtk_widget_set_size_request(dialog, 250, 200);

   /* Ensure that the dialog box is destroyed when the user responds */
   g_signal_connect_swapped (dialog, "response", G_CALLBACK (gtk_widget_destroy), dialog);

   /* Add the label, and show everything we've added to the dialog */
   gtk_container_add (GTK_CONTAINER (content_area), entry1);
   gtk_container_add (GTK_CONTAINER (content_area), entry2);
   gtk_container_add (GTK_CONTAINER (content_area), entry3);
   gtk_widget_show_all (dialog);
} 
```

我的问题是：

1.  我可以在这个函数中使用另一个 gtk_window 而不是 gtk_dialog 吗？
2.  如何设置对话框**不可调整大小**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:32:14.527

下面的代码片段有两个功能：

*   create_dialog() 创建一个不能按要求调整大小的对话框。

*   create_window() 根据要求在函数内创建一个窗口。

希望这可以帮助。

```
#include <gtk/gtk.h>

/* Create a dialog, which cannot be resized by the user. */

void create_dialog(GtkWidget *button, gpointer window) {
    GtkWidget *dialog, *label, *content_area;

    /* New label for dialog content */
    label = gtk_label_new("This is a dialog!");

    /* Make a new dialog with an 'OK' button */
    dialog = gtk_dialog_new_with_buttons("This is a dialog, which (shouldn't | can't) be resized!", window, GTK_DIALOG_DESTROY_WITH_PARENT, GTK_STOCK_OK, GTK_RESPONSE_NONE, NULL);

    /* Add label to dialog */
    content_area = gtk_dialog_get_content_area(GTK_DIALOG(dialog));
    gtk_container_add(GTK_CONTAINER(content_area), label);

    /* Destroy dialog properly */
    g_signal_connect(dialog, "response", G_CALLBACK(gtk_widget_destroy), dialog);

    /* Set dialog to not resize. */
    gtk_window_set_resizable(GTK_WINDOW(dialog), FALSE);

    gtk_widget_show_all(dialog);
}

/* Create a window, while in a function! */

void create_window(GtkWidget *button, gpointer window) {
    GtkWidget *new_window, *label;

    /*New label for dialog content */
    label = gtk_label_new("This is a window, created in a function!");

    /* Create new window */    
    new_window = gtk_window_new(GTK_WINDOW_TOPLEVEL);

    /* Add label to window */
    gtk_container_add(GTK_CONTAINER(new_window), label);

    gtk_widget_show_all(new_window);
}

/* Boring implementation bits */
gint main(gint argc, char **argv) {

    /* Initialise GTK+ */
    gtk_init(&argc, &argv);

    GtkWidget *main_win, *dialog_button, *window_button, *button_container;

    /* Create a button, one for each function. */    
    dialog_button = gtk_button_new_with_label("Create dialog!");    
    window_button = gtk_button_new_with_label("Create window!");

    /* Pack buttons into a box. */
    button_container = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 5);
    gtk_box_pack_start(GTK_BOX(button_container), dialog_button, FALSE, FALSE, 0);
    gtk_box_pack_start(GTK_BOX(button_container), window_button, FALSE, FALSE, 0);

    /* Connect signals to button callback functions */    
    g_signal_connect(dialog_button, "clicked", G_CALLBACK(create_dialog), main_win);
    g_signal_connect(window_button, "clicked", G_CALLBACK(create_window), main_win);

    /* Create a new window, show it, and run GTK+ */
    main_win = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    g_signal_connect(main_win, "destroy", G_CALLBACK(gtk_main_quit), NULL);
    gtk_container_add(GTK_CONTAINER(main_win), button_container);
    gtk_widget_show_all(main_win);
    gtk_main();
    return 0;
} 
```

# google-app-engine - 如何在 djangoappengine 中反转光标？

> ID：14284168
> 
> 赞同：1
> 
> 时间：2013-01-11T18:12:19.393
> 
> 标签：google-app-engine, django-nonrel, djangoappengine

我正在开发需要对链接列表进行分页的应用程序。我将 django non-rel 与 djangoappengine 一起使用。

我知道在 djangoappengine.db.utils 中找到的函数 set_cursor 和 get_cursor 可以很容易地向前导航：

```
paginate_by = 25
queryset = Link.objects.all()

cursor = request.GET.get('cursor') #Alternatively passed via ajax in a POST request
if cursor:
    queryset = set_cursor(queryset, cursor)

links = queryset[0:paginate_by]
next_cursor = get_cursor(links) 
```

但是，我正在努力向后导航。GAE 中的官方程序是[反转光标并使用反转查询](https://developers.google.com/appengine/docs/python/ndb/queries#cursors)。这利用了作为 Cursor 类一部分的[reversed()](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/datastore/datastore_query.py?r=229#1403)函数，我不确定是否可以在 Django 中访问该函数。

但是如何在 djangoappengie 中反转光标？

如果不可能，我认为另一种方法是存储游标客户端，通过 ajax 传递它们，然后根据页码生成查询。不过，我更愿意尽可能地遵循官方程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:28:33.977

我不知道回答你自己问题的政策是什么......经过[进一步研究](https://groups.google.com/forum/m/?fromgroups#!topic/google-appengine-python/1CvBVBZOlTg)，我发现了一个反转光标的函数，即：

```
from google.appengine.datastore import datastore_query
def reverse_cursor(cursor):
    return datastore_query.Cursor.from_websafe_string(cursor).reversed().to_websafe_string() 
```

我会将其存储在我的 utils.py 中，并且获得反向光标应该很简单。

# android - 如何以编程方式输入新行？

> ID：14284169
> 
> 赞同：1
> 
> 时间：2013-01-11T18:12:21.567
> 
> 标签：android, utf-8, character-encoding, character, ascii

我的应用程序具有发送电子邮件功能，在这封电子邮件中，我希望它说如下内容：

> 你好，
> 
> 这是一封电子邮件。

我的问题是如何以编程方式在`Hello,`and之间输入新行`This is an email`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:14:48.453

采用 ：

“你好，\r\n这是一封电子邮件。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:14:31.193

像这样：

```
txtV.setText(Html.fromHtml("Hello<br>This is an Email")); 
```

# python - Emacs：如何为 iPython、pylint 和自动补全支持配置 Emacs？

> ID：14284170
> 
> 赞同：6
> 
> 时间：2013-01-11T18:12:24.253
> 
> 标签：python, emacs, ipython, emacs24

我是一名中级 Python 程序员，使用 Eclipse 和 Pydev 插件。现在我打算改用 Emacs 来加快编码速度。我正在为 Emacs 配置而苦苦挣扎，并希望添加对 iPython、pylint 和 Python 自动完成的支持。我安装了 Emacs24.2。

*   **如何将 iPython、Python 自动完成和 pylint 添加到我的 Emacs24.2？**
*   **你能另外推荐一个教程或howto吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:25:47.810

几乎所有东西都可以从[python 的 emacswiki 页面找到](http://emacswiki.org/emacs/PythonProgrammingInEmacs)

至于设置，youtube上有很多视频。

# c# - 如何通知客户列表已被修改

> ID：14284171
> 
> 赞同：1
> 
> 时间：2013-01-11T18:12:33.177
> 
> 标签：c#, asp.net, wpf

我需要回答以下问题，假设应用程序是 ASP.NET 应用程序或 WPF 应用程序。

您在两台不同的机器上有两个屏幕，一个具有员工列表，另一个具有添加员工屏幕 添加员工后可以做什么 显示员工列表的屏幕会收到一条消息，表明已添加员工。

请指教，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:21:10.190

如果您使用**ObservableCollection**，您可以侦听**CollectionChanged**事件并检查参数是否已添加项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:24:34.170

ASP.NET 服务器无法通知客户端有关更改。您必须使用诸如 SignalR (http://signalr.net/) 之类的外部库来强制客户端与服务器永久保持连接，并有可能通知客户端有关更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T20:42:35.747

您可以使用 WCF 服务在客户端之间进行调解。当员工被添加时，第一个客户将信息发送给服务。然后 WCF 服务向第二个客户端发送回调。请参阅[WCF 回调](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)

# mongodb - q.setOrder(...) 在 DataNucleus + MongoDB 中非常慢

> ID：14284175
> 
> 赞同：0
> 
> 时间：2013-01-11T18:12:47.200
> 
> 标签：mongodb, jdo, datanucleus, nosql

我有一个带有 MongoDB 数据存储和 JDO 实现的最新稳定 DataNucleus (3.0.1)。该集合有大约 100 万份文档。“id”字段被索引。此代码需要几分钟才能执行：

```
Query q = pm.newQuery(CellMeasurement.class);
q.setOrdering("id descending");
q.setRange(0, count);
Collection<CellMeasurement> result = (Collection<CellMeasurement>)q.execute(); 
```

如果我删除`q.setOrdering(...)`一切正常，因为`count=1000`加载大约需要一秒钟。

看起来 DN 进行了内存重新排序，这有什么意义吗？MongoDB 本身通过这个索引字段立即订购，API 支持订购..

任何想法 ？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:28:15.607

查看日志（对于任何应用程序）显然会发现很多；在这种情况下，实际执行的是什么查询。在这种情况下，它会很容易地告诉您，当前没有实现排序以在数据存储中执行。

显然，任何人都可以为这种自首次发布以来一直是开源的代码库做出贡献。org.datanucleus.store.mongodb.query.QueryToMongoDBMapper 方法“compileOrdering”是您需要实现的地方，然后在完成后将补丁附加到 JIRA 问题。谢谢

# ruby-on-rails - haml rails 表单 - html 显示为原始而不是呈现为 html

> ID：14284176
> 
> 赞同：5
> 
> 时间：2013-01-11T18:12:49.867
> 
> 标签：ruby-on-rails, haml

我正在使用 haml 3.1.4 和 haml-rails 0.3.5

我遇到的问题仅发生在服务器（生产）和本地（测试）上，但不在开发中（两者似乎都使用相同的 gem 版本）

```
=form_for @thing, :remote => true do |f|
  =hidden_field_tag :template, 'thing'
  %table
    %thead
      %tr
        %th
          Name
        %th
          =image_tag 'cancel.png'
    %tbody
      =f.fields_for :items do |item_fields|
        %tr
          %td
            =f.text_field :name
          %td
  =f.submit 'Save' 
```

它输出以下 html 保存文本：

```
<input type='hidden' value='thing' /><table><thead><tr><th>Name</th><th><img src='cancel.png.....' /></tr></thead> 
```

其次是上面呈现的html。

如何缩小测试/生产和开发之间的差异？

有任何想法吗？:)

编辑：值得一提的是，这是页面上“@thing”的第二种形式。第一个渲染得很好，第二个是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:12:24.707

我有几个理论。

空格在haml中非常重要。您是否有可能在某处有标签而在其他地方有空格？

你`form_for`的两个都有`remote: true`吗？这会创建一些额外的 div 输出，我想如果它重用 id 可能会混淆 DOM。

你确定你使用的是`=`on`form_for`因为没有它，它不会输出 HTML 表单标签。

恐怕我只是在猜测，这些都不能解释为什么它在开发中起作用。

也许它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:20:59.240

从外观上看，您没有关闭标签，这是您的问题吗？无论如何，关于缩小 test/prod/dev 之间的差异，您确实需要检查`/config/`文件夹的内容。我可以建议进行测试，您可以使用`Rails.env == "development"`来选择您的环境，然后尝试**调试器**并寻找差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:47:41.950

您可能正在使用两种不同版本的haml。可能是一个版本对“=”之后的空格更严格。我会这样写：

```
= form_for @thing, :remote => true do |f|
  = hidden_field_tag :template, 'thing'
  %table
    %thead
      %tr
        %th Name
        %th= image_tag 'cancel.png'
    %tbody
      = f.fields_for :items do |item_fields|
        %tr
          %td= f.text_field :name
          %td
  = f.submit 'Save' 
```

# javascript - 如何实例化具有由函数设置的属性的对象，即在正确的时间调用它们？

> ID：14284185
> 
> 赞同：0
> 
> 时间：2013-01-11T18:13:12.453
> 
> 标签：javascript, google-apps-script

这是我的代码。基本上，我正在创建一个对象，它的一些属性是由实例化对象后需要运行的函数设置的。我正在 Google Scripts 代码编辑器中开发它，它运行时没有错误，但实际上并没有做任何事情。

此函数由时间触发器定期调用

```
function addFoldersToSites(){

  //DriveObject class, has a folder id and page url, and uses those to get attachments
  function DriveObject(folder_id,page_url) {
    this.folder_id = folder_id
    this.page_url = page_url
    this.files = setFiles
    this.page = setPage
    this.attachments = setAttachments
  }
  function setFiles(){return DocsList.getFolderById(this.folder_id).getFiles();}
  function setPage(){return SitesApp.getPageByUrl(this.page_url);}
  function setAttachments(){return this.page.getAttachments();}

  //instantiate drive objects
  //if you want to add drive things to new site pages, this is where you do it
  //*************************************************************************
  var engpage = new DriveObject('0B6esS6X9k9LvWWFfc1oyN0VfeTg','https://sites.google.com/a/drawbrid.ge/resources/engineering/files');
  var productpage = new DriveObject('0B6esS6X9k9LveUI0dmxxLWplaTA','https://sites.google.com/a/drawbrid.ge/resources/engineering/files');
  var adminpage= new DriveObject('0B6esS6X9k9LvVUVDUlBWWWhJcDg','https://sites.google.com/a/drawbrid.ge/resources/home/files');
  var genonboarding = new DriveObject('0B6esS6X9k9LvbjRtanE4eGNkdlE','https://sites.google.com/a/drawbrid.ge/resources/home/general-onboarding');
  var salespage= new DriveObject('0B6esS6X9k9LvQ2JJN0pCblNyME0','https://sites.google.com/a/drawbrid.ge/resources/sales/files');
  var researchpage = new DriveObject('0B6esS6X9k9LvM1RKeHVXRkNBZ1k','https://sites.google.com/a/drawbrid.ge/resources/market-research');

  //function that iterates through folder files and puts them in the google site frame
  function showFolderInSite(attachments, page, files) {
    var attachments = attachments
    var page = page
    var files = files

    for (i in attachments) {
      attachments[i].deleteAttachment();
    }

    for (i in files) {
      page.addWebAttachment(files[i].getName(), '', files[i].getUrl());
    }
  }

  //run functions
  showFolderInSite(engpage.attachments,engpage.page,engpage.files)
  showFolderInSite(productpage.attachments,productpage.page,productpage.files)
  showFolderInSite(adminpage.attachments,adminpage.page,adminpage.files)
  showFolderInSite(genonboarding.attachments,genonboarding.page,genonboarding.files)
  showFolderInSite(salespage.attachments,salespage.page,salespage.files)
  showFolderInSite(researchpage.attachments,researchpage.page,researchpage.files)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:15:41.857

一次实例化具有所有属性的对象的唯一原子方法是将它们全部传递给构造函数。

然后，构造函数可以使用这些参数来调用可能需要处理这些参数作为正确初始化的一部分的任何其他函数。

所以，你基本上有这两个选择（第一个是更原子的初始化器）：

```
function myConstructor(a, b, c, d, e, f) {
    this.whatever = a;
    this.aabb = processArg(b, c);
    // etc...
}

var myObj = new myConstructor(true, 3, "foo", 4, 5, 6); 
```

或这个：

```
function myConstructor() {
}
myConstructor.prototoype = {
    init1: function(a, b) {},
    init2: function(a, b) {},
    init3: function(a, b) {},
}

var myObj = new myConstructor();
myObj.init1(true, 3);
myObj.init2("foo", 4);
myObj.init3(5, 6); 
```

第一个选项更具原子性，并且对调用者进行所有正确的初始化调用的负担更小，但是如果有多种不同的方法来初始化对象，则第二个选项更加灵活。我更喜欢前者，因为通常最好减少调用者搞砸的方式，但有时第二个选项的灵活性很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:54:04.753

我认为这就是您要寻找的（还要确保 DocsList 和 SitesApp 是可访问的）：

```
function addFoldersToSites(){

        //DriveObject class, has a folder id and page url, and uses those to get attachments
        function DriveObject(folder_id,page_url) {
            this.folder_id = folder_id;
            this.page_url = page_url;
            this.showFolderInSite();
        }
        DriveObject.prototype = {};
        DriveObject.prototype.constructor = DriveObject;
        DriveObject.prototype.files = function setFiles(){return DocsList.getFolderById(this.folder_id).getFiles();}
        DriveObject.prototype.page = function setPage(){return SitesApp.getPageByUrl(this.page_url);}
        DriveObject.prototype.attachments = function setAttachments(){return this.page.getAttachments();}
    //function that iterates through folder files and puts them in the google site frame
        DriveObject.prototype.showFolderInSite = function showFolderInSite() {
            var attachments = this.attachments();
            var page = this.page();
            var files = this.files();

            for (i in attachments) {
                attachments[i].deleteAttachment();
            }

            for (i in files) {
                page.addWebAttachment(files[i].getName(), '', files[i].getUrl());
            }
        }

        //instantiate drive objects
        //if you want to add drive things to new site pages, this is where you do it
        //*************************************************************************
        var engpage = new DriveObject('0B6esS6X9k9LvWWFfc1oyN0VfeTg','https://sites.google.com/a/drawbrid.ge/resources/engineering/files');
        var productpage = new DriveObject('0B6esS6X9k9LveUI0dmxxLWplaTA','https://sites.google.com/a/drawbrid.ge/resources/engineering/files');
        var adminpage= new DriveObject('0B6esS6X9k9LvVUVDUlBWWWhJcDg','https://sites.google.com/a/drawbrid.ge/resources/home/files');
        var genonboarding = new DriveObject('0B6esS6X9k9LvbjRtanE4eGNkdlE','https://sites.google.com/a/drawbrid.ge/resources/home/general-onboarding');
        var salespage= new DriveObject('0B6esS6X9k9LvQ2JJN0pCblNyME0','https://sites.google.com/a/drawbrid.ge/resources/sales/files');
        var researchpage = new DriveObject('0B6esS6X9k9LvM1RKeHVXRkNBZ1k','https://sites.google.com/a/drawbrid.ge/resources/market-research');
    } 
```

# r - ggplot不再在组之间绘制连接线意味着什么？

> ID：14284189
> 
> 赞同：4
> 
> 时间：2013-01-11T18:13:26.010
> 
> 标签：r, ggplot2

我似乎错过了 ggplot2 工作方式的变化。我有一个来自统计教科书的例子（A. Field (2012), Discovering statistics using R, p. 593），我确信它有效，但现在不再在分组数据的平均值之间产生连接线。

这是示例数据：

```
participant<-gl(20, 9, labels = c("P01", "P02", "P03", "P04", "P05", "P06", "P07", "P08", "P09", "P10", "P11", "P12", "P13", "P14", "P15", "P16", "P17", "P18", "P19", "P20" ))
drink<-gl(3, 3, 180, labels = c("Beer", "Wine", "Water"))
imagery<-gl(3, 1, 180, labels = c("Positive", "Negative", "Neutral"))
groups<-gl(9, 1, 180, labels = c("beerpos", "beerneg", "beerneut", "winepos", "wineneg", "wineneut", "waterpos", "waterneg", "waterneut"))
attitude<-c(1, 6, 5, 38, -5, 4, 10, -14, -2, 26, 27, 27, 23, -15, 14, 21, -6, 0, 1, -19, -10, 28, -13, 13, 33, -2, 9, 7, -18, 6, 26, -16, 19, 23, -17, 5, 22, -8, 4, 34, -23, 14, 21, -19, 0, 30, -6, 3, 32, -22, 21, 17, -11, 4, 40, -6, 0, 24, -9, 19, 15, -10, 2, 15, -9, 4, 29, -18, 7, 13, -17, 8, 20, -17, 9, 30, -17, 12, 16, -4, 10, 9, -12, -5, 24, -15, 18, 17, -4, 8, 14, -11, 7, 34, -14, 20, 19, -1, 12, 43, 30, 8, 20, -12, 4, 9, -10, -13, 15, -6, 13, 23, -15, 15, 29, -1, 10, 15, 15, 12, 20, -15, 6, 6, -16, 1, 40, 30, 19, 28, -4, 0, 20, -10, 2, 8, 12, 8, 11, -2, 6, 27, 5, -5, 17, 17, 15, 17, -6, 6, 9, -6, -13, 30, 21, 21, 15, -2, 16, 19, -20, 3, 34, 23, 28, 27, -7, 7, 12, -12, 2, 34, 20, 26, 24, -10, 12, 12, -9, 4)

longAttitude<-data.frame(participant, drink, imagery, groups, attitude) 
```

这是情节代码：

```
library(ggplot2)
attitudeInt <- ggplot(longAttitude, aes(drink, attitude, colour = imagery))
attitudeInt + stat_summary(fun.y = mean, geom = "point") + 
              stat_summary(fun.y = mean, geom = "line", aes(group = imagery)) + 
              stat_summary(fun.data = mean_cl_boot, geom = "errorbar", width = 0.2) + 
              labs(x = "Type of Drink", y = "Mean Attitude", colour = "Type of Imagery") 
```

零件`stat_summary(fun.y = mean, geom="line", aes(group = imagery))`不应该准确地绘制这些连接线吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T19:34:03.460

这不会解决问题，`ggplot2`但这是解决方法。

首先总结你的数据。与您用于`mean_cl_boot`计算置信区间的原始代码一样，然后在此示例中也使用了。

```
library(plyr)
dfAtt<-ddply(longAttitude,~drink+imagery,function(x) mean_cl_boot(x$attitude))

dfAtt
  drink  imagery      y      ymin     ymax
1  Beer Positive  21.05  15.65000 26.90750
2  Beer Negative   4.45  -2.60125 12.00000
3  Beer  Neutral  10.00   5.49750 14.75000
4  Wine Positive  25.35  22.40000 28.25000
5  Wine Negative -12.00 -14.40000 -9.49875
6  Wine  Neutral  11.65   8.95000 14.40125
7 Water Positive  17.40  14.40000 20.45000
8 Water Negative  -9.20 -12.25000 -6.34875
9 Water  Neutral   2.35  -0.75125  4.90000 
```

然后绘制您的数据：

```
ggplot(dfAtt, aes(x=drink, y=y, colour=imagery,group=imagery)) + 
  geom_errorbar(aes(ymin=ymin, ymax=ymax), width=.2) +
  geom_line() +
  geom_point() +
  labs(x = "Type of Drink", y = "Mean Attitude", colour = "Type of Imagery") 
```

![在此处输入图像描述](../Images/383d0763ef6fc453a91405fd89b8c6d1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T14:32:00.277

正如[Brian Diggs](https://stackoverflow.com/users/892313/brian-diggs)指出的，这是一个[已知的错误](https://github.com/hadley/ggplot2/issues/739)，最近[已修复](https://github.com/hadley/ggplot2/issues/739#ref-commit-deb4c50)。因此，将 ggplot2 升级到 0.9.3.1 或更高版本应该会在 stat_summary 中恢复正确的线条绘制行为。

# javascript - 计算窗口宽度，包括滚动条 - CSS 媒体查询与 JS

> ID：14284203
> 
> 赞同：3
> 
> 时间：2013-01-11T18:14:06.233
> 
> 标签：javascript, jquery, css, window, media-queries

假设我已经正确推断出问题，似乎 CSS`min-screen`宽度补偿了滚动条（正如预期的那样），而 JS 似乎没有做同样的事情:(

我在 Mac OSX 上使用 Firefox。我不确定这是否是特定于浏览器的，但我想知道是否有针对此问题的通用解决方案。

我做了一个[JS fiddle 来演示这个问题](http://jsfiddle.net/norsewulf/Zc9ef/)。在我的浏览器中，CSS 和我的 JS 计算的宽度之间有 15px 的差异。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:25:13.453

我似乎找到了我的问题的答案，但我不确定这是否是计算正确宽度的最有效方法。

这个想法是给`body`元素`overflow:hidden;`，然后运行函数来计算窗口宽度，然后删除`overflow:hidden;`样式。

像这样：

```
function minScreen480(){

    document.body.style.overflow = "hidden";
        if ($(window).width() >= 480) {
            // Do stuff
        }else{
            // Do stuff
        }
    document.body.style.overflow = "";
}

$(window).resize(function(){
    minScreen480();
}).trigger('resize'); 
```

似乎工作。这写得更好吗？

# crystal-reports - 在水晶报表中表示字段之前使用存储过程

> ID：14284208
> 
> 赞同：0
> 
> 时间：2013-01-11T18:14:28.390
> 
> 标签：crystal-reports, crystal-reports-xi, crystal-reports-2010

我想在 ASP.NET 的报表查看器中表示之前删除 HTML 标记，因此我在 sql server 中创建了 strip html 函数并在过程中调用它，如下面的代码所示：

```
CREATE PROCEDURE removeHTMLtags
@report_description NVARCHAR(MAX) 
  AS   
  BEGIN
    select dbo.stripHTML(@report_description);      
  END 
```

我的数据库字段名称与我的输入参数名称相同。然后，当我添加表格时，我将此过程添加到我的水晶报表中。我将report_description 字段从过程拖放`removeHTMLtags`到我的报表设计器中，在提示部分中，我将该`report_description`字段设置为空，但是当我切换到报表预览时，什么也没有发生。

如何解决此问题，并在我的字段显示在报表查看器中之前调用我的过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:46:26.507

老实说，我不认为水晶有这么聪明。

我可能会创建一个视图，它基本上将 report_description_stripped 列添加到原始表中。然后只需将视图添加到您的报告中，而不是原始表格。

大号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T14:50:30.620

@report_description 是需要您的 HTML 的参数。您说过，当您在 Crystal Reports 中预览报表时，您将 @report_description 设置为 null，这意味着您没有传递任何内容供您的存储过程处理，这就是您在报表上看不到任何内容的原因。为了使您的报告能够正常工作，当 Crystal 提示您填写 @report_description 时，您需要传入一些 HTML。

总之，要开始解决您的问题，当您在 Crystal 中预览报告时，将一些 HTML 复制/粘贴到您的参数字段中。

# c# - 如何使用 MemoryStream 而不是 FileStream

> ID：14284216
> 
> 赞同：1
> 
> 时间：2013-01-11T18:14:39.780
> 
> 标签：c#

我目前将文件写入文件系统，然后使用 FileStream 将其作为下载提供给用户。但是，不需要额外的 Document In Memory to File System to Stream 步骤。我应该从 Document In Memory 转到 Stream。我玩得很开心，尽管我正在弄清楚如何做到这一点。

现在我正在使用这个：

```
Stream dl = new FileStream(filepath, FileMode.Open, FileAccess.Read); 
```

但是我该怎么做才能`Stream dl`从`DocumentFormat.OpenXml.Wordprocessing.Document caf_doc`我的记忆中得到。我想我需要使用 MemoryStream。

我遇到的麻烦是将文档放入 MemoryStream。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:21:36.773

创建一个内存流并将文档保存到其中。然后重置内存流的位置，你可以从中读取：

```
using (MemoryStream m = new MemoryStream()) {
  caf_doc.Save(m);
  m.Position = 0;
  // here you can read from the stream m
} 
```

# php - 从 PHP 错误加载 XML：Microsoft.XMLHTTP.DocumentElement null

> ID：14284220
> 
> 赞同：0
> 
> 时间：2013-01-11T18:14:49.403
> 
> 标签：php, javascript, xml, google-maps, xmldom

我正在尝试根据在 mysql 数据库中提交的值在谷歌地图上放置标记。使用 PHP 动态加载 xml 时，由于 responseXML.DocumentElement 属性未得到重视，因此不会在地图上放置任何标记。当我从静态文件加载 XML 时它可以工作，而不是从数据库动态加载时。

这是不起作用的页面：[http](http://www.thirstygolfer.com/utils/maptest2.html)
://www.thirstygolfer.com/utils/maptest2.html 这是起作用的页面：[http ://www.thirstygolfer.com/utils/maptest1.html](http://www.thirstygolfer.com/utils/maptest1.html)

这是生成 xml 的 PHP 文件：www.thirstygolfer.com/utils/xmldump3.php

这是来自 thirstygolfer.com/utils/xmldump3.php 的 PHP 代码（减去数据库连接信息）：

```
<?php

$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node); 

$result=mysql_query("SELECT * FROM Main WHERE State='MA' and FirstLetter='A'");

header("Content-type: text/xml");

while ($row = mysql_fetch_assoc($result)){    

$node = $dom->createElement("marker");   
$newnode = $parnode->appendChild($node);     
$newnode->setAttribute("id",$row['id']);  
$newnode->setAttribute("lat", $row['Lat']);    
$newnode->setAttribute("lng", $row['Lon']);    
} 

echo $dom->saveXML();

?> 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:36:25.690

您生成的 XML 在输出顶部包含空白行，这将使其无效 XML。这可能是因为包含的 PHP 文件在第一个之前`<?php`或最后一个之后都有空行`?>`

您可能还需要进行设置`header('Content-Type: text/xml')`，以便浏览器知道它是什么类型的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:42:09.557

XML 上的标头不正确（来自[web-sniffer.net](http://web-sniffer.net/)）

```
HTTP Response Header
Name    Value   Delim
Status: HTTP/1.1 200 OK
Date:   Fri, 11 Jan 2013 18:38:04 GMT   
P3P:    policyref="http://info.yahoo.com/w3c/p3p.xml", CP="CAO DSP COR CUR ADM DEV TAI PSA PSD IVAi IVDi CONi TELo OTPi OUR DELi SAMi OTRi UNRi PUBi IND PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA POL HEA PRE LOC GOV"   
Content-Type:   text/html   
Age:    0   
Connection: close   
Server: YTS/1.19.11: 
```

Content-Type 必须是“text/xml”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:23:33.543

此问题已解决。感谢您的帮助。我的代码有两个问题：

1.) 内容类型是“text/html”。我需要将以下行添加到我的 php 脚本中：

```
header("Content-type: text/xml"); 
```

2.) xml 文件顶部有空行。IE 处理了它，但 Chrome 和 FF 有问题。我删除了文件顶部的多余行，它现在可以在所有浏览器中使用。

# node.js - Restify 中的双重内容类型支持

> ID：14284222
> 
> 赞同：0
> 
> 时间：2013-01-11T18:15:05.317
> 
> 标签：node.js, restify

我正在撞到一堵砖墙。我需要我的 API 允许通过常规表单发布 (application/x-www-form-urlencoded) 和 JSON (application/json) 进行访问。

如果传入的请求是 application/json 内容类型，我需要使用 req.body 而不是 req.params。

完全不知道如何做到这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:25:14.463

一种选择是在收集数据的位置添加条件语句。

```
if(req.get('Content-Type') == "application/json") {
    data = JSON.parse(req.body);
}
else {
    data = req.params;
} 
```

# angularjs - 玉中的角类表达

> ID：14284224
> 
> 赞同：5
> 
> 时间：2013-01-11T18:15:10.963
> 
> 标签：angularjs, pug

有没有办法在玉中做到[这一点？](https://stackoverflow.com/questions/13607569/complex-angular-js-ng-class)我尝试过几种不同的方法，但没有运气。我也找不到类似的东西。

我试过

```
.animated.{{class}} 
```

但它编译为

```
<div class="animated">.{{class}} 
```

而不是（想要的）

```
<div class="animated {{class}}"> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T18:49:18.517

这应该为你做：

```
.animated(class='{{class}}') 
```

# javascript - 让 TypeScript 知道加载的对象

> ID：14284228
> 
> 赞同：1
> 
> 时间：2013-01-11T18:15:27.103
> 
> 标签：javascript, typescript

我正在尝试使用 Google Analytics 做一些工作。您加载的 google js 将`gapi`变量添加到`window`dom 对象。

编写 TypeScript 时不会抱怨对象`gapi`上不存在的事实。`window`

我正在尝试检测`gapi`文件是否已加载，如果没有，则从我的脚本中动态加载它。

GAPI 没有我可以找到的类型定义，因此我试图弄清楚如何检查它是否已加载到 DOM 中。我已经能够通过 Chrome 上的控制台和 jQuery 检查它的（非）存在，所以两者都是一个选项。只是无法弄清楚如何在 TypeScript 中执行此操作，因为它根本不知道`gapi`。

如果您还没有使用过 Google Analytics js 库。它返回 a`window.gapi`和`gapi`ref 供您在`code`/中使用`DOM`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:34:23.980

要使 TypeScript 知道您将使用的添加：

```
interface Window {
    gapi: any;
} 
```

或更短的：

```
declare var gapi: any; 
```

您可以选择充实定义。

这应该允许您使用 gapi，包括在您的检测脚本中：

```
if (typeof gapi === 'undefined') ... 
```

# php - 一个游戏的 PHP MySql 评分页面

> ID：14284232
> 
> 赞同：0
> 
> 时间：2013-01-11T18:15:49.237
> 
> 标签：php, mysql

分数页面上的逻辑是什么：

*   所有玩家中的当前用户顺序（如#115）：MySql SELECT for all users ORDER BY score DESC 然后检查当前用户在哪里？

*   更好的两个分数：获取当前用户，然后 SELECT LIMIT 2 WHERE score > "$currentuserscore"？

*   减去两个分数：获取当前用户，然后 SELECT LIMIT 2 WHERE score < "$currentuserscore"?

我觉得这很麻烦，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:20:35.780

对于选项 1：

`select count(1) as count from users where score>=$user_score`

这应该给你这个人的等级。如果您担心多个人与当前用户的分数相同，请将其更改`>=`为 a，`>`那么您可以在结果中加 1。

对于选项 2 和 3：

`select * from users where score>$user_score order by score asc limit 2`

`select * from users where score<$user_score order by score desc limit 2`

或者，一旦您获得了第一个查询的排名，您就可以在一个查询中获得所有 5 个（2 个之前、2 个之后和当前用户）：

```
$start = $user_rank - 2;
$query = "select * from users order by score asc limit {$start},5"; 
```

或者，如果您不希望包含当前用户或与当前用户具有相同分数的任何人，您可以这样做：

```
$start = $user_rank - 2;
$query = "select * from users where score!=$user_score order by score asc limit {$start},4"; 
```

# mysql - 连接到不同的 MySQL 数据库

> ID：14284237
> 
> 赞同：0
> 
> 时间：2013-01-11T18:16:07.677
> 
> 标签：mysql, database, connection

我已经购买了一台服务器，并且在那里有一个数据库。但是每当我输入 MySQL 命令行客户端时，它只会显示“密码：”，然后我只能在我的计算机上输入数据库的密码。有没有办法让我可以连接到我的其他数据库？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:20:30.130

如[mysql 选项](http://dev.mysql.com/doc/en/mysql-command-options.html)下所述：

> mysql 支持以下选项，可以在命令行或选项文件的`[mysql]`and`[client]`组中指定。
> 
> ```
> +------------------+----------+---------------- -----------------------------------------------+
> |      格式      | 选项文件|                   说明                 |
> +------------------+----------+---------------- -----------------------------------------------+
> : : : :
> | --host=host_name | 主持人        | 连接到给定主机上的 MySQL 服务器 |
> : : : :
> +------------------+----------+---------------- -----------------------------------------------+
> 
> ```

# mysql - 如何提高大型 InnoDB 表的 DELETE FROM 性能？

> ID：14284238
> 
> 赞同：23
> 
> 时间：2013-01-11T18:16:07.053
> 
> 标签：mysql, performance, innodb

我有一个相当大的 InnoDB 表，其中包含大约 1000 万行（并且计数，预计将成为该大小的 20 倍）。每行不是那么大（平均为 131 B），但有时我不得不删除其中的一大块，这需要很长时间。这是表结构：

```
 CREATE TABLE `problematic_table` (
    `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
    `taxid` int(10) unsigned NOT NULL,
    `blastdb_path` varchar(255) NOT NULL,
    `query` char(32) NOT NULL,
    `target` int(10) unsigned NOT NULL,
    `score` double NOT NULL,
    `evalue` varchar(100) NOT NULL,
    `log_evalue` double NOT NULL DEFAULT '-999',
    `start` int(10) unsigned DEFAULT NULL,
    `end` int(10) unsigned DEFAULT NULL,
    PRIMARY KEY (`id`),
    KEY `taxid` (`taxid`),
    KEY `query` (`query`),
    KEY `target` (`target`),
    KEY `log_evalue` (`log_evalue`)
) ENGINE=InnoDB AUTO_INCREMENT=7888676 DEFAULT CHARSET=latin1; 
```

从表中删除大块的查询就像这样：

```
DELETE FROM problematic_table WHERE problematic_table.taxid = '57'; 
```

像这样的查询只花了将近一个小时就完成了。我可以想象索引重写开销使这些查询非常慢。

我正在开发一个将在预先存在的数据库上运行的应用程序。我很可能无法控制服务器变量，除非我对它们进行强制性更改（我不希望这样做），所以我担心更改这些的建议没有什么价值。

我已经尝试将`INSERT ... SELECT`那些我不想删除到临时表中的行并只是删除其余的行，但是随着删除与保留的比率向保留转移，这不再是一个有用的解决方案.

这是一张将来可能会看到频繁`INSERT`的s和`SELECT`s，但没有`UPDATE`s的表。基本上，它是一个需要不时删除部分内容的日志记录和引用表。

我可以通过限制索引的长度来改进这张表上的索引吗？切换到`DISABLE KEYS`在交易期间支持的 MyISAM 会有所帮助吗？我还能尝试什么来提高`DELETE`性能？

**编辑：**一种这样的删除将是大约一百万行。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-23T15:25:46.347

我有一个类似的场景，一个有 200 万行的表和一个删除语句，它应该删除大约 10 万行 - 这样做大约需要 10 分钟。

检查配置后，我发现 MySQL 服务器正在以默认`innodb_buffer_pool_size`= 8 MB (!) 运行。

以`innodb_buffer_pool_size`= 1.5GB 重新启动后，相同的场景需要 10 秒。

所以看起来“重新排序表”是否适合 buffer_pool 似乎存在依赖关系。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-13T00:55:21.143

此解决方案在完成后可以提供更好的性能，但该过程可能需要一些时间来实施。

`BIT`可以添加一个新列，并将其默认`TRUE`为“活动”和`FALSE`“非活动”。如果这还不够状态，您可以使用`TINYINT`256 个可能的值。

添加这个新列可能需要很长时间，但是一旦完成，您的更新应该会快得多，只要您`PRIMARY`像处理删除一样执行它并且不索引这个新列。

InnoDB 之所以要花这么长时间来`DELETE`处理像您这样庞大的表是因为集群索引。它根据您的`PRIMARY`, 首先`UNIQUE`找到的，或者如果找不到`PRIMARY`or ，它可以确定为适当替代品的任何内容`UNIQUE`对您的表进行物理排序，因此，当删除一行时，它现在会在磁盘上对整个表进行物理重新排序以提高速度和碎片整理。所以这不是`DELETE`需要这么长时间的；这是删除该行后的物理重新排序。

当您创建一个固定宽度的列并对其进行更新而不是删除时，不需要在您的巨大表中进行物理重新排序，因为行和表本身消耗的空间是恒定的。

`DELETE`在下班时间，可以使用单个来删除不必要的行。此操作仍然很慢，但总体上比删除单个行要快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-11T12:20:46.973

我通过使用存储过程解决了类似的问题，从而将性能提高了数千倍。

我的表有 33M 行和几个索引，我想删除 10K 行。我的数据库在 Azure 中，无法控制 innodb_buffer_pool_size。

为简单起见，我创建了一个`tmp_id`只有主`id`字段的表：

```
CREATE TABLE `tmp_id` (
    `id` bigint(20) NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
) 
```

我选择了我想删除的一组 id`tmp_id`并运行了`delete from my_table where id in (select id from tmp_id);`这在 12 小时内没有完成，所以我只尝试了一个 id`tmp_id`并花了 25 分钟。`delete from my_table where id = 1234`在几毫秒内完成，所以我决定尝试在一个过程中这样做：

```
CREATE PROCEDURE `delete_ids_in_tmp`()
BEGIN
    declare finished integer default 0;
    declare v_id bigint(20);
    declare cur1 cursor for select id from tmp_id;
    declare continue handler for not found set finished=1;    
    open cur1;
    igmLoop: loop
        fetch cur1 into v_id;
        if finished = 1 then leave igmLoop; end if;
        delete from problematic_table where id = v_id;
    end loop igmLoop;
    close cur1;
END 
```

现在`call delete_ids_in_tmp();`在不到一分钟的时间内删除了所有 10K 行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-27T10:34:03.677

我有一个包含大约 2 亿行的 InnoDB 表，我确实遇到了同样的问题。删除行需要很长时间。

表上有一个主键、一个唯一键和多个复合索引。

当以较小的块删除时，它的速度非常快，所以我决定创建一个存储过程，它可以在多次迭代中简单地删除行，但有限制。有点像 Jan Larsen 的回答，但不需要单独的表格。

这使得在几分钟内删除大量数据（大约 500K 行）成为可能。

似乎 InnoDB 为了能够回滚错误更改而必须进行的事务太大，因此无法放入内存，这导致删除执行非常糟糕。

步骤：

```
CREATE DEFINER=`root`@`%` PROCEDURE `delete_rows`()
BEGIN
    declare v_max int unsigned default 100;
    declare v_counter int unsigned default 1;

        while v_counter < v_max do
            DELETE from items where a = 'A' AND b = 'B' AND c = 'C' LIMIT 10000;
            set v_counter=v_counter+1;
        end while;
END 
```

然后通过以下方式调用它：

```
CALL delete_rows(); 
```

where 语句匹配以 a,b,c 列开头的复合索引，我认为这很重要，因此 MySQL 不必进行全表扫描来匹配行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-12-09T06:54:53.530

```
 DELETE FROM problematic_table WHERE problematic_table.taxid = '57'; 
```

删除引号，由于taxid 是整数并且在引号中传递值使其成为字符串，由于整数和字符串之间的比较，它不会选择索引。

```
 DELETE FROM problematic_table WHERE problematic_table.taxid = 57; 
```

# c# - 将整数数组发布到 asp.net web api

> ID：14284244
> 
> 赞同：3
> 
> 时间：2013-01-11T18:16:40.597
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api

我有一个像下面这样的课程，用于发布到 asp.net web api

```
public class PostData
{

    public int ID { get; set; }

    public int[] SelectedChoiceIDs { get; set; }

} 
```

在我的 ApiController 中有一个名为 send 的方法，它将`PostData`对象作为参数。

```
public bool Send(PostData data)
{

} 
```

问题是每当我跟踪 Web API 方法时，它都没有绑定到整数数组，即`SelectedChoiceIDs`属性。如何强制将整数数组绑定到“ `SelectedChoiceIDs`”属性？

我发送的数据就像

```
{ "ID" : 3 , "SelectedChoiceIDs" : [ 3,4,5,6 ] } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T19:37:56.477

你不需要做任何事情，这将开箱即用。

如果您发布您提供的确切对象：

```
{ "ID" : 3 , "SelectedChoiceIDs" : [ 3,4,5,6 ] } 
```

，`Content-Type: application/json`默认模型绑定器将自动拾取它。

```
public class PostData
{

    public int ID { get; set; }

    public int[] SelectedChoiceIDs { get; set; }

}

public void DummyController : ApiController
{
    public void Post(PostData data)
    {
        //data here will be PostData with ID and an array of 4 integers
    }
} 
```

Make sure you provide the `Content-Type`, and that you are indeed posting correct JSON, not for example:

```
{data: { "ID" : 3 , "SelectedChoiceIDs" : [ 3,4,5,6 ] } } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-11T19:01:31.237

[模型中的ASP.NET MVC 绑定数组](https://stackoverflow.com/questions/2080355/asp-net-mvc-bind-array-in-model)可能重复

[这](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)是解释您必须做什么的博客文章。

# java - 是否有理由总是使用对象而不是原语？

> ID：14284246
> 
> 赞同：4
> 
> 时间：2013-01-11T18:16:48.587
> 
> 标签：java, memory-management, wrapper, primitive

所以我刚开始我的第二门Java编程课，这是教授给我们的例子，用来演示循环和数组。

```
public class ArraysLoopsModulus {                       
public static void main(String [ ] commandlineArguments){                   
  //Declare  & Instatiate an Array of 10 integers
  Integer[ ] arrayOf10Integers = new Integer[10];

  //initialize the array to the powers of 2
  Integer powersOf2 = new Integer(1);   
  for(int i=0;i<arrayOf10Integers.length;i++){
    arrayOf10Integers[i] = powersOf2;
    //multiply again by 2
    powersOf2 = powersOf2 * 2;
  }

  //display the powers of 2     
  System.out.println("The first 10 powers of 2 are: ");
  for(int i=0;i<arrayOf10Integers.length;i++){
    System.out.print(arrayOf10Integers[i] + ", ");
  }  
}
} 
```

浏览了所有即将出现的示例后，我的教授似乎从不使用原始数据类型，他总是使用等效的对象类（在这种情况下，`Integer`代替`int`和`Integer[]`代替`int[]`）。此外，我了解某些情况需要使用对象。我的问题是：

总是使用该对象有什么可能的原因？尤其是在这种简单的情况下，使用原语似乎更合适

总是这样做是一个坏习惯吗？我是否应该总是使用对象只是为了让他开心，但在现实生活中知道尽可能使用原始数据类型

我给出的这个例子会被认为是糟糕的编程吗？

谢谢

**编辑：** 感谢所有出色的答案，我（一个初学者）只需要确认我在这里看到的不是最好的编码方式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T18:23:50.393

> What possible reason is there for always using the object?

There is no reason, this code is ugly. Primitives as objects have advantage when using collections, but they are not used in your example.

> Especially in this simple case when the use of the primitive seems to fit better

Absolutley correct, Objects in this case are worse, they need more memory and have no advantage in your example.

> Is it a bad habbit to always do this?

Yes, you should only use Objects (boxed primitives) if they are needed. Beside use in collections, such object can also be `null`, this is an advantage which can be used as "value not (yet) existing", etc.

> Should I always use the objects just to make him happy, but know in real life to use the primitive data types when possible

No, tell him that this makes no sense. But keep in mind, that your professor never wanted to give progarmming lessons. He was probably "forced" to do so.

> Would this example I gave be considered bad programming?

Yes. maximum bad!

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-11T18:26:52.193

From `Effective Java` by Joshua Bloch,

> Item 49: Prefer primitive types to boxed primitives. There are three main differences between primitive types and boxed primitives:
> 
> *   Primitives have only their values, whereas boxed primitives have identities distinct form their values.
>     
>     
> *   Primitive types cannot be null, but boxed primitives can.
>     
>     
> *   Primitive types are more space and time efficient than boxed-primitives.
>     
>     
> 
> Care must be taken with using the == operator with boxed primitives as, with any other reference type, it compares identity and you almost certainly want to be comparing value. If a boxed primitive is compared to a primitive with the == operator, the primitive type is boxed and the identities compared, so care must also be taken here.
> 
> The process of boxing and unboxing, especially in a loop can serious impede performance.
> 
> Basically, boxes primitives should be avoided unless primitive types cannot be used, such as in collections or as parameterised types.

I hope this helps you understand the difference.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T18:38:38.367

Most people agree you should use primitives when you can. To play the devil's advocate, I thought of one advantage: **They fail faster**.

This code will throw a null pointer exception because you forgot to initialize `myInteger`:

```
private Integer myInteger;

public void run () {
    int myNewInt = myInteger + 5;
} 
```

If you used an `int`, it'd proceed and it'd be harder to notice the mistake you made.

* * *

Here's another similar advantage I just ran into: It *lets you* represent the absence of data. I have a method that returns a configuration option. It has a signature that returns a `boolean`. Turns out the configuration option didn't exist in the system. But instead of telling me that, it just defaults to false (it has to pick *something*). As a result, I thought this value was set to false but turned out it was missing. The bug would have been more obvious if the method returned a `Boolean`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T18:18:09.870

例如，原语不能存储在`Collectins`.

好的自动装箱有帮助，但帽子只是由编译器而不是你自己的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T18:22:56.403

不，您**不应该**在任何地方使用原始类型的对象包装器：

1) 对象等价物使用比原始类型更多的内存。

2）这可能是两个`Integer`对象的无效比较的原因-您应该使用`equals`方法比较它们-不方便。

The only sensible reason for using Object wrappers is `generics` where you have to use some `Class`. For example such collections as `List<Integer>` or `Map<Integer, Double>`.

Another reason is if you have to store `null` value of variable instead of any numeric.

Provided block of code has a lot of redundant pieces.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T18:23:21.767

Primitives are more space efficient, as the object wrappers create a new Object just to hold the same primitive you'd normally work with. Java has a lot of optimizations these days that make your professor's code not *totally* slow/broken, but it's certainly a bad practice.

In general, you should use primitives wherever you need them, unless you discover that you need object support, notably like @MrSmith42 suggests, if you want to store primitives in a Java Collection, like an ArrayList.

There's rarely any good reason to create an array of wrapper objects. Primitive arrays are very space efficient, arrays of objects lose all of that efficiency.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-26T10:44:13.693

Contrary to popular opinion here, I am with your professor on this one. I prefer using the primitive wrapper objects much of the time. I think it comes down to programming style.

Example: I have a method that calls up the database to get an int. The method returns an Integer object. If the int doesn't exist it can return a null object. If it returns a non-null object then I know that the item exists in the database and is a valid number.

With a primitive you have to return a number, or throw an exception, but sometimes neither of these is appropriate.

So I do think there are plenty of valid reasons for using the wrapper-type objects. Most people's reasons for not using them is that they don't perform as well. This is often premature optimisation and in a real-life code base writing simple, robust code is usually far more important (depending on the application).

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T18:30:20.147

```
powersOf2 = powersOf2 * 2; 
```

How about shifting bytes?!

//convert to primitive than someting like :

```
powersOf2  = powersOf2 << 2; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-19T00:14:03.087

According to Java documentation on [The Number Classes](http://docs.oracle.com/javase/tutorial/java/data/numberclasses.html) tutorial it specifies only three reasons that you MIGHT want to use a Number object rather than a primitive. I would assume that any other reasons that not listed below will then be considered bad programming.

> 1.  As an argument of a method that expects an object (often used when manipulating collections of numbers).
> 2.  To use constants defined by the class, such as MIN_VALUE and MAX_VALUE, that provide the upper and lower bounds of the data type.
> 3.  To use class methods for converting values to and from other primitive types, for converting to and from strings, and for converting between number systems (decimal, octal, hexadecimal, binary).

# php - 无法将 css 加载到我在 CodeIgniter 中的视图中

> ID：14284250
> 
> 赞同：0
> 
> 时间：2013-01-11T18:17:22.873
> 
> 标签：php, css, codeigniter

我已将我的 css 包含在 codeigniter 文件夹中的应用程序文件夹中：系统应用程序 application/css/style.css

如果我包含这样的 css 文件，我将无法加载我的视图文件 `<link rel="stylesheet" href="<?php echo base_url();?>css/style.css" type="text/css" media="screen"/>`

可能是什么原因？请帮我解决这个问题。

```
 <html>
        <head>
         <link rel="stylesheet" href="<?php echo base_url();?>css/style.css" type="text/css" media="screen"/>
        </head>
        <body>
            <table width="100%" border="1" >
                <td   align="left"><h1>hellooooooo</h1></td>
            </table>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:18:05.200

您的 CSS 文件必须位于公共可访问的文件夹中，（希望）您的`application`and`system`文件夹不是这种情况。

您的资产必须在 index.php 之外，如下所示：

```
- index.php
- css/
    - style.css 
```

那么在你看来：

```
<link rel="stylesheet" href="<?php echo base_url('css/style.css') ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:22:11.170

您不应该将 css 保存在应用程序文件夹中。它应该在应用程序文件夹之外。

如果您的项目名称是项目，则在项目中创建一个名为 css 的文件夹并将所有 css 保存在那里。要访问这些 CSS，您的路径将是`<?php echo base_url().'css/filename.css' ?>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:27:28.080

将 Css 文件夹保留在根目录中，并在 php 页面中编写以下代码。解决了我的问题。

`<link rel="stylesheet" href="../../css/style.css" type="text/css" media="all" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:15:18.163

base_url() 应该引用您的 URL，例如 yoursite.com/。所以它可能不指向代码点火器目录。尝试将您的 css 放在您的主目录中，例如 yoursite.com/css/style.css 我相信这也是 codeigniters 网站上的建议。

但是，如果您最好将其留在原处，请改用 $_SERVER['DOCUMENT_ROOT'] .'/yourcodeigniterfolderlocation/application/css/style.css' 。

# autocomplete - 选择项目并将焦点设置在输入元素上时，如何从 Kendo UI AutoComplete 中移除焦点？

> ID：14284251
> 
> 赞同：1
> 
> 时间：2013-01-11T18:17:28.760
> 
> 标签：autocomplete, kendo-ui

选择项目后，我试图将焦点从 Kendo UI AutoComplete 转移到输入元素。我试过这个...

```
select: function (e) {
    e.preventDefault();
    var dataItem = this.dataItem(e.item.index());
    vm.selectedProductID(dataItem.ProdID);
    $('#itemQtyBox').focus();
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:54:29.843

似乎您无法从内部`select`处理程序更改焦点......也许您稍等片刻然后执行它是可以接受的。我是说：

```
select    : function (e) {
    setTimeout(function () {
        $("#itemQtyBox").focus();
    }, 100);
} 
```

我所做的是设置一个超时时间（在前面的示例中为 0.1 秒）然后改变焦点（我知道这不好但可以工作）。

# java - 如何从驻留在 OSGi 包中的类中获取 JNI 中的 jclass

> ID：14284254
> 
> 赞同：3
> 
> 时间：2013-01-11T18:17:42.823
> 
> 标签：java, c++, java-native-interface, osgi

在 C/C++ 中，您需要一个`jclass`值才能将本机函数注册到具有声明方法的 Java 类`native`。

考虑这个 Java 类：

```
public class Native {
  public native int f(int i);
} 
```

要注册一个本地 C/C++ 函数，`Native.f()`我们需要在 C++ 端调用它：

```
JNIEnv* env = ...;
jclass nativeClass = ...;

JNINativeMethod nativeMethod = {
  (char*) "f",
  (char*) "(I)I",
  (void*) Java_org_example_Native_f // The native C function
};

env->RegisterNatives(nativeClass, &nativeMethod, 1); 
```

有问题的部分是`jclass`如果无法从默认类加载器访问该类，则获取该值。如果类`Native`驻留在加载在 JVM 内运行的 OSGi 容器（例如 Equinox）内的 OSGi 包中，则情况并非如此。

为了访问该类，我使用了一个 Java 函数来返回`Class<?>`我的类的实例：

```
public class Helper {
  public static Class<?> getNativeClass() {
    // Find bundle from system bundle context.
    Bundle bundle = ... // details left out.

    return bundle.loadClass("org.example.Native");
  }
} 
```

此函数驻留在 OSGi 容器外部的类中。使用 JNI 从 C++ 端调用此函数会为我们提供`jobject`一个`java.lang.Class<>`.

```
// Load the `Helper` class.
jclass helperClass = env->FindClass("org.example.Helper");

// Get the method `Helper.getNativeClass()`.
jmethodId mid = env->GetStaticMethodID(helperClass,
                                       "getNativeClass",
                                       "()Ljava/lang/Class;");

// Call `Helper.getNativeClass()`.
jobject nativeClassInstance = env->CallStaticObjectMethod(helperClass, mid); 
```

问题是我们真的需要一个“jclass”值（不是一个`jobject`值）。为了得到它，我实例化了我的`Native`类的一个对象并从中获取`jclass`。

```
// This is the jclass for 'java.lang.Class<>'.
jclass classClass = env->GetObjectClass(nativeClassInstance);

// Now get the method id for function 'newInstance()'
jmethodId newInstanceMid = env->GetMethodID(helperClass,
                                            "newInstance",
                                            "()Ljava/lang/Object;");

// Instantiate our 'Native' class calling 'Class<Native>.newInstance()'.
jobject nativeInstance = env->CallObjectMethod(classClass,
                                               nativeClassInstance,
                                               newInstanceMid);

// Now, I can get the desired 'jclass' of my 'Native' class.
jclass nativeClass = env->GetObjectClass(nativeInstance); 
```

但这仅有效，因为我可以实例化我的`Native`类。

任何想法如何在`jclass`不必实例化`Native`类的对象的情况下获得期望？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T10:19:23.240

您应该能够通过简单地转换它来使用辅助方法返回的`jobject`of 类型：`Class<Native>``jclass`

```
jclass nativeClass = (jclass)nativeClassInstance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-17T18:42:06.953

如果您不需要在包中定义本机代码存根，则有一种更简单的方法来执行此操作。

将本机代码放入 JVM 类路径中的类中。`org.osgi.framework.system.packages.extra=package.in.jvm`启动捆绑包时使用。现在，您可以从您的 OSGi 包中获得该包，并且您可以在链接它们之后调用您的本机函数。

# c# - 如何为提琴手核心手动设置上游代理？

> ID：14284256
> 
> 赞同：8
> 
> 时间：2013-01-11T18:18:05.697
> 
> 标签：c#, fiddler, fiddlercore

我希望能够通过上游代理重定向来自提琴手代码的 http 请求，我希望能够在运行时指定。

我查看了`FiddlerApplication`函数，但没有看到任何适合的内容，也没有在文档中找到任何匹配的内容（除了您可能指定启动标志以使用系统的代理作为上游代理）。

在运行时指定/更改提琴手核心代理的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T23:11:31.843

如果要将每个请求发送到代理，并且该代理不是系统的默认代理：在发送每个请求之前，请在 Session 上指定**X-OverrideGateway**标志。在 BeforeRequest 处理程序中，添加以下行：

```
oSession["X-OverrideGateway"] = "someProxy:1234"; 
```

-埃里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-04T09:36:05.060

正如 EricLaw 在他的回答中所说，您必须在 Session 上指定 X-OverrideGateway 标志，尽管如果您想对上游代理进行基本 HTTP 身份验证，您可以通过将 Proxy-Authorization 标头添加到会话来设置凭据在像这样的 BeforeRequest 处理程序中

```
string userCredentials = string.Format("{0}:{1}", "user", "password");
string base64UserCredentials = Convert.ToBase64String(Encoding.UTF8.GetBytes(userCredentials));
oSession.RequestHeaders["Proxy-Authorization"] = "Basic " + base64UserCredentials; 
```

这是 HTTP 标头字段的列表 [https://en.wikipedia.org/wiki/List_of_HTTP_header_fields](https://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

# android - 滚动后列表视图项目更改顺序

> ID：14284258
> 
> 赞同：1
> 
> 时间：2013-01-11T18:18:10.290
> 
> 标签：android, user-interface

我有带有项目的可滚动列表视图。每个项目都有以下布局。

我根据需要显示或隐藏带有 id`customer_menu_index`的 LinearLayout。Ramaining 元素显示在每个方法调用中。

> ```
> <LinearLayout
> xmlns:android="http://schemas.android.com/apk/res/android"
> android:layout_width="fill_parent"
> android:layout_height="wrap_content"
> android:orientation="vertical" >
> 
> <LinearLayout
>     android:id="@+id/customer_menu_index"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:background="@color/menu_listview_item_alphabet_bg"
>     android:orientation="horizontal" 
>     android:visibility="gone">
> 
>     <TextView
>         android:id="@+id/customer_menu_index_letter"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginLeft="5dp"
>         android:paddingBottom="5dp"
>         android:paddingTop="5dp"
>         android:text="bla"
>         android:textColor="@color/menu_listview_item_title"
>         android:textSize="10sp"
>         android:textStyle="bold"
>         android:typeface="sans" />
> </LinearLayout>
> 
> <RelativeLayout
>     android:id="@+id/customer_menu_item"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:background="@drawable/menu_listview_item_selector"
>     android:orientation="horizontal" >
> 
>     <TextView
>         android:id="@+id/customer_menu_item_title"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginLeft="5dp"
>         android:layout_marginRight="0dp"
>         android:paddingBottom="0dp"
>         android:paddingTop="5dp"
>         android:textColor="@color/menu_listview_item_title"
>         android:textSize="10sp"
>         android:textStyle="bold"
>         android:typeface="sans" />
> 
>     <TextView
>         android:id="@+id/customer_menu_item_subtitle"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_alignParentLeft="true"
>         android:layout_below="@+id/customer_menu_item_title"
>         android:layout_marginLeft="5dp"
>         android:layout_marginRight="0dp"
>         android:paddingBottom="5dp"
>         android:paddingTop="1dp"
>         android:textColor="@color/menu_listview_item_subtitle"
>         android:textSize="8sp"
>         android:textStyle="normal"
>         android:typeface="sans" />
> </RelativeLayout>
> 
> </LinearLayout> 
> ```

我`getView`在`BaseAdapter`. getView 方法的实现。

```
 public View getView(int position, View convertView, ViewGroup parentView) {

    View vi = convertView;

    if (convertView == null)
    {
        vi = inflater.inflate(R.layout.customer_menu_index_item, null);
    }

    LinearLayout indexLayout = (LinearLayout) vi.findViewById(R.id.customer_menu_index);

    HashMap<String, String> category = new HashMap<String, String>();
    category = mData.get(position);

    String currentIndexLetter = category.get(CustomerMenu.KEY_COMPANY).substring(0, 1);
    if (currentIndexLetter.equals(mLastIndexLetter) == false)
    {
        TextView letter = (TextView) vi.findViewById(R.id.customer_menu_index_letter);
        letter.setText(currentIndexLetter);
        mLastIndexLetter = currentIndexLetter;
        indexLayout.setVisibility(LinearLayout.VISIBLE);
    }

    TextView title = (TextView) vi.findViewById(R.id.customer_menu_item_title);
    TextView subtitle = (TextView) vi.findViewById(R.id.customer_menu_item_subtitle);
    title.setText(category.get(CustomerMenu.KEY_COMPANY));
    subtitle.setText(category.get(CustomerMenu.KEY_CONTACT_PERSON));

    return vi;
} 
```

加载后工作正常。但是当我滚动列表视图时，项目的顺序发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:57:43.087

您必须有一个匹配的 else 语句来显示*或隐藏*LinearLayout：

```
if (currentIndexLetter.equals(mLastIndexLetter) == false)
{
    TextView letter = (TextView) vi.findViewById(R.id.customer_menu_index_letter);
    letter.setText(currentIndexLetter);
    mLastIndexLetter = currentIndexLetter;
    indexLayout.setVisibility(LinearLayout.VISIBLE);
}
else {
    indexLayout.setVisibility(LinearLayout.GONE);
} 
```

另外两点：

*   `if(a.equals(b) == false)`是一样的`if(!a.equals(b))`。这只是一个快捷方式，您不必使用它。
*   您还应该考虑使用 ViewHolder 来加速您的代码。

# java - 使用按位运算符和无符号整数的 C++ 到 Java 移植代码

> ID：14284261
> 
> 赞同：2
> 
> 时间：2013-01-11T18:18:21.720
> 
> 标签：java, c++, porting

我需要将 C++ 代码翻译成 Java。我有两个担心的问题。

1) 从 C++ 到 Java 的“unsigned int”翻译为“long”。我选择使用 long 来增加存储容量。

2) 使用位运算符，特别是 | 和<<。鉴于我已将 unsigned int 值转换为 long，这会对这些运算符产生不良影响吗？例如在 C++ 中：

```
unsigned int a;
unsigned int b;
unsigned int c;

a | (b<<c) 
```

可以在 Java 中执行此操作吗：

```
long a, b, c;

a | (b<<c) 
```

请让我知道您认为我在做这些事情时可能遇到的任何问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:51:14.763

`long`用Java签名。

> long 数据类型是一个 64 位有符号二进制补码整数。它的最小值为-9,223,372,036,854,775,808，最大值为9,223,372,036,854,775,807（含）。

`unsigned int`从 C++ 开始是一个字长（在 32 位机器上是 32 位）。它的范围从 0 到 4,294,967,295。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:52:45.010

它应该工作。请记住，Java`long`是 64 位的。唯一真正的区别是 Java 整数是有符号的。

运算符的行为应与无符号的相同： `+`, `-`, `==`, `&`, `|`, `^`,`<<`

这些将改变行为： `*`, `/`, `%`,`<`

使用`>>>`而不是对（推送的位是，而不是 MSB 副本）`>>`进行无符号解释。`/2**k``0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T18:20:34.593

```
 Bitwise operations

  It's important to remember that the unsigned keyword affects 
  the interpretation, not the representation of a number. In other 
  words, in cases where we aren't interpreting a value arithmetically— so-called
  bitwise operations such as AND, OR, XOR— it makes essentially no 
  difference whether a value is marked as "signed" or "unsigned" 
```

. unsigned int 等价于 java 中的 long。所以，它有所作为。有关更多信息，请参阅[此处](http://www.javamex.com/java_equivalents/unsigned.shtml)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T18:41:10.757

我相信您所做的事情是安全的，并且应该在 Java 中运行良好。如您所展示的那样使用的按位运算应该可以按预期工作。

# jquery-plugins - Angular 模型更改后刷新 Bootstrap ScrollSpy

> ID：14284263
> 
> 赞同：6
> 
> 时间：2013-01-11T18:18:24.370
> 
> 标签：jquery-plugins, twitter-bootstrap, angularjs

我正在尝试使用[引导程序 scollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)来突出显示由角度中继器生成的列表项。

我遇到的问题是，在 angular 将模型更改应用于视图之前，我正在从 angular 控制器刷新 scrollspy 插件。

确保在 DOM 本身更新后发生 scrollspy('refresh') 调用的角度方式是什么（不仅仅是角度模型）？

模板：

```
<div class="span2" id="addressList">
    <ul class="nav nav-tabs nav-stacked affix">
       <li ng-repeat="addr in addresses"><a href="#{{addr.id}}">{{addr.id}}</a></li>
    </ul>
</div> 
```

控制器：

```
$scope.httpSuccessCallback = function (data) 
     $scope.addresses.push(data);
     $('[data-spy="scroll"]').scrollspy('refresh'); //calls $('#addressList .nav > li > a')
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T18:36:37.053

在不了解滚动间谍的情况下*，*以下是您通常希望在 Angular 中使用 JQuery 插件的方式：

```
app.directive('scrollSpy', function (){
   return {
     restrict: 'A',
     link: function(scope, elem, attr) {
         elem.scrollSpy({ /* set up options here */ });

         //watch whatever expression was passed to the
         //scroll-spy attribute, and refresh scroll spy when it changes.
         scope.$watch(attr.scrollSpy, function(value) {
              elem.scrollSpy('refresh');
         });
     }
   };
}); 
```

然后在 HTML 中：

```
<div scroll-spy="foo">Do something with: {{foo}}</div> 
```

上面的例子非常通用，但它基本上会将你的插件应用到一个元素上，并在每次 $scope.foo 更改时调用'refresh'或其他任何东西。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T14:36:07.843

**我是如何解决这个问题的，使用 Blesh 的回答**

模板：

```
 <body ng-app="address" ng-controller="AddressCtrl" scroll-spy="addresses">
    <div class="container">
      <form ng-submit="lookupAddress()">
        <input type="text" ng-model="addressText" />
        <button id="addressQueryBtn">Submit</button>
      </form>

      <div id="addressList">
        <ul>
          <li ng-repeat="addr in addresses">{{addr}}</li>
       </ul>
      </div>

    </div>
  </body> 
```

角JS：

```
angular.module('address', []).
directive('scrollSpy', function($timeout){
  return function(scope, elem, attr) {
    scope.$watch(attr.scrollSpy, function(value) {
      $timeout(function() { elem.scrollspy('refresh') }, 200);
    }, true);
  }
});

function AddressCtrl($scope, $http) {
  $scope.addresses = [];

  $scope.lookupAddress = function() {
    $scope.addresses.push($scope.addressText);
    $scope.addressText = '';
  };
} 
```

当监视范围 var 是对象或数组时，需要 scope.watch(...) 的第三个参数。不幸的是，这个解决方案仍然导致无法识别的表达式问题 randomguy 在评论中提到。我最终通过在 watch 函数中[使用超时来解决这个问题。](https://stackoverflow.com/questions/11125078/is-there-a-post-render-callback-for-angular-js-directive)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T21:18:16.553

在 Angular 中使用 Scrollspy 存在一些挑战（这可能是 AngularUI 到 2013 年 8 月仍未包含 Scrollspy 的原因）。

1.  每当您对 DOM 内容进行任何更改时，都必须刷新 scrollspy。

    > 正如这里所建议的，这可以通过 $watching 元素并为 scrollspy('refresh') 调用设置超时来完成。

2.  如果您希望能够使用 nav 元素来导航可滚动区域，则需要覆盖 nav 元素的默认行为。

> 这可以通过使用 preventDefault 来阻止导航并附加一个 scrollTo 函数来完成。

我在 Plunker 上抛出了一个工作示例：[http ://plnkr.co/edit/R0a4nJi3tBUBsluBJUo2?p=preview](http://plnkr.co/edit/R0a4nJi3tBUBsluBJUo2?p=preview)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-28T23:55:57.000

我一直在寻找解决这个问题的方法，但我找不到。我最终通过创建一个带有一些指令的滚动间谍服务来实现我自己的。

该服务将跟踪所有间谍部分及其偏移量。这些指令将创建一个滚动事件，突出显示导航项并告诉服务所有部分的位置。由于此实现不监视范围变量，因此应用程序需要广播消息以更新所有部分的偏移量。

你可以在 Github 上找到我的[例子。](http://angular-macgyver.github.io/MacGyver/0.3.10/#scrollspy)

# regex - 修复 preg_match 规则不匹配标签“<”的开头

> ID：14284265
> 
> 赞同：0
> 
> 时间：2013-01-11T18:18:36.990
> 
> 标签：regex, youtube, preg-match, expression

我有这个 preg_match 规则，它将普通的 youtube 链接转换为实际的播放器 html 代码：

```
preg_match('#(?:http://)?(?:www\.)?(?:youtube\.com/(?:v/|watch\?)|youtu\.be/)([\w-]+)(?:\S+)?#', $text, $youtube_match); 
```

1）如果我在视频链接后面有一个标签，比如说 br 标签：它不起作用`http://www.youtube.com/watch?v=4rUGhlNCNho<br />`，它可能认为`<br`是 URL 的一部分。

2）我应该如何修改规则以匹配 url 变量的混合顺序，例如：

`http://www.youtube.com/watch?feature=player_embedded&v=4rUGhlNCNho` 代替 `http://www.youtube.com/watch?v=4rUGhlNCNho`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:53:41.013

If iam right, you only need the parameter v= to generate and embed video

```
preg_match('#(?:http://)?(?:www\.)?(?:youtube\.com/(?:v/|watch\?)|youtu\.be/)[a-z0-9A-Z\-_\=\&\%\?]*v\=([a-zA-Z0-9]+)#', $text, $youtube_match); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:41:32.793

由于`PCRE`dosent 在lookbehind 内支持可变重复，您可以使用它

```
(?:http://)?(?:www\.)?(?:youtube\.com/(?:v/|watch\?)|youtu\.be/)([\w-]+)(?:\S+)?$(?<!>) 
```

其他正则表达式风格，你可以使用这个

```
(?:http://)?(?:www\.)?(?:youtube\.com/(?:v/|watch\?)|youtu\.be/)([\w-]+)(?:\S+)?$(?<!<[^>]*>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:34:32.733

GreenRover 回答后我的最终代码：

```
preg_match('#(?:http://)?(?:www\.)?(?:youtube\.com/(?:v/|watch\?)|youtu\.be/)[a-z0-9A-Z\-_\=\&\%\?]*v\=([a-zA-Z0-9]+)([a-zA-Z0-9=&_]+)?#', $text, $youtube_match); 
```

这匹配了这些不同的情况（以带有附加文本的新行结尾，以 BR 标签结尾等）：

`"http://www.youtube.com/watch?v=4rUGhlNCNho&feature=player_embedded" "http://www.youtube.com/watch?feature=player_embedded&v=4rUGhlNCNho " "http://www.youtube.com/watch?v=4rUGhlNCNho&feature=player_embedded\nETC" "http://www.youtube.com/watch?v=4rUGhlNCNho&feature=player_embedded " "http://www.youtube.com/watch?v=4rUGhlNCNho&feature=player_embedded<br />"`

# python - 熊猫切割的问题

> ID：14284266
> 
> 赞同：2
> 
> 时间：2013-01-11T18:18:42.520
> 
> 标签：python, pandas

我有一个熊猫时间序列数据框。df

日期是索引。三列，cusip，ticker，factor。

我想按日期对数据进行十分位数。每个日期大约 100 个因子...每个日期将被分为 1 到 10。

作为第一次尝试，无论日期如何，我都尝试对整个数据框进行十等分。我用了：

```
factor = pd.cut(df.factor, 10)  #This gave an error:

adj = (mx - mn) * 0.001 # 0.1% of the range 
```

> Sybase.Error: ('Layer: 2, Origin: 4\ncs_calc: cslib user api layer: common library error: The conversion/operation results in overflow.')

数据框有 1mm 行。是尺寸问题吗？一个南问题？

三个问题。

1.  当前功能有什么问题？
2.  如何获取列中 nan 的数量？
3.  有什么关于按日期分类的建议吗？

感谢您的帮助。熊猫 python 新手。

样本数据：

```
df:             cusip      ticker    factor
date
2012-01-05       XXXXX       ABC       4.26
2012-01-05       YYYYY       BCD       -1.25
...(100 more stocks on this date)  
2012-01-06       XXXXX       ABC       3.25
2012-01-06       YYYYY       BCD       -1.55
...(100 more stocks on this date) 
```

我想要的输出：

```
#column with the deciles, lined up with the df.
decile
10
2
...
10
3
... 
```

然后我可以将它附加到我的数据框以拥有一个新列。每个日期都是十分位的，然后每个数据点在该日期都有相应的十分位。谢谢。

堆栈跟踪：

```
Traceback (most recent call last): File "<stdin>", line 1, in <module> File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-l‌​inux-x86_64.egg/pandas/core/groupby.py", line 1817, in transform res = wrapper(group)

File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-l‌​inux-x86_64.egg/pandas/core/groupby.py", line 1807, in <lambda> wrapper = lambda x: func(x, *args, **kwargs) File "<stdin>", line 1, in <lambda> File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-l‌​inux-x86_64.egg/pandas/tools/tile.py", line 138, in qcut bins = algos.quantile(x, quantiles)

File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-l‌​inux-x86_64.egg/pandas/core/algorithms.py", line 272, in quantile return algos.arrmap_float64(q, _get_score) File "generated.pyx", line 1841, in pandas.algos.arrmap_float64 (pandas/algos.c:71156) File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-l‌​inux-x86_64.egg/pandas/core/algorithms.py", line 257, in _get_score idx % 1)

File "/misc/apps/linux/python-2.6.1/lib/python2.6/site-packages/pandas-0.10.0-py2.6-l‌​inux-x86_64.egg/pandas/core/algorithms.py", line 279, in _interpolate return a + (b - a) * fraction File "build/bdist.linux-x86_64/egg/Sybase.py", line 246, in _cslib_cb Sybase.Error: ('Layer: 2, Origin: 4\ncs_calc: cslib user api layer: common library error: The conversion/operation resulted in overflow.', <ClientMsgType object at 0x1c4da730>) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:35:58.323

玩具示例。首先做一个`datetime`索引。在这里，我使用两天重复 10 次来制作索引。然后我使用`randn`.

```
In [1]: date_index = [datetime(2012,01,01)] * 10 + [datetime(2013,01,01)] * 10

In [2]: df = DataFrame({'A':randn(20),'B':randn(20)}, index=date_index)

In [3]: df
Out[3]:
                   A         B
2012-01-01 -1.155124  1.018059
2012-01-01 -0.312090 -1.083568
2012-01-01  0.688247 -1.296995
2012-01-01 -0.205218  0.837194
2012-01-01  0.700611 -0.001015
2012-01-01  1.996796 -0.914564
2012-01-01 -2.268237  0.517232
2012-01-01 -0.170778 -0.143245
2012-01-01 -0.826039  0.581035
2012-01-01 -0.351097 -0.013259
2013-01-01 -0.767911 -0.009232
2013-01-01 -0.322831 -1.384785
2013-01-01  0.300160  0.334018
2013-01-01 -1.406878 -2.275123
2013-01-01  1.722454  0.873262
2013-01-01  0.635711 -1.763352
2013-01-01 -0.816891 -0.451424
2013-01-01 -0.808629 -0.092290
2013-01-01  0.386046 -1.297096
2013-01-01  0.261837  0.562373 
```

如果我正确理解您的问题，您希望*在*每个日期内进行等分。为此，您可以首先将索引作为列移动到数据框中。然后，您可以按新列（这里称为索引）分组，并`transform`与 lambda 函数一起使用。下面的 lambda 函数适用`pandas.qcut`于分组`series`并返回`labels`属性。

```
In [4]: df.reset_index().groupby('index').transform(lambda x: qcut(x,10).labels)
Out[4]:
    A  B
0   1  9
1   4  1
2   7  0
3   5  8
4   8  5
5   9  2
6   0  6
7   6  3
8   2  7
9   3  4
10  3  6
11  4  2
12  6  7
13  0  0
14  9  9
15  8  1
16  1  4
17  2  5
18  7  3
19  5  8 
```

# python - 为什么 Python 不能识别我的 utf-8 编码源文件？

> ID：14284269
> 
> 赞同：21
> 
> 时间：2013-01-11T18:18:46.243
> 
> 标签：python, python-3.x, unicode, encoding, utf-8

这是一个带有非 ASCII 字符的小 tmp.py：

```
if __name__ == "__main__":
    s = 'ß'
    print(s) 
```

运行它我得到以下错误：

```
Traceback (most recent call last):
  File ".\tmp.py", line 3, in <module>
    print(s)
  File "C:\Python32\lib\encodings\cp866.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\xdf' in position 0: character maps to <undefined> 
```

Python 文档[说](http://docs.python.org/3.2/tutorial/interpreter.html#source-code-encoding)：

> 默认情况下，Python 源文件被视为以 UTF-8 编码...

我检查编码的方法是使用 Firefox（也许有人会提出更明显的建议）。我在 Firefox 中打开 tmp.py ，如果我选择 View->Character Encoding->Unicode (UTF-8) 它看起来没问题，这就是它在这个问题上面的样子（带有 ß 符号）。

如果我放：

```
# -*- encoding: utf-8 -*- 
```

作为 tmp.py 中的第一个字符串，它不会改变任何内容——错误仍然存​​在。

有人可以帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-11T18:26:53.987

[您的终端使用](http://en.wikipedia.org/wiki/Code_page_866)的编码不支持该字符：

```
>>> '\xdf'.encode('cp866')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/encodings/cp866.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character '\xdf' in position 0: character maps to <undefined> 
```

Python 处理得很好，是您的输出编码无法处理它。

您可以尝试`chcp 65001`在 Windows 控制台中使用来切换您的代码页；`chcp`是用于更改代码页的 Windows 命令行命令。

我的，在 OS X（使用 UTF-8）上可以很好地处理它：

```
>>> print('\xdf')
ß 
```

# apache - 从 XAMPP 运行 apache 服务时出错

> ID：14284271
> 
> 赞同：2
> 
> 时间：2013-01-11T18:19:05.633
> 
> 标签：apache, xampp, port

几个月前我安装了 XAMPP，它一直运行良好。但是最近当我打开它时，我收到一个端口被占用的错误。

现在，每当我启动 XAMPP 并运行 apache 服务时，我都会收到以下错误：

```
Apache Service detected with wrong path
Change XAMPP Apache settings or
Uninstall/disable the other service manually first
Found Path: ERROR: Not Able To Open Service Manager
Expected Path: "d:\my local server\xampp\apache\bin\httpd.exe" -k runservice
Problem detected!
Port 80 in use by "system"!
Apache WILL NOT start without the configured ports free!
You need to uninstall/disable/reconfigure the blocking application
or reconfigure Apache to listen on a different port 
```

也许某些系统进程正在使用端口 80？

这些错误是什么意思，我该如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-03T21:40:47.883

我的解决方案要简单得多：**以 admin 身份启动 xampp-control.exe**。然后明显的错误消失了。

我没有更改任何端口或停止任何进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T21:29:46.593

重新配置 Apache 以使用不同的端口非常容易。

1.  找到 Apache 的配置文件（它可能在 中`d:\my local server\xampp\apache\conf`，但我从未使用过 XAMPP，所以我不肯定）。该文件可能被命名为`httpd.conf`.
2.  寻找以 . 开头的行`Port`。它可能是`Port 80`或`Port 127.0.0.1:80`。
3.  将最后的 80 更改为其他内容。
4.  重新启动您的服务。

至于停止其他服务，您首先需要找出它是什么。由于这是端口 80，因此您很可能正在运行另一台 Web 服务器。首先要看的是您的服务面板 ( `Start > Run > services.msc`)。查找任何带有`Apache`或`Web`的`Internet`标题。您可能已经安装了捆绑了某个版本的 Apache 的其他软件，或者您可能安装了 Internet Information Server。

如果您在服务中找不到任何明显的内容，则可以查找使用该端口的进程。您可以下载一些工具来简化此操作，但使用 Windows 附带的库存工具：

1.  打开命令提示符 ( `Start > Run > cmd`)
2.  跑`netstat -ao`
3.  在列中查找以or`Local Address`结尾的内容`:80``:http`
4.  查找该`PID`连接（最后一列）
5.  运行任务管理器，进入`View > Select Columns...`并启用 PID 列
6.  查找该 PID 的可执行文件名
7.  使用 Google 找出该进程是什么、它的用途以及如何关闭它（通常只需在“服务”面板中找到它使用的名称即可）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T09:40:01.950

如果检查您正在使用 Skype 登录状态，请先注销 Skype，然后启动 appache，因为 Skype 也在端口 80 中运行，否则将 http.config 端口更改为任何其他您的幸运号码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-12T04:29:18.283

您的预期路径有问题表明可能有多个 mysql 实例。在 Windows 资源管理器中搜索 mysql。如果程序正在寻找

> 预期路径：“d:\我的本地服务器\xampp\apache\bin\httpd.exe”-k runservice

确保您的 httpd.exe 位于正确的位置。我遇到了完全相同的问题，我将 bin/apache 文件夹移动到了正确的位置。

完整的细节在这里：

[http://hodentekhelp.blogspot.com/2014/02/on-installing-apache-on-windows-7-64bit.html](http://hodentekhelp.blogspot.com/2014/02/on-installing-apache-on-windows-7-64bit.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T10:26:39.413

在提升的命令提示符下使用 netstat -bano 查看哪些应用正在侦听哪些端口。

但通常以下应用程序在 Windows 中使用端口 80。

```
IIS
World Wide Web Publishing service
IIS Admin Service
SQL Server Reporting services
Web Deployment Agent Service 
```

如果正在运行，请停止上面的应用程序并检查！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-08T05:03:01.420

我解决了我的问题。几天前，我为 JSP 实践安装了 Apache Tomcat，与此同时，我开始使用 XAMPP 来处理 PHP，问题是我认为两个服务器都使用相同的端口，所以尝试从 services.msc> 停止 Apache Tomcat Apache Tomcat 9.0，当我再次启动 XAMPP 时，XAMPP Apache 服务器启动成功

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-06T10:23:18.960

1.  打开配置文件
2.  80端口很好
3.  将 80 更改为 8080
4.  保存并再次运行

# c# - CRM 2011 Online C# 检查是否赢得了机会

> ID：14284275
> 
> 赞同：0
> 
> 时间：2013-01-11T18:19:12.297
> 
> 标签：c#, plugins, dynamics-crm-2011

我需要检查插件触发时是否赢得了机会，然后再执行任何代码。据我了解，您不能在 CRM 在线部署中使用赢得机会的插件消息。

这是我的代码片段：

```
//Get the target entity
Entity entity = (Entity)context.InputParameters["Target"];

OptionSetValue entityStatusCode =
(OptionSetValue)entity.Attributes["statuscode"];
if (entityStatusCode.Value == 3)
    {
//Code to execute if opportunity won
} 
```

这会引发错误“给定的键不在字典中”。我用谷歌搜索，似乎找不到解决方案。谁能解释我需要在这里做什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:38:43.767

```
(OptionSetValue)entity.Attributes["statuscode"]; 
```

我猜那条线给了你错误。

当插件触发时，默认情况下它只会为您提供在调用插件的事件中已更改的属性。

换句话说，如果您更新机会名称，则会触发插件，但属性包将仅包含该`name`属性。

所以`statuscode`这里没有被传入，因此该代码失败，因为正如异常所说，它不在字典中。

至于如何解决它，有点取决于您为什么需要检查是否赢得了机会。但最简单（但不一定最有效）的方法是回调 CRM 以获取值。

```
var entity = service.Retrieve(Target.LogicalName, Target.Id, new ColumnSet(true));
var entityStatusCode = (OptionSetValue)entity.Attributes["statuscode"];
if (entityStatusCode.Value == 3)
{
    //Code to execute if opportunity won
} 
```

# ruby-on-rails - 如何在资产管道中包含 ActionView 助手？

> ID：14284278
> 
> 赞同：12
> 
> 时间：2013-01-11T18:19:21.140
> 
> 标签：ruby-on-rails, asset-pipeline, actionviewhelper

如何包含 Rails 视图助手以通过资产管道执行上下文访问？

一个示例用例是使用`form_tag`辅助方法为表单生成标记，并使其可用于 Javascript 模板（如把手、jst 等）。

我使用 handlebar_assets gem，但这也应该适用于任何`erb`模板`haml`。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-11T18:19:21.140

创建一个初始化程序并将助手包含在资产的上下文中，如下所示：

```
Rails.application.assets.context_class.class_eval do
  include ActionView::Helpers
  include MyAppHelper
  include Rails.application.routes.url_helpers
end 
```

取自这个[sprockets issue](https://github.com/sstephenson/sprockets/issues/218)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-01-11T23:09:16.443

上面的答案现在已经过时了。从 sprockets-rails 3 开始，适当的接口是一个配置块，如下所示：

```
Rails.application.config.assets.configure do |env|
  env.context_class.class_eval do
    # include SomeHelper
  end
end 
```

此配置块仍应放置在初始化程序中。

参考：[https ://github.com/rails/sprockets-rails/issues/307#issuecomment-170707886](https://github.com/rails/sprockets-rails/issues/307#issuecomment-170707886)

# varchar - 将 VARCHAR 转换为数据类型 INT

> ID：14284281
> 
> 赞同：3
> 
> 时间：2013-01-11T18:19:28.407
> 
> 标签：varchar

我有以下代码。Case 语句将列出的数字转换为文本，将其余代码转换为 NULL，但我不断收到以下错误： CONVERSION FAILED WHEN CONVERTING THE VARCHAR VALUE 'RDG5' TO DATA TYPE INT。RDG5 是被转换为 NULL 的众多代码之一。有什么想法吗？

```
 SELECT     dbo.TACCPLI.SYS_EMP_ID_NR, MAX(dbo.TACCPLI.AML_TYP_CD) AS DEG, (CASE WHEN dbo.TACCPLI.AML_TYP_CD IN (20, 25) 
                      THEN 'Associates' WHEN dbo.TACCPLI.AML_TYP_CD IN (30, 35) THEN 'Bachelors' WHEN dbo.TACCPLI.AML_TYP_CD IN (40, 45) 
                      THEN 'Masters' WHEN dbo.TACCPLI.AML_TYP_CD IN (50) THEN 'PhD' ELSE NULL END) AS Degree_Level, dbo.TACCPLI.AML_TYP_CD
FROM         dbo.TACCPLI RIGHT OUTER JOIN
                          (SELECT     dbo.v_TMS_employee_HR.GEMSID, dbo.v_TMS_employee_HR.TMS_ID
                            FROM          dbo.v_TMS_employee_HR INNER JOIN
                                                   dbo.v_sc17_TMS_Data_Career_Meeting_Rating ON 
                                                   dbo.v_TMS_employee_HR.TMS_ID = dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Employee_ID
                            WHERE      (LEFT(dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Meeting_Readiness_Rating, 2) IN ('14', '15')) AND 
                                                   (dbo.v_TMS_employee_HR.Job_Group_Code >= '72') AND (dbo.v_TMS_employee_HR.Job_Group_Code <= '79') AND 
                                                   (dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Plan_Year = 2012) AND (dbo.v_TMS_employee_HR.Region NOT IN ('12', '13', '16', '17'))
                            GROUP BY dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Meeting_Readiness_Rating, dbo.v_TMS_employee_HR.GEMSID, dbo.v_TMS_employee_HR.TMS_ID) 
                      AS HPS ON dbo.TACCPLI.SYS_EMP_ID_NR = HPS.TMS_ID
GROUP BY dbo.TACCPLI.SYS_EMP_ID_NR, dbo.TACCPLI.AML_TYP_CD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:23:13.073

根据您的评论

嗯，它正在尝试转换它，以便它可以执行 case 语句。不确定我是否喜欢这样，对我来说它应该只是因为类型不匹配而无法解析它。

嗬嗬

这是一个脆弱的讨厌的东西，但如果可以依赖 AML_TYP_CD 总是让它​​的最后两个字符是数字，那么

```
CASE WHEN Right(dbo.TACCPLI.AML_TYP_CD,2) IN ('20', '25') 
```

可能是一种方法，但看到“20”和“25”等有自己的含义，他们应该有自己的专栏。

# php - 随机用户名

> ID：14284282
> 
> 赞同：2
> 
> 时间：2013-01-11T18:19:34.013
> 
> 标签：php, random

这是这种情况，我有注册页面，允许用户注册，但只允许用户输入他们的名字、姓氏电子邮件和密码。数据存储在临时用户表中，这适用于尚未激活其帐户的用户。

成功注册后，用户可以通过电子邮件激活他们的帐户，一旦激活，数据就会移动到另一个表并从临时表中删除。（我知道有些人可能不同意这种方法，但这是我选择的方法）。这一切都很好。

我现在面临的问题是，我有一个用于用户名的字段，这实际上仅用于构建 URL，如下所示：example.com/home/first.last.56 但它必须是唯一的，当然一旦激活并登录，用户将能够稍后更改此设置。

我知道如果我只允许用户选择他们自己的用户名并且从长远来看可能更简单，那么这会更容易，但是目前我不想这样做。

**我想过要做的事情：**

使用“临时表”中的唯一行 ID 并将其放在字符串的末尾，如下所示： first.last.56 其中 first 和 last 是用户的名字和姓氏，56 是临时表中的唯一行 ID。这行得通，但我认为一旦表格增长到 1500 或 2000，那么用户名将会很长，即 first.last.1597 并且在 url 的外观方面有点眼痛，而且 url 不是非常用户友好。我想将此保持在 2 位数的最大值。

在保持唯一用户名的同时，还有哪些其他方法可以实现此目的？

只要名称与用户的真实姓名相似，我也可以使用名字或姓氏的字母来创建用户名。

这是我的代码到目前为止的样子：

```
 $new_member_insert_data = array(
        'First_Name' => ucfirst(strtolower($first_name)),
        'Last_Name' => ucfirst(strtolower($last_name)),
        'Email' => $this->input->post($this->session->userdata('email_n_attribute')),
        'Password' => $hash,
        'Confirm_Code' => $confirm_code,
        'IP' => $_SERVER['REMOTE_ADDR']
    );

    $insert = $this->db->insert('Temp_Account', $new_member_insert_data);

    $this->db->select('idAccount');
    $query = $this->db->get_where('Temp_Account', $new_member_insert_data);
    if($query->num_rows() == 1){
        foreach($query->result() as $row){
            $user_name = array('User_Name' => $first_name.'.'.$last_name.'.'.$row->idAccount);
            $this->db->where('idAccount', $row->idAccount);
            $this->db->update('Temp_Account', $user_name);  
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:18:34.770

首先，我要感谢大家的反馈，并说 stackoverflow.com 很棒并且拥有最好的社区！曾经。

所以在做了一些玩弄之后，几次失败的尝试，以及上面留下的建议形式的评论，这就是我想出的。

我决定只创建一个私有函数来处理“随机用户名”的创建。起初我尝试使用 MySQL COUNT() 函数编写 sql 部分，以意识到这不是必需的。（当使用带有 Codeignter 的活动记录时）

相反，您可以简单地查询数据库并检查这样的结果，

```
 $sql = 'SELECT User_Name FROM Account WHERE User_Name = ?';
    $count = $this->db->query($sql, $user_name); 
```

所以这里是 random_user_name 函数：

```
private function random_user_name($first_name, $last_name, $data){
    // Generate a random number
    $rand_number = rand(2, 99);
    // Create the username 
    $user_name = array('User_Name' => $first_name.'.'.$last_name.'.'.$rand_number);

    // Check the db for a matching username     
    $sql = 'SELECT User_Name FROM Account WHERE User_Name = ?';
    $count = $this->db->query($sql, $user_name);

    // If a matching username is found run the function again, to create a new username 
    if($count->num_rows() == 1){
            $this->random_user_name($first_name, $last_name, $data);
    }else{

        // Select the row id from the db of the newly created user  
        $this->db->select('idAccount');
        $query = $this->db->get_where('Temp_Account', $data);

        // If we find the user, and we better! update the username field
        if($query->num_rows() == 1){
            foreach($query->result() as $row){  
                $this->db->where('idAccount', $row->idAccount);
                $this->db->update('Temp_Account', $user_name);
            }
        }
    }
} 
```

希望这可以帮助其他人花费不必要的时间来试图弄清楚原来是一个相当简单的问题，再次感谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:42:41.050

当然，我个人从未使用过 codeigniter 框架，但我会这样做：

```
$search_user_name = $first_name.'.'.$last_name.'.';
$query = "select count(1) as count from users where User_Name like '{$search_user_name }%'";
//Use whatever DB method you CI uses to run this query
//If possible remove $user_name from the query directly and use bind parameter
//This query will return a number ($count) then you can do the following
$user_name = array('User_Name' => $search_user_name . $count);
//Use the rest of your existing code 
```

# google-maps-api-3 - 适用于 PHP/MySQL 的 Google 地图教程无法正常工作

> ID：14284293
> 
> 赞同：0
> 
> 时间：2013-01-11T18:20:17.337
> 
> 标签：google-maps-api-3

在这个谷歌教程中；[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)在“加载 XML 文件”部分中讨论了一个名为“downloadUrl”的函数。它说“url 指定 XML 文件或生成文件的 PHP 脚本的路径，具体取决于您是否希望在数据库更改时动态更新 XML。通常最简单的方法是将其与HTML，以便您可以通过文件名来引用它。” 问题是，如果我使用将 php url 放入函数中它不起作用。如果我直接链接到它的 xml 文件。例如，此调用不会将标记放在地图上。

downloadUrl('SCOTAxml.php?lat=39.4&lng=-94.6&dist=100', function(data) { ...

但是，此调用确实有效。

downloadUrl("testxml.xml", function(data) { ...

我使用 SCOTAxml.php 程序完全按照教程中的操作创建 xml。我只是将它复制到 testxml.xml afterword 以测试 downloadUrl 功能。

如果您还没有猜到，我的问题是为什么不能按照教程所说的方式正常工作？

想法？要检查的东西？一个解法？

提前感谢所有帮助解决这些简单问题的伟大人物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:31:01.637

我下载了教程，但由于地图图标而无法正确加载。他们的链接已经失效。您需要下载自己的图标。地图中使用的图标可以从[**Visual Case**](http://www.visual-case.it/cgi-bin/vc/GMapsIcons.pl)中通过点击保存获得。

```
var customIcons = {
      restaurant: {
        icon: 'icons/restaurant.png',
        shadow: 'icons/restaurant_shadow.png'
      },
      bar: {
        icon: 'icons/bar.png',
        shadow: 'icons/bar_shadow.png'
      }
    }; 
```

正如评论检查您正在从`SCOTAxml.php`.

**编辑**

这是从教程生成的 XML 文件，如浏览器中所示。

```
<markers>
<marker name="Frankie Johnnie & Luigo Too" address="939 W El Camino Real, Mountain View, CA" lat="37.386337" lng="-122.085823" type="bar"/>
<marker name="Amici's East Coast Pizzeria" address="790 Castro St, Mountain View, CA" lat="37.387138" lng="-122.083237" type="restaurant"/>
</markers> 
```

我注意到您传递的参数（纬度、经度和距离）在`phpsqlajax_genxml.php`. 这将向我表明您正在将教程[**创建商店定位器**](https://developers.google.com/maps/articles/phpsqlsearch_v3?hl=en)与您上面指出的教程混合使用。

![地图](../Images/18b151102fff47218cc3b42a56238db7.png)

**编辑 2**

要从 PHP 文件输出 XML 内容，必须设置 content-type 标头。这是为了让浏览器知道 PHP 文件的输出内容是 XML，而不是默认的内容类型标头 (text/html)。

```
//Set content-type header for XML 
header("Content-type: text/xml"); 
```

**编辑 3** visual-case 上的图标页面已移至此处：[http ://www.lass.it/Web/viewer.aspx?id=4](http://www.lass.it/Web/viewer.aspx?id=4)

# windows - （此时出乎意料

> ID：14284295
> 
> 赞同：1
> 
> 时间：2013-01-11T18:20:23.537
> 
> 标签：windows, batch-file

我已经阅读了有关此的大部分主题，并且了解复杂的 if/then 块在 Windows 命令行中是一种痛苦，因此我尝试缩减规模，但我仍然以“（此时是意外的”结束错误。

我觉得这与设置 %confirm% 的位置有关，但我真的不确定。最初我在块中有一个 goto，我读到它是不可行的，所以我尝试使用嵌套的 if/if/else 来解决这个问题。没有骰子。

我想不出比我正在做的更基本的事情了，因为命令外壳的内部工作超出了我的理解范围。

第一个版本：

```
@echo off

TITLE cleanup

:: make user confirm they want to cleanup old epub conversion files
set /p confirm = "Are you sure? (y/n): "

if %confirm% == y (
    rm ePub
    rm IP
    rm OP
    md IP
    exit
) else (
    if %confirm% == n (
        exit
    ) else (
        set /p confirm = "Are you sure? (y/n): "
    )
) 
```

当前的缩减版本：

```
 @echo off

TITLE cleanup

:: make user confirm they want to cleanup old epub conversion files
set /p confirm = "Are you sure? (y/n): "

if %confirm% == y (
    rm ePub
    rm IP
    rm OP
    md IP
    exit
) else ( 
    exit
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T18:21:52.723

当变量实际上为空时，您的代码语法错误。尝试

```
if "%confirm%" == "y" ( 
```

这保证了 . 的左侧总是有一些东西`==`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:56:35.557

1-在批处理文件中，`SET var=value`和`SET /P var=prompt`命令都将放置在等号之前的完整字符串作为变量名，*包括空格*！这意味着在此命令中：

```
set /p confirm = "Are you sure? (y/n): " 
```

...变量名称是：“确认+空格”。您可以检查这一点，将这一行放在 set /p 之后：

```
echo Value of "confirm": %confirm%  Value of "confirm ": %confirm % 
```

结论：**永远不要在 SET 命令中的等号之前留下空格**。

2- 同样，分配给变量或用作提示的值是放在等号之后的完整字符串，*包括引号*。如果要分隔使用的值/提示：**将变量名称和值/提示都括在引号中**；例如：

```
set /p "confirm=Are you sure? (y/n): " 
```

当表达式可能包含特殊的批处理字符时，在 SET /A 命令中尤其如此：`SET /A "var=1<<16"`. 同时，在 SET /A 命令的特定情况下，变量名和等号之间的空格*将被忽略*: `SET /A var = 1` `echo %var%`，而不是`%var %`。

3- 独立于前两点，如果变量值可能为空（如 SET / P 读取的变量），则该值应在 IF 命令中用引号括起来（以及值与它进行比较），如 Ben Voigt前面提到过。发生这种情况是因为如果用户只是按 Enter 键，SET /P 命令*不会修改*变量，因此您始终应该在 SET /P 命令之前使用*默认值*初始化变量；否则，程序可能会处理在先前执行或先前循环中输入的值！

```
set confirm=n
set /p "confirm=Are you sure? (y/n): "
if /I "%confirm%" == "y" ( 
```

以前的 IF 仍然需要引号，因为用户可能只输入空格！此外，它使用 /I 开关来忽略大小写，因为用户可能会以大写形式输入 Y 或 N。

我希望它有帮助...

安东尼奥

# recursion - 添加具有交替符号的项的总和

> ID：14284300
> 
> 赞同：0
> 
> 时间：2013-01-11T18:20:37.590
> 
> 标签：recursion, numbers

可能是一个菜鸟问题，但我想不出一种优雅的方式来以一般方式解决以下问题。我想我不久前在 Euler 上看到了它，它一直困扰着我一段时间。

假设您有一个复数 z，我想要一个可以执行以下操作的函数。

```
s = +/-z^0
s = +/-z^0 + +/-z^1
s = +/-z^0 + +/-z^1 + +/-z^2
... 
```

有谁知道解决这个问题的好方法？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:06:36.603

这是我的解决方案。zExp 是一组预先计算的幂项。

```
void sumSeries(zSum, zExp, count) {
    if (count == 0) {
        zSum += zExp[0];
        doSomethingWith(zSum);
        zSum -= 2*zExp[0];
        doSomethingWith(zSum);
    } else {
        zSum += zExp[0];
        sumSeries(zSum + zExp[count], zExp, count);
        zSum -= 2*zExp[0];
        sumSeries(zSum - zExp[count], zExp, count);
    }
} 
```

# ios - 正确实现父/子 NSManagedObjectContext

> ID：14284301
> 
> 赞同：27
> 
> 时间：2013-01-11T18:20:38.140
> 
> 标签：ios, objective-c, cocoa, core-data, nsmanagedobjectcontext

我的应用程序有时会将对象插入到托管对象上下文中，这些对象不一定要保存。例如，当我启动“添加实体”模式时，我会创建一个托管对象并将其分配给该模式。如果用户从该模式保存，我保存上下文。如果他取消，我会删除该对象并且不需要保存。

我现在引入了一个“导入”功能，它可以切换到我的应用程序（使用 URL 方案）并添加一个实体。因为这些模态之一可能是打开的，所以此时保存上下文是不安全的。为模态创建的瞬态对象将被保存，即使用户取消，并且不能保证删除（来自取消操作）将被保存 - 用户可能会退出应用程序。

同样，我不能在我的应用退出时简单地保存。如果此时模态框处于打开状态，则临时对象将被错误地保存。

为了解决这个问题，我尝试使用子上下文，如此[处](http://www.cocoanetics.com/2012/07/multi-context-coredata/)所述。在阅读了我在 SO 上能找到的所有内容后，我还有几个问题：

1.  我应该为每个上下文使用哪种并发类型？请记住，我这样做不是为了性能/线程优势。我知道如果要拥有子上下文，我不能将 NSConfinementConcurrencyType 用于主要上下文，但我不确定其他两个选项中的哪一个最适合。对于子上下文，是否需要匹配？或者我什至可以在这里使用禁闭类型吗？我尝试了多种组合，似乎一切正常，但我想知道哪种组合适合我的要求。

2.  （附带问题）如果我使用类 iVar，为什么我只能让它工作？我认为我应该能够在创建它的方法中声明临时上下文，然后使用 entity.managedObjectContext 引用它。但是当我来访问它时它似乎为零？如果我改用 iVar 来保存参考，则可以纠正此问题。

3.  什么是正确的方法或将更改传播到主要上下文？我已经看到在每个上下文中使用不同的块包装实现的各种评论。这取决于我的并发类型吗？我目前的版本是：

    ```
    //save the new entity in the temporary context
    NSError *error = nil;
    if (![myObject.managedObjectContext save:&error]) {NSLog(@"Error - unable to save new object in its (temporary) context");}

    //propogate the save to the main context
    [self.mainContext performBlock:^{
        NSError *error2 = nil;
        if (![self.mainContext save:&error2]) {NSLog(@"Error - unable to merge new entity into main context");}
    }]; 
    ```

4.  当我的用户保存时，它会向其委托（我的主视图控制器）发送一条消息。委托传递了添加的对象，并且它必须在主上下文中找到相同的对象。但是当我在主要上下文中寻找它时，它没有找到。主要上下文**确实**包含实体 - 我可以记录其详细信息并确认它存在 - 但地址不同？如果这注定要发生（为什么？），我如何在保存后在主上下文中找到添加的对象？

感谢您的任何见解。对于一个冗长的多部分问题，我很抱歉，但我认为之前可能有人已经解决了所有这些问题。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-11T20:19:58.780

父/子 MOC 模型是 Core Data 的一个非常强大的特性。它极大地简化了我们过去必须处理的古老的并发问题。但是，正如您所说，并发不是您的问题。要回答您的问题：

1.  传统上，您将s`NSMainQueueConcurrencyType`用于`NSManagedObjectContext`与主线程关联，将`NSPrivateQueueConcurrencyType`s 用于子上下文。子上下文不需要匹配其父上下文。如果您不指定类型，则`NSConfinementConcurrencyType`所有s 都默认为这是。`NSManagedObjectContext`它基本上是“我将为核心数据管理自己的线程”类型。
2.  在没有看到您的代码的情况下，我的假设是您创建子上下文的范围结束并被清理。
3.  使用父/子上下文模式时，您需要使用块方法。使用块方法的最大好处是操作系统将处理将方法调用分派给正确的线程。您可以`performBlock`用于异步执行，也可以`performBlockAndWait`用于同步执行。

您将使用它，例如：

```
- (void)saveContexts {
    [childContext performBlock:^{
        NSError *childError = nil;
        if ([childContext save:&childError]) {
            [parentContext performBlock:^{
                NSError *parentError = nil;
                if (![parentContext save:&parentError]) {
                    NSLog(@"Error saving parent");
                }
            }];
        } else {
            NSLog(@"Error saving child");
        }
    }];
} 
```

现在，您需要记住，在您保存之前，在子上下文中所做的更改（例如插入的实体）对父上下文不可用。对于子上下文，父上下文是持久存储。保存时，您将这些更改传递给父级，然后父级可以将它们保存到实际的持久存储中。将传播更改保存上一级。另一方面，获取子上下文将把数据拉到每个级别（通过父级和子级）

4.  您需要`objectWithID`在 managedObjectContext 上使用某种形式。它们是在上下文之间传递对象的最安全（也是唯一）的方式。正如 Tom Harrington 在评论中提到的那样，您可能想要使用`existingObjectWithID:error:`虽然，因为`objectWithID:`始终返回一个对象，即使您传递了无效的 ID（这可能导致异常）。更多详情：[链接](https://stackoverflow.com/questions/4818526/whats-the-proper-way-to-use-nsmanagedobjectcontexts-objectwithid)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T19:40:31.067

1.  如果使用父/子模式，通常使用 声明父上下文，`NSMainQueueConcurrencyType`使用`NSPrivateQueueConcurrencyType`. `NSConfinementConcurrencyType`用于经典的穿线模式。

2.  如果你想保留上下文，你需要一个强引用它。

3.  您只需在子上下文上调用 save 方法将更改推送到父上下文，如果要持久化数据，您也可以在父上下文上调用 save 。您不需要在一个块内执行此操作。

4.  有几种方法可以从上下文中获取特定对象。我不能告诉你哪一个适用于你的情况，试试看：

    `- objectRegisteredForID:`

    `- objectWithID:`

    `- existingObjectWithID:error:`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T19:46:38.290

我遇到过类似的问题，这里是您部分问题的答案 - 1\. 您应该能够使用并发类型`NSPrivateQueueConcurrencyType`或`NSMainQueueConcurrencyType` 2\. 假设您已经创建了一个`tempContext`带有父上下文的临时上下文`mainContext`（假设 iOS5）。在这种情况下，您可以将您的托管对象从以下位置移动`tempContext`到`mainContext`-

```
object = (Object *)[mainContext objectWithID:object.objectID]; 
```

然后，您可以保存 mainContext 本身。

也许还有，

```
[childContext reset]; 
```

如果要重置临时上下文。

# java - 使用 Woodstox 解析器解析“&”字符时出错

> ID：14284307
> 
> 赞同：4
> 
> 时间：2013-01-11T18:21:09.687
> 
> 标签：java, xml, xml-parsing, woodstox

爪哇：1.6
伍德斯托克斯：4.1.4

我目前正在尝试让 Woodstox xml 解析器成为我的朋友。但开始真的很难:) 我有小吗？像这样解析xml时的问题：

```
<teams>
    <team id="team1">Mom & Dad</team>
    <team id="team2">Son & Daughter</team>
</teams> 
```

这很简单，但不幸的是我遇到了这个异常：

```
Exception in thread "main" [com.ctc.wstx.exc.WstxLazyException] com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character ' ' (code 32) (missing name?)
 at [row,col {unknown-source}]: [2,24] 
```

这是因为字符 &。

问题：
是否可以成功读取 xml 而不会出现此异常？

提前谢谢
你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T19:01:06.717

`&`是一个无效字符，应该转义为`&amp;`或包含在 CDATA 部分中。

```
<teams>
    <team id="team1">Mom &amp; Dad</team>
    <team id="team2"><![CDATA[Son & Daughter]]></team>
</teams> 
```

来自： [http ://www.w3.org/TR/REC-xml/#syntax](http://www.w3.org/TR/REC-xml/#syntax)

> & 符号 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。如果在其他地方需要它们，它们必须分别使用数字字符引用或字符串“ `&amp;`”和“ `&lt;`”进行转义。

# mongodb - MongoDB 是 Memcached 更好的替代品？

> ID：14284311
> 
> 赞同：12
> 
> 时间：2013-01-11T18:21:21.760
> 
> 标签：mongodb, memcached

我们可以使用 MongoDB 作为内存缓存库（memcache 和 memcached）的替代品吗？

MongoDB和内存缓存库有什么区别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T20:12:58.187

MongoDB 作为缓存存储的主要问题之一是它没有过期机制。您可以在[此答案](https://stackoverflow.com/a/10721249/235600)中找到更多详细信息。

**更新**自 MongoDB v2.2 以来，它允许 TTL 用于集合。感谢JohnnyHK 指点。

我建议使用[Redis 进行缓存](http://jodosha.github.com/redis-store/)，使用 MongoDB 作为数据库。他们一起工作很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T21:03:20.503

MongoDB 最大的问题是它不像 memcached 那样自然而有力地将所有内容加载到内存中，正如它的名字一样，它是内存中的键值存储。

您还必须考虑到 MongoDB 本身不进行内存管理，而是允许操作系统使用本机 LRU 算法完全控制它。我无法理解这可能给您带来的任何问题，因为我没有您的数据、索引或查询。

然而，许多尝试将 memcache 用作数据库的人（很多人都这样做）发现它在这样做方面并不是特别快（并不是真正为它设计的），这就是 MongoDB 突破的地方。

MongoDB 是否可以替代 memcache 取决于您的需求，但是如果您需要 MongoDB 需要替换缓存，那么您也可以用 MongoDB 替换 SQL，这是我对此事的诚实看法，因为您模糊了缓存和存储之间的界限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T20:19:07.707

这是一些用 MongoDB 替换 memcached 的人的示例。或者至少消除了对 memcached 的需要。

[http://blog.serverdensity.com/removing-memcached-because-its-too-slow/](http://blog.serverdensity.com/removing-memcached-because-its-too-slow/)

# android - Android GPU 模拟器

> ID：14284312
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:21:22.647
> 
> 标签：android, android-emulator

没有检测到 GPU 仿真的仿真器。已出现在我的 logcat 中，但我没有在我的 AVD 设置中找到启用仿真选项..我正在使用它！[我的 SDK 是 R 21][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:23:18.277

编辑您的 AVD 并检查使用主机 GPU：

![在此处输入图像描述](../Images/f0bac050cef7fd26db18e27b36eb6be7.png)

编辑：但它不适用于预 ICS 仿真器。

# ruby-on-rails-3 - Rails 部分渲染有时会花费太多时间

> ID：14284315
> 
> 赞同：4
> 
> 时间：2013-01-11T18:21:39.947
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, partial-views, renderpartial

在我看来，我正在渲染部分内容。这实际上是一个在表格中出现大约 500 到 600 次的行元素。我已经急切地加载了所有关联。但是，问题是，相同的部分有时会突然出现不同的渲染时间。

我的 Rails 服务器 o/p：

```
Rendered admin/invoices/_update.html.erb (1330.3ms)
Rendered admin/invoices/_update.html.erb (4.8ms)
Rendered admin/invoices/_update.html.erb (4.8ms)
Rendered admin/invoices/_update.html.erb (8.8ms)
Rendered admin/invoices/_update.html.erb (4.4ms)
Rendered admin/invoices/_update.html.erb (1309.9ms)
Rendered admin/invoices/_update.html.erb (4.7ms)
Rendered admin/invoices/_update.html.erb (4.6ms)
Rendered admin/invoices/_update.html.erb (4.6ms)
Rendered admin/invoices/_update.html.erb (1322.6ms)
Rendered admin/invoices/_update.html.erb (4.2ms) 
```

此外，没有特定的行每次都需要更长的时间。

在我的视图文件中：

```
<% @updates.each do |update| %>
<%= render :partial => 'update', :locals => {:user => update[0]} #each of this is  a row %>
<% end %> 
```

更新：还建议这是否是一个好方法？即：循环一个部分这么多次。我不能使用分页和 Ajax 来固定东西。！还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:39:22.323

部分在渲染集合中非常有用。当您通过 :collection 选项将集合传递给部分时，将为集合中的每个成员插入一次部分：

```
<%= render :partial => 'update', :collection => @updates %> 
```

这也有一个简写。假设 @updates 是更新实例的集合，您可以简单地将其写入 index.html.erb 以产生相同的结果：

```
<%= render @updates %> 
```

[Rails Guides 的第 3.4.5 节](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)详细解释了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T18:39:32.563

虽然我不确定为什么渲染中的滞后峰值，但我强烈建议颠倒顺序：您将所有更新都提供给部分并在其中迭代并渲染行。

在视图文件中

```
 <%= render :partial => 'update', :locals => {:updates => @updates} %> 
```

在更新部分里面

```
 <% updates.each do |update| %>
       RENDER LOGIC
    <% end %> 
```

这就是为什么您不会为更新中的每一行承受部分加载开销。希望这可以帮助！

# orm - Coldfusion 9 orm 一对一多 cfc

> ID：14284325
> 
> 赞同：1
> 
> 时间：2013-01-11T18:22:06.967
> 
> 标签：orm, coldfusion, coldfusion-9

我正在使用 CF9 ORM -

我有一个对象模型，其中我有多个对象，这些对象可能与一个特定对象具有一对一的关系。有没有办法具体说明与两种潜在 CFC 之一的反比关系？

CFC 1a（问题类型 1）：

```
property name="Product" cfc="Product" fieldtype="one-to-one" fkcolumn="productID" ; 
```

CFC 1b（问题类型 2）：

```
property name="Product" cfc="Product" fieldtype="one-to-one" fkcolumn="productID" ; 
```

氟氯化碳 2：

```
property name="Problem" fieldtype="one-to-one" cfc=???; 
```

我可以为此使用接口吗？或者...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:43:19.250

CFC 1a 和 CFC 1b 都可以是父实体 CFC 1 的子类。CFC 1 应该与“产品”有关系，这将由两个子类继承。然后，CFC 2 可以在其关系中指向 CFC 1。

示例实体：

```
/** CFC 1 **/
component persistent="true" {

    property name="Product" cfc="Product" fieldtype="one-to-one" fkcolumn="productID";

}

/** CFC 1a **/
component persistent="true" extends="baseProblem" {

    // problemtype1 specific properties go here

}

/** CFC 1b **/
component persistent="true" extends="baseProblem" {

    // problemtype2 specific properties go here

}

/** CFC 2 **/
component persistent="true" {

    property name="Problem" fieldtype="one-to-one" cfc="baseProblem";

} 
```

如果您确实采用这种方法，您可能需要研究[继承映射](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WS027D3772-2E98-4d5b-8800-054A62EBF8D9.html#WSE5000AA0-1A02-45c7-A251-3C41FF679326)，特别是`discriminatorColumn`and`discriminatorValue`属性。在不知道您的数据库模式是如何设置的情况下，很难就这一点提供进一步的建议，但文档应该可以帮助您入门。

# windows-8 - 如何在 Metro 应用程序中嵌入 Word 文档（winRT）

> ID：14284327
> 
> 赞同：1
> 
> 时间：2013-01-11T18:22:17.350
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

我正在编写需要自身嵌入 word 文档的应用程序。因为我在互联网上没有找到任何解决方法，我认为这是不可能的，所以另一个建议是什么。实际上我需要嵌入的原因是我想阻止用户打印它并且文件在设备上被加密所以应用程序应该在显示它之前解密它

最好的建议是什么？

ps：word 文件可以更改为任何格式，例如 OpenXML 和下一个版本的应用程序也应该能够向用户显示 Exel、Pdf 和 PowerPoint 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:35:31.960

没有简单的方法可以做到这一点。将您自己的 Word 渲染引擎构建到 Store 应用程序中是非常困难的（读起来不可能），并且没有开箱即用的控件来执行此操作。阻止用户打印 Office 文档的最佳方法是在文档本身上使用[信息权限管理](http://office.microsoft.com/en-us/word-help/information-rights-management-in-office-2010-HA010354260.aspx)。这样，文档将进行保护，您的商店应用程序将能够启动 Word（或 Excel 或 PowerPoint）以使用[Launcher 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.launcher.aspx)打开文档。

每次编辑：是的。这是假设用户将提供（或您已经拥有）文档的解密密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:48:51.307

[SyncFusion 在此处](http://www.syncfusion.com/products/winrt)有一些用于处理 Word 文档的控件。也许这些会起作用。

# java - 在 Spring 中合并 java.util.Properties

> ID：14284329
> 
> 赞同：1
> 
> 时间：2013-01-11T18:22:25.850
> 
> 标签：java, spring

我有一个将`java.util.Properties`对象作为构造函数参数的方法。它目前正在通过 Spring 构建（参见[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29)）：

```
<bean id="myObj" class="myClass">
    <constructor-arg>
        <value>
            prop1=1
            prop2=2
        </value>
    </constructor-arg>
</bean> 
```

现在我想提取这个`<value>...</value>`块，以便我可以创建`Properties`从这些基本属性继承但覆盖/删除/添加一些属性的其他 bean。请注意，如果可能，我想保留`<value></value>`格式。

我尝试使用`<util:properties>`，但是，似乎没有办法使用与 中相同的格式`<value></value>`。

我也尝试使用

```
<bean id="test" class="java.util.Properties">
    <constructor-args>
        <value>
             test1=1
             test2=2
        </value>
    </constructor-args>
</bean> 
```

似乎即使 中有一个复制构造函数`java.util.Properties`，它也不起作用（给出一个空的 Properties 对象）。此外，如果我有一个 java.util.Properties bean，我将如何用另一个属性列表/bean 覆盖/扩展它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:23:12.360

似乎审查我的编辑的人不是很有帮助，也不理解它。因此，我将在这里发布完整的答案。

```
<bean name="props" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
 <property name="properties">
    <value>
        test1=1
        test2=2
    </value>

</property>
</bean>

<bean name="props2" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
 <property name="propertiesArray">
  <list>
      <ref bean="props">
      <value>
           test1=OVERRIDE!
      </value>
  </list>
 </property>
</bean>

<bean id="myObj" class="myClass">
 <constructor-arg ref="props2">
 </constructor-arg>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:31:17.947

你可以这样做：

```
<bean name="props" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="properties">
        <value>
            test1=1
            test2=2
        </value>

    </property>
</bean> 
```

然后参考其他地方的通用属性集：

```
<bean id="myObj" class="myClass">
    <constructor-arg ref="props">
    </constructor-arg>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T15:17:59.717

使用 Spring 3，您可以这样做：

```
<util:properties id="myProperties">
    <prop key="test1Key">test1Value</prop>
    <prop key="test2Key">test2Value</prop>
</util:properties>

<bean id="myObj" class="myClass">
    <constructor-arg index="0" ref="myProperties" />
</bean> 
```

# cakephp - 如何在 cakephp 视图中包含插件

> ID：14284336
> 
> 赞同：0
> 
> 时间：2013-01-11T18:22:39.510
> 
> 标签：cakephp

当我将验证码插件 php 文件调用到我的视图中时，会引发此错误。但它在我的本地主机上完美运行。如何在远程主机上调用它？

> 致命错误：require_once() [function.require]：打开失败需要'/hermes/waloraweb092/b275/moo.brandexponentscom/ivyscout/app/Plugin\Recaptcha\recaptchalib.php'（include_path='/hermes/waloraweb092/b275/ moo.brandexponentscom/ivyscout/lib:.:/usr/local/lib/php-5.2.17/lib/php') 在 /hermes/waloraweb092/b275/moo.brandexponentscom/ivyscout/app/View/Elements/provider_setting。 ctp 在第 217 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T17:12:36.877

这应该适用于您的应用程序的任何位置

require_once(CAKE_CORE_INCLUDE_PATH."/app/plugins/recaptchalib.php");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:26:37.060

让我猜猜：你的本地系统来自比尔盖茨？也被称为微软？这个（和其他一些操作系统一样）是一个 CI（不区分大小写）操作系统。您的部署系统可能是 Linux，因此是 CS（区分大小写）。

您应该更加注意文件的大小写和 App::uses() 语句。所以它不是`recaptchalib.php`但是 - 如果你的班级名称是`RecaptchaLib`-

```
RecaptchaLib.php 
```

确保文件系统和代码都具有正确的大小写，并且您不会在部署时遇到问题。

所以你的`App::uses()`陈述应该是：

```
App::uses('RecaptchaLib', 'Recaptcha.Lib'); 
```

假设您使用加载插件`CakePlugin::load('Recaptcha')`并将类文件正确放置在它应该在的名称空间中，例如“APP/Plugin/Recaptcha/Lib/”。

最后但同样重要的是，在部署时，您应该清除缓存或临时（秒！）切换到调试模式 > 0 以通过这种方式清除缓存。否则，持久缓存仍将存储旧的文件系统路径。

# joomla - Joomla 模块在首页没有显示

> ID：14284337
> 
> 赞同：0
> 
> 时间：2013-01-11T18:22:46.547
> 
> 标签：joomla, module, show, frontpage, nothing

我一直在开发一个 Joomla 模块。这是我的第一个模块开发。

我是否可以在 Joomla 中启用一个模块并让首页没有输出？

因为我不想在首页位置显示任何内容，所以只显示一个弹出窗口。

我的 tmpl/default.php 内容是：

```
<?php defined('_JEXEC') or die('Restricted access'); // no direct access ?> 
```

在模块条目中，我评论了这一行：

```
//require(JModuleHelper::getLayoutPath('mod_blabla')); 
```

但是，文本区域参数（后端）的内容显示在首页。

**解决方案：**

我的 php 代码中有一个名为“$content”的变量。无论我分配给它什么，都显示在首页。现在我将变量名称从 $content 更改为其他名称，首页中没有显示任何内容。这就是我想要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:38:08.983

在模块管理器中，转到您的模块，在左下角，您可以设置要在哪些页面上显示模块。取消选择主页菜单项。

# c# - C# 5 async / await 简单解释

> ID：14284345
> 
> 赞同：6
> 
> 时间：2013-01-11T18:23:22.507
> 
> 标签：c#, .net, async-await

> **可能重复：**
> [.Net 4.5 中 Async/Await 的简要说明](https://stackoverflow.com/questions/13082074/brief-explanation-of-async-await-in-net-4-5)

我已经用 C# 编程了一段时间，但我无法理解新的**async** / **await**语言功能是如何工作的。

我写了一个这样的函数：

```
public async Task<SocketError> ConnectAsync() {
    if (tcpClient == null) CreateTCPClient();
    if (tcpClient.Connected)
        throw new InvalidOperationException("Can not connect client: IRCConnection already established!");

    try {
        Task connectionResult = tcpClient.ConnectAsync(Config.Hostname, Config.Port);
        await connectionResult;
    }
    catch (SocketException ex) {
        return ex.SocketErrorCode;
    }

    return SocketError.Success;
} 
```

但显然，这没有意义，对吧？因为我正在等待 TcpClient.ConnectAsync 的结果之后立即上线。

但我想编写我的**ConnectAsync()**函数，以便它本身可以在另一种方法中等待。这是正确的方法吗？我有点失落。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:43:00.493

我希望您已经`yield return`了解了创建迭代器的语法。它暂停执行，然后在需要下一个元素时继续执行。你可以想到`await`做一些非常相似的事情。等待异步结果，然后该方法的其余部分继续。当然，它不会阻塞，因为它正在等待。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:28:29.607

看起来不错，除了我相信这是语法：

```
await tcpClient.ConnectAsync(Config.Hostname, Config.Port); 
```

因为 await 适用于“任务”返回，所以除非函数有任务结果，否则没有返回。

[这是来自微软](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)的非常清楚的例子

```
private async void button1_Click(object sender, EventArgs e)
{
    // Call the method that runs asynchronously.
    string result = await WaitAsynchronouslyAsync();

    // Call the method that runs synchronously.
    //string result = await WaitSynchronously ();

    // Display the result.
    textBox1.Text += result;
}

// The following method runs asynchronously. The UI thread is not
// blocked during the delay. You can move or resize the Form1 window 
// while Task.Delay is running.
public async Task<string> WaitAsynchronouslyAsync()
{
    await Task.Delay(10000);
    return "Finished";
}

// The following method runs synchronously, despite the use of async.
// You cannot move or resize the Form1 window while Thread.Sleep
// is running because the UI thread is blocked.
public async Task<string> WaitSynchronously()
{
    // Add a using directive for System.Threading.
    Thread.Sleep(10000);
    return "Finished";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:40:27.627

像这样的东西：

*   `tcpClient.ConnectAsync(Config.Hostname, Config.Port)`将异步运行；
*   `await connectionResult`执行后将返回给方法的调用者`ConnectAsync`；
*   然后`await connectionResult`将完成它的异步工作，其余的方法将被执行（如回调）；

此功能的祖先：

[使用 AsyncEnumerator 简化 APM](http://msdn.microsoft.com/en-us/magazine/cc546608.aspx)

[更多 AsyncEnumerator 功能](http://msdn.microsoft.com/en-us/magazine/cc721613.aspx)

# node.js - nodejs - 集群断开/关闭

> ID：14284351
> 
> 赞同：0
> 
> 时间：2013-01-11T18:23:56.707
> 
> 标签：node.js

`cluster`nodejs 中的模块具有`exit`、`disconnect`和`death`事件。工作人员应该调用哪些函数来发出此类事件？

我已经尝试过`cluster.worker.X()`X 在哪里是`close`, `end`, `diconnect`, 等等。如何`end`为`http.createServer()`?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:45:43.840

我不认为应该直接调用这些事件。它们的存在是为了让我们能够对集群生命周期中的事件做出反应。以下是如何间接调用它们：

**出口**

```
// from the worker
process.exit() 
```

**断开**

```
// from the master
var worker = cluster.fork()
worker.disconnect() 
```

**死亡**（已弃用）

[在 v0.8.0 中重命名为“退出”](https://github.com/joyent/node/wiki/API-changes-between-v0.6-and-v0.8)（见上文）。

# mysql - cannot create table with foreign key in mysql

> ID：14284354
> 
> 赞同：0
> 
> 时间：2013-01-11T18:24:02.240
> 
> 标签：mysql, foreign-keys

I know this question is posted a lot, and I've checked my code carefully but couldn't find the reason why when I create the table with Foreign Key, mysql gives me an error.

```
mysql> CREATE TABLE Act_Model(
    -> code VARCHAR(8) NOT NULL,
    -> model VARCHAR(64) NOT NULL,
    -> PRIMARY KEY (code))ENGINE = INNODB;
Query OK, 0 rows affected (0.09 sec)
mysql> CREATE TABLE IBT_ActItem(
    -> model VARCHAR(64) NOT NULL,
    -> flagbit BIGINT(20) UNSIGNED NOT NULL DEFAULT '0',
    -> PRIMARY KEY(model),
    -> FOREIGN KEY( model) REFERENCES Act_Model(model))ENGINE = INNODB;
ERROR 1005 (HY000): Can't create table 'test.ibt_actitem' (errno: 150)
mysql> CREATE TABLE IBT_ActItem(
    -> model VARCHAR(64) NOT NULL,
    -> flagbit BIGINT(20) UNSIGNED NOT NULL DEFAULT '0',
    -> PRIMARY KEY(model))ENGINE = INNODB;
Query OK, 0 rows affected (0.09 sec) 
```

when I used `show engins;`, for InnoDB it gave me:

```
| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        | 
```

Can you help me to find where is my mistake? Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:29:47.627

You need to add a unique index on the model column in the parent table:

```
CREATE TABLE Act_Model(
 code VARCHAR(8) NOT NULL,
 model VARCHAR(64) NOT NULL,
 PRIMARY KEY (code),
 UNIQUE KEY model (model)
 )ENGINE = INNODB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:34:20.127

MySQL requires that you have a UNIQUE KEY or PRIMARY KEY constraint on the column(s) that is the target of the FOREIGN KEY constraint.

To add a unique key, you can use this syntax:

```
ALTER TABLE Act_Model ADD CONSTRAINT Act_Model_UX UNIQUE KEY (model) ; 
```

* * *

You already have the `model` column defined as the PRIMARY KEY in the `IBT_ActItem` table.

If you add a `UNIQUE KEY` constraint and a `FOREIGN KEY` constraint on the `model` column of the other table (`Act_Model`), you are in effect specifying a "one-to-one(optional)" relationship between these two tables.

The UNIQUE (or PRIMARY) KEY goes on the parent table, which is the "one" side of the "one-to-many" relationship. The FOREIGN KEY goes on the child table, which is the "zero, one,or many" side of the relationship.

* * *

(The normative practice is to have a foreign key reference the primary key of the target table. To make the `model` column, rather than the `code` column, the primary key:

```
ALTER TABLE Act_Model DROP PRIMARY KEY ;
ALTER TABLE Act_Model ADD PRIMARY KEY (model) ; 
```

NOTE: There are some significant differences between a UNIQUE KEY and the PRIMARY KEY. For example, there can only be one PRIMARY KEY defined on a table, and the PRIMARY KEY constraint enforces a NOT NULL constraint on the column.)

# android - 纬度和经度值未在 TextView 中显示

> ID：14284355
> 
> 赞同：-2
> 
> 时间：2013-01-11T18:24:03.997
> 
> 标签：android, xml, geolocation

我正在编写一个应用程序，用户可以在其中填写活动表单并将其同步到 Web 服务。应用程序的一部分涉及地理定位，因此，纬度和经度值。我希望我的应用程序自动定位一个人的智能手机的地理位置（它成功地做到了这一点），然后自动填写活动表单上的 TextView。我尝试了一些方法，但无济于事。谁能告诉我我哪里出错了？

这是 DataEntry 类：-

```
package application.prototype.mfb;

import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;
import application.prototype.mfb.MyLocation.LocationResult;

/**
 * Records a new data form entry for a favourite building
 * @author DanielD
 *
 */
public class DataEntry extends Activity implements OnClickListener {

Button btnClear;  
Button btnSync;
EditText txtBuildingName;
EditText txtDescription;
TextView txtLongitude;
TextView txtLatitude;
Spinner project;

public static Location loc;
private static double longitude;
private static double latitude;
private static String name;
private static String description; 
private static String projectString;
private static String lngString = String.valueOf(longitude);
private static String latString = String.valueOf(latitude);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_data_entry);

    LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location location){
            loc = location;
            latitude = loc.getLatitude();
            longitude = loc.getLongitude();
            System.out.println("Latitude: " + latitude);
            System.out.println("Longitude: " + longitude);
        }
    };
        MyLocation myLocation = new MyLocation();
        myLocation.getLocation(DataEntry.this, locationResult);

    txtBuildingName=(EditText)this.findViewById(R.id.nameContent);
    txtDescription=(EditText)this.findViewById(R.id.descriptionContent);

    project=(Spinner)findViewById(R.id.type_project);
    ArrayAdapter<CharSequence> adapterTwo = ArrayAdapter.createFromResource(this, R.array.type_project_array, android.R.layout.simple_spinner_item);
    project.setAdapter(adapterTwo);

    txtLatitude=(TextView)this.findViewById(R.id.TextViewLat);
    txtLongitude=(TextView)this.findViewById(R.id.TextViewLong);

    /*These checks will ensure that if a variable still has user data in it, it will refill the fields with that data preventing users entering
     * the same information multiple times
     */
    if(name != null){
        txtBuildingName.setText(name);
    }

    if(description != null){
        txtDescription.setText(description);
    }

    if(projectString != null){
        project.getItemAtPosition(project.getSelectedItemPosition()).toString();
    }

    if(latString != null){
        txtLatitude.setText(latString);
    }

    if(lngString != null){
        txtLongitude.setText(lngString);
    }

    btnClear=(Button)findViewById(R.id.btnClear);
    btnClear.setOnClickListener(this);

    btnSync=(Button)findViewById(R.id.btnSync);
    btnSync.setOnClickListener(new OnClickListener(){
        public void onClick(View v){                                        //NEW VERSION OF COMMIT DATA - WILL PRESERVE DATA OVER ACTIVITY
            if(txtBuildingName.getText().toString().length() > 0)
                name = txtBuildingName.getText().toString();
            if(txtDescription.getText().toString().length() > 0)
                description = txtDescription.getText().toString();
            if(project.getItemAtPosition(project.getSelectedItemPosition()).toString().length() > 0)
                projectString = project.getItemAtPosition(project.getSelectedItemPosition()).toString();
            Intent intent = new Intent(DataEntry.this, DataSummary.class);
            startActivity(intent);
        }
    });    
}

public static String getName(){
    return name;
}

public static String getDescription(){
    return description;
}

public static String getLongitude(){
    return lngString;
}

public static String getLatitude(){
    return latString;
}

/*public Location getLongitude(){
     LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
     Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
     longitude = location.getLongitude();
     return longitude;
 }

public Location getLatitude(){
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    latitude = location.getLatitude();
    latitudeString = String.valueOf(latitude);
    return latitudeString;

}*/

public static String getProject(){
    return projectString;
}

public void onSaveInstanceState(Bundle outState){
    super.onSaveInstanceState(outState);
}

public void onRestoredInstanceState(Bundle returnState)
{
    super.onRestoreInstanceState(returnState);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_favourite_building, menu);
    return true;
}

public void onClick(View v){
    switch(v.getId())
    {
    case R.id.btnClear : clearFields();
    break;  
    }
}

/**
 * Switch statement governing the different options available on the Action Bar
 */
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()){
    case R.id.app_camera:
        Intent intentZero = new Intent(this, CameraDemo.class);
        intentZero.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intentZero);
        return true;

    case R.id.app_dataentry:  
        Intent intent = new Intent(this, DataEntry.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;

    case R.id.app_syncorsave:
        Intent intentOne = new Intent(this, DataSummary.class);
        intentOne.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intentOne);
        return true;

    case R.id.app_discard:  
        Intent intentTwo = new Intent(this, DeleteProjects.class);
        intentTwo.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intentTwo);
        return true;

    case R.id.app_homescreen:
        Intent intentThree = new Intent(this, ProjectGrid.class);
        intentThree.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intentThree);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}

 public void clearFields(){
        Toast.makeText(DataEntry.this, "All fields Reset", Toast.LENGTH_LONG).show();
        txtBuildingName.getEditableText().clear();
        txtDescription.getEditableText().clear();
        name = "";              //must also set the static variables to blank otherwise previous data still assigned in variable.
        description = "";
        projectString = ""; 
    }
} 
```

这是 MyLocation.java 类：-

```
package application.prototype.mfb;

import java.util.Timer;
import java.util.TimerTask;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class MyLocation {
Timer timer1;
LocationManager lm;
LocationResult locationResult;
boolean gps_enabled=false;
boolean network_enabled=false;

public boolean getLocation(Context context, LocationResult result)
{
    //I use LocationResult callback class to pass location value from MyLocation to user code.
    locationResult=result;
    if(lm==null)
        lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

    //exceptions will be thrown if provider is not permitted.
    try
    {
        gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
    try
    {
        network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }

    //don't start listeners if no provider is enabled
    if(!gps_enabled && !network_enabled)
        return false;

    if(gps_enabled)
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
    if(network_enabled)
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
    timer1=new Timer();
    timer1.schedule(new GetLastLocation(), 20000);
    return true;
}

LocationListener locationListenerGps = new LocationListener() 
{
    public void onLocationChanged(Location location) 
    {
        timer1.cancel();
        locationResult.gotLocation(location);

      //  lm.removeUpdates(this);
        //lm.removeUpdates(locationListenerNetwork);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

LocationListener locationListenerNetwork = new LocationListener()
{
    public void onLocationChanged(Location location) 
    {
        timer1.cancel();
        locationResult.gotLocation(location);
       // lm.removeUpdates(this);
     //   lm.removeUpdates(locationListenerGps);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

class GetLastLocation extends TimerTask 
{
    @Override
    public void run() {
         //lm.removeUpdates(locationListenerGps);
         //lm.removeUpdates(locationListenerNetwork);

         Location net_loc=null, gps_loc=null;
         if(gps_enabled)
             gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
         if(network_enabled)
             net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

         //if there are both values use the latest one
         if(gps_loc!=null && net_loc!=null){
             if(gps_loc.getTime()>net_loc.getTime())
                 locationResult.gotLocation(gps_loc);
             else
                 locationResult.gotLocation(net_loc);
             return;
         }

         if(gps_loc!=null){
             locationResult.gotLocation(gps_loc);
             return;
         }
         if(net_loc!=null){
             locationResult.gotLocation(net_loc);
             return;
         }
         locationResult.gotLocation(null);
    }
}

public static abstract class LocationResult
{
    public abstract void gotLocation(Location location);
}
} 
```

现在我已经添加了`System.out.println`方法来在 logcat 日志中识别是否找到了位置值并且它们已经找到了（见下文）。那么如何获取这些值并将它们转换为合适的格式以在 TextView 中显示？

`01-11 18:04:01.885: I/System.out(541): Latitude: -4.066498333333333`

`01-11 18:04:01.885: I/System.out(541): Longitude: 52.410999999999994`

*从生成的 logcat 文件中提取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:33:57.487

> 那么如何获取这些值并将它们转换为合适的格式以在 TextView 中显示？

显示它们很容易，您已经完成了 98% 的工作，只需添加：

```
LocationResult locationResult = new LocationResult(){
    @Override
    public void gotLocation(Location location){
        loc = location;
        latitude = loc.getLatitude();
        longitude = loc.getLongitude();

        txtLatitude.setText(latitude + "");
        txtLongitude.setText(longitude + "");

        System.out.println("Latitude: " + latitude);
        System.out.println("Longitude: " + longitude);
    }
}; 
```

但是“合适的格式”有点模糊……你想要什么格式？您可以使用[`Location.convert()`](http://developer.android.com/reference/android/location/Location.html#convert%28double,%20int%29)更传统的`hour:minute:second.fraction`格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:42:48.727

```
TextView tvLongitude=(TextView)findViewById(R.id.textViewlongitude);         
TextView tvLatitude=(TextView)findViewById(R.id.textViewlatitude); 
tvLongitude.setText("Longitude is"+longitude );
tvLatitude.setText("Latitude is"+latitude ); 
```

通过这种方式，您可以在 textview 上设置值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:33:00.750

嗯，快速查看您的代码，您正在 System.out 中打印您在 Result 回调中收到的双精度值，但您永远不会填充您试图放在 TextViews 上的两个字符串变量。

您应该在 Location 回调中重新填充您的变量

```
 LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location location){
            loc = location;
            latitude = loc.getLatitude();
            longitude = loc.getLongitude();
            lngString = String.valueOf(longitude);
            latString = String.valueOf(latitude);
            System.out.println("Latitude: " + latitude);
            System.out.println("Longitude: " + longitude);
        }
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T18:51:53.997

在 textview 上进行显示

你的布局`activity_data_entry.xml`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textViewlatitude"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textViewlongitude"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

内部代码：

```
LocationResult locationResult = new LocationResult(){
    @Override
    public void gotLocation(Location location){
        loc = location;
        latitude = loc.getLatitude();
        longitude = loc.getLongitude();

        TextView tvLongitude=(TextView)findViewById(R.id.textViewlongitude);
        TextView tvLatitude=(TextView)findViewById(R.id.textViewlatitude);

        tvLongitude.setText("Longitude is"+longitude );
        tvLatitude.setText("Latitude is"+latitude );
    }
}; 
```

但是你所说的合适的格式是什么意思？

# c# - 如何在windows Phone中刷新列表框

> ID：14284359
> 
> 赞同：2
> 
> 时间：2013-01-11T18:24:30.147
> 
> 标签：c#, list, windows-phone-7, listbox

我有一个`listbox tuningList`包含的元素`List<Tuning> tunings`：

```
 private void LoadList() {
            foreach (Tuning tuning in tunings)
                tuningList.Items.Add(tuning);
        } 
```

在应用程序的某个时刻，我想删除其中的一些元素`tunings`并更新`listbox`

```
 int selectionIndex = tuningList.SelectedIndex;
            if (selectionIndex >= 0) {
                pageTitle.Text = "Deleted tuning";
                tunings.RemoveAt(selectionIndex);
               // tuningList.Items.RemoveAt(selectionIndex);
                saveData(saver); //saves data to isolated storage 

            } 
```

但在那之后列表框不会自行更新。

编辑：我没有通过 XAML 将列表框绑定到集合，我通过 LoadList() 添加了元素；

```
<ListBox x:Name="tuningList" Margin="8,0,8,152" Tap="tuningList_Tap"/> 
```

编辑2：

```
<ListBox x:Name="tuningList" Margin="8,0,8,152" ItemsSource=tunings.Items Tap="tuningList_Tap"/> 
```

编辑3：

```
<ListBox  x:Name="tuningList" Margin="8,0,8,152"  DataContext="{Binding RelativeSource={RelativeSource Self}}" ItemsSource="{Binding tunings}" Tap="tuningList_Tap"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:26:18.830

在这种情况下，我的建议是将您的`ListBox`控件绑定到一个[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604%28VS.95%29.aspx)，当一个项目被添加或删除时，它会自动通知视图，因为它实现了`INotifyCollectionChanged`。

您需要将集合绑定到`ListBox`. 而不是在 XAML中使用`LoadList`设置。`ItemsSource`否则什么都不会发生。

# javascript - 从图像标签中提取 src

> ID：14284360
> 
> 赞同：-2
> 
> 时间：2013-01-11T18:24:31.083
> 
> 标签：javascript, html

嗨，我正在使用 JavaScript。我的代码是：

```
arr = [];
var divData =    document.getElementById("mainDiv").getElementsByTagName("div");
for (var i = 0; i < divData.length; i++) {
if (divData[i].style.border == "2px solid black"){}
 else {
var imageSrc = divData[i].innerHTML;
arr.push(divData[i].innerHTML); 
```

上面的代码用于从 mainDiv 中提取包含图像的 childDiv。

```
for (var i = 1; i < arr.length; i++) {
alert(arr[i]);
} 
```

上面的代码用于打印该图像标签。问题是我只想打印图像的 src 而不是整个标签。这该怎么做？？任何帮助都会很棒。我的 HTML 是：

```
 <div id="mainDiv"class="header" style="width:113%;margin-top:-24px;height:45px;line-height:45px;margin-left:-17px;background-color:#1156AB;color:white;font-weight:bold;font-size:24px;margin-bottom:10px;"><div id="pic" style:"padding:5px"></div></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:27:36.563

试试这个：

```
var imageSrc = divData[i].getElementsByTagName("img")[0].src;
arr.push(imageSrc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:32:36.403

你可以尝试这样的事情：

```
var imgs = doc.getElementsByTagName('img'); 
imgs[0].getAttribute("src"); 
//or
imgs[0].src 
```

# php - 在下拉框中列出子目录

> ID：14284364
> 
> 赞同：1
> 
> 时间：2013-01-11T18:24:37.883
> 
> 标签：php, drop-down-menu, directory, subdirectory

谁能告诉我这段代码有什么问题？它应该显示 中的所有文件夹`../files/`，但是，它返回一个空列表。这是代码：

```
<?php
    $upload_dir  = chdir("./files/" . $userid);
    $dirs = glob($upload_dir, GLOB_ONLYDIR);
    foreach($dirs as $val){
       echo '<option value="'.$val.'">'.$val."</option>\n";
    }       
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:29:08.147

`chdir()`返回`true`或`false`取决于更改目录是否有效。因此，您基本上会尝试查找所有名为`1`或的文件`0`。如果有任何明确定义的行为。

试试这样：

```
<?php
    if (chdir("./files/" . $userid)) {
       $dirs = glob('*', GLOB_ONLYDIR);
       foreach($dirs as $val){
          echo '<option value="'.$val.'">'.$val."</option>\n";
       }        
    } else {
       echo 'Changing directory failed.';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:29:55.647

你已经`$upload_dir`设置了返回 from `chdir`，这将是 TRUE 或 FALSE，然后在设置 $dirs 时尝试将其用作 glob 的参数。

[glob](http://php.net/manual/en/function.glob.php)的第一个参数应该是一个字符串，代表一个模式。在您的情况下，您可能希望 * 列出所有内容（而不是您传入的 TRUE 或 FALSE）。将 glob 的第一个参数想象为您将`dir`在 Windows 或`ls`Linux 中传递给的参数，在这种情况下`/files/userid/*`或类似的情况下。

我会做这样的事情：

```
<?php
    $pattern = "./files/" . $userid . '/*';
    $dirs = glob($pattern, GLOB_ONLYDIR);
    foreach($dirs as $val){
       echo '<option value="'.$val.'">'.$val."</option>\n";
    }       
?> 
```

这具有不更改当前工作目录的优点。理想情况下，我会使用绝对路径而不是那里的相对路径。

# php - 使用 PHP 生成 XML 时的奇怪行为

> ID：14284365
> 
> 赞同：0
> 
> 时间：2013-01-11T18:24:42.010
> 
> 标签：php, mysql, xml

我在 php/mysql 中遇到了一些非常奇怪的行为。我目前有一个包含名称、地址、lat、lng 和类型值的位置数据库。

我正在使用以下代码从数据库生成 xml

```
<?php
require("dbinfo.php");

function parseToXML($htmlStr) 
{ 
    $xmlStr=str_replace('<','&lt;',$htmlStr); 
    $xmlStr=str_replace('>','&gt;',$xmlStr); 
    $xmlStr=str_replace('"','&quot;',$xmlStr); 
    $xmlStr=str_replace("'",'&#39;',$xmlStr); 
    $xmlStr=str_replace("&",'&amp;',$xmlStr); 
    return $xmlStr; 
} 

// Opens a connection to a MySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) 
{
    die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) 
{
    die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM markers WHERE 1";
$result = mysql_query($query);
if (!$result) 
{
    die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result))
{
    if($row['lat'] != 0 && $row['lng'] !=0)
    {
        // ADD TO XML DOCUMENT NODE
        echo '<marker ';
        echo 'name="' . parseToXML($row['name']) . '" ';
        echo 'address="' . parseToXML($row['address']) . '" ';
        echo 'lat="' . $row['lat'] . '" ';
        echo 'lng="' . $row['lng'] . '" ';
        echo 'type="' . $row['type'] . '" ';
        echo '/>';
    }
}
// End XML file
echo '</markers>';

?> 
```

代码似乎有效，但只有在心情好的时候。它偶尔会生成适当的 XML，但通常什么都不做，只返回一个空白页。我从来没有见过这样的行为，有谁知道我做错了什么？如果有任何帮助，我会在 MAMP 上本地运行它。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:32:01.473

@mysql_fetch_assoc($result) 抑制 sql 错误。您可能有一些被忽略的小问题。将其更改为 mysql_fetch_assoc($result) 并查看发生了什么。

# iphone - 使用 NSArray 填充 UIActionSheet 按钮

> ID：14284368
> 
> 赞同：2
> 
> 时间：2013-01-11T18:24:48.743
> 
> 标签：iphone, ios, twitter, uiactionsheet

我正在尝试拉出 UIActionSheet 以显示当前登录到 Twitter 设置的所有帐户。我得到所有与 Twitter 类型匹配的帐户的 NSArray，然后运行以下代码：

```
UIActionSheet *chooseaccount = [[UIActionSheet alloc]initWithTitle:@"Choose Account" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles: nil];
for (int i = 0; i < [arrayOfAccounts count]--; i++) {
    [chooseaccount addButtonWithTitle:[arrayOfAccounts objectAtIndex:i]];
}
[chooseaccount addButtonWithTitle:@"Cancel"];
chooseaccount.cancelButtonIndex = arrayOfAccounts.count;
chooseaccount showInView:self.tabBarController.view]; 
```

但是，我收到错误“不允许分配给 'readonly' 目标 c 消息的返回结果”

让 UIActionSheet 显示 Twitter 帐户的所有用户名有什么建议吗？

更新：
经过几个建议后，我已将代码更改为：

```
-(void)twitteraccess {
    ACAccountStore *account = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:
                                  ACAccountTypeIdentifierTwitter];

    [account requestAccessToAccountsWithType:accountType options:nil
                                  completion:^(BOOL granted, NSError *error)
    {
        if (granted == YES)
        {
            NSLog(@"Granted");

            NSArray *arrayOfAccounts = [account
                                        accountsWithAccountType:accountType];
            if ([arrayOfAccounts count] > 0)
            {
                NSLog(@"%i", [arrayOfAccounts count]);

                if ([arrayOfAccounts count] > 1) {
                    NSLog(@"Greaterthan1");
                    UIActionSheet *chooseaccount = [[UIActionSheet alloc]initWithTitle:@"Choose Account" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles: nil];
                    for (int i = 0; i < [arrayOfAccounts count]; i++) {

                        ACAccount * account = [arrayOfAccounts objectAtIndex:i];
                        [chooseaccount addButtonWithTitle:account.username];
                        NSLog(@"%@", account.username);
                    }

                    [chooseaccount addButtonWithTitle:@"Cancel"];
                    chooseaccount.cancelButtonIndex = arrayOfAccounts.count;

                    [chooseaccount showInView:self.tabBarController.view];
                }
                else {

                }

            }
        }
        else {
            if(error.code == 6){
                [self performSelectorOnMainThread:@selector(alertmessagetwitter)
                                       withObject:nil
                                    waitUntilDone:YES];                }
        }
    }];
} 
```

操作表确实出现了，但大约需要 25 秒才能显示出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:34:06.553

你不能写`[arrayOfAccounts count]--`，这基本上扩展为：

```
[arrayOfAccounts count] = [arrayOfAccounts count] - 1; // assigning to readonly 
```

相反，只需使用`[arrayOfAccounts count] - 1`（或快速枚举）。

```
for (int i = 0; i < [arrayOfAccounts count]-1; i++) { //... 
```

编辑关于`InvalidArgumentException`：

假设`arrayOfAccounts`包含`ACAccount`对象而不是`NSString`：

```
for (int i = 0; i < [arrayOfAccounts count]-1; i++) { //...
    ACAccount * account = [arrayOfAccounts objectAtIndex:i];
    [chooseaccount addButtonWithTitle:[account userName]];
} 
```

# git - 从 git 中删除旧的二进制版本并减少 git 存储库的大小

> ID：14284370
> 
> 赞同：4
> 
> 时间：2013-01-11T18:25:03.443
> 
> 标签：git

所以目前我有一个似乎非常复杂的问题，我需要一些帮助来解决它，而不能将二进制文件移动到 CDN / Dropbox 等。在评估这个问题时，请注意删除图像 / pdf 等并放置不幸的是，它们在保管箱或其他一些外部存储中不是一种选择。

所以当前的问题是我有几百个存储库，每个存储库都有几千个提交，每个存储库通常有 3 个分支。在我的一个测试存储库中，如果我对存储库执行 du -sh，它的大小约为 13gb。其中工作目录的大小约为 800mb。因此，到目前为止，我为减小尺寸所做的尝试如下：

```
git filter-branch --index-filter "git rm -rf --cached --ignore-unmatch path/to/largest/files.pdf" HEAD
rm -rf .git/refs/original/ && git reflog expire --all &&  git gc --aggressive --prune
git gc --prune=now --aggressive
git repack -a -d --depth=250 --window=250 
```

在 du -sh 上的存储库目录上方的所有测试之后，仍然显示它的大小为 13GB。所以我的下一个想法是删除所有二进制文件历史记录（jpg / pdf / png 等），但只保留二进制文件的最新版本。但是我不确定如何做到这一点，我*可以*做一个 for i in `find -name "*.pdf"`; 例如，做 git filter-branch --index-filter "git rm -rf --cached --ignore-unmatch $i" HEAD，但我不确定这是否是最好的处理方式永远完成所有不同的资产类型。

这里的主要目标是通过仅在历史记录中保留二进制文件的 1 个修订版来减小大小，以便包文件的大小更小，也可以删除历史记录中所有以前删除的二进制文件，我对此 100% 满意，但也不确定如何以自动化方式做到这一点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T09:15:44.773

既然你有 3 个分支，为什么不为第一个`git filter-branch`命令指定在所有分支上工作呢？

```
git filter-branch --index-filter \
"git rm -rf --cached --ignore-unmatch path/to/largest/files.pdf" -- --all 
```

然后要删除对我的引用，`refs/original`我会提出以下命令：

```
git for-each-ref --format="%(refname)" refs/original/ | \
xargs -n 1 git update-ref -d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:36:38.003

我已经成功使用了这些命令。

```
git filter-branch \
  --index-filter "git rm --cached --ignore-unmatch '$1'" \
  --prune-empty --tag-name-filter cat -- --all || exit

# Cleanup and reclaming space
rm -r .git/refs/original
git reflog expire --expire=now --all
git gc --prune=now
git gc --aggressive --prune=now 
```

[**参考**](http://raw.github.com/svnpenn/a/master/scripts/git-remove.sh)

# html - 我可以在带有 URL 的网页上自动按下按钮吗？

> ID：14284373
> 
> 赞同：2
> 
> 时间：2013-01-11T18:25:08.500
> 
> 标签：html, forms, url-routing

我希望能够在我的网页上自动单击此表单按钮：

```
<input value="Approve" class="btn" title="Approve" name="apv" type="submit"> 
```

通过在加载之前将 URL 修改为页面。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:38:15.623

我创建了一个 jsbin 供您结帐。如果您访问网址中带有#click_approved 的网址，它将触发点击。我添加了一个 onclick="alert('woohoo!')" 这样你就可以看到它工作了。

[http://jsbin.com/enuhox/1](http://jsbin.com/enuhox/1) <--- 没有触发点击

[http://jsbin.com/enuhox/1#click_approved](http://jsbin.com/enuhox/1#click_approved) <--- 点击触发

进入 jsbin 后，只需单击右上角的“编辑”即可查看代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:29:19.580

由于看不到上下文代码，我不确定您需要“自动单击”按钮的确切原因是什么。但我假设您想通过此表单提交隐藏数据字段以将您重定向到页面或以某种方式提交数据......

一个更简单的方法是使用 onLoad() 函数来调用 javascript 调用来提交你需要完成的任何事情。前任：

```
<body onLoad="my_function();"> 
```

和

```
<script type="text/javascript">
function my_function {
//submit data and redirect
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:33:11.123

如果`<form>` `method`-attribute 是`GET`很容易的。只需使用类似的东西：

```
http://www.yourdomain.com/page?apv=Approve 
```

如果使用的“方法”是别的东西，比如`POST`. 仅提供“特殊” URL 是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-15T23:08:46.047

为此，可以使用表单自动按下

```
<button type="button">ok</button> 
```

# build - 我可以拥有同名的库和二进制文件吗？

> ID：14284375
> 
> 赞同：15
> 
> 时间：2013-01-11T18:25:11.577
> 
> 标签：build, go

我正在构建一个库，但我也希望它可以用作独立的二进制文件。

例如，假设我正在构建 Tar 的实现。Tar 通常用作命令，但也可以用作库。直觉上，我会做这样的事情：

```
src/
    tar/
        tar.go # belongs to package tar
        main.go # imports tar and provides a main function 
```

这似乎不起作用。从[文档](http://golang.org/doc/code.html#tmp_7)看来，“命令”应该有一个与库不同的名称。将那里给出的示例改编为这个示例，我有以下目录结构：

```
src/
    tar/
        tar.go # belongs to package tar
    tarbin/
        main.go # imports tar and provides a main function 
```

但是，这会创建一个名为 的命令`tarbin`，而不是`tar`in `$GOPATH/bin`。我发现的解决方法是做`go build -o $GOPATH/bin/tar tar`，但我觉得我做错了可怕的事情。有没有更好的办法？

**注意：**我很清楚它`tar`包含在标准库中，我只是将其用作示例。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T18:38:08.547

我可能会这样做

```
src/
    tar/
        tar.go         # tar libary
        tar/
            main.go    # tar binary 
```

这将为您提供一个名为的二进制文件`tar`和一个名为的库`tar`

假设您在 github 上托管它，那么您想要

```
src/
    github.com/
        you/
            tar/
                tar.go         # tar libary
                tar/
                    main.go    # tar binary 
```

当你这样做时，它会给你一个名为 tar 的二进制文件，而当你这样做时，它会给你一个名为的`go get install github.com/you/tar/tar`库`github.com/you/tar``go get install github.com/you/tar`

根据您认为哪个更重要，您可以交换库和二进制文件

```
src/
    github.com/
        you/
            tar/
                main.go            # tar binary
                tar/
                    tar.go         # tar libary 
```

将所有代码保存在一棵树中使您能够`go install ./...`从根目录构建所有包和子包，这是一个优势。 `go test|fmt ./...`还。（请注意，这确实是 3 个点！）

# java - JTable：选择行时从数据库中获取值

> ID：14284378
> 
> 赞同：1
> 
> 时间：2013-01-11T18:25:18.260
> 
> 标签：java, database, swing, arraylist, jtable

我有三个文件，TopicData、TopicView、TopicTableModel。我的程序使用数据库中的值显示一个表。现在，当我单击一行时，会打印该行的索引。**我想修改代码，以便打印数据库中的 topicID。**topicID 的值存储在 ArrayList 中但不显示在表格中，所以我不能使用 JTable.getValueAt()。

请告知如何修改我的代码。提前致谢。

更多信息：

1.  TopicData 从数据库中获取数据并将其存储在 ArrayList 中。

2.  然后将 ArrayList 传递给 TopicTableModel，在该模型中数据适合在 JTable 中显示。

3.  TopicView 创建一个 JTable 并接受 TopicTableModel 来生成 JTable。

主题数据.java

```
public class TopicData {
int id;
String name; 
String date; 
String category;
String user;

public TopicData(){
}

public TopicData(int id, String name, String date, String category, String user) {
    this.id = id;
    this.name = name;
    this.date = date;
    this.category = category;
    this.user = user;
}

public TopicData(String name, String date, String category, String user) {
    this.name = name;
    this.date = date;
    this.category = category;
    this.user = user;
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

public String getCategory() {
    return category;
}

public void setCategory(String category) {
    this.category = category;
}

public String getUser() {
    return user;
}

public void setUser(String user) {
    this.user = user;
}

public ArrayList<TopicData> getTopicList(){
    ArrayList<TopicData> topicList = new ArrayList<TopicData>();
    ResultSet rs = null;
    DBController db = new DBController();
    db.setUp("myDatabase");
    String dbQuery = "SELECT topicID, topicName, topicDate, topicCategory, topicUser FROM topicTable ORDER BY topicDate";

    rs = db.readRequest(dbQuery);

    try{
        while(rs.next()){
            int id = rs.getInt("topicID");
            String name = rs.getString("topicName"); 
            String date = rs.getString("topicDate") ; 
            String category = rs.getString("topicCategory");
            String user = rs.getString("topicUser");

            TopicData topic = new TopicData (id, name, date, category, user);
            topicList.add(topic);
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    db.terminate();
    return topicList;
} 
```

TopicTableModel.java

```
public class TopicTableModel extends AbstractTableModel {

private static final long serialVersionUID = 1L;
private int rowCount, colCount;
private String[] columnNames = {"Name", "Date", "User"};
private Object [][] data;

public TopicTableModel(ArrayList<TopicData> listOfObjects) {
    rowCount = listOfObjects.size();
    colCount = columnNames.length;
    data = new Object[rowCount][colCount];

    for (int i = 0; i < rowCount; i++) {
        //Copy an ArrayList element to an instance of MyObject
        TopicData topic = (listOfObjects.get(i)); 
        data[i][0] = topic.getName();            
        data[i][1] = topic.getDate();
        data[i][2] = topic.getUser();
    }              
} 

@Override
public int getColumnCount() {
    // TODO Auto-generated method stub
    return colCount;
}

@Override
public int getRowCount() {
    // TODO Auto-generated method stub
    return rowCount;
}

@Override
public String getColumnName(int col) {
    return columnNames[col];
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    // TODO Auto-generated method stub
    return data[rowIndex][columnIndex];
}

@Override
public boolean isCellEditable(int rowIndex, int colIndex) {
    return false; //Disallow the editing of any cell
}

} 
```

主题视图.java

```
private JTable getTable() {
    if (table == null) {
        TopicData topic= new TopicData();
        TopicTableModel tableModel = new TopicTableModel(topic.getTopicList());
        table = new JTable(tableModel);

        table.setShowGrid(false);
        table.setFillsViewportHeight(true);
        table.setBounds(173, 87, 456, 263);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.getTableHeader().setReorderingAllowed(false);
        table.getTableHeader().setResizingAllowed(false);
        table.getColumnModel().getColumn(0).setPreferredWidth(500);

        ListSelectionModel rowSM = table.getSelectionModel();
        rowSM.addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent e) {
                //Ignore extra messages.
                if (e.getValueIsAdjusting()) return;

                ListSelectionModel lsm = (ListSelectionModel)e.getSource();
                if (lsm.isSelectionEmpty()) {
                    System.out.println("No rows are selected.");
                } 
                else {
                    int selectedRow = lsm.getMinSelectionIndex();
                    System.out.println("Row " + selectedRow + " is now selected.");
                }
            }
        });
    }
    return table;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:47:59.990

你正在艰难地做这件事。无需将 TopicData 转换为数组，只需让您的 TableModel 直接读取 TopicData 对象的 ArrayList，因此每个 TopicData 对应于一行。

主题表模型.java：

```
import java.util.ArrayList;

import javax.swing.table.AbstractTableModel;

public class TopicTableModel extends AbstractTableModel {

private static final long serialVersionUID = 1L;
private String[] columnNames = {"Name", "Date", "User"};
private ArrayList<TopicData> data;

public TopicTableModel(ArrayList<TopicData> listOfObjects) {
    data = listOfObjects;
} 

@Override
public int getColumnCount() {
    return columnNames.length;
}

@Override
public int getRowCount() {
    return data.size();
}

@Override
public String getColumnName(int col) {
    return columnNames[col];
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    switch (column) {
    case 0:
        return data.getName();
    case 1:
        return data.getDate();
    case 2:
        return data.getUser();
    default:
        throw new ArrayIndexOutOfBoundsException();
    }
}

@Override
public boolean isCellEditable(int rowIndex, int colIndex) {
    return false; //Disallow the editing of any cell
}

public TopicData getTopic(int row) {
    return data.get(row);
}

} 
```

通过对 TopicView.java 进行一些小的修改，您现在可以获得所选行的 TopicData 并打印其 ID。

主题视图.java：

```
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class TopicView {
    JTable table;

    private JTable getTable() {
        if (table == null) {
            TopicData topic= new TopicData();
            final TopicTableModel tableModel = new TopicTableModel(topic.getTopicList());
            table = new JTable(tableModel);

            table.setShowGrid(false);
            table.setFillsViewportHeight(true);
            table.setBounds(173, 87, 456, 263);
            table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            table.getTableHeader().setReorderingAllowed(false);
            table.getTableHeader().setResizingAllowed(false);
            table.getColumnModel().getColumn(0).setPreferredWidth(500);
            table.setDefaultRenderer(TopicData.class, new TopicDataTableCellRenderer());

            ListSelectionModel rowSM = table.getSelectionModel();
            rowSM.addListSelectionListener(new ListSelectionListener() {
                public void valueChanged(ListSelectionEvent e) {
                    //Ignore extra messages.
                    if (e.getValueIsAdjusting()) return;

                    int row = table.getSelectedRow();
                    if (row < 0) {
                        System.out.println("No rows are selected.");
                    }
                    else {
                        System.out.println("id " + tableModel.getTopic(row).getId() + " is now selected.");
                    }
                }
            });
        }
        return table;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T18:37:22.623

实际上，您的一切都在您的眼皮底下。

您需要做的就是更改您的`TableModel`，以便它保留`ArrayList`而不是将该列表转换为`Object[][]`.

像这样的东西（可能有一些错字问题）：

```
public class TopicTableModel extends AbstractTableModel {

private static final long serialVersionUID = 1L;
private int rowCount, colCount;
private String[] columnNames = {"ID", "Name", "Date", "User"};
private List<TopicData> listOfObjects;
public TopicTableModel(ArrayList<TopicData> listOfObjects) {
    this.listOfObjects = listOfObjects;
} 

@Override
public int getColumnCount() {
    return columnNames.length;
}

@Override
public int getRowCount() {
    return listOfObjects.size();
}

@Override
public String getColumnName(int col) {
    return columnNames[col];
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    TopicData data = listOfObjects.get(rowIndex);
    switch(columnIndex) {
        case 0:
            return data.getId();
        case 1:
            return data.getName();
        case 2:
            return data.getDate();
        case 3:
            return data.getUser();
    }
    return null;
}

@Override
public boolean isCellEditable(int rowIndex, int colIndex) {
    return false; //Disallow the editing of any cell
}

} 
```

*副作用：`TopicData` `Serializable`如果您使用 Java 序列化（或其他利用`Serializable`.*

# java - 是否有像 FRAPI (PHP) 这样的 REST Web 服务 API 提供程序，但适用于 Java？

> ID：14284382
> 
> 赞同：0
> 
> 时间：2013-01-11T18:25:30.653
> 
> 标签：java, rest, wso2esb, frapi

我最近发现了 PHP 的[FRAPI](http://getfrapi.com/)。它是一个 REST Web 服务高级 API 提供程序，可让您轻松构建 REST API Web 服务，它具有三个强大的功能：

*   它会自动生成 XML 和 JSON 响应。
*   它很容易生成 API 文档。
*   它可以自动生成 API Keys 以提供私有 Web 服务。

为了构建 Web 服务，您只需要使用基于 Web 的 GUI 指定端点，然后专注于编写业务逻辑而不处理 HTTP 复杂性。

你知道是否存在一个轻量级的开源替代方案，它提供一个或多个这样的特性，比如 FRAPI，但适用于 Java？

我发现[WSO2 Api Manager](http://wso2.com/products/api-manager/)可以让您以类似方式执行此操作，并且它与语言无关，因为它就像一个企业服务总线，它很棒，但我正在寻找更轻量级和简单的东西。

任何信息将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:48:05.780

您可以使用 Spring MVC 轻松构建您的 Rest Web 服务。Spring ROO 可以帮助您建立一个骨架项目，您可以从中学习如何为您的项目设置它。

这是一个演示，向您展示如何使用 Spring ROO 构建 RESTful Web 服务：[http ://www.youtube.com/watch?v=TNE7NBLseRA](http://www.youtube.com/watch?v=TNE7NBLseRA)

我不知道是否有任何 ROO 插件可以为您的 Web 服务生成 API 密钥，但您可以使用 Spring Security 来保护您的 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:55:48.180

看看 Apache-CXF。设置起来相当容易，您可以启动示例应用程序。它与 JAX-RS 一起使用，通过提供程序，您可以进行 JSON/XML 甚至 AMF 通信，而无需更改您的服务代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:50:35.130

JAX-RS（其中 Jersey 是一种实现）做了很多工作。我不能说 API 密钥，不知道那是什么。但它很容易完成其余的工作。

# ios - 在 Objective-C 中解析时如何忽略 JSON 文件的一部分

> ID：14284383
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:25:32.223
> 
> 标签：ios, objective-c, json

这是我正在查看的 JSON 文件的示例：[http ://api.pathofexile.com/ladders/Default?offset=0&limit=100](http://api.pathofexile.com/ladders/Default?offset=0&limit=100)

我的目标是基本上忽略文件的开头并开始从条目中读取。

我愿意接受一些建议的数组。

我已经尝试过 NSJSONReadingAllowFragments 但它似乎没有帮助。

非常感谢任何帮助。

谢谢

* * *

编辑

希望在这里澄清，因为我认为根据反馈措辞不佳。

我已经能够使用内置的 NSJSON 库将各种文件从 JSON 解析为 Objective-C。但是我在使用这个特定的 JSON API 时遇到了问题。我假设这是因为一开始的“总”价值。本质上，我只是在方括号内的“条目”后面的信息之后。我特别关注角色名称、等级和经验值以及等级值。

我之前一直在将每个条目解析成一个数组，数组的每个槽都包含一个值字典。在这种情况下，一切似乎都被放入了第一个数组插槽。

我希望这有助于澄清我将提供您认为有帮助的任何信息或我的代码副本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:38:06.167

假设您已`NSDictionary * myFullJSONDict`包含完整的 json 数据。您可以通过以下方式获取条目：

```
NSArray * entries = [myFullJSONDict objectForKey:@"entries"]; 
```

# javascript - javascript 更多链接问题

> ID：14284386
> 
> 赞同：-3
> 
> 时间：2013-01-11T18:25:45.923
> 
> 标签：javascript, jquery

我有一个 javascript 问题（错误似乎非常小，但是我为这个小问题撞墙了..

在这个网站：[http](http://tangerine-ny.com/) ://tangerine-ny.com/ ，点击“团队”-->你会看到所有人的照片，如果你点击“更多”，你可以在上面看到他们的个人资料，所有照片“更多'工作除了'Liz Loder' 更多链接..

请检查代码，这里：http: [//jsfiddle.net/nWuNK/](http://jsfiddle.net/nWuNK/)（无需运行，但只需检查其中的代码）

请有人对此进行调查并为我提供该问题的解决方案！

**HTML 代码：**

```
<html>
<head>

</head>

<body>
    <div id="wrapper">
        <div id="stick">
            <div id="header">
                <a href="http://blog.tangerine-ny.com/" id="nav-blog">Blog</a>
                <a class="nav-seperator" id="nav-s"></a>
                <a href="http://www.youtube.com/user/tangerineny" id="nav-youtube">YouTube Channel</a>
                <ul id="nav">
                    <li><a href="#team" id="nav-team">Team</a></li> <li class="nav-seperator"></li>
                    <li><a href="#clients" id="nav-client">Clients</a></li> <li class="nav-seperator"></li>
                    <li><a href="#partners" id="nav-partners">Partners</a></li> <li class="nav-seperator"></li>
                    <li><a href="#contact" id="nav-contact">Contact</a></li>
                </ul>
            </div><!-- Header -->
        </div>

        <div id="content">
            <div id="colored-lines"></div>
            <h1><a href="#" id="logo" title="Tangerine NY">Tangerine NY</a></h1>

            <div id="home">
                <span id="home1">We </span> <a href="#partners"id="home-partners">partner</a>
                <span id="home5"> with </span> <a href="#clients" name="partners" id="home-clients">clients</a> 
                <span id="home6"> to place talent in planning, account</span>

                <div id="partners" style="display:none;">
                    <a href="#" id="partners-close">Close</a>
                    <span id="partners-left">We don't believe in a transactional placement business.  We believe in partnering with                         talent and clients alike to solve problems and address opportunities.  Our team brings deep and recent agency                       management experience, years of recruiting for the best creative agencies and a finger on the pulse of emerging talent.  
                    </span>
                    <span>We work as a team so each  of us benefits from the energy, connection and smarts of all of us.  Above all else, we value an honest dialogue with clients and talent alike and know that transparent dealing is the foundation of our many deep and                    long standing relationships.
                    </span>

                    <div class="clear"></div>
                </div><!-- Partners -->

                <span id="home2">management, media/comms planning, creative technology, innovation and      leadership positions. Our core business is in</span>
                <span id="home-ie"> the agency world, however our </span>
                <a href="#team"  name="teams" id="home-team">team</a>
                <span id="home7"> also connects people<br /></span>

                <div id="team" style="display:none;">
                    <a href="#" name="team" id="team-close">Close</a>

                    <div id="sally" class="bio" style="display:none;">
                        <div class="bio-name">Sally Jones</div>
                        <a href="http://www.facebook.com/profile.php?id=902885592" class="facebook">Sally Jones Facebook</a>
                        <a href="http://twitter.com/sallyvjones" class="twitter">Sally Jones Twitter</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:sally@tangerine-ny.com">sally@tangerine-ny.com</a>
                        <img src="images/b1.jpg" alt="Sally Jones" />
                        <p>Sally started her advertising career at Ogilvy London and went on to spend 10 years in account management before moving to New York and joining Kendall Tarrant in 1999\. Whilst at KT NY Sally worked in the account management, creative and planning departments. In 2001 Sally founded Tangerine and since its launch Tangerine has worked on searches in the US, Australia, Europe and Asia.<br/><br><a href="http://blog.tangerine-ny.com/?p=1067" target="_blank"><i>10 Questions for Sally Jones</i></a>
<br />
                        <div class="clear"></div>
                    </div>

                    <div id="kim" class="bio" style="display:none;">
                        <div class="bio-name">Kimberly Aguilera</div>
                        <a href="http://www.linkedin.com/in/kaguilera" class="linkedin">Kimberly Aguilera LinkedIn</a>
                        <a href="http://twitter.com/kaguilera" class="twitter">Kimberly Aguilera Twitter</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:kimberly@tangerine-ny.com">kimberly@tangerine-ny.com</a>
                        <img src="images/b2.jpg" alt="Kimberly Aguilera" />
                        <p>Kimberly is recruiting in strategy, digital strategy, social and community at Tangerine. She is passionate about helping people make their next best career move by understanding their core skills, culture needs and what really makes them tick. Prior to joining Tangerine in NY in 2006, Kimberly graduated with a BS in marketing from San Diego State University and worked as a brand manager in San Diego.<br/><br><a href="http://blog.tangerine-ny.com/?p=1065" target="_blank"><i>10 Questions for Kimberly Aguilera</i></a>
<br />
                        <div class="clear"></div>
                    </div>

                    <div id="lukas" class="bio" style="display:none;">
                        <div class="bio-name">Doug Sherrard</div>
                        <a href="http://www.linkedin.com/in/dsherrard" class="linkedin">Doug Sherrard LinkedIn</a>
                        <a href="https://www.facebook.com/dougsherrard" class="facebook">Doug Sherrard Facebook</a>
                        <a href="https://twitter.com/#!/dougsherrard" class="twitter">Doug Sherrard Twitter</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:doug@tangerine-ny.com">doug@tangerine-ny.com</a>
                        <img src="images/b3.jpg" alt="Doug" />
                        <p>Doug heads up Tangerine's creative and digital disciplines. He has a passion for technology, marketing, innovation and design. He strives to build long term value-add relationships with elite talent and progressive clients that lead these industries globally. Doug grew up in Zululand, South Africa, and completed his Bachelor of Commerce in Marketing and International Business in Sydney, Australia. He has worked in the UK, Thailand, Malaysia, Philippines, Indonesia and Australia.<br/><br><a href="http://blog.tangerine-ny.com/?p=1064" target="_blank"><i>10 Questions for Doug Sherrard</i></a>
<br />
                        <div class="clear"></div>
                    </div>

                    <div id="alison" class="bio" style="display:none;">
                        <div class="bio-name">Alison Lord</div>
                        <a href="http://www.linkedin.com/pub/alison-lord/0/39/457" class="linkedin">Alison Lord LinkedIn</a>
                        <a href="https://www.facebook.com/profile.php?id=678487625" class="facebook">Alison Lord Facebook</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:alison@tangerine-ny.com">alison@tangerine-ny.com</a>
                        <img src="images/b4.jpg" alt="Alison Lord" />
                        <p>Alison joined tangerine in January of 2010 and has worked on management level searches for clients in advertising, design, media owners and on the brand side to recruit creatively oriented strategic leadership talent. She spent 18 years in the agency business and worked in account management across a variety of clients at JWT and APL then spent 10 years at Lowe in classical HR, talent management and operations including finance and real estate. Having helped agency c-level management answer the questions that perhaps most challenged the conventions of the industry over the past decade, Alison brings a unique perspective to search.<br/><br><a href="http://blog.tangerine-ny.com/?p=1063" target="_blank"><i>10 Questions for Alison Lord</i></a>
<br />              <div class="clear"></div>
                    </div>

                    <div id="torrey" class="bio" style="display:none;">
                        <div class="bio-name">Torrey La Grange</div>
                        <a href="http://www.linkedin.com/pub/alison-lord/0/39/457" class="linkedin">Torrey La Grange LinkedIn</a>
                        <a href="https://www.facebook.com/profile.php?id=678487625" class="facebook">Torrey La Grange Facebook</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:torrey@tangerine-ny.com">torrey@tangerine-ny.com</a>
                        <img src="images/b5.jpg" alt="Torrey La Grange" />
                        <p>Prior to joining Tangerine in 2010, Torrey built her career in account management at shops including TBWA\Chiat\Day, Secret Weapon in Los Angeles, Saatchi & Saatchi London and JWT New York. Torrey's extensive experience in the agency world, in shops both big and small, helps her bring a informed viewpoint to searches and allows her to better understand the needs of agencies in hiring talent.<br/><br><a href="http://blog.tangerine-ny.com/?p=1069" target="_blank"><i>10 Questions for Torrey La Grange</i></a>
                        <div class="clear"></div>
                    </div>

                    <div id="liz" class="bio" style="display:none;">
                        <div class="bio-name">Liz Loder</div>
                        <a href="http://www.linkedin.com/in/lizloder" class="linkedin">Liz Loder LinkedIn</a>
                        <a href="http://www.twitter.com/lizloder" class="twitter">Liz Loder Twitter</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:lloder@tangerine-ny.com">lloder@tangerine-ny.com</a>
                        <img src="images/b6.jpg" alt="Liz Loder" />
                        <p>Liz graduated from UVA in 2009 with a BA in economics and classics. She enjoyed a summer internship with Tangerine in 2008 and became a permanent part of the team in 2010, as project manager and research lead.<br/><br><a href="http://blog.tangerine-ny.com/?p=1066" target="_blank"><i>10 Questions for Liz Loder</i></a>
                        <div class="clear"></div>
                    </div>

                    <div id="sandy" class="bio" style="display:none;">
                        <div class="bio-name">Sandy Williams</div>
                        <a href="http://www.linkedin.com/pub/sandra-williams/4b/aa3/a5b" class="linkedin">Sandy Williams LinkedIn</a>
                        <a href="https://twitter.com/sswill251" class="twitter">Sandy Williams Twitter</a>
                        <div class="clear"></div>
                        <a class="team-mail" href="mailto:sandra@tangerine-ny.com">sandra@tangerine-ny.com</a>
                        <img src="images/b7.jpg" alt="Sandy Williams" />
                        <p>Sandy joined Tangerine in 2012 at their group assistant. She graduated from Boston College in 2010 with a BA in Islamic Civilizations and from NYU in 2012 with an MA in Art History.<br/><br><a href="http://blog.tangerine-ny.com/?p=1086" target="_blank"><i>10 Questions for Sandy Williams</i></a>
                        <div class="clear"></div>
                    </div>

                    <div id="team-list">
                        <div class="person">
                            <a href="#" id="sally-i"><img src="images/t1.jpg" alt="Sally Jones" /></a>
                            <div class="short-bio">
                                <span class="team-name">Sally Jones</span>
                                <a href="mailto:sally@tangerine-ny.com">sally@tangerine-ny.com</a><br />
                                <a href="#teams" id="more-sally" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="person">
                            <a href="#" id="kim-i"><img src="images/t2.jpg" alt="Kimberly Aguilera" /></a>
                            <div class="short-bio">
                                <span class="team-name">Kimberly Aguilera</span>
                                <a class="team-mail" href="mailto:kimberly@tangerine-ny.com">kimberly@tangerine-ny.com</a>
                                <a href="#" id="more-kim" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="person" style="margin-right:0px">
                            <a href="#" id="lukas-i"><img src="images/t3.jpg" alt="Doug Sherrard" /></a>
                            <div class="short-bio">
                                <span class="team-name">Doug Sherrard</span>
                                <a class="team-mail" href="mailto:doug@tangerine-ny.com">doug@tangerine-ny.com</a>
                                <a href="#" id="more-lukas" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="person">
                            <a href="#" id="alison-i"><img src="images/t4.jpg" alt="Alison Lord" /></a>
                            <div class="short-bio">
                                <span class="team-name">Alison Lord</span>
                                <a class="team-mail" href="mailto:alison@tangerine-ny.com">alison@tangerine-ny.com</a>
                                <a href="#" id="more-alison" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="person">
                            <a href="#" id="torrey-i"><img src="images/t5.jpg" alt="Torrey La Grange" /></a>
                            <div class="short-bio">
                                <span class="team-name">Torrey La Grange</span>
                                <a class="team-mail" href="mailto:torrey@tangerine-ny.com">torrey@tangerine-ny.com</a>
                                <a href="#" id="more-torrey" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="person" style="margin-right:0px">
                            <a href="#" id="liz-i"><img src="images/t6.jpg" alt="Liz Loder" /></a>
                            <div class="short-bio">
                                <span class="team-name">Liz Loder</span>
                                <a class="team-mail" href="mailto:lloder@tangerine-ny.com">lloder@tangerine-ny.com</a>
                                <a href="#" id="more-liz" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="person" style="margin-right:0px">
                            <a href="#" id="sandy-i"><img src="images/t7.jpg" alt="Sandy Williams" /></a>
                            <div class="short-bio">
                                <span class="team-name">Sandy Williams</span>
                                <a class="team-mail" href="mailto:sandra@tangerine-ny.com">sandra@tangerine-ny.com</a>
                                <a href="#" id="more-sandy" class="team-more">More</a>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div><!-- Team-List -->
                </div><!-- Team -->

                <span id="home3">to client side opportunities where creatively focused strategic</span><span id="home-ie2"> business talent has a transformative impact.  Please </span><a href="#contact" id="home-contact">contact</a>

                <div id="contact" style="display:none;">
                    <a href="#" name="contact" id="contact-close">Close</a>
                    <div id="contact-left">
                        <h2>TALENT</h2>
                        <form class="iphorm" action="contact-form/process.php" method="post" enctype="multipart/form-data">
                            <div class="iphorm-wrapper">
                                <div class="iphorm-inner">
                                    <div class="iphorm-message"><p>Please fill out the information below and upload your CV/resume. We'll be in touch as soon as possible.</p></div>
                                    <div class="iphorm-container">
                                        <input type="text" value="Name" name="name" id="contact-name" onfocus="if(this.value=='Name'){this.value=''}" onblur="if(this.value==''){this.value='Name'}" />
                                        <input type="text" value="Email" name="email" id="contact-mail" onfocus="if(this.value=='Email'){this.value=''}" onblur="if(this.value==''){this.value='Email'}" />
                                        <div class="clear"></div>
                                        <span>Concentration:</span>
                                        <input id="box1" class="CheckBoxClass" name="concentration[]" value="Planning" type="checkbox" />
                                        <label for="box1" class="CheckBoxLabelClass">Planning</label>
                                        <input id="box2" class="CheckBoxClass" name="concentration[]" value="Account Management" type="checkbox" />
                                        <label for="box2" class="CheckBoxLabelClass" >Account Management</label>  
                                        <input id="box3" class="CheckBoxClass" name="concentration[]" value="Media/Comms Planning" type="checkbox" />
                                        <label for="box3" class="CheckBoxLabelClass">Media/Comms Planning</label>
                                        <input id="box4" class="CheckBoxClass" name="concentration[]" value="Creative" type="checkbox" />
                                        <label for="box4" class="CheckBoxLabelClass">Creative</label>
                                        <input id="box5" class="CheckBoxClass" name="concentration[]" value="Innovation" type="checkbox" />
                                        <label for="box5" class="CheckBoxLabelClass">Innovation</label>
                                        <input id="box6" class="CheckBoxClass" name="concentration[]" value="Other" type="checkbox" />
                                        <label for="box6" class="CheckBoxLabelClass">Other</label>
                                        <div class="clear"></div>
                                        <input class="file_1"  type="file" name="upload" />
                                        <div class="clear"></div>
                                        <div style="display:none;" class="element-wrapper captcha-element-wrapper clearfix"><label for="type_the_word">Type the word</label><input id="type_the_word" class="captcha-element" type="text" name="type_the_word" /></div>
                                        <input type="submit" id="contact-submit" name="contact" value="Submit" />
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div><!-- Contact Left -->
                    <div id="contact-right">
                        <h2>CLIENTS</h2>
                        <p>Please contact us at <a href="mailto:hello@tangerine-ny.com">hello@tangerine-ny.com</a>. One of our team will be in touch to talk about how we can help.</p>
                    </div>
                    <div class="clear"></div>
                </div><!-- Contact -->
                <script type="text/javascript" src="js/file.js"></script>

                <span id="home4">us if you would like to learn more.</span>
                <div class="clear"></div>
            </div><!-- Home -->

            <div class="clear"></div>
        </div><!-- Content -->
    </div><!-- Wrapper -->
    <div id="footer"></div><!-- Footer -->

    <script type="text/javascript">
        var gaq = _gaq || []; _gaq.push(['setAccount', 'UA-21327235-1']); gaq.push(['trackPageview']);
        (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();
    </script>

</body>
</html> 
```

**Javascript代码：**

```
$(document).ready(function(){

        $(".CheckBoxClass").change(function(){if($(this).is(":checked")){$(this).next("label").addClass("LabelSelected")}else{$(this).next("label").removeClass("LabelSelected")}});

        $("#logo").click(function () {
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients').show().css("opacity","1").css("zoom","0");
            $('#team, #partners, #contact, #clients').slideUp("fast");
        });

        var anchor = jQuery.url.attr('anchor');

        if (anchor == 'clients') {
            $('html,body').animate({scrollTop: 200}, 1000);
            $('#team, #partners, #contact').hide();
            $("#clients").slideDown("slow");
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-ie, #home-ie2').fadeTo("slow", 0.15);
            $('#home-clients').css("opacity","1");
            $('#home-partners, #home-team, #home-contact').css("text-decoration","underline");
        }
        if (anchor == 'contact') {
            $('html,body').animate({scrollTop: 650}, 1000);
            $('#partners, #clients, #team').hide();
            $("#contact").slideDown("slow");
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-team, #home-clients, #home-partners, #home-ie, #home-ie2, #home-ie, #home-ie2').fadeTo("slow", 0.15);
            $('#home-contact').css("opacity","1");
            $('#home-team, #home-clients, #home-partners').css("text-decoration","underline");
        }
        if (anchor == 'team') {
            $('html,body').animate({scrollTop: 350}, 1000);
            $("#team").slideDown("slow");
            $('#partners, #clients, #contact').hide();
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-clients, #home-partners, #home-contact, #home-ie, #home-ie2, #home-ie, #home-ie2').fadeTo("slow", 0.15);
            $('#home-team').css("opacity","1");
            $('#home-clients, #home-partners, #home-contact').css("text-decoration","underline");
        }
        if (anchor == 'partners') {
            $('html,body').animate({scrollTop: 50}, 1000);
            $("#partners").slideDown("slow");
            $('#team, #clients, #contact').hide();
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-clients, #home-team, #home-contact, #home-ie, #home-ie2, #home-ie, #home-ie2').fadeTo("slow", 0.15);
            $('#home-partners').css("opacity","1");
            $('#home-clients, #home-team, #home-contact').css("text-decoration","underline");
        }

        $("#home-clients, #nav-client").click(function () {
            if ($("#clients").is(":hidden")) {
                $('html,body').animate({scrollTop: 200}, 1000);
                $('#team, #partners, #contact').hide();
                $("#clients").slideDown("slow");
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-ie, #home-ie2').fadeTo("slow", 0.15);
                $('#home-clients').css("text-decoration","none");
                $('#home-clients').css("opacity","1");
            } else {
                $('html,body').animate({scrollTop: 0}, 1000);
                $("#clients").slideUp(500);
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
            }
        });

        $("#home-contact, #nav-contact").click(function () {
            if ($("#contact").is(":hidden")) {
                $('html,body').animate({scrollTop: 650}, 1000);
                $('#partners, #clients, #team').hide();
                $("#contact").slideDown("slow");
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-team, #home-clients, #home-partners, #home-ie, #home-ie2, #home-ie, #home-ie2').fadeTo("slow", 0.15);
                $('#home-contact').css("text-decoration","none");
                $('#home-contact').css("opacity","1");
            } else {
                $('html,body').animate({scrollTop: 0}, 1000);
                $('#partners, #clients, #team').hide();
                $("#contact").slideUp("slow");
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
            }
        });

        $("#home-team, #nav-team").click(function () {
            if ($("#team").is(":hidden")) {
                $('html,body').animate({scrollTop: 350}, 1000);
                $("#team").slideDown("slow");
                $('#partners, #clients, #contact').hide();
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-clients, #home-partners, #home-contact, #home-ie, #home-ie2').fadeTo("slow", 0.15);
                $('#home-team').css("opacity","1");
            } else {
                $('html,body').animate({scrollTop: 0}, 1000);
                $("#team").slideUp("slow");
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
                $('#sally, #kim, #lukas, #alison, #torrey, #liz').hide();
            }
        });

        $("#home-partners, #nav-partners").click(function () {
            if ($("#partners").is(":hidden")) {
                $('html,body').animate({scrollTop: 50}, 1000);
                $("#partners").slideDown("slow");
                $('#team, #clients, #contact').hide();
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-clients, #home-team, #home-contact, #home-ie, #home-ie2').fadeTo("slow", 0.15);
                $('#home-partners').css("text-decoration","none");
                $('#home-partners').css("opacity","1");
                $('#home-clients, #home-team, #home-contact').css("text-decoration","underline");
            } else {
                $('html,body').animate({scrollTop: 0}, 1000);
                $("#partners").slideUp("slow");
                $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
            }
        });

        $("#clients").hover(
          function () {
            $("#clients-close").show();
          },
          function () {
             $("#clients-close").hide();
          }
        );

        $("#partners-close").click(function () {
            $('#partners').slideUp("slow");
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
            $('#home-team, #home-clients, #home-partners, #home-contact').css("text-decoration","underline");
        });
        $("#team-close").click(function () {
            $('#team').slideUp("slow");
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
            $('#sally, #kim, #lukas, #alison, #torrey, #liz').hide();
        });
        $("#contact-close").click(function () {
            $('#contact').slideUp("slow");
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
        });

        $("#clients-close").click(function () {
            $('#clients').slideUp("slow");
            $('#home1, #home2, #home3, #home4, #home5, #home6, #home7, #home-partners, #home-team, #home-contact, #home-clients, #home-ie, #home-ie2').fadeTo("slow", 1);
        });

        $("#more-sally, #sally-i").click(function () {
            if ($("#kim, #lukas, #alison, #torrey, #liz").is(":visible")) {
                $('#sally').fadeIn("slow");
                $('#kim, #lukas, #alison, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 300);
            } else {
                $('#kim, #lukas, #alison, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
                $('#sally').slideDown("slow");
            }
        });

        $("#more-kim, #kim-i").click(function () {
            if ($("#sally, #lukas, #alison, #torrey, #liz").is(":visible")) {
                $('#kim').fadeTo("slow", 1);
                $('#sally, #lukas, #alison, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
            } else {
                $('#sally, #lukas, #alison, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
                $('#kim').slideDown("slow");
            }
        });

        $("#more-lukas, #lukas-i").click(function () {
            if ($("#sally, #kim, #alison, #torrey, #liz").is(":visible")) {
                $('#lukas').fadeTo("slow", 1);
                $('#sally, #kim, #alison, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
            } else {
                $('#sally, #kim, #alison, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
                $('#lukas').slideDown("slow");
            }
        });

        $("#more-alison, #alison-i").click(function () {
            if ($("#sally, #kim, #lukas, #torrey, #liz").is(":visible")) {
                $('#alison').fadeTo("slow", 1);
                $('#sally, #kim, #lukas, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
            } else {
                $('#sally, #kim, #lukas, #torrey, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
                $('#alison').slideDown("slow");
            }
        });

        $("#more-torrey, #torrey-i").click(function () {
            if ($("#sally, #kim, #lukas, #alison, #liz").is(":visible")) {
                $('#torrey').fadeTo("slow", 1);
                $('#sally, #kim, #lukas, #alison, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
            } else {
                $('#sally, #kim, #lukas, #alison, #liz').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
                $('#torrey').slideDown("slow");
            }
        });

        $("#more-liz, #liz-i").click(function () {
            if ($("#sally, #kim, #lukas, #alison, #torrey").is(":visible")) {
                $('#liz').fadeTo("slow", 1);
                $('#sally, #kim, #lukas, #alison, #torrey').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
            } else {
                $('#sally, #kim, #lukas, #alison, #torrey').hide();
                $('html,body').animate({scrollTop: 350}, 1000);
                $('#liz').slideDown("slow");
            }
        });

        $(function() {
          $("input.file_1").filestyle({ 
              image: "images/contact-browse.png",
              imageheight : 28,
              imagewidth : 68,
              width : 100
          });
        });

    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:51:02.590

没有附加点击事件侦听器`#more-liz`。

我看到你有这个：

```
$("#more-liz, #liz-i").click(function () {
    // ...
}); 
```

但是，这不是附加的。您确定 tangerine.js 与您在此处发布的源代码匹配吗？尝试使用实际的源代码而不是您的缩小文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:59:24.313

是的，这里发生了一些可疑的事情。在发布的代码中，您显示了 6 个用于弹出功能的单击附件，但有 7 个位置可供单击。名字应该是什么导致我不确定（我不认识这些人），但它按预期工作——你点击的 6 件事会让东西弹出。

恭喜。没有错误。

# php - php查询1个表中的2个字段

> ID：14284387
> 
> 赞同：0
> 
> 时间：2013-01-11T18:25:50.110
> 
> 标签：php, mysql, joomla

我有一个包含字段 A、B、C、D、E 的数据库表（furcodes），我使用此代码在 Joomla 站点中创建兑换代码系统：

```
 <?php
$redeem_code = JRequest::getString('redeem_code', '', 'post');
$db =& JFactory::getDBO();
$query = "
    SELECT COUNT(`B`)
        FROM `furcodes`
        WHERE `B` = '$redeem_code' ;
";
$db->setQuery($query);
$count = $db->loadResult();
if ( $count ) {

  $mainframe =& JFactory::getApplication();
  $mainframe->enqueuemessage('You have succesfully redeemed this fur code');
  return false;
} else {
    $mainframe =& JFactory::getApplication();
  $mainframe->enqueueMessage(JText::_('Invalid code. Please check and try again.'), 'error');
  return false;
}
?> 
```

我使用计数来检查数据库中是否存在此代码，但我还需要从“E”列中获取字段，该字段说明此代码之前是否已使用（值 0=未使用或 1=已使用，一次使用对于每个代码）并创建一个这样的 if：

```
 if $used == 1
 echo "This code has been used" 
```

有什么帮助吗？

* * *

我使用的最终代码，它可能对其他人有帮助。

```
<?php
$your_fur_code = JRequest::getString('fur_code', '', 'post');
$db =& JFactory::getDBO();
$query = "SELECT `E` FROM `furcodes` WHERE `B` = '$your_fur_code'";
$db->setQuery($query);
$code_used = $db->loadResult();
if ( $code_used == "1" ) {
  $mainframe =& JFactory::getApplication();
  $mainframe->enqueueMessage(JText::_('The code has already been used.'), 'error');
  return false;
} if ( $code_used == "0" ) {
  $mainframe =& JFactory::getApplication();
  $mainframe->enqueuemessage('You have succesfully redeemed this code');
  return false;
} else {
    $mainframe =& JFactory::getApplication();
  $mainframe->enqueueMessage(JText::_('Invalid code. Please check and try again.'), 'error');
  return false;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:30:20.907

根本不需要检查计数，只需对列 E 进行常规选择

```
SELECT `E` FROM `furcodes` WHERE `B` = '$redeem_code' 
```

如果没有返回任何行，您就知道该代码在表中不存在。如果返回一行，则可以检查 E 的返回值以查看状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:27:44.310

改变

```
$query = "SELECT COUNT(`B`) FROM `furcodes` WHERE `B` = '$redeem_code' ;"; 
```

到

```
$query = "SELECT COUNT(`B`) FROM `furcodes` WHERE `B` = '$redeem_code'"; 
```

# html - 为什么我的 在同一页面上呈现不同的元素？

> ID：14284388
> 
> 赞同：4
> 
> 时间：2013-01-11T13:59:29.493
> 
> 标签：html, css

我有一个页面是能源通讯的在线版本，每个故事都用`<hr>`. 我今天刚刚注意到其中一个以 680 像素 x 2 像素而不是 680 像素 x 1 像素进行渲染。

检查元素后，我看到高度来自这个 css 条目：“height: 0.1em;” 并且想知道为什么浏览器似乎认为这个而不是其他的需要不同的厚度？（我知道这并不重要，但这只是在困扰我，必须有人知道！）

这是页面：[http ://utilitiessavings.co.uk/utilities-insider-issue-10-january-2013/](http://utilitiessavings.co.uk/utilities-insider-issue-10-january-2013/)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:10:29.983

em 不是绝对的度量单位。它与您的字体大小成正比。很有可能，两个不同的`<hr>`标签继承了不同的字体大小，因此计算 0.1em 的方式也不同。

参考： http: [//kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:23:35.500

正如 Eipark 建议您使用 em 而不是像素来格式化您的 HR 条。

真正简单的解决方法是

使用 Style.css 查找第 67 行 hr { 并更改以下代码

由此

```
height: 0.1em; 
```

至此

```
height:1px; 
```

# jquery - 具有不透明度的 jQuery 动画

> ID：14284391
> 
> 赞同：1
> 
> 时间：2013-01-11T18:26:05.423
> 
> 标签：jquery, jquery-animate, slider, opacity, fadein

我刚刚用不透明度编写了 jquery animate，并且在不透明度为 0.5 的情况下从左到右的动画效果很好，但在动画中不能从左到右工作，但在淡入淡出时效果很好。

请看一下代码

```
$(window).load(function() {

  $('#apDiv1').animate({top:"640px"},3000);

  setTimeout(function(){

      $('#apDiv12').fadeIn(2000).animate({left:"340px"},3000);

      setTimeout(function(){
          $('#apDiv12').animate({left:"30px", opacity: 0},3000);
      }, 6300);

  }, 3300);

}); 
```

如您所见，第一行#apDiv12 表示.fadeIn，我想更改为动画但无法正常工作，我不明白为什么第二个#apDiv12 正在使用动画。

我的问题是

`$('#apDiv12').fadeIn(2000).animate({left:"340px"},3000);`

我想使用 .animate 而不是 fadeIn 但不能在动画中工作，我想知道为什么！以及如何解决！

两个几乎相同的代码有什么不同！我该如何解决它以使用动画而不是.fadeIn！

请帮忙谢谢。

是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:30:40.160

我不确定我是否完全理解你的问题，但你不能做这样的事情来使用动画“淡入”元素：

```
$('#apDiv12').animate({opacity: 1}, 2000).animate({left:"340px"},3000); 
```

# oracle - 存储过程及其输出

> ID：14284392
> 
> 赞同：0
> 
> 时间：2013-01-11T18:26:11.663
> 
> 标签：oracle, stored-procedures, plsql

调用存储过程的客户端只能处理记录集输出。

然而，由于几个内部查询，存储过程应该返回简单的 0 或 1 值。

有什么解决方法可以让存储过程变量值作为记录集返回吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:29:17.723

返回一个游标变量；使用 SELECT .. FROM DUAL 打开游标变量，其中包含要从过程中返回的值。

该过程将返回一个游标，该游标返回包含这些值的单行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:30:10.333

从你的程序做

```
OPEN resultsCursor_ FOR
Select 1 As aValue FROM DUAL; 
```

或者

```
CREATE OR REPLACE PROCEDURE GetAValue
(
  results_       OUT     SYS_REFCURSOR
)
IS
    MY_COUNT_  INT;
BEGIN 

    MY_COUNT_ := 10;

    OPEN results_ FOR
    SELECT MY_COUNT_ AS MyCount FROM DUAL;

END GetAValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:56:51.947

A procedure cannot return a value; you need a function to do this.

If you really want a procedure to "give" a cursor back to the caller, you can use something like this:

```
 --Declare this type in a package X
 --The caller must have access to the package X.
 TYPE ref_cursor IS REF CURSOR;
 CREATE OR REPLACE
 PROCEDURE test (
                   p_param1           IN  VARCHAR2,
                   p_cur              OUT X.REF_CURSOR,
                   p_error_code       OUT NUMBER,
                   p_error_message    OUT VARCHAR2
                 )
 AS
 BEGIN
      OPEN p_cur FOR
        SELECT * FROM TABLE;
 EXCEPTION
 WHEN OTHERS THEN

     p_error_code := SQLCODE;
     p_error_message := SQLERRM;

 END; 
```

If there is no error set, the caller can then execute this cursor and fetch rows against it.

# gwt - GWT 拖放 TreeItem

> ID：14284393
> 
> 赞同：5
> 
> 时间：2013-01-11T18:26:14.783
> 
> 标签：gwt, drag-and-drop

[我正在创建一个树，用户可以使用gwt-dnd](http://code.google.com/p/gwt-dnd/)库通过将一个 TreeItem 拖放到另一个 TreeItem 来移动 TreeItem 。我读过我应该为每个 TreeItem 设置一个小部件，并使该小部件可拖动和一个 dropTarget。到目前为止，即使只是拖动 TreeItem，我也没有任何成功。我还得到一个“拖放未处理的异常”。我是否至少朝着正确的方向前进，还是有更好的方法来做到这一点？任何帮助是极大的赞赏！

```
// Create the boundary panel
AbsolutePanel main = new AbsolutePanel();
main.setSize("500px", "500px");
// Create Tree and tree root
Tree tree = new Tree();
TreeItem root = new TreeItem();
root.setText("root");
// Create Label widget and construct treeItem from Label
Label itemLabel = new Label("item1");
TreeItem item = new TreeItem(itemLabel);
// Create DragController for the main panel, and make the Label widget draggable
PickupDragController dragController = new PickupDragController(main, true);
dragController.makeDraggable(item.getWidget());
// Add everything to root panel
root.addItem(item);
tree.addItem(root);
main.add(tree);
RootPanel.get().add(main); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T08:19:21.677

[我建议这里](https://code.google.com/p/gwt-dnd/wiki/GettingStarted)的入门指南。

查看**如何向您的项目添加拖放功能**

你缺少的是一个放置区。有些类实现了放置控制器，您应该使用它们。没有地方放的可拖动项目是没有意义的。

您还可以通过在事件上实现逻辑（OnDropStart 等）来覆盖 dnd 的某些功能

重要的！！！不要忘记将 DropController 注册到 PickupDragController。

这是来自 dnd 站点的示例

```
public AbsolutePositionExample(PickupDragController dragController) {
    super(dragController);
    addStyleName(CSS_DEMO_ABSOLUTE_POSITION_EXAMPLE);

    // use the drop target as this composite's widget
    AbsolutePanel positioningDropTarget = new AbsolutePanel();
    positioningDropTarget.setPixelSize(400, 200);
    setWidget(positioningDropTarget);

    // instantiate our drop controller
    absolutePositionDropController = new AbsolutePositionDropController(positioningDropTarget);
    dragController.registerDropController(absolutePositionDropController);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T03:26:16.653

无需使用[gwt-dnd](http://code.google.com/p/gwt-dnd/)。只需用 a 包装`TreeItem`内容`FocusPanel`并使用其拖动事件处理程序。使用您的示例：

```
Tree tree = new Tree();
TreeItem root = new TreeItem();
root.setText("root");

Label itemLabel = new Label("item1");
FocusPanel wrapper = new FocusPanel(itemLabel);
TreeItem item = new TreeItem(wrapper);

wrapper.getElement().setDraggable(Element.DRAGGABLE_TRUE);

wrapper.addDragStartHandler(new DragStartHandler() {
    @Override
    public void onDragStart(DragStartEvent event) {
        GWT.log("Drag START!");
    }
});

wrapper.addDragEndHandler(new DragEndHandler() {
    @Override
    public void onDragEnd(DragEndEvent event) {
        GWT.log("Drag END!");
    }
});

wrapper.addDragOverHandler(new DragOverHandler() {
    @Override
    public void onDragOver(DragOverEvent event) {}
});

wrapper.addDropHandler(new DropHandler() {
    @Override
    public void onDrop(DropEvent event) {
        GWT.log("DROP!");
        event.preventDefault();
    }
});

root.addItem(item);
tree.addItem(root); 
```

# android - Android中“完成”按钮的上下文操作栏文本更改

> ID：14284396
> 
> 赞同：3
> 
> 时间：2013-01-11T18:26:23.597
> 
> 标签：android, android-actionbar, contextual-action-bar

我的应用程序中有 CAB 菜单。我需要将“完成”按钮上的文本更改为“添加”。我怎样才能做到这一点？

我能够看到设计元素。但不是我的要求。

```
<item name="android:actionModeCloseDrawable"></item>
<item name="android:actionModeCutDrawable"></item>
<item name="android:actionModeCopyDrawable"></item>
<item name="android:actionModePasteDrawable"></item>
<item name="android:actionModeSelectAllDrawable"></item>
<item name="android:actionModeBackground"></item>
<item name="android:actionModeCloseButtonStyle"></item> 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-11T18:34:38.563

您可以像其他菜单一样在 xml 文件中定义它。然后像这样在回调中引用它

```
private final class ModeCallback implements ActionMode.Callback {

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        MenuInflater inflater = Activity.getSupportMenuInflater();
        inflater.inflate(R.menu.contexual_menu, menu);
        return true;
    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {

        return false;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        //Destroy something
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        Toast.makeText(Activity.this, "Well done you made an custom CAB", Toast.LENGTH_SHORT).show();

    }
}; 
```

确保像这样启动 actionMode

```
startActionMode(new ModeCallback()); 
```

# c++ - 对象识别 OpenCV 中未处理的异常

> ID：14284397
> 
> 赞同：0
> 
> 时间：2013-01-11T18:26:25.303
> 
> 标签：c++, visual-studio-2008, visual-c++, opencv, object-recognition

我正在执行 OpenCV 示例文件夹中关于对象检测的代码。以下是以下代码：

```
<pre><code>#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

#include "iostream"
#include "stdio.h"

using namespace std;
using namespace cv;

void detectAndDisplay( Mat frame );

String face_cascade_name = "E:/opencv/data/haarcascades/haarcascade_frontalface_alt.xml";
String eyes_cascade_name = "E:/opencv/data/haarcascades/haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade;
CascadeClassifier eyes_cascade;
string window_name = "Capture - Face detection";
RNG rng(12345);

int main( int argc, const char** argv )
{
  CvCapture* capture;
  Mat frame;

  if( !face_cascade.load( face_cascade_name ) ){ printf("--(!)Error loading1\n"); return -1; };
  if( !eyes_cascade.load( eyes_cascade_name ) ){ printf("--(!)Error loading2\n"); return -1; };

  capture = cvCaptureFromCAM( -1 );
  if( capture )
  {
    while( true )
    {
      frame = cvQueryFrame( capture );

      if( !frame.empty() )
       { detectAndDisplay( frame ); }
      else
       { printf(" --(!) No captured frame -- Break!"); break; }

      int c = waitKey(10);
      if( (char)c == 'c' ) { break; }

    }
  }
  return 0;
}

void detectAndDisplay( Mat frame )
{
   std::vector<Rect> faces;
   Mat frame_gray;

   cvtColor( frame, frame_gray, CV_BGR2GRAY );
   equalizeHist( frame_gray, frame_gray );

   face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );

   for( int i = 0; i < faces.size(); i++ )
    {
      Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
      ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 2, 8, 0 );

      Mat faceROI = frame_gray( faces[i] );
      std::vector<Rect> eyes;

      eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );

      for( int j = 0; j < eyes.size(); j++ )
       {
         Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 );
         int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
         circle( frame, center, radius, Scalar( 255, 0, 0 ), 3, 8, 0 );
       }
    }

   imshow( window_name, frame );
}
</code></pre> 
```

在调试代码时，它会引发以下异常

```
<pre><code>Unhandled exception at 0x5788bf1d in corner.exe: 0xC000001D: Illegal Instruction.</pre></code> 
```

谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T10:54:01.463

试试 haarcascade_frontalface_alt2.xml 。

# javascript - 为什么我不能在我的项目中使用 Kendo UI 控件？

> ID：14284399
> 
> 赞同：-2
> 
> 时间：2013-01-11T18:26:42.100
> 
> 标签：javascript, asp.net-mvc, telerik, kendo-ui

我刚开始使用 Kendo UI 并完成了[本](http://try.kendoui.com/)教程来学习基础知识，我在 Visual Studio 202 上为 MVC Web 应用程序项目创建了一个新的 Kendo UI，并决定测试我学到的东西，我尝试像在教程但未能运行它。

我的意思是无法识别剑道功能，这不应该发生，因为该项目已经具有带有 js 文件的剑道文件夹。

这是我的视图的样子：

```
<!DOCTYPE html>

<html>
<head >
    <link href="Content/kendo/2012.2.710/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="Content/kendo/2012.2.710/kendo.default.min.css" rel="stylesheet" type="text/css" />
    <title><%: ViewBag.Title %></title>
</head>
    <body>
        <h1><%: ViewBag.GestionTitle %></h1>
        <div id="tweetGrid"></div>

        <script src="Scripts/jquery-1.8.2.min.js"></script>
        <script src="Scripts/kendo/2012.2.710/kendo.web.min.js"></script>
        <script>            
            $(function () {
                var ds = new kendo.data.DataSource({
                    transport: {
                        read: {
                            url: "http://search.twitter.com/search.json?q=kendoui",
                            dataType: "jsonp"
                        }
                    },
                    schema: {
                        data: "results"
                    }
                });
                $("#tweetGrid").kendoGrid({
                    columns: ["from_user", "from_user_name", "text"],
                    dataSource: ds
                });
            });
        </script>
    </body>
</html> 
```

我尝试将脚本放在头部和身体内，但无法让剑道功能正常工作。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:50:09.843

根据您的评论...

呈现的 HTML 引用了错误位置的资源文件，因此出现 404 错误。请记住，视图本身并没有关于将呈现它的 URL 的概念。似乎该视图正在`/Test/`路径下呈现。由于脚本是通过相对路径引用的，因此它正在寻找该相对路径。你使用的是什么版本的 MVC？他们改变了几次引用视图资源的“正确方式”。

例如，您可能会引用这样的脚本：

```
<script src="<%: Url.Content("~/Scripts/kendo/2012.2.710/kendo.web.min.js") %>"></script> 
```

这实质上调用服务器端预处理来确定文件的正确客户端路径（基于相对于应用程序根的服务器端路径）并在`script`标签中输出该路径。因此，无论视图在哪里使用，它都应该始终具有资源文件的正确路径。

您希望对任何页面资源执行此操作。JavaScript 文件、CSS 文件，甚至是适当的图像。

# php - 针对某些结果停止 PHP 分页

> ID：14284400
> 
> 赞同：1
> 
> 时间：2013-01-11T18:26:44.320
> 
> 标签：php, pagination

我有一个包含 Youtube 视频列表的页面。我使用下面的数组，然后在页面的后面我使用其他一些函数来显示页面下方视频的标题和屏幕抓取。这样，我只需在下面的列表中添加一个新视频，它就会从 YouTube 中获取所有正确信息：

```
//exampleX is a youtube video code
$videolist = array(
"example1",
"example2",
"example3",
"example4",
"example5"
); 
```

随着时间的推移，这个列表已经增长到我需要为视频添加一些自动分页的地步，因为列表继续增长。我以前做过一次，所以我想我可以处理那部分。

然而，客户有一些视频无论如何都需要保持在同一页面上。我不确定如何处理那部分。

对此的任何想法将不胜感激。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:31:38.893

作为您已经拥有的内容的简单扩展，无需太多修改，请考虑将您的视频数组制作为多维数组，并使用一个键指示它应该保持在一起。`keeptogether => TRUE`在对它们进行分页时，如果您在页面列表的末尾遇到一个，而不是中断，继续循环输出直到到达下一个`keeptogether => FALSE`。（我还将建立将`keeptogether`键省略为`FALSE`值的能力）。

```
$videolist = array(
  array("title" => "example1", "keeptogether" => FALSE),  
  array("title" => "example2", "keeptogether" => FALSE),
  array("title" => "example3", "keeptogether" => TRUE),
  array("title" => "example4", "keeptogether" => TRUE),
  array("title" => "example5" "keeptogether" => FALSE)
); 
```

如果您需要它在 a 出现在页面末尾时更优雅地工作`keeptogether => TRUE`，并且它应该在继续之前中断到下一页（因此当前页面不会变得太长），请考虑一个简单的算法，例如：

```
# Pseudocode:
# Encountering a keeptogether == TRUE when 2 from the end of a normal page length:
if current_page_counter < (num_per_page - 2) and keeptogether == TRUE
  break_to_next_page
else
  loop_until keeptogether == FALSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:32:12.713

也许在您的列表中，您可以按组对它们进行排序并按组分页。大多数组只有一个视频，但那些需要一起视频的组会有多个视频。像这样：

```
$videolist = array(
    "group1" => array("example1")
    "group2" => array("example2", "example3"),
    "group3" => array("example4"),
    "group4" => array("example5"),
); 
```

所以不是按视频分页，而是按组分页，通常一个组有一个视频，但它可能有多个。

如果你也使用数据库来存储这些，你可以在那里复制这个结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:37:00.243

您是否考虑过使用多维数组来存储视频？数组的每个元素都`$videolist`将包含一个视频数组。其中大多数只有一个元素，但需要组合在一起的元素将位于同一个数组中，如下所示：

```
$videolist = array(
    array("example1"),
    array("example2"),
    array("example3", "example4"),
    array("example5")
); 
```

然后，在显示视频时，您可以执行以下操作：

```
$Offset = 1;
$PerPage = 2;
$Count = 0; $Displayed = 0;
foreach ($videolist as $videoarray) {
    foreach ($videoarray as $video) {
        $Count++;
        if ($Count <= $Offset) continue;

        $Displayed++;
        // Display Video
    }

    if ($Displayed >= $PerPage) break;
} 
```

这样，页面直到当前组结束时才会结束。

你也可以改变它，所以你在迭代它之前做 a `count()`，`$videoarray`如果它会把总数推过就中断`$PerPage`

# javascript - 表头文本转换

> ID：14284401
> 
> 赞同：5
> 
> 时间：2013-01-11T18:26:44.500
> 
> 标签：javascript, jquery, html, css

我使用了 transform: rotate(270deg) 作为表头，但是由于该表头中的名称不相等（甚至不接近）它看起来很难看，所以我必须使每一列的宽度相等。表头中的一些文本是由 2 或 3 个单词组成的，有些是单个单词。

这是它的样子：http: [//img571.imageshack.us/img571/9527/tbl.png](http://img571.imageshack.us/img571/9527/tbl.png)

我想要的只是每一列都具有相同的宽度，无论标题中的名称有多长，并且名称最多为 2 行。

编辑：示例：

[http://jsfiddle.net/SvAk8/](http://jsfiddle.net/SvAk8/)

```
.header {

-webkit-transform: rotate(270deg);  
-moz-transform: rotate(270deg);
-ms-transform: rotate(270deg);
-o-transform: rotate(27deg);
transform: rotate(270deg); 
white-space: pre-line; 
width: 50px;
height: 180px; /* to be adjusted: column is not always tall enough for text */
margin: 0 -80px;
vertical-align: middle; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:26:25.873

添加此规范：

```
table { width: 100%; table-layout: fixed; } 
```

`table-layout: fixed;`做这个：

> 表格和列的宽度由 table 和 col 元素的宽度或第一行单元格的宽度设置。后续行中的单元格不影响列宽。

并且需要指定的宽度。有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/table-layout](https://developer.mozilla.org/en-US/docs/CSS/table-layout)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:31:45.243

这是迄今为止我得到的最好的：

```
$(document).ready(function () {

  (function () {
    var maxW = 0,
      maxH = 0;

    $("td.header").each(function () {

      $cell = $(this);

      $dummyDiv = $("<div></div>", {
        text: $cell.text()
      });

      // Replaces the original text for a DummyDiv to figureout the cell size before the rotation
      $cell.html($dummyDiv);

      if ($cell.width() > maxW) maxW = $cell.width();
      if ($cell.height() > maxH) maxH = $cell.height();
    });

    $("td.header").each(function () {
      // Applies the rotation and then the size previosly calculated
      $(this)
        .addClass("rotate")
        .width(maxH + 10)
        .height(maxW + 10);
    });
  })();
}); 
```

你可以在这里看到一个现场演示：http: [//jsfiddle.net/Lrr3G/](http://jsfiddle.net/Lrr3G/)

我希望能有所帮助:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T18:30:48.347

好的！我做了一个研究，似乎浏览器在转换后不会计算维度。

[将文本旋转为表格中的标题（跨浏览器）](https://stackoverflow.com/questions/6999523/rotate-text-as-headers-in-a-table-cross-browser)

我认为您只有一个选择，它是：javascript；

找到一个好的行高并在页面加载后调整宽度。

# spring - Spring-data MongoDB 存储库和继承

> ID：14284403
> 
> 赞同：2
> 
> 时间：2013-01-11T18:26:51.900
> 
> 标签：spring, mongodb, spring-data-mongodb

我创建了一个这样的类用户类：

```
public class User {
    /**
     * The list of roles for the user
     */
    private List<String> roles;
    /**
     * The login information
     */
    private ICredentials credentials;

    /*---- the constructors and getters/setters are omitted ---*/
} 
```

ICredentials 接口：

```
public interface ICredentials {
} 
```

一种实现：

```
public class LoginPassword implements ICredentials {
    /**
     * The login of the user
     */
    protected String login;

    /**
     * The password of the user
     */
    protected String password;

    /*---- the constructors and getters/setters are omitted ---*/
} 
```

现在，我创建了一个存储库来从凭据中查找用户：

```
public interface MongoUserRepository extends MongoRepository<User, String> {
    List<User> findByCredentials(ICredentials credentials);
    List<User> findByCredentialsEquals(ICredentials credentials);
} 
```

Spring记录了这个（对于两个请求）：org.springframework.data.mongodb.core.MongoTemplate [DEBUG] find using query: `{ "credentials" : { "login" : "test" , "password" : "test"}}`fields: null for class: class xxx.User in collection: user

而且什么都没找到……好像什么都没找到，因为“_class”属性没有写就是请求。我认为好的要求应该是： `{ "credentials" : {`**`"_class":"xxx.LoginPassword"`**`, "login" : "test" , "password" : "test"}}`

我做错了什么吗？我错过了什么吗？

谢谢

我使用 spring mvc 3.2.0、spring-data-commons-core 1.4.0、spring-data-mongodb 1.1.1 和 mongo-java-driver 2.10.1（我已将所有库更新到最新版本以确保它不是已经修复的错误但没有成功）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:25:51.397

您是否尝试在 ICredentials 界面上方添加 @Document(collection = "users") ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T21:21:12.607

当您不为文档使用注释时会发生这种情况

```
@Document(collection = "example")
public class Example{

  @Id
  private String id;

  //getter and setters
} 
```

# jquery - 每次删除项目时添加类？

> ID：14284410
> 
> 赞同：0
> 
> 时间：2013-01-11T18:27:14.547
> 
> 标签：jquery, drag-and-drop

感谢您提前查看此问题。

我正在为我在大学做的一个项目使用 jQuery 拖放，我希望计算每个 drop 并更改每个 drop 上添加的类。

这是jQuery：

```
$('#droppableChoking').droppable({
    drop: function (event, ui) {
        //reuse jQuery object
        var $this = $(this);

        //get object type
        var droppedObject = ui.draggable.data('object');

        //css reset
        $this.removeClass();
        $this.addClass("grape" + droppedObject);
        }

        //play drop sound
        audioClap.play();
    }
}); 
```

我试过做一个循环并将计数的值添加到类中以每次更改它，但我做错了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:33:37.023

尝试这样的事情：

```
var drop_count = 0;

$('#droppableChoking').droppable({
    drop: function (event, ui) {
        //reuse jQuery object
        var $this = $(this);

        //get object type
        var droppedObject = ui.draggable.data('object');

        //css reset
        $this.removeClass();
        $this.addClass("grape_" + drop_count);
        drop_count++;

        //play drop sound
        audioClap.play();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:32:55.673

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/) `removeClass`要求*从每个匹配元素的类属性中删除一个或多个空格分隔的类。*

因此，考虑到这一点，您对 removeClass 的调用不太可能删除任何内容。如果您想清除课程，请执行`$this.attr('class', '')`

至于计数器，这是我更新的 JS：

```
 var counter = 0;

    $('#droppableChoking').droppable({
            drop: function (event, ui) {
                ++counter;

                //reuse jQuery object
                var $this = $(this);
                //get object type
                var droppedObject = ui.draggable.data('object');
                //css reset
                $this.attr('class', '');
                $this.addClass("grape" + droppedObject);

                // what to do with counter?  not sure.  Whatever you want.  I'm setting text.  Not sure how you want to use it for the class.
                $this.text(counter);
                }
                //play drop sound
                audioClap.play();
            }
        }); 
```

# haskell - 以有效的方式从列表中获取最后一个元素

> ID：14284411
> 
> 赞同：3
> 
> 时间：2013-01-11T18:27:21.167
> 
> 标签：haskell

在 Haskell 中获取列表最后一个元素的最有效方法是什么？

示例：`getLastElement [1,2,3,4]`应该返回`4`.

据我所知，`last [1,2,3,4]`当 Haskell 挖掘列表时效率不高，这导致列表长度在`O(n)`哪里的效率。`n`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T19:59:57.997

Okasaki 的书教给我们一个向现有数据结构添加高效 API 的好技巧：将结构包装在一个缓存 API 调用结果的新结构中。如果您*只想*添加`last`到一组高效调用中，这是执行此操作的简单方法：

```
import Control.Monad -- mplus is a convenient spell

data LastList a = LastList
    { forget :: [a]
    , last   :: Maybe a
    }

nil = LastList [] Nothing
cons x l = LastList (x : forget l) (last l `mplus` Just x) 
```

现在`last`操作是 O(1)，很简单。这是非常有限的：您不能有效地*修改*列表的末尾，或者有效地获取倒数第二个元素，或者有效地从列表中构建其中一个（因此您必须将所有基于列表的函数替换为这些人通过您的整个代码来查看好处）或类似的东西，但是您要求高效的一个电话是。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-11T18:49:40.357

首先请注意，这`last`在其他方面并不是特别好，因为它是一个像`head`. 如果您经常使用列表的尾部，请将其废弃为`Data.Sequence`or `Data.Vector.Unboxed`：

```
import Data.Sequence

firstThing seq = case viewl seq of
   EmptyL -> error "no beginning"
   a :< as -> a

lastThing seq = case viewr seq of
   EmptyR -> error "no end"
   as :> a -> a

-- > lastThing (fromList "abc")
-- 'c'
-- > firstThing (fromList "abc")
-- 'a' 
```

如果您使用的是,等未装箱的类型`Int`，那么您将获得更好的结果，请参阅文档以了解有关效率的说明和[http://hackage.haskell.org/packages/archive/vector/0.10.0.1 /doc/html/Data-Vector-Unboxed.html#g:4](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector-Unboxed.html#g:4)`Double``Char``Data.Vector.Unboxed``Data.Vector.Unboxed.head``Data.Vector.Unboxed.last`

在您尽可能使用`Char`s列表的特殊情况下，这显然是“*惯用*的”事情。再次查看[http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text.html](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text.html)的文档`Data.Text`*`head``last`*

 *如果您想象“Haskell”列表和其他语言中的“列表”之间的对比，那么可能一方面是“Haskell”列表，另一方面是向量和数组之间的对比；后者就像列表一样“Haskelly”。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-11T18:31:02.283

那是列表数据结构吗？如果你想要最后一个元素，你将有`O(n)`复杂性。没有办法解决这个问题。

您将不得不考虑不同的数据结构，例如[`Data.Sequence`](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Sequence.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T18:32:59.727

使用内置列表，无法绕过 O(n) 复杂度（每次只能获取第一个元素和列表的其余部分，因此如果不遍历所有 n 个元素就无法到达末尾）。*

# matlab - 我无法在 matlab 中使用 findminsearch 获得正确的值

> ID：14284415
> 
> 赞同：0
> 
> 时间：2013-01-11T18:27:39.163
> 
> 标签：matlab

我试图按照[http://www.mathworks.com/help/matlab/ref/fminsearch.html](http://www.mathworks.com/help/matlab/ref/fminsearch.html)中的示例 更改香蕉函数：

```
enter fun = @(x) x^2;
[x, fval] = fminsearch(fun, 1) 
```

我希望有一个 x = 0 的值，但得到 "Exiting: Maximum number of function evaluations has been exceeded" 。

有没有办法获得正确的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:02:42.240

这将帮助您并回答您的问题： http: [//www.mathworks.com/matlabcentral/newsreader/view_thread/152034](http://www.mathworks.com/matlabcentral/newsreader/view_thread/152034)

# java - 最常访问的最大 URL 序列

> ID：14284420
> 
> 赞同：4
> 
> 时间：2013-01-11T18:27:58.847
> 
> 标签：java, algorithm, design-patterns, data-structures, tree

我有以下要求来实现，这对我来说是一个“难题”：
我有网络服务器和各种用户（经过身份验证和登录）访问网站的各个区域（即关注和浏览各种链接）。这些操作（或称为浏览）正在记录到日志文件中。
因此，这些文件捕获用户访问服务器的日期和访问的各种链接，即 URL。
记录的简化格式（出于解释目的）可以如下所示：
`Timestamp User-Name URL-1`
因此，给出我们可以拥有的日志的简化示例（假设有效日期）：

```
Date-1 John    URL-1  
Date-1 Nick    URL-1  
Date-1 John    URL-2  
Date-1 George  URL-1  
Date-1 George  URL-2
Date-1 Eve     URL-2  
Date-1 Nick    URL-2  
Date-1 John    URL-3
Date-1 George  URL-3  
Date-1 John    URL-5  
Date-1 Nick    URL-3  
Date-1 Bill    URL-2  
Date-1 George  URL-5
Date-1 Nick    URL-5      
Date-1 Eve     URL-3                
Date-1 Eve     URL-5 
```

等等，并且可能有成百上千的条目
当我说`URL-1`我的意思是网站的有效 URL 时，所以`URL-1`在 John 和 Eve 中真的意味着他们都访问了同一个链接。在此示例`URL-2,URL-3,URL-5`中是最大常见访问 URL 序列。

**问题：**我有兴趣使用此信息并找到所有用户在日志文件和/或特定日期时间覆盖的整个日期时间范围内访问的最频繁访问的 URL 序列。
我有一些关于如何去做的初步想法。例如，我的第一个想法是存储所有内容`HashMaps`并包含每个外观的计数器，然后遍历映射条目以找到最大值，但在我看来，它在空间和运行时都有巨大的开销。
此外，我对此思考得越多，它似乎就越可能有一个“标准”解决方案，例如字符串模式匹配一​​个将遵循的解决方案`KMP algorithm`。
然后我想如果我可以使用例如后缀树，但我只知道实现一个 trie 并且我相信它的空间复杂度`O(N^2)`. 我知道有压缩版本，但我认为它们太复杂了，如果有更好/标准的解决方案来解决这个问题，我不想浪费时间。

非常感谢任何建议/意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:56:36.993

好吧，你说，*任何建议/意见都非常感谢。*. 因此，让我建议您简要遵循以下算法：

1.  过滤所需日期范围的日志文件，为每个用户并行收集一些`List`.

2.  在第 1 步之后。您有一组大序列。在此步骤中，此问题相当于在[字符串列表中查找最常见的子字符串的](https://stackoverflow.com/questions/1410822/how-can-i-detect-common-substrings-in-a-list-of-strings)任务。这是已经解决的问题。

**UPD：**之后考虑每个都`URL`像`"char"`一些`"string"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:17:07.570

很抱歉，但我认为使用日志文件中的数据不可能实现这一点。

我看到的问题是您正在寻找最常用的 URL**序列**。在您的问题中，您只有 userId 而不是会话指示器，这意味着您无法可靠地找出他们在单个会话期间所做的事情。当你试图找出他们所走的路径时，你可能会混合不同的会话。

假设您有一个 sessionId，您可以创建每个会话的路径并在其上运行一些（仍然未知的）程序以找到最常用的“弧”。

# python - Python crypt包：可以在密码中输入额外的字符

> ID：14284422
> 
> 赞同：1
> 
> 时间：2013-01-11T18:28:08.377
> 
> 标签：python, django, unix, encryption, crypt

我正在使用 Python 的 crypt 包将加密密码保存在 Django 网站的 MySQL 数据库中。我不确定这是否是一个错误，但这是我正在使用的代码：

加密/保存密码：

```
user.password = crypt(request.POST['password'], netid)
user.save() 
```

要在登录时检查正确的密码：

```
if crypt(password, email) == user.password:
# Grant acccess to the user's profile, etc. 
```

问题如下。`netid = test@example.com`如果我用变量and加密密码`request.POST['password'] = 'ABC123abc'`，它工作正常。但是，当我尝试登录时，如果我使用密码`'ABC123abc[trailing_chars]'`，其中 trailing_chars 可以是任何有效字符串，我仍然能够登录。这是为什么？它构成了一个很大的安全漏洞。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:43:10.520

首先，您**不**应该使用电子邮件地址作为 crypt 的盐（第二个参数）。这是不安全的。你必须选择一个好的随机盐。

对于传统的 crypt，salt 是从 set 中选择的两个字符的字符串`[a–zA–Z0–9./]`。此版本的 crypt 仅接受 8 个输入字符，并在第 8 个之后从输入中丢弃所有后续字符。这就是你在这里看到的。

现代 crypt 实现还支持在密码学上比传统 crypt 强大得多的其他算法，但它们并非在所有平台上都可用。新算法也不将输入限制为 8 个字符。

要使用其中一种更好的算法（如果您使用的是支持它们的平台），您需要提供一种特殊格式的盐。这就是函数识别您想要使用替代算法的方式。

对于 glibc 支持的额外算法（因此在 GNU/Linux 上可用），请参阅[crypt 手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/crypt.3.html)的“Glibc 注释”部分。

顺便说一句，在检查密码时，您不需要手动提取盐。加密密码已经以 salt 开头，所以只需将`user.password`(not `email`) 作为第二个参数传递给`crypt`. 无论您使用的是旧算法还是新算法之一，这都有效。只有在加密密码时才需要选择算法和生成正确格式的盐，而不是在验证密码时。

# javascript - jQuery Timer 和声音不同步

> ID：14284423
> 
> 赞同：0
> 
> 时间：2013-01-11T18:28:10.230
> 
> 标签：javascript, jquery, timer

我建立了一个页面，用户可以在其中输入一个以秒为单位的值，然后在该时间间隔内会发出 ping 声。我还组装了一个计时器，它应该与 ping 间隔同步。就像他们输入 5 一样 - 当 ping 响起时，时钟应该运行在 5、10、15 等之后。出于某种我无法弄清楚的原因，声音似乎与时钟并没有完全同步，而且运行时间越长，声音就越差。谢谢你的帮助！

```
$(document).ready(function() {

  $('#set_ping').click(function() {
    interval = parseInt($('#ping_val').val()*1000,10);
    $('#ping_alert').text('The ping will sound every ' + interval/1000 + ' seconds.');
  });

  $('#go').click(function() {  
    timer();
    setInterval(sound, interval);

   });

  function sound() {
   $('#audio').append('<embed src="assets/audio/sound88.mp3" autostart="true" hidden="true" loop="false">');    
  }

  var seconds = 0;
  function timer() {setInterval(function() {
    $('#progress').text(seconds++/100);
  }, 10);
 }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:35:58.103

这是因为[JavaScript 中的计时器并不完全准确](http://www.nczonline.net/blog/2011/12/14/timer-resolution-in-browsers/)。请参见[此处](https://stackoverflow.com/a/196138/575527)和[此处](https://stackoverflow.com/a/13089677/575527)。此外，由于 JavaScript 是单线程的，因此计时器仅在没有其他内容执行时才会执行。如果您的页面很忙，则实际上“计划”执行的内容会“延迟”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:35:58.513

使用下面的代码：

```
$(document).ready(function() {
var interval;
  $('#set_ping').click(function() {
    interval = parseInt($('#ping_val').val()*1000,10);
    $('#ping_alert').text('The ping will sound every ' + interval/1000 + ' seconds.');
  });

  $('#go').click(function() {  
    timer();
    setInterval(sound, interval);

   });

  function sound() {
   $('#audio').append('<embed src="assets/audio/sound88.mp3" autostart="true"     hidden="true" loop="false">');    
  }

  var seconds = 0;
  function timer() {setInterval(function() {
    $('#progress').text(seconds++/100);
    if(seconds % interval == 0){
       // play music here 
    } 
  }, 10);
 }
}); 
```

在该代码中，当代码更新时间时，它还会检查时间（您的`seconds`变量）是否有多​​个`interval`变量保持声音之间的时间间隔。注意`interval`是全局变量

# ruby-on-rails - Rails 中的强制一对一关系

> ID：14284426
> 
> 赞同：0
> 
> 时间：2013-01-11T18:28:22.703
> 
> 标签：ruby-on-rails, ruby, oop

我有一个`Flight`类代表飞行员日志中的一次飞行。它由以下属性组成：

*   期间
*   登陆
*   评论

它还有一个机场和出发和到达时间，这与我的问题有关。

我有关于将到达和离开建模为 a `Movement`，它将由机场和时间组成。然后我会从 中派生一个`Departure`和一个`Arrival`类`Movement`，并拥有`Flight`两者的引用之一。

然后我遇到了关于 Ruby 的讨论`TrueClass`和`FalseClass`（[为什么 Ruby 有 TrueClass 和 FalseClass 而不是单个布尔类？](https://stackoverflow.com/questions/3192978/why-does-ruby-have-trueclass-and-falseclass-instead-of-a-single-boolean-class)）。它的要点是 Ruby 不建模`true`，`false`因为`Boolean`它们不共享任何行为，我相信到达和离开也是如此。即使它们确实共享数据，它们也完全相反。

另一种选择是我简单地将到达和离开的数据字段嵌入到`Flight`. 我觉得这很尴尬，因为这意味着如果您从`Airport`模型遍历到出发和到达 ( `has_many :departures`, `has_many :arrivals`) 将产生一个`Flight`模型。

我探索的第三个选项是创建单独的`Departure`和`Arrival`模型而不从`Movement`. 但是，由于 a`Flight`需要同时具有到达和离开，这是引用航班所必需的，因此我们创建了一个讨厌的循环引用（顺便说一下，这也困扰了第一个选项）。

我将如何最好地模拟这种关系？有没有我没有考虑过的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:38:52.750

从 UI 开发人员的角度来说，这是我要开始的。

我怀疑你会经常做两件事——

1) 在列表中显示航班，并在列表项中包含出发和到达信息 2) 按出发和到达时间对列表进行排序

如果属性在飞行中，这些将更容易/更快地完成。您将避免连接。由于信息是必需的，因此无需“has_one”。如果需要，您可以随时在迁移后移动它们。保持简单，直到用例出现。

我认为通过简单地查看航班的到达机场 ID，在机场创建 has_many :arrivals （属于航班类型）也会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:46:35.357

如果您希望 Arrival 和 Departure 共享很多功能，请考虑使用主动支持关注点或抽象父类。

遗产：

```
class Movement < ActiveRecord::Base
  self.abstract_class = true
end

class Departure < Movement
end 
```

模块：

[http://www.fakingfantastic.com/2010/09/20/concerning-yourself-with-active-support-concern/](http://www.fakingfantastic.com/2010/09/20/concerning-yourself-with-active-support-concern/)

[http://api.rubyonrails.org/classes/ActiveSupport/Concern.html](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

# asp.net - 应用程序池 asdf 已禁用

> ID：14284429
> 
> 赞同：1
> 
> 时间：2013-01-11T18:28:29.470
> 
> 标签：asp.net, asp.net-mvc-3

> ...Windows Process Activation Service (WAS) 在启动工作进程为应用程序池提供服务时遇到故障。

我从 TFS 中提取了一个旧的 VS 2010 解决方案并尝试运行它。（在 VS2012 工作一年后。）由于某种原因，它拒绝 F5 启动和调试项目，并显示以下消息：

> 无法在 Web 服务器上开始调试。

在偶数查看器的系统部分中挖掘我发现了这条消息：

> 应用程序池 asdf 已被禁用。Windows Process Activation Service (WAS) 在启动工作进程为应用程序池提供服务时遇到故障。

每次我调试应用程序时，都会导致应用程序池停止。

另一个未安装 vs 2012 的团队成员可以从 TFS 获取相同的代码并运行它而不会出现任何问题。

有任何想法吗？

# c# - Visual Studio Express 2012 中的 PowerPacks 命名空间错误

> ID：14284431
> 
> 赞同：3
> 
> 时间：2013-01-11T18:28:41.680
> 
> 标签：c#, .net, visual-studio-2012, windows-phone, winapi

我正在尝试在 Visual Studio 2012 中构建一个项目，但出现此错误

```
The type or namespace name 'PowerPacks' does not exist in the namespace 'Microsoft.VisualBasic' (are you missing an assembly reference?)    Error   7   The type or namespace name 'PowerPacks' does not exist in the namespace 'Microsoft.VisualBasic' (are you missing an assembly reference?) 
```

我添加了 PowerPacks 的参考，但仍然出现此错误。我该如何克服这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:58:22.790

*根据我的评论详细说明：*

通常出现这种情况，并且不能通过添加引用来解决，说明你使用的项目类型与引用的类型不兼容。这对“.NET 4 客户端配置文件”与“.NET 4 配置文件”的对比让我很不爽。

根据您的标签，我怀疑您遇到的问题`windows-phone`是该`Microsoft.VisualBasic.PowerPacks`库基于`Windows.Form`，而该库在手机上不可用。因此，任何需要它的东西，比如 PowerPacks，都将与手机项目不兼容。

我无法为您指出手机的等效库，但如果您希望手机库中已经有您想要的功能，我不会感到惊讶。

# python - Python：设计 __str__ 方法的更简洁的方法

> ID：14284434
> 
> 赞同：0
> 
> 时间：2013-01-11T18:29:02.863
> 
> 标签：python, coding-style

我在这里有一个类定义：

```
class Graph:
    def __init__(self,directional = False,simple=True,Filename=None):
        self.adjacencyList = {}
        self.directional = directional
        self.simple = simple 
```

我`__str__`为它设计了这样的方法：

```
def __str__(self):
    simple = "Simple: "+ str(self.simple)+"\n"
    directional = "Directional: " + str(self.directional)+"\n"
    items = "{\n"
    for vertex in self.adjacencyList.keys():
        items = items +"\t"+str(vertex)+str(self.adjacencyList[vertex])+"\n"
    items += "}"
    string = simple + directional + items
    return string 
```

我发现它是如此冗长，我在想也许有一些更简洁的方法可以使用更少的代码行来完成它。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:38:52.043

改用[字符串格式](http://docs.python.org/2/library/string.html#format-string-syntax)：

```
 def __str__(self)
        items = '\n'.join(['\t{0}{1}'.format(k, v)
            for k, v in self.adjencyList.iteritems()])
        return (
            "Simple: {0.simple}\n"
            "Directional: {0.directional}\n"
            "{{\t{1}\n}}"
        ).format(self, items) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:46:19.850

pprint.pformat函数应该可以帮助您[。](http://docs.python.org/2/library/pprint.html)它将返回一个格式良好的打印字符串。

```
>>> import pprint
>>> adjacencyList = { 1: 100, 2: 200, 3: 300, 4: 400, 5: 500, 6: 600, 7: 700, 8: 800, 9: 900, 10: 1000 }
>>> s = pprint.pformat(adjacencyList)
>>> print s
{1: 100,
 2: 200,
 3: 300,
 4: 400,
 5: 500,
 6: 600,
 7: 700,
 8: 800,
 9: 900,
 10: 1000} 
```

虽然与原始代码中的输出不完全相同，但我认为这非常易读和接近。

然后我会将你的整个`__str__`函数重写为：

```
def __str__(self):
    return (
        "Simple: {0.simple}\n"
        "Directional: {0.directional}\n"
        "{1}"
    ).format(self, pprint.pformat(self.adjacencyList)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T18:37:31.967

尝试这个：

```
items = ''.join(['\t%s%s\n' % (k,v) for k,v in self.adjacencyList.items()])
return 'Simple: %s\nDirectional: %s\n{\n%s}' % (self.simple, self.directional, items) 
```

# ruby-on-rails - 包括与 ASC 或 DESC 顺序的嵌套关系

> ID：14284436
> 
> 赞同：0
> 
> 时间：2013-01-11T18:29:08.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我为 JSON 请求返回这样的模型

```
 def index
    @categories = Category.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @categories.to_json(:include => :todos) }
  end
end 
```

现在，当我返回这个@categories 时，我想包括：todos，升序排列和属性说“位置”。有没有办法我可以做到这一点..？

像这样的东西

```
 render json: @categories.to_json(:include => :todos, :order=>"postion, ASC") 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:42:05.717

您可以在 category.rb 中定义这样的关联：

```
has_many :ordered_todos,
             :class_name => "ToDo",
             :order      => "position ASC" 
```

然后只写：

```
render json: @categories.to_json(:include => :ordered_todos) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T01:16:32.530

user1541507 有一个很好的答案。

如果您发现不想使用 has_many 方法进行排序，并且想要添加计算属性，请考虑使用[jbuilder](https://github.com/rails/jbuilder)并创建视图来显示 json。这是很好地解释它[的railscast 。](http://railscasts.com/episodes/320-jbuilder)

# c++ - 如何在字符串列表中找到匹配的字符串

> ID：14284444
> 
> 赞同：1
> 
> 时间：2013-01-11T18:29:59.117
> 
> 标签：c++

我正在学习 c++ 并想知道执行以下操作的最佳或最惯用的方法是什么。我有一个已知接受字符串的列表，这些字符串对于程序来说是不变的。我想知道提供给函数的字符串是否在我接受的字符串列表中。我想出了：

```
bool match(const char* foo, const char* bar) {
    return strcmp(foo, bar) == 0;
}

bool thingIsValid(const char* thing) {
    return match("foo", thing) || match("bar", thing) || match("baz", thing);
}

...
thingIsValid(someArg.c_str());
... 
```

这种方法对我来说似乎更像是 C 习语。在其他语言中，我可能只会有一个列表并在该列表上执行 .contains(thing) 。人们通常如何在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:42:18.197

现在最好的方法可能是使用无序集：

```
std::unordered_set<std::string> ValidValues {"one", "two", "three"};

if( ValidValues.find( testString ) == ValidValues.end() ) {
    // String is not valid...
} 
```

这里唯一真正的缺点是您不能简单地在可执行映像中布置有效字符串。（设置集合需要初始化代码和堆分配。）但这对于绝大多数应用程序来说并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:36:15.423

一种可能的方法：

```
bool thingIsValid(const std::string &thing) {
  static const std::vector<std::string> validValues {"foo", "bar", "baz"};
  return std::find(validValues.begin(), validValues.end(), thing) != validValues.end();
} 
```

上面的代码使用 C++11 列表初始化来创建`vector`. 如果您没有 C++11，则必须使用`push_back()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T18:33:38.183

`std::string::find`就是你要找的。 [参考](http://www.cplusplus.com/reference/string/string/find/)

# python - 究竟什么是“无效语法”，为什么我一直在 Python 中得到它？

> ID：14284446
> 
> 赞同：0
> 
> 时间：2013-01-11T18:30:16.637
> 
> 标签：python, python-3.x

我正在尝试这段代码，但我一直遇到问题。我不断收到“无效语法”消息，它突出显示“maracs”作为语法错误。我用几个不存在的单词替换了它并修改了代码，但它仍然给我同样的错误。是的，我的变量是随机词。另外，我真的需要简单的答案，因为我几乎无法理解我在互联网上找到的所有信息。

```
start = input("On what day will you be leaving? (1 to 7 representing Monday to Sunday respectively.)"
maracs = input("How many days will your stay be?")
pooper = int(start) + int(maracs)
lob = pooper % 7
if lob = 0:
 print("You will arrive on Day 7 of the week of your arrival.")
else
 print("You will arrive on Day "lob "of the week of your arrival.") 
```

另外，我还有另一个问题。当我尝试其他代码时，我不断收到“NameError”。请帮助以简单的方式定义“NameError”。

```
a = All
b = work
d = no
e = play
f = makes
g = Jack
h = a
i = dull
j = boy

print(a, b, "and", d, e, f, g, h, i, j) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T18:31:32.360

您忘记了前一行的右括号：

```
start = input("On what day will you be leaving? (1 to 7 representing Monday to Sunday respectively.)" 
```

请注意，结束引号`)` *后没有。*由于 python 允许您在使用括号时将多行连接在一起，因此解析器直到下一行才知道有什么问题，您会得到 SyntaxError，因为后面的内容没有意义。

至于您的第二个示例，您需要在字符串周围加上引号，`All`不是字符串而是变量，并且您没有定义`All`：

```
>>> a = All
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'All' is not defined
>>> a ='All'
>>> a
'All' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:39:54.170

您没有关闭第一行中的括号（括号）：

您必须用括号结束函数。喜欢`input('something')`。你所做的是：`input("On what day will you be leaving..."`<-- 你忘记了右括号

```
start = input("On what day will you be leaving? (1 to 7 representing Monday to Sunday respectively.)") 
```

编辑：并且您在第二个代码中出现名称错误，因为您正在尝试打印具有单词的变量。您需要将它们放在引号中，例如`" "`or `' '`。当您在没有`" "`Python 的情况下编写它们时，会查找具有该名称的函数/关键字。例如；`a = "All"`

# javascript - 单击触发器时打开和关闭同级 div

> ID：14284449
> 
> 赞同：0
> 
> 时间：2013-01-11T18:30:27.053
> 
> 标签：javascript, jquery

我试图让用户单击`[+]`触发器并打开和关闭它的兄弟 div 以显示该主题的信息。

为什么找不到兄弟姐妹？

```
$('.moreInfo').hide();
$('a.triggerButton').click(function(){
  var $this = $('a.triggerButton');
  $this.find().siblings('.moreInfo').slideToggle('fast');
}); 
```

我在[这里做了一个小提琴](http://jsfiddle.net/JFw9g/8/)。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:31:53.220

因为首先您应该解决`this`锚元素，其次要摆脱无用的`.find()`：

```
$("a.triggerButton").click(function() {
    $(this).siblings(".moreInfo").slideToggle("fast");
}); 
```

**演示：http:** [//jsfiddle.net/JFw9g/9/](http://jsfiddle.net/JFw9g/9/)

# c# - WPF xaml 文件中另一个项目中的引用名称空间

> ID：14284450
> 
> 赞同：2
> 
> 时间：2013-01-11T18:30:28.407
> 
> 标签：c#, wpf, namespaces, wpf-controls

我正在引用另一个项目的命名空间（所有模型所在的类库）。

如相关问题中所述，他们通过将程序集也添加到 .xaml 文件来解决问题。但这对我不起作用。这就是我发帖的原因。

我有2个项目。

1.  WPF 项目本身。
2.  类库（这有所有的视图模型）

WPF项目有对类库的引用。（应该在WPF项目的bin中创建这个类库的dll文件）

我想引用类库中的模型。所以，我做了如下。

```
 <UserControl x:Class="WPFApplication.Views.SalesScreen"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:productListViewModel="clr-namespace: WPFApplication.CommonInterface.Shared.ViewModels; assembly=WPFApplication.CommonInterface"
             mc:Ignorable="d" 
             d:DesignHeight="820" d:DesignWidth="1280" Loaded="PlaneLoaded">....
....
<productListViewModel:ProductListVM x:Key="ProductsListVMC"/>... 
```

但是问题仍然存在，这个`ProductListVM`类（模型）存在于`WPFApplication.CommonInterface.Shared.ViewModels`名称空间中，它也存在`public`。:)

错误说，

```
The name "ProductListVM" does not exist in the namespace "clr-namespace:WPFApplication.CommonInterface.Shared.ViewModels; assembly=WPFApplication.CommonInterface". 
```

我还尝试单独构建类库并将dll文件手动添加到WPF项目中`bin/debug`并构建它。但问题仍然存在。

错误列表中还有另一个错误。

```
Unknown build error, ''clr-namespace:WPFApplication.CommonInterface.Shared.ViewModels; assembly=POS.WPFApplication.CommonInterface' mapping URI is not valid. Line 7 Position 14.'  D:\Dev\WPFApplication\Views\POSViews\SalesScreen.xaml

Error   1   The URI "clr-namespace:WPFApplication.CommonInterface.Shared.ViewModels; assembly=WPFApplication.CommonInterface" is not a valid namespace identifier.  D:\Dev\WPFApplication\Views\POSViews\SalesScreen.xaml 
```

由于我从类模型本身复制了命名空间，因此不会出现拼写错误（99%），

你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:40:57.990

当您想在 WPF 项目的 XAML 文件之一中从另一个项目中引用时，请**注意以下事项。**

在我的问题中，当我删除它们之间的空格时，如下所示`[This is the space]`。

`xmlns:productListViewModel="clr-namespace: WPFApplication.CommonInterface.Shared.ViewModels;[This is the space]ssembly=WPFApplication.CommonInterface"`

它奏效了:)

PS：我在VS2012工作

我在这上面浪费了很多时间。:(

# javascript - 为什么javascript会增加我的号码？

> ID：14284452
> 
> 赞同：1
> 
> 时间：2013-01-11T18:30:36.677
> 
> 标签：javascript

```
<span id="9460116557269599" onclick="getdata(6557269599,9460116557269599)"> More...</span>

function getdata(tn,x){
alert(x); 
} 
```

为什么 9460116557269600 作为 x 接收。

应该是 9460116557269599。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T18:34:24.277

JavaScript 中的所有数字都是浮点数，9460116557269599.0==9460116557269600.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:32:57.027

您正在调用 function `getdata`，而您向我们展示的函数代码是 for `geth20`，因此很明显代码在函数中被更改了`getdata`。

编辑：既然您已经编辑了代码，Anton Kovalenko 的回答绝对是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:32:16.513

`geth20`应该`getdata`

[jsBin 演示](http://jsbin.com/uqazok/1/edit)

```
function getdata(tn,x){
   alert(x);    // 9460116557269599
} 
```

# oracle - 使用 Win32:ODBC 执行 Oracle 存储过程

> ID：14284455
> 
> 赞同：0
> 
> 时间：2013-01-11T18:30:37.893
> 
> 标签：oracle, perl, odbc

我正在使用 Perl 5，版本 14。 Win32::ODBC 是 VERSION = '0.034'; 和 Oracle 作为数据库。

我可以通过以下代码使用“emp_id，emp_name from emp”之类的查询从数据库中检索信息

```
use Win32::ODBC;

$db= new Win32::ODBC("DSN=datasourcename;UID=username;PWD=passwrd") 
        || die "Error: " . Win32::ODBC::Error();

$db->Sql("SELECT emp_Id, emp_name, salary FROM Sample.Emp");

while($db->FetchRow())
{
@values = $db->Data; 
print @values;
}
$db->Close(); 
```

我喜欢使用存储过程，而不是在 Perl 程序中使用查询。我创建了一个名为`sp_rank`.

```
PROCEDURE sp_rank(p_cursorVar out CursorType) 
is
begin 
    open  p_cursorVar for
    select emp_id, emp_name from emp;

End sp_rank; 
```

我想知道如何在 Perl 中使用存储过程并检索数据。

感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:08:34.213

除了使用 Win32::ODBC，您还可以使用[DBI](http://search.cpan.org/~timb/DBI-1.623/DBI.pm)模块。您还需要[Oracle DB 接口](http://search.cpan.org/~pythian/DBD-Oracle-1.56/lib/DBD/Oracle.pm)

您的脚本可能如下所示：

```
#!/usr/bin/perl

use strict;
use warnings;
use DBI;

my $datasource = "datasourcename";
my $username = "foobar";
my $password = "secret";
# connect to your database with a database handle
my $dbh = DBI->connect("DBI:Oracle:$datasource",$username,$password) or die $DBI::errstr();
# create a statement handle for database interaction
my $sth = $dbh->prepare("SELECT emp_Id, emp_name, salary FROM Sample.Emp");
$sth->execute();
# fetch the rows and print them
while($sth->fetchrow_arrayref()){
    @values = @$_; 
    print @values;
}
# never forget to close your statement handle
$sth->finish();

# using your stored procedure
# overwrite your finished statement handle with a new one
$sth = $dbh->prepare("sp_rank()");
$sth->execute();
# fetch all your data into an array hashref structure. the column names in your DB are the keys in the hashref
my $data = $sth->fetchall_arrayref({});
$sth->finish();

$dbh->disconnect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:57:22.977

我的猜测是 WIN32::ODBC 不是最好的模块。我会看看 DBI 和 DBD::Oracle 模块。

查看DBD::Oracle 文档中的 DBD [::Oracle PL/SQL_Examples](http://search.cpan.org/~pythian/DBD-Oracle-1.56/lib/DBD/Oracle.pm#PL/SQL_Examples)。

# javascript - 使用输入文件 IE 提交表单

> ID：14284458
> 
> 赞同：0
> 
> 时间：2013-01-11T18:30:41.207
> 
> 标签：javascript, jquery, internet-explorer, submit, file-io

> **可能重复：**
> [在 IE8 上获取访问被拒绝错误](https://stackoverflow.com/questions/3935001/getting-access-is-denied-error-on-ie8)

我发现了一些[**关于**](https://stackoverflow.com/questions/793014/jquery-trigger-file-input)触发 a`<input type='file' />`提交表单的问题。所有这一切都是因为我需要一个自定义输入文件。

[**用这个例子**](http://jsfiddle.net/DSARd/234/)做一些测试，我发现如果我**没有**在输入文件中放入一个提交表单的触发器`name`，这个问题只发生在**IE**中。

那么，我如何使用 a 提交没有名称的图像`form`，这可以使用 jquery 吗？

我认为解决方案只是浏览器！IE

有没有其他提交方式？

**js：**

```
$(".some-button").click(function() {
   $("#test").click();
})

$('#test').change(function() {
   $('#test_form').submit();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:46:30.343

[http://jsfiddle.net/DSARd/241/](http://jsfiddle.net/DSARd/241/)

通过设置延迟，我能够让它在 IE9 中工作，通过`setTimeout`. 我没有在其他浏览器上对此进行测试，但是当您在其他浏览器中使用它时，如果`setTimeout`在这些浏览器中没有帮助，您可以随时进行浏览器嗅探（当然，jquery 有）来执行适当的提交方法。

# svn - 从另一个分支合并的修订版上的 svn diff

> ID：14284461
> 
> 赞同：0
> 
> 时间：2013-01-11T18:30:58.363
> 
> 标签：svn

我有一个分支，项目分支，我完成并合并回主干。

现在我再次在主干中工作，我希望看到我在项目分支上所做的修订的更改。我可以使用 -g 在日志中查看这些修订，但是当我对有问题的修订执行 diff -c 时，它会显示为空。有没有办法从主干看到这个版本的差异？还是我必须专门在项目分支上运行差异？

编辑：好的，我可以 diff -c 在我实际将项目分支合并到主干的版本上。但这比我有兴趣查看的内容要多得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:07:13.057

在工作副本中调用以下命令。`^/`是当前存储库根目录的快捷方式，因此差异不会被截断到当前工作目录。

```
svn diff -c 42 ^/ 
```

# mysql - 获取订阅者超过 x 的博客数量

> ID：14284464
> 
> 赞同：1
> 
> 时间：2013-01-11T18:31:07.130
> 
> 标签：mysql, sql, count, group-by, having-clause

所以我有一个博客列表和一个订阅记录列表，用于跟踪哪些用户订阅了哪些博客。我想知道至少有两个人订阅的博客总数。以下是给定表的列表：

```
CREATE TABLE IF NOT EXISTS `blogs` (
    `id` int(11) NOT NULL,
    `name` varchar(255),
    `user_id` int(11)
);

CREATE TABLE IF NOT EXISTS `subscribers` (
   `user_id` int(11) NOT NULL,
   `blog_id` int(11) NOT NULL,
); 
```

我已经尝试了一些方法来仅使用一个查询来获取原始数字，因为我没有在 PHP 中进行处理来解决这个问题。以下是我的一些尝试，但没有奏效：

```
#This was my attempt to just count the results of a subquery on the subscribers table (FAILED)
SELECT COUNT(*) FROM (SELECT COUNT(*) as subs_count FROM `subscribes` WHERE subs_count > 1) AS dummy_table WHERE 1;

#This was my attempt to produce a count of the number of subscribers and count that (FAILED)
SELECT COUNT(*) FROM `subscribes` WHERE count(*) >= 2 GROUP BY blog_id;

#I'm sure of how to get the number of subscribers to each blog irregardless of subscription count, that query looks as followed:
SELECT id, title, COUNT(*) as subs_count FROM `blogs`, `subscribers` WHERE `blogs`.`id` = `subscribers`.`blog_id` GROUP BY `blog_id` ORDER BY subs_count DESC; 
```

但是，将该查询限制为仅返回具有 2 个或更多订阅的博客，我还无法弄清楚。感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:34:54.617

使用 HAVING 子句过滤您的 GROUP BY。

```
SELECT id, title, COUNT(*) as subs_count  
FROM `blogs`, `subscribers`  
WHERE `blogs`.`id` = `subscribers`.`blog_id`
GROUP BY `blog_id`
HAVING COUNT(*) >= 2
ORDER BY subs_count DESC; 
```

# mysql - MySQL奇数表显示中的AES加密

> ID：14284466
> 
> 赞同：0
> 
> 时间：2013-01-11T18:31:19.920
> 
> 标签：mysql, aes

嗨，我的数据库中有一些 AES 加密字段，如

AES_ENCRYPT（数据，“密钥”）

但是在数据库中，它们现在看起来好像有很多问题标记等

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:51:20.110

您应该将数据存储在`VARBINARY`or`BLOB`列中。通过使用文本列，客户端（有时可能是数据库）正在尝试将二进制非文本数据转换为文本。问号是二进制数据与文本字符不匹配的结果。

# django - 跨外键的 Django 查询

> ID：14284469
> 
> 赞同：1
> 
> 时间：2013-01-11T18:31:42.980
> 
> 标签：django, django-queryset

我有以下型号：

```
class Collection(models.Model):
    # some fields here ...

class Entry(models.Model):
    collection = models.ForeignKey(Collection, reverse_name="entries")
    start_time = models.DateTimeField()
    end_time = models.DateTimeField() 
```

现在我想查询所有`Collection`至少有一个`Entry`关联的 s（我认为这很古怪）：

```
collections_qs = Collection.objects.annotate(
    entry_count=Count('entries')
).filter(entry_count__gt=0) 
```

效果很好。但我想将此查询与两个`datetime`s`start`和`end`. 我想出的是：

```
if start:
    collections_qs = collections_qs.filter(entries__start_time__gte=start)
if end:
    collections_qs = collections_qs.filter(entriess__end_time__lte=end) 
```

但这只是重新排列返回`Collection`的 s 的顺序而不是内容。如何实现日期/时间搜索（最好只使用一个查询）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:32:18.957

对于反向 FK（以及 ManyToMany 字段），两者之间存在差异

`.filter(a=b, x=y)`和`.filter(a=b).filter(x=y)`（见[文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#spanning-multi-valued-relationships)）。

当您同时拥有`start`和`end`条件时，您需要的是`filter(.,.)`能够让您获得`Collections`至少具有`Entry`验证这两个条件的条件。

此外，`Collection.objects.filter(entries__isnull=False).distinct()`似乎比`.annotate(entry_count=Count('entries')).filter(entry_count__gt=0)`.

最后，当您至少有一个条件时`entries`，您不需要任何过滤器来检查此类条目是否存在。

# asp.net - 如何从 CSHTML 页面调用 SQL Server 2008 存储过程

> ID：14284470
> 
> 赞同：2
> 
> 时间：2013-01-11T18:31:45.203
> 
> 标签：asp.net, razor, webmatrix

从这个问题您可能会意识到我对此并不十分精通。这实际上是我的第一次。

我有一个 HTML 页面，其中包含一个要求输入电话号码的表单。当用户单击提交按钮时，它会转到一个 CSHTML 页面，该页面通过执行以下操作从表单中获取电话号码：

```
@{
string pn = Request.Form["pn"]
} 
```

然后它必须以该值 ( `pn`) 作为参数调用存储过程。

存储过程名称：`sp_AddPNtoDNC`

服务器：`SqlSrv`

用户名：`insusr`

私服：`whatever`

请不要以为我什么都知道！

哦，还有一件事。我正在从最近安装的 WebMatrix 中完成所有这些工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:28:28.147

如果您想以“WebMatrix 方式”执行此操作，您将使用数据库助手。

首先，您需要在 web.config 文件中添加一个连接字符串。

```
<configuration>
    <connectionStrings>
        <add name="myConnection" connectionString="Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;" providerName="System.Data.SqlClient" />
    </connectionStrings>
</configuration> 
```

然后在cshtml文件的顶部：

```
var db = Database.Open("myConnection");
db.Execute("EXEC sp_AddPNtoDNC @0", Request.Form["pn"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:35:39.060

```
conn = new SqlConnection("CONNECTION STRING");
        conn.Open();

        SqlCommand cmd  = new SqlCommand("sp_AddPNtoDNC", conn);

        cmd.CommandType = CommandType.StoredProcedure;

        cmd.Parameters.Add(new SqlParameter("@pn", pn));

        reader = cmd.ExecuteReader(); 
```

你可以尝试这样的事情。

我希望这对你有帮助。

# wix - 从 ARP 启动修复时，WiX 显示维护对话框

> ID：14284471
> 
> 赞同：0
> 
> 时间：2013-01-11T18:31:46.217
> 
> 标签：wix, windows-installer, wix3.5, wix3

从 ARP 启动修复时，是否可以通过某种方式启用 UI？不知何故，更改以完整的 UI 运行，而修复仅以最小的 UI 运行。我正在使用 WiX 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:06:24.363

您可以使用[ARPNOREPAIR 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367592%28v=vs.85%29.aspx)禁用修复按钮并强制用户选择更改。他们可以从那里进行更改、修复或删除。MSI 和 ARP 协同工作，为修复和删除提供基本的 UI 体验，除了我刚才提到的之外，没有任何更改它的选项。

# laravel - 未找到 Laravel 4 模型类

> ID：14284472
> 
> 赞同：8
> 
> 时间：2013-01-11T18:31:47.940
> 
> 标签：laravel, laravel-4

我刚刚在 Laravel 4 中创建了一个简单的应用程序，当我创建一个模型时，我得到一个找不到它的异常。

```
// /app/models/Worker.php:
<?php

class Worker extends Eloquent {} 
```

然后在控制器中

```
var_dump(Worker::find(1)); 
```

这给了我错误：找不到“工人”类。我究竟做错了什么？这曾经在 Laravel 3 中有效，并且还观看了截屏视频，这似乎应该有效。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-11T18:42:37.803

每当您在 L4 中创建新的类文件时，请运行此命令。

```
php composer dump-autoload 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-28T08:57:48.710

我认为有两个命令可以启动自动加载：

```
$ composer dump-autoload 
```

和

```
$ php artisan dump-autoload 
```

似乎 composer dump-autoload 是让 composer 创建在 composer.json 文件中定义的自动加载。并且 php artisan dump-autoload 将所有 composer dump-autoload（也来自供应商和工作台）粘合在一起。

# php - CodeIgniter 在收到 Controller 的请求后显示 div

> ID：14284474
> 
> 赞同：1
> 
> 时间：2013-01-11T18:31:49.067
> 
> 标签：php, jquery, css, ajax, codeigniter

我想`div`在我的视图中显示一个特定的类......但首先我必须检查特定数据是否通过 ajax 成功输入到数据库中，如果没有，那么其他潜水错误类将在上面出现一段时间然后隐藏。

这是我的观点 JavaScript 代码。在这里，如果事件成功发生，我将弹出一个对话框，我想将其转换为 div 类，如果发生了某些事情，则“div 成功消息”否则 div 失败消息。我想我必须从控制器传递一个特定的参数来查看，但我不知道该怎么做。

```
 <script type="text/javascript">
          $('#btn').click(function() { 

var item_name = $('#item_name').val();
var cat_id = $('#cat_id').val();

if (!item_name || item_name == 'Name') {
    alert('Please enter Category Name');
    return false;
}

var form_data = {
        item_name: $('#item_name').val(),
        cat_id:    $('#cat_id').val(),
    ajax: '1'       

};

$.ajax({
    url: "<?php echo site_url('itemsController/additems'); ?>",
    type: 'POST',
    data: form_data,
    success: function(msg) {
        //$('#message').html(msg);

        alert("items added successfully");
          $('#item_name').val("");

    }
});

return false;
     });

    </script> 
```

这是我的控制器

```
function additems(){

    //getting parameters from view 
    $data = array(
            'item_name' => $this->input->post('item_name'),
            'cat_id' => $this->input->post('cat_id')

    );

    $is_ajax = $this->input->post('ajax'); //or use this line
    //$this->input->is_ajax_request();

    $this->load->model('itemsModel'); 
    $query = $this->itemsModel->addItemstoDB($data);

          if ($query && $is_ajax){             //if the user c validated
        //data variable is created becx we want to put username in session

         $page['main_content'] = 'itemsView';

         $this->load->view('dashboardTemplate/template',$page);

    }
    else
     {
        echo "not added";
    }
    }

     } 
```

模型

```
 class ItemsModel extends CI_Model {

public function addItemstoDB($data){

    $successfull = $this->db->insert('item',$data);

    if ($successfull){
        return true;
    }else{
        return false;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:59:39.553

这根本不是在控制器中处理 ajax 的方法：

首先，我将假设您的模型`true`在插入时返回，`false`如果没有则返回：

你的控制器：

```
function additems(){
//your processing goes here.
    $result = array();
    $this->load->model('itemsModel'); 
    $query = $this->itemsModel->addItemstoDB($data);
    //var_dump($query); the results will be desplayed either on your page or you can see it using firebug in firefox
    if ($query ){  //&& any other condition
        $result['res'] = 1;//process successful - replace 1 with any message
    }
    else
     {
        $result['res'] = 0;//process failed - replace 0 with any message
     }
       echo json_encode($result);//at the end of the function.
    } 
```

然后你的ajax部分：

```
$.ajax({
    url: "<?php echo site_url('itemsController/additems'); ?>",
    type: 'POST',
    data: form_data,
    dataType: 'json',
    success: function(msg) {
        if(msg.res == 1)
        {
          $("your div").removeClass("error").addClass("ok");
        }
        else{
          $("your div").removeClass("ok").addClass("error");               
          }

    }
}); 
```

# python - 每次更新对象时烧瓶 sqlalchemy 执行方法

> ID：14284479
> 
> 赞同：0
> 
> 时间：2013-01-11T18:32:07.010
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

每次更新类成员时执行的方法名称是什么？

例如，在实例化对象时运行**init ：**

```
class Foo(db.Model)
    id = db.Column(db.Integer, primary_key=True)
    description = db.Column(db.String(50))

    def __init__(self, description):
        self.description = description 
```

我想向这个类添加一个方法，该方法在我每次更新 Foo 对象时运行。

在阅读了这里的python类之后：

[http://www.rafekettler.com/magicmethods.html](http://www.rafekettler.com/magicmethods.html)

我认为我正在寻找的方法如下所示（但还没有得到它的工作）：

```
class Foo(db.Model)
    id = db.Column(db.Integer, primary_key=True)
    description = db.Column(db.String(50))

    def __init__(self, description):
        self.description = description

    def __call__(self, description):
        print 'obj is getting updated!'
        self.description = description 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:20:35.320

`__call__`当您想让对象的实例可调用时使用，就像函数一样：

```
class Foo(object):
    def __init__(self, foo):
        self.foo = foo

    def __call__(self):
        return 'foo is {}!'.format(self.foo)

foo = Foo('bar')
print foo()    # Note that we're calling instance of Foo as if it was a function. 
```

您可能想要的是`__setattr__`，当将值分配给对象的属性时调用它：

```
class Foo(db.Model):
    # ...

    def __setattr__(self, name, value):
        # Call the parent class method first.
        super(Foo, self).__setattr__(name, value)
        print 'Value {!r} was assigned to attribute {}'.format(value, name) 
```

# javascript - 处理 JQuery 删除事件

> ID：14284480
> 
> 赞同：0
> 
> 时间：2013-01-11T18:32:06.777
> 
> 标签：javascript, jquery, events

所以我有一个自定义加载动画，它使用模态来阻止 UI。我还使用 jquery 对话框来通知用户确认或某些事件。

我遇到的问题是我需要在他们单击 jquery 对话框上的“确认”按钮后立即执行 ajax 请求，每当我执行任何 ajax 请求时，我都会启动加载动画。但是，当我销毁并删除对话框并运行 ajax 请求时，事件冒泡正在以一种搞砸的方式发生。即使我在提交事务之前有 .dialog("destroy").remove() ，它也会在事务代码发生之后进行销毁和删除。当它这样做时，它会删除我在屏幕上的所有模式，基本上关闭我的加载动画并允许用户做他们想做的任何事情。

我放了一个可以工作的计时器，但我不喜欢用计时器来处理这个问题。我想知道是否有其他方法可以处理这个问题？

我还要补充一点，我支持 ie8。

代码有点无关紧要，因为根本问题是进行销毁和删除似乎被放在事件队列的底部，但这里是要点：

```
var elem = $("#" + ctx.id);
var button = $("#btn-confirm");
button.bind("click", function() {
     elem.dialog("destroy").remove();
     validateEntry = ValidateEntry.getInstance();
     validateEntry.callback = new ValidateEntryHandler(this.content);
     validateEntry.submit();
} 
```

……

```
// There is inheritance for the transaction class for each service.
submit = function() {
app.loadAnim.start();
    $.ajax({
        type: 'POST',
        url: this.getApi_path(),
        data: req, 
        contentType: 'application/xml; charset=utf-8',
        dataType: "xml",
        async: ctx.async,
        timeout: ctx.getService_timeout(),
        success: function(xml)
        {
            if(typeof ctx.returnXML === "undefined"){
                 ctx.submitHandler(req, JsonixUtil.jsonixUnmarshaller(xml, ctx.jsonixKey));
            }
            else{
                ctx.submitHandler(req, xml);
            }        
        },
        error: function(response, strError)
        {
            ctx.callback.onFailure(response);
        }
    });
} 
```

……

```
//Load animation start code
start: function(dotDelay, textDelay){
    //set array of images         
    var ss = $('.sliding-dots').children('img');         
    var ssize = ss.size();
    var anim = this;
    if(!this.isShowing){
        this.isShowing = true;
        this.dotTimer = setInterval(function() {                
        for(var i = 0; i < anim.dots.length; i++){
            anim.alpha = 1 - Math.abs(anim.currImg-i)*.25;
            anim.alpha = (anim.alpha > 0) ? anim.alpha : 0;
                $(ss[i]).css('opacity',anim.alpha);
            }
        anim.currImg = (anim.currImg == anim.dots.length-1) ? 0 : anim.currImg+1;
    }, this.dotDelay);
    $('.load-animation').fadeIn('slow');
    $('.load-animation .text-body').css({opacity: 0}).delay(this.textDelay).animate({opacity: 1}, 'slow'); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:38:07.350

当您的 ajax 调用返回时，您需要在回调中执行销毁/删除。例如

```
$.ajax('/some/url')
    .done(function(response){
        $dialog.dialog('destroy').remove();
    }); 
```

# c# - 带有 lambda 和 MySQL 的简单 EntityFramework 抛出异常？

> ID：14284484
> 
> 赞同：1
> 
> 时间：2013-01-11T18:32:18.353
> 
> 标签：c#, .net, mysql, entity-framework

我正在使用 EntityFramework 4 从 MySQL 数据库中删除一些记录。这是我的代码：

```
using (Entities context = new Entities())
                {
                    foreach (games_designer_binder binder in context.games_designer_binder.Where(c => c.gameId == inGameId))
                        context.games_designer_binder.DeleteObject(binder);

                    context.SaveChanges();
                    return true;
                } 
```

这会引发以下异常：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '(SELECT\n games_designer_binder.gameId, games_designer_binder. at line 1 附近使用正确的语法

为什么？我需要什么来解决这个问题？

**编辑：**

这很好用：

```
context.games_designer_binder.Where(c=> c.designerId == 22 && c.gameId == 1276).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T16:33:41.520

我很确定在迭代集合时不能删除实体。

尝试这个 ：

```
using (Entities context = new Entities())
    {
        var binders = context.games_designer_binder.Where(c => c.gameId == inGameId).ToList();

        foreach (var binder in binders)
            context.games_designer_binder.DeleteObject(binder);

        context.SaveChanges();
        return true;
    } 
```

注意：我建议您更改 games_designer_binder 集合以反映它实际上是模型活页夹上的集合，因此它以 S 结尾，例如：games_designer_binderS，因为您可以将集合和实体本身弄乱。

# ios - AS3 Sticksports Flurry 分析

> ID：14284485
> 
> 赞同：1
> 
> 时间：2013-01-11T18:32:24.633
> 
> 标签：ios, actionscript-3, flash, actionscript, flurry

我正在为一个应用程序使用 Stick Sports Flurry Native 扩展是 AS3。

我有主要的工作和事件注册，但在设置用户年龄和用户性别时卡住了。

只是想知道是否有人熟悉如何做到这一点

提前致谢

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:38:15.523

查看代码，您需要做的就是调用正确的函数。它们是静态的，所以也要使用类名。

```
 /**
     * Set user's id in your system.
     */
    Flurry.setUserId(id)  // String

    /**
     * Set user's age in years
     */
    Flurry.setUserAge(age) // int

    /**
     * Set user's gender ("m" or "f")
     */
    Flurry.setUserGender( gender ) // String 
```

# ruby-on-rails - Rails 3路由错误未初始化常量ApplicationController在Hello World上

> ID：14284487
> 
> 赞同：0
> 
> 时间：2013-01-11T18:32:49.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

在这里。所以我是 Rails 3 的新手，试图执行一个简单的 hello world com 一个 sql lite db，但我一直得到一个

> 未初始化的常量 ApplicationController

我的路线是：

```
LoadTest::Application.routes.draw do

  match '/hello' => 'hello#hello' , :as => :hello
  match "/erb_sql" => "hello#hellodb", :as => :erb_sql

end 
```

我的控制器：

```
class HelloController < ApplicationController
    def hello
        render :text => "Hello World!"
    end
    def hellodb
        @data = Hello.all
    end
end 
```

和我的观点（hellodb.html.erb）：

```
<table border="1">
        <% for row in @data %>
            <tr><td><%=h row.id %></td><td><%=h row.data %></td></tr>
        <% end %>
</table> 
```

和我的模型：

```
class Hello < ActiveRecord::Base
end 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:17:52.027

你必须有`application_controller.rb`。那是基本控制器，其他控制器继承自它。

我不知道您是如何创建应用程序的，因为正确的方法是`rails new application_name`在控制台中运行。`application_controller.rb`然后将在 application_name 文件夹中创建包括在内的整个结构。

# python - 如何在 Tkinter 中更改文本光标颜色？

> ID：14284492
> 
> 赞同：21
> 
> 时间：2013-01-11T18:32:59.147
> 
> 标签：python, tkinter, colors, text-cursor

我有一个深色背景的文本小部件，我看不到光标的位置。有没有办法改变（闪烁的）文本光标的颜色？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-11T18:39:07.110

您可以`insertbackground`将文本小部件的选项更改为您想要的任何内容。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-11T18:39:11.823

Tk 中文本光标颜色的选项是`-insertbackground`.

```
textWidget.config(insertbackground=...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-31T02:01:32.633

对于 python 版本 3

```
import tkinter as tk

textfield = tk.Entry(root)
textfield.configure(bg="#1C6C0B", insertbackground='white') 
```

# mysql - MySQL 错误 1264：列的值超出范围

> ID：14284494
> 
> 赞同：98
> 
> 时间：2013-01-11T18:33:09.523
> 
> 标签：mysql, sql, insert, integer

当我`SET`像这样在 MySQL 中的表中进行 cust_fax 时：

```
cust_fax integer(10) NOT NULL, 
```

然后我插入这样的值：

```
INSERT INTO database values ('3172978990'); 
```

但后来它说

> 列的“错误 1264”值不足

我想知道错误在哪里？我的一套？或其他？

任何答案将不胜感激！

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-01-11T18:37:10.487

值 3172978990 大于 2147483647（最大值），`INT`因此出现错误。MySQL 整数类型及其范围在[此处列出](https://dev.mysql.com/doc/refman/8.0/en/integer-types.html)。

另请注意，`(10)`in`INT(10)`没有定义整数的“大小”。它指定列的[显示宽度](https://dev.mysql.com/doc/refman/8.0/en/numeric-type-attributes.html)。此信息仅供参考。

要修复错误，请将您的数据类型更改为`VARCHAR`. 电话和传真号码应存储为字符串。请参阅[此讨论](https://stackoverflow.com/q/75105/87015)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-11-23T15:11:20.203

您还可以将数据类型更改为 bigInt ，它将解决您的问题，除非需要，否则将整数保留为字符串不是一个好习惯。:)

```
ALTER TABLE T_PERSON MODIFY mobile_no BIGINT; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-11T18:39:39.687

您超出了**int**数据类型的长度。您可以使用**UNSIGNED**属性来支持该值。

**SIGNED INT**可以支持到**2147483647**，而**UNSIGNED INT**允许比这翻倍。在此之后，您仍然希望保存数据而不是使用长度为 10 的**CHAR**或**VARCHAR**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-03-17T00:37:37.860

## tl;博士

确保您`AUTO_INCREMENT`没有超出范围。在这种情况下，为它设置一个新值：

```
ALTER TABLE table_name AUTO_INCREMENT=100 -- Change 100 to the desired number 
```

## 解释

`AUTO_INCREMENT`可以包含大于数据类型允许的最大值的数字。如果您填满了一张随后清空但`AUTO_INCREMENT`保持不变的桌子，则可能会发生这种情况，但也可能有不同的原因。在这种情况下，新条目的 id 将超出范围。

## 解决方案

如果这是您的问题的原因，您可以通过将其设置`AUTO_INCREMENT`为比最新行的 id 大一来修复它。因此，如果您的最新行的 id 为 100，则：

```
ALTER TABLE table_name AUTO_INCREMENT=101 
```

如果您想检查`AUTO_INCREMENT`的当前值，请[使用以下命令](https://stackoverflow.com/a/15821543/1494454)：

```
SELECT `AUTO_INCREMENT`
FROM  INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'DatabaseName'
AND   TABLE_NAME   = 'TableName'; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-05T02:54:06.973

与：

```
ALTER TABLE `table` CHANGE `cust_fax` `cust_fax` VARCHAR(60) NULL DEFAULT NULL; 
```

# ruby-on-rails - 在 Rails 升级到 3.2.11 后 Heroku 应用程序无法运行

> ID：14284498
> 
> 赞同：0
> 
> 时间：2013-01-11T18:33:14.610
> 
> 标签：ruby-on-rails, heroku, twitter-bootstrap-rails

我在`Heroku logs`. 我已经将 rails 版本更新为`3.2.11`然后更新了，`bootstrap`因为`Heroku`人们已经提到了`Rails 3.2.10`. 错误如下。

```
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:51:in `initialize'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:40:in `eval'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:51:in `instance_eval'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:40:in `parse_file'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
2013-01-11T18:07:53+00:00 app[web.1]:   from script/rails:6:in `require'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
2013-01-11T18:07:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
 2013-01-11T18:07:53+00:00 app[web.1]:  from /app/config.ru:in `new'
 2013-01-11T18:07:53+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:304:in `wrapped_app'
 2013-01-11T18:07:53+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:254:in `start'
 2013-01-11T18:07:53+00:00 app[web.1]:  from script/rails:6:in `<main>'
 2013-01-11T18:07:53+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:200:in `app'
 2013-01-11T18:07:54+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
 2013-01-11T18:07:54+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
 2013-01-11T18:07:54+00:00 heroku[web.1]: Process exited with status 1
 2013-01-11T18:07:54+00:00 heroku[web.1]: State changed from starting to crashed
 2013-01-11T18:07:54+00:00 heroku[web.1]: State changed from crashed to starting
 2013-01-11T18:07:56+00:00 heroku[web.1]: Process exited with status 137
 2013-01-11T18:07:56+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 12676`
 2013-01-11T18:08:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
 2013-01-11T18:08:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
 2013-01-11T18:08:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
 2013-01-11T18:08:17+00:00 app[web.1]: => Ctrl-C to shutdown server
 2013-01-11T18:08:17+00:00 app[web.1]: => Rails 3.2.11 application starting in production on http://0.0.0.0:12676
 2013-01-11T18:08:17+00:00 app[web.1]: => Booting WEBrick
 2013-01-11T18:08:17+00:00 app[web.1]: => Call with -d to detach
 2013-01-11T18:08:17+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
 2013-01-11T18:08:20+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize': FATAL:  remaining connection slots are reserved for non-replication superuser connections (PGError)
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:326:in `initialize'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `connect'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
 2013-01-11T18:08:20+00:00 app[web.1]: Exiting
 2013-01-11T18:08:20+00:00 app[web.1]:  from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/model_schema.rb:308:in `clear_cache!'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:418:in `_run__431883729642635568__prepare__3624875479622533686__callbacks'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
 2013-01-11T18:08:20+00:00 app[web.1]:  from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `new'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:51:in `instance_eval'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:51:in `initialize'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:40:in `eval'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:40:in `parse_file'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:200:in `app'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:304:in `wrapped_app'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:254:in `start'
2013-01-11T18:08:20+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-01-11T18:08:20+00:00 app[web.1]:   from script/rails:6:in `require'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
2013-01-11T18:08:20+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
2013-01-11T18:08:22+00:00 heroku[web.1]: Process exited with status 1
2013-01-11T18:08:22+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-11T18:08:22+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=photography-ahmadhamza.herokuapp.com fwd=116.202.185.14 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-11T18:08:24+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=photography-ahmadhamza.herokuapp.com fwd=116.202.185.14 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-11T18:09:34+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=photography-ahmadhamza.herokuapp.com fwd=116.202.185.14 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-11T18:12:03+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=photography-ahmadhamza.herokuapp.com fwd=116.202.185.14 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-11T18:12:03+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=photography-ahmadhamza.herokuapp.com fwd=116.202.185.14 dyno= queue= wait= connect= service= status=503 bytes= 
```

我对此很生气。请帮忙。几分钟后，网站正在加载，但 js 无法正常工作。我正在使用根本不工作的轮播。JS 的另一部分正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:03:12.383

可能是 Heroku 还没有发布对 3.2.11 的支持

# php - 登录问题 - 没有任何数据的成功登录

> ID：14284502
> 
> 赞同：1
> 
> 时间：2013-01-11T18:33:34.067
> 
> 标签：php, login

他的以下代码有问题。出现的两条错误消息是

```
Notice: Use of undefined constant myusername - assumed 'myusername' in C:\Program Files\wamp\www\login_success.php on line 3

Deprecated: Function session_is_registered() is deprecated in C:\Program Files\wamp\www\login_success.php on line 3
Login Successful 
```

但是仍然显示登录成功，即使最初没有输入任何信息。

您在任何地方的帮助将不胜感激。

HTML

**会员登录** 用户名： 密码：    

CSS

```
<?php

$host="localhost";
$username="root";
$password="";
$db_name="Hockey Club";
$tbl_name="members";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['username'];
$mypassword=$_POST['password'];

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM members WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){

session_register("myusername");
session_register("mypassword");
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

和 - login_success.php

```
<?php
session_start();
if(!session_is_registered(myusername)){
header("location:main_login.php");
}
?>

<html>
<body>
Login Successful
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:34:32.557

```
if(!session_is_registered(myusername)){ 
```

你忘了使用引号。*请对您的代码进行基本调试。*

所以：

```
if (!session_is_registered('myusername')) { 
```

* * *

而且，正如警告所示，[`session_is_registered`](http://php.net/manual/en/function.session-is-registered.php)在您的 PHP 版本中已弃用，实际上在较新的版本中*已将其删除。**请阅读文档。*

反而：

```
if (!isset($_SESSION['myusername'])) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:38:47.703

你不**应该**使用`session_is_registered()`.

改变

```
session_register("myusername");
session_register("mypassword"); 
```

至

```
$_SESSION['myusername'] = $username;
$_SESSION['mypassword'] = $password; 
```

和

```
if(!session_is_registered(myusername)){ 
```

至

```
if(!isset($_SESSION['myusername'])) { 
```

# jquery - 渲染部分和激活模态窗口 onclick - 知道为什么这么慢吗？

> ID：14284505
> 
> 赞同：0
> 
> 时间：2013-01-11T18:33:48.043
> 
> 标签：jquery, ruby-on-rails

基本上在点击时，我在模态窗口（由 Twitter Bootstrap 提供）中呈现特定的部分窗口。但是，它随机非常慢 - 任何想法为什么或如何解决它？以下是相关的代码片段：

看法：

```
<% @utilities.each do |u| %>
<span class="util_click">
    <%= link_to u.name, { :controller => :users, :action => :show, :util_id => u.id, :rent_id => rent.id }, :remote => true %>
</span>
<% end %>

....

<div id="partialModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal Header</h3>
    </div>
    <div class="modal-body">

    <div id="editUtil"></div>

    </div>
    <div class="modal-footer">
        ...
    </div>                          

</div> 
```

Javascript：

```
$(".util_click").click(function() {
    $('#partialModal').modal("show"); 
}); 
```

控制器的相关部分：

```
 respond_to do |format|
        format.js {
          @rent = Rent.find(@current_user.id)
          @util_id = params[:util_id]
          @rent_id = params[:rent_id]
        }
    end 
```

显示.js.erb：

```
$("#editUtil").html('<%= escape_javascript(raw render :partial => "utilEdit", :locals => {:util => Utility.find(params[:util_id]), :rent_id => params[:rent_id]} ).html_safe%>'); 
```

_utilEdit.html.erb 是一种遍历集合的表单。请记住，我是一个rails dummy，有人对提高性能有任何想法吗？顺便说一句，在开发和生产模式下都是一样的。

# wcf - 是否需要 WCF DataContract 命名空间

> ID：14284515
> 
> 赞同：3
> 
> 时间：2013-01-11T18:34:27.667
> 
> 标签：wcf, datacontract

我有一个 WCF 客户端和一个 WCF 服务，

每端都有一个 DataContract。我需要命名空间来反序列化客户端上的对象。

即打击不起作用

```
[DataContract]
public class Framework
{
    [DataMember]
    public string Name { get; set; } 
} 
```

但这确实：

```
[DataContract(Namespace = "http//mysite.co.uk"]
public class Framework
{
    [DataMember]
    public string Name { get; set; } 
} 
```

为什么是这样？我原以为离开命名空间意味着它们都默认为[http://tempuri.org](http://tempuri.org)并且都可以。

需要命名空间似乎很奇怪。

有人对这种行为有解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:00:31.537

`tempuri`如您所说，它应该默认为命名空间。我已经这样做了很多次，所以我知道它有效。我的猜测是传入的数据正在使用 namespace `http//mysite.co.uk`，因此导致它失败。的名称空间`DataContract`必须与 SOAP 消息中使用的名称空间相匹配。

您是否使用程序集或发现来共享您的服务合同？也许您的合同一方面已过期并且需要刷新（通过重新运行发现或重新部署共享程序集）。

# java - 有没有办法在运行时通过 MyBatis 将对象映射到关系数据库？

> ID：14284523
> 
> 赞同：0
> 
> 时间：2013-01-11T18:35:05.200
> 
> 标签：java, orm, mybatis, persistent

我在运行时创建 Java 类及其实例（Java Compiler API），我想在程序运行时也借助 MyBatis API 将它们映射到数据库。在 MyBatis 中有没有办法做到这一点？

这非常重要，对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:38:11.993

您基本上想要干预框架的运行上下文，对其进行修改并保持上下文足够一致以使框架正确运行。考虑到 MyBatis 不是为它设计的。

答案[可能是肯定](https://stackoverflow.com/questions/13195144/can-i-use-mybatis-to-generate-dynamic-sql-without-executing-it/)的，也可能是否定的，但恐怕**找出答案的唯一方法就是尝试一下**。

不知道你在做什么，但在修补 MyBatis 之前，也许你应该考虑一下，为似乎特定的行为（MyBatis 是一个通用框架）实现一些自定义的东西是否不会少一些努力。

只是我的2美分！

# jquery - 如何使用 jQuery 创建类似倒计时的饼图？

> ID：14284524
> 
> 赞同：5
> 
> 时间：2013-01-11T18:35:04.777
> 
> 标签：jquery, canvas, html5-canvas, graphic

我正在尝试编写这样的代码-

![在此处输入图像描述](../Images/3cf33d07f0cdb7823fc5f3df05db2601.png)

我很想添加我的编码尝试，只是我真的不知道。当谷歌搜索“jQuery 倒计时”、“饼图”等内容时，我只找到插件，我想自己编写代码。我什至不确定这是否应该使用 html5 画布、jQuery 或两者兼而有之。

我的第一步应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T21:39:39.460

画一个圆圈的“馅饼”部分是一项相当简单的任务。

例如：

```
ctx.fillStyle = "#f00";
ctx.beginPath();
ctx.moveTo(50,50);
ctx.arc(50,50,50, sta, sta + 2*Math.PI*pct);
ctx.fill(); 
```

上面的代码将绘制一个半径为 50 像素的圆弧。第四个和第五个参数确定弧的开始和结束位置。在你的情况下，你想要：

```
var sta = -Math.PI/2; // this is -90 degrees (or "up") 
```

变量`pct`是要填充的圆圈的百分比。

您问题的真正目标是计时器。我创建了一个简单的 Timer 类，它的输出非常灵活：

```
function Timer(duration /* in ms */ , props) {
    this.ontick = props && typeof props.ontick === "function" ? props.ontick : function() {};
    this.onend = props && typeof props.onend === "function" ? props.onend : function() {};
    this.interval = props && typeof props.interval === "number" ? props.interval : 1000 / 10;
    this.elapsed = 0;

    var running = false,
      start, end, self = this;

    this.start = function() {
      if (running) return this;

      start = new Date().getTime();
      end = start + duration;
      tick();
      running = true;

      return this;
    };

    function tick() {
      var now = new Date().getTime();
      self.ontick.call(self);
      self.elapsed = now - start;

      if (now < end) setTimeout(tick, self.interval);
      else self.onend.call(self);
    }
  } 
```

Timer 类的非常基本的用法可能是这样的：

```
var timer = new Timer(10 * 1000, {
    ontick:function(){
        console.log(this.elapsed);
    },
    onend:function(){
        console.log('all done');
    }
}).start(); 
```

这个 Timer 实现的好处是它没有与倒计时无关的逻辑混乱，因此它非常可重用。

> 我在这里创建了您想要的输出示例：http: [//jsfiddle.net/9jZsb/6/](http://jsfiddle.net/9jZsb/6/)
> 您可以看到我正在自己创建动画，但是将其他库合并到此解决方案中应该是微不足道的来达到类似的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:46:29.293

查看 highcharts 绘图库。他们支持图表的动画渲染。他们也做饼图。 [http://www.highcharts.com/demo/dynamic-update](http://www.highcharts.com/demo/dynamic-update)

# asp.net - Asp.Net 优化捆绑失败。没有查询字符串

> ID：14284525
> 
> 赞同：2
> 
> 时间：2013-01-11T18:35:07.967
> 
> 标签：asp.net, http, optimization, umbraco

我们正在使用 4.5 中的捆绑和缩小功能来压缩我们网站上的 CSS 和 JS。我们以前使用过它，它工作正常。它在本地输出链接如下：

```
<link href="/minifiedCssHead?v=eNSlT3AA1_wMazOm7q246Ju_trcQgzpT9FIcgle6NwE1" rel="stylesheet"/> 
```

将其移动到实时服务器，它只会生成：

```
<link href="/minifiedCssHead" rel="stylesheet"/> 
```

我们对为什么它甚至不会生成查询字符串感到困惑。更别说文件了。这一切都与 Umbraco 一起运行，但这应该不是问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:26:33.107

当我将新版本的脚本和样式文件放在 Web 服务器上时，我会间歇性地遇到这个问题。回收应用程序池为我解决了这个问题。这可以使用 IIS 管理器或从命令行完成

```
%windir%\system32\inetsrv\appcmd recycle apppool /apppool.name:YourAppPool 
```

# pdf - Silverlight - 在隔离存储中打开/查看 PDF

> ID：14284528
> 
> 赞同：0
> 
> 时间：2013-01-11T18:35:15.423
> 
> 标签：pdf, silverlight-4.0, isolatedstorage, pdf-viewer

我有一个在浏览器中运行的 Silverlight 应用程序，并且在隔离存储中有几个 pdf 文件。我需要打开这些文件。可以通过下载它们并配置某些东西以默认打开 pdf 文件，或者使用一种 SilverLight PDF 查看器。

有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:14:08.493

有很多工具可用于在 Silverlight 中打开 PDF。您可以使用异步加载过程将 PDF 内容加载为字节流并将它们加载到 PDF 中。看看这个问题[Silverlight 4.0 PDF Viewer](https://stackoverflow.com/questions/2467307/silverlight-4-0-pdf-viewer)

# java - Groovy 在生成“id”XML 标记时的 MarkupBuilder 异常

> ID：14284530
> 
> 赞同：2
> 
> 时间：2013-01-11T18:35:21.097
> 
> 标签：java, xml, grails, groovy, markupbuilder

我正在尝试构建一个 XML 提要，而 Groovy 的 MarkupBuilder 让我很头疼：

```
 def newsstandFeed(def id) {
    def publication = Publication.get(id)
    def issues = issueService.getActiveIssuesForPublication(publication)
    def updateDate = DateUtil.getRFC3339DateString(publication.lastIssueUpdate)

    def writer = new StringWriter()
    writer.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n")
    def xml = new MarkupBuilder(writer)
    xml.feed('xmlns':"http://www.w3.org/2005/Atom", 'xmlns:news':"http://itunes.apple.com/2011/Newsstand") {
        updated("${updateDate}")
        issues.each { issue ->
            entry {
                id (issue.id)
                updated("${DateUtil.getRFC3339DateString(issue.lastUpdated)}")
                published("${DateUtil.getRFC3339DateString(issue.releaseDate)}")
                summary(issue.summary)
                "news:cover_art_icons" {
                    "news:cover_art_icon" (size:"SOURCE", src:"${issue.cover.remotePath}")
                }
            }
        }
    }

    return writer.toString()
} 
```

我得到这个例外：

```
Class groovy.lang.MissingMethodException 
No signature of method: java.lang.String.call() is applicable for argument types: (org.codehaus.groovy.runtime.GStringImpl) values: [CYB_001] Possible solutions: wait(), any(), wait(long), any(groovy.lang.Closure), take(int), each(groovy.lang.Closure) 
```

“CYB_001”是第一个“id”属性。

如果我将“id”重命名为“ids”或其他任何名称，它会起作用，并返回正确的 XML 文档：

```
 ....
            issues.each { issue ->
            entry {
                ids ("${issue.id}")
                ... 
```

任何想法为什么会发生这种情况，以及我如何解决这个问题？

环境是 Grails 2.1.1（我假设是 Groovy 1.8）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:01:49.693

在我看来，您的 XML 构建器正试图在环境中引用一些**String**变量。由于 groovy 构建器拦截丢失的方法调用，如果他们找到一个引用，他们将尝试应用它。以下代码可以重现您的错误：

```
def id = ""

new groovy.xml.MarkupBuilder().xml {
  id "90"
} 
```

以下是好的：

```
def ids = ""

new groovy.xml.MarkupBuilder().xml {
  id "90"
} 
```

重命名`id`变量应该可以解决问题

* * *

**更新：**

在范围内使用与变量同名的标签的另一种方法是使用（丑陋的）GString：

```
def id = ""

new groovy.xml.MarkupBuilder().xml {
  "${'id'}" "90"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-09T17:06:08.050

遇到同样的情况并与建造者一起限定它为我解决了这个问题。

```
def writer = new StringWriter()
    def builder = new MarkupBuilder(writer)
    builder.executions() {
        project.scalaVersions.each { scalaVersion ->
            def scalaMajorVer = '_' + scalaVersion.split('\\.')[0..1].join('.')
            def artifactIdStr = publication.artifactId.replaceAll(/_[0-9.]+$/, '') + scalaMajorVer

            execution() {
                builder.id(artifactIdStr) // qualify with builder to avoid collision
                phase('deploy')
                goals() { goal('deploy-file') }
                configuration() {
                    groupId(publication.groupId)
                    artifactId(artifactIdStr)
                    builder.version(project.version) // ditto.
                }
            }
        }
    } 
```

# c# - RequiredFieldValidator 限制回发

> ID：14284533
> 
> 赞同：1
> 
> 时间：2013-01-11T18:35:32.923
> 
> 标签：c#, asp.net, postback, requiredfieldvalidator

我有三个面板，用户一次切换一次。在其中一个面板中，我有一些验证器控件。现在，他们尝试提交表单数据时会弹出缺少的内容。好的。但在另一个面板上，我也有一些按钮。当按下这些按钮时，没有回发，因为另一个面板上会弹出必填字段，说明这些字段丢失。（但用户实际上并没有使用这些文本框。

这是我的代码。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Pages/Masters/LeftBar.master" AutoEventWireup="true" CodeFile="Request.aspx.cs" Inherits="Pages_Contents_Request" EnableViewState="true"  %>

<asp:Content ID="HeadContent" ContentPlaceHolderID="LeftBarHeadContent" Runat="Server">
    <link href="../StyleSheets/Content_Common.css" rel="stylesheet" type="text/css" />
    <link href="../StyleSheets/Request_Content.css" rel="stylesheet" type="text/css"/>
    <script src="../../Scripts/Contents_Common.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="TopBoxContent" ContentPlaceHolderID="TopBoxContentHolder" Runat="Server">
</asp:Content>
<asp:Content ID="MainContent" ContentPlaceHolderID="MainContentPlaceHolder" Runat="Server">
    <asp:ScriptManager ID="RequestScriptManager" runat="server"></asp:ScriptManager>
    <div class="ItemHeaderSpace">
        <div class="TitleWrapper">
            <div class="ItemHeader">
                    <div class="ItemTitle">
                        Submit your request
                    </div>
                    <div class="ItemInfo">
                    </div>
            </div>
            <div id="SocialButtonsHolder" class="SocialButtons" runat="server">
            </div>
        </div>
        <ul class="ItemProfileNav">
            <li id="SubmitTab" class="Script_Tab ItemProfileNavInactive" runat="server">Sumbit request</li>
            <li id ="CheckTab" class="Script_Tab ItemProfileNavInactive" runat="server">Check request status</li>
            <li id="ViewTab" class="Script_Tab ItemProfileNavInactive" runat="server">View all request</li>
        </ul>
    </div>
    <div class="ItemSpace">
        <div class="ItemTabContent">
            <div id="SubmitTabContent" class="Script_TabContent" runat="server">
                <asp:UpdatePanel ID="SubmitRequestUpdatePanel" runat="server">
                    <ContentTemplate>
                        <div id="MessegeBox" class="ErrorBox" style="margin-bottom: 15px;" runat="server">
                    <p>Please try to find your content on our <a href="Index.aspx" target="_blank">index page</a>. Go to that content (<a href="Index.aspx?type=psvita" target="_blank">Games</a>, <a href="Index.aspx?type=movie>" target="_blank">Movies</a>) and request from there.
                        Creating a custom request will take more time for processing.
                    </p>
                </div>
                    <table id="SubmitRequestForm" runat="server" class="DownloadInfoTable" style="width: 100%;">
                    <tr>
                        <td class="InfoField">Content Name: </td>
                        <td><asp:TextBox ID="ContentTitleTextBox" runat="server"></asp:TextBox></td>
                    </tr>
                    <tr>
                        <td class="InfoField">Content Type: </td>
                        <td>
                            <asp:DropDownList ID="ContentTypeDropDown" runat="server">
                                <asp:ListItem Selected="True" Text="PS Vita Game" Value="psvita"></asp:ListItem>
                                <asp:ListItem Selected="False" Text="PSP ISO" Value="psp"></asp:ListItem>
                                <asp:ListItem Selected="False" Text="Movie" Value="movie"></asp:ListItem>
                                <asp:ListItem Selected="False" Text="TV Show Episode" Value="episode"></asp:ListItem>
                                <asp:ListItem Selected="False" Text="TV Show" Value="tvshow"></asp:ListItem>
                            </asp:DropDownList>
                            <asp:HiddenField ID="TypeHiddenFiled" runat="server" />
                        </td>
                    </tr>
                    <tr>
                    <td class="InfoField">Your Name*: </td>
                    <td>
                        <asp:TextBox ID="NameTextBox" MaxLength="200" runat="server"></asp:TextBox><asp:RequiredFieldValidator ID="NameValidator" CssClass="ErrorBox" ControlToValidate="NameTextBox" runat="server" ErrorMessage="*"></asp:RequiredFieldValidator></td>
                    </tr>
                    <tr>
                    <td class="InfoField">Your date of birth*: </td>
                    <td>
                        <asp:DropDownList ID="YearDropdown" runat="server">
                            <asp:ListItem Selected="True" Text="Year" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:DropDownList ID="MonthDropdown" runat="server" AutoPostBack="true">
                            <asp:ListItem Selected="True" Text="Month" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:DropDownList ID="DateDropdown" runat="server">
                            <asp:ListItem Selected="True" Text="Day" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:CompareValidator ID="YearValidator" CssClass="ErrorBox" runat="server" ControlToValidate="YearDropdown" Operator="GreaterThan" ValueToCompare="0" ErrorMessage="*"></asp:CompareValidator>
                        <asp:CompareValidator ID="MonthValidator" CssClass="ErrorBox" runat="server" ControlToValidate="MonthDropdown" Operator="GreaterThan" ValueToCompare="0" ErrorMessage="*"></asp:CompareValidator>
                        <asp:CompareValidator ID="DayValidator" CssClass="ErrorBox" runat="server" ControlToValidate="DateDropdown" Operator="GreaterThan" ValueToCompare="0" ErrorMessage="*"></asp:CompareValidator>
                    </td>
                    </tr>
                    <tr>
                        <td class="InfoField">You are a: </td>
                        <td>
                            <asp:DropDownList ID="GenderDropdown" runat="server">
                                <asp:ListItem Selected="True" Text="Boy" Value="male"></asp:ListItem>
                                <asp:ListItem Selected="False" Text="Girl" Value="female"></asp:ListItem>
                                <asp:ListItem Selected="False" Text="Don't want to specify" Value="unspecified"></asp:ListItem>
                            </asp:DropDownList>
                        </td>
                    </tr>
                    <tr>
                    <td class="InfoField">Your E-mail*: </td>
                    <td>
                        <asp:TextBox ID="EmailTextBox" runat="server" MaxLength="200"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="EmailRequitedValidator" runat="server" ControlToValidate="EmailTextBox" ErrorMessage="*" CssClass="ErrorBox"></asp:RequiredFieldValidator>
                    </td>

                    </tr>
                    <tr>
                    <td class="InfoField">Your Profile Link (Optional): </td>
                    <td>
                        <asp:TextBox ID="ProfileLink" runat="server" MaxLength="500"></asp:TextBox></td>
                    </tr>
                    <tr>
                    <td class="InfoField"></td>
                    <td>
                        <asp:RegularExpressionValidator ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" ID="EmailValidator" CssClass="ErrorBox" ControlToValidate="EmailTextBox" runat="server" ErrorMessage="That's not a valid Email address."></asp:RegularExpressionValidator>
                    </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <span class="ErrorBox">All * marked fields are mandatory.</span>
                        </td>
                    </tr>
                    <tr>
                    <td class="InfoField"></td>
                    <td>
                        <asp:Button ID="SubmitRequestButton" runat="server" Text="Submit your Request" CssClass="MetroButtonText SubmitButton" /></td>
                    </tr>
                </table>
                <div class="Clearfix">

                </div>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </div>
            <div id="CheckTabContent" class="Script_TabContent" runat="server">
                <asp:UpdatePanel ID="CheckRequestPanel" runat="server">
                    <ContentTemplate>
                <table class="DownloadInfoTable" style="width: 520px;">
                    <tr>
                        <td class="InfoField">Your Request ID: </td>
                        <td>
                            <asp:TextBox ID="RequestIdTextBox" runat="server"></asp:TextBox><asp:Button ID="CheckStatusButton" runat="server" Text="Check status" CssClass="MetroButtonText" />
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField"></td>
                        <td>
                            <asp:Button ID="ForgotIDButton" CssClass="MetroButtonText" runat="server" Text="Forgot ID" />
                        </td>
                    </tr>
                </table>
                <div id="RequestCheckMessegeBox" class="ErrorBox" style="margin-bottom: 15px;" visible="false" runat="server">
                    <p>
                    </p>
                </div>
                <table id="RequestDetailsTable" class="DownloadInfoTable PopUpForm" runat="server" visible="false">
                    <tr>
                        <td class="InfoField">Hi, <asp:Label ID="RequestUserName" runat="server" Text="Label" Font-Bold="True" ForeColor="Black"></asp:Label></td>
                        <td>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Your Request ID: </td>
                        <td>
                            <asp:Label ID="RequestIdLabel" runat="server" Text="Label"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Request submission date: </td>
                        <td>
                            <asp:Label ID="RequestDateLabel" runat="server" Text="Label"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Status: </td>
                        <td>
                            <asp:Label ID="StatusLabel" runat="server" Text="Label" Font-Bold="True" Font-Italic="True"></asp:Label>
                        </td>
                    </tr>
                    <tr id="TimeRemainingRow" runat="server" visible="false">
                        <td class="InfoField">Time remaining: </td>
                        <td>
                            <asp:Label ID="TimeRemainingLabel" runat="server" Text="Label"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Resolving date: </td>
                        <td>
                            <asp:Label ID="ResolvingDate" runat="server" Text="Label"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Requested Content: </td>
                        <td>
                            <asp:Hyperlink ID="RequestContentLink" runat="server" Text="Label"></asp:Hyperlink>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Requested Content Type: </td>
                        <td>
                            <asp:Hyperlink ID="RequestedContentTypeLink" runat="server" Text="Label"></asp:Hyperlink>
                        </td>
                    </tr>
                </table>

                <table id="ForgotIDForm" class="DownloadInfoTable PopUpForm" runat="server" visible="false">
                    <tr>
                        <td class="InfoField">Your Name*: </td>
                        <td>
                            <asp:TextBox ID="ForgotIDNameTextBox" runat="server" Enabled="True" MaxLength="200"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Your Date of Birth*: </td>
                        <td>
                        <asp:DropDownList ID="ForgotIDMonthDropdown" runat="server">
                            <asp:ListItem Selected="True" Text="Month" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:DropDownList ID="ForgotIDDateDropdown" runat="server">
                            <asp:ListItem Selected="True" Text="Day" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:DropDownList ID="ForgotIDYearDropdown" runat="server">
                            <asp:ListItem Selected="True" Text="Year" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:CompareValidator ID="ForgotIdMonthVal" CssClass="ErrorBox" runat="server" ControlToValidate="ForgotIDMonthDropdown" Operator="GreaterThan" ValueToCompare="0" ErrorMessage="*"></asp:CompareValidator>
                        <asp:CompareValidator ID="ForgotIdDateVal" CssClass="ErrorBox" runat="server" ControlToValidate="ForgotIDDateDropdown" Operator="GreaterThan" ValueToCompare="0" ErrorMessage="*"></asp:CompareValidator>
                        <asp:CompareValidator ID="ForgotIdYearVal" CssClass="ErrorBox" runat="server" ControlToValidate="ForgotIDYearDropdown" Operator="GreaterThan" ValueToCompare="0" ErrorMessage="*"></asp:CompareValidator>
                    </td>
                    </tr>
                    <tr>
                        <td class="InfoField">Your E-mail*: </td>
                        <td>
                            <asp:TextBox ID="ForgotIDEmailTextBox" runat="server" MaxLength="200"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <asp:Button ID="FindIDButton" CssClass="MetroButtonText" runat="server" Text="Find my Request ID" />
                        </td>
                    </tr>
                </table>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </div>
            <div id="ViewTabContent" class="Script_TabContent" runat="server">
                <asp:UpdatePanel ID="ViewRequestListUpdatePanel" runat="server">
                    <ContentTemplate>
                        <table class="DownloadInfoTable PopUpForm">
                            <tr>
                                <td>
                                    <span class="InfoField"><asp:CheckBox ID="CheckBox1" Text="Show only pending requests" runat="server" /></span>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span class="InfoField">Number of Requests: </span>
                                </td>
                                <td>
                                    <asp:DropDownList ID="RequestNumDropdown" runat="server">
                                        <asp:ListItem Selected="True" Text="20" Value="20"></asp:ListItem>
                                        <asp:ListItem Selected="False" Text="40" Value="40"></asp:ListItem>
                                        <asp:ListItem Selected="False" Text="All requests" Value="0"></asp:ListItem>
                                    </asp:DropDownList>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span class="InfoField">Sort requests by: </span>
                                </td>
                                <td>
                                    <asp:DropDownList ID="SortDropdown" runat="server">
                                        <asp:ListItem Selected="True" Text="Most Recent" Value=""></asp:ListItem>
                                        <asp:ListItem Selected="False" Text="Content-wise" Value=""></asp:ListItem>
                                        <asp:ListItem Selected="False" Text="Number of requests" Value=""></asp:ListItem>
                                    </asp:DropDownList>
                                </td>
                            </tr>
                        </table>
                        <table class="RequestListTable">
                    <thead>
                        <tr>
                            <th class="RequestIdCol">Request ID</th>
                            <th class="DateCol">Date</th>
                            <th class="ContentCol">Content</th>
                            <th class="RequestNoCol">No. of requests</th>
                            <th class="StatusCol">Status</th>
                            <th class="RequestedByCol">Request by</th>
                            <th class="ResolvingDateCol">Resoving date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="RequestIdCol">DKFJD09</td>
                            <td class="DateCol">01 Jan,2012</td>
                            <td class="ContentCol">Batman Begins</td>
                            <td class="RequestNoCol">5</td>
                            <td class="StatusCol">Pending</td>
                            <td class="RequestedByCol">kaushikdb</td>
                            <td class="ResolvingDateCol">01 Jan,2012</td>
                        </tr>
                    </tbody>
                </table>
                        <asp:Button ID="ViewMoreButton" CssClass="MetroButtonText LeftFloatButton" runat="server" Text="View More" />
                        <div class="Clearfix"></div>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </div>
            <script type="text/javascript">
                $(document).ready(function () {
                    ItemTabSwitch();
                    FileScroll();
                    DownloadButton();
                });
            </script>
        </div>
        <div class="CommentBox">
            <div class="DivTitle">Comments on <asp:Hyperlink ID="CommentHeader" runat="server" Text="Label"></asp:Hyperlink> Vitagamer</div>
            <div id="Comments" class="Comments" runat="server"></div>
        </div>
    </div>
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="AddHolder" Runat="Server">
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="SideContentPlaceHolder" Runat="Server">
</asp:Content> 
```

我需要能够限制用户仅在他们忘记该面板上的某些内容时才提交表单。我希望其他面板上的按钮能够在按下时回发。

解决方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:39:15.900

为每个面板使用验证组。如果没有指定验证组，ASP.NET 将触发表单上的所有验证器。

[指定验证组](http://msdn.microsoft.com/en-us/library/ms227424%28v=vs.100%29.aspx)

```
<div id="panel1">
    <asp:requiredfieldvalidator id="RequiredFieldValidator1"
      controltovalidate="NameTextBox"
      validationgroup="PersonalInfoGroup"
      errormessage="Enter your name."
      runat="Server">
    </asp:requiredfieldvalidator>

    <asp:button id="Button1" 
      text="Validate" 
      causesvalidation="true"
      validationgroup="PersonalInfoGroup"
      runat="Server" />
</div>
<div id="panel2">
    <asp:requiredfieldvalidator id="RequiredFieldValidator2"
      controltovalidate="NameTextBox2"
      validationgroup="PersonalInfoGroup2"
      errormessage="Enter your name."
      runat="Server">
    </asp:requiredfieldvalidator>

    <asp:button id="Button2" 
      text="Validate" 
      causesvalidation="true"
      validationgroup="PersonalInfoGroup2"
      runat="Server" />
</div> 
```

# mysql - 使用 Order By 的 Mysql 查询太慢

> ID：14284535
> 
> 赞同：3
> 
> 时间：2013-01-11T18:35:54.433
> 
> 标签：mysql, query-performance

我知道以前有人问过这种问题，但这些问题都没有让我找到解决方案。

这是我的查询：

```
SELECT p.photoid, c.comment, p.path, p.smallfile, p.bigfile, c.userid, c.dateposted, u.username, c.likephoto 
  FROM bs_photocomments c, photos p, user u 
  WHERE c.active = 1 
    AND u.userid = c.userid 
    AND p.photoid = c.photoid 
    AND c.id = (SELECT ID FROM bs_photocomments WHERE photoid = p.photoid ORDER BY ID DESC LIMIT 1) 
  ORDER BY c.id DESC LIMIT 2 
```

最后一点解释`AND`：

基本上，我正在尝试获取 20 张独特照片的最新评论。例如，如果一张照片有 5 条评论，我只想显示最后一条。

是`ORDER BY c.id`凶手。只有 18 万条评论和 10 万张照片。如果我删除`ORDER BY`查询会立即返回，但显然不是我想要的结果。

以下是索引：

```
+------------------+------------+--------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table            | Non_unique | Key_name           | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+------------------+------------+--------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| bs_photocomments |          0 | PRIMARY            |            1 | id          | A         |      183269 |     NULL | NULL   |      | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx1 |            1 | photoid     | A         |      183269 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx2 |            1 | active      | A         |           4 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx3 |            1 | dateposted  | A         |      183269 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx4 |            1 | userid      | A         |        4953 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx5 |            1 | puserid     | A         |        4072 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx6 |            1 | id          | A         |      183269 |     NULL | NULL   |      | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx6 |            2 | photoid     | A         |      183269 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx7 |            1 | photoid     | A         |      183269 |     NULL | NULL   | YES  | BTREE      |         |
| bs_photocomments |          1 | photocomments_idx7 |            2 | userid      | A         |      183269 |     NULL | NULL   | YES  | BTREE      |         |
+------------------+------------+--------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+

+--------+------------+--------------+--------------+--------------+-----------+-------------+----------+--------+------+------------+---------+
| Table  | Non_unique | Key_name     | Seq_in_index | Column_name  | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------+------------+--------------+--------------+--------------+-----------+-------------+----------+--------+------+------------+---------+
| photos |          0 | PRIMARY      |            1 | photoid      | A         |       57736 |     NULL | NULL   |      | BTREE      |         |
| photos |          1 | photos_idx1  |            1 | userid       | A         |        5773 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx2  |            1 | dateuploaded | A         |       57736 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx3  |            1 | camera       | A         |          17 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx4  |            1 | focallength  | A         |         308 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx5  |            1 | category     | A         |          96 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx6  |            1 | active       | A         |           1 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photo_idx7   |            1 | aperture     | A         |         354 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx8  |            1 | lenstype     | A         |           1 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx9  |            1 | film         | A         |           1 |     NULL | NULL   | YES  | BTREE      |         |
| photos |          1 | photos_idx10 |            1 | originalfile | A         |       57736 |     NULL | NULL   | YES  | BTREE      |         |
+--------+------------+--------------+--------------+--------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:06:34.397

此查询将返回（最多）20 张不同照片的单个最近“最近”评论（其中“recent-cy”由 bs_photocomments 表上的升序 ID 值标识）。返回的 20 张照片将是那些有最近“最近”评论的照片，并从最近的“最近”评论开始排序。（注意：只考虑 bs_photocomments 中的行，忽略`active=1`所有其他行`bs_photocomments`，就好像它们甚至不在表中一样。）

```
SELECT p.photoid
     , c.comment
     , p.path
     , p.smallfile
     , p.bigfile
     , c.userid
     , c.dateposted
     , u.username
     , c.likephoto
  JOIN ( 
         SELECT n.photoid
              , MAX(n.id) AS max_id
           FROM bs_photocomments n
          WHERE n.active = 1 
          GROUP BY n.photoid
          ORDER BY max_id DESC
          LIMIT 20
       ) m
  JOIN bs_photocomments c
    ON c.id = m.max_id
  JOIN photos p
    ON p.photoid = c.photoid
  JOIN user u
    ON u.userid = c.userid
 ORDER BY c.id DESC
 LIMIT 20 
```

“技巧”是使用内联视图来获取每个 photoid 的“最新”评论（内联视图别名为`m`）。一旦我们有了它，只需从 bs_photocomments 中获取行，以及从用户和照片中获取相关行。

我相信原始查询中真正的性能“杀手”是连接谓词中的相关子查询。就 bs_photocomments 表中的每一行执行该查询，甚至对 photos 表中的每一行都运行它而言，这将是相当昂贵的。

* * *

为了获得最佳性能，您需要“覆盖索引”，而不是每个单独列上的（无用）索引。至少，您需要一个关于 bs_photocomments 的索引，该索引具有`photoid`作为前导索引，后跟`id`. 包含该`active`列将意味着可以满足“使用索引”的内联视图查询，而无需访问任何数据页面。

```
... ON bs_photocomments (photoid, id, active) 
```

使用该索引，MySQL 应该能够相当有效地获取每个 photoid 的最大 id。同样，有一个索引

```
... ON bs_photocomments (id, comment, userid, dateposted, likephoto) 
```

将意味着对 bs_photocomments 表 ( `c`) 的外部查询也可以满足“使用索引”。（MySQL 可能能够满足索引中的 ORDER BY，而不需要排序操作。（您需要检查 EXPLAIN 输出以查看`Extra`列中是否出现“Using filesort”。）

此外，这些覆盖索引可能会稍微提高查询的性能。（如果从索引满足查询而不访问基础表中的页面，则 EXPLAIN 输出将显示“使用索引”。）

```
 ON photos (photoid, path, smallfile, bigfile)

  ON user (userid, username) 
```

每个列上的大多数单独索引都是无用的。这些索引中的任何一个都不太可能被使用，因此它们所做的只是消耗资源。

# c# - 使用 OLEDB 读取多个 Excel 工作表，但获得不同的数据类型 - 如何修复？

> ID：14284543
> 
> 赞同：0
> 
> 时间：2013-01-11T18:36:10.923
> 
> 标签：c#, .net, vb.net

`Microsoft.ACE.OLEDB.12.0`我创建了一个子程序，它使用数据提供程序将 Excel .xlsx 工作簿中的所有工作表读取到数据集中的单独数据表中。

现在，我有一个包含多张工作表的工作簿 - 所有这些工作表都有相同的列名 - 我想要做的是，一旦它们全部加载到数据集中，将它们全部合并到一个大的 DataTable 中。

我的问题是，即使所有工作表都具有相同的列，根据每个工作表中的数据，有时相同的列会获得`Double`数据类型，而有时它们会`String`在 DataSet 的不同表中获得数据类型，所以，`Merge`函数给我一个错误。

我怎样才能解决这个问题？有没有办法提前将列数据类型设置为字符串，或者有没有办法在合并时忽略列类型，或者有更好的方法来完全解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:49:52.127

我以前用过这个。我主要是从记忆中去。您可以设置一个名为 TypeGuessRows 的注册表项。这将禁止猜测 Excel 的类型。

此外，尝试在 ACE 连接字符串中添加 IMEX 参数。

另一边注：这可能是一个重复的问题。

编辑：来自谷歌，注册表位置：http: [//support.sas.com/kb/31/765.html](http://support.sas.com/kb/31/765.html)

另一个非常有用的帖子：[Reading Excel InterMixed DataType without Modifying Registry Key](https://stackoverflow.com/questions/9936646/reading-excel-intermixed-datatype-without-modifying-registry-key)

# django - Django Admin 搜索查询未命中 Postgres 索引

> ID：14284546
> 
> 赞同：2
> 
> 时间：2013-01-11T18:36:19.707
> 
> 标签：django, postgresql, django-admin

我在 Postgres（所有本地主机）中使用 GIN 索引进行全文搜索，当我编写自己的查询并在 psql 中运行它时，我得到了很好的响应时间并`EXPLAIN ANALYZE`报告了索引命中（woohoo），但是当通过 Django Admin 搜索框使用**相同的搜索词**进行查询，不会扫描索引，并且查询需要永远完成。

因此，我的索引是通过[非常棒的 pg_trgm Postgres 扩展](http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/)创建的：

```
CREATE INDEX name_gin ON entity USING gin (name gin_trgm_ops); 
```

此查询命中索引并花费了惊人的**84 毫秒**来搜索 90 万条全文记录：

```
SELECT COUNT(*) 
FROM entity 
WHERE name LIKE UPPER('%dubteeeff%') 
 AND name LIKE UPPER('%django%'); 
```

由 Django Admin 界面创建的完全相同的查询需要**938ms**：

```
SELECT COUNT(*) 
FROM entity 
WHERE UPPER("entity"."name"::text) LIKE UPPER('%dubteeeff%') 
  and UPPER("entity"."name"::text) LIKE UPPER('%django%');` 
```

唯一的区别似乎是引用列的方式——我对 Django 和 Postgres 还很陌生——是否有一些 Postgres 配置设置或 Django admin QuerySet-something，或者我可以覆盖或修改以加快速度的 RawQuery向上？我不希望我的管理页面充其量是缓慢的，最坏的情况是，将站点的其余部分拖下来。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:18:49.720

看起来您需要在 Django 生成的不区分大小写的搜索上添加`entity(upper(name))`索引`entity(name)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:42:20.150

这可能是 COUNT(*) 在 Postgres 中速度慢的问题吗？您可能想要检查修改查询以返回估计值而不是精确计数，因为这是 Postgres 的一个已知问题。

# node.js - Appfog 上的 Node.js + express + mongoose。stange 数据库行为

> ID：14284552
> 
> 赞同：0
> 
> 时间：2013-01-11T18:36:41.653
> 
> 标签：node.js, mongodb, deployment, express, appfog

我正在学习使用**node.js ，并用****express**和**mongoose**编写了一个小测试应用程序。

它在我的本地机器上运行完美。但是在我将它上传到**Appfog 之后**，数据库开始表现得很奇怪。正如你在这里看到的：

## [http://agoo.eu01.aws.af.cm/users](http://agoo.eu01.aws.af.cm/users)

第一个变化似乎发生了（有时），但在那之后，它的行为变得很奇怪。按 F5 几次，它会显示新的变化，有时它不会

不仅如此，有时我会在一段时间后打开应用程序并在那里进行更改，但并非总是如此。

这是 app.js 代码

## [http://jsbin.com/egotam/1/edit](http://jsbin.com/egotam/1/edit)

如果需要任何其他文件，我很乐意提供

它让我发疯了 2 天..

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:34:06.613

该文档页面应该有所帮助：[https ://docs.appfog.com/languages/node](https://docs.appfog.com/languages/node)

首先，您需要将您的应用程序端口更改为`process.env.VCAP_APP_PORT`. 这意味着在您的文件中更改`app.set('port', process.env.PORT || 3000)`为。`app.set('port', process.env.VCAP_APP_PORT || 3000)``app.js`

然后，您需要重新连接数据库连接。首先，删除该行`mongourl = require('./env_settings')`并将其替换为以下内容：

```
var env = JSON.parse(process.env.VCAP_SERVICES);
var mongourl = ['mongodb-1.8'][0]['credentials']; 
```

现在，您`mongoose.connect(mongourl)`将针对 Cloud Foundry 环境进行正确配置，而不是像之前配置的那样针对您的本地环境进行配置。

# sql - SQL查询以查找每个不同日期的最大值和最小值

> ID：14284555
> 
> 赞同：4
> 
> 时间：2013-01-11T18:36:59.233
> 
> 标签：sql, postgresql

我有下表：

```
id 值 truncated_day just_yyyy_mm_dd
1167 300 11 年 7 月 1 日 0:00 11 年 7 月 1 日
1167 301 11 年 7 月 1 日 0:00 2011 年 7 月 1 日
1167 303 11 年 7 月 1 日 0:00 11 年 7 月 1 日
1167 308 11 年 7 月 1 日 0:00 11 年 7 月 1 日
1167 312 11 年 7 月 2 日 0:00 2011 年 7 月 2 日
1167 316 11 年 7 月 2 日 0:00 2011 年 7 月 2 日
1167 318 11 年 7 月 2 日 0:00 2011 年 7 月 2 日
1167 330 11 年 7 月 2 日 0:00 2011 年 7 月 2 日
1700 0 7/1/11 0:00 7/1/11
1700 10 7/1/11 0:00 7/1/11
1700 21 11 年 7 月 1 日 0:00 11 年 7 月 1 日
1700 33 2011 年 7 月 1 日 0:00 11 年 7 月 1 日
1700 34 2011 年 7 月 2 日 0:00 2011 年 7 月 2 日
1700 35 2011 年 7 月 2 日 0:00 11 年 7 月 2 日
1700 40 11 年 7 月 2 日 0:00 2011 年 7 月 2 日
```

该表实际上很长（超过 3200 万行！！）。

我想拥有每天和每个不同 ID 的最大值和最小值（read_value）。我尝试了以下查询，但它不起作用：

```
'$'select id, 
date_trunc('day', timestamp_utc) as truncated_day, 
substring(cast(date_trunc('day', timestamp_utc) as text) from 1 for 10) as just_yyyy_mm_dd,
max(value) as maxvalue,
min(value) as minvalue
from TABLE
order by device_id, truncated_day'$' 
```

我基本上希望查询返回：

```
id min max truncated_day just_yyyy_mm_dd
1167 300 308 2011 年 7 月 1 日 0:00 11 年 7 月 1 日
1167 312 330 11 年 7 月 2 日 0:00 11 年 7 月 2 日
1700 0 33 7/1/11 0:00 7/1/11
1700 34 40 11 年 7 月 2 日 0:00 11 年 7 月 2 日
```

你能帮我解决这个问题吗？非常感谢您！ñ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:42:15.173

尝试这个。注意添加 GROUP BY。如果需要，您可以重新添加 just_yyyy_mm_dd 内容。

```
select id, 
date_trunc('day', timestamp_utc) as truncated_day, 
max(value) as maxvalue,
min(value) as minvalue
from TABLE
GROUP BY id, date_trunc('day', timestamp_utc)
order by device_id, truncated_day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:41:57.563

在“order by”之前，您需要一个“group by”。基本上你需要按前 3 个字段分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:42:39.900

您需要将您的更改`order by`为`group by`. 实际上，您可能想要两者：

```
select device_id, date_trunc('day', timestamp_utc) as truncated_day, 
           substring(cast(date_trunc('day', timestamp_utc) as text) from 1 for 10) as just_yyyy_mm_dd,
           max(value) as maxvalue,
            min(value) as minvalue
from TABLE
group by device_id, date_trunc('day', timestamp_utc)
order by device_id, truncated_day 
```

我很好奇是否`group by device_id, truncated_day`会工作。SQL 编译器是否在 just_yyyy_mm_dd 列上生成错误？它*不需要*生成错误，但它可能不会将该表达式识别为仅在聚合列上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T18:43:04.950

```
select id, min(value) as 'minvalue', max(value) as 'maxvalue', truncated_day, just_yy_mm_dd
from the_table
group by truncated_day, id, just_yy_mm_dd 
```

# java - X11 应用程序的 ProcessBuilder 启动失败，使用 java7，使用 java6

> ID：14284557
> 
> 赞同：0
> 
> 时间：2013-01-11T18:37:00.503
> 
> 标签：java, macos, r, exec, x11

我有一个用 java 编写的服务器进程，它使用 ProcessBuilder 来启动一个命令行程序（R 统计引擎），当使用 Apple 1.6 jvm 运行时，它会导致 X11 启动。但是，这不适用于 Oracle 1.7 jvm。我在 stdout、stderr 或控制台中没有收到任何错误消息。

任何想法可能是什么问题？

java进程监听网络，需要用命令行选项来启动R，这非常好，即它可以多次启动/停止R。在 java 之外启动 R 需要大量的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:41:08.053

请尝试将您的 Java 升级到 >= 1.7.0.11。

我们有一个类似的问题，我们在 CentOS 5 下使用 ProcessBuilder 从我们的 java 应用程序中执行了一个 wine 程序。它在 Java 1.6 上工作，但在 Java 1.7.0.9 上中断了。升级到 1.7.0.11 后问题就消失了。

# php - mb_substr 在剥离 UTF-8 文本时在末尾添加 3 个点（...），当文本为拉丁文时不添加它们

> ID：14284559
> 
> 赞同：4
> 
> 时间：2013-01-11T18:37:03.013
> 
> 标签：php

我有这样的代码：

```
if(strlen($text)>=15)
$text=mb_substr($text, 0, 15, 'UTF-8'); 
```

它可以正常工作，但问题是，当文本是拉丁语（例如英语）时，当它剥离它时，它最终不会显示 3 个点。另一方面，当文本是需要 UTF-8 编码的其他语言时，它最后会添加 3 个点。

## 例子：

> 细胞是由什么组成的

被替换为

> 什么是细胞

另一方面：

> で作られた细胞は何ですか

被替换为

> で作られた细...

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T02:49:43.697

发生这种情况是因为[`strlen()`](http://php.net/strlen)以二进制形式返回字符串的长度，即八位字节数。

因为 utf8 以与 iso-8859-1 相同的方式表示 ASCII，所以字符数和八位字节数之间没有区别。但是，对于 ASCII 以外的字符，例如亚洲字符，每个 utf8 字符最多可以占用三个八位字节。

因此，要正确确定您需要使用的字符数[`mb_strlen()`](http://php.net/mb_strlen)。

# c++ - 如何确定机器的字长以使用散列函数？

> ID：14284560
> 
> 赞同：2
> 
> 时间：2013-01-11T18:37:03.190
> 
> 标签：c++, hash

> **可能重复：**
> [确定我的处理器的字长](https://stackoverflow.com/questions/2301007/determine-word-size-of-my-processor)

我正在尝试实现散列的乘法方法，如下所述：[http ://homepages.ius.edu/rwisman/C455/html/notes/Chapter11/MulMethod.htm](http://homepages.ius.edu/rwisman/C455/html/notes/Chapter11/MulMethod.htm)

为此，我首先使用伯恩斯坦的方法计算“密钥”。下一步是我卡住的地方。如果我的实现要在许多不同的计算机上使用，我如何确定机器的字长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:37:06.607

我看不出计算机的字长在哪里很重要，所有计算都是在变量等上完成的。例如，最初的 Microsoft BASIC 解释器在没有硬件浮点的 8 位机器上运行，但它在软件中支持浮点。在您的情况下，C++，您将不得不为每个不同的机器指令集重新编译您的程序，以便您可以使用“sizeof()”。

# c# - Server.transfer; 如何删除原始页面内容？

> ID：14284561
> 
> 赞同：3
> 
> 时间：2013-01-11T18:37:05.357
> 
> 标签：c#, asp.net, server.transfer

我有两个 aspx 页面，第一个有 5 个链接。所有 5 个链接都使用`Server.transfer("page_x.aspx");`

我的问题是，一旦传输完成，我就剩下原来的 5 个链接以及新数据。如何清除原始页面的内容，然后从单击的链接加载新数据？我尝试使用`Controls.Clear();`然后发出 a`Server.transfer`但没有奏效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T18:41:14.480

你可以利用`Response.Redirect("page_x.aspx");`

这会将控制权转移到新页面，无需为此做任何额外的工作。

# vb.net - 在 xaml.vb 之外访问 Windows.UI.Xaml.Controls.Image 的最佳方式？

> ID：14284566
> 
> 赞同：0
> 
> 时间：2013-01-11T18:37:23.093
> 
> 标签：vb.net, xaml, microsoft-metro, windows-store-apps

```
Imports App1.LoadHandler
Public NotInheritable Class MainPage
Inherits Page
Public Shared mp As New MainPage

    Private Sub MainPage_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded
        lh.Load()
    End Sub
End Class

Imports App1.MainPage
Public Class LoadHandler
Public Shared lh As New LoadHandler

    Public Sub Load()
        AddImageObjectstoList()
    End Sub

    Private Sub AddImageObjectstoList()
        dh.imgdice.Add(imgDice1)
        dh.imgdice.Add(imgDice2)
        dh.imgdice.Add(imgDice3)
        dh.imgdice.Add(imgDice4)
        dh.imgdice.Add(imgDice5)
    End Sub
End Class 
```

我收到消息说“'App1.MainPage.Private WithEvents imgDice1 As Windows.UI.Xaml.Controls.Image' 在此上下文中无法访问，因为它是 'Private'。” 当悬停在 dh.imgdice.Add(imgDice1) 上时。

在“AddImageObjectstoList()”中，我无法访问 imgDice1 - imgDice5，因为它是私有的。在 MainPage.xaml.vb 之外访问 Windows.UI.Xaml.Controls.Image 控件的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:30:30.820

`imgDice1`这个问题有点含糊，但我猜你已经`imgDice5`在`MainPage.xaml`. 默认情况下，这些是私有字段。要使它们公开，您需要使用`x:FieldModifier="public"`：

```
<Image x:Name="imgDice1" x:FieldModifier="public" />
<Image x:Name="imgDice2" x:FieldModifier="public" />
<Image x:Name="imgDice3" x:FieldModifier="public" />
<Image x:Name="imgDice4" x:FieldModifier="public" />
<Image x:Name="imgDice5" x:FieldModifier="public" /> 
```

这样，您也可以从其他类访问它们，而不仅仅是在`MainPage`.

# ssl - 将 thawte ssl 安装到 azure

> ID：14284572
> 
> 赞同：1
> 
> 时间：2013-01-11T18:38:00.917
> 
> 标签：ssl, azure, thawte

尝试将 thawte ssl 安装到 Azure。[按照此处](http://blogs.msdn.com/b/jmeier/archive/2010/06/16/how-to-enable-ssl-on-windows-azure.aspx)列出的步骤，发现证书显示“找不到此证书的颁发者”

我发现这个[链接](https://search.thawte.com/support/ssl-digital-certificates/index?page=content&id=SO15171&actp=search&viewlocale=en_US&searchid=1282614432001) 讨论了对中间证书的需求。在将 Web 角色部署到 Azure 时，这将如何应用。是否应该将中间文件导出为 pfx 并上传到证书存储。我们是否也需要在配置文件的证书部分中指定这一点？任何建议将不胜感激。

**编辑** 尝试导出中间 pem 文件会导致 .cer 文件。有没有办法将其转换为 pfx？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T20:41:47.300

使用 MMC 证书管理单元在本地计算机上安装证书。然后使用私钥导出证书。在对话框的第二步中，选择第一个选项“包括所有证书...”。然后使用 Azure 门户删除您的证书并上传您刚刚导出的证书。

![在此处输入图像描述](../Images/84cfca25299c06d15b663a9add09a891.png)

# spring-mvc - Spring MVC 自定义注解实现

> ID：14284579
> 
> 赞同：0
> 
> 时间：2013-01-11T18:38:18.717
> 
> 标签：spring-mvc, custom-component

我使用了一个自定义注释

```
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping . 
```

它工作正常，有时它看起来很昂贵，因为所有方法调用，控制权转到 Annotation 实现类。**我希望控件仅针对已声明自定义注释的那些方法转到实现类。有人可以告诉我如何实现这一目标。** 我已经做到了如下。

在 web.xml 中：-

```
<context-param>
 <param-name>contextClass</param-name>
 <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param> 
```

在 controller.xml 中：-

```
<bean id="myInterceptor" class="com.common.annotation.MyInterceptor"/>
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">  
 <property name="interceptors">  
    <list>  
         <ref bean="myInterceptor"/>  
     </list>  
 </property>  
</bean> 
```

在注释类中： -

```
@Target({ElementType.METHOD,ElementType.ANNOTATION_TYPE})  
@Retention(RetentionPolicy.RUNTIME)  
public @interface MyAnnotation {  
        boolean checkAuth() default true;  
    } 
```

将其用作：-

```
@RequestMapping(value = "/user", method = RequestMethod.GET)
    @MyAnnotation(checkAuth=true)
    public ModelAndView forUser() {........ 
```

有人可以建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:23:51.353

您确实有 2 个选项可以以通用方式实现此功能：

1.  拦截器
2.  AOP

使用 AOP，您可以使用指定注释的切入点，并创建包含您的逻辑的建议。如果您使用 Spring AOP，这将仅扩展带注释的方法。

像这样的东西：

```
@Aspect
class MyAnnotationAspect {
    @Around(value="@annotation(org.sample.MyAnnotation)")
    public Object display(ProceedingJoinPoint joinPoint, MyAnnotation myAnnotation ) throws Throwable {
        if(myAnnotation.checkUser()) {
            // Auth logic goes here
        }
    }
} 
```

# powershell-2.0 - ForEach Move Next 特殊情况

> ID：14284580
> 
> 赞同：0
> 
> 时间：2013-01-11T18:38:25.133
> 
> 标签：powershell-2.0, powershell-3.0

您好我有以下代码，具有三个功能

```
function Search_User_File { foreach  ($User in $FILE) { Search_User_AD} }

function Search_User_AD {
    $Ad = Get-ADUser -filter * -Properties sAMAccountName,sn,givenName,department,title,telephoneNumber,employeeID,employeeNumber  -SearchBase "OU=COMPANY,DC=COMPANYcolo,DC=pvt" | Select-Object  sAMAccountName,sn,givenName,department,title,telephoneNumber,employeeID,employeeNumber
    $Search = $Ad | ? {$_.sn -eq $User.sn}
    If ($Search) {
        Foreach ($AD_User in $Search)  {
              Write-Host "=============CSV User==============="
              Write-Host ""
              Write-Host "=============AD User==============="
              Write-Host ""
              $RightWrong = Read-Host 'Is this the RIGHT EMPLOYEE we are working (Y/N)'
              If ($RightWrong -eq "Y") {
        write-host ""
        $Correct = Read-Host 'NOTE: Is the EMPLOYEE Information FOUND In AD CORRECT AGAINST The EMPLOYEE Information FOUND In the FILE File? (Y/N)'
        If (($RightWrong -eq "Y") -and ($Correct -eq "N")){
            Edit_AD_User
        }
        Elseif (($RightWrong -eq "Y") -and ($Correct -eq "Y"))  {
                            clear-host 
```

> ****在这里，我如何在 SEARCH_USER_FILE 上 MOVE.NEXT ？如果我不这样做，那么 Search_User_File 将重新开始。****

```
 `Search_User_File
        }
   }
}

function Edit_User_AD {

}

$File = Import-Csv "c:\scripts\ad\temp\file.csv" -header sn,givenName,department,title,telephoneNumber,employeeID,employeeNumber
Search_User_File` 
```

 **谢谢你的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:09:47.230

这是非常低效的，因为您每次都检索 AD 中的每个人，然后搜索姓氏。如果可能，请获取能够唯一标识该 CSV 文件中的每个用户的内容，以便您可以在`Get-ADUser`cmdlet 中进行过滤，而不是事后进行过滤。

如果您有 2 个同姓 ( `sn`) 的用户会怎样？

通常，您想要做的是在 AD 中搜索用户，找到他们，将该对象分配给一个变量，然后执行您的编辑并保存更改。你在这里有点蹦蹦跳跳。

```
$File = Import-Csv "c:\scripts\ad\temp\file.csv" -header sn,givenName,department,title,telephoneNumber,employeeID,employeeNumber

foreach ($user in $file) {
  Search_User_AD $user.sn
}

function Search_User_AD {
param(
 [string]$sn
)
    $Ad = Get-ADUser -filter * -Properties sAMAccountName,sn,givenName,department,title,telephoneNumber,employeeID,employeeNumber  -SearchBase "OU=COMPANY,DC=COMPANYcolo,DC=pvt" | Select-Object  sAMAccountName,sn,givenName,department,title,telephoneNumber,employeeID,employeeNumber
    $Search = $Ad | ? {$sn -eq $User.sn}
    If ($Search) {
        Foreach ($AD_User in $Search)  {
              Write-Host "=============CSV User==============="
              Write-Host ""
              Write-Host "=============AD User==============="
              Write-Host ""
              $RightWrong = Read-Host 'Is this the RIGHT EMPLOYEE we are working (Y/N)'
              If ($RightWrong -eq "Y") {
        write-host ""
        $Correct = Read-Host 'NOTE: Is the EMPLOYEE Information FOUND In AD CORRECT AGAINST The EMPLOYEE Information FOUND In the FILE File? (Y/N)'
        If (($RightWrong -eq "Y") -and ($Correct -eq "N")){
            Edit_AD_User
        }
        Elseif (($RightWrong -eq "Y") -and ($Correct -eq "Y"))  {
                            clear-host
        }
     }
   } 
```**

# java - Java 三元运算符设置 True 或 false

> ID：14284582
> 
> 赞同：15
> 
> 时间：2013-01-11T18:38:30.653
> 
> 标签：java, ternary-operator

我正在尝试设置条件并按如下方式设置真或假，但它始终返回假。

```
boolean checked = (categoriesCursor.getString(3) == "1") ? true
                    : false;

Log.i("Nomad",categoriesCursor.getString(3)+ " "+checked); 
```

当我尝试输出值时，我得到以下信息。

```
01-12 00:05:38.072: I/Nomad(23625): 1 false
01-12 00:05:38.072: I/Nomad(23625): 1 false
01-12 00:05:38.072: I/Nomad(23625): 1 false
01-12 00:05:38.072: I/Nomad(23625): 1 false
01-12 00:05:38.072: I/Nomad(23625): 1 false
01-12 00:05:38.072: I/Nomad(23625): 0 false
01-12 00:05:38.072: I/Nomad(23625): 0 false 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-11T18:39:48.530

它一直返回`false`，因为您在比较*引用*，而不是*字符串*。你可能是这个意思：

```
boolean checked = (categoriesCursor.getString(3).equals("1")) ? true
                : false; 
```

这恰好等同于：

```
boolean checked = categoriesCursor.getString(3).equals("1"); 
```

如果`categoriesCursor.getString(3)`可能的话`null`，你会更安全地这样做：

```
boolean checked = "1".equals(categoriesCursor.getString(3)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T18:41:50.367

尝试使用这个

```
(categoriesCursor.getString(3).equals("1")) ? true : false; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T18:39:54.227

使用`equals`代替`==`

```
boolean checked = (categoriesCursor.getString(3).equals("1")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T18:42:32.830

首先，不需要三元运算符。然后你必须使用`equals()` 而不是`==`. 因为`==`运算符检查对对象的引用是否相等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T18:40:24.210

使用`categoriesCursor.getString(3).equals("1")`代替`==`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T18:40:26.570

首先，要比较字符串，您必须使用以下`equals`方法：

```
categoriesCursor.getString(3).equals("1") 
```

其次，这里不需要三元运算符。`equals`已经产生了一个布尔值，所以只需分配它：

```
boolean checked = categoriesCursor.getString(3).equals("1"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T18:41:02.113

将其更改为：

```
boolean checked = (categoriesCursor.getString(3).equals("1")) ? true : false; 
```

不要`==`用于比较字符串内容。

**注意**：`==`运算符不能在 JAVA 中重载或修改。如果您使用`object1 == object2`, where `object1`and `object2`are Strings 或任何其他对象，您将检查引用是否指向同一个底层对象。这不会比较内容。

# javascript - 使用 Require.js 正确加载文件时遇到问题

> ID：14284587
> 
> 赞同：0
> 
> 时间：2013-01-11T18:38:41.190
> 
> 标签：javascript, requirejs

**这个问题的一些背景信息**

所以我去年为一个客户写了一个应用程序，大约在项目进行到一半时，我意识到我需要有很多异步功能，所以我开始编写将很多网站功能转移到 javascript。[我的开发环境遇到了一个相当大的问题，](https://stackoverflow.com/questions/12782946/js-and-css-files-in-vagrant-not-properly-encoded-when-saved-outside-of-the-vm)最终我的 php 文件中有很多我的 javascript，只是为了节省时间。

在将项目移交给客户之前，我将所有 javascript 移动到单独的文件中，这些文件仅由站点的不同区域分开。所以我最终得到了一个 admin.js、checkout.js、common.js 等。

**实际问题**

客户现在想要为站点添加更多功能，我想继续将 javascript 正确地构建到不同的文件中，并将模型代码与视图代码分开。

我想使用 requirejs，这样我就不会在每个页面的页脚中都有一堆脚本调用，并且也可以更好地处理依赖关系。

我遇到的具体问题是它似乎没有正确加载我的文件。

我的 main.js 文件

```
require.config({
  paths: {
    'course'    : 'models/course',
    'login_view': 'views/login/login_view',
    'config'    : 'config',
    'views'     : 'views/views',
    'session'   : 'models/session'
  }
});

require(['login_view'], function(login_view){
  login_view.init();
}); 
```

我的 login_view.js 文件

```
define(function() {
  var login_view = {
    init: function(){
      console.log(this);
    });
  };
}); 
```

当我在开发服务器上加载应用程序时，出现此错误，`Uncaught TypeError: Cannot call method 'init' of undefined`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:46:56.537

因为模块必须公开一个需要模块可以操作的接口（替换变量名称以避免命名混淆）：

```
//login_view.js
define(function() {
  var opBoard = {
    init: function(){
      console.log('I am initted!');
    });
  };

  //expose opBoard containing init
  return opBoard;
});

//so if i required in require or depended in another module
require(['login_view'],function(lv){
  //lv is the exposed opBoard from the `login_view` module
  lv.init();
}); 
```

# reporting-services - 使用 Reporting Services 表单身份验证时如何对数据库连接进行身份验证？

> ID：14284590
> 
> 赞同：1
> 
> 时间：2013-01-11T18:38:49.810
> 
> 标签：reporting-services, forms-authentication

我正在研究将表单身份验证用于 SSRS。我使用此处找到的 Microsoft 示例使其工作：http: //msftrsprodsamples.codeplex.com/wikipage?title=SS2008! [Security%20Extension%20Sample](http://msftrsprodsamples.codeplex.com/wikipage?title=SS2008!Security%20Extension%20Sample)

但是，我想知道对 SQL Server 数据源使用什么身份验证。当我使用 Windows 身份验证时，我收到此错误：

报告处理过程中发生错误。(rsProcessingAborted) 共享数据集“ActualYears”的执行失败。(rsDataSetExecutionError) 无法为数据源“共享数据集的数据源”模拟用户。(rsErrorImpersonatingUser) 此数据源配置为使用 Windows 集成安全性。此报表服务器已禁用 Windows 集成安全性，或者您的报表服务器正在使用受信任的帐户模式。(rsWindowsIntegratedSecurityDisabled)

当我使用 SQL Server 身份验证时，它会在我运行报表时提示我输入凭据，即使我的数据源在连接字符串中指定了用户和密码。因此，当我运行内置报告管理器时，我必须登录以进行表单身份验证。然后，当我运行报告时，我必须再次登录以进行 SQL 身份验证。

如果使用 Forms 身份验证，您必须使用 SQL Server 身份验证还是 Windows 身份验证可以以某种方式工作？此外，有没有办法让 SQL Server 身份验证不提示您输入凭据，而是使用连接字符串中已经提供的凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:33:08.820

我不知何故错过了您可以为数据源设置的凭据部分。这样我就可以使用 SQL Server 身份验证并且它可以工作。

# c# - 更改 DataContexts，重新调用 Loaded 事件？

> ID：14284607
> 
> 赞同：1
> 
> 时间：2013-01-11T18:40:06.587
> 
> 标签：c#, wpf, datagrid

我使用 MySQL 连接从数据库中获取 DataTable 并将其加载到数据网格中：

```
dataGrid1.DataContext = db.Get_Data(); 
```

稍后在程序中，我有更改网格中数据的按钮和事件：

```
dataGrid1.DataContext = db.Get_Other_Data(); 
```

这很好用。但是，在更改 DataContext 属性后，我在调整列大小时遇到​​了问题。

如果我走：

```
dataGrid1.DataContext = db.Get_Other_Data();
dataGrid1.Columns[0] = 15; 
```

我收到一个异常 - 我了解到数据尚未加载到 Grid 中，因此它会引发索引超出范围异常。

因此，我尝试查看以下事件：

```
DataContextChanged - Doesn't wait till data is loaded
Loaded - Only works when the first DataContext is set, not on all 
```

如何在所有不同的 DataContext 初始化上重新调用 Loaded？还是其他什么活动？

# kendo-ui - Kendo Grid 根据集合中的值过滤网格

> ID：14284615
> 
> 赞同：1
> 
> 时间：2013-01-11T18:40:39.883
> 
> 标签：kendo-ui

对我来说简单而困难。如果基于 FileCategory 过滤器类别名称，我只想将过滤器应用于网格。假设我想为类别名称为 Central Supply 的项目过滤网格。这是数据，也是我的尝试。在我的尝试中，我展示了过滤器适用于属性（单个值），但我不能让它适用于集合。

```
Data: [
    -{
    Id: 1
    FileName: "MyFile"
    RevisionDate: "2013-01-08T00:00:00"
    FormNumber: "MyFormName"
    FormTitle: "aa"
    Class: "a"
    SecondaryCategory: "a"
    UploadDate: "2013-01-11T08:34:46.677"
    -FileCategoryFilter: [
    -{
    FileCategoryId: 1
    CategoryName: "Administrative Manual Docs"
    Active: true
    File: null
    }
    -{
    FileCategoryId: 4
    CategoryName: "Central Supply"
    Active: true
    File: null
    }
    ]
    } 
```

# Kendo Grid 服务器包装器

```
 .Filter(filters =>
 // { filters.Add(p => p.FileName).IsEqualTo("Central Supply");})
//this filter works for a property but I havent figured out how to do a collection. 
    { 
       filters.Add(
             p =>p.FileCategoryFilter.Select(i=>i.CategoryName).Contains("Central Supply")
    );
 }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:04:56.303

恐怕这不受支持 - 运算符只能使用单个值。包装器使用以下客户端等效项 - 检查文档的[这一部分](http://docs.kendoui.com/api/framework/datasource#filtervalue-object)。您可以尝试使用 OR 逻辑在同一字段上指定多个过滤器。

# sql-server-2008 - 组中每一行的时间差

> ID：14284624
> 
> 赞同：1
> 
> 时间：2013-01-11T18:41:14.203
> 
> 标签：sql-server-2008, tsql

我有如下表格：

```
 GroupOrderID    Station           Date
-----------------------------------------------
    28797   NB003   2013-01-03 12:53:00
    28797   NB003   2013-01-03 17:12:00
    28797   NB003   2013-01-04 14:45:00
    28797   NB003   2013-01-04 15:57:00
    28797   NB003   2013-01-06 16:08:00
    28797   NB003   2013-01-07 10:28:00
    28797   NB003   2013-01-07 10:29:00
    28797   CRM220  2013-01-07 16:31:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:24:00
    28797   CRM220  2013-01-07 17:24:00
    28797   STEENOVE    2013-01-11 11:03:00 
```

我想要每行的两个日期之间的时间差（以秒为单位）。对于每个站点，

但是 MAX SECONDS BREAK 条件是有条件的。就像，在计算 Station CRM220 First 和 Last datetime 的秒数时，我们不会计算秒数 > MAX SECONDS BREAK 的时间。

因此，我们将计算站的第一次和最后一次测量之间的所有秒数，并排除 Max Break 中提到的秒数时间间隔。像 Station NB003 一样，CRM220 都有第一个和最后一个日期，我想要以秒为单位的差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:42:47.803

此 tsql 将在第二个为您提供差异。**

```
with cte as
(SELECT
   ROW_NUMBER() OVER (PARTITION BY GroupOrderID    , Station ORDER BY CDate) row,
  GroupOrderID    , Station, CDate
 FROM #supportContacts)
SELECT 
   a.GroupOrderID    , a.Station ,
   DATEDIFF ( second , b.CDate , a.CDate) as 'DiffinSec'
FROM
   cte a
   LEFT  JOIN cte b
   on a.GroupOrderID = b.GroupOrderID
   and a.Station = b.Station
    and a.row = b.row+1 
```

结果

![结果](../Images/4f4a42658827e92d0d658497af1b3cbd.png)

# jquery - Jquery 和 Django 多人网络象棋游戏的想法

> ID：14284626
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:41:22.820
> 
> 标签：jquery, django, jquery-ui, web-applications

我想知道什么是最好的设计，或者关于在服务器端使用 Django 和在客户端使用 jQuery 的多人国际象棋游戏的 webapp 项目的整体视图。

该项目有以下假设/前提：

*   没有国际象棋特定的规则

    > > 它将只是一个带有自由移动棋子的游戏板。没有转弯跟踪或任何相关的东西。用户可以自由地在游戏板上玩棋子。

*   实时多人游戏

    > > 一个玩家所做的任何更改*（例如：移动棋子）*都会自动呈现在对面的玩家窗口上。

*   会话保存

    > > 用户可以停止游戏会话并稍后恢复。

*   拖放片段

    > > 棋子占据游戏板/网格上的定义位置，并且不能堆叠（如原始游戏）。

乍一看，Django 部分似乎并不难。不过，吸引我的是 jQuery 部分（可能是 jQuery-UI）。

我正在考虑使用 Django 来存储有关游戏的所有信息（棋子的位置等），同时让 jQuery 基于存储在 Django 中的游戏模型充当构造函数。

抱歉信息超载，但我真的不知道我需要做什么才能完成这样的项目。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:21:18.923

[我会推荐你​​使用django-tastypie](https://github.com/toastdriven/django-tastypie)实现一个 RESTful API并在客户端使用[Backbone.js 。](http://backbonejs.org/)Paul Uithol 编写了一个小的兼容层，[backbone-tastypie](https://github.com/PaulUithol/backbone-tastypie)，用于制作`backbone`和`django-tastypie`协同工作。

如果你想坚持使用 jQuery，那么你应该从服务器公开一个 RESTful API，然后将不同的 API 调用与 DOM 事件绑定。

Taylor McKay使用 HTML5、AJAX、jQuery、JSON 和 REST实现了[Beer Distribution Game ，这是一个多模拟游戏，用于演示](http://en.wikipedia.org/wiki/Beer_distribution_game)[供应链管理](http://en.wikipedia.org/wiki/Supply_chain_management)的基本原理。您应该查看他的项目的[github](https://github.com/tmckay/beergame2)项目。

他使用了[django-piston](https://django-piston.readthedocs.org/en/latest/documentation.html)，这是一个类似于`django-tastypie`实现 RESTful 服务器的 django 应用程序。您应该查看他的[jQuery 代码](https://github.com/tmckay/beergame2/blob/master/bgame/static/js/bgame.js)以及他的[api 应用程序](https://github.com/tmckay/beergame2/tree/master/api)。

我希望以上信息能帮助您理解使用 Django 进行多人游戏的实现。

# windows-authentication - 使用 OPENROWSET、OPENQUERY 为数据访问配置 SQL Server 实例

> ID：14284628
> 
> 赞同：1
> 
> 时间：2013-01-11T18:41:26.303
> 
> 标签：windows-authentication, sql-server-2012, openrowset, openquery, sql-authentication

我在运行 Windows 7 x-64 的独立非联网开发 PC 上安装了 SQL Server 2012 完整版。假设 FOO 是我的 PC 的名称，而我的 SQL Server 命名实例是 FOO\SQL2012。

我正在尝试按照[此处](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)的示例进行操作，这些示例显示了如何使用存储过程作为数据源来创建新的临时表。

我想执行这些查询中的任何一个，但我得到了显示的错误。

```
 SELECT * into #temp FROM OPENQUERY("FOO\SQL2012", 'exec MySchema.MyStoredProc')

   **ERROR: Server 'FOO\SQL2012' is not configured for DATA ACCESS.** 
```

或此查询：

```
 SELECT * INTO #temp FROM OPENROWSET('SQLNCLI', 'Server=(local)\SQL2012;Trusted_Connection=yes;',
 ' EXEC MySchema.MyStoredProc')

 **ERROR: Msg 11529, Level 16, State 1, Procedure sp_describe_first_result_set, Line 1 
```

无法确定元数据，因为每个代码路径都会导致错误；请参阅其中一些以前的错误。**

我将如何配置 SQL Server 实例以允许当前经过身份验证的用户（*无论它可能是谁*）对本地实例使用 OPENROWSET、OPENQUERY？

通过 Windows 进行身份验证的用户和通过 SQL Server 进行身份验证的用户是否需要这些查询的不同版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T18:59:53.017

每个链接服务器只需要执行一次此操作（我建议始终引用`FOO\`或始终引用`(local)\`......保持一致！）。

```
EXEC sp_serveroption 'FOO\SQL2012', 'DATA ACCESS', 'true'; 
```

# eclipse - Glassfish突然抱怨假港口

> ID：14284630
> 
> 赞同：0
> 
> 时间：2013-01-11T18:41:42.663
> 
> 标签：eclipse, glassfish

我一直在 Eclipse Indigo 下运行 Glassfish 服务器。它一直工作得很好，但它突然拒绝启动，抛出这个错误：

```
An internal error occurred during: "Starting GlassFish 3.1.2 at localhost".
port out of range:1118080 
```

我没有（故意）改变服务器的任何东西，所以我猜有些东西已经损坏了。（我喜欢 Eclipse，但只要我一直在使用它，它偶尔会损坏自己变成无用的时刻只是体验的一部分。）有人对我如何恢复 Glassfish 服务器有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:53:25.263

好，知道了。我的 domain.xml 文件（C:\glassfish3\glassfish\domains\domain1\config\config.xml，如果你遇到同样的问题）被破坏了。幸运的是，该目录中有一个 .bak 文件仍然很好。一旦我把它复制过来（并纠正了我本地数据库服务器上的密码问题，这可能与文件损坏有关，也可能不相关），一切都很好。

# ruby-on-rails - Rails link_to 分配类和 id

> ID：14284633
> 
> 赞同：9
> 
> 时间：2013-01-11T18:41:48.043
> 
> 标签：ruby-on-rails, link-to

```
<%= link_to event do  %>
  #bunch of stuff making up the partial.
<% end %> 
```

所以我试图为部分中的每个项目分配一个 ID 和一个类。我已经看到你必须在哪里调用完整的`link_to`函数，比如`<%= link_to event, { controller: :controller, action: :action }, {class: 'someClass', id: 'someId' } %>`.

这对我不起作用，因为 do 块，我认为？想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T18:58:19.280

这对你有用吗？

```
<%= link_to event, id: "an-id", class: "some-class" do  %>
  #bunch of stuff making up the partial.
<% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T18:57:55.783

你可以做

```
<%= link_to 'event', { controller: :pages, action: :home }, class: 'someClass', id: 'someId'  %> 
```

这会给你

```
<a href="/the_generated_path" class="someClass" id="someId">event</a> 
```

要制作`'event'`一个真正的 HTML div，你可以做

```
<%= link_to(raw("<div>..</div>"), ....)  %> 
```

# symfony - 如何在 Symfony 2 中模拟 500 错误

> ID：14284638
> 
> 赞同：24
> 
> 时间：2013-01-11T18:42:06.677
> 
> 标签：symfony

我想知道如何在 Symfony 2 中模拟 500 错误。

我一直在阅读[这篇文章](https://stackoverflow.com/a/2584048/1179449)，其中**Raise**建议抛出异常

> throw new sfException('测试 500 错误');

在 Symfony 1.4 中。

我一直把这段代码放在我的

```
\store\vendor\symfony\symfony\src\Symfony\Bundle\TwigBundle\Controller\ExceptionController.php 
```

但我得到了致命错误

> 在第 49 行的 /home/notroot/www/store/vendor/symfony/symfony/src/Symfony/Bundle/TwigBundle/Controller/ExceptionController.php 中找不到类 'Symfony\Bundle\TwigBundle\Controller\sfException'

第 49 行指的是我添加的异常代码。

我的问题是，在 Symfony 2 中强制 500 错误是否仍然可以抛出异常，如果可以，我应该把这个异常放在哪里？

如果这不再可行，我将如何测试错误 500？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-11T18:50:41.463

你可以这样做。

```
//in your controller
$response = new Response();
$response->setStatusCode(500);
return $response; 
```

不要忘记添加

```
use Symfony\Component\HttpFoundation\Response; 
```

在文件的顶部。

**编辑：**要强制 Symfony 500 错误，您的提议很好：

```
throw new \Exception('Something went wrong!'); 
```

把它放在一个控制器函数中。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-14T21:25:47.770

你可以做：

```
throw new Symfony\Component\HttpKernel\Exception\HttpException(500, "Some description"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-22T19:52:32.483

最简单的方法是：

`return new Response('', 500);`

不要忘记包括`Symfony\Component\HttpFoundation\Response`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-18T10:08:20.663

一个好的方法可以是：

```
use Symfony\Component\HttpKernel\Exception\HttpException;

throw new HttpException(\Symfony\Component\HttpFoundation\Response::HTTP_INTERNAL_SERVER_ERROR, 'Testing the 500 error'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T03:26:52.913

你必须使用[Symfony\Component\HttpKernel\Exception\HttpException](http://api.symfony.com/master/Symfony/Component/HttpKernel/Exception/HttpException.html)。

另一种方法应该是做类似的事情`1/0;`，但我还没有测试过。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-02T13:35:55.797

如果您想`FatalErrorException`在 Symfony2 中触发 a 以查看您的应用程序是否正确处理它，您可以在控制器中创建如下操作：

```
public function fatalErrorExceptionAction()
{
    $unknown->getVoid();
} 
```

除以零会产生一段`Warning`时间抛出`Exception`，好吧，它只会抛出它。:-)

# internet-explorer-9 - Flash 对象出现在 IE9 中的 jQuery Fancybox 上

> ID：14284646
> 
> 赞同：1
> 
> 时间：2013-01-11T18:42:25.457
> 
> 标签：internet-explorer-9, fancybox

我正在使用 osCommerce 最新版本，我正在使用[Fancybox](http://fancybox.net/) jQuery 插件来获取产品图像。在 IE9 中，当我们单击图像时，会出现 jQuery 灯箱。在我的网站标题中，我使用的是 Flash 动画，问题是 Flash 动画出现在 IE9 中 jQuery 灯箱的前面。在其他浏览器中，它运行良好。请帮我解决这个问题。

请看图片：http: [//i46.tinypic.com/2gujmnc.png](http://i46.tinypic.com/2gujmnc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:22:48.303

设置`wmode="opaque"`为背景中的 Flash 对象。

检查参考[https://groups.google.com/forum/?fromgroups=#!topic/fancybox/h-tbFd1M-QE](https://groups.google.com/forum/?fromgroups=#!topic/fancybox/h-tbFd1M-QE)或[https://stackoverflow.com/a/4780766/1055987](https://stackoverflow.com/a/4780766/1055987)

还要确保你有一个正确的`DOCTYPE`，它是你的 html 文档的第一行。

# c# - 用于封闭泛型的更简洁的 GetType().ToString()

> ID：14284654
> 
> 赞同：4
> 
> 时间：2013-01-11T18:43:03.373
> 
> 标签：c#

我不敢相信以前没有人问过这个问题，但是因为我无法在 stackoverflow haystack 中找到这个特殊的“针”，所以我在问它。

对于封闭的泛型类型，我想要一个更简洁的 GetType().ToString() 实现。更整洁的意思是我希望 ToString() 调用以我在开发环境中输入的格式返回一个字符串。

封闭泛型上的默认 GetType().ToString() 将放置 ` *n*，其中*n*是类型的数量，并使用 [] 代替 <>。

无论如何...到代码。

给定以下课程：

```
A a = new A();
C<A> c = new C<A>();
D<A, B> d = new D<A, B>();
E<B, C<A>, D<A, B>> e = new E<B, C<A>, D<A, B>>(); 
```

默认`.ToString()`返回：

```
AAA.Events.A
AAA.Events.C`1[AAA.Events.A]
AAA.Events.D`2[AAA.Events.A,AAA.Events.B]
AAA.Events.E`3[AAA.Events.B,AAA.Events.C`1[AAA.Events.A],AAA.Events.D`2 
```

我编写了一些基本的老式（pre linq）代码来生成：

```
AAA.Events.A
AAA.Events.C<AAA.Events.A>
AAA.Events.D<AAA.Events.A,AAA.Events.B>
AAA.Events.E<AAA.Events.B,AAA.Events.C<AAA.Events.A>,AAA.Events.D<AAA.Events.A,AAA.Events.B>> 
```

但我真的很希望它回来：

```
A
C<A>
D<A,B>
E<B,C<A>,D<A,B>> 
```

这是我为证明我的意图而编写的伪劣代码：

```
public static string NeaterString(this Type t)
{
    string neater = t.ToString();
    if (neater.Contains('`'))
    {
        while (neater.Contains('`'))
        {
            neater = neater.Remove(neater.IndexOf('`'), 2);
        }
        return neater.Replace('[', '<').Replace(']', '>');
    }
    else return neater; 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T18:48:26.690

我会尽量避免字符串解析。我的例程是这样的：

```
public static string GetFriendlyName(Type type)
{
    if (type.IsGenericType)
        return string.Format("{0}<{1}>", type.Name.Split('`')[0], string.Join(", ", type.GetGenericArguments().Select(x => GetFriendlyName(x))));
    else
        return type.Name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T20:25:16.420

更多的霰弹枪方法：

```
public static class TypeExtensions
{
    public static string PrettyPrint(this Type type)
    {
        var str = type.ToString();

        for (int i = 1; i < 6; i++)
        {
            str = str.Replace($"`{i}[", "<");
        }

        str = str.Replace("]", ">");

        var knownNamespaces = new[]
        {
            "System.",
            "My.Models.",
            "Domain."
        };

        foreach (var knownNamespace in knownNamespaces)
        {
            str = str.Replace(knownNamespace, string.Empty);
        }

        return str;
    }
} 
```

`i`如果您有超过 `5[ 的超复杂泛型，您可以增加限制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-14T14:58:03.137

我试图这样做，而且我还需要能够解析这些字符串以将它们转换回类型变量。

[这是我写的代码](https://gist.github.com/JimmyCushnie/950e09d9f96fab16d7d723c5b1583c3a)。它可以将任何类型转换为与 C# 语法完全相同的字符串，并且可以将这些字符串转换回类型变量。完全支持泛型，包括未绑定的泛型。希望它有帮助:)

# php - PHP/jQuery/JavaScript 中的免费 OCR 处理 API

> ID：14284656
> 
> 赞同：16
> 
> 时间：2013-01-11T18:43:07.777
> 
> 标签：php, javascript, jquery, ocr, image-recognition

是否有任何免费的 PHP OCR API，在 PHP、jQuery 或 JavaScript 中有详细记录？

我正在为 iOS 编写一个网络应用程序，我想利用 iOS 6 safari 中的新照片上传 API 来进行 OCR 图像处理。

万分感谢！:)

（**编辑：**哦，像图像识别API这样的谷歌谷歌也足够了，它不一定是OCR，虽然我更喜欢它。:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T21:05:14.803

[Tesseract](https://code.google.com/p/tesseract-ocr/)使用起来非常简单。有人甚至为它编写了一个 PHP 包装器，因此您不必处理 exec() 命令。在这里看看这个：http: [//github.com/thiagoalessio/tesseract-ocr-for-php](http://github.com/thiagoalessio/tesseract-ocr-for-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-27T03:47:13.867

你可以试试[http://www.newocr.com/api.php](http://www.newocr.com/api.php)
它使用 REST API。

# java - Java中来自Socket的I/O不读取

> ID：14284660
> 
> 赞同：0
> 
> 时间：2013-01-11T18:43:22.383
> 
> 标签：java, sockets

我有一组两个通过套接字相互通信的 Java 应用程序。大多数通信都是自动化的（一个发送一些东西，另一个接收并计算它，发送其他东西）。大多数进程从 Member 的键盘输入开始，然后开始与服务器进行交换。

服务器：

```
public class Server implements Runnable {

private static int port = 1234;
private Socket connection;
@SuppressWarnings("unused")
private int id;
private static Primer p;
private static Map<String, Object> users;
private static BigInteger two;

public static void main(String[] args){
    two = new BigInteger("2");
    int count = 0;
    users = new HashMap<String, Object>();
    p = new Primer();
    p.keygen();
    try {
        ServerSocket ss1 = new ServerSocket(port);
        System.out.println("Serwer włączony");
        while(true){
            Socket connection = ss1.accept();
            Runnable runn = new Server(connection, ++count);
            Thread t = new Thread(runn);
            t.start();
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

Server(Socket s, int i) {
  this.connection = s;
  this.id = i;
}

@SuppressWarnings("deprecation")
@Override
public void run() {
    // TODO Auto-generated method stub
    try {
        InputStream inStream;
        DataInputStream inDataStream;
        OutputStream outStream;
        DataOutputStream outDataStream;
        String message="";
        String received="";
        System.out.println("Chat Server Started");
        do{
            inStream = connection.getInputStream();
            inDataStream = new DataInputStream ( inStream );
            received = inDataStream.readUTF();      
            System.out.println("Client sent: " + received);
            outStream = connection.getOutputStream();
            outDataStream = new DataOutputStream (outStream);
            analyzeREC(received, outDataStream);
            outDataStream.flush();
            //DataInputStream dis = new DataInputStream(System.in);
            //message = dis.readLine();
            //System.out.println("Enter your message here: ");
            //outDataStream.writeUTF(message);  
        }while(!message.equals("bye"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {
        try {
            connection.close();
        }
        catch (IOException e){}
    }
}

public void analyzeREC(String msg, DataOutputStream dos){
    String[] m = msg.split(" ");
    if(m[0].equals("hello")){
        m[1] = checkName(m[1]);
        users.put(m[1], null);
        try {
            dos.writeUTF("registered " + m[1]);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("join")){
        System.out.println("Client requested join");
        try {
            dos.writeUTF("gpp " + p.getGpp().toString());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("gppConf")){
        try {
            dos.writeUTF("gpk " + p.getGpk().toString());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("gpkConf")){
        try {
            dos.writeUTF("startJoining");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("verifyProof")){
        Random r = new Random();
        if(verifyProof(new BigInteger(m[1]), new BigInteger(m[2]), new BigInteger(m[2]), new BigInteger(m[4]))){
            System.out.println("Proof verified");
            BigInteger alfafala = new BigInteger(p.getGpp().getLx(), r);
            alfafala.setBit(0);
            BigInteger betafala = new BigInteger(p.getGpp().getLx(), r);
            try {
                dos.writeUTF("sendAB " + alfafala.toString() + " " + betafala.toString());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }else{
            System.out.println("Wrong proof");
        }
    }
} 
```

成员：

```
public class Member {

private static String host = "localhost";
private static int port = 1234;
private static Primer pr;
private static String ident;
private static GroupPublicKey gpk;
private static GroupPublicParameter gpp;
private MemberSignatureKey msk;
private static ProofOfKnowledge U;

@SuppressWarnings("deprecation")
public static void main(String[] args){
    InputStream inStream;
    pr = new Primer();
    DataInputStream inDataStream;
    OutputStream outStream;
    DataOutputStream outDataStream;
    String message = "";
    String received = "";
    try {
        InetAddress addr = InetAddress.getByName(host);
        Socket sock;
        sock = new Socket(addr, port);
        System.out.println("Chat Client Started");
        do{
            DataInputStream dis = new DataInputStream(System.in);
            message = dis.readLine();
            outStream = sock.getOutputStream();
            outDataStream = new DataOutputStream (outStream);       
            outDataStream.writeUTF(message);    
            inStream = sock.getInputStream();
            inDataStream = new DataInputStream ( inStream );
            received = inDataStream.readUTF();
            System.out.println("Server Sent: " + received);
            analyzeMSG(received, outDataStream);
            outDataStream.flush();
        }while(!message.equals("bye"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

//private static boolean isPortAvailable(int port) { 

//}  

public static void analyzeMSG(String msg, DataOutputStream dos){
    String[] m = msg.split(" ");
    if(m[0].equals("registered")){
        ident = m[1];
    }
    if(m[0].equals("gpp")){
        gpp = new GroupPublicParameter(Integer.parseInt(m[1]), Integer.parseInt(m[2]), Integer.parseInt(m[3]), Integer.parseInt(m[4]), Integer.parseInt(m[5]), Integer.parseInt(m[6]), Double.parseDouble(m[7]));
        try {
            dos.writeUTF("gppConf");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("gpk")){
        gpk = new GroupPublicKey(new BigInteger(m[1]), new BigInteger(m[2]), new BigInteger(m[3]), new BigInteger(m[4]), new BigInteger(m[5]), new BigInteger(m[6]));
        try {
            dos.writeUTF("gpkConf");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("startJoining")){
        try {
            dos.writeUTF("verifyProof " + startJoining());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    if(m[0].equals("sendAB")){
        System.out.println("Proof confirmed");
    }
}

public static String startJoining(){
    System.out.println("Started join");
    Random r = new Random();
    int scale = r.nextInt(gpp.getLx());
    BigInteger xfala = new BigInteger(scale, r);
    scale = ((gpk.getN().multiply(new BigInteger("2"))).subtract(new BigInteger("1"))).bitLength();
    BigInteger rfala = Primer.primeLessThan((gpk.getN().multiply(new BigInteger("2"))).subtract(new BigInteger("1")), scale);
    BigInteger C1 = (pr.pow(gpk.getG(), xfala).multiply(pr.pow(gpk.getH(), rfala))).mod(gpk.getN());
    genProof(C1, xfala, rfala);
    return C1.toString() + " " + U.toString();
}

private static void genProof(BigInteger C1, BigInteger xfala, BigInteger rfala){
    System.out.println("Generating Proof");
    Random r = new Random();
    BigInteger t1 = new BigInteger((int) (gpp.getTeta()*(gpp.getLx() + gpp.getK())), r);
    BigInteger t2 = new BigInteger((int) (gpp.getTeta()*((2*gpp.getLp()) + gpp.getK())) - 1, r);
    BigInteger D = (pr.pow(gpk.getG(), t1).multiply(pr.pow(gpk.getH(), t2))).mod(gpk.getN());
    BigInteger cfala = pr.H(gpk.getG().toString() + gpk.getH().toString() + C1.toString() + D.toString());
    BigInteger s1fala = t1.subtract(cfala.multiply(xfala));
    BigInteger s2fala = t2.subtract(cfala.multiply(rfala));
    U = new ProofOfKnowledge(cfala, s1fala, s2fala);
} 
```

问题是，在交换了几条消息之后，在服务器中调用了 writeUTF 方法，但是以“gpk”开头的消息直到我重新输入之前发送的确认消息 (gppConf) 才被发送。从那时起，我必须将每条消息加倍才能收到。这是什么原因？

# matrix - 如何计算具有巨大元素大小的休矩阵逆？

> ID：14284663
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:43:37.887
> 
> 标签：matrix, linear-algebra

从其他一些信息中，例如：[如何在 C 中处理大整数](https://stackoverflow.com/questions/8709602/how-to-handle-big-integers-in-c)我知道 GMP 是一个使我能够处理大整数的包。

但是，我正在考虑 500×500 矩阵，其中每个元素的长度为 1000 位。有人可以让我知道 C 或 Python 中的哪个包可以让我计算矩阵逆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:02:30.030

正如 casevh 指出的那样，这在很大程度上取决于您是想要一个近似答案还是一个精确答案。

可能适合计算这种大小的矩阵的精确逆的 C 库包括[FLINT](http://www.flintlib.org)、[PARI](http://pari.math.u-bordeaux.fr/)和[IML](https://cs.uwaterloo.ca/~astorjoh/iml.html)。FLINT 需要很长时间来反转具有 1000 位条目的随机 n × n 整数矩阵：

n = 13：1.6 秒

n = 62：37 秒

n = 125：858 秒

所以 n = 500 大约需要 120 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:04:31.810

我不确定您是否尝试使用精度为 1000 位的浮点数来计算逆，或者您是否想使用分数。

对于前者，我会尝试[mpmath](http://code.google.com/p/mpmath/)和[gmpy](http://code.google.com/p/gmpy/)的组合。以下示例创建一个精度为 100 位的随机 3x3 矩阵并计算逆矩阵。

```
>>> from mpmath import *
>>> mp.prec = 100
>>> a = randmatrix(3)
>>> a**-1
matrix(
[['-2.9551532644739824344170194538', '-2.30592481828272627130234272', '4.618043964228917637573009707'],
 ['12.025269724235234315848646394', '3.3570351961866008157001332066', '-10.59068013761452569858474265'],
 ['-6.672524995207041946321450867', '-0.57061969261482431665347164675', '5.508560423258977568243759022']])
>>> a * a**-1
matrix(
[['1.0', '-3.8920288101260775500720697474e-34', '5.467369412738327810686299975e-34'],
 ['-2.0267823641769153744296258652e-33', '1.0', '-1.4939276515262026082238333732e-33'],
 ['-2.1979577599335336964264104571e-33', '-6.0264087812469052430270713117e-34', '1.0']])
>>> 
```

注意：mpmath 0.17 仅适用于 gmpy。要使用 gmpy2（下一个主要版本），您需要使用 mpmath 的源存储库。

如果你想要一个精确的有理逆，你可以试试[sympy](http://sympy.org/en/index.html)。我会担心分数的大小会增加，并且会比浮点数倒数慢得多。sympy 在幕后使用 mpmath 和 gmpy。

# android - 在 Android 中创建自定义键盘

> ID：14284664
> 
> 赞同：20
> 
> 时间：2013-01-11T18:43:48.713
> 
> 标签：android, keyboard, android-softkeyboard

我想编写一个自定义键盘，它应该适用于所有运行 Android 4.0 及更高版本的设备。所以首先我搜索了网络，但没有找到任何相关信息。那么如何创建一个应用程序来替代 Android 的普通键盘呢？

我想知道的：

1.  那里有很好的教程吗？你们有示例代码吗？
2.  我需要root才能做到这一点吗？
3.  它背后的结构是什么？（它只是一个带有服务的常规活动吗？？）
4.  是否可以读出键盘内的输入框？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T19:06:40.400

所以，当我在 Swype 工作时，我这样做了大约 2 年。你不需要root，你只需要实现一个InputMethodService。您可以从大多数文本框中获取文本，但不是全部（并非所有编辑字段都正确实现了它们的一半 API。尤其是输入类型为 INPUT_TYPE_NULL 的任何内容都无法正常工作）。要获取文本，您将调用 inputConnection.getExtractedText

请注意 - API 很糟糕，应用程序在使用它时会受到打击。一个基本的键盘很简单，但是尝试做任何复杂的事情，你会花费很多时间。大键盘投入了大量工时

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-11T18:48:26.673

> 所以首先我搜索了网络，但没有找到任何相关信息

在 Internet 上[的 Android 开发人员文档](http://developer.android.com/guide/topics/text/creating-input-method.html)中介绍了创建输入法。

> 你们有示例代码吗？

`samples/`如果您从 SDK 管理器下载了示例代码，那么您的 SDK 安装目录中有一个示例。寻找`SoftKeyboard`。

> 我需要root才能做到这一点吗？

不。

> 它背后的结构是什么？（它只是一个带有服务的常规活动吗？？）

它是[一个`InputMethodService`](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-15T06:26:09.787

> 1.  那里有很好的教程吗？你们有示例代码吗？

这是一个很好的教程：
[http ://code.tutsplus.com/tutorials/create-a-custom-keyboard-on-android--cms-22615](http://code.tutsplus.com/tutorials/create-a-custom-keyboard-on-android--cms-22615)

> 2.  我需要root才能做到这一点吗？

不，不需要 root 来执行此操作。

> 3.  它背后的结构是什么？（它只是一个带有服务的常规活动吗？？）

您需要使用`inputMethodService`，请参阅[文档](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)。

> 4.  是否可以读出键盘内的输入框？

根：没有

> 是否可以读出键盘内的输入框？

是的，有可能。

```
InputConnection ic = getCurrentInputConnection();
String currentText = ic.getExtractedText(new ExtractedTextRequest(), 0).text; 
```

# node.js - 简单的 Express 3.x socket.io 聊天

> ID：14284668
> 
> 赞同：3
> 
> 时间：2013-01-11T18:44:11.140
> 
> 标签：node.js, express, socket.io

这是来自非常流行的[webtutorial](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/)的一些代码。为了使用 Express 3.x，进行了一些更改。

这是app.js的代码：

```
 var express = require('express')
  , http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

server.listen(8000);
// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

// usernames which are currently connected to the chat
var usernames = {};

io.sockets.on('connection', function (socket) {

    // when the client emits 'sendchat', this listens and executes
    socket.on('sendchat', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
        io.sockets.emit('updatechat', socket.username, data);
    });

    // when the client emits 'adduser', this listens and executes
    socket.on('adduser', function(username){
        // we store the username in the socket session for this client
        socket.username = username;
        // add the client's username to the global list
        usernames[username] = username;
        // echo to client they've connected
        socket.emit('updatechat', 'SERVER', 'you have connected');
        // echo globally (all clients) that a person has connected
        socket.broadcast.emit('updatechat', 'SERVER', username + ' has connected');
        // update the list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
    });

    // when the user disconnects.. perform this
    socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];
        // update list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        // echo globally that this client has left
        socket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');
    });
}); 
```

上面的代码与 webtutorial 中的代码相同，只是 Express 3.x 的一些更改是使用[Riwels 的答案进行的](https://stackoverflow.com/questions/14279778/tutorial-for-express-3-x-and-socket-io#_=_)。

这是 index.html 的代码：

```
 <script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    var socket = io.connect('http://localhost:8080');

    // on connection to server, ask for user's name with an anonymous callback
    socket.on('connect', function(){
        // call the server-side function 'adduser' and send one parameter (value of prompt)
        socket.emit('adduser', prompt("What's your name?"));
    });

    // listener, whenever the server emits 'updatechat', this updates the chat body
    socket.on('updatechat', function (username, data) {
        $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
    });

    // listener, whenever the server emits 'updateusers', this updates the username list
    socket.on('updateusers', function(data) {
        $('#users').empty();
        $.each(data, function(key, value) {
            $('#users').append('<div>' + key + '</div>');
        });
    });

    // on load of page
    $(function(){
        // when the client clicks SEND
        $('#datasend').click( function() {
            var message = $('#data').val();
            $('#data').val('');
            // tell server to execute 'sendchat' and send along one parameter
            socket.emit('sendchat', message);
        });

        // when the client hits ENTER on their keyboard
        $('#data').keypress(function(e) {
            if(e.which == 13) {
                $(this).blur();
                $('#datasend').focus().click();
            }
        });
    });

</script>
<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>USERS</b>
    <div id="users"></div>
</div>
<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="conversation"></div>
    <input id="data" style="width:200px;" />
    <input type="button" id="datasend" value="send" />
</div> 
```

Socket.io 启动良好，但应用程序尚未显示任何消息。你能让这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:42:43.343

index.html 中有一个错误。我忘了像在 app.js 中那样更改端口。现在它完美地工作了。

index.html 的工作代码：

```
 <script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    var socket = io.connect('http://localhost:8000');

    // on connection to server, ask for user's name with an anonymous callback
    socket.on('connect', function(){
        // call the server-side function 'adduser' and send one parameter (value of prompt)
        socket.emit('adduser', prompt("What's your name?"));
    });

    // listener, whenever the server emits 'updatechat', this updates the chat body
    socket.on('updatechat', function (username, data) {
        $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
    });

    // listener, whenever the server emits 'updateusers', this updates the username list
    socket.on('updateusers', function(data) {
        $('#users').empty();
        $.each(data, function(key, value) {
            $('#users').append('<div>' + key + '</div>');
        });
    });

    // on load of page
    $(function(){
        // when the client clicks SEND
        $('#datasend').click( function() {
            var message = $('#data').val();
            $('#data').val('');
            // tell server to execute 'sendchat' and send along one parameter
            socket.emit('sendchat', message);
        });

        // when the client hits ENTER on their keyboard
        $('#data').keypress(function(e) {
            if(e.which == 13) {
                $(this).blur();
                $('#datasend').focus().click();
            }
        });
    });

</script>
<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>USERS</b>
    <div id="users"></div>
</div>
<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="conversation"></div>
    <input id="data" style="width:200px;" />
    <input type="button" id="datasend" value="send" />
</div> 
```

# c# - 在另一个类中使用组合框中的选定值会导致错误

> ID：14284669
> 
> 赞同：0
> 
> 时间：2013-01-11T18:44:13.597
> 
> 标签：c#, winforms

我已经搜索了几个小时来了解如何做到这一点，但我找到的解决方案都没有奏效......

我有一个包含几个 ComboBox 的表单，我想获取选定的值并将其用于另一个类的方法中。这些值将用作过滤器中的变量以查询数据库。但是，在分配值时，我收到错误“非静态字段、方法或属性需要对象引用”。我尝试在另一个类中创建表单的新实例，但是新实例不会首先没有我想要的 ComboBox 值吗？

我不太确定如何做到这一点。我尝试了很多方法，但都失败了。=/我是编程新手，所以如果能得到任何帮助，我将不胜感激！

```
 public static void LoadMainTable(ref DataTable mainGridTable)
    {

        //Loads entires into a data table
        //FormMonitor FormMonitor = new FormMonitor();
        string bankBox = FormMonitor.ComboBox1.SelectedItem;
        string theDate = FormMonitor.DateTimePicker.Value.ToString("yyyy-MM-dd");

        //Grabbed in the order they will be displayed
        cmd.CommandText = String.Format("W.I.P.");
        //Add variables for filters after figuring out how to do it
        reader = cmd.ExecuteReader();

        //reads data into dmainGridTable
        while (reader.Read())
        {

            mainGridTable.Rows.Add(reader["column1"], reader["column2"], reader["column3"], reader["column4"].ToString(),
                                    reader["column5"].ToString(), reader["column6"]);
            //FormMonitor.file_ProgressUpdated(); //non-static error again, fix
            connect.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:13:11.410

如果您使用窗体实例的 REFERENCE，则可以使用任何控件的值。您正在使用类名。

示例：现在，我的 winform 项目正在使用 MDI 作为主窗体。我有时需要在我的表单上选择一个 MonthCalendar 控件的值。我所做的是这种表单中的一种访问器，当我想要获取这些值时，我使用 MdiParent 来查找我的主表单（一个 MdiContainer），并找到了对包含 MonthCalendar 的表单的引用。我打电话给我的访问者。（使用访问器比直接获取控制值更干净）

当然，如果您的程序以不同的方式完成，您可能需要找到另一个逻辑。但这是一个基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:51:05.617

您需要将组合框的选定值传递给方法。如果这不起作用，请发布更多代码，以便我们正确理解正在发生的事情

```
 public static void LoadMainTable(ref DataTable mainGridTable, string comboSelectedValue)
        {

            //Loads entires into a data table
            //FormMonitor FormMonitor = new FormMonitor();
            string bankBox = FormMonitor.ComboBox1.SelectedItem;
            string theDate = FormMonitor.DateTimePicker.Value.ToString("yyyy-MM-dd");

            //Grabbed in the order they will be displayed
            cmd.CommandText = String.Format("W.I.P.");
            //Add variables for filters after figuring out how to do it
            reader = cmd.ExecuteReader();

            //reads data into dmainGridTable
            while (reader.Read())
            {

                mainGridTable.Rows.Add(reader["column1"], reader["column2"], reader["column3"], reader["column4"].ToString(),
                                        reader["column5"].ToString(), reader["column6"]);
                //FormMonitor.file_ProgressUpdated(); //non-static error again, fix
                connect.Close();
            } 
```

}

# performance - Magento SOAP v1 与 v2 性能对比

> ID：14284671
> 
> 赞同：7
> 
> 时间：2013-01-11T18:44:19.453
> 
> 标签：performance, api, magento, soap

我正在使用 VB.NET 来处理 Magento API。在遇到需要关联数组的调用之前，我一直在成功使用 SOAP v1。在一天左右的不幸之后，我决定尝试 v2，它包含我需要的所有对象。v2 可以工作，但是非常非常慢。要更新一个库存物品库存，大约需要一分半钟的时间来登录并进行更新，而使用 v1 可能不到 10 秒。这让我想起了为什么我首先选择了 v1。

我的问题是是否有任何方法可以提高 v2 的性能。我无法想象我需要它的程度，但我想我会问。我已经启用了缓存。如果可能的话，让 v1 接受关联数组的替代方法似乎是一个挑战。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-11T19:39:42.230

WSDL 请求可能需要很长时间的原因有很多，但我首先要检查的是**WSDL**缓存的设置。当您对 Magento 进行 API 调用时，Magento 使用 PHP 的`SoapServer`对象。对象需要获取自己的`SoapServer`WSDL文件才能操作，而这个文件的生成和获取可能是一件耗时的事情。

去

```
System -> Configuration -> Magento Core API -> General Settings 
```

并寻找“启用 WSDL 缓存”。将此设置为 yes，您将看到一些 API 性能改进。

此设置可能不存在于您的 Magento 版本中 - 如果是这种情况，您可能对[Mercury API](http://store.pulsestorm.net/products/mercury-api) 扩展（由我创建和销售）感兴趣，其中包含适用于旧版本 Magento 的此功能的 API 改进。如果您没有扩展的预算，那么`Mage_Api_Model_Server_Adapter_Soap`旧版本的 Magento 会禁用此缓存。

# java - 为什么 JavaFX 不支持 .wav 格式？

> ID：14284672
> 
> 赞同：0
> 
> 时间：2013-01-11T18:44:19.587
> 
> 标签：java, swing, format, javafx, wav

1) JavaFX 是否支持 .wav 格式？[（从Oracle的页面](http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html)页面不清楚）

2）如果不是，为什么会这样？

Swing 是 AWT 的替代品，JavaFX 是 Swing 的替代品，我们还说`.wav`Java 中播放文件格式很容易，那么为什么 JavaFX`Media`的`MediaPlayer`类不支持`.wav`格式呢？任何问题？

### 更新

当我尝试播放 .wav 文件时，它给了我错误

**更新2：**

SSCCE：

```
import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.List;
import javafx.application.Platform;
import javafx.beans.value.*;
import javafx.embed.swing.JFXPanel;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.media.*;
import javafx.util.Duration;
import javax.swing.*;

 /** Example of playing all mp3 audio files in a given directory 
 * using a JavaFX MediaView launched from Swing 
 */
public class NewFXMain {
private static void initAndShowGUI() {
// This method is invoked on Swing thread
JFrame frame = new JFrame("FX");
final JFXPanel fxPanel = new JFXPanel();
frame.add(fxPanel);
frame.setBounds(200, 100, 800, 250);
frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
frame.setVisible(true);

Platform.runLater(new Runnable() {
  @Override public void run() {
    initFX(fxPanel);        
  }
 });
 }

 private static void initFX(JFXPanel fxPanel) {
// This method is invoked on JavaFX thread
Scene scene = new SceneGenerator().createScene();
fxPanel.setScene(scene);
}

public static void main(String[] args) {
SwingUtilities.invokeLater(new Runnable() {
  @Override public void run() {
    initAndShowGUI();
  }
 });
 }
 }

 class SceneGenerator {    
 final Label currentlyPlaying = new Label();
 final ProgressBar progress = new ProgressBar();
 private ChangeListener<Duration> progressChangeListener;

 public Scene createScene() {
final StackPane layout = new StackPane();

 // determine the source directory for the playlist
final File dir = new File("e:\\");
if (!dir.exists() || !dir.isDirectory()) {
  System.out.println("Cannot find video source directory: " + dir);
  Platform.exit();
  return null;
}

// create some media players.
final List<MediaPlayer> players = new ArrayList<MediaPlayer>();
for (String file : dir.list(new FilenameFilter() {
  @Override public boolean accept(File dir, String name) {
    return name.endsWith(".wav");
  }
})) players.add(createPlayer("file:///" + (dir + "\\" + file).replace("\\", "/").replaceAll(" ", "%20")));
 if (players.isEmpty()) {
  System.out.println("No audio found in " + dir);
  Platform.exit();
  return null;
}    

// create a view to show the mediaplayers.
final MediaView mediaView = new MediaView(players.get(0));
final Button skip = new Button("Skip");
final Button play = new Button("Pause");

// play each audio file in turn.
for (int i = 0; i < players.size(); i++) {
  final MediaPlayer player     = players.get(i);
  final MediaPlayer nextPlayer = players.get((i + 1) % players.size());
  player.setOnEndOfMedia(new Runnable() {
    @Override public void run() {
      player.currentTimeProperty().removeListener(progressChangeListener);
      mediaView.setMediaPlayer(nextPlayer);
      nextPlayer.play();
    }
  });
  }

// allow the user to skip a track.
skip.setOnAction(new EventHandler<ActionEvent>() {
  @Override public void handle(ActionEvent actionEvent) {
    final MediaPlayer curPlayer = mediaView.getMediaPlayer();
    MediaPlayer nextPlayer = players.get((players.indexOf(curPlayer) + 1) %       players.size());
    mediaView.setMediaPlayer(nextPlayer);
    curPlayer.currentTimeProperty().removeListener(progressChangeListener);
    curPlayer.stop();
    nextPlayer.play();
  }
   });

 // allow the user to play or pause a track.
 play.setOnAction(new EventHandler<ActionEvent>() {
  @Override public void handle(ActionEvent actionEvent) {
    if ("Pause".equals(play.getText())) {
      mediaView.getMediaPlayer().pause();
      play.setText("Play");
    } else {
      mediaView.getMediaPlayer().play();
      play.setText("Pause");
    }
  }
 });

 // display the name of the currently playing track.
 mediaView.mediaPlayerProperty().addListener(new ChangeListener<MediaPlayer>() {
  @Override public void changed(ObservableValue<? extends MediaPlayer> observableValue, MediaPlayer oldPlayer, MediaPlayer newPlayer) {
    setCurrentlyPlaying(newPlayer);
  }
 });

 // start playing the first track.
 mediaView.setMediaPlayer(players.get(0));
 mediaView.getMediaPlayer().play();
 setCurrentlyPlaying(mediaView.getMediaPlayer());

 Button invisiblePause = new Button("Pause");
 invisiblePause.setVisible(false);
 play.prefHeightProperty().bind(invisiblePause.heightProperty());
 play.prefWidthProperty().bind(invisiblePause.widthProperty());

 // layout the scene.
 layout.setStyle("-fx-background-color: cornsilk; -fx-font-size: 20; -fx-padding: 20; -fx-alignment: center;");
 layout.getChildren().addAll(
  invisiblePause,
  VBoxBuilder.create().spacing(10).alignment(Pos.CENTER).children(
    currentlyPlaying,
    mediaView,
    HBoxBuilder.create().spacing(10).alignment(Pos.CENTER).children(skip, play, progress).build()
  ).build()
  );
 progress.setMaxWidth(Double.MAX_VALUE);
 HBox.setHgrow(progress, Priority.ALWAYS);
 return new Scene(layout, 800, 600);
 }

 private void setCurrentlyPlaying(final MediaPlayer newPlayer) {
 progress.setProgress(0);
 progressChangeListener = new ChangeListener<Duration>() {
  @Override public void changed(ObservableValue<? extends Duration> observableValue, Duration oldValue, Duration newValue) {
    progress.setProgress(1.0 * newPlayer.getCurrentTime().toMillis() / newPlayer.getTotalDuration().toMillis());
  }
  };
 newPlayer.currentTimeProperty().addListener(progressChangeListener);

 String source = newPlayer.getMedia().getSource();
 source = source.substring(0, source.length() - ".mp4".length());
 source = source.substring(source.lastIndexOf("/") + 1).replaceAll("%20", " ");
 currentlyPlaying.setText("Now Playing: " + source);
 }

  /** @return a MediaPlayer for the given source which will report any errors it    encounters */
 private MediaPlayer createPlayer(String aMediaSrc) {
 System.out.println("Creating player for: " + aMediaSrc);
 final MediaPlayer player = new MediaPlayer(new Media(aMediaSrc));
 player.setOnError(new Runnable() {
  @Override public void run() {
    System.out.println("Media error occurred: " + player.getError());
  }
 });
return player;
}
} 
```

例外：

```
 Exception in runnable
     MediaException: MEDIA_UNSUPPORTED : Compressed WAVE is not supported!
at javafx.scene.media.Media.<init>(Unknown Source)
at SceneGenerator.createPlayer(NewFXMain.java:176)
at SceneGenerator.createScene(NewFXMain.java:74)
at NewFXMain.initFX(NewFXMain.java:39)
at NewFXMain.access$000(NewFXMain.java:20)
at NewFXMain$1.run(NewFXMain.java:32)
at com.sun.javafx.application.PlatformImpl$3.run(Unknown Source)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T18:52:44.040

对我来说似乎很清楚 -[支持的媒体类型](http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html#SupportedMediaTypes)

```
...
MP4 MPEG-4 Part 14  H.264/AVC   AAC video/mp4, audio/x-m4a, video/x-m4v .mp4, .m4a, .m4v
WAV Waveform Audio Format   N/A PCM audio/x-wav .wav 
```

编辑：所以显而易见的答案（基于您的编辑）是 JavaFX 不支持*压缩*波形格式。

> **WAV**：大多数 WAV 文件是未压缩的，但它们也可以保存压缩的音频。JavaFX 尚不支持播放压缩格式。因此，在合并 WAV 文件时，开发人员需要确保文件格式为包含未压缩 PCM 的 WAV。
> 
> [资源](http://www.developer.com/java/web/javafx-2-vs.-html5-media-support-for-ria.html)

# ios - iOS - 来自作为电子邮件文本发送的变量的数据

> ID：14284673
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:44:20.163
> 
> 标签：ios, cocoa-touch, email

我有一个记分应用程序，其中包含团队名称、分数等变量。我希望能够获取存储在这些变量中的数据并通过电子邮件将其发送给任何人。换句话说，当游戏完成时，您可以选择向朋友/家人发送一封电子邮件，其中包含已填写电子邮件文本的团队名称和分数。我宁愿它不作为附件发送。我知道如何指定主题和正文，但不知道如何使用来自应用程序的数据（未存储）填充正文。我正在使用的代码：

```
 - (IBAction)email:(id)sender {
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
[composer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]){
    [composer setToRecipients:[NSArray arrayWithObject:@"", nil]];
    [composer setSubject:@"Game Results Provided by Simple-Score"];
    [composer setMessageBody:@"" isHTML:NO];
    [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentModalViewController:composer animated:YES];
} 
```

我遇到的问题，我显示 int 的正常方式是：

```
 [composer setMessageBody:@"%i", variable]; 
```

给出错误“'MFMailComposeViewController'没有可见的@interface声明选择器'setMessageBody'”而不是我想要的输出。如果我在 setMessageBody 字段中输入静态文本，它会显示得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:18:42.537

`setMessageBody`不采用格式字符串作为参数，所以这是错误的：

```
[composer setMessageBody:@"%i", variable]; 
```

它需要一个`NSString`对象作为参数，所以你想要这样的东西：

```
[composer setMessageBody:[NSString stringWithFormat:@"%i", variable]]; 
```

显然假设这`variable`是正确的类型。

# css - Google 日历在 Firefox 中为周末着色

> ID：14284675
> 
> 赞同：0
> 
> 时间：2013-01-11T18:44:24.020
> 
> 标签：css, firefox

我目前正在使用以下内容在 Firefox（周视图）中的 Google 日历中为周末着色：

```
@-moz-document url-prefix("https://www.google.com/calendar/") {  td.tg-weekend {
    background-color: #Ffd4d4;} } 
```

但是当一天是周末时，它会以正常的蓝色而不是红色显示。如果当天是周末，是否可以将当天的颜色保持为红色（有一个名为的CSS元素`tg-col-today`，但我不知道如何使用它来检查**今天**列是否与**周末**列相同)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:46:00.877

替换`td.tg-weekend`为`td.tg-weekend, td.tg-weekend .tg-today`

# r - 初始化 R 中的矩阵列表

> ID：14284676
> 
> 赞同：7
> 
> 时间：2013-01-11T18:44:56.130
> 
> 标签：r, list, matrix

我想知道是否有一种快速的方法来初始化 R 中的矩阵列表。例如，我正在寻找一个（单行）来重现与以下相同的结果：

```
output_array = list()
for(i in 1:10){
output_array[i] = diag(2)
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T18:49:31.050

也试试这个 *apply 的包装：

```
replicate(10, diag(2), simplify=F) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T18:49:39.740

这一个班轮应该工作

```
rep(list(diag(2)), 10) 
```

如果您希望矩阵的内容有所不同，那么就像

```
lapply(1:10, function(x) matrix(1:x^2, x, x) 
```

会更合适。匿名函数的内容显然会比我的例子有用一点，但是原理是一样的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T02:04:16.430

建议使用复制和代表。仅供参考：不同之处在于对传递的表达式的评估。'rep' 评估它的参数作为输入，而 'replicate' 在'循环'内评估它们。

您可以通过随机数看到这一点。对于复制，数字是不同的，因为表达式'diag（rnorm（2））'被多次评估，而对于rep，它只被评估一次并且值被重复。

> > 代表（列表（诊断（诊断（rnorm（2））），2）
> 
> [[1]]
> 
> ```
>  [,1]    [,2] 
> ```
> 
> [1,] 1.0844 0.0000
> 
> [2,] 0.0000 -2.3457
> 
> [[2]]
> 
> ```
>  [,1]    [,2] 
> ```
> 
> [1,] 1.0844 0.0000
> 
> [2,] 0.0000 -2.3457
> 
> > 复制（2，诊断（rnorm（2）））
> 
> , , 1
> 
> ```
>  [,1]    [,2] 
> ```
> 
> [1,] 0.42912 0.00000
> 
> [2,] 0.00000 0.50606
> 
> , , 2
> 
> ```
>  [,1]     [,2] 
> ```
> 
> [1,] -0.57474 0.00000
> 
> [2,] 0.00000 -0.54663

这对您来说可能很重要，也可能无关紧要，但会影响性能。

> > system.time（复制（1000，诊断（100），简化=F））
> 
> 用户系统已过
> 
> 0.640 0.032 0.674
> 
> > system.time(rep(list(diag(100)),1000))
> 
> 用户系统已过
> 
> 0.072 0.036 0.111

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T18:47:18.763

尝试

```
lapply(1:10, diag, 2) 
```

`[[`在你的 for 循环中，你必须写`output_array[[i]] = diag(2)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T19:13:28.077

您可以使用数组：

```
 h <- array(1:2, c(2,2,10))

h[,,2]        ####
     [,1] [,2]
[1,]    1    1
[2,]    2    2 
```

# php - php许多elseif语句性能更好

> ID：14284679
> 
> 赞同：3
> 
> 时间：2013-01-11T18:45:36.220
> 
> 标签：php

过去几周我正在用 php 编写一个站点，并且总是有一个问题在我的脑海中。在我的 index.php 上，我像这样路由所有模板文件

```
 if(isset($_GET['search'])){
        include_once 'template/template.search.php';
    }
    elseif(isset($_GET['newsletter'])){
        include_once 'template/template.newsletter.php';
    }
    elseif(isset($_GET['product'])){
        include_once 'template/template.product.php';
    }
    elseif(isset($_GET['categories'])){
        include_once 'template/template.categorie.php';
    }
    elseif(isset($_GET['about'])){
        include_once 'template/template.about.php';
    }
    elseif(isset($_GET['sitemap'])){
        include_once 'template/template.sitemap.php';
    }
    else
    {   
        include_once 'template/template.index.php';     
    } 
```

但对我来说，它看起来不是很干净。有没有更好的可能性来处理这样的工作？

我已经尝试过这样，但对我来说没有成功

```
 $i = 0 ;
    switch($i){
    case(isset($_GET['search'])):
        include_once 'template/template.search.php';
        break;
    default:
        include_once 'template/template.index.php'; 
        break;
} 
```

编辑：在标题中写得更好有点误导你们中的一些人，所以我肯定在寻找最好的表现。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T18:52:10.907

这个怎么样？

```
$templates = array('search',
                   'newsletter',
                   'product',
                   'categories',
                   'about',
                   'sitemap',
                   'index');

foreach ($templates as $template)
{
    if (isset($_GET[$template]))
    {
        include_once "template/template.$template.php";
        break;
    }
} 
```

你真的应该指定一个有效模板的数组——它更安全。

我想另一种方法是反过来搜索：

```
$templates = array('search',
                   'newsletter',
                   'product',
                   'categories',
                   'about',
                   'sitemap',
                   'index');

foreach ($_GET as $key => $val)
{
    if (in_array($key, $templates))
    {
        include_once "template/template.$key.php";
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T18:49:29.280

假设`$_GET`只有`includes`你能做的：

```
foreach ($_GET as $key => $val){
    if(isset($key)){
        include_once 'template/template.'.$val.'.php';
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T18:49:15.177

它不是太干净，但最好使用[开关。](http://php.net/switch)可读性提高了大约 15,000%。

```
switch(true) {
    case isset($_GET['search']):
        include_once 'template/template.search.php';
        break;

    // do more

    default:
        include_once 'template/template.index.php';
        break;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-24T13:48:27.587

只是一些转瞬即逝的想法...

*   这里的性能根本不是问题。
    即使是一系列没有`if`s 的`else`s 也会在几微秒内执行。

但是，代码的可维护性和健壮性*是*一个问题。

我发现 switch 的稍微有点骇人听闻的使用有点令人不满意甚至是危险的，因为

*   重要的信息（GET 索引和实际的页面名称）仍然被重复并埋在一堆重复的代码中，
*   如果两个条件恰好同时为真，则开关的行为会很奇怪（我想它会采用第一个满足的条件，但这仍然不是很干净）
*   添加或删除页面仍然需要复制/擦除 3 或 4 行代码，并且无意中复制块可能会被忽视并使程序员陷入烦人的“我确定这件事已经解决（但实际上没有） “ 情况。

事实上，我觉得界面有点奇怪。传递一个枚举可能页面的“目标”变量对我来说似乎更一致。这将消除同时设置两个页面选择标志的奇怪情况。

然后，您可以拥有一个简单的目标列表，并计算目标页面的名称或将它们存储在 assoc 数组中（如果您真的不能以一致的方式命名它们，尽管我想知道什么奇怪的要求会阻止您这样做）。

我会考虑的稳健性的关键点是

*   无数据重复
*   没有“惰性”默认情况（除非默认值来自功能需求）

由于所有这些原因，我会更改页面的选择方式，如下所示：

```
$pages = array (                  // single data source
    "search",
    "newsletter",
    // etc...
    );
@$page = $pages=[$_GET["page"]];  // single page selector
if (!$page) $page = "index";      // explicit default case

include "template/template.$page.php"; // no reason to include only once

// if someone else happens to include the template, better have the page
// break down immediately and correct the problem than letting a piece of
// buggy code live happily somewhere in your scripts 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T18:56:09.747

You can use an array: if you find the key inside, use it, otherwise just use default :

```
<?php
$tpl = array(
'search' => 'template/template.search.php',
'newsletter' => 'template/template.newsletter.php',
'product' => 'template/template.product.php'
#...
);

foreach($_GET as $get){
   if(array_key_exists($get, $tpl)) include_once($tpl[$get]); // assuming search is within $get
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T18:56:09.803

You could use a variable (like t) in the query string to indicate the template you want to use, and then just include the template name dynamically based on that. So if your URL looks something like: mysite.com/page.php?t=newsletter&blah=1&..., then all you need to do is:

```
include_once('template/template.' . $_GET['t'] . '.php'); 
```

# android - 无需root即可访问数据库

> ID：14284688
> 
> 赞同：0
> 
> 时间：2013-01-11T18:46:26.160
> 
> 标签：android, database

我已经徒劳地进行了广泛的搜索，以找到一种无需 root 我的 android 手机即可访问 db 的方法。我不想使用 AVD，因为它很慢。但是为了查看我在做什么，我需要以某种方式从 PC 或手机访问我的应用程序 .db 文件。

/data/data//databases/.db 不适用于真实设备。

所以，请建议我一些可以查看我的数据库的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:57:39.150

在您的应用程序中创建一个函数，将数据库从内部（受保护）内存复制到外部（不受保护），例如 SD 卡。然后，您可以使用您的 PC 访问它（如果您愿意，甚至可以从设备本身访问 Android DB 阅读器）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:59:07.277

只需在您的应用程序中添加特定事件的代码，它将数据库复制到 SD 卡中，它将是您的数据库/数据而不是实际数据库的副本。从 SD 卡您可以随时访问数据库。这是解决方法，但对我有用。

这是代码

```
 try {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();
        if (sd.canWrite()) {
            String currentDBPath = "data/"+sPackageName+"/databases/"+sDBName;
            String backupDBPath = "/.appname-external-data-cache/"+sDBName; //"{database name}";
            File dir = new File(sd,backupDBPath.replace(sDBName,""));
            if(dir.mkdir()) {

            }
            File currentDB = new File(data, currentDBPath);
            File backupDB = new File(sd, backupDBPath);
            if (currentDB.exists()) {
                FileChannel src = new FileInputStream(currentDB).getChannel();
                FileChannel dst = new FileOutputStream(backupDB).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();
            }
        } 

   } catch (Exception e) {

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:39:14.063

这是我认为您需要的代码：

```
try {
                // Backup of database to SDCard
                db.open();
                File newFile = new File(Environment.getExternalStorageDirectory(), "BackupFileNameHere");
                InputStream input = new FileInputStream("/data/data/com.YourProjectName/databases/DatabaseNameHere");
                OutputStream output = new FileOutputStream(newFile);

                // transfer bytes from the Input File to the Output File
                byte[] buffer = new byte[1024];
                int length;
                while ((length = input.read(buffer))>0) {
                    output.write(buffer, 0, length);
                }
                output.flush();
                output.close();
                input.close();
                db.close();

            } catch (Exception e) {
            } 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-11T19:54:16.973

我们只是将文件权限设置为应用程序内的所有用户都可以读取。

```
if (BuildConfig.DEBUG)
{
     new File(mDB.getPath()).setReadable(true, false);
} 
```

然后只需使用 adb -pull 获取 .db

```
adb -d pull //data/data/xxxxx/databases/xxxxx.db . 
```

**注意：**我发现每次打开数据库文件时都需要执行此操作，例如在 onCreate 以及 SQLiteOpenHelper 包装器的构造函数（当您的数据库不为空时）或 onOpen 中。如果仅在 onCreate 中，则下次运行应用程序并且 .db 已经存在时，由于某种原因权限已被改回。这可能与 Android 如何管理其数据有关。

# javascript - comments_fbid 的 FQL 查询突然返回 null

> ID：14284689
> 
> 赞同：0
> 
> 时间：2013-01-11T18:46:26.137
> 
> 标签：javascript, jquery, facebook-javascript-sdk, facebook-fql, facebook-comments

我已经使用以下代码有一段时间了，通过 Facebook FQL 检索我的评论 + 评论回复总数。但是，今天它刚刚停止工作，现在返回一个空数组。`comments_fbid`我想我已经追溯到 FB 没有返回给定 URL的事实。

```
select time, is_private from comment where is_private = 0 and object_id in 
(select comments_fbid from link_stat where url ='MY_URL') or 
is_private = 0 and object_id in (select post_fbid from comment where object_id 
in (select comments_fbid from link_stat where url ='MY_URL')) 
```

此请求通常会返回一个与`length`总评论数相等的对象。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:25:21.470

它是一个错误。即使在此特定 URL 上有评论，comments_fbid 也会返回 NULL。

在此处跟踪：http: [//developers.facebook.com/bugs/317008698404331](http://developers.facebook.com/bugs/317008698404331)

# ember.js - 如何为视图的子元素订阅事件

> ID：14284695
> 
> 赞同：2
> 
> 时间：2013-01-11T18:46:40.917
> 
> 标签：ember.js

我的视图包含一个元素。仅针对该元素响应 mouseEnter 和 mouseLeave 事件的最佳方法是什么？

ember 是否希望我将该元素转换为视图？

ember 是否要我自己打电话`this.$().on('mouseEnter', '.my-child-element', someHandler)`和分别打电话？`.off``didInsertElement``willDestroyElement`

还是我错过了更合适的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T20:00:44.997

有几种方法可以解决这个问题，但我始终得出的结论是，您可以为需要响应事件的任何内容创建一个视图。您还可以对模板中非常简单的事件使用操作处理程序。

`{{action "my_action" on="mousedown"}}`

我仍然建议使用视图，因为您很可能需要了解有关发生的事情的更多信息，并希望访问绑定到该元素的视图和模型。

# objective-c - Opticon F31 无法进入 VCP/串行模式

> ID：14284697
> 
> 赞同：1
> 
> 时间：2013-01-11T18:46:50.033
> 
> 标签：objective-c, macos, cocoa, serial-port, barcode-scanner

我刚刚购买了 Opticon F31 2D 条形码扫描仪，用于可可 mac 应用程序中作为 USB 串行设备使用。

我们使用了 NLV 2101 并扫描了通用手册中的 C01 条码，但 F31 总是返回错误的扫描错误并保持 HID 模式（充当键盘）。我买了正确的扫描仪还是这个有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:46:50.033

事实证明，将扫描仪切换到 VCP 模式的命令代码在 F31 上不起作用。您需要使用以下 URL 上的条形码在 VCP 和 HID 模式之间切换。

[http://wiki.opticon.com/index.php/2D_Scanner_USB_Default](http://wiki.opticon.com/index.php/2D_Scanner_USB_Default)

# android - Android 图片文件名无效错误

> ID：14284700
> 
> 赞同：0
> 
> 时间：2013-01-11T18:47:07.797
> 
> 标签：android, image, layout

我只是想将图像添加到我的 android 活动中，但出现以下错误：

```
res\drawable-hdpi\restLogo.png: Invalid file name: must contain only [a-z0-9_.] 
```

正如你所看到的，这个错误没有任何意义，至少对我来说是这样。文件名仅包含 az 0-9_。啊为什么我会收到这个错误？

这是布局文件中的内容：

```
 <ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1"
    android:contentDescription="@string/Logo" 
    style=""
    android:src="@drawable/restLogo" /> 
```

我感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:52:11.923

将其更改为`restlogo.png`或`rest_logo.png`。当他们说时`a-z`，他们的字面意思只是小写`a-z`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:53:35.833

```
res\drawable-hdpi\restLogo.png: 
```

图片名称应为小写，因此将其更改为 restlogo.png 或其他任何内容，但要小写

# android - android从listview中删除任何项目删除最后一个元素

> ID：14284702
> 
> 赞同：1
> 
> 时间：2013-01-11T18:47:21.057
> 
> 标签：android, listview, android-activity

我做了一个列表视图，你可以通过触摸该列表视图的行来删除一个项目，但它总是删除最后一个项目，并且在一些删除时间后它显示索引超出范围错误

系统是当您触摸一个项目时，打开一个对话框，您单击打印，然后项目将删除该项目并打开一个活动几秒钟。

这是列表适配器类

```
 @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final int positionplayer = position;
        ViewHolderaway1 holder;

        if (convertView == null) {

            View row = inflater.inflate(R.layout.readonlyvendorlist, parent,
                    false);

            row.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    // set title
                    try {
                        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                                context);

                        alertDialogBuilder.setTitle(values.get(positionplayer).Voucherref
                                + "  Sell");

                        // set dialog message
                        alertDialogBuilder
                                .setMessage(
                                        values.get(positionplayer)
                                                .getVoucherref() + "For Print")
                                .setCancelable(false)
                                .setPositiveButton("Print Voucher",
                                        new DialogInterface.OnClickListener() {
                                            public void onClick(
                                                    DialogInterface dialog,
                                                    int id) {
                                                // if this button is clicked,
                                                // close

                                                PrintTestAcitvity.printettext = values
                                                        .get(positionplayer).PrinterText;
                                                ListService.printerlist
                                                        .remove(positionplayer);

                                                Datasync.storedataprint(context);
                                                notifyDataSetChanged();
                                                Intent ia = new Intent(context,
                                                        PrintTestAcitvity.class);

                                                context.startActivity(ia);

                                            }
                                        })
                                .setNegativeButton("Cancell",
                                        new DialogInterface.OnClickListener() {
                                            public void onClick(
                                                    DialogInterface dialog,
                                                    int id) {
                                                // if this button is clicked,
                                                // just close
                                                // the dialog box and do nothing
                                                Toast.makeText(
                                                        context,
                                                        "Printing Data store for locally",
                                                        Toast.LENGTH_LONG)
                                                        .show();

                                                dialog.cancel();
                                            }
                                        });

                        // create alert dialog
                        AlertDialog alertDialog = alertDialogBuilder.create();

                        // show it
                        alertDialog.show();
                    } catch (IndexOutOfBoundsException e) {
                        // TODO: handle exception
                        notifyDataSetChanged();
                    }
                }
            });

            holder = new ViewHolderaway1();

            holder.ProductItemID = (TextView) row
                    .findViewById(R.id.ProductItemID);

            holder.VoucherCost = (TextView) row.findViewById(R.id.VoucherCost);

            holder.SupplierID = (TextView) row.findViewById(R.id.SupplierID);

            Log.d("goru", "gadha");

            row.setTag(holder);

            holder = (ViewHolderaway1) row.getTag();
//          Printer Productsdata = values.get(positionplayer);
//          if (Productsdata != null) {
//              holder.ProductItemID.setText("Print");
//              holder.VoucherCost.setText(Productsdata.getVoucherref());
//              // holder.SupplierID.setText(resid)
//              // holder.SupplierID.setVisibility(View.GONE);
//
//              if (Productsdata.getVoucherref().contains("Voda")) {
//                  holder.VoucherCost.setBackgroundColor(Color.RED);
//                  holder.VoucherCost.setTextColor(Color.WHITE);
//                  holder.SupplierID.setBackgroundDrawable(getContext()
//                          .getResources().getDrawable(R.drawable.voda));
//              }
//              if (Productsdata.getVoucherref().contains("Eco")) {
//                  holder.VoucherCost.setBackgroundColor(Color.BLUE);
//                  holder.VoucherCost.setTextColor(Color.WHITE);
//                  holder.SupplierID.setBackgroundDrawable(getContext()
//                          .getResources().getDrawable(R.drawable.eco));
//              }
//
//          }
            convertView = row;
        }else
        {
            holder = (ViewHolderaway1) convertView.getTag();
        }
            Printer Productsdata = values.get(positionplayer);
            if (Productsdata != null) {
                holder.ProductItemID.setText("Print");
                holder.VoucherCost.setText(Productsdata.getVoucherref());
                // holder.SupplierID.setText(resid)
                // holder.SupplierID.setVisibility(View.GONE);

                if (Productsdata.getVoucherref().contains("Voda")) {
                    holder.VoucherCost.setBackgroundColor(Color.RED);
                    holder.VoucherCost.setTextColor(Color.WHITE);
                    holder.SupplierID.setBackgroundDrawable(getContext()
                            .getResources().getDrawable(R.drawable.voda));
                }
                if (Productsdata.getVoucherref().contains("Eco")) {
                    holder.VoucherCost.setBackgroundColor(Color.BLUE);
                    holder.VoucherCost.setTextColor(Color.WHITE);
                    holder.SupplierID.setBackgroundDrawable(getContext()
                            .getResources().getDrawable(R.drawable.eco));
                }

            }
        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:52:49.213

您的逻辑存在一些重大缺陷`getView()`，这是最大的缺陷：

```
 if (convertView != null)
    {  
        holder = new ViewHolderaway1();

        return convertView;
    } 
```

这将返回回收的行而不更改它...您至少需要更改布局的书面内容。

查看此答案中的代码：[https](https://stackoverflow.com/a/4145996/1267661) ://stackoverflow.com/a/4145996/1267661 。您应该使用它作为模板。它演示了如何正确使用 ViewHolder 并在 Views 从 ListView 的 RecycleBin 返回后显示准确的数据。

* * *

**加法**
这个新代码效率更高*！*另外我想我明白为什么只删除最后一行。在您引用的 AlertDialog 中，`positionplayer`但此`onClick()`代码在完成*后* `getView()`运行，因此`positionplayer`在这里没有帮助。由于您的 OnClickListener 指的是整行，因此您应该在 Activity 中使用 OnItemClickListener ，这将有助于删除相应的行：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // Move your AlertDialog code here and use position instead of positionplayer
    }
}); 
```

# laravel - Laravel - 使用简单的身份验证驱动程序'未初始化的字符串偏移量：0'

> ID：14284703
> 
> 赞同：0
> 
> 时间：2013-01-11T18:47:24.810
> 
> 标签：laravel

嗨，我一直在研究 Laravel 框架，但无法让这个身份验证驱动程序工作！返回：

未处理的异常

```
Message:

Uninitialized string offset: 0
Location:

C:\wamp\www\site\laravel\auth\drivers\eloquent.php on line 39 
```

我有一个登录控制器：

```
class Login_Controller extends Base_Controller {

    public $restful = true;

    public function post_index()
    {
        $username = Input::get('username');
        $password = Input::get('password');

        if ( Auth::attempt($username, $password) )
        {
            return Redirect::to('home');
        }
        else
        {
            return Redirect::to('login')->with('login_errors', true);
        }

    }

    public function get_index() {

        return View::make('page.login');

    }

} 
```

我有`'username' => 'username',`

在 auth.php 中为行名

有没有其他人遇到过这个？

问候

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:03:31.663

好的，找到了，需要通过数组将凭据传递给尝试方法：

```
<?php

class Login_Controller extends Base_Controller {

    public $restful = true;

    public function post_index()
    {
        $username = Input::get('username');
        $password = Input::get('password');

        if ( Auth::attempt( array( 'username' => $username, 'password' => $password ) ) )
        {
            return Redirect::to('home');
        }
        else
        {
            return Redirect::to('login')->with('login_errors', true);
        }

    }

    public function get_index() {

        return View::make('page.login');

    }

} 
```

# android - Android 工作线程和应用程序生命周期

> ID：14284704
> 
> 赞同：3
> 
> 时间：2013-01-11T18:47:26.447
> 
> 标签：android, multithreading, cycle

我有一个应用程序，其中我有一个 UART（串行通信）来服务和其他几个需要单独的工作线程来保持 UI 响应的“任务”。我的问题是了解我应该在何时/何地创建这些线程以及它们何时终止。目前，我正在主 UI Activity 的 OnCreate() 中创建它们。但是，这会造成严重破坏，因为我最近需要从一个活动“跳”回主要活动。建议是使用带有适当标志的 Intent 和 StartActivity() 来“清除到顶部”。但是，这当然会为我的线程带来一组全新的实例，并且一切都会瓦解。我应该使用某种服务，以某种方式绑定到我的 UI 吗？我已经对我的主应用程序进行了子类化，所以我有我的应用程序的 OnCreate()。我倾向于那个，但不能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:52:51.863

使用服务。您有一项正在进行的任务，该任务本身并不依附于某个特定活动。

您可以启动一个长时间运行的任务，[`startService`](http://developer.android.com/reference/android/content/ContextWrapper.html#startService%28android.content.Intent%29)并且该服务在完成之前不会被终止。同时，`Context#bindService`只要绑定了任何东西，它就会使服务保持活力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:57:08.587

android并发编程的一般规则

*   如果您需要在 UI 线程之外执行某些操作并返回结果，请使用在您想使用它时创建的 AsyncTask
*   如果您有做一些工作的 1 off 要求（比如发布网络服务请求），请使用 AsyncTask
*   如果您反复想在单个活动中执行某些操作，但不需要在活动被销毁后运行或将数据发送到另一个服务，请使用线程
*   如果您需要与多个活动交谈，请使用服务。
*   如果您需要在启动活动结束之前/之后运行，请使用服务

# ruby-on-rails - Mac OSX Lion Apache + RubyOnRails + mod_passenger

> ID：14284706
> 
> 赞同：3
> 
> 时间：2013-01-11T18:47:29.483
> 
> 标签：ruby-on-rails, ruby, apache, passenger, mod-rails

我正在尝试学习如何使用 Ruby On Rails 开发 Web 应用程序，但我遇到了一个愚蠢的错误。我正在尝试使用 Phusion Passenger aka mod_rails 来使用 Apache 而不是 WEBrick；我已经通过 gem 安装了模块并运行

```
sudo passenger-install-apache2-module 
```

命令安装乘客；然后我编辑了 http.conf 文件添加

```
LoadModule passenger_module /Users/Stopped/.rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
PassengerRoot /Users/Stopped/.rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.19
PassengerRuby /Users/Stopped/.rvm/wrappers/ruby-1.9.3-p327/ruby 
```

添加了虚拟主机

```
<VirtualHost *:80>
    ServerName rails.local
    DocumentRoot "/Users/Stopped/RoR/prova/public"
    <Directory /Users/Stopped/RoR/prova/public>
        AllowOverride all
        Options -MultiViews
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

使用 sudo apachectl restart 重新启动了 Apache 但它不起作用:( 如果我在 localhost 中查找，我会看到“它有效！”页面，但如果我进入 rails.local，则没有我的 Rails 应用程序 :(

乘客已装载

```
Apache/2.2.22 (Unix) Phusion_Passenger/3.0.19 DAV/2 PHP/5.4.9 Server at localhost Port 80 
```

有任何想法吗？

PS：这是“apachectl -S”输出

```
VirtualHost configuration:
wildcard NameVirtualHosts and _default_ servers:
*:80                   is a NameVirtualHost
         default server rails.local (/private/etc/apache2/extra/httpd-vhosts.conf:53)
         port 80 namevhost rails.local (/private/etc/apache2/extra/httpd-vhosts.conf:53)
Syntax OK 
```

**解决方案**

嗯...我解决了它，将 127.0.0.1 rails.local 添加到我的主机文件中，但我不明白为什么；谁可以给我解释一下这个？._.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T03:52:12.193

您不能在主机文件中使用通配符和 localhost。您必须在主机文件中为 localhost 明确指定每个子域。如果您正在寻找替代方案，您可以购买一个域名并使用通配符将该域名指向 127.0.0.1。您甚至可以更进一步，拥有一个骨架应用程序，通过映射路由将不同的子域指向不同的应用程序。

# asp.net-mvc - 使用布局时如何在视图中添加脚本 src

> ID：14284707
> 
> 赞同：118
> 
> 时间：2013-01-11T18:47:38.907
> 
> 标签：asp.net-mvc, razor

我想包含一个 javascript 参考，例如：

```
<script src="@Url.Content("~/Scripts/jqueryFoo.js")" type="text/javascript"></script> 
```

如果我有一个 Razor 视图，那么在不必将其添加到布局的情况下包含它的正确方法是什么（我只需要在单个特定视图中，而不是全部视图中）

在 aspx 中，我们可以使用内容占位符。我发现在 mvc 中使用 aspx 但不是 Razor 视图的较旧示例。

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-01-11T18:52:57.273

根据您想要实现它的方式（如果您需要脚本的特定位置），您可以`@section`在您的内部实现一个，`_Layout`这将使您能够从视图本身添加其他脚本，同时仍然保留结构。例如

### _布局

```
<!DOCTYPE html>
<html>
  <head>
    <title>...</title>
    <script src="@Url.Content("~/Scripts/jquery.min.js")"></script>
    @RenderSection("Scripts",false/*required*/)
  </head>
  <body>
    @RenderBody()
  </body>
</html> 
```

### 看法

```
@model MyNamespace.ViewModels.WhateverViewModel
@section Scripts
{
  <script src="@Url.Content("~/Scripts/jqueryFoo.js")"></script>
} 
```

否则，你所拥有的一切都很好。如果您不介意它与输出的视图“内联”，您可以将`<script>`声明放在视图中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-01-21T07:02:45.407

如果您使用的是 Razor 视图引擎，则编辑 _Layout.cshtml 文件。将页脚中的 @Scripts.Render("~/bundles/jquery") 移动到页眉部分，并根据需要编写 javascript / jquery 代码：

```
@Scripts.Render("~/bundles/jquery")
<script type="text/javascript">
    $(document).ready(function () {
        var divLength = $('div').length;
        alert(divLength);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-19T17:37:55.867

您可以像我们在 asp.net 中使用的那样添加脚本标签，同时进行如下客户端验证。

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<script type="text/javascript" src="~/Scripts/jquery-3.1.1.min.js"></script>
<script type="text/javascript">
    $(function () {
       //Your code
    });
</script> 
```

# mysql - 为列映射记录名称的更简单方法？

> ID：14284709
> 
> 赞同：2
> 
> 时间：2013-01-11T18:47:54.927
> 
> 标签：mysql, sql, select, case

我目前正在使用该`REPLACE`函数来更改几个记录名称（整数到它们对应的人类可读名称），如下所示：

```
SELECT SUM(COUNT) AS Actions, replace(replace(replace(replace(replace(replace(EVENT, 2, 'iOS'), 1, 'Web'), 3, 'Android'), 4, 'Windows'), 5, 'Mac'), 6, 'Unknown') AS Platform 
FROM `METRICS_WEEKLY` 
WHERE EVENT IN (1, 2, 3, 4 ,5 ,6) 
GROUP BY EVENT 
```

我想构建一个在`EVENT`列中使用 30 多个数字的查询，并将它们映射到更友好的名称。我无法更改当前表（我不是表架构的创建者）。有没有更简单的方法来映射更大的字段名称组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:51:25.910

您所描述的是[`ENUM`数据类型](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。将列创建为`ENUM`列表的一个，您可以避免所有字符串替换。这些值将以其整数格式存储，并且*必须*是可用选项之一，但将显示为它们的字符串等价物。

```
CREATE TABLE `METRICS_WEEKLY` (
  `COUNT` INT,
  `EVENT` ENUM (
    'Web',
    'iOs',
    'Android',
    'Windows'
    'Mac',
    'Unknown'
  )
); 
```

或者，如果列表很短，则根据适当的规范化创建一个表来保存这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:51:35.467

使用映射表会更容易。

```
替换值
---------------
值数
iOS 2
网页 1
安卓 3
视窗 4
```

然后`JOIN`就`value`和使用了`number`。您可能需要考虑创建关系，以便在更新要替换的值时，它们将级联到子表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T18:52:18.193

你真的，真的，真的想要一个 EventType 参考表。与此同时，这样的事情：

```
select EventName, COUNT(*) as Actions
from Metrics_Weekly mw left outer join
     (select 'iOS' as EventName, 2 as EventId union all
      select 'Web', 1 union all
      select 'Android', 3 union all
      select 'Window', 4 union all
      select 'Mac', 5 union all
      select 'Unknown', 6
     ) eventType
     on mw.Event = evenType.eventId
group by eventName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T18:53:46.013

Try this:

```
SELECT SUM(COUNT) AS Actions, 
        (CASE event 
            WHEN 1 THEN 'Web' 
            WHEN 2 THEN 'iOS' 
            WHEN 3 THEN 'Android'
            WHEN 4 THEN 'Windows' 
            WHEN 5 THEN 'Mac' 
        ELSE 'Unknown' END )  AS Platform
FROM METRICS_WEEKLY
WHERE EVENT IN (1, 2, 3, 4 ,5 ,6) 
GROUP BY EVENT 
```

# forms - 如何在 Symfony2 中验证实体映射表单的子表单？

> ID：14284710
> 
> 赞同：0
> 
> 时间：2013-01-11T18:47:54.817
> 
> 标签：forms, validation, symfony, doctrine-orm, symfony-2.0

我有一个映射到实体 ( `'data_class' => ...`) 的表单。我已经在实体的属性上设置了验证器（通过注释）。

该实体具有`nameTranslations`学说类型的属性 ( ) `array`。我创建了一个由多个字段组成的自定义字段类型，该字段在表单中分配给该字段。每个子表单的字段（类型`text`）都有验证器设置（`NotBlank`）通过`validation_constraint`选项。

我在属性上尝试了各种验证注释`nameTranslations`，包括`Valid()`. 我几乎在任何东西上都尝试了设置 error_bubbling。子表单（字段`nameTranslations`）根本没有得到验证。

子窗体：

```
class TranslatableTextType extends AbstractType
{
    private $langs;

    /**
    * {@inheritDoc}
    */
    public function __construct($multilang)
    {
        $this->langs = $multilang->getLangs();
    }

    /**
    * {@inheritDoc}
    */
    public function buildForm(FormBuilder $builder, array $options)
    {
        foreach($this->langs as $locale => $lang)
        {
            $builder->add($locale, 'text', array(
                'label' => sprintf("%s [%s]", $options['label'], $lang),
                'error_bubbling' => true,
            ));
        }
    }

    /**
    * {@inheritDoc}
    */
    public function getDefaultOptions(array $options)
    {
        $constraints = [
            'fields' => [],
            'allowExtraFields' => true,
            'allowMissingFields' => true,
        ];

        foreach($this->langs as $locale => $lang)
        {
            $constraints['fields'][$locale] = new NotBlank();
        }

        $collectionConstraint = new Collection($constraints);

        return [
            'validation_constraint' => $collectionConstraint,
            'label' => '',
            'error_bubbling' => true
        ];
    }

    /**
    * {@inheritDoc}
    */
    public function getParent(array $options)
    {
        return 'form';
    }

    /**
    * {@inheritDoc}
    */
    public function getName()
    {
        return 'translatable_text';
    }
} 
```

在主窗体中：

```
$builder->add('nameTranslations', 'translatable_text', [
            'label' => 'Name'
        ]); 
```

在实体中：

```
/**
 * @var array
 *
 * @Assert\Valid
 * @ORM\Column(type="array")
 */
protected $nameTranslations; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:33:40.860

我认为您应该为此使用[集合](http://symfony.com/doc/current/reference/forms/types/collection.html)类型而不是自定义类型，或者您的自定义类型应该将集合类型定义为父级。

您可以使用[All](http://symfony.com/doc/current/reference/constraints/All.html)验证器，例如：

```
/**
 * @Assert\All({
 *     @Assert\NotBlank
 * })
 * @ORM\Column(type="array")
 */
 protected $nameTranslations; 
```

它将检查每个数组值是否不为空。

# linux - ISQL 命令导致：无法在 Ubuntu Linux 上使用 unixODBC 和 Pervasive Client 打开 lib 'odbcci.so'

> ID：14284711
> 
> 赞同：2
> 
> 时间：2013-01-11T18:47:56.207
> 
> 标签：linux, unixodbc, pervasive, isql

我无法弄清楚如何通过**ODBC**从 Ubuntu Linux 64bit 连接到 Windows Server 机器上的**Pervasive DB**。

 **我安装了`unixodbc`，然后`32bit Pervasive Client 11sp2`从[这里开始](http://www.pervasivedb.com/psqlv11/Pages/PSQL-v11-Linux-Downloads.aspx)，在将 tar 内容移动到*/usr/local/psql*并执行之后`clientpreinstall.sh`，`clientpostinstall.sh`我执行了`dsnadd`命令，添加了**dba**源。

现在，如果我尝试测试 ODBC 连接，`isql -v dba`我会得到以下信息：

> [ISQL]错误：无法 SQLConnect [01000][unixODBC][驱动程序管理器]无法打开 lib '/usr/local/psql/lib/odbcci.so'：找不到文件

**odbcci.so**存在于该目录中。

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-15T13:22:54.797

这与另一个问题中的问题类似： [Pervasive ODBC on Linux Error [01000][unixODBC][Driver Manager]Can't open lib '/usr/local/psql/lib/odbcci.so' : file not found](https://stackoverflow.com/questions/11092840/pervasive-odbc-on-linux-error-01000unixodbcdriver-managercant-open-lib)

答案是您需要以`psql`Pervasive 安装脚本创建的用户身份运行，或者`.bashrc`在尝试 ODBC 连接之前从该用户的家中获取源文件。**

# semantic-web - 元素语义是 HTML 吗？在微数据环境中呢？

> ID：14284715
> 
> 赞同：4
> 
> 时间：2013-01-11T18:48:07.890
> 
> 标签：semantic-web, word-wrap, semantic-markup, microdata, wbr

简而言之，这是糟糕的 Web 开发和 UX：

![在此处输入图像描述](../Images/4fac17a0d7c2e83869e28a0264efa12e.png)

但是通过使用 CSS3 分词[（代码和演示）](http://jsbin.com/uripod/5/edit)来解决它可能会导致“尴尬的空白”情况和奇怪的截断 - 这是两者的示例：

![在此处输入图像描述](../Images/08424d9a7c4180361558b62d2959db99.png)

也许这没什么大不了的，它的[UX 视角就在这里，但让我们看一下](https://ux.stackexchange.com/questions/31764/hyphenating-urls-and-email-addresses-that-would-overflow-their-container)[其中一种解决方案](https://ux.stackexchange.com/a/31767/21154)的语义：

> 您可以...使用该`<wbr>`元素来指示可选的断词机会。这将告诉浏览器在必要时插入换行符以流到容器内的新行上。

第一个问题：是使用`<wbr>`语义HTML吗？（它至少会优雅地降级吗？）

在任何一种情况下，一般意义上的非语义似乎都是为良好的 UX 功能付出的小代价。

然而，第二个问题是关于大局的：

使用拆分电子邮件地址时是否需要考虑[schema.org](http://schema.org)（微数据/RFDa）的影响？**它在那里仍然有效吗？**`<wbr>`

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:17:36.227

该`wbr`元素[在 HTML5 规范中定义](http://www.w3.org/TR/html5/text-level-semantics.html#the-wbr-element)。所以用起来就好了。如果使用正确（= 根据规范中的定义），您也可以将其称为“语义使用”。

我认为与 micordata/RDFa 结合使用不会有任何问题。通常，您无论如何都会在属性中提供 URL，当然不能包含`wbr`元素：`<a href="mailto:foo@example.com">foo<wbr>@example<wbr>.com</a>`.

对于元素内容，我猜（虽然没有检查）微数据/RDFa 解析器应该使用*没有*标记的文本内容。了解什么是标记，什么是文本，否则例如 FOAF 名称将`<abbr>Dr.</abbr> Foo`代替`Dr. Foo`.

所以你可以打赌 microdata/RDFa 解析器知道 HTML ;)，因此使用它的元素应该不是问题。**

# python - 我怎样才能让我的船发射多发子弹？

> ID：14284716
> 
> 赞同：1
> 
> 时间：2013-01-11T18:48:07.360
> 
> 标签：python, pygame, projectile

好的，所以我正在为学校做这个项目。我应该做一个太空侵略者类型的游戏。我已经完成了我的船移动和射击。现在问题来了，当我尝试多发时，它会擦除​​之前发射的子弹并发射新的子弹，这根本不是一个好位置。我怎样才能让它真正发射多发子弹？

```
while (running == 1):
    screen.fill(white)
    for event in pygame.event.get():
        if (event.type == pygame.QUIT):
            running = 0
        elif (event.type == pygame.KEYDOWN):
            if (event.key == pygame.K_d):
                dir = "R"
                move = True
            elif (event.key == pygame.K_a):
                dir = "L"
                move = True
            elif (event.key == pygame.K_s):
                dir = "D"
                move = True
            elif (event.key == pygame.K_w):
                dir = "U"
                move = True
            elif (event.key == pygame.K_ESCAPE): 
                sys.exit(0)
            elif (event.key == pygame.K_SPACE):
                shot=True
                xbul=xgun + 18
                ybul=ygun
            #if key[K_SPACE]:
                #shot = True
        if (event.type == pygame.KEYUP):
            move = False

    #OBJECT'S MOVEMENTS
    if ((dir == "R" and xgun<460) and (move == True)):
        xgun = xgun + 5
        pygame.event.wait
    elif ((dir == "L" and xgun>0) and (move == True)):
        xgun = xgun - 5
        pygame.event.wait
    elif ((dir == "D" and ygun<660) and (move == True)):
        ygun = ygun + 5
        pygame.event.wait
    elif ((dir == "U" and ygun>0) and (move == True)):
        ygun = ygun - 5

    screen.blit(gun, (xgun,ygun))

    #PROJECTILE MOTION
    #key = pygame.key.get_pressed()

    if shot == True:
        ybul = ybul - 10
        screen.blit(bullet, (xbul, ybul))

    if xbul>640:
        shot=False

    pygame.display.flip()
    time.sleep(0.012) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T18:51:34.200

您只有一个项目符号的变量——xbul 和 ybul。如果您想要多个项目符号，那么您应该将每个项目符号列成一个列表。您可以附加到每个列表以添加新项目符号，弹出以删除旧项目符号，并在绘制时迭代列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:03:14.197

您可以为项目符号创建一个类，其中包含 x 和 y 坐标以及与项目符号相关的其他内容。然后为每个触发按钮按下，创建一个新实例并将其附加到列表中。这样你就可以拥有尽可能多的子弹。
**（更改新** `move` **功能的代码）**

```
class Bullet:
    def __init__(self,x,y,vx,vy):# you can add other arguments like colour,radius
        self.x = x
        self.y = y
        self.vx = vx # velocity on x axis
        self.vy = vy # velocity on y axis
    def move(self):
        self.x += self.vx
        self.y += self.vy 
```

添加到使用`list`和更新项目符号位置的示例代码（`move()`如上）：

```
if shot == True: # if there are bullets on screen (True if new bullet is fired).
    if new_bullet== True: # if a new bullet is fired
        bullet_list.append(Bullet(n_x,n_y,0,10)) # n_x and n_y are the co-ords
                                                 # for the new bullet.

    for bullet in bullet_list:
        bullet.move() 
```

# ember.js - 1个ArrayController，2个collectionView，顺序相反

> ID：14284718
> 
> 赞同：1
> 
> 时间：2013-01-11T18:48:18.010
> 
> 标签：ember.js

1 有 1 个 ArrayController 和 2 个 CollectionView 类（不是实例）共享这个 ArrayController。（内容绑定：sharedArrayController）

两个 collectionView 都需要以相反的顺序显示相同的数组内容（具有不同的渲染）。

Render1CollectionView：obj1，obj2，
obj3 Render2CollectionView：obj3，obj2，obj1

如何告诉 CollectionView 以相反的顺序迭代？

其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:16:33.997

我在另一篇文章中找到了解决方案……而且效果很好

```
reversedContent: function(){
      return this.get('content').toArray().reverse();
    }.property('content.@each').cacheable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:52:33.637

我想我会在控制器中定义一个计算属性，并在视图（或模板）中依赖它

```
YourApp.YourController = Ember.ArrayController.extend({
    reversedContent: function(){
       return this.reverse();
    }.property('@each')
}) 
```

# .htaccess - 强制 htaccess 从最后一个斜杠重写 url

> ID：14284727
> 
> 赞同：1
> 
> 时间：2013-01-11T18:48:52.363
> 
> 标签：.htaccess, rewrite, slash

我需要使用 htaccess 更改以下网址：

```
http://example.com/main/en/index.php?page=pages&page_id=9 
```

到：

```
http://example.com/main/en/pages/9.html 
```

我按照以下规则完成了它：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)\.html$ /main/fa/?index.php?page=$1&page_id=$2 [L] 
```

但是有一个问题，这条规则使我的显示网址为：

```
http://example.com/pages/9.html 
```

我想在最后一个斜杠之后更改 url。

因为我必须有不止一种语言，它会与其他语言发生冲突。我该如何写这个规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:56:20.770

也许这就是你正在寻找的：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ([^/]+)/([^/]+)/([\d]+)\.html/?   [NC]
RewriteRule  .*          main/%1/index.php?page=%2&page_id=%3 [L] 
```

将在内部重定向：

`http://example.com/main/LangCode/PageName/PageID.html`

到：

`http://example.com/main/LangCode/index.php?page=PageName&page_id=PageID`

# ruby-on-rails - 缺少现有模板

> ID：14284728
> 
> 赞同：0
> 
> 时间：2013-01-11T18:48:57.577
> 
> 标签：ruby-on-rails

在我看来

```
 workshop/app/views/administration/dashboards/show.html.haml 
```

我渲染部分

```
 = render :partial =>  "administration/dasboards/activity_list" 
```

但我得到了一个缺少的模板：

```
Missing partial administration/dasboards/activity_list with {:locale=>[:fr], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
 * "/Users/yves/github/local/workshop/app/views" 
```

但是我的结构中有

```
 views
       dashboards
         _activity_list.html.haml 
```

我试图从另一个控制器渲染另一个视图，它可以工作.. 有什么问题？（在开发环境中......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:52:34.320

您有一个拼写错误，您正在编写`dasboards instead of`仪表板`，您的结构也应该是：

```
views
  administration
    dashboards
      _activity.html.haml 
```

如果部分在同一个文件夹中，那么你可以简单地做

`= render 'activity_list'`

# c# - 检查用户是否属于管理员组 - C#

> ID：14284730
> 
> 赞同：0
> 
> 时间：2013-01-11T18:49:11.457
> 
> 标签：c#, active-directory, windows-server-2008

我有代码来验证用户是否存在于本地计算机的管理员组中。如果用户直接存在于管理员组中，则代码可以正常工作

```
using (DirectoryEntry groupEntry = new DirectoryEntry("WinNT://./Administrators,group")) {
    foreach (object member in (IEnumerable)groupEntry.Invoke("Members"))
    {
        using (DirectoryEntry memberEntry = new DirectoryEntry(member))
        {
            if (memberEntry.Name.ToLower() == UserName.ToLower())
            {
                IsUserAdmin = true;
                break;
            }
        }
    } } 
```

但是，如果用户存在于 AD 组中并且该 AD 组已添加到管理员组中，则代码将失败。另一种情况是用户是嵌套 AD 组的一部分，最终的 AD 组添加到管理员组中。

当直接添加用户并且存在相关的 AD 组时，我们如何检查用户是否属于管理员组？

我想让代码在 Windows Server 2008、2008 R2 和 2012 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:30:04.547

为什么不直接找到用户的所有 AD 组，然后像以前一样检查该组是否存在于 Administrators 组中？[您可以按照此处](https://stackoverflow.com/questions/4460558/how-to-get-all-the-ad-groups-for-a-particular-user)的解决方案找到用户的所有 AD 组。然后，您可以修改搜索条件，例如：

```
var adminGroupMembers = (IEnumerable)groupEntry.Invoke("Members");
....
//where userGroups contains all AD group names to which user belongs to
foreach(var group in userGroups)
{ 
   if(adminGroupMembers.Contains(group))
   {
      IsUserAdmin = true;
      break;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-05T15:43:56.450

这可以判断他们是否属于管理员组：

```
 WindowsPrincipal principal = new WindowsPrincipal(WindowsIdentity.GetCurrent());
    return principal.IsInRole(WindowsBuiltInRole.Administrator); 
```

# c# - RibbonGroup 导致其子级丢失 DataContext

> ID：14284735
> 
> 赞同：1
> 
> 时间：2013-01-11T18:49:30.260
> 
> 标签：c#, wpf, ribbon

我正在开发一个*WPF*项目，现在我正在研究*功能区区域*。

在*功能区*内部，我有一些控件，例如`RibbonComboBox`,`RibbonTextBox`等。

我有几个`RibbonTab`，`Ribbon`所以我为每个 RibbonTab 设置了一个视图模型，如下所示：

```
<rb:Ribbon Name="Ribbon">

        <rb:RibbonTab Header="Tab One" Name="tab1">

            <rb:RibbonTab.DataContext>
                <vm:TabOneViewModel />
            </rb:RibbonTab.DataContext> 
```

因此，这些选项卡中的每个控件都继承了它们各自的视图模型。

当我运行应用程序时，一切都按预期工作。当我将容器窗口的大小调整为非常小的尺寸时，问题就开始了，在这样做之后：***每个控件都失去了它们的绑定，因为它们的 DataContext 被一个名为`DisconnectedItem`.***

我做了一些研究，发现这是由于控件不再是可视化树的一部分，因此绑定引擎将它们的 DataContext 设置为`DisconnectedItem`.

我能做些什么来防止我的控制失去他们的`DataContext`？

**编辑：**

我刚刚发现主要问题来自`RibbonGroup`控件，该控件在折叠后导致其可视子项丢失其 DataContext。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:00:44.357

我通常`DataContext="{Binding Mode=OneTime}"`为所有功能区控件添加行作为解决方法，它可以完全解决问题。但是，您将无法`DataContext`多次更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:17:56.183

[我刚刚在这里](http://social.msdn.microsoft.com/Forums/en/wpf/thread/ca215e48-f946-4901-b5ed-07d0661de26c)找到了`RibbonGroup`控制问题的解决方法

我采取的解决方案是创建一个从控件继承的新`RibbonGroup`控件。

```
 public class MyRibbonGroup : RibbonGroup
    {
    public MyRibbonGroup() 
        : base()
    {
    }

    protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        base.OnPropertyChanged(e);

        // Force the bindings to be restored after 
        // the ribbon group collapsed or expanded to a menu button.
        if (e.Property == RibbonGroup.IsCollapsedProperty)
        {
            object objDataContext = this.DataContext;
            this.DataContext = null;
            this.DataContext = objDataContext;
        }
    }
} 
```

# jquery - 将类名添加到现有标签并在其上触发事件

> ID：14284737
> 
> 赞同：1
> 
> 时间：2013-01-11T18:49:36.340
> 
> 标签：jquery, asp.net-mvc-3

我有一个锚标签如下

```
<a href="#divEditPrivilegeLevelForFile" id="filePrivilege" class="inline UpdateLink" title="Edit File Privilege Level" data-fileid="@item.FileId">[ &Delta; ]</a> 
```

我有一个绑定到这个标签的文件列表。

我想在这个锚标签上触发一个事件，但我不能使用 id，因为 id 会重复自己。

所以我必须使用类名，但它不适用于类名，因为它之间包含空格。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:51:16.737

使用 jQuery，您只需按该类选择它，它会自行处理检查空格/等...

```
$('.UpdateLink').on( // your event etc 
```

如果你需要它有两个类，你可以这样做：

```
$('.inline.UpdateLink') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:51:40.027

要同时选择具有 2 个类的元素，请使用：

```
$(".inline.UpdateLink").doSomething(); 
```

就像在 CSS 中一样。

# c# - 我每天大约有 3000 万行要在 SQL Server 中插入更新，我有哪些选择？

> ID：14284741
> 
> 赞同：3
> 
> 时间：2013-01-11T18:49:39.967
> 
> 标签：c#, azure-sql-database, sqlbulkcopy

我每天大约有 3000 万行要在 SQL Server 中插入更新，我有哪些选择？

如果我使用 SqlBulkCopy，它是否处理不插入已经存在的数据？

在我的场景中，我需要能够在不重复数据的情况下使用相同的数据一遍又一遍地运行它。

目前我有一个带有更新语句和插入语句的存储过程，它从数据表中读取数据。

我应该寻找什么来获得更好的性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:00:05.937

执行此类操作的常用方法是维护一个对它们没有限制的永久工作表（或多个表）。通常这些可能存在于同一服务器上的单独工作数据库中。

要加载数据，请清空工作表，通过 BCP/批量复制将数据爆破。加载数据后，您可以执行任何必要的清理和/或转换来准备新加载的数据。完成后，作为最后一步，您可以通过执行更新/删除/插入操作来实现旧数据和新数据之间的增量所必需的操作，或者通过简单地截断真实表并重新加载它们来将数据迁移到真实表。

另一种选择，如果您有类似稳定的数据流流入，可能是设置一个守护程序来监视数据的到达，然后进行插入。例如，如果您的数据是平面文件，通过 FTP 或类似方式将文件放入目录中，则守护程序可以监视目录的更改并在内容到达时执行必要的工作（如上所述）。

需要考虑的一件事是，如果这是一个生产系统，那么执行大量插入/删除/更新语句可能会在事务进行时导致阻塞。此外，巨大的事务失败和回滚也有其自身的缺点：

*   回滚可能需要相当长的时间来处理。
*   在回滚期间持有锁，因此有更多的机会在数据库中进行阻塞和其他争用。
*   最糟糕的是，在这一切发生之后，你没有取得任何前进，可以这么说：大量的时间和精力，你又回到了你开始的地方。

因此，根据您的情况，您最好以较小的批次进行插入/更新/删除，以保证您取得进展。24 小时内有 3000 万行计算结果是 c。每秒 350 个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:00:49.507

Bulk insert into a holding table then perform either a single Merge statement or an Update and an Insert statement. Either way you want to compare your source table to your holding table to see which action to perform

# android - 从 android 应用程序将数据发布到 aspx 表单

> ID：14284743
> 
> 赞同：0
> 
> 时间：2013-01-11T18:49:45.590
> 
> 标签：android, asp.net

我想将数据从我的应用程序发送到[http://studentssp.wit.ie/Timetables/POSTT.aspx](http://studentssp.wit.ie/Timetables/POSTT.aspx)该页面，但我不知道该怎么做。我在 atm 中尝试过的只是将一些表单值添加到 url 以查看是否会改变任何内容，但它没有。例如，我将 cboSchool=EP（选择的名称值为 cboSchool，成人教育学校的值为 EP）到 url 中，以查看它是否只会加载有关该学校的信息。[http://studentssp.wit.ie/Timetables/POSTT.aspx?cboSchool=EP](http://studentssp.wit.ie/Timetables/POSTT.aspx?cboSchool=EP) 我知道 android 并且对 aspx 一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:52:09.703

1-你说的是基于web的移动应用，所以如果你需要和服务器端交互，你就需要web service。

请检查您需要与您需要的网站集成的网络服务。

2-大部分网络服务将是（Restful 格式，SOAP）。Restful 更容易，您可以使用任何开源解析 SAX、DOM 解析 XML 格式或 Json Parser 解析数据。

我会给你一个简单的例子：

这是一个货币转换器 API，我们将在 URL 中发送参数，这意味着 http 获取请求，例如： [http ://www.google.com/ig/calculator?hl=en&q=100GBP=?USD](http://www.google.com/ig/calculator?hl=en&q=100GBP=?USD)

有 "?hl=en&q=1GBP=?USD" 任何参数有 2 个部分是 1-key 2-value 。h1 是键，en 是值。q 是关键，1GEP=?USD 是价值。

并且响应将采用 json 格式，例如 {lhs: "100 英镑",rhs: "161.47 美元",error: "",icc: true} 你可以看到这是解析 json 的[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。

我希望这对你有帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:01:46.257

这应该让你开始：

```
HttpClient httpClient = new DefaultHttpClient();
HttpConnectionParams.setConnectionTimeout(httpClient.getParams(), TIMEOUT_MS);
HttpConnectionParams.setSoTimeout(httpClient.getParams(), TIMEOUT_MS);
HttpPost httpPost = new HttpPost(url);  
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("name1", "value1"));  
nameValuePairs.add(new BasicNameValuePair("name2", "value2")); 
nameValuePairs.add(new BasicNameValuePair("name3", "value3"));   
// etc...
httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
HttpResponse response = httpClient.execute(httpPost); 
```

我认为这应该适用于您正在尝试做的事情。我将 TIMEOUT_MS 设置为 10000 （所以，10 秒）

然后，您可以使用以下内容读出服务器的响应：

```
BufferedReader br = new BufferedReader(new InputStreamReader(response.getEntity().getContent 
```

# jquery - 从 jQuery 加载和使用 Dojo 小部件

> ID：14284745
> 
> 赞同：1
> 
> 时间：2013-01-11T18:49:55.303
> 
> 标签：jquery, dojo

我知道论坛上有很多关于这个主题的问题，但我仍然找不到答案......

我有基于 jQuery 的 JS 应用程序。现在我必须对一些基于 Dojo 的小部件进行一些集成。我想仅在必要时加载 Dojo 和小部件，因此希望异步执行此操作。我将 Dojo 存储在我的站点上，因此请从我的空间加载它。

这是我尝试在 jQuery 中使用的代码：

```
$.getScript("/Content/3rd/dojo/dojo/dojo.js")
.done(function (script, textStatus) {
    dojo.ready(function () {
        dojo.require("dojo.io.script");

        alert('Dojo ready!')
    });
})
.fail(function (jqxhr, settings, exception) {
    alert('error!');
}); 
```

当我尝试调用`dojo.require("dojo.io.script");`异步请求所需的调用时，我的问题从一开始就开始了，我看到它尝试从以下 Url 加载 dojo.io.script - '/Example/io/script.js' 而这并不完全是它所在的地方。我怀疑我错过了一些配置问题，但不明白是哪一个......有人可以帮我解决它吗？

也许这是一个微不足道的问题，但我从未使用过 Dojo，只需要与基于 Dojo 的小部件进行快速集成，我的主要应用程序是 jQuery ......

**解决方案：**

以防万一有人感兴趣，我使用下一个脚本来加载小部件：

```
//  Load Dojo and scripts for JSDraw2 asyncronously
dojoConfig = {
    baseUrl: "/Content/3rd/dojo-1.8.3/dojo"
};

$.getScript("/Content/3rd/dojo-1.8.3/dojo/dojo.js")
.done(function (script, textStatus) {
    dojo.ready(function () {
        dojo.require("dojo.io.script");

        var deferred = dojo.io.script.get({ url: "/Content/3rd/JSDraw2.1.4/JSDraw2.js" });
        deferred.then(function () {
            // init the Dojo widget... 
            oThis.jsDraw = new JSDraw(oThis.element.get(0));
        }, function () {
            alert('Cannot load Scilligence.JSDraw2.js');
        });
    });
})
.fail(function (jqxhr, settings, exception) {
    alert('Cannot load Dojo.js');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:58:18.447

使用 Dojo 需要一个[配置](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)，这需要在 dojo.js 脚本被拉入之前加载。

[Dojo 文档](http://dojotoolkit.org/documentation/)建议将配置放入您的索引文件（或等效文件）头中，但我想您可以在下拉 dojo 代码之前创建它，特别是如果您知道何时需要它。

因此，也许在您引入 dojo.js 之前尝试创建一个名为“dojoConfig”的全局变量。这是我不久前在 Web 应用程序上使用的示例配置，但阅读它也会对您有所帮助，以便更全面地了解它的原因和用途，以及 dojo 的用途和时间。我建议至少阅读[dojo start](http://dojotoolkit.org/documentation/tutorials/1.8/start/)和[hello dojo](http://dojotoolkit.org/documentation/tutorials/1.8/start/)教程，然后阅读基于[配置](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)和[小部件的](http://dojotoolkit.org/documentation/#widgets)教程。您可能还想了解 dojo 如何使用[AMD 原则](http://dojotoolkit.org/documentation/tutorials/1.8/modules/)。

```
<script>
    var dojoConfig = {
        baseUrl: "./",//this is where dojo will lok from for all locations configured
        async: true,
        isDebug: false,
        parseOnLoad: false,//false to allow for us to call this independently in js later on

        //here are the packages dojo will be aware of and related js files
        packages: [
            //dojo specific packages
            {name: "dojo", location: "libs/dojo/1.8.1/dojo", main: "dojo.js.uncompressed.js"}, //dojo.js.uncompressed.js for dev, use dojo.js for release
            {name: "dijit", location: "libs/dojo/1.8.1/dijit"},
            {name: "dojox", location: "libs/dojo/1.8.1/dojox", main: "dojo.js"}
        ]
    };
</script> 
```

我的配置包括 dojox 和 dijit，但当然，如果您不需要它们，那么只需删除这些行。尽管您确实提到了 dojo 小部件，但 dijit 是 dojo 获得“小部件功能”的地方。

您需要更改配置的基本 url 以反映您自己的 dojo 位置，同样适用于这些位置。有关此属性和其他属性的更多详细信息，请查看[dojo 配置教程](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)。

抱歉上面有很多链接，虽然 dojo 1.8 是一个优秀的框架，尤其是在使用模块时，它需要一个学习曲线才能开始按照你的意图使用它。我以前从来没有尝试过像那样在游戏后期加载道场，所以我很想听听你是怎么做到的。

总之祝你好运。

# visual-studio-2010 - 使用 IIS 的 Web 项目，但我收到有关 IISExpress 配置的错误

> ID：14284746
> 
> 赞同：17
> 
> 时间：2013-01-11T18:49:58.150
> 
> 标签：visual-studio-2010, iis, configuration

我正在尝试加载一个使用端口主机头名称的项目。我的主机文件有 127.0.0.1 mysite

尝试在 VS2010 中加载项目时出现以下错误。

> Web 项目 'Client.Web'的 URL ' `http://mysite`' 配置为使用 IIS Express 作为 Web 服务器，但 URL 当前配置在本地 IIS Web 服务器上。要打开此项目，您必须使用 IIS 管理器从本地 IIS Web 服务器中删除使用此 URL 的绑定。

问题是我没有使用 IIS Express，并且网站配置为使用 IIS。我在 iis 中创建了一个站点来使用主机头名称。

我有其他 Web 项目作为应用程序在端口 81 ex 上运行`http://mysite/MyService`，不会导致此问题。

我该怎么做才能让项目使用 IIS 在端口 mysite root 下运行并且仍然使用 VS2010？

如果我只使用端口号，也会发生同样的事情，例如：127.0.0.0:81

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-30T20:43:13.913

老问题，但这里有一个答案：

在您的 Client.Web.csproj 或 Client.Web.csproj.user 文件中，搜索“UseIISExpress”并将该值设置为`false`. 它将在这两个文件之一中。

然后VS2010应该能够打开并运行/调试项目。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-10T03:57:53.197

就我而言， .csproj.user 文件覆盖了 .csproj 文件。解决方案是删除 .csproj.user 文件并重新加载项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T09:21:52.070

老问题，但这对我来说是个问题。

对我有用的是编辑 .csproj.user 文件并将元素 UseIIS 设置为 true。

显然，这类似于删除 .user 文件，但这样可以保留所有其他设置

# c - 字符串的范围查询

> ID：14284752
> 
> 赞同：-6
> 
> 时间：2013-01-11T18:50:31.853
> 
> 标签：c, data-structures

我的订单定义为'A < a < B < b ...< Z < z'。我必须找出给定的字符串是否在范围内。前任。如果我的范围是 AaA - BaB，AA 或 AaaB 在范围内，但不是 CbAA。

我正在寻找任何可以帮助我开始的指针、想法和建议。我将在 C 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:57:38.873

因此，您需要实现的只是一个根据您的规则比较两个字符串的函数。这是一种修改过的词汇排序：

```
int compare_letters(char x, char y) {
  char lx = tolower(x);
  char ly = tolower(y);
  if (lx != ly) {
    return lx < ly;
  } else {
    return x < y;
  }
}
int smaller(const char* a, const char* b) {
  .. use the above function ... 
} 
```

现在使用上面的函数并检查给定的字符串 x 是否在 (a,b) 范围内，检查是否`smaller(a, x)`和`smaller(x, b)`. 而已。

关于更小函数的一些技巧 - 逐个字符比较字符串，如果两个字符不同，则返回它们的`compare_letter`. 如果其中一个字符串用完了字母，请考虑将其变小。

# java - 矩形中的 Java 中心文本

> ID：14284754
> 
> 赞同：12
> 
> 时间：2013-01-11T18:50:38.697
> 
> 标签：java, swing, jframe, drawstring

我使用`drawString()`图形绘制字符串的方法，但我想将我的文本居中在一个矩形中。我该怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-11T19:03:45.020

我用它来在 JPanel 上居中文本

```
 Graphics2D g2d = (Graphics2D) g;
        FontMetrics fm = g2d.getFontMetrics();
        Rectangle2D r = fm.getStringBounds(stringTime, g2d);
        int x = (this.getWidth() - (int) r.getWidth()) / 2;
        int y = (this.getHeight() - (int) r.getHeight()) / 2 + fm.getAscent();
        g.drawString(stringTime, x, y); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-11T21:53:35.137

居中文本有很多“选项”。你是绝对居中还是基于基线？

![在此处输入图像描述](../Images/9090bbb00968fc21524977a083a8d015.png)

就个人而言，我更喜欢绝对中心位置，但这取决于你在做什么......

```
public class CenterText {

    public static void main(String[] args) {
        new CenterText();
    }

    public CenterText() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int height = getHeight();
            String text = "This is a test xyx";

            g.setColor(Color.RED);
            g.drawLine(0, height / 2, getWidth(), height / 2);

            FontMetrics fm = g.getFontMetrics();
            int totalWidth = (fm.stringWidth(text) * 2) + 4;

            // Baseline
            int x = (getWidth() - totalWidth) / 2;
            int y = (getHeight() - fm.getHeight()) / 2;
            g.setColor(Color.BLACK);

            g.drawString(text, x, y + ((fm.getDescent() + fm.getAscent()) / 2));

            // Absolute...
            x += fm.stringWidth(text) + 2;
            y = ((getHeight() - fm.getHeight()) / 2) + fm.getAscent();
            g.drawString(text, x, y);

        }

    }

} 
```

# html - bootstrap：如何在 row-fluid div 中使用进度条？

> ID：14284756
> 
> 赞同：1
> 
> 时间：2013-01-11T18:50:48.877
> 
> 标签：html, twitter-bootstrap

使用引导程序，我想在行流体 div 中的进度条旁边放置一个按钮。我无法弄清楚为什么它不起作用。这是我的代码。任何想法？

```
<!DOCTYPE html>
<html>
<head>
    <!-- Bootstrap -->
    <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
</head>
<body>
    <div class="row-fluid">
        <div class="span2">button</div>
        <div class="span10 progress">
            <div class="bar bar-info" style="width: 50%;">
                bar10
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:29:39.017

您需要将进度 div 包装在 span10 div 中，如下所示：

```
<div class="row-fluid">
    <div class="span2">button</div>
    <div class="span10">
        <div class="progress">
            <div class="bar bar-info" style="width: 50%;">
                bar10
            </div>
        </div>
    </div>
</div> 
```

# ruby-on-rails - Rails 3：通过计算孩子来过滤结果

> ID：14284757
> 
> 赞同：0
> 
> 时间：2013-01-11T18:50:56.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我正在开发一个批准系统，如果一个示例的负面批准多于正面批准，它将被过滤掉。

```
class Set < ActiveRecord::Base
  has_many :examples
end

class Example < ActiveRecord::Base
  has_many :approvals, as: :approvable
end

class Approval < ActiveRecord::Base
  belongs_to :approvable, polymorphic: true
  belongs_to :example
  attr_accessible :choice #boolean
end 
```

我可以通过调用来获得属于示例的所有批准`Example.approvals`。

我想知道的是，是否有可能在示例模型上创建一个方法，然后我可以使用一个 la`Example.approved`来通过单个查询返回 true 或 false，具体取决于该示例是否有更多 Approvals 的 true 或 false。最终，我只想调用已通过调用批准的集合的示例`Set.approved_examples`。

Example.approved 我可以用

```
class Example < ActiveRecord::Base
  ...
  def approved
    if approvals.where(choice: true).count > approvals.where(choice: false).count
      return true
    end
    false
  end
end 
```

虽然这需要两个查询。

`Set.approved_examples`看起来像[这里](http://sqlfiddle.com/#!12/d42fd/1)的 SQL Viewapproved_examples但如果我想要在 Set 模型上使用这样的范围，我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:34:44.837

好的，根据您的评论，我想我误解了您的问题，但也许您可以尝试这样的事情：

```
Example.all.select { |example| example.approved == true } 
```

这将为您提供所有已批准示例的数组。

```
Set.first.examples.all.select { |example| example.approved == true } 
```

这将为您提供属于第一组记录的所有已批准示例的数组。

我认为可能有一种更优化的方法可以做到这一点，但这确实有效。

# php - 使用 php 从 JSON 获取 @attributes

> ID：14284760
> 
> 赞同：0
> 
> 时间：2013-01-11T18:51:02.277
> 
> 标签：php, json

我需要使用 php 从 json 中获取 @attribute 值。

我需要使用 php 获取总计、附加费总计、nightlyRateTotal、maxNightlyRate 值。

如何使用 php 获取值？

如何使用 php 获得总金额 335.72 ？

```
 [RateInfo] => stdClass Object
                                    (
                                        [@rateChange] => false
                                        [@promo] => true
                                        [@priceBreakdown] => true

                                        [ChargeableRateInfo] => stdClass Object
                                            (
                                                [@total] => 335.72
                                                [@surchargeTotal] => 44.42
                                                [@nightlyRateTotal] => 291.3
                                                [@maxNightlyRate] => 145.65
                                                [@currencyCode] => USD
                                                [@commissionableUsdTotal] => 291.3
                                                [@averageRate] => 145.65
                                                [@averageBaseRate] => 171.35

                                            )

                                    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:08:53.833

您可以将其类型转换为数组：

```
$array = (array)$object;
echo $array['ChargeableRateInfo']['@surchargetotal']; 
```

您可以编码为 JSON，然后再次解码为关联数组

```
$array = json_decode(json_encode($object), true);
echo $array['ChargeableRateInfo']['@surchargetotal']; 
```

由于您没有提供其他信息，这是我最好的猜测。

# c# - “在源代码中显示线程”按钮是否在 VC# 2010 Express 中执行任何操作？

> ID：14284767
> 
> 赞同：6
> 
> 时间：2013-01-11T18:51:19.927
> 
> 标签：c#, visual-studio-2010

Visual C# 2010 **Express**版本有一个“在源代码中显示线程”按钮。它已启用，单击它时会更改状态等，但它似乎没有做任何事情。悬停在边缘不会在按下时在工具提示中产生任何线程信息。

我正在寻找一种方法来调试有时在调试时收到的“自上一步以来进程或线程已更改”消息。VC# Express 似乎没有线程窗口。在 Express 中调试时，您如何查看您所在的线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-02T13:07:51.993

它在使用多线程应用程序时提供额外的调试信息，并且必须在调试会话开始之前激活。

> 启用此选项后，您将获得一些非常漂亮的视觉指示器来显示有关您的线程的信息。如果您仔细观察，您会看到断点符号实际上有一条红色和蓝色的波浪线穿过它，并且在其下方您会看到一个类似的标记。如果将鼠标悬停在线程标记上，您将看到一个调试工具提示，显示在该位置执行的所有线程。如果您注意到还有一些源代码行以灰色阴影表示，这表明另一个线程正在同一位置执行。

取自[这里](http://geekswithblogs.net/sdorman/archive/2009/02/14/visual-studio-2008-debugging-tricks-ndash-multi-threaded-debugging.aspx)。另一个“特性”，至少如果你使用 C++ 的话，是它大大减慢了速度。

# android - 添加操作栏时出错

> ID：14284768
> 
> 赞同：3
> 
> 时间：2013-01-11T18:51:20.877
> 
> 标签：android, android-actionbar

我正在尝试通过针对 SDK 版本 11 来更新我的 Honeycomb 应用程序。我将我的选项添加为操作栏中的项目，并在我的“/res/menu/fileName.xml”中添加以下内容：

```
 android:showAsAction="ifRoom|withText" 
```

但是，我收到以下错误：

```
 "error: No resource identifier found for attribute 
'showAsAction' in package 'android" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:55:48.123

Go to properties and check you had set your project build target to build with the Honeycomb SDK.

# perl - Perl - 修改嵌套的多寄存器 XML 标签

> ID：14284776
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:51:52.393
> 
> 标签：perl, xml-parsing

我有一个复杂的多寄存器文档 xml，我需要在 Perl 中解析它以输出不同的格式。

输入xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
     <response>
     <result name="response" numFound="58582" start="0"> 
     <doc>
        <str name="body">Have a great time at this park!</str><int name="is_park_id">317851</int><str name="ss_image_thumb_small"/>
    <str name="title">Playground</str>    
     </doc>
     <doc>
<str name="body">Have a great time at this park!</str><int name="is_park_id">317851</int><str name="ss_image_thumb_small"/>
    <str name="title">Playground</str>    
     </doc>
     </result>
     </response> 
```

所需的输出格式是：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
     <Feed>
     <Products>
     <Product>
<Description>Have a great time at this park!</Description><ExternalId>PF317851</ExternalId><ImageUrl/>
     <Name>Playground</Name>
</Product>
<Product>
<Description>Have a great time at this park!</Description><ExternalId>PF317851</ExternalId><ImageUrl/>
     <Name>Playground</Name>
</Product>
     </Products>
     </Feed> 
```

`<str name="body">`应该被视为描述，`<int name="is_park_id">`应该被视为`<ExternalId>`并且`<str name="title">`应该被视为`<Name>`。

您能帮助将 XML 格式化为新格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:37:36.930

我刚刚在您的文件上尝试了 XML::Simple。这是我的程序：

```
#! /usr/bin/env perl
#

use strict;
use warnings;
use feature qw(say);

use XML::Simple;
use Data::Dumper;

my $xml_ref = XMLin("test.xml");

say Dumper $xml_ref; 
```

这是输出：

```
VAR1 = {
          'result' => {
                      'name' => 'response',
                      'doc' => {
                               'int' => {
                                        'content' => '317851',
                                        'name' => 'is_park_id'
                                      },
                               'str' => {
                                        'body' => {
                                                  'content' => 'Have a great time at this park!'
                                                },
                                        'ss_image_thumb_small' => {},
                                        'title' => {
                                                   'content' => 'Playground'
                                                 }
                                      }
                             },
                      'numFound' => '58582',
                      'start' => '0'
                    }
        }; 
```

它完美地解析了您的 XML 文件。

您了解 Perl 引用以及如何在 Perl 中对哈希进行哈希处理吗？那可能是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:38:40.287

开始了：

```
#!/usr/bin/env perl
use 5.010;
use strict;
use warnings qw(all);

use Data::DPath qw(dpath);
use File::Slurp;
use XML::Hash::LX;

# parse XML and store as a nested Perl hash
my $xml = xml2hash(read_file('input.xml'));

# from/to key mapping
my $from_to = {
    body                => 'Description',
    is_park_id          => 'ExternalId',
    ss_image_thumb_small=> 'ImageUrl',
    title               => 'Name',
};

# translate one bucket
my %result =
    map {
        $from_to->{$_} => (
            $xml ~~
            dpath qq(//*[key eq "-name" and value eq "$_"]/../#text)
        )->[0] // ''
    } keys %$from_to;

# output new XML
say hash2xml({
    Feed => {
        Products => {
            Product => \%result,
        },
    },
}); 
```

不过，使用 XPath 会更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:44:04.117

我使用 XML::LibXML 来满足我在 perl 中的所有 XML 需求。

```
use XML::LibXML;

my @records;

# parse input

{
    my $dom = XML::LibXML->load_xml( location => 'input.xml' );

    my $root_node = $dom->documentElement;  # <response> tag

    for my $doc_node ( $root_node->getChildrenByTagName('doc') ) {

        my $record = {};    

        for my $node ( $doc_node->childNodes ) {
            $record{name} = $node->getAttribute('name');
            $record{value} = $node->textContent;
        }

        push @records, $record;
    }
}

# create output

{
    my $dom = XML::LibXML::Document->new('1.0',$some_encoding);

    my $root_node = $doc->createElement('Feed');

    my $products_node = $root_node->createElement('Products');

    for my $record ( @records ) {

        my $pnode = $products_node->createElement('Product');

        my $dnode = $pnode->createElement('Description');

        $dnode->appendText( $record->{body} );

        my $nnode = $pnode->createElement('Name');

        $nnode->appendText( $record->{name} );

        # ...

    }

    print $dom->toString;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T21:41:55.270

这是 XML::SAX/XML::Simple 版本：

```
#!/usr/bin/env perl
package XML::SAX::Handler::Parks;
use strict;
use warnings qw(all);

use base qw(XML::SAX::Base);

sub new {
    return bless {
        data    => '',
        from_to => {
            body                => 'Description',
            is_park_id          => 'ExternalId',
            ss_image_thumb_small=> 'ImageUrl',
            title               => 'Name',
        },
        product => {},
        products=> [],
        this    => '',
    } => __PACKAGE__;
}

sub start_element {
    my ($self, $el) = @_;
    $self->{data} = '';
    if ($el->{Name} =~ /^(?:int|str)$/x) {
        while (my (undef, $attr) = each %{$el->{Attributes}}) {
            if ($attr->{Name} eq 'name') {
                $self->{this} = $attr->{Value};
            }
        }
    }
    return;
}

sub end_element {
    my ($self, $el) = @_;
    my $key = $self->{from_to}{$self->{this}};
    $self->{product}{$key} = $self->{data};
    if ($el->{Name} eq 'doc') {
        push @{$self->{products}}, { %{$self->{product}} };
        $self->{product} = {};
    }
    return;
}

sub characters {
    my ($self, $data) = @_;
    $self->{data} .= $data->{Data};
    return;
}

1;

package main;
use strict;
use warnings qw(all);

use XML::Simple;
use XML::SAX::PurePerl;

my $handler = XML::SAX::Handler::Parks->new;
my $parser = XML::SAX::PurePerl->new(Handler => $handler);

$parser->parse_file(\*DATA);

print XMLout(
    {
        Products => {
            Product => $handler->{products},
        },
    },
    KeyAttr     => [],
    NoAttr      => 1,
    RootName    => 'Feed',
    XMLDecl     => 1,
);

__DATA__
<?xml version="1.0" encoding="UTF-8"?>
<response>
  <result name="response" numFound="58582" start="0">
    <doc>
      <str name="body">Have a great time at this park!</str>
      <int name="is_park_id">317851</int>
      <str name="ss_image_thumb_small"/>
      <str name="title">Playground</str>
    </doc>
    <doc>
      <str name="body">hello world</str>
      <int name="is_park_id">12345</int>
      <str name="ss_image_thumb_small"/>
      <str name="title">Park</str>
    </doc>
  </result>
</response> 
```

# jquery - 在制作另一个动画之前关闭打开的菜单

> ID：14284783
> 
> 赞同：2
> 
> 时间：2013-01-11T18:52:16.687
> 
> 标签：jquery, drop-down-menu, menu

我正在尝试，但仍在寻找解决此问题的最佳方法。我有多个下拉菜单。我正在尝试检查其他打开的菜单，关闭它们，然后在单击的菜单上运行动画，或者如果单击的菜单已经打开，则只需关闭单击的菜单。这是我到目前为止所拥有的。

```
$('ul.primary li').click(function(event) {
            if ($(this).children('ul.drop').is(':visible')) {
                $(this).children('ul.drop').slideUp(function() {
                    $(this).parent('li').removeClass('active');
                });
            }
            else if ($(this).siblings().children('ul.drop').is(':visible')) {
                        $(this).siblings().children('ul.drop').slideUp(function() {
                            $(this).parent('li').removeClass('active');
                        });
                        $(this).children('ul.drop').slideDown(function() {
                            $(this).parent('li').addClass('active');
                        });
            }
            else {
                $(this).children('ul.drop').slideDown(function() {
                    $(this).parent('li').addClass('active');
                });
            }
        }); 
```

编辑：我无法弄清楚如何在单击下拉动画打开之前关闭打开的下拉动画。JsFiddle：http: [//jsfiddle.net/JG9dB/](http://jsfiddle.net/JG9dB/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:31:29.977

这就是我将如何去做......

JAVASCRIPT：

```
$('ul.primary>li').click(function(event) {
  var li = $(this);
  var liOld = $('ul.active').parents("li");

  if($('ul.active').length!=0){
      $('ul.active').removeClass('active').slideUp('slow', function(){
        if(li.index() != liOld.index()){
           li.children('ul.drop').slideDown('slow').addClass('active');
        }
      });
  }
  else{
     $(this).children('ul.drop').slideDown('slow').addClass('active');
  }
}); 
```

演示：http: [//jsfiddle.net/JG9dB/35/](http://jsfiddle.net/JG9dB/35/)

这应该解决这个问题。如果您还有其他问题，请告诉我！

# python - 让 Ghostscript 在 Windows 7 64 位中输出（python 编程）

> ID：14284784
> 
> 赞同：-1
> 
> 时间：2013-01-11T18:52:16.493
> 
> 标签：python, windows, ghostscript

我已经用尽了所有的努力，仍然对为什么这个简单的程序不会输出 tiff 文件感到困惑。它应该只提取一个 PDF 文件，将其转换为 tiff 并增强图像。无论如何，我都不是一个伟大的程序员，但这似乎并不难......我认为我的问题是我很难让 ghostscript 完全调用。我已经尝试过 (gs, gswin32c, gswin32, gswin64, gswin64c, gsoso) 仍然没有输出...这是我的 Python 脚本。

* * *

```
fob=open('C:/Users/Tanner/Desktop/1page.pdf','r')        
'gswin64.exe',
'-q',
'-dNOPAUSE',
'-dBATCH',
'-r800',
'-sDEVICE=tiffg4',
'-sPAPERSIZE=a4',
'-sOutputFile=%s %s' % ('C:/My Documents','C:/Users/Tanner/Desktop/1page.pdf') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:56:48.440

All you're doing with that script is creating a bunch of 1-tuples but not assigning them to anything. e.g.

```
>>> '-q',
('-q',)
>>> '-dNOPAUSE',
('-dNOPAUSE',)
>>> '-dBATCH',
('-dBATCH',) 
```

You need a module to issue the system commands for you (I recommend `subprocess` -- It's in the standard library)

Something like:

```
import subprocess
args = ['gswin64.exe',
        '-q',
        '-dNOPAUSE',
        '-dBATCH',
        '-r800',
        '-sDEVICE=tiffg4',
        '-sPAPERSIZE=a4',
        '-sOutputFile=%s %s' % ('C:/My Documents','C:/Users/Tanner/Desktop/1page.pdf')]
subprocess.call(args) 
```

# php - 在typo3添加插件页面中加载/重新加载特定插件选项卡？

> ID：14284786
> 
> 赞同：0
> 
> 时间：2013-01-11T18:52:18.003
> 
> 标签：php, typo3

我已经将我的扩展配置为添加一个图标以在页面中插入新记录下快速选择插件作为 WizIcon，它可以工作： ![我的插件 WizIcon](../Images/f8ac9649cb9e8c343c69c961e5072f56.png)

唯一的问题是，一旦单击，我的插件就会被选中，但默认情况下启用第一个选项卡： ![自动选择的选项卡](../Images/d18cae6be2333eedf5c7d5ada254cd49.png)

我希望它自动选择“插件”选项卡，因为它具有插件选项，因为每次单击该选项卡都很痛苦。有没有一种简单的方法可以做到这一点？

更新：这也适用于带有 reload 的 flexforms，如果字段已更改，它将重新加载，但将重新加载第一个选项卡，而不是当前选项卡。

任何提示都会非常感激。（没有谷歌信息，没有typo3手册信息，对此一无所知）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:33:25.247

此行为被硬编码到 TYPO3 源。

如果你真的想改变这个，你可以看看“t3lib/class.t3lib_tceforms.php”。有一个函数**getDynTabMenu()**返回对 $GLOBALS['TBE_TEMPLATE']->getDynTabMenu() 的调用。第 7 个参数定义默认打开的选项卡。这设置为 1。您可以将其更改为任何数字。但请注意，这将更改任何内容元素的默认选项卡，并且确实不建议在本地修补核心。

# php - php将数组转换为多维并为其添加值

> ID：14284788
> 
> 赞同：0
> 
> 时间：2013-01-11T18:52:21.367
> 
> 标签：php, arrays

目前这是我的一维数组看起来像

```
 [0] => Spiderman 
 [1] => Burger 
 [3] => Batman 
 [4] => Robin 
```

现在我想在每个数组值处添加另一个键，例如

```
 [0]['isMovie'] = 'Yes'
 [1]['isMovie'] = 'No'
 [2]['isMovie'] = 'Yes'
 [3]['isMovie'] = 'Yes' 
```

这样下次我遍历数组时，我就会知道哪个值是电影。

我尝试了类似的东西，`[0]['isMovie'] = 'Yes'`但似乎它只是将数组的当前值更改为 Ypiderman 之类的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:56:24.300

you'll need to create a name index. You will have a 2 dimensional array like this:

```
$arr = array();
$arr[] = array('name'=> 'SpiderMan', 'isMovie'=> 'Yes');
$arr[] = array('name'=> 'Burger', 'isMovie'=> 'No');
$arr[] = array('name'=> 'Batman', 'isMovie'=> 'Yes');
$arr[] = array('name'=> 'Robin', 'isMovie'=> 'Yes'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:58:50.070

```
$array[0] = array('0' => array[0], 'isMovie' => 'Yes');
$array[1] = array('1' => array[1], 'isMovie' => 'No'); 
```

... 等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T18:59:20.850

您的数组结构*可能*如下所示：

```
array(
    array(
        'Name' => 'Batman',
        'isMovie' => true,
    ),
    array(
        'Name' => 'phpisuber01 is awesome',
        'isMovie' => false,
    ),
); 
```

您可以通过执行以下操作来访问这些*值*：

```
echo $var[0]['Name']; //returns Batman 
```

# c# - 尽管后台工作人员，类方法没有在另一个线程中运行？

> ID：14284790
> 
> 赞同：0
> 
> 时间：2013-01-11T18:52:36.997
> 
> 标签：c#, multithreading, class, methods, backgroundworker

在按下按钮时，我调用后台工作人员来更改某些文本的颜色，并在 DoWork 方法中创建一个新对象并执行其方法之一。这是代码：

```
 private void StartProcessButton_Click(object sender, EventArgs e)
    {
        FirstTimeBackgroundWorker.RunWorkerAsync(GenKeyLabel.ForeColor = Color.DodgerBlue);

    } 
```

而 DoWork 方法...

```
 private void FirstTimeBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {  
        KeyFile k = new KeyFile();
        k.CreateDummyFile(DLetter);

    } 
```

*[CreateDummyFile 有效地进行了一堆文件处理，例如复制、删除和创建文件（最大 4.0MB）。在整个过程中，我调用了 ReportProgress 方法并更改了表单上的一些 GUI 元素，但是当它在一个块中执行时，我看不到持续的进度或 GUI 元素发生变化]*

现在它在 CreateDummyFile 方法中完成了它应该做的事情，但是它像不在另一个线程中一样执行它（比如当你按下按钮做某事并且表单会冻结，然后只显示最终结果）。任何想法为什么会这样？我做错了什么？

该类中有很多代码会被执行，所以我不能把它放在 DoWork 方法中。

**编辑：**删除了所有的 ReportProgress，它仍然只更改了我的 GUI 元素之一。（我所做的只是更改 font.forecolour。除此之外，我正在更改状态条上的文本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:39:20.283

您需要在 BackgroundWorker 上添加事件`FirstTimeBackgroundWorker_DoWork`处理程序：`DoWork`

`FirstTimeBackgroundWorker.DoWork += FirstTimeBackgroundWorker_DoWork;`

还要确保您是否正在回调 UI 以更新它以在 UI 线程上执行此操作，而不是从后台线程。

# youtube - 如何在 youtube 视频上添加带注释的缩略图链接？

> ID：14284798
> 
> 赞同：0
> 
> 时间：2013-01-11T18:53:05.467
> 
> 标签：youtube, annotations

在下面的链接中查看 0:31，您将在右下角看到一个缩略图链接，点击该链接可以转到另一个视频。他们是怎么做到的？我知道如何添加注释，但我很好奇他们如何能够使用看似动态的缩略图。

[https://www.youtube.com/watch?v=OJIzSKpKZh0&list=PL41F53F1EF7A5E42A&index=4](https://www.youtube.com/watch?v=OJIzSKpKZh0&list=PL41F53F1EF7A5E42A&index=4)

任何帮助或线索表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:29:38.983

所以这比我想象的要容易得多。YouTube 将此称为视频内编程。为此，请登录您的 youtube 帐户，然后单击您的个人资料图标旁边的箭头以显示“YouTube 设置”并单击它。然后在左侧的“频道设置”下单击“视频内节目”。然后，您可以展示您的频道或在所有视频中展示特定视频。希望这可以帮助某人！

# laravel - Laravel 4：流畅的变化？

> ID：14284808
> 
> 赞同：0
> 
> 时间：2013-01-11T18:53:48.830
> 
> 标签：laravel, laravel-4

我读到 Laravel 4 表面上不会有太大变化，说很多旧代码都可以兼容。

我尝试像[文档](http://laravel.com/docs/database/fluent#insert)`insert_get_id`中所说的那样使用 Fluent ，但该功能不存在。

我做错了吗？如果没有，Fluent 和/或 Eloquent 是否有更多变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:58:26.863

Laravel 4 已更改为 PSR-1 投诉，因此现在是 camelCased 而不是 snake_cased。尝试更改为`insertGetId()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:58:15.920

我相信函数从下划线变为驼峰式...尝试 insertGetId

# javascript - Prev/next functionality failing

> ID：14284811
> 
> 赞同：0
> 
> 时间：2013-01-11T18:54:00.373
> 
> 标签：javascript, jquery

Prev/next functionality not working on new section selection. The idea is that when the the page loads, several slide shows will load and the user will navigate through them with prev/next buttons. When they get to the end of one section, they will select the next section that they want to view. My problem is that the prev/next function doesn't work after the user navigates to a new section.

Here is a [JSFiddle](http://jsfiddle.net/edubs/NmBSS/2/). So you don't miss them, the prev/next buttons are the edges of the prev/next slides hanging on the left and right side of the page, respectively. Below is the section of my javascript that I believe is causing the problem.

Thanks

```
var secName,
    slideCount,
    centSlide;

liveSec(0);

// Initiate live section
function liveSec(x) {
    centSlide = 0;
    secName = $('#slider > div:eq('+x+')').attr('id');
    slideCount = $('#'+secName+'').children().length;
    $('#'+secName+'').children().first().addClass('liveslide').next().addClass('next');
}

// call prev/next functions
$('#'+secName+' > div').click(function() {
    var index = $('#'+secName+' > div').index(this);
    if (index > centSlide) nextcycle(centSlide, slideCount);
    if (index < centSlide) prevcycle(centSlide, slideCount);
    return false;        
});

// cycle sections   
$('#'+secName+' .select').click(function () {
    if (!e) var e = window.event;
    e.cancelBubble = true;
    if (e.stopPropagation) e.stopPropagation();
    $('.liveslide').removeClass('liveslide');
    $('.prev').removeClass('prev');
    i = $('#'+secName+' .select').index(this);
    liveSec(i);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:05:24.117

您没有将功能分配给其他部分的幻灯片。只有第一部分的幻灯片定义了 onclick 函数。确保从一开始就遍历所有这些

```
for (var i=0; i < noOfSections; i++)
{
    var secName = sections[i];

   // call prev/next functions
  $('#'+secName+' > div').click(function() {
      var index = $('#'+secName+' > div').index(this);
      if (index > centSlide) nextcycle(centSlide, slideCount);
      if (index < centSlide) prevcycle(centSlide, slideCount);
      return false;        
  });

  // cycle sections   
  $('#'+secName+' .select').click(function () {
      if (!e) var e = window.event;
      e.cancelBubble = true;
      if (e.stopPropagation) e.stopPropagation();
      $('.liveslide').removeClass('liveslide');
      $('.prev').removeClass('prev');
      i = $('#'+secName+' .select').index(this);
      liveSec(i);
  }); 
```

}

实际上对我有用的是当你将 liveSec 函数的右括号移动到第二个 click 函数下面时，但我不确定你的部分是如何工作的，所以它最终可能会多次分配 click 函数，除非你取消绑定它第一的。

```
// Initiate live section
function liveSec(x) 
{
centSlide = 0;
secName = $('#slider > div:eq('+x+')').attr('id');
slideCount = $('#'+secName+'').children().length;         
    $('#'+secName+'').children().first().addClass('liveslide').next().addClass('next');

   // call prev/next functions
$('#'+secName+' > div').click(function() {
    var index = $('#'+secName+' > div').index(this);
    if (index > centSlide) nextcycle(centSlide, slideCount);
    if (index < centSlide) prevcycle(centSlide, slideCount);
    return false;        
    });

    // cycle sections   
$('#'+secName+' .select').click(function () 
    {
    if (!e) var e = window.event;
         e.cancelBubble = true;
         if (e.stopPropagation) e.stopPropagation();
    $('.liveslide').removeClass('liveslide');
    $('.prev').removeClass('prev');
    i = $('#'+secName+' .select').index(this);
    liveSec(i);
});
} 
```

# objective-c - Duplicate CGPDFStrings from a CGPDFArray generated from a TJ callback on a PDF stream

> ID：14284813
> 
> 赞同：1
> 
> 时间：2013-01-11T18:54:06.927
> 
> 标签：objective-c, c, pdf-generation, cgpdfdocument, cgpdf

OK, so I'm parsing through the PDF content stream, discovered that the TJ callback produces an array of strings, so I grab it and start iterating through it to get the string values like so:

```
static void Op_TJ(CGPDFScannerRef s, void *info)
{
    CGPDFArrayRef array;
    bool success = CGPDFScannerPopArray(s, &array);
    if(success) {
        NSMutableString *actualString = [[NSMutableString alloc] init];
        NSLog(@"array count:%zu",CGPDFArrayGetCount(array));
        for(size_t i = 0; i < CGPDFArrayGetCount(array); i++) {
            CGPDFStringRef string;
            CGPDFArrayGetString(array, i, &string);
            NSString *stringData = (NSString *)CGPDFStringCopyTextString(string);
            [actualString appendString:stringData];
            NSLog(@"string Data:%@",stringData);
        }
        NSLog(@"actual string:%@",actualString);
    }
} 
```

Only problem is, this is my output:

```
2013-01-11 12:39:49.895 WinPCS Mobile[1617:c07] began text object
2013-01-11 12:39:49.895 WinPCS Mobile[1617:c07] array count:7
2013-01-11 12:39:49.896 WinPCS Mobile[1617:c07] string Data:In
2013-01-11 12:39:49.896 WinPCS Mobile[1617:c07] string Data:In
2013-01-11 12:39:49.896 WinPCS Mobile[1617:c07] string Data:it
2013-01-11 12:39:49.896 WinPCS Mobile[1617:c07] string Data:it
2013-01-11 12:39:49.897 WinPCS Mobile[1617:c07] string Data:ia
2013-01-11 12:39:49.897 WinPCS Mobile[1617:c07] string Data:ia
2013-01-11 12:39:49.897 WinPCS Mobile[1617:c07] string Data:ls
2013-01-11 12:39:49.898 WinPCS Mobile[1617:c07] actual string:InInititiaials
2013-01-11 12:39:49.898 WinPCS Mobile[1617:c07] ended text object 
```

I've resorted to exiting the for loop if `i` equals a number divisible by 2, but this is extremely sloppy and seems inefficient, so I'm wondering if anyone has a solution or any idea what the problem might be... I've tried multiple PDF files with the same results.

My simple quick fix was to change the for loop from this:

```
for(int i = 0; i < CGPDFArrayGetCount(array); i++) 
```

to this:

```
for(int i = 0; i < CGPDFArrayGetCount(array); i+=2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:14:13.037

**CGPDFArrayGetString**被定义为返回一个 BOOL，如果在指定索引处存在 PDF 字符串，则返回 true，否则返回 false。

您没有检查返回值！

我的猜测是每两次您没有 PDF 字符串（并且函数返回 false）。

在这些情况下，该函数不会覆盖与前一个循环保持相同的**字符串变量。**

只是猜测。。

# vba - 一行中的数字总和（Word 中的 VBA）

> ID：14284820
> 
> 赞同：0
> 
> 时间：2013-01-11T18:54:38.523
> 
> 标签：vba, automation, ms-word

再会！有一个问题：选定的一段文字。在配置中如下： , 。示例：book 100，pencil 20，...我想求行中数字的总和写在最后，即book 100，手柄20 $ 120 我正在尝试解决这个问题，但不去......不清楚，例如，如何访问字符串中的字符。这样做了：

```
While i <> EndOfText
Char = Mid (AllSelectionText, i, 1)
If Char> = "0" And Char <= "9" Then
...
End If
i = i 1
Wend 
```

但它不是很好......必须有一个像字符串（i）这样的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:11:04.200

使用正则表达式怎么样？您需要添加对 Microsoft VBScript 正则表达式 5.5 的引用，然后您可以使用以下内容（未经测试）：

```
Function sumOfNumbersInText(text As String) As Long

Dim rgx As New RegExp  'creates a new instance of the Regular Expression object
Dim matches As MatchCollection
Dim mtch As Match
Dim sum As Long

sum = 0
rgx.Pattern = "\d+"  'pattern for a sequence of digits
rgx.Global = True    'find all matches within text
Set matches = rgx.Execute(text) 'get collection of all substrings matching the pattern
For Each mtch In matches
    sum = sum + CLng(mtch.Value) 'change each substring into a number and add to sum
Next

sumOfNumbersInText = sum

End Function 
```

# cluster-computing - How do I exclude a monitoring server from ganglia reports?

> ID：14284822
> 
> 赞同：4
> 
> 时间：2013-01-11T18:54:47.857
> 
> 标签：cluster-computing, monitoring, ganglia

I'm running ganglia in EC2 and reporting works well. I'm running gmetad to monitor a database cluster from an admin reporting instance that is a centralized dashboard for all our systems. I don't want this instance to be included in the monitoring. In the admin gmond.conf, I've set:

```
mute = yes 
```

But this only makes the web front-end show the host as dead. In the admin gmetad.conf, I have the data_source set to:

```
data_source "cluster" ec2-X-X-X-X.compute-1.amazonaws.com 
```

(with ec2-X-X-X-X.compute-1.amazonaws.com being the ec2 hostname of the admin instance)

I thought setting `mute=yes` would remove it from the reports and gstat, but both still show the admin host (localhost) as dead.

Is there a way to do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T07:16:22.103

您需要`host_dmax`在 gmond.conf 文件中将该属性设置为 0 以外的值。

对我来说，静音 Ganglia 主机最初出现（重启后），但在我设置的时间后消失`host_dmax`。目前尚不清楚为什么主机在重新启动后首先出现，即使`mute`设置为是。

该`cleanup_threshold`属性还可能影响主机消失所需的时间。

这在[Ganglia wiki](http://sourceforge.net/apps/trac/ganglia/wiki/Gmond%203.1.x%20General%20Configuration)中有介绍：

> 该`host_dmax`值是以秒为单位的整数。当设置为零 (0) 时，即使远程主机停止报告，gmond 也永远不会从其列表中删除主机。如果设置为正数，则 gmond 将在几秒钟内`host_dmax`没有收到主机消息后刷新主机。`host_dmax`顺便说一句，dmax 的意思是“删除最大值”。
> 
> 这`cleanup_threshold`是 gmond 清除 tn > dmax 即过期数据的任何主机或指标之前的最短时间。

# image - Texel offsets in pixel shaders

> ID：14284823
> 
> 赞同：0
> 
> 时间：2013-01-11T18:54:50.387
> 
> 标签：image, glsl, windows-phone-8, hlsl

I am currently porting an app over from iOS to Windows Phone 8\. It is an image processing app, and all calculations are done on the GPU using pixel shaders.

There is one detail that I just haven't been able to figure out, that is Texel Width/Height offsets. I have absolutely no idea what these values are, and I can't seem to find any information on them.

Are they common terms? Does anybody know what they represent? Does anyone know what sort of values should be in them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:41:21.340

Texel 是由坐标定位的纹理像素，纹理中的偏移量是纹理开始映射到模型或渲染目标的位置。

最简单的例子： [http](http://lifeasa.files.wordpress.com/2011/02/super_mario_world_by_xinzax.png) ://lifeasa.files.wordpress.com/2011/02/super_mario_world_by_xinzax.png 舞台地图是一些纹理，当马里奥在关卡中前进时，X坐标偏移增加，右边纹理的一部分变得可见，同时左侧变得隐藏。

检查纹理，如果在单个图像中有多个“部分”，是这样的。

另一种情况是映射到多个对象中的单个纹理，每个对象都有一个偏移量，以显示前一个对象的“段”。

# django - 使用 django：代理设置

> ID：14284824
> 
> 赞同：1
> 
> 时间：2013-01-11T18:55:06.410
> 
> 标签：django, proxy

我有一个使用 apache 的本地开发 django 设置。问题是在部署服务器上没有代理，而在我的工作场所我在 http 代理后面工作，因此请求调用失败。

有没有办法让请求库中的所有调用都通过代理进行。[我知道如何使用 proxies 参数为单个呼叫添加代理，但有全局解决方案吗？]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T04:39:43.207

我得到了 AmrFouad 报告的相同错误。最后，它通过更新 wsgi.py 修复如下：

```
os.environ['http_proxy'] = "http://proxy.xxx:8080"
os.environ['https_proxy'] = "http://proxy.xxx:8080" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T19:24:45.667

在您的 wsgi 文件中添加以下行。

```
import os

http_proxy  = "10.10.1.10:3128"
https_proxy = "10.10.1.11:1080"
ftp_proxy   = "10.10.1.10:3128"

proxyDict = { 
              "http"  : http_proxy, 
              "https" : https_proxy, 
              "ftp"   : ftp_proxy
            }

os.environ["PROXIES"] = proxyDict 
```

现在你可以在任何你想要的地方使用这个环境变量，

```
r = requests.get(url, headers=headers, proxies=os.environ.get("PROXIES")) 
```

PS - 你应该看看下面的链接

1.  [环境变量的官方 Python 文档](http://docs.python.org/2/using/cmdline.html#environment-variables)
2.  [我在哪里以及如何使用 mod-wsgi 和 django 设置环境变量？](https://stackoverflow.com/questions/3310419/where-and-how-do-i-set-an-environmental-variable-using-mod-wsgi-and-django)
3.  [Python 环境变量](https://stackoverflow.com/questions/4906977/python-environment-variables)

## 更新 1

您可以执行以下操作，以便仅在`localhost`.

```
import socket
if socket.gethostname() == "localhost":
    # do something only on local server, e.g. setting os.environ["PROXIES"]
    os.environ["PROXIES"] = proxyDict
else:
    # Set os.environ["PROXIES"] to an empty dictionary on other hosts
    os.environ["PROXIES"] = {} 
```

# java - How to share a variable between two test classes?

> ID：14284828
> 
> 赞同：1
> 
> 时间：2013-01-11T18:55:32.627
> 
> 标签：java, selenium

```
public class Reg {
   @BeforeClass
   public void setUp() throws Exception
   {    
     // Generate a unique email every time 
     String email= UniqueEmail.now()+"@test.com";
     .....
    }
   @Test()
   public void Reg1() throws Exception 
   {
      // Registration Test
   }
}

public class Login{
   @BeforeClass
   public void setUp() throws Exception
   {    
     //How to parse in the email variable from Class Reg?
    }
   @Test()
   public void Login() throws Exception 
   {
      // Use the email generated from class A
      selenium.type("EmailID", email)
   }
} 
```

Class `Reg` will always be executed before Class `Login`. How can I store the `email` variable after executing Class `Reg` so that it can be used in Class `Login`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:12:05.487

创建一个包含所有全局变量的类，并使用该类扩展所有类（包含全局变量）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-28T18:29:34.757

这是我找到的在两个或多个类之间共享变量的最佳解决方案，这也是最简单的解决方案。

在一切之上创建一个类并在其中声明您的变量：

```
class global {
  static String email;
} 
```

然后，您可以在主方法、公共类中的其他公共静态方法和独立类之间共享“电子邮件”——将其用作“global.email”——实际上是在所有内容之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:18:27.287

据我了解，每个类都代表一个测试用例。测试用例之间不应有任何依赖关系，因为测试框架不能保证执行顺序。你不应该这样做。

不幸的是，你的问题很模糊，所以我不明白你想要完成什么，因此无法为你提供更好的实现目标的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T18:59:24.267

将它放在 Reg 类的静态成员中，然后在 Login 中访问它怎么样？

或者，您应该尽可能独立地考虑您的测试，这意味着在第二个测试中您应该注册一个新用户，然后测试登录过程。

# php - 我应该如何通过 AJAX 发出较长的 PHP 请求，定期检查状态更新，并在请求取消时关闭脚本？

> ID：14284830
> 
> 赞同：2
> 
> 时间：2013-01-11T18:55:34.187
> 
> 标签：php, ajax, http, session-variables, session-cookies

我正在开发的 PHP Web 应用程序的一部分需要执行以下操作：

1.  向 PHP 脚本发出 AJAX 请求，这可能需要一秒到一小时，完成后在页面上显示输出。
2.  定期更新网页上的加载栏，由长期运行的 PHP 脚本中的状态变量定义。
3.  允许长时间运行的 PHP 脚本检测 AJAX 请求是否被取消，以便它可以正确及时地关闭。

### 我目前的解决方案：

*   **client.php：**向 request.php 创建一个 AJAX 请求，然后每秒向 status.php 发出一个请求，直到初始请求完成。如果应用程序的多个实例正在运行，则生成并传递唯一标识符 (uid)。
*   **request.php：**每次进行时，将当前进度百分比保存到 $_SESSION["progressBar"][uid]。（每次都必须运行 session_start() 和 session_write_close()。）完成后，返回 client.php 需要的数据。
*   **status.php：**运行 session_start()，返回 $_SESSION["progressBar"][uid]，然后运行 ​​session_write_close()。

### 不足之处：

我的解决方案满足了我的前两个要求。第三，我想在**request.php**中使用 connection_aborted()来了解请求是否被取消。但是，文档说：

> 在尝试向客户端发送信息之前，PHP 不会检测到用户已中止连接。简单地使用 echo 语句并不能保证发送信息，请参见 flush()。

我可以简单地给出毫无意义的输出，但是 PHP*必须*在每次调用 session_start() 时发送一个 cookie。我想使用相同的会话，但文档说：

> 使用会话 cookie 时，为 session_id() 指定 id 将始终在 session_start() 被调用时发送一个新的 cookie，无论当前会话 id 是否与设置的相同。

### 我对解决方案的想法，我都不满意：

*   状态数据库，或写入临时文件，或任务管理系统。这似乎比我需要的更复杂！
*   自定义会话处理程序。这与上述解决方案基本相同。
*   在一个请求中同时传输进度数据和结果数据。这解决了一切，但我基本上会重新实现 AJAX。这不可能。

请告诉我我错过了什么！为什么 PHP 不能立即知道连接何时终止？为什么 PHP 必须重新发送 cookie，即使它完全相同？回答这些问题中的任何一个都会有很大帮助！

我由衷的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:04:53.743

为什么不设置第二个会话变量，由唯一的请求标识符和访问时间戳组成，来自`status.php`.

如果客户端关闭，它将停止获取更新并且会话变量停止更新，如果变量在一定时间内没有更新，则会`status.php`触发干净关闭。`request.php`

# c# - Connection to SQL Server with Windows applicationb

> ID：14284831
> 
> 赞同：0
> 
> 时间：2013-01-11T18:55:39.510
> 
> 标签：c#

I developed a Windows based Application**(**C# and SQL Server 2005**)** in which I used a Connection Form which estabilish a connection between my application and SQL Server. I created a setup of my application. I installed it to Client Machine, after get installed I run the application first time, the Connection Form appears to estabilish a connection with SQL Server. I entered the required input for connection, the connection has estabilished. Whenever I closed the application the connection get totally closed. Now I have to reconnect with SQL Server to run the software once again.

My query is that, I want to connect my application with SQL Server only once untill it get uninstalled, by which I will not have to estabilish a connection repeatedly. The Connection Form should appear only once untill uninstallation. Thanks in advance to help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:27:15.517

通常应用程序从配置文件中读取它们的连接信息。您可能会做的只是让应用程序在用户输入后将您的连接字符串信息存储到文件中。

然后从那时起，当应用程序开始从您的文件中读取连接字符串时。

为您的连接字符串使用配置文件的示例位于：[http ://www.dreamincode.net/forums/topic/31314-sql-basics-in-c%23/](http://www.dreamincode.net/forums/topic/31314-sql-basics-in-c%23/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:27:22.707

从您的描述中，听起来您想保存连接字符串（而不是无限期地保持连接打开），这样您就可以在应用程序的后续启动时使用连接字符串，而不必在每次应用程序启动时都显示连接表单。

有多种考虑和方法可以实现这一目标。我将首先查看以下讨论[存储和检索连接字符串](http://msdn.microsoft.com/en-us/library/ms254494%28v=vs.80%29.aspx)的 MSDN 文章。

您可能还需要考虑从配置文件中读取连接字符串，尝试进行身份验证，如果失败，则显示连接表单，以便用户可以提供不同的凭据或在其环境发生变化时更改服务器\数据库名称。

# php - Build PHP function to retrieve a variety of mySQL database queries and correctly traverse through multiple tables via their foreign key relationship

> ID：14284835
> 
> 赞同：3
> 
> 时间：2013-01-11T18:56:00.743
> 
> 标签：php, mysql, relational-database

I am trying to build a robust php function that allows me to traverse over my normalized database. My mySQL database has 6 tables with the following column names (I am only including the primary and foreign keys, as well as some limited table columns for simplicity) so that you can see how they are related.

**tableA:**
partID (primary key)

**tableABJunction**
itemID (foreign key)
partID (foreign key)

**tableB**
itemID (primary key) itemName

**sales**
customerID (foreign key)
itemID (foreign key)

**partDate**
itemID (foreign key)

**customer**
customerID (primary key) nameFirst nameLast

When I need to generate a query, such as: What are the names of the customers that ordered itemID = 12? I have to first do a query from the sales database for all customerIDs where itemID=12 and then query the customer table to find out their first and last names. Some times, I may need to perform a query where I have to return data from all 6 tables, based on a query asking for all information pertaining to customer whose name is John Smith. Is there any easy way to build a function to handle this variety of queries, without having to build a query for every possible type of search?

Currently, my approach is to pass the following to php via AJAX: web_conditionArray (contains the column name and value of the data provided. Such as nameFirst => 'John', nameLast => 'Smith'); web_resultArray (contains the table name and the columns that I am requesting: sales => 'itemID, itemName').

The issue that I am having with this approach is a way to store the relationships between all of the mySQL datatables with their foreign keys so that my php program knows how to link all the tables together to run the correct query to get from the data provided from one table to the data requested in another table. Any suggestions or a better way to solve this? I was initially thinking of a doubly linked list but the flow from table to table is not linear given that there is a fork where the tableB links to the sales and partDate tables.

I tried to be as specific as I could in describing this situation without writing a novel; however, please let me know if you need any additional information to refine my question further.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:15:53.420

查看您的表结构，我想可以构造逻辑来计算表之间的关系，并动态构造查询，但在我看来，这比为您的特定数据库手动构造查询要多得多。我假设您的表中有更多字段，但是您只包含了最重要的字段，并且肯定包含了所有主键和外键。

基于此，您的数据库中只有三个信息对象：零件、项目和客户。因此，您应该不需要超过 12 个手动构建的查询来使您的系统正常工作。您只需要确保简化查询以处理整个信息对象，然后使用 PHP 层过滤它们。

因此，您将查询逻辑简化为：

```
"Fetch me all [Parts, Items or Customers] (and possibly also all [Parts, Items or Customers]) related to [Part, Item or Custromer] (and possibly [Part, Item or Customer])" 
```

这会导致以下查询：

*   一个零件的所有客户
*   一个项目的所有客户
*   零件和项目的所有客户
*   零件的所有项目
*   客户的所有项目
*   零件和客户的所有项目
*   一个项目的所有部分
*   客户的所有零件
*   客户和项目的所有零件
*   一个项目的所有零件和客户
*   零件的所有客户和项目
*   客户的所有项目和零件

（这是逻辑关系的完整列表 - 有些实际上可能没有任何意义，这让你的生活更轻松）

因此，您的 PHP 脚本需要执行以下任务：

*   确定查询条件需要哪些对象。这基于提供的字段。
*   为您的查询构造一个`WHERE`子句，该子句从传递的字段中标识标准对象的主键。
*   根据请求的字段确定查询结果需要哪些对象。
*   根据条件选择查询并返回对象，并插入构造的`WHERE`子句。
*   执行查询，提取有关请求对象的所有可用信息
*   过滤结果，只提取需要的信息
*   返回最终结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:20:00.433

首先，要知道我的答案很可能会被否决（因为尽管这种方法是正确的，但它却经常被否决）。DBA 想让你相信，仅仅因为一个复杂的查询*可以*用一条它*应该*完成的 SQL 语句来完成（比如服务器端如何认为所有客户端都应该用服务器端完成，或者客户端如何认为布局应该用客户端而不是 CSS）。不会。复杂查询是为那些坐在命令行上的人准备的，他们需要出于特定的、非常规的原因提出按需数据抓取。为了处理速度，`SELECT`ing、`UPDATE`ing 和`DELETE`ing 应始终在 PK 服务器端完成。

听起来您有一组合法的大表。

假设它很大并且速度是主要关注点（而不是开发时间），只使用一个主键而不使用其他索引，因为你拥有的索引越多，当 DBA 真正进行比较时，数据库需要重新索引的索引就越多你有没有更快的服务器端。

主键会花一些功夫，但它是超越数据类型和长度的最重要的事情。例如，非 FK、独立表（如`tableA`、`tableB`和变种较少的ed FK 首先。例如，在我的网站中，我按用户 ID 和链接 ID 存储链接的投票总数。如果用户已登录，他们将需要知道他们在链接上投了多少票，因此 userID 更改的可能性较小，所以这是我在该表上的 PK 中的第一个。将这种按需数据库端或服务器端计算在内是一场性能噩梦。 `customer``INT``INT``SELECT`

只需几行代码，您将***大大***提高速度。通过 php 对 PK 进行排序将延迟减少 50%。将 s吸收`JOIN`到 php 中会降低延迟峰值的发生率。没有按需 MySQL 计算将使您的站点不会瘫痪。

如果您摆脱那种仅仅因为 SQL 语句就可以得到结果的教条，那么您应该使用 SQL 语句而不是服务器端语言（C++ 是最快的），您会看到性能飙升。

如果您可以更具体地处理要混淆的表，我可以更具体，但您可能明白了。

AJAX 改变了游戏规则并强制重新聚焦。用于布局的 CSS；js用于客户端编程；服务器端用于...服务器端处理；用于存储持续时间超过片刻的所有内容的数据库。

投反对票！哈哈

# c# - 如何使用 C# 和 ngen.exe 为 Win32 构建本机映像

> ID：14284853
> 
> 赞同：0
> 
> 时间：2013-01-11T18:57:18.073
> 
> 标签：c#, .net, clr, native, ngen

是否可以从 C# 构建本机应用程序，例如当您使用纯 C/C++ 并为 Win32 开发时。

我听说过 ngen.exe 并尝试使用它......但我不明白它在做什么？它就像它缓存应用程序是一些系统目录以便快速快速并为应用程序提供一些优化，但不生成本机图像。

为什么它命名为“本机生成器”，它不为 Win32 生成本机输出并且仍然需要 .net 虚拟机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:00:22.533

这不是 ngen 的用途。ngen 执行 JIT 编译器的工作并将编译后的本机结果保存在缓存中。但是，结果仍然依赖于 .NET Framework。它不会输出没有托管要求的本机“EXE”，我认为这是您所要求的。

# laravel - Laravel 4：Eloquent::find() 不起作用

> ID：14284854
> 
> 赞同：0
> 
> 时间：2013-01-11T18:57:33.333
> 
> 标签：laravel, eloquent, laravel-4

所以我有一个简单的、空的 Eloquent 类：`class Worker extends Eloquent {}`. 然后在控制器中我写：`Worker::find(1);`我得到一个异常，说SQL不正确：

```
select * where `id` = ? 
```

显然，缺少 from SQL 子句。

哦，我今天为这个应用下载了 Laravel 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:03:04.543

在 Laravel 4 中，您必须设置一个表属性

`protected $table = 'foo';`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T15:50:55.603

如前所述，您必须`$table`在模型上专门设置一个属性。Taylor 在[这里提到](https://gist.github.com/4111700#comment-602817)过旧的做事方式（默认表名作为模型名的复数形式）可能正在回归。只是没有用于复数的好的作曲家包，因此可以移植 L3 代码。

# c# - C#方法，自动填充参数列表，默认传递

> ID：14284863
> 
> 赞同：0
> 
> 时间：2013-01-11T18:58:03.357
> 
> 标签：c#, methods

我只是想到了 Visual Studio 的一个非常酷的功能，我想知道它是否已经存在。当您在方法之后执行一个左括号时，这就像按 Ctrl+tab 一样，自动用方法中调用的任何参数填充传递的参数......假设您以相同的方式命名事物。那存在吗？

例如，如果我有一个方法：

```
public static void Foo(int a, int b)
{

} 
```

然后在另一个位置输入：

```
Foo( 
```

我希望看到它填充：

```
Foo(a, b) 
```

按下一些键盘快捷键后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:07:45.073

Resharper 中存在类似的功能。`Alt`+ `Enter`，然后选择`Generate argument stubs`。但它会用默认值填充它`foo.Bar(0, 0);`

# java - Eclipse GridData 的垂直滚动条

> ID：14284864
> 
> 赞同：3
> 
> 时间：2013-01-11T18:58:05.870
> 
> 标签：java, eclipse, scrollbar

我在 Eclipse 应用程序中有以下 java 代码：

```
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.widgets.List;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.datatools.connectivity.oda.OdaException;

public void setupList(Composite parent, List items) throws OdaException {

GridData myGrid = new GridData(GridData.FILL_HORIZONTAL);
List myList = new List(parent, SWT.V_SCROLL);
myList.setLayoutData(myGrid);
myList.setItems(items);

} 
```

在我的程序中，项目数超过了窗口的最大高度，但没有出现垂直滚动条。

我认为将 SWT.V_SCROLL 参数传递给列表会创建一个垂直滚动条，但它不起作用。

为了使 GridData 的列表具有垂直滚动条，我缺少什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:34:45.643

我想到了。以下行需要更改：

```
GridData myGrid = new GridData(GridData.FILL_BOTH); // FILL_BOTH instead of FILL_HORIZONTAL 
```

# tsql - MS SQL - 具有特定列的平均行数

> ID：14284866
> 
> 赞同：0
> 
> 时间：2013-01-11T18:58:13.080
> 
> 标签：tsql

大家好，我正在寻找如何通过表格中的以下选择来随着时间的推移创建平均值。

```
MinutesToLoad |环境 | 服务器 | 交流 | 开始时间|结束时间

140 环境_A | 服务器2 | 台 | 2013-01-06 17:22:44.000 | 2013-01-06 19:42:53.000
135 环境_A | 服务器2 | 台 | 2013-01-07 17:23:21.000 | 2013-01-07 19:38:37.000
130 环境_A | 服务器2 | 台 | 2013-01-08 17:24:03.000 | 2013-01-08 19:34:17.000
130 环境_A | 服务器2 | 台 | 2013-01-09 17:24:42.000 | 2013-01-09 19:34:45.000
140 环境_A | 服务器1 | 台 | 2013-01-06 17:22:44.000 | 2013-01-06 19:42:53.000
135 环境_A | 服务器1 | 台 | 2013-01-07 17:23:21.000 | 2013-01-07 19:38:37.000
130 环境_A | 服务器1 | 台 | 2013-01-08 17:24:03.000 | 2013-01-08 19:34:17.000
130 环境_A | 服务器1 | 台 | 2013-01-09 17:24:42.000 | 2013-01-09 19:34:45.000
第1430章 服务器1 | 设置 | 2013-01-07 00:03:01.000 | 2013-01-07 23:53:37.000
第1431章 服务器1 | 设置 | 2013-01-08 00:03:36.000 | 2013-01-08 23:54:14.000
第1430章 服务器1 | 设置 | 2013-01-09 00:04:14.000 | 2013-01-09 23:54:55.000
第1430章 服务器2 | 设置 | 2013-01-07 00:03:01.000 | 2013-01-07 23:53:37.000
第1431章 服务器2 | 设置 | 2013-01-08 00:03:36.000 | 2013-01-08 23:54:14.000
第1430章 服务器2 | 设置 | 2013-01-09 00:04:14.000 | 2013-01-09 23:54:55.000
1 环境_A | 服务器2 | QXI | 2013-01-08 03:23:57.000 | 2013-01-08 03:24:02.000
1 环境_A | 服务器1 | QXI | 2013-01-08 03:23:57.000 | 2013-01-08 03:24:02.000

```

MinutesToLoad 在我的选择过程中实际上是一个 DATEDIFF(MINUTE,startTime,EndTime)，但其余部分来自表。

目标结果是让这个结果看起来像这样：

```
MinutesToLoadOverLast10Days - 环境 - 服务器 - Exchange
133 ENVIRONMENT_A 服务器2 TAI
133 ENVIRONMENT_A 服务器1 TAI
第1430章
第1430章
1 ENVIRONMENT_A 服务器2 QXI
1 ENVIRONMENT_A 服务器1 QXI

```

我知道我将使用 AVG 功能，但我在试图弄清楚如何使用它来获得我想要的结果时迷失了方向。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:02:23.357

```
Select avg(MinutesToLoadOverLast10Days),Environment, Server,Exchange 
FROM YOUR_TABLE_NAME
GROUP BY Environment, Server,Exchange 
```

# php - PHP preg_match：得到一个完整的单词

> ID：14284888
> 
> 赞同：1
> 
> 时间：2013-01-11T18:59:15.840
> 
> 标签：php, regex

我有一段文字，内容如下：

```
....text....
listname: mylistname
....text....
name: John Smith 
```

我正在尝试获取此人的姓名，但是使用 preg_match 如下：`preg_match('#name:\s\w{0,}\s\w{0,}#', $body, $arrNameMatches)`

我得到“mylistname”......我可以在该模式中添加什么以便它只`name:`作为一个完整的单词，从而得到“John Smith”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:03:12.727

因为包含与=> 名称`listname:`相同的模式：`name:`

在开头使用`^`，以便您说“字符串必须以名称开头”

```
preg_match('#^name:\s\w{0,}\s\w{0,}#', $body, $arrNameMatches) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:01:27.040

在之前添加一个单词锚`name`：

```
preg_match('#\bname:\s\w{0,}\s\w{0,}#', $body, $arrNameMatches) 
```

或者，如果您确定`name`将始终出现在输入的开头，您可以使用“输入开始”锚点，即`^`：

```
preg_match('#^name:\s\w{0,}\s\w{0,}#', $body, $arrNameMatches) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:17:32.470

```
<?php
$body = <<<_EOF
listname: List of Jerks
name: John Smith
name: Ted Danson
name: Buddy Holly
_EOF;

preg_match_all('/\bname: ([A-Za-z ]*)/', $body, $arrNameMatches);
print_r($arrNameMatches[1]); 
```

输出：

```
Array
(
    [0] => John Smith
    [1] => Ted Danson
    [2] => Buddy Holly
) 
```

`\b`相当于匹配`\W`[非单词字符，即：换行符]和`^`[输入开头]。

# ios - iOS：带有 UIWebView 的 HTTP Basic/Digest Auth

> ID：14284896
> 
> 赞同：6
> 
> 时间：2013-01-11T18:59:56.717
> 
> 标签：ios, objective-c, uiwebview, nsurlconnectiondelegate, nsurlprotocol

**概述**

我正在为 iOS 应用程序开发 SAML 登录（单点登录，类似于 openID）解决方案，该解决方案涉及显示带有 a 的视图控制器，`UIWebView`并且在处理 HTTP 基本/摘要时遇到了计时和/或超时问题中的身份验证`UIWebView`。

具体来说，当客户端收到 HTTP 身份验证质询时，我会弹出一个`UIAlertView`提示用户输入用户 ID 和密码的提示。如果用户能够快速输入信息（< 10 秒），它就可以工作。但是，如果该条目花费的时间超过 10 秒，则连接似乎已终止，并且没有任何反应。

**问题**

1.  调用是否有超时`connection:didReceiveAuthenticationChallenge:`会阻止我提示用户输入用户 ID 和密码（并且必须等待用户输入）？有没有人有解决方法（例如，某种方式来延长连接超时）？
2.  `UIWebView`有没有比 的子类更好的方法来处理来自 a 的 HTTP 基本/摘要身份验证`NSURLProtocol`？

**详细信息和代码**

对于我们需要处理的大多数 SAML 系统，登录将在`UIWebView`. 但是，我们需要处理的一些系统回退到对移动浏览器使用 HTTP 基本或 HTTP 摘要身份验证，因此我们也需要能够处理它。

最大的挑战始于 UIWebView 不暴露下面的网络调用这一事实。为了满足我的需要，我创建了一个子类`NSURLProtocol`并根据需要注册了它：

```
[NSURLProtocol registerClass:[SMURLProtocol class]]; 
```

`SMURLProtocol`这样，当发出 HTTP 基本/身份验证质询时，就会调用此方法，所以我返回 YES，我们可以处理 HTTP 基本和摘要身份验证：

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return ([protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPDigest]
        || [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPBasic]);
} 
```

现在我已经告诉网络堆栈 SMURLProtocol 可以处理身份验证挑战，所以它调用

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
NSURLProtectionSpace *protectionSpace = [challenge protectionSpace];
NSString *authenticationMethod = [protectionSpace authenticationMethod];

if ([authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPBasic]
    || [authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPDigest]) {
    // Stash the challenge in an IVAR so we can use it later
    _challenge = challenge;

    // These network operations are often on a background thread, so we have to make sure to be on the foreground thread
    // to interact with the UI. We tried the UIAlertView performSelectorOnMainThread, but ran into issues, so then
    // we switched to GCD with a semaphore?
    _dsema = dispatch_semaphore_create(0);
    dispatch_async(dispatch_get_main_queue(), ^{
        // Prompt the user to enter the userID and password
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"AUTHENTICATION_REQUIRED", @"")
                                                        message:[protectionSpace host]
                                                       delegate:self
                                              cancelButtonTitle:NSLocalizedString(@"CANCEL", @"")
                                              otherButtonTitles:NSLocalizedString(@"LOG_IN", @""), nil];
        [alert setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
        [alert show];
    });

    dispatch_semaphore_wait(_dsema, DISPATCH_TIME_FOREVER);

    // --> when you get here, the user has responded to the UIAlertView <--
    dispatch_release(_dsema);

}
} 
```

如您所见，我正在启动一个 UIAlertView 来提示用户输入用户 ID 和密码。我必须在主线程上执行此操作，因为（显然，我不确定）网络代码在后台线程上运行。我添加了信号量和明确的 Grand Central Dispatch 代码来解决我看到的偶尔崩溃（基于此[线程](https://stackoverflow.com/questions/12965946/returning-to-background-thread-from-uialertviewdelegate-callback)）。

最后一部分是接受用户 ID 和密码的 UIAlertView 委托为挑战构建凭证：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
if (([alertView alertViewStyle] == UIAlertViewStyleLoginAndPasswordInput) && (buttonIndex == 1)) {
    NSString *userID = [[alertView textFieldAtIndex:0] text];
    NSString *password = [[alertView textFieldAtIndex:1] text];

    // when you get the reply that should unblock the background thread, unblock the other thread:
    dispatch_semaphore_signal(_dsema);

    // Use the userID and password entered by the user to proceed
    // with the authentication challenge.
    [_challenge.sender useCredential:[NSURLCredential credentialWithUser:userID
                                                                password:password
                                                             persistence:NSURLCredentialPersistenceNone]
          forAuthenticationChallenge:_challenge];
    [_challenge.sender continueWithoutCredentialForAuthenticationChallenge:_challenge];

    _challenge = nil;
}
} 
```

正如我在概述中所说，如果用户能够在不到 10 秒的时间内输入用户 ID 和密码，这一切都很好。如果需要更长的时间，则连接似乎会超时，并且将凭据传递给质询的发件人无效。

# javascript - 使用过渡和 JavaScript 排序 CSS 样式

> ID：14284897
> 
> 赞同：1
> 
> 时间：2013-01-11T19:00:01.643
> 
> 标签：javascript, css-transitions

如果我将样式应用于元素，然后立即添加 css 过渡样式，则过渡将应用于前面的样式。这可能并不总是意图。

我通过使用 settimeout (0) 找到了解决方案，是否有任何更清洁/更正确的方法已知？

[http://jsfiddle.net/nicib83/XP9E7/](http://jsfiddle.net/nicib83/XP9E7/)

```
$("div").css("opacity", 1);

$("div").css("-webkit-transition", "all 0.35s");

/* Works
window.setTimeout(function () {
    $("div").css("-webkit-transition", "all 0.35s");
}, 0);
*/ 
```

此致

编辑：

我并不是说如何最好地设置css样式，而是如何在第一个样式应该应用时如何顺序设置样式，而第二个样式当时没有激活，但只有在之后，我想在之后添加过渡。settimeout 修复它，最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:14:28.967

最好预先定义一个包含您要应用的两个属性的类，然后以编程方式将该类添加到元素中。这两个属性将一起应用。

```
.myClass {
    opacity: 1;
    -webkit-transition: all 0.35s;
}

$("div").addClass("myClass"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:16:23.443

您可以从 Twitter Bootstrap 的书中获取一页：

```
fade {
    opacity: 0;
    -webkit-transition: opacity 0.15s linear;
    -moz-transition:opacity 0.15s linear;
    -o-transition:opacity 0.15s linear;
    transition:opacity 0.15s linear;
}
.fade.in{
    opacity:1;
} 
```

`.in`然后在您希望它淡入时以编程方式添加该类：

```
$("div").addClass("in"); 
```

您的原始 div 看起来像：

```
<div class="fade">Box</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T15:30:38.687

我自己也遇到过这个问题，也找到了 setTimeout 解决方案。经过一些研究，问题是浏览器如何处理调度。JavaScript 在自己的线程中运行，独立于处理 UI 和 DOM 的线程（这就是发生 UI 阻塞等问题的原因）。

在这种情况下，两个 JavaScript 语句都在文档注册第一次更改之前运行，并且最终同时应用两个类。setTimeout(fn,0) 有效地使函数异步并分流函数以在下一个可用机会运行。这允许 UI 线程在添加下一个类之前赶上。

# python - 使用自定义函数将单元测试读取到 python 中的文件

> ID：14284899
> 
> 赞同：1
> 
> 时间：2013-01-11T19:00:03.940
> 
> 标签：python, unit-testing, file-io

我有一系列单元测试，我试图将它们解析成一个文本文件，虽然我知道这可以通过调用 unittest.main() 的几种不同用途来完成，但我有点打嗝，因为我正在处理的代码需要使用一个函数。目前写为

```
unittest.TextTestRunner(verbosity=2).run(customFunction()) 
```

其中stdout由另一个文件读取

```
p = Popen(command, stdout=PIPE, stderr=STDOUT stdin=PIPE)
result = p.communicate()

# Write result to .txt file 
```

唯一的问题是，由于单元测试必须调用其他一些程序，程序在将结果变量分配给控制台输出时会挂起。我正在尝试重写代码以使单元测试本身吐出到日志文件中（而不是将控制台输出解析为文本文件），但是在使用 unittest.main 重写此代码时遇到了一些麻烦（ ) 由于必须提供自定义功能。有没有人对如何进行此操作有任何建议或解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:04:24.347

我自己发现了如何做到这一点：有一个可以与 TextTestRunner 一起使用的流选项，它将 unittest 的输出定向到您想要的任何文件对象。所以如果你想写入一个txt文件，你会写：

```
logFile = open("C:/folder/logfile.txt", "w")
unittest.TextTestRunner(stream=logFile, verbosity=2).run(customFunction())
logFile.close() 
```

只是想我会分享这个，这样如果以后有人遇到同样的问题，他们就不会像我一样遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T21:27:50.967

当我们在 Python 中使用流时，会更好地为问题代码区域提供捕获器，并再次确保我建议使用这样的结构：

```
stream = open("...", "w")
try:
    unittest.TextTestRunner(stream=stream, verbosity=2).run(suite)
finally:
    stream.close() 
```

但在我看来，这个捕手代码很大，这样写起来更容易：

```
with open("...", "w") as stream:
    unittest.TextTestRunner(stream=stream, verbosity=2).run(suite) 
```

也许有更好的风格？

# java - 如何从 Google App Engine 数据存储区（Java）正确检索 int？

> ID：14284904
> 
> 赞同：1
> 
> 时间：2013-01-11T19:00:22.137
> 
> 标签：java, google-app-engine, google-cloud-datastore

我正在构建一个 servlet，它需要`Entity`从 GAE 数据存储中检索一个，然后根据实体的“STAGE”属性（一个整数）执行某些任务。我的代码最终看起来像这样：

```
switch( (int) (long) (Long) phrase.getProperty("STAGE")){ 
```

这工作正常，但代码非常丑陋，我不禁认为这可以以更简单，也许更有效的方式完成。

谢谢你，比利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T13:11:44.873

switch( ((Number)phrase.getProperty("STAGE")).intValue()) {

# jquery - 来自 json 的 jQuery 自动完成

> ID：14284906
> 
> 赞同：1
> 
> 时间：2013-01-11T19:00:27.150
> 
> 标签：jquery, ajax

我正在访问 json API 并进行 ajax 调用以获取 json，我成功地做到了，但我想将 json 中的名称填充为文本框下的建议文本。我在这样做时遇到了问题。有人可以提出一些建议吗？

```
$("#state").autocomplete({
    source: function( request, response ) {
        var result = $.ajax({
            url: 'http://localhost:8181/jquery/api/states/regex?stateName='+request.term,
            method: 'GET',
            dataType: 'json',
            success: function(data) {
                //alert(data);
                response($.map(data, function(item) {
                    //alert(item.stateName);
                    return {
                        label: item.stateName,
                        value: item.stateName
                    };
                }));
            }
        });
        return result.responseText;
    },
    minLength: 1
})
}); 
```

我得到它的工作谢谢！

# jquery - 在浏览器中验证图像大小

> ID：14284907
> 
> 赞同：0
> 
> 时间：2013-01-11T19:00:32.253
> 
> 标签：jquery, image, validation

> **可能重复：**
> [如何在上传前检查图像大小（例如 1MB）](https://stackoverflow.com/questions/7673657/how-to-check-image-size-ex-1mb-before-uploading)

在上传（在现代浏览器中）到带有 jQ​​uery 的服务器之前，我如何验证（最简单的方法）图像的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:15:24.510

这不是最简单的方法，但 jqueryfileupload 实际上是一个很棒的插件（它比在上传文件之前提供文件信息要多得多）

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

所以我要给出一个答案，因为它是某种答案

另外，在我看来，拒绝用户的任何事情都是坏主意，尽可能处理他们的烂摊子，在图片上传的情况下，你可以做到；他们会更喜欢“去调整你的图像大小”（很可能他们不知道该怎么做）

# sql-server-2008 - 查找上周五的 SSIS 表达式

> ID：14284911
> 
> 赞同：0
> 
> 时间：2013-01-11T19:00:49.743
> 
> 标签：sql-server-2008, ssis

使用 SQL Server 2008，我基于当前日期构建了一个具有动态值的 SSIS 变量。如果当天是星期一，我希望它的值为星期五，这是构建的表达式：

```
 DATEPART("dw",GETDATE()) != 2?
RIGHT("0" + (DT_WSTR,2)MONTH(DATEADD("dd", -1, GETDATE())), 2) + "/" 
    + RIGHT("0" + (DT_WSTR,2)DAY(DATEADD("dd", -1, GETDATE())), 2) + "/" + 
(DT_WSTR,4)YEAR(DATEADD("dd", -1, GETDATE())) : RIGHT("0" + (DT_WSTR,2)MONTH(DATEADD("dd", -1, GETDATE())), 2) + "/" 
    + RIGHT("0" + (DT_WSTR,2)DAY(DATEADD("dd", -3, GETDATE())), 2) + "/" + 
(DT_WSTR,4)YEAR(DATEADD("dd", -1, GETDATE())) 
```

问题：月份或年份更改时不准确。有没有更好的方法来做到这一点？帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:56:21.250

这行得通吗（你可以代替`GETDATE()`，`@date`我只是用它来轻松测试不同的日期）

```
DECLARE @date DATETIME
SET @date = '2013-01-14'

SELECT
    PrevFriday = CASE WHEN DATEPART(weekday, @date) <> 2 THEN @date
                      ELSE DATEADD(DAY, -3, @date)
                 END 
```

**更新：这里是相同的，但在 SSIS 变量表达式中完成：**

```
DATEPART("dw", GETDATE()) != 2?
GETDATE():
DATEADD("dw", -3, GETDATE()) 
```

**更新#2：这里是如何返回任何日期的上一个星期五，而不仅仅是星期一**

```
SELECT DATEADD(DAY, -1 - (DATEPART(weekday, @date) % 7), @date) 
```

# javascript - 检测 ajax 响应的 MIME 类型

> ID：14284913
> 
> 赞同：2
> 
> 时间：2013-01-11T19:00:51.347
> 
> 标签：javascript, ajax, jquery, mime-types

我正在尝试在我的网站上加载图像，如果图像生成失败，我想显示一条关于失败原因的文本消息。最好的方法？

这是我尝试过的，但图像数据显然被解释为字符串。（我的 imgContainer 中有一堆乱码）。

```
function GetImage(id) {
    $.get('ajax/getImage', { Id: id }, function (data) {
        if (typeof data == "string") {
            $('div#imgContainer').html(data);
        } else {
            $('img#imgViewer').attr('src', data);
        }
    });
} 
```

**编辑**

看来我的错误更多是您不能像我在上面所做的那样将图像数据设置为 src 属性。据我所知，您需要将 src 直接设置为链接，例如：

```
$('div#imgContainer').html('<img src="ajax/getImage" />'); 
```

但这并没有给您检查数据类型的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:08:00.283

如果发生错误，您可以让您的 ajax 调用返回“application/json”的内容类型。就像是：

```
{"error": "something bad happened"} 
```

然后在您的回调中，您可以检查它是对象还是字符串：

```
$.ajax('/some/url')
    .done(function(response){
        if($.isPlainObject(response)){
            //....
        }
        else{
            //....
        }
    }) 
```

# testing - 与 Selenium 的模糊屏幕截图比较

> ID：14284915
> 
> 赞同：12
> 
> 时间：2013-01-11T19:01:02.973
> 
> 标签：testing, selenium, comparison, levenshtein-distance

我正在使用 Selenium 来自动化网页功能测试。当我们推出新代码时，进行逐个像素的比较对我们来说很重要，因此我们使用 Selenium 截取屏幕截图并比较 base64 编码的字符串以查看是否有任何变化。

我们发现在实践中，很难获得完整的像素一致性，尤其是图像。我希望轻微的模糊/渲染伪影算作“通过”而不是“失败”，所以我想知道是否有一种方法可以进行模糊比较以使我们的测试不那么脆弱。

我在想也许可以将 base64 字符串之间的 Levenshtein 距离作为起点，但我真的不知道这是否是一个好方法，或者区分“页面上移动的东西”和“渲染”的容差应该是多少神器”。有什么想法/方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T12:59:01.017

所以我最终选择了 ImageMagick 命令行工具（因为为什么要重新发明图像比较）。“比较”工具的“峰值绝对误差”指标告诉您在两个图像相同之前您必须模糊多少像素。这似乎工作得很好......对于具有轻微图形失真的图像，可能有很多不匹配的像素，但轻微的模糊足以使它们匹配；但是对于实际上不同的两张图像，即使大多数像素可能匹配，那些往往不会有很大不同的图像。现在，我正在检查小于 15% 的 PAE，以查看图像是否应计为相同。我正在使用的命令行是：

```
 compare -metric PAE  original.png new.png comparison.png 
```

ImageMagick 比较工具的文档在这里：[http ://www.imagemagick.org/script/compare.php](http://www.imagemagick.org/script/compare.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T19:36:08.057

我一直在使用[perceptualdiff](http://pdiff.sourceforge.net/)，它使用人类视觉系统的模型来尽量避免报告不明显的变化（作者用于渲染器回归测试）。用法很简单：

```
perceptualdiff -output diff.ppm baseline.png test.png 
```

（突出差异区域的 PPM 格式图像`diff.ppm`在[哪里）](http://en.wikipedia.org/wiki/Netpbm_format)

[针](http://needle.readthedocs.org/en/latest/)回归测试框架支持使用 pdiff 比较屏幕截图：

[http://needle.readthedocs.org/en/latest/#engines](http://needle.readthedocs.org/en/latest/#engines)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T09:39:15.020

使用不会产生伪影的图像格式（如 BMP 或[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)），然后您可以进行逐像素比较。[我认为您可以使用共同的Euclidean Distance](http://en.wikipedia.org/wiki/Euclidean_distance#Three_dimensions)检查每个像素。为了稍微提高性能，不要计算平方根，而是检查距离的平方

```
// Maximum color distance allowed to define pixel consistency.
const float maxDistanceAllowed = 5.0;

// Square of the distance, used in calculations.
float maxD = maxDistanceAllowed * maxDistanceAllowed;

public bool isPixelConsistent(Color pixel1, Color pixel2)
{
    // Euclidean distance in 3-dimensions.
    float distanceSquared = (pixel1.R - pixel2.R)*(pixel1.R - pixel2.R) + (pixel1.G - pixel2.G)*(pixel1.G - pixel2.G) + (pixel1.B - pixel2.B)*(pixel1.B - pixel2.B);

    // If the actual distance is less than the max allowed, the pixel is
    // consistent and the method returns TRUE
    return distanceSquared <= maxD;
} 
```

没有测试 C# 代码，但它应该给你的想法。尝试一下并`maxDistanceAllowed`根据您的需要进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-14T13:48:57.683

如果其他人正在寻找类似的东西，可以[使用 Depicted-dpxdt](https://github.com/bslatkin/dpxdt)。它旨在用作 CI/CD 流程的一部分。

它将感知差异与服务器、命令行工具、phantom js 的包装器相结合。

它具有展示的功能，例如爬取整个站点并比较页面的差异。

# python - scipy.optimize.curve_fit，TypeError：不支持的操作数类型

> ID：14284918
> 
> 赞同：8
> 
> 时间：2013-01-11T19:01:07.043
> 
> 标签：python, scipy, typeerror, curve-fitting

我已经进行了搜索，问题似乎类似于[Python scipy: unsupported operand type(s) for ** or pow(): 'list' and 'list'](https://stackoverflow.com/questions/9156208/python-scipy-unsupported-operand-types-for-or-pow-list-and-list) 但是那里发布的解决方案不起作用，我认为它实际上可能与众不同。

我正在尝试使用 scipy.curve_fit 将曲线拟合到数据中，当我将所有 3 个参数都留空时，一切正常，我得到了预期的结果。

```
def func(x,a,b,c):
  return a*np.exp(b*(x**c)) 

popt, pcov = curve_fit(func,x,y) 
```

但是，当我尝试修复以下值之一（c = 2）时，

```
def func2(x,a,b):
  return a*np.exp(b*(x**2))

popt, pcov = curve_fit(func2,x,y) 
```

我按照链接问题中的建议`TypeError: unsupported operand type(s) for ** or pow(): 'int' and 'list'`使用`numpy.power(x,2)`允许代码运行但产生错误的结果。有人看到我做错了什么吗？

编辑添加：更令人困惑的是，据我所知，它由curve_fit使用，第二个公式有效。

第二次编辑：对于那些提到的列表问题 X 和 Y 现在都是数组，并且代码运行没有错误。但是 func2 仍然会产生严重的错误结果。（我会在这里发布图表，但显然我需要更多代表。）

Func 1 curvefit 给出了`[a,b,c] = [ 1.71890826, -0.0239123, 3.17039851]`但是对于 func2 一切都出错了`[a,b] = [ -2.88694423e-15, 9.99999998e-01]`。我不明白这么小的变化怎么会导致如此严重的问题，leastsq 能够用 c=2 拟合这些数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T20:14:54.873

发生这种`TypeError`情况是因为`x`传递给`func2`的是一个列表。

这是一个例子：

```
import numpy as np
import scipy.optimize as optimize
def func2(x,a,b):
    return a*np.exp(b*(x**2))

x = np.linspace(0,1,6).reshape(2,-1)
y = func2(x,1,1)
x = x.tolist()
y = y.tolist()
print(x)
# [[0.0, 0.2, 0.4], [0.6000000000000001, 0.8, 1.0]]
print(y)
# [[1.0, 1.0408107741923882, 1.1735108709918103], [1.4333294145603404, 1.8964808793049517, 2.718281828459045]]

popt, pcov = optimize.curve_fit(func2, x, y)
# TypeError: unsupported operand type(s) for ** or pow(): 'list' and 'int' 
```

在这种情况下，将形状 (2,3) 的数组`func2`映射`x`到形状 (2,3) 的数组`y`。该函数`optimize.curve_fit`期望 from 的返回值`func2`是一个数字序列——而不是一个数组。

对我们来说幸运的是，在这种情况下，`func2`是在每个组件上逐个操作`x`- 的元素之间没有交互`x`。`x`因此，如果我们传递形状为 (2,3) 的数组或形状为 (6,) 的一维数组，这真的没有区别。

如果我们传递一个形状为 (6,)`func2`的数组，那么将返回一个形状为 (6,) 的数组。完美的。这样就可以了：

```
x = np.asarray(x).ravel()
y = np.asarray(y).ravel()
popt, pcov = optimize.curve_fit(func2, x, y)
print(popt)
# [ 1\.  1.] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:18:54.467

你使用了什么`x`价值观？以下示例对我有用。

```
from scipy.optimize import curve_fit
import numpy as np

def func2(x,a,b):
  return a*np.exp(b*(x**2))

x = np.linspace(0,4,50)
y = func2(x, 2.5, 2.3)
yn = y + 6.*np.random.normal(size=len(x))
popt, pcov = curve_fit(func2,x,yn)
print popt, pcov 
```

它根据`random`函数给出结果：

```
[ 1.64182333  2.00134505] [[  1.77331612e+11  -6.77171181e+09]
 [ -6.77171181e+09   2.58627411e+08]] 
```

您的`x`和`yn`类型的值是列表吗？以下示例给出了您的错误消息：

```
print range(10)**2

TypeError: unsupported operand type(s) for ** or pow(): 'list' and 'int' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-20T11:29:07.537

Python 正在尝试做这样的事情：

```
[1, 2, 3] * 4 
```

在 CPython 中没有定义 * 运算符。

这对我有用：

```
def second_order_polynomial(x, a, b, c):
    return [a * x0**2 + b * x0 + c for x0 in x] 
```

# php - PHP - 从选择选项创建/调用 JSON

> ID：14284921
> 
> 赞同：0
> 
> 时间：2013-01-11T19:01:30.177
> 
> 标签：php, mysql, json

使用 javascript 和 JSON 变得沮丧和肮脏。我想在 JSON 数组中存储一些 html 值，以便在需要时调用它们（通常来自一些 jquery 事件侦听器）

这优于不断使用 $.ajax 进行客户端到服务器调用。

所以，我有一个`<select>`数据库填充选项：

```
<select name="emailmsgid" id="emailmsgid">
<option value="0">------select a template-------</option>
<?php 
 $q = mysql_query("SELECT emailmsgid,emailmsgsubject,emailmsg_html FROM tbl_email_templates");
 while ($r = mysql_fetch_array($q)){
   $emailmsgid = $r['emailmsgid']; // int
   $emailmsgsubject= $r['emailmsgsubject']; // short desc
   $emailmsg_html = $r['emailmsg_html']; // usually html with images (save to json, somehow)
?>
   <option value="<?=$emailmsgid;?>"><?=$emailmsgsubject;?></option>
 <? } ?>
</select>
<br>
<textarea name="selectedmsg" id="selectedmsg"></textarea>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

  // populate the textarea above
  $("#emailmsgid").change(function(){
    var selectedID = $(this).val();
     /* how to look into json here with selectedID */ 

    $("#selectedmsg").val("whatever the json has saved for that emailmsgid");
  }); 

});
</script> 
```

这就是上面所缺少的。
- 创建 json 字符串，（从 php/mysql while 语句内部），所以下面的 jquery 可以引用 json，匹配`selectedID`json 中的内容？

我承认我是 JSON 新手，这对我来说是学习如何使用它以及从 jquery 调用名称/值对的好方法。

我希望保存内部 json，然后在我选择它时`emailmsg_html`将其加载到选择输入中。`textarea``emailmsgid`

（我基本上正在努力消除我的代码需要调用服务器的任何时间，似乎这是最好的路线）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:26:32.200

您是否尝试过使用`json_encode()`： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

您可以将对象、数组等传递给它，它会为您转换它们。

**额外评论** 您的代码非常混乱。在 HTML 中间有 MySQL 请求并不是很好。您可能想对 MVC 框架进行一些研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:30:40.710

为了防止各种编码和传输问题，我要做的是将 html 放置在您以后可以访问的隐藏容器中：

```
<div style="display:none">
<?php while ($r = mysql_fetch_array($q)){ ?>
    <div id="container_<?php echo $r['emailmsgid']; ?>">
        <div class="description">
            <?php echo $r['emailmsgsubject']; // short desc ?>
        </div>
        <div class="html">
            <?php echo $r['emailmsg_html']; // usually html with images (save to json, somehow) ?>
        </div>
<?php } ?>
</div> 
```

然后你的脚本会变成： $(document).ready(function(){

```
 // populate the textarea above
  $("#emailmsgid").change(function(){
    var selectedID = $(this).val();

    var msgHtml = $('#container_' + selectedID).find('.html').html();  // This line is how you get the html

    $("#selectedmsg").val("whatever the json has saved for that emailmsgid");
  }); 

});
</script> 
```

# php - 验证基础

> ID：14284928
> 
> 赞同：2
> 
> 时间：2013-01-11T19:01:59.770
> 
> 标签：php, database, security, web-applications, authorization

在 web 应用中，当然很多情况下我们会支持 CRUD(Create, Retriever, Update, Delete)

基本程序员会做类似下面的事情（没有验证）：

```
delete?room_id=12
update?room_id=13 
```

显示的 room_id 仅适用于属于用户/客户的房间。第一个身份验证仅使用用户名和密码。嗯，这是一个标准。

但我相信我们不应该相信用户。不良用户可能会猜到不属于他的 room_id。像`delete?room_id=199`

我问我的程序员朋友，他们甚至从来没有考虑过这个问题。

所以为了防止这种情况，我有一个基本的解决方案，总是为任何相关对象传递 user_id。在采取任何行动之前进行此类查询*`is the room_id belong to the user`*。如果这是唯一的解决方案，那么我必须修改我已经编写的所有查询。

问题是，对于这个基本问题有什么好的或更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:23:24.517

你的方法很好。你的程序员朋友没有考虑到这一点，我并不感到惊讶。不幸的是，安全似乎是大多数程序员最不关心的事情。

在一个好的系统中，您将对几乎所有执行的操作执行*授权*检查，以查看该特定用户是否被授权执行该操作。在整个应用程序中构建此签入通常是一种很好的做法，即使对于您通常不关心它们是否被授权的事情：有一天您可能会这样做。

在您的场景中，该操作可能是检索房间、更新房间甚至删除房间。

为了帮助解决问题，我有一些建议：

1.  如果可能，使 room_id 不可猜测。假设您已经使用 int 作为主键，简单的方法是在客户端浏览器和应用程序之间传递时对其进行加密/解密。

2.  确保在浏览器端，您没有传入用户 ID，而是从会话中或通过其他机制提取。关键是您不想相信用户将 id 传递给您。

3.  任何不是 GET 的操作，都使用 HTTP POST 来执行。换句话说，您根本不应该将 id 放在查询字符串中，而应该将其作为发布数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:32:02.787

假设您在他登录时已在会话中注册了用户 ID： session_register("userid");

然后你可以这样做来检查登录的用户是否拥有房间（正如你所说的，你有一个同时包含 roomid 和 userid 的数据库）

```
$connect = mysql_connect("$server", "$dbuser", "$dbpassword")
    OR die(mysql_error());

$room = intval($_GET['room_id']);
$user = mysql_real_escape_string($_SESSION['userid']);

mysql_select_db("$databasename", $connect);
$select = mysql_query("SELECT userid AS uid FROM table WHERE userid='$user' AND room='$room'");
$fetch = mysql_fetch_assoc($select); 
$found = $fetch['uid']; 

if ($found == $_SESSION['userid']){

// User owns this room let him delete

} else {

// FAIL, This user does not own this room

} 
```

更改“表”（数据库中的哪个表包含此信息）、“用户 ID”（该表中的用户 ID 列名）和“房间”（该表中的房间 ID 列名）

**编辑：** 如果您的 room_ids 可能有任何字符，请删除 intval(); 从 $room 并为它做一个 real_escaping，如果 room_ids 只是数字不要改变它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T20:23:01.053

**永远不要相信**你的客户传递给你的任何东西。每个请求**都必须在服务器**端进行验证，并检查是否允许登录的用户执行该操作。

每个文本输入都必须在插入或查看时进行清理。后者有更大的遗忘机会，从而为[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)提供了一个领域。我建议对模板使用隐式清理。

还要尽量避免将 GET 方法用于批评操作。攻击者总是可以强制用户访问 URL（iframe，向他发送缩短的链接）。您还应该在删除表单中添加特殊生成的令牌以防止[CSRF 攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。

# zeromq - 菊花链式多 NIC 卡 PC 的多播传播

> ID：14284931
> 
> 赞同：0
> 
> 时间：2013-01-11T19:02:20.380
> 
> 标签：zeromq, multicast

这是正在讨论的拓扑：

```
 NIC0                       NIC0                    NIC0
          |                          |                       |
    +-----+-----+             +------+-----+          +------+------+
---NIC1       NIC2---------NIC1            NIC2-----NIC1          NIC2---- . .
    +----PC1----+             +----PC2-----+          +-----PC3-----+ 
```

我有一堆 PC 盒子，每个盒子都有多 (3) 个 Nic 卡，一个用于与外部世界交互，其他的用于菊花链在它们之间进行通信。

Q(1) 有人可以建议我是否可以以某种方式控制菊花链系统上的“多播流量”，而不让其与来自 NIC0（下图）卡的流量混合？我在每个盒子上运行 Linux 内核。我可以在接口名称中给出多播地址，但我的猜测是，如果 NIC0 流量也具有相同的多播 IP，它不能保证流量的混合，那么，ACL 是一个答案吗？

Q(2) 我的应用程序需要订阅通知设置，这就是我需要多播的原因。有一些选项，例如使用 0MQ，也使用基于 TCP 的多播 (PGM)。这会以某种方式保护我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:46:37.807

我不知道你为什么要菊花链这些电脑。在继续之前，您应该使用交换机连接这些机器。

真的，虽然，我不明白你的问题是什么......

# vb.net - Ninject：如何通过约定绑定使用拦截

> ID：14284934
> 
> 赞同：3
> 
> 时间：2013-01-11T19:02:37.723
> 
> 标签：vb.net, ninject, aop

我的 MVC 4 服务有这个绑定：

```
 kernel.Bind(Sub(x)
                        x.FromAssembliesMatching("*").
                        SelectAllClasses().
                        BindDefaultInterface()
                    End Sub) 
```

此外，该服务仅引用了一个合同项目，其中包含我的所有接口。当调用 Web API 服务时，ninject 会扫描程序集以查找匹配的具体内容并返回对象，填充构造函数绑定。

我想拦截对域模型方法的方法调用，以在适当的情况下处理错误、日志和基准测试。

我是否必须创建一个单独的模块来处理它？
我不想在我的域项目中引用 ninject

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:23:33.260

参考`Ninject.Extensions.Interception`例如动态代理扩展。然后。请执行下列操作：

后`BindDefaulInterface()`

添加

```
.Configure(b => b.InScopeOfYourChoice().Intercept().With...) 
```

而已

# python - 使用 ThreadingMixin 停止 BaseHTTPServer 产生的线程

> ID：14284936
> 
> 赞同：5
> 
> 时间：2013-01-11T19:02:50.297
> 
> 标签：python, multithreading, python-2.7, basehttpserver

我已经在[这篇文章](https://stackoverflow.com/a/2398283/1291411)中读到，使用`ThreadingMixin`（来自`SocketServer`模块），您可以使用`BaseHTTPServer`. 我已经尝试过了，它*确实*有效。但是，如何停止服务器产生的活动线程（例如，在服务器关闭期间）？这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T19:10:50.767

最简单的解决方案是只使用`daemon_threads`. 简短的版本是：只需将其设置为 True，不用担心；当您退出时，任何仍在工作的线程都会自动停止。

正如[`ThreadingMixIn`文档](http://docs.python.org/2/library/socketserver.html)所说：

> 当从 ThreadingMixIn 继承线程连接行为时，您应该明确声明您希望线程在突然关闭时的行为方式。ThreadingMixIn 类定义了一个属性 daemon_threads，它指示服务器是否应该等待线程终止。如果您希望线程自主运行，则应显式设置该标志；默认值为 False，这意味着 Python 在 ThreadingMixIn 创建的所有线程都退出之前不会退出。

[`threading`文档](http://docs.python.org/2/library/threading.html)中提供了更多详细信息：

> 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。初始值继承自创建线程。可以通过 daemon 属性设置标志。

有时这是不合适的，因为您想在不退出的情况下关闭，或者因为您的处理程序可能需要进行清理。但在*适当*的时候，你不能变得更简单。

如果您只需要一种在不退出的情况下关闭的方法，并且不需要保证清理，您可以通过`ctypes`或使用特定于平台的线程取消 API `win32api`。这通常是一个坏主意，但有时这正是您想要的。

如果您需要彻底关闭，则需要为此构建自己的机器，线程协作的地方。例如，您可以创建一个由 a 保护的全局“退出标志”变量[`threading.Condition`](http://docs.python.org/2/library/threading.html#condition-objects)，并让您的`handle`函数定期检查它。

如果线程只是在做缓慢的、非阻塞的工作，你可以把它分解成更小的部分，那就太好了。例如，如果该`handle`函数始终至少每 5 秒检查一次退出标志，则可以保证能够在 5 秒内关闭线程。但是如果线程正在做阻塞工作——因为它们可能是这样，因为你使用的全部原因`ThreadingMixIn`是让你进行阻塞调用而不是编写`select`循环或使用`asyncore`等？

好吧，没有好的答案。显然，如果您只需要“最终”而不是“在 5 秒内”发生关闭（或者如果您愿意在 5 秒后放弃干净关闭，并恢复使用特定于平台的 API 或守护线程），您只需在每次阻塞调用之前和之后进行检查，它就会“经常”工作。但如果这还不够好，你真的无能为力。

如果你需要这个，最好的答案是改变你的架构以使用有办法做到这一点的框架。最受欢迎的选择是[`Twisted`](http://twistedmatrix.com/trac/)、[`Tornado`](http://www.tornadoweb.org)和[`gevent`](http://www.gevent.org)。将来，[PEP 3156](http://www.python.org/dev/peps/pep-3156/)会将类似的功能引入标准库，[`tulip`](http://code.google.com/p/tulip/)如果您不想为现实世界构建一些必须尽快准备好的东西，那么有一个部分完整的参考实现值得一玩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T15:43:25.917

下面的示例代码展示了如何使用 threading.Event 在任何 POST 请求上关闭服务器，

```
import SocketServer
import BaseHTTPServer
import threading

quit_event = threading.Event()

class MyRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
  """This handler fires the quit event on POST."""
  def do_GET(self):
    self.send_response(200)
  def do_POST(self):
    quit_event.set()
    self.send_response(200)

class MyThreadingHTTPServer(
    SocketServer.ThreadingMixIn, BaseHTTPServer.HTTPServer):
  pass

server = MyThreadingHTTPServer(('', 8080), MyRequestHandler)
threading.Thread(target=server.serve_forever).start()
quit_event.wait()
server.shutdown() 
```

服务器已完全关闭，因此您可以立即重新启动服务器并且端口可用，而不是获得“地址已在使用中”。

# node.js - Mongoose 将 _id 重命名为 id

> ID：14284938
> 
> 赞同：1
> 
> 时间：2013-01-11T19:03:02.597
> 
> 标签：node.js, mongoose

我正在创建一个使用来自 Mongoose 的数据的 API。前端（Backbone）需要 id，而不是 _id。对于这样一个简单的问题，我似乎找不到简单的解决方案。有谁知道将_id重命名为id的方法。我希望这是每个模式的默认行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:09:30.377

您可以设置一个`getItem`返回所需字段的模式方法`id = _id`，如果您真的需要它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:10:35.630

你有没有想过在前端（Backbone）设置 model.idAttribute 为 _id。这将允许 Backbone '透明地将那个键映射到 id'。

[http://backbonejs.org/#Model-idAttribute](http://backbonejs.org/#Model-idAttribute)

# c# - 防止 Windows 在收到 ping 回复时发送无法访问的目标端口

> ID：14284943
> 
> 赞同：0
> 
> 时间：2013-01-11T19:03:18.707
> 
> 标签：c#, .net, pcap.net

我已经用 pcap.net 实现了一个 ping 请求。一切正常，但是当目的地回复 icmp 回显响应窗口时，会立即发送 icmp 目标端口无法访问。

```
me        other host
|           |
|---------->| Ping using pcap.net to send
|           |
|<----------| Ping-reply
|           |
|---------->| icmp Port unreachable 
```

我怎样才能防止 Windows 这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:25:15.740

看起来您应该能够在 Windows 中关闭该数据包：

请参阅：http: [//msdn.microsoft.com/en-us/library/ms912869](http://msdn.microsoft.com/en-us/library/ms912869)

在 Windows 防火墙设置中：

> 允许传出目的地无法到达
> 
> 由于错误而无法到达此计算机的通过 Internet 发送的数据将被丢弃并通过“无法访问目标”消息来解释故障。

# ruby-on-rails - 仅使用 ID 使用 rails link_to

> ID：14284944
> 
> 赞同：0
> 
> 时间：2013-01-11T19:03:29.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个页面需要指向具有给定 ID 的用户页面的链接。所以如果 ID 是 1234，我希望最终的 href 是 /user/1234。

我试着用

```
link_to "User", {:controller => "user", :action => "show", :id => 1234 } 
```

这给了我网址

```
/assets?action=show&controller=user&id=1234 
```

link_to 参数应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:08:09.960

如果可能，我会鼓励您使用命名路由（让 Rails 为您工作）。也就是说，将路由添加到您的路由文件：

```
resources :users 
```

然后，您可以将您的 link_to 方法编写为：

```
link_to "User", user_path(@user) 
```

或者

```
link_to "User", user_path(1234) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:11:59.653

这种语法虽然有效，但可以追溯到 Rails 2 天。

为什么不使用内置的 url 助手？[URL 助手](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)

这将允许您将有问题的用户作为对象作为 link_to 传递

`<%= link_to "User", user_url( user_object ) %>`

或者如果您更喜欢明确（尽管这会将其添加为参数选项）

`<%= link_to "User", user_url( :id => '1234' ) %>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:04:36.817

对于 HTML id

```
<%= link_to "User", {:controller => "user", :action => "show"}, :id => '1234' %> 
```

[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

对于路径 ID

```
link_to "Profile", :controller => "profiles", :action => "show", :id => @profile
# => <a href="/profiles/show/1">Profile</a> 
```

# jquery - 除非用户使用鼠标或回车键，否则如何防止 OnSelectedIndexChanged 导致回发？

> ID：14284951
> 
> 赞同：0
> 
> 时间：2013-01-11T19:03:58.163
> 
> 标签：jquery, asp.net

这是一个下拉列表，可以在所选索引上发回更改。

```
<asp:DropDownList ID="_ddlClientType" runat="server"  AutoPostBack = "true"
   OnSelectedIndexChanged="ClientType_SelectedIndexChanged"  >                                 
   <asp:ListItem Value="-1" Text="CANCEL.."></asp:ListItem>
   <asp:ListItem Value="11" Text="External"></asp:ListItem>
   <asp:ListItem Value="12" Text="Internal"></asp:ListItem>
   <asp:ListItem Value="13" Text="TOM"></asp:ListItem>
</asp:DropDownList> 
```

使用鼠标时，一切正常。但是，我希望用户能够通过使用向上/向下箭头键来选择不同的项目。此外，当用户键入字母时，以该字母开头的第一个项目会突出显示。

问题是当在下拉列表中选择了不同的项目时，页面会因为“ **OnSelectedIndexChanged** ”事件而回发。

有没有办法防止在按下键（而不是点击鼠标）时发生回发，直到按下**回车键**？

# 编辑

按下某个键时，我可以显示警报提示

```
$('select').keypress(function () {
  alert('A key was pressed')
}); 
```

现在，我需要知道按下了哪个键。这样，我就可以做出决定了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:13:58.103

如果您使用 onblur 事件，它将在下拉列表失去焦点时回发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:56:37.367

你的问题有一点错误：

> 问题是当在下拉列表中选择了不同的项目时，页面会由于“OnSelectedIndexChanged”事件而回发。

该页面实际上是因为`AutoPostBack = "true"`.

首先将 AutoPostBack 更改为 False。

那么我建议您以不同的方式处理更改事件和按键事件。如果您使用 jQuery 处理更改事件，然后在该更改事件中提交，并且还处理 keydown 和过滤键，那么您只能在需要时提交。

```
$("#TargetSelect").change(function(event){
    console.debug($(this).val());
});
$("#TargetSelect").keydown(function(event){
    event.preventDefault();
  if(event.which == 13){
     $(this).trigger('change');
  }else if(event.which == 38){
    var idx = this.selectedIndex;
    if(idx != 0){
      $("#TargetSelect").prop('selectedIndex', idx-1); 
    }
  }else if(event.which == 40){
    var idx = this.selectedIndex;
    var maxIndex = $('select').children('option').length;
    idx += 1;           
    if(idx < maxIndex){
      $("#TargetSelect").prop('selectedIndex', idx); 
    }
  }else{
      var $options = $('select').children('option');
      $options.each(function(){
        if(String.fromCharCode(event.which) == $(this).text().charAt(0)){
          var idx = $(this).index();
          $("#TargetSelect").prop('selectedIndex', idx);     
        }
      });
    }
}); 
```

[这是一个（更新的）示例](http://jsfiddle.net/cHpNe/4/)。用表单的提交替换 console.debug ，你应该是金色的。

如果您有多个选择框，则代码应如下所示：

```
$("select").change(function(event){
    console.debug($(this).val());
});
$("select").keydown(function(event){
    event.preventDefault();
  if(event.which == 13){
     $(this).trigger('change');
  }else if(event.which == 38){
    var idx = this.selectedIndex;
    if(idx != 0){
      $(this).prop('selectedIndex', idx-1); 
    }
  }else if(event.which == 40){
    var idx = this.selectedIndex;
    var maxIndex = $(this).children('option').length;
    idx += 1;           
    if(idx < maxIndex){
      $(this).prop('selectedIndex', idx); 
    }
  }else{
      var $options = $(this).children('option');
      var $thisSelect = $(this);
      $options.each(function(){
        if(String.fromCharCode(event.which) == $(this).text().charAt(0)){
          var idx = $(this).index();
          $thisSelect.prop('selectedIndex', idx);     
        }
      });
    }
}); 
```

另请注意，如果您有两个以键入的字母开头的条目，那么您将选择最后一个条目。可以对代码进行修改以允许过滤框。

[多个盒子的例子](http://jsfiddle.net/cHpNe/9/)

# c++ - C ++中的函数重载与默认参数

> ID：14284952
> 
> 赞同：2
> 
> 时间：2013-01-11T19:03:58.980
> 
> 标签：c++, overloading, default-arguments

嗨，我有一个困惑或说更多我需要了解一些东西。我有一个过程和另一个相同的重载过程。

```
 string conct (string a, string b) {
      string str = conct(a, b, "string");
      return str;
    }

    string conct (string a, string b, const char* c) {
      // do the processing;
      return concatenated_string;
    } 
```

`c`如果我将重载函数作为默认参数，是否有可能不是有两个重载函数。因此，即使有人只传递了两个参数，我也可以只有一个函数来处理这种情况。

但我主要关心的是第三个论点，即当前`const char* c`. 因此，如果我做到这一点`const char* c = "string"`，是否是正确的方法来处理使用具有默认参数的一个函数删除重载的情况。

我在[这里](https://stackoverflow.com/questions/12160993/c-overloading-a-function-default-argument)看到了这篇文章，但这似乎专注于编译而不是我的困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:24:55.740

是的，你可以用一个函数和一个默认参数替换你的重载函数：

```
string conct (string a, string b, const char* c = "string") {
  // do the processing;
  return concatenated_string;
} 
```

*   当您重载函数时，编译器会为每个函数生成代码，这可能会导致更大的代码大小。
*   如果重载只是像您的情况一样充当瘦包装器，那么优化器可能会消除额外的工作。
*   默认参数设置在调用者的位置，而不是在函数内部，因此默认参数必须是公开可见的，并且更改它们需要重新编译所有调用者。对于像你这样的重载， psuedo-default 参数成为一个隐藏的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T12:13:20.860

默认值可以在函数原型中使用，但是如果我们想要默认中间参数，那么我们必须将所有值默认到它的右边......另一方面，可以为所有可能的参数组合重载一个函数，也需要默认值不要放在函数调用堆栈上，因此编译器的工作量会减少......

# c++ - 在源码树中获取 boost:shared_ptr 的 get 方法的所有使用列表

> ID：14284954
> 
> 赞同：0
> 
> 时间：2013-01-11T19:04:02.007
> 
> 标签：c++, debugging, boost, shared-ptr

我试图在一个大型项目中找到所有使用 boost::shared 的“get”方法的案例——其中某些东西并不具体。

问题是一些程序员在某些时候马虎并开始使用裸指针，使用 foo.get() 来控制它们。所以我的目标是找到所有使用这个 get 方法来审查和修复代码的地方。

我已经考虑修改 shared_ptr boost 标头以注释掉该方法并使用“-k”选项运行 make 来发现所有这些地方，但也许有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:12:53.083

我喜欢你的想法。听起来您担心修改系统头文件，这是一种不好的形式。

这是一个稍微优雅的想法。将头文件复制到 /tmp/tmpinclude，然后添加 CFLAG -I/tmp/tmpinclude 并确保这是第一个 -I CFlag。现在您的 hack 包含在您的用户/沙盒空间中。

# google-apps-script - 使用 Google Apps 脚本如何仅从具有属性/键的 ScriptDb 中检索对象

> ID：14284955
> 
> 赞同：1
> 
> 时间：2013-01-11T19:04:02.693
> 
> 标签：google-apps-script

是否可以查询 ScriptDb 以仅返回具有特定属性/键的那些对象？

```
results = db.query({key: db.not(null)}); // always triggers error "We're sorry, a server error occurred. Please wait a bit and try again."
results = db.query({key: db.not(undefined)}); // returns all objects in the database 
```

反之亦然：

```
results = db.query({key: undefined}); 
results = db.query({key: null});         // both these cause an error on any of the ScriptDbResult methods "Your query object contains an invalid component." 
```

有什么想法吗？

# ios - 从一个类调用另一个类并接收其返回响应

> ID：14284956
> 
> 赞同：-5
> 
> 时间：2013-01-11T19:04:05.470
> 
> 标签：ios, objective-c

所以我想要一个类来处理所有的http请求，这样我就不必一遍又一遍地复制相同的代码。如何向 http 类发出 http 请求并在我发出请求的类中接收响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:11:20.793

您需要将类（A 类）设置为实际触发 http 请求的类（B 类）的委托。您创建 B 类方法的实例，调用您的方法，并让您的方法将通知和/或响应发送回 A 类。

类似于： A 类：

```
if(bwebservice == nil){
    bwebservice = [[WebServiceClass alloc] initWithDelegate:self];
}
[bwebservice start];

.
.
.

#pragma mark - Web Service Methods
- (void)webService:(WebServiceClass *)webService didFailWithError:(NSError *)error{
    NSLog(@"ERROR: %@", error);

}
- (void)webServiceDidComplete:(JSONService *)webService{
} 
```

B类：

```
// ...REQUEST SEND DATA...
.
.
.
- (void)notifyDelegateOfError:(NSError *)error{
    [delegate webService:self didFailWithError: error];
}

- (void)notifyDelegateOfCompletion
{
    if ([delegate respondsToSelector:@selector(webServiceDidComplete:)]) {
        [delegate webServiceDidComplete:self];
    }
} 
```

# awk - 如何使用条件表达式选择数据？

> ID：14284960
> 
> 赞同：3
> 
> 时间：2013-01-11T19:04:43.067
> 
> 标签：awk, sed

我有一张这样的桌子：

```
symbol  refseq          seqname start           stop            strand
Susd4   NM_144796       chr1    184695027       184826500       +
Ptpn14  NM_008976       chr1    191552147       191700574       +
Cd34    NM_001111059    chr1    196765080       196787475       +
Gm5698  NM_001166637    chr1    31034088        31055753        -
Epha4   NM_007936       chr1    77363760        77511663        -
Sp110   NM_175397       chr1    87473474        87495392        -
Gbx2                    chr1    91824537        91827751        -
Kif1a                   chr1    94914855        94998430        -
Bcl2    NM_009741       chr1    108434770       108610879       - 
```

我想提取具有以下条件的数据：

1）“refseq”列中的值不丢失的行

2）对于“ `start`”和“ `stop`”列中的值，每行只保留一个值：如果“ ”列中的值为`strand`“ `+`”，则取“ ”中的值`start`；如果“ ”列中的值为`strand`“ `-`”，则取“ ”中的值`stop`。

这是预期的：

```
Susd4   NM_144796   chr1    184695027   +
Ptpn14  NM_008976   chr1    191552147       +
Cd34    NM_001111059    chr1    196765080       +
Gm5698  NM_001166637    chr1        31055753    -
Epha4   NM_007936   chr1        77511663    -
Sp110   NM_175397   chr1        87495392    -
Bcl2    NM_009741   chr1        108610879   - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:53:53.090

这可能对您有用（GNU sed）：

```
sed -r '1d;/(\S+\s+){5}\S+/!d;/\+$/s/\S+\s+//5;/-$/s/\S+\s+//4' file 
```

编辑：

*   `1d`删除标题行
*   `/(\S+\s+){5}\S+/!d;`如果该行没有 6 个字段，请将其删除
*   `/\+$/s/\S+\s+//5`如果该行以`+`删除第 5 个字段结尾
*   `/-$/s/\S+\s+//4`如果该行以`-`删除第 4 个字段结尾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T21:00:27.523

我很想不修改输入分隔符，以便空格和制表符分隔字段，而不是只坚持制表符。这意味着您希望在第一个（跳过标题行）之后有六个字段的记录：

```
awk 'NR > 1 && NF == 6 { if ($6 == "+") x = $4; else x = $5; print $1, $2, $3, x; }' 
```

如果您想更多地控制输出格式，您可以使用 OFS 进行 dink，或者使用`printf`：

```
awk 'BEGIN { OFS = "\t" }
     NR > 1 && NF == 6 { if ($6 == "+") x = $4; else x = $5; print $1, $2, $3, x; }'

awk 'NR > 1 && NF == 6 { if ($6 == "+") x = $4; else x = $5;
                         printf "%-8s %-12s %s %9s\n", $1, $2, $3, x; }' 
```

还有其他方法可以处理它，我敢肯定...

第一个脚本产生：

```
Susd4 NM_144796 chr1 184695027
Ptpn14 NM_008976 chr1 191552147
Cd34 NM_001111059 chr1 196765080
Gm5698 NM_001166637 chr1 31055753
Epha4 NM_007936 chr1 77511663
Sp110 NM_175397 chr1 87495392
Bcl2 NM_009741 chr1 108610879 
```

内容是正确的，我相信；可以通过多种方式改进格式。最后一个脚本产生：

```
Susd4    NM_144796    chr1 184695027
Ptpn14   NM_008976    chr1 191552147
Cd34     NM_001111059 chr1 196765080
Gm5698   NM_001166637 chr1  31055753
Epha4    NM_007936    chr1  77511663
Sp110    NM_175397    chr1  87495392
Bcl2     NM_009741    chr1 108610879 
```

您可以根据需要调整字段宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:27:16.420

又快又脏，请检查它是否有效：

```
awk -F'\t' 'NR>1&&$2{print $NF=="+"?$4:$5}' file 
```

输出：

```
184695027
191552147
196765080
31055753
77511663
87495392
108610879 
```

如果您还想要输出中的其他值：

```
 awk 'BEGIN{FS=OFS="\t"}NR>1&&NF==6{print $1,$2,$3,$NF=="+"?$4:$5}' file 
```

输出：

```
Susd4   NM_144796       chr1    184695027
Ptpn14  NM_008976       chr1    191552147
Cd34    NM_001111059    chr1    196765080
Gm5698  NM_001166637    chr1    31055753
Epha4   NM_007936       chr1    77511663
Sp110   NM_175397       chr1    87495392
Bcl2    NM_009741       chr1    108610879 
```

**编辑**，将格式调整为 OP 的输出示例：

```
awk 'BEGIN{FS=OFS="\t"}NR>1&&NF==6{$4=$NF=="+"?$4:" ";$5=$NF=="+"?" ":$5;print}' file 
```

输出：

```
Susd4   NM_144796       chr1    184695027               +
Ptpn14  NM_008976       chr1    191552147               +
Cd34    NM_001111059    chr1    196765080               +
Gm5698  NM_001166637    chr1            31055753        -
Epha4   NM_007936       chr1            77511663        -
Sp110   NM_175397       chr1            87495392        -
Bcl2    NM_009741       chr1            108610879       - 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T20:10:22.123

当您处理带有字段的文本文件时，通常`awk`比旨在帮助解析带有字段的文本文件要好。`sed``awk`

您的表格设置中的列如何？它们是制表符分隔的，还是您使用空格来帮助排列列？

如果这是一个制表符分隔的表，您可以`awk`用来检查第二个字段是否为空：

```
awk '
    {
        if ($2 == "") {
            print "Missing 'refseqence' in symbol " $1
        }
    ' $myfile 
```

如果您的文件使用空格来对齐各个字段，您仍然可以`awk`通过使用其内置的 substr 函数来使用。

```
awk '
    {
        if (substr($0, 9, 12) ~ /^ *$/)
            print "Missing 'refsequence' in symbol " substr ($0, 1, 7)
        }
    }
' $myfile 
```

顺便说一句，我在这里比较罗嗦，向您展示语法以使其易于理解。我本可以使用一些快捷方式将它们放在一行中：

```
awk '$2 == "" {print "Missing refseqence in symbol " $1}' $myfile
awk 'substr($0, 9, 12) ~ /^  */ {print "Missing refsequnece in symbol " substr($0, 1, 7) }' $myfile 
```

# delphi - TForm 上的 Rtti GetFields 和 GetAttributes

> ID：14284963
> 
> 赞同：2
> 
> 时间：2013-01-11T19:05:11.010
> 
> 标签：delphi, rtti

我有一个这样的 TForm：

```
TMyForm = class (TForm)
  [MyAttr('Data')] 
  edit1: TEdit;
private
 FData: String;
end 
```

当我尝试通过 RTTI 获取此表单的字段时，我只得到 edit1 字段，而不是 FDATA，当我查询 edit1 字段属性时，得到一个空数组。

对于另一个不继承 TForm 的类，一切正常。为什么？

编辑样本

```
type

{$RTTI EXPLICIT FIELDS([vcPrivate,vcProtected, vcPublic])}
  TForm3 = class(TForm)
    [TCustomAttribute]
    Button1: TButton;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
    [TCustomAttribute]
    FData: String;
  public
    { Public declarations }
  end;

var
  Form3: TForm3;

implementation

{$R *.dfm}

procedure TForm3.Button1Click(Sender: TObject);
var
  LCtx: TRttiContext;
  LField: TRttiField;
  LAttr: TCustomAttribute;
begin
  for LField in LCtx.GetType(Self.ClassInfo).GetDeclaredFields do
  begin
      Memo1.Lines.Add(lField.Name);
      for LAttr in LField.GetAttributes do
        Memo1.Lines.Add(#9+LAttr.ClassName);

  end;
end;

end. 
```

单击 button1 的结果：

```
FData
    TCustomAttribute
Button1
Memo1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:10:56.180

您的项目中的某处可能存在`$RTTI`导致扩展 RTTI 无法工作的指令。

尝试在 TMyForm 声明之前添加以下内容：

```
{$RTTI EXPLICIT
  METHODS(DefaultMethodRttiVisibility)
  FIELDS(DefaultFieldRttiVisibility)
  PROPERTIES(DefaultPropertyRttiVisibility)} 
```

这将为在它之后声明的所有内容重置 RTTI 生成，并且在那之后您应该获得正确的 RTTI。

# memory-management - CUDA：如何为类的数据成员分配内存

> ID：14284964
> 
> 赞同：3
> 
> 时间：2013-01-11T19:05:13.063
> 
> 标签：memory-management, cuda

假设我有这个类：

```
class Particle
{
    double *_w;
}; 
```

我想将*nParticles*对象发送`Particle`到我的内核。为这些对象分配空间很容易：

```
Particle *dev_p;
cudaStatus = cudaMalloc((void**)&dev_P, nParticles * sizeof(Particle));
if (cudaStatus != cudaSuccess) {
    fprintf(stderr, "cudaMalloc failed!");
    goto Error;
} 
```

还假设 **nParticles 是 100**。现在我需要为一个对象中的每个分配*300 个 double 。*我怎样才能做到这一点？我试过这段代码：`_w``Particle`

```
for( int i = 0; i < nParticles; i++){
    cudaStatus = cudaMalloc((void**)&(dev_P[i]._w), 300 * sizeof(double));
    if (cudaStatus != cudaSuccess) {
        fprintf(stderr, "cudaMalloc failed!");
        goto Error;
    }
} 
```

但是当我访问 dev_p[i]._w[j] 时，使用 Nsight 进行调试会停止。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T20:44:44.160

也许您应该包含一个完整的简单示例。（如果我在上面编译您的代码并自行运行它，在 linux 上，我会在第二个 cudaMalloc 操作时遇到 seg 错误）。我看到的一个问题是，由于您在第一步中已在设备内存中分配了粒子对象，因此当您分配`_w`指针时，您将指针传递给已经在设备内存中的 cudaMalloc。您应该将基于主机的指针传递给 cudaMalloc，然后它将分配给设备（全局）内存中的分配区域。

我认为符合我在 yoru 示例中看到的一种可能的解决方案是这样的：

```
#include <stdio.h>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

class Particle
{
    public:
    double *_w;
};

__global__ void test(Particle *p){

  int idx=threadIdx.x + blockDim.x*blockIdx.x;

  if (idx == 2){
    printf("dev_p[2]._w[2] = %f\n", p[idx]._w[2]);
    }
}

int main() {
  int nParticles=100;
  Particle *dev_p;
  double *w[nParticles];
  cudaMalloc((void**)&dev_p, nParticles * sizeof(Particle));
  cudaCheckErrors("cudaMalloc1 fail");

  for( int i = 0; i < nParticles; i++){
    cudaMalloc((void**)&(w[i]), 300 * sizeof(double));
    cudaCheckErrors("cudaMalloc2 fail");
    cudaMemcpy(&(dev_p[i]._w), &(w[i]), sizeof(double *), cudaMemcpyHostToDevice);
    cudaCheckErrors("cudaMemcpy1 fail");
    }
  double testval = 32.7;
  cudaMemcpy(w[2]+2, &testval, sizeof(double), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpy2 fail");
  test<<<1, 32>>>(dev_p);
  cudaDeviceSynchronize();
  cudaCheckErrors("kernel fail");
  printf("Done!\n");

} 
```

在这里，我们在主机上创建一组单独的指针以用于 cudaMalloc 目的，然后将这些分配的指针复制到设备以用作设备指针（这对于 UVA 是合法的）。

另一种方法是[在设备端分配 _w 指针](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#dynamic-global-memory-allocation-and-operations)。这也可能符合您的目的。

以上所有我都假设 cc 2.0 或更高版本。

使用类似于[此处](https://stackoverflow.com/questions/64664431/cuda-cublas-issues-solving-many-3x3-dense-linear-systems/64672815#64672815)描述的方法，可以将循环中完成的设备端分配折叠为单个分配：

```
cudaMalloc(&(w[0]), nParticles*300*sizeof(double));
cudaCheckErrors("cudaMalloc2 fail");
cudaMemcpy(&(dev_p[0]._w), &(w[0]), sizeof(double *), cudaMemcpyHostToDevice);
cudaCheckErrors("cudaMemcpy1 fail");
for( int i = 1; i < nParticles; i++){
  w[i] = w[i-1] + 300;
  cudaMemcpy(&(dev_p[i]._w), &(w[i]), sizeof(double *), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpy1 fail");
  } 
```

这些`cudaMemcpy`操作仍然必须单独完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:19:24.407

有两种方法可以做到这一点。第一个 - 您在主机上分配内存，填充粒子对象的*主机*数组。完成后，通过 .将主机阵列复制到设备`cudaMemcpy`。

第二种方式 - 在 Fermi 及更高版本上，您可以调用`malloc`内核，从内核填充`dev_P`数组。

# java - 使用 JButton 填充 JTable 仅在第一次时有效

> ID：14284972
> 
> 赞同：0
> 
> 时间：2013-01-11T19:05:54.923
> 
> 标签：java, swing, jtable, jbutton

我`jTable` `jtBusqueda`用`jButton` `jbBuscarActionPerformed`. 第一次按预期工作，但是当值改变时（第二次）它不起作用。

我的按钮代码是：

```
 private void jbBuscarActionPerformed(java.awt.event.ActionEvent evt)    {                                         
        //get data from database
        clsDBBusca dbengine2 = new clsDBBusca();
        try {
            data2 = dbengine2.getBusqueda();
        } catch (Exception ex) {
            Logger.getLogger(clsCodif2.class.getName()).log(Level.SEVERE, null, ex);
        }

        //create header for the table
        header2 = new Vector<String>();
        header2.add("Cve"); //Cve
        header2.add("Descripcion"); // Caracteristica Principal

        jtBusqueda.setModel(new javax.swing.table.DefaultTableModel
            (
                data2, header2
            )
        initComponents();

    } 

    public Vector getBusqueda()throws Exception
        {
            Vector<Vector<String>> resultadoVector = new Vector<Vector<String>>();

            Connection conn = dbConnection();
            PreparedStatement pre = conn.prepareStatement("SELECT Clave_Nueva, Descripcion_Especificaciones FROM famMat_Especificaciones WHERE Descripcion_Especificaciones like '%" + jtBuscaTexto.getText() + "%'");

            ResultSet rs = pre.executeQuery();

            while(rs.next())
            {
                Vector<String> resultado = new Vector<String>();
                resultado.add(rs.getString(1)); //Cve
                resultado.add(rs.getString(2)); //Descripcion de la busqueda
                resultadoVector.add(resultado);
            }

            /*Close the connection after use (MUST)*/
            if(conn!=null)
            conn.close();

            return resultadoVector;

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:19:49.400

尝试添加

```
jtBusqueda.repaint(); 
```

# dependency-injection - ActionFilterAttribute ninject 注入 - DbContext 已被释放

> ID：14284973
> 
> 赞同：8
> 
> 时间：2013-01-11T19:05:59.227
> 
> 标签：dependency-injection, asp.net-mvc-4, ninject, entity-framework-5, actionfilterattribute

我有我的项目，它使用带有服务和工作单元的通常存储库模式（所有这些都使用 Ninject 从 NinjectModule 注入依赖项），但我试图从 an 访问服务`ActionFilterAttribute`以在布局中注入一些信息（来自 DB）我展示的页面，所以我不需要弄乱每个控制器上的所有操作。

当我在一个屏幕上保存到数据库并移动到下一个屏幕然后返回到上一个屏幕（使用标准`@Url.Action`）时，问题就出现了：触发了`ActionFilterAttribute`for`Index`操作，但调用服务和相应的存储库（在属性内）抛出一个例外，因为`DbContext has been disposed`.

访问服务是否有任何问题，因此，`DbContext`通过`ActionFilterAttribute`属性注入注入服务时有什么问题吗？我想说明一下，我在属性中对服务使用属性注入，因为构造函数接收 2 个参数，这些参数是任意的，具体取决于 Action 方法的签名，所以我唯一的选择是通过属性注入。

如果您需要一些代码，请告诉我，我会更新问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:33:41.403

我在以下问题中找到了我的问题的解决方案： [Injecting dependencies into ASP.NET MVC 3 action filters。这种方法有什么问题？](https://stackoverflow.com/questions/7192543/injecting-dependencies-into-asp-net-mvc-3-action-filters-whats-wrong-with-this)

将[Mark Seeman](https://stackoverflow.com/questions/7192543/injecting-dependencies-into-asp-net-mvc-3-action-filters-whats-wrong-with-this/7194467#7194467)的回答与[striplingwarrior](https://stackoverflow.com/questions/7192543/injecting-dependencies-into-asp-net-mvc-3-action-filters-whats-wrong-with-this/7194467#comment8645786_7194467)的评论结合起来就是解决方案。

基本上，我将我的 ActionFilterAttribute 拆分为一个仅修饰我的 Actions 并保留我以后需要的参数的 Attribute，还拆分为一个 ActionFilter 来检查 Action 的自定义属性，如果我的属性存在，那么它将我想要的数据从 DB 注入视图包。之后一切都与 Ninject 的 BindFilter 扩展绑定，因此它仅适用于它需要的方法。

# c# - Windows Phone 位置 API

> ID：14284974
> 
> 赞同：0
> 
> 时间：2013-01-11T19:06:07.340
> 
> 标签：c#, windows-phone-7, geolocation

我正在开发一个基于位置的社交网络应用程序，并且正在使用高精度的地理坐标观察器和 20m 的移动阈值来获取用户的位置。我的问题是关于位置修复的频率。从文档中，我收集到 20m 的移动阈值仅意味着如果当前位置距离上一个位置更改事件的位置 20m，则不会触发位置更改事件。这表明位置修复仍然会发生，但如果 <20m，它们不会触发事件处理程序。然后设备如何决定多久执行一次位置修复？更改运动阈值是否会以任何方式改变这一点？欢迎任何我可能错过的额外文档！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:48:37.050

我想你想知道 MovementThreshold 是如何工作的以及如何设置它。

基本上你可以说：

```
public class MyClass
{
      private IGeoPositionWatcher<GeoCoordinate> _geoCoordinateWatcher;

      /// <summary>
        /// Gets the geo coordinate watcher.
        /// </summary>
        private IGeoPositionWatcher<GeoCoordinate> GeoCoordinateWatcher
        {
            get
            {
                if (_geoCoordinateWatcher == null)
                {
                    _geoCoordinateWatcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
                    ((GeoCoordinateWatcher)_geoCoordinateWatcher).MovementThreshold = 3;
                }
                return _geoCoordinateWatcher;
            }
        }
} 
```

你可能有的其他地方

```
DispatcherTimer currentSpeedTimer = new DispatcherTimer();
            currentSpeedTimer.Interval = new TimeSpan(0, 0, 1);
            currentSpeedTimer.Tick += (sender, e) =>
            {
                if (this.GeoCoordinateWatcher.Position.Location.HorizontalAccuracy < 10)
                {
                    if (DateTime.Now - this.GeoCoordinateWatcher.Position.Timestamp.DateTime > new TimeSpan(0, 0, 2))
                    {
                        CurrentSpeed = 0;
                    }
                    else
                    {
                        CurrentSpeed = double.IsNaN(this.GeoCoordinateWatcher.Position.Location.Speed) ? 0 : this.GeoCoordinateWatcher.Position.Location.Speed;
                    }
                }
            };
            currentSpeedTimer.Start(); 
```

还值得指出的是，我发现使用 .NET Reactive Extensions 和 IGeoPositionWatcher 对我来说效果非常好。

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:22:50.090

在我看来，如果当前位置距先前位置 > 20m 会触发事件。

如果有办法改变阈值，那似乎会以不同的方式触发，但最大分辨率可能是 20m，因为这通常是卫星的最大分辨率，如果我没记错的话，不确定。

# java - 为什么 java.io.File.listFiles() 抛出 NPE 而不是正确的异常？

> ID：14284975
> 
> 赞同：1
> 
> 时间：2013-01-11T19:06:08.727
> 
> 标签：java, file, exception, nullpointerexception

今天我写了一个小的Java程序来查找我的硬盘上的文件，部分是因为Windows缺少一个合适的，部分是因为它是为了好玩。它只是遍历目录的所有子目录，如果它们是目录，则递归遍历所有子目录。但后来我有一个`NullPointerException`. 经过一段时间后`System.out.println()'s`，`try-catch block`我发现这发生在某些目录上，例如`D:\System Volume Information`,`C:\Users\Public\Documents\My Videos`和`C:\ProgramData\Templates`. Windows 本身说，当在资源管理器地址栏中输入“拒绝访问”时。*探索*时，它们似乎被锁定了。消息[来源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/File.java)`java.io.File`告诉我：

```
public File[] listFiles() {
    String[] ss = list();
    if (ss == null) return null; //This line seems to cause the NPE
    int n = ss.length;
    File[] fs = new File[n];
    for (int i = 0; i < n; i++) {
        fs[i] = new File(ss[i], this);
    }
    return fs;
} 
```

**我的问题是，为什么没有正确的说法，，，`IOException`甚至`SecurityException`是`IDontCareWhatKindOfExceptionButPleaseNoNullPointerExceptionException`？**

我知道我可以只`try-catch`for`NPEs`或检查 for `null`，但我真的很好奇为什么没有正确的`Exception`throws 。

由于我不喜欢`try/catch`和检查`null`代码的审美价值，所以我做了一些讨厌的、讨厌的反射代码（有很多虚伪的`try/catch`块），它模拟了一些方法`java.io.File`，因为它们是私有的，并且一些包（如`java.io.FileSystem`）是不可见的. 而且因为我不关心某些 Windows 文件，所以我只是使用此代码忽略它们，给我一个空的`array`：

```
public static File[] listFiles(File mThis) {
    String[] ss = list(mThis);
    if (ss == null) {
        //System.out.println("ss is null");
        return new File[] {};
    }
    int n = ss.length;
    File[] fs = new File[n];
    for (int i = 0; i < n; i++) {
        fs[i] = getNewFile(ss[i], mThis);
    }
    return fs;
} 
```

编辑：为避免误解：我*确实*使用`try/catch`，我只是不喜欢它们。

EDIT2：我宁愿使用 GUI 而不是命令提示符。而且我非常不喜欢 Windows 搜索 GUI。使用起来几乎是痛苦的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:18:15.780

简短的回答：

*   安装JDK 7；
*   使用新的`Files`API。

在那之后你再也不会回来了`File`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:09:11.593

之所以如此，是因为[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28%29)的设计者在函数的合约（文档+签名）中正确识别了原因：

> 如果此抽象路径名不表示目录，则此方法返回 null。否则返回一个 File 对象数组，一个对应于目录中的每个文件或目录。结果中不包括表示目录本身和目录父目录的路径名。每个生成的抽象路径名都是使用 File(File, String) 构造函数从这个抽象路径名构造的。因此，如果这个路径名是绝对的，那么每个生成的路径名都是绝对的；如果此路径名是相对的，则每个生成的路径名都将相对于同一目录。

它返回 null 并给出具体原因。

> 由于代码的美学价值，我不喜欢 try/catch 和检查 null

这可能是 API 的“缺点”，但您公然无视它，因此您的程序崩溃了。

# css - 父位置：绝对和子 z-index

> ID：14284977
> 
> 赞同：0
> 
> 时间：2013-01-11T19:06:16.190
> 
> 标签：css, position, z-index, absolute

我想为孩子的 .bricks 设置更高的 z-index，这样它们就可以始终与其他父母重叠（红色方块）。父级必须绝对定位。

现场示例：http: [//jsfiddle.net/yJ62e/](http://jsfiddle.net/yJ62e/)

html

```
<div class="cont">
<div class="draggable" id="b2">
<div class="brick"></div>
<div class="brick"></div>
<div class="brick"></div>
</div>
<div class="draggable" id="b2">
<div class="brick"></div>
<div class="brick"></div>
<div class="brick"></div>
</div>
</div> 
```

css

```
 .cont {
    position:relative;
background-color: #747373;
height: 300px;
width: 300px;
margin:0 auto;
    }
.draggable {
    background-color: red;
right:100px;
cursor:pointer;
z-index:1;
position:absolute;
}

    #b2 {
height: 100px;
width: 100px;
}

.brick {
     background-color: blue;
height: 50px;
width: 50px;
float: left;
z-index:999 !important;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:43:36.033

我能想到的唯一解决方案是定位 .brick-Children 绝对值。否则 z-index 将不起作用。

# node.js - TypeError：无法调用未定义的方法“发出”

> ID：14284979
> 
> 赞同：0
> 
> 时间：2013-01-11T19:06:18.883
> 
> 标签：node.js, socket.io

当我尝试运行我的 nodejs 应用程序时，我遇到了错误。我正在制作一个聊天应用程序。这是我的代码：

```
var users = {};
var sockets = {};
var connect = require('connect');
var io = require('socket.io');

var fs = require('fs');

var port = process.env.VCAP_APP_PORT || process.env['app.port'] || 3000;

var app = connect().use(connect.static('public')).listen(port);

var chat_room = io.listen(app);

chat_room.sockets.on('connection', function(socket) {

    socket.emit('entrance', {message: 'Welcome to the chat room!'});
    // Register your client with the server, providing your username
    socket.on('init', function(username) {
        users[username] = socket.id;    // Store a reference to your socket ID
        sockets[socket.id] = { username : username, socket : socket };  // Store a reference to your socket

    });

    socket.on('chat', function(data) {

        user = data.message.user;
        message = data.message.message;

        chat_room.sockets[users[user]].emit(
            'chat', 
            { 
                message : message,
                from : sockets[socket.id].username
            }
        );
    });
}); 
```

整个错误：

```
> TypeError: Cannot call method 'emit' of undefined
>     at Socket.<anonymous> (C:\Users\Niraj\Desktop\node\private-chat\app.js:35:40)
>     at Socket.EventEmitter.emit [as $emit] (events.js:96:17)
>     at SocketNamespace.handlePacket (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\namespace.js:335:22)
>     at Manager.onClientMessage (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\manager.js:487:38)
>     at WebSocket.Transport.onMessage (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\transport.js:387:20)
>     at Parser.<anonymous> (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\transports\websocket\hybi-16.js:39:10)
>     at Parser.EventEmitter.emit (events.js:96:17)
>     at opcodeHandlers.1.finish (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\transports\websocket\hybi-16.js:288:16)
>     at Parser.opcodeHandlers.1.expectData [as expectHandler] (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\transports\websocket\hybi-16.js:299:15)
>     at Parser.add (C:\Users\Niraj\Desktop\node\private-chat\node_modules\socket.io\lib\transports\websocket\hybi-16.js:466:24) 
```

我只是nodejs的初学者，我的代码有问题吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:14:47.820

您正在尝试向身份不明的套接字发送消息。

不知道您的应用程序的其余部分，但在：

```
user = data.message.user; 
```

您不应该调用“data.message.username”而不是“data.message.user”吗？可能是不同的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T19:12:36.490

而不是发射，做一个广播：

```
socket.broadcast.emit(msg) 
```

# java - 如何捕捉“不支持的major.minor 版本”错误？

> ID：14284981
> 
> 赞同：3
> 
> 时间：2013-01-11T19:06:32.813
> 
> 标签：java, error-handling

我了解有关此类错误的问题。我希望我的程序能够检测到正在运行的 java 版本并向用户提供更优雅的消息，而不是有点神秘的“线程“main”bla bla bla' 消息中的异常。我可以检测到正在运行的 Java 版本，但我的程序似乎永远无法运行我的检查代码。

简而言之......我的程序如何捕捉到这个错误，呈现一条消息并优雅地退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:14:42.817

所以它是`java.lang.UnsupportedClassVersionError`。`Error`它是（显然是Java中的类的后代）子类，而子类`java.lang.ClassFormatError`又是子类`java.lang.LinkageError`（它是 的直接子类`java.lang.Error`））。当 JVM（Java 虚拟机）尝试读取类文件并发现特定类文件中的主要和次要版本号不受支持时，将引发此错误。当使用更高版本的 Java Compiler 生成类文件而不是用于执行该类文件的 JVM 版本时，就会发生这种情况。

这很容易理解——编译器如何在编译时获得关于将使用哪个版本的 JVM 执行编译后的类文件的信息？它不能，对吧？其他错误也是如此。这就是所有错误都未选中的原因。

为什么您甚至让用户有机会看到此错误消息！正如您所说，只有当您使用较早版本的 JVM 来执行类文件而不是用于编译源代码的相应版本的编译器时，才会发出“神秘”消息。现在，你为什么要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:14:59.917

此异常是从 抛出的`ClassLoader`，因此我建议您编写自己的版本，`ClassLoader`该版本将回溯此类错误。

**UPD：**更具体地说，您可以尝试覆盖 method `defineClass`，捕获此类异常并以方便的方式包装它。

**UPD-2：**正如我在评论中提到的那样，并且由于[**us2012**](https://stackoverflow.com/users/1865077/us2012)重新制定了我的想法（感谢他），您必须使用*保证低于用户的 VM 版本**的类加载器来编译您的类加载器`-target`*

# google-maps - 具有自动缩放和自定义标记的谷歌地图保持灰色

> ID：14284984
> 
> 赞同：1
> 
> 时间：2013-01-11T19:06:38.330
> 
> 标签：google-maps, google-maps-markers

嘿伙计们，我很难让我的谷歌地图使用自动缩放和自定义标记。在谷歌浏览器控制台中我得到

```
too much recursion
...(0,0);Ba(T[I],function(){return"("+this.x+", "+this.y+")"});T[I].b=function(a){r...
main.js (ligne 24)

too much recursion
...nged")}var Lf={};function If(a){return Lf[a]||(Lf[a]=a[Bb](0,1).toUpperCase()+a[...
main.js (ligne 25) 
```

main.js 文件由 Google 在此处托管[http://maps.gstatic.com/intl/fr_ALL/mapfiles/api-3/10/19/main.js](http://maps.gstatic.com/intl/fr_ALL/mapfiles/api-3/10/19/main.js)

我真的不明白这个问题

```
<?php
print ('
<script type="text/javascript">
    $(function(){
        var map;
        var markersArray = [];
        var image = \'img/\';
        var bounds = new google.maps.LatLngBounds();
        var loc;

        var mapOptions = { mapTypeId: google.maps.MapTypeId.ROADMAP };

        map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        ');

            $l=1; 
            foreach($carte as $value){
                if ($carte[$l][lat]&&$carte[$l][lon]){
                /*echo '
                    loc = new google.maps.LatLng("'.$carte[$l][lat].'","'.$carte[$l][lon].'");
                    bounds.extend(loc);
                    addMarker(loc, \'Event A\', "active");
                ';*/

                echo '
                    loc = new google.maps.LatLng("'.$carte[$l][lat].'","'.$carte[$l][lon].'");
                    bounds.extend(loc);
                    addMarker(loc, \''.htmlentities($carte[$l][nom], ENT_QUOTES).str_replace('<br />', '', htmlentities($carte[$l][addresse], ENT_QUOTES)).'\', "active", "'.$l.'");

                ';

                }

                $l++;
            }

        print ('

        map.fitBounds(bounds);
        map.panToBounds(bounds);    

        function addMarker(location, name, active) {          
            var marker = new google.maps.Marker({
                position: location,
                map: map,
                title: name,
                status: active
            });
        }

    });

</script>');
?> 
```

我在这里做了一个 js fiddle [http://jsfiddle.net/KwayW/48/](http://jsfiddle.net/KwayW/48/)

此时将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:31:09.333

你有两个问题：

1.  您正在将字符串传递给[google.maps.LatLng 构造函数](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

2.  该字符串表示中有一个逗号而不是小数点

`google.maps.LatLng`需要两个数字。

```
loc = new google.maps.LatLng("47,036084","-70,461227"); 
```

应该：

```
loc = new google.maps.LatLng(47.036084,-70.461227); 
```

[更新了 JSFiddle](http://jsfiddle.net/rGBzv/2/)

顺便说一句 - 你所有的标记都在同一个位置......

# php - 零数据仍然成功登录

> ID：14284986
> 
> 赞同：0
> 
> 时间：2013-01-11T19:06:44.063
> 
> 标签：php, login

不幸的是，在我的登录表单中，没有输入任何数据，仍然显示为登录成功。我是否犯了任何特定错误，还是应该添加更多代码？非常感谢您的帮助

PHP

```
<table style= width:300px; border="0"; align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form name="form1" method="post" action="checklogin.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><strong>Member Login </strong></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="text" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</td>
</form>
</tr>
</table> 
```

CSS - checklogin.php

```
<?php

$host="localhost";
$username="root";
$password="";
$db_name="Hockey Club";
$tbl_name="members";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['username'];
$mypassword=$_POST['password'];

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM members WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){

$_SESSION['username'] = $myusername];
$_SESSION['password'] = $mypassword];
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

和 - login_success.php

```
<?php
session_start();
if (!isset($_SESSION['myusername'])) {
header("location:Index.php");
}
?>

<html>
<body>
Login Successful
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:32:33.677

您永远不应将密码以其原始形式存储在数据库中。如果您是编程新手，那里有很多很棒的用户身份验证脚本。在以这种方式创建生产站点之前，请先研究它们。

这是一个开始的好地方。

[散列密码](http://crackstation.net/hashing-security.htm#phpsourcecode)

并且不要使用mysql。使用 mysqli 或 PDO

这是一个谷歌链接让你去：[用户身份验证](http://www.google.com/search?q=php%20user%20authentication&rlz=1C1CHFX_enUS487US487&aq=0&oq=php%20user%20aut&sugexp=chrome,mod=14&sourceid=chrome&ie=UTF-8)

# knockout.js - 在 Knockout JS 映射插件中更新子属性

> ID：14284993
> 
> 赞同：2
> 
> 时间：2013-01-11T19:07:19.413
> 
> 标签：knockout.js, knockout-mapping-plugin

我在使用分层视图模型的淘汰赛 js 和映射插件方面遇到问题

我的视图模型的结构有点像这样：

```
VM = {
    members:[
        {
            name:"name 1",
            volunteering:[{...},{...},{...}]
        },
        {
            name:"name 1",
            volunteering:[{...},{...},{...}]
        }
    ]
} 
```

每个成员都在一个选项卡中，每个选项卡都有一个志愿活动网格。单击网格中的项目会弹出一个对话框以编辑志愿活动。此时我克隆对象以方便“取消编辑”功能

```
var Volunteer = {};
var koContext=ko.contextFor(this);
Volunteer = ko.mapping.toJS(koContext.$data);  //plain js volunteer
Volunteer.index=koContext.$parent.EventVolunteers().indexOf(koContext.$data);  //index of volunteer in member volunteer array
ko.applyBindings(ko.mapping.fromJS(Volunteer),$("#dialog-EditVolunteer")[0]); //bind new volunteer obj to dialog 
```

到目前为止似乎没问题，单击对话框上的保存会导致问题。

```
var volunteer = ko.mapping.toJS(ko.contextFor(this).$data);
ko.mapping.fromJS(volunteer,{},ko.contextFor(currentTab).$data.EventVolunteers()[volunteer.index]); 
```

此时属性会在视图模型中更新，但不会在主屏幕的网格中更新。

**看来 ko.mapping.fromJS 正在替换 observable 而不是更新它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:38:56.670

就我个人而言，我喜欢创建这样的模型。这里的抽象更有意义。

```
function VolunteerInfo(data){
  var self = this;
  self.activitiesName = ko.observable(data.name);
  // any other info not all of it has to be mapped 
  // unless you plan on sending it back.
}
function MembersInfo(data){
  var self = this;
  self.name = ko.observable(data.name)// w.e it is labeled as under json
  self.volunteering = ko.observableArray([]);
  var mappedVolunteers = $.map(data.volunterring, function(item){
    var volunteer = new VolunteerInfo(item);
    return volunteer;
  });
  self.volunterring(mappedVolunteers);
}
function VM(){
  var self = this;
  self.members = ko.o
  var request = $.getJSON("webservice address");
  request.done(function () {
    var mappedMembers = $.map(data.volunterring, function(item){
      var member = new MemberInfo(item);
      return member;
    });
    self.members(mappedMembers);
  }
}
// apply bindings to VM ect ect. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:45:17.547

我不确定我完全理解你在做什么。

但是我试图在项目列表中执行撤消功能，我在数组上使用了它：

```
observableArray.replace(newData, ko.mapping.fromJS(original)) 
```

我将新数据作为点击处理程序的参数。

当我存储原件时，我基本上有这个：

```
 //Dupe check
        self.undoCache.Emails.pop(jQuery.grep(self.undoCache.Emails, function (element, index) { return element.Id == data.Id(); })[0]);
        //Store original
        self.undoCache.Emails.push(ko.mapping.toJS(data)); 
```

“电子邮件”是我正在编辑的对象。我只存储原始数据，而不是可观察的。这让我可以使用替换。我不确定这本身有多正确，但取消对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T13:50:29.313

在这种情况下，我的最终解决方案是在原始 VM 上设置属性，并使用“克隆”视图模型中的编辑值。

然而，对于新项目，我现在使用[淘汰赛插件](https://github.com/romanych/ko.editables)

# python - 如何找到 urllib2

> ID：14284994
> 
> 赞同：0
> 
> 时间：2013-01-11T19:07:19.340
> 
> 标签：python, python-3.x, urllib2, urllib

我是 python 新手（我正在使用 python3），我正在尝试使用 urllib2 来学习制作网络爬虫。我似乎无法在任何地方找到它。我可以导入 urllib，但 urllib2 与 urllib 不在同一目录中，当我尝试导入 urllib2 时在终端中收到错误消息。

据我了解， urllib2 应该是 pythons 标准库的一部分。我在哪里可以找到它？有没有什么地方我可以单独下载它并将其放在与 urllib 相同的目录中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:08:01.623

Python 3[重构`urllib`并`urllib2`](http://docs.python.org/2/library/urllib2.html)放入一个名为[`urllib`submodules](http://docs.python.org/3/library/urllib.html)的新包中。

使用[`urllib.request`](http://docs.python.org/3/library/urllib.request.html)and[`urllib.error`](http://docs.python.org/3/library/urllib.error.html#module-urllib.error)代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:16:22.007

urllib2 现在被称为 urllib，你可以在这里看到它[http://www.python.org/dev/peps/pep-3108/#urllib-package](http://www.python.org/dev/peps/pep-3108/#urllib-package)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:18:28.733

对于 Python 3 使用`urllib`类似

```
urllib.request
urllib.error
urllib.parse
urllib.robotparser 
```

# jquery - 专注于具有焦点事件的字段

> ID：14284996
> 
> 赞同：0
> 
> 时间：2013-01-11T19:07:37.003
> 
> 标签：jquery, jquery-ui

我已经定义了一个表单域的焦点事件来打开一个带有选项的 Jquery UI 对话框。我希望焦点应该保持在同一字段上，以实现不间断的数据输入。我的要求就像 datepicker 所示，用户看到 datepicker 覆盖但焦点停留在日期字段上，以便用户可以继续输入日期。

这是相关字段和对话框的代码。

```
$( "#pmt_code" ).focus(function(){
    $( "#pmtcodes" ).dialog( "open" );
    // Keep focus stayed on this field somehow
  });

$( "#pmtcodes" ).dialog({
    autoOpen: false,
    position: { my: "left top", at: "left bottom", of: $("#pmt_code") },
    closeOnEscape: true,
    open: function(){
      listPmtCodes();
    }        
  }); 
```

这是带有表格的对话框 Div。我正在使用 jquery 数据表插件填充此表。

```
<div id="pmtcodes" title="payment Codes">
      <table cellpadding="0" cellspacing="0" border="0" class="display" id="pmtCodesTable">
        <thead>
          <tr>
            <th>Code</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>        
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:17:39.257

您必须在 open 回调上再次将焦点设置到您的控件：

```
var $pmt_code = $("#pmt_code"),
    $pmtcodes = $("#pmtcodes");

$pmt_code.focus(function(){
    !$pmtcodes.dialog( "isOpen" ) && $pmtcodes.dialog( "open" );
});

$pmtcodes.dialog({
    autoOpen: false,
    position: { 
        my: "left top", 
        at: "left bottom", 
        of: $pmt_code 
    },
    closeOnEscape: true,
    open: function(){
        listPmtCodes();
        setTimeout(function () { // Workaround for Internet Explorer
            $pmt_code.focus(); //<---- Keep focus stayed on this field somehow
        }, 10);
    }
 }); 
```

我只是稍微更改了代码以避免在 DOM 上对每个元素进行多次搜索。

您还需要实现 keyup 事件来捕获按下的 ESC 以关闭对话框：

```
$pmt_code.keyup(function (e) {
    if (e.keyCode == 27 && $pmtcodes.dialog("isOpen")) // ESC pressed
    {
        $pmtcodes.dialog("close");
    }
}); 
```

在这里查看一个：http: [//jsfiddle.net/9KuVA/](http://jsfiddle.net/9KuVA/)

我希望这可以帮助

# jquery - 获得插件或 jquery 之类的推广？

> ID：14284998
> 
> 赞同：0
> 
> 时间：2013-01-11T19:07:43.213
> 
> 标签：jquery, wordpress

是否有任何 wordpress 插件可以像图像一样在悬停时添加具有动画效果的形状
![在此处输入图像描述](../Images/8bcebce5bd8cca3c2b2edcc2a0b668ef.png)

或者可能是 jquery 添加类似的东西也添加到我主页的右上角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:18:17.990

你去吧：[性感卷发 jQuery 插件](http://elliottkember.com/sexy_curls.html)

有趣的事实：在德语中，我们称这样的东西为“Eselsohr”（“驴耳朵”），所以我知道该用谷歌搜索什么；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:20:36.843

我不知道我是否应该粘贴整个代码，但这里有一个演示：

**[JSBIN 演示](http://jsbin.com/ovawiv/2/edit)**

你可以使用 .png 图像代替我旋转的灰色 DIV（我很懒）

并使用一个简单的脚本，如：

```
$('#ad').on('mouseenter mouseleave',function( e ){
    var paper = $('#ad-paper', this);
    var pos = e.type=='mouseenter'? 380 : 260;
  paper.stop().animate({left: -pos},300);
}); 
```

来实现动作。