# StackOverflow 问答 12729000-12729999

# jquery - jquery找出在AJAX发布中点击了哪个按钮

> ID：12729011
> 
> 赞同：3
> 
> 时间：2012-10-04T14:01:21.430
> 
> 标签：jquery, ajax, post

我有一个带有 2 个按钮的表单，确认和删除。我发布了一个隐藏的输入元素 ID。单击确认后，将使用元素 ID 执行操作。如果单击删除，则会删除 DB 中具有元素 ID 的条目。现在，问题是当我执行 a 时`print_r($_POST); exit();`，它会正确地给我输入元素 ID。但它并没有告诉我点击了哪个按钮。有没有办法找出在单个表单中准确单击了哪个按钮？两个按钮需要以相同的形式存在。

这是我尝试过的代码：

**jQuery**

```
 var dataString = $('#form_confirm_delete').serialize();

    $.ajax({

              type: "POST",
              url: "ajaxpage.php",
              data: dataString,
              dataType: 'json',
              cache: false,       
              success: (function(response) 
                {
                    alert('Yes');
                })

         }); 
```

**PHP页面（ajaxpage.php）：**

```
<?php print_r($_POST); exit(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:17:42.007

您可以为单击的按钮隐藏输入

当您的两个按钮之一被点击时

获取单击按钮的值，例如删除

```
<button id="deleteButton" value="delete">Delete</button> 
```

并将单击按钮的值存储在变量中，例如

```
$("#deleteButton").click(function(){
  var thebuttonclicked =$(this).attr("value"); 
```

然后设置隐藏字段的值

```
$('input[name=theclicked]').val(thebuttonclicked); 
```

提交后，您可以获得名称为theclicked的帖子。我认为这种方法更好，即使[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)提交了点击的按钮，jquery serialize 不包括点击的按钮。对于有关序列化的更多信息，您可以参考[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:04:34.820

你可以使用这样的东西

```
url: "ajaxpage.php?button="+id,

$("#BUTTON1").click(function(){
var url="ajaxpage.php?button="+this.id,
"
}) 
```

在服务器端你可以得到那个变量

或者你可以使用 post 变量

```
var id=this.id;
$.ajax({

              type: "POST",
              url: "ajaxpage.php",
              data:{"dataString": dataString,"id":id},
              dataType: 'json',
              cache: false,       
              success: (function(response) 
                {
                    alert('Yes');
                })
           // you can use this variable id server-side     
         }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T14:05:48.590

您可以收听两个按钮的操作：

```
$( '#delete_button' ).click(function(){
     submitForm( 'delete' );
}); 

$( '#submit_button' ).click(function(){
     submitForm( 'submit' );
}); 
```

然后在一个函数中传递你的参数：

```
function submitForm( type ){

    var dataString = $('#form_confirm_delete').serialize();
    dataString += "&type=" + type; 
    $.ajax({

          type: "POST",
          url: "ajaxpage.php",
          data: dataString,
          dataType: 'json',
          cache: false,       
          success: (function(response) 
            {
                alert('Yes');
            })

     });
} 
```

# sql-server - SQL Server 优化大型更改表

> ID：12729013
> 
> 赞同：0
> 
> 时间：2012-10-04T14:01:27.433
> 
> 标签：sql-server, optimization

我有报告为我的数据库中的每个用户执行一些耗时的数据计算，结果是为每个用户计算 10 到 20 条新记录。为了提高报告响应能力，创建了一个夜间作业来运行计算并将结果转储到数据库中的快照表中。它只为活跃用户运行。

因此，对于 50k 用户，其中 30k 处于活动状态，该作业将大型快照表中的 300k 记录“更新”到 600k 条记录。它当前使用的方法是删除给定用户的所有先前记录，然后插入新集合。表上没有PK，只用一个业务key对数据集进行分组。

所以我的问题是，当每晚删除和添加多达 60 万条记录时，是否有技术来优化表来处理这个问题？例如，由于可以按需重新创建数据，有没有办法在进行这些更改时禁用表的日志记录？

**更新：**

一个问题是我不能批量执行此操作，因为脚本的工作方式是一次检查一个用户，因此它会查看一个用户，删除之前的 10-20 条记录，并插入一组新的 10-20 条记录。它一遍又一遍地这样做。我担心事务日志会用完空间或可能出现其他性能问题。我想将表配置为现在担心数据保存或其他可能减慢它的项目。我不能删除索引和所有这些，因为人们正在同时访问该表以对其进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:13:42.360

还值得注意的是，索引可能会*加速*这种批量更新而不是减慢它，因为`UPDATE`和`DELETE`语句仍然需要能够首先定位受影响的行，并且如果没有适当的索引，它将求助于表扫描。

我至少会考虑在标识用户的列上使用非聚集索引，并且（假设您使用的是 2008）考虑该[`MERGE`](http://www.mssqltips.com/sqlservertip/1704/using-merge-in-sql-server-to-insert-update-and-delete-at-the-same-time/ "在 SQL Server 中使用 MERGE...")语句，这绝对可以避免当前使用的质量`DELETE`/`INSERT`方法的缺点.

根据[数据加载性能指南](http://msdn.microsoft.com/en-us/library/dd425070%28v=sql.100%29.aspx)(MSDN)，`MERGE`使用跟踪标志对插入进行最低限度的记录。

在知道您使用的是哪个版本的 SQL Server 之前，我不会多说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:17:52.760

这称为批量插入，您必须删除目标表中的所有索引并以大包（数百个插入语句）发送插入命令`;`

另一种方法是使用 BULK INSERT 语句[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)
但它涉及将数据转储到文件。

另请参阅：[批量插入 Sql Server 数百万条记录](https://stackoverflow.com/questions/10731179/bulk-insert-sql-server-millions-of-record)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:36:33.417

这真的取决于很多事情

*   你机器的速度
*   正在处理的记录的大小
*   网速

等等

通常，将记录添加到“堆”或未索引的表会更快。因此，删除所有索引并在加载后重新创建它们可能会提高您的性能。

如果您按活动用户和非活动用户进行分区，则对表进行分区可能会带来性能优势（尽管为此数据集可能有点小）

确保您测试每次调整增加或减少您的负载并从那里开始工作的时间。

# php - phpmyadmin .ini 文件，最大化执行 php 脚本时间

> ID：12729015
> 
> 赞同：0
> 
> 时间：2012-10-04T14:01:29.893
> 
> 标签：php, configuration, ini

是否可以更改 .ini php 文件以最大化 php 脚本的执行时间？

我是 hostgator 经销商包的所有者和 inmotionhosting 的 vps。没有任何属性或选项可以通过 cpanel 或 whm 更改它。

所以我问是否有任何其他方法，比如手动创建这个文件，通过 ftp 将它放置到服务器并重新启动 php my admin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:05:46.770

如果您有权访问保存 php.ini 的 php 文件夹，那么您可以对其进行编辑。

您要查找的属性称为`max_execution_time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:05:59.783

是的，您可以编辑通常位于的 php.ini，`/usr/local/lib/php.ini`然后重新启动 httpd，这将更新它。您通常无法通过**FTP**访问 php.ini，因此您需要使用**SSH**来执行此操作，或者通过容器软件上的文件管理器找到 php.ini。

或者，您可以在每个脚本的基础上设置执行限制

[设置时间限制（）](http://php.net/manual/en/function.set-time-limit.php)

此外，您可以使用

[ini_set()](http://php.net/manual/en/function.ini-set.php)

在运行时更改任何 php 配置变量的值。试试`ini_set('max_execution_time')`。您的主机可能已禁用某些配置，因此这不适用于所有服务器。

# jquery - 使用 MVC 和 jQuery 的圆角标签角

> ID：12729019
> 
> 赞同：0
> 
> 时间：2012-10-04T14:01:39.383
> 
> 标签：jquery, asp.net-mvc

在[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)中的 jQuery 选项卡示例中，IE7 中的选项卡角不圆角。我们如何让它们在 IE7 中四舍五入？从哪里可以获得这些示例的完整代码？显然，实际使用的 css 文件丢失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:03:41.897

您必须在 IE7 中使用 javascript hack，因为它不支持`border-radius`CSS。

有关一些选项，请参阅[在 IE7 / IE8 中创建圆角。](https://stackoverflow.com/questions/6941158/creating-rounded-corners-in-ie7-ie8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:06:58.453

简短的回答：你不能。IE7（和 8）不支持你想要做的事情。[http://caniuse.com/#feat=border-radius](http://caniuse.com/#feat=border-radius)

稍长的答案：您可能可以伪造它：[http ://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)

# php - PHP - 除非指定 else，否则跳过 if 条件语句

> ID：12729020
> 
> 赞同：0
> 
> 时间：2012-10-04T14:01:49.003
> 
> 标签：php, conditional

我创建了一个非常简单的登录页面，在提交表单后我在 PHP 上验证用户名和密码。

我验证的第一步是检查用户名和密码是否为空，如果为空，我将用户发送回登录页面：

```
$e = $_POST['email'];
$p = $_POST['password'];

if($e == '' || $p == ''  || is_null($e) || is_null($p)){
    header('Location: login.php?e=missing');
} 
```

事实证明`if`，检查用户名和密码是否为空的语句仅在我添加`else`语句时才有效：

```
$e = $_POST['email'];
$p = $_POST['password'];

if($e == '' || $p == ''  || is_null($e) || is_null($p)){
    header('Location: login.php?e=missing');
}else{

    //more validation
} 
```

老实说，我的代码有效，我添加了`else`问题并解决了，但是为什么？？？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:03:02.863

```
$e = $_POST['email'];
$p = $_POST['password'];

if(trim($e) == '' || trim($p) == ''){
    header('Location: login.php?e=missing');
    exit(); // add this else it wont leave the page!
}else{

    //more validation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:02:59.953

```
if($e == '' || $p == ''){
    header('Location: login.php?e=missing');
} 
```

您需要`exit()`在标题行之后添加一个；否则，处理将照常继续，所有其余代码都将运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:10:20.823

您需要使用`empty`来检查变量是否已设置以及是否为空。

```
 $e = $_POST['email'];
 $p = $_POST['password'];

 if( empty($e) || empty($p) )     {
   header('Location: login.php?e=missing');  
   exit;  
}
else {
//more validation
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:06:09.137

```
$e = $_POST['email'];
$p = $_POST['password'];

if(!empty($e) && !empty($p))
{
    header('Location: login.php?e=missing');
    exit();
}
else
{
    //more validation
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T14:09:18.897

```
 if($e == '' || $p == ''){
        header('Location: login.php?e=missing');
    } 
```

然后使用：

```
if(!isset($e) || !isset($p)){
    header('Location: login.php?e=missing');
    exit();
} 
```

**这是因为空白而发生的，或者您可以使用 trim() 函数删除空白并使用 exit(); 在标题之后是强制性的***

# ssis - SSIS 传输 SQL Server 对象任务在传输的数据中丢失重音符号

> ID：12729024
> 
> 赞同：4
> 
> 时间：2012-10-04T14:02:21.723
> 
> 标签：ssis, codepages

我有一个带有传输 SQL Server 对象任务步骤的 SSIS 包，该步骤将表（架构和数据）从一个数据库传输到另一个数据库。源数据库和目标数据库具有不同的排序规则。（不知道是不是相关信息。）

在某些测试环境中，某些字符（匈牙利语重音字符：ő,ű）在传输过程中会转换为非重音字符 (o,u)。在其他测试环境中，一切都很好（匈牙利重音字符被很好地转移）。源表列是非 unicode (varchar)，我们无法更改它，因为它是一个遗留系统。

实验表明，此行为取决于 Windows 区域设置（控制面板/区域和语言/管理/“非 Unicode 程序的语言”）。如果设置为匈牙利语，那么一切都很好，但如果设置为英语，那么匈牙利口音就会丢失。

问题是我无法强制执行特定的 Windows 语言环境设置，因此我正在寻找一种不依赖于 Windows 语言环境的方法来使其正确。

有没有办法告诉 SSIS 在传输中使用匈牙利代码页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:10:26.513

在 Transer SQL Objects 任务的对象页面中，有一个名为 UseCollat​​ion 的选项。如果您选择此选项，那么它应该使用酸数据的整理。

# php - 图表：具有非同步时间戳的数据集，如何重新计算以同步？

> ID：12729028
> 
> 赞同：0
> 
> 时间：2012-10-04T14:02:57.263
> 
> 标签：php, math, charts, dataset, highstock

我有任意数量的数据集，由时间戳（x 轴）和值（y 轴）组成。

我需要在同一个图表上显示所有数据集。

**问题是：** 所有数据集中的时间戳都在相同的范围内，但不同步，也不定期。

我需要找到一种算法，允许我重新计算每个数据集以具有固定间隔，所有数据集都在同一个时间戳上同步。

这涉及数据分组，但尽管进行了数小时的研究和试验，我还是找不到办法做到这一点。

你知道可以做到这一点的算法，或者指出我正确的方向吗？

数据集示例：

```
$datasets = array("Obama"=>array(array(1349302804000,-0.01816786389414),array(1349301604000,0.012345040580335),array(1349300404000,-0.033756646856428),array(1349299204000,-0.006286872863163),array(1349297952000,-0.0074601175482789),array(1349296805000,-0.010973443467448),array(1349295604000,-0.005568970434452),array(1349294404000,-0.0012120259794678),array(1349293204000,0.015711233554481),array(1349292004000,0.016875),array(1349290804000,0.022688596491228),array(1349289604000,0.019734841788934),array(1349288404000,0.00093237032173337),array(1349287203000,0.047540149892934),array(1349286003000,0.050829994275902),array(1349284804000,0.050869565217392),array(1349283603000,0.044487102579484),array(1349282404000,0.017858701582106),array(1349281204000,0.0087304224015187),array(1349280003000,0.028488752556237),array(1349278804000,0.024093464511595),array(1349277604000,0.048635340039033),array(1349276404000,0.04042026755061),array(1349275204000,0.0068150826446279),array(1349274004000,-0.0047961420429636),array(1349272805000,-0.010688066893424),array(1349271604000,-0.035958462777586),array(1349270404000,-0.0056705108654213),array(1349269205000,-0.0022607126428647),array(1349268005000,-0.014915393322015),array(1349266805000,-0.0053641177194927),array(1349265606000,-0.014968247147018),array(1349264405000,-0.020219280396427),array(1349263205000,-0.04449370409234),array(1349262006000,-0.027506361323155),array(1349260806000,-0.038331137978078),array(1349259607000,-0.072457013890502),array(1349258405000,-0.049677654675601),array(1349257205000,-0.063347322517114),array(1349256006000,0.077658552832438),array(1349254804000,0.077278732644198),array(1349253604000,0.059828414180112),array(1349252405000,0.040018753516285),array(1349251204000,0.047372475045194),array(1349250004000,0.091023835864428),array(1349248804000,0.060634174421952),array(1349247603000,0.1024280240832),array(1349246404000,0.086939465674671),array(1349245204000,0.055583928780602),array(1349244004000,0.10744203165256)),"Romney"=>array(array(1349302803000,0.081436305930674),array(1349301602000,0.094257877535919),array(1349300403000,0.076450368766494),array(1349299203000,0.074385681801511),array(1349297951000,0.084889532226116),array(1349296803000,0.073218018309974),array(1349295602000,0.071383950822397),array(1349294403000,0.079591779279279),array(1349293203000,0.10141599920894),array(1349292003000,0.084515383807623),array(1349290802000,0.093798124383021),array(1349289603000,0.08621332562509),array(1349288403000,0.0746714922049),array(1349287202000,0.089265161575918),array(1349286002000,0.098435714285715),array(1349284803000,0.10246532759445),array(1349283602000,0.043511846001974),array(1349282403000,0.099958158995816),array(1349281203000,0.037493219682294),array(1349280002000,0.064469820554649),array(1349278803000,0.03996714755035),array(1349277602000,0.063711977186311),array(1349276403000,0.044796065953139),array(1349275203000,0.032955928901875),array(1349274003000,0.012628563344416),array(1349272803000,0.011735430052982),array(1349271602000,0.046707778556412),array(1349270403000,0.051073749433278),array(1349269203000,0.064878575931317),array(1349268003000,0.07278246496941),array(1349266803000,0.063141113073809),array(1349265604000,0.10484914372815),array(1349264403000,0.10646994729937),array(1349263203000,0.066190820620726),array(1349262003000,0.052965085522837),array(1349260804000,0.0057958228303921),array(1349259604000,-0.047100507799987),array(1349258403000,-0.11577136713851),array(1349257203000,-0.095616277524257),array(1349256004000,-0.039400427733014),array(1349254802000,0.056399485640806),array(1349253602000,0.064254375154056),array(1349252403000,0.058393178383823),array(1349251202000,0.11691703201258),array(1349250003000,0.079696498054474),array(1349248803000,0.00089036795177686),array(1349247602000,0.060458641560188),array(1349246403000,0.0051984375000001),array(1349245203000,0.017228566558718),array(1349244003000,0.031592306166964)),"volumes"=>array(array(1349302803000,24819),array(1349301602000,25088),array(1349300403000,23376),array(1349299203000,21656),array(1349297951000,21527),array(1349296803000,19906),array(1349295602000,18381),array(1349294403000,16922),array(1349293203000,16153),array(1349292003000,14900),array(1349290802000,12714),array(1349289603000,10908),array(1349288403000,8741),array(1349287202000,7378),array(1349286002000,7080),array(1349284803000,6710),array(1349283602000,6612),array(1349282403000,7677),array(1349281203000,8285),array(1349280002000,10262),array(1349278803000,11634),array(1349277602000,13571),array(1349276403000,16190),array(1349275203000,19376),array(1349274003000,22452),array(1349272803000,28221),array(1349271602000,33545),array(1349270403000,40681),array(1349269203000,51071),array(1349268003000,61082),array(1349266803000,65550),array(1349265604000,65947),array(1349264403000,65950),array(1349263203000,65950),array(1349262003000,65923),array(1349260804000,65948),array(1349259604000,65950),array(1349258403000,65953),array(1349257203000,65928),array(1349256004000,65115),array(1349254802000,35906),array(1349253602000,27129),array(1349252403000,23694),array(1349251202000,20419),array(1349250003000,13987),array(1349248803000,13272),array(1349247602000,12476),array(1349246403000,11415),array(1349245203000,10867),array(1349244003000,9784))); 
```

谢谢。

**PS：**显示数据不是问题，我也不能随意更改图表库（使用 Highstocks）。我的问题只是重新计算数据集。

# java - ui:include 依赖于 viewParam

> ID：12729035
> 
> 赞同：4
> 
> 时间：2012-10-04T14:03:27.543
> 
> 标签：java, jsf, jsf-2, viewparams

我有一个页面，我想根据视图参数给出的值包含页面的一部分（在本例中为页脚）。

我`ViewScoped`在 preRenderView 上初始化了我的支持 bean

```
<f:metadata>
    <f:viewParam name="racecode" value="#{displayResults.racecode}" />
    <f:event type="preRenderView" listener="#{displayResults.init}" />  
</f:metadata> 
```

这会查询数据库以获取要包含的页脚的名称。然后，以这种方式使用它：

```
<h:panelGroup id="customFooter" display="block">
    <ui:include src="#{displayResults.customFooter}" />
</h:panelGroup> 
```

这总是给我一个缺失的页面。但是，如果我手动输入页面名称，它就可以工作。如果我`ui:include`用`h:outputText`.

我知道这与 JSF 的阶段有关，并且在`ui:include`完成时，该值尚未设置。（阅读和更好地理解这些阶段是我的 TODO 列表中的内容）。

问题仍然存在。我怎样才能完成这样的事情。让 bean 使用 viewParam，查询数据库并在 a 中使用该值`ui:include`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:26:15.320

@wemu 已经解释了原因。在调用方法`<ui:include src>`之前对其进行评估。`init()`然而，他提出的`<f:phaseListener>`解决方案很笨拙。

只需在bean上使用`@ManagedProperty`/即可。`@PostConstruct``@RequestScoped`

```
@ManagedProperty("#{param.racecode}")
private String racecode;

@PostConstruct
public void init() {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:09:27.493

PreRenderView 侦听器在 RenderResponsePhase 中调用，在渲染组件之前，但在调用 TagHandlers 之后。这意味着 TagHandlers 不会看到在 PreRenderView 事件中初始化的数据。

如果您使用 a`<ui:include value="#{myBean.myViewId}" />`动态切换包含，则不能使用 PreRenderView 事件侦听器来设置`myViewId`.`myBean`

如果您需要这样做，请使用`<f:phaseListener>`.

# asp.net - MVC3 AsyncController - 我们可以向客户端发送心跳数据吗？

> ID：12729038
> 
> 赞同：0
> 
> 时间：2012-10-04T14:03:31.373
> 
> 标签：asp.net, asp.net-mvc-3, asynchronous, azure, azure-web-roles

为了克服 Azure 负载均衡器上（明显的）4 分钟空闲连接超时，似乎有必要不时地通过管道向客户端发送一些数据，以防止连接被视为空闲。

我们的控制器设置为 AsyncController，它会在其他对象上触发几种不同的异步方法，所有这些方法都设置为使用 IO 完成端口。因此，我们立即从我们的方法返回，当完成数据包被处理时，IIS 会重新连接到原始请求，以便我们可以呈现我们的视图。

在这种情况下，有没有办法定期发送几个字节？在“经典”情况下，我们可以执行该方法，然后在等待时旋转，每隔几秒发送一次数据，直到异步方法完成。但是，在这种情况下，IIS 线程被释放以去做其他事情，我们在完成回调中重新连接到它。该怎么办？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:37:19.810

虽然您的特定情况涉及 Windows Azure 特定（LB 的 4 分钟超时），但问题是纯粹的 IIS / ASP.NET 工作方式。无论如何，我认为在 AsyncController/AsyncPage 中不可能向客户端发送“ping-backs”。这就是 AsyncPages/Controllers 的全部思想。IIS 将套接字放在一边，让线程为其他请求提供服务。并且仅当您使用 AsyncManager.OutstandingOperations.Decrement() 将OutstandingOperations 归零时才返回；只有这样，控制权才会被交还给客户端以发送最终响应。一旦您成为发送响应的重点，就没有回头路了。

我宁愿争论为什么有人会等待 4 分钟才能得到响应的架构方法（即使有一个很好的动画“请稍候”）？这段时间可能会发生很多事情。从浏览器崩溃、互联网中断到客户端完全断电/中断。如果你在做真正的 Azure，为什么不通过队列（Azure 存储队列或服务总线队列）为 Worker 角色发送任务。对于这么长时间运行的任务，您面前的另一个选择是使用 SingalR 和完全 AJAXed 解决方案。您通过 SignalR 传达长期运行操作的状态的位置。

**更新 1 由于评论**

除了@knightpfhor 建议的方法之外，这也可以通过队列来实现。请求者创建一个具有唯一 ID 的任务并将其发送到“任务提交队列”。然后“侦听”（或定期/不定期轮询）“任务完成”队列以获取具有给定任务 ID 的消息。

无论如何，我看不到在整个长时间运行的任务期间保持客户端连接的理由。有许多方法可以解耦这种通信。

# c#-4.0 - 将 ExpandoObject 转换为匿名类型

> ID：12729040
> 
> 赞同：3
> 
> 时间：2012-10-04T14:03:38.050
> 
> 标签：c#-4.0, asp.net-mvc-4, expandoobject

是否可以转换`ExpandoObject`为匿名类型的对象？

目前我有`HtmlHelper`可以将 HTML 属性作为参数的扩展。问题是我的扩展还需要添加一些 HTML 属性，所以我使用 ExpandoObject 合并我的属性和用户使用 htmlAttributes 参数传递给函数的属性。现在我需要将合并的 HTML 属性传递给原始 HtmlHelper 函数，当我发送 ExpandoObject 时，什么也没有发生。所以我想我需要将 ExpandoObject 转换为匿名类型的对象或类似的东西 - 欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:05:27.857

> 是否可以将 ExpandoObject 转换为匿名类型的对象？

仅当您在执行时自己生成匿名类型时。

匿名类型通常由编译器在编译时创建，并像任何其他类型一样烘焙到您的程序集中。它们在任何意义上都不是动态的。所以，你必须使用 CodeDOM 或类似的东西来生成用于匿名类型的相同类型的代码......这不会很有趣。

我认为其他人更有可能创建了一些了解`ExpandoObject`（或只能使用`IDictionary<string, object>`）的 MVC 助手类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T14:12:48.233

我不认为你需要处理 expandos 来实现你的目标：

```
public static class HtmlExtensions
{
    public static IHtmlString MyHelper(this HtmlHelper htmlHelper, object htmlAttributes)
    {
        var builder = new TagBuilder("div");

        // define the custom attributes. Of course this dictionary
        // could be dynamically built at runtime instead of statically
        // initialized as in my example:
        builder.MergeAttribute("data-myattribute1", "value1");
        builder.MergeAttribute("data-myattribute2", "value2");

        // now merge them with the user attributes 
        // (pass "true" if you want to overwrite existing attributes):
        builder.MergeAttributes(new RouteValueDictionary(htmlAttributes), false);

        builder.SetInnerText("hello world");

        return new HtmlString(builder.ToString());
    }
} 
```

如果你想调用一些现有的助手，那么一个简单的 foreach 循环就可以完成这项工作：

```
public static class HtmlExtensions
{
    public static IHtmlString MyHelper(this HtmlHelper htmlHelper, object htmlAttributes)
    {
        // define the custom attributes. Of course this dictionary
        // could be dynamically built at runtime instead of statically
        // initialized as in my example:
        var myAttributes = new Dictionary<string, object>
        {
            { "data-myattribute1", "value1" },
            { "data-myattribute2", "value2" }
        };

        var attributes = new RouteValueDictionary(htmlAttributes);
        // now merge them with the user attributes
        foreach (var item in attributes)
        {
            // remove this test if you want to overwrite existing keys
            if (!myAttributes.ContainsKey(item.Key))
            {
                myAttributes[item.Key] = item.Value;
            }
        }
        return htmlHelper.ActionLink("click me", "someaction", null, myAttributes);
    }
} 
```

# ruby-on-rails - 在 Rails 3 上设置文件下载权限的最佳方法

> ID：12729046
> 
> 赞同：4
> 
> 时间：2012-10-04T14:03:56.350
> 
> 标签：ruby-on-rails, security, file, download

我想保护我网站上的一些文件，但我也想授予某些用户下载这些文件的权限。最好的方法是什么？

我只有一个想法 - 生成临时随机 URL 之类的`/files/hdad8fda299asnfqe/foo.bar`

但我几乎不希望其他用户不能使用其他 URL。

您知道任何可以帮助我或建议另一种保护文件的方法的宝石吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:19:40.263

确保真正下载的唯一方法是将它们移到“公共”路径之外，并通过检查授权的控制器将它们提供给用户。最有效的方法（据我所知）是使用 xsendfile。

例如，首先你在你的应用程序中创建一个新目录，比如说“downloads”（当然你可以给它起任何名字，你可以把它放在你的 Rails 服务器可以访问的系统中的任何地方。）

```
mkdir downloads 
```

现在为下载创建一个不错的新路径：

```
match '/downloads/*filename' => 'downloads#download' 
```

然后创建一个新控制器（或只是现有控制器中的一个动作）

```
class DownloadsController
  def download
    filename = [params[:filename], params[:format]].join('.')
    path = Rails.root.join( 'downloads', filename )

    if File.exists?(path) && user.can_download?( filename )
      send_file( path, x_sendfile: true )
    else
      raise ActionController::RoutingError, "resource not found"
    end
  end
end 
```

然后你可以导航到

```
/downloads/path/my_file.txt 
```

让用户#can_download？处理权限检查..

如果文件属于一个对象而不是文件系统中的松散文件，则有点不同，您必须询问 id 而不是文件名并确定关联模型的路径，但原理是相同的。

# android - 适用于 iOS/Android/Windows 8 的混合应用程序

> ID：12729047
> 
> 赞同：1
> 
> 时间：2012-10-04T14:03:57.457
> 
> 标签：android, ios, windows-8, cross-platform

我希望这个问题足够具体。我有一个客户，我为他制作了一个 iOS 原生应用程序和一个 Android 原生应用程序（相同的应用程序，不同的平台）。这是一个固定像素设计（我以某种方式为 Android 做了这个工作：），它适用于 iPad、iPhone 和大多数 Android 设备（带有一些信箱）。现在我被要求为 Windows 商店编写相同的应用程序，他们希望我使用 HTML 和 JavaScript。我的问题是，当我使用 HTML 和 JavaScript 时，将这段代码用于某种混合解决方案（PhoneGap 等）对我来说是否“容易”？该应用程序不需要太多复杂的功能，但需要支持 iOS 上的推送通知，并且需要能够播放视频，最好是 HLS。关于最佳混合解决方案和混合解决方案允许您为 Windows 8 构建的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:27:58.710

我是一名跨平台开发人员，致力于 PhoneGap 和 Titanium Appcelerator。正确答案是“视情况而定”。目前跨平台开发的状态不是很推荐。是的，您可以为 PhoneGap 编写插件，它确实支持 windows phone，但是您将很难让它们正确地相互通信。我从经验中学到了这一点。

如果这是一个黑客/爱好项目来进一步推动事业，那么我会说去吧，但对于像你这样的有时间限制的客户端项目，我会建议不要使用跨平台解决方案，而是使用原生解决方案。加上原生总是提供更好的控制、速度和易于开发。无论如何，您可能会在本机中比跨平台更快地开发它。我玩过windows SDK，它看起来很容易使用，并且有很好的文档，你可以使用类似于Java的C#，因为你已经在android上使用过它。

您还可以使用原生的 html 和 javascript 构建 windows 8 桌面应用程序，但这在 windows phone 8 中尚不存在。

正如我所提到的，如果您不需要太多的原生控件，那么您可以跨平台。根据您的要求，可以做到。如果你已经开发了android和ios应用程序，现在只需要windows应用程序，那么原生会更容易。但是，如果您必须全部完成 3 个，那么如果您的要求仅限于您提到的内容，那么您可以跨平台。这是一个很好的quora线程，讨论了优点和缺点：

[http://www.quora.com/Is-Titanium-good-for-developing-iPhone-apps](http://www.quora.com/Is-Titanium-good-for-developing-iPhone-apps)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:02:13.100

看看[Xamarin](http://xamarin.com)

主要思想 - 他们为所有平台带来了真正的本机代码。他们有编译可在所有平台上使用的 C# 代码的工具 例如，您应该在 XCode（iPhone 版）中创建 UI 并使用 ModoDevelop 创建 DAL/BLL，然后您可以在所有其他平台上重用 C# 代码库

[他们在GitHub 上](https://github.com/xamarin)有跨平台的 iPhone/Android/WP7/W8 示例

另请参阅 Stackoverflow 上[标记为 Xamaring的问答](https://stackoverflow.com/questions/tagged/xamarin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:25:09.687

我们开始在 IOS 和 Android 原生平台上为多个客户端构建多个应用程序。问题是我们要完全原生，这需要太多时间。

我想看看链接方法（[http://arstechnica.com/information-technology/2012/10/a-behind-the-scenes-look-at-linkedins-mobile-engineering/](http://arstechnica.com/information-technology/2012/10/a-behind-the-scenes-look-at-linkedins-mobile-engineering/)）这是一个更多使用 HTML 和本机代码的混合方法。

问题是我不认为Phonegap 有那么好- 有利于原型设计，但可能不适用于完整版本的应用程序，因为它可能有点慢而且有点bug。

我想研究做一个模型，我们创建 65% 的 HTML 和 35% 的设备原生（如链接）

有人对此有什么建议吗？人们会说我们需要一个庞大的开发团队来实现这种方法吗？

我欢迎想法:)

谢谢

# sas - 如何获取数据步查询的时序信息

> ID：12729050
> 
> 赞同：5
> 
> 时间：2012-10-04T14:04:09.307
> 
> 标签：sas

我只是想知道在 proc sql 中我们定义了 stimer 选项。该`PROC SQL`选项`STIMER | NOSTIMER`指定是否`PROC SQL`将每个语句的计时信息写入 SAS 日志，而不是写入整个过程的累积值。`NOSTIMER`是默认值。

现在以同样的方式如何在数据集步骤中指定时间信息。我没有使用 proc sql 步骤

```
data h;
select name,empid
from employeemaster;
quit; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:16:46.110

单独的 PROC SQL 步骤实际上是独立的数据步骤，因此从某种意义上说，您总是从 SAS 获得相同的信息。您要问的是如何有效地找出“选择名称”与“empid”相比需要多长时间。

没有直接的方法来获取数据步骤中单个语句的时间，但您可以编写数据步骤代码来找出答案。问题是数据步骤是按行执行的，所以它与 PROC SQL STIMER 细节确实有很大不同；几乎你在数据步骤中所做的任何事情都不会花费很长时间，除非你正在做一些更复杂的事情，比如哈希表查找。需要很长时间的是先写出数据，然后再读入数据。

如果您担心的话，您确实有一些解决长数据步骤的选项。OPTIONS MSGLEVEL=我将为您提供有关索引使用、合并详细信息等的信息，如果您不确定为什么执行某些操作需要很长时间，这将很有帮助（请参阅[http://goo.gl/bpGWL](http://goo.gl/bpGWL)在 SAS 文档中了解更多信息）。您可以编写自己的时间戳：

```
data test;
set sashelp.class sashelp.class;
_t=time();
put _t=;
run; 
```

奇怪的是，它不会向您展示太多用途，因为大多数数据步骤迭代不会花费很长时间，但如果您正在做一些花哨的事情，它可能会有所帮助。您还可以使用条件语句仅以特定间隔打印时间 - 例如在 FIRST.ID 时，例如在按 ID 工作的进程中；。

最终，尽管您已经从笔记中获得的信息是最有用的。在 PROC SQL 中，您需要 STIMER 信息，因为 SQL 一次做几件事，而 SAS 让/让您逐步完成所有事情。例子：

```
PROC SQL;
create table X as select * from A,B where A.ID=B.ID;
quit; 
```

是一步 - 但在 SAS 中，这将是：

```
proc sort data=a; by ID; run;
proc sort data=b; by ID; run;
data x; 
merge a(in=a) b(in=b);
by id;
if a and b;
run; 
```

为此，您将获得有关 SAS 中每个步骤（两个排序和合并）的持续时间的信息，这类似于 STIMER 告诉您的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T15:13:24.183

没门。 `PROC SQL STIMER`记录每个单独可执行的 SQL 语句/查询的时间。如您所知，在数据步骤中，数据步骤循环发生，观察每次观察，因此数据步骤语句时间类似于每次观察，假设是事务性的。无论如何，这不会描述花费时间的所有细节 - 等待磁盘读取，写入等。所以我想这不会很有用。通常，SAS 性能受 I/O 驱动。

# javascript - 使用 javascript 动态显示来自 XML 的图像

> ID：12729056
> 
> 赞同：0
> 
> 时间：2012-10-04T14:04:33.340
> 
> 标签：javascript, xml, html

我对 HTML 很陌生。我正在尝试加载包含图像名称的 XML 并将其动态显示在 div 中。我可以看到图像名称，但无法分配 img 来源。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
if (window.XMLHttpRequest) {xmlhttp=new XMLHttpRequest();}
else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

xmlhttp.open("GET","resimler.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
x=xmlDoc.getElementsByTagName("pic");
i=0;

function displayFoto(){
ad=(x[i].getElementsByTagName("ad")[0].childNodes[0].nodeValue);
document.getElementById("showFoto").innerHTML="img/" + ad;}

function next(){
if (i<x.length-1){
  i++;
  displayFoto();}}

function previous(){
if (i>0){
  i--;
  displayFoto();}}
</script>
</head>
<body onload="displayFoto()">
<div id='showFoto'><img id='showFoto'></img></div><br>
    <input type="button" onclick="previous()" value="<<" />
    <input type="button" onclick="next()" value=">>" />
</body>
</html> 
```

谁能指导我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:36:20.373

```
document.getElementById("showFoto").src="img/" + ad; 
```

这将帮助您加载图像，但我不保证其余代码。您最好寻找 Loader 框架和 jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:32:21.867

我同意 Kemal 的观点，只需给出你的 xml 片段，而且 div 和 img 标签的 id 是相同的，是你不知道还是故意的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T11:56:43.103

```
 <script type="text/javascript">

        function loadXMLDoc()
        {
            if (window.XMLHttpRequest)
            {
                xmlhttp = new XMLHttpRequest();
            }
            else
            {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function ()
            {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                {
                    xmlDoc = xmlhttp.responseXML;
                    var Image = "";
                    x = xmlDoc.getElementsByTagName("IMAGE");

                    for (i = 0; i < x.length; i++)
                    {
                        Image = Image + x[i].childNodes[0].nodeValue + " ";
                        var res = Image.split(" ");

                        var ii = res[i];
                        var img = document.createElement("img");
                        img.src = ii;
                        img.width = 150;
                        img.height = 100;

                        document.body.appendChild(img);
                    }

                }
            }
            xmlhttp.open("GET", "ll.xml", true);
            xmlhttp.send();
        }
    </script>

</head>
<body onload="loadXMLDoc()">

</body> 
```

# asp.net-mvc-3 - 如何从点击布局页面链接异步加载内容页面

> ID：12729059
> 
> 赞同：1
> 
> 时间：2012-10-04T14:04:34.400
> 
> 标签：asp.net-mvc-3, jquery

我正在研究 Asp.net mvc。我有一个包含左窗格和中心窗格（内容窗格）的旧版布局页面，即我的左窗格包含一些选项卡，如主页、事件等。当用户单击任何选项卡时，将执行相应的操作并加载页面。但我想异步加载内容窗格，即不加载整个页面，即布局和内容页面我只想加载内容页面。为此，我使用了 jquery ajax 调用和 RenderPartial 视图机制，例如，

```
$('#lnkHome').click(function () {
                $.ajax({
                    url: '/Home/Home',
                    type: 'POST',
                    cache: false,
                    success: function (data) {
                        $('div.ContentPane').html(data);
                    }
                });
            });
public actionresult Home()
{
return Partial("_home");
} 
```

但我无法使用我所有的 javascript 代码，我认为它与布局页面脚本重叠。有什么方法可以异步加载与我的场景匹配的页面。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:34:53.810

如果这些链接是锚点，您应该确保通过从单击处理程序返回 false 来取消默认事件：

```
$(function() {
    $('.menuLink').click(function () {
        $.ajax({
            url: this.href,
            type: 'GET',
            cache: false,
            success: function (data) {
                $('div.ContentPane').html(data);
            }
        });

        return false;
    });
}); 
```

现在您的左窗格中可以有许多链接：

```
@Html.ActionLink("go to home", "index", "home", null, new { @class = "menuLink" })
@Html.ActionLink("go to events", "events", "home", null, new { @class = "menuLink" })
... 
```

或者干脆使用 Ajax.ActionLinks：

```
@Ajax.ActionLink("go to home", "index", "home", new AjaxOptions { UpdateTargetId = "contentPane", HttpMethod = "POST" })
@Ajax.ActionLink("go to events", "events", "home", new AjaxOptions { UpdateTargetId = "contentPane", HttpMethod = "POST" })
... 
```

您只需为内容窗格 id 提供一个 id，因为 Ajax.ActionLink 需要目标 DOM 元素的 id：

```
<div id="contentPane">
    ...
</div> 
```

并且不要忘记`jquery.unobtrusive-ajax`在您的页面中引用脚本，以便 Ajax.ActionLinks 实际上是不显眼的 AJAX 化并发送 AJAX 请求而不是常规请求：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

# android - Google play 提交流程：我们可以在截图中添加自定义艺术吗？

> ID：12729060
> 
> 赞同：0
> 
> 时间：2012-10-04T14:04:42.060
> 
> 标签：android, google-play, submission

我试图在网上找到这个问题的答案，但没有成功。谷歌的官方文档说：“

> 截图（必填）：我们需要 2 张截图。使用：显示在您在 Google Play 中的应用程序的详细信息页面上。您最多可以上传 8 个屏幕截图。规格：320w x 480h、480w x 800h 或 480w x 854h；24 位 PNG 或 JPEG（无 alpha） 全出血，无边框。提示：横向缩略图会被裁剪，但如果用户在 Google Play 应用中打开它，我们会保留图像的完整尺寸和纵横比。

对我来说，不清楚我们是否可以编辑屏幕截图以添加自定义艺术，例如添加营销信息，还是被禁止？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:10:43.767

我相信对于自定义艺术，您的意思是在应用程序的屏幕截图顶部带有一些带有一些文字的横幅。我认为只要您在图像尺寸比例范围内，这应该没问题。可能有更严格审查的 Apple App Store 允许这些类型的屏幕截图。你在这里应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:16:28.183

我觉得没关系，很多流行的游戏都是这样做的，见[割绳子](https://play.google.com/store/apps/details?id=com.zeptolab.ctr.paid)甚至[愤怒的小鸟](https://play.google.com/store/apps/details?id=com.rovio.angrybirdsspace.premium)。

# java - XmlSchemaCollection.read() 的 NoSuchMethodError

> ID：12729062
> 
> 赞同：5
> 
> 时间：2012-10-04T14:04:53.020
> 
> 标签：java, xml, spring

我不断收到 XmlSchemaCollection.read(Lorg/xml/sax/InputSource;) 的 NoSuchMethodError，我发现旧版本的 XMLSchema 有问题[发生了什么：org.apache.ws.commons.schema.XmlSchemaCollection.read(InputSource)](https://stackoverflow.com/questions/12031947/what-happened-to-org-apache-ws-commons-schema-xmlschemacollection-readinputsou) . 我更改了 Maven 依赖项，但错误不断重复。

```
Caused by: java.lang.NoSuchMethodError: org.apache.ws.commons.schema.XmlSchemaCollection.read(Lorg/xml/sax/InputSource;)Lorg/apache/ws/commons/schema/XmlSchema;
at org.springframework.xml.xsd.commons.CommonsXsdSchemaCollection.afterPropertiesSet(CommonsXsdSchemaCollection.java:137)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
... 55 more 
```

maven依赖

```
<dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-xml</artifactId>
        <version>2.1.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.apache.ws.xmlschema</groupId>
        <artifactId>xmlschema-core</artifactId>
        <version>2.0.3</version>
    </dependency> 
```

模式集合 bean

```
<bean id="schemaCollection" class="org.springframework.xml.xsd.commons.CommonsXsdSchemaCollection">
    <property name="xsds" value="/message.xsd"/>
    <property name="inline" value="true"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T09:22:48.197

可能是其他一些库依赖于旧版本的 xmlschema-core。查看

```
mvn dependency:tree 
```

如果您在 dome 其他库中看到 xmlschema-core 作为依赖项，则尝试通过对父依赖项使用排除来排除它， [请参阅依赖排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T13:11:39.217

另一种选择是；如果您的项目 pom.xml 中有问题或缺少 artifactId，此问题也仍然存在。

# windows-7 - 我想反转我的扩展桌面显示器

> ID：12729066
> 
> 赞同：4
> 
> 时间：2012-10-04T14:05:04.657
> 
> 标签：windows-7, multiple-monitors

我正在使用显示器和笔记本电脑。目前桌面出现在笔记本电脑屏幕上，显示器是扩展桌面。我希望它是另一种方式，但我可以弄清楚如何做到这一点。是否可以对其进行配置，使桌面出现在显示器上，而笔记本电脑的屏幕是扩展屏幕？顺便说一句，我正在使用Windows 7。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T14:06:17.470

设置中有一个选项可以将显示器设置为主显示器。检查监视器。您的任务栏将移至此。

1.  右键单击桌面并选择“屏幕分辨率”。
2.  单击识别以在屏幕上显示数字。
3.  单击与监视器对应的窗口上的正确屏幕。
4.  如果未选中，请选中“将此设为我的默认显示”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:10:53.650

右键单击您的桌面并选择“屏幕分辨率”。选择您的外接显示器（通常是#2），然后单击“将此作为我的主显示器”复选框，然后按应用。这应该使您的外部显示器成为您的主要显示器，并将任务栏移过来。

# c# - 无限循环消耗 100% CPU

> ID：12729075
> 
> 赞同：3
> 
> 时间：2012-10-04T14:05:14.667
> 
> 标签：c#, cpu-usage, infinite-loop, time-frequency

我陷入了需要生成一些赫兹的定义频率的情况。我已经尝试过多媒体计时器和互联网上所有其他可用的东西，但到目前为止，带有一些 if-else 条件的无限循环给了我最好的结果。但是这种方法的问题是它几乎消耗了所有的cpu，没有空间让其他应用程序正常工作。

我需要一种算法，它可以生成一些 Hz 到 KHz 的频率。

我正在使用带有 C# 的 windows 平台。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:15:05.963

您无法在非实时平台上准确生成固定频率的信号。在任何时候，来自同一进程或其他进程的高优先级线程都可能阻止线程的执行。例如，当 GC 线程启动时，工作线程将被挂起。

话虽如此，您允许的抖动是多少，您需要支持的最高频率是多少？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:33:37.680

我解决问题的方法是生成“声波”并在声卡上输出。有多种方法可以从 C# 访问您的声卡，例如使用 XNA。正如其他人指出的那样，为此使用 CPU 并不是一个好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:07:24.847

`Thread.Sleep(delay);`在你的循环中使用

它减少了处理器的使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:08:23.767

当您生成计时器时，您可能希望根据您的频率周期进行睡眠。

您必须在自己的线程中运行频率发生器并调用

```
Thread.Sleep(yourFrequencyPeriodMs); 
```

在每个周期的迭代中。

# ruby-on-rails - rake db:create:all => FATAL: 用户“foo”的密码验证失败

> ID：12729079
> 
> 赞同：1
> 
> 时间：2012-10-04T14:05:41.170
> 
> 标签：ruby-on-rails, ruby, rake, rails-postgresql

第一次尝试设置 postgresql 数据库。我正在使用[这个](http://railscasts.com/episodes/342-migrating-to-postgresql/)railscast。经过几个小时令人沮丧的问题，我得到了 rake db:create:all。现在我得到错误：

```
password authentication failed for user "pgtest" 
```

这是我的 pg_hba.conf

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

这是我的 database.yml

```
development:
  adapter: postgresql
  encoding: unicode
  database: pgtest_development
  pool: 5
  username: pgtest
  password: password

test:
  adapter: postgresql
  encoding: unicode
  database: pgtest_test
  pool: 5
  username: pgtest
  password: password 
```

我先尝试了没有密码，它给出了错误：

```
fe_sendauth: no password supplied 
```

我究竟做错了什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:40:08.957

如果您只是对 pg_hba.conf 进行了更改，而`RELOAD`PostgreSQL`RESTART`没有先这样做。这些是您描述的常见原因。

如果这不能解决问题，那么您要么编辑了错误的 pg_hba.conf，要么您在文件中前面指定了您没有向我们展示的规则。按顺序排除这些情况。

# spring - 具有 AD 身份验证和数据库授权的 Spring 安全性

> ID：12729093
> 
> 赞同：2
> 
> 时间：2012-10-04T14:06:14.453
> 
> 标签：spring, authentication, active-directory, spring-security

我正在尝试实施这个问题的解决方案

> [Spring Security 3 Active Directory 身份验证、数据库授权](https://stackoverflow.com/questions/9228932/spring-security-3-active-directory-authentication-database-authorization?answertab=active)

但我不明白如何使用 MyAuthoritySupplementingProvider 。

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:29:19.580

我认为 MyAuthoritySupplementingProvider 应该在

```
<beans:bean id="activeDirectoryAuthenticationProvider"
        class="xxx.package.MyAuthoritySupplementingProvider">
    <beans:constructor-arg value="mydomain" />
    <beans:constructor-arg value="ldap://my URL :389" />
    <beans:property name="convertSubErrorCodesToExceptions" value="true"/>
</beans:bean> 
```

我不确定这是否可行，但要获得更多详细信息，您应该参考“Spring Security 3”第 9 章了解 ldap 和活动目录配置和选项，这将帮助您以更好的方式理解这一点，而不仅仅是通过所以发帖。

# dojo - 在 DOJO 1.6 中创建排序树？

> ID：12729098
> 
> 赞同：0
> 
> 时间：2012-10-04T14:06:22.580
> 
> 标签：dojo

我刚开始学习道场，并尝试使用示例代码来学习它。使用道场 1.6

在示例代码的帮助下，我创建了一棵树

![在此处输入图像描述](../Images/c2018593cd3ea3c6a205a57a408c1d6c.png)

现在我想对根和子应用排序。在此[示例](http://jsfiddle.net/AnxBW/)代码的帮助下，我更改了代码

输出未排序 n 但根文件夹已更改其位置并删除了子文件夹。

请帮我解决这个问题。

我的代码：

```
dojo.require("dojo.data.ItemFileWriteStore");
dojo.require("dojo.data.ItemFileReadStore");
dojo.require("dijit.tree.ForestStoreModel");
dojo.require("dijit.Tree");
var data = [ { id: 1, name: "answerTypeLabel",                 type:'scenario',    children:[{_reference: 2}]},
                       { id: 2, name: "acceptRequestLabel",             type:'paragraph',   data: "acceptRequestLabel"},
                       { id: 3, name: "rejectRequestLabel",             type:'scenario',    children:[{_reference: 5},{_reference: 6}]},
                       { id: 4, name: "MoreInformationLabel",       type:'scenario',    children:[{_reference: 7},{_reference: 8}]},
                       { id: 5, name: "rejectRequestStatusLabel",   type:'paragraph',   data: "rejectRequestStatusLabel"},
                       { id: 6, name: "rejectRequestNotCoveredLabel", type:'paragraph',     data: "rejectRequestNotCoveredLabel" },
                       { id: 7, name: "MoreInformationDocumentLabel", type:'paragraph',     data: "MoreInformationDocumentLabel"},
                       { id: 8, name: "MoreInformationDataLabel",   type:'paragraph',   data: "MoreInformationDataLabel"}
                     ];
dojo.addOnLoad(function() {
    var sortableStore = new dojo.data.ItemFileReadStore({
        data: {
              identifier: 'id',
                        label: 'name',
                        items: data 
        }
    });
    var model = new dijit.tree.ForestStoreModel({
        rootLabel: 'Names',
        store: new dojo.data.ItemFileWriteStore({
            data: {
                identifier: 'id',
                items: [],
                label: 'name'
            }
        }) // blank itemsstore
    })
    var tree = new dijit.Tree({
        model: model,
        updateItems: function(items) {
            var self = this;
            console.log('pre', this.model.root.children);

            dojo.forEach(items, function(newItem) {
                console.log('add', newItem);
                try {
                    self.model.store.newItem({
                        id: sortableStore.getValue(newItem, 'id'),
                        name: sortableStore.getValue(newItem, 'name'),
                        type: sortableStore.getValue(newItem, 'type'),
                        data: sortableStore.getValue(newItem, 'data'),

                    });
                } catch (e) {
                    console.log(e);
                }
            });
            console.log('post', this.model.root.children);
            console.log("children: ", this.rootNode.getChildren());

        },
    });
    tree.placeAt(dojo.body());
    sortableStore.fetch({
        query: {
            type:'scenario' 
        },
        sort: [{
            attribute: "name"}],
        onComplete: function(items) {
            console.log(items, 'sorted');
            tree.updateItems(items);

        }
    })
}); 
```

输出 ：![上述代码的输出](../Images/accfdf15b97c184d15c4166355e71966.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:39:31.423

“名称”源于您设置“rootLabel”。

顺便说一句，小提琴有修改，只是一个类似于粘贴箱的功能:)

您需要使用树模型`pasteItem`来插入引用的项目（每个 'newItem' 的 'children' 属性）。

否则，如果您摆脱数据的“_reference”结构，还有另一种方法。见：http: [//jsfiddle.net/GHFdA/1/](http://jsfiddle.net/GHFdA/1/)

# salesforce - Salesforce：在对象上创建计时器 - 可能吗？

> ID：12729100
> 
> 赞同：0
> 
> 时间：2012-10-04T14:06:25.510
> 
> 标签：salesforce, salesforce-service-cloud

公司需要知道每个工人在每个项目部分的每个部分上花费了多少时间。

以下类似于为此应用定义的一些自定义对象：

*   定制项目
*   自定义项目部分
*   自定义时间输入

现在我们需要自定义我们的 salesforce 应用程序，以便工作人员可以打开项目部分并单击“开始...”，然后单击“停止...”。

这些按钮将分别创建具有开始日期的时间条目并更新具有停止日期的时间条目。

这可以在自定义对象本身中做到吗？（理想的）

我们应该创建新页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:10:43.267

是的。为您的自定义对象创建两个自定义按钮，例如。“开始”和“停止”。然后在按钮上添加一些 JavaScript 以更新您的自定义字段：

```
{!REQUIRESCRIPT("/soap/ajax/15.0/connection.js")}

var YourCustomObject = new sforce.SObject("YourCustomObject__c");

YourCustomObject.Id = '{!YourCustomObject__c.Id }';
YourCustomObject.Start__c = '{!NOW()}';

updateStartTime = sforce.connection.update([YourCustomObject]); 
```

然后将这些按钮插入到页面布局中。

# php - 在一点时间差内检测到从同一客户端发送到 php 的类似请求

> ID：12729103
> 
> 赞同：0
> 
> 时间：2012-10-04T14:06:44.447
> 
> 标签：php, mysql

我有一个 php 脚本，它从 flash 中的按钮接收 $_['post'] 数据，有时用户确实双击该按钮并且数据发送两次，这会导致服务器端的 mysql 更新冲突。我如何在一点时间差异内忽略来自同一客户端的 php 中的进一步请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:22:47.973

你听说过[mysql 中的锁表](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)吗？

如果您不提供更多详细信息，则无法提供详细示例，但基本示例是：

```
mysql_query( "LOCK TABLES updates READ WRITE", $connection);
$q = mysql_query("SELECT COUNT(*) FROM updates WHERE user = $currentUser AND time...");
if( mysql_result($q, 0, 0) != 0){
    // Someone's already doing update; exit
    mysql_query( "UNLOCK TABLES;");
    return false;
}

// Require lock for ourselves
mysql_query( "INSERT INTO updates ...");
mysql_query( "UNLOCK TABLES;");

// Do the stuff on database 
```

这确保了当同一用户尝试执行此操作两次时，他或她将不被允许（当时只有一次更新）。

您还有不同的选择：

*   采用[`TRANSACTION`](https://www.google.com/search?hl=en&ie=UTF-8&q=mysql%20transactions)
*   生成一次更新令牌（注意原子性，您必须执行`DELETE FROM ...`然后检查受影响的行，因为`SELECT; DELETE`我会被打断或者您必须再次使用表锁定）
*   我最喜欢的一个：`button.enable=false`，并应要求完成`button.enabled=true`

[注意：代码易受 SQL 注入攻击，并且您`mysql_`的函数已过时。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:08:22.513

为什么不在数据库中有一个最后更新的时间戳，然后根据当前时间检查它。如果它在最后几秒钟内，则不要运行 MySQL 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:11:28.270

您可以添加基本保护机制，因为您可以将隐藏的随机值添加到表单并维护显示值表，在执行主查询之前从中删除使用过的值。这也可以防止 XSS。

# css - 负文本缩进

> ID：12729104
> 
> 赞同：0
> 
> 时间：2012-10-04T14:06:47.733
> 
> 标签：css, google-chrome, text-indent

所以我有以下图像替换文本：

```
<h1>Look at me, I am text.</h1> 
```

这具有以下CSS：

```
.parent-dev h1{
    text-indent:-999999em;
    background:url('images/thing.png');
} 
```

现在在谷歌浏览器最近更新之前，我从未见过没有缩进的文本。然而，就在几天前，文本突然出现在替换图像的顶部。有没有其他人看到这种情况发生，特别是并且仅使用 Google Chrome 版本 22.0.1229.79？

# android - 作为网站制作的手机游戏，在应用程序中使用

> ID：12729105
> 
> 赞同：0
> 
> 时间：2012-10-04T14:06:52.217
> 
> 标签：android, ios, mobile

我正在考虑制作一款手机游戏（比如 Wordfeud）。现在我想在 Android、iOS、WindowsPhone、facebook 和普通浏览器上发布这款游戏。

我可以在所有这些平台上原生。

但

由于希望它成为多人游戏，因此大部分功能将通过带有 SOAP 调用或其他东西的 ac#.NET Web 服务来完成。

现在对于另一个项目，我正在制作一个在 WebView (android) 中运行的移动网站，并且同一个网站已经在 IOS 应用程序中运行。

所以.. 为什么不做一个 jQuery/HTML5/.NET 移动网站和一些小应用程序，只是作为一个外壳让它们进入市场。这样一来，一切都将集中在一个地方，更新/错误修复将是在公园里散步。

你怎么看？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:14:36.703

如果您查看[Apple Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)，您会看到：

> 不是很有用、不独特、**只是捆绑为应用程序的网站**或不提供任何持久娱乐价值的应用程序可能会被拒绝

您将能够启动您的安卓系统，但您的 iOS 网络捆绑包可能会被拒绝。

我建议在发布到应用商店之前先看看这个页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:15:55.727

我认为我总是在 html5 应用程序中看到 3 件事：
- 与不同平台的集成非常糟糕
- 性能不佳，基于 Web 的速度比原生的慢。
-维持的噩梦。

如果你想做一个高质量的应用程序，我强烈建议你采用原生方式。HTML5 并非全错。我认为如果有很大的时间/预算限制和/或您不关心应用程序的质量（例如，如果它仅在内部使用），这是正确的选择。

最后的想法：为什么是 SOAP ？REST 速度更快，实施起来也不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:16:54.660

我认为这有很多问题。如果您查看那些尝试帮助您完成此类事情的工具，最强大的工具是 Google PlayN 和 Monkey。HTML/Flash/SilverLight 游戏和移动游戏之间仍然存在很多语义差异，最明显的是输入设备和屏幕分辨率大小的差异。

同样重要的是要认识到集成不同平台（即 facebook 与非 facbook，取决于您制作的游戏类型）的成本可能很高。

谷歌 PlayN：[http ://code.google.com/p/playn/](http://code.google.com/p/playn/)

猴子：[http ://www.monkeycoder.co.nz/](http://www.monkeycoder.co.nz/)

# ios - 此类与键视图的键值编码不兼容。

> ID：12729107
> 
> 赞同：12
> 
> 时间：2012-10-04T14:06:52.367
> 
> 标签：ios, compiler-errors, ios-universal-app, appdelegate

我在 AppDelegate 中遇到问题，运行应用程序时出现此错误：

```
 Terminating app due to uncaught exception 'NSUnknownKeyException', reason: 
  '[<UIApplication 0x856c820> setValue:forUndefinedKey:]:
   this class is not key value coding-compliant for the key view.' 
```

这是 AppDelegate.h 的代码

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>{

        //UINavigationController *navigationController;
 }

@property (strong, nonatomic) UIWindow *window;

@property (copy, nonatomic) ViewController * viewController;
@property (copy, nonatomic) UINavigationController * navigationController;

 @end 
```

这是 AppDelegate.m 的代码

```
 #import "AppDelegate.h"

 #import "RootViewController.h"

  @implementation AppDelegate

  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
   {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        RootViewController *rootMenu;

         if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
              rootMenu= [[RootViewController alloc]  initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
              rootMenu = [[RootViewController alloc]initWithNibName:@"ViewController_iPad" bundle:nil];
  }

  self.navigationController =[[UINavigationController  alloc]initWithRootViewController:rootMenu];

  self.window.rootViewController = self.navigationController;

  [self.window makeKeyAndVisible];
   return YES;
 } 
```

我能做些什么来解决这个错误？我已经重写了 RootViewController，把旧的扔进了垃圾桶，但问题仍然存在。提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T14:16:44.857

这通常发生在未正确建立 Interface Builder 或 Storyboard 连接时。有时你会建立一个连接，然后删除建立连接的代码。Interface Builder 仍然有对代码的引用，这会导致符合键/值的运行时错误。如果您没有为视图控制器分配正确的类，您也可能会收到此错误。如果您为特定的视图控制器编写了代码，请确保在 Interface Builder 中为该视图控制器适当地设置类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-29T22:12:50.730

我知道这个问题有点老了，但我遇到了同样的问题，下面的文章帮助很大。基本上，它逐步说明了如何解决@bgolson 所描述的问题。

[http://www.tech-recipes.com/rx/52021/how-do-i-fix-the-issue-this-class-is-not-key-value-coding-compliant-for-the-key-in-xcode-6/](http://www.tech-recipes.com/rx/52021/how-do-i-fix-the-issue-this-class-is-not-key-value-coding-compliant-for-the-key-in-xcode-6/)

# c++ - gcc -O2 的奇怪整数行为

> ID：12729110
> 
> 赞同：9
> 
> 时间：2012-10-04T14:06:59.227
> 
> 标签：c++, c, gcc, integer, compiler-optimization

```
#include <stdio.h>
#include <limits.h>

void sanity_check(int x)
{
    if (x < 0)
    {
        x = -x;
    }
    if (x == INT_MIN)
    {
        printf("%d == %d\n", x, INT_MIN);
    }
    else
    {
        printf("%d != %d\n", x, INT_MIN);
    }
    if (x < 0)
    {
        printf("negative number: %d\n", x);
    }
    else
    {
        printf("positive number: %d\n", x);
    }
}

int main(void)
{
    sanity_check(42);
    sanity_check(-97);
    sanity_check(INT_MIN);
    return 0;
} 
```

当我用 编译上述程序时`gcc wtf.c`，我得到了预期的输出：

```
42 != -2147483648
positive number: 42
97 != -2147483648
positive number: 97
-2147483648 == -2147483648
negative number: -2147483648 
```

但是，当我使用 编译程序时`gcc -O2 wtf.c`，会得到不同的输出：

```
42 != -2147483648
positive number: 42
97 != -2147483648
positive number: 97
-2147483648 != -2147483648
positive number: -2147483648 
```

注意最后两行。这到底是怎么回事？gcc 4.6.3 优化是否过于急切？

（我还用 g++ 4.6.3 对此进行了测试，我观察到了同样的奇怪行为，因此使用了 C++ 标签。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T14:11:49.457

当您执行 -(INT_MIN) 时，您正在调用未定义的行为，因为该结果不适合 int。

gcc -O2 注意到 x 永远不会是负数并在此后进行优化。它不在乎你是否溢出了这个值，因为它是未定义的，它可以随心所欲地对待它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-04T14:11:37.863

我认为这可以帮助你，来自这里：[这里](http://gcc.gnu.org/onlinedocs/gcc-4.4.2/gcc/Optimize-Options.html)

> -fstrict-overflow 允许编译器采用严格的有符号溢出规则，具体取决于正在编译的语言。对于 C（和 C++），这意味着在对有符号数进行算术运算时溢出是未定义的，这意味着编译器可能会假设它不会发生。这允许各种优化。例如，编译器会假设像 i + 10 > i 这样的表达式对于有符号 i 始终为真。此假设仅在有符号溢出未定义时才有效，因为如果在使用二进制补码算术时 i + 10 溢出，则表达式为假。当此选项生效时，任何确定对有符号数的操作是否会溢出的尝试都必须仔细编写，以免实际涉及溢出。此选项还允许编译器假设严格的指针语义：给定一个指向对象的指针，如果向该指针添加偏移量不会产生指向同一对象的指针，则添加未定义。这允许编译器得出结论，对于指针 p 和无符号整数 u，p + u > p 始终为真。这个假设仅是有效的，因为指针环绕是未定义的，因为如果 p + u 使用二进制补码算术溢出，则表达式为假。

另请参见 -fwrapv 选项。使用 -fwrapv 意味着整数有符号溢出是完全定义的：它会换行。使用 -fwrapv 时，对于整数，-fstrict-overflow 和 -fno-strict-overflow 没有区别。使用 -fwrapv 允许某些类型的溢出。例如，如果编译器在对常量进行算术运算时发生溢出，溢出的值仍然可以与 -fwrapv 一起使用，但不能用于其他情况。

-fstrict-overflow 选项在 -O2、-O3、-Os 级别启用。

# php - 使用 PHP Mysql 从表单中插入日期

> ID：12729113
> 
> 赞同：0
> 
> 时间：2012-10-04T14:07:08.857
> 
> 标签：php, mysql

我似乎无法将日期从我的表单插入到我的数据库中。请帮忙！

这是我的表格

```
echo '

<h1>Enter New Report</h1>
<form action="submitreport.php" method="post"
enctype="multipart/form-data">

 Date: <input type="text" name="Date" value='.$myDate.' /><br />
 Report:<br><TEXTAREA NAME=Report ROWS=4 COLS=40></TEXTAREA><br />
 <input type="submit" name="submit" value="Submit" />
 </form>

 ';
 ?> 
```

这是我为将其提交到数据库而编写的内容

```
$insertdate = trim($_POST['Date']);

$insertdate = mysql_real_escape_string($insertdate);
    $insertdate = date('m/d/Y', $insertdate);

echo $insertdate;

mysql_query("INSERT INTO `Reports`(`Date`, `Report`) VALUES ('$insertdate','$_POST[Report]')") or die("load1 -" .  mysql_error());

mysql_close();

echo "Thank You!" . " -" . "<a href='index.php' style='text-decoration:none;color:#ff0099;'> Return Home</a>";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:10:18.160

我只是猜测，但您`Date`在数据库中的字段是 type`date`或`datetime`. 这些格式是`YYYY-mm-dd`. 尝试将您的代码更改为：

```
$insertdate = date('Y-m-d', strtotime($_POST['Date'])); 
```

此外，您没有在格式化之前将日期转换为时间戳。我也在`strtotime()`这里添加了数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:09:42.387

PHP`date`需要一个时间戳作为第二个参数。如果`$insertdate`不是一个，它将无法正常工作。您可以使用 PHP 的`strtotime()`函数从字符串中获取时间戳。

此外，您的 sql 语句中的值必须根据您的 mysql 数据库中使用的类型进行格式化，例如`date`，`datetime`或`timestamp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:09:45.910

您可以使用 NOW() MySQL 函数将当前日期/时间插入数据库。您只需要使用 Date、DateTime 或 Timestamp 字段类型即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:11:55.987

我知道了 $insertdate = trim($_POST['Date']);

```
$insertdate = mysql_real_escape_string($insertdate);
$insertdate = strtotime($insertdate);

    $insertdate = date('Y-m-d', $insertdate); 
```

strtotime 修复了它，但我不得不将日期格式重新排列为 Ymd

感谢您的帮助

# oop - MATLAB 面向对象的图形用户界面

> ID：12729117
> 
> 赞同：1
> 
> 时间：2012-10-04T14:07:23.357
> 
> 标签：oop, matlab, user-interface

> **可能重复：**
> [后面的 Matlab GUI 代码中的全局（共享）变量。有没有比使用句柄结构更好的方法呢？](https://stackoverflow.com/questions/11595040/global-shared-variables-in-matlab-gui-code-behind-is-there-better-way-to-do-i)

我找不到任何有关它的信息，这就是我要存档的内容。

我想创建类似于标准 Windows OOP 的 GUI 类。例如，我想创建一个表示窗口的类，该窗口将包含子对象的定义，例如按钮、列表等。

我会在主 .m 文件中创建该对象并从那里开始。在 MATLAB 中是否有可能发生这样的事情？如果没有，我应该采用哪种方法？

你能给我一个简单的代码，我将从哪里开始，例如一个简单窗口的类定义和一个声明它的主 .m 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:42:49.463

------ FigGUI.m --------

```
classdef FigGUI < handle
    properties
        fig
    end
    methods
        function obj = FigGUI(varargin)
            obj.fig = figure(varargin{:});
        end
        function clear_figure(obj)
            clf(obj.fig);
        end
        % ... more methods
    end
end 
```

构造示例：

```
f = FigGUI('Position', [560   528   560   420], 'Name', 'GUI');
f.clear_figure(); 
```

... 等等

# database - 如何计算 AWS DynamoDB 表的临时吞吐量？

> ID：12729120
> 
> 赞同：1
> 
> 时间：2012-10-04T14:07:26.067
> 
> 标签：database, amazon-web-services, amazon-dynamodb, throughput

我的系统应该每天将大量数据写入 DynamoDB 表。这些写入是突发的，即在每天的特定时间，几个不同的进程必须将它们的输出数据转储到同一个表中。只要在下一次转储发生之前写入所有日常数据，写入速度并不重要。我需要找出计算我的桌子临时容量的正确方法。

因此，为简单起见，我们假设我只有一个进程每天写入一次数据，并且它必须将最多`X`项目写入表中（每个项目 < 1KB）。我必须指定的容量是否基本上等于`X / 24 / 3600`写入/秒？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:26:28.633

预置容量以写入/秒为单位。您需要确保可以处理预期的峰值写入次数/秒，而不是一天的平均值。因此，如果您有一个每天运行一次的进程并在 Z 秒内进行 X 次写入、Y 大小（以 KB 为单位，向上取整），那么您的公式将是

```
capacity = (X * Y) / Z 
```

因此，假设您在 100 秒内有 100K 写入，并且每次写入 < 1KB，您将需要 1000 w/s 容量。

请注意，为了最大限度地减少预置的写入容量需求，最好以更连续的方式将数据添加到系统中，以减少必要读/写容量的峰值。

# mule - Mule 3 中的 Quartz cron 表达式 - 可以动态化吗？

> ID：12729121
> 
> 赞同：3
> 
> 时间：2012-10-04T14:07:27.460
> 
> 标签：mule

Quartz端点中的cron表达式可以动态化吗？

我尝试如下配置我的端点：

```
<quartz:inbound-endpoint jobName="trigger"
        cronExpression="#[app.registry.abc.cronEx]"
        repeatInterval="0" responseTimeout="10000" doc:name="Quartz">
        <quartz:event-generator-job />
</quartz:inbound-endpoint> 
```

其中 abc 是春豆。

但是当应用程序启动时它会抛出异常：

```
10/04/12 16:49:27.955 ERROR [main] DefaultMuleApplication - null
java.text.ParseException: Unexpected character: #
at org.quartz.CronExpression.storeExpressionVals(CronExpression.java:642)
at org.quartz.CronExpression.buildExpression(CronExpression.java:430)
at org.quartz.CronExpression.<init>(CronExpression.java:255)
at org.quartz.CronTrigger.setCronExpression(CronTrigger.java:474)
at org.mule.transport.quartz.QuartzMessageReceiver.doStart(QuartzMessageReceiver.java:125)
at org.mule.transport.AbstractTransportMessageHandler$3.onTransition(AbstractTransportMessageHandler.java:316)
at org.mule.lifecycle.AbstractLifecycleManager.invokePhase(AbstractLifecycleManager.java:141)
at org.mule.transport.ConnectableLifecycleManager.fireStartPhase(ConnectableLifecycleManager.java:51) 
```

...

有没有办法实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:25:26.153

使用[弹簧表达式](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html#expressions-beandef-xml-based)：

```
cronExpression="#{abc.cronEx}" 
```

# angularjs - AngularJS：在调用 $scope.$apply() 时防止错误 $digest 已经在进行中

> ID：12729122
> 
> 赞同：858
> 
> 时间：2012-10-04T14:07:32.103
> 
> 标签：angularjs, angularjs-scope, angularjs-digest

我发现自从以 Angular 构建应用程序以来，我越来越需要手动将页面更新到我的范围。

我知道这样做的唯一方法是`$apply()`从我的控制器和指令的范围内调用。这样做的问题是它不断向控制台抛出错误，内容如下：

> 错误：$digest 已经在进行中

有谁知道如何避免此错误或以不同的方式实现相同的目标？

* * *

## 回答 #1

> 赞同：675
> 
> 时间：2013-09-25T04:06:19.560

从最近与 Angular 人员就这个主题进行的讨论：**出于面向未来的原因，您不应该使用`$$phase`**

当按下“正确”的方法时，答案是目前

```
$timeout(function() {
  // anything you want can go here and will safely be run on the next digest.
}) 
```

我最近在编写 Angular 服务来包装 facebook、google 和 twitter API 时遇到了这个问题，这些 API 在不同程度上都有回调。

这是服务中的一个示例。（为简洁起见，服务的其余部分——设置变量、注入 $timeout 等——已被取消。）

```
window.gapi.client.load('oauth2', 'v2', function() {
    var request = window.gapi.client.oauth2.userinfo.get();
    request.execute(function(response) {
        // This happens outside of angular land, so wrap it in a timeout 
        // with an implied apply and blammo, we're in action.
        $timeout(function() {
            if(typeof(response['error']) !== 'undefined'){
                // If the google api sent us an error, reject the promise.
                deferred.reject(response);
            }else{
                // Resolve the promise with the whole response if ok.
                deferred.resolve(response);
            }
        });
    });
}); 
```

请注意， $timeout 的延迟参数是可选的，如果未设置则默认为 0（如果[未设置延迟，则](https://github.com/angular/angular.js/blob/v1.2.0-rc.2/src/ng/browser.js#L344)[$timeout](https://github.com/angular/angular.js/blob/v1.2.0-rc.2/src/ng/timeout.js#L41)调用[$browser.defer](https://github.com/angular/angular.js/blob/v1.2.0-rc.2/src/ng/browser.js)默认为 0 ）

有点不直观，但这是编写 Angular 的人的答案，所以对我来说已经足够了！

* * *

## 回答 #2

> 赞同：671
> 
> 时间：2012-10-12T12:28:54.100

> **不要使用这种模式**——这最终会导致比它解决的更多的错误。即使您认为它修复了某些问题，但它没有。

您可以`$digest`通过检查来检查 a 是否已经在进行中`$scope.$$phase`。

```
if(!$scope.$$phase) {
  //$digest or $apply
} 
```

`$scope.$$phase`将返回`"$digest"`或者`"$apply"`如果 a `$digest`or`$apply`正在进行中。我相信这些状态之间的区别在于`$digest`将处理当前范围及其子范围的手表，`$apply`并将处理所有范围的观察者。

就@dnc253 而言，如果您发现自己打电话`$digest`或`$apply`经常打电话，您可能做错了。当我需要更新作用域的状态时，我通常发现我需要消化，因为 DOM 事件在 Angular 范围之外触发​​。例如，当 twitter 引导模式被隐藏时。有时 DOM 事件会在 a`$digest`进行时触发，有时则不会。这就是我使用此检查的原因。

如果有人知道，我很想知道一种更好的方法。

* * *

来自评论：@anddoutoi

[angular.js 反模式](https://github.com/angular/angular.js/wiki/Dev-Guide%3A-Anti-Patterns)

> 2.  不要这样做`if (!$scope.$$phase) $scope.$apply()`，这意味着你`$scope.$apply()`在调用堆栈中不够高。

* * *

## 回答 #3

> 赞同：332
> 
> 时间：2013-07-30T22:51:27.353

摘要循环是一个同步调用。在完成之前，它不会控制浏览器的事件循环。有几种方法可以解决这个问题。处理这个问题的最简单方法是使用内置的 $timeout，第二种方法是如果你使用下划线或 lodash（你应该使用），调用以下命令：

```
$timeout(function(){
    //any code in here will automatically have an apply run afterwards
}); 
```

或者如果你有 lodash：

```
_.defer(function(){$scope.$apply();}); 
```

我们尝试了几种解决方法，我们讨厌将 $rootScope 注入我们所有的控制器、指令甚至一些工厂。所以，到目前为止，$timeout 和 _.defer 是我们最喜欢的。这些方法成功地告诉 angular 等到下一个动画循环，这将保证当前的 scope.$apply 结束。

* * *

## 回答 #4

> 赞同：270
> 
> 时间：2014-04-16T06:59:44.770

这里的许多答案都包含很好的建议，但也可能导致混淆。简单地使用`$timeout`不是最好的，*也不*是正确的解决方案。此外，如果您担心性能或可扩展性，请务必阅读。

## 你应该知道的事情

*   `$$phase`是框架私有的，这是有充分理由的。

*   `$timeout(callback)`将等到当前的摘要循环（如果有）完成，然后执行回调，然后在最后运行一个完整的`$apply`.

*   `$timeout(callback, delay, false)`会做同样的事情（在执行回调之前有一个可选的延迟），但不会触发`$apply`（第三个参数），如果你没有修改你的 Angular 模型（$scope），它会节省性能。

*   `$scope.$apply(callback)`调用，除其他外`$rootScope.$digest`，这意味着它将重新消化应用程序的根范围及其所有子级，即使您在一个孤立的范围内。

*   `$scope.$digest()`只会将其模型同步到视图，但不会消化其父范围，这可以在使用隔离范围（主要来自指令）处理 HTML 的隔离部分时节省大量性能。$digest 不接受回调：您执行代码，然后进行摘要。

*   `$scope.$evalAsync(callback)`已经在 angularjs 1.2 中引入，可能会解决你的大部分麻烦。请参阅最后一段以了解更多信息。

*   如果你得到`$digest already in progress error`，那么你的架构是错误的：要么你不需要重新消化你的范围，要么*你不应该负责*（见下文）。

## 如何构建你的代码

当您收到该错误时，您正在尝试消化您的示波器，而它已经在进行中：因为您不知道此时您的示波器的状态，您不负责处理它的消化。

```
function editModel() {
  $scope.someVar = someVal;
  /* Do not apply your scope here since we don't know if that
     function is called synchronously from Angular or from an
     asynchronous code */
}

// Processed by Angular, for instance called by a ng-click directive
$scope.applyModelSynchronously = function() {
  // No need to digest
  editModel();
}

// Any kind of asynchronous code, for instance a server request
callServer(function() {
  /* That code is not watched nor digested by Angular, thus we
     can safely $apply it */
  $scope.$apply(editModel);
}); 
```

而且，如果您知道自己在做什么，并且在大型 Angular 应用程序的一部分中处理一个孤立的小指令，那么您可能更喜欢 $digest 而不是 $apply 以节省性能。

## 自 Angularjs 1.2 起更新

任何 $scope: 中都添加了一个新的、强大的方法`$evalAsync`。基本上，如果正在发生，它将在当前摘要周期内执行其回调，否则新的摘要周期将开始执行回调。

`$scope.$digest`如果您真的知道只需要同步 HTML 的一个隔离部分（因为`$apply`如果没有正在进行的操作将触发一个新的部分），那仍然没有那么好，但是当您执行一个函数时，这是最好的解决方案您无法知道它*是否会同步执行*，例如在获取可能缓存的资源之后：有时这需要对服务器进行异步调用，否则资源将在本地同步获取。

在这些情况下以及您拥有的所有其他情况下，请`!$scope.$$phase`务必使用`$scope.$evalAsync( callback )`

* * *

## 回答 #5

> 赞同：89
> 
> 时间：2013-06-14T18:14:15.677

方便的小助手方法来保持这个过程干燥：

```
function safeApply(scope, fn) {
    (scope.$$phase || scope.$root.$$phase) ? fn() : scope.$apply(fn);
} 
```

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2013-09-03T00:15:39.200

我在使用第三方脚本（例如 CodeMirror 和 Krpano）时遇到了同样的问题，甚至使用此处提到的 safeApply 方法也没有为我解决错误。

但是解决它的方法是使用 $timeout 服务（不要忘记先注入它）。

因此，类似：

```
$timeout(function() {
  // run my code safely here
}) 
```

如果在你的代码中你正在使用

> 这

也许是因为它在工厂指令的控制器内，或者只需要某种绑定，那么你会做类似的事情：

```
.factory('myClass', [
  '$timeout',
  function($timeout) {

    var myClass = function() {};

    myClass.prototype.surprise = function() {
      // Do something suprising! :D
    };

    myClass.prototype.beAmazing = function() {
      // Here 'this' referes to the current instance of myClass

      $timeout(angular.bind(this, function() {
          // Run my code safely here and this is not undefined but
          // the same as outside of this anonymous function
          this.surprise();
       }));
    }

    return new myClass();

  }]
) 
```

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2014-01-21T21:33:02.040

请参阅[http://docs.angularjs.org/error/$rootScope:inprog](http://docs.angularjs.org/error/$rootScope:inprog)

当您调用`$apply`有时在 Angular 代码之外异步运行（应该使用 $apply 时），有时在 Angular 代码内部同步运行（这会导致`$digest already in progress`错误）时，就会出现问题。

例如，当您有一个从服务器异步获取项目并缓存它们的库时，可能会发生这种情况。第一次请求一个项目时，它将被异步检索，以免阻塞代码执行。但是，第二次，该项目已经在缓存中，因此可以同步检索。

防止此错误的方法是确保调用的代码`$apply`异步运行。这可以通过在调用中运行代码来完成，`$timeout`延迟设置为`0`（这是默认设置）。然而，在里面调用你的代码`$timeout`就不需要调用了`$apply`，因为 $timeout 会自己触发另一个`$digest`循环，这反过来会做所有必要的更新等等。

**解决方案**

简而言之，而不是这样做：

```
... your controller code...

$http.get('some/url', function(data){
    $scope.$apply(function(){
        $scope.mydate = data.mydata;
    });
});

... more of your controller code... 
```

做这个：

```
... your controller code...

$http.get('some/url', function(data){
    $timeout(function(){
        $scope.mydate = data.mydata;
    });
});

... more of your controller code... 
```

仅`$apply`当您知道运行它的代码将始终在 Angular 代码之外运行时才调用（例如，您对 $apply 的调用将发生在由您的 Angular 代码之外的代码调用的回调中）。

`$timeout`除非有人意识到使用over有一些不利的影响`$apply`，否则我不明白为什么你不能总是使用`$timeout`（零延迟）而不是`$apply`，因为它会做大致相同的事情。

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2012-10-04T14:41:41.483

当您收到此错误时，基本上意味着它已经在更新您的视图。你真的不需要`$apply()`在你的控制器中调用。如果您的视图没有按预期更新，然后在调用 后出现此错误`$apply()`，则很可能意味着您没有正确更新模型。如果您发布一些细节，我们可以找出核心问题。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2014-11-13T13:00:45.663

安全的最短形式`$apply`是：

```
$timeout(angular.noop) 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2013-09-19T01:48:42.720

您也可以使用 evalAsync。它将在摘要完成后的某个时间运行！

```
scope.evalAsync(function(scope){
    //use the scope...
}); 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2018-03-05T08:25:32.023

首先，不要这样修复

```
if ( ! $scope.$$phase) { 
  $scope.$apply(); 
} 
```

这是没有意义的，因为 $phase 只是 $digest 循环的布尔标志，因此您的 $apply() 有时不会运行。请记住，这是一种不好的做法。

相反，使用`$timeout`

```
 $timeout(function(){ 
  // Any code in here will automatically have an $scope.apply() run afterwards 
$scope.myvar = newValue; 
  // And it just works! 
}); 
```

**如果你使用下划线或lodash，你可以使用defer()：**

```
_.defer(function(){ 
  $scope.$apply(); 
}); 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2013-04-30T13:24:50.043

如果您使用这种方式，有时您仍然会遇到错误（[https://stackoverflow.com/a/12859093/801426](https://stackoverflow.com/a/12859093/801426)）。

试试这个：

```
if(! $rootScope.$root.$$phase) {
... 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-07-22T12:05:55.940

您应该根据上下文使用 $evalAsync 或 $timeout。

这是一个很好的解释的链接：

> [http://www.bennadel.com/blog/2605-scope-evalasync-vs-timeout-in-angularjs.htm](http://www.bennadel.com/blog/2605-scope-evalasync-vs-timeout-in-angularjs.htm)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2018-03-12T16:22:25.687

尝试使用

```
$scope.applyAsync(function() {
    // your code
}); 
```

代替

```
if(!$scope.$$phase) {
  //$digest or $apply
} 
```

$applyAsync 将 $apply 的调用安排在以后发生。这可用于将需要在同一摘要中评估的多个表达式排队。

注意：在 $digest 中，$applyAsync() 仅在当前范围是 $rootScope 时才会刷新。这意味着如果您在子作用域上调用 $digest，它不会隐式刷新 $applyAsync() 队列。

示例：

```
 $scope.$applyAsync(function () {
                if (!authService.authenticated) {
                    return;
                }

                if (vm.file !== null) {
                    loadService.setState(SignWizardStates.SIGN);
                } else {
                    loadService.setState(SignWizardStates.UPLOAD_FILE);
                }
            }); 
```

参考：

1\. [AngularJS 1.3 中的 Scope.$applyAsync() 与 Scope.$evalAsync()](https://www.bennadel.com/blog/2751-scope-applyasync-vs-scope-evalasync-in-angularjs-1-3.htm)

2.  [AngularJs 文档](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$applyAsync)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-01-02T15:26:46.030

我建议您使用自定义事件而不是触发摘要循环。

我发现广播自定义事件并为此事件注册侦听器是触发您希望发生的动作的一个很好的解决方案，无论您是否处于摘要周期中。

通过创建自定义事件，您还可以更高效地使用代码，因为您只触发订阅所述事件的侦听器，而不像调用 scope.$apply 那样触发绑定到范围的所有监视。

```
$scope.$on('customEventName', function (optionalCustomEventArguments) {
   //TODO: Respond to event
});

$scope.$broadcast('customEventName', optionalCustomEventArguments); 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-11-21T13:33:42.697

yearofmoo 在为我们创建可重用的 $safeApply 函数方面做得很好：

> [https://github.com/yearofmoo/AngularJS-Scope.SafeApply](https://github.com/yearofmoo/AngularJS-Scope.SafeApply)

用法 ：

```
//use by itself
$scope.$safeApply();

//tell it which scope to update
$scope.$safeApply($scope);
$scope.$safeApply($anotherScope);

//pass in an update function that gets called when the digest is going on...
$scope.$safeApply(function() {

});

//pass in both a scope and a function
$scope.$safeApply($anotherScope,function() {

});

//call it on the rootScope
$rootScope.$safeApply();
$rootScope.$safeApply($rootScope);
$rootScope.$safeApply($scope);
$rootScope.$safeApply($scope, fn);
$rootScope.$safeApply(fn); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-09-01T21:20:02.743

我已经能够通过调用`$eval`而不是在我知道该函数将运行`$apply`的地方来解决这个问题。`$digest`

根据[文档](http://docs.angularjs.org/guide/scope)，`$apply`基本上是这样做的：

```
function $apply(expr) {
  try {
    return $eval(expr);
  } catch (e) {
    $exceptionHandler(e);
  } finally {
    $root.$digest();
  }
} 
```

在我的情况下， a`ng-click`更改了范围内的变量，并且该变量上的 $watch 更改了其他必须为`$applied`. 最后一步会导致错误“正在消化”。

通过在监视表达式中替换`$apply`，`$eval`范围变量会按预期更新。

因此，如果由于 Angular 中的其他一些变化而仍然要运行摘要，那么*您*`$eval`需要做的就是 'ing。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-05-21T11:27:43.330

`$scope.$$phase || $scope.$apply();`改为使用

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2013-12-31T19:29:23.060

了解到 Angular 文档调用检查`$$phase`反[模式](https://github.com/angular/angular.js/wiki/Anti-Patterns)`$timeout`，我尝试开始`_.defer`工作。

timeout 和 deferred 方法`{{myVar}}`像[FOUT](http://www.paulirish.com/2009/fighting-the-font-face-fout/)一样在 dom 中创建一串未解析的内容。对我来说这是不可接受的。它让我没有太多可以教条地告诉我某些东西是黑客，并且没有合适的替代方案。

唯一每次都有效的是：

`if(scope.$$phase !== '$digest'){ scope.$digest() }`.

我不明白这种方法的危险性，也不明白为什么评论和角度团队中的人将其描述为黑客行为。该命令似乎精确且易于阅读：

> “做摘要，除非已经发生了”

在 CoffeeScript 中它更漂亮：

`scope.$digest() unless scope.$$phase is '$digest'`

这有什么问题？是否有不会创建 FOUT 的替代方案？[$safeApply](https://github.com/yearofmoo/AngularJS-Scope.SafeApply)看起来不错，但也使用了`$$phase`检查方法。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-08-24T05:59:15.053

这是我的实用程序服务：

```
angular.module('myApp', []).service('Utils', function Utils($timeout) {
    var Super = this;

    this.doWhenReady = function(scope, callback, args) {
        if(!scope.$$phase) {
            if (args instanceof Array)
                callback.apply(scope, Array.prototype.slice.call(args))
            else
                callback();
        }
        else {
            $timeout(function() {
                Super.doWhenReady(scope, callback, args);
            }, 250);
        }
    };
}); 
```

这是它的用法示例：

```
angular.module('myApp').controller('MyCtrl', function ($scope, Utils) {
    $scope.foo = function() {
        // some code here . . .
    };

    Utils.doWhenReady($scope, $scope.foo);

    $scope.fooWithParams = function(p1, p2) {
        // some code here . . .
    };

    Utils.doWhenReady($scope, $scope.fooWithParams, ['value1', 'value2']);
}; 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-05-10T14:23:03.373

我一直在使用这种方法，它似乎工作得很好。这只是等待循环完成然后触发`apply()`。只需从您想要的任何地方调用该函数`apply(<your scope>)`。

```
function apply(scope) {
  if (!scope.$$phase && !scope.$root.$$phase) {
    scope.$apply();
    console.log("Scope Apply Done !!");
  } 
  else {
    console.log("Scheduling Apply after 200ms digest cycle already in progress");
    setTimeout(function() {
        apply(scope)
    }, 200);
  }
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-09-02T18:50:58.033

当我禁用 debugger 时，错误不再发生。**就我而言**，这是因为调试器停止了代码执行。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-01-12T20:39:08.413

类似于上面的答案，但这对我来说非常有效......在服务中添加：

```
 //sometimes you need to refresh scope, use this to prevent conflict
    this.applyAsNeeded = function (scope) {
        if (!scope.$$phase) {
            scope.$apply();
        }
    }; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-09-15T10:54:26.230

您可以使用[**`$timeout`**](https://docs.angularjs.org/api/ng/service/$timeout)来防止错误。

```
$timeout(function () {
    var scope = angular.element($("#myController")).scope();
    scope.myMethod(); 
    scope.$scope();
}, 1); 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-09-22T07:05:16.837

问题基本上来了，我们要求有角度来运行摘要循环，即使它正在进行中，这会产生角度理解的问题。控制台中的后果异常。
1\. 在 $timeout 函数内部调用 scope.$apply() 没有任何意义，因为它在内部也是如此。
2\. 代码与 vanilla JavaScript 函数一起使用，因为它的本机不是角度定义的，即 setTimeout
3\. 为此，您可以使用

if(!scope.$$phase){
scope.$evalAsync(function(){

}); }

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-04-10T01:39:01.367

```
 let $timeoutPromise = null;
        $timeout.cancel($timeoutPromise);
        $timeoutPromise = $timeout(() => {
            $scope.$digest();
        }, 0, false); 
```

**这是避免此错误并避免 $apply**的好解决方案

 **如果基于外部事件调用，您可以将其与 debounce(0) 结合使用。以上是我们正在使用的“去抖动”，以及完整的代码示例

```
.factory('debounce', [
    '$timeout',
    function ($timeout) {

        return function (func, wait, apply) {
            // apply default is true for $timeout
            if (apply !== false) {
                apply = true;
            }

            var promise;
            return function () {
                var cntx = this,
                    args = arguments;
                $timeout.cancel(promise);
                promise = $timeout(function () {
                    return func.apply(cntx, args);
                }, wait, apply);
                return promise;
            };
        };
    }
]) 
```

以及代码本身来监听一些事件并**仅在您需要的 $scope 上调用 $digest**

```
 let $timeoutPromise = null;
        let $update = debounce(function () {
            $timeout.cancel($timeoutPromise);
            $timeoutPromise = $timeout(() => {
                $scope.$digest();
            }, 0, false);
        }, 0, false);

        let $unwatchModelChanges = $scope.$root.$on('updatePropertiesInspector', function () {
            $update();
        });

        $scope.$on('$destroy', () => {
            $timeout.cancel($update);
            $timeout.cancel($timeoutPromise);
            $unwatchModelChanges();
        }); 
```

* * *

## 回答 #27

> 赞同：-3
> 
> 时间：2014-04-11T20:00:09.527

发现这个：[https](https://coderwall.com/p/ngisma) : //coderwall.com/p/ngisma 其中 Nathan Walker（靠近页面底部）建议在 $rootScope 中使用装饰器来创建 func 'safeApply'，代码：

```
yourAwesomeModule.config([
  '$provide', function($provide) {
    return $provide.decorator('$rootScope', [
      '$delegate', function($delegate) {
        $delegate.safeApply = function(fn) {
          var phase = $delegate.$$phase;
          if (phase === "$apply" || phase === "$digest") {
            if (fn && typeof fn === 'function') {
              fn();
            }
          } else {
            $delegate.$apply(fn);
          }
        };
        return $delegate;
      }
    ]);
  }
]); 
```

* * *

## 回答 #28

> 赞同：-7
> 
> 时间：2015-02-11T19:10:56.153

这将解决您的问题：

```
if(!$scope.$$phase) {
  //TODO
} 
```**

# angularjs - AngularJS：在 hashchange 上轮询 $resource

> ID：12729125
> 
> 赞同：1
> 
> 时间：2012-10-04T14:07:40.443
> 
> 标签：angularjs

好的，所以我有一个 Angular 模块在页面加载时按预期工作 - 使用类似 site.com#/catalog/1234 的 URL。$resources 在重新加载时获取视图的数据，而不是在 hashchange 时。

我需要添加什么才能让 hashchange 触发新的提取？

```
angular.module('Catalog', ['ngResource'])
.config( function( $routeProvider, $locationProvider ) {
    $routeProvider
        .when( '/catalog/:categoryid', {
            controller: 'CatalogListCtrl',
            templateUrl:'/layout/responsive/html/catalogListView.html'
        })
        .otherwise( { redirectTo:'/' } );
})
.factory( 'CatalogList', function( $resource, $routeParams ) {
    var list = $resource('/test/products.json?query=:categoryid', { categoryid : $routeParams.categoryid },  {
            query: { method: 'GET', isArray : true }
    });
    return list;
})
.controller( 'CatalogListCtrl', function ( $scope, CatalogList ) {
    $scope.products = CatalogList.query();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:49:54.697

会不会是您为服务设置的标准绑定混淆了角度？

我会按照以下方式更改您的代码，也许您可​​以尝试一下。

```
angular.module('Catalog', ['ngResource'])
.config( function( $routeProvider, $locationProvider ) {
    $routeProvider
        .when( '/catalog/:categoryid', {
            controller: 'CatalogListCtrl',
            templateUrl:'/layout/responsive/html/catalogListView.html'
        })
        .otherwise( { redirectTo:'/' } );
})
.factory( 'CatalogList', function( $resource ) {
    return list = $resource('/test/products.json?query=:categoryid', {},  {});
})
.controller( 'CatalogListCtrl', function ( $scope, $routeParams, CatalogList ) {
    $scope.products = CatalogList.query({categoryid: $routeParams.categoryid});
}); 
```

我还删除了一些只重复默认值的代码。让我知道它是否有效。

# c++ - 执行 SQL LOB WRITE APPEND 与轮询（先写，写下一个，最后写）

> ID：12729128
> 
> 赞同：0
> 
> 时间：2012-10-04T14:08:09.917
> 
> 标签：c++, sql, c, oracle, blob

第一次接触 Oracle DB 中的 LOB，偶然发现了一些让我感到困惑的东西。

我必须将**BLOB**插入到要插入表中的行的列中，使用**`Pro*C`**. [文档说](http://bit.ly/O7EiGD)我有两种可能的选择。

1.  如果它适合缓冲区，则一次全部写入 lob，使用`EXEC SQL WRITE` **`ONE`**
2.  如果缓冲区太小，则使用文档中所谓的*polling*零碎地编写 lob，并由以下 3 个步骤组成：

    1.  `EXEC SQL WRITE` **`FIRST`**
    2.  `EXEC SQL WRITE` **`NEXT`**n次
    3.  `EXEC SQL WRITE` **`LAST`**

但是，我发现我可以将文档中描述的*轮询*`EXEC SQL WRITE` **`APPEND`**方法简单地替换为n+2 次，从而使循环更加简单、直观，并且更容易处理错误处理。

所以，不要写这样的东西（取自[文档](http://bit.ly/O7EiGD)）：

```
if (filelen > MAXBUFLEN)
    nbytes = MAXBUFLEN ;
else
    nbytes = filelen ;

fread((void *)buffer, (size_t)nbytes, (size_t)1, fp) ;
remainder = filelen - nbytes ;

if (remainder == 0)
{
   EXEC SQL LOB WRITE ONE :amt
       FROM :buffer INTO :blob AT :offset ;
}
else
{
    EXEC SQL LOB WRITE FIRST :amt
       FROM :buffer INTO :blob AT :offset ;

    last = FALSE ;
    EXEC SQL WHENEVER SQLERROR DO break ;
    do
    {
        if (remainder > MAXBUFLEN)
            nbytes = MAXBUFLEN ;
        else
        {
            nbytes = remainder ;
            last = TRUE ;
        }

        if (fread((void *)buffer, (size_t)nbytes, (size_t)1, fp) != 1)
           last = TRUE ;

        if (last)
        {  
            EXEC SQL LOB WRITE LAST :amt
                FROM :buffer INTO :blob  ;
        }           
        else
        {
            EXEC SQL LOB WRITE NEXT :amt
                FROM :buffer INTO :blob;
        }

        remainder -= nbytes ;
    }
    while (!last && !feof(fp)) ;
} 
```

可以这样写：

```
while ((nbytes = remainder < MAXBUFLEN ? remainder : MAXBUFLEN)) 
{
    if (fread(buffer, nbytes, 1, fp) != 1) {
        /* Handle error somehow */
        break;
    }

    EXEC SQL LOB WRITE APPEND :nbytes 
        FROM :buffer WITH LENGTH :nbytes INTO blob;

    remainder -= nbytes;
} 
```

我彻底测试了第二种方法，**没有注意到任何问题**，所以我想知道：

1.  第二种方法有**什么问题**让我不注意吗？
2.  **如果可以**像第二种方法一样继续进行，那么像[文档](http://bit.ly/O7EiGD)解释的那样，由 3 个步骤组成的轮询机制需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:23:39.577

如果与使用 LBS（LOB 缓冲子系统）的适当缓冲一起使用，可能会有一些优势。甲骨文解释说——

> 缓冲具有以下优点，尤其是对于客户端上对 LOB 的特定区域执行许多小型读取和写入的应用程序：
> 
> 1.  LBS 减少了到服务器的往返行程，因为您使用对 LOB 的多次读取/写入填充缓冲区，然后在执行 FLUSH 指令时写入服务器。
>     
>     
> 2.  缓冲还减少了服务器上的 LOB 更新总数。这可以创建更好的 LOB 性能并节​​省磁盘空间。

滚动到`LOB Buffering Subsystem`链接中的部分以了解更多信息。

# php - MAGENTO：如何从文件中更新 category_ids？

> ID：12729130
> 
> 赞同：1
> 
> 时间：2012-10-04T14:08:13.477
> 
> 标签：php, magento

我有具有以下结构的 csv 文件。我想从此文件更新产品类别路径。我怎么能做到这一点。

```
sku,category_ids
0001,"1,2,3"
0002,"1,2,4" 
```

我使用流动脚本来更新价格

```
 $mageFilename = '../app/Mage.php';
require_once $mageFilename;
Mage::setIsDeveloperMode(true);
ini_set('display_errors', 1);
umask(0);
Mage::app('admin');
Mage::register('isSecureArea', 1);
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

set_time_limit(0);
ini_set('memory_limit','1024M');

/***************** UTILITY FUNCTIONS ********************/
function _getConnection($type = 'core_read'){
    return Mage::getSingleton('core/resource')->getConnection($type);
}

function _getTableName($tableName){
    return Mage::getSingleton('core/resource')->getTableName($tableName);
}

function _getAttributeId($attribute_code = 'category_ids'){
    $connection = _getConnection('core_read');
    $sql = "SELECT attribute_id
                FROM " . _getTableName('eav_attribute') . "
            WHERE
                entity_type_id = ?
                AND attribute_code = ?";
    $entity_type_id = _getEntityTypeId();
    return $connection->fetchOne($sql, array($entity_type_id, $attribute_code));
}

function _getEntityTypeId($entity_type_code = 'catalog_product'){
    $connection = _getConnection('core_read');
    $sql        = "SELECT entity_type_id FROM " . _getTableName('eav_entity_type') . " WHERE entity_type_code = ?";
    return $connection->fetchOne($sql, array($entity_type_code));
}

function _getIdFromSku($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT entity_id FROM " . _getTableName('catalog_product_entity') . " WHERE sku = ?";
    return $connection->fetchOne($sql, array($sku));

}

function _checkIfSkuExists($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT COUNT(*) AS count_no FROM " . _getTableName('catalog_product_entity') . " WHERE sku = ?";
    $count      = $connection->fetchOne($sql, array($sku));
    if($count > 0){
        return true;
    }else{
        return false;
    }
}

function _updatePrices($data){
    $connection     = _getConnection('core_write');
    $sku            = $data[0];
    $newPrice       = $data[1];
    $productId      = _getIdFromSku($sku);
    $attributeId    = _getAttributeId();

    $sql = "UPDATE " . _getTableName('catalog_product_entity_decimal') . " cped
                SET  cped.value = ?
            WHERE  cped.attribute_id = ?
            AND cped.entity_id = ?";
    $connection->query($sql, array($newPrice, $attributeId, $productId));
}
/***************** UTILITY FUNCTIONS ********************/

$csv                = new Varien_File_Csv();
$data               = $csv->getData('prices.csv'); //path to csv
array_shift($data);

$message = '';
$count   = 1;
foreach($data as $_data){
    if(_checkIfSkuExists($_data[0])){
        try{
            _updatePrices($_data);
            $message .= $count . '> Success:: While Updating Price (' . $_data[1] . ') of Sku (' . $_data[0] . '). <br />';

        }catch(Exception $e){
            $message .=  $count .'> Error:: While Upating  Price (' . $_data[1] . ') of Sku (' . $_data[0] . ') => '.$e->getMessage().'<br />';
        }
    }else{
        $message .=  $count .'> Error:: Product with Sku (' . $_data[0] . ') does\'t exist.<br />';
    }
    $count++;
}
echo $message; 
```

我不知道要更新哪个表。此代码中需要更改的内容才能更新 category_ids。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T09:53:42.483

除非您有使用自定义脚本的特定原因，否则您始终可以使用正常的系统 -> 导入/导出 -> 数据流：配置文件 -> 使用您描述的文件导入所有产品。

如果您真的在寻找脚本，我可以为您修改我的答案。

# php - 结合列值中的两个 excel 文件

> ID：12729132
> 
> 赞同：0
> 
> 时间：2012-10-04T14:08:19.170
> 
> 标签：php, excel

我有两张excel表格。我必须根据 excelsheet 1->Org id 与 excelsheet 2->Org id 以及 excelsheet1 的名字和姓氏与 excelsheet2 的全名的映射来合并 Excelsheet 2 中的**每个 id 。**

例如。

**电子表格 1**

每个 id 名字 姓氏 组织 id

Per1 Marquesia Bailey org1

Per2 艾米莉博伊德 org2

Per3 克林特海丝特 org3

Per4 朱莉·科尔曼 org4

Per5 史蒂夫·费斯勒 org1

**电子表格 2**

组织 ID 全名 每个 ID

org1 Marquesia Bailey
org2 Emily Boyd
org4 Julie Coleman
org3 Clint Hester

**输出 Excel 表**

组织 ID 全名 每个 ID

org1 Marquesia Bailey per1

org2 艾米莉·博伊德 per2

org4 朱莉·科尔曼 per4

org3 克林特海丝特 per3

我是新手。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:20:09.103

试着把它放在 Sheet2 的单元格中`C1`并向下拖动。

```
 =Index(Sheet1!A:A,Match(Sheet2!A1,Sheet1!D:D,0)) 
```

这会在 sheet1 的 D 列中查找 Sheet2 的 orgID `A1`。然后使用该行号从 sheet1'a 列 A 返回值以获取 PerID。

# php - 每 2 个回显创建一个新表行

> ID：12729137
> 
> 赞同：0
> 
> 时间：2012-10-04T14:08:24.737
> 
> 标签：php, mysql

每次回显用户时，我都会尝试创建一个新的表格行。这是我尝试过的零成功。

```
<?
$i = 0;
while($row = mysql_fetch_array($admin, MYSQL_ASSOC)){
    if($i <= 2){
        $i++;
    echo "<tr><td>".$row['id']."</td><td>".$row['ip']."</td><td>".$row['username']."</td><td>".$row['password']."</td><td><img src='uploads/avatars/".$row['avatar']."' style='width:25px;height:25px;' />";
        }
    else{
echo "<td>".$row['id']."</td><td>".$row['ip']."</td><td>".$row['username']."</td><td>".$row['password']."</td><td><img src='uploads/avatars/".$row['avatar']."' style='width:25px;height:25px;' /></td></tr>"
$i=0;
        }

    }
?> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:19:04.290

这应该有效：

```
<?
$i = 0;

echo "<table><tr>";

while($row = mysql_fetch_array($admin, MYSQL_ASSOC)) {
    if($i++ % 2 == 0 && $i > 1) {
        echo "</tr><tr>";
    }

    echo "<td>".$row['id']."</td><td>".$row['ip']."</td><td>".$row['username']."</td><td>".$row['password']."</td><td><img src='uploads/avatars/".$row['avatar']."' style='width:25px;height:25px;' /></td>"
}

echo "</tr></table>"; 
```

# c++ - Convert double to string with more than 5 decimal digit precision

> ID：12729138
> 
> 赞同：0
> 
> 时间：2012-10-04T14:08:25.127
> 
> 标签：c++, string, double, type-conversion, precision

At first I used boost's `lexical_cast` to do this. But due to the way C++ represents doubles/floats, when I converted `5.1` to a string it would give me `5.0999999` or something to that extent. So, I converted it this way:

```
stringstream ss;
ss << 3.14159265359;
cout << ss.str(); 
```

But this would only give me `3.14159`, and I would like more precision than that. I think I saw something about `printf()` being able to do this, but I am actually working on a Windows GUI program, not outputting to a console. How can I get more than 5 decimal digits of precision? I am willing to settle for 8, but 10 or 11 would be nice. Is this too much to ask for given how C++ represents floats and doubles?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:12:39.763

```
ss << setprecision(12) << 3.14159265359; 
```

Also, the choice between using streams and the C `printf`/`scanf` family has nothing to do with GUI vs. console. The C equivalent of `ostringstream` is `sprintf`.

# java - 将 int 数组的内容复制到 Java 中的双精度数组？

> ID：12729139
> 
> 赞同：11
> 
> 时间：2012-10-04T14:08:36.360
> 
> 标签：java, arrays, casting, double

我正在尝试将我的 int 数组的内容复制到 double 类型的数组中。我必须先施放它们吗？

我成功地将一个 int 类型的数组复制到另一个 int 类型的数组。但是现在我想编写将内容从数组复制`A`到数组`Y`（int 到 double）的代码。

这是我的代码：

```
public class CopyingArraysEtc {

    public void copyArrayAtoB() {
        double[] x = {10.1,33,21,9},y = null;
        int[] a = {23,31,11,9}, b = new int[4], c;

        System.arraycopy(a, 0, b, 0, a.length);

        for (int i = 0; i < b.length; i++)
        {
            System.out.println(b[i]);
        }

    }          

    public static void main(String[] args) {
        //copy contents of Array A to array B
        new CopyingArraysEtc().copyArrayAtoB();
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-03-06T22:15:39.897

值得一提的是，在当今时代，Java 8 提供了一种优雅的单线器来完成此任务，而无需使用第三方库：

```
int[] ints = {23, 31, 11, 9};
double[] doubles = Arrays.stream(ints).asDoubleStream().toArray(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T14:31:49.247

`System.arraycopy()`无法复制`int[]`到`double[]`

如何使用谷歌番石榴：

```
int[] a = {23,31,11,9};

//copy int[] to double[]
double[] y=Doubles.toArray(Ints.asList(a)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-04T14:18:48.440

您可以遍历源的每个元素并将它们添加到目标数组。您不需要从`int`to的显式转换，`double`因为`double`它更宽。

```
int[] ints = {1, 2, 3, 4};
double[] doubles = new double[ints.length];
for(int i=0; i<ints.length; i++) {
    doubles[i] = ints[i];
} 
```

您可以制作这样的实用方法 -

```
public static double[] copyFromIntArray(int[] source) {
    double[] dest = new double[source.length];
    for(int i=0; i<source.length; i++) {
        dest[i] = source[i];
    }
    return dest;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-04T14:27:06.350

来自[System.arraycopy JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)

> [...] 否则，如果以下任一情况为真，则会引发**ArrayStoreException**并且不会修改目标：
> 
> *...
> 
> *...
> 
> * src 参数和 dest 参数是指组件类型为**不同原始类型**的数组。[...]

由于`int`和`double`是不同的原始类型，您将不得不手动遍历一个数组并将其内容复制到另一个数组。

# matlab - 使用 Matlab（或任何其他软件）将 ascii .dat 文件转换为 .xml

> ID：12729142
> 
> 赞同：0
> 
> 时间：2012-10-04T14:08:54.667
> 
> 标签：matlab

我有一组扩展名为 .dat 的 ascii 文件，我需要将它们转换为一组 .xml 文件。

无论如何用Matlab或任何其他软件来做到这一点。

这是我需要转换的文件之一：

[https://docs.google.com/open?id=0B1GI9KuZUKX3TDFCZDVTbzdINUE](https://docs.google.com/open?id=0B1GI9KuZUKX3TDFCZDVTbzdINUE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T19:33:29.670

我过去使用过[XML4MAT](http://www.mathworks.com/matlabcentral/fileexchange/6268-xml4mat-v2-0)。它将处理进出 XML 格式的数据转换，但并不能完全处理实际读取和写入 XML 文件，因此您必须添加一些胶水代码。顺序是：

1.  将 dat 文件读入 MATLAB 中的一个变量（这里我使用变量名 Data）。看起来您的文件本质上是一个数字表，所以这很容易。
2.  使用 DumpToXML.m 和 LoadFromXML.m 作为您将单独下载的 XML4MAT 包的粘合代码。

    ```
    % function DumpToXML(XMLFileName, Data)
    function DumpToXML(XMLFileName, Data)

        % Generate the text of the XML file.
        XMLData = ['<root>' 10];
        XMLData = [XMLData mat2xml(Data, 'Data', 1)];
        XMLData = [XMLData '</root>' 0];

        % Now output the data.
        fid = fopen(XMLFileName, 'w');
        fprintf(fid, '%s', XMLData);
        fclose(fid);
    end

    % function LoadFromXML(XMLFileName)
    function Data = LoadFromXML(XMLFileName)

        % Open the XML file.
        fid = fopen(XMLFileName, 'r');
        if(fid <= 0)
            error(['Cannot open XML file ' XMLFileName]);
        end
        XMLData = fscanf(fid, '%c', inf);
        fclose(fid);

        % Now get the Data tag.
        DataStartIndex = findstr(XMLData, '<Data');
        % Now find the end.
        DataEndIndex = findstr(XMLData, '</Data>');

        % Extract the strings for this two variable from the string
        % containing the loaded XML file.
        XMLData = XMLData(DataStartIndex:DataEndIndex+6);

        % And turn it back into a variable.
        Data = xml2mat(XMLData);
    end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:24:54.947

我不认为 Matlab 是首选的武器。

我提倡使用 Python，因为有很好的 XML 包，例如 lxml。您应该能够使用 open() 和 readlines() 轻松解析 dat 文件。

# svn - 让我的更改与 svn base 相关联的简单方法

> ID：12729145
> 
> 赞同：0
> 
> 时间：2012-10-04T14:08:57.837
> 
> 标签：svn

我的本地工作区中有几个文件。当我对这些文件运行命令时`svn status`，我会遇到这些文件。现在我对这些文件进行了更改。我想从 svn 存储库中获取这些文件的最新版本，并将我的更改合并到这些文件中。有人可以告诉我什么是最简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:00:03.487

您是否从 Subversion 存储库中签出？您所要做的就是*更新*和*提交*。

这会将您的更改放回服务器上。

# uitableview - UIButton 没有收到 UIScrollView 后面的操作

> ID：12729146
> 
> 赞同：5
> 
> 时间：2012-10-04T14:09:00.397
> 
> 标签：uitableview, uiscrollview, uibutton, uiresponder, touch-up-inside

我把`UIButton`里面`UITableViewCell`放在`UITableView`那个后面`UIScrollView`。我将前向接触细分`UIScrollView`为`UITableView`.

所以方法 from`UITableViewDelegate didSelectRow`正在正确调用。问题是`UIButton`表格单元格内部没有接收`TouchUpInside`操作。

如何在不删除`ScrollView`的情况下解决此问题`TableView`？

编辑：

我通过检测哪个视图将接收触摸解决了这个问题。这是代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UIView *hitView = [self hitTest:[(UITouch*)[[touches allObjects] objectAtIndex:0] locationInView:self] withEvent:event];
    if ([hitView isKindOfClass:[UIButton class]]) {
        [(UIButton*)hitView sendActionsForControlEvents:UIControlEventTouchUpInside];
    }
    [super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:00:19.290

如果您想为 bouth 对象启用操作 - UIScrollView 和 UIButton 您应该为 ScrollView 实现自定义命中测试机制。

在您的 UIScrollView 子类覆盖 - (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event 方法以使 ScrollView 后面的视图可用于获取事件。

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    return __touchesEnabled;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    _touchesEnabled = NO;
    UIWindow *window = [UIApplication sharedApplication].delegate.window;
    for(UITouch *touch in touches) {
       CGPoint point = [touch locationInView:self];
       point = [window convertPoint:point fromView:self];
       UIView *view = [window hitTest:point withEvent:event];
       [view touchesBegan:touches withEvent:event];
    }  
    _touchesEnabled = YES;
} 
```

这个对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:07:01.500

由于您已经在 UIButton 上添加了滚动视图，因此所有触摸操作都不会传递给按钮。

```
 [yourScrollView setUserInteractionEnabled:NO]; 
```

这可能会解决您的问题。

# c# - 常量枚举中的循环定义

> ID：12729147
> 
> 赞同：17
> 
> 时间：2012-10-04T14:09:02.147
> 
> 标签：c#

我正在尝试创建一个类型的常量，`Enum`但出现错误。我的枚举是：

```
public enum ActivityStatus
{
    Open = 1,
    Close = 2
} 
```

我有一个使用它的模型：

```
public class CreateActivity
{
    public int Id;
    public const ActivityStatus ActivityStatus = ActivityStatus.Open;
} 
```

出现以下错误：

> 错误 1 ​​'Help_Desk.Models.CreateActivity.ActivityStatus' 的常量值的评估涉及循环定义......

但是，如果我更改`ActivityStatus`属性的名称，它会起作用！

```
public class CreateActivity
{
    public int Id;
    public const ActivityStatus AnyOtherName = ActivityStatus.Open;
} 
```

为什么会发生？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T14:12:56.727

因为 c# 编译器将第三个解释`ActivityStatus`为：

```
public const ActivityStatus ActivityStatus = ActivityStatus.Open; 
```

作为被定义的常量的名称而不是枚举的名称 - 因此是循环引用：您正在根据常量本身定义一个常量。

在 C# 中，您可以为成员和类型使用相同的名称，并且通常通过指定完全限定名称来解决歧义（即添加命名空间），但根据我的经验，这不是一个好主意，它会使代码混乱：编译器可以弄清楚就是这样，但是阅读代码的可怜的人很难弄清楚某个名称是否指的是类、类型或成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:13:41.650

您不应创建与类或枚举具有相同名称的变量。

如果您指定命名空间，它可能会起作用，例如：

```
public class CreateActivity
{
    public int Id;
    public const TheNamespace.ActivityStatus ActivityStatus =
        TheNamespace.ActivityStatus.ActivityStatus.Open;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T13:14:47.370

如果仅供私人使用：您可以将 ActivityStatus 更改为只读字段并将默认值的设置移动到构造函数。

如果公开使用：您只能将属性与 getter 一起使用。

在大多数代码分析器中，额外的命名空间将被视为代码中的冗余。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T12:25:52.363

为了避免 C# 中的循环定义问题，您可以使用完整的限定名称引用/调用变量/类型/成员等

```
Namespace..Member/Type/ etc 
```

希望您现在可以修复错误。

# django - 单一美味派资源中的多个模型

> ID：12729150
> 
> 赞同：1
> 
> 时间：2012-10-04T14:09:10.437
> 
> 标签：django, tastypie

我想制作一个从两个不同模型返回公共字段的美味资源。

我有这样描述的模型：

```
Class Invoice(models.Model):
    transaction_batch = models.ForeignKey(TransactionBatch)
    invoice_number = models.IntegerField()
    subtotal = models.DecimalField(max_digits=20, decimal_places=2)
    tax = models.DecimalField(max_digits=20, decimal_places=2)
    total = models.DecimalField(max_digits=20, decimal_places=2)
    location = models.ForeignKey(Delivery_location)
    date_time = models.DateTimeField()

Class Payment(models.Model):
    transaction_batch = models.ForeignKey(TransactionBatch)
    location = models.ForeignKey(Delivery_location)
    payment_id = models.IntegerField(pk=True)
    datetime = models.DateTimeField()
    amount = models.DecimalField(max_digits=20, decimal_places=2)
    payment_method = models.IntegerField(choices = PAYMENT_METHOD_CHOICES) 
```

并希望制作具有以下字段的资源：

```
Class TransactionResource(Resource):
    type = fields.CharField() #"invoice" or "payment"
    id = fields.CharField(attribute='name') #invoice_number or payment_id
    location = fields.ForeignKey(LocationResource)
    total = fields.IntegerField(attribute='total', null=True) #total or amount
    datetime = fields.DateField() 
```

由于字段名称不直接匹配，我需要一种将模型字段映射到资源字段的方法。例如，资源 ID 字段将为 Invoices 的 invoice_number 和 Payments 的 payment_id。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:58:05.877

如果您不想从 ModelResource 继承，可以使用 dehydrate 方法添加其他值：

```
class TransactionResource(Resource):
    type = fields.CharField() #"invoice" or "payment"
    id = fields.CharField(attribute='name') #invoice_number or payment_id
    location = fields.ForeignKey(LocationResource)
    total = fields.IntegerField(attribute='total', null=True) #total or amount
    datetime = fields.DateField()

    # Add values in dehydrate
    def dehydrate(self, bundle):
        bundle.data['some_invoide_value'] = invoice.value
        bundle.data['some_payment_value'] = payment.value
        return super(TransactionResource, self).dehydrate(bundle) 
```

# shell - 如何将批处理（CALL）命令的输出存储到变量中

> ID：12729151
> 
> 赞同：2
> 
> 时间：2012-10-04T14:09:12.383
> 
> 标签：shell, batch-file, command, command-prompt

我有批处理文件，其中包含调用`second.bat`文件的命令。它调用时会产生单行输出。我想将该行存储到变量中。

```
CALL second.bat 
```

我尝试过使用以下几行命令，但没有用

```
FOR /F "tokens=* USEBACKQ" %%F IN ('COMMAND') do SET result=%%F
FOR /F "tokens=1 delims= " %%A IN ('COMMAND') DO SET NumDocs=%%A 
```

我不知道用什么代替`COMMAND`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:12:49.210

正如帮助将告诉您的那样，`COMMAND`应该是您要运行并获取输出的命令。所以在你的情况下`second.bat`。至少它对我有用：

```
@echo off
FOR /F "tokens=*" %%F IN ('second.bat') do SET result=%%F
echo %result% 
```

`usebackq`请注意，如果您`'`用于分隔命令，则不能使用该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-18T22:36:39.007

**tl;博士**

用两个命令的固定版本来补充[Joey 的有用答案](https://stackoverflow.com/a/12729241/45375)（它解决了您的*第一个*命令的问题）：

```
::  'usebackq' requires enclosing the command in `...` (back quotes aka backticks)
FOR /F "tokens=* usebackq" %%F IN (`second.bat`) do SET result=%%F

:: No characters must follow "delims="; 'tokens=1' is redundant
FOR /F "delims="           %%F IN ('second.bat') DO SET result=%%F 
```

请注意，在这种情况下，不需要`call`调用`second.bat`（通常需要调用批处理文件来继续执行调用的批处理文件），因为内部的任何命令`(...)`都在*子* `cmd.exe`进程中运行。

* * *

*使您的第二个*命令起作用的唯一需要是*删除之后的空格`delims=`*：

```
FOR /F "tokens=1 delims=" %%F IN ('second.bat') DO SET result=%%F 
```

**`delims=`**- 即，*不*指定分隔符（分隔符） -**必须放在选项 string*的最末尾***，因为下一个字符总是被解释为分隔符，这就是您的情况发生的情况：*空格*成为分隔符。

此外，您可以通过删除来*简化*`tokens=1`命令，因为**根据*定义*`delims=`，您只能获得 1 个标记（每行）***，即整个输入（行），原样：*

 *```
FOR /F "delims=" %%F IN ('second.bat') DO SET result=%%F 
```

最后，值得注意的是**和****之间存在细微差别`tokens=*``delims=`**：

*   `delims=`（在选项字符串的最后）*按原样*返回输入/每个输入行。

*   `tokens=*` *从输入*中去除前导分隔符实例；*使用默认的分隔符集 - 制表符和空格 -*前导空白*被修剪。**

# html - Docbook XSL – HTML 自定义层 – 部分标题到标题

> ID：12729153
> 
> 赞同：2
> 
> 时间：2012-10-04T14:09:18.563
> 
> 标签：html, xslt, docbook

我正在尝试自定义 DocBook XSL 的 HTML 输出。

`<section>`级别 X 生成标题级别 X + 1。

例如`<sect1>`->`<h2>`但我使用`<section>`标签，而不是`<sectX>`. 我理解它发生的原因，但我想改变这种行为，以便给定级别的部分生成相同的级别标题。我尝试研究标题页模板，但它们对我来说并没有什么意义，而且我找不到生成`<hX>`标签的实际代码。

例如，我有一个看起来像这样的 docbook 文档：

```
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
[other namespace definitions]
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://docbook.org/ns/docbook docbook.xsd" version="5.0">
  <info>
    <title>Document Title</title>
    <orgname>Company</orgname>
  </info>
  <section>
    <title>INTRODUCTION</title>
    <section>
      <title>Overview</title>
      <para>This document defines [...]</para>
    </section>
    <section>
      <title>More Information</title>
      <para>[...]</para>
    </section>
    <section>
      <title>Aim</title>
      <para>This Document will be used to [...]</para>
      <table>
        [irrelevant table code]
      </table>
    </section>
    <section>
      <title>Related Documents</title>
      <para>[...]</para>
    </section>
  </section>
  <section>
    <title>ANOTHER SECTION</title>
    <para>This section provides [...]</para>
  </section>
</article> 
```

这会生成以下 HTML 代码：

```
 <html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Document Title</title>
  <meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1">
  <link rel="stylesheet" href="style.css" type="text/css">
  <link rel="stylesheet" href="print.css" type="text/css" media="print">
  <!--[if IE]>
          <link type="text/css" rel="stylesheet" href="ie.css">
          <![endif]-->
  </head>
  <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="article" title="Document Title">
    <div class="titlepage">
      <div>
        <div>
          <h1 class="title"><a name="d0e1"></a>Document Title</h1>
        </div>
      </div>
      <hr>
    </div>
    <div class="toc">
      <p>
        <b>Table of Contents</b>
      </p>
      <dl>
        <dt><span class="section"><a href="#d0e7">INTRODUCTION</a></span></dt>
        <dd>
        <dl>
          <dt><span class="section"><a href="#d0e10">Overview</a></span></dt>
          <dt><span class="section"><a href="#d0e15">More Information</a></span></dt>
          <dt><span class="section"><a href="#d0e20">Aim</a></span></dt>
          <dt><span class="section"><a href="#d0e48">Related Documents</a></span></dt>
        </dl>
        </dd>
        <dt><span class="section"><a href="#d0e53">ANOTHER SECTION</a></span></dt>
      </dl>
    </div>
    <div class="section" title="INTRODUCTION">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a name="d0e7"></a>INTRODUCTION</h2>
          </div>
        </div>
      </div>
      <div class="section" title="Overview">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a name="d0e10"></a>Overview</h3>
            </div>
          </div>
        </div>
        <p>
          This document defines [...]
        </p>
      </div>
      <div class="section" title="More Information">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a name="d0e15"></a>More Information</h3>
            </div>
          </div>
        </div>
        <p>
          [...]
        </p>
      </div>
      <div class="section" title="Aim">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a name="d0e20"></a>Aim</h3>
            </div>
          </div>
        </div>
        <p>
          This Document will be used to [...]
        </p>
        <div class="table">
          [irrelevant table code]
        </div>
        <br class="table-break">
      </div>
      <div class="section" title="Related Documents">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a name="d0e48"></a>Related Documents</h3>
            </div>
          </div>
        </div>
        <p>
          [...]
        </p>
      </div>
    </div>
    <div class="section" title="ANOTHER SECTION">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a name="d0e53"></a>ANOTHER SECTION</h2>
          </div>
        </div>
      </div>
      <p>
        This section provides [...]
      </p>
    </div>
  </div>
  </body>
  </html> 
```

谢谢！

~斯兰皮斯科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:54:45.507

在 section.xsl 中创建名为“section.heading”的模板的自**定义**。以下是该模板的摘录。您只需更改`$level + 1`为`$level`.

```
<!-- HTML H level is one higher than section level -->
<xsl:variable name="hlevel">
  <xsl:choose>
    <!-- highest valid HTML H level is H6; so anything nested deeper
         than 5 levels down just becomes H6 -->
    <xsl:when test="$level &gt; 5">6</xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$level + 1"/>   
    </xsl:otherwise>
  </xsl:choose>
</xsl:variable>
<xsl:element name="h{$hlevel}">
  <xsl:attribute name="class"><xsl:value-of select="$class"/></xsl:attribute>
  <xsl:if test="$css.decoration != '0'">
    <xsl:if test="$hlevel&lt;3">
      <xsl:attribute name="style">clear: both</xsl:attribute>
    </xsl:if>
  </xsl:if>
  <xsl:if test="$allow-anchors != 0 and $generate.id.attributes = 0">
    <xsl:call-template name="anchor">
      <xsl:with-param name="node" select="$section"/>
      <xsl:with-param name="conditional" select="0"/>
    </xsl:call-template>
  </xsl:if>
  <xsl:if test="$generate.id.attributes != 0 and not(local-name(.) = 'appendix')">
    <xsl:attribute name="id"><xsl:value-of select="$id"/></xsl:attribute>
  </xsl:if>
  <xsl:copy-of select="$title"/>
</xsl:element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:43:19.490

从输出中可以看出，（HTML）文档标题带有`<h1>`标签。因此顶部 (HTML) 部分的标题以`<h2>`. 如果要更改它，则需要自定义 XSL 文件。

# c# - vs2010 在 reference.cs 中创建额外服务合同（附加“1”）的问题

> ID：12729157
> 
> 赞同：0
> 
> 时间：2012-10-04T14:09:28.290
> 
> 标签：c#, visual-studio-2010, service-reference

编译到我的解决方案时出现错误：

> 无法将类型“MGApplicationModel.OrderProcessingService.OrderDetailSXe[]”隐式转换为“MGApplicationModel.OrderProcessingService.OrderDetailSXe1[]”

两者都`MGApplicationModel.OrderProcessingService.OrderDetailSXe[]`出现`'MGApplicationModel.OrderProcessingService.OrderDetailSXe1[]`在`reference.cs`文件中，但只`'MGApplicationModel.OrderProcessingService.OrderDetailSXe[]`应该出现。

任何人都知道为什么每当我更新它会创建的服务引用时`'MGApplicationModel.OrderProcessingService.OrderDetailSXe1[]`？`'MGApplicationModel.OrderProcessingService.OrderDetailSXe1[]`除了 之外，解决方案中没有任何地方`reference.cs`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:14:50.790

参考是你的`proxy class`，你的代理是从你的`WSDL`，所以你可以调整你`WSDL`的定义

# java - 自定义 Zk 组合框

> ID：12729159
> 
> 赞同：0
> 
> 时间：2012-10-04T14:09:33.127
> 
> 标签：java, zk

如中所示：

[http://www.zkoss.org/zkdemo/combobox/simple_combobox](http://www.zkoss.org/zkdemo/combobox/simple_combobox)

选择该项目时，仅显示文本。选择项目时如何使图像+名称出现？

我需要覆盖 Combobox 中的哪个方法？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:40:49.570

没有内置的方法可以让你做这样的事情。因为 a`Combobox`只是一个带有可自定义下拉列表的文本框。

但这很容易做到。您可以`Image`在组合框的左侧添加一个，然后监听组合框 `Events.ON_SELECT`事件。然后`Image`根据所选项目更新。

这是一个示例代码（假设使用`SelectorComposer`）

```
@Listen("onSelect = combobox#mycmb")
public void onComboboxSelected(SelectEvent event) {
  Set<MyObject> selectedObjects = event.getSelectedObjects();
  MyObject obj = selectedObjects.get(0);

  image.setSrc(getImagePath(obj));  // image are Image component you wired.
} 
```

*注意：我没有测试代码，但你应该明白*

# excel - 如何根据单元格值启用按钮

> ID：12729162
> 
> 赞同：0
> 
> 时间：2012-10-04T14:09:41.713
> 
> 标签：excel, vba

我有问题。如何根据单元格值启用/禁用按钮。

在 excel 表中，我有 2 个按钮。

我需要做的是。

如果列“L”有数据

一键启用

别的

“BQ”有数据

需要启用另一个按钮。其他按钮将被禁用。

如何实现它。

请帮助....提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:37:28.713

我一直在等待你的答复，如果两者都填满了会发生什么。我在代码中添加了该选项。修改它以满足您的需要。

试试这个

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    CommandButton1.Enabled = False: CommandButton2.Enabled = False

    '~~> If both cols are filled up
    If Application.WorksheetFunction.CountA(Columns(12)) > 0 And _
    Application.WorksheetFunction.CountA(Columns(69)) > 0 Then
        '~~> Change the message as applicable
        MsgBox "Both Columns Cannot have data", vbInformation, "Error"
    Else
        '~~> If Col L is filled up
        If Application.WorksheetFunction.CountA(Columns(12)) > 0 _
        Then CommandButton1.Enabled = True

        '~~> If Col BQ is filled up
        If Application.WorksheetFunction.CountA(Columns(69)) > 0 _
        Then CommandButton2.Enabled = True
    End If
LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:26:53.910

将 CommandButton1 和 CommandButton2 替换为您的按钮名称。

```
Private Sub Worksheet_Change(ByVal Target As Range)

    If Application.WorksheetFunction.CountA(Range("L:L")) > 0 Then
        CommandButton1.Enabled = True
    Else
        CommandButton1.Enabled = False
    End If

    If Application.WorksheetFunction.CountA(Range("BQ:BQ")) > 0 Then
        CommandButton1.Enabled = False
        CommandButton2.Enabled = True
    Else
        CommandButton1.Enabled = True
    CommandButton2.Enabled = False
End If

End Sub 
```

# c# - 在这种情况下缓存一个好主意，如果是这样

> ID：12729166
> 
> 赞同：0
> 
> 时间：2012-10-04T14:09:48.987
> 
> 标签：c#, asp.net, caching, sql-server-2008-r2

我正在使用带有 sql server 2008 r2 的 asp.net

我正在建立一个网站，用户可以在其中根据数据库中的信息运行报告。对于其中一份报告，我有大约 6 个复选框列表，它们根据数据库中的信息动态加载，然后用户可以选择某些框来缩小报告中包含的信息范围。

填充这些复选框列表的数据不会更新，而是每隔几天更新一次。现在，我在每个复选框列表的初始化控件事件中加载了复选框。每次我选择一个不同的选项卡然后返回到包含这些复选框列表的选项卡时，它似乎每次都会重新加载复选框列表，这很慢并且大约需要 6-10 秒。

我是缓存新手，这是否有助于缓存加载到复选框列表中的数据，以便站点不需要执行连续加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:14:47.490

是的，在这种情况下，缓存会有所帮助。

您可以在此处阅读有关缓存应用程序数据的更多信息：http: [//msdn.microsoft.com/en-us/library/6hbbsfk6 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6hbbsfk6(v=vs.100).aspx)

您可以在数据访问层缓存，然后您的逻辑将是：

*   获取复选框数据
    *   检查数据是否存储在缓存中
        *   如果是，请退回
        *   如果没有，请访问数据库，将结果存储在缓存中，然后返回。

有关如何添加到缓存和从缓存中读取的具体信息，请参见上面的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:12:52.607

是的 如果您的复选框通过 Ajax 加载数据，那么您可能应该使用 ASP.NET 输出缓存功能。

如果您在服务器上呈现它们 - 您可以将数据存储在某个 DataObject（单个对象或某个对象的静态字段）中，以便您的服务器服务的所有请求都可以使用它。

您可以将此功能包装在一个单例对象中，在初始化时从数据库加载数据，然后在每次获取数据时检查是否应该重新加载（并在需要时重新加载）

# objective-c - 将 XML 输入自定义对象？

> ID：12729168
> 
> 赞同：1
> 
> 时间：2012-10-04T14:09:51.717
> 
> 标签：objective-c, xml, nsxmlparser

我有一些从 Web 查询返回的 XML，多个参数包含在一个标签内，如下所示：

```
<game>
    <name>First game title</name>
    <id>12345</id>
    <desc>A game..</desc>
</game>
<game>
    <name>Second game title</name>
    <id>67890</id>
    <desc>Another game..</desc>
</game> 
```

我`NSXMLParser`用来解析它，它在我对它们进行 NSLog 时将每一行一一吐出到我的控制台中。我正在尝试将每个对象`<game>`输入到我的一个`Game`对象中，名称为 NSString，ID 为 NSNumber 等。但是，我正在努力弄清楚如何告诉它开始一个新对象，因为`<game>`标签在我的任何 NSLog 语句中都没有返回，只有具有实际数据的语句（例如每个名称、id 等）才返回

如果我想将每个`<game> </game>`标签中的所有数据放入一个单独的对象中，我该怎么做？这是解析器代码：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    element = [NSMutableString string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    NSLog(@"ELEMENT TYPE: %@ VALUE: %@", elementName, element); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:53:27.437

首先让自己成为一个游戏类。我们将把 XML 解析为 Games 对象。

Game.h 像这样：

```
@interface Game : NSObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSNumber *gameID;
@property (nonatomic, retain) NSString *gameDescription;

@end 
```

现在在你解析 XML 的类中（在这个例子中是 ViewController），创建一个 NSMutableArray 属性来存储我们解析的 Game 对象，一个 Game 属性，用于我们创建新的 Game 对象，一个 NSString 属性来存储当前我们在 XML 中解析的元素，以及我们正在使用的 NSXMLParser 实例的属性。还要确保它符合 NSXMLParserDelegate 协议。

所以头文件ViewController.h：

```
@interface ViewController : UIViewController <NSXMLParserDelegate>

@property (nonatomic, retain) NSString *currentElement;
@property (nonatomic, retain) NSMutableArray *games;
@property (nonatomic, retain) Game *gameBeingParsed;
@property (nonatomic, retain) NSXMLParser *xmlParser;

@end 
```

现在在实现 ViewController.m 中，我们解析 XML：

```
#import "ViewController.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Make an NSMutableArray to put the parsed Game objects in
    self.games = [NSMutableArray array];

    // Get the XML data to parse
    // We need it in an NSdata object
    NSString *xmlString = @"<?xml version=\"1.0\" encoding=\"utf-8\"?><xml><game><name>First game title</name><id>12345</id><desc>A game..</desc></game><game><name>Second game title</name><id>67890</id><desc>Another game..</desc></game></xml>";
    NSData *xmlData = [xmlString dataUsingEncoding:NSStringEncodingConversionAllowLossy];

    // Set up an NSXMLParser to use
    // Set the delegate and start parsing!
    self.xmlParser = [[[NSXMLParser alloc] initWithData:xmlData] autorelease];
    _xmlParser.delegate = self;
    [_xmlParser parse];

}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {

    // If we have a <game> tag then we are starting to parse a new Game object
    if ([elementName isEqualToString:@"game"]) {
        self.gameBeingParsed = [[[Game alloc] init] autorelease];
    }

    // If not then we need to keep track of the element name so we know which property to set on the Game object
    else {
        self.currentElement = elementName;
    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    // If we have a closing </game> tag we are done parsing a Game so add it to the array
    if ([elementName isEqualToString:@"game"]) {
        [_games addObject:_gameBeingParsed];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    // Work out which element we have the characters for
    // Then set the property of the Game object
    if ([_currentElement isEqualToString:@"name"]){
        _gameBeingParsed.name = string;
    }
    if ([_currentElement isEqualToString:@"id"]){
        _gameBeingParsed.gameID = [NSNumber numberWithInt:[string intValue]];
    }
    if ([_currentElement isEqualToString:@"name"]){
        _gameBeingParsed.gameDescription = string;
    }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser{

    // We are done parsing XML
    NSLog(@"Parsed %d Games", _games.count);
    for (Game *game in _games) {
        NSLog(@"%@ : %@ : %@", game.name, game.gameID, game.gameDescription);
    }
} 
```

解析完成后，我们在 parserDidEndDocument 中得到一个回调：此时 _games 属性将填充我们的 Games 实例。

# css - 如何在保持垂直位置的同时使 div 与父级的右侧对齐？

> ID：12729170
> 
> 赞同：31
> 
> 时间：2012-10-04T14:09:59.930
> 
> 标签：css, positioning, vertical-alignment

请参考我画的这张方便的图表：

[![在此处输入图像描述](../Images/fd9a0eb26ee64fcd528d3532ba388386.png)](https://i.stack.imgur.com/yaDMz.png)

`div1`的身高不详。`div3`的宽度是流动的；它不应该重叠`div2`。两者`div1`和`div2`具有相同的宽度并通过 水平居中`margin: auto`。在与共享垂直位置的同时，如何定位`div3`以使其与（无论多宽）的**右侧`body`**对齐？（使用 CSS）`body``div2`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-04T14:35:25.853

```
.div1{
    margin:0 auto;
    width:100px;
    height:50px;
    border:5px solid #995555;
}
.div2{
    width:100px;
    margin:0 auto;
    border:5px solid #aaaa55;
    height:200px;
}
.div3{
    float:right;
    width:50px;
    height:100px;
    border:5px solid cyan;
}
```

```
<div class="div1">div1</div>
<div class="div3">div3</div>
<div class="div2">div2</div>
```

演示也在[http://jsfiddle.net/XjC9z/1/](http://jsfiddle.net/XjC9z/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T14:20:16.193

像这样？

HTML：

```
<div id='container'>
    <div id='first'>1</div>
    <div id='second'>2</div>
    <div id='third'>3</div>
</div>​ 
```

CSS：

```
#container{
    width: 100px;
    margin:0 auto;
}

#first{
    border: 1px solid #ff55ff;
}
#second{
    border: 1px solid #55ff77;
}

#third{
    border: 1px solid #448855;
}
#first,
#second{
    width: 50px;
    clear:both;

    float:left;
}

#third{
    clear:none;
    float: left;
} 
```

​</p>

看到这个小提琴：http: [//jsfiddle.net/zaNvR/1/](http://jsfiddle.net/zaNvR/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:16:39.993

一个简单的 div 网格就可以解决问题：

[http://jsfiddle.net/NUGPv/](http://jsfiddle.net/NUGPv/)

```
<div class="con">
    <div class="lft">div 1</div>
    <div class="rgt"></div>
</div>
<div>
    <div class="lft">div 2</div>
    <div class="rgt">div 3</div>    
</div>​

.con { overflow:hidden; }
.lft { width:100px; height:100px; float:left; }
.rgt { width:100px; height:100px; float:left; } 
```

只需将右上角的单元格留空即可。

# eclipse - 在 config.ini 文件中定义更新站点

> ID：12729172
> 
> 赞同：7
> 
> 时间：2012-10-04T14:10:03.347
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, p2, eclipse-3.6

我正在为我们的项目创建一个基于 Eclipse 3.6.2 的产品。我们的想法是创建一个 Eclipse 安装，其中包含我们需要的所有插件，并且所有配置都已设置好，因为我们需要它们用于项目。

作为其中的一部分，我想确保包含我们的更新站点，但我该怎么做呢？

如果我选择导出首选项更新站点不包括在内。我可以从首选项页面导出更新站点并获得一个 XML 文件，但是如何将它包含在我的 config.ini 文件中？还是有其他方法？

目标是，当用户运行自定义 Eclipse 产品时，我们的更新站点将出现在站点列表中。理想情况下，只有列表中的那些。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T16:18:35.507

您可以添加一个`p2.inf`文件，在安装时指示特定更新站点：

```
instructions.configure=\
addRepository(type:0,location:http${#58}//www.eclipse.org/equinox/p2/testing/updateSite);\  addRepository(type:1,location:http${#58}//www.eclipse.org/equinox/p2/testing/updateSite); 
```

这将添加`www.eclipse.org/equinox/p2/testing/updateSite`.

此文件 ( `p2.inf`) 需要与您的`MANIFEST.MF`文件位于同一目录中。[您可以在此处](http://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application)阅读有关此内容的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:16:55.760

由于很有可能我必须再次执行此操作，并且我没有机会记住下次如何执行此操作，因此我将写下我经历的步骤：

我创建了一个带有说明的 p2.inf 文件；

```
instructions.configure=\
org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(type:0,location:http${#58}//<my_url_here>,name:<my_name_here>,enabled:true);\
org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(type:1,location:http${#58}//<my_url_here>,name:<my_name_here>,enabled:true);\
org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(type:0,location:http${#58}//<my_url_here>,name:<my_name_here>,enabled:true);\
org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(type:1,location:http${#58}//<my_url_here>,name:<my_name_here>,enabled:true);` 
```

根据[Eclipse wiki](http://wiki.eclipse.org/Equinox/p2/Customizing_Metadata)，inf 文件可以放在与 my 相同的目录中`feature.xml`，这就是我所做的。

我有一个包含此功能的产品，因此我使用 Eclipse 产品导出向导导出了该产品。我确保建立一个存储库。

构建完成后，存储库有一个 content.jar。在 content.jar 中有一个 content.xml。检查它，我可以发现：

```
<touchpointData size='1'>
   <instructions size='1'>
     <instruction key='configure'>
       org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(<all my update sites>);
     </instruction>
   </instructions>
 </touchpointData> 
```

因此，这验证了导出确实看到了我的 p2.inf 文件并对其进行了处理。

要从存储库安装，我使用了 Eclipse Director 脚本：

```
cmd /c "C:\Program\Eclipse\director\director -consoleLog -bundlepool c:/program/eclipse/eclipse3.6_custom -profileProperties "org.eclipse.update.install.features=true" -i MyProduct.Product -r "file:/C:\eclipse\exported\repository" -d c:/program/eclipse/eclipse3.6_custom -p helios"` 
```

该脚本将产品从存储库安装到目标。

# c# - Asp.net 页面返回一个单词的空白页

> ID：12729173
> 
> 赞同：0
> 
> 时间：2012-10-04T14:10:04.003
> 
> 标签：c#, asp.net, .net-4.0, dotnetnuke

为了与外部支付系统合作，我需要在空白页的开头用一个单词“true”进行响应。我正在使用 Dotnetnuke 6 和 c# .net 4.0 自定义模块。我必须使用他们发送的数据，然后将其放在页面世界“真实”的开头。所以我可以以某种方式重置页面并用一个单词返回空页面，或者将其插入页面的开头（甚至在 tag 之前）我无法重定向到另一个页面，它必须是同一个页面。

有任何想法吗 ？是否有可能获得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:13:18.530

如果您还没有返回任何内容，您可以执行 Response.Clear()、Response.Write() 和 Response.End() 来结束请求，因此不会返回任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:54:00.673

这对我来说听起来确实像是一项网络服务。我要么使用 DNN 服务框架。或者，如果它真的像返回 true 一样简单，我会编写一个 .ashx 来完成这项工作。.ashx 不会与其他模块一起运行或作为 default.aspx 的一部分运行，因此您可以轻松控制响应中呈现的所有内容。

# math - 平滑 3 维欧几里得空间矩阵

> ID：12729178
> 
> 赞同：1
> 
> 时间：2012-10-04T14:10:18.020
> 
> 标签：math, computer-vision, bezier, smoothing

我有一个关于使用什么方法来平滑 3D (xyz) 网格的一般性问题。

我的程序有使用立体视觉方法获得的大型 3D 点矩阵。结果的形状总是有点像半球形，但由于我想消除的立体视觉错误，它有皱纹。

问题是，怎么做？现在我已经开发了一半的方法来解决问题，但我认为可能有更好的方法。

我的实际想法是使用 Hermite 方法。这个想法是：

1.  取所有 XY 并在两个方向上平滑 -> XYnew 和 XnewY

2.  将 Hermite 线转换为 Bezier 线并找到 XYnew 和 XnewY 之间的交叉点，具有新点。（重复所有点，通常为 2000）

3.  使用具有 XYZnew 的 Hermite XYZ 平滑。

现在我已经在 C++ 中实现了 Hermite 表面平滑和 Hermite 线平滑，但中间部分并不像预期的那么容易。

无论如何，我的问题是，这是一种正确的方法还是有另一种可能更好的方法？

当然想法是消除立体视觉方法产生的误差，这不是计算机图形问题，更多的是数据处理问题

附录：

起初我认为 Z 平滑就足够了，但显然不是，还有很多 XY 误差。在下面的图像中，您可以看到 Z 拟合工作，但它仍然非常粗糙，如在 2 图像中可以看到的那样。（颜色是变形的，应该是相当连续的） ![没有 Z 平滑的图像](../Images/f352a7efb89c08fd3447912f85492459.png) ![在此处输入图像描述](../Images/3c5faac33ee2259b0ef8018df4a7ceaa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:05:55.737

除非你有更好的先验，否则很难击败经典的陶宾算法： http: [//mesh.brown.edu/taubin/pdfs/taubin-iccv95a.pdf](http://mesh.brown.edu/taubin/pdfs/taubin-iccv95a.pdf)

# c++ - 为长度为 1 的位域赋值

> ID：12729181
> 
> 赞同：1
> 
> 时间：2012-10-04T14:10:21.413
> 
> 标签：c++, c, binary, bit-fields

假设我有

```
struct A
{
    signed char a:1;
    unsigned char b:1;
}; 
```

如果我有

```
A two, three;
two.a = 2; two.b = 2;
three.a = 3; three.b = 3; 
```

`two`将`0`在其字段中包含 s，而`three`将包含`1`s。因此，这让我想到，将数字分配给单个位字段会获得最低有效位（`2`是`10`二进制并且`3`是`11`）。

所以，我的问题是 - 这是正确的和跨平台的吗？或者它取决于机器、编译器等。标准是否说明了这一点，或者它是完全定义的实现？

[`0`注意：通过分配和`1`，而不是`2`和可以达到相同的结果`3`。我使用`2`并且`3`只是为了说明我的问题，我不会在现实世界中使用它]

[PS 而且，是的，我对这两种语言都很感兴趣 -`C`和`C++`，请不要告诉我它们是不同的语言，因为我知道这一点 :)]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:13:16.553

这种情况下的规则与全角算术的情况没有什么不同。位域的行为方式与相应的全尺寸类型相同，只是它们的宽度受您在位域声明（C99 中的 6.7.2.1/9）中指定的值限制。

将溢出值分配给有符号位域会导致实现定义的行为，这意味着您使用位域观察到的行为`a`通常是不可移植的。

将溢出值分配给无符号位域使用模算术规则，这意味着该值取模`2^N`，其中`N`是位域的宽度。这意味着，例如，将偶数分配给您的位域`b`将始终产生 value `0`，而将奇数分配给此类位域将始终产生`1`。

# image - 如何在 Asp.Net WebApi MVC4 中将图像从一个视图显示到另一个视图？

> ID：12729182
> 
> 赞同：0
> 
> 时间：2012-10-04T14:10:22.410
> 
> 标签：image, asp.net-mvc-4, asp.net-web-api

大家好，我有一些图像，我正在动态检索并在这样的视图中显示

这是我的控制器

```
 private ProductEntities products = new ProductEntities();
    public List<ProductItems> GetAllProducts()
    {
        var items = new List<ProductItems>();
        var records = products.Products.ToList();
        foreach (var item in records)
        {
            ProductItems model = new ProductItems();
            model.ProductID = item.ProductId;
            model.ProductName = item.ProductName;
            model.ImageURL = item.ImageURL;
            items.Add(model);
        }
        return items;
    } 
```

这是我的索引页面视图

```
 <script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("/api/ProductDetails", function (data) {
            $.each(data, function (idx, ele) {
                $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
                $("#makeMeScrollable").append('<h4><a href="#">' + ele.ProductName + '</a></h4>');

            });
        });
    });      

</script>

</head>
<body>
<h1>Products</h1>
<div class="rightsection_main">
    <div class="img_main" id="makeMeScrollable">            

       </div>
   </div>
  </body> 
```

现在我想要的是，当用户单击图像时，我必须将图像的 ID 传递给我的 apicontroller 中的方法，并且我必须在另一个视图中显示该图像..我如何将我的图像传递给另一个视图和我的 api/控制器操作的 ID

我必须将我的 ProductID 传递给这个方法

```
 public IEnumerable<ProductItems> ProductDeatils(long ProductID)
    {
        var productdeatils = products.ExecuteStoreQuery<ProductItems>("GetProductDetail @ProductID ", new SqlParameter("@ProductID", ProductID));           
        return productdeatils ;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:06:06.613

问题是 API 操作不会返回视图。它们用于使用某种格式（例如 JSON 或 XML）序列化模型。因此，当您说要使用 ProductDetils API 操作来显示视图时，这没有多大意义。视图由返回 ActionResults 的标准 ASP.NET MVC 控制器操作返回。那么让我们看看如何设置它。

假设您有以下 API 控制器：

```
public class ProductsController : ApiController
{
    private ProductEntities products = new ProductEntities();
    public IEnumerable<ProductItems> Get()
    {
        return products.Products.ToList().Select(item => new ProductItems
        {
            ProductID = item.ProductId,
            ProductName = item.ProductName,
            ImageURL = item.ImageURL
        });
    }
}

public class ProductDetailsController : ApiController
{
    private ProductEntities products = new ProductEntities();
    public ProductItems Get(long id)
    {
        return products.ExecuteStoreQuery<ProductItems>(
            "GetProductDetail @ProductID ", 
            new SqlParameter("@ProductID", id)
        );
    }
} 
```

好的，现在我们需要标准的 ASP.NET MVC 控制器来为视图提供服务：

```
public class HomeController : Controller
{
    public ActionResult Products()
    {
        return View();
    }

    public ActionResult ProductDetail(long id)
    {
        using (var client = new HttpClient())
        {
            var productDetailUrl = Url.RouteUrl(
                "DefaultApi", 
                new { httproute = "", controller = "productdetails", id = id },
                Request.Url.Scheme
            );
            var model = client
                .GetAsync(productDetailUrl)
                .Result
                .Content
                .ReadAsAsync<ProductItems>()
                .Result;
            return View(model);
        }
    }
} 
```

以及单击链接时显示产品列表和产品详细信息的相应视图：

`~/Views/Home/Products.cshtml`：

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <h1>Products</h1>
    <div class="rightsection_main">
        <div class="img_main" id="makeMeScrollable">            

        </div>
    </div>

    <script type="text/javascript" src="~/scripts/jquery-1.8.2.js"></script>
    <script type="text/javascript">
        var productsUrl = '@Url.RouteUrl("DefaultApi", new { httproute = "", controller = "products" })';
        var productDetailUrl = '@Url.Action("productdetail", "home", new { id = "__id__" })';

        $.getJSON(productsUrl, function (data) {
            $.each(data, function (idx, product) {
                $('<img/>').attr({ src: product.ImageURL }).appendTo('#makeMeScrollable');
                $('#makeMeScrollable').append(
                    $('<h4/>').html(
                        $('<a/>', {
                            href: productDetailUrl.replace('__id__', product.ProductID),
                            text: product.ProductName
                        })
                    )
                );
            });
        });
    </script>
</body>
</html> 
```

和`~/Views/Home/ProductDetail.cshtml`：

```
@model ProductItems
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ProductDetail</title>
</head>
<body>
    <h4>@Html.DisplayFor(x => x.ProductName)</h4>
    <img src="@Model.ImageURL">
</body>
</html> 
```

# python - 选择文本时 Python 3.3.0 中的 IDLE 崩溃

> ID：12729183
> 
> 赞同：3
> 
> 时间：2012-10-04T14:10:26.020
> 
> 标签：python, crash, python-idle

我在 Mac OS X Lion 10.7.5 上安装了 Python 3.3.0，还安装了 ActiveTcl8.5.12。

一切顺利，**但是**当我在 IDLE 中**选择文本**或使用**副本**时，它崩溃了。我也尝试使用 Python2.7.3，同样的问题。下面附上几行 Python3.3.0 的崩溃报告。

任何建议将不胜感激。谢谢你。

问候，

lzsph

```
Process:         Python [501]
Path:            /Applications/Python 3.3/IDLE.app/Contents/MacOS/Python
Identifier:      org.python.IDLE
Version:         3.3.0 (3.3.0)
Code Type:       X86-64 (Native)
Parent Process:  launchd [223]

Date/Time:       2012-10-04 21:49:54.844 +0800
OS Version:      Mac OS X 10.7.5 (11G56)
Report Version:  9

Interval Since Last Report:          3935 sec
Crashes Since Last Report:           7
Per-App Interval Since Last Report:  6059 sec
Per-App Crashes Since Last Report:   6
Anonymous UUID:                      F6B0BDF6-F4D3-4930-BF19-24DD07CA669B

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: 0x000000000000000d, 0x0000000000000000

VM Regions Near 0:
--> 
__TEXT                 0000000100000000-0000000100001000 [    4K] r-x/rwx SM=COW  /Library/Frameworks/Python.framework/Versions/3.3/Resources/Python.app/Contents/MacOS/Python

Application Specific Information:
objc[501]: garbage collection is OFF

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   Tk                              0x00000001013c312a TkpMakeWindow + 306
1   Tk                              0x000000010133d82f Tk_MakeWindowExist + 130
2   Tk                              0x000000010131bed9 TkClipInit + 129
3   Tk                              0x000000010131bf77 Tk_ClipboardClear + 43
4   Tk                              0x000000010131c5fe Tk_ClipboardObjCmd + 996
5   Tcl                             0x00000001012168ad TclEvalObjvInternal + 782
6   Tcl                             0x000000010124fe51 TclExecuteByteCode + 4488
7   Tcl                             0x0000000101289c16 TclObjInterpProcCore + 1001
8   Tcl                             0x00000001012168ad TclEvalObjvInternal + 782
9   Tcl                             0x00000001012174bf TclEvalEx + 2183
10  Tcl                             0x000000010121788f Tcl_EvalEx + 26
11  Tk                              0x000000010131ac7d Tk_BindEvent + 4994
12  Tk                              0x000000010131deac TkBindEventProc + 342
13  Tk                              0x00000001013247bb Tk_HandleEvent + 1431
14  Tk                              0x00000001013191b8 Tk_EventObjCmd + 4666
15  Tcl                             0x00000001012168ad TclEvalObjvInternal + 782
16  Tcl                             0x0000000101217a9f Tcl_EvalObjv + 66
17  _tkinter.so                     0x00000001007d75be Tkapp_Call + 190
18  org.python.python               0x00000001000de02e PyEval_EvalFrameEx + 29774
19  org.python.python               0x00000001000df1b8 PyEval_EvalCodeEx + 2296
20  org.python.python               0x00000001000dd647 PyEval_EvalFrameEx + 27239
21  org.python.python               0x00000001000dd7cf PyEval_EvalFrameEx + 27631
22  org.python.python               0x00000001000df1b8 PyEval_EvalCodeEx + 2296
23  org.python.python               0x000000010003d67a function_call + 186
24  org.python.python               0x000000010000d418 PyObject_Call + 104
25  org.python.python               0x00000001000d9003 PyEval_EvalFrameEx + 9251
26  org.python.python               0x00000001000df1b8 PyEval_EvalCodeEx + 2296
27  org.python.python               0x000000010003d67a function_call + 186
28  org.python.python               0x000000010000d418 PyObject_Call + 104
29  org.python.python               0x0000000100027b0a method_call + 138
30  org.python.python               0x000000010000d418 PyObject_Call + 104
31  org.python.python               0x00000001000d5197 PyEval_CallObjectWithKeywords + 87
32  _tkinter.so                     0x00000001007d58a8 PythonCmd + 456
33  Tcl                             0x000000010121353b TclInvokeStringCommand + 105
34  Tcl                             0x00000001012168ad TclEvalObjvInternal + 782
35  Tcl                             0x000000010124fe51 TclExecuteByteCode + 4488
36  Tcl                             0x0000000101256e3b Tcl_ExprObj + 705
37  Tcl                             0x0000000101213159 Tcl_ExprBooleanObj + 35
38  Tcl                             0x000000010122361f Tcl_IfObjCmd + 123
39  Tcl                             0x00000001012168ad TclEvalObjvInternal + 782
40  Tcl                             0x00000001012174bf TclEvalEx + 2183
41  Tcl                             0x000000010121788f Tcl_EvalEx + 26
42  Tk                              0x000000010131ac7d Tk_BindEvent + 4994
43  Tk                              0x000000010131deac TkBindEventProc + 342
44  Tk                              0x00000001013247bb Tk_HandleEvent + 1431
45  Tk                              0x000000010132488c WindowEventProc + 92
46  Tcl                             0x000000010127c12f Tcl_ServiceEvent + 147
47  Tcl                             0x000000010127c423 Tcl_DoOneEvent + 314
48  _tkinter.so                     0x00000001007d4e51 Tkapp_MainLoop + 177
49  org.python.python               0x00000001000de02e PyEval_EvalFrameEx + 29774
50  org.python.python               0x00000001000df1b8 PyEval_EvalCodeEx + 2296
51  org.python.python               0x00000001000dd647 PyEval_EvalFrameEx + 27239
52  org.python.python               0x00000001000dd7cf PyEval_EvalFrameEx + 27631
53  org.python.python               0x00000001000df1b8 PyEval_EvalCodeEx + 2296
54  org.python.python               0x00000001000df27f PyEval_EvalCode + 63
55  org.python.python               0x000000010010639b PyRun_FileExFlags + 187
56  org.python.python               0x00000001001066b6 PyRun_SimpleFileExFlags + 598
57  org.python.python               0x000000010011d783 Py_Main + 3203
58  Python                          0x0000000100000e0e 0x100000000 + 3598
59  Python                          0x0000000100000c54 0x100000000 + 3156

Thread 1:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff8e6777e6 kevent + 10
1   libdispatch.dylib               0x00007fff8b6f1786 _dispatch_mgr_invoke + 923
2   libdispatch.dylib               0x00007fff8b6f0316 _dispatch_mgr_thread + 54

Thread 2:
0   libsystem_kernel.dylib          0x00007fff8e677192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff9563e594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff9563fb85 start_wqthread + 13

Thread 3:
0   libsystem_kernel.dylib          0x00007fff8e677192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff9563e594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff9563fb85 start_wqthread + 13

Thread 4:
0   libsystem_kernel.dylib          0x00007fff8e676df2 __select + 10
1   Tcl                             0x00000001012afd1e NotifierThreadProc + 558
2   libsystem_c.dylib               0x00007fff9563c8bf _pthread_start + 335
3   libsystem_c.dylib               0x00007fff9563fb75 thread_start + 13

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0065007000790054  rbx: 0x0000000103b6eb90  rcx: 0x0000000103b6eb80  rdx: 0x0000000000000000
  rdi: 0x0000000000000000  rsi: 0x0000000103b6eb98  rbp: 0x00007fff5fbfac00  rsp: 0x00007fff5fbfabe0
   r8: 0x00007fff5fbfac3c   r9: 0x00007fff5fbfac38  r10: 0x0000000000000081  r11: 0x0000000100062c10
  r12: 0x0000000103b7fc10  r13: 0x0000000103b6eb90  r14: 0xffffffffffffffff  r15: 0x0000000101897010
  rip: 0x00000001013c312a  rfl: 0x0000000000010246  cr2: 0x00000001039f9750
Logical CPU: 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:07:42.683

看起来这是Tcl 中的[这个错误](http://bugs.python.org/issue15574)。

# asp.net - 在 DNN 中，如何禁用 NON HOST、NON admin 的父菜单链接？

> ID：12729184
> 
> 赞同：1
> 
> 时间：2012-10-04T14:10:31.183
> 
> 标签：asp.net, dotnetnuke

在我的一个 DNN 网站中，我正在使用 DNN 菜单，对于 DNN 菜单中的某些项目，我希望 HOST 用户或管理员用户可以访问父菜单项或根菜单项，并且希望所有用户都可以访问子元素，所以我怎么能禁用仅对主机/管理员启用的所有根菜单项（它应该是可点击的并且应该重定向到适当的链接），而应该为所有用户启用根项的子菜单项。我急需解决方案，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:49:38.947

这是你想要的一个奇怪的设置。

要禁用父菜单链接，只需将页面属性设置为“禁用”。这使得菜单中的页面不可点击。

但是，如果出于某种原因您希望管理员能够单击菜单项，但没有其他用户，那么我建议您正常设置父菜单项，然后将该页面设置为永久重定向到不同的页面，第二页隐藏。然后，第二页将权限设置为仅对管理员/主机用户可见。

所以...

父：启用，可见，所有用户许可，永久重定向到“假父”子页面 1：正常子页面 2：正常子页面 n：正常等

菜单中的其他地方。假父：隐藏页面，只有管理员权限

这会有点笨拙，但可能会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T06:17:01.033

在 DNN 9.00.01 中，Disabled 选项不存在。所以在这种情况下，您需要转到您的 DNN 数据库并将`Tabs table` `DisableLink`列值更新`0`为`1`

# jquery - DIV 内容未出现在 JQuery Cycle 插件中

> ID：12729185
> 
> 赞同：1
> 
> 时间：2012-10-04T14:10:35.227
> 
> 标签：jquery, css

我在一个网站上工作。该站点将有多个选项卡。我想使用 JQuery Cycle 插件来相应地引入选项卡。每个选项卡都应占据可用区域。为了做到这一点，我创建了以下内容：

```
<!DOCTYPE html>

<html style="height: 100%; margin: 0; padding: 0; color: #FFF;">
<head>
  <meta name="viewport" content="width=device-width" />
  <title>Index</title>

  <style type="text/css">                
    #content { height: 100%; overflow: hidden; background: white; }
    #header { float: left; width: 100%; background-color:silver; padding:8px 4px;}
    #tabItems { height:100%; }

    .tabItem { padding:15px; border:1px solid #ccc; background-color:blue; top:0; left:0; }
  </style>

  <script src="/Scripts/modernizr-2.5.3.js"></script>
  <script src="/Scripts/jquery-1.7.1.js"></script>
  <script src="/Scripts/jquery.cycle.all.js"></script>
</head>

<body style="height: 100%; margin: 0; padding: 0; color: #FFF;">

<div id="content">
    <div id="header">
        <a href="#" onclick="showTab(0);">Tab 1</a> | 
        <a href="#" onclick="showTab(1);">Tab 2</a> | 
    </div>

    <div id="tabItems">
        <div id="tabItem1" class="tabItem">
            <h2>Tab Content Number 1</h2>
        </div>

        <div id="tabItem2" class="tabItem">
            <h2>Tab Content Number 2</h2>
        </div>
    </div>
</div>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#tabItems').cycle({
                fx: 'scrollDown',
                next: '#next',
                prev: '#prev',
                timeout: 0
            });
        });

        function showTab(tn) {
            $('#tabItems').cycle(tn);
            return false;
        }
    </script>
</body>
</html> 
```

如果我删除此代码可以正常工作`#tabItems { height:100%; }`。当该样式定义存在时，我似乎无法在选项卡之间切换。但是，据我所知，我需要适当的样式定义以使每个选项卡都填充剩余的房地产量。有谁知道我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:25:22.190

我正在检查这一点 - 代码实际上工作正常（至少在 FF / IE 中）标签确实循环，与我的代码的唯一区别是我使用了来自[https://github.com/downloads/malsup的最新循环 JS /cycle/jquery.cycle.all.latest.js](https://github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js)

是否有一个特定的浏览器你看不到这个工作？

# javascript - 如何将 indexedDB 游标结果绑定到自动完成输入框

> ID：12729187
> 
> 赞同：0
> 
> 时间：2012-10-04T14:10:42.110
> 
> 标签：javascript, html, indexeddb

这包括上一个问题“ [IndexedDB Fuzzy Search](https://stackoverflow.com/questions/7086180/indexeddb-fuzzy-search/8961462#8961462) ”中的示例代码。选择结果时，如何将光标结果绑定到输入框以创建自动完成效果并使用来自 objectStore 的不同值填充表单的多个输入框？我想在没有任何库的情况下做到这一点。

HTML 输入框。

```
 <input name="name" id="name"> //search by name, when a name is selected the last name and age are automatically attached to the other input boxes
 <input name="lastname" id="lastname">
 <input name="age" id="age"> 
```

Javascript。

```
var result = [];
db.transaction(['table'], IDBTransaction.READ_ONLY)
.objectStore('table')
.openCursor(
IDBKeyRange.bound(searchTerm, searchTerm + '\uffff'),
IDBCursor.PREV)
.onsuccess = function (e) {
    e || (e = event);
    var cursor = e.target.result;
    if (cursor) {
        result.push([cursor.value.column1, cursor.value.sortcolumn]);
        cursor.continue();
    } else {
        if (result.length) {
        result.sort(function (a, b) {
         return a[1] - b[2];
      });
    }

    // Process code here
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:34:31.790

好吧，在您的情况下，您可能只想要游标返回的第一个结果，因此您只需要检查是否有返回结果，如下所示：

```
<input name="name" id="name">
<input name="lastname" id="lastname">
<input name="age" id="age">
<script>
document.getElementById('name').oninput = function () {
  var searchTerm = this.value;

  var result = [];
  db.transaction(['table'], IDBTransaction.READ_ONLY)
    .objectStore('table')
    .openCursor(
      IDBKeyRange.bound(searchTerm, searchTerm + '\uffff'), // The important part
      IDBCursor.PREV)
    .onsuccess = function (e) {
      e || (e = event);
      var cursor = e.target.result;
      if (cursor) {
        // Here I assume that your table with 'lastname' and 'age'

        // Return result to "lastname" input
        document.getElementById('lastname').value = cursor.value.lastname;

        // Return result to "age" input
        document.getElementById('lastname').value = cursor.value.age;
      }
    };
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T01:46:52.100

好的，所以我知道在这里发布链接作为答案是不好的形式，但我在 HTML5Rocks 上写了一篇关于此的文章。我在这里剪切和粘贴太长了，但我认为这正是你想要的。[http://www.html5rocks.com/en/tutorials/indexeddb/uidatabinding/](http://www.html5rocks.com/en/tutorials/indexeddb/uidatabinding/)

# android - 移动应用 api 的建议 Web 身份验证？

> ID：12729190
> 
> 赞同：3
> 
> 时间：2012-10-04T14:10:43.773
> 
> 标签：android, zend-framework, rest, web

我正在为我的 Android 应用程序构建一个基于 REST 的 api。我目前使用访问令牌和基本标头身份验证。有什么改进认证过程的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T17:26:41.087

我建议使用 OAuth 协议来管理 API 身份验证。您可以在此处阅读有关此协议的更多信息：http: [//oauth.net/](http://oauth.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T17:36:01.353

+1 ezimuel - "OAuth" is an excellent suggestion.

However, I was surprised to see the link [Getting Started with the Tasks API and OAuth 2.0 on Android](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android) was deprecated.

Please check out these links:

*   Google Play Authorization: [http://developer.android.com/google/play-services/auth.html](http://developer.android.com/google/play-services/auth.html) (also uses OAuth 2.0)

*   Authenticating to OAuth 2.0 Services: [http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)

*   OAuth and REST in Android (1): [http://simpleprogrammer.com/2011/05/25/oauth-and-rest-in-android-part-1/](http://simpleprogrammer.com/2011/05/25/oauth-and-rest-in-android-part-1/)

*   OAuth and REST in Android (2): [http://simpleprogrammer.com/2011/06/04/oauth-and-rest-in-android-part-2/](http://simpleprogrammer.com/2011/06/04/oauth-and-rest-in-android-part-2/)

# android - Android 和 iOS 默认媒体播放器是否支持范围字节搜索？

> ID：12729191
> 
> 赞同：4
> 
> 时间：2012-10-04T14:10:50.500
> 
> 标签：android, ios, video

我正在开发一种将视频传送到移动平台的视频服务。我目前正在考虑使用默认系统播放器来播放视频。我想通过http使用渐进式下载。iOS 和 Android 默认媒体播放器是否支持字节搜索？他们可以从文件尚未加载到此时的某个时间请求视频吗？

# php - HTML 文件调用 PHP，它运行良好，但在我要打开的 HTML 上标记 PHP 文件名

> ID：12729196
> 
> 赞同：0
> 
> 时间：2012-10-04T14:11:02.270
> 
> 标签：php, html

我是 PHP 新手，

以下 HTML 调用 send_form_email.php

```
<form name="contactform" method="post" action="send_form_email.php">
<p align="center"><font face="Arial" color="#4F4F4F"><strong>Subscribe to our 
News letter:&nbsp; </strong></font><input type="text" value="enter your email address"           onfocus="blank(this)" onblur="unblank(this)" name="email" size="20">&nbsp;&nbsp;&nbsp;
<input type="submit" value="Submit"> 
```

以下 PHP 代码正确运行：

```
<?php
if(isset($_POST['email'])) {
    $email_to = "subscribe@myithost.net";
    $email_subject = "News Letter Opt In";

    function died($error) {
        echo "We are very sorry, but the email adress submitted does not appear to be valid";
        echo "The error appears below<br /><br />";
        echo 'Please go back and fix the error<br /><br />';
        die();
    }

    // validation expected data exists
    if(!isset($_POST['email'])) {
        died('We are sorry, but there appears to be a problem with the email you submitted.');
    }
    $email_from = $_POST['email']; // required
    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';

    if(!preg_match($email_exp,$email_from)) {
        $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
    }

    if(strlen($error_message) > 0) {
        died($error_message);
    }

    $email_message = "News Letter Opt in Member, see below.\n\n";

    function clean_string($string) {
        $bad = array("content-type","bcc:","to:","cc:","href");
        return str_replace($bad,"",$string);
    }

    $email_message .= "Email: ".clean_string($email_from)."\n";
    // create email headers
    $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n".
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers);
?>
<?php include 'index.html'; ?>
<?php
}
?> 
```

但我遇到的问题是它让我返回[http://www.myithost.net/send_form_email.php](http://www.myithost.net/send_form_email.php)而不是 www.myithost.net/index.html

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:13:32.703

您需要重定向用户。在你的 php 文件的末尾放上类似的东西

```
header("Location: http://mydomain.com/index.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:17:07.160

试试这个PHP：

```
<?php
if(isset($_POST['email'])) {
    $email_to = "subscribe@myithost.net";
    $email_subject = "News Letter Opt In";

    function died($error) {
        echo "We are very sorry, but the email adress submitted does not appear to be valid";
        echo "The error appears below<br /><br />";
        echo 'Please go back and fix the error<br /><br />';
        die();
    }

    // validation expected data exists
    if(!isset($_POST['email'])) {
        died('We are sorry, but there appears to be a problem with the email you submitted.');
    }
    $email_from = $_POST['email']; // required
    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';

    if(!preg_match($email_exp,$email_from)) {
        $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
    }

    if(strlen($error_message) > 0) {
        died($error_message);
    }

    $email_message = "News Letter Opt in Member, see below.\n\n";

    function clean_string($string) {
        $bad = array("content-type","bcc:","to:","cc:","href");
        return str_replace($bad,"",$string);
    }

    $email_message .= "Email: ".clean_string($email_from)."\n";
    // create email headers
    $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n".
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers);

    header("Location: http://www.example.com/index.html"); // <--- ADD ME
    exit(); // <--- ADD ME

}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:18:08.707

代替 ：

```
 @mail($email_to, $email_subject, $email_message, $headers);
    ?>
    <?php include 'index.html'; ?>
    <?php
}
?> 
```

经过 ：

```
 @mail($email_to, $email_subject, $email_message, $headers);
    header("Location: http://mydomain.com/index.html");
}
?> 
```

注意：确保在 header() 函数调用之前不显示任何字符。

# visual-studio-2010 - 安装 Visual Studio 2012 后无法远程运行单元/网络性能/负载测试

> ID：12729202
> 
> 赞同：2
> 
> 时间：2012-10-04T14:11:25.590
> 
> 标签：visual-studio-2010, unit-testing, visual-studio-2012, load-testing

安装 Visual Studio 2012 进行测试后，我无法从 Visual Studio 2010 远程运行测试（使用远程测试控制器）。我从 Visual Studio 2010 开始测试，因为我们的开发团队还没有迁移，而且我们的测试台还在使用VS 2010 测试代理和控制器（2010 和 2012 版本不兼容）

运行仍在等待中。 ![待办的](../Images/080df014dceec91832be676eb258d079.png)

在测试控制器上启用日志后，我收到此消息（也在 EventLog 中）

```
E, 1360, 4, 2012/10/04, 15:40:02.080, FR-VMRD-CTRL\QTController.exe, ControllerSpooledJob.AddMessage: Failed calling event listener 
    Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1[Microsoft.VisualStudio.TestTools.Controller.IControllerEvents]: System.Runtime.Remoting.RemotingException: Le serveur a rencontré une erreur interne. Pour plus d'informations, désactivez customErrors dans le fichier .config du serveur.

    Server stack trace: 

    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at Microsoft.VisualStudio.TestTools.Controller.IControllerEvents.ControllerEvent(TestMessage report)
       at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.<>c__DisplayClass6.<AddMessage>b__3(IControllerEvents eventListener)
       at Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1.InvokeAsRemoteUser(Action`1 invoke)
       at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.AddMessage(TestMessage message) 
```

测试台没有变化，没有VS2012的另一台机器上没有错误。

有没有办法解决这个问题？

**更新**

2012/12/19, 18:02:41.893, FR-VMRD-CTRL\QTController.exe, ControllerExecution: 异常: System.Runtime.Remoting.RemotingException: Le serverur a rencontré une erreur interne。Pour plus d'informations，désactivez customErrors dans le fichier .config du serverur。

服务器堆栈跟踪：

在 [0] 处重新引发异常：在 Microsoft.VisualStudio 的 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Microsoft.VisualStudio.TestTools.Controller.ControllerExecution 上的 TestTools.Controller.IControllerEvents.ControllerEvent(TestMessage 报告)。<>c__DisplayClass1d.b__19(IControllerEvents eventListener) 在 Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1.InvokeAsRemoteUser(Action`1 调用）在 Microsoft.VisualStudio.TestTools.Controller.ControllerExecution.CallListeners(TestMessage testMessage) W, 2328, 7, 2012/12/19, 18:02:41.893, FR-VMRD-CTRL\QTController.exe, DeploymentQueue: File为文件 C:\Users\load.test.BE-AD\AppData\Local\VSEQT\QTController\358406f9-2bcd-4cc7-887e-ea50fce18a1e\Deployment\calculatorservice.test.dll W, 2328, 7, 2012/ 取消复制12/19, 18:02:41.893, FR-VMRD-CTRL\QTController.exe, EqtException: 文件复制被取消。E, 2328, 7, 2012/12/19, 18:02:41.909, FR-VMRD-CTRL\QTController.exe, DeploymentQueue.DeploymentQueueThread: 部署失败。Microsoft.VisualStudio.TestTools.Exceptions.EqtException：文件复制已取消。在 Microsoft.VisualStudio.TestTools.Execution.DeploymentQueue.CopyFile（字符串 agentName，字符串 remoteFileName，字符串 localFileName，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:56:17.343

你在 VS 2010 还是 VS 2010 SP1 上？请安装[VS 2010 SP1 并重](http://www.microsoft.com/en-us/download/details.aspx?id=23691)试。

如果您使用的是混合环境，请查看[这组基于 SP1 的附加](http://support.microsoft.com/kb/2736182)修复

# php - 使用 php 脚本启用 PDO

> ID：12729205
> 
> 赞同：0
> 
> 时间：2012-10-04T14:11:33.063
> 
> 标签：php, web-applications, web

我想知道如何在服务器上使用 php 脚本激活 PDO。

我已经使用 PDO 完成了一个完整的项目，当将它移动到服务器时，我注意到 PDO 并非无法在那里。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:18:37.063

**[您可以使用extension_loaded](http://php.net/extension_loaded)**函数检查您的提供商是否启用了 PDO ：

```
if ( extension_loaded('pdo') ) {
    echo "PDO enabled";
} else {
    echo "PDO not enabled";
} 
```

您可能还想使用以下方法检查特定于数据库的 PDO 驱动程序：

```
if ( extension_loaded('pdo_<database type here>') ) { // e.g., pdo_mysql
    echo "PDO mysql enabled";
} else {
    echo "PDO mysql enabled";
} 
```

如果未启用，您必须联系您的提供商并询问是否可以启用。

您也可以尝试使用 PHP 的[`dl()`function](http://www.php.net/manual/en/function.dl.php)加载 PDO 扩展，但如果您的提供程序甚至禁用 PDO，它就不太可能工作。

# c++ - 增量链接对执行速度有什么影响？

> ID：12729206
> 
> 赞同：2
> 
> 时间：2012-10-04T14:11:33.397
> 
> 标签：c++, visual-studio, visual-c++, incremental-linking

我想知道增量链接对程序执行速度的影响。

我知道增量链接会在函数和数据之间添加填充，这会导致更大的可执行文件，并且在某些情况下可能会通过不太优化的缓存使用来加速影响。[Microsoft 的文档](http://msdn.microsoft.com/en-us/library/4khtbfyf%28v=vs.100%29.aspx)还指出，它可能会添加跳转 thunk 来处理函数的重定位。但是没有关于速度的消息。

有没有人知道速度影响，甚至做过一些测量？

# c++ - c++ 为什么并不总是需要定义静态成员？

> ID：12729211
> 
> 赞同：0
> 
> 时间：2012-10-04T14:11:42.390
> 
> 标签：c++

我读了这篇好[文章](https://stackoverflow.com/questions/7092765/what-does-it-mean-to-have-an-undefined-reference-to-a-static-member)（关于 undefined-reference-to-a-static-member），但据我所知，我并不总是需要在 cpp 中定义静态成员。所以我寻求帮助以了解规则。

**几个例子——cpp中没有def的所有例子。在类 Master 声明的 h 文件中是：**

```
class Master{
public:
    static IDataSynchronization& sync_data_cb_;
} 
```

**在 cpp 中：**

```
void Master::start(IDataSynchronization& syncDataCB);   - error for undefined
void Master::start(int p,IDataSynchronization& syncDataCB);  no error 
```

//这里用在静态sync_data_cb_ void Master::sendData(){ list data = sync_data_cb_.syncData(); list::iterator it; for (it = data.begin(); it != data.end(); ++it) { sendto(instance_->data_sock_fd_, (*it).c_str(), (*it).length(), 0 ,(const struct sockaddr *) &instance_->target_host_data_, instance_->sockadd_length_);

```
 }
} 
```

对于这个类：

```
class Logger {
public:
    static void Log(const char *format, ...);
private:
    static FILE* file_;
    static mutex mtx_;
}; 
```

如果在我声明静态静态文件*（并在类方法中使用它）的另一个类中，我不会因为未定义而收到错误。

**在所有情况下，我都在这些静态成员中使用。**

任何人都可以为我清除规则吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:22:08.597

规则说您需要定义`syncDataCB`是否使用它。“如果你使用它”在形式上的定义不同，但这已经足够接近理解了。

但是，如果您确实在没有定义的情况下使用它，则编译器/链接器*不需要*给出错误。在实践中，这意味着如果你传递`sync_data_cb_`给`start`，但不在`syncDataCB`那里使用，如果被内联，你将不会收到错误`start`，但如果没有的话。

您不会总是收到错误消息这一事实并不相关，这并不意味着代码有时是正确的。如果你使用`sync_data_cb_`，你需要一个定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:19:32.170

与许多其他事物一样，只需要定义实际*使用*的符号（ C++11 中的*odr-used ）。*

您可以声明更多您需要的东西，只要不使用它们，您就不需要定义。

# javascript - 相对表单操作解析为绝对 URL？

> ID：12729227
> 
> 赞同：3
> 
> 时间：2012-10-04T14:12:15.183
> 
> 标签：javascript, jquery, forms, dom

我正在尝试获取放置在表单操作中的实际字符串。问题是当我这样做时，即使相对路径在 HTML 中，action 属性也会解析为绝对路径。如何获取 action 属性中的实际字符串？

这是我所指的示例：http: [//jsfiddle.net/MSY4s/](http://jsfiddle.net/MSY4s/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T14:15:52.653

如果您已经在使用 jquery，我会使用该`.attr`函数而不是从 jQuery 对象中提取 DOM 元素。像这样：

```
$("form").attr("action"); 
```

从字面上看，这应该会为您提供 action 属性中的内容。在您提供的示例中，它应该看起来像“/somewhere”。jFiddle 中的第二个示例将显示完整路径，因为那是 action 属性中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:19:58.907

相对 URL 总是根据当前文档的 URL 解析为绝对 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:21:01.170

试试这个：

提供两个表单 ID：

```
<form id="form1" action="/somewhere" method="post">
<input type="text" name="test" />
</form>

<form id="form2" action="https://fiddle.jshell.net/somewhere2" method="post">
<input type="text" name="test" />
</form>​ 
```

然后使用这些 id 可以获取每个表单的 action 属性：

```
$('#form1').attr('action');

$('#form2').attr('action'); 
```

您还可以使用相同的标签设置操作属性：

```
$('#form1').attr('action', '[New Action Value]');

$('#form2').attr('action', '[New Action Value]'); 
```

希望这可以帮助。

# python - 在 numpy 和 python 中对图像进行简单、高效的双线性插值

> ID：12729228
> 
> 赞同：10
> 
> 时间：2012-10-04T14:12:15.947
> 
> 标签：python, numpy, interpolation

如何在 python 中为表示为 numpy 数组的图像数据实现双线性插值？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-04T14:12:15.947

我发现了很多关于这个主题的问题和很多答案，尽管对于数据由网格上的样本（即矩形图像）组成并表示为 numpy 数组的常见情况来说，没有一个是有效的。此函数可以将列表作为 x 和 y 坐标，并且无需循环即可执行查找和求和。

```
def bilinear_interpolate(im, x, y):
    x = np.asarray(x)
    y = np.asarray(y)

    x0 = np.floor(x).astype(int)
    x1 = x0 + 1
    y0 = np.floor(y).astype(int)
    y1 = y0 + 1

    x0 = np.clip(x0, 0, im.shape[1]-1);
    x1 = np.clip(x1, 0, im.shape[1]-1);
    y0 = np.clip(y0, 0, im.shape[0]-1);
    y1 = np.clip(y1, 0, im.shape[0]-1);

    Ia = im[ y0, x0 ]
    Ib = im[ y1, x0 ]
    Ic = im[ y0, x1 ]
    Id = im[ y1, x1 ]

    wa = (x1-x) * (y1-y)
    wb = (x1-x) * (y-y0)
    wc = (x-x0) * (y1-y)
    wd = (x-x0) * (y-y0)

    return wa*Ia + wb*Ib + wc*Ic + wd*Id 
```

# sql - 通过表名显示表层次结构

> ID：12729235
> 
> 赞同：0
> 
> 时间：2012-10-04T14:12:29.803
> 
> 标签：sql, naming-conventions, tablename

我正在为名为 Project Billing 的产品重新设计数据库。我在想出表名时遇到了麻烦。在旧数据库中，名称非常晦涩（`PRB_PROJ_LVL`），所以旧没有帮助。数据库很小——大约 10 个表——但会随着时间的推移而增长。

这就是问题所在 -`Projects`是一个实体（和表格），但这个词也用作形容词。例子

*   `Project`- 包含项目的表。
*   `ProjectTask`- 包含项目任务的表格；这是一个孩子`Projects`。
*   `ProjectTemplate`- 项目模板表，它**不是**. `Projects`项目模板只是作为创建一堆`ProjectTasks`.

那么，我如何证明这`ProjectTask`是一个孩子，`Project`但`ProjectTemplate`不是？一如既往地感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:53:19.183

架构的内部文档及其预期用途是更好的方法之一。仅依靠命名约定总是会留下解释的可​​能性——显式定义不会这样做。也就是说，我们已经定义了一些旨在用作模型的对象（在您的情况下为模板）。这些模型对象不被生产应用程序使用或直接操作，并且随着时间的推移是可变的，新对象基于修改后的模型。我们尝试应用自我描述性的一种方法是引入模式。由于我们有不同的部门可以使用相同的模型对象，因此我们有一些类似的东西（调整为适用于您的问题而无需过多假设）：

[dept_X].[项目]

[dept_X].[project_tasks]

对于模板，应用程序或用户从不直接使用（据说）：

[模型].[项目]

[模型].[project_tasks]

作为我们开发人员的编程参考，模式定义脚本包含描述对象关系的文档（就像内部对象通过外键所做的那样，等等）。作为一项附加措施，将为按项目排序的所有新对象生成一个 wiki 文章。在这个新系统（我的入职）之前存在的对象会在它们被修改或时间允许时记录在案，以先到者为准。

# python - Python：哪个 XML 解析器支持 DTD !ENTITY 定义？

> ID：12729239
> 
> 赞同：3
> 
> 时间：2012-10-04T14:12:43.027
> 
> 标签：python, xml, python-2.7, xml-namespaces, minidom

我有下面的 XML 文件，目前我正在使用 minidom，我得到的示例' `documentElement`s告诉我它忽略了[定义](http://www.freebsd.org/doc/en/books/fdp-primer/xml-primer-include.html)，因此忽略了引用。`tagName``xyz:widget`[`!ENTITY`](http://www.freebsd.org/doc/en/books/fdp-primer/xml-primer-include.html)`!DOCTYPE`

哪个 XML 解析器支持[文档类型定义](http://en.wikipedia.org/wiki/Document_type_definition)，以便 不会忽略[!ENTITY 定义和 !DOCTYPE 引用：](http://www.freebsd.org/doc/en/books/fdp-primer/xml-primer-include.html)

```
<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE widget [
<!ENTITY widgets-ns "http://www.w3.org/ns/widgets">
<!ENTITY pass "pass&amp;.html">
]>
<xyz:widget xmlns:xyz="&widgets-ns;">
  <xyz:content src="&pass;"/>
  <xyz:name>bv</xyz:name>
</xyz:widget> 
```

因此，对于上面的示例，您可以使用 python 获得`XML`等效项：

```
<widget xmlns="http://www.w3.org/ns/widgets">
  <content src="pass&amp;.html"/>
  <name>bv</name>
</widget> 
```

或获得`DOM`具有 as a `documentElement`as`widget`和`childNodes`as `content`and属性 as with value`name`等的a`widget``xmlns``http://www.w3.org/ns/widgets`

我可能没有使用正确的术语，但我希望在上述示例的帮助下让自己清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:55:52.933

[LXML](http://lxml.de/)处理得很好：

```
>>> from lxml import etree
>>> s = """<?xml version="1.0" standalone="yes" ?>
... <!DOCTYPE widget [
... <!ENTITY widgets-ns "http://www.w3.org/ns/widgets">
... <!ENTITY pass "pass&amp;.html">
... ]>
... <xyz:widget xmlns:xyz="&widgets-ns;">
...   <xyz:content src="&pass;"/>
...   <xyz:name>bv</xyz:name>
... </xyz:widget>
... """
>>> etree.fromstring(s)
<Element {http://www.w3.org/ns/widgets}widget at 7f4de2cc58e8>
>>> etree.fromstring(s).xpath("//xyz:content/@src",
...                           namespaces={"xyz": "http://www.w3.org/ns/widgets"})
['pass&.html'] 
```

# java - 是否可以限制每组执行作业的数量？

> ID：12729248
> 
> 赞同：1
> 
> 时间：2012-10-04T14:13:03.687
> 
> 标签：java, quartz-scheduler

我有`2`团体。每个组都有`10`可以同时执行的作业。`ThreadPool`允许`10`同时使用线程。我想同时执行`5`第 1`5`组的作业和第 2 组的作业（不是`10`- `0`，`2`- `8`）。如何限制第一组和第二组同时`5`执行最大作业？

# sql - 针对特定模式对 SQL Server 中的数据进行分组

> ID：12729250
> 
> 赞同：1
> 
> 时间：2012-10-04T14:13:05.410
> 
> 标签：sql, sql-server

我一直无法找到类似这种情况的 SQL Server 问题。我有以下格式的数据。

```
Recnum    SectionID    CategoryID    EnterTime     LeaveTime
534       2            4             <time here>   <time here>   
535       2            2             <time here>   <time here>  
532       2            2             <time here>   <time here>  
523       2            4             <time here>   <time here>  
512       2            4             <time here>   <time here>  
577       2            NULL          <time here>   <time here>  
578       1            6             <time here>   <time here>  
579       2            2             <time here>   <time here>   
571       2            2             <time here>   <time here>    
588       2            2             <time here>   <time here> 
```

我需要添加一个 GroupID 列，以便数据如下所示。

```
Recnum    SectionID    CategoryID    EnterTime     LeaveTime    GroupID
534       2            4             <time here>   <time here>  NULL 
535       2            2             <time here>   <time here>  1
532       2            2             <time here>   <time here>  1
523       2            4             <time here>   <time here>  NULL
512       2            4             <time here>   <time here>  NULL
577       2            NULL          <time here>   <time here>  2
578       1            6             <time here>   <time here>  NULL
579       2            2             <time here>   <time here>  3  
571       2            2             <time here>   <time here>  3
588       2            2             <time here>   <time here>  3 
```

GroupID 用于 SectionID 和 CategoryID 均为 2 或 SectionID 为 2 且 CategoryID 为 NULL 的情况。当按 EnterTime 排序的行中有多个这些模式时，GroupID 必须相同，并且必须为下一组组递增。Recnum 是 PK，但不是按 EnterTime 顺序排列的。我可以在 WHILE 循环中执行此操作，但该表包含超过 3500 万条记录，因此可能需要几天的时间来处理。关于如何做到这一点的任何想法？

```
Example of the times for two rows:
Enter                     Leave
2011-05-31 21:04:07.000   2011-05-31 21:04:35.000
2011-05-31 21:04:35.000   2011-05-31 21:04:44.000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:18:05.277

创建在您的场景中返回 GroupId 的 SQL 函数，然后使用此函数更新表

```
UPDATE TABLE SET GroupId=DBO.YOURFUNCTION(SectionID,CategoryID) 
```

您的函数示例在这里

`CREATE FUNCTION GROUPIDFINDER ( @SectionID INT, @CategoryID INT ) RETURNS int AS BEGIN DECLARE @Result int`

 ````
IF @SectionID=2 AND @CategoryID=2
BEGIN
SET @Result=1
END
-- Return the result of the function
RETURN @Result 
```` 

`END GO`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T15:08:30.027

如果您不受限制在 sql server 中执行此操作，则最好的选择是

1.  将数据导出到文本文件
2.  用您喜欢的语言编写一个程序来处理该文本文件（我建议只导出 recnum 和新的 groupid，并且只导出那些 groupid 不为空的）
    *   即使超过 3500 万行，这也只需要几分钟
3.  使用[批量插入](http://msdn.microsoft.com/en-us/library/ms188365.aspx)将数据带回 sql server
    *   再过几分钟
4.  使用 UPDATE ... FROM 语句将批量插入的表连接回原始表以更新 groupid 列

    ```
    UPDATE o 
    SET GroupID = bi.GroupID
    FROM OriginalTable o 
        INNER JOIN BulkInsertTable bi 
        ON o.RecNum = bi.RecNum 
    ```

    *   这将花费更长的时间，但是由于花费的时间是将数据写入磁盘的时间，因此这是不可避免的

# javascript - 在页面加载时加载一个随机的 css 文件（如果可能，请记住）

> ID：12729251
> 
> 赞同：1
> 
> 时间：2012-10-04T14:13:09.803
> 
> 标签：javascript, jquery, css, random

我有 6 个不同的样式表和 1 个 html 页面。我需要做的是让页面在访问时随机加载其中一个样式表。

而且，当用户访问并加载了随机样式表时，是否可以记住加载了哪个样式表，并且只为该特定访问者加载该样式表（即停止随机化...加载最初加载的样式表）？

我已将 jQuery 加载到 html 文档中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:21.353

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script>

<script>

$(document).ready(function(){
  var userStylesheet = $.cookie('user_stylesheet');

  if(!userStylesheet){
    userStylesheet = Math.floor((Math.random()*6)+1);
    $.cookie('user_stylesheet', userStylesheet);
  }

  var ss = $('<link/>').attr('rel', 'stylesheet').attr('type','text/css').attr('href', 'stylesheet' + userStylesheet + '.css');
  $(document.body).append(ss);

});

</script>
</head>
<body>
  Hello!
</body>
</html> 
```

**编辑**

这是[jquery.cookie.js RAW的链接](https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:18:27.817

您是否有任何类型的服务器端脚本可供您使用？如果是这样，我将决定在服务器上提供哪个 CSS 文件，并将值保存在会话变量中——然后如果在后续页面加载时设置了该会话变量，则输出它而不是生成新的。

或者，您可以尝试[在 javascript](http://www.w3schools.com/js/js_cookies.asp)或[本地存储中设置 cookie。](http://html5please.com/#localStorage)

# css - 响应式图像和列表

> ID：12729254
> 
> 赞同：1
> 
> 时间：2012-10-04T14:13:15.930
> 
> 标签：css, responsive-design

尝试获取它，以便我将图像的最大宽度设置为 308px，并且当浏览器缩放更大时，列表每行将包含更多项目。刚才它似乎停留在每行 3 个列表项，但如果我希望它完全响应并且如果浏览器缩放到最小它可以是那么它将是每行一个图像。

**html**

```
<ul>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
</ul> 
```

**css**

```
ul{
    position:relative;
    float:left;
    width:100%;
    height:100%;
    margin:45px 0 0;
}
ul li{
    width: 33.3333%;
    float:left;
}
ul li img{
    display: block;
    height: auto;
    width: 100%;
} 
```

[JSFIDDLE](http://jsfiddle.net/mynameisdonald/gfjDk/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T14:18:44.133

您需要使用媒体查询。

只需为每个“断点”设置媒体查询并更改 li 宽度。

**例如：**

```
 /* Show one image on devices under 540px */
    @media screen and (max-width: 540px) { 
       ul li{
        width: 100%;
        float:left;
       }
    }

    /* Show three images on devices between 550 and 800px wide */  
    @media screen and (min-width: 540px) and (max-width: 800px) {
       ul li{
        width: 33.333%;
        float:left;
       }
    }

    /* Show five images on devices between 800px and 1180pxwide */  
    @media screen and (min-width: 800px) and (max-width: 1180px) {
       ul li{
        width: 20%;
        float:left;
       }
    } 
```

[http://jsfiddle.net/spacebeers/gfjDk/3/](http://jsfiddle.net/spacebeers/gfjDk/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:14:31.233

另一个想法是使用`display: inline-block;`代替和`float: left`设置列表项。`max-width: 308px;``min-width: 100px;`

# [*演示*](http://dabblet.com/gist/3835040)

**HTML**：

```
<ul>
    <li><img src="image.jpg"></li><!--
    --><li><img src="image.jpg"></li><!-- as many more list items as you need
    -->
</ul> 
```

我编写它的方式（在列表项之间带有注释）确实有一个目的 -[使用`inline-block`](https://stackoverflow.com/questions/11459714/inline-block-without-margins).

**CSS**：

```
ul {
    padding: 0;
    margin: 45px 0 0;
}
ul li{
    min-width: 100px;
    width: 33.3333%;
    max-width: 308px; 
    display: inline-block;
}
ul li img{
    display: block;
    height: auto;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:20:28.643

使用媒体查询（根据 SpaceBeers 的建议）以及列表项上的 min-width 属性... [JsFiddle](http://jsfiddle.net/4tDfV/)

# mysql - Sql 查询连接两个表以获得最终输出

> ID：12729260
> 
> 赞同：0
> 
> 时间：2012-10-04T14:13:23.547
> 
> 标签：mysql, sql, database, oracle

下面是两张表，客户和部门。我非常努力地获得输出。

我想编写只显示员工人数最多的部门名称的查询。

![在此处输入图像描述](../Images/8562d433151f5c5eeb63371310ab9cd7.png)

答案应该是这样的...

![在此处输入图像描述](../Images/367e0004a95e91871bd89fa4b09396bb.png)

请帮我写查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:23:23.883

我建议使用子查询，然后从该查询中进行选择。使用外部选择，您可以按员工人数排序，然后将其限制为`1`. 这将为您提供*最高*部门，但也可以灵活地修改为您提供`x`最高部门的数量列表。

```
SELECT Dep_Name FROM (
    SELECT
        d.Dep_Name, COUNT(*) AS `count`
    FROM
        Departments d
        JOIN Employees e ON e.Dep_id = d.Dep_id
    GROUP BY
        d.Dep_id
) AS q

ORDER BY `count` DESC
LIMIT 1 
```

**更新**

根据@Dems 的评论，您实际上可以在*没有*子查询的情况下处理这个问题：

```
SELECT
    d.Dep_Name
FROM
    Departments d
    JOIN Employees e ON e.Dep_id = d.Dep_id
GROUP BY
    d.Dep_id
ORDER BY
    COUNT(*) DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:35:13.337

我在 Oracle 10g 数据库中创建了 cus & dep 表并成功测试了我的代码。您使用的是什么数据库，您可以发布您的代码。有错误消息显示您的“订购依据”条款是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:16:33.443

```
 SELECT *
            FROM
            (
                SELECT
                  d.dep_id,
                  d.dep_name,
                  count(c.cus_id) cusCount
                FROM
                  cus c,
                  dep d
                WHERE
                  c.dep_id = d.dep_id
                GROUP BY
                  d.dep_id,d.dep_name
                ORDER BY
                  cusCount desc)
            WHERE
              ROWNUM = 1; 
```

# java - 您可以从命令行在 Eclipse 中启动 Java EE 服务器吗？

> ID：12729262
> 
> 赞同：2
> 
> 时间：2012-10-04T14:13:31.807
> 
> 标签：java, eclipse, jakarta-ee, ant, jboss

我有一些从命令行创建各种东西的 ant 脚本。

我的命令环境很复杂，我们正在做一些我真的不想在 eclipse 中做的令人讨厌的事情，这些事情不会真正从 eclipse 中调用的 ant 脚本运行。但是，如果有办法让 Eclipse 中的 ant 脚本启动服务器，那也可以。

有时他们需要一段时间才能运行。如果它们完成后，我可以在 eclipse 中启动我的 Java EE 服务器，那就太好了。如果这很重要，我碰巧使用 JBoss 1.4.2。如果可能的话，我想以调试模式启动它。这样，我可以在代码完成构建后立即进行测试，而无需导航到服务器并从 eclipse 中启动调试。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:21:23.743

您始终可以在外部管理您的应用程序服务器。通过调用`<JBOSS_HOME>/bin/run.(sh|bat) -b <ip_address>`(JBoss 5) 或`<JBOSS_HOME>/bin/standalone.(sh|bat) -b <ip_address>`

要从 ant 启动和停止服务器并让它看起来好像是从 eclipse 中启动的，这是一项艰巨的任务。您必须从 eclipse 中创建一个运行/启动配置，然后从 ant 调用它，请参阅[从 ANT 启动 Eclipse 运行配置](https://stackoverflow.com/questions/3045566/launch-an-eclipse-run-configuration-from-ant)

# java - 使用 Selenium WebDriver 和 Java 切换选项卡

> ID：12729265
> 
> 赞同：74
> 
> 时间：2012-10-04T14:13:38.920
> 
> 标签：java, testing, selenium, automation, selenium-webdriver

在 Java 中使用 Selenium WebDriver。我正在尝试自动化一项功能，在该功能中我必须打开一个新选项卡并在那里执行一些操作并返回上一个选项卡（父级）。我使用了开关手柄，但它不起作用。一件奇怪的事情是两个选项卡具有相同的窗口句柄，因此我无法在选项卡之间切换。

但是，当我尝试使用不同的 Firefox 窗口时，它可以工作，但对于选项卡它不起作用。

如何切换标签？或者，如何在不使用窗口句柄的情况下切换选项卡，因为在我的情况下，两个选项卡的窗口句柄相同？

（我观察到，当您在同一个窗口中打开不同的选项卡时，窗口句柄保持不变）

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-04-08T17:31:56.227

```
 psdbComponent.clickDocumentLink();
    ArrayList<String> tabs2 = new ArrayList<String> (driver.getWindowHandles());
    driver.switchTo().window(tabs2.get(1));
    driver.close();
    driver.switchTo().window(tabs2.get(0)); 
```

这段代码非常适合我。试试看。在你想在新标签上做某事之前，你总是需要将你的驱动程序切换到新标签。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-05-14T11:27:25.137

这是一个简单的解决方案，用于打开新选项卡、将焦点更改为它、关闭选项卡并将焦点返回到旧/原始选项卡：

```
@Test
public void testTabs() {
    driver.get("https://business.twitter.com/start-advertising");
    assertStartAdvertising();

    // considering that there is only one tab opened in that point.
    String oldTab = driver.getWindowHandle();
    driver.findElement(By.linkText("Twitter Advertising Blog")).click();
    ArrayList<String> newTab = new ArrayList<String>(driver.getWindowHandles());
    newTab.remove(oldTab);
    // change focus to new tab
    driver.switchTo().window(newTab.get(0));
    assertAdvertisingBlog();

    // Do what you want here, you are in the new tab

    driver.close();
    // change focus back to old tab
    driver.switchTo().window(oldTab);
    assertStartAdvertising();

    // Do what you want here, you are in the old tab
}

private void assertStartAdvertising() {
    assertEquals("Start Advertising | Twitter for Business", driver.getTitle());
}

private void assertAdvertisingBlog() {
    assertEquals("Twitter Advertising", driver.getTitle());
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-27T15:06:09.537

Web 驱动程序处理不同窗口的方式和处理不同选项卡的方式有所不同。

**案例1：**
如果有多个窗口，那么以下代码可以提供帮助：

```
//Get the current window handle
String windowHandle = driver.getWindowHandle();

//Get the list of window handles
ArrayList tabs = new ArrayList (driver.getWindowHandles());
System.out.println(tabs.size());
//Use the list of window handles to switch between windows
driver.switchTo().window(tabs.get(0));

//Switch back to original window
driver.switchTo().window(mainWindowHandle); 
```

**情况2：**
如果同一个窗口有多个选项卡，那么只有一个窗口句柄。因此，在窗口句柄之间切换会使控件保持在同一个选项卡中。
在这种情况下，使用 Ctrl + \t (Ctrl + Tab) 在选项卡之间切换更有用。

```
//Open a new tab using Ctrl + t
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL +"t");
//Switch between tabs using Ctrl + \t
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL +"\t"); 
```

详细的示例代码可以在这里找到：http:
[//design-interviews.blogspot.com/2014/11/switching-between-tabs-in-same-browser-window.html](http://design-interviews.blogspot.com/2014/11/switching-between-tabs-in-same-browser-window.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-04T15:43:29.650

**解决方法**

*假设*：通过单击网页上的某些内容会打开一个新选项卡。

使用以下逻辑切换到第二个选项卡。

```
new Actions(driver).sendKeys(driver.findElement(By.tagName("html")), Keys.CONTROL).sendKeys(driver.findElement(By.tagName("html")),Keys.NUMPAD2).build().perform(); 
```

以同样的方式，您可以再次切换回第一个选项卡。

```
new Actions(driver).sendKeys(driver.findElement(By.tagName("html")), Keys.CONTROL).sendKeys(driver.findElement(By.tagName("html")),Keys.NUMPAD1).build().perform(); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-06-10T04:54:24.020

由于`driver.window_handles`不是 in order ，因此这是一个更好的解决方案。

> 首先使用快捷方式切换到第一个选项卡，`Control + X`以切换到浏览器窗口中的第“x”个选项卡。

```
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "1");
# goes to 1st tab

driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "4");
# goes to 4th tab if its exists or goes to last tab. 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-24T07:11:41.553

```
String selectLinkOpeninNewTab = Keys.chord(Keys.CONTROL, Keys.RETURN);
    WebElement e = driver.findElement(By
            .xpath("html/body/header/div/div[1]/nav/a"));
e.sendKeys(selectLinkOpeninNewTab);//to open the link in a current page in to the browsers new tab

    e.sendKeys(Keys.CONTROL + "\t");//to move focus to next tab in same browser
    try {
        Thread.sleep(8000);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    //to wait some time in that tab
    e.sendKeys(Keys.CONTROL + "\t");//to switch the focus to old tab again 
```

希望对你有帮助。。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-19T12:55:30.450

您需要做的第一件事是打开一个新选项卡并保存它的句柄名称。最好使用 javascript 而不是键 (ctrl+t) 来执行此操作，因为自动化服务器上​​的键并不总是可用的。例子：

```
public static String openNewTab(String url) {
    executeJavaScript("window.parent = window.open('parent');");
    ArrayList<String> tabs = new ArrayList<String>(bot.driver.getWindowHandles());
    String handleName = tabs.get(1);
    bot.driver.switchTo().window(handleName);
    System.setProperty("current.window.handle", handleName);
    bot.driver.get(url);
    return handleName;
} 
```

您需要做的第二件事是在选项卡之间切换。仅通过切换窗口句柄来执行此操作并不总是有效，因为您将处理的选项卡不会始终处于焦点，并且 Selenium 会不时出现故障。正如我所说，使用键有点问题，而且 javascript 并不真正支持切换选项卡，所以我使用警报来切换选项卡，它就像一个魅力：

```
public static void switchTab(int tabNumber, String handleName) {
        driver.switchTo().window(handleName);
        System.setProperty("current.window.handle", handleName);
        if (tabNumber==1)
            executeJavaScript("alert(\"alert\");");
        else
            executeJavaScript("parent.alert(\"alert\");");
        bot.wait(1000);
        driver.switchTo().alert().accept();
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-28T17:17:33.650

```
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL,Keys.SHIFT,Keys.TAB); 
```

此方法有助于在多个窗口之间切换。这种方法的限制性问题是它只能使用这么多次，直到达到所需的窗口。希望能帮助到你。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-09T18:31:35.493

对我有用的简单答案：

```
for (String handle1 : driver1.getWindowHandles()) {
        System.out.println(handle1); 
        driver1.switchTo().window(handle1);     
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-07-10T19:16:47.830

```
Set<String> tabs = driver.getWindowHandles();
Iterator<String> it = tabs.iterator();
tab1 = it.next();
tab2 = it.next();
driver.switchTo().window(tab1);
driver.close();
driver.switchTo().window(tab2); 
```

尝试这个。它应该工作

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-08-24T14:38:11.403

Selenium 2.53.1 使用 firefox 47.0.1 作为 Java 中的 WebDriver：无论我打开多少个选项卡，“driver.getWindowHandles()”都只会返回一个句柄，因此无法在选项卡之间切换。

一旦我开始使用 Chrome 51.0，我就可以得到所有的句柄。以下代码显示了如何访问多个驱动程序和每个驱动程序中的多个选项卡。

```
// INITIALIZE TWO DRIVERS (THESE REPRESENT SEPARATE CHROME WINDOWS)
driver1 = new ChromeDriver();
driver2 = new ChromeDriver();

// LOOP TO OPEN AS MANY TABS AS YOU WISH
for(int i = 0; i < TAB_NUMBER; i++) {
   driver1.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "t");
   // SLEEP FOR SPLIT SECOND TO ALLOW DRIVER TIME TO OPEN TAB
   Thread.sleep(100);

// STORE TAB HANDLES IN ARRAY LIST FOR EASY ACCESS
ArrayList tabs1 = new ArrayList<String> (driver1.getWindowHandles());

// REPEAT FOR THE SECOND DRIVER (SECOND CHROME BROWSER WINDOW)

// LOOP TO OPEN AS MANY TABS AS YOU WISH
for(int i = 0; i < TAB_NUMBER; i++) {
   driver2.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "t");
   // SLEEP FOR SPLIT SECOND TO ALLOW DRIVER TIME TO OPEN TAB
   Thread.sleep(100);

// STORE TAB HANDLES IN ARRAY LIST FOR EASY ACCESS
ArrayList tabs2 = new ArrayList<String> (driver1.getWindowHandles());

// NOW PERFORM DESIRED TASKS WITH FIRST BROWSER IN ANY TAB
for(int ii = 0; ii <= TAB_NUMBER; ii++) {
   driver1.switchTo().window(tabs1.get(ii));
   // LOGIC FOR THAT DRIVER'S CURRENT TAB
}

// PERFORM DESIRED TASKS WITH SECOND BROWSER IN ANY TAB
for(int ii = 0; ii <= TAB_NUMBER; ii++) {
   drvier2.switchTo().window(tabs2.get(ii));
   // LOGIC FOR THAT DRIVER'S CURRENT TAB
} 
```

希望这能让您很好地了解如何在多个浏览器窗口中操作多个选项卡。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-01-31T11:39:29.807

Please see below:

```
WebDriver driver = new FirefoxDriver();

driver.manage().window().maximize();
driver.get("https://www.irctc.co.in/");
String oldTab = driver.getWindowHandle();

//For opening window in New Tab
String selectLinkOpeninNewTab = Keys.chord(Keys.CONTROL,Keys.RETURN); 
driver.findElement(By.linkText("Hotels & Lounge")).sendKeys(selectLinkOpeninNewTab);

// Perform Ctrl + Tab to focus on new Tab window
new Actions(driver).sendKeys(Keys.chord(Keys.CONTROL, Keys.TAB)).perform();

// Switch driver control to focused tab window
driver.switchTo().window(oldTab);

driver.findElement(By.id("textfield")).sendKeys("bangalore"); 
```

Hope this is helpful!

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-04-14T06:17:06.583

这是一个非常简单的过程：假设您有两个选项卡，因此您需要先关闭当前选项卡，`client.window(callback)`因为 switch 命令“切换到第一个可用的选项卡”。然后您可以使用 轻松切换选项卡`client.switchTab`。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-04-29T05:00:29.720

我最近遇到了一个问题，链接是在一个新选项卡中打开的，但是 selenium 仍然专注于初始选项卡。

我正在使用 Chromedriver，专注于标签的唯一方法是让我使用`switch_to_window()`.

这是Python代码：

```
driver.switch_to_window(driver.window_handles[-1]) 
```

所以提示是找出您需要的窗口句柄的名称，它们作为列表存储在

```
driver.window_handles 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-04-22T13:09:59.890

如何在浏览器中的选项卡之间切换的一个简短示例（如果有一个窗口）：

```
// open the first tab
driver.get("https://www.google.com");
Thread.sleep(2000);

// open the second tab
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "t");
driver.get("https://www.google.com");
Thread.sleep(2000);

// switch to the previous tab
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL + "" + Keys.SHIFT + "" + Keys.TAB);
Thread.sleep(2000); 
```

我写`Thread.sleep(2000)`只是为了有一个超时来查看选项卡之间的切换。

您可以使用 CTRL+TAB 切换到下一个选项卡，使用 CTRL+SHIFT+TAB 切换到上一个选项卡。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-08-09T06:36:14.683

获取父窗口句柄。

```
String parentHandle = driverObj.getWindowHandle();
public String switchTab(String parentHandle){
    String currentHandle ="";
    Set<String> win  = ts.getDriver().getWindowHandles();   

    Iterator<String> it =  win.iterator();
    if(win.size() > 1){
        while(it.hasNext()){
            String handle = it.next();
            if (!handle.equalsIgnoreCase(parentHandle)){
                ts.getDriver().switchTo().window(handle);
                currentHandle = handle;
            }
        }
    }
    else{
        System.out.println("Unable to switch");
    }
    return currentHandle;
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-02-28T11:21:51.547

所选答案的缺陷是它不必要地假定`webDriver.getWindowHandles()`. 该`getWindowHandles()`方法返回 a `Set`，它不保证顺序。

我使用以下代码更改选项卡，它不假定任何顺序。

```
String currentTabHandle = driver.getWindowHandle();
String newTabHandle = driver.getWindowHandles()
       .stream()
       .filter(handle -> !handle.equals(currentTabHandle ))
       .findFirst()
       .get();
driver.switchTo().window(newTabHandle); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-11-24T15:01:34.470

```
WebDriver driver = new FirefoxDriver();

driver.switchTo().window(driver.getWindowHandles().toArray()[numPage].toString());

numPage - int (0,1..) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-06-25T07:28:27.477

公共类 TabBrowserDemo {

```
public static void main(String[] args) throws InterruptedException {
    System.out.println("Main Started");
    System.setProperty("webdriver.gecko.driver", "driver//geckodriver.exe");
    WebDriver driver = new FirefoxDriver();
    driver.get("https://www.irctc.co.in/eticketing/userSignUp.jsf");
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

    driver.findElement(By.xpath("//a[text()='Flights']")).click();
    waitForLoad(driver);
    Set<String> ids = driver.getWindowHandles();
    Iterator<String> iterator = ids.iterator();
    String parentID = iterator.next();
    System.out.println("Parent WIn id " + parentID);
    String childID = iterator.next();
    System.out.println("child win id " + childID);

    driver.switchTo().window(childID);
    List<WebElement> hyperlinks = driver.findElements(By.xpath("//a"));

    System.out.println("Total links in tabbed browser " + hyperlinks.size());

    Thread.sleep(3000);
//  driver.close();
    driver.switchTo().window(parentID);
    List<WebElement> hyperlinksOfParent = driver.findElements(By.xpath("//a"));

    System.out.println("Total links " + hyperlinksOfParent.size());

}

public static void waitForLoad(WebDriver driver) {
    ExpectedCondition<Boolean> pageLoadCondition = new
            ExpectedCondition<Boolean>() {
                public Boolean apply(WebDriver driver) {
                    return ((JavascriptExecutor)driver).executeScript("return document.readyState").equals("complete");
                }
            };
    WebDriverWait wait = new WebDriverWait(driver, 30);
    wait.until(pageLoadCondition);
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-09-08T10:12:29.567

这适用于 Firefox 和 Chrome 的 MacOS：

```
// opens the default browser tab with the first webpage
driver.get("the url 1");
thread.sleep(2000);

// opens the second tab
driver.findElement(By.cssSelector("Body")).sendKeys(Keys.COMMAND + "t");
driver.get("the url 2");
Thread.sleep(2000);

// comes back to the first tab
driver.findElement(By.cssSelector("Body")).sendKeys(Keys.COMMAND, Keys.SHIFT, "{"); 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-03-15T09:45:31.800

```
protected void switchTabsUsingPartOfUrl(String platform) {
    String currentHandle = null;
    try {
        final Set<String> handles = driver.getWindowHandles();
        if (handles.size() > 1) {
            currentHandle = driver.getWindowHandle();
        }
        if (currentHandle != null) {
            for (final String handle : handles) {
                driver.switchTo().window(handle);
                if (currentUrl().contains(platform) && !currentHandle.equals(handle)) {
                    break;
                }
            }
        } else {
            for (final String handle : handles) {
                driver.switchTo().window(handle);
                if (currentUrl().contains(platform)) {
                    break;
                }
            }
        }
    } catch (Exception e) {
        System.out.println("Switching tabs failed");
    }
} 
```

调用此方法并将参数传递给要切换到的选项卡的 url 的子字符串

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-06-24T15:01:51.243

```
 public void switchToNextTab() {
        ArrayList<String> tab = new ArrayList<>(driver.getWindowHandles());
        driver.switchTo().window(tab.get(1));
    }

    public void closeAndSwitchToNextTab() {
        driver.close();
        ArrayList<String> tab = new ArrayList<>(driver.getWindowHandles());
        driver.switchTo().window(tab.get(1));
    }

    public void switchToPreviousTab() {
        ArrayList<String> tab = new ArrayList<>(driver.getWindowHandles());
        driver.switchTo().window(tab.get(0));
    }

    public void closeTabAndReturn() {
        driver.close();
        ArrayList<String> tab = new ArrayList<>(driver.getWindowHandles());
        driver.switchTo().window(tab.get(0));
    }

    public void switchToPreviousTabAndClose() {
        ArrayList<String> tab = new ArrayList<>(driver.getWindowHandles());
        driver.switchTo().window(tab.get(1));
        driver.close();
    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-16T16:30:29.107

使用 Java，我使用它来将 selenium 焦点切换到新选项卡。

```
//Before the action that redirect to the new tab:
String windHandleCurrent = driver.getWindowHandle();
// code that click in a btn/link in order to open a new tab goes here
// now to make selenium move to the new tab 
ArrayList<String> windows = new ArrayList<String>(driver.getWindowHandles());
    for(int i =0;i<windows.size();i++ ) {
        String aWindow = windows.get(i);
        if(aWindow != windHandleCurrent) {
            driver.switchTo().window(aWindow);
        }
    }
// now you can code your AssertJUnit for the new tab. 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-02-10T13:25:05.167

字符串 mainWindow = driver.getWindowHandle(); seleniumHelper.switchToChildWindow(); .. ..//你的断言步骤

seleniumHelper.switchToWindow(mainWindow);

# asp.net - C# - 一次向 AS400 插入多条记录

> ID：12729267
> 
> 赞同：4
> 
> 时间：2012-10-04T14:13:48.877
> 
> 标签：asp.net, c#-4.0, odbc, db2, ibm-midrange

我有这样的问题：
1\. 我使用 C# ASP .Net 从 MySQL 检索数据。-- 完成 --
2\. 来自 1 号的所有数据将被插入到 AS400 的表中。- 我在这一步遇到错误 -

错误消息说`ERROR [42000] [IBM][System i Access ODBC Driver][DB2 for i5/OS]SQL0104 - Token ; was not valid. Valid tokens: <END-OF-STATEMENT>.`。确实，我使用分号来分隔查询，但这是不允许的。我用谷歌搜索，但我找不到解决方案。
我的问题是`<END-OF-STATEMENT>`该错误消息的含义是什么..？
这是我的源代码。

```
private static void doInsertDOCADM(MySqlConnection conn)
    {
        // Get Temporary table
        String query = "SELECT * FROM TB_T_DOC_TEMPORARY_ADM";
        DataTable dt = CSTDDBUtil.ExecuteQuery(query);

        OdbcConnection as400Con = null;
        as400Con = CSTDDBUtil.GetAS400Connection();
        as400Con.Open();

        if (dt != null && dt.Rows.Count > 0)
        {
            int counter = 1, maxInsertLoop = 50;

            using (OdbcCommand cmd = new OdbcCommand())
            {
                cmd.Connection = as400Con;

                foreach (DataRow dr in dt.Rows)
                {
                    cmd.CommandText += "INSERT INTO DCDLIB.WDFDOCQ VALUES " + "(?,?,?,?);";

                    cmd.Parameters.Add("1", OdbcType.VarChar).Value = dr["PROD_MONTH"].ToString();
                    cmd.Parameters.Add("2", OdbcType.VarChar).Value = dr["NEW_MAIN_DEALER_CD"].ToString();
                    cmd.Parameters.Add("3", OdbcType.VarChar).Value = dr["MODEL_SERIES"].ToString();
                    cmd.Parameters.Add("4", OdbcType.VarChar).Value = dr["MODEL_CD"].ToString();

                    if (counter < maxInsertLoop)
                    {
                        counter++;
                    }
                    else
                    {
                        counter = 1;
                        cmd.ExecuteNonQuery();
                        cmd.CommandText = "";
                        cmd.Parameters.Clear();
                    }
                }

                if (counter > 1) cmd.ExecuteNonQuery();
            }
        } 
```

注意：我使用这种方式（先收集一些查询，然后执行这些查询）来提高我的应用程序的性能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:05:26.720

正如 Clockwork-Muse 指出的那样，问题在于您只能在命令中运行单个 SQL 语句。iSeries 服务器不会一次处理多个语句。

如果您的 iSeries 服务器正在运行 V6R1 或更高版本，您可以使用块插入来插入多行。我不确定您是否可以通过 ODBC 驱动程序来做到这一点，但由于您有 Client Access，您应该能够安装 iSeries ADO.NET 驱动程序。ADO.NET iSeries 驱动程序和 ODBC 驱动程序之间没有太多区别，但是通过 ADO.NET，您可以访问 iSeries 特定的功能。

使用 ADO.NET 驱动程序，多次插入变得很简单：

```
 using (iDB2Connection connection = new iDB2Connection(".... connection string ..."))
        {
            // Create a new SQL command
            iDB2Command command = 
                new iDB2Command("INSERT INTO MYLIB.MYTABLE VALUES(@COL_1, @COL_2", connection);

            // Initialize the parameters collection
            command.DeriveParameters();

            // Insert 10 rows of data at once
            for (int i = 0; i < 20; i++)
            {
                // Here, you set your parameters for a single row
                command.Parameters["@COL_1"].Value = i;
                command.Parameters["@COL_2"].Value = i + 1;
                // AddBatch() tells the command you're done preparing a row
                command.AddBatch();
            }

            // The query gets executed
            command.ExecuteNonQuery();
        }
    } 
```

IBM 还提供了一些参考代码来使用 VB6 和 ODBC 进行块插入，但我不确定它是否可以轻松移植到 .NET：http: [//publib.boulder.ibm.com/infocenter/iseries/v5r4 /index.jsp?topic=%2Frzaik%2Frzaikextfetch.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaik%2Frzaikextfetch.htm)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:46:10.437

当它说它`<END-OF-STATEMENT>`意味着它所说的 - 它希望这是执行语句的结尾。我不记得 AS/400 是否允许每个执行单元（完全）有多个语句，但显然它在这里不起作用。司机也没有处理它。

实际上，你有一个更大、更根本的问题；具体来说，您`INSERT`一次是一行（通常称为 row-by-agonizing-row）。`VALUES`DB2 允许在子句 (so, )中使用逗号分隔的行列表`INSERT INTO <table_name> VALUES(<row_1_columns>), (<row_2_columns>)`- 您使用的驱动程序是否允许您提供数组（整行或每列）？否则，请考虑使用提取/加载实用程序来处理此类问题 - 我可以向您保证，这将加快进程。

# windows - Windows 程序集 (x86) 从标准输入读取并输出到标准输出

> ID：12729268
> 
> 赞同：0
> 
> 时间：2012-10-04T14:13:48.540
> 
> 标签：windows, assembly, x86, stdout, stdin

我最近想出了如何在汇编中写入标准输出，但现在无法从标准输入读取，并将我读回的内容输出到标准输出。这是我到目前为止的代码：

```
.386
.model flat, stdcall

WriteFile PROTO STDCALL:DWORD, :PTR, :DWORD, :PTR DWORD, :PTR OVERLAPPED
ReadFile  PROTO STDCALL:DWORD, :PTR, :DWORD, :PTR DWORD, :PTR OVERLAPPED
GetStdHandle PROTO STDCALL:DWORD
.data

.data?
input DW ?
input_size DD ?
read DD ?

.code
main:
    INVOKE GetStdHandle, -10
    INVOKE ReadFile, eax, OFFSET input, input_size, read, 0
    INVOKE GetStdHandle, -11
    INVOKE WriteFile, eax, OFFSET input, OFFSET input_size, read, 0
    RET 
END main 
```

我很确定我读错了。我很确定`input_size`并且`read`没有按预期运行（如果我`input_size`用 a替换`number`它会显示一个空间`number`时间），这导致了我的问题（当我输入我的输入并点击返回时，它根本不显示任何内容）。

我已经为此摸索了很长一段时间，并希望得到任何帮助。（我这样做只是为了了解这不是家庭作业）。

我的问题本质上是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:47:53.290

您只为输入缓冲区分配两个字节：

```
input DW ? 
```

您的输入大小为零，导致 ReadFile 最多读取 0 个字节：

```
input_size DD ? 
```

nNumberOfBytesToRead 应该作为值而不是指针传递。并且您想写入与 Readfile 中输入的字节数一样多的字节：

```
INVOKE WriteFile, eax, OFFSET input, OFFSET input_size, read, 0
INVOKE WriteFile, eax, OFFSET input, read, read, 0 
```

# android - 移动网站间歇性地不在 Android 浏览器中滚动

> ID：12729269
> 
> 赞同：1
> 
> 时间：2012-10-04T14:13:50.547
> 
> 标签：android, browser, scroll

我是 Android 网络开发的新手，目前对此感到有些沮丧。我正在处理的网站 ( [http://truthfortheworld.org](http://truthfortheworld.org) ) 在 Mobile Safari 上看起来和工作正常，但在 Android 的默认浏览器中，除非我刷新页面，否则页面拒绝向下滚动。这很令人沮丧，我无法弄清楚发生了什么。有时我会加载一个看起来允许滚动的页面，但随后它会吸附到顶部并且不会移动。

我的猜测是这与视口设置和 CSS 媒体查询的组合有关。这是我的视口元标记：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" /> 
```

我尝试了其他几个视口设置，但没有任何效果。当我允许缩放时，页面将在放大时滚动，但在您缩小后再次捕捉到顶部。

这是我的两个样式表：

```
<link rel='stylesheet' media='only screen and (min-device-width:800px)' type='text/css' href='/css/main.css' />
<link rel='stylesheet' media="only screen and (max-device-width:1136px)" type='text/css' href='/css/handheld.css' /> 
```

第一个用于常规屏幕，第二个用于小型设备。这个问题最糟糕的是，有时它会消失一段时间，一切正常，但随后又重新启动。这让我很困惑！

我使用的是安卓 2.3.4。如果您对我有任何见解，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:25:24.117

我在同一个 Android 版本（2.3.4）中遇到了滚动问题。我的 phonegap 应用程序没有滚动。因为我`overflow:hidden`在正文中添加了。当我*删除* `overflow:hidden`时，它开始滚动。

# cuda - CUDA高效划分？

> ID：12729271
> 
> 赞同：3
> 
> 时间：2012-10-04T14:13:56.033
> 
> 标签：cuda, gpu, gpgpu, nvidia

我想知道是否有一种有效的方法来划分数组的元素。我正在使用矩阵值 10000x10000 运行，与其他内核相比，它需要相当长的时间。除法是昂贵的操作，我看不出如何改进它。

```
__global__ void division(int N, float* A, int* B){

  int row = blockIdx.x * blockDim.x + threadIdx.x;
  int col = blockIdx.y * blockDim.y + threadIdx.y;

  if((row < N) && (col <= row) ){
    if( B[row*N+col] >0 )
      A[row*N+col] /= (float)B[row*N+col];
  }

} 
```

内核启动

```
 int N = 10000;
  int threads = 32
  int blocks = (N+threads-1)/threads
  dim3 t(threads,threads);
  dim3 b(blocks, blocks);
  division<<< b, t >>>(N, A, B);
  cudaThreadSynchronize(); 
```

选项 B：

```
__global__ void division(int N, float* A, int* B){
  int k =  blockIdx.x * blockDim.x + threadIdx.x;
  int kmax = N*(N+1)/2 
  int i,j;
  if(k< kmax){
    row = (int)(sqrt(0.25+2.0*k)-0.5); 
    col = k - (row*(row+1))>>1;
    if( B[row*N+col] >0 )
      A[row*N+col] /= (float)B[row*N+col];
  }
} 
```

推出与

```
 int threads =192;
  int totalThreadsNeeded = (N*(N+1)/2;
  int blocks = ( threads + (totalThreadsNeeded)-1 )/threads;
  division<<<blocks, threads >>>(N, A, B); 
```

即使 threadId 是正确的，为什么选项 B 会给出错误的结果？这里缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:27:53.197

您的基本问题是您正在启动一个难以置信的巨大网格（对于您的 10000x10000 数组示例，有超过 1 亿个线程），然后由于内核中访问模式的三角形性质，这些线程中有一半从来没有做任何有效的事情。因此，大量的 GPU 周期被无缘无故地浪费了。此外，您使用的访问模式不允许合并内存访问，这将进一步降低实际执行有用工作的线程的性能。

如果我正确理解了您的问题，则内核仅对正方形数组的下三角形执行逐元素除法。如果是这种情况，同样可以使用以下方法完成：

```
__global__ 
void division(int N, float* A, int* B)
{
    for(int row=blockIdx.x; row<N; row+=gridDim.x) {
        for(int col=threadIdx.x; col<=row; col+=blockDim.x) {
            int val = max(1,B[row*N+col]);
            A[row*N+col] /= (float)val;
        }
    }
} 
```

[免责声明：用浏览器编写，从未编译，从未测试，使用风险自负]

这里使用一维网格，每个块一次计算一行。块中的线程沿行移动，因此内存访问被合并。在评论中您提到您的 GPU 是 Tesla C2050。该设备只需要 112 个块，每个块 192 个线程，就可以完全“填充”14 个 SM 中的每一个，每个块有 8 个块和每个 SM 的最大并发线程数。所以启动参数可能是这样的：

```
int N = 10000;
int threads = 192;
int blocks = min(8*14, N);
division<<<blocks, threads>>>(N, A, B); 
```

我希望这比您当前的方法运行得快得多。如果数值精度不是那么重要，您可以通过用近似倒数内在和浮点乘法替换除法来进一步加快速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T14:55:05.377

因为线程是以 32 个一组的形式执行的，称为 warp，如果两个`if`条件都只`true`针对其中一个线程，那么您需要为一个 warp 中的所有 32 个线程的划分付费。如果条件是`false`多线程，看看是否可以在单独的内核中过滤掉不需要除法的值。

从 int 到 float 的转换本身可能很慢。如果是这样，您也许可以在前面的步骤中直接生成浮点数，并将 B 作为浮点数数组传入。

您可以在前面生成 B 数组的步骤中生成倒数。如果是这样，您可以在此内核中使用乘法而不是除法。`(a / b == a * 1 / b)`.

根据您的算法，也许您可​​以使用较低精度的除法。有一个内在的, `__fdividef(x, y)`, 你可以试试。还有一个编译器标志，`-prec-div=false`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T17:30:34.110

首先要看的应该是合并的内存访问。这里没有非合并模式的原因，只是交换行和列以避免浪费大量内存带宽：

```
int col = blockIdx.x * blockDim.x + threadIdx.x;
int row = blockIdx.y * blockDim.y + threadIdx.y;
...
A[row*N+col] ... 
```

即使这是在计算能力 2.0 或更高版本上运行的，缓存也不足以弥补这种次优模式。

# c# - 使用 Active Directory c# 从组中获取所有用户的电子邮件

> ID：12729277
> 
> 赞同：0
> 
> 时间：2012-10-04T14:14:33.740
> 
> 标签：c#

我需要特定组的所有电子邮件地址。请帮我

```
string filter1 = string.Format("(&(objectClass=group)(cn={0}))", "groupname");
        DirectorySearcher searcher = new DirectorySearcher(entry);
        searcher.Filter = filter1;
        searcher.SearchScope = SearchScope.Subtree;
        searcher.PropertiesToLoad.Add("member");
        SearchResult res = searcher.FindOne();
        ArrayList userNames = new ArrayList();
        if (res != null)
        {
            for (int counter = 0; counter <res.Properties["member"].Count; counter++)
            {
                string user = (string)res.Properties["member"][counter];
                userNames.Add(user);
            }
        } 
```

我收到用户名和其他详细信息，但没有收到电子邮件。请告诉我直接找到每个用户的电子邮件地址的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:15:53.130

您可以尝试使用此代码 - 基于`PrincipalContext` 类

```
var username = "username";
var domain = "domain";
var emailAddresses = new List<string>();

var principalContext = new PrincipalContext(ContextType.Domain, domain);
var userPrincipal  = UserPrincipal.FindByIdentity(principalContext, username);
// Add the "mail" entry
emailAddresses.Add(userPrincipal.EmailAddress); 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/bb344891 (v=vs.90).aspx](http://msdn.microsoft.com/fr-fr/library/bb344891(v=vs.90).aspx)

# vbscript - VBA：将字符串与查找函数值进行比较

> ID：12729278
> 
> 赞同：0
> 
> 时间：2012-10-04T14:14:35.363
> 
> 标签：vbscript

如何在查找功能中与区分大小写进行比较？

像 stringtxt = Range("A1:A10").Find(What:=stringtxt , Lookat:=xlWhole,MatchCase:=False)

这里假设 stringtxt="ABCD (abcd)" AND 在一个单元格的范围内可能具有类似“ABCD (ABCD)”的值，我必须将其与指定范围内的内容进行比较。我尝试像“UCase”一样添加。没有工作。MatchCase 我尝试了真值和假值。但没有工作。建议我一些更好的答案来比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:29:51.590

Find 方法的参数之一是 MatchCase 参数，如下所示：

![在此处输入图像描述](../Images/8c3d2b54cf797f7e342ab1b44906d25f.png)

认为这应该可以帮助您解决这个问题。

# java - Junit如何检查字符串是否等于两个字符串之一？

> ID：12729280
> 
> 赞同：20
> 
> 时间：2012-10-04T14:14:35.520
> 
> 标签：java, junit

这似乎是一个超级简单的问题，但我就是想不通。

我只是想断言一个字符串等于“string1”或“string2”。

这是我尝试过的，但显然都不起作用。

```
assertEquals(d.getFormType(), "string1") || assertEquals(d.getFormType(), "string2");

assertEquals(d.getFormType(), "string1" || "string2"); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T14:20:31.743

我建议你使用*Hamcrest*匹配器。它们通过 集成到 JUnit 中`assertThat()`，但您也需要下载并安装[hamcrest-all.jar](http://code.google.com/p/hamcrest/downloads/list)。

使用 Hamcrest，您可以像这样解决您的问题：

```
import static org.hamcrest.Matchers.*;
import static org.junit.Assert.*;

assertThat(d.getFormType(), isOneOf("string1", "string2")); 
```

如果您无法安装 Hamcrest，另一种选择是使用正则表达式：

```
assertTrue(d.getFormType().matches("(string1|string2)")); 
```

`equals()`这比组合两个语句更短，并且可以说更具可读性：

```
String actual = d.getFormType();
assertTrue("string1".equals(actual) || "string2".equals(actual)); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-04T14:16:58.643

你可以使用`assertTrue()`：

```
assertTrue(d.getFormType().equals("string1") ||
           d.getFormType().equals("string2")); 
```

或使用扩展版本在失败时提供更多信息：

```
assertTrue("Unexpected value for d.getFormType(): " + d.getFormType(),
           d.getFormType().equals("string1") ||
           d.getFormType().equals("string2")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T14:17:41.907

断言类没有直接的方法来做你想做的事。但是您可以随时退回`assertTrue`并检查您想要的任何条件。

```
assertTrue("string1".equals(d.getFormType()) || "string2".equals(d.getFormType())) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T14:21:06.457

怎么样

```
Assert.assertTrue("msg", Arrays.asList("string1", "string2").contains(searchString)); 
```

如果失败，我会将 msg 更新为一个很好的友好消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T14:17:45.990

我不知道这样做的确切 JUnit 风格，但我会做一些更简单的事情：

```
boolean stringEquals = false;
if ("string1".equals(d.getFormType()) || "string2".equals(d.getFormType())) {
    stringEquals = true;
}
assertTrue(stringEquals); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T14:19:10.803

你的问题没有意义。单元测试总是有相同的结果——它们不是随机的，或者更确切地说，它们*不应该*是随机的。这就是 JUnit 不支持交替结果的原因。

尝试找到一种方法来设置测试，使输出不会改变。

如果这真的不可能，那么您的代码或至少它的设计可能有问题。

尝试解决这个问题。

如果你真的不能，那么你可以使用：

```
boolean valid = ....some complex check...
assertTrue( valid ); 
```

**[编辑]**要一次测试多个值，您可以使用以下技巧：

```
String[] values = ...;
assertEquals( "0:...\n1:...",  "0:" + values[0] + "\n" + "1:" + values[1] ... ); 
```

即，您将所有值放入一个长字符串中，然后检查整个字符串。大多数 IDE 会并排显示两个文本编辑器中的差异，因此任何不匹配都会很容易看到 +`0:`文本中的小提示 ( , ...) 会告诉您错误的确切位置。

# ruby-on-rails - 如何检查 Rails 中更新操作中的属性是否发生变化？

> ID：12729281
> 
> 赞同：2
> 
> 时间：2012-10-04T14:14:39.717
> 
> 标签：ruby-on-rails, actioncontroller

我正在尝试检查-是否更改了某些（语言）属性，并且是否等于某个值，我需要将其更改为其他适当的值。

这是我的代码：

**编辑**：

```
 def update
@website = Website.find(params[:id])
@website.language = params[:website][:language]
if @website.language_changed?
  if params[:website][:language] == "Automatic (by user's browser language)"
    @website.language = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
  end
end
respond_to do |format|
 if @website.save
   format.html { redirect_to @website, 
  notice: 'Note: code has been updated. Please replace the code you have on your website with the code below. Only then changes will take effect.' }
   end
  end
end 
```

我的表格：

```
 <%= f.label "Website category"%>
  <%= f.select :category, options_for_select([
      "--- please select ---",
      "Banking",
      "Computers]) %>
  <%= f.label "Language preferences"%>
  <%= f.select :language, options_for_select([
       "--- please select ---",  
       "Automatic (by user's browser language)",
        "Arabic",
        "Chinese"]) %> 
```

当我更改类别时 - 它会将语言更改为默认值。我怎样才能防止这种情况？

给我错误：

```
 undefined method `updated?' for "--- please select ---":String 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:49:17.900

我刚刚通过控制台尝试了这个，看起来 ActiveRecord 没有在你进行大规模属性更新时跟踪更改，例如`@website.attributes = params[:website]`. 做类似的事情可能更简单`if @website.language != params[:website][:language]`（当然，稍后将更新移动到某个地方。）。有点丑，我意识到，但它会工作。当然，您始终可以考虑增强您的模型以跟踪大规模更新的变化。

关于更改字段 - 听起来您的选择列表未初始化为正确的值。如果 的值为`@website.category`“foo”，则当此页面加载时，选择列表应选择“foo”。这似乎没有发生，因此当您提交表单并进行质量属性更新时，它会将类别属性更新为默认选择的任何列表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:17:26.830

`@website.language_changed?`是方法，你可以看[http://railscasts.com/episodes/109-tracking-attribute-changes](http://railscasts.com/episodes/109-tracking-attribute-changes)

```
def update
  @website = Website.find(params[:id])

  if params[:website][:language] == "Automatic (by user's browser language)" &&  @website.language != params[:website][:language]
    params[:website][:language] = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
  end
  if @website.update_attributes(params[:website])
  end

end 
```

# c# - 将 ftp 映射到驱动 C#

> ID：12729282
> 
> 赞同：1
> 
> 时间：2012-10-04T14:14:43.423
> 
> 标签：c#, map, ftp

我需要将 ftp 映射到 c# 上的驱动器。

我使用了这个[SO question](https://stackoverflow.com/questions/3753758/creating-virtual-hard-drive)的答案，但它只适用于本地文件夹（我认为）

我的代码：

```
Subst.MapDrive('q', @"ftpServerName"); 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:35:39.663

这不是微不足道的。第一个问题是 FTP 不是文件系统访问协议，不可能基于标准 FTP 命令实现功能齐全的文件系统。然而对于只读文件系统 FTP 是可以的。

现在，您无法轻松地将任何远程映射到 Windows 中的驱动器号。您需要编写内核模式虚拟文件系统驱动程序。工作一年左右。

我们的[回调文件系统](http://www.eldos.com/cbfs/)提供了一个预先构建的驱动程序，它调用您的用户模式代码来执行实际工作。这样你就可以在 C# 中创建一个虚拟文件系统。我们有一个示例项目，它是我们的 SFTP Net Drive 免费软件产品的简化版本，它通过 SFTP 满足您的需求（SFTP 是基于 SSH 的协议，提供低级文件操作，可用于虚拟文件系统） . 但是对于 FTP，您仍然会遇到上面提到的写入问题，可能还有重命名问题。

# c# - 试图在 Java 中捕获 System.Net.WebException (C#)

> ID：12729286
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:14:55.403
> 
> 标签：c#, java, web-services, exception, network-protocols

`System.Net.WebException`Java中最接近的等价物是什么？

我正在尝试在 Java 中执行此操作。该程序在一个真正的循环中轮询新的状态和消息，但如果网络“打嗝”一秒钟，我想捕捉异常。

```
 while (true)
        {
            try
            {
                GetStatusChanges();
                GetReturnMessages();
                if (pollCounter == 30)
                {
                    SubmitMessages();
                    pollCounter = 0;
                }
            }
            catch (System.Net.WebException webException)
            {
                Console.WriteLine(webException);
            }
            Thread.Sleep(10000);
            pollCounter++;
        } 
```

查看 java.net 包，我不确定要使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:26:09.343

[基于这个](https://stackoverflow.com/questions/5106810/catching-exceptions-caused-by-temporary-network-errors)问题，我相信您需要的是 java.net.SocketException 或其后代。

我发现其他一些情况可能会抛出其他[IOException](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/IOException.html)子类，例如[UnknownServiceException](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/UnknownServiceException.html)（SocketException 也是 IOException 的子类。）

# jquery - 一旦指针离开链接而不单击链接，如何让鼠标悬停保持活动状态

> ID：12729289
> 
> 赞同：0
> 
> 时间：2012-10-04T14:15:09.117
> 
> 标签：jquery, html, css

请查看此链接，[http://jsfiddle.net/sushanth009/xDaL8/1/](http://jsfiddle.net/sushanth009/xDaL8/1/) 代码是完美的，现在我需要如何让我翻转的链接留在它的位置，以便视图可以读取侧面内容并单击在悬停的特定链接的内容下查看更多信息。

更新：

当您滚动左侧是链接时，右侧图像和内容会发生变化，每个悬停在每个链接上。问题是您可以单击内容下方右侧的“查看更多”，因为一旦您将指针从链接上移开，它就会恢复为默认值，当您进入网站时这很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:17:20.187

一个名为 Firebug 的插件允许您在文档元素上强制鼠标悬停事件，而鼠标实际上不必停留在元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:20:08.440

也许我误解了这个问题，但是您不只是想删除重置内容的mouseout功能吗？

阿拉：http: [//jsfiddle.net/xDaL8/4/](http://jsfiddle.net/xDaL8/4/)

# jsf-2 - 带有 Facelet 的自定义 JSF

> ID：12729291
> 
> 赞同：0
> 
> 时间：2012-10-04T14:15:18.893
> 
> 标签：jsf-2, primefaces, facelets, ajax4jsf, managed-bean

我创建了一个带有一个输入文本和数据表的 facelet 页面。此数据表将根据输入文本从 DB 中填充数据，我们将在应用程序中使用此 facelet 进行查找功能，这将用于多个页面或表单。我的问题是，我们能否将该查找 facelet 作为自定义的“SearchButton”标签，以便开发人员添加这个带有两个属性（要填充的列和 DB-tablename）的 SearchButton 标签来填充数据。另请注意，我的查找 facelet 是使用 Primefaces UI 组件制作的。

请稍微了解一下以开发此自定义 JSF 组件。

Rgds 巴拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:15:39.667

使其成为标记文件或复合组件。

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)

# facebook - mod重写以删除facebook查询字符串

> ID：12729292
> 
> 赞同：1
> 
> 时间：2012-10-04T14:15:21.487
> 
> 标签：facebook, mod-rewrite, url-rewriting, iis-6, iirf

我无法让我的查询字符串工作..请帮助...我有以下网址： [http ://betatest.bracknell-forest.gov.uk/help?fb_action_ids=372043216205703&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582](http://betatest.bracknell-forest.gov.uk/help?fb_action_ids=372043216205703&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582)

（抱歉，该页面将不可用，因为它是一个测试内部域链接）

我想要以下网址： [http ://betatest.bracknell-forest.gov.uk/help](http://betatest.bracknell-forest.gov.uk/help)

我收到一条浏览器消息，提示“系统找不到指定的文件。” 我知道这是因为我已经进行了 mod 重写以从页面名称中删除 .htm 以返回干净的 url，但我不知道我需要做什么来接受干净的 url 并返回页面。
这是我拥有的mod重写代码：

```
RewriteRule ^/([\w]+)$ /$1.htm [I,L] #Any bare URL will get rewritten to a URL with .htm appended
RedirectRule ^/(.+)\.(htm)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301]

RewriteCond %{QUERY_STRING} ^fb_action_ids=(.)$ #if the query string contains fb_action_ids
RewriteCond %{QUERY_STRING} !="" #if there is a query string
RewriteRule ^(.*) $1? [R=301,L] 
```

我认为这是因为我两次使用 R=301 但不知道我需要使用什么作为替代方案。

如果我将 .htm 从 help?fb_action_ids.... 附加到 help.htm?fb_action_ids.... 这将返回所需的页面，但我需要返回未附加 url 的页面名称。

非常感谢您提前提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:16:02.550

在查看 iirf 帮助页面后确定，以下内容将删除所有查询字符串并显示干净的 url：

```
RewriteRule ^/(.+)\?(.+)&(.+)\.(htm)$  /$1    
RewriteRule ^/(.+)\?(.+)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301]

# Any bare URL will get rewritten to a URL with .htm appended
RewriteRule ^/([\w]+)$ /$1.htm [I,L]
RedirectRule ^/(.+)\.(htm)$       http://betatest.bracknell-forest.gov.uk/$1 [R=301] 
```

iirf 需要对正则表达式有所了解，并且它与 mod_rewite 之间似乎存在细微差别。非常感谢提供的所有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T03:35:46.710

这两行就可以了。我已经测试过了。

```
RewriteCond %{QUERY_STRING} fb_action_ids
RewriteRule ^(.*)$ $1? [R=301] 
```

如果您有**abc.htm**，格式如下的 URL：**“abc?fb_action_ids......”**将被重定向到**“abc.htm”**。

 **但是，您可以在 http.conf 中关闭 MultiView，如果将被重定向到确切的“abc”文件。**

# php - php查询返回丢失的数据

> ID：12729296
> 
> 赞同：0
> 
> 时间：2012-10-04T14:15:27.417
> 
> 标签：php, mysql

我的 php 查询获取数据时遇到问题。让我解释一下我想要什么。我有一个数据库，可以在一天中将活动用户保存几个小时。例如 01-01-2012 13:00 active = 5 01-01-2012 14:00 active = 10。我的 php 查询应该创建一个数组，其中包含 2 个日期和活动列。但是日期必须像 01-01-2012 没有我们的时间。所以我将它们分组为 date2 但我找不到每一天的活动（总和）。这是我的查询，它没有给出正确的有效总和。

```
$query2 = mysql_query("SELECT DATE_FORMAT(date, '%Y-%m-%d') AS date2, SUM(active) FROM hit WHERE game= '".$game."' AND source = '".$source."' AND date > '".$dateFrom."' AND date < '".$dateTo."' GROUP BY date2 ORDER BY date2");

while($tuple=  mysql_fetch_array($query2)){
    $myArr[] = $tuple;
}
print_r($myArr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:17:02.667

您需要别名`SUM(active)`和`GROUP BY date`. 如果`date`是一个`datetime`，你可以`GROUP BY DATE(date)`。此外，请注意[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，并确保在必要时使用刻度线。

此外，如果您正在寻找一个包容性的日期范围，您应该知道当您发送时`2012-10-03`，它实际上是和之间的`2012-10-03 00:00:00`任何记录将被忽略。`00:00:00``23:59:59`

最后，您应该停止使用[已弃用](http://www.deprecatedphp.com)`mysql_`的函数。

此[查询](http://sqlfiddle.com/#!2/b37cf/1)应该有效：

```
$query2 = mysql_query("
    SELECT DATE_FORMAT(`date`, '%Y-%m-%d') AS date2, SUM(active) AS active 
    FROM hit 
    WHERE game= '".$game."' AND source = '".$source."' 
        AND `date` > DATE_SUB('".$dateFrom."', INTERVAL 1 SECOND) 
        AND `date` < DATE_ADD('".$dateTo."', INTERVAL 1 DAY) 
    GROUP BY DATE(`date`)
    ORDER BY `date`");
$i = 0;
while($tuple=  mysql_fetch_array($query2)){
    $myArr[$i][date2] = $tuple[date2];
    $myArr[$i][active] = $tuple[active];
    $i++;
}
print_r($myArr); 
```

您的数组 ( `$myArr`) 将如下所示：

```
大批
(
    [0] => 数组
        (
            [日期2] => 2012-10-03
            [活跃] => 5
        )

)
```

# android - 当 android:targetSdkVersion 从 9 更改为 15 时，AsyncTask 停止工作

> ID：12729299
> 
> 赞同：1
> 
> 时间：2012-10-04T14:15:29.177
> 
> 标签：android, android-asynctask

```
public void OnBtnSendClick(View v)
{
    byte[] bytes = ...;  // array is assigned here

    SendTask task = new SendTask();
    task.execute(new byte[][] {bytes});   // this line is executed
}

private class SendTask extends AsyncTask<byte[], Void, String>
{
    @Override
    protected String doInBackground(byte[]... parameters) 
    {
            Log.i(LOG_TAG, "SendTask.doInBackground started");   // this line is not executed
            return "OK";
    }

    @Override
    protected void onPostExecute(String result) 
    {
            // ...
    }
} 
```

此代码`android:targetSdkVersion="9"`在清单中使用。我把它改成了`android:targetSdkVersion="15"`，现在`SendTask.doInBackground`没有执行。在调试器中，我看到该`task.execute`行已执行，但从`doInBackground`未被调用。

顺便说一句，该程序包含另一个`AsyncTask`，它正在成功运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:21:25.170

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

默认情况下，API >= 11 一次只`AsyncTask`执行一个。

> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

解决此问题的一种方法是创建一个`BaseTask`并让您的所有任务扩展它

```
public class BaseTask extends AsyncTask
{
    ...

    public void fireInTheHole()
    {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
            this.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
        else
            this.execute();
    }

    ...
} 
```

然后当你需要执行它时，只需调用`myTask.fireInTheHole()`而不是`myTask.execute()`

# batch-file - 批处理命令使用txt文件的第一行创建文件

> ID：12729300
> 
> 赞同：2
> 
> 时间：2012-10-04T14:15:30.280
> 
> 标签：batch-file

我有一个 bat 文件，它正在读取另一个 txt 文件并将值发送到外部 exe 文件，该文件使用这些命令生成一个输出文件。

```
for /f "tokens=*" %%A in (data.txt) do (
:start

XYZ.exe %%A ) 
```

data.txt 的内容是这样的：

```
abc 1 2
xyz 2 3 
```

现在，我正在像这样编辑 data.txt：

```
name of file: mp3
abc 1 2
xyz 2 3
name of file: mp4
sss 1 2
rrr 2 3
name of file: vob
eee 1 2
qqq 2 3 
```

并且我需要使用 File 的名称来创建一个具有每次提到的扩展名的文件，以便在最后追加。

编辑：

我主要需要找到一种方法，可以在每次出现时将文件名的值保存在变量中。因此，例如在上面的文本文件中，当我运行批处理时，它将查看文件名是否存在。如果它存在，那么它将在上述情况下保存值，即 mp3 并保存它，然后调用 XYZ.exe 直到文件名不再出现。新文件名一出现，就会调用一个方法，它将 XYZ 生成的两个输出合并为两个参数，并将它们合并到一个文件中，并将该文件的扩展名附加到一个 mp3。

然后新的文件名将再次保存在同一个变量中，该过程继续进行。

如果 data.txt 中没有此文件名的单个实例，则结果文件的扩展名将是 txt。我想现在应该很清楚了。请让我知道更多说明..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:14:39.167

我不会在带有参数的相应行*之前指定名称，而是**在*它们之后。如果名称在前，则处理将更加复杂：您需要检查它是否是第一行，因为如果不是，您首先需要使用先前存储的名称来合并待处理的输出文件，并且只*然后*存储新名称。此外，当您到达末尾时`data.txt`，将没有`name of file`行来触发最后一组输出项的合并。相反，如果名称在参数之后，您只需在那里使用它，然后，您甚至不需要存储它。

可能你可以这样做：

1.  存储`%%A`在变量中。

2.  尝试`name of file: `从存储的值中删除（使用`set var=!var:substr=!`语法）。

3.  将结果值与 进行比较`%%A`。

4.  如果两个值保持相同，则 中没有`name of file: `子字符串`%%A`，这意味着它是参数列表行，而不是文件名行。（我希望你永远不要将该签名字符串用作参数集。）在这种情况下，

    *   只需调用 .exe 文件来处理参数，就像你现在正在做的那样。

5.  如果结果不同，则该行包含名称。所以，

    *   如果不是名字，则使用先前存储的名称处理输出文件；

    *   存储刚刚获得的名称以备后用；

    *   设置一个标志，表明后面的名字不会是第一个。

6.  在循环之后，如果设置了标志，则处理旧名称。

以下是我实施上述步骤列表的尝试：

```
SETLOCAL EnableDelatedExpansion
SET NotTheFirstName=

FOR /F "tokens=*" %%A IN (data.txt) DO (

  SET "name=%%A"
  SET "name=!ext:name of file: =!"

  IF "!name!"=="%%A" (
    XYZ.exe %%A
  ) ELSE (
    IF DEFINED NotTheFirstName (
      *do whatever you need with !oldname!
      to process your output files*
    )
    SET "oldname=!name!"
    SET NotTheFirstName=1
  )
)
*do whatever you need with !oldname! once again
(to account for the last set of output files)* 
```

请注意，如果`data.txt`格式如下：

```
abc 1 2
xyz 2 3
name of file: mp3
sss 1 2
rrr 2 3
name of file: mp4
eee 1 2
qqq 2 3
name of file: vob 
```

即，如果文件名行位于它所属的参数行*之后*，则脚本会简单得多：

```
SETLOCAL EnableDelatedExpansion

FOR /F "tokens=*" %%A IN (data.txt) DO (

  SET "name=%%A"
  SET "name=!ext:name of file: =!"

  IF "!name!"=="%%A" (
    XYZ.exe %%A
  ) ELSE (
    *do whatever you need with !name!
    to process your output files*
  )
) 
```

如您所见，没有必要存储名称以供以后迭代使用，因为输出只是在那里处理的。因此，在循环之后不需要任何标志或再次使用名称。

# ios - 无法删除 UITableView 中的行

> ID：12729309
> 
> 赞同：1
> 
> 时间：2012-10-04T14:16:03.903
> 
> 标签：ios, cocoa-touch, uitableview

嗨，以下功能对我不起作用，我不明白为什么....

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        // Delete the row from the data source
        NSString *selectedCategory = [self.daten objectAtIndex:indexPath.row];
        [self.daten removeObjectAtIndex:indexPath.row]; //we assume, that mySourceArray is a NSMutableArray we use as our data source
        [self.tableView beginUpdates];

        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        [self.tableView endUpdates];

        // ...
    }
} 
```

我没有任何部分......我总是得到那个例外：

> > 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (19) 必须等于该节中包含的行数更新前的节 (19)，加上或减去从该节插入或删除的行数（0 插入，1 删除），加上或减去移入或移出该节的行数（0 移入，0 移动出去）。' ***First throw call stack: (0x342692a3 0x33a3b97f 0x3426915d 0x3922e2af 0x36dd5b83 0x5453d 0x36f6b5d9 0x36e8c0ad 0x36e8c05f 0x36e8c03d 0x36e8b8f3 0x36e8c0ad 0x36e8c05f 0x36e8c03d 0x36e8b8f3 0x36e8bde9 0x36db45f9 0x36da1809 0x36da1123 0x34f195a3 0x34f191d3 0x3423e173 0x3423e117 0x3423cf99 0x341afebd 0x341afd49 0x34f182eb 0x36df5301 0x24343 0x38e34b20) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:19:28.827

您需要更新`numberOfRowsInSection:`方法中的行数。如我所见，您需要以`[self.daten count]`这种方法返回您的。

正如其所说，系统在更新/删除之前/之后检查此数字以保持数据完整性。

你总是有一个部分:)

像这样实现它：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.daten count];
} 
```

另外，请记住，您需要同时设置`UITableViewDelegate`和`UITableViewDataSource`为`self`。

好的，问题是：`NSMutableArray`的`removeObjectAtIndex:`方法**没有**调整它的大小。所以你必须自己处理。创建具有正确容量的新数组并将其余元素移至其中。你可以谷歌`how to resize NSMutableArray`。

# c# - Asp.net webapi 多次排除匹配路由

> ID：12729310
> 
> 赞同：0
> 
> 时间：2012-10-04T14:16:10.260
> 
> 标签：c#, asp.net-mvc-routing, asp.net-web-api

我在我的 webapi 中设置了以下路由..

```
 //Route for getting the api access token
        config.Routes.MapHttpRoute(
            name: "AccessTokenRoute",
            routeTemplate: "api/access-token",
            defaults: new { controller = "AccessToken" }
        );

        //Default route for the api
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我有一个名为 AccessTokenController 的控制器。当请求带有 url /api/access-token 时，一切正常。它击中适当的控制器。

我的问题是，如果一个请求来自 /api/AccessToken，它也会匹配默认路由。如果他们以这种方式访问​​路由，我想阻止路由匹配。路由系统中有什么东西可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:15:38.687

如果控制器是 AccessToken，则向您的 DefaultApi 路由添加限制访问的约束。

# sql-server - 使用带有条件结果和分区 row_number() 的 case 排序

> ID：12729313
> 
> 赞同：0
> 
> 时间：2012-10-04T14:16:20.967
> 
> 标签：sql-server, tsql

我有一个无法正确返回订单的 SQL。下面是行的示例以及我希望它们出现的顺序。我尝试 ORDER BY WITH CONDITIONAL CASE AND ROW_NUMBER OVER PARTION 没有成功。我希望 ColA 成为主要排序，ColB 仅当 ColC 的长度 < 3 时才成为次要排序，否则 ColB 是主要排序，ColA 是次要排序

```
ColA      ColB      ColC            
5   750 15  
5   750 15  
3   984 13  
3   984 13  
5   1021    15  
5   1021    15  
4   1602    14  
4   1602    14  
4   1823    14  
4   1823    14  
6   4099    16  
6   4099    16  
11  4099    240990  
0   10880   10  
0   10880   10  
3   10881   13  
3   10881   13  
2   11053   12  
8   11053   211053  
6   10891   16  
6   10891   16  
2   11034   12  
10  11034   211034  

ColA      ColB      ColC            
0   10880   10  
0   10880   10  
2   11034   12  
10  11034   211034  
2   11053   12  
8   11053   211053  
3   984 13  
3   984 13  
3   10881   13  
3   10881   13  
4   1602    14  
4   1602    14  
4   1823    14  
4   1823    14  
5   750 15  
5   750 15  
5   1021    15  
5   1021    15  
6   4099    16  
6   4099    16  
11  4099    240990  
6   10891   16  
6   10891   16 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:22:35.803

```
order by case when len(ColC) < 3 then ColA else ColB end, 
    case when len(ColC) < 3 then ColB else ColA end 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/c1567/1)

# networking - 如何识别充当路由器的设备，即使用 SNMP 查询转发数据包？

> ID：12729320
> 
> 赞同：1
> 
> 时间：2012-10-04T14:16:55.687
> 
> 标签：networking, snmp, router, packets, mib

使用 SNMP 查询 MIB-II 对象，如何识别充当路由器的设备，即转发数据包？

识别它们的唯一方法是通过标识符、类型或描述，或者我可以通过数据包流量识别它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:57:48.923

如果您只是想知道他们是否转发流量，那么实际上有一个 MIB 对象可以告诉您：

```
IP-MIB::ipForwarding
ipForwarding OBJECT-TYPE
  -- FROM       IP-MIB
  SYNTAX        INTEGER {forwarding(1), notForwarding(2)} 
  MAX-ACCESS    read-write
  STATUS        current
  DESCRIPTION   "The indication of whether this entity is acting as an IPv4
            router in respect to the forwarding of datagrams received
            by, but not addressed to, this entity.  IPv4 routers forward
            datagrams.  IPv4 hosts do not (except those source-routed
            via the host).

            When this object is written, the entity should save the
            change to non-volatile storage and restore the object from
            non-volatile storage upon re-initialization of the system.
            Note: a stronger requirement is not used because this object
            was previously defined."
::= { iso(1) org(3) dod(6) internet(1) mgmt(2) mib-2(1) ip(4) 1 } 
```

# sap - 从表中获取数据 - SAP SmartForms

> ID：12729321
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:16:57.130
> 
> 标签：sap

我是smartforms的新手。我正在尝试从 KNA1 获取一些数据，例如在交货单上显示的名称和地址。我怎么得到这个？我知道我必须将表格放在“全局选项”的某个选项中，但我只是不知道是哪一个。请问，有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:26:34.287

您需要知道如何为此开发 ABAP 编码。假设您知道这一点，您应该尝试扩展表单的输入结构并将必要的选择逻辑添加到供应程序中。如果这不可能，您可以向表单添加代码，但由于各种原因不建议这样做。

编辑：如果您确实知道如何编写 ABAP 代码，则更难理解您的问题。我假设您已经看过[优秀的在线文档](http://help.sap.com/saphelp_nw70/helpdata/en/a5/de6838abce021ae10000009b38f842/frameset.htm)。如果您检查表单的标题条目，您会注意到[全局定义](http://help.sap.com/saphelp_nw70/helpdata/en/1c/f40c61ddf311d3b574006094192fe3/frameset.htm)和初始化编码等内容。如果您仔细查看可以在表单中插入的元素，您会发现[程序行](http://help.sap.com/saphelp_nw70/helpdata/en/a3/80bae8dfd911d3b576006094192fe3/frameset.htm)。因此，这是将 ABAP 代码嵌入到从数据库中选择数据的表单中的一种方法。你会像任何其他领域一样打印出来。

然而，这是一个坏主意。它通常会减慢您的表单处理速度，如果使用得太广泛，维护起来将是一场噩梦。相反，您应该[查看表单的参数和调用表单的程序](http://help.sap.com/saphelp_nw70/helpdata/en/9b/e3b0e0c2a711d3b558006094192fe3/frameset.htm)。如果可能，编辑适当的结构或使用[附加结构](http://help.sap.com/saphelp_nw04s/helpdata/en/cf/21eb61446011d189700000e8322d00/frameset.htm)来添加附加字段。然后，使用 BAdI、用户出口或隐式增强来填充调用程序中的字段。这样做的好处是数据将被传递到所有表单，您不必在多个表单中复制逻辑。（此外，如果需要，将其移植到交互式表单会更容易）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:34:43.737

每个智能表单都有一个表单界面，这是向其传递信息的主要方式（在表单树的“全局设置”下）。当缺少此信息并且您无法更改接口以及由于某种原因调用它的 ABAP 代码时（因为它在太多不同的地方调用或因为它是从 SAP 标准代码调用的），仍然有集成 ABAP 编码的方法进入智能表单以获取任何其他数据：

1.  您可以单击“全局定义”来定义全局变量和全局表单例程
2.  您可以将“Flow Logic -> Program Lines”节点添加到窗口节点。在这里你可以编写一些ABAP代码来读取你需要的数据并将其写入一个全局变量中。
3.  然后，您可以在窗口的文本元素中使用此变量。

# c# - 视图中的 MVC4 模型具有嵌套数据 - 无法获取模型中的数据

> ID：12729323
> 
> 赞同：1
> 
> 时间：2012-10-04T14:17:01.300
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, html-helper

我定义了一个模型，它可以根据 IEnumerable 为我提供一个带有 RadioButtons 列表的视图。

在该模型中，我想显示一个复选框列表，这些复选框将根据所选项目而有所不同。最后，一旦用户从可用的复选框中进行选择，同一视图中将出现一个 Textarea，其中包含一些基于所选复选框的动态文本。我们最终应该得到一个 Table-per-hierarchy。

布局使得 RadioButtonList 位于第一个表格单元格中，CheckBoxList 位于中间表格单元格中，Textarea 位于右侧表格单元格中。

如果有人能指导我实现这个结果的模型视图应该是什么，我会很高兴......

这是我的代码：

```
//
// View Model for implementing radio button list

public class RadioButtonViewModel
{
    // objects
    public List<RadioButtonItem> RadioButtonList { get; set; }
    public string SelectedRadioButton { get; set; }
}

//
// Object for handling each radio button

public class RadioButtonItem
{
    // this object
    public string Name { get; set; }
    public bool Selected { get; set; }
    public int ObjectId { get; set; }
    // columns
    public virtual IEnumerable<CheckBoxItem> CheckBoxItems { get; set; }
}

//
// Object for handling each checkbox

public class CheckBoxViewModel
{
    public List<CheckBoxItem> CheckBoxList { get; set; }
}

//
// Object for handling each check box

public class CheckBoxItem
{
    public string Name { get; set; }
    public bool Selected { get; set; }
    public int ObjectId { get; set; }
    public virtual RadioButtonItem RadioButtonItem { get; set; }
} 
```

和视图

```
@model IEnumerable<EF_Utility.Models.RadioButtonItem>

@{
    ViewBag.Title = "Connect";
    ViewBag.Selected = Request["name"] != null ? Request["name"].ToString() : "";
}

@using (Html.BeginForm("Objects" , "Home", FormMethod.Post) ){

@Html.ValidationSummary(true)

<table>
    <tbody>
        <tr>
            <td style="border: 1px solid grey; vertical-align:top;">

                <table>
                    <tbody>
                        <tr>
                            <th style="text-align:left; width: 50px;">Select</th>
                            <th style="text-align:left;">View or Table Name</th>
                        </tr>
                        @{
                        foreach (EF_Utility.Models.RadioButtonItem item in @Model )
                        {
                        <tr>
                            <td>
                                @Html.RadioButton("RadioButtonViewModel.SelectedRadioButton", 
                                    item.Name, 
                                    ViewBag.Selected == item.Name ? true : item.Selected, 
                                    new { @onclick = "this.form.action='/Home/Connect?name=" + item.Name + "'; this.form.submit(); " })
                            </td>
                            <td>
                                @Html.DisplayFor(i => item.Name)
                            </td>
                        </tr>
                        }
                        }
                    </tbody>
                </table>

            </td>
            <td style="border: 1px solid grey; width: 220px; vertical-align:top; @(ViewBag.Selected == "" ? "display:none;" : "")">

                <table>
                    <tbody>
                        <tr>
                            <th>Column
                            </th>
                        </tr>
                        <tr>
                            <td><!-- checkboxes will go here -->
                            </td>
                        </tr>
                    </tbody>
                </table>

            </td>
            <td style="border: 1px solid grey; vertical-align:top; @(ViewBag.Selected == "" ? "display:none;" : "")">
                <textarea name="output" id="output" rows="24" cols="48"></textarea>
            </td>
        </tr>
    </tbody>
</table>
} 
```

和相关控制人

```
public ActionResult Connect() 
    {
        /* TEST SESSION FIRST*/ 
        if(  Session["connstr"] == null)
            return RedirectToAction("Index");
        else
        {
            ViewBag.Message = "";
            ViewBag.ConnectionString = Server.UrlDecode( Session["connstr"].ToString() );
            ViewBag.Server = ParseConnectionString( ViewBag.ConnectionString, "Data Source" );
            ViewBag.Database = ParseConnectionString( ViewBag.ConnectionString, "Initial Catalog" );

            using( var db = new SysDbContext(ViewBag.ConnectionString))
            {
                var objects = db.Set<SqlObject>().ToArray();

                var model = objects
                    .Select( o => new RadioButtonItem { Name = o.Name, Selected = false, ObjectId = o.Object_Id, CheckBoxItems = Enumerable.Empty<EF_Utility.Models.CheckBoxItem>() } )
                    .OrderBy( rb => rb.Name );

                return View( model );
            }
        }
    } 
```

我似乎缺少的是我的 Connect() 方法中的代码，它将带来数据上下文；此时，为视图设置 Html 应该相当简单。

编辑**所以我需要将 RadioButtonItem 绑定到视图，如下所示，除了我的 CheckBoxList 不会是空集。

```
 //
    // POST: /Home/Connect/

    [HttpPost]
    public ActionResult Connect( RadioButtonItem rbl )
    {
        /* TEST SESSION FIRST*/
        if ( Session["connstr"] == null )
            return RedirectToAction( "Index" );
        else
        {
            ViewBag.Message = "";
            ViewBag.ConnectionString = Server.UrlDecode( Session["connstr"].ToString() );
            ViewBag.Server = ParseConnectionString( ViewBag.ConnectionString, "Data Source" );
            ViewBag.Database = ParseConnectionString( ViewBag.ConnectionString, "Initial Catalog" );

            using ( var db = new SysDbContext( ViewBag.ConnectionString ) )
            {
                var objects = db.Set<SqlObject>().ToArray();

                var model = objects
                    .Select( o => new RadioButtonItem { Name = o.Name, Selected = false, ObjectId = o.Object_Id, CheckBoxItems = Enumerable.Empty<EF_Utility.Models.CheckBoxItem>() } )
                    .OrderBy( rb => rb.Name );

                return View( model );
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:35:13.727

你有两个问题。

首先，您不会在 ViewModel 的构造函数中新建一个空列表。默认模型绑定器不会实例化子对象，因此您必须在构造函数中执行此操作。

其次，以您的方式在视图中使用 foreach 不会为模型绑定器适当地命名输入以将它们绑定到列表。

你有几个选择。首选方法是使用 EditorTemplate。在 ~/Views/Shared 文件夹中创建一个名为 EditorTemplates 的文件夹，并在其中创建一个名为 RadioButtonItem.cshtml 的文件，然后将 foreach 中的代码放在该文件中，并将其替换为`Html.EditorFor(m => m.RadioButtonItems)`

或者，您必须使用 for 语句，并将项目作为索引引用到列表中，类似于下面。

```
@for(int i = 0; i < Model.RadioButtonItems.Count; i++)
{
    .....
    <label>
    @Html.RadioButtonFor(m => m.RadioButtonList[i].Selected, true) 
    @Html.RadioButtonFor(m => m.RadioButtonList[i].Selected, false)
    m.RadioButtonList[i].Name
    </label>
    ..... 
} 
```

问题是您没有创建正确的线路格式。请参阅以下文章：

[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:36:09.147

这是我最终需要做的事情：

定义一个新的控制器方法来处理相关模型类的回发，并在视图中处理嵌套的相关复选框：

```
 @Html.Raw(ViewBag.TextBoxes) 
```

为了清楚起见，我还将类从“RadioButtonItem”重命名为“TableOrViewItem”。这是我添加的控制器方法：

```
 [HttpPost]
    public ActionResult Connect( TableOrViewItem rbl )
    {
        /* TEST SESSION FIRST*/
        if ( Session["connstr"] == null )
            return RedirectToAction( "Index" );
        else
        {
            ViewBag.Message = "";
            ViewBag.ConnectionString = Server.UrlDecode( Session["connstr"].ToString() );
            ViewBag.Server = ParseConnectionString( ViewBag.ConnectionString, "Data Source" );
            ViewBag.Database = ParseConnectionString( ViewBag.ConnectionString, "Initial Catalog" );
            ViewBag.Selected = Request["name"] != null ? Request["name"].ToString() : "";
            ViewBag.ObjectID = Request["id"] != null ? Request["id"].ToString() : "";

            using ( var dbo = new SqlObjectContext( ViewBag.ConnectionString ) )
            {

                // obtain this item's objectid
                string CurrentObjectId = Request["id"].ToString();
                int CurrentID = StringToInt( CurrentObjectId );

                // populate Checkbox Area

                var rawColumns = dbo.Set<SqlColumn>()
                    .Where( column => column.ObjectId == CurrentID )
                    .OrderBy( o => o.ColumnId )
                    .ToList();

                string htmlColumns = string.Empty;

                foreach ( EF_Utility.Models.SqlColumn item in rawColumns )
                {
                    htmlColumns += "<input checked=\"checked\" id=\"RadioButtonViewModel_CheckBox" 
                        + item.ColumnId + "\" name=\"CheckBox_" + item.ColumnId 
                        + "\" type=\"checkbox\" value=\"" + item.Name + "\">" 
                        + item.Name + " <br>";
                }
                if(! string.IsNullOrEmpty(htmlColumns))
                {
                    htmlColumns += "<br /><center><input type=\"submit\" value=\"Generate\" name=\"btnGenerate\" id=\"btnGenerate\" /></center>";
                    htmlColumns += "<input type=\"hidden\" name=\"id\" value=\"" + CurrentObjectId + "\" />";
                    htmlColumns += "<input type=\"hidden\" name=\"name\" value=\"" + ViewBag.Selected + "\" />";
                }

                ViewBag.TextBoxes = htmlColumns;

                /*var ColumnItemList = columns
                    .Select( c => new ColumnItem { Name = c.Name, Selected = true, ObjectId = c.ObjectId } )
                    .Where( tvi => tvi.ObjectId == CurrentID );
                */

                // Check to see if the user wants the list generated

                if(Request["btnGenerate"] != null)
                {
                    string sNewLine = System.Environment.NewLine;
                    string htmlText = "[Table( \"" + ViewBag.Selected +"\" )]" + sNewLine +
                        "public class " + POCOFormated( ViewBag.Selected ) + sNewLine + "{";
                    string tempColumn = string.Empty;
                    string tempName = string.Empty;

                    foreach(string key in Request.Form)
                    {
                        if(!key.StartsWith("CheckBox_")) continue;

                        tempName = POCOFormated( Request.Form[key] );
                        htmlText = htmlText +
                            sNewLine + "\t" +
                            "public " + "...fieldtype..." + " " + tempName.Trim() + " { get; set; }" +
                            sNewLine; 
                    }                       
                    htmlText = htmlText + sNewLine + "}";

                    ViewBag.TextArea = htmlText;
                }

                var objects = dbo.Set<SqlObject>().ToArray();

                var model = objects
                    .Select( o => new TableOrViewItem { Name = o.Name, Selected = false, ObjectId = o.ObjectId } )
                    .OrderBy( rb => rb.Name );

                return View( model );
            }
        }
    } 
```

# linux - 仅在命令失败时重定向标准输出？

> ID：12729326
> 
> 赞同：3
> 
> 时间：2012-10-04T14:17:03.240
> 
> 标签：linux, bash, shell

我正在编写一个应该对用户“透明”的 bash 脚本。它从用户那里读取命令并拦截它们，根据某些标准，只允许其中一些命令由 bash 执行。它（基本上）是这样工作的：

```
while true; do
   read COMMAND
   can_be_done $COMMAND
   if [ $? == 0 ]; then
      eval $COMMAND
      if [ $? != 0 ]; then
         echo "Error: command not found"
      fi
   fi
done 
```

问题是，当命令失败时，您还会将内容打印到控制台。但是，如果我将结果保存在一个变量中并且只在它没有失败时打印它，就像这样：

```
RESULT=$(eval $COMMAND) 
```

然后还有另一个问题：特殊格式丢失（例如，“ls --color”不再显示颜色）

我的问题是：如果成功，有没有办法让命令打印到 STDOUT，但如果失败，则打印到 /dev/null？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:32:50.250

你真的需要第二部分，用错误消息替换命令的输出吗？Linux 命令打印自己的错误消息，不一定是“找不到命令”。您将隐藏真正的错误（权限被拒绝、未找到文件、内存不足、段错误等），并带有通常不正确的错误消息（未找到命令）。

如果您删除该检查，您可以将循环简化为如下所示：

```
while true; do
   read -e COMMAND
   if can_be_done "$COMMAND"; then
      eval "$COMMAND"
   fi
done 
```

*   `read -e`使用 readline 获取命令，使提示更像 shell（`↑`例如`↓`历史）。
*   `command; if [ $? == 0 ]; then`更习惯地写为`if <command>; then`.
*   引用可确保正确处理特殊字符和空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:48:45.027

我强烈主张你不应该*这样*做。如果您不想看到输出，请将其重定向到`/dev/null`. 如果您确实想查看错误，请不要重定向 stderr。如果您使用的程序在 stdout 而不是 stderr 上打印错误消息，请修复程序！错误消息属于标准错误。请注意，这意味着您的程序已损坏，因为它应该是：

```
 echo "Error: command not found" >&2 
```

我不确定它是否是第 1 条规则，但它肯定属于前 10 名，而且它可能是最常被违反的规则： `Error messages belong on stderr`. 在标准输出上打印错误消息的程序已损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T15:01:54.567

`if false > /dev/null;then echo 1; else echo 2; fi 2> /dev/null`

将输出`2`

`if true > /dev/null;then echo 1; else echo 2; fi 2> /dev/null`

将输出`1`

删除`> /dev/null`以将命令也打印到标准输出

例如 `if echo 123;then echo 1; else echo 2; fi 2> /dev/null`

将输出 `123`&`1`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T14:48:35.077

假设该命令的运行成本不是很高，您可以这样做：

```
 test `ls /mooo 2>/dev/null` || echo moo not found 
```

只有当命令以 0 退出时 test 才会返回 true，在这种情况下 ls 是命令。你也可以像这样把它放在一个 if 语句中：

```
if [ `ls /moo 2>/dev/null` ];then 
  echo moo is a folder
fi 
```

# tabs - Titanium：禁用选项卡组中的选项卡

> ID：12729328
> 
> 赞同：2
> 
> 时间：2012-10-04T14:17:13.123
> 
> 标签：tabs, titanium, appcelerator

我试图让 TabGroup 的第一个和最后一个选项卡被禁用，这样我就可以给他们自定义功能而不是切换视图。我已经尝试过 touchEnabled = false 和一些其他的东西，但我似乎无法得到任何工作......有什么想法吗？

```
function TabView() {

var viewOne = require('ui/common/...');
var viewTwo = require('ui/common/...');
var viewTree = require('ui/common/...');
var self = Ti.UI.createTabGroup();

var tab1 = Titanium.UI.createTab({
    title : 'Tab 1'
});

var firstView = viewOne();
var tab2 = Ti.UI.createTab({
    title: L('firstView'),
    icon: '/images/...',
    window: firstView,
    active:true
});
firstView.containingTab = tab2;

var secondView = viewTwo();
var tab3 = Ti.UI.createTab({
    title: L('secondView'),
    icon: '/images/...',
    window: secondView
});
secondView.containingTab = tab3;

var thirdView = viewTree();
var tab4 = Ti.UI.createTab({
    title: L('Map'),
    icon: '/images/....',
    window: thirdView
});
thirdView.containingTab = tab4;

var tab5 = Titanium.UI.createTab({
    title : 'Tab 5'
});

var tabArray = [tab1, tab2, tab3, tab4, tab5];
for ( i = 0; i < tabArray.length; i++) {
    self.addTab(tabArray[i]);
}

return self;
}

module.exports = TabView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:48:57.427

您可以查看[这篇](http://developer.appcelerator.com/question/70951/disable-tab)文章以禁用 TabGroup 中的选项卡。

# jquery - Magento ajax购物车没有删除购物车中的最后一个产品？

> ID：12729329
> 
> 赞同：0
> 
> 时间：2012-10-04T14:17:14.860
> 
> 标签：jquery, magento

我在使此扩展程序与我的商店一起工作时遇到了很多麻烦。我的问题是，购物车中的最后一个产品没有被删除。或者是，但在删除产品时它没有更新。我想这一定是删除产品的脚本的一部分，谁能告诉我在删除最后一个产品时是否有办法让它“更新”？它来自 AheadWorks Ajax Cart Pro。

```
function updateDeleteLinks(){
var tmpLinks = document.links;
for (i=0; i<tmpLinks.length; i++){
    if (tmpLinks[i].href.search('checkout/cart/delete') != -1){
        url = tmpLinks[i].href.replace(/\/uenc\/.+,/g, "");
        var del = url.match(/delete\/id\/\d+\//g);
        var id = del[0].match(/\d+/g);
        if (window.location.protocol == 'https:'){
            aw_base_url = aw_base_url.replace("http:", "https:");
        }    
        if(!AW_ACP.isCartPage){
            tmpLinks[i].href = 'javascript:ajaxcartprodelete("' + aw_base_url + 'ajaxcartpro/cart/remove/id/' + id +'")';
        }else{
            tmpLinks[i].href = 'javascript:ajaxcartprodelete("' + aw_base_url + 'ajaxcartpro/cart/remove/id/' + id +'/is_checkout/1")';
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:33:38.333

注释掉这个问题就解决了。我也无法弄清楚这段代码的作用：

```
 else{
        tmpLinks[i].href = 'javascript:ajaxcartprodelete("' + aw_base_url + 'ajaxcartpro/cart/remove/id/' + id +'/is_checkout/1")';
    } 
```

# c# - 使用嵌套在 foreach 中的 for 循环跳过 DataSet 中的日期

> ID：12729330
> 
> 赞同：0
> 
> 时间：2012-10-04T14:17:15.197
> 
> 标签：c#, dataset, comparison

我的目标是修剪我的数据集中的所有字符串数据类型，然后用修剪的替换“未修剪”。

我遇到以下错误：“ArgumentException 未处理 - 字符串未被识别为有效的 DateTime。无法将 <> 存储在 DateofBirth 列中。预期类型为 DateTime。”

当我运行以下代码时：

```
foreach (DataRow y in ds.Tables[0].Rows)
{
    for (int i = 0; i < ds.Tables[0].Columns.Count -1; i++)
    {
        if (y[i].GetType() != typeof(DateTime))
        {
            string strTrim = y[i].ToString().Trim();
            y[i] = strTrim;
        }
    }
} 
```

我确定我走在正确的轨道上，我只是无法破解它：/

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:20:55.023

如果您只是在寻找字符串，为什么要检查`DateTime`？尝试：

```
if (y[i] is string)
{
    y[i] = ((string)y[i]).Trim();
} 
```

# php - 如何通过 php 中的表单 post 发送变量值？

> ID：12729337
> 
> 赞同：3
> 
> 时间：2012-10-04T14:17:32.933
> 
> 标签：php, html

我必须通过“表单发布”发布一个值并将其插入表中，这是我在两个文件中的代码：

```
<html>
<body>
<table>
<form  enctype="multipart/form-data" action="<?php $_SERVER["DOCUMENT_ROOT"] ?>  /contents/ad_posting_process_4.php" method="post">
<?php $cat_no = "101010"; ?>
<input type=hidden id="category" value=" <?php echo $cat_no; ?> ">  
<tr> <td>Sub Category: </td><td>    <input type=text id="sub_category" > </td>
<tr><td></td> <td><input type="submit" name="action" value="Post"></td></tr></tr>
</form>
</body></html> 
```

这里是 ad_posting_4.php

```
<?php session_start();
include($_SERVER["DOCUMENT_ROOT"]."/includes/conn.php");
$category = mysql_real_escape_string($_POST['category']);
$sub_category = mysql_real_escape_string($_POST['sub_category']);
echo "category=". $category; 
echo "sub_category=". $sub_category; ?> 
```

没有通过邮寄发送的价值。

我哪里错了？

问候：

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T14:19:44.993

您需要使用该`name`属性：

```
<input type="text" name="category" />
<input type="text" name="sub_category" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T14:18:47.373

输入`type`需要用引号括起来`'`并且还具有`name`属性，而不是`id`.

```
<input type='hidden' name="category" value=" <?php echo $cat_no; ?> " />  
<tr> <td>Sub Category: </td>
<td><input type='text' name="sub_category" > </td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:49:48.590

我最近在自己的网站上做了一些非常相似的事情，并得到了这个社区的帮助。在 HTML 方面，我创建了一个标准表单并给每个输入一个“名称”。例如，假设您正在尝试捕获城市和州：

```
<html>
<body>
<form>
<tr>
<td>State: </td><td> <input type="text" style="border:1px solid #000000" name="state" /></td>
<td>City</td><td><input type="text" style="border:1px solid #000000" name="city" /></td>
</tr>
</form>
</body>
</html> 
```

然后设置一个 mySQL 数据库，其中包含一个名为“state”的列和一个名为“city”的列。接下来，使用 PHP 将表单中的数据插入到数据库中。我是 PHP 新手，但据我了解，使用 PDO 比使用旧的 mysql 命令更安全。

```
$dbtype     = "mysql";
$dbhost         = "localhost";
$dbname     = "name";
$dbuser     = "user";
$dbpass     = "pass";

$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
$sql = "SELECT column_name FROM information_schema.columns WHERE table_name = '[Insert Name of your table here]'";
$q = $conn->prepare($sql);
$q->execute();
$columns = $q->fetchAll(PDO::FETCH_COLUMN, 0);

$cols = array();
foreach ($_POST as $key=>$value)
{
    // if a field is passed in that doesn't exist in the table, remove it.  The name of the input that is removed will be echoed so you can debug.  Remove echo if you go to production.
    if (!in_array($key, $columns)) {
        unset($_POST[$key]);
echo $key;
    }
}
$cols = array_keys($_POST);
$sql = "INSERT INTO Facilities(". implode(", ", $cols) .") VALUES (:". implode(", :", $cols) .")";
$q = $conn->prepare($sql);
array_walk($_POST, "addColons");
$q->execute($_POST);

function addColons($value, &$key)
{
    $key = ":{$key}";
} 
```

这对我来说效果很好。请注意，它只能匹配具有完全相同名称的列的 HTML 表单输入。就我而言，我想创建 100 多个输入，所以这更容易。如果您正在处理 5-10，则手动插入特定变量可能会更容易。

# c# - TreeNode 中的自动换行

> ID：12729340
> 
> 赞同：4
> 
> 时间：2012-10-04T14:17:40.587
> 
> 标签：c#, winforms, treeview, alignment, treenode

在具有长文本的 TreeView 中插入节点时 - 出现水平滚动条。有没有办法在 TreeNode 中自动换行文本，而不是滚动？

目前，我使用根据 TreeView 的宽度拆分文本并在不同节点中显示其块的解决方案，但“对齐”在调整大小后不成立，看起来很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:48:06.493

将 TreeView 的 Scrollable 属性设置为 false 将消除滚动条，但它也会切断您的文本 - 可能不是您想要的。

这个[MSDN 论坛线程](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/64dfd21a-120c-4d6a-81d8-efae46bc3008)给出了一个似乎可行的答案，但我不知道您是否有兴趣使用 OwnerDrawText 函数自己绘制节点。

就个人而言，如果可能的话，我会尝试重新考虑整个事情——更短的节点文本、更大的树区域等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T20:49:41.777

我在遇到类似问题时发现了这一点，它可能会有所帮助：[https ://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.nodewrap%28v=vs.110%29 .aspx](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.nodewrap%28v=vs.110%29.aspx)。请注意它仅适用于 Web (ASP.NET)。

# java - 新组合初始构建期间字体未生效

> ID：12729349
> 
> 赞同：0
> 
> 时间：2012-10-04T14:18:23.027
> 
> 标签：java, swt, eclipse-rcp

`Text`当用户尚未在字段中输入值时，我想要一个可以在其中显示消息的小部件。我扩展了复合并在其中包含了一个文本字段。添加了一个焦点侦听器以删除焦点消息，并在字段为空时在焦点丢失时替换消息。这一切都按预期工作。

我遇到的问题是我希望将提示放置在文本字段中时采用不同的样式。最初似乎没有使用该字体。一旦该领域获得焦点并失去焦点，它看起来是正确的。

例如，这是它最初加载时的样子：
![文本样式不正确](../Images/553548343d22cf0a043f4d877fb0d26f.png)

这就是它在初始加载时的样子以及在失去焦点后的样子：
![文本样式正确](../Images/a354f56c59abb4b7809941479775e539.png)

它变得有点陌生，因为当我在一个简单的 shell 中运行它时，它会以它应该的方式工作。当我将它作为 Eclipse 应用程序运行时，它的样式设置不正确。

这是我的复合材料的代码：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.DisposeEvent;
import org.eclipse.swt.events.DisposeListener;
import org.eclipse.swt.events.FocusAdapter;
import org.eclipse.swt.events.FocusEvent;
import org.eclipse.swt.events.ModifyListener;
import org.eclipse.swt.graphics.Font;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Text;

/**
 * The <code>PromptingTextInput</code> component is a small enhancement to
 * standard <code>Text</code>. It adds the ability to specify a prompt value
 * that displays when the text is empty and the field does not have focus.
 */
public class PromptingTextInput extends Composite {

    private String prompt;
    private Text input;
    private boolean textEmpty;

    Font emptyFont;
    Font inputFont;

    public PromptingTextInput(String prompt, Composite parent, int style, boolean passwordField) {
        super(parent, style);

        this.prompt = prompt;
        setLayout(new FillLayout());

        this.textEmpty = true;
        this.input = new Text(this, (passwordField ? SWT.PASSWORD : SWT.NONE));
        setEmptyInputStyle();

        this.input.setText(this.prompt);
        this.input.addFocusListener(new FocusAdapter() {
            public void focusGained(FocusEvent e) {
                PromptingTextInput.this.focusGained();
            }

            public void focusLost(FocusEvent e) {
                PromptingTextInput.this.focusLost();
            }
        });
        addDisposeListener(new DisposeListener() {
             public void widgetDisposed(DisposeEvent e) {
                 disposeFonts();
             }
         });
    }   

    protected void focusGained() {
        if (this.textEmpty) {
            this.input.setText("");
            setInputStyle();
        }
    }

    protected void focusLost() {
        if (input.getText() == null || input.getText().trim().length() == 0) {
            this.input.setText(this.prompt);
            setEmptyInputStyle();
            this.textEmpty = true;
        } else {
            this.textEmpty = false;
        }
    }

    protected void setInputStyle() {    
        if (this.inputFont == null){
            this.inputFont = new Font(Display.getCurrent(), "Verdana", 8, SWT.DEFAULT);
        }
        this.input.setFont(this.inputFont);
        this.input.setForeground(Display.getCurrent().getSystemColor(SWT.COLOR_BLACK));
    }

    protected void setEmptyInputStyle() {   
        if (this.emptyFont == null){
            this.emptyFont = new Font(Display.getCurrent(), "Verdana", 6, SWT.ITALIC);
        }
        this.input.setFont(this.emptyFont);
        this.input.setForeground(Display.getCurrent().getSystemColor(SWT.COLOR_GRAY));
    }

    public String getPrompt() {
        return prompt;
    }

    public void setPrompt(String prompt) {
        this.prompt = prompt;
        if(!this.input.isFocusControl()){
            this.input.setText(this.prompt);
            setEmptyInputStyle();
        }
    }

    public Text getInput() {
        return input;
    }

    public boolean isTextEmpty() {
        return textEmpty;
    }

    public String getText() {
        return this.input.getText();
    }

    public void addModifyListener (ModifyListener listener) {
        this.input.addModifyListener(listener);
    }

    public void disposeFonts(){
        if (this.inputFont != null){
            this.inputFont.dispose();
        }
        if (this.emptyFont != null){
            this.emptyFont.dispose();
        }
    }   
} 
```

**更新：**正如 Baz 所表明的，这在 Indigo 中不是问题，而似乎只是 Juno 中的 E4 应用程序的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:29:50.930

基于 sambi 的回答，我得到了以下工作。也许这适用于朱诺：

```
private static Font italic;

public static void main(String[] args) {
    final Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1,false));

    italic = new Font(Display.getCurrent(), "Verdana", 6, SWT.ITALIC);

    final Text text = new Text(shell, SWT.BORDER);

    text.addListener(SWT.Paint, new Listener() {

        @Override
        public void handleEvent(Event event) {

            if(text.getText().length() < 1 && !text.isFocusControl())
            {
                GC gc = event.gc;
                gc.setFont(italic);
                gc.setForeground(display.getSystemColor(SWT.COLOR_GRAY));

                Point size = text.computeSize(SWT.DEFAULT, SWT.DEFAULT);

                /* Strangely the y positioning doesn't work correctly */
                //gc.drawText("Please enter text", 1, (size.y / 2) - (italic.getFontData()[0].getHeight() / 2));
                gc.drawText("Please enter text", 1, 4);
            }
        }
    });

    text.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, true));

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Dummy");

    button.forceFocus();

    shell.setSize(200, 100);
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
    italic.dispose();
    display.dispose();
} 
```

没有焦点和空文本：

![在此处输入图像描述](../Images/436acad09b9c66897a1ee4cede035115.png)

带焦点或文字：

![在此处输入图像描述](../Images/96c6735e0bb2a9e8e0245089ea30ebc3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:42:23.490

你可以使用`Text.setMessage (String message)`. 这样做的问题是您将无法自定义字体大小和前景......等等。

要自定义它，您实际上可以在`Text`.

# ruby-on-rails - Create Action Can;t Save To Database -- 将参数从一个表单传递到另一个控制器的

> ID：12729354
> 
> 赞同：0
> 
> 时间：2012-10-04T14:18:43.760
> 
> 标签：ruby-on-rails, ruby

现在我正在尝试构建一个能够搜索电话号码、购买电话号码并将交易记录到数据库的应用程序。

我想这样做的方法是有两个控制器——（1） find_numbers 控制器接受参数并搜索数字。(2) 手机控制器购买选择的号码并将参数保存到数据库中。

这是我正在尝试做的图表。

[http://www.stepanp.com/search-and-buy.jpg](http://www.stepanp.com/search-and-buy.jpg)

虽然我可以搜索号码并购买号码，但我似乎无法将其保存到数据库中。

**它重定向我并告诉我我没有填写正确的字段。**

这让我认为 find_numbers 表单中的参数不被接受为手机控制器创建操作的参数

这是 find_numbers/show

```
 <%= @numbers.each do |number| %>

        <%= form_tag(:controller => "phones", :action => "create" ) do %>
            <%= hidden_field :original_number, params[:original_number] %>
            <%= hidden_field :name, params[:name] %>
            <%= hidden_field(:twilio_number,  number.phone_number) %>

            <div class="found_list">
                <div class="found_phone_number">
                    <%= label_tag(:number, number.friendly_name) %>
                </div>
                <div class="choose_found_number">
                 <%= submit_tag("Choose This Number", :class => "btn btn-large btn-success") %>
                </div>
            </div>
                <hr>
        <% end %>
    <% end %> 
```

**而且，这里是手机控制器的创建动作**

```
 def create
    @user = current_user
    @phone = @user.phones.build(params[:phone])
    client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)
    number = client.account.incoming_phone_numbers.create(
                   :phone_number => params[:twilio_number])
    if @phone.save && !number.nil?
      flash[:success] = "Phone Number Created!"
      redirect_to user_path
    else
      render new_find_number_path
      flash[:error] = "It looks like there were errors with the submission"
    end
  end 
```

我需要在 create 操作上编辑什么，使其采用 show 操作 POSTS 的参数，然后将其保存到数据库中？

我认为这可能是罪魁祸首：

```
@phone = @user.phones.build(params[:phone]) 
```

谢谢你一直陪着我！任何指导将不胜感激

这是我通过 find_numbers/show 点击 Phones#create 时的调试器信息

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: RMvjP9PQt9hVEJE449pMqgqnFcreqvXtmZFEyU+641g=
original_number: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  '1231231234': ''
name: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  Example Name: ''
twilio_number: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  '+18322415354': ''
commit: Choose This Number
action: create
controller: phones 
```

电话模型

```
# == Schema Information
#
# Table name: phones
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  twilio_number   :string(255)
#  original_number :string(255)
#  user_id         :integer
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#

class Phone < ActiveRecord::Base
      attr_accessible :name, :original_number, :twilio_number
      belongs_to :user

  validates :name, presence: true
  validates :twilio_number, presence: true
  validates :original_number, presence: true
  validates :user_id, presence: true

  default_scope order: 'phones.created_at DESC'

end 
```

[http://stepanp.com/search-and-buy-debug.jpg](http://stepanp.com/search-and-buy-debug.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:45:51.223

试试这个

```
def create
    @user = current_user
    @phone = @user.phones.new(params[:phone])
    client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)
    number = client.account.incoming_phone_numbers.create(
                   :phone_number => params[:twilio_number])
    if @phone.save && number.present?
      flash[:success] = "Phone Number Created!"
      redirect_to user_path
    else
      render new_find_number_path
      flash[:error] = "It looks like there were errors with the submission"
    end
end 
```

# android - Proguard 与 orrmlite - 参数化集合

> ID：12729375
> 
> 赞同：5
> 
> 时间：2012-10-04T14:19:50.070
> 
> 标签：android, proguard, ormlite

我的应用程序在没有 proguard 的情况下完美运行。当我将 proguard 与 ormlite 一起使用时，我遇到了一些问题。在 logcat 中出现：

```
java.sql.SQLException: Field class for 'name' must be a parameterized Collection 
```

在proguard文件中我放了：

```
-keep class com.j256.** 
-keepclassmembers class com.j256.** { *; }
-keep enum com.j256.**
-keepclassmembers enum com.j256.** { *; }
-keep interface com.j256.**
-keepclassmembers interface com.j256.** { *; } 
```

你可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T22:19:03.497

我发现您需要保留的不仅仅是*Annotation*属性

```
-keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod 
```

下面是我默认的 ormlite proguard 语句。您还需要保留描述数据的文件

```
# OrmLite uses reflection
-keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod 
-keep class com.j256.**
-keepclassmembers class com.j256.** { *; }
-keep enum com.j256.**
-keepclassmembers enum com.j256.** { *; }
-keep interface com.j256.**
-keepclassmembers interface com.j256.** { *; }

-keep class com.mycompany.myproduct.data.entity.**
-keepclassmembers class com.mycompany.myproduct.data.entity.** { *; }
-keep enum com.mycompany.myproduct.data.entity.**
-keepclassmembers enum com.mycompany.myproduct.data.entity.** { *; }
-keep interface com.mycompany.myproduct.data.entity.**
-keepclassmembers interface com.mycompany.myproduct.data.entity.** { *; } 
```

# html - 调整页面大小 - 使用基于百分比的宽度放置 Div

> ID：12729377
> 
> 赞同：0
> 
> 时间：2012-10-04T14:19:57.833
> 
> 标签：html, css

所以我有一个 div 贴在屏幕的右上角。

我可以使用以下 CSS 使 div 保持在右上角：

```
.dockbar {
    background: #000000;
    width:300px;
    float:right;
    position: absolute;
    left:1180px;
    top:10px;
    height:38px;
} 
```

但我讨厌这种方法，因为如果屏幕更大，div 右侧有空间。我更喜欢使用基于百分比的大小，但是这样做会导致 div 随屏幕移动（因为百分比..）

有没有办法在右上角放置一个div：

*   不使用固定定位
*   没有声明精确的基于像素的定位

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:23:54.663

更改`left:1180px;`为`right: 0px`，一切正常。

```
#wrapper{
 width: 800px;
}

<div id="wrpper">
   <div class="dockbar"></div>
</div> 
```

可能是这样的。

# jquery - jQuery Gallery - 为什么大图像会在另一个窗口中打开？

> ID：12729379
> 
> 赞同：0
> 
> 时间：2012-10-04T14:19:59.663
> 
> 标签：jquery

我在这里有一个简单的 jQuery 画廊：http: [//encoreazalea.com/ee/the-collection/in-the-landscape](http://encoreazalea.com/ee/the-collection/in-the-landscape)

当您单击其中一个缩略图时，较大的图像应该显示在预览图像区域的左侧。但是，它会在另一个窗口中打开。

这是HTML：

```
<div id="preview">
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape16.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape15.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape14.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape12.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape13.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape11.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape10.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape9.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape8.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape6.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape7.jpg" class="gallery" alt="photo gallery" />
<img id="photo_large" src="http://encoreazalea.com/ee/landscape-gallery/landscape5.jpg" class="gallery" alt="photo gallery" />
</div>

</div><!-- end #content-hub -->

<div id="sidebar">
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape16.jpg" title="Landscape16"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape16_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape15.jpg" title="Landscape15"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape15_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape14.jpg" title="Landscape14"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape14_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape12.jpg" title="Landscape12"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape12_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape13.jpg" title="Landscape13"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape13_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape11.jpg" title="Landscape11"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape11_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape10.jpg" title="Landscape10"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape10_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape9.jpg" title="Landscape9"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape9_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape8.jpg" title="Landscape8"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape8_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape6.jpg" title="Landscape6"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape6_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape7.jpg" title="Landscape7"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape7_tn.jpg" alt="photo gallery"  /></a>
<a href="http://encoreazalea.com/ee/landscape-gallery/landscape5.jpg" title="Landscape5"><img class="gallery" src="http://encoreazalea.com/ee/landscape-gallery/landscape5_tn.jpg" alt="photo gallery"  /></a>
</div><!-- end #sidebar --> 
```

这是jQuery：

```
<script type="text/javascript">
$(document).ready(function() {
    $("a:has(img.gallery)").click(function() {
        var largePath = $(this).attr("href");
        var caption = $(this).attr("title");
        $("#photo_large").attr({ src: largePath});
        $("#caption1").text(caption);
        return false;
    });
});

</script> 
```

我可以用一些有更好处方的眼睛来看看这个，帮助我看看我错过了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:26:28.360

问题是您的页面出现脚本错误。所以你需要找到并修复它。它在加载 dropmenu 对象之前失败，因此其余脚本无法正常工作。

使用检查 javascript 语法的编辑器或检查 jsfiddle 的 js lint 功能中的代码。

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:28:40.307

您的代码没有任何问题。它工作正常。只是它永远不会运行，因为页面上还有其他错误。查看错误控制台。如果您在控制台中执行上面的代码段，它就可以工作。

# c# - 使用 Forms Authentication 和 ASP.NET 时如何通过链接自动验证用户？

> ID：12729380
> 
> 赞同：1
> 
> 时间：2012-10-04T14:20:00.547
> 
> 标签：c#, asp.net, .net, forms-authentication

我的 asp.net 应用程序使用工作正常的表单身份验证。我还希望能够创建“魔术”链接，有人可以点击链接而无需登录。例如，如果用户访问

```
http://myapp.com/viewstuff.aspx 
```

然后他们将被重定向到`login.aspx`第一个，但如果他们访问

```
http://myapp.com/viewstuff.aspx?ThingId=1234&Expires=20121004153200&Signature=aksdjfhalsdfydmvbsdkfjhysdk 
```

然后它会自动将他们作为访客帐户登录并让他们查看请求的内容。我可以生成这样的链接并编写逻辑来检查签名是否有效，但我不确定在 ASP.NET 生命周期中的哪个位置放置我的逻辑。有什么建议么？

目前我已经将逻辑放入 Application_AuthorizeRequest 但它似乎并不理想，因为一旦我对用户进行了身份验证，我就需要 Redirect() 。我希望能够设置一些东西，所以说'好的，我已经验证了这个人并设置了他们的身份，让他们的请求继续'。

如果有人有一个实现这个的例子，那就太好了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T14:24:01.263

好吧，听起来你是在正确的轨道上。如果viewstuff.aspx 需要身份验证，您将被重定向到您的登录页面，因此您需要将逻辑放在那里（在login.aspx.cs 中）以提取您的查询字符串，分离值并在传递之前对用户进行身份验证回到返回网址。

# wordpress - 获取h1内容并放入变量

> ID：12729385
> 
> 赞同：0
> 
> 时间：2012-10-04T14:20:12.617
> 
> 标签：wordpress, get

在我的 wordpress 中，我有一个帖子：

```
<h1 id="rozdzial_1">Tytul rozdzialu</h1>
Some txt
<!--nextpage-->
<h1 id="rozdzial_2">Kolejny tytul</h1>
Some txt
<!--nextpage-->
<h1 id="rozdzial_3">Jeszcze jeden</h1>
Some txt 
```

这篇文章的内容在 get_the_content()

如何从该内容中获取 H1 的所有值并将其放入变量中？具有 id = rozdzial_1 的 H1 到变量 rozdzial_1 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:35:10.647

您可以使用[PHP 文档对象模型](http://www.php.net/manual/en/book.dom.php)

```
<?php
    $content = get_the_content();
    $DOM = new DOMDocument;
    $DOM->LoadHTML($content);

    $items = $DOM.getElementsByTagName('h1');

    /* post all h1 elements, now you can do the same with getElementsByID to get the id's with that you expect. */
    for ($i = 0; $i < $items->length; $i++) {
        echo $items->item($i)->nodeValue;
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:36:04.997

您应该使用 dom 解析器（最佳选择）。或者只是一个正则表达式，像这样：

```
$content = get_the_content();

if (preg_match_all('#<h1 id="(.*)">(.*)</h1>#i', $content, $matches))
{
    foreach ($matches[1] as $key=>$val)
    {
        $$val = $matches[2][$key];
    }
}

// test
echo $rozdzial_1; 
```

# css - Magento：如何在产品页面的右栏中正确移动自定义简单产品选项？

> ID：12729388
> 
> 赞同：2
> 
> 时间：2012-10-04T14:20:16.740
> 
> 标签：css, xml, magento, magento-1.7

我非常希望将简单产品（只有简单产品）的自定义选项（类型：无线电输入）移到右列。

现在，它们似乎显示在页面底部的一个名为“container2”的容器中，并在 view.phtml 中调用如下：

```
<div class="clearer"></div>
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
<?php echo $this->getChildChildHtml('container2', '', true, true) ?>
<?php endif;?> 
```

Container2 也在内容块内的布局文件 catalog.xml 中。

所以我所做的只是将选项包装器从引用 name="content" 块中移出，一个新的：reference name="right" 。

由于某种原因，代码在这里的格式并不正确，而且还缺少一些位，所以我将其粘贴在这里： http: [//pastebin.com/nhCUXcF4](http://pastebin.com/nhCUXcF4)

基本上我可以在右栏中看到我的选项，但是当我单击它时，就像没有检查无线电输入一样，因为它要求再次选择一个选项（它们是必需的）

如果我将选项留在内容块中，在底部的 container2 中，它们可以正常工作，就像我单击一个一样，它被正确检查。如果我没有选中任何并单击添加到购物车，它会要求选择所需的选项。

我认为问题来自我不太了解的 container1 、 container2 东西。我还在目录 XML 中看到它们是一些代码，例如

```
<block type="core/template_facade" name="product.info.container2" as="container2">
<action method="setDataByKey"><key>alias_in_layout</key><value>container2</value>    </action>
   <action method="setDataByKeyFromRegistry"><key>options_container</key
    <key_in_registry>product</key_in_registry></action>
 <action method="append"><block>product.info.options.wrapper</block></action>
 <action method="append"><block>product.info.options.wrapper.bottom</block></action>
</block> 
```

所以基本上我的问题是如何正确地将所需选项从 view.phtml （产品页面）的内容移动到右列？现在绝对感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:41:11.030

There's a much simpler way to do this.

instead of using the 3-column, or 2column-right layouts use the 1column layout and then add the right hand column into the product view template file like this:

```
<div class="col-right sidebar">
    <?php if ($_product->isSaleable() && $this->hasOptions()):?>
    <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
    <?php endif;?>
</div> 
```

It's a lot easier to change the CSS for the product view page than it is to change the blocks around etc.

# c++ - 只要集合不变，迭代器是否以相同的顺序迭代 boost::unordered_set 或 boost::unordered_map？

> ID：12729393
> 
> 赞同：9
> 
> 时间：2012-10-04T14:20:47.677
> 
> 标签：c++, boost-unordered

只要集合或映射未更改，迭代器是否会迭代`boost::unordered_set`或以相同的顺序迭代？`boost::unordered_map`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:59:45.177

哈希映射的一些实现会将哈希到同一个 bin 的项目重新排序，将最近访问的项目放在列表的前面，作为优化。这将改变顺序。我不知道这样`boost::unordered_map`做，但是将来您可能最终`std::unordered_map`会替换它，这完全取决于您的编译器的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:41:14.927

它应该是确定性的，但只要它们是所​​谓的*unordered*，您就不应依赖它来迭代您的元素。

# python - 如何根据 Python 中的注释块拆分文本文件？

> ID：12729403
> 
> 赞同：5
> 
> 时间：2012-10-04T14:21:04.400
> 
> 标签：python, parsing

我浪费了我早上的大部分时间来解决这个简单的问题。使用 python，我想解析如下所示的数据文件：

```
# This is an example comment line, it starts with a '#' character.
# There can be a variable number of comments between each data set.
# Comments "go with" the data set that comes after them.
# The first data set starts on the next line:
0.0 1.0
1.0 2.0
2.0 3.0
3.0 4.0

# Data sets are followed by variable amounts of white space.
# The second data set starts after this comment
5.0 6.0
6.0 7.0

# One more data set.
7.0 8.0
8.0 9.0 
```

我想要的 python 代码会将上面的示例解析为三个“块”，将它们存储为列表的元素。单独的代码块本身可以存储为行列表，有或没有注释行，无论如何。一个手动的方法是这样做：

```
#! /usr/bin/env python

# Read in data, seperate into rows_alldata
f=open("example")
rows = f.read().split('\n')
f.close()

# Do you haz teh codez?
datasets=[]
datasets.append(rows[0:8])
datasets.append(rows[9:13])
datasets.append(rows[15:18]) 
```

我正在寻找一种更通用的解决方案，它支持可变数量和长度的数据集。我已经尝试了几场由非 Python 风格的循环构建的灾难。我认为最好不要与他们混淆我的问题；这是工作，而不是“家庭作业”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:39:00.407

使用[`groupby`](http://docs.python.org/library/itertools.html#itertools.groupby).

```
from itertools import groupby

def contains_data(ln):
    # just an example; there are smarter ways to do this
    return ln[0] not in "#\n"

with open("example") as f:
    datasets = [[ln.split() for ln in group]
                for has_data, group in groupby(f, contains_data)
                if has_data] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T14:37:50.393

```
datasets = [[]]
with open('/tmp/spam.txt') as f:
  for line in f:
    if line.startswith('#'):
      if datasets[-1] != []:
        # we are in a new block
        datasets.append([])
    else:
      stripped_line = line.strip()
      if stripped_line:
        datasets[-1].append(stripped_line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:43:39.513

```
import pprint

with open("test.txt") as fh:
    codes = []
    codeblock = []

    for line in fh:
        stripped_line = line.strip()

        if not stripped_line:
            continue

        if stripped_line.startswith("#"):
            if codeblock:
                codes.append(codeblock)
                codeblock = []

        else:
            codeblock.append(stripped_line.split(" "))

    if codeblock:
        codes.append(codeblock)

pprint.pprint(codes) 
```

输出：

```
[[['0.0', '1.0'], ['1.0', '2.0'], ['2.0', '3.0'], ['3.0', '4.0']],
 [['5.0', '6.0'], ['6.0', '7.0']],
 [['7.0', '8.0'], ['8.0', '9.0']]] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T14:35:17.030

```
datasets = []
with open('example') as f:
    for line in f:
        if line and not line.startswith('#'):
            datasets.append(line.split()) 
```

# c# - 序列化 .net 对象并省略文档类型？

> ID：12729408
> 
> 赞同：5
> 
> 时间：2012-10-04T14:21:19.540
> 
> 标签：c#, .net, xml, xml-serialization

我编写了一些 .net 代码来使用 XMLSerializer 类序列化对象。

```
 public static string serialize(object o)
    {
            Type type = o.GetType();
            System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(type);                
            System.IO.StringWriter writer = new System.IO.StringWriter();
            serializer.Serialize(writer, o);                
            return writer.ToString();         
    } 
```

输出如下所示：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <string>a</string>
  <string>b</string>
  <string>c</string>
</ArrayOfString> 
```

这很好，但我真正想要的是在开始时只获取没有 XML 文档类型声明的根节点。

我想这样做的原因是因为我想将 XML 序列化对象的根元素用作另一个 XML 文档的一部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T14:42:07.977

[`XmlWriterSettings`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx)具有省略 XML 声明 ( [`OmitXmlDeclaration`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.omitxmldeclaration.aspx)) 的属性：

```
public static string Serialize(object obj)
{
    var builder = new StringBuilder();
    var xmlSerializer = new XmlSerializer(obj.GetType());
    using (XmlWriter writer = XmlWriter.Create(builder,
        new XmlWriterSettings() { OmitXmlDeclaration = true }))
    {
        xmlSerializer.Serialize(writer, obj);
    }
    return builder.ToString();
} 
```

# clone - 将谷歌协议缓冲区消息的结构克隆到构建器对象的结构

> ID：12729411
> 
> 赞同：0
> 
> 时间：2012-10-04T14:21:25.967
> 
> 标签：clone, message, protocol-buffers, immutability, builder

我们使用协议缓冲区将数据存储在数据库中（作为 blob）。在某些时候，我们再次阅读它们，需要修改它们并再次存储它们。

问题是，协议缓冲区消息对象是不可变的。我们想到的只是使用协议缓冲区消息作为原型创建一个新的构建器对象：

```
Foo.Builder.newBuilder(prototype) 
```

这基本上有效。但是由于我们有一个嵌套结构，所以原型对象实际上包含属性本身就是消息，这是行不通的。[文档](https://developers.google.com/protocol-buffers/docs/reference/java-generated)摘录：

> 由于嵌入的消息和字符串对象是不可变的，它们在原始和副本之间共享。

有没有办法将整个结构克隆到可变的新构建器对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:24:57.807

嗯，有点。我已经使用 DynamicMessage.Builder、Descriptor 和 FieldDescriptor 完成了这项工作。我使用完全限定名称递归地将对象图遍历到要更新的属性。一旦找到，我更新它并在 DynamicMessage.Builder(s) 上调用 build 备份堆栈。特别是在处理重复字段时，这并不简单。

# android - 如何水平滚动LinearLayout？

> ID：12729412
> 
> 赞同：1
> 
> 时间：2012-10-04T14:21:26.360
> 
> 标签：android, android-linearlayout, horizontalscrollview

我有一个比屏幕大的 LinearLayout。我想水平滚动它。我有下一个代码，但它不起作用。有谁能够帮助我？

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/gm_movimientos"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:orientation="horizontal" >

    </LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:33:55.453

您的 Horizo​​ntalScrollView 宽度需要设置为 match_parent 或固定大小。现在 ScrollView 正在扩展到与 LinearLayout 相同的尺寸（即，它的边界也在屏幕之外）。

# android - Android ViewPager 的 onPageScrollStateChanged 永远不会被调用

> ID：12729416
> 
> 赞同：26
> 
> 时间：2012-10-04T14:22:07.813
> 
> 标签：android, android-viewpager

我扩展了 ViewPager 类并实现了 onPageChangeListener。我将此 ViewPager 与 SherlockFragment 内的 CirclePageIndicator 结合使用。ViewPager 包含 ImageViews 和 TextViews，没什么特别的。

每次更改页面时，我都需要在 ViewPager 下方做一些事情。所以，我想我需要使用 onPageScrollStateChanged 并验证状态何时为 IDLE 或其他什么。

问题是从 3 个实现的方法（onPageScrollStateChanged、onPageSelected 和 onPageScrolled）中，只有 onPageScrolled 被调用（我在每个方法中检查了一条日志消息）。这是为什么 ？代码如下。

```
public class UninterceptableViewPager extends ViewPager implements OnPageChangeListener{

private ArrayList<TwoRowListViewAdapter> mAdaptersList = null;
private ListView mListView = null;
private ProgressBar mProgressBar = null;

public UninterceptableViewPager(Context context, AttributeSet attrs)
{
    super(context, attrs);
}

public boolean onInterceptTouchEvent(MotionEvent event)
{
    getParent().requestDisallowInterceptTouchEvent(true);
    return super.onInterceptTouchEvent(event);
}

public void setAdaptersList(ArrayList<TwoRowListViewAdapter> adaptersList)
{
    mAdaptersList = adaptersList;
}

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels)
{
    super.onPageScrolled(position++, positionOffset, positionOffsetPixels);
    if (positionOffset == 0) // FIXME
        loadHistoryPage(position);
}

@Override
public void onPageSelected(int position) {}

@Override
public void onPageScrollStateChanged(int state) {}

// -------------------------------------------------------------------------------------------
// --------------   Helper Methods
// -------------------------------------------------------------------------------------------

public void setListView(ListView listview)
{
    mListView = listview;
}

public void setProgressBar(ProgressBar progressBar)
{
    mProgressBar = progressBar;
}

private void loadHistoryPage(int position)
{
    mListView.setVisibility(View.INVISIBLE);
    mProgressBar.setVisibility(View.VISIBLE);
    mListView.setAdapter(null);
    mListView.setAdapter(mAdaptersList.get(position-1));
    mProgressBar.setVisibility(View.INVISIBLE);
    mListView.setVisibility(View.VISIBLE);
} 
```

}

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-04T18:14:34.307

当您将 PageIndicator 与 Viewpager 结合使用时，不会调用 ViewPager 的 onPageChangeListener。我不知道这是什么原因，但这发生在我同时使用两者时。可能是因为页面指示器消耗了页面更改事件。相反，您应该为 PageIndicator 设置一个页面更改侦听器，它将在页面更改时调用。您可以这样做：

```
indicator.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected (int page)
        {
            //page changed
        }

        @Override
        public void onPageScrolled (int arg0, float arg1, int arg2)
        {
        }

        @Override
        public void onPageScrollStateChanged (int arg0)
        {
        }
    }); 
```

我希望这将有所帮助。随意讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T10:07:36.057

`setOnPageChangeListener`已弃用。采用`addOnPageChangeListener`

```
viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        @Override
        public void onPageSelected(int position) {

        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

# java - 我需要再创建两个构造函数，但 Java 不会让我

> ID：12729420
> 
> 赞同：-2
> 
> 时间：2012-10-04T14:22:15.197
> 
> 标签：java, multiple-constructors

好的，我需要创建三个构造函数作为项目的一部分，一个默认，一个通用和一个副本。我设法创建了一个默认构造函数，但我无法创建通用或复制构造函数，否则我的代码将无法编译。如果有人知道答案，这是代码：

```
package lab02;

import javax.swing.JOptionPane;

/**
 * Stores the personal details of a friend.
 * 
 * @author Keith Francis(11109971)
 * @date 4-10-2012
 */
public class Friend {

    private String firstName;// stores first name
    private String surname;// stores surname
    private String address;// stores address
    private int age;// stores age in years
    private int height;// stores height in cms
    private String hairColourString;// stores hiar colour as a string

    private boolean colourTrue = false;// hair colour value is not valid

    public static final int BLACK = 0;
    public static final int BROWN = 1;
    public static final int BLONDE = 2;
    public static final int RED = 3;
    public static final int GREY = 4;

    /**
     * Default constructor sets everything to 0 or null, depending on type.
     */
    public Friend() {

        firstName = null;
        surname = null;
        address = null;
        age = 0;
        height = 0;
        hairColourString = null;
    }

    /**
     * Allows the first name to be edited
     * 
     * @param first
     *            first name variable
     */
    public void setFirstName(String first) {
        firstName = first;
    }

    /**
     * Retrieves first name
     * 
     * @return first name to String
     */
    public String getFirstName() {
        return firstName;
    }

    /**
     * Allows the surname to be edited
     * 
     * @param last
     *            creates last name variable
     */
    public void setSurname(String last) {
        surname = last;
    }

    /**
     * Retrieves the surname
     * 
     * @return last name to string
     */
    public String getSurname() {
        return surname;
    }

    /**
     * Allows the address to be edited
     * 
     * @param place
     *            where the friend lives
     */
    public void setAddress(String place) {
        address = place;
    }

    /**
     * Retrieves the address
     * 
     * @return the address of the friend
     */
    public String getAddress() {
        return address;
    }

    /**
     * Allows the age (in years) to be edited
     * 
     * @param years
     *            the age in years
     */
    public void setAge(int years) {
        age = years;
    }

    /**
     * Retrieves the age in years
     * 
     * @return the age in years
     */
    public int getAge() {
        return age;
    }

    /**
     * Allows the height in centimetres to be edited
     * 
     * @param h
     *            height in centimetres
     */
    public void setHeight(int h) {
        height = h;
    }

    /**
     * Retrieves the height in centimetres
     * 
     * @return height in centimetres
     */
    public int getHeight() {
        return height;
    }

    /**
     * 
     * @return String of the personal details of the friend
     */
    @Override
    public String toString() {
        return ("First name is: " + firstName + "\nSurname is: " + surname
                + "\nAddress is: " + address + "\nAge is :" + age
                + "\nHeight is: " + height + "\nHair colour is: " + hairColourString);
    }

    /**
     * Uses JOptionPanel to edit the friend's personal details
     */
    void inputFriend()
    {
        //welcome message
        JOptionPane.showMessageDialog(null,"Weclome",null,JOptionPane.PLAIN_MESSAGE);
        //prompt to enter first name
        String name1 = JOptionPane.showInputDialog("Enter the friend's first name.");
        //calls setFirstName method
        setFirstName(name1);
        //prompt user to enter second name
        String name2 = JOptionPane.showInputDialog("Enter the friend's surname.");
        setSurname(name2);// calls setSurname method

        //prompt user to enter address
        String thisAddress = JOptionPane.showInputDialog("Enter the friend's address.");
        setAddress(thisAddress);//calls setAddress method
        //prompt user to enter age in years
        String ageString = JOptionPane.showInputDialog("Enter the friend's age in years.");
        int i = Integer.parseInt(ageString);
        setAge(i);
        //prompt user to enter height in centimetres
        String heightString = JOptionPane.showInputDialog("Enter the friend's height in cenimetres.");
        int j = Integer.parseInt(heightString);
        setHeight(j);
        //prompt user to enter hair colour
        String hairColourInput = JOptionPane.showInputDialog("Select the friend's " +
                "hair colour:\n 0 = Black\n1 = Brown\n2 = Blonde\n3 = Red\n4 = Grey");
        while(colourTrue != true)//if hair colour is valid
        {
        if(
            hairColourInput.equals("0"))
        { hairColourString = "Black";//hair is black
            colourTrue = true;}//entry is valid
        else if (hairColourInput.equals("1"))
        { hairColourString = "Brown";//hair is brown
            colourTrue = true;}//entry is valid
        else if (hairColourInput.equals("2"))
        { hairColourString = "Blonde";//hair is blonde
            colourTrue = true;}//entry is valid
        else if (hairColourInput.equals("3"))
        { hairColourString = "Red";//hair is red
            colourTrue = true;}//entry is valid 
        else if (hairColourInput.equals("4"))
        { hairColourString = "Grey";//hair is grey
            colourTrue = true;}//entry is valid
            else {
                JOptionPane.showMessageDialog(null,
                        "The number entered is invalid.", "Error",
                        JOptionPane.WARNING_MESSAGE);// warns user that entry is
                                                        // not valid
                hairColourInput = JOptionPane
                        .showInputDialog("Select the friend's " +
                        "hair colour:\n 0 = Black\n1 = Brown\n2 = Blonde\n3 = Red\n4 = Grey");
            }// user is asked to choose again until they enter a valid number

        }
    }

    /**
     * 
     * @param args
     *            Calls inputFriend method and prints out the final String using
     *            JOptionPane
     */
    public static void main(String[] args) {
        Friend friend = new Friend();
        friend.inputFriend();// calls inputFriend method
        JOptionPane.showMessageDialog(null, friend.toString()); // prints out details
    }
} 
```

这是我对复制构造函数的尝试：

```
public Friend(Friend aFriend) {
    this(aFriend.getFirstName(), aFriend.getSurname(), aFriend.getAddress, aFriend.getAge, aFriend.getHeight); 
```

以及我对一般构造函数的尝试：

```
public Friend2(){
    public static final int BLACK = 0;
    public static final int BROWN = 1;
    public static final int BLONDE = 2;
    public static final int RED = 3;
    public static final int GREY = 4;
} 
```

出现的是当我插入构造函数时需要一个类、接口或枚举。希望有帮助。

对，我试过这样的复制构造函数：

```
public Friend(Friend f) {
this(f.getFirstName(),f.getSurname(),f.getAddress(),f.getAge(),f.getHeight());
} 
```

但是我收到一条消息，说我没有合适的构造函数。

更新：通用和复制构造函数现在正在工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:29:02.133

您可以重载构造函数，如下所示：

缺点1：

```
public Friend()
{

} 
```

缺点2：

```
 public Friend(int arg)
{

} 
```

缺点3：

```
 public Friend(String s)
{

} 
```

复制缺点：

```
 public Friend(Friend f)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:29:34.737

您的`Friend2()`构造函数是错误的，因为它实际上是一个`Friend2`类的构造函数。类的构造函数都应该有一个与类名相同的方法名。（构造函数声明看起来像方法声明，名称与类相同，但没有指定返回类型）

您的复制构造函数`this`用于调用不存在的构造函数。（`this(x,y,z)`正在调用构造函数的 3 参数版本）

您想要的是如下所示的内容：

```
public class Friend 
{

// snip

/**
 * Default constructor sets everything to 0 or null, depending on type.
 */
public Friend()
{

firstName = null;
surname = null;
address = null;
age = 0;
height = 0;
hairColourString = null;
}

public Friend(Friend f) {
    // copy constructor
}

public Friend(String fName, String sName, String address, int age, int height, String hair) {
    // fill in stuff here
}

// snip 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:35:15.140

重载您的构造函数，只需确保它们具有不同的签名并且它应该可以正常编译。为了保持 DRY，通过调用 this() 让副本和通用构造函数使用默认构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:28:33.527

你需要重载你的构造函数。您不能定义具有相同名称和参数的方法。在这里寻找另一个参考：

[在 Java 中处理多个构造函数的最佳方法](https://stackoverflow.com/questions/581873/best-way-to-handle-multiple-constructors-in-java)

[http://www.java-samples.com/showtutorial.php?tutorialid=284](http://www.java-samples.com/showtutorial.php?tutorialid=284)

# facebook-graph-api - Facebook Javascript SDK 显示数组的值

> ID：12729422
> 
> 赞同：0
> 
> 时间：2012-10-04T14:22:16.490
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我试图在 facebook javascript sdk 中显示签入的标签，但只显示 [object Object] 因为它是一个数组，我尝试了几种方法来显示这个数组，但不能。

以下代码：

```
<!DOCTYPE html> 
<html xmlns:fb="https://www.facebook.com/2008/fbml">
    <head>
        <title>New JavaScript SDK</title>
        <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                window.fbAsyncInit = function() {
                    FB.init({
                        appId: '274371602680881', 
                        status: true, 
                        cookie: true,
                        xfbml: true,
                        oauth: true
                    });

                    function updateButton(response) {
                        var button = document.getElementById('fb-auth');

                        if (response.authResponse) {
                            //user is already logged in and connected
                            var userInfo = document.getElementById('user-info');
                            FB.api('/me', function(response) {
                                userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
                                button.innerHTML = 'Uninstall';

                                FB.api('/me/checkins', function(response) {
                                    console.log('Got your check-ins: ', response);

                                    if (!response.error) {
                                        //displayCheckIns(response.data, document.getElementById('checkins'));

                                        var markup = '<div class="data-header">Your last five check-ins:</div>';

                                        for (var i=0; i < response.data.length && i < 5; i++) {
                                            var checkin = response.data[i];

                                            //alert(checkin.tags);
                                            //alert(checkin.tags.length);
                                            //alert(checkin.tags.name);
                                            //alert(checkin.tags[0]);
                                            //alert(checkin.tags[0].name);

                                            markup += '<div class="place">'
                                                        + '<div class="picture">Foto: <img src="http://graph.facebook.com/' + checkin.place.id + '/picture"></div>'
                                                        + '<div class="info">'
                                                            + '<div class="from">From: ' + checkin.from.name + '</div>'
                                                            + '<div class="tags">Tags: ' + checkin.tags + '</div>'
                                                            + '<div class="place">Place: ' + checkin.place.name + '</div>'
                                                            + '<div class="place-location">Place Location: ' + checkin.place.location.latitude + ", " + checkin.place.location.longitude + '</div>'
                                                            + '<div class="application">Application: ' + checkin.application.name + '</div>'
                                                            + '<div class="created_time">Created time: ' + checkin.created_time + '</div>'
                                                            + '<div class="likes">Likes: ' + checkin.likes + '</div>'
                                                            + '<div class="check-in-msg">Mensagem: ' + (checkin.message || '') + '</div>'
                                                            + '<div class="comments">Comments: ' + checkin.comments + '</div>'
                                                        + '</div>'
                                                    + '</div>';
                                        }

                                        document.getElementById('user-checkins').innerHTML = markup;
                                    }
                                });
                            });
                            button.onclick = function() {
                                FB.api({
                                    method: 'auth.revokeAuthorization'
                                }, function(response) {
                                    window.location.reload();
                                });
                                /*
                                FB.logout(function(response) {
                                    var userInfo = document.getElementById('user-info');
                                    userInfo.innerHTML="";
                                });*/
                            };
                        } else {
                            //user is not connected to your app or logged out
                            button.innerHTML = 'Login';
                            button.onclick = function() {
                                FB.login(function(response) {
                                    if (response.authResponse) {
                                        FB.api('/me', function(response) {
                                            var userInfo = document.getElementById('user-info');
                                            userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture" style="margin-right:5px"/>' + response.name;
                                        });
                                    } else {
                                        //user cancelled login or did not grant authorization
                                    }
                                }, {
                                    scope:'user_status'
                                });
                            }
                        }
                    }

                    // run once with current status and whenever the status changes
                    FB.getLoginStatus(updateButton);
                    FB.Event.subscribe('auth.statusChange', updateButton);
                };

                (function() {
                    var e = document.createElement('script'); e.async = true;
                    e.src = document.location.protocol 
                        + '//connect.facebook.net/en_US/all.js';
                    document.getElementById('fb-root').appendChild(e);
                }());
            });
        </script>
    </head>
<body> 

<div id="fb-root"></div>
<h2>Updated JS SDK example</h2><br />
<div id="user-info"></div>
<div id="user-checkins"></div>
<p><button id="fb-auth">Login</button></p>
</body> 
</html> 
```

我尝试了几种方法，例如：

```
checkin.tags // shows [object Object]
checkin.tags.length // shows undefined
checkin.tags.name // shows undefined
checkin.tags[0] // shows undefined
checkin.tags[0].name // Can not read property 'name' of undefined 
```

这发生在标签、喜欢和评论上。其他不是数组的工作正常，例如“checkin.place.name”，甚至“checkin.place.location.latitude”都会带来正确的值。

我做了一个“console.log(JSON.stringify(checkin.tags));” 它返回：

```
{"data":[{"id":"100001702765878","name":"Mauricio Forte Neto"},{"id":"100001174670611","name":"Mario Celso"}],"paging":{"next":"https://graph.facebook.com/402127889842448/tags?access_token=AAAD5ih3qDDEBAIo3nB8P3ZCAwXrivw5lunDRAUvkRZCCFZBUy5au3ImicViq80HHVZC29hLDit6QwlZCXZB5WEBkDF3Pp2DrnUGWLrAwhpWddLoliyFDqd&limit=25&offset=25&__after_id=100001174670611"}} 
```

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:36:04.390

由于它是一个对象并且其中包含数据，因此我必须请求其中的数据类型。

我缺少的是添加一个“.data”，例如：

```
checkin.tags.data[0].name 
```

现在可以了！！！

# c++ - 定义类（和嵌套类）成员函数的更好/更整洁/更易读的方法？

> ID：12729425
> 
> 赞同：2
> 
> 时间：2012-10-04T14:22:35.320
> 
> 标签：c++, class, function, nested, member

> **可能重复：**
> [是否可以避免在实现文件中重复类名？](https://stackoverflow.com/questions/10887211/is-it-possible-to-avoid-repeating-the-class-name-in-the-implementation-file)

我一直在努力尝试（重新）学习 C++，但我在 C++ 面向对象编程方面遇到了一些理解问题。我最近花了很多时间在 Java 上工作，也许这让我很懒惰，但这是我遇到的问题。

这是我正在使用的不完全完整的代码：

```
class Pong{
    public:
        Pong();
        void run();

    private:
        //Class to represent a pong ball
        class Ball{
            public:
                Ball();
                int getVector();
            private:
                int xvel,yvel;
        };

        //Class to represent a pong paddle
        class Paddle{
            public:
            private:
        };

        bool init();
        //The ball and player paddles
        Ball ball;
        Paddle p1;
        Paddle p2;
};
//Ball members
Pong::Ball::Ball(){

}
//Paddle members
Pong::Paddle::Paddle(){

}

//Pong members
Pong::Pong() : ball(Ball()),p1(Paddle()),p2(Paddle()){
    ball = Ball();
    p1 = Paddle();
    p2 = Paddle();
}
bool Pong::init(){
    if(!log("Starting pong...")){return 2;}
    return 0;
}
void Pong::run(){
    if(Pong::init() != 0){log("Failed to initialize Pong!");}
    return;
} 
```

我在这里遇到的问题实际上是关于可读性的。我想知道是否有一种不那么难看的方式来定义成员和嵌套成员成员，而不必指定诸如 Pong::Ball::Ball() 之类的东西，IE 将命名空间放在每个成员的前面。

我在这里做错了吗？来自所有成员都定义在类本身内部的java，这似乎真的......对我来说很粗糙，也许是在类定义之外定义所有东西（包括嵌套类方法）。它有效，但我不禁觉得有更好的方法可以做到这一点，但我一直在使用的资源（cprogramming.com）说这是它需要完成的方式。

（编辑：就在有人抓住我之前，我知道我可以删除 Pong 构造函数中的重复定义。我只是还没有......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:24:10.047

> 来自所有成员都定义在类本身内部的java，这似乎真的......对我来说很粗糙，也许是在类定义之外定义所有东西（包括嵌套类方法）。

那不是问题。C++ 非常棒，它允许您在类定义的**内部和外部定义方法。**

如果你想把定义保留在外面，不，没有办法减少资格。

我只是指出以下几点，因为我认为您可能错了：

```
Pong::Pong() : ball(Ball()),p1(Paddle()),p2(Paddle()){
    ball = Ball();
    p1 = Paddle();
    p2 = Paddle();
} 
```

应该

```
Pong::Pong(){
} 
```

即 - 不需要**任何**显式初始化。

# entity-framework - 实体框架 - 对象上下文的闭包

> ID：12729429
> 
> 赞同：5
> 
> 时间：2012-10-04T14:22:51.710
> 
> 标签：entity-framework, entity-framework-4.3.1

在使用 EFProfiler（BTW 绝对棒的工具！）分析我们的一些实体框架应用程序之后，似乎在大多数情况下，所有对象上下文都没有关闭。

例如，在本地运行后，EF Profiler 告诉我打开了**326 个**Object Context，但只关闭了 1 个？

所以我的问题是，我应该担心这个吗？还是它在实体框架中自成一体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:37:01.160

如果您不使用 IoC 容器，是否可以在每次请求后手动关闭 ObjectContexts，例如在 Global.asax 的结束请求中，从而为您的上下文模拟“每个请求”的生活方式？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:30:44.477

如果您的应用程序没有明确地持有 ObjectContexts，最终将被释放，但一般来说，您应该在完成它们后尽快确定性地释放它们。在大多数情况下，它们将保持数据库连接，直到它们被释放。在我当前的 Web 应用程序中，我们使用 IoC 容器（Autofac）来确保在请求期间打开的任何 ObjectContext 在请求结束时被释放，并且不必等待垃圾收集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T14:32:05.097

我建议你**担心**它并尝试解决这个问题，因为对象上下文非常“庞大”。如果您的应用程序太多，您的应用程序最终可能会使用比所需更多的内存，并且 IIS 将更频繁地重新启动您的应用程序......

# java - 为什么当我对 java 函数进行回调用时 jvm 崩溃？

> ID：12729430
> 
> 赞同：0
> 
> 时间：2012-10-04T14:22:58.580
> 
> 标签：java, c, java-native-interface

以下 java 片段调用 jni 函数`Java_org_suhail_keylogger_HelperClasses_NativeMethods_unregisterHook`：

```
 private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    jMenuItem1.setEnabled(false);
    jMenuItem2.setEnabled(true);
    try {
       System.loadLibrary("Dll_PKeylogger"); // Load the dll written to listen to the tapping of keys
       nativeMethods.initializeJNIVars(); // called upon the object of a class named NativeMethods
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

*NativeMethods*（类，其对象用于调用上述 JNI C 方法）：

```
public class NativeMethods {

  public native void initializeJNIVars();
  public native void unregisterHook();

  public void displayKeyStrokes() { // FUNCTION THAT IS CALLED BACK FROM JNI C CODE
    System.out.println("Java Message : A Key has been pressed");
  }
} 
```

*JNI C 方法，由 java 代码调用*：

```
void Java_org_suhail_keylogger_HelperClasses_NativeMethods_initializeJNIVars
(JNIEnv *env, jobject obj) {
  jclass cls = (*env)->GetObjectClass(env,obj);
  callBackToDeliverKeyStroke = (*env)->GetMethodID(env,cls,"displayKeyStrokes","()V");
  object = (*env)->NewGlobalRef(env,obj);
  if(object == NULL | callBackToDeliverKeyStroke == NULL | cls == NULL) {
     printf("Initialization error...One of the variable is Null\n");
  }
 } 
```

*与上述调用 java 函数的方法在同一模块中的方法*：

```
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
  JNIEnv *Env;
  (*Env)->CallVoidMethod(Env,object,callBackToDeliverKeyStroke); 
  // I have initialized object and callBackToDeliverKeyStroke in the above method
} 
```

随着执行到达执行的最后一点，即上面刚刚提到的函数`JVM`崩溃。这是为什么 ？我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:24:40.093

```
JNIEnv *Env;
(*Env)->CallVoidMethod(Env,object,callBackToDeliverKeyStroke); 
```

`Env`未初始化。

# git - 是否可以在不忽略文件的情况下忽略 git 中目录的历史记录？

> ID：12729431
> 
> 赞同：1
> 
> 时间：2012-10-04T14:23:00.950
> 
> 标签：git

我的应用程序中有一个目录，其中包含已编译的文件（特别是在 rails 应用程序中的 public/assets 文件夹，其中包含从 CoffeeScript/Sass 文件编译的 JS/CSS 版本）。

我不想完全忽略该目录，因为我需要最新的编译版本存在于 respositry 中，我宁愿 git 不跟踪目录中文件的所有更改，因为我不想要我的 git 存储库随着我不关心的文件历史而不断增长。

这可能吗？我想这样做是不是疯了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:46:07.763

是的，你对 IMO 编译对象的版本很疯狂，但 Heroku 似乎也很疯狂。

在这种情况下，我会将部署过程包装在一个脚本中，以：

1.  分支
2.  编译
3.  提交编译的资产（ick）
4.  力推
5.  重置本地分支 HEAD 以便将分支点保留为标记，但是可以对已编译资产的孤立提交进行垃圾收集
6.  切换回原来的分支

请注意，您仍然可以在 GC 清除之前的任何时间签出分支并将其再次前滚到已部署的提交，只要您提供一些方法来跟踪它（带有提交 SHA 的注释会起作用），如果你为时已晚，你仍然可以从源代码复制构建。

* * *

好的，所以如果您有多个存储库，这显然会失败。我看不到解决此问题的方法，但是您*可以*让一个主/部署 repo 运行类似于 CI 环境的东西。

仅将源代码定期（非强制）推送到主部署存储库，并让它自动执行分支/编译/部署/丢弃步骤。例如，如果您想使用主存储库在工作环境之间同步更改而不总是部署，您可以让它仅在推送标签时运行部署序列。

# oracle - 报表生成器 - 多语言报表

> ID：12729437
> 
> 赞同：2
> 
> 时间：2012-10-04T14:23:17.893
> 
> 标签：oracle, delphi, reportbuilder

我需要在 ReportBuilder 中创建 2 个报告，它们产生相同的输出，只是一个报告需要生成英文文本，另一个报告需要生成法语文本。报告上的标签/标题需要从英文翻译成法文，在某些情况下，返回的数据也必须翻译。

我正在考虑通过将英语语句创建为基类，然后从它继承来创建法语报告，并根据需要更改标签来做到这一点。我的问题是翻译数据本身的最佳方式是什么？

我正在使用 Delphi BDS 2006、Oracle 11g 和 ReportBuild v10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:35:03.533

Oracle 中没有标准的语言翻译方法。您将需要创建一个工具来为您执行此操作。您可以“尝试”使用 Oracle 网络服务和 Google 翻译使其工作。由于 Google 翻译 API 是付费服务，您可以尝试免费的必应翻译网络服务。编码应该相当容易，请点击[此](http://web.archive.org/web/20110720142541/http://basharkokash.com/post/2010/04/19/Bing-Translator-for-developers.aspx)链接和[此](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)链接了解更多详细信息。

# javascript - 什么时候在 HTML 页面中触发 Javascript 事件循环？

> ID：12729438
> 
> 赞同：1
> 
> 时间：2012-10-04T14:23:17.980
> 
> 标签：javascript, html, dom-events, unobtrusive-javascript

我知道 JS 函数（即`setTimeout(function(){...}, TIME)`）将它接收到的函数作为参数放入浏览器的事件循环中，并且在处理完所有内联/同步 JS 调用后，将处理此事件循环。

但是，当他具有以下 HTML 页面结构时，实际会发生什么：

```
<html>
 <head>
  <script> MANY INLINED SCRIPTS </script>
  <script src="file.js"></script>
  <script> setTimeout(function(){...}, TIME)</script>
   .
   .
   . 
```

然后页面继续，可能这种结构会不断重复，直到`</html>`到达。

在这种情况下，事件队列何时会被处理？

编辑：我想为我页面中的脚本创建某种惰性加载器。我依赖来自其他来源的内容，这些内容应该只在 DOM 被解析后才会出现，并且希望是响应式的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:25:40.217

一旦`</script>`找到结束标记，就会处理每个内联脚本。同样，`<script>`从服务器导入脚本作为单独文件的标签在收到文件时进行处理，并且该过程是同步的 - 浏览器在处理之前等待脚本内容（除了参见`<script>`标签*编辑*和标签相对较新的“异步”属性） IE 上的旧“延迟”属性，它可能会或可能不会按预期工作（感谢@RobG）。

`setTimeout()`因此，当浏览器看到完整的块时，带有调用的内联代码将运行`<script>`，然后在给定的毫秒数（大约）过去后调用传递的函数。您不能过分依赖超时处理的准确性。

除了超时机制之外，还有其他事件：用户交互、ajax 等。从概念上讲，它们都通过同一个网关汇集；也就是说，如果您的超时计划运行，但用户提前几毫秒单击了一个按钮，您的计时器代码将等待按钮处理完成。

# python - 向 SoundCloud 组贡献声音

> ID：12729439
> 
> 赞同：1
> 
> 时间：2012-10-04T14:23:18.640
> 
> 标签：python, soundcloud

[这里](http://developers.soundcloud.com/docs/api/guide#uploading)说如何“将声音贡献给一个组”。但是当我这样做时：

```
import soundcloud

client = soundcloud.Client(client_id='...',
                    client_secret='...',
                    username='...',
                    password='...')

track = client.get('/resolve', url='...')

group = client.put('/groups/%d/contributions/%d' % (2156, track.id)) 
```

我有这个错误：

> 未处理的 HTTPError“404 客户端错误”Fichier：/usr/lib/python2.7/site-packages/requests-0.10.1-py2.7.egg/requests/models.py，Ligne：799

我确定轨道在组上。

# php - 浏览器关闭时服务器是否“关闭”？PHP - MYSQL

> ID：12729444
> 
> 赞同：2
> 
> 时间：2012-10-04T14:23:29.757
> 
> 标签：php, apache, http, lamp

我想知道 - 当我编写了一段可以更新多达 10,000 行并且可能需要几秒钟才能完成的代码片段时，如果通过 ajax 请求访问文件时，post 查询被发送到 php 文件，那么浏览器已关闭，文件是否已完全执行？假设完成请求大约需要 25 秒，用户可能不会等待 25 秒，是否足以“ping”这个文件并让用户在 mysql 查询发生时浏览或关闭其浏览器窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:29:26.860

请求有 3 个部分

1.  连接到 Web 服务器的浏览器
2.  服务器执行的 PHP 脚本
3.  在数据库服务器中运行的查询

当您关闭浏览器时，与服务器的连接将关闭。服务器可能会也可能不会终止启动的 PHP 脚本（如果 PHP 作为 apache 模块运行，它将被终止，除非调用了 ignore_user_abort）。此外，Web 服务器可能对请求有时间限制，要么终止脚本，要么只向客户端发送连接超时消息，而不终止脚本，但不给它机会向浏览器发送任何内容。

这是棘手的部分——更新在数据库中运行，它不会被 web 服务器杀死，也不会被 PHP 杀死。

因此，您想要实现的是 ping 一个 PHP 脚本，即执行查询，但客户端不等待结果。您可能希望也可能不希望查询本身是异步的（PHP 脚本不等待查询），但您必须告诉客户端请求已完成，例如发送内容长度为 0 并刷新输出（实际上是 http 标头），并使用 ignore_user_abort 运行 PHP，以便继续执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:31:37.413

即使客户端已断开连接，也可以使用[ignore-user-abort继续运行脚本](http://in2.php.net/manual/en/function.ignore-user-abort.php)

```
ignore_user_abort(true);
set_time_limit(0); 
```

您可以使用[connection_status](http://in2.php.net/manual/en/function.connection-status.php)来跟踪连接是否已断开

```
if (connection_status()!=0) { //connection disconnected 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T14:32:10.370

这是您的问题的答案：

[http://www.php.net/manual/en/features.connection-handling.php](http://www.php.net/manual/en/features.connection-handling.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:34:03.747

通常不会，但您的脚本会传递`ABORTED`状态。

**有关连接处理**的手册页中的更多详细信息： [http ://www.php.net/manual/en/features.connection-handling.php](http://www.php.net/manual/en/features.connection-handling.php)

> 在 PHP 内部，连接状态被维护。有3种可能的状态：
> 
> 0 - 正常
> 
> 1 - 中止
> 
> 2 - 超时
> 
> 当 PHP 脚本正常运行时，NORMAL 状态处于活动状态。如果远程客户端断开连接，则 ABORTED 状态标志打开。远程客户端断开连接通常是由用户点击他的 STOP 按钮引起的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-04T14:27:22.993

关闭浏览器后，它会在收到回复之前断开与服务器的连接。我不确切知道不同服务器在这种情况下的行为如何，但我假设大多数服务器将中止他们正在处理的线程以回复请求。

此外，不同的操作可能会有所不同 - 即文件 i/o 或数据库操作。如果是原子数据库操作，我的假设是，它会以任何方式完成。

# jquery - JQuery Mobile 分组按钮宽度 - 使用 window.resize 跨越 DIV 的 100%

> ID：12729445
> 
> 赞同：0
> 
> 时间：2012-10-04T14:23:30.507
> 
> 标签：jquery, css, jquery-mobile

我无法强制这些按钮随页面动态调整大小以填充 100% 的 DIV（每个 33%）。

这让我很接近，但它并不完美，而且页面越宽越糟糕。我尝试将宽度设置为 33%，但这使它变得非常窄。

有一个更好的方法吗？

jQuery`$(window).resize`事件代码：

```
var myWidth = $(window).width() - 1.3*($(window).width() - $('#eventForm').width());
$('.eStatusLabel').css("width", myWidth/3); 
```

HTML 代码：

```
<div class="ui-block-b" id="statusDiv" >
    <fieldset data-role="controlgroup" data-mini="true" data-type="horizontal" >
        <input type="radio" name="rdStatus" id="eventStatus1" value="yes" />
        <label class="eStatusLabel" for="eventStatus1" >Yes</label>
        <input type="radio" name="rdStatus" id="eventStatus2" value="maybe" />
        <label class="eStatusLabel" for="eventStatus2" >Tentative</label>
        <input type="radio" name="rdStatus" id="eventStatus3" value="no" />
        <label class="eStatusLabel" for="eventStatus3" >No</label>
     </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:27:38.710

```
$('.eStatusLabel').css("width",(($('#statusDiv').width()/3)-1)); 
```

你应该用这个

# php - 使用simpl html dom文件获取html的分段错误

> ID：12729446
> 
> 赞同：1
> 
> 时间：2012-10-04T14:23:30.413
> 
> 标签：php, simple-html-dom

使用 php 库 simple_html_dom 我以 dom 的形式循环遍历 url 列表，对于其中的每一个我尝试找到一个字符串，如果找到它，我将 url 保存在一个数组中，否则我进入下一个循环，返回 urls 数组在最后。该脚本为每个 url 占用大约几秒的时间。在一些循环之后，脚本卡在文件 get html 内的 $dom->load($url) 行并引发分段错误，循环数因不同的 url 列表而异。我试图在测试脚本中隔离 load($url) 处的调用，该脚本仅在循环脚本卡住但测试脚本结束时没有错误的 url 上工作（但我无法检查 dom 的 print_r，因为我的如果我尝试查看页面源代码，Firefox 会崩溃）。我正在使用 LAMP 服务器。这是代码：

```
error_reporting(E_ALL);
ini_set("max_execution_time", "300");
ini_set("memory_limit", "512M");
ini_set('output_buffering', 0);
ini_set('implicit_flush', 1);
ob_end_flush();
ob_start();
set_time_limit(100);

$urlArray = array();

foreach($urlArray as $url){
    $found = false;
    $dom = file_get_html($url);
    foreach(( $dom->find('target')) as $caught){
        array_push($link, $caught);
        $found = true
    }
    if($trovato){
        return $link;
    }else{
        echo "not found";
    }
} 
```

谢谢任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:27:48.247

那么它的常见问题，这里是一个错误[http://sourceforge.net/p/simplehtmldom/bugs/103/](http://sourceforge.net/p/simplehtmldom/bugs/103/)。`if`在您的声明之前添加以下行：

```
$dom->clear();
unset($dom); 
```

大多数情况下，在那之后你不会看到任何段错误。但是，如果您解析了数千个 url（比如我 :)），那么您可能会再次遇到它。所以我的解决方案是 - 打开 simple_html_dom.php 文件，并注释 146 到 149 之间的所有行。

```
 function clear()
 {
   /*
   $this->dom = null;
   $this->nodes = null;
   $this->parent = null;
   $this->children = null;
   */
 } 
```

**更新：**另外，如果您评论此行 - 您的内存消耗将增加每次解析迭代

# python - CSS 选择器，按 CHILD 值选择

> ID：12729447
> 
> 赞同：0
> 
> 时间：2012-10-04T14:23:31.413
> 
> 标签：python, css, selenium, css-selectors

假设我有一个这样的html结构：

```
<html><head></head>
    <body>
            <table>
                    <tr>
                            <td>
                                    <table>
                                            <tr>
                                                    <td>Left</td>
                                            </tr>
                                    </table>
                            </td>
                            <td>
                                    <table>
                                            <tr>
                                                    <td>Center</td>
                                            </tr>
                                    </table>
                            </td>
                            <td>
                                    <table>
                                            <tr>
                                                    <td>Right</td>
                                            </tr>
                                    </table>
                            </td>
                    </tr>
            </table>
    </body>
</html> 
```

我想构建 CSS 选择器来访问三个子表，它们仅通过第一行中的表数据项的内容来区分。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:25:08.323

元素上的 .text 方法返回元素的文本。

```
tables = page.find_elements_by_xpath('.//table')
contents = "Left Center Right".split()
results = []
for table in tables: 
    if table.find_element_by_xpath('.//td').text in contents: # returns only the first element
         results.append(table) 
```

您可以通过将 'page' 设置为第一个 'table' 元素，然后在其上运行搜索来缩小搜索字段。有各种各样的方法可以提高这样的性能。请注意，如果存在大量无关表，此方法将相当慢。每个网页在选择表示信息的方式上都会有其怪癖，请确保您解决这些问题以提高效率。

您还可以使用列表推导来返回结果。

```
results = [t for t in tables if t.find_element_by_xpath('.//td').text in contents] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:56:06.747

我认为 css 选择器中没有可用的方法来验证内部文本。

您可以通过使用 xpath 或 jQuery 路径来实现。

**路径：**

> ```
>  "//td[contains(text(),'Left')]"
> 
>                or
> 
>      "//td[text()='Right']" 
> ```

jQuery 路径

> ```
>  jQuery("td:contains('Centre')") 
> ```

使用以下逻辑，您可以在 WebDriver 自动化中执行 jQuery 路径。

```
JavascriptExecutor js = (JavascriptExecutor) driver;
WebElement element=(WebElement)js.executeScript(locator); 
```

# javascript - JavaScript .replace 不会替换所有出现的地方

> ID：12729449
> 
> 赞同：29
> 
> 时间：2012-10-04T14:23:50.507
> 
> 标签：javascript, replace

> **可能重复：**
> [Javascript 多次替换](https://stackoverflow.com/questions/832257/javascript-multiple-replace)
> [如何在 JavaScript 中用“_”替换字符串中所有出现的“/”？](https://stackoverflow.com/questions/2159251/how-do-i-replace-all-occurrences-of-in-a-string-with-in-javascript)

在 JavaScript 中，`"11.111.11".replace(".", "")`结果为`"11111.11"`. 这个怎么可能？

萤火虫截图：
![萤火虫截图](../Images/5c5e8463f14570f5b1f4235b1c0c6a2f.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-04T14:25:31.083

[从文档中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)引用：

> 要执行全局搜索和替换，请在正则表达式中包含 g 开关，或者如果第一个参数是字符串，请在 flags 参数中包含 g。**注意：** flags 参数在 v8 Core（Chrome 和 Node.js）中不起作用，将从 Firefox 中删除。

所以应该是：

```
"11.111.11".replace(/\./g, ''); 
```

* * *

这个版本（在编辑时）确实在 Firefox 中工作......

```
"11.111.11".replace('.', '', 'g'); 
```

...但是，正如 MDN 页面所指出的，它的支持将很快被删除。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T14:26:13.073

使用正则表达式和标志`g`，您得到了预期的结果

```
"11.111.11".replace(/\./g, "") 
```

使用正则表达式很重要，因为：

```
"11.111.11".replace('.', '', 'g'); // dont' use it!! 
```

[不标准](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T14:46:07.123

首先，replace() 是一个 javascript 函数，而不是 jquery 函数。

上面的代码只替换了第一次出现的“。” （不是每次出现）。要替换 JavaScript 中每个出现的字符串，您必须为 replace() 方法提供一个正则表达式，并以全局修饰符作为第一个参数，如下所示：

```
"11.111.11".replace(/\./g,'') 
```

# android - Android在外部播放器中播放视频网址

> ID：12729453
> 
> 赞同：1
> 
> 时间：2012-10-04T14:23:59.607
> 
> 标签：android, video-streaming

我想将我的视频流式传输到手机上的外部播放器。我安装了双重扭曲，我希望它打开我的视频 URL。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T06:25:26.660

It is a good practice to let user of your app to select the Video player he likes to play your Video

Create a Intent Chooser which lets your user choose a Video player of his choice and play the file.

```
public class MainActivity extends Activity implements OnClickListener {

    private Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        if (v.getId() == R.id.button1) {
            Intent intent = new Intent(Intent.ACTION_VIEW);

            intent.setDataAndType(Uri.parse("http://ur URL"), "video/*");

            startActivity(Intent.createChooser(intent, "Complete action using"));
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:23:25.863

我用这个代码触发了我的二维码扫描器，我想你可以找到 doubleTwist 的包和活动名称（我手边没有这个播放器，否则我会发现的）。在下面使用类似的东西 -

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");  
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");    
        startActivityForResult(intent, 0); 
```

我不确定你会从哪里点击你的 URL，从任何 web 视图或本地组件，因为根据它们，点击的事件处理会改变。

# objective-c - 使用逻辑 || 带有枚举值

> ID：12729458
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:24:15.460
> 
> 标签：objective-c, mpmovieplayercontroller, clang

我有一个 MPMoviePlayerController 实例。我希望检查它的playbackState 属性以获取多个值之一。因此，我做这样的事情：

```
if (moviePlayer.playbackState == (MPMoviePlaybackStateStopped ||
                                  MPMoviePlaybackStatePlaying ||
                                  MPMoviePlaybackStatePaused)) {
    // ...
    // Perform some logic
    // ...
} 
```

这按预期工作，但会导致编译器警告：

> 使用逻辑“||” 与常数操作数。

编译器的解决方法是改用按位运算`|`符。在 Stack Overflow 上搜索，你会发现几个[答案](https://stackoverflow.com/questions/11190669/how-logical-operators-work-with-constant-operand-in-objective-c)[暗示](https://stackoverflow.com/questions/11333113/warning-about-using-logical-between-constant-in-iphone)了同样的事情。**但是**使用按位 OR 真的不是我在这里需要的。

`MPMoviePlaybackState`在 MPMoviePlayerController.h 中声明：

```
enum {
    MPMoviePlaybackStateStopped,
    MPMoviePlaybackStatePlaying,
    MPMoviePlaybackStatePaused,
    MPMoviePlaybackStateInterrupted,
    MPMoviePlaybackStateSeekingForward,
    MPMoviePlaybackStateSeekingBackward
};
typedef NSInteger MPMoviePlaybackState; 
```

这不是位掩码（而且它也没有多大意义——枚举值是互斥模式，而不是要组合的标志）。我真的很想使用逻辑`||`.

（在我的特殊情况下，基础值为 0,1,2，按位示例可能有效，但这只是巧合。）

我应该如何改写以避免警告或我`#pragma clang diagnostic ignored ...`可以用什么来消除警告？

（指向所有此类诊断列表的奖励积分 - 我似乎无法在手册中找到一个。）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:30:31.480

显然，`(enumval1 || enumval2 || ..)`是错误的。您不能`||`像这样使用运算符，而只能使用逻辑表达式。
运算符有效，因为它是一个简单的`|`按位 OR，它只为您工作，并且仅当您的枚举成员是 2 的不同幂（例如 1、2、4、8，...）时。

它与二进制数字的按位表示有关，如果数字是 2 的幂，则如下所示：2->10、4->100、8->1000 等。因此，它`2 | 8`会像`0010 | 1000 = 1010`不为零，`if`语句将继续。

编译器警告是完全正确的并且在这一点上有所帮助。使用`switch(..)`or`if(..) else if(..)`语句，或使您的枚举如下所示：

```
enum yourEnum
{
  enumval1 = 1 << 0;
  enumval2 = 1 << 1;
  enumval3 = 1 << 2;
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:26:57.827

你为什么不这样做呢？

```
if ((moviePlayer.playbackState == MPMoviePlaybackStateStopped) ||
    (moviePlayer.playbackState == MPMoviePlaybackStatePlaying) ||
    (moviePlayer.playbackState == MPMoviePlaybackStatePaused)) {
    // ...
    // Perform some logic
    // ...
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-04T14:30:32.990

我建议使用带有跌落逻辑的 switch/case 块，如下所示：

```
switch(moviePlayer.playbackState){
    case MPMoviePlaybackStateStopped: /* falls through */
    case MPMoviePlaybackStatePlaying: /* falls through */
    case MPMoviePlaybackStatePaused:  /* falls through */
        // your stuff
} 
```

这将导致使用尽可能少的代码实现预期的行为。枚举是为确切的开关案例类型的业务而制作的。并且它们比“if”语句更优化了性能，因为 CPU 在到达代码时甚至不必测试这些值。编译器在该位置计算正确的 ASM 跳转偏移量。所以它和闪电一样快:)

# php - 是否可以在 PHP 中预测 rand(0,10)？

> ID：12729459
> 
> 赞同：16
> 
> 时间：2012-10-04T14:24:15.927
> 
> 标签：php, math

我有一个脚本，我在 PHP 中使用 rand 函数。现在我读了一些鬼故事，它们真的很容易预测这些结果。这可以从客户端进行吗？

例如，假设我们有一个`rand(0,10)`. 是否可以预测下一个数字？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-04T14:35:22.110

`rand()`函数返回一个伪随机数。这并不意味着`next`可以预测数字。然而这张图片可以解释单词的概念`pseudorandom`

![兰特](../Images/35f0d3be0846644828ac2c24f12d6a46.png)

你可以阅读这篇[文章](http://boallen.com/random-numbers.html)

该图像是从一个简单的循环生成的，具有`rand`Windows 系统上的功能。

```
header("Content-type: image/png");
$im = imagecreatetruecolor(512, 512) or die("Cannot Initialize new GD image stream");
$white = imagecolorallocate($im, 255, 255, 255);
for ($y = 0; $y < 512; $y++) {
    for ($x = 0; $x < 512; $x++) {
        if (rand(0, 1)) {
            imagesetpixel($im, $x, $y, $white); 
        } 
    } 
} 
imagepng($im); imagedestroy($im); 
```

这不是那么随机，真的吗？但是现在你知道了……你可以预测下一个数字吗？

> 真随机数生成器 (TRNG) 和伪随机数生成器 (PRNG) 的区别在于，TRNG 使用不可预测的物理方式生成数字（如大气噪声），而 PRNG 使用数学算法（完全由计算机生成）
> 
> [...]
> 
> 没有多少 PRNG 会产生像这样明显的视觉模式，它恰好是语言 (PHP)、操作系统 (Windows) 和函数 (rand()) 的非常糟糕的组合。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T14:49:17.797

您必须暴力破解 PRNG 的状态。[http://crypto.di.uoa.gr/CRYPTO.SEC/Randomness_Attacks_files/paper.pdf](http://crypto.di.uoa.gr/CRYPTO.SEC/Randomness_Attacks_files/paper.pdf)

PHP 的 rand() 使用底层标准库实现，这因操作系统而异。

所以第一步，定义操作系统。

下一步，获取 Rand() 函数的源代码和种子代码。

为简单起见，我们假设 PRNG 的种子类似于服务器的毫秒时间。因此，HTTP 请求进来，PHP 播种 PRNG 并执行 rand(0,10)。如果你想预测你会...

*   将客户端的时钟与服务器的时钟同步，从统计上推导出向服务器发送 HTTP 请求并读取带有时间戳的响应 HTTP 标头的确切时间。

*   使用您将从服务器请求 rand(0,10) 的预测未来时间播种您的客户端 PRNG（与服务器的实现相同）。在客户端运行 rand(0,10)，在确切的未来时间将请求发送到服务器，结果将是相同的。

*   Ping 时间、处理时间等使这成为一种相当蛮力的方法。

真的，通过互联网（不能直接访问服务器），你不会很幸运地预测 PHP 的 rand() 函数的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:28:12.873

从[兰德手册](http://php.net/manual/en/function.rand.php)：

> 介于 min（或 0）和 max（或 getrandmax()，包括）之间的伪随机值。

所以，随机不是随机的，而是伪随机的。如果您知道计算是如何完成的，并且知道初始值，则可以预测（计算）下一个值。

如果您需要*真正的随机值*，则需要其他算法。例如，基于*白噪声*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T14:37:10.637

返回的值`rand()`只是一个*伪随机*值。

这意味着，如果您可以访问机器，也许可以计算出这个数字，但这仍然不太可能发生。只看到 PHP 的输出而无法访问机器的最终用户无法选择计算或预测下一个值。**一个php脚本的一次**执行中的多个`rand()`调用的输出可能*技术上*是可预测的，但这不能被使用，因为用户只看到一个整体执行的输出**，**没有机会在PHP脚本执行时进行交互.

 ****这是用于生成 PHP 种子的过程`rand()`：

```
#ifdef PHP_WIN32
#define GENERATE_SEED() (((long) (time(0) * GetCurrentProcessId())) ^ ((long) (1000000.0 * php_combined_lcg(TSRMLS_C))))
#else
#define GENERATE_SEED() (((long) (time(0) * getpid())) ^ ((long) (1000000.0 * php_combined_lcg(TSRMLS_C))))
#endif 
```

从 PHP 开始`4.2.0`， [`The random number generator is seeded automatically.`](http://www.php.net/manual/en/function.rand.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T15:00:50.510

我认为您可能想要区分安全和足够安全。关于预测的问题的答案是“是的”，可以预测从伪随机数生成器生成的数字。但是，我认为更重要的问题是这种情况发生的可能性有多大。你想保护什么免受预测？如果您运行的是大型在线游戏网站，那么拥有真正的随机性可能比运行小型 MUD 服务器更重要。它更重要，因为用户破坏模式的后果更严重，并且用户更有可能有动机花时间攻击您的算法。

您可能还想查看 Random.org 的服务。他们提供了一个 API，允许您从他们的服务器中提取真正的随机数。它们从大气噪声中获取熵，至少就您的用户而言，这应该是不可预测的。

[http://www.random.org/clients/http/](http://www.random.org/clients/http/)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-04T14:35:25.507

不要相信这些鬼故事。对于 webapps，预测是不可能的，下一个数字不能从客户端确定。

为什么？

因为随机数生成器是在每个请求之前播种的，客户端看不到种子值！只有在同一请求中生成所有数字时，预测才有效。

*   许多数字的行不会是真正随机的
*   下一个数字（在以下 http 请求中）无法从客户端确定****

# hibernate - 为什么要在 orm 上区分双向关系的一方作为拥有方？

> ID：12729460
> 
> 赞同：5
> 
> 时间：2012-10-04T14:24:24.820
> 
> 标签：hibernate, jpa, orm, bidirectional, owner

在一对多关系中，通常用 @ManyToOne 注释的字段是所有者 - 另一方具有“mappedBy”属性。但是，如果我跳过'mappedBy'并用@JoinColumn（同一列）注释双方，我可以更新双方 - 更改被传播到数据库。

我没有两个单向关系而不是一个双向关系——只有一个连接列。

如果不选择一方作为关系所有者，我会遇到什么问题？

我的实体看起来类似于以下内容：

```
@Entity
public class B {
   @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   private Long id;

   @ManyToOne
   @JoinColumn(name = "parent_id")
   @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE})
   private B parent;

   @OneToMany()
   @JoinColumn(name = "parent_id")
   @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE})
   private List<B> children = new ArrayList<B>();
...
} 
```

它似乎对性能没有任何影响（至少插入看起来不错）这是一个简单的测试和日志输出：

```
Session session = HibernateUtil.getSessionFactory().openSession();
    session.beginTransaction();
    B a = new B("a");
    B b = new B("b");
    B c = new B("c");
    B d = new B("d");
    B e = new B("e");
    session.save(a);
    session.save(b);
    session.save(c);
    session.save(d);
    session.save(e);
    session.getTransaction().commit();
    System.out.println("all objects saved");
    session.beginTransaction();
    a.getChildren().add(b);
    a.getChildren().add(c);
    session.save(a);
    session.getTransaction().commit();
    System.out.println("b and c added as children");
    session.beginTransaction();
    a.getChildren().add(d);
    a.getChildren().add(e);
    session.getTransaction().commit();
    System.out.println("e and f added as children");
    session.close();

Hibernate: insert into B (fieldInB, parent_id) values (?, ?)
Hibernate: insert into B (fieldInB, parent_id) values (?, ?)
Hibernate: insert into B (fieldInB, parent_id) values (?, ?)
Hibernate: insert into B (fieldInB, parent_id) values (?, ?)
Hibernate: insert into B (fieldInB, parent_id) values (?, ?)
all objects saved
Hibernate: update B set parent_id=? where id=?
Hibernate: update B set parent_id=? where id=?
b and c added as children
Hibernate: update B set parent_id=? where id=?
Hibernate: update B set parent_id=? where id=?
e and f added as children 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:46:53.473

您看不到额外的 SQL 语句，因为您没有正确设置关联的两侧。例如，你说：

```
a.getChildren().add( b ); 
```

并假设`a`和`b`现在是关联的。但是当你`b.getParent()`在这里打电话时会发生什么？说这段代码“`b`作为一个孩子添加到`a`”，然后返回这个新`b`的孩子并且调用者想要导航`b.getParent()`？

相反，您*应该*做的是：

```
a.getChildren().add( b );
b.setParent( a ); 
```

现在您的惯用 Java 代码继续工作（`b.getParent()`行为正常）。现在，在这里，您将看到多个 SQL 语句。这就是为什么您需要选择一方作为“所有者”。

此外，虽然完全是铺位，但请考虑：

```
a.getChildren().add( b );
b.setParent( c ); 
```

什么被写入数据库？双方有效地为`b`. 那么我们相信哪个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:51:47.170

我认为这篇[文章](http://uaihebert.com/?p=48)可能会有所帮助，特别是我在下面提到的内容：

> 使单向不等于双向的“东西”是什么？当我们有一个单向关系时，只有 Customer 类有对 User 类的引用；你只能通过 Customer.getUser() 获得一个用户，你不能这样做。当我们编辑我们的 User 类时，我们使 User 能够获取客户 User.getCustomer()。

您也可以在 SO 上查看此[问题。](https://stackoverflow.com/questions/9420916/onetoone-unidirectional-and-bidirectional)

这个[问题](https://stackoverflow.com/questions/5360795/what-is-the-difference-between-unidirectional-and-bidirectional-associations)看起来也很有帮助。

> 主要区别在于双向关系提供了双向导航访问，因此您无需显式查询即可访问另一侧。它还允许您将级联选项应用于两个方向。

关于这个主题还有很多关于 SO 的问题。这些对你真的很有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:06:59.020

这只会效率低下，因为保存 B 会发出

*   更新对象 B
*   更新所有子对象对对象 B 的父引用
*   级联到对象 B 的所有子对象，这些子对象更新其父引用

代替

*   更新对象 B
*   级联到对象 B 的所有子对象，这些子对象更新其父引用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:08:26.627

通常每一侧都有不同的实体类型（一个/多个），但在这种情况下，两侧都有一个实体类型。所以当你说你在更新两边时，你实际上只是在更新一侧，因为只有一个实体（这里是 B）......因为这是一个连接到自身的实体，Hibernate 知道它是由什么映射的。

至于没有选择一方作为关系所有者会遇到什么问题：我刚才在我自己的代码中尝试了这一点（删除了我的一个实体的@OneToMany 一侧的“mappedBy”），并且在运行时得到了“ java.sql.BatchUpdateException：批处理失败”。简而言之，你会因为 Hibernate 无法正确映射你的类而得到奇怪的 SQL 异常。

# ruby-on-rails - Bootstrap jQuery UI 定位为浮动到顶部

> ID：12729467
> 
> 赞同：0
> 
> 时间：2012-10-04T14:25:11.800
> 
> 标签：ruby-on-rails, jquery-ui, twitter-bootstrap

我已经[为 Bootstrap 安装了 Datepicker](http://www.eyecon.ro/bootstrap-datepicker/)，它运行良好。但我不知道如何使用该`place`方法将日期选择器定位在元素上方而不是下方。我猜它的工作原理[类似于 bootstrap popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)，但我无法弄清楚。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:42:47.383

放置功能只是自动将日期选择器放置在您的输入框下。它不是一个让您选择放置它的位置的功能。

但是，您可以使用自己的自定义位置轻松覆盖该函数的默认功能。

这是[http://jsfiddle.net/G7sWL/19/的一个示例](http://jsfiddle.net/G7sWL/19/)

我所做的只是复制了原始函数并添加了 10 的附加垂直偏移和 50 的水平偏移。

```
$(function() {
    var picker = $('.datepicker').datepicker();
    var widget = picker.data('datepicker');
    widget.place = function(){  //the original place function
        var offset = this.component ? this.component.offset() : this.element.offset();
        this.picker.css({
            top: offset.top + this.height + 10,  // change #1 = added "+10"
            left: offset.left +50                // change #2 = added "+50"
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:19:27.550

从页面：

> ## .datepicker('地点')
> 
> 更新日期选择器相对于元素的位置

它只是说它更新了选择器的位置（绝对定位在页面上），而不是你可以改变它的位置。

# java - Java：如何在运行时持久化 RandomStringUUID 对象

> ID：12729468
> 
> 赞同：0
> 
> 时间：2012-10-04T14:25:12.540
> 
> 标签：java

这是场景：我有：

```
public class RandomStringUUID {

    public RandomStringUUID() {
        final String uuidstring = UUID.randomUUID().toString().replaceAll("-", "");
    }

    public String getRandomStringUUID() {
        final String uuidst = UUID.randomUUID().toString().replaceAll("-", "");
        return uuidst;
    }
} 
```

我在哪里产生一个独特的价值。

然后在：

```
public class AddSingleDomain {

    public static RandomStringUUID RUUID = new RandomStringUUID();

    @Test
    public void addSingleDomain() {
        AssertJUnit.assertEquals(DomainsPage.getTitle(), "View Account");

        String randomUIDSeed = RUUID.getRandomStringUUID();

        System.out.println("Random Domanin Name Prefix: "
                + randomUIDSeed);
        System.out.println("Random Domanin Name Prefix: " + RUUID);

        getDriver().findElement(By.name("vo.zoneName")).sendKeys(
                randomUIDSeed + ".tv"); 
```

我使用它，然后在另一个类中：

公共类验证DBSingleDomain {

```
String url = "jdbc:oracle:thin:@a.b.c.d:1521:ms";

@Test
public void VerifyDBSingleDomainTest()  {

    Properties props = new Properties();
    props.setProperty("user", "user");
    props.setProperty("password", "pass");

String sql = "Select zoneid from zone where zonename =" +  randomUIDSeed + ".tv"; 
```

如果在类 VerifyDBSingleDomain i 中，我想使用相同的值“randomUIDSeed”： String randomUIDSeed = RUUID.getRandomStringUUID(); 它会是同一个对象吗？我如何将其用作相同的对象，从而保证在运行时跨所有类的相同值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:40:48.330

但是，我不太确定您要实现什么目标；

您的问题的简短回答是“是的，您将获得相同的 String 实例”。稍长的答案是“但你做错了”。

您确实应该使用持久性框架来帮助您处理这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:14:52.523

你可以从做这个小小的改变开始：

```
public class RandomStringUUID {

    private static final String MYUUID = UUID.randomUUID().toString().replaceAll("-", "");

    public static String getRandomStringUUID() { return MYUUID; }
} 
```

然后你可以像这样使用它：

```
// Anywhere in your code: vv Note that we are using the classname! The method is static.
String theCommonID = RandomStringUUID.getRandomStringUUID(); 
```

这只是对方向的提示。这不是一个“完美”的清洁解决方案。您可能想谷歌“单例设计模式”。我现在可以想象大约 10 种其他方法可以做到这一点……但无论如何。

这将为您的应用程序运行时创建**一次**您的 ID 。

# php - 使用 PHP、HTML 输入注册用户？

> ID：12729486
> 
> 赞同：0
> 
> 时间：2012-10-04T14:26:46.487
> 
> 标签：php, html, input

我这里有这个文件：

```
<?php 
    include 'core/init.php';
    include 'includes/overall/header.php';

    if(empty($_POST) === false){
        $required_fields = array('username','password','password_again','first_name','email');
        foreach($_POST as $key=>$value){
            if(empty($value) && in_array($key, $required_fields) === true){
                $errors[] = 'Fields Marked with an asterisk are required';
                break 1;
            }
        }   

        if(empty($errors) === true){
            $args = $_POST;
            if(user_exists($args['username'])){
                $errors[] = 'Sorry, the username \''.$args['username'].'\' is already in use.';
            }else if(preg_match("/\\s/",$args['username']) == true){
                $errors[] = 'Your username can not contain any spaces.';
            }
            if(strlen($args['password']) < 6){
                $errors[] = "Your Password is to short! It must be at least 6 characters. If you want to know why you need to use a better password visit this page, <a href=\"http://howsecureismypassword.net/\">password checker</a>.<br/>";
            }else if($args['password'] !== $args['password_again']){
                $errors[] = "Your passwords do not match!";
            }
            if(filter_var($args['email'], FILTER_VALIDATE_EMAIL) === false){
                $errors[] = "A valid email address is required.";
            } else if(email_exists($args['email']) === true){
                $errors[] = 'Sorry, the email \''.$args['email'].'\' is already in use.';
            }
        }

    }

?>
<h1>Register</h1>
<?php 
    if(empty($_POST) === true){
        include 'includes/register.php'; 
    }else if(empty($_POST) === false && empty($errors) === true){
        //Register user
        echo "Registered User";
    }else{
        echo output_errors($errors);
        include 'includes/register.php'; 
    }?>
<?php include 'includes/overall/footer.php';?> 
```

继承人register.php：

```
<?php
    $username = "";
    $first_name = "";
    $last_name = "";
    $email = "";
    if(empty($_POST) === false){
        $username = $_POST['username'];
        $first_name = $_POST['first_name'];
        $last_name = $_POST['last_name'];
        $email = $_POST['email'];
    }
?>
<form action="" method="POST">
    <ul>
        <li>Username*: <br/><input type="text" name="username" value="<?php echo $username;?>"/></li>
        <li>Password*: <br/><input type="text" name="password"/></li>
        <li>Confirm Password*: <br/><input type="text" name="password_again"/></li>
        <li>First name*: <br/><input type="text" name="first_name" value="<?php echo $first_name;?>"/></li>
        <li>Last name: <br/><input type="text" name="last_name" value="<?php echo $last_name;?>"/></li>
        <li>Email*: <br/><input type="text" name="email" value="<?php echo $email;?>"/></li>
        <li><input type="submit" value="Register"/></li>
    </ul>
</form> 
```

这永远不会是一个真正的网站，只是我在玩 PHP，我意识到当用户提交他们的数据时，他们可以输入他们想要的任何内容，所以如果他们输入一些 HTML，会不会也渲染？喜欢...他们是否能够在输入字段中输入`last_name`一个类似的值`"<p>blah blah blah</p>"`，这实际上会呈现为

*   姓名：
    呜呜呜

    ""/>

因为这对网站不是很不利吗？他们可以打破它还是什么？

那么有什么东西可以解决这个问题吗？Like 用`<`and`>`替换标签`&lt;`，`&gt;`并且使这些字符`"`变成`\"`或转义这些字符？

另外...我的代码有什么严重问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:31:41.267

你需要的是： http: [//php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

**实体**

> 此函数在所有方面都与 htmlspecialchars() 相同，除了 htmlentities() 之外，所有具有 HTML 字符实体等效项的字符都将转换为这些实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:32:16.103

您可以使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)或[htmlentities](http://php.net/manual/en/function.htmlentities.php)。

# android - android sherlockActionBar 样式化动作文本

> ID：12729490
> 
> 赞同：1
> 
> 时间：2012-10-04T14:26:54.837
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

如果我在这段代码中使用 sherlockActionBar

```
menu.add(Menu.NONE, R.string.abc, Menu.NONE, R.string.abc)
.setIcon(R.drawable.ic_action_red_plus)
.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

它在**UPPERCASE BOLD**的右侧显示带有文本的图标。现在，抛开 android 图标指南，我如何更改该文本的颜色/形状？这是我尝试过的，但没有效果：

```
<style name="MyTheme" parent="@style/Theme.Sherlock.Light">
    <item name="android:textSize">20dp</item> 
</style>

 <style name="MyTheme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/MyTheme.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/MyTheme.Styled.ActionBar</item>
</style>

<style name="MyTheme.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/pdf2</item>
    <item name="android:background">@drawable/logo</item>
</style> 
```

请注意，我不是在问如何设置标签文本的样式（在网站上有答案），而是在操作栏上显示的操作，而不是在下拉菜单中显示的操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:29:29.693

颜色变了：

```
<style name="MyTheme" parent="Theme.Sherlock.Light">
    <item name="android:actionMenuTextColor">@color/White</item>
    <item name="actionMenuTextColor">@color/White</item>
</style> 
```

基于 ABS 库中的 XML 布局，您可以使用

```
Activity.findViewById(R.id.abs__textButton) 
```

这应该返回一个扩展版本的 Android Button，它可以有一个自定义字体。这可能不是一个好主意，因为我认为它不适用于使用本机 ActionBar 的设备。你可以试试看。

此外，您不应将其`R.string.something`用作 id。您应该在 XML 中创建一个 id 并使用`R.id.something`或仅在您的类中定义一个 int 来引用它。

编辑：我做了一些测试，如果你`Activity.findViewById(menuItemId)`在 ICS 设备上做，你会得到一个带有 ImageButton 和 Button 的 ViewGroup。我不能给你他们的 id，但你可以使用 getChildAt 来获取 Button 子元素并将字体应用到它。

# c# - 如何在 EWL 中的页面加载上设置表单字段焦点？

> ID：12729494
> 
> 赞同：0
> 
> 时间：2012-10-04T14:27:00.800
> 
> 标签：c#, asp.net, focus, enterprise-web-library

我想在页面加载时将焦点设置到特定的表单字段。每次加载页面时，这将是相同的表单字段，即使在回发数据修改之后也是如此。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:30:29.343

是的。覆盖`EwfPage.controlWithInitialFocus`。此属性在 之后调用`LoadData`。

# xcode - 试图为 iphone5 (ios6, armv7 armv7s, iphoneos6.0) 编译 vlc，得到这个错误

> ID：12729497
> 
> 赞同：2
> 
> 时间：2012-10-04T14:27:21.080
> 
> 标签：xcode, ios6, vlc, libvlc

> ld build/MobileVLC.build/Release-iphoneos/MobileVLC.build/Objects-normal/armv7s/VLC normal armv7s cd /Users/looneydoodle/projects/MobileVLC setenv IPHONEOS_DEPLOYMENT_TARGET 6.0 setenv PATH "/Applications/Xcode.app/Contents/Developer/平台/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/Users/looneydoodle/.rbenv/shims :/Users/looneydoodle/.rbenv/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin" /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2 -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/开发者/SDKs/iPhoneOS6.0。sdk -L/Users/looneydoodle/projects/MobileVLC/build/Release-iphoneos -L/Users/looneydoodle/projects/MobileVLC/External/MobileVLCKit -L/Users/looneydoodle/projects/MobileVLC/External/MediaLibraryKit -F/Users/ looneydoodle/projects/MobileVLC/build/Release-iphoneos -filelist /Users/looneydoodle/projects/MobileVLC/build/MobileVLC.build/Release-iphoneos/MobileVLC.build/Objects-normal/armv7s/VLC.LinkFileList -dead_strip -Wl， -no_pie -miphoneos-version-min=6.0 -framework Foundation -framework UIKit -framework CoreGraphics -framework OpenGLES -framework AudioToolbox -framework QuartzCore -liconv -lz /Users/looneydoodle/projects/MobileVLC/ImportedSources/VLCKit/build/Release-iphoneos /libMobileVLCKit.a /Users/looneydoodle/projects/MobileVLC/ImportedSources/MediaLibraryKit/build/Release-iphoneos/libMobileMediaLibraryKit.a -lsqlite3 -lstdc++。6 -lbz2 -lxml2 -framework CoreData -framework CoreText -framework MediaPlayer -o /Users/looneydoodle/projects/MobileVLC/build/MobileVLC.build/Release-iphoneos/MobileVLC.build/Objects-normal/armv7s/VLC ld：警告：忽略文件/Users/looneydoodle/projects/MobileVLC/ImportedSources/VLCKit/build/Release-iphoneos/libMobileVLCKit.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：/Users/looneydoodle/projects/MobileVLC/ ImportedSources/VLCKit/build/Release-iphoneos/libMobileVLCKit.a 架构 armv7s 的未定义符号：忽略文件/Users/looneydoodle/projects/MobileVLC/ImportedSources/VLCKit/build/Release-iphoneos/libMobileVLCKit.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：/Users/looneydoodle/projects/MobileVLC/ ImportedSources/VLCKit/build/Release-iphoneos/libMobileVLCKit.a 架构 armv7s 的未定义符号：忽略文件/Users/looneydoodle/projects/MobileVLC/ImportedSources/VLCKit/build/Release-iphoneos/libMobileVLCKit.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：/Users/looneydoodle/projects/MobileVLC/ ImportedSources/VLCKit/build/Release-iphoneos/libMobileVLCKit.a 架构 armv7s 的未定义符号：
> “_VLCMediaTracksInformationType”，引用自：-[MLParsingOperation mediaDidFinishParsing:] in libMobileMediaLibraryKit.a(MLFileParserQueue.o)
> “_VLCMediaTracksInformationVideoWidth”，引用自：-[MLParsingOperation mediaDidFinishParsing:] in libMobileMediaLibraryKit.a(MLFileParserQueue.o)
> “_VLCMediaTracksInformationVideoHeight”，引用自: - [MLParsingOperation mediaDidFinishParsing:] 在 libMobileMediaLibraryKit.a(MLFileParserQueue.o)
> "_OBJC_CLASS_$_VLCMedia" 中，引用自： MVLCMovieViewController.o 中的 objc-class-ref libMobileMediaLibraryKit.a(MLFileParserQueue.o) objc-中的 objc-class-ref libMobileMediaLibraryKit.a(MLThumbnailerQueue.o) 中的类引用
> “_OBJC_CLASS_$_VLCMediaPlayer”，引用自：MVLCMovieViewController.o 中的objc-class-ref “_VLCMediaTracksInformationAudioChannelsNumber”，引用自：libMobileMediaLibraryKit.a(MLFileParserQueue.o) 中的-[MLParsingOperation mediaDidFinishParsing:]
> “_VLCMediaTracksInformationAudioRate”，引用自：-[MLParsingOperation mediaDidFinishParsing:] 在 libMobileMediaLibraryKit.a(MLFileParserQueue.o)
> "_VLCMediaTracksInformationTypeAudio" 中，引用自：-[MLParsingOperation mediaDidFinishParsing:] 在 libMobileMediaLibraryKit.a(MLFileParserQueue.o)
> "_OBJC_CLASS_$_VLCMediaThumbnailer" 中，引用自：objc-class-ref in libMobileMediaLibraryKit .a(MLThumbnailerQueue.o)
> “_OBJC_CLASS_$_VLCTime”，引用自：MVLCMovieGridViewCell.o 中的 objc-class-ref ：未找到架构 armv7s collect2 的符号：ld 返回 1 退出状态
> 
> ** 构建失败 **
> 
> 以下构建命令失败：Ld build/MobileVLC.build/Release-iphoneos/MobileVLC.build/Objects-normal/armv7s/VLC normal armv7s（1次失败）

知道如何将 MobileVLCKit 编译为 armv7 吗？

# objective-c - UIView 中的圆角

> ID：12729499
> 
> 赞同：1
> 
> 时间：2012-10-04T14:27:26.383
> 
> 标签：objective-c, ios, core-graphics

我有一个 UIView，我想将它四舍五入并添加如下图所示的阴影颜色：![图像四舍五入](../Images/b995eb08893207150ded7b9e424cf44e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:33:33.337

对于圆角

```
 CAShapeLayer * maskLayer = [CAShapeLayer layer];
    maskLayer.path = [UIBezierPath bezierPathWithRoundedRect: self.bounds byRoundingCorners: UIRectCornerBottomLeft | UIRectCornerTopRight cornerRadii: (CGSize){10.0, 10.}].CGPath;

    self.layer.mask = maskLayer; 
```

对于影子

```
self.layer.masksToBounds = NO;
self.layer.shadowOffset = CGSizeMake(-15, 20);
self.layer.shadowRadius = 5;
self.layer.shadowOpacity = 0.5; 
```

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:46:17.843

要获得与图像相同的阴影，我建议您使用背景图像。否则，您应该包含`<Quartzcore/Quartzcore.h>`并使用以下代码：

```
view.layer.cornerRadius = 10;
view.frame = CGRectMake(15, 15, 100, 100);
view.backgroundColor = [UIColor redColor];
view.layer.shadowColor = [UIColor blackColor].CGColor;
view.layer.shadowOffset = CGSizeMake(2.0, 2.0);
view.layer.shadowOpacity = 0.8;
view.layer.shadowRadius = 10; 
```

**背景图像选项的更多信息**

创建一个与包含阴影的图像具有相同宽度和高度的 UIView，并以这种方式将图像分配给它：

```
view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"backgroundview.png"]]; 
```

# php - Yii 导入功能

> ID：12729504
> 
> 赞同：1
> 
> 时间：2012-10-04T14:27:46.117
> 
> 标签：php, include, yii

在我的主要配置中，我有：

```
'import' => array(
'application.models.*',
'application.components.*', 
```

我在某处读到 Yii import 仅在需要时调用相关类。想知道这是否属实以及一次导入所有文件夹是否是 Yii 的好习惯。谢谢，丹尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:20:59.970

在导入调用中，当你传入一个像“application.models.*”这样的文件夹时，Yii 所做的是将那个路径添加到 php include_path，这样当你调用该文件夹中包含的类时，如果 Yii 自动加载器失败php 在包含路径中查找该类，这很快。

如果你包含一个像 'application.models.FormModel' 这样的文件，那么 Yii 自动加载器会知道它并且也只在需要时加载这个类。

您可以在 Yii 指南中找到更多信息：[导入类](http://www.yiiframework.com/doc/guide/1.1/en/basics.namespace#importing-classes)

# c# - 等待多个后台线程

> ID：12729505
> 
> 赞同：2
> 
> 时间：2012-10-04T14:27:46.180
> 
> 标签：c#, multithreading, c#-4.0, thread-safety, monitoring

我想知道多线程程序中的所有线程何时完成

没有像池这样的东西

```
while(!allThreadFinished){
thread.sleep(100);
} 
```

该解决方案应该使用监视器，但我无法批准它是正确的。由于以下代码中的“SomeMethod”使用网络，因此会消耗时间。

```
public object SomeMethod(string input);
public object[] MultiThreadMethod(string[] inputs) {
            var result = new object[inputs.Count()];
            int i = 0;
            foreach (var item in inputs) {
                BackgroundWorker work = new BackgroundWorker();
                work.DoWork += (sender, doWorkEventArgs) => { doWorkEventArgs.Result = SomeMethod(item); };
                work.RunWorkerCompleted += (sender, runWorkerCompletedEventArgs) => { 
                    result[i] = runWorkerCompletedEventArgs.Result; 
                };
                i++;
                work.RunWorkerAsync();
            }
            /////////////////////////////////////////////////////////////
            //**wait while all thread has been completed**
            /////////////////////////////////////////////////////////////
            return result;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:32:07.513

尝试使用 TPL [http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

```
 List<Task> tasks = new List<Task>();

 Task t1 = new Task(() =>
 {
    // Do something here...

 });
 t1.Start();
 tasks.Add(t1);

 Task t2 = new Task(() =>
 {
    // Do something here...

 });
 t2.Start();
 tasks.Add(t2);

 Task.WaitAll(tasks.ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:40:56.520

你可以使用 TPL 来做同样的事情，你会避免使用 Thread.Sleep()，它会更清晰。看看这个：http: [//msdn.microsoft.com/en-us/library/dd537610.aspx](http://msdn.microsoft.com/en-us/library/dd537610.aspx)

您的 TPL 示例如下所示（未经测试的代码）：

```
 private ConcurrentBag<object> _results;
    public object[] MultiThreadMethod(string[] inputs)
    {
        _results = new ConcurrentBag<object>();
        var tasks = new Task[inputs.Length];
        for (int i = 0; i < inputs.Length; i++)
        {
            tasks[i] = Task.Factory.StartNew(() => DoWork(inputs[i]));
        }

        Task.WaitAll(tasks);
        return _results.ToArray();
    }

    private void DoWork(string item)
    {
        _results.Add(SomeMethod(item));
    } 
```

编辑：没有 ConcurrentBag：

```
public object[] MultiThreadMethod(string[] inputs)
    {
        var tasks = new Task<object>[inputs.Length];
        for (int i = 0; i < inputs.Length; i++)
        {
            tasks[i] = Task<object>.Factory.StartNew(() => DoWork(inputs[i]));
        }

        Task.WaitAll(tasks);
        return tasks.Select(task => task.Result).ToArray();
    }

    private object DoWork(string item)
    {
        return SomeMethod(item);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:31:02.883

`RunWorkerCompleted`将事件挂钩到`BackgroundWorker`. 工作完成后会触发。

可以在[这里](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)找到如何正确使用 BackgroundWorker 的完整示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T19:03:32.687

[http://msdn.microsoft.com/en-us/library/dd537608.aspx](http://msdn.microsoft.com/en-us/library/dd537608.aspx)

// 顺序版本

```
foreach (var item in sourceCollection)
    Process(item); 
```

// 并行等价

```
Parallel.ForEach(sourceCollection, item => Process(item)); 
```

# git - 如何重置当前分支并合并到已经存在的分支

> ID：12729507
> 
> 赞同：0
> 
> 时间：2012-10-04T14:27:56.723
> 
> 标签：git, branch

老实说，我非常努力地通过谷歌搜索来解决我的问题。我什至找到了一些很棒的资源，例如 ( [1](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/user-manual.html#resolving-a-merge) ) ( [2](https://stackoverflow.com/questions/2304087/what-is-git-head-exactly) )，但我仍然不明白。

最初，我的问题是分支冲突。我在分支中创建了一个名为.的功能`user-creation`。然后，我意识到我的主分支中有一个主要错误。所以我检查`checkout`并纠正了它。然后我开始在我的`user-creation`分支上工作并实现了愿望功能并修复了我已经在我的主分支中修复的旧错误。

因此在合并时产生了一些冲突。因为 git 改变了数百个文件并把这个`<<<<<<< HEAD`. 我认为如果删除除 之外的所有文件`.gitconfig`并将`.git/` `.^g`我现有的`user-creation`分支与`master`一个合并，那会很好。

不管我多么努力

```
git reset --hard origin/master 
```

我没有达到我的成功结果。

如果有人请告诉我

1.  如何以最好的方式和简单的方式复制`user-creation`分支中的所有文件夹。`master`
2.  为什么会出现冲突。我没有与团队合作。我采取了一切预防措施。我的电脑被黑了吗？或者在多个标签终端中工作可能会导致这样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:40:50.497

您应该在 : 之上重新设置您的功能分支`master`，这样，您可以在再次`master`应用您所做的工作时避免所有修复。`feature`

# ios6 - ios 6 MapKit注释旋转

> ID：12729509
> 
> 赞同：0
> 
> 时间：2012-10-04T14:27:59.287
> 
> 标签：ios6, ios6-maps

我们的应用程序有一个与指南针方向对齐的旋转地图视图。我们反向旋转注释，使它们的标注保持水平以供阅读。这在 iOS5 设备上运行良好，但在 iOS6 上被破坏（使用与 iOS5 设备上使用的相同二进制文件和使用 iOS6 SDK 构建的二进制文件时会出现问题）。注释最初旋转到正确的水平位置，然后在短时间内恢复到未校正的旋转。我们看不到导致这种情况的任何事件。这是我们在 - (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id )annotation 中使用的代码片段

```
CATransform3D transformZ = CATransform3DIdentity;
transformZ = CATransform3DRotate(transformZ, _rotationZ, 0, 0, 1);
annotation.myView.layer.transform = transformZ; 
```

其他人看到这个并且有人对如何在iOS6上修复它有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:06:46.523

我遇到了同样的问题，所以我的解决方法可能对你有用。我还向 Apple 提交了一个错误。对我来说，每次用户平移地图时，注释都会“不旋转”。

在我的代码中，我使用 CGAffineTransformMakeRotation 设置了旋转，并且我没有在 viewForAnnotation 中设置它，但是每当用户位置得到更新时。所以这和你有点不同。

我的解决方法是在 viewForAnnotation 方法的底部添加一个额外的小旋转。

```
if(is6orMore) {
        [annView setTransform:CGAffineTransformMakeRotation(.001)]; //iOS6 BUG WORKAROUND !!!!!!!
 } 
```

所以对你来说，我不确定这是否有效，因为你的旋转方式不同并且在 viewForAnnotation 中进行。但是试一试。

花了我很长时间才找到，而我只是碰巧遇到了这个修复。

# javascript - 使 div 比它所在的 div 小 30px

> ID：12729512
> 
> 赞同：1
> 
> 时间：2012-10-04T14:28:05.773
> 
> 标签：javascript, html, css

我在另一个 div 中有一个 div。外部 div 有一个百分比宽度（80%），我希望内部 div 的宽度比外部 div 的宽度小 30px。我该怎么做呢？我假设我需要使用javascript？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T14:30:10.950

使用边距：

```
​&lt;div style="width:80%;"> 
    <div style="margin-left:15px;margin-right:15px;"> inner </div>
</div>​​​​​​​​​​​​​ 
```

[示范](http://jsfiddle.net/gsRBS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:18:50.310

@dystroy 有一个很好的答案，尽管它缺乏动态定制。

我的看法，使用 CSS 变量。

你必须做这样的事情：

```
#parent-div
{
    var-width: 100px; /* Or something else? */
    //Notice that though the attribute is named var-width, the browser will
    //treat it as width and will use the `var-` prefix as directive
    //so that the calculations can be performed by using it as variable.
}
#child-div
{
    width: calc(var(width) - 30);
} 
```

这将使 CSS 计算孩子的宽度。

更多关于这个，[在这里。](http://css3.bradshawenterprises.com/blog/css-variables/)

# eclipse - 如何在maven构建期间覆盖WAR文件中的文件？

> ID：12729513
> 
> 赞同：12
> 
> 时间：2012-10-04T14:28:05.783
> 
> 标签：eclipse, maven, myeclipse, maven-war-plugin, maven-profiles

我有一个在 Eclipse（更准确地说是 MyEclipse 10）中开发并使用 Maven 3 构建的 Java webapp 项目。

我有以下布局（仅包括与我的问题相关的文件：

```
project root
|-- src
|   |-- main
|   |   |-- java
|   |   |-- resources
|   |   |   |-- log4j.xml
|   |   |   +-- struts.properties
|   |   |-- webapp
|   |   |   |-- META-INF
|   |   |   |   +--context.xml
|   |   |-- config
|   |   |   |-- test
|   |   |   |   |--log4j.xml
|   |   |   |   |--struts.properties
|   |   |   |   +--context.xml
|   |   |   +-- prod
|   |   |   |   |--log4j.xml
|   |   |   |   |--struts.properties
|   |   |   |   +--context.xml
|   +--test
+--pom.xml 
```

如您所见，我包含了许多配置文件。在项目结构中处于适当位置的人，即在内部`src/main/resources`，并且`src/main/webapp`是我在 MyEclipse 中工作时经常使用的人。我可以使用 MyEclipse 连接器自动将部署更新为我的开发机器上的 Tomcat 实例。我只需单击“运行服务器”即可调试。实际上在这种情况下根本不需要使用 Maven。

然后，当我想为另一个环境（例如测试或生产）构建一个版本时，我运行`mvn -P test clean install`它并构建了一个不错的 WAR。

我的目标是将最终 WAR 中的配置文件替换为`src/config/{environment}/`.

我在我的`pom.xml`：

```
<profiles>
    <profile>
        <id>test</id>
        <properties>
            <environment>test</environment>
        </properties>
    </profile>

    <profile>
        <id>prod</id>
        <properties>
            <environment>prod</environment>
        </properties>
    </profile>
</profiles> 
```

然后，我尝试将这些资源从指定的配置文件（使用`environment`变量）复制到 WAR 中的正确位置（或将被压缩到 WAR 中的临时文件夹）：

```
<webResources>
    <resource>
        <directory>/src/main/config/${environment}</directory>
        <targetPath>META-INF/</targetPath>
        <includes>
            <include>context.xml</include>
        </includes>
    </resource>
    <resource>
        <directory>src/main/config/${environment}</directory>
        <targetPath>WEB-INF/classes/</targetPath>
        <includes>
            <include>
                struts.properties
            </include>
            <include>
                log4j.xml
            </include>
        </includes>
    </resource>
</webResources> 
```

现在这似乎可行，除了“标准”资源在此之后被复制到目录中，因此它们覆盖了这些文件。所以我总是以例如`log4j.xml`from`src/main/resources`而不是 from the one 结尾说`src/main/configuration/prod/`

从 Maven 输出中提取：

```
[INFO] Processing war project
[INFO] Copying webapp webResources [D:\workspace\MyProject/src/main/config/prod] to [D:\workspaces\SITEL\Webfauna\target\Webfauna]
[INFO] Copying webapp webResources [D:\workspace\MyProject\src/main/config/prod] to [D:\workspaces\SITEL\Webfauna\target\Webfauna]
[INFO] Copying webapp resources [D:\workspace\MyProject\src\main\webapp] 
```

正如您在最后一行看到的那样，`src/main/webapp`之后复制了来自的内容，从而覆盖了我的自定义文件:(

我的问题：如何强制 Maven 使用“来自激活的配置文件”的文件并以某种方式覆盖“自然”文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T06:44:57.310

正如[user944849 给出的第二个 Q/A](https://stackoverflow.com/a/12731152/1399920)中所指出的，最简单的解决方案是过滤掉原始文件，以便它们可以被配置文件文件夹中的文件替换。

所以我在标准资源中添加了过滤：

```
 <resources>
        <resource>
            <directory>src/main/resources</directory>
            <excludes>
                <!-- Exclude those since they are copied from the profile folder for the build -->
                <exclude>log4j.xml</exclude>
                <exclude>struts.properties</exclude>
            </excludes>
            <filtering>false</filtering>
        </resource>
    </resources> 
```

和网络资源：

```
<warSourceExcludes>**/context.xml</warSourceExcludes> 
```

所以现在这 3 个文件没有复制到 WAR 文件夹中。在下一步（webResources）中，它们将从活动配置文件的文件夹中复制。

我还添加了一个默认文件夹，其中包含 3 个具有共同值的文件。此默认文件夹中的文件也会被复制，但仅在配置文件的文件夹之后。由于资源不会被覆盖，因此只有在它们不存在时才会复制它们。如果您在没有激活配置文件的情况下构建，或者如果您可以定义合理的默认值，则这很有用，如果每个配置文件相同，则不需要复制文件。

配置文件夹的结构：

```
-- config
   |-- test
   |   |--log4j.xml
   |   |   |--struts.properties
   |   |   +--context.xml
   |   +-- prod
   |   |   |--log4j.xml
   |   |   +--context.xml
   |   +-- default
   |       |--log4j.xml
   |       |--struts.properties
   |       +--context.xml
... 
```

我的 pom.xml 的 webResources 部分：

```
<webResources>
    <!-- Resources from the activated profile folder -->
    <resource>
        <directory>/src/main/config/${environment}</directory>
        <targetPath>META-INF/</targetPath>
        <includes>
            <include>context.xml</include>
        </includes>
    </resource>
    <resource>
        <directory>src/main/config/${environment}</directory>
        <targetPath>WEB-INF/classes/</targetPath>
        <includes>
            <include>
                struts.properties
            </include>
            <include>
                log4j.xml
            </include>
        </includes>
    </resource>
    <!-- Default resources in case some file was not defined in the profile folder -->
    <!-- Files are not overwritten so default files will be copied only if it does not exist already -->
    <resource>
        <directory>/src/main/config/default</directory>
        <targetPath>META-INF/</targetPath>
        <includes>
            <include>context.xml</include>
        </includes>
    </resource>
    <resource>
        <directory>src/main/config/default</directory>
        <targetPath>WEB-INF/classes/</targetPath>
        <includes>
            <include>
                struts.properties
            </include>
            <include>
                log4j.xml
            </include>
        </includes>
    </resource> 
</webResources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:32:28.810

另一个尝试:)

我玩过覆盖参数。我认为这只替换 webapp 文件夹中的文件，你在 webapp 文件夹中的另一个 war 文件中。所以这对你的设置来说不是完美的。

然而上面提到的 webResource 参数可以做到这一点：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>org.mimacom.maven.examples</groupId>
<artifactId>mimacom-war-overlays</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>${project.artifactId}</name>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.build.compiler.version>1.6</project.build.compiler.version>
    <junit.version>4.9</junit.version>
</properties>

<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>${project.build.compiler.version}</source>
                    <target>${project.build.compiler.version}</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
    </dependency>
</dependencies>

<profiles>
    <profile>
        <id>prod</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.3</version>
                    <configuration>
                        <webResources>
                            <resource>
                                <directory>src/main/config/prod</directory>
                            </resource>
                        </webResources>
                        <!--<includes>-->
                            <!--<include>${basedir}/environments/overlay-1/css/styles.css</include>-->
                        <!--</includes>-->
                        <!--<overlays>-->
                            <!--<overlay>-->
                                <!--<includes>-->
                                    <!--../environments/overlay-1/css/**-->
                                <!--</includes>-->
                            <!--</overlay>-->
                        <!--</overlays>-->
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
    <profile>
        <id>test</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.3</version>
                    <configuration>
                        <webResources>
                            <resource>
                                <directory>src/main/config/test</directory>
                            </resource>
                        </webResources>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>

</profiles> 
```

激活的配置文件会将其他文件夹添加到 war 文件中。所以这应该可以解决问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:39:57.667

我认为您需要覆盖战争文件。在每个war类型的配置文件而不是jar中创建一个依赖项，这将覆盖当前war文件中的文件。

另一种可能性可能是 maven-war-plugin 的[覆盖配置](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#overlays)。

因此配置文件将激活您要复制的文件而不是当前文件。插件站点上也有[相当多的文档](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)以及一些示例

希望有效！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T22:38:18.763

我看到您将使用相同的资源，但在每个配置文件（测试和产品）中具有不同的配置。

所以，我建议你使用这样的配置：

```
<profiles>
<profile>
    <id>test</id>
    <activation>
        <activeByDefault>true</activeByDefault>
        <property>
            <name>env</name>
            <name>test</name>
        </property>
    </activation>
    <build>
        <filters>
            <filter>test.properties</filter>
        </filters>
    </build>
</profile>

<profile>
    <id>prod</id>
    <activation>
        <property>
            <name>env</name>
            <value>prod</value>
        </property>
    </activation>
    <build>
        <filters>
            <filter>prod.properties</filter>
        </filters>
    </build>
</profile>
</profiles> 
```

在这种情况下，我有两个配置文件，每个配置文件都使用“env”参数激活。每个配置文件都有一个文件来过滤您的资源，将您的 log4j.xml、struts.properties、context.xml 文件放在 src/main/resources 中，并使用变量在每个配置文件中使用正确的配置。

希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T15:57:39.837

看看这些问题/答案中的任何一个。一个可能对你有用。

[在打包战争之前在 Maven 构建阶段运行 ant 任务？](https://stackoverflow.com/q/12671174/944849)

[构建战争时文件在maven项目中被覆盖](https://stackoverflow.com/q/10133485/944849)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-14T21:03:55.137

这是上述解决方案的一个更简单的版本，它仅依赖于插入 pom.xml 的简单片段。

使用以下命令构建默认（本地工作站）webapp：

```
mvn war:exploded 
```

添加环境命令行参数以将文件从特定于环境的目录（如 resources-prod）复制到目标 WEB-INF/classes 目录：

```
mvn war:exploded -Denvironment=prod 
```

在 pom.xml 的项目元素中添加：

```
<!-- this profile will allow files in environment-specific folders like resources-prod or resources-test
     to be added to the resulting war's classpath under WEB-INF/classes
     to activate the profile, simply add '-Denvironment=prod' to your maven build command 
     this also works fine with war:inplace and war:exploded 
-->
<profile>
    <id>environment-specific</id>
    <activation>
        <property>
            <name>environment</name>
        </property>
    </activation>
    <build>
    <plugins>   
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.4</version>
        <configuration>
            <webResources>
                <!-- note the order of the following resource elements are important. 
                     if there are duplicate files, the first file copied will win
                -->
                <resource>
                    <!-- this is relative to the pom.xml directory -->                        
                    <directory>resources-${environment}</directory>
                    <!-- override default destination at root of war -->
                    <targetPath>WEB-INF/classes</targetPath>
                </resource>
                <resource>
                    <directory>src/main/resources</directory>
                    <targetPath>WEB-INF/classes</targetPath>
                </resource>
            </webResources>
        </configuration>
      </plugin>             
    </plugins>
    </build>
</profile> 
```

更多信息和[工作示例的链接](http://scandilabs.com/technology/knowledge/How_to_build_for_different_environments_with_Maven)。

# spring - Spring MVC 主题是否支持不同的本地化？

> ID：12729519
> 
> 赞同：1
> 
> 时间：2012-10-04T14:28:32.603
> 
> 标签：spring, spring-mvc, localization

我需要对包含 css、图像和文本的 Spring MVC Web 应用程序提供主题支持。

目前所有文本都在`<spring:message>`标签中。我能否为每个主题和语言环境提供不同的 language.properties 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:34:08.303

是的，有可能请参考[链接上的示例](http://viralpatel.net/blogs/spring-3-mvc-themes-tutorial-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:50:57.130

在看了这个之后 - 它似乎提供了本地化的主题，最简单的方法是将所有消息都放在`spring:theme`标签中。然后，您只需为每个语言环境提供一个主题属性文件。

# curl - Curl - 从初始 curl 请求中获取每个文件大小

> ID：12729522
> 
> 赞同：0
> 
> 时间：2012-10-04T14:28:37.820
> 
> 标签：curl

我知道 cURL 可以获取页面的总下载大小，但我希望将下载大小分为下载的总图像、下载的总脚本大小、总样式表大小下载等。

这样做的一般方法是什么...我找到了这个链接[PHP: Remote file size without download file](https://stackoverflow.com/questions/2602612/php-remote-file-size-without-downloading-file)

我认为这与执行 for 循环和 curl 以获取初始 curl 请求拉入的每个文件的大小有关。

让我知道是否有人有任何提示！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:58:43.727

做这个功能：

```
<?php
  getResourceSize($remoteFile /*link of the file*/)
  {
      $ch = curl_init($remoteFile);
      curl_setopt($ch, CURLOPT_NOBODY, true);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
      curl_setopt($ch, CURLOPT_HEADER, true);
      curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); //not necessary unless the file redirects (like the PHP example we're using here)
      $data = curl_exec($ch);
      curl_close($ch);
      if ($data === false) {
        echo 'cURL failed';
        exit;
      }

      $contentLength = 'unknown';
      $status = 'unknown';
      if (preg_match('/^HTTP\/1\.[01] (\d\d\d)/', $data, $matches)) {
        $status = (int)$matches[1];
        if($status == ('404' || '500') return 'error';
      }
      if (preg_match('/Content-Length: (\d+)/', $data, $matches)) {
        $contentLength = (int)$matches[1];
        return $contentLength;
      }
  }
?> 
```

现在将您的总下载大小初始化为：

```
$files = array
[
    "http://...firstFile.ext",
    "http://...secondFile.ext",
    "http://...thirdFile.ext",
    ...
];

 $totalDownloadSize = 0;

 foreach($file in $files)
     $totalDownloadSize += GetResourceSize($file); 
```

# php - php mysql在数据库的文本区域中存储换行符

> ID：12729524
> 
> 赞同：5
> 
> 时间：2012-10-04T14:28:42.497
> 
> 标签：php, mysql, database, format

我有一个输入文本区域，我想存储用户在数据库的文本区域中所做的换行符，以便它以与输入文本相同的方式回显输出文本

例如：

```
Some text some text some text some text

new line some text some text new line 

new line some text new line some text 
```

这是我当前的上传脚本：

```
$sql = "insert into people (price, contact, category, username, fname, lname, expire, filename) values (:price, :contact, :category, :user_id, :fname, :lname, now() + INTERVAL 1 MONTH, :imagename)";
$q = $conn->prepare($sql) or die("failed!");
$q->bindParam(':price', $price, PDO::PARAM_STR);
$q->bindParam(':contact', $contact, PDO::PARAM_STR);
$q->bindParam(':category', $category, PDO::PARAM_STR);
$q->bindParam(':user_id', $user_id, PDO::PARAM_STR);
$q->bindParam(':fname', $fname, PDO::PARAM_STR);
$q->bindParam(':lname', $lname, PDO::PARAM_STR);
$q->bindParam(':imagename', $imagename, PDO::PARAM_STR);
$q->execute(); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-04T14:33:13.530

文本区域中的换行符是换行符，例如`\n`. 这些不是在 HTML 中呈现的，因此如果您只是回显输出，它们就不会显示出来。您可以在 a`<textarea>`或`<pre>`标签内回显，也可以使用[`nl2br()`](http://www.php.net/manual/en/function.nl2br.php)用标签替换新行，`<br>`以便它可以显示为 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:34:38.090

您可以在使用存储之前转义换行符`mysql_real_escape_string`

此处的文档：http: [//php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:36:21.277

您还可以使用 javascript 来破坏文本，如`\n to <br>`使用替换

```
str.replace("\n", "<br />","g"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-09T16:37:12.383

我有同样的问题，现在正在工作：

```
$query = "UPDATE your_table 
         SET your_text_field = 'line 1'" . '\n' . "'line2' 
         WHERE your_id_field = " . $id . "';"; 
```

# cmake - 将 gcov 与 cmake 一起使用时未创建 .gcda 文件

> ID：12729525
> 
> 赞同：3
> 
> 时间：2012-10-04T14:28:45.227
> 
> 标签：cmake, gcov

我正在将 gcov 与 cmake 一起使用。所有标志都设置正确。.GCNO 文件已正确创建。但是，在执行从源文件生成的可执行文件时，情况有点复杂。可执行文件在 bash 脚本中运行。

让我创建一个示例场景，以便您可以给我准确的答案。

我有一个名为 MY_FILE.CC 的文件，它的可执行文件名为 EXECUTABLE_FILE 我使用 cmake 并为 gcov 设置了所有标志。我有一个名为 THE_SCRIPT.SH 的脚本，它是用“make test”运行的。此脚本运行 EXECUTABLE_FILE 文件。

所以这里的想法是 bash 脚本 (THE_SCRIPT.SH) 依次运行可执行文件 (EXECUTABLE_FILE) 并且这些 bash 脚本的运行不会创建 .GCDA 文件。当我直接/手动运行可执行文件时，会创建 .GCDA 文件。我相信 bash 脚本是在子 shell 中运行的，而父 shell 无法知道源的可执行文件是否已运行。有人可以确认这是否正是这种情况吗？如果不是，那么确切的问题是什么？如果是，那么解决这个问题的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T12:14:05.797

可能这个[问题](https://stackoverflow.com/questions/6089140/gcov-with-cmake-using-a-separate-build-directory)与您的问题有关。

也许您可以提供有关标志、项目目录结构等的更多详细信息。

# xaml - 适用于 Windows 8 xaml 的 HierarchicalDataTemplate

> ID：12729527
> 
> 赞同：1
> 
> 时间：2012-10-04T14:28:47.403
> 
> 标签：xaml, windows-runtime, hierarchicaldatatemplate

是否可以在 Windows 8 中绑定分层数据源？假设我创建了自己的 HeaderedItems 控件。我是 XAML 用户。

# python - 我可以给 matplotlib 绘图函数中的线条添加边框（轮廓）吗？

> ID：12729529
> 
> 赞同：23
> 
> 时间：2012-10-04T14:28:54.960
> 
> 标签：python, plot, matplotlib

我尝试：

```
points = [...]
axe.plot([i[0] for i in points], [i[1] for i in points], linestyle='-', linewidth=10, 
color='black', markeredgewidth=2, markeredgecolor='green') 
```

但我只是得到一个黑色轮廓。我怎样才能达到下图所示的效果？ ![带绿色边框的黑线](../Images/65124280e53f689cb0bb89f828f4b5fd.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2016-03-03T02:23:28.260

如果您绘制一条线两次，它将不会出现在图例中。使用路径效果确实更好。下面是两个简单的例子：

```
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.patheffects as pe

# setup data
x = np.arange(0.0, 1.0, 0.01)
y = np.sin(2*2*np.pi*t)

# create line plot including an outline (stroke) using path_effects
plt.plot(x, y, color='k', lw=2, path_effects=[pe.Stroke(linewidth=5, foreground='g'), pe.Normal()])
# custom plot settings
plt.grid(True)
plt.ylim((-2, 2))
plt.legend(['sine'])
plt.show() 
```

[![在此处输入图像描述](../Images/848bfe7086d75c3171b24086c900cd01.png)](https://i.stack.imgur.com/RKF0g.png)

或者如果你想添加线条阴影

```
# create line plot including an simple line shadow using path_effects
plt.plot(x, y, color='k', lw=2, path_effects=[pe.SimpleLineShadow(shadow_color='g'), pe.Normal()])
# custom plot settings
plt.grid(True)
plt.ylim((-2, 2))
plt.legend(['sine'])
plt.show() 
```

[![在此处输入图像描述](../Images/de4f0a83a9f7d2c7e3b9e1302a409f88.png)](https://i.stack.imgur.com/ZZtEK.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-04T16:33:53.823

只需用不同的粗细绘制两次线：

```
axe.plot([i[0] for i in points], [i[1] for i in points], linestyle='-', linewidth=10, 
color='green')
axe.plot([i[0] for i in points], [i[1] for i in points], linestyle='-', linewidth=5, 
color='black') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-16T09:53:23.137

更一般的答案是使用路径效应。为任何使用路径渲染的艺术家提供简单的轮廓和阴影（以及其他东西）。
matplotlib 文档（和示例）非常易于访问。

[http://matplotlib.org/users/patheffects_guide.html](http://matplotlib.org/users/patheffects_guide.html)

[http://matplotlib.org/examples/pylab_examples/patheffect_demo.html](http://matplotlib.org/examples/pylab_examples/patheffect_demo.html)

# android - 取消 Dropbox getFile 下载

> ID：12729532
> 
> 赞同：2
> 
> 时间：2012-10-04T14:29:05.583
> 
> 标签：android, dropbox-api

使用 Android Dropbox SDK 时，有谁知道在 getFile 调用开始后取消下载的最佳方法。目前，我的 AsyncTask 类执行以下操作：

```
@Override
protected O2ShellFileManagerError doInBackground(File... params) {
    if (params[0] == null) {
        return new O2ShellFileManagerError(
                "No File found.",
                O2ShellErrorCode._o2sfm_ec_unknown);
    }

    File mFile = params[0];

    try {
        DropboxAPI<AndroidAuthSession> mDBApi = O2DropboxStorage
                .getDropboxSession(mContext);

        // mOutputStream is class level field.
        mOutputStream = new FileOutputStream(mFile);
        DropboxFileInfo info = mDBApi.getFile(mDropboxPath, null,
                mOutputStream, new ProgressListener() {

                    @Override
                    public void onProgress(long bytes, long total) {
                        if (!isCancelled())
                            publishProgress(bytes, total);
                        else {
                            if (mOutputStream != null) {
                                try {
                                    mOutputStream.close();
                                } catch (IOException e) {
                                }
                            }
                        }
                    }
                });
    } catch (DropboxException e) {
        Log.e("DbExampleLog",
                "Something went wrong while getting file.");

    } catch (FileNotFoundException e) {
        Log.e("DbExampleLog", "File not found.");

    } finally {
        if (mOutputStream != null) {
            try {
                mOutputStream.close();
                mOutputStream = null;
            } catch (IOException e) {
            }
        }
    }
    /*
     * The task succeeded
     */
    return null;
} 
```

所以我上面的解决方法基本上关闭了 OnProgess 方法中的 mOutputStream，它会生成 DropboxException。有比这更好/更清洁的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T02:44:40.730

使用 getFileStream API 获取 DropboxInputStream。

```
public DropboxAPI.DropboxInputStream getFileStream(java.lang.String path, java.lang.String rev) 
```

当用户取消下载时，调用 DropboxInputStream 的关闭函数。

我认为这种方法可以完全释放资源。

# javascript - 如何从 Fancybox 返回一个值

> ID：12729534
> 
> 赞同：1
> 
> 时间：2012-10-04T14:29:07.537
> 
> 标签：javascript, jquery, asp.net, fancybox

我有一个打开另一个 aspx.page 的 Fancybox，它将 DropDownList 加载到 fancybox 中。然后我需要用户从列表中选择一个值。我想知道是否可以将该选定的值返回到我从中调用fancybox 的页面。

例如：我在网站/test1.aspx 上。Test1.aspx 调用一个fancybox，它在fancybox 中加载Test2.aspx。Test2.aspx 有 ddl，用户从 ddl 中选择一个值，然后 fancybox 关闭并将选择的值返回给 Test1.aspx

这是我的幻想箱：

```
$.fancybox({
                'autoScale': false,
                'type': 'iframe',
                'height': 800,
                'width': 800,
                'href': 'Utilities/MoveFileTemplate.aspx?ExpenseID=' + $(this).children(':first').html(),
                onComplete: function () {
                    $('#fancybox-overlay').unbind();
                }
            }); 
```

在 MovingFileTemplate.aspx 我有一个隐藏字段，它从 DropDownList 中分配了选定的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:50:13.627

fancybox iframed 页面中的代码：

```
window.top.DoSomethingWithValue($('#myddl').val()); 
```

顶部（开瓶器）页面中的代码：

```
function DoSomethingWithValue(val)
{
    alert(val);
} 
```

# java - 序列化字段的属性而不是整个字段

> ID：12729535
> 
> 赞同：0
> 
> 时间：2012-10-04T14:29:11.973
> 
> 标签：java, json, jackson

我在互联网上搜索了我的问题..但我没有找到一个好的解决方案。

我需要在最后显示 json：

我有2节课

```
class Order {
    Long id;

    Client client;
}

class Client {
    Long id;
} 
```

当我序列化订单时，我得到：

```
[{"id":1,"client":{"id":1}] 
```

但我想获得：

```
[{"id":1,"client":1}] 
```

我怎样才能做到这一点？

感谢您的任何解决方案！！！马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:36:30.920

**-**当一个类实现`Serializable`时，**它的**对象或**它的子类**的对象就变成了`Serialized`。

**-**现在`Fields`是对象的，而**不是**被序列化的`Object`本身。

**-**并且`entire object graph` **需要**序列化，如果**没有序列化失败。**

**-**所以`Client`在课堂`Object Reference Variable`上`Order`会得到序列化，它的`Field` **id**也是如此。

**-**您**不能序列化**字段的属性而不是整个字段，**但**如果您愿意，可以使用关键字**防止** `Field`被序列化。`transient`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:12:16.100

使用`@JsonValue`注释：

```
class Client {
    @JsonValue Long id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:35:35.663

您需要为此类编写自己的序列化方法。

例如检查这个线程：[Implementing my own serialization in java](https://stackoverflow.com/questions/4929577/implementing-my-own-serialization-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:04:45.937

您也可以尝试 genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。它具有杰克逊的大部分功能和杰克逊不提供的其他一些不错的功能。

要使用 genson 和少量代码解决您的问题，您可以这样做：

```
public class Order {
    Long id;
    @JsonIgnore Client client;
    @JsonProperty("client") public Long getClientId() {
        return client.id;
    }
}

public static class Client {
    Long id;
}

System.out.println(new Genson().serialize(order)); 
```

如果您愿意，还可以使用 genson 编写自定义序列化程序，请参见[此处](http://code.google.com/p/genson/wiki/GettingStarted#Custom_Converter)。但在你的情况下，没有必要。

# shell - 从目录中查找文件（如果存在或不存在）

> ID：12729536
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:29:12.647
> 
> 标签：shell, find, diff

我有一个包含多行文件的文件。我还有一个目录，其中包含所有文件，现在我想通过 shell 脚本查找文件中列出的文件是否存在于目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:34:03.623

迭代和测试

```
cat filelist.lst | while read filename
do
   if [ -f directory/$filename ]
   then echo File $filename exists
         # build up a list
        exists="$exists directory/$filename"
   fi
done 
```

# objective-c - 如何为纵向和横向布局创建 UIView

> ID：12729539
> 
> 赞同：0
> 
> 时间：2012-10-04T14:29:15.990
> 
> 标签：objective-c, ios, uiview

我正在尝试创建一个适用于纵向和横向模式的 UIView，但不知道如何实现这一点。仅供参考 - 我正在通过代码布置所有组件，因此没有 XIB 或情节提要......这是一个要求。

我有一个方法称为`createView`布局所有视图组件（按钮、标签等），我在创建视图时调用这些组件。

我不知道的是我的控制器`addSubview:myNewCustomView`在水平模式下添加了视图，那么当从纵向切换到横向时如何更改自定义 UIView 中组件的布局？

我会在我的自定义 UIView 中创建一个用于纵向布局和另一个用于横向布局的方法吗？如果我有两种方法，我是否必须获取父母的显示模式，横向或纵向，然后在我的自定义 UIView 中调用适当的 createView 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:38:08.330

您可以在 CustomView 类中覆盖 layoutSubviews 方法。并在您的 ViewController 中调用您的 CustomView 对象上的 setNeedsLayout。在您的 CustomView 中保留一个方向变量

在自定义视图中：-

```
- (void) layoutSubviews(){
    // set position and height width of the subviews according to this views params
} 
```

在 YourViewController 中：-

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration {
    [yourCustomViewObj setOrientation:orientation];
    [yourCustomViewObj setNeedsLayout];
} 
```

# c# - 如何创建扩展名为 .tvm 的文件

> ID：12729542
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:29:18.403
> 
> 标签：c#, visual-studio-2005

我有一个如下所示的代码

```
private string m_simview= String.Empty;
      public string SimView
      {
         get
         {
            return m_simview;
         }
         set
         {
            m_simview= value;
         }
      }

                  string viewpath = path + "views" + "\\BIMConsole\\"; 
```

我需要创建一个文件，其名称为属性值，`string SimView`其类型为 .tvm 在指定路径中，即在 .Can`string viewpath`任何人建议我编写代码来完成此任务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:32:46.333

有[一个`File`类](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)为文件系统对象（特别是本例中的文件）公开了许多文件系统管理方法。所以，像这样：

```
File.Create(Path.Combine(viewpath, SimView) + ".tvm"); 
```

此方法*将*返回一些东西 a `FileStream`，一旦完成，您应该处理它。

# php - 比较php中的两个日期

> ID：12729543
> 
> 赞同：-2
> 
> 时间：2012-10-04T14:29:25.367
> 
> 标签：php, mysql

我在这里有这个代码，它允许我检索一些日期。我以这种方式保存了今天的日期：

```
$time = date("d-m-Y"); 
```

我在数据库中的日期字段是 varchar，格式如下：dmY

我该如何比较它们？我用过这个，但它不会工作！

```
SELECT DATE_FORMAT('date','%d-%m-%Y'), id, WHERE date>$time; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:52:52.663

如果您想通过从数据库中获取来比较日期，那么我建议您以日期格式而不是 varchar 格式存储。

但现在您可以执行以下操作：

首先使用 strtotime 将您的字符串转换为 unix 时间戳。喜欢 ：

> ```
> $time = strtotime( $date ); 
> ```

然后你使用这个时间戳来计算你想要的任何格式的日期。要获得所需的格式，您可以这样做：

> ```
> $newDate = date( 'd-m-y', $time ); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:34:59.503

尝试在查询中使用[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数首先将其转换`VARCHAR`为一个`DATETIME`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:35:16.827

您正在使用原始值构建 WHERE-Clause，请尝试以下操作：

```
SELECT DATE_FORMAT('date','%d-%m-%Y') AS compare_date, `id` FROM `table_name` WHERE DATE_FORMAT('date','%d-%m-%Y') > $time; 
```

请注意，这是一个字符串比较，所以最好反过来做，例如`%Y-%m-%d`

或使用`STR_TO_DATE`@Micah Carrick 建议的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:35:19.737

在查询中，您有一个额外的`,`after`id`并且还需要一个`from`子句。

```
SELECT DATE_FORMAT('date','%d-%m-%Y') as new_date, id from your_table WHERE new_date > $time; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-22T05:51:54.270

```
 This Example Is Working 100% try Now

      $exp_date = "2006-01-16"; 

      $todays_date = date("Y-m-d"); 

      $today = strtotime($todays_date); 

      $expiration_date = strtotime($exp_date); 

      if ($expiration_date > $today) 
         { 
           $valid = "yes"; 
         } 
      else 
         { 
           $valid = "no"; 
         } 
```

# perl - 为什么这个返回 PerlIO* 的 XS 代码会泄漏？

> ID：12729545
> 
> 赞同：7
> 
> 时间：2012-10-04T14:29:26.650
> 
> 标签：perl, xs, perl-io

我正在尝试编写一些 XS 代码，将库作为​​可以写入的流接口公开给 Perl 代码。下面的 `get_stream`函数应该是一个构造函数，它准备并返回一个 PerlIO 对象。我认为我只需要 `Write`and`Close`方法，所以我将所有其他函数槽留空。

```
typedef struct {
    struct _PerlIO base;
    mylib_context* ctx;
} PerlIOmylib;

/* [...] */

PERLIO_FUNCS_DECL(PerlIO_mylib_funcs) = {
.fsize = sizeof(PerlIO_funcs),
.name  = "mylib",
.size  = sizeof(PerlIOmylib,
.Write = mylib_write,
.Close = mylib_close,
};

/* XS below */

PerlIO*
get_stream (SV* context_obj)
CODE:
mylib_context* ctx = (mylib_context*) SvIV (SvRV (context_obj));
PerlIO* f = PerlIO_allocate (aTHX);
f = PerlIO_push (aTHX, f, PERLIO_FUNCS_CAST(&PerlIO_mylib_funcs), "a", NULL);
PerlIOSelf(f, PerlIOmylib)->ctx = ctx;
PerlIOBase(f)->flags |= PERLIO_F_OPEN;
RETVAL = f;
OUTPUT:
RETVAL 
```

当我像这样使用提供的界面时......

```
{
    my $fh = MyLib::get_stream($lib_ctx);
    print $fh "x" x 300;
} 
```

...`mylib_write`函数被调用，所以到目前为止我还没有完全搞砸。（我通过插入调试 printf 语句验证了这一点。）但是，我希望 PerlIO 对象在 `$fh`超出范围时关闭，就像使用`open`. 但目前，该`mylib_close` 函数仅在解释器关闭期间调用。

直接调用`close`工作正常，设置`$fh`为`undef`不行。

**更新：**按照 ikegami 的建议，我使用`Devel::Peek::Dump`并`sv_dump` 发现句柄返回`get_stream`函数是一个“RV”，它指向一个`SV = PVGV(...)`. glob ( `PVGV`) 的引用计数器设置为 3，这似乎不正确。

我添加了

```
CLEANUP:
SvREFCNT_dec (SvRV (ST(0)));
SvREFCNT_dec (SvRV (ST(0))); 
```

治愈症状： 在块结束时超出范围时`close`调用该函数。`$fh`但是我仍然不太了解潜在的问题。

这是为该`OUTPUT`部分生成的 C 代码：

```
ST(0) = sv_newmortal();
{
    GV *gv = newGVgen("MyLib");
    if (do_open(gv, "+<&", 3, FALSE, 0, 0, RETVAL) )
        sv_setsv(ST(0), sv_bless(newRV((SV*)gv), gv_stashpv("MyLib",1)));
    else
        ST(0) = &PL_sv_undef;
}
XSRETURN(1); 
```

GV 的引用计数如何最终达到 3？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:18:40.860

如果`close`在全局销毁时调用，则意味着您的句柄在全局销毁时仍然存在。你在泄密！

在 C/XS 代码中，您可以使用`sv_dump(sv)`将标量转储到 stderr。在 Perl 代码中，您可以使用[Devel::Peek](http://search.cpan.org/perldoc?Devel::Peek)来`Dump`获得相同的功能。这将向您显示引用计数。

* * *

在回答你的新问题时，

您有三个分配，但只有一个释放（来自 sv_2mortal 的延迟一个）。

*   `gv`: 指针总是被丢弃。内存泄漏！

    您可以减少错误时的 refcnt ，或者在打开成功时使用“转移所有权”到 RV`gv`后无条件地减少 refcnt 。`newRV_inc`

*   SV from `newRV`: 指针总是被丢弃。内存泄漏！

    为什么不直接退回而不是复制呢？只需将其标记为 mortal 以使 Perl 在调用者获取它后减少其 refcnt。

固定的：

```
{
    GV *gv = newGVgen("MyLib");
    if (!do_open(gv, "+<&", 3, FALSE, 0, 0, RETVAL) ) {
        SvREFCNT_dec(gv);
        XSRETURN_UNDEF;
    }

    ST(0) = sv_2mortal(sv_bless(newRV_noinc((SV*)gv), gv_stashpv("MyLib",1))));
    XSRETURN(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:45:26.387

我只是用一个简单的例子重现了这个问题：

```
$ h2xs -n foo
Defaulting to backwards compatibility with perl 5.14.2
If you intend this module to be compatible with earlier perl versions, please
specify a minimum perl version with the -b option.

Writing foo/ppport.h
Writing foo/lib/foo.pm
Writing foo/foo.xs
Writing foo/fallback/const-c.inc
Writing foo/fallback/const-xs.inc
Writing foo/Makefile.PL
Writing foo/README
Writing foo/t/foo.t
Writing foo/Changes
Writing foo/MANIFEST 
```

，`foo/foo.xs`我补充说：

```
PerlIO*
get_stream(char* name);
CODE:
RETVAL = PerlIO_open (name, "w");
OUTPUT:
RETVAL 
```

和以下简单的测试程序：

```
#!/usr/bin/perl
use foo;
use Devel::Peek;
{
    my $fh = foo::get_stream ("testfile");
    Devel::Peek::Dump $fh;
    print $fh "hello\n";
}
print "bye\n"; 
```

果然，生成的 glob 的引用计数设置为 3，`strace`这表明关闭文件描述符是 Perl 解释器做的最后一件事。

因此，`PerlIO*`默认情况下处理似乎是泄漏的。:-(

以下`typemap`代码段似乎解决了这个问题（感谢 ikegami！）：

```
TYPEMAP
PerlIO *    T_PIO
OUTPUT
T_PIO
    {
        GV *gv = newGVgen("$Package");
        if (do_open(gv, "+<&", 3, FALSE, 0, 0, $var) ) {
            $arg = sv_2mortal(sv_bless(newRV_noinc((SV*)gv), gv_stashpv("$Package",1)));
        } else {
            SvREFCNT_dec(gv);
            $arg = &PL_sv_undef;
        }
    } 
```

# php - 全局变量是否会导致 php 中的服务器负载？

> ID：12729547
> 
> 赞同：1
> 
> 时间：2012-10-04T14:29:32.960
> 
> 标签：php, function, include

`$_SERVER`我想知道如果多次使用像 .. 这样的全局变量是否会导致服务器上的任何负载？我现在的代码是基本的，但是为了良好的编码实践，我应该将这些设置为他们自己的变量并以这种方式使用它还是只使用全局变量多次？

导致我问这个问题的问题是，我有 2 个函数依赖于`$_SERVER['DOCUMENT_ROOT']`它需要的路径，并且在运行一个页面时它必须使用两次，所以我很好奇将其设置为 aa 变量是否有助于提高性能那样使用它。如果这样更好，我会怎么做？当我在函数之外定义它时，我无法在函数中使用它。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:36:28.037

该`$_SERVER`变量由托管 PHP 的 Web 服务器自动设置，我相信它是在执行脚本之前设置的。引用该`$_SERVER`变量不会将任何内容传递给服务器，因为该值已经设置。除非您为了清楚起见想放入`$_SERVER['DOCUMENT_ROOT']`另一个变量（尽管我认为使用服务器变量本身就足够清楚了），否则没有必要。

此外，就性能而言，您无需过于担心此类事情。您真正的瓶颈将出现在数据库层和任何计算密集型任务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:34:36.007

您可以随心所欲地使用 $_SERVER，将其设置为变量再次浪费很少的内存， $_SERVER 可作为 assoc 数组使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:34:45.157

不，上帝不。即使是这样，它也只是一个变量访问。你不是在计算 pi，你只是在访问一个变量。如果有任何差异，那将是如此之小，您将很难证明这一点。当你有理由担心这些事情时，比如你的网站实际上很慢。

# python - 许多项目中的通用库

> ID：12729549
> 
> 赞同：0
> 
> 时间：2012-10-04T14:29:38.787
> 
> 标签：python, git, oop, virtualenv, pypi

我的项目很少，他们使用一些通用代码。我将此代码重构为公共库，但随后出现了问题。如何管理这个通用代码。我考虑了一些选项，它们是：

1.  库作为文件系统中的软链接。
2.  库作为 git 子模块。
3.  使用 pip/requirements.txt 管理的依赖项。

这种解决方案的优缺点是什么？你有其他建议吗？我应该选择哪一个，为什么？

我在 virtualenv 中使用 Git 和 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:33:49.213

选项1，从长远来看会给你带来痛苦。任何重要的库都必须在某个阶段破坏向后兼容性，并且您不想更新应用程序 A、B 和 C，因为应用程序 D 需要库中的一些新功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:47:17.040

virtualenv 的第三个选项非常方便。只需在您的项目中创建一个需求文件，将依赖项安装到您的 virtualenv 中，然后运行 ​​env。每个项目都可以有自己的依赖项和 virtualenv，并且没有任何重叠。您也不必担心在系统的 Python 中安装冲突模块。

# jqgrid - JqG rid 中的排序列

> ID：12729551
> 
> 赞同：0
> 
> 时间：2012-10-04T14:29:40.243
> 
> 标签：jqgrid, datagridviewcolumn

我的脚本上有这个声明，我想选择可以在上面看到的列..

```
 $("#list").jqGrid({
            url: '/persons.ashx',
            datatype: 'xml',
            mtype: 'GET',
            colNames: ['Name', 'Age'],
            colModel: [
            { name: 'Name', index: 'Name', width: 100, align: 'center', editable: true, editoptions: { size: 30 }, editrules: { edithidden: false }, sortable: true },
            { name: 'Age', index: 'Age', width: 100, align: 'center', editable: true, editoptions: { size: 30 }, editrules: { edithidden: false }, sortable: true }
            ]
            ajaxSelectOptions: {
                data: {
                    codSelected: function () { return _codSelected; }
                      }
            },
            onSelectRow: function (rowid) {
               _codSelected = rowid;
            },
            autoencode: true,
            pager: '#pager',
            rowNum: 20,
            sortname: 'Name',
            sortorder: 'asc',
            sortable: true,
            autowidth: false,
            width: 999,
            height: -1,
            shrinkToFit: true,
            viewrecords: true,
            gridview: true,
            caption: 'Persons',
            editurl: ''
        });

        jQuery("#list").jqGrid('navGrid',
            '#pager',
            {
                add: false,
                del: false,
                edit: false,
                search: true,
                refresh: true,
                cloneToTop: true
            },
            { width: 360, resize: false, closeAfterEdit: true, recreateForm: true, viewPagerButtons: true
            },
            { width: 360, resize: false, closeAfterAdd: true, recreateForm: true },
            {}, //Delete action
            { closeAfterSearch: true, closeOnEscape: true }
        );
    });

        //CODE ADDDED TO CAN CHOOSE COLUMNS
        jQuery("#list").jqGrid('navButtonAdd', '#pager', {
                    caption: "",
                    buttonicon: "ui-icon-calculator",
                    title: "Choose columns",
                    onClickButton: function () {
                        $(this).jqGrid('columnChooser');
                    }
                }); 
```

我有 14 列，但我在屏幕上看不到所有内容，在这个例子中我只放了 2 列，但我看不到重新加载按钮附近的选择按钮，事实上，不能选择任何列来订购它..

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:41:54.413

您发布的代码有一些语法问题。看起来像

```
 $("#list").jqGrid({
        ...
    });
    jQuery("#list").jqGrid('navGrid', ...
    );
});
    jQuery("#list").jqGrid('navButtonAdd', '#pager', { ...
    }); 
```

我想它看起来像

```
$(function () {
    $("#list").jqGrid({
        ...
    });
    jQuery("#list").jqGrid('navGrid', ...
    );
});
    jQuery("#list").jqGrid('navButtonAdd', '#pager', { ...
    }); 
```

并且您尝试使用`navButtonAdd` **out of** `$(document).ready(...)` .

如果真的是这样，你应该在调用之后直接移动`navButtonAdd` **里面** 的调用，问题就解决了。`$(document).ready(...)``navGrid`

# ruby-on-rails - rails - 遏制：编码问题发送请求和令牌与“+”

> ID：12729552
> 
> 赞同：1
> 
> 时间：2012-10-04T14:29:48.077
> 
> 标签：ruby-on-rails, encoding, token, curb

我在向外部服务器发送请求时遇到问题，当令牌带有“+”时，另一台服务器无法识别该请求。我认为这是编码的问题（对不起，我是 Rails 的新手），但我不知道该怎么做。

这是我的代码

```
 req = Curl::Easy.new do |curl| 
        curl.url = "https://blabla.com/bla?token=#{@token}"
        curl.headers['Content-type'] = 'application/json'
    end
    req.perform
    puts req.body_str 
```

当令牌类似于：S6ps1YSMC6xaRusfSH4aBg1RTm2/U1u1ng/hZSmGGTGX12AcL//Q33ri7Wlkl1Vjg4j/zDM=

没关系，但是什么时候是：HK+rKsYMTbs2fjN+pLfPIj5wcjZp3IVQWuK5jW0iN/wKfkVgsQAjQ5+A1RvUF1Lp0lgdf1M=

响应为 403（禁止）。

我在文档中进行了搜索，但一无所获（https://github.com/taf2/curb）。

有什么想法可以强制 curl::easy 不将“+”转换为另一件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:06:17.677

在发送请求之前尝试 uri 编码 @token。试试**'u'**方法

```
>> u "HK+rKsYMTbs2fjN+pLfPIj5wcjZp3IVQWuK5jW0iN/wKfkVgsQAjQ5+A1RvUF1Lp0lgdf1M="
=> "HK%2BrKsYMTbs2fjN%2BpLfPIj5wcjZp3IVQWuK5jW0iN%2FwKfkVgsQAjQ5%2BA1RvUF1Lp0lgdf1M%3D" 
```

# mongodb - MongoDB Capped Collection 不删除文档

> ID：12729555
> 
> 赞同：2
> 
> 时间：2012-10-04T14:29:51.590
> 
> 标签：mongodb

我想将集合限制为 1MB 或 300 条记录，以先到者为准。

```
PRIMARY>db.runCommand({"convertToCapped":"cache",'size':1024*1024, 'max':300});
{ "ok" : 1 }
PRIMARY>db.cache.isCapped();
true 
```

到目前为止，一切都很好。一段时间后，我在集合使用了一点（插入新记录等）后重新签入

```
PRIMARY> db.cache.count();
513 
```

嗯什么？上次我检查时，513 > 300。请注意，“封顶”是在计数超过 300 之前执行的。

```
PRIMARY> db.cache.validate();
{
"ns" : "streamified.cache",
"capped" : 1,
"max" : 2147483647,
"firstExtent" : "16:7279e000 ns:streamified..tmp.convertToCapped.cache",
"lastExtent" : "16:7279e000 ns:streamified..tmp.convertToCapped.cache",
"extentCount" : 1,
"datasize" : 858104,
"nrecords" : 513,
"lastExtentSize" : 1052672,
"padding" : 1,
"firstExtentDetails" : {
    "loc" : "16:7279e000",
    "xnext" : "null",
    "xprev" : "null",
    "nsdiag" : "streamified..tmp.convertToCapped.cache",
    "size" : 1052672,
    "firstRecord" : "16:7279e0b0",
    "lastRecord" : "16:72871444"
},
"deletedCount" : 1,
"deletedSize" : 186184,
"nIndexes" : 0,
"keysPerIndex" : {

},
"valid" : true,
"errors" : [ ],
"warning" : "Some checks omitted for speed. use {full:true} option to do more thorough scan.",
"ok" : 1
} 
```

我不擅长阅读这个输出，但上面的“最大值”看起来有点奇怪。除此之外，我不确定会出现什么问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:57:20.693

看起来 convertToCapped 方法不支持 max 选项。

文档没有提到它。 [http://docs.mongodb.org/manual/reference/command/convertToCapped/](http://docs.mongodb.org/manual/reference/command/convertToCapped/)

max 只是新系列的一个选项。

# asp.net - 无法让 Juice UI 工作 - 设置？

> ID：12729556
> 
> 赞同：0
> 
> 时间：2012-10-04T14:29:50.697
> 
> 标签：asp.net, juice-ui

我无法让 Juice UI 做任何事情。所以，我创建了一个单独的网站，只有一页，仍然有问题。这是页面的标记：

```
<%@ Page Title="Home Page" Language="VB" MasterPageFile="~/Site.Master" AutoEventWireup="false"
CodeFile="Default.aspx.vb" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <asp:ScriptManager ID="ScriptManager1" runat="server">        
    </asp:ScriptManager>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <juice:Datepicker ID="datepicker1" TargetControlID="TextBox1" runat="server" />

</asp:Content> 
```

日期选择器不会出现。

安装时发生的唯一奇怪的事情（来自 NuGet）是它试图将 .dll 的第二个副本导入为“JuiceUI.dll(2)”。我刚刚删除了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:52:01.813

在开始工作之前，我需要将脚本引用添加到脚本管理器。像这样的东西：

```
<asp:ScriptManager ID="scripty" runat="server">
    <Scripts>
        <asp:ScriptReference Path="~/Scripts/jquery-1.8.2.min.js" />
        <asp:ScriptReference Path="~/Scripts/jquery-ui-1.8.24.min.js" />
    </Scripts>
</asp:ScriptManager> 
```

# javascript - 分配被认为有害的 jQuery 函数？

> ID：12729558
> 
> 赞同：2
> 
> 时间：2012-10-04T14:29:54.943
> 
> 标签：javascript, jquery, function-pointers

这段代码运行良好：

```
if (chk.checked)
    div.show(delay);
else
    div.hide(delay); 
```

我试图通过像这样重构它来变得聪明：

```
var showHide = chk.checked ? div.show : div.hide;
showHide(delay); 
```

但这导致了 jQuery 内部的异常。两段代码不应该是等价的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:32:47.780

你可以这样做：

```
var showHide = chk.checked ? 'show' : 'hide';
div[showHide](delay); 
```

如果你只是保存对函数的引用，你将失去接收者——也就是说，在函数内部，`this`引用将是错误的。

我想你可以这样做：

```
var showHide = chk.checked ? div.show : div.hide;
showHide.call(div, delay); 
```

*编辑*或避免在第一行中两次引用“div”：

```
var showHide = div[chk.checked ? 'show' : 'hide']; 
```

我不确定这样的重构是否会使任何事情变得更清晰:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:40:40.800

问题是`show`and`hide`函数不是特定 jQuery 选择对象的属性。它们是 jQuery 原型对象的属性。

因此，例如，返回 true：

```
$('div').show === $.fn.show; 
```

只有一个`show`函数，并且`var showHide = div.show`只将通用函数分配给变量。至关重要的是，它不会导入*context*，这就是调用它的`div.show()`作用。

简单的方法是使用属性名称作为变量，而不是像[Pointy 的回答那样](https://stackoverflow.com/a/12729624/417562)使用函数本身，或者`call`像他也建议的那样使用。另一种选择是使用`bind`（或者`$.proxy`如果您必须支持旧浏览器）：

```
var showHide = (chk.checked ? div.show : div.hide).bind(div);
showHide(delay); 
```

我真的不确定这是否值得努力，但是......

# iphone - 设置地图中某些位置的缩放和中心

> ID：12729560
> 
> 赞同：0
> 
> 时间：2012-10-04T14:30:01.337
> 
> 标签：iphone, objective-c, ios

我尝试修复地图中几个位置的缩放和中心。这是我使用但不起作用的代码：

```
 MKCoordinateRegion region;

        CLLocationDegrees maxLat = -90;
        CLLocationDegrees maxLon = -180;
        CLLocationDegrees minLat = 90;
        CLLocationDegrees minLon = 180;
        for(int idx = 0; idx < arrLocation.count; idx++)// here use your array or points
        {
            CLLocation* currentLocation = [arrLocation objectAtIndex:idx];
            if(currentLocation.coordinate.latitude > maxLat)
                maxLat = currentLocation.coordinate.latitude;
            if(currentLocation.coordinate.latitude < minLat)
                minLat = currentLocation.coordinate.latitude;
            if(currentLocation.coordinate.longitude > maxLon)
                maxLon = currentLocation.coordinate.longitude;
            if(currentLocation.coordinate.longitude < minLon)
                minLon = currentLocation.coordinate.longitude;
        }

        region.center.latitude     = (maxLat + minLat) / 2;
        region.center.longitude    = (maxLon + minLon) / 2;
        region.span.latitudeDelta  = (maxLat - minLat) * 2;
        region.span.longitudeDelta = (maxLon - minLon) * 2;

        [mapView setRegion:region animated:YES]; 
```

我试过了`didAddAnnotationViews`，`didUpdateUserLocation`但没有用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:41:03.307

使用此代码

```
MKMapRect flyTo = MKMapRectNull;
    for (id <MKAnnotation> annotation in self.arrayAnnotation)
    {
        MyLog(@"fly to on");
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo))
        {
            flyTo = pointRect;
        }
        else
        {
            flyTo = MKMapRectUnion(flyTo, pointRect);
            //MyLog(@"else-%@",annotationPoint.x);
        }
    }

    // Position the map so that all overlays and annotations are visible on screen.
    mapView.visibleMapRect = flyTo; 
```

希望对你有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:14:03.860

```
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(theCoordinate, 1000, 1000);
MKCoordinateRegion adjustedRegion = [pointOnMapView regionThatFits:viewRegion];  
[pointOnMapView setRegion:adjustedRegion animated:NO]; 
```

`pointOnMapView`是我的`MKMapView`

`theCoordinate`类型是`CLLocationCoordinate2D`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:11:58.793

最后我以这种方式找到了解决方案：

```
CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

for(id<MKAnnotation> annotation in mapView.annotations) {
    topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
    topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);
    bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
    bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
}

MKCoordinateRegion region;
region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;

// Add a little extra space on the sides
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

region = [mapView regionThatFits:region];
[mapView setRegion:region animated:YES]; 
```

# c# - 自定义 WPF PasswordBox 不接收鼠标点击事件

> ID：12729561
> 
> 赞同：1
> 
> 时间：2012-10-04T14:30:03.827
> 
> 标签：c#, wpf

我的 WPF 表单有一个自定义的 PasswordBox，这个 PasswordBox 似乎没有收到鼠标点击事件。当我单击它时，不会出现插入符号。这是我对 PasswordBox 的风格：

```
 <Style x:Key="password" TargetType="{x:Type PasswordBox}">
        <Setter Property="Controller:PasswordBoxMonitor.IsMonitoring" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type PasswordBox}">
                    <Border Name="Bd" Background="{TemplateBinding Background}"
                BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}"
                SnapsToDevicePixels="true">
                        <Grid>
                            <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            <my:QETextBlock Text="Mật khẩu" Margin="0, 0, 0, 0"  Visibility="Collapsed" FontStyle="Normal" Name="txtPrompt" FontSize="12" FontFamily="Segoe UI"  />
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                        </Trigger>
                        <Trigger Property="Controller:PasswordBoxMonitor.PasswordLength" Value="0">
                            <Setter Property="Visibility" TargetName="txtPrompt" Value="Visible" />
                        </Trigger>

                        <Trigger Property="IsFocused" Value="True">
                            <Setter Property="Visibility" TargetName="txtPrompt" Value="Hidden" />
                        </Trigger>

                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

我尝试通过为此控件的鼠标按下事件添加事件处理程序来使该控件成为焦点：

```
 txtPassword.MouseDown += txtPassword_MouseDown; 
```

我的 txtPassword_MouseDown 函数：

```
 private void txtPassword_MouseDown(object sender, MouseButtonEventArgs e)
    {
        txtPassword.Focus();
    } 
```

但是当我点击 PasswordBox 时，这个功能不会被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-24T14:57:30.980

我解决了。有人设置`IsHitTestVisible="False"`这就是它没有响应鼠标点击的原因。

# ruby - 在 Ruby 中转义 Unicode 字符而不获得额外的双引号

> ID：12729564
> 
> 赞同：1
> 
> 时间：2012-10-04T14:30:21.010
> 
> 标签：ruby, unicode, escaping

我正在尝试使用 Ruby 1.9.3pl194转义包含用于 JSON*和 logfile的非 ASCII Unicode 字符的字符串。*消耗 JSON 的东西不能处理非 ASCII，所以我需要生成一个转义版本，但是......

```
a = "Abc\u00eddef"
puts a
puts a.inspect 
```

产生：

```
Abcídef
"Abc\u00EDdef" 
```

请注意，第二个输出包含不需要的双引号，我不想要引号，因为我只想将字符串写入`Abc\u00eddef`文件；它不仅仅用于 JSON 字符串。

如果我尝试使用，也会发生同样的事情`ActionSupport::JSON.decode(b)`

我知道我能做到

```
puts a.inspect[1..-2] 
```

但这有点难看，肯定有一种方法可以做到这一点而不必去掉引号？

它是普通的旧 Ruby，所以我没有`.html_safe`在 rails 中使用它（不确定这是否可行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:45:03.427

[以下是 ActiveSupport 解决问题的方法](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/json/encoding.rb#L130)：

```
def escape(string)
  string = string.encode(::Encoding::UTF_8, :undef => :replace).force_encoding(::Encoding::BINARY)
  json = string.
    gsub(escape_regex) { |s| ESCAPED_CHARS[s] }.
    gsub(/([\xC0-\xDF][\x80-\xBF]|
           [\xE0-\xEF][\x80-\xBF]{2}|
           [\xF0-\xF7][\x80-\xBF]{3})+/nx) { |s|
    s.unpack("U*").pack("n*").unpack("H*")[0].gsub(/.{4}/n, '\\\\u\&')
  }
  json = %("#{json}")
  json.force_encoding(::Encoding::UTF_8)
  json
end 
```

如您所见，这不是微不足道的！因此，最好的解决方案可能是使用`ActiveSupport::JSON.encode(whatever)`并去掉引号（如果你真的必须的话）。

# java - 可以在wifi网络中设置域名吗？

> ID：12729567
> 
> 赞同：0
> 
> 时间：2012-10-04T14:30:27.933
> 
> 标签：java, networking

我有一个 android 应用程序，用户在 Wifi 网络上共享文件。这一最大的问题之一是用户必须键入彼此的网络 IP 地址，即 192.168.43.254。我想知道是否有办法为这些网络 IP 分配特殊域名。只有在网络内没有互联网。所以当用户输入时，`http://superapp`它会自动打开 192.168.43.254。这可能吗？如果不是，有什么替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:31:59.940

您需要在网络中运行 DNS 服务器，将该主机名添加到服务器，并配置路由器的 DHCP 设置以告诉客户端使用 DNS 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:44:26.190

只要网络系统和 wifi 客户端位于定义的相同 IP 范围内，例如 from `192.168.1.1`through `192.168.1.255`，就可以通过 http 和其他协议通过其名称访问网络应用服务器。
尽管服务器位于本地网络中，但通常的做法是服务器具有静态 IP。如果具有 IP 的网络应用服务器具有`192.168.1.24`名称*`droidapps`*，则可以通过`http://droidapps/path-to-apps?query=string&etc`. 如果客户端设备的 IP 也在 WIFI 网络的 IP 范围内，这也应该在启用 WIFI 的网络上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:05:01.853

您可能会修改每台 Android 设备上的 /etc/hosts 文件，但是您的设备需要植根。

@SLaks 提供的另一个选项是使用 DNS 服务器。如果它在本地 wifi 路由器上，大多数将用作 DNS 转发器 - 即：请求到达路由器，路由器将请求提交给您的 ISP 的 DNS 服务器。一些路由器软件（例如[DD-WRT](http://www.dd-wrt.com/site/index)，如果有记忆的话）允许您手动配置 DNS 并将您自己的本地服务器名称添加到路由器的 DNS 中。

# iphone - 如何制作透明的自定义标签栏？

> ID：12729571
> 
> 赞同：0
> 
> 时间：2012-10-04T14:30:36.630
> 
> 标签：iphone, objective-c, xcode, uitabbar

如何制作透明的自定义标签栏？我将背景图像设置为透明图像但标签栏有黑色图像？如何去除黑色图像？请帮我。看图片。![在此处输入图像描述](../Images/903166f6c10dc55f2ef3c2df93b601b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:40.043

试试看，创建一个图像并设置为背景 ios5=> only：

```
CGRect rect = CGRectMake(0, 0, 1, 1);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [[UIColor clearColor] colorWithAlphaComponent:0.8].CGColor);
    CGContextFillRect(context, rect);
    UIImage *transparentImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [self.tabBarController.tabBar setBackgroundImage:transparentImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:34:27.707

将 TabBar 的色调颜色设置为`clearColor`。

```
[[self tabBar] setTintColor:[UIColor clearColor]]; 
```

# hibernate - “这个”对象的标准？

> ID：12729576
> 
> 赞同：1
> 
> 时间：2012-10-04T14:31:01.607
> 
> 标签：hibernate, criteria, hibernate-criteria

我正在尝试建立以下标准：

```
public List<Domain> getDomains()
{
    Session session = sessionFactory.getCurrentSession();
    Criteria criteria = session.createCriteria( Domain.class );
    User user = userManager.getLoggedInUser();
    if ( user.getDomain().getVisibleDomains() != null && user.getDomain().getVisibleDomains().size() > 0 )
    {
        criteria.add( Restrictions.or( Restrictions.eq( /*here should be "THIS"*/, user.getDomain() ), Restrictions.in( /*here should be "THIS"*/, user.getDomain().getVisibleDomains() ) ) );
    } else
    {
        criteria.add( Restrictions.eq( /*here should be "THIS"*/, user.getDomain() ) );
    }

    return criteria.list();
} 
```

如您所知，这行不通。标准 api 中是否有任何方法可以指向“这个”实体，这是为哪个标准编写的？

指向对象“域”并让hibernate完成比较“ID”的工作会让生活变得更轻松，而不是自己编写（创建一组ID并将其放入标准中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:58:07.820

```
// convert user.getDomain().getVisibleDomains() in
List<long> visibleDomainIds = 

Criteria criteria = session.createCriteria(Domain.class);
    .add(Restrictions.or(
        Restrictions.eq("id", user.getDomain().getId()), 
        Restrictions.in("id", visibleDomainIds))); 
```

# java - 自定义/扩展 Liferay 忘记密码页面

> ID：12729582
> 
> 赞同：2
> 
> 时间：2012-10-04T14:31:07.083
> 
> 标签：java, liferay

任何人都有自定义 ForgotPasswordAction 的解决方案吗？我的最终目标是允许用户输入用户名或电子邮件，以便能够找回他们忘记的密码。我已经覆盖了 ForgotPassword.java 中的 getUser(ActionRequest request) 方法，如下所示：

```
protected User getUser(ActionRequest actionRequest)
            throws Exception {

            ThemeDisplay themeDisplay = (ThemeDisplay)actionRequest.getAttribute(
                WebKeys.THEME_DISPLAY);

            //CUSTOM
            String fgtPass = ParamUtil.getString(actionRequest, "fgtpass");
            String authType = null;

            if (Validator.isNull(authType)) {
                Company company = PortalUtil.getCompany(actionRequest);
                authType = company.getAuthType();
            }

            User user = null;

            if ( fgtPass.indexOf("@") != -1 && fgtPass.indexOf(".") != -1 ) {
                //If the login looks like an email, use the email authType constant.
                authType = CompanyConstants.AUTH_TYPE_EA;
                user = UserLocalServiceUtil.getUserByEmailAddress(
                    themeDisplay.getCompanyId(), fgtPass);
            } else {
                //If it doesn't look like an email, use the screen name authType constant.
                authType = CompanyConstants.AUTH_TYPE_SN;
                user = UserLocalServiceUtil.getUserByScreenName(
                        themeDisplay.getCompanyId(), fgtPass);
            } 

            //End CUSTOM

            return user;
        }
    } 
```

这能够根据初始忘记密码屏幕上的屏幕名称或电子邮件对用户进行身份验证，但是一旦进入提醒查询页面，它就无法处理用户。我很确定我不能这样做，因为 fgtPass 字段仅存在于初始忘记密码屏幕上，而不存在于查询页面上。有什么办法可以保留这个用户吗？这是对应的.jsp：

```
<%
User user2 = (User)request.getAttribute(ForgotPasswordAction.class.getName());

if (Validator.isNull(authType)) {
    authType = company.getAuthType();
    System.out.println(authType);
}

if (user2 == null) {
    System.out.println("User is null.");
} else {
    System.out.println(user2.getScreenName());
}

%>

<portlet:actionURL var="forgotPasswordURL">
    <portlet:param name="saveLastPath" value="0" />
    <portlet:param name="struts_action" value="/login/forgot_password" />
</portlet:actionURL>

<aui:form action="<%= forgotPasswordURL %>" method="post" name="fm">
    <portlet:renderURL var="redirectURL" />

    <aui:input name="redirect" type="hidden" value="<%= redirectURL %>" />

    <liferay-ui:error exception="<%= CaptchaTextException.class %>" message="text-verification-failed" />
    <liferay-ui:error exception="<%= NoSuchUserException.class %>" message='<%= "the-" + TextFormatter.format(authType, TextFormatter.K) + "-you-requested-is-not-registered-in-our-database" %>' />
    <liferay-ui:error exception="<%= RequiredReminderQueryException.class %>" message="you-have-not-configured-a-reminder-query" />
    <liferay-ui:error exception="<%= SendPasswordException.class %>" message="your-password-can-only-be-sent-to-an-external-email-address" />
    <liferay-ui:error exception="<%= UserEmailAddressException.class %>" message="please-enter-a-valid-email-address" />
    <liferay-ui:error exception="<%= UserReminderQueryException.class %>" message="your-answer-does-not-match-what-is-in-our-database" />

    <aui:fieldset>
        <c:choose>
            <c:when test="<%= user2 == null %>">

                <% System.out.println("Enter Test"); %>

                <%
                String loginParameter = null;

                if (authType.equals(CompanyConstants.AUTH_TYPE_EA)) {
                    loginParameter = "emailAddress";
                    System.out.println(loginParameter);
                }
                else if (authType.equals(CompanyConstants.AUTH_TYPE_SN)) {
                    loginParameter = "screenName";
                    System.out.println(loginParameter);
                }
                else if (authType.equals(CompanyConstants.AUTH_TYPE_ID)) {
                    loginParameter = "userId";
                    System.out.println(loginParameter);
                }

                String loginValue = ParamUtil.getString(request, loginParameter);
                %>

                <aui:input name="step" type="hidden" value="1" />

                <aui:input label="login-screen-name-or-email" name="fgtpass" size="30" type="text" value="<%= loginValue %>"  />

                <aui:button-row>
                    <aui:button type="submit" value='<%= PropsValues.USERS_REMINDER_QUERIES_ENABLED ? "next" : "send-new-password" %>' />
                </aui:button-row>

                <% System.out.println("The login value is: " + loginValue); %>

            </c:when>

            <c:when test="<%= (user2 != null) && Validator.isNotNull(user2.getEmailAddress()) %>">
                <aui:input name="step" type="hidden" value="2" />

                <%
                if (user2!=null) {
                    System.out.println("Step 2 " + authType);
                }

                %>

                <aui:input name="emailAddress" type="hidden" value="<%= user2.getEmailAddress() %>" />

                <% System.out.println(user2.getEmailAddress()); %>

                <c:if test="<%= Validator.isNotNull(user2.getReminderQueryQuestion()) && Validator.isNotNull(user2.getReminderQueryAnswer()) %>">
                    <div class="portlet-msg-info">
                        <%= LanguageUtil.format(pageContext, "a-new-password-will-be-sent-to-x-if-you-can-correctly-answer-the-following-question", user2.getEmailAddress()) %>
                    </div>

                <% System.out.println(user2.getReminderQueryAnswer()); %>

                    <aui:input label="<%= user2.getReminderQueryQuestion() %>" name="answer" type="text" />
                </c:if>

                <c:choose>
                    <c:when test="<%= PropsValues.USERS_REMINDER_QUERIES_REQUIRED && !user2.hasReminderQuery() %>">
                        <div class="portlet-msg-info">
                            <liferay-ui:message key="the-password-cannot-be-reset-because-you-have-not-configured-a-reminder-query" />
                        </div>
                    </c:when>
                    <c:otherwise>
                        <c:if test="<%= PropsValues.CAPTCHA_CHECK_PORTAL_SEND_PASSWORD %>">
                            <portlet:actionURL windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>" var="captchaURL">
                                <portlet:param name="struts_action" value="/login/captcha" />
                            </portlet:actionURL>

                            <liferay-ui:captcha url="<%= captchaURL %>" />
                        </c:if>

                        <aui:button-row>
                            <aui:button type="submit" value='<%= company.isSendPasswordResetLink() ? "send-password-reset-link" : "send-new-password" %>' />
                        </aui:button-row>
                    </c:otherwise>
                </c:choose>
            </c:when>
            <c:otherwise>
                <div class="portlet-msg-alert">
                    <liferay-ui:message key="the-system-cannot-send-you-a-new-password-because-you-have-not-provided-an-email-address" />
                </div>
            </c:otherwise>
        </c:choose>
    </aui:fieldset>
</aui:form>

<liferay-util:include page="/html/portlet/login/navigation.jsp" />

<aui:script>
    Liferay.Util.focusFormField(document.<portlet:namespace />fm.<portlet:namespace /><%= (user2 == null) ? "emailAddress" : "answer" %>);
</aui:script> 
```

有什么线索吗？

# java - Strassen 算法的矩阵分区

> ID：12729588
> 
> 赞同：1
> 
> 时间：2012-10-04T14:31:20.280
> 
> 标签：java, arrays, strassen

假设我有一个 NxN 矩阵，其中包含 1 到 10 范围内的随机整数。现在，我想调用 `PROC(A(1:n/2, 1:n/2)+A(n/2+1:n, n/2+1:n)...`其中 n 是矩阵的大小。换句话说，我想从 A 的第一行和第一列开始创建一个子矩阵，直到 A 的一半大小，然后将其添加到一个子矩阵，该子矩阵从 A 的一半大小加一开始，直到结束一种。

我使用的分区函数是这样的：

```
public Matrix partition(int rowStart, int rowEnd, int colStart, int colEnd) {
    // int r = 0;
    // int c = 0;
    if (this.N%2 != 0) throw new RuntimeException("Illegal matrix dimensions.");
    Matrix C = new Matrix((this.N)/2);
    for (int i=rowStart-1; i<rowEnd; i++) {
        for (int j=colStart-1; j<colEnd; j++) {
            C.data[i][j] = this.data[i][j];
            // C.data[r][c] = this.data[i][j];
            c++;
        }
        r++;
    }
    return C;
} 
```

现在，这适用于查找给定矩阵左上角 ( `Matrix C = m.partition(1, m.size()/2, 1, m.size()/2);`) 的子矩阵。

```
 9.00     5.00     0.00     3.00
 0.00     7.00     8.00     3.00
 9.00     3.00    10.00     8.00
 0.00     6.00     2.00     0.00

 9.00     5.00
 0.00     7.00 
```

但是，当我尝试获取另一个子矩阵 ( `Matrix D = m.partition(m.size()/2+1, m.size(), m.size()/2+1, m.size());`) 时，我得到一个`ArrayIndexOutOfBoundsException: 2`. 我尝试向我的分区函数添加单独的行和列计数器，但它给出了相同的错误。如何修改我的分区函数以处理所有输入并仍然提供正确的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:35:44.657

```
C.data[i][j] = this.data[i][j];<-- Culprit 
```

`i`is`rowStart-1`和 j 是`rowEnd-1`你需要的`i`并且`j`从 0 开始`C.data`

```
for (int i=rowStart-1,p=0; i<rowEnd; i++,p++) {
        for (int j=colStart-1,q=0; j<colEnd; j++,q++) {
            C.data[p][q] = this.data[i][j];
        }
    } 
```

# java - 更新具有延迟加载属性的实体后，JOIN FETCH 无效

> ID：12729589
> 
> 赞同：0
> 
> 时间：2012-10-04T14:31:20.670
> 
> 标签：java, jpa, persistence, lazy-loading, openjpa

我们有这样的实体：

```
public User {
    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinColumn(name = "user_id", insertable = true, updatable = true)
    @ElementDependent
    private List<Item_x> item_x_list = new ArrayList<Item_x>();
}

public Item_x {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id", insertable = true, updatable = true)
    @Element(name = "user_id", required = false)
    private Users user;
} 
```

每当我向 User.item_x_list 添加/删除项目，然后使用 em.merge(User.INSTANCE) 持久化 User 实体时，Item_x.user 属性为 NULL。

我正在使用 JOIN FETCH 查询加载 Item_x.user 属性，以确保加载该属性（当我需要它时）。但是：如果您对用户实体执行了合并，即使使用 FETCH JOIN，Item_x.user 属性也是 NULL。

我试图通过刷新 Item_x.INSTANCE 来解决，但是当我打电话时：

```
em.refresh(Item_x.Instance); 
```

=> 用户为空。

查看数据库我当然可以看到 Item_x 中的用户不是空的。

如何强制 OpenJPA 在 Item_x 中正确加载用户？为什么 OpenJPA 没有正确填充 Item_x.user 属性/忽略 JOIN FETCH 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:38:57.027

看起来问题在于您创建了两个单向关系而不是双向关系。您的一个类需要定义与另一个类的 mappedBy 关系，该关系将另一个类定义为关系的“所有者”。例如，您可以更改上面的示例以将 Item_x 定义为所有者，如下所示：

```
public User {
    @OneToMany(targetEntity = Item_x.class, mappedBy = "user", fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @ElementDependent
    private List<Item_x> item_x_list = new ArrayList<Item_x>();
}

public Item_x {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id", insertable = true, updatable = true)
    @Element(name = "user_id", required = false)
    private Users user;
} 
```

[OpenJPA 文档](http://openjpa.apache.org/builds/1.0.3/apache-openjpa-1.0.3/docs/manual/jpa_overview_meta_field.html#jpa_overview_meta_mappedby)中提供了更多信息，但它们缺少可以使其更清晰的示例。

# c# - 刷新打开新选项卡/窗口的页面

> ID：12729592
> 
> 赞同：0
> 
> 时间：2012-10-04T14:31:25.863
> 
> 标签：c#, jquery, asp.net-mvc, new-window

我目前正在编写一个使用 MVC 3 处理我们公司计费的内部应用程序。

Finance 的要求之一是用户可以通过页面上的选项卡控件访问特定客户的属性（一对多关系）。当他们想要编辑或删除属性时，他们希望编辑/删除屏幕出现在新选项卡或窗口中。

如果他们决定删除新选项卡/窗口中的属性，我如何刷新第一个选项卡/窗口，以便他们无法选择最近删除的属性？

**编辑：**我忘了提到当他们完成编辑/删除属性时，选项卡/窗口会自动关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:13:56.863

是时候回答我自己的问题了，基于对讨论 beforeunload 事件[的另一个问题的回答。](https://stackoverflow.com/questions/1631959/browser-window-close-event#163200404)

因此，我通过执行以下脚本连接了 beforeunload 事件以在窗口的开启器上进行刷新：

```
 $(window).bind("beforeunload", function () {
      window.opener.location.reload(true);
 }) 
```

漂亮，干净，简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:34:26.927

您可以使用 ajax 调用刷新页面

```
$(document).ready(function(){
   setInterval(loading(),1000);

function loading(){
 $("#loaddiv").load("your url");
}

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:34:23.697

如果对话框是浏览器窗口，您可以通过以下方式刷新父级（打开对话框的窗口）：

```
window.parent 
```

然后，解决方案是父级中的一个 javascript 函数，用于刷新元素列表：

```
function getClientProperties(int idClient) { ajax refresh on the list } 
```

当用户编辑或删除一个属性时，您只需在模式中调用父函数 getClientProperties() 通过以下方式传递 idClient（或引用客户端的属性）：

```
window.parent.getClientProperties(idClient) 
```

如果模态框是同一页面内的 div，例如通过 jquery 打开，则解决方案更容易，因为您只需在用户编辑或删除属性时刷新或控制元素。

# c# - 方法 'protectDvar' 没有重载需要 2 个参数

> ID：12729599
> 
> 赞同：0
> 
> 时间：2012-10-04T14:31:40.077
> 
> 标签：c#, .net

我有问题“方法 'protectDvar' 没有重载需要 2 个参数”

下面是代码片段：

```
private void protectDvar<T>(Entity client, string dvar, T value) 
```

调用的错误：

`protectDvar<string>("r_glow", "1");`

请帮助我对不起英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:34:15.153

`Entity client`从参数中删除或在方法调用中添加此参数`protectDvar(client, "r_glow", "1");`

# java - 在基于命令行的计算器程序中处理输入的最佳实践是什么？

> ID：12729602
> 
> 赞同：1
> 
> 时间：2012-10-04T14:31:45.320
> 
> 标签：java, string, parsing, command-line-interface

哟 - 试图回到 java 所以决定创建一个计算器。

它应该像这样工作：

1) 以字符串的形式从用户那里获取输入 -> 这个输入存储为字符串，例如：12+89

2）根据运算符位置拆分字符串，并确保在此操作之前的任何内容都转换为整数并存储

3）一旦字符串通过，计算值

我很确定我让这比实际情况更复杂：p 这是到目前为止的代码：

```
// Split String, count digits in string
public static void spitStrg() {
    int numDigits = 0;
    int numOperators = 0;
    for (int i = 0; i < input.length(); i++) {
        if (Character.isDigit(input.charAt(i))) {
            numDigits++;
        }
        else if (input.charAt(i) == '+') {
            System.out.println( "Position of operator: "+i);
            numOperators++;
        }
    }
    System.out.println("Number of Digits: "+numDigits);
    System.out.println("Number of Operators: "+numOperators);
}

// Create a number from cut off point
public static void createNum(int startPoint, int operatorPosition) {
    String tempNum = "";

    for (int j = startPoint; j < operatorPosition; j++) {
        tempNum = tempNum + input.charAt(startPoint);
    }
} 
```

有没有人对如何处理这个问题有任何其他建议？即一次要求一个数字，然后是运算符或将所有内容存储在向量中以反映越来越多的数字和运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:37:35.147

你为什么不检查一些现有计算器的源代码？也许这些会让你收集一些关于什么是好的方法的想法。

我在之前浏览过的 sourceforge 上找到的一个例子是：

[http://sourceforge.net/projects/jcalcadvance/](http://sourceforge.net/projects/jcalcadvance/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:44:48.273

不确定这是否适合您。（或作弊？）

您只需让用户将整个表达式输入为字符串。`23+33-34*2^2`

那么你可以：

```
try {
        final ScriptEngine engine = new ScriptEngineManager().getEngineByName("js");
        final Object result = engine.eval("23+33-34*2^2");
        System.out.println(result);
    } catch (final ScriptException e) {

        e.printStackTrace();
    } 
```

运行上面的代码，会给你：

```
-10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:50:39.057

看看 Effective Java 中的 Enum 类，书 bu Joshua Bloch to manage operator

如果您的操作有限，您可以使用

```
String[] readInput = inputString.split("+|-|*|/|%").trim(); 
```

然后运算符在数字之间
- numberOne 从零到 readInput [0] 的大小 - numberTwo
开头由`inputString.index(readInput[1]) + readInput[1].length`

运算符可以在 `inputString.subtring(endOfReadInput[0],indexOfReadInput[1]).trim();`

这个练习很有趣，可以了解拆分、子串和其他字符串工具的强大功能，并了解新的`Enum.class`可能性，然后您可以阅读其他链接以了解如何使用模式设计

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:40:41.410

如果您不想使用库来解析数学表达式（这将是迄今为止最简单的方法，我的回答会假设您不想要这个），您需要实际解析，而不仅仅是字符串拆分。

在开始之前，我建议您阅读语言解析的基础知识，特别是解析基本算术。对于初学者，您可以阅读[此](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&sqi=2&ved=0CCoQFjAB&url=http://www.cs.cornell.edu/courses/cs211/2004sp/handout/lecture05parsing.pdf&ei=lqBtUPW-JKem0QXIyIGwCQ&usg=AFQjCNHSUOO76zJsgczvpMFd1YFcIcNKHQ&sig2=mG1xizh9WpzLlYIt2yYb1w)pdf。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T14:48:52.233

我不会强迫用户输入整个字符串，这是一种糟糕的体验。为什么不像普通计算器那样做呢？当输入进来时即时计算结果。所以输入一个新的操作符就完成了当前的操作。

所以逐个字符地阅读 - 在无限循环中是这样的。

```
while(Character.isDigit(input.charAt(0)) {
    operand += digitPosition*input.charAt(0);
    digitPosition*=10;
}

digitPosition = 1;

//broke out of loop - operator received
if (isValidOperator(input.charAt(0))) {
    //store operator and await another operand (if first operation only), compute result, or throw invalid operator exception
} 
```

# iphone - 如何在 MFMailComposer 中打开可点击的 URL

> ID：12729606
> 
> 赞同：0
> 
> 时间：2012-10-04T14:31:58.407
> 
> 标签：iphone, ios, xcode, gmail, mfmailcomposeviewcontroller

我正在使用以下代码

```
if ([MFMailComposeViewController canSendMail])
        {
            MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
            picker.mailComposeDelegate = self;
            [picker setSubject:@"Check out"];
            UIImage *morphedImage = [sharedSingleton getCopy];
            NSData *myData = UIImagePNGRepresentation(morphedImage);
            [picker addAttachmentData:myData mimeType:@"image/png" fileName:@"RaceFaceImage"];
            [picker setMessageBody:@"I've given you a new look using my RaceFace iPhone application.  Check it out and have a good laugh.  I dare you to Race me, download the app here:<b>Sourish</b><a href='www.google.com'>itunesLink</a>" isHTML:YES];
            [self presentModalViewController:picker animated:YES];
            [picker release];
        }
        else
        {

        } 
```

我以这种方式获得 O/Pin ![MailComposer 输出](../Images/a09ed46b4655d43f765e95f279fca820.png)

我想当我点击蓝色文本时，你应该打开特定的文本，我该怎么做？

任何形式的帮助都是非常有帮助的
谢谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:37:04.587

使用此代码

```
NSString *link = [NSString stringWithFormat:@"http://www.google.com"];
            [controller setMessageBody:[NSString stringWithFormat:@"<p><font size=\"2\" face=\"Helvetica\"><a href=%@></br>%@</br></a></br></font></p>",link,@"Google"] isHTML:YES]; 
```

希望对你有帮助......

# ruby-on-rails - Ruby on Rails：令牌字段 - railscast

> ID：12729607
> 
> 赞同：6
> 
> 时间：2012-10-04T14:31:59.223
> 
> 标签：ruby-on-rails, controller

我正在尝试让令牌字段在我的应用程序上工作。

我完全按照这个视频：[http ://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)

**项目模型**

```
class Project < ActiveRecord::Base
  attr_accessible  :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech , :technols, :technol_tokens

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

attr_reader :technol_tokens

  def technol_tokens=(ids)
    self.technol_ids = ids.split(",")
  end

accepts_nested_attributes_for(:technols) 
```

**技术控制器：**

```
def index
    @technols = Technol.where("tech like ?", "%#{params[:q]}%")

    respond_to do |format|
      format.html # index.html.erb
    format.json { render :json => @technols.map(&:attributes) }
    end
  end 
```

**布局/application.html.erb**

```
<!DOCTYPE html>
<html>
<head>

<div id="user_nav">
  <% if user_signed_in? %>
    Hi <%= current_user.firstname %>, Signed in as  <%= current_user.email %>.  Not you?

<%= link_to "Sign out", destroy_user_session_path, :method => :delete %>
  <% else %>
    <%= link_to "Sign up", new_user_registration_path %> or
    <%= link_to "Sign in", new_user_session_path %>
  <% end %>
</div>
<% if current_user.try(:admin?) %>
 <div class="admin_button">
<%= button_to "ADMIN", users_path, :class => "button", :method => "get" %>

</div>

<% end %>
  <title>ExceptionApp</title>

<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->
  <%= stylesheet_link_tag    "application", "token-input-facebook" %>
  <%= csrf_meta_tags %>
<link href="application.css" rel="stylesheet" />

<meta name="viewport" content="width=device-width; initial-scale=1.0">

<link rel="SHORTCUT ICON"
       href="/assets/minilogo.png">

<%= link_to(image_tag("/assets/logo.png"), projects_path, :class => "logow") %>

</head>
<body>

<%= yield %>

<style>
.debug {

position:absolute; right:0px; bottom:0px;

}
</style>
<div class ="debug">
<%= debug(params) %>
<div>

<%= content_tag(:div, flash[:error], :id => "flash_error") if flash[:error] %>
<%= content_tag(:div, flash[:alert], :id => "flash_alert") if flash[:alert] %>
<!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <%= javascript_include_tag :defaults, "application", "jquery.tokeninput" %>

  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

</body>
</html> 
```

**项目/new.html.erb**

```
<%= stylesheet_link_tag "new" %>

<h1>Create New Project</h1>

<%= stylesheet_link_tag "form" %>

<%= form_for(@project) do |f| %>

<p>
    <%= f.label :technol_tokens, "technol" %><br />
    <%= f.text_field :technol_tokens, "data-pre" => @project.technols.map(&:attributes).to_json %>
  </p>

</BODY>
</HTML>

<div class="create_button">
<div class="actions">
    <%= f.submit "Save New Project", :class => "button",  :confirm => "Are you sure you want to save the new project?" %>
  </div>
</div>

</div> <%#= small div %>

<% end %>

<div class="back_button2">
<%= button_to "Back", projects_path , :class => "button", :method => "get" %>
</div> 
```

**application.js**编辑：

```
$(function() {
  $("#project_technol_tokens").tokenInput("/technols.json", {
    crossDomain: false,
    prePopulate: $("#project_technol_tokens").data("pre"),
    theme: "facebook"
  });
});

$(function() {
  $("#project_start_date").datepicker({dateFormat: 'dd-mm-yy'});
});

$(function() {
  $("#project_end_date").datepicker({dateFormat: 'dd-mm-yy'});
});

jQuery(function(){

jQuery('#start_date_A').datepicker({dateFormat: "dd-mm-yy"});
});

jQuery(function(){

jQuery('#start_date_B').datepicker({dateFormat: "dd-mm-yy"});
}); 
```

在我的新页面上，我有一个可以工作的 jquery datepicker 文本框。我不明白为什么同一页面上的令牌字段不起作用。

我已经按照视频大约 3 次来确保它仍然无法正常工作。唯一的区别是我将我的 javascripts 和样式表放在 assets 文件夹中，在视频中它放在 public 文件夹中。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:06:44.313

不是一个可能的错误。请尝试以下方法：

1.  检查您的 application.js 文件。您是否包含了 jquery.tokeninput.js 文件？
2.  确保application.js中jquery后需要token-input js文件
3.  检查以确保包含 CSS 文件
4.  在浏览器中，您是否在控制台中收到任何 js 错误？如果是这样，请修改问题。

**编辑**

另外，我刚刚注意到，在您的 new.html.erb 中，在 html 结束标记之后有一个 div ！

```
</BODY>
</HTML> 
```

请删除/将它们放置在适当的位置。

# c# - 保存excel 2003文件

> ID：12729611
> 
> 赞同：5
> 
> 时间：2012-10-04T14:32:06.117
> 
> 标签：c#, ms-office, excel-2003

我正在做一个简单的 c# 应用程序，它是编辑现有的 excel 2003 模板（xlt）并保存到一个新的 *.xls 文件。它像是：

```
Microsoft.Office.Interop.Excel._Application app = new Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Interop.Excel._Workbook workbook = app.Workbooks.Open("\\my_template.xlt");
Microsoft.Office.Interop.Excel._Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)workbook.Sheets[0]; 
```

然后我修改了文件内各种公式中使用的一些单元格并将模板保存到一个新文件中：

```
workbook.SaveAs("newfile.xls", Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal);
workbook.Close(true, misValue, misValue);
app.Quit();

worksheet = null;
workbook = null;
app = null; 
```

所以问题是，当新文件成功保存时，我打开它并看到使用我编辑过的单元格的公式的结果就像“#NAME”等等。当我重新打开文件时 - 一切都变好了。为什么会这样？

也许我以不正确的方式保存文件，这就是为什么我在第一次打开时看到错误？这个问题仅适用于 2003 年的办公室……正如我所承认的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:25:35.920

[如此处](https://stackoverflow.com/a/12160696/969613)所述，将枚举更改为**xlExcel8**而不是**xlWorkbookNormal**，这将以正确的格式保存。

其次，将您的引用值设置为 null 在.Net 中并没有真正做任何事情，它不像 VB6，垃圾收集器足够聪明，可以在不再使用引用时找出并清理它。

第三，如果您使用的是 .Net 4 或更高版本，则不需要为 Workbook Close 方法的可选参数提供值，因此也可以：

```
workbook.Close(true); 
```

最后，您不需要将 Worksheet 转换为 Worksheet，您可以这样做：

```
Microsoft.Office.Interop.Excel.Worksheet worksheet = workbook.Sheets[0]; 
```

最后一个想法，完成后使用 marshal 释放应用程序对象，否则 Excel 将永远停留在您的任务管理器中（也许在 try 块中执行您需要执行的操作，然后在 finally 块中执行此操作）：

```
Marshal.ReleaseComObjct(app); 
```

方法的更新版本如下：

```
Microsoft.Office.Interop.Excel._Application app = new Microsoft.Office.Interop.Excel.Application();

try
{
    Microsoft.Office.Interop.Excel._Workbook workbook = app.Workbooks.Open(@"\my_template.xlt");
    Microsoft.Office.Interop.Excel.Worksheet worksheet = workbook.Sheets[0];

    //Do stuff

    workbook.SaveAs("newfile.xls", Microsoft.Office.Interop.Excel.XlFileFormat..xlExcel8);
    workbook.Close(true);
    app.Quit();
}
finally
{
    Marshal.ReleaseComObject(app);
} 
```

# objective-c - 带有reuseIdentifier的自定义UITableViewCell没有样式？

> ID：12729612
> 
> 赞同：3
> 
> 时间：2012-10-04T14:32:06.537
> 
> 标签：objective-c, ios, uitableview

在我的表格视图中，我需要一堆（5-6 种）不同的单元格。所有项目都有相同的视觉布局，但在内容方面（标签名称、图片和颜色），它们有很大不同。

所以我有一个 CustomUITableViewCell 基类，它是在 Interface Builder 中设计的，具有这种通用设计。这个 CustomUITableViewCell 类服务器作为一堆单元子类的基类。我使用工厂模式从工厂类的类方法生成这些子类。这些子类没有 xib。他们为什么会有共同的设计。

现在的问题是，对于每个子类，我需要一个不同的重用标识符。所以，有人会认为让我们覆盖每个子类的默认初始化程序，并在其中调用另一个初始化程序，`initWithStyle:reuseIdentifier:`.

问题是它需要指定样式。我不能放在`nil`那里，它抱怨。但我不需要苹果的任何款式，我明明有我自己的款式，如果我想有一个库存款式，我为什么要定制设计。我只需要指定reuseIdentifier。

如果它是只读属性，如何分配重用标识符，并且似乎提供它的唯一方法是通过初始化程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T14:53:43.510

前段时间我遇到了类似的问题。我的解决方案是在（子类的）实现文件中重新声明`reuseIdentifier`为读写属性`UITableViewCell`

```
@interface MyCustomCell ()
@property(nonatomic, readwrite, copy) NSString *reuseIdentifier;
@end 
```

并使用*不同*的实例变量合成属性：

```
@implementation MyCustomCell
@synthesize reuseIdentifier = _myCustomCellReuseIdentifier; 
```

现在您可以在自定义单元格的 init 方法中进行分配`self.reuseIdentifier`。

至少它在我的情况下有效，也许你可以使用它......

# jquery - jQuery Isotope 和 Mosaic 合并解决方案

> ID：12729616
> 
> 赞同：1
> 
> 时间：2012-10-04T14:32:13.433
> 
> 标签：jquery, mosaic

我正在尝试创建类似于以下[网站的内容](http://www.cla-ude.net/)

基本上我所追求的是使用同位素来创建一个包含大量缩略图的投资组合页面。一旦用户将鼠标悬停在缩略图上，将出现（淡入）标题覆盖，然后当用户单击缩略图时，将出现照片的大版本。布局将重新排列。

到目前为止，我已经设法使用几个插件来分别实现效果......换句话说，我使用 Mosiac.js 来实现悬停效果和 Isotope.js 来实现布局。你可以看到我目前在马赛克.html和[isotope.html上的](http://jquery.ramiyahya.com/mosaic.html)[内容](http://jquery.ramiyahya.com/isotope.html)

我被困住了。我不知道如何结合这两种解决方案。我尝试过使用 CSS 类并稍微使用 jQuery。我是 jQuery 新手 :(

请帮忙！

如果您需要更多信息或问题不清楚，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:53:54.717

像这样简单的事情不需要使用mosaic.js。首先，让您的网站在功能方面使用 Isotope；不用担心那个阶段的设计微调。然后，只需在 Isotope 元素中嵌套一些带有覆盖标题的 div，并默认隐藏它们。将悬停事件附加到 Isotope 元素，显示隐藏的 div，并在查看者的鼠标悬停在 Isotope 元素上时显示它们。

但请记住，使用移动触摸屏设备的人不会看到您的悬停效果...

HTML

```
<div class="item">
    // content of the Isotope .item
    <div class="overlay">
        // content of the overlay
    </div>
</div> 
```

CSS

```
.overlay {
    display: none;
    /* other rules to style the overlay */
} 
```

jQuery

```
$(".overlay").hover(function(){
    $(this).filter(':not(:animated)').animate({ whatever you like to animate });
        }, function() {
    $(this).animate({ whatever you like to animate });
}); 
```

另请参阅[jQuery fadeToggle()](http://api.jquery.com/fadeToggle/)和[jQuery animate()](http://api.jquery.com/animate/)方法以及 show()、hide() 等方法，了解您可能希望在悬停时实现的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:58:01.710

我有完全相同的，无法弄清楚为什么我不能将它们结合起来。马赛克需要高度，而同位素具有这种动态。所以我使用：

```
$('.mosaic-block').each(function (index) {
    $(this).height($(this).find(".mosaic-backdrop").height());
}); 
```

但是 Isotope 仍然有物品放在它上面，并且标题仍然不起作用。但是，如果您想坚持使用 Mosaic，这可能会为您指明正确的方向。我要将我的代码转换为@Systembolagnet 的解决方案。请接受他的回答

# android - 根据缩放绘制不同数量的点（android）

> ID：12729621
> 
> 赞同：0
> 
> 时间：2012-10-04T14:32:43.943
> 
> 标签：android, map, android-mapview

这是我的课程：
[http](http://wklej.org/id/840949/) ://wklej.org/id/840949/ - ShopMapActivity
[http://wklej.org/id/840950/](http://wklej.org/id/840950/) - CustomMapView
我试图根据缩放绘制不同数量的点。因此，如果缩放低于 9，它应该只绘制代表引用的点。当您放大并且缩放级别高于 9 时，它应该绘制该区域内的所有点。当活动开始时，只有代表城市的点（这很好），当我放大到 9 缩放级别时，在那个区域会出现额外的点（这也很好），但是当我从那个状态缩小时，额外的点不会'不会消失，即使我正在清理地图：

```
 mapOverlays.clear();        
            mapView.getOverlays().clear();
            mapView.invalidate();
            mapView.postInvalidate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:41:33.087

您忘记清除 itemizedOverlay。您正在将其从活动叠加层列表中删除，但随后您重复将相同的点添加到 itemizedOverlay（它们已经在其中），然后将其添加到活动叠加层中。

最重要的是，只需将以下内容添加到您的代码中：

```
itemizedoverlay.clear(); 
```

行后：

```
mapView.getOverlays().clear(); 
```

如果您没有在 itemizedOvelay 中创建方法 clear()，那么是时候创建它了。

祝你好运。

# php - PHP 包含但始终保留 Flash 内容？

> ID：12729625
> 
> 赞同：0
> 
> 时间：2012-10-04T14:32:47.200
> 
> 标签：php, flash, include

是否可以让 Flash 内容（mp3 播放器）在页面之间切换时始终停留在使用 php include 的主 html 页面上？（家庭/关于/联系等）？

解决方案：我使用了 SCM 音乐播放器插件，以及用于 MP3 播放的专用 html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:46:27.797

如果您需要一个连续播放器，它不会在页面更改之间停止播放，您必须设计您的网页/应用程序才能这样做。

这些是主要的方法：

1.  在 中浏览网站内容`<iframe>`，因此播放器始终保持在顶部 [就像[Beatport](http://www.beatport.com/)以前所做的那样]；
2.  在一个小弹出窗口 [一个单独的浏览器窗口] 中打开您的播放器，然后将播放列表信息保存在每次页面加载所需的会话中；
3.  委托所有导航客户端，因此您永远不会发出完整的页面重新加载[例如像GMail那样]。

第一个选项是最肮脏的，第二个是公平的，但依靠那个小技巧[不知道它在移动环境中如何工作]，第三个是最好的，尽管它需要一个更大的*技能*来实现——没有普通的 PHP，没有凌乱的 jQuery美元海洋。

最后的想法：坚持使用`<audio>`带有 Flash 后备的 HTML 5 作为极端手段，但不要将 Flash 作为您的第一技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:49:48.050

假设您的内容设置如下：

```
<ul id="nav">
  <li><a href="/some/link">Go Here</a></li>
  <li><a href="/some/other/link">Go Here Instead</a></li>
</ul>
<div id="flash">
  <!-- mp3 player -->
</div>
<div id="content>
  <!-- main content -->
</div> 
```

我们可以告诉这些链接加载到`#content`div 中，而不是重定向整个页面。使用 jQuery：

```
$('ul#nav li a').click(function() {
  $('#content').load($(this).attr('href'));
  return false;
}): 
```

链接的内容现在将加载到`#content`div 中。显然会有影响：浏览器的 url 不会改变，内容只需要查看（不需要顶级布局），除非您使用 jQuery 的“部分加载”等。

这并不理想。我会说完全为玩家打开一个新窗口。

# ruby-on-rails-3 - CanCan Current_Client 错误

> ID：12729627
> 
> 赞同：0
> 
> 时间：2012-10-04T14:32:51.057
> 
> 标签：ruby-on-rails-3, cancan

嗨有以下设置

我有一个登录系统供客户登录系统。他们可以在系统上编辑他们的详细信息。我需要阻止他们编辑其他客户的详细信息。这可以通过更改 URL 中的 ID 来实现。

有一个命名空间，它被称为“配置文件”

我以前对系统上的用户进行过此操作，CanCan 是否仅支持 current_user 或者我可以将其更改为 current_client。当我在以下日志文​​件中收到错误时：

NameError（未定义的局部变量或方法 `current_user' for #）：

代码如下：

应用控制器

```
protect_from_forgery  
  helper_method :current_client

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to profile_url
  end

  private

  def current_client
    @current_client ||= Client.find(session[:client_id]) if session[:client_id]
  end

  def logged_in?
    unless session[:client_id]
      flash[:notice] = "You need to log in first."
      redirect_to login_path
      return false
    else
      return true
    end
  end 
```

配置文件/clients_controller

```
 before_filter :logged_in?
  load_and_authorize_resource

  # GET /clients/1/edit
  def edit
    @client = Client.find(params[:id])
  end

  # PUT /clients/1
  # PUT /clients/1.json
  def update
    @client = Client.find(params[:id])

    respond_to do |format|
      if @client.update_attributes(params[:client])
        format.html { redirect_to [:profile,@client], :notice => 'Client was successfully updated.' }
        format.json { head :ok }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @client.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

知道为什么会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:16:28.750

使用了以下内容：

```
 helper_method :current_user

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to profile_url
  end

  private

  def current_user
    @current_user ||= Client.find(session[:client_id]) if session[:client_id]
  end 
```

# css - 浮动div两列布局空格

> ID：12729629
> 
> 赞同：4
> 
> 时间：2012-10-04T14:32:56.960
> 
> 标签：css, html, css-float

我有 X 个帖子，每个帖子都有固定的宽度和未知的高度，并希望它们位于单个 div 包装器中的两列中。但是，当我将它们全部放在左侧浮动时，就会发生这种情况。

![在此处输入图像描述](../Images/4773a35fb3458d55588d16f68efdb5bc.png)

如何删除空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:37:16.960

添加 clear:right 到偶数块和 clear:left 到奇数块！

```
<style type="text/css">
    .odd { float: left; clear: left; }
    .even { float: right; clear: right; }
</style>

<div class="odd">content</div>
<div class="even">content</div>
<div class="odd">content</div>
<div class="even">content</div>
<div class="odd">content</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:48:53.337

利用`:nth-child(odd) {clear:both;}`

**[工作演示](http://jsbin.com/ajitir/3/edit)**

**CSS**

```
.outer {border:solid #f00; padding:10px;overflow:auto}
.outer div{border:solid 1px #f00; float:left; margin:5px}
.outer div:nth-child(odd) {clear:both;} 
```

**HTML**

```
<div class="outer">
  <div >
    content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br></div>
<div >
     content content content content <br>content content content content <br>content content content  content <br>
</div>
<div >
     content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>
</div>
<div>
     content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>
</div>
<div >
     content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>content content content content <br>
</div>
  </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:37:15.397

尝试在第二个块之后添加以下内容：

```
<div style="clear:both">&nbsp;</div> 
```

它应该可以解决问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T14:36:51.210

制作一个`left`div 容器和一个`right`div 容器并将您的帖子添加到这些容器中，而不是简单地使用`float: left`...

# ios6 - UISearchBar 不接受键盘输入但在 iOS 6 上接受 Siri 输入

> ID：12729633
> 
> 赞同：5
> 
> 时间：2012-10-04T14:33:14.343
> 
> 标签：ios6, uisearchbar, uisearchdisplaycontroller

我前段时间写了一个使用导航控制器的应用程序。推送的视图之一包含 UISearchDisplayController 和 UISearchBar。该代码在 iOS 5 之前完美运行。如果我将其编译为针对 iOS 6，则在选择搜索栏时会出现键盘，但搜索栏似乎不接受/接收键盘输入；但是它确实接受 Siri 的输入，然后正确执行搜索。无论我是否在加载视图时将搜索栏设置为第一响应者（ViewDidLoad 方法），都会发生这种情况。如果我将代码重新编译为以 iOS5 为目标，它会再次起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:25:12.460

我遇到了同样的问题类似的问题。就我而言，问题在于包含 UISearchBar 的窗口不是“关键窗口”。我通过在我的应用程序委托的窗口上调用 makeKeyWindow 解决了这个问题。

```
[[[MyAppDelegate App] window] makeKeyWindow]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:04:26.960

我遇到了同样的问题并找到[了这个](https://stackoverflow.com/a/12504575/1113385)解决方案，它对我来说非常有效！这种行为发生在 UITextView 和 UISearchBar。希望能帮助到你！

# eclipse - FAIL - 在上下文路径 /website 部署应用程序但上下文无法启动？

> ID：12729635
> 
> 赞同：1
> 
> 时间：2012-10-04T14:33:31.783
> 
> 标签：eclipse, tomcat7

我一直在尝试使用 TOMCAT WEB APPLICATION MANAGER 部署 web.xml 文件，

上下文路径（必需）：/website
XML 配置文件 URL：C:\DOCUME~1\Graeme\workspace\website\website.xml
WAR 或目录 URL：

当我部署时，我收到一条消息：FAIL - Deployed application at context path /website but context failed to start

因此问题是为什么我无法成功部署我的应用程序

# php - 使用 PHP 对多个用户和多个表进行 MySQL 查询

> ID：12729638
> 
> 赞同：0
> 
> 时间：2012-10-04T14:33:37.570
> 
> 标签：php, mysql, loops

我在弄清楚如何进行查询以实现以下情况时遇到了一些麻烦。我希望用户能够查看他们的事件和活动（两个不同的表），以及他们所属组织的任何事件/活动，按日期排序

事件表

```
eventID |  eventTitle   | eventBy   | eventDate
1           Event 1        1          2012/10/11
2           Event 2        2          2012/10/08
3           Event 3        3          2012/10/05 
```

活动表

```
postID     |   postTitle  |  postBy  |    postDate
  1            activity 1       1          2012/10/07
  2            activity 2       2          2012/10/09 
```

组织成员表

```
orgID  |  userID
 2             1            //userID 1 is a member of groupID 2 
```

无论如何，如果用户 ID 1 正在查看页面，我试图让结果看起来如下

```
 Title            By            Date
Activity 1        1          2012/10/07
Event 2           2          2012/10/08
Activity 2        2          2012/10/09
Event 1           1          2012/10/11 
```

此查询仅显示我的帖子，而不是我所属的组织。

```
select eventTitle as title, eventID as ids, eventBy as byUser, users.username, eventDate as date from events
inner join users on users.userid = events.eventBy
where eventBy in (select distinct g1.userID from orgMembers g1
                 inner join orgMembers g2 on g1.orgID = g2.orgID
                 where g2.userID = '$id') 
                 or eventBy = '$id' 

UNION 

select postTitle as description, postID as ids, postBy as byUser, users.username, postDate as date from posts
inner join users on users.userid = posts.postBy
where postBy in (SELECT distinct g1.userID FROM orgMembers g1
                 inner join orgMembers g2 on g1.orgID = g2.orgID
                 where g2.userID = '$id') 
                 or postBy = '$id'

Order BY date" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:41:08.190

使用

```
WHERE eventby IN 
```

将 1 替换为您的用户 ID

您可能想使用`UNION`从 2 个表事件和活动中进行选择

（选择 eventInfo 作为 Ttile，eventBy 作为 By，eventDate 作为 Date from Events where Eventby in (SELECT userid FROM groups WHERE groupid = (SELECT groupid FROM groups WHERE userid = 1))） UNION（选择 activityInfo 作为 Ttile，activityInfo 作为 By，activityDate as Date from 活动 where activityBy in (SELECT userid FROM groups WHERE groupid = (SELECT groupid FROM groups WHERE userid = 1))) Order BY Date

对活动做同样的事情，做联合和排序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:16:33.763

如果一个用户可以“无组” ，则必须添加`OR eventBy = 1` and 。`OR activityBy = 1`如果所有用户至少有一个组，您可以将其删除

```
SELECT eventInfo as title, eventBy as By, eventDate as Date
FROM event
WHERE eventBy IN (select distinct g1.userId from groups g1
                   inner join groups g2 on g1.groupId = g2.groupId
                   where g2.userId = 1)
OR eventBy = 1 

UNION
SELECT activityInfo as title, activityBy as By, activityDate as Date
FROM Activity
WHERE activityBy = (select distinct g1.userId from groups g1
                   inner join groups g2 on g1.groupId = g2.groupId
                   where g2.userId = 1)
OR activityBy = 1 
```

# html - 图像在屏幕上滑动 - CSS3

> ID：12729639
> 
> 赞同：1
> 
> 时间：2012-10-04T14:33:41.203
> 
> 标签：html, animation, css

有谁知道我在哪里可以找到从屏幕左侧滑入的图像示例，在中间停了几秒钟，然后继续穿过页面。

谢谢亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:06:31.817

您可以使用[**关键帧动画**](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)来做到这一点，如下所示：

# [*例子*](http://dabblet.com/gist/3834617)

**HTML**：

```
<img src='image.jpg'> 
```

**CSS**：

```
body { overflow: hidden; }
img {
    position: absolute;
    left: -100%;
    margin: 7em -244px;
    animation: slide 4s infinite;
}
@keyframes slide {
    0% { left: -150%; }
    35% { left: 50%; }
    65% { left: 50%; }
    100% { left: 150%; }
} 
```

# sml - 为什么运算符和操作数的类型不匹配？

> ID：12729640
> 
> 赞同：0
> 
> 时间：2012-10-04T14:33:44.793
> 
> 标签：sml, smlnj

为什么会出现 tycon mismatch operator 和 operator do not agree 错误？任何解决方案的建议？

```
fun reve (x:string) = implode o rev o explode x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:50:22.460

问题在于，那个函数应用的绑定比`o`.

也就是说，它被解释为：

```
fun reve x = implode o rev o (explode x); 
```

由于`explode x`是一个`char list`而不是一个函数，这将失败。

您可以通过正确放置括号来解决此问题

```
fun reve x = (implode o rev o explode) x; 
```

或者用无点表示法写它：

```
val reve = implode o rev o explode 
```

也可以定义一个右关联函数应用运算符，通常称为`$`，它可以在没有括号的情况下执行您想要的操作：

```
(* Right-associative function application *)
infixr $
fun f $ x = f x;

fun reve x = implode o rev o explode $ x 
```

# c++ - istream_iterator 初始化向量

> ID：12729648
> 
> 赞同：0
> 
> 时间：2012-10-04T14:34:07.087
> 
> 标签：c++, vector, istream-iterator

我正在尝试从 ifstream **fin**读取并使用 istream_iterators将其放入向量**vec1中。**我到处都看到了这些东西：

```
vector<int> vec1((istream_iterator<int>(fin)),istream_iterator<int>); 
```

我想保留 istream_iterators 供以后使用，所以我认为“这应该可以工作”：

```
istream_iterator<int> iit(fin);
istream_iterator<int> eos;
vector<int> vec1(iit,eos); 
```

...它不起作用=（我的向量完全为空。（我从中读取的文件是一个txt文件，只有数字）。

**编辑：** txt 如下所示：

```
06351784798452318596415234561
6641321856006 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:27.113

根据评论，第一个数字序列大于 a 的最大值，`int`因此输入操作将失败，导致`vector`剩余为空。

`int`您可以使用[`std::numeric_limits`](http://en.cppreference.com/w/cpp/types/numeric_limits)模板获取 等的最大值：

```
std::cout << std::numeric_limits<int>::max() << "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:40:48.423

作为中间步骤，您可能想立即尝试迭代序列以查看是否存在某些内容（可能没有）：

```
while (iit != eos) {
    std::cout << *iit++ << '\n';
} 
```

如果这没有打印任何内容，请检查您的流最初是否处于良好状态：

```
if (!fin) {
    std::cout << "file not opened!\n";
} 
```

如果流仅包含数字且没有空格，则它可能会溢出并导致读取`int`失败。

# .net - 进入不适用于 MVC4 的 .NET 源代码

> ID：12729657
> 
> 赞同：0
> 
> 时间：2012-10-04T14:34:34.413
> 
> 标签：.net, visual-studio, open-source, asp.net-mvc-4

我正在按照这篇博客文章中关于[“使用 Visual Studio 调试器进入 ASP.NET MVC 源代码”](http://weblogs.asp.net/gunnarpeipman/archive/2010/07/04/stepping-into-asp-net-mvc-source-code-with-visual-studio-debugger.aspx)的说明进行操作，但我无法让它在 MVC 4.0 上工作。

我没有收到 EULA 提示，也没有找到 MVC 的符号，因为它们在堆栈中仍然是灰色的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:38.330

从参考源站点可以看到：

[http://referencesource.microsoft.com/netframework.aspx](http://referencesource.microsoft.com/netframework.aspx)

源服务器当前不提供 MVC4。

现在，如果你想调试它，你必须下载源代码并自己编译。

[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)

# asp.net - VS2010 中未显示 web.config 转换

> ID：12729662
> 
> 赞同：7
> 
> 时间：2012-10-04T14:34:39.097
> 
> 标签：asp.net, visual-studio-2010, web-config

我刚刚在我的 Web 应用程序中添加了三个配置。然后我右键单击 web.config 并选择“添加配置转换”。这三个文件已创建，但解决方案资源管理器中的 web.config 旁边没有扩展器，并且在部署时未应用转换（构建部署包）。

我已经重建了解决方案，将文件拖到解决方案资源管理器中，添加>现有项目，然后关闭/重新打开 VS。还是没有出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T15:39:31.267

VB又来了。除非选择“显示所有文件”，否则 VB 应用程序不会显示它们。杰出的。

# android - 持续通知在 ics 上消失

> ID：12729669
> 
> 赞同：1
> 
> 时间：2012-10-04T14:34:49.277
> 
> 标签：android

在 ICS 中，安装后持续通知会在一段时间后消失，并且当调用任何其他通知时，之前的通知也会出现并且一切正常。它只发生在 ICS 上，以前的版本运行良好。ICS 中的通知有什么新内容吗？

# .net - SQL Server：使用名为“PLAN”的列的查询执行但抛出错误

> ID：12729671
> 
> 赞同：0
> 
> 时间：2012-10-04T14:34:56.413
> 
> 标签：.net, sql-server-2008

我们有一个表，其中有一列名为`PLAN`，它是一个关键字。我们正在使用方括号，但查询仍然会引发错误。奇怪的是查询仍然执行。当然，该错误会使 .net 网络上下文爆炸。有任何想法吗？

```
USE [SomeDB]

UPDATE [SomeTable] 
SET [SomeTable].[PLAN] = 2 
WHERE [SomeTable].[RECNUM] = 1 
```

微软 SQL Server 2008 (SP3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:38:15.850

[它应该工作](http://sqlfiddle.com/#!3/a48b9/1)。一定是别的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:46:44.067

试试这个>

```
UPDATE [SomeTable] SET [PLAN] = 2 WHERE [RECNUM] = 1 
```

# html - 旋转标签（变换：旋转）定位

> ID：12729677
> 
> 赞同：0
> 
> 时间：2012-10-04T14:35:09.010
> 
> 标签：html, css, css-transforms

到目前为止，这是我当前的代码：

[http://jsfiddle.net/VsGMa/2/](http://jsfiddle.net/VsGMa/2/) 如您所见，选项卡的位置不正确。

这是运行良好的“水平”版本：

[http://jsfiddle.net/HHg7S/](http://jsfiddle.net/HHg7S/)

关于可能出了什么问题或如何正确对齐的任何想法？

transform-origin 现在是 0% 100% - 也尝试了一堆其他值，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:37:53.177

试试这个，

```
<div class="slick-tab slick-tab-270 slick-tab-open" style="background-image: none; background-color: rgb(102, 255, 0); border: 3px solid rgb(0, 0, 0); padding: 0px ! important; -moz-transform-origin: 0% 100%; -moz-transform: rotate(270deg); text-align: center; height: auto; position: absolute; margin-left: -3px; width: 100px; margin-top: 68px;"> 
```

只是包含`margin-top:68px;`在这个 div 中。

查看这个：http: [//jsfiddle.net/VsGMa/3/](http://jsfiddle.net/VsGMa/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:45:55.500

采用

```
transform-origin: 0 0;
transform: rotate(-90deg) translateX(-100%) translateY(-100%); 
```

# [**演示**](http://jsfiddle.net/VsGMa/5/)

无论选项卡的大小如何，都可以使用。

# model-view-controller - 让 Zend 找到我的自定义应用程序异常

> ID：12729679
> 
> 赞同：0
> 
> 时间：2012-10-04T14:35:09.207
> 
> 标签：model-view-controller, zend-framework, exception

我有一个类似于此线程的问题：[throw-exceptions-from-model-view-controller-in-a-zend-framework-application][1]

我有一个像这样的标准 MVC 结构：

```
/application
/myapp
    /controllers
    /forms
    /models
    /exceptions
        Default.php (class Myapp_Exception_Default extends Zend_Exception) 
```

无论我尝试做什么：

```
throw new Myapp_Exception_Default(); 
```

我得到：

```
Fatal error: Class 'Myapp_Exception_Default' not found 
```

我的问题是如何让 Zend 找到我的自定义异常？我没有找到任何配置选项来声明它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:38:28.657

你应该有这样的东西：

```
boostrap.php 
```

有了这个内容：

```
...

protected function _initAutoload()
{
    // Add autoloader empty namespace
    $autoLoader = Zend_Loader_Autoloader::getInstance();
    $autoLoader->suppressNotFoundWarnings(true);//http://zend-framework-community.634137.n4.nabble.com/Trouble-using-Gdata-Calendar-td675383.html
    $autoLoader->registerNamespace('Gestionale_');
    $resourceLoader = new Zend_Loader_Autoloader_Resource(
        array(
            'basePath' => APPLICATION_PATH,
            'namespace' => '',
            'resourceTypes' => array(
                'form' =>
                    array(
                        'path' => 'forms/',
                        'namespace' => 'Form_',
                    ),
                'model' =>
                    array(
                        'path' => 'models/',
                        'namespace' => 'Model_'
                    ),
            ),
    ));
    // Return it so that it can be stored by the bootstrap
    return $autoLoader;
} 
```

...

```
\library\Gestionale\Exceptions\Exception.php 
```

使用此代码

```
<?php
/**
 * Custom exception class that logs messages
 */
class Gestionale_Exceptions_Exception extends Exception
{
...
} 
```

然后使用

```
throw new Gestionale_Exceptions_Exception('Bla bla bla'); 
```

# eclipse - Eclipse：在单独的源文件夹中运行 JUnit 测试

> ID：12729692
> 
> 赞同：5
> 
> 时间：2012-10-04T14:35:26.273
> 
> 标签：eclipse, junit, osgi

我正在开发一个使用 OSGi 规范的项目，该项目的结构是将代码分布到数十个单独的捆绑文件夹中。鉴于它们位于单独的项目文件夹中，有什么方法可以在 Eclipse 中快速运行我的项目中的所有测试？我已尝试设置新的运行配置，但此选项将您限制为仅指定一个源文件夹。

我知道我可以通过 Maven 轻松运行所有测试，但我更喜欢 Eclipse 的 JUnit 插件来运行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:53:12.970

*仅从*[Eclipse CDT](https://stackoverflow.com/questions/9003337/what-installable-component-provides-launch-groups-in-eclipse/11369639#11369639)安装“启动组”功能，然后为每个项目创建一个 junit 启动配置，最后创建一个包含所有 junit 启动配置的启动组。

缺点：添加更多项目时，您必须手动更新该配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:36:20.510

您可以通过右键单击 Package Explorer 中的项目并选择来运行项目中的所有 JUnit 测试`Run As->Junit Test`

![项目运行方式->Junit 测试](../Images/de504328e3046412e2038fa15be374f1.png)

编辑：目前没有任何方法可以在工作区中运行所有测试，至少使用标准 JDT。

警告：我没有尝试过 Bananeweizen 对 CDT Launch Group 插件的建议。

您可以尝试[Inifintest](http://infinitest.github.com/user_guide.html)（每次发生变化时都会重新运行您的测试，这是一个略有不同的事情。

# vb.net - 遍历按钮及其返回值

> ID：12729694
> 
> 赞同：0
> 
> 时间：2012-10-04T14:35:32.253
> 
> 标签：vb.net, algorithm

想象一下，您有按钮，每次单击一个按钮时，它都会将文本写入文本框。

IE：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button41.Click
        textbox.Text &= "1"
    End Sub 
```

假设您有 10 个这些按钮作为数字（例如 0-9。）而不是一一处理这些按钮的单击事件（例如 buttonxclickevent 处理 textbox.text = x）；是否有更优雅的方法来遍历这些按钮和事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:45:34.273

既然你已经展示了 VB.NET 代码，我会用 VB.NET 来回答。您可以为所有处理程序使用一个处理程序：

```
Public Class Form1

    Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        For Each btn In Me.Controls.OfType(Of Button)()
            AddHandler btn.Click, AddressOf buttonClicked
        Next
    End Sub

    Private Sub buttonClicked(sender As Object, e As EventArgs)
        Dim btn As Button = DirectCast(sender, Button)
        TextBox1.Text &= "1"
    End Sub

End Class 
```

[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)过滤器和强制转换，所以结果是`IEnumerable(Of Button)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:40:42.680

**-**让类实现`ActionListener`

**-**重写这样的`actionPerformed()` **方法**来识别按钮并将消息相应地键入到`JTextField`.

```
JButton b1;
JButton b2;

public void actionPerformed(ActionEvent e) {
   if (e.getSource() == b1) {
      // Do something...
   }
   if (e.getSource() == b2) {
      // Do something else...
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:47:11.410

可以通过这种方式完成：

```
Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) _
    Handles Button1.Click, Button2.Click, Button3.Click
        Dim b As Button = CType(sender, Button)
        Label1.Text = b.ID
End Sub 
```

# css - 如何在视口中居中元素？

> ID：12729702
> 
> 赞同：2
> 
> 时间：2012-10-04T14:35:52.613
> 
> 标签：css, html

我有以下 HTML 代码，其中每个场景 div 都是固定宽度并向左浮动。
无论屏幕尺寸如何，我都希望整个`.section_2`块在视口内居中：

```
<div id="wrapper">
  <div id="scroller">
    <section class="section_2">
      <div class="scene2B1" data-stellar-ratio="1.1"></div>
      <div class="scene2B2" data-stellar-ratio="1.4"></div>
      <div class="scene2B3" data-stellar-ratio="1.3"></div>
      <div class="scene2B4" data-stellar-ratio="1.5"></div>
      <div class="scene2B5" data-stellar-ratio="1.2"></div>
    </section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:38:10.710

CSS。

```
.section_2 { margin: 0 auto; width: 800px; } 
```

注意：您必须设置宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:49:51.197

如果要将 div#wrapper 设置为将自身定位在视口的中心，请务必执行以下操作之一：

1.  知道 div#wrapper 的确切宽度和高度是多少
2.  使用javascript根据用户视口动态修改div#wrapper的高度和宽度

我会给你选项 #1 的示例代码（选项 #2 是相同的，只是添加了 javascript 以动态调整 div#wrapper 的大小）

HTML：

```
<body>
  <div id="wrapper">
    <div id="scroller">
      <section class="section_2">
        <div class="scene2B1" data-stellar-ratio="1.1"></div>
        <div class="scene2B2" data-stellar-ratio="1.4"></div>
        <div class="scene2B3" data-stellar-ratio="1.3"></div>
        <div class="scene2B4" data-stellar-ratio="1.5"></div>
        <div class="scene2B5" data-stellar-ratio="1.2"></div>
      </section>
    </div>
  </div>
</body> 
```

CSS：

```
div#wrapper {
  width: 300px; /* Must define this */
  height: 300px; /* Must define this */
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -150px /* This is HALF of the height times -1 */
  margin-left: -150px /* This is HALF of the width times -1 */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:27:26.663

大多数时候@SMacFadyen 给出的方式会起作用，但如果它不起作用（而且我不知道为什么有时不起作用），你可以尝试：

```
 .section_2 {
         margin-left:400px;/* half the width*/
         left:-50%;
         width: 800px;
    } 
```

与其他答案一样，您必须设置宽度。它似乎确实有点像黑客，但它对我有用。

演示：http: [//jsfiddle.net/jdwire/EfSBA/1/z](http://jsfiddle.net/jdwire/EfSBA/1/z)

要将其居中在整个视口中而不是仅在父元素中，您可以尝试：

```
 position:fixed; 
```

但这可能会产生一些微妙的副作用，因此请确保它是您想要的

# git - git 存储库无法以只读方式访问

> ID：12729706
> 
> 赞同：2
> 
> 时间：2012-10-04T14:36:03.237
> 
> 标签：git, open-source, cloudbees

云蜂...

当我尝试尝试下拉只读 git repo 源时，我收到此错误：

```
git clone git://git.cloudbees.com/sillyweasel/coffeescript-roo-addon.git
Cloning into 'coffeescript-roo-addon'...
fatal: remote error: access denied or repository not exported: /sillyweasel/coffeescript-roo-addon.git 
```

人们无法访问我的开源存储库是否有原因？存储库登录页面将此 URI 提供为公共 git 存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:35:03.943

这是最近发布的文件权限锁定导致的错误。
这已得到纠正，您的存储库现在可以在适当的情况下匿名读取。

# php - 如何在 RESTful API 中完成用户身份验证？

> ID：12729710
> 
> 赞同：0
> 
> 时间：2012-10-04T14:36:18.737
> 
> 标签：php, rest, authentication, recess

我正在尝试使用[Recess](http://www.recessframework.org/)开发一个简单的 Web 服务，这是一个旨在易于使用且本质上是 RESTful 的 Web 框架。我发现在 Recess 中使用 CRUD 功能非常容易。我在 MySQL 数据库中创建了一个带有后端的模型，并发现已经可以使用 REST API。

这很好，但问题是我没有用户身份验证，这几乎使我上面描述的非常好的功能完全无用。在现实世界的应用程序中，访问特定于用户的资源需要身份验证。例如，假设我正在开发一个简单的“待办事项”应用程序（顺便说一句，我不是）。用户对其待办事项列表中的其他人不感兴趣，因此服务需要识别用户是谁，以便提供正确的数据。此外，不应允许用户读取、删除或更新其他人的资源。

这通常通过登录系统完成。但是对于 REST API，用户如何进行身份验证？每次发出请求时，客户端是否需要提供用户的凭据（如用户名和密码）？怎么能避免呢？通常，可以使用 cookie，但这可能不是一种好的做法，因为并非所有客户端都必须是 Web 浏览器。但是，如果我们要模拟 cookie 的功能，我们如何传输“cookie”内容（通常，这是在 HTTP 标头中完成的）？最后，如何将这些问题的解决方案集成到 Recess 的内置 REST 功能中？

如您所见，我对开发 REST API 还很陌生，因此欢迎任何建议和指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T03:32:07.700

RESTful 系统利用已经可用的现有技术，而不是重新实现它们。而且由于 HTTP 已经包含[Basic Authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)形式的身份验证支持，因此您应该重新使用它。这是一种广泛支持的机制，供客户端传输其凭据。

是的，客户端应该在每个请求中发送他们的凭据。Cookies 适用于不喜欢重复输入密码的人类客户，这里不是这种情况。Cookie 意味着您的服务器上的会话状态，这会使可伸缩性变得非常困难。

这个网站上可能有一百个关于 RESTful 身份验证的问题。我鼓励您搜索并阅读更受欢迎的内容。

# jsf-2 - 如何使用具有不固定“名称”属性的 JSF 2 复合组件“editableValueHolder”标签

> ID：12729717
> 
> 赞同：2
> 
> 时间：2012-10-04T14:36:32.743
> 
> 标签：jsf-2, composite

如何使用`editableValueHolder`具有不固定`name`属性的 JSF 2 复合组件标记。我需要在我的新复合组件中接受转换器。为此，我正在执行以下代码：

### 输出文本.xhtml

```
<composite:interface>
    <composite:attribute name="value" required="false" />
    <composite:editableValueHolder name="txtText"/>
</composite:interface>

<composite:implementation>
    <h:outputText id="txtText" value="#{cc.attrs.value}" />
</composite:implementation> 
```

### 例子.xhtml

```
<cv:outputText id="txtText" value="#{bean.description}" >
    <f:converter converterId="TestConverter" for="txtText"/>
</cv:outputText> 
```

在这种情况下，我需要将 editableValueHolder 的 name 属性定义为静态，并对转换器声明中的“for”属性执行相同的操作。我需要知道 editableValueHolder 名称中指定的内容，以便将其复制到 f:converter 标记中的“for”。

我想知道是否有另一种方法可以做到这一点，比如为 editableValueHolder 的 name 属性传递一个参数。

# jax-ws - XMLElement@required=true 的含义

> ID：12729718
> 
> 赞同：15
> 
> 时间：2012-10-04T14:36:40.130
> 
> 标签：jax-ws, cxf

这是否意味着 XML 元素是强制性的？或者 XML 元素必须有一些非空值？我对[javadoc](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlElement.html)的解释感到非常困惑。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T23:15:18.460

```
@XMLElement(required=true) 
```

在 XML 模式中生成类似这样的内容：

```
<xs:element name="city" type="xs:string" minOccurs="1"/> 
```

这意味着元素和值是强制性的。默认值为假。

这个：

```
@XMLELement(nillable=true) 
```

在 XML 模式中生成类似这样的内容：

```
<xs:element name="city" type="xs:string" nillable="true"/> 
```

这意味着您可以像这样在 XML 中传递一个 nil 值：

```
<city xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/> 
```

像这样将两者结合起来：

```
@XMLELement(nillable=true, required=true) 
```

给出与此类似的 XML 模式定义：

```
<xs:element name="city" type="xs:string" nillable="true"/> 
```

这意味着该元素是强制性的，但您可以传入一个 nil 值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T15:35:57.790

[如果 required() 为真，则 Javabean 属性将映射到具有 minOccurs="1" 的 XML 模式元素声明](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlElement.html#required%28%29)

该`minOccurs`指标指定元素可以出现的最小次数。如果架构中的元素具有`minOccurs="1"`属性，则这意味着该元素是必需的。它必须出现在`XML`文档中。

# extjs - 在 Sencha Touch 应用程序中使用精确匹配过滤 Ext.data.Store

> ID：12729720
> 
> 赞同：0
> 
> 时间：2012-10-04T14:36:45.667
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在尝试使用 exactMatch 过滤项目列表，以获取具有确切 ID 的项目：

此代码工作正常，但它返回 ID 以所需项开头的所有项目：

```
itemslist.getStore().filter('type_id',this.getType().getValue()); 
```

如果类型 ID 的值为 1，则返回该类型 ID 为 1XXX 的所有元素。但我只想要类型恰好为 1 的元素。

我在[这里](https://stackoverflow.com/questions/5195190/filtering-a-ext-data-store-by-a-particular-id-returns-multiple-results)找到了一个解决方案，所以我将代码更改为使用exactMatch，但它不起作用，这是我的代码：

```
itemslist.getStore().filter({
    property: 'type_id',
    value: this.getType().getValue(),
    exactMatch: true
});
```

即使我删除了exactMatch 行，它也不起作用并且结果为空。你能告诉我这两种方式有什么区别以及如何让exactMatch工作吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:12:23.197

尝试这个 ：

```
itemslist.getStore().filter(Ext.create('Ext.util.Filter', {
  property: "type_id",
  value: this.getType().getValue(), 
  exactMatch: true
})); 
```

不确定这会改变，但有时......

# eclipse - 创建项目时出现 Eclipse 内部错误

> ID：12729729
> 
> 赞同：1
> 
> 时间：2012-10-04T14:37:10.483
> 
> 标签：eclipse, eclipse-cdt

我最近在 Eclipse 中安装了 CDT 模块，现在我在创建项目时遇到了问题。这就是问题所在：

内部错误：org/eclipse/cdt/core/language/settings/providers/ScannerDiscoveryLegacySupport

# c++ - 以两种数据类型作为参数的堆栈 STL

> ID：12729732
> 
> 赞同：4
> 
> 时间：2012-10-04T14:37:19.283
> 
> 标签：c++, stack

本程序取自 cplusplus.com

```
#include <iostream>
#include <vector>
#include <deque>
#include <stack>
using namespace std;

int main ()
{
    deque<int> mydeque (3,100);     // deque with 3 elements
    vector<int> myvector (2,200);   // vector with 2 elements

    stack<int> first;               // empty stack
    stack<int> second (mydeque);    // stack initialized to copy of deque

    stack<int,vector<int> > third;  // empty stack using vector
    stack<int,vector<int> > fourth (myvector);

    cout << "size of first: " << (int) first.size() << endl;
    cout << "size of second: " << (int) second.size() << endl;
    cout << "size of third: " << (int) third.size() << endl;
    cout << "size of fourth: " << (int) fourth.size() << endl;

    return 0;
} 
```

我不明白的是，为什么我们提到`stack<int, vector<int>>`ie 两种数据类型而不仅仅是`stack<vector<int>>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:43:03.313

查看：[http ://www.sgi.com/tech/stl/stack.html](http://www.sgi.com/tech/stl/stack.html)

像这样为模板创建具有两个数据类型参数的堆栈`stack<T, Sequence> stack;`

之所以这样做，是因为第一个类型参数是堆栈所持有的元素的类型，第二个类型参数是用于实现堆栈的容器类型。

使用不同的容器类型会在速度等方面为您提供不同的内存分配、优点和缺点。它只是在您希望使用的实现类型方面为消费者提供更多的灵活性。

从那个链接：

> Stack 是一个容器适配器，这意味着它是在一些底层容器类型之上实现的。默认情况下，底层类型是双端队列，但可以显式选择不同的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T08:58:19.730

重要的一点是，`stack`它不是一个**容器**，而是一个**容器适配器**。

在 C++ 中，容器适配器是给定容器的附加接口。适配器使用的标准容器在一般情况下运行良好，但有时您可能希望使用不同的底层数据结构。

另请参阅[什么是容器/适配器？C++](https://stackoverflow.com/questions/3873802/what-are-containers-adapters-c)。

关于为什么它们不是容器，请查看[Container Adapters do not support iterators](https://stackoverflow.com/questions/6569412/container-adapters-do-not-support-iterators)，这说明了 eg`stack`不提供迭代器。

* * *

额外知识：模板程序员可能会问*“为什么第二个参数不是模板模板参数，比如*

```
template <typename T, template <typename, typename> class Seq >
struct stack {};

#include <vector>

int main () {
    stack<int, std::vector> s;
} 
```

*？”*

快速回答：这将大大降低适配器类的能力。

*   适配器类必须决定容器使用的分配器（`vector`is的完整签名`std::vector<T, Alloc=...>`），因此适配器用户无法对其进行微调
*   并非所有有效容器都具有相同数量和类型的模板参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T16:32:52.433

这正是标准库容器模板的设计方式：第一个模板参数是包含数据的类型（或前*两个*用于关联容器）。

没有什么可以阻止您以不同的方式设计自己的模板，例如，就像您建议的那样：

```
template <typename Backend>
class my_stack
{
public:
    typedef Backend                         container_type;
    typedef typename container_type::value_type value_type;

private:
    container_type container; 

    // ...
}; 
```

但是，这种设计有两个缺点：

1.  这不是最小和简单的。如果我只是想要一堆`int`s，我必须自己想一个容器，我不能只说`my_stack<int>`。

2.  它对容器施加约束，即它公开一个成员类型`value_type`。我不能说`my_stack<my_insane_container<int>>`。

现在，您*可以*通过以下方式克服第二个投诉：

```
template <typename> class my_crazy_stack;

template <template <typename ...> class Tmpl, typename T, typename ...Args>
class my_cazy_stack<Tmpl<T, Args...>>
{
public:
    typedef Tmpl<T, Args...> container_type;
    typedef T value_type;

    // ...
}; 
```

但是现在你让它变得更加疯狂：容器现在需要是一个模板（即 bye bye `class my_specialized_int_container`），并且它需要将*其*值类型作为第一个元素（即 bye bye stack of stacks）。

所以，简而言之，标准库的设计是相当明智的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T09:16:51.107

您不能`stack<vector<T> >`使用向量作为底层类来表示一堆 T 的原因仅仅是因为它具有不同的含义，即 T 的向量堆栈。您会期望它的意思不是吗？向量是堆栈的有效值类型，您可以将向量推入堆栈然后将其弹出...因此，标准没有理由（部分）专门化此特定模板参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T14:46:19.193

Stack 不是 STL 容器，而是适配器，是编程模式之一。简而言之，这意味着该堆栈用于包装容器（`vector`或`deque`）以“替换”其公共方法（创建新的公共方法并隐藏现有方法）。您可以在此处阅读有关适配器的更多信息[http://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)

# java - Sametime Java Toolkit loginByPassword 已弃用

> ID：12729733
> 
> 赞同：1
> 
> 时间：2012-10-04T14:37:26.473
> 
> 标签：java, deprecated, toolkit, sametime

首先，我想从我刚开始在一家使用 IBM 软件的公司实习的信息开始。所以如果我犯了菜鸟的错误，请原谅我。

我今天从 de Sametime 8.5.2 SDK 开始学习 Java Toolkit 教程。在学习本教程时，我注意到本教程中使用的一些方法被 Eclipse 标记为已弃用。我认为这是因为教程没有更新。

不幸的是，它们似乎没有 Javadoc 描述，而且我找不到任何关于我应该使用什么来代替不推荐使用的方法的信息。一个具体的例子是来自社区服务 (com.lotus.sametime.community.CommunityService) 的“loginByPassword”方法。

我试图查找有关此主题的信息，但找不到任何信息。这让我觉得我可能做错了什么。

所以我有三个问题：

1.  难道我做错了什么？
2.  如果是这样，我做错了什么？
3.  如果我没有做错任何事情，有人可以指出我可以找到我需要的文件的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:38:02.723

我找到了我的解决方案。SDK 中包含一个单独的 Javadoc 文件夹。Javadoc 包含有关大多数类的信息。

# spring - 让我的 JSF(Icefaces) Webapp 为多个用户工作的问题

> ID：12729734
> 
> 赞同：1
> 
> 时间：2012-10-04T14:37:30.093
> 
> 标签：spring, hibernate, icefaces-3, transactionmanager

这是我在 stackoverflow 上的第一个问题，所以如果您遗漏了什么，请提供反馈。

我正在为我的 Web 应用程序使用 JPA (Hibernate 3)、Spring 3.0.6 和 JSF (Icefaces 3.0)。当我使用该应用程序时，我的本地计算机上没有问题。但是如果第二个用户开始四处点击，有时会出现以下异常：

“找到预绑定的 JDBC 连接！如果被告知要管理 DataSource 本身，JpaTransactionManager 不支持在 DataSourceTransactionManager 中运行。建议对单个 DataSource 上的所有事务使用单个 JpaTransactionManager，无论是 JPA 还是 JDBC 访问。”

我的情况这没有意义，因为我只使用一个 JPATransactionManager 和一个 EntityManager（见下面的配置）。唯一应该抛出此异常的情况是在使用多个事务管理器和单个数据源时。

（我认为）由于 JSF，我在会话和事务处理方面遇到了很多问题，并使用[此解决方案](http://www.integralmind.org/2012/06/20/java-server-faces-and-jpa-lazy-initialization-exception/)使其正常工作。

经过一周许多不同的配置和无休止的尝试，我找不到问题的根源。感觉就像我完全错过了配置中的某些东西。

顺便说一句：目前我经常得到例外

“xxxx.xxxx.xxxx 条目中的空 id（发生异常后不要刷新会话）”

在来自完全不同的表的 getAll() 之后。也就是说，堆栈跟踪包含 yyyy.getAll() 并抛出上述异常。我不知道这是从哪里来的。

非常感谢您的帮助！

这是我当前的配置：

应用程序上下文.xml：

```
 <bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource"
    destroy-method="close">
    <property name="driverClassName" value="${datasource.driverClassName}" />
    <property name="url" value="${datasource.url}" />
    <property name="username" value="${datasource.username}" />
    <property name="password" value="${datasource.password}" />

    <property name="removeAbandonedTimeout" value="180" />
    <property name="removeAbandoned" value="true" />
    <property name="defaultCatalog" value="${datasource.defaultCatalog}" />

    <property name="testWhileIdle" value="true" />
    <property name="validationQuery" value="Select 1" />
</bean>

<!-- Spring Data Access Exception Translator Defintion -->
<bean id="jdbcExceptionTranslator"
    class="org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="HomeDao"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="${hibernate.show_sql}" />
        </bean>
    </property>
</bean>

<util:properties id="hibernateProperties">
    <prop key="hibernate.dialect">${hibernate.dialect}</prop>
    <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
    <prop key="hibernate.bytecode.use_reflection_optimizer">true</prop>
    <prop key="hibernate.hbm2ddl.auto">none</prop>
</util:properties>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<bean id="openEntityManagerInViewPhaseListener"
    class="de.itcampus.endopdb.util.OpenEntityManagerInViewPhaseListener">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="transactionManager" ref="transactionManager"/>
    </bean>

<tx:annotation-driven transaction-manager="transactionManager"/>
<context:annotation-config/>
<aop:aspectj-autoproxy />
<context:component-scan base-package="de.endopdb" />

<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean
    class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

<!-- spring-security -->
<security:http realm="Sample Realm" entry-point-ref="authenticationEntryPoint"
    auto-config="false">

    <security:custom-filter ref="sessionManagementFilter"
        before="SESSION_MANAGEMENT_FILTER" />

    <security:intercept-url pattern="/ifpages/pages/administration/**"
        access="ROLE_ADMIN" />
    <security:intercept-url pattern="/ifpages/pages/**"
        access="ROLE_ADMIN, 
        ROLE_USER" />

    <security:access-denied-handler
        error-page="/loginError.xhtml" />
    <security:form-login login-page="/loginStart.xhtml" />
    <security:logout logout-url="/j_spring_security_logout"
        logout-success-url="/logoutSuccess.xhtml" invalidate-session="true" />
</security:http>

<bean id="authenticationEntryPoint"
    class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl" value="/loginStart.xhtml" />
</bean>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        user-service-ref="userDetailsService">
        <security:password-encoder hash="md5" />
    </security:authentication-provider>
</security:authentication-manager>

<bean id="userDetailsService" class="de.itcampus.endopdb.security.UserDetailsServiceImpl">
</bean>

<bean id="sessionManagementFilter"
    class="org.springframework.security.web.session.SessionManagementFilter">
    <constructor-arg name="securityContextRepository"
        ref="httpSessionSecurityContextRepository" />
    <property name="invalidSessionStrategy" ref="invalidSessionStrategy" />
</bean>

<bean id="httpSessionSecurityContextRepository"
    class="org.springframework.security.web.context.HttpSessionSecurityContextRepository" />

<bean id="invalidSessionStrategy"
    class="org.springframework.security.web.session.SimpleRedirectInvalidSessionStrategy">
    <constructor-arg name="invalidSessionUrl"
        value="/ifpages/pages/loginStart.xhtml" />
</bean> 
```

web.xml

```
<context-param>
    <param-name>openEntityManagerInViewPhaseListenerBeanName</param-name>
    <param-value>openEntityManagerInViewPhaseListener</param-value>
</context-param>

<filter>
<filter-name>MyJSFCompatibleOpenEntityManagerInViewFilter</filter-name>
<filter-class>de.itcampus.endopdb.util.myJSFCompatibleOpenEntityManagerInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>MyJSFCompatibleOpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

// Spring Listener for Request und Session-Scoped beans
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

// Spring Context Loader Listener
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

// SOAP-Servlet
<servlet>
    <servlet-name>jaxws-servlet</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSSpringServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>jaxws-servlet</servlet-name>
<url-pattern>/soap</url-pattern>
</servlet-mapping> 

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<session-config>
    //minutes
    <session-timeout>30</session-timeout>
</session-config>

// tomcat basic auth
<security-constraint>
    <web-resource-collection>
    <web-resource-name>SOAP-Auth</web-resource-name>
    <url-pattern>/soap</url-pattern>
</web-resource-collection>
<auth-constraint>
    <role-name>XXXXX</role-name>
</auth-constraint>
</security-constraint>  

<login-config>
<auth-method>BASIC</auth-method>
<realm-name>SOAP-Auth</realm-name>
</login-config>

<security-role>
    <role-name>XXXXXXX</role-name>
</security-role>

//Java Faces
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/icefaces/*</url-pattern>
</servlet-mapping>

<context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>

<context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>false</param-value>
</context-param>

//Icefaces
<context-param>
    <param-name>com.icesoft.faces.standardRequestScope</param-name>
    <param-value>false</param-value>
</context-param>

<context-param>
    <param-name>com.icesoft.faces.synchronousUpdate</param-name> 
    <param-value>true</param-value> 
</context-param> 

<servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>/xmlhttp/*</url-pattern>
</servlet-mapping> 
```

面孔-config.xml

```
<application>
    <el-resolver>
       org.springframework.web.jsf.el.SpringBeanFacesELResolver
    </el-resolver>
</application>  

<lifecycle>
    <phase-listener>de.itcampus.endopdb.util.OpenEntityManagerInViewPhaseListenerDelegator</phase-listener>
</lifecycle> 
```

# c# - 如何关闭已在目录中打开的文件

> ID：12729738
> 
> 赞同：4
> 
> 时间：2012-10-04T14:37:42.743
> 
> 标签：c#, file, directory, delete-file

我正在尝试解析一个文件夹并删除其中的所有文件。

```
DirectoryInfo dir = new DirectoryInfo("C\\Temp");
if (dir.GetDirectories().Any(p => p.Name == "\\NewTemp"))
{
    foreach (string file in Directory.GetFiles(dir + "\\NewTemp"))
    {
        File.SetAttributes(file, FileAttributes.Normal);
        File.Delete(file);
    }
} 
```

此代码工作正常，并删除了我的 \NewTemp 文件夹中的所有文件。但是，如果打开任何文件，这些文件将不会被删除。我想强制关闭打开的文件并删除它们。我什至试过

```
foreach (string file in Directory.GetFiles(dir + "\\NewTemp"))
{
    TextReader tr = new StreamReader(dir+"\\NewTemp\\"+file);
    tr.Close();
    File.SetAttributes(file, FileAttributes.Normal);
    File.Delete(file);
} 
```

但是没有用。请让我知道我在哪里失踪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:40:19.037

> 请让我知道我在哪里失踪。

好吧，您正在关闭文件*的*句柄-但这不会影响任何*其他*文件句柄，无论它们是否属于您的进程。基本上你不能删除在别处使用的文件，除非它是用允许删除的文件共享标志显式打开的。据我所知，这正是 Windows 文件系统的工作方式。（编辑：我最初建议使用记事本作为保持文件句柄打开的一种方式，但显然它在将句柄加载到内存后会关闭句柄。嗯，尝试其他应用程序:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:43:33.327

如果句柄被另一个进程打开，则不能删除文件。您必须先终止该进程，然后才能删除该文件。

您可以查看此[示例以了解如何查找所有打开的句柄。](http://www.codeproject.com/Articles/18975/Listing-Used-Files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:49:33.563

如果你知道哪个程序打开了你的文件，你可以[直接杀掉](https://stackoverflow.com/questions/6189874/process-kill-vs-process-starttaskkill)那个程序，然后删除你的文件。

如果您不知道打开文件的进程是什么，那么您可以使用[这样的实用程序](http://rodolfovaraujo.wordpress.com/2012/04/18/manage-process-handles-command-prompt/)，然后处理输出。我自己会重定向输出，然后使用正则表达式来查找我想要获得的过程，但可能有更好的方法。

请记住，这种方法并不完全安全，并且可能会杀死您不想杀死的进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:47:26.983

这是一个方便的工具，用于查找哪个进程具有文件句柄：

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T05:11:39.807

这些是您的选择，按照您应该尝试的顺序（从最小侵入性到非常侵入性）。

1.  做你目前正在做的事情（删除只读属性并尝试删除文件）。
2.  您可以尝试重命名文件，然后将其删除。
3.  如果这不起作用，那么您应该打开带有`FILE_FLAG_DELETE_ON_CLOSE`标志的文件（pinvoke 到[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx)）。当文件的所有其他句柄都关闭时，系统将为您删除文件。
4.  如果上面对 CreateFile 的调用由于文件未打开而失败`FILE_SHARE_DELETE`，那么您应该调用带有标志的[MoveFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240.aspx)`MOVEFILE_DELAY_UNTIL_REBOOT`（并且 lpNewFileName 参数设置为 NULL / IntPtr.Zero）。这将导致该文件在系统下次重新启动/重新启动时被删除。
5.  如果第 4 步不可行（即您不能等待重新启动），那么只有这样才能继续执行杀死可能已锁定文件的随机进程的路线。请记住，这可能会导致系统不稳定，特别是如果它是您试图杀死的系统进程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-07T11:50:11.137

```
foreach (System.Diagnostics.Process myProc in System.Diagnostics.Process.GetProcesses())
{
    if (myProc.ProcessName == "EXCEL")
    {
        myProc.Kill();
        break;
    }
} 
```

# python - 使用python将xml附加到xml。我有两个需要合并的xml文件。所以无论如何我可以合并这两个文件

> ID：12729740
> 
> 赞同：2
> 
> 时间：2012-10-04T14:37:47.473
> 
> 标签：python, xml, django

谁能告诉我如何使用 python 附加 xml 文件

这是我的 file1.xml

```
<?xml version="1.0"?>
<addressbook>
    <person>
        <name>Eric Idle</name>
        <phone type='fix'>999-999-999</phone>
        <phone type='mobile'>555-555-555</phone>
        <address>
            <street>12, spam road</street>
            <city>London</city>
            <zip>H4B 1X3</zip>
        </address>
    </person>
</addressbook> 
```

我想将它附加到另一个 xml 文件

```
<?xml version="1.0"?>

 <note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
 </note> 
```

有什么模块可以为我做到这一点...

我需要的输出是：

```
<addressbook>
    <person>
        <name>Eric Idle</name>
        <phone type='fix'>999-999-999</phone>
        <phone type='mobile'>555-555-555</phone>
        <address>
            <street>12, spam road</street>
            <city>London</city>
            <zip>H4B 1X3</zip>
        </address>
    </person>
    <note>
        <to>Tove</to>
        <from>Jani</from>
        <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
     </note>
</addressbook> 
```

现在我需要从文件中读取 xml，但后来我需要从服务器获取 xml 响应并将其转换为一个 xml 文件。所以请如果有人知道它会对我有很大帮助......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T15:11:17.527

**编辑**：由于问题发生了很大变化，因此删除了旧答案。

使用 lxml：

```
addressbook_xml = """<?xml version="1.0"?>
<addressbook>
    <person>
        <name>Eric Idle</name>
        <phone type='fix'>999-999-999</phone>
        <phone type='mobile'>555-555-555</phone>
        <address>
            <street>12, spam road</street>
            <city>London</city>
            <zip>H4B 1X3</zip>
        </address>
    </person>
</addressbook>"""

note_xml = """<?xml version="1.0"?>

 <note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
 </note>
"""

from lxml import etree

# XML strings to etree
addressbook_root = etree.fromstring(addressbook_xml)
note_root = etree.fromstring(note_xml)

# append the note
addressbook_root.append(note_root)

# print the new addressbook XML document
print etree.tostring(addressbook_root) 
```

# android - Android，自定义 DialogFragment 兼容 Android OS api level 8+

> ID：12729745
> 
> 赞同：1
> 
> 时间：2012-10-04T14:37:54.383
> 
> 标签：android, android-dialogfragment

我需要创建一个适用于所有 Android api 8 及更高版本的自定义对话框片段，但我被卡住了。我的理解是我需要使用支持库，这很公平，但是将使用对话框的活动需要从 RoboActivity 继承，并且根据我在这里阅读的内容[http://android-developers.blogspot.co。 uk/2012/05/using-dialogfragments.html](http://android-developers.blogspot.co.uk/2012/05/using-dialogfragments.html)我需要从 FragmentActivity 下降活动，因为 Java 没有多重继承，我不知道该怎么做。不使用 RoboActivity 不是一种选择。

那么我该如何创建一个自定义对话框，它自己的布局与 api 8 及更高版本兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:46:52.673

只需使用`RoboFragmentActivity`:-)

# css - 使用 rails 和 bootstrap 时不显示占位符文本

> ID：12729747
> 
> 赞同：1
> 
> 时间：2012-10-04T14:37:57.900
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap, placeholder

我不知道为什么我看不到我的**placeholder**。

我正在使用 Rails 和 Bootstrap 生成代码：

```
= form_tag activity_path(@activity), method: :get do
  = text_field_tag :start_time," ", {placeholder: 'Start Date', class: 'pull-left input-small'}
  = text_field_tag :end_time," ", {placeholder: 'End Date', class: 'pull-left input-small'}
  %span.btn= submit_tag 'Show custom dates', class: 'btn' 
```

这是生成的代码：

```
<input class="pull-left input-small" id="start_time" name="start_time" placeholder="Start Date" type="text" value=" " />

<input class="pull-left input-small" id="end_time" name="end_time" placeholder="End Date" type="text" value=" " /> 
```

问题是我看不到占位符。我尝试将其设置为不同的颜色`input[placeholder] { color: ...}`，但这似乎也不起作用。知道为什么会这样吗？谢谢你。

**[编辑]**

我`@placeholderText: #080808;`在我的**bootstrap_and_overrides.css**文件中添加了，但这似乎也没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:55:17.617

您将两个字段的值都设置为“”，删除它，将两者都设置为 nil

```
text_field_tag :start_time, nil, {placeholder: 'Start Date', class: 'pull-left input-small'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:46:48.310

可能是你的浏览器。据我所知，IE（9 及以下）和 Opera 尚不支持**占位符**属性。Firefox 3.7+ 和 Chrome/Safari 4.0+ 应该支持它。

这个[问题](https://stackoverflow.com/questions/7060265/html5-placeholder-support)和这篇[博](http://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/)文也有一些很好的解决方法。

# vim - 是什么 输入 Vim？

> ID：12729748
> 
> 赞同：19
> 
> 时间：2012-10-04T14:38:00.747
> 
> 标签：vim

我看到很多关于 Vim 中不同键（`<C-R>`、、`<C-j>`和`<C-w>`）的讨论，我想知道某处是否有一个列表（`:help`？）告诉它们是什么。我发现`<C-R>`是 Enter （“回车”，我想），但其他人通常没有立即意义。

**更新**：我希望有一种方法可以标记多个“最佳”答案，因为这些都非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T14:52:45.687

中要学习的键绑定太多`vim`，您最好学习如何使用`:help`.
有一些提示可以快速获得帮助：

`Ctrl-W`在正常模式下：

```
:h ^w 
```

`Ctrl-W`在插入模式下：

```
:h i^w 
```

`Ctrl-W`在视觉模式下：

```
:h v^w 
```

`Ctrl-W`在命令模式下：

```
:h c^w 
```

在另一个标签页中打开帮助：

```
:tab h ^w 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-04T14:40:56.730

这些不是键，它们是与控制键关联的键。`<C-j>`表示“在按下控制的同时按下 j”。

`<C-R>`不是回车，是重做命令。`<CR>`是回车。`<C-F>`向上翻页，`<C-B>`向下翻页，...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:46:16.363

控制键。例如，使用`<C-w> h`(或`j`, `k`, `l`) 将在打开的缓冲区之间切换。

`<C-j>`会让你下线。另外，我可能是错的，但我相信回车是`<CR>`（不是`<C-R>`）。

# php - 会议。变量不会在下一页传递

> ID：12729755
> 
> 赞同：0
> 
> 时间：2012-10-04T14:38:16.990
> 
> 标签：php, session, variables

所以我要在第二页传递一个变量。我在我的索引页面顶部测试了会话，以了解会话是否包含变量。像这样：

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
session_start();
$UserID = $_SESSION['CustNum'];
$UserN = $_SESSION['UserName'];
echo "$UserN";
?> 
```

索引页面完全没问题。它确实打印了用户名。但是当涉及到我将传递变量的下一页时，我尝试了相同的代码来查看会话是否包含某些内容。但是，没有。请帮忙。此外，这些代码都高于我的代码，高于一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:40:59.770

哪里：

```
$_SESSION['CustNum'] = 'xxx';
$_SESSION['UserName'] = 'yyy'; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:42:31.700

`session_start()`您是否在其他页面上声明了 a ？

你需要在`$_SESSION['UserName']`某个地方初始化。

像这样`$_SESSION['UserName'] = "my_username"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:04:23.170

请试试这个方法

在第一页

```
error_reporting(E_ALL ^ E_NOTICE);

session_start();

$_SESSION['CustNum']='12345';

$_SESSION['UserName']='sivanthi'; 
```

在另一个页面

```
error_reporting(E_ALL ^ E_NOTICE);

session_start();

echo $_SESSION['CustNum'];

echo $_SESSION['UserName']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:05:50.470

根据您的评论和代码：

```
if($numrows === 1){ $row = mysql_fetch_assoc($query)or die ('Unable to run query:'.mysql_error());
// fetch associated: get function from a query for a database
$dbpass = $row['PassWord']; // read password of inputted user from the query.
$dbuser = $row['UserName']; // read username  from the query
$dbactive = $row['Active']; // read if user is active $dbid = $row['CustNum'];

if($UserP == $dbpass){ if($dbactive == 1){ //set session information
    $_SESSION['CustNum'] = $dbid;
    $_SESSION['UserName'] = $dbuser;
} 
```

..我想这是：`if($UserP == $dbpass){ if($dbactive == 1)`是`false`。核实。

# command-line - 从批处理文件中的命令行参数返回退出代码

> ID：12729760
> 
> 赞同：0
> 
> 时间：2012-10-04T14:38:29.003
> 
> 标签：command-line, batch-file, exit-code

我要做的是报告命令行参数的退出代码，并想知道这是否可能..

例如：

```
myProgram.exe aThirdPartyProgram.exe 
```

我想掌握`aThirdPartyProgram`在`myProgram`. 这样做的原因是创建一个可用于测试多个软件的批处理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:45:31.430

除非`myProgram.exe`输出或返回与 的退出代码有关的任何内容`aThirdPartyProgram.exe`，否则不，没有办法。从你的批处理文件`aThirdPartyProgram.exe`只是一个参数`myProgram.exe`; 没有任何迹象表明它是一个将要执行的程序。此外，`myProgram.exe`运行程序，而不是你的批处理，所以如果它没有告诉你它的退出代码，那么你就不走运了。

如果`myProgram`只是传递您的退出代码，则可以使用包含最后一个命令的退出代码`aThirdPartyProgram`的伪变量。`%ERRORLEVEL%`

# qtp - 如何从 QTP 运行 ftp 批处理文件？

> ID：12729761
> 
> 赞同：2
> 
> 时间：2012-10-04T14:38:31.573
> 
> 标签：qtp

我有一个 ftp 批处理文件，如下所示：

```
open <server>
<user>
<Password>
bin
cd \Curr_QA_DataLoad
put C:\Users\niprakash\Documents\XYZ\7090\NitishaQTPTest.txt
bye 
```

我必须从 QTP 运行这个批处理文件。我手动输入 ftp.exe -s: 来运行它。但这不适用于 QTP。我还希望将其输出发送到另一个文件。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:46:19.283

```
SystemUtil.Run  "c:\abc\def\doFTP.bat" 
```

或者如果你有参数要发送到你的 bat 文件，那么

```
SystemUtil.Run  "c:\abc\def\doFTP.bat" ,  file1 &"   "& file2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T08:36:49.923

您可能想尝试这样的事情，这是刚刚在 POC 期间发现的

'这是给SUB的，用FTP命令创建一个文本文件

```
Sub OpenTextFileTest
   Const ForReading = 1, ForWriting = 2, ForAppending = 8
   Dim fso, f
   Set fso = CreateObject("Scripting.FileSystemObject")
   Set f = fso.OpenTextFile("C:\works\MISC\testfile.txt", ForWriting, True)
   f.Writeline "open your ftp ip"
   f.Writeline "tabc" 'Username
   f.Writeline "xyz" ' Password
   f.Writeline "lcd C:\Works\MISC\test" 'local working directory on your computer, test.txt to be sent to the ftp server
   f.WriteLine "cd ftp_folder"  ' your folder on the ftp location
   f.Writeline "send test.txt"
   f.writeline "disconnect"
   f.WriteLine "Close"
End Sub
OpenTextFileTest             'Calling the sub

Set app=CreateObject("Wscript.shell") '' Simple code to send keys to the command propmt, pretty simple
SystemUtil.run("cmd.exe")
app.sendkeys "cd C:\works\MISC"
app.sendkeys "~" 'its for enter key
app.SendKeys "ftp -s:testfile.txt"
app.SendKeys "~"
app.SendKeys "quit"
app.SendKeys "~"
app.SendKeys "exit"
app.SendKeys "~" 
```

我已经测试了这段代码，它工作得很好，如果您有任何问题，请再次发布。

# android - RelativeLayout - 动态重新定位视图

> ID：12729762
> 
> 赞同：0
> 
> 时间：2012-10-04T14:38:34.040
> 
> 标签：android

我正在尝试在屏幕上上下移动工具栏的简单任务，但它只能工作一次。工具栏在按下按钮时移动到顶部，但即使出现“移至底部”消息，我也无法将其移回底部。见代码：

```
 boolean toolBarAtBottom = true;

    private void moveToolBar(){
        LinearLayout toolBar = (LinearLayout) findViewById(R.id.toolBar);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);

        lp.height = toolBar.getHeight();

        if (toolBarAtBottom){ 
            lp.addRule(RelativeLayout.ALIGN_TOP, RelativeLayout.TRUE);
        }else{  
            lp.addRule(RelativeLayout.ALIGN_BOTTOM, RelativeLayout.TRUE);
            Toast.makeText(DrawActivity.this, "move to bottom", Toast.LENGTH_SHORT).show();
        }
        toolBar.setLayoutParams(lp);
        toolBarAtBottom = !toolBarAtBottom;
    } 
```

任何想法如何让它做不止一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:50:05.270

您想使用`RelativeLayout.ALIGN_PARENT_BOTTOM`而不是`RelativeLayout.ALIGN_BOTTOM`. `ALIGN_BOTTOM`将一个视图的底部与另一个视图的底部对齐。`ALIGN_PARENT_BOTTOM`会将其移动到其父容器的底部。

这是文档的链接：http: [//developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/reference/android/widget/RelativeLayout.html)

# crontab - 来自 rrule 的 crontab

> ID：12729763
> 
> 赞同：1
> 
> 时间：2012-10-04T14:38:37.290
> 
> 标签：crontab, icalendar

我必须将 rrule（来自 iCal 协议）解析为 Quartz cron 表达式。在规则（循环规则）中，可以指定一年中的哪一天。

我正在寻找像“一年中每 200 天”这样的 cron 表达式。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:05:19.557

0 0 12 18 7 ? 2012/4

0 0 12 19 7 ? 2013/4

0 0 12 19 7 ? 2014/4

0 0 12 19 7 ? 2015/4

# loops - Prolog图找到没有循环的路径，检查边缘

> ID：12729764
> 
> 赞同：1
> 
> 时间：2012-10-04T14:38:38.040
> 
> 标签：loops, path, prolog, graph-theory, edges

我试图在 Prolog 的图中找到一条路径。我设法用我在网上找到的一些片段来解决这个问题。但是，它会跟踪节点以避免两次访问它们，而我需要它不要两次访问同一边缘。这可能在大多数图中归结为相同的事情，但是因为我想用它来计算从边缘上的点到边缘上其他点的路径，我不希望它返回从一个点到相邻节点的路径到相反的节点（比如，如果我们有一条从节点 A 到节点 C 的边 AC，中间有一个点 B，那么 ACB 将不是一条可接受的路径，因为它经过 AC 两次）。

这是我当前的代码：

```
path(A,B,Nodes,Edges) :- path1(A,[B],Nodes,Edges).
path1(A,[A|P1],[A|P1],[]).
path1(A,[Y|P1],Nodes,Edges) :- 
   connected(X,Y,Edge), \+ memberchk(X,[Y|P1]), path1(A,[X,Y|P1],N1,E1), append(E1,[Edge],Edges).

connected(a,c,ac). % connected(Node1,Node2,Edge) need not represent an edge:
connected(a,b,ac). % it may also refer to a point on the edge.
connected(b,c,ac). 
```

对于上面的示例，这将返回例如：

```
path(a,b,[a,b],[ac])
path(a,b,[a,c,b],[ac,ac]) 
```

现在我想我可以简单地替换`\+ memberchk(X,[Y|P1])`以`\+ memberchk(Edge,S)`确保相同的边缘不会两次出现在路径中，这将解决问题。但是，当我这样做时，Prolog 说没有路径。

有人可以向我解释这是哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:32:18.077

[这个答案](https://stackoverflow.com/a/1608551/1718719)对我有很大帮助：显然这是因为您不能使用尚未实例化的路径来检查循环。它建议使用`freeze\2`，但我不知道如何在 JIProlog 中处理它。我会为此提出一个新问题。

# ember.js - 您如何将 ember.js 与外部（非本地）api 端点一起使用？

> ID：12729771
> 
> 赞同：2
> 
> 时间：2012-10-04T14:39:00.980
> 
> 标签：ember.js, cors, ember-data

有没有人成功地使用 Ember.js 使用前端应用程序并使用来自外部主机的端点？如果是这样，请分享您的经验。

这里有几个选项。

*   通过本地代理发出请求（只是通过）。
*   使用代理 + Rails，这样您就可以按照 Ember.js 想要的方式工作。
*   使用 CORS 请求来解决 XSS 问题。

似乎 Ember.js 的规范方法是使用本地 Rails 应用程序将 json 提供给 Ember.js 应用程序。从我的团队所做的研究来看，CORS 似乎不是使用 Ember.js 的常用方法。

编辑：

关于下面的评论，这实际上更多是如何将 Ember-data 与外部 api 一起使用而不是 Ember.js 本身的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:38:23.870

服务器-客户端通信不是 Ember.JS 为您解决的问题，它为此使用 jQuery，因此对 Ember.JS 方面不应该有任何限制。

您列出的所有内容都是处理来自不同域的 API 的合法方式，具体取决于您想要实现的用户代理支持（某些客户端根本不支持 CORS，或者以有限的形式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:23:51.480

```
 **Approach 1** 
```

如果您查看此博客文章：[http ://eng.netwallet.com/2012/04/17/simple-cross-domain-ajax-with-a-wormhole-5/](http://eng.netwallet.com/2012/04/17/simple-cross-domain-ajax-with-a-wormhole-5/)

在主机页面上，他们使用 porthole.js 和一个 Ember 对象，该对象设置 porthole windowProxy 并侦听来自它的消息。

Porthole.js 是一个小型 Javascript 库，可以安全且轻松地与跨域 iFrame 进行通信。

您始终可以在 ember-data 和 RestAdapter 中使用这种方法来覆盖提到的 gryzzly 之类的东西。

```
 **Approach 2** 
```

同样在下面的帖子中，他们使用 goliath 作为代理来处理 ember-data 和 elasticsearch，但使用他们自己的自定义适配器**：**

[http://www.elasticsearch.org/tutorials/2012/08/22/javascript-web-applications-and-elasticsearch.html](http://www.elasticsearch.org/tutorials/2012/08/22/javascript-web-applications-and-elasticsearch.html)

帖子的全部代码在这里：[https ://gist.github.com/3369662](https://gist.github.com/3369662)

# qt - 将 DLL 添加到项目后“创建进程失败”

> ID：12729772
> 
> 赞同：0
> 
> 时间：2012-10-04T14:39:02.993
> 
> 标签：qt, dll, symbian, qjson

[仅供参考：我已经得到了答案，我正在编写解决方案。本帖仅供有类似问题的人参考】

* * *

我正在 Symbian-Belle 平台上开发一些小型应用程序。一切都做得很好，直到我遇到了必须解析一些 JSON 文件的地方。我找到了一个 QJson 库，它看起来非常相关且易于使用（尽管它似乎将所有内容都返回为 QVariantMap，这可能不是那么轻量级..）。

然而，这个库不是以预编译的形式提供的。它是仅限源代码的。幸运的是，它准备在 QtCreator 的 Symbian 项目下编译。

经过一些初始设置和小修复后，模拟器上的一切运行顺利，因此，下一步是在真实设备上运行它。这里开始出现一些问题。在构建、链接、部署和安装之后，IDE 告诉我：

> 启动失败：命令答案 [命令错误]，1 个要请求的值：'C|4|Processes|start|""|"MyApp.exe"|[""]|[]|true'
> #0 {"代码":-46,Format="创建进程失败（验证可执行文件和所有必需的 DLL 是否已传输，并且该进程尚未运行）（权限被拒绝）"}
> 错误：'创建进程失败（**验证可执行文件和所有必需的 DLL 是否已传输，并且该进程尚未运行）（权限被拒绝）** ' 代码：-46

启动过程立即中止。当然，当与 json 相关的代码和库尚未添加到项目中时，应用程序会正常启动。

我已经检查了建议的内容，并且 QJson 库确实已正确安装在设备上，因此与丢失文件无关。此外，它自己的应用程序也已正确安装：我什至可以尝试手动运行它。这样做会导致错误：

> 出于安全原因无法执行文件

到底是怎么回事？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:58:54.047

问题确实在于 Symbian 平台的安全特性。事实证明，它根本与 Qt 无关。

您会看到，EXE 和 DLL 项目都可能标有“功能”，指定代码使用哪些特殊平台功能。例如，如果您尝试读取特定于设备的数据，则需要`ReadDeviceData`功能。

功能嵌入到设备上安装的二进制文件中。Symbian 构建系统要求在 .PKG 文件中定义它们，但如果您使用当前的 Nokia/Qt 工具，所有这些文件都会由构建过程自动生成。对于 Qt 项目，功能在 .pro 文件中指定，例如：

```
TARGET.CAPABILITY += ReadDeviceData 
```

现在，诀窍是，虽然 EXE 和 DLL 使用完全相同的 Capability 标志，但对于 EXE 和 DLL，相同的功能**意味着其他东西**。

*   对于 EXE，它们的意思是“允许应用程序使用什么？”
*   对于 DLL，它们的意思是“哪些应用程序可以安全地使用该 DLL？”

在您第一次想到它时就很难看到差异。

*   如果 EXE 有标志 X，则操作系统授予此应用程序对某些 X API 的访问权限
*   如果 DLL 有标志 X，这意味着它可以被有 X 标志的应用程序安全地使用

请注意，对于 DLL，含义有些相反：使用某些超安全标志的应用程序`AllFiles` **不能使用**没有这些标志的 DLL。

原因很简单：如果我使用 XYZ 标志，并且如果 DLL 没有使用该标志标记为可安全使用，那么使用该 DLL 是不安全的，我无法加载它。

这甚至写在诺基亚的 Symbian 文档上：http:
[//www.developer.nokia.com/Community/Wiki/Shared_Library_DLLs_on_Qt_for_Symbian#Capabilities](http://www.developer.nokia.com/Community/Wiki/Shared_Library_DLLs_on_Qt_for_Symbian#Capabilities)

这意味着您必须确保所有 DLL（由您的应用程序使用）至少具有与您的应用程序一样宽的功能。

对于我使用 QJson 库的问题，解决方案是简单地添加`NetworkServices`到 QJson/src/src.pro 文件中。我的应用程序使用了这个标志，因为它从互联网上下载了一些数据。因此，必须将库标记为可安全使用网络。我无法想象为什么它一开始就没有标上那面旗帜。可能作者只是忘记了，因为很明显 JSON-parser 将用于支持网络的应用程序中。我要给他们留个便条。

* * *

我想写的问题解决案例到此结束。我在以下位置发布了一个更长的版本，其中包含更广泛的解释：http: [//quetzalcoatl-pl.blogspot.com/2012/10/notes-on-symbian-qt-qjson-dlls-and.html](http://quetzalcoatl-pl.blogspot.com/2012/10/notes-on-symbian-qt-qjson-dlls-and.html)

# scala - scala：提高这段代码的可读性和风格

> ID：12729773
> 
> 赞同：4
> 
> 时间：2012-10-04T14:39:14.123
> 
> 标签：scala, error-handling, idioms

下面是一个很常见的 play framework 2 控制器：

```
def save(ideaId : Long) = CORSAction { request =>
  Idea.findById(ideaId).map { idea =>
    request.body.asJson.map { json =>
      json.asOpt[Comment].map { comment =>
        comment.copy(idea = idea).save.fold(
          errors => JsonBadRequest(errors),
          comment => Ok(toJson(comment).toString)
        )
      }.getOrElse     (JsonBadRequest("Invalid Comment entity"))
    }.getOrElse       (JsonBadRequest("Expecting JSON data"))
  }.getOrElse         (JsonBadRequest("Could not find idea with id '%s'".format(ideaId)))
} 
```

我发现所有这些嵌套的 .map 有点烦人，而且我还发现每个错误处理都在底部有点乏味

您将如何改进它以使其更具可读性，同时保持功能性惯用的 scala 代码？

我在想也许是这样的（它是伪代码，仍然无法编译）

```
def save(ideaId : Long) = CORSAction { request =>

  val idea = Idea.findById(ideaId).getOrElse(
    return JsonBadRequest("Could not find idea with id '%s'".format(ideaId)))

  val json = request.body.asJson.getOrElse(
    return JsonBadRequest("Expecting JSON data"))

  val comment = json.asOpt[Comment].getOrElse(
    return JsonBadRequest("Invalid Comment entity"))

  comment.copy(idea = idea).save.fold(
    errors => JsonBadRequest(errors),
    comment => Ok(toJson(comment).toString)
  )

} 
```

ps：我知道最好避免return语句...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:31:33.473

首先要简化。假设我有三个接受 a`String`并返回 a 的方法`Option[String]`：

```
def foo(s: String): Option[String] = if (s.size >= 4) Some(s + "1") else None
def bar(s: String): Option[String] = if (s(0) != 'A') Some(s + "2") else None
def baz(s: String): Option[String] = if (s toSet ' ') Some(s + "3") else None 
```

我想要一个通过这些管道传递字符串的方法，如果我`None`一路走来返回适当的错误消息。我可以这样写：

```
def all(s: String): Either[String, String] =
  foo(s).map { x =>
    bar(x).map { y =>
      baz(y).map { z =>
        Right(z)
      } getOrElse Left("Doesn't contain a space!")
    } getOrElse   Left("Starts with an A!")
  } getOrElse     Left("Too short!") 
```

但是，这并不漂亮。我们可以使用`for`-comprehension 和`toRight`on 方法`Option`来编写更清晰的版本：

```
def all(s: String): Either[String, String] = for {
  x <- (foo(s) toRight "Too short!"              ).right
  y <- (bar(x) toRight "Starts with an A!"       ).right
  z <- (baz(y) toRight "Doesn't contain a space!").right
} yield z 
```

调用`toRight(msg)`an`Option`会给我们一个`Left(msg)`if 它是空的，`Right(whatever)`否则一个。然后我们必须对`Either`with进行正确的投影`.right`，因为 Scala`Either`没有右偏。

在您的情况下，等效项是这样的：

```
def save(ideaId: Long) = CORSAction { request =>
  val saveResult = for {
    idea    <- (Idea.findById(ideaId) toRight "Could not find id"     ).right
    json    <- (request.body.asJson   toRight "Invalid Comment entity").right
    comment <- (json.asOpt[Comment]   toRight "Expecting JSON data"   ).right
    result  <- comment.copy(idea = idea).save().right
  } yield result

  saveResult.fold(
    error => JsonBadRequest(error),
    comment => Ok(toJson(comment).toString)
  )
} 
```

不像您想要的语法那么简洁，但错误消息出现在更合乎逻辑的位置，我们已经摆脱了丑陋的嵌套。

# networking - 如何识别由于错误的社区而成为 SNMP 不成功查询尝试的目标的设备？

> ID：12729774
> 
> 赞同：0
> 
> 时间：2012-10-04T14:39:13.650
> 
> 标签：networking, snmp, mib

使用对 MIB-II 对象的 SNMP 查询，如何识别作为 SNMP 不成功查询尝试的目标的设备，因为这些查询会通知错误的社区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:57:00.467

可以通过 snmpInBadCommunityNames 对象来实现。

# c++ - 用 C++ 编写的 MetaTrader 自定义指标的简单示例？

> ID：12729775
> 
> 赞同：2
> 
> 时间：2012-10-04T14:39:17.027
> 
> 标签：c++, metatrader4

由于我的测试平台和 MT4 之间的技术指标计算存在差异，我决定尝试通过与 MetaTrader 兼容的自定义指标 DLL 将开源 TA-LIB API 引入 MetaTrader。

我知道要让 MetaTrader 可以使用函数，我可以简单地创建一个导出文件，然后在 MT4 代码中使用 #import 声明，但我很难了解如何使用它来用 C 编写自定义指标，然后如何访问它通过 MT4。

我知道这可以做到，但我在互联网上的任何地方都找不到任何示例。

有没有人有任何用 C、C++ 编写的指标的参考或示例模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:48:48.967

我相信您会创建一个 DLL，然后从指标或 EA 中调用它。

在制作 DLL 时进行谷歌搜索和/或访问[http://www.mql4.com](http://www.mql4.com)。

还有一个针对 Metatrader 专家和指标的 Yahoo 小组，其中有很多人可以为您提供更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:50:36.387

Look into your folder `MetaTrader\experts\samples\DLLSample\`, there will be source files:

```
StdAfx.h
ExpertSample.dsp
ExpertSample.dsw
ExpertSample.def
ExpertSample.cpp 
```

There is template for your DLL. Use it.

Don't forget to make correct import from DLL in your MetaTrader.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T21:38:17.297

# 自定义指标。__________________C++ 方面

```
// Setup the standard call specification keyword for the compiler.

#define MQL_EXPORT __declspec(dllexport)

#define WINAPI     __stdcall

MQL_EXPORT void WINAPI aCallToSimpleExternalCustomIndicatorCODE(){
     return;
    } 
```

# 自定义指标。__________________MQL4 侧

```
//

#include <aSimpleExternalCustomIndicatorCODE_HEADER.h>  // should you deploy .h declarations
//

#import       "aSimpleExternalCustomIndicatorCODE.dll"  // #import-<start>
void     aCallToSimpleExternalCustomIndicatorCODE();    //  <fun> interface declaration
#import                                                 // #import-<end>
//

int start(){                                            // MT4.anEventFACTORY -> launched per  each aNewQuoteArrivalEVENT
    aCallToSimpleExternalCustomIndicatorCODE();         // example of a simple external code
    return( 0 );
    } 
```

# node.js - 从节点使用 TypeScript 编译器

> ID：12729779
> 
> 赞同：14
> 
> 时间：2012-10-04T14:39:37.050
> 
> 标签：node.js, typescript

使用咖啡脚本很容易做到这一点。

```
var coffee = require('coffee-script');
coffee.compile("a = 1");
//=> '(function() {\n  var a;\n\n  a = 1;\n\n}).call(this);\n' 
```

有没有办法用打字稿做到这一点？

**编辑：**也[发布在 codeplex](http://typescript.codeplex.com/discussions/398049)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-12-04T12:49:18.237

似乎现在有一个更简单的解决方案，您可以这样做：

```
let ts = require('typescript');
let source = ts.transpileModule('class Test {}', {}).outputText; 
```

这导致：

```
"use strict";
var Test = (function () {
    function Test() {
    }
    return Test;
}()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T14:55:05.023

[Better-require](https://github.com/olalonde/better-require)可以帮助您实现这一目标。

它可以让你 require() typescript 文件——不需要预编译——以及一堆其他文件格式（coffeescript、clojurescript、yaml、xml 等）

```
require('better-require')();
var myModule = require('./mymodule.ts'); 
```

披露：我写了更好的要求。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-04T15:16:21.757

由于 TypeScript 的 NPM 模块不导出任何公共接口，目前唯一的方法是执行该`tsc`过程。

```
var exec = require('child_process').exec;

var child = exec('tsc main.ts',
                function(error, stdout, stderr) {
                    console.log('stdout: ' + stdout);
                    console.log('stderr: ' + stderr);
                    if (error !== null) {
                      console.log('exec error: ' + error);
                    }
                }); 
```

[请求TypeScript 模块的公共接口](https://npmjs.org/package/typescript)[的问题](http://typescript.codeplex.com/workitem/97)已打开。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-07T06:44:51.953

查看niutech 的[这个 github 项目](https://github.com/niutech/typescript-compile)，它可以**在浏览器**中即时将 TypeScript 代码转换为 JS 代码，但我想它可以很容易地修改为在 node.js 中工作。

我在我[的受萤火虫启发的实时代码编辑器](http://liveditor.com)中调查支持 TypeScript 的可能性时发现了它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-15T17:16:57.827

没有直接回答这个问题，但是由于谷歌搜索“直接从节点运行 TypeScript”会打开这个 StackOverflow 页面，我想我应该补充一点，你可以用 ts-node 做到这一点：[https ://github.com/TypeStrong /ts-节点](https://github.com/TypeStrong/ts-node)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-09T05:52:21.903

关于如何使用 TypeScript transpiler API 从 .ts 文件生成 JavaScript 源的官方文档：

[https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#user-content-transpiling-a-single-file](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#user-content-transpiling-a-single-file)

关于如何使用 TypeScript 编译器 API 编译 .ts 文件或 TS 项目的官方文档

[https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#user-content-a-minimal-compiler](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#user-content-a-minimal-compiler)

（后者不回答原始问题，但访问/修改 AST 然后转译为对象语言非常常见，因此它可能很有用）

# php - 有没有办法使用 mink 的 webdriver 扩展和 behat 自动接受未处理的警报？

> ID：12729782
> 
> 赞同：0
> 
> 时间：2012-10-04T14:39:56.613
> 
> 标签：php, webdriver, behat, mink

因此，我注意到 Java 能够使用 Selenium 2.25.0 附带的 UnexpectedAlertBehaviour 功能来处理意外警报。您可以看到[CHANGELOG](https://code.google.com/p/selenium/source/browse/tags/selenium-2.25.0/java/CHANGELOG)。始终接受警报并继续执行脚本对我很有帮助，因为我无法始终预测它们何时会弹出。

如果您使用 Drupal 的 ctools 和它的 ajax 框架进行了任何编码，您就会明白为什么...... Selenium 有时会太快而无法完成 ajax 调用，并且 ctools 会弹出一个对话框，解释为什么 ajax 调用没有完成的错误.

所以最后，是否有可能使用 webdriver 的 rest API（从哪个 mink 的 webdriver 驱动）来执行这个功能？有谁知道如何通过 mink 或 behat 使用 mink 设置它（通过 yaml 或 php 代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:28:34.653

您可以添加一些 js 以在使用此步骤 def 运行功能时禁用警报

```
/**
 * @When /^I disable the alerts$/
 */
public function iDisableTheAlerts()
{
   $javascript = <<<JS
       window.alert = function() {}; 
   JS;       
   $this->getSession()->executeScript($javascript);
} 
```

这实际上只是覆盖了警报函数并返回空值，以便任何 js 都可以继续运行。

根据您的浏览器，如果这不起作用，您可能需要尝试不同的方法来覆盖它。

您可以在您的应用程序中完全禁用警报，而不是通过 behat 注入它，但这仍然会将警报保留为某种......咳咳......“设计所需的功能”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T17:02:54.260

我将 Selenium 用于 PHP，这是我的工作解决方案：

```
try {
    // actions to open alert
} catch (UnexpectedAlertOpenException $e) {
    if ($i->isWebDriver()) {
        $i->executeInSelenium(function (\RemoteWebDriver $webDriver) {
            $webDriver->switchTo()->alert()->dismiss();
        });
    }
} 
```

# linux - mv：无法统计错误：没有这样的文件或目录错误

> ID：12729784
> 
> 赞同：4
> 
> 时间：2012-10-04T14:39:58.813
> 
> 标签：linux, bash, stat

我需要将一个目录的文件移动到另一个目录。使用以下程序时出现统计错误。

```
for i in dir1/*.txt_dir; do
mv $i/*.txt  dir2/`basename $i`.txt
done 
```

错误信息

```
mv: cannot stat `dir1/aa7.txt_dir/*.txt': No such file or directory 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T10:02:42.860

通常，当扩展不匹配任何文件名的 glob 时，它保持不变。因此，您会得到如下结果：

$ rm *.bak rm: 无法删除 `* .bak': 没有这样的文件或目录

为了避免这种情况，我们需要更改 nullglob 变量的默认值。

```
 #BASH

    shopt -s nullglob

    for i in dir1/*.txt_dir; do
       mv $i/*.txt  dir2/'basename $i'.txt
    done 
```

在此处阅读更多信息：http: [//mywiki.wooledge.org/NullGlob](http://mywiki.wooledge.org/NullGlob)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T14:48:11.977

```
mv $i/*.txt  dir2/`basename $i`.txt 
```

当`$i/`. 外壳将原始字符串传递`"$i/*.txt"`给`mv`其中未扩展`*`的字符串，这会`mv`阻塞。

尝试这样的事情：

```
for i in dir1/*.txt_dir; do
    find $i -name '*.txt' -exec mv {} dir2/`basename $i`.txt \;
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-05T16:48:06.703

当您将 directory/* 单独放入迭代时，它会列出每个文件的绝对路径。使用`ls

我在`ls dir1/*.txt_dir`；做

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-27T13:06:52.460

虽然您的示例中没有显示 - 使用正确的引号很重要。在 BASH 中，"*" 计算为 * 并且 '*' 计算为扩展 glob。所以

```
`ls *` 
```

将显示目录中的所有文件和

```
`ls "*"` 
```

将显示所有名为 * 的文件

# ms-access - 需要滚动条位置或可见记录信息访问 2010 连续表格

> ID：12729786
> 
> 赞同：1
> 
> 时间：2012-10-04T14:40:11.317
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

问题在最后给出。在它出现之前关于我尝试过的一些细节之后。

编辑：我想在技术方面我正在寻找滚动条拇指位置。

关于我的问题的一些背景：我在我工作的工程公司创建了一个访问数据库来存储/跟踪问题数据，每个问题都有 15 个左右的数据字段和一张图片。由于外出使用的频率（数据存储在网络服务器上，数据库对每个用户来说都是本地的），由于生成的数据库的巨大大小，图片没有嵌入到每条记录中，而是存储在带有 db 表的服务器，并且每条记录都包含位置信息，以便在选择时，每条记录都会动态嵌入来自其存储位置的图片。这样做的原因当然是为了减少数据库大小并加快从远程位置加载。

言归正传……

所以继续前进，昨天我们回顾了我到目前为止的想法，一些未来的用户希望我包含一个连续的表单，他们可以滚动浏览以通过图片快速识别特定问题，它将显示在连续形式的每次重复形式上。好吧，这违背了我为使这个数据库使用起来不会慢得令人痛苦的目的和所有努力。如果我完全按照要求进行操作，则每次加载表单时，访问都必须为每个问题插入图片，这可能会非常缓慢。

实际的问题...

我对他们的请求的第一个想法是：如果我以某种方式做到了，这样访问只会在图片滚动到/上方时运行插入图片的代码。

我的逻辑是：尽管如果用户滚动浏览所有记录，它仍然必须加载所有图片，但我可以在代码中编写让它等待 x 秒或类似的东西，除此之外，无论哪种方式都会延长加载时间，这样用户就不那么明显了，对吧？

我的实际问题！！！

那么有没有办法知道，对于一个连续的形式，滚动条的位置是什么？我在互联网上广泛搜索了一个可行的解决方案，但一无所获。

# jquery - Google 地图中损坏的 jQuery 手风琴

> ID：12729793
> 
> 赞同：0
> 
> 时间：2012-10-04T14:40:31.987
> 
> 标签：jquery, google-maps-api-3, jquery-ui-accordion

我试图在谷歌地图中显示一个 jQuery 手风琴**，**我让它工作，但是当我从手风琴菜单上点击时，当我重新打开它时它不会充当手风琴。我不知道如何在不从头开始创建自己的手风琴的情况下修复它。关于如何使其正常工作的任何帮助？

[http://mulibraries.missouri.edu/Reference/virtour/demo_fs_mobile.php](http://mulibraries.missouri.edu/Reference/virtour/demo_fs_mobile.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:25:19.870

您还需要使用事件再次创建这些元素。

我改进了你的代码`jQuery`，试试这个：

```
function HomeControl(controlDiv, map) {
    var menu_btn = $("<div>");
    menu_btn.attr('id', 'menu_btn');
    menu_btn.attr('title', 'Click to show the Map Navigation');
    menu_btn.html('<b>Menu</b>');
    menu_btn.css({
        backgroundColor: 'white',
        cursor: 'pointer',
        textAlign: 'center',
    });

    $(menu_btn).click(function() {
        $(controlDiv).empty();

        menu_state = 1;

        var menu_nav = $("<div>");
        menu_nav.attr('id', 'menu_nav');
        menu_nav.attr('title', 'Click Map to close Menu');
        menu_nav.css({
            backgroundColor: 'white',
            cursor: 'pointer',
            textAlign: 'center',
        });

        var accordion = $('<div id="accordion"><h3><a href="#">Change Library</a></h3> <div>Ellis<br>Engineering<br>Journalism</div><h3><a href="#">Change Floor</a></h3> <div>Ground Floor<br>First Floor<br>Second Floor<br>Third Floor<br>Fourth Floor<br></div> <h3><a href="#">Change Map</a></h3> <div>Virtual Tour<br>Video Tour<br>Study Rooms<br>Computers</div></div>');

        $(menu_nav).append(accordion);
        $(controlDiv).append(menu_nav);

        $(accordion).accordion({active: 1, autoHeight: false});
    });

    $(controlDiv).empty();
    $(controlDiv).append($(menu_btn).clone(true));

    google.maps.event.addDomListener(map, 'click', function() {
        menu_state = 0;

        $(controlDiv).empty();
        $(controlDiv).append($(menu_btn).clone(true));
    });
} 
```

希望这可以帮助。

# database - 具有 3 个键的数据库表

> ID：12729795
> 
> 赞同：1
> 
> 时间：2012-10-04T14:40:33.827
> 
> 标签：database, database-design, relational-database

`student`我在和之间有多对多的关系`classes`。

我创建了另一个表（联结表）`student_classes`来保存 的主键`student`和主键`class`，这使得多对多关系可以建模为标准数据库设计。

我还有另一个名为 的表`books`，其中包含特定课程的核心书籍。

学生可以选择他/她想在课堂上使用哪一本核心书籍*。*我打算把它加到`classes`桌子上，但书的选择取决于学生。

然后我认为如果 Ii 可以将它映射到连接表上将是理想的 - 这似乎合乎逻辑，因为核心书籍不仅取决于学生，还取决于班级。

让连接表持有这本书的另一把钥匙，这是一个好的设计吗？

所以表：

```
[student]
stduent_id

[classes]
classes_id

[book]
book_id

[student_classes]
student_id
classes_id
book_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:47:01.383

在此模型中（根据您的描述），学生对于给定的主题只能使用一本书，如果您需要多本书，则进入表格`BookID`的主键。`StudentBook`请注意，表中有两个外键`StudentBook`：`FK1 {StudentID, SubjectID}`和`FK2 {SubjectID, BookID}`。

![在此处输入图像描述](../Images/aa27d96eec51ad6d67c5b270dce746e2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:58:05.840

对于您描述的情况，您提出的模型将起作用，因为松散地说：

*   主键唯一地定义表中的一行（实体）
*   表中的所有其他列都是主键的属性
*   这里，主键是 stduent_id + classes_id
*   正确来说，book_id 是stduent_id + classes_id的一个*属性*

需要明确的是：不要让 book_Id 成为主键的一部分，你很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:43:56.383

我想你想要：

```
[student_classes] student_id classes_id 
[student_classes_books] student_id classes_id book_id 
```

这将允许学生在需要时选择不止一本书。根据我的经验，许多课程需要不止一个核心文本。

# c# - 报告目录统计信息

> ID：12729796
> 
> 赞同：0
> 
> 时间：2012-10-04T14:40:37.570
> 
> 标签：c#, asp.net, excel

我需要创建一个小型 C# 控制台应用程序来在本地计算机上的目录上运行报告。该报告将是一个 Excel 文档，包含 3 列，包括：列中每个文件夹的名称、文件夹是否包含任何数据、文件夹是否包含上次更新时间的数据。我目前的想法是一个小型 C# 控制台应用程序，它读取目录遍历每个文件夹并执行这些测试，一次创建一行。我对 C# 相当陌生，不知道如何执行此操作。我尝试了以下代码：

```
static void Main(string[] args)
        {
            string[] filePaths = Directory.GetFiles(@"C:/TestFolder/");

            foreach (string value in filePaths)
            {
                Console.WriteLine(value);

            }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:46:41.343

你应该：

*   使用`DirectoryInfo`and`FileInfo`代替`Directory`and `File`（提供更多信息，而不仅仅是文件名）
*   使用`EnumerateFiles`代替`GetFiles`（枚举文件而不是一次全部检索）
*   对其属性中`FileInfo`包含`Directory`属性的每个检索到的内容递归执行`Attributes`

所以类似于（代码直接来自头部，未编译和未经测试）：

```
// in your caller method
ProcessFolder(@"C:/TestFolder/");

void ProcessFolder(string path)
{
    foreach (var file in DirectoryInfo.EnumerateFiles(path))
    {
        if(file.Attributes & FileAttributes.Directory == FileAttributes.Directory)
            ProcessFolder(file.FullName); // recursively handle a directory
        else
            Console.Out.Writeline(file.FullName); // handle a file
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:54:36.703

我没有做任何事情来清理这里的输出并使用一个简单的字符串数组作为内容，但可以随意清理它。

考虑没有子文件夹：

```
 static void Main(string[] args)
    {
        DirectoryInfo di = new DirectoryInfo("c:\\offTopic");
        var data = di.EnumerateDirectories()
            .Select(a => 
                new string[] 
                {   a.Name, 
                    "" + (a.EnumerateFiles().Count() > 0), 
                    "" + a.EnumerateFileSystemInfos().Max(b => b.LastWriteTime) 
                });

       foreach (var x in data)
       {
           Console.WriteLine(string.Join(",", x));
       }

    } 
```

然后，您必须将这些内容写到一个后缀为 CSV（逗号分隔值）的文件中，该文件可以由 Excel 打开。

# javascript - 在 Javascript 中查找元素列表

> ID：12729810
> 
> 赞同：0
> 
> 时间：2012-10-04T14:41:04.557
> 
> 标签：javascript

我创建了一个函数，它创建一个新的 img 并将其放入每个具有“绘制”css 类的标签中：

```
function putPiece(){
    var painted = document.querySelectorAll('.painted');

for (var i = 0, len = painted.length; i < len; i++) {
    var a = i+1
    var squareID = painted[i].id;
    painted[i].taken = 'BP'+a;

    var img = document.createElement("img");
    painted[i].appendChild(img);
    img.id = "BP"+a; //unique ID for every img
    img.src = "blackP.png"; //the image to use
    img.pstn = squareID; //the ID of the <td> it's in

}
} 
```

如上所述，我为每个对象赋予了属性。现在我想创建一个包含所有“img”对象的“img.pstn”的数组。有任何想法吗？提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:43:01.270

在循环外创建一个空数组，并在循环底部添加：

```
arr.push(squareID); 
```

# java - Android 上的 WiFi Direct 无法正常工作

> ID：12729814
> 
> 赞同：5
> 
> 时间：2012-10-04T14:41:07.643
> 
> 标签：java, android, android-4.2-jelly-bean, wifi-direct

我正在尝试在 android Jelly Bean 4.1.1 中使用 wifi direct 开发一个应用程序。如果启用了 p2p，我会立即致电

```
mManager.discoverPeers(mChannel, actionListener); 
```

之后，我接到回电

```
onPeersAvailable(WifiP2pDeviceList) 
```

我正在使用 2 个 Samsung(Google) Nexus 设备进行测试，并且 wifi direct 都已打开。但是这个回调返回的是一个空的对等点列表。但是例如，如果我立即单击默认 wifi 直接接口上的**Search Peers按钮，第二个设备就会触发**

> WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION

而这反过来调用

```
onPeersAvailable(WifiP2pDeviceList peers) 
```

因为我正在使用该事件请求同行

```
mManager.requestPeers(mChannel, WifiDirectService.this); 
```

这一次我就能看到同行了。我多次看到这个。

可能的原因是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:46:21.493

您应该使用 Discovering peermethod：

```
manager.discoverPeers(channel, new WifiP2pManager.ActionListener() {
    @Override
    public void onSuccess() {
        ...
    }

    @Override
    public void onFailure(int reasonCode) {
        ...
    }
}); 
```

如果发现过程成功并检测到对等点，系统会广播 WIFI_P2P_PEERS_CHANGED_ACTION 意图，您可以在广播接收器中侦听该意图以获取对等点列表。当您的应用程序收到 WIFI_P2P_PEERS_CHANGED_ACTION 意图时，您可以使用 requestPeers() 请求已发现对等点的列表。

有关完整示例，请查看：http: [//developer.android.com/guide/topics/connectivity/wifip2p.html#discovering](http://developer.android.com/guide/topics/connectivity/wifip2p.html#discovering)

# c# - ASP.NET MVC3 用户登录

> ID：12729821
> 
> 赞同：2
> 
> 时间：2012-10-04T14:41:41.637
> 
> 标签：c#, asp.net, asp.net-mvc, membership

我有一个用户模型：

```
[Required]
public string Password { get; set; }

[Required]
public string UserName { get; set; } 
```

我有一个`MyMembershipProvider : MembershipProvider`包含：

```
public override bool ValidateUser(string username, string password)
{
   if (username == ConfigurationManager.AppSettings["DefaultUsername"] && password == ConfigurationManager.AppSettings["DefaultUserPassword"])
   {
       return true;
   }
   else
   {
       return false;
   }
} 
```

我的登录操作如下所示：

```
[HttpPost]
    public ActionResult LogOn(User model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                return RedirectToAction("Index", "Home");
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

问题：

当我指定正确的用户名和密码时，我似乎无法转到包含该`[Authorize]`属性的操作和控制器。当我使用断点时，它确实落入`return RedirectToAction("Index", "Home");`但拒绝访问索引页面。

任何人都可以看到我要去哪里可怕的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:47:53.237

您需要设置身份验证 cookie，以便下一个操作识别用户已通过身份验证。

```
....
if (Membership.ValidateUser(model.UserName, model.Password))
{
    FormsAuthentication.SetAuthCookie(model.UserName, true);
    return RedirectToAction("Index", "Home");
}
.... 
```

# c++ - 为什么 MSVC 10.0 编译器经常忽略 inline 关键字？

> ID：12729822
> 
> 赞同：4
> 
> 时间：2012-10-04T14:41:42.620
> 
> 标签：c++, visual-c++, inlining

我有一些非常复杂的 C++ 代码，用于实时系统，因此对速度绝对敏感。它是在 Linux 上开发的，为了加快速度，许多函数都标有“inline”关键字，并移到头文件中以允许内联。

现在我将此代码移植到 Windows（msvc 10.0、Windows 7），它的运行速度慢了大约 30%。在做了一些分析之后，我发现问题基本上是很多函数没有内联。当我改用“__forceinline”时，我很容易看到大约 10-20% 的加速。

有人对此有解释吗？仅仅是msvc中的算法更保守吗？还是我做错了什么，比如缺少配置选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:51:31.617

您需要检查您的 MSVC 优化设置：

```
Project Properties -> C/C++ -> Optimization 
```

有一个设置`"Favor size or speed"`，它极大地改变了编译器准备做多少内联。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T14:55:12.463

> 是什么`inline`？

`inline`是一个关键字，它向编译器发出信号，表明方法定义是内联的。通常，一个方法应该只定义在一个 TU（大致是源文件）中，并`inline`允许在头文件中定义一个方法，该方法将包含在许多不同的 TU 中，并避免编译器/链接器对*重复符号*的抱怨。链接器将适当地合并符号。

> 什么**不是** `inline`？

`inline`绝不是编译器内联函数的命令。从历史上看，它可能一直被这样使用，但优化器在决定何时（而不是）内联方面已经变得越来越好，而`inline`“提示”现在几乎没有效果。

> 如何执行内联？

编译器通常提供特定的关键字/属性来要求“更多”内联。例如，在 MSVC 中，`__forceinline`将*强烈*暗示（但仍然只是暗示）该方法应该被内联。

# ruby-on-rails - 将新数据加载到 jqgrid 不起作用

> ID：12729823
> 
> 赞同：0
> 
> 时间：2012-10-04T14:41:46.660
> 
> 标签：ruby-on-rails, jqgrid

在我的 ruby​​ on rails 应用程序中，我有如下的 jquery 网格。根据 projectId，数据应显示在网格上。但它不是那样工作的。我观察到 url 没有根据 projectId 改变。

```
function editTeam_details(projectId)
{
    $("#grdProjectIdentification").jqGrid({

            url:'/project_identification_team?project_id='+projectId,

            colNames: ["Sr.No","Team Leader"],

            colModel: [
            {
                name: "Sr No",
                index: "Sr No",
                width: 15,
                align: "left",
                sortable:true
            },
            {
                name: "Team Leader",
                index: "Team Leader",
                width: 35,
                align: "left",
                sortable:false
            }],
    width: 800,
            height: 100,
            // Paging
            paging : true,
            toppager: true,
            loadonce : false,
            rowNum:20,
            rowList:[20,40,60],
            viewrecords: true,  
            pager: '#pagerProjectIdentification', 
            datatype: 'json',
            sortorder: "desc",
            multiselect: false,
            caption: "1\. Project Identification"
        }).jqGrid("navGrid", "#pagerProjectIdentification", {
            edit: true,
            add: true,
            del: true,
            search: true,
            refresh: true
        },
        {}, // settings for edit
        {},
        {}, // settings for del
        {}, // settings for delete
        {
            sopt: ["cn"]
        } // Search options. Some options can be set on column level

        )
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:47:31.353

你应该尝试更换

```
url:'/project_identification_team?project_id='+projectId 
```

至

```
url: '/project_identification_team',
postData: {
    project_id: function () {
        return projectId;
    }
} 
```

在这种情况下，`project_id`将通过在对服务器的每个请求上调用相应的函数来评估 URL 的参数值。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:23:36.510

谢谢你的回复，奥列格。

我尝试了以下方法，它奏效了。

$("#grdProjectIdentification").GridUnload(); ajaxGridOptions：{缓存：假}

# javascript - 在 JavaScript 类中调用父方法

> ID：12729824
> 
> 赞同：3
> 
> 时间：2012-10-04T14:41:47.017
> 
> 标签：javascript, methods, call, parent

在没有什么之前，我是新人，我很高兴加入这个伟大的社区。问题是，我有一个名为 Character 的 JavaScript 类，如下所示：

```
var Character = function()

{

    // ..Some previous Properties / Methods (included one called "StareDown()")..

    // And this method:

    this.GrabDown = function()

    {
        Context.clearRect(0, 0, CanvasWidth, CanvasHeight);
        //Context.fillRect(0, 0, CanvasWidth, CanvasHeight);
        Context.drawImage(this.GrabbingDown, CharacterX, CharacterY, SpriteWidth, SpriteHeight);

        window.setTimeout
        (
            function()

            {
                // Here is where I want to call the parent class method "StareDown()", but I don't know how.                
            },
            250
        );
    }
} 
```

所以这是我的大问题，如何通过该子匿名函数访问父方法？我整晚都在试图弄清楚，但我找不到一些有用的信息，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:18.350

您需要将`this`父对象存储在变量中（假设您已将函数定义为`this.StareDown = function () {...}`

```
var Character = function()

{

    // ..Some previous Properties / Methods (included one called "StareDown()")..
    this.StareDown = function() {...}

    var curCharacter = this;

    this.GrabDown = function()

    {
        Context.clearRect(0, 0, CanvasWidth, CanvasHeight);
        //Context.fillRect(0, 0, CanvasWidth, CanvasHeight);
        Context.drawImage(this.GrabbingDown, CharacterX, CharacterY, SpriteWidth, SpriteHeight);

        window.setTimeout
        (
            function()

            {
                // Here is where I want to call the parent class method "StareDown()", but I don't know how.       
                curCharacter.StareDown(...);         
            },
            250
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:48:59.790

您可以只使用`window.setTimeout(this.StareDown,250);`，但请记住该方法将在全局上下文中调用（即 this 将指向`window`，而不是`Character`调用该`GrabDown`方法的实例。

要将函数用作对象方法：

```
window.setTimeout((function(that)
{
    return function()
    {
        return that.StareDown();
    }
})(this),250); 
```

应该管用。这相当冗长，也许查看 MDN 文档`call`，`apply`尤其`bind`可能证明有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:11:19.727

这就是我会做的：

```
var Character = function () {
    this.GrabDown = function () {
        setTimeout(function () {
            // call this.StareDown in here
        }.bind(this), 250);
    };
}; 
```

这是有效的，因为我们将指针绑定到传递给`this`的匿名对象。因此它可以像类的普通方法一样使用。`FunctionExpression``setTimeout`

# c++ - c++ 基于成员存在的条件编译

> ID：12729827
> 
> 赞同：3
> 
> 时间：2012-10-04T14:41:56.527
> 
> 标签：c++, templates

> **可能重复：**
> [是否可以编写 C++ 模板来检查函数是否存在？](https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-c-template-to-check-for-a-functions-existence)

在 JavaScript 等语言中，您可以检查属性是否存在

```
// javascript
if( object['property'] ) // do something 
```

在 C++ 中，我想根据类型`T`是否具有特定属性来条件编译。这可能吗？

```
template <typename T>
class IntFoo
{
  T container ;
public:
  void add( int val )
  {
    // This doesn't work, but it shows what I'm trying to do.
    // if the container has a .push_front method/member, use it,
    // otherwise, use a .push_back method.
    #ifdef container.push_front
    container.push_front( val ) ;
    #else
    container.push_back( val ) ;
    #endif
  }

  void print()
  {
    for( typename T::iterator iter = container.begin() ; iter != container.end() ; ++iter )
      printf( "%d ", *iter ) ;

    puts( "\n--end" ) ;
  }
} ;

int main()
{
  // what ends up happening is 
  // these 2 have the same result (500, 200 --end).
  IntFoo< vector<int> > intfoo;
  intfoo.add( 500 ) ;
  intfoo.add( 200 ) ;
  intfoo.print() ;

  // expected that the LIST has (200, 500 --end)
  IntFoo< list<int> > listfoo ;
  listfoo.add( 500 ) ;
  listfoo.add( 200 ) ; // it always calls .push_back

  listfoo.print();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T16:11:56.917

以下示例演示了一种可以使用的技术（在 C++11 中，使用[SFINAE 表示表达式](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html)）：

```
typedef char no;
typedef no (&yes)[2];

no detect_push_front( ... );

template < class C >
auto detect_push_front( C &c ) -> typename std::conditional< false, decltype( c.push_front( std::declval< typename C::value_type >() ) ), yes >::type;

template < class C >
struct has_push_front : std::integral_constant< bool, sizeof( detect_push_front( std::declval< C & >() ) ) == sizeof( yes ) > {};

template < class C >
void add( C &c, typename C::value_type v, std::true_type )
{
    c.push_front( v );
}

template < class C >
void add( C &c, typename C::value_type v, std::false_type )
{
    c.push_back( v );
}

template < class C >
void add( C &c, typename C::value_type v )
{
    add( c, v, has_push_front< C >() );
}

int main()
{
    std::vector< int > v;
    add( v, 0 );
    add( v, 1 );
    add( v, 2 );
    std::copy( v.begin(), v.end(), std::ostream_iterator< int >( std::cout, " " ) );
    std::cout << '\n';

    std::list< int > l;
    add( l, 0 );
    add( l, 1 );
    add( l, 2 );
    std::copy( l.begin(), l.end(), std::ostream_iterator< int >( std::cout, " " ) );
    std::cout << '\n';
} 
```

输出：

```
0 1 2
2 1 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:50:20.640

据我所知，在 C++ 中实现“条件编译”的唯一方法是使用预处理器指令，例如`ifdef`and `ifndef`。我不存在任何其他技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:51:10.563

你不能这样做，但你可以有类似的东西

```
template<T,TT> void push_there(T& c,T& i) { c.push_back(i); } 
```

以及具有`push_front`. 或者反过来。

# java - 运行时动态绑定和类继承的区别

> ID：12729828
> 
> 赞同：6
> 
> 时间：2012-10-04T14:41:58.673
> 
> 标签：java, c++, python, ruby, compiler-construction

我试图澄清动态语言（Python、ruby）和静态类型语言（java、C++）中运行时动态绑定和类继承的概念。我不确定我是否正确。

在 Python 和 Ruby 等动态语言中，运行时动态绑定被实现为鸭子类型。当解释器检查对象的类型时，它检查对象是否具有特定的方法（或行为）而不是检查对象的类型；并且运行时动态绑定并不意味着类继承。类继承只是减少了 Python 和 Ruby 中的代码复制。

在 Java 和 C++ 等静态类型语言中，运行时动态绑定只能通过类继承获得。类继承不仅减少了这里的代码拷贝，还用于实现运行时动态绑定。

**总之，类继承和运行时动态绑定是两个不同的概念。在 Python 和 Ruby 中，它们完全不同。在 Java 和 C++ 中，它们混合在一起。**

我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:58:12.680

您是正确的，因为运行时动态绑定在概念上与类继承完全不同。

但是当我重新阅读您的问题时，我认为我不会同意“Java 和 C++，运行时动态绑定是作为类继承实现的”。类继承只是更广泛行为的定义，包括现有类的现有行为。此外，运行时绑定*不一定*与面向对象有关。它只能指延迟方法解析。

类继承是指如何构建对象的“模板”，具有越来越精细的行为以及连续的子类。运行时动态绑定只是一种说法，即对方法的引用（例如）被推迟到执行时。在给定的语言中，特定类可以利用运行时动态绑定，但在*编译*时解析继承的类。

简而言之，*继承*是指对象的*定义*或*蓝图*。运行时动态绑定在最基本的层面上只是一种在执行时解析方法调用的机制。

**编辑**我确实需要澄清一点：Java 在*重写*的类方法上实现动态绑定，而 C++ 在运行时通过多态性确定类型，所以我说动态绑定与类继承“没有关系”是不准确的. 在“宏”级别上，它们本质上并不相关，但给定的语言可能会在其继承机制中利用它。

# android - 用动画展开 ListView 项

> ID：12729830
> 
> 赞同：38
> 
> 时间：2012-10-04T14:42:01.107
> 
> 标签：android, android-listview, android-animation, expandablelistview, expandablelistadapter

我有一个`ListView`. 最初，`ListView`包含一些数据。当用户单击一个项目时，另一个布局将动态添加到该项目，因此它的高度将增加。

现在，当项目的高度增加时，它会立即显示修改后的项目。但是，我想要的是对此进行动画处理，以便逐渐增加项目的高度。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-02T04:06:16.117

我想我正在寻找与所要求的相同的东西，我正在寻找一种方法来动画列表视图项目的扩展，因为显示了一些新内容（我只是将某些视图的可见性从 更改`GONE`为`VISIBLE`）。我使用答案`mirroredAbstraction`来帮助我应用翻译动画（我不想要旋转动画）：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator"
android:fromYDelta="0"
android:toYDelta="-100%p"
android:duration="500"   
/> 
```

到每个视图。它创造了一个很好的效果，但仔细观察，listview 项目实际上突然扩展到所需的整个大小，然后动画将视图放置到位。但我想要的是随着视图变得可见，listview 项的效果会逐渐下降。

我在这里找到了我想要的东西： [expanding-listview-items](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)

博主有一个指向他的 github 示例的链接，这里是： [ExpandAnimationExample](https://github.com/Udinic/SmallExamples/tree/master/ExpandAnimationExample)

如果您发现这些网站不见了，请通知我，我将提供我的副本。

他在内容上设置了负边距以使其可见，并将可见性设置为`GONE`：

```
android:layout_marginBottom="-50dip" 
```

并编写了一个操纵底部边距的动画：

```
public class ExpandAnimation extends Animation {
...
    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);

        if (interpolatedTime < 1.0f) {

            // Calculating the new bottom margin, and setting it
            mViewLayoutParams.bottomMargin = mMarginStart
                    + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

            // Invalidating the layout, making us seeing the changes we made
            mAnimatedView.requestLayout();
        }
        ...
    }
} 
```

它看起来很漂亮。我找到了他对这个 SO（可能重复？）问题的回答：

[向 ListView 添加动画以展开/折叠内容](https://stackoverflow.com/questions/3851420/adding-animation-to-a-listview-in-order-to-expand-collapse-content)

另外，如果您知道做同样事情的另一种方法，请告诉我。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-04T01:04:07.917

我已经实现了一个适用于所有 Android sdk 版本的简单代码。

请参阅下面的工作和代码。

Github 代码：[https ://github.com/LeonardoCardoso/Animated-Expanding-ListView](https://github.com/LeonardoCardoso/Animated-Expanding-ListView)

有关我网站的信息：[http ://android.leocardz.com/animated-expanding-listview/](http://android.leocardz.com/animated-expanding-listview/)

![普通的](../Images/120c98fcdcfcca4a22dd2d25420b5fcb.png) ![手风琴](../Images/b2ceee294f9564090e699d12dbee9777.png)

基本上，您必须创建一个自定义 TranslateAnimation 和一个自定义列表适配器，并且在动画时，您必须更新列表视图项的当前高度并通知适配器此更改。

让我们看一下代码。

1.  列表项布局

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/text_wrap"
           android:layout_width="match_parent"
           android:layout_height="wrap_content"
           android:orientation="horizontal"
           android:paddingBottom="@dimen/activity_vertical_margin"
           android:paddingLeft="@dimen/activity_horizontal_margin"
           android:paddingRight="@dimen/activity_horizontal_margin"
           android:paddingTop="@dimen/activity_vertical_margin" >

           <TextView
               android:id="@+id/text"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:textSize="18sp" >
           </TextView>

    </LinearLayout> 
    ```

2.  活动布局

    ```
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:tools="http://schemas.android.com/tools"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              tools:context=".MainActivity" >

              <ListView
                  android:id="@+id/list"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:divider="@android:color/black"
                  android:dividerHeight="3dp" >
              </ListView>

          </RelativeLayout> 
    ```

3.  列表项类

    ```
    public class ListItem {

    private String text;
    private int collapsedHeight, currentHeight, expandedHeight;
    private boolean isOpen;
    private ListViewHolder holder;
    private int drawable;

    public ListItem(String text, int collapsedHeight, int currentHeight,
            int expandedHeight) {
        super();
        this.text = text;
        this.collapsedHeight = collapsedHeight;
        this.currentHeight = currentHeight;
        this.expandedHeight = expandedHeight;
        this.isOpen = false;
        this.drawable = R.drawable.down;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public int getCollapsedHeight() {
        return collapsedHeight;
    }

    public void setCollapsedHeight(int collapsedHeight) {
        this.collapsedHeight = collapsedHeight;
    }

    public int getCurrentHeight() {
        return currentHeight;
    }

    public void setCurrentHeight(int currentHeight) {
        this.currentHeight = currentHeight;
    }

    public int getExpandedHeight() {
        return expandedHeight;
    }

    public void setExpandedHeight(int expandedHeight) {
        this.expandedHeight = expandedHeight;
    }

    public boolean isOpen() {
        return isOpen;
    }

    public void setOpen(boolean isOpen) {
        this.isOpen = isOpen;
    }

    public ListViewHolder getHolder() {
        return holder;
    }

    public void setHolder(ListViewHolder holder) {
        this.holder = holder;
    }

    public int getDrawable() {
        return drawable;
    }

    public void setDrawable(int drawable) {
        this.drawable = drawable;
    }
    } 
    ```

4.  查看持有人类

    ```
    public class ListViewHolder {
     private LinearLayout textViewWrap;
     private TextView textView;

     public ListViewHolder(LinearLayout textViewWrap, TextView textView) {
        super();
        this.textViewWrap = textViewWrap;
        this.textView = textView;
     }

     public TextView getTextView() {
            return textView;
     }

     public void setTextView(TextView textView) {
        this.textView = textView;
     }

     public LinearLayout getTextViewWrap() {
        return textViewWrap;
     }

     public void setTextViewWrap(LinearLayout textViewWrap) {
        this.textViewWrap = textViewWrap;
     }
    } 
    ```

5.  自定义动画类

    ```
     public class ResizeAnimation extends Animation {
        private View mView;
        private float mToHeight;
        private float mFromHeight;

        private float mToWidth;
        private float mFromWidth;

        private ListAdapter mListAdapter;
        private ListItem mListItem;

        public ResizeAnimation(ListAdapter listAdapter, ListItem listItem,
                float fromWidth, float fromHeight, float toWidth, float toHeight) {
            mToHeight = toHeight;
            mToWidth = toWidth;
            mFromHeight = fromHeight;
            mFromWidth = fromWidth;
            mView = listItem.getHolder().getTextViewWrap();
            mListAdapter = listAdapter;
            mListItem = listItem;
            setDuration(200);
        }

        @Override
        protected void applyTransformation(float interpolatedTime, Transformation t) {
            float height = (mToHeight - mFromHeight) * interpolatedTime
                    + mFromHeight;
            float width = (mToWidth - mFromWidth) * interpolatedTime + mFromWidth;
            LayoutParams p = (LayoutParams) mView.getLayoutParams();
            p.height = (int) height;
            p.width = (int) width;
            mListItem.setCurrentHeight(p.height);
            mListAdapter.notifyDataSetChanged();
        }
      } 
    ```

6.  自定义列表适配器类

    ```
    public class ListAdapter extends ArrayAdapter<ListItem> {
    private ArrayList<ListItem> listItems;
    private Context context;

    public ListAdapter(Context context, int textViewResourceId,
        ArrayList<ListItem> listItems) {
    super(context, textViewResourceId, listItems);
    this.listItems = listItems;
    this.context = context;
    }

    @Override
    @SuppressWarnings("deprecation")
    public View getView(int position, View convertView, ViewGroup parent) {
    ListViewHolder holder = null;
    ListItem listItem = listItems.get(position);

    if (convertView == null) {
        LayoutInflater vi = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.list_item, null);

        LinearLayout textViewWrap = (LinearLayout) convertView
                .findViewById(R.id.text_wrap);
        TextView text = (TextView) convertView.findViewById(R.id.text);

        holder = new ListViewHolder(textViewWrap, text);
    } else
        holder = (ListViewHolder) convertView.getTag();

    holder.getTextView().setText(listItem.getText());

    LayoutParams layoutParams = new LayoutParams(LayoutParams.FILL_PARENT,
            listItem.getCurrentHeight());
    holder.getTextViewWrap().setLayoutParams(layoutParams);

    holder.getTextView().setCompoundDrawablesWithIntrinsicBounds(
            listItem.getDrawable(), 0, 0, 0);

    convertView.setTag(holder);

    listItem.setHolder(holder);

    return convertView;
    }

    } 
    ```

7.  主要活动

    ```
    public class MainActivity extends Activity {

    private ListView listView;
    private ArrayList<ListItem> listItems;
    private ListAdapter adapter;

    private final int COLLAPSED_HEIGHT_1 = 150, COLLAPSED_HEIGHT_2 = 200,
        COLLAPSED_HEIGHT_3 = 250;

    private final int EXPANDED_HEIGHT_1 = 250, EXPANDED_HEIGHT_2 = 300,
        EXPANDED_HEIGHT_3 = 350, EXPANDED_HEIGHT_4 = 400;

    private boolean accordion = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listView = (ListView) findViewById(R.id.list);

    listItems = new ArrayList<ListItem>();
    mockItems();

    adapter = new ListAdapter(this, R.layout.list_item, listItems);

    listView.setAdapter(adapter);

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            toggle(view, position);
        }
    });
    }

    private void toggle(View view, final int position) {
    ListItem listItem = listItems.get(position);
    listItem.getHolder().setTextViewWrap((LinearLayout) view);

    int fromHeight = 0;
    int toHeight = 0;

    if (listItem.isOpen()) {
        fromHeight = listItem.getExpandedHeight();
        toHeight = listItem.getCollapsedHeight();
    } else {
        fromHeight = listItem.getCollapsedHeight();
        toHeight = listItem.getExpandedHeight();

        // This closes all item before the selected one opens
        if (accordion) {
            closeAll();
        }
    }

    toggleAnimation(listItem, position, fromHeight, toHeight, true);
    }

    private void closeAll() {
    int i = 0;
    for (ListItem listItem : listItems) {
        if (listItem.isOpen()) {
            toggleAnimation(listItem, i, listItem.getExpandedHeight(),
                    listItem.getCollapsedHeight(), false);
        }
        i++;
    }
    }

    private void toggleAnimation(final ListItem listItem, final int position,
        final int fromHeight, final int toHeight, final boolean goToItem) {

    ResizeAnimation resizeAnimation = new ResizeAnimation(adapter,
            listItem, 0, fromHeight, 0, toHeight);
    resizeAnimation.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            listItem.setOpen(!listItem.isOpen());
            listItem.setDrawable(listItem.isOpen() ? R.drawable.up
                    : R.drawable.down);
            listItem.setCurrentHeight(toHeight);
            adapter.notifyDataSetChanged();

            if (goToItem)
                goToItem(position);
        }
    });

    listItem.getHolder().getTextViewWrap().startAnimation(resizeAnimation);
    }

    private void goToItem(final int position) {
    listView.post(new Runnable() {
        @Override
        public void run() {
            try {
                listView.smoothScrollToPosition(position);
            } catch (Exception e) {
                listView.setSelection(position);
            }
        }
    });
    }

    private void mockItems() {
    listItems
            .add(new ListItem(
                    "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
                    COLLAPSED_HEIGHT_1, COLLAPSED_HEIGHT_1,
                    EXPANDED_HEIGHT_1));

    listItems
            .add(new ListItem(
                    "Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
                    COLLAPSED_HEIGHT_2, COLLAPSED_HEIGHT_2,
                    EXPANDED_HEIGHT_2));

    listItems
            .add(new ListItem(
                    "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    COLLAPSED_HEIGHT_3, COLLAPSED_HEIGHT_3,
                    EXPANDED_HEIGHT_3));

    listItems
            .add(new ListItem(
                    "Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.",
                    COLLAPSED_HEIGHT_2, COLLAPSED_HEIGHT_2,
                    EXPANDED_HEIGHT_4));

    listItems
            .add(new ListItem(
                    "At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga.",
                    COLLAPSED_HEIGHT_1, COLLAPSED_HEIGHT_1,
                    EXPANDED_HEIGHT_4));

    listItems
            .add(new ListItem(
                    "Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus.",
                    COLLAPSED_HEIGHT_2, COLLAPSED_HEIGHT_2,
                    EXPANDED_HEIGHT_4));

    listItems
            .add(new ListItem(
                    "Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae.",
                    COLLAPSED_HEIGHT_3, COLLAPSED_HEIGHT_3,
                    EXPANDED_HEIGHT_3));

    listItems
            .add(new ListItem(
                    "Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.",
                    COLLAPSED_HEIGHT_1, COLLAPSED_HEIGHT_1,
                    EXPANDED_HEIGHT_4));

        }

    } 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-28T15:39:16.103

使用 value animator 的解决方案看起来不错：

```
ValueAnimator animator = ValueAnimator.ofInt(100, 300);
animator.setDuration(1000);
animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
  @Override
  public void onAnimationUpdate(ValueAnimator animation) {
    listViewItem.getLayoutParams().height = (Integer) animation.getAnimatedValue();
    listViewItem.requestLayout();
  }
});
animator.start(); 
```

刚看了android开发者指南，值得一读：http: [//developer.android.com/guide/topics/graphics/prop-animation.html](http://developer.android.com/guide/topics/graphics/prop-animation.html)

但请记住，requestLayout() 处理很繁重。因为 requestLayout() 的一次调用使每个附近的元素（在视觉上受到影响）重新计算它的布局。最好使用负下边距（将元素的某些部分隐藏在另一个元素下）并使用以下内容显示它：

```
listViewItem.setTranslationY((Integer) animation.getAnimatedValue()); 
```

当然，您可以只为底部边距设置动画，就像在这个问题的另一个答案中提出的那样。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-04T14:57:25.690

你必须在`Adapter`你身上实现动画`ListView`才能实现你想要的，

首先创建一个基本`animation.xml`文件，在 res 文件夹中创建一个名为 anim 的文件夹，然后将您的 animation.xml 文件放入其中。

例如，我创建了一个名为 rotate_animation.xml 的示例动画

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="400" /> 
```

然后创建一个这样的`Animation` `Object`实例

```
private Animation animation; 
```

然后在你的适配器实现的 getView 方法中做这样的事情

```
public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder viewHolder;
        if (convertView == null) {
            LayoutInflater li = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = li.inflate(R.layout.my_layout, null);
            viewHolder = new ViewHolder(v);
            v.setTag(viewHolder);

        } else {
            viewHolder = (ViewHolder) v.getTag();
        }

        viewHolder.mAppName.setText("SomeText");
        viewHolder.mAppImage.setImageDrawable(R.drawable.someImage);
        animation = AnimationUtils.loadAnimation(mContext, R.anim.my_animation);
        v.startAnimation(animation);
        return v;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-25T17:24:11.027

我的用例只是显示或多或少的文本。因此，例如，要从最多 2-6 行切换列表视图项的状态，可以这样做。它也是动画的。动画看起来并不完全流畅，但......

```
 if(!textDescriptionLenghtToggle) { // simple boolean toggle
                                ObjectAnimator animation = ObjectAnimator.ofInt(
                                        textViewContainingDescription,
                                        "maxLines",
                                        6);
                                animation.setDuration(300);
                                animation.start();
                            } else {
                                ObjectAnimator animation = ObjectAnimator.ofInt(
                                        textViewContainingDescription,
                                        "maxLines",
                                        2);
                                animation.setDuration(300);
                                animation.start();
                            } 
```

# android - AlarmManager 调用的通知活动不会在应用程序关闭时弹出

> ID：12729833
> 
> 赞同：1
> 
> 时间：2012-10-04T14:42:08.297
> 
> 标签：android, notifications, android-activity, android-pendingintent

对于自定义提醒应用程序，我正在使用 `AlarmManager`并设置弹出`PendingIntent` 的特定时间。`Notification`

我有我`NotificationManager`的`ReceiverActivity`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_alarm_receiver);
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager)
            getSystemService(ns);
    Context context = getApplicationContext();
    CharSequence ticker = "You have notification";
    CharSequence contentTitle = "My Reminder";
    CharSequence contentText = "Reminder Content";
    Notification notification = new Notification(R.drawable.notif_icon,
            ticker, System.currentTimeMillis());
    Intent notificationIntent = new Intent(this,
            AlarmReceiverActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
        notificationIntent, 0);
    notification.setLatestEventInfo(context, contentTitle, contentText,
        contentIntent);
    final int HELLO_ID = 1;
    mNotificationManager.notify(HELLO_ID, notification);
} 
```

ReceiverActivity在指定时间弹出，加上通知栏（左上角）的通知，一切正常。但它不是那么用户友好，我只希望通知出现在通知栏中，而在应用关闭时不会弹出任何活动（在现实情况下，可能在您的提醒到期时关闭）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T17:45:45.070

定义 要由 a 接收`AlarmManager`的`PendingIntent``BroadcastReceiver`

```
Intent i = new Intent(context, YourReceiver.class);
PendingIntent alarmPendingIntent= PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_UPDATE_CURRENT); 
```

然后

```
public class YourReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // use a BUILDER all this is deprecated
        CharSequence ticker = "You have notification";
        CharSequence contentTitle = "My Reminder";
        CharSequence contentText = "Reminder Content";
        Notification notification = new Notification(R.drawable.notif_icon,
                ticker, System.currentTimeMillis());
        Intent notificationIntent = new Intent(this,
                AlarmReceiverActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);
        notification.setLatestEventInfo(context, contentTitle, contentText,
            contentIntent);
        // post notification
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager)
                context.getSystemService(ns);
        final int HELLO_ID = 1;
        mNotificationManager.notify(HELLO_ID, notification);
    }
} 
```

# java - JasperServer MalformedURLException

> ID：12729836
> 
> 赞同：0
> 
> 时间：2012-10-04T14:42:13.913
> 
> 标签：java, jasper-reports, jasperserver, jaspersoft-studio, malformedurlexception

我正在使用**JasperServer 4.5.0 和 Jaspersoft Studio 1.1.2**。

我做了一个报告并上传到服务器主机没有问题。

但是当我查看它时，它会抛出此异常消息：

> com.jaspersoft.jasperserver.api.JSExceptionWrapper：java.net.MalformedURLException

**痕迹：**

> com.jaspersoft.jasperserver.api.JSExceptionWrapper：net.sf.jasperreports.engine.JRException：net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:251) 处 net.sf 处的 java.net.MalformedURLException .jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:230) 在 net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:218) 在 com.jaspersoft.jasperserver.api.engine.jasperreports .service.impl.EngineServiceImpl.compileReport(EngineServiceImpl.java:905) 在 com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl.compileReport(EngineServiceImpl.java:1362)

你知道我为什么会得到这个例外吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:00:14.407

不是问题出在哪里，而是更改为 iReport，我确实将报告直接上传给我和 JasperServer 并且可以正常工作。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T11:20:46.253

你唯一需要做的就是，

*   将您的项目包复制到另一个新项目。
*   添加所有库
*   再次制作**.jrxml**文件。

**它会工作......**

# c++ - 如何将 const char* 转换为 const WCHAR*

> ID：12729844
> 
> 赞同：3
> 
> 时间：2012-10-04T14:42:34.240
> 
> 标签：c++, type-conversion, const-char

我有这样的事情：

```
if(GetFileAttributesW("C:\\Directory")!="INVALID_FILE_ATTRIBUTES") {...} 
```

我收到错误：无法将参数 '1' 的 'const char*' 转换为 'const WCHAR*' 到 'DWORD GetFileAttributesW(const WCHAR*)'

如何转换`const char*`为`const WCHAR*`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:49:34.843

不使用`GetFileAttributesW`，使用`GetFileAttributes`。添加`_T`到所有 const 字符串，并使用`_TCHAR*`. 而且`INVALID_FILE_ATTRIBUES`绝对*不是*字符串...

```
if(GetFileAttributes(_T("C:\\Directory"))!= INVALID_FILE_ATTRIBUTES ) 
 {...} 
```

请参阅[Unicode 编程摘要](http://msdn.microsoft.com/en-us/library/dybsewaf.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:13:07.057

您将一种编码的文本文字与另一种编码的函数调用混合在一起。

所有这些混乱都是由于微软放在他的标题中的`#define`s 和s 的模糊链。`typedef`

这个令人讨厌的 Microsoft 技巧之一是声明两个函数调用，它们之间存在一个字母`A`或`W`项目设置的差异。有一个宏可以转换`GetFileAttributes`to`GetFileAttributesA`或`GetFileAttributesW`if`UNICODE`被定义。

在您的情况下，您将摆脱宏并`UNICODE`直接调用版本（以字母结尾的版本`W`），但在您的调用中，您使用的是非宽字符串文字，您可以轻松修复它，将 a 附加`L`到文字（根据其他用户的建议）：

```
if(GetFileAttributesW(L"C:\\Directory")!="INVALID_FILE_ATTRIBUTES") {...} 
```

因此，如果您调用以 结尾的版本`A`，则可以使用无宽字符串文字：

```
if(GetFileAttributesA("C:\\Directory")!="INVALID_FILE_ATTRIBUTES") {...} 
```

修复它的其他方法是使用`_T`宏（检查[这个答案](https://stackoverflow.com/questions/12383963/error-c2664-ccomboboxinsertstring-cannot-convert-parameter-2-from-const)）：

```
if(GetFileAttributesW(_T("C:\\Directory"))!="INVALID_FILE_ATTRIBUTES") {...} 
```

但是如果`UNICODE`没有定义，你原来的问题会再次出现；最后，你可以屈服于微软的做事方式，使用提供的所有宏：

```
// Note the lack of W or A, it's a macro, not a function call!!
if(GetFileAttributes(_T("C:\\Directory"))!="INVALID_FILE_ATTRIBUTES") {...} 
```

使用这两个宏（一个`GetFileAttributes`随版本`UNICODE`或更新`UNICODE`版本而变化，一个将 附加`L`到文字），无需担心项目设置，因为宏为您负责。

编辑。

我的错，我几乎忘记了最重要的部分。

正如其他用户所指出的，您正在将返回值`GetFileAttributes`与文本文字进行比较；它返回一个 DWORD 并根据 Microsoft 文档：

> DWORD 是一个 32 位无符号整数（范围：0 到 4294967295 十进制）。

所以，最后，你将一个整数与 a`char[24]`进行比较，比较是可能的，但它永远不会是真的！您必须阅读有关该功能以及如何使用它的信息；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:47:06.933

您正在尝试比较指针地址而不是内容！

检查函数：memcmp(...)

# visual-studio-2012 - Visual Studio 2012 和 .less 源文件的自定义语法突出显示

> ID：12729845
> 
> 赞同：1
> 
> 时间：2012-10-04T14:42:42.423
> 
> 标签：visual-studio-2012, syntax-highlighting, less

我们使用 .less 文件（使用 simpleLess 或 WinLess 编译）来生成 .css 文件。Visual Studio 2012 没有 .less 文件的语法高亮显示。我知道我可以在 \msdev\bin\ide 文件夹中创建一个 .hlx 文件，该文件将处理此扩展的语法突出显示。

我想知道是否有人已经这样做了并且那里有一个现有的 .hlx 文件？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:14.327

您正在寻找[Web Essentials 扩展](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)。

# eclipse-rcp - 是否可以在 Eclipse RCP 应用程序的窗口之间禁用拖动编辑器？

> ID：12729850
> 
> 赞同：1
> 
> 时间：2012-10-04T14:43:12.417
> 
> 标签：eclipse-rcp

我有一个 Eclipse RCP 应用程序，它允许用户打开多个窗口。在其中的每一个中，我都有一堆扩展`org.eclipse.ui.part.MultiPageEditorPart`.

默认情况下，该平台似乎允许用户在 Windows 之间拖放我的编辑器。这可能很有用，但目前我的应用程序对正在执行的窗口代码有某些假设，并且像这样移动编辑器可能会违反这些假设。

Eclipse RCP 中是否有禁止在窗口之间拖放编辑器的功能？目前我们基于 Eclipse 3.7，但我们的目标是很快迁移到 4.x 系列，所以我会接受任何一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:19:11.837

缺乏答案表明“不”。Eclipse 错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=386250](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386250)

# c# - 如何映射 2 个表并在 ASP.NET C# Entity-Framework 中包含关系？

> ID：12729851
> 
> 赞同：1
> 
> 时间：2012-10-04T14:43:17.097
> 
> 标签：c#, asp.net, entity-framework-4, relationships

我有一个数据库如下：

![在此处输入图像描述](../Images/0a53b0fcc3f4b3b9288283aca91db128.png)

我正在使用 EF 并试图获取对象。在正常情况下，从数据库中选择**PRODUCT Entity 后，我可以达到****PRODUCT Entity 的****ACCESSLEVEL** Entity，如下所示：

 **在选择时，我使用**INCLUDE**（注意：下面的代码可以正常工作！）

```
//In a method located in some BL layer
public ProductCollection Load()
{
  ProductCollection  Result = new ProductCollection(); //Derived from List
using (var Context = base.Entities)
            {
                    collection = from ItemProduct in Context.Product
                                     .Include("AccessLevel");

                    return Result.AddRange(collection);
            }
}
//In page load in aspx.cs file
foreach(var product in BL.Load())
{
    Response.Write(product.AccessLevel.Name);
} 
```

但是，在这里，当我执行以下操作时，它不起作用！

```
//In a method located in some BL layer
    public ProductCollection Load()
    {
     ProductCollection  Result = new ProductCollection(); //Derived from List
    using (var Context = base.Entities)
                {

                        collection = from ItemProduct in Context.Product
                                         .Include("AccessLevel")
                                         .Join(Context.Product_Category_Map.Where(c => c.ProductCategoryId == 3),
                                    product => product,
                                    map => map.Product,
                                    (product, map) => product
                               ));
;

                        return Result.AddRange(collection);
                }
    }
    //In page load in aspx.cs file
    foreach(var product in BL.Load())
    {
//I Get Exception here and cannot react the included object
        Response.Write(product.AccessLevel.Name);
    } 
```

例外是：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

我最终想要的是通过给定的 ProductCategory Id 获取产品。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:47:54.453

我认为您可以在集合的末尾添加一个 .ToList() ，即

```
return collection.ToList(); 
```

即使在 using 语句关闭上下文之后，这也将使结果可用，我相信这是导致您的问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:48:09.467

我认为你应该替换这个：

```
using (var Context = base.Entities) 
```

有了这个：

```
using (var Context = new base.Entities) 
```

如果您想了解更多信息，请查看此处：[初始化实体框架上下文的最佳方式？](https://stackoverflow.com/q/1063730/114029)**

# web-services - JAX-WS Web Service 的认证和授权的正确方式？

> ID：12729858
> 
> 赞同：3
> 
> 时间：2012-10-04T14:43:39.827
> 
> 标签：web-services, glassfish, authorization, jax-ws

我在实现 JAX-WS Web 服务的授权时遇到了麻烦。我正在开发一个可以通过 JAX-WS Web 服务连接到 Java EE 应用程序的 Swing 应用程序。用户可以使用 Swing 应用程序登录服务器，并可以从服务器下载用户特定的数据。登录的用户不能下载属于其他用户的数据，这一点很重要。

我的问题是`jaxwsContext.getUserPrincipal().getName()`返回“匿名”。我在这个门户网站上阅读了类似的问题，但不幸的是它没有帮助。

其实我有这个：

服务器端：

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
@SOAPBinding(style = SOAPBinding.Style.RPC)
@WebService
public class SampleWSEJB extends AbstractSampleEJB implements ISampleWSLocal, ISampleWSRemote {

    @Resource
    private WebServiceContext jaxwsContext;

    public String getUsername() {
        return username = jaxwsContext.getUserPrincipal().getName();
    }

    @Override
    @WebMethod
    public UserDataVO logInUser() {
        return SampleServerServices.getInstance().logInUser(getEm(), this.getUsername());
    }

...
...

} 
```

客户端：

我使用 wsimport 工具生成的一些类（ImportedSampleWSEJB、UserDataVO 等...）

相关客户代码：

```
private static ImportedSampleWSEJB importedEJB;

public UserDataVO logInUser(String username, String password) {
    Map<String, Object> requestContext = ((BindingProvider)ImportedSampleWSEJB.importedEJB).getRequestContext();
    requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
    requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);
    return importedEJB.logInUser();
} 
```

我使用“文件”作为安全领域，并在 glassfish 3.1 中创建了一些测试用户。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T04:52:18.240

您可以使用基本身份验证（http 标头），也可以使用用户名令牌（WS-Security 的一部分）。用户名令牌将出现在 SOAP 标头而不是 http 标头中。

# php - Facebook 连接本地主机

> ID：12729864
> 
> 赞同：0
> 
> 时间：2012-10-04T14:43:57.017
> 
> 标签：php, facebook, facebook-graph-api

我将如何检查用户是否通过本地主机上的 facebook 登录。我有登录按钮并且工作正常，但我无法确定用户是否已登录。

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:59:11.883

当用户使用 fb connect 登录时，会设置一些 cookie 值，因此如果您使用的是 php sdk，则可以执行以下操作来检查

```
$Facebook = new Facebook(array("appId"=>FACEBOOK_API_KEY, "secret"=>FACEBOOK_SECRET));
if($FacebookUserID=$Facebook->getUser()) {
   // user is logged in in this case
} 
```

用你自己应用的 appid 和 secret 替换 appid 和 secret

# jquery - Spring Security 3.1 - 发生会话超时时自动重定向到登录页面

> ID：12729865
> 
> 赞同：6
> 
> 时间：2012-10-04T14:43:57.213
> 
> 标签：jquery, html, spring, spring-security, security

我有一个基于 Spring 的 wenb 应用程序，我正在实施 Spring Security 3.1。

我需要的是能够在配置的会话超时发生时自动重定向到登录页面。我正在实现包含大量 jQuery 功能的网页，因此我需要能够自动重定向。

当前发生的情况是，当会话超时过去时，直到执行操作 - 页面提交才会重定向到登录页面。

我的spring-security.xml：

```
<http auto-config="true" disable-url-rewriting="true">
    <intercept-url pattern="/test/user*" access="ROLE_USER, ROLE_ADMIN"  />
    <intercept-url pattern="/test/admin" access="ROLE_ADMIN"  />
    <form-login login-page="/test/login" 
            default-target-url="/test/home" 
            authentication-failure-url="/test/loginfailed" />
    <logout invalidate-session="true" logout-success-url="/test/logout" />
    <!--
    <session-management invalid-session-url="/test/login">
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="true"/>
    </session-management>
    -->
</http> 
```

在我的 web.xml 中，我有：

```
<!-- Web Session Timeout (mins) --> 
<session-config> 
    <session-timeout>10</session-timeout> 
</session-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-29T16:18:48.610

我认为您不需要自己做，Spring 几乎可以自己处理。这就是春天的魅力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:50:43.567

我会尝试什么！要做的是这样的：

*   配置 spring 安全性，它不会将 http 状态代码 200（OK）重定向（303/307）发送到登录页面，而是 ajax 处理程序可以检测到的其他内容，例如状态代码 401（未授权）
*   以正确处理 401 代码（或您使用的任何代码）的方式配置 ajax 客户端，例如通过显示登录页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-26T20:40:15.873

我们通过将响应状态设置为来处理这种情况`403`。我们中的以下代码`login.jsp`可以解决问题：

```
<%
    response.setStatus(HttpServletResponse.SC_FORBIDDEN);
%> 
```

缺点是，当您访问登录页面时，浏览器控制台会显示该`login`请求已返回`403`。

完成此操作后，ajax 调用将失败并进入失败状态，您可以在其中检查状态，显示会话超时的消息。

# android - 正确处理 Android 的 camara 服务

> ID：12729867
> 
> 赞同：0
> 
> 时间：2012-10-04T14:44:04.117
> 
> 标签：android, sqlite, camera

我在这里有这段代码：

```
public class pantalla8 extends Activity {
    protected static final int CAMERA_REQUEST = 0;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.camera);
        final Button logout = (Button) findViewById(R.id.boton13);
        logout.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                finish();
            }
        });
        final Button camera = (Button) findViewById(R.id.boton12);
        camera.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                Intent cameraIntent=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        });
    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST) { 
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        }
    }
} 
```

它调用了 camara 的服务。

有了这个，我可以拍照，保存它们并毫无问题地返回我的应用程序。但是如果我不想保存图片，否则，丢弃它；发生错误，Android 强制关闭应用程序。

我的问题是，我的代码中缺少什么来处理该事件？我的意思是，如果用户丢弃了一张图片，则应该再次调用相机。

另外，当用户保存图片时；我如何将这些照片与我的应用程序联系起来？我想我应该使用 SQLite 表，但我不知道该怎么做，因为以后必须将这些图片发送到服务器。

我将不胜感激任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:29:00.540

唯一的问题是您没有处理用户丢弃捕获的图像的情况。当用户丢弃捕获的图像时，`onActivityResult()`会调用`resultCode = RESULT_CANCELED`. 这是处理`onActivityResult()`相机的示例。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    /*
     * setting images from camera click intent
     */
    try {
        if (requestCode == CAMERA_REQUEST) {
            if (resultCode == RESULT_OK) {
                 //here you can save the image or do something

            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the image capture
            } else {
                // Image capture failed, advise user
            }
        }
    } catch(Exception e) {
        Toast.makeText(yourActivity.this, "Unable to load image !!",  Toast.LENGTH_SHORT).show();
    }
} 
```

我希望这将有所帮助。随意讨论。

# svn - 在 VisualSVN 服务器上运行 svn 命令

> ID：12729874
> 
> 赞同：0
> 
> 时间：2012-10-04T14:44:29.980
> 
> 标签：svn, visualsvn, visualsvn-server

啊喂！

这就是我想要实现的目标：我有一个巨大的 SVN 存储库。因为结帐需要永远和几百 GB，我想知道我是否可以在运行 VisualSVN 服务器的控制台上执行 SVN 命令，以通过`svn propget svn:externals -R`命令确定任何具有绝对路径的 svn:externals。

到目前为止，存储库似乎无法在不检查的情况下访问。我是对的吗（我希望不是）？还是有另一种方法来实现我正在寻找的东西？

谢谢！蒂莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:05:48.383

> 我想获取存储库中使用的所有外部的列表。到目前为止，我还没有找到一种不完全检查的方法，考虑到尺寸和我的连接，这需要很长时间。

这更容易理解。试试这个：

```
$ svn pget -Rv svn:externals http://svn.vegibank.com/svn 
```

你不需要`-v`. 它将输出更改为更易于阅读的三行输出。

### 没有`-v`

```
http://svn.vegibank.com/svn/project - utils http://svn.vegibank.com/svn/utils 
```

### 和`-v`

```
Properties on 'http://svn.vegibank.com/svn/project'
  svn:externals
     utils  http://svn.vegibank.com/svn/utils 
```

但是，您可能更喜欢单行格式，因为它更容易解析。只需删除“ `-`”之后的所有内容，您就会拥有一个包含该属性的目录列表。

该命令将需要很长时间才能运行，因此，运行该命令，然后喝杯咖啡。或者，也许吃午饭。或者也许是晚餐和百老汇演出。至少您不需要检查整个存储库，这需要几 GB 的磁盘空间。

# java - Hibernate 通过 java.util 设置多对一关系

> ID：12729891
> 
> 赞同：0
> 
> 时间：2012-10-04T14:45:31.707
> 
> 标签：java, eclipse, hibernate

我正在尝试解决我的休眠数据库系统的问题，但我不确定我应该做错什么：

我有两个实体：顶点（Vertice）和标签。一个顶点应该有很多标签。当我在一个集合中添加一个带有标签的顶点时，顶点被保存到数据库中，标签也被保存，但顶点的 FK 列被记录为空。这意味着我无法在需要时检索标签集。感谢您的帮助！

下面是代码：

```
import java.util.Set;
public class Vertice {

private long id;
private Set<Tag> tags;
private String amostra = new String();
private String chave = new String();

public Vertice() {
}

public long getId() {
    return id;
}
public void setId(long id) {
    this.id = id;
}
public Set<Tag> getTags() {
    return tags;
}
public void setTags(Set<Tag> tags) {
    this.tags = tags;
}
public String getAmostra() {
    return amostra;
}
public void setAmostra(String amostra) {
    this.amostra = amostra;
}
public String getChave() {
    return chave;
}
public void setChave(String chave) {
    this.chave = this.geraChave(chave);
}

private String geraChave(String chave){
    String _chave = new String();
    _chave = chave;
    try{
        if(this.getTags()!=null){
            for(Tag t: this.getTags()){
                _chave = _chave + t.getTexto();
            }
        }
    }
    catch(Exception e){
        e.printStackTrace();
    }
    return _chave;
} 
```

}

班级标签：

```
public class Tag {
    private long id;
    private int linha;
    private int coluna;
    private String texto = new String();

private Vertice vertice;

public Vertice getVertice() {
    return vertice;
}
public void setVertice(Vertice vertice) {
    this.vertice = vertice;
}
public int getLinha() {
    return linha;
}
public int getColuna() {
    return coluna;
}
public void setColuna(int coluna) {
    this.coluna = coluna;
}
public void setLinha(int linha) {
    this.linha = linha;
}
public String getTexto() {
    return texto;
}
public void setTexto(String texto) {
    this.texto = texto;
}
public long getId() {
    return id;
}
public void setId(long id) {
    this.id = id;
} 
```

}

VerticeDAO 类的一段代码：

```
public boolean salvaAtualiza(Vertice VerticeArg) throws ViolacaoChaveUnicaException{

boolean ret = false;

try{
     if(VerticeArg.equals(null)){
        throw new Exception("O objeto <Vertice> foi informado vazio.");
     }
     else{
        sess.beginTransaction();
        sess.saveOrUpdate(VerticeArg);
        ret = true;
     }
    }
    catch(ConstraintViolationException e){
        throw new ViolacaoChaveUnicaException(
           "Houve uma violação de chave na tentativa " + 
              "de gravar os dados no BD");
    }
    catch(Exception e){
        e.printStackTrace();
    }
    return ret;
} 
```

顶点实体的 XML (Vertice.hbm.xml)：

```
<hibernate-mapping>
<class name="xx.xxx.xxx.Vertice" table="pcommjava_vertice">
    <id name="id" column="vertice_id" type="long">
        <generator class="native" />
    </id>
    <property name="amostra">
        <column name="vertice_amostra" not-null="true" length="1920"/>
    </property>
    <property name="chave">
        <column name="vertice_chave" not-null="true" length="50" unique="true" unique-key="vertice_chave"/>
    </property>
    </class> 
```

标记 XML 映射 (Tag.hbm.xml)：

```
<hibernate-mapping>
<class name="xx.xxx.xxx.Tag" table="pcommjava_tag">
    <id name="id" column="tag_id" type="long">
        <generator class="native" />
    </id>
    <property name="linha">
        <column name="tag_linha" not-null="true" />
    </property>
    <property name="coluna">
        <column name="tag_coluna" not-null="true" />
    </property>
    <property name="texto">
        <column name="tag_texto" not-null="true" />
    </property>

    <many-to-one name="vertice" cascade="all" not-null="true" column="tag_vertice" class="xx.xxx.xxx.Vertice" />

</class> 
```

最后是hibernate.cfg.xml：

```
 <hibernate-configuration>
 <session-factory>
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">SOMEPASSWORD</property>
  <property name="hibernate.connection.url">jdbc:mysql://00.00.000.000:3306/DB2</property>
  <property name="hibernate.connection.username">developer</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.current_session_context_class">thread</property>
  <property name="hibernate.show_sql">true</property>
  <property name="hibernate.format_sql">true</property>
  <!-- Automatic schema creation (begin) === -->
  <property name="hibernate.hbm2ddl.auto">create</property>
  <!-- Simple memory-only cache -->
  <property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>

  <mapping class="xx.xx.xxx.Vertice"
   package="xx.xx.xxx.Vertice" resource="xx/xxx/xxx/Vertice.hbm.xml"/>
  <mapping class="xx.xx.xxx.Tag"
   package="xx.xx.xxx.Tag" resource="xx/xx/xxx/Tag.hbm.xml"/>

 </session-factory>

</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:30:28.537

问题是您没有`set<Tag>`在**vertex.hbm.xml**中定义。根据我的理解，当您将 Set 放入**Vertice.java**时，它会变成一对多或多对多的关系。**除此之外**，如果将**Vertice**引用放在**Tag.java**中，它就变成了双向关系。有关更多信息，请参阅：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html)

# visual-c++ - 如何检测图片上相同颜色的区域？

> ID：12729893
> 
> 赞同：-1
> 
> 时间：2012-10-04T14:45:35.457
> 
> 标签：visual-c++, opencv, computer-vision

我正在尝试使用 OpenCv 进行“人数统计”。我的摄像头固定在天花板上并向下看。现在我有问题检测头部。我已阅读[http://pdfcast.org/pdf/real-time-people-couting](http://pdfcast.org/pdf/real-time-people-couting)；我正在尝试进行颜色分割，在其中找到具有相同颜色的椭圆区域并将其称为“男人的头”。但我不知道如何进行颜色分割。
在这里我从纸上展示我想要的图片
[http://smotr.im/7LDz](http://smotr.im/7LDz)
请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T07:06:26.687

对于颜色分割，您需要为每个红色、绿色和蓝色图像定义一个阈值。如果您想找到黑色，只需处理图像的每个像素并获取 R、G 和 B 图像，检查该值是否符合为黑色定义的阈值。

有些方法使用 HSV 颜色空间，因此应该使用其他阈值来定义颜色。

# hibernate - 每个类和集合映射的休眠表

> ID：12729895
> 
> 赞同：0
> 
> 时间：2012-10-04T14:45:42.930
> 
> 标签：hibernate, mapping, set, table-per-class

我将通过一个人为的示例来说明我的问题，以尽量使其简单易懂。但是我真正的问题是遗留代码，所以我不能更改架构或类似的东西。

我的代码中每个班级都有一个表格。假设 Customer1 和 Customer2。它们具有唯一的鉴别器值（分别为 1 和 2）。每个客户可以有 0 个或多个地址。地址存储在一个表中。此表存储对客户 ID 和客户鉴别器值的引用。在地址映射中，我有：

```
<any name="customer" meta-type="CustomerMetaType" id-type="long">
    <column name="customerid" not-null="true" />
    <column name="discriminator" not-null="true" />
</any> 
```

这可以。但是在我的 customer1 和 customer2 映射中，我有：

```
<set name="addresses" outer-join="false">
    <key column="customerid"/>            
    <one-to-many class="Address"/>
</set> 
```

这有一个问题，即使用 id 1 加载 customer1 会为 id 2 的 customer2 获取任何地址。我最初的修复尝试是向集合中添加多个键：

```
<key>
    <column name="customerid"/>
    <column name="discriminator"/>
</key> 
```

但是，这样做时，我得到以下异常：

org.hibernate.MappingException：外键必须与引用的主键具有相同的列数）

有没有人对此有解决方案。有没有办法将描述符映射到类作为某种虚拟复合键？或者我可以用集合映射做些什么来将它限制在特定的客户表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:04:17.927

每个客户映射都需要一个 where 条件

```
<set name="addresses" outer-join="false" where="discriminator='customer1'">
    <key column="customerid"/>            
    <one-to-many class="Address"/>
</set>

<set name="addresses" outer-join="false" where="discriminator='customer2'">
    <key column="customerid"/>            
    <one-to-many class="Address"/>
</set> 
```

# php - 表达式引擎允许的文件类型选项

> ID：12729899
> 
> 赞同：1
> 
> 时间：2012-10-04T14:45:50.283
> 
> 标签：php, codeigniter, expressionengine

在 EE2 中创建上传目标时，是否可以在“允许的文件类型”下拉菜单中添加更多选项[http://expressionengine.com/user_guide/cp/content/files/file_upload_preferences.html#allowed-file-types](http://expressionengine.com/user_guide/cp/content/files/file_upload_preferences.html#allowed-file-types)只给你两个选项“全部”或“图像”。如果您要创建前端 PDF 上传必须选择“全部”选项，这似乎有点不安全。

理想的情况是我可以创建一个文件组并选择适当的 MIME 类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:38:58.610

除了在许多地方破解内核之外，没有解决方案。我建议发布一个[功能请求](http://expressionengine.com/forums/viewforum/106/)- 这是一个好主意（即使它只是预先配置了一些带有复选框的标准文件类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:33:49.007

由于没有办法（据我所知）在不破解表达式引擎的核心文件的情况下做到这一点，唯一的方法是使用“ALL”选项并从系统/表达式引擎/添加（可能删除）mimetypes config/mimes.php 来限制/扩展接受的类型。

无论如何，不​​建议将编辑核心文件作为最佳实践，因为它可能与以后的更新发生冲突。您应该（按照 Theo Kouzelis 的建议）提交功能请求。

# android - 从 ComponentName 对象中获取上下文对象

> ID：12729904
> 
> 赞同：1
> 
> 时间：2012-10-04T14:46:11.067
> 
> 标签：android, service, components, toast, android-context

我需要获取当前正在运行的活动并在服务中检测它。我是这样做的：

```
ActivityManager am = (ActivityManager) ServiceMessages.this.getSystemService(ACTIVITY_SERVICE);
List< ActivityManager.RunningTaskInfo >   taskInfo = am.getRunningTasks(1);
ComponentName componentInfo = taskInfo.get(0).topActivity;
componentInfo.getPackageName();
Log.d("topActivity", "CURRENT Activity ::" + componentInfo.getClassName()); 
```

并成功获取正在运行的 Activity 的名称。但我需要将 Toast 消息传递给该 Activity。所以，我需要将当前 Activity 的 Context 对象传递给 `Toast.makeText(context,text, length)`. 如果我有 ComponentName，如何获取上下文对象？

# mysql - 缓慢的 MySQL SELECT 性能

> ID：12729907
> 
> 赞同：3
> 
> 时间：2012-10-04T14:46:17.373
> 
> 标签：mysql, database

我有以下数据库架构： [https ://dl.dropbox.com/u/37915176/schema.PNG](https://dl.dropbox.com/u/37915176/schema.PNG)

我在meter_relevation 中有超过200 万条记录。数据来自多个电表，这些电表通过meter_history 表与电器（设备）相关联。

我尝试获取特定日期范围内的设备数据：

```
SELECT MR.* 
FROM device AS D, meter_history AS MH, meter AS M, meter_relevation AS MR
WHERE D.Id=MH.Id_Device 
   AND MH.Id_Meter=M.Id 
   AND M.Id=MR.Id_Meter 
   AND D.Id="8" 
   AND MR.Date>="2012-10-04" 
   AND MR.Date<="2012-10-04" 
```

但是性能很慢，即使指定日期范围内没有记录，我也能得到 10 秒。

我尝试了 EXPLAIN，我清楚地看到我的查询不是最优的，在meter_relevation 表上列出了总行数，超过 200 万：[https ://dl.dropbox.com/u/37915176/explain.png](https://dl.dropbox.com/u/37915176/explain.png)

有什么建议么？有一个更好的方法？当然，我可以在客户端做一些工作并分成几个查询。但我想知道单个 SELECT 查询是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:48:02.827

我建议您尝试在列上放置索引：

```
D.Id
MH.Id_Device 
MH.Id_Meter
M.Id 
MR.Id_Meter 
MR.Date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:12:32.993

如果那是您正在运行的查询，它看起来不是最理想的。你真的不需要 D 表，对吗？看看如何满足设备上的条件`MH.Id_device = "8"`。

但是假设还有其他字段没有显示，那么让我们重写：

```
SELECT MR.*
    FROM meter_relevation AS MR
    JOIN meter AS M ON ( M.Id = MR.ID_Meter )
    JOIN meter_history AS MH ON ( MH.Id_Meter = M.Id )
    JOIN device AS D ON ( D.Id=MH.Id_Device AND D.Id = "8" )
WHERE 
    MR.Date BETWEEN "2012-10-04" AND "2012-10-04"; 
```

所以我们需要索引。第一个是最重要的

```
CREATE INDEX mr_ndx     ON meter_relevation ( Date, Id_Meter ); 
```

但也尝试删除上面的索引并改用：

```
CREATE INDEX mr_ndx     ON meter_relevation ( Id_Meter, Date );

CREATE INDEX m_ndx      ON meter(Id); -- This probably already exists
CREATE INDEX mh_ndx     ON meter_history( Id_Device, Id_Meter );
CREATE INDEX d_ndx      ON device (Id); -- This too probably already exists 
```

上面，如果这样写，是等价的（但 MySQL 应该意识到这一点，所以我认为它不会让你太慢）

```
SELECT MR.*
    FROM meter_relevation AS MR
    JOIN meter AS M ON ( MR.ID_Meter = M.Id)
    JOIN meter_history AS MH ON (MH.Id_Device = "8" AND MH.Id_Meter = M.Id)
WHERE 
    MR.Date BETWEEN "2012-10-04" AND "2012-10-04"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:48:07.683

我的猜测是，由于缺少索引，它正在执行表扫描。尝试注释掉这一点，看看它是否有所改善：

```
AND MR.Date>="2012-10-04" 
AND MR.Date<="2012-10-04" 
```

如果是这样，请尝试在 MR.Date 上建立索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:04:24.283

索引肯定会有所帮助。适当地运行 EXPLAIN 和索引。索引所有外键和日期字段。这是有关 JOIN 索引的更多详细信息。

[http://hackmysql.com/case4](http://hackmysql.com/case4)

通常最简单的解决方案是避免过于复杂的查询。您要加入 4 张桌子。您真的需要所有 4 个表中的所有数据吗？我通常避免 SELECT * 查询来强迫自己确保我只获取我需要的数据。

# c# - 即使在 RichTextbox 清除后，段落仍显示为另一个元素的子元素

> ID：12729909
> 
> 赞同：3
> 
> 时间：2012-10-04T14:46:20.153
> 
> 标签：c#, silverlight, richtextbox, silverlight-5.0, paragraph

我的页面上有两个 RichTextbox。我将它们用作 Book 界面。有两个按钮可以前进和后退。

向前遍历页面工作正常。但是一旦我回击，VS2010 就会抛出异常

```
Element is already the child of another element. 
```

这是我在 RichTextbox 中添加的段落。即使我在用新数据淹没它们之前清除了两个 RichTextbox，也会发生这种情况。

我的代码如下。我错过了什么？

```
TxtBlobLeft.Blocks.Clear();
        TxtBlobRight.Blocks.Clear();

        foreach (Paragraph item in pagesStack[count].paras)
        {
            TxtBlobLeft.Blocks.Add(item); //Throws exception here
        }

        foreach (Paragraph item in pagesStack[count + 1].paras)
        {
            TxtBlobRight.Blocks.Add(item);
        } 
```

注意：pagesStack 是一个以 Paras（即 List）为属性的自定义 Object。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:13:00.650

似乎 Clear 不会删除对 RTB 的 Paragraphs 的父引用。我使用以下 forach 循环为 Clear 创建了一个新方法来删除所有项目。

```
foreach (Paragraph item in paras)
        {
            Page1.Blocks.Remove(item);
        } 
```

paras 是我之前添加到 RTB 的段落列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:08:24.663

进入循环时，您可以在调试器中检查项目的父项是什么吗？

# ruby-on-rails - Rails 中的 MiniTest 教程

> ID：12729918
> 
> 赞同：4
> 
> 时间：2012-10-04T14:46:48.173
> 
> 标签：ruby-on-rails, minitest

Rails 中是否有任何关于 MiniTest 的好教程。正在寻找一段时间 bt 没有太大的成功。任何帮助都会非常受欢迎......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:17:50.703

查看[宣布 Minitest Rails](http://blowmage.com/2012/07/10/announcing-minitest-rails)以开始使用。

在您掌握了基础知识和一些语法之后，我建议您阅读[RSpec book](http://pragprog.com/book/achbd/the-rspec-book)。它使用 RSpec，但真正教给你通用的测试技术，这些技术可以应用于多个测试框架。

并且当您忘记某些事情时，您可以参考[备忘单](http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference)。

# sql - n列的快捷方法与相同的常数进行比较？

> ID：12729920
> 
> 赞同：4
> 
> 时间：2012-10-04T14:46:51.320
> 
> 标签：sql, sql-server-2008, tsql

我无法以一种或另一种方式找到答案。非常简单的问题，细节很少。

有没有更好的方法来做这样的事情：

```
SELECT *
FROM tablename tn
WHERE tn.col1 = 1
      AND tn.col2 = 1
      AND tn.col3 = 1
      AND tn.col4 = 1
      ...
      AND tn.coln = 1 
```

多个列都必须以相同的方式与单个常量进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:51:09.257

我认为这是最好的方法。据我了解，没有其他方法可以实现这一目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:50:53.940

关于我能想到的唯一一件事（它只在某些情况下才有用）是将一个持久计算字段添加到使用如下逻辑的表本身。对于高度事务性的表，我不会推荐这种方法，如果这是在许多地方并且经常使用的过滤器，我什至会考虑它。获得的是您可以过滤和索引的单个值，因此 SELECT 将得到优化。

```
ALTER TABLE [tablename] 
   ADD SAMEVALUE AS (CASE WHEN col1 = col2 AND col1 = col3 
       AND col1 = col4 AND .. col1 = coln THEN col1 ELSE NULL) PERSISTED 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T16:58:06.973

我认为这里的“更好”意味着“更少打字”？如果是这样，您可以使用 Intellisense 或执行相同操作的第三方工具来加快速度，或者如果您有大量列，则使用您最喜欢的脚本语言（Perl、Python、PowerShell 等）来生成`WHERE`给你的条款。您甚至可以使用 SQL 本身：

```
select 'tn.' + quotename(name) + ' = 1 and '
from sys.columns
where object_id = object_id('MyTable')
and name like 'col%' 
```

但是请记住，你花在阅读代码上的时间比写代码的时间要多得多，所以最重要的是查询的含义应该尽可能容易理解，并且你当前的查询已经很清楚了。

# c# - 如何设置 CultureInfo.InvariantCulture 默认值？

> ID：12729922
> 
> 赞同：35
> 
> 时间：2012-10-04T14:46:54.347
> 
> 标签：c#, double

当我在 C# 中有这样的代码时：

```
double a = 0.003;
Console.WriteLine(a); 
```

它打印“0,003”。

如果我有另一段代码：

```
double a = 0.003;
Console.WriteLine(a.ToString(CultureInfo.InvariantCulture)); 
```

它打印“0.003”。

我的问题是我需要一个点作为小数点，但 C# 默认使用逗号。此外，我不想仅仅为了打印出双变量而输入这么长的代码行。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-04T14:50:53.573

您可以将当前线程的文化设置为您想要的任何文化：

```
Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.InvariantCulture; 
```

请注意，更改文化也会影响字符串比较和排序、日期格式以及日期和数字的解析等内容。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-09-08T16:44:20.273

从 .NET Framework 4.5 版和 .NET Core/Standard 1.0 开始，您可以通过修改[CultureInfo.DefaultThreadCurrentCulture](https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo.defaultthreadcurrentculture)和[CultureInfo.DefaultThreadCurrentUICulture](https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo.defaultthreadcurrentuiculture)属性来更改**整个应用程序**的区域性，而不仅仅是当前线程：

```
CultureInfo.DefaultThreadCurrentCulture = CultureInfo.InvariantCulture;
CultureInfo.DefaultThreadCurrentUICulture = CultureInfo.InvariantCulture; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-04T14:53:38.837

1 空字符串指定 InvariantCulture 在`config.file`

默认情况下，Culture 和 UICulture 在配置中设置为“”。

```
 <system.web>
      <globalization culture="" />
   </system.web> 
```

2 您还可以在您的`Thread`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-04T14:51:53.643

默认情况下，C# 不会将其设为逗号，这是您的文化。尝试明确地设置文化，

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("de-DE"); 
```

链接： http: [//msdn.microsoft.com/en-us/library/ms425914 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/ms425914(v=office.12).aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T14:53:23.510

当您打电话`WriteLine()`并给予双倍时，它在内部或多或少地进行了以下调用：

```
Console.WriteLine(a.ToString(CultureInfo.CurrentCulture)); 
```

现在的任务是用`CurrentCulture`替换`InvariantCulture`。这可以通过以下代码行来完成：

```
Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture; 
```

现在你的线程设置了 InvariantCulture 并且你的第一个调用也应该打印“0.003”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-27T04:38:48.600

您可以将`CultureInfo.InvariantCulture`@Guffa 和其他人设置为如上所示的默认值。

但是您必须清楚地知道为什么要这样做。如果您执行数据导出/导入操作会没问题，但您可能不会将它用于呈现给用户的字符串。

微软文档指出：

> 不变的文化是文化不敏感的；它与英语相关，但与任何国家/地区无关。您可以在对 CultureInfo 实例化方法的调用中使用空字符串 ("") 按名称指定不变区域性。...
> 
> 与受用户自定义或 .NET Framework 或操作系统更新影响的文化敏感数据不同，不变的文化数据随着时间的推移和已安装的文化是稳定的，并且不能由用户自定义。这使得不变区域性对于需要与区域性无关的结果的操作特别有用，例如保留格式化数据的格式化和解析操作，或要求数据以固定顺序显示而与区域性无关的排序和排序操作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-04T14:53:17.647

如果您*从不*希望数字和日期的文化特定格式，您可以设置文化一次，也许在应用程序启动时。

```
Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture 
```

如果它是 ASP.NET 应用程序，更简单的替代方法是在`<globalization>`web.config 的配置元素中设置区域性。

否则，除了明确指定文化之外，您别无选择。如果您发现自己重复输入相同的长代码行，请按照您在这种情况下经常做的事情：将其包装在一个方法中。

# windows - 好的 Windows Azure 存储管理器

> ID：12729925
> 
> 赞同：3
> 
> 时间：2012-10-04T14:47:00.867
> 
> 标签：windows, azure, storage, explorer

我一直在使用云存储工作室（试用版）：

[http://www.cerebrata.com/Products/CloudStorageStudio/](http://www.cerebrata.com/Products/CloudStorageStudio/)

但它即将到期。有人知道类似的（免费）产品吗？

我需要一些允许我在创建数千个表时删除所有表的东西，并且需要一个工具来删除它们而不会太麻烦。

我也尝试过 Azure Storage Explorer 5：

[http://azurestorageexplorer.codeplex.com/](http://azurestorageexplorer.codeplex.com/)

但是它没有像云存储工作室那样的批量删除选项。

任何有关找到像样的 Windows Azure 存储资源管理器的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:01:19.887

[TableXplorer](http://clumsyleaf.com/products/tablexplorer)使用起来真的很有趣（同样适用于 ClumsyLeaf 的其他应用程序）。

但是，如果您想对表进行一些（自动）批量删除，您可能需要查看[AzureCommandLineTools](https://github.com/RobBlackwell/AzureCommandLineTools)。这允许您使用批处理文件/powershell 对存储进行操作。

# java - JSF 对话框立即消失

> ID：12729926
> 
> 赞同：1
> 
> 时间：2012-10-04T14:47:04.330
> 
> 标签：java, jsf, dialog, primefaces

在我的 JSF 页面上，我在`dataTable`. 我希望能够编辑此表中的行。作为解决方案，当您单击第一列中的值时，我会弹出一个对话框。我使用`setPropertyActionListener`. 这似乎有效。但是，弹出窗口会在几分之一秒后消失。我不明白为什么会这样。有人有建议吗？

这是我的 dataTable 的 JSF 代码：（如您所见，我正在使用 PrimeFaces）

```
<h:form id="dataForm">
    <p:dataTable value="#{misterBean.values}" var="value">
        <p:column>
            <h:commandLink value="#{value.name}" onclick="updateDlg.show()">
                <f:setPropertyActionListener
                    target="#{misterBean.value}"
                    value="#{value}" />
            </h:commandLink>
        </p:column>
        <!-- more columns -->
    </p:dataTable>
</h:form> 
```

以及对话框的 JSF 代码：

```
<p:dialog id="updateDialog" header="Update data" widgetVar="updateDlg">
    <h:form id="updateForm">
        <h:panelGrid columns="2" cellpadding="5">
            <h:outputLabel for="name" value="Name:" />
            <p:inputText id="name" value="#{misterBean.value.name}" />
            <h:outputLabel for="flag" value="Flag:" />
            <p:selectBooleanButton id="flag"
                value="#{misterBean.value.flag}"
                onLabel="On"
                offLabel="Off" />
            <f:facet name="footer">
                <p:commandButton id="submitButton"
                    value="Submit"
                    actionListener="#{misterBean.update}"
                    oncomplete="updateDlg.hide()"
                    update=":dataForm" />
            </f:facet>
        </h:panelGrid>
    </h:form>
</p:dialog> 
```

支持 bean 如下所示：

```
@Controller
@ManagedBean( name = "misterBean" )
@ViewScoped
public final class MisterBean {

    private final MyService myService;
    private final List<Value> values;
    private Value value;

    @Autowired
    public MisterBean( final MyService myService ) {
        this.myService = myService;
        this.values = this.myService.loadValues();
        this.value = new Value();
    }

    public List<Value> getValues() {
        return this.values;
    }

    public Value getValue() {
        return this.value;
    }

    public void setValue( final Value value ) {
        this.value = value ;
    }

    public void update( final ActionEvent e ) {
        this.myService.save( this.value );
        this.value = new Value();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:01:16.937

难道是在显示对话框后页面正在刷新？我建议尝试使用 primefaces commandLink 而不是本机 jsf commandLink，因为`ajax=true`我相信默认情况下已设置 primefaces commandLink。

更改`<h:commandLink...`为`<p:commandLink...`

# html - 如何使用递归字符串连接构建带有小计的 HTML 表格？

> ID：12729929
> 
> 赞同：3
> 
> 时间：2012-10-04T14:47:08.853
> 
> 标签：html, string, sql-server-2005, string-concatenation, html-table

我有接下来的两张桌子：

```
CREATE TABLE #SalesByStore (
    Brand VARCHAR(10),
    StoreName VARCHAR(50),
    Sales DECIMAL(10,2)
)

CREATE TABLE #SalesByBrand (
    Brand VARCHAR(10),
    TotalSales DECIMAL(10,2)
) 
```

我正在尝试使用递归字符串连接构建一个 HTML 表体，我需要按品牌排序的商店显示销售额，并且在同一品牌的每组商店显示该品牌的销售额小计之后，如下所示：

![在此处输入图像描述](../Images/490df73030c487faf3573c7e7122f394.png)

我正在按照以下方式进行操作：

```
DECLARE @tableBody NVARCHAR(MAX), @lastBrand VARCHAR(10);
SELECT @tableBody='';

SELECT
  @tableBody
    = @tableBody
      + CASE
          WHEN @lastBrand IS NOT NULL AND @lastBrand<>SS.Brand
            THEN '<tr><td colspan="2">Subtotal</td><td>'
                 + (SELECT TOP 1 CAST(SB.TotalSales AS VARCHAR(15)) FROM #SalesByBrand SB WHERE SB.Brand=@lastBrand)
                 + '</td></tr>'
            ELSE '' END
      + '<tr><td>' + SS.Brand + '</td><td>'
      + SS.StoreName + '</td><td>' + CAST(SS.Sales AS VARCHAR(15)) + '</td></tr>',
  @lastBrand = SS.Brand
FROM #SalesByStore SS
ORDER BY SS.Brand 
```

问题是按品牌获取小计金额的子查询始终返回 NULL，因为子查询的@lastBrand 仍然为空（请参阅此堆栈溢出问题以了解为什么会发生这种情况：[Why subquery inside recursive string连接总是返回 NULL？](https://stackoverflow.com/questions/12647808/why-subquery-inside-recursive-string-concatenation-always-returns-null)）。

您能否建议我另一种在 SQL Server 2005 中创建带有小计的 HTML 表的方法？

顺便说一句，我需要在 SQL Server 中构建 HTML 表，以便在 db 邮件中发送它。

**编辑：**我已将案例从连接的结尾移至连接的开头，因为必须在新品牌组开始之前绘制小计行。对不起这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:04:31.507

幸运的是，在这种情况下，我们可以简单地将子查询换成连接并直接选择值：

```
DECLARE @tableBody NVARCHAR(MAX), @lastBrand VARCHAR(10), @lastTotal decimal(10,2);
SELECT @tableBody='';

SELECT
  @tableBody
    = @tableBody
      + CASE
          WHEN @lastBrand IS NOT NULL AND @lastBrand<>SS.Brand
            THEN '<tr><td colspan="2">Subtotal</td><td>'
                 + CAST(@lastTotal AS VARCHAR(15)) -- Add the last total
                 + '</td></tr>'
            ELSE '' END
      + '<tr><td>' + SS.Brand + '</td><td>'
      + SS.StoreName + '</td><td>' + CAST(SS.Sales AS VARCHAR(15)) + '</td></tr>',
  @lastBrand = SS.Brand,
  @lastTotal = SB.TotalSales -- Save the last total, too
FROM #SalesByStore SS
    join #SalesByBrand SB on SS.Brand = SB.Brand -- Join to get brand totals
ORDER BY SS.Brand

-- Finally add the last total
SELECT
  @tableBody
    = @tableBody
      + '<tr><td colspan="2">Subtotal</td><td>'
      + CAST(@lastTotal AS VARCHAR(15))
      + '</td></tr>' 
```

您肯定想出了一个巧妙的方法来创建这个 HTML 表格。请注意，我已经移动了一些东西并一起破解了一个解决方案。

我用这组数据进行了测试：

```
insert into #SalesByStore select 'A', 'Store 1', 1000
insert into #SalesByStore select 'A', 'Store 2', 2000
insert into #SalesByStore select 'B', 'Store 3', 1500
insert into #SalesByStore select 'B', 'Store 4', 2100
insert into #SalesByStore select 'B', 'Store 5', 3100
insert into #SalesByBrand select 'A', 3000
insert into #SalesByBrand select 'B', 6700 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:25:44.127

使用 GROUPING SETS 和正确排序的替代方法。这些字符串使用 XML PATH 连接在一起。

工作[SQL Fiddle 小提琴](http://sqlfiddle.com/#!3/4a394/23/0)
中的顶部查询显示了查询后的变量内容。底部查询只是向您显示 GROUPING SETS 产生的内容。

```
declare @tablebody nvarchar(max) = '';
select @tablebody = (select 
  case
  when storename is null then
   '<tr><td colspan="2">Subtotal</td>
        <td>'+cast(sum(sales) as varchar(15))+'</td></tr>'
 else
   '<tr><td>'+brand+'</td>
        <td>'+storename+'</td>
        <td>'+cast(sum(sales) as varchar(15))+'</td></tr>'
  end
from salesbystore
group by grouping sets
((brand, storename),(brand))
order by brand, case when storename is null then 1 else 0 end
for xml path (''), root('a'), type
).value('(/a)[1]','nvarchar(max)');
select @tablebody; 
```

虽然分组肯定是 SQL Server 2008 以后的一个特性，并且应该替换所有使用 WITH ROLLUP，但这个特定示例可以很容易地切换到 SQL Server 2005 的 WITH ROLLUP，使用 3 行替换所示的 2

```
group by brand, storename  -- group by grouping sets
with rollup                -- ((brand, storename),(brand))
having brand is not null 
```

# javascript - 不同语言的自动完成或：如何为 Web 应用程序存储不同的语言

> ID：12729937
> 
> 赞同：0
> 
> 时间：2012-10-04T14:47:32.427
> 
> 标签：javascript, php, mysql, localization

我在一个网站上工作，有一个名为“items”的mysql表，比如：

```
item_id | item 
```

（第二列仅用于识别 item_id。）

在 language1.php 中，我在 language1 中存储了一个包含 item_id 和项目本身名称的数组，例如：

```
$items = array(
1 -> 'Apple',
2 -> 'Orange',
...
); 
```

根据用户的语言，包括正确的语言文件。

项目数组（< 1000 个项目/数组）应该有一个自动完成输入框。我想，这不是一个好的解决方案，用 php（“search_array”或类似这样的函数）搜索 language1.php 中的数组，但我认为没有办法维护这个系统并通过 mysql 搜索，不是它？

您如何为网站存储不同的语言并使其可搜索？

是否有必要将所有语言存储在 mysql 的特定列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:55:05.123

我可能会添加一个`items_localization`包含类似列的表

```
item_id,
locale,
content, (in your base language of choice)
translation (the translated content) 
```

它有一个外键`item_id`，或者一个复合主键`item_id, locale`，或者一个自动增量 id 字段和一个唯一索引`item_id, locale`。有些人喜欢使用单列、自动增量主键，因为他们正在使用的框架，所以如果这描述了你，请使用后一种解决方案。

或者，如果您想要更广泛的本地化解决方案，您可以只拥有一个`localization`包含如下列的表格

```
localization_id,
locale,
content,
translation 
```

可以存储任何类型的本地化。那么你的 items_localization 表可能只是一个多对多的连接表，其中的列如下

```
item_id,
localization_id 
```

你可以做一个连接查询来获得你正在寻找的本地化。对于使用第一个建议的表结构：

```
SELECT i.*, il.translation
FROM items AS i
INNER JOIN items_localization AS il on i.item_id = il.item_id
WHERE il.locale = ? AND il.translation LIKE "%?%" 
```

您将值替换为当前语言环境和自动完成搜索短语`?`的位置。

# continuous-integration - 如何在 Team City 的代码覆盖范围内排除命名空间？

> ID：12729952
> 
> 赞同：16
> 
> 时间：2012-10-04T14:48:16.030
> 
> 标签：continuous-integration, teamcity, code-coverage, dotcover

我正在使用 Team City 7.1.1（内部版本 24074），并且我想在代码覆盖范围内排除一些**命名空间。**我正在使用 dotcover 作为代码覆盖工具。我在测试中使用 MSPec、Machine.Fakes 和 Rhino Mocks。

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-05T07:18:07.203

最后我找到了排除**NAMESPACES的方法**

-：*程序集*名称；类型=*名称空间*。*

# php - 在自定义服务 symfony2 中插入原则

> ID：12729953
> 
> 赞同：2
> 
> 时间：2012-10-04T14:48:22.420
> 
> 标签：php, symfony, login, persist

我在服务中使用原则时遇到问题：

> 致命错误：在第 37 行的 /var/www/Symfony/src/mio/mioBundle/AuthenticationHandler.php 中的非对象上调用成员函数 persist()

该服务的代码是：

```
services:
    authentication_handler:
        class: mio\mioBundle\AuthenticationHandler
        arguments: [@router , @doctrine.orm.entity_manager ]
        calls:
            - [ setContainer, [ @service_container ] ] 
```

监听器的代码是：

```
class AuthenticationHandler extends ContainerAware implements AuthenticationSuccessHandlerInterface{

    protected $router;

    protected $em;

        public function __construct(RouterInterface $router)
    {
        $this->router = $router;
    }

     public function __constructor(EntityManager $entityManager)
    {
        $this->em = $entityManager;
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        $empleado = $token->getUser();
        $empleado->setNombre("abeeeer");
        $this->em->persist($empleado); //line 37
        $this->em->flush();

        //return new Response($token->getUsername());
        return new RedirectResponse($this->router->generate('familia'));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:51:03.633

构造函数中可以有多个参数：

```
public function __construct(RouterInterface $router, EntityManager $em)
{
    $this->router = $router;
    $this->em = $em;
} 
```

但是你不能在一个类中有多个构造函数并且`__constructor`不是构造函数方法名，所以你应该删除那个方法。

此外，您不必扩展`ContainerAware`，因为无论如何您都在注入您需要的服务。这意味着你不需要这个：

```
calls:
    - [ setContainer, [ @service_container ] ] 
```

# java - 如何处理 JSON-Simple 中的空值？

> ID：12729954
> 
> 赞同：2
> 
> 时间：2012-10-04T14:48:26.763
> 
> 标签：java, nullpointerexception, ternary-operator, json-simple

我正在使用 JSON-Simple 以 JSON 格式摄取推文。我将用户对象拆分为它自己的 JSONObject 类，在内存中：

```
incomingUser = (JSONObject) incomingTweet.get("user"); 
```

然后我使用 JSON-Simple 从推文和用户对象中剥离各种字段；我在做

```
strippedJSON.put("userLocation", incomingUser.get("location").toString(); 
```

但事实证明，有时用户的位置设置为`null`.

所以现在我正在检查我要剥离的字段是否为空，并将其设置为“”：

```
strippedJSON.put("userLocation", (incomingUser.get("location").toString().equals(null)?
        "": incomingUser.get("location").toString()); 
```

但是我已经在调试模式下逐步完成了eclipse，发现有人的位置设置为null，并跳过了我剥离与之关联的JSON对象字段`"location"`并将其放入JSON对象字段的部分`"user Location"`。我得到了一个N​​PE。

我的三元陈述是否没有说明这一点？虽然它会检查它是否等于 null（只有一个“空对象”它应该能够看到指针是相同的）如果它是（`condtion?`是真的）它应该评估为`put("location","")`否？

我哪里错了？我应该怎么做来处理这个空值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:44:34.673

由于您试图访问空对象上的 .equals() 方法，因此您收到空指针异常。

`location`如果键返回值，请尝试此操作：

```
(incomingUser.get("location").toString() == null) ? etc.. 
```

编辑：实际上我刚刚想到它可能会`incomingUser.get("location")`返回`null`（即`location`键可能指的是`JSONObject`or `JSONArray`），在这种情况下你需要：

```
(incomingUser.get("location") == null) ? etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:51:58.620

只需使用`try and catch`块来处理它......

```
try{

strippedJSON.put("userLocation", incomingUser.get("location").toString();

}catch(Exception ex){

  System.out.println("This field is null");

} 
```

# java - 如何自定义 JSON 输出以获取更详细的信息

> ID：12729956
> 
> 赞同：0
> 
> 时间：2012-10-04T14:48:29.547
> 
> 标签：java, json

这适用于所有 JSON 大脑。

假设我有一个类似的界面：

```
public interface Model {
  String getName();
  String getDateCreated();
  String getTimeCreated();
  String getLastUpdated();
  String getLastUpdatedTime();
} 
```

然后假设我有一个 Item 对象：

```
public class Item {

  private String name;
  private Date created;
  private Date updated;

  ..setters and getters
} 
```

然后假设我有一个模型包装器：

```
public class ItemModel implements Model {

  private final Item item;

  public ItemModel(Item item){
      this.item = item;
  }

  public String getName(){
      return item.getName();
  }

  public String getDateCreated(){
      Date created = item.getCreated();
      //format the date nicely and return a date string
  }

  public String getTimeCreated(){
      Date created = item.getCreated();
      //format the date nicely and return a time string
  }

  ...you get the gyst, right?
} 
```

问题是：

1.  如何序列化 ItemModel 以便 json 输出将反映模型接口上的 getter 名称？
2.  具体来说，哪个库最容易做到这一点？您如何使用特定的库来实现这一点？
3.  最后，我不想序列化包装在 ItemModel 中的 Item 对象

我希望输出是这样的：

```
{item : {name: '', dateCreated : '', timeCreated : '', lastUpdated : '', lastUpdatedTime : ''} 
```

提前致谢！

* * *

我想我应该分享到目前为止我所能做的，并得到你的反馈。它几乎可以满足我的要求，但我不确定这是否正确：

这里的一位用户向我指出了 genson，我觉得它很有趣。

首先我创建了一个序列化器

公共类 ModelSerializer 实现序列化器 {

```
@Override
public void serialize(T target, ObjectWriter writer, Context cntxt) throws TransformationException, IOException {
    writer.beginObject();
    for (Method method : target.getClass().getMethods()) {
        String methodName = method.getName();
        if (methodName.startsWith("get")) {
            int index = "get".length();
            String valueName = Character.toLowerCase(methodName.charAt(index)) + method.getName().substring(index + 1);
            try {
                String valueString = (String) method.invoke(target, new Object[]{});
                writer.writeName(valueName).writeValue(valueString);
            } catch (IllegalArgumentException ex) {
                Logger.getLogger(ModelSerializer.class.getName()).log(Level.SEVERE, null, ex);
                throw new TransformationException(ex.getMessage());
            } catch (IllegalAccessException ex) {
                Logger.getLogger(ModelSerializer.class.getName()).log(Level.SEVERE, null, ex);
                throw new TransformationException(ex.getMessage());
            } catch (InvocationTargetException ex) {
                Logger.getLogger(ModelSerializer.class.getName()).log(Level.SEVERE, null, ex);
                throw new TransformationException(ex.getMessage());
            }
        }
    }
    writer.endObject();
} 
```

}

接下来，我创建了 Genson 并通过了 Serializer

Genson genson = new Genson.Builder().withSerializer(new ModelSerializer(), Model.class).create();

现在，当我通过 ViewModel 时，我得到了按预期格式化的字段

模型 viewModel = new ItemModel(domainModel); 其中 domainModel 是 Item System.out.println(genson.serialize(viewModel)) 的一个实例；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:51:55.027

我会重构你的代码。首先，您想要一个 POCO 类作为您的数据载体，这将是您的项目类。然后你会想要一个存储库为你做 CRUD 操作。

```
public interface IItemModelRepository {
 Item getItemByName();
 Item getItemByDateCreated();
} 
```

您将接口实现为：

```
public class ItemModelRepository : IItemModelRepository {

private IEnumerable<Item> _items;

public ItemModelRepository()
{
   this._items = /// Logic to load all items from database or from in memory cache
} 

public Item getItemByName(string name){
  return this._items.First(i => i.Name.Equals(name);
}

public Item getItemByDateCreated(DateTime dateCreated){
  return this._items.First(i => i.DateCreated == dateCreated);     
}

....
} 
```

然后你可以使用这个存储库（直接在控制器中使用存储库不是一个好主意。你宁愿返回一个 ViewModel，它是一个包含视图所需属性的 POCO 类）：

```
var item = ItemModelRespository.GetByName("enter name here");
var viewModel = new ViewModel();
var serializer = new JavaScriptSerializer();
viewModel.JsonData = serializer.Serialize(item ); 
```

在客户端，您可以使用：

```
<%= Model.JsonData %> 
```

也看看这里：[ASP.NET MVC: How to convert View Model into Json object](https://stackoverflow.com/questions/3365551/asp-net-mvc-how-to-convert-view-model-into-json-object)

- 编辑

抱歉，错过了您使用 Java 的部分。如此处所述：

[http://flax.ie/flax-engine-gwt-client-side-json-serialization-and-deserialization/](http://flax.ie/flax-engine-gwt-client-side-json-serialization-and-deserialization/)

您可以将现有的项目类修改为：

```
public class Item implements JsonSerializable {

  private String name;
  private Date created;
  private Date updated;

 ..setters and getters

/**
* Pass this method JSON and it gives you back an object which you can
* then assign to your object via MyObject x = JsonToObject(String Json);
*
* @param JSON
* @return
*/
public static Item JsonToObject(String Json) {
    Serializer serializer = (Serializer) GWT.create(Serializer.class);
    return (Item)serializer.deSerialize(Json,"your fully qualified Item assembly name");
}

/**
* Creates a JSON string from the current object
*
* @return String of JSON
*/
public String toJson() {
    Serializer serializer = (Serializer) GWT.create(Serializer.class);
    return serializer.serialize(this);
}
} 
```

然后在使用 IItemModelRepository 的代码中，您可以使用：

```
var item = ItemModelRepository.GetItemByName("name");
var jsonString = item.ToJson(); 
```

我不明白的是，当您希望 JSON 输出成为 Item 对象的序列化表示时，为什么要序列化 ​​ItemModel？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:45:31.373

[您可以使用Jettison](http://jettison.codehaus.org/)之类的库手动定义自己的 JSON 映射，因此您不必使用 POJOS 和 POCO 以及包装器和其他愚蠢的东西来扭曲自己。设置映射确实不需要太多时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:45:02.260

您可以尝试 genson 库，它提供了几种解决问题的方法[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。

如果所需的输出是 {name: '', dateCreated : '', timeCreated : '', lastUpdated : '', lastUpdatedTime : ''} 没有 "item :" ：

```
public class ItemModel implements Model {    
    @JsonIgnore private final Item item; 
    ....
}

new Genson().serialize(myItemModel); 
```

如果您想要“项目”键，您还可以像在[wiki](http://code.google.com/p/genson/wiki/GettingStarted#Custom_Converter)中那样实现自定义序列化器或转换器。

# java - 将 InputStream 转换为 BufferedImage 返回 null

> ID：12729960
> 
> 赞同：2
> 
> 时间：2012-10-04T14:48:39.853
> 
> 标签：java, blob

我正在编写一个代码来从数据库中检索多个“blob”图像并将它们连接在一起，下面是代码

```
ResultSet images = pst.executeQuery();
byte[] imageData = null;
Blob blob = null;
int blobLength = 0;
List<BufferedImage> list = new LinkedList();

while (images.next()) {                                 
    blob = ((OracleResultSet) images).getBLOB(2);
    blobLength = (int) blob.length();
    imageData = blob.getBytes(1, blobLength);   
    list.add(ImageIO.read(new ByteArrayInputStream(imageData)));
} 
```

问题是列表始终为空，尽管变量“imageData”包含图像（我检查了它）。这意味着，java 无法将 ByteArrayInputStream 转换为 BufferedImage，为什么？？！！

# c++ - 初始化变量列表中的赋值顺序是否未定义？

> ID：12729962
> 
> 赞同：4
> 
> 时间：2012-10-04T14:48:48.323
> 
> 标签：c++, operator-precedence

> **可能重复：**
> [变量列表中的逗号是序列点吗？](https://stackoverflow.com/questions/6414030/is-the-comma-in-a-variable-list-a-sequence-point)

如果我有以下代码，逗号是否充当正常序列点，或者行为未定义？

```
int i = 1, j = i; 
```

*我实际上并不打算使用它（我们的内部标准禁止使用 even `int i, j`），但我很好奇，它被证明对谷歌来说非常棘手。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T14:50:17.747

它定义明确：

### 8\. 声明符：[dcl.decl]

> 3) 声明中的每个 init-declarator 都被单独分析，就好像它本身在声明中一样。

并且注意：

> 90) 一个带有多个声明符的声明通常等同于相应的声明序列，每个声明都带有一个单独的声明符。那是
> 
> `T D1, D2, ... Dn;`
> 
> 通常相当于
> 
> `T D1; T D2; ... T Dn;`
> 
> 其中 T 是一个 decl-specifier-seq 并且每个 Di 是一个 init-declarator。

为了完整性（因为注释*通常*说）：

> 当其中一个声明符引入的名称隐藏了 dcl 说明符使用的类型名称时会发生异常，因此当在后续声明中使用相同的 dcl 说明符时，它们的含义不同，如`struct S { ... }; S S, T;`//声明 struct S 的两个实例`which is not equivalent to`struct S { ... }; S S; 英石; // 错误`

# objective-c - 最快的图像处理框架

> ID：12729965
> 
> 赞同：0
> 
> 时间：2012-10-04T14:48:59.107
> 
> 标签：objective-c, macos, image-processing

我正在开发类似绘画应用程序的东西。将能够绘制大图像。我已经实现了这个能力。现在我需要添加图像处理能力（效果如：模糊、色调、饱和度、亮度、对比度、棕褐色......）。使用框架可以做到这一点`CoreImage`，但我遇到了一个问题。我所有的绘画和图像绘制都是基于 OpenGL 的。当我尝试使用核心图像处理图像（对其应用效果）并将其发送回 OpenGL 以绘制到屏幕时，我遇到了一些性能问题，例如`slow image processing`尝试实时执行此操作时。用户移动滑块并随着滑块位置的变化图像得到更新。因此，如果图像非常大（例如 3200x2000），则此操作会变慢。如果图像较小（例如 1500x1000），则效果很好。所以我得出结论，这是框架的问题。如果我错了告诉我。那么我可以使用什么框架来进行快速图像处理呢？我发现了`vImage`，但正如我所见，它没有应用这种效果的能力。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:53:26.160

这几乎可以满足您[对 Brad 的 GPUImage 框架的所有要求](https://github.com/BradLarson/GPUImage)

# r - 如何使ggplot2中一个点的大小与其数值成反比？

> ID：12729967
> 
> 赞同：3
> 
> 时间：2012-10-04T14:49:05.780
> 
> 标签：r, ggplot2

我正在使用**ggplot2**来可视化数据集中的三个变量，例如：

```
data = data.frame(x = sample(1:10, 10, replace=TRUE), y = sample(1:10, 10, replace=TRUE), Rank = sample(1:10, 10, replace = TRUE)) 
```

这里有示例代码：

```
ggplot(data, aes(x = x, y = y)) + geom_point(aes(size = Rank)) 
```

但是，我希望一个点的大小与其等级*成反比*，以便等级接近“1”的点很大，并且可以在图例中正确显示。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:50:49.803

你可以使用`1/Rank`：

```
ggplot(data, aes(x = x, y = y)) + geom_point(aes(size = 1/Rank)) 
```

# python - 在多台计算机上使用 PyDev

> ID：12729968
> 
> 赞同：0
> 
> 时间：2012-10-04T14:49:08.817
> 
> 标签：python, pydev

我试图找出在多台计算机上使用 Python/PyDev 的最佳方式。目前，我尝试在工作的 Windows 机器上编写代码，并在家里的 linux 机器上编写代码。我在某个地方看到了一个带有版本管理的 IDE，虽然不知道它在实践中是如何工作的。有没有办法在两台不同的计算机上使用相同的代码在 PyDev 中工作？

将来我们计划为该项目建立一个团队，以便当时有几个人在同一个项目上工作。我尝试通过网络查找一些信息，但没有遇到任何明智的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:10:39.343

我使用[Mercurial](http://mercurial.selenic.com/)进行版本控制。这在 Eclipse 下由[MercurialEclipse](http://javaforge.com/project/HGE)插件支持，该插件可从 Eclipse 市场获得。

如何设置取决于您是否可以在家中访问您的工作计算机。如果您这样做，您可以将您的家用计算机设置为服务器，从服务器中提取您在工作中所做的事情，然后将您在家中所做的事情推送到服务器。否则，有办法从一台计算机中提取修改并将它们应用于另一台计算机，反之亦然。

# entity-framework-4 - 允许 Entity Framework 4.5 将 datetime2 与 SQL Server CE4 一起使用

> ID：12729972
> 
> 赞同：2
> 
> 时间：2012-10-04T14:49:17.580
> 
> 标签：entity-framework-4, sql-server-ce-4, automated-tests, datetime2

我正在使用 SQL Server 2008 开发实体框架项目。我们最近更改为`datetime2`对很多日期使用字段类型，因为我们需要精度。

这适用于我们的实时和开发数据库，​​但作为我们端到端测试的一部分，我们一直在使用不支持该`datetime2`类型的 SQL Server CE 4.0。当 Entity Framework 尝试构建数据库时，它会返回一系列异常，如下所示：

```
error 0040: The Type datetime2 is not qualified with a namespace or alias. Only primitive types can be used without qualification. 
```

显然，为了测试目的而更改我们的生产代码没有任何价值，那么有没有办法告诉它将`datetime2`值转换为常规值`datetime`或将它们转换为`varchar`?

测试的目的是确保从数据层到接口的所有内容都按预期工作，因此如果有更好的方法来实现这种测试，可能会提供有用的替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:51:51.007

最好使用 SQL Server 2012 LocalDB 而不是 CE。我意识到使用 SQL Server 2012 可能会引入潜在的兼容性问题（尽管它确实不应该），但 LocalDB 是一个完整的 SQL-Server 功能基于文件的数据库。它支持日期时间2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:15:03.580

最后，我找到了解决这个问题的方法，该解决方案足以满足我正在使用的端到端测试配置。我采用的解决方案是使用特殊的 DataContext 来处理 Sql Server CE 请求，因此：

```
public class TestDataContext : DataContext 
{

    protected override void  OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
    {
        // list of available Conventions: http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions(v=vs.103).aspx 

        // Remove the column attributes that cause the datetime2 errors, so that 
        // for SQL Server CE we just have regular DateTime objects rather than using
        // the attribute value from the entity.
        modelBuilder.Conventions.Remove<ColumnAttributeConvention>();

        // Attempt to add back the String Length restrictions on the entities. I havent 
        // tested that this works.
        modelBuilder.Configurations.Add( new ComplexTypeConfiguration<StringLengthAttributeConvention>());

        // SQL Server CE is very sensitive to potential circular cascade deletion problems
        modelBuilder.Conventions.Remove<ManyToManyCascadeDeleteConvention>();
        modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();

    }

} 
```

通过在我的测试类中用 TestDataContext 替换常规 DataContext，我有相同的行为，而不会导致 SQL Server CE 崩溃。

# jquery - JavaScript 原型与 jQuery 的 .data() 函数一起使用？

> ID：12729974
> 
> 赞同：0
> 
> 时间：2012-10-04T14:49:29.140
> 
> 标签：jquery, prototype, jquery-ui-widget-factory

我正在尝试将 JavaScript 原型与 jQuery 的[.data()](http://api.jquery.com/data/)函数一起使用。我的代码如下所示：

```
el = this.element;

el.data("state", {
   someValue: null,
   anotherValue: function() {
      this._val = 0;
   }
});

el.data("state").anotherValue.prototype.getValue = function() {
   return this._val;
}

el.data("state").anotherValue.prototype.setValue = function(val) {

   if (val === Infinity || val < 1) {
      this._val = 1;
   } else {
      this._val = val;
   }

}

console.log(el.data("state").anotherValue.getValue()); 
```

这似乎不起作用，我只是想知道为什么？

运行此代码时得到的结果是：

```
Uncaught TypeError: Object function () {
   this._val = 0;
} has no method 'getValue' 
```

我正在开发一个基于小部件工厂的 jQuery 插件，我想在这个插件中构建一个可管理的状态机 - 我可以存储和访问插件当前状态的中心位置。我想尝试这个的原因之一是我希望能够监控某些值是否发生变化并在它们发生变化时触发其他事情。我需要使用 .data() 函数存储数据，因为它必须绑定到元素。否则，当您在同一页面上获得插件的多个实例时，会发生奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:07:12.983

原型似乎不是去这里的方式。相反，我将尝试使用[setters 和 getters](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)。我不能 100% 确定浏览器的兼容性，但是当上面的示例被重写时，代码如下所示：

```
el = this.element;

el.data("someValue", { 
   val: null,
   get value() { return this.val; },
   set value(val) { 
      if (val === Infinity || val < 1) {
         this.val = 1;
      } else {
         this.val = val;
      }
});

console.log(el.data("someValue").value);
el.data("someValue").value = 0;
console.log(el.data("someValue").value); 
```

如果您运行此代码，您将获得以下输出（在 Google Chrome 中）：

```
null
10 
```

当以这种方式实现时，我可以运行检查并在变量的值被更改或访问时使事情发生。请记住，这是初步代码 - 我没有时间在多个平台上的多个浏览器中运行它。阅读[这篇博文](http://www.joshondesign.com/2012/02/13/javascript-getters-and-setters-why-u-no-use-dem)，似乎 IE8 存在浏览器兼容性问题。

# autocad - 为什么 entnext 命令返回 nil？

> ID：12729977
> 
> 赞同：0
> 
> 时间：2012-10-04T14:49:33.737
> 
> 标签：autocad, polyline, vertices, autolisp

我对 AutoLISP 和 AutoCAD 都很陌生。

我想获取折线的顶点，以便更改它们的宽度。

这是我写的一段代码。我想知道为什么它不起作用。“entnext”部分似乎导致了问题。当我用“！”测试它时，它返回 nil 值。

```
 (setq e(entget (car (entsel))))
  (setq e1(entget (entnext(cdr(car e))))) 
```

我将不胜感激任何帮助或线索来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:06:07.900

首先：您可以将代码简化为 (setq e1(entget(entnext(car(entsel)))))

因为您将 e 设置为所选实体的列表，然后从该列表中获取实体名称 (cdr (car e))，但这就是您已经拥有的 (car (entsel))

第二：AutoCAD中的多段线有两种，一种是LWPOLYLINE：

```
((-1 . <Entity name: 7ffff6051c0>) (0 . "LWPOLYLINE") (330 . 
<Entity name: 7ffff603f50>) (5 . "94") (100 . "AcDbEntity") (67 . 0) (410 . 
"Model") (8 . "0") (100 . "AcDbPolyline") (90 . 7) (70 . 0) (43 . 0.0) (38 . 
0.0) (39 . 0.0) (10 130.547 84.582) (40 . 0.0) (41 . 0.0) (42 . 0.0) (91 . 0) 
(10 194.681 129.062) (40 . 0.0) (41 . 0.0) (42 . 0.0) (91 . 0) (10 239.54 
77.9275) (40 . 0.0) (41 . 0.0) (42 . 0.0) (91 . 0) (10 311.035 131.864) (40 . 
0.0) (41 . 0.0) (42 . 0.0) (91 . 0) (10 388.487 66.0195) (40 . 0.0) (41 . 0.0) 
(42 . 0.0) (91 . 0) (10 445.962 135.366) (40 . 0.0) (41 . 0.0) (42 . 0.0) (91 . 
0) (10 500.634 73.3744) (40 . 0.0) (41 . 0.0) (42 . 0.0) (91 . 0) (210 0.0 0.0 
1.0)) 
```

另一个是 POLYLINE：

```
((-1 . <Entity name: 7ffff605220>) (0 . "POLYLINE") (330 . 
<Entity name: 7ffff603f50>) (5 . "9A") (100 . "AcDbEntity") (67 . 0) (410 . 
"Model") (8 . "0") (100 . "AcDb3dPolyline") (66 . 1) (10 0.0 0.0 0.0) (70 . 8) 
(40 . 0.0) (41 . 0.0) (210 0.0 0.0 1.0) (71 . 0) (72 . 0) (73 . 0) (74 . 0) (75 
. 0)) 
```

要获取 LWPOLYLINE 的顶点，您必须从列表中选择 DXF 代码 10，使用 POLYLINE，用于表示 3d 折线，您可以使用您的代码

# google-maps - 检查鼠标/谷歌工具是否触发了“zoom_changed”？

> ID：12729984
> 
> 赞同：0
> 
> 时间：2012-10-04T14:49:58.453
> 
> 标签：google-maps, google-maps-api-3

我想知道缩放是否改变是因为用户从鼠标/谷歌缩放工具（地图的左上角，zoomControl）改变它，或者只是在谷歌的某些功能（如方向显示.setDirections或边界）之后改变：

```
google.maps.event.addListener(map, 'zoom_changed', function () {
    if (CONDITION) {

    }
}); 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:00:02.683

您可以通过在执行更改缩放的操作时设置全局标志来检测缩放是否已根据您的程序已采取的操作发生更改，在该操作完成时将其清除（在 zoom_changed 事件处理程序或空闲事件处理程序中） ）。

如果未设置您的标志，则缩放是由用户操作引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:32:42.050

您可能想要侦听该`idle`事件，这是一个“捕获所有”事件，在用户平移或缩放后触发（并且仅触发一次）。还有一个`zoom_changed`事件，在缩放级别更改时触发。[在此处](https://developers.google.com/maps/documentation/javascript/reference#Map)查看所有地图事件。

我不知道有一种方法可以“知道”缩放是来自用户干预还是来自 Google Maps API 函数，而至少没有[构建自定义缩放控件](https://developers.google.com/maps/documentation/javascript/controls#CustomEvents)。

# spring - struts2注解sp ring托管bean

> ID：12729987
> 
> 赞同：0
> 
> 时间：2012-10-04T14:50:07.807
> 
> 标签：spring, spring-mvc, struts2, annotations, spring-annotations

我正在使用 Spring 来管理 struts 2 动作 bean。我正在尝试从基于 XML 的配置迁移到基于注释的配置。我正在使用 struts2-spring-plugin，以便 struts 获得由 spring 管理的对象的句柄。以下是 myAction 的 applicationContext 文件中的内容。

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema
      /beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context http://www.springframework.org
      /schema/context/spring-context-3.0.xsd">
    <context:annotation-config />
    <bean id="myAction123" class="com.action.MyAction" scope="prototype"></bean>
</beans> 
```

在 struts2-tiles 配置文件中，我定义了请求映射。此映射使用对 spring 创建的 bean 的引用。class属性指的是spring bean定义中定义的id属性。

```
 <action name="myAction_*" method="{1}" class="myAction123">
        <result name="success" type="tiles">action.request.view</result>
    </action> 
```

Action 类注释如下：

```
@Controller
public class MyAction {

    @Autowired
    public MyService myService;

    public MyService getMyService() {
        return myService;
    }

    public void setMyService(MyService myService) {
        this.myService = myService;
    }

    public String doSearch() {
        /* ... */
    }
} 
```

请在下面找到堆栈跟踪，当我删除弹簧动作 bean 引用时由 struts 抛出。

```
09:10:37,852 ERROR org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/gas]  - Exception starting filter struts
Action class [volumeRequestAction] not found - action - file:/C:/dev/Workspace/GAS2/_GAS2WebApp/target/_GAS2WebApp-2.0/WEB-INF/classes/struts2-tiles.xml:701:81
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:374)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:329)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:429)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:239)
at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111)
at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reload(DefaultConfiguration.java:152)
at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:52)
at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:395)
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:452)
at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:201)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:221)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:302)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:78)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3635)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4222)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:760)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:740)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:544)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:626)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:553)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:488)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1022)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:736)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:448)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433)
Oct 5, 2012 9:10:37 AM org.apache.catalina.core.StandardContext start 
```

我了解我没有放置正确的注释，这是导致此问题的原因。尽管我已经尝试阅读了很多关于这个的内容，但我仍然对迁移这个特定部分感到困惑。我无法确定我是否会为此使用 struts 2 注释或 spring 注释。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:31:40.287

您还需要这条线

```
<context:component-scan base-package="my.package.path" /> 
```

在你的 application-context.xml 文件中告诉 Spring 去哪里寻找注释。使用 @Controller 注解没有任何问题。

# facebook - 即使作为 Graph API，connect_reclaim_url 是否仍然可用？

> ID：12729990
> 
> 赞同：1
> 
> 时间：2012-10-04T14:50:14.433
> 
> 标签：facebook, url

我无法找到关于[在 Graph API 中作为 Application 对象](https://developers.facebook.com/docs/appproperties/)`connect_reclaim_url`的参数列出的任何信息，以及它应该如何工作？我想有两个主要的变化：

1.  在每个应用程序（允许/取消）请求中，都会为用户设置 url（我认为不是这样）
2.  无论是在应用仪表板上（我还找不到位置）还是通过 API 设置了一个通用 URL，当用户删除它的 FB 个人资料时，UID 将被传递

有人可以确认上述之一。甚至是一点描述如何正确地做到这一点或描述这一点的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:18:51.580

# box-api - Box 文件操作回调

> ID：12729995
> 
> 赞同：1
> 
> 时间：2012-10-04T14:50:33.160
> 
> 标签：box-api

正在尝试探索文件操作。特别是初步回调和最终回调的功能是什么，预期的返回值是多少。

但是缺少文档页面：http: [//developers.box.com/BoxPlatformFileActions](http://developers.box.com/BoxPlatformFileActions)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:53:41.803

尝试[http://developers.box.net/w/page/12923960/BoxPlatformFileActions上的文档](http://developers.box.net/w/page/12923960/BoxPlatformFileActions)

# c# - 使用 DataRelation 组合两个数据表的问题

> ID：12729999
> 
> 赞同：1
> 
> 时间：2012-10-04T14:50:42.760
> 
> 标签：c#, datatable, dataset, datacolumn, datarelation

您好我正在尝试组合以下两个数据表，代码没有出错，但它没有在输出中组合它们。我在这条线上遇到了麻烦：

```
if (pdc.ColumnName != "ORDER_NUMBER") 
    dac[pdc.ColumnName] = dsCheck.Tables[0].Rows.Find(dac[pdc.ColumnName]); 
```

代码：

```
 public string GetData()
    {
        System.Data.DataSet dsCheck = new System.Data.DataSet();

        dsCheck.Tables.Add(this.GetOrder());
        //dsCheck.Tables.Add(this.GetSAP_Data());
        dsCheck.Tables.Add(GetFIS_Data());
        //return ds;

        //Create relationship
        // Create the array of Parent and Child columns.

      DataColumn ParentCol ;
      DataColumn ChildCol ;

      ParentCol = new DataColumn() ;
      ChildCol = new DataColumn() ;

      // Set the name of the parent column to hold the relationship.
      ParentCol.DataType = System.Type.GetType("System.String");
      ParentCol = dsCheck.Tables[0].Columns["ORDER_NUMBER"];

      // Set the name of the child column to hold the relationship.
      ChildCol.DataType = System.Type.GetType("System.String");
      ChildCol = dsCheck.Tables[1].Columns["KOMNR"];

      // Create the relationship
      DataRelation Rel = new DataRelation("DataLink", ParentCol, ChildCol,false) ;

      // Add the newly created relationship to the dataset.
      dsCheck.Relations.Add(Rel) ;

      //add parent columns to child DataTable
      foreach (DataColumn dac in dsCheck.Tables[0].Columns)
      {
          if (!dsCheck.Tables[1].Columns.Contains(dac.ColumnName))
              dsCheck.Tables[1].Columns.Add(dac.ColumnName);
      }

     //add parent data to child DataTable
      foreach (DataRow dac in dsCheck.Tables[1].Rows)
      {
          foreach (DataColumn pdc in dsCheck.Tables[0].Columns)
          {
              if (pdc.ColumnName != "ORDER_NUMBER")
                  dac[pdc.ColumnName] = dsCheck.Tables[0].Rows.Find(dac[pdc.ColumnName]);
          }
      }
      StringWriter sw = new StringWriter();
      dsCheck.WriteXml(sw);
      string result = sw.ToString();

      return result;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:04:41.423

你也可以`adjust boolean to true`为了创建约束

```
DataRelation Rel = new DataRelation("DataLink", 
dsCheck.Tables[0].Columns["ORDER_NUMBER"], 
dsCheck.Tables[1].Columns["KOMNR"],
true) ;

dsCheck.Relations.Add(Rel) ; 
```

注意：您可以尝试不通过临时列。

链接： http: [//msdn.microsoft.com/fr-fr/library/9ae5a582 (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/9ae5a582(v=vs.80).aspx)