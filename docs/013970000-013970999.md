# StackOverflow 问答 13970000-13970999

# java - 如何在数据库中插入十进制值？

> ID：13970001
> 
> 赞同：0
> 
> 时间：2012-12-20T10:24:28.797
> 
> 标签：java, db2, decimal

我正在尝试使用正常的插入表达式在 db2 中插入十进制数。在执行查询后，当我对特定的插入值进行选择时，我得到它作为结果。

但是当我进入表模式并查找特定元素的插入值时，我发现它是空的。现在，在尝试通过 java 检索相同的值时，它给了我一个空字符串。

该表是这样的：有两个十进制（18,2）字段。

```
insert into TEST values (153, 'test', 'test', 1, 1, 1.11, 1.11) 
```

选择查询：

```
Select * from TEST 
```

给我输入的实际值。但是当我进入表模式时，我没有找到输入的小数输入。

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:52:09.100

您必须定义一个[java.math.BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)字段，并将您的双精度或浮点值放入该字段。

```
BigDecimal value = new BigDecimal(1.11); 
```

BigDecimal 字段（值）将进入 INSERT 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:50:21.447

没有看到代码，我怀疑你做了回滚而不是提交？或者您使用的隔离级别不正确（READ_UNCOMMITED）

# java - 多线程私有构造函数

> ID：13970003
> 
> 赞同：5
> 
> 时间：2012-12-20T10:24:35.023
> 
> 标签：java, multithreading, constructor

直接从 Java 并发实践中得出：

```
@ThreadSafe
public class SafePoint {
  @GuardedBy("this") private int x, y;
  private SafePoint(int[] a) { this(a[0], a[1]); }
  public SafePoint(SafePoint p) { this(p.get()); }
  public SafePoint(int x, int y) {
     this.x = x;
     this.y = y;
   }
  public synchronized int[] get() {
     return new int[] { x, y };
  }
  public synchronized void set(int x, int y) {
    this.x = x;
    this.y = y;
  }
} 
```

上面是一个线程安全的类：因为它的设置器是同步的。我也理解为什么 getter 不单独返回 x / y 而是返回一个数组。我有 2 个问题。为什么 ？

1.  `private SafePoint(int[] a)`
2.  `public SafePoint(SafePoint p) { this(p.get()); }`代替`this(p.x,p.y);`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T10:27:52.450

因为调用`this(p.x, p.y)`不是原子的。换句话说，想象以下线程交错：

*   线程1：`read p.x`
*   线程2：`p.set(otherX, otherY);`
*   Thread1：`read p.y`并调用`this(p.x, p.y);`

x 和 y 现在来自两个不同的点，并且可能不一致。

另一方面，`p.get()`以原子方式读取 x 和 y（它是`synchronized`），因此保证数组中的 x 和 y 来自同一点。

# javascript - 从 URL 读取 XML 文件并将数据保存在 Web 的数据库中 - 如何自动化该过程？

> ID：13970005
> 
> 赞同：0
> 
> 时间：2012-12-20T10:24:36.313
> 
> 标签：javascript, xml, database, automation, save

我必须从 URL 读取 XML 文件；然后使用 JS 从节点获取我需要的信息。由于只有我可以每 x 分钟访问一次 URL（而不是我的应用程序的每个用户），我必须将该信息保存在数据库中，也许在我自己的网站中。稍后我的用户将访问我的网站以获取信息。

如何使整个过程自动化？每小时至少应触发 2 次函数、程序或类：

1.  获取 XML 文件
2.  每个 JS 提取必要的数据
3.  将数据临时保存在数组或文本文件中（必要的步骤？？）
4.  将其保存到数据库中

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:10:40.983

如果您使用的是 Jquery，则可以使用 .get() 方法从 URL 获取数据，然后使用 .parseXML 方法解析 xml。

查看这两个链接以获取示例：

.get() 方法： [http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

.parseXML() 方法： [http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# unix - 从 ID 匹配的另一个文件将列添加到文件

> ID：13970018
> 
> 赞同：3
> 
> 时间：2012-12-20T10:25:15.237
> 
> 标签：unix, awk, cygwin, paste

我有一个这样的文件：-

```
123,Bob
456,Joe
789,Jane 
```

还有这样的文件

```
456,abc,Red
789,def,Yellow 
```

我想将文件 2 中的第 3 列添加到文件 1，但仅在第一列匹配的地方添加，结果如下：-

```
123,Bob
456,Joe,Red
789,Jane,Yellow 
```

我在 Cygwin 命令行中有任何可用的工具来执行此操作，例如 awk、paste 等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:29:23.870

如果你有粘贴，你也应该有为这种事情设计的连接。假设输入文件按键排序，您可以说：

```
join -t, in1 in2 
```

输出：

```
456,Joe,Red
789,Jane,Yellow 
```

### 编辑以适应新要求

您可以使用`-o`开关：

```
join -t, -o 1.1,1.2,2.3 in1 in2 
```

您似乎希望保留第一个文件中未配对的行，在这种情况下使用`-a1`：

```
join -t, -o 1.1,1.2,2.3 -a1 in1 in2 
```

输出：

```
123,Bob,
456,Joe,Red
789,Jane,Yellow 
```

这会在未配对行的末尾留下一个多余的逗号，但可以用 . 删除`| sed 's/,$//'`。

# sublimetext - SublimeText2：在复古模式下禁用光标键

> ID：13970019
> 
> 赞同：2
> 
> 时间：2012-12-20T10:25:21.030
> 
> 标签：sublimetext

我想强迫自己在 Sublime 文本中练习 VIM 时使用 hjkl 进行导航。即我想映射光标键在插入模式下什么都不做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:17:35.843

在“Packages/User/Default.sublime-keymap”中添加以下行。

```
[
    {"keys": ["up"], "command": "pass",
        "context": [{ "key": "setting.command_mode", "operand": false }]},
    {"keys": ["down"], "command": "pass",
        "context": [{ "key": "setting.command_mode", "operand": false }]},
    {"keys": ["left"], "command": "pass",
        "context": [{ "key": "setting.command_mode", "operand": false }]},
    {"keys": ["right"], "command": "pass",
        "context": [{ "key": "setting.command_mode", "operand": false }]}
] 
```

（如果您已经拥有该文件，请在文件中的最后一个 ] 之前插入 {"keys" ... }]} 行。）

# parallel-processing - 可以在多台计算机上使用 OpenCL 吗？

> ID：13970020
> 
> 赞同：8
> 
> 时间：2012-12-20T10:25:33.493
> 
> 标签：parallel-processing, cluster-computing, opencl, distributed-computing, grid-computing

据我所知，答案是否定的。OpenCL 专为多核系统而设计。

但是，有没有办法在多台计算机上使用 OpenCL（每台计算机都是一个多核系统）？如果没有，是否需要任何其他工具、框架……？

我读了一些关于分布式计算、集群计算、网格计算的文章……但我找不到满意的答案

任何想法将不胜感激

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T10:33:04.350

为此目的有两个框架：[VirtualCL](http://www.mosix.org/txt_vcl.html)和[CLara](https://www.alpha-tierchen.de/~bkoenig/clara/)。这两个包都让您可以透明地使用远程机器作为本地设备。不幸的是，VirtualCL 只能作为没有源代码的预编译二进制文件提供，并且 CLara 不再积极开发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T23:17:13.627

SnuCL 使用 MPI 和 OpenCL 通过 OpenCL API 透明地使用集群。它还添加了一些 OpenCL 扩展来有效地处理内存对象。

它是开源的。见[http://aces.snu.ac.kr/Center_for_Manycore_Programming/SnuCL.html](http://aces.snu.ac.kr/Center_for_Manycore_Programming/SnuCL.html) 和[http://tbex.twbbs.org/~tbex/pad/SunCL.pdf](http://tbex.twbbs.org/~tbex/pad/SunCL.pdf)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-05T23:24:41.733

还有一个上面没有提到的解决方案：[dOpenCL](http://www.uni-muenster.de/PVS/en/research/dopencl/)。

“dOpenCL（分布式 OpenCL）是一种使用加速器对分布式异构系统进行编程的新颖、统一的方法。它将分布式系统的节点透明地集成到单个 OpenCL 平台中。因此，dOpenCL 允许用户在异构中运行未经修改的现有 OpenCL 应用程序分布式环境。此外，它扩展了 OpenCL 编程模型以处理分布式系统的各个节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T09:19:05.310

我已经使用 VirtualCL 形成了一个 GPU 集群，其中 3 个 AMD GPU 作为计算节点，我的 ubuntu intel 桌面作为代理节点运行。我能够启动代理和计算节点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-14T18:59:02.153

除了其他海报已经提到的各种选项之外，这里还有两个您可能感兴趣的开源项目：

*   [ocland](http://ocland.sourceforge.net/)（处于测试阶段）：提供服务器应用程序和 ICD 实现，客户端可以使用它们以透明的方式利用支持 OpenCL 的本地和远程设备。许可证是 GPLv3。

*   [Brown Deer Technnology 的COPRTHR SDK](http://www.browndeertechnology.com/coprthr.htm)（当前版本 1.6）：此 SDK 为 x86_64、ARM、Epiphany 和 Intel MIC 提供开源 (GPLv3) OpenCL 实施，包括“计算层远程过程调用”实施。这包括一个支持 rpc ( ) 的客户端 OpenCL 实现`libclrpc`和一个服务器应用程序 ( `clrpcd`)。该网站没有提及太多，但[文档](http://www.browndeertechnology.com/docs/coprthr_primer-1.6.0.pdf)包含有关此 CLRPC 实现的部分。

# android - 安卓：编辑图像

> ID：13970021
> 
> 赞同：2
> 
> 时间：2012-12-20T10:25:36.020
> 
> 标签：android, image-processing

在我的应用程序中，我想编辑亮度、对比度等图像。我有一些教程，我正在尝试这个来改变对比度

```
public static Bitmap createContrast(Bitmap src, double value) {
        // image size
        int width = src.getWidth();
        int height = src.getHeight();
        // create output bitmap
        Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
        // color information
        int A, R, G, B;
        int pixel;
        // get contrast value
        double contrast = Math.pow((100 + value) / 100, 2);

        // scan through all pixels
        for(int x = 0; x < width; ++x) {
            for(int y = 0; y < height; ++y) {
                // get pixel color
                pixel = src.getPixel(x, y);
                A = Color.alpha(pixel);
                // apply filter contrast for every channel R, G, B
                R = Color.red(pixel);
                R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if(R < 0) { R = 0; }
                else if(R > 255) { R = 255; }

                G = Color.red(pixel);
                G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if(G < 0) { G = 0; }
                else if(G > 255) { G = 255; }

                B = Color.red(pixel);
                B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if(B < 0) { B = 0; }
                else if(B > 255) { B = 255; }

                // set new pixel color to output bitmap
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));

            }
        }

        // return final image
        return bmOut; 
```

称它为：

```
ImageView image = (ImageView)(findViewById(R.id.image));
        //image.setImageBitmap(createContrast(bitmap)); 
```

但我没有看到图像发生任何问题。你能帮我在哪里出错吗？

我从 APi 14 看到了 effectFactory。是否有类似的/任何教程可用于旧版本的图像处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:59:20.117

这种方法存在三个基本问题。前两个是编码问题。首先，您总是调用，并且在您的代码中`Color.red`没有`Color.green`和。`Color.blue`第二个问题是这种计算过于重复。您假设颜色在 [0, 255] 范围内，因此创建一个包含 256 个位置的数组并为 [0, 255] 中的每个位置计算对比度要快得多`i`。

第三个问题更成问题。你为什么考虑这个算法来提高对比度？结果对 RGB 毫无意义，您可能会在不同的颜色系统中得到更好的结果。以下是您应该期望的结果，您的参数`value`为 0、10、20 和 30：

![在此处输入图像描述](../Images/d28eb022cd5e7b3d19c6986c792db351.png) ![在此处输入图像描述](../Images/c9db0766206b87df93d453ade0e2b5dd.png) ![在此处输入图像描述](../Images/1dac8e637a2fe22796372027fed82701.png) ![在此处输入图像描述](../Images/fd7f4c08777dc4f56bc79189693ad127.png)

这是执行该操作的示例 Python 代码：

```
import sys
from PIL import Image

img = Image.open(sys.argv[1])
width, height = img.size

cvalue = float(sys.argv[2]) # Your parameter "value".
contrast = ((100 + cvalue) / 100) ** 2

def apply_contrast(c):
    c = (((c / 255.) - 0.5) * contrast + 0.5) * 255.0
    return min(255, max(0, int(c)))

# Build the lookup table.
ltu = []
for i in range(256):
    ltu.append(apply_contrast(i))

# The following "point" method applies a function to each
# value in the image. It considers the image as a flat sequence
# of values.
img = img.point(lambda x: ltu[x])

img.save(sys.argv[3]) 
```

# javascript - 包含更多模型的 Knockout 映射模型

> ID：13970024
> 
> 赞同：0
> 
> 时间：2012-12-20T10:25:51.013
> 
> 标签：javascript, knockout.js

我有来自服务器的下一个数据，我想通过调用 ko.mapping.fromJS(data, AcquisitionDetailsModel); 将此数据映射到我的模型。

通过查看 AcquisitionDetailsModel，在调用指定的方法后，我看到模型包含`acquisitions: Object[0]`. 为什么？我期待在我的模型中找到一系列收购。我做错了什么？

```
data: Object
   acquisitions: Array[2]
   0: Object
      acquisition: Object
         date: "2012-06-20"
         __proto__: Object
      provider: Object
         id: "1"
         name: "Some name"
         __proto__: Object
     truck: Object
         mark: "DAF"
         model: "95FX"
         __proto__: Object
     __proto__: Object
  1: Object
  length: 2 
```

模型看起来像这样：

```
function TruckModel() {
    this.mark = ko.observable("");
    this.model = ko.observable("");
}

function AcquisitionModel() {
    this.date = ko.observable("acquisition_date");
}

function ProviderModel() {
    this.id = null;
    this.name = ko.observable("name");
}

var AcquisitionDetailsModel = {
    acquisitions: ko.observableArray([{
        acquisition: new AcquisitionModel(),
        provider: new ProviderModel(),
        truck: new TruckModel()
    }])
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:34:08.497

实际上映射是正确的，但是是我以错误的方式进行调试:)

`ko.mapping.fromJS(data, AcquisitionDetailsModel);`如果我打电话后，`AcquisitionDetailsModel.acquisitions()`我可以看到我的数据。

此外，通过调用，`AcquisitionDetailsModel.acquisitions()[0].truck.model()`我仍然可以看到正确的数据。

愚蠢的我 ：）

# google-apps-script - "\n" 不适用于 MailApp.sendEmail，也不适用于 GmailApp.sendEmail

> ID：13970025
> 
> 赞同：2
> 
> 时间：2012-12-20T10:25:56.037
> 
> 标签：google-apps-script

没有打破我的木鞋（这是荷兰的一种说法），这意味着，现在我发疯了：

我有一个谷歌脚本，其中“\n”不适用于 MailApp.sendEmail。在另一个脚本中，我也将 \n 与 MailApp.sendEmail 一起使用，并且它正在工作！我已经尝试过 GmailApp.sendEmail，同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T23:34:52.570

可能是因为您使用`htmlBody`而不是纯文本正文参数。在 HTML 中，换行符被设计忽略。

# ms-access - Access 中报告字段中的缩写值

> ID：13970026
> 
> 赞同：1
> 
> 时间：2012-12-20T10:25:57.410
> 
> 标签：ms-access

我有一个 2010 Access 数据库，用于跟踪慈善团体的志愿者。VOLUNTEER 表中的一列称为 AVAILABILITY，可能的值为“季节性”和“全年”。

我创建了一个列出所有志愿者信息的报告，其中包括此列。我唯一的问题是我想让报告缩写这些值。理想情况下，“S”代表季节性，“YR”代表全年，以节省报告空间。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:16:40.423

您可以使用 IIF 函数，但这仅允许两个可用性选项。为了将来允许更多，我将创建第二个表来查找将在您的报告中显示的缩写词。

将其复制并粘贴到 Access 中的 SQL 编辑器中以创建这样的表：

```
SELECT "Seasonal" AS Availability, "S" AS Abbreviation INTO tblAvailabilityOptions; 
```

然后，您将创建一个查询，您的报告将基于该查询将您的主表与您刚刚创建的新表结合起来，并加入“可用性”列：

```
SELECT tblMain.ID, tblMain.Volunteer, tblMain.Availability, tblAvailabilityOptions.Abbreviation
FROM tblMain INNER JOIN tblAvailabilityOptions ON tblMain.Availability = tblAvailabilityOptions.Availability; 
```

如果您知道如何在主表上使用组合框查找功能，这将更加容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:58:09.933

是的当然。您可以在查询中执行此操作并将报告基于该查询或报告本身：

```
 SELECT IIF([AVAILABILITY] = "Seasonal","S","Yr") As Avail 
 FROM MyTable 
```

如果您希望在报告中设置控件，请确保将其重命名为可用性以外的名称，例如 txtAvailability：

```
 = IIF([AVAILABILITY] = "Seasonal","S","Yr") 
```

# python - 如何查找用户是否输入了主机名或 IP 地址？

> ID：13970028
> 
> 赞同：4
> 
> 时间：2012-12-20T10:26:04.790
> 
> 标签：python

用户将输入主机名或 IP 地址。如果用户输入 IP 地址，我想保持原样，但如果用户输入主机名，我想使用以下方法将其转换为 IP 地址：

```
def convert(hostname):
    command = subprocess.Popen(['host', hostname],
                           stdout=subprocess.PIPE).communicate()[0]

    progress1 = re.findall(r'\d+.', command)
    progress1 = ''.join(progress1)
    return progress1 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:39:34.633

要获取 ip，无论输入是 ip 还是主机名：

```
ip4 = socket.gethostbyname(ip4_or_hostname) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:29:47.560

您可以使用正则表达式来匹配您的输入并测试它是否是 IP 地址

```
test = re.compile('\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b')
result = test.match(hostname)
if not result:
    # no match -> must be an hostname #
    convert(hostname) 
```

该正则表达式允许无效的 IP 地址（如 999.999.999.999）所以你可能想稍微调整一下，这只是一个简单的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:31:33.247

stackoverflow 上已经有很多关于验证 IP 地址的问题。

1.  [python中的IP地址验证](https://stackoverflow.com/questions/10086572/ip-address-validation-in-python-using-regex)
2.  [在 python 中验证 IP 地址](https://stackoverflow.com/questions/319279/how-to-validate-ip-address-in-python)

当您可以在标准 python 库中执行此操作时，我想问您为什么要与子进程通信。

我建议使用一些 python 内置功能将主机名解析为 IP 地址。

您可以通过导入和使用[python 套接字库来做到这一点](http://docs.python.org/2/library/socket.html#socket.gethostbyname)

例如使用链接 1 中的代码：

```
import socket
import re
regex = re.compile(r"^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$")
result = regex.match(address)
if not result:
    address = socket.gethostbyname(address) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-20T19:27:23.430

在我的情况下，主机名只能包含`-`作为分隔符。因此，您可以取消注释并根据您的要求使用它。

```
import re

regex = "^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])$"
# string_check= re.compile('[@_!#$%^&*()<>?/\|}{~:.]')
string_check= re.compile('[-]')

ip_host_detail = {}

def is_valid_hostname_ip(IpHost):
    # pass regular expression and ip string into search() method

    if (re.search(regex, IpHost)):
        print("Valid Ip address")
        ip_host_detail['is_ip'] = 'True'
        ip_host_detail['is_hostname'] = 'False'
        return True
    elif(string_check.search(IpHost)):
        print("Contain hostname")
        ip_host_detail['is_hostname'] = 'True'
        ip_host_detail['is_ip'] = 'False'
            return True
    else:
        print("Invalid Ip address or hostname:- " + str(IpHost))
        ip_host_detail['is_hostname'] = 'False'
        ip_host_detail['is_ip'] = 'False'
        return False

IpHost = sys.argv[1]
# IpHost = 'RACDC1-VM123'

is_valid_hostname_ip(IpHost)
print(ip_host_detail) 
```

# android - 针对 iPad、iPhone 和 Android 的重定向

> ID：13970030
> 
> 赞同：0
> 
> 时间：2012-12-20T10:26:07.867
> 
> 标签：android, iphone, html, ipad, redirect

我的网页无法在移动设备和 Apple 设备上正确呈现，我为它们制作了一个替代版本。我怎样才能（最好仅使用 html）使这些设备在访问主要设备时加载备用版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:34:36.863

如果您有权访问网站的逻辑部分（php/javascript），则可以执行检查以查看浏览器在其请求中发送的用户代理字符串是否包含“iPhone”、“iPad”或“Android”。接下来，您可以使用“位置”响应标头重定向到此其他页面。例如：

JavaScript：

```
if( navigator.userAgent.match(/iPhone/i) ) { 
    window.location = "http://address.to.your.mobile.site/";
} 
```

PHP：

```
if (strpos($_SERVER['HTTP_USER_AGENT'], 'iPhone') !== false) {
    header('Location: http://address.to.your.mobile.site/');
} 
```

我更喜欢 PHP 解决方案：浏览器向网络服务器发送请求。网络服务器将看到用户代理是移动设备并重定向到正确的页面。JavaScript 解决方案将请求网页、接收网页、加载 JavaScript 并向网络服务器发送新请求。（我相信它会发生这样的事情，如果我错了，请纠正我）

另外，正如您在评论中提到的，并非每个用户的浏览器都启用了 JavaScript。

# php - 如何打印用户的 IP 地址（如果 $owner）

> ID：13970031
> 
> 赞同：-3
> 
> 时间：2012-12-20T10:26:11.450
> 
> 标签：php

我需要打印用户的 IP 地址。这是当我们单击用户名时出现的版主面板的代码：

```
if($owner == 1 || in_array($userid,$moderatorUserIDs)) {
    $options="<input type=button value='".$chatrooms_language[40]."' onClick=javascript:".$caller."kickUser($uid,0);$close class='invitebutton'>
    <input type=button value='".$chatrooms_language[41]."' onClick=javascript:".$caller."banUser($uid,0);$close class='invitebutton'>".$options;
} 
```

在踢/禁止按钮上方，我想说 IP：-ip 地址-

再次感谢您的帮助，你们太棒了。

抱歉没有说得更清楚。我不想将我的 IP 地址打印给自己。当我点击他们的用户名以显示版主面板时，我需要它来打印他们的 IP 地址给我。

感谢您迄今为止的建议。

我已在分配来宾用户名并输入数据库的同一位置将其输入到 guest.php：

```
if (empty($_SERVER['HTTP_CLIENT_IP'])){
            $ip=$_SERVER['HTTP_CLIENT_IP'];
//Is it a proxy address
                }elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
            $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
            }else{
        $ip=$_SERVER['REMOTE_ADDR'];
            }
    //The value of $ip at this point would look something like: "192.0.34.166"
            $ip = ip2long($ip);
    //The $ip would now look something like: 1073732954
            $sql = "INSERT INTO cometchat_guestip(ip) VALUES('$ip')";
    $dbQuery = mysql_query($sql,$dbLink); 
```

这个对吗？

然后在主持人面板上我会调用：

```
SELECT INET_NTOA(ip) FROM 'cometchat_guestip' WHERE 1
echo $ip 
```

是的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:28:28.630

您可以通过以下方式获取客户端 IP 地址：

```
$_SERVER['REMOTE_ADDR'] 
```

# neo4j - 返回节点列表的所有关系

> ID：13970033
> 
> 赞同：1
> 
> 时间：2012-12-20T10:26:19.447
> 
> 标签：neo4j, cypher

这是一个相当笼统的问题，但为了更容易理解，我会给出一些背景信息。

在 neo4j 中，我有一系列相互关联的单词（节点）。我想指定一个节点列表，并且 Cypher 查询返回这些节点之间任何关系的列表。

列表中指定的节点都保证与列表中指定的另一个节点具有至少一种关系。

我创建了一个查询来执行此操作，在某些情况下它可以正常工作 - [http://console.neo4j.org/?id=s30cbm](http://console.neo4j.org/?id=s30cbm)

不幸的是，当我将“bark”和“dog”添加到列表中时，我收到“遇到意外的遍历状态”错误消息。我认为这是因为数据库游标已到达水果节点，然后它与树皮之间没有关系，即使树与树皮之间存在关系。[http://console.neo4j.org/?id=258d6g](http://console.neo4j.org/?id=258d6g)

我显然做的查询有点错误，任何关于如何纠正这个问题的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:06:47.093

这适用于最新的控制台（您的第二个链接），顺便说一句，所以看起来他们修复了它。看起来它应该在 1.9-M04+ 中工作。

# excel - 使用 Excel 级联下拉菜单时如何清除单元格

> ID：13970035
> 
> 赞同：-1
> 
> 时间：2012-12-20T10:26:22.257
> 
> 标签：excel

我有一个使用 excel 间接函数填充的级联下拉列表，这一切都很好。

但是，当第一个下拉列表的值更改时，我想清除第二个下拉列表的值，因为这现在将无效。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:49:51.453

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim oneCell As Range
    On Error GoTo ErrorOut
    For Each oneCell In ActiveSheet.Cells.SpecialCells(xlCellTypeAllValidation)
        If Not oneCell.Validation.Value Then oneCell.ClearContents
    Next oneCell
ErrorOut:
Application.EnableEvents = True
On Error GoTo 0
End Sub 
```

供您参考 > [http://www.contextures.com/xlDataVal02.html](http://www.contextures.com/xlDataVal02.html)

# python - Python 获取网页数据

> ID：13970053
> 
> 赞同：1
> 
> 时间：2012-12-20T10:27:23.743
> 
> 标签：python

我正在尝试创建一个从 tv catchup 网站获取 html 的程序，然后使用 split 函数将所有 html 数据拆分为频道名称和当前在表中的程序，例如：BBC 1 - '程序名称'。如果有人能提供帮助，我只需要关于我在第一次拆分功能后所做的事情的帮助，我将不胜感激。

```
import urllib2
import string

proxy = urllib2.ProxyHandler({"http" : "http://c99.cache.e2bn.org:8084"})

opener = urllib2.build_opener(proxy)

urllib2.install_opener(opener)

tvCatchup = urllib2.urlopen('http://www.TVcatchup.com')

html = tvCatchup.read()

firstSplit = html.split('<a class="enabled" href="/watch.html?c=')[1:]
for i in firstSplit:
    print i

secondSplit = html.split ('1" title="BBC One"></a></li><li class="v-type" style="color:#6d6d6d;">')[1:]

for i in secondSplit:
print i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:30:34.027

我不会拆分输出，而是使用某种 HTML 解析器。[美丽的汤](http://www.crummy.com/software/BeautifulSoup/)是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:35:35.060

听起来您想要一个屏幕抓取工具，而不是子字符串 HTML。一个好的屏幕抓取工具是[Scrapy](http://scrapy.org/)，它使用 XPATH 来检索数据。

Scrapy[概览](http://doc.scrapy.org/en/0.16/intro/overview.html)页面很有用。它提供了如何从网页中提取数据的完整示例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T10:30:54.573

请不要使用 urllib2。改用请求 [https://github.com/kennethreitz/requests](https://github.com/kennethreitz/requests)

对于 html 解析使用 BeautifulSoup [http://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

**注意：似乎此代理已关闭，删除代理设置，它可以工作**

```
import requests
from BeautifulSoup import BeautifulSoup

proxyDict = {"http":"http://c99.cache.e2bn.org:8084"}
r = requests.get("http://www.TVcatchup.com", proxies=proxyDict)

soup = BeautifulSoup(r.text)
tvs = list()

uls = soup.findAll("ul", { "class":"channels2"}
for ul in uls:
   div = ul.find("div")
   if div:
       showid = div.get("showid")
       link = ul.find("a")
       href = link.get("href")
       title = link.get("title")
       tvs.append({"showid":showid, "href":href, "title":title})
print tvs 
```

你会得到这个

```
[{'showid': u'450263', 'href': u'/watch.html?c=1', 'title': u'BBC One'}, 
{'showid': u'450353', 'href': u'/watch.html?c=2', 'title': u'BBC Two'}, 
{'showid': u'450398', 'href': u'/watch.html?c=3', 'title': u'ITV1'}, 
{'showid': u'450521', 'href': u'/watch.html?c=4', 'title': u'Channel 4'},... 
```

# email - 打开对话框的电子邮件中的链接

> ID：13970055
> 
> 赞同：0
> 
> 时间：2012-12-20T10:27:46.163
> 
> 标签：email, sharepoint, popup, outlook, workflow

好的，我有一个客户有一个特殊的要求。他希望收到一封（由工作流生成的）带有超链接的电子邮件，如果您单击该超链接，将打开一个弹出对话框。注意：电子邮件中的链接应该打开一个弹出窗口，而不是浏览器中的网页。

我立即认为这是不可能的，但环顾四周后，我发现您可以创建一个带有标签的工作流变量并将它们插入到电子邮件正文中。

例如：`<a href="some_page.asp">here</a>`

我从中得出的结论是，电子邮件由电子邮件客户端呈现的 html 代码组成。现在我想知道是否有一种方法可以使用标签而不导致弹出模式对话框？

我想问题是电子邮件客户端（Microsoft Outlook）支持什么功能。我不知道如何附加一些 JavaScript 或 Outlook 将使用的东西。Outlook 中是否有一些嵌入式功能可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:30:52.677

这很容易。使用这个示例代码并了解它是如何与普通的“mailto”函数一起工作的：

```
<!DOCTYPE html>
<html>
<body>

<p>
This is an email link:
<a href="mailto:someone@example.com?Subject=Hello%20again">
Send Mail</a>
</p>

<p>

</p>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:55:54.703

利用

window.open('example.html',400,600) ​;

在您的 HTML 代码中..

另请参阅此链接以获取您问题的答案

> [http://www.coderanch.com/t/121512/HTML-CSS-JavaScript/Opening-popup-JS-outlook-mails](http://www.coderanch.com/t/121512/HTML-CSS-JavaScript/Opening-popup-JS-outlook-mails)

# c# - 深度视图坐标的用户输入

> ID：13970063
> 
> 赞同：0
> 
> 时间：2012-12-20T10:28:26.197
> 
> 标签：c#, coordinates, user-input, kinect, point

我正在尝试手动输入 Kinect 深度相机视图上某个点的坐标并获取该点的深度值。我无法使其实际提示主窗口上的坐标值，并在相机视图（在主窗口上）上选择该坐标并使其成为用户输入。我希望能够输入 X 坐标和 Y 坐标。

这是我到目前为止所拥有的：

```
 Point p1;
        Console.WriteLine("Please enter a number.");
        string inputX = Console.ReadLine();
        double inputAsNumberX;
        if (double.TryParse(inputX, out inputAsNumberX) == true)
        {
            Console.WriteLine("You entered a valid number: {0}", inputAsNumberX);
        }
        else
        {
            Console.WriteLine("You entered an invalid number.");
        }

        p1.X = inputAsNumberX;
        Console.WriteLine("Please enter a number.");
        string inputY = Console.ReadLine();
        double inputAsNumberY;
        if (double.TryParse(inputY, out inputAsNumberY) == true)
        {
            Console.WriteLine("You entered a valid number: {0}", inputAsNumberY);
        }
        else
        {
            Console.WriteLine("You entered an invalid number.");

        }
        p1.Y = inputAsNumberY; 
```

我使用了未分配的局部变量“p1”。- 问题解决了

如何让它在主窗口上提示用户输入并将其链接到深度图像（主窗口上的深度相机视图）坐标？

# eclipse - 如何运行我编写的 Eclipse 插件，该插件使用 SWTBot 通过其 GUI 自动化 Eclipse

> ID：13970066
> 
> 赞同：2
> 
> 时间：2012-12-20T10:28:37.820
> 
> 标签：eclipse, eclipse-plugin, swtbot

我编写了一个 Eclipse 插件，`SWTBot`用于通过其 GUI 自动化 Eclipse。实际上，我正在使用 Eclipse 应用程序运行配置从 Eclipse 运行这个插件来测试它。这将打开一个新的 Eclipse 实例。`toolbarbutton`之后，我可以使用 using`ui.actionSets`扩展启动插件。

我想从命令提示符启动一个 Eclipse，并希望这个插件自动启动。就我而言，Eclipse 当然应该使用 GUI 启动。

你知道这个问题的任何有效解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:23:37.363

您可以使用[`org.eclipse.ui.startup`](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_startup.html)扩展点。您需要提供一个[`IStartup`](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2FIStartup.html)在工作台启动时调用的实现类。

注意：这不是一个完整的故障安全方法，因为用户可以在**Workbench > Startup**首选项页面中禁用此扩展点。

# mysql - 使用php在数组中显示字符串

> ID：13970068
> 
> 赞同：0
> 
> 时间：2012-12-20T10:28:39.380
> 
> 标签：mysql, arrays, charts

我有一个问题。我正在尝试用 PHP 显示图表，我的图表代码是这样的。

数据库代码

```
 $rowval=$sqcat1->qcategory;
    $per=($sqcat1->point_value*100)/($sqcat1->r_count*5); 
```

和图表代码

```
 $data3['$rowval'] = $per;
        $mc3 = new maxChart($data3);
        $mc3->displayChart('Chart',1,500,600,true); 
```

我实际上想像这样传递值

```
$data3['Windows']=80;
$data3['linux']=10;
$data3['Mac']=10; 
```

等通过数据库提取数据。

我已经尝试过这样做

```
$data[$sqcat1->qcategory]= $per;

        $mc3 = new maxChart($data);
        $mc3->displayChart('Chart',1,500,600,true); 
```

它仅显示百分比图表，而不显示类别和百分比。

我想显示类别和百分比。

有人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:44:37.503

你能试试这个

```
$rowval=$sqcat1->qcategory;
$data["$rowval"]= $per;
$mc3 = new maxChart($data);
$mc3->displayChart('Chart',1,500,600,true); 
```

请注意双引号 $data["$rowval"]

# mysql - MySQL 返回“由于锁定错误（错误号：147）无法创建表”

> ID：13970069
> 
> 赞同：1
> 
> 时间：2012-12-20T10:28:45.170
> 
> 标签：mysql, locking, innodb

当我尝试通过导入 sql 为项目创建各种表时，MySQL 返回此错误：

```
#1005 - Can't create table 'mybase.mytable' (errno: 147) 
```

在 Google 中查找 147，我发现：

> MySQL错误代码147：锁表已满；使用更大的锁表重新启动程序

但是，我不知道该怎么做。我应该修改什么，修改什么？（有很多锁变量）。

这是我所有“锁定”变量的结果：

```
innodb_autoinc_lock_mode          1
innodb_lock_wait_timeout          50
innodb_locks_unsafe_for_binlog    OFF
innodb_table_locks                ON
key_cache_block_size              1024
locked_in_memory                  OFF
max_write_lock_count              18446744073709551615
query_alloc_block_size            8192
query_cache_wlock_invalidate      OFF
range_alloc_block_size            4096
skip_external_locking             ON
table_lock_wait_timeout           50
transaction_alloc_block_size      8192 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:29:48.733

我终于找到了如何做到这一点，我`innodb_table_locks`在创建表格之前将其关闭，然后重新启用它。

```
SET innodb_table_locks = 0;

// Create tables

SET innodb_table_locks = 1; 
```

# c++ - 将对象移动到不同的线程

> ID：13970070
> 
> 赞同：3
> 
> 时间：2012-12-20T10:29:08.473
> 
> 标签：c++, multithreading, qt

我的应用程序使用自定义序列化机制。

**阶段 1** ) 该机制在单独的线程上加载数据集群，在那里创建所有适当的对象，依此类推。

**阶段 2** ) 一旦它们全部被完全反序列化，它将它们交给主应用程序线程并在那里完成序列化，例如在对象之间建立连接等。

这个机制是我框架的一个新的补充——在此之前我在反序列化主线程上的所有东西。

我遇到的问题是在反序列化过程中创建的一些对象是 Qt 对象（基本上是一堆小部件）。它们都记录了创建它们的线程的 ID。当“阶段 2”的时间到来时，这些对象开始抱怨它们都不属于这个线程，因此不能发送任何信号等。

所以我在 QObject 上找到了一个方法，叫做“moveToThread”。不过，这个小虫子并不是很有帮助，因为它会执行检查并防止将对象从不同的线程移动到当前线程（为什么 scuh 是一个约束，我不知道）。

有谁知道我该怎么做？我可以保证这些对象只会在单独的线程上创建，并且从那时起，它们都将在主线程上运行和运行。

谢谢， 帕克萨斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T15:18:34.233

当涉及到多线程时，必须小心处理 QObject 的实例或 QObject 子类的任何实例。查看[此页面](http://qt-project.org/doc/qt-4.8/threads-qobject.html)以了解该主题的介绍。

假设您的应用程序由两个线程**A**和**B**组成。假设**线程 A**创建了一个对象 QObject**实例**。

**据说**实例****存在于线程 A 中**。这意味着： - 它可以直接向线程 A 中的所有其他对象发送和接收信号。 - 从线程 A 对 myInstance 方法的所有调用都是线程安全的**

 **另一方面，从另一个**线程 B**访问**实例**： - 不是线程安全的（您必须注意竞争条件）。**- 此外，由实例**发出并连接到线程 B 中对象插槽的信号不是直接的：通过复制所有方法参数并将所有内容放在要由线程 B 事件队列执行的事件中，插槽执行被推迟到稍后的时刻。

 ****鉴于此，您可以利用的解决方案如下。

SubClass 是 QObject 的子类。

```
class SubClass : public QObject{
Q_OBJECT
[...]
} 
```

线程 A 将运行以下方法来反序列化并使用 SubClass 实例填充内存

```
void methodA(){  /this method is executed by thread A

 QThread* threadB; //a reference to the QThread related to thread B
 [...]
 MyQObject* instance = someFactoryMethod();

 //we push the ownership of instance from thrad A to thread B
 instance->moveToThread( threadB ); 

 //do something else

} 
```

**但是请注意，如果线程 A 需要对instance**执行其他操作，这可能还不够。特别是线程 A 可能会触发 MyQObject 中定义的一些信号。这是不允许的，因为现在线程 A 不再是实例的所有者。

在这种情况下，您需要推迟此类操作并要求线程 B 执行它。这是通过使用**QMetaObject::invokeLater**方法实现的。

InvokeLater 允许您调用特定的槽，要求线程 B 执行它。

假设 ClassInB 是一个类，其实例在线程 B 中使用

```
class ClassInB : public QObject{
 Q_OBJECT

public:
    [...]
slots:
  void complexOperation(MyQObject* o){
    [...]
    emitSomeSignal();
  }
signals:

  void someSignal();
} 
```

在将**实例**移动到线程 B 之后，我们需要对存在于线程 B 中的 ClassInB 的实例执行**complexOperation()**，反过来，它也会发出 someSignal()。

```
void methodA(){  //this method is executed by thread A
  QThread* threadB; //a reference to the QThread related to thread B
  ClassInB* instanceOnB;   //a reference to a ClassInB instance living in thread B
  [...]

   MyQObject* instance = someFactoryMethod();

   //we push the ownership of instance from thread A to thread B
   instance->moveToThread( threadB ); 

   //we ask thread B to perform some operation related to instance
   QMetaObject::invokeLater(instanceOnB, "complexOperation", Q_ARG(MyQObject*, instance) );

} 
```

为了能够使用 MyQObject* 作为**invokeLater**的参数，我们需要将它注册到 Meta 框架。您将需要：

*   添加`Q_DECLARE_METATYPE(MyQObject*)`定义 MyQObject 的 .cpp
*   在使用机制之前调用一次（例如在主中），`qRegisterMetaType<MyQObject*>();`******

# jquery - 使用 div 作为与其他内容重叠的下拉菜单？

> ID：13970075
> 
> 赞同：1
> 
> 时间：2012-12-20T10:29:37.337
> 
> 标签：jquery, css, html, drop-down-menu, hidden

我有什么办法可以像[这样](http://i49.tinypic.com/16bk861.png "这")使用 div 作为下拉菜单位置吗？我已经尝试过绝对位置，但它不适用于其他屏幕尺寸。我想要的是它适用于所有屏幕分辨率。我尝试使用表格（隐藏 td 并在悬停时显示它）但菜单只是将内容推到它下面。我迫切需要解决这个问题，我已经为此工作了数周，但仍然没有接近我想要的。先感谢您。

到目前为止我尝试了什么：jQuery：

```
$(document).ready(function(){
   $("#hover-here").hover(function(){
     $("#boxed-menu-div").toggle();
  });
}); 
```

CSS：

```
#boxed-menu-div{
  display: none;
  position: absolute;
  top: 100px;
  right: 246px;
 } 
```

这仅适用于我的屏幕分辨率。我使用了相对定位，但它只推送下面的内容。除了 absolute 可以做什么之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:32:38.747

好的...首先要做的事情。表格是绝对不行的，你也不需要 jQuery。

您有四个组合在一起的 html 元素，旨在完成此特定任务。

这些`<nav>`是`<ul>` `<li>`和`<a>`。现在我在这里做一个假设，既然你希望它适用于所有屏幕尺寸，那么你希望它具有响应性，我还假设因为你想要圆角、渐变、阴影等，那么你的目标就是现代浏览器，ie9+ 等。

记住这里将是我将用来创建菜单的 html。

```
<nav>
    <ul>
        <li>
            <a href="#">item 1</a>
            <ul>
                <li><a href="#">sub item 1</a><li>
                <li><a href="#">sub item 1</a><li>
                <li><a href="#">sub item 1</a><li>
            </ul>
        </li>
        <li>
            <a href="#">item 2</a>
            <ul>
                <li><a href="#">sub item 1</a><li>
                <li><a href="#">sub item 1</a><li>
                <li><a href="#">sub item 1</a><li>
            </ul>
        </li>
        <li>
            <a href="#">item 3</a>
            <ul>
                <li><a href="#">sub item 1</a><li>
                <li><a href="#">sub item 1</a><li>
                <li><a href="#">sub item 1</a><li>
            </ul>
        </li>
      </ul>
</nav> 
```

CSS会像这样。请注意，我只创建了您所追求的非常粗略的近似值。

```
body{
    /* Set the overall font*/
    font-family:arial, serif;
}

/* Contain floats: h5bp.com/q */
nav > ul:before, nav > ul:after {
    content: "";
    display: table;
}

nav > ul:after {
    clear: both;
}

nav > ul {
    *zoom: 1;
}

/* Level one */
nav > ul > li {
    float:left;
    position:relative;
    overflow:visible;
    width:30%;
    max-width:100px;
}
nav > ul > li > a{
    padding:.5em 1em;
}

/* Level 2*/
nav > ul > li > ul {
    background:#666;
    border-radius: 0 5px 5px 5px;
    position:absolute;
    z-index:1;
    padding:1em;
    width:200px; /*set to whatever you need*/
    display:none;
}

/* Second list on level 2*/
nav > ul > li:nth-child(2) > ul{
    margin-left:-50%;
    border-radius: 5px;
}

/* Last list on level 2*/
nav > ul > li:last-child > ul{
    right:0;
    border-radius: 5px 0 5px 5px;
}

/* Hover level 1*/
nav > ul > li:hover {
    background:#666;
    border-radius: 5px 5px 0 0;
    color:#fff;
}

nav > ul > li:hover > ul {
    display:block;
}

nav > ul > li:hover > a,
nav > ul > li > ul a{
    color:#fff;
}

nav a {
    text-decoration:none;
    display:block;
} 
```

我在[这里](http://jsfiddle.net/QJppp/)提供了一个工作示例供您使用。如您所见，这将在移动设备上运行。全屏链接[在这里](http://jsfiddle.net/QJppp/embedded/result/)调整大小以查看它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:24:33.997

如果没有看到您的代码，很难提供帮助。

我只能建议使用 css 菜单。

```
<ul id="main-nav">
    <li>
        <a href="#">Menu Item</a>
        <div class="sub-nav">
            Anything
        </div>
    </li>
    ...
</ul> 
```

CSS

```
#main-nav {height: 25px; list-style-type: none;}
#main-nav li {position: relative; float: left; height: 25px; line-height: 25px; margin: 0 15px 0 0;}

.sub-nav {display: none; position: absolute; width: 400px; top: 25px; left: 0; z-index: 999; background: #f2f2f2;}

#main-nav li:hover .sub-nav {display: block;} 
```

工作示例[http://jsfiddle.net/ELyQW/2/](http://jsfiddle.net/ELyQW/2/)

# spring-batch - Spring Batch 中的块读取 - 不仅是块写入

> ID：13970082
> 
> 赞同：7
> 
> 时间：2012-12-20T10:30:07.710
> 
> 标签：spring-batch, chunking

## 我的假设

*据我了解，Spring Batch 中的“面向块的处理”帮助我在单个事务中有效地处理多个项目。这包括有效使用来自外部系统的接口。由于外部通信包括开销，它也应该是有限的和面向块的。这就是为什么我们有提交级别的`ItemWriter`. 所以我不明白的是，为什么`ItemReader`仍然需要逐项阅读？为什么我也不能读取块？*

## 问题描述

在我的步骤中，读者必须调用网络服务。并且作者会将这些信息发送到另一个网络服务。这就是为什么我不想尽可能少地打电话。

的界面`ItemWriter`是面向块的 - 正如你肯定知道的那样：

```
public abstract void write(List<? extends T> paramList) throws Exception; 
```

但`ItemReader`不是：

```
public abstract T read() throws Exception; 
```

作为一种解决方法，我实现了一个`ChunkBufferingItemReader`，它读取项目列表，存储它们并在`read()`调用其方法时一个接一个地返回项目。

但是现在当涉及到异常处理和重新启动作业时，这种方法变得混乱。我觉得**我在这里工作，框架应该为我做的。**

## 问题

***所以我错过了什么吗？我刚刚忽略的 Spring Batch 中是否有任何现有功能？***

在[另一篇文章](https://stackoverflow.com/questions/11929641/making-a-item-reader-to-return-a-list-instead-single-object-spring-batch)中，建议将返回类型更改`ItemReader`为 a `List`。但是我`ItemProcessor`将不得不从单个输入发出多个输出。这是正确的方法吗？

我很乐意接受任何最佳实践。提前致谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T19:22:04.723

这是 read() 接口方法的实现草案。

```
public T read() throws Exception {
    while (this.items.isEmpty()) {
        final List<T> newItems = readChunk();
        if (newItems == null) {
            return null;
        }
        this.items.addAll(newItems);
    }
    return this.items.pop();
} 
```

请注意，这`items`是块中读取的项目的缓冲区，框架尚未请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:55:39.983

Spring Batch 使用“面向块”的处理方式。（不只是块读写，包括读、处理和写的全过程）

面向块的处理是指

1.  使用 ItemReader（单项）读取项目
2.  使用 ItemProcessor 对其进行处理，并汇总结果（结果列表一一更新）。
3.  一旦达到提交间隔，就会使用 ItemWriter 写出整个聚合结果（结果列表），然后提交事务。

这是来自 SpringBatch 文档的代码表示

```
List items = new Arraylist();
for(int i = 0; i < commitInterval; i++){
    Object item = itemReader.read()
    Object processedItem = itemProcessor.process(item);
    items.add(processedItem);
}
itemWriter.write(items); 
```

正如您所说，如果您需要您的读者返回多个项目，请将其设为**List**。如果你的处理器也返回一个**List**。最后，您的 Writer 将获得**List 的 List**。

这是新案例的代码表示

```
List<List<Object>> resultList = new Arraylist<List<Object>>();
for(int i = 0; i < commitInterval; i++){
    List<Object> items = itemReader.read()
    List<Object> processedItems = itemProcessor.process(items);
    resultList.add(processedItems);
}
itemWriter.write(resultList); 
```

# objective-c - “onDownloadProgressChanged：”没有被调用（MKNetworkKit）

> ID：13970090
> 
> 赞同：0
> 
> 时间：2012-12-20T10:30:21.047
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, mknetworkkit

我正在做一个项目，该项目需要从服务器下载用户列表——从读取 MySQL 数据库的 PHP 脚本创建的 JSON 数据——我想通知用户请求的进度，但`onDownloadProgressChanged:`永远不会被调用通过发送 GET 请求`operationWithPath:params:httpMethod:ssl:`，我不知道这是否是预期的行为。

```
MKNetworkOperation *op = [self operationWithPath:kSPGetUserListPath params:nil httpMethod:@"GET" ssl:YES]; 
```

应该`onDownloadProgressChanged:`在我发送 GET 请求时`operationWithPath:params:httpMethod:ssl:`调用，还是仅在使用 下载文件时调用`addDownloadStream:`？

`addData:`每当我通过该方法`MKNetworkOperation`的方法发送带有附加文件的 POST 请求时，`onUploadProgressChanged:`都会相应地调用它。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:10:34.803

我遇到了同样的问题，因为错过了类似以下 MKNetworkEngine 在主类中初始化的内容：

```
self.sampleDownloader = [[ExampleDownloader alloc] initWithHostName:nil customHeaderFields:nil]; 
```

# objective-c - 释放使用 malloc 分配的内存的最佳方法

> ID：13970091
> 
> 赞同：1
> 
> 时间：2012-12-20T10:30:21.743
> 
> 标签：objective-c, malloc

我具有将整数转换为字节数组的功能（对于 iPhone）。为了增加动态性，我使用 malloc 分配了数组。但我认为这会泄漏内存。管理此内存的最佳方法是什么，

```
+ (unsigned char *) intToByteArray:(int)num{
    unsigned char * arr = (unsigned char *) 
                          malloc(sizeof(num) * sizeof(unsigned char));
    for (int i = sizeof(num) - 1 ; i >= 0; i --) {
        arr[i] = num & 0xFF;
        num = num >> 8;
    }
    return arr;
} 
```

打电话时，

```
int x = 500;
unsigned char * bytes = [Util intToByteArray:x]; 
```

我想避免调用 free(bytes) 因为调用函数不知道或明确知道，内存已分配且未释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:33:09.967

只需`free(bytes);`在完成字节后调用（在方法末尾或在类的 dealloc 中）

* * *

由于您想避免免费通话，因此可以将 byte[] 包装在 NSData 对象中：

`NSData *d = [NSData dataWithBytesNoCopy:bytes length:num freeWhenDone:YES];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:41:13.787

一些东西：

1.  根据定义，`char`类型 (and `signed char`and `unsigned char`) 的大小都为 1，因此`sizeof(unsigned char)`是不必要的。

2.  看起来您只想获取`int`对象的字节表示，如果是这种情况，则无需为其分配更多空间，只需获取 的地址`int`并将其转换为指向`unsigned char *`. 如果字节顺序错误，您可以使用该`NSSwapInt`函数交换 中的字节顺序，`int`然后获取地址并转换为`unsigned char *`。例如：

    ```
    int someInt = 0x12345678;
    unsigned char *bytes = (unsigned char *) &someInt; 
    ```

    这种强制转换是合法的，并且在读取字节`bytes`之前读取是合法的。`sizeof(int)`这是访问“对象表示”。

3.  如果您坚持使用`malloc`，那么您只需要在`free`完成时将缓冲区传递给，如下所示：

    ```
    free(bytes); 
    ```

4.  您的方法名称**并不**意味着返回缓冲区的正确所有权。如果您的方法返回调用者负责释放的某些内容，则通常使用 、 或有时 来命名`new`该`copy`方法`create`。更合适的名称将是`copyBytesFromInt:`或类似的名称。否则，您可以让该方法接受预分配的缓冲区并调用该方法`getBytes:fromInt:`，例如：

    ```
    + (void) getBytes:(unsigned char *) bytes fromInt:(int) num
    {
        for (int i = sizeof(num) - 1 ; i >= 0; i --) {
            bytes[i] = num & 0xFF;
            num = num >> 8;
        }
    } 
    ```

5.  您可以将您包装`bytes`到一个`NSData`实例中：

    ```
    NSData *data = [NSData dataWithBytesNoCopy:bytes length:sizeof(num) freeWhenDone:YES]; 
    ```

    确保您的方法遵循通常的对象所有权规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:43:22.977

处理这个问题的传统方法是让调用者传入一个分配的字节缓冲区。这样，调用者负责释放它。就像是：

```
int x = 500;
char *buffer = malloc(x * sizeof(char));
[Util int:x toByteArray:buffer];
…
free(buffer); 
```

我还会考虑创建一个 NSData 来保存字节，这将为您处理内存管理，同时仍然允许您更改字节缓冲区：

```
+ (NSData *) intToByteArray:(int)num {
    unsigned char * arr = (unsigned char *) 
                          malloc(sizeof(num) * sizeof(unsigned char));
    for (int i = sizeof(num) - 1 ; i >= 0; i --) {
        arr[i] = num & 0xFF;
        num = num >> 8;
    }

    return [NSData dataWithBytesNoCopy:arr length:num freeWhenDone:YES];
} 
```

# android - 如何在 ScrollView 中“减慢” ImageView？

> ID：13970092
> 
> 赞同：1
> 
> 时间：2012-12-20T10:30:24.333
> 
> 标签：android, horizontalscrollview

我有一个扩展Horizo​​ntalScrollView 的“捕捉”水平滚动视图类。我希望对此 ScrollView 上的底层 ImageView 应用视差效果，这样，如果用户将视图向右滚动 2px，则 imageview 向左移动 1px。所以基本上它看起来背景图像的移动速度比布局的其余部分要慢一些。

我该如何做到这一点？我希望这样做所需的逻辑是写在 onTouchEvent 和 onInterceptTouchEvent 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:39:00.097

你应该看看这个库： [https ://github.com/chrisjenx/ParallaxScrollView](https://github.com/chrisjenx/ParallaxScrollView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:08:52.967

你应该使用你的 onTouch 来翻译动画。

# android - android在ImageView中共享图像而不保存在sd卡中

> ID：13970100
> 
> 赞同：14
> 
> 时间：2012-12-20T10:30:36.077
> 
> 标签：android, bitmap

我想在图像视图中共享图像。但我不想保存到 SD 卡。但是当我使用 Intent 共享时，我使用了代码

```
Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("image/jpeg");
                share.putExtra(Intent.EXTRA_STREAM,Uri.parse(path));
                startActivity(Intent.createChooser(share, "Share Image")); 
```

此处 Path 指定图像在 sdcard 中的位置

但我不想保存图像...有可能..

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-05-11T15:54:20.063

The recommended method for sharing files with other apps is with a [ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html) called [FileProvider](http://developer.android.com/reference/android/support/v4/content/FileProvider.html). The documentation is pretty good, but some parts are a little tricky. Here is a summary.

# Set up the FileProvider in the Manifest

```
<manifest>
    ...
    <application>
        ...
        <provider
            android:name="android.support.v4.content.FileProvider"
            android:authorities="com.example.myapp.fileprovider"
            android:grantUriPermissions="true"
            android:exported="false">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/filepaths" />
        </provider>
        ...
    </application>
</manifest> 
```

Replace `com.example.myapp` with your app package name.

# Create res/xml/filepaths.xml

```
<?xml version="1.0" encoding="utf-8"?>
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <cache-path name="shared_images" path="images/"/>
</paths> 
```

This tells the FileProvider where to get the files to share (using the cache directory in this case).

# Save the image to internal storage

```
// save bitmap to cache directory
try {

    File cachePath = new File(context.getCacheDir(), "images");
    cachePath.mkdirs(); // don't forget to make the directory
    FileOutputStream stream = new FileOutputStream(new File(cachePath, "image.png")); // overwrites this image every time
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    stream.close();

} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# Share the image

```
File imagePath = new File(context.getCacheDir(), "images");
File newFile = new File(imagePath, "image.png");
Uri contentUri = FileProvider.getUriForFile(context, "com.example.app.fileprovider", newFile);

if (contentUri != null) {

    Intent shareIntent = new Intent();
    shareIntent.setAction(Intent.ACTION_SEND);
    shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION); // temp permission for receiving app to read this file
    shareIntent.setDataAndType(contentUri, getContentResolver().getType(contentUri));
    shareIntent.putExtra(Intent.EXTRA_STREAM, contentUri);
    startActivity(Intent.createChooser(shareIntent, "Choose an app"));

} 
```

# Further reading

*   [FileProvider](http://developer.android.com/reference/android/support/v4/content/FileProvider.html)
*   [Storage Options - Internal Storage](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)
*   [Sharing Files](http://developer.android.com/training/secure-file-sharing/index.html)
*   [Saving Files](http://developer.android.com/training/basics/data-storage/files.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-06T22:22:43.750

我能够做到这一点：

```
File file = new File( getCacheDir(), "screenshot.png");
...
file.setReadable(true, false);
Uri uri = Uri.fromFile(file);
...
intent.putExtra(Intent.EXTRA_STREAM, uri); 
```

这样我将文件保存在我自己的缓存文件夹中，所以我不会欺骗任何公共文件夹或依赖于存在的 sd 卡。

此外，如果用户删除我的应用程序，它会自动删除，但我也使用 startActivityForResult/onActivityResult 删除文件并在共享完成后将其文件夹设置回私有。

（我个人希望找到一种方法来共享比特流并避免完全创建文件的步骤，但我认为这是不可能的。）

[编辑：我发现这在 2.3.6 上不起作用，文件必须在 file:///mnt/sdcard 上。]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:36:24.720

您还可以将其作为媒体库内容提供者 URI 共享（如果图像已经在手机上，或者如果它来自网络，您可以共享 URL（尽管效果不同）。

但是，如果来自网络并且您直接解码为位图，现在想将其作为正确的图像共享，是的，您真的需要该文件！

# vba - 找不到匹配数据值的低效代码

> ID：13970103
> 
> 赞同：0
> 
> 时间：2012-12-20T10:30:41.110
> 
> 标签：vba, excel

我对以下代码有 3 个问题：

代码意图：我有一个数据表，4 列（F、G、H 和 I）宽，X 行长（X 通常在 5 到 400 之间）。我在 M 列中有一个日期列表，通常不超过 8 个日期。表的 H 列也包含日期。我想找到两列（H 和 M）中的日期，每当它们出现时，转到 I 列中的同一行并将其值设置为零，然后将其值设置为零（因此，如果匹配项在 H100 中，然后 I100 和 I101 将被归零）。

代码问题：根据反馈编辑 1)。

1) 我已经使用 if 公式 (=if(H100=M12,1,0) 验证了存在一个匹配项，就像电子表格看到的那样。尽管从 if 公式确认，宏没有找到这个匹配项. 单元格 I100 和 I101 具有非零值，此时它们应该归零。

2) 代码运行，但需要大约 3 分钟来处理 3 张 180 行数据。可以做些什么来让它运行得更快、更高效？它最多可以有 30 张数据和 400 行（极端示例但可能，在这种情况下我很乐意让它运行一点）。

3）假设我的数据表在运行宏之前是 100 行，从第 12 行开始，在宏之后，第 I 列有 111 行的非零值，接下来的 389 行为零。有什么办法可以防止它从填充零，然后将其留空？

之后我在 I 列上使用了相关函数，并且 0 与 0 的巨大一致性严重扭曲了这一点。提前致谢，

```
Sub DeleteCells()

Dim ws As Worksheet
Dim cell As Range, search_cell As Range
Dim i As Long
Dim h As Long

Application.ScreenUpdating = False

For Each ws In ThisWorkbook.Worksheets
    If Not ws.Name = "Cover" Then
        For Each cell In ws.Range("H12:H500")

            On Error Resume Next
            h = ws.Range("G" & Rows.Count).End(xlUp).Row
             i = ws.Range("L" & Rows.Count).End(xlUp).Row
            Set search_cell = ws.Range("M12:M" & h).Find(what:=cell.Value, LookIn:=xlValues, lookat:=xlWhole)
            On Error GoTo 0
            If Not search_cell Is Nothing Then
                ws.Range("I" & cell.Row).Value = 0
                ws.Range("I" & cell.Row + 1).Value = 0
                Set search_cell = Nothing
            End If
        Next cell
    End If
Next ws

Application.ScreenUpdating = True

Set ws = Nothing: Set cell = Nothing: Set search_cell = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:52:32.247

**编辑**：测试代码，是否适用于从第 12 行开始的 H/M 列中的 0、1 行数据？

**编辑**：更新单元格以处理带有 1 行数据的案例，未经测试：|

我将首先给出我的解决方案，这个应该更快，因为它首先将单元格读入内存

如果它不起作用或您有其他问题，请发表评论

```
Sub DeleteCells()

Dim ws As Worksheet
Dim i As Long
Dim h As Long
Dim MColumn As Variant  ' for convinence
Dim HColumn As Variant
Dim IColumn As Variant
Application.ScreenUpdating = False

For Each ws In ThisWorkbook.Worksheets
    If Not ws.Name = "Cover" Then  'matching the target sheet
    ' matching the rows where column M's date matches column H's date
        'starting row num is 12
        With ws ' for simplifying the code
            h = .Range("H" & .Rows.count).End(xlUp).Row
            If h = 12 Then ' CASE for 1 row only
                If Range("H12").Value = Range("M12").Value Then
                    Range("I12:I13").Value = ""
                End If

            ElseIf h < 12 Then
                ' do nothing

            Else
                ReDim HColumn(1 To h - 11, 1 To 1)
                ReDim MColumn(1 To h - 11, 1 To 1)
                ReDim IColumn(1 To h - 10, 1 To 1)
                ' copying the data from worksheet into 2D arrays
                HColumn = .Range("H12:H" & h).Value
                MColumn = .Range("M12:M" & h).Value
                IColumn = .Range("I12:I" & h + 1).Value

                For i = LBound(HColumn, 1) To UBound(HColumn, 1)
                    If Not IsEmpty(HColumn(i, 1)) And Not IsEmpty(MColumn(i, 1)) Then
                        If HColumn(i, 1) = MColumn(i, 1) Then
                            IColumn(i, 1) = ""
                            IColumn(i + 1, 1) = ""
                        End If
                    End If
                Next i
                'assigning back to worksheet cells
                .Range("H12:H" & h).Value = HColumn
                .Range("M12:M" & h).Value = MColumn
                .Range("I12:I" & h + 1).Value = IColumn
            End If

        End With
    End If
Next ws
Application.ScreenUpdating = True
End Sub 
```

# java - HSQLDB 别名不存在，linux sh 脚本

> ID：13970119
> 
> 赞同：1
> 
> 时间：2012-12-20T10:31:29.520
> 
> 标签：java, linux, hsqldb, raspberry-pi

问题是当我的 hsql 服务器启动时，它告诉别名存在，一切都连接成功：

```
rpi@RaspberryPi:/home/snb/update_skynetwork/apps/App/bin$ sh skysql.sh
/home/snb/update_skynetwork/apps/App/lib/hsqldb-2.2.8.jar
[Server@133796]: [Thread[main,5,main]]: checkRunning(false) entered
[Server@133796]: [Thread[main,5,main]]: checkRunning(false) exited
[Server@133796]: Startup sequence initiated from main() method
[Server@133796]: Could not load properties from file
[Server@133796]: Using cli/default properties only
[Server@133796]: Initiating startup sequence...
[Server@133796]: Server socket opened successfully in 7 ms.
] opened sucessfully in 1462 ms.=0, id=0,   db=file:/home/snb/update_skynetwork/apps/App/sky-network-hsqldb/sky-network-hsqldb,       alias=sky-network-hsqldb
[Server@133796]: Startup sequence completed in 1473 ms.
[Server@133796]: 2012-12-20 10:23:11.843 HSQLDB server 2.2.8 is online on port 9001  
[Server@133796]: To close normally, connect and execute SHUTDOWN SQL
[Server@133796]: From command line, use [Ctrl]+[C] to abort abruptly 
```

但是当我尝试连接我的 java 应用程序时，我收到了这个错误：

-在服务器上：

```
[Server@133796]: [Thread[HSQLDB Connection @bdb503,5,HSQLDB Connections @133796]]: database alias=sky-network-hsqldb does not exist
[Server@133796]: [Thread[HSQLDB Connection @110003,5,HSQLDB Connections @133796]]: database alias=sky-network-hsqldb does not exist
[Server@133796]: [Thread[HSQLDB Connection @175d6ab,5,HSQLDB Connections @133796]]: database alias=sky-network-hsqldb does not exist 
```

-在客户端：

```
Caused by: org.hsqldb.HsqlException: General error: database alias does not exist
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.ClientConnection.<init>(Unknown Source)
... 16 more 
```

我试过用sqltool测试连接，但还是一样。另外，我已经检查了客户端属性中的别名 - 都一样，就像需要一样。hsql的罐子是一样的。一切都匹配。

作为操作系统，我有一个 Raspberry-pi VM。

编辑

这是我的 sqltool.sh ：

```
#! /bin/sh -e

export CLASSPATH=../lib/hsqldb-2.2.8.jar:$CLASSPATH
export CLASSPATH=../lib/sqltool.jar:$CLASSPATH

java -classpath $CLASSPATH org.hsqldb.cmdline.SqlTool --    inlineRc=url=jdbc:hsqldb:hsql://localhost/sky-network-hsqldb,user=SA,password= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:09:18.397

似乎唯一可能的问题是 shell 脚本。

您可以为别名使用一个简单的名称，而不使用连字符。

数据库文件名应该带有连字符。

服务器消息指出您没有 server.properties 文件。在这种情况下，数据库文件路径和名称/别名应该在命令行上。请检查您的 shell 脚本并报告/更改启动服务器的行。

# c# - “无法加载 DLL ......对内存位置的无效访问”错误

> ID：13970129
> 
> 赞同：1
> 
> 时间：2012-12-20T10:32:11.810
> 
> 标签：c#

我正在使用生成硬件 ID的第三方 .dll（[来自本网站）。](http://www.soft.tahionic.com/)我按照该网站[上](http://www.soft.tahionic.com/download-hdd_id/hardware%20id%20programming%20source%20code/how%20to%20call%20it.html#dotnet_C#)提供的说明使用它。

```
 [DllImport("HardwareIDExtractorC.dll")]
    public static extern String GetIDESerialNumber(byte DriveNumber);

    private void btnGetHardwareId_Click(object sender, EventArgs e)
    {

        MessageBox.Show(GetIDESerialNumber(0));
    } 
```

但它引发了以下错误 -

无法加载 DLL“HardwareIDExtractorC.dll”：对内存位置的访问无效。（来自 HRESULT 的异常：0x800703E6）

我在这里错过了什么吗？

# joomla - 从 joomla 前端管理用户

> ID：13970132
> 
> 赞同：0
> 
> 时间：2012-12-20T10:32:21.607
> 
> 标签：joomla, joomla-extensions

joomla 是否有任何免费或商业扩展来从前端管理用户？

我正在使用 joomla 2.5

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:58:28.170

amlaishere 看看 DM Frontend User Manager [http://www.dmjoomlaextensions.com/](http://www.dmjoomlaextensions.com/)它的商业版。它具有良好的 AJAX 功能等等。在自定义此扩展程序时，它会踢屁股。我为我们的一个项目开发了这样的组件。所以如果你愿意，我会和你分享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:37:49.130

看看这个。它是商业扩展

[http://www.joomlarra.com/joomla-2.5-user-export-import-documentation/joomla-25-user-profile-fields.html](http://www.joomlarra.com/joomla-2.5-user-export-import-documentation/joomla-25-user-profile-fields.html)

检查这些也 [http://extensions.joomla.org/extensions/contacts-and-feedback/forms](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)

# infobox - 信息框不工作

> ID：13970133
> 
> 赞同：1
> 
> 时间：2012-12-20T10:32:24.227
> 
> 标签：infobox

我不是开发人员，我正在尝试逐步学习 javascript。现在，我需要在我正在处理的 gmap 中添加一个简单的信息框。问题是，我添加了谷歌参考中解释的代码，但它不起作用：一开始我使用的 infowindow 效果很好，但没有那么定制。我还将 infobox.js 链接放在该页面中，这是最后一个版本。

这是测试页面：[http ://www.squassabia.com/aree_espositive_prova2.asp](http://www.squassabia.com/aree_espositive_prova2.asp)

我需要做的是显示您在代码中看到的消息（boxText.innerHTML），只是为了逐步理解它并保持简单。之后，我将对其进行样式设置并从 xml 添加数据（我认为这不会那么困难）。

由于我没有在任何旧帖子中找到任何解决方案，如果你们中的任何人都可以给我有关如何解决问题的线索，将不胜感激，我已经尝试了所有方法并将信息框的东西几乎无处不在:(

干杯

我给你初始化（）代码：

```
//icone custom
var customIcons = {
  negozio: {icon: '/images/gmaps/mc.png'},
  outlet: {icon: '/images/gmaps/pin_fuc_outlet.png'},
  sede: {icon: '/images/gmaps/pin_fuc_home.png'}
};

var clusterStyles = [
{
textColor: 'white',
url: '/images/gmaps/mc.png',
height: 48,
width: 48
}];

function initialize() {

//creo una istanza della mappa
var map = new google.maps.Map(document.getElementById("mapp"), {
    center: new google.maps.LatLng(45.405, 9.867),
    zoom: 9,
    mapTypeId: 'roadmap',
    saturation: 20, //scrollwheel: false
  });

//stile della mappa
var pinkroad = [ //creo un array di proprietà
  { 
    featureType: "all", //seleziono la feature
    stylers: [{gamma: 0.8 },{ lightness: 50 },{ saturation: -100}]
  },
  {
    featureType: "road.highway.controlled_access",
    stylers: [{ hue: "#FF3366" },{ saturation: 50 },{ lightness: -5 }]
  }
];
map.setOptions({styles: pinkroad});

var name;

//Creates content and style
var boxText = document.createElement("div");
boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;";
boxText.innerHTML = "Prova Infobox<br >Successo!!Test Text";

var myOptions = {
             content: boxText
            ,disableAutoPan: false
            ,maxWidth: 0
            ,pixelOffset: new google.maps.Size(-140, 0)         
            ,zIndex: null
            ,boxStyle: {background: "url('tipbox.gif') no-repeat", opacity: 0.75, width: "280px"}
            ,closeBoxMargin: "10px 2px 2px 2px"
            ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
            ,infoBoxClearance: new google.maps.Size(1, 1)
            ,isHidden: false
            ,pane: "floatPane"
            ,enableEventPropagation: false

        };

var ib = new InfoBox(myOptions);

//creo il marker
downloadUrl("xml/negozi.xml", function(data) {
var xml = data.responseXML;
var markers = xml.documentElement.getElementsByTagName("marker");
for (var i = 0; i < markers.length; i++) 
  {  
    var type = markers[i].getAttribute("tipo");
    var address = markers[i].getElementsByTagName("indirizzo")[0].childNodes[0].nodeValue;
    var city = markers[i].getElementsByTagName("citta")[0].childNodes[0].nodeValue;
    var phone = markers[i].getElementsByTagName("telefono")[0].childNodes[0].nodeValue;
    name = markers[i].getElementsByTagName("nome")[0].childNodes[0].nodeValue;

    var point = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));

    var html = name + '<br />' + address + '<br />' + city + '<br />' + phone;
    var icon = '/images/gmaps/pin_fuc.png';
    var marker = new google.maps.Marker({map: map, position: point, icon :'/images/gmaps/pin_fuc.png'});

    /*google.maps.event.addListener(marker,"click", function(){ 
        map.panTo(this.position);
    });*/

    createMarkerButton(marker);

    google.maps.event.addListener(marker, "click", function (e) {
        ib.open(map);
    });

   }  

});

function createMarkerButton(marker) {
  //Creates a sidebar button
    var ul = document.getElementById("list");
    var li = document.createElement("li");
    li.appendChild(document.createTextNode(name));
    ul.appendChild(li);

  //Trigger a click event to marker when the button is clicked.
  google.maps.event.addDomListener(li, "mouseover", function(){
    marker.setAnimation(google.maps.Animation.BOUNCE);
    setTimeout (function (){marker.setAnimation(null);}, 750);
  });

  google.maps.event.addDomListener(li, "mouseout", function(){
    google.maps.event.trigger(marker, "mouseout");
  });

}

}

 function downloadUrl(url, callback) {
 var request = window.ActiveXObject ?
  new ActiveXObject('Microsoft.XMLHTTP') :
  new XMLHttpRequest;

 request.onreadystatechange = function() {
if (request.readyState == 4) {
  request.onreadystatechange = doNothing;
  callback(request, request.status);
}
 };

 request.open('GET', url, true);
 request.send(null);
 }

 function doNothing() {} 
```

# jsf - 将无状态 EJB 注入 JSFmanaged bean 会导致 WAS 8.5 中出现 NullPointer ex

> ID：13970134
> 
> 赞同：4
> 
> 时间：2012-12-20T10:32:28.893
> 
> 标签：jsf, ejb, websphere, code-injection

使用 JSF 2.x mojarra 实现（2.0 和 2.1 测试）的 Java EE 6 项目，其中会话 bean 通过 @EJB 注释注入 JSF 托管 bean 在 Websphere Application Server 8.5 中失败，而它在 Glassfish 3.x 上运行（在 GF 上测试3.0 和 3.1），因为它是：

编码方法如下：

**SomeEJBFacade.java**

```
@Stateless
public class SomeEJBFacade() {

     public String testMethod() {
        return "testing 1 2 3";
     }

} 
```

**测试豆**

```
@ManagedBean
@ViewScoped
public class TestBean implements java.io.Serializable {
    @EJB SomeEJBFacade facade;

    public String getTestStr() {
        return facade.testMethod();
    }
} 
```

JSF facelet 片段：

```
<h:outputText value="#{testBean.testStr}" /> 
```

以上导致TestBean 的*testStr()*方法出现**空指针异常。**

 *同样，任何 JPA 事务方法都会在相似点引发空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:59:52.717

问题是 GlassFishs 和 WebSpheres 类加载器确实以不同的方式工作。您必须将 ejb 模块添加为 Web 项目 META-INF/MANIFEST.MF 中的依赖项：

```
Class-Path: EnappDaemonEJB.jar 
```

其中“EnappDaemonEJB.jar”是生成的 jar/EJB 工件的名称——或者换句话说，我的 EJB 项目的名称是“EnappDaemonEJB”。

链接：[WebSphere Infocenter - 请参阅过程点 2](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tweb_troubleshoot_cdi.html)*

# python - scrapy：新手尝试调试代码

> ID：13970141
> 
> 赞同：3
> 
> 时间：2012-12-20T10:33:00.437
> 
> 标签：python, scrapy

总新手，试图从 csv 中读取 url 列表并返回 csv 中的项目。需要一些帮助来找出我在这里出错的地方：蜘蛛代码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
import random

class incyspider(BaseSpider):
    name = "incyspider"
    def __init__(self):
        super(incyspider, self).__init__()
        domain_name = "incyspider.co.uk"
        f = open("urls.csv")
        start_urls = [url.strip() for url in f.readlines()]
        f.close

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//div[@class="Product"]')
        items = []
        for site in sites:
            item['title'] = hxs.select('//div[@class="Name"]/node()').extract()
            item['hlink'] = hxs.select('//div[@class="Price"]/node()').extract()
            item['price'] = hxs.select('//div[@class="Codes"]/node()').extract()
            items.append(item)

        return items

SPIDER = incyspider() 
```

这是 items.py 代码：

```
from scrapy.item import Item, Field

class incyspider(Item):
    # define the fields for your item here like:
    # name = Field()
    title = Field()
    hlink = Field()
    price = Field()
    pass 
```

要运行，我正在使用

```
scrapy crawl incyspider -o items.csv -t csv 
```

我会非常感谢任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:56:20.543

我不太确定，但在快速查看您的代码后，我会说至少您需要替换这一行

```
sites = hxs.select('//div[@class="Product"]') 
```

通过这条线

```
sites = hxs.select('//div[@class="Product"]').extract() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:57:37.967

作为回答这个问题的第一手，您的蜘蛛代码缺少您的`incyspider`项目类的导入。此外，您没有创建任何类型的项目的实例来存储标题/hlink/价格信息，因此该`items.append(item)`行可能会抱怨。

由于您的蜘蛛也被调用`incyspider`，您应该将项目重命名为类似`incyspiderItem`，然后将以下行添加到您的蜘蛛代码中

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
import random
from incyspider.items import incyspiderItem 

class incyspider(BaseSpider):
    name = "incyspider"
    def __init__(self):
        super(incyspider, self).__init__()
        domain_name = "incyspider.co.uk"
        f = open("urls.csv")
        start_urls = [url.strip() for url in f.readlines()]
        f.close

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//div[@class="Product"]')
        items = []
        for site in sites:
            item = incyspiderItem()
            item['title'] = hxs.select('//div[@class="Name"]/node()').extract()
            item['hlink'] = hxs.select('//div[@class="Price"]/node()').extract()
            item['price'] = hxs.select('//div[@class="Codes"]/node()').extract()
            items.append(item)

        return items 
```

如果我错了，请编辑问题以解释您如何知道代码存在问题，例如：预期输出与实际输出不同吗？如果是这样，怎么做？

# django - Django 为什么空白 IntegerField 的值在自定义表单中显示为“无”？

> ID：13970142
> 
> 赞同：1
> 
> 时间：2012-12-20T10:33:00.877
> 
> 标签：django, integer, field

我的一个模型中有一个非常简单`IntegerField`的模型。

# 模型.py

```
## Imports

from django.db import models

class UserModel(models.Model)
    name = models.CharField(max_length=50)

class NumberModel(models.Model)
    user = models.ForeignKey(UserModel)
    number = models.IntegerField(blank=True, null=True) # This is the IntegerField 
```

在视图中，我传递了数字模型本身：

# 视图.py

```
def change_user_number(request):
    number = get_object_or_404(models.NumberModel, user=request.user)
    return render_to_response('change_number.html', {'number' : number }, context_instance=RequestContext(request)) 
```

现在，当我在我的一种自定义表单中使用上述整数字段的值时，它显示如下：

![具有空白 IntegerField 值的文本字段](../Images/199426c809364b763c5e3fc0c351c6c9.png)

在模板中我有这样的东西：

# 模板

```
<form id="" action="" method="POST">
    <p><label for="user_number"></label></p>
    <p><input type="text" name="user_number" id="user_number" value="{{ number.number }}" />
    <input type="submit" value="submit" />
</form> 
```

我只想在值存在时才显示该值。我很确定该值在数据库中保存为 null 但为什么返回`"None"`.

我也尝试了以下但没有成功。

```
<input type="text" name="user_number" id="user_number" {% if number.number == "None" %} value="" {% else %} value="{{ number.number }}" {% endif %} /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:04:28.690

当`number.number`为时`None`，它将在数据库中存储为空。正如丹尼尔在评论中所说，`None`与 string 不同`"None"`，这就是您的比较不起作用的原因。

我建议您使用[`default_if_none`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#default-if-none)模板过滤器。

```
{{ number.number|default_if_none:"" }} 
```

这区分了何时值为`0`和`None`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:35:35.750

检查值是否存在：

```
{% if number.number %} 
```

# javascript - Javascript预渲染图像未显示

> ID：13970145
> 
> 赞同：2
> 
> 时间：2012-12-20T10:33:05.587
> 
> 标签：javascript, image, rendering, invisible

我目前正在为 ipad 开发一个带有 css3-transition 滑块的 html 页面，用于各种内容。

我遇到的问题是，下一页上尚未呈现的图像将在将它们滑动到内容区域时呈现（尽管它们是预加载的）。

有没有办法让浏览器呈现它们，而不是在初始页面请求时显示它们，以防止图像上的卡顿滑动效果？

/编辑：

我使用的滑块：[滑块](http://www.idangero.us/sliders/swiper/)

结构是这样的：

```
<body>
    <!-- wrapper -->
    <div>
        <!-- head -->
        <div class="head"></div>
        <!-- content area -->
        <div class="content">
            <div class="container">
                <div class="pagination"></div>
                <div class="slide-wrapper">
                    <div class="slide">
                        <!-- content with images here -->
                    </div>
                    <div class="slide"></div>
                    <div class="slide"></div>
                    <div class="slide"></div>
                    <div class="slide"></div>
                </div>
            </div>      
        </div>
        <!-- foot -->
        <div class="foot"></div>
    </div>
</body> 
```

图像预加载：

```
function preload() {
    $('img').each(function(){
        $('<img/>')[0].src = $(this).attr('src');
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:01:50.900

这将强制浏览器预加载所有图像

```
$('img').each(function(){
  var image = new Image();
  image.src = $(this).attr('src')    

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:37:35.607

一种通用技术是将它们设置为`visibility: hidden`（内联样式以确保在下载任何外部 CSS 之前应用它） - 并将其设置为`visibility: visible`处理`image.onload`程序。

`<img src="..." style="visibility: hidden" onload="this.style.visibility = 'visible';">`

* * *

**编辑**

```
$('img').each(function(){
    $(this).css('visibility', 'hidden');
    $('<img/>')[0].src = $(this).attr('src');
    $(this).load(function() {
        $(this).css('visibility', 'visible');        
    });
}); 
```

# php - 优化查询

> ID：13970147
> 
> 赞同：2
> 
> 时间：2012-12-20T10:33:06.397
> 
> 标签：php, mysql

希望对使用索引（或者实际上是查询本身）优化 MySQL 查询有所帮助。

表结构：

```
CREATE TABLE IF NOT EXISTS `match_current` (
  `partnership_id` int(11) NOT NULL AUTO_INCREMENT,
  `runs` int(5) NOT NULL DEFAULT '0',
  `balls` int(5) NOT NULL DEFAULT '0',
  `user1_id` bigint(11) NOT NULL,
  `user1_firstname` char(20) NOT NULL,
  `user1_lastname` char(20) NOT NULL,
  `user1_runs` int(5) NOT NULL DEFAULT '0',
  `user1_balls` int(5) NOT NULL DEFAULT '0',
  `user1_strike` tinyint(1) NOT NULL DEFAULT '1',
  `user1_out` tinyint(1) NOT NULL DEFAULT '0',
  `user1_retired` tinyint(1) NOT NULL DEFAULT '0',
  `user2_id` bigint(11) NOT NULL,
  `user2_firstname` char(20) NOT NULL,
  `user2_lastname` char(20) NOT NULL,
  `user2_runs` int(5) NOT NULL DEFAULT '0',
  `user2_balls` int(5) NOT NULL DEFAULT '0',
  `user2_strike` tinyint(1) NOT NULL DEFAULT '0',
  `user2_out` tinyint(1) NOT NULL DEFAULT '0',
  `user2_retired` tinyint(1) NOT NULL DEFAULT '0',
  `last_over` char(15) NOT NULL,
  `ball_by_ball` varchar(1000) NOT NULL,
  `facebook` tinyint(1) NOT NULL DEFAULT '0',
  `friends` tinyint(1) NOT NULL DEFAULT '0',
  `nudge` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `started` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `status` tinyint(1) NOT NULL DEFAULT '1',
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`partnership_id`),
  UNIQUE KEY `user1_id_2` (`user1_id`,`user2_id`,`facebook`),
  KEY `user2_id` (`user2_id`),
  KEY `user1_id` (`user1_id`),
  KEY `facebook` (`facebook`),
  KEY `status` (`status`),
  KEY `friends` (`friends`),
  KEY `timestamp` (`timestamp`),
  KEY `user1_id_3` (`user1_id`,`user1_strike`),
  KEY `user2_id_2` (`user2_id`,`user2_strike`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=36139 ; 
```

示例查询：

```
SELECT * 
FROM match
WHERE status = 1 
AND (
  (user1_id=1234 AND user1_strike=1) OR 
  (user2_id=4321 AND user2_strike=1)
) 
ORDER BY timestamp ASC 
```

查询显然有效，而且做得还不错，但我们最近确实增加了流量，现在我可以看到它开始挣扎了。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:51:37.177

优化查询时要记住的一件事是 MySQL在执行查询时只会选择*一个索引；*盲目地索引您能想到的任何字段组合可能无济于事，实际上会减慢插入速度。

这看起来像一个典型的桌子，有两个玩家组成一个团队，所以因为你不确定被查询的用户是否会在`user1`或者`user2`你搜索两者。这很可能导致所有键都被拒绝并因此执行表扫描。

我的建议是稍微非规范化您的表并创建一个单独的表，您可以在其中存储`(user_id, partnership_id)`并加上一个跨越主键，其中的每条记录`partnerships`是该表中的两条记录；这消除了`OR`，您可以使用一个简单`JOIN`的从更大的表中获取您需要的信息。

为了帮助您调查这些问题，您可以使用`EXPLAIN <query>`查看 MySQL 如何“攻击”您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:37:08.620

你真的需要一切吗？

```
SELECT * 
```

为 WHERE 子句创建索引

```
INDEX(user1_id, user1_strike, user2_id, user2_strike) 
```

您还可以在索引中包含 timestemp 并将排序设置为 ASC。

除此之外，数据库的表可能需要额外的索引并且可能需要重新设计。还要考虑检查 SQL 服务器设置（使用 InnoDB 表，并为服务器设置正确的缓存/内存限制）。

# java - 需要找到正确的 28 个三元组

> ID：13970149
> 
> 赞同：-2
> 
> 时间：2012-12-20T10:33:07.630
> 
> 标签：java

大家好，我在 InterviewSteet 网站上发现了有趣的问题。我对这个问题有点困惑。请帮助我理解问题。我得到了 35 个三元组，但样本中预计只有 28 个。我添加了我的 35triples 输出。请帮我找到 28 个三元组。wat是我理解问题的错误。一世

问题：

> 有一个整数数组 d，它不包含两个以上相同值的元素。存在多少个不同的升序三元组 (d[i] < d[j] < d[k], i < j < k)？

输入格式

> 第一行包含一个整数 N，表示数组中元素的数量。接下来是包含 N 个整数的单行，由一个空格分隔，没有前导/尾随空格

输出格式：

> 一个整数，表示数组中存在的不同升三元组的数量

约束：

```
N <= 10^5
Every element of the array is present at most twice
Every element of the array is a 32-bit positive integer 
```

样本输入：

```
6
1 1 2 2 3 4 
```

样本输出：

```
 4 
```

解释：不同的三元组是

```
(1,2,3)
(1,2,4)
(1,3,4)
(2,3,4) 
```

我的输入：

```
10
1 1 5 4 3 6 6 5 9 10 
```

我的输出：

```
35 
```

解释：不同的三元组是

```
(1,3,4) 
```

(1,3,5) (1,3,6) (1,3,9) (1,3,10) (1,4,5) (1,4,6) (1,4,9) ( 1,4,10) (1,5,6) (1,5,9) (1,5,10) (1,6,9) (1,6,10) (1,9,10) (3 ,4,5) (3,4,6) (3,4,9) (3,4,10) (3,5,6) (3,5,9) (3,5,10) (3, 6,9) (3,6,10) (3,9,10) (4,5,6) (4,5,9) (4,5,10) (4,6,9) (4,6 ,10) (4,9,10) (5,6,9) (5,6,10) (5,9,10) (6,9,10)

预期输出：

```
28 
```

我得到`35 triples`但是`28`正确的答案。我的错是什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T00:46:19.887

在这种情况下，您正在计算 n! 的总可能组合！/ (n-3)!3!。但是你必须删除所有那些不是升序的三元组。

# mysql - MySQL 一对多子选择 max UNIX_TIMESTAMP() from date

> ID：13970151
> 
> 赞同：1
> 
> 时间：2012-12-20T10:33:09.030
> 
> 标签：mysql, sql

我有一个查询，除了从与帖子相关的评论中获取最大日期外，它运行良好。

所以我想做的是：

*   关系： 1 个帖子对许多评论
*   使用 max() 获取 UNIX_TIMESTAMP() 中每个帖子的“最新评论日期”
*   按“最新发布日期”或“最新评论日期”对整个查询进行排序。因此，根据每行按“最新发布日期”或“最新评论日期”排序。
*   因此，顶部的记录要么是最新的帖子，要么是帖子的评论晚于任何会进入顶部的帖子。

任何帮助将不胜感激。

无需获取最大最新评论日期并按最新排序即可工作的查询

```
SELECT DISTINCT wallposts.p_id,wallposts.type,wallposts.value,wallposts.media,wallposts.youtube,wallposts.post_type,wallposts.tagedpersons,wallposts.title AS thetitle,wallposts.url,wallposts.description,wallposts.cur_image,wallposts.uip,wallposts.likes,wallposts.userid,wallposts.posted_by,wallposts.post as postdata,wallusers.*, UNIX_TIMESTAMP() - wallposts.date_created AS TimeSpent,wallposts.date_created,wallposts.course 
        FROM wallposts,wallusers
        where (
        wallposts.userid =4276 OR
        wallposts.tagedpersons LIKE '%4276%' OR
        EXISTS (SELECT * FROM wallcomments WHERE wallposts.p_id = wallcomments.post_id AND wallcomments.tagedpersons LIKE '%4276%')
        ) 
        AND wallusers.mem_id = wallposts.userid
        order by wallposts.p_id desc 
```

我试图解决这个问题但失败的那个：

```
 SELECT DISTINCT wallposts.p_id,wallposts.type,wallposts.value,wallposts.media,wallposts.youtube,wallposts.post_type,wallposts.tagedpersons,wallposts.title AS thetitle,wallposts.url,wallposts.description,wallposts.cur_image,wallposts.uip,wallposts.likes,wallposts.userid,wallposts.posted_by,wallposts.post as postdata,wallusers.*, UNIX_TIMESTAMP() - wallposts.date_created AS TimeSpent,wallposts.date_created,wallposts.course 
                FROM wallposts,wallusers
                JOIN wallusers wu on wallposts.userid = wu.mem_id
                LEFT JOIN wallcomments wc ON wc.post_id(SELECT date_created as commentdate_created, UNIX_TIMESTAMP() - max(date_created) as latestcomment
                FROM wallcomments wc WHERE wallposts.p_id = wc.post_id LIMIT 1)
                where (
                wallposts.userid = 4276 OR
                wallposts.tagedpersons LIKE '%4276%' OR
                EXISTS (SELECT * FROM wallcomments WHERE wallposts.p_id = wallcomments.post_id AND wallcomments.tagedpersons LIKE '%4276%')
                ) 
                order by greatest(latestcomment, TimeSpent) DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:41:24.780

查询本身对我来说有点奇怪 - LEFT JOIN 似乎已损坏，请再次检查：

```
SELECT 
      DISTINCT wallposts.p_id,
      wallposts.type,
      wallposts.value,
      wallposts.media,
      wallposts.youtube,
      wallposts.post_type,
      wallposts.tagedpersons,
      wallposts.title AS thetitle,
      wallposts.url,
      wallposts.description,
      wallposts.cur_image,
      wallposts.uip,
      wallposts.likes,
      wallposts.userid,
      wallposts.posted_by,
      wallposts.post as postdata,
      wallusers.*,
      UNIX_TIMESTAMP() - wallposts.date_created AS TimeSpent,
      wallposts.date_created,
      wallposts.course 
FROM wallposts, wallusers
      JOIN wallusers wu 
            on wallposts.userid = wu.mem_id
      LEFT JOIN wallcomments wc 
            ON wc.post_id (
                  SELECT 
                        date_created as commentdate_created, 
                        UNIX_TIMESTAMP() - max(date_created) as latestcomment
                  FROM wallcomments wc 
                  WHERE wallposts.p_id = wc.post_id LIMIT 1
            )
WHERE (
            wallposts.userid = 4276 OR
            wallposts.tagedpersons LIKE '%4276%' OR
            EXISTS (
                  SELECT * 
                  FROM wallcomments 
                  WHERE wallposts.p_id = wallcomments.post_id 
                        AND wallcomments.tagedpersons LIKE '%4276%'
            )
      )
order by greatest(latestcomment, TimeSpent) DESC 
```

# android - Amazon S3 出现错误“转换为 Dalvik 格式失败，错误 1”

> ID：13970152
> 
> 赞同：0
> 
> 时间：2012-12-20T10:33:11.033
> 
> 标签：android, amazon-web-services, amazon-s3, image-upload

我知道这是一个众所周知的**“Conversion to Dalvik format failed with error 1”**问题。

我也盯着它看，但它无法解决我的问题。

我的目标是集成 Amazon s3 以从我的 Android 应用程序**上传图像。**

我只是从[这里下载](http://aws.amazon.com/sdkforandroid)**aws-android-sdk-1.4.4**并遵循参考链接，例如，

[移动照片上传到 Amazon S3](http://aws.amazon.com/articles/3002109349624271)

[入门指南](http://docs.amazonwebservices.com/mobile/sdkforandroid/gsg/Welcome.html)

我从创建新的**Android 项目 4.1.2 版**开始，并将所有`jar files`可用的 aws **-android-sdk-1.4.4**复制到`libs`我的应用程序的文件夹中。

**问题只从这里开始，**

我正在尝试运行我的应用程序，它抛出此错误**"Conversion to Dalvik format failed with error 1"**。

**注意：**我刚刚复制`jar files`到`libs`文件夹，还`imported`没有复制到应用程序中。

**我对此有两个问题。**

1.  如何解决这个**“Conversion to Dalvik format failed with error 1”**错误？

2.  我只需要**上传图片到 Amazon S3 服务器**，所有的**jar 文件**都需要添加吗？

**编辑 ：**

以下是我使用**aws-android-sdk-1.4.4**获得的 jar 文件。

1.  aws-android-sdk-1.4.4.jar
2.  aws-android-sdk-1.4.4-autoscaling.jar
3.  aws-android-sdk-1.4.4-cloudwatch.jar
4.  aws-android-sdk-1.4.4-core.jar
5.  aws-android-sdk-1.4.4-ddb.jar
6.  aws-android-sdk-1.4.4-ddb-mapper.jar
7.  aws-android-sdk-1.4.4-ddb-mapper-debug.jar
8.  aws-android-sdk-1.4.4-debug.jar
9.  aws-android-sdk-1.4.4-ec2.jar
10.  aws-android-sdk-1.4.4-elb.jar
11.  aws-android-sdk-1.4.4-s3.jar
12.  aws-android-sdk-1.4.4-sdb.jar
13.  aws-android-sdk-1.4.4-ses.jar
14.  aws-android-sdk-1.4.4-sns.jar
15.  aws-android-sdk-1.4.4-sqs.jar
16.  aws-android-sdk-1.4.4-sts.jar

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:21:21.913

我帮助维护适用于 Android 的 AWS 开发工具包，很抱歉您遇到问题。首先关于您问题的第二部分，如[入门指南](http://docs.amazonwebservices.com/mobile/sdkforandroid/gsg/Welcome.html)中所述：

> 复制所有服务的捆绑 JAR 或您希望使用的服务的特定 JAR。您有 3 个选项：
> 
> 添加**aws-android-sdk-VERSION-debug.jar**。此 JAR 创建了最大的 APK，但允许在开发期间进行完整的堆栈跟踪。
> 
> 添加**aws-android-sdk-VERSION.jar**。在发布您的应用程序时，此 JAR 会创建一个较小的 APK 和一个简单的捆绑包。
> 
> 添加**aws-android-sdk-VERSION-core.jar**以及您的项目将使用的各个服务的 JAR。此方法创建最小的 APK，但需要更复杂的设置。
> 
> 请注意，复制捆绑的 JAR 和服务 JAR 会导致错误。

在您的情况下，这意味着使用以下 3 种设置之一：

1.  aws-android-sdk-1.4.4.jar
2.  aws-android-sdk-1.4.4-debug.jar
3.  aws-android-sdk-1.4.4-core.jar**和**aws-android-sdk-1.4.4-s3.jar

关于您的错误，如其他评论中所述：确保您没有在构建路径中包含多个 JAR 文件副本，并确保您没有复制超过必要的 AWS 开发工具包 JAR。

# javascript - 尝试使用 mongoose/mongodb-native 执行 mongodb 查询时出现 RangeError

> ID：13970162
> 
> 赞同：1
> 
> 时间：2012-12-20T10:33:46.517
> 
> 标签：javascript, node.js, mongodb

我有一个问题已经花费了我几天的时间，但我完全无法理解。我使用 node.js 并有一个 mongodb，其中的位置索引为它们的坐标。我事先验证了索引工作正常。对于一组坐标，我想找到最近的地方。以下是我尝试的方法：

```
 var Places = require(./models/places.js),
        coordFinder = require('./coordFinder.js');

    ...

    function getCoords(userId, callback) {
       coordFinder.getCoords(userId, function(err, coords) {
          if (err) {
             callback(err);
          } else {   
             callback(null, coords);
          }
       }
    }

    function getNearestPlaces(coords, callback) {
       async.forEachSeries(
          coords,
          function(coord, done) {
             Places.findOne(
                { coordinates: { $near: [ coord.lat, coord.lon ] } },
                function(err, place) {
                   // do something with place
                   done();
                }
             )
          },
          function(err) {
             callback(err ? err : null);    
          }
       );
    }

    ...

    async.waterfall(
       [
          ...
          getCoords,
          getNearestPlaces,
          ...
       ],
       function(err) {
          ...
       }
    } 
```

mongodb 查询始终失败，第一个查询出现以下错误消息：

```
RangeError: Maximum call stack size exceeded 
```

当我将查询更改`getNearestPlaces`为

```
... { $near: [ 10, 10 ] } ... 
```

我始终没有错误和正确的地方。如果我避免调用`coordFinder`in`getCoords`并更改`getCoords`为

```
function getCoords(userId, callback) {
    callback(
        null, 
        [ 
           // some coordinates
        ]
    ); 
```

我知道该错误表明堆栈溢出（增加堆栈大小没有帮助），但我不知道我是如何造成的。有谁知道为什么会发生这种情况？提前感谢您的见解！

**编辑**`mongodb-native`：顺便说一句，直接使用时遇到了同样的问题，所以`mongoose`似乎不是问题。另一个线索 - 当我不在回调中调用它时，使用相同的查询永远不会给我带来问题。这可能是错误的来源吗？

我用

*   节点.js 0.6.14
*   MongoDB 2.2.2
*   节点模块异步 0.1.22
*   节点模块 mongodb 1.2.5
*   节点模块猫鼬2.5.7

干杯，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T03:50:49.327

问题很可能来自`async.forEachSeries`. 尝试用这样的方式包装`Places.findOne`电话：`setTimeout`

```
function getNearestPlaces(coords, callback) {
   async.forEachSeries(
      coords,
      function(coord, done) {
         setTimeout(function () {
             Places.findOne(
                 { coordinates: { $near: [ coord.lat, coord.lon ] } },
                 function(err, place) {
                     // do something with place
                     done();
                 }
             );
         }, 1);
      },
      function(err) {
         callback(err ? err : null);    
      }
   );
} 
```

这会将调用置于 的`Places.findOne`调用堆栈之外`async.forEachSeries`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:47:06.707

mjhm 为我指明了正确的方向。显然，传递给 mongoose 查询的 Number 实例导致了堆栈溢出。我不知道为什么，但是从旧的数字对象创建一个新的数字对象（如 mjhm 建议的那样）或使用 valueOf() 将数字转换为原语解决了这个问题。

如果有人知道原始 Number 对象是如何导致堆栈溢出的，我将非常感谢您提供的任何见解。

# google-maps-api-3 - 使用 FusionTableMap API 访问 Fusion Table 以显示在地图中

> ID：13970168
> 
> 赞同：0
> 
> 时间：2012-12-20T10:34:12.637
> 
> 标签：google-maps-api-3, oauth, google-fusion-tables

我在 google 中创建了服务帐户以访问和上传融合表中的数据。我能够使用 OAuth 进行身份验证并将数据推送到服务帐户的融合表中。但是当我尝试使用地图中的 tableid 访问同一个表时我无法访问相同的。创建的表未显示在我的主帐户中。我在 stackoverflow 中读到了一些问题，他们谈到了给予 FT 的许可（我什至做不到）

我的代码：

`/`

 ````
*
 * Copyright (c) 2012 Google Inc.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */

package com.google.api.services.samples.fusiontables.cmdline;

import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson2.JacksonFactory;
import com.google.api.client.util.DateTime;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.Drive.Permissions;
import com.google.api.services.drive.model.Permission;
import com.google.api.services.fusiontables.Fusiontables;
import com.google.api.services.fusiontables.Fusiontables.Query.Sql;
import com.google.api.services.fusiontables.Fusiontables.Table.Delete;
import com.google.api.services.fusiontables.FusiontablesScopes;
import com.google.api.services.fusiontables.model.Column;
import com.google.api.services.fusiontables.model.Sqlresponse;
import com.google.api.services.fusiontables.model.Table;
import com.google.api.services.fusiontables.model.TableList;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import java.util.UUID;

/**
 * @author Christian Junk
 * 
 */
public class FusionTablesSample {

  /** E-mail address of the service account. */
  private static final String SERVICE_ACCOUNT_EMAIL = "XXXXXXXXXXXXXX@developer.gserviceaccount.com";

  /** Global instance of the HTTP transport. */
  private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();

  /** Global instance of the JSON factory. */
  private static final JsonFactory JSON_FACTORY = new JacksonFactory();

  private static Fusiontables fusiontables;

  /** Authorizes the installed application to access user's protected data. */
  private static Credential authorizeNew() throws Exception {

            // Build service account credential.
        GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
        .setJsonFactory(JSON_FACTORY)
        .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)

        .setServiceAccountScopes(FusiontablesScopes.FUSIONTABLES)
        .setServiceAccountPrivateKeyFromP12File(new File("key.p12"))
        .build();

       return credential;
  }

  /** Authorizes the installed application to access user's protected data. */
  private static Credential authorizeNewDrive() throws Exception {

      GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
      .setJsonFactory(JSON_FACTORY)
      .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)

      .setServiceAccountScopes(DriveScopes.DRIVE)
      .setServiceAccountPrivateKeyFromP12File(new File("key.p12"))
      .build();

     return credential;
  }

  /**
   * Insert a new permission.
   *
   * @param service Drive API service instance.
   * @param fileId ID of the file to insert permission for.
   * @param value User or group e-mail address, domain name or {@code null}
                  "default" type.
   * @param type The value "user", "group", "domain" or "default".
   * @param role The value "owner", "writer" or "reader".
   * @return The inserted permission if successful, {@code null} otherwise.
   */
  private static Permission insertPermission(Drive service, String fileId,
      String value, String type, String role) {
    Permission newPermission = new Permission();

    newPermission.setValue(value);
    newPermission.setType(type);
    newPermission.setRole(role);
   try {
       System.out.println("service"+service.permissions());
      return service.permissions().insert(fileId, newPermission).execute();
      } catch (IOException e) {
     System.out.println("An error occurred: " + e);
   }
    return null;
  }

  /** Global Drive API client. */
  private static Drive drive;

  public static void main(String[] args) {
    try {
      try {

//        System.out.println(System.getProperty("user.home"));
        // authorization
        Credential credential = authorizeNew();

        Credential credential1 = authorizeNewDrive();

        // set up global FusionTables instance
        fusiontables = new Fusiontables.Builder(
            HTTP_TRANSPORT, JSON_FACTORY, credential).setApplicationName(
            "FusionTable").build();

        // set up the global Drive instance
        drive = new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential1).setApplicationName(
            "FusionTable").build();

        System.out.println(drive.files().list());
        Permissions perms=drive.permissions();
        System.out.println(perms);

        // run commands
//        listTables();
        ArrayList<String> list=listTables("");

//       String tableId = createTable();
//        insertData(tableId);
        for(String tableid:list)
        {
            insertPermission(drive, tableid, "XXXXXXXXX@gmail.com","anyone","owner");
//          System.out.print(" permission for table id is  " + perms.list(tableid));
        showRows(tableid);
//        deleteTable(tableid);
        }
        listTables();
   //     deleteTable(tableId);
        // success!
        return;
      } catch (IOException e) {
        System.err.println(e.getMessage());
      }
    } catch (Throwable t) {
      t.printStackTrace();
    }
    System.exit(1);
  }

  /**
   * @param tableId
   * @throws IOException
   */
  private static void showRows(String tableId) throws IOException {
    View.header("Start Showing Rows From Table");

    Sql sql = fusiontables.query().sql("SELECT Text,Number,Location,Address,Date FROM " + tableId);

    try {
     Sqlresponse response= sql.execute();
     System.out.println(  response.getColumns());
   System.out.println(  response.getRows());

    } catch (IllegalArgumentException e) {
      // For google-api-services-fusiontables-v1-rev1-1.7.2-beta this exception will always
      // been thrown.
      // Please see issue 545: JSON response could not be deserialized to Sqlresponse.class
      // http://code.google.com/p/google-api-java-client/issues/detail?id=545
    }
    View.header("End Showing Rows From Table");
  }

  /** List tables for the authenticated user. */
  private static void listTables() throws IOException {
    View.header("Listing My Tables");

    // Fetch the table list
    Fusiontables.Table.List listTables = fusiontables.table().list();
    TableList tablelist = listTables.execute();

    if (tablelist.getItems() == null || tablelist.getItems().isEmpty()) {
      System.out.println("No tables found!");
      return;
    }

    for (Table table : tablelist.getItems()) {
      View.show(table);
      View.separator();
    }
  }

  private static  ArrayList<String> listTables(String a) throws IOException {
    View.header("Listing My Tables");
    ArrayList<String> rt=new ArrayList<String>();
    // Fetch the table list
    Fusiontables.Table.List listTables = fusiontables.table().list();
    TableList tablelist = listTables.execute();

    if (tablelist.getItems() == null || tablelist.getItems().isEmpty()) {
      System.out.println("No tables found!");
      return rt;
    }

    for (Table table : tablelist.getItems()) {
      rt.add(table.getTableId());
      View.show(table);
      View.separator();
    }
    return rt;
  }

  /** Create a table for the authenticated user. */
  private static String createTable() throws IOException {
    View.header("Create Sample Table");

    // Create a new table
    Table table = new Table();
    table.setName(UUID.randomUUID().toString());
    table.setIsExportable(true);

    table.setDescription("Sample Table");

    // Set columns for new table
    table.setColumns(Arrays.asList(new Column().setName("Text").setType("STRING"),
        new Column().setName("Number").setType("NUMBER"),
        new Column().setName("Location").setType("LOCATION"),
        new Column().setName("Address").setType("STRING"),
        new Column().setName("Date").setType("DATETIME")));

    // Adds a new column to the table.
    Fusiontables.Table.Insert t = fusiontables.table().insert(table);
    Table r = t.execute();

    View.show(r);

    return r.getTableId();
  }

  /** Inserts a row in the newly created table for the authenticated user. */
  private static void insertData(String tableId) throws IOException {
    Sql sql = fusiontables.query().sql("INSERT INTO " + tableId + " (Text,Number,Location,Address,Date) "
        + "VALUES (" + "'Google Inc', " + "1, " + "'22.816694,70.850418',  " + "'1600 Amphitheatre Parkway Mountain View, "
        + "CA 94043, USA','" + new DateTime(new Date()) + "')");

    try {
      sql.execute();
    } catch (IllegalArgumentException e) {
      // For google-api-services-fusiontables-v1-rev1-1.7.2-beta this exception will always
      // been thrown.
      // Please see issue 545: JSON response could not be deserialized to Sqlresponse.class
      // http://code.google.com/p/google-api-java-client/issues/detail?id=545
      e.printStackTrace();
    }
  }

  /** Deletes a table for the authenticated user. */
  private static void deleteTable(String tableId) throws IOException {
    View.header("Delete Sample Table");
    // Deletes a table
    Delete delete = fusiontables.table().delete(tableId);
    delete.execute();
  }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:59:48.090

> 我在 stackoverflow 中读到了一些问题，他们谈到了给予 FT 的许可（我什至做不到）

您的代码已经包含它。看看你的 insertPermission() 方法。复制粘贴的奇迹... :)

根据 Google Maps 文档，您只能在地图上显示以“公共”或“未列出”形式共享的融合表。来源：[https ://developers.google.com/maps/documentation/javascript/layers#FusionTablesSetup](https://developers.google.com/maps/documentation/javascript/layers#FusionTablesSetup)

要实现这一点，请使用角色“reader”在您的表上设置权限并输入“anyone”。有关更多信息和 java 示例，请参阅：[https ://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:29:05.267

Java 对我来说是希腊语……发布通用 FT Java 模块有什么意义？我在这里看不到任何 Google 地图代码，甚至看不到您尝试访问的表格 ID。使用 UI 到达您的餐桌：

https://www.google.com/fusiontables/DataSource?docid=[编码表ID]

在共享设置中，选择“在网络上公开”或“任何有链接的人”。现在应该可以通过 Google Maps javascript API 访问它了。`

# c# - 如何从 xaml.cs 在 xaml 中设置 ScaleTransform ScaleX 属性值

> ID：13970176
> 
> 赞同：1
> 
> 时间：2012-12-20T10:34:33.687
> 
> 标签：c#, windows-8, winrt-xaml

我在我的应用程序中动态更改画布背景。

`page.xaml`代码是：

```
 <Canvas x:Name="canvasBoard" Height="695" Width="1365" Grid.Row="0">
        <Canvas.Background>
            <ImageBrush Stretch="None" ImageSource="/Assets/board.png"/>
        </Canvas.Background>
        <Canvas.RenderTransform>
            <ScaleTransform ScaleX="1.0"/>
        </Canvas.RenderTransform>
    </Canvas> 
```

我想将`ScaleTransfom ScaleX`值动态更改为由 the 选择的背景，`page.xaml.cs`但我无法这样做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:39:53.687

如果您想更改`ScaleX`我认为您所要求的 from code 的值，您可以使用以下代码执行此操作`page.xaml.cs`：

```
(canvasBoard.RenderTransform as ScaleTransform).ScaleX = 10; 
```

# android - 将用作谷歌地图中标记图标的旋转可绘制对象

> ID：13970181
> 
> 赞同：4
> 
> 时间：2012-12-20T10:34:45.153
> 
> 标签：android, google-maps-markers, android-maps, android-drawable

我想从可绘制的地图（api v2）中添加标记，目前我这样做：

```
mMarkers.add(mMap.addMarker(new MarkerOptions().position(ll).icon(BitmapDescriptorFactory.fromResource(R.drawable.pin)))); 
```

现在我想在将它用作标记图标之前旋转可绘制对象。最好的方法是什么？我试过了

```
Bitmap bmpOriginal = BitmapFactory.decodeResource(this.getResources(), R.drawable.pin);
        Bitmap bmResult = Bitmap.createBitmap(bmpOriginal.getWidth(), bmpOriginal.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas tempCanvas = new Canvas(bmResult); 
        tempCanvas.rotate((float)answer.getPoints().get(i).getAzimut(), bmpOriginal.getWidth()/2, bmpOriginal.getHeight()/2);
        tempCanvas.drawBitmap(bmpOriginal, 0, 0, null);
        mMarkers.add(mMap.addMarker(new MarkerOptions().position(ll).icon(BitmapDescriptorFactory.fromBitmap(bmResult)))); 
```

但是生成的drawable奇怪地变形了。我认为必须有一个更好、更清洁的解决方案。

# search - 文档日期的 Solr 索引时间提升

> ID：13970187
> 
> 赞同：1
> 
> 时间：2012-12-20T10:35:08.047
> 
> 标签：search, solr, lucene

我正在尝试为 wiki 编制索引（使用对 wiki 数据库的直接访问）并尝试对文档日期进行负面提升（以便旧文档在结果中显示得更靠后）。有一个关于提升和相关主题的很棒的 solr-wiki 页面：

[http://wiki.apache.org/solr/SolrRelevancyFAQ](http://wiki.apache.org/solr/SolrRelevancyFAQ)

它只是说要执行以下操作：

“对较新的文档使用更大的索引时间提升”

但是如何以及在哪里？我必须更改 solr 配置的哪一部分才能使用索引时间提升？我是否必须调整 DATA 导入处理程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:13:22.033

IMO 你不应该对日期使用索引时间提升。
如果您进行索引时间提升，提升是固定存储在索引中
查询时间提升将为您提供提升的灵活性以及在运行时更改提升而无需重新索引

您可以使用[查询时间提升](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)，它将始终根据当前日期提升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:47:41.030

来自[Solr 相关性常见问题解答](http://wiki.apache.org/solr/SolrRelevancyFAQ)：

> 索引时间提升在 XML 更新消息部分中分配有可选属性“提升”。有关详细信息，请参阅 UpdateXmlMessages。

在[UpdateXmlMessages](http://wiki.apache.org/solr/UpdateXmlMessages)链接之后，您可以找到以下内容：

> “doc”上的可选属性
> 
> boost = — 默认为 1.0（有关 boost 的定义，请参见 Lucene 文档。）注意：确保为应该存储索引时间提升的任何字段启用规范（schema.xml 中的 omitNorms="false"）。
> 
> “字段”的可选属性
> 
> boost = — 默认为 1.0（有关 boost 的定义，请参见 Lucene 文档。）注意：确保为应该存储索引时间提升的任何字段启用规范（schema.xml 中的 omitNorms="false"）。

# photoshop - 在 Photoshop 中如何通过脚本转换 SmartObject？

> ID：13970188
> 
> 赞同：0
> 
> 时间：2012-12-20T10:35:07.613
> 
> 标签：photoshop, transformation, layer

这只是一个简单的问题。我需要导出 SmartObjects 的转换信息。但是一个图层似乎没有这样的属性。

# asp.net-mvc - 从视图中的不同路由调用多个控制器方法

> ID：13970189
> 
> 赞同：0
> 
> 时间：2012-12-20T10:35:13.710
> 
> 标签：asp.net-mvc

我有一个问题：

我想知道是否有办法从不同的路由在视图中调用多个控制器的方法，我将解释：

我想使用“默认”路线和我创建的新路线：

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Index", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "TranslateText",
            url: "{controller}/{action}/{stringToTranslate}/{from}/{to}",
            defaults: new { controller = "Translation", action = "TranslateText", stringToTranslate = "", from = "", to = "" }
        ); 
```

我的视图中有多个使用默认路由的项目，但我有一个使用“TranslateText”路由的项目。

我在这样的视图中调用它：

```
<legend id="UploadCVLabel" style="color: #FF6600;">@(Url.Action("TranslateText", "Translation", "Upload your CV (Drag & Drop)", "en", "de" }; ))
                    </legend> 
```

在我的控制器中，这里是方法的签名： public JsonResult TranslateText(string stringToTranslate = "", string inputLangCode = "en", string outputLangCode = "fr")

我想知道是否有办法在同一个视图中调用它们，因为如果我将“TranslateText”路由放在“默认”路由之前，它只会调用不带参数的“TranslateText”方法并返回一个空 JSON。如果我做相反的事情（“TranslateText”路由之前的“Default”），它将永远不会调用最后一个路由（“TranslateText”）。

谢谢

PS：我是 MVC 世界的新手 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:45:14.090

Url.Action() 语法有错误，请使用以下命令：

```
@(Url.Action("TranslateText", "Translation", new {stringToTranslate = "Upload your CV (Drag & Drop)", from = "en", to = "de" } )) 
```

将方法签名更改为：

```
public ActionResult TranslateText(string stringToTranslate = "", string from = "en", string to = "fr")
{
  ...
  return View(...);
} 
```

并将您的自定义路线放在 Default 之前

# windows - 似乎无法将密钥发送到调试视图

> ID：13970192
> 
> 赞同：0
> 
> 时间：2012-12-20T10:35:22.730
> 
> 标签：windows, sendkeys

在 Windows 7 上：

尝试发送“ `CTRL`- `R`-- ipadress - `RETURN`”以连接到远程调试视图。

即使 SetForeground 窗口通过任何键都不会发生任何事情。甚至 alt-f4 也无济于事。

我知道语法/外部条件应该是正确的，因为如果我切换到不同的窗口，如果我`ALT`-发送`TAB`到 debugview 它似乎仍然没有拾取键。

UAC 设置为最低级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:18:13.580

debugview 是否运行提升（以管理员身份运行）而您发送的进程没有？

即使UAC设置为低，我相信这仍然是不允许的。一个解决方案是要么运行未提升的目标进程，要么提升触发发送键的进程。

# visual-studio-2010 - 配置 ObjectDataSource：调用的目标已抛出异常

> ID：13970193
> 
> 赞同：3
> 
> 时间：2012-12-20T10:35:23.017
> 
> 标签：visual-studio-2010, exception, objectdatasource, configure

在我的 Visual Studio 2010 项目中，我试图添加一个指向我的业务服务的对象数据源，并将数据源绑定到数据网格（或数据列表，或其他）。

问题是，从工具箱中添加 ObjectDataSource 后，当我点击“配置数据源”链接打开配置向导时，我收到此错误：

> 调用配置数据源时出错 - 调用目标已抛出异常

这只发生在我的项目中（即，如果我创建一个空白项目，ObjectDataSource 配置工作正常）。

在 stackoverflow 和互联网上搜索类似的问题，我读到这个错误通常与缺少程序集有关。事实上，我的项目引用了几个 .dll，在一次又一次地检查之后，我就是看不到缺少什么。我还尝试在 Visual Studio 上启用日志记录，但它没有记录与该错误相关的任何内容。

那么：有没有办法从 Visual Studio 获得更详尽的错误消息？也许访问触发错误的“内部异常”，就像您在调试代码时所做的那样？

顺便说一句：有没有办法在不使用向导的情况下“手动”配置 ObjectDataSources？

# javascript - jQuery 文件树：文件下载

> ID：13970200
> 
> 赞同：0
> 
> 时间：2012-12-20T10:35:39.127
> 
> 标签：javascript, jquery, jsp

我正在使用 jquery 文件树 ( [http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/) ) 和 jsp 连接器版本。

所以，javascript代码是：

```
 $(function() {
     $("#container_id").fileTree({ 
       root: '/home/mio' ,
       script: '/Grafo_Filesystem-portlet/jqueryFileTree.jsp',
     }, function(file) {
       alert(file);
     });
    }); 
```

当我单击文件名时，将返回带有文件路径的警报。

相反，我想下载该文件。我能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:47:04.633

或者你可以使用跨浏览器解决方案：当一个文件被选中时，一个隐藏的 GET 表单会在另一个页面中提交（这样你就不会丢失打开文件树的实际页面）并且浏览器会负责下载文件的内容。

```
$(function() {
    $("#container_id").fileTree({ 
            root: '/home/mio' ,
            script: '/Grafo_Filesystem-portlet/jqueryFileTree.jsp',
        },
        function(file) {
            $('#hiddenForm').attr('action', file);
            $('#hiddenForm input[name="rand"]').val(Math.floor(Math.random()*1001));
            $('#hiddenForm').submit();
        }
    );
});

## HTML PART ( PUT AT THE END OF THE PAGE ) ##
<form id="hiddenForm" action="#" target="_blank" method="GET">
    <input type="hidden" name="rand" value="0" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:37:43.050

```
$(function() {
 $("#container_id").fileTree({ 
   root: '/home/mio' ,
   script: '/Grafo_Filesystem-portlet/jqueryFileTree.jsp',
 }, function(file) {
   window.location.replace(file);
 });
}); 
```

# php - 模拟本地代理

> ID：13970202
> 
> 赞同：1
> 
> 时间：2012-12-20T10:35:40.337
> 
> 标签：php, proxy, stream, localhost

我正在使用一个 PHP 脚本，它使用`stream_context`. 我需要使用代理对其进行测试。如何在我的 Mac 上模拟代理以在我的`localhost` *(我正在使用 MAMP)*上进行测试。我下载`SquidMan`了，但我不知道这是否是一个好的解决方案。

在我的脚本中，我必须写这样的东西：

```
stream_context_set_option($ctx, 'http', 'proxy', 'tcp://local-proxy:8080');
// how to create a local proxy ? 
```

谢谢

# python - 如何使用python从包含100个句子的文本文件中计算平均句子长度（以单词为单位）

> ID：13970203
> 
> 赞同：-6
> 
> 时间：2012-12-20T10:35:39.373
> 
> 标签：python, python-2.7, nlp

我有一个包含 100 个句子的文本文件。我想编写一个 python 脚本，它会从包含 100 个句子的文本文件中计算平均句子长度（以单词为单位）。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:47:54.120

天真的方式：

```
sents = text.split('.')
avg_len = sum(len(x.split()) for x in sents) / len(sents) 
```

严肃的方法：使用[nltk](http://nltk.org/)根据目标语言规则对文本进行标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:40:28.983

```
wordcounts = []
with open(filepath) as f:
    text = f.read()
    sentences = text.split('.')
    for sentence in sentences:
        words = sentence.split(' ')
        wordcounts.append(len(words))
average_wordcount = sum(wordcounts)/len(wordcounts) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:43:46.430

这应该可以帮助你。但这是基本的东西，你至少应该自己尝试一下。

此代码假定每个句子都在新行上。

如果不是这种情况，您可以更正代码，或者在您的问题中反映这一点，对此尚不清楚。

```
def read_lines_from_file(file_name):
    with open(file_name, 'r') as f:
        for line in f:
            yield line.strip()

def average_words(sentences):
    counts = []
    for sentence in sentences:
        counts.append(sentence.split())
    return float(sum(counts)/len(counts))

print average_words(read_lines_from_file(file_name)) 
```

# bash - 查找：在 bash 脚本中缺少 -exec 的参数

> ID：13970205
> 
> 赞同：0
> 
> 时间：2012-12-20T10:35:51.417
> 
> 标签：bash, shell, find

当我在命令行中准确键入以下内容时，以下内容可以正常工作：

```
find /<some_path>/{epson,epson_laser,epson_inkjet} -iname "*.ppd" 
  -exec grep "\*ModelName\:" {} \; | sed 's/.*\"\(.*\)\"/\1/' 
```

但是，当我尝试从 bash 脚本调用以下命令时，我得到`find: missing argument to -exec'`.

我还尝试了以下方法（在许多变体中）：

```
eval find "$1" -iname "*.ppd" -exec 'bash -c grep "\*ModelName\:" "$1" | sed "s/.*\"\(.*\)\"/\1/" \; 
```

如[find-exec-echo-missing-argument-to-exec](https://stackoverflow.com/questions/2961673/find-missing-argument-to-exec)中所述。我怎样才能不仅在终端中，而且在 bash 脚本中都可以使用第一个代码？

**PS：**我`eval`只用于将字符串扩展`"/<some_path>/{epson,epson_laser,epson_inkjet}"`到多个路径。有谁知道这样做的更好解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:00:16.120

如果您想对 的输出执行多个命令`find`，只需根据`-exec`需要多次使用选项：

```
find -exec command1 "{}" \; -exec command2 "{}" \; 
```

您还可以定义执行选项的条件：

```
find \( -exec command1 \; -false -o -exec command2 \; \) 
```

在你的情况下，你需要这样的东西：

```
find /<some_path>/{epson,epson_laser,epson_inkjet} -iname "*.ppd" -exec grep "\*ModelName\:" "{}" \;  sed 's/.*\"\(.*\)\"/\1/' "{}" \; 
```

# javascript - 清空标签时，里面的事件附加按钮是否会被垃圾收集？

> ID：13970209
> 
> 赞同：5
> 
> 时间：2012-12-20T10:36:06.013
> 
> 标签：javascript, jquery

有这样的代码，我想知道如果我第二次运行这个函数，会发生哪种情况：

1.  清空#deals 标签时，`btn`尽管发生了事件，但内部的所有内容也会被擦除，并且生活很美好。
2.  我必须先取消订阅`btn`，否则清空`#deals`标签会导致内存泄漏？
3.  项目清单

代码：

```
function test(){
    var row = $(this).closest('tr');  
    $(row).find('#deals').empty();

    $(result).find('#tab li a').each(function() {               
      var btn = $('<a/>', {class: 'btn', href: '#'});

      $(row).find('#deals').append(btn);

      btn.click(function(event){
          event.preventDefault();
          ...
         });
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:38:03.083

没有内存泄漏。

正如您在[jQuery 源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.empty)中看到的那样，它负责清理所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:38:10.067

您不必取消订阅：

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。

（来自[文档](http://api.jquery.com/empty/)）

# c# - 如何为给定的 sql 查询创建条件查询

> ID：13970214
> 
> 赞同：5
> 
> 时间：2012-12-20T10:36:29.987
> 
> 标签：c#, hibernate, nhibernate, fluent-nhibernate, nhibernate-criteria

我正在为这个等效的 sql 查询创建一个 ICriteria 查询。

```
SELECT fCustomerID,
       ISNULL(
                (SELECT SUM(payinv.fAmount) AS Expr1
                 FROM dbo.tARPayment AS pay
                 INNER JOIN dbo.tARPaymentInvoice AS payinv ON pay.fPaymentID = payinv.fPaymentID
                 INNER JOIN dbo.tARInvoice AS inv ON payinv.fInvoiceID = inv.fARInvoiceID
                 WHERE (pay.fIsPosted = CASE pay.fPaymentType WHEN 'CM' THEN 0 WHEN 'EPD' THEN 0 ELSE 1 END)
                   AND (inv.fCustomerID <> dbo.tARCustomer.fCustomerID)
                   AND (pay.fCustomerID = dbo.tARCustomer.fCustomerID)), 0)
FROM dbo.tARCustomer
GROUP BY fCustomerID 
```

但无论如何我都没有得到如何生成等效的休眠 ICriteria 查询。

这是支付类

```
public partial class tARPayment 
{
    #region Constructor

    /// <summary>
    /// Initializes a new instance of the <see cref="tARPayment"/> class.
    /// </summary>
    public tARPayment()
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="tARPayment"/> class.
    /// </summary>
    /// <param name="fPaymentID">The fPaymentID of guid type.</param>
    public tARPayment(System.Guid fPaymentID)
    {
        this.ID = fPaymentID;
    }
    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets payment id.
    /// </summary> 
    public virtual System.Guid fPaymentID { get; set; }

    /// <summary>
    /// Gets or sets fCustomerID.
    /// </summary> 
    public virtual System.Guid fCustomerID { get; set; }

    /// <summary>
    /// Gets or sets check number.
    /// </summary> 
    public virtual string fCheckNumber { get; set; }

    /// <summary>
    /// Gets or sets amount.
    /// </summary> 
    public virtual decimal fAmount { get; set; }       

    /// <summary>
    /// Gets or sets customer detail.
    /// </summary> 
    public virtual tARCustomer Customer { get; set; }

    public virtual IList<tARPaymentInvoice> PaymentInvoices { get; set; }        

    #endregion

    #region Methods
    /// <summary>
    /// partial class for payment.
    /// </summary>
    /// <returns>The method get code.</returns>
    public override int GetHashCode()
    {
        return ID.GetHashCode();
    }
    #endregion
} 
```

这是一个发票类

```
public partial class tARInvoice 
{
    #region Constructor
    /// <summary>
    /// Initializes a new instance of the <see cref="tARInvoice"/> class.
    /// </summary>
    public tARInvoice()
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="tARInvoice"/> class.
    /// </summary>
    /// <param name="fARInvoiceID">The fARInvoiceID.</param>
    public tARInvoice(System.Guid fARInvoiceID)
    {
        this.ID = fARInvoiceID;
    }

    #endregion

    #region Properties
    /// <summary>
    /// Gets or sets fARInvoiceID.
    /// </summary> 
    public virtual Guid fARInvoiceID { get; set; }

    /// <summary>
    /// Gets or sets fCustomerID.
    /// </summary> 
    public virtual Guid fCustomerID { get; set; }

    /// <summary>
    /// Gets or sets Delivery Method.
    /// </summary> 
    public virtual string fDeliveryMethod { get; set; }

    /// <summary>
    /// Gets or sets Invoice Number.
    /// </summary> 
    public virtual int? fARInvoiceNumber { get; set; }

    public virtual tARCustomer Customer { get; set; }

    public virtual IList<tARPaymentInvoice> PaymentInvoices { get; set; }        

    #endregion

    #region Methods
    /// <summary>
    /// retrieve Hash Code.
    /// </summary>
    /// <returns>The method get code.</returns>
    public override int GetHashCode()
    {
        return ID.GetHashCode();
    }
    #endregion
} 
```

这是一个付款发票类。

```
public partial class tARPaymentInvoice 
{
    #region Constructor
    /// <summary>
    /// Initializes a new instance of the <see cref="tARPaymentInvoice"/> class.
    /// </summary>
    public tARPaymentInvoice()
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="tARPaymentInvoice"/> class.
    /// </summary>
    /// <param name="fPaymentInvoiceID">The Invoice ID.</param>   
    public tARPaymentInvoice(System.Guid fPaymentInvoiceID)
    {
        this.ID = fPaymentInvoiceID;
    }
    #endregion

    #region Properties
    /// <summary>
    /// Gets or sets fPaymentInvoiceID.
    /// </summary>
    public virtual System.Guid fPaymentInvoiceID { get; set; }

    /// <summary>
    /// Gets or sets fPaymentID.
    /// </summary>
    public virtual System.Guid fPaymentID { get; set; }

    /// <summary>
    /// Gets or sets fInvoiceID.
    /// </summary>
    public virtual System.Guid fInvoiceID { get; set; }           

    /// <summary>
    /// Gets or sets tARPayment.
    /// </summary>
    public virtual tARPayment Payment { get; set; }

    /// <summary>
    /// Gets or sets tARInvoice.
    /// </summary>
    public virtual tARInvoice Invoice { get; set; }

    #endregion

    #region Methods
    /// <summary>
    /// get hash codes.
    /// </summary>        
    /// <returns>The hash code.</returns>
    public override int GetHashCode()
    {
        return ID.GetHashCode();
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:19:15.040

不确定 nHibernate，但是这个重写的查询是否有助于获得相同的答案，并且可以更轻松地运行？

```
SELECT T.fCustomerID,
       coalesce( SUM( payinv.fAmount ), 0 ) as SumAmt
   FROM 
      dbo.tARCustomer T
         JOIN dbo.tARPayment AS pay
            ON T.fCustomerID = pay.fCustomerID 
            AND pay.fIsPosted = CASE pay.fPaymentType 
                                WHEN 'CM' THEN 0 
                                WHEN 'EPD' THEN 0 
                                ELSE 1 END
             JOIN dbo.tARPaymentInvoice AS payinv 
               ON pay.fPaymentID = payinv.fPaymentID
               INNER JOIN dbo.tARInvoice AS inv 
                  ON payinv.fInvoiceID = inv.fARInvoiceID
                 AND inv.fCustomerID <> T.fCustomerID
   GROUP BY 
      T.fCustomerID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:37:26.287

我建议不要将上述查询转换为 LINQ 或 HQL，而是将查询转换为视图，然后使用 NHibernate 查询该视图。

**SQL**

```
CREATE VIEW vCustomerAmount AS
SELECT fCustomerID,
       ISNULL(
                (SELECT SUM(payinv.fAmount) AS Expr1
                 FROM dbo.tARPayment AS pay
                 INNER JOIN dbo.tARPaymentInvoice AS payinv ON pay.fPaymentID = payinv.fPaymentID
                 INNER JOIN dbo.tARInvoice AS inv ON payinv.fInvoiceID = inv.fARInvoiceID
                 WHERE (pay.fIsPosted = CASE pay.fPaymentType WHEN 'CM' THEN 0 WHEN 'EPD' THEN 0 ELSE 1 END)
                   AND (inv.fCustomerID <> dbo.tARCustomer.fCustomerID)
                   AND (pay.fCustomerID = dbo.tARCustomer.fCustomerID)), 0) [Amount]
FROM dbo.tARCustomer
GROUP BY fCustomerID 
```

**C# DTO**

```
public class CustomerAmount
{
    public int fCustomerID { get; set; }
    public decimal Amount { get; set; }
} 
```

**询问**

```
List<CustomerAmount> customerAmounts = session.Query<CustomerAmount>().ToList(); 
```

# android - Runtime.getRuntime().exec() 上的 Android 权限

> ID：13970217
> 
> 赞同：5
> 
> 时间：2012-12-20T10:36:36.473
> 
> 标签：android, permissions, command

我在清单上有一个具有以下权限的应用程序。我的应用程序在 Android JB 4.1.2 上运行。

**更新**：我正在尝试在 JB 上运行该应用程序，但它不起作用。它适用于早期的 API 版本。

```
<manifest xmlns...>
   <uses-permission android:name="android.permission.SET_DEBUG_APP"/> 
```

问题是当我执行这样的命令时：

```
Process proc = Runtime.getRuntime().exec("service call activity 42 s16 com.android.systemui");
    BufferedReader bufferedReader = new BufferedReader(
    new InputStreamReader(proc.getInputStream()));

    String line;
    while ((line = bufferedReader.readLine()) != null) {
        Log.e("IDSPlayer", "RESULTAT BARRA:" + line);
    } 
```

结果如下：

```
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:Result: Parcel(
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000000: ffffffff 00000064 00650050 006d0072 '....d...P.e.r.m.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000010: 00730069 00690073 006e006f 00440020 'i.s.s.i.o.n. .D.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000020: 006e0065 00610069 003a006c 00730020 'e.n.i.a.l.:. .s.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000030: 00740065 00650044 00750062 00410067 'e.t.D.e.b.u.g.A.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000040: 00700070 00290028 00660020 006f0072 'p.p.(.). .f.r.o.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000050: 0020006d 00690070 003d0064 00330032 'm. .p.i.d.=.2.3.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000060: 00370038 002c0033 00750020 00640069 '8.7.3.,. .u.i.d.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000070: 0031003d 00300030 00320037 00720020 '=.1.0.0.7.2\. .r.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000080: 00710065 00690075 00650072 00200073 'e.q.u.i.r.e.s. .'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x00000090: 006e0061 00720064 0069006f 002e0064 'a.n.d.r.o.i.d...'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x000000a0: 00650070 006d0072 00730069 00690073 'p.e.r.m.i.s.s.i.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x000000b0: 006e006f 0053002e 00540045 0044005f 'o.n...S.E.T._.D.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x000000c0: 00420045 00470055 0041005f 00500050 'E.B.U.G._.A.P.P.'
12-20 11:17:50.110: E/IDSPlayer(23840): RESULTAT BARRA:  0x000000d0: 00000000                            '....            ') 
```

这在 ICS 设备上运行良好，它需要具有 SET_DEBUG_APP 权限才能运行。即使清单上有权限，在我的新设备中也无法正常工作。

另一方面，如果我通过 ADB 执行，该命令在这个新设备中可以完美运行。

如何解决权限问题？可能是设备的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:00:49.097

至少在 Jelly Bean 中，`SET_DEBUG_APP`只能由使用固件签名密钥签名或安装在系统分区上的应用程序持有。普通 SDK 应用程序无法持有此权限。

# xcode - 如何使用 PlistBuddy 访问由其属性指定的 PreferencesSpecified 元素？

> ID：13970218
> 
> 赞同：16
> 
> 时间：2012-12-20T10:36:38.683
> 
> 标签：xcode, plist

目前我正在使用此代码

```
 /usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:1:DefaultValue $productVersion" "Test/Settings.bundle/Root.plist" 
```

在构建阶段的脚本部分，将产品版本放在应用程序设置的只读字段中。该字段具有首选项数组的位置 1（从 0 开始）。

我在问是否可以使用比 1 更健壮的东西来访问该字段，因为我或其他开发人员在开发过程中可能会意外更改位置。

无论其位置如何，我都可以访问指定其标识符的元素吗？

为了更好地解释我的需求，我写了一个例子。我需要将类似的东西`1.2.345`放入第二个`string`节点，即我需要从更改为。是否可以访问节点而不说明它是数组中的第二个？我要求在 PlistBuddy 中使用类似于 xpath 表达式的东西（如果存在的话）。`dict``array``0.0.0``1.2.345``dict`

```
<?xml version="1.0" encoding="UTF-8"?>
<dict>
<key>PreferenceSpecifiers</key>
<array>
    <dict>
        <key>Title</key>
        <string>Application info</string>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
    </dict>
    <dict>
        <key>DefaultValue</key>
        <string>0.0.0</string>
        <key>Key</key>
        <string>version</string>
        <key>Title</key>
        <string>Version</string>
        <key>Type</key>
        <string>PSTitleValueSpecifier</string>
    </dict>
    <dict>
        <key>DefaultValue</key>
        <string>0</string>
        <key>Key</key>
        <string>build</string>
        <key>Title</key>
        <string>Build</string>
        <key>Type</key>
        <string>PSTitleValueSpecifier</string>
    </dict>
         ... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-29T20:07:27.247

```
#!/bin/tcsh
set productVersion="1.2.345"
set theFile="~/Desktop/PlistBuddy/Root.plist"
set cnt=`/usr/libexec/PlistBuddy -c "Print PreferenceSpecifiers:" ${theFile} | grep "Dict"|wc -l`
# echo "the count is: $cnt."
set cnt=`expr "$cnt" '-' '1'`

foreach idx (`seq 0 $cnt`)
    # echo "the index is: $idx."
    set val=`/usr/libexec/PlistBuddy -c "Print PreferenceSpecifiers:${idx}:Title" ${theFile}`
    # echo "the value of PreferenceSpecifiers:${idx}:Title: is ${val}."

    if ( "$val" == "Version" ) then
        echo "the index of the entry whose 'Title' is 'Version' is $idx."
        # now set it
        /usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:${idx}:DefaultValue $productVersion" ${theFile}

        # just to be sure that it worked
        set ver=`/usr/libexec/PlistBuddy -c "Print PreferenceSpecifiers:${idx}:DefaultValue" ${theFile}`
        echo 'PreferenceSpecifiers:$idx:DefaultValue set to: ' $ver
    endif
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-13T10:05:59.473

对地理战争的答案有一点改进。从 Info.plist 获取产品版本。

```
#!/bin/tcsh
set infoPlist="Info.plist"
set version=`/usr/libexec/PlistBuddy -c "Print CFBundleShortVersionString" ${infoPlist}`
set bundleVersion=`/usr/libexec/PlistBuddy -c "Print CFBundleVersion" ${infoPlist}`
set productVersion=$version.$bundleVersion
# echo "the product version is ${productVersion}."

set settingsPlist="Settings.bundle/Root.plist"
set settingsCnt=`/usr/libexec/PlistBuddy -c "Print PreferenceSpecifiers:" ${settingsPlist} | grep "Dict"|wc -l`
# echo "the count is: $settingsCnt."
set settingsCnt=`expr "$settingsCnt" '-' '1'`

foreach idx (`seq 0 $settingsCnt`)
    # echo "the index is: $idx."
    set val=`/usr/libexec/PlistBuddy -c "Print PreferenceSpecifiers:${idx}:Key" ${settingsPlist}`
    # echo "the value of PreferenceSpecifiers:${idx}:Title: is ${val}."

    if ( "$val" == "version" ) then
        echo "the index of the entry whose 'Key' is 'version' is $idx."
        # now set it
        /usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:${idx}:DefaultValue $productVersion" ${settingsPlist}

        # just to be sure that it worked
        set ver=`/usr/libexec/PlistBuddy -c "Print PreferenceSpecifiers:${idx}:DefaultValue" ${settingsPlist}`
        echo 'PreferenceSpecifiers:$idx:DefaultValue set to: ' $ver
    endif
end 
```

# sql - 在 SQL Server 中查询 2 个不同值的特定列

> ID：13970226
> 
> 赞同：0
> 
> 时间：2012-12-20T10:37:27.093
> 
> 标签：sql, sql-server, sql-server-2008

我对数据库没有太多经验，所以这可能看起来很傻。

我只是不能在同一列查询 2 个不同的值。

这就是我正在尝试的：

```
where  b.idIndice = 10 and b.idIndice = 20 
```

我在此列中有两个值

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:38:42.563

你的意思是：

```
SELECT * FROM TBL b WHERE b.idIndice IN (10, 20) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:38:18.930

尝试 ：

```
WHERE b.idIndice = 10 OR b.idIndice = 20 
```

或者

```
WHERE b.idIndice IN(10, 20) 
```

一个值不能同时等于 10 和 20。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:40:02.013

用于 （）

其中 b.idIndice 在 (10,20)

参考这里

[http://www.techonthenet.com/sql/in.php](http://www.techonthenet.com/sql/in.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T10:44:42.757

```
WHERE  b.idIndice = 10 OR b.idIndice = 20 
```

# html - 在 ASP.NET 中显示与桌面固定距离的按钮

> ID：13970228
> 
> 赞同：1
> 
> 时间：2012-12-20T10:37:31.620
> 
> 标签：html, asp.net, html-table

我的 ASP.NET Web 应用程序中有一个大表，该表充当我的容器（它只有边框），我在此表中绘制所有其他内容，我有一些按钮（水平对齐），我想显示这些按钮使它们与表格底部边框的距离始终保持不变，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:50:25.947

你没有提供任何 HTML 代码，所以我想出了一些最有可能模拟你的情况的东西。这个想法是您将一个 div（此处：）`.wrapper`绝对定位在您的表格单元格（此处`td#yourTD`）中，这样它也将位于 td 的右下角。随意更改宽度和高度，`td`以便您可以看到按钮始终与底部保持相同的距离。

**现场演示**
[http://jsfiddle.net/SR2GM/1/](http://jsfiddle.net/SR2GM/1/)

**CSS**

```
#yourTD {
    border: 1px solid #000;
    height: 250px;
    width: 250px;
    position: relative;
}

.wrapper {
    position: absolute;
    bottom: 10px; /* change for another 'same distance' */
    right: 0;
    background: blue;
} 
```

**HTML**

```
<table>
    <tr>
        <td id="yourTD">
            <div class="wrapper">
                <button>button X</button>
                <button>button Y</button>
                <button>button Z</button>
            </div>
        </td>
    </tr>
</table> 
```

# c# - 将 openFileDialog1.FileName 保存到 Properties.Settings

> ID：13970230
> 
> 赞同：0
> 
> 时间：2012-12-20T10:37:35.070
> 
> 标签：c#

我有具有下一个结构的 WFA：

```
using System;
using System.Collections.Generic;
using System.­­­­ComponentModel;
using Sy­­­­stem.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using WindowsFormsApplication1.Properties;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        List<string> urls = new List<string>();
        private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.InitialDirectory = System.Environment.CurrentDirectory;
            openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                urls.Clear();
                foreach (string url in File.ReadAllLines(openFileDialog1.FileName))
                    urls.Add(url);
                label2.Text = urls.Count.ToString();
            }
        }

        List<string> links = new List<string>();
        private void open2FileToolStripMenuItem_Click(object sender, EventArgs e)
        {
            OpenFileDialog open­­­­FileDialog1 = new OpenFileDialog();
            openFileDialog1.InitialDirectory = System.Environment.CurrentDirectory;
            openFile­­­­Dialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                links.Clear();
                foreach (string link in File.ReadAllLines(openFileDialog1.FileName))
                    links.Add(link);
                label4.Text = links.Count.ToString();
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            Settings.Default.Save();
        }
    }
} 
```

设计画面：

[http://screenshotuploader.com/i/01/k0tpbijza.png](http://screenshotuploader.com/i/01/k0tpbijza.png)

我需要将在 openFileDialog 中打开的文件路径保存到propeties.settings。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:41:17.177

您需要将 设置`RestoreDirectory`为 true 以及`InitialDirectory`属性。

有关该主题的更多信息：[设置 SaveFileDialog 的初始目录？](https://stackoverflow.com/questions/1175242/setting-the-initial-directory-of-an-savefiledialog)

# php - 将正确的区域插入 MySQL 数据库并返回

> ID：13970235
> 
> 赞同：0
> 
> 时间：2012-12-20T10:37:50.993
> 
> 标签：php, mysql, arrays, html, textarea

我有 html (php) 格式的表单。此表单包括文本区域，用于将来自交换机、路由器等的日志保存到数据库。
终端的命令行通常有 80 个列（在线字节），所以我将属性列设置为 80。

```
<tr>
  <td><label for="taskText">Text:</label> </td>
  <td><textarea name="taskText" id="taskText" cols="80" rows="10" required></textarea></td> 
</tr> 
```

**动机**：我为什么要这样做？我在数据库中有一个表，它有这个列 id (INT-autoincrement)、log1(TEXT)、log2(TEXT)。

用户将两个日志保存到数据库中，然后我从数据库中获取它们并将 log1 保存到字段 $log1 并将 log2 保存到字段 $log2，其中 $log1 将是数组，其中键将是行。
例如：`

```
$log1[0]="line1";
$log1[1]="line2";
$log1[2]="line3";` 
```

**问题：**所以问题是将日志文本复制到textarea，然后将其正确保存到数据库（MYSQL）到TEXT类型的字段（我选择了这个希望很好）并保留了行尾（不知何故），然后加载从数据库到数组的日志，其中每个键都是一行（例如现在没有行尾标记的示例）。
**我的解决方案**：
在保存到数据库之前使用函数 nl2br 并在从数据库加载期间使用函数爆炸：

```
$log1=explode("<br />", $stringWithLogLoadedFromDatabase); 
```

但我不确定这是否是一个好的解决方案。还有其他想法吗？

**注意：**
我在那里写了我的解决方案的一些背景，但主要问题只是输入文本（日志）的行尾，我将其复制到文本区域并保存到数据库中。所以我现在需要知道原来的行尾在哪里才能使用这些行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:45:15.227

您可以尝试以下方法，

在字符串上使用`htmlspecialchars()`以放入数据库，然后在将其拉出时使用`htmlspecialchars_decode()`.

这两个可能会根据您的查询进行输出。

# qt - 如何更改音频 AVPacket 的音量

> ID：13970236
> 
> 赞同：1
> 
> 时间：2012-12-20T10:37:50.867
> 
> 标签：qt, ffmpeg

我有一个基于 Qt 的桌面应用程序，它从网络获取声音流并使用`QAudioOutput`. 我想为用户提供音量控制，以便他可以降低音量。我的代码如下所示：

```
float volume_control = get_user_pref(); // user provided volume level {0.0,1.0}

for (;;) {
    AVPacket *retrieved_pkt = get_decoded_packet_stream();  // from network stream

    AVPacket *work_pkt
       = change_volume(retrieved_pkt, volume_control); // this is what I need

    // remaining code to play the work_pkt ...
} 
```

我如何实现`change_volume()`或有什么现成的功能可以使用？

编辑：根据评论中的要求添加编解码器相关信息

```
QAudioFormat format;
format.setFrequency(44100);
format.setChannels(2);
format.setSampleSize(16);
format.setCodec("audio/pcm");
format.setByteOrder(QAudioFormat::LittleEndian);
format.setSampleType(QAudioFormat::SignedInt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:43:33.010

下面的代码工作得很好。

```
// audio_buffer is a byte array of size data_size 
// volume_level is a float between 0 (silent) and 1 (original volume)

int16_t * pcm_data  = (int16_t*)(audio_buffer);
int32_t pcmval;
for (int ii = 0; ii < (data_size / 2); ii++) {   // 16 bit, hence divided by 2
    pcmval = pcm_data[ii] * volume_level ;
    pcm_data[ii] = pcmval;
} 
```

编辑：我认为这里有很大的优化范围，因为我的解决方案是计算密集型的。我想`avcodec_decode_audio()`可以用来加速它。

# ibm-mq - 模拟在本地可以，但在服务器上不行

> ID：13970239
> 
> 赞同：1
> 
> 时间：2012-12-20T10:37:56.790
> 
> 标签：ibm-mq, impersonation

*我认为*冒名顶替有问题，但我可能弄错了。

我有一个 IBM XMS 消费者，正在使用队列中的数据。工作正常。为了获得对队列的访问权限，服务需要以特定用户身份运行，为此我实现了 .Net 模拟。在我能够让队列运行的所有系统上，当需要重新启动时就会出现问题。

为了测试重启，我放置了一个简单的**if(messages == 500) throw...**触发取消、断开连接和重新连接。

我将该应用程序作为 Windows 服务安装到我的本地计算机上，它连接（使用模拟）、达到 500、抛出、断开连接、重新连接并继续处理消息。但是，当我在我们的服务器上运行相同的代码时，它在尝试创建队列连接时失败。这是错误：

> 7765 [20] 错误 SIS（空） - 无法连接到 Websphere MQ IBM.XMS.XMSException：CWSMQ0006E：在调用 ConnectionFactory.CreateConnection 方法期间收到异常：System.ComponentModel.Win32Exception（0x80004005）：访问被拒绝
> 在 System.Diagnostics.ProcessManager.OpenProcess(Int32 processId, Int32 access, Boolean throwIfExited) 在 System.Diagnostics.NtProcessManager.GetModuleInfos(Int32 processId, Boolean firstModuleOnly) 在 System.Diagnostics.ProcessManager.GetModuleInfos(Int32 processId)
> 在 System.Diagnostics。 Process.get_Modules() 在 IBM.WMQ.CommonServices.TraceEnvironment() 在 IBM.WMQ.CommonServices.CreateCommonServices() 在 IBM.WMQ.CommonServices.TraceEnabled() 在 IBM.WMQ.MQBase..ctor()
> 在 IBM.WMQ.Nmqi.Phconn..ctor(NmqiEnvironment env) 在 IBM.WMQ.Nmqi.NmqiEnvironment.NewPhconn() 在 IBM.XMS.Client.WMQ.WmqConnection..ctor(NmqiEnvironment nmqiEnv, NmqiMQ nmqiMQ, XmsPropertyContext connectProps)在 IBM.XMS.Client.WMQ.Factories.WmqConnectionFactory.CreateV7ProviderConnection(XmsPropertyContext connectionProps)。在执行指定方法期间，另一个组件引发了异常。有关详细信息，请参阅链接的异常。在 IBM.XMS.Client.WMQ.Factories.WmqConnectionFactory.CreateProviderConnection(XmsPropertyContext connectionProps) 在 IBM.XMS.Client.Impl.XmsConnectionFactoryImpl.CreateConnection(String userID, String password) 在 IBM.XMS.Client.Impl.XmsConnectionFactoryImpl.CreateConnection( ) 在 Spin.TradingServices.DataAcquisition.Domain.DataProcessing.SIS。
> 
> 链接异常： System.ComponentModel.Win32Exception (0x80004005): 访问在 System.Diagnostics.NtProcessManager.GetModuleInfos(Int32 processId, Boolean firstModuleOnly) 在 System.Diagnostics.ProcessManager.OpenProcess(Int32 processId, Int32 access, Boolean throwIfExited) 被拒绝.Diagnostics.ProcessManager.GetModuleInfos(Int32 processId)
> 在 System.Diagnostics.Process.get_Modules() 在 IBM.WMQ.CommonServices.TraceEnvironment() 在 IBM.WMQ.CommonServices.CreateCommonServices() 在 IBM.WMQ.CommonServices.TraceEnabled()在 IBM.WMQ.MQBase..ctor()
> 在 IBM.WMQ.Nmqi.Phconn..ctor(NmqiEnvironment env) 在 IBM.WMQ.Nmqi.NmqiEnvironment.NewPhconn() 在 IBM.XMS.Client.WMQ.WmqConnection..ctor(NmqiEnvironment nmqiEnv, NmqiMQ nmqiMQ, XmsPropertyContext connectProps)在 IBM.XMS.Client.WMQ.Factories.WmqConnectionFactory.CreateV7ProviderConnection(XmsPropertyContext connectionProps)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:22:25.017

看起来被模拟的用户 ID 没有足够的权限并且 XMS 没有问题。

这是一个可能对您有帮助的链接。

[在 System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo) 拒绝访问](https://stackoverflow.com/questions/6314173/access-is-denied-at-system-diagnostics-process-startwithcreateprocessprocesssta)

[这](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/50a69129-5cc0-41f9-b83b-6b28a302a29d)也是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T15:21:16.090

在 IBM 站点上似乎有针对此错误的修复程序：

[http://www-01.ibm.com/support/docview.wss?uid=swg1IC90674](http://www-01.ibm.com/support/docview.wss?uid=swg1IC90674)

（如果 URL 不再可用，请使用 Wayback Machine [https://archive.org/web/ ）](https://archive.org/web/)

他们还说有一个本地修复：

> 授予模拟用户“查询进程信息和读取进程虚拟内存”权限，以便 OpenProcess 成功。

# java - Lucene：索引过程中如何获取实时索引信息？（索引大小和术语计数）

> ID：13970240
> 
> 赞同：2
> 
> 时间：2012-12-20T10:37:57.717
> 
> 标签：java, lucene

我想在索引过程中实时获取Lucene的索引信息。所以我在我的代码中使用了 CheckIndex 类，如下：

```
CheckIndex.Status indexStatus = checkIndex.checkIndex();
Iterator<CheckIndex.Status.SegmentInfoStatus> iterator = indexStatus.segmentInfos.iterator();
CheckIndex.Status.SegmentInfoStatus temp = null;
while(iterator.hasNext()) {
    temp = iterator.next();
    term_number += temp.termIndexStatus.termCount;
    index_MB_size += temp.sizeMB;
} 
```

起初，索引文件夹是空的。每次 Lucene 完成对文本文件的索引（每个大约 10MB，大约 600MB）时，`term_number`我都会输出。`index_MB_size`所以我得到了大约 60 对结果。但是我很伤心地发现60对中的2个变量始终为0。只有当索引段结束时，统计信息才会显示非零结果。

我猜这是因为 CheckIndex 类只能在索引完成后才能正常工作。但我没有检查。

如何实时获取信息？另外，CheckIndex这个过程真的很耗时，有没有其他更好的方法来获取这两个方面的信息（索引大小和词条数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:47:08.507

***我终于在Lucene In Action 2nd Edition***一书中找到了答案。

这是因为只有在方法被调用`IndexReader`后`CheckIndex`才能看到索引的变化。*Commit与**Flush*非常不同，因为*flush*只会将所有缓冲的数据刷新到磁盘，而会先*刷新*，然后使所有更改对.`commit()``IndexWriter`***`Commit`*`IndexReader`****

# php - 是否可以在 PHP 接口中定义具有不同参数的方法？

> ID：13970242
> 
> 赞同：13
> 
> 时间：2012-12-20T10:38:05.590
> 
> 标签：php, interface, dependency-injection

我正在开发一个正在注入 Logger 对象的服务，但我可以拥有 2 种不同类型的记录器，我计划拥有一个 syslog 记录器和一个队列消息系统记录器。这可能吗？

这个想法是有一个接口：

```
interface Loggable
{
    public function log() ;
} 
```

和 2 个实现该接口的类：

```
class Syslogger implements Loggable
{
    public function log()
    {
        ...
    }
}

class QMSLogger implements Loggable
{
    public function log($queueName)
    {
        ...
    }
} 
```

我能想到的唯一方法是将数组作为参数并在一个类上使用它而不在另一个类上使用......但这有点臭：P

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-13T19:45:18.117

你问是否有可能：是的，但是……</p>

如果你实现一个接口，你**必须尊重它的契约**。

```
interface Loggable
{
    public function log();
} 
```

这个接口的约定是**你可以`log()`在没有任何参数**的情况下调用。

为了尊重这一点，您可以将参数设为可选：

```
class QMSLogger implements Loggable
{
    public function log($queueName = null)
    {
        ...
    }
} 
```

这是[完全有效的 PHP](https://3v4l.org/lUclv)，它尊重 Liskov 替换原则。当然，**在对 interface 进行编码时，您不能使用该可选参数**，否则您显然会破坏 interface。这样的参数只有在您使用实现时才有用（例如，在与`QMSLogger`.

但是，这可能不是您的问题的解决方案，因为它`$queueName`似乎是一个配置值，最好将它传递给类的构造函数（如另一个答案中所述）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-20T10:46:51.003

如评论中所述，这不是*同一个界面*。如果您无法在所有可能的记录器实现中通用接口，请将配置差异作为实例构造函数的一部分：

```
class QMSLogger implements Loggable {

    protected $queueName;

    public function __construct($queueName) {
        $this->queueName = $queueName;
    }

    public function log() {
        ...
    }

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-24T18:28:42.470

我遇到了一个类似的情况，我想创建一个接口，它只是确保实现它的任何类都有一个同名的方法，但允许使用不同的参数实现。

```
/**
 * Interface Loggable
 * @method log
 */
interface Loggable
{

} 
```

现在 Loggable 接口可以用不同的参数来实现，就像这样。

```
class Syslogger implements Loggable
{
    public function log($key, $value)
    {
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-07T13:32:25.057

您也可以将参数作为数组传递，这样您一方面尊重合同，还可以灵活地在数组内插入任何数量的任何值，检查一下：

```
abstract class FeaturesAbstract
{
    /**
     * @param array $paramsArray
     *
     * @return mixed
     */
    abstract public function addExecute($paramsArray);
} 
```

要实际使用此方法，您可以发送如下参数：

```
$this->abstract->addExecute(array('paramA' => $paramA, 'paramB' =>  $paramB)); 
```

然后在具体实现中，您将获得如下参数：

```
 /**
     * @param array $paramsArray
     *
     * @return void
     */
    public function addExecute($paramsArray) 
    {
        $a = $paramsArray['paramA'];
        $b = $paramsArray['paramB'];
        $c = ...
    } 
```

祝你好运 ：）

# php - 如何通过 post 请求将 C++ 数据发送到 PHP 以及允许发送什么？

> ID：13970248
> 
> 赞同：1
> 
> 时间：2012-12-20T10:38:29.630
> 
> 标签：php, c++, http-post

好的，所以我得到了一个游戏，它需要使用 post 请求将一些东西从 C++ 发送到 PHP 页面。

我的问题是：
如何发送发布请求？我可以向 PHP 发送什么样的数据？（只是字符串和整数还是整个集合？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:43:01.913

> 如何发送发布请求？

这通常使用 HTTP 库来完成。我自己没有在 C++ 中使用过，但 cURL 在各个平台上都很流行，并且具有 [C++ 绑定][1]（尽管目前文档似乎正在迁移）。

[这个问题](https://stackoverflow.com/questions/1011339/how-do-you-make-a-http-request-with-c)有更多关于这个主题的信息。

> 我可以向 PHP 发送什么样的数据？

几乎任何你喜欢的数据——但它必须是一种数据格式，而不是一种数据结构。如果要发送集合，则需要将其序列化为某种格式。JSON 是一种流行的格式。二进制数据可以使用 base64 进行编码。

如果您确实使用 JSON，您可以添加第二层编码来发送它`application/x-www-form-urlencoded`并通过它访问原始 JSON，`$_POST`或者您可以将 JSON 作为 POST 请求的整个主体并 在 PHP[中获取帖子的主体。](https://stackoverflow.com/questions/8945879/how-to-get-body-of-a-post-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:43:35.080

您说您通过 POST 请求发送的事实告诉我您正在使用 HTTP 服务器来服务您的 PHP 脚本。在这种情况下，您需要一个允许您发送 HTTP 请求的库。一个非常流行的选择是[libcURL](http://curl.haxx.se/libcurl/)。你能寄什么？您可以发送 HTTP 请求允许您发送的任何内容。所以你喜欢什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:44:21.407

您可以使用 JSON 或 SOAP 来发送数据。当传递少量数据时，首选 JSON。[有关JSON/SOAP](https://stackoverflow.com/questions/1237649/json-or-soap-xml)的更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:45:01.780

要构建 HTTP 请求，请考虑使用[libcurl](http://curl.haxx.se/libcurl/)并最终使用其 c++ 包装器[curlpp](http://curlpp.org/)

您可以将任何您想要的内容发送到 php，但不要忘记来自 HTTP 的所有数据都将是 php 的字符串。`intval()`PHP 可以使用or转换为 int 之类的类型，`(int)`但二进制数据处理起来会更复杂。

考虑使用 json 和 REST 等标准来构建健壮的通信。

# blender - 在 Blender 2.65 BGE 中创建 PyOpenCL 上下文

> ID：13970249
> 
> 赞同：2
> 
> 时间：2012-12-20T10:38:30.787
> 
> 标签：blender, pyopencl

如何使用 gl interop 在 Blender BGE (python3.3) 中创建上下文？当我用这种方式

```
from OpenGL import platform as gl_platform
        ctx_props = cl.context_properties
        props = []
        if sys.platform == "linux":
            from OpenGL import GLX
            props.append((ctx_props.PLATFORM, self.platform))
            props.append((ctx_props.GL_CONTEXT_KHR, GLX.glXGetCurrentContext()))
            props.append((ctx_props.GLX_DISPLAY_KHR, GLX.glXGetCurrentDisplay()))
        elif sys.platform == "win32":
            from OpenGL import WGL
            props.append((ctx_props.PLATFORM, self.platform))
            props.append((ctx_props.GL_CONTEXT_KHR, gl_platform.GetCurrentContext()))
            props.append((ctx_props.WGL_HDC_KHR, WGL.wglGetCurrentDC()))
        elif sys.platform == "darwin":
            props.append((ctx_props.CONTEXT_PROPERTY_USE_CGL_SHAREGROUP_APPLE, cl.get_apple_cgl_share_group()))

if sys.platform == "darwin":
            ctx = cl.Context(properties=props, devices=[])
        else:
            try:
                ctx = cl.Context(properties=props)
            except:
                ctx = cl.Context(properties=props, devices = [device]) 
```

搅拌机崩溃了。我使用 Blender 2.65 & pyopencl form git。Ubuntu 12.10。

# android - 标题中带有复选框的自定义对话框

> ID：13970250
> 
> 赞同：4
> 
> 时间：2012-12-20T10:38:31.393
> 
> 标签：android, android-dialogfragment

我正在尝试通过 DialogFragment 创建自定义对话框。我想要一个标题和一个复选框。

我通过使用自定义标题来做到这一点，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="5dp" >

    <TextView
        android:id="@+id/textView1"
        style="?android:attr/textAppearanceLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:paddingLeft="15dp"
        android:text="Categories"
        android:textColor="#ffffff"
        android:textSize="22sp" />

    <TextView
        android:id="@+id/all"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="All"
        android:textColor="#ffffff" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:paddingRight="10dp"/>

</LinearLayout> 
```

现在我想引用这个复选框并向复选框添加一个侦听器。

我想实现这样的目标

![在此处输入图像描述](../Images/ccc227a3c3caa0fae8bd2f31042cc714.png)

我试过什么？

```
public class CategoriesDialogFragment extends SherlockDialogFragment {

    ListView dialog_ListView;
    static CheckBox chk_all;
    static SelectViewHolder viewHolder;

    private static ArrayAdapter<mItems> listAdapter;
    static ArrayList<String> checked = new ArrayList<String>();

    protected static CharSequence[] _categories = { "Amusement Park",
            "Bird Sanctuary", "Wild Life", "River", "Hill Station", "Temple",
            "Rafting", "Fishing", "Hiking", "Museums" };

    protected static boolean[] _selections = new boolean[_categories.length];
    PlacesListAdapter adapter;
    ListView listView;
    Button dialog_ok;

    static int TAG = 0;
    static mItems categories;

    static mItems orig;

    public static CategoriesDialogFragment newInstance(int title) {
        CategoriesDialogFragment frag = new CategoriesDialogFragment();
        Bundle args = new Bundle();
        args.putInt("title", title);
        frag.setArguments(args);
        return frag;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Dialog dialog = new Dialog(MainActivity.context);
        //dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setTitle("Categories");
        dialog.setContentView(R.layout.dialog);
        dialog_ok = (Button) dialog.findViewById(R.id.button_category_ok);

        dialog_ok.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog_ListView = (ListView) dialog.findViewById(R.id.listViewDialog);

        dialog_ListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener() {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id) {
                        categories = listAdapter.getItem(position);

                        orig = listAdapter.getItem(position);

                        categories.toggleChecked();

                        viewHolder = (SelectViewHolder) item.getTag();
                        viewHolder.getCheckBox().setChecked(
                                categories.isChecked());

                        if (!viewHolder.getCheckBox().isChecked()) {
                            TAG = 1;
                            chk_all.setChecked(false);

                        }
                        TAG = 0;

                        /*
                         * if (viewHolder.getCheckBox().isChecked()) {
                         * 
                         * TAG = 0; }
                         */

                        for (int i = 0; i < _categories.length; i++) {
                            categories = listAdapter.getItem(i);
                            if (!categories.isChecked()) {
                                break;
                            }

                            if (i == _categories.length - 1) {
                                TAG = 1;
                                chk_all.setChecked(true);
                                TAG = 0;
                            }
                        }
                    }
                });

        chk_all = (CheckBox) dialog.findViewById(R.id.checkBoxAll);
        chk_all.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                if (TAG != 1) {
                    if (isChecked) {
                        for (int i = 0; i < listAdapter.getCount(); i++) {
                            categories = listAdapter.getItem(i);
                            categories.setChecked(true);
                        }
                        listAdapter.notifyDataSetChanged();
                    } else {
                        for (int i = 0; i < listAdapter.getCount(); i++) {
                            categories = listAdapter.getItem(i);
                            categories.setChecked(false);
                        }
                        listAdapter.notifyDataSetChanged();
                    }
                }
                if (TAG == 1) {
                    TAG = 0;
                }
            }
        });

        // itemss = (mItems[]) onRetainNonConfigurationInstance();
        ArrayList<mItems> CategoryList = new ArrayList<mItems>();

        CategoryList.add(new mItems("Amusement Park"));
        CategoryList.add(new mItems("Bird Sanctuary"));
        CategoryList.add(new mItems("Wild Life"));
        CategoryList.add(new mItems("River"));
        CategoryList.add(new mItems("Hill Station"));
        CategoryList.add(new mItems("Temple"));
        CategoryList.add(new mItems("Rafting"));
        CategoryList.add(new mItems("Fishing"));
        CategoryList.add(new mItems("Hiking"));
        CategoryList.add(new mItems("Museums"));

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new SelectArralAdapter(MainActivity.context, CategoryList);
        dialog_ListView.setAdapter(listAdapter);

        return dialog;

    }

    private static class SelectArralAdapter extends ArrayAdapter<mItems> {
        private LayoutInflater inflater;

        public SelectArralAdapter(Context context, List<mItems> planetList) {
            super(context, R.layout.dialog_row, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each
            // time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // Planet to display
            mItems planet = (mItems) this.getItem(position);

            // The child views in each row.
            CheckBox checkBox;
            TextView textView;

            // Create a new row view
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.dialog_row, null);

                // Find the child views.
                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);
                // Optimization: Tag the row with it's child views, so we
                // don't
                // have to
                // call findViewById() later when we reuse the row.
                convertView.setTag(new SelectViewHolder(textView, checkBox));
                // If CheckBox is toggled, update the planet it is tagged
                // with.
                checkBox.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        System.out.println("uffff");
                        CheckBox cb = (CheckBox) v;
                        mItems row_view = (mItems) cb.getTag();
                        row_view.setChecked(cb.isChecked());

                        TAG = 1;
                        chk_all.setChecked(false);
                        TAG = 0;

                        for (int i = 0; i < _categories.length; i++) {
                            row_view = listAdapter.getItem(i);
                            if (!row_view.isChecked()) {
                                break;
                            }

                            if (i == _categories.length - 1) {
                                TAG = 1;
                                chk_all.setChecked(true);
                                TAG = 0;
                            }
                        }
                    }
                });

            }
            // Reuse existing row view
            else {
                // Because we use a ViewHolder, we avoid having to call
                // findViewById().
                SelectViewHolder viewHolder = (SelectViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we
            // can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);
            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());
            return convertView;
        }
    }
} 
```

![在此处输入图像描述](../Images/8d39ef103be86782e008ea4478ce9f1d.png)

我不确定我们如何为自定义对话框包含 setCustomTitle 布局

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:26:13.080

> 现在我想引用这个复选框并向复选框添加一个侦听器。

我假设您使用`DialogFragment`'`onCreateDialog`方法显示对话框，因此在`onCreateDialog`您将执行的方法中：

```
// inflate the layout title
View customTitle = inflater.inflate(R.layout.custom_title, null);
// find the CheckBox and set the listener
CheckBox ckb = (CheckBox) customTitle.findViewById(R.id.checkBox1);
ckb.setOnCheckedChangeListener(new ...);
// set the title view on the dialog etc 
```

# tridion - 在 tridion2011 事件中从 IdentifiableObject 获取出版物“标题”

> ID：13970251
> 
> 赞同：10
> 
> 时间：2012-12-20T10:38:38.443
> 
> 标签：tridion, tridion-2011

我有一个 Tridion.ContentManager.IdentifiableObject 可能是一个页面/组件等，我希望获得它所属的出版物的标题。

我目前能够像这样获得publicationId：

```
IdentifiableObject.Id.PublicationId 
```

但我希望在不往返 tridion 的情况下获得出版物标题。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T10:46:22.347

有可能的。首先将您的对象转换`RepositoryLocalObject`为`IdentifiableObject`，然后您可以执行以下操作：

```
var item = (RepositoryLocalObject) subject;
item.OwningRepository.Title; 
```

# asp.net - 在 ASP.NET MVC 中将 ActionResults 处理为可缓存的“静态内容”（4）

> ID：13970253
> 
> 赞同：0
> 
> 时间：2012-12-20T10:38:42.820
> 
> 标签：asp.net, asp.net-mvc, caching, http-caching

我有几个`ActionMethods`从数据库返回的内容不经常更改（例如：可用 ZIP 区域的多边形列表，以 json 形式返回；每年更改两次）。

我知道，有`[OutputCache(...)]`属性，但这有一些缺点（长时间客户端缓存不好；如果服务器/iis/进程重新启动，服务器端缓存也会停止）

我想要的是，MVC 将结果存储在文件系统中，计算哈希，如果哈希没有改变 - 它返回一个 HTTP 状态代码 304 --> 就像默认情况下对图像所做的那样。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:25:33.840

我认为尝试在文件系统上缓存数据是个坏主意，因为：

1.  从文件系统读取数据不会比从数据库中读取数据快得多，即使您已经拥有 json 格式的数据。
2.  您将添加大量逻辑来计算和比较哈希。也可以从文件中读取数据。这意味着新的错误，更多的复杂性。

如果我是你，我会尽可能简单。将数据存储在 Application 容器中。是的，每次应用程序启动时您都必须重新加载它，但这根本不是问题，因为应用程序不应该经常重新启动。如果你有一个网络农场，也可以考虑使用一些分布式缓存，比如 App Fabric，以免在不同服务器上的应用程序容器中产生不同的数据。

还有一个重要的注意事项。缓存意味着真正的快速访问，您无法使用文件系统或数据库存储来实现它，这是您应该考虑的内存存储。

# objective-c - 如果我删除 cache.db 或 application.db 会发生什么

> ID：13970255
> 
> 赞同：1
> 
> 时间：2012-12-20T10:38:49.920
> 
> 标签：objective-c, ios, nsurlconnection, nscache

我注意到所有第一个 xml 服务请求（我正在使用 sendsynchronous）都被缓存在库文件夹的 cache.db 中。

在启动应用程序之后和之前删除 cache.db 文件有什么影响？

# c# - 将字符串转换为枚举

> ID：13970257
> 
> 赞同：75
> 
> 时间：2012-12-20T10:39:05.957
> 
> 标签：c#, string, casting, enums

我正在读取文件内容并在这样的确切位置获取字符串

```
 string fileContentMessage = File.ReadAllText(filename).Substring(411, 3); 
```

输出将始终是`Ok`或`Err`

另一方面，我有`MyObject`这样`ContentEnum`的

```
public class MyObject

    {
      public enum ContentEnum { Ok = 1, Err = 2 };        
      public ContentEnum Content { get; set; }
    } 
```

现在，在客户端我想使用这样的代码（将我的字符串`fileContentMessage`转换为`Content`属性）

```
string fileContentMessage = File.ReadAllText(filename).Substring(411, 3);

    MyObject myObj = new MyObject ()
    {
       Content = /// ///,
    }; 
```

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-12-20T10:40:14.650

使用[`Enum.Parse()`](http://msdn.microsoft.com/en-us/library/essfb559.aspx).

```
var content = (ContentEnum)Enum.Parse(typeof(ContentEnum), fileContentMessage); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-20T10:47:22.813

另外，您可以获取`Enum.Parse`已经提供的答案并将它们放在帮助程序类中易于使用的静态方法中。

```
public static T ParseEnum<T>(string value)
{
    return (T)Enum.Parse(typeof(T), value, ignoreCase: true);
} 
```

并像这样使用它：

```
{
   Content = ParseEnum<ContentEnum>(fileContentMessage);
}; 
```

如果您有很多（不同的）枚举要解析，则特别有用。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-20T11:00:02.517

.NET 4.0+ 有一个通用的[Enum.TryParse](http://msdn.microsoft.com/en-us/library/dd783499%28v=vs.100%29.aspx)

```
ContentEnum content;
Enum.TryParse(fileContentMessage, out content); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-12-20T10:41:10.530

看看使用类似的东西

[枚举.TryParse](http://msdn.microsoft.com/en-us/library/dd991317.aspx)

> 将一个或多个枚举常量的名称或数值的字符串表示形式转换为等效的枚举对象。参数指定操作是否区分大小写。返回值表示转换是否成功。

或者

[枚举解析](http://msdn.microsoft.com/en-us/library/essfb559.aspx)

> 将一个或多个枚举常量的名称或数值的字符串表示形式转换为等效的枚举对象。

# mysql - 如何更改mysql中的存储过程

> ID：13970258
> 
> 赞同：18
> 
> 时间：2012-12-20T10:39:05.247
> 
> 标签：mysql

如何更改*Mysql*中**的存储过程**。

 *```
DROP PROCEDURE IF EXISTS sp_Country_UPDATE; 
CREATE PROCEDURE sp_Country_UPDATE 
  ( IN p_CountryId int, 
    IN p_CountryName nvarchar(25), 
    IN p_CountryDescription nvarchar(25), 
    IN p_IsActive bit, 
    IN p_IsDeleted bit ) 
  UPDATE 
    Country 
  SET 
    CountryName = p_CountryName , 
    CountryDescription=p_CountryDescription, 
    IsActive= p_IsActive, 
    IsDeleted=p_IsDeleted 
  WHERE 
    CountryId = p_CountryId ; 
```

如何更改此存储过程？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-03-03T10:09:54.647

如果您的意思是要编辑过程，那么您不能根据 MySQL 文档：

> 此语句可用于更改存储过程的特性。在 ALTER PROCEDURE 语句中可以指定多个更改。**但是，您不能使用此语句更改存储过程的参数或主体；要进行此类更改，您必须使用 DROP PROCEDURE 和 CREATE PROCEDURE 删除并重新创建过程。**

`Alter`语法允许您更改“特征”，但不能更改实际过程本身

[http://dev.mysql.com/doc/refman/5.0/en/alter-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/alter-procedure.html)

这是一个创建、更改（评论）然后删除并重新创建的示例：

```
DROP PROCEDURE myFunc;

DELIMITER //

CREATE PROCEDURE myFunc ()
COMMENT 'test'
BEGIN
SELECT 5;
END //

DELIMITER ;

ALTER PROCEDURE myFunc
COMMENT 'new comment';

CALL myFunc();

DROP PROCEDURE myFunc;

DELIMITER //

CREATE PROCEDURE myFunc ()
COMMENT 'last time'
BEGIN
SELECT 6;
END //

DELIMITER ;

CALL myFunc(); 
```

上述`CALL myFunc()`语句将返回 5，然后返回 6。

查看存储过程将显示“测试”、“新评论”或“上次”的评论，具体取决于您查看程序正文的时间（我不确定如何通过 CLI 查看评论，但我可以在Navicat中的*功能选项卡）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T12:41:23.790

```
ALTER PROCEDURE proc_name [characteristic ...]

characteristic:
    COMMENT 'string'
  | LANGUAGE SQL
  | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER } 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-12-20T10:56:41.277

这就是你创造的方式

```
CREATE PROCEDURE GetAllProducts()
BEGIN
SELECT *  FROM products;
END // 
```

这就是你改变的方式

```
Alter PROCEDURE GetAllProducts()
BEGIN
SELECT *  FROM products;
END // 
```*

# linux - 这种将数据写入特定物理内存地址的方式是如何工作的？

> ID：13970259
> 
> 赞同：1
> 
> 时间：2012-12-20T10:39:06.783
> 
> 标签：linux, memory, kernel

我想将数据写入任意物理内存地址，以测试我系统的错误检测和纠正功能。现有内核模块中的一个代码段是这样编写的：

```
 u32 addr;
 struct page *page;
 void *mem;

 pci_read_config_dword(priv->mc, I5100_MEMEINJADDRMAT, &addr);

 /* Inject error by writing to address */
 page = pfn_to_page(addr >> PAGE_SHIFT);
 mem = kmap(page) + (addr & (~PAGE_MASK));
 *((volatile u32*) (mem)) = 0x01010101;
 kunmap(page); 
```

`I5100_MEMEINJADDRMAT`是 i5100 内存控制器中寄存器的寄存器地址。基本上，在该寄存器中检索内存地址。我不明白剩下的代码，从检索页面开始，然后执行按位运算。

据我了解，`pfn_to_page`用于通过传入页框号作为参数来获取包含特定物理地址的页面。该`addr >> PAGE_SHIFT`部分是从给定地址转换为其相应的页框号。但是，我不明白如何`PAGE_SHIFT`正确使用？使用的正确数据类型应该是什么`PAGE_SHIFT`？

`kmap()`返回适当的虚拟页面地址，然后添加偏移量以获得指向虚拟内存地址的正确指针。实际上是做什么的`(addr & (~PAGE_MASK))`？

我的任务是将错误注入写入物理地址？但是上面的代码似乎写入了一个虚拟地址。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:43:46.950

这个：

```
(addr & (~PAGE_MASK)) 
```

将清除`addr`中设置的位`PAGE_MASK`。假设页面大小为 4 KB，`PAGE_MASK`则可能会设置其 12 个最低有效位，因为 2 ^(12) = 4096。

所以，`PAGE_MASK`是`0x00000fff`。然后，按位求逆`~PAGE_MASK`是简单`0xfffff000`的，所以当`addr`按位与：ed 时， 的最低 12 位`addr`被清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T08:09:47.113

```
/* PAGE_SHIFT determines the page size */
#define PAGE_SHIFT  12
#define PAGE_SIZE   (_AC(1,UL) << PAGE_SHIFT)
#define PAGE_MASK   (~(PAGE_SIZE-1)) 
```

我在 linux-source-3.2.0 中找到了这些定义。但我得到 PAGE_MASK 是 0xffffff000

所以我认为这个运算符是清除最高 20 位，或者尝试获取低 12 位的值。

# c# - T4模板VS2010获取主机组装

> ID：13970260
> 
> 赞同：6
> 
> 时间：2012-12-20T10:39:14.510
> 
> 标签：c#, visual-studio-2010, assemblies, t4

我想获得对 T4 模板所在项目的程序集的引用。我知道我可以获取项目的路径，例如`Host.ResolveAssemblyReference("$(ProjectDir)")`，我可以添加`bin\\debug\\{projectName}.dll`，因为我的程序集名称是由项目名称命名的，但情况并非总是如此，我正在创建可重用的模板，所以我需要 dll 的路径或最优选`Assembly`实例。我还找到了如何参考方法`Project`中解释[的](http://www.codeproject.com/Articles/269362/Using-T4-Templates-to-generate-custom-strongly-typ)方法`GetProjectContainingT4File`，但是那又如何呢？

有没有办法得到它？

顺便说一句，我需要该引用来访问特定类型并从中生成一些代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-07T21:50:22.043

以下简单代码对我有用（VS 2013）：

```
var path = this.Host.ResolveAssemblyReference("$(TargetPath)");
var asm = Assembly.LoadFrom(path); 
```

您还可以`$(...)`在项目 psot 构建步骤编辑器中找到属性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-24T09:21:34.973

好的，我设法获得了对程序集的必要参考 @FuleSnabel 给了我一个提示，尽管我没有使用他的建议。

这是我的 T4 模板的一部分：

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension=".output" #>
<#@ Assembly Name="System.Core.dll" #>
<#@ Assembly Name="System.Windows.Forms.dll" #>
<#@ Assembly Name="System.Xml.Linq.dll" #>
<#@ Assembly Name="Microsoft.VisualStudio.Shell.Interop.8.0" #>
<#@ Assembly Name="EnvDTE" #>
<#@ Assembly Name="EnvDTE80" #>
<#@ Assembly Name="VSLangProj" #>

<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Xml.Linq" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Reflection" #> 
<#@ import namespace="System.Collections.Generic" #> 
<#@ import namespace="Microsoft.VisualStudio.TextTemplating" #>
<#@ import namespace="Microsoft.VisualStudio.Shell.Interop" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="EnvDTE80" #>
<#@ include file="T4Toolbox.tt" #>
<#
    Project prj = GetProject();
    string fileName = "$(ProjectDir)bin\\debug\\" + prj.Properties.Item("OutputFileName").Value;
    string path = Host.ResolveAssemblyReference(fileName);
    Assembly asm = Assembly.LoadFrom(path);

    // ....
#> 

// generated code goes here

<#+
    Project GetProject()
    {
        var serviceProvider = Host as IServiceProvider;
        if (serviceProvider == null) 
        {
            throw new Exception("Visual Studio host not found!");
        }

        DTE dte = serviceProvider.GetService(typeof(SDTE)) as DTE;

        if (dte == null) 
        {
            throw new Exception("Visual Studio host not found!");
        }

        ProjectItem projectItem = dte.Solution.FindProjectItem(Host.TemplateFile);
        if (projectItem.Document == null) {
            projectItem.Open(Constants.vsViewKindCode);
        }

        return projectItem.ContainingProject;
    }
 #> 
```

因此，要找到正确的组装路径，我必须在方法中获取对项目的引用`GetProject()`，然后将项目的属性`OutputFileName`与`prj.Properties.Item("OutputFileName").Value`. 由于我在任何地方都找不到项目的属性，所以我使用枚举和循环来检查`Properties`集合，然后找到我需要的东西。这是一个循环代码：

```
<#
// ....
foreach(Property prop in prj.Properties)
{
    #>
    <#= prop.Name #>
    <#
}
// ....
#> 
```

我希望这会对某人有所帮助。

# python - 为每个项目获取 python dict.keys 跟踪

> ID：13970261
> 
> 赞同：2
> 
> 时间：2012-12-20T10:39:16.290
> 
> 标签：python, parsing, dictionary

我有一个看起来像这样的python dict

```
{'data': [{'data': [{'data': 'gen1', 'name': 'objectID'},
                   {'data': 'familyX', 'name': 'family'}],
          'name': 'An-instance-of-A'},
         {'data': [{'data': 'gen2', 'name': 'objectID'},
                   {'data': 'familyY', 'name': 'family'},
                   {'data': [{'data': [{'data': '21',
                                        'name': 'objectID'},
                                       {'data': 'name-for-21',
                                        'name': 'name'},
                                       {'data': 'no-name', 'name': None}],
                              'name': 'An-instance-of-X:'},
                             {'data': [{'data': '22',
                                        'name': 'objectID'}],
                              'name': 'An-instance-of-X:'}],
                    'name': 'List-of-2-X-elements:'}],
          'name': 'An-instance-of-A'}],
'name': 'main'} 
```

结构是重复的，它的规则是这样的：

*   字典包含“名称”和“数据”
*   'data' 可以包含字典列表
*   如果“数据”不是一个列表，它就是我需要的一个值。
*   'name' 只是一个名字

问题是对于每个值，我需要知道每个父母的每个信息。

所以最后，我需要打印一个列表，其中包含如下所示的项目：

```
objectID=gen2 family=familyY An-instance-of-X_objectID=21 An-instance-of-X_name=name-for-21 
```

编辑：这只是我想要作为输出的几行之一。对于没有字典作为“数据”的每个项目，我都需要这样的一行。

因此，对于每个不是字典的数据，向上遍历，查找信息并打印它..

我不知道模块中的每个函数，比如 itertools 和集合。但是里面有什么我可以使用的吗？这叫什么（当我试图自己做研究时）？

我可以找到许多“扁平化字典”方法，但不是这样，当我有这样的“数据”、“名称”时不是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:22:33.517

这是递归适用的一个很好的例子：

```
input_ = {'data': [{'data': [{'data': 'gen1', 'name': 'objectID'},
                   {'data': 'familyX', 'name': 'family'}],
          'name': 'An-instance-of-A'},
         {'data': [{'data': 'gen2', 'name': 'objectID'},
                   {'data': 'familyY', 'name': 'family'},
                   {'data': [{'data': [{'data': '21',
                                        'name': 'objectID'},
                                       {'data': 'name-for-21',
                                        'name': 'name'},
                                       {'data': 'no-name', 'name': None}],
                              'name': 'An-instance-of-X:'},
                             {'data': [{'data': '22',
                                        'name': 'objectID'}],
                              'name': 'An-instance-of-X:'}],
                    'name': 'List-of-2-X-elements:'}],
          'name': 'An-instance-of-A'}],
'name': 'main'}

def parse_dict(d, predecessors, output):
    """Recurse into dict and fill list of path-value-pairs"""
    data = d["data"]
    name = d["name"]
    name = name.strip(":") if type(name) is str else name
    if type(data) is list:
        for d_ in data:
            parse_dict(d_, predecessors + [name], output)
    else:
        output.append(("_".join(map(str,predecessors+[name])), data))

result = []

parse_dict(input_, [], result)

print "\n".join(map(lambda x: "%s=%s"%(x[0],x[1]),result)) 
```

输出：

```
main_An-instance-of-A_objectID=gen1
main_An-instance-of-A_family=familyX
main_An-instance-of-A_objectID=gen2
main_An-instance-of-A_family=familyY
main_An-instance-of-A_List-of-2-X-elements_An-instance-of-X_objectID=21
main_An-instance-of-A_List-of-2-X-elements_An-instance-of-X_name=name-for-21
main_An-instance-of-A_List-of-2-X-elements_An-instance-of-X_None=no-name
main_An-instance-of-A_List-of-2-X-elements_An-instance-of-X_objectID=22 
```

我希望我正确理解了您的要求。如果您不想将路径加入字符串，则可以保留前辈列表。

问候，

托尔斯滕

# xpath - 使用 xsl:key 存储布尔表达式的结果

> ID：13970269
> 
> 赞同：1
> 
> 时间：2012-12-20T10:39:49.127
> 
> 标签：xpath, xslt-1.0, xslkey

在我的转换中有一个表达式，一些元素被反复测试。为了减少冗余，我想把它封装成`xsl:key`这样（不工作）：

```
<xsl:key name="td-is-empty" match="td" use="not(./node()[normalize-space(.) or ./node()])" /> 
```

预期的行为是产生布尔值的关键`true`，以防表达式被成功计算，否则`false`。然后我想按如下方式使用它：

```
<xsl:template match="td[not(key('td-is-empty', .))]" /> 
```

这是可能的，如果是的话，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:31:16.517

我认为对于 XSLT 1.0，键值始终是 string 类型，因此在您的示例中，键值可以是 string`true`或 string `false`。然后，您可以调用`key('td-is-empty', 'true')`以查找`td`表达式为真的所有元素节点，并`key('td-is-empty', 'false')`查找`td`表达式为假的所有元素。

但是，您似乎想用您的密钥做一些不同的事情，例如根据节点身份存储`use`每个节点的表达式结果。`td`我不认为这就是 XSLT 中键的工作方式。

[编辑] 但是，您可以将您的要求表达为

```
<xsl:template match="td[count(. | key('td-is-empty', 'false')) = count(key('td-is-empty', 'false'))]">...</xsl:template> 
```

这匹配那些`td`是由 找到的元素集的成员的元素`key('td-is-empty', 'false')`。

# xcode - Step Over Thread 和 Step Into Thread 命令有什么用？

> ID：13970271
> 
> 赞同：9
> 
> 时间：2012-12-20T10:39:51.310
> 
> 标签：xcode, debugging, gdb, lldb

有人可以解释 Xcode 中**Step Over Thread**和**Step Into Thread**调试器命令的目的是什么吗？在什么情况下使用它们而不是通常的*Step Over*和*Step Into*有用？有什么区别，什么时候重要？

编辑：为了澄清这个问题，我不是在问 Step Over/Step Into/Step Out 之间的区别，我是在问普通版本和“Thread”版本之间的区别，在什么情况下一个版本更多比其他有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T10:59:59.070

*   踏入

执行当前语句，然后在下一条语句处停止。如果当前语句是函数或脚本调用，则调试器将进入该函数或脚本，否则将在下一条语句处停止。

*   跨过

执行当前语句，然后在下一条语句处停止。如果当前语句是函数或脚本调用，则调试器将执行整个函数或脚本，并在函数调用之后的下一条语句处停止。

*   走出去

如果函数是嵌套的，则跳出当前函数并上一级。如果在主体中，则脚本执行到最后，或者执行到下一个断点。跳过的语句被执行，但不单步执行。

参数是通用的关于调试所以看看

[Eclipse 调试器中的 Step Into 和 Step Over 有什么区别？](https://stackoverflow.com/questions/3580715/eclipse-debug-step-into-step-over)

具体来看，重点是线程，因此您可以将“多线程”应用程序视为单线程应用程序，而无需在断点处停止时运行多个事件/线程等。你有一个“稳定的环境”。

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/060-Debug_Your_App/debug_app.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/060-Debug_Your_App/debug_app.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-05T16:13:05.840

我只是在同一个问题上挣扎。问题有点老了，但看起来我找到了正确的答案。

[在文档中](https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/debugging_with_xcode/chapters/debugging_tools.html)，我发现了类似的内容：

> Control-Shift 仅在保持其他线程停止时才进入或越过活动线程（步骤图标在箭头下方显示虚线而不是实线）。

Control-Shift-< *Fx Key or click* > 分别是线程版本的 step over 和 step into 的快捷键。所以看起来这只执行当前线程并暂停所有其他线程。正常版本继续执行所有未挂起的线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:55:23.297

这个术语的一个非常简单的解释：

[步入、步入、步出命令（调试菜单）](http://msdn.microsoft.com/en-us/library/office/gg251651.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-01T12:20:26.167

根据[这本书](https://books.google.ch/books?id=xMskCQAAQBAJ&pg=PT790&lpg=PT790&dq=%22step%20into%20thread%22&source=bl&ots=q6TNW18otX&sig=xXEzlRzOghRftUCCB9hWwuhqvoE&hl=en&sa=X&ved=0ahUKEwi6yZyi2YTZAhXNblAKHVzFDlMQ6AEITzAJ#v=onepage&q=%22step%20into%20thread%22&f=false)：

> **Step Over Thread**和**Step Into Thread**会在您推进正在调试的线程时冻结所有其他线程。按住 Shift 和 Control 的同时单击按钮，或选择 **Debug**菜单中的命令来获得效果。

# sql - 合并 2 行或更多行有字符和其他有货币的行

> ID：13970275
> 
> 赞同：3
> 
> 时间：2012-12-20T10:40:08.147
> 
> 标签：sql, oracle

我通过查询得到这样的输出：

```
ID      customer_name_Now    customer_name_Before       MOVEMENT
123451  Rustle Bock ltd      N                          £2,121
123451  N                    Rustle Bock ltd           -£25,666,899
123452  Little Garage Ltd    N                          £6,987
123453  N                    The Big Shop               £15,850 
```

故事是这样的，我有 2 个月的数据。在这两个月中，客户可能会或可能不会有变动，这取决于上个月是我们的客户还是现在是客户。在很多情况下，这两个月都是客户，因此我得到了像上面这样的 2 行。

理想的输出应该是：

```
ID      customer_name_Now   customer_name_Before      MOVEMENT
123451  Rustle Bock ltd     Rustle Bock ltd          -£25,664,778
123452  Little Garage Ltd   N                         £6,987
123453  N                   The Big Shop              £15,850 
```

所以运动应该总和给我几个月的实际运动，并且客户的名字应该在两个列中，因为客户在两个月都有关系。

@DMK 我用来获取初始输出的查询是：

```
select /*+ NO_REWRITE */
customer_id,
customer_name_now,
customer_name_before,
movement

from
    (select /*+ NO_REWRITE */
    main.customer_id,
    main.customer_name_now,
    main.customer_name_before,
    main.limits_before,
    main.limits_now,
    sum(main.limits_now-main.limits_before) as movement

    from
        (select /*+ NO_REWRITE */
        customer_id,
        (customer_name_before) as customer_name_before,
        (customer_name_now) as customer_name_now,
        sum(limits_current) as limits_now,
        sum(limits_previous) as limits_before

        from
             (select /*+ NO_REWRITE */
             sub.customer_id,
             sub.customer_name_now,
             sub.customer_name_before,
             sub.limits_current,
             sub.limits_previous
             from
                 (select /*+ NO_REWRITE */
                 T2.customer_ID,
                 (T2.customer_name) customer_name_now,
                 'N' customer_name_before,

                 sum(T26.AGREED_LIMIT) limits_current,
                 0 limits_previous
                 from 

                 DWH_customer_HISTORY T2,
                 DWH_TIME_DIM T25,
                 DWH_FACILITY_MONTHLY T2
                 where  
                 ---some internal filters are applied here, i habe ot shown coz of security reasons----
                 and 
                 T25.MONTH_END = '2012-11-30' and 

                 group by 
                 T2.customer_ID,
                 T2.customer_name,
                 ) sub

             union all

             select /*+ NO_REWRITE */
             sub.customer_id,
             sub.customer_name_now,
             sub.customer_name_before,
             sub.limits_current,
             sub.limits_previous
             from
                 (select /*+ NO_REWRITE */
                 T2.customer_ID,
                 'N' as customer_name_now,
                 (T2.customer_name)customer_name_before,

                 0 limits_current,
                 sum(T2.AGREED_LIMIT) limits_previous,

                from 
                DWH_customer_HISTORY T2,
                DWH_TIME_DIM T25,
                DWH_FACILITY_MONTHLY T2
                where  
                ---some internal filters are applied here, i habe ot shown coz of security reasons----
                and 
                T25.MONTH_END = '2012-10-31'
                group by 
                T2.customer_ID,
                T2.customer_name,) sub
            ) un
        group by
        customer_id,
        customer_name_now,
        customer_name_before,) main

    group by 
    main.customer_id,
    main.customer_name_now,
    main.customer_name_before,
    main.limits_before,
    main.limits_now) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:46:08.333

在 SQLServer2005+ 中使用 OVER 子句

```
SELECT DISTINCT 
  ID,MAX(customer_name_Now) OVER (PARTITION BY ID) AS customer_name_Now, 
  MAX(customer_name_Before) OVER (PARTITION BY ID) AS customer_name_Before,
  SUM(MOVEMENT) OVER (PARTITION BY ID) AS MOVEMENT 
FROM your_table 
```

或者

```
SELECT ID, MAX(customer_name_Now) AS customer_name_Now,
       MAX(customer_name_Before) AS customer_name_Before,
       SUM(MOVEMENT) AS MOVEMENT
FROM your_table
GROUP BY ID 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/05653/1/0)上的演示[](http://sqlfiddle.com/#!3/05653/1/0)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:25:18.053

我假设您使用的是 SqlServer，尽管下面的查询也可以在 MySql 中使用。

```
Select c1.ID, c1.customer_name_Now, c2.customer_name_Before, Total
from Customers c1
left Join Customers c2 
on c2.ID = c1.ID
left join
    (select ID as ID2, sum(MOVEMENT) as Total, count(*) as Cnt
    from Customers 
    group by ID) t1
on ID2 = c1.ID
where (c1.customer_name_Now <> 'N' and c2.customer_name_Before <> 'N') 
or CNT = 1 
```

如果您不确定，请查看以下演示

## [SqlFiddle](http://sqlfiddle.com/#!3/9c750b/6)

* * *

查看您刚刚添加的查询后，上述内容应该仍然有效。你要么需要

*   `Customers`用您的查询替换我的表
*   或者将您的查询结果移动到临时表中，并用临时表替换我`Customers`的表

我会去第二个。保存重新运行相同的查询。**

# iphone - 一起使用 Burstly 和 Adfonic

> ID：13970276
> 
> 赞同：0
> 
> 时间：2012-12-20T10:40:09.437
> 
> 标签：iphone, xcode

我在同时集成 Adfonic 和 Burstly Ad 集成框架时遇到错误。

```
duplicate symbol _OBJC_IVAR_$_LoadingView.actIndicator in:
    /Users/kunalthakkar/kunal/displayAds/AdfonicSDK/libAdfonic.a(ORMMAAVPlayer.o)
    /Users/kunalthakkar/kunal/displayAds/BurstlySDK/libBurstly.a(BurstlyORMMAAVPlayer.o)
duplicate symbol _OBJC_CLASS_$_LoadingView in:
    /Users/kunalthakkar/kunal/displayAds/AdfonicSDK/libAdfonic.a(ORMMAAVPlayer.o)
    /Users/kunalthakkar/kunal/displayAds/BurstlySDK/libBurstly.a(BurstlyORMMAAVPlayer.o)
duplicate symbol _OBJC_METACLASS_$_LoadingView in:
    /Users/kunalthakkar/kunal/displayAds/AdfonicSDK/libAdfonic.a(ORMMAAVPlayer.o)
    /Users/kunalthakkar/kunal/displayAds/BurstlySDK/libBurstly.a(BurstlyORMMAAVPlayer.o)
ld: 3 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

# python - 简单的 Python 计算器

> ID：13970281
> 
> 赞同：2
> 
> 时间：2012-12-20T10:40:26.057
> 
> 标签：python, python-2.7

嗨，我是 python 新手，我正在通过制作一个简单的计算器来练习。该程序允许我输入膳食、税收和小费的数值，但在计算时出现此错误：

```
Traceback (most recent call last):
  File "C:/Users/chacha04231991/Desktop/pytuts/mealcost.py", line 5, in <module>
    meal = meal + meal * tax
TypeError: can't multiply sequence by non-int of type 'str' 
```

这是代码：

```
meal = raw_input('Enter meal cost: ')
tax = raw_input('Enter tax price in decimal #: ')
tip = raw_input('Enter tip amount in decimal #: ')

meal = meal + meal * tax
meal = meal + meal * tip

total = meal
print 'your meal total is ', total 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:41:50.210

您需要将输入从字符串转换为数字，例如整数：

```
meal = int(raw_input('Enter meal cost: '))
tax = int(raw_input('Enter tax price in decimal #: '))
tip = int(raw_input('Enter tip amount in decimal #: ')) 
```

如果您需要输入小数金额，您也可以使用[小数类型。](http://docs.python.org/2/library/decimal.html)

```
from decimal import Decimal 
meal = Decimal(raw_input('Enter meal cost: '))
tax = Decimal(raw_input('Enter tax price in decimal #: '))
tip = Decimal(raw_input('Enter tip amount in decimal #: ')) 
```

我建议您不要为此使用浮点数，因为它会产生舍入错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:42:02.853

当你使用 raw_input 时，你得到的输入是类型`str`

```
>>> meal = raw_input('Enter meal cost: ')
Enter meal cost: 5
>>> type(meal)
<type 'str'> 
```

您应该在执行操作之前将其转换为`int`/`float`

```
>>> meal = int(raw_input('Enter meal cost: '))
Enter meal cost: 5
>>> type(meal)
<type 'int'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:44:15.840

在 python 中，输入默认是一个字符串。在相乘之前，您必须将其转换为整数。

```
int(meal)
int(tax)
int(tip) 
```

应该做的伎俩。

[将字符串解析为浮点数或整数](https://stackoverflow.com/questions/379906/python-parse-string-to-float-or-int)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-30T04:15:19.030

这很简单，而且我根据用户操作数输入作为字符串编写了这段代码。

```
def calculator(a, b, operand):
    result = 0
    if operand is '+':
      result = a + b
    elif operand is '-':
      result = a - b
    elif operand is '*':
      result = a * b
    elif operand is '/':
      result = a / b
    return result

calculator(2, 3, '+')
output -> 5 
```

# java - 在 JSF2.0 中动态创建和填充 DataTable

> ID：13970285
> 
> 赞同：5
> 
> 时间：2012-12-20T10:40:36.540
> 
> 标签：java, web-services, jsf, jsf-2, primefaces

我那里有个小问题。当我想在 JSF 中填充 DataTable 时，我必须先创建一个模型，然后在我的视图中使用它。[就像这里](http://www.primefaces.org/showcase/ui/datatableBasic.jsf)的 Primefaces 样本一样。

现在，我必须创建将显示来自 web 服务的数据的 DataTable。我不知道会有多少列，也不知道它们的名字......你能推荐一些明智的解决方案吗？

PS。我也不知道如何从 web 服务返回数据 - 它仍有待确定。

* * *

编辑

```
public Bean() {
    columns = new ArrayList<String>();  
    rows = new ArrayList<Map<String, Object>>();         
    populateColumns(columns,4);   

    for(int i = 0 ; i < 6 ; i++)  
    {               
        Map<String,Object> m = new HashMap<String,Object>();
        m.clear();          
        for(int j = 0 ; j < 4 ; j++)  
        {
            m.put("Column" + j, "sth" + j + i);
        }                                               
        rows.add(m);
    }       
}

private void populateColumns(List<String> list, int size) {  
    for(int i = 0 ; i < size ; i++)  
        list.add("Column" + i);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:50:35.980

收集`List<Map<String, Object>>`代表`rows`属性的数据。代表列`Map`，以列名为键（如有必要，只需自动生成，例如`column1`、`column2`、`column3`等`"column" + i`）。将这些列名称收集在一个单独`List<String>`的代表`columns`属性中。最后显示如下`<p:columns>`：

```
<p:dataTable value="#{bean.rows}" var="row">
    <p:columns value="#{bean.columns}" var="column">
        #{row[column]}
    </p:columns>
</p:dataTable> 
```

# mysql - 此函数是否符合 ANSI SQL 标准？

> ID：13970291
> 
> 赞同：1
> 
> 时间：2012-12-20T10:40:41.703
> 
> 标签：mysql, sql, function, standards, ansi-sql

我想知道是否有人可以告诉我这个函数是否遵循 ANSI SQL 标准，为了将来参考，是否有任何资源可以用来查找我的 SQL 是否符合 ANSI 标准。我使用的 DBMS 是 MySQL。

```
CREATE FUNCTION INCREMENT()
RETURNS INT
BEGIN
    DECLARE oldVal INT;
    DECLARE newVal INT;
    SELECT currentVal INTO oldVal FROM atable FOR UPDATE;
    SET newVal=oldVal +1;
    UPDATE atable SET currentVal=newVal;
    RETURN newVal;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:01:08.733

找到了一个验证工具，可以检查您的 SQL 是否符合 SQL 2003。
[http://developer.mimer.com/validator/parser200x/index.tml](http://developer.mimer.com/validator/parser200x/index.tml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T12:08:16.893

基于此评论

> 基本上我需要检索新的更新值，如果我执行 UPDATE table SET current = current + 1 然后执行选择以获取新值，这可能会导致问题，例如如果另一个事务在更新和选择之间更新。

我认为您的问题与 SQL 标准没有任何关系。我认为您的问题与[事务](http://dev.mysql.com/doc/refman/5.6/en/commit.html)和[事务隔离级别有关。](http://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_isolation_level)

# jquery - IE7下拉菜单移到顶部，jquery不显示

> ID：13970297
> 
> 赞同：2
> 
> 时间：2012-12-20T10:41:18.347
> 
> 标签：jquery, html, css, internet-explorer-7

有问题的网站是：[http ://shabalala.codedprojects.co.za/](http://shabalala.codedprojects.co.za/)

您会看到该站点在顶部有一个下拉菜单，除了在 IE7 中工作正常，它不位于顶部导航下方，而是位于页面顶部。为什么是这样？

在主页上，底部有两个部分，最新消息和特价，在 IE7 上根本不显示。我也可以做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:47:33.200

尝试在“nav ul ul”类中删除 IE 7 的 top:100% ..

# code-injection - 操作系统注入和操作系统命令注入的区别

> ID：13970300
> 
> 赞同：-1
> 
> 时间：2012-12-20T10:41:36.913
> 
> 标签：code-injection

有人可以向我解释操作系统注入和操作系统命令注入之间的区别吗？

我的理解是，这两种技术都利用了糟糕的输入验证。

我的疑问是：操作系统注入是否代表操作系统注入？

假设某个网站容易受到用户提供的输入的影响。

因此，经过一些测试，我可以获得以下信息：

*   底层操作系统

*   安装的服务器类型

假设我们有 Linux 和 Apache 服务器。

通过一个拦截软件，它使我能够通过 GET 请求与易受攻击的站点进行交互（我的意思是我可以在发送之前修改 GET 参数）然后我成功注入“;ls”

是的，该网站很容易受到攻击，因为我可以看到有文件。

所以我所做的是利用一些错误来访问底层操作系统。

这是Os的一个例子吗？或者我最好称之为操作系统命令注入？

Os的例子是什么？

对不起我的琐碎问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:12:03.953

他们可能是同一个意思。你是从哪里看到这些术语的？

# python - python我们可以通过继承2个类来覆盖一个方法吗

> ID：13970304
> 
> 赞同：0
> 
> 时间：2012-12-20T10:41:55.010
> 
> 标签：python

```
class A(object):

    def print_some(self):
        print 'a'

class B(object):

    def print_some(self):
        print 'b'

class C(A, B):
    pass

c = C()
print c.print_some()
'a' 
```

我对输出的期望是'b'。我想这样做的原因是因为我想重写一些方法，比如说`form_valid`在`CreateView`django 中，只需继承我编写的包含 custom 的类`form_valid`，还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:45:00.777

类`A`是`class C(A, B)`指令中的第一个（左），因此您`print_some`从中获取方法（`A`类）。[在这里](http://www.python.org/download/releases/2.3/mro/)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:01:56.243

根据您的问题，我希望您可以更改 B 和 C 的继承，不是吗？那么你为什么不建立像这样的继承

```
A <- B <- C 
```

或在代码中：

```
class A(object):
    ....

class B(A):
    ...

class C(B):
    ... 
```

这应该会给你想要的输出。

# facebook - 在 Canvas(apps.facebook.com) 或 Fanpage 上的 Facebook

> ID：13970305
> 
> 赞同：0
> 
> 时间：2012-12-20T10:41:57.533
> 
> 标签：facebook, facebook-apps, facebook-page

作为标题，我如何检查我是否登陆了 facebook Canvas 页面或 fanpage 选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:57:56.347

检查[`signed_request`](https://developers.facebook.com/docs/reference/login/signed-request/)它是否包含`page`属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T10:45:04.673

```
if(strpos($_SERVER['HTTP_REFERER'], 'apps.facebook')) {
  echo 'canvas page';
} 
```

# dotnetnuke - Dotnetnuke - 根据用户或安全角色动态更改门户上的徽标

> ID：13970306
> 
> 赞同：1
> 
> 时间：2012-12-20T10:41:57.650
> 
> 标签：dotnetnuke

我对 dotnetnuke 和 csharp 还很陌生，我想知道根据用户或安全角色基本上动态更改默认徽标的最简单方法是什么。

任何帮助将不胜感激

谢谢

亚历克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:03:27.940

默认 DNN 设置（管理员-> 站点设置）允许您为站点设置一个徽标。您需要编写一些代码，可能修改皮肤，以实现您想要的

# java - 无法从 JSP 页面检索参数值

> ID：13970307
> 
> 赞同：0
> 
> 时间：2012-12-20T10:42:00.300
> 
> 标签：java, javascript

认为

**home.jsp**代码包含一个按钮，如

```
<input name="R" onclick="del(<%=rs.getString("VDB")%>)" type="radio" value="<%=rs.getString("VDB")%>" /> 
```

//**注意**：我在 del() 中传递 VDB 的值

它调用 javascript 为：

```
<script type="text/javascript">
function del(delno)
{
 var ff = document.vendorform;

 var url = "delete.jsp?+vendor="+delno;
 window.navigate("delete_vendor.jsp?+vendor="+delno);

 //window.location.href="delete_vendor.jsp?+vendor="+delno;
 //ff.method = "POST";
 //ff.action ="delete_vendor.jsp?+vendor="+delno;
 //ff.submit();
}//i have used 3 methods to redirect to delete.jsp 
```

delete.jsp ：
在此页面上，我想检索我使用的**供应商的值：**

```
String D1=request.getParameter("vendor"); 
```

但是得到空值。
任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:45:28.167

```
var url = "delete.jsp?+vendor="+delno; 
```

你插入了错误的字符串`+vendor`。它应该只`vendor`在 url 中。

```
var url = "delete.jsp?vendor="+delno; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:45:32.280

删除“供应商”一词之前的“+”。改变

```
var url = "delete.jsp?+vendor="+delno; 
```

至

```
var url = "delete.jsp?vendor="+delno; 
```

# jquery - jquery after() 函数没有在正确的位置添加 HTML

> ID：13970309
> 
> 赞同：-1
> 
> 时间：2012-12-20T10:42:02.920
> 
> 标签：jquery, ajax

对每个人..我有一个网页，我有一个从 mysql-DB 呈现的墙帖列表，还有一个用于发布新帖子的 textarea 字段.. 按下提交按钮后，调用 ajax 函数并且必须发布一个新帖子出现在旧一次的上方..在我正在使用`after()`内置函数的jquery函数中..

```
function wallPostSend(a, b) {
    var url = "scripts/functions.php";
    var randomNum = "<?php echo $randomNum; ?>";
    var contentWall = $('#news_text').val();
    $(".small_loader").show();
    $.post(url, {
        request: "wallPostSend",
        mem1: a,
        mem2: b,
        content: contentWall,
        security: randomNum
    }, function(data) {
        $(".small_loader").hide();
        $(".after_this").after().html(data).slideDown();
        ---this part is the problem..
        $('#news_text').val("type here..........").fadeIn();
    });
} 
```

`$(".after_this")`- 指的是一个看起来像这样的 div：

```
 <div class="after_this"></div> 
```

我需要一个新帖子出现在这里。例如

```
<table>post 11</table>
<table>post 10</table>post that is already from DATABASE
<table>post 9</table>post that is already from DATABASE
<table>post 8</table>post that is already from DATABASE
<table>post 7</table>post that is already from DATABASE
<table>post 6</table>post that is already from DATABASE
<table>post N</table>post that is already from DATABASE 
```

AJAX 响应是`<?php echo '<table>post text..blah blah</table>' ?>`一个新表，其中包含我希望在第 10 篇文章之前出现的新文章，这是 HTML 代码中的第一篇文章。

然后，如果发布了另一个帖子，则它必须再次出现在列表的首位，而不会覆盖任何以前的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:46:27.303

您错过了`content`需要作为参数传入的

[.after(内容)](http://api.jquery.com/after/)

```
 $(".after_this").after(data).slideDown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:48:02.610

以这种方式使用它：

```
 $(".after_this").after(data).slideDown(); 
```

# symfony - Composer，最小稳定性和依赖项的依赖关系

> ID：13970311
> 
> 赞同：9
> 
> 时间：2012-12-20T10:42:05.497
> 
> 标签：symfony, dependency-management, composer-php

我对一个新项目和使用 Composer 的 Symfony 2 依赖项感到很困惑。

首先，我使用 composer 安装 symfony/framework-standard-edition v2.1.5。这会产生一个具有这些要求且没有最低稳定性节点的作曲家文件。

```
"require": {
  "php": ">=5.3.3",
  "symfony/symfony": "2.1.*",
  "doctrine/orm": ">=2.2.3,<2.4-dev",
  "doctrine/doctrine-bundle": "1.0.*",
  "twig/extensions": "1.0.*@dev",
  "symfony/assetic-bundle": "2.1.*",
  "symfony/swiftmailer-bundle": "2.1.*",
  "symfony/monolog-bundle": "2.1.*",
  "sensio/distribution-bundle": "2.1.*",
  "sensio/framework-extra-bundle": "2.1.*",
  "sensio/generator-bundle": "2.1.*",
  "jms/security-extra-bundle": "1.2.*",
  "jms/di-extra-bundle": "1.1.*",
  "kriswallsmith/assetic": "1.1.*@dev"
}, 
```

这工作正常，它安装了所有最新的稳定版本，就像它应该做的那样。

接下来，我添加一个包 -> [https://packagist.org/packages/kunstmaan/admin-bundle](https://packagist.org/packages/kunstmaan/admin-bundle)

```
"require": {
  "php": ">=5.3.3",
  "symfony/symfony": "2.1.*",
  "doctrine/orm": ">=2.2.3,<2.4-dev",
  "doctrine/doctrine-bundle": "1.0.*",
  "twig/extensions": "1.0.*@dev",
  "symfony/assetic-bundle": "2.1.*",
  "symfony/swiftmailer-bundle": "2.1.*",
  "symfony/monolog-bundle": "2.1.*",
  "sensio/distribution-bundle": "2.1.*",
  "sensio/framework-extra-bundle": "2.1.*",
  "sensio/generator-bundle": "2.1.*",
  "jms/security-extra-bundle": "1.2.*",
  "jms/di-extra-bundle": "1.1.*",
  "kriswallsmith/assetic": "1.1.*@dev",
  "kunstmaan/admin-bundle": "dev-master"
}, 
```

这个包依赖于“dev-master”中的“doctrine/doctrine-fixtures-bundle”（[https://packagist.org/packages/doctrine/doctrine-fixtures-bundle](https://packagist.org/packages/doctrine/doctrine-fixtures-bundle)）

并且该捆绑包取决于带有 * 的学说/数据固定装置（[https://packagist.org/packages/doctrine/data-fixtures](https://packagist.org/packages/doctrine/data-fixtures)）

现在，当我在项目中运行 composer update 时，它​​告诉我没有什么可以满足学说/数据装置的依赖关系。名称中的拼写错误，或者没有可用的“稳定”版本，因为最低稳定性默认为稳定。

它确实想在“开发”稳定性中安装学说-固定装置包，因为放置 dev-master 会自动将此依赖项置于“开发”稳定性中。但这对该部门的部门没有任何作用，他们一直希望安装稳定，因为这是我的最低稳定性。

在这一点上，我可以通过在项目中的 composer.json 中添加学说/数据夹具：dev-master 或 @dev 来解决这个问题。

但由于这只是一个示例（knpmenubundle、fosuserbundle 等），我将不得不手动将所有未安装的 deps 的 deps 添加到我自己的 composer 文件中。

另一种解决方案是将我的项目的最低稳定性降低到开发，但那时我的所有部门，包括 Symfony2 等稳定的部门，都将安装他们的开发版本，而不是标记的版本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T11:41:33.733

解决这个问题只有一个好方法：唠叨人们，以便他们标记更多版本。如果您确实需要使用不稳定的东西，那么将其全部列入白名单`"@dev"`是 IMO 的最佳选择。如果您的不稳定多于稳定，那么您始终可以标记`@stable`并将最小稳定性设置为 dev。在大多数情况下，仍然有锁定文件来保存你的屁股；）

# java - Android 屏幕在没有用户操作的情况下不会更新

> ID：13970312
> 
> 赞同：1
> 
> 时间：2012-12-20T10:42:05.203
> 
> 标签：java, android, android-edittext, inputstream, outputstream

我正在尝试使用 android 中的库连接到终端仿真器，这将连接到串行设备并应该向我显示发送/接收的数据。在这两种情况下，我应该能够通过终端下方的文本框或通过输入终端本身并在键盘上按 Enter 来通过连接发送数据。

当我发送数据时，对我的命令的回复会从库中返回到方法中`onDataReceived(int id, byte[] data)`。每次我取回数据时，它都会自动运行。我可以看到到达日志的数据。

我的问题是，每当数据从串行设备返回时，屏幕不会更新，直到我将文本框置于焦点，或按下键盘上的 Enter 按钮。每当收到任何内容时，如何进行屏幕更新。我知道它正在接收数据，当我按下文本框或输入按钮时，将显示所有接收到的数据。

这是我收到数据时调用的内容，a`ByteArrayInputStream`用新数据更新。 `appendToEmulator`直接向终端仿真器写入内容。`notifyUpdate`让模拟器知道屏幕已经改变。

```
public void onDataReceived(int id, byte[] data)
{
    String str = new String(data);
    Log.d(TAG, "in data received " + str);
    ((MyBAIsWrapper)bis).renew(data);

    mSession.appendToEmulator(data, 0, data.length);
    mSession.notifyUpdate();
} 
```

这是我发送一些东西的地方：

```
mEntry = (EditText) findViewById(R.id.term_entry);
mEntry.setOnEditorActionListener(new TextView.OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {

            /* Ignore enter-key-up events. */
            if (event != null && event.getAction() == KeyEvent.ACTION_UP) {

                return false;
            }

            /* Don't try to send something if we are not connected yet. */
            TermSession session = mSession;

            if (mSession == null) {
            Log.d(TAG, "null session ");
            return true;

             }

            Log.d(TAG, "in click event ");
            Editable e = (Editable) v.getText();

            // call original sendData to send data over serial
            String data = e.toString() + "\r\n";
            Log.d(TAG, "edittext data is  " + data);
            //overridden sendData
            sendData(data.getBytes());

            // send data over serial using original sendData() method
            mSelectedAdapter.sendData(data.getBytes());
            TextKeyListener.clear(e);
            return true;
        }
    }); 
```

我可以做些什么来实时更新屏幕，而不仅仅是更新用户操作？

编辑：我认为 invalidate() 是我需要的，但它不起作用。我在 emulatorView 上调用它。emulatorView 显示终端模拟器的屏幕，是库中的一个类，继承自视图[http://pastebin.com/MNJ0Zf8P](http://pastebin.com/MNJ0Zf8P)

编辑：所以使整个视图无效没有任何作用，但我注意到当我使 mEmulatorView 无效时，我解锁它时屏幕会更新。也是第一次更新后，我可以点击终端本身，它会更新。进一步的水龙头什么也不做。很奇怪，所以它显然是在改变行为，但是当我调用它时它并没有自动做任何事情。

编辑：处理程序如何工作而调用它却没有？

编辑，我的全部活动：

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Arrays;

import slickdevlabs.apps.usb2seriallib.AdapterConnectionListener;
import slickdevlabs.apps.usb2seriallib.SlickUSB2Serial;
import slickdevlabs.apps.usb2seriallib.USB2SerialAdapter;
import slickdevlabs.apps.usb2seriallib.SlickUSB2Serial.BaudRate;
import slickdevlabs.apps.usb2seriallib.SlickUSB2Serial.DataBits;
import slickdevlabs.apps.usb2seriallib.SlickUSB2Serial.ParityOption;
import slickdevlabs.apps.usb2seriallib.SlickUSB2Serial.StopBits;
import slickdevlabs.apps.usb2seriallib.USB2SerialAdapter.DataListener;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.Editable;
import android.text.method.TextKeyListener;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import jackpal.androidterm.emulatorview.EmulatorView;
import jackpal.androidterm.emulatorview.TermSession;

public class SerialTerminalActivity extends Activity implements
    OnClickListener, OnItemSelectedListener, AdapterConnectionListener,
    DataListener {

private static final String TAG = "SerialTerminalActivity";
private EditText mEntry;
private EmulatorView mEmulatorView;
private TermSession mSession;
private OutputStream bos;
private InputStream bis;
private InputStream in;
private OutputStream out;
private Spinner mBaudSpinner;
private Spinner mDataSpinner;
private Spinner mParitySpinner;
private Spinner mStopSpinner;
private Spinner mDeviceSpinner;
private Button mConnect;
private ArrayList<String> mDeviceOutputs;
private ArrayList<USB2SerialAdapter> mDeviceAdapters;
private ArrayAdapter<CharSequence> mDeviceSpinnerAdapter;
private USB2SerialAdapter mSelectedAdapter;
private TextView mCurrentSettings;
boolean attached = false;

private Button mUpdateSettings;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_serial_terminal);

    mConnect = (Button) findViewById(R.id.deviceConnect);
    mConnect.setOnClickListener(this);
    mUpdateSettings = (Button) findViewById(R.id.updateSettings);
    mUpdateSettings.setOnClickListener(this);

    mBaudSpinner = (Spinner) findViewById(R.id.baudSpinner);
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(
            this, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mBaudSpinner.setAdapter(adapter);
    String[] tempArray = SlickUSB2Serial.BAUD_RATES;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);
    }
    mBaudSpinner.setSelection(SlickUSB2Serial.BaudRate.BAUD_9600.ordinal());

    mDataSpinner = (Spinner) findViewById(R.id.dataSpinner);
    adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mDataSpinner.setAdapter(adapter);
    tempArray = SlickUSB2Serial.DATA_BITS;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);

    }
    mDataSpinner
            .setSelection(SlickUSB2Serial.DataBits.DATA_8_BIT.ordinal());

    mParitySpinner = (Spinner) findViewById(R.id.paritySpinner);
    adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mParitySpinner.setAdapter(adapter);
    tempArray = SlickUSB2Serial.PARITY_OPTIONS;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);

    }
    mParitySpinner.setSelection(SlickUSB2Serial.ParityOption.PARITY_NONE
            .ordinal());

    mStopSpinner = (Spinner) findViewById(R.id.stopSpinner);
    adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mStopSpinner.setAdapter(adapter);
    tempArray = SlickUSB2Serial.STOP_BITS;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);

    }
    mStopSpinner
            .setSelection(SlickUSB2Serial.StopBits.STOP_1_BIT.ordinal());

    mDeviceAdapters = new ArrayList<USB2SerialAdapter>();
    mDeviceOutputs = new ArrayList<String>();

    mDeviceSpinner = (Spinner) findViewById(R.id.deviceSpinner);
    mDeviceSpinnerAdapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    mDeviceSpinnerAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mDeviceSpinner.setAdapter(mDeviceSpinnerAdapter);
    mDeviceSpinner.setOnItemSelectedListener(this);

    mCurrentSettings = (TextView) findViewById(R.id.currentSettings);

    SlickUSB2Serial.initialize(this);

    /*
     * Text entry box at the bottom of the activity. Note that you can also
     * send input (whether from a hardware device or soft keyboard) directly
     * to the EmulatorView.
     */
    mEntry = (EditText) findViewById(R.id.term_entry);
    mEntry.setOnEditorActionListener(new TextView.OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {

            /* Ignore enter-key-up events. */
            if (event != null && event.getAction() == KeyEvent.ACTION_UP) {

                return false;
            }

            /* Don't try to send something if we are not connected yet. */
            TermSession session = mSession;

            if (mSession == null) {
            Log.d(TAG, "null session ");
            return true;

             }

            Log.d(TAG, "in click event ");
            Editable e = (Editable) v.getText();

            // call original sendData to send data over serial
            String data = e.toString() + "\r\n";
            Log.d(TAG, "edittext data is  " + data);
            //doLocalEcho(data.getBytes());
            sendData(data.getBytes());

            // send data over serial using original sendData() method
            mSelectedAdapter.sendData(data.getBytes());

            /* Write to the terminal session. */
            session.write(e.toString());
            //Log.d(TAG, "edittext to string is  " + editText.toString());
            session.write('\r');
            TextKeyListener.clear(e);
            return true;
        }
    });

    /*
     * Sends the content of the text entry box to the terminal, without
     * sending a carriage return afterwards
     */
    Button sendButton = (Button) findViewById(R.id.term_entry_send);
    sendButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            /* Don't try to send something if we are not connected yet. */
            TermSession session = mSession;
            if (mSession == null) {
                Log.d(TAG, "mSession == NULLLLLLLLLLLLL ");
                return;
            }

            Editable editText = (Editable) mEntry.getText();
            session.write(editText.toString());
            Log.d(TAG, "edittext is " + editText.toString());
            TextKeyListener.clear(editText);
            Log.d(TAG, "send pressed ");
        }
    });

    /**
     * EmulatorView setup.
     */

    /* emulatorView from xml. */
    EmulatorView view = (EmulatorView) findViewById(R.id.emulatorView);
    mEmulatorView = view;

    /* Let the EmulatorView know the screen's density. */
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    view.setDensity(metrics);

    /* Create a TermSession. */
    // TermSession session = mSession;
    mSession = new TermSession();

    //byte[] a=new byte[]{1,1,1};
    byte[] a = new byte[]{'h','e', 'l', 'l', 'o'};
    byte[] b = new byte[4096];
    //bis = new ByteArrayInputStream(a);
    bis = new MyBAIsWrapper(b);
    bos = new ByteArrayOutputStream();
    mSession.write("testTWO");
    //bis = new ByteArrayInputStream(b);
    mSession.setTermIn(bis);
    mSession.setTermOut(bos);
    //session.setTermIn(in);
    //session.setTermOut(out);

    mSession.write("testONE");

    /* Attach the TermSession to the EmulatorView. */
    mEmulatorView.attachSession(mSession);

    //mSession = session;
//  mSession.write("abc");
    //session.write("test");
    try {
        bos.write(b);
        bos.flush();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    /* TODO Monday:  ByteArrayInputStream() can only be used once.  The data in it at creation is all that'll ever be in.
     *               Find a way to update what bis is pointing to without breaking the bind that bis has to the terminal.
     *               Recover from Saturday's hangover.
     */

    /*
     * That's all you have to do! The EmulatorView will call the attached
     * TermSession's initializeEmulator() automatically, once it can
     * calculate the appropriate screen size for the terminal emulator.
     */

}

public void sendData(byte[] data) {
    String str = new String(data);
    Log.d(TAG, "send data method value is: " + str);

    // this should echo what I send to the terminal in the correct format
    //bos = new ByteArrayOutputStream(data.length);
    mSession.write(data, 0, data.length);
    try {
        bos.write(data);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.d(TAG, "EXCEPTION in data sent ");
    }
    // mSession.write(data, 0, data.length);
    // mSession.write('\r');

}

public void onDataReceived(int id, byte[] data) {

    String str = new String(data);
    Log.d(TAG, "in data received " + str);
      ((MyBAIsWrapper)bis).renew(data);

     mSession.appendToEmulator(data, 0, data.length);
     mSession.notifyUpdate();
     //mEmulatorView.invalidate();
     mEmulatorView.postInvalidate();
   /* bis = new ByteArrayInputStream(data);
    SerialTerminalActivity.this.runOnUiThread(new Runnable() {
        public void run() {

              serialSession();
        }
      });*/

     //cast added to keep original code structure 
    //I recommend defining the bis attribute as the MyBAIsWrapper type in this case
   // ((MyBAIsWrapper)bis).renew(data);

    //mSession.write(data, 0, data.length);
    //mSession.write('\r');

}

public void serialSession() {
    Log.d(TAG, "in serial session");
    mSession.setTermIn(bis);
    mSession.setTermOut(bos);
    /* Attach the TermSession to the EmulatorView. */
    mEmulatorView.attachSession(mSession);
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {
    // TODO Auto-generated method stub
    changeSelectedAdapter(mDeviceAdapters.get(position));
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
}

public void changeSelectedAdapter(USB2SerialAdapter adapter) {
    Toast.makeText(this, "in changeselectedadapter", Toast.LENGTH_SHORT)
            .show();
    // if(mSelectedAdapter!=null){
    // mDeviceOutputs.set(mDeviceSpinnerAdapter.getPosition(mSelectedAdapter.getDeviceId()+""),mReceiveBox.getText().toString());

    mSelectedAdapter = adapter;
    mBaudSpinner.setSelection(adapter.getBaudRate().ordinal());
    mDataSpinner.setSelection(adapter.getDataBit().ordinal());
    mParitySpinner.setSelection(adapter.getParityOption().ordinal());
    mStopSpinner.setSelection(adapter.getStopBit().ordinal());

    updateCurrentSettingsText();

    // mReceiveBox.setText(mDeviceOutputs.get(mDeviceSpinner.getSelectedItemPosition()));
    Toast.makeText(this,
            "Adapter switched toooo: " + adapter.getDeviceId() + "!",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onAdapterConnected(USB2SerialAdapter adapter) {
    adapter.setDataListener(this);
    mDeviceAdapters.add(adapter);
    mDeviceOutputs.add("");
    mDeviceSpinnerAdapter.add("" + adapter.getDeviceId());
    mDeviceSpinner.setSelection(mDeviceSpinnerAdapter.getCount() - 1);

    Toast.makeText(this,
            "Adapter: " + adapter.getDeviceId() + " Connected!",
            Toast.LENGTH_SHORT).show();
    // Toast.makeText(this, "Baud: "+adapter.getBaudRate()+" Connected!",
    // Toast.LENGTH_SHORT).show();
}

@Override
public void onAdapterConnectionError(int error, String msg) {
    // TODO Auto-generated method stub
    if (error == AdapterConnectionListener.ERROR_UNKNOWN_IDS) {
        final AlertDialog dialog = new AlertDialog.Builder(this)
                .setIcon(0)
                .setTitle("Choose Adapter Type")
                .setItems(new String[] { "Prolific", "FTDI" },
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int optionSelected) {
                                if (optionSelected == 0) {
                                    SlickUSB2Serial
                                            .connectProlific(SerialTerminalActivity.this);
                                } else {
                                    SlickUSB2Serial
                                            .connectFTDI(SerialTerminalActivity.this);
                                }
                            }
                        }).create();
        dialog.show();
        return;
    }
    Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
}

public void onClick(View v) {

    if (v == mConnect) {
        SlickUSB2Serial.autoConnect(this);
        if (mSelectedAdapter == null) {
            Toast.makeText(this, "no adapters detected", Toast.LENGTH_SHORT)
                    .show();
            return;
        }
    }

    else if (v == mUpdateSettings) {
        if (mSelectedAdapter == null) {
            return;
        }

        mSelectedAdapter.setCommSettings(BaudRate.values()[mBaudSpinner
                .getSelectedItemPosition()], DataBits.values()[mDataSpinner
                .getSelectedItemPosition()],
                ParityOption.values()[mParitySpinner
                        .getSelectedItemPosition()],
                StopBits.values()[mStopSpinner.getSelectedItemPosition()]);

        updateCurrentSettingsText();
        Toast.makeText(this, "Updated Settings", Toast.LENGTH_SHORT).show();

    }

}

private void updateCurrentSettingsText() {
    mCurrentSettings.setText("Current Settings Areeee: "
            + mBaudSpinner.getSelectedItem().toString() + ", "
            + mDataSpinner.getSelectedItem().toString() + ", "
            + mParitySpinner.getSelectedItem().toString() + ", "
            + mStopSpinner.getSelectedItem().toString());
}

/* Echoes local input from the emulator back to the emulator screen. */
private void doLocalEcho(byte[] data) {

        Log.d(TAG, "echoing " +
                Arrays.toString(data) + " back to terminal");
    //I added mSession, is it right?
    mSession.appendToEmulator(data, 0, data.length);
    mSession.notifyUpdate();
}

@Override
protected void onResume() {
    super.onResume();

    /*
     * You should call this to let EmulatorView know that it's visible on
     * screen.
     */
    mEmulatorView.onResume();

    mEntry.requestFocus();
}

@Override
protected void onPause() {
    /*
     * You should call this to let EmulatorView know that it's no longer
     * visible on screen.
     */
    mEmulatorView.onPause();

    super.onPause();
}

@Override
protected void onDestroy() {
    /**
     * Finish the TermSession when we're destroyed. This will free
     * resources, stop I/O threads, and close the I/O streams attached to
     * the session.
     * 
     * For the local session, closing the streams will kill the shell; for
     * the Telnet session, it closes the network connection.
     */
    if (mSession != null) {
        mSession.finish();
    }
    SlickUSB2Serial.cleanup(this);
    super.onDestroy();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:52:58.523

当您想要更新视图时，您需要使其无效。从 UI 线程使用[invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)，从非 UI 线程使用[postInvalidate()](http://developer.android.com/reference/android/view/View.html#postInvalidate%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:30:57.607

我尝试了处理程序并且它有效：

```
Handler viewHandler = new Handler();
Runnable updateView = new Runnable(){
  @Override
  public void run(){
     mEmulatorView.invalidate();
     viewHandler.postDelayed(updateView, 10);
  }
}; 
```

`viewHandler.post(updateView);`然后打电话 `onDataReceived()`

这每 10 毫秒更新一次屏幕，并且有效，除非我将终端置于焦点，否则它不会更新，直到我点击发送或点击`editText`字段，这是为什么呢？

另外为什么处理程序工作但在方法本身中调用它却没有？我从来没有真正使用过处理程序，所以我不确定。

# jquery - 使用 jquery 的 AJAX 调用向控制器发送字符串参数

> ID：13970313
> 
> 赞同：2
> 
> 时间：2012-12-20T10:42:05.007
> 
> 标签：jquery

我有一个 ajax 调用，就像

```
this.GetTransactionsInputToday = function () {
             var status="complete"
             $.ajax({
                 url: '/Management/function1',
                 contentType: "application/json; charset=utf-8",
                 data: status,
                 type: 'GET',
                 cache: false,
                 success: function (result) {
                     return result;
                 }
             });
         } 
```

我也试过这样做

```
this.GetTransactionsInputToday = function () {
             var status="complete"; 
              $.ajax({
                     url: '/Management/function1/' + status,
                     type: 'GET',
                     cache: false,
                     success: function (result) {
                         return result;
                     }
                 });
             } 
```

我的管理控制器类中有一个控制器功能

```
public JsonResult function1(string status)
{
Some code here.. 
} 
```

问题是每次调用 function1 时，status 的值都为 null。任何人都可以让我知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T10:50:38.830

您需要为发送的数据定义名称 `data: {'status': status}`：

```
this.GetTransactionsInputToday = function () {
    var status="complete"
    var r = '';

    $.ajax({
        url: '/Management/function1',
        contentType: "application/json; charset=utf-8",
        data: {'status': status},
        type: 'GET',
        cache: false,
        success: function (result) {
            r = result;
        }
    });

    return r;
}; 
```

您`this.GetTransactionsInputToday`也不会按预期返回结果。ajax 函数的成功处理程序被异步调用。因此，您的`return r`语句将返回**''**，因为它在 Ajax 请求完成之前被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:47:59.550

您可能会错误地构造 json 参数。

使用 json： `data: "{'prop1': '" + value1+ "'}"`

```
$.ajax({
             url: '/Management/function1',
             contentType: "application/json; charset=utf-8",
             data: "{'prop1': '" + value1+ "'}",
             type: 'GET',
             cache: false,
             success: function (result) {
                 return result;
             }
         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:48:06.307

尝试在 ajax 函数之外设置变量，然后返回它，这样它就在正确的范围内。此外，为了获得即时值，您需要使这个 ajax 调用同步。

```
this.GetTransactionsInputToday = function () {
    var status = "complete";
    var r = '';

    $.ajax({
        async : false,
        url: '/Management/function1',
        contentType: "application/json; charset=utf-8",
        data: {'status' : status},
        type: 'GET',
        cache: false,
        success: function (result) {
            r = result;
        }
    });

    return r;
}; 
```

# android - 为什么我的动画不正确并且在某些图像中加载图像需要更多时间？

> ID：13970321
> 
> 赞同：1
> 
> 时间：2012-12-20T10:42:37.127
> 
> 标签：android, bitmap, android-imageview

```
public class LoadImageActivity extends Activity {

    ImageView image_view;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        image_view = (ImageView)findViewById(R.id.imageview);
        me m1=new me();
        m1.execute("http://wallbase1.org/thumbs/rozne/thumb-499842.jpg");
        me m2=new me();
        m2.execute( "http://wallbase1.org/thumbs/rozne/thumb-637449.jpg"); 
        me m3=new me();
        m3.execute( "http://wallbase1.org/thumbs/rozne/thumb-2509834.jpg"); 
        me m4=new me();
        m4.execute( "http://wallbase1.org/thumbs/rozne/thumb-2501884.jpg"); 
        me m5=new me();
        m5.execute( "http://wallbase1.org/thumbs/rozne/thumb-2514440.jpg");
     };

     class me extends AsyncTask<String, Integer, Bitmap> {

        Bitmap b1;

        // private MainActivity m1;
        protected Bitmap doInBackground(String...params) {
            // TODO Auto-generated method stub
             try {

                  /* Open a new URL and get the InputStream to load data from it. */

                  URL aURL = new URL(params[0]);
                  URLConnection conn = aURL.openConnection();
                  conn.connect();
                  InputStream is = conn.getInputStream();

                  /* Buffered is always good for a performance plus. */
                  BufferedInputStream bis = new BufferedInputStream(is);

                  /* Decode url-data to a bitmap. */
                  Bitmap bm = BitmapFactory.decodeStream(bis);
                  b1=bm;

                  bis.close();
                  is.close();

              } catch (IOException e) 
              {

                  Log.e("DEBUGTAG", "Remote Image Exception", e);

              }

           return null;
       }

    @Override
        protected void onPostExecute(Bitmap result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            image_view.setImageBitmap(b1);
            Animation rotation = AnimationUtils.loadAnimation(LoadImageActivity.this, R.anim.rotate);
         image_view.startAnimation(rotation);
    }
        }} 
```

我试图通过将图像解码为位图来显示来自互联网的图像，我想显示来自多个 url 的多个图像。有没有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:52:22.127

下载的持续时间取决于很多不同的东西。您当前生成了 5 个 AsyncTask，并且无法保证交付/执行的顺序与您生成它们的顺序相同。很可能第五张图片可能是您收到的第一张图片，这将导致完全错误的顺序。因此，您应该首先下载*所有*图像，可能只使用一个 AsyncTask。之后，如果成功，您应该启动动画并在图像之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:50:31.170

有几种更好的方法可以做到这一点，所有这些方法都比您的代码复杂得多。但你确实有一个好的开始。

这个来自 Google I/O 的视频有一些很好的图像技术，在 4:40 左右查看[https://www.youtube.com/watch?v=gbQb1PVjfqM](https://www.youtube.com/watch?v=gbQb1PVjfqM)

这需要不同的时间，因为它们是不同尺寸的不同图像。

请发布您的 XML`R.anim.rotate`代码，以便有人可以尝试检查动画不工作的原因。

# java - PopupMenu 内的 JPanel

> ID：13970322
> 
> 赞同：0
> 
> 时间：2012-12-20T10:42:40.877
> 
> 标签：java, swing, java-2d, jpopupmenu

有没有办法在 PopupMenu（使用 TrayIcon）中渲染像 JPanel 这样的图形？我知道使用 JPopupMenu 是可能的，但我不喜欢在弹出窗口外部单击时不会关闭（并且图标不会像 PopupMenu 那样突出显示）。

我试图用 JPopupMenu 做的例子：

```
 if( SystemTray.isSupported() ) {
        // Get the SystemTray instance
        SystemTray tray = SystemTray.getSystemTray();

        // Load icon
        Image image = new ImageIcon(this.getClass().getResource("delete.png")).getImage();

        final JPopupMenu popup = new JPopupMenu();
        popup.add( new JMenuItem("Test") );

        JPanel p1 = new JPanel();
        p1.setBackground( Color.red );
        p1.setPreferredSize( new Dimension(200, 300) );
        popup.add( p1 );

        JTrayIcon trayIcon = new JTrayIcon( image );
        trayIcon.setJPopupMenu( popup );

        trayIcon.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent e) {
                popup.setLocation(e.getX(), e.getY());
                popup.setInvoker(popup);
                popup.setVisible(true);
            }
        });

        try {
            tray.add( trayIcon );
        } catch (Exception e) {
            JOptionPane.showMessageDialog( null, "Could not add tray icon." );
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:52:36.427

> 有没有办法在 PopupMenu 中渲染像 JPanel 这样的图形？我知道使用 JPopupMenu 是可能的，但我不喜欢在弹出窗口外部单击时不会关闭（并且图标不会像 PopupMenu 那样突出显示）。

*   我只会`Java-2D`直接谈论弹出容器，确保自定义绘画没有问题`JPanel`，用`JButtons`, 铺设`GridLayout`

*   是的，有几种方法，[@Kirill Grouchnikov 的最佳描述](http://weblogs.java.net/blog/2005/03/12/how-create-custom-popup-menus)

*   你可以决定是否创建

    1) 每个`JPopupMenu`/的新油漆`JMenu`，

    2）放入`UIManager`（然后对所有`Objects`当前有效`JVM`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:22:35.970

```
You can extending JPopupMenu and add customItem to it:
public class CustomPopUp extends JPopupMenu {

    public CustomPopUp() {
        reload();
    }

    private void reload(final Collection<CustomItem> items) throws BadLocationException {
        for (final CustomItem item : items) {
            add(new AbstractAction(item.getLabel(), item.getIcon()) {               
                @Override
                public void actionPerformed(final ActionEvent e) {
                    //do whatever
                }
            });
        }

    }
}
public class CustomItem {
    private String label;
    private ImageIcon icon;

    //getter and setter
} 
```

# assembly - 8086 绘图时听键盘

> ID：13970325
> 
> 赞同：2
> 
> 时间：2012-12-20T10:42:45.780
> 
> 标签：assembly, x86, dos, x86-16

我熟悉等待键盘输入的 INT 16h，但我正在开发一个游戏，我希望有一个游戏循环，可以在屏幕上设置动画，并且只要有键盘敲击，8086 就应该去到我的中断处理程序并告诉我按下了哪个键来相应地更新我的数据。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:46:09.597

在调用 INT 16 时，您还可以在 AH 中使用 1 而不是 0 轮询输入。

```
INT 16h / AH = 01h - check for keystroke in the keyboard buffer.

    return:

        ZF = 1 if keystroke is not available.
        ZF = 0 if keystroke available.
        AH = BIOS scan code.
        AL = ASCII character.
        (if a keystroke is present, it is not removed from the keyboard buffer). 
```

[（资源。）](http://h4xxel.org/asm/8086_bios_and_dos_interrupts.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:39:50.423

在 MS-DOS 中，您可以编写自己的自定义键盘中断处理程序，在自定义键盘中断处理程序代码中，您可以，例如：

1.  设置一个标志以通知主循环/绘图循环已按下某个键，以及该键的扫描码，或者...

2.  根据按键的扫描码修改你自定义的中断处理程序中的主循环/绘制循环的代码。

有关编写自定义 [keyboard] 中断处理程序的更多信息，请参见例如：

*   [是否可以在装配中进行自定义中断？](https://stackoverflow.com/questions/12464329/is-it-possible-to-make-a-custom-interrupt-in-assembly)
*   [用 GNU（GCC 和 GAS）替换 DOS 中的定时器中断处理程序](https://stackoverflow.com/questions/7406055/replacing-the-timer-interrupt-handler-in-dos-with-gnu-gcc-and-gas)
*   [一些汇编教程第 16 章的第 31-39 页](http://employees.oneonta.edu/higgindm/assembly/Chapter16.ppt)
*   [专家 MS-DOS 编程的第 17.4 部分](http://es.scribd.com/doc/53566261/Expert-MS-DOS-Programming)

# regex - 限制扩展 ASCII 字符集的正则表达式

> ID：13970327
> 
> 赞同：1
> 
> 时间：2012-12-20T10:42:53.750
> 
> 标签：regex, vb.net, validation

我有创建 xml 文件的多语言应用程序，但 XML 标记中不应包含从 168 到 254 的扩展 ASCII 字符（¿⌐¬½¼¡«»░▓│┤╡╢╖╕╣║╗╜╛┐└┴┬├）所以，我想限制用户进入。

我尝试限制除了字母数字、下划线和破折号之外的所有内容，但它不允许重音字符 ó ç õ 是扩展 ASCII 的一部分。这是正则表达式`"^[a-zA-Z0-9\s.\-_]+$"`

第二个选项是创建一个从 168 到 254 的所有符号的字符串，并检查字符串是否包含其中任何一个，但不确定它是否是可靠和准确的解决方案。

过滤扩展 ASCII 字符集输入的最佳方法是什么？

[链接](http://www.web-wise-wizard.com/programming/ascii-ibm-extended-character-set.html)到扩展 ASCII 字符集表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:34:12.453

虽然@Oded 建议适用，但我使用了以下解决方案：

```
Dim filteredInput as string

Private const XML_RESTRICTED_CHARACTERS as string ="[☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼#$%&()*+,-./:;<=>?@[\]^_`¢£¥₧ƒªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■""}{]"

filteredInput =Regex.Replace(strInput.ToLower(), XML_RESTRICTED_CHARACTERS, "") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:48:19.397

相反，您可以`range`在字符类中使用，以使用以下字符排除特定范围的字符`Hex Codes`：-

```
[^\xA8-\xFE] 
```

上面的正则表达式将匹配除给定范围内的任何字符。这些是您发布的范围的十六进制代码 -`[168, 254]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:44:50.383

> 第二个选项是创建一个从 168 到 254 的所有符号的字符串，并检查字符串是否包含其中任何一个，但不确定它是否是可靠和准确的解决方案。

是的，这是一个可靠且准确的解决方案。它也比正则表达式更轻量级。

# php - 负载测试的代表性如何？

> ID：13970330
> 
> 赞同：0
> 
> 时间：2012-12-20T10:43:03.773
> 
> 标签：php, mysql, apache, unix

我想测试，就像我确定的许多其他人一样，“我的网络服务器可以同时处理多少个请求”。

通过使用`ab`or之类的工具`siege`，并使用代表实际使用情况的查询来访问您的 apache Web 服务器/mysql 数据库/php 脚本，与实际用户的实际使用情况相比，您获得的结果具有多大的**代表性？**

我的意思是，例如，使用实用程序进行测试，所有流量都来自一个 IP，而实际使用来自许多不同的 IP 地址？这是否说明了世界的不同？

如果`ab`说我的网络服务器每秒可以处理 1000 个请求，这是否可以直接转换为说网络服务器每秒可以处理来自实际用户的 1000 个请求？

我知道这是一个毛茸茸的领域，所以我能得到的答复越具体和直接越好。旧的“取决于”不会有太大帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:14:48.683

对不起，但“这取决于”是这里最好的答案。

首先，回答这个问题最有价值的工具不是 ab 或 siege 或 JMeter（我最喜欢的开源工具），它是一个电子表格。

您的系统可以处理的请求数量取决于您首先遇到的瓶颈。其中一些瓶颈将是硬件/基础设施（带宽、CPU、负载平衡方案的有效性），一些将是“现成的”软件及其配置方式（例如，Apache 提供静态文件的能力），以及软件（您的 PHP 脚本和数据库查询的运行效率如何）。一些瓶颈资源可能不在您的控制之下——例如，大多数托管在欧洲或美国的网站在从中国访问时速度很慢。

我使用电子表格对用户旅程进行建模 - 这完全取决于您的具体情况，但用户旅程可能是：

*   访问主页
*   点击“注册/登录”链接
*   注册为新用户
*   单击电子邮件中的“验证”链接
*   访问受限内容

大多数网站支持许多用户旅程——在任何时候，这些用户旅程之间的混合可能会有很大差异。

对于每个用户旅程，我会评估访问者请求的性质——例如，“访问主页”可能是“下载 20 个静态文件和 1 个 PHP 脚本”，而“注册为新用户”可能需要“1 个 PHP 脚本” ，但有一组相当复杂的数据库脚本。

这个过程最终成为电子表格中的一组行，显示每种类型的请求数。为了精确起见，可能需要将每个动态页面（PHP 脚本）视为它自己的请求，但我通常将所有静态资源集中在一起。

这为您提供了一个基于大量假设进行测试的基线。您现在可以创建负载测试脚本，代表“20% 的新用户、50% 的回访用户、10% 的主页、20% 的完整购买路径、20% 的放弃购物车”或您想出的任何用户旅程。

创建包含旅程的负载测试脚本并运行它；理想情况下从多个位置（有几种从云提供商处运行 Jmeter 的廉价方法）。测量响应时间，并查看在 10% 以上的情况下，最慢请求的响应时间在哪里超过了质量阈值（我通常建议 3 秒）。

尝试改变用户旅程之间的划分——例如，广告活动可能会带来大量新注册。我通常会推荐至少 3 或 4 种不同的混合物。

如果用户旅程中的任何变化给出的结果显着低于平均值（15% 或更多），那可能是最糟糕的情况。

否则，对结果进行平均，您会以合理的确定性知道这是您可以支持的最小请求数。您可以测试的用户旅程变化越多，就越能确定该数字是准确的。“最少”是指您可以合理地确定您*至少*可以管理这么多用户。这并不意味着您最多可以处理*这么*多用户——这是一个细微的差别，但很重要！

在大多数 Web 应用程序中，瓶颈是动态页面的生成——测试 Apache 提供静态文件的能力或托管服务提供商的带宽相对而言意义不大。它作为“我们是否忘记了任何东西”测试很好，但您将从测试您的 PHP 脚本中获得更多价值。

在你这样做之前，我建议你只用 PHP 文件来“寻找瓶颈”——我上面概述的过程并没有告诉你瓶颈在哪里，只是有一个。因为它最有可能是 PHP（当然还有你从 PHP 中做的所有事情，比如调用数据库），所以对解决方案进行检测以测试性能通常是一个好主意。

您还应该使用 Yslow 之类的工具来确保优化您的 HTTP/HTML 设置 - 为您的静态资产设置缓存标头将对您的带宽费用产生重大影响，并且可能有助于最终用户感知的性能。\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:48:39.097

简短的回答是否定的，可能不会。

`ab`和朋友，当从本地机器运行时，不受网络延迟/带宽阻塞的影响。

此外，每个现实生活中的请求都需要不同级别的处理——数据库访问/加载、文件包含等。

另外，这些都没有考虑到来自其他正在运行的后台进程的服务器负载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:53:48.427

为了获得接近真实的结果，我建议您分析典型的用户行为，`siege`使用用户正在访问的 url 创建一个 url 文件并随机延迟运行它。这个结果不能直接转移到生产环境中，但它是你可以用你自己的结果得到的最接近的结果。您还可以尝试测试 Web 应用程序性能的 Web 服务，但如果您需要复杂的测试，通常需要付费

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:55:10.147

但是说“取决于”并没有多大帮助，并不意味着唯一有效的答案不是“取决于”。因为它有点像。

*   事实：测试不是现实生活中的使用。
*   事实：测试可以非常接近现实生活中的使用。
*   问题：你怎么知道它是否存在？

### 这取决于您对请求的处理方式。

对于许多应用程序来说，您的单个 IP 不会成为问题，所以这不是我担心的第一件事。但这可能是：如果您对每个 IP 进行一次复杂的统计（例如，将一些信息保存在您设计得不是很好的表中），这意味着您只在测试中这样做了一次，所以您会遇到不好的情况当真正的用户带着他们令人讨厌的不同 IP 出现的时候

### 这取决于您的测试系统。

如果您的所有请求都来自一条慢线（可能因为您正在处理所有这些请求而速度很慢），那么您将不会得到认真的测试。基本上，如果您期望传入的流量更多，那么您的测试系统的连接可以处理..您会得到漂移。CPU使用率等也是如此。

### 这取决于你的测试有多好。

例如，如果您的请求是点击所有页面，但您的用户只点击一个特定页面，您显然会得到不同的结果。频率也是如此。如果您按顺序访问页面，可以让您充分利用缓存之类的东西（查询缓存在这方面是一个棘手的问题，但还有 memcached、varnish 等层），那么您将再次遇到麻烦。您可以寻找的最简单的事情是`delay`您可以设置围攻测试，但您可能需要考虑许多其他事情。

*编写好的测试很难*，你的测试越好，你就越接近。但是您需要了解您的系统，了解您的用户并了解您的测试。真的没有什么可说的，然后“这取决于”

# ruby-on-rails - 资产中的无效 CSS：预编译

> ID：13970331
> 
> 赞同：-1
> 
> 时间：2012-12-20T10:43:06.680
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

执行 assets:precompile 时出现错误。错误出在我的 css 语法上，但我有很多 css 文件，不知道如何找到文件和行来修复错误。

执行 assets:precompile 时如何查看文件和行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:51:59.050

如果您想要更多输出/信息，请添加 --trace 或检查日志。

> bundle exec rake assets:precompile --trace

# asp.net - pdfclown 中的注释

> ID：13970332
> 
> 赞同：3
> 
> 时间：2012-12-20T10:43:14.780
> 
> 标签：asp.net, .net, pdf, pdf-conversion, pdfclown

我想在某个 x,y 位置贴一张便签。为此，我在 .net 中使用 pdfclown 注释类。以下是可用的。

```
 using files = org.pdfclown.files;
    public override bool Run()
    {
        files::File file = new files::File();
        Document document = file.Document;
        Populate(document);
        Serialize(file, false, "Annotations", "inserting annotations");
        return true;
    }

    private void Populate(Document document)
    {
        Page page = new Page(document);
        document.Pages.Add(page);
        PrimitiveComposer composer = new PrimitiveComposer(page);
        StandardType1Font font = new StandardType1Font(document, StandardType1Font.FamilyEnum.Courier, true, false);
        composer.SetFont(font, 12);
        annotations::Note note = new annotations::Note(page, new Point(78, 658), "this is my annotation...");
        note.IconType = annotations::Note.IconTypeEnum.Help;
        note.ModificationDate = new DateTime();
        note.IsOpen = true;
        composer.Flush();
    } 
```

[注释链接](http://clown.sourceforge.net/docs/api/) 这是在 78, 658 个坐标的空白 pdf 中放置一个便笺。

问题是我想要一个包含一些数据的特定 pdf 中的便笺。我该如何修改它...感谢您的帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T17:28:03.170

我是[**PDF Clown**](http://sourceforge.net/projects/clown/)的作者——这是将注释（如便笺）插入现有页面的正确方法：

```
using org.pdfclown.documents;
using annotations = org.pdfclown.documents.interaction.annotations;
using files = org.pdfclown.files;
using System.Drawing;

. . .

// Open the PDF file!
using(files::File file = new files::File(@"C:\mypath\myfile.pdf"))
{
  // Get the document (high-level representation of the PDF file)!
  Document document = file.Document;
  // Get, e.g., the first page of the document!
  Page page = document.Pages[0];

  // Insert your sticky note into the page!
  annotations::Note note = new annotations::Note(page, new Point(78, 658), "this is my annotation...");
  note.IconType = annotations::Note.IconTypeEnum.Help;
  note.ModificationDate = new DateTime();
  note.IsOpen = true;

  // Save the PDF file!
  file.Save(files::SerializationModeEnum.Incremental);
} 
```

请考虑，关于保存文件的方式*有很多选择*（到输出（内存中）流，到不同的路径，作为压缩文件，作为附加文件......）。

如果您查看随库分发的 50 多个示例以及 API 文档，*您会发现它的表现力和强大程度。它的架构严格遵守官方的 Adob​​e PDF Reference 1.7。*

请享用！

# performance - 用于检查值是否在区间内的快速矢量化函数

> ID：13970333
> 
> 赞同：11
> 
> 时间：2012-12-20T10:43:18.183
> 
> 标签：performance, r, vectorization

R中是否有一个函数可以有效地检查一个值是否大于一个并且小于另一个数字？它也应该适用于向量。

本质上，我正在寻找以下功能的更快版本：

```
> in.interval <- function(x, lo, hi) (x > lo & x < hi)
> in.interval(c(2,4,6), 3, 5)
[1] FALSE  TRUE FALSE 
```

这里的问题是`x`必须触摸两次，与更有效的方法相比，计算消耗了两倍的内存。在内部，我会假设它是这样工作的：

1.  计算`tmp1 <- (x > lo)`
2.  计算`tmp2 <- (x < hi)`
3.  计算`retval <- tmp1 & tmp2`

现在，在第 2 步之后，内存中有两个布尔向量，`x`必须查看两次。我的问题是：是否有一个（内置？）函数可以一步完成所有这些操作，而无需分配额外的内存？

跟进这个问题：[R：从范围内的数据表中选择值](https://stackoverflow.com/questions/5204953/r-select-values-from-data-table-in-range)

**编辑**：我已经根据 CauchyDistributedRV 在[https://gist.github.com/4344844的回答设置了一个要点](https://gist.github.com/4344844)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:45:40.183

正如@James 在评论中所说，诀窍是从 x 中减去 low 和 high 之间的中间值，然后检查该差异是否小于 low 和 high 之间距离的一半。或者，在代码中：

```
in.interval2 <- function(x, lo, hi) {
    abs(x-(hi+lo)/2) < (hi-lo)/2 
} 
```

这与 hack 一样快`.bincode`，并且是您正在寻找的算法的实现。你可以把它翻译成 C 或 C++ 并尝试如果你得到加速。

与其他解决方案的比较：

```
x <- runif(1e6,1,10)
require(rbenchmark)
benchmark(
  in.interval(x, 3, 5),
  in.interval2(x, 3, 5),
  findInterval(x, c(3, 5)) == 1,
  !is.na(.bincode(x, c(3, 5))),
  order='relative',
  columns=c("test", "replications", "elapsed", "relative")
) 
```

给

```
 test replications elapsed relative
4  !is.na(.bincode(x, c(3, 5)))          100    1.88    1.000
2         in.interval2(x, 3, 5)          100    1.95    1.037
3 findInterval(x, c(3, 5)) == 1          100    3.42    1.819
1          in.interval(x, 3, 5)          100    3.54    1.883 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T12:26:33.880

`findInterval`比`in.interval`长 x 快。

```
library(microbenchmark)

set.seed(123L)
x <- runif(1e6, 1, 10)
in.interval <- function(x, lo, hi) (x > lo & x < hi)

microbenchmark(
    findInterval(x, c(3, 5)) == 1L,
    in.interval(x, 3, 5),
    times=100) 
```

和

```
Unit: milliseconds
                            expr      min       lq   median       uq      max
1 findInterval(x, c(3, 5)) == 1L 23.40665 25.13308 25.17272 25.25361 27.04032
2           in.interval(x, 3, 5) 42.91647 45.51040 45.60424 45.75144 46.38389 
```

`== 1L`如果不需要，则更快，如果要找到的“间隔”大于 1，则很有用

```
> system.time(findInterval(x, 0:10))
   user  system elapsed 
  3.644   0.112   3.763 
```

如果速度至关重要，那么这个 C 实现虽然不能容忍整数而不是数字参数，但速度很快

```
library(inline)
in.interval_c <- cfunction(c(x="numeric", lo="numeric", hi="numeric"),
'    int len = Rf_length(x);
     double lower = REAL(lo)[0], upper = REAL(hi)[0],
            *xp = REAL(x);
     SEXP out = PROTECT(NEW_LOGICAL(len));
     int *outp = LOGICAL(out);

     for (int i = 0; i < len; ++i)
         outp[i] = (xp[i] - lower) * (xp[i] - upper) <= 0;

     UNPROTECT(1);
     return out;') 
```

其他答案中提出的一些解决方案的时间安排是

```
microbenchmark(
    findInterval(x, c(3, 5)) == 1L,
    in.interval.abs(x, 3, 5),
    in.interval(x, 3, 5),
    in.interval_c(x, 3, 5),
    !is.na(.bincode(x, c(3, 5))),
    times=100) 
```

和

```
Unit: milliseconds
                            expr       min        lq    median        uq
1 findInterval(x, c(3, 5)) == 1L 23.419117 23.495943 23.556524 23.670907
2       in.interval.abs(x, 3, 5) 12.018486 12.056290 12.093279 12.161213
3         in.interval_c(x, 3, 5)  1.619649  1.641119  1.651007  1.679531
4           in.interval(x, 3, 5) 42.946318 43.050058 43.171480 43.407930
5   !is.na(.bincode(x, c(3, 5))) 15.421340 15.468946 15.520298 15.600758
        max
1 26.360845
2 13.178126
3  2.785939
4 46.187129
5 18.558425 
```

在 bin.cpp 文件中重新讨论速度问题

```
#include <Rcpp.h>

using namespace Rcpp;

// [[Rcpp::export]]
SEXP bin1(SEXP x, SEXP lo, SEXP hi)
{
    const int len = Rf_length(x);
    const double lower = REAL(lo)[0], upper = REAL(hi)[0];
    SEXP out = PROTECT(Rf_allocVector(LGLSXP, len));

    double *xp = REAL(x);
    int *outp = LOGICAL(out);
    for (int i = 0; i < len; ++i)
    outp[i] = (xp[i] - lower) * (xp[i] - upper) <= 0;

    UNPROTECT(1);
    return out;
}

// [[Rcpp::export]]
LogicalVector bin2(NumericVector x, NumericVector lo, NumericVector hi)
{
    NumericVector xx(x);
    double lower = as<double>(lo);
    double upper = as<double>(hi); 

    LogicalVector out(x);
    for( int i=0; i < out.size(); i++ )
        out[i] = ( (xx[i]-lower) * (xx[i]-upper) ) <= 0;

    return out;
}

// [[Rcpp::export]]
LogicalVector bin3(NumericVector x, const double lower, const double upper)
{
    const int len = x.size();
    LogicalVector out(len);

    for (int i=0; i < len; i++)
        out[i] = ( (x[i]-lower) * (x[i]-upper) ) <= 0;

    return out;
} 
```

有时间

```
> library(Rcpp)
> sourceCpp("bin.cpp")
> microbenchmark(bin1(x, 3, 5), bin2(x, 3, 5), bin3(x, 3, 5),                   
+                in.interval_c(x, 3, 5), times=1000)                            
Unit: milliseconds                                                              
                    expr       min        lq    median        uq      max       
1          bin1(x, 3, 5)  1.546703  2.668171  2.785255  2.839225 144.9574       
2          bin2(x, 3, 5) 12.547456 13.583808 13.674477 13.792773 155.6594       
3          bin3(x, 3, 5)  2.238139  3.318293  3.357271  3.540876 144.1249       
4 in.interval_c(x, 3, 5)  1.545139  2.654809  2.767784  2.822722 143.7500 
```

大约相等的部分加速来自使用常量`len`而不是`out.size()`循环边界，并且分配逻辑向量而不初始化它（`LogicalVector(len)`因为它将在循环中初始化）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T12:36:37.610

如果你可以处理`NA`s，你可以使用`.bincode`：

```
.bincode(c(2,4,6), c(3, 5))
[1] NA  1 NA

library(microbenchmark)
set.seed(42)
x = runif(1e8, 1, 10)
microbenchmark(in.interval(x, 3, 5),
               findInterval(x,  c(3, 5)),
               .bincode(x, c(3, 5)),
               times=5)

Unit: milliseconds
                      expr       min        lq    median       uq      max
1     .bincode(x, c(3, 5))  930.4842  934.3594  955.9276 1002.857 1047.348
2 findInterval(x, c(3, 5)) 1438.4620 1445.7131 1472.4287 1481.380 1551.419
3     in.interval(x, 3, 5) 2977.8460 3046.7720 3075.8381 3182.013 3288.020 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-20T10:56:46.267

我能找到的主要加速是通过对函数进行字节编译。即使是 Rcpp 解决方案（尽管使用 Rcpp 糖，而不是更深入的 C 解决方案）也比编译的解决方案慢。

```
library( compiler )
library( microbenchmark )
library( inline )

in.interval <- function(x, lo, hi) (x > lo & x < hi)
in.interval2 <- cmpfun( in.interval )
in.interval3 <- function(x, lo, hi) {
  sapply( x, function(xx) { 
    xx > lo && xx < hi }
          )
}
in.interval4 <- cmpfun( in.interval3 )
in.interval5 <- rcpp( signature(x="numeric", lo="numeric", hi="numeric"), '
NumericVector xx(x);
double lower = Rcpp::as<double>(lo);
double upper = Rcpp::as<double>(hi);

return Rcpp::wrap( xx > lower & xx < upper );
')

x <- c(2, 4, 6)
lo <- 3
hi <- 5

microbenchmark(
  in.interval(x, lo, hi),
  in.interval2(x, lo, hi),
  in.interval3(x, lo, hi),
  in.interval4(x, lo, hi),
  in.interval5(x, lo, hi)
) 
```

给我

```
Unit: microseconds
                     expr    min      lq  median      uq    max
1  in.interval(x, lo, hi)  1.575  2.0785  2.5025  2.6560  7.490
2 in.interval2(x, lo, hi)  1.035  1.4230  1.6800  2.0705 11.246
3 in.interval3(x, lo, hi) 25.439 26.2320 26.7350 27.2250 77.541
4 in.interval4(x, lo, hi) 22.479 23.3920 23.8395 24.3725 33.770
5 in.interval5(x, lo, hi)  1.425  1.8740  2.2980  2.5565 21.598 
```

* * *

编辑：在其他评论之后，这是一个更快的 Rcpp 解决方案，使用给出绝对值的技巧：

```
library( compiler )
library( inline )
library( microbenchmark )

in.interval.oldRcpp <- rcpp( 
  signature(x="numeric", lo="numeric", hi="numeric"), '
    NumericVector xx(x);
    double lower = Rcpp::as<double>(lo);
    double upper = Rcpp::as<double>(hi);

    return Rcpp::wrap( (xx > lower) & (xx < upper) );
    ')

in.interval.abs <- rcpp( 
  signature(x="numeric", lo="numeric", hi="numeric"), '
    NumericVector xx(x);
    double lower = as<double>(lo);
    double upper = as<double>(hi); 

    LogicalVector out(x);
    for( int i=0; i < out.size(); i++ ) {
      out[i] = ( (xx[i]-lower) * (xx[i]-upper) ) <= 0;
    }
    return wrap(out);
    ')

in.interval.abs.sugar <- rcpp( 
  signature( x="numeric", lo="numeric", hi="numeric"), '
    NumericVector xx(x);
    double lower = as<double>(lo);
    double upper = as<double>(hi); 

    return wrap( ((xx-lower) * (xx-upper)) <= 0 );
    ')

x <- runif(1E5)
lo <- 0.5
hi <- 1

microbenchmark(
  in.interval.oldRcpp(x, lo, hi),
  in.interval.abs(x, lo, hi),
  in.interval.abs.sugar(x, lo, hi)
)

all.equal( in.interval.oldRcpp(x, lo, hi), in.interval.abs(x, lo, hi) )
all.equal( in.interval.oldRcpp(x, lo, hi), in.interval.abs.sugar(x, lo, hi) ) 
```

给我

```
1       in.interval.abs(x, lo, hi)  662.732  666.4855  669.939  690.6585 1580.707
2 in.interval.abs.sugar(x, lo, hi)  722.789  726.0920  728.795  742.6085 1671.093
3   in.interval.oldRcpp(x, lo, hi) 1870.784 1876.4890 1892.854 1935.0445 2859.025

> all.equal( in.interval.oldRcpp(x, lo, hi), in.interval.abs(x, lo, hi) )
[1] TRUE

> all.equal( in.interval.oldRcpp(x, lo, hi), in.interval.abs.sugar(x, lo, hi) )
[1] TRUE 
```

# java - gwt画布的命中区域？

> ID：13970343
> 
> 赞同：0
> 
> 时间：2012-12-20T10:43:47.157
> 
> 标签：java, gwt

我阅读了关于[canvas 的 HTML5 命中区域](http://www.rgraph.net/blog/2012/october/new-html5-canvas-features.html)，它为 JS 描述了它：`context.addHitRegion({ id: 'The First Button' });`

GWT Canvas 有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:15:52.033

所以我不是 100% 确定这是否是官方 Canvas 规范的一部分（[新 HTML5 画布方法：addHitRegion](https://stackoverflow.com/questions/12115597/new-html5-canvas-method-addhitregion)）。

它似乎是该规范的最新补充，因此尚不清楚它是否已被任何浏览器支持（[新 HTML5 Canvas API 支持](https://stackoverflow.com/questions/13378885/new-html5-canvas-api-support)）。

Canvas 的 GWT 包装器很可能**没有**函数`addHitRegion`。[然而，扩展Canvas](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/canvas/client/Canvas.html)类并添加一个`addHitRegion`对本机 Javascript 函数进行 JSNI 调用的函数相当容易。

# php - 出现错误致命错误：第 1 行未定义的类常量“PER_COUNTRY”

> ID：13970344
> 
> 赞同：1
> 
> 时间：2012-12-20T10:43:47.990
> 
> 标签：php

```
<?php
$name=DateTimeZone::listIdentifiers(DateTimeZone::PER_COUNTRY, "US");
print_r($name);
?> 
```

在本地主机中工作正常。但是当我在线尝试时，我收到错误致命错误：第 1 行未定义的类常量“PER_COUNTRY”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:45:17.810

那是 PHP 5.3 或更高版本的函数。因此，您的实时服务器上的服务器版本不是 >= PHP 5.3

见这里：[http ://www.php.net/manual/en/datetimezone.listidentifiers.php](http://www.php.net/manual/en/datetimezone.listidentifiers.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:46:45.577

检查您的 PHP 版本：PER_COUNTRY 是在 5.3.0 中添加的

# c++ - psapi.h 中缺少 EnumProcessModulesEx

> ID：13970345
> 
> 赞同：2
> 
> 时间：2012-12-20T10:43:51.867
> 
> 标签：c++, win64

我正在尝试枚举在 Windows 中运行的所有进程，包括 32 位和 64 位，对于 64 位我需要调用 EnumProcessModulesEx，它在我正在使用的 Devc++ 的 psapi.h 中不可用，所以我下载了 Windows8 SDK。

所以现在我定义了 EnumProcessModulesEx 的 psapi.h，但是当我将它包含在我的项目中时，它给了我各种错误。我包含了包含 SDK 附带的所有头文件的目录的路径，我应该做什么？

这是错误列表：

```
 main.cpp:35: error: `K32EnumProcessModulesEx' cannot be used as a function
    main.cpp:63: error: `K32EnumProcessModulesEx' cannot be used as a function
    main.cpp:65: error: `K32GetModuleBaseNameA' cannot be used as a function

    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:89: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:90: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:90: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:91: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:92: error: `_Out_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:93: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:97: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:98: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:99: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:99: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:100: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:101: error: `_Out_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:102: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:106: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:107: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:108: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:108: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:109: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:110: error: `_Out_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:111: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:112: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:116: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:117: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:118: error: `_In_opt_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:119: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:119: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:120: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:121: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:125: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:126: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:127: error: `_In_opt_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:128: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:128: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:129: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:130: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:139: error: expected constructor, destructor, or type conversion before '(' token
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:139: error: expected `,' or `;' before '(' token
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:152: error: expected constructor, destructor, or type conversion before '(' token
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:152: error: expected `,' or `;' before '(' token
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:181: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:182: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:183: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:184: error: `_Out_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:185: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:186: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:191: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:192: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:271: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:272: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:273: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:273: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:274: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:275: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:279: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:280: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:281: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:281: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:282: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:283: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:287: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:288: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:304: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:305: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:306: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:306: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:307: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:308: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:312: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:313: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:314: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:314: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:314: error: `_Out_writes_bytes_to_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:315: error: `_Inout_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:316: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:320: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:321: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:322: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:323: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:323: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:324: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:325: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:329: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:330: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:331: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:332: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:332: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:333: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:334: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:344: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:345: error: `cb' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:345: error: `_Out_writes_bytes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:346: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:347: error: `_Out_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:348: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:353: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:354: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:355: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:355: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:356: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:357: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:361: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:362: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:363: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:363: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:364: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:365: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:376: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:377: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:378: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:378: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:379: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:380: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:384: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:385: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:386: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:386: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:387: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:388: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:499: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:500: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:501: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:501: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:502: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:503: error: initializer expression list treated as compound expression
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:507: warning: `__stdcall__' attribute only applies to function types
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:508: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:509: error: `nSize' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:509: error: `_Out_writes_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:510: error: `_In_' was not declared in this scope
    C:/Program Files (x86)/Windows Kits/8.0/Include/um/Psapi.h:511: error: initializer expression list treated as compound expression 
```

# xml - 如何总结 XSL 中的数字变量？

> ID：13970356
> 
> 赞同：0
> 
> 时间：2012-12-20T10:44:32.883
> 
> 标签：xml, xslt, numbers

我是 XSL 的新手，我正在编写下一个代码来计算 Win 值的总和。

```
<xsl:variable name="WinAmount">
        <xsl:number value="number(0)"/>
        <xsl:for-each select="Event">
            <xsl:if test="SpinTheReelsInfo">
                <xsl:number value="number(number($WinAmount) + number(SpinTheReelsInfo/Win))"/>
            </xsl:if>   
            <xsl:if test="SpinFreeReelsInfo">
                <xsl:number value="number(number($WinAmount) + number(SpinFreeReelsInfo/Win))"/>
            </xsl:if>               
        </xsl:for-each>

    </xsl:variable>
    <xsl:value-of select="$WinAmount"/> 
```

在我的 xml 文件中，win 标签与下一个值匹配。

```
<Win>0</Win>
....
<Win>20</Win>
.....
<Win>200</Win> 
```

但结果是 121201 我认为这是因为数字连接并且每个数字都增加了。

但是为什么会这样呢？我怎样才能总结它们？我可以使用哪个运算符？请帮我！谢谢！

**更新：我的 XML**

```
<Game>
            <GameSeqNo>1</GameSeqNo>
            <Event>
                <Time>2012-12-20T08:24:26Z</Time>
                <SpinTheReelsInfo>
                    <Win>0</Win>
                    <JP>0</JP>
                </SpinTheReelsInfo>
            </Event>
            <Event>
                <Time>2012-12-20T08:24:42Z</Time>
                <PickFieldInfo>
                </PickFieldInfo>
            </Event>
            <Event>
                <Time>2012-12-20T08:25:07Z</Time>
                <SpinFreeReelsInfo>
                    <Win>20</Win>
                    <JP>0</JP>
                </SpinFreeReelsInfo>
            </Event>
            <Event>
                <Time>2012-12-20T08:25:18Z</Time>
                <SpinFreeReelsInfo>
                    <Win>200</Win>
                    <JP>0</JP>
                </SpinFreeReelsInfo>
            </Event>
</Game> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:08:08.030

我认为我在评论中的建议就足够了，这是一个完整的样式表：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:template match="Game">
  <xsl:value-of select="sum(Event/SpinTheReelsInfo/Win | Event/SpinFreeReelsInfo/Win)"/>
</xsl:template>

</xsl:stylesheet> 
```

输出是`220`。

# java - 正则表达式截断字符串

> ID：13970364
> 
> 赞同：8
> 
> 时间：2012-12-20T10:44:52.287
> 
> 标签：java, regex

在这里截断一个字符串是我正在使用的：

```
String test1 = "this is test truncation 1.pdf";     
String p1 = test1.substring(0, 10) + "...";
System.out.println(p1); 
```

输出是 'this is te...' 如何访问文件扩展名以便输出变为：'this is te... pdf' 我可以使用子字符串方法访问最后三个字符，但其他文件扩展名可能是长度为 4 个字符，例如 .aspx

有没有我可以使用的正则表达式，以便“这是测试截断 1.pdf”变成“这是 te...pdf”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:54:52.543

您可以通过这样的快速正则表达式替换来完成所有操作：

```
test1.replaceAll("(.{0,10}).*(\\..+)","$1...$2") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:49:53.870

像这样做 ：

```
String[] parts = test1.split("\\.");
String ext = parts[parts.length-1];
String p1 = test1.substring(0, 10) + "..."+ext;
System.out.println(p1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:52:25.837

你可以简单地使用

```
test1.substring(0, 10) + "..." + test1.substring(test1.lastIndexOf('.')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:47:13.183

对于这个简单的任务，您不需要 Regex

```
String p1 = test1.substring(0, 10) + "..." + test1.substring(test1.lastIndexof('.')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T10:47:17.993

试试这个 -

```
String test1 = "this is test truncation 1.pdf";
String[] test2 = test1.split("\\.");     
String p1 = test1.substring(0, 10) + "..." + test2[test2.length-1];
System.out.println(p1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T10:48:31.437

你可以使用`.+[.](.*?)`

这匹配所有字符，包括点，然后是点，然后是任何字符，但不是贪心的，所以第一部分应该抓住最后一个点之前的所有字符串。捕获组将允许您检索所需的部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T10:59:06.590

我使用这种方法，但只有当你有单个“。”时它才会起作用。还有一个也用于文件扩展名。可能这是一种新手方法，因为你也可以使用 String 类的 split 方法......

```
 String str="abcdefg ghi.pdf";
    int dotIndex=str.indexOf(".")+1;
    if(str.indexOf(" ", dotIndex)!=-1)
        System.out.println(str.substring(dotIndex,str.indexOf(" ", dotIndex) ));
    else
    {
        System.out.println(str.substring(dotIndex,str.length() ));
    } 
```

# django - django 中的密集工作视图崩溃 gunicorn 工作线程

> ID：13970366
> 
> 赞同：3
> 
> 时间：2012-12-20T10:44:59.187
> 
> 标签：django, gunicorn

我有一个 django 应用程序，可以在上传照片时对照片进行一些处理。这个处理大约需要 100 毫秒。

我正在使用 Django 在 nginx 后面运行 gunicorn。

目前这是同步完成`subprocess`的，我用来调用处理，获取结果并在 HTTP 请求的框架内返回结果。

问题是，虽然实际处理只需要大约 100 毫秒，但视图有时需要很多秒才能返回，导致 gunicorn 工作线程崩溃并显示如下消息：

```
2012-12-18 15:01:04 [31620] [CRITICAL] WORKER TIMEOUT (pid:31626)
2012-12-18 15:01:05 [31620] [CRITICAL] WORKER TIMEOUT (pid:31626)
2012-12-18 15:01:05 [31957] [INFO] Booting worker with pid: 31957 
```

（日志级别为`DEBUG`，我没有进一步的输出）。有时它会关闭整个网络服务器。

有什么办法可以缓解这个问题吗？目前流量还不够高，无法考虑将处理放在队列中并进行异步通信（即使这样，我们也希望阻塞并仍然在 HTTP 请求的上下文中返回）。

任何人都可以深入了解问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:03:02.283

我通过使用[eventlet](http://eventlet.net/)线程解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:52:53.113

对于耗时的例程，异步执行是一个很好的解决方案。[Celery](http://www.celeryproject.org/)库非常适合这种工作。并且入门水平相对较低。

# jquery - 渲染后没有触发主干视图事件

> ID：13970369
> 
> 赞同：0
> 
> 时间：2012-12-20T10:45:03.583
> 
> 标签：jquery, backbone.js

我有这样的骨干观点

```
define(['backbone','text!templates/settings.html'], function( Backbone, SettingsTemplate) {
var SettingsView = Backbone.View.extend({
    el:"#settings-screen",

    viewTemplate: _.template(SettingsTemplate),

    events: {
        "click button#save-settings":"save"
    },

    initialize: function() {

    },

    render: function() {
        $("#game-viewport").html(this.viewTemplate);
    },

    save: function(event) {
        console.log(event);
    }
});

return SettingsView; 
```

});

这是通过我的路由器初始化的视图

```
define(['backbone','views/settings'], function(Backbone,SettingsView) {

    var Router = Backbone.Router.extend({

        routes: {
            "newgame":"showGameview",
            "settings":"showSettingsview"
        },

        switchView: function(view) {
            if(this.currentView)
                this.currentView.close()

            this.currentView = view;
            this.currentView.render();
        },

        showGameview: function() {

        },

        showSettingsview: function() {
            var view = new SettingsView;
            this.switchView(view);
        }
    });
    return Router;
}); 
```

这会启动应用程序

```
require.config({

    paths: {
        'backbone':'./libs/backbone',
        'underscore':'./libs/underscore-min',
        'text':'./plugins/text',
        'domReady':'./plugins/domReady'
    },
    shim:{
        'backbone': {
            deps: ['underscore'],
            exports: 'Backbone'
        }
    }
});

require(['domReady','views/start','routers/router'], function(domReady, StartView, Router) {
    domReady(function() {
        var view = new StartView;
        view.render();

        var router = new Router();
        Backbone.history.start();
    });
}); 
```

但是在视图被渲染后，事件不会触发。有什么问题？

# ruby - Ruby：替换捕获的字符串部分的优雅方法

> ID：13970371
> 
> 赞同：4
> 
> 时间：2012-12-20T10:45:05.403
> 
> 标签：ruby, regex

我想做一个字符串替换，如果我在两个术语之间找到一个字符串，我会替换它，所以当我有一个字符串时：

```
"123 pre 456 post" 
```

我可以得到：

```
"123 pre 789 post" 
```

我可以通过执行以下操作来做到这一点：

```
string.sub(/(pre\s+)\S+(\s+post)/, "\\1789\\2") 
```

但是，如果可能的话，我想避免使用这两个捕获。事实上，我想改用这样的正则表达式：`/pre\s+(\S+)\s+post/`获取捕获的范围，然后替换它。有没有办法做到这一点（使用标准的 Ruby 库）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:05:50.927

你可以这样做：

```
"123 pre 456 post".sub(/(?<=pre)\s+\S+\s+(?=post)/, ' 789 ') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:43:20.807

`[]=`操作员会这样做，尽管它会在适当的位置修改字符串

```
s = "123 pre 456 post"
s[/pre\s+(\S+)\s+post/] = '789' 
```

替换整个 rexep 匹配，并且

```
s = "123 pre 456 post"
s[/pre\s+(\S+)\s+post/, 1] = '789' 
```

替换指定的捕获组（您也可以使用命名的捕获组来执行此操作）。

应该适用于 1.8.7（尽管我认为那里没有命名的捕获组）和 1.9

# uiview - 使 UIView 或 CALayer 变暗的最快方法（性能方面）

> ID：13970373
> 
> 赞同：2
> 
> 时间：2012-12-20T10:45:12.307
> 
> 标签：uiview, calayer, alphablending

我有一个 UIView / CALayer 我想变暗。我怎样才能尽快变暗呢？有什么办法可以避免混合？

我知道以下替代方案

*   创建一个不透明的 CALayer 并设置背景颜色和不透明度并将其添加为主图层上方的子图层
*   与上面使用 UIView 相同（可能会慢一点......？）
*   将视图/图层渲染到 UIImage 并使用 CoreGraphics 进行绘图（太慢且内容是动态/变化的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:20:58.817

有人给了我一个提示，让我在 superview/superlayer 上有一个深色背景，并设置我想要变暗的视图的 alpha。这样我就不需要添加额外的图层/视图。

这样做的潜在缺点是，如果 groupview 不透明度打开（iOS 7 及更高版本默认打开），您想要变暗的视图将在屏幕外渲染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:49:22.347

创建一个不透明的 CALayer 并设置背景颜色和不透明度并将其添加为主图层上方的子图层

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T05:12:44.530

我不得不做这样的事情。对于任何对实际代码感兴趣的人：

```
// assuming the view you're trying to darken is called 'mainUIView'
// make the dark layer the same size as the view you're overlaying
UIView *darkBackgroundView = [[UIView alloc] initWithFrame:mainUIView.frame];
CALayer *darkenLayer = darkBackgroundView.layer;
// background color
darkenLayer.backgroundColor = [UIColor blackColor].CGColor;
// transparency (0 is transparent, 1 is solid)
// you can adjust this for the level of darkness you prefer
darkenLayer.opacity = 0.75f;
[mainUIView addSubview:darkBackgroundView]; 
```

# c# - 从 TFS 获取最新版本的文件

> ID：13970374
> 
> 赞同：5
> 
> 时间：2012-12-20T10:45:11.520
> 
> 标签：c#

我正在尝试从 TFS 更新本地文件，但无法正常工作。我什至不知道它为什么会失败，因为 TFS 不会给我抛出异常或任何东西，它只是默默地蔑视我并且不更新任何东西。

```
public bool getLatest(string[] items)
{
    try
    {
        Workspace myWorkspace = createWorkspace();
        myWorkspace.Get(items, 
                        VersionSpec.Latest, 
                        RecursionType.Full, 
                        GetOptions.Overwrite);

        return true;
    }
    catch (Exception ex)
    {
        Tools.MessageLogger.LogError(ex.Message);
        return false;
    }
} 
```

我必须补充一点，与 TFS 的所有其他通信都很好，pendingchanges、签入或签出都正常工作。这很令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:09:53.627

虽然我对此一无所知，但我想我会稍微扩展一下我的评论，希望它可能会有所帮助（因为似乎没有其他人在回答）。

根据[文档](http://msdn.microsoft.com/en-us/library/bb139316%28v=vs.80%29.aspx)，`WorkSpace.Get()`应该返回一个[GetStatus](http://msdn.microsoft.com/en-US/library/microsoft.teamfoundation.versioncontrol.client.getstatus.getfailures%28v=vs.80%29.aspx)对象，该对象告诉您有多少警告/失败/冲突 - 目前您只是将这些信息丢弃。

如果您想以与记录其他错误相同的方式记录获取最新的失败，您可以尝试这种事情：

```
public bool getLatest(string[] items)
{
    try
    {
        Workspace myWorkspace = createWorkspace();

        var results = myWorkspace.Get(items, VersionSpec.Latest, RecursionType.Full, GetOptions.Overwrite);
        var failures = results.GetFailures();

        foreach(var fail in failures)
        {
            Tools.MessageLogger.LogError(fail.GetFormattedMessage());
        }

        return failures.Count == 0;
    }
    catch (Exception ex)
    {
        Tools.MessageLogger.LogError(ex.Message);
        return false;
    }
} 
```

我确实是在文本编辑器而不是适当的 IDE 中编写的，所以如果我打错字/做了一些愚蠢的事情，我深表歉意。

# opencv - 使用 Cmake 配置 c++ OpenCV 项目

> ID：13970377
> 
> 赞同：41
> 
> 时间：2012-12-20T10:45:15.763
> 
> 标签：opencv, cmake

我认为这是创建使用 OpenCV 库的项目的基本步骤，因此您无需手动包含所有库。没有关于这个主题的详细信息，至少对于一个只想尽快使用 OpenCV 的新手来说，所以：

**使用 Cmake 创建多平台 c++ OpenCV 的最简单且可扩展的方法是什么？**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-20T10:53:42.230

**首先：**创建一个文件夹**Project**，其中包含两个子文件夹**src**和**include**，以及一个名为**CMakeLists.txt**的文件。

**第二：**将您的 cpp 放在 src 文件夹中，将您的标头放在 include 文件夹中。

**第三：**您的 CMakeLists.txt 应如下所示：

```
cmake_minimum_required(VERSION 2.8) 
PROJECT (name)
find_package(OpenCV REQUIRED )
set( NAME_SRC
    src/main.cpp    
)

set( NAME_HEADERS       
     include/header.h
)

INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_SOURCE_DIR}/include )
link_directories( ${CMAKE_BINARY_DIR}/bin)
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)
add_executable( name ${NAME_SRC} ${NAME_HEADERS} )

target_link_libraries( sample_pcTest ${OpenCV_LIBS} ) 
```

**第四：**打开 CMake GUI 并选择根文件夹作为输入，并为输出创建一个构建文件夹。单击配置，然后生成，然后选择生成器（VisualStudio、Eclipse、...）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-05-27T15:42:39.480

我正在使用 opencv3.0 和 cmake3.8，下面的配置对我有用！

```
######## A simple cmakelists.txt file for OpenCV() #############  
cmake_minimum_required(VERSION 2.8)                            
PROJECT(word)                                         

FIND_PACKAGE( OpenCV REQUIRED )                              
INCLUDE_DIRECTORIES( ${OpenCV_INCLUDE_DIRS} )

ADD_EXECUTABLE(word main.c)                         
TARGET_LINK_LIBRARIES (word ${OpenCV_LIBS})         
########### end #################################### 
```

# javascript - 如何将整个字符串中的字符串替换为其他字符串

> ID：13970378
> 
> 赞同：1
> 
> 时间：2012-12-20T10:45:16.023
> 
> 标签：javascript, jquery-ui, jquery

我有一个字符串

```
 var countries = india*australia*pakistan*...
        var replace = countries.replace("*",","); 
```

然后它将给字符串作为

```
 replace = india,australia*pakistan*... 
```

我想将所有 * 替换为 , . 如何使用 jquery 或 javascript 来完成

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:46:07.013

像这样：

```
result = original.replace(/\*/g, ','); 
```

JavaScript 的[`String#replace`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11)函数可以接受字符串或正则表达式作为第一个参数。如果它是一个字符串，则替换只发生在第一个匹配项上。如果它是一个正则表达式，那么如果您指定`g`标志（全局），它将是第一个匹配项或所有匹配项。

正则表达式是`\*`，这意味着“匹配文字`*`”（您需要反斜杠，否则`*`对于正则表达式来说是特殊的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:46:01.120

您需要带有全局 (g) 标志的正则表达式：

```
var replace = countries.replace(/\*/g,","); 
```

[http://www.regextester.com/jssyntax.html](http://www.regextester.com/jssyntax.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:57:43.347

在你的情况下可能有点矫枉过正，但如果你打算多次做这种事情，考虑一下：

```
RegExp.escape = function(str) {
    return (str+'').replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
};

String.prototype.replaceAll = function(string, replacement) {
    return this.replace(new RegExp(RegExp.escape(string), "g"), replacement);
};

console.log("This*is*a*test".replaceAll("*", " ")); // logs 'This is a test' 
```

还负责转义搜索字符串（因此定义为`RegExp.escape`），因此您可以自由地将任何内容作为第一个参数`replaceAll`

# prestashop - 在 Prestashop 中重定向期间丢失的错误

> ID：13970382
> 
> 赞同：1
> 
> 时间：2012-12-20T10:45:26.283
> 
> 标签：prestashop

我已经覆盖了 Prestashop ordercontroller.php 文件。

其中有一个 switch 语句，它根据我们所处的步数执行某些任务。

当我在第 1 步时，如果出现某些错误，我需要返回第 0 步。现在，如果我重定向到第 0 步，我设置的错误就会丢失。我设置错误如下。

```
if(some condition)
{
      $this->errors[] = 'There is an error';
      Tools::redirect('index.php?controller=order');
} 
```

我认为发生的是 prestashop 在重定向中生成了一个新请求，并且控制器中设置的错误丢失了。现在有另一个选项可以更改步骤和 switch 语句，但由于 case 语句已经在执行，我似乎不可能切换步骤。

示例代码：

```
 switch($step)
  {
       case 0:
              //load the step 0
              break;

       case 1:
              //load the step 1
              checkforerrors();
              break;

       case 2:
              //load the step 2
              break;

       case 3:
              //load the step 3
              break;
  } 
```

现在第 1 步中的函数 checkforerrors() 想要转移到第 0 步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T19:53:32.463

尽管这个问题已经很老了，但它可能会对某人有所帮助：

PrestaShop 创建的重定向是一个 302 (HTTP) 重定向，它会导致用户的浏览器请求一个不同的 URL 作为一个全新的请求。这就是旧请求的错误丢失的原因。

无法在 PHP switch 语句的步骤之间切换（AFAIK），但您可以简单地将代码从第 0 步案例移到专用方法中。因此，如果您在第 1 步中遇到任何错误，您只需调用包含第 0 步相关代码的方法，就像您实际上在第 0 步时一样。

# .htaccess - Apache是 否可以设置为识别对文件夹的访问并重写它以与我的虚拟主机相同

> ID：13970387
> 
> 赞同：0
> 
> 时间：2012-12-20T10:45:36.153
> 
> 标签：.htaccess, apache2, virtualhost

我有一个本地测试站点设置为虚拟主机，'http://site.local' 工作正常，但是现在公司的其他人需要能够查看它。

他们可以通过“http://my.ip.add.ress/site”访问我的网站。有什么方法可以让 apache 或 htaccess 识别这些外部连接并“重写”它们，就像他们正在访问“site.local”一样

要求他们全部更改主机文件等是不可能的。

谢谢

# mysql - Hive 与 mysql 的集成

> ID：13970395
> 
> 赞同：2
> 
> 时间：2012-12-20T10:45:57.133
> 
> 标签：mysql, hadoop, hbase, hive, derby

我已经在 Hbase 上安装了带有 hadoop 的 Hive，我将数据库驱动程序的配置从 derby 更改为 `MySQL`，但我得到了这个异常

```
 FAILED: Error in metadata: javax.jdo.JDOFatalDataStoreException: Access denied for user 'DBAUSER'@'linux-96' (using password: YES) 
```

嵌套的Throwables：

```
 java.sql.SQLException: Access denied for user 'DBAUSER'@'linux-96' (using password: YES)
 FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
```

我已经在 localhost 上安装了 MySQL 并配置`hive-site.xml`为从此数据库中读取

我不知道问题出在哪里，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:07:25.907

这个问题主要与您的 MySQL 配置有关。

我敢打赌，问题出在您的 jdbc URL 配置中。错误说正在尝试连接到主机*linux-96*并且您提到您已在*localhost*中安装了 MySQL 服务器。

首先在您的本地主机中运行 MySQL 服务器并尝试打开一个客户端会话：

```
$ sudo service mysqld start
$ mysql -h localhost -u root -p 
```

您应该能够登录（如果没有搜索如何重置 MySQL root 密码）

在 MySQL 中创建您的目标数据库以及用户和密码，并在继续之前检查您是否可以通过命令行登录。

```
$ mysql -h localhost -u <user> -p<password> <database> 
```

然后检查你`hive-site.xml`的配置。你应该有这样的东西：

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:mysql://localhost:3306/database?createDatabaseIfNotExist=true</value>
</property>
<property>
  <name>javax.jdo.option.ConnectionDriverName</name>
  <value>com.mysql.jdbc.Driver</value>
</property>
<property>
  <name>javax.jdo.option.ConnectionUserName</name>
  <value>user</value>
</property>
<property>
  <name>javax.jdo.option.ConnectionPassword</name>
  <value>password</value>
</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:56:07.840

错误严格地说，您需要为 MySQL 表添加必要的权限。

在此处阅读有关 MySQL 权限的更多信息：http: [//dev.mysql.com/doc/refman/5.5/en/grant.html](http://dev.mysql.com/doc/refman/5.5/en/grant.html)
这是有用的教程： http: [//kb.mediatemple.net/questions/788/HOWTO%3A +GRANT+特权+in+MySQL#dv](http://kb.mediatemple.net/questions/788/HOWTO%3A+GRANT+privileges+in+MySQL#dv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:06:46.930

您的mysql密码已更改。这是唯一的原因。

我也有同样的错误，因为我的同事一言不发地更改了mysql密码

# android - Android：列表视图不起作用，滚动列表时图像正在更改

> ID：13970397
> 
> 赞同：2
> 
> 时间：2012-12-20T10:45:59.517
> 
> 标签：android, android-listview

在我的应用程序中，我有一个 listAdapter，我在其中从电话簿加载电话号码及其图像，如下所示

```
 public ProfileAdapter(Activity activity, int textViewResourceId, List<Profile> listCont,int renderer, String profileType) {
        super(activity, textViewResourceId, listCont);
        this.renderer = renderer;
        this.listCont = listCont;
        this.activity = activity;
        this.profileType=profileType;
    }

    public class ViewHolder {
        View rowView;
        public TextView textEmailId;
        public TextView textContNo;
        public TextView text;
        public QuickContactBadge photo;
        public ViewHolder(View view)
        {
             rowView = view;
        }
        public TextView getTextView()
        {
             if(text ==null)
                   text = (TextView) rowView.findViewById(R.id.name);
             return text;
        }
        public TextView getTextView1()
        {
             if(textContNo ==null)
                 textContNo = (TextView) rowView.findViewById(R.id.contactno);
             return textContNo;
        }
        public TextView getTextView2()
        {
             if(textEmailId ==null)
                 textEmailId = (TextView) rowView.findViewById(R.id.emailId);
             return textEmailId;
        }
        public QuickContactBadge getQuickContactBadge()
        {
             if(photo ==null)
                 photo = (QuickContactBadge) rowView.findViewById(R.id.quickContactBadge1);
             return photo;
        }

    }

    @Override 
    public View getView(int position, View convertView, ViewGroup parent) { 

    View view = convertView; 
    ViewHolder holder;

    if (view == null) { 
    LayoutInflater inflater = (LayoutInflater) (getContext() 
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE)); 
    view = inflater.inflate(renderer, null); 

    holder = new ViewHolder(view);

 holder.text = (TextView) view.findViewById(R.id.name); 
 holder.textContNo = (TextView) view.findViewById(R.id.contactno); 
 holder.textEmailId = (TextView) view.findViewById(R.id.emailId);  
 holder.photo = (QuickContactBadge ) view.findViewById(R.id.quickContactBadge1);

 view.setTag(holder);
    } else {
        holder =(ViewHolder) view.getTag();
    }

 Profile contact = listCont.get(position); 
    holder.text.setText(contact.getName()); 

    QuickContactBadge photo = (QuickContactBadge ) view.findViewById(R.id.quickContactBadge1);  
    photo.setTag(contact.getMobileNo()); 
    new LoadImage(photo).execute(contact.getMobileNo()); 

    contact.getName(); 
    contact.getId(); 
        holder.textContNo.setText(contact.getNumber());
        holder.textEmailId.setText(contact.getEmail());
        return view;
    } 
```

我正在使用 asynctask 加载图像，如下所示

```
 class LoadImage extends AsyncTask<String, Void, Bitmap>{ 

        private QuickContactBadge qcb; 

        public LoadImage(QuickContactBadge qcb) { 
        this.qcb= qcb; 
        } 
        @Override 
        protected Bitmap doInBackground( final String... params) { 
        activity.runOnUiThread(new Runnable() { 
        public void run() { 
        new QuickContactHelper(activity, qcb, (String) params[0]).addThumbnail(); 
        } 
        }); 
        return null; 
        } 
        @Override 
        protected void onPostExecute(Bitmap result) { 

        } 
```

每次滚动时，我都会在滚动列表视图时遇到问题，因为每个联系人的图像都在变化，滚动也不流畅。我不知道我在代码中做错了什么。感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:05:20.457

它运行得很慢，因为您没有在后台线程上执行任何操作。

```
 activity.runOnUiThread(new Runnable() { 
    public void run() { 
    new QuickContactHelper(activity, qcb, (String) params[0]).addThumbnail(); 
    } 
    }); 
```

您只是要求在 UI 线程上重新执行。

图像不断变化，因为它显示了滚动之前的图像，并且在该过程完成后它会放置新图像。您应该在 getView 上放置一些空白图像或图像占位符，使其为空白，然后是图像。

也尝试做一些缓存。检查 LruCache。

**编辑：**

在编写如何为 ImageView 编写代码并且您可以更改必要部分之前，我从未使用过 QuickContactBadge。在getView里面

```
public View getView(int position, View convertView, ViewGroup parent) {
   // all that processing to get the data then...
   img.setImageResource(R.id.blank_user); // put something image placeholder (blank)
   new LoadImage(img).execute(url); // download

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:46:56.570

尝试将`null`值设置为`ImageView`,

```
public View getView(int position, View convertView, ViewGroup parent) {

   img.setImageResource(null); 
   new LoadImage(img).execute(url); 

} 
```

这个对我有用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T12:18:44.740

我建议你看看这个博客：[https ://sriramramani.wordpress.com/2012/07/22/recycling-listview-rows/](https://sriramramani.wordpress.com/2012/07/22/recycling-listview-rows/)

核心代码在这里：

```
theListView.setRecyclerListener(new RecyclerListener() {
@Override
public void onMovedToScrapHeap(View view) {
    // Cast the view to the type of the view we inflated.
    MyCustomListRow row = (MyCustomListRow) view;

    // Get the view that holds the image and nullify the drawable.
    // GC will take care of cleaning up the memory used.
    row.getThatImageDrawableView().setImageDrawable(null);
}}); 
```

# asp.net - 注册时如何检查现有用户名

> ID：13970399
> 
> 赞同：1
> 
> 时间：2012-12-20T10:46:01.893
> 
> 标签：asp.net, vb.net

我想检查用户名是否已经存在。这是我已经达到的，但它不起作用。

```
 Dim cmdstr As String = "Select count(*) from Registration where username = '" & txtName.Text & "'"
 Dim userExist As SqlCommand = New SqlCommand(cmdstr, con)
 Dim temp As Integer = Convert.ToInt32(userExist.ExecuteScalar().ToString())
    If (temp = 1) Then
       Response.Write("user name is already Exist!!")
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:52:42.767

1.  您对[**SQL-Injection**](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)开放。不要将字符串连接到 sql-query 但使用[`SqlParameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)
2.  你还没有打开连接（我假设）

这是一个完整的示例：

```
Public Shared Function GetUserCount(userName As String) As Int32
    Const sql = "SELECT COUNT(*) FROM Registration where username = @UserName"
    Using con As New SqlConnection(connectionString)
        Using cmd = New SqlCommand(sql, con)
            cmd.Parameters.AddWithValue("@UserName", userName)
            con.Open()
            Using reader = cmd.ExecuteReader()
                If reader.HasRows
                    reader.Read()
                    Dim count As Int32 = reader.GetInt32(0)
                    Return count
                End If
            End Using
        End Using
    End Using
End Function 
```

并以这种方式使用该方法：

```
Dim userCount As Int32 = GetUserCount(txtName.Text.Trim())
If userCount > 0
    LblWarning.Text = "User-name already exists!"
End If 
```

# jquery - 切换显示/隐藏 optgroup 子 jquery

> ID：13970402
> 
> 赞同：1
> 
> 时间：2012-12-20T10:46:14.990
> 
> 标签：jquery, html, hide, toggle, show

我有一个很长的选项列表，用 optgroups 分隔。我试图让每个 optgroup 在单击时显示/隐藏其子项：

```
$("optgroup").toggle(function(){
    $(this).children().show();
}, function() {
    $(this).children().hide();
}); 
```

选项列表：

```
<form>
<select>
<optgroup label="a">
<option id="a1">a1</option>
<option id="a2">a2</option>
<option id="a3">a3</option>
<option id="a4">a4</option>
</optgroup>

<optgroup label="b">
<option id="b1">b1</option>
<option id="b2">b2</option>
<option id="b3">b3</option>
<option id="b4">b4</option>
</optgroup>
</select>
</form> 
```

当我单击 optgroup 时，它不会切换显示子项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:59:02.463

您的切换事件永远不会执行，因为您无法选择 optgroup。

我建议使用 2 个选择元素。选择第一个中的 optgroup，然后使用相关选项更新第二个。

# solaris - 在 Solaris 服务器中卸载 .pkg 的命令

> ID：13970406
> 
> 赞同：0
> 
> 时间：2012-12-20T10:46:33.090
> 
> 标签：solaris

如何在 solaris 中卸载 .pkg？我们有安装 pkgadd -d one.pkg 的命令。同样，我们可以有卸载命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:11:09.110

没有直接的方法，因为包含包的文件的名称可以是任何东西。您需要检索包名称才能将其删除。

这可以使用该 oneliner（ksh 或 bash）来完成：

```
# pkgrm $(pkginfo -d one.pkg | nawk '{print $2}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:48:02.700

```
pkgrm <pkg_name> 
```

要知道包名称，请运行以下命令

```
pkginfo -l <word_in_package_name> 
```

# c++ - 带有模板类参数的模板类特化

> ID：13970407
> 
> 赞同：2
> 
> 时间：2012-12-20T10:46:36.683
> 
> 标签：c++, templates, specialization

说我有：

```
template < typename T >
class ClassA 
{
    void doTheStuff (T const * t);
};

template < typename T >
class ClassB
{
    // Some stuff...
}; 
```

我想为 ClassB 模板的所有实例专门化 doTheStuff 方法，如下所示：

```
template <typename T>
void ClassA< ClassB< T > >::doTheStuff (ClassB< T > const * t)
{
    // Stuff done in the same way for all ClassB< T > classes
} 
```

但是，当然，这是行不通的。遗憾的是我不知道我怎么能做到这一点。

使用 Visual Studio 的编译器，我得到：

```
 error C2244: 'ClassA<T>::doTheStuff' : unable to match function definition to an existing declaration
 see declaration of 'ClassA<T>::doTheStuff'
    definition
    'void ClassA<ClassB<T>>::doTheStuff(const ClassB<T> *)'
    existing declarations
    'void ClassA<T>::doTheStuff(const T *)' 
```

我找到了这篇文章：[模板类专业化，其中模板参数是模板](https://stackoverflow.com/questions/4189945/templated-class-specialization-where-template-argument-is-a-template)

所以我按照建议尝试了全类专业化，但它也不起作用：

```
template <>
template < typename U >
class ClassA< ClassB< U > >
{
public:
    void doTheStuff (ClassB< U > const * b)
    {
        // Stuff done in the same way for all ClassB< T > classes
    }
}; 
```

视觉 说：

```
error C2910: 'ClassA<ClassB<U>>' : cannot be explicitly specialized 
```

欢迎任何帮助！

浮法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:53:23.773

删除多余的`template<>`，它将起作用。

# wordpress - 我们如何向我们的网站添加另一个左侧边栏

> ID：13970408
> 
> 赞同：1
> 
> 时间：2012-12-20T10:46:37.440
> 
> 标签：wordpress, twitter-bootstrap, sidebar

我在使用引导主题的 wordpress 上工作。我在我的站点上使用主左侧边栏。当我将代码放入 WIDGETS> MainSidebar 但现在我有一个问题，点击链接时我想打开另一个与我的主页相同的页面页面但侧边栏不同。我怎样才能实现它？

这是我的引导模板：页面模板（page.php）

```
<?php
/** page.php
 *
 * The template for displaying all pages.
 *
 * This is the template that displays all pages by default.
 * Please note that this is the WordPress construct of pages
 * and that other 'pages' on your WordPress site will use a
 * different template.
 *
 * @author      Konstantin Obenland
 * @package     The Bootstrap
 * @since       1.0.0 - 07.02.2012
 */

get_header(); ?>

<div id="primary" class="span9">
    <?php tha_content_before(); ?>
    <div id="content" role="main">
        <?php tha_content_top();

        the_post();
        get_template_part( '/partials/content', 'page' );
        comments_template();

        tha_content_bottom(); ?>
    </div><!-- #content -->
    <?php tha_content_after(); ?>
</div><!-- #primary -->

<?php
get_sidebar();
get_footer();

/* End of file page.php */
/* Location: ./wp-content/themes/the-bootstrap/page.php */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:02:44.737

您必须有两个不同的侧边栏。将侧边栏代码放在您喜欢的自定义模板名称中。

查看如何创建自定义模板[链接](http://codex.wordpress.org/Pages)

并使用类似的 wordpress 条件标签。

```
if(is_page( 2 )){ // 2 是页面 id
get_template_part('自定义'，'侧边栏'); // (custom-sidebar.php)
}
别的{
get_sidebar();
}

```

[条件标签](http://codex.wordpress.org/Conditional_Tags)

通过这种方式，您可以在不同的页面上有 2 个侧边栏。

# php - PHP - 一串特殊字符的正则表达式

> ID：13970412
> 
> 赞同：11
> 
> 时间：2012-12-20T10:47:01.130
> 
> 标签：php, regex

早上好。我正在尝试确定字符串是否包含特定字符的列表。

我知道我应该为此使用[preg_match](http://php.net/manual/en/function.preg-match.php)，但我的正则表达式知识很糟糕，我无法从本网站的其他帖子中收集任何信息。因为他们中的大多数只想将字符串限制为 az、AZ 和 0-9。但我确实希望允许一些特殊字符，例如：`! @ £`和其他不在下面的字符串中。

要匹配的字符：`# $ % ^ & * ( ) + = - [ ] \ ' ; , . / { } | \ " : < > ? ~`

```
private function containsIllegalChars($string)
{
    return preg_match([REGEX_STRING_HERE], $string);
} 
```

我最初用 Javascript 编写匹配，它只是遍历字符串中的每个字母，然后遍历另一个字符串中的每个字符，直到找到匹配项。回想起来，我不敢相信我什至试图使用这种古老的方法。随着 json 的出现（以及应用程序的重写！），我将匹配切换到 php，以通过 json 返回错误消息。

我希望正则表达式大师可以帮助将上述字符串转换为正则表达式字符串，但任何反馈都将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T11:09:29.020

“不允许的字符列表”的正则表达式不是强制性的。

你可以看看[`strpbrk`](http://php.net/strpbrk)。它应该做你需要的工作。

这是一个使用示例

```
$tests = array(
    "Hello I should be allowed",
    "Aw! I'm not allowed",
    "Geez [another] one",
    "=)",
    "<WH4T4NXSS474K>"
);
$illegal = "#$%^&*()+=-[]';,./{}|:<>?~";

foreach ($tests as $test) {
    echo $test;
    echo ' => ';
    echo (false === strpbrk($test, $illegal)) ? 'Allowed' : "Disallowed";
    echo PHP_EOL;
} 
```

[http://codepad.org/yaJJsOptT](http://codepad.org/yaJJsOpT)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T11:10:38.213

```
return preg_match('/[#$%^&*()+=\-\[\]\';,.\/{}|":<>?~\\\\]/', $string); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T11:10:35.180

```
$pattern = preg_quote('#$%^&*()+=-[]\';,./{}|\":<>?~', '#');

var_dump(preg_match("#[{$pattern}]#", 'hello world')); // false
var_dump(preg_match("#[{$pattern}]#", 'he||o wor|d')); // true
var_dump(preg_match("#[{$pattern}]#", '$uper duper')); // true 
```

可能，您可以缓存`$pattern`，具体取决于您的实现。

（*虽然在正则表达式之外看，你最好也[`strpbrk`](http://php.net/strpbrk)像这里提到*的那样）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-30T20:48:14.897

我认为通过包含您想要允许的字符可以大大简化您正在寻找的内容，如下所示：

```
preg_match('/[^\w!@£]/', $string) 
```

以下是正在发生的事情的快速细分：

*   [^] = 不包括在内
*   \w = 字母和数字
*   ！@ £ = 您还希望允许的字符列表

# javascript - 具有超时和值++ 的函数未根据需要更改活动类

> ID：13970414
> 
> 赞同：1
> 
> 时间：2012-12-20T10:47:02.887
> 
> 标签：javascript, jquery, settimeout

```
function anim() {
            clearTimeout(animTimeout);              
            $('#wrap .bullet').removeClass('active');
            imageindex++;
            $('#wrap .bullet:nth-child('+ imageindex +')').addClass('active');
            $('#wrap .images img').fadeOut();
            $('#wrap .images img:nth-child('+ imageindex +')').fadeIn();
            if($('#wrap .images img').length == imageindex) {
                imageindex = 0;
            }

    animTimeout = setTimeout(anim, 1500);
} 
```

这就是功能。它确实改变了图片，非常好地淡入淡出。这是一个幻灯片，.bullet 只是一个圆圈，通过单击可以跳转到某个图片。

顺便说一下，此功能可以让您跳转到您选择的任何图片：

```
 $('#wrap .bullets a').click(function(e){
  e.preventDefault();
            $('#wrap .images img').stop().attr('style', '');
            imageindex = parseInt($(this).data('i') );
            anim();
        }); 
```

但是，我希望当前图片项目符号处于活动状态，因此您不要说跳到上一张图片等...

anim() 函数给我的效果是，在第一张幻灯片上，所有的“.bullet”-s 都获得了一个 active 类，并且从第二张幻灯片中它们不再拥有它，直到它回到第一张幻灯片再次。为什么是这样？如果 imageindex 正在增长，我认为没有理由这样做......感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:50:14.393

两件事可能是您问题的根源

1- 动画可能被触发多次 2- imageindex 不稳定

我建议您`console.log('anim with ' + imageindex)`在 anim 的开头添加语句以检查 anim 被调用的次数和 imageindex 的值

还要确保你在使用它的任何其他 js 函数之上声明你的 imageindex 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:55:45.880

在你的情况下，我会替换你的全局变量 imageIndex ，这不是你想要实现的目标。

用这段代码替换它：

```
var animTimeout = null;

function anim() {
    clearTimeout(animTimeout);
    var activeIndex = $('#wrap .bullet.active') // select the active bullet
                         .removeClass('active') // remove its 'active' class
                         .next().addClass('active') // put 'active' class to the next item
                         .index(); // retrieve the new active item index
    if (activeIndex < 0) {
        // if end of list reached, put it on the first item
        activeIndex = $('#wrap .bullet').first().addClass('active').index();
    }
    // cancel previous animations before starting fadeOut and fadeIn
    $('#wrap .images img').stop().fadeOut().eq(activeIndex).fadeIn();
    animTimeout = setTimeout(anim, 1500);
}

$('#wrap .bullets a').click(function(e) {
    $('#wrap .images img').stop().attr('style', '');
    $('#wrap .bullet').removeClass('active');
    $('#wrap .bullet').eq($(this).parent().index() - 1).addClass('active');
    anim();
}); 
```

# java - 弹簧自动装配问题

> ID：13970421
> 
> 赞同：2
> 
> 时间：2012-12-20T10:47:22.200
> 
> 标签：java, spring-mvc, junit, annotations, autowired

我正在运行单元测试并使用服务类来执行一些业务逻辑。但是，尽管为它设置了 Autorwire 注释，但单元测试失败了，说服务类为空。

下面是我的单元测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:src/main/webapp/WEB-INF/FreedomSpring-servlet.xml" })
public class UserControllerTest
{
    private UserController controller;

    @Inject
    private ApplicationContext applicationContext;

    private String jsonUser = "{ \"username\":\"jonneymendoza\",\"emailAddress\":\"jon@google.com\", \"password\":\"12345678\",\"firstName\":\"jono\", \"surname\":\"richy\", \"country\":\"united kingdom\",\"bio\":\"Bio stuff goes here about the user. where he comes from etc etc. all is well. lets go go go\" }";

    @Before
    public void setup()
    {
        controller = new UserController();

        assertNotNull(applicationContext);
    }

    @Test
    public void testCreateNewAccount()
    {
        ResponseEntity<String> response = controller
                                          .createNewAccount(new HttpEntity<String>(jsonUser));
        assertEquals(HttpStatus.CREATED, response.getStatusCode());
    }
} 
```

这是我正在测试的控制器

```
@Controller
public class UserController
{
    @Autowired
    private UserService userService;

    @RequestMapping(value = "/user", method = RequestMethod.PUT, consumes = "application/json")
    public ResponseEntity<String>createNewAccount(HttpEntity<String>request)
    {
        userService.registerNewUser( JSONObject.fromObject(request.getBody())); //fails here

        return new ResponseEntity<String>(null, responseHeaders, HttpStatus.CREATED);
    }
} 
```

服务等级：

```
@Service("UserService")
@Transactional
public class UserService implements UserServiceInterface
{
    @Override
    public void registerNewUser(JSONObject user) throws InvalidDataException, JSONException
    {
        // parse json object to a User object
        User newUser = parseJsonObject(user);

        UserDao userDao = new UserDao();

        userDao.addNewUser(newUser);
    }
} 
```

我的服务配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config />

    <!-- Define services here -->

    <bean id="UserService" class="com.jr.freedom.user.UserService"></bean>
</beans> 
```

我的小服务程序：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans      
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>database.properties</value>
            </list>
        </property>
    </bean>

    <import resource="mvc-config.xml" />

    <import resource="service-config.xml" />

    <import resource="classpath:datasource-config.xml" />

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

    <context:component-scan base-package="com.jr.freedom.controllers"></context:component-scan>
</beans> 
```

最后我收到的错误

```
java.lang.NullPointerException
    at com.jr.freedom.controllers.UserController.createNewAccount(UserController.java:56)
    at com.jr.freedom.controllers.UserControllerTest.testCreateNewAccount(UserControllerTest.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:00:45.220

您需要从 applicationContext 注入（带有一些注释）或检索 userController，以便 Spring 魔术（即您的情况下的注入或 userService）起作用。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:src/main/webapp/WEB-INF/FreedomSpring-servlet.xml" })
public class UserControllerTest {

@Autowired
private UserController userController;

@Inject
private ApplicationContext applicationContext;

private String jsonUser = "{ \"username\":\"jonneymendoza\",\"emailAddress\":\"jon@google.com\", \"password\":\"12345678\",\"firstName\":\"jono\", \"surname\":\"richy\", \"country\":\"united kingdom\",\"bio\":\"Bio stuff goes here about the user. where he comes from etc etc. all is well. lets go go go\" }";

@Before
public void setup() {
    assertNotNull(applicationContext);
    assertNotNull(userController);

} 
```

# unix - 从文件中删除空行

> ID：13970427
> 
> 赞同：6
> 
> 时间：2012-12-20T10:47:37.353
> 
> 标签：unix, sed, grep

我需要从文件中删除空行（只有空格 - 不是空记录）。

以下命令仅适用于空行，但不适用于空格：

`sed '/^$/d' filename`

可以使用 grep 完成吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T10:48:41.720

用于`\s*`仅包含空格的空行：

```
 sed '/^\s*$/d' file 
```

要将更改保存回文件，请使用以下`-i`选项：

```
sed -i '/^\s*$/d' file 
```

编辑：

正则表达式`^\s*$`匹配仅包含空格的行，`grep -v`打印与给定模式不匹配的行，因此以下将打印所有非黑色行：

```
 grep -v '^\s*$' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T09:36:48.870

```
sed -i '/^[ \t]*$/d' file-name 
```

它将删除所有没有任何空行的空行。空白（空格或制表符），即文件中的（0个或更多）..

注意：方括号内有一个“空格”后跟“\ t”...

" `-i`" 将强制将更新的内容写回文件中...没有此标志，您可以看到屏幕上的空行已被删除，但实际文件不会受到影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T09:51:51.517

POSIX 可移植的方法是

```
sed -i '/^[[:blank:]]*$/d' file 
```

或者

```
grep -v '^[[:blank:]]*$' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T06:40:51.860

碰巧该文件是从 Windows 机器复制的 sed 命令 (sed '/^$/d' foo ) 没有正确运行。

我运行了以下命令并且它起作用了。

$ dos2unix 富

# linq - 无法从数据库中获取某些数据

> ID：13970429
> 
> 赞同：0
> 
> 时间：2012-12-20T10:47:37.633
> 
> 标签：linq, sql-server-2008, c#-4.0

我正在使用 VS 2010 和 SQL Server 2008。

我不断收到“空对象必须有值”的错误。

我的代码是

```
public DataTable GetProgressOverview()
    {
        DataTable dtProgressOverview = new DataTable();
        dtProgressOverview.Columns.Add("studentName", typeof(string));
        dtProgressOverview.Columns.Add("lessonName", typeof(string));
        dtProgressOverview.Columns.Add("BeginDate", typeof(string));
        dtProgressOverview.Columns.Add("EndDate", typeof(string));
        dtProgressOverview.Columns.Add("EmailAddress", typeof(string));
        dtProgressOverview.Columns.Add("teacherName", typeof(string));
        dtProgressOverview.Columns.Add("numberOffUnits", typeof(int));
        dtProgressOverview.Columns.Add("numberOffFilledUnits", typeof(int));
        dtProgressOverview.Columns.Add("percentage", typeof(double));
        dtProgressOverview.Columns.Add("subscriptionID", typeof(Guid));
        dtProgressOverview.Columns.Add("studentID", typeof(Guid));
        dtProgressOverview.Columns.Add("teacherID", typeof(Guid));
        dtProgressOverview.Columns.Add("YearName", typeof(string));
        dtProgressOverview.Columns.Add("YearID", typeof(Guid));
        dtProgressOverview.Columns.Add("lessonID", typeof(Guid));
        dtProgressOverview.Columns.Add("status", typeof(bool));
        dtProgressOverview.Columns.Add("CompanyID", typeof(Guid));
        dtProgressOverview.Columns.Add("SubCompanyID", typeof(Guid));
        dtProgressOverview.Columns.Add("CompanyName", typeof(string));
        dtProgressOverview.Columns.Add("SubCompanyName", typeof(string));
        dtProgressOverview.Columns.Add("MentorID", typeof(Guid));
        dtProgressOverview.Columns.Add("MentorName", typeof(string));

        var progressOverview = from pg in Db.viewGetProgressOverviews
                               //where pg.CompanyID.Equals("0a9438cc-c188-46d6-9e1e-08bc7afcb0c7")
                               orderby pg.yearName
                               select pg;

        foreach (var sub in progressOverview)
        {
            Guid CompanyID = Guid.Empty;
            Guid SubCompanyID = Guid.Empty;
            Guid MentorId = Guid.Empty;
            string MentorName = string.Empty;
            string studentName = sub.studentName;
            string lessonName = sub.lessonName;
            DateTime BeginDate = sub.BeginDate.Value;
            DateTime EndDate = sub.EndDate.Value;
            string EmailAddress = sub.EmailAddress;
            string teacherName = sub.teacherName;
            int numberOffUnits = sub.numberOffUnits.Value;
            int numberOffFilledUnits = sub.numberOffFilledUnits.Value;
            decimal percentage = Math.Round(sub.percentage.Value, 2);
            Guid subscriptionID = sub.subscriptionID.Value;
            Guid studentID = sub.studentID.Value;
            Guid teacherID = sub.TeacherID.Value;
            string yearName = sub.yearName;
            Guid yearID = sub.yearID.Value;
            Guid lessonID = sub.lessonID.Value;
            bool status = sub.Status.Value;
            string CompanyName = string.Empty;
            string SubCompanyName = string.Empty;
            if (sub.CompanyID != null)
            {
                CompanyID = sub.CompanyID.Value;
                CompanyName = sub.CompanyName;
            }

            if (sub.SubCompanyID != null)
            {
                SubCompanyID = sub.SubCompanyID.Value;
                SubCompanyName = sub.SubCompanyName;
            }
            if (sub.MentorID != null)
            {
                MentorId = sub.MentorID.Value;
                MentorName = sub.mentorName;
            }

            dtProgressOverview.Rows.Add(studentName,
                lessonName,
                BeginDate.ToShortDateString(),
                EndDate.ToShortDateString(),
                EmailAddress,
                teacherName,
                numberOffUnits,
                numberOffFilledUnits,
                percentage,
                subscriptionID,
                studentID,
                teacherID,
                yearName,
                yearID,
                lessonID,
                status,
                CompanyID,
                SubCompanyID,
                CompanyName,
                SubCompanyName,
                MentorId,
                MentorName
                );
        }

        return dtProgressOverview;

    } 
```

当我调试它时，它显示错误

```
DateTime BeginDate = sub.BeginDate.Value; 
```

但我认为错误是因为表没有返回任何记录我不知道为什么..

当我更改查询时

```
 var progressOverview = from pg in Db.viewGetProgressOverviews
                                   where pg.CompanyID.Equals("0a9438cc-c188-46d6-9e1e-08bc7afcb0c7")
                                   orderby pg.yearName
                                   select pg; 
```

有用。

但是对于孔表，它给出了空对象的错误。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:57:30.650

你可以试试这个：

```
DateTime? BeginDate = sub.BeginDate.Value 
```

# webdeploy - 通过远程 Web 部署代理进行部署时，WebDeploy 出现未经授权的错误

> ID：13970434
> 
> 赞同：1
> 
> 时间：2012-12-20T10:47:49.523
> 
> 标签：webdeploy

我有一个安装了 WebDeploy 3.0 的远程服务器（Win2008R2）。上面没有安装 Web 管理服务（实际上我尝试安装它，但由于我这边的端口关闭，无法联系它）。我正在尝试通过本地 WebDeploy 3.0 工具将包（zip）部署到服务器。

> Server.deploy.cmd /T /M:myserver.no-ip.org "/U:myserver\Administrator" "/P:pwd" /A:Basic

我尝试了 Basic 和 NTLM auth 方法。

我收到错误：错误代码：ERROR_USER_NOT_ADMIN 更多信息：使用 Web 部署代理服务连接到“myserver.no-ip.org”，但无法授权。确保您是“myserver.no-ip.org”的管理员。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_USER_NOT_ADMIN) ?LinkId=221672#ERROR_USER_NOT_ADMIN 。错误：远程服务器返回错误：（401）未经授权。错误计数：1。

请注意，我实际上是连接到 WebDeploy 代理服务而不是 Web 管理服务。这很重要，因为有大量信息如何使用 WebDeploy 设置 WMSrc。

我知道 WebDeploy Agent 只支持以管理员身份连接。这就是我的情况 - 我正在指定远程服务器管理员凭据。我试图在浏览器中打开 WDAgentSrc url。我被提示要信用，他们被接受了。我在事件查看器中检查了“Microsoft Web Deploy”日志——它是空的。

如何让它工作？

# oop - DDD：是否可以在聚合根中包含实体列表

> ID：13970436
> 
> 赞同：0
> 
> 时间：2012-12-20T10:47:51.940
> 
> 标签：oop, design-patterns, architecture, domain-driven-design

我正在开发一个用于搜索机票的客户端应用程序。我从服务器获得了带有搜索结果的 JSON，我应该将此结果表达给客户端。

假设我有一个`Fare`,`AirlineCompany`和`AviaTicketSearchResult`对象。`AviaTicketSearchResult`应包含`AirlineCompany`对象列表。每个都`AirlineCompany`应该包含`Fare`s。我猜这是一个聚合根`AviaTicketSearchResult`，`AirlineCompany`因为我有级联删除的规则，当我删除`AirlineCompany`它时删除所有航空公司公司的票价与`AviaTicketSearchResult`.

`Fare`1) 可以在聚合根 ( `AirlineCompany`)中包含 s 列表吗？

另一个问题是我应该对`Fare`s inside有过滤能力`AirlineCompany`。每个票价都有一个行程，每个行程都有一个变体列表 ( `ItineraryVariant`)（不同的航段、旅行等）。当我接受过滤器时，我应该更新我的`AirlineCompany`并删除不必要`Fare`的 s 或删除不必要的`ItineraryVariant`内部混凝土`Fare`。

2）如何应用过滤能力？

我假设我应该将 Fare 表示为 VO 并在每次应用过滤器时从原始数据 (json) 重新创建 Fare 对象，然后在使用过滤后的 AirlineCompany 更新 AviaTicketSearchResult 之后将其添加到 AirlineCompany。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:33:59.260

我认为领域驱动设计在这里并不合适。据我所知，您只是在谈论一些用于 UI 的 DTO 以及一些过滤它们的方法。

当您试图掌握（和建模）复杂行为时，领域驱动设计会派上用场。视图模型或 DTO 应该尽可能简单。大多数时候，不需要复杂且耗时的建模工作。

或者，正如 Eric Evans 所说：

> 专注于核心领域

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:51:06.593

> 1) 是否可以在聚合根 (AirlineCompany) 中包含票价列表？

是的，特别是如果 AirlineCompany 确实是您的聚合根，可能就是这种情况。从您的问题中，我认为您可能会从更多地了解问题域中受益。AirlineCompany 真的应该是聚合根还是只是客户的名称？也许 Fare 真的应该是聚合根，而 AirlineCompany 应该只是 Fare 上的字符串属性。注意不要过度建模并专注于问题域。如果您的客户是购买机票的人，我怀疑他们是否像关注票价和行程一样关注 AirlineCompany。在对问题域进行建模时，应该暂时忘记 JSON 和 VO 之类的东西。

> 2）如何应用过滤能力？

根据过滤器参数过滤结果应该是您的存储库或域服务的责任。这取决于您的实施。但是，通常，如果客户端正在与服务器通信，则服务器将运行存储库应用程序代码，根据您的实现，该代码可以将其传递到 db 服务器，从而使您获得最佳性能，这样您就不会通过周围的无关数据。

# php - php修剪空格后的所有内容

> ID：13970442
> 
> 赞同：-2
> 
> 时间：2012-12-20T10:48:02.357
> 
> 标签：php, string, variables, string-concatenation

我真的很头疼……

我正在尝试向我的输入和 textarea 字段添加一个类，但是每当我这样做时：

```
$inputclass = $class." multilanginput"; 
```

第二部分没有附加，但是当我离开空间并这样做时：

```
$inputclass = $class."multilanginput"; 
```

它工作得很好......

我以前从未遇到过这个问题，任何想法出了什么问题？

这是这个小功能的一部分：

```
function backend_dynamic_dialoginput($label,$class,$type = 'single',$lang = "none"){

if($lang == "none"){
    $lang = "";
}
else{
    $lang = "_".$lang;
}

$class = $class.$lang;
$id = "";

if($type == "singleint" || $type == "multiint"){
    $id = $class."_m";
    $inputclass = $class." multilanginput";
}else{
    $inputclass = $class;  
}

$html = "
<div style='padding-left:10px;margin-top:1px;background-color:#dddddd;padding-bottom:8px;padding-top:8px;'>
    <div style='float:left;font-size:13px;color:#5a5a5a;padding-top:6px;margin-bottom:2px;width:30%;text-align:right;padding-right:4px;' class='font_lato'>".$label."</div>
    ";

    if($type == "single" || $type == "singleint"){
        $html .= "<input type='text' value=".$inputclass." style='font-size:12px;width:60%;border:1px solid #ffffff;padding:2px;background-color:#dddddd;' class='font_din' id='".$id."' class='".$inputclass."'>";
    }
    else if($type == "multi" || $type == "multiint"){
        $html .= "<textarea style='font-size:12px;width:60%;border:1px solid #ffffff;padding:2px;background-color:#dddddd;' class='font_din' id='".$id."' class='".$inputclass."' rows=2></textarea>";
    }

    $html .= "
    ";

    if($type == "singleint" || $type == "multiint"){
    $html .= "<div style='float:right;font-size:12px;background-color:#eeeeee;margin-right:4px;' id='".$class."' class='togglefullscr font_lato'>Int.</div>";
    }

    $html .= "
    </div>";

if($type == "singleint" || $type == "multiint"){
$html .= backend_dynamic_internationaldialog($label,$class,$type);   
}

return $html; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:51:20.907

您没有在 HTML 属性周围加上引号。

将行更改为：

```
$html .= "<input type='text' value='".$inputclass."' style='font-size:12px;width:60%;border:1px solid #ffffff;padding:2px;background-color:#dddddd;' class='font_din' id='".$id."' class='".$inputclass."'>"; 
```

当你像这样省略引号时，第二个类名将被视为另一个属性。

[如果您验证标记](http://validator.w3.org/)，则可以轻松避免此类问题;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:51:09.643

你的引号是错误的：

`$html .= "<input type='text' value=".$inputclass."`

它必须是`$html .= "<input type='text' value='".$inputclass."'`或`$html .= "<input type='text' value=\"".$inputclass."\"`。

但是，我强烈建议对字符串使用单引号：

`$html .= '<input type="text" value="'.$inputclass.'"...>';`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:51:55.030

您可以在 php 中使用`\x20`and转义空格。`\040`

[http://php.net/manual/en/regexp.reference.escape.php](http://php.net/manual/en/regexp.reference.escape.php)

请看说明书

# gtk3 - Python/Gtk3：如何将 Gtk.Entry 添加到 Gtk.MessageDialog？

> ID：13970445
> 
> 赞同：5
> 
> 时间：2012-12-20T10:48:08.037
> 
> 标签：gtk3, python-3.2

早上好，

我正在尝试将 a 添加`Gtk.Entry`到`Gtk.MessageDialog`. 使用以下代码，我似乎添加了，`Gtk.Entry`但它在对话框窗口**(Python3/Gtk3)**上不可见：

```
#!/usr/bin/python3

from gi.repository import Gtk

def get_user_pw(parent, message, default=''):
    dialogWindow = Gtk.MessageDialog(parent,
                          Gtk.DialogFlags.MODAL | Gtk.DialogFlags.DESTROY_WITH_PARENT,
                          Gtk.MessageType.QUESTION,
                          Gtk.ButtonsType.OK_CANCEL,
                          message)

    dialogBox = dialogWindow.get_content_area()
    userEntry = Gtk.Entry()
    userEntry.set_visibility(False)
    userEntry.set_invisible_char("*")
    userEntry.set_size_request(250,0)
    userEntry.set_text("Test")
    dialogBox.pack_end(userEntry, False, False, 0)
    #dialogWindow.vbox.pack_start(userEntry, False, False, 0)

    response = dialogWindow.run()
    text = userEntry.get_text() 
    dialogWindow.destroy()
    if response == Gtk.ResponseType.OK:
        return text
    else:
        return None

class MainWindow(Gtk.Window):

    def __init__(self):

        Gtk.Window.__init__(self, title="MyWindowTitle")

        userPassphrase = get_user_pw(self, "SSH key passphrase")
        print("User passphrase: " + userPassphrase) 
```

此代码打印：

```
User passphrase: Test 
```

我正在寻找有关使条目可见和可编辑的线索，欢迎提供任何帮助。

参考： http:
[//python-gtk-3-tutorial.readthedocs.org/en/latest/dialogs.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/dialogs.html)
[http://developer.gnome.org/gtk3/3.2/GtkDialog.html](http://developer.gnome.org/gtk3/3.2/GtkDialog.html)
[简单、通用和可重复使用的入口PyGTK 中的对话框（有时称为输入对话框）](https://stackoverflow.com/questions/8290740/simple-versatile-and-re-usable-entry-dialog-sometimes-referred-to-as-input-dia)

* * *

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-13T14:06:54.057

好的，现在可以了，我`show_all()`以前需要`run()`。我花了一些时间才弄清楚这个简单的事情。调试的代码是：

```
def get_user_pw(parent, message, title=''):
    # Returns user input as a string or None
    # If user does not input text it returns None, NOT AN EMPTY STRING.
    dialogWindow = Gtk.MessageDialog(parent,
                          Gtk.DialogFlags.MODAL | Gtk.DialogFlags.DESTROY_WITH_PARENT,
                          Gtk.MessageType.QUESTION,
                          Gtk.ButtonsType.OK_CANCEL,
                          message)

    dialogWindow.set_title(title)

    dialogBox = dialogWindow.get_content_area()
    userEntry = Gtk.Entry()
    userEntry.set_visibility(False)
    userEntry.set_invisible_char("*")
    userEntry.set_size_request(250,0)
    dialogBox.pack_end(userEntry, False, False, 0)

    dialogWindow.show_all()
    response = dialogWindow.run()
    text = userEntry.get_text() 
    dialogWindow.destroy()
    if (response == Gtk.ResponseType.OK) and (text != ''):
        return text
    else:
        return None 
```

我这样使用它：

```
class MainWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="MyWindowTitle")
        userPassword = get_user_pw(self, "Please enter your password", "Password") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-26T04:33:11.523

如果这只是为了运行 sudo 命令，这可能会很困难 - 你可以简单地调用

`os.system('pkexec (yourcommand)')`

# python - 包括 pexpect.run() 中的通配符

> ID：13970446
> 
> 赞同：1
> 
> 时间：2012-12-20T10:48:10.067
> 
> 标签：python, wildcard, pexpect

我的终端输出是

```
 $ setserial -g /dev/ttyS*
   /dev/ttyS0, UART: unknown, Port: 0x03f8, IRQ: 4
   /dev/ttyS1, UART: unknown, Port: 0x02f8, IRQ: 3
   /dev/ttyS2, UART: unknown, Port: 0x03e8, IRQ: 4 
   /dev/ttyS3, UART: unknown, Port: 0x02e8, IRQ: 3 
```

我想要同样的结果`pexpect.run()`

```
>>> import pexpect
>>> pexpect.run("setserial -g /dev/ttyS1")
'/dev/ttyS1, UART: unknown, Port: 0x02f8, IRQ: 3\r\n'
>>> 
>>> 
>>> pexpect.run("setserial -g /dev/ttyS*")
'/dev/ttyS*: No such file or directory\r\n' 
```

有没有办法在命令中包含“*”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:04:32.450

我猜你想为任何 tty打电话`setserial`(over )？`pexpect`你也许可以这样做：

```
import glob
import pexpect
for tty in glob.glob("/dev/ttyS*"):
    pexpect.run("setserial -g %s" % tty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:36:01.277

我认为在[spawn-question 的文档中](http://pexpect.sourceforge.net/pexpect.html)找到了您问题的答案：

> 请记住，Pexpect 不会解释 shell 元字符，例如重定向、管道或通配符（>、| 或 *）。这是一个常见的错误。如果你想运行一个命令并通过另一个命令传递它，那么你还必须启动一个 shell。例如：：
> 
> ```
> child = pexpect.spawn('/bin/bash -c "ls -l | grep LOG > log_list.txt"')
> child.expect(pexpect.EOF) 
> ```

你能试试这个吗？

```
pexpect.run("/bin/bash setserial -g /dev/ttyS*") 
```

# perl - 从 Perl 中的 SSH 输出中去除颜色细节

> ID：13970447
> 
> 赞同：2
> 
> 时间：2012-12-20T10:48:11.237
> 
> 标签：perl, expect

我有一个通过 SSH 登录到 pfSense/BSD 框的期望脚本，它由 Perl 脚本调用并将输出传递回 Perl 脚本（一个 RANCID 插件）。

目前我得到以下输出；

```
+ spawn ssh -2 -x -l rancid my-pfsense-device.fqdn.com
+ Password:
+ Last login: Wed Dec 19 10:28:47 2012 from 89.21.224.35
+ Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
+       The Regents of the University of California.  All rights reserved.
+
+
+  [0;1;33m[ [0;1;37m2.0.1-RELEASE [0;1;33m] [0;1;33m[ [0;1;37mrancid [0;1;31m@ [0;1;37mmy-pfsense-device.fqdn.com [0;1;33m] [0;1;32m/home/rancid [0;1;33m( [0;1;37m1 [0;1;33m) [0;1;36m [0;1;31m: [0;40;37m
uname -a
+ FreeBSD my-pfsense-device.fqdn.com 8.1-RELEASE-p6 FreeBSD
8.1-RELEASE-p6 #0: Mon Dec 12 18:59:41 EST 2011
root@FreeBSD_8.0_pfSense_2.0-snaps.pfsense.org:/usr/obj./usr/pfSensesrc/src/sys/pfSense_wrap.8.i386
 i386
+  [0;1;33m[ [0;1;37m2.0.1-RELEASE [0;1;33m] [0;1;33m[ [0;1;37mrancid [0;1;31m@ [0;1;37mmy-pfsense-device.fqdn.com [0;1;33m] [0;1;32m/home/rancid [0;1;33m( [0;1;37m2 [0;1;33m) [0;1;36m [0;1;31m: [0;40;37m
cat /cf/conf/config.xml
+ <?xml version="1.0"?>
+ <pfsense> 
```

这里的问题是，当从我的桌面通过 SSH 登录时，登录提示看起来像这样；

```
[2.0.1-RELEASE][username@my-pfsense-device.fqdn.com]/home/username(1): 
```

但这有多种颜色。正如您在上面的输出中看到的那样，SSH 正在传递所有着色信息，然后将其输出到我的期望脚本。在上面的输出中，同一行看起来像这样；

```
[0;1;33m[ [0;1;37m2.0.1-RELEASE [0;1;33m] [0;1;33m[ [0;1;37musername [0;1;31m@ [0;1;37mmy-pfsense-device.fqdn.com [0;1;33m] [0;1;32m/home/username [0;1;33m( [0;1;37m1 [0;1;33m) [0;1;36m [0;1;31m: [0;40;37m 
```

有没有办法可以编写脚本？它是一种标准颜色格式并且被正则表达式删除，或者我可能需要更改我的 SSH 客户端上的选项以忽略着色信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:55:26.630

终端能否显示颜色由`TERM`环境变量决定。它通常设置为`xterm`,`linux`或`screen`（可能带有`-256color`后缀以获得更好的效果）。希望另一端的 shell（更重要的是：shell 初始化脚本）注意`TERM`并仅在调用方的终端实际支持颜色时才尝试使用颜色。

您可以尝试在调用之前设置该变量`ssh`。对于“没有交互和颜色功能的终端”，通常将其设置为`dumb`.

# jquery - Asp.net MVC 从主字段填充相关字段

> ID：13970448
> 
> 赞同：0
> 
> 时间：2012-12-20T10:48:18.320
> 
> 标签：jquery, asp.net-mvc

使用 asp.net MVC，一旦用户输入主键字段，是否存在异步填充相关字段的最佳实践方法。例如，一旦用户在表单上输入了 EmployeeID，如果输入的 EmployeeID 有效，则应填充employeeName。

（我已经在使用 RemoteAttribute 来验证输入的 EmployeeID 是否有效，并且希望这能够以某种方式返回相关字段，因为它已经在调用存储库。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:05:31.643

您可以使用 jQuery 调用传递 Id 的异步操作并使用返回填充结果，尝试类似

```
 $(document).ready(function() {

    $("#employeeId").change(function() {

         $.ajax({
            url: '@Url.Action("GetEmployeeData", "Employee")',
            type: 'POST',
            dataType: 'json',
            data: { employeeId : $("#employeeId").val() },
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data.success)
                {
                    // fill the employee name
                    $("#employeeName").val(data.employeeName);
                }
                else
                {
                    // show a message in a alert or div
                    alert('This Employee ID is not valid. Try again!');
                    $("#employeeId").text("").focus();
                }
            }
        });

    });

}); 
```

在您的操作中，尝试创建一个 post 方法来返回名称或您需要的任何属性，只需添加到 Josn 方法返回即可。

```
[HttpPost]
public ActionResult GetEmployeeData(string employeeId)
{
    var employee = /* get your employee using employeeId parameter from Repository*/;
    if (employee != null)
    {
        return Json(new { success = true, employeeName = employee.Name });
    }
    return Json(new { success = false });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:55:05.907

不，RemoteAttribute 不返回数据值，只返回验证信息。这里的最佳实践是使用 javascript/jquery/ajax。如果您已经有一个包装员工 ID 文本框的表单元素，则可以在验证成功时提交它。然后，您可以使用 javascript 拦截该表单提交并将 AJAX 请求发送到控制器上的操作方法，该方法返回 JsonResult。当您在浏览器中收到 JSON 时，使用它来填充其他字段。

**回复评论：**

不要以嵌套形式包装它。在表单中包含表单不是有效的 HTML。如果您使用此员工 ID 填充另一个表单（另一组文本框），是的，我会将它们设为 2 个单独的（兄弟）表单。您的 JSON 还应该返回 EmployeeID，在第二种形式中，我会将其放在隐藏字段中，而不是重复使用文本框来输入员工 ID。

# objective-c - 为什么我不能从自定义 UIView 类中拖动插座？

> ID：13970450
> 
> 赞同：0
> 
> 时间：2012-12-20T10:48:19.303
> 
> 标签：objective-c, ios

我有一个`TableViewController`With a`dynamic cell`和一个我在它上面添加的视图。我创建了一个`UIView`类并将其添加为该视图的自定义类（就像我对 a 所做的那样`custom cell`），但我无法将标签等从它拖到`UIView`它的`.h file`. 只到主`TableViewController.h`文件。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:03:15.500

UITableViewController 中的表格视图占据了整个屏幕，因此您添加的视图实际上是在表格视图中，而不是在其上方，这就是您可以连接到表格视图控制器的原因。如果要在表格上方添加视图，请改用 UIViewController，并调整表格视图的大小，使其不占用整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:55:28.750

我在 Interface Builder 中也注意到了这一点（对于 OS X 项目）。我不确定这是否是 IB 中的错误。

您需要做的是手动`@property`在文件中输入声明`.h`，然后您就可以连接它们。

# delphi - F12 在 Windows 7/8 上的 Delphi 调试器中不起作用

> ID：13970455
> 
> 赞同：8
> 
> 时间：2012-12-20T10:48:34.700
> 
> 标签：delphi, debugging, windows-7

当程序在调试器中运行时按 F12 应该会中断执行并打开调试器。这在 Windows XP（用 D2007 和 XE2 测试）上正常工作，但在 Windows 7 和 8 上失败（也用 D2007 和 XE2 测试；在三台计算机上测试）。

注册表设置正确（Windows 7）：

> [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug] "UserDebuggerHotKey"=dword:00000000 "Debugger"="\"C:\Windows\system32\vsjitdebugger.exe\" -p %ld -e %ld"
> 
> [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug\AutoExclusionList] "DWM.exe"=dword:00000001

XP 安装还设置了“Auto”=“1”并省略了 AutoExclusionList，但在 Windows 7 机器上复制这些更改没有任何效果。

奇怪的是，Delphi 似乎意识到 F12 被按下了。当我在 Windows 7 机器上的调试器中运行程序并按 F12 时，Delphi 中的事件日志窗口显示

> 线程开始：线程 ID：4080。处理 Project73.exe (7108)
> 
> 线程退出：线程 ID：4080。处理 Project73.exe (7108)

只是没有触发断点并且应用程序继续运行。

有人知道如何在 Windows 7/8 中恢复此功能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T10:54:11.983

调试器看到 Windows 启动了一个新线程，但它不知道该线程是什么。在 XP 中，该线程会遇到`int 3`断点 ( `DebugBreak()`)，但在 Vista 和 Windows 7+ 下，即使您设置了注册表项，也不会再遇到断点。

有一个 Delphi IDE 插件可以捕获线程并调用 DebugBreak() WinAPI 函数。 [http://andy.jgknet.de/blog/ide-tools/unsupported-tools/](http://andy.jgknet.de/blog/ide-tools/unsupported-tools/)

# jquery - Jquery - 使用变量和类名的组合进行定位

> ID：13970460
> 
> 赞同：0
> 
> 时间：2012-12-20T10:48:41.220
> 
> 标签：jquery

我确信这是一个简单的方法，但我以前不必编写这种语法，而且我无法在网上找到答案！

我在 html 页面中有各种图形滑块 - 每个都有以下代码 -

```
 <div class="sliderDbWk">
        <div class="spanner">
             <div class="number">
                <span class="timer"> </span>
                    <Span class="timerPc">%</Span>
             </div>
        </div>
   </div> 
```

每个父类都是不同的（即sliderDbMnth，sliderDbCal），我将滑块父类传递给一个函数，并希望在其中定位子.number div - 所以父类存储为变量 - 我不确定如何在函数中组合变量和类名 - 我在下面尝试过 - 但它不起作用！

有任何想法吗？

```
 $(sliderSelect).children(' .number').css('margin-left',0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:51:28.063

如果`sliderSelect`只包含类名，你只需在它前面加上一个`.`, 就可以把它变成一个[类选择器](http://api.jquery.com/class-selector/)：

```
$("." + sliderSelect).children(' .number').css('margin-left',0); 
```

您还可以删除对的调用`.children()`（请注意，这略有不同，因为它现在正在寻找任何后代，而不仅仅是直接子代 - 这很重要，因为在您显示的标记中，`.number`它不是 external 的直接子代`div`） ：

```
$("." + sliderSelect + " .number").css('margin-left',0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:51:56.190

它应该是`.find('.number')`，而不是`children('.number')`- 当您从“.sliderSomething”元素开始搜索时，`<div class="number">`它是它的孙子。引用文档：

> 该`.children()`方法的不同之处`.find()`在于`.children()`仅在 DOM 树中向下遍历一个级别，同时`.find()`也可以向下遍历多个级别以选择后代元素（孙子等）。

# database - Drupal 7打印两条具有相同名称的记录

> ID：13970464
> 
> 赞同：0
> 
> 时间：2012-12-20T10:49:09.257
> 
> 标签：database, drupal, duplicates, records

有谁知道如何分别定位两个具有相同名称的特定记录？

IE。我正在尝试从数据库中打印两个具有相同名称的字段……当然它给了我相同的结果。

略简略的代码：

```
$query = db_select('node', 'n');

$query->join('users', 'u', 'u.uid = n.uid'); 
$query->join('taxonomy_term_data', 'td', 'td.tid = ti.tid'); 

 $query
->fields('u', array('name')) 
->fields('td', array('name'))

foreach ($result as $record) {                 

User Name: <?php echo $record->name; ?>
Tag Name : <?php echo $record->name; ?>

} 
```

我找不到答案，但猜测是这样的

```
<?php echo $record->td['name']; ?> 
```

但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:48:35.927

您可以使用 addField 方法为您的字段添加别名。您的查询可以这样重写：

```
$query = db_select('node', 'n');

$query->join('users', 'u', 'u.uid = n.uid'); 
$query->join('taxonomy_term_data', 'td', 'td.tid = ti.tid'); 

 $query
->addField('u', 'name', 'username') 
->addField('td', 'name', 'tagname')

foreach ($result as $record) {                 

User Name: <?php echo $record->username; ?>
Tag Name : <?php echo $record->tagname; ?>

} 
```

# android - 检索用户在列表视图上单击的元素的 ID（在数据库中）

> ID：13970466
> 
> 赞同：1
> 
> 时间：2012-12-20T10:49:11.580
> 
> 标签：android, sqlite, android-intent, android-activity, listviewitem

这就是我所做的，检索 id 但它说`getIndexColumn`没有在游标中定义......我做错了什么？

```
protected void onListItemClick(ListView l, View v, int position, long id) {
          Cursor data = (Cursor)l.getItemAtPosition(position);
          String cat = Cursor.getString(Cursor.getIndexColumn(MySQLiteHelper.COLUMN_ID));

          Intent myIntent = new Intent(MainActivity.this, sondaggioActivity.class);
          myIntent.putExtra("categoriaId", cat);
          MainActivity.this.startActivity(myIntent);

        } 
```

**这是类别类：**

```
public class categorie {
      private long id;
      private String nome;
      private long preferita;

      public long getId() {
        return id;
      }

      public void setId(long id) {
        this.id = id;
      }

      public String getNome() {
        return nome;
      }

      public void setNome(String nome) {
        this.nome = nome;
      }

      public long getPreferita() {
        return preferita;
    }

    public void setPreferita(long preferita) {
        this.preferita = preferita;
    }

    // Will be used by the ArrayAdapter in the ListView
      @Override
      public String toString() {
        return nome;
      }
    } 
```

**这是数据源：**

```
public class pollDataSource {
    // Database fields
      private SQLiteDatabase database;
      private MySQLiteHelper dbHelper;
      private String[] allCategorieColumns = { MySQLiteHelper.COLUMN_ID,
          MySQLiteHelper.COLUMN_PREF, MySQLiteHelper.COLUMN_NOME };   
      private String[] allSondaggiColumns = { MySQLiteHelper.COLUMN_ID,
              MySQLiteHelper.COLUMN_CATID, MySQLiteHelper.COLUMN_DOMANDA };   
      private String[] allRisposteColumns = { MySQLiteHelper.COLUMN_ID, 
              MySQLiteHelper.COLUMN_SONDID, MySQLiteHelper.COLUMN_RISPOSTA, 
              MySQLiteHelper.COLUMN_SELEZIONATA };

      public pollDataSource(Context context) {
            dbHelper = new MySQLiteHelper(context);
          }

      public void open() throws SQLException {
            database = dbHelper.getWritableDatabase();
          }

      public void close() {
            dbHelper.close();
          }

      public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            values.put(MySQLiteHelper.COLUMN_PREF, 0);
            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 

      public void deleteCategoria(categorie categoria) {
            long id = categoria.getId();
            System.out.println("Categoria cancellata, id: " + id);
            database.delete(MySQLiteHelper.TABLE_CATEGORIE, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          }

      public sondaggi createSondaggio(String domanda, int catid) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_DOMANDA, domanda);
            values.put(MySQLiteHelper.COLUMN_CATID, catid);
            long insertId = database.insert(MySQLiteHelper.TABLE_SONDAGGI, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            sondaggi newSondaggio = cursorToSondaggi(cursor);
            cursor.close();
            return newSondaggio;
          }

      public void deleteSondaggio(sondaggi sondaggio) {
            long id = sondaggio.getId();
            System.out.println("Sondaggio cancellato, id: " + id);
            database.delete(MySQLiteHelper.TABLE_SONDAGGI, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          } 

      public Cursor getAllCategorie() {
            List<categorie> categorie = new ArrayList<categorie>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              categorie categoria = cursorToCategorie(cursor);
              categorie.add(categoria);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
           // cursor.close();
            return cursor;
          }

      private categorie cursorToCategorie(Cursor cursor) {
          categorie categorie = new categorie();
          categorie.setId(cursor.getLong(0));
          categorie.setPreferita(cursor.getLong(1));
          categorie.setNome(cursor.getString(2));
            return categorie;
          }
      private sondaggi cursorToSondaggi(Cursor cursor) {
          sondaggi sondaggi = new sondaggi();
          sondaggi.setId(cursor.getLong(0));
          sondaggi.setDomanda(cursor.getString(1));
          sondaggi.setCatid(cursor.getLong(2));
          return sondaggi;
          }

} 
```

**主要活动：**

```
public class MainActivity extends ListActivity {
     private pollDataSource datasource;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new pollDataSource(this);
        datasource.open();

        Cursor values = datasource.getAllCategorie();

        String[] categorieColumns =
            {
                MySQLiteHelper.COLUMN_NOME   // Contract class constant containing the word column name

            };

            int[] mWordListItems = { R.id.categoria_label };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
                getApplicationContext(),               // The application's Context object
                R.layout.single_list_item,             // A layout in XML for one row in the ListView
                values,                                // The result from the query
                categorieColumns,                      // A string array of column names in the cursor
                mWordListItems,                        // An integer array of view IDs in the row layout
                0);                                    // Flags (usually none are needed)

        setListAdapter(adapter);
    }

      public void onClick(View view) {

        switch (view.getId()) {
        case R.id.add:      
        datasource.createCategoria("peppe");          

        break;          

        }

      }

      @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {

          Intent myIntent = new Intent(MainActivity.this, sondaggioActivity.class);
          myIntent.putExtra("categoriaId", id);
          MainActivity.this.startActivity(myIntent);
         //Toast.makeText(this, selection, Toast.LENGTH_LONG).show();
        }   

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:28:18.377

我假设您有一个包含类别列表的活动，以及您想要启动具有该项目详细信息的新活动的特定项目的 onClick。我建议您在启动 listScreen 时，查询所有/某些项目并维护一个项目数组列表并将其保存在某个单例类中，然后特定项目的 onClick 通过 intent.putExtra("index", position ) 并在详细屏幕上通过 getIntent().getIntExtra("index", -1) 获取该索引。现在从保存在单例类中的 arraylist 获取该特定索引的详细信息。这种方法将降低每次从数据库查询的成本，并且数据将很容易获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:00:28.483

这两行：

```
 Cursor data = (Cursor)l.getItemAtPosition(position);
      String cat = Cursor.getString(Cursor.getIndexColumn(MySQLiteHelper.COLUMN_ID)); 
```

完全没有任何意义！如果您使用 CursorAdapter 为什么要创建对象数组？如果您使用的是 ArrayAdapter，为什么要从游标获取数据？

此外，Cursor 没有任何静态方法可以这样调用。那甚至不应该编译。

如果您使用的是 CursorAdater（或扩展它的某些类），则 id 将在`long id`此处传递给您`protected void onListItemClick(ListView l, View v, int position, long id)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:57:01.883

改变

```
 Cursor data = (Cursor)l.getItemAtPosition(position);
 String cat = Cursor.getString(Cursor.getIndexColumn(MySQLiteHelper.COLUMN_ID)); 
```

至

```
 Cursor data = (Cursor)l.getItemAtPosition(position);
 Long clid = data.getLong(data.getIndexColumn(MySQLiteHelper.COLUMN_ID));
 String cat=Long.toString(clid); 
```

# objective-c - 读取“CSV”文件 - 无法读取包含长字符串的 csv 文件

> ID：13970469
> 
> 赞同：0
> 
> 时间：2012-12-20T10:49:19.440
> 
> 标签：objective-c, ios, ios4

我正在使用以下方法读取 .csv 文件。它适用于包含普通字符串、数字等的 csv 文件。

但它无法读取包含长字符串的 csv 文件（例如：5,6 行的描述）。

有这样的技术难度吗？非常感谢您的帮助。

```
 -(void)readTitleFromCSV:(NSString*)path AtColumn:(int)column
{
//arrBreeds = [[NSMutableArray alloc]init];
NSMutableArray *arrTemp = [[NSMutableArray alloc]init];

NSString *fileDataString=[NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
NSArray *linesArray=[fileDataString componentsSeparatedByString:@"\n"];

// preparing array with questions and answers
for(int i=0; i<[linesArray count];i++){
    [arrTemp addObject:[[linesArray objectAtIndex:i] componentsSeparatedByString:@","] ];
}

 NSLog(@"ArrBreeds %@", arrTemp); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:37:17.450

您首先根据换行符从 CSV 文件中分离文本，然后分离组件。这会发生这样的事情：

absd,sgsgs dfdf,dfghj

在这里你应该在解析后得到 3 个对象，但是使用你的代码你会得到 4 个。

你可以继续这样做：

```
NSArray *linesArray=[fileDataString componentsSeparatedByString:@","]; 
```

# javascript - 通过调用绑定 onblur 事件的方法的类访问元素

> ID：13970472
> 
> 赞同：0
> 
> 时间：2012-12-20T10:49:23.140
> 
> 标签：javascript, jquery, jquery-ui

我有这个 html 代码：

```
<div id="jiraTicketAccordion">
 <div>
   <h3><a href="#">key</a></h3>
   <div>
     <form>
        <div id="jiraTable">
      <table>
        <tr>
           <td class="label"><label for="arrival">ARRIVAL :</label></td>

           <td><input type="text" name="arrival" class="arrival"  
                     onblur="checkTime(this.value);"/></td>

           <td class="label"><label for="newarrival">NEW ARRIVAL :</label></td>

          <td><input type="text" name="newarrival" class="arrival"  
                     onblur="checkTime(this.value);"/></td>

        </tr>
      </table>
     </form>
    </div>
  </div>
</div><!-- end of accordion div --> 
```

如您所见，我在该输入框中有`checkTime`用于`onblur()`事件的 javascript 函数。

早些时候，我有一个带有唯一 ID 的文本框，所以我`document.getElementById`在我的 javascript 函数中使用它来访问它。

但是现在由于有许多具有相同结构的手风琴，所以我不想使用唯一的 ID，因为可能会有很多。

所以现在我为所有需要验证的文本框设置了一个类。

但现在我必须更改我曾经使用过的 javascript 函数`document.getElementById`。

我知道我们可以在 jquery 中按类选择元素，我也尝试过，但没有得到所需的结果。

这是我在 jquery 中尝试过的：

```
function checkTime(dateTime){
    alert("inside  check time");
    var errorMsg="";
    regex = /^(\d{2})\/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\/\d{2} \d{2}:\d{2} [AP]M$/;
    if(dateTime != ''){
    if(!regex.test(dateTime)){
             errorMsg = "Please enter date and time in the format: \n dd/MMM/YY HH:MM AM/PM";
         alert(errorMsg);   
    //how to make the element that called this function to 
    //blank value it it failed validation
    }
     }
} 
```

我想访问调用此方法的元素，以便我可以操作该文本框的值。
而且我还想在该`checkDate`函数中的同一个手风琴中按类访问其他元素。

我不知道如何将文本框设为空白，但验证失败。

早些时候，当我有 id 时，我是这样做的：

```
document.getElementById('arrival').value=''; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:51:38.710

当前代码的最短路径只是传递元素而不是值：

```
onblur="checkTime(this);" 
```

然后在你的功能上：

```
function checkTime(el){
    var dateTime = el.value;
    // rest of function
} 
```

就个人而言，我会避免使用内联事件处理程序，如`onblur="..."`, 并使用`addEventListener`直接从 JavaScript 绑定处理程序。这将是朝着将逻辑、结构和呈现方式脱钩的方向迈出的一大步。

# css - ajax无法加载外部图像

> ID：13970473
> 
> 赞同：1
> 
> 时间：2012-12-20T10:49:22.857
> 
> 标签：css, ajax, external

我有一个 index.php 页面。它包含一个带有一些链接的导航栏。通过ajax，我做了一个小加载过程，这里可以看到一个链接的代码：

```
$('#link1').click(function(e) {
    e.preventDefault();
    $('#target').fadeOut('fast', function() {
        $('#spinner').fadeIn(1000).delay(2000).fadeOut(1000, function() {
            $.ajax({
                url: 'content/1.php',
                dataType: 'html',
                type: 'GET',
                success: function(html) {
                    $('#target').empty();
                    $('#target').append(html);
                    $('#target').fadeIn('slow');
                }
            });
        });
    });
}); 
```

您可以看到，外部 php 内容页面（1.php）将加载到“目标”div 中。现在的问题是“1.php”由外部css格式化，并使用以下代码加载到“1.php”中：

`<link rel="stylesheet" type="text/css" href="1css/style.css">`

但是当我午餐 index.php 时，我只看到 1.php 中的文本内容，而不是图像。错误在哪里？我可以通过 ajax 为 1.php 加载外部 css 吗？我可以把文件夹发给你，这样你就可以更具体地看到它了……谢谢……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:58:24.257

我相信 ajax 调用只解析 HTML，而不是样式。您的图像可能不会出现，因为您加载内容的页面中不存在适用于您加载内容的样式（或者相对路径不同）。

如果您还需要加载样式，可能值得将相关的 CSS 文件附加到您正在加载内容的页面的头部 - 只需确保检查相对文件路径。

# matlab - 如何更改matlab标题栏的图标？

> ID：13970474
> 
> 赞同：3
> 
> 时间：2012-12-20T10:49:35.977
> 
> 标签：matlab

我创建了一个 MAT LAB GUI，我想将标题栏上的默认图标更改为我的自定义图标。请就这个问题提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:05:21.263

这样做您将违反可在 ..\MATLAB\<>\licence.txt 中找到的许可协议

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T18:27:29.527

实际上可能：（**但不要这样做）**

假设图形句柄是`hFigure`，那么：

```
javaFrame    = get(hFigure,'JavaFrame');
iconFilePath = 'iconImage.jpg'; 
javaFrame.setFigureIcon(javax.swing.ImageIcon(iconFilePath)); 
```

# xml - Eclipsie 在 rebel.xml 中显示 cvc-complex 类型错误

> ID：13970475
> 
> 赞同：2
> 
> 时间：2012-12-20T10:49:50.427
> 
> 标签：xml, eclipse, jrebel

我使用 jrebel 作为独立版本，而不是作为 eclipse 插件，所以我`rebel.xml`自己制作了所有文件......

有了这个，`rebel.xml`我在 Eclipse 中得到了`<configuration>`标签上的以下错误

> cvc-complex-type.2.4.a：发现以元素“配置”开头的无效内容。'{名称，模块，部署，版本之一，“http://www.zeroturnaround.com”：classpath，“http://www.zeroturnaround.com”：web，“http://www.zeroturnaround.com ":war}' 是预期的。

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.zeroturnaround.com" xsi:schemaLocation="http://www.zeroturnaround.com http://www.zeroturnaround.com/alderaan/rebel-2_0.xsd">

    <configuration>
      <!--
        root is 2 directoris away from jar/war modules
      -->
      <relativePath>../../</relativePath>

      <rootPath>$${project_name.root}</rootPath>
    </configuration>

    <classpath>
        <dir name="${project_name.root}/datamodel/target/classes" />
    </classpath>

</application> 
```

jRebel 已经在工作，但是 eclipse 显示错误，这有点烦人！任何人都看到错误，或者知道如何解决这个问题？

我使用：Eclipse Indigo Service Release 2 和 jrebel 5.0.1 独立版（jar 版）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:42:13.503

您将 maven 插件元素与 JRebel 元素混合在一起。rebel.xml 应该只包含 JRebel 信息，否则 JRebel 将忽略运行时不理解的元素。配置标签是一个 Maven 插件元素，应该被删除。eclipse 错误表明模式接受的 JRebel 元素是名称、模块、部署、版本、“http://www.zeroturnaround.com”:classpath、“http://www.zeroturnaround.com”:web 和“http ://www.zeroturnaround.com“：战争。这些是您可以在根应用程序标记下使用的唯一元素。

HTH——Simon（ZeroTurnaround 技术传播者）@sjmaple

# css - 我们什么时候在 CSS 中使用“position:relative”？

> ID：13970482
> 
> 赞同：13
> 
> 时间：2012-12-20T10:50:10.270
> 
> 标签：css

我想知道我们需要`position:relative`在 CSS 中应用的几个条件或情况。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T11:01:31.080

当我知道元素的内部元素将被绝对定位时，我主要在元素中使用 position :relative。

例如，如果我有两个 div 并且外部 div 是一个静态块，并且外部 div 内的元素将相对于外部 div 绝对定位。然后对外部 div 使用 position:relative，内部 div 应该使用 position:absolute。现在可以使用 CSS 的 top、bottom、left 和 right 属性将内部 div 元素放置在任何地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T11:13:44.960

**Position relative**的最佳用途是与**Position absolute**一起使用。阅读此链接以正确理解 CSS 技巧网站：

[有用的链接](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:12:14.687

元素相对于其正常位置定位，因此“left:50”将元素的左侧位置增加 50 个像素

# asp.net - 在 LinkBut ton 回发后显示 ModalPopUp

> ID：13970483
> 
> 赞同：2
> 
> 时间：2012-12-20T10:50:21.650
> 
> 标签：asp.net, updatepanel, postback, modalpopupextender, linkbutton

花了几个小时后，我仍然找不到解决方案，请帮助。

我正在开发一个网站，其中有一个带有数据的 Gridview，我有一个链接按钮作为其中一个列中的模板字段，onClick 正在执行回发并在一个单独的 asp 面板内的 modalpoupextender 中显示记录，

我在该弹出窗口中有编辑、更新、删除按钮，这些按钮正在回发并且运行良好。

请记住，我没有在任何地方使用过 UpdatePanel，因为我没有那种要求。

现在，我在页面上有另一个链接按钮（不在 gridview 中），它在 OnClick 回发后还有其他一些功能，问题是当我点击那个链接按钮时，它首先显示 ModalpopUp，然后它执行回发并完成功能。重要的是部分是模态弹出窗口在几秒钟内消失。

所以，每当我点击 LinkBut​​ton 时，我都会看到 Modalpopup。

我在每个可能的地方都尝试了 ModalPopUpExtender1.hide()，但它不起作用。

我不知道如何禁止该弹出窗口出现在 LinkBut​​ton Click 上。请帮帮我。我遇到了麻烦。

提前致谢。

这是我的 GridView 代码：

```
<asp:GridView ID="dg_Task" runat="server"  CssClass="gridview"  
                             BorderWidth="1px" 
                        Font-Names="Trebuchet MS" Font-Size="Small" AllowSorting="True" 
                        AutoGenerateColumns="False" onrowdatabound="dg_Task_RowDataBound" 
                        Width="100%" Height="143px" 
                        onprerender="mergeDoc">
                            <Columns>

                                <asp:TemplateField HeaderText="Task">
                                    <ItemTemplate>
                                        <asp:Label ID="lbl_tid" runat="server" Text='<%#Bind("ID") %>' 
                                            Visible="False"></asp:Label>
                                        <asp:LinkButton runat="server" ID="Lnk" ForeColor="Black" 
                                            CommandArgument='<%# Bind("ID") %>' Font-Underline="False" onclick="Title_Click" 
                                            Text='<%# Bind("Task") %>' Font-Names="Trebuchet MS"></asp:LinkButton>
                                    </ItemTemplate>
                                    <HeaderStyle Width="35%" />
                                    <ItemStyle Height="2px" HorizontalAlign="Left" VerticalAlign="Top" />
                                </asp:TemplateField> 
```

这是背后的代码：

```
protected void Title_Click(object sender, EventArgs e)
        {

            ddown_status.Items.Clear();
            var btnId = sender as LinkButton;
            string id = btnId.CommandArgument;

            btnUpdate.CommandArgument = id.ToString();
            btnDelete.CommandArgument = id.ToString();

           //Some  Code which fills the details of my PopUp Fields

              this.modalPopUpExtender1.Show();

} 
```

这是另一个链接按钮（在主页上）代码：

```
protected void LinkButton1_Click(object sender, EventArgs e)
        {

//here even i simple postback(Without any code) Triggers The PoPUp and Provides a Glimpse then the rest code runs

//sample code here
        } 
```

请帮忙。谢谢

# mysql - 如何检查 MySQL 表中的最后一行是否具有所需值？

> ID：13970486
> 
> 赞同：2
> 
> 时间：2012-12-20T10:50:23.900
> 
> 标签：mysql, sql, bash

我正在考虑在 MySQL 中为几个 Bash 脚本轮询实现一个状态表。这个想法是，一旦脚本*#n-1*完成运行并将其状态和状态写入 MySQL 数据库中的状态表，脚本*#n*就会被清除运行。基本上状态表看起来像：

 *```
+----+-------+--------+
| id | state | status |
+----+-------+--------+
| 44 |     2 |   OK   |
| 45 |     3 |   OK   |
| .. |   ... |  ...   |
| 55 |     2 |   OK   |
+----+-------+--------+ 
```

该`id`列`auto_increment`可用于定义最后一行。

目前我想出了：

```
#!/bin/bash
#...
VARIABLE=$(mysql mydbname --skip-column-names -s --local -e \
         "SELECT count(*) \
          FROM statetable \
          WHERE state=2 AND \
                status='OK' AND \
                id=(SELECT MAX(id) FROM statetable)")
if [ $VARIABLE -eq 1 ] ; then #... 
```

是否有正确的方法来检查表中的最后一行是否具有所需的状态值和状态对（在上面的示例中为 2 和 OK）而不使用子查询并将该信息传递给 Bash 脚本？

添加的解决方案：

```
#!/bin/bash
function check_state () {
    VARIABLE=$(mysql mydbname --skip-column-names -s --local -e \
             "SELECT (state=2) && (status='OK') \
              FROM statetable \
              ORDER BY id DESC \
              LIMIT 1;")
    return $VARIABLE
}

if ! check_state ; then #... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:55:12.917

在 MySQL 中，您不仅可以选择字段，还可以选择表达式和对它们的操作。有点令人惊讶的是，这也适用于逻辑测试，我们使用的那种，例如在一个`where`子句中。这意味着您可以使用以下 SQL 来获得布尔 (0 / 1) 结果：

```
select (state = 2) && (status = 'OK')
from statetable
order by id desc
limit 1 
```

[你可以在这个SQL Fiddle](http://sqlfiddle.com/#!9/4ff48/3)上试一试。

抱歉，我一开始没有理解这个问题，但似乎每个人都理解了:)

~~你写的查询很可能总是返回值 1，因为它不选择最大 id，它选择最大 id 的行数，如果表中至少有一行，就有这样的作为最大 id 的东西 :)~~

假设您需要最后一个 ID，更好的方法（没有子查询）是对数据进行排序，然后只取第一行，例如：

```
SELECT id FROM statetable 
WHERE state=2 
  AND status='OK' 
ORDER BY ID DESC
LIMIT 1 
```

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:57:37.953

我的建议是，

```
VARIABLE=$(mysql mydbname --skip-column-names -s --local -e "SELECT MAX(id) ,state , status FROM statetable WHERE state=2 AND status='OK'")
if [ $VARIABLE -nq 0 ] ; then #... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:54:37.387

你也可以那样做

```
 SELECT MAX(id) ,state , status FROM statetable WHERE state=2 AND status='OK' 
```

像那样你阻止sql检查两次，

**编辑**

```
 SELECT EXISTS(SELECT MAX(id) ,state , status FROM statetable WHERE state=2 AND status='OK' ) getIt from statetable 
```~~*

# java - 我可以与桌面 Swing 应用程序集成的 Java 工作流引擎

> ID：13970496
> 
> 赞同：2
> 
> 时间：2012-12-20T10:51:01.563
> 
> 标签：java, workflow

我开发了一个我的许多客户都在使用的 java swing 桌面应用程序。他们要求我围绕他们在 Swing 应用程序上执行的任务开发一个“工作流程”包装器。

是否有任何开源工作流引擎支持桌面应用程序的以下功能？

1.  工作流程应该由我的客户创建。他们可以添加 2 种步骤。一种是手动步骤，用户必须跟踪完成的步骤。意思是手动将其标记为完成。另一个是系统步骤，应用程序有能力在完成后跟踪特定步骤。如果完成，它将自动将其标记为完成。
    我可以在 GUI 中编码。我需要工作流引擎的 API 来调用创建新的工作流。

2.  用户可以向现有工作流程添加/编辑新步骤。在这种情况下，已编辑工作流的所有现有工作流实例都应迁移到新的工作流模板上。

3.  用户登录后，应显示其队列中的所有现有任务。因此，我需要调用一个 API 来为用户提供这个。

以上满足了大部分要求。如果还有更多，我想我应该能够处理它。我看了这个网页：

[http://java-source.net/open-source/workflow-engines](http://java-source.net/open-source/workflow-engines)

它描述了很多工作流引擎，但我找不到可以集成到桌面应用程序中的东西。

该应用程序的一些技术细节：

1.  在秋千上开发。
2.  使用 mysql 数据库。
3.  还有一个多个用户共享的共享网络文件夹
    （因此任何基于文件的工作流引擎也可以，只要多个用户可以在他们的每个系统上启动一个工作流引擎）。

# wordpress - 所见即所得的奇怪 Wordpress 3.5 问题

> ID：13970499
> 
> 赞同：0
> 
> 时间：2012-12-20T10:51:13.047
> 
> 标签：wordpress, wysiwyg

自从升级到 WP 3.5，我得到了 WYSIWYG 编辑器的这个奇怪的重复：

![所见即所得复制](../Images/f5aaba923845287ac4b84dc93eb77a9a.png)

出于某种原因，只有刷新页面才能解决问题 - 这是官方错误吗？我试过禁用我所有的插件，它是同一件事....

谢谢，

大须

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:38:30.967

尝试下载[3.5 zip](http://wordpress.org/latest.zip)。
**首先进行更新**
并将文件夹 替换`wp-admin`为新文件夹。
如果这不起作用，请尝试使用`wp-includes`.

希望它有帮助

# youtube-api - 如何根据特定频道获取用户特定的推荐视频

> ID：13970501
> 
> 赞同：2
> 
> 时间：2012-12-20T10:51:13.400
> 
> 标签：youtube-api

如何使用 YouTube API根据特定频道（如**nba、国家地理）获取用户特定的推荐视频？**

我正在使用以下 API 来获取推荐的视频。

[https://gdata.youtube.com/feeds/api/users/default/recommendations?v=2&key=&access_token=](https://gdata.youtube.com/feeds/api/users/default/recommendations?v=2&key=&access_token=)

`key`-> 我正在传递我的开发者密钥

`access_token`-> 我正在传递身份验证令牌。

它返回我推荐的特定用户的视频。但我需要特定频道的推荐视频，例如 nba、国家地理。

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T21:29:49.940

I know this is old but in case anyone googling this comes across this answer, a workaround until there is a full recommendation API in YouTube API v3 is to use the Activity List feature, then just go through the results looking for "type": "recommendation":

[https://developers.google.com/youtube/v3/docs/activities/list](https://developers.google.com/youtube/v3/docs/activities/list)

```
GET https://www.googleapis.com/youtube/v3/activities?part=snippet&home=true&maxResults=50&key={YOUR_API_KEY} 
```

(don't forget to use an auth token for a user for this to work)

# express - AngularJS：如何实现服务器端或客户端身份验证？

> ID：13970510
> 
> 赞同：0
> 
> 时间：2012-12-20T10:51:49.570
> 
> 标签：express, angularjs

我想验证一个 AngularJS 应用程序，它运行在 Node.js 和 Express.js 后端之上，带有 Jade 模板。

我想到了以下策略：

1）服务器端身份验证 - 在会话变量中存储凭据并将用户重定向到 AngularJS 应用程序，问题：如何将凭据传递给 AngularJS？（我可以将它们渲染为 Jade 变量，但是如何使用 AngularJS 读取它们？），还有，如何处理会话到期？

2）客户端身份验证-使用AJAX调用进行身份验证并获取凭据，问题：如何处理“会话”到期以及如何记住用户，这样他们就不必每次应用程序启动时都登录？

任何见解都可能有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:49:20.263

为 Angular.js 应用程序设置身份验证与为任何其他网站设置身份验证没有什么不同。您将用户名和密码发布到服务器，如果您的凭据正确，它将设置会话/cookie。要从服务器获取数据（在您的情况下为凭证），您使用与 Javascript 相同的技术。Xhr，websockets，在文本字段中呈现值，...

# linux - Unix 中的 Nawk Commmad

> ID：13970517
> 
> 赞同：1
> 
> 时间：2012-12-20T10:51:59.013
> 
> 标签：linux, unix, awk, nawk

如图所示，我有一个 nawk 命令。谁能解释这个命令应该做什么。

```
set sampFile = $cur_dir/${qtr}.SAMP

nawk -F "," '{OFS=","; if (($4 == "0000" || $4 == "00000000")) {print $0} }' $samp_input_file >! $sampFile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:55:20.167

给定一个由变量指向的[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)`$samp_input_file`文件，此命令将打印第 4 个字段为`0000`or的行`00000000`，并将输出存储在 指向的文件中`$sampFile`。

```
1,2,3,00
2,2,3,0000
3,2,3,000
4,2,3,00000000
5,2,3,0000

# Cleaner version 
awk '{FS=OFS=","; if ($4 == "0000" || $4 == "00000000") print}' file
2,2,3,0000
4,2,3,00000000
5,2,3,0000 
```

# html - 淘汰赛中的动态表

> ID：13970521
> 
> 赞同：0
> 
> 时间：2012-12-20T10:52:15.943
> 
> 标签：html, knockout.js

我正在使用 ajax 调用来获取数据，它以 json 格式返回数据，如下所示：

```
{ "d" : [ 
  { "Goal" : "Some one client",
    "GoalID" : 1,
    "IsPublic" : true,
    "MemberName" : "user1"
  },                                         
  { "Goal" : " this is goal",
    "GoalID" : 1,
    "IsPublic" : false,
    "MemberName" : "user2"
  },           
  { "Goal" : "Get call",
    "GoalID" : 4,
    "IsPublic" : true,
    "MemberName" : "user2"
  }
] } 
```

现在在我的 html 页面中，我想为每个用户创建单独的表。这是我的桌子

```
//want username here then table for goal of that user 
<table>
  <thead>
     <tr class="headerRow">
      <th>member</th>
      <th>
         Goals
       </th>
        </tr>
        </thead>
      <tbody data-bind="foreach: tasks">
      <tr">
       <td>
          <span data-bind="text: members" />
        </td>
        <td>
           <span data-bind="text: goal" />
         </td>
       </tr>
      </tbody>
</table> 
```

而“task”是包含所有目标细节的可观察数组。

这是我在 javascript 中的目标构造函数

```
 function Goal(data) {
    var self = this;
    self.goalID = data.GoalID;
    self.goal = data.Goal;
    self.isPublic = ko.observable(data.IsPublic);
    self.members = ko.observable(data.MemberName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:39:52.647

也许这不是最好的解决方案，但它会起作用。添加返回所有用户的计算：

```
self.users = ko.computed(function(){
    var list = ko.utils.arrayMap(self.tasks(), function(item){
        return item.members
    });
    return ko.utils.arrayGetDistinctValues(list);
}); 
```

并使用`foreach`绑定为每个用户创建一个表：

```
<div data-bind="foreach: users">
    <table>
      <thead>
         <tr>
          <th>membername</th>
          <th>
             Goals
           </th>
            </tr>
            </thead>
          <tbody data-bind="foreach: $parent.tasks">
          <tr data-bind="if: members == $parent">
           <td>
              <span data-bind="text: members" />
            </td>
            <td>
               <span data-bind="text: goals" />
             </td>
           </tr>
          </tbody>
    </table>
</div> 
```

这是工作小提琴：http: [//jsfiddle.net/TQXja/4/](http://jsfiddle.net/TQXja/4/)

# java - 是在数组上构建的linkedList

> ID：13970525
> 
> 赞同：-3
> 
> 时间：2012-12-20T10:52:25.077
> 
> 标签：java, list

链表在哪里存储它的数据？它是使用数组还是它是如何工作的？

我知道它适用于节点，但它实际上如何存储节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:57:46.373

一个`Node`链接到（即包含）`Node`序列中的下一个。该类`LinkedList`实际上只包含`Node`列表中的第一个。

`A`例如： , `B`,的链表`C`如下：

`LinkedList`包含一个成员变量`A`，`A`包含一个成员变量`B`，`B`包含一个成员变量`C`。`C`包含一个`null`成员变量。

`A`--> `B`--> `C`-->`null`

如果您插入一个新节点，它将变成...

`A`--> `B`--> `C`--> `D`-->`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:59:48.933

LinkedList 不使用数组来存储数据。它是一个双向链表，它将数据存储在节点中

```
class Node<E> {
    E item;
    Node<E> next;
    Node<E> prev;
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:08:04.717

LinkedList 包含对象条目，它具有当前对象以及对下一个和前一个对象的引用。然后这些下一个和上一个对象还包含对象条目，它具有当前对象和对下一个和上一个对象的引用等等。最终你有一个相互链接的对象链。

这是 LinkedList 中的内部类条目：

```
private static class Entry<E> {
    E element;
    Entry<E> next;
    Entry<E> previous;
... 
```

例如元素是当前对象。

我希望我对你有所帮助。

# php - 在 Gii 上添加 where close 生成的 CRUD

> ID：13970527
> 
> 赞同：1
> 
> 时间：2012-12-20T10:52:26.490
> 
> 标签：php, mysql, yii, gii, yii-cmodel

我是 Yii 的初学者，我使用 GII 创建了一个 CURD 表。一切正常，但我只想通过放置 where 子句（例如“客户性别为男性”）从数据库中获取某些记录。我无法在 Gii 生成的代码中找到从数据库中获取数据的位置以及我需要的位置在代码中插入 WHERE 子句。

如您所知，Gii 生成的模型、控制器和视图文件。模型文件如下。我的视图使用 CGridView 生成 CRUD 表。

```
 public static function model($className = __CLASS__) {
    return parent::model($className);
}

/**
 * @return string the associated database table name
 */
public function tableName() {
    return 'test_prefixtbl_client_local';
}

/**
 * @return array validation rules for model attributes.
 */
public function rules() {
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('client_id', 'required'),
        array('client_id', 'length', 'max' => 15),
        array('surname, forename', 'length', 'max' => 20),
        array('title', 'length', 'max' => 6),
        array('status', 'length', 'max' => 8),
        array('dob', 'safe'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('client_id, surname, forename, title, status, dob', 'safe', 'on' => 'search'),
    );
}

/**
 * @return array relational rules.
 */
public function relations() {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
    );
}

/**
 * @return array customized attribute labels (name=>label)
 */
public function attributeLabels() {
    return array(
        'client_id' => 'Client ID',
        'surname' => 'Surname',
        'forename' => 'Forename',
        'title' => 'Title',
        'status' => 'Status',
        'dob' => 'Date of birth (yyyy-mm-dd)',
        'actions' => 'Actions',
    );
}

/**
 * Retrieves a list of models based on the current search/filter conditions.
 * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
 */
public function search() {
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria = new CDbCriteria;

    $criteria->compare('client_id', $this->client_id, true);
    $criteria->compare('surname', $this->surname, true);
    $criteria->compare('forename', $this->forename, true);
    $criteria->compare('title', $this->title, true);
    $criteria->compare('status', $this->status, true);
    $criteria->compare('dob', $this->dob, true);

    return new CActiveDataProvider($this, array(
                'criteria' => $criteria,
                'sort' => array(
                    'defaultOrder' => 'dob DESC',
                ),
            ));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:00:44.173

您有两种方法来进行查询，一种使用查询生成器（[此处为教程](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)），如下所示：

```
$clientLocalArray = Yii::app()->db->createCommand()
->select()
->from("test_prefixtbl_client_local")
->where("gender = :gender", array(":gender"=>$gender))
->queryAll(); 
```

或者你可以像这样使用 Active Record 本身（[教程在这里](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)）：

```
$clientLocalArrayObjects = ClientLocal::model()->findAllByAttributes(array(
"gender" => $gender
)); 
```

有任何疑问，尽管问！:)

# javascript - 使用 jquery 为所有浏览器复制到剪贴板

> ID：13970535
> 
> 赞同：1
> 
> 时间：2012-12-20T10:52:55.973
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何选择文本框中的所有文本并使用 JavaScript/jQuery 将其复制到剪贴板？](https://stackoverflow.com/questions/1390953/how-to-select-all-text-in-a-textbox-and-copy-it-to-clipboard-using-javascript-jq)
> [使用 jQuery 将文本复制到客户端的剪贴板](https://stackoverflow.com/questions/1539641/copy-text-to-the-clients-clipboard-using-jquery)

我需要一个 javascript、jquery 函数来复制到剪贴板功能。我知道以下代码，但它仅适用于 IE：

```
holdtext.innerText = copytext.innerText;
Copied = holdtext.createTextRange();
Copied.execCommand("Copy"); 
```

我看到一些教程建议一些 swf 文件。我已经使用了其中的一些，例如[http://www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)但它不起作用。

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:59:21.710

没有任何跨浏览器的方法可以通过 javascript 将数据复制到剪贴板（这被认为是一个安全漏洞）——它可以在一个小的 flash 小程序的帮助下完成，但这当然不是完全跨平台的。

我以前使用过的一种作弊方法是创建一个`prompt`具有默认值的值，使用户可以更轻松地复制和粘贴信息，而无需在页面中突出显示它。但这并不能真正解决问题。您所能做的就是尽可能少地复制和粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:06:20.843

The mainstream way of doing this is via a SWF object. [ZeroClipboard](https://github.com/jonrohan/ZeroClipboard) is a neat project which deals with this.

# entity-framework - 在“SaveChanges”之前获取插入、更新和删除操作的正确执行顺序

> ID：13970537
> 
> 赞同：1
> 
> 时间：2012-12-20T10:52:59.023
> 
> 标签：entity-framework, entity-framework-4

我们需要按照在数据库上执行的顺序来添加、修改或删除实体。

我们通过覆盖 ObjectContext 类中的“SaveChanges”方法来使用以下代码片段来获取已添加、修改或删除的不同实体。

*foreach (ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified | EntityState.Deleted)中的ObjectStateEntry条目) {
// 对每个实体的操作}*

假设我们在数据库中有两个表 A 和 B。这些是无关的。我们使用实体框架对这些表进行以下操作。

1.  在 A 中插入新行
2.  更新 B 中的一行
3.  在 B 中插入新行
4.  更新 A 中的一行（不是在步骤 1 中插入的行）
5.  删除 B 中的一行（不是第 2 步和第 3 步中受影响的行）
6.  在 B 中插入新行
7.  在 A 中插入新行

在使用上面的代码片段时，我们注意到插入、更新和删除被组合在一起，即我们以 1、3、6、7、2、4、5 的顺序获得了实体。

在这篇文章（http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/d8448144-05dd-4c34-b93c-9336c3b62f6e/）中提到，没有确定顺序的明确方法在“SaveChanges”之前完成的操作中的插入次数。

上面的代码片段是否获取了在数据库上执行这些操作的正确顺序。

如果这个顺序不正确，有没有其他方法可以得到正确的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:05:17.720

不，您不能更改操作顺序。控制顺序的唯一方法是分别运行每个操作（`SaveChanges`每次操作后调用）。

# php - 在mysql数据库中存储月份和年份

> ID：13970539
> 
> 赞同：4
> 
> 时间：2012-12-20T10:53:12.620
> 
> 标签：php, mysql, sql, date

我有以下日期：

```
$params['ExpirationMonth'];
$params['ExpirationYear']; 
```

我需要一些关于如何在 mysql 数据库中仅存储月份和年份的建议。经过一番研究，我找到了3种方法来做到这一点。

1）我可以使用 1st 作为日期，并且可以与月份和年份一起存储。

2）`date`我可以使用`varchar`数据类型而不是使用，并且只能在其中存储月份和年份。

3）我可以将两者存储为两个单独的列作为整数。即月份和年份。

哪个是更好的方法？需要一些建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:59:13.393

1）我可以使用 1st 作为日期，并且可以与月份和年份一起存储。

> 这个选项更好，如果需要进行任何计算或排序，它将非常有用且方便。

2）我可以使用 varchar 数据类型而不是使用日期，并且只能在其中存储月份和年份。

3）我可以将两者存储为两个单独的列作为整数。即月份和年份。

> 对于以上两个选项都可以，因为与日期或时间戳相比，它会占用更少的空间。但是你可以用它来计算或排序。对于计算，您需要通过“str_to_date”函数将其转换为日期

我希望这会以某种方式帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:04:25.973

您可以使用`date`列，请记住：

*   您可以将日期部分设置为 1
*   该卡在指定到期日的整个月份都有效。`0512`表示有效期至 2012 年 5 月 31 日。

好处：

*   排序很简单（与存储为 varchar 相比）
*   日期操作很简单（与存储为 varchar/两个整数列相比）
*   数据保留在一列中（与存储为两个整数列相比）

示例查询：

```
-- expires in 2012
WHERE expires >= '2012-01-01' AND expires < '2012-01-01' + INTERVAL 1 YEAR
-- expires in Dec 2012
WHERE expires >= '2012-12-01' AND expires < '2012-12-01' + INTERVAL 1 MONTH 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:55:35.890

存储为 UNIX。以后突然需要加点东西，过时也没问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:05:19.833

信用卡到期月/年表示此卡有效期至本月/年末。

存储为可比较日期的最佳方法应该是本月的最后一天

```
STR_TO_DATE( CONCAT( '01,', @Month, ',', @Year, '%d,%m,%Y ) 
  + INTERVAL 1 MONTH 
  - INTERVAL 1 DAY 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-08-10T09:23:01.590

您始终可以像 YYYYDD 一样将其存储为整数：因此，对于 2021 年 5 月，您可以存储此整数：202105

# php - 为什么整数 0 等于 PHP 中的字符串？

> ID：13970544
> 
> 赞同：4
> 
> 时间：2012-12-20T10:53:33.610
> 
> 标签：php, types, casting, type-conversion

> **可能重复：**
> [相等（== 双等）和身份（=== 三等）比较运算符有何不同？](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)

为什么这个

```
var_dump(0 == "string"); 
```

输出这个

```
bool(true) 
```

运算符的上下文不`==`应该根据[这套规则](http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)`0`转换成`FALSE`和`"string"`成吗？`TRUE`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T10:55:25.227

```
var_dump(0 == "string"); 
```

正在进行数字（整数）比较

0 是整数，所以“字符串”被转换为整数进行比较，等于整数值 0，所以 0 == 0 为真

详见 PHP 文档中[与各种类型表](http://www.php.net/manual/en/language.operators.comparison.php)的比较

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:56:32.990

此处显示的[表格](http://php.net/manual/en/types.comparisons.php#types.comparisions-loose)更适合您的情况。

它显示`TRUE`用于与`0`比较`"php"`。

在比较中，您不会将两个操作数都转换为布尔值，但会将一个操作数转换为与另一个操作数的类型匹配。在您的情况下，字符串被转换为整数，这导致另一个`0`. 这给了你`0 == 0`，结果为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:55:03.613

它们不是同一类型，如果要检查它们是否也属于同一类型，请使用 ===。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T10:55:32.380

[php：==](http://php.net/manual/en/language.operators.comparison.php)

> 如果将**数字与字符串**进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

`"string"`不是数字格式，所以会转换成`0`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T10:57:55.443

在比较期间，字符串被转换为整数：

```
var_dump(0);
var_dump((int)"string");
var_dump(0 == "string"); 
```

最后一行将自动转换为：

```
var_dump(0 == (int)"string"); 
```

所以这个回报将返回：

```
int(0)
int(0)
bool(true)
bool(true) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-20T10:56:31.067

您首先在此站点上查找比较表：http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)。转换为`bool`不适用于此处。

```
Operand 1           Operand 2
...
string, resource    string, resource    Translate strings and resources to numbers,
or number           or number           usual math 
```

`"string"`强制转换*为*等于`0`.

# blackberry - 黑莓分析中的报告未更新

> ID：13970547
> 
> 赞同：10
> 
> 时间：2012-12-20T10:53:42.293
> 
> 标签：blackberry

我已经开发了黑莓分析服务的演示应用程序，但是我的帐户中的报告没有更新我的程序是..

```
public class MyApp extends WebtrendsUiApplication {

    public static void main(String[] args) {
        MyApp theApp = new MyApp();
        theApp.enterEventDispatcher();
    }

    public MyApp() {
        WebtrendsConfigurator.LoadConfigFile(new AnalyticsConfig());
        WebtrendsDataCollector wtDC = WebtrendsDataCollector.getInstance();
        wtDC.Initialize();
        pushScreen(new MyScreen());

    }

    private class AnalyticsConfig extends WebtrendsConfig {

        public String wt_dc_app_name() {
            return "sample";
        }

        public String wt_dc_app_version() {
            return "1.0.1";
        }

        public String wt_dc_dcsid() {
            return "dcswcrmlj9dv0hgctfq9y6lw8_3w4g"; // Analytics Demo
        }

        public String wt_dc_debug() {
            return "true";
        }

        public String wt_dc_timezone() {
            return "+5";
        }

        public String wt_dc_url() {
            return "http://dc.webtrends.com/v1";
        }

        public String wt_dc_app_category() {
            return "Utilities";
        }

        public String wt_dc_app_publisher() {
            return "abc";
        }

    }
}

public final class MyScreen extends MainScreen implements FieldChangeListener{

    ButtonField b;

    public MyScreen() {
        b=new ButtonField();
        b.setChangeListener(this);
        add(b);
    }

    public boolean onClose() {
        try {
            WebtrendsDataCollector.getInstance().onApplicationTerminate("Application Terminate", null);
        } catch (IllegalWebtrendsParameterValueException err) {
            WebtrendsDataCollector.getLog().e(err.getMessage());
        }
        System.exit(0);

        return true;
    }

    public void fieldChanged(Field field, int context) {
        if(field==b){
            try {
                WebtrendsDataCollector.getInstance().onAdClickEvent("/mainscreen", "Main Screen", "menu", null, "Demo Ad");
            } catch (IllegalWebtrendsParameterValueException e1) {
                System.out.println(e1.toString());
                e1.printStackTrace();
            }
        }
    }
} 
```

请找出问题所在。我只更改了应用程序中的 dcsid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T17:18:38.930

我知道这个问题很老了..但我写的就像一组你可以使用的类.. [https://bitbucket.org/folorunsho1/googleanalyticsforblackberry](https://bitbucket.org/folorunsho1/googleanalyticsforblackberry)

# c++ - 如何使 #include 文件的内容成为 cpp 文件中的编译时常量？

> ID：13970548
> 
> 赞同：9
> 
> 时间：2012-12-20T10:53:44.260
> 
> 标签：c++, compiler-construction, syntax, self-modifying

我有一个文件`module.hpp`

```
struct ModuleBase {
    virtual void run() = 0;
}; 
```

和一个`main.cpp`程序

```
int main() {
    cout << ...?...; // here should go the contents of module.hpp
} 
```

**我可以放什么`...?...`让头文件的内容在这里打印？**

一个基本的想法是

```
int main() {
    static const string content = R"(
#include <module.hpp>
)";
    cout << content;
} 
```

但是多行字符串仅在 C++11 中可用，并且在多行字符串中不起作用（这很好*）*`#include`？

 *如果 gcc 有一种不可移植的方式……那将是一个开始。

**澄清**（更新）：替换应该在编译时完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:19:26.067

我知道的唯一真正的解决方案是编写一个小程序，将文件转换为包含它的字符串变量的 C++ 定义。这写起来相当简单：输出一个简单的标题，如下所示：

```
char const variableName[] = 
```

然后复制文件的每一行，将其包装在 中`"...\n"`，并转义任何必要的字符。（如果您可以确定 C++11，那么您也许可以用 做一些事情`R"..."`，但我没有这方面的经验。）

*[更新：参考带有错字的原始问题]：* 您的解决方案不应该*工作*；如果是这样，那就是编译器中的错误。根据 §2.2，标记化发生*在* 执行预处理指令之前。因此，当执行预处理指令时，您有一个字符串文字，而不是*预处理*`#`标记。（使用 C++11 功能时，编译器会出现错误。实现者还没有足够的时间来解决所有的错误。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:16:31.160

作为仅限 GNU 的 hack，您可以将标头转换为二进制对象文件并将其与可执行文件链接。

首先，用于`objcopy`进行转换：

```
objcopy -I binary -O default -B i386 module.hpp module.hpp.o 
```

如有必要，替换`i386`为您正在构建的架构。生成的目标文件将包含标头内容及其大小的符号，您可以按如下方式访问：

```
#include <iostream>

extern char _binary_module_hpp_start;
extern char _binary_module_hpp_size;

int main()
{
    char * header_start = &_binary_module_hpp_start;
    size_t header_size = reinterpret_cast<size_t>(&_binary_module_hpp_size);

    std::cout.write(header_start, header_size);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:17:24.627

除了外部工具，我认为这是做不到的。您给出的 C++11 方式不起作用，`#include`未在字符串中展开。[例如，请参见此处](http://ideone.com/O8kC59)。

C++03 方式*如下*，带有宏：

```
#define TO_STR__(...) #__VA_ARGS__
#define TO_STR_(...) TO_STR__(__VA_ARGS__)
#define TO_STR(...) TO_STR_(__VA_ARGS__)

#include <iostream>
int main()
{
    std::cout << "String from #include <string>, ";
    static const char* str = TO_STR(
#include <string>
    );

    std::cout << sizeof(str) / sizeof(char) << " characters:\n\n";
    std::cout << str << "\n";
} 
```

[使用 GCC](http://ideone.com/vpznRl)，不会输出任何内容。使用 Visual Studio 2010，`#include <string>`输出。

如果您可以修改编译链，则可以添加一个预构建步骤，该步骤将包含您想要的文件内容作为字符串（可以使用 CMake 或自定义 makefile 等工具轻松完成）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:58:57.300

您可以使用 ofstream 打开文件流并读取和输出内容。*

# android - 如何在 Android 上永久设置凭据持久性

> ID：13970554
> 
> 赞同：1
> 
> 时间：2012-12-20T10:54:01.843
> 
> 标签：android, authentication, login, credentials, ntlm

我的应用程序有保存登录凭据功能，所以我在成功登录后存储cookie以备下次使用。但是，一段时间后，会话将超时，无法再使用cookie登录。在 iOS 上，将凭证持久性设置为永久后，即使重新启动手机，应用程序也能正常运行：

```
[[challenge sender] useCredential:[NSURLCredential credentialWithUser:username password:password persistence:NSURLCredentialPersistencePermanent] forAuthenticationChallenge:challenge]; 
```

在 Android 上，我找不到这种选项。这是来自我的 HttpHelper 类：

```
((AbstractHttpClient) HttpHelper.client).getAuthSchemes().register("ntlm",new NTLMSchemeFactory());
  NTCredentials creds = new NTCredentials(user, pass, "", domain);
  ((AbstractHttpClient) HttpHelper.client).getCredentialsProvider().setCredentials(AuthScope.ANY, creds); 
```

[服务器是 SharePoint，所以我必须按照此说明](http://www.robertkuzma.com/2011/07/manipulating-sharepoint-list-items-with-android-java-and-ntlm-authentication/#respond)处理 ntlm 身份验证

如果你有想法，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:02:10.207

您是否考虑过使用 Android 框架提供的 Sharedpreferences？在这里阅读更多[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:03:54.927

NTCredentials 实现了可序列化。

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/auth/NTCredentials.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/auth/NTCredentials.html)

没有错误处理的简化：

保存：

```
FileOutputStream fos = openFileOutput("MyFileName", Context.MODE_PRIVATE);
ObjectOutputStream os = new ObjectOutputStream(fos);
os.writeObject(creds);
os.close(); 
```

加载：

```
FileInputStream fis = openFileInput("MyFileName");
ObjectInputStream is = new ObjectInputStream(fis);
NTCredentials creds = (NTCredentials) is.readObject();
is.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:05:45.193

您可以使用 Shared Preference 来存储您的凭据以将其保存在设备端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T21:24:31.573

你看过`AccountManager`吗？它是一个内置于 Android 框架中的通用帐户管理器框架，专门用于管理帐户凭据。我以前没用过 ntlm，所以我不能说这方面，但你可以存储一个“authToken”、用户名、密码，并且还有额外的存储数据的位置（我相信 a `Bundle`）。它支持在通知给定帐户的服务器通信失败时尝试与服务器重新进行身份验证。如果无法自动重新验证，可以要求用户再次输入他们的凭据。所有这些方面都暴露给开发人员来定义行为。

这样做的好处`AccountManager`是，它允许您让用户在“设置”中管理您的帐户类型，以及他们在设备上的所有其他帐户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T07:13:01.303

您可以很好地使用 SharedPreference 来存储推荐存储键值对的凭据

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor editor = preferences.edit();

  editor.putString("Name","Harneet");//adding Harneet(value) in Name(key) pairs which can be fetched later with the help of key i.e. Name(key)
  editor.commit(); // saving the preferences 
```

要从共享首选项中检索值：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
String name = preferences.getString("Name","");
if(!name.equalsIgnoreCase(""))
 {
  name = name+"  Sethi";  /* Edit the value here*/
 } 
```

这些是您可以存储和获取凭据的方式::

希望这些可以帮到你！！:)

# java - Maven Junit 测试“noClassDefFoundError”

> ID：13970559
> 
> 赞同：5
> 
> 时间：2012-12-20T10:54:20.897
> 
> 标签：java, maven, junit

我正在使用 Maven 和 Junit 测试。我正在使用标准的 Maven 项目结构，我可以在 Eclipse 中运行“作为 Junit 测试运行”，它们都成功了，但是如果我想运行 Maven 测试/安装，那么测试没有运行，导致错误“无法初始化类 main.sushi.persistence.Persistor”。

这是我们的项目树：

```
├── pom.xml
├── src
│   ├── main
│   │   ├── java
│   │   │   └── main
│   │   │       └── sushi
│   │   │           └── persistence
│   │   │               ├── DatabaseEnvironments.java
│   │   │               ├── META-INF
│   │   │               │   ├── persistence.xml
│   │   │               │   └── persistence_template.xml
│   │   │               └── Persistor.java
│   │   └── resources
│   └── test
│       ├── java
│       │   ├── META-INF
│       │   │   ├── persistence.xml
│       │   │   └── persistence_template.xml
│       │   └── test
│       │       └── sushi
│       │           └── persistence
│       │               ├── ProcessPersistorTest.java
│       │               └── TestPersistor.java
│       └── resources
└── target
    ├── classes
    │   ├── META-INF
    │   │   ├── MANIFEST.MF
    │   │   └── maven
    │   │       └── sushi
    │   │           └── SushiPersistence
    │   │               ├── pom.properties
    │   │               └── pom.xml
    │   └── main
    │       └── sushi
    │           └── persistence
    │               ├── DatabaseEnvironments.class
    │               ├── META-INF
    │               │   ├── persistence.xml
    │               │   └── persistence_template.xml
    │               └── Persistor.class
    ├── generated-sources
    │   └── annotations
    ├── surefire
    ├── surefire-reports
    │   ├── TEST-test.sushi.persistence.ProcessPersistorTest.xml
    │   ├── TEST-test.sushi.persistence.TestPersistor.xml
    │   ├── test.sushi.persistence.ProcessPersistorTest.txt
    │   └── test.sushi.persistence.TestPersistor.txt
    └── test-classes
        ├── META-INF
        │   ├── persistence.xml
        │   └── persistence_template.xml
        └── test
            └── sushi
                └── persistence
                    ├── ProcessPersistorTest.class
                    └── TestPersistor.class 
```

起居室：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>sushi</groupId>
    <artifactId>SushiPersistence</artifactId>
    <version>SNAPSHOT</version>
    <repositories>
        <repository>
            <id>EclipseLink</id>
            <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
        </repository>
    </repositories>
    <build>

        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>de.hpi-web.sushicommon</groupId>
            <artifactId>SushiCommon</artifactId>
            <version>SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>eclipselink</artifactId>
            <version>2.3.0</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>org.eclipse.persistence.jpa</artifactId>
            <version>2.0.0</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.22</version>
        </dependency>
    </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-22T15:34:40.980

老问题，但我会提供我的答案，因为前几天我遇到了一个非常相似的问题。我正在为包 project.model 中的类 Foo 编写一个单元测试，它在包 project.cache 中有一个 Bar 类型的成员。当 maven 运行单元测试时，我在创建 Bar 类型的模拟时遇到了上述错误。

运行 mvn verify -X 时，我注意到运行测试时类路径中缺少目标/类。

我通过在 pom.xml 中添加以下内容来解决它。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.22.0</version>
      <configuration>
        <additionalClasspathElements>
          <additionalClasspathElement>${project.basedir}/target/classes</additionalClasspathElement>
        </additionalClasspathElements>
      </configuration>
    </plugin>

  </plugins>
</build>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:59:06.637

*src/main/sushi/persistence/META-INF*中的资源必须位于*src/main/resources*下，并且测试的相应文件夹必须位于*src/test/resources*下，而不是*src/main/java*或*src/test/爪哇*_

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:48:03.310

从您的所有依赖项中删除范围标签..当前您已将其设置为编译，因此 maven 执行您要求的操作..意味着它在测试阶段不包括您的依赖项。

# ant - 通过 Ant exec 运行多个命令

> ID：13970564
> 
> 赞同：11
> 
> 时间：2012-12-20T10:54:39.157
> 
> 标签：ant

我想通过一个 Ant 构建脚本来做到这一点：

```
$ /bin/sh
$ cd /path/to/executable
$ ./executable.sh 
```

这是我尝试过的，但我认为它只执行`cd`命令：

```
<exec executable="/bin/sh" os="Mac OS X">
    <arg value="-c"/>
    <arg value="cd /path/to/executable"/>
    <arg value="./executable.sh"/>
</exec> 
```

我在 Mac OS X 上。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T11:10:08.697

只有在 之后的第一个 arg`-c`由 shell 运行，因此您看到的行为。只需将两个命令放在一个 arg 中，用分号分隔：

```
<exec executable="/bin/sh" os="Mac OS X">
    <arg value="-c"/>
    <arg value="cd /path/to/executable; ./executable.sh"/>
</exec> 
```

# jquery - jquery复选框按类从同一个表中自动选择其他

> ID：13970566
> 
> 赞同：0
> 
> 时间：2012-12-20T10:54:45.927
> 
> 标签：jquery

当我检查其他复选框时，我想自动选择复选框。

这是我正在使用但不起作用的代码：

```
<table class='block'>
<tr>
<td>
<input class='cb1' type='checkbox'><label>Checkbox 1</label>
</td>
<td>
<input class='cb2' type='checkbox'><label>Checkbox 2</label>
</td>
<td>
<input class='cb2' type='checkbox'><label>Checkbox 2</label>
</td>
</tr>
</table>

<table class='block'>
<tr>
<td>
<input class='cb1' type='checkbox'><label>Checkbox 1</label>
</td>
<td>
<input class='cb2' type='checkbox'><label>Checkbox 2</label>
</td>
<td>
<input class='cb2' type='checkbox'><label>Checkbox 2</label>
</td>
</tr>
</table>

<script type='text/javascript'>
$(document).ready(function(){
    $('.block .cb1').click(function(){
        if($(this).is(':checked'))
            {

                $(this).parent().find('.cb2').attr('checked','checked');
            }
        else
            {
                $(this).parent().find('.cb2').removeAttr('checked');
            }
    });
});
</script> 
```

我试图让它只从检查“cb1”的同一张表中检查“cb2”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:02:52.773

您需要替换`parent()`为`closest('table')`（或`closest('tr')`，对于显示的 HTML）调用。看，复选框元素的直接父元素是`<td>`元素 - 显然不包含任何其他复选框。您需要进一步向上 DOM 查找具有所有其他复选框作为后代的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:09:40.750

您的代码正在搜索带有类的元素，因为`cb2`您`<td>`的选择器是`.parent()`.. 它必须通过第 3 个父级才能到达该`<table>`元素..

所以使用`parents()`和`eq()`

```
$(this).parents().eq(3).find('.cb2').attr('checked','checked');

*OR*

$(this).parents().eq(2).find('.cb2').attr('checked','checked'); // since all your checkbox is under <tr> 
```

这是小提琴..

[http://jsfiddle.net/MKSgf/](http://jsfiddle.net/MKSgf/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T11:03:32.980

试试这个代码，因为你在 parent() 中选择了 td 而不是 tr

```
(this).parent().parent().find('.cb2').attr('checked','checked'); 
```

如果你想选择第一个 cb2 复选框试试这个

```
 $(this).parent().parent().find('.cb2').first().attr('checked','checked'); 
```

[演示](http://jsfiddle.net/LFWyV/1/)

# c# - 如何从文本文件中提取数据

> ID：13970568
> 
> 赞同：4
> 
> 时间：2012-12-20T10:54:52.393
> 
> 标签：c#, regex

我需要解析一些大文本文件并提取`Display name`，并且`area code`仅当它与以下模式匹配时：

*   行开头`display name`（任意数量的单词，但不能包含数字或特殊字符）
*   后跟 6 位数字（可以包含空格）
*   后跟`#text`标签

**输入文件**

```
John doe 123 456 #text some text
Test 123456 #text
Test$test 123456 #text
Test123 345678 #text
Test 123 #test
Test 123456 #test1
Test 123g45 #test 
```

**输入和预期输出**

```
John doe 123 456 #text some text
Display name: John doe
Area code: 123 456

Test 123456 #text
Display name: Test
Area code: 123456

Test$test 123456 #text
Invalid, display name contains special character

Test123 345678 #text
Invalid, display name contains digits

Test 123 #test
Invalid, area code contains only 3 digits

Test 123456 #test1
Invalid, contains invalid tag

Test 123g45 #test
Invalid, area code contains letters 
```

等等

我知道如何打开文本文件并逐行读取，但在编写正则表达式时遇到了麻烦。

这是我尝试过的：

```
private static void Main(string[] args)
{
    string text = "John Doe 123 45 #text Lorem ipsum dolor :)";
    string pattern = @"(\w+)*([0-9]{2,5}).([0-9]{2,5}).#text";
    Match match = Regex.Match(text, pattern, RegexOptions.IgnoreCase);

    if (match.Success)
    {
        string key = match.Groups[0].Value;
        Console.WriteLine(key);
    }
} 
```

编辑：

这里还有一些解释

**显示名称**
显示名称可以包含任意数量的单词，例如 `John Michael Smith`有效，因为`John`是名字、`Michael`中间名和`Smith`姓氏。`Šljaker`也是有效的显示名称，因为它是某人的昵称，并且可能包含非英文字符。但是带有数字的名称是无效的，例如。`John1`. 为什么？这是我们的业务规则，没有数字 :) 我想这`\w`在这里会起作用，`a-zA-Z`但不会，因为它不会涵盖非英文字母。

**区号**
业务规则很简单：它必须包含 6 个数字，我们不关心它们的格式。所有这些都是有效的区号：123456、12 34 56、1234 56 等。Regex 不需要修剪空格，我将在代码中处理。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:40:56.303

输入的规范对于编写正确的正则表达式仍然有点模糊。在编写正则表达式之前，有必要先了解一下规范，或者至少做出适用于您当前数据集的假设。

这是我写的正则表达式，正则表达式将验证整行。假设稍后出现。

```
^([a-zA-Z ]+)(?<! ) +((?:[0-9] *){6}) *#text( .*)?$ 
```

我只允许输入中的空格（ASCII 32）。`\s`如果您想允许制表符和其他空白字符，您可以替换正则表达式中的空格。

`([a-zA-Z ]+)(?<! ) +`：匹配并捕获显示名称。显示名称中只允许使用英文字母和空格。用于抑制捕获组的`(?<! )`尾随空间；它还有一个不允许名称只有空格的效果。如果要允许 Unicode 中的任何字母匹配，请使用`[\p{L} ]+`.`[a-zA-Z ]+`

`((?:[0-9] *){6})`: 正好是 6 位十进制数字，由任意数量的空格分隔。由于在此部分之前匹配了 1 个或更多空格，因此它不允许将数字粘在显示名称上` +`。

` *#text( .*)?`：我允许数字粘在标签上（例如`Name 123456#text dfsjhdf`）；将其更改`+#text( .*)?`为禁止此操作。如果有更多评论，请`( .*)?`确保后面有一个空格，或者后面没有任何内容（例如）。`#text``#text``Name 123456 #text`

从此正则表达式中捕获的文本将：

*   显示名称：可能包含过多的前导空格和中间空格，但没有尾随空格。至少一个英文字母。
*   区号：**正好**包含6 位数字。两者之间可能有任意空格，因此您可能需要处理匹配的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:08:52.690

您可以将正则表达式模式替换为以下内容：

```
@"^([\D]+)\s*((?:\d\s*?){6})\s*\#text\s*(.*)$" 
```

这按顺序搜索

*   非数字序列（第 1 组）
*   后跟任意数量的空格
*   后跟正好 6 个数字，每个数字后跟可选的空格（第 2 组）
*   后跟任意数量的空格和文字“#text”，后跟可选的空格
*   接下来是线路的其余部分（第 3 组）

由于这是针对多行进行评估的，因此请考虑添加`RegexOptions.Compiled`标志（即：）`RegexOptions.IgnoreCase | RegexOptions.Compiled`。

显示名称存储为`match.Groups[1].Value`；区号为`match.Groups[2].Value`，文字为`match.Groups[3].Value`。

# xpages - 将 xpages 字段值动态绑定到后端文档的最佳方式

> ID：13970570
> 
> 赞同：0
> 
> 时间：2012-12-20T10:54:53.507
> 
> 标签：xpages, xpages-ssjs

我有一个包含多个字段的表单，例如“Persp_1”、“Persp_2”、“Persp_3”....、Goal_1、Goal_2、Goal_3.... 等。目前我正在将 xPage 组件中的值分配给后端文档通过以下通用功能：

```
function pushDataToBackEnd(sourceDoc:NotesDocument, fieldArray){
    try{
        for(var i=0; i<fieldArray.length;i++){
            for(var j=0; j<12; j++){
                a = j+1;
                var fieldName = fieldArray[i] + "_" +  a;
                var fieldValue = getComponent(fieldName).getValue();
                if(fieldValue != ""){
                    sourceDoc.replaceItemValue(fieldName,fieldValue);
                }
            }
        }
        return true;
    }
    catch(exp){
        return exp
    }
    return true;
} 
```

问题是我还需要将 xPage 的组件与注释表单上的后端字段绑定。有没有办法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:18:45.800

使用自定义控件和重复控件来动态绑定字段。使用后端数据。看看这个帖子

[动态数据绑定？](https://stackoverflow.com/questions/9913331/dynamic-data-binding)

# jquery - jquery 和 google maps on page show 事件

> ID：13970571
> 
> 赞同：2
> 
> 时间：2012-12-20T10:54:56.467
> 
> 标签：jquery, jquery-ui, jquery-mobile, google-maps-api-3

我一直在使用此代码在 jquery 移动页面显示事件中显示谷歌地图，但它不起作用..

```
$('#page3').live('pageshow', function(event, ui) {
    $('#googleMap').gmap().bind('init', function(ev, map) {
       $('#googleMap').gmap('addMarker', {'position': '57.7973333,12.0502107', 'bounds':  
true}).click(function() {
               $('#googleMap').gmap('openInfoWindow', {'content': 'Hello World!'}, this);
                    });
           }); 
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:21:04.990

我认为这个解决方案可以解决您的问题：

**你的 map.html**

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Map</title>
<script>
    function initialize() {
        var myLatlng = new google.maps.LatLng( 51.520838, -0.140261 );
        var myOptions = {
            zoom: 15,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map( document.getElementById( "map_canvas" ), myOptions );
    }
</script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<style>
    html {
        height: 100%;
        overflow: hidden;
    }
    body {
        margin: 0;
        padding: 0;
        height: 100%;
    }
    #map_canvas { 
        height: 100%;
    }    
</style>
</head>
<body onload="initialize()">
    <div id="map_canvas"></div>
</body>
</html> 
```

**您打开 map.html 的按钮**

```
<div data-role="popup" id="popupMap" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
    <iframe src="map.html" width="480" height="320" seamless></iframe>
</div> 
```

查看更多关于[jQuery Mobile - 弹出 iframe的信息](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/popup-iframes.html)

# android - 在android中以编程方式删除铃声

> ID：13970582
> 
> 赞同：4
> 
> 时间：2012-12-20T10:55:18.403
> 
> 标签：android, title, ringtone

我知道以编程方式插入铃声，但我想知道如何从系统铃声列表中删除特定铃声。我所知道的是铃声的标题。

我用谷歌搜索了很多，但不幸的是，找不到任何方法来实现我想要的。

请指导我使用铃声标题删除铃声的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:15:55.323

尝试删除铃声`MediaStore.Audio.Media`

```
Uri uri = MediaStore.Audio.Media.getContentUriForPath(ringtone_path);  
int roweffected = getContentResolver().delete(uri,  
       MediaStore.MediaColumns.DATA + "=\"" + ringtone_path + "\"",  
       null);

if(roweffected>0){
  //ringtone deleted
}
else{
  //ringtone not deleted
} 
```

**编辑：** 您还可以从列表中删除 RINGTONE：

```
ContentValues cv = new ContentValues();
Uri uri = MediaStore.Audio.Media.getContentUriForPath(ringtone_path);
cv.put(MediaStore.Audio.Media.IS_RINGTONE, false);
cv.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
cv.put(MediaStore.Audio.Media.IS_ALARM, false);
cv.put(MediaStore.Audio.Media.IS_MUSIC, true);

int rowupdate = getContentResolver().update(uri,
       cv, MediaStore.MediaColumns.DATA + "=?",new String[] {ringtone_path});

if(rowupdate>0){
  //ringtone update
}
else{
  //ringtone not update
} 
```

# java - 文本框中的文本临时变灰

> ID：13970590
> 
> 赞同：1
> 
> 时间：2012-12-20T10:55:31.397
> 
> 标签：java, swing, text, textbox

我想显示一个文本，例如“在此处写下您的信息”。文本框获得焦点后自动消失？我试图在不必与听众打交道的情况下做到这一点，例如使用初始文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:58:49.320

SwingX 包含一个“PromptSupport”类，它完全可以满足您的需求。这很容易处理：

```
JTextField tf = new JTextField(5);

PromptSupport.setPrompt("A Prompt", tf); 
```

看看这里： [http ://weblogs.java.net/blog/kschaefe/archive/2010/07/15/swingx-using-promptsupport](http://weblogs.java.net/blog/kschaefe/archive/2010/07/15/swingx-using-promptsupport)

您可以在此处下载 jar 文件：http: [//java.net/downloads/swingx/releases/](http://java.net/downloads/swingx/releases/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:11:47.560

试试这个例子。我认为这就是你需要的 [http://tips4java.wordpress.com/2009/11/29/text-prompt/](http://tips4java.wordpress.com/2009/11/29/text-prompt/)

# jquery - jQuery - 动画功能

> ID：13970591
> 
> 赞同：0
> 
> 时间：2012-12-20T10:55:34.360
> 
> 标签：jquery, html, css, jquery-animate

我有一段代码如下所示：

```
$(".tagArea li").mouseover(function(){
  $(this).animate({
      borderWidth: "2px"
  }, 1000 );
});
$(".tagArea li").mouseout(function () {
$(this).animate({
      borderWidth: "1px"
  }, 1000 );
}); 
```

当我尝试将其悬停在特定列表项上时，它会正确设置动画，但不会只停止一次。它继续做2或3次。

如何避免这种情况，我尝试了很多次，但没有出现积极的结果。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:00:59.513

您可以使用[CSS3 过渡](http://www.w3.org/TR/css3-transitions/)和 :hover，而不是通过 jQuery 制作动画。

```
.tagArea li {
  -webkit-transition：边框宽度 .25s；
     -moz-transition：边框宽度 .25s；
          过渡：边框宽度 .25s；
  边框宽度：1px；
}

.tagArea li:hover {
  边框宽度：2px；
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:58:38.533

试试这个 ：

```
$(".tagArea li").mouseover(function(){
  $(this).animate({
      borderWidth: "2px"
  }, 1000 );
}) 
.mouseout(function () {
$(this).animate({
      borderWidth: "1px"
  }, 1000 );
}); 
```

[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)中给出了详细参考

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:59:50.667

在这种情况下，您可以使用`.stop()`并且可以链接您的事件：

```
$(".tagArea li").mouseover(function(){
   $(this).stop().animate({
      borderWidth: "+=5px"
   }, 500 );
}).mouseout(function () {
    $(this).stop().animate({
      borderWidth: "1px"
    }, 500 );
}); 
```

签出小提琴：http: [//jsfiddle.net/YzaCZ/](http://jsfiddle.net/YzaCZ/)

# java - (Java) 将事件写入日志文本文件

> ID：13970595
> 
> 赞同：5
> 
> 时间：2012-12-20T10:55:42.740
> 
> 标签：java, logging, text-files

我正在尝试将事件写入日志文件，但没有创建文件。我完全没有错误。这是日志类：

```
public class Logs {
static FileHandler fileTxt;
static SimpleFormatter formatterTxt;

static public void logging() throws IOException {

    Logger logger = Logger.getLogger("");
    logger.setLevel(Level.INFO);//Loget Info, Warning dhe Severe do ruhen
    fileTxt = new FileHandler("c:/SimleTaskEvents.txt");
    formatterTxt = new SimpleFormatter();
    fileTxt.setFormatter(formatterTxt);
    logger.addHandler(fileTxt);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T10:58:41.370

您需要先写入日志

```
logger.info("this is a line of logging"); 
```

也许检查本[教程](http://www.vogella.com/articles/Logging/article.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-05T14:26:27.970

```
fileTxt = new FileHandler("c:/SimleTaskEvents.txt"); 
```

此行仅创建一个处理程序。

它不创建文件。您需要做的是，在目录“C:/”中**创建文件（SimleTaskEvents.txt） 。**之后，当你执行你的程序时，你放在这里的同一个程序，你会看到正在写入的日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:57:49.183

您需要添加这些导入：

```
import java.util.logging.Logger;
import java.util.logging.Level; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:18:12.273

我们像这样在我们的应用程序中使用记录器

```
import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Category;
import org.apache.log4j.PropertyConfigurator;

public class MyLogger {

public static Category appLog = Category.getInstance(MyLogger .class.getName() + ".APPLOG");

static {
    try{
        BasicConfigurator.configure();
        Properties properties = new Properties();
        properties.load("PropertyFileName");
        PropertyConfigurator.configure(properties);
        MyLogger.appLog.setAdditivity(false);
        MyLogger.appLog.info("This is application log");

    }catch(Exception e){
        e.printStacktrace();
    }
}   
} 
```

这是属性文件中的数据

```
#Logging configuration file.

log4j.rootCategory=DEBUG, DEFAULTAPPENDER

log4j.category.MyLogger.APPLOG=DEBUG, APPLOGAPPENDER
log4j.appender.APPLOGAPPENDER=org.apache.log4j.RollingFileAppender
log4j.appender.APPLOGAPPENDER.File=${catalina.home}/logs/applog.log
log4j.appender.APPLOGAPPENDER.MaxFileSize=5000KB
log4j.appender.APPLOGAPPENDER.MaxBackupIndex=20
log4j.appender.APPLOGAPPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.APPLOGAPPENDER.layout.ConversionPattern=%d - %m%n 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T22:02:22.373

也许[这就是](https://sites.google.com/site/ibrabel/sscce/logtofile)你需要的...

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 * LogToFile class
 * This class is intended to be use with the default logging class of java
 * It save the log in an XML file  and display a friendly message to the user
 * @author Ibrabel <ibrabel@gmail.com>
 */
public class LogToFile {

    protected static final Logger logger=Logger.getLogger("MYLOG");
    /**
     * log Method 
     * enable to log all exceptions to a file and display user message on demand
     * @param ex
     * @param level
     * @param msg 
     */
    public static void log(Exception ex, String level, String msg){

        FileHandler fh = null;
        try {
            fh = new FileHandler("log.xml",true);
            logger.addHandler(fh);
            switch (level) {
                case "severe":
                    logger.log(Level.SEVERE, msg, ex);
                    if(!msg.equals(""))
                        JOptionPane.showMessageDialog(null,msg,
                            "Error", JOptionPane.ERROR_MESSAGE);
                    break;
                case "warning":
                    logger.log(Level.WARNING, msg, ex);
                    if(!msg.equals(""))
                        JOptionPane.showMessageDialog(null,msg,
                            "Warning", JOptionPane.WARNING_MESSAGE);
                    break;
                case "info":
                    logger.log(Level.INFO, msg, ex);
                    if(!msg.equals(""))
                        JOptionPane.showMessageDialog(null,msg,
                            "Info", JOptionPane.INFORMATION_MESSAGE);
                    break;
                case "config":
                    logger.log(Level.CONFIG, msg, ex);
                    break;
                case "fine":
                    logger.log(Level.FINE, msg, ex);
                    break;
                case "finer":
                    logger.log(Level.FINER, msg, ex);
                    break;
                case "finest":
                    logger.log(Level.FINEST, msg, ex);
                    break;
                default:
                    logger.log(Level.CONFIG, msg, ex);
                    break;
            }
        } catch (IOException | SecurityException ex1) {
            logger.log(Level.SEVERE, null, ex1);
        } finally{
            if(fh!=null)fh.close();
        }
    }

    public static void main(String[] args) {

        /*
            Create simple frame for the example
        */
        JFrame myFrame = new JFrame();
        myFrame.setTitle("LogToFileExample");
        myFrame.setSize(300, 100);
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.setLocationRelativeTo(null);
        JPanel pan = new JPanel();
        JButton severe = new JButton("severe");
        pan.add(severe);
        JButton warning = new JButton("warning");
        pan.add(warning);
        JButton info = new JButton("info");
        pan.add(info);

        /*
            Create an exception on click to use the LogToFile class
        */
        severe.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent ae) {
                int j = 20, i = 0;
                try {
                    System.out.println(j/i);
                } catch (ArithmeticException ex) {
                    log(ex,"severe","You can't divide anything by zero");
                }

            }

        });

        warning.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent ae) {
                int j = 20, i = 0;
                try {
                    System.out.println(j/i);
                } catch (ArithmeticException ex) {
                    log(ex,"warning","You can't divide anything by zero");
                }

            }

        });

        info.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent ae) {
                int j = 20, i = 0;
                try {
                    System.out.println(j/i);
                } catch (ArithmeticException ex) {
                    log(ex,"info","You can't divide anything by zero");
                }

            }

        });

        /*
            Add the JPanel to the JFrame and set the JFrame visible
        */
        myFrame.setContentPane(pan);
        myFrame.setVisible(true);
    }
} 
```

# eclipse - 如何在不提交更改的情况下在 Eclipse 中切换分支

> ID：13970596
> 
> 赞同：5
> 
> 时间：2012-12-20T10:55:51.457
> 
> 标签：eclipse, git, branch, git-commit, git-checkout

我已经使用 GIT 几个星期了，并试图了解如何在不提交文件的情况下切换分支。这就是我所做的。

1.  克隆了一个 git 存储库并拥有一个本地 master 分支。
2.  创建了一个基于远程分支的新本地分支 (Branch2)。
3.  对 master 分支中的 2 个文件进行了更改。

我现在要做的是从master切换到Branch2。我对主分支所做的更改仅用于本地开发目的，永远不应提交。但是当我尝试在 Eclipse 中执行此操作时（即双击我尝试切换到的本地分支），它一直告诉我有未提交的更改，我需要提交、存储或重置。

谁能告诉我如何更改本地文件并让 git 忽略此更改，以便我不会收到此消息的提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:29:38.290

注意：如果您需要*从 Eclipse*存储正在进行的工作，Egit 现在[支持 stash](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.0#Stash_Support)：

![存储在 EGit 中](../Images/2dceb85d6c3e4dfcb3dad1b1db29cd79.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T11:22:08.473

看看 git stash。Stash 允许您存储未提交的更改。

选项1

```
git stash
git checkout -b Branch2 
```

您的更改将存储在 git（本地）中。当您想重新应用这些更改时，您会这样做`git stash pop`，它会为您应用这些更改。

选项 2

```
git stash
git stash branch temporarybranch 
```

这会将您未提交的更改带到一个新分支并为您保留它们。与前一个选项相比，这允许您通过推送这个新分支将这些分支保留在服务器上。

希望能帮助到你

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T11:03:30.627

如果您不希望将更改公开，您应该将它们提交到您自己的功能分支而不是主分支。
您可以创建一个新分支，给它起一个反映更改的名称，也许前缀带有“experimental-”之类的东西，然后在切换到另一个分支之前提交到该分支。

您可以使用 git stash 来存储您的更改，或者使用 git stash 将它们直接提交到 Ege Akpinar 提到的新分支。

# vb.net - VB.NET 中的多个选择案例

> ID：13970603
> 
> 赞同：13
> 
> 时间：2012-12-20T10:56:08.180
> 
> 标签：vb.net, visual-studio-2008, select-case

我尝试了以下方法：

```
Select Case Combo1.SelectedItem Or Combo2.SelectedItem 
```

但我得到了错误：

```
Conversion from String "string here" to type 'Long' is not valid 
```

是否可以有多个选择案例？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-20T11:00:57.697

您可以使用逗号分隔多个值：

```
Case Combo1.SelectedItem, Combo2.SelectedItem 
```

Using`Or`将使它成为一个表达式，在与`Select`.

如果您的值`Select`是一个`Long`值，那么您可能需要转换控件中的字符串：

```
Case CLng(Combo1.SelectedItem), CLng(Combo2.SelectedItem) 
```

要直接解决这个问题，在 select 中使用多个值作为测试表达式是不可能的：

```
Select Case v1, v2 'Not possible 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T16:35:22.330

嗨，谷歌搜索并看到这个问题没有答案。经过进一步研究，我发现这对我的目的有用。

基本上，你从以下开始：

选择案例真

那么每个case语句可以是两个变量的组合。当两者都满足时，情况为真，将执行适当的代码。

[https://forums.asp.net/t/611892.aspx?To+do+a+select+case+using+two+variables+or+parameters](https://forums.asp.net/t/611892.aspx?To+do+a+select+case+using+two+variables+or+parameters)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-05-08T10:06:11.083

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim i, j As Integer
    Dim value As Integer

    For i = 1 To 3
        For j = 1 To 5
            value = (GetCode(i, j))
            TextBox1.Text = TextBox1.Text & "i=" & i & "->j=" & j & "=" & value & vbCrLf
        Next
    Next
End Sub
Function GetCode(ByVal v1 As Integer, ByVal v2 As Integer) As Integer
    Dim retval As Integer
    Dim forselect As String
    forselect = v1 & v2
    Select Case forselect
        Case 11
            retval = 11
        Case 12
            retval = 12
        Case 13
            retval = 13
        Case 14
            retval = 14
        Case 15
            retval = 15
        Case 21
            retval = 21
        Case 22
            retval = 22
        Case 23
            retval = 23
        Case 24
            retval = 24
        Case 25
            retval = 25
        Case 31
            retval = 31
        Case 32
            retval = 32
        Case 3, 3
            retval = 33
        Case 34
            retval = 34
        Case 35
            retval = 35

    End Select

    Return retval
End Function 
```

# haskell - 在haskell中创建堆栈作为抽象数据类型

> ID：13970609
> 
> 赞同：1
> 
> 时间：2012-12-20T10:56:26.763
> 
> 标签：haskell

我需要在 haskell 中创建堆栈数据类型才能这样编写：

```
let a = emptyStack

push 10 a
//[10]

pop a 
[] 
```

我想推看起来像

```
push :: a -> Stack a -> Stack a
push a b = a:b 
```

但我有语法问题，究竟如何声明这个新数据类型，所以

```
let a = emptyStack 
:t a 
```

会显示堆栈

有关语法的任何提示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:19:15.593

让我们看看你的实现`push`。它使用运算符`:`. 您可以像这样找出该运算符的类型：

```
ghci> :t (:)
(:) :: a -> [a] -> [a] 
```

所以这个运算符接受一个`a`（表示任意类型）和一个`a`s 序列，并返回更新后的序列。所以你的类型`Stack`需要是一个序列。

```
type Stack a = [a] 
```

如果你然后像这样定义emptyStack：

```
emptyStack :: Stack a
emptyStack = [] 
```

你会得到你正在寻找的结果。

```
ghci> :t a
a :: Stack a 
```

有了这些帮助，我想您将能够弄清楚如何编写`pop`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T11:40:00.507

你可以写

```
import Data.Maybe

data Stack a = Stack [a] deriving Show

empty :: Stack a
empty = Stack []

push :: a -> Stack a -> Stack a
push x (Stack xs)= Stack (x:xs)

pop :: Stack a -> (Maybe a, Stack a)
pop (Stack []) = (Nothing, Stack [])
pop (Stack (x:xs)) = (Just x, Stack xs) 
```

例子

```
*Main> push 4 $ push 3 empty
Stack [4,3]
*Main> pop $ push 4 $ push 3 empty
(Just 4,Stack [3]) 
```

这种方法严格检查类型参数（与@mhwombat 解决方案相反）。一种或其他方法是有效的（在某些情况下，一种方法会比另一种更好，反之亦然）。

# unit-testing - 奇怪的 NHibernate Sqllite.InMemory 行为

> ID：13970613
> 
> 赞同：0
> 
> 时间：2012-12-20T10:56:36.190
> 
> 标签：unit-testing, nhibernate, fluent-nhibernate, visual-studio-2012

我正在尝试使用 Sqllite.InMemory 功能设置数据库单元测试。如果我运行单元测试，一切正常。如果我第二次运行相同的测试，我会得到一个 System.Data.SQLite.SQLiteException: no such table: Person

等待一段时间和/或（？）重新启动 Visual Studio 后，我可以再次运行单元测试。

配置或会话处理有问题吗？

```
public abstract class InMemoryDatabaseFixture : IDisposable
{
    private const string ConnectionString
        = "Data Source=:memory:;Version=3;New=True;Pooling=True;Max Pool Size=1;";

    private readonly ISessionFactory _sessionFactory;
    private readonly ISession _session;

    protected InMemoryDatabaseFixture()
    {
        var config = SQLiteConfiguration.Standard.InMemory().ShowSql().ConnectionString(ConnectionString);
        _sessionFactory = Fluently.Configure()
            .Database(config)
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<SessionContainer>())
            .ExposeConfiguration(cfg => new SchemaUpdate(cfg).Execute(true, true))
            .BuildSessionFactory();

        _session = _sessionFactory.OpenSession();

        SessionContainer = MockRepository.GenerateMock<ISessionContainer>();
        SessionContainer.Stub(sc => sc.SessionFactory).Return(_sessionFactory);
        SessionContainer.Stub(sc => sc.Session).Return(_session);
    }

    protected ISessionContainer SessionContainer { get; private set; }

    public void Dispose()
    {
        _sessionFactory.Dispose();
        _session.Dispose();
    }
} 
```

这里是基类的简单用法：

```
[TestFixture]
public class FinderFixture : InMemoryDatabaseFixture
{
    [Test]
    public void Test()
    {
        var finder = new Finder(SessionContainer);

        var result = finder.Find();

        Assert.That(result, Is.Not.Null);
    }
} 
```

* * *

**更新**：经过一些试验，这里终于是我的工作配置。在构建 SessionFactory 之后导出模式是很神奇的。

```
Configuration configuration = null;
_sessionFactory = Fluently.Configure()
    .Database(SQLiteConfiguration.Standard.InMemory().ShowSql())
    .ExposeConfiguration(cfg => configuration = cfg)
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<SessionContainer>())
    .BuildSessionFactory();

_session = _sessionFactory.OpenSession();
var export = new SchemaExport(configuration);
export.Execute(true, true, false, _session.Connection, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:57:35.300

您已请求启用 ADO.NET 提供程序中的连接池。即使在 NHibernate 关闭它之后，这也将保持底层连接处于活动状态。

在我自己的单元测试中，我只是（基于您的原始代码）：

```
_sessionFactory = Fluently.Configure()
        .Database(SQLiteConfiguration.Standard.InMemory())
        .Mappings(m => m.FluentMappings.AddFromAssemblyOf<SessionContainer>())
        .ExposeConfiguration(cfg => new SchemaUpdate(cfg).Execute(true, true))
        .BuildSessionFactory(); 
```

此外，由于会话是从会话工厂生成的，因此在处置会话工厂之前处置所有会话是谨慎的。

# vba - 从上一个标题中获取标题编号

> ID：13970614
> 
> 赞同：1
> 
> 时间：2012-12-20T10:56:37.410
> 
> 标签：vba, ms-word

这个由 Paul Beverley 编写的 Word 宏向文档添加注释并插入页码和行号。

```
Sub CommentAdd()
' Version 20.02.12
' Add a comment
' Ctrl-Alt-#
attrib1 = "PB: "
attrib2 = "PB: "

postText = ""
keepPaneOpen = False
addPageNum1 = True
addLineNum1 = True
addPageNum2 = True
addLineNum2 = True

highlightTheText = False
textHighlightColour = wdYellow
colourTheText = False
textColour = wdColorBlue

Set rng = Selection.Range
rng.Collapse wdCollapseEnd
rng.MoveEnd , 1
pageNum = rng.Information(wdActiveEndAdjustedPageNumber)  ' <<<<<----- This line
lineNum = rng.Information(wdFirstCharacterLineNumber)
If Selection.End <> Selection.Start Then
  If Right(Selection, 1) = Chr(32) Then Selection.MoveEnd wdCharacter, -1
  Set rng1 = Selection.Range
' Either highlight it ...
  myTrack = ActiveDocument.TrackRevisions
  ActiveDocument.TrackRevisions = False
  If highlightTheText = True Then Selection.Range.HighlightColorIndex _
       = textHighlightColour
' And/or change the text colour to red
  If colourTheText = True Then Selection.Font.Color = textColour
  ActiveDocument.TrackRevisions = myTrack
' Now add the comment
  Selection.Comments.Add Range:=Selection.Range
  If addPageNum1 = True Then attrib1 = attrib1 & "(p. " & _
       pageNum & ") "
  If addLineNum1 = True Then attrib1 = attrib1 & "(line " & _
       lineNum & ") "
  Selection.TypeText Text:=attrib1 & ChrW(8216) & ChrW(8217)
' Move back to between the close and open quotes
  Selection.MoveEnd wdCharacter, -1
' 'Paste' in a copy of the selected text
  Set rng2 = Selection.Range
  rng2.FormattedText = rng1.FormattedText
  rng2.Revisions.AcceptAll
  rng2.Start = rng2.End - 1
  If rng2.Text = Chr(13) Then rng2.Delete
' Move back past the close quote
  rng2.Start = rng2.End + 1
  If postText > "" Then
    rng2.InsertAfter Text:=postText
  Else
    rng2.InsertAfter Text:=" " & ChrW(8211) & " "
  End If
If keepPaneOpen = False Then ActiveWindow.ActivePane.Close
Else
  cmntText = attrib2
  If addPageNum2 = True Then cmntText = cmntText & _     ' <<<<<----- And this I guess
       "(p. " & pageNum & ") "
  If addLineNum2 = True Then cmntText = cmntText & _
       "(line " & lineNum & ") "
  Selection.MoveEnd , 1
  Selection.Comments.Add Range:=Selection.Range, Text:=cmntText
End If
End Sub 
```

我一直在尝试（在 Word 的 VB 编辑器中）调整突出显示的行（这里后面是 '<<<<----- 这一行'）以让宏获取并写入前一个标题的编号而不是页面数字。这个想法是，如果用户选择一个字符串，宏会在它上面查找最接近的标题级别（h1、h2、h3 等）并写入它的编号。

例子：

1 这是header1 > 如果选中的字符串恰好在这个header下，那么写“1”

1.2 这是header2 > 如果选中的字符串恰好在这个header下，那么写“1.2”

1.2.1 这是header3 > 如果选中的字符串恰好在这个header下，那么写“1.2.1”

到目前为止，我已经尝试了这两个选项来替换粗体线，但无济于事（我已将“pageNum”重命名为“headerNum”）：

```
' Option 1
headerNum = ActiveDocument.Styles("Heading")

' Option 2
headerNum = Selection.range = Styles("Heading") 
```

我究竟做错了什么？

任何帮助将不胜感激！！！

# asp.net - 在 c# / .net 4 中打开 FileTable 文件

> ID：13970617
> 
> 赞同：3
> 
> 时间：2012-12-20T10:56:44.143
> 
> 标签：asp.net, c#-4.0, sql-server-2012, filetable

我有一个包含许多不同文档类型（.doc；.pdf；.xls 等）的 Filetable。

我正在编写一个小型网络（C#/.net 4）搜索应用程序。使用带有文件表的全文索引来查找内容的搜索效果很好。

但是我正在努力在我的应用程序中找到一种将搜索结果作为可以启动相关文档的链接的方法？并且只处理不同的文件类型？（假设客户端安装了 Word/adobe/excel 等）

感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:32:52.220

您将需要编写一个自定义页面处理程序以使用正确的 HTTP 标头将字节流式传输到客户端。您将需要决定是支持内联查看（*在浏览器中打开 -`Content-Disposition: inline`*）还是使用附件进行外部查看（*例如`Content-Disposition: attachment`*）。

```
Response.AddHeader("Content-Disposition", "attachment; filename=example.pdf"); 
```

如果您使用的是 ASP.NET MVC - 您可以利用[`FileResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.fileresult%28v=vs.108%29.aspx)来简化此过程，但创建自己的处理程序不会有太大不同。

```
public FileResult Download()
{
    byte[] fileBytes = ...; // from FileTable
    string fileName = "example.txt";
    return File(fileBytes, System.Net.Mime.MediaTypeNames.Application.Octet, fileName);
} 
```

处理各种 MIME 类型（PDF、DOC、XLS）的最佳方法是静态定义支持的文件类型或动态[读取 IIS](https://stackoverflow.com/a/1192588/175679)并分配适当的`Content-Type`HTTP 标头。

```
Response.ContentType = "application/pdf"; 
```

# eclipse - Java 7 中的 EMMA [MAIN_METHOD_NOT_FOUND]

> ID：13970620
> 
> 赞同：3
> 
> 时间：2012-12-20T10:56:51.117
> 
> 标签：eclipse, code-coverage, java-7, emma

我已切换到最新的 JDK 7，但我遇到了使用 ant 运行 emma 代码覆盖率的问题。它抛出以下错误：

```
emma:
 [emmajava] EMMA: no coverage data collected at runtime [all reports will be empty]
 [emmajava] [EMMA v2.0, build 5312]
 [emmajava] emmarun: [MAIN_METHOD_NOT_FOUND] application class does not have a runnable public main() method
 [emmajava] Exception in thread "main" com.vladium.emma.EMMARuntimeException: [MAIN_METHOD_NOT_FOUND] application class does not have a runnable public main() method
 [emmajava]     at com.vladium.emma.rt.AppRunner._run(AppRunner.java:497)
 [emmajava]     at com.vladium.emma.rt.AppRunner.run(AppRunner.java:97)
 [emmajava]     at com.vladium.emma.runCommand.run(runCommand.java:247)
 [emmajava]     at emmarun.main(emmarun.java:27)
 [emmajava] Caused by: java.lang.ClassFormatError: Illegal local variable table length 5 in method <init>()V
 [emmajava]     at java.lang.Class.getDeclaredMethods0(Native Method)
 [emmajava]     at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
 [emmajava]     at java.lang.Class.getMethod0(Unknown Source)
 [emmajava]     at java.lang.Class.getMethod(Unknown Source)
 [emmajava]     at com.vladium.emma.rt.AppRunner._run(AppRunner.java:493)
 [emmajava]     ... 3 more 
```

我已阅读[有关解决此错误的问题的问题](https://stackoverflow.com/questions/7010665/testng-emma-cobertura-coverage-and-jdk-7-result-in-classformaterror-and-verif)。但由于以下错误，我无法更新 emma 插件。

```
No repository found at http://download.eclipselab.org/eclemma/beta/2.0.0/update/.
No repository found at http://download.eclipselab.org/eclemma/beta/2.0.0/update/. 
```

如何解决此错误？

如何在 JDK 1.7 中运行 emma 代码覆盖率？

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:58:06.133

在里面添加以下内容`<emmajava>`可以解决问题：

```
<jvmarg value="-XX:-UseSplitVerifier"/> 
```

# php - 使用 preg_match 格式化 git-log

> ID：13970621
> 
> 赞同：0
> 
> 时间：2012-12-20T10:56:54.617
> 
> 标签：php, regex, preg-match, git-log

我想以一种方便的方式格式化 git-log 匹配。git-log 命令的输出如下：

```
commit 11ae9c97409fb349e2bfa50ed65bd23ec6dbca70
Author: Fabien Potencier <fabien.potencier@gmail.com>
Date:   Wed Jul 11 19:51:30 2012 +0200

    updated VERSION for 2.0.16

commit 6e14d67cb23439d6700f494e29e809811edeeade
Author: Fabien Potencier <fabien.potencier@gmail.com>
Date:   Wed Jul 11 19:50:55 2012 +0200

    update CONTRIBUTORS for 2.0.16

commit 0341492ed566fca8df556573b9664f691c5dff3d
Author: Fabien Potencier <fabien.potencier@gmail.com>
Date:   Wed Jul 11 19:48:12 2012 +0200

    updated CHANGELOG for 2.0.16

commit b18f6f557b5db1e2e6d2c2c0494e0564b91f438d
Author: Fabien Potencier <fabien.potencier@gmail.com>
Date:   Tue Jul 10 15:28:02 2012 +0200

    [Console] fixed wrong phpdoc (closes #4394) 
```

我想格式化如下：

```
Fabien Potencier, Wed Jul 11 19:51:30 2012 +0200

    updated VERSION for 2.0.16

Fabien Potencier, Wed Jul 11 19:50:55 2012 +0200

    update CONTRIBUTORS for 2.0.16

Fabien Potencier, Wed Jul 11 19:48:12 2012 +0200

    updated CHANGELOG for 2.0.16

Fabien Potencier, Tue Jul 10 15:28:02 2012 +0200

    [Console] fixed wrong phpdoc (closes #4394) 
```

为此，我编写了一个 PHP 脚本，如下所示。

```
<?php

$r = shell_exec('git log');

$p = '/commit (.{2})(.{4})(.{6})/';// THIS SHOULD CHANGE!

preg_match_all($p, $r, $match);

unset($match[0]);

$output = array();

foreach($match as $k1=> $v1)

    foreach($v1 as $k2=>$v2)

          @$output[$k2] .= $v2 . ($k1==1 ? ',' : PHP_EOL);

echo implode('', $output); 
```

我对我应该在这里使用的模式没有任何想法。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:08:34.743

这些方面的东西应该可以解决问题：

```
/Author:\s*(?<name>.+)\s+Date:\s*(?<date>.+)\s+(?<message>(?:(?!commit .{40}).)+)/i 
```

三个反向引用集，一个用于您想要的每组数据。

`$match`如果您需要帮助了解保存的数据，请打印-array。

演示+说明：[http ://regex101.com/r/cA0lD3](http://regex101.com/r/cA0lD3)

# sql-server - 如何在 SQL Server 中为多对多关系建模？

> ID：13970628
> 
> 赞同：5
> 
> 时间：2012-12-20T10:57:22.990
> 
> 标签：sql-server, tsql

我需要在 SQL Server 数据库中引入两个表之间的多对多关系，这两个表都有一个整数作为主键。这在 T-SQL 中如何最好地完成？

考虑以下两个应该存在多对多关系的示例表定义：

```
CREATE TABLE [dbo].[Authors] (
    [Id]        INT            IDENTITY (1, 1) NOT NULL,
    CONSTRAINT [PK_Versions] PRIMARY KEY CLUSTERED ([Id] ASC)
);

CREATE TABLE [dbo].[Books] (
    [Id]      INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T11:00:12.690

传统的方法是使用一个附加的`many:many`（联结）表，它链接到两个表：

```
CREATE TABLE [dbo].[AuthorsBooks] (
    -- Optionally, we can give the table its own surrogate PK
    [Id]      INT IDENTITY(1,1) NOT NULL,
    AuthorId INT NOT NULL,
    BookId INT NOT NULL,

    -- Referential Integrity
    FOREIGN KEY(AuthorId) REFERENCES Authors(Id),
    FOREIGN KEY(BookId) REFERENCES Books(Id),

    -- PK is either the surrogate ...
    PRIMARY KEY CLUSTERED ([Id] ASC)
    -- ... Or the compound key
    -- PRIMARY KEY CLUSTERED (AuthorId, BookId)
); 
```

一个有争议的问题是您是否希望复合键`AuthorId, BookId`成为主键，或者是否添加您自己的新代理 - 这通常是一种主观偏好。

要考虑是否为联结表选择复合主键或新代理键的一些要点：

*   如果没有代理项，链接到联结表的外部表将需要存储两个复合键（即需要同时保留`AuthorId`和`BookId`作为外键）。
*   所以一个新的代理提供了一个更窄的主键的潜在好处，这意味着任何链接到这个联结表的表都将有一个单一的、更窄的外键。
*   但是，使用复合键，可以有一个优化好处，即表可以直接连接到底层`Books`或`Authors`表，而无需先连接到连接表。

下图希望使复合键的情况更清楚（中间表`Nationality`是 的联结表`PersonCountry`）：

[![复合外键](../Images/d8af31446976cdaa7832e5d18391695b.png)](https://i.stack.imgur.com/UjY0p.png)

**编辑**

用法很简单——如果链接存在于 many:many 表中，则认为关系存在。要测试是否存在，您可以通过链接表“加入”，例如

```
-- Find all books written by AuthorId 1234
SELECT b.* 
  FROM Books b 
  INNER JOIN AuthorsBooks ab
     ON b.Id = ab.BookId
  WHERE ab.AuthorId = 1234; 
```

# sql - sql中的单列

> ID：13970639
> 
> 赞同：-1
> 
> 时间：2012-12-20T10:57:46.987
> 
> 标签：sql, mysqli

有人可以告诉我如何使用 sql 命令在数据库中仅显示单个列值。

假设我有一个表说员工有字段 NAME，ROLL NO。

我只想从 ROLL NO 列中获取值的输出。我不想将它与任何标准匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:59:14.983

这很简单，这样做

```
select rollno from employee 
```

这将为您获取表中的所有rollno

编辑：

```
select rollno from employee limit(5,1) 
```

或者

```
select top 5 rollno from employee 
```

这只会给你前五行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:59:18.690

只是一个这样的请求：

```
select ROLLNO from emplyee 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:01:11.977

你可以简单地使用

```
 SELECT <column name> FROM <table name>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:01:18.093

如果表名是emplyee，则使用它

```
 select rollno from emplyee 
```

或者

```
 select rollno from emplyee where rollno is not null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T11:05:14.043

从表中选择列名

[有关 mysql 语法的更多信息](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-21T11:45:07.473

将您想要作为输出的逗号分隔列名放在`select`关键字之后。由于您只想检索`rollno`列，请使用以下命令：

```
select rollno from employee; 
```

对于多于一列，如上所述使用逗号分隔的列名。例如：

```
select name, rollno from employee; 
```

# c# - 计算日期期间所涵盖的包含日期的数量

> ID：13970641
> 
> 赞同：6
> 
> 时间：2012-12-20T10:57:49.963
> 
> 标签：c#, date, datetime

我正在计算**两个**`DateTimes`.

这不是 `.TotalDays`因为少于 24 小时的时段仍可能通过重叠两个不同的日子返回“2”。同样，相隔几分钟的两个日期仍应返回“1”。

例如：

```
2012-2-1 14:00 to 2012-2-2 23:00 -> 2 (1st and 2nd Feb)
2012-2-1 14:00 to 2012-2-2 10:00 -> 2 (1st and 2nd Feb)
2012-2-1 23:00 to 2012-2-2 00:00 -> 2 (1st and 2nd Feb)
2012-2-1 23:00 to 2012-2-3 00:00 -> 3 (1st, 2nd, 3rd Feb)
2012-2-1 14:00 to 2012-2-1 15:00 -> 1 (1st Feb)
2012-2-1 14:00 to 2012-2-1 14:00 -> 1 (1st Feb)
2012-1-1 00:00 to 2012-12-31 23:59 -> 366 (All of 2012) 
```

我可以使用以下代码获得此功能：

```
DateTime dt1 = new DateTime(2000,1,2,12,00,00);
DateTime dt2 = new DateTime(2000,1,3,03,00,00);

int count = 0;
for (DateTime date = dt1; date.Date <= dt2.Date; date = date.AddDays(1))
    count++;

return count; 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T11:02:07.390

为什么不只是：

```
int count = dt1.Date.Subtract(dt2.Date).Duration().Days + 1; 
```

使用`.Date`将日期标准化为午夜 (0:00)，将 1 添加到`Days`以获取不同日期的数量，而不仅仅是中间的天数。

使用`Duration`可确保您始终得到肯定的答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T11:05:47.150

也许只是简单

```
TimeSpan duration = dt2.Date - dt1.Date;
int days = duration.Days + 1; 
```

[**演示**](http://ideone.com/JoUD1U)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:02:37.833

```
DateTime d1=DateTime.MinValue;
DateTime d2=DateTime.MaxValue;
TimeSpan span=d2-d1;
int counter = span.Days + 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:16:29.863

Math.Ceiling((d2 - d1.Date).TotalDays)

尝试了您提到的所有案例。结果是预期的！希望能帮助到你。

# php - Magento：未发货的物品集合

> ID：13970642
> 
> 赞同：1
> 
> 时间：2012-12-20T10:57:54.720
> 
> 标签：php, mysql, magento

我想获取给定订单尚未发货的所有物品。

假设我有一个部分发货的订单，我想检索所有待发货的物品。

就像是：

```
$collection = Mage::getModel('...')->getCollection()
                     ->Add...() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:16:37.657

要获取订单的所有商品，请使用商品集合：

```
 $order = Mage::getModel('sales/order')->load($orderId);
    $orderItems = $order->getItemsCollection(); 
```

然后使用发货模型获取订单的所有商品：

```
 $shippedItems = Mage::getModel('sales/order_shipment')
    ->setOrder($order)->getItemsCollection(); 
```

Edit2：事实证明，在货件上设置订单并不能收集物品，因为一个订单可以有多个货件。请改用下面提供的代码片段。

编辑：我忘记了可能有几批货物，所以这里是获取订单项目的所有 ID 和已发货项目的所有 ID 的完整工作代码：

```
$orderId = 15;
$order = Mage::getModel('sales/order')->load($orderId);
$orderItems = $order->getItemsCollection();
$allOrderItemIds = $orderItems->getAllIds();
$shipments = $order->getShipmentsCollection();
$shippedItemIds = array();
foreach ($shipments as $shipment) {
        $shippedItems = $shipment->getItemsCollection();
        foreach ($shippedItems as $item) {
                $shippedItemIds[] = $item->getOrderItemId();
        }
}
var_dump($allOrderItemIds);
var_dump($shippedItemIds); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:23:57.210

```
$orderId = 382;

$order = Mage::getModel('sales/order')->load($orderId);
// OR if you load the order with increment id ...
// $order = Mage::getModel('sales/order')->loadByIncrementId($orderId); 
$orderItems = $order->getItemsCollection();

foreach ($orderItems as $item) {

    $qtyToBeShipped = $item->getQtyOrdered() - $item->getQtyShipped();

    if ($qtyToBeShipped)
        echo $item->getId() . ' - ' . $qtyToBeShipped . '</br>';
} 
```

# c# - 如何在 Win RT 的 page.xaml.cs 上执行 matrix.scale

> ID：13970649
> 
> 赞同：1
> 
> 时间：2012-12-20T10:58:08.440
> 
> 标签：c#, matrix, winrt-xaml

我想在 page.xaml.cs 上执行 Matrix.Scale() 但该方法不存在。使用了不同类型的矩阵。我想使用[http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.matrix.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.matrix.aspx)中描述的矩阵。我是 C# 的新手。如何使用链接中的矩阵来执行我的转换和缩放。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:47:31.887

我查看了您的链接并读到 Windows RT 没有写在受支持的平台中。

xaml 也有一个矩阵类，但我不认为它带有缩放方法。

[http://msdn.microsoft.com/de-de/library/windows/apps/windows.ui.xaml.media.matrix?cs-save-lang=1&cs-lang=csharp#code-snippet-1](http://msdn.microsoft.com/de-de/library/windows/apps/windows.ui.xaml.media.matrix?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

# android - 拍照Android后活动不关闭

> ID：13970662
> 
> 赞同：1
> 
> 时间：2012-12-20T10:59:01.773
> 
> 标签：android

嗨，我使用了 SurfaceView 并通过以下代码拍照

首先我通过这段代码开始活动

```
 startActivityForResult(new Intent(PictureEditor.this, CustomCamera.class), CAMERA_REQUEST3); 
```

然后从此代码中获取结果

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_REQUEST3) {
            BitmapFactory.Options abc = new BitmapFactory.Options();
            abc.inJustDecodeBounds = true;
            BitmapFactory.decodeFile((Environment.getExternalStorageDirectory() + File.separator + "tester.png"), abc);
            abc.inSampleSize = calculateInSampleSize(abc, w, h) + 1;
            abc.inJustDecodeBounds = false;
            view.setBackBitmap(BitmapFactory.decodeFile((Environment.getExternalStorageDirectory() + File.separator + "tester.png"), abc));

        } 
```

现在CustomeCamera 类的代码如下

```
 // / Handles when mTakePicture is clicked
private OnClickListener mTakePictureAction = new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (mCamera != null)
            mCamera.takePicture(CustomCamera.this);

    }
}; 
```

然后

```
 @Override
    public void takePicture(Activity activity) {
        if (mCamera != null)
            mCamera.takePicture(shutterCallback, rawCallback, jpegCallback);
        Intent returnIntent = new Intent();
        activity.setResult(mActivity.RESULT_OK, returnIntent);
        activity.finish();
    } 
```

问题是图像被捕获但活动没有完成！任何人都可以建议我该怎么做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:06:17.673

您需要在此活动开始的上一个活动中的 onActivityResult() 中编写完成活动的代码。

这样你之前的活动就结束了。. .

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode)
    {
         case YOUR_REQUEST_CODE:
                               finish();
    }
} 
```

**编辑 ：**

首先更改此代码。

```
Intent returnIntent = new Intent();
activity.setResult(Activity.RESULT_OK, returnIntent);
activity.finish(); 
```

然后在 onActivityResult() 中首先检查请求代码条件，然后在请求代码条件中检查结果代码条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:16:01.480

我有一种强烈的感觉，主（UI）线程在

```
 @Override
public void takePicture(Activity activity) {
    if (mCamera != null)
        mCamera.takePicture(shutterCallback, rawCallback, jpegCallback);
    Intent returnIntent = new Intent();
    activity.setResult(mActivity.RESULT_OK, returnIntent);
    activity.finish();
} 
```

我不太确定它卡在哪里（来自上面的代码示例），可能性

1）图片无法保存

2）图片无法编码

等等

您可以通过运行调试器来测试它

# mysql - mysql 显示来自每五个表的两个属性

> ID：13970667
> 
> 赞同：0
> 
> 时间：2012-12-20T10:59:11.103
> 
> 标签：mysql, select, join

我在**电信管理**主题中有 5 个表格：

1.  客户（`custID`、`cFname`、`contractID`等）

2.  合同 ( `contractID`, `Duration`, `productCode`)

3.  计划 ( `productCode`, `planType`, `price`)

4.  计费 ( `billNo`, `custID`, `productCode`, `status`(例如; `pending`/ `settle`))

5.  产品 ( `productCode`, `productName`, `productDescription`)

此查询是要查找合约 5 个月且使用 WirelessInternet 计划的客户**ID**和**客户名称**，每月只需 RM59。它还需要显示来自客户的未决计费状态。请**从每五个表中显示 2 个属性。**

请帮我。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:05:21.440

希望对你有帮助，

```
 select custID,cFname from Customer cust,Contract cont,plan p,billing b 
    where cust.contractID=cont.contractID 
    and cont.Duration='5 Months' and p.planType='RM59/month'
    cust.custID=b.custID and b.status='pending' 
```

# c - 没有“-std=c99”的巨大 fprintf 速度差异

> ID：13970675
> 
> 赞同：19
> 
> 时间：2012-12-20T10:59:33.403
> 
> 标签：c, performance, locking, stdio, mingw32

几个星期以来，我一直在与我写的一个表现不佳的翻译作斗争。在以下简单的基准上

```
#include<stdio.h>

int main()
{
    int x;
    char buf[2048];
    FILE *test = fopen("test.out", "wb");
    setvbuf(test, buf, _IOFBF, sizeof buf);
    for(x=0;x<1024*1024; x++)
        fprintf(test, "%04d", x);
    fclose(test);
    return 0
} 
```

我们看到以下结果

```
bash-3.1$ gcc -O2 -static test.c -o test
bash-3.1$ time ./test

real    0m0.334s
user    0m0.015s
sys     0m0.016s 
```

如您所见，在添加“-std=c99”标志的那一刻，性能崩溃了：

```
bash-3.1$ gcc -O2 -static -std=c99 test.c -o test
bash-3.1$ time ./test

real    0m2.477s
user    0m0.015s
sys     0m0.000s 
```

我使用的编译器是 gcc 4.6.2 mingw32。

生成的文件大约是 12M，所以这两者之间的差异约为 21MB/s。

运行`diff`显示生成的文件是相同的。

我认为这与文件锁定`fprintf`有关，该程序大量使用其中的文件，但我无法找到在 C99 版本中将其关闭的方法。

我尝试`flockfile`了我在程序开头使用的流，并`funlockfile`在最后使用了相应的流，但是遇到了关于隐式声明的编译器错误，以及声称对这些函数的未定义引用的链接器错误。

这个问题是否还有其他解释，更重要的是，有没有办法在 Windows 上使用 C99 而无需付出如此巨大的性能代价？

* * *

编辑：

查看这些选项生成的代码后，看起来在慢版本中，mingw 坚持以下内容：

```
_fprintf:
LFB0:
    .cfi_startproc
    subl    $28, %esp
    .cfi_def_cfa_offset 32
    leal    40(%esp), %eax
    movl    %eax, 8(%esp)
    movl    36(%esp), %eax
    movl    %eax, 4(%esp)
    movl    32(%esp), %eax
    movl    %eax, (%esp)
    call    ___mingw_vfprintf
    addl    $28, %esp
    .cfi_def_cfa_offset 4
    ret
    .cfi_endproc 
```

在快速版本中，这根本不存在；否则，两者完全相同。我认为`__mingw_vfprintf`这似乎是这里的慢动作，但我不知道它需要模仿什么行为使它如此缓慢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T14:07:21.027

在对源代码进行了一些挖掘之后，我发现了为什么 MinGW 功能如此之慢：

`[v,f,s]printf`在MinGW的 a 开头，有一段看起来很无辜的初始化代码：

```
__pformat_t stream = {
    dest,                   /* output goes to here        */
    flags &= PFORMAT_TO_FILE | PFORMAT_NOLIMIT, /* only these valid initially */
    PFORMAT_IGNORE,             /* no field width yet         */
    PFORMAT_IGNORE,             /* nor any precision spec     */
    PFORMAT_RPINIT,             /* radix point uninitialised  */
    (wchar_t)(0),               /* leave it unspecified       */
    0,                          /* zero output char count     */
    max,                        /* establish output limit     */
    PFORMAT_MINEXP          /* exponent chars preferred   */
}; 
```

然而，`PFORMAT_MINEXP`看起来并不是这样：

```
#ifdef _WIN32
# define PFORMAT_MINEXP    __pformat_exponent_digits() 
# ifndef _TWO_DIGIT_EXPONENT
#  define _get_output_format()  0 
#  define _TWO_DIGIT_EXPONENT   1
# endif
static __inline__ __attribute__((__always_inline__))
int __pformat_exponent_digits( void )
{
  char *exponent_digits = getenv( "PRINTF_EXPONENT_DIGITS" );
  return ((exponent_digits != NULL) && ((unsigned)(*exponent_digits - '0') < 3))
    || (_get_output_format() & _TWO_DIGIT_EXPONENT)
    ? 2
    : 3
    ;
} 
```

每次我想打印时都会调用它，并且`getenv`在 Windows 上一定不能很快。用 a 替换该定义`2`会使运行时回到应有的位置。

* * *

因此，答案归结为：当使用`-std=c99`或任何符合 ANSI 的模式时，MinGW 会使用自己的 CRT 运行时进行切换。通常，这不会是一个问题，但 MinGW 库有一个错误，它减慢了它的格式化功能，远远超出了任何想象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T11:28:18.950

使用`-std=c99`禁用所有 GNU 扩展。

使用 GNU 扩展和优化，您`fprintf(test, "B")`可能会被替换为`fputc('B', test)`

**请注意**，此答案已过时，请参阅[https://stackoverflow.com/a/13973562/611560](https://stackoverflow.com/a/13973562/611560)和[https://stackoverflow.com/a/13973933/611560](https://stackoverflow.com/a/13973933/611560)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:31:38.820

在对您的汇编程序进行一些考虑之后，看起来慢速版本正在使用`*printf()`MinGW 的实现，毫无疑问是基于 GCC 的，而快速版本正在使用来自`msvcrt.dll`.

现在，MS 明显缺乏 GCC 实现的许多功能。其中一些是 GNU 扩展，而另一些则是为了符合 C99。并且由于您正在使用`-std=c99`您正在请求一致性。

但是为什么这么慢？嗯，一个因素是简单，MS 版本要简单得多，因此预计它会运行得更快，即使在微不足道的情况下也是如此。另一个因素是您在 Windows 下运行，因此预计 MS 版本比从 Unix 世界复制的版本更有效。

它是否解释了 x10 的因子？可能不是...

您可以尝试的另一件事：

*   替换`fprintf()`为`sprintf()`, 打印到内存缓冲区而不接触文件。然后你可以尝试`fwrite()`不*使用 printfing*。这样您就可以猜测丢失是在数据格式中还是在写入`FILE`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T13:46:22.453

从 MinGW32 3.15 开始，`printf`可以使用兼容的函数来代替 Microsoft C 运行时 (CRT) 中的函数。在严格的 ANSI、POSIX 和/或 C99 模式下编译时使用新`printf`函数。

有关更多信息，请参阅[mingw32 更改日志](http://sourceforge.net/project/shownotes.php?release_id=24832)

您可以使用`__msvcrt_fprintf()`快速*（*不兼容）功能。

# javascript - 在 monocle js 库中，想要在单个 iframe 中加载 HTML 页面

> ID：13970682
> 
> 赞同：0
> 
> 时间：2012-12-20T10:59:56.000
> 
> 标签：javascript, width, device

目前我在我的项目中使用 Monocle javascript 库。monocle 库将在 iframe 中加载 HTML 文件。它使用设备宽度和高度来裁剪 HTML 内容并根据这些测量值创建页面。我需要禁用此属性。我想在单个 iframe 中显示单个 HTML 文件。也就是说，它应该与 epub 文件中的相同。非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T09:14:53.350

您可以使用[http://sourceforge.net/projects/oplsepublibrary/](http://sourceforge.net/projects/oplsepublibrary/) php epub reader 将 epub 的内容写入页面

# module - 故事板/模块

> ID：13970685
> 
> 赞同：0
> 
> 时间：2012-12-20T11:00:02.250
> 
> 标签：module, storyboard, coronasdk

我做了一个“小行星”副本，效果很好！我用不同的模块（敌人、控件和背景）制作了它。现在我也做了一个起始画面，玩家可以在里面选择玩游戏，查看高分等。

问题是我不知道如何将它实现到故事板中。我可能误解了模块的使用。

我从 Scene1 开始，这是开始游戏的介绍 + 按钮。接下来，我想移动到场景 2（当玩家按下开始按钮时），这似乎没问题，场景 1 被清除。但是当我死了，我想再次移动到场景1。问题是一些听众没有被移除，并且在场景切换后不久游戏就崩溃了。我想主要的问题是，在我的场景 2 中，我在我的场景中放入了 require("background")、敌人和控件，我不知道在应该清除它们时如何删除它们。

我已经输入了所有模块并将它们放在在退出场景中被清除的同一组中，但并非所有内容都被删除。

你认为我会如何解决这个最简单的方法？我对 Corona 很陌生，仍处于早期学习阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:18:01.890

显示对象，如在 createScene() 函数中创建并添加到“组”显示组的 display.newImageRect() 和 display.newText() 将在清除场景时自动删除。

任何具有 onComplete 处理程序的计时器、转换或 audio.plays，以及附加到运行时的网络请求和任何事件处理程序都必须手动删除。如果您正在创建的各种对象正在执行这些操作，则它们的删除功能应该撤消这些操作，以便删除它们将清理它们。

我发现最好在 enterScene() 中添加运行时处理程序、计时器等，并确保在 exitScene() 中撤消它们。然后，如果它在 createScene() 中完成，则应在 destoryScene() 中进行清理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T12:33:10.260

不推荐使用模块开始。

其次，将内容放入其他文件并使用“require”调用它们应该用于调用库，而不是将运行的代码。“require”不是dofile，也不是eval，它会运行一次，而且只运行一次（当文件的第一个“require”产生时）。

如果你仍然想把东西放在其他文件中，比如加载你的背景，你需要做一个“background.lua”文件，它有一个“background.load()”函数和一个“background.unload()”函数，并且在适当的地方打电话给他们。

# python - 使用 selenium 运行 django-test 时出现断管错误

> ID：13970694
> 
> 赞同：9
> 
> 时间：2012-12-20T11:00:36.610
> 
> 标签：python, django, testing, selenium, django-testing

在使用 selenium（没有远程，没有 xvfb）运行 django 测试时，我总是得到以下异常：

```
Creating test database for alias 'default'...

Traceback (most recent call last):
File "/usr/lib/python2.7/wsgiref/handlers.py", line 86, in run
self.finish_response()
File "/usr/lib/python2.7/wsgiref/handlers.py", line 127, in finish_response
self.write(data)
File "/usr/lib/python2.7/wsgiref/handlers.py", line 210, in write
self.send_headers()
File "/usr/lib/python2.7/wsgiref/handlers.py", line 268, in send_headers
self.send_preamble()
File "/usr/lib/python2.7/wsgiref/handlers.py", line 192, in send_preamble
'Date: %s\r\n' % format_date_time(time.time())
File "/usr/lib/python2.7/socket.py", line 324, in write
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 44089)
self.flush()
File "/usr/lib/python2.7/socket.py", line 303, in flush
self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/django/test/testcases.py", line 981, in _handle_request_noblock
self.process_request(request, client_address)
File "/usr/lib/python2.7/SocketServer.py", line 310, in process_request
self.finish_request(request, client_address)
File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
self.RequestHandlerClass(request, client_address, self)
File "/usr/local/lib/python2.7/dist-packages/django/core/servers/basehttp.py", line 139, in __init__
----------------------------------------
super(WSGIRequestHandler, self).__init__(*args, **kwargs)
File "/usr/lib/python2.7/SocketServer.py", line 640, in __init__
self.finish()
File "/usr/lib/python2.7/SocketServer.py", line 693, in finish
self.wfile.flush()
File "/usr/lib/python2.7/socket.py", line 303, in flush
self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe

Destroying test database for alias 'default'...

Process finished with exit code 0 
```

使用 django 1.4 和 selenium python-bindings 2.28.0 和 Firefox WebDriver 使用 LiveServerTestCase 运行测试。有人对如何解决它有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:35:24.603

确保请求页面的浏览器正在等待响应。

如果我没记错的话，有`selenium_client.implicitly_wait(sec)`and`selenium_client.set_page_load_timeout(sec)`命令，请确保您正在使用它。

如果不是，服务器将尝试写入已损坏的管道，因为浏览器在发送响应之前关闭了连接。

# backbone.js - Backbone.js 强制登录路由

> ID：13970699
> 
> 赞同：4
> 
> 时间：2012-12-20T11:00:48.170
> 
> 标签：backbone.js, routes

我正在开发一个我的用户需要登录的应用程序，从这个意义上说，登录略有不同，因为用户没有按说注册。他们输入他们的名字和房间名称，然后他们连接。房间本身包含用户所需的所有设置，例如；

*   房间名称
*   查看设置 - 允许打开或关闭选项
*   ETC...

所以我想做的是连接到路由事件，所以`/login`如果用户没有登录，我可以强制用户转到根目录。

当然必须有一种 DRY 方式来做到这一点，而无需为每条路线添加条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-30T20:18:46.903

[Backbone 的路由器](http://backbonejs.org/#Router)有一个`execute`可以覆盖的方法。每次匹配路由时都会调用它，在调用回调之前：

```
var Router = Backbone.Router.extend({
  execute: function(callback, args) {
    // Do what you want here! 
    if (callback) callback.apply(this, args);
  }
}); 
```

该方法是在 2014 年 2 月 13 日的 1.1.1 版本中添加的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:59:42.957

我想到的唯一选择是覆盖当前的`Router.route`-function，目前它看起来像[这样](http://backbonejs.org/docs/backbone.html#section-124)：

```
route: function(route, name, callback) {
  if (!_.isRegExp(route)) route = this._routeToRegExp(route);
  if (!callback) callback = this[name]; // this is of interest
  Backbone.history.route(route, _.bind(function(fragment) {
    var args = this._extractParameters(route, fragment);
    callback && callback.apply(this, args);
    this.trigger.apply(this, ['route:' + name].concat(args));
    Backbone.history.trigger('route', this, name, args);
  }, this));
  return this;
}, 
```

您要做的是用一个函数包装每个回调，该函数检查是否满足您想要的条件，然后调用 wrappee 或重新路由以登录。Underscore 的[`wrap`-function](http://underscorejs.org/#wrap)在这里很有用。

```
route: function(route, name, callback) {
  ... // same as above
  if (!callback) callback = this[name];
  _.wrap(callback, function(cb) {
    if (userIsLoggedIn()) {
      cb();
    } else {
      this.navigate("url/to/login");
    }
  });
  ... // same as above
}, 
```

当然，您必须添加对实际登录路线的检查，以免造成无限循环！

**编辑：**

您不必修改源代码，最简单的方法是：

```
var CustomRouter = Router.extend({
  route: function() {
    // your overwrite here
  }
}); 
```

在评论中使用它，因为它是 Backbone 原生的！

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T14:51:34.867

我想扩展@jakee 的回答和@Joel Nation 的评论。`this`我在受影响的路线上按预期工作时遇到了麻烦。我得到“这是未定义的”。在使其工作的最终代码下方：

```
 Backbone.Router.prototype.route = function(route, name, callback) {
    if (!_.isRegExp(route)) route = this._routeToRegExp(route);
    if (_.isFunction(name)) {
      callback = name;
      name = '';
    }
    if (!callback) callback = this[name];
    // here my custom code
    callback = _.wrap(callback, _.bind(function(cb) {
      if (name == 'login' || sessionModel.authenticated()) {
        _.bind(cb, this)();
      } else {
        this.navigate('login', {trigger: true});
      }
    }, this));
    // finish my custom code
    var router = this;
    Backbone.history.route(route, function(fragment) {
      var args = router._extractParameters(route, fragment);
      callback && callback.apply(router, args);
      router.trigger.apply(router, ['route:' + name].concat(args));
      router.trigger('route', name, args);
      Backbone.history.trigger('route', router, name, args);
    });
    return this;
  }; 
```

请注意`_.wrap`，您所期望的也是`_.bind`如此。`this`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T14:40:05.570

在初始化应用程序的代码中：

```
// Initialize router(s)
Backbone.history.on("route", function() {
    if (!authenticated) Backbone.history.navigate("/login", true);
});
Backbone.history.start(); 
```

# iphone - 找到结束/完成坐标你一个 UISwipeGestureRecognizer

> ID：13970711
> 
> 赞同：2
> 
> 时间：2012-12-20T11:01:23.267
> 
> 标签：iphone, objective-c, ios

我可以通过执行以下操作找到滑动开始的起始坐标

```
- (void)oneFingerSwipeUp:(UISwipeGestureRecognizer *)recognizer 
{ 
CGPoint point = [recognizer locationInView:[self view]];
NSLog(@"Swipe up - start location: %f,%f", point.x, point.y);
} 
```

是否可以找到滑动结束的坐标？我查看了文档，但没有提到。有什么解决办法吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T11:06:24.507

您需要检查手势识别器的**状态属性**

```
- (void)swipe:(UISwipeGestureRecognizer *)recognizer
{
   CGPoint point = [recognizer locationInView:[recognizer view]];
   if (recognizer.state == UIGestureRecognizerStateBegan)
       NSLog(@"began: %@", NSStringFromCGPoint(point));
   else if (recognizer.state == UIGestureRecognizerStateEnded)
       NSLog(@"ended: %@", NSStringFromCGPoint(point));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-02T12:49:55.730

> 您需要检查手势识别器的 state 属性

**警告**

这是不正确的，因为滑动手势`UIGestureRecognizerStateEnded`仅生成事件。

我找到解决此问题的唯一方法是使用`touchesBegan:`. 它仅适用于当前视图，所以另外我应该将触摸传递给父视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:04:30.297

是的你可以。`UISwipeGestureRecognizer`是 的子类`UIGestureRecognizer`。在那里你有方法： `- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`

有关更多信息，请阅读[此](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:05:38.360

```
CGPoint pt = [recognizer locationOfTouch:0 inView:view]; 
```

我相信这将为您提供启动手势的触摸的原始 x,y 坐标。

# knockout.js - 在 KnockoutJS 中绑定 Click 事件

> ID：13970716
> 
> 赞同：2
> 
> 时间：2012-12-20T11:01:48.763
> 
> 标签：knockout.js

我有一个 div，它根据 'rowState' 的值具有 css 绑定，如下所示，它工作正常。

```
<div id="searchResult"  data-bind="css:{disabledRow: rowState === 2}"> 
```

现在，我需要绑定“click”事件以仅在 rowState 不是 2 时触发。我尝试了以下操作，但没有成功。

```
<div id="searchResult"  data-bind="click:{$parent.rowClicked: rowState !== 2}, css:{disabledRow: rowState === 2}"> 
```

我不想使用 if 语句，因为 div 有很多我需要重复的内容。唯一的区别是，如果 rowState 为 2，则使 div 不可点击。您能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:50:59.847

另一种解决方案可能是：

```
data-bind="click: function() { rowState() !== 2 ? alert('click ok') : return; }, css:{disabledRow: rowState === 2}" 
```

我从 artem 拿了小提琴并将其更改为与我的解决方案一起使用。您可以在此处找到工作示例：http: [//jsfiddle.net/x9CpD/15/](http://jsfiddle.net/x9CpD/15/)

**编辑**

啊，我明白了：如果 rowState != 2，您实际上想阻止事件绑定。我认为您只能使用自定义 BindingHandler 来做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:23:30.267

您可以将 checks`rowState`的值添​​加到 click 事件处理程序：

```
self.rowClicked = function(data) {
    if (data.rowState() != 2) {
        return false;
    }

    console.log("Clicked");
    // Do work
} 
```

这是一个例子：http: [//jsfiddle.net/x9CpD/1/](http://jsfiddle.net/x9CpD/1/)

# xml - NUL 符号被插入到 XML 中的任何位置

> ID：13970720
> 
> 赞同：0
> 
> 时间：2012-12-20T11:02:08.827
> 
> 标签：xml, oracle, character

我正在使用 Oracle 11g，当我手动从数据库中查询数据时，它看起来还可以。但是当我使用 Notepad++ 查看它时，会在生成的 xml 的任何位置插入一个特殊字符。请看下图：
![在此处输入图像描述](../Images/5952a54ec5e9f41286c822d8af3f39b7.png)

我尝试了一切并删除了xml的某些部分，更新了数据库并再次查询，但无效字符只是位置不同。任何想法都非常感谢，谢谢！

最好的问候，
拉克斯

# asp-classic - 为什么 vbscript Mid 函数显示错误“无效的过程调用或参数：Mid”

> ID：13970723
> 
> 赞同：3
> 
> 时间：2012-12-20T11:02:26.207
> 
> 标签：asp-classic, vbscript

嗨，下面是我的 ASPClassic 代码，其中 csvData 是一个包含变量的非常大的字符串。现在在此行中，Mid 函数调用错误“无效的过程调用或参数：Mid”发生为什么会发生这种情况......

```
暗淡dataLen
    来自Len的暗淡
       变暗
       暗板
       昏暗的总通行证

       dataLen =len(csvData)
       来自Len =0
       toLen = 100000
       平板 =100000
       totalPass =(dataLen/slab)
    如果（dataLen Mod 平板）>0 那么
        总通行证=总通行证+1
    万一
    昏暗
    对于 i = 0 到 dataLen
        i=toLen
        如果 toLen > dataLen 然后
            toLen=dataLen
        万一
       Response.Write Mid(csvData,fromLen,toLen)
        从Len=toLen
        toLen=toLen+slab
    下一个

```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T11:08:58.993

当您第一次调用 Mid() 时，我**认为**您的 fromLen 为 0：

```
>> m = Mid("x", 0, 1)
>>
Error Number:       5
Error Description:  Invalid procedure call or argument 
```

尝试初始化：

```
fromLen = 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-24T14:47:03.377

中间起始位置不能是 0 它应该总是从 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-09T02:14:49.867

需要注意的是，Mid() 函数的 END 位置也不能为零 (0)。

# c# - 最佳实践：XNA 中的高效精灵绘制

> ID：13970726
> 
> 赞同：13
> 
> 时间：2012-12-20T11:02:43.463
> 
> 标签：c#, xna, drawing, 2d, sprite

在我的 2D XNA 游戏中绘制精灵的有效方法是什么？更具体地说，我将这个问题分为 4 个问题。

* * *

我曾经将 Game1 的 spriteBatch 声明为**static**，`SpriteBatch.Begin`并`.Close`在每个`IDrawable.Draw`. 那效果不好。为每个可绘制对象提供自己的 SpriteBatch 也效果不佳。

**Q1**：我认为最好有**一个**SpriteBatch 实例，并且只调用**一次**begin/close 。它是否正确？

* * *

目前，我`Game1.Draw`看起来像这样：

```
spriteBatch.Begin();

base.Draw(gameTime); // draws elements of Game.Components

// ...

spriteBatch.End(); 
```

**Q2**：这种方式，`Begin`只调用一次。这是要走的路吗？你们是怎么解决这个问题的？

* * *

**Q3**：另外，每个组件都有自己的`IGameComponent.LoadContent`方法。我应该在那里加载我的内容吗？还是在父类中加载内容更好，例如`Game1.LoadContent`？

* * *

我意识到我不应该两次加载相同的内容，所以我给了我的可绘制组件一个 static 和一个 non-static `Texture2D`，并给了它们 2 个构造函数：

```
static Texture2D defaultTexture;
public Texture2D MyTexture;

public Enemy()
    : this(defaultTexture) { }

public Enemy(Texture2D texture)
{
    MyTexture = texture;
}

protected override void LoadContent()
{
    if (MyTexture == null)
    {
        if (defaultTexture == null)
        {
            defaultTexture = Content.Load<Texture2D>("enemy");
        }

        MyTexture = defaultTexture;
    }
} 
```

这样，类的默认纹理仅在该类第一次`LoadContent`调用时加载。但是，当`texture`在构造函数中指定参数时，我必须事先加载该纹理。

**Q4**：我认为应该有更好的方法来做到这一点。我正在考虑创建一个纹理字典，其资产名称为字符串。你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:15:30.510

> 我曾经将 Game1 的 spriteBatch 声明为静态

你不必让它是静态的。只做一个单例。内部`Draw`方法

```
SpriteBatch spriteBatch = ScreenManager.SpriteBatch; // singletion SpriteBatch
spriteBatch.Begin();
// Draw the background
spriteBatch.Draw(background, ...
foreach (var enemy in enemys)
{
     enemy.Draw(gameTime);
}
// etc.
spriteBatch.End(); // call here end 
base.Draw(gameTime); // and then call the base class 
```

> 我认为最好有一个 SpriteBatch 实例，并且只调用一次开始/关闭。它是否正确？

我建议您打开并结束`SpriteBatch`一种方法。它将帮助您避免与`SpriteBatch`已开始绘制但未完成的冲突。

您是否将元素添加到全局组件集合中？将可绘制对象添加到此集合是一个坏主意。您无法控制绘图的顺序，组件是全局的。[看到这个答案](https://stackoverflow.com/questions/9421275/is-it-drawablegamecomponent-the-wrong-tool-for-creating-buttons)。

在您的组件中实现 IUpdatable 和 IDrawable 并在您需要的代码中调用它们。摆脱静态的东西并使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

> 此外，每个组件都有自己的 IGameComponent.LoadContent 方法。我应该在那里加载我的内容吗？还是在父类中加载内容更好，例如 Game1.LoadContent？

您应该在需要时加载资产并且您对此负责。当用户刚开始游戏时，您不必加载所有 30 个关卡，是吗？例如，当您的游戏开始时，您会加载开始屏幕和主菜单所需的所有资源。如果你只加载你需要的东西，玩家就会很高兴游戏开始得很快。然后玩家想要开始游戏。在这里，您可以在单独的线程上加载资产以保持应用程序响应。

> 我认为应该有更好的方法来做到这一点。我正在考虑创建一个纹理字典，其资产名称为字符串。你有什么建议？

`Content.Load`已经缓存了，所以你不必这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:12:33.673

可以从[周围的](http://rbwhitaker.wikidot.com/spritebatch-basics)[教程中收集到](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/SpriteBatch.Draw.php)

只调用一次 begin 和 end 是首选方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:45:41.153

**Q4**：我认为应该有更好的方法来做到这一点。我正在考虑创建一个纹理字典，其资产名称为字符串。你有什么建议？

* * *

**A4**`Dictionary<string, Texture2D> NameTextureDic` ：我通常在我的类中创建一个`TextureLib`（在运行时处理加载 png 图像），所以我可以得到任何这样的纹理：

```
var t2d = textureLib.NameTextureDic["tree-4"]; 
```

# android - 如何检查活动是否仍在堆栈中？

> ID：13970728
> 
> 赞同：9
> 
> 时间：2012-12-20T11:02:44.883
> 
> 标签：android, android-activity, stack

检查活动是否仍在堆栈中以便回调它的更好方法是什么？

```
Intent i = new Intent(getApplicationContext(),MyClass.class);
startActivity(i); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-09-14T04:07:16.177

我很惊讶这种（某种）问题是多么不受欢迎。

让我首先从解决方案开始：
由于`ActivityManager.getRunningTasks`自 API 21 以来已弃用，
我们必须找到另一种方法来获取 backstack 中的哪些活动。我意识到我们实际上可以实现我们自己的“堆栈”！

我在 MyOwnApplication 中声明了一个 ArrayList：

```
private ArrayList<Class> runningActivities = new ArrayList<>(); 
```

并添加了访问和修改此列表的公共方法：

```
public void addThisActivityToRunningActivityies (Class cls) {
    if (!runningActivities.contains(cls)) runningActivities.add(cls);
}

public void removeThisActivityFromRunningActivities (Class cls) {
    if (runningActivities.contains(cls)) runningActivities.remove(cls);
}

public boolean isActivityInBackStack (Class cls) {
    return runningActivities.contains(cls);
} 
```

在`BaseActivity`所有活动都扩展它的地方：

```
@Override
protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ((MyOwnApplication)getApplication()).addThisActivityToRunningActivityies(this.getClass());
    }

@Override
protected void onDestroy() {
    super.onDestroy();
    ((MyOwnApplication)getApplication()).removeThisActivityFromRunningActivities(this.getClass());
} 
```

然后你可以很容易地使用`isActivityInBackStack`来检查。

**为什么这是必要的？**

是的，当然，大多数情况可以通过使用 Intent Flags 和适当的导航来完成。
但是有这样一个用例，我认为应该很常见，我无法简单地通过使用意图标志找到解决方案。

假设我有一个应用程序，它几乎在每个活动中都有一个导航抽屉。
我从 导航`MainActivity`到`ActivityA`，然后`ChildActivityB`从`ActivityA`. 请注意，`ActivityA`不是`ChildActivityB`因为`ChildActivityB`可以从其他活动（如通知）打开。

注意，`ChildActivityB`还有一个抽屉。我可以`ActivityA`通过抽屉导航到，而不是按向上或返回按钮。现在，假设您循环通过这样的过程： Activity A -> ChildActivity B -> Drawer -> Activity A -> ChildActivityB -> Drawer -> Activity A .....无限的活动将在后台创建。
要修复这种行为，我们需要使用 Intent Flags：

```
(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT | Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

到现在为止还挺好。但是，我通过使用自定义活动过渡动画`overridePendingTransition()`。我注意到，如果我将上述意图标志放在一起`overridePendingTransition()`，**动画中会出现故障，因为活动在动画中间被破坏**，由于标志`Intent.FLAG_ACTIVITY_CLEAR_TOP`。

现在，如果我能够检测到是否`ActivityA`在 backstack 中，那么行为将是完美的：

```
private void navigateToDrawerItems(Class cls) {
    drawerLayout.closeDrawer(GravityCompat.END);
    Intent intent = new Intent(this, cls);
    if (((MyOwnApplication)getApplication()).isActivityInBackStack(cls)) {
        intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    } else {
        startActivity(intent);
        overridePendingTransition(R.anim.slide_right_in, R.anim.slide_left_out);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:11:31.973

查看[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html) API

要获取 ActivityManager 的实例，请使用以下代码：

```
ActivityManager mngr = (ActivityManager) getSystemService( ACTIVITY_SERVICE ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-26T12:40:30.363

您可以将全局变量切换为特定类内部`onCreate()`和`onDestory()`特定类的指示器，或者ActivityLifecycleCallbacks内部`onActivityCreated()`和内部的指示器。`onActivityDestroyed()`

例如：

```
 registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {

      @Override
      public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
          if (activity instanceof YourActivity) {
              myGlobalData.setActExist(true);
          } 
      }

      @Override
      public void onActivityDestroyed(Activity activity) {
          if (activity instanceof YourActivity) {
              myGlobalData.setActExist(false);
          }
      }
  }); 
```

# java - JSP 会话不使用 servlet

> ID：13970734
> 
> 赞同：0
> 
> 时间：2012-12-20T11:03:11.023
> 
> 标签：java, jsp, session, servlets

我的问题是：我想在我的 JSP 页面上使用会话，而不使用 servlet（例如 php）

问题是：如何做到这一点？我读到会话是隐含的，就像 jsp 中的请求一样，但我实际上并不知道如何使用它。

我有一个主页，它在 url 上传递了一些变量（如 index.jsp?id=1）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:06:31.287

您可以使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:set>`和`<c:remove>`管理会话属性。

以下内容有效地 a `session.setAttribute("foo", "bar")`：

```
<c:set var="foo" value="bar" scope="session" /> 
```

以下内容有效地 a `session.removeAttribute("foo")`：

```
<c:remove var="foo" scope="session" /> 
```

当然，您可以使用通常的 EL 方式访问属性，如下所示`session.getAttribute("foo")`。

```
${foo} 
```

* * *

**与具体问题无关**，您应该反对 servlet。这不是一个好习惯。JSTL 没有提供使业务逻辑变得轻而易举的一切，这将迫使您回退到遗留的*scriptlet*。我希望这只是无知。仔细阅读我们的 servlets wiki 页面，了解如何轻松创建和使用它：[https](https://stackoverflow.com/tags/servlets/info) ://stackoverflow.com/tags/servlets/info这个答案可能有点启发性：[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T06:36:30.127

假设你有两个 jsp

1.  index.jsp = 获取 index.jsp 中的参数并将值添加到会话（隐式对象）

    `<%`
    `String empId = request.getParameter("id");
    session.setAttribute("empId", empId);
    response.sendRedirect("homePage.jsp");`

    `%>`

2.  现在在 homePage.jsp = 编写代码以检索先前使用键**empId添加的值**

    `<%`

    `String employeId = (String)session.getAttribute("empId");`

    `%>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:18:58.457

你必须在jsp代码中使用它

```
 <%

     HttpSession sess = request.getSession();

     if (sess==null)
     {
         RequestDispatcher dispatcher = request.getRequestDispatcher("/login.jsp");
         dispatcher.forward(request, response);                        
     }

      %> 
```

你可以得到会话及其属性

对于 index.jsp?id=1 你可以使用

```
 request.getParameter("id") 
```

# jquery - Jquery如何在关闭内部弹出窗口后突出显示外部弹出窗口？

> ID：13970735
> 
> 赞同：0
> 
> 时间：2012-12-20T11:03:17.413
> 
> 标签：jquery

我在另一个弹出窗口中创建了一个弹出窗口。这是我的代码，

```
<html>
<head>
    <title>Popup</title>
    <script type="text/javascript" src="jquery-1.6.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            //open popup
            $("#pop").click(function(){
              $("#background").css({"opacity" : "0.7"}).fadeIn("slow");    
              $("#overlay_form").fadeIn(1000);                              
              positionPopup();                  
            });
            $("#plus").click(function(){
              $("#background").css({"opacity" : "0.7"}).fadeIn("slow"); 
      $("#overlay_form").css({"opacity" : "0.7"}).fadeIn("slow");      
              $("#inner_form").fadeIn(1000);                              
              positionPopup();                  
            });
            //close popup
            $("#close").click(function(){
                $("#overlay_form").fadeOut(500);
                $("#background").fadeOut("slow");    
        document.getElementById("loc").value="";
        document.getElementById("uname").value="";
            });
            $("#innerclose").click(function(){
                $("#inner_form").fadeOut(500);  
        $("#overlay_form").fadeIn(500);     
        var newloc=document.getElementById("nloc").value;
        document.getElementById("loc").value=newloc;
        document.getElementById("nloc").value="";   
            });
        });
        //position the popup at the center of the page
        function positionPopup(){
              if(!$("#overlay_form").is(':visible')){
                return;
              } 
              $("#overlay_form").css({
                  left: ($(window).width() - $('#overlay_form').width()) / 2,
                  top: ($(window).width() - $('#overlay_form').width()) / 7,
                  position:'absolute'
              });
      $("#inner_form").css({
                  left: ($(window).width() - $('#inner_form').width()) / 2,
                  top: ($(window).width() - $('#inner_form').width()) / 5,
                  position:'absolute'
              });           
        }
        //maintain the popup at center of the page when browser resized
        $(window).bind('resize',positionPopup);
    </script>
    <style>
        #background{
            display: none;
            position: absolute;
            height: 100%;
            width: 100%;
            top: 0;
            left: 0;
            background: #000000;
            z-index: 1;
        }
        #overlay_form{
         position: absolute;
         border: 5px solid gray;
         padding: 10px;
         background: white;
         width: 270px;
         height: auto;  
             z-index:10;  
        }   
         #inner_form{
         position: absolute;
         border: 5px solid gray;
         padding: 10px;
         background: white;
         width: 250px;
         height: auto;  
             z-index:12;  
        }       
        #pop{
        display: block;
        border: 1px solid gray;
        width: 65px;
            height: auto;
        text-align: center;
        padding: 6px;
        border-radius: 5px;
        text-decoration: none;
        margin: 0 auto;                
        }
    </style>
</head>
<body> 
<div id="background"></div>
<a href="#" id="pop" >PopUp</a>
<br />
<form id="overlay_form" style="display:none">
    <label>Name</label><input type="text" name="uname" id="uname" /><br/><br/>
    <label>Location</label><input type="text" name="loc" id="loc" /><a href="#" id="plus" style="text-decoration:none;"> + </a><br/> <br/>
    <a href="#" id="close">Close</a>      
</form>  
<form id="inner_form" style="display:none"> 
 <label>New Location</label><input type="text" name="nloc" id="nloc" />
 <a href="#" id="innerclose">Close</a>  
</form> 
</body> 
```

在此，我想在关闭内部弹出窗口后显示外部弹出窗口明亮的颜色。如果外部弹出窗口关闭，则浏览器窗口将明亮显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:09:23.087

[这是一个小提琴](http://jsfiddle.net/AVkTc/)。如果我理解正确，问题应该得到解决。

我唯一添加的是`$("#overlay_form").css({"opacity" : "1"}).fadeIn("slow");`在`$("#innerclose")`点击回调中。

# .htaccess - Htaccess 重定向错误页面

> ID：13970737
> 
> 赞同：0
> 
> 时间：2012-12-20T11:03:24.103
> 
> 标签：.htaccess

我想将服务器错误（404、500 等）重写为 url，如下所示：

```
example.com/error.php?n=404
example.com/error.php?n=500 
```

怎么做？

**升级版：**

是否有一种通用的方法来处理所有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:05:12.237

尝试这个 ：

```
ErrorDocument 404 /error.php?n=404
ErrorDocument 500 /error.php?n=500 
```

# php - 在文本中使用 html 标签将拉丁语翻译成西里尔语？

> ID：13970742
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:03:40.153
> 
> 标签：php

我的一个朋友问我如何将 textarea 中的文本从拉丁语翻译成西里尔语，但要避免 xss 危险。

```
Example : <b>bold</b> to <б>болд</б> 
```

他将文本翻译为粗体，但 <> 内的文本保持不变，因此可以用于 xss。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:12:18.173

Unicode 值不重叠。

做一个简单`switch`的映射所有字符。

或者使用数组。

# javascript - 无法在html5 应用程序上运行

> ID：13970743
> 
> 赞同：-4
> 
> 时间：2012-12-20T11:03:45.510
> 
> 标签：javascript, android, html, cordova, smartphone

我有一个用 Html5 构建并用 PhoneGap for Android 包装的应用程序

我有一个自动完成输入

下拉列表应该出现在每个实例换行符中，它在计算机上运行良好，在 Android 上不行。

JS代码：

```
 List = $.map(data.XXX, function (item) {
            return {
                label: item.X.split(":")[0] + "</br>" + item.X.split(":")[1],
                value: item.XX
            }; 
```

在智能手机中，它在一条线上向我显示所有内容

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:04:59.113

尝试使用`<br/>`..我希望它会工作...... :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:05:44.990

`</br>`不是正确的标签，请使用`<br />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:08:11.227

对于 html5，正确的版本是`<br>`

`<br/>`对于 xhtml 1.1 是正确的

# android - 使用android maven编译错误

> ID：13970747
> 
> 赞同：3
> 
> 时间：2012-12-20T11:04:09.187
> 
> 标签：android, maven, pom.xml, android-maven-plugin

所以我在使用 maven 的 android 插件时遇到了编译错误。

```
[DEBUG] ANDROID-040-000: Executed command: Commandline = /bin/sh -c cd /Users/adrian/Development/projects/GogoDroid && /Users/adrian/Development/bin/android-sdk-macosx/platform-tools/aapt package -f -M /Users/adrian/Development/projects/GogoDroid/AndroidManifest.xml -S /Users/adrian/Development/projects/GogoDroid/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/org.holoeverywhere_library_apklib_1.4.0/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/com.actionbarsherlock_actionbarsherlock_apklib_4.2.0/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/com.facebook.android_Facebook_apklib_3.0.0/res --auto-add-overlay -A /Users/adrian/Development/projects/GogoDroid/target/generated-sources/combined-assets/assets -I /Users/adrian/Development/bin/android-sdk-macosx/platforms/android-16/android.jar -F /Users/adrian/Development/projects/GogoDroid/target/gogodroid.ap_, Result = 1
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 58.008s
[INFO] Finished at: Thu Dec 20 02:47:51 PST 2012
[INFO] Final Memory: 18M/123M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.4.1:apk (default-apk) on project gogodroid: MojoExecutionException: ANDROID-040-001: Could not execute: Command = /bin/sh -c cd /Users/adrian/Development/projects/GogoDroid && /Users/adrian/Development/bin/android-sdk-macosx/platform-tools/aapt package -f -M /Users/adrian/Development/projects/GogoDroid/AndroidManifest.xml -S /Users/adrian/Development/projects/GogoDroid/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/org.holoeverywhere_library_apklib_1.4.0/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/com.actionbarsherlock_actionbarsherlock_apklib_4.2.0/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/com.facebook.android_Facebook_apklib_3.0.0/res --auto-add-overlay -A /Users/adrian/Development/projects/GogoDroid/target/generated-sources/combined-assets/assets -I /Users/adrian/Development/bin/android-sdk-macosx/platforms/android-16/android.jar -F /Users/adrian/Development/projects/GogoDroid/target/gogodroid.ap_, Result = 1 -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.4.1:apk (default-apk) on project gogodroid: 
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: 
    at com.jayway.maven.plugins.android.phase09package.ApkMojo.generateIntermediateApk(ApkMojo.java:1103)
    at com.jayway.maven.plugins.android.phase09package.ApkMojo.execute(ApkMojo.java:287)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: com.jayway.maven.plugins.android.ExecutionException: ANDROID-040-001: Could not execute: Command = /bin/sh -c cd /Users/adrian/Development/projects/GogoDroid && /Users/adrian/Development/bin/android-sdk-macosx/platform-tools/aapt package -f -M /Users/adrian/Development/projects/GogoDroid/AndroidManifest.xml -S /Users/adrian/Development/projects/GogoDroid/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/org.holoeverywhere_library_apklib_1.4.0/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/com.actionbarsherlock_actionbarsherlock_apklib_4.2.0/res -S /Users/adrian/Development/projects/GogoDroid/target/unpack/apklibs/com.facebook.android_Facebook_apklib_3.0.0/res --auto-add-overlay -A /Users/adrian/Development/projects/GogoDroid/target/generated-sources/combined-assets/assets -I /Users/adrian/Development/bin/android-sdk-macosx/platforms/android-16/android.jar -F /Users/adrian/Development/projects/GogoDroid/target/gogodroid.ap_, Result = 1
    at com.jayway.maven.plugins.android.CommandExecutor$Factory$1.executeCommand(CommandExecutor.java:339)
    at com.jayway.maven.plugins.android.phase09package.ApkMojo.generateIntermediateApk(ApkMojo.java:1099)
    ... 22 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
➜  GogoDroid git:(feature/build_script) ✗ mvn -v
Apache Maven 3.0.4 (r1232337; 2012-01-17 00:44:56-0800)
Maven home: /usr/local/Cellar/maven/3.0.4/libexec
Java version: 1.6.0_29, vendor: Apple Inc.
Java home: /Library/Java/JavaVirtualMachines/1.6.0_29-b11-402.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.7.5", arch: "x86_64", family: "mac" 
```

有谁知道发生了什么？我注意到的唯一另一件奇怪的事情是，在构建实际失败之前似乎有很多奇怪的资源调试消息。

（实际失败前的消息）

```
INFO] /Users/adrian/Development/projects/GogoDroid/res/drawable/tab_trips_selector.xml:14: error: Error: No resource found that matches the given name (at 'drawable' with value '@drawable/tab_trip_ic_sel').
[INFO] /Users/adrian/Development/projects/GogoDroid/res/drawable/tab_trips_selector.xml:15: error: Error: No resource found that matches the given name (at 'drawable' with value '@drawable/tab_trip_ic_sel').
[INFO] /Users/adrian/Development/projects/GogoDroid/res/drawable/tab_trips_selector.xml:18: error: Error: No resource found that matches the given name (at 'drawable' with value '@drawable/tab_trip_ic').
[INFO] /Users/adrian/Development/projects/GogoDroid/res/drawable/tab_trips_selector.xml:19: error: Error: No resource found that matches the given name (at 'drawable' with value '@drawable/tab_trip_ic_sel').
[INFO] /Users/adrian/Development/projects/GogoDroid/res/menu/feed_menu.xml:4: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/refresh_ic').
[INFO] /Users/adrian/Development/projects/GogoDroid/res/menu/me_menu.xml:4: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/ab_invite_ic').
[INFO] /Users/adrian/Development/projects/GogoDroid/res/menu/moment_menu.xml:4: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/ab_info_ic'). 
```

提前感谢您的帮助。

更新 1 - 这是 pom 供参考，我刚刚将插件更新到 3.5.0，但仍然看到相同的错误。它仍然与资源有关。看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <packaging>apk</packaging>
    <!-- Omitted Group Info -->

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.1.1.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.holoeverywhere</groupId>
            <artifactId>library</artifactId>
            <version>1.4.0</version>
            <type>apklib</type>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>1.5.2</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.roboguice</groupId>
            <artifactId>roboguice</artifactId>
            <version>2.0</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>net.hockeyapp.android</groupId>
            <artifactId>HockeySDK</artifactId>
            <version>2.2.1</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.apache.amber</groupId>
            <artifactId>amber-oauth2-client</artifactId>
            <version>0.22-incubating</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>actionbarsherlock</artifactId>
            <version>4.2.0</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>com.github.kevinsawicki</groupId>
            <artifactId>urbanairship-lib</artifactId>
            <version>2.0.2</version>
        </dependency>

        <dependency>
            <groupId>com.google.android.maps</groupId>
            <artifactId>maps</artifactId>
            <version>16_r3</version>
            <scope>provided</scope>
        </dependency>
    <!--    <dependency>
            <groupId>android.support</groupId>
            <artifactId>compatibility-v4</artifactId>
            <version>11</version>
        </dependency>    -->
        <dependency>
            <groupId>com.androidquery</groupId>
            <artifactId>aquery</artifactId>
            <version>0.22.10</version>
        </dependency>
        <dependency>
            <groupId>com.commonsware.cwac.adapter</groupId>
            <artifactId>AdapterWrapper</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>com.commonsware.cwac.endless</groupId>
            <artifactId>EndlessAdapter</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>com.facebook.android</groupId>
            <artifactId>Facebook</artifactId>
            <version>3.0.0</version>
            <exclusions>
                <exclusion>
                    <groupId>android.support</groupId>
                    <artifactId>compatibility-v4</artifactId>
                </exclusion>
            </exclusions>
            <type>apklib</type>
        </dependency>

    </dependencies>

    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.5.0</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <path>/Users/adrian/Development/bin/android-sdk-macosx</path>
                        <platform>4.1.2</platform>
                    </sdk>
                    <extractDuplicates>true</extractDuplicates>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

更新 2 - 看起来这是一个特定于 Android Maven 的问题，抱怨我的 9.patch 图像不是真正的 9.patch 图像。Eclipse 和 Intellij 可以很好地编译 apks……有人有办法让 maven android 表现得像 Eclipse 和 Intellij 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:14:09.727

我觉得您使用的是旧版本的 Maven-Plugin。使用最新版本更新您的 pom.xml 并尝试编译。

[https://groups.google.com/forum/#!topic/maven-android-developers/w5H0oRWJN9I/discussion](https://groups.google.com/forum/#!topic/maven-android-developers/w5H0oRWJN9I/discussion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T08:08:11.393

以防万一您没有任何效果，请在 Jenkins -> Workspace -> 中转到您的项目，然后清除当前工作区并尝试进行新构建。

这为我修复了 ExecutionException: ANDROID-040-001。

# c - c预处理器中的宏评估

> ID：13970749
> 
> 赞同：3
> 
> 时间：2012-12-20T11:04:20.123
> 
> 标签：c, c-preprocessor

我想做这样的事情：

```
#define NUM_ARGS() 2
#define MYMACRO0(...) "no args"
#define MYMACRO1(...) "one arg"
#define MYMACRO2(...) "two args"
#define MYMACRO(num,...) MYMACRO##num(__VA_ARGS__)
#define GENERATE(...) MYMACRO(NUM_ARGS(),__VA_ARGS__) 
```

我希望它评估为“两个参数”。但相反我有

```
MYMACRONUM_ARGS()(1,1) 
```

有没有办法做我想做的事（使用Visual C++）？

PS最终我想实现转储所有变量的记录器。下一个代码

```
int myInt = 7;
string myStr("Hello Galaxy!");
DUMP_VARS(myInt, myStr); 
```

会产生日志记录`"myInt = 7; myStr = Hello Galaxy!"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:12:49.563

您需要另一个宏，因为宏扩展不会发生在`#`or附近`##`：

```
#define NUM_ARGS() 2
#define MYMACRO0(...) "no args"
#define MYMACRO1(...) "one arg"
#define MYMACRO2(...) "two args"
#define MYMACRO_AUX(num,...) MYMACRO##num(__VA_ARGS__)
#define MYMACRO(num,...) MYMACRO_AUX(num, __VA_ARGS__)
#define GENERATE(...) MYMACRO(NUM_ARGS(),__VA_ARGS__)

#include <stdio.h>

int main(void)
{
    puts(GENERATE(0, 1));

    return 0;
} 
```

如果这是你想要做的，但复杂的预处理器技巧并不安全，正如其他人已经说过的那样，除非你真的必须这样做，否则不要这样做。

# ios - 限制 MapView 上的重复注释

> ID：13970755
> 
> 赞同：3
> 
> 时间：2012-12-20T11:04:30.623
> 
> 标签：ios, mkmapview, mapkit, mkannotation

如何在经纬度的唯一位置限制重复注释。

当我在地图上添加注释时，我可以在具有相同纬度和经度的一个点上添加注释，例如我在地图上添加一个大头针 lat = 37.785834 和 long = -122.406417 并将其命名为 Bob 的房子，然后下次我再次在那个地方添加一个注释图钉，它需要相同的纬度和经度，我可以将它保存为 Steve House，但它不应该发生我希望它显示该位置已经占用的警报类型，选择一个不同的位置，因此，任何经纬度都不应该有重复的条目。这与缩放或任何东西无关。

现在我想要一个代码来查询和检查数据库用户是否在相同的纬度和经度上点击注释，即，我不想通过检查数据库来为相同的纬度/经度值创建重复条目.....

示例代码：

```
#pragma mark - 
- (void) addSite2 { 
    AddSiteInfoViewController *vc = [[[AddSiteInfoViewController alloc] initWithCoordinate:pinAnnotation.coordinate] autorelease]; 
    [self.delegate pushViewController:vc animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:26:42.517

如果标注已经显示在地图中，可以使用以下代码（无需检查数据库）：

```
#pragma mark - 
- (void) addSite2 { 
    NSUInteger index = [self.mapView.annotations indexOfObjectPassingTest:
                        ^BOOL(MKAnnotation *anot1, NSUInteger index, BOOL *stop){
                            return (CLCOORDINATES_EQUAL( anot1.coordinate, pinAnnotation.coordinate));
                    }];
    if (index == NSNotFound)
    {
        AddSiteInfoViewController *vc = [[[AddSiteInfoViewController alloc] initWithCoordinate:pinAnnotation.coordinate] autorelease]; 
        [self.delegate pushViewController:vc animated:YES];
    }
} 
```

*（主要是写在我的头上，所以可能存在拼写错误或小错误。）*

如果实际上没有显示注释...请使用 Rajneesh071 评论中给出的解决方案：[从数据数组中提取唯一对象](https://stackoverflow.com/questions/14001146/extracting-unique-objects-from-a-data-array/14002160#14002160)

# html - 在调整窗口大小时定位文本

> ID：13970757
> 
> 赞同：0
> 
> 时间：2012-12-20T11:04:33.750
> 
> 标签：html, css

如何`<p>`在窗口大小更改时动态定位标签中的文本。

这是我的 CSS：

```
.map_text {
    position: relative;
    font-size: .9em;
    font-style: italic;
    width: 650px;
    overflow: auto;
    height: 50px;    
    left: 255px;
    bottom: 37px;
} 
```

我有某种容器，我的`.map_text`元素被放入其中。它定位正确。当我尝试更改我的浏览器窗口大小时，我已经重叠`.map_text`了文本超出容器边界的元素。

**更新**：这是我的 HTML：

```
<div id="some_dropbox">
   <form id="someForm">
      <p>Some text</p>
   </form>
   <form id="some_form_id"><input id="save_id" value="Save" disabled="disabled" type="submit" /></form>
   <div id="columns_dropbox">
      <form id="some_columns_form_id">
     <p>
        Select Name: 
        <option value="last_name">Last Name</option>
        <option value="first_name">First Name</option>
        </select>
     </p>
      </form>
      <p id="map_text_id" class="map_text error">Some realy realy realy realy realy realy realy realy realy realy realy realy realy long text</p>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:39:47.310

添加 `float: right;` 这是你所追求的：http: [//jsfiddle.net/J2VAY/1/](http://jsfiddle.net/J2VAY/1/)

# c - 从用户级别禁用键盘设备

> ID：13970760
> 
> 赞同：0
> 
> 时间：2012-12-20T11:04:58.117
> 
> 标签：c, linux, keyboard, linux-kernel, device-driver

如何在 C 程序中临时禁用键盘。我已经想到的是禁用键盘的 IRQ 线（IRQ 2）。我用谷歌搜索它并找到了该 `disable_irq()`功能，但它不起作用。这是代码：

```
#include<stdio.h>
#include<irq.h>
#include<unistd.h>

void main()
    {

         printf("trying to disable the keyboard via IRQ.....");
         sleep(2);
         disable_irq(2);
         printf("IRQ line has been disabled");
         sleep(10);
         printf("Enabling IRQ.....");

     } 
```

当我运行这个我得到这个错误：

```
irq.c:2:16: fatal error: irq.h: No such file or directory
compilation terminated. 
```

你能帮我解决这个问题或建议任何其他方法来做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:09:52.633

您不能`disable_irq(2)`从用户空间调用，因为它是内核调用，并且只能从内核模块或内核代码调用。其他禁用/禁止键盘的方法是：

1.  使用 .卸载键盘设备驱动程序`rmmod`。
2.  重定向`stdin`到`/dev/null`
3.  `#define scanf //NOP`
4.  要仅禁用控制字符，如`Ctrl+C`等，请使用`signal mask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:38:13.097

不，您不能从用户空间禁用键盘。我看不出你为什么必须这样做。如果您希望您的应用程序获得所有按键，请尝试仅作为全屏窗口。

如果您试图阻止内核获得紧急击键，我永远不会安装您的应用程序。键盘是内核和用户之间通信的基本方法。内核使用它来获取指令，获取紧急恢复命令，并告诉您它正在恐慌（闪烁的大写锁定灯）。

即使可以，也不应该禁用键盘。

# sql - 参数中的多个值 - SQL(Oracle)

> ID：13970770
> 
> 赞同：0
> 
> 时间：2012-12-20T11:05:18.367
> 
> 标签：sql, oracle, parameters

我想通过单个参数传递多个值。

* * *

```
select 
id,
item_number 
from AGILE.item_p2p3_query where subclass='2477110' and date32 is not null 
and item_number in : p **// passing one parameter would work. But when I pass two parameters like EN 60439-1:1999,EN 60439-3:1991 doesn't seem to work**
--in ('EN 60439-3:1991','EN 60439-1:1999') // this will work 
```

* * *

请仅建议 SQL 建议而不是 PL/SQL，因为我将在报告中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:18:42.053

我假设您将值绑定到查询，因为它在有一个值时工作，但在有两个值时失败。这是我如何绑定列表中的变量的问题。有一些解决方案，但我喜欢的不涉及 PLSQL 的解决方案是：

```
with id_generator
    as
    (
      SELECT regexp_substr(:txt, '[^,]+', 1, LEVEL) token
      FROM dual
      CONNECT BY LEVEL <= length(:txt) - length(REPLACE(:txt, ',', '')) + 1
    )
    select u.id, u.username
    from users u, id_generator g
    where u.id = g.token; 
```

将逗号分隔的字符串绑定为 :txt 的值，然后将查询构造为连接。

完整解释 - [http://betteratoracle.com/posts/20-how-do-i-bind-a-variable-in-list](http://betteratoracle.com/posts/20-how-do-i-bind-a-variable-in-list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:24:40.843

这可能会有所帮助 - 通过任何有效的 deptnos lk 10,20 列表...：

```
Select * From scott.emp 
 Where deptno IN (&deptno)
/ 
```

如果传递一个字符串，则使用引号 ...IN ('&ename') 谢谢。

# php - PHP 面向对象编程多个查询

> ID：13970775
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:05:28.097
> 
> 标签：php

所以，我有这个问题。我正在尽我最大的努力练习面向对象的编程，并且我已经开始使用这个半 OOP 脚本。它是如何工作的，我有一张名为 portal_robot_error 女巫的表，其中包含所有机器人错误。然后我有另一个名为 portal_robot_service 的主表，它是服务的最高级别。连接到这个表我还有 2 个与 portal_robot_service 表链接。这些被称为 portal_service_robot_errorservice 和 portal_service_robot_changeservice 包含服务的详细信息。我希望我已经设法很好地解释了这部分！

这就是我想做的。当用户搜索机器人时，所有错误和所有服务都应以按日期排序的列表结尾。

示例：用户搜索机器人 21。结果：错误 1 ​​- 日期、机器人、位置、错误代码等。错误 2 - 日期、机器人、位置、错误代码等。服务 1 - 日期、机器人、服务类型等。错误 3 -日期、机器人、位置、错误代码等 错误 4 - 日期、机器人、位置、错误代码等...

由于脚本现在只显示错误，我如何在列表中显示服务？

提前致谢！

```
<?php   
elseif(!empty($query) && empty($inDate) && empty($id) && empty($dateLike)) {
$arr    = array();
$q      = mysql_query("SELECT * FROM portal_robot_error WHERE robot = '$robot'");

while($r = mysql_fetch_object($q)) {

    $m = "Robot ".$r->robot;
    $s = mysql_query("SELECT * FROM portal_service WHERE service_date >= '$this->lastService' AND service_date <= '$r->date' AND service_module = '$m' AND service_id > '$this->lastId' LIMIT 1");

    if(mysql_num_rows($s) > 0) {
        echo "SELECT * FROM portal_service WHERE service_date >= '$this->lastService' AND service_date <= '$r->date' AND service_module = '$m' AND service_id > '$this->lastId' LIMIT 1<br />";
        $z              = mysql_fetch_object($s);
        $this->lastId   = $z->service_id;

        if($z->service_type == "Errorservice") {
            $e                      = mysql_query("SELECT * FROM portal_service_robot_errorservice WHERE service_id = '$z->service_id'");
            $f                      = mysql_fetch_object($e);
            $errorservice_track     = $f->tracksensor;
            $errorservice_gripper   = $f->gripper;
            $errorservice_cover     = $f->cover;
            $errorservice_wheel     = $f->wheel;
            $service_text           = "Errorservice HIHIHIHI".$this->lastId;
            $service                = new Error($this->lastId, $z->service_date, "", "", $z->service_module, "", "", $z->service_type, $z->service_comment, $service_text, "", $z->service_user);
            array_push($arr, $service);                     
        }
        elseif($z->service_type == "Changeservice") {
            $e                      = mysql_query("SELECT * FROM portal_service_robot_changeservice WHERE service_id = '$z->service_id'");
            $f                      = mysql_fetch_object($e);
            $service_text           = "Changeservice HIHIHIHI".$this->lastId;
            $service                = new Error($this->lastId, $z->service_date, "", "", $z->service_module, "", "", $z->service_type, $z->service_comment, $service_text, "", $z->service_user);
            array_push($arr, $service);
        }
    }
    else {
        $n   = new Error($r->error_id, $r->date, $r->stoptime, $r->starttime, $r->robot, $r->rob_status, $r->position, $r->error_code, $r->observation, $r->solution, $r->downtime, $r->user);
        array_push($arr, $n);
        $this->lastService = $r->date;
    }

}   
return $arr;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:56:42.607

好的，我找到了解决方案。当我们将数据导入数据库时​​，出现问题并在所有内容的末尾添加了一个 \r。我的问题是 if($z->service_type == "Changeservice") 没有命中。那是因为没有人看到最后的 \r...

我将阅读 PDO 和 MySQLi :)

# mongodb - 在弹性搜索中索引文档时出现异常

> ID：13970776
> 
> 赞同：3
> 
> 时间：2012-12-20T11:05:28.737
> 
> 标签：mongodb, elasticsearch

我有一个 JSON 文档。当我尝试在弹性搜索中建立索引时，我遇到了异常。

index1 没有默认映射。

```
curl -XPOST localhost:9200/index1/talk?pretty=1 -d '
{
    "_id" : ObjectId("503b29efe4b032e338f0581b"),
    "_oid" : NumberLong(1182053),
    "_ugc" : false,
    "_v" : 22,
    "c" : [
        "Destination"
    ],
    "cc" : "AD",
    "co" : "andorra",
    "e" : true,
    "f" : [
        "Destination"
    ],
    "gi" : "3038999",
    "h" : 0,
    "i" : [ ],
    "k" : [
        "soldeu",
        "parroquia de canillo"
    ],
    "kv" : [
        "soldeu"
    ],
    "la" : 42.57688,
    "lc" : 0,
    "ln" : 1.66769,
    "ns" : [
        {
            "n" : "Soldeu",
            "l" : "en",
            "t" : "p"
        }
    ],
    "po" : 0,
    "point" : [
        42.57688,
        1.66769
    ]
}' 
```

**堆栈跟踪 ：**

```
org.elasticsearch.index.mapper.MapperParsingException: Failed to parse
    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:509)
    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:438)
    at org.elasticsearch.index.shard.service.InternalIndexShard.prepareCreate(InternalIndexShard.java:287)
    at org.elasticsearch.action.index.TransportIndexAction.shardOperationOnPrimary(TransportIndexAction.java:210)
    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:532)
    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:430)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.elasticsearch.common.jackson.core.JsonParseException: Unexpected character ('O' (code 79)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
 at [Source: [B@5e7d093a; line: 4, column: 10]
    at org.elasticsearch.common.jackson.core.JsonParser._constructError(JsonParser.java:1284)
    at org.elasticsearch.common.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:588)
    at org.elasticsearch.common.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:509)
    at org.elasticsearch.common.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2094)
    at org.elasticsearch.common.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:561)
    at org.elasticsearch.common.xcontent.json.JsonXContentParser.nextToken(JsonXContentParser.java:48)
    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:461)
    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:494)
    ... 8 more 
```

JSON 是来自 mongodb 的文档。我已经安装了以下插件：

```
ES_HOME/bin/plugin -install elasticsearch/elasticsearch-mapper-attachments/1.4.0 
ES_HOME/bin/plugin -install richardwilly98/elasticsearch-river-mongodb/1.4.0 
```

有人可以告诉我哪里出错了吗？

**更新**：

该错误似乎是因为 ObjectId() 和 NumberLong()。但是，我不希望这些字段被索引，所以我定义了一个自定义映射来发出这些字段。自定义映射：

```
curl -XPUT localhost:9200/index1?pretty=1 -d '{
        "mappings" : {
            "type1" : {
                "_all" : {"enabled" : false},
                "properties" : {
         "ns" : {
            "dynamic" : "true",
                "properties" : {
                  "n" : {
                    "type" : "string"
                  },
                  "l" : {
                    "type" : "string"
                  },
            "t" : {
                    "type" : "string"
                  }
        }
      }
                }
            }
        }
}' 
```

理想情况下，分析器应该省略 _id 和 _oid，但仍然有任何方法可以为此类对象提供映射。

`ObjectId = org.bson.types.ObjectId and NumberLong = java.lang.Double`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:41:55.593

json 对象不正确。

您的 _id 属性似乎有些奇怪，因此 ElasticSearch 无法解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:45:03.923

要从索引的 MongoDB 文档中删除字段，您需要使用脚本：

1.  安装 Javascript 插件 ES_HOME\bin\plugin -install elasticsearch/elasticsearch-lang-javascript/1.2.0
2.  在河流设置中添加一个脚本属性：delete ctx.document._id；

无法使用自定义映射删除字段。

# mysql - 如何对数据表的每个表值求和

> ID：13970781
> 
> 赞同：0
> 
> 时间：2012-12-20T11:05:39.360
> 
> 标签：mysql

我有四张桌子，需要帮助计算每张桌子中每个价格的总和

1 表skom

```
 _________________________________
 | id | noskom      | price_skom |
 |____|_____________|____________|
 |  1 | 1           |   10       | 
 |  2 | 2           |   30       |  
 |__3_|_3___________|___50_______| 
```

2 表 skop

```
 ______________________________________________
 | id | noskom      | noskop     | price_skop |
 |____|_____________|____________|____________|
 |  1 | 1           |   1        |   10       |  
 |  2 | 1           |   2        |   20       |  
 |  3 | 2           |   3        |    5       | 
 |  4 | 2           |   4        |   30       |  
 |____|_____________|____________|____________| 
```

3 表 npbm

```
 ___________________________________________________________
 | id | noskom      | noskop     | nonpbm     | price_npbm |
 |____|_____________|____________|____________|____________|
 |  1 | 1           |   1        |   1        |   10       | 
 |  2 | 1           |   1        |   2        |   20       |   
 |  3 | 1           |   2        |   3        |    5       | 
 |  4 | 1           |   2        |   4        |    5       | 
 |  5 | 2           |   1        |   5        |   10       |   
 |  6 | 2           |   2        |   6        |   10       |  
 |  7 | 2           |   2        |   7        |   10       |       
 |____|_____________|____________|____________|____________| 
```

4 表 npbp

```
 ________________________________________________________________________
 | id | noskom      | noskop     | nonpbm     | nonpbp     | price_npbp |
 |____|_____________|____________|____________|____________|____________|
 |  1 | 1           |   1        |   1        |    1       |   10       | 
 |  2 | 1           |   1        |   2        |    2       |   20       |   
 |  3 | 1           |   2        |   3        |    3       |    5       | 
 |  4 | 1           |   2        |   4        |    4       |    5       | 
 |  5 | 2           |   1        |   5        |    5       |   10       |   
 |  6 | 2           |   2        |   6        |    6       |   10       |  
 |  7 | 2           |   2        |   7        |   10       |   10       |       
 |____|_____________|____________|____________|____________|____________| 
```

我需要这样的查询帮助

```
 select sum(price_skom),sum(price_skop),sum(price_npbm),sum(price_npbp) from each table group by noskom 
```

我想要这样的结果

表结果按 noskom 分组

```
 ________________________________________________________________
 | id | noskom      | sum_skom | sum_skop | sum_npbm | sum_npbp |
 |____|_____________|__________|__________|__________|__________|
 |  1 | 1           |   10     |   30     |    40    |   90     |  
 |  2 | 2           |   30     |   35     |    30    |   70     |      
 |__3_|_3___________|___50_____|__________|__________|__________| 
```

帮我查询mysql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:17:35.960

要获取没有对应 noscom 的行，您需要有一个外连接：

```
select sk1.id, sk1.noskom,sum(price_skom),sum(price_skop),sum(price_npbm),sum(price_npbp) 
from skom sk1 left outer join skop on (sk1.id=skop.noskom),
     skom sk2 left outer join npbm on (sk2.id=npbm.noskom),
     skom sk3 left outer join npbp on (sk3.id=npbp.noskom)
Where sk1.id=sk2.id and sk2.id=sk3.id
group by  sk1.id,sk1.noskom 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:17:58.083

像这样的东西：

```
select 
noskom, 
sum (pskom) as sum_skom, 
sum (pskop) as sum_skop, 
sum (pnpbm) as sum_npbm, 
sum (pnpbp) as sum_npbp

from
(
select noskom, sum (price_skom) as pskom, 0 as pskop, 0 as pnpbm, 0 as pnpbp from skom group by noskom
union all
select noskom, 0, sum (price_skop), 0, 0 from skop group by noskom
union all
select noskom, 0, 0, sum (price_npbm), 0 from npbm group by noskom
union all
select noskom, 0, 0, 0, sum (price_npbp) from npbp group by noskom
) as p

group by noskom 
```

# java - 如何根据边界框和特定单词来相对调整 SVG 字体的大小

> ID：13970782
> 
> 赞同：1
> 
> 时间：2012-12-20T11:05:42.253
> 
> 标签：java, svg, batik

我需要使用 SVG 在矩形内绘制一些文本。我有由路径定义的图标，并且我根据图标的形状为每个图标任意选择了文本画布区域。我需要做的是绘制一些文本（可以随每个请求而改变），使文本在我的文本画布区域内居中（水平和垂直），并调整使用的字体大小，使其完全适合帆布。

到目前为止，我一直在做的是使用 Batik 生成原始图像，然后使用 java.awt 在其上绘制文本。这已经通过从画布区域的 80% 的字体高度开始，然后检查渲染字体的宽度（使用字体度量）并且 - 如果它大于画布区域的宽度 - 将其减少 5%一次，直到它适合。如果它第一次适合，则不涉及循环，因此它仍然相对有效（至少在可预见的将来）。

但是，这种方法在几个方面存在问题，最重要的是在处理向图标添加笔划时，因为随着笔划的增加，图标的边界框会发生不可预测的变化，因此我希望在 SVG 本身内绘制字体。

我可以在 SVG/Batik 中使用类似的方法来调整字体大小直到它适合吗？我该怎么做？有人可以为我指出一个很好的资源吗？我没有在 Google/Stackoverflow 上找到合适的答案，但如果我错过了一个明显的答案，请务必将我发送到那里。

提前谢谢了。

# c# - 根据来自 postgresql DB 的 asp.net 中的日期时间对记录进行排序

> ID：13970783
> 
> 赞同：1
> 
> 时间：2012-12-20T11:05:43.213
> 
> 标签：c#, asp.net, npgsql

我想从“视频”表中选择最新的视频。我正在使用 PostgreSql Db 和 Npgsql 数据提供程序。我的应用程序在 Asp.net 中。

用户 ID 在列表 - userid_list 中。无论哪个人的 id 在列表中，只需要对他们的视频进行排序。

我将查询返回的所有记录存储在名为“videos_list”的列表中。

问题是视频是按用户 ID 排序的，即视频按一个 id 的 desc 顺序排列，然后是下一个，依此类推，但我不希望这样。我想检索这些 id 的所有视频，然后一次对所有内容进行排序。

```
 string query3 = "Select * from \"Videos\" where \"User_ID\" = :user_id Order by \"DateTimeUploaded\" desc"; 

    NpgsqlCommand cmd3 = new NpgsqlCommand(query3, con);

     for (int j = 0; j < userid_list.Count; j++)
     {
            cmd3.Parameters.AddWithValue("user_id", userid_list[j]);
            reader2 = cmd3.ExecuteReader();

            while (reader2.Read())
            {
                string Description = reader2.GetString(reader2.GetOrdinal("Description"));

                DateTime DateTimeUploaded = reader2.GetDateTime(reader2.GetOrdinal("DateTimeUploaded"));

                videos_list.Add(new VideosJson(Description, Transcript, ThumbnailUrl, VideoUrl, DateTimeUploaded));

            }
     } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:16:14.417

您已经对其进行了设计，以便循环访问用户并按降序检索*他们的视频，然后将它们作为一个组添加到列表中。*

```
User 1
    Video 3
    Video 2
    Video 1

User 2
    Video 6
    Video 5
    Video 4 
```

您应该执行以下操作之一

1.  修改您的 SQL 命令以一次过滤所有用户（即`"User_ID" = A or "User_ID" = B ...`按时间排序。
2.  将您的结果（以任何顺序）添加到一个大列表中，*然后*按时间降序对其进行排序，尽管这样不太友好。

# wordpress - Wordpress - Add custom quote author

> ID：13970792
> 
> 赞同：1
> 
> 时间：2012-12-20T11:06:05.013
> 
> 标签：wordpress

I want to create some quotes in my wordpress, but they always get the author "admin". Can I make the author like "Winston Churchill" ?

If so, can I add info about this author ? (like where he was born, etc.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:22:17.847

你的意思是说你需要一个单独的页面或链接，点击后你需要显示丘吉尔的名言？

如果是这种情况，您可以很好地创建一个页面，从仪表板中选择 New -> Page 并在其中放入您想要的任何内容，然后选择 Appearance -> Menu 并从菜单中选择您使用过的页面并将其放在菜单面板中并保存。刷新它，它应该希望工作。

不要忘记设置菜单区域。

# sql - How to query values from related arrays in PHP and display them in HTML table

> ID：13970802
> 
> 赞同：0
> 
> 时间：2012-12-20T11:06:35.320
> 
> 标签：sql, select, multidimensional-array, foreach, html-table

The following two-dimensional array stores information for books (1.ID, 2.Name, 3.Author ID, 4.Author Name, 5.Publisher ID, 6\. Publisher Name, 7\. Publisher Reputation):

```
$books = array(array('book_id'=>1, 'book_name'=>"BookA", 'author_id'=1, 
                     'author_name'=>"AuthorA", 'publisher_id'=>1,   
                     'publisher_name'=>"PublisherA", 'publisher_reputation'="good"),
               array('book_id'=>1, 'book_name'=>"BookA", 'author_id'=1, 
                     'author_name'=>"AuthorA", 'publisher_id'=>2,   
                     'publisher_name'=>"PublisherB", 'publisher_reputation'="bad")
               array('book_id'=>1, 'book_name'=>"BookA",  'author_id'=>2, 
                     'author_name'=>"AuthorB", 'publisher_id'=>1
                     'publisher_name'=>"PublisherA", 'publisher_reputation'=>"good"),
               array('book_id'=>1, 'book_name'=>"BookA",  'author_id'=>2, 
                     'author_name'=>"AuthorB", 'publisher_id'=>2
                     'publisher_name'=>"PublisherB", 'publisher_reputation'=>"bad"), 
```

A book can have several authors and several publishers. An author can be associated with several books. A publisher can be associated with several books. A publisher can only have one reputation (from list of values: "good","average","bad").

EDIT: The data are stored in 3 tables. author (author_id, author_name), book (book_id, book_name), publisher (publisher_id, publisher_name, publisher_reputation).

I would like to create an HTML table with the following columns:

1.  Book Name - Field lists specific book.
2.  Author(s) - Field lists all authors associated with the book.
3.  Publisher & Reputation - Field lists all publishers (and their reputations) associated with this book.

I am currently using the following code:

```
<?php function transform($books) {
        $result = array();
        foreach($books as $key => $book) {
            $book_id = $book['book_id'];
                if (!isset($result[$book_id])) {
                $result[$book_id] = array(
                        'author_name' => array(),
                        'publisher_name'.'publisher_reputation' => array(),
                            'book_name' => $book['book_name']
                );        
                }
         $result[$book_id]['publisher_name'.'publisher_reputation'] = 
         array_merge($result[$book_id]['publisher_name'.'publisher_reputation'], 
         array(($book['publisher_name'].'('.$book['publisher_reputation'].')'))); 
         $result[$book_id]['author_name'] = array_merge($result[$book_id] 
         ['author_name'], array(($book['author_name'])));
         }

         foreach($result as $key => $data) {
         $result[$key]['publisher_name'.'publisher_reputation'] = 
         array_unique($result[$key]['publisher_name'.'publisher_reputation']);
         $result[$key]['author_name'] = array_unique($result[$key]['author_name']);
         }
         return $result;
         }

$books = transform($books)
;?> 
```

My html code to create the table:

```
<table>
    <tr>
        <th>Book Name</th>
        <th>Author(s)</th>
        <th>Publisher(s) & Reputation(s)</th>
    </tr>

<?php foreach ($books as $book): ?>
<tr>
    <td><?php htmlout($book['book_name']); ?></td> 
    <td><?php foreach(($book['author_name']) as $author_name): ?>
        <?php htmlout($author_name);?><br /><?php endforeach; ?></td>
    <td><?php foreach(($book['publisher_name'.'publisher_reputation']) as    
          $publisher_namereputation): ?></td>
        <?php htmlout($publisher_namereputation);?><br /><?php endforeach; ?></td>
</tr>
<?php endforeach; ?> 
```

Resulting table (Table 1.):

```
Book Name       | Author(s)        | Publisher(s) & Reputation(s)
BookA             AuthorA            PublisherA(good)
                  AuthorB            PublisherB(bad) 
```

*   As desired: When I query "all books by AuthorA (WHERE author_id=1)," I get the above result.
*   As desired: When I query "all books published by PublisherA (WHERE publisher_id=1)," I get the above result.
*   **Problem:** When I query "all books published by a publisher with reputation = good (WHERE publisher_reputation = "good")," I get the following result:

Table 2.:

```
Book Name       | Author(s)        | Publisher(s) & Reputation(s)
BookA             AuthorA            PublisherA(good)
                  AuthorB 
```

PublisherB, who is also associated with the very same book(but has a "bad" reputation) is not displayed. I do understand that this is because the reputation was chosen from a list ("good", "average", "bad") whose values are not associated with any individual publisher_id (several publishers can have the same reputation). I tried to solve the problem by preparing the reputation list in the following way:

```
try
{
    $result = $pdo->query('SELECT publisher_id, publisher_reputation FROM publisher');
}
catch (PDOException $e)
{
    $error = 'Error fetching publisher reputation information!';
    include 'error.html.php';
    exit();
}
foreach ($result as $row)
{
    $reputations[] = array('publisher_id' => $row['publisher_id'],
    'publisher_reputation' => $row['publisher_reputation']);
}
(...) 
```

However, this gives me a list of reputations with repeated values (when several publishers with the same reputation are in the database).

**Question:** How can I design a query that returns Table 1 when I search for all book_names that are associated with a publisher_name with publisher_reputation = good? Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:11:40.973

我没有得到完整的视图。当我环顾您发布的任何内容时，我遇到了您错过的事情，以关闭 "$result = $pdo->query(...." 行中的括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:20:06.193

我假设您的数据库中有 3 个表，它们是 -
1）书籍 -> 存储书籍相关信息，外键为 publisherId
2）出版商 -> 存储出版商相关信息，其中 publisherId 为 PK
3）声誉 -> 一种 HREF 表 b /w 将两个表 PK 作为 FK 的书籍和出版商。

如果我猜对了，您可以考虑以下查询-

> SELECT * FROM books as B INNER JOIN publisher as P on P.publisherId = B.publisherId INNER JOIN 声誉为 R on (R.publisherId = B.publisherId AND R.publisherId = P.publisherId) WHERE R.Reputation ="GOOD"

# angularjs - Unable to access data from service

> ID：13970803
> 
> 赞同：1
> 
> 时间：2012-12-20T11:06:47.260
> 
> 标签：angularjs

I have a requirement where I want to retrieve a JSON object from the server. Below are two versions which do not work -

Version 1

```
app.service("authorization", ['$http', function($http){
  var authMap = [];
  $http.get('/authmap').success(function(data){this.authMap = data});
}]); 
```

Version 2

```
app.service("authorization", ['$http', function($http){
  var authMap = [];
  $http.get('/authmap').success(function(data){authMap = data});

  var getAuthMap = function(){return authMap};
}]); 
```

In version one I am injecting the service into my controller and accessing it as authorization.authMap, it returns an empty [].

In version two, I am accessing it as authorization.getAuthMap(). Here it gives me an error that no such method is defined on the object ?

What is wrong with both the methods ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:20:03.790

只需将变量作为该服务范围的一部分

```
app.service("authorization", ['$http', function($http){
    var authorizationScope = this;
    authorizationScope.authMap = [];
    $http.get('/authmap').success(function(data){authorizationScope .authMap = data});
}]); 
```

版本 2

```
app.service("authorization", ['$http', function($http){
    var authorizationScope = this;
    authorizationScope.authMap = [];
    $http.get('/authmap').success(function(data){authorizationScope.authMap = data});

    authorizationScope.getAuthMap = function(){return authorizationScope.authMap};
}]); 
```

这样，当您注入控制器时，您可以访问该变量或函数

```
function myController($scope, authorization){
    authorization.authMap //this is how you would access the variable here
    authorization.getAuthMap(); //this is how you would access the function
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:04:47.320

1.  您应该公开您的功能。
2.  您需要了解 $http 是一个异步调用。最简单的修复方法是将 $http 承诺返回给您的控制器并在那里解析数据。

所以：

```
app.service("authorization", ['$http', function($http){
  return {
     getAuthMap : function(){
        return $http.get('/authmap');
     }
  };
}]); 
```

在您的控制器中：

```
authorization.getAuthMap().then(function(data) {
    $scope.data = data;
}); 
```

如果数据很复杂并且应该在您的服务中处理，您可以在您的服务中使用 service $q 并将其承诺返回给您的控制器。这使得服务稍微复杂一些：

```
app.service("authorization", ['$http', '$q', function($http, $q) {

  var authMap;

  return {
     getAuthMap : function(){
        var deferred = $q.defer();
        var promise = deferred.promise;

        promise.then(function() {
           if (!authMap) {
              $http.get('/authmap').success(function(data) {
                 var changedData = data;
                 // do sth with data
                 authMap = changedData;

                 deferred.resolve(changedData);
              });
           } else {
              deferred.resolve(authMap)
           }
        });
        return deferred.promise;
     }
  };
}]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:44:26.783

您已经在另一篇文章中询问了版本 1，并在那里得到了回答：[Unable to set a class var in $http callback](https://stackoverflow.com/questions/13970981/unable-to-set-a-class-var-in-http-callback/13971560)

总结一下：success() 和 error() 方法是在函数上下文（即`this`）设置为全局上下文（即`window`）的情况下调用的。因此`this.authMap = data`将数据存储在 window.authMap 中，而不是在您的服务中。您需要创建一个闭包（通过定义一个局部变量并将其设置为`this`），然后在 success() 函数中使用该变量：

```
app.service("authorization", ['$http', function($http){
  this.authMap = [];
  var self = this;
  $http.get('/authmap')
     .success(function(data){
        self.authMap = data
     })
     .error(function(data, status){
        alert('Unable to authorize')
        console.log(status)
     })
}]); 
```

版本 2 有两个问题：

1.  与版本 1 相同的问题
2.  您正在使用 service()，因此服务函数的主体需要是 JavaScript 构造函数（因为 Angular 将通过本质上调用`new`构造函数来实例化服务）。因此，需要在以下位置定义公共属性（包括函数/方法）`this`：

```
app.service("authorization", ['$http', function($http){
   this.authMap = [];
   this.getAuthMap = function(){ return this.authMap };
   var self = this;
   $http.get('/authmap')
      .success(function(data){
         self.getAuthMap = data
      })
      .error(function(data, status){
         alert('Unable to authorize')
         console.log(status)
      })
}]); 
```

如果您想保持 authMap 私有，请改用 factory()：

```
app.factory("authorization", ['$http', function($http){
   var authMap = [];         // private data
   $http.get('/authmap')
      .success(function(data){
         authMap = data
      })
      .error(function(data, status){
         alert('Unable to authorize')
         console.log(status)
      })
   return {
      getAuthMap: function() { return authMap };
   }
}]); 
```

# c - Inline all the functions in C code with gcc

> ID：13970806
> 
> 赞同：1
> 
> 时间：2012-12-20T11:07:12.040
> 
> 标签：c, gcc, inline

I have many C programs without recursion. I want to get the program without user-defined function but the main function. GCC can do the [inline](http://gcc.gnu.org/onlinedocs/gcc/Inline.html) but that's in IR level so I can't get C code .

SOURCE:

```
int calc(int a , int b)
{
    a=a+b-2;
    return a ;
}

int main()
{
    int x=4,y=7;
    x=calc(x,y);
    return 0 ;
} 
```

TARGET:

```
int main()
{
    int x=4,y=7;
    int calc_A=x,calc_B=y;
    calc_A=calc_A+calc_B-2;
    x=calc_A;
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:15:16.863

gcc 提供了一个函数属性，叫做[`always_inline`](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Function-Attributes.html).

用法：

```
int add(int arg1, int arg2)__attribute__((always_inline)); // prototype
int add(int arg1, int arg2){
    return arg1+arg2;
} 
```

但是，您必须手动将此属性附加到每个函数。

我仍然*假设*您的所有函数都遵循必须内联的规则。例如，没有 goto、递归等。

# ios - 将对 NSManagedObject 的属性的引用传递给后台线程

> ID：13970807
> 
> 赞同：0
> 
> 时间：2012-12-20T11:07:18.143
> 
> 标签：ios, core-data, thread-safety, nsmanagedobject, nsmanagedobjectcontext

我想要做的是：

```
Product *product = [fetchResult lastObject];

NSString *productID = product.atProductID;

dispatch_async(queue, ^(void){
// Something with productID like
NSLog(@"productID is %@", productID);
}); 
```

这样做是否安全，或者我是否需要为我的辅助队列创建另一个上下文并通过其内部 ID 获取产品，然后处理其 atProductID 属性？

**更新：** 嗯，它表明这实际上是不安全的。一个简单的解决方案是制作一个 productID 字符串的副本：

```
Product *product = [fetchResult lastObject];

NSString *productID = [product.atProductID copy];

dispatch_async(queue, ^(void){
// Something with productID like
NSLog(@"productID is %@", productID);
}); 
```

这将是安全的，因为您不会在后台线程上保留对上下文或其派生的任何引用。这样做的原因是上下文缓存了它从持久存储中获取的数据，并且它自己管理该缓存。而且，无论您是否保留指向该缓存的指针，它都可能更改或销毁它，除非它在上下文的线程上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:48:25.973

你的代码看起来不错。如果您打算对它做一些事情，例如长提取或更改托管对象，您只需要一个单独的托管对象上下文。

Also, you can use the variables in the scope of your `async` block without problem. That's the great advantage of CGD. These threads have contained memory, so I would expect strings to be copied. You can check by logging the pointer address.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T11:30:46.103

以前没有使用过 dispatch_async 但这段代码对我来说看起来并不健康

您正在使用在一个线程中创建的变量并将其直接传递到另一个代码块。这样做的正确方法是将对象/参数传递给方法。

需要注意的一件事是，您的问题并非 100% 准确。当你执行

```
NSString *productID = product.atProductID; 
```

您正在创建一个与您的 NSManagedObject（即产品）没有关联的全新 NSString 对象。因此，您的问题是关于为 dispatch_async 传递参数，并且与 NSManagedObjects 没有太大关系

# jquery - Change CSS Style with jquery in following HTML

> ID：13970809
> 
> 赞同：0
> 
> 时间：2012-12-20T11:07:25.237
> 
> 标签：jquery, asp.net, css, aspmenu-control

I am working on one of the asp.net project which uses Drop-down Menus from from [Dynamic Drive](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)

After using it with asp.net Menu control asp.net automatically adds styles to it. I want to replace part of `CSS Style` using jQuery from the following code. I would appreciate help in this regards.

```
<li class="" aria-haspopup="Menu1:submenu:11" role="menuitem" style="position: relative; float: left; z-index: 100;">
<a href="#?PageId=49&amp;Language=en-US" class="popout level1 static" tabindex="-1" style="padding-right: 10px;">MAIN MENU<img style="border:0;" class="downarrowclass1" src="../down.gif"></a>
    <ul class="" id="Menu1:submenu:11" style="display: none; position: absolute; top: 28px; left: 0px; visibility: visible; width: 186px;">
        <li role="menuitem" class="" style="position: relative;">
            <a href="#?PageId=50&amp;Language=en-US&amp;" class="level2 dynamic" tabindex="-1">SUB MENU</a>
        </li>
        <li role="menuitem" class="" style="position: relative;">
            <a href="#?PageId=52&amp;Language=en-US&amp;" class="level2 dynamic" tabindex="-1">SUB MENU/a>
        </li>
        <li role="menuitem" class="" style="position: relative;">
            <a href="#?PageId=51&amp;Language=en-US&amp;" class="level2 dynamic" tabindex="-1">SUB MENU</a>
        </li>
    </ul>
</li> 
```

I want to change the style value of `top: 28px;` in `UL` with `id="Menu1:submenu:11"` to `top:-58px`; I am not sure how I can do.

HTML code is exact copy of asp.net web form in the browse.

I am not sure how I can reference to element with id `Menu1:submenu:11` using jQuery & over right the whole style property `style="display: none; position: absolute; top: 28px; left: 0px; visibility: visible; width: 186px;"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:10:13.827

一旦您知道如何，所有样式更改都很容易：

```
 $('#Menu1:submenu:11').css('top':-58); 
```

有关更多详细信息，请参见[此处](http://api.jquery.com/css/)

**编辑**

我刚刚看到您的问题是您无法访问选择器：`$('#Menu1:submenu:11')`？我建议提交另一个问题或搜索更多以找到此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:10:53.543

```
$('#Menu1:submenu:11').style.top = "-58px"; 
```

# java - Always show the selected item, when a edittext has focus inside a listview

> ID：13970811
> 
> 赞同：1
> 
> 时间：2012-12-20T11:07:31.330
> 
> 标签：java, android, android-layout

I have a dialog that contains a listview, this listview contains edittext boxes.

The problem is that when the edittext box is selected the softkeyboard will cover it up.

So far i have tried with limited success calling this in the dialogs initialisation:

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

What happens with this is whenever I select an edittext the dialog resizes exactly how I want but it also unfocuses the edittext at the same time. A similar outcome occurs when using `SOFT_INPUT_ADJUST_PAN` resetting the pan when the edittext is reselected.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:13:11.020

您可以尝试将其添加到清单中，

```
android:windowSoftInputMode="adjustPan" > 
```

# java - android在某些情况下无法写入屏幕

> ID：13970813
> 
> 赞同：0
> 
> 时间：2012-12-20T11:07:34.797
> 
> 标签：java, android, session, terminal, screen

我正在尝试使用 android 中的库连接到终端仿真器，这将连接到串行设备并应该向我显示发送/接收的数据。在这两种情况下，我应该能够通过终端下方的文本框或通过输入终端本身并在键盘上按 Enter 来通过连接发送数据。库中有一个名为“write”的函数可以写入模拟器屏幕。但是，有时这有效，有时则无效。

在我的代码中标记为 [1]、[2] 和 [3] 的行中，它可以正常工作，对于 [4] 和 [5] 则不能。有人能看出为什么吗？我在 4 和 5 之前创建了终端会话，所以它应该对他们有用，但不是。然而，当我开始为 1,2,3 调用 write 时，它​​工作正常吗？！

```
public class TermActivity extends Activity
{
private EditText mEntry;
private EmulatorView mEmulatorView;
private TermSession mSession;
private InputStream bis;
private OutputStream bos;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.term_activity);

    /* Text entry box at the bottom of the activity.  Note that you can
       also send input (whether from a hardware device or soft keyboard)
       directly to the EmulatorView. */
    mEntry = (EditText) findViewById(R.id.term_entry);
    mEntry.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int action, KeyEvent ev) {
            // Ignore enter-key-up events
            if (ev != null && ev.getAction() == KeyEvent.ACTION_UP) {
                return false;
            }
            // Don't try to send something if we're not connected yet
            TermSession session = mSession;
            if (mSession == null) {
                return true;
            }

            Editable e = (Editable) v.getText();
            // Write to the terminal session
            //for when i press enter on keyboard.
            [1] session.write(e.toString());
            [2] session.write("test");
            [3] session.write('\r');
            TextKeyListener.clear(e);
            return true;
        }
    });

    /**
     * EmulatorView setup.
     */
    EmulatorView view = (EmulatorView) findViewById(R.id.emulatorView);
    mEmulatorView = view;

    /* Let the EmulatorView know the screen's density. */
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    view.setDensity(metrics);

    /* Create a TermSession. */
    Intent myIntent = getIntent();
    String sessionType = myIntent.getStringExtra("type");
    TermSession session;

    if (sessionType != null && sessionType.equals("telnet")) {
        /* Telnet connection: we need to do the network connect on a
           separate thread, so kick that off and wait for it to finish. */
      //  connectToTelnet(myIntent.getStringExtra("host"));

         byte[] a = new byte[]{'y','y', 'y', 'y', 'y'};
         byte[] b = new byte[]{'a','a', 'l', 'l', 'o'};
        bis = new ByteArrayInputStream(b);
        bos = new ByteArrayOutputStream();

         session = new TelnetSession(bis, bos);

         mEmulatorView.attachSession(session);
         [4]session.write("test");
         mSession = session;
         [5]session.write("test");

        return;
    } else {
        // Create a local shell session.
        session = createLocalTermSession();
        mSession = session;
    }

    /* Attach the TermSession to the EmulatorView. */
    view.attachSession(session);

    /* That's all you have to do!  The EmulatorView will call the attached
       TermSession's initializeEmulator() automatically, once it can
       calculate the appropriate screen size for the terminal emulator. */
}

Socket mSocket;
private static final int MSG_CONNECTED = 1;

/* Create the TermSession which will handle the Telnet protocol and
   terminal emulation. */
private void createTelnetSession() {
    Socket socket = mSocket;

    // Get the socket's input and output streams
    InputStream termIn;
    OutputStream termOut;
    try {
       termIn = socket.getInputStream();
       termOut = socket.getOutputStream();
    } catch (IOException e) {
        //Handle exception here
        return;
    }

    /* Create the TermSession and attach it to the view.  See the
       TelnetSession class for details. */
    byte[] a = new byte[]{'y','y', 'y', 'y', 'y'};
    byte[] b = new byte[]{'a','a', 'l', 'l', 'o'};
    bis = new ByteArrayInputStream(b);
    bos = new ByteArrayOutputStream();

TermSession session = new TelnetSession(bis, bos);  
    mEmulatorView.attachSession(session);
    mSession = session;
    session.write("test");
    try {
        bos.write(a);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:37:09.910

终端仿真器需要几秒钟来初始化连接并启动。在此之前，写入模拟器的字符串会被静默删除。

这样你就可以：

*   如果不需要立即写入模拟器，请忽略此
*   等待一段固定的时间
*   检查终端模拟器api，看看是否有api来询问连接状态

# javascript - Check if element is in hashset

> ID：13970814
> 
> 赞同：2
> 
> 时间：2012-12-20T11:07:41.250
> 
> 标签：javascript, jquery, hashset

How can I check whether a `hashset` contains a particular value or not in `javascript`? I have tried the following which is not working:

```
if (hashset.contains(finalDate)) {
    alert("inside if");
} 
```

My js code:

```
$.each(cdata.lines, function(idx, line){
    // line.hashsetvariable is my hashset which contain all dates and 
    // let finaldate is 2012-19-12 
    // I want to check this date in my hashset.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:15:42.740

如果您指的哈希集是一个对象（或哈希...），那么您可以通过以下方式检查它是否包含键：

```
var hash = { foo: 'bar', baz: 'foobar' };
'foo' in hash; 
```

如果您寻找特定的价值：

```
function containsValue(hash, value) {
    for (var prop in hash) {
        if (hash[prop] === value) {
            return true;
        }
        return false;
    }
} 
```

如果你想做一些更“全局”的事情（我不推荐！）你可以改变 Object 的原型，比如：

```
Object.prototype.containsValue = function (value) {
    for (var prop in this) {
        if (this[prop] === value) {
            return true;
        }
    }
    return false;
} 
```

在这种情况下：

```
var test = { foo: 'bar' };
test.containsValue('bar'); //true
test.containsValue('foobar'); //false 
```

# php - php代码语法错误

> ID：13970816
> 
> 赞同：1
> 
> 时间：2012-12-20T11:07:45.183
> 
> 标签：php, wordpress, comments, gd

谁能告诉我这个 php 代码片段有什么问题？我正在尝试将 GD Star Rating 集成到我的 wordpress 评论中，并从[http://www.placementedge.com/blog/gd-star-rating-comment-integration-with-wordpress-3-0/#comment 获取此代码-2952](http://www.placementedge.com/blog/gd-star-rating-comment-integration-with-wordpress-3-0/#comment-2952) - 谢谢！

```
<?php
$form_args = array(
    'title_reply_to' => __('Reply to %s'), // SHOWS SYNTAX ERROR
    'title_reply' => __('Post a Review'),   // SHOWS SYNTAX ERROR
    'comment_field' => wp_gdsr_comment_integrate_multi_rating($multi_set_id = 1,     
$template_id = 0, $value = 0, $stars_set = "oxygen", $stars_size = 24, 
$stars_set_ie6 = "oxygen", $echo = false).'<p class="comment-  
form-comment"><label for="comment">My 
Review</label><br /><textarea id="comment" name="comment" aria-required="true"></textarea></p>',
'comment_notes_after' => __(''));
comment_form( $form_args );
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:10:58.253

您需要在代码中更改`=&gt;`为`=>`。

```
<?php
$form_args = array(
    'title_reply_to' => __('Reply to %s'), // SHOWS SYNTAX ERROR
    'title_reply' => __('Post a Review'),   // SHOWS SYNTAX ERROR
    'comment_field' => wp_gdsr_comment_integrate_multi_rating($multi_set_id = 1,     
$template_id = 0, $value = 0, $stars_set = &quot;oxygen&quot;, $stars_size = 24, 
$stars_set_ie6 = &quot;oxygen&quot;, $echo = false).'&lt;p class=&quot;comment-  
form-comment&quot;&gt;&lt;label for=&quot;comment&quot;&gt;My 
Review&lt;/label&gt;&lt;br /&gt;&lt;textarea id=&quot;comment&quot; name=&
quot;comment&quot; aria-required=&quot;true&quot;&gt;&lt;/textarea&gt;&lt;/p&gt;',
'comment_notes_after' => __(''));
comment_form( $form_args ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:12:26.957

用 >替换`&gt;`它不在引号中的 ''

```
'title_reply_to' => __('Reply to %s'),
'title_reply' => __('Post a Review'), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:13:07.557

```
<?php
$form_args = array(
    'title_reply_to' => __('Reply to %s'), // SHOWS SYNTAX ERROR
    'title_reply' => __('Post a Review'),   // SHOWS SYNTAX ERROR
    'comment_field' => wp_gdsr_comment_integrate_multi_rating($multi_set_id = 1,     
$template_id = 0, $value = 0, $stars_set = "oxygen", $stars_size = 24, 
$stars_set_ie6 = "oxygen", $echo = false).'&lt;p class="comment-  
form-comment">&lt;label for="comment">My 
Review&lt;/label>&lt;br />&lt;textarea id="comment" name=&
quot;comment" aria-required="true">&lt;/textarea>&lt;/p>',
'comment_notes_after' => __(''));
comment_form( $form_args ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:10:58.417

全部替换`&gt;`为`>`

它是 PHP，而不是 HTML。

# php - 按键排序关联数组

> ID：13970819
> 
> 赞同：0
> 
> 时间：2012-12-20T11:07:51.220
> 
> 标签：php

我想按键对关联数组进行排序。我使用 ksort 函数，但它返回 1 而不是数组。下面是我的代码。

```
$states=array( "DD"=>"Daman and Diu", "LD"=>"Lakshdweep", "DN"=>"Dadra
and nagar haveli", "AN"=>"Andaman and Nicobar island", "SK"=>"Sikkim",
"MZ"=>"Mizoram", "GA"=>"Goa", "PY"=>"Puduchery", "CH"=>"Chandigarh",
"ML"=>"Meghalaya", "AR"=>"Arunachal Pradesh", "TR"=>"Tripura",
"HP"=>"Himanchal Pradesh", "NL"=>"Nagaland", "PB"=>"Punjab",
"CG"=>"Chattisgarh", "JK"=>"Jammu and Kashmir", "UA"=>"Uttrakhand",
"HR"=>"Haryana", "JH"=>"Jharkhand", "KL"=>"Kerela", "MN"=>"Manipur" ,
"AS"=>"Assam", "RJ"=>"Rajasthan", "MP"=>"Madhya Pradesh",
"KA"=>"Karnataka", "BR"=>"Bihar", "OR"=>"Orissa", "GJ"=>"Gujrat",
"AP"=>"Andhra Pradesh", "TN"=>"TamilNadu", "DL"=>"Delhi",
"MH"=>"Maharastra", "WB"=>"WestBengal", "UP"=>"UttarPradesh",
); 

 $states = ksort($states);
 print_r($states); 
```

我得到的输出是：`1`

我想要数组而不是 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:10:04.687

不要做`$states = ksort($states);`。
做`ksort($states);`。

*sort 函数直接改变数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:10:08.520

不要将 ksort 的结果重新影响到您的数组， ksort 通过引用获取一个数组：

```
$states=array(
"DD"=>"Daman and Diu", "LD"=>"Lakshdweep", "DN"=>"Dadra and nagar haveli", "AN"=>"Andaman and Nicobar island", "SK"=>"Sikkim", "MZ"=>"Mizoram", "GA"=>"Goa", "PY"=>"Puduchery", "CH"=>"Chandigarh", "ML"=>"Meghalaya", "AR"=>"Arunachal Pradesh", "TR"=>"Tripura", "HP"=>"Himanchal Pradesh", "NL"=>"Nagaland", "PB"=>"Punjab", "CG"=>"Chattisgarh", "JK"=>"Jammu and Kashmir", "UA"=>"Uttrakhand", "HR"=>"Haryana", "JH"=>"Jharkhand", "KL"=>"Kerela", "MN"=>"Manipur" , "AS"=>"Assam", "RJ"=>"Rajasthan", "MP"=>"Madhya Pradesh", "KA"=>"Karnataka", "BR"=>"Bihar", "OR"=>"Orissa", "GJ"=>"Gujrat", "AP"=>"Andhra Pradesh", "TN"=>"TamilNadu", "DL"=>"Delhi", "MH"=>"Maharastra", "WB"=>"WestBengal", "UP"=>"UttarPradesh"
    );

ksort($states);
print_r($states); 
```

更多关于 ksort的信息在[这里](http://php.net/manual/en/function.ksort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:10:40.327

使用**ksort()**按其键对数组进行排序

不要分配结果。排序后尝试打印如下，

```
ksort($states);
print_r($states); 
```

# php - 在 PHP 中使用 __clone？

> ID：13970820
> 
> 赞同：20
> 
> 时间：2012-12-20T11:07:54.260
> 
> 标签：php, object

我有一个类 a 并使用 new 实例化它

```
$obja = new a; 
```

我知道以下两行之间的区别

```
$obja2 = $ojba;
$obja2 = clone $obja; 
```

但是，即使您在类 a 中声明或不声明 __clone，第一行 $obja2 引用 $obja 内存空间，第二行创建 $obja 的副本。到这里我才清楚。

那为什么php有一个神奇的方法__clone？当我们使用 $obja2 = clone $obja; 时，它是否仅用于执行 __clone 中编写的一组代码？

有人请帮助更好地了解它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T11:10:47.073

> ```
> void __clone ( void ) 
> ```
> 
> 克隆完成后，如果`__clone()`定义了方法，则将调用新创建的对象的`__clone()`方法，以允许任何需要更改的必要属性。
> 
> [http://php.net/manual/en/language.oop5.cloning.php#object.clone](http://php.net/manual/en/language.oop5.cloning.php#object.clone)

所以是的，这是操作完成后的*回调。*`clone`不多也不少。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-20T11:10:28.207

PHP 中的`clone`关键字表示**浅拷贝**。

为了实现**深拷贝**，你需要实现魔术方法。`__clone`

如果您克隆一个对象，该对象的成员是另一个使用 simple`clone`关键字的类的对象，您将保持对第二个对象的相同引用。

这就是**深层副本**派上用场的地方，如下所示：

```
public function __clone()
{
    $this->someOtherObject = clone $this->someOtherObject;
} 
```

这样，您就可以保证克隆是**deep**，这意味着它也会克隆成员对象，而不是只保留对它们的原始引用。

# python - 用于从文件发布数据的 Python 等效于 curl

> ID：13970821
> 
> 赞同：4
> 
> 时间：2012-12-20T11:07:58.377
> 
> 标签：python, curl

我正在为下面的 curl 命令寻找 Python 等效项。

`curl http://localhost/x/y/update -H 'Content-type: text/xml; charset=utf-8' --data-binary @filename.xml`

顺便说一句，我通常使用下面的代码将数据作为字符串发布。

`curl http://localhost/x/y/update --data '<data>the data is here</data>' -H 'Content-type:text/xml; charset=utf-8'`

```
baseurl = http://localhost/x/y
thedata = '<data>the data is here</data>'

headers = {"Content-type": "text/xml", "charset": "utf-8"}
thequery = urlparse.urljoin(baseurl, thedata, querycontext)
therequest = urllib2.Request(thequery, headers)
theresponse = urllib2.urlopen(therequest) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:23:18.243

Python[要求](http://docs.python-requests.org/en/latest/)它为这类东西提供一个很棒的库。你所拥有的可以通过以下方式简单地完成：

```
import requests

headers = {'content-type': 'text/xml; charset=utf-8'}
response = requests.post(url, data="<data>the data is here</data>", headers=headers)
with open("filename.xml", "w") as fd:
    fd.write(response.text) 
```

pycurl 和其他一些用于 python 的 url 和 http 客户端库的问题在于，它需要比实现相对简单的东西所需的更多的努力。[要求](http://docs.python-requests.org/en/latest/)它对用户更友好，我认为这是您在这个问题上所寻找的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-03T15:30:41.373

问题是关于**上传**文件，而接受的答案只是**保存到文件**！

下面是正确的代码：

```
import requests

 # Here you set the file you want to upload and it's content type 
files = {'upload_file': ('filename.xml', open('filename.xml','rb'), 'text/xml' }

headers = {} # Do not set content type here, let the library do its job

response = requests.post(url, 
              data="<data>the data is here</data>", 
              files=files,
              headers=headers)
fd = open("output-response.txt", "w")
fd.write(response.text)
fd.close() 
```

上面的代码将从中读取一个文件`filename.xml`并通过 POST 上传它，然后它还将存储到 收到`output-response.txt`的**响应中。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:15:51.860

查看名为[pycurl的 curl 的 python 包装器](http://pycurl.sourceforge.net/)

它真的被广泛使用，所以有很多关于如何在互联网上使用图书馆的例子。

如果您刚刚开始，那么可能值得看看[愤怒的对象网站](http://www.angryobjects.com/2011/10/15/http-with-python-pycurl-by-example/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:22:26.963

使用名为 Requests 的漂亮 python 模块它可以完成 90% 的 curl 选项，而且它也可以在 Windows 上不编译也能工作。

[https://github.com/kennethreitz/requests](https://github.com/kennethreitz/requests)

与 curl、urrlib、urrlib2 或 httplib、httplib2 相比，它非常容易...... :)

# qt - 如何使用 cuda 构建 Qt5 项目？

> ID：13970824
> 
> 赞同：1
> 
> 时间：2012-12-20T11:08:04.307
> 
> 标签：qt, cuda, qt5

我有一个用 Qt（Win32，VS2010）和 CUDA 编写的项目，我的 cu 文件包含 Qt 头文件。当我尝试使用新的 Qt 5.0（Qt 4.8.3 可以）构建我的项目时，出现以下错误：

```
C:/Qt/Qt5.0.0/5.0.0/msvc2010/include\QtCore/qobject_impl.h(82): error: too many initializer values

C:/Qt/Qt5.0.0/5.0.0/msvc2010/include\QtCore/qobject_impl.h(85): error: too many initializer values

C:/Qt/Qt5.0.0/5.0.0/msvc2010/include\QtCore/qobject_impl.h(89): error: too many initializer values 
```

我创建了一个简单的项目来重现该错误并被重现。我相信任何带有 CUDA 的 Qt 项目都可以重复使用 Qt 头文件。但是，我添加了简单的代码来重现下面的错误。谁能帮我？

test1.pro 文件：

```
QT       += core
QT       -= gui

TARGET = qt_cuda_test
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

OTHER_FILES += \
    kernel.cu

INCLUDEPATH += $$quote($$(CUDA_INC_PATH))
CUDA_SOURCES    +=  kernel.cu

CUDA_SDK = "C:/ProgramData/NVIDIA Corporation/NVIDIA GPU Computing SDK 5.0/C"   # Path to cuda SDK install
CUDA_DIR = "C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v5.0"            # Path to cuda toolkit install
SYSTEM_NAME = Win32         # Depending on your system either 'Win32', 'x64', or 'Win64'
SYSTEM_TYPE = 32            # '32' or '64', depending on your system
CUDA_ARCH = sm_20           # Type of CUDA architecture, for example 'compute_10', 'compute_11', 'sm_10'
NVCC_OPTIONS = --use_fast_math

# include paths
INCLUDEPATH += $$CUDA_DIR/include \
               $$CUDA_SDK/common/inc/ \
               $$CUDA_SDK/../shared/inc/ \

# library directories
QMAKE_LIBDIR += $$CUDA_DIR/lib/$$SYSTEM_NAME \
                $$CUDA_SDK/common/lib/$$SYSTEM_NAME \
                $$CUDA_SDK/../shared/lib/$$SYSTEM_NAME
# Add the necessary libraries
LIBS += -lcuda -lcudart

# The following library conflicts with something in Cuda
QMAKE_LFLAGS_RELEASE = /NODEFAULTLIB:msvcrt.lib

# The following makes sure all path names (which often include spaces) are put between quotation marks
CUDA_INC = $$join(INCLUDEPATH,'" -I"','-I"','"')

# Configuration of the Cuda compiler
cuda.input = CUDA_SOURCES
cuda.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
cuda.commands = $$CUDA_DIR/bin/nvcc.exe $$NVCC_OPTIONS $$CUDA_INC -I"C:/Qt/Qt5.0.0/5.0.0/msvc2010/include" $$LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
cuda.dependency_type = TYPE_C
QMAKE_EXTRA_COMPILERS += cuda 
```

kernel.cu 文件：

```
#include <QtCore/QCoreApplication>
#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <stdio.h>

cudaError_t addWithCuda(int *c, const int *a, const int *b, size_t size);

__global__ void addKernel(int *c, const int *a, const int *b)
{
    int i = threadIdx.x;
    c[i] = a[i] + b[i];
}

int main()
{
    const int arraySize = 5;
    const int a[arraySize] = { 1, 2, 3, 4, 5 };
    const int b[arraySize] = { 10, 20, 30, 40, 50 };
    int c[arraySize] = { 0 };

    cudaError_t cudaStatus = addWithCuda(c, a, b, arraySize);
    return 0;
}

// do something with cuda
cudaError_t addWithCuda(int *c, const int *a, const int *b, size_t size)
{
    int *dev_a = 0;
    int *dev_b = 0;
    int *dev_c = 0;
    cudaError_t cudaStatus;
} 
```

# c# - 通过包含字符串的 id 从服务器端查找在运行时添加的 asp 控件

> ID：13970825
> 
> 赞同：0
> 
> 时间：2012-12-20T11:08:05.150
> 
> 标签：c#, jquery, asp.net, telerik

我想在客户端对标签单击执行一些操作。所以我有一个看法：

```
<telerik:RadMultiPage runat="server" ID="rmpRightBar">
                        <telerik:RadPageView runat="server" ID="rpvHelpDetails">
                            //some code
                        </telerik:RadPageView>
                        <telerik:RadPageView runat="server" ID="rpvSearchDetails">
                            <asp:Table runat="server" ID="tblSearchResult">
                            </asp:Table>
                        </telerik:RadPageView>
                    </telerik:RadMultiPage> 
```

以及我在运行时将标签添加到我的视图表的代码隐藏：

```
private void SearchResultShow(IEnumerable<HelpModel> helpCollection)
    {
        var helpResultRow = new TableRow();

        foreach (var help in helpCollection)
        {
            var helpCell = new TableCell();
            var label = new Label();

            label.ID = "SearchResult_" + help.ID;
            label.Text = help.Title;
            helpCell.Controls.Add(label);

            helpResultRow.Cells.Add(helpCell);
        }

        tblSearchResult.Rows.Add(helpResultRow);
    } 
```

然后我想在客户端访问我的标签并在点击时执行一些操作。

JavaSctipt 代码：

```
$(document).ready(function () {
    $('[id*=SearchResult_]').click(function () {
        alert("Handler for .click() called.");
    });
}); 
```

由于我有 2 个网页浏览量，我在它们之间切换。在我切换视图后，我的 javascript 不起作用。

如何使用 jquery 访问运行时通过其 id 的一部分添加的 asp 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:39:33.943

我知道这不是类的用途，但为什么不使用它们呢？

您可以按类引用它们，而不是通过 ID 引用您的元素。一个警告是确保您没有使用任何样式规则的类（您可以通过选择任意名称轻松避免）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:19:03.410

在您的页面中添加一个`RadScriptBlock`并将您的`javascript`代码放入其中。然后将它`RadScriptBlock`的 ID 添加到您`ajax settings`用于切换的`views`.

# c# - expand 在查询中做了什么？

> ID：13970829
> 
> 赞同：2
> 
> 时间：2012-12-20T11:08:19.823
> 
> 标签：c#, linq, linq-to-entities

我是 LINQ 的新手。

我有以下查询，我不知道它代表什么。

```
 var query = (from p in data.First
                                 .Expand("Second")
                                 .Expand("Second/Third")
                                 .Expand("Second/Third/Forth")
                                 .Expand("Second/Fifth")
                     where p.Second.Third.Property1== "name"
                     select p); 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:12:14.127

这很可能是 WCF 数据服务，用于急切加载相关数据 - 请参阅[http://msdn.microsoft.com/en-us/library/cc679728.aspx](http://msdn.microsoft.com/en-us/library/cc679728.aspx)。

它将 $expand 查询选项添加到生成的 uri。有关详细信息，请参阅[http://www.odata.org/documentation/uri-conventions#ExpandSystemQueryOption 。](http://www.odata.org/documentation/uri-conventions#ExpandSystemQueryOption)

# javascript - 如何在html中捕获网页的屏幕截图

> ID：13970831
> 
> 赞同：1
> 
> 时间：2012-12-20T11:08:24.167
> 
> 标签：javascript, html

> **可能重复：**
> [如何截取网页的屏幕截图？](https://stackoverflow.com/questions/701798/how-to-take-a-screen-shot-of-a-web-page)
> [如何使用 JavaScript 截取 div 的屏幕截图？](https://stackoverflow.com/questions/6887183/how-to-take-screen-shot-of-a-div-with-javascript)

我有一个网页，当我单击捕获按钮时，它应该捕获网页的屏幕并将其保存在根文件夹中或通过电子邮件将其发送到给定的电子邮件。是否可以在 html5 和 java 脚本中执行或不执行

# c++ - 多重定义错误

> ID：13970833
> 
> 赞同：0
> 
> 时间：2012-12-20T11:08:29.817
> 
> 标签：c++, class

我有一个类文件：grid.cpp

```
#include <iostream>
#define SIZE 10
using namespace std;
class Grid
{
private:
    char **ptr;

public:
    Grid(void);
    void show();
};

Grid::Grid()
{
    // sth ...
}

void Grid::show()
{
    // sth ...
} 
```

当我构建我的主类时，编译器失败了。

```
|15|multiple definition of `Grid::Grid()'| 
|28|multiple definition of `Grid::show()'| 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:09:50.737

`inline`问题是在标题中保留非定义。任何一个：

*   将定义移动到实现文件
*   制作它们`inline`。这可以通过两种方式实现：
    *   明确标记：`inline void Grid::show() { .... }`
    *   移动类定义中的定义，它们将被隐式`inline`

此外，使用包含警卫（尽管这会导致不同的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:11:15.467

您可能包含`.cpp`文件而不是`.h`.

您需要将您的`.cpp`分成两个文件。只拥有一份 的副本，`.cpp`并且拥有任意数量的副本`.h.`（使用`#include`）。

您的文件在传递给编译器之前会进行预处理。`#include`可以看出只是简单地将包含文件的内容直接复制到当前文件中。`C++`可以处理多个声明，但不能处理多个`non-inline`定义。确保您只有内联类函数定义（如果有）。

# wordpress - 从 Mamp 转移 WordPress 网站

> ID：13970837
> 
> 赞同：0
> 
> 时间：2012-12-20T11:08:45.777
> 
> 标签：wordpress, mamp

我一直在本地（Mamp）上处理我的 WordPress 网站，现在已经将 wp-content 文件夹通过 ftp 传输到我在 123-reg 上的实时网址。

该网站在 123-reg 上运行良好，我已经导入了我所有的插件、帖子和图像。

我遇到的问题以及我一直在努力解决的问题是如何将我的所有插件设置从本地版本转移到实时版本。我知道我可以租用实时站点上的所有插件详细信息，但是我在某些插件中创建了联系表格等，并且真的不想租用所有字段等。

我也从本地版本中导出了 SQL 文件，尽管我不确定在何处或如何将其导入新站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:54:33.553

阅读有关[移动 WordPress](http://codex.wordpress.org/Moving_WordPress)的 WordPress Codex 页面是一个好主意，但我对[Duplicator](http://wordpress.org/extend/plugins/duplicator/)非常幸运。这是一个很棒的插件，对我来说几乎没有什么问题。

以下是他们的部分描述：

> Duplicator 插件旨在让 WordPress 管理员能够通过 3 个简单的步骤将站点从一个位置迁移到另一个位置。只需创建一个包，下载并安装。无需更改所有设置并重新运行导入/导出脚本。该插件还用作简单的备份实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:08:01.907

如果您使用 phpmyadmin，应该很简单。我知道你说你有数据库，但我也会介绍这一步。

让我们从头开始。复制您的 wp_content 文件夹。删除远程服务器上 wp_content 文件夹的内容。

先不要去网站，先去你本地的 phpMyAdmin ( [http://localhost/phpmyadmin/](http://localhost/phpmyadmin/) ) 然后导出本地数据库。导出时，请确保导出整个数据库，而不仅仅是特定表。保存的文件应该以您的数据库命名，而不是 wp_posts.sql 之类的名称。其次，转到您托管站点的 phpMyAdmin，选择 WP 数据库中的所有表并删除它们。

是的，您将删除您网站上的数据库（您应该删除的表名示例：wp_posts、wp_taxonomy、wp_users 等。然后只需使用导入功能并浏览到您保存的数据库。然后您就可以去到站点并像在本地一样登录。插件设置应该都是一样的。

# c++ - lambda比较是确定性的吗？

> ID：13970840
> 
> 赞同：16
> 
> 时间：2012-12-20T11:08:53.543
> 
> 标签：c++, c++11, lambda

众所周知，比较两个匹配的字符串文字可以导致相等：

```
"hello" == "hello" //could be true or false 
```

同样适用于 lambda：

```
[](){} == [](){} //false - guaranteed? 
```

编译器是否可以随意评估它，还是保证它会评估为`false`？合法吗？上面的实际比较是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T11:12:42.667

您无法比较 lambda 的相等性。您在那个小片段中看到的是 lambdas 被转换为函数指针，然后比较函数指针。无法保证这些函数指针相同或不同，这意味着结果可以是`true`或`false`。

# twitter-bootstrap - Bootstrap 中的 Scrollspy 不起作用

> ID：13970841
> 
> 赞同：0
> 
> 时间：2012-12-20T11:08:56.383
> 
> 标签：twitter-bootstrap

简单的问题，有人帮忙吗？对此感到困惑。

有问题的导航栏在页面加载时被隐藏，并在表单提交后与所有内容一起显示。

这是导航栏代码：

```
<div class="navbar" id="mainnav">
<navbar inner code><ul><li's></li's></ul></navbarcode></div>

<div id="contentwrap" class="row" data-spy="scroll" data-target="#mainnav">
Content with all the anchors
</div> 
```

它不会将自己附加到屏幕上，也不会在我滚动或其他任何内容时监视内容。

不太确定。我正在使用引导程序，因此包含所有相关文件。我已经逐字复制了多个示例，但无法正常工作。

这是一个带有完整代码的 jsfiddle：http: [//jsfiddle.net/ccRnM/7/](http://jsfiddle.net/ccRnM/7/)

注意：此导航栏不在页面顶部，有一个图像设置在其上方，我希望能够滚动到页面内容并让导航栏保持不变，就像他们在示例中所做的那样在引导站点上。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T17:56:53.437

这是执行此操作的一种方法。 [http://jsfiddle.net/panchroma/8jPNm/](http://jsfiddle.net/panchroma/8jPNm/)

我没有通过javascript使用scrollspy

```
<div class="navbar" id="mainnav" data-spy="affix" data-offset-top="85"> 
```

85 是在贴上导航栏之前屏幕需要滚动的距离，所以玩这个。

我还添加了一些 CSS 来定位导航栏，并将 bootstrap.min.js 添加到页面资源中。

祝你好运！

# jquery - 导航 jquery 插件将无法按预期运行

> ID：13970847
> 
> 赞同：0
> 
> 时间：2012-12-20T11:09:13.387
> 
> 标签：jquery, html, css

我试图让我的 jQuery 导航工作，但它不会像我想要的那样。这是一个名为`kwicks`. 我希望在导航滑出时有文字。

我会将我的[HTML 和 CSS 放在一个 jsFiddle中，并给出](http://jsfiddle.net/KaKnp/)[该站点的测试页面的](http://Cyberiadesign.be/Test)链接，这样您就可以查看编码。

提前致谢

HTML

```
<ul id="kwickslist" class='kwicks kwicks-horizontal'> 
    <li id='panel-1'> 
        <div class="kwicks_inner_inner"> 
            <div class="navimage"><a id="index2" href="index.html">test</a></div> 
            <div class="smallText"> <p>Cyberia Design.</p></div> 
        </div> 
    </li> 
    <li id='panel-2'>
        <div class="kwicks_inner"> 
            <div class="navimage"><a id="about2" href="about.html">test</a></div> 
            <div class="smallText">About.</div> 
        </div> 
    </li> 
    <li id='panel-3'> 
        <div class="kwicks_inner"> 
            <div class="navimage"><a id="work2" href="work.html">test</a></div> 
            <div class="smallText">Work.</div> 
        </div> 
    </li> 
    <li id='panel-4'> 
        <div class="kwicks_inner"> 
            <div class="navimage"><a id="contact2" href="contact.html">test</a></div> 
            <div class="smallText">Contact.</div> 
        </div> 
    </li> 
</ul> 
```

CSS

```
.kwicks {
    display: block;
    list-style-type: none;
    list-style: none;
    position: relative;
    margin: 0;
    padding: 0;
}
.kwicks > * {
    display: block;
    overflow: hidden;
    padding: 0;
    margin: 0;
}
.kwicks.kwicks-processed > * {
    margin: 0;
    position: absolute;
}
.kwicks-horizontal > * {
    float: left;
}
.kwicks-horizontal > :first-child {
    margin-left: 0;
}
.kwicks-vertical > :first-child {
    margin-top: 0;
}
.kwicks {
    width: 515px;
    height: 100px;
}
.kwicks > li {
    width: 50px;
    height: 50px;
    /* overridden by kwicks but good for when JavaScript is disabled */
    margin-left: 5px;
    float: left;
}

#panel-1 { 
    background-color: #141414; 
}

#panel-2 { 
    background-color: #141414; 
}
#panel-3 { background-color: #141414; }
#panel-4 { background-color: #141414; }

#kwickslist li { 
    float: left; 
    width: 75px; 
    height: 50px; 
} 
#kwickslist .kwicks_inner { 
    width: 200px; 
} 
#kwickslist .navimage {  
    height: 50px; 
    float: left; 
} 
#kwickslist .smallText { 
    display: none; 
    text-align: center; 
    width: 50px; 
    color: white; 
    font-size: 10px; 
    margin-top: 5px; 
    float: right; 
} 
#kwickslist li.active.smallText { 
    display: block; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:35:16.980

尝试将“a”标签上的 text-indent 属性设置回“0”，因为目前它们在悬停时仍设置为“-9999px”。

可能还需要将它们的颜色设置为白色。

还将其添加到您的CSS：

```
ul#kwickslist li:hover .kwicks_inner_inner .smallText {
    display:block;
} 
```

# c# - 解析 Doxygen 配置文件

> ID：13970848
> 
> 赞同：1
> 
> 时间：2012-12-20T11:09:14.450
> 
> 标签：c#, doxygen

我想编写一个简单的工具来自动化大型系统的一些doxygenation；我最初认为 .doxy 文件格式是一种简单的键值 INI 格式，但列表是这样完成的：

```
FILE_PATTERNS          = *.c \
                         *.cc \
                         *.cxx \
                         *.cpp \
                         *.c++ \ 
```

我打算用 C# 编写我的工具；我怎样才能最好地解析一个正确理解这种多行方法的 .doxy 文件？

# asp.net - 在 ASP.NET MVC3 中的一处解析查询字符串

> ID：13970860
> 
> 赞同：0
> 
> 时间：2012-12-20T11:10:03.400
> 
> 标签：asp.net, asp.net-mvc-3

我想捕获可以附加到各种链接的查询字符串代码“？CODE =”，并且此链接将用于其他网站的广告中。

**www.TestProject.com/Home?Code=ASCD**

**www.TestProject.com/FAQ?Code=ASCD2**

**www.TestProject.com/Tips?Code=ASCD3**

因此，当用户单击此链接时，代码将被捕获并保存在 cookie 中。如果用户在网站上注册，那么代码将与他的注册 ID 相关联。

我已经在静态帮助程序类中编写了代码来捕获 URL。我从所有控制器/操作方法调用此方法。

我想知道这是否是正确的方法，或者我应该在 Global.asax Application_BeginRequest() 方法中调用这个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:16:13.577

我会创建一个自定义的[`ActionFilterAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx).

您可以使用它来标记某些操作、控制器，或者您可以为您网站中的所有操作注册它

```
protected void Application_Start()
{
    //...
    GlobalFilters.Filters.Add(new MvcProfilerGlobalAttribute());
} 
```

# asp.net - 在 asp.net 中使用 jquery 获取表单值并将其存储在会话中

> ID：13970864
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:10:10.750
> 
> 标签：asp.net, session, jquery

我在登录页面中使用 jquery，在这里我需要捕获电子邮件 ID 和密码并存储在会话中以在其他页面中使用。如何使用 jquery 存储在会话中输入的值。

我的代码

```
 $.ajax({
        type: "POST",
        async: false,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        url: "home.aspx/ValidateUser",
        data: (JSON.stringify({ emailid: strEmail, password: strPassword })),
        success: function (responseText) {

            var IsUserExists = responseText.d

            switch (IsUserExists) {
                case "0":
                    alert("Your are not registered user. Please register yours before login.");
                    break;
                case "1":
                    LoginToUserProfile(strEmail, strPassword);
                    break;
                case "2":
                    alert("Please activate your account from you registered email and then try to login.");
                    break;
            }
        },
        error: function (responseText) {
            alert("Error in validation --->" + responseText);
        }
    });  
    return false;

}

function LoginToUserProfile(strEmail, strPassword) {

    $.ajax({
        type: "POST",
        async: false,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        url: "home.aspx/GetUserId",
        data: (JSON.stringify({ emailid: strEmail, password: strPassword })),
        success: function (responseText) {
            var UserId = responseText.d
            window.location = "users/userhomepage.aspx?userid=" + UserId;
        },
        error: function (responseText) {
            alert("Error in LoginToUserProfile --->" + responseText);
        }
    });
    return false;
} 
```

如何从 login.help 我在会话中存储电子邮件 ID 和密码的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:17:49.440

您必须将其存储在控制器中，然后在需要使用它的每个页面（在 UI 中）创建一个隐藏字段，其中填充了必要的信息。

在您的 url 中，将值更改为`"url: Home/ValidateUser"`Home 控制器，您应该定义 ValidateUser 操作。

```
public ValidateUser(string emailid, string password)
{
  Session["email"] = emailid;
  Session["password"] = password;
} 
```

但是，如果您这样做是为了进行身份验证，请重新考虑使用更常用的解决方案。

# web - 在网页上抓取用户名的好方法

> ID：13970868
> 
> 赞同：0
> 
> 时间：2012-12-20T11:10:16.807
> 
> 标签：web, scrape

我想从 youtube 评论中抓取用户名，例如在页面中：

[http://www.youtube.com/all_comments?v=mIA0W69U2_Y](http://www.youtube.com/all_comments?v=mIA0W69U2_Y)

我想获取所有用户名/显示名称，例如：“fedfields”、“mystik dread”和相应的链接（当您单击“fedfields”时，它将链接到其个人资料）我想使用自动化 bash 脚本将它们废弃我有以下问题：

1 我原来的方法是编写自动化脚本，使用 wget 下载页面，然后使用正则表达式处理页面以获取这些名称，但是这样，我需要下载整个页面，每个页面都是几 MB，如果我下载很多页面，它占用很多空间，有没有更好的方法？

2 页面很多，比如链接里有7个页面，能不能把它们都放在一个页面里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:23:51.740

您可以在 C# 应用程序中使用 HtmlAgilityPack。

```
 HtmlAgilityPack.HtmlWeb web = new HtmlWeb();
        HtmlAgilityPack.HtmlDocument doc = web.Load(Url);
        IEnumerable<HtmlNode> userNames = doc.DocumentNode.Descendants("a").Where(
            d => d.Attributes.Contains("class") &&   
            d.Attributes["class"].Value.Contains("yt-user-name")); 
```

[关于使用 RegEx 解析 html 的有用信息](https://stackoverflow.com/a/1732454/1537481)

我不知道 youtube 内容是否具有本机 gzip 压缩，但您可以使用 WebRequest 类进行检查。如果是，它将显着减少流量。

```
webRequest = (HttpWebRequest)WebRequest.Create(url);
webRequest.Method = WebRequestMethods.Http.Get;
webRequest.KeepAlive = true;
webRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
webRequest.Headers.Add("Accept-Encoding", "gzip,deflate");
HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse(); 
MessageBox.Show(webResponse.ContentEncoding.ToString()); 
```

然后您可以使用 HTMLAgilityPack 读取流并获取用户名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:08:03.920

在 mashape 上使用 ScrapeGoat 将所有用户名作为 json 对象返回 :)

[https://www.mashape.com/warting/scrapegoat/](https://www.mashape.com/warting/scrapegoat/)

```
curl --include --request GET 'https://scrapegoat.p.mashape.com/?url=http%3A%2F%2Fwww.youtube.com%2Fall_comments%3Fv%3DmIA0W69U2_Y&selector=.yt-user-name' --header "X-Mashape-Authorization: <MASHAPE API KEY>" 
```

结果：

```
{"message":"ok","payload":["whitehouse","Osambasucks2","Osambasucks2","Osambasucks2","omar barazanji","omar barazanji","omar barazanji","omar barazanji","omar barazanji","omar barazanji","HigherPlanes","HigherPlanes","HigherPlanes","RamonaFromPomona","RamonaFromPomona","Osambasucks2","Osambasucks2","Osambasucks2","RamonaFromPomona","terminator360tm","terminator360tm","terminator360tm","terminator360tm","terminator360tm","terminator360tm","Osambasucks2","Osambasucks2","Osambasucks2","Joe Lackey","Joe Lackey","Joe Lackey","ThaGenius101","ThaGenius101","ThaGenius101","Joe Lackey","Ed Patowski","Ed Patowski","Ed Patowski","toughdogyt","toughdogyt","toughdogyt","Osambasucks2","Osambasucks2","Osambasucks2","goodkarmaband","goodkarmaband","Martynas Valiukas","Martynas Valiukas","Martynas Valiukas","goodkarmaband","goodkarmaband","goodkarmaband","Martynas Valiukas","XRedstone688X","XRedstone688X","XRedstone688X","goodkarmaband","Trevor Jones","Trevor Jones","Trevor Jones","goodkarmaband","V V","V V","V V","V V","V V","V V","V V","V V","V V","V V","V V","V V","leeman6417","leeman6417","leeman6417","Osambasucks2","Osambasucks2","Osambasucks2","leeman6417","sosocrazy1234","sosocrazy1234","sosocrazy1234","leeman6417","liamdudeeee","liamdudeeee","liamdudeeee","sosocrazy1234","sosocrazy1234","sosocrazy1234","sosocrazy1234","leeman6417","Ed Patowski","Ed Patowski","Ed Patowski","mastershakelock","mastershakelock","mastershakelock","VGQgex","VGQgex","VGQgex","Osambasucks2","Osambasucks2","Osambasucks2","VGQgex","MindzEnt","MindzEnt","MindzEnt","William willie","William willie","William willie","William willie","William willie","William willie","bkdmd","bkdmd","bkdmd","Osambasucks2","Osambasucks2","Osambasucks2","bkdmd","Rafael Vargas","Rafael Vargas","Rafael Vargas","7even2wenty1","7even2wenty1","7even2wenty1","cashlessbread","cashlessbread","cashlessbread","base3798","base3798","base3798","Ed Patowski","Ed Patowski","Ed Patowski","base3798","john smith","john smith","john smith","Ed Patowski","Neftali Acosta","Neftali Acosta","Neftali Acosta","Ed Patowski","Ed Patowski","Ed Patowski","Neftali Acosta","john smith","john smith","john smith","Neftali Acosta","Canal YooCheckTheFloow","Canal YooCheckTheFloow","Canal YooCheckTheFloow","Abandonbeast","Abandonbeast","Abandonbeast","Canal YooCheckTheFloow","Ironcitytony72","Ironcitytony72","Ironcitytony72","john smith","john smith","john smith","Ironcitytony72","Andrew Apelt","Andrew Apelt","Andrew Apelt","Ironcitytony72","Osambasucks2","Osambasucks2","Osambasucks2","Andrew Apelt","Andrew Apelt","Andrew Apelt","Andrew Apelt","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Andrew Apelt","incas94","incas94","incas94","Osambasucks2","William willie","William willie","William willie","incas94","Osambasucks2","Osambasucks2","Osambasucks2","incas94","Osambasucks2","Osambasucks2","Osambasucks2","incas94","Osambasucks2","Osambasucks2","Osambasucks2","incas94","Andrew Apelt","Andrew Apelt","Osambasucks2","LawnMowerfromHell","LawnMowerfromHell","LawnMowerfromHell","Ironcitytony72","Osambasucks2","Osambasucks2","Osambasucks2","TheAndr3tzi","TheAndr3tzi","TheAndr3tzi","thumsupformyusername","thumsupformyusername","thumsupformyusername","algett","algett","algett","thumsupformyusername","thumsupformyusername","thumsupformyusername","thumsupformyusername","algett","ferkondenster","ferkondenster","ferkondenster","Christian Heinrich","Christian Heinrich","Christian Heinrich","erieejustice911","erieejustice911","erieejustice911","ferkondenster","ferkondenster","ferkondenster","Seth Farsides","Seth Farsides","Seth Farsides","ferkondenster","ferkondenster","ferkondenster","Seth Farsides","Seth Farsides","Seth Farsides","ferkondenster","Doky9889","Doky9889","Doky9889","ferkondenster","ferkondenster","ferkondenster","ferkondenster","Doky9889","sealrk19","sealrk19","sealrk19","wiljam12345","wiljam12345","wiljam12345","Dwayne Cole","Dwayne Cole","Dwayne Cole","Osambasucks2","Osambasucks2","Osambasucks2","Dwayne Cole","Jax Jr","Jax Jr","Jax Jr","Rafael Vargas","Rafael Vargas","Rafael Vargas","William willie","William willie","William willie","William willie","William willie","William willie","Gunnar Rowe","Gunnar Rowe","Gunnar Rowe","Rafael Vargas","Rafael Vargas","Rafael Vargas","Susan Porter","Susan Porter","Susan Porter","derp toth","derp toth","derp toth","MXNR16","nick62301","nick62301","nick62301","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","SeventhSun","SeventhSun","SeventhSun","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Rafael Vargas","Rafael Vargas","Rafael Vargas","senormierda","senormierda","senormierda","Rafael Vargas","chrisgilofficial","chrisgilofficial","chrisgilofficial","MXNR16","Osambasucks2","Osambasucks2","Osambasucks2","chrisgilofficial","chrisgilofficial","chrisgilofficial","chrisgilofficial","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","chrisgilofficial","chrisgilofficial","chrisgilofficial","chrisgilofficial","Osambasucks2","Andrew Apelt","Andrew Apelt","chrisgilofficial","Osambasucks2","Osambasucks2","Osambasucks2","chrisgilofficial","aztecadog","aztecadog","aztecadog","chrisgilofficial","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","chrisgilofficial","Osambasucks2","Osambasucks2","Osambasucks2","chrisgilofficial","ThePhase20","ThePhase20","ThePhase20","ICE778","ICE778","ICE778","Sabrina Blacks","Sabrina Blacks","Sabrina Blacks","Darwin Gutierrez","Darwin Gutierrez","Darwin Gutierrez","lessonsfromryan","tooncrazy1","tooncrazy1","tooncrazy1","unbreackable3000","unbreackable3000","unbreackable3000","Barack Obama","Barack Obama","Barack Obama","Osambasucks2","Osambasucks2","Osambasucks2","Barack Obama","tooncrazy1","tooncrazy1","tooncrazy1","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","tooncrazy1","Osambasucks2","Osambasucks2","Osambasucks2","tooncrazy1","Osambasucks2","Osambasucks2","Osambasucks2","Barack Obama","Americaunderduress","Americaunderduress","Americaunderduress","Barack Obama","Barack Obama","Barack Obama","Osambasucks2","Osambasucks2","Osambasucks2","Barack Obama","FoodStampBarry","FoodStampBarry","FoodStampBarry","Barack Obama","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","rondog ron","myviewsontheworld","myviewsontheworld","myviewsontheworld","SuperNikoYT","SuperNikoYT","SuperNikoYT","myviewsontheworld","Osambasucks2","Osambasucks2","Osambasucks2","myviewsontheworld","Americaunderduress","Americaunderduress","Americaunderduress","myviewsontheworld","Asuma741","Asuma741","Asuma741","RevolutionNewz","damonjo15","damonjo15","damonjo15","Osambasucks2","Osambasucks2","Osambasucks2","damonjo15","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Aries2012100","Aries2012100","Aries2012100","Osambasucks2","tooncrazy1","tooncrazy1","tooncrazy1","Aries2012100","KH AK","KH AK","KH AK","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","Osambasucks2","Osambasucks2","Osambasucks2","Aries2012100","kangaroo3259","kangaroo3259","kangaroo3259","Aries2012100","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","youhan younen","youhan younen","youhan younen","tooncrazy1","tooncrazy1","tooncrazy1","youhan younen","Osambasucks2","Osambasucks2","Osambasucks2","youhan younen","Stevejobsultimate2","Stevejobsultimate2","Stevejobsultimate2","Stevejobsultimate2","Stevejobsultimate2","Stevejobsultimate2","Osambasucks2","Osambasucks2","Osambasucks2","Stevejobsultimate2","Rafael Vargas","Rafael Vargas","Rafael Vargas","drewpert0515","drewpert0515","drewpert0515","dv wfwefwe","TheAlienContactee","TheAlienContactee","TheAlienContactee","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","Jordan Beckwith","Jordan Beckwith","Jordan Beckwith","Michael Carrillo","Michael Carrillo","Michael Carrillo","gotwess","gotwess","gotwess","gotwess","Michael Carrillo","Michael Carrillo","Michael Carrillo","Michael Carrillo","gotwess","Jawad Pullin","Jawad Pullin","Jawad Pullin","TreborHG93","tooncrazy1","tooncrazy1","tooncrazy1","chickeneggchickeneg1","chickeneggchickeneg1","chickeneggchickeneg1","chickeneggchickeneg1","chickeneggchickeneg1","chickeneggchickeneg1","kinggrindhard","kinggrindhard","kinggrindhard","branoaas branoaas","branoaas branoaas","branoaas branoaas","Osambasucks2","Osambasucks2","Osambasucks2","branoaas branoaas","branoaas branoaas","branoaas branoaas","branoaas branoaas","Theindicud","Theindicud","Theindicud","eizieizz","eizieizz","eizieizz","Osambasucks2","Osambasucks2","Osambasucks2","eizieizz","1990Zuck","1990Zuck","1990Zuck","ArcoZakus","ArcoZakus","ArcoZakus","firemedic30ca","johnny grove","johnny grove","johnny grove","joost1v","joost1v","joost1v","Osambasucks2","Osambasucks2","Osambasucks2","joost1v","5sdk1","5sdk1","5sdk1","jeff brennan","jeff brennan","jeff brennan","izizdropshotz","izizdropshotz","izizdropshotz","izizdropshotz","jeff brennan","jeff brennan","jeff brennan","jeff brennan","Bo James","aztecadog","aztecadog","aztecadog","izizdropshotz","izizdropshotz","izizdropshotz","aztecadog","izizdropshotz","izizdropshotz","izizdropshotz","aztecadog","Greg Cimera","Greg Cimera","Greg Cimera","izizdropshotz","izizdropshotz","izizdropshotz","izizdropshotz","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","izizdropshotz","izizdropshotz","izizdropshotz","izizdropshotz","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","izizdropshotz","izizdropshotz","izizdropshotz","izizdropshotz","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","izizdropshotz","izizdropshotz","izizdropshotz","izizdropshotz","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","izizdropshotz","Paul Pascalau","Paul Pascalau","Paul Pascalau","Greg Cimera","tooncrazy1","tooncrazy1","tooncrazy1","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","Greg Cimera","Greg Cimera","Greg Cimera","Greg Cimera","tooncrazy1","tooncrazy1","tooncrazy1","tooncrazy1","Greg Cimera","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","aztecadog","aztecadog","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","aztecadog","aztecadog","aztecadog","Osambasucks2","izizdropshotz","izizdropshotz","izizdropshotz","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","Zajac Staszek","Zajac Staszek","Zajac Staszek","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Zajac Staszek","Zajac Staszek","Zajac Staszek","Zajac Staszek","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Zajac Staszek","Zajac Staszek","Zajac Staszek","Zajac Staszek","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Zajac Staszek","Osambasucks2","Osambasucks2","Osambasucks2","Zajac Staszek","Ed Patowski","Ed Patowski","Ed Patowski","Zajac Staszek","aztecadog","aztecadog","aztecadog","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","aztecadog","gotwess","gotwess","gotwess","aztecadog","JeremyTheMoose","JeremyTheMoose","JeremyTheMoose","5sdk1","5sdk1","5sdk1","fordbronco1991","fordbronco1991","fordbronco1991","andy kerver","andy kerver","andy kerver","Omarimage","Omarimage","Omarimage","Omarimage","Omarimage","Omarimage","justin lionti","justin lionti","justin lionti","Omarimage","Butheadbros2","Butheadbros2","Butheadbros2","Omarimage","moonbeamrider1","moonbeamrider1","moonbeamrider1","justin lionti","justin lionti","justin lionti","moonbeamrider1","moonbeamrider1","moonbeamrider1","moonbeamrider1","justin lionti","fordbronco1991","fordbronco1991","fordbronco1991","pellenyberg","pellenyberg","pellenyberg","Son Goku","Son Goku","Son Goku","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","Butheadbros2","Butheadbros2","Butheadbros2","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","Butheadbros2","Butheadbros2","Butheadbros2","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","Butheadbros2","Butheadbros2","Butheadbros2","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","Butheadbros2","Butheadbros2","Butheadbros2","Butheadbros2","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","5ilv3rbvll","Butheadbros2","Butheadbros2","Butheadbros2","Butheadbros2","5ilv3rbvll","fisch kopf","fisch kopf","fisch kopf","andrew baker","andrew baker","andrew baker","FVCKDA POPO","FVCKDA POPO","FVCKDA POPO","MrChessmans","MrChessmans","MrChessmans","BryndisiDali","Brazzer man","Brazzer man","Brazzer man","Jack Thompson","ecw141685","ecw141685","ecw141685","Osambasucks2","Osambasucks2","Osambasucks2","ecw141685","lps24evelyn","lps24evelyn","lps24evelyn","erieejustice911","erieejustice911","erieejustice911","erieejustice911","erieejustice911","erieejustice911","Keepskatin","Keepskatin","Keepskatin","erieejustice911","V V","V V","V V","Keepskatin","Abrahan Peraza","Abrahan Peraza","Abrahan Peraza","lexyloveful","Zratedguns","Zratedguns","Zratedguns","MadNoys1","MadNoys1","MadNoys1","MadNoys1","Zratedguns","MadNoys1","MadNoys1","MadNoys1","MadNoys1","MadNoys1","MadNoys1","MadNoys1","MadNoys1","MadNoys1","Joseph Pal","Joseph Pal","Joseph Pal","Joseph Pal","MadNoys1","MadNoys1","MadNoys1","MadNoys1","bear cat","laurynas stirbys","laurynas stirbys","laurynas stirbys","newjerusalem newtestament","newjerusalem newtestament","newjerusalem newtestament","amerilstones","amerilstones","amerilstones","newjerusalem newtestament","Keepskatin","Keepskatin","Keepskatin","newjerusalem newtestament","amerilstones","amerilstones","amerilstones","Keepskatin","Noah Neo","Noah Neo","Noah Neo","charmander4533","charmander4533","charmander4533","Noah Neo","Noah Neo","Noah Neo","Noah Neo","charmander4533","Noah Neo","Noah Neo","Noah Neo","charmander4533","Osambasucks2","Osambasucks2","Osambasucks2","Noah Neo","George Washington","George Washington","George Washington","charmander4533","izizdropshotz","izizdropshotz","izizdropshotz","charmander4533","Wavanova","Wavanova","Wavanova","charmander4533","wisestfoolalive","wisestfoolalive","wisestfoolalive","Noah Neo","Noah Neo","Noah Neo","Noah Neo","wisestfoolalive","colin dooley","colin dooley","colin dooley","colin dooley","colin dooley","colin dooley","Silme037","Silme037","Silme037","colin dooley","Keepskatin","Keepskatin","Keepskatin","colin dooley","princelord55","princelord55","princelord55","Osambasucks2","Osambasucks2","Osambasucks2","princelord55","DriadonRapShow","DriadonRapShow","DriadonRapShow","eddrum100","eddrum100","eddrum100","Ryan S","Osambasucks2","Osambasucks2","Osambasucks2","eddrum100","eddrum100","eddrum100","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","eddrum100","Ryan S","Ryan S","Ryan S","eddrum100","eddrum100","eddrum100","Ryan S","Ryan S","Ryan S","Ryan S","Ryan S","eddrum100","eddrum100","eddrum100","eddrum100","RatedMForModz","RatedMForModz","RatedMForModz","alban97","alban97","alban97","RatedMForModz","Alex Bannon","Alex Bannon","Alex Bannon","alban97","alban97","alban97","alban97","Alex Bannon","james aaron","james aaron","james aaron","RatedMForModz","Ryan S","Ryan S","Ryan S","Dylan N","killllshot","killllshot","killllshot","Saadia Khan","Saadia Khan","talithatf17","talithatf17","talithatf17","amerilstones","amerilstones","amerilstones","talithatf17","BENGHAZIneverForget","BENGHAZIneverForget","BENGHAZIneverForget","talithatf17","talithatf17","talithatf17","supergrover6868","supergrover6868","supergrover6868","talithatf17","Alexander Sigsworth","Alexander Sigsworth","Alexander Sigsworth","supergrover6868","Zratedguns","Zratedguns","Zratedguns","supergrover6868","Keepskatin","Keepskatin","Keepskatin","Zratedguns","Butheadbros2","Butheadbros2","Butheadbros2","Zratedguns","Omegeist","Omegeist","Omegeist","supergrover6868","2Dmensions","2Dmensions","2Dmensions","talithatf17","talithatf17","talithatf17","supergrover6868","supergrover6868","supergrover6868","talithatf17","newjerusalem newtestament","newjerusalem newtestament","newjerusalem newtestament","supergrover6868","VGQgex","VGQgex","VGQgex","talithatf17","talithatf17","talithatf17","talithatf17","Mandragara","Mandragara","Mandragara","talithatf17","deathzbo","deathzbo","deathzbo","Mandragara","Mandragara","Mandragara","deathzbo","Mandragara","Mandragara","Mandragara","deathzbo","deathzbo","deathzbo","deathzbo","Mandragara","eddrum100","eddrum100","eddrum100","Mandragara","Mandragara","Mandragara","Mandragara","eddrum100","Unit01232","Unit01232","Unit01232","supergrover6868","supergrover6868","supergrover6868","Unit01232","Osambasucks2","Osambasucks2","Osambasucks2","supergrover6868","eddrum100","eddrum100","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","Unit01232","Unit01232","Unit01232","Unit01232","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","Unit01232","eddrum100","eddrum100","eddrum100","senormierda","Osambasucks2","Osambasucks2","Osambasucks2","eddrum100","eddrum100","eddrum100","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","eddrum100","Kevin Koala","Kevin Koala","Kevin Koala","senormierda","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","GGRSC","GGRSC","GGRSC","GGRSC","eddrum100","michael smith","michael smith","michael smith","GGRSC","GGRSC","GGRSC","truthinvideos","supergrover6868","supergrover6868","supergrover6868","GGRSC","supergrover6868","supergrover6868","supergrover6868","eddrum100","eddrum100","eddrum100","supergrover6868","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","supergrover6868","eddrum100","eddrum100","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","eddrum100","eddrum100","eddrum100","eddrum100","bobothecreepyclown","eddrum100","eddrum100","eddrum100","bobothecreepyclown","supergrover6868","supergrover6868","supergrover6868","bobothecreepyclown","eddrum100","eddrum100","eddrum100","supergrover6868","supergrover6868","supergrover6868","supergrover6868","eddrum100","eddrum100","eddrum100","eddrum100","supergrover6868","bobothecreepyclown","bobothecreepyclown","bobothecreepyclown","willypdyer","willypdyer","willypdyer","Osambasucks2","Osambasucks2","Osambasucks2","willypdyer","spairtain","spairtain","spairtain","DigitalAcceptance","DigitalAcceptance","DigitalAcceptance","ElRancholo2","Osambasucks2","Osambasucks2","Osambasucks2","DigitalAcceptance","ElRancholo2","ElRancholo2","ElRancholo2","DigitalAcceptance","Osambasucks2","Osambasucks2","Osambasucks2","ElRancholo2","Mark Tse","Mark Tse","Mark Tse","DigitalAcceptance","Mark Tse","Mark Tse","Mark Tse","Mark Tse","The Best","The Best","The Best","supergrover6868","supergrover6868","supergrover6868","creativeengineer","creativeengineer","creativeengineer","eddrum100","Ed Patowski","Ed Patowski","Ed Patowski","creativeengineer","Ed Patowski","Ed Patowski","Ed Patowski","creativeengineer","creativeengineer","creativeengineer","creativeengineer","Ed Patowski","Ed Patowski","Ed Patowski","Ed Patowski","creativeengineer","eddrum100","eddrum100","eddrum100","creativeengineer","creativeengineer","creativeengineer","creativeengineer","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","creativeengineer","supergrover6868","supergrover6868","supergrover6868","creativeengineer","creativeengineer","creativeengineer","creativeengineer","supergrover6868","supergrover6868","supergrover6868","creativeengineer","comicozy87","comicozy87","comicozy87","Raven Gomez","turbidhat","turbidhat","turbidhat","Daracon1010","Daracon1010","Daracon1010","Daracon1010","turbidhat","turbidhat","turbidhat","Daracon1010","VGQgex","VGQgex","VGQgex","Daracon1010","Daracon1010","Daracon1010","Daracon1010","VGQgex","WeThePeopleNoNWO","WeThePeopleNoNWO","WeThePeopleNoNWO","amerilstones","zmanthecool","zmanthecool","zmanthecool","metal220","supergrover6868","supergrover6868","supergrover6868","1974wolfman","1974wolfman","1974wolfman","William willie","William willie","William willie","1974wolfman","1974wolfman","1974wolfman","1974wolfman","William willie","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Barskor1","Kanwar Judge","Kanwar Judge","Kanwar Judge","getsumdonginurmouth","getsumdonginurmouth","getsumdonginurmouth","abu bakr","abu bakr","abu bakr","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","eddrum100","eddrum100","eddrum100","eddrum100","Obamalies100","Obamalies100","Obamalies100","Obamalies100","eddrum100","eddrum100","eddrum100","eddrum100","Obamalies100","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","eddrum100","eddrum100","eddrum100","eddrum100","Obamalies100","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","eddrum100","eddrum100","eddrum100","eddrum100","Obamalies100","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","eddrum100","Obamalies100","Obamalies100","Obamalies100","getsumdonginurmouth","getsumdonginurmouth","getsumdonginurmouth","getsumdonginurmouth","Obamalies100","amerilstones","amerilstones","amerilstones","getsumdonginurmouth","getsumdonginurmouth","getsumdonginurmouth","getsumdonginurmouth","amerilstones","amerilstones","amerilstones","amerilstones","getsumdonginurmouth","Obamalies100","Obamalies100","Obamalies100","getsumdonginurmouth","Obamalies100","Obamalies100","Obamalies100","getsumdonginurmouth","Obamalies100","Obamalies100","Obamalies100","eddrum100","ThaYayo","ThaYayo","ThaYayo","William willie","chrisn365","chrisn365","chrisn365","Eli Jackson","Eli Jackson","Eli Jackson","Jboulos12","Frank Adams","Frank Adams","Frank Adams","amerilstones","amerilstones","amerilstones","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","eddrum100","eddrum100","eddrum100","amerilstones","amerilstones","amerilstones","amerilstones","eddrum100","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","supergrover6868","supergrover6868","supergrover6868","amerilstones","amerilstones","amerilstones","amerilstones","supergrover6868","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","amerilstones","amerilstones","amerilstones","amerilstones","Osambasucks2","LiamborninDC","LiamborninDC","LiamborninDC","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","LiamborninDC","Osambasucks2","Osambasucks2","Osambasucks2","William willie","Osambasucks2","Osambasucks2","Osambasucks2","killllshot","killllshot","killllshot","killllshot","Osambasucks2","Osambasucks2","Osambasucks2","Osambasucks2","killllshot","killllshot","killllshot","killllshot","Osambasucks2","supergrover6868","supergrover6868","supergrover6868","killllshot","Osambasucks2","Osambasucks2","Osambasucks2","killllshot"],"status":200} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:56:16.920

**做这个：**

```
import re
import sys
import time
import urllib2

html = True

argv_list = sys.argv
if len(argv_list) == 2:
    vid = argv_list[1]
else:
    vid = "mIA0W69U2_Y"

regex = re.compile("<span class=\"author.*?<a href=\"(.*?)\".*? dir=\"ltr\">(.*?)</a>", re.DOTALL | re.UNICODE | re.IGNORECASE)

index = 1
author_lists = []
t1 = time.time()
print "######################### Start #########################"

while 1:
    url = "http://www.youtube.com/watch_ajax?action_get_comments=1&v="+vid+"&commenttype=everything&source=w&page_size=500&p="+str(index)+"&format=XML"
    print "Retrieving page "+str(index)+": ", url
    o = urllib2.urlopen(url)
    r = o.read()
    elements = regex.findall(r)
    author_list = []
    for x, y in elements:

        if x.startswith("http://") or x.startswith("https://"):
            continue
        xx = "".join(["http://www.youtube.com", x])
        href = xx.strip()
        #print href

        if "</span>" not in y :
            uname = y.strip()
        else:
            uname = y.split("</span>")[0].strip()

        if uname.startswith("<a"):
            continue

        if not uname or not href:
            continue

        if html:
            #1 output html
            author = "".join(["<a href=\"", href, "\">", uname, "</a>"])
        else:
            #2 output txt
            author = " ".join([uname, href])

        author_list.append(author)

    t = "%02d:%02d:%02d" % reduce(lambda ll,b : divmod(ll[0],b) + ll[1:], [(time.time()-t1,),60,60])
    print "".join(["Time passed: ", t])
    if not author_list:
        break
    else:
        author_lists.extend(author_list)
    index+=1
    #break #uncomment it if you only want to test one page

print "######################### Finished #########################"
print "Total comments: ", len(author_lists)
if author_lists:
    author_lists.sort()
    last = author_lists[-1]
    for i in range(len(author_lists)-2, -1, -1):
        if last == author_lists[i]:
            del author_lists[i]
        else:
            last = author_lists[i]
    if html:
        authors = "<br>".join(author_lists)
        authors = "".join(["<html><meta http-equiv='Content-Type' content='text/html; charset=utf-8'><body>", authors, "</body></html>"])
        fname = vid+".html"
    else:
        authors = "\n".join(author_lists)
        fname = vid+".txt"

    #print "Authors: ", authors
    print "Total commenters: ", len(author_lists)

    oo = open(fname, "w")
    oo.write(authors)
    oo.close()
print "######################### Exist #########################" 
```

**示例 txt 输出：**

![在此处输入图像描述](../Images/0a62344ff492d9bd7f925054054afa47.png)

**示例 html 输出：**

![在此处输入图像描述](../Images/871761283774f1e7fe709c07b8d32b87.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T09:56:16.627

C# 也可以通过这种方式提供帮助（尽管 HAP 和 WebRequest 更好）：

```
 SHDocVw.InternetExplorer ie = new
            SHDocVw.InternetExplorerClass();
            WebBrowser wb = (WebBrowser)ie;
            wb.Visible = true;
            //Do anything else with the window here that you wish
            wb.Navigate("https://adwords.google.co.uk/um/Logout", ref o, ref o, ref o, ref o);
            while (wb.Busy) { Thread.Sleep(100); }
            HTMLDocument document = ((HTMLDocument)wb.Document);
            IHTMLElement element = document.getElementById("Email");
            HTMLInputElementClass email = (HTMLInputElementClass)element;
            email.value = "testtestingtton@gmail.com";
            email = null;
            element = document.getElementById("Passwd");
            HTMLInputElementClass pass = (HTMLInputElementClass)element;
            pass.value = "pass";
            pass = null;
            element = document.getElementById("signIn");
            HTMLInputElementClass subm = (HTMLInputElementClass)element;
            subm.click();
            subm = null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-27T10:36:51.683

为您要提取的名称字段和其他字段编写 rssfeeds 使用自动插件来设置爬虫，请按照以下步骤[操作如何从多个网站提取数据](https://www.promptcloud.com/extract-data-from-a-website-extract-data-from-multiple-sites/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-06T10:43:00.333

**这是使用ruby​​ 和 gems nokogiri 和 open-uri**的简单解决方案

 **```
require 'nokogiri'
require 'open-uri'
url="https://www.youtube.com/all_comments?v=mIA0W69U2_Y"
dom=Nokogiri::HTML(open(url))
dom.xpath("//div[@class='comment-entry']").each do |comment|
  username=comment.xpath(".//a[contains(@class,'user-name')]").first
  username=username.content.chomp.strip if username
  profilelink=comment.xpath(".//a[contains(@class,'user-name')]/@href").first
  profilelink=profilelink.content.chomp.strip if profilelink
  profilelink="http://www.youtube.com"+profilelink if profilelink.match(/^\//)
  puts "#{username} #{profilelink}" if username and profilelink
end 
```

有关更多信息，请访问[如何从多个网站轻松提取数据](https://www.promptcloud.com/extract-data-from-a-website-extract-data-from-multiple-sites/)**

# json - Java：Gson自定义序列化器和反序列化器特殊要求

> ID：13970871
> 
> 赞同：1
> 
> 时间：2012-12-20T11:10:37.567
> 
> 标签：json, serialization, gson

我知道如何实现 JsonDeserializer 和 JsonSerializer，但这是我想要做的：

这是设置：

```
public class classA
{
public String a;
public classB clazzB;
}

public class classB
{
public String c;
public String d;
public String e;
public String f;
} 
```

我想像这样序列化（并反序列化与此类似的）classA：

*   序列化 classA 时，它也应该用它序列化 classB 的一部分，比如变量 c 和 d

因为我知道如何做到这一点（对 e 和 f 使用瞬态），所以这里有一个问题：

*   c 和 d（应该用 classA 序列化的 classB 的部分）不应该在 JSONObject 中，它们应该与 classA 中的变量一起出现 INLINE

本质上，结果应该是这样的：

```
{"a":"something","c":"something", "d":"something"} 
```

我在这里使用 JsonSerializer 遇到的问题是我必须从 classB 序列化 2 个变量（可能更多）。如果它只有一个，那么我可以只返回变量的 JSONPrimitive。我正在考虑在序列化方法中使用 JsonTreeWriter，但我怀疑这可以做到。

最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:34:42.710

除了“你做错了”，因为你基本上是在说你不想将你的 Objects 序列化为实际的 JSON 等价物......你不要 serialize `classB`，因为那不是你想要的。您需要一个 JSON 对象，其中包含来自您的两个对象的字段。

您可以为 A 编写自定义反序列化器和序列化器，然后创建您尝试创建的 JSON。

```
class ClassA
{
    public String a = "This is a";
    public ClassB clazzB = new ClassB();
}

class ClassB
{
    public String c = "This is c";
    public String d = "This is d";
    public String e;
    public String f;
}

class ASerializer implements JsonSerializer<ClassA>
{

    public JsonElement serialize(ClassA t, Type type, JsonSerializationContext jsc)
    {
        JsonObject jo = new JsonObject();
        jo.addProperty("a", t.a);
        jo.addProperty("c", t.clazzB.c);
        jo.addProperty("d", t.clazzB.d);
        return jo;
    }

}

public class Test 
{
    pubic static void main(String[] args) 
    { 
        GsonBuilder gson = new GsonBuilder();
        gson.registerTypeAdapter(ClassA.class, new ASerializer());
        String json = gson.create().toJson(new ClassA());
        System.out.println(json);
    }
} 
```

输出：

> {"a":"这是 a","c":"这是 c","d":"这是 d"}

您还可以在该序列化`ClassB`程序中进行序列化，添加元素`ClassA`并返回它。

# jquery - 将数据导出到 excel 在数据表中不起作用

> ID：13970883
> 
> 赞同：3
> 
> 时间：2012-12-20T11:10:50.117
> 
> 标签：jquery, jquery-datatables

在头部之间添加此行后，导出数据和 TableTools 对我不起作用：

```
<script type="text/javascript" language="javascript" src="../../components/dataTables/media/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language="javascript" src="../../components/dataTables/media/js/ZeroClipboard.js"></script>
<script type="text/javascript" language="javascript" src="../../components/dataTables/media/js/TableTools.js"></script> 
```

并在此更改表 id 道具：

```
$('#myTable').dataTable({
   "sDom": '<"clear">lfrtipT'
}); 
```

我可以在桌子上看到 tableTools 按钮，但是它们不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-11T08:39:40.513

首先使用 jquery datatable js 1.9（请查看下面的链接，您可以在其中下载此 js），然后使用下面的代码查看数据表

```
$('#example').dataTable({
"bJQueryUI": true,
"sPaginationType": "full_numbers",
"oTableTools": {
"aButtons": [
{
'sExtends':'csv',
"sFileName": "subscribers_"+GetTodayDate()+".csv",
'mColumns':[0,1]
},
{
'sExtends':'pdf',
"sFileName": "subscribers_"+GetTodayDate()+".pdf",
'mColumns':[0,1] 
},
]
},
"sDom": '<"H"Tlfr>tip<"F">',
"aoColumns":
[
{ "bSearchable": false },
null,
{ "bSortable": false, "bSearchable": false },
]
}); 
```

请记住导出到 excel 的主要代码如下，这是在上面的代码中添加的

```
"oTableTools": {
"aButtons": [
{
'sExtends':'csv',
"sFileName": "subscribers.csv",
'mColumns':[0,1]
},
{
'sExtends':'pdf',
"sFileName": "subscribers.pdf",
'mColumns':[0,1] 
},
]
},
"sDom": '<"H"Tlfr>tip<"F">', 
```

然后从此链接下载“媒体”文件夹并粘贴到数据网格显示的文件夹中

[注意：请将“媒体”文件夹提取并粘贴到您的数据表显示的准确路径中。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:15:24.480

为此，您将需要一个文件：

1.  copy_csv_xls_pdf.swf

你会在这里得到它：[Google Datatable SWF](http://code.google.com/p/alageospatialportal/source/browse/trunk/actions/src/main/webapp/includes/dashboard/datatables/swf/)
试试下面的代码：

```
$(document).ready( function () {
    $('#myTable').dataTable( {
        "sDom": '<"clear">lfrtipT',
        "oTableTools": {
              "sSwfPath" : "swf/copy_csv_xls_pdf.swf"
        }
    });
}); 
```

其中将`sSwfPath`值设置为`copy_csv_xls_pdf.swf`文件的绝对路径。

* * *

查看此链接了解更多信息：[TableTools 示例 - 设置 SWF 路径](http://datatables.net/release-datatables/extras/TableTools/swf_path.html)

# .net - 关闭 AutoSize 时保持大小

> ID：13970889
> 
> 赞同：3
> 
> 时间：2012-12-20T11:11:04.307
> 
> 标签：.net, winforms, autosize, sizing

我有一个表单，它通过设置为 true 和to 来初始化其内容（`UserControl`放置在位置 0、0）。`AutoSize``AutoSizeMode``GrowAndShrink`

初始化后，我希望表单能够控制并关闭 AutoSizing 并制作 UserControl `Dock.Fill`。

问题是，当关闭时`AutoSize`，表单会恢复其先前的大小，而不是保持其当前大小。我可以在关闭 AutoSize 之前存储 Size，然后再恢复它，但是您仍然会收到调整大小的事件（您可以看到表单闪烁）。

有没有办法让表单保持其当前大小并且在关闭时不触发任何大小调整事件`AutoSize`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:37:24.553

在关闭 AutoSize 属性之前尝试设置窗体的 MinimumSize 属性：

```
this.MinimumSize = this.Size;
this.AutoSize = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T17:54:44.297

我有一个类似的问题 - 我希望在按下按钮时使用 AutoSize 增大或缩小表单，然后返回允许用户手动调整它的大小。

目前我的解决方案是在按钮事件中：

```
 Me.AutoSize = True
    uiStopAutoSizeTimer.Start() 
```

然后有一个单独的方法来关闭 AutoSize，并保持 AutoSize 在表单上使用的大小。

```
Private Sub uiStopAutoSizeTimer_Tick(sender As System.Object, e As System.EventArgs) Handles uiStopAutoSizeTimer.Tick
    Me.SuspendLayout()
    Dim tempSize = Me.Size
    Me.AutoSize = False
    Me.Size = tempSize
    uiStopAutoSizeTimer.Enabled = False
    Me.ResumeLayout()
End Sub 
```

它有效，但感觉很笨拙。

# android - 如何在包含按钮的 Android 标题栏中居中文本？

> ID：13970890
> 
> 赞同：2
> 
> 时间：2012-12-20T11:11:05.603
> 
> 标签：android, layout

我有一个 ListView，它在 View 顶部包含一个 LinearLayout，用作标题栏。列表可以滚动，但标题栏保持不变。在标题栏中，我想要一个“后退”按钮，但这会导致标题文本变得不居中：

![未居中的文本](../Images/f1b4b6dabeb53dae9c3dc03a740870eb.png) 我添加了第二个相同大小的按钮（在标题栏的右侧）并使其不可见，以便充当文本居中的“间隔”，但随后我松开了很多标题栏真实-财产：

![在此处输入图像描述](../Images/404ede8f0a91cdbebd6501440f4215cd.png)

有没有办法告诉Android将标题文本居中并忽略后退按钮？也许这就是生活的本来面目，但我想我会先让每个人都运行它，然后再继续使用一个笨拙的第二个隐形按钮或其他东西。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:21:20.983

代替 LinearLayout，您可以使用 RelativeLayout 作为标题。并使用布局参数，以便：

*   后退按钮与其父级的左边缘对齐。
*   TextView 将整个父级 (LayoutParam.FILLPARENT) 与重力 CENTER

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:24:59.320

哟可以使用相对布局而不是线性布局，

```
<RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#ffffaa" >

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="false"
            android:gravity="center"
            android:text="Button" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="false"
            android:gravity="center"
            android:paddingLeft="100dp"
            android:paddingRight="100dp"
            android:text="Header Title Embiggeden"
            android:textSize="20dp" />
    </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:57:03.857

这是给您的。我在我的项目中这样做了。

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#FF00FF"
            android:orientation="horizontal" >

        <Button
            android:id="@+id/testbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Back" >
        </Button>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Header"
            android:gravity="center_horizontal"
            android:textSize="30sp" ></TextView>
       </RelativeLayout>

        <ListView
            android:id="@id/android:list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginTop="40dp"
            android:divider="@android:color/transparent"
            android:dividerHeight="10sp" >
        </ListView>

    </RelativeLayout> 
```

这是您需要的，并根据您的需要更改第二个 RelativeLayout 的颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:21:04.880

然后尝试使用Relative Layout，文字在

```
android:layout_centerHorizontal="true" 
```

和两个按钮

```
1.android:layout_toLeftOf="text id" 
2.android:layout_toRightOf="text id" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T11:25:10.600

代替.set 文本视图属性`relativelayout`并 设置按钮`linearlayout``centerinvertical=true``alignParent=left.`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T11:27:03.177

设置 TextView 的 padding-left 等于不可见的按钮宽度

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-20T11:35:50.380

您可以使用相对布局而不是线性布局

```
<RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:background="#00ff00">

    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:gravity="center" android:maxLines="1" 
        android:ellipsize="end" android:layout_centerInParent="true"/>

    <Button android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" android:layout_centerVertical="true"/>

</RelativeLayout> 
```

或者你可以使用 FrameLayout

```
<FrameLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:background="#00ff00">

    <Button android:layout_width="wrap_content" android:layout_height="wrap_content" />

    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"/>

    </FrameLayout> 
```

# box-api - 从 Javascript 或 PHP 将文件上传到我自己的 box.net 帐户。

> ID：13970897
> 
> 赞同：0
> 
> 时间：2012-12-20T11:11:23.800
> 
> 标签：box-api

我有一个 box.net 帐户，我希望能够通过我正在编写的 Javascript 脚本（将数据整理为 JSON）将文件上传到我自己的帐户。我也不介意通过 PHP 将数据 AJAXing 到 PHP 脚本来执行此操作。

问题是经过一些广泛的搜索后，我无法真正弄清楚如何去做。我似乎找到的只是通过具有基于用户的 Web 身份验证的应用程序来获取身份验证令牌的方法，但我不希望与我的脚本进行任何人工交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:41:10.663

如果您正确设计脚本，则除了第一次运行脚本并通过 oauth2 进程登录外，无需进行任何交互。这将为您提供 access_token、refresh_token 以及 access_token 过期前的秒数 (expires_in)。只需序列化这 3 个项目（我将 expires_in 转换为绝对时间）并在您再次运行脚本时检索。此时，您可以检查 expires_in 值并决定如何继续（使用访问令牌或刷新令牌）。复习会持续 14 天，因此如果您在再次运行脚本之前等待那么长时间，那么您将不得不再次登录。但是，如果您每 14 天至少运行一次，那么理论上您将不必登录，因为每次刷新 access_token 时都会获得新的刷新。

祝你好运，

麦克风

# c# - 如何显示具有多对多关系的 SQL Server 数据库记录

> ID：13970900
> 
> 赞同：1
> 
> 时间：2012-12-20T11:11:32.263
> 
> 标签：c#, asp.net, sql-server

我正在使用 ASP.NET C# 来输出 SQL Server 数据库查询的结果，并试图让结果在每个法院仅显示一条记录，但同时也显示每个法院的多个联系方式。

相关表格为（PK 为粗体，FK 为斜体）：

法院（**Court_ID**、Court_Name、备注、城镇、邮政编码）

联系人（**Contact_ID**、Contacts_Name、Contacts_no、*Court_ID*、*Court_Contact_Type_ID*）

Contact_Type ( **Court_Contact_Type_ID** , Court_Contact_Type_Desc)

目前，我的问题是，每个法院的联系人数量与每个法院的联系次数一样多，但我会多次重复每个法院的详细信息。我知道它为什么这样做，但我不知道如何让它按照我想要的方式工作。

我不确定解决方案是在 SQL 查询本身（可能通过嵌套...？）还是在 C# 代码中，因为我使用的是“HasRows”。我在下面包含了两个代码片段。

```
string myQuery = "SELECT Court_Name, Town, Postcode, Note, Contacts_Name, Contacts_no, Court_Contact_Type_Desc " +
                 "FROM Court C, Contacts CON, Contact_type CONT " +
                 "WHERE C.Court_ID = CON.Court_ID AND CON.Court_Contact_Type_ID = CONT.Court_Contact_Type_ID AND C.Court_ID = '3' ";

SqlConnection connection = new SqlConnection(connStr);
SqlCommand myCommand = new SqlCommand(myQuery, connection);
SqlDataReader myDataReader;
connection.Open();

myDataReader = myCommand.ExecuteReader();

if (myDataReader.HasRows)
{

    while (myDataReader.Read())
    {

        string court_name = myDataReader["Court_Name"].ToString();
        string court_town = myDataReader["Town"].ToString();
        string court_pcode = myDataReader["Postcode"].ToString();
        string court_note = myDataReader["Note"].ToString();
        string court_contact_name = myDataReader["Contacts_Name"].ToString();
        string court_contact_desc = myDataReader["Court_Contact_Type_Desc"].ToString();
        string court_contacts_no = myDataReader["Contacts_no"].ToString();

        Response.Write("<strong>" + court_name + "</strong><br>" + court_town + "<br>" + court_pcode + "<p>" + court_note + "</p>" + "<p>" + court_contact_name + " - " + court_contact_desc + " : " + court_contacts_no + "</p>");

    }

} 
```

最终输出应如下所示：

**阿伯加文尼地方法院**
阿伯加文尼
NP7 5DL

该法庭仅对听证开放。额外的法庭笔记......

**联系人**
联系人姓名 1 - 代理法院经理：01633 64xxxx
联系人姓名 2 - 代理办公室经理：01633 64xxxx
联系人姓名 3 - 代理名单官员：01633 64xxxx
联系人姓名 4 - 法官书记员：01633 64xxxx

一如既往地感激地收到任何帮助！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:29:39.907

您可以这样解决问题：

*   将 court_id 添加到选择列表
*   添加排序标准，将属于同一法院的行彼此相邻
*   在遍历返回的数据时，看看你之前是否看过 Court id
*   如果这是您第一次看到法院 ID，请同时显示法院和联系方式
*   如果您以前看过此法院 ID，请仅显示联系信息

这是一个如何做到这一点的例子：

```
string myQuery = "SELECT C.Court_ID, Court_Name, Town, Postcode, Note, Contacts_Name, Contacts_no, Court_Contact_Type_Desc " +
             "FROM Court C "+
             "JOIN Contacts CON ON C.Court_ID = CON.Court_ID "+
             "JOIN Contact_type CONT ON CON.Court_Contact_Type_ID = CONT.Court_Contact_Type_ID " +
             "WHERE C.Court_ID = '3' "+ // I assume the search criteria will be different
             "ORDER BY C.Court_ID"; // Very important: records for the same court must be together

...
string last_id = string.Empty;
while (myDataReader.Read())
{
    string court_id = myDataReader["Court_ID"].ToString();
    string court_name = myDataReader["Court_Name"].ToString();
    string court_town = myDataReader["Town"].ToString();
    string court_pcode = myDataReader["Postcode"].ToString();
    string court_note = myDataReader["Note"].ToString();
    string court_contact_name = myDataReader["Contacts_Name"].ToString();
    string court_contact_desc = myDataReader["Court_Contact_Type_Desc"].ToString();
    string court_contacts_no = myDataReader["Contacts_no"].ToString();
    if (last_id != court_id) {
        // Write court AND contact
        Response.Write("<strong>" + court_name + "</strong><br>" + court_town + "<br>" + court_pcode + "<p>" + court_note + "</p>" + "<p>" + court_contact_name + " - " + court_contact_desc + " : " + court_contacts_no + "</p>");
    } else {
        // Write only contact
        Response.Write("<p>" + court_contact_name + " - " + court_contact_desc + " : " + court_contacts_no + "</p>");
    }
    last_id = court_id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:28:15.913

你可能想试试这个（如果我猜对了你想要展示的内容）。我假设联系方式和联系方式是 1:1 链接。

```
SELECT Court_Name, Town, Postcode, Note, contacts
    from Court
    where Court_ID = '3'
    CROSS APPLY
    (
    select substring((
        SELECT ',' + Contact_Name+ ' ' +Contacts_no + ' ' + Court_Contact_Type_Desc 
        FROM Contacts join Contact_Type on  Contacts.Court_Contact_Type_ID = Contact_Type.Court_Contact_Type_ID  
        WHERE Contacts.CourtID = Court.CourtID
        FOR XML PATH('')
        ),2,1000)
        as Contacts    
    ) contacts 
```

Tho，这将使您在 C# 中解析数据，然后在您的代码中编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:07:48.840

最直接的方法是将其拆分为 2 个查询。

第一个查询：获取具有指定 ID 的法院。
第二个查询：获取具有指定 ID 的法院联系人列表。

好的一面是它使事情变得简单易懂。而且，如果没有找到联系人（我不知道可能性有多大），您仍然可以输出正确的法院地址。

不利的一面是您向数据库发起了两个 SQL 查询。这可能是一个考虑性能的明智之举。

**当心**：如果您通过连接示例中的字符串来进行 SQL 查询……请注意 SQL 注入攻击！请参阅：[SQL 注入和参数化查询](http://forums.asp.net/t/1568268.aspx)

# php - 我可以让一个 div 根据里面的值改变它的背景颜色吗？

> ID：13970902
> 
> 赞同：2
> 
> 时间：2012-12-20T11:11:33.890
> 
> 标签：php, html, colors, background

我有一个 PHP 索引页面，其中来自数组的数据显示在`<div>`图片顶部的 's 内。我希望`<div>`'s 根据里面的内容改变颜色。

这个想法是这样的：

```
I have Customer   -    Date    -    Due in 
```

我的意思是数组的结构如下：

```
Array(
   [0] => array('customer' => 'John', 'date' => '2012-05-11', 'due' => 9),
   [1] => array('customer' => 'Hess', 'date' => '2011-12-11', 'due' => 5),
   [2] => array('customer' => 'Mrac', 'date' => '2012-06-18', 'due' => 3)
) 
```

由于显示了几天 -`<div>`如果里面的数字是 5 或更低，我希望它是红色的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:15:55.147

在 php 代码中，如果“Due in”小于或等于 5，则为 div 赋予不同的类。因此，在您的 PHP 中，当您循环遍历数组时：

```
<?php 
  echo "<div";
  if($myArray[i]['due'] <= 5){ echo " class='dueSoon'"; }
  echo "> $myArray[i]['customer'] - $myArray[i]['date'] - $myArray[i]['due'] </div>";
?> 
```

以便在不到 5 天时输出以下内容：

```
<div class="dueSoon"> ... </div> 
```

然后是CSS：

```
.dueSoon { background-color:red; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:15:57.640

在您的 PHP 代码中，检查此条件，如果满足条件，则向该 div 添加一个 css 类（满足条件）。

在 CSS 文件中定义 CSS 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:17:55.133

我们假设您的数组被命名为*结果*

CSS

```
.red{
background-color: red;
} 
```

以下是您必须用来打印此数组的 PHP 代码。

```
<?php foreach ($results as $result){?>
<div class="<?php if ($result['due'] < 5 || $result['due'] == 5) echo '.red';?>">
 Customer: <?php echo $result['customer']; ?>
 Date: <?php echo $result['date'];?>
 Due: <?php echo $result['due']; ?>
</div>
<?php } ?> 
```

# delphi - 如何在运行时分配 ToolButton 的 OnClick 事件？

> ID：13970907
> 
> 赞同：7
> 
> 时间：2012-12-20T11:11:48.543
> 
> 标签：delphi, runtime

我在设计时创建了一个没有工具按钮的 TToolBar。我的想法是在运行时创建 ToolButtons 并在创建表单时将它们放在那里，只是为了向用户显示打开了哪些表单，而无需在主菜单中打开“Windows”菜单。

我有一个名为 NavigationUtils.pas 的单元，用于存储有关导航的过程/功能（在创建表单时创建按钮）。

问题是：如何在创建 ToolButtons 时配置 OnClick 事件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T11:33:33.643

从评论中可以清楚地看出您没有`TNotifyEvent`为`OnClick`事件分配 a 。的声明`TNotifyEvent`是：

```
TNotifyEvent = procedure(Sender: TObject) of object; 
```

所以你需要一个过程，只有一个类型的参数`TObject`，并且这个过程必须是一个对象的方法。所以，像这样：

```
procedure TMyForm.ToolButtonClick(Sender: TObject); 
```

然后你可以像这样分配它：

```
NewToolButton.OnClick := ToolButtonClick; 
```

# javascript - 部分继承 - 在对象之间共享原始值

> ID：13970913
> 
> 赞同：1
> 
> 时间：2012-12-20T11:12:07.130
> 
> 标签：javascript, prototype, primitive, ecmascript-5

我不知道更好的标题，所以解释一下，假设你有一个“构造函数”

*   实例化一个对象并设置一些属性
    *   在 Instatiation 的过程中创建了另一个 Object
    *   这个 Objects 原型应该覆盖从第一个 Object 到他的 Children 的一些属性

因此，当第一个 Objects 属性`num`更改时，其他 Objects 原型属性`num` 也应该更改

这当然会在以下情况下`num`工作

*   包裹在一个对象中
*   非原始对象的属性/元素

但如果`num`是数字或字符串

如果将在第一个对象中被覆盖，则原型的属性不会改变，`num`因为原始变量作为值而不是通过引用传递，或者如果属性是对象并且将被新对象覆盖

**所以我的问题是，是否有任何“简洁”的方法可以让一个对象从另一个对象继承属性的原始值，并让它们共享一个引用？**

这是一些示例代码，您可以跳过第一个，这里是为了代码的完整性

```
/* Inheritance Helper*/

var base = (function baseConstructor() {

  var obj = {
    create:function instantiation() {
        if(this != base) {
        var instance = Object.create(this.pub);
         this.init.apply(instance,arguments);
         this.instances.push(instance);
        return instance;
        } else {
          throw new Error("You can't create instances of base");
        }
    },
    inherit:function inheritation() {
      var sub = Object.create(this);
      sub.pub = Object.create(this.pub);
      sub.sup = this;
      return sub;
    },
    initclosure:function initiation() {},
    instances: [],
    pub: {}

  };

  Object.defineProperty(obj,"init",{
   set:function (fn) {
     if (typeof fn != "function")
       throw new Error("init has to be a function");
     if (!this.hasOwnProperty("initclosure"))      
       this.initclosure = fn;
    },
    get:function () {
        var that = this;
        //console.log(that)
            return function() {
              if(that.pub.isPrototypeOf(this)) //!(obj.isPrototypeOf(this) || that == this))
                that.initclosure.apply(this,arguments);
              else
                throw new Error("init can't be called directly"); 
             };
    }    

  });

  Object.defineProperty(obj,"create",{configurable:false,writable:false});
    Object.defineProperty(obj,"inherit",{configurable:false,writable:false});
  return obj;
})();

/*Helpers*/
function merge (obj) {
 if(arguments.length < 2)
   throw new Error({msg:"At least 2 parameters needed"});
  for ( var i = 1, ilen = arguments.length;i < ilen; i++)
   for (var k in arguments[i])
     obj[k] = arguments[i][k];
}

/*Helpers for workarounds*/
function tieProp (prop,obj) {
  if(arguments.length < 3)
    throw new Error({msg:"At least 2 Objects are needed"});
  var ref = obj[prop];

  for ( var i = 1,ilen = arguments.length;i<ilen;i++)
      Object.defineProperty(arguments[i],prop,{
      set: function (val) {
        ref = val;
      },
      get: function () {
        return ref;
      }
    });

} 
```

所以，这是创建对象的部分

```
/*Example Code*/

var Series = base.inherit();
Series.init = function (specs) {
  var _Series = this;
      specs = specs ||{};

  this.seasons = [];

  var Season = Series.inherit();
  Season.init = function(specs) {
    var _Season = this;
        specs = specs || {};
    _Series.seasons.push(this);

    merge(this,specs);  

  };

  merge(this,specs);
  Season.pub.score = this.score; // First way
  Season.pub.stats = this.stats; // Second Way
  tieProp("scoreTied",this,Season.pub); //Third Way
  Season.pub.scoreSetter = this.scoreSetter; // Second Way

    this.updateScore = function (score) { // Forth Way
      this.scoreSetter = score;
      Season.pub.scoreSetter = score;
  };
  tieProp("someObj",this,Season.pub); //Obj Example

  this.addSeason = function (specs)  {
    Season.create(specs);
  };

};
Series.pub.toString = function () {
 return this.title + " has  a score of " + this.scoreTied ;
};

var Futurama = Series.create({
  title:"Futurama",
  score:1, // 1.
  scoreTied:2, // 2.
  stats:{ //3.
    score:3
  },
  scoreSetter:4,
  someObj:{a:"b"}
});
Futurama.addSeason(); 
```

并在我们更改属性之前记录控制台输出

```
console.log("BeforeChange",Futurama.score + " - " + Futurama.seasons[0].score); //"1 - 1"
console.log(Futurama.scoreTied + " - " + Futurama.seasons[0].scoreTied); // "2 - 2"
console.log(Futurama.stats.score +  " - " + Futurama.seasons[0].stats.score); // "3 - 3"
console.log(Futurama.scoreSetter +  " - " + Futurama.seasons[0].scoreSetter); //"4 - 4"
console.log(JSON.stringify(Futurama.someObj) + " - " + JSON.stringify(Futurama.seasons[0].someObj));  //"{"a":"b"} - {"a":"b"}" 
```

然后改变分数属性`Futurama`

```
Futurama.score = 2; //TFirst way // This will fail
Futurama.scoreTied = 3; //Second way
Futurama.stats.score = 4; // Third way 
Futurama.updateScore(5); // Forth Way
Futurama.someObj = {b:"a"}; // Object replacement 
```

并记录它们

```
console.log("After Change",Futurama.score + " - " + Futurama.seasons[0].score); // 2 - 1
console.log(Futurama.scoreTied + " - " + Futurama.seasons[0].scoreTied); // 3 - 3
console.log(Futurama.stats.score +  " - " + Futurama.seasons[0].stats.score); //4 -4 
  console.log(Futurama.scoreSetter +  " - " + Futurama.seasons[0].scoreSetter); //5 - 5
console.log(JSON.stringify(Futurama.someObj) + " - " + JSON.stringify(Futurama.seasons[0].someObj)) ; //"{"b":"a"} - {"b":"a"}" 
```

所以，这在任何使用时都是可能的

*   Object.defineProperty 为属性提供 getter 和 setter

*像 `function tieProp (prop,obj) {...`*

但我不知道在这种情况下使用 Object.defineProperty 是否合适，我真的必须设置属性描述符以让某些属性共享一个对原始值的引用吗？

*   将所有原始值包装在一个对象中，该对象将作为引用传递并更改此对象属性

*像`Season.pub.stats = this.stats; // Second Way`*

这没关系，但我对此不太满意，因为我必须将属性移动到另一个属性中，这会剥夺一些命名自由，在这个例子中，我想`score`作为 Futurama 的分数进入`Futurama.score`而不是进入`Futurama.stats.score`

*为属性编写设置器，它只是设置对象的两个值

*喜欢 `this.updateScore = function (score) { // Forth Way`*

但我宁愿远离这个，因为我必须向对象添加方法

我不知道我是否根本不应该做这样的事情，或者我只是错过了一种非常简单的方法？

任何正确方向的建议或指示将不胜感激

并提前感谢您的回答和耐心阅读本文

这是一个可以摆弄的[JSBin](http://jsbin.com/ayiqaw/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:43:31.170

使用命名函数作为属性值来共享原子元素的实例：

```
foo = {"1":1}
bar = {"1": function baz() { return foo["1"] } }

foo["1"] = 2;
foo["1"] === bar["1"](); 
```

**参考**

*   [在 Chrome 开发工具中模拟跟踪点](http://www.aaron-powell.com/posts/2015-08-30-simulating-tracepoints-in-chrome-dev-tools.html)

*   [部分应用的实际应用](http://raganwald.com/2013/01/05/practical-applications-of-partial-application.html)

# php - 时差计算

> ID：13970916
> 
> 赞同：1
> 
> 时间：2012-12-20T11:12:13.220
> 
> 标签：php, time, strtotime, date-arithmetic

这一切都让我在这里发疯。

`$now = time ();`现在给我时间戳。

问题：

确实：`$today = strtotime(date("Y-m-d"));`给我今天几秒的时间戳？从`00:00`?

我一直试图通过减去`$now`自 以来经过的总秒数来自己回答这个问题`$today`，但我得到的数字完全不同。

**编辑**

我今天得到：

`1355961600`

现在：

`1356002627`（自从我发布此消息以来，每秒增加 1 秒）

由于差异非常小，我认为应该是这样，但是当我尝试计算自己时，我得到的数量并不相同。可能是我的本地主机时间和这里的实时时间之间的差异......你们认为这是它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:16:10.207

它将给出自 1970 年 1 月 1 日 00:00:00 UTC 到今天（当前时间）的秒数。

编辑：看看 Bart Friederichs 的答案，这两个函数都做了其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:16:40.793

您的字符串`$today`为您提供来自 Ymd 的时间戳，而不是 Ymd、H:i:s。

如果你想计算从今天早上过去的秒数，比如 8 点钟。

```
$iNow = time();
$iFrom = strtotime(date('20-12-2012, 08:00:00'));

echo $iFrom - $iNow . ' seconds have past.'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:17:32.900

（现在是 12:15）：

```
php > echo time() - strtotime(date("Y-m-d"));
44116
php > echo 44116 / 3600;
12.254444444444 
```

PHP 5.3.10，在 Ubuntu 12.04 上

`time()`将给出从 Unix 纪元（1970 年 1 月 1 日 00:00:00 UTC）到“现在”的秒数。`strtotime(date("Y-m-d"))`将给出从 Unix 纪元到今天早上 00:00:00 的秒数。减去这些，你就会得到今天经过的秒数。

# php - 印度用户收费拨号 (STD) 代码的 PHP 验证代码

> ID：13970923
> 
> 赞同：4
> 
> 时间：2012-12-20T11:12:25.220
> 
> 标签：php, validation

我做了很多谷歌来获取用于验证印度可用 STD 代码的 PHP 验证代码，但无法获得。如果有人有 STD 验证码，请帮我解决这个问题。提前致谢。我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:16:21.570

准备自己的验证码..

列出所有可用代码并将它们存储在一个数组中......现在使用检查输入的代码`in_array()`

```
<?php
$os = array("079", "040", "0891");
if (in_array($_POST['std'], $os)) {
    echo "Valid";
} else {
    echo "Enter a valid code";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:15:09.993

您应该在数据库中收集和存储标准代码，并且需要从服务器端进行验证......编码与普通电子邮件存在验证相同...... :)

# android - 如何以 NDEF 格式格式化 NFC 标签

> ID：13970931
> 
> 赞同：5
> 
> 时间：2012-12-20T11:12:54.063
> 
> 标签：android, nfc

我有一个 Mifare Classic1K NFC 标签，但无法在其上写入任何内容。它是可写的，但似乎没有在 NDEF 中格式化，这是 Android 设备在其上写入数据的先决条件。欢迎任何建议。

PS：我确实有一个 TRF7960 射频天线，如果它可以帮助格式化它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T12:05:40.080

给定一个`android.nfc.Tag`名为 的对象`tag`，要对其进行格式化，请使用：

```
 NdefFormatable formatable=NdefFormatable.get(tag);

    if (formatable != null) {
      try {
        formatable.connect();

        try {
          formatable.format(msg);
        }
        catch (Exception e) {
          // let the user know the tag refused to format
        }
      }
      catch (Exception e) {
        // let the user know the tag refused to connect
      }
      finally {
        formatable.close();
      }
    }
    else {
      // let the user know the tag cannot be formatted
    } 
```

# javascript - 单击时修改 CSS 元素

> ID：13970932
> 
> 赞同：0
> 
> 时间：2012-12-20T11:12:56.447
> 
> 标签：javascript, html, css

我正在处理以下页面： http: [//mockingbirdagency.com/thebox/bettercss/login-1.html](http://mockingbirdagency.com/thebox/bettercss/login-1.html) 我对 Javascript 知之甚少，所以请帮我把它搞砸。

我希望“使用您的电子邮件地址注册”以块为中心并在单击时位于块的顶部（通过删除 margin-top: 30px;）（想法是不要有这么大的块）。

如何将其添加到 JS 函数中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:17:42.053

您可能希望为此使用 jquery 作为基本指南：

```
$("#target").click(function() {
  alert("Handler for .click() called.");
}); 
```

因此，当您单击 ID 为 target 的项目时，会显示一个警告框：“调用了 .click() 的处理程序”。

所以现在你想为你点击的那个项目添加一个样式

```
$("#target").click(function() {
      $(this).css("margin-top","0");
    }); 
```

所以，现在你点击了该项目，它运行并添加了 margin-top:0 的 CSS；到“this”，这是触发事件的项目。

显然，您需要将#target 更改为您希望触发事件的项目的ID，您也可以使用 .target 并将其应用于只有一个类的项目。

[在http://jquery.com](http://jquery.com)了解更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:33:16.403

在您的 jquery 点击处理程序中

```
$(document).ready(function() {
    $('h1').click(function() {
        $('#details').toggle(500);
    });
}); 
```

你需要添加

```
$(this).css("margin-top",""); 
```

最终代码：

```
$(document).ready(function() {
    $('h1').click(function() {
        $(this).css("margin-top","");
        $('#details').toggle(500);
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T11:18:06.773

试试这个：

```
$("#hh").click(function(){
    $(this).css("margin-top","0px");
}); 
```

# php - 关于与查询构建器的“一对多”关系的教义内连接

> ID：13970933
> 
> 赞同：4
> 
> 时间：2012-12-20T11:13:00.330
> 
> 标签：php, symfony, doctrine-orm, inner-join, one-to-many

我有以下 ER，我需要使用查询生成器在 Symfony2-Doctrine 中执行以下查询（仅在请求特定过滤器时才使用连接）

```
SELECT *
FROM
  `session`
  INNER JOIN `goal` ON (`session`.`id` = `goal`.`session_id`)
WHERE
  `goal`.`name` = 'Background Dx' AND 
  `session`.`gsite_id` = '66361836' 
```

![急诊室](../Images/b0fbee78bc8c0b5abeb2a9d1890c353e.png)

目标宣言

```
/**
....
 *
 * @ORM\Table(name="goal")
 * @ORM\Entity
 */
class Goal
{
    ...
    /**
     * @var Session
     *
     * @ORM\ManyToOne(targetEntity="Session")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="session_id", referencedColumnName="id")
     * })
     */
    private $session;
    ...
} 
```

会话类不包含对目标的任何引用

通过阅读在线文档，学说似乎需要在实体 Session 上存在列来执行请求的加入。真的是这样，还是有别的办法？

我的查询生成器

```
$rep = $this->em->getRepository(Session::repositoryName);
$qb = $rep->createQueryBuilder("s");

$qb->setMaxResults(50);

//site
if ($params->site != null){
    /** @var Gsite **/
    $site = $params->site;
    $qb->andWhere($qb->expr()->eq("s.site",":site"))->setParameter("site",$site);
}
if (isset($params->goalName)){
    ///SOMETHING
    ....
    ...
    ...
}

$query = $qb->getQuery();
$paginator = new Paginator($query);
return $paginator; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T14:19:13.363

您不需要从 Session 到 Goal 的引用来执行加入。但是，Doctrine 不知道将 Goal 数据映射到 Session 对象（所以你不会得到它）。

```
$qb->innerJoin('You\YourBundle\Entity\Goal', 'g', Expr\Join::WITH, 's.id = g.session')
->where('g.name = :goalName')->andWhere('s.gsiteId = :gsiteId')
->setParameter('goalName', 'Background Dx')->setParameter('gsiteId', '66361836'); 
```

希望我能正确理解你的问题。

# javascript - 如何使用 jquery 或 javascript 将锚标记添加到段落中的选定文本

> ID：13970934
> 
> 赞同：0
> 
> 时间：2012-12-20T11:12:59.287
> 
> 标签：javascript, jquery-ui, jquery

我在文本区域或编辑器中有一些文本。当我选择一些代码然后单击添加链接时，我需要将所选文本转换为链接。我怎么能用jquery做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:19:27.960

结合[Rangyinputs jQuery 插件](http://code.google.com/p/rangyinputs/)，您可以使用以下代码

```
var url = "http://stackoverflow.com/";
$("#yourTextAreaId").surroundSelectedText('<a href="' + url + '">', '</a>'); 
```

或者，对于富文本编辑器，您可以查看这个[简单、轻量级的富文本编辑器](http://batiste.dosimple.ch/blog/posts/2007-09-11-1/rich-text-editor-jquery.html)

有关 Rangyinputs 插件功能的简单演示，请参阅此[小提琴](http://jsfiddle.net/aGJDa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:30:46.390

如果您需要的不仅仅是编辑器中的链接，比如完整的所见即所得编辑器，请尝试[CKEditor](http://ckeditor.com/)。

否则，如果它只是您需要的便捷链接功能，让用户粘贴 URL 并在您稍后检索文本时尝试我的[jQuery urlTolink 插件](http://gabrielizaias.com/articles/jquery-urltolink-plugin/)。

# php - 如何防止 CodeIgniter 中的重复记录

> ID：13970942
> 
> 赞同：1
> 
> 时间：2012-12-20T11:13:39.120
> 
> 标签：php, sql, codeigniter, phpmyadmin

然后，我会选择的人将在我的朋友数据库中出现两次。如何防止重复条目进入此处？我尝试使用存在 sql 命令但没有运气

朋友型号：

```
 function addFriend($username, $friendname)
 {
$record = array('username'=> $username,
                 'friend' => $friendname);

$this->db->insert('friends', $record);

 }

 function getFollowing($username)
{
$following = array();
$this->db->select('*')->from('friends')->where('username', $username);
$followingSet = $this->db->get();
foreach ($followingSet->result() as $row)
{
    if(isset($username)){

        $following[] = $row->friend;
    }
    else 
    {
        return false;

    }

}

return $following;
} 
```

看法：

```
 <?php foreach($friends['following'] as $name):?>
        <li>  <?=anchor("profile/view/$name", $name)?>, (<?=anchor("home/drop/$name", 'drop')?>)</li>
      <?php endforeach?>= 
```

我想要做的是停止在我的数据库中出现重复的条目 - 我将如何在我的 sql 语句中使用 exists 关键字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:54:27.057

只需在插入之前检查用户名/朋友名是否存在：

```
$q =  $this->db->select('username')
      ->from('friends')
      ->where(array('username' => $username, 'friend' => $friendname))->get();
if($q->num_rows() == 0){
    //insert goes here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:09:03.733

我认为您没有设置表格以获得更好的性能。

```
CREATE TABLE friends (
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
userId INT UNSIGNED NOT NULL,
friendId INT UNSIGNED NOT NULL,
FOREIGN KEY (userId)
    REFERENCES users(userId)
    ON UPDATE CASCADE ON DELETE CASCADE,
FOREIGN KEY (friendId)
    REFERENCES users(userId)
    ON UPDATE CASCADE ON DELETE CASCADE,
PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
ALTER TABLE friends ADD UNIQUE INDEX (userId, friendId); 
```

这种通过 id 存储朋友的清晰简单的解决方案可以防止重复。InnoDB 引擎维护您的数据完整性，并且当您从 users 表中删除某人时 - Friends 表中包含该用户的好友的所有行将被自动删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:19:26.847

当您插入时，您可以调用您的`getFollowing`方法并像这样进行：

```
function add_follower($username, $friend_username)
{
    $current_followers = $this->getFollowing($username);

    if(!in_array($friend_username, $current_followers)
    {
        // Add to followers
    }
 } 
```

为此，您需要将您的更改`getFollowing`为：

```
function getFollowing($username)
{
    $following = array();

    $this->db->select('*')->from('friends')->where('username', $username);

    $followingSet = $this->db->get();

    foreach ($followingSet->result() as $row)
    {
        $following[] = $row->friend;
    }
    return $following;
} 
```

这可能不会 100% 正确，因为我不知道您的数据库/模型是如何配置的。但它应该让您大致了解如何执行此操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:50:03.343

在插入新记录之前，您必须在数据库中进行检查，因为数据库中已经存在任何条目。下面是代码...

```
function addFriend($username, $friendname)
{
    $user_name = $this->getFollowing($username);

    if( empty($user_name) )
    {
         $record = array('username'=> $username,
             'friend' => $friendname);

         $this->db->insert('friends', $record);
    }
}

function getFollowing($username)
{
    $following = array();
    $this->db->select('*')->from('friends')->where('username', $username);
    $followingSet = $this->db->get();

    if( !empty($followingSet) )
    {
         foreach ($followingSet->result() as $row)
         {
              $following[] = $row->friend;
         }
    }
    return $following;
 } 
```

另外，我希望您建议，在使用之前始终检查数组是否为空。就像你在**foreach**循环中使用它一样，循环会产生错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-28T17:16:58.813

试试这个你想应用查询来阅读的地方，在数据库查询中应用不同

```
 $this->db->distinct(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-17T22:32:32.287

在你的模型中尝试这样的事情：

```
/**
 * Return true if don't find row in DB.
 * @param array $ay_value
 * @param array $ay_column
 * @param string $table
 * @throws Exception
 * @return boolean
 */

public function check_double_content($ay_value, $ay_column, $table) {

    if ((is_array($ay_value)) AND (is_array($ay_column))) {

        if (count($ay_value) == count($ay_column)) {

            foreach ($ay_column AS $key => $column) {
                $this->db->where($column, $ay_value[$key]);
            }

            $this->db->from($table);
            $query = $this->db->get();

            if ($query->num_rows() > 0) {
                return false;
            } else {
                return true;
            }

        } else {
            throw new Exception("\$ay_value and \$ay_coulm must have same rows");
        }

    } else {
        throw new Exception("\$ay_value and \$ay_column must by array");
    }

} 
```

# algorithm - 将优先表翻译成适合递归下降的语法？

> ID：13970943
> 
> 赞同：3
> 
> 时间：2012-12-20T11:13:43.550
> 
> 标签：algorithm, parsing

如果我们有一种仅由原子元素和一元和二元运算符组成的语言：

```
atomic elements: a b c
unary operators: ! ~ + -
binary operators: + - / * 
```

然后我们可以定义一个语法：

```
ATOM := a | b | c
UNOP := ! | ~ | + | -
BINOP := + | - | / | *
EXPR := ATOM | UNOP EXPR | EXPR BINOP EXPR 
```

然而，这种语法会导致不明确的解析树（以及由于左递归导致的递归下降解析器中的无限循环）。

所以我们添加一个优先表：

```
Precendence 1: unary+ unary- ~ ! (Right to Left)
Precendence 2: * / (Left to Right)
Precendence 3: binary+ binary- (Left to Right) 
```

我的问题是我们可以通过什么算法或程序获取优先表并为递归下降解析器（不是左递归）生成适当的语法。

优先表是操作员组和相关方向（L->R 或 R<-L）的有序列表。答案是将其作为输入并产生语法作为输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-09T15:37:25.147

描述任意优先级的通用语法可以使用基于表的 LALR 解析器进行解析，并且可以使用 yacc 生成。但这并不意味着当您希望使用递归下降解析器时一切都会丢失。

递归下降解析器只能验证语法是否正确。构建语法树是另一回事，应该在树构建级别处理优先级。

因此，请考虑以下可以解析中缀表达式的没有左递归的语法。没有什么特别的没有优先的迹象：

```
Expr := Term (InfixOp Term)*
InfixOp := '+' | '-' | '*' | '/'
Term := '(' Expr ')'
Term := identifier 
```

（右侧使用的符号类似于正则表达式，使用大驼峰写的替换规则，使用小驼峰引用或写标记的规则）。

在构建语法树时，您有一个*当前节点*，您可以向其中添加新节点。

大多数情况下，当您解析规则时，您会在当前节点上创建一个新的子节点并使该子节点成为当前节点。完成解析后，您将进入父节点。

现在，当您解析`InfixOp`规则时，应该采取不同的做法。您应该为相关节点分配优先级强度。`Expr`节点具有最弱的优先级，而所有其他运算符具有更强的优先级。

# 处理中缀优先级

解析`InfixOp`规则时，请执行以下操作：

1.  当当前节点的优先级强于传入节点的优先级时，继续上一级（使父节点成为当前节点）。

2.  然后插入传入节点的节点作为当前节点的最后一个子节点的父节点并使其成为当前节点。

由于`Expr`节点声明具有最弱的优先级，它将最终停止爬升。

让我们看一个例子：`A+B*C`

`!`在使用当前令牌后，当前节点始终标记为。

```
Parsed: none

Expr!

Parsed: A

Expr!
|
A

Parsed: A+

Expr
|
+!
|
A

Parsed: A+B

  Expr
  |
  +!
 / \
A   B

Parsed: A+B*

  Expr
  |
  +
 / \
A   *!
   /
  B

Parsed: A+B*C

  Expr
  |
  +
 / \
A   *!
   / \
  B   C 
```

如果您以后序方式遍历它，您将获得可用于评估它的表达式的反向波兰符号。

或者反过来一个例子：`A*B+C`

```
Parsed: none

Expr!

Parsed: A

Expr!
|
A

Parsed: A*

Expr
|
*!
|
A

Parsed: A*B

  Expr
  |
  *!
 / \
A   B

Parsed: A*B+

  Expr
  |
  +!
  |
  *
 / \
A   B

Parsed: A*B+C

    Expr
    |
    +!
   / \
  *   C
 / \
A   B 
```

# 处理关联性

有些运算符是左结合的，而另一些是右结合的。例如，在 C 语言家族中，`+`是左结合的，而`=`是右结合的。

实际上，整个关联性归结为对相同优先级的运算符的处理。对于爬升时的左结合运算符，当您遇到具有相同优先级的运算符时，会继续上升。对于右结合运算符，遇到相同的运算符时停止。

（演示所有技术需要太多空间，我建议在一张纸上尝试一下。）

# 处理前缀和后缀运算符

在这种情况下，您需要稍微修改语法：

```
Expr := PrefixOp* Term PostfixOp* (InfixOp PrefixOp* Term PostfixOp*)*
InfixOp := '+' | '-' | '*' | '/'
Term := '(' Expr ')'
Term := identifier 
```

遇到前缀运算符时，只需将其作为新子节点添加到当前节点，并将新子节点作为当前节点，无论优先级，无论是强运算符还是弱运算符，都会正确，优先级攀登规则中缀运算符确保正确性。

对于后缀运算符，您可以使用我在中缀运算符中描述的相同优先级攀登，唯一的区别是我们没有后缀运算符的右侧，因此它只有 1 个孩子。

# 处理三元运算符

C 语言家族有`?:`三元运算符。关于语法树构建，您可以将`?`和`:`作为单独的中缀运算符处理。但是有一个窍门。您为 创建的节点`?`应该是一个不完整的三元节点，这意味着您执行通常的优先级攀爬并放置它，但是这个不完整的节点将具有最低的优先级，这可以防止更弱的运算符（例如逗号运算符）越过它。当你到达时，`:`你必须爬到第一个不完整的三元节点（如果没有找到，则报告语法错误），然后将其更改为具有正常优先级的完整节点，并使其成为当前节点。如果在当前分支上存在不完整的三元节点时意外到达表达式的末尾，再次报告语法错误。

所以`a , b ? c : d`被解释为`a , (b ? c : d)`。

但是`a ? c , d : e`将被解释为`a ? (c , d) : e`，因为我们阻止了逗号越过 ?。

# 处理数组索引和函数调用

尽管出现后缀，但它们是中缀运算符，右侧有句法强制括号术语，数组索引和函数调用也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:19:42.933

将运算符优先语法转换为语法 [1] 很容易`LR(1)`，但生成的语法将使用左递归来解析左关联运算符。消除左递归很容易——例如，使所有运算符右结合——但是虽然生成的语法识别相同的语言，但解析树是不同的。

事实证明，稍微修改递归下降解析器以处理优先关系并不难。该技术是由[Vaughan Pratt](http://en.wikipedia.org/wiki/Vaughan_Pratt)发明的，本质上是使用调用堆栈来替代经典[调车场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)中的显式堆栈。

Pratt 解析似乎正在经历某种复兴，你可以找到很多关于它的博客文章；一部相当不错的作品是[Eli Bendersky](http://eli.thegreenplace.net/2010/01/02/top-down-operator-precedence-parsing/)的作品。Pratt 在 1970 年代初设计了这个程序，大约在同一时间，Frank deRemer 证明了`LR(1)`解析是实用的。Pratt 对形式解析的实用性和不灵活性持怀疑态度。我认为从那时起，这场辩论就一直在酝酿之中。Pratt 解析器确实简单而灵活，但另一方面，很难证明它们是正确的（或者它们解析了特定的正式描述的语法）。另一方面，尽管`bison`最近获得了对 GLR 解析的支持，这使得它使用起来可能不那么烦躁，尽管事实上`bison`- 生成的解析器实际上解析了他们声称要解析的语法，仍然有许多人同意 Pratt 的声明（从 1973 年开始），即正式的解析方法“不那么易于使用并且使用起来不那么愉快”。

* * *

[1] 在实践中，所有 yacc-derivatives 和许多其他 LR 解析器生成器都将接受优先关系来消除歧义；生成的语法表更小，涉及的单元减少更少，因此如果您要使用解析器生成器，没有特别好的理由不使用此技术。

# java - 在 Windows 上的 args[] 数组中传递转义序列

> ID：13970946
> 
> 赞同：5
> 
> 时间：2012-12-20T11:13:46.310
> 
> 标签：java, regex, windows, command-line-arguments

我正在阅读 SCJP 指南，发现了以下问题，它看起来很简单，对某些人来说可能很容易。但是，我真的很难找到解决方案。

```
import java.util.regex.*;

class study{

    public static void main(String[] args) {
      Pattern p = Pattern.compile(args[0]);
      Matcher m = p.matcher(args[1]);
      boolean b=false;
      while(b=m.find()){
      System.out.print(m.start()+" "+m.group());
     }
    }

} 
```

在那个问题中，命令行参数的给出如下

```
java study "\d*" ab34ef 
```

而且，说输出是什么，我的猜测是**334**或**234**，它在那个选项中。但是，答案（***在 Windows 上***）是**01234456**。所以，我的第一个问题是**How ??**

现在，人们说，你为什么不尝试。然后，我会说，是的，我做到了。但是，就我而言，我的屏幕上没有任何输出。然后，我试图弄清楚考虑所有类型的输入及其值。

![在此处输入图像描述](../Images/d5ba1f677c150ed2665deaa19e8f70c0.png)

在上面的屏幕截图中，当我包含`System.out.print(args[0]+" "+args[1]);`在 main 方法中时，显示了第二个输出。

甚至，我把命令行改成了这个

```
java study "\\d*" ab34ef 
```

然后，我也没有得到任何输出。所以，任何人都可以解释这一切。

**输出==**

```
java study "\d*" ab34ef
No output
java study "\\d*" ab34ef
No output 
```

然后我`System.out.print(args[0]+" "+args[1]);`在 main 方法中添加。

```
java study "\d*" ab34ef
\Document and Setting ab34ef
java study "\\d*" ab34ef
\\d* ab34ef 
```

**注意：**没有输出意味着它没有显示任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:42:41.680

实际上发生的情况是，当您`\d*`作为命令行参数传递时，它被视为`\d`后跟`*`通配符。因此，该参数将替换为以该目录开头的所有文件`\d`。（这种行为发生在`Windows`。虽然我不知道`Linux`，因为我没有使用它）。

因此，您没有将正则表达式传递给`\d`程序，而是以 in 开头的文件/目录名称。

尝试在代码中打印参数：-

```
System.out.println(args[0] + " : " + args[1]); 
```

这将为您提供一些以开头的文件/目录名称`\d...`

* * *

**解决方法： -**

如果你想通过正则表达式，你可以使用变通方法。作为正则表达式传递`" \d*"`，前面有一个空格，在你的代码中，使用`args[0].trim()`or`args[0].replace(" ", "");`代替`args[0]`.

因此，将其称为：-

```
java Foo " \d*" ab34ef 
```

并将您的代码更改为： -

```
Pattern p = Pattern.compile(args[0].replace(" ", ""));
Matcher m = p.matcher(args[1]); 
```

这将为您完成工作。

* * *

现在这就是通过命令行传递正则表达式的问题。

至于为什么要获得该输出，请查看此答案 - [string-replaceall-strange-behaviour](https://stackoverflow.com/questions/13960302/string-replaceall-strange-behaviour/13960331#13960331)，这是关于类似问题的。您将了解为什么会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:23:39.663

我得到了你想要的结果

```
java study "\d*" ab34ef 
```

但也许尝试相同，如`Rohit Jain`评论：

```
java study "\\d*" ab34ef 
```

但它应该适用于您的线路！（在linux上可以，可能是windows问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:28:57.000

试试这个。

```
java study d* ab34ef 
```

这就是为什么。

转义序列适用于 Java 编译器，例如，编译器将看到一个 '\' 后跟一个 'n'，并将它们都替换为单个换行符。程序运行时，转义序列对 Java 毫无意义；当它们出现在源代码中时，它们仅对编译器有意义。

将特殊字符嵌入到 Java 程序的参数中实际上根本不是 Java 问题——而是操作系统问题。

如果你想从你的源代码做同样的事情，你必须像下面这样传递字符串。

```
Pattern p = Pattern.compile("\\d*");
Matcher m = p.matcher("ab34ef"); 
```

如果您想通过命令行运行，只需传递不带转义字符即可

```
 d* ab34ef 
```

使用诸如*Eclipse*之类的 IDE并进行调试以查找其传递的确切内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:42:00.273

要回答您问题的第一部分，正则表达式`\d*`匹配*零*个或多个数字，即允许匹配的内容之一是空字符串。因此给定输入字符串

```
ab34ef 
```

模式匹配

*   位置 0 处的空字符串
*   位置 1 的空字符串
*   `34`位置 2的字符串
*   位置 4 的空字符串
*   位置 5 的空字符串
*   位置 6 的空字符串

这解释了预期的答案。

# joomla - href mailto 在 Joomla 2.5 模块中不起作用

> ID：13970947
> 
> 赞同：1
> 
> 时间：2012-12-20T11:13:48.690
> 
> 标签：joomla, joomla2.5, joomla-module

我正在建立一个新的 Joomla 2.5 网络，我发现了这个问题。

当我在文章中使用 mailto 链接时，一切都按预期工作，但如果我在模块中执行相同操作，javascript 代码会替换电子邮件。

一些示例源输出：

```
<a class="contact-icons mail" href="mailto:
<script type='text/javascript'>
<!--
var prefix = '&#109;a' + 'i&#108;' + '&#116;o';
var path = 'hr' + 'ef' + '=';
var addy21722 = 'example@example.com';
document.write('<a ' + path + '\'' + prefix + ':' + addy21722 + '\'>');
document.write(addy21722);
document.write('<\/a>');
//-->\n </script><script type='text/javascript'>
<!--
document.write('<span style=\'display: none;\'>');
//-->
</script>
<script type='text/javascript'>
<!--
document.write('</');
document.write('span>');
//-->
</script>"></a> 
```

我可以看到问题在于混淆代码，但我不明白为什么只在模块中失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:18:02.003

我相信是电子邮件伪装导致您出现这种情况。阅读此主题页面以了解[更多信息](http://forum.joomla.org/viewtopic.php?p=1468391)。

# ios - UICollectionView 间距边距

> ID：13970950
> 
> 赞同：192
> 
> 时间：2012-12-20T11:14:03.413
> 
> 标签：ios, uicollectionview, uikit

我有一个`UICollectionView`显示照片的。我已经使用`UICollectionViewFlowLayout`. 它工作得很好，但我想在边距上有间距。是否可以使用`UICollectionViewFlowLayout`或必须自己实现`UICollectionViewLayout`？

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2013-01-15T10:48:23.800

您可以使用您的`collectionView:layout:insetForSectionAtIndex:`方法`UICollectionView`或设置附加到您`sectionInset`的对象的属性：`UICollectionViewFlowLayout``UICollectionView`

```
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section{
    return UIEdgeInsetsMake(top, left, bottom, right);
} 
```

或者

```
UICollectionViewFlowLayout *aFlowLayout = [[UICollectionViewFlowLayout alloc] init];
[aFlowLayout setSectionInset:UIEdgeInsetsMake(top, left, bottom, right)]; 
```

# 为**Swift 5更新**

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -> UIEdgeInsets {
       return UIEdgeInsets(top: 25, left: 15, bottom: 0, right: 5)
    } 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2014-05-21T22:09:01.760

在 Interface Builder 中设置插入，如下面的屏幕截图所示

![为 UICollectionView 设置部分插图](../Images/c3257bf34dda64e7611c15d4c8eb9f31.png)

将导致这样的事情：

![带有部分插图的集合视图单元格](../Images/925b493a278cf7825b470c19c9a3ebe0.png)

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2013-03-18T14:47:12.430

要在**整个** `UICollectionView`上添加间距：

```
UICollectionViewFlowLayout *flow = (UICollectionViewFlowLayout*) collection.collectionViewLayout;
flow.sectionInset = UIEdgeInsetsMake(topMargin, left, bottom, right); 
```

**要使用同一行的元素之间**的间距（如果您水平滚动，则为列）及其大小：

```
flow.itemSize = ...;
flow.minimumInteritemSpacing = ...; 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2016-05-11T14:21:02.253

**斯威夫特 4**

```
 let flow = collectionView.collectionViewLayout as! UICollectionViewFlowLayout 
    // If you create collectionView programmatically then just create this flow by UICollectionViewFlowLayout() and init a collectionView by this flow.

    let itemSpacing: CGFloat = 3
    let itemsInOneLine: CGFloat = 3
    flow.sectionInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0)

    //collectionView.frame.width is the same as  UIScreen.main.bounds.size.width here.
    let width = UIScreen.main.bounds.size.width - itemSpacing * CGFloat(itemsInOneLine - 1) 
    flow.itemSize = CGSize(width: floor(width/itemsInOneLine), height: width/itemsInOneLine)
    flow.minimumInteritemSpacing = 3
    flow.minimumLineSpacing = itemSpacing 
```

**编辑**

如果要更改为`scrollDirction`水平：

`flow.scrollDirection = .horizontal`

**笔记**

如果您在一行中设置的项目不正确，请检查您的集合视图是否有填充。那是：

`let width = UIScreen.main.bounds.size.width - itemSpacing * CGFloat(itemsInOneLine - 1)`

应该是 collectionView 的宽度。

[![在此处输入图像描述](../Images/d78246c242bf5288008e03bccac83468.png)](https://i.stack.imgur.com/tXTrY.jpg)

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2013-07-08T06:09:05.373

只是为了更正此页面中的一些错误信息：

1- **minimumInteritemSpacing**：*在同一行中的项目之间使用的最小间距。*

默认值：10.0。

（对于垂直滚动的网格，此值表示同一行中项目之间的最小间距。）

2- **minimumLineSpacing**：*网格中项目行之间使用的最小间距。*

参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-11-15T13:17:58.737

## **现代 Swift，自动布局计算**

虽然这个线程已经包含了一堆有用的答案，但我想添加一个**现代的 Swift 版本**，基于 William Hu 的答案。它还改进了两件事：

*   不同行之间的间距现在将始终与同一行中项目之间的间距匹配。
*   通过设置最小宽度，代码会自动计算一行中的项目数并将该样式应用于流布局。

这是代码：

```
// Create flow layout
let flow = UICollectionViewFlowLayout()

// Define layout constants
let itemSpacing: CGFloat = 1
let minimumCellWidth: CGFloat = 120
let collectionViewWidth = collectionView!.bounds.size.width

// Calculate other required constants
let itemsInOneLine = CGFloat(Int((collectionViewWidth - CGFloat(Int(collectionViewWidth / minimumCellWidth) - 1) * itemSpacing) / minimumCellWidth))
let width = collectionViewWidth - itemSpacing * (itemsInOneLine - 1)
let cellWidth = floor(width / itemsInOneLine)
let realItemSpacing = itemSpacing + (width / itemsInOneLine - cellWidth) * itemsInOneLine / max(1, itemsInOneLine - 1)

// Apply values
flow.sectionInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0)
flow.itemSize = CGSize(width: cellWidth, height: cellWidth)
flow.minimumInteritemSpacing = realItemSpacing
flow.minimumLineSpacing = realItemSpacing

// Apply flow layout
collectionView?.setCollectionViewLayout(flow, animated: false) 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-12-20T11:18:57.473

在-Object上使用`setMinimumLineSpacing:`和。`setMinimumInteritemSpacing:``UICollectionViewFlowLayout`

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-07-20T09:55:20.687

使用`collectionViewFlowLayout.sectionInset`or`collectionView:layout:insetForSectionAtIndex:`是正确的。

但是，如果您的 collectionView 有多个部分，并且您想为整个 collectionView 添加边距，我建议使用 scrollView contentInset ：

```
UIEdgeInsets collectionViewInsets = UIEdgeInsetsMake(50.0, 0.0, 30.0, 0.0);
self.collectionView.contentInset = collectionViewInsets;
self.collectionView.scrollIndicatorInsets = UIEdgeInsetsMake(collectionViewInsets.top, 0, collectionViewInsets.bottom, 0); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-06-28T12:37:09.943

要在 s 之间放置空格，`CollectionItem`请使用此

**在 viewdidload 中写下这两行**

```
UICollectionViewFlowLayout *collectionViewLayout = (UICollectionViewFlowLayout*)self.collectionView.collectionViewLayout;
collectionViewLayout.sectionInset = UIEdgeInsetsMake(<CGFloat top>, <CGFloat left>, <CGFloat bottom>, <CGFloat right>) 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-01-11T11:16:29.670

设置附加到您`insetForSectionAt`的对象的属性`UICollectionViewFlowLayout``UICollectionView`

**确保添加此协议**

```
UICollectionViewDelegateFlowLayout 
```

**迅速**

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -> UIEdgeInsets {
        return UIEdgeInsets (top: top, left: left, bottom: bottom, right: right)
    } 
```

**目标 - C**

```
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section{
    return UIEdgeInsetsMake(top, left, bottom, right);
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-03-06T20:59:17.117

**在 Objective-C 中**

```
CGFloat spacing = 5;
UICollectionViewFlowLayout *flow = (UICollectionViewFlowLayout*)_habbitCollectionV.collectionViewLayout;
flow.sectionInset = UIEdgeInsetsMake(0, spacing, 0, spacing);
CGFloat itemsPerRow = 2;
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat oneMore = itemsPerRow + 1;
CGFloat width = screenRect.size.width - spacing * oneMore;
CGFloat height = width / itemsPerRow;

flow.itemSize = CGSizeMake(floor(height), height);
flow.minimumInteritemSpacing = spacing;
flow.minimumLineSpacing = spacing; 
```

您所要做的就是更改 itemsPerRow 值，它会相应地更新每行的项目数。此外，如果您想要更多或更少的一般间距，您可以更改间距值。

[![在此处输入图像描述](../Images/288c3c6be078a8e9e0a58eb73b91500f.png)](https://i.stack.imgur.com/5YdwY.png) [![在此处输入图像描述](../Images/f9a484a9ba3218e199929d890bceb68e.png)](https://i.stack.imgur.com/AQ50Y.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-04-13T16:04:21.747

要为指定单元格添加边距，您可以使用此自定义流布局。 [https://github.com/voyages-sncf-technologies/VSCollectionViewCellInsetFlowLayout/](https://github.com/voyages-sncf-technologies/VSCollectionViewCellInsetFlowLayout/)

```
extension ViewController : VSCollectionViewDelegateCellInsetFlowLayout 
{
    func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForItemAt indexPath: IndexPath) -> UIEdgeInsets {
        if indexPath.item == 0 {
            return UIEdgeInsets(top: 0, left: 0, bottom: 10, right: 0)
        }
        return UIEdgeInsets.zero
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-25T18:20:54.200

在 swift 4 和 autoLayout 中，您可以像这样使用**sectionInset**：

```
let layout = UICollectionViewFlowLayout()
        layout.scrollDirection = .vertical
        layout.itemSize = CGSize(width: (view.frame.width-40)/2, height: (view.frame.width40)/2) // item size
        layout.sectionInset = UIEdgeInsetsMake(10, 10, 10, 10) // here you can add space to 4 side of item
        collectionView = UICollectionView(frame: self.view.bounds, collectionViewLayout: layout) // set layout to item
        collectionView?.register(ProductCategoryCell.self, forCellWithReuseIdentifier: cellIdentifier) // registerCell
        collectionView?.backgroundColor = .white // background color of UICollectionView
        view.addSubview(collectionView!) // add UICollectionView to view 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-10-31T00:33:36.790

To add 10px separation between each section just write this

```
flowLayout.sectionInset = UIEdgeInsetsMake(0.0, 0.0,10,0); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-07-01T08:37:35.627

```
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {       
         return UIEdgeInsetsMake(7, 10, 5, 10);    
   } 
```

# ruby-on-rails - Rails 基础控制器一般参数

> ID：13970951
> 
> 赞同：1
> 
> 时间：2012-12-20T11:14:08.353
> 
> 标签：ruby-on-rails, controller

A 有一个用于我的管理命名空间的基本控制器

```
class Admin::AdminController < ApplicationController

  def update
    entity = @source.find(params[:id])
    close_popup entity.update_attributes(params[@param_name])? {return_url => @url}:{}
  end

  ...

end 
```

我所有的管理控制器都来自 AdminController，例如：

```
class Admin::ProductsController < Admin::AdminController
  @source = Admin::Product
  @url = admin_products_url
  @param_name = :admin_product
end 
```

现在，我的问题是如何避免在派生类中设置这些参数。为此，我需要从基本控制器本身了解

1.  它与什么支架有关。（ @来源 ）
2.  列出实体的 url (@url)
3.  来自与实体关联的 POST 的参数名称 (@param_name)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:24:49.603

好吧，如果您确定所有这些控制器都将采用您提到的格式，您可以执行以下操作：

`before_filter`在`class Admin::AdminController`命名中定义一个`set_default_parmas`

```
class Admin::AdminController < ApplicationController
  before_filter :set_default_params

  def set_default_params
    resource_name = controller_name.singularize
    @source = "Admin::#{resource_name.camelize}".constantize
    @url = self.send("admin_#{controller_name}_url")
    @param_name = "admin_#{resource_name}".to_sym
  end

end 
```

引用使用的方法： [singularize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-singularize)、[constantize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)、[camelize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-camelize)和[controller_name](http://apidock.com/rails/ActionController/Base/controller_name/class)

# android - Android ADB Shell 不启用包

> ID：13970952
> 
> 赞同：6
> 
> 时间：2012-12-20T11:14:08.433
> 
> 标签：android, apk, adb, samsung-mobile, android-package-managers

我要求 pm（包管理器）启用某些包，但它没有启用并显示消息“**新状态：禁用**”

> shell@android:/ $ pm enable my.app.com
> 
> 打包 my.app.com 新状态：禁用

奇怪……好像是个bug……

> 三星 GT-P3100 安卓 4.0.3

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-14T16:03:08.750

您可能需要**root**才能`pm disable <app_package>`在系统应用程序上使用该命令。

# java - GWT 画布的命中检测 - 绘图的哪种策略？

> ID：13970955
> 
> 赞同：1
> 
> 时间：2012-12-20T11:14:22.393
> 
> 标签：java, gwt, java-canvas

我正在使用 GWT Canvas (Java) 创建某种绘图/流程图/UML 图表之类的工具。对于我的图纸的命中检测，我可以想象 3 种不同的策略，但我不知道哪种策略最适合我的目标。

*   只需跟踪所有形状坐标并在鼠标单击时迭代所有对象
*   在鼠标单击时在幽灵画布上绘制所有对象，并在每次绘制对象后使用 isPointInPath()
*   使用幽灵画布并用自己的颜色绘制每个对象（如#000001、#000002），并将它们的引用保存在地图中。然后只需检测ghost-canvas上的鼠标点击并获取属于鼠标下pixelcolor的对象

你更喜欢什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:22:33.180

我认为第一种方法是最好的，很可能你会保持对形状的引用（即当你想移动或调整显示对象的大小时），所以你需要做的就是实现额外的方法`boolean isIn(Point mouseclick,Shape shape)`（因为 if 的实现可能不同每种类型的物体，如果你把它放在你的形状上会更好）

我不确定你希望你的 ghostcanvas 如何工作，但恕我直言，绘制任何额外的东西听起来像是对资源的巨大浪费。

您的第三个策略将需要从图像/画布中获取原始像素，这可能是昂贵的操作

# php - 使用 dompdf 将 HTML 转为 PDF

> ID：13970956
> 
> 赞同：4
> 
> 时间：2012-12-20T11:14:22.400
> 
> 标签：php, html, css, dompdf

我正在尝试使用`dompdf`转换`HTML`为`PDF`. 我要匹配的格式是： ![正确的格式](../Images/4252659bba836102eb25e107eb800603.png)

但是，生成的 PDF 存在以下格式问题：
![我得到的格式](../Images/97e177d103353668e13f4e179d142731.png)

第一列的属性是：

```
<td style="width:85% !important;"><p>asdasdasd</p></td> 
```

第二列的属性是：

```
<td style="width:100px;vertical-align:top; text-align:center;">1234</td> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:13:33.920

对于迟到的答案感到抱歉，但它与与表格相关的 css 有关。稍微调整一下，错误就消失了。
我们必须在 css 中提供固定宽度尺寸来解决它。

# xcode - 如何使用 atos 手动符号化崩溃日志

> ID：13970959
> 
> 赞同：7
> 
> 时间：2012-12-20T11:14:40.857
> 
> 标签：xcode, terminal, memory-address, symbolicatecrash, crash-log

在整个互联网上搜索以找到一种方法来符号化我从 Apple 收到的崩溃日志后，我终于想出了如何在终端中使用 atos 命令来符号化崩溃日志。我在同一个文件夹中有 dSYM 文件、.app 文件和崩溃日志，并且使用`atos -arch armv7 -o APPNAME`我已经能够输入内存地址，有时（但很少）会出现方法名称。老实说，我对终端或崩溃日志没有太多经验。不幸的是，尝试从 Xcode 的管理器中符号化崩溃日志并没有做任何事情，并且尝试`symbolicatecrash`在 Xcode 的包内容中使用该文件也失败了。所以我在这里，留下了我所知道的唯一其他选择。

现在，我的问题是：如何对这些内存地址进行正面或反面？我必须输入哪些地址才能到达应用程序崩溃的地方？我已经完成了 90%，我只是不知道哪些地址会给我有价值的信息，哪些是无用的。这里附上一张崩溃日志的图片：

![在此处输入图像描述](../Images/f4cdda4ad102740eb8a96fa934ccaf0c.png)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T19:26:28.050

我的猜测是您看到了 Stackoverflow 问题，其中包含 atos 信息（就像我所做的那样），但没有正确计算地址以放入 atos。看这里：

[iOS 崩溃报告：atos 未按预期工作](https://stackoverflow.com/questions/13574933/ios-crash-reports-atos-not-working-as-expected/13576028#13576028)

符号地址 = 幻灯片 + 堆栈地址 - 加载地址

使用 otool 获取您的幻灯片地址（通常为 0x001000）

```
otool -arch ARCHITECTURE -l "APP_BUNDLE/APP_EXECUTABLE" | grep -B 3 -A 8 -m 2 "__TEXT" 
```

滚动到崩溃日志的底部以从二进制图像部分获取​​堆栈地址（二进制图像下列表中的第一个地址）。

然后使用 Mac 附带的 HEX 计算器将其相加（使用程序员视图）。最后从崩溃日志中的堆栈跟踪中减去加载地址（在您的情况下，它看起来像 0x00012efe）。

将其放入 atos 以获取导致崩溃的行：

```
atos -arch armv7 -o YOURAPP.app'/'yourapp' 0xADDRESSFROMABOVE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-11T09:06:52.180

您可以尝试使用我的脚本来实现此目的： [https ://github.com/IdoTene/MacosSymbolicateCrash/blob/master/symbolicate.py](https://github.com/IdoTene/MacosSymbolicateCrash/blob/master/symbolicate.py)

它封装了*atos*命令

或更新版本：[https](https://github.com/samrayner/MacosSymbolicateCrash/blob/master/symbolicate.py) ://github.com/samrayner/MacosSymbolicateCrash/blob/master/symbolicate.py 。

# c# - XNA WP7 高速流畅动画

> ID：13970964
> 
> 赞同：1
> 
> 时间：2012-12-20T11:14:55.067
> 
> 标签：c#, windows-phone-7, animation, xna, sprite

我的 2d 游戏有一个从上到下移动的精灵（沿 Y + ve 方向移动），它在 30 fps 中足够平滑，因为精灵的 Y 位置在每帧中添加 1 个像素（Y = Y + 1px）。现在的问题是当我想高速移动精灵时，即 Y = Y + 10px，由于在每帧中添加 10px，运动看起来一点也不流畅。想知道，无论如何我可以通过流畅的动画实现高速。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:00:01.240

不要使用基于帧的移动，如果你的游戏突然出现“打嗝”，你的玩家、敌人等并没有“真实地”移动，而是因为你的设备而变慢了。我建议你使用基于时间的运动。

目前我猜你有这样的事情：

```
Update(GameTime aTime)
{
    mPlayer.Position += mPlayer.Direction;
} 
```

现在考虑如果您的游戏以 10FPS、100FPS 或 0 FPS 运行会发生什么。运动不一致，因此不流畅。如果你改变它，所以运动是基于经过的时间，你会得到一个更加一致的动画，比如：

```
Update(GameTime aTime)
{
    mPlayer.Position += aTime.Milliseconds * (Constants.PlayerWalkSpeed * mPlayer.Direction);
} 
```

最后，如果不够平滑，您需要对其进行伪造，例如添加运动模糊，这在 2D 中很容易做到。只需存储最后几个旧位置，然后在这些位置绘制玩家精灵，其 alpha 值小于当前位置。

# objective-c - XCode - 单击按钮时关闭键盘

> ID：13970970
> 
> 赞同：2
> 
> 时间：2012-12-20T11:15:10.650
> 
> 标签：objective-c, xcode

几个小时前我刚开始玩 XCode，做 HelloWorld 教程。当用户单击返回按钮时，我设法关闭了键盘窗口。

但是，我的按钮应该具有与 Return 按钮完全相同的行为。它现在也一样，只是在提交时不会关闭键盘。我怎样才能做到这一点？

```
- (IBAction)button:(id)sender {
    [self changeLabelWithText: self.textField.text];

}

- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
    if (theTextField == self.textField) {
        [theTextField resignFirstResponder];

        [self changeLabelWithText: self.label.text];
    }
    return YES;
}

- (void)changeLabelWithText: (NSString *) text {
    self.label.text = [NSString stringWithFormat:@"Hej, %@", text];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-18T10:52:45.093

或者你可以这样做（这样你就不用关心它是哪个文本字段/视图）。

```
[self.view endEditing:YES]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T11:20:28.890

试试这个，

[textFieldName resignFirstResponder];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:17:15.913

```
- (IBAction)button:(id)sender {
        [TextFieldobj resignFirstResponder];
} 
```

# caching - 缓存 bigquery 查询

> ID：13970972
> 
> 赞同：4
> 
> 时间：2012-12-20T11:15:27.883
> 
> 标签：caching, google-bigquery

我正在对大约数百亿或记录的数据集上的 BigQUERY 运行查询。

这比其他解决方案更快，但是查询确实需要 10-30 秒，这不适合在线查询。

是否有任何最佳实践或缓存/内存技术可用于使其运行得更快？

我也在考虑创建汇总/聚合表的选项，但是我可以在其他数据库中进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:48:09.847

如果查询太慢并且缓存有效，您可以通过指定目标表来保存查询的输出。然后，您可以通过 tabledata.list api 从目标表中读取结果，而无需再次运行查询。否则，除了优化查询本身之外，我不知道任何使查询更快的最佳实践。

# c# - 将 WSAStringToAddress 移植到 WinRT

> ID：13970973
> 
> 赞同：0
> 
> 时间：2012-12-20T11:15:29.230
> 
> 标签：c#, c++, .net, network-programming, windows-runtime

所以，我正在将一些代码移植到 WinRT，并且由于过于自虐的原因无法在这里解释，我正在尝试移植一些非常非常依赖于 WinSock 和 IPAddress 的代码，所以我正在编写自己的 IPAddress 实现，我被困在 WSAStringToAddress 上，或者更广泛地说，实现 IPAddress InternalParse（获取字符串，吐出 IPAddress）。

似乎每个人都使用库函数（有充分的理由），这些函数在 WinRT 中似乎并不合理。（并且谷歌搜索它作为一个“面试问题”似乎没有得到任何结果）

有没有人有一个体面的方式去字符串 - > v6和v4的IPAddress？

编辑：

这会合理吗？

```
 private static unsafe IPAddress InternalParse(string ipString, bool tryParse)
    {
        HostName hn = new HostName(ipString);
        IPAddress ipAddr = new IPAddress(GetBytes(hn.ToString()));
        return ipAddr;
    {

    private static byte[] GetBytes(string str)
    {
        byte[] bytes = new byte[str.Length * sizeof(char)];
        System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    } 
```

# java - Java 中的 SQL 结果集

> ID：13970978
> 
> 赞同：6
> 
> 时间：2012-12-20T11:15:46.733
> 
> 标签：java, mysql, jdbc

您好，我刚开始使用 Java 中的 SQL（实际上不久前也开始使用 Java ......），我创建了一个类来连接 MySQL 数据库，并且一切正常。

现在我有一个关于获得结果的问题。

在PHP中我会做类似的事情

```
While($row = mysql_fetch_assoc()) {
  echo $row['rowname'];
} 
```

在 Java 中，我尝试创建与此类似的东西，但我不知道我是否走对了路，或者它应该有很大的不同或其他什么......这是我所做的（参见 getResultList 方法）

```
public class MysqlConnect{

     private String query;
     private ResultSet rs;

    public void connectToAndQueryDatabase(String database, String username, String password) throws SQLException {

            Connection con = null;
            try {
                con = DriverManager.getConnection(
                                     "jdbc:mysql://localhost:3306/" + database,
                                     username,
                                     password);
            } catch (SQLException e) {
                e.printStackTrace();
            }

            Statement stmt = con.createStatement();
            rs = stmt.executeQuery(query);
    }

    public void setQuery(String query) {

        this.query = query;

    }

    public List getResultList() {
        ArrayList<HashMap> row = new ArrayList<HashMap>(); 
        while(row = rs.next()) {

        }

        return rs;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:27:39.323

```
public void connectToAndQueryDatabase(String username, String password) {

    Connection con = DriverManager.getConnection(
                         "jdbc:myDriver:myDatabase",
                         username,
                         password);

    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM Table1");

    while (rs.next()) {
        int x = rs.getInt("a");
        String s = rs.getString("b");
        float f = rs.getFloat("c");
    }
} 
```

了解如何使用 JDBC 的最佳地点是 Oracle 网站上的[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/)。

要了解如何从结果集中检索值，请查看本教程的[这一](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html)部分。

> ResultSet 对象是表示数据库结果集的数据表，通常通过执行查询数据库的语句生成。
> 
> 您可以通过游标访问 ResultSet 对象中的数据。请注意，此游标不是数据库游标。此游标是指向 ResultSet 中的一行数据的指针。最初，光标位于第一行之前。ResultSet.next 方法将光标移动到下一行。如果光标位于最后一行之后，则此方法返回 false。此方法使用 while 循环重复调用 ResultSet.next 方法，以遍历 ResultSet 中的所有数据。
> 
> ResultSet 接口声明用于从当前行检索列值的 getter 方法（例如，getBoolean 和 getLong）。您可以使用列的索引号或列的别名或名称来检索值。列索引通常更有效。列从 1 开始编号。为了获得最大的可移植性，每行中的结果集列应按从左到右的顺序读取，并且每列应仅读取一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T03:44:36.080

试试下面的代码。使用所需的查询和凭据更改查询、url、用户、密码。

```
public static void main(String args[]) {

String url = "database url";
Connection con;
String query = "Your select query here";
Statement stmt;

try {
  Class.forName("Full driver class name");

} catch(java.lang.ClassNotFoundException e) {
  System.err.print("ClassNotFoundException: ");
  System.err.println(e.getMessage());
}

try {
  con = DriverManager.getConnection(url, 
               "user", "password");

  stmt = con.createStatement();              

  ResultSet rs = stmt.executeQuery(query);
  ResultSetMetaData rsmd = rs.getMetaData();
  int numberOfColumns = rsmd.getColumnCount();
  int rowCount = 1;
  while (rs.next()) {
    System.out.println("Row " + rowCount + ":  ");
    for (int i = 1; i <= numberOfColumns; i++) {
      System.out.print("   Column " + i + ":  ");
      System.out.println(rs.getString(i));
    }
    System.out.println("");
    rowCount++;
  }
  stmt.close();
  con.close();

} catch(SQLException ex) {
  System.err.print("SQLException: ");
  System.err.println(ex.getMessage());

 }  
  } 
```

有关文档和 api，请访问以下 oracle 站点。

[ResultSetMetaData 的文档和 api](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T16:12:59.593

ResultSetMetaData 是一个接口，它提供有关 ResultSet 的所有信息，例如生成的 ResultSet 的所有列名称、类型、长度等。

只需使用该界面即可。有关 API 的更多信息和文档，请访问 Oracle 网站。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T14:58:01.247

处理数据库 Java 提供了 java.sql.* 包。您需要阅读此 API 的 java 文档并了解它们的用法。只有了解 java.sql.* 包的用法，才能根据业务需求应用最佳逻辑和技巧。

我建议你先浏览一下 oracle 文档，如果你卡在某个地方，再去社区。

通过 ResultSetMetaData 接口。我想这个界面是回答你的问题。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T11:29:22.993

[ResultSet](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)中有很多方法可以处理它。

如果您需要遍历它，只需使用

```
rs.next(); 
```

如果您需要通过别名获取列：

```
rs.getString("alias");
rs.getFloat("other_alias");
// or by column index
rs.getString(3); 
```

您还有一个实用程序类，用于提取有关结果集的信息，例如列数及其名称：

```
rs.getMetaData(); 
```

确保在完成后关闭连接。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-20T11:40:57.590

只需将您的结果集传递到以下方法，它将返回您正在寻找的所需结果。

```
public List<Map<String, Object>> getResultsList(ResultSet rs) throws SQLException
{
    ResultSetMetaData metadata = rs.getMetaData();
    int columns = metadata.getColumnCount();

    List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
    while (rs.next())
    {
        Map<String, Object> row = new HashMap<String, Object>(columns);
        for (int i = 1; i <= columns; ++i)
        {
            row.put(metadata.getColumnName(i), rs.getObject(i));
        }
        results.add(row);
    }

    return results;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-20T11:22:59.737

在您的 while 循环中，您使用了赋值运算符。rs.next() 返回真或假

```
 while(row=rs.next()) 
{} 
```

你可以简单地说，

```
while(rs.next()) 
{} 
```

# parsing - 如何使用 PetitParser 解析以关键字开头的标识符？

> ID：13970979
> 
> 赞同：5
> 
> 时间：2012-12-20T11:15:46.953
> 
> 标签：parsing, smalltalk, petitparser

我想通过使用 PetitParser 来解析编程语言中的标识符。

要求之一是标识符的名称不是关键字（例如`null`），因此这`null`不是有效的标识符。

对于这种情况，我能想到的最小解析器是：

```
identifier := ('null' asParser not,  #word asParser plus) 
```

但是，如果输入以关键字开头，则会失败：

```
identifier end parse: 'nullable' 
```

你有什么建议来解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:21:39.680

```
identifier := ('null' asParser, #word asParser plus) /
    ('null' asParser not, #word asParser plus).

identifier end parse: 'nullable'. "=> #('null' #($a $b $l $e))"
identifier end parse: 'null'. "=>  'at 0'"
identifier end parse: 'foo' "=> #(nil #($f $o $o))" 
```

这`at 0`是 PetitParser 的默认“解析失败”错误，表明解析器将接受“可空”、普通单词，而不是“空”。

# ruby - rakefile 中的变量在测试类中不可见

> ID：13970980
> 
> 赞同：1
> 
> 时间：2012-12-20T11:15:49.013
> 
> 标签：ruby, unit-testing, watir

感谢我在这里收到的帮助，我有一个 ruby​​ 测试套件，这些测试套件在 CI 服务器中不断验证或 UI（使用 Watir）。然而，一个新的要求出现了，它实际上突出了 CI 设置中的一个错误。

所以在 rakefile 我有以下内容

```
require 'rake/testtask'
require './modules/utilities'
gem 'test-unit'
require 'test/unit'
require 'ci/reporter/rake/minitest'

randomId = 1 + rand(100000)
Server ||= "http://someserver_hostname:8080/login.html"
NormalUser = "watir" + randomId.to_s + "_normal"
AdminUser = "watir" + randomId.to_s + "_admin"
Password = "Watir_" + randomId.to_s

Rake::TestTask.new(:runtests) do |t|
  t.libs << "test"
  t.test_files = FileList['./**/Test*.rb']
  t.verbose = true
end 

task :testSetup do
  Server = "http://#{ENV["server"]}:8080/login.html"
  p "Using the following server\n\n#{Server}\n\n"
  #Lets create our own user for these tests
  createNormalUser(NormalUser, Password)
  createAdminUser(AdminUser, Password)
end

task :testCleanUp do
  #Delete our own user
  deleteUser(NormalUser)
  deleteUser(AdminUser)
end

task :runAllTests => [:testSetup,:runtests, :testCleanUp] 
```

目标是有人可以在 Jenkins 中手动运行构建并指定（通过下拉列表）运行测试的服务器。我已经完成了所有设置，并且在所选服务器中创建了用户。问题是测试是使用 ruby​​ 脚本中其他地方的硬编码服务器变量运行的，该变量定义为

```
Server ||= "http://Server_hostname:8080/login.html" 
```

如果我正确阅读它，只会在尚未定义服务器的情况下重新分配服务器，这正是我所需要的。问题是如果我删除这个定义，那么 Server 是未定义的。如果我把它留在里面，测试将针对这个主机名而不是我在 rakefile 中定义的主机名运行。显然我在某个地方搞砸了，但我不明白为什么在 rakefile 中设置的服务器在测试脚本中不可见，因为它都是一个进程谢谢

我应该补充一点，createXXUser 方法和 deleteUser 方法都可以正常工作，即 Server、NormalUser、Password 等具有正确的值

# angularjs - 无法在 $http 回调中设置类变量

> ID：13970981
> 
> 赞同：1
> 
> 时间：2012-12-20T11:15:50.543
> 
> 标签：angularjs

在下面的示例中，我试图在成功回调中设置在以下服务中定义的变量。我无法在服务中设置 var authMap。这里发生了什么，我该怎么做？

```
app.service("authorization", ['$http', function($http){
  this.authMap = [];
  $http.get('/authmap').success(function(data){this.authMap = data});

}]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:48:35.187

在您的匿名回调函数中创建了一个新范围，因此`this`有所不同。
您可以执行以下操作：

```
app.service("authorization", ['$http', function($http){
  this.authMap = [];
  var that = this;
  $http.get('/authmap').success(function(data){ that.authMap = data });
}]); 
```

# c - LPC宏在exp中有引号时如何进行字符串化？

> ID：13970983
> 
> 赞同：2
> 
> 时间：2012-12-20T11:15:51.540
> 
> 标签：c, macros

目前我正在使用 LPC，它使用与 C 相同的预处理器。我们有一个如下宏：

```
#define UT_TRUE(exp) _UT_TRUE(exp, "##exp") 
```

但现在我们有一个 exp 为：

```
UT_TRUE(map["true"]) 
```

所以它变成：

```
_UT_TRUE(map["true"], "map["true"]") 
```

exp 变为 "map[" true "]" 并且 true 未定义。

有什么技巧可以解决问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:51:43.127

试试这个，希望这有帮助，..

```
#define UT_TRUE(exp) _UT_TRUE(exp, #exp) 
```

可以参考。。

[http://gcc.gnu.org/onlinedocs/gcc-4.3.4/cpp/Stringification.html](http://gcc.gnu.org/onlinedocs/gcc-4.3.4/cpp/Stringification.html)

# antlr - 简单 antlr4 语法中的不匹配输入错误

> ID：13970984
> 
> 赞同：3
> 
> 时间：2012-12-20T11:15:51.990
> 
> 标签：antlr, antlr4

我正在尝试使用 antlr4 解析一个简单的 SQL 子集。

我的语法如下所示：

```
grammar Query;
query : select;
select : 'select' colname (','  colname)* 'from' tablename;
colname : COLNAME;
tablename : TABLENAME;
COLNAME: [a-z]+ ;
TABLENAME : [a-z]+;
WS : [ \t\n\r]+ -> skip ; // skip spaces, tabs, newlines 
```

我正在使用一个简单的 java 应用程序对此进行测试，如下所示：

```
import java.io.ByteArrayInputStream;
import java.io.InputStream;

import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.*;

public class Test {
    public static void main(String[] args) throws Exception {
        // create a CharStream that reads from standard input

        InputStream is = new ByteArrayInputStream("select one,two ,three from table".getBytes());

        ANTLRInputStream input = new ANTLRInputStream(is);

        // create a lexer that feeds off of input CharStream
        QueryLexer lexer = new QueryLexer(input);

        // create a buffer of tokens pulled from the lexer
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        // create a parser that feeds off the tokens buffer
        QueryParser parser = new QueryParser(tokens);

        ParseTree tree = parser.query(); // begin parsing at init rule

        System.out.println(tree.toStringTree(parser)); // print LISP-style tree

    }
} 
```

我得到的输出如下：

```
line 1:27 mismatched input 'table' expecting TABLENAME
(query (select select (colname one) , (colname two) , (colname three) from (tablename table))) 
```

我不明白为什么解析器似乎将“表”作为解析器树中的表名，但我也遇到了错误。我错过了什么？

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T11:22:22.560

您不能有两个匹配相同的词法分析器规则（至少，不在相同的模式/状态下......）：

```
...
COLNAME: [a-z]+ ;
TABLENAME : [a-z]+;
... 
```

改为这样做：

```
grammar Query;
query     : select;
select    : 'select' colname (',' colname)* 'from' tablename;
colname   : ID;
tablename : ID;
ID        : [a-z]+;
WS        : [ \t\n\r]+ -> skip; 
```

# service - 后端未收到使用 MSMQ 消息的 Rhino Service Bus

> ID：13970994
> 
> 赞同：1
> 
> 时间：2012-12-20T11:16:26.623
> 
> 标签：service, rhino, endpoint, bus, rhino-servicebus

我试图让一个简单的客户端和后端使用 Rhino 服务总线在两台机器上发送消息。我已经设法使用 Rhino Queues 让它工作，但是当我切换到 MSMQ 并发送消息时，它没有在后端收到。我正在使用取自[此处](https://github.com/BjRo/LearningRhinoServiceBus)的代码示例，并尝试实现最简单的示例“E1_Hello_world_using_MSMQ_as_transport”。

当从客户端向后端发送消息时，消息似乎消失而没有给出任何错误（使用下面定义的端点 uri 1 时）。然而，名为 DIRECT=TCP:192.168.35.10\private$\LearningRhinoESB.E1.Backend 的传出队列中确实出现了一个新文件夹，但队列消息文件夹仍然为空。

我在两台机器上都禁用了防火墙，并尝试了多种端点，

1.  msmq://192.168.35.10/LearningRhinoESB.E1.Backend **<--这是使用 rhino 队列切换到 msmq 的方法没有乐趣**
2.  msmq://192.168.35.10/private$/LearningRhinoESB.E1.Backend
3.  格式名称：DIRECT=TCP:192.168.35.10\LearningRhinoESB.E1.Backend
4.  格式名称：DIRECT=TCP:192.168.35.10\private$\LearningRhinoESB.E1.Backend
5.  格式名称：DIRECT=OS:192.168.35.10\LearningRhinoESB.E1.Backend
6.  格式名称：DIRECT=OS:192.168.35.10\private$\LearningRhinoESB.E1.Backend

知道我做错了什么或如何诊断这种情况吗？我可能需要启用任何服务才能使其正常工作？