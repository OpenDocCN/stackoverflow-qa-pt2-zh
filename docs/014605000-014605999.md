# StackOverflow 问答 14605000-14605999

# c# - Windows Phone 8 设备在不同分辨率（WVGA、WXGA 和 720P）下的奇怪显示行为

> ID：14605003
> 
> 赞同：1
> 
> 时间：2013-01-30T13:18:11.520
> 
> 标签：c#, windows-phone-8

这是我的**XAML**设计

```
<Grid x:Name="ContentPanel2" Grid.Row="1" Background="Black" Height="440" Width="440">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border BorderThickness="0" Grid.Row="0"  Grid.Column="0" Background="White" />
            <Border BorderThickness="0" Grid.Row="0"  Grid.Column="1"  Background="White"  />
            <Border BorderThickness="0" Grid.Row="0"  Grid.Column="2"   Background="White"  />

            <Border BorderThickness="0" Grid.Row="1"  Grid.Column="0" Background="White" />
            <Border BorderThickness="0" Grid.Row="1"  Grid.Column="1"  Background="White"  />
            <Border BorderThickness="0" Grid.Row="1"  Grid.Column="2"   Background="White"  />

            <Border BorderThickness="0" Grid.Row="2"  Grid.Column="0" Background="White" />
            <Border BorderThickness="0" Grid.Row="2"  Grid.Column="1"  Background="White"  />
            <Border BorderThickness="0" Grid.Row="2"  Grid.Column="2"   Background="White"  />
        </Grid> 
```

这是图片

wvga 图像 ![WVGA 图像](../Images/d4090ede5d732535e5e6c88d82eed997.png)
wxga 图像 ![WXGA 图像](../Images/f0659a5e72ec515f82976e1f0c99e002.png)
720pimage ![720页](../Images/c4572b24464e476e20d79fd125d0496f.png)
这在每种分辨率（wvga、wxga 和 720p）中显示不同。有人知道为什么会发生这种行为吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:26:28.147

这是一个已知问题（认为它有另一个 StackOverflow 问题，但我找不到它）与小数像素如何计算 - 您可以通过项目之间的“间隙”看到网格的背景。

您可以通过制作 Grid 的背景来修复它`White`。

# java - 如何在 Java 中使用 for (ever){} 而不是 for (;;)

> ID：14605005
> 
> 赞同：5
> 
> 时间：2013-01-30T13:18:20.300
> 
> 标签：java

我想在 Java 中使用无限循环：我认为如果我可以用这样的变量`for (;;)`替换它看起来会很有趣 ：`';;'``'ever'`

```
String ever = ";;";
for(ever){
...
} 
```

在Java中这样的事情可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T13:20:49.487

不，这是不可能的。

你能来的最接近的是：

```
final boolean ever = true;
for (;ever;) { } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T13:22:50.573

当我因为害怕语法而混淆我的程序时，我真的很喜欢把它揉进去......

```
for(ever;and;ever) 
```

哪里`and`是真的，`ever`是什么......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:20:49.283

关于什么 ：

```
while (true) {

} 
```

我知道您将进入代码艺术领域，但是这样做太昂贵了。

我有时也在做这种`for`艺术`while`：

```
int counter = 4;
while (counter-->0) {
  // couter decrements from 4 to 1
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:20:40.017

不，这是语法错误！

此单语句仅适用于 while/do while 循环。

像这样的东西：

```
 while(ever)
 { ..

 // some statement to change ever
 } 
```

# wcf - 请求通道在 00:01:00 后等待回复时超时，出现 autocompleteextender 错误

> ID：14605006
> 
> 赞同：0
> 
> 时间：2013-01-30T13:18:20.610
> 
> 标签：wcf, wcf-binding

我得到这个错误。

> 00:01:00 后等待回复时请求通道超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。

我正在使用 an `automcompleteextender`which 调用 a `[webmethod]`，后者又调用 a `WCF service`。问题是当我一次输入 3 个字母时，服务呼叫会冻结。扩展器从不工作。以后页面上没有其他`autocompleteextender`作品。

我已经尝试过设置`sendTimeout`和`maxReceivedMessageSize`. 它没有帮助。

请提供一个词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:21:13.363

好吧，我解决了这个问题。它是如何解决的真的很奇怪。

我不得不将绑定从更改`WsHttpBinding`为`BasicHttpBinding`

其他一切都保持不变。这只是`Binding`

# boost - 使用 CMake 和 Boost 编译程序 - 编译和链接，但运行时输出错误和段错误

> ID：14605009
> 
> 赞同：1
> 
> 时间：2013-01-30T13:18:27.697
> 
> 标签：boost, cmake, boost-program-options

在 Ubuntu 12.10（通过 repos 安装 libboost）上使用 CMake 2.8.9 和 Boost 1.49 编译程序时遇到问题。目前，该程序只是一些共享库和一个可执行文件（尚未使用这些库）。可执行文件用于`boost::program_options`解析输入。

它的布局是这样的（会有更多的目录，例如共享库和包含，但它们还没有在 CMake 中提供）：

```
src
    |- tools
    |   |- CMakeLists.txt
    |   |- main.cpp   <-- main executable
    |- CMakeLists.txt 
```

当我手动编译时，它可以工作，但是当我 CMake 时，它​​会破坏一些文本，然后在最后出现段错误。到目前为止的程序代码只是`program_options`文档中的“第一个”程序（您可以[在此处查看](http://www.boxbackup.org/browser/box/nick/win/lib/win32/boost_1_32_0/libs/program_options/example/first.cpp?rev=30)）。

* * *

我使用的手动编译命令是：

```
g++ -Wall -o myapp src/tools/main.cpp -lboost_program_options 
```

它给出了正确的输出`myapp --help`：

```
Allowed options:
  --help                produce help message
  --compression arg     set compression level 
```

* * *

CMake 文件如下所示：

```
# src/CmakeLists.txt

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(testApp CXX)

FIND_PACKAGE( Boost COMPONENTS program_options REQUIRED)
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIR})

ADD_DEFINITIONS(-g -O2
    -fsigned-char -freg-struct-return
    -Wall -W -Wshadow -Wpointer-arith -Wcast-qual -Winline -Werror)

ADD_SUBDIRECTORY(tools) 
```

```
# src/tools/CmakeLists.txt
ADD_EXECUTABLE(main main.cpp)

TARGET_LINK_LIBRARIES(main
    ${Boost_LIBRARIES})

#rename to the final outut name
SET_TARGET_PROPERTIES(main
    PROPERTIES OUTPUT_NAME myapp) 
```

然后当我运行时`myapp --help`，我得到以下输出：

```
,@:
  --help                produce help message
  --compression arg     set compression level

Segmentation fault (core dumped) 
```

“@”符号经常变为其他符号，例如“`”、“�”和 Unicode-codepoints-in-boxes，这意味着它正在向我打印垃圾内存。

我在这个 CMake 设置中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:01:07.293

这是由使用`-freg-struct-return`编译器标志引起的。所以最终与CMake无关，只是粗心的代码重用。感谢 Bort 将我指向编译器标志！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:45:42.943

我猜。的用法`add_definitions`是错误的。它适用于预处理器宏而不是编译器选项。我不确定这将如何干扰最终输出，但这是一个起点。为您的编译器选项重写您的 cmakelists.txt 文件，如下[所示](https://stackoverflow.com/questions/10150199/cmake-compiler-settings-specific-to-the-local-working-copy)。

# linux-kernel - 如何在eclipse ctd中制作一个linux内核项目？

> ID：14605011
> 
> 赞同：2
> 
> 时间：2013-01-30T13:18:36.353
> 
> 标签：linux-kernel, linux-device-driver

我想做一些Linux内核编程。我选择了 Eclipse CDT 作为我的 IDE，但我似乎无法启动项目。开始我的意思是我无法通过项目向导。我遵循了类似这样的不同教程： [链接到教程](http://issaris.blogspot.nl/2007/12/download-linux-kernel-sourcecode-from.html) 在选择配置屏幕上，当我按下完成时，程序不会继续（有一个加载栏，但它很快就会消失）。谁能给我一些解决这个问题的指示？我在 Macbook 上的并行虚拟机上运行 Ubuntu 12.04。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T06:17:12.793

检查包含内核源代码的目录是否归“root”所有。我遇到了这个问题并通过执行`sudo chown -hR my_user_name my_kernel_dir`. 遗憾的是 Eclipse (3.8.1) 没有显示任何可见的警告。

# android - 如何对 JSON 输出进行排序/排序？

> ID：14605012
> 
> 赞同：0
> 
> 时间：2013-01-30T13:18:36.970
> 
> 标签：android, json, sorting

我有一个 JSON 循环，我能够在循环中获取对象，但问题是我的输出不按顺序排列：

我的预期输出是：

`Menu Id 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23`

但我得到的结果如下：

`Menu Id: 19,18,23,16,17,14,15,12,13,21,20,22,4,3,11,2,1`.

我怎样才能按我期望的方式排序？

```
 JSONArray values = menuObject.toJSONArray(names);
           for (int i = 0; i< values.length(); i++) {
                        JSONObject json2 = (JSONObject) values.getJSONObject(i);
                        //int menu_id = json2.getInt("menu_id");
                        menu_id = json2.getString("menu_id");
                        int m_id = Integer.parseInt(menu_id);
                        if (json2.has("menu_parent")) {
                           menu_parent = json2.getString("menu_parent");    
                        }
            if (m_id < 0) {

               //
             } else {
               id = id + menu_id + ",";
               int menu_category = Integer.parseInt(menu_parent);
               System.out.println("Menu Id" + id);
                   if (json2.has("menu_name")) {
                     menu_list = json2.getString(KEY_MENU).trim();
                     System.out.println("Menu List" +menu_title);
                     menu_title = menu_title + menu_list + ",";
                   }
               }

           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:25:23.530

我认为您可以通过以下方式对其进行排序：

```
Collections.sort("your data", new Comparator<Item>() {
        public int compare(Item i1, Item i2) {
            return i1.getCaption().compareTo(i2.getCaption());
        }
    }); 
```

完成后，应该对其进行整理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:46:25.377

尝试这个：

```
String menuids = "19,18,23,16,17,14,15,12,13,21,20,22,4,3,11,2,1";
        String[] ids = menuids.split(",");

                Integer[] result = new Integer[ids.length];
                for (int i = 0; i < ids.length; i++) {
                    result[i] = Integer.parseInt(ids[i].trim());
                }

                Collections.sort(Arrays.asList(result));

                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < result.length; i++) {
                    Integer intValue = result[i];
                    sb.append(intValue);
                    if (i < result.length - 1) {
                        sb.append(", ");
                    }
                }

        String finaldata = sb.toString();

        System.out.println(finaldata); 
```

# html - 如何清除 HTML5 数据？

> ID：14605015
> 
> 赞同：0
> 
> 时间：2013-01-30T13:18:40.003
> 
> 标签：html

> **可能重复：**
> [如何清除 html 5 客户端存储？](https://stackoverflow.com/questions/4911616/how-can-i-clear-html-5-client-storage)

有人可以建议一种快速清除 HTML5 存储的方法吗？我一直在做一些需要我清理本地存储很多次的事情。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:25:33.423

你可以试试[Clear Console](https://addons.mozilla.org/EN-us/firefox/addon/clear-console/)。它清除 HTML5 存储。

# java - savedInstanceState 始终为空

> ID：14605017
> 
> 赞同：1
> 
> 时间：2013-01-30T13:18:43.277
> 
> 标签：java, android

所以我的 OnsavedInstanceState 中有这段代码

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    String [] a={"haha"};
    savedInstanceState.putStringArray("MyStringarray", a);
    Toast.makeText(context, "Saved array", Toast.LENGTH_SHORT).show();
} 
```

我的 onCreate 中有这段代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if(savedInstanceState==null){
        Toast.makeText(this, "not there", Toast.LENGTH_SHORT).show();
    }else{
        Toast.makeText(this, "is there", Toast.LENGTH_SHORT).show();
    }
} 
```

为什么吐司总是说不在？我打开了应用程序，然后切换到另一个应用程序，它显示了 toast 保存的数组，但是当我重新打开应用程序时，它说不存在，即使捆绑包应该有包含“哈哈”的字符串数组。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:27:16.020

在`onSaveInstanceState()`您正在修改`savedInstanceState`而不是保存此修改后的对象时。如果`super`复制了您的`Bundle`，则不会保存此修改。

`super.onSaveInstanceState(savedInstanceState);`尝试在方法结束时调用。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    String [] a={"haha"};
    savedInstanceState.putStringArray("MyStringarray", a);
    super.onSaveInstanceState(savedInstanceState);
    Toast.makeText(context, "Saved array", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:31:29.440

问题可能在于您如何在清单中定义活动。例如，如果您的活动具有设置 android:clearTaskOnLaunch="true" 我认为您不会收到保存的捆绑包。有关各种活动设置的详细信息，请参阅[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)。

您还可以检查其他覆盖的方法。例如，在您覆盖一个并做一些奇怪的事情时，您可能会弄乱活动堆栈。您是否在代码中的任何地方调用了finish()，如果是，请删除它并查看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:40:14.573

不要将此方法与活动生命周期回调混淆，例如**onPause()**，它总是在活动被放置在**后台或正在****销毁**的途中调用，或者**onStop()在****销毁**之前调用。当用户从活动 B 导航回活动 A 时**调用 onPause() 和 onStop()**而不是此方法的一个示例：**不需要**在 B 上调用 onSaveInstanceState(Bundle)，因为该特定实例将永远不会被恢复，因此系统避免调用它。**调用 onPause()**而**不是 onSaveInstanceState(Bundle)**的示例**是在活动 A 之前启动活动 B 时：如果活动 A 在 B 的生命周期内没有被杀死，系统可能会**避免在活动 A 上调用 onSaveInstanceState(Bundle)**，因为 A 的用户界面状态将保持不变。**

# c#-4.0 - 如何使用相同的 xpath 查询在 HTML 代码中搜索类和 ID 名称？

> ID：14605019
> 
> 赞同：1
> 
> 时间：2013-01-30T13:18:49.520
> 
> 标签：c#-4.0, xpath, html-agility-pack

我正在使用下面的代码来搜索代码中的类`abc`名`HTML`：

```
nodes = doc.DocumentNode.SelectNodes("//*[contains(concat(' ', normalize-space(@class), ' '), ' abc ')]"); 
```

这给了我正确的结果。

但是如果我想搜索`ID`名称`abc`而不是类，上面的代码不起作用。

也许我正在使用的代码包含`@clas`s 字，因此它不适用于 ID 名称。

有没有办法使用相同的代码同时搜索“类”和“ID”名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:34:25.677

首先，`ID`不同于`id`. HTML 不区分大小写，但 XML 区分大小写。看看的作者[Simon Mourier的](https://stackoverflow.com/users/403671/simon-mourier)[回答](https://stackoverflow.com/a/5779664/674700)。[`HtmlAgilityPack`](http://htmlagilitypack.codeplex.com/)

> 也就是说，当你使用它的 XPATH 特性时，你必须使用小写的标签。这意味着“//body”表达式将匹配 BODY、Body 和 body，而“//BODY”将不匹配任何内容。

同样代表`ID`.

关于过滤器逻辑，您必须使用[`Logical-and`运算符](http://msdn.microsoft.com/en-us/library/ms256081.aspx)：

```
var nodes = doc.DocumentNode.SelectNodes(
    "//*[contains(concat(' ', normalize-space(@class), ' '), ' abc ')"+
        " and " +
        "contains(concat(' ', normalize-space(@id), ' '), ' div1 ')]"); 
```

或者，更简单：

```
var nodes = doc.DocumentNode.SelectNodes("//*[@class=\"abc\" and @id=\"div1\"]"); 
```

但作为个人喜好，如果上下文允许，我`LINQ`会这样做：

```
var nodes = doc.DocumentNode.Descendants()
    .Where(i => 
        i.Attributes["class"] != null 
        && i.Id != null 
        && i.Attributes["class"].Value == "abc" 
        && i.Id == "div1"); 
```

# java - 用 Java 在 Web 浏览器中维护历史记录

> ID：14605020
> 
> 赞同：-1
> 
> 时间：2013-01-30T13:18:48.867
> 
> 标签：java

谁能建议我如何存储历史记录？

我正在制作一个 Web 浏览器，我必须保存历史记录，然后在用户需要时显示。我尝试过 ArrayList，但它只会存储打开的应用程序使用过的 Web 链接。关闭应用程序后，所有保存的 Web 链接都将消失。有什么办法可以让我也显示前一天的所有网络链接。请在我的项目中根据需要回复代码。

我正在使用 Swing 用 Ja​​va 制作我的 Web 浏览器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:23:18.933

为什么不保存在文件中？ [http://docs.oracle.com/javase/tutorial/essential/io/file.html](http://docs.oracle.com/javase/tutorial/essential/io/file.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:28:02.903

您创建的 ArrayList 仅存在于内存中，因此当 java 程序退出时，操作系统会重用同一块内存来运行其他程序，因此 ArrayList 会丢失。

您需要以某种方式将历史链接存储到磁盘。

最简单的选择是在您的 java 程序退出之前将 url 写入文件，然后在程序启动时将它们读回。首先，也许您可​​以将您的 java 历史对象转换为 json。那里有几个 json 库，但 Gson ( [http://javajing.com/2012/07/13/json-using-gson.html](http://javajing.com/2012/07/13/json-using-gson.html) ) 可能是最容易开始的。因此，步骤是：1）将 java History 对象（或您想出的任何类）转换为 json，2）将 json 保存到文件中。恢复 url 将是相反的：1）从文件中读取 json，2）将 json 转换回历史类（或其他）。

另一种选择是使用数据库。我建议看一下[sqlite](http://www.sqlite.org/)或[h2](http://www.h2database.com/html/main.html)。两者都可以嵌入到 java 应用程序中。对于此选项，您需要创建一个数据库模式，然后使用 sql 查询和插入 url 到/从数据库。

另一种选择可能是将 url 存储到 Amazon 的 S3 之类的存储服务中。

# ruby-on-rails - CanCan 和 Mongoid “或” 玩不好

> ID：14605029
> 
> 赞同：1
> 
> 时间：2013-01-30T13:19:10.470
> 
> 标签：ruby-on-rails, mongodb, mongoid, cancan

我想获取用户拥有或创建的所有活动，因此我使用以下方式加入它`or`：

```
Activity.or(owner_id: 123).or(creator_id: 123).selector
# => {"$or"=>[{"owner_id"=>123}, {"creator_id"=>123}]} 
```

现在我尝试在上面使用 CanCan。

```
Activity.accessible_by(current_ability)
# => {"$or"=>[{"privacy"=>"public"}, {"user_id"=>"51091cc977bb1eb27a000003"}]} 
```

CanCan 默认创建一个`or`选择器，因为该功能中有多个规则。

现在这样做很直观：

```
Activity.or(owner_id: 123).or(creator_id: 123).accessible_by(current_ability)
# => {"$or"=>[{"owner_id"=>123}, {"creator_id"=>123}, {"privacy"=>"public"}, {"user_id"=>"51092b9777bb1ec385000003"}]} 
```

但这将两个`or`数组合并为一个，这不是我想要的，所以我做了以下事情：

```
Activity.or(criteria).and(Activity.accessible_by(current_ability).selector).desc(:created_at)
# => {"$or"=>[{"owner_id"=>123}, {"creator_id"=>123}], "$and"=>[{"$or"=>[{"privacy"=>"public"}, {"user_id"=>"51092b9777bb1ec385000003"}]}]} 
```

但这似乎有点不干净。关于如何美化这个的任何想法？谢谢你。

PS：事后的想法：不应该`accessible_by`总是返回 a`{'$and' => {'$or' => [...]}}`而不是只返回 {'$or' => [...]}？

# gps - 用于查找和传输设备物理位置的 GPS 替代方法？

> ID：14605031
> 
> 赞同：0
> 
> 时间：2013-01-30T13:19:15.053
> 
> 标签：gps, location

我正在尝试研究以高精度传输设备（而不是手机）物理位置的最小方法。除了 GPS，我还有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:24:19.863

好吧，这可能有点复杂，但它是由我的大学制作的，所以在这里

[http://www.cylab.cmu.edu/files/pdfs/mobility/Wi_Fi_Locationing_2008.pdf](http://www.cylab.cmu.edu/files/pdfs/mobility/Wi_Fi_Locationing_2008.pdf)

这谈到了使用房间级精度使用 WiFi 定位人员。我从来没有读过整本书，但事实证明它对我的研究很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:32:52.067

将取决于设备发送接收的内容，但您可以使用 RSSI 值。这广泛用于不同的射频协议。您可以通过将 LQI/RSSI（信号强度）值与不同的信标进行比较来对位置进行三角测量。Wifi 路由器、Zigbee 协调器、RFID 天线。

# c# - C# 检索屏幕更新矩形

> ID：14605032
> 
> 赞同：2
> 
> 时间：2013-01-30T13:19:14.340
> 
> 标签：c#, screen, user32

我正在尝试创建一个连续制作大量屏幕截图的程序。我不想一遍又一遍地重新创建屏幕截图，我只想找到屏幕之间的变化。

为此，我在屏幕级别使用了 GetUpdateRect() 方法。不幸的是，它没有给我正确的数据。由于我对 C# 比较陌生，所以我确定我做错了什么：P

此代码应记录所有屏幕更改，但它返回 [0,0,0,0]：

```
 [DllImport("User32.dll")]
    public static extern IntPtr GetDesktopWindow();
    [DllImport("User32.dll")]
    public static extern bool GetUpdateRect(IntPtr hWnd, out Rectangle lpRect, bool bErase);

    static void Main()
    {
        Rectangle updateRect;
        GetUpdateRect(GetDesktopWindow(), out updateRect, false);
        while (true)
        {
            Thread.Sleep(100);
            Console.WriteLine(updateRect);
        }
    } 
```

非常感谢所有帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:48:51.143

尝试使用[Pinvoke.Net](http://www.pinvoke.net/default.aspx/Structures/RECT.html)上列出的代码来导入`RECT`类型，而不是使用`System.Drawing.Rectangle`（正如@Alvin Wong 建议的那样）并更改`GetUpdateRect()`方法的签名以匹配。

高温高压

# wif - SAML 令牌断言验证

> ID：14605040
> 
> 赞同：0
> 
> 时间：2013-01-30T13:19:37.240
> 
> 标签：wif

我正在使用 SAMLP CTP 源进行 FSSO over SAML 协议。我想在 SP 端拦截 SAML 令牌，然后再将其通过 Saml2AuthenticationModule 转换为 IClaimsPrincipal 并且在 SessionAuthenticationModule 生效之前。

为什么 ？我想对断言进行一些验证。如果一切正常，WIF 必须按照常规流程进行。如果不是，我必须避免创建 Fed cookie 和 SessionAuthenticationModule 会话。

另一种解决方案（但不是那么自然）是登录用户，然后在代码中验证断言。如果验证无法注销用户，但仅从这一应用程序而不是从联合中的所有应用程序注销。我不太确定如何做到这一点。我试过了：

SessionAuthenticationModule sam = FederatedAuthentication.SessionAuthenticationModule; sam.DeleteSessionTokenCookie(); 山姆.SignOut();

但它不起作用。

任何这种情况都对我有用。首先会更好，但我现在对任何一个都满意。

问候， 拉斯特科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:27:21.763

您只需要在配置中注册一个声明身份验证管理器。这将在收到令牌之后和创建会话之前调用。

我不会使用 SAML2 CTP。我认为这永远不会被释放。

# mouse - OpenGL - 鼠标左右键的动作

> ID：14605041
> 
> 赞同：2
> 
> 时间：2013-01-30T13:19:37.790
> 
> 标签：mouse, glfw

我对鼠标左键有一些功能并且它可以工作，但我想对右键有另一个功能。它也有效，但是当我尝试同时包含它们时，其中一个按钮的功能会停止。我错过了什么？

```
void GLFWCALL onMouseRightButton( int button, int action ) {
    if( button==GLFW_MOUSE_BUTTON_RIGHT )
    {
        // ... some code
    } 
}

 void GLFWCALL onMouseMoveRight( int a, int b ) {
     if( dragging_right )
     {
         // some math 
     } 
 } 
```

然后初始化后，我有：

```
glfwSetMouseButtonCallback( onMouseButtonLeft );
glfwSetMousePosCallback( onMouseMoveLeft );
glfwSetMouseButtonCallback( onMouseButtonRight);
glfwSetMousePosCallback( onMouseMoveRight); 
```

但在这种形式下，只有右键的功能有效，如果我评论最后两个功能 -左键的一切都很好`glfwSetMouseButtonCallback( onMouseButtonRight);`。`glfwSetMousePosCallback( onMouseMoveRight);`

你能告诉我如何让它们都正常工作吗？非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:26:04.183

当您调用第二个时，`glfwSetMouseButtonCallback`您实际上是在覆盖最后一个回调。你`onMouseButton[...]`应该是这样的：

```
void GLFWCALL onMouseButton( int button, int action ) {
    if( button==GLFW_MOUSE_BUTTON_RIGHT )
    {
        // ... some code
    } 
    else if( button==GLFW_MOUSE_BUTTON_LEFT )
    {

    }
} 
```

# c# - 以编程方式从一个选项卡切换到另一个选项卡

> ID：14605053
> 
> 赞同：2
> 
> 时间：2013-01-30T13:20:00.567
> 
> 标签：c#, winforms

在a`Windows Form`中，使用tabControl1时，如何在tabPage1中单击按钮时从一个选项卡切换到另一个选项卡（即tabPage1到tabPage2）。尝试了很多

```
tabPage2.Show(); 
tabControl1.SelectedIndex = tabPage2; 
```

等等，但不给任何o / p ...请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T13:22:18.083

您应该尝试使用[TabControl.SelectedTab 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedtab.aspx)：

> 获取或设置当前选中的标签页。

上面的话题也有如下备注：

> 标签页必须在 TabPages 集合中才能使其成为当前标签页。

在您的情况下，这应该有效：

```
//somewhere in your code, you have to add first the TabPage to the TabControl
tabControl1.TabPages.Add(tabPage2);

tabControl1.SelectedTab = tabPage2; 
```

**[更新]**

如果这也不起作用，则很可能您没有将该`button1_Click`方法关联为`button1`的`Click`事件处理程序。更有可能的是，您只是在`button1`表单的另一个控件容器或表单本身中创建了控件，然后将其**剪切并粘贴**到`tabPage1`控件中。

这将删除事件处理程序。

只需将该`button1_Click`方法重新分配为`button1`的`Click`事件处理程序并确保您使用该`SelectedTab`属性（或`SelectedIndex`如该问题的其他一些答案和评论中所示）。

这是对类似问题的引用：[剪切和粘贴控件丢失事件处理程序](http://social.msdn.microsoft.com/Forums/pl/csharpide/thread/8a5d8c22-1eae-49a9-b972-79b2e851f46c)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T11:05:43.790

试试这个代码：

```
tabControl1.SelectedPage = tabpage1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:24:29.627

`this.tabControl1.SelectedTab = this.tabControl1.TabPages[1];`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:24:07.857

注意[TabControl.SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedindex.aspx)属性是整数。（您也可以按照其他答案的建议使用 SelectedTab 属性）

因此，您将其设置为要选择的选项卡：

```
tabControl1.SelectedIndex = 1; 
```

* * *

这是一个基于 msdn 代码的完整示例，（注意它没有经过测试，因为我不在 Windows 上并且这里没有 .NET 设置）：

```
using System.Drawing;
using System.Windows.Forms;

public class Form1 : Form
{
    private TabControl tabControl1;
    private TabPage tabPage1;
    private TabPage tabPage2;
    private Button btn;

    private void MyTabs()
    {
        this.tabControl1 = new TabControl();
        this.tabPage1 = new TabPage();
        this.tabPage2 = new TabPage();
        this.btn = new Button();

        this.tabControl1.Controls.AddRange(new Control[] {
            this.tabPage1,
            this.tabPage2});
        this.tabControl1.Padding = new Point(15, 10);
        this.tabControl1.Location = new Point(35, 25);
        this.tabControl1.Size = new Size(220, 220);
        this.btn.Location = new Point(10, 250);

        // Selects THE FIRST tab initially.. 
        this.tabControl1.SelectedIndex = 0;

        this.tabPage1.Text = "myTabPage1";
        this.tabPage1.TabIndex = 0;

        this.tabPage2.Text = "myTabPage2";
        this.tabPage2.TabIndex = 1;

        this.btn.Text = "Select myTabPage2";
        this.btn.Click += new EventHandler(btn_click);

        this.Size = new Size(400, 400);
        this.Controls.AddRange(new Control[] {
            this.tabControl1});
        this.Controls.Add(btn);
    }
    public void btn_click(object sender, EventArgs e)
    {
        tabControl1.SelectedIndex = 1;
    }
    public Form1()
    {
        MyTabs();
    }

    static void Main() 
    {
        Application.Run(new Form1());
    }
} 
```

# c# - 从自定义 RadTreeNode 模板读取值 - 适用于子树但不适用于根树

> ID：14605055
> 
> 赞同：0
> 
> 时间：2013-01-30T13:20:15.010
> 
> 标签：c#, asp.net, telerik, radtreeview

我使用带有其元素的自定义模板的 RadTree。每个元素还有 3 个单选按钮作为 RadioButtonList，在自定义模板中定义。用于创建新 radTree 项目的代码是：

```
 RadTreeNode node = new RadTreeNode(usedName, value); // just some name and value
 node.NodeTemplate = new AdminFunctionsPhenoTreeTemplate(); // makes buttons
 node.ExpandMode = TreeNodeExpandMode.ServerSideCallBack;
 Tree.Nodes.Add(node); // adding node to RadTree.
// selections.
 RadioButtonList rbRights = (RadioButtonList)node.FindControl("rbRights");
if (rbRights != null)
 {
 rbRights.SelectedIndex= accessLevel; // set correct radio button using rbRights.SelectedIndex
 }
 node.DataBind(); 
```

此代码成功创建了所需的节点，并且分配 rbRights.SelectedIndex= accessLevel 确实按照说明设置了所需的单选按钮。它适用于根树和我在按需回调调用时创建的子树。

用于在服务器端回调中创建子树的代码完全相同 - 在用户想要扩展树后，我使用动态创建子树。唯一形式上的区别，它将新子树附加到父节点的 Nodes 属性（与示例中的 RadTree“树”对象相反）。这都是标准的。

当我收到回发时，我会读取如下单选按钮的值：

```
List<RadTreeNode> alls = (List<RadTreeNode>)Tree.GetAllNodes();
   foreach (RadTreeNode node in alls)
        {
            RadioButtonList rbRights = (RadioButtonList)node.FindControl("rbRights");
            accessLevel = rbRights.SelectedIndex; // here I read my radios
         } 
```

树的内容读取良好，子树按钮读取良好（通过回调调用创建的那些）。但是由上面的代码片段创建的主根树的按钮总是返回默认值，既不是我在创建代码中插入的（尽管它反映在屏幕上）也不是我用鼠标选择的。

模板编码如下：

```
class AdminFunctionsPhenoTreeTemplate : ITemplate
    {
        public void InstantiateIn(Control container)
        {
            container.Controls.Add(new LiteralControl("<table style=\"margin:0px;padding:0px;\"><tr><td>"));
            Label label1 = new Label();
            label1.ID = "ItemLabel";
            label1.Text = "Text";
            label1.Font.Size = 8;
            // label1.Font.Bold = true;
            label1.DataBinding += new EventHandler(label1_DataBinding);

            container.Controls.Add(label1);
            container.Controls.Add(new LiteralControl("</td><td>"));
            RadioButtonList rbRights = new RadioButtonList();
            rbRights.ID = "rbRights";
            rbRights.Items.Add(new ListItem("r/o"));
            rbRights.Items.Add(new ListItem("r/w"));
            rbRights.Items.Add(new ListItem("r/w/meta"));
            rbRights.SelectedIndex = 0;
            rbRights.RepeatDirection = RepeatDirection.Horizontal;
            container.Controls.Add(rbRights);
            container.Controls.Add(new LiteralControl("</td></tr></table>"));
        }

        private void label1_DataBinding(object sender, EventArgs e)
        {
            Label target = (Label)sender;
            RadTreeNode node = (RadTreeNode)target.BindingContainer;
            string nodeText = (string)DataBinder.Eval(node, "Text");
            target.Text = nodeText;
        }

    } 
```

我想知道我错过了什么，请帮助我完成这项工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:03:31.293

解决了：

在回发时，onLoad 中发生了一个杂散的 Tree.DataBind() 调用。

这是将来自客户端的值重置为默认模板值。

# unity3d - 模拟双面扑克牌的最佳方法？

> ID：14605067
> 
> 赞同：2
> 
> 时间：2013-01-30T13:20:57.880
> 
> 标签：unity3d, blender, 3d-modelling, blender-2.61

在 Blender 3D 中建模双面扑克牌的最佳方法是什么，既高性能又灵活？

卡片的每一面都必须有自己独特的纹理，它应该有一定的厚度（我认为这排除了平面），应该有非常准确的碰撞检测，并且可能是可变形的（卡片在撞击时会“弯曲”一点桌子）。

可能有数百张牌，每张牌都有自己独特的纹理（这不是普通的牌组）。

模型/纹理很可能最终会出现在 Unity 3D 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:39:14.030

一个压扁的立方体，或两个具有相对法线的平面，具体取决于您是否需要实际厚度。您提到 Unity，所以我认为您实际上并不需要厚度。两个具有相反法线的平面，并启用背面剔除，这样您就不会遇到 z-fighting，应该可以解决问题。

# c++ - Eclipse 说构建完成但 exe 不存在

> ID：14605073
> 
> 赞同：0
> 
> 时间：2013-01-30T13:21:14.137
> 
> 标签：c++, eclipse, build

我正在尝试在 Eclipse 中用 C++ 编写一个“hello world”程序。在开始一个新项目时，我选择了“microsoft visual c++”作为工具链。

我还将 cl.exe 的路径添加到 Windows 的路径变量中。

现在，我可以构建代码，并且可以从 Eclipse 中获取“构建完成”消息，但 exe 文件不在调试文件夹中。

程序的输出如下：

> 15:08:52 **** 项目 helloWorld 的配置调试重建 ****
> 
> 信息：内部构建器用于构建
> 
> cl /c /EHs /MD /Zi /nologo "/Fosrc\helloWorld.obj" "..\src\helloWorld.cpp"
> 
> 15:08:52 构建完成（耗时 174 毫秒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:26:17.210

您正在编译源文件，但没有链接它。该`/c`选项告诉 VC++ 跳过链接阶段 ( [http://msdn.microsoft.com/en-us/library/8we9bhf4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/8we9bhf4(v=vs.71).aspx) )，这会将您的`.obj`文件变成可执行文件`.exe`。

检查您的编译器设置并`/c`从选项中删除，或显式调用`LINK`，如 msdn 链接所示：

`LINK firsti.obj second.obj third.obj /OUT:filename.exe`

（另外，`/Fo`开关应该在双引号之外并用空格分隔。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T01:15:08.340

我在尝试将项目配置为使用 MSVS 2003 (VC7) 编译时遇到了同样的问题，我发现使用 ProMon 时 CL.exe 找不到 dll - 将位置添加到 PATH 环境变量中解决了它。

在此处查看我的完整博客文章：http: [//dandar3.blogspot.com/2013/06/eclipse-cdt-and-microsoft-visual-c.html](http://dandar3.blogspot.com/2013/06/eclipse-cdt-and-microsoft-visual-c.html)

# sql - 为每个跨越的小时复制一次行

> ID：14605075
> 
> 赞同：0
> 
> 时间：2013-01-30T13:21:25.270
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

`StartTime`我需要复制每一行的次数与和之间的小时数一样多`EndTime`。

示例数据：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/587a4/1)**

```
TimeKey HourKey SensorKey   IdleTimeMinute  StartTime   EndTime
20121017    8   45  110 2012.10.17 08:31    2012.10.17 10:21
20121017    10  45  25  2012.10.17 10:26    2012.10.17 10:51
20121017    12  45  5   2012.10.17 12:21    2012.10.17 12:26
20121017    12  45  60  2012.10.17 12:41    2012.10.17 13:41
20121017    13  45  55  2012.10.17 13:51    2012.10.17 14:46
20121017    15  45  5   2012.10.17 15:11    2012.10.17 15:16
20121017    15  45  35  2012.10.17 15:46    2012.10.17 16:21
20121017    18  45  5   2012.10.17 18:51    2012.10.17 18:56 
```

**解释**

例如，第一行跨越 8、9 和 10 小时。在三个输出行的每一个中，都`IdleTimeMinute`需要是该小时内的分钟持续时间。

预期结果：

```
TimeKey HourKey SensorKey   IdleTimeMinute  StartTime   EndTime
20121017    8   45  29  2012.10.17 08:31    2012.10.17 10:21
20121017    9   45  60  2012.10.17 08:31    2012.10.17 10:21
20121017    10  45  21  2012.10.17 08:31    2012.10.17 10:21
20121017    10  45  25  2012.10.17 10:26    2012.10.17 10:51
20121017    12  45  5   2012.10.17 12:21    2012.10.17 12:26
20121017    12  45  19  2012.10.17 12:41    2012.10.17 13:41
20121017    13  45  41  2012.10.17 12:41    2012.10.17 13:41
20121017    13  45  9   2012.10.17 13:51    2012.10.17 14:46
20121017    14  45  46  2012.10.17 13:51    2012.10.17 14:46
20121017    15  45  5   2012.10.17 15:11    2012.10.17 15:16
20121017    15  45  14  2012.10.17 15:46    2012.10.17 16:21
20121017    16  45  21  2012.10.17 15:46    2012.10.17 16:21
20121017    18  45  5   2012.10.17 18:51    2012.10.17 18:56 
```

**较小的例子**

前两行的较小示例：

```
TimeKey HourKey SensorKey   IdleTimeMinute  StartTime   EndTime
20121017    8   45  110 2012.10.17 08:31    2012.10.17 10:21
20121017    10  45  25  2012.10.17 10:26    2012.10.17 10:51 
```

对于第一行，我们有时间`8:31 - 10:21`，所以在 8 小时 29 分钟内，在 9 小时内 60 分钟内，在 10 小时内 21 分钟内。

预期的小结果：

```
TimeKey HourKey SensorKey   IdleTimeMinute  StartTime   EndTime
20121017    8   45  29  2012.10.17 08:31    2012.10.17 10:21
20121017    9   45  60  2012.10.17 08:31    2012.10.17 10:21
20121017    10  45  21  2012.10.17 08:31    2012.10.17 10:21
20121017    10  45  25  2012.10.17 10:26    2012.10.17 10:51 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:37:33.527

这有点乱，但根据你的 SQL 小提琴你可以做

```
CREATE TABLE #Temp (RowNumber INT Identity(1,1),[TimeKey] int, [HourKey] int, 

[SensorKey] int, [IdleTimeMinute] int, [StartTime] datetime, [EndTime] datetime)

INSERT INTO #Temp
SELECT *
FROM Table1

DECLARE @i INT = 1
DECLARE @StartTime DATETIME, @EndTime DATETIME
DECLARE @Total INT = (SELECT COUNT(*) FROM #Temp)
DECLARE @x INT = 1
DECLARE @TotalHours INT = 0
WHILE @i <= @Total + 1
BEGIN

SET @StartTime = (SELECT StartTime FROM #temp WHERE RowNumber = @i)
SET @EndTime = (SELECT EndTime FROM #temp WHERE RowNumber = @i)               
SET @x = 1
SET @TotalHours = (SELECT DATEDIFF(Hour,@StartTime,@EndTime))

WHILE @x <= @TotalHours
BEGIN
INSERT INTO Table2 SELECT * FROM #Temp WHERE RowNumber = @i
SET @x = @x + 1
END
SET @i = @i + 1
END

SELECT * FROM Table2 
```

这是假设您有第二张具有这种布局的桌子

```
CREATE TABLE Table2
    (RowNumber INT, [TimeKey] int, [HourKey] int, [SensorKey] int, [IdleTimeMinute] int, [StartTime] datetime, [EndTime] datetime)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:02:44.100

你可以试试这个。生成序列的限制。如果你`IdleTimeMinute`出乎意料的好，你必须`OPTION (MAXRECURSION n)`从 CTE 使用。查询可以从 SQL Server 2005+ 运行。对于旧版本，您必须使用自己的序列生成机制。

```
;WITH Times
AS
(
  SELECT 1 Id
  UNION ALL
  SELECT Id + 1 
  FROM Times
  WHERE Id < 100
)
SELECT
  R.* ,
  CASE WHEN (IDLETIMEMINUTE - 60 * (T.Id - 1)) / 60 > 0 
      THEN 60
      ELSE (IDLETIMEMINUTE % 60)
   END IDLETIMEMINUTE_New
FROM Table1 R
  JOIN Times T
     ON T.Id <= CEILING(R.[IdleTimeMinute]/60.0) 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/587a4/39)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:43:34.733

[SQLFiddle](http://sqlfiddle.com/#!3/587a4/84)

```
WITH    q(n) AS
        (
        SELECT  0
        UNION ALL
        SELECT  n + 1
        FROM    q
        WHERE   n <23
        )
select TimeKey,
       q.n as HourKey,
       SensorKey,
       (select min(V) from 
         (select ETime-q.n*60 as V
          union all
          select ((q.n+1)*60)-sTime as V
          union all 
          select 60 as V          
         )  x
       ) as IdleTimeMinute,
       StartTime,
       EndTime
from q 
join 
(
select *,
DATEPART(HOUR, starttime)*60
   +DATEPART(MINUTE, starttime) sTime,
DATEPART(HOUR, Endtime)*60
   +DATEPART(MINUTE, Endtime) eTime
from 
table1 
) t1
on q.n*60 between (t1.sTime/60)*60 and t1.eTime
order by TimeKEy,SensorKey,HourKey,StartTime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T06:43:20.087

干得好。这甚至可以处理时间跨度超过午夜或超过很多天的情况。它应该表现得非常好。

请参阅[SqlFiddle](http://sqlfiddle.com/#!3/d828a/7)。

```
DECLARE @MaxHour int = IsNull((SELECT Max(DateDiff(hour, StartTime, EndTime)) + 1 FROM dbo.Table1), 0);

WITH L0 AS (SELECT 1 N UNION ALL SELECT 1),
L1 AS (SELECT 1 N FROM L0, L0 B),
L2 AS (SELECT 1 N FROM L1, L1 B),
L3 AS (SELECT 1 N FROM L2, L2 B),
L4 AS (SELECT 1 N FROM L3, L3 B),
L5 AS (SELECT 1 N FROM L4, L4 B),
Nums AS (SELECT Num = Row_Number() OVER (ORDER BY (SELECT 1)) FROM L5)
SELECT
   TimeKey = Convert(int, Convert(char(8), S.HourStartTime, 112)),
   HourKey = DatePart(hour, S.HourStartTime),
   T.SensorKey,
   IdleTimeMinute = DateDiff(minute, S.HourStartTime, E.HourEndTime),
   T.StartTime,
   T.EndTime,
   S.HourStartTime,
   E.HourEndTime
FROM
   dbo.Table1 T
   CROSS APPLY (
      SELECT AnchorHour = DateAdd(hour, DateDiff(hour, 0, T.StartTime) + N.Num - 1, 0)
      FROM Nums N
      WHERE
         DateDiff(hour, T.StartTime, T.EndTime) + 1 >= N.Num
         AND N.Num <= @MaxHour
   ) D
   CROSS APPLY (
      SELECT HourStartTime = Max(StartTime)
      FROM (VALUES (D.AnchorHour), (T.StartTime)) S (StartTime)
   ) S
   CROSS APPLY (
      SELECT HourEndTime = Min(EndTime)
      FROM (VALUES (DateAdd(hour, 1, D.AnchorHour)), (T.EndTime)) E (EndTime)
   ) E
ORDER BY
   TimeKey,
   StartTime,
   HourKey; 
```

我包括了选定小时的新时间跨度。如果您希望该时间跨度结束`:59`而不是`:00`下一小时，则在第三个`CROSS APPLY`更改`DateAdd(hour, 1, D.AnchorHour)`为`DateAdd(minute, 59, D.AnchorHour)`并添加到子句`+ 1`的末尾。`DateDiff(minute, S.HourStartTime, E.HourEndTime)``SELECT`

在我看来：

*   使用 CTE 逐步增加一个人的最大差异并不是最佳的。一旦达到最大 Num，我使用的 CTE 就会退出，最高可达 4294967296。
*   不计算新 TimeKey 的解决方案是脆弱的，因为它依赖于一个未说明的假设，即不能跨越午夜。
*   依赖于您将表更改为具有无间隙单调递增 ID 的解决方案不太可能适合您的实际数据。

注意：我声明 @MaxHour 变量的原因是我正在使用的动态数字表 CTE 需要一个常量。嗯，这并不完全准确，但总而言之，如果没有常量，它可以选择一个执行计划，该计划不会限制获得快速查询所需的行。我选择`DateDiff`计算这个，但事实上我现在看到这可能会更快，如果你在 IdleTimeMinute 上有一个索引肯定会更快：

```
DECLARE @MaxHour int = IsNull((SELECT (Max(IdleTimeMinute) + 118) / 60 FROM dbo.Table1), 0); 
```

由于可以跨越两个不同小时的最小时间范围是 2 分钟（比如 11:59 到 12:00），因此我们必须添加 118 分钟以确保至少有 2 小时。

# facebook - 使用 Facebook/OpenID 验证 WebService

> ID：14605083
> 
> 赞同：1
> 
> 时间：2013-01-30T13:21:40.930
> 
> 标签：facebook, web-services, authentication, security

### 简化背景：

1.  允许用户上传和评论一些内容的网站，比如图片（经典的 CRUD Web 应用程序）。
2.  进入系统的三种方式：经典的用户名/密码表单、Facebook Conntect、OpenID (Google)。
3.  公共 API，允许从系统读取数据并创建内容（经过身份验证的用户）。
4.  使用 API 的移动 (iOS/Android) 应用程序。

### 问题：

就像网站一样，移动应用程序应该提供 FBConnect/OpenID 身份验证。但是，我绝对不知道如何在网站的公共 API 中验证这样的用户。

如何为使用 FB/Google 进行身份验证并同时将我的 API 用于经过身份验证的用户的移动应用程序创建安全的身份验证机制？

# php - mysqli_stmt::bind_param() [mysqli-stmt.bind-param]：变量数与参数数不匹配

> ID：14605084
> 
> 赞同：3
> 
> 时间：2013-01-30T13:21:50.393
> 
> 标签：php, mysql, md5

我的 php 表单在我的表中插入了几列和一个加密密码。但是，当我运行它时，它说变量号与参数的数量不匹配。这是我的代码：

```
<?php
if (isset($_POST['insert'])) {
require_once 'login.php'; 

  $OK = false;
  $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");
  $stmt = $conn->stmt_init();

  $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password)
          VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))';
  if ($stmt->prepare($sql)) {
    // bind parameters and execute statement
    $stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']);
    // execute and get number of affected rows
    $stmt->execute();
    if ($stmt->affected_rows > 0) {
      $OK = true;
    }
  }
  if ($OK) {
    header('Location: confirm.php');
    exit;
  } else {
    $error = $stmt->error;
  }
}
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Add User</title>
</head>

<body>
<h1>Add User</h1>
<?php if (isset($error)) {
  echo "<p>Error: $error</p>";
} ?>
<form id="form1" method="post" action="">
  <p>
    <label for="user_email">User email:</label>
    <input name="user_email" type="text" class="widebox" id="user_email">
  </p>
    <p>
    <label for="user_name">User name:</label>
    <input name="user_name" type="text" class="widebox" id="user_name">
  </p>
    <p>
    User role: <select name = "user_pref">
    <option value = "BLU">Blue</option>
    <option value = "YEL">Yellow<option>
    <option value = "GRE">GREEN</option>
    </select>
</p>
  <p>
    <input type="submit" name="insert" value="Register New User" id="insert">
  </p>
</form>
</body>
</html> 
```

当我在没有加密密码的情况下测试表单时，它工作正常，所以当我尝试插入密码时，这条线会导致问题：

```
$stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); 
```

我应该将字符串更改为其他密码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:26:09.377

```
$sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password)
      VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))'; 
```

仅定义 3 个占位符，但您尝试写入 4 个占位符。

```
$stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); 
```

对于每个 ? 您插入准备好的 SQL 语句，您必须在 bind_param 中传递一个变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:28:09.640

您在这里传递了四个变量：

```
$stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); 
```

但只需要其中三个

```
 $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password)
      VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))'; 
```

看 ”？” 标记，它将被替换为 bild_params。您可能希望将 SQL 查询替换为下一个：

```
 $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password)
      VALUES(?, ?, ?, des_encrypt(substring(md5(?),1,8)))'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:06:10.560

查询要采用的参数数量由查询中的数量决定`?`。

您的查询中有 3 个`?`：

```
$sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password) 
        VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))'; 
```

并且您正在传递 5 个参数`bind_param`：

```
$stmt->bind_param($_POST['user_email'], $_POST['user_name'], $_POST['user_pref']); 
```

有两种可能的解决方案：

1.  在查询中取 5 个参数：

    ```
    $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password) 
            VALUES(?, ?, ?, ?, des_encrypt(?))'; 
    ```

2.  在函数中只传递 3 个参数`bind_param`：

    ```
    $stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); 
    ```

# entity-framework - LINQ to Entity：如何包含条件 where 条件

> ID：14605095
> 
> 赞同：0
> 
> 时间：2013-01-30T13:22:25.167
> 
> 标签：entity-framework, linq-to-entities

我是 EntityFramework 的新手，遇到了查询中使用的不受支持的函数的问题。因此，我希望社区可以帮助找到一种优雅的方式。
**该查询尝试根据用户名和/或 Windows 用户名查找用户。**

```
[Flags]
public enum IdentifierType
{
    Username = 1,
    Windows = 2,
    Any = Username | Windows,
} 
```

以下代码引发**NotSupportedException**，因为 Enum.HasFlag 无法转换为存储表达式。

```
public User GetUser(IdentifierType type, string identifier, bool loadRelations = false)
{
    using (var context = contextFactory.Invoke())
    {
        var user = context.Users.FirstOrDefault(u => u.Username == identifier && type.HasFlag(IdentifierType.Username)
        || u.WindowsUsername == identifier && type.HasFlag(IdentifierType.Windows));

        return user;
    }
} 
```

如果我以旧的方式重写查询，则查询有效，但布尔逻辑在数据库中执行：

```
public User GetUser(IdentifierType type, string identifier, bool loadRelations = false)
{
    using (var context = contextFactory.Invoke())
    {
        var user = context.Users.FirstOrDefault(u => u.Username == identifier && (type & IdentifierType.Username) == IdentifierType.Username
        || u.WindowsUsername == identifier && (type & IdentifierType.Windows) == IdentifierType.Windows);

        return user;
    }
} 
```

> WHERE ((Username = @username) AND (1 = (3 & (1)))) OR (WindowsUsername = @windowsusername) AND (2 = (3 & (2))))

**如何强制框架在将布尔逻辑发送到数据库之前对其进行评估，因此二进制操作不在数据库级别完成？**

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:37:17.037

例如：

```
public User GetUser(IdentifierType type, string identifier, bool loadRelations = false)
{
    using (var context = contextFactory.Invoke())
    {
        IdentifierType tw = type & IdentifierType.Windows;
        IdentifierType tu = type & IdentifierType.Username;
        var user = context.Users.FirstOrDefault(u => u.Username == identifier && tu == IdentifierType.Username
        || u.WindowsUsername == identifier && tw == IdentifierType.Windows);

        return user;
    }
} 
```

但我希望并相信数据库服务器检测到 1 = (3 & (1)) 是一个常数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:06:05.147

给你（我已经将我的代码转换为你的，所以在语法上可能不是 100%）......

```
public User GetUser(IdentifierType type, string identifier, bool loadRelations = false)
{
    using (var context = contextFactory.Invoke())
    {
        var user = context.Users.FirstOrDefault(u => u.Username == ((type.HasFlag(IdentifierType.Username)) ? identifier : u.Username) && 
    && u.WindowsUsername == ((type.HasFlag(IdentifierType.Username)) ? identifier : u.WindowsUsername);

        return user;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:20:57.763

对不起，我意识到这个问题没有指出有效的问题。在阅读了更多相关内容之后，我不得不重写这个问题，最后从 Gert Arnold 那里得到了一个很好的答案，见[这里](https://stackoverflow.com/questions/14621450/dynamic-where-clause-or-in-linq-to-entities)。

LINQKit[提供](http://www.albahari.com/nutshell/linqkit.aspx)了强大的扩展，如**PredicateBuilder**以涵盖具有 OR 条件的动态查询。

# javascript - 使用给定的数字数组更改 JavaScript 中数字的基数

> ID：14605096
> 
> 赞同：1
> 
> 时间：2013-01-30T13:22:27.130
> 
> 标签：javascript

我被要求在 JavaScript 中创建一个将整数从以十为基数转换为另一个基数的方法，它还应该支持提供您的自定义数字数组。例如，

```
toBase(10, 2 ["A","B"])// returns 'BABA' 
```

如果未提供数字数组，它应该作为 JavaScript 'toString' 方法工作

```
var a = 10;
a.toString(2);//returns '1010' 
```

我编写了一个函数，可以将整数从基数 10 转换为另一个基数，并可以选择提供数字数组 -

```
function toBase(number, radix, digits)  
{
    radix = radix || 10;
    digits = digits || "0123456789abcdefghijklmnopqrstuvwxyz".split("").slice(0, radix)

    if (radix > digits.length) {
        var msg = "Not enough digits to represent the number '" + number + "' in base " + radix;
        throw Error(msg);
    }

    if (number === 0) return digits[0];
    var a = []
    while (number) {
        a.splice(0, 0, digits[number % radix])
        number = parseInt(number / radix);
    }
    return a.join("");
} 
```

这个功能对我来说很好，但我想知道是否有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:39:12.597

您可以只使用本机`toString`方法，然后使用数组[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)中的输出：`digits`

```
function toBase(number, radix, digits) {
    if (digits && digits.length >= radix)
        return number.toString(radix).replace(/./g, function(d) {
            return digits[ parseInt(d, radix) ];
        });
    else
        return number.toString(radix);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:23:21.493

一种可能比您使用的方法稍快的方法是位移。当基数是 2 的幂时，这最容易工作，这是一个示例

```
function toBase(x, radix, A) {
    var r = 1, i = 0, s = '';
    radix || (radix = 10); // case no radix
    A || (A = '0123456789abcdefghijklmnopqrstuvwxyz'.split('')); // case no alphabet
    if (A.length < radix) throw new RangeError('alphabet smaller than radix');
    if (radix < 2) throw new RangeError('radix argument must be at least 2');
    if (radix < 37) return useBergisMethod(x, radix, A); // this is arguably one of the fastest ways as it uses native `.toString`
    if (x === 0) return A[0]; // short circuit 0
    // test if radix is a power of 2
    while (radix > r) {
        r = r * 2;
        i = i + 1;
    }
    if (r === radix) { // radix = 2 ^ i; fast method
        r = r - 1; // Math.pow(2, i) - 1;
        while (x > 0) {
            s = A[x & r] + s;
            x >>= i; // shift binary
        }
        return s; // done
    }
    return methodInOriginalQuestion(x, radix, A); // else not a power of 2, slower method
}
/*
toBase(74651278, 64, '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzáé');
"4SnQE"
    // check reverse
var i, j = 0, s = '4SnQE', a = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzáé';
for (i = 0; i < s.length; ++i) j *= 64, j += a.indexOf(s[i]);
j; // 74651278, correct
*/ 
```

# php - oci_connect() 仅适用于命令行

> ID：14605099
> 
> 赞同：6
> 
> 时间：2013-01-30T13:22:29.767
> 
> 标签：php, oracle10g, suse, apache2.2, oci8

好的，所以我对 oci、apache、php 和 suse 有这个可怕的问题。首先，版本：

```
PHP 5.3.15 (cli)
Apache/2.2.22 (Linux/SUSE)
OCI8 1.4.9
SUSE 12.2 32 bit
Oracle client 10.2.0.4 
```

## 问题

我有非常简单的 php 文件：

```
<?php
    error_reporting(E_ALL);
    ini_set('display_errors', '1');
    oci_connect('user', 'passwd', 'host/sid');
?> 
```

当我从命令行运行它时，它执行得很好：

```
machine:~ # php oci.php
machine:~ # 
```

但是当我在浏览器中运行它时，它给了我：

```
Warning: oci_connect() [function.oci-connect]: OCIEnvNlsCreate() failed. There is something wrong with your system - please check that ORACLE_HOME and LD_LIBRARY_PATH are set and point to the right directories 
```

## 阿帕奇配置

我已经为这个问题苦苦挣扎了一段时间，我很确定我的 apache 配置是正确的。

我在任何 apache 进程启动**之前**导出所有必需的变量- 我添加了

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/oracle/home/lib; export LD_LIBRARY_PATH
ORACLE_HOME=/path/to/oracle/home; export ORACLE_HOME
TNS_ADMIN=/path/to/oracle/home/network/admin; export TNS_ADMIN
NLS_LANG=POLISH_POLAND.EE8MSWIN1250; export NLS_LANG 
```

在`/etc/init.d/apache2`脚本的开头（我启动 apache `/etc/init.d/apache2 start`）。

Apache 从`wwwrun`用户运行，该用户在`oinstall`和`dba`组中：

```
machine:~ # cat /etc/apache2/uid.conf
User wwwrun
Group www
machine:~ # id wwwrun
uid=30(wwwrun) gid=8(www) groups=8(www),113(oinstall),114(dba)
machine:~ # l $ORACLE_HOME
total 216
drwxr-xr-x 48 oracle oinstall 4096 Jan 25 17:07 ./
drwxrwxr-x  3 oracle oinstall 4096 Jan 25 17:01 ../
...
machine:~ # 
```

## 可能的问题

`Environment`我在输出部分没有任何环境变量`phpinfo();`- 这可能是问题吗？如果是，我该如何解决这个问题？这是某种安全问题吗？我读过启用 SELinux 的类似问题，但我没有，我的防火墙已关闭。

## 解决方案？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:24:30.423

问题解决了！感谢[这些](http://php.net/oci8.installation)（*设置 Oracle 环境部分）说明和 ken_yap*[对此](http://forums.opensuse.org/english/get-technical-help-here/applications/393416-setting-apache2-environment-variables.html)线程的回答。

要将变量放在 Apache 的*Environment*部分中，您只需将它们添加到`/etc/sysconfig/apache2`file:`LD_LIBRARY_PATH=/path/to/oracle/lib`中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-17T20:07:32.593

另一种解决方案（不需要 root 访问）是在 php 页面中添加以下行：

```
putenv("ORACLE_HOME=/opt/app/oracle/product/11.2.0/db_1");
putenv("LD_LIBRARY_PATH=/opt/app/oracle/product/11.2.0/db_1/lib:/lib:/usr/lib"); 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-10T11:39:13.647

对于 Debian 用户 - 编辑文件

```
/etc/apache2/envvars 
```

在文件末尾添加指向您的 OCI 库的链接 - 例如。

```
export LD_LIBRARY_PATH=/opt/oracle/instantclient_12_2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-10T10:56:44.390

Centos 7 的另一种方法`nginx`

```
$ sudo vim /etc/ld.so.conf.d/oracle-instantclient.conf

// Add path to oracle client lib, the XX is the version, ex: /usr/lib/oracle/XX/client64/lib 

$ sudo ldconfig
$ sudo service php-fpm restart 
```

完毕！

# c# - GroupedItemsPage：从detailpage返回时视图跳回开始

> ID：14605103
> 
> 赞同：2
> 
> 时间：2013-01-30T13:22:41.967
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我为一家报纸开发了一个非常受欢迎的新闻应用程序。不幸的是，我的用户报告了以下我可以重现的问题：

该应用程序基本上由一个**GroupedItemsPage**和一个**ItemDetailPage**（以及其他几个页面，这里不重要）组成。GroupedItemsPage 显示按类别分组的新闻。当用户向右滚动时，他单击感兴趣的项目之一，被重定向到 ItemDetailPage 并导航回来。返回 GroupedItemsPage 视图会**跳回第一个组，并且不会停留在用户所在的最后一个位置（组）**。当我创建一个新的 Windows 应用商店“Grid App”时，可以找到完全相同的行为（在我的环境中）。

不幸的是，我自己无法解决这个问题，也没有在网上找到一些有用的评论。我看到了其他几个可以解决此问题的应用程序，而其他应用程序则没有。任何评论将**不胜感激**。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:55:40.680

我找到了另一个更简单的解决方案。我想分享它：

在 GroupedItemsPage (XAML) 我添加了：

```
<common:LayoutAwarePage
NavigationCacheMode="Enabled" ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:46:49.573

您需要自己实现这一点。从 GroupedItemsPage 导航到 ItemDetailPage 时，您需要记住单击项。然后，当您导航回 GroupedItemsPage 时，您需要滚动到记住的项目。您可以通过在 GridView 上使用 ScrollIntoView 方法来实现。

# string - Bash：从字符串中提取（百分比）可变长度数

> ID：14605107
> 
> 赞同：5
> 
> 时间：2013-01-30T13:22:54.537
> 
> 标签：string, bash, numbers, progress-bar

我想使用 bash 脚本编写一个小进度条。

要生成进度条，我必须从日志文件中提取进度。

此类文件（此处为 run.log）的内容如下所示：

> 2d 15h 完成时间，完成 42.5%，剩余时间步长 231856

我现在有兴趣隔离 42.5%。现在的问题是这个数字的长度以及数字的位置是可变的（例如，“完成时间”可能只包含一个数字，如 23 小时或 59 分钟）。

我在这个位置上试过了

```
echo "$(tail -1 run.log | awk '{print $6}'| sed -e 's/[%]//g')" 
```

它在短的“完成时间”以及通过 %-sign 失败

```
echo "$(tail -1 run.log | egrep -o '[0-9][0-9].[0-9]%')" 
```

这里仅适用于 >= 10% 的数字。

有更多可变数字提取的解决方案吗？

==================================================== ====

更新：现在是进度条的完整脚本：

```
#!/bin/bash

# extract % complete from run.log
perc="$(tail -1 run.log | grep -o '[^ ]*%')"

# convert perc to int
pint="${perc/.*}"

# number of # to plot
nums="$(echo "$pint /2" | bc)"

# output
echo -e ""
echo -e "   completed: $perc"
echo -ne "   "
for i in $(seq $nums); do echo -n '#'; done
echo -e ""
echo -e "  |----.----|----.----|----.----|----.----|----.----|"
echo -e "  0%       20%       40%       60%       80%       100%"
echo -e ""
tail -1 run.log
echo -e "" 
```

谢谢你们的帮助，伙计们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:34:46.230

根据你的例子

```
grep -o '[^ ]*%' 
```

应该给你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:29:43.790

您可以从以下命令中提取 %：

```
tail -n 1 run.log | grep -o -P '[0-9]*(\.[0-9]*)?(?=%)' 
```

解释：

```
grep options:
-o : Print only matching string.
-P : Use perl style regex

regex parts:
[0-9]* : Match any number, repeated any number of times.
(\.[0-9]*)? : Match decimal point, followed by any number of digits. 
              ? at the end of it => optional. (this is to take care of numbers without fraction part.)
(?=%)  :The regex before this must be followed by a % sign. (search for "positive look-ahead" for more details.) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:28:50.993

您应该能够`comma (,)`在文件中的第一个之后隔离进度。即。你想要和之间的`,`字符`%`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:35:18.403

有很多方法可以实现你的目标。我宁愿多次使用*cut ，因为它易于阅读。*

```
cut -f1 -d'%' | cut -f2 -d',' | cut -f2 -d' ' 
```

第一次*切割*后：

```
 Time to finish 2d 15h, 42.5 
```

秒后（注意空格）：

```
 42.5 
```

最后一个只是为了摆脱空间，最终结果：

```
42.5 
```

# javascript - 图书馆注册的目的是什么，如果我只是将它们添加到项目中会有什么不同吗？

> ID：14605109
> 
> 赞同：0
> 
> 时间：2013-01-30T13:23:00.007
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, jquery-file-upload

我在我的 asp net mvc 4 项目中集成了 jquery 文件上传插件。我有一个 asp net mvc 3 实现，我可以测试它。

当我将所有 js、css、c# 和视图文件添加到我的项目时，我会加载但在尝试选择/上传文件时看不到任何更改。

正如我所注意到的，输入文件绑定到 onChange 事件，该事件应在选择文件时触发。但事实并非如此。

```
Html.RequiresJs("jquery/1.7.1/jquery.min.js", "googleCDN", 1);
Html.RequiresCss("Bootstrap/bootstrap.min.css", "Content", 2); 
```

他们有很多。此外，我已将这些文件添加到正确的文件夹中并添加到包中，以便在应用程序启动后立即加载。（我也可以验证。）

然而，我无法找到这些事件没有触发的原因。这些注册的具体目的是什么？如果他们没有注册并且只是像我之前所说的那样添加到我的项目中，是否会产生一些影响？

该插件是：

[https://github.com/blueimp/jQuery-File-Upload#download](https://github.com/blueimp/jQuery-File-Upload#download)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:16:30.180

`RequireJs`和`RequiresCss`客户端依赖的特点

[http://clientdependency.codeplex.com/](http://clientdependency.codeplex.com/)

# javascript - 触发jQuery插件

> ID：14605110
> 
> 赞同：0
> 
> 时间：2013-01-30T13:23:02.543
> 
> 标签：javascript, html, jquery-plugins, triggers

我正在使用这个 jQuery 插件： http: [//gianlucaguarini.com/canvas-experiments/jQuery.BlackAndWhite/](http://gianlucaguarini.com/canvas-experiments/jQuery.BlackAndWhite/)。它基本上将图像设置为黑白，当您将图像悬停时，它会被着色。

现在我想知道当悬停其他东西（一些文本）时是否可以触发插件（为图片着色）。

我尝试在元素上触发 hover() 和 mouseenter，但这似乎没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:50:44.887

我只是尝试将图像触发事件绑定到不同的元素并且它有效。

我这样做了：

```
$('elem').on('click', function() {
    $('.imgWrap').eq(0).trigger('mouseenter');
}); 
```

它起作用了，它为图片着色，因此触发`mouseleave`将再次取消着色。

您必须找到一种方法来确定哪个元素触发了哪个图像（这`.eq(0)`仅用于测试，在实际情况下您需要更具体的东西，否则您将影响所有图像。

# javascript - 将元素设为父元素

> ID：14605112
> 
> 赞同：2
> 
> 时间：2013-01-30T13:23:06.793
> 
> 标签：javascript, jquery, html, dom

我有一个现有的 HTML；

```
<div id="maincontent">
        <div id="firstname_lbl"></div>
        <div id="firstname_fld"></div>
</div> 
```

我正在动态创建一个 jQuery 表单；

```
$('<' + items.type + '/>').attr({
        "action": items.action,
         "name": items.name,
         "class": items.attributes.class
        }) 
```

现在我希望这个“form”元素成为现有“maincontent”div的父元素

所以 DOM 应该是这样的；

```
<form>
<div id="maincontent">
            <div id="firstname_lbl"></div>
            <div id="firstname_fld"></div>
    </div>
</form> 
```

我如何使用 jQuery 做到这一点？

此外，我在 IE 中获得了该行的预期标识符（在 Firefox 中运行良好）；

```
var formEle = $('<' + items.type + '/>').attr({
        "action": items.action,
         "name": items.name,
         "class": items.attributes.class}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:24:52.660

你应该使用[`wrap`](http://api.jquery.com/wrap/)：

```
var form = $("<" + items.type + "/>").attr({
    action: items.action,
    name: items.name,
    "class": items.attributes["class"]
});

$("#maincontent").wrap(form); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:27:24.167

这里提供了一个很好的解决方案：[How to move child element from one parent to another using jQuery](https://stackoverflow.com/questions/2596833/how-to-move-child-element-from-one-parent-to-another-using-jquery)。

这是代码：

```
(function($){
    $.fn.moveTo = function(selector){
        return this.each(function(){
            var cl = $(this).clone();
            $(cl).appendTo(selector);
            $(this).remove();
        });
    };
})(jQuery);

$('#maincontent').moveTo('[FormSelectorHere]'); 
```

# asp.net-mvc - asp.net mvc 按需渲染局部视图

> ID：14605118
> 
> 赞同：1
> 
> 时间：2013-01-30T13:23:30.497
> 
> 标签：asp.net-mvc, partial-views

我是 asp.net mvc 的新手，我想知道我所做的是否正确。

我想创建一个用于搜索人的视图。这是我到目前为止所拥有的：

*   商业模式类：

    ```
    public class Person
    {
      public int Id { get; set; }
      public string FirstName { get; set; }
      public string LastName { get; set; }
      public Address Address { get; set; }
      public DateTime DOB { get; set; }
      public List<Telephone> Telephones { get; set; }
    } 
    ```

*   视图模型类：

    ```
    public class SearchPersonViewModel
    {
      public int Id { get; set; }
      public string FullName { get; set; }
      public string LicencePlate { get; set; }
      public string CarMake { get; set; }
      public string CarModel { get; set; }
    } 
    ```

*   部分观点：

    ```
    @model IEnumerable<MvcApplication2.Models.SearchPersonViewModel>

    @foreach (var item in Model)
    {
     @Html.DisplayFor(m => item.Id)
     @Html.DisplayFor(m => item.FullName)              
    } 
    ```

*   调用局部视图的视图：

    ```
    @Html.Action("Search", "Person"); 
    ```

*PersonController中的控制器方法：

```
 [ChildActionOnly]
    public ActionResult Search()
    {
         List<SearchPersonViewModel> model = new List<SearchPersonViewModel>();
         model.Add(new SearchPersonViewModel() { FullName = "test", Id = 3 });

        return PartialView("_SearchPerson", model);
    } 
```

现在的问题是每当加载主视图时都会调用 Search 方法。我想要的是在主视图上添加一个搜索文本框，用于过滤在部分视图中呈现的集合。我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:30:17.183

这样，您的部分将仅在点击时呈现

```
<script>

(function($){
   $('#btn').click(function(){
      $('#searchresult').load('@Url.Content("~/Person/Search")');

}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:44:40.670

向 /search 发出 ajax 请求并将数据附加到您的页面。

```
<div id = 'searchresult'>
@Html.Action("Search", "Person");
</div> 
```

每当你想过滤调用类似 $('#searchresult').load('/search?q=xxx');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:54:02.980

您可以使用 2 种方式：

*   微软 ajax 助手
*   jQuery

对于他们两个，你需要删除`[ChildActionOnly]`和`@Html.Action("Search", "Person");`

看这个例子：[Using Ajax.BeginForm with ASP.NET MVC 3 Razor](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)

# html - 如何在html表格中设置单元格列和单元格宽度？

> ID：14605120
> 
> 赞同：-6
> 
> 时间：2013-01-30T13:23:31.233
> 
> 标签：html, css, css-tables

> **可能重复：**
> [HTMl 表不同行中的列数不同](https://stackoverflow.com/questions/3838488/html-table-different-number-of-columns-in-different-rows)

如何使用 html 表格设计以下表格

```
 ----------------------------------
    |                  |             |
    |                  |             |
    |                  |             |
    |--------------------------------|                                
    |      |                         |
    |      |                         |
    |      |                         |
     --------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:32:57.210

我不建议使用表格来创建这种布局，但如果您真的必须使用 HTML 表格，`colspan`属性就是您问题的答案。

查看链接并尝试示例：[http ://www.w3schools.com/tags/att_td_colspan.asp](http://www.w3schools.com/tags/att_td_colspan.asp)

# php - 正则表达式在运行文本中查找句子

> ID：14605122
> 
> 赞同：0
> 
> 时间：2013-01-30T13:23:37.140
> 
> 标签：php, regex

您好正在寻找一个正则表达式解决方案来在运行文本中找到一个句子/一组单词。句子有时在一行中或分成两行。请帮忙。

当针对此文本运行时，有一个匹配项：

> 该案例已结案并已创建报告。

但是，当针对此文本运行时，它无法匹配：

> 案件已
> 结案并
> 已创建报告

我尝试了以下方法：

```
$t_pattern = "case has been closed";
preg_match($t_pattern, $var['subject'], $regs) 
```

基本上，我在电子邮件正文中搜索关闭票证的句子。响应是从支持票证系统发送的。虽然它在整个句子像示例 1 一样为一行时有效，但在类似于示例 2 的情况下它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:21:01.717

没有理由使用正则表达式来搜索该特定字符串。

只需使用[正则表达式替换](http://php.net/manual/en/function.preg-replace.php)来规范换行符（和其他空格），然后使用简单的[子字符串搜索](http://www.php.net/manual/en/function.strpos.php)：

```
$t_pattern = "case has been closed";
$subject = preg_replace('/\s+/', " ", $var['subject']);
strpos($subject, $t_pattern) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:41:37.907

你应该没问题

```
$t_pattern = "/case\s+has\s+been\s+closed/"; 
```

匹配一个或多个空白字符，`\s+`包括换行符。

# ios - UICollectionViewFlowLayout minimumInteritemSpacing 错误？

> ID：14605125
> 
> 赞同：1
> 
> 时间：2013-01-30T13:23:45.040
> 
> 标签：ios, uicollectionviewlayout

经过一番摆弄后，我开始怀疑 UICollectionViewFlowLayout 的间距代码中存在错误。

问题很简单：我想在屏幕上显示五个按钮，并且我希望按钮之间的间距为 1 pt（视网膜显示屏上为 2 像素）。为了实现这一点，我将 minimumInteritemSpacing 设置为 1.0，将单元格宽度设置为 159.5 pt，这样两个单元格的总和将达到 319 pt，从而为空间留下一个点。当我希望第三个按钮成为视图的全宽时出现问题，因为流布局导致间距为 0.5 pt，尽管已被告知保持最小值为 1.0。（见截图1）

![正确的布局错误的间距](../Images/b1f141abf81a8af828120f85fa108bd7.png)

设置间距的代码发生在

```
-(void)viewDidLoad
{
    UICollectionViewFlowLayout *flowLayout = (UICollectionViewFlowLayout *)[[self collectionView] collectionViewLayout];
    [flowLayout setMinimumInteritemSpacing:1.0];
    [flowLayout setMinimumLineSpacing:1.0];        
} 
```

和单元格的大小

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 2) {
        return CGSizeMake(320 ,151);
    }
    return CGSizeMake(159.5, 151);
} 
```

另一方面，如果我没有使第三个按钮全宽，则间距的行为与预期一样，尽管它不应该影响不同行的项目间间距。（截图2）

![正确的间距错误的布局](../Images/f80986c80d4a5a8669081b9e195232ba.png)

应该注意的是，在情节提要中设置了 CollectionView、CollectionViewCell 和 UILabel，并且我已经确保屏幕截图中可见标签的框架小于单元格的宽度，我也尝试过完全删除标签但是结果相同。

我不明白为什么会发生这种情况，除非它是流布局代码中的错误，并且我在将其作为错误提交之前在这里寻找健全性检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:55:12.300

正如评论中提到的，必须在这里描述问题和随后的一些想法使我意识到，虽然 minimumInteritemSpacing 是一个 CGFloat ，但传递它的小数值是没有意义的，当你这样做时它的行为是不明确的。这是因为，在点与像素比率为 1:1 的设备上，没有半个像素这样的东西。碰巧的是，在某些情况下，它的行为符合我的预期，从而使我对真正的（而且相当明显的）问题视而不见。

希望阅读本文可以帮助其他人快速意识到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T10:43:49.543

解决方法是用点值除以屏幕比例。

`flowLayout.setMinimumInteritemSpacing = 1.0 / UIScreen.main.scale`

该属性接受一个值 in `points`，它是屏幕像素的抽象。来自苹果文档：

> 对于 Retina 显示器，比例因子可以是 3.0 或 2.0，一个点可以分别由九个或四个像素表示。对于标准分辨率显示器，比例因子为 1.0，1 点等于 1 个像素。

通过将点值除以屏幕比例，您会得到一个`CGFloat`等于设备屏幕上 1 个像素的值。

# ios - PhoneGap - 多个 Web 视图

> ID：14605126
> 
> 赞同：1
> 
> 时间：2013-01-30T13:23:51.127
> 
> 标签：ios, cordova, webview

我已经阅读了几乎所有与该主题相关的帖子 - 但我无法找到完整的代码/适当的答案

我正在尝试在 iPhone PhoneGap 应用程序中添加两个 PhoneGap WebView。

下面是代码

```
- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];

    self.cleaver1 = [[[MainViewController alloc] init] autorelease];
    self.cleaver2 = [[[MainViewController alloc] init] autorelease];

    self.cleaver1.view.frame = CGRectMake(0, 0, 320, 200);
    self.cleaver2.view.frame = CGRectMake(0, 100, 320, 420);

    self.cleaver1.wwwFolderName = @"www";
    self.cleaver1.startPage = @"navigation.html";
    self.cleaver2.wwwFolderName = @"www";
    self.cleaver2.startPage = @"mail.html";

    TestViewController *vc = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil];

    [vc.view addSubview:self.cleaver1.view];
    [vc.view addSubview:self.cleaver2.view];

    self.window.rootViewController = vc;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

两者，webviews 正在加载“index.html”，它没有按预期工作。

请建议我，PhoneGap 是否支持多个 WebViews？

# ruby-on-rails - 单击消息时，如何从数据库中检索和显示其他文本？

> ID：14605129
> 
> 赞同：0
> 
> 时间：2013-01-30T13:23:59.043
> 
> 标签：ruby-on-rails, onclick, message

我想根据从数据库中获取的文本生成一个链接。此链接应该能够通过在文本字段中显示另一个值来响应 onclick 事件。

这样做的目的是显示消息标题，然后在单击给定消息时显示与单个消息有关的详细信息，而不是最初检索和传输整个文本集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:49:21.270

如果你想用不显眼的 Javascript 以 Rails 的方式制作它，你需要做接下来的事情：

首先，您需要将`jquery`和添加`jquery_ujs`到您的 application.js 资产（默认情况下，此文件已包含在其中）。

然后，在带有消息列表的视图文件中，使用启用了远程选项的链接`app/views/messages/index.html.erb`：

```
<%= link_to message.title, details_path(message), :remote => true %> 
```

远程链接会将 GET AJAX 调用发送到您的服务器，而不是简单的 GET。

在你需要准备的路线中`details_path`，像这样`config/routes.rb`：

```
get '/messages/:id/details' => 'messages#details' 
```

将`details`方法添加到您的`MessagesController`, `app/controllers/messages_controller.rb`：

```
class MessagesController
  def details
    @details_string = # ... take it from DB via params[:id]
  end
end 
```

并且至少为新方法创建一个视图文件`app/views/messages/details.js.erb`：

```
$('#details-input').val('<%= @details_string %>'); 
```

因此，当用户单击带有消息标题的链接时，浏览器会向服务器发送 AJAX 调用并获取类似的 Javascript `$('#details-input').val('Details string...');`，它会运行它，您会`Details string...`在`#details-input`文本字段中看到。

# android - 无法将项目导入工作区（无消息错误）

> ID：14605131
> 
> 赞同：1
> 
> 时间：2013-01-30T13:24:05.930
> 
> 标签：android, import

我有一个旧的 Android 项目坐在另一台笔记本电脑上。当我不得不查看它的代码时，我尽量不改变它的内容。但是当我试图查看它时，我似乎无法将它导入我的工作区。我的工作区中没有任何现有项目。我也尝试过删除我的“工作区”文件夹，以便重新开始，但它仍然无法正常工作。没有错误消息，它只是不会导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:47:08.077

同样的事情也发生在我身上。

解决方案是创建一个新项目，添加旧项目中的类和所有必要的库。

您是否亲身体验过这种解决方案？我知道这不是最正确的，但如果 consigas 没有其他经验。那么你能知道哪些类有错误吗？

# python - Python：继承类函数（属性获取器）不起作用

> ID：14605134
> 
> 赞同：1
> 
> 时间：2013-01-30T13:24:08.733
> 
> 标签：python, inheritance, properties

考虑以下代码：

```
class BaseClass(object):
    def _del_property(attr):
        """Abstract deller"""
        def del_attr(self):
            setattr(self, attr, None)
        return del_attr

    def _set_property(attr):
        """Abstract setter."""
        def set_attr(self, x):
            setattr(self, attr, x)            
        return set_attr

    def _get_property(attr):
        """Abstract getter"""
        def get_attr(self):
            getattr(self, attr)
        return get_attr

    _name = None
    name = property(fget=_get_property('_name'), fset=_set_property('_name'))

class Component(BaseClass):

    _material = None
    material = property(fget=_get_property('_material'), fset=_set_property('_material'), fdel=_del_property('_material')) 
```

_get_property、_set_property 和 _del_property 怎么不被继承？如何实现？

它应该适用于同一源文件中的派生类，也适用于单独文件中的派生类，后者使用

```
from filename import * 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:29:41.773

创建类时，会创建一个新的命名空间。Python 读取类块中的代码块，然后将信息传递给`type`（或相应的元类）。在这种情况下，python 会抱怨，因为在设置`Component`类时，`_get_property`没有在该范围内定义——也许`BaseClass._get_property`，但这可能也不会像你想要的那样工作。

一个简单的解决方法是使这些函数成为模块级函数，因为类命名空间可以访问模块命名空间：

```
def _del_property(attr):
    """Abstract deller"""
    def del_attr(self):
        setattr(self, attr, None)
    return del_attr

def _set_property(attr):
    """Abstract setter."""
    def set_attr(self, x):
        setattr(self, attr, x)            
    return set_attr

def _get_property(attr):
    """Abstract getter"""
    def get_attr(self):
        getattr(self, attr)
    return get_attr

class BaseClass(object):

    _name = None
    name = property(fget=_get_property('_name'), fset=_set_property('_name'))

class Component(BaseClass):

    _material = None
    material = property(fget=_get_property('_material'), fset=_set_property('_material'), fdel=_del_property('_material')) 
```

在我们创建它的时候查看这个类可能更有启发性：

```
class BaseClass(object):

    def _del_property(attr):
        """Abstract deller"""
        def del_attr(self):
            setattr(self, attr, None)
        return del_attr

    print type(_del_property)
print type(BaseClass._del_property) 
```

这将打印：

```
<type 'function'>
<type 'instancemethod'> 
```

因此，您正在处理内部的常规函数`BaseClass`​​，但它变成了`instancemethod`它`type`的魔法。

* * *

就个人而言，我只想创建一个便利功能：

```
def property_api(name,fget=True,fset=True,fdel=True):
    return property(fget=_get_property(name) if fget else None,
                    fset=_set_property(name) if fset else None,
                    fdel=_del_property(name) if fdel else None) 
```

然后你可以使用它。如果你真的想，你甚至可以把它`BaseClass`作为一个`staticmethod`：

```
 class BaseClass(object):
      property_api = staticmethod(property_api) 
```

然后您的派生类将如下所示：

```
 class DerivedClass(BaseClass):
      _material = None
      material = BaseClass.property_api('_material') 
```

# java - 如何访问按钮的受保护字段？

> ID：14605136
> 
> 赞同：1
> 
> 时间：2013-01-30T13:24:15.057
> 
> 标签：java, android, reflection

我们在 Android 中有设置按钮的 OnClickListener 的方法（button.setOnClickListener(....)，但没有 .getOnClickListener。

我需要将侦听器分配给 Button 并将其保存在变量中。

OnClickListener是Button类的protected字段，继承自TextView，继承自View类。字段名称“mOnClickListener”。即使通过反射我也无法得到它：

```
 ...
    Button button1 = (Button) findViewById(R.id.button1);
    OnClickListener listener = getListener(button1);
    ...

    public OnClickListener getListener(Button b) {

 java.lang.reflect.Field field =  b.getClass().getSuperclass().getSuperclass().getDeclaredField("mOnClickListener");
...
    } 
```

得到“noSuchFieldException”。有什么想法可以使它成为可能吗？

PS我知道其他方法可以让我的应用程序在没有反射的情况下工作，只是想知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:25:34.907

您正在课堂上调用该方法`getClass`。相反，您应该调用类`getClass`的对象`Button`，或使用类字段：

```
Button.class.getSuperClass().getSuperClass().getDeclaredField("mOnClickListener"): 
```

另一种方法：

```
Button.class.getField("mOnClickListener"); 
```

getField 方法包括从超类继承的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:28:31.110

您想让该字段可访问。

所以你基本上会得到类似的东西

```
Field f = obj.getClass().getDeclaredField("mOnClickListener");
f.setAccessible(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:32:47.143

您收到此错误是因为您不是*从*按钮开始的。而是这样做：

```
 java.lang.reflect.Field field =  View.class.getField("mOnClickListener"); 
```

当您拥有该字段时，使其可访问：

```
try{
   field.setAccessible(true);
   Object clickListener = field.get(b);
   field.setAccessible(false);
}catch(Exception e){
    e.printStacktrace();
} 
```

# php - 如何使用 php 在 jQuery mobile 中提交联系表单？

> ID：14605137
> 
> 赞同：0
> 
> 时间：2013-01-30T13:24:18.240
> 
> 标签：php, jquery, mobile, form-submit

我希望有人可以帮助我，我猜是一个容易回答的问题。我的 php 很弱，我无法解决问题。我正在尝试提交一个基本的联系表格，即姓名、地址、电子邮件、电话。和一个文本区域。它内置在 jQuery mobile 中，我不知道是怎么做到的影响 php 脚本。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:13:33.473

您不能使用 php 提交表单，php 是服务器语言。在 jQuery mobile 中，您可以构建您的界面，但服务器端没有改变，您还需要使用 php 或其他服务器语言检查服务器上的表单数据。

# c# - 网络服务优化

> ID：14605151
> 
> 赞同：0
> 
> 时间：2013-01-30T13:25:04.247
> 
> 标签：c#, web-services

我有网络服务项目。因为我有一个“.asmx”文件。在文件中，我有大约 200 多种方法。

那么该怎么做才能优化呢？

可以使用哪种类型的编码结构进行优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:42:29.450

您需要在性能方面进行优化吗？或者就您的代码而言是一团糟？

**首先**，您的业务逻辑是否在方法本身中？如果是这样，这可能会变得一团糟。

我有一个我管理的非常大的网络服务。我已将所有关键行为拆分为支持类，因此 ASMX 文件本身并不笨重。

**其次**考虑将你的 asmx 文件分成几个部分类，它不会提高性能，但它应该使你的系统更易于管理。我猜想有 200 种方法可以分离出一些关键的功能组。

**但是** ，如果性能是您的问题，您需要向我们提供有关您的服务实际执行的更多信息，以便我们提供更多详细信息。

# android - Android：为 C++ 代码创建文本视图

> ID：14605168
> 
> 赞同：0
> 
> 时间：2013-01-30T13:25:44.247
> 
> 标签：android, textview

我正在尝试创建一个 c++ 程序应用程序。那么如何使用多行文本视图在我的 xml 布局中显示 c++ 程序代码，或者有任何其他合适的方法可以做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:42:41.563

您需要使用 NDK：http: [//developer.android.com/tools/sdk/ndk/overview.html](http://developer.android.com/tools/sdk/ndk/overview.html)

> Android NDK 是一个工具集，可让您在 Android 应用程序中嵌入使用本机代码的组件。
> 
> Android 应用程序在 Dalvik 虚拟机中运行。NDK 允许您使用本机代码语言（例如 C 和 C++）来实现部分应用程序。这可以为某些类别的应用程序带来好处，以重用现有代码的形式，在某些情况下提高速度。

# struct - 使用 winpcap 更改数据包的 MAC 地址

> ID：14605186
> 
> 赞同：1
> 
> 时间：2013-01-30T13:26:33.240
> 
> 标签：struct, winpcap

我是 winpcap 和 c++ 的绝对初学者。我想读取转储文件，更改某些数据包的 MAC 地址并删除其他数据包。所以最后，我的文件应该只包含更改的数据包（与以前相同的文件，只是没有“不重要”的数据包）。

我使用 Qt Creator、mingw、c++ 和 winpcap（当然）。

到目前为止有效的方法：从文件中读取，显示我想要的 mac/ip/whatever。什么不起作用：编辑数据包。

我使用一些结构从数据包中读取数据：

```
struct pcap_hdr_s {
public:
uint32_t magic_number;   /* magic number */
uint16_t version_major;  /* major version number */
uint16_t version_minor;  /* minor version number */
int32_t  thiszone;       /* GMT to local correction */
uint32_t sigfigs;        /* accuracy of timestamps */
uint32_t snaplen;        /* max length of captured packets, in octets */
uint32_t network;        /* data link type */
};

struct pcaprec_hdr_s {
public:
uint32_t ts_sec;         /* timestamp seconds */
uint32_t ts_usec;        /* timestamp microseconds */
uint32_t incl_len;       /* number of octets of packet saved in file */
uint32_t orig_len;       /* actual length of packet */
} ;

struct ip_address{
public:
u_char byte1;
u_char byte2;
u_char byte3;
u_char byte4;
};

struct mac_adress{
public:
u_char mac1;
u_char mac2;
u_char mac3;
u_char mac4;
u_char mac5;
u_char mac6;
};

/*Ethernet header*/
struct eth_header{
public:
mac_adress dst_mac;
mac_adress src_mac;
uint16_t type;
};

/* IPv4 header */
struct ip_header{
public:
u_char  ver_ihl;        // Version (4 bits) + Internet header length (4 bits)
u_char  tos;            // Type of service
u_short tlen;           // Total length
u_short identification; // Identification
u_short flags_fo;       // Flags (3 bits) + Fragment offset (13 bits)
u_char  ttl;            // Time to live
u_char  proto;          // Protocol
u_short crc;            // Header checksum
ip_address* saddr;      // Source address
ip_address* daddr;      // Destination address
//u_int   op_pad;         // Option + Padding --> optional
};

/* UDP header*/
struct udp_header{
public:
u_short sport;          // Source port
u_short dport;          // Destination port
u_short len;            // Datagram length
u_short crc;            // Checksum
}; 
```

到目前为止，这是我用于编辑数据包的代码：

```
void changeMAC(QString wantedMac, QString file){
const u_char *pkt_data;
struct pcap_pkthdr *header;
pcap_t *pd;
pcap_dumper_t *pdumper;
eth_header *ethHeader;
ip_header *ipHeader;
int res = 0;
QString check;

pd = pcap_open_dead(DLT_EN10MB, 65535);

/*output file = input file*/
pdumper = pcap_dump_open(pd, qPrintable(file));

while((res = pcap_next_ex(pd, &header, &pkt_data)) >= 0){//iterate through the packets in the file
    ipHeader = (ip_header *)(pkt_data + 14);
    if(ipHeader->proto == 17){ //I only have a look at udp
        ethHeader = (eth_header *)(pkt_data); //check if this is the MAC I want to cahnge

        check.clear();
        check.append(ethHeader->dst_mac.mac1);
        check.append(ethHeader->dst_mac.mac2);
        check.append(ethHeader->dst_mac.mac3);
        check.append(ethHeader->dst_mac.mac4);
        check.append(ethHeader->dst_mac.mac5);
        check.append(ethHeader->dst_mac.mac6);//'check' contains the current MAC of the packet

        if(wantedMac.contains(check.toAscii().toHex())){ //if 'check' contains the MAC I was looking for
            /*
            * Create fake IP header and put UDP header
            * and payload in place
            * --> how to do this for all wanted packets?
            */

            pcap_dump((u_char *)pdumper, header, pkt_data); //write changed packet to file
         }
         else{
         //delete the packet --> how?
         }
    }
}
pcap_close(pd);
pcap_dump_close(pdumper);
} 
```

我看过[这个](https://stackoverflow.com/questions/7309773/c-writing-structs-to-a-file-pcap)，它有帮助，但到目前为止。到目前为止，我的代码就是我所拥有的。

**编辑**：作为第一步，如果我能够将编辑的数据包保存在第二个文件中，而不是数据包来自的文件中，我也会很高兴。但是如何编辑它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:43:47.827

好吧，我自己想出了一些东西。它可能不是最优雅的解决方案，但它确实有效。

```
QString string;
QStringList mac;
int result=0;
bool ok;
QChar d

string=mac[0];//first part of mac address to string

for(int i=0; i<string.length();i++){//string to ascii hex and int
    d=string.toUInt(&ok,16);
    result=d.unicode();
}

ethHeader->dst_mac.macPart1=result;//allocate, go on for next part of macaddress 
```

# javascript - 全局变量不可测试

> ID：14605191
> 
> 赞同：0
> 
> 时间：2013-01-30T13:26:45.933
> 
> 标签：javascript, web-testing, canoo

我无法通过测试，因为 canoo 不支持外部 js 文件中的全局变量。

索引.html：

```
<html>
   <head>
      <script src="index.js"></script>
   </head>
   <body>
      <button onclick="alert(a+1);">asldkf</button>

   </body>
</html> 
```

index.js

```
var a=1; 
```

CanooWebtest 抛出：

```
JavaScript error loading page 
http://localhost:8080/index.html: 
  ReferenceError: "a" is not defined. (JavaScriptStringJob#1) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:38:53.383

您总是可以欺骗它并将其添加到全局对象之一 - 窗口，文档......不是一个好的解决方案，但应该可以工作。

```
<script>
    window.a = 1;
</script> 
```

# c# - 在 MDI 子窗体工具提示中未显示

> ID：14605203
> 
> 赞同：1
> 
> 时间：2013-01-30T13:27:45.257
> 
> 标签：c#, winforms, tooltip, mdi, mdichild

我正在开发一个桌面窗口应用程序，它有多个窗口窗体。

该应用程序的初始版本是一个表单将被另一个表单调用。

但是由于打开了这些多个表单，我创建了一个父表单并将其设置为 MDI 容器，并将所有其他表单设为它的子表单并显示在父表单中。但是之前正确显示的工具提示（当一个表单从另一个表单调用时）现在没有显示。

在`Form1`我使用这个：

```
Form2 obj=new Form2();
obj.MdiParent=this;
obj.show(); 
```

这将显示MDIContainer`Form2`在`Form1`哪里。`Form1`

Form1（MDI Container）中的工具提示显示正确，但Form2（MDI Child）中的工具提示不显示。

如果有人知道这个问题的解决方案，请帮忙，我真的陷入了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:01:11.240

当我将 MDI Container 中的控件移动到显示子窗体的区域时，上述问题为我解决了。

# java - 用于在 java 桌面应用程序中存储字符串的本地数据库，目前使用 MongoDB

> ID：14605204
> 
> 赞同：2
> 
> 时间：2013-01-30T13:27:51.450
> 
> 标签：java, mongodb, sqlite, database

我目前正在做一个项目，我在其中存储程序/应用程序窗口标题的名称，而我对数据库和数据存储的了解相当有限。

这个想法是我想用一个字符串查询数据库，看看它是否存在于数据库中。我目前正在使用 MongoDB 来执行此操作，但我看到 MongoDB 主要用于在不是我想要的服务器上运行。

我的问题是 - 如果我只是存储字符串/搜索字符串，自定义 Array 或 HashMap 是否就足够了，或者搜索时间会使其效率低下，这意味着 SQLite 更适合这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:30:30.757

SQLite 非常适合这个应用程序。例如，Firefox 使用 SQLite 存储其内部配置设置（`about:config`页面）。SQLite 数据库是单个文件，它对用户是透明的，并且需要很少的系统资源——与大多数服务器/客户端数据库解决方案不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:41:52.387

我建议使用 java 首选项 api，如果要保存的数据不是太多，并且即使应用程序终止并重新启动它也需要可用。，

# c# - gridview ASP.Net 中的分页不起作用

> ID：14605207
> 
> 赞同：0
> 
> 时间：2013-01-30T13:27:59.390
> 
> 标签：c#, asp.net, paging, page-index-changed

我有一个带有 C# 的 ASPX 应用程序。在一个页面中，我有一个带有分页的 gridview（我添加了 allowpaging="true"，PageSize="2"）。在 aspx 文件中：

```
 <table>
    <tr>
        <td>
            <asp:GridView ID="grdClientList" runat="server" OnRowCreated="grdClientList_RowCreated"
                OnRowDataBound="grdClientList_RowDataBound" AutoGenerateColumns="False" 
                DataSourceID="ODSClientList" DataKeyNames="ID"
                AllowPaging="true" AllowSorting="true" PageSize="2"
                OnPageIndexChanging="grdClientList_PageIndexChanging">
                <Columns>
                    <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID" 
                        ItemStyle-CssClass="hidden"  HeaderStyle-CssClass="hidden" />
                    <asp:BoundField DataField="Name" HeaderText="<%$Resources:HRWebApplicationResources,ClientsList_ColName %>" SortExpression="Name" 
                         ControlStyle-Width="150px" ItemStyle-Width="150px"/>
                    <asp:BoundField DataField="Address" HeaderText="<%$Resources:HRWebApplicationResources,ClientsList_ColAddress %>" SortExpression="Address" 
                        ControlStyle-Width="280px" ItemStyle-Width="280px"/>
                    <asp:BoundField DataField="Contact" HeaderText="<%$Resources:HRWebApplicationResources,ClientsList_ColContact %>" SortExpression="Contact"
                         ControlStyle-Width="100px" ItemStyle-Width="100px"  />
                    <asp:BoundField DataField="Telephone" HeaderText="<%$Resources:HRWebApplicationResources,ClientsList_ColTelephone %>" SortExpression="Telephone" 
                         ControlStyle-Width="100px" ItemStyle-Width="100px" />
                    <asp:BoundField DataField="Email" HeaderText="<%$Resources:HRWebApplicationResources,ClientsList_ColEmail %>" SortExpression="Email" 
                        ControlStyle-Width="130px" ItemStyle-Width="130px" />
                    <asp:HyperLinkField 
                          HeaderText="<%$Resources:HRWebApplicationResources,AllPages_Actions%>" ShowHeader="True" Text="Edit"
                          DataNavigateUrlFormatString="~/Client/ClientDetail.aspx?Id={0}" 
                          DataNavigateUrlFields="ID" ControlStyle-Width="70px" ItemStyle-Width="70px"/>
                </Columns>
            </asp:GridView>
        </td>
    </tr>
</table>

 <asp:ObjectDataSource ID="ODSClientList" runat="server" OldValuesParameterFormatString="{0}"
    SelectMethod="GetAllClientsByFilter" TypeName="HRWebApplication.AppCode.ManageList">
    <SelectParameters>
       <asp:ControlParameter ControlID="txtSearchName" Name="p_strName" PropertyName="Text" Type="String" />
       <asp:ControlParameter ControlID="txtSearchAddress" Name="p_strAddress" PropertyName="Text" Type="String" />
       <asp:ControlParameter ControlID="txtSearchContact" Name="p_strContact" PropertyName="Text" Type="String" />
       <asp:ControlParameter ControlID="txtSearchTelephone" Name="p_strTelephone" PropertyName="Text" Type="String" />
       <asp:ControlParameter ControlID="txtSearchEmail" Name="p_strEmail" PropertyName="Text" Type="String" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

在cs文件中：

```
 protected void grdClientList_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        grdClientList.PageIndex = e.NewPageIndex;
        grdClientList.DataBind();
    } 
```

当我单击第二个、第三个等页面时，我的应用程序没有执行任何操作。没有进入“grdClientList_PageIndexChanging”事件。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:55:32.827

也许尝试 PageIndexChanged 而不是 PageIndexChanging？

# serial-port - 串口 zigbee 通信 - 一些错误的字符

> ID：14605208
> 
> 赞同：0
> 
> 时间：2013-01-30T13:27:58.783
> 
> 标签：serial-port, zigbee, termios

我在ubuntu中的串行通信遇到了一些问题。我正在编写 C++ 代码以连接到我的 zigbee 节点，但问题不在于 zigbee 配置。由于 GTKTERM（ubuntu 的普通串行终端）正确读取数据。

我的串行连接的配置很简单：

8N1 9600 波特无 CTSRTS，无软件流控制。我的设置中一定有一些小错误，因为大多数字符都是正确的，但有些是错误的：91 变成了 11（10010001 -> 00010001，所以只有 1 位）。

这是设置连接的代码：

```
int fd = open(adres , O_RDWR | O_NOCTTY | O_NDELAY);

struct termios options;
tcgetattr(fd, &options);
cfsetispeed(&options, B9600);
options.c_cflag |= (CLOCAL | CREAD);
// no parity 8N1
options.c_cflag &= ~PARENB;
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;

tcsetattr(fd, TCSANOW, &options); 
```

我还注意到，当您更改这些配置并更改程序并再次运行它时，这些配置未设置为默认值。因此，除非您更改它们，否则它们在程序的独立执行之间将是相同的。也许有人有一个所有默认值的列表，所以我总是可以在启动时恢复默认值。（我有第二个程序使用 fopen() 从串行通信流中读取数据，并且该程序仅在我第一次运行此代码以设置正确的配置时才“工作”）

知道这里出了什么问题吗？我读过这个：[http](http://www.easysw.com/~mike/serial/serial.html) ://www.easysw.com/~mike/serial/serial.html 但无法弄清楚。

我也尝试过的标志如下：

```
options.c_cflag |= CRTSCTS;   // hardware flow control
options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); //raw input mode
options.c_oflag &= ~OPOST;                  // raw output mode
options.c_iflag |= (INPCK | ISTRIP);    // parity check
options.c_iflag &= ~(IXON | IXOFF | IXANY); //disable flow control 
```

没有好的结果。如果您想了解更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:19:33.360

如果您使用的是 XBee 模块，您可能想查看 Digi 发布的这个[ANSI C XBee 主机库](https://github.com/digidotcom/xbee_ansic_library)，该库作为开放源代码发布，用于与他们的 XBee 硬件通信。即使您不使用 XBee，您也可以重新使用他们的串行库——它们支持 POSIX、Win32 甚至 DOS（仅限 COM1）。

# scroll - LongListMultiSelector 的滚动管理

> ID：14605215
> 
> 赞同：1
> 
> 时间：2013-01-30T13:28:22.197
> 
> 标签：scroll, windows-phone-8, windows-phone

在我使用的 WP8 应用程序`LongListMultiSelector`中，我想在应用程序关闭或墓碑时保存它的滚动位置，然后在再次打开应用程序时恢复它。当应用程序处于活动状态时，我还需要以编程方式将其滚动到指定的项目或指定的动画位置。

问题是，到目前为止，我找不到任何方法`LongListMultiSelector`可以让我在有或没有动画的情况下将其滚动到指定的项目或位置。我也找不到允许我获取所有当前项目列表的方法，以便我可以选择滚动到哪个项目。

滚动不可能是无法控制的，`LongListMultiSelector`所以我想就如何使用此滚动功能获得您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:40:51.167

LongListSelector 是一种“智能”控件。这意味着它具有非常复杂的行为，但是如果您需要更改它-最好不要...

你有两个选择：

1.  在 LongListMultiSelector 的内容之上编写您自己的行为。它包含原语：ScrollBox 控件。
2.  使用标准 LongListSelector 并实现本机 ScrollTo 方法和您自己的多选。多选是一项简单的任务，ScrollTo 非常棘手，因为您基本上不能滚动到位置，只能滚动到项目。

# php - $.post，单选按钮值，jquery

> ID：14605220
> 
> 赞同：1
> 
> 时间：2013-01-30T13:28:37.237
> 
> 标签：php, javascript, jquery

我无法使用 $.post 传递单选按钮值，谁能帮我找出问题？

我得到了未定义的索引：性别

```
<?php
    $gender = $_POST['gender'];    
    if (!$gender) {
        echo $gender;
    }    
?>

<script type="text/javascript">
    function get(){
        $('#error').hide();

        $.post(
            'signup.php', 
            { gender:signup.gender.value },
            function(output){
                $('#error').html(output).fadeIn(100);
            }
        )       
    }
</script>

<form name="signup">
    <input class="radio" type="radio" name="gender" value="male"/> Male<br/>
    <input class="radio" type="radio" name="gender" value="female"/> Female
    <input type="button" value="submit" onclick="get();" />
</form>

<div id="error"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:31:46.797

尝试更改此行：

```
{ gender: signup.gender.value } 
```

对此：

```
{ gender: $('.radio').val() } 
```

如果您希望将其保留为 vanilla javascript，则需要显式使用该`forms`集合：

```
{ gender: document.forms['signup'].gender.value } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:27:43.503

i just found the answer

```
$('input:radio[name=gender]:checked').val() 
```

thanks for everyone's help!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:33:06.120

您可以对表单使用 jquery 序列化：

```
//Form data:
var aData = $('#formID').serializeArray();
//Create param string:
var sSend = $.param(aData);
//Call ajax:
$.post('signup.php', sSend, function(sData){
   ...
}); 
```

或值：

```
$('input[name=gender]:checked').val(); 
```

在你的 php 中更好：

```
$gender = isset($_POST['gender']) ? $_POST['gender'] : ''; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:37:21.793

尝试这个...

```
{ gender: $('.radio [name="gender"]').val() } 
```

问候。

# ios - UIPickerView 以编程方式选择第一行

> ID：14605222
> 
> 赞同：15
> 
> 时间：2013-01-30T13:28:42.853
> 
> 标签：ios, xcode, uipickerview

有很多这样的问题，但我相信我的情况是独一无二的。

我有一个在内部单击文本框时弹出的选择器视图。用户在选择器视图中选择他们的位置，并将其放入文本框中。

打开pickerview时，滑块位于第一个元素上，但是如果我单击完成按钮以最小化pickerview，则没有选择任何元素（即您必须向下滚动并返回才能选择第一个元素）

我试过了

```
 [pickerView selectRow:0 inComponent:0 animated:YES]; 
```

以及它的各种组合，但它只将滑块放在该元素上，同样没有实际选择它。

一些答案说在 viewDidLoad() 方法中应用上述代码，但不幸的是我从 Web 服务中提取位置数组并且不能这样做。

理想情况下，我想工作 - 用户在文本框中单击，pickerview 正常弹出，如果此时单击完成按钮，则选择第一个项目。

先感谢您

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-10-03T18:51:41.627

**斯威夫特 3+**

```
func textFieldDidBeginEditing(_ textField: UITextField) {
    if textField == yourTextField{
        self.yourPickerView.selectRow(0, inComponent: 0, animated: true)
        self.pickerView(yourPickerView, didSelectRow: 0, inComponent: 0)
    }
}

func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int) {

//Do all the stuff to populate the TextField

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T13:42:26.850

您可以尝试以下方法：

在你的 var 中设置一个 var `@interface`，比如`NSString *selectedString;`.

当您初始化`UIPickerView`(in `pickerView:titleForRow:forComponent:`) 时，当您为第 0 行设置标题时，`selectedString`使用与第 0 行标题相同的字符串进行设置。然后，在 中`pickerView:didSelectRow:inComponent:`，`selectedString`使用适当的字符串进行设置：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    // Some stuff

    // Assuming "yourDataArray" contains your strings
    selectedString = [yourDataArray objectAtIndex:row];

} 
```

然后，当您调用由按下“完成”按钮触发的方法时，使用`selectedString`设置文本。

希望这对你有用！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-04T15:35:56.173

我有同样的问题。我的解决方案是这样的：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    // Only for the text field with the picker
    if (textField == self.yourTextField)
    {
        // Select the first row programmatically 
        [self.categoriesPicker selectRow:0 inComponent:0 animated:YES];
        // The delegate method isn't called if the row is selected programmatically
        [self pickerView:self.categoriesPicker didSelectRow:0 inComponent:0];
    }

}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    //Do all the stuff to populate the TextField

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-03T11:55:31.657

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    // Only for the text field with the picker
    if (textField == self.yourTextField && [textField length]!=0)
    {
        // Select the first row programmatically 
        [self.categoriesPicker selectRow:0 inComponent:0 animated:YES];
        // The delegate method isn't called if the row is selected programmatically
        [self pickerView:self.categoriesPicker didSelectRow:0 inComponent:0];
    }

}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    //Do all the stuff to populate the TextField
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T20:41:14.090

/*为带有事件编辑的文本字段创建一个 IBACTION 确实开始了，该函数应该像这样检查字段是否为空*/

```
-(IBAction)asignFirst:(UITextField *)sender{
if ([sender.text isEqualToString:@""])
{
    [yourPicker selectRow:0 inComponent:0 animated:YES]; 
    sender.text = self.pickerData[0];
   }
} 
```

# xml - 从R中的XML Geoplot多个地址

> ID：14605223
> 
> 赞同：0
> 
> 时间：2013-01-30T13:28:46.817
> 
> 标签：xml, r, geocoding

我正在尝试累积地址，以便在 R 中的地图上绘制它们。我手动获取地址并将它们输入到 .csv 中以导入 R。.csv 的格式如下：

> 街道号码 | 街道| 城市| 状态
> 
> 1150 | FM 1960 西路 | 休斯顿 | 德克萨斯州
> 
> 701 | 凯勒大道 | 凯勒 | 德克萨斯州

每个标题（街道编号、街道、城市和州）都是一个唯一的列，下面的数据被分成各自的列。

我让 R 从 .csv 中读取信息，并将其转换为与 Google Maps API 一起使用的正确格式。我让 API 生成一个 .xml 文件，其中包含与输入的地址对应的信息。一个最小的工作示例如下：

```
streetnumber1<-paste(data$streetnumber,sep="")
street1<-gsub(" ","+",data$street)
street2<-paste(street1,sep="")
city1<-paste(data$city,sep="")
state1<-paste(data$state,sep="")

url<-paste("http://maps.googleapis.com/maps/api/geocode/xml?address="
,streetnumber1,"+",street2,",+",city1,",+",state1,"&sensor=false",sep="") 
```

调用`url`会生成两个 Web 地址，可以将其输入 Web 浏览器以导航到 Google Maps API 提供的 .xml 数据。

我希望 .csv 文件中的所有地址都发生这种情况，而无需声明应该生成多少次 url。我觉得这是一个`apply`功能的工作，但我不确定如何去做。一旦我自动化了 R 和 API 之间的交互，我想解析获得的 .xml 以便我可以提取我正在寻找的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:19:58.867

这个[`ggmap`](http://cran.r-project.org/web/packages/ggmap/ggmap.pdf)包有一个`geocode`我强烈推荐使用的功能，而不是在这里重新发明轮子。

编辑：既然您说“多个地址”，您可能更喜欢[我的版本](https://github.com/gsk3/taRifx.geo/blob/master/R/Contributed.R#L4)，它具有`data.frame`内置用于批量地理编码的方法和一些稳健性检查，并允许使用 Bing Maps API（每天限制 25K 而不是每天 2.5K谷歌地图）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:44:49.923

从这个问题中我不清楚你到底想从谷歌那里得到什么。我**猜**是纬度和经度。如果是，请尝试屏幕截图后面的代码。编辑：根据 Ari B. Friedman 的评论，修改为包括使用包中的`geocode`函数的替代（和更简单）方法。`ggmap`

![截屏](../Images/768419784110e71a22682b955a2e1702.png)

```
# Read in the text from your example
mydf <- read.csv(con <- textConnection(
    "streetnumber|street|city|state
    1150|FM 1960 West Road|Houston|TX
    701|Keller Parkway|Keller|TX"), header = TRUE, sep = "|", check.names = FALSE)

# APPROACH 1 - works but Approach 2 probably better (see below)
# Create a new column for the URL to pass to Google API
mydf$url <- with(mydf, paste("http://maps.googleapis.com/maps/api/geocode/xml?address=",
                             streetnumber,
                             gsub(" ", "+", street),
                             city, "+",
                             state, "+",
                             "&sensor=false",
                             sep = ""))

# Check to see what we have in the data frame
str(mydf)

library(XML)
latlon <- lapply(mydf$url, function(x) { # process each element in the column 'url'
       myxml <- xmlTreeParse(x, useInternal = TRUE) # pass the element (an URL) to the XML function
       # parse the result
       lat = xpathApply(myxml, '/GeocodeResponse/result/geometry/location/lat', xmlValue)[[1]]
       lon = xpathApply(myxml, '/GeocodeResponse/result/geometry/location/lng', xmlValue)[[1]]
       data.frame(lat = lat, lon = lon) # return the latitude and longitude as a data frame
   })

# We end up with a list of data frames, so merge the data frames into one:
library(reshape)
latlon <- merge_all(latlon)

# Then bolt the columns on to your existing data frame
mydf <- cbind(mydf, latlon, stringsAsFactors = FALSE)

# We want the latitude and longitude to numbers, not characters
mydf$lat <- as.numeric(mydf$lat)
mydf$lon <- as.numeric(mydf$lon)

require(ggmap)

# APPROACH 2 - let ggmap do the heavy lifting (and 
# comment out Approach 1 if you use this)

mydf$location <- with(mydf, paste(streetnumber,street, city, state,sep = ", "))

latlon <- geocode(mydf$location)
mydf <- cbind(mydf, latlon, stringsAsFactors = FALSE)

# Now plot.
# Be careful when specifying the zoom argument, because larger values can cause
# points to be dropped by geom_point()
ggmap(get_googlemap(maptype = 'roadmap', zoom = 6, scale = 2), extent = 'panel') +
       geom_point(data = mydf, aes(x = lon, y = lat), fill = "red", colour = "black",
                  size = 3, shape = 21) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:01:14.597

当你使用 google Mpas API 时，最好使用他的 JSON API。XML 它不像 JSON 那样轻量级。

为了连续性，我稍微修改了您的原始代码并使用`RJSONIO`package.json 。

```
## I read your data
dat <- read.table(text = '
streetnumber | street | city | state
1150 | FM 1960 West Road | Houston | TX
701 | Keller Parkway | Keller | TX',header= T, sep = '|')

library(RJSONIO)
## here the use of json in placee of xml
## the static part of the url request
url.base <- "http://maps.googleapis.com/maps/api/geocode/json?address="

## I create a data.frame with your formatted data
dat2 <- data.frame(
  streetnumber1 = paste(dat$streetnumber,sep=""),
  street2 = paste(gsub(" ","+",dat$street),sep=""),
  city1 = paste(dat$city,sep=""),
  state1 = paste(dat$state,sep=""))

## I use apply here to call it for each row
apply(dat2,1, function(x){
  url<-paste(url.base,x[1],"+",x[2],
             ",+",x[3],",+",x[4],"&sensor=false",sep="")
  res <- fromJSON(url)    ## single statement 
  ## e. to get lat/long
  lat.long <- res$results[[1]]$geometry$bounds$northeast
}) 
```

`res`这里只是一个列表。您可以轻松地对其进行细分和解析。

# database - 我可以在两个或多个子表之间共享父表的主键作为外键吗？

> ID：14605226
> 
> 赞同：1
> 
> 时间：2013-01-30T13:28:53.683
> 
> 标签：database, foreign-keys, primary-key, erd

我有一个名为 tv_shows 的数据库，其结构如下：

```
tv_shows(tv_show_id, tv_show_title, tv_show_desc, network, status)

seasons(season_id, tv_show_id, season_no, season desc)

episodes(episode_id, tv_show_id, season_id, episode_title, episode_desc, episode_ref, air_date) 
```

一个电视节目可以有很多季和集
一个季可以有很多集
一个集可以只属于一个电视节目和一个季。

我需要知道的是如何在**ERD**上表示这一点，因为它在季节表和剧集表中都`tv_shows(tv_show_id)`显示为**外键。**

*tv_show 的主键 (tv_show_id) 在两个*子表之间共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:42:08.853

一个表被多个其他表引用没有问题。从这个角度来看，你的设计是可以的。

你可能会争辩说`tv_show_id`in`episodes`是多余的。您可以使用`season_id`only 来引用该`seasons`表，并从中派生 the `tv_show_id`。还有一个隐藏的约束；您希望`tv_show_id`存储的内容与给定的存储内容`episodes`相同。如果您不存储in ，那么当然不会发生这种不匹配。`tv_show_id``seasons``season_id``tv_show_id``episodes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:42:36.080

是的，你*可以*——虽然不清楚你是否*应该这样*做。

如果一集恰好属于一个季节 - 即你不能有一个没有季节的一集 - 不需要在剧集中包含“show_id”，因为这隐含在与季节的关系中。这是重复的，并且可能导致虚假数据 - 有人可能会插入一个与节目栏无关的季节的剧集。

然而，在现实世界中，并非所有剧集都与一个季节相关联——例如，存在“一次性”。如果您想对其进行建模，您可以在剧集表中包含 show_id。但是，这会导致逻辑有点尴尬 - 您的查询必须了解“节目”和“剧集”之间存在两种类型的关系。对于这些情况，最好包含一个称为“无情节”的情节，或者其他什么，这样所有的关系都清晰统一。

或者，您可以有一个与季节相关的名为“episode”的表，以及一个名为“one-off”的类似表。

如您所见，在 SQL 中处理继承式关系没有很好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:23:22.147

这完全取决于您使用的是**代理键**还是**复合键**。

如果您的主键都是无意义的整数，由 auto_num/identity/sequence 分配，则无需将父键向下传播给孙子。

但是，如果 的主键`seasons`是 的*组合*，那么出现在表 `tv_show_id`中是有意义的。`season_no``tv_show_id``episodes`

这也取决于您如何定义外键约束。最好定义一个清晰的层次结构，如下所示：

电视节目 -|-----< 季节 -|----< 剧集

这清楚地表明，即使其中`episodes`有一个`tv_show_id`，你也应该经过`seasons`才能到达那里。在实践中，您始终可以直接进行连接，但从参照完整性的角度来看，您不必担心同时指向节目 A 的剧集和节目 B 的季节。

# git - Git合并分支到master

> ID：14605231
> 
> 赞同：54
> 
> 时间：2013-01-30T13:29:12.337
> 
> 标签：git, git-branch, git-merge

我有一个 master 分支和一个 working `branch_1`. 我想`branch_1`完全按原样“移动” `master`。所以我想要这样的东西：

```
git checkout master
git merge branch_1 # I don't know what is correct... 
```

我做过的事情，但我得到了大量的文件，因为烦人的冲突搞砸了。所以现在 master 包含完全相同的文件，`branch_1`避免任何冲突，只是覆盖文件。有什么帮助吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-30T13:33:22.690

如果两个分支都对文件进行了更改，就会发生冲突。这是一件好事。 **使您的分支彼此保持最新将阻止其中一些分支** 。但总的来说，冲突并不坏。rebase 选项还可以防止其中许多情况发生。

```
git merge branch_1 
```

如果您在`master`，合并将按您的预期带来更改。

[http://www.kernel.org/pub/software/scm/git/docs/git-merge.html](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

你也可以

```
git rebase branch_1 
```

这将在`branch_1`没有合并提交的情况下获取更改并将它们附加到 master。

[http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:59:32.543

也许你不应该合并？

1.  结帐 branch_1
2.  将 master 更改重新设置为 branch_1
3.  修复测试代码后可能发生的任何错误
4.  结帐大师
5.  将 branch_1 更改为 master

或在代码中：

```
git checkout branch_1
git rebase master
(...)
git checkout master
git rebase branch_1 
```

如果你想让你的变更集更密集，这也让你有机会将多个提交压缩为一个，并防止这些烦人的合并提交出现在你的历史记录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-06T03:24:11.537

我从[thenetninja youtube](https://youtu.be/XX-Kct0PfFc)频道获取了这段代码，它对我有用。

# 在非主分支上

```
 git add .
  git commit -m "msg"
  git checkout master 
```

# 在主分支上

```
 git merge <non master branch name>
  # fix any conflicts and try to run the software to test any error
  git add .
  # commit w/o any msg, as follows
  git commit
  git push -u origin master 
```

# java - Jersey - 在运行时设置 REST 响应编码

> ID：14605232
> 
> 赞同：1
> 
> 时间：2013-01-30T13:29:13.350
> 
> 标签：java, rest, encoding, jersey

我想知道是否可以使用 Jersey API 在运行时设置响应字符集。

如果我这样设置：

```
public class MyRESTClass
{
   private static final String encoding  = "UTF-8";

   @GET
   @Produces(MediaType.APPLICATION_JSON + ";charset=" + enconding)
   public String Call(@Context final HttpServletRequest servletReq, @QueryParam("somePar") String somePar)
   {
      ...
   }
} 
```

...没关系

但是，如果我尝试像这样设置它：

```
public class MyRESTClass
{
   private static final String encoding  = getEncoding();

   public static final String getEncoding()
   {
      final String encoding = "UTF-8";
      return encoding;
   }

   @GET
   @Produces(MediaType.APPLICATION_JSON + ";charset=" + enconding)
   public String Call(@Context final HttpServletRequest servletReq, @QueryParam("somePar") String somePar)
   {
      ...
   }
} 
```

我得到编译错误：

> 注释属性 Produces.value 的值必须是常量表达式

我需要这个，所以我可以使用配置文件设置我的应用程序的 REST 编码。

还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T09:31:56.093

我认为做到这一点的方法是扩展 Jersey's`ResourceConfig`并进行程序化资源配置。

```
String encoding = Config.get("encoding"); // get encoding from config file
String mediaType = MediaType.APPLICATION_JSON + ";charset=" + encoding;
final Resource.Builder getRes = Resource.builder().path("resourcePath");

final ResourceMethod.Builder get = getRes.addMethod("GET");
get.produces(mediaType).handledBy(new Inflector<ContainerRequestContext, String>() {
    public final String apply(ContainerRequestContext ctx) {
       // implement that Call method here
    }
});
registerResources(getRes.build()); 
```

`web.xml`然后你应该通过为你的 Jersey servlet 设置一个 initParameter 来注册你的自定义资源：

```
<filter>
    <filter-name>MyApplication</servlet-name>
    <filter-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>org.foo.MyApplication</param-value>
    </init-param>
<filter> 
```

*请参阅：[https ://jersey.java.net/documentation/latest/user-guide.html](https://jersey.java.net/documentation/latest/user-guide.html)*

# jquery - jQuery：我需要一个自定义 hide() 来切换菜单

> ID：14605236
> 
> 赞同：3
> 
> 时间：2013-01-30T13:29:31.100
> 
> 标签：jquery

我有一个带有 jquery click() 函数和 toggle() 的简单菜单/子菜单。我的问题是，toggle() 工作正常，但是当例如#submenu1 打开时，我单击“菜单 2”，#submenu1 当然仍然可见，并且两个子菜单重叠。所以我需要一个 hide() 子菜单，但我没有得到它的工作！我尝试了 not()、siblings() 没有成功。任何帮助表示赞赏！提前致谢。

jQuery：

```
$('#menu li').click(function() {
$('div', this).stop(true, true).animate({ 'height': 'toggle' }, 300);
 }); 
```

HTML：

```
<ul id="menu">
   <li><a href="#">Menu 1</a>
       <div id="submenu1">
           <ul>
              <li>Submenu 1</li>
           </ul>
       </div>
   </li>
   <li><a href="#">Menu 2</a>
       <div id="submenu2">
           <ul>
              <li>Submenu 2</li>
           </ul>
       </div>
   </li>
</ul> 
```

CSS：

```
#submenu1, #submenu2 {
z-index: 99;
position: absolute;
background: #6fb700;
display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:12:31.703

试试：http: [//jsfiddle.net/D9pq8/](http://jsfiddle.net/D9pq8/)

```
$('#menu li').click(function () {
   $(this).siblings().children('div').hide();
   $('div', this).stop(true, true).animate({ 'height': 'toggle' }, 300);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:33:33.050

试试这个

**编辑以缩短版本**

```
$("#menu li").click(function() {
    if($('div' , this).css('display') != 'block')
            $("#menu li div.active").hide().removeClass('active');

      $('div', this).addClass('active').stop(true, true).animate({ 'height': 'toggle' }, 300);  
}); 
```

[小提琴示例](http://jsfiddle.net/axKrJ/1/)

[这是您的菲德尔示例](http://jsfiddle.net/eLPCF/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:47:19.463

尝试使用 jquery 选项卡执行此操作。垂直模式下的主菜单和默认模式下的子菜单 EX：[选项卡 UI](http://jqueryui.com/tabs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:51:53.027

扩展@silagy 发布的内容：

```
 $('#menu li').click(function() {
     $("#menu li div.active").hide().removeClass('active');
    $('div', this).addClass('active').stop(true, true).animate({ 'height': 'toggle' }, 300);
}); 
```

这只是添加了一个“活动”类，因此没有双重动画菜单项。

# xml - 具有嵌套和可重复节点的 XML 到 CSV

> ID：14605242
> 
> 赞同：0
> 
> 时间：2013-01-30T13:29:48.380
> 
> 标签：xml, xslt, xslt-1.0

我正在使用都柏林核心编码的元数据文件，我想将其转换为 CSV。我试图得到下面的输出

`identifier1|||identifier2|||identifier3|||identifier4,datestamp1|||datestamp2|||2010-04-27T01:10:31Z,setspec1,title1|||title2,subject1|||subject2,baseURL|||xxxxx|||xxxxx`

请注意，可重复元素由三个竖线符号 (|||) 分隔，而元素由逗号 (,) 分隔。

我已经设法获得了下面的样式表，但是，我正在努力解决以下问题

(1) 如何定义一个通用模板以使我能够用逗号分隔节点？

```
<xsl:template match="GENERIC MATCH">
  <xsl:apply-templates select="current()" />
  <xsl:if test="position() = last()">,</xsl:if>
</xsl:template> 
```

以`Input File`下面为例，我基本上希望 GENERIC MATCH 能够让我动态处理`level 2`节点（标题、元数据和 about）并用逗号分隔结果。

(2) 如何确定元素是否是最后一个子节点，以便有条件地在后面包含逗号？

```
<xsl:output method="text" omit-xml-declaration="yes"/>

<xsl:template match="/">
  <xsl:apply-templates select="record" />
</xsl:template>
<xsl:template match="record">
  <xsl:apply-templates select="//metadata/oai_dc:dc/dc:title|//metadata/oai_dc:dc/dc:subject" />
  <xsl:if test="not(metadata/oai_dc:dc/node()/position()=last())">#####</xsl:if>
</xsl:template>

<xsl:template match="dc:title">
  <xsl:value-of select="." />
  <xsl:if test="not(position() = last())">||</xsl:if>
</xsl:template>

<xsl:template match="dc:subject">
  <xsl:value-of select="." />
  <xsl:if test="not(position() = last())">||</xsl:if>
</xsl:template> 
```

输入文件

```
<?xml version="1.0"?>
<record>
  <header>
    <identifier>identifier1</identifier>
    <datestamp>datastamp1</datestamp>
    <setSpec>setspec1</setSpec>
  </header>
  <metadata>
    <oai_dc:dc>
      <dc:title>title1</dc:title>
      <dc:title>title2</dc:title>
      <dc:creator>creator1</dc:creator>
      <dc:subject>subject1</dc:subject>
      <dc:subject>subject2</dc:subject>
    </oai_dc:dc>
  </metadata>
  <about>
    <provenance>
      <originDescription altered="false" harvestDate="2011-08-11T03:47:51Z">
        <baseURL>baseURL1</baseURL>
        <identifier>identifier3</identifier>
        <datestamp>datestamp2</datestamp>
        <metadataNamespace>xxxxx</metadataNamespace>
        <originDescription altered="false" harvestDate="2010-10-10T06:15:53Z">
          <baseURL>xxxxx</baseURL>
          <identifier>identifier4</identifier>
          <datestamp>2010-04-27T01:10:31Z</datestamp>
          <metadataNamespace>xxxxx</metadataNamespace>
        </originDescription>
      </originDescription>
    </provenance>
  </about>
</record> 
```

我正在`xslt 1.0`使用`xsltproc`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:55:50.107

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes" omit-xml-declaration="yes"/>
  <!-- A key on all leaf nodes -->
  <!-- *[not(*)] matches any element that is a leaf node
       i.e. it has no child elements. Here, the elements' names are being
       used as the key value. -->
  <xsl:key name="kNodeType" match="*[not(*)]" use="local-name()"/>

  <xsl:template match="/">
    <!-- Use Muenchian grouping to apply the "group" template to the first of
         each leaf node with a distinct name. -->
    <xsl:apply-templates
      select="//*[not(*)][generate-id() = 
                          generate-id(key('kNodeType', local-name())[1])]"
      mode="group" />
  </xsl:template>

  <!-- This template will be used to match only the first item in each group,
       due to the grouping expression used in the previous template. -->
  <xsl:template match="*" mode="group">
    <!-- Skip the comma for the first group, output it for all others -->
    <xsl:if test="position() > 1">,</xsl:if>
    <!-- Apply the "item" template to all items in the same group as this element
         (i.e. those with the same name) -->
    <xsl:apply-templates select="key('kNodeType', local-name())" mode="item" />
  </xsl:template>

  <xsl:template match="*" mode="item">
    <!-- Skip the delimiter for the first item in each group;
         output it for all others -->
    <xsl:if test="position() > 1">|||</xsl:if>
    <xsl:value-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

> > identifier1|||identifier3|||identifier4,datastamp1|||datastamp2|||2010-04-27T01:10:31Z,setspec1,title1|||title2,creator1,subject1|||subject2,baseURL1|||xxxxx, xxxxx|||xxxxx

# c++ - C++ 函数调用非常慢

> ID：14605243
> 
> 赞同：2
> 
> 时间：2013-01-30T13:29:48.673
> 
> 标签：c++, performance, function, call

我写了一个递归的 Branch&Cut 算法，现在正试图加快执行速度。不过，我注意到一些非常奇怪的事情：有一次我调用了一个函数来计算一些向量的向量。使用clock()，我测量了在调用它的文件以及函数本身中花费在这个函数上的时间。可视化：

```
tic
foo(args);
time1 = toc 
```

和

```
void foo(args) {
  tic
  //do stuff
  time2 = toc
} 
```

我的问题是 time1 大约是 time2 的 3 倍，这对我来说根本没有意义。实际的函数有很多参数，如下所示：

```
void allcomb( std::vector<int> &Vin, 
              std::vector<int> &Vprev, 
              Graph F, 
              int t, 
              const int n, 
              const int numofdests, 
              int Time_hor,
              std::vector<int> &truckdest, 
              std::vector<int> &truck_dest_index, 
              std::vector<int> &descroflabel, 
              std::vector<int> &labelofdescr, 
              std::vector<std::vector<double> > &short_path_time,  
              std::vector<std::vector<double> > &short_path_fuel, 
              double eta, 
              std::vector<std::pair<int,int> >& next_hub,
              std::vector<std::pair<double,double> >& distanceto_next_hub, 
              std::vector<std::vector<int> >& Choices ) 
```

我通过引用传递所有向量以避免复制它们，但也许我遗漏了什么？还是经常调用具有这么多参数的函数通常很慢？另外，进入函数比退出函数花费更多的时间，也许这很重要。

如果您需要更多信息，请告诉我。谢谢和欢呼，克里斯托夫

* * *

boost Graph 对象是问题所在，感谢您发现它 :) 运行时间降低了 10 倍，完美！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:33:46.320

尽管将许多参数传递给函数的设计不太好，但不会显着减慢速度（假设您通过引用传递所有内容）。但是我注意到您特别将副本传递给某些东西，`Graph F`这似乎是一件很大的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T13:35:35.877

只是猜测，但是：

```
 time2 = toc
} 
```

我猜罪魁祸首是`}`. 假设你有类似的东西：

```
void foo(args) {
  tic
  SomeReallyExpensiveObject x;
  time2 = toc
} 
```

在这种情况下，您没有安排销毁时间。如果您在自动存储中有大量向量，它们的销毁可能需要很长时间。

试试这个实验：

```
void foo(args) {
  tic
  {
     //do stuff
  }
  time2 = toc
} 
```

如果测量的时间更接近，那就是问题所在。

# javascript - 为什么有时在 html 中调用 javascript 函数时会看到冒号？

> ID：14605247
> 
> 赞同：10
> 
> 时间：2013-01-30T13:30:03.417
> 
> 标签：javascript, html, function

很多时候我看到人们使用冒号 (:) 调用 javascript 函数。

像`onclick="javascript:functionname();"`

相同的功能可以在没有的情况下`javascript:`使用，我很想知道什么时候使用`javascript:`，什么时候不使用。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T13:32:44.690

`javascript:`将代码放入锚属性时，前缀*非常重要：*`href`

```
<a href="javascript:func();">Anchor</a> 
```

而在内联事件属性（如`onclick`、`onsubmit`、`onmouseover`等）中，`javascript:`前缀并不重要。

但是，您应该注意，这里给出的两种方法都不好实施，您应该使用其他方法（例如，如评论中所述的[@Paul S.](https://stackoverflow.com/questions/14605247/why-are-using-colon-while-calling-function-in-javascript/14605294#comment20391854_14605247)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:36:14.640

这在事件中并不常见，`onclick`因为这些事件已经执行了 javascript。您可能会看到类似以下内容：

```
<a href="javascript: functionname(); return false;">Link</a> 
```

此类代码的原因是，默认情况下，`href`属性正在尝试更改位置或重定向。这告诉浏览器默认`href`操作将是运行的 javascript。否则，该功能将无法运行，页面将刷新，这很烦人。

在锚标记中使用此类 javascript 时，页面刷新是一个常见问题，因为锚标记的默认操作是刷新或加载另一个页面。最后`return false;`的 表示不应触发默认操作（即刷新​​或加载）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T13:37:02.620

我相信`javascript:`当网络上出现许多其他脚本类型（例如 vbScript）时，会留下前缀，为了在 HTML 中区分它们，您需要提供这些前缀。

话虽如此，这些标签在除 IE 之外的任何浏览器中都没有任何作用，即使在 IE 中，您通常也可以省略它们。

另请注意，这整个问题没有实际意义，因为您应该通过 javascript 而不是 HTML 绑定事件处理程序。

# visual-studio-2010 - Castle Windsor 程序集版本控制和 MSTest

> ID：14605248
> 
> 赞同：0
> 
> 时间：2013-01-30T13:30:04.663
> 
> 标签：visual-studio-2010, msbuild, mstest

我们有一个依赖于 Castle Windsor 的解决方案，其中一些项目引用了 3.0 和一些 3.1。

测试需要 Windsor 3.1，但要构建的最终项目引用 3.0，这意味着它是复制到 OutDir 文件夹中的最后一个版本。这导致我们所有的测试都在 MSTest 中失败，但不是在本地。

有什么方法可以强制使用 3.1 版本运行测试，还是我们需要更新解决方案中的所有项目？

# ios - 创建内置 iOS UIPickerViews 的浮雕外观

> ID：14605251
> 
> 赞同：3
> 
> 时间：2013-01-30T13:30:15.833
> 
> 标签：ios, uipickerview

因此，我可以通过向 UILabel 添加阴影颜色和偏移来轻松创建静态浮雕外观，如SO 上的多个[问题和答案中所述。](https://stackoverflow.com/questions/753822/adding-emboss-to-a-uilabel-in-a-navigationitem-titleview-as-seen-with-navigatio)

但是，核心系统 UIPickerViews（例如 Clock->Timer、Clock->Alarm->Edit）不是静态的！如果您仔细观察，它们只会在选择栏下方出现浮雕。将其中一个标签拖出选择栏的一半实际上会导致一半标签浮雕，而另一半则没有，如下图所示：

![在此处输入图像描述](../Images/b944e70210110ae8934e309b7b783bd4.png)

任何想法如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:53:27.517

使用带有浅色阴影的深色文本。确保文本的颜色比阴影深，但比文本浅。

![在此处输入图像描述](../Images/f417fc1ed798dd8afbf7ddee9345850f.png)

# gradle - Gradle 聚合任务

> ID：14605252
> 
> 赞同：3
> 
> 时间：2013-01-30T13:30:18.713
> 
> 标签：gradle

在我的 gradle 脚本中，我构建了一个运行 java 进程的任务。此过程取决于目标属性。任务定义为：

```
task('bulk', type: JavaExec, dependsOn: 'classes', description : 'Bulk data import on a target (defined by -Ptarget=[event|member|...]]') {

//available imports
ext{
    event = relativePath('src/main/scripts/events.csv')
    member = relativePath('src/main/scripts/member.csv')
    membership = relativePath('src/main/scripts/membership.csv')
}

//check the target is set 
doFirst {
    if(!project.hasProperty('target')){

        println "\nUsage:"
        println "\tgradle bulk -Ptarget=[event|member|...]"
        println "where target is : "
        bulk.ext.each{ println it }

        throw new GradleException('Target argument required')
    } else {
        println "\nBulk import of  $target\n"
    }
}

main = 'org.yajug.users.bulkimport.BulkImport'
classpath = sourceSets.main.runtimeClasspath
if(project.hasProperty('target')){
    bulk{
            args target
            args bulk.ext[target]
        debug false
        }
    }
} 
```

并运行它：

```
gradle bulk -Ptarget=event 
```

它工作正常，但知道我必须为不同的目标运行这个过程：

```
gradle bulk -Ptarget=event
gradle bulk -Ptarget=member
gradle bulk -Ptarget=membership
... 
```

**如何使用 gradle 的依赖模型将所有这些调用分组到另一个任务中？**（我知道目标列表）

**解决方案**

```
task bulk;
['event','member','membership'].each {target ->
    task("bulk${target}", type: JavaExec, dependsOn: 'classes', description : "Bulk data import of ${target}s") {

        //available imports
        ext{
            event = relativePath('src/main/scripts/events.csv')
            member = relativePath('src/main/scripts/member.csv')
            membership = relativePath('src/main/scripts/membership.csv')
        }

        //check the target is set 
        doFirst {
            println "\nBulk import of  $target\n"
        }

        main = 'org.yajug.users.bulkimport.BulkImport'
        classpath = sourceSets.main.runtimeClasspath
        args target
        args ext[target]
        debug false

    }
    bulk.dependsOn("bulk${target}")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:31:49.157

> 如何使用 gradle 的依赖模型将所有这些调用分组到另一个任务中？

你不能，因为一个任务（实例）将在每个构建中最多执行一次。相反，要走的路是声明多个任务实例。您可以通过将任务声明放入循环中，将其放入方法中并多次调用它，或者通过编写任务类并多次实例化它来做到这一点。然后，您将添加另一项依赖于所有任务的`bulk`任务。假设`bulk`任务之间的执行顺序无关紧要，就是这样。

通过添加一两个辅助方法，您可以围绕此创建一个不错的小 API，以提高可读性并允许在其他地方重用。

解决此问题的另一种方法是使用任务*规则*。[您可以在Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html#N10ED4)中阅读有关任务规则的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:30:30.407

在 build.gradle 文件中创建一个`-Ptarget=all`, 并处理该特定情况怎么样。这可以这样做：

```
['event','member','membership'].each { t ->
   task("bulk${t}", ...) {
     onlyIf project.hasProperty("target") && (project.getProperty("target").equals(t) || project.getProperty("target").equals("all"))
     args target
     args bulk.ext[target]
     debug false
   }
} 
```

# android - 如果数据库被加密，其他应用程序如何在 android 中使用相同的数据库？

> ID：14605256
> 
> 赞同：1
> 
> 时间：2013-01-30T13:30:27.360
> 
> 标签：android, sqlite, sqlcipher

我有一个问题。

我的 android sdk 中有两个应用程序。

1 - SDCARD 中具有加密数据库的第一个应用程序。

2-秒应用没有数据库。

```
is it possible second app can access the encrypted DB . 
```

如果是，请**帮助**我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:33:19.517

最简洁的方法是通过 ContentProviders。这允许您的应用程序 A 提供一些公共方法，以便其他应用程序从其自己的数据库中请求/更改数据，只要他们知道 URI（您可以将其视为一个小密钥/秘密）。

您可能可以[在这里找到最好的指南之一](http://www.vogella.com/articles/AndroidSQLite/article.html)

# c# - 果园最新帖子页面

> ID：14605258
> 
> 赞同：0
> 
> 时间：2013-01-30T13:30:27.950
> 
> 标签：c#, blogs, orchardcms, customizing

我的果园 cms 网站上有两个博客，“新闻”和“博客”。我需要一个页面来显示每个博客的最新博客文章列表，例如：www.mysite.com/news www.mysite.com/blog

我只找到了一种在小部件中列出博客文章的方法，但我需要一个专门用于此的页面。

我尝试为此创建一个按 url 过滤的层，并将 latestblogposts 小部件放在该页面的内容上，但无济于事，因为该页面根本不存在。

我试图创建一个页面，但我只能将内容放入其中。

必须有一个简单，标准的方法来做到这一点，但我找不到它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:20:03.153

使用查询和投影页面。

# javascript - 使用静态内容填充输入类型 textarea（没有 ajax 调用）

> ID：14605262
> 
> 赞同：0
> 
> 时间：2013-01-30T13:30:34.647
> 
> 标签：javascript, html, ajax

我的 html 页面中有一个 textarea，我希望我可以这样做：

```
<textarea id='myTextArea' src='data.txt' />
                          ============== 
```

不幸的是我不能那样做。“src”不适用于文本区域。

所以我必须重新使用一些 javascript 来进行 ajax 调用（http get for data.txt），然后填充 myTextArea。

ajax 是解决这个问题的唯一方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:35:29.080

更好的选择可能是通过服务器端语言输出该文件的内容。由于内容是静态的，因此不需要额外的 HTTP 请求。

在 PHP 中，你可以这样做：

```
<textarea id='myTextArea'><?php include "data.txt" ?></textarea> 
```

编辑：正如 Quentin 所指出的，您可能希望在将包含的文件注入 HTML 之前对其进行解析，特别是如果包含的文件可以很容易地被第三方修改。类似的函数`htmlspecialchars`可用于相应地验证文件内容：

```
<textarea id='myTextArea'><?php htmlspecialchars(file_get_contents("data.txt")); ?></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:22:22.400

这应该有效：

```
<script>

function loadFile()
{
var xmlhttp = new XMLHttpRequest(); 
xmlhttp.open("GET","foo.txt",false);
xmlhttp.send();
var value = xmlhttp.responseText;
document.getElementById("myTextarea").value=value;
}

</script> 
```

和html：

```
 <body onload="loadFile()">

     <textarea id="myTextarea" cols="20">

    </textarea>

   </body> 
```

# java - 重复表头

> ID：14605264
> 
> 赞同：1
> 
> 时间：2013-01-30T13:30:49.013
> 
> 标签：java, docx4j

当表格标题跨越一页以上时，我需要重复表格标题，甚至检测分页符，以便我可以自己添加标题，我正在使用 Docx4j 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:31:29.067

您需要添加到相关的表格行（w:tr）：

```
<w:trPr>
  <w:tblHeader />
</w:trPr> 
```

有关如何执行此操作，请参阅[http://www.docx4java.org/forums/docx-java-f6/insert-a-tableheader-t237.html](http://www.docx4java.org/forums/docx-java-f6/insert-a-tableheader-t237.html)

有关该元素的更多信息（来自 ISO/IEC 29500-1 第一版），您可以查看[http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.tableheader.aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.tableheader.aspx)

# android - ChimpChat 仪表

> ID：14605265
> 
> 赞同：0
> 
> 时间：2013-01-30T13:30:52.353
> 
> 标签：android, automation, monkeyrunner

我正在尝试使用 java 程序中的 chimpchat。我能够成功地与两个正在运行的模拟器实例建立连接。但是当我在设备上调用 instrument() 函数来运行测试套件时，程序会因空指针异常而崩溃。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T00:02:41.733

chimpchat 应该在主机上运行，​​而不是在设备上运行，所以你不能同时使用 instrment() 。

# vbscript - 我可以在 VBScript 中更改/隐藏我的 HTTP_REFERER 标头吗？

> ID：14605268
> 
> 赞同：0
> 
> 时间：2013-01-30T13:30:55.857
> 
> 标签：vbscript, http-referer, http-redirect

是否可以更改`HTTP_REFERER`VBScript 中的值？为了避免 XSS 攻击，我`CSRF`在链接中使用了数据。但是当我将用户链接到外部网站时，`CSRF`如果他们正在检查`HTTP_REFERER`.

所以我读到你应该在中间放置一个中间页面，它将重定向到所需的页面。所以我尝试创建一个名为的页面，该页面`RedirectPage.asp`将 URL 作为参数并执行`Server.Redirect`. 但是如果我点击一个外部链接`pagex.asp?CSRF...`，我最终`HTTP_REFERER`还是会看到`pagex.asp`。

那么有没有办法“清理”我的`REFERER`标题？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:28:53.610

通过使用元重定向而不是重定向标头，您可以更改 Firefox 和 IE 中的引用者，但不能更改 Chrome，如此处所述：[https ://stackoverflow.com/a/2985629/160565](https://stackoverflow.com/a/2985629/160565)

但是，您可以通过 SSL 页面重定向来始终清除（不是更改，而是消除）http_referer。

为了节省重定向，您还可以检查支持 rel="noreferrer" html5 属性的浏览器，并在这些情况下使用它。我相信目前这只是 webkit 浏览器。 [http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-noreferrer](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-noreferrer)

# asp.net - ASP：中继器不工作

> ID：14605271
> 
> 赞同：2
> 
> 时间：2013-01-30T13:30:59.143
> 
> 标签：asp.net, asprepeater

我使用[本](http://www.netrostar.com/Tutorials-91-ASP.NET%20Tutorial.%20How%20to%20use%20Repeater)教程使用中继器在我的项目页面上显示名称列表。

所以我正在使用动态数据，在我的 aspx.cs 页面中我有：

```
List<string> subContractors = new List<string>();

Context db = new Context();
subContractors = (from SUBContractors in db.BOQ_SubContractors
                  where SUBContractors.Bill_Of_Quantity_id == this.boqId
                  select SUBContractors.Sub_Contractor.Company_Name).ToList(); 
```

repeaterShowSubContractorName.DataSource = subContractors; repeaterShowSubContractorName.DataBind();

在我的 aspx 中：

```
<asp:Repeater ID="repeaterShowSubContractorName" runat="server" OnItemDataBound="subContractors_ItemDataBound">
  <HeaderTemplate>
    <table>
      <tr>
        <th>
          <asp:Label ID="SubConName" Text="SubContractor Name" runat="server"></asp:Label>
        </th>
      </tr>
    </table>
  </HeaderTemplate>
  <ItemTemplate>
    <tr>
      <td>
        <asp:Label ID="SubCon" Text='<%# Eval("subContractors") %>' runat="server"></asp:Label>
       </td>
     </tr>
   </ItemTemplate>
 </asp:Repeater> 
```

错误来自`OnItemDataBound="subContractors_ItemDataBound"`.

我将其链接到什么或在哪里？我目前没有`subContractors_ItemDataBound`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:33:25.383

只需`OnItemDataBound="subContractors_ItemDataBound"`从您的 aspx 页面中删除

**编辑**发生此错误是因为您 `subContractors_ItemDataBound`在 .cs 文件中没有处理`OnItemDataBound`事件的方法，因此您必须处理`OnItemDataBound`事件或仅删除`OnItemDataBound="subContractors_ItemDataBound"`

**编辑**以绑定字符串列表使用：

`<asp:Label ID="SubCon" Text='<%# Container.DataItem %>' runat="server"></asp:Label>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:34:43.007

在您的页面加载（或您想要加载数据的任何地方）执行此操作以将您的数据与转发器链接

```
 repeaterShowSubContractorName.DataSource = subContractors;
    repeaterShowSubContractorName.DataBind(); 
```

并删除

```
 OnItemDataBound="subContractors_ItemDataBound" 
```

# server-push - HTTP 2 将支持服务器推送，这是什么意思？

> ID：14605273
> 
> 赞同：24
> 
> 时间：2013-01-30T13:31:04.070
> 
> 标签：server-push, http2

我已经阅读了很多关于[HTTP 2](https://http2.github.io/)（仍在开发中）的内容，所以我也听说过服务器推送功能，但我的头脑，这并不清楚。

此服务器推送功能是否意味着服务器将能够向客户端发送响应而无需客户端发出请求？就像普通的 TCP 连接一样？还是我错过了重点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-01-22T16:58:26.197

HTTP2 推送机制不是像 websocket 或服务器发送事件那样的通用服务器推送机制。

它专为 HTTP 会话的特定优化而设计。具体来说，当客户端请求资源（例如 index.html）时，服务器可以猜测它接下来会请求一堆相关资源（例如，theme.css、jquery.js、logo.png 等）通常一个网页可以有 10 个这样的关联请求。

使用 HTTP/1.1，服务器必须等到客户端实际发送对这些相关资源的请求，然后客户端受到连接的限制，一次只能请求大约 6 个。因此，在实际发送网页所需的所有相关资源之前，可能需要多次往返。

使用 HTTP/2，服务器可以发送对 index.html GET 推送承诺的响应，告诉客户端它还将发送 theme.css、jquery.js、logo.png 等，就好像客户端有要求他们。然后，客户端可以取消这些推送，或者只是等待它们被发送，而不会产生多次往返的额外延迟。

[这是使用 Jetty https://www.youtube.com/watch?v=4Ai_rrhM8gA](https://www.youtube.com/watch?v=4Ai_rrhM8gA)使用 SPDY（HTTP2 的基础）进行推送的演示。这是一篇关于码头中 HTTP2 和 SPDY 的推送 API 的博客：[https ://webtide.com/http2-push-with-experimental-servlet-api/](https://webtide.com/http2-push-with-experimental-servlet-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-23T12:00:56.980

本质上你的理解是正确的，但是，它还有很多。

只有在对 HTTP 页面发出请求并且该页面正确呈现所需的资源（即图像、JavaScript 文件、CSS 等）已被识别后，服务器才能向客户端发送资源。负责此的机制是服务器端框架。在 Java 中，这将是[Servlet 4](https://readlearncode.com/servlet-4-features/)，也可能是 JSF。

服务器不能在需要时向客户端发送任何资源。只有在上述情况下才会发生，并且客户端总是能够拒绝服务器请求推送资源。

HTTP/2 服务器推送的机制设计得非常好，为了掌握它，我推荐这篇[HTTP/2 概述](https://readlearncode.com/http2-topline-features/)和这篇深入探讨[HTTP/2 协议](https://www.ibm.com/developerworks/web/library/wa-http2-under-the-hood/index.html)内部的文章。

# javascript - 使用三星智能电视 SDK 4.0 处理表单/焦点

> ID：14605276
> 
> 赞同：1
> 
> 时间：2013-01-30T13:31:13.040
> 
> 标签：javascript, forms, samsung-smart-tv

我正在使用最新的 SDK 为三星智能电视开发应用程序。

我有一个基于场景的应用程序，现在想使用 TV 移除来控制它。

天真的方法，使用 jQuerys`.select()`使光标进入输入字段之一似乎完全禁用了遥控器，错误是

> 身体当前未激活...跳过！： 输入

据我所知，这与具有 onkeydown-Handler 的 body-element 有关。

这导致我基本上需要手动管理 focussed / blur 状态，不能使用 CSS 选择器，例如 :active、:focussed，这不是很整洁。

任何帮助/文档链接/等将不胜感激。

我正在使用基于 VMWare 的模拟器在 Mac OS 下开发应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:34:02.077

我们一直在使用我们的应用程序为场景中的活动元素分配一个类。然后使用 javascript，您可以根据哪些页面元素处于活动状态添加侦听器。

因此，例如，当应用程序加载时，您可以为 HTML 页面上的第一个按钮分配一个活动类。然后，您可以为遥控器上的按钮设置监听器，以便向下按钮将活动状态更改为场景中的下一个按钮。

```
//key press listener for remote
SceneScene1.prototype.handleKeyDown = function (keyCode) {
    //find the key code you are looking for
    switch (keyCode) {
        case sf.key.LEFT:
        //code for left keypress
        break;

    case sf.key.RIGHT:
        //code for left keypress
        break;

    case sf.key.UP:
            //code for up keypress
        break;

    case sf.key.DOWN:
        //code for down keypress
            if ($('#button1').hasClass('active')) {
                $('#button1').removeClass('active');
                $('#button2').addClass('active');
            }
        break;

    case sf.key.ENTER:
            //code for enter keypress
        break;
    }
} 
```

你是对的，它看起来并不那么干净，但是当你与遥控器连接时，它几乎和它一样好。您必须指定“聚焦”元素并将它们用作远程指令的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:41:17.027

如果您发现它更有益，您可以尝试切换类吗？

# .net - 通知字典中的某些值已更改

> ID：14605278
> 
> 赞同：5
> 
> 时间：2013-01-30T13:31:17.097
> 
> 标签：.net, wpf, dictionary, key, inotifypropertychanged

目前我正在编写实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)的​​自己的字典。见下文：

```
public event PropertyChangedEventHandler PropertyChanged;

protected void OnPropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}

new public Item this[TKey key]
{
    get { return base.Item[key]; }
    set(TValue value)
    {
        if (base.Item[key] != value)
        {
            base.Item[key] = value;
            OnPropertyChanged("XXX"); // what string should I use?
        }
    }
} 
```

我的目标很简单：当 Dictionary 中的某个值发生更改时，通知它已更改。然后，所有与相应键名称绑定的 WPF 元素都应更新自身。

现在我的问题是：我应该使用什么字符串`propertyName`来通知？

我试过了`"[" + key.ToString() + "]"`，`"Item[" + key.ToString() + "]"`而且很简单`key.ToString()`。它们似乎都不起作用，因为 WPF 元素没有更新。

使用`String.Empty`( `""`) 确实会更新 WPF 元素，但我没有使用它，因为这将更新绑定同一字典的所有 WPF 元素，即使它们具有不同的键。

* * *

这是我的绑定在 XAML 中的样子：

```
<TextBlock DataContext="{Binding Dictionary}" Text="{Binding [Index]}" /> 
```

`Index`当然是我字典中的键名。

* * *

一些人建议使用[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx) ，而不是使用 INotifyPropertyChanged 。我试过这个：

```
Dim index As Integer = MyBase.Keys.ToList().IndexOf(key)
Dim changedItem As Object = MyBase.ToList().ElementAt(index)

RaiseEvent CollectionChanged(Me, New NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Replace, changedItem, index)) 
```

**但这也不会更新绑定的 WPF 元素。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T14:44:41.123

也许您需要考虑[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged(v=vs.110).aspx)接口而不是`INotifyPropertyChanged`. 如果是这种情况，请查看[此问题](https://stackoverflow.com/q/4964683/439024)及其链接到的博客文章。

另外，请检查与您的问题类似的上一个问题的[答案。](https://stackoverflow.com/a/9393016/439024)它建议您使用[Binding.IndexerName](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.indexername.aspx)的值作为更改通知的属性名称。

**编辑：**

如果您想避免使用`INotifyCollectionChanged`，您可以尝试另一种方法。更改您的字典，使其值的类型是实现的代理对象`INotifyPropertyChanged`。

```
public class MyProxy<T> : INotifyPropertyChanged
{
    public T Value
    {
        // Getter and setter with change notification code here.
    }
} 
```

然后将这种类型的实例插入到您的字典中一次。将更新字典中值的代码替换为检索代理的代码，然后更新其`Value`属性。

您需要将 XAML 绑定更改为类似`([Item]).Value`.

在查看了您的其他一些评论后，看起来这种方法可能对您有用。这类似于我最近必须做的事情。创建自定义[KeyedCollection](http://msdn.microsoft.com/en-us/library/ms132438(v=vs.110).aspx)和相应的代理。`ItemName`向代理添加属性；只读，不需要支持变更通知。在该属性上创建您的`KeyedCollection`实施索引。`ItemName`工作一种享受！如果您愿意，我会添加示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:03:41.127

```
if (base.Item[key] != value)
{
     base.Item[key] = value;
     if (key == "notifykey") OnPropertyChanged("[Item]");
} 
```

String.empty 将通知所有属性，而不仅仅是 Item

根据操作，所有与 Dictionary 的绑定的问题仍在更新。
所以我会做一个新的财产

假设您的值是字符串绑定到 KeyedValue

```
public String KeyedValue
{
    get { return base.Item[Index]; }
}

if (key == "Index") OnPropertyChanged("KeyedValue"); 
```

# java - Java 到 Excel - 动态更新

> ID：14605281
> 
> 赞同：1
> 
> 时间：2013-01-30T13:31:29.950
> 
> 标签：java, excel, rtd

我需要将一些动态数据（一组不断更新的值）从 Java 服务器显示到 Excel 工作表上。我一直在看 xlloop 但这似乎更像是一个请求/回复基础设施 - 即必须按 F9 来轮询最新值 - 是否可以通过 java 服务器将值“推送”到工作表中的单元格每次服务器中的值发生变化时，诸如 RTD 之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:43:17.643

CSV 文件（可由 Microsoft Excel 打开）以纯文本形式存储表格数据。因此，您可以使用 java 应用程序轻松地将数据推送到 CSV 文件。

有关更多信息，请访问 [http://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

# java - 为 @ExceptionHandler 编写 JUnit 测试

> ID：14605287
> 
> 赞同：12
> 
> 时间：2013-01-30T13:31:51.370
> 
> 标签：java, spring, rest, spring-mvc, junit

我正在使用 Spring MVC 编写一个 Rest 服务。以下是课程大纲：

```
 @Controller
 public class MyController{

     @RequestMapping(..)
     public void myMethod(...) throws NotAuthorizedException{...}

     @ExceptionHandler(NotAuthorizedException.class)
     @ResponseStatus(value=HttpStatus.UNAUTHORIZED, reason="blah")
     public void handler(...){...}
 } 
```

我已经使用[此处](https://stackoverflow.com/a/9140291/905762)发布的设计编写了单元测试。测试基本如下：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(....)
public class mytest{

    MockHttpServletRequest requestMock;
    MockHttpServletResponse responseMock;
    AnnotationMethodHandlerAdapter handlerAdapter;

@Before
public void setUp() {
    requestMock = new MockHttpServletRequest();
    requestMock.setContentType(MediaType.APPLICATION_JSON_VALUE);
    requestMock.addHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);

    responseMock = new MockHttpServletResponse();

    handlerAdapter = new AnnotationMethodHandlerAdapter();
}

@Test
public void testExceptionHandler(){
    // setup ....
    handlerAdapter.handle(...);

    // verify
    // I would like to do the following
    assertThat(responseMock.getStatus(), is(HttpStatus.UNAUTHORIZED.value()));
}

} 
```

但是，调用 to`handle`正在抛出`NotAuthorizedException`. 我已经读到这是设计使然能够对方法抛出适当的异常进行单元测试，但是我想编写一个自动化测试框架正在适当地处理这个异常并且被测试的类已经适当地实现了处理程序. 有没有办法做到这一点？

请注意，我无法在可以发布的地方访问实际代码。

此外，我仅限于（由于不幸的原因）Spring 3.0.5 或 3.1.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:54:54.210

考虑使用 Spring 3.2 及其[mvc-test-framework](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework)

```
import static org.springframework.test.web.servlet.setup.MockMvcBuilders.*;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration("file:src/main/webapp/WEB-INF/spring/appServlet/servlet-context.xml")
public class WebMvcTest {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
    }

    @Test
    public void getFoo() throws Exception {
        this.mockMvc.perform(
            get("/testx")
            .contentType(MediaType.APPLICATION_JSON)
            .accept(MediaType.APPLICATION_JSON)
            )
            .andExpect(status().isUnauthorized());
    }
} 
```

控制器代码

```
@Controller
public class MyController {

    public class MyException extends RuntimeException {
    };

    @RequestMapping("/testx")
    public void myMethod() {
        throw new MyException();

    }

    @ExceptionHandler(MyException.class)
    @ResponseStatus(value = HttpStatus.UNAUTHORIZED, reason = "blah")
    public void handler() {
        System.out.println("handler processed");
    }
} 
```

这个“测试”通过得很好。

[免责声明：目前我是 Spring MVC 测试的菜鸟，实际上这是我的第一次测试。
**更新：**感谢德雷克[的更正](https://stackoverflow.com/review/suggested-edits/3425225)。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-03T22:08:47.920

`@ControllerAdvice`使用而不是注释您的异常处理控制器`@Controller`。

正如 Boris Treukhov 在将`@ExceptionHandler`注释添加到引发异常的控制器中的方法时所指出的那样，它将使其工作，但只能从该特定控制器工作。

`@ControllerAdvice`将允许您的异常处理方法适用于您的整个应用程序，而不仅仅是一个特定的控制器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-30T14:31:57.420

您可以将@Test 更改为

```
@Test(expected=NotAuthorizedException.class) 
```

如果内部抛出该异常，这将返回 true，否则返回 false。

这也会使 assertThat() 变得不必要。您可以编写第二个测试来捕获 NotAuthorizedException，然后您可以在该条件下检查 responseMock。

# php - 从 PHP 脚本执行 ffmpeg 命令

> ID：14605289
> 
> 赞同：0
> 
> 时间：2013-01-30T13:32:01.480
> 
> 标签：php, command-line, ffmpeg

我的问题很简单：我可以从命令行在我的服务器上完美地运行 ffmpeg 命令，但是当我尝试从 PHP 脚本执行它们时，*其中一些命令会遇到问题。*

例如，以下在命令行中起作用：

```
ffmpeg -i cat.mpeg cat.avi 
```

在我的 PHP 脚本中，它也可以作为：

```
exec("/usr/local/bin/ffmpeg -i cat.mpeg cat.avi", $output); 
```

正如我所说，这很好用。但是，此行在命令行中*有效*，但在 PHP 脚本中无效：

```
ffmpeg -i cat.mpeg -vf scale=480:360 cat2.mpeg 
```

试图将其放入 a`exec()`不会产生任何结果。我已经尝试过在尺寸、不同格式等周围加/不加引号。从我尝试过的几十个不同的命令来看，只要它们不包含`-vf`标志，似乎任何命令都可以在 PHP 中工作。显然它可以在服务器上运行，因为从命令行执行没有问题；我在这里想念什么愚蠢的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:05:32.513

我相信这不是关于 -vf 标志，而是关于它的参数 scale=480:360。在执行命令之前尝试使用 escapeshellcmd() 转义命令。

# node.js - Azure 的 Hello World node.js 不工作

> ID：14605292
> 
> 赞同：0
> 
> 时间：2013-01-30T13:32:35.567
> 
> 标签：node.js, powershell, azure, azure-sdk-.net

我尝试按照[这个对 Node.js、Azure 和适用于 Node.js 的 Azure SDK 的非常基本的介绍进行操作](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

一切都按计划进行，直到我做到这一点：

```
PS C:\node\helloworld\WebRole1> Start-AzureEmulator -Launch

Creating local package...
Starting Emulator...
Start-AzureEmulator : The system cannot find the file specified
At line:1 char:20
+ Start-AzureEmulator <<<<  -Launch
    + CategoryInfo          : CloseError: (:) [Start-AzureEmulator], Win32Exce
   ption
    + FullyQualifiedErrorId : AzureDeploymentCmdlets.Cmdlet.StartAzureEmulator
   Command 
```

我是 Node.js 的新手并从 PowerShell 调用模拟器，所以我真的不知道从那里去哪里找出可能出了什么问题。我无法在谷歌上找到这个确切的错误，所以我有点卡住了。

有什么想法可以从这里开始吗？任何地方都有日志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:48:09.483

我能够在我的机器上测试它并看到模拟器启动，所以它看起来像是 Windows Azure SDK 的安装问题。您能否确保从“ [http://go.microsoft.com/fwlink/?LinkId=254279&clcid=0x409](http://go.microsoft.com/fwlink/?LinkId=254279&clcid=0x409) ”正确安装了 SDK。◦安装适用于 Node.js 的 Windows Azure SDK：Windows 安装程序

如果这没有帮助，procmon 日志可能会深入了解丢失的文件。“ [http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645) ”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:04:27.140

这本身不是“节点”问题。该错误是指 PS 脚本未找到本地计算模拟器。

您应该有一个带有模拟器的目录@ C:\Program Files\Microsoft SDKs\Windows Azure\Emulator

您还可以通过转到开始菜单 (Win7) 中的搜索框或 Win8 的搜索功能（向右滑动）来搜索模拟器。只需搜索关键字“模拟器”

如果该目录不存在或为空，则可能意味着 Azure SDK 未完全安装。

如果模拟器配置正确，但您没有设置 webrole，您会收到不同的错误。类似于： Start-AzureEmulator : 服务定义 (*.csdef) 文件无效或为空

拍

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:39:50.830

确保已安装[Windows Azure SDK v1.8](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

# mysql - MySql 两列上的唯一索引 - 自动递增

> ID：14605296
> 
> 赞同：0
> 
> 时间：2013-01-30T13:32:47.583
> 
> 标签：mysql, sql

> **可能重复：**
> [具有自动增量的mysql两列主键](https://stackoverflow.com/questions/5416548/mysql-two-column-primary-key-with-auto-increment)

我有下表，其中包含`UNIQUE`两列的键：

```
+--------------+--------------+------+-----+---------+-------+
| Field        | Type         | Null | Key | Default | Extra |
+--------------+--------------+------+-----+---------+-------+
| pa_id        | int(6)       | NO   | PRI | NULL    |       |
| FK_languages | tinyint(2)   | NO   | PRI | NULL    |       |
| pa_attribute | varchar(255) | NO   |     | NULL    |       |
+--------------+--------------+------+-----+---------+-------+ 
```

现在，我有以下条目：

```
+-------+--------------+--------------+
| pa_id | FK_languages | pa_attribute |
+-------+--------------+--------------+
|     1 |            1 | white        |
|     1 |            2 | weiß         |
+-------+--------------+--------------+ 
```

比方说，我想插入一个新条目“黑色” `FK_languages = 1`... col“pa_id”的最佳做法是什么`auto increment`，它看起来像这样：

```
+-------+--------------+--------------+
| pa_id | FK_languages | pa_attribute |
+-------+--------------+--------------+
|     2 |            1 | black        |
+-------+--------------+--------------+ 
```

**注意**不幸的是我不能使用`TRIGGER`MySql 的功能。是否有可能通过 MySql 做到这一点？我想避免通过我的脚本语言（PHP）这样做。

**编辑：**

看来我只能通过我在 PHP 中的查询来解决这个问题。假设的重复线程仅提供两种解决方案：MyISAM 或 Innodb + 触发器。两者都不会和我一起工作。

# mongodb - 使用 where 条件更新 MongoDB 中的查询

> ID：14605302
> 
> 赞同：0
> 
> 时间：2013-01-30T13:33:05.990
> 
> 标签：mongodb

```
{
"_id" : ObjectId("510902fb7995fe3504000002"),
"name" : "Gym",
"status" : "1",
"whichs" : [
    {
        "name" : "American",
        "status" : "1"
    }
]
} 
```

以上是我的集合对象..我想将 which.name 更新为“Indian” where which.status = 1..请帮助我使用 mongoDB 查询来执行此操作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:51:38.313

你可以试试这个：

```
db.collection.update({"whichs.status" : "1" }, 
                     {$set : { "whichs.$.name" : "Indian"},
                     false,
                     true); 
```

然后找到所有文档的`"whichs.status" : "1"`集合`"whichs.$.name" : "Indian"`。有关 update() 方法的更多信息，请阅读[此处](http://docs.mongodb.org/manual/reference/method/db.collection.update/)。

# php - 将整个源代码从制表符转换为 4 个空格

> ID：14605303
> 
> 赞同：1
> 
> 时间：2013-01-30T13:33:07.727
> 
> 标签：php, cakephp

在将 CakePHP 源代码提交到 GitHub 后，我才意识到他们现在使用制表符来缩进代码，而不是四个空格。他们还在`.editorconfig`文件中定义了这一点，我已将其更改为：

```
root = true

[*]
indent_style = space
indent_size = 4
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true 
```

有没有办法遍历整个源代码并安全地将所有制表符转换为四个空格以进行缩进？我的理由是 repo 上的每个开发人员都使用四个空格，混合和匹配会导致代码在 GitHub 上查看时看起来不合适。而且我只是一致性的粉丝:)

如果我采用自制的方式并为此编写自己的脚本，我真的不介意哪种语言，尽管我对 PHP 更有信心（我知道，这不是最适合这份工作的）。这就像`preg_replace('~\t~', ' ', $fileText)`在每个文件上做 a 一样简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:54:16.303

在您希望执行它的目录中尝试此操作：

```
find ./ -type f -exec sed -i 's/\t/XXXX/g' {} \; 
```

那应该用 4 个空格替换制表符（如果用空格替换 X）。

调整你想要多少空间之间的`t/`空间`/g`……只需去掉 X 并在其中放置空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:12:18.440

当制表符跟随占用该制表符区域的空格字符时，直接用空格替换制表符将导致不对齐。

使用 expandtabs() 字符串方法的基本 python 脚本将导致代码看起来与构思时相同。示例是 4 的制表符空间：

```
#!/usr/bin/python
#
# convert source code or text with spaces, being careful to align text as it was conceived
# with the original tab space settings, which is defaulted to 4 spaces per tab.
#
# usage:
# ./tabs2spaces.py <file_to_convert>

import os
import sys

spaces_per_tab = 4

argc = len( sys.argv )

if argc < 2:
    print 'no file argument specified'

filename = sys.argv[ 1 ]
old_filename = 'old_' + filename

os.rename( filename, old_filename )

fn = open( filename, 'wb' )
fo = open( old_filename, 'r' )

for line in fo:
    fn.write( line.expandtabs( spaces_per_tab ) )

fn.close()
fo.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:40:31.310

不确定您是否可以访问或已经使用 Sublime Text 2，但它可以自动为您将所有制表符转换为空格：

[如何在 Sublime Text 2 中用制表符替换四个空格？](https://stackoverflow.com/questions/9575739/how-to-replace-four-spaces-with-a-tab-in-sublime-text-2)

# windows-8 - 将网页从 IE Metro 切换到 IE10 桌面版

> ID：14605313
> 
> 赞同：0
> 
> 时间：2013-01-30T13:33:30.747
> 
> 标签：windows-8, microsoft-metro, internet-explorer-10

我需要创建一种方法，以便当用户在 IEmetro 中加载我们的网页时，它会自动将它们切换到 IE10 桌面。这背后的原因是我们的网站功能在 IEmetro 中不起作用。我们的网站是用 Aspx 和 cs 代码、java 脚本构建的，有时还会使用一些 jquery。

有谁知道我们如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:39:42.080

您无法控制用户使用的浏览器；并且您的网站没有理由不能在现代 UI（以前的“Metro”）中的 Internet Explorer 中运行。这两种浏览器几乎在所有方面都几乎相同。

如果您在使用 Internet Explorer 10 时遇到问题，请在此处提出更具体的问题和/或阅读[Internet Explorer 10 开发人员指南](http://msdn.microsoft.com/en-us/library/ie/hh673549%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T11:33:26.163

我也会对此感兴趣。

不幸的是，IEMetro 禁用了许多功能，并以不同的方式显示 javascript 警报，从而极大地改变了用户体验。

# iphone - 如何自动调整子图层的大小

> ID：14605320
> 
> 赞同：7
> 
> 时间：2013-01-30T13:33:55.773
> 
> 标签：iphone, ios, objective-c, drawing, uibezierpath

我有一个图像视图，在按钮单击时我也绘制了一些贝塞尔路径和一些文本层。在撤消时，我删除了最后绘制的路径和文本层。

现在我想调整我的图像视图的大小以设置在视图的上半部分并在下半部分视图中复制，并且想同时调整所有图层的大小，并且还想在此之后继续绘制。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-14T12:41:48.233

来不及回答...

但可能这可以帮助其他人。CALayers 没有自动调整大小的掩码您可以通过一些技巧来管理它。

```
- (void)layoutSubviews {
  // resize your layers based on the view's new frame
  layer.frame = self.bounds;
} 
```

如果您创建了 UIView 的子类，这将起作用。如果不是这样，您可以在任何地方设置 CALayer 框架的边界，前提是您参考了您的图层。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-15T17:45:57.570

至少有3个选项：

1.  使用委托`CALayer`
2.  override `layoutSublayers`，并通过调用它`setNeedsLayout()`
3.  使用分机和通话视图`fitLayers`

下面的示例，**选项 3**：

## 斯威夫特 5, 4

### 代码

```
extension UIView {
  func fitLayers() {
    layer.fit(rect: bounds)
  }
}

extension CALayer {
  func fit(rect: CGRect) {
    frame = rect

    sublayers?.forEach { $0.fit(rect: rect) }
  }
} 
```

### 例子

```
// inside UIViewController 
override func viewWillLayoutSubviews() {    
  super.viewWillLayoutSubviews()

  view.fitLayers()
}

// or
// inside UIView
override func layoutSubviews() {    
  super.layoutSubviews()

  fitLayers()
} 
```

# c# - 调试时出现 Visio 2010 加载项错误：检测到 DisconnectedContext

> ID：14605325
> 
> 赞同：2
> 
> 时间：2013-01-30T13:34:19.080
> 
> 标签：c#, .net, vsto, add-in, visio

我的 (VSTO) Visio 2010 加载项有一个非常奇怪的问题。插件按顺序处理许多 visio vsd 文件。我基本上做的是循环遍历给定文件夹中的所有 vsd 文件。对于此文件夹中的每个 vsd 文件，我执行 openEx(..)，然后循环遍历此文件中的所有形状对象。我从每个形状中读取数据，并扩展特定形状的功能（将 shapesheet 单元格添加到形状）。然后我执行 visioDiagram.save() 和 visioDiagram.close()。然后我打开下一个 vsd 文件并对其执行相同的操作。当我在 Visual Studio 2010 中调试时，插件运行大约 400 个文件，并且每次在文件 400 或 415 之间运行，在我 save() 和 close() 实际的 visio 图并尝试打开下一个图之后，出现以下消息：

> 检测到 DisconnectedContext
> 
> 消息：上下文 0x3f4fc8' 已断开连接。从当前上下文（上下文 0x3f5138）释放接口。这可能会导致损坏或数据丢失。为避免此问题，请确保所有上下文/单元保持活动状态，直到应用程序完全使用代表它们内部的 COM 组件的 RuntimeCallableWrapper 完成。（上下文 0x3f5138）。这可能会导致损坏或数据丢失。为避免此问题，请确保所有上下文/单元保持活动状态，直到应用程序完全使用代表它们内部的 COM 组件的 RuntimeCallableWrapper 完成。

伪代码：

```
Foreach (visioFile in visioFiles)
{
openedVisioFile = Visio.Documents.openEx(visioFile.vsd,..)
    Foreach(visioShape in openedVisioFile.Shapes)
{
   Read shape properties;
   Write properties in a dictionary;    
}
openedVisioFile.save();
openedVisioFile.close();
} 
```

# apache - Wamp 上的许多 Laravel 安装

> ID：14605326
> 
> 赞同：2
> 
> 时间：2013-01-30T13:34:28.383
> 
> 标签：apache, wampserver, laravel

所以，最近我一直在做一些项目，使用 Laravel 很棒，但我不知道如何正确设置 VirtualHost，因为每次我都只能访问我正在做的当前项目，其他链接给我错误。

```
<VirtualHost *:80>
    DocumentRoot /Users/JonSnow/Sites/MySite/public
    ServerName mysite.dev
</VirtualHost> 
```

我的 httpd.conf 最后有这个，如何正确更改它以允许我访问 localhost/ 和其他项目安装？

当前的：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot C:/Users/www
    ServerName localhost
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot C:/Users/game/public
    ServerName localhost/game
</VirtualHost> 
```

现在......我只想让 localhost 成为我的普通用户，只需将 localhost/game 指向公用文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:25:19.430

在您的 httpd.conf 文件中（您可以通过 Wamp 配置菜单访问）

```
NameVirtualHost 127.0.0.1

<VirtualHost 127.0.0.1>
    ServerName mysite.dev
    DocumentRoot "e:/www/mysite/public"
</VirtualHost>

<VirtualHost 127.0.0.1>
    ServerName gamesite.dev
    DocumentRoot "e:/www/gamesite/public"
</VirtualHost>

// repeat for each site you want to work on 
```

然后你还需要编辑一个名为“ `hosts`”的文件（没有扩展名——只有“ `hosts`”）——你可以在`C:\Windows\System32\drivers\etc`. 在那个文件里面，它可能是空的，或者你可能已经有一些东西在里面。只需将这两行放在文件的最顶部（即第 1 行）

```
127.0.0.1 mysite.dev
127.0.0.1 gamesite.dev

// repeat for each site you are working on 
```

现在保存，重新启动计算机，然后它就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:44:36.550

您应该能够通过以下方式实现：

```
<VirtualHost *:80>
   DocumentRoot /Users/JonSnow/Sites
   ServerName localhost
</VirtualHost> 
```

只要在您的文件`NameVirtualHost *:80`中的某处添加。`httpd.conf`

无论如何，这对我有用:)

# c# - 如何在 C# 中找到最新版本的文件名

> ID：14605333
> 
> 赞同：5
> 
> 时间：2013-01-30T13:34:54.317
> 
> 标签：c#, regex, file-io, directory

我有一个充满 dwg 文件的文件夹，所以我只需要找到文件的最新版本，或者如果文件没有版本，则将其复制到目录中。例如这里有三个文件：

> ABBIE 08-10 #6-09H4 最终 06-12-2012.dwg
> ABBIE 08-10 #6-09H4 最终 06-12-2012_1.dwg
> ABBIE 08-10 #6-09H4 最终 06-12-2012_2.dwg

请注意，不同之处在于一个文件有一个`_1`，另一个文件有一个，`_2`所以这里的最新文件是`_2`. 我需要保留最新的文件并将其复制到目录中。有些文件不会有不同的版本，因此可以复制这些文件。我不能专注于文件的创建日期或修改日期，因为在许多情况下它们是相同的，所以我所要做的就是文件名本身。我确信有比我将在下面发布的更有效的方法来做到这一点。

```
DirectoryInfo myDir = new DirectoryInfo(@"H:\Temp\Test");
var Files = myDir.GetFiles("*.dwg");

string[] fileList = Directory.GetFiles(@"H:\Temp\Test", "*FINAL*", SearchOption.AllDirectories);

ArrayList list = new ArrayList();
ArrayList WithUnderscores = new ArrayList();
string nameNOunderscores = "";

for (int i = 0; i < fileList.Length; i++)
{
    //Try to get just the filename..
    string filename = fileList[i].Split('.')[0];
    int position = filename.LastIndexOf('\\');
    filename = filename.Substring(position + 1);
    filename = filename.Split('_')[0];

    foreach (FileInfo allfiles in Files)
    {
        var withoutunderscore = allfiles.Name.Split('_')[0];
        withoutunderscore = withoutunderscore.Split('.')[0];
        if (withoutunderscore.Equals(filename))
        {
            nameNOunderscores = filename;
            list.Add(allfiles.Name);
        }
    }

    //If there is a number after the _ then capture it in an ArrayList
    if (list.Count > 0)
    {
        foreach (string nam in list)
        {
            if (nam.Contains("_"))
            {
                //need regex to grab numeric value after _
                var match = new Regex("_(?<number>[0-9]+)").Match(nam);
                if (match.Success)
                {
                    var value = match.Groups["number"].Value;
                    var number = Int32.Parse(value);

                    WithUnderscores.Add(number);
                }
            }
        }

        int removedcount = 0;

        //Whats the max value?
        if (WithUnderscores.Count > 0)
        {
            var maxval = GetMaxValue(WithUnderscores);
            Int32 intmax = Convert.ToInt32(maxval);

            foreach (FileInfo deletefile in Files)
            {
                string shorten = deletefile.Name.Split('.')[0];
                shorten = shorten.Split('_')[0];
                if (shorten == nameNOunderscores && deletefile.Name != nameNOunderscores + "_" + intmax + ".dwg")  
                {
                    //Keep track of count of Files that are no good to us so we can iterate to next set of files
                    removedcount = removedcount + 1;

                }
                else
                {
                    //Copy the "Good" file to a seperate directory
                    File.Copy(@"H:\Temp\Test\" + deletefile.Name, @"H:\Temp\AllFinals\" + deletefile.Name, true); 
                }
            }

            WithUnderscores.Clear();
            list.Clear();
        }

        i = i + removedcount;
    }
    else
    {
        //This File had no versions so it is good to be copied to the "Good" directory
        File.Copy(@"H:\Temp\SH_Plats\" + filename, @"H:\Temp\AllFinals" + filename, true);
        i = i + 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:07:06.617

您可以使用`Enumerable.GroupBy` ~~应该工作~~的这个 Linq 查询（现已测试）：

```
var allFiles = Directory.EnumerateFiles(sourceDir, "*.dwg")
    .Select(path => new
    {
        Path = path,
        FileName = Path.GetFileName(path),
        FileNameWithoutExtension = Path.GetFileNameWithoutExtension(path),
        VersionStartIndex = Path.GetFileNameWithoutExtension(path).LastIndexOf('_')
    })
    .Select(x => new
    {
        x.Path,
        x.FileName,
        IsVersionFile = x.VersionStartIndex != -1,
        Version = x.VersionStartIndex == -1 ? new Nullable<int>()
            : x.FileNameWithoutExtension.Substring(x.VersionStartIndex + 1).TryGetInt(),
        NameWithoutVersion = x.VersionStartIndex == -1 ? x.FileName
            : x.FileName.Substring(0, x.VersionStartIndex)
    })
    .OrderByDescending(x => x.Version)
    .GroupBy(x => x.NameWithoutVersion)
    .Select(g => g.First());

foreach (var file in allFiles)
{
    string oldPath = Path.Combine(sourceDir, file.FileName);
    string newPath;
    if (file.IsVersionFile && file.Version.HasValue)
        newPath = Path.Combine(versionPath, file.FileName);
    else
        newPath = Path.Combine(noVersionPath, file.FileName);
    File.Copy(oldPath, newPath, true);
} 
```

这是我用来确定 a`string`是否可解析为的扩展方法`int`：

```
public static int? TryGetInt(this string item)
{
    int i;
    bool success = int.TryParse(item, out i);
    return success ? (int?)i : (int?)null;
} 
```

请注意，我没有使用正则表达式，而是仅使用字符串方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:25:55.173

我已经制作了一个基于正则表达式的解决方案，同时显然来晚了。

`(?<fileName>[A-Za-z0-9-# ]*)_?(?<version>[0-9]+)?\.dwg`

这个正则表达式将识别文件名和版本并将它们分成组，一个非常简单的foreach循环来获取字典中的最新文件（因为我很懒）然后你只需要在你访问之前再次将文件名重新组合在一起他们。

`var fileName = file.Key + "_" + file.Value + ".dwg"`

**完整代码**

```
var files = new[] {
    "ABBIE 08-10 #6-09H4 FINAL 06-12-2012.dwg",
    "ABBIE 08-10 #6-09H4 FINAL 06-12-2012_1.dwg",
    "ABBIE 08-10 #6-09H4 FINAL 06-12-2012_2.dwg",
    "Second File.dwg",
    "Second File_1.dwg",
    "Third File.dwg"
};

// regex to split fileName from version
var r = new Regex( @"(?<fileName>[A-Za-z0-9-# ]*)_?(?<version>[0-9]+)?\.dwg" );
var latestFiles = new Dictionary<string, int>();

foreach (var f in files)
{
    var parsedFileName = r.Match( f );
    var fileName = parsedFileName.Groups["fileName"].Value; 
    var version = parsedFileName.Groups["version"].Success ? int.Parse( parsedFileName.Groups["version"].Value ) : 0;

    if( latestFiles.ContainsKey( fileName ) && version > latestFiles[fileName] )
    {
        // replace if this file has a newer version
        latestFiles[fileName] = version;
    }
    else
    {
        // add all newly found filenames
        latestFiles.Add( fileName, version );
    }
}

// open all most recent files
foreach (var file in latestFiles)
{
    var fileToCopy = File.Open( file.Key + "_" + file.Value + ".dwg" );
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:54:38.113

**试试这个**

```
var files = new My.Computer().FileSystem.GetFiles(@"c:\to\the\sample\directory", Microsoft.VisualBasic.FileIO.SearchOption.SearchAllSubDirectories, "*.dwg");
foreach (String f in files) {
    Console.WriteLine(f);
}; 
```

***注意：***`Microsoft.VisualBasic`在类的开头添加对并使用以下行的引用

```
using My = Microsoft.VisualBasic.Devices; 
```

**更新**

**工作样本[测试]：**

```
String dPath=@"C:\to\the\sample\directory";
var xfiles = new My.Computer().FileSystem.GetFiles(dPath, Microsoft.VisualBasic.FileIO.SearchOption.SearchAllSubDirectories, "*.dwg").Where(c => Regex.IsMatch(c,@"\d{3,}\.dwg$"));
XElement filez = new XElement("filez");
foreach (String f in xfiles)
{
    var yfiles = new My.Computer().FileSystem.GetFiles(dPath, Microsoft.VisualBasic.FileIO.SearchOption.SearchAllSubDirectories, string.Format("{0}*.dwg",System.IO.Path.GetFileNameWithoutExtension(f))).Where(c => Regex.IsMatch(c, @"_\d+\.dwg$"));
    if (yfiles.Count() > 0)
    {
        filez.Add(new XElement("file", yfiles.Last()));            
    }
    else {
        filez.Add(new XElement("file", f));
    };
};
Console.Write(filez); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:32:01.583

你可以通过字符串排序来做到这一点吗？我在这里看到的唯一棘手的部分是将文件名转换为可排序的格式。只需将字符串从 dd-mm-yyyy 替换为 yyyymmdd。然后，对列表进行排序并取出最后一条记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T15:07:41.780

这就是你想要考虑的 fileList 包含所有文件名

```
List<string> latestFiles=new List<string>();
foreach(var groups in fileList.GroupBy(x=>Regex.Replace(x,@"(_\d+\.dwg$|\.dwg$)","")))
    {
        latestFiles.Add(groups.OrderBy(s=>Regex.Match(s,@"\d+(?=\.dwg$)").Value==""?0:int.Parse(Regex.Match(s,@"\d+(?=\.dwg$)").Value)).Last());
    } 
```

latestFiles 有所有新文件的列表..

如果 fileList 更大，请使用`Threading`或`PLinq`

# ruby-on-rails - 字符编码转换

> ID：14605334
> 
> 赞同：0
> 
> 时间：2013-01-30T13:34:55.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含瑞典语字符的字符串，并希望将其转换为基本英语。

```
name = "LänödmåtnÖng ÅjädårbÄn" 
```

这些字符应按如下方式转换：

*   `Å`采用`A`
*   `å`采用`a`
*   `Ä`采用`A`
*   `ä`采用`a`
*   `Ö`采用`O`
*   `ö`采用`o`

有没有简单的方法来做到这一点？如果我尝试：

```
ascii_to_string = name.unpack("U*").map{|s|s.chr}.join 
```

它`L\xE4n\xF6dm\xE5tn\xD6ng \xC5j\xE4d\xE5rb\xC4n`以 ASCII 形式返回，但我想将其转换为英文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:21:59.763

使用 OP 的转换表作为`tr`方法的输入：

```
#encoding: utf-8
name = "LänödmåtnÖng ÅjädårbÄn" 
p name.tr("ÅåÄäÖö", "AaAaOo") #=> "LanodmatnOng AjadarbAn" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:42:13.183

试试这个：

```
string.mb_chars.normalize(:kd).gsub(/[^\x00-\x7F]/n,'').downcase.to_s 
```

正如在[这篇文章中发现的那样。](https://makandracards.com/makandra/1055-strip-accents-from-utf8-strings-in-ruby)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:54:24.930

您已经得到了不错的答案，但是有一种更容易记住的方法（没有神奇的正则表达式）：

```
name.parameterize 
```

它将空格更改为破折号，因此您需要以某种方式处理它，例如通过分别处理每个单词：

```
name.split.map { |s| s.parameterize }.join ' ' 
```

# c# - 正则表达式比较

> ID：14605335
> 
> 赞同：-4
> 
> 时间：2013-01-30T13:34:57.743
> 
> 标签：c#, regex, c#-4.0

我想检查我的字符串变量是否包含特定的正则表达式模式

> xxx-xx-x

（x 是数值）使用 c#。如果它包含，那么我需要返回 true 或 false。

谁能帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:36:01.873

使用返回的值`Regex.IsMatch()`。

```
Regex regex = new Regex("[0-9]{3}-[0-9]{2}-[0-9]");

bool containsPattern = regex.IsMatch(stringToVerify); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:23:38.933

这是您正在寻找的正则表达式

```
\b\d{3}-\d{2}-\d\b 
```

`\b`是一个边界..如果你不使用它，你也会匹配`111-22-345`或者`111-22-3-33`我猜你不想匹配

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-30T13:44:36.283

```
using System.Text.RegularExpressions;

public static bool ControlRegex(string input)
{
   Match match = Regex.Match(input, @"([A-Za-z0-9\-]+)",RegexOptions.IgnoreCase);

   if (match.Success)
   {
     return true;
   }
} 
```

你可以尝试这样的事情......你必须把正确的正则表达式放在Regex.Match的secend参数......

您可以使用正则表达式程序找到正确的正则表达式。例如“RegEx TestBed”，您可以从这里下载；[http://regextestbed.codeplex.com/releases/view/60833](http://regextestbed.codeplex.com/releases/view/60833)使用这个程序，你把你的文本放在文本区域，在模式区域你尝试找到正确的正则表达式。在下面的列表区域中，程序会根据您的正则表达式向您显示匹配项，因此您可以尝试找到正确的正则表达式...

# c# - 根据 WPF 中的选定选项更改内容

> ID：14605339
> 
> 赞同：0
> 
> 时间：2013-01-30T13:35:12.387
> 
> 标签：c#, .net, wpf, viewmodel, contentpresenter

我有兴趣创建一个显示一些按钮并根据所选按钮更改视口的应用程序。我的应用程序中的视口是 a `ContentControl`，我想在单击按钮时更改其内容。但是，我相信有一个更好的方法，也许通过注入我想要呈现给的每个视图的 ViewModel`ContentControl`并使用它们来设置样式`DataTemplates`（因为我想避免有一个包含许多控件的网格，并且只`Visibility`在我想的时候设置它们的属性显示特定视图）。哪种方法对您来说更好？您对此有不同的方法吗？

视图应该与此类似： ![通用应用程序UI设计](../Images/5b567e08585615e43fb082091a0e80de.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:03:57.643

通常在窗口后面有一个 ViewModel，其中包含：

*   `ObservableCollection<IViewModel> AvailableViewModels`
*   `IViewModel SelectedViewModel`
*   `ICommand SetCurrentViewModelCommand`

我显示`AvailableViewModels`using a `ItemsControl`，它`ItemTemplate`设置为 a `Button`。`Button.Command`绑定到`SetCurrentViewModelCommand`，并将`AvailableViewModels`集合中的当前数据项通过`CommandParameter`

为了显示内容区域，我使用了一个`ContentControl`with `ContentControl.Content`bound to `SelectedViewModel`，并且`DataTemplates`习惯于告诉 WPF 如何渲染每个 ViewModel。

最终结果是我的 XAML 看起来像这样：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type local:ViewModelA}">
        <local:ViewA />
    </DataTemplate>
    <DataTemplate DataType="{x:Type local:ViewModelB}">
        <local:ViewB />
    </DataTemplate>
</Window.Resources>

<DockPanel>
    <Border DockPanel.Dock="Left" BorderBrush="Black" BorderThickness="0,0,1,0">
        <ItemsControl ItemsSource="{Binding AvailableViewModels}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Content="{Binding Name}"
                            Command="{Binding DataContext.SetCurrentViewModelCommand, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"
                            CommandParameter="{Binding }"
                            Margin="2,5"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Border>

    <ContentControl Content="{Binding SelectedViewModel}" />
</DockPanel> 
```

[您可以在我的博客上](http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/)查看用于此类设置的完整代码示例

# ruby-on-rails - 在 PostgreSQL 数据库中使用 Sequel gem 插入验证约束

> ID：14605343
> 
> 赞同：0
> 
> 时间：2013-01-30T13:35:19.470
> 
> 标签：ruby-on-rails, ruby, postgresql, rake, sequel

我是 Sequel 的新手，第一次使用它。

我创建了一个表：

```
# connect to an in-memory database
DB = Sequel.connect('postgres://ritesh:newpassword@localhost')

# create an items table
DB.create_table :items do
  primary_key :id
  String :first_name
  String :last_name
  String :email
  String : zipcode
  String : company_name
  String : google
  String :skype
  String :phone 
  String :about
  String :linkedin_profile_url
end

end 
```

我想在该`email`字段上放置一个正则表达式约束：

```
VALID EMAIL REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i 
```

当我们使用模型时，我必须在其他列上进行类似的验证。

我发现“[模型验证](http://sequel.jeremyevans.net/rdoc/files/doc/validations_rdoc.html)”用于添加验证，但我正在创建一个表。

如何在`create_table`方法中进行验证？如果我必须将此表用于模型，我如何从表转换为模型，或者使用模型？

我只使用葡萄，没有使用 Rails。这是一个简单的 Rake 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:56:43.400

您可以在模型中放入如下内容：

```
class Model < Sequel::Model
  plugin :validation_helpers

  def validate
    validates_format /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i, :email
  end
end 
```

# label - 标题和轴标签

> ID：14605348
> 
> 赞同：4
> 
> 时间：2013-01-30T13:35:35.943
> 
> 标签：label, d3.js, axis, title

我已经成功地为 X 轴和 Y 轴创建了标签。我还成功地为图表添加了标题。我的问题是，如果我修改图表的边距，标签位置就会混乱。

**我更改图表边距的片段：**

```
 var margin = {top: 60, right: 60, bottom: 60, left:120} 
```

**我在哪里创建标签的片段：**

```
 //Create Title 
    svg.append("text")
    .attr("x", w / 2 )
    .attr("y", 0)
    .style("text-anchor", "middle")
    .text("Title of Diagram");

    //Create X axis label   
    svg.append("text")
    .attr("x", w / 2 )
    .attr("y",  h + margin.bottom)
    .style("text-anchor", "middle")
    .text("State");

    //Create Y axis label
    svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 0-margin.left)
    .attr("x",0 - (h / 2))
    .attr("dy", "1em")
    .style("text-anchor", "middle")
    .text("Revenue"); 
```

**JsFiddle：http:**
[//jsfiddle.net/u63T9/](http://jsfiddle.net/u63T9/)

**这是我愿意接受的另一种选择：**
我基本上是在利用尺度来找到基本坐标。然后我添加或采取一点，直到我对位置感到满意。这种方法实际上跟上了边距的变化。

```
 //Create title 
    svg.append("text")
    .attr("x", w / 2 )
    .attr("y",  yScale(d3.max(input, function(d) { return d.CustomerCount; })) - 20 )
    .style("text-anchor", "middle")
    .text("Title of Graph");

    //Create X axis label   
    svg.append("text")
    .attr("x", w / 2 )
    .attr("y",  yScale(0) + 40 )
    .style("text-anchor", "middle")
    .text("State");

    //Create Y axis label
    svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", xScale(0) - 80 )
    .attr("x",0 - (h / 2))
    .attr("dy", "1em")
    .style("text-anchor", "middle")
    .text("Revenue"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T22:54:41.960

我使用一个简单的函数来测量文本，然后根据它计算边距。

```
// create a dummy element, apply the appropriate classes,
// and then measure the element
function measure(text, classname) {
  if(!text || text.length === 0) return {height: 0, width: 0};

  var container = d3.select('body').append('svg').attr('class', classname);
  container.append('text').attr({x: -1000, y: -1000}).text(text);

  var bbox = container.node().getBBox();
  container.remove();

  return {height: bbox.height, width: bbox.width};
} 
```

现在你可以使用

```
var titleSize = measure('my title', 'chart title'),
    margin.top = titleSize.height + 20; // add whatever padding you want 
```

[我在http://jsfiddle.net/uzddx/2/](http://jsfiddle.net/uzddx/2/)更新了您的示例。当您修改标题的字体大小时，您可以看到上边距调整大小。你可以对左边距做类似的事情，这样你的标签就不会离 y 轴那么远。

# design-patterns - 在访问者模式中访问者遍历对象结构期间累积状态的好处以及访问者如何实现这一点？

> ID：14605350
> 
> 赞同：3
> 
> 时间：2013-01-30T13:35:39.273
> 
> 标签：design-patterns, visitor-pattern

来自[Gof 关于设计模式的书的](http://en.wikipedia.org/wiki/Design_Patterns)***访客模式***章节：

> **积累状态**。访问者可以在访问对象结构中的每个元素时累积状态。没有访问者，此状态将作为额外参数传递给执行遍历的操作，或者它们可能显示为全局变量。

作者在这里累积状态是什么意思，*累积状态*有什么帮助？请举一个实际的例子，在遍历过程中积累状态是有帮助的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:44:46.247

您可以将字段添加到访问者类并在那里存储状态。

**例子：**

```
class MyVisitor implements Visitor {

  private final List<Object> seenObjects = new ArrayList<Object>();

  void visitFoo(Foo f) {
    seenObjects.add(f);
  }

  void visitBar(Bar b) {
    seenObjects.add(b);
  }
} 
```

我不会说在访问者中存储状态“有帮助”。要么你需要状态来执行操作，那么你需要把它放在那里，或者你不需要，那么请不要存储它。

如果没有访问者，代码通常如下所示：

```
class MyHandler {

  static void handle(Object o, List<Object> seenObjects) {
    seenObjects.add(o);
    if (o instanceof Foo) {
      // ...
    } else if (o instanceof Bar) {
      // ...
    }
    // possibly a recursive call to handle() somewhere, passing the seenObjects list
  }
} 
```

另一种方法是将状态存储在类的字段中，就像在访问者案例中一样。这在这里也是可能的，但是，我会说在不使用访问者模式时将状态放入字段中不太常见（因为它不是必需的，并且尝试避免字段中的可变状态通常是个好主意）。

# java - 1970 日期选择器日期

> ID：14605353
> 
> 赞同：0
> 
> 时间：2013-01-30T13:35:43.400
> 
> 标签：java, android, datepicker

我正在尝试使用 OnCreate 方法存储在我的数据库中的检索到的日期值来设置我的应用程序的日期选择器。一切都很好，直到我自己用年、月和日值设置日期选择器。目前，日期选择器始终设置为“1970 年 1 月 1 日”。希望有人可以在这里为我指明正确的方向。

如图所示，我将字符串解析为 Date 对象，然后检索单独的年、月和日值。它们存储为整数，然后使用 .init 方法设置我的日期选择器。

到目前为止，这是我的代码：

```
 DBHandlerApp dateToEdit= new DBHandlerApp(this, null, null);
        dateToEdit.open();
        String returnedDate = dateToEdit.getTime(passedID);

         SimpleDateFormat newFormatDate = new SimpleDateFormat("dd-MMM-yyyy");
         try 
        {
        dateToEditApp = newFormat.parse(returnedDate);
        } catch (ParseException e)
        {

            e.printStackTrace();
        }     

         Calendar calDate = Calendar.getInstance();

         calDate.setTime(dateToEditApp);

         int year = calDate.get(Calendar.YEAR);
         int monthOfYear = calDate.get(Calendar.MONTH);
         int dayOfMonth = calDate.get(Calendar.DAY_OF_MONTH);

         editDatePicker.init(year, monthOfYear, dayOfMonth, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:45:27.253

您的代码可能存在一个小问题，我认为您在尝试解析它时将 newFormatDate 命名错误，这将转到 dateToEditApp 的默认值（即 1-1-1970 日期）

不应该

```
dateToEditApp = newFormat.parse(returnedDate); 
```

是

```
dateToEditApp = newFormatDate.parse(returnedDate); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:43:51.057

日期“1970 年 1 月 1 日”是默认值，因为它从“1970 年 1 月 1 日”到今天开始计算毫秒数。所以我想当你从数据库中获取日期或解析它时，出了点问题。您可以检查解析是否引发异常？

# ssl - NGINX HTTPS 超时

> ID：14605354
> 
> 赞同：2
> 
> 时间：2013-01-30T13:35:44.837
> 
> 标签：ssl, https, nginx, timeout, debian

我的问题是，如果我重新启动 NGINX，HTTP 工作正常，但 HTTPS 不可用。我收到连接超时。我检查了我是否可以在本地连接并检查了证书。这也很好。我没有防火墙，但似乎端口或曾经被阻止的东西。请帮忙...

```
server {
    server_name help.XXXX.de;
    listen 80;
    listen 443 default ssl;

    ssl on;
    ssl_certificate      /etc/ssl/localcerts/0001_MAILcert.pem;
    ssl_certificate_key  /etc/ssl/localcerts/0001_MAILcert.key;
    ssl_ciphers               SSLv3+HIGH:RC4+MEDIUM:!aNULL:!eNULL:!3DES:!MD5:@STRENGTH;
    ssl_prefer_server_ciphers on;
    ssl_protocols             TLSv1;

    access_log /var/www/XXXX.de/help.XXXX.de/logs/access.help.log main;
    index index.html index.htm index.php;
    root /var/www/XXXX.de/help.XXXX.de/htdocs;

    location / {
        try_files $uri $uri/ /index.php;
}

location ~ \.php$ {
    try_files $uri @rewrite;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
    }
} 
```

我正在使用带有 NGINX 1.2.6 和 PHP-FPM 的 Debian

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:42:11.017

您的第二个位置块需要在主服务器块内，否则您的 ssl 配置将不适用于它。

您的配置适用于 HTTP 的原因是，listen 指令默认为`*:80`，并且它被应用于第二个位置块，因为它没有外部服务器块配置。

可能不相关，但该`try_files $uri @rewrite;`行看起来错误，因为您的配置中没有命名位置，称为`location @rewrite`，但这不应该导致 https 不可用。

此外，该`ssl`指令不是必需的，因为该`listen`指令执行此功能。

你可以试试这个：

```
server {
    server_name help.XXXX.de;
    listen 80;
    listen 443 default ssl;

    ssl_certificate      /etc/ssl/localcerts/0001_MAILcert.pem;
    ssl_certificate_key  /etc/ssl/localcerts/0001_MAILcert.key;
    ssl_ciphers               SSLv3+HIGH:RC4+MEDIUM:!aNULL:!eNULL:!3DES:!MD5:@STRENGTH;
    ssl_prefer_server_ciphers on;
    ssl_protocols             TLSv1;

    access_log /var/www/XXXX.de/help.XXXX.de/logs/access.help.log main;
    index index.html index.htm index.php;
    root /var/www/XXXX.de/help.XXXX.de/htdocs;

    location / {
        try_files $uri $uri/ /index.php;
    }

    location ~ \.php$ {
        try_files $uri @rewrite;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
} 
```

如果连接仍然有问题，请检查 Nginx 是否使用 SSL 模块编译：

```
nginx -V 
```

如果输出不包含以下行，则需要重新编译：

```
--with-http_ssl_module 
```

# java - eclipse中的错误：未解决的编译

> ID：14605355
> 
> 赞同：1
> 
> 时间：2013-01-30T13:35:48.160
> 
> 标签：java, eclipse

我有这个代码

```
public class watermark {

    public static void main(String[] args) {
        wmmain m = new wmmain();
        m.setSize(800, 500);
        m.setVisible(true);
    }

    class wmmain extends JFrame /* MAIN WINDOW */
    {
        JMenuBar jmb;
        // ......
    }
} 
```

它在命令提示符下工作正常，但是当我尝试在 eclipse 中运行代码时，它给了我以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
No enclosing instance of type watermark is accessible. Must qualify the allocation with an enclosing instance of type watermark (e.g. x.new A() where x is an instance of watermark).

at watermark.main(watermark.java:20) 
```

我该怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:37:11.523

从[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)：

> 要实例化内部类，您必须先实例化外部类。

**句法：**

```
OuterClass.InnerClass innerObject = outerObject.new InnerClass(); 
```

您需要外部类实例来创建内部类的实例。

```
wmmain m=new WaterMark().new wmmain(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:49:06.083

我认为你不能在它自己的静态方法中调用 innerClass 。

```
import javax.swing.JFrame;
public class testFrame {
public static void main(String[] args) {
    // TODO Auto-generated method stub

}
private void getMe(){
    wmmain m = new wmmain();
    m.setSize(800,500);
    m.setVisible(true);
}
class wmmain extends JFrame /* MAIN WINDOW */
{
    public wmmain(){

    }
     }
     } 
```

试试这个 。它会起作用的。或者你可以使用 PermGenError 的答案</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:53:12.053

如果`wmmain`该类不使用成员变量`watermark`并且您想隐藏窗口类，那么您也可以声明`wmmain`为私有静态内部类：

```
public class watermark {
    public static void main(String[] args) {
        wmmain m =  new wmmain();
        m.setSize(800, 500);
        m.setVisible(true);
    }

    private static class wmmain extends JFrame {
        JMenuBar jmb;
        // ......
    }
} 
```

# android - 从服务运行的线程中获取值

> ID：14605356
> 
> 赞同：0
> 
> 时间：2013-01-30T13:35:52.667
> 
> 标签：android, multithreading

我在一个线程下执行网络任务。实际上我正在加载一个网页，该网页返回一个 xml 响应，我从中提取了一些值。我想返回服务的那些值。但我做不到。

线程类包com.example.googledrivetest；

```
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

import android.os.Environment;
import android.util.Log;

public class CellThread extends Thread{
    String Latitude,Longitude;
    final String TAG="CellThread";
    public CellThread(){
}

public void run() {
    try {
        URL url = new URL("www.example.com");
        //create the new connection
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        urlConnection.setRequestMethod("GET");
        urlConnection.connect();

        File SDCardRoot = Environment.getExternalStorageDirectory();
        File file = new File(SDCardRoot,"somefile.ext");
        if(!file.exists()) file.createNewFile();

        Log.v(TAG,urlConnection.getResponseMessage());
        InputStream inputStream = urlConnection.getInputStream();   

        /*********************************************************************/
        StringBuilder inputStringBuilder = new StringBuilder();
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
        String line = bufferedReader.readLine();
        while(line != null){
            inputStringBuilder.append(line);inputStringBuilder.append('\n');
            line = bufferedReader.readLine();
        }
        Log.v(TAG,inputStringBuilder.toString());

        /*********************************************************************/  
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(url.openStream()));
        doc.getDocumentElement().normalize();

        NodeList nodeList = doc.getElementsByTagName("rsp");

        /** Assign textview array lenght by arraylist size */

        for (int i = 0; i < nodeList.getLength(); i++) {

        Node node = nodeList.item(i);

        Element fstElmnt = (Element) node;

        NodeList cellList = fstElmnt.getElementsByTagName("cell");
        Element cellElement = (Element) cellList.item(0);
        cellList = cellElement.getChildNodes();
        this.Latitude=cellElement.getAttribute("lat");
        this.Longitude=cellElement.getAttribute("lon");
        Log.v(TAG,"lat:"+Latitude+"   LON:"+Longitude);
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } //you can write here any link

}

public String getLat() {
    return Latitude;
}

public String getLng() {
    return Longitude;
}

} 
```

服务类中的功能

```
public synchronized void Getdata(){
     final String  Lat;
    String Lng;

     CellThread t = new CellThread();
     t.start();
     try {
        synchronized (t) {
             t.wait();
        }
         Log.v(TAG," LAT:"+t.getLat()+"  lon"+t.getLng());
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

应用程序被挂起并给出 ANR 消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:44:47.717

您不能`wait()`在您的 UIThread 中执行 a，这与在 UIThread 中启动任务相同...尝试显示 a`ProgressDialog`而不是并在其他线程完成后`wait()`关闭它。`ProgressDialog`

# java - 2 月 java.util.Calendar 的一个奇怪行为

> ID：14605360
> 
> 赞同：5
> 
> 时间：2013-01-30T13:36:25.023
> 
> 标签：java, calendar

我遇到了来自 java.util.Calendar 的奇怪行为：

```
import static org.junit.Assert.*;
import org.junit.Test;

import java.util.Calendar;

public class Tester1 {
    @Test
    public void test_monthOfDate() {
        assertEquals(1, monthOfDate(2013, 1, 30)); // OK
        assertEquals(1, monthOfDate(2013, 1, 31)); // OK

        // Start of February
        assertEquals(2, monthOfDate(2013, 2, 1));  // FAIL
        assertEquals(2, monthOfDate(2013, 2, 28)); // FAIL
        // to the end of it

        // and after that it is okay also
        assertEquals(3, monthOfDate(2013, 3, 1));  // OK
    }

    public int monthOfDate(int year, int month, int day) {
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.YEAR, year);
        cal.set(Calendar.MONTH, month - 1);

        // just a simple get! but seems it is very important
        cal.get(Calendar.MONTH);
        //

        cal.set(Calendar.DAY_OF_MONTH, day);

        return cal.get(Calendar.MONTH) + 1;
    }
} 
```

我想知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T13:43:26.093

问题是您从 2013 年 1 月 30 日的日历开始。

然后，您将年份设置为 2013 年 - 这不是问题。

然后，您将月份设置为 1（即二月）。你期望在这里发生什么？实际发生的是它会记住它需要将月份设置为 1，但*不会*重新计算实际时间值。根据[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)（强调我的） ，时间值*将*在您调用时重新计算：`get`

> set(f, value) 将日历字段 f 更改为值。此外，它设置一个内部成员变量来指示日历字段 f 已更改。尽管日历字段 f 立即更改，但在下一次调用 get()、getTime()、getTimeInMillis()、add() 或 roll() 之前，不会重新计算日历的时间值（以毫秒为单位）。因此，多次调用 set() 不会触发多次不必要的计算。作为使用 set() 更改日历字段的结果，其他日历字段也可能更改，具体取决于日历字段、日历字段值和日历系统。**此外，在重新计算日历字段后，get(f) 不一定会返回调用 set 方法设置的值。**具体由具体的日历类决定。

当您尝试将“1 月 30 日”更改为“2 月 30 日”并强制进行计算时，*实际*发生的情况是您在 3 月 2 日结束了我的盒子 - 但它可能在您的实现上有所不同。

最好的修复是：

*   改为使用[`Calendar.set(year, month, date)`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)以避免此排序问题
*   首先使用[Joda Time](http://joda-time.sf.net)作为更明智的 API。

# c++ - 静态链接仅提升库 G++

> ID：14605362
> 
> 赞同：5
> 
> 时间：2013-01-30T13:36:44.280
> 
> 标签：c++, linux, g++, static-linking

> **可能重复：**
> [我可以在链接时混合使用静态库和共享对象库吗？](https://stackoverflow.com/questions/2954387/can-i-mix-static-and-shared-object-libraries-when-linking)

我想编译我的应用程序，只静态链接 boost_system 库。其他（glibc 等）应动态链接。我该怎么做？

我的动态编译命令：

```
g++  -o newserver  server.cpp ... -lboost_system -std=c++0x 
```

静态编译命令：

```
g++ -static  -o newserver  server.cpp ... -pthread -lboost_system -std=c++0x 
```

但是这个命令是静态链接的！应用程序的重量增加了 2mb！

你能告诉我什么命令只静态编译boost lib吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T13:39:35.353

替换`-lboost_system`为`-Wl,-Bstatic -lboost_system -Wl,-Bdynamic`。该`-Wl`选项按照它在命令行中出现的顺序将它之后的东西发送到链接器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:43:45.583

有两种解决方案。您可以在命令行中指定`-Bstatic`， `-Bdynamic`每个都会影响它后面的所有库。或者，您可以将要静态链接的库的静态版本安排在包含动态版本的目录之前搜索的目录中。这使您可以做出某种全局决策：您创建一次目录，并且`-L`在一般之前为它 执行的所有用户都`-L`将使用静态版本。

在实践中，我想不出你想要静态链接 Boost 库的情况，所以最简单的解决方案可能只是删除`.so`文件。g++ 唯一一次做出决定（并考虑`-Bstatic` and `-Bdynamic`）是它是否在同一目录中找到两者。它以给定的顺序搜索目录，当它找到具有库的静态或动态版本的目录时，它会停止。如果只存在一个版本，则无论如何都会使用该版本。

# php - 从数据库导入的链接以 UTF8 截断

> ID：14605376
> 
> 赞同：0
> 
> 时间：2013-01-30T13:37:23.337
> 
> 标签：php, database, mysqli

我将数据作为字符串插入到我的数据库中。链接列是 latin1_swedish_ci。我尝试将其更改为 UTF8_swedish_ci （没有帮助）。我正在插入一个链接，它被完全插入。我将此链接传递给一个 php 文件，该文件是一个弹出窗口，然后将其输出到屏幕上。在输出过程中，如果任何链接包含 www.blahblah.com/somethingUTF8...数据库中的 UTF8 之后还有更多但屏幕上没有。抱歉，解释太长了……代码如下：

插入数据库：

```
$xml = simplexml_load_file($feed);
foreach ($xml->channel->item as $list){
$stmt = $mysqli->prepare ("INSERT INTO some_db (title, am_desc, link) VALUES (?,?,?)");
    $stmt->bind_param("sss", $title, $am_desc, $link);
    $title = $list->title;
    $am_desc = $list->description;
    $link = mysqli_real_escape_string($mysqli, $list->link);
    $stmt->execute();
    $stmt->close();} 
```

这就是我在将 mysqli_fetch_array 运行到链接后调用弹出窗口的方式：

```
<div style='position:relative; left:140px; padding-bottom:10px; 
width:100px'><a href='popup.php?link=".$link."' 
onClick='popup(this.href); return false;'>Click To Order</a></div> 
```

这就是我从弹出窗口中的链接获取代码的方式：

```
$link = $_GET['link']; 
```

它适用于没有 UTF8 的每个链接。我对此很陌生，解决方案可能很简单，但我几个小时都找不到它。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:22:57.147

尝试`$link = utf8_encode($_GET['link']);`.....应该可以解决问题；）

# java - java.lang.NullPointerException：在 com.mysql.jdbc.ResultSet.buildIndexMapping

> ID：14605381
> 
> 赞同：1
> 
> 时间：2013-01-30T13:37:40.110
> 
> 标签：java, exception, resultset, multiple-resultsets

我的代码中出现以下异常：

我经常收到这个错误。

```
java.lang.NullPointerException
    at com.mysql.jdbc.ResultSet.buildIndexMapping(ResultSet.java:616)
    at com.mysql.jdbc.ResultSet.findColumn(ResultSet.java:946)
    at com.mysql.jdbc.ResultSet.getString(ResultSet.java:5613)
    at com.sfmfm.database.DB_DashBoard.doGet(DB_DashBoard.java:275)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 
```

对于这个jsp数据没有正确加载。浏览器：火狐最新

如果我在 Eclipse 中运行它，它工作正常。

```
import java.util.Calendar;
import java.util.Date;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.sfmfm.properties.efmfm;

@WebServlet("/DB_DashBoard")
public class DB_DashBoard extends DB_Conn {
    /**
     * 
     */
    private static final long serialVersionUID = -5639866791158510975L;
    static Statement st,st1;

    public DB_DashBoard() throws Exception {
        super();
        st=con.createStatement();
        st1=con.createStatement();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        out=response.getWriter();
        String query=request.getParameter("query");

                // create a java calendar instance
                //Calendar calendar = Calendar.getInstance();

                // get a java.util.Date from the calendar instance.
                // this date will represent the current instant, or "now".

        Date now = new Date();

        if(query != null && query.contains("~"))
        {
            System.out.println("Web Browser Request--"+query);
            /*System.out.println("Today Date" +now);        */
            String browser_req[]=query.split("~");

                        if(browser_req[0].equals("Fetch_Pending_Fee"))
                        {

                                StringBuffer AllList = new StringBuffer();

                                try {
                                   ResultSet rs=st1.executeQuery("SELECT sm.first_name, sm.last_name, " +
                                        "cs.section_name, cs.class_name, sp.balance_amount, tm.first_name as tfname,tm.last_name as tlname, " +
                                        "sm.contact_no, ft.due_date FROM teacher_master tm,student_master sm," +
                                        " student_payment sp, class_section cs, fee_type ft, student_class sc WHERE" +
                                        " sp.balance_amount!=0 AND sp.student_id = sm.student_id AND" +
                                        " sm.student_id = sc.student_id AND sc.class_id = cs.class_id AND " +
                                        "cs.class_name = ft.class_name AND tm.teacher_id = cs.teacher_id AND ft.fee_type_id=sp.payment_id AND " +
                                        "TO_DAYS(ft.due_date) < TO_DAYS(NOW())");
                                   if (rs != null)
                                    {
                                         while(rs.next())

                                     {
                                         AllList.append("<PENDING>");
                                         AllList.append("<FIRSTNAME>" + rs.getString("first_name") + "</FIRSTNAME>");
                                         AllList.append("<LASTNAME>" + rs.getString("last_name") + "</LASTNAME>");
                                         AllList.append("<CONTACT>" + rs.getString("contact_no") + "</CONTACT>");
                                         AllList.append("<BALANCE>" + rs.getString("balance_amount") + "</BALANCE>");
                                         AllList.append("<DUE>" + rs.getString("due_date") + "</DUE>");
                                         AllList.append("<SECTION>" + rs.getString("section_name") + "</SECTION>");
                                         AllList.append("<CLASS>" + rs.getString("class_name") + "</CLASS>");
                                         AllList.append("<TFNAME>" + rs.getString("tfname") + "</TFNAME>");
                                         AllList.append("<TLNAME>" + rs.getString("tlname") + "</TLNAME>");
                                         AllList.append("<SECTION>" + rs.getString("section_name") + "</SECTION>");
                                         AllList.append("</PENDING>");

                                      }

                                        response.setContentType("text/xml");
                                        response.setHeader("Cache-Control", "no-cache");
                                        response.setHeader("Access-Control-Allow-Origin", "*");
                                        response.getWriter().println("<CATALOG>" + AllList.toString() +"</CATALOG>");

                                        System.out.println("Response sent="+"<CATALOG>" + AllList.toString()+ "</CATALOG>");
                            }

                                }
                            catch (Exception e)
                            {
                            System.out.println("S: Errorhai2");
                            e.printStackTrace();
                            }

                        }
                        else if(browser_req[0].equals("alert_past_info"))
                        {

                                StringBuffer AllList = new StringBuffer();

                                try {
                                   ResultSet rs=st.executeQuery("SELECT DAY(date_time) AS aday, MONTHNAME(date_time) AS amonth,TIME(date_time) AS atime,title,category,sub_category,details FROM  post_alert ");
                                   if (rs != null)
                                    {
                                          while(rs.next())
                                     {
                                         AllList.append("<PASTALERT>");
                                         AllList.append("<ADAY>" + rs.getInt("aday") + "</ADAY>");
                                         AllList.append("<AMONTH>" + rs.getString("amonth") + "</AMONTH>");
                                         AllList.append("<ATIME>" + rs.getInt("atime") + "</ATIME>");
                                         AllList.append("<ATITLE>" + rs.getString("title") + "</ATITLE>");
                                         AllList.append("<ACATA>" + rs.getString("category") + "</ACATA>");
                                         AllList.append("<ASUB>" + rs.getString("sub_category") + "</ASUB>");
                                         AllList.append("<ADESC>" + rs.getString("details") + "</ADESC>");
                                         AllList.append("</PASTALERT>");
                                      }
                                        response.setContentType("text/xml");
                                        response.setHeader("Cache-Control", "no-cache");
                                        response.setHeader("Access-Control-Allow-Origin", "*");
                                        response.getWriter().println("<CATALOG>" + AllList.toString() +"</CATALOG>");

                                        System.out.println("Response sent="+"<CATALOG>" + AllList.toString()+ "</CATALOG>");
                            }

                                }
                            catch (Exception e)
                            {
                            System.out.println("Error On Past Alert Viewing");
                            e.printStackTrace();
                            }

                        }

        }
}

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

} 
```

请提供清除此错误的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:47:21.900

您得到的错误来自 mysql 驱动程序。Eclipse 中的类路径可能会使用与部署应用程序后使用的驱动程序版本不同的驱动程序版本。它可能解释了为什么在 Eclipse 中运行时永远不会出现此错误。

所以我建议您检查您正在使用的驱动程序版本（并可能升级您在部署应用程序时使用的驱动程序版本）。

# sql - Oracle中如何计算所有组件的总重量

> ID：14605382
> 
> 赞同：0
> 
> 时间：2013-01-30T13:37:46.530
> 
> 标签：sql, oracle, oracle11g

我正在测试计算组件总重量的 SQL 查询。这些是表结构：

这里我存放了父组件和子组件的key：

```
-- CREATE TABLES SECTION -------------------------------------------------

-- TABLE COMPONENT

CREATE TABLE COMPONENT(
  COMPONENTID NUMBER NOT NULL,
  FKCOMPONENTID NUMBER,
  COMPONENTSTATSID INTEGER NOT NULL
)
/

-- ADD KEYS FOR TABLE COMPONENT

ALTER TABLE COMPONENT ADD CONSTRAINT COMPONENTID PRIMARY KEY (COMPONENTID) 
```

这里我存储了组件的 id 和权重：

```
CREATE TABLE COMPONENTSTATS(
  COMPONENTSTATSID INTEGER NOT NULL,
  COMPONENTTYPEID INTEGER NOT NULL,
  NAME VARCHAR2(200 ) NOT NULL,
  SERIALNUMBER VARCHAR2(150 ),
  WEIGHTKG NUMBER(14,4),
  SIZEWEIGHTMILIM NUMBER(14,4),
)
/

-- ADD KEYS FOR TABLE COMPONENTSTATS

ALTER TABLE COMPONENTSTATS ADD CONSTRAINT COMPONENTSTATSID PRIMARY KEY (COMPONENTSTATSID)
/ 
```

我想用组件创建树并使用 SQL 查询来计算所有组件的总重量。我做了这个 SQL 查询：

```
select c.componentid, nvl(cs.weightkg, 0) as componentkg,
 (case 
    when exists (select 1 from component where fkcomponentid = c.componentid) then
      (select sum(nvl(cs.weightkg, 0)) as kg FROM  component a, componentstats cs  where a.fkcomponentid is not null and cs.componentstatsid = a.componentstatsid and a.fkcomponentid = c.componentid)
 end) as childrenkg
 from component c, componentstats cs  
 where 
 cs.componentstatsid = c.componentstatsid
 and componentid = ?
 order by c.componentid; 
```

但由于某种原因，我无法得到正确的结果。我只得到第一个父母的第一个孩子。目标是使用 COMPONENT 表获取所有子项和子项并计算权重。

你能帮我找出我错在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:48:13.510

您可以在 Oracle 中使用分层查询来返回组件树，请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm)

```
select componentid,
         (select sum(cs.weightkg)
            from component c2, componentstats cs
           where c2.componentstatsid = cs.componentstatsid
               start with c2.componentid = c1.componentid
         connect by prior c2.componentid = c2.fkcomponentid) sum_weightkg
from component c1
start with c1.fkcomponentid is null
connect by prior componentid = fkcomponentid; 
```

[http://www.sqlfiddle.com/#!4/def0e/2](http://www.sqlfiddle.com/#!4/def0e/2)

# ember.js - EmberJs：如何使用 connectOutlet

> ID：14605384
> 
> 赞同：0
> 
> 时间：2013-01-30T13:37:51.400
> 
> 标签：ember.js, ember-router, ember-old-router, outlet

我创建了一个简单的测试，我在其中尝试使用 connectOutlet。但是，渲染的并不多。这是我的测试代码：http: [//jsfiddle.net/jeanluca/53dpA/](http://jsfiddle.net/jeanluca/53dpA/)

只是总结应用程序。我认为问题出在以下代码中

```
App.Router.map(function(match) {
    match('/').to('index');
});     

App.IndexRoute = Em.Route.extend({
    connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('sidebar', 'navigation');
        router.get('applicationController').connectOutlet('content');
    }       
}); 
```

任何建议这段代码有什么问题？

此外，在我在网上找到的几乎所有示例代码中，我看到 App.Router 已定义

```
App.Router = Em.Router.extend({
        enableLogging: true,

        root: Em.Route.extend({

            index: Em.Route.extend({
                route: '/',
                connectOutlets: function(router) {   
    .... etc .... 
```

因为 ember-latest App.Router 已经定义，我认为这是定义路由器的旧方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:14:33.290

我在你的小提琴中看到你正在使用 pre-2。最新版本是pre-4，所以我建议你使用它。[http://emberjs.com/guides/](http://emberjs.com/guides/)是最新的 pre-4。

我创建了一个小提琴并使用您的代码作为起点，最终得到了我认为您试图完成的任务：http: [//jsfiddle.net/Energiz0r/9Xasr/4/](http://jsfiddle.net/Energiz0r/9Xasr/4/)

基本上 connectOutlet 被替换为

```
this.render('content', {into: 'index', outlet:'content'); 
```

新路由 API 中还有很多其他变化。再次浏览[http://emberjs.com/guides/](http://emberjs.com/guides/)上的指南以全面了解这一切。

希望这可以帮助！

# debugging - 寻找工具/技术来监控浏览器中的内存使用情况

> ID：14605387
> 
> 赞同：1
> 
> 时间：2013-01-30T13:38:02.557
> 
> 标签：debugging, memory-management, browser

我们正在构建一个广泛使用 css3 转换的应用程序。显然，transform scale、rotate3d，当然还有大图像都是导致页面上出现临界数量的 html 元素时达到内存使用阈值的因素。

目标是最大化可以添加的元素数量，同时在 css3d 转换或图像大小/质量的特性上做出最小的妥协。

我正在寻找工具/技术来监视浏览器中的内存使用情况，并在技术上尽可能详细地进行。

目前正在使用谷歌浏览器。

奖励：有什么技巧可以有效地处理图像/css3 转换/动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T09:58:03.213

到目前为止（在 chome 中）我发现的最好的东西是 chrome web 开发工具的*时间线*功能。

它惊人的严谨和详细。您可以分析到非常低的级别，包括绘制事件的复杂细节、css 选择器，当然还有 javascript 函数。

# python - Python——不能在类方法中访问类变量

> ID：14605389
> 
> 赞同：0
> 
> 时间：2013-01-30T13:38:09.020
> 
> 标签：python, class, scope, init

嘿，我正在尝试为我的游戏创建一个使用箭头键并实现重力的 Player 类，但我不能在我的类方法中使用我的*init*参数来更新位置等，有人能告诉我为什么请吗？我的错误是

```
File "playerClass.py", line 83, in <module>
CircleMan.update() 
```

文件“playerClass.py”，第 28 行，更新 self.yPos += self.yVel AttributeError: Player instance has no attribute 'yPos'

```
class Player:
def __init__(self,image,xPos,yPos,xVel,yVel):
    self.xPos = xPos
    self.xPos = yPos
    self.xVel = xVel
    self.yVel = yVel
    self.Image = image

def draw(self):
    screen.blit(Image,(xPos,yPos))

def update(self):
    self.xPos += self.xVel
    self.yPos += self.yVel

    for event in pygame.event.get():
            if event.type == QUIT:
                    pygame.quit()
                    sys.exit()
            if event.type == KEYDOWN:
                    if event.key == K_LEFT:
                        self.xVel = -2
                    elif event.key == K_RIGHT:
                        self.xVel = 2
                    elif event.key == K_UP:
                        if self.yPos == 469:  ## if player presses down up and player is on the ground, subtract y value making him jump
                            self.yVel = -3
                    elif event.key == K_DOWN:
                         pass

            if event.type == KEYUP:
                    if event.key == K_LEFT:
                        self.xVel = 0
                    elif event.key == K_RIGHT:
                        self.xVel = 0
                    elif event.key == K_UP:
                        self.yVel = 0
                    elif event.key == K_DOWN:  
                        self.yVel = 0

    playerGravity()
    draw()

def playerGravity(self):
    if self.yPos < 469:
        self.yVel = self.yVel + 2
    elif yPos == 469:
        self.yVel = 0
    else:
        pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:07:08.170

您可能在**init** () 函数中打错了字。您设置 self.xPos 两次，但 self.yPos 未设置。

def **init** (self,image,xPos,yPos,xVel,yVel): self.xPos = xPos self.xPos = yPos self.xVel = xVel self.yVel = yVel self.Image = image

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:40:13.723

您在构造函数中犯了一个错误：

```
self.xPos = yPos 
```

应该 ：

```
self.yPos = yPos 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:43:18.317

除非这是您定义`self.xPos`两次的问题中的错字

```
 self.xPos = xPos
  self.xPos = yPos 
```

并且从不定义`self.yPos`

# excel - 使用 vba 检查 excel 版本（格式）

> ID：14605396
> 
> 赞同：1
> 
> 时间：2013-01-30T13:38:37.010
> 
> 标签：excel, phpexcel, aspose-cells, vba

我希望我的 VBA 代码仅在文件格式为 xls 时才执行。这个对吗？我正在这样做：

```
#If ActiveWorkbook.FileFormat = xlExcel5 Then
  //my code
Else
  //my code
#End if 
```

我使用 Excel 2010（xlsm 文件）进行了测试，效果很好。我已经使用了 PHPExcel 库，这就是我选择 xlExcel5 的原因，因为它类似于我必须选择的 excel5，如果我想在使用 PHP 编程时使用旧的 excel 版本（2003 或更低版本）。

# algorithm - 最佳情况、平均情况、最坏情况和摊销情况分析

> ID：14605397
> 
> 赞同：1
> 
> 时间：2013-01-30T13:38:40.053
> 
> 标签：algorithm, amortized-analysis

我正在寻找对事物如何运作的理解，而不仅仅是答案。尽管答案是，我给出了我所知道的，但我不太确定，而且文本中没有太多关于这种分析的内容。

我很清楚这不是你应该如何实现堆栈的方式，但这是我们给出的场景。

A部分

> 插入包含 N 个整数（表示堆栈）的（未排序）数组 a 的插槽 a[0] 的最坏情况、平均情况和最佳情况运行时间是多少？给出 theta 范围。

B部分

> 如果每次插入都发生在 a[0] 处，则将 N 个整数插入一个初始为空的数组 a（代表一个堆栈）的摊销运行时间是多少？给出一个紧密的 O 界并解释你的答案。

讲师很清楚我们正在对 a[0] 进行所有插入，并且没有从这个“堆栈”中删除。

我的分析是这样的

假设：a.length >> N

最好的情况是 Theta(1)，它发生在我们插入一个空的“堆栈”时。

最坏的情况是 Theta(N)，因为作为插入过程的一部分，我们必须移动 N-1 个元素以在 a[0] 处腾出空间。

平均情况也是 Theta(N)，因为无论如何，我们总是要移动 N-1 个元素。

摊销案例

每个插入成本（N-1），我们有 N 个元素，所以我们使用：

```
N
Sum  (i)  =  [ N(N+1) ] / 2 = N^2 / 2 which is O(N^2) for N insertions
i=1 
```

摊销成本将是 N^2 / N = O(N)

我遇到的问题是这看起来很容易。我错过了什么，还是我几乎已经死了？

# java - 用java编写正则表达式

> ID：14605398
> 
> 赞同：-3
> 
> 时间：2013-01-30T13:38:46.457
> 
> 标签：java, regex

我有一个字符串`"110:name:name.lastname@provider.com"`。

我想创建一个正则表达式，这样第一个冒号之前的值应该只是数字，即 110，第二个冒号之前的值应该只是字母，第三部分应该有一个有效的电子邮件 ID。

谁能指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:42:19.113

我建议你像这样拆分它：

```
String[] tokens = "110:akhil:akhil.mittal@gmail.com".split(":"); 
```

然后你会得到一个由冒号分隔的项目数组。

您可以使用此正则表达式验证号码：

```
tokens[0].matches("\\d*"); 
```

和这个字母部分：

```
tokens[1].matches("[A-Za-z]*"); 
```

您应该为最后一部分找到一个电子邮件验证器，因为正则表达式对于验证电子邮件来说是个坏主意。

如果您**真的**想使用正则表达式来验证电子邮件，请使用[这个（链接）](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)。下面是它的所有荣耀：

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:43:18.847

那里有三个位。第一个和第二个很容易，第三个使用正则表达式几乎是不可能的。

你能做的最好的事情是这样的：

```
^[0-9]*:[A-Za-z]*:.*@.*$ 
```

对于电子邮件的@ 两侧的部分，您*可能*比 .* 更具体一些，但坦率地说，您真正知道电子邮件地址是否有效的唯一方法是与提供的域的邮件服务器通信，并且问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:46:46.933

类似于 jgm 的解决方案，但电子邮件更具体：

```
^[0-9]*:[A-Za-z]*:[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-+]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$ 
```

# arrays - PowerShell - 为什么“包含”对从数组中提取的字符串不起作用？

> ID：14605401
> 
> 赞同：0
> 
> 时间：2013-01-30T13:39:03.597
> 
> 标签：arrays, string, powershell, contains

试图解决这个问题，但真的没有太多运气。以下代码块中的 if 语句永远不会正确，我不明白：

```
$array1 = "red", "blue", "green", "yellow"
$array2 = "rose", "sky", "grass", "sand"
$both_arrays = $array1, $array2

for ($c=0; $c -lt 4; $c++) {

$object = $both_arrays[0][$c]
$colour = $both_arrays[1][$c]

Write-Host $c "-" $object
Write-Host $c "-" $colour

if ( ($colour.contains("green") ) ) { Write-Host "HELL YEAH! Green is my favourite colour!" }

} 
```

输出如下：

```
0 - red
0 - rose
1 - blue
1 - sky
2 - green
2 - grass
3 - yellow
3 - sand 
```

如果我们只处理一个数组，它工作正常：

```
$array1 = "red", "blue", "green", "yellow"

for ($c=0; $c -lt 4; $c++) {

$colour = $array1[$c]

Write-Host $c "-" $colour

if ( ($colour.contains("green") ) ) { Write-Host "HELL YEAH! Green is my favourite colour!" }

} 
```

输出按预期出现：

```
0 - red
1 - blue
2 - green
HELL YEAH! Green is my favourite colour!
3 - yellow 
```

smeg 是怎么回事？帮助表示赞赏！

当我尝试将这个概念应用于我正在编写的另一个脚本时，上述代码示例仍然出现错误：

```
for ($c=0; $c -lt 3; $c++) { #$arrCheckpoint, 

$ckname = $arrCheckpointNameAndStatus[0][$c]
$ckstatus = $arrCheckpointNameAndStatus[1][$c]

Write-Host $ckname

if ( ($ckname.contains("Standard Checkpoint") ) ) { Write-Host "Hit." }

}

Write-Host "End of Script" 
```

它抛出以下错误：

```
Method invocation failed because [System.Object[]] doesn't contain a method named 'contains'.
At C:\script.ps1:225 char:27
+     if ( ($ckname.contains <<<< ("Standard Checkpoint") ) ) { Write-Host "Hit." }
+ CategoryInfo          : InvalidOperation: (contains:String) [], RuntimeException
+ FullyQualifiedErrorId : MethodNotFound 
```

现在真的开始烦我了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:44:05.010

您似乎将对象和颜色数组的数组索引颠倒了。

# php - 从 sql 结果在 PHP 中创建关联数组，用于 json

> ID：14605403
> 
> 赞同：0
> 
> 时间：2013-01-30T13:39:09.847
> 
> 标签：php, mysql, arrays, json, associative

我正在尝试从 json_encode 的 sql 结果创建一个关联数组。

这是我的代码：

```
$timelineQuery = "SELECT * FROM timeline_table";
$contentQuery = "SELECT * FROM content_table";
$picQuery = "SELECT * FROM pic_table";

$sql = mysql_query($timelineQuery) or die(mysql_error()); 
$sql2 = mysql_query($contentQuery) or die(mysql_error());
$sql3 = mysql_query($picQuery) or die(mysql_error());   

$mainArray = array(
    'timeline' => $timelineArray = array(
        'content' => $contentArray = array(
            'pictures' => $picArray = array(),
        ),
    ),
);

while($row = mysql_fetch_assoc($sql)) { 
    $timelineArray[] = $row;            
}
while($row2 = mysql_fetch_assoc($sql2)) {
    $contentArray[] = $row2;
}
while($row3 = mysql_fetch_assoc($sql3)) {
    $picArray[] = $row3;
}
echo stripslashes(json_encode($mainArray)); 
```

如果我按原样对我的 $mainArray 进行 json_encode，则返回的 json 具有我正在寻找的语法，但是如果不将其添加到数组的末尾，我就无法填充数组。

```
{"timeline":{"content":{"pictures":[]}}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:41:49.960

第一的：

```
while($row = mysql_fetch_assoc($sql)) { 
    $timelineArray[] = $row;            
}
while($row2 = mysql_fetch_assoc($sql2)) {
    $contentArray[] = $row2;
}
while($row3 = mysql_fetch_assoc($sql3)) {
    $picArray[] = $row3;
} 
```

然后：

```
 $mainArray = array(
        'timeline' => $timelineArray = array(
            'content' => $contentArray = array(
                'pictures' => $picArray = array(),
            ),
        ),
    );
echo stripslashes(json_encode($mainArray)); 
```

你用空数组定义了你的数组并且没有更新它的状态。

# java - Thrift 异步接口与阻塞服务器

> ID：14605407
> 
> 赞同：0
> 
> 时间：2013-01-30T13:39:16.667
> 
> 标签：java, thrift

嗨，我正在使用 java 和 thrift。我看到节俭的异步系统有两个部分，一个是 Service.AsyncIface，另一个是 Service.AsyncClient。从 AsyncClient 的节俭实现中，我看到非阻塞接口已连接并准备好在库端进行。我刚刚使用 TNonBlockingSocket 做了一个简单的客户端，它可以工作

1）我们关心服务的现有节俭服务器是阻塞还是非阻塞？为什么？

2) 如果我们想在重试逻辑、主机发现、策略管理等内容中封装一个非阻塞客户端框架，那么理想的框架是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:25:20.793

1.  从客户端的角度来看，鉴于协议和传输是兼容的，与同步或异步服务器的通信没有区别。这是因为客户端应该从两个同步/异步服务器接收到相同的序列化响应。例如，如果您通过 HTTP 请求执行 JSON，那么您并不真正关心服务器是同步的还是异步的。

2.  如果您只对 JVM 语言感兴趣（而且它是我所知道的唯一具有所需功能集的框架），Finagle 是一个不错的选择。

# iphone - 我无法在 iphone sdk 中使用亚马逊网络服务 s3 上传器

> ID：14605413
> 
> 赞同：0
> 
> 时间：2013-01-30T13:39:25.773
> 
> 标签：iphone, ios, amazon-web-services

我已经开发了一个使用 aws 服务的应用程序，但我不能。我有“访问密钥”和“密钥”。但是当使用 s3 上传器时，我发现错误“没有这样的存储桶”并且你没有唱歌。我认为，当我创建帐户时，我没有完成“付款方式”流程。所以aws不提供测试模式。我很困惑，请建议我正确的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:27:42.003

我帮助维护适用于 iOS 的 AWS 开发工具包。以布拉德的建议为基础：

*   确保您可以从 AWS 网站访问 S3 控制台。这将确保您拥有一个活跃且有效的帐户
*   确保您已将访问密钥和密钥正确复制到 S3_Uploader 示例应用程序`Constants.h`中
*   该示例根据您的访问密钥创建一个唯一名称。如果由于某种原因失败，您可以`Constants.m`在示例中更新以使用您自己的自定义名称（或使用您已经通过控制台创建的存储桶）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:46:05.270

听起来您没有活动的 AWS 账户。

你是否有一个？您可以从普通 PC 访问您的存储桶吗？我猜你没有。在 iPhone 上进行操作之前，请确保您可以从常规桌面访问您的帐户和存储桶。您需要进入管理控制台并创建一个 S3 存储桶，否则 - 您将收到该错误。（无论哪种方式，您都试图访问错误的）。

# selenium - 如何在弹出窗口中自动编写文本

> ID：14605418
> 
> 赞同：1
> 
> 时间：2013-01-30T13:39:36.117
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我想在弹出窗口中自动编写文本。是否可以？如果是，请指导我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:21:03.850

如果是浏览器弹出窗口，听起来您正在寻找：

```
driver.switchTo().alert().sendKeys("some text to enter"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:45:09.227

我得到了解决方案：

```
driver.switchTo().frame(0);
driver.findElement(By.id("id of the view to enter text in the popup")).sendKeys("some text to enter"); 
```

# ios - 创建具有后退按钮样式的 UIBarButtonItem

> ID：14605425
> 
> 赞同：3
> 
> 时间：2013-01-30T13:40:10.953
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uibarbuttonitem, uinavigationitem

我正在寻找一种以编程方式创建一个`UIBarButtonItem`看起来像后退按钮的方法`UINavigationBar`。显然，后退按钮似乎只有在按下 后才会出现`UINavigationController`。

![在此处输入图像描述](../Images/dac44053570efd2940d186116555ee3b.png)

所以我只能插入一个“取消”样式的按钮。但我的目标是创建一个具有“新项目”样式的按钮。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:29:10.237

简短的回答是你做不到。

您可以保存图像并将图像放置到该位置，但后退按钮由`UINavigationBar`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:50:33.243

我认为你需要使用图像。然后将图像设置为按钮背景图像。如 ：

```
navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
UINavigationItem *navigationItem = [[[UINavigationItem alloc] initWithTitle:@"Detail"] autorelease];

        UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 70, 30)];

    [button setImage:[UIImage imageNamed:@"plain.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonClicked:)
        forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc]
                               initWithCustomView:button];

    navigationItem.leftBarButtonItem = buttonItem;

    [buttonItem release];
    [button release];
[navigationBar pushNavigationItem:navigationItem animated:NO];
[self.view addSubview:navigationBar]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:07:02.000

看看这个答案：[在 UIToolbar 上创建一个左箭头按钮（如 UINavigationBar 的“后退”样式）](https://stackoverflow.com/questions/227078/creating-a-left-arrow-button-like-uinavigationbars-back-style-on-a-uitoolba)

它为您提供了一个带有所需图像的 psd 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T12:41:28.497

这个对我有用： `[self.navigationItem.leftBarButtonItem setTitle:@"Back"];`

（带有后退箭头的自定义文本）

# postgresql - Sql 在两个单独的列中加入和删除不同的

> ID：14605436
> 
> 赞同：3
> 
> 时间：2013-01-30T13:40:45.057
> 
> 标签：postgresql

我订了桌子

```
 form_id | procedure_id 
----------+-------------
  101  |  24
  101  |  23
  101  |  22
  102  |  7
  102  |  6
  102  |  3
  102  |  2 
```

另一张桌子已经表演了

```
form_id | procedure_id 
----------+-------------
  101  |  42
  101  |  45
  102  |  5
  102  |  3
  102  |  7
  102  |  12
  102  |  13 
```

预期产出

```
form_id     o_procedure_id      p_procedure_id
  101           24                     42
  101           23                     45
  101           22                     NULL
  102           7                      7
  102           6                      5 
  102           3                      3 
  102           2                      12
  102           NULL                   13 
```

我尝试了以下查询：

```
with ranked as
(select 
dense_rank() over (partition by po.form_id order by po.procedure_id) rn1,
dense_rank() over (partition by po.form_id order by pp.procedure_id) rn2,
po.form_id, 
po.procedure_id, 
pp.procedure_id
from ordered po, 
performed pp where po.form_id = pp.form_id)
select ranked.* from ranked 
--where rn1=1 or rn2=1 
```

上述查询返回具有重复值排序和过程 ID 的值。如何获得例外输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:17:02.733

我不太确定您希望如何处理表格两侧的多个空值和/或空值。因此，我的示例假设第一个表处于领先地位并包含所有条目，而第二个表可能包含孔。查询并不漂亮，但我想它可以满足您的期望：

```
select test1_sub.form_id, test1_sub.process_id as pid_1, test2_sub.process_id as pid_2 from (
    select form_id, 
        process_id, 
        rank() over (partition by form_id order by process_id asc nulls last)
    from test1) as test1_sub
    left join (
        select * from (
            select form_id,
            process_id,
            rank() over (partition by form_id order by process_id asc nulls last)
        from test2
        ) as test2_nonexposed
    ) as test2_sub on test1_sub.form_id = test2_sub.form_id and test1_sub.rank = test2_sub.rank; 
```

# wso2 - 在小工具服务器上的 lineChart 示例中更改线条颜色

> ID：14605437
> 
> 赞同：1
> 
> 时间：2013-01-30T13:40:54.667
> 
> 标签：wso2, google-gadget

我正在运行使用小工具服务器上的可视化框架的 lineChart 小工具示例。它运行良好，每秒显示数据。我想更改线条的颜色，但在小工具代码中找不到任何可以设置线条颜色的方法。在下面的代码中，您可以设置一些属性。

```
 window.onload = function () {

            var lineChart = new wso2vis.s.chart.protovis.LineChart("chart","MNT-Lab : LabVIEW Simulation","");

            lineChart.dataField(["Response", "Terminal"])
                .dataValue(["Value"])
                .dataLabel(["Name"])
                .width(380)
                .height(300)
                .band(50)
                .legend(true)
                .marks(true)
                .dirFromLeft(true)
                .xSuffix("s"); 
```

但是我对如何以及在何处设置线条的默认颜色感到有些困惑。我查看了 wso2vis.js 文件，但看不到任何更改颜色的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:30:55.640

WSO2Vis.js 重命名为 viskit.js，现在托管在 GitHub [1]。对于您的问题，您可以更改 [2] 中的 rgba 值。

问候， 女万

[1] [http://wso2.github.com/viskit/](http://wso2.github.com/viskit/) [2] [https://github.com/wso2/viskit/blob/master/js/subscriber/chart/protovis/LineChart.js](https://github.com/wso2/viskit/blob/master/js/subscriber/chart/protovis/LineChart.js)

# php - 以编程方式创建 spss/.sav 文件

> ID：14605440
> 
> 赞同：0
> 
> 时间：2013-01-30T13:40:55.697
> 
> 标签：php, spss

我们正在开发 php 应用程序，需要为报告部分生成/导出**SPSS**文件，如果有人能建议好的 API/代码库来开始它的开发，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:36:56.667

SPSS 社区网站 (www.ibm.com/developerworks/spssdevcentral) 提供了一个免费的 i/o 模块，该模块提供了用于读取和写入 sav 文件的 api。它有一个 C 兼容接口。它被许可的目的是您可以在您的应用程序中自由地合并和重新分发这些模块。下载内容包括适用于所有主要平台的模块。您必须在网站上注册才能下载，但不收取任何费用。

如果您发现它更易于使用，还可以从 ActiveState 网站获得一个 Python 包装器（它使用 i/o 模块）。

# jquery - jQuery jEditable 的 Cancel 事件回调

> ID：14605442
> 
> 赞同：2
> 
> 时间：2013-01-30T13:40:58.793
> 
> 标签：jquery, jeditable

我使用 Mike Tuupola 的 jQuery jEditable 如下：

```
function wireupTagCategoryInPlaceEditing() {

    $('.category-label').editable(submitTagCategoryEdit, {
        event: 'tagcategoryedit', // conditionally triggered in wireupTagCategoryClick()
        type: 'text',
        submit: '&nbsp;Ok&nbsp;',
        cancel: 'Cancel',
        cssclass: 'tagcategory-inplace-edit'
    });

} 

function submitTagCategoryEdit(value, settings) {
    //handle the edit 
} 
```

我需要拦截取消事件 - 最好的方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:51:34.253

使用[这个](https://stackoverflow.com/questions/2607404/jeditable-cancel-button-callback)和[这个](https://stackoverflow.com/questions/1128760/jeditable-cancel-callback-from-ajax-callback)

```
$("#editable_text").editable(submitEdit, { 
    //...
    onreset: jeditableReset,
    //...
});

function jeditableReset(settings, original) {
   // whatever you need to do here
} 
```

# javascript - tinyMce 快捷方式

> ID：14605444
> 
> 赞同：1
> 
> 时间：2013-01-30T13:41:02.233
> 
> 标签：javascript, jquery, asp.net, tinymce, keyboard-shortcuts

我正在使用一个 asp.net 网站，我们在页面主控中实现了快捷方式，但是当 tinymce 编辑器具有焦点时，这些似乎不起作用。有没有办法解决这个问题？它是在母版页级别还是在tinymce 级别都没有关系。

我试图通过 addShortcut 方法创建自定义方法，但这会导致我的 javascript 出错。

```
 page.ClientScript.RegisterStartupScript(page.GetType(), new Guid().ToString(), "ShortCutModule();", true);

        string enableShortcuts = @"function enableShortcuts(){"+
            @"tinyMCE.get('"+"myKey2"+this.ID+@"').addShortcut(""Ctrl+Shift+f12"",""nix"",""jourcut"");";

        page.ClientScript.RegisterStartupScript(page.GetType(), new Guid().ToString(), enableShortcuts, true);

        page.ClientScript.RegisterStartupScript(
        page.GetType(),
        "MyKey2" + this.ID, @"<script type=""text/javascript"" >" +
        @"tinyMCE.init({" +
        @"oninit : ""enableShortcuts"","+
        @"mode: ""exact""," +
        @"elements: """ + this.ID + @"""," +
        @"theme: ""advanced""," +
        @"plugins: ""spellchecker,advhr,insertdatetime,preview""," +
        @"theme_advanced_buttons1: ""bold,italic,underline,|,outdent,indent,|,cut,copy,paste,|,undo,redo""," +
        @"theme_advanced_toolbar_location: ""top""," +
        @"theme_advanced_toolbar_align: ""left""," +
        @"theme_advanced_statusbar_location: ""bottom""," +
        "custom_shortcuts : false," +
        "theme_advanced_path : false," +
        "setup : function(ed) {" +
            "ed.addCommand('jourcut', function() {CutFromJournal();});" +
        "}" +
        "});" +
        "</script>",
false); 
```

# iphone - JSONRepresentation 显示错误

> ID：14605448
> 
> 赞同：1
> 
> 时间：2013-01-30T13:41:08.520
> 
> 标签：iphone, ios, objective-c, json, ipad

我在字典中有一些数据，比如

```
 NSMutableDictionary *jsonDictionary;
 jsonDictionary = [[NSMutableDictionary alloc] init];
 [jsonDictionary setValue:@"XYZ" forKey:@"CommandType"];
 [jsonDictionary setValue:@"ABC" forKey:@"AppID"];
 [jsonDictionary setValue:@"PQM" forKey:@"UserName"];

 NSURLResponse *response;
 NSError *error;

 NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error];

 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
                                [NSURL URLWithString:@"Http://SomeURL"]];

[request setHTTPMethod:@"POST"];
[request setHTTPBody: jsonData];

[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *serverResponse = (NSString *)[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSMutableDictionary *results = [serverResponse JSONValue]; 
```

在我的“结果”中，我得到了 null .. 它有什么问题并向我显示 consol 中的错误。错误如下。

```
 -JSONRepresentation failed. Error trace is: (
"Error Domain=org.brautaset.JSON.ErrorDomain Code=4 \"Not valid type for JSON\" UserInfo=0x6b8d880 {NSLocalizedDescription=Not valid type for JSON}"

 -JSONFragment failed. Error trace is: (
"Error Domain=org.brautaset.JSON.ErrorDomain Code=1 \"JSON serialisation not supported for NSMutableURLRequest\" UserInfo=0x6b8ddf0 {NSLocalizedDescription=JSON serialisation not supported for NSMutableURLRequest}" 
```

任何可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:48:17.893

尝试使用`NSJSONSerialization`执行转换回 JSON：

```
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
id result = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error]; 
```

如果这不起作用，我很确定这是因为您的服务器返回空响应。我尝试发送以下请求：

> Accept: */* Content-Type: application/json Content-Length: 65 Accept-Language: en-us Accept-Encoding: gzip, deflate
> 
> {“AppID”：“ABC”，“CommandType”：“XYZ”，“用户名”：“PQM”}

我得到了以下响应头（没有正文）：

> HTTP/1.1 200 正常
> 
> 日期：2013 年 1 月 30 日星期三 14:58:43 GMT X-AspNet-版本：4.0.30319 内容长度：0 X-Powered-By：ASP.NET 缓存控制：私有服务器：Microsoft-IIS/7.5

内容长度为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:49:03.227

这条线

```
[request setHTTPBody: temp]; 
```

应该

```
[request setHTTPBody: jsonData]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T13:53:14.073

我认为，这对你有帮助。所以你可以试试下面的 Code.NSJSON 序列化方法。然后试试这个链接[NSJSON Serialization JSON](http://sonnyparlin.com/2012/04/parsing-json-with-ios-5/)

```
NSError *error = nil;
NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.37:3333/UniECommerce/api/store-list.html"]];

    if (jsonData) 
    {
        id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

        if (error) 
        {
            NSLog(@"error is %@", [error localizedDescription]);

            // Handle Error and return
            return;
        }

        //NSArray *keys = [jsonObjects allKeys];
        NSArray *keys=[[jsonObjects objectForKey:@"storelist"]valueForKey:@"store_list"];
        // values in foreach loop
        for (NSDictionary *key in keys)// here used to array type key 
        {
            // NSLog(@"%@ is %@",key, [jsonObjects objectForKey:key]);

            if ([key valueForKey:@"store_image"]!=[NSNull null])
            {

              [imageUrls  addObject:[key objectForKey:@"store_image"]];
               // imageUrls [key valueForKey:@"store_image"];
            }
        } 
```

# asp.net-mvc - 将子文件夹添加到内容文件夹

> ID：14605452
> 
> 赞同：1
> 
> 时间：2013-01-30T13:41:26.513
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-3

我想将文件夹/子文件夹/文件添加到 MVC3 项目的内容文件夹中。我在资源管理器中的目录文件夹的项目目录中添加了一些带有子文件夹和文件的文件夹。但是，当我尝试在 Visual Studio 中添加它们时，它不会让我添加文件夹及其子内容，而是继续导航到这些文件夹中的文件。为什么我不能只添加文件夹及其包含文件的子文件夹。它只允许将单个文件添加到 Contents 根文件夹，而不会创建文件夹结构。我想维护 Visual Studio 项目中的文件夹结构，但不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:28:03.807

在 VS2012 和其他版本中，确保在解决方案资源管理器中选择了“显示所有文件”选项。这将显示项目中的所有内容、子文件夹和文件。

如果您使用任何源代码管理，请确保“右键单击”要添加的文件夹或文件，然后从弹出菜单中选择“包含在项目中”。

反过来也可以“从项目中排除”。

我自己在第一次进入 VS 时遇到了这个问题，并且在通过 Windows 资源管理器添加内容时感到非常沮丧，但无法在解决方案资源管理器中看到该内容。

# php - 在页面刷新时从 html 获取表单数据（php）

> ID：14605454
> 
> 赞同：0
> 
> 时间：2013-01-30T13:41:43.987
> 
> 标签：php, javascript, hidden-field

我的大学项目又遇到了一个小问题:(

```
<input type="text" name="timrem" value="" /> 
```

这是我想要数据的隐藏字段。

```
if(isset($_REQUEST['timrem']))
{
    $tim=$_REQUEST['timrem'];
} 
```

这是用于从中获取值的代码`timrem`。
变量 timrem 用于初始化页面上的倒计时序列（使用 javascript 实现）

```
<span id="countdown-1" style="float:right"><?php echo $tim;?> 
```

隐藏字段的值通过实现的 java 脚本计数器动态更改。

```
sremtime=(parseInt(minRemain*60)) + (parseInt(secsRemain));
document.frmTest.timrem.value=sremtime; 
```

这在提交页面时工作正常，即时间不会从下一页重新开始。但是当页面刷新时，定时器会重新启动到`$tim`定时器第一次启动时的值。

是否有可能在页面刷新时以某种方式获取隐藏输入的值？

此外，请评论为保存到下一页所用时间而采取的方法。这是一个关于在线考试的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:52:24.493

一个好主意可能是将时间戳存储在您的 PHP 页面或数据库中（对于多个用户），并使用它来生成 $tim。由于没有触发请求，因此似乎无法在刷新时传递数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:53:49.857

您如何在您的网址中存储“目标时间”（剩余时间倒计时）。您甚至可以将其存储在纪元时间：

```
myurl.com/stuff.html?target_time=1359553896 
```

这样，当页面刷新时，您仍然可以随身携带它，您可以从中计算剩余时间。如果你不想在你的 url 中使用它，你可以将它隐藏在页面上的某个地方`display:none`。

像这样的东西怎么样：

[http://jsfiddle.net/QpZcV/1/](http://jsfiddle.net/QpZcV/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:04:49.540

如果您需要变量在刷新期间保持不变，则不能依赖从客户端传回服务器的信息。您可以依赖的唯一信息是第一个请求传递的信息，这显然不包括您的时间。我能想到的最佳解决方案是将时间戳存储在服务器上的会话变量中：

```
session_start();
if(empty($_SESSION['timrem'])) $_SESSION['timrem'] = time(); // set this if it is the first time this page is loaded
$tim = time() - $_SESSION['timrem']; // $tim is now the number of seconds since the page was first loaded in this session 
```

您不需要在客户端和服务器之间来回传递时间来跟踪它，尽管您的 javascript 可能需要它。

# node.js - Webstorm 和睾丸集成

> ID：14605459
> 
> 赞同：2
> 
> 时间：2013-01-30T13:41:50.597
> 
> 标签：node.js, webstorm, karma-runner

## 集成**WebStorm**和**Testacular**的最简单方法是什么？

我正在尝试来自 AngularJs 官方网站的**angular-phonecat**教程，直到现在我无法让 WebStorm 启动 Testacular 服务器。

据我研究，网络上没有这样的信息......

有什么猜测吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:52:27.830

此处描述了基本的 WebStorm Testacular 集成：[http](http://www.youtube.com/watch?v=MVw8N3hTfCI&feature=player_embedded#t=459s) ://www.youtube.com/watch?v=MVw8N3hTfCI&feature=player_embedded#t=459s 。

# enums - 为什么这个 XML Schema 元素不正确？

> ID：14605466
> 
> 赞同：0
> 
> 时间：2013-01-30T13:42:13.217
> 
> 标签：enums, restriction

这是我的架构的摘录：

```
 <xs:simpleType name="atypes.priorities">
  <xs:restriction base="xs:string">
  <xs:enumeration value="low" />
  <xs:enumeration value="standard" />
  <xs:enumeration value="normal" />
  <xs:enumeration value="high" />
  <xs:enumeration value="critical" />
  <xs:pattern value="[0-9]+" />
  </xs:restriction>
  </xs:simpleType> 
```

在我的 XML 编辑器中加载架构时（我使用的是 XML Pad 3.0），我收到以下验证错误：

“元素值‘低’不是基类型的值空间，字符串”

有人可以向我解释这个错误吗？毕竟，“低”在我看来就像一个字符串。

我该如何纠正？基本上，我的简单类型应该是由数字组成，或者是低、正常、高和关键的词之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:46:02.903

在您的模式限制（正则表达式）中，您说只允许使用数字。也许取消该限制会有所帮助。

或者尝试将其更改为： `<xs:pattern value="[a-zA-Z0-9]+" />`

# database - 可信且可扩展的嵌入式数据库

> ID：14605468
> 
> 赞同：0
> 
> 时间：2013-01-30T13:42:14.307
> 
> 标签：database, embedded-database

我正在寻找一种 DB 嵌入式解决方案来处理平均/中等数量的数据（可能在 100MB 到 2GB 之间），并允许并发连接，不是那么多，我相信对象的并发连接至少
超过 10 个（数据库、表）最多五十或一百个。

根据您的意见和经验，哪些选项可以满足这些要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:04:50.497

[Firebird](http://www.firebirdsql.org/)可以嵌入使用。它满足您的所有其他要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:34:00.153

对于 Java，您可以选择三种不同的 DBMS：

*   HSQLDB（又名 HyperSQL）： http: [//hsqldb.org](http://hsqldb.org)
*   H2 数据库：[http ://h2database.com/html/main.html](http://h2database.com/html/main.html)
*   Apache Derby（又名“JavaDB”）：[http ://db.apache.org/derby/](http://db.apache.org/derby/)

我个人的偏好是 HSQLDB，但 H2 也一样好。两者都满足您提到的要求。

# business-objects - BO 4.0 Webi 变量编辑

> ID：14605469
> 
> 赞同：0
> 
> 时间：2013-01-30T13:42:18.643
> 
> 标签：business-objects

我在报告中有一个变量。这个变量里面有很多数据。公式字段中可以包含多少数据？我问的原因是，当我对此变量进行任何更改时，报告会冻结。我最近从 3.1 XI 切换到 BO 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T07:02:46.773

没有限制，但是复杂的公式确实会减慢报告速度（刷新）！如果可能，尝试将公式插入到 Universe 中的对象中，并尝试将其推向数据库层。数据库将比 BO 的报表引擎更好地处理这类请求。

# android - 这个 LinearLayout 布局或者它的 FrameLayout 父级是没用的；将背景属性转移到另一个视图

> ID：14605474
> 
> 赞同：2
> 
> 时间：2013-01-30T13:42:26.197
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ff000000"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="80.0dip"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:paddingBottom="1.0dip"
                android:paddingTop="1.0dip"
                android:scrollbars="none" >

                <include layout="@layout/quickactions_buttons_part" />
            </HorizontalScrollView>
        </LinearLayout> 
```

但我收到了这个警告

```
This LinearLayout layout or its FrameLayout parent is useless; transfer the background attribute to the other view 
```

和

```
This HorizontalScrollView layout or its LinearLayout parent is useless 
```

有谁知道我该怎么做才能让这条消息消失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:52:05.830

您有一个单独的组件（行）垂直线性布局，其中包含另一个线性布局。这没有任何意义，因为布局是多个组件的容器。如果只有一个组件，那么这样的容器是多余的，可以直接被它所拥有的单个组件替换。

同样，第二个`LinearLayout`也没有任何意义，只保留一个组件，`HorizontalScrollView`. 唯一重要的是现在需要在组件上指定“80.0dip”属性。

因此，您的布局是不必要的复杂。的内容`FrameLayout`可以更简单地重写为

```
<HorizontalScrollView
   android:layout_width="fill_parent"
   android:layout_height="80.0dip"
   android:paddingBottom="1.0dip"
   android:paddingTop="1.0dip"
   android:scrollbars="none" >
   <include layout="@layout/quickactions_buttons_part" />
</HorizontalScrollView> 
```

生成的代码运行速度更快，更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:51:32.663

我认为这是由于 FrameLayout、1st LinerLayout 和 2nd LinearLayout 没有解决任何目的，而您在 Horizo​​ntalScrollView 中拥有一切。

# c# - 基于声明的表单身份验证角色

> ID：14605481
> 
> 赞同：6
> 
> 时间：2013-01-30T13:42:43.847
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我正在尝试使用 MVC 4 中的表单身份验证对用户进行身份验证（我正在使用 RavenDB，因此我无法使用标准成员资格提供程序）。然后稍后我使用该`User.IsInRole()`方法或`AuthorizeAttribute`验证用户是否处于人员角色。

这是我设置成功身份验证票的地方（目前`UserController.cs`）：

```
FormsAuthenticationTicket ticket =
    new FormsAuthenticationTicket(
        1,
        model.Email,
        DateTime.Now,
        DateTime.Now.AddDays(1),
        false,
        model.Email);

string hashedTicket = FormsAuthentication.Encrypt(ticket);

HttpCookie cookie =
    new HttpCookie(
        FormsAuthentication.FormsCookieName,
        hashedTicket);

HttpContext.Response.Cookies.Add(cookie); 
```

这是我检查每个请求的票证的地方 ( `Global.asax`)：

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
{
    var authCookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];

    if (authCookie != null)
    {
        var authTicket = FormsAuthentication.Decrypt(authCookie.Value);
        var user = this.UserService.GetUserByEmail(authTicket.Name);

        var identity = new GenericIdentity(authTicket.Name, "Forms");

        var principal = new GenericPrincipal(identity, user.Roles);

        HttpContext.Current.User = principal;
    }
} 
```

如果我然后在我的一种操作方法（CalendarController.cs）上放置一个调试点，我会得到`isStaff`equals `false`：

```
public ActionResult Index()
{
    var user = HttpContext.User;

    bool isStaff = user.IsInRole(Role.Staff);

    return View();
} 
```

只是为了完成（Roles.cs，只是一个用于测试事物的临时类）：

```
public static class Role
{
    public static string Staff
    {
        get { return "Staff"; }
    }

    public static string Manager
    {
        get { return "Manager"; }
    }
} 
```

任何人都可以帮我说明我可能会错过什么吗？当我到达操作方法时，我设置的角色似乎正在消失。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T22:37:16.827

谢谢大家帮我解决这个问题，我想出的（包括在下面）效果很好！如果用户拥有有效票证 (cookie)，它会自动通过登录屏幕直接登录用户，并且还使用`ClaimsIdentity`和`ClaimsPrincipal`对象处理基于声明的角色，而不将角色放在用户的 cookie 中。它还可以处理`Global.asax.cs`文件中的身份验证，而无需使用自定义授权属性。

*用户控制器.cs*

```
public ActionResult Login()
{
    LoginViewModel model = new LoginViewModel();

    if ((HttpContext.User != null) &&
        (HttpContext.User.Identity.IsAuthenticated))
    {
        return RedirectToAction("Index", "Home");
    }

    return View(model);
}

[HttpPost]
public ActionResult Login(LoginViewModel model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    bool isAuthenticated = this.userService.IsPasswordValid(model.Email, model.Password);

    if (!isAuthenticated)
    {
        ModelState.AddModelError("AuthError", Resources.User.Login.AuthError);

        return View(model);
    }

    FormsAuthentication.SetAuthCookie(model.Email, model.RememberUser);

    return RedirectToAction("Index", "Home");
} 
```

*全球.asax.cs*

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
{
    var authCookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];

    if (authCookie != null)
    {
        var ticket = FormsAuthentication.Decrypt(authCookie.Value);

        FormsIdentity formsIdentity = new FormsIdentity(ticket);

        ClaimsIdentity claimsIdentity = new ClaimsIdentity(formsIdentity);

        var user = this.UserService.GetUserByEmail(ticket.Name);

        foreach (var role in user.Roles)
        {
            claimsIdentity.AddClaim(
                new Claim(ClaimTypes.Role, role));
        }

        ClaimsPrincipal claimsPrincipal = new ClaimsPrincipal(claimsIdentity);

        HttpContext.Current.User = claimsPrincipal;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:44:22.977

由于您使用的是 Raven，我假设您制作了自己的自定义 MembershipProvider 和 RoleProvider；并修改 web.config 以使用它们。你应该有一个类似这样的条目：

```
<membership defaultProvider="MyMembershipProvider">
  <providers>
    <add name="MyMembershipProvider" type="namespace.MyMembershipProvider, providerAssemblyName" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <add connectionStringName="DefaultConnection" applicationName="/" name="DefaultRoleProvider" type="namespace.MyRoleProvider, providerAssemblyName" />
  </providers>
</roleManager> 
```

如果您使用 .NET Framework 4.5 版，它使用基于声明的安全性，您不需要将角色存储在 cookie 中。相反，角色只是存储在[ClaimsPrincipal](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.aspx)中的另一个声明。所有主体现在都从 ClaimsPrincipal 继承，并存储在用户会话中

```
System.Web.HttpContext.Current.User as ClaimsPrincipal 
```

如果您的成员资格和角色提供程序设置正确，ASP.NET 应该使用它们来填充 ClaimsPrincipal 中的角色，然后在您检查**IsInRole**时检查声明。

您还可以从 ClaimsPrincipal 中检索此类角色的角色。

```
principal.FindAll(ClaimTypes.Role).Select(p => p.Value); 
```

您可以像这样向 ClaimsPrincipal 添加角色。

```
List<Claim> claims = new List<Claim>();
foreach (string role in roles)
   claims.Add(new Claim(ClaimTypes.Role, role));
ClaimsPrincipal principal = new ClaimsPrincipal(new ClaimsIdentity(claims, "Forms")); 
```

现在你可以像这样在认证后设置你的cookie。

```
FormsAuthentication.SetAuthCookie(username, false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T14:16:42.540

您没有创建 FormsAuthenticationTicket 插入角色信息：

```
 var ticket = new FormsAuthenticationTicket(
                1, //ticket version
                userName,
                DateTime.Now,
                DateTime.Now.Add(timeout), //timeout
                true, //persistent cookies
                roles,// <---ROLES not model.Email
                FormsAuthentication.FormsCookiePath); 
```

- - - 编辑 - - -

忘记我说的话：我认为您调用 IsInRole() 太早或 user.Roles 的值错误（可能是字符串中的空格：isinrole 使用 StringComparison.OrdinalIgnoreCase），或者您应该使用 FormsIdentity 而不是 GenericIdentity。

调试器说什么？

供参考： http: [//pastebin.com/jkqqcg28](http://pastebin.com/jkqqcg28) （这是我用于处理身份验证的起始模型）

# c++ - 将函数的返回类型声明为T&&是不是没有意义？

> ID：14605483
> 
> 赞同：13
> 
> 时间：2013-01-30T13:42:47.647
> 
> 标签：c++, c++11, return-type, rvalue-reference, temporary

正如我们所知，在最常见的情况下，`T&&`意味着“这是一个临时对象”。但是，如果想要从函数中返回一个临时对象，他/她可以如下声明该函数：

```
template<class T>
T f()
{
    T t;
    ......

    return t;
} 
```

或（注：不正确）

```
template<class T>
T&& f()
{
    T t;
    ......

    return t;
} 
```

但我认为后者有点过头了，因为前者足够了，而且向后兼容。

然而，我也发现`std::forward()`' 的返回类型被声明为 T&&，所以我确信我对此的理解是不完整的。

我真正的问题是：我们应该在何时何地将函数的返回类型声明为 T&&？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T14:01:22.247

在您的示例中，这`T&&`是错误的，它是一个悬空的参考。

但`std::forward`不会在自己的定义中返回对局部变量的右值引用，它会返回对其按右值引用参数的右值引用（或对按左值引用参数的左值引用）。

仅当您希望函数的调用者能够从该引用所指的任何内容中移动时，您才应该返回一个右值引用。

通常只有在函数的目的是提供对某些重要对象（可能已经存在）的移动访问时才会这样做。所以这包括`std::move`（它允许您从左值移动），类似地，您可以编写一个专门为用户设计的访问器函数，以从某个对象的数据成员或某个容器的元素中移动。如果对象本身不重要，只有值，那么您可以按值返回。

正如 grizzly 所说，有时由于引用折叠，您可以利用技巧，这意味着您在代码中*键入* `T&&`，但是当`T`左值引用类型`T&&`已经是相同的左值引用类型时。`std::forward`使用那个技巧。也就是说，因为引用折叠`T&&`并不意味着“对 T 的右值引用”，它意味着“如果 T 是引用类型则为 T，否则对 T 进行右值引用”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:55:53.427

`T&&`并不一定意味着结果是右值。当与模板参数一起使用时，`&&`表示通用引用，它可以是右值或左值引用。更具体地说：如果`T`是一个左值引用类型`foo&`，`T&&`实际上是一个左值引用`foo`，否则它表示一个右值引用。

这可用于编写接受任何类型参数的函数：

```
template<typename T> void foo(T&&);
bar a;
const bar b;
foo(a);//T and T&& will both be bar&
foo(b);//T and T&& will both be const bar&
foo(bar());//T will be bar, T&& will be bar&& 
```

考虑到这一点，`std::forward`使用 a 调用并将其`T&`强制转换为`T&&`，其中`T`明确说明。因此，如果原始函数参数是左值引用，它将返回一个，否则将返回一个右值引用，从而实现完美转发。

至于何时将其用作返回类型：很少，尽管在传递参数时避免复制可能很有用，例如：

```
template<typename T> T&& foo(T&& bar) {/*some ops*/ return std::forward<T>(bar);} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:55:37.920

答案取决于您的函数是否是模板函数。在你的问题中，它是，但让我们先看看它是否不是：

**非模板**

`T&&`作为返回类型并非毫无意义。原因是它实际上并不意味着“临时对象”。它的意思是“右值引用”。区别是微妙的，但可以通过与此返回类型相关的一类函数来突出显示。也就是说，如果我们想返回一个对右值的引用，但它所引用的对象不是我们函数的本地对象怎么办？

```
T&& return_rvalue(/*some data*/)
{
   T&& t = Get_a_reference();
   // Do something fascinating.
   return static_cast<T&&>(t);
} 
```

这种模式的一个非常特殊的情况是 function `std::move`，它接受任何引用并返回一个相应的右值引用。当然，在实际代码中，您当然应该使用`std::move`而不是直接执行强制转换，因为这更清楚地表明了您的意图。

**模板**

If`T`是一个模板参数，`T&&`是 Scott Meyers 所说的[Universal Reference](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers "通用参考")。这意味着`T&&`将使用引用折叠来确定的类型...简而言之，如果i 不是引用类型，则表示它`T&&`是一个右值，如果它是一个左值引用。`T`

# css - css 背景重复

> ID：14605484
> 
> 赞同：0
> 
> 时间：2013-01-30T13:42:47.753
> 
> 标签：css, background-repeat

所以我有这个有背景的DIV

这是风格：

```
#book{
    width: 800px;
    position: absolute;
    right:0;
    top: 0px;
    font-family: love;
    font-size: 20px;
    background:url("../img/boek.png");
} 
```

我遇到的问题是这两个背景之间有空间，我真的不知道为什么，因为我从来没有使用过诸如 margin-top 或 paddin-top 之类的东西......

我只想让两个背景互相接触

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:46:34.017

这是一个不完整的问题或其不连贯的问题。但是在背景之后添加重复。使其重复一个div的完整长度。如果这就是你的要求。

背景：url() 重复；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:52:01.687

大概`html, body { margin: 0; }`

# c++ - 在 C++ 中执行 windows 命令并将输出重定向到本地字符串

> ID：14605486
> 
> 赞同：0
> 
> 时间：2013-01-30T13:42:49.390
> 
> 标签：c++, windows, cmd

我正在尝试执行

```
 which file.exe 
```

在 c++ 中并希望将结果重定向到字符串以进行进一步的处理

我已经尝试过 system 和 CreateProcess 但这会执行命令并将结果重定向到标准输出或文件。

但是我如何在本地字符串中得到这个结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:44:19.153

重定向到管道（使用`CreateProcess`）并将管道*的*末端读入本地字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:45:58.140

我推荐使用[_popen](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=vs.100%29.aspx)（在 Unix 上是 popen）。

# url-rewriting - 如何允许 WordPress 和 Laravel 与 htaccess 共享顶级 URL

> ID：14605487
> 
> 赞同：8
> 
> 时间：2013-01-27T03:47:43.087
> 
> 标签：url-rewriting, .htaccess

**编辑：** *这是我的问题的主要编辑，基于评论中的反馈，以及对 meta.stackoverflow 的一些阅读。*

我已经改变了我的目标，现在我的首要任务是在 Laravel 和 WP 之间路由顶级 URL：我不再寻求共享代码/数据库/用户凭据等。

问题：我需要什么重写规则来实现这样的 URL 结构：

```
/            // (home) delivered by WP
/content1    // WP
/content(n)  // WP
/dashboard   // delivered by Laravel
/widgets/mywidget/    // Laravel 
```

*   所有 Laravel 页面都将在 /admin 或 /widgets 中，其他一切都将由 WordPress 处理，包括 404
*   我会让 WP 和 Laravel 完全分开。
*   我和我的同事将使用管理员帐户编辑 WP，不会有其他 WP 用户
*   我将完全分开管理这两个应用程序的演示文稿

我已经按如下方式设置了我的文件，并测试了每个应用程序彼此独立工作。（即，如果 Laravel 的重写规则是唯一使用的，Laravel 使用 laravel-index.php 可以正常工作）

来自网络根目录：public_html/

```
/wordpress
/laravel3   // app dir
/css        // these are from the laravel public dir 
/images     //
/js, etc    //
/index.php  // WP index.php
/laravel-index.php    // laravel's index.php 
```

我在一个无法访问 httpd.conf 的共享主机环境中。

这是我的 .htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^widgets  -  [L]
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress

# Laravel
<IfModule mod_rewrite.c>
RewriteRule !^widgets - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ laravel-index.php/$1 [L]
</IfModule> 
```

这样：

*   我可以访问我的 WordPress 页面，并且
*   WP 为未知 URL 提供 WP-404，但是
*   /widgets 得到一个普通服务器 404，而
*   /laravel-index.php/widgets 显示正确的内容。

另一个问题是 WP Dashboard 正在窃取对 /dashboard 的请求，我想将其重定向到 Laravel

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T15:26:20.160

对于 WordPress，您需要将所有不在小部件或仪表板文件夹中的请求发送到 index.php

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond !^widgets
RewriteCond !^dashboard
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

对于 Laravel，您需要做相反的事情，仅将小部件或仪表板内部的请求发送到 laravel-index.php

```
# Laravel
<IfModule mod_rewrite.c>
RewriteCond ^widgets
RewriteCond ^dashboard
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ laravel-index.php/$1 [L]
</IfModule> 
```

# c# - 使用 RX 或 C# 中的线程在 WCF 服务方法中并行执行

> ID：14605488
> 
> 赞同：1
> 
> 时间：2013-01-30T13:42:54.900
> 
> 标签：c#, multithreading, wcf, system.reactive

晕在那里，

我正在使用 VS 2010，并且我有一个 winform 客户端应用程序和一个 wcf 服务。从我的客户那里，我将调用 wcf 服务。我实现了回调功能并使用 netnamedpipe 绑定。我调用了一个服务方法。这个方法里面有一个 UserAccount 对象的列表。此方法将遍历每个 UserAccount 对象并调用一个长时间运行的进程。在每个进程结束时，它会触发事件[callback]来通知进程的状态。我打算为 UserAccount 对象的每个进程使用后台工作人员。但是 Rx 反应式框架具有更可靠的功能来满足这一要求。在这种情况下使用 RX 是否可以并行执行？我只是调用 wcf 服务调用。

```
1\. Client ---> Wcf ----> wcf.DoLongRunning() ---> 
2\. foreach (UserAccount usr in UserAccountLists)  // Is there anyway to avoid looping
   { 
       class A = new class(); 
       call A.Method1(usr) and A.Method2(usr) // call these 2 methods parallel.
       // these 2 methods have return values. how to handle that one also in Rx ???
   } 
```

这似乎是并行执行中的并行执行。

任何人都可以使用 Rx 或任何线程模型为这个功能提出一个好的方法。处理每个对象将花费更多时间。有什么方法可以并行执行？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:16:53.803

你试过使用`Parallel.Foreach`吗？

```
Parallel.ForEach<UserAccount>(UserAccountLists, usr =>
{
    classA A = new classA(); 
    A.Method1(usr);
    A.Method2(usr);
}); 
```

代码将`Parallel.Foreach`等待所有操作完成后再继续。

另一种方法是让 foreach 保持原样，并将方法调用更改为 use `Task`：

```
Task t1 = new Task(() => A.Method1(usr));
t1.Start();

Task t2 = new Task(() => A.Method2(usr));
t2.Start(); 
```

这样，该方法将在所有操作完成之前返回。所以我想这取决于你想要什么。请注意，在`Task`示例中，这两种方法将彼此独立运行，我不知道在您的情况下是否可以。

编辑：如果任务具有结果类型，则可以访问任务的结果。可以通过给 Task 一个通用参数来指定结果类型： `Task<string>`将具有`string`.

至于数千个任务：我认为简单地创建数千个任务对象是不明智的。但是，您可以搜索 custom`TaskScheduler`的各种实现。这应该使您可以更好地控制“许多”任务的创建和执行。

# python - 如何在 Python 中模拟函数以更改默认关键字参数

> ID：14605498
> 
> 赞同：3
> 
> 时间：2013-01-30T13:43:29.820
> 
> 标签：python, mocking, keyword-argument

我正在使用模拟库和 unittest2 来测试我的软件项目的不同方面。

目前我有以下问题：是否可以模拟一个函数，以便默认关键字参数不同，但功能仍然存在？

说我有以下代码

```
class C():
  def fun(self, bool_arg = True):
    if bool_arg:
      return True
    else
      return False 
```

如果我想模拟 C.fun 怎么办：

```
C.fun = mock.Mock(???) 
```

这样 C 的每个实例都会将关键字“bool_arg”替换为 False，而不是 True，结果为：

```
c = C()
c.fun() 
```

返回：

> 错误的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:20:21.293

您也可以尝试包装您的功能。线上的东西

```
def wrapper(func, bool_arg):
    def inner(*args, **kwargs):
        kwargs['bool_arg']=bool_arg
        return func(*args, **kwargs)
    return inner 
```

和

```
class C():
    def fun(...):
        ...

c = C()
c.fun = wrapper(fun, False) 
```

应该管用

**编辑**

如果要更改类而不是特定实例的默认值，可以创建派生类并重新定义`fun`包装`C`. 在线上的东西（我现在没有时间测试它）：

```
class D(C):
    def fun(self, *args, **kwargs):
        f = wrapper(C.f, False)
        return f(*args, **kwargs) 
```

然后关于@Ber的建议，你可以定义`def wrapper(func, **wrapkwargs)`然后代替`kwargs['bool_arg']=bool_arg`do

```
for i in wrapkwargs.iteritems():  #wrapkwargs is a dictionary
    kwargs[i[0]] = i[1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:53:55.453

您可以尝试使用此代码：

```
>>> import mock
>>> 
>>> class C():
...   def fun(self, bool_arg = True):
...     if bool_arg:
...       print "True"
...     else:
...       print "False"
... 
>>> c = C()
>>> funCopy = c.fun
>>> c.fun = mock.Mock(side_effect=lambda bool_arg=False: funCopy(bool_arg=bool_arg))
>>> c.fun()
False 
```

希望这可以帮助

# c# - ASP.NET Timer 刷新完整页面

> ID：14605499
> 
> 赞同：1
> 
> 时间：2013-01-30T13:43:30.383
> 
> 标签：c#, asp.net, azure

我已经开始了一个项目，其中一个图像框正在更新每个新框架。但是我的 ASP.NET 计时器更新了整个页面......这是我的项目的演示，带有实时视图.. 点击“Live beeld”：[应用程序](http://ferryjongmans.azurewebsites.net/)

该应用程序尚未使用密码加密...

```
protected void tmrLive_Tick(object sender, EventArgs e)
{
    if (Label1.Text != ""&& Label1.Text!="")
    {
        liveUriList.Items.Clear();
        CloudBlobClient blobClient = new CloudBlobClient("http://ferryjongmans.blob.core.windows.net/", new StorageCredentialsSharedAccessSignature(signature.Text));
        CloudBlobContainer container = blobClient.GetContainerReference(cameraList.Items[Convert.ToInt32(Label1.Text)].ToString());
        CloudBlobDirectory direct = container.GetDirectoryReference(cameraList.Items[Convert.ToInt32(Label1.Text)].ToString());
        BlobRequestOptions options = new BlobRequestOptions();
        options.UseFlatBlobListing = true;
        options.BlobListingDetails = BlobListingDetails.Snapshots;
        foreach (var blobItem in direct.ListBlobs(options))
        {
             string uri = blobItem.Uri.ToString();
             Regex regex = new Regex(comboBox1.SelectedItem.ToString() + "/(.*).jpeg");
             var v = regex.Match(blobItem.Uri.ToString());
             string s = v.Groups[1].ToString();
             pictureBox2.ImageUrl = uri + signature.Text;
        }
    }
} 
```

我希望有人可以帮助我建立一个不会刷新整个页面的漂亮计时器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:46:49.100

您应该将要更新（刷新）的区域包裹在 UpdatePanel 中。计时器本身应该在这个 UpdatePanel 内

在您的页面中添加该部分，并将您要更新/刷新的控件放在 UpdatePanel 的 contenttemplate 部分中。

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">

 <ContentTemplate>
        <asp:Image ID="pictureBox2" runat="server"></asp:Image>
    <asp:Timer ID="tmrLive" runat="server" OnTick="tmrLive_Tick"></asp:Timer>
 </ContentTemplate>
</asp:UpdatePanel> 
```

# svg - Illustrator 到 SVG：如何计算 TextPath 的“startOffset”？

> ID：14605511
> 
> 赞同：1
> 
> 时间：2013-01-30T13:44:29.200
> 
> 标签：svg, adobe-illustrator

简单示例：我在 Illustrator 中绘制了一条 1000 像素的水平线（在 CS5 和 CS6 中尝试过）并在其上放置文本。我将路径上文本的起点拖到250px。

当我导出到 SVG 时，我希望 Illustrator 将 textPath 标记的“startOffset”属性设置为 25%。相反，它大约是 32%（三分之一？？）。

但是，当我将文本拖动到 500 像素时，“startOffset”按预期设置为 50%。

在 750 像素处，属性将为 67%。

问题是，在 Firefox 中查看 SVG，文本显示在不同的位置，因为它似乎以线性方式应用百分比。所以 32% 真的意味着 320 像素，而不是 Illustrator 计算出来的 250 像素……

我在这里错过了什么吗？或者有人知道重新计算百分比以便在 SVG 中正确显示的方法吗？

感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:30:16.467

好的，所以我想出了如何计算正确的百分比：

*   显然，Illustrator 会根据路径段的数量计算百分比。如果路径由两段（即 3 个顶点）组成，并且应用路径文本并将其定位在第二个顶点（“中间”），这将导致 SVG 文件中的 startOffset 为 50%，而不管每个路径段的大小。第一段可以长 1000px，第二段只有 4px（总路径长度为 1004px）：将文本放置在第二个顶点将始终导致 50%。

*   另一边的 SVG/浏览器根据总路径长度计算百分比。所以，参考上面的例子，文本不会被放置在 1000px 的长度（如果你查看段的数量，因此是 50%，因此是第一个段的结尾），而是 502px，即 50%总路径长度。

为了将“插图画家百分比”转换为“浏览器百分比”，您可以执行以下操作（未优化）：

```
 // Get the current percentage    
 var oldPercent = parseFloat(textPathNode.getAttribute('startOffset').split('%')[0])/100;

 // Get the path
 var parentPath = document.getElementById(textPathNode.getAttribute('xlink:href').split('#')[1])

 // Get the path segments
 var parentPath.getAttribute('d').match(/[MmLlHhCc][\d\,\.\-\s]+/g);

 // Calculate the percentage for one segment
 var percentPerSegment = 1/segments.length;

 // Find out on which segment the textPath lies
 var offsetIsOnSegmentNo = Math.floor(oldPercent/percentPerSegment);

 // Calculate the length of that segment
 var virtualPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
 virtualPath.setAttribute('d', 'M0,0'+segments[offsetIsOnSegmentNo]);
 var segLength = virtualPath.getTotalLength();

 // Calculate the total path length of the previous segments
 var prevSegLength=0;
 var prevD = '';
 for(var i=0; i<offsetIsOnSegmentNo; i++)
    prevD += segments[s];

 var virtualPrevPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
 virtualPrevPath.setAttribute('d', 'M0,0'+prevD);
 var prevPathLength = virtualPrevPath.getTotalLength();

 // Calculate the actual path length for the old percentage             
 var totalLength = prevPathLength + segLength*(oldPercent-(percentPerSegment*offsetIsOnSegmentNo))/(percentPerSegment);

 // Calculate the correct percentage
 var newPercentage = totalLength / parentPath.getTotalLength();

 textPathNode.setAttribute('startOffset', newPercentage*100+'%'); 
```

# iphone - ABRecordCopyValue 返回 0 ？

> ID：14605512
> 
> 赞同：0
> 
> 时间：2013-01-30T13:44:34.133
> 
> 标签：iphone, ios, objective-c, ios6, abaddressbook

我想要做的是获取所有联系人并依赖该联系人是否具有**SocialProfileProperty**，在获取所有具有**SocialProfileProperty**的联系人后，我将进行简单过滤以了解它是否是**Facebook、Twitter、..**

在我发布这个问题之前，我整天都在试图找到任何解决这个问题的方法？？

**但它允许返回 0 ??**

```
ABAddressBookRef addressBook;
CFErrorRef *erer = NULL;
addressBook = ABAddressBookCreateWithOptions(NULL, erer);
CFArrayRef _allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex _nPeople = ABAddressBookGetPersonCount(addressBook);
NSMutableArray *socialArray = [[NSMutableArray alloc] init];
ABMultiValueRef socialProfiles;
for (int i=0;i<_nPeople; i++) {
    ABRecordRef _person=CFArrayGetValueAtIndex( _allPeople,i);
    NSNumber *recordId = [NSNumber numberWithInteger:ABRecordGetRecordID(_person)];
    NSLog(@"%@",recordId);
    socialProfiles = ABRecordCopyValue(_person, kABPersonSocialProfileProperty);
    if (ABMultiValueGetCount(socialProfiles)>0) {
        [socialArray addObject:(__bridge id)(socialProfiles)];
    }
}
NSLog(@"%d",socialArray.count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:46:46.633

它允许返回 0 ，直到用户将社交联系人与本地人联系起来，这确实

直到他尝试删除 Facebook 帐户才发生，例如在这种情况下会出现警报

并问你是否想结交联系人？？？否则返回 0 值:)

**因此，在用户将 FaceBook 联系人与本机联系人进行标记之前，此方法将永远不会起作用。**

# javascript - 在 PerformanceTiming 中，AJAX 请求时间对流程模型的哪一部分有贡献？

> ID：14605513
> 
> 赞同：1
> 
> 时间：2013-01-30T13:44:35.930
> 
> 标签：javascript, performance, browser, metrics

我正在使用[PerformanceTiming](http://www.w3.org/TR/navigation-timing/)接口来测量页面加载时间。

我的几个页面有很长的“浏览器时间”（即`loadEventEnd`- `responseEnd`），我认为这可能是因为来自页面的 Ajax 请求。

我的问题是：Ajax 请求在哪里适合 PerformanceTiming 流程模型？它在“处理”块中吗？

![过程模型](../Images/63cbbc2baab512d144275704c2007f6d.png)

如果是这样，衡量 Ajax 执行时间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T14:46:07.517

我们目前正在解决这个问题。几年来，我们收到了用 jQuery 的“文档就绪”计时器触发的 ajax 请求。这不应该 - 从技术上讲 - 扩展 loadEventEnd。然而，可以肯定的是，他们确实推出了 loadEventEnd。

现在，我们正在深入研究将这些值移到 loadEventEnd 之外的上一个版本发生了什么。

要真正衡量这些 ajax 请求，您需要使用 IE10 或 - 最好是 - 大于 28 的 chrome 版本。它们都包括 resourceTiming 接口。

对于页面上加载的每个资源，您可以访问类似于上面的 navigationTiming 界面的指标。

从 chrome 中的 javascript 控制台（在 Windows 上为 ctrl+shift+j），输入：

```
window.performance.getEntries() 
```

这将返回与您的页面关联的所有对象。要获取 ajax 请求，您需要 initatorType = xmlhttprequest。您可以通过以下方式找到所有这些事件：

```
for(var i=0; i<window.performance.getEntries().length;i++){  
    console.log(window.performance.getEntries()[i].initiatorType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T10:20:35.970

Ajax 请求在模型结束*之后*。

请参阅[https://stackoverflow.com/a/16289733/1168884](https://stackoverflow.com/a/16289733/1168884)以了解 Ajax 请求运行且不影响性能对象上的属性（仅反映页面的加载）的示例

我想根本的问题是，页面加载事件是完全定义的（例如，DOM 现在是完整且可用的），这反映在模型中。Ajax 事件不是（例如，当您可以说“页面上的所有 Ajax 现已完成运行”时，实际上并没有发生事件）。

我还没有尝试过，但是有一个项目 Boomerang 承诺允许测量动态加载的内容 - [http://lognormal.github.io/boomerang/doc/use-cases.html](http://lognormal.github.io/boomerang/doc/use-cases.html)

# automapper - automapper 缺少类型映射配置或不支持的映射

> ID：14605518
> 
> 赞同：1
> 
> 时间：2013-01-30T13:44:42.870
> 
> 标签：automapper

我正在尝试映射以下实体：

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Address Address { get; set; }
    public DateTime DOB { get; set; }
    public List<Telephone> Telephones { get; set; }
}

public class SearchPersonViewModel
{
    public int Id { get; set; }
    public string FullName { get; set; }
    public string LicencePlate { get; set; }
    public string CarMake { get; set; }
    public string CarModel { get; set; }
} 
```

我这样做：

```
 AutoMapper.Mapper.CreateMap<List<SearchPersonViewModel>, List<Person>>();
 List<SearchPersonViewModel> model = AutoMapper.Mapper.Map<List<Person>, List<SearchPersonViewModel>>(persons); 
```

我得到异常“缺少类型映射配置或不支持的映射”。

我看不出我的代码有什么问题，有人可以帮忙吗？

# c# - 如何将对象转换为元组？

> ID：14605520
> 
> 赞同：23
> 
> 时间：2013-01-30T13:44:46.550
> 
> 标签：c#, .net, combobox, tuples

我创建了我的元组并将其添加到组合框中：

```
comboBox1.Items.Add(new Tuple<string, string>(service, method)); 
```

现在我希望将项目转换为元组，但这不起作用：

```
Tuple<string, string> selectedTuple = 
                   Tuple<string, string>(comboBox1.SelectedItem); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T13:46:04.770

不要忘记`()`你的施法时间：

```
Tuple<string, string> selectedTuple = 
                  (Tuple<string, string>)comboBox1.SelectedItem; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-10-26T16:51:04.823

从 C# 7 开始，您可以非常简单地进行转换：

```
var persons = new List<object>{ ("FirstName", "LastName") };
var person = ((string firstName, string lastName)) persons[0];

// The variable person is of tuple type (string, string) 
```

请注意，**两个括号都是必需的**。第一个（从内到外）是因为元组类型，第二个是因为显式转换。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-30T13:46:03.260

你的语法是错误的。它应该是：

```
Tuple<string, string> selectedTuple = (Tuple<string, string>)comboBox1.SelectedItem; 
```

或者：

```
var selectedTuple = (Tuple<string, string>)comboBox1.SelectedItem; 
```

# android - 使用 java no XML 在 RelativeLayout 的底部显示 admob 广告

> ID：14605521
> 
> 赞同：0
> 
> 时间：2013-01-30T13:44:46.570
> 
> 标签：android, android-layout, admob, android-relativelayout, android-view

我设计了一个**没有 xml 布局**的游戏。我使用了**自己的视图**来扩展**SurfaceView**类。这是我正在使用的代码。

```
RelativeLayout rl = new RelativeLayout(this);
    RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT, 
            RelativeLayout.LayoutParams.WRAP_CONTENT);

    lay.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

    _ad=new AdView(this,AdSize.BANNER,"################");

    rl.addView(myView);
    rl.addView(_ad);

    _ad.loadAd(new AdRequest());
    setContentView(rl); 
```

myView 是扩展 SurfaceView 的类的实例，_ad 是 AdView 实例。

**我想在屏幕底部显示广告。但它们只显示在顶部。**

请建议我该怎么做。我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:11:36.440

我做的唯一错误是没有将我的 LayoutParams**布局**变量与**_ad** AdView 实例相关联。所以这里是修改后的代码。

```
RelativeLayout rl = new RelativeLayout(this);
RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT, 
        RelativeLayout.LayoutParams.WRAP_CONTENT);

lay.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

_ad=new AdView(this,AdSize.BANNER,"################");

rl.addView(myView);
rl.addView(_ad,lay); //line which was changed.Everything else was correct

_ad.loadAd(new AdRequest());
setContentView(rl); 
```

谢谢 StackOverflow。

# c - c - 交换字符串按值而不是引用传递？

> ID：14605526
> 
> 赞同：0
> 
> 时间：2013-01-30T13:44:54.100
> 
> 标签：c

我做了一个代码来交换两个字符串：

```
void swap (char *a, char *b)
{
    char *t = a;
    a = b;
    b = t;
}

int main()
{
    char * strings[2];
    strings [0] = "luck!";
    strings [1] = "good ";
    swap (strings[0], strings[1]);
    printf( "%s %s\n",strings[0], strings[1]);
    return 0;
} 
```

它失败了。我难以理解的是当我打电话时`swap()`我传递了两个指针。两个指针都指向它们分配的数组的第一个字符。然后我在函数内部创建了一个临时指针并执行基本切换。这里有什么缺陷？我真的很想了解为什么这种方法是错误的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:46:25.123

您正在切换函数的参数，这些参数是函数范围的本地参数。当您的函数执行时，参数（a，char* 类型，b，char* 类型）按值传递，放入堆栈，然后执行函数。参数被修改然后弹出堆栈没有效果。

要有所作为，您需要传递对参数的*引用*：

```
void swap (char **a, char **b)
{
    char *t = *a;
    *a = *b;
    *b = t;
} 
```

然后调用：

```
swap (&strings[0], &strings[1]); 
```

您现在将指针传递给 中的单个数组元素`strings`，该元素位于 main 的堆栈段中，因此在`swap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:46:31.240

您将副本传递给指向函数的指针，从而交换副本。在`C`您必须将指针传递给指针才能实际交换它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:49:17.430

如果要通过指针交换值，则需要使用形式的赋值

```
*a = *b; 
```

如果您要在代码中执行此操作，它将交换字符串的第一个*字符*。要交换指针，您需要具有 type 的参数`char**`，并通过`&strings[0]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:52:26.767

举个例子，关于其他答案的建议......

将您的`swap`功能更新为

```
void swap (char **a, char **b)
{
    char *t = *a;
    *a = *b;
    *b = t;
} 
```

然后在 main 中调用它

```
swap(&strings[0], &strings[1]); 
```

但是，您可能希望将字符串的分配更新为字符串，例如“luck！” 是恒定的，您不能更新其各个字符。

```
strings [0] = strdup("luck!");
strings [1] = strdup("good "); 
```

# php - jQuery/AJAX 发送自动生成的电子邮件，无需表单并停留在页面上

> ID：14605528
> 
> 赞同：0
> 
> 时间：2013-01-30T13:45:00.603
> 
> 标签：php, ajax, email, jquery

我知道这是一个广泛涵盖的主题，但我一直在网上搜索，但找不到针对我的具体问题的解决方案。

我想用 jQuery/AJAX 做什么（如标题中所述）：

我不想要用户可以填写的任何表格。我只想要一个按钮（一些 HTML 元素），单击该按钮将自动生成的邮件发送到预定义的地址。内容、主题或其他任何内容都不需要由查看者/用户“填写”。

只有一个变量（脚本将插入正确的值）应该放在电子邮件内容的某处。

单击按钮时，应发送邮件，该按钮应替换为“谢谢……”-消息，就是这样！没有重定向到另一个页面或诸如此类的东西。

到目前为止，我发现可能有用的内容：

```
$.ajax({
       type: "...",
       url: "...",
       cache: ...,
       contentType: "...",
       data: "{ 'body':'"  + myMsg + "'," +
                 "'to': '" + myAddr + "'," +
                 "'from': 'AUTOMAILER'," +
                 "'subject': " + mySubject + mySpecVar + "'" +
             "}",
       dataType: "...",
       complete: function (transport) {  if (transport.status == 200) $("#myButtonContainer").html("Success"); else alert("Please try again later"); }
   }); 
```

假设我的 HTML 是：

```
<p id="notify">Notify!</p> 
```

我的 JS 部分会像这样开始：

```
<script>
    $(document).ready(function(){
        $("#notify").click(function(){

            // THE JQUERY/AJAX STUFF HERE?

        });
    });
</script> 
```

我假设我至少还需要某种 .php 文件？貌似还是没看懂。。。

我仍然非常缺乏经验，非常感谢您的解决方案，甚至是朝着正确方向轻推！

如果这个问题已经为这个网站上的某个人解决了，我很抱歉。我没找到。

**编辑：**这一切都应该发生在客户端（尽可能）。这意味着电子邮件内容最终是在客户端生成的。对不起，忘了提。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:56:33.077

你忘了提一些重要的事情。生成电子邮件内容的“脚本”是客户端还是服务器端？

您所需要的只是可点击元素：

```
<button type="button" onclick="doStuff()">Send</button> 
```

ajax方法：

```
<script>
function doStuff()
{
    //var data =... ANY DATA YOU MIGHT NEED
    $.ajax({
       type: "POST",
       url: "sample.php",
       data: data,
       dataType: "text"
    });
}
//ADD here some jquery to change the button text
</script> 
```

然后你可以很容易地找到一个 php 脚本来发送电子邮件。如果电子邮件地址永不更改，您可以对其进行硬编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:50:40.623

您的 $.ajax 方法很好，但您需要一个最终发送邮件的服务器操作（在“url”中设置）。浏览器无法单独完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:51:22.920

电子邮件发送是在服务器端完成的，即 php。发布到 email.php 文件，然后发送电子邮件。如果您需要进行回调，请确保在 php 中也使用 json 函数。

# android - 更改列表视图中特定文本视图的字体颜色/字体

> ID：14605529
> 
> 赞同：0
> 
> 时间：2013-01-30T13:45:15.627
> 
> 标签：android, listview, android-listview, textview

有类似的问题被问到，但没有一个能解决我的问题。

我有一个填充了电子邮件的列表视图。我想要做的是在未阅读电子邮件时显示不同的文本颜色和字体。所以相关代码基本是这样的：

```
int color = isUnread ? R.color.color_email_unread : R.color.color_email_read;
viewHolder.subject.setTextColor(color);
if (isUnread){
    Typeface font = FontFactory.getInstance().getFont(context, "MyFont"); 
    viewHolder.subject.setTypeface(font);
} 
```

但这里的问题是它不会改变一个特定的文本视图。假设第一封电子邮件未读，其余的已读。它使列表视图中的每个项目都以 color_email_read 字体颜色显示，并且也没有字体更改。

知道如何按照我想要的方式管理它吗？原因与 Android 没有重新使用视图但无法找出解决方案有关。

更新：它与 isUnread 返回的内容无关，因为它总是返回预期值：

```
01-30 16:47:42.837: D/EmailListAdapter(5837): isUnread: false
01-30 16:47:42.837: D/EmailListAdapter(5837): isUnread - subject: linktest3 - text color should be: 2131427330
0
01-30 16:47:42.872: D/EmailListAdapter(5837): isUnread: false
01-30 16:47:42.872: D/EmailListAdapter(5837): isUnread - subject: subjectttttttttt - text color should be: 2131427330

01-30 16:47:42.922: D/EmailListAdapter(5837): isUnread: false
01-30 16:47:42.922: D/EmailListAdapter(5837): isUnread - subject: unread test - text color should be: 2131427330

01-30 16:47:42.972: D/EmailListAdapter(5837): isUnread: true
01-30 16:47:42.972: D/EmailListAdapter(5837): isUnread - subject: from unread test - text color should be: 2131427340 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:08:36.540

它可能与正在填充 isUnread 相关。如果它总是错误的，那么它显然会使你的所有项目都变成 color_email_read。它确实应该从适配器数据源中的某些内容中提取，而不是从与视图本身相关的任何内容中提取。

此外，这实际上与您的问题相反，但我相信如果您将 if(isUnread) 保留在代码中的方式，您将在实际读取的未读字体中出现项目。除非您已经有在其他地方执行此操作的代码，否则您应该添加类似的内容以避免该问题：

```
if(isUnread) {
     ...
} else {
     viewHolder.subject.setTypeFace(whatever_your_read_font_is);
} 
```

# php - 使用带参数的 filter_var

> ID：14605537
> 
> 赞同：6
> 
> 时间：2013-01-30T13:45:24.290
> 
> 标签：php

我正在尝试检查变量是否为整数以及她是否处于音调：2-15。

我正在尝试使用`filter_var()`功能。但我不明白如何正确使用`min_range`和`max_range`参数。

这不起作用，我错在哪里？

```
$c = 48;

if ( filter_var($c, FILTER_VALIDATE_INT , array("min_range"=>2,"max_range"=>15)) === false ) {
    echo "bad";
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T13:48:57.297

min_range 和 max_range 值必须是一层，更深：

```
// for filters that accept options, use this format
$options = array(
    'options' => array(
        'default' => 3, // value to return if the filter fails
        // other options here
        'min_range' => 0
    ),
    'flags' => FILTER_FLAG_ALLOW_OCTAL,
); 
```

见： http: [//php.net/filter_var](http://php.net/filter_var)

所以：

```
$c = 48;

if (filter_var($c, FILTER_VALIDATE_INT, array("options" => array("min_range"=>2,"max_range"=>15))) === false) {
    echo "bad";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:50:08.423

它们应该在选项数组中：

```
if ( filter_var($c, FILTER_VALIDATE_INT, array(
        "options"=>array(
            "min_range"=>2,
            "max_range"=>15
        )
    )) === false ) {
    echo "bad";
} 
```

似乎过于复杂的写作`2 <= $c && $c <= 15`方式

# eventbrite - Eventbrite 定制票 pdf

> ID：14605540
> 
> 赞同：0
> 
> 时间：2013-01-30T13:45:28.767
> 
> 标签：eventbrite

是否可以使用 event_list_attendees 来获取参加者列表及其活动的具体信息，以便将其放置到我自己定制设计的门票图形/PDF 上？

例如，我想创建自己的独立网站，链接到我的活动，让用户注册/购买门票，然后通过 API 从我的网站向用户发送自定义电子邮件以及特定于我的活动。在门票本身上，我想提取与会者姓名和订购门票的数量，以及条形码和活动信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:45:28.357

是的，这是完全可能的。请参阅[Eventbrite API 上的页面 - event_list_attendees](http://developer.eventbrite.com/doc/events/event_list_attendees/)

它应该为您提供所需的所有信息。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-29T06:51:53.993

您可能对 Pygmento 自定义电子邮件和门票感兴趣：[https](https://www.pygmento.com/en/blog/eventbrite-custom-tickets-pdf/) ://www.pygmento.com/en/blog/eventbrite-custom-tickets-pdf/ 。

您可以使用 Eventbrite 中的任何变量使用该服务自定义确认电子邮件和 pdf 票证：名字、姓氏、票证类别、条形码，甚至是用户定义的结帐字段。

# android - JB Media 编解码器问题

> ID：14605542
> 
> 赞同：0
> 
> 时间：2013-01-30T13:45:40.230
> 
> 标签：android, video, media, codec, decoding

我正在使用 JB 的硬件媒体编解码器。我正在尝试对视频进行编码并对其进行解码并使用编解码器（视频/avc格式）显示...

我正在使用两个按钮来“开始”和“停止”视频渲染。第一次，当我渲染视频时，它会正确显示。当我第二次启动视频时，它没有显示并引发以下错误：

“不在 AVI 模式下”

我复制粘贴开始和停止按钮的代码片段。

```
 public void Stop(){
    try {
        //stopping the decoder alone
        decoderMediaCodec.flush();
        decoderMediaCodec.stop();
        decoderMediaCodec.release();
         //Tried with various combination of flush(), stop() and release();
    } catch (Exception e) {
        e.printStackTrace();
    }

    public void Start(Surface view){
    try {
        decoderMediaCodec = MediaCodec.createDecoderByType(mime);//Initialize the decoder again
        MediaFormat format = MediaFormat.createVideoFormat(mime, mWidth, mHeight);
        format.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);
        format.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);
        format.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);
        format.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);
        decoderMediaCodec.configure(format, view, null, 0);
        decoderMediaCodec.start();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

请帮助我进行视频渲染。

注意：在解码器中接收到的数据是有效的......使用超越比较工具检查数据

我为 outputBufferIndex 得到 -1

```
 int outputBufferIndex = decoderMediaCodec.dequeueOutputBuffer(bufferInfo, 0); 
```

在日志中我得到

电子/（271）：

E/( 271):不在 avi 模式

电子/（271）：

E/( 271): 不在 avi 模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:02:15.143

如果您在遇到问题时可以共享更多日志，那就太好了。从您的问题的描述中，您能否确认`Surface`为您的第二次`Start`调用传递的是有效句柄？

如果您可以重建android，可能启用日志跟踪`Mediacodec.cpp`会有所帮助，特别是`Mediacodec::setNativeWindow`方法。

PS：对于解码器，为什么要设置I帧间隔、比特率和帧率？

# spring - 我应该验证表单数据，客户端还是服务器端？

> ID：14605544
> 
> 赞同：2
> 
> 时间：2013-01-30T13:45:44.417
> 
> 标签：spring, security, validation

起初，我打算通过javascript或jquery在客户端完成验证，但后来我意识到一些恶意用户可能会跳过我的jsp页面，将未经验证的数据发送到我的servlet。我的服务器端是使用 Spring+SpringMVC+mybatis 构建的，有什么方法可以让我在客户端保持验证，以及保持我的服务器安全（spring security 有帮助吗？）。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:48:39.193

您应该**始终**在服务器端进行验证。

客户端验证只是为了方便您的（诚实的）用户，并不会增加您系统的安全性。

必须始终进行服务器端验证，并且没有什么可以使您的服务器自动安全（从什么安全？**您**必须决定哪些输入对您的应用程序、数据库、用户、如何使用等是安全的）。

在服务器端重用客户端验证代码的唯一简单方法是使用[Node.js](http://nodejs.org/)或其他服务器端 JavaScript，例如[Rhino](http://www.mozilla.org/rhino)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:48:21.940

不幸的是，您需要验证服务器端以确保其安全。

恶意用户可以撤消您在客户端执行的任何操作。通常，客户端验证用于更快地向用户反馈并防止您的服务器获得过多的点击。所以它仍然是非常有益的，但你将需要两者。

# ios - 无法让我的 TableView 工作

> ID：14605545
> 
> 赞同：1
> 
> 时间：2013-01-30T13:45:47.113
> 
> 标签：ios, xcode, ipad, tableview

'根本无法让它工作！我有一个非常简单的 TableView 类，它占据了整个屏幕，但我决定把它切成两半，所以表格只占据了屏幕的上半部分。这是我的代码：

这是 TableSplitViewController.h

```
 @interface TableSplitViewController : UIViewController
{
    ChildrenTableViewController *firstController;
    IBOutlet UITableView *firstTable;

} 
```

这是 TableSplitViewController.m：

```
- (void)viewDidLoad
  { 
[super viewDidLoad];
if (firstController == nil) {
    firstController = [[ChildrenTableViewController alloc] init];
}
    [firstTable setDataSource:firstController];
    [firstTable setDelegate:firstController];
    firstController.view = firstController.tableView;

 } 
```

这是 ChildrenTableViewController.h：

```
@interface ChildrenTableViewController : UITableViewController

@property (nonatomic, strong) NSMutableArray *childname;

@end 
```

这是 ChildrenTableViewController.m：

```
 @implementation ChildrenTableViewController

         @synthesize childname;

  - (id)initWithStyle:(UITableViewStyle)style
  {
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
 }

  - (void)viewDidLoad
    {
     [super viewDidLoad];
     self.childname = [[NSMutableArray alloc]
                      initWithObjects:@"Oliver",
                      @"Stuart",
                      @"Ross",
                      @"Alex", nil];
}

   -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
   {
      if ([[segue identifier] isEqualToString:@"ShowChildrenDetails"]) {
            ChildrenDetailViewController *detailViewController = [segue     destinationViewController];

          NSIndexPath *myIndexPath = [self.tableView indexPathForSelectedRow];

          detailViewController.childrenDetailModel = [[NSArray alloc]
                                                    initWithObjects: [self.childname  objectAtIndex:[myIndexPath row]], nil];
     }
  }

    - (void)didReceiveMemoryWarning
  {
     [super didReceiveMemoryWarning];
     // Dispose of any resources that can be recreated.
  }

  - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
    // Return the number of sections.
    return 1;
  } 

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {

      // Return the number of rows in the section.
      return [self.childname count];
  }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
   {
        static NSString *cellIdentifier = @"childrenTablecell";

      ChildrenTableViewCell * cell = [tableView   dequeueReusableCellWithIdentifier:cellIdentifier];
        if (cell == nil) {
          cell = [[ChildrenTableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
       }
      // Configure the cell..
      cell.childname.text = [self.childname objectAtIndex:[indexPath row]];

    return cell;
} 
```

这是 ChildrenTableViewCell.h：

```
@interface ChildrenTableViewCell : UITableViewCell
@property (nonatomic, strong) IBOutlet UILabel *childname;

@end 
```

这是 ChildrenTableViewCell.m：

```
@implementation ChildrenTableViewCell

@synthesize childname;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
} 
```

这是故事板布局的打印屏幕。我已经附上了带有子名的标签，所以它应该打印出名字：

![截图 1](../Images/f9d81f95219b54e4d4fef042c53dd11d.png)

这是它运行的打印屏幕，奇怪的是它有 4 行，我可以选择它们，但没有打印标签：

![截图 2][2]

完全感谢您可以提供的所有帮助和支持。谢谢 ：）

[2] [http://puu.sh/1USzX/512ede1328](http://puu.sh/1USzX/512ede1328)

感谢IOSDEV，我设法找出它为什么这样做。

```
cell.childname.text = [self.childname objectAtIndex:[indexPath row]];
NSLog(@"%@",[self.childname objectAtIndex:[indexPath row]]);
NSLog(@"%@",cell.childname.text); 
```

这就是我放入我的代码的内容。

这就是我得到的：

```
2013-01-30 15:33:52.465 TableViewStory[17509:907] Oliver
2013-01-30 15:33:52.467 TableViewStory[17509:907] (null)
2013-01-30 15:33:52.470 TableViewStory[17509:907] Stuart
2013-01-30 15:33:52.472 TableViewStory[17509:907] (null)
2013-01-30 15:33:52.473 TableViewStory[17509:907] Ross
2013-01-30 15:33:52.474 TableViewStory[17509:907] (null)
2013-01-30 15:33:52.476 TableViewStory[17509:907] Alex
2013-01-30 15:33:52.477 TableViewStory[17509:907] (null) 
```

因此，您可以看到 cell.childname.text 等于 null，这就是文本没有出现的原因：PI 不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:08:33.610

您应该使用 TableSplitViewController.m 中的 initWithStyle

```
firstController = [[ChildrenTableViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

由于某种原因，当我没有使用它来初始化 tableView 时，我遇到了一些类似的问题。

# glassfish - java.lang.classcastexception：java.lang.long 不能转换为 java.lang.integer

> ID：14605546
> 
> 赞同：2
> 
> 时间：2013-01-30T13:45:50.797
> 
> 标签：glassfish

我有一个非常熟悉的异常，但是我异常地遇到了这个异常。

我的应用程序在**glassfish 3.1**服务器上运行良好，然后我将应用程序迁移到**glassfish 3.1.2**。服务器。我成功地将它部署到新服务器。

当我打开我的应用程序时，出现 java.lang.classcastexception: java.lang.long 无法转换为 java.lang.integer 的异常。

首先，我认为由于**ojdbc6.jar**而出现异常，然后我用**ojdbc14.jar**更改了它。我重新启动了服务器，但没有任何改变。我犯了同样的错误。现在，我不知道我必须做什么。

代码是：

```
geriDonecek.setToplamListeBuyuklugu((Integer)criteria2.setProjection(Projections‌​.rowCount()).uniqueResult()); 
```

请帮助我，我会很高兴的。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:57:16.270

使用该`Long.intValue()`函数将您的 long 转换为整数。

`criteria2.setProjection(Projections‌​.rowCount()).uniqueResult().intValue())`应该管用

# iphone - 以编程方式在 iPhone 6 中使用引导式访问

> ID：14605553
> 
> 赞同：1
> 
> 时间：2013-01-30T13:46:07.713
> 
> 标签：iphone, ios6, guided-access

到目前为止，据我所知，无法限制应用程序退出。用户可以按下主页按钮，应用程序将退出。然后是多任务处理，当我们按下主页按钮时，应用程序会进入后台，但长按用户仍然可以关闭应用程序。

我正在开发防盗类型的应用程序，需要以编程方式锁定手机，但似乎不可能。

另一个问题是，如果用户退出应用程序，那么它就无法从网络获取通知。[经过一番研究，我发现我们可以使用 iPhone6 提供的GUIDED ACCESS](http://www.assistiveware.com/support/faq/page/136)工具来限制应用程序退出。

但是我找到的所有链接都说明了从 iPhone 的设置菜单中执行此操作的过程。我想知道是否有任何方法可以以编程方式进行，或者至少直接显示相关的 iphone 设置屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:59:54.633

无法限制您的应用程序退出或允许它以编程方式锁定 iPhone。

这远远超出了您的应用程序以这种方式感染系统的安全范围和界限。

至于**引导式访问**，它是 iOS6 中提供的一项功能，允许父母与孩子一起使用他们的设备，并防止应用程序意外退出或意外点击超出特定范围。它还为使用 iPad 作为公共信息访问点的小型企业提供信息亭模式，这些企业希望 iPad 锁定到应用程序或网页。它不是允许您的应用打开此类块的公共 API。这也是为了设备的安全。

# android - 如何在android中播放.rm文件？

> ID：14605559
> 
> 赞同：3
> 
> 时间：2013-01-30T13:46:27.893
> 
> 标签：android, android-mediaplayer

MediaPlayer 播放 .mp3 文件没有任何问题。但是在播放 .rm 文件时，它会通过异常。

代码：

```
try{
     AssetFileDescriptor afd = getAssets().openFd("song.rm");
     MediaPlayer player;
     player = new MediaPlayer();
     player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
     player.prepare();
     player.start();                
  } catch(Exception e){
        System.out.println("Exception while Playing: "+e);                  
    } 
```

例外 ：

```
01-30 16:42:11.126: E/MediaPlayer(1404): Unable to to create media player
01-30 16:42:11.126: I/System.out(1404): Exception while Playing : java.io.IOException: setDataSourceFD failed.: status=0x80000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:49:55.583

RealMedia( `.rm`) 不是 Android[支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:57:21.503

您需要创建它。

```
public static MediaPlayer create (Context context, int resid) 
```

# url - 如何将自定义引擎的 url 放在 Refinerycms 中页面的 url 下

> ID：14605561
> 
> 赞同：1
> 
> 时间：2013-01-30T13:46:29.203
> 
> 标签：url, url-routing, refinerycms

在 Refinary 中，我有两个页面“home”和“about”。下面有一个引擎“新闻”：

*   主页）
*   关于（页）
    *   新闻（引擎）

新闻引擎获取的默认 url 是“/news”。是否可以改用网址“/about/news”。我想以这样的方式配置它，如果引擎在另一个页面下移动（例如“dummy”，引擎的 url 会自动更新为“/dummy/news”。

如何做到这一点？

# c# - 如何在 mvc2 的 html.label 助手中设置 ID 和文本

> ID：14605567
> 
> 赞同：12
> 
> 时间：2013-01-30T13:46:44.907
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-2

我想在 mvc2 的 html.label 助手中设置 ID 和 Text 属性

```
<%:html.label<have to set ID and Text properties here>%> 
```

请帮帮我..

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T14:25:56.343

Html.Label方法返回一个 HTML元素和由指定表达式表示的属性的属性名称[。](http://msdn.microsoft.com/en-us/library/ee310185(v=vs.98).aspx)`label`例如：

## ASPX 语法

```
<%: Html.Label("Text Content", new { id = "labelId" })%> 
```

## 剃刀语法

```
@Html.Label("Text Content", new { id = "labelId" }) 
```

第二个参数是 htmlAttributes，因此，您可以添加任何您想要的 html 属性作为此匿名对象的属性。例如：

`new { id = "id-element", name = "name-element", size = 10, @class = "css-class" }`

## 身份证件

如果你想`Id`通过一个 html 辅助方法，尝试使用：

```
@Html.IdFor(model => model.Property) 
```

# c++ - 按多列对 2D 向量进行排序

> ID：14605568
> 
> 赞同：0
> 
> 时间：2013-01-30T13:46:46.637
> 
> 标签：c++, sorting, vector, multiple-columns, 2d-vector

我正在使用以下提升算法对我的二维向量进行排序。

```
#include <vector>
#include <boost/algorithm/string.hpp>

using namespace std;

class StringListCompare
{
public:
  explicit StringListCompare(int column) : m_column(column) {}
  bool operator()(const vector<string>& lhs, const vector<string>& rhs)
  {
    // what do we do if lhs or rhs don't have (m_column + 1) elements?
    return lhs[m_column] < rhs[m_column];
  }
private:
  int m_column;
};

int main()
{
  std::vector <std::vector <std::string> > data;
  std::vector <std::string> temp;
  //
  // Load 2D vector 
  sort(data.begin(), data.end(), StringListCompare(2));

  //Print 2D vector after sorting by 2nd column
} 
```

在这里，我只能按我指定为参数的一列对向量进行排序。但我想按两列对这个向量进行排序。我的第一列应该排序。根据第一列排序，我想再次按第二列对向量进行排序。我怎样才能做到这一点 ？

我想先按第一列排序，然后将第一列相等的排序按第二列排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:56:19.200

如果我得到了你想要的，字典排序（和[`std::lexigraphical_compare`](http://en.cppreference.com/w/cpp/algorithm/lexicographical_compare)谓词）会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:48:37.263

你想要的是@distantTransformer 说一个[lexicographical_compare](http://www.cplusplus.com/reference/algorithm/lexicographical_compare/)。它的行为几乎就像`StringListCompare`您所做的那样，除了它将遍历整个字符串列表。[您对字符串列表进行排序，而不是像最常见的用例那样对字母进行排序，但这对于lexicographical_compare](http://www.cplusplus.com/reference/algorithm/lexicographical_compare/)无关紧要，因为它适用于迭代器。

如果您作为*学习经验*而想自己进行比较，并扩展您的 StringListCompare，您可以这样做：

```
bool operator()(const vector<string>& lhs, const vector<string>& rhs)
{
   for (int i = 0; i < lhs.size(); ++i) {         
     if (rhs.size() <= i) return false; //rhs has fewer strings than lhs
     if (lhs[i] < rhs[i]) return true;
     if (lhs[i] > rhs[i]) return false;
     //for loop continues while the two vectors are equal
   }
   return true; //rhs must be equal or a have more strings than lhs
} 
```

您可以考虑使用迭代器重写它，但这是一个基本实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:36:07.257

我试了一下号码。但我知道这是类型不匹配错误。

```
class StringListCompare
{

public:
  explicit StringListCompare(int column, int column2, string fCol, string sCol) : m_column(column), m_column2(column2) , fColType(fCol), sColType(sCol) {}

  bool operator()(const vector<string>& lhs, const vector<string>& rhs)
  {

        if (lhs[m_column] == rhs[m_column])
        {
             if (fColType.compare("string")==0)
                return lhs[m_column2] < rhs[m_column2];
            else  if (fColType.compare("number")==0)
                return atoi(lhs[m_column2]) < atoi(rhs[m_column2]);
        }

        else
        {
             if (fColType.compare("string")==0)
                return lhs[m_column] < rhs[m_column];
            else  if (fColType.compare("number")==0)
                return atoi(lhs[m_column]) < atoi(rhs[m_column]);
        }

  }
private:
  int m_column;
  int m_column2;
  string fColType;
  string sColType;
}; 
```

对于不同的数据类型排序，是否有任何逻辑可以这样做？

# c - 树莓派上的 OpenGL ES 1.1

> ID：14605576
> 
> 赞同：1
> 
> 时间：2013-01-30T13:47:04.993
> 
> 标签：c, opengl-es-1.1

我正在尝试在覆盆子上开始使用 OpenGL ES 1.1。由于 X 在覆盆子上没有加速，我认为这可能是一个很好的（和快速的）替代方案。现在我要做的主要是 UI 的东西，比如菜单等等，没有什么比疯狂的 3D 游戏更具有额外的地面效果和着色器了！这就是我选择 OpenGL ES 1.1 而不是 2.0 的原因。

现在我查看了 raspberry 上的 hello_triangle.c 代码，并了解了它的工作原理以及如何绘制和移动/旋转内容。

现在的问题是，当旋转和移动东西时，整个模型都会受到影响！我想要做的是拥有多个独立的对象（例如代表菜单​​项的矩形）并独立移动它们，因此我可以例如旋转当前选定的菜单项矩形。

谢谢！

PS.：[这是我一直在研究的 hello_triangle 代码的链接](https://github.com/raspberrypi/firmware/blob/master/opt/vc/src/hello_pi/hello_triangle/triangle.c)

# vim - 我可以在 Vim 启动时调用多个函数吗？

> ID：14605578
> 
> 赞同：3
> 
> 时间：2013-01-30T13:47:09.777
> 
> 标签：vim

我经常从 Visual Studio 向 Vim 发送文件。我将其设置为具有以下参数的外部工具：

```
"+call cursor($(CurLine), $(CurCol))" 
```

但是，我也希望能够调用我自己的函数。当我从 VS 编辑文件时，我希望窗口很大，所以我希望能够执行以下操作：

```
"+call cursor($(CurLine), $(CurCol)); +call Embiggen()" 
```

但是，这是行不通的。我尝试了一些变体（例如`, call Embiggen()`，等）。

显然我可以编写自己的`PlaceCursorAndEmbiggen`函数，但我真的不想这样做。有没有办法在 Vim 启动时调用多个函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T13:48:24.923

尤里卡！

只需传递两个字符串：

```
"+call cursor($(CurLine), $(CurCol));" "+call Embiggen()" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:05:58.390

如果您使用替代的、更常见的语法，也许解决方案会更容易找到：`-c "cmd"`而不是`"+cmd"`. 根据`:help -c`，您最多可以传递其中的 10 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:37:02.223

这些确切的命令可以使用管道符号组合成一个：

```
"+call cursor($(CurLine), $(CurCol)|call Embiggen()" 
```

. 通过这种方式可以组合更多，但有些`:normal`不能，请使用@Ingo Karkat 或您自己的答案。如果您在 +commands 上很短*并且仍然不想创建`.vim`文件，您可以使用`:execute`

```
vim -c "execute 'normal! 1' | execute 'normal! 2'" 
```

或 (bash/zsh)`-S`与进程替换：

```
vim -S <(echo '
    normal! 1
    normal! 2
') 
```

. 虽然大多数时候最好只创建一个`.vim`文件。

* 您最多可以传递 10 个`+`or `-c`（它们是等价的，它们不单独计算）和 10 个 other `--cmd`，尽管字母不太有用。

# eclipse-plugin - 一个插件中的多个 org.eclipse.help.contexts 扩展

> ID：14605579
> 
> 赞同：1
> 
> 时间：2013-01-30T13:47:09.890
> 
> 标签：eclipse-plugin, eclipse-rcp

我想要一个 Eclipse 插件。

> 请注意，来自不同插件的多个上下文文件可以与上下文 ID 相关联。这允许一个插件扩展另一个提供的上下文帮助。

但这似乎没有按预期工作。我是这样定义它们的。

```
 <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="context_help_A.xml"
            plugin="com.a.a">
      </contexts>
   </extension>
   <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="context_help_B.xml"
            plugin="com.a.b">
      </contexts>
   </extension> 
```

调试时仅出现 com.aa 上下文，而 com.ab 上下文不起作用。我不想部署插件只是为了将上下文文件放入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:19:50.477

我意识到这听起来很蹩脚，但你有没有尝试像下面这样定义你的上下文？JDT 用户文档插件 (org.eclipse.jdt.doc.user) 就是这样做的。

```
<contexts file="..." plugin="..." /> 
```

# c# - 使用“在解决方案中运行所有测试”时测试失败

> ID：14605580
> 
> 赞同：1
> 
> 时间：2013-01-30T13:47:10.120
> 
> 标签：c#, unit-testing, asp.net-mvc-4, mvccontrib-testhelper

我正在尝试为我的 MVC 4 Web 应用程序项目成功运行单元测试。

当我单独运行测试类时，所有测试都通过了，当我在解决方案中运行所有测试仅通过 2/9 时，我单击了 Debug Checked Tests 并且当我再次点击运行时它们都通过了，它们也都通过了。

当我将项目签入 TFS 时，这个问题也会被复制，我已经设置了他们项目构建的持续集成，运行测试并在完全相同的测试中失败。

我回来的错误是***“名为''的路由已经在路由集合中”**

有人知道为什么会发生这种情况吗？

在每个类中，我都有一个 [TestInitialize] 块，如下所示：

```
[TestInitialize]
public void Setup()
{
    var builder = new TestControllerBuilder();
    controller = new MyController();
    builder.InitializeController(controller);

    RouteConfig.RegisterRoutes(RouteTable.Routes);
} 
```

当我没有包含 TestControllerBuilder 时，我在类中遇到了类似的错误，可能是这段代码运行不正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:49:58.780

[`RouteTable.Routes`](http://msdn.microsoft.com/en-us/library/system.web.routing.routetable.routes.aspx)是静态的，因此每个 AppDomain 只会被初始化一次。

因此，每次运行测试时，实际上都是在尝试重新注册相同的路由。

您可能最好将您的路线注册移动到一个[`AssemblyInitialize`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.110%29.aspx)属性中，这样它只会在整个测试运行开始时运行一次。

# highcharts - highcharts 的导出服务器

> ID：14605583
> 
> 赞同：0
> 
> 时间：2013-01-30T13:47:13.823
> 
> 标签：highcharts

这与 Highcharts 中推出的新功能有关 - 使用 PhantomJS 导出服务器

[http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)

one2team 完成的 Highcharts 服务器端导出与这个新发布的导出服务器在性能方面是否有任何比较？同样在更高的容量下，从 Java 产生一个新线程并启动一个新的 PhantomJS 进程是否稳定？您能否分享有关峰值容量、测试的并发用户数、服务器配置的响应时间的统计数据？

问候拉姆库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:57:00.013

One2Team 的导出服务器解决方案在后台使用了[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)，而且 Rhino 似乎并不总是返回 SVG 元素的精确边界框。为了在 Highcharts 中构建布局，边界框用于计算边距。如果边界框的大小不正确，可能会导致例如标签重叠。

根据我在 Highcharts 的经验，提供的 Java/PhantomJS 解决方案非常稳定。它运行稳定了将近两个月。我们没有进行基准测试，但平均而言，我们每天每分钟获得 6 次访问。

# c - stderr 文件将其内容转储到哪里？

> ID：14605585
> 
> 赞同：1
> 
> 时间：2013-01-30T13:47:20.177
> 
> 标签：c, linux

我想知道标准错误在哪里转储其内容。我有一个问题，比如它是否转储到系统日志？请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:49:15.133

`stderr`只是另一个输出流，就像`stdout`.

它连接的位置取决于应用程序的调用方式。

例如，如果我运行，`foo.exe 2> errors.txt`那么`stderr`将写入指定的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:50:23.257

每当您决定重定向 Stderr 输出时，它就会被转储。

如果您在 GUI 环境中运行程序，通过单击图标或其他东西，`.xsession-errors`在您的`$HOME`.

如果您从 shell 运行程序并且不重定向 stderr，您只会在终端上看到它（并且它不会保存在其他任何地方）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:50:25.563

这取决于环境。

默认情况下，stderr 通常连接到与 stdout 相同的位置，即当前终端。

否则，您将看不到令人讨厌的错误。

[这是一篇](http://mischasan.wordpress.com/2011/05/25/redirecting-stderr-to-syslog/)关于将 stderr 重定向到系统日志机制的博客文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:50:37.207

`stderr`是一个流。它由拥有进程管理和输出。它的“去向”由流程的调用方式定义。父进程可以收集它并将其写入文件、忽略它、将其重定向到`/dev/null`（本质上是装箱）等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:52:48.780

虽然`stderr`可以重定向到其他地方，但它通常输出到与`stdout`. 要将其写入系统日志，您肯定需要做一些工作。此链接： [使用 bash，如何将标准错误传递到另一个进程？](https://stackoverflow.com/questions/1507816/with-bash-how-can-i-pipe-standard-error-into-another-process)

显示了如何通过管道将 stderr 传输到管道，并且如果另一个进程是写入“syslog”的进程，它将执行您想要的操作。但在大多数情况下，将系统日志功能添加到您自己的程序中可能更容易。

# google-maps-api-3 - Google Maps v3：路线图的最大缩放级别是多少？

> ID：14605590
> 
> 赞同：0
> 
> 时间：2013-01-30T13:47:38.113
> 
> 标签：google-maps-api-3

我熟悉如何使用 MaxZoomService 来确定卫星图像的最大缩放级别。但是如何确定`google.maps.MapTypeId.ROADMAP`MapType 的最大缩放级别？

或者更好的是，如何确定给定 MapTypeId 的最大缩放级别，例如返回的`map.getMapTypeId()`？

`map.mapTypes[map.getMapTypeId()]`返回未定义，因此我无法访问`.maxZoom`此处指出/建议的 MapType 属性： [如何检测用户何时处于最大缩放级别？（谷歌地图 v3）](https://stackoverflow.com/questions/7513417/how-do-i-detect-when-a-user-is-at-the-maximum-zoom-level-google-maps-v3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:08:34.030

有错别字，应该是：

```
map.mapTypes[map.getMapTypeId()]
//------------------------^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:06:17.810

您无法`map.mapTypes[map.getMapTypeId()]`按照此处的说明阅读：

> **您不直接从地图类型注册表中读取**。相反，您可以通过添加自定义地图类型并将它们与您选择的字符串标识符相关联来修改注册表。**您不能修改或更改基本地图类型**（尽管您可以通过更改地图关联的 mapTypeControlOptions 的外观将它们从地图中删除。

引自：[https ://developers.google.com/maps/documentation/javascript/maptypes#BasicMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#BasicMapTypes)

# android - Android：即使使用 AsyncTask，也从未调用过 onPictureTaken 方法

> ID：14605592
> 
> 赞同：1
> 
> 时间：2013-01-30T13:47:52.853
> 
> 标签：android, eclipse, android-camera

我想与活动“GameActivity”拍照 将图片保存在 SD 卡上 将图片与其他活动一起使用

问题是，当我只是保存图片而不做任何事情时，图片就被保存了。当我在 camera.takePicture 之后启动活动（方法 startActivity）时，永远不会调用 onPictureTaken 方法。

我读过它是因为 takePicture 方法的执行时间很长，所以我遵循了这个网站上的建议（[http://www.workreloaded.com/2011/06/how-to-use-the-android-camera /](http://www.workreloaded.com/2011/06/how-to-use-the-android-camera/) ) 并创建了一个扩展 AsyncTask 的类

```
public class PhotoTask extends AsyncTask<Boolean, Void, Void> {
public PhotoTask(Camera camera, SurfaceView surfaceCamera,boolean isPreview, SurfaceHolder holder, GameActivity gameactivity) {
constructor
}

    @Override
protected Void doInBackground(Boolean... params) {
     camera.takePicture(null,null, myPictureCallback_JPG);
        Log.w("GAMEACTIVITY","TAKEPICTURE");
        return null;
}

    @Override
protected void onPostExecute(Void result) {
    Log.w("GAMEACTIVITY","INTENT");
     Intent intent = new Intent(gameactivity.getApplicationContext(),ShareActivity.class);
     // Sending the picture taken to ShareActivity
     intent.putExtra("PICTURE_TAKEN", output);
     gameactivity.startActivity(intent);
}

PictureCallback myPictureCallback_JPG = new PictureCallback(){

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        Log.w("GAMEACTIVITY","FIRST");
            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "/KersplattFolder");
            imagesFolder.mkdirs(); 
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
            String date = dateFormat.format(new Date());
            String fileName = "Kersplatt_" + date + ".jpg";
            output = new File(imagesFolder, fileName);
            try {
                FileOutputStream fos = new FileOutputStream(output);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            catch (IOException e) {
                e.printStackTrace();
            }
            camera.startPreview();
            }
}; 
```

}

在 GameActivity 我有

```
PhotoTask photoTask = new PhotoTask(camera,surfaceCamera,isPreview,holder,GameActivity.this);
photoTask.execute(null); 
```

触摸屏幕时（拍照）

为什么我的方法 onPictureTaken 没有在那里调用？（当我删除 onPostExecute 方法时调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:52:18.957

我建议服用

```
 Intent intent = new Intent(gameactivity.getApplicationContext(),ShareActivity.class);
 // Sending the picture taken to ShareActivity
 intent.putExtra("PICTURE_TAKEN", output);
 gameactivity.startActivity(intent); 
```

到 PictureCallback 而不是 onPostExecute

当你完成存储图像然后移动到下一个活动

# c - Linux 不允许我访问固定的内存区域

> ID：14605595
> 
> 赞同：2
> 
> 时间：2013-01-30T13:48:03.830
> 
> 标签：c, linux, memory-management

我有一些数据存储在闪存中，我需要使用 C 指针访问这些数据才能使非 Linux 图形驱动程序工作（我认为这个要求与 DMA 相关，不确定）。调用 read 有效，但我不想在 FLASH 和非 Linux 驱动程序之间有中间 RAM 缓冲区。

然而，仅仅创建一个指针并将我想要的地址存储在它上面就会让 Linux 发出一个关于我的无效访问的异常。

```
void *ptr = 0xdeadbeef;
int a = *ptr; // invalid access! 
```

我在这里想念什么？有人可以向我指出一种材料来让我清楚地了解这些概念吗？

我正在阅读有关[mmap](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)的信息，但我不确定这是否是我需要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:10:02.173

您遇到的问题是 linux 在[虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)中运行您的程序。因此，您在代码中直接使用的每个地址（如 0xdeadbeef）都是一个虚拟地址，由[内存管理单元](http://en.wikipedia.org/wiki/Memory_management_unit)转换为物理地址，该物理地址不一定与您的虚拟地址相同。这允许轻松分离多个独立进程和其他东西，如分页等。

现在的问题是，在您的情况下，没有物理地址映射到虚拟地址 0xdeadbeef 导致内核中止执行。

您已经找到的调用 mmap 要求内核将特定文件（从特定偏移量）分配给进程的虚拟地址。请注意，mmap 的返回地址可能是完全不同的地址。所以不要对你得到的虚拟地址做任何假设。

因此，存在 mmap 和 /dev/mem 的示例，其中内存设备的偏移量是物理地址。在内核能够将文件从您提供的偏移量分配给进程的虚拟地址之后，您可以像直接访问一样访问内存区域。

在您不再需要该区域后，请不要忘记对该区域进行 munmap。否则你会导致类似于内存泄漏的事情。

/dev/mem 方法的一个问题是运行该进程的用户需要访问该设备。这可能会引入安全问题（例如[，三星最近](http://www.h-online.com/open/news/item/Samsung-promises-patch-for-critical-smartphone-vulnerability-1773557.html)在其手持设备中引入了此类安全漏洞）

一种更安全的方法是我发现的一篇文章（[The Userspace I/O HOWTO](http://www.kernel.org/doc/htmldocs/uio-howto.html)）中描述的方法，因为您仍然可以控制用户进程可访问的内存区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:20:49.403

您需要以不同的方式访问内存。基本上你需要打开 /dev/mem 并使用 mmap()。（正如你所建议的）。简单的例子：

```
int openMem(unsigned int address, unsigned int size)
{
int             mmapFD;
int             page_size;
unsigned int    page_start_address;

/* Minimum page size for the mmapped region. */
mask = size - 1;

/* Get the page size. */
page_size = (int) sysconf(_SC_PAGE_SIZE);

/* We have to map shared memory to beginning of memory page so adjust 
 * memory address accordingly. */
page_start_address = address - (address % page_size);

/* Open the file that will be mapped. */

if((mmapFD = open("/dev/mem", (O_RDWR | O_SYNC))) == -1)
{
    printf("Opening shared memory device failed\n");
    return -1;
}

mmap_base_address = mmap(0, size, (PROT_READ|PROT_WRITE), MAP_SHARED, mmapFD, (off_t)page_start_address & ~mask);
if(mmap_base_address == MAP_FAILED)
{
    printf("Mapping memory failed\n");
    return -1;
}
return 0;
}

unsigned int *getAddress(unsigned int address)
{
unsigned int    log_address;

log_address = (int)((off_t)mmap_base_address + ((off_t)address & mask));

return (unsigned int*)log_address;
}

...

result = openMem(address, 0x10000);

if (result < 0)
    return result;

target_address =  getValue(address);

*(unsigned int*)target_address = value; 
```

这会将“值”设置为“地址”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:11:46.417

你需要打电话`ioremap`- 比如：

```
void *myaddr = ioremap(0xdeadbeef, size); 
```

其中 size 是您的内存区域的大小。您可能希望对第一个参数使用页面对齐的地址，例如`0xdeadb000`- 但我希望您的实际设备无论如何都不在“0xdeadbeef”。

编辑：对 ioremap 的调用必须从驱动程序完成！

# twitter-bootstrap - 在对话框外单击时，twitter boostrap 模态触发

> ID：14605598
> 
> 赞同：2
> 
> 时间：2013-01-30T13:48:14.527
> 
> 标签：twitter-bootstrap, modal-dialog

如果用户在对话框外单击，引导模式中是否有触发事件的选项？

例如：当用户点击离开模态框时，我想添加**动画抖动css。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-07T07:55:56.017

```
$('#myModal').on('hidden.bs.modal', function (e) {
    // do something...
}) 
```

（来源： http: [//getbootstrap.com/javascript/](http://getbootstrap.com/javascript/)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:54:47.577

是的，使用**显示**的事件，您可以触发一个新功能，当有人单击主体（因此在模态之外）时，您可以执行某些操作。

记得添加也`event.stopPropagation()`不要在您单击外部时关闭模式。

这里有一个例子：

```
$('#myModal').on('shown', function () {
  $('body').on('click', function(e) {
    // your function...
    e.stopPropagation();
  });
}) 
```

* * *

```
$('#myModal').on('hidden', function () {
  $('body').off('click');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:53:54.197

这不是专门针对 Bootstrap 的，但应该可以按照您的要求进行操作。

以下代码片段检测页面上任意位置的点击。然后它会检查点击了什么，并据此决定要做什么。

```
$(document).click(function (e) {

        //Dont hide the button if it's a link or input that was clicked
        if ((e.target.nodeName == 'A') || (e.target.nodeName == 'INPUT')) return;

        HideSubmenus();
    }); 
```

在您的情况下，您可能会检查它是否不是 Div （因此不是 Modal）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T13:23:55.507

动画摇动是模态弹出框的默认功能。你只需要设置**背景：'静态'**来做到这一点。当有人在模态之外单击时，这将防止弹出框关闭并启用抖动动画。

```
$('#myModal').modal({
     backdrop:'static', show: true
}) 
```

有关更多信息，请查看[此](http://getbootstrap.com/2.3.2/javascript.html)

# jsf-2 - 从支持 bean 中的 inputtext 获取值（jsf 2）

> ID：14605599
> 
> 赞同：1
> 
> 时间：2013-01-30T13:48:17.010
> 
> 标签：jsf-2, managed-bean

我有一个包含一行的数据表，我需要编辑这一行的字段，所以我有一些带有值的 inputText，但是当我编辑它们并单击命令按钮（调用方法“actualizarUsuario”时，值被传递为无效的。

这是我的 bean 代码：

```
@ManagedBean(name = "user")
@ViewScoped
public class userDetalles implements Serializable {

    private Usuario u;
    private usuarioController controlador;
    Rol rol;

    private long selection;
    private long selectionrol;
    Agrupacion agrupacion;
    private Privilegio privilegio;
    private RolController controladorRol;
    private ControladorAgrupaciones controladorAgrup;
    private String nombres;
    private String apellidoP;
    private String apellidoM;
    private Boolean check;

    @PostConstruct
    public void init() {

       rol= new Rol() ;
       u=new Usuario();
       agrupacion=new Agrupacion();
       privilegio=new Privilegio();
       controlador= new usuarioController();
       controladorRol=new RolController();
       controladorAgrup=new ControladorAgrupaciones();
       Usuario u=new Usuario();
       FacesContext facesContext = FacesContext.getCurrentInstance();
       ExternalContext externalContext = facesContext.getExternalContext();

        //Obtener parametros del request
       Map<String, String> parameterMap = (Map<String, String>) externalContext.getRequestParameterMap();
       long iduser = Long.valueOf(parameterMap.get("id_usuario"));

       this.u=controlador.getUser(iduser);
    }

    public Usuario getU() {
        return u;
    }

    public void setU(Usuario u) {
        this.u = u;
    }

    public long getSelection() {
        System.out.println("selection value----------->"+selection);
        return selection;
    }

    public void setSelection(long selection) {
        this.selection = selection;
    }

    public long getSelectionrol() {
        return selectionrol;
    }

    public void setSelectionrol(long selectionrol) {
        this.selectionrol = selectionrol;
    }

    public String getNombres() {
        return nombres;
    }

    public void setNombres(String nombres) {
        this.nombres = nombres;
    }

    public String getApellidoP() {
        return apellidoP;
    }

    public void setApellidoP(String apellidoP) {
        this.apellidoP = apellidoP;
    }

    public String getApellidoM() {
        return apellidoM;
    }

    public void setApellidoM(String apellidoM) {
        this.apellidoM = apellidoM;
    }

    public Boolean getCheck() {
        return check;
    }

    public void setCheck(Boolean check) {
        this.check = check;
    }

    public void actualizarUsuario(){

        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        Map<String, String> parameterMap = (Map<String, String>)   externalContext.getRequestParameterMap();
        nombres=parameterMap.get("nombres");
        apellidoP=parameterMap.get("apellidoP");
        apellidoM=parameterMap.get("apellidoM");
        check=Boolean.parseBoolean(parameterMap.get("check"));
        //test
        System.out.println(nombres+" "+apellidoP+" "+apellidoM+" "+check);
        u.setNombres(nombres);
        u.setApellidoPaterno(apellidoP);
        u.setApellidoMaterno(apellidoM);
        u.setActive(check);
        controlador.saveUsuario(u);
    }

} 
```

这是我的观点：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">
    <div class="container">
        <h:panelGroup id="Users">
            <h:form id="Form">
                <h2>Detalles Usuario</h2>

                <h:dataTable id="users" value="#{user.u}"  styleClass="table table-striped table-bordered" headerClass="sorting_asc"
                             rowClasses="odd,even">
                    <h:column>
                        <f:facet name="header">#</f:facet>
                        #{user.u.id}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Identificador</f:facet>
                        <h:inputText id="identificador" value="#{user.u.identificador}" />
                    </h:column>
                    <h:column>
                     <f:facet name="header">Nombre</f:facet>

                     <h:inputText id="nombres" value="#{user.u.nombres}"/>
                     <h:inputText id="apellidoP" value="#{user.u.apellidoPaterno}"/>
                     <h:inputText id="apellidoM" value="#{user.u.apellidoMaterno}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Active</f:facet>
                        <h:selectBooleanCheckbox id="check" value="#{user.u.active}"></h:selectBooleanCheckbox>
                    </h:column>

                </h:dataTable>

                <h:commandButton  value="Actualizar" type="submit" styleClass="btn-primary" actionListener="#{user.actualizarUsuario}">
                </h:commandButton>
 </h:form>
            <script type="text/javascript" src="js/paging-bootstrap.js"></script>
            <script type="text/javascript" src="js/contenidoc.datatable.init.js"></script>
        </h:panelGroup>
    </div>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:05:51.063

您的具体问题是由于您使用了错误的参数名称而引起的。在生成的 HTML 输出和 HTTP 流量监视器中查找正确的参数名称。

但是，您的实际问题更大：您的视图/模型方法完全错误。你根本不应该使用 a `<h:dataTable>`。它旨在用于实体的集合`List<User>`，而不是单个实体`User`。你应该使用`<h:panelGrid>`. 您根本不需要在控制器中分解/展平模型属性。您已经在模型本身中拥有这些属性。不需要手动遍历请求参数映射。JSF 已经为您完成了所有工作。

我不会为你重写这个烂摊子，但你应该遵循以下启动示例：

模型：

```
public class User {

    private Long id;
    private String username;
    private String firstname;
    private String lastname;
    // ...

    // Autogenerate standard getters/setters.
} 
```

控制器：

```
@ManagedBean
@ViewScoped
public class EditUser {

    private User user; // Initialize it in postconstruct or as viewparam.
    private UserService service; // Initialize it as @EJB or in postconstruct.

    public void save() {
        service.save(user); // That's all. Really.
    }

    public User getUser() {
        return user;
    }

    // No other getters/setters! They are all already in User class.
} 
```

看法：

```
<h:panelGrid>
    <h:inputText value="#{editUser.user.username}" />
    <h:inputText value="#{editUser.user.firstname}" />
    <h:inputText value="#{editUser.user.lastname}" />
    <h:commandButton value="save" action="#{editUser.save}" />
</h:panelGrid> 
```

就这样。另请参阅[此 JSF 2.0 教程](http://balusc.blogspot.com/2011/01/jsf-20-tutorial-with-eclipse-and.html#CreateJSFHelloWorldInEclipseTheModel)。至于您通过 ID 获取用户的尝试，您应该使用`<f:viewParam>`，另请参阅[<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用于什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)和[JSF 2.0 中的通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)。

# android - 如何调用 setMobileDataEnabled()

> ID：14605607
> 
> 赞同：0
> 
> 时间：2013-01-30T13:48:41.650
> 
> 标签：android, connection, settings

我是 android 新手，但我知道很少有人这么想，但这对我来说很难：

首先我想检查我是否连接到互联网：工作。然后我想检查我启用的移动数据/wifi：是否有效。然后我想打开移动网络（如果它被禁用）以检查我是否有（好？）连接到互联网：不工作

我使用了来自[https://stackoverflow.com/a/8962211/1879409](https://stackoverflow.com/a/8962211/1879409)的代码，但我不知道如何调用这个方法？我还想在一个单独的类文件（.java 文件）中执行此操作，并从我的主要活动中调用此函数。

有人可以给我一个例子我怎么能做到这一点？

谢谢大家的回答xD

**编辑**

现在它在我的 Settings.java 中看起来像这样：

```
 import java.lang.reflect.Field;
import java.lang.reflect.Method;

import android.content.Context;
import android.net.ConnectivityManager;
import android.util.Log;

public class SettingsHelper {

    static void setMobileDataEnabled(Context context, boolean enabled) {
        try {

            final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            final Class conmanClass = Class.forName(conman.getClass().getName());
            final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
            iConnectivityManagerField.setAccessible(true);
            final Object iConnectivityManager = iConnectivityManagerField.get(conman);
            final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
            final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
            setMobileDataEnabledMethod.setAccessible(true);

            setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
            Log.i("setMobileDataEnabled()","OK");
        } 

        catch (Exception e) 
        {
            e.printStackTrace();
            Log.i("setMobileDataEnabled()","FAIL");
        }         
    }
} 
```

如果我调用 Settings.setMobileDataEnabled(context, true); 从我的 MainActivity 我得到：

```
 02-01 14:51:19.680: W/System.err(23318): java.lang.NullPointerException
02-01 14:51:19.700: W/System.err(23318):    at at.htlmbprojekt.wksimonsfeld.iceapp.SettingsHelper.setMobileDataEnabled(SettingsHelper.java:15)
02-01 14:51:19.700: W/System.err(23318):    at at.htlmbprojekt.wksimonsfeld.iceapp.MainActivity.checkIfStorageAvailable(MainActivity.java:83)
02-01 14:51:19.700: W/System.err(23318):    at at.htlmbprojekt.wksimonsfeld.iceapp.MainActivity.access$4(MainActivity.java:81)
02-01 14:51:19.700: W/System.err(23318):    at at.htlmbprojekt.wksimonsfeld.iceapp.MainActivity$2.onClick(MainActivity.java:76)
02-01 14:51:19.700: W/System.err(23318):    at android.view.View.performClick(View.java:4211)
02-01 14:51:19.700: W/System.err(23318):    at android.view.View$PerformClick.run(View.java:17267)
02-01 14:51:19.700: W/System.err(23318):    at android.os.Handler.handleCallback(Handler.java:615)
02-01 14:51:19.700: W/System.err(23318):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-01 14:51:19.700: W/System.err(23318):    at android.os.Looper.loop(Looper.java:137)
02-01 14:51:19.700: W/System.err(23318):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-01 14:51:19.700: W/System.err(23318):    at java.lang.reflect.Method.invokeNative(Native Method)
02-01 14:51:19.700: W/System.err(23318):    at java.lang.reflect.Method.invoke(Method.java:511)
02-01 14:51:19.700: W/System.err(23318):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-01 14:51:19.700: W/System.err(23318):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-01 14:51:19.700: W/System.err(23318):    at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:103)
02-01 14:51:19.700: W/System.err(23318):    at dalvik.system.NativeStart.main(Native Method) 
```

也许是因为上下文为空？如果是的话，我应该如何处理他的上下文？如果有人可以解决我的问题，请将整个代码发送给我，而不仅仅是一些片段，我是初学者，我不知道我应该如何处理这些片段 xD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:51:40.623

首先，为了使您的代码易于阅读，您可以使用“通用”异常处理程序，但是为什么使用通用异常处理程序而不是特定异常不是一个好主意，这是一个不同的主题，您可以在此处阅读：[http：/ /www.javaworld.com/javaworld/jw-10-2003/jw-1003-generics.html](http://www.javaworld.com/javaworld/jw-10-2003/jw-1003-generics.html)

无论如何，现在关于您的实际问题，请尝试下面给出的代码，除了将其格式化以使其更具可读性以及您获得 NULL 异常的原因之外，我没有进行任何更改，因为您试图使用它被实例化的范围之外的对象在。

```
private void setMobileDataEnabled(Context context, boolean enabled) {
    try {

        final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        final Class conmanClass = Class.forName(conman.getClass().getName());
        final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
        iConnectivityManagerField.setAccessible(true);
        final Object iConnectivityManager = iConnectivityManagerField.get(conman);
        final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
        final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
        setMobileDataEnabledMethod.setAccessible(true);

        setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);

    } catch (Exception e) {
        e.printStackTrace();
    }         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T14:33:56.343

如果您想创建一个类来使用您的代码，请执行以下操作：

在 MainActivity 的同一个包中创建一个新类。

给它起任何名字，例如：MyNetwork。

写下以下内容：

```
public class MyNetwork {

    setMobileDataEnabled(Context context, boolean enabled){

        ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

        Method setMobileDataEnabledMethod = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);

        setMobileDataEnabledMethod.setAccessible(true);
        setMobileDataEnabledMethod.invoke(conman, enabled);

        }

} 
```

现在只需从任何地方调用它：

```
MyNetwork mn;

mn.setMobileDataEnabled(getBaseContext(), true) //or false to disable your data. 
```

您可以在类中创建任何方法来调用它，只需调用如下：

```
mn.yourMethod() 
```

检查您是否在 Manifest.xml 中声明了正确的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T05:19:39.193

请检查您的清单并确保已添加“CHANGE_NETWORK_STATE”权限。

# spring - 在 Spring 注释控制器中执行自定义授权

> ID：14605619
> 
> 赞同：0
> 
> 时间：2013-01-30T13:49:11.527
> 
> 标签：spring, security, rest, spring-mvc, authorization

我开始使用带有 Spring 注释的控制器构建 REST API。

我的问题很简单：如何在一个共同的地方而不是 API 中执行身份验证/授权？

作为一名专业的 C# 开发人员，我通常`FilterAttribute`为我的控制器创建一个自定义，以实现任何所需的身份验证代码。

我不会使用`@Secured`属性，因为我处理基于自定义 HTTP 标头的自定义 REST 授权。我知道它`@Secured`适用于预定义的角色，或者我可能不太了解它的用法。

Spring 是否提供注释来执行早期过滤的控制器`HttpRequest`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:58:54.770

在 Web 容器级别有一个基于过滤器的身份验证和授权插件，由 Spring Security 提供。但是，您也可以将安全注释应用于控制器。. . 在幕后，这使用面向方面的编程来模块化安全问题。看看 Spring Security 和 AOP。

一旦您对 AOP 方面有所了解，您就可以随心所欲地自定义授权 - 基于角色、一天中的时间等 - 这可以由自定义注释驱动。

# c# - 即使在 Asp.net 中有数据，MySqlDataReader 也总是返回 False

> ID：14605621
> 
> 赞同：0
> 
> 时间：2013-01-30T13:49:13.323
> 
> 标签：c#, asp.net, datareader

嗨伙计们！我在 Asp.net 中创建了一个 C# 类和一个处理程序。在我的 C# 文件中，我创建了一个函数，如下所示：

```
public MySqlDataReader Consulta(String sql){

    String error="";

    try 
    {

        string connectionString = "Server=*****;Port=3306;Database=db;UID=*****;Pwd=****;pooling=false";
        MySqlConnection conn;
        conn = new MySqlConnection(connectionString);
        conn.Open();

        //string s = "select empid,empname,authcode from authcode";
        MySqlCommand cmd = new MySqlCommand(sql,conn);

        //cmd.CommandText = s;
        cmd.ExecuteNonQuery();

        rs =cmd.ExecuteReader();

        } 
        catch (Exception e) 
        {
            //error = e.getMessage();
        }

        return (rs);
} 
```

在我的处理程序文件中，我正在调用此函数，这是我的代码...

```
MySqldataReader rs = conexiondb.Consulta(strQuery);

total = conexiondb.countRec("price", "processeddata_table");

string json;
json = json + "{\n";
json = json + " \"page\":\""+intpage+"\",\n";
json = json + "\"total\":"+total_pages+",\n";
json = json + "\"records\":"+total+",\n";
json = json + "\"rows\": [";
rc =false;

while(rs.Read()){

    if(rc){
        json = json + ",";
    }
    json = json + "\n{";
    json = json + "\"price\":\"" + Convert.ToInt32(rs["price"]) + "\",";
    json = json + "\"cell\":[" + Convert.ToInt32(rs["price"]) + "";
    json = json + ",\"" + Convert.ToString(rs["username"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["ordinal"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["authcode"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["extension"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["trunk"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["dialnumber"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["dialdate"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["dialtime"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["duration"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["destination"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["price"]) + "\"";
    json = json + ",\"" + Convert.ToString(rs["toc"]) + "\"]";
    json = json + "}";

    rc=true;
}
json = json +"]\n";

json = json +"}";

HttpContext.Current.Response.Write(json); 
```

但是 datareader 没有读取它总是返回 false 的记录。请大家帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:53:20.420

去掉这行代码 `cmd.ExecuteNonQuery();`

编辑：[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)用于 DML 语句，例如`UPDATE`, `INSERT`。

阅读@Jon 关于异常处理的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:54:13.537

可能您的问题源于此局部变量

```
MySqlConnection conn; 
```

当您从 Consulta 方法退出时，此变量将被破坏并且基础连接已关闭。这将使您的 MySqlDataReader 无法使用，因为它需要打开的连接

我将重构您的代码，以这种方式删除对 Consulta 的调用：

```
string sql = "your SELECT command here";
string connectionString = "Server=localhost;Port=3306;Database=projecttt;" +
                         "UID=root;Pwd=techsoft;pooling=false";

using(MySqlConnection conn = new MySqlConnection(connectionString))
{
     conn.Open();
     using(MySqlCommand cmd = new MySqlCommand(sql,conn))
     {
          using(MySqlDataReader rs =cmd.ExecuteReader())
          {
               total = conexiondb.countRec("price", "processeddata_table");

               string json;
               json = json + "{\n";
               json = json + " \"page\":\""+intpage+"\",\n";
               json = json + "\"total\":"+total_pages+",\n";
               json = json + "\"records\":"+total+",\n";
               json = json + "\"rows\": [";
               rc =false;
               while(rs.Read())
               {
                  .....
               }
           }
       }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:18:18.570

您至少有两个问题，第一个是您正在吞噬任何异常。这可能会导致您的问题。如果出现异常，您很可能无法从阅读器中读取，这将导致您的 while 循环永远不会执行。有一个空的捕获是一个警告是有原因的

其次，您正在尝试同时执行 NonQuery（不查询数据的命令）和使用同一阅读器的查询。我不知道这是否会导致异常，但至少没有理由两者都做。您可以删除这两个问题

```
public MySqlDataReader Consulta(String sql){
            string connectionString = "Server=***;Port=3306;Database=****;UID=***;Pwd=****;pooling=false";
   var conn = new MySqlConnection(connectionString);
   conn.Open();

   var cmd = new MySqlCommand(sql,conn);
   var rs =cmd.ExecuteReader();
   return (rs);
} 
```

# .net - 我的 VS2012 安装似乎缺少核心报告功能

> ID：14605626
> 
> 赞同：2
> 
> 时间：2013-01-30T13:49:18.667
> 
> 标签：.net, sql, visual-studio-2012, rdlc

首先，如果这是错误的论坛，我深表歉意，但我强烈认为可以帮助解决这个问题的人实际上是开发人员自己......如果这个线程需要移动到另一个站点，请让我知道.. .

我们使用 Microsoft Reporting 框架编写了很多报告，主要是 RDLC。从 VS2008 升级到 VS2012 后，我无法再创建或打开 RDLC。当我尝试从“添加新项目”菜单添加新报告时，它甚至不是一个选项。我们确实安装了 DevExpress 报告，我可以使用 DX 引擎创建一个新报告，但这不是这里需要的。从我读过的所有内容来看，报告是 VS 的核心，而不是一个选项，因此需要安装它。如果我们一直在使用 SSRS，那么我知道我们需要从 SQL 安装而不是 VS 安装报告，但事实并非如此。我们已经尝试卸载并重新安装 VS2012，对 VS2012 进行修复，但没有任何效果。与我一起工作的所有其他开发人员都没有遇到过我遇到的任何问题，

我在一个网站上发现了另一个[帖子](http://answers.flyppdevportal.com/categories/csharp/csharpide.aspx?ID=43f9ba11-728b-499a-963b-38878f36c178)，突出了我遇到的同样问题。不同的是，他的决议基本上是格式化他的机器并重新安装所有东西。这是完全不能接受的。我的操作系统是 Windows 7 32bit，我安装了 VS2008、VS2010 和 VS2012，以及 SQL 2008。

我正在寻找有关此问题的潜在解决方案的任何建议。我必须尽快启动并运行报告组件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:16:01.770

VS 2012 的附加信息在这里：

[http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx)

请注意，有很多关于需要在本地安装 SQL 2012 以获得 VS 2012 和 RDLC 的所有功能的“讨论”。还有更多关于您可以打开项目并构建但您无法修改或编辑 RDLC 的讨论。

我们只是在 SQL 2008 和 VS 2008 领域完成我们所有的报告（SSRS、RDLC）、SSIS 和 BIDS 项目工作。

所以......信不信由你，我们有一些项目的 2 个分支。

1 分支是 VS 2008，用于处理 RDLC 文件。2 Branch 是一个 VS 2012 的源代码。

呸，双重呸。

如果您想要单独的环境，请继续阅读。

我们遇到过类似的问题，在 VS 2008 SSRS BIDS 工具旁边成功安装 VS2012 是在安装 VS 2012 时取消选中任何 SQL Express/Tools。

现在在你的情况下，为时已晚。因此，我建议先修复 SQL 2008，然后确保检查 SSRS、BIDS 和任何其他相关工具，并让它尝试修复安装。

我最后一次检查 VS 2012 不支持 SSRS 或它们相关的报告格式“RDL”，你将不得不留在 VS 2008 和/或 SQL BIDS 2008。

最佳结果可能包括以下步骤。

1.  尝试修复 SQL 2008 和 SSRS 和 BIDS。
2.  卸载 VS 2012 然后重复步骤 1。
3.  如果您安装 VS 2012，请取消选中安装任何 SQL Express 或 SQL 类型工具的任何选项。

我做了 3\. 并且没有任何问题，但这是在 2-3 个 DBA 之后，我知道在 VS 2012 安装期间没有取消选中这些 SQL 选项而崩溃和烧毁。

# php - 使用 php 在电子邮件中发送解密的字符串

> ID：14605630
> 
> 赞同：0
> 
> 时间：2013-01-30T13:49:32.657
> 
> 标签：php, mysql, md5

我要做的是将用户插入带有随机密码的表中（直到这里都可以正常工作），并在成功提交表单后，我想向注册用户发送他们的密码。这是我到目前为止所得到的：

```
<?php
if (isset($_POST['insert'])) {
require_once 'login.php'; 

  $OK = false;
  $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");
  $stmt = $conn->stmt_init();

  $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password)
          VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))';
  if ($stmt->prepare($sql)) {
    // bind parameters and execute statement
    $stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']);
    // execute and get number of affected rows
    $stmt->execute();
    if ($stmt->affected_rows > 0) {
      $OK = true;
    }
  }
  if ($OK) {
    header('Location: confirm.php');
    exit;
  } else {
    $error = $stmt->error;
  }
}
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Add User</title>
</head>

<body>
<h1>Add User</h1>
<?php if (isset($error)) {
  echo "<p>Error: $error</p>";
} ?>
<form id="form1" method="post" action="">
  <p>
    <label for="user_email">User email:</label>
    <input name="user_email" type="text" class="widebox" id="user_email">
  </p>
    <p>
    <label for="user_name">User name:</label>
    <input name="user_name" type="text" class="widebox" id="user_name">
  </p>
    <p>
    User role: <select name = "user_pref">
    <option value = "BLU">Blue</option>
    <option value = "YEL">Yellow<option>
    <option value = "GRE">GREEN</option>
    </select>
</p>
  <p>
    <input type="submit" name="insert" value="Register New User" id="insert">
  </p>
</form>
</body>
</html> 
```

选择解密密码和用户电子邮件的 sql 语句将是：

```
$sql = 'select user_email, des_decrypt(user_password) from users where person_id = max(person_id)';
$result = $mysqli->query($sql) 
```

它会进入这个函数：

```
if ($OK) {
} 
```

但是我无法让它与基本的邮件功能一起使用。有没有人有任何可以帮助我的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:51:35.077

这里有两个不同的主题需要回答：

1.  更典型的密码处理是：

    1.  让用户在注册表单中输入密码（使用“重新输入”字段，检查两个字段是否包含相同的字符串，也许使用 javascript 片段来强制一定的密码复杂性 - 网上应该有很多可用的）
    2.  将密码的哈希值存储在数据库中，使用难以反转的 crypt 函数（SQL 中的 bcrypt 或PHP中的[crypt ）](http://de2.php.net/manual/en/function.crypt.php)
    3.  为了更安全，使用 time() 或 rand() 创建一个伪随机盐，将其连接到用户的密码，在加密函数中使用连接的字符串。不要忘记将盐也存储在数据库中
    4.  提供“我忘记密码”功能，使用经典的双重认证：用户要求输入密码，您向该用户注册的电子邮件地址发送一封包含一次性令牌的电子邮件，用户必须输入令牌（或单击将令牌设置为 GET 参数的链接），现在只能更改他的密码。
2.  PHP（和其他脚本语言）的邮件可能是一件棘手的事情。PHP 本身没有内置邮件客户端，但需要使用独立的电子邮件组件。您或您的管理员需要确保

    *   服务器提供电子邮件功能（例如 linux 系统中的 sendmail 包）
    *   服务器被允许向世界发送邮件。意思是，防火墙/路由器/代理必须允许邮件端口上的流量

有关使用 php 发送邮件的更多信息，请参阅手册： [邮件](http://php.net/manual/en/book.mail.php "邮件")

# php - 使用mysql从单个查询中的两个不同表中选择

> ID：14605632
> 
> 赞同：4
> 
> 时间：2013-01-30T13:49:38.927
> 
> 标签：php, mysql, sql

我有两张不同的桌子。一是`instructor`，二是`student`。两种表结构如下：

```
________INSTRUCTOR_________

instructorid schoolid instructorusername instructorfirstname instructorlastname instructortitle level
1             1        inst_A              first_A             Last_A              RN            3
2             1        inst_B              first_B             Last_B              TD            3
3             1        inst_C              first_C             Last_C              FP            3

________STUDENT_________

studentid   schoolid  studentusername    studentfirstname    studentlastname    level
1             1        stud_A              first_A             Last_A            4
2             1        stud_B              first_B             Last_B            4
3             1        stud_C              first_C             Last_C            4 
```

现在，我想从两个表中选择 schoolid 为“1”的数据，结果将如下所示：

```
________RESULT_________

id schoolid username firstname lastname title level
1   1        inst_A   first_A   Last_A   RN    3
2   1        inst_B   first_B   Last_B   TD    3
3   1        inst_C   first_C   Last_C   FP    3
1   1        stud_A   first_A   Last_A         4
2   1        stud_B   first_B   Last_B         4
3   1        stud_C   first_C   Last_C         4 
```

有什么办法可以这样做吗？请任何人都可以帮助我。我以前从来没有这样做过。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:52:51.247

使用`UNION ALL`（*实际上只是`UNION`会做，因为学生没有头衔*）。由于表`STUDENT`没有标题，您需要有一个带有别名的空列，`title`以便它与列数匹配。如果您不为标题添加额外的列，您将收到错误消息

```
The used SELECT statements have a different number of columns... 
```

完整查询，

```
SELECT  schoolid, 
        instructorusername username, 
        instructorfirstname firstName, 
        instructorlastname lastName,
        instructortitle title,
        level
FROM    instructors
UNION 
SELECT  schoolid, 
        studentusername username, 
        studentfirstname firstName, 
        studentlastname lastName,
        '' title,
        level
FROM    students 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/77424/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:52:33.150

UNION 是这里的关键：

```
select schoolid, instructorusername as username,  instructorfirstname as firstname, instructorlastname as lastname, instructortitle as title
from INSTRUCTOR
UNION
select schoolid, studentusername as username,  studentfirstname as firstname, studentlastname as lastname, "" as title
from STUDENT 
```

# google-app-engine - GWT-GAE：错误：部署应用程序后 NOT_FOUND

> ID：14605633
> 
> 赞同：0
> 
> 时间：2013-01-30T13:49:40.443
> 
> 标签：google-app-engine, gwt

我尝试部署我的应用程序，该应用程序还将数据存储在应用引擎的数据存储区中。我使用 objectify 库来访问数据存储。它在本地运行没有问题，我可以在本地访问管理数据存储。但是当我尝试部署它的时候，虽然eclipse说已经部署成功了，但是当我尝试url的时候，却报错：NOT_FOUND。在日志中（在应用程序引擎中）有两个警告：

```
com.google.api.server.spi.response.ServletResponseResultWriter getWriteObjectifyKeyAsStringModule: Exception while resolving Objectify Key#getString
java.lang.NoSuchMethodException: com.googlecode.objectify.Key.getString()
at com.google.appengine.runtime.Request.process-16096d3fb5bf337e(Request.java)
at java.lang.Class.getMethod(Class.java:216)
at com.google.api.server.spi.response.ServletResponseResultWriter.getWriteObjectifyKeyAsStringModule(ServletResponseResultWriter.java:154)
at com.google.api.server.spi.response.ServletResponseResultWriter.<init>(ServletResponseResultWriter.java:57)
at com.google.api.server.spi.SystemServiceServlet.getResponseWriter(SystemServiceServlet.java:127)
at com.google.api.server.spi.SystemServiceServlet.doPost(SystemServiceServlet.java:107)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at java.lang.Thread.run(Thread.java:679) 
```

和

```
com.google.api.server.spi.request.ServletRequestParamReader getObjectifyKeyModule: Exception while resolving Objectify Key#create
       java.lang.NoSuchMethodException: com.googlecode.objectify.Key.create(java.lang.String)
at com.google.appengine.runtime.Request.process-16096d3fb5bf337e(Request.java)
at java.lang.Class.getMethod(Class.java:216)
at com.google.api.server.spi.request.ServletRequestParamReader.getObjectifyKeyModule(ServletRequestParamReader.java:147)
at com.google.api.server.spi.request.ServletRequestParamReader.<init>(ServletRequestParamReader.java:131)
at com.google.api.server.spi.SystemServiceServlet.getParamReader(SystemServiceServlet.java:122)
at com.google.api.server.spi.SystemServiceServlet.execute(SystemServiceServlet.java:140)
at com.google.api.server.spi.SystemServiceServlet.doPost(SystemServiceServlet.java:112)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458) 
```

我有 4 个看起来很多的 rpc 方法，所以我将举一个其中的一个示例：

问候服务：

```
@RemoteServiceRelativePath("registration")
public interface GreetingService extends RemoteService {
    String greetServer(String email, String pass, String rPass, int job ) throws IllegalArgumentException;

} 
```

异步：

```
public interface GreetingServiceAsync {
    void greetServer(String email, String pass, String rPass, int job, AsyncCallback<String> callback) throws IllegalArgumentException;
} 
```

和实施：

```
@SuppressWarnings("serial")
public class GreetingServiceImpl extends RemoteServiceServlet implements GreetingService {

    static {
        ObjectifyService.register(LoginUser.class);
    }

    public String greetServer(String email, String pass, String rPass, int job) throws IllegalArgumentException {

        Objectify ofy = ObjectifyService.begin();

        LoginUser user = new LoginUser();

        if (!FieldVerifier.isValidName(email)) {
            throw new IllegalArgumentException("Name must be at least 4 characters long");
        }
        if (!FieldVerifier.isValidPass(pass, rPass)) {
            throw new IllegalArgumentException("Password and Repeat Password do not match!");
        } else {
            user.setEmail(email);
            user.setPassword(pass);
            user.setJob(job);
            ofy.put(user);
        }

        return email;
    }
} 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:40:40.823

我从来没有发现问题是什么。我只是重新安装了 gwt 和 gae，创建了一个新项目并且能够部署它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:36:51.207

I had the same problem. Then I realized that I had objectify-3.0.jar in my war/WEB-INF/lib The Key.getString() method apparently was added to version 3.1 only, so after I replaced objectify-3.0.jar with objectify-3.1.jar the problem was gone.

# linux - Linux 和 Windows 中的远程命令执行和文件访问

> ID：14605635
> 
> 赞同：0
> 
> 时间：2013-01-30T13:49:51.127
> 
> 标签：linux, windows, remote-access, administration

假设我在几台 Linux 和 Windows 机器上安装了一个服务器应用程序。现在我想远程控制它。也就是说，我想启动和停止应用程序，更新应用程序配置文件，远程读取日志。

在 Linux 世界中看起来很容易。我可以使用`ssh`, `scp`, 并且可能`nfs`在远程 Linux 机器上执行命令并访问那里的文件。问题是我想从*Windows机器上**统一*执行远程 Linux 和 Windows 机器中的命令和访问文件。我还需要一些脚本功能。

 *最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:01:12.540

您可以尝试在 Windows 机器上使用 cygwin [http://www.cygwin.com/](http://www.cygwin.com/) 并使用它安装 ssh 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:08:02.950

1.  如果您需要图形工具，请使用 VNC
2.  [在http://sshwindows.sourceforge.net/download/](http://sshwindows.sourceforge.net/download/)上有一个针对 Windows 的 OpenSS 实现
3.  因为（除了 Cygwin/MinGW）不可能运行 bash 代码（ksh/csh/tcsh 代码也是如此），您应该熟悉 Windows 脚本主机。*

# google-chrome - 主机规则谷歌浏览器，添加配置

> ID：14605636
> 
> 赞同：7
> 
> 时间：2013-01-30T13:49:52.227
> 
> 标签：google-chrome, command-line

我不明白，我尝试将每个 http 请求转发到一个特定的域，除了几个网站。

它有一个例外：

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, 
EXCLUDE *.youtube.*" 
```

但我不让它适用于多个域，例如：

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, 
EXCLUDE *.youtube.*" *.last.fm" 
```

或者

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, 
EXCLUDE *.youtube.*", *.last.fm" 
```

我的格式错误在哪里？：-/

正如描述（[http://peter.sh/experiments/chromium-command-line-switches/#host-rules](http://peter.sh/experiments/chromium-command-line-switches/#host-rules)）所说：

```
Comma-separated list of rules that control how hostnames are mapped. 
For example: "MAP * 127.0.0.1" --> Forces all hostnames to be mapped to 127.0.0.1 
"MAP *.google.com proxy" --> Forces all google.com subdomains to be resolved to "proxy". 
"MAP test.com [::1]:77 --> Forces "test.com" to resolve to IPv6 loopback. 
Will also force the port of the resulting socket address to be 77\. "MAP * baz, EXCLUDE www.google.com" 
--> Remaps everything to "baz", except for "www.google.com". 
These mappings apply to the endpoint host in a net::URLRequest 
(the TCP connect and host resolver in a direct connection, and the CONNECT in an http proxy connection, 
and the endpoint host in a SOCKS proxy connection). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-21T11:31:32.747

我似乎在回答一个老问题，但无论如何......

您发布了：

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, EXCLUDE *.youtube.*", *.last.fm" 
```

我认为您的示例中的引用搞砸了。它应该是：

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, EXCLUDE *.youtube.*, *.last.fm" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-13T21:53:13.670

除了修复引用错字外，您还应该`EXCLUDE`在每个排除域之前写：

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, EXCLUDE *.youtube.*, EXCLUDE *.last.fm" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T11:26:50.333

（在 Windows 上）

就我而言，我只有`"MAP *.co.za 172.11.12.13"`启动 chrome，它忽略了映射。当我添加它的一部分时`Exclude google.co.za`：

回顾：

不工作 ：

```
"/path/to/chrome.exe" --host-rules="MAP *.co.za 172.11.12.13" 
```

有没有工作：

```
 "/path/to/chrome.exe" --host-rules="MAP *.co.za 172.11.12.13, Exclude google.co.za" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T13:46:58.477

在**Windows**中，你必须这样写：

```
"/path/to/chrome.exe" --host-rules="MAP * www.domain.de, EXCLUDE *.youtube.*","MAP * www.domain.de, EXCLUDE *.last.fm" 
```

**注意**MAP规则之间没有逗号！

# html - 如何从子 div 重叠父 div

> ID：14605639
> 
> 赞同：7
> 
> 时间：2013-01-30T13:49:56.893
> 
> 标签：html, css

我的 HTML 中有一些 div，其中一个正在加载图像 div，所以我希望它与其父 div 重叠。这是我的代码：

```
<div id="something1">
    <div id="something2"></div>
    <div id="parent" style="border: 15px solid #c1c1c1;width:200px; height:250px;">
        <div id="child" style="position: absolute; border: 15px solid #a2f2e2"></div>
    </div>
</div> 
```

当我使用不同的位置（即绝对、相对等）时，子 div 不能与其父级重叠。这是我的小提琴链接： http: [//jsfiddle.net/yNFxj/4/](http://jsfiddle.net/yNFxj/4/)我不想从父 div 看到任何东西，但我想看到子 div 随着父级的大小而增加并重叠。

关于如何仅使用纯 html 和 css 以及使用通用方式在任何其他页面上实现它的任何想法？

**PS：**边框、宽度、高度等只是举例，可以去掉。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T14:36:22.463

据我所知，Sajjan 是最接近的，但他有一些缺陷：

1.  `Position: absolute`要求其父级具有非静态位置（这通常使用 来完成`position: relative`，它的工作方式与静态相同）。
2.  您不需要设置孩子的高度和宽度，只需设置父母。

[这是我的小提琴来演示。](http://jsfiddle.net/d9TLr/2/)

```
#parent {
    border: 5px solid gray;
    position: relative;
    height: 100px;
    width: 100px;
    margin-left: 50px;
}

#child {
    position: absolute;
    top:0;
    left: 0;
    right: 0;
    bottom: 0;
    background: red;
} 
```

这里的关键是`position: relative`父级。

不过，我很好奇，你到底想用这个实现什么。我有一种感觉，不管它是什么，都有更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:56:42.997

为什么这对你不起作用？如果我理解正确，您只想用子 DIV 掩盖父 DIV？

```
<div id="something1">
  <div id="something2"></div>
  <div id="parent" style="border: 15px solid #c1c1c1;width:200px; height:250px;">
    <div id="child" style="position: absolute; border: 15px solid #a2f2e2;top:0;left:0;width:200px; height:250px;"></div>
  </div>
</div> 
```

铬上的输出： ![在此处输入图像描述](../Images/dc69ef2ba21d1a55e899512d1361e694.png)

为了使其通用，使用 offsetTop/Left/Height/Width 方法获取父母的位置/尺寸，并使用这些方法设置孩子的尺寸/位置，我确信在 SO 上有很多帖子可以做到这一点..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:12:48.943

第一个问题是`absolute`定位元素是指位置不同的第一个父元素`static`。

这意味着如果没有父母有`fixed`, `relative`, 或`absolute`位置，它将引用身体，在这种情况下，这不是你想要的。

然后放到`position: relative;`你的父 div 中。

第二个问题：使用绝对位置，你可以停止使用`width`and`height`并开始使用`top`, `left`, `bottom`and`right`属性；

将它们全部设置为`0`意味着***将对象扩展到父边界***。

但是在这里你想重叠它们，然后......简单地，使用一个负值等于父边框的大小：15px;

```
top:    -15px;
left:   -15px;    
bottom: -15px;    
right:  -15px; 
```

**演示**：http: [//jsfiddle.net/yNFxj/9/](http://jsfiddle.net/yNFxj/9/)

我使用了虚线边框，因此您可以看到父级边框的下方；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:59:16.633

HTML

```
<div id="something1">
<div id="something2"></div>
<div id="parent">
    <div id="child"></div>
</div>
</div> 
```

CSS

```
#parent { 
  width: 100px;
  height: 300px;
  background-color: #a0a0a0;
  width:200px;
  height:250px;
  position: relative;
}

#child {
  width: inherit;
  height: inherit;
  position: absolute;
  background-color: #a2f2e2;
  top: 0px;
  left: 0px;
} 
```

工作正常

编辑：为您添加和高度继承并正确定位

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T05:14:16.180

试试这个：

```
<div id="something1">
<div id="something2"></div>
<div id="parent" style="border: 15px solid #c1c1c1;position:relative; width:200px; height:250px;">
    <div id="child" style="position: absolute; border: 15px solid #a2f2e2; width:200px; height:250px; left:-15px; top:-15px"></div>
</div>
</div> 
```

为您更新小提琴[http://jsfiddle.net/yNFxj/16/](http://jsfiddle.net/yNFxj/16/)

# hadoop - Hive 如何存储数据，什么是 SerDe？

> ID：14605640
> 
> 赞同：12
> 
> 时间：2013-01-30T13:49:56.553
> 
> 标签：hadoop, hive

查询表时，SerDe 会将**文件中的字节中的一行数据反序列化为 Hive 内部使用的对象，以对该行数据进行操作**。在执行 INSERT 或 CTAS（请参阅第 441 页的“导入数据”）时，表的 SerDe 会将**Hive 的一行数据的内部表示序列化为写入输出文件的字节**。

1.  是 serDe 库吗？
2.  蜂巢如何存储数据，即它存储在文件或表中？
3.  请任何人都可以清楚地解释粗体句子吗？我是新来的蜂巢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T15:08:18.847

答案

1.  是的，SerDe 是一个内置于 Hadoop API 的库
2.  Hive 使用 HDFS 或任何其他存储 (FTP) 之类的文件系统来存储数据，这里的数据采用表的形式（具有行和列）。
3.  SerDe - 序列化器，反序列化器指示 hive 如何处理记录（行）。Hive 还支持处理半结构化（XML、电子邮件等）或非结构化记录（音频、视频等）。例如，如果您有 1000 GB 的 RSS 源 (RSS XML)。您可以将它们摄取到 HDFS 中的某个位置。您需要根据您的 XML 结构编写自定义 SerDe，以便 Hive 知道如何将 XML 文件加载到 Hive 表或其他方式。

有关如何编写 SerDe 的更多信息，请阅读这篇[文章](http://blog.cloudera.com/blog/2012/12/how-to-use-a-serde-in-apache-hive/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T15:31:24.987

在这方面，我们可以将 Hive 视为某种数据库引擎。该引擎正在处理由**记录**构建的表。
当我们让 Hive（以及任何其他数据库）以自己的内部格式工作时 - 我们不在乎。
当我们希望 Hive 将我们自己的文件作为表（外部表）处理时，我们必须让他知道 - 如何将文件中的数据转换为记录。这正是 SerDe 的作用。您可以将其视为使 Hive 能够读取/写入数据的插件。
例如 - 您想使用 CSV。这是 CSV_Serde 的示例 [https://github.com/ogrodnek/csv-serde/blob/master/src/main/java/com/bizo/hive/serde/csv/CSVSerde.java](https://github.com/ogrodnek/csv-serde/blob/master/src/main/java/com/bizo/hive/serde/csv/CSVSerde.java) 方法序列化将读取数据，并且假设它是 CSV，将其切成字段
方法反序列化将获取一条记录并将其格式化为 CSV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-11T18:11:01.520

Hive 也可以通过使用 (1) 复杂数据类型(struct,array,unions) (2) 通过使用 SerDe 来分析半结构化和非结构化数据

SerDe 接口允许我们指示 hive 应该如何处理记录。Serializer 将获取 hive 一直在处理的 java 对象，并将其转换为 hive 可以存储的东西，而 Deserializer 将记录的二进制表示形式转换为 hive 可以操作的 java 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-31T19:12:56.393

我认为上面有序列化和反序列化的概念。序列化在写入时完成，结构化数据被序列化为位/字节流进行存储。读取时，数据从位/字节存储格式反序列化为读取器所需的结构。例如，Hive 需要看起来像行和列的结构，但 hdfs 将数据存储在位/字节块中，因此在写入时序列化，在读取时反序列化。

# oracle - 将数据从一个模式插入到另一个 shcema

> ID：14605642
> 
> 赞同：0
> 
> 时间：2013-01-30T13:49:58.673
> 
> 标签：oracle, oracle10g

我在单个数据库中有两个模式。

*   rxdata（它是一个新的模式）

*   数据

表名 - kostst（成本中心）

列名 - kst_id（成本中心 ID）

列名 - kst_name（成本中心名称）

我想将表中的整个数据从`kostst`插入`rxdata`到`kostst.fbdata`。当我执行以下命令时，我得到了这个，并且我知道两种模式中都存在相似的 id（kst_id=1 和 2）

```
SQL> insert into rxdata.kostst select * from fbdata.kostst;

insert into rxdata.kostst select * from fbdata.kostst
*

ERROR at line 1:
ORA-00001: unique constraint (RXDATA.SYS_C0070558) violated

SQL> select table_name,column_name from user_cons_columns where constraint_name=
'SYS_C0070558';

TABLE_NAME    COLUMN_NAME
------------  ------------
KOSTST        KST_ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:56:01.203

如果您只想插入不存在的行，您可以使用：

```
insert into rxdata.kostst 
select * 
  from fbdata.kostst f
 where not exists (select null
                     from rxdata.kostst r
                    where r.kst_id = f.kst_id) 
```

如果你想用表格完全替换`R`表格`F`，我建议改为`TRUNCATE+INSERT`or `DELETE+INSERT`。

# vba - 在 Word VBA 中发送 BACKSPACE 击键

> ID：14605653
> 
> 赞同：5
> 
> 时间：2013-01-30T13:51:13.623
> 
> 标签：vba, ms-word

我在 Word VBA 中编写了一些代码，最后我需要 1 个退格键。这是如何实现的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T20:11:57.627

最简单的解决方案就是：

```
Selection.TypeBackspace 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T22:40:13.060

发送退格的简单方法（但不是最强大的解决方案）：

```
SendKeys ("{BACKSPACE}") 
```

一种更安全的方法：

```
Selection.MoveLeft Extend:=wdExtend
Selection.Delete 
```

如果已经选择了某些内容，并且您只想删除最后一个字符，请在上面添加：

```
Selection.Collapse wdCollapseEnd 
```

转到当前页面的开头：

```
ActiveDocument.GoTo(wdGoToPage, wdGoToRelative, 0).Select 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T12:36:20.597

如果您的文本位于字符串或文本字段中，则可以这样做：

```
dim strText as string
strText = yourdatasourcehere
strText = left(strText,len(strText) - 1)
youroutputsource = strText 
```

这也适用于空间，因为它们是用 len 计算的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:57:51.760

退格是字符代码 (8)。sendkeys 等效项是 {BACKSPACE}。

# ios - 单击操作方法后我想隐藏按钮

> ID：14605654
> 
> 赞同：0
> 
> 时间：2013-01-30T13:51:16.363
> 
> 标签：ios, xcode

我的示例代码：

```
- (IBAction)captureButton:(id)sender {

    captureButton.hidden = YES;

    currImage = [signatureViewController imageWithView:self.view];
    NSLog (@"image %@",currImage);
    imgView = [[UIImageView alloc]initWithFrame:CGRectMake(150,100,300,150)];
    imgView.backgroundColor = [UIColor blackColor];
     imgView.image = currImage;
    [self.view addSubview:imgView];

    image.image = nil;
} 
```

我的问题是捕获按钮正在隐藏视图..请帮助

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:54:38.187

**两种选择：**

1）添加以下代码以将您的图像视图置于前面：

```
[self.view bringSubviewToFront:imgView]; 
```

2）隐藏你的按钮：

```
[(UIButton *)sender setHidden:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:57:42.997

您可以尝试禁用该按钮。如果它隐藏在视图后面，这可能会有所帮助。

yourbutton.enabled = 否；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:03:05.047

尝试这个，

`yourButton.hidden = YES;`

# actionscript-3 - Alternativa3D：Actionscript3：如何避免导入 3DS 模型中的 z-fighting？

> ID：14605657
> 
> 赞同：0
> 
> 时间：2013-01-30T13:51:23.413
> 
> 标签：actionscript-3, mesh, overlapping, 3d-engine, decal

我似乎无法为我的问题找到具体的解决方案，所以我希望这里有人可以帮助我。

我正在 Actionscript3 中尝试使用**alternativa 3D**，我设法从 3D Max上传了一个带纹理的**.3DS模型。**该对象是一个复杂的宇宙飞船，不打算在游戏中使用，但我想用它作为例子。

**问题是：** 由于导入的模型很复杂，它有很多重叠的部分。Alternativa z-sorting 引擎对这种重叠反应不佳，输出是重叠位置的抖动纹理（我不知道如何称呼它）。

我知道下次用尽可能少的重叠部分对我的对象进行建模，但我相信这个问题将来会以其他形式重新出现。

Alternativa 文档建议使用**Decal**对象而不是 Mash 对象，但我似乎无法将导入的对象 Mash 转换为 Decay 对象。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:07:18.353

如果您有一个面直接相交的模型，那么我建议这是问题所在，而不是引擎。

一个精心构建的 3d 模型不应该有任何相交的面——你可能不会注意到或认为这是像 3dsMAX 这样的程序中的一个问题，你可以更轻松地解决它——但它肯定会出现在实时引擎中.

# c++ - 将 istream var 传递给函数后如何提取数据

> ID：14605662
> 
> 赞同：0
> 
> 时间：2013-01-30T13:51:47.163
> 
> 标签：c++, ifstream, istream

我目前正在为类运行命令行输入程序，该程序从命令行参数中提取数据，将其粘贴在**ifstream**中，然后通过引用一个函数将其传递给我必须从文件中提取信息的函数。

首先，我明白这一点”

```
ifstream coursesIn (argv[1]); 
```

将我的输入文件名放入 ifstream 类型的 courseIn 变量中。从这里，我可以执行诸如 .open(argv[1]); 之类的操作。为了提取必要的数据。

接下来是我要将变量传递给一个名为 processEnrollments(coursesIn) 的函数

其原型如下：

```
processEnrollments (std::istream& courseFile); 
```

一旦我将变量放入函数中并在函数中，我的教授提供了以下代码：

```
void processEnrollments (istream& courseFile, istream& enrollmentRequestsFile,
         ostream& reportFile)
{
int numCourses;
courseFile >> numCourses;

// Create the arrays we need
//!! Insert your code here
} 
```

首先，我不知道他想对函数内的前两行做什么，其次，我不能再执行我的 .open(argv[1]) 方法来从文件名中提取数据。

在功能之外我相信我可以得到我需要的一切，但是通过后，我很茫然。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:57:27.160

您确实需要阅读有关流的更多信息。

宣言

```
ifstream coursesIn (argv[1]); 
```

创建一个变量`coursesIn`，只要您是对的，但它也会使用 .提供的文件名*打开*`argv[1]`文件。如果你喜欢这个，你以后就不需要了`open`。

至于函数，它的第一行声明了一个整数变量，第二行从文件中读取一个整数`courseFile`并将其存储在`numCourses`变量中。

最后，请记住所有输入流具有相同的基数，因此如果您可以从例如读取输入，`cin`您也可以从文件中读取输入。

# iphone - 在 iOS 中创建播放列表？

> ID：14605670
> 
> 赞同：3
> 
> 时间：2013-01-30T13:52:11.963
> 
> 标签：iphone, objective-c, playlist, mpmediaquery

是否可以像在第 3 方编程应用程序的音乐应用程序中一样创建、命名和保存 iTunes 播放列表？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:55:01.593

iTunes 播放列表 ( `MPMediaPlaylist`) 是只读的，因此目前无法通过第 3 方应用程序创建这些播放列表。用户只能使用 iTunes 或通过内置的 iOS 音乐应用程序执行此操作。

# c# - 如何在 C# 中使用 datagridview 将数据保存到数据库

> ID：14605671
> 
> 赞同：0
> 
> 时间：2013-01-30T13:52:14.643
> 
> 标签：c#

我尝试使用 datagridview 更新我的数据库，没有错误，但是当我单击“保存”按钮时没有进行任何更改。你能帮我吗..这是我的代码提前谢谢。.

```
private void EditRecord_Load(object sender, EventArgs e) {
     LoadData();
}

void LoadData() {
    string query = "SELECT *FROM Record";
    SqlDataAdapter da = new SqlDataAdapter(query, con);
    SqlCommandBuilder sbuilder = new SqlCommandBuilder(da);
    DataTable dtable = new DataTable();
    da.Fill(dtable);
    BindingSource bsource = new BindingSource();
    bsource.DataSource = dtable;
    dgv.DataSource = bsource;
}

private void btnSave_Click(object sender, EventArgs e) {
    if (dgv.RowCount > 1) {
        for (int x = 0; x < dgv.RowCount - 1; x++) {
            if (dgv.Rows[x].Cells[0].Value.ToString() == "") {
                SqlCommand cmdSave = new SqlCommand("UPDATE tblRecord SET FName=@FName, Address=@Address, ContactNo=@ContactNo WHERE IdNo=@IdNo", con);
                {
                    cmdSave.Parameters.Add("@IdNo", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[0].Value;
                    cmdSave.Parameters.Add("@FName", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[1].Value;
                    cmdSave.Parameters.Add("@Address", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[2].Value;
                    cmdSave.Parameters.Add("@ContactNo", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[3].Value;
                }
                con.Open();
                cmdSave.ExecuteNonQuery();
                con.Close();
                MessageBox.Show("Record Updated!");
            }
        }
    }
    LoadData();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:04:45.447

它应该是

```
private void btnSave_Click(object sender, EventArgs e) {
if (dgv.RowCount >= 1) {
    for (int x = 0; x < dgv.RowCount - 1; x++) {
        if (dgv.Rows[x].Cells[0].Value.ToString()!="" && dgv.Rows[x].Cells[0].Value!=null) {
            SqlCommand cmdSave = new SqlCommand("UPDATE tblRecord SET FName=@FName,   Address=@Address, ContactNo=@ContactNo WHERE IdNo=@IdNo", con);
            {
                cmdSave.Parameters.Add("@IdNo", SqlDbType.VarChar).Value =   dgv.Rows[x].Cells[0].Value.ToString();
                cmdSave.Parameters.Add("@FName", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[1].Value.ToString();
                cmdSave.Parameters.Add("@Address", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[2].Value.ToString();
                cmdSave.Parameters.Add("@ContactNo", SqlDbType.VarChar).Value = dgv.Rows[x].Cells[3].Value.ToString();
            }
            con.Open();
            cmdSave.ExecuteNonQuery();
            con.Close();
            MessageBox.Show("Record Updated!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:05:31.670

LoadData() 函数中的查询必须在 '*' 之后有一个空格 ' '。还建议在更新操作中使用 try catch 块。此外，不要运行 select *，而是始终首选选择所需的列，例如

> 从 myTable 中选择 column1、column2；

```
string query = "SELECT * FROM Record";

try{
     //open connection
     //Excecute your command
   }
 catch (SqlException ex)
   {
       //Log exception(ex)
       // throw ex
   }
 finally
   {
      // Check if connection not null then  close connection
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:25:20.947

使用命令生成器有一种更简单的方法来做到这一点。

当您将 DataGridView 绑定到 DataTable 时，DGV 中的任何更改都会反映到 DataTable 中。因此，您可以使用命令生成器将更改保存回来。

如果你看我下面的例子，通过给命令生成器 SELECT 命令，它可以生成它需要执行的其他相关命令，INSERT、UPDATE 和 DELETE。

您只需要确保 DataTable 是 Public 或可访问的。

在您的 btnSave_Click 上使用类似的东西：-

```
using (SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["con"]))
{
    var adaptor = new SqlDataAdapter();
    adaptor.SelectCommand = new SqlCommand("SELECT * FROM [Record]", con);

    var cbr = new SqlCommandBuilder(adaptor);

    cbr.GetDeleteCommand();
    cbr.GetInsertCommand();
    cbr.GetUpdateCommand();

    try
       {
         con.Open();

         adaptor.Update(dtable);
         MessageBox.Show("Changes Saved","Information");

        }
     catch (SqlException ex)
        {
           MessageBox.Show(ex.Message, "SqlException Error");
        }
     catch (Exception x)
        {
           essageBox.Show(x.Message, "Exception Error");
        }

    } 
```

}

# php - 避免使用相同的用户名和密码多次登录

> ID：14605682
> 
> 赞同：1
> 
> 时间：2013-01-30T13:52:53.587
> 
> 标签：php, javascript

> **可能重复：**
> [防止同一服务器会话上的多个浏览器会话](https://stackoverflow.com/questions/2178604/preventing-multiple-browser-sessions-on-the-same-server-session)

我正在开发一个需要防止使用相同的用户名和密码多次登录的应用程序。

如果它发生在同一台机器上，那么显然我们需要对用户会话做一些事情，但它也应该防止他们使用相同的用户名和密码在不同的机器上登录。

我们必须牢记以下几点：

如果用户在没有注销的情况下关闭浏览器。如果会话超时。我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:58:08.020

向您的数据库添加一列 0 或 1

在您的应用程序登录部分的逻辑中，检查此字段，如果它的登录为 0，然后切换到 1.. 在注销时切换回 0...并且除非为 0，否则无法登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:59:15.180

您将需要某种数据库或保存在服务器上的文件，如果用户登录或未登录，您可以设置一个标志，并结合会话 ID。

您可以为该标志设置超时（最后一个活动），以便新用户可以登录（如果旧用户一直处于空闲状态或关闭浏览器而不注销）。然后你可以更新用户交互的最后一个活动，甚至可以使用 ajax 脚本。

# sql - 针对 sqlite 或纯文件运行 SQL Server 查询？

> ID：14605683
> 
> 赞同：0
> 
> 时间：2013-01-30T13:52:59.887
> 
> 标签：sql, sql-server, sqlite

我有一个使用 SQL Server 数据库开发的网站。但我需要将它移植到无法访问数据库的新 Web 服务器。

因此，我需要一个替代解决方案，最好不要重写所有数据库查询。我希望能够对 sqlite 文件或纯文本文件运行相同的查询。

就存储而言，它不会存储大量数据，因此性能不会成为问题。

谢谢你的时间！，

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:18:10.130

通过使用 Sql Server Compact Edition 解决了它（请参阅 OP 中的注释）。

# c# - Windows Forms PictureBox - 如何在窗体的某个区域显示图像

> ID：14605687
> 
> 赞同：3
> 
> 时间：2013-01-30T13:53:15.563
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用以下代码以我的一种形式打开和显示图像`fileDialog`：

```
private void btnExplorer_Click(object sender, EventArgs e)
        {
            OpenFileDialog openFileDialog1 = new OpenFileDialog();

            openFileDialog1.InitialDirectory = "c:\\";
            openFileDialog1.Filter = "All files (*.*)|*.*";
            openFileDialog1.FilterIndex = 2;
            openFileDialog1.RestoreDirectory = true;

            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                try
                {
                    PictureBox PictureBox1 = new PictureBox();
                    PictureBox1.Image = new Bitmap(openFileDialog1.FileName);
                    // Add the new control to its parent's controls collection
                    this.Controls.Add(PictureBox1);
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Error loading image" + ex.Message);
                }
            }
        } 
```

问题是我的图像显示在表单的左上角，而我为此目的已经离开了右下角的近四分之一。我怎样才能在那里展示它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T14:05:04.327

就像我在评论中所说的那样，方法如下：[**如何：在 Windows 窗体上定位控件**](http://msdn.microsoft.com/en-us/library/tkzw7bw7.aspx)。

```
PictureBox PictureBox1 = new PictureBox();
PictureBox1.Image = new Bitmap(openFileDialog1.FileName);
PictureBox1.Location = new Point(20, 100); //20 from left and 100 from top
this.Controls.Add(PictureBox1); 
```

或者之后更改它：

```
PictureBox1.Top += 50; //increase distance from top with 50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:57:24.193

您可以在将 PictureBox 添加到 Parent 之前设置它的 location 属性。

# php - 如果白名单 IP 不存在，PHP 检查 cookie（出现 T_ELSEIF 解析错误）

> ID：14605690
> 
> 赞同：0
> 
> 时间：2013-01-30T13:53:21.980
> 
> 标签：php, wordpress

我根本不是 PHP 开发人员，这是一个主题提供的脚本，用于限制对白名单 IP 地址的访问。我希望对其进行修改，以便如果存在列入白名单的 IP，它会加载 WordPress（就像现在一样），否则如果数组中不存在 IP，它会检查 cookie。如果 cookie 存在 (passedSecurityTT) 显示 WordPress，最后，如果两者都不存在 - 重定向到 /login.php。

```
 <?php
    $whitelist = array('111.222.333.444', '111.222.333.445');
    if (in_array($_SERVER['REMOTE_ADDR'], $whitelist)) {

    define('WP_USE_THEMES', true);

    /** Loads the WordPress Environment and Template */
    require('./wp-blog-header.php');
    } else {
        //Action for all other IP Addresses
        echo 'You are not authorized here.'; 
        echo "<br />IP Address: ".$_SERVER['REMOTE_ADDR'];
        exit;
    }

elseif (!isset($_COOKIE['passedSecurityTT'])) {

    define('WP_USE_THEMES', true);

    /** Loads the WordPress Environment and Template */
    require('./wp-blog-header.php');
    } else {
        //Action for all other IP Addresses
        echo 'You are not authorized here.'; 
        echo "<br />IP Address: ".$_SERVER['REMOTE_ADDR'];
        exit;
    }

else {
header('Location: /login.php');
} 
```

但是我在第 16 行遇到错误：Parse error: syntax error, unexpected T_ELSEIF in /home/public_html/index.php on line 16

任何人都可以帮忙吗？还想我应该以某种方式将它包装在一个函数中，因为它重复了......

```
define('WP_USE_THEMES', true);

    /** Loads the WordPress Environment and Template */
    require('./wp-blog-header.php');
    } else {
        //Action for all other IP Addresses
        echo 'You are not authorized here.'; 
        echo "<br />IP Address: ".$_SERVER['REMOTE_ADDR'];
        exit;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:16:11.953

```
<?php
$whitelist = array('111.222.333.444', '111.222.333.445');
// check if remote address is in whitelist OR if cookie exists(this is not the best security practice! @FIXME
if (in_array($_SERVER['REMOTE_ADDR'], $whitelist) || isset($_COOKIE['passedSecurityTT'])) ) {

    define('WP_USE_THEMES', true);

    /** Loads the WordPress Environment and Template */
    require('./wp-blog-header.php');
} else {
    header('Location: /login.php');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:55:06.387

你不能有一个`elseif`after `else`：

```
<?php
$whitelist = array('111.222.333.444', '111.222.333.445');
if (in_array($_SERVER['REMOTE_ADDR'], $whitelist)) {

    define('WP_USE_THEMES', true);

     /** Loads the WordPress Environment and Template */
    require('./wp-blog-header.php');
} else {
    //Action for all other IP Addresses
    echo 'You are not authorized here.'; 
    echo "<br />IP Address: ".$_SERVER['REMOTE_ADDR'];   
    header('Location: /login.php');
    exit;
} 
```

# sql-server - SQL Server 图像列数据 - 可以复制和粘贴吗？

> ID：14605698
> 
> 赞同：4
> 
> 时间：2013-01-30T13:53:47.640
> 
> 标签：sql-server

我在尝试从`Image`SQL Server 中的列呈现图像时遇到问题。我使用网格结果中的直接复制和粘贴从客户端数据库获取图像数据，因为我们在导出过程中遇到了问题。

我知道在 65k 之后会发生截断，但是还有其他原因为什么您不能从一个`Image`列网格数据结果复制并粘贴到另一个？如果是这样，还有另一种方法可以复制数据`Tasks > Export`吗？

请注意，当我从数组中提取 mime 类型时`byte[]`，它会返回为`text/plain`，所以我也希望原始编码人员不需要某些特殊行为来处理数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:08:46.970

尝试使用 SQL 语句进行更新：

```
UPDATE table1
SET table1.Col_Image = (SELECT table2.Col_Image FROM table2 WHERE table2.ID = 2)
FROM table1 
WHERE table1.ID = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:08:07.657

您是否尝试过 INSERT...SELECT，为表 #1 选择图像并将它们插入表 #2？

```
insert into Table2 (Id2, NewImageField)
select Id1, OriginalImage
from table1
where Id1 = 1 
```

# python - 有人可以解释这个条件赋值吗？

> ID：14605701
> 
> 赞同：2
> 
> 时间：2013-01-30T13:53:52.163
> 
> 标签：python

我无法理解以下行：

```
result = (status!=None and "off" or "on") 
```

现在，当它被调用时，只`status`被分配了一个值（正则表达式搜索的结果）。但是，在此命令之后，`result`取值“on”或“off”。

在我未经训练的眼睛看来，这只是一个比较。这个任务是如何进行的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:57:45.653

从[文档](http://docs.python.org/2/reference/expressions.html#boolean-operations)中：

> 表达式`x and y`首先计算`x`; 如果`x`为假，则返回其值；否则，`y`评估并返回结果值。
> 
> 表达式`x or y`首先计算`x`; 如果`x`为真，则返回其值；否则，`y`评估并返回结果值。

此外，任何非空字符串在出现在布尔上下文中时都被认为是“真”。

有了这个，我们可以解决您的问题。

由于运算符优先级规则，以下内容：

```
status != None and "off" or "on" 
```

相当于：

```
(status != None and "off") or "on" 
```

第一部分，`status != None and "off"`评估为：

*   `False`如果`status`是`None`；
*   `"off"`否则

整个表达式的`(status != None and "off") or "on"`计算结果为：

*   `"on"`如果`status`是`None`；
*   `"off"`否则。

可以说，编写此语句的一种更 Pythonic 的方式是：

```
result = "on" if status is None else "off" 
```

# ruby-on-rails - 设计规范 - 范围视图无效

> ID：14605704
> 
> 赞同：1
> 
> 时间：2013-01-30T13:53:59.437
> 
> 标签：ruby-on-rails, rspec, devise

我正在使用[Devise](https://github.com/plataformatec/devise)，我认为它是我的 rails 3.2 应用程序的一个很好的身份验证工具。然而，使用 rspec 对其进行测试并不容易。

这是我的问题。我有不同的用户角色，一个是`user`，另一个是`admin`。我通过`config.scoped_views = true`在我的设计初始化程序中打开范围视图并通过运行生成视图`rails generate devise:views admins`。

以下是我失败的规格：

```
require "spec_helper"

describe "admins/sessions/new" do
  before do
    render
  end

  it "renders the form to log in" do
    rendered.should have_selector("form", action: admin_session_path, method: "post")
  end
end 
```

它给了我

```
expected following output to contain a
<form action='/admins/sign_in' method='post'/>
tag 
```

因为它实际上得到

```
<form action="/users/sign_in" method="post"> 
```

它仅使用终端中的默认设计用户输入呈现不同的表单。

这表明它正在呈现默认的设计用户视图，而不是实际的管理视图。但是，管理视图确实存在，并且规范描述中的路径是正确的。就像[这里](https://stackoverflow.com/questions/14461981/rspec-view-test-does-not-render-changes)显示的那样，我曾经遇到过同样的问题`users`- 但由于初始化程序和路径设置正确，这些都运行良好。

我什至在我的测试环境中的浏览器中访问了有问题的页面，并查看了页面的源代码，结果证明是正确的。所以我假设设计的范围视图在这个规范中没有任何影响？我需要告诉设计有多个用户范围吗？我必须在规范中做任何与平时不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:51:16.967

重新启动 rails 服务器并确保`initializers/devise.rb`解决了这个问题：

```
config.scoped_views = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:27:46.347

您是否尝试将此行添加到 spec_helper？

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end 
```

# php - php 命令不同步；您现在无法使用已释放的结果运行此命令

> ID：14605708
> 
> 赞同：0
> 
> 时间：2013-01-30T13:54:07.593
> 
> 标签：php, mysqli

嗨，我有几个 php 类。我正在传递一个到 MySql 数据库的连接。当我创建第一个类的实例并尝试使用 getinvoicedetails() 方法调用发票类时，我收到错误“命令不同步；您无法运行此命令”。

任何帮助将不胜感激。

这是代码：

```
 <?php //Invoicectrl class
    class invoicectrl
{
    // define properties
     public $invoices = Array();
     public $connection;
     public $userID;
     public $ownerID;

    // constructor
    public function __construct($userIDin,$ownerIDin) {
        $this->userID = $userIDin;
        $this->ownerID = $ownerIDin;

    }

     //function to set connection to db
    public function setconnection($conn){
        $this->connection = $conn;
    }
    public function getinvoicelist(){
        $res = Array();
        $invIDs = Array();

        //Get list of invoicenumbers and invoiceIDs
        $queryd = "CALL sp_getOwnersInvNumIDs (".$this->ownerID.")";
        $result = $this->connection->query($queryd) or die($this->connection->error.__LINE__);

        // GOING THROUGH invoices and getting there data
        $o=0;
        while($row = $result->fetch_assoc()) {
           $invIDs[$o]['ID'] = $row['invoiceID'];
           $invIDs[$o]['NR'] = $row['invoicenumber'];                               }
                   $result->free();

                   //Set each invoice own info
                   for($i=0;$i<=count($invIDs)-1;$i++){
                      $res[$i] = new invoice($invIDs['ID'],$invIDs['NR']);
                      $res[$i]->setconnection($this->connection);
           $res[$i]->getinvoicedetails();
                   } 

        return $res;
    }

}

?> 
```

这是发票类

```
 <?php //Invoice class
    class invoice
{
    // define properties
     public $invoiceID;
     public $invoicenumber;

     public $itemIDs=Array();
     public $items= Array();

     public $customerID;
     public $cust_company;
     public $cust_name;
     public $cust_email;
     public $cust_adress1;
     public $cust_adress2;
     public $cust_adress3;

     private $connection;

    // constructor
    public function __construct($invoiceIDin,$invoicenumberin) {
        $this->invoiceID = $invoiceIDin;
        $this->invoicenumber = $invoicenumberin;
    }

    //function to set connection to db
    public function setconnection($conn){
        $this->connection = $conn;
    }
        //sets all invoices details
    public function getinvoicedetails(){

                  //Get customer on invoice
                    $queryd = "select customerID FROM Accounting_Invoice_Customer where invoiceID =".$this->invoiceID."";
        $result = $this->connection->query($queryd) or die($this->connection->error.__LINE__);
                   while($row1 = $result->fetch_assoc()) {
            $this->customerID = $row1['customerID'];
                   }
                   $result->free();

                    //Get list of items on invoice
        $queryd = "call sp_getItems(".$this->invoiceID.")";
        $result = $this->connection->query($queryd) or die($this->connection->error.__LINE__);
        $o=0;
                   while($row2 = $result->fetch_assoc()) {
            $this->items[$o]['itemID'] = $row2['itemID'];

            //$this->items[$o]['itemnumber'] = $row['itemnumber'];
            //$this->items[$o]['itemdescription'] = $row['itemdescription'];
            //$this->items[$o]['itempricewotax'] = $row['itempricewotax']; 
            $o++;
        }       
                   $result->free(); 
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:54:58.147

当您运行 SQL 请求时，您必须通过整个结果或关闭游标，然后再发送另一个请求。

最好的办法是首先获取整个结果，然后使用 foreach 循环遍历它，以便能够发送第二个请求。此外，在您的 sql 查询中使用 INNER JOIN 应该是一个好主意。

```
$queryd = "CALL sp_getOwnersInvNumIDs (".$this->ownerID.")";
$result = $this->connection->query($queryd) or die($this->connection->error.__LINE__);
$invIDs = $result->fetch_all();
$res = array();
foreach($invIDs as $inv){
     $inv = new invoice($invIDs['invoiceID'],$invIDs['invoiceNumber']);
     $inv->setconnection($this->connection);
     $inv->getinvoicedetails();
     $res[] =$inv;
} 
```

# ruby-on-rails - 使用 hstore 过滤 activeadmin

> ID：14605710
> 
> 赞同：2
> 
> 时间：2013-01-30T13:54:14.250
> 
> 标签：ruby-on-rails, ruby, activeadmin

我想在 hstore 中使用 activeadmin 过滤器：

在模型中，我有带房间的列设施。

我想做这样的事情：

> filter :amenities, :as => :select, :collection => proc {Room.all.map{|r| r.amenities} }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T17:04:36.217

您可以为 HStore 数据类型创建一个 Formtastic 自定义输入。如果您不希望 Hstore 值可编辑，这应该足够了（您还可以使用 input_html_options 将输入字段设置为只读）：

```
class HstoreInput < Formtastic::Inputs::StringInput

end 
```

不过，这将破坏写入时的属性值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-05T12:02:27.863

使用 latest `activeadmin`（使用[ransack](https://github.com/activerecord-hackery/ransack)而不是[meta_search](https://github.com/activerecord-hackery/meta_search)）可以`ransacker`在模型中为 hstore 字段定义自定义：

```
class Room < ActiveRecord::Base
  store_accessor :options, :amenities

  ransacker :amenities do |parent|
    Arel::Nodes::InfixOperation.new('->', parent.table[:options], 'amenities')
  end
end 
```

然后它可以`activeadmin`用于过滤：

```
ActiveAdmin.register Room do
  filter :amenities_eq, label: 'Amenities', as: :select # ...
end 
```

# c# - MVC4 中的捆绑不起作用

> ID：14605712
> 
> 赞同：0
> 
> 时间：2013-01-30T13:54:17.427
> 
> 标签：c#, asp.net-mvc-4, bundle

> **可能重复：**
> [mvc4 bundler 不包括 .min 文件](https://stackoverflow.com/questions/11980458/mvc4-bundler-not-including-min-files)

我正在尝试将 JS 文件包含到我的包中。

我在 BundleConfig.cs 文件中注册新包，如下所示：

```
bundles.Add(new ScriptBundle("~/bundles/toastr").Include(
                    "~/Scripts/toastr.min.js")); 
```

然后我在我的母版页中这样称呼它：

```
@Scripts.Render("~/bundles/toastr") 
```

并且它没有在 HTML 页面中呈现。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:12:05.180

您似乎正在缩小已经缩小的 javascript，这几乎没有意义。ASP.NET MVC 中的捆绑和缩小检测到这种不一致，因为您的 javascript 文件的名称（包含`.min.js`）并忽略它。

所以你可以得到你正在使用的插件的非缩小版本，然后将它注册为一个包：

```
bundles.Add(
    new ScriptBundle("~/bundles/toastr").Include("~/Scripts/toastr.js")
); 
```

# java - OSGi 环境：如何在运行时更新类引用

> ID：14605713
> 
> 赞同：2
> 
> 时间：2013-01-30T13:54:19.123
> 
> 标签：java, osgi, declarative-services

我在 OSGi 环境下面临以下问题：假设我有一个包 A 导出 com.mybiz.example 包。这个包，在它的 1.0.0 版本中，包含一个 bean 类 MyBean 以便

```
public class MyBean {
 int var;
 public MyBean() { }
 public int getVar() { return var; }
 public void setVar(int v) { var = v; }
} 
```

Bundle B 导出一个使用 MyBean 的接口 MyService：

```
public interface MyService {
 public MyBean getMyBean();
} 
```

注意：在我们的架构中，MyBean 必须是类而不是接口。

Bundle C 以这种方式使用 MyService 作为声明式服务：

```
private AtomicReference<MyService> _serv = new AtomicReference<MyService>();
public void addMyService(MyService serv) {
 //this method is the one called by declarative services when Bundle B is started
 _serv.set(serv);
}

public void run() {
 ...

 MyBean x = _serv.getMyBean();
 //use x ...
} 
```

现在，如果我需要对 MyBean 类进行热修复，就会出现问题。假设我需要添加一个字段和一些方法。然后，我有一个正在运行的 OSGi 环境，其中部署了包 A、B、C。

我的要求是我不能停止任何捆绑。

因此，在这些假设下，我部署了我的包 A 的一个新版本，比如 A_1.1.0.jar。现在我无法使包 C 使用 A_1.1.0.jar 中包含的新版本的 MyBean 类。

我该怎么做？

非常感谢你！

最好的祝福

盖尔西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:07:40.393

请参阅 BJ Hargrave 在 Equinox 邮件列表中给您的答案。为了其他 StackOverflow 用户，我将总结 BJ 的答案。

`MyBean`是服务的 API 或合同的一部分，并且捆绑包不能简单地即时重新加载 API。Bundle C 必须停止、刷新/解决，然后重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:05:28.463

AFAIK，你不能。在我的脑海中，我认为您已将包 A 移至 INSTALLED 状态，这可能也会将任何依赖项置于 INSTALLED 状态。然后您安装新版本的捆绑包，然后解析应该选择新版本。

但我可能错了...

# java - 为什么javac在这种情况下可以编译

> ID：14605719
> 
> 赞同：2
> 
> 时间：2013-01-30T13:54:45.330
> 
> 标签：java, javac

我的环境是 Windows 7 和 JDK 1.7。

我*没有*设置`CLASSPATH`环境变量；`echo %CLASSPATH%`什么都不输出。

Java编译器：`C:\Program Files\Java\jdk1.7.0_10\bin`
Java源码：在`D:\tmpmulu\Tj.java`

我运行如下命令：

```
C:\>"C:\Program Files\Java\jdk1.7.0_10\bin\javac.exe" -cp d:\tmpmulu\ d:\tmpmulu\Tj.java 
```

有用。该命令设置类路径并编译文件。

但是当我将命令更改为使用`.`而不是`d:\tmpmulu\`我的类路径时：

```
C:\>"C:\Program Files\Java\jdk1.7.0_10\bin\javac.exe" -cp . d:\tmpmulu\Tj.java 
```

也没关系。

这让我很困惑。表示当前`.`路径，应该是`c:\`. 它是如何成功运行的？

另一个问题是如下命令：

```
C:\>"C:\Program Files\Java\jdk1.7.0_10\bin\javac.exe" -cp d:\tmpmulu\ Tj.java 
```

正如我的想法，类路径设置为`d:\tmpmulu\`，它应该找到该`Tj.java`文件。但结果是“找不到文件 Tj.java”。

谁能告诉我细节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:56:49.077

好吧，大概您的代码基本上不依赖于类路径中的任何内容。如果*它只*使用来自 JDK 的类，那绝对没问题。

请注意，类路径仅用于查找*类文件*，而不是*源代码*。这解释了当你的源路径不在类路径上时*没有*失败，然后当你尝试使用类路径来定位时失败`Tj.java`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:11:29.937

首先，如果您使用**javac -cp 进行编译。myClass.java**，你可以省略它 -cp 。完全，因为它是默认的类路径。其次，当您需要指定对标准 JDK 库中未包含的其他 JAR 文件（例如 jdbc 连接器）的引用时，应使用**-cp 。****如果您的类不需要任何额外的库，那么您告诉javac**查看哪个目录并不重要。

# asp.net-mvc - JSON图像上传到页面

> ID：14605726
> 
> 赞同：0
> 
> 时间：2013-01-30T13:55:19.097
> 
> 标签：asp.net-mvc, jquery

在我的 ASP.NET MVC4 项目中，我使用库 jQuery。我定义了 EF 代码优先模型。
数据库有类似的模型

```
public class Description{
  public int Id{}
  public string Name{}
  public byte[] Img{}
} 
```

图片存储在“Img”字段中。而且我无法理解如何在使用 AJAX 查询时返回这张图片进行表示。控制器给了我 JSONresult，我得到了 JSON 的表示。我如何从中获取图片并将其插入到例如 div 中。请给我建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:32:12.687

基于对这个问题的回答：[如何从 json 数组加载图片？](https://stackoverflow.com/questions/5542131/how-to-load-pictures-from-json-array)

看来您的 javascript 将需要遍历字节并将它们附加到浏览器中的图像数据。

# c# - “提交已在进行中”尝试在 Telerik OpenAccess ORM 中保存更改

> ID：14605727
> 
> 赞同：6
> 
> 时间：2013-01-30T13:55:28.900
> 
> 标签：c#, .net, multithreading, orm, telerik-open-access

我一直在试图弄清楚我的代码中是如何发生错误的。异常告诉我提交已经在进行中，但除非调用`SaveChanges`是异步的，否则我看不到这是如何发生的。

我有一个`Scheduler`包含多个`Task`对象的类。每个`Task`都有一个`BackgroundWorker`在另一个线程中进行处理的。然后，我在类中有一个用于此 BackgroundWorker 完成事件的事件处理程序，`Task`代码如下：

```
private void TaskWorkCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (!(e.Result is TaskResult))
        throw new ArgumentException("Result must be a TaskResult class.");

    TaskComplete((TaskResult)e.Result);
} 
```

还在我这儿？所以我的任务类中有这个事件处理程序，它触发`TaskComplete`我在主`Scheduler`类中使用以下代码处理的事件：

```
private void TaskCompleted(object sender, TaskCompletedEvent e)
{
    Model.Task scheduledTask = entitySet.Tasks.First(x => x.TaskName == e.ClassName);
    TaskLog logMsg = new TaskLog()
    {
        //stuff here
    };

    scheduledTask.TaskLogs.Add(logMsg);
    entitySet.SaveChanges();
} 
```

现在，据我了解，我回到了我的主线程，因为在我的 backgroundworker 中完成的工作已经完成。当我有 5 个任务非常频繁地运行时，我在 SaveChanges 上收到一个异常，说提交已经在进行中。我不明白这是怎么回事，因为我没有跨线程共享这个上下文。我可以看到这种情况发生的唯一方法是 SaveChanges 是异步的（不是阻塞调用）。我知道用 using 语句将代码包装在 TaskCompleted 中，新的上下文可以解决它，但我想知道为什么。以及为什么不能在当前状态下工作。

最后一件事，我正在使用 Telerik 的 OpenAccess ORM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:51:33.113

尝试像这样同步提交：

```
private static object _syncObject = new object();

private void TaskCompleted(object sender, TaskCompletedEvent e)
{
    Model.Task scheduledTask = entitySet.Tasks.First(x => x.TaskName == e.ClassName);
    TaskLog logMsg = new TaskLog()
    {
        //stuff here
    };

    scheduledTask.TaskLogs.Add(logMsg);
    lock(_syncObject){
        entitySet.SaveChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:24:32.963

您可能`DbContext`在多个线程之间共享一个。

如果您想在多线程环境中使用数据库，最好在开始处理对象之前分离对象（即不使用代理或延迟加载）。然后只需`DbContext`为每个任务创建一个新的，附加对象，然后保存更改。

但是，这会降低速度。如果您想共享`DbContext`上下文，您可能应该保留一些计数器，该计数器随每个任务增加，然后在每个任务完成时减少。最后仅在计数器再次达到零时保存更改。

# uml - 扩展用例

> ID：14605731
> 
> 赞同：1
> 
> 时间：2013-01-30T13:55:50.700
> 
> 标签：uml

在用例图中，如果用例 B 扩展了用例 A，是否意味着只与用例 A 相关联的参与者……也与用例 B（间接）相关联？

我正在为犯罪记录管理系统制作用例图。监狱长和警察都有权通过不同的输入搜索罪犯，然后访问他的全部信息。在查看罪犯的信息时，警司也可以选择修改，而警察则没有。

现在，我已经将“搜索”和“访问信息”的用例设置为两个参与者都可以访问的相同。“访问信息”用例扩展了“搜索”用例。现在，如果我通过图中的“更新”用例扩展“访问信息”，是否意味着任何可以访问信息的人也可以更新？也就是说，我是否会错误地描述警察也可以更新罪犯的信息。

*我没有在警官参与者和更新用例之间建立关联。我对这里的间接关联感到困惑……通过搜索和访问信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:43:27.073

> > 如果用例 B 扩展了用例 A，是否意味着仅与用例 A 相关联的参与者……也与用例 B 相关联

不，它没有。就向现有用例添加额外的步骤或选项而言，“扩展”关系可以被认为意味着“添加到”。因此，如果参与者与用例 A 相关联，那么他们可能与扩展用例“B”相关联，也可能不相关。

您可能正在寻找用例之间的继承（泛化）。如果用例 B 继承自用例 A，那么如果一个参与者与用例 A 相关联，则此关系由用例 B 继承。这个问题（尽管工具允许您绘制它）是用例继承的语义是' 并没有真正由标准定义，因此您需要自己清楚地定义您的意思。

不过，看看你的例子的细节，我认为你快到了。如果您创建一个扩展“访问信息”的用例“访问和更新信息”，那么只有监狱主管参与者应该有权访问它。

您还可以考虑演员之间的继承，这可以很好地工作。例如，您可以有一个访问搜索和访问信息的基本参与者“只读用户”。然后添加一个扩展“只读用户”的参与者“信息所有者”（例如），并添加对“访问和更新信息”用例的引用。您现在所做的是根据用户在系统中而不是在域中所扮演的角色来描述用户交互。这可能是有用的，也可能是沟通的障碍——这完全取决于上下文。

如果与最终用户的沟通是关键，我建议保持图表非常简单，不要使用任何这些复杂的关系。另一方面，如果使用该模型的人对 UML 有相当好的了解，那么使用“扩展”和参与者继承可以增加模型的精度并避免重复。

# python - numpy：将由 nans 分隔的 1D 块数组拆分为块列表

> ID：14605734
> 
> 赞同：7
> 
> 时间：2013-01-30T13:55:54.223
> 
> 标签：python, numpy

我有一个 numpy 数组，其中只有一些值是有效的，其余的是 nan。例子：

```
[nan,nan, 1 , 2 , 3 , nan, nan, 10, 11 , nan, nan, nan, 23, 1, nan, 7, 8] 
```

我想将其拆分为包含每次有效数据的块列表。结果将是

```
[[1,2,3], [10,11], [23,1], [7,8]] 
```

我设法通过遍历数组、检查 isfinite() 并生成 (start,stop) 索引来完成它。

然而......它是痛苦的缓慢......

你也许有更好的主意？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T14:22:45.710

这是另一种可能性：

```
import numpy as np
nan = np.nan

def using_clump(a):
    return [a[s] for s in np.ma.clump_unmasked(np.ma.masked_invalid(a))]

x = [nan,nan, 1 , 2 , 3 , nan, nan, 10, 11 , nan, nan, nan, 23, 1, nan, 7, 8]

In [56]: using_clump(x)
Out[56]: 
[array([ 1.,  2.,  3.]),
 array([ 10.,  11.]),
 array([ 23.,   1.]),
 array([ 7.,  8.])] 
```

* * *

一些比较 using_clump 和 using_groupby 的基准测试：

```
import itertools as IT
groupby = IT.groupby
def using_groupby(a):
    return [list(v) for k,v in groupby(a,np.isfinite) if k] 
```

* * *

```
In [58]: %timeit using_clump(x)
10000 loops, best of 3: 37.3 us per loop

In [59]: %timeit using_groupby(x)
10000 loops, best of 3: 53.1 us per loop 
```

对于较大的阵列，性能甚至更好：

```
In [9]: x = x*1000
In [12]: %timeit using_clump(x)
100 loops, best of 3: 5.69 ms per loop

In [13]: %timeit using_groupby(x)
10 loops, best of 3: 60 ms per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:10:10.427

我会使用`itertools.groupby`- 它可能会稍微快一点：

```
from numpy import NaN as nan
import numpy as np
a = np.array([nan,nan, 1 , 2 , 3 , nan, nan, 10, 11 , nan, nan, nan, 23, 1, nan, 7, 8])
from itertools import groupby
result = [list(v) for k,v in groupby(a,np.isfinite) if k]
print result #[[1.0, 2.0, 3.0], [10.0, 11.0], [23.0, 1.0], [7.0, 8.0]] 
```

# python - 使用 Tornado 将 Zip 文件上传到服务器时会损坏

> ID：14605740
> 
> 赞同：1
> 
> 时间：2013-01-30T13:56:14.183
> 
> 标签：python, upload, zip, tornado

我正在使用下面的代码将 zip 文件上传到服务器。一切正常，但传入的 zip 文件由于某种原因已损坏。我知道 zip 文件已正确创建，因此它们在创建时不会损坏。因此，服务器代码有问题。

简而言之，像这样`.txt`的常规文件可以正常上传，但传入的 zip 文件已损坏。任何人都知道为什么会发生这种情况？

```
import tornado
import tornado.ioloop
import tornado.web
import os, uuid

__UPLOADS__ = "uploads/"

class Userform(tornado.web.RequestHandler):
    def get(self):
        self.render("form.html")

class Upload(tornado.web.RequestHandler):
    def post(self):
        fileinfo = self.request.files['filearg'][0]
        fname = fileinfo['filename']
        fh = open(__UPLOADS__ + fname, 'w')
        fh.write(fileinfo['body'])
        self.finish("Success!")

application = tornado.web.Application([
    (r"/", Userform),
    (r"/upload", Upload),
    ], debug=True)

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:31:45.337

如果服务器在 Windows 机器上运行，那是因为这行代码：

```
fh = open(__UPLOADS__ + fname, 'w') 
```

将文件作为文本文件打开。当您使用它来创建包含二进制数据的文件时，每次出现的值`0x0a`（换行符）都将替换为一`\n\r`对。将该行更改为

```
fh = open(__UPLOADS__ + fname, 'wb') 
```

...将其作为二进制文件打开并查看会发生什么。

# jquery - jquery，为改变背景添加动画

> ID：14605742
> 
> 赞同：1
> 
> 时间：2013-01-30T13:56:18.180
> 
> 标签：jquery, css

是否可以在更改背景中添加动画。我试过这样的`CSS3`财产`transition` `background and background-image`：

```
var affected_element = $('body');
affected_element.css('min-height', '100%');
affected_element.css('min-width', '100%');
affected_element.css('background-size', 'cover');

affected_element.css('transition', 'background 1s');
affected_element.css('-moz-transition', 'background 1s');
affected_element.css('-webkit-transition', 'background 1s');
affected_element.css('-o-transition', 'background 1s');

var config = $('.fullscreen_src');

affected_element.css('background-image', "url('" + config[0].src + "')");
imageIndex = 1,
setInterval(function(){ affected_element.css('background-image', "url('" + config[imageIndex++ % config.length].src + "')" ) }, 3000); 
```

但我没有看到过渡正在产生任何影响？我做错了什么还是有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:50:57.987

你可以使用这个插件：[http ://www.buildinternet.com/project/supersized/](http://www.buildinternet.com/project/supersized/)

您需要做的是拥有普通图像并获取内容背后的图像（z-index 和内容等不包括在我的示例中）：

**html:**

```
<body>
  <div id="background">
    <img src="image1.jpg" />
    <img src="image2.jpg" />
  </div>
</body> 
```

**CSS：**

```
html,body
{
  height: 100%;
  width: 100%;
}
body
{
  position: relative;
}
#container, #container img
{
  position: absolute;
  top: 0px; 
  left: 0px;
  width: 100%; 
  height: 100%;
}
#container img + img
{
  display: none;
} 
```

如果你想从 image1 切换到 image2：

```
$('#background img:eq(1)').fadeIn().siblings().fadeOut(); 
```

作为一般的 jQuery 提示：您可以链接方法：

```
var affected_element = $('body');
affected_element.css('min-height', '100%')
  .css('min-width', '100%')
  .css('background-size', 'cover'); 
```

或者更好（使用动画或 css（以及许多其他功能）时）：

```
var affected_element = $('body');
affected_element.css({
  'min-height': '100%'
  'min-width': '100%',
  'background-size': 'cover'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:01:49.370

这是一个淡入淡出的解决方案：

```
var affected_element = $('body');
affected_element.fadeOut(3000);
affected_element.promise.done(function(){
  $(this).css('background-image',newSource).fadeIn(3000);
}); 
```

当淡出完成后，图像源会发生变化并使用淡入动画显示。

# java - 我可以增加自动完成（内容辅助）中显示的选项范围吗？

> ID：14605744
> 
> 赞同：0
> 
> 时间：2013-01-30T13:56:20.377
> 
> 标签：java, eclipse, content-assist

我不知道这个功能的名称，所以我认为最好使用一个示例：假设您有一个`player`带有`getScore()`方法的对象。

如果您键入`player.sco`，它将显示以“sco”开头的属性和方法，而不是`getScore()`方法。我已经使用 MonoDevelop 有一段时间了，它会显示任何出现您键入的字符串的选项，所以`getScore()`会在那里。是否可以设置 eclipse 做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:45:29.157

从 Eclipse Juno (v4.2) 开始，集成了一个[Code Recommenders](http://www.eclipse.org/recommenders/)代码辅助插件，它可以完全满足您的需求。

默认情况下，仅启用智能补全，但在`Window -> Preferences -> Code Recommenders`菜单中，您可以启用 Chains 以及在您的情况下启用[Subwords](http://code-recommenders.blogspot.cz/2011/08/eclipse-subwords-completion-1-here-you.html)。

确保您还启用了要显示的子词 ( `Window -> Preferences -> Java -> Editor -> Content Assist -> Advanced`)。

这是一个简单的示例，其中包含`System.setOut()`仅针对`out`子字符串显示的方法：

![Recommenders 子词示例](../Images/18d0bcd43b9e89074b52bea361647b57.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:29:48.737

我查看了 Eclipse Content Assist 配置，但没有发现任何可以更改过滤器的内容，例如从“开始于”到“包含”。

它可能是另一种方式来做到这一点，但是，我不知道该怎么做。

但是，我有一个建议给你。

你知道吗，如果你把首字母用小驼峰写，你会得到更好的结果，例如：

在您的对象`player`中，您有`getScore()`方法。如果您键入：

```
player.gS 
```

然后使用`CTRL + Space`该`getScore()`方法将为您建议。

也许这不是你想要的，但也许它有帮助。

# javascript - Javascript 中 IIFE 的作用域

> ID：14605745
> 
> 赞同：3
> 
> 时间：2013-01-30T13:56:20.833
> 
> 标签：javascript, namespaces, scope, iife

我正在使用一个使用 jsonP 共享跨域信息的脚本。它运作良好，但我需要把它放在 IIFE 中。

```
var domain = "http://example.com/";
var myObj = {
    recupData : function(data){
        if (data.id) {
            console.log(data.id);
        }
    },
    scriptTag : function() {
        var siteOrigin = domain+"check?q=myObj.recupData",
            script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = siteOrigin;
        document.getElementsByTagName('HEAD')[0].appendChild(script);
    }
}
myObj.scriptTag(); 
```

这样可行！（我只使用了我的全局脚本的一小部分，只是为了向您展示结构，所以如果那里有任何语法错误，那不是重点）。

但是当我把这段代码放在一个 IIFE（一个自调用函数）中时，我遇到了一些麻烦。

```
(function(){
var domain = "http://example.com/";
var myObj = {
    recupData : function(data){
        if (data.id) {
            console.log(data.id);
        }
    },
    scriptTag : function() {
        var siteOrigin = domain+"check?q=myObj.recupData",
            script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = siteOrigin;
        document.getElementsByTagName('HEAD')[0].appendChild(script);
    }
}
myObj.scriptTag();
})(); 
```

我收到错误 myObj 未定义，错误来自 scriptTag 方法，我真的不明白为什么在添加 IIFE 之前我无法访问此方法，它不应该改变任何东西，它只是避免污染全局命名空间。我认为这只是一个上下文问题，但我需要一个解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:10:33.843

使用 IIFE 的动机是您的变量名不会“泄漏”到全局范围内。但是，当您使用 JSONP 时，您*有义务*向全局范围公开至少一个变量，以便加载的脚本可以调用它（或其方法之一）。这个加载的脚本作为一个单独的`script`标签插入到`head`, 在一个完全不同的范围内，因此您只能通过全局范围与它共享变量。

例如，假设您的调用`http://mydomain.com/check?q=myObj.recupData`产生如下响应：

```
myObj.recupData({"id":123,"more":"stuff"}) 
```

这是在一个单独的脚本标签中加载的，就像你写的一样：

```
<script type="text/javascript">
myObj.recupData({"id":123,"more":"stuff"})
</script> 
```

显然，如果这个调用应该工作，`myObj`需要在全局范围内，所以你应该把它的声明移到 IIFE 之外，或者在`window`对象上显式注册它：

```
// Global declaration
var myObj;
(function(){
    var domain = "http://mydomain.com/";
    myObj = { ... };
    myObj.scriptTag();
})();

// Registering on window
(function(){
    var domain = "http://mydomain.com/";
    // Also get it as a local variable
    // for a minor scope lookup optimization
    var myObj = window.myObj = { ... };
    myObj.scriptTag();
})(); 
```

第二个选项可能更有趣，因为无论您将代码段放在哪里，它都会最终出现在全局范围内。如果由于某种原因您最终将第一个片段嵌套在另一个 IIFE 中，您还需要记住移动`myObj`声明，这可能很麻烦。

# sql - SQL排除内连接表

> ID：14605754
> 
> 赞同：0
> 
> 时间：2013-01-30T13:56:57.213
> 
> 标签：sql, inner-join

我有一个有 2 列我关心的表

```
Business_ID   /   Product type 
```

我正在尝试编写一个 SQL 查询，以仅获取销售一种类型的企业，而不是其他类型的企业。所以表格填充了

```
B_ID    prod_type
123  |   A
123  |   A
123  |   B
234  |   A
234  |   C
234  |   C
456  |   A
456  |   D
789  |   A 
```

这样的例子不胜枚举。我正在尝试编写一个 SQL 语句，它将找到一个 B_ID，它销售 prod_type A 而不是 prod_type B、C、D。这是我正在尝试的，但它不起作用

```
SELECT phop_1.Business_id, phop_1.PRODUCT_TYPE, count(*) 
FROM phop phop_1, phop phop_2
WHERE phop_1.Business_id = phop_2.Business_id
  AND phop_1.PRODUCT_TYPE = 'A'
  AND NOT phop_2.PRODUCT_TYPE = 'B'
GROUP BY phop_1.Business_id, phop_1.PRODUCT_TYPE 
```

我还找到了如何使用外连接排除，但由于它是同一个表，我不能这样做，除非有办法在进行连接之前选择 prod_type A。

```
select phop_1.Business_id, phop_1.PRODUCT_TYPE, count(*) 
from phop phop_1
LEFT OUTER JOIN phop phop_2
ON phop_1.Business_id = phop_2.Business_id
WHERE phop_2.Business_id IS NULL
GROUP BY phop_1.Business_id, phop_1.PRODUCT_TYPE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:01:57.933

你可以尝试这样的事情：

```
SELECT DISTINCT p.BusinessId
FROM phop p
   LEFT JOIN phop p2 ON p.BusinessId = p2.BusinessId AND p2.Product_Type <> 'A'
WHERE p2.BusinessId IS NULL 
```

还有[小提琴](http://sqlfiddle.com/#!3/2eb28/2)。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:09:04.910

首先选择只有一种产品类型的企业，然后将其加入到您的原始表格中。

```
DECLARE @tbl TABLE
    (
     B_ID INT,
     prod_type VARCHAR(100)
    )

INSERT  INTO @tbl
        (B_ID, prod_type)
VALUES  (123, 'A'),
        (123, 'A'),
        (123, 'B'),
        (234, 'A'),
        (234, 'C'),
        (234, 'C'),
        (456, 'A'),
        (456, 'D'),
        (789, 'A') ;

WITH    businessIdsWithOneProductType
          AS (SELECT    B_ID
              FROM      @tbl t
              GROUP BY  B_ID
              HAVING    COUNT(DISTINCT prod_type) = 1)
    SELECT  *
    FROM    businessIdsWithOneProductType
            INNER JOIN @tbl ON businessIdsWithOneProductType.B_ID = [@tbl].B_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:04:13.010

```
SELECT a.*
FROM    tableName a
        LEFT JOIN tableName b
            ON a.B_ID = b.B_ID AND
                b.prod_type IN ('B','C','D')
WHERE b.B_ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9dbf7/6)

# javascript - Jquery Slider Widget ui-slider-handle 刻度手柄条

> ID：14605757
> 
> 赞同：1
> 
> 时间：2013-01-30T13:57:09.483
> 
> 标签：javascript, slider

我正在尝试更改 ui 滑块处理程序的图像大小，以在您将滚动条向右移动时增加，并在您向左滚动时减小大小。我当然会使用 SVG，所以比例保持准确！有任何想法吗？:(

你可以在这里查看代码：http: [//jsfiddle.net/userdude/3teR3/](http://jsfiddle.net/userdude/3teR3/)

或在这里：

```
 #slider {
    width: 200px;
    margin: 50px auto;

}
.ui-slider .ui-slider-handle {
    width:28px; 
    height:28px; 
    background:url(http://hitskin.com/themes/13/67/44/i_right_arrow.png) no-repeat 0 0;
    overflow: hidden; 
    position:absolute;
    margin-left:0px;
    top: -7px;
    border-style:none;
    cursor:help;
}

 <div id="slider"></div>

$(function() {
    $("#slider").slider();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:42:17.800

您可以使 .png 的大小取决于宽度和高度，并使用滑块值更改它们：

HTML：

```
 <div id="slider"></div> 
```

CSS：

```
html,
body {
  width: 100%;
}
  #slider {
  width: 200px;
  margin: 50px auto;
}
  .ui-slider .ui-slider-handle {
  width:28px; 
  height:28px; 
  background:url(http://hitskin.com/themes/13/67/44/i_right_arrow.png) no-repeat 0 0;

  background-size:100%;  /*this is the importent thing!*/

  overflow: hidden; 
  position:absolute;
  margin-left:0px;
  top: -7px;
  border-style:none;
  cursor:help;
} 
```

Javascript：

```
$(function() {
  $("#slider").slider({    
    min:0, max: 10,
    slide: function(event,ui){
      $(".ui-slider-handle").css('width',28*(1+(ui.value)));
      $(".ui-slider-handle").css('height',28*(1+(ui.value)));
    },
  });
}); 
```

在这里作为 jsFiddle： http: [//jsfiddle.net/1Blerk/3teR3/20/](http://jsfiddle.net/1Blerk/3teR3/20/) 也许它对你仍然有用。

# c# - ListPicker 完整模式 wp8 上的 XamlParseException

> ID：14605761
> 
> 赞同：1
> 
> 时间：2013-01-30T13:57:18.580
> 
> 标签：c#, silverlight, xaml, exception, windows-phone-8

我已经尝试了该网站上建议的大部分选项，但我可能仍然失踪，或者你们中的一些人可能知道其他方式。

```
<toolkit:ListPicker x:Name="listPicker1" Margin="14,89,10,206" Grid.Row="1" FullModeHeader="FullMode" SelectedIndex="0">
                    <toolkit:ListPickerItem Content="1" />
                    <toolkit:ListPickerItem Content="2" />
                    <toolkit:ListPickerItem Content="3" />
                    <toolkit:ListPickerItem Content="4" />
                    <toolkit:ListPickerItem Content="5" />
                    <toolkit:ListPickerItem Content="6" />
                    <toolkit:ListPickerItem Content="7" />
                    <toolkit:ListPickerItem Content="8" />
                    <toolkit:ListPickerItem Content="9" />
                    <toolkit:ListPickerItem Content="10" />
                    <toolkit:ListPickerItem Content="11" />
                    <toolkit:ListPickerItem Content="12" />
                </toolkit:ListPicker> 
```

使用 Silverlight for Windows Phone Toolkit 2010 年 11 月。 ListPicker 在正常或扩展模式下工作正常（前提是我减少了选择器中的项目数量 - 它不会自动更改为完整模式）但是如果我在属性中选择完整模式，它会抛出以下例外：

System.Windows.ni.dll 中出现“System.Windows.Markup.XamlParseException”类型的第一次机会异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T23:22:54.737

解决方法：更新工具包，将列表类型改为1

# c++ - 自动生成位位置

> ID：14605763
> 
> 赞同：2
> 
> 时间：2013-01-30T13:57:23.810
> 
> 标签：c++

我有一些看起来像这样的位掩码：

```
namespace bits { 
  const unsigned bit_one    = 1u << 0; 
  const unsigned bit_two    = 1u << 1; 
  const unsigned bit_three  = 1u << 2; 
  ......
  const unsigned bit_ten    = 1u << 10; 
} 
```

除了有更多位并且名称实际上是我的程序有意义的标志。但有时我会删除位、添加位、重新组合相似的位等。理想情况下，我可以这样做：

```
namespace bits { 
  const unsigned bit_one    = 1u << COUNTER; 
  const unsigned bit_two    = 1u << COUNTER; 
  const unsigned bit_three  = 1u << COUNTER; 
  ......
  const unsigned bit_ten    = 1u << COUNTER; 
} 
```

是否有一些模板/宏可以自动执行此过程？我知道`__COUNTER__`，但这是一个标题，所以如果它被包含在其他使用它的源中，`__COUNTER__`它可能会损坏。我正在使用 C++11 之前的框架，因此虽然最终会升级我的编译器，但不使用 C++11 的解决方案将是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:03:30.483

为什么不使用带有参数的宏？

```
#define BIT(n) (1 << (n)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:13:15.267

您可以使用`__LINE__`宏，它是标准 C 和 C++ 的一部分。谨慎使用并记录您的意图，以便其他阅读代码的人能够理解。

```
#include <iostream>

namespace Bits
{
    const unsigned Base     = __LINE__ + 1;
    const unsigned BitOne   = 1u << __LINE__-Base;
    const unsigned BitTwo   = 1u << __LINE__-Base;
    const unsigned BitThree = 1u << __LINE__-Base;
}

int main(void)
{
    std::cout << Bits::BitOne   << '\n';
    std::cout << Bits::BitTwo   << '\n';
    std::cout << Bits::BitThree << '\n';
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:13:45.740

以下将解决问题：

```
#define NEXT_MASK(x)         \
    DUMMY1_##x,              \
    x = (1U << DUMMY1_##x), \
    DUMMY2_##x = DUMMY1_##x

enum {
  NEXT_MASK(one),
  NEXT_MASK(two),
  NEXT_MASK(three),
  NEXT_MASK(four)
};

#include <stdio.h>

int main()
{
  printf("%x\n", one);
  printf("%x\n", two);
  printf("%x\n", three);
  printf("%x\n", four);
  return 0;
} 
```

该程序将发出：

```
1
2
4
8 
```

这个想法是第一个虚拟枚举比之前的枚举更上一层楼。x 是掩码，第二个 dummy 恢复值，这样下一个宏会有一个好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:28:11.187

经典的解决方案是枚举字段：

```
enum foo_flags {
    alpha,
    beta,
    gamma,
    count
}; 
```

然后使用`std::bitset<count>`H2CO3 建议的任何一个或 BIT 宏：

```
BIT(alpha) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T14:49:55.083

微软 C++ 有

```
__COUNTER__ 
```

预定义的宏，所以你可以...

```
#define NEXTBIT (1u << __COUNTER__)
namespace bits { 
  const unsigned bit_one    = NEXTBIT; 
  const unsigned bit_two    = NEXTBIT; 
  const unsigned bit_three  = NEXTBIT; 
} 
```

# wpf - 安装 .NET 4.5 后无法构建单元测试项目

> ID：14605765
> 
> 赞同：31
> 
> 时间：2013-01-30T13:57:25.420
> 
> 标签：wpf, unit-testing, .net-4.5, icommand, vs-unit-testing-framework

我在 .NET 4.0 中有一个 WPF 解决方案，其中包括一个单元测试项目，用于测试 ViewModel 中使用的不同命令。一切正常，但后来我安装了 .NET 4.5 和 VS2012。

现在，当我尝试构建解决方案时，我收到错误消息，例如 -

> 语言不支持 SomeProject.UsersViewModel_Accessor.AddUserToAccountsCommand'

我注意到并尝试了以下方法 -

**1.参考`UnitTestFramework.dll`：**
在安装VS2012之前，`UnitTestFramework.dll`参考自-

`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies\`

现在更改为从 -

`C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v4.0`

因此，它现在从 VS2012 目录中获取参考。我手动恢复了对先前状态的引用。但没有运气。

**`ICommand`**
2.**组装****：**`AddUserToAccountsCommand`是一个`ICommand`对象，在 .NET 4.0 中它驻留在`PresentationCore.dll`. 但是，在 .NET 4.5 中，它位于`System.dll`. 所以我也检查了这些参考资料，但它们看起来还不错，就像以前一样。

**3\. 测试目标**
的实例化：错误消息仅在测试目标被创建为访问器的地方显示，如`UsersViewModel_Accessor`，但在直接实例化时不显示。这意味着虽然以下代码会产生错误 -

```
UsersViewModel_Accessor target = new UsersViewModel_Accessor();
Assert.IsTrue(target.AddUserToAccountsCommand.CanExecute(null), "Failed to perform can exetuce of add user command");
target.AddUserToAccountsCommand.Execute(null); 
```

以下代码不 -

```
UsersViewModel target = new UsersViewModel();
Assert.IsTrue(target.AddUserToAccountsCommand.CanExecute(null), "Failed to perform can exetuce of add user command");
target.AddUserToAccountsCommand.Execute(null); 
```

那么，任何人都可以分享有关此问题的确切原因以及如何解决的任何想法吗？

**编辑：**
开始收到错误后，我还安装了 VS2010 SP1。仍然没有运气。

**EDIT-2：**
在同一台机器上，我也需要将 VS2012 用于其他项目。所以卸载 .NET 4.5/VS2012 不是解决方案。
只是为了检查，我在另一台机器上采用了解决方案，仅安装了 .NET 4.5，而不是 VS2012，并尝试构建。但同样的故事。所以，这个问题与 VS2012 无关，它是 .NET 4.0 和 .NET 4.5 之间的冲突。为了反映这一点，我将更改问题的标题。

# java - 如何处理 JSP 下拉列表错误处理

> ID：14605769
> 
> 赞同：1
> 
> 时间：2013-01-30T13:57:29.460
> 
> 标签：java, jsp, servlets, drop-down-menu

我正在填充我的数据库数据作为下拉列表中的选项

```
<select name="AccountType">
                    <option value = "1">Please Select</option>
                        <c:forEach items="${UserItem}" var="AccountType">
                            <option value="${AccountType.getRoleId()}">${AccountType.getRoleName()}</option>
                        </c:forEach>
                    </select>

<%
                                if (errors.containsKey("AccountType"))
                                {
                                    out.println("<span class=\"warning\">" + errors.get("AccountType") + "</span>");
                                }
                            %> 
```

在我的 servlet 中，这是代码

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException
    {

        logger.debug("Add User page requested");
        List<User> UserItems = new UserDAO().RoleTypeList();
        req.setAttribute("UserItem", UserItems);
        jsp.forward(req, resp);
    } 
```

现在确定用户是否忘记在下拉列表中选择第一个选项（请选择）我尝试了这段代码

```
long AccountType = Integer.parseInt(req.getParameter("AccountType"));
        if ("1".equals(AccountType))
        {
            errors.put("AccountType", "Required");
        }
        else if (req.getParameter("AccountType") != null && !"".equals(req.getParameter("AccountType")))
        {
            long RoleId = Integer.parseInt(req.getParameter("AccountType"));
            emsItem.setRoleId(RoleId);
        } 
```

当我单击提交按钮时，什么也没发生。我的下拉列表的项目也不见了，所以我只需要返回页面即可。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:11:52.130

问题在于这两行：

```
long AccountType = Integer.parseInt(req.getParameter("AccountType"));
if ("1".equals(AccountType)) 
```

`Integer.parseInt()`返回一个整数。你为什么把它存储成一个长的？然后，一旦你有这个 long，你测试 long 是否等于 String `"1"`。long 永远不会等于 String，因为它们甚至不是同一类型。

要么使用

```
int accountType = Integer.parseInt(req.getParameter("AccountType"));
if (accountType == 1) 
```

或者

```
String accountType = req.getParameter("AccountType");
if ("1".equals(accountType)) 
```

请尊重 Java 命名约定：变量以小写字母开头。

# java - 如何在 Eclipse 中安装 libvirt

> ID：14605770
> 
> 赞同：1
> 
> 时间：2013-01-30T13:57:31.717
> 
> 标签：java, eclipse, libvirt

如何在 Eclipse Juno Service Release 中安装 libvirt-java-0.4.9，我无法理解。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:21:16.863

Libvirt 是一个 Python 库，您需要从源代码或软件包安装它，然后在 /user/local/lib/python2.7/dist-package/libvirt 找到它，转到窗口 -> 首选项-> pydev ->interpreter-python librery 一个新文件夹并添加路径 libvirt 将在 Eclipse 中设置

# opengl - OpenGL 2+中顶点或片段着色器的代码限制大小是多少

> ID：14605775
> 
> 赞同：2
> 
> 时间：2013-01-30T13:57:57.940
> 
> 标签：opengl, shader

我计划编写一个程序，它将一些参数作为输入，并生成自己的片段着色器字符串，然后将其编译、链接并用作片段着色器（它只会在程序开始时完成一次）。我不是计算机图形方面的专家，所以我不知道这是否是标准做法，但我绝对认为它有可能用于一些有趣的应用程序 - 不一定是图形应用程序，但可能是计算应用程序。

我的问题是 OpenGL 中着色器的代码大小限制是多少，即 OpenGL 可以为图形处理器上的程序合理分配多少内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:08:19.607

没有代码大小限制。好的，有，但是：

1.  OpenGL 没有为您提供查询它的方法，因为：
2.  这样的数字毫无意义，因为它不会转化为您可以在 GLSL 中直接控制的任何内容。

一个长的 GLSL 着色器可能编译，而一个短的着色器不能。为什么？因为编译器可能已经能够优化长着色器的大小，而短着色器扩展到大量的操作码。简而言之，GLSL 级别太高，无法有效量化这些限制。

在任何情况下，鉴于 GL 2.x 级硬件的限制，除非您尝试这样做或正在进行 GPGPU 工作，否则您可能不会遇到任何长度限制。

# jquery - jQuery 验证器 addMethod 无法正常工作

> ID：14605776
> 
> 赞同：2
> 
> 时间：2013-01-30T13:58:02.047
> 
> 标签：jquery, jquery-validate

我正在使用带有 jQ​​uery 验证的新验证规则。它在某种程度上不适用吗？它包含在一个 javascript 文件中，该文件包含在`jquery.validate.js`. 我什么时候应该包含包含我的自定义规则的 js 文件以便应用它们？

当我输入`0.1`一个应该对此进行验证的输入时，什么都没有发生，`console.log`警报也没有命中。

```
$(document).ready(function(){
    jQuery.validator.addMethod('integer', function(value, element, param) {
        console.log(value); alert("hey");

        return (value != 0) && (value == parseInt(value, 10));
    }, 'Please enter a non zero integer value!');
}); 
```

HTML

```
<input class="required number integer valid" type="text" data-type="int" value="1" name="Default.MinArrivals" title=""> 
```

课程`required`和`number`工作完美，只是我的`integer`方法不能正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:36:18.320

它似乎对我有用：

[http://jsfiddle.net/2VJZT/](http://jsfiddle.net/2VJZT/)

*请显示您的其余代码。*

**jQuery** :

```
$(document).ready(function () {

    jQuery.validator.addMethod('integer', function (value, element, param) {
        return (value != 0) && (value == parseInt(value, 10));
    }, 'Please enter a non zero integer value!');

    $('#myform').validate({
        rules: {
            field1: {
                required: true,
                integer: true
            }
        }
    });

}); 
```

**HTML**：

```
<form id="myform">
    <input type="text" name="field1" />
    <input type="submit" />
</form> 
```

> **Quote** : 我什么时候应该包含包含我的自定义规则的 js 文件以便应用它们？

只要：

1）您的代码（或文件）*在*您正确包含`jQuery`和`jQuery Validate plugin`（按该顺序）之后出现。

和

2）您的代码都包含在一个`document.ready`函数中。

注意：只要遵循 1 和 2，彼此 的顺序`.validator.addMethod`和无关紧要。 [http://jsfiddle.net/jp93D/](http://jsfiddle.net/jp93D/)`.validate()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-05T01:33:01.747

我曾经遇到过这个问题，因为我使用的是 html id 而不是规则中的名称。

可能会帮助某人。

# javascript - Javascript 函数 - 适用于 IE，不适用于 chrome

> ID：14605777
> 
> 赞同：2
> 
> 时间：2013-01-30T13:58:05.863
> 
> 标签：javascript, html

作为序言，我们是一个小组织，这个系统是很久以前有人建立的。我是 javascript 的新手，所以我在做复杂的事情时遇到了麻烦，但我会尽力理解你的答案。但不幸的是，此时从头开始重做所有事情并不是一个真正的选择。

我们有一个收集数据的系统，客户使用登录来验证会员 ID，然后系统使用该系统将记录从 MS Access 数据库中提取到 .ASP/html 表单，以便客户可以更新他们的数据。其中一个页面具有在表单提交上运行的以下功能，以检查字段 a/b/c 中的数据总和是否与 d/e/f/g/h/i 相同。它对显示的每一列分别执行此操作（每一列是数据库中的一条记录，每个 a/b/c/d/e/f 是记录中的一个字段。）

问题在于函数的这一部分：

* * *

```
for (var j=0; j<recCnt; j++) {
   sumByType = milesSurf[j] + milesElev[j] + milesUnder[j];
   sumByTrack = milesSingle[j] + milesDouble[j] + milesTriple[j] + milesQuad[j] + milesPent[j] + milesSex[j]; 
```

等等

* * *

它应该使用 javascript FOR 循环遍历每条记录并测试它们是否总和相同。

在 Firefox 和 IE 中，这可以正常工作；这些字段正确地汇总为“sumByType”和“sumByTrack”。您可以在下面看到我添加了一个小警报以找出问题所在：

`alert(sumByType + " " + j + " " + recCnt + " " + milesSurf[j] + " " + milesElev[j] + " " + milesUnder[j]);`

在 Chrome 中，该警报告诉我“sumByType”和“sumByTrack”（各种“milesXXXXX”变量）的组件未定义。

**我的问题是：为什么在 Chrome 中它不能正常工作，而在 IE 和 FFox 中它是？有任何想法吗？**

完整功能代码如下：

* * *

```
function submitCheck(formy, recCnt) {
//2/10/03: added milesQuad
//---------------checks Q#4 that Line Mileage by type is the same as by track     
var milesElev = new Array(); 
var milesSurf = new Array();
var milesUnder = new Array(); 
var milesSingle = new Array();
var milesDouble = new Array(); 
var milesTriple = new Array();
var milesQuad = new Array();
var milesPent = new Array();
var milesSex = new Array();
var sumByType = 0;
var milesLineTrack = new Array();   //this is for Q5 to compare it to mileage by trackage
var j = 0; var sumByTrack = 0; var liney; var yrOp;
//var str = "document.frm.milesElev" + j;
//alert(str.value);
for (var i in document.frm) {
    if (i.substring(0, i.length - 1) == "milesElev") {
        milesElev[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }   
    if (i.substring(0, i.length - 1) == "milesSurf") {
        milesSurf[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesUnder") {
        milesUnder[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesSingle") {
        milesSingle[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesDouble") {
        milesDouble[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesTriple") {
        milesTriple[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesQuad") {
        milesQuad[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesPent") {
        milesPent[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length - 1) == "milesSex") {
        milesSex[parseInt(i.substring(i.length-1, i.length))] = parseFloat(document.frm[i].value); }
    if (i.substring(0, i.length -1) == "milesLineTrack") {
        milesLineTrack[parseInt(i.substring(i.length-1, i.length))] = document.frm[i].value; }  //12/13/02 used to be parseFloat(document.frm[i].value)
    if (i.substring(0,5)=="Lines") {
        liney = document.frm[i].value;
    if (parseInt(liney)<1 || isNaN(liney)) {
        alert("Each mode must have at least 1 line.  Please correct the value in question #2."); 
        document.frm[i].select(); return false; }}
    if (i.substring(0,8)=="yearOpen") { 
        yrOp = document.frm[i].value;
        if (parseInt(yrOp)<1825 || isNaN(yrOp)) {
            alert("Please enter a year after 1825 for question #3"); 
            document.frm[i].select(); return false; }
    }
}
for (var j=0; j<recCnt; j++) {
    sumByType = milesSurf[j] + milesElev[j] + milesUnder[j];
    sumByTrack = milesSingle[j] + milesDouble[j] + milesTriple[j] + milesQuad[j] + milesPent[j] + milesSex[j];

    //---------------to round sumByTrack and sumByType from a long decimal to a single decimal place, like frm 7.89999998 to 7.9.
    sumByTrack = sumByTrack * 10;
    if (sumByTrack != parseInt(sumByTrack)) {
        if (sumByTrack - parseInt(sumByTrack) >= .5) {
        //round up
            sumByTrack = parseInt(sumByTrack) + 1; }
        else {  //truncate
            sumByTrack = parseInt(sumByTrack); }}
    sumByTrack = sumByTrack / 10;
    sumByType = sumByType * 10;
    if (sumByType != parseInt(sumByType)) { 
        if (sumByType - parseInt(sumByType) >= .5) {
        //round up
            sumByType = parseInt(sumByType) + 1; }
        else {  //truncate
            sumByType = parseInt(sumByType); }}
    sumByType = sumByType / 10;
    //-------------end of rounding ---------------------------

    if (sumByType != sumByTrack) {
        if (isNaN(sumByType)) { 
            sumByType = "(sum of 4.a., b., and c.) "; }
        else {
            sumByType = "of " + sumByType; }
        if (isNaN(sumByTrack)) { 
            sumByTrack = "(sum of 4.d., e., f., g., h., and i.) "; }
        else {
            sumByTrack = "of " + sumByTrack; }
        alert("For #4, the 'End-to-End Mileage By Type' " + sumByType + " must equal the 'End-to-end Mileage By Trackage' " + sumByTrack + ".");
        alert(sumByType + " " + j + " " + recCnt + " " + milesSurf[j] + " " + milesElev[j] + " " + milesUnder[j]);
        return false;
    }
    //alert (milesLineTrack[j] + "  " + milesSingle[j] + "  " + 2*milesDouble[j] + "  " + 3*milesTriple[j] + "  " + 4*milesQuad[j] + "  " + 5*milesPent[j] + "  " + 6*milesSex[j]);
    var singDoubTrip = (milesSingle[j] + 2*milesDouble[j] + 3*milesTriple[j] + 4*milesQuad[j] + 5*milesPent[j] + 6*milesSex[j])
    //----------round singDoubTrip to one digit after the decimal point (like from 6.000000001 to 6.0)
    singDoubTrip = singDoubTrip * 10;
    if (singDoubTrip != parseInt(singDoubTrip)) { 
        if (singDoubTrip - parseInt(singDoubTrip) >= .5) {
        //round up
            singDoubTrip = parseInt(singDoubTrip) + 1; }
        else {  //truncate
            singDoubTrip = parseInt(singDoubTrip); }}
    singDoubTrip = singDoubTrip / 10;
    //----------end round singDoubTrip-----------------------------------------
    if (parseFloat(milesLineTrack[j]) != singDoubTrip) {
        //var mlt = milesLineTrack[j];
        //if isNaN(milesLineTrack[j]) { mlt = 
        alert("For column #" + (j+1) + ", the mainline passenger track mileage of " + milesLineTrack[j] + " must equal the single track plus 2 times the double track plus 3 times the triple track plus 4 times the quadruple track plus 5 times the quintuple track plus 6 times the sextuple track, which is " + singDoubTrip + ".");
        return false; 
    }
}
//---------------------end of checking Q#4----------------

//return false; 
```

}

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:09:06.280

我认为`for (var i in document.frm)`是问题所在。你不应该枚举一个`form`元素，会有很多意想不到的属性 - 请参阅[为什么将“for...in”与数组迭代一起使用是一个坏主意？](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)，对于类似数组的对象尤其如此。我不敢相信这在 FF 中可以正常工作:-)

用这个：

```
var ele = document.frm.elements; // or even better document.getElementById("frm")
for (var i=0; i<ele.length; i++) {
    // use ele[i] to access the element,
    // and ele[i].name instead of i where you need the name
} 
```

此外，您应该喜欢循环而不是那些大量的 if 语句。

# maven-3 - Maven：在发布时将 SNAPSHOT 更改为父/子模块的发布版本的最佳方法？

> ID：14605779
> 
> 赞同：12
> 
> 时间：2013-01-30T13:58:11.610
> 
> 标签：maven-3

在开发过程中，我们对 maven 模块使用 SNAPSHOT 版本（例如 1.0-SNAPSHOT）。

例如父模块的 Maven 配置：

```
<groupId>com.mycomp.basemodule</groupId>
<artifactId>base-module</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>base-module</name>
<modules>       
    <module>sub-module1</module>        
    <module>sub-module2</module>        
    <module>sub-module3</module>        
    <module>sub-module4</module>        

</modules> 
```

例如子模块的 Maven 配置：

子模块一：

```
<parent>
     <groupId>com.mycomp.basemodule</groupId>
      <artifactId>base-module</artifactId>
      <version>1.0-SNAPSHOT</version>
</parent>
<groupId>com.mycomp.sub-module1</groupId>
<artifactId>sub-module1</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>
<name>sub-module1</name> 
```

还要考虑其他子模块（2,3,4）的相同配置。

在发布项目/补丁时，我们需要将此 SNAPSHOT 版本更改为实际发布版本。

有一种粗略的方法可以更改版本。我可以访问父模块和所有子模块的每个 pom.xml，并且可以将 SNAPSHOT 版本更改为发布版本。

是否有任何其他最佳实践可以将此 SNAPSHOT 版本更改为公共位置的发布版本，以便我不需要更新所有 pom.xml 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T14:00:20.747

我相信，您应该使用`maven-release plugin`Maven 中的预期方式来解决问题。见：[http ://maven.apache.org/guides/mini/guide-releasing.html](http://maven.apache.org/guides/mini/guide-releasing.html)

正如文档所说：

> maven-release 插件的主要目的是提供一种标准机制来在直接开发团队之外发布项目工件。该插件提供了创建发布和相应地更新项目的 SCM 的基本功能。

**更新：** 似乎您不是第一个有问题的人，请参阅：[Maven 版本控制最佳实践](https://stackoverflow.com/questions/9554688/maven-versioning-best-practices) 答案似乎很完整。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-26T05:21:16.630

更简单的方法：使用[maven-version-plugin](http://mojo.codehaus.org/versions-maven-plugin/)更新版本，然后以自己的方式准备发布。

# android - 基于 Android GridView 适配器，支持子视图的拖放

> ID：14605781
> 
> 赞同：2
> 
> 时间：2013-01-30T13:58:17.940
> 
> 标签：android, eclipse, gridview, drag-and-drop

我想实现支持适配器并允许拖放（重新排序）项目的 GridView。重要的是它需要支持 Adapter，因为我在 Web 上看到了一些基于静态添加视图到 GridView 的实现。

# delphi - CreateTable 上的悖论错误

> ID：14605782
> 
> 赞同：1
> 
> 时间：2013-01-30T13:58:22.043
> 
> 标签：delphi, delphi-2007, bde

我在执行期间创建表，但是在创建表时，（请参阅我的代码）

```
过程 CreateTempTable(pDataBaseName,pSessionName:String);
开始
  //-------创建“临时表”
  TempTable:=TTable.Create(application);
  用 TempTable 做
  开始
    //--------在“活动”中设置为假
    主动：=假；
    //--------会话名称
    会话名称：= p会话名称；
    //-------数据库的名称。
    数据库名称：=pDataBaseName；
    过滤：=真；
    //-------表名
    表名 := 'TempTabl.DB';
    //-------悖论类型
    TableType := ttParadox;
    //-------如果表已经存在
    如果 TempTable.Exists 则
      //--------删除表
      临时表。删除表；
    //-------创建2个字段“Field1”和“Field2”
    用 FieldDefs 做
    开始
      清除;
      用 AddFieldDef 做
      开始
        数据类型：= ftFloat；
        名称 := 'Field1';
      结尾;
      用 AddFieldDef 做
      开始
        数据类型：= ftFloat；
        名称：='Field2';
      结尾;
    结尾;

    //-------创建表
    创建表；// 这里是异常爆发的地方
  结尾;
结尾;

```

引发异常，即：“表已打开，表不存在”。那么究竟是什么问题，它是开放的还是不存在的？

这是一个例外： ![在此处输入图像描述](../Images/d169107809abf4f5124e8f838b93ddad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:08:29.767

（内部`With TempTable Do`）无需删除`TempTabl.DB`显式。`CreateTable`无论如何都会被覆盖。

要测试该表是否未被 IDE 中的其他组件使用，您可以尝试删除该文件`TempTabl.DB`。

**CreateTempTable**现在是一个函数 CreateTempTable(pDataBaseName,pSessionName:String):Boolean;
所以你可以更好地处理错误。

用**delphi 5**和**RAD Studio 2007**测试。

```
function CreateTempTable(pDataBaseName,pSessionName:String):Boolean;
begin
result:=false;
// assume pDataBaseName=directory, or change it 
if FileExists(pDataBaseName+'TempTabl.DB') then begin
   if NOT DeleteFile(pDataBaseName+'TempTabl.DB') then begin
      showMessage('Table opened by another part of the IDE');
      exit;
   end;
end;

TempTable:=TTable.Create(application);
With TempTable Do
begin
Active := False;
SessionName:=pSessionName;
DatabaseName :=pDataBaseName;
//Filtered := True;
TableName := 'TempTabl.DB';
TableType := ttParadox;
with FieldDefs do
begin
  Clear;
  with AddFieldDef do
  begin
    DataType := ftFloat;
    Name := 'Field1';
  end;
  with AddFieldDef do
  begin
    DataType := ftFloat;
    Name:='Field2';
  end;
end;
CreateTable;
result:=true;
end;
end; 
```

# javascript - 从 jquery 数据表中获取特定的行数据

> ID：14605785
> 
> 赞同：2
> 
> 时间：2013-01-30T13:58:31.063
> 
> 标签：javascript, jquery, jquery-data

我想从 jQuery 数据表中获取特定的行数据。任何人都可以帮我获取第一列 id 的记录吗？

```
function showchnldetail(val) {
    var oTable = $('#example').dataTable();
    var aData = oTable.fnGetData(val);
    if (null != aData) {
        alert('enter');
    }               
} 
```

`val`是第一列 id。我想将数据存储在变量中。

```
var aDataSet = [ ['96', 'xx', 'product1', '144']]; 
```

我将上述数据集分配给`otable`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:18:17.757

```
var nodes = datatable.fnGetNodes();
var row = null;

jQuery.each(nodes, function(key, fila){
    if(jQuery(fila).attr('id') == idrow){
        row = fila;
    }
});       

var pos = datatable.fnGetPosition(row);
      datatable.fnUpdate('new value', pos, 1); 
```

# jquery - jQuery 选择动态生成的选项卡

> ID：14605788
> 
> 赞同：1
> 
> 时间：2013-01-30T13:58:56.797
> 
> 标签：jquery, asp.net-mvc, selector

我正在使用 Bootstrap 并具有动态创建的选项卡。虽然它们是动态的，但我只会创建 3 个选项卡。它们是：草稿、已发布和已存档。这些实际上是枚举。

当我单击选项卡时，我想将隐藏字段更改为选项卡的相同值，以便在发生回发时，我希望打开先前打开的选定项。

标签 id 是 #i ，其中 i 是 for 循环中的迭代器。所以选项卡将是：#0、#1 和#2。

有谁知道我如何为所有选项卡创建一个 onclick 事件并将隐藏字段的值更改为选项卡 ID 的值。

这是代码：

```
<div class="tab-content">
    @for (int i = 0; i < Model.WorkflowStatuses.Count; i++)
    {
        <div class="tab-pane @(i == 0 ? "active" : string.Empty)" id="@i"> 
```

**编辑** 这是我到目前为止所拥有的-隐藏字段的值没有改变：

```
<script>
$('#listingTab a[data-toggle="tab"]').on('show', function (e) {
    $('#selectedTab').val($(e.target).prop('id'));
}) 
```

```
@Html.HiddenFor(m=>Model.SelectedTab)

@if (Model.AnyListings)
{
<ul class="nav nav-tabs" id="listingTab">
    @for (int i = 0; i < Model.WorkflowStatuses.Count; i++) 
```

**编辑** 我添加了字母“t”，但隐藏的值仍然没有改变：

```
<script>
    $('#tab-content a[data-toggle="tab"]').on('show', function (e) {
        $('#SelectedTab').val($(e.target).prop('id'));
    })
</script>

@Html.HiddenFor(m=>Model.SelectedTab)

@if (Model.AnyListings)
{
    <ul class="nav nav-tabs" id="listingTab">
        @for (int i = 0; i < Model.WorkflowStatuses.Count; i++)
        {
            <li class="@(i == 0 ? "active" : string.Empty)"><a href="@string.Format("#t{0}", i)" data-toggle="tab">@Model.WorkflowStatuses[i].ToString()</a></li>
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:05:15.240

你不能给你的标签一个类，然后像这样绑定到它们：

```
$(".tabs").on('click', function() {
 $('#my_input').val($(this).attr('id'));
}); 
```

此外，您需要以字母开头的标签 ID 标签。例如#t1、#t2 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:06:42.527

对现在和将来匹配当前选择器的所有元素使用 Live 事件处理程序。

为所有生成的选项卡提供一个通用类，以便实时事件绑定器也绑定到所有新创建的选项卡

```
$("a.offsite").live("click", function(){
    alert("Hi!");
    //Your code
}); 
```

参考[http://api.jquery.com/live/](http://api.jquery.com/live/)

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:09:18.450

尝试使用在活动选项卡更改时触发的`show` [事件：](http://twitter.github.com/bootstrap/javascript.html#tabs)

```
$('#yourTabControl a[data-toggle="tab"]').on('show', function (e) {
  $('#hiddenField').val($(e.target).prop('id'));
}) 
```

**[编辑]：**

聊天后，我们得出结论，这`e.target`是您单击的链接，而不是它激活的选项卡。因此，为了使代码更容易一点，我建议`data-tabid`在链接上使用一个属性：

```
<li class="@(i == 0 ? "active" : string.Empty)">
  <a href="@string.Format("#t{0}", i)" data-toggle="tab" 
     data-tabid="@i">@Model.WorkflowStatuses[i].ToString()</a></li> 
```

并在事件处理程序中使用它：

```
$('#yourTabControl a[data-toggle="tab"]').on('show', function (e) {
  $('#hiddenField').val($(e.target).data('tabid'));
}) 
```

# android - 将片段带到前面

> ID：14605796
> 
> 赞同：0
> 
> 时间：2013-01-30T13:59:31.230
> 
> 标签：android, android-layout, android-fragments

我有 3 个片段，我想把它作为一本书展示。用户将从列表视图中选择一个章节，一个新的活动将启动当前片段，上一个和下一个。此代码将创建三个片段。现在，问题是当前片段是第一个，我想把它放在下一个和上一个之间，并在活动开始时将它放在前面。

```
@Override
public Fragment getItem(int position) {
    Fragment fragment = new CurrentSectionFragment();
    Bundle args = new Bundle();

    switch(position) {
        case 0: {
            fragment = new rewaya.books.gaddhayatek.fragment.PreviousSectionFragment();
            args.putInt(PreviousSectionFragment.ARG_SECTION_NUMBER, position);
            args.putString(PreviousSectionFragment.PreviousParagraph, PreviousParagraph);           
            fragment.setArguments(args);
            return fragment;
        }
        case 1: {
            fragment = new rewaya.books.gaddhayatek.fragment.CurrentSectionFragment();
            args.putInt(CurrentSectionFragment.ARG_SECTION_NUMBER, position);
            args.putString(CurrentSectionFragment.Paragraph, Paragraph);            
            fragment.setArguments(args);
            return fragment;
        }
        case 2: {
            fragment = new rewaya.books.gaddhayatek.fragment.NextSectionFragment();
            args.putInt(NextSectionFragment.ARG_SECTION_NUMBER, position);
            args.putString(NextSectionFragment.NextParagraph, NextParagraph);           
            fragment.setArguments(args);
            return fragment;
        }
    }
    return fragment;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:48:00.603

我建议为此查看 ViewPager 类。它在片段之间切换。

# sharepoint - 在 sharepoint 2010 中隐藏功能区的特定部分

> ID：14605801
> 
> 赞同：0
> 
> 时间：2013-01-30T13:59:47.970
> 
> 标签：sharepoint, sharepoint-2010

是否可以隐藏功能区的特定部分？

我的要求：

`1\. Hide s4-ribbonrow but login control should be visible, remaining stuff should be invisible`

`2\. Hide s4-titlerow but search and navigation should be visible`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:25:28.793

如果您允许网站上的匿名访问。只有登录的用户才能完成功能区。

所有其他匿名用户将看到仅带有“登录”链接的功能区条，该链接将提供登录的可能性。

您使用什么 SharePoint？服务器还是基金会？

如果服务器可以自定义母版页添加

```
 <asp:LoginView ID="LoginView1" runat="server">
     <anonymoustemplate>
         <style type="text/css">
             #s4-ribbonrow { display: none; }
         </style>
     </anonymoustemplate>
   </asp:LoginView> 
```

给它。这将对匿名用户完全隐藏功能区。

所有其他用户都必须调用其中一个管理页面才能登录...

希望能帮助到你，

安德鲁

# java - apache-commons colectionutils 源代码

> ID：14605802
> 
> 赞同：0
> 
> 时间：2013-01-30T13:59:51.243
> 
> 标签：java, generics, apache-commons, apache-commons-collection

以下代码片段取自 Commons 框架的 CollectionUtils.java 文件：

```
private static class CardinalityHelper<O> {
    final Map<O, Integer> cardinalityA, cardinalityB;

    public CardinalityHelper(final Iterable<? extends O> a,
            final Iterable<? extends O> b) {
        cardinalityA = CollectionUtils.<O> getCardinalityMap(a);
        cardinalityB = CollectionUtils.<O> getCardinalityMap(b);
    }

    public final int max(final Object obj) {
        return Math.max(freqA(obj), freqB(obj));
    }

    public final int min(final Object obj) {
        return Math.min(freqA(obj), freqB(obj));
    }

    public int freqA(final Object obj) {
        return getFreq(obj, cardinalityA);
    }

    public int freqB(final Object obj) {
        return getFreq(obj, cardinalityB);
    }

    private final int getFreq(final Object obj,
            final Map<?, Integer> freqMap) {
        final Integer count = freqMap.get(obj);
        if (count != null) {
            return count.intValue();
        }
        return 0;
    }
} 
```

getCardinalityMap 返回`<O> Map<O, Integer>` 有人可以帮我理解吗

1.  是什么`cardinalityA = CollectionUtils.<O> getCardinalityMap(a);`意思？这是某种类型转换吗？
2.  返回类型是什么`<O> Map<O, Integer>`意思？
3.  这个技巧叫什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:06:30.797

> 1) cardinalityA = CollectionUtils. getCardinalityMap(a); 方法？这是某种类型转换吗？

它不是类型转换。它是为泛型方法显式设置泛型参数。`<O>`从声明中可以看出，CardinalityHelper 具有通用参数：

```
private static class CardinalityHelper<O> { 
```

CardinalityHelper 的客户端使用此类是类型安全的方式。

> 2）返回类型是什么`<O> Map<O, Integer>`意思？

*- 通用参数声明。 *映射*- 返回类型。*

 *> 3）这个技巧叫什么？

它使用[Java 通用方法](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)。

您还可以在标准 JDK 库中找到类似的用法。例如：[java.util.Collections.sort(java.util.List)](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.sort%28java.util.List%29)

[元编程](http://en.wikipedia.org/wiki/Metaprogramming)原则的Java 实现非常有限，因此您只能使用泛型类型参数来创建类型安全的容器，这是 Java 的强类型特性所要求的。*

# testing - 从 IntelliJ IDEA 运行验收测试时自动启动 jetty

> ID：14605804
> 
> 赞同：2
> 
> 时间：2013-01-30T13:59:55.663
> 
> 标签：testing, automation, intellij-idea, jetty

我有一堆需要运行应用程序的验收测试。当我从命令行进行测试时，一切正常（感谢一些 gradle 魔法），但我希望能够从 IntelliJ IDEA 运行这些测试，而不必担心启动 Jetty。

有什么聪明的方法可以实现自动化吗？我什至不知道从哪里开始。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:22:39.393

出于测试目的，使用嵌入式码头通常是一个好主意。这样，您可以完全自动化码头的启动/停止，它将完全独立于构建工具/ide 工作。

这真的很简单。只需几行代码，您就可以配置并运行一个功能齐全的码头以进行测试。

这是码头最受欢迎的功能之一。看看这个： http: [//www.eclipse.org/jetty/documentation/current/advanced-embedding.html](http://www.eclipse.org/jetty/documentation/current/advanced-embedding.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:15:46.687

您可以使用 Maven/Ant 和其他 Run 配置，但目前不能使用 Gradle，至少在[实现此功能请求](http://youtrack.jetbrains.com/issue/IDEA-86816)之前。

# javascript - 生成唯一的随机数javascript

> ID：14605805
> 
> 赞同：0
> 
> 时间：2013-01-30T13:59:57.533
> 
> 标签：javascript

我正在尝试获取随机唯一编号并将其分配给变量。例如：

```
var nums=[0,1,2,3,4,5,6,7]; 
```

然后我有 8 个变量，我想在每次刷新页面时取其中一个数字，而且也是唯一的。我不是很擅长 Javascript，所以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:06:58.080

如果数字只需要在客户端是唯一的，这是可能的。您可以根据当前时间创建一个数字，例如：

```
var id = new Date().getTime(); 
```

但是，如果这个唯一 ID 需要对每个客户端都是唯一的，就像您的 OP 状态中的注释一样，您将需要一个服务器端的解决方案：

```
var id = "<?php echo uniqid() ?>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:34:12.210

首先，要从数组中获取随机值，您可以这样做：

```
var nums = [0,1,2,3,4,5,6,7];
var num = Math.floor(Math.random() * nums.length);

alert(num); 
```

如果您需要它是唯一的，那么这取决于唯一应该意味着什么。如果您的意思是对于一个用户，在他们都用尽之前永远不要重复一个数字，那么您可以使用 cookie 来跟踪已显示的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T04:05:38.980

```
var n = 4, uniqueRandoms = [];
function makeUniqueRandom() {
    if (!uniqueRandoms.length) {
        for (var i = 1; i < n; i++) {
            uniqueRandoms.push(i); // generates [1,2,3,4]
        }
    }
    var index = Math.floor(Math.random() * uniqueRandoms.length),
        val = uniqueRandoms[index];
    uniqueRandoms.splice(index, 1);
    return val;
}

makeUniqueRandom(4); // use 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:37:02.320

```
 function randomVarGenerator()
    {
    var s4=function()
    {
       return Math.floor(Math.random(0,9)*10).toString();

    };
    return (S4() + S4() + S4() + S4()  + S4() + S4()+ S4() + S4());
    }
randomVarGenerator(); 
```

如果它生成 uniqueString

```
 function randomVarGenerator()
    {
    var s4=function()
    {
       return Math.floor(Math.random() * 0x10000 /* 65536 */).toString(16);

    };
    return (S4() + S4() + S4() + S4()  + S4() + S4()+ S4() + S4());
    } 
```

随机变量生成器（）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-20T11:33:06.060

我想这会对你有所帮助。* 首先你应该创建一个包含数字的数组。* 然后你应该创建另一个数组 * 然后从这个数组中随机选择一个数字并将其放置到另一个 * 之后从数字数组中删除选择的元素。

```
function rand(n){

var numArr = new Array("0","1","2","3","4","5","6","7","8","9","10");

var pickArr = new Array(); 

var length=16;

for(var i=0;i<n;i++){
        var num=numArr[Math.floor((Math.random()*length))];
        pickArr[pickArr.length]=num
        length--;
        numArr.splice(findRank(numArr,num), 1);

    }

    return pickArr;
}

function findRank(seq,n){
    var cnt=0;
    var flag=true;
    for(var i=0;i<seq.length&&flag;i++){
        if(seq[i]==n)flag=false;
        else cnt++;
    }

    return cnt;
} 
```

# assembly - cpuid 函数 0Bh，intel，总是空寄存器

> ID：14605806
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:00:02.683
> 
> 标签：assembly, x86, cpuid

在 Linux（作为 root）和 Windows（XP，作为管理员）上，在使用 eax = 0xB 调用 cpuid 后，我总是得到一个空寄存器集。根据官方手册，[http://www.intel.com/content/www/us/en/processors/processor-identification-cpuid-instruction-note.html](http://www.intel.com/content/www/us/en/processors/processor-identification-cpuid-instruction-note.html)我写了以下代码：

```
mov eax,0xb
xor ecx,ecx
cpuid
; EAX = EBX = ECX = EDX = 0 
```

在此之前，我已经根据“cpuid”指令成功编写了 AMD cpuinfo，但是 intel 的 0xb 函数不起作用。尝试了两台可用的英特尔计算机，但没有运气。我在这里想念什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T20:35:17.120

首先检查功能可用性，请参阅手册，5.1.2，功能 01。

但是，这并不能回答我的意图是枚举实际 CPU 内核的问题。如果有人不懒惰，请在评论中分享您对此主题的发现，谢谢。

# c# - Silverlight 或 Windows Phone 中的拆分文本框

> ID：14605807
> 
> 赞同：0
> 
> 时间：2013-01-30T14:00:04.020
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-phone-8

我需要在 Silverlight 或 Windows Phone 平台中自定义的 Texbox，如下所示。这将根据已应用于控件的掩码进行拆分。我正在查看互联网并没有找到任何东西。

![](../Images/03fb06e45a0a61a1fbf0bb9d147fe453.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:42:20.400

我想如果不创建自定义控件，您将无法逃脱。如果您说拆分应该基于某个掩码，那么，我想，里面可能有任意数量的文本框，即从 1 到无限制（理论上）。然后您可能需要考虑根据用户输入在字段之间移动输入焦点。基于这一切，自定义控件就是你所需要的。如果你之前没有在 WP 或 Silverlight 中使用自定义控件的经验，我建议你看看[这里](http://www.windowsphonegeek.com/articles/Creating-a-WP7-Custom-Control-in-7-Steps)。

# c# - 为什么 Cast() 不调用构造函数？

> ID：14605809
> 
> 赞同：1
> 
> 时间：2013-01-30T14:00:20.233
> 
> 标签：c#, xml, linq, list, casting

如果我做：

```
IList<WSACLI_ComunicazionePersonale> Comunicazioni = (from XmlNode n in m_oNode.SelectNodes("m_Detail_Row")
                     select new WSACLI_ComunicazionePersonale(n)).ToList(); 
```

它工作完美，建立我的`WSACLI_ComunicazionePersonale`对象列表！

但是，如果我这样做：

```
IList<WSACLI_ComunicazionePersonale> Comunicazioni = m_oNode.SelectNodes("m_Detail_Row").Cast<WSACLI_ComunicazionePersonale>().ToList(); 
```

清单是`null`。似乎`Cast()`没有调用构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:03:33.223

因为强制转换不会创建新对象 - 它只是“重新键入” ^*现有对象，因此您可以以不同的方式使用它。不涉及任何建设。

您可以将 a`Cat`视为泛型`Animal`，但它不会创建“新” `Cat`。另外，它仍然是一个`Cat`- 你只是在与它*交互*，就像它是一个通用的`Animal`.

反过来*也可能*是正确的——如果有人给你一个`Animal`你可以与之互动的东西。您可以*尝试*将其视为 a 进行交互`Cat`，但如果它*真的*是 a `Dog`，则您不能（合法地）将其视为 a `Cat`。

^(* 重新输入我的意思是改变你认为对象的类型——对象的基础类型不会改变。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:05:16.377

您不创建新对象：**实例**保持不变。仅修改引用您的实例的变量的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:08:26.500

[`Object`](http://msdn.microsoft.com/en-us/library/e5kfa45b.aspx)构造函数仅在使用 .Net 语言创建新实例时调用，而`Casting (Type Casting)`将对象的现有类型更改为不同类型的方法

类型转换（在维基百科上）

> 在计算机科学中，类型转换、类型转换和强制转换是隐式或显式地将一种数据类型的实体更改为另一种数据类型的不同方式。这样做是为了利用类型层次结构或类型表示的某些特性。一个例子是小整数，它可以以紧凑的格式存储，并在用于算术计算时转换为更大的表示形式。在面向对象编程中，类型转换允许程序将一种类型的对象视为其祖先类型之一，以简化与它们的交互。

```
Animal animal = new Cat();

Bulldog b = (Bulldog) animal;   // if (animal is Bulldog), stat.type(animal) is Bulldog, else an exception
b = animal as Bulldog;          // if (animal is Bulldog), b = (Bulldog) animal, else b = null

animal = null;
b = animal as Bulldog;          // b == null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:06:04.670

如果您想要与第一段相同的功能，您的第二段代码应该是这样的：

```
IList<WSACLI_ComunicazionePersonale> Comunicazioni = m_oNode
    .SelectNodes("m_Detail_Row")
    .Select(n=> new WSACLI_ComunicazionePersonale(n))
    .ToList(); 
```

没有强制转换，因为您无法将节点强制转换为您的对象。在您的第一个示例中，您创建了一个新实例并将节点传递给构造函数。

# java - 使用 JavaMail 发送邮件

> ID：14605812
> 
> 赞同：0
> 
> 时间：2013-01-30T14:00:27.143
> 
> 标签：java, jakarta-mail

我在使用 Java 发送电子邮件时遇到了下一个问题，我不知道为什么。做一个调试我得到了这个，我不知道为什么。跟踪错误的痕迹是这样的：

```
DEBUG: JavaMail version 1.4.5
DEBUG: successfully loaded resource: /META-INF/javamail.default.providers
DEBUG: Tables of loaded providers
DEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPSSLTransport=javax
.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsyste
ms, Inc], com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com
.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], com.sun.mail.imap.IMAPSSLSt
ore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsyst
ems, Inc], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.su
n.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], com.sun.mail.imap.IMAPStore=jav
ax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc],
com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP
3Store,Sun Microsystems, Inc]}
DEBUG: Providers Listed By Protocol: {imaps=javax.mail.Provider[STORE,imaps,com.
sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], imap=javax.mail.Provider[STOR
E,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], smtps=javax.mail.Prov
ider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc],
pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems
, Inc], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun
Microsystems, Inc], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.S
MTPTransport,Sun Microsystems, Inc]}
DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map

DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.s
mtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.businesscloud.es", port 465, isSSL f
alse 
```

执行此操作的代码就是这样，只是我执行此操作的一个简单函数：

```
String[] lista_envio = enviar_a.split(";");

        String smtpHost = "smtp.businesscloud.es";
        Properties props = System.getProperties();
        props.put("mail.smtp.host",smtpHost);
        props.put("mail.smtp.port", 465);  
        props.put("mail.smtp.user", "");
        props.put("mail.smtp.password","");
        props.put("mail.debug", "true");
        Session sesion = Session.getDefaultInstance(props,null);

        Message correo = new MimeMessage(sesion);

        correo.setSubject(asunto.trim().toUpperCase());

        correo.setFrom(new InternetAddress(enviado_por));

        for (int i = 0; i < lista_envio.length; i++)
        {
           System.out.println("Dentro del for de enviar_correos");
            correo.addRecipient(Message.RecipientType.TO, new InternetAddress(lista_envio[i]));
        }

        correo.setText(cuerpo);
        correo.addHeader("X-Priority", "3");

        System.out.println("Voy a mandar el mail");
        Transport.send(correo); 
```

发送后我遇到的异常是：未知的 SMTP 主机：smtp.businesscloud.es，这很奇怪。

我做错了什么？非常感谢

# sql - 表中的隐式 ORDER BY 顺序

> ID：14605813
> 
> 赞同：2
> 
> 时间：2013-01-30T14:00:36.707
> 
> 标签：sql, sql-server-2008, sql-order-by

我有一个带有时间戳列和其他一些字符列的表。我已按时间戳对表中的信息进行排序，但由于同一时间戳上有更多记录，我不知道显示的顺序是否是它们插入表中的顺序。

遗憾的是，桌子上没有索引，所以除了时间戳之外，我没有其他任何东西可以用来订购它们。

例子：

```
 Timestamp            |    Foregin table    |    Foreign table value

2012-10-09 19:29:50.000    |       tableA        |   "random string here"
2012-10-09 19:29:50.000    |       tableA        |   "different string here"
2012-10-09 19:29:50.000    |       tableB        |   "another random string here"
2012-10-09 19:29:50.000    |       tableC        |   "string here"
2012-10-09 19:29:50.000    |       tableD        |   "another string here" 
```

我运行的查询是这样的：

```
SELECT *
FROM TABLE
WHERE Timestamp BETWEEN 'x' and 'y'
ORDER BY Timestamp 
```

查看我的结果，我假设，但我不确定，查询返回按指定列排序的数据，并继续按下一列/列对结果进行排序，以防有超过 1 列，以升序方式（可能按文本长度或按字母顺序排列）。

您能否帮我澄清一下这种情况，因为找出订单对我来说非常重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T14:17:02.333

对于未指定`ORDER BY`. 所以 a`SELECT * FROM Tbl`基本上可以以任何随机顺序返回行。由于数据在磁盘上的存储方式，如果您有一个空缓存并且服务器上没有其他活动，您将以相当高的概率按磁盘顺序获取数据。如果您的服务器上有其他并发查询并且缓存不为空，则该概率会大大降低。因此，虽然您可能会在测试中观察到特定行为，但在生产中不会得到相同的行为。

也就是说，如果您需要以特定顺序返回行，则需要指定适当的`ORDER BY`子句。在上述情况下，您可以使用`ORDER BY [Timestamp], [Foreign table], [Foreign table value]`确保记录始终以相同的顺序返回。如果您的查询包含更多列并且它们都不是唯一的，则您也需要将所有这些添加到`ORDER BY`。但请记住，涉及的列越多，排序就越昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:17:05.973

SQL Server 将使用显式`ORDER BY`子句对结果进行排序，并且不保证`ORDER BY`子句中所有列都相等的结果顺序。

如果您希望它按字母顺序按您的 char 列之一排序，则需要在您的`ORDER BY`子句中指定它。您当前的结果集可能是以这种方式排序的，但这种情况不太可能无限期地继续下去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:56:58.013

数据库中的表本质上是无序的。这个答案是对塞巴斯蒂安的回答的澄清（澄清太长，无法发表评论）。

退货顺序*不是*随机的。这是任意的。而且，它可以从调用变为调用。在具有删除和插入的表上，以后的记录可以散布在具有较早记录的数据页上。再一次，在数据表中没有排序的概念。排序只是查询语句的一部分。

与系统上运行的其他查询相比，一个更大的因素是多线程（以及较少存在的多个分区）。

如果你有一个空缓存、一个不通过索引访问表的查询、表中没有删除、一个分区和一个单线程系统，那么数据通常会按插入顺序返回。但是，即使在这种情况下，也不能保证。如果您希望数据按特定顺序排列，请使用`order by`. 如果您不希望性能受到影响，请包含一个身份主键并将其用于排序。

# powershell - 如何在 PowerShell 中执行 MSBuild 的 GetDirectoryNameOfFileAbove？

> ID：14605814
> 
> 赞同：0
> 
> 时间：2013-01-30T14:00:39.293
> 
> 标签：powershell, msbuild

在 MSBuild 中，有`GetDirectoryNameOfFileAbove`属性函数。

如何使用 PowerShell 实现相同的目标？

最好有紧凑的语法，因为这是您必须粘贴到每个入口点脚本中才能找到其包含的内容。

* * *

这个问题的想法：

*   源代码控制中有一个很大的解决方案。它的一些部分是相对自主的。
*   它在根目录下的一个已知文件夹中有一个用于共享脚本和可重用功能的位置。
*   项目中散布着许多入口点脚本（您显式执行的文件），所有这些都包括共享脚本。
*   从入口点脚本中找到共享脚本的便捷方法是什么？

相对路径效果不好，因为它们看起来`"../../../../../../scripts/smth"`很难编写和维护。

注册模块不是一个好的选择，因为 (a) 您是从 SCC 获得的，而不是通过安装 (b) 您通常同时在不同的磁盘位置有不同的版本，并且 (c) 这是对从技术上讲，只有本地信息就足够了。

* * *

执行此操作的 MSBuild 方法（从 v4 开始）如下：删除一个标记文件（例如，root.here 或其他），使用`GetDirectoryNameOfFileAbove`, 等获取该文件夹的绝对路径！你得到了本地根目录来构建路径。

也许这不是使用 powershell 的正确方法，所以我也会很感激这样的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:37:54.280

您可以访问当前文件夹： $invoker= Split-Path -Parent $MyInvocation.MyCommand.Path

所以那个的父是： $parent=Split-Path -Parent $MyInvocation.MyCommand.Path|Split-Path -Parent

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:41:08.593

一个快速而肮脏的解决方案如下所示：

```
function GetDirectoryNameOfFileAbove($markerfile)
{
    $result = ""
    $path = $MyInvocation.ScriptName
    while(($path -ne "") -and ($path -ne $null) -and ($result -eq "")) 
    { 
        if(Test-Path $(Join-Path $path $markerfile)) {$result=$path}
        $path = Split-Path $path 
    }
    if($result -eq "") {throw "Could not find marker file $markerfile in parent folders."}
    return $result
} 
```

它可以被压缩成一行以植入脚本，但它仍然太 C#-ish，我认为它可能会被一些 PS 管道/LINQ 风格的魔法缩短。

UPD：编辑脚本，发现`$MyInvocation.MyCommand.Path`从cmdline用dotsourcing（任何上下文级别）调用脚本时经常为NULL，所以当前假设是`ScriptName`.

# unit-testing - 在 nServicebus 中测试消息头

> ID：14605818
> 
> 赞同：2
> 
> 时间：2013-01-30T14:00:51.397
> 
> 标签：unit-testing, nservicebus

我正在努力让消息头从我在 nServiceBus (v3.3.0.0) 中的单元测试中工作。使用 SetIncomingHeader(...) 在测试中设置标头，但是当我在消息处理程序中调用 GetHeader(...) 时，我得到了字符串：

> 没有定义标题获取标题操作，请使用 ExtensionMethods.GetHeaderAction = ...

标头在测试框架之外工作正常。

FullDuplex 示例应用程序基本上显示了我正在使用的代码并且遇到了同样的问题。有谁知道我如何设置 GetHeaderAction 方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T17:21:08.473

正如在[为什么 NServiceBus OutgoingHeaders 是静态的而不是 ThreadStatic 中提到的那样？](https://stackoverflow.com/questions/18411371/why-nservicebus-outgoingheaders-is-static-and-not-threadstatic)，您可以定义自己的 GetHeaderAction，在对项目进行单元测试时调用它，而 NSB 显然没有运行。

```
ExtensionMethods.GetHeaderAction =
    ((msg, key) => this.Manager.GetHeader(msg, key)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T18:16:24.987

正如约翰所提到的，这是固定在

*   [https://github.com/NServiceBus/NServiceBus/issues/933](https://github.com/NServiceBus/NServiceBus/issues/933)

此外，请确保您使用的是此处记录的 NServiceBus.Testing 框架：

*   [http://docs.particular.net/nservicebus/testing/](http://docs.particular.net/nservicebus/testing/)

例子：

```
[TestFixture]
public class Tests
{
    [Test]
    public void Run()
    {
        Test.Initialize();

        Test.Handler<MyMessageHandler>()
            .SetIncomingHeader("Test", "abc")
            .ExpectReply<ResponseMessage>(m => Test.Bus.GetMessageHeader(m, "MyHeaderKey") == "myHeaderValue")
            .OnMessage<RequestMessage>(m => m.String = "hello");
    }
}

class MyMessageHandler : IHandleMessages<RequestMessage>
{
    public IBus Bus { get; set; }

    public void Handle(RequestMessage message)
    {
        ResponseMessage responseMessage = new ResponseMessage();
        Bus.SetMessageHeader(responseMessage, "MyHeaderKey", "myHeaderValue");
        Bus.Reply(responseMessage);
    }
} 
```

请注意，这是针对 NServiceBus v4/v5 的。对于其他版本，请访问文档。

# css - 页面元素在窗口调整大小上移动

> ID：14605819
> 
> 赞同：1
> 
> 时间：2013-01-30T14:00:55.240
> 
> 标签：css

作为 CSS 新手，我在 stackoverflow 上查看过有关此问题的类似帖子，但似乎没有一个解决方案对我的网站有帮助。

我正在使用该站点的模板并尝试编辑 CSS 以使页面保持一个宽度，并且在调整窗口大小时不会移动它的元素。

可以在此处找到示例页面：（已删除客户端链接）

内容包含在当前设置为相对位置的包装器中：

```
#page_wrapper 
{
    position: relative;
} 
```

我试图将其更改为：

```
#page_wrapper 
{
min-width: 960px;
} 
```

不过，这似乎并没有奏效。当我调整窗口大小时，一切仍然发生变化。有什么想法我还需要改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:12:38.823

您的网站正在使用 Twitter Bootstrap：twitter.github.com/bootstrap/

做你想做的事并不是一个完全简单的过程，但一个起点是这个页面：

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

在那里您可以取消选中“响应式”复选框并将网格系统元素更改为您想要的任何内容。然而，最好让它们保持原样。

然后下载 css 文件并替换您网站上的文件，看看是否有帮助（确保先备份当前文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:15:06.827

这里发生了一些事情：

1.  **导航`float: right`在某处。**这意味着当它的宽度加上它旁边的任何东西的宽度比它的容器宽时，它会发生变化以适应它。
2.  **您的最小宽度太窄**如果您的最小宽度为 960 像素，但导航的宽度加上徽标的宽度（并排放置的两个元素），加上任何边距、填充和边框，加起来超过 960 像素，那么它就不会排队。您需要调整最小宽度，或调整元素的计算宽度以适应该 960 像素的最小值。这可以通过缩小边距/填充、减小文本大小、设置显式宽度或它们的任何组合来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T07:09:09.353

您的元素可能正在四处移动，因为您将它们放在同一个

标签，所以如果你想让你的元素保持它们的位置，你需要使用不同的

对于每个元素，并将它们与您的偏好对齐，可能在 css 或标签内（这取决于您）。否则，如果您遵循相同的过程，则在 div 标签中

对于每个元素，您应该没有任何问题。这也适用于句子......你需要让句子中的每个单词都在个人之间

# sql - 如何将此 SQL 查询重写为分层查询

> ID：14605820
> 
> 赞同：0
> 
> 时间：2013-01-30T14:00:56.843
> 
> 标签：sql, oracle, oracle11g

我有这个计算总重量的 SQL 查询：

```
select c.componentid, nvl(cs.weightkg, 0) as componentkg,
 (case 
    when exists (select 1 from component where fkcomponentid = c.componentid) then
      (select sum(nvl(cs.weightkg, 0)) as kg FROM  component a, componentstats cs  where a.fkcomponentid is not null and cs.componentstatsid = a.componentstatsid and a.fkcomponentid = c.componentid)
 end) as childrenkg
 from component c, componentstats cs  
 where 
 cs.componentstatsid = c.componentstatsid
 and componentid = ?
 order by c.componentid; 
```

我如何将其重写为分层查询？这可能吗？

编辑：该计划的图片

![在此处输入图像描述](../Images/c834577dfcf6390ee98d2acef448b3c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:10:05.870

基本查询将是这样的：

```
select the_level, c.componentid, NVL( cs.weightkg,0) as componentkg
  from ( select level the_level, componentid from component
           start with componentid = ?
           connect by fkcomponentid = prior componentid
       ) c
  join componentstats using (componentstatsid)
order by the_level, c.componentid 
```

这将为您提供每个单独的组件及其重量。然后，您可以以各种方式进行分组和求和 - 如果您想要原始查询中的子组件权重的总和，则可以按级别进行分组，或者如果您只想要总权重，则可以按所有方式进行分组和求和。

# css - 我可以使用右对齐将图像设置到右侧，但不能使用浮动？

> ID：14605821
> 
> 赞同：0
> 
> 时间：2013-01-30T14:01:04.117
> 
> 标签：css

```
#sponsors { 
  float: right; 
  display: inline; 
  width: 728px; 
  height: 100px; 
  margin: 60px 11px 0;
}

<div id="sponsors">
   <a href="#"><img src="images/sponsors/1.png"></a>
   <a href="#"><img src="images/sponsors/2.png"></a>
</div> 
```

我不能用这个将图像移动到 div 的右侧，但是**div align="right"**有效。

如何使用 css3 将图像设置为右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:03:45.863

更改`display`为`block`并添加`text-align:right`

```
#sponsors { 
  float: right; 
  display: block; /* or remove this line, as block is default for div */
  width: 728px; 
  height: 100px; 
  margin: 60px 11px 0;
  text-align: right;
} 
```

显示对带有 a和 a 的`inline`元素没有多大意义。我假设您希望浏览器尊重您的，因此应该是，或者被完全删除，因为它是默认情况下暗示的元素。然后，您希望 div 内的元素与右侧对齐，您可以通过应用.`width``height``width``height``display``block``div``display:block``text-align`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:12:54.387

图像本身需要浮动，或者它们的父元素需要修改其文本对齐方式。

浮动：http: [//jsfiddle.net/MAz4Q/1/](http://jsfiddle.net/MAz4Q/1/)

```
#sponsors { 
  width: 728px; 
  height: 100px; 
  margin: 60px 11px 0;
}

#sponsors img {
    float: right;
} 
```

对齐：http: [//jsfiddle.net/MAz4Q/2/](http://jsfiddle.net/MAz4Q/2/)

```
#sponsors { 
  width: 728px; 
  height: 100px; 
  margin: 60px 11px 0;
  text-align: right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:07:49.643

尝试这个：

```
#sponsors a img {
  float:right;
} 
```

当前，您将赞助商 div 浮动到右侧，而不是赞助商 div 内的图像。定位图像以浮动它们，它应该适合您。

# javascript - javascript的固执

> ID：14605822
> 
> 赞同：0
> 
> 时间：2013-01-30T14:01:05.687
> 
> 标签：javascript

我创建了两组代码。两者看起来都一样，但一个正在工作，一个没有。

[http://jsfiddle.net/tM9Gu/](http://jsfiddle.net/tM9Gu/)不工作

[http://jsfiddle.net/gDxqj/](http://jsfiddle.net/gDxqj/)正在工作

工作意味着当您单击“其他”时，会打开一个新的文本字段。不工作意味着它没有。

有什么区别？

```
<div class="rButtons">
    <input type="radio" name="numbers" value="10" onclick="uncheck();" />10
    <input type="radio" name="numbers" value="20"  onclick="uncheck();" />20
    <input type="radio" name="numbers" value="other" onclick="check(this);"/>other
    <input type="text" id="other_field" name="other_field" onblur="checktext(this);"/>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:03:01.523

之所以会发生这种情况，是因为在[下面的小提琴](http://jsfiddle.net/tM9Gu/)中，您的 JavaScript 代码位于`onLoad`方法中，它*“关闭”*了该方法中的所有函数。

![负载](../Images/020525534c58dd08bd11ad7ebefcf287.png)

*原始：*

```
function onLoad() {
   function func1() { ... }
}

func1();  // out of scope: will cause an error 
```

# git - Git - 裸存储库不是最新的

> ID：14605823
> 
> 赞同：1
> 
> 时间：2013-01-30T14:01:07.313
> 
> 标签：git, repository, updates, git-bare

好的，我再次尝试描述我的问题。首先让我说我是 Git 的初学者。我已经阅读了很多东西，但有些地方对我来说并不清楚。

我在本地工作的工作副本。我在本地 branchx 上的头与 gitlab 上的远程 branchx 具有相同的 id。但是在 gitlabserver 上我可以看到两个分支 1.bare/branchx 2.branchx。
当我比较这两个分支时`bare/branchx`，`branchx`.

我搜索了一段时间以找到要更新的命令，`bare/branchx`但`branchx`没有找到。我怀疑出了什么问题。

另一个问题是，为什么我看到这两个分支而不是一个 - `bare/branchx`. 正如我所读到的，在远程服务器上只能是一个裸存储库。但是当我将数据拉到远程时，没有非裸仓库吗？当 Bare repo 没有工作树时，我的其他数据在哪里？

这么多的问题，这么多的答案和在 git 上做事的方法。我很困惑

@kan 当我输入

```
 git branch -a 
```

我明白了

```
master
* x2
remotes/origin/bare/master
remotes/origin/bare/x2
remotes/origin/bare/x3
remotes/origin/bare/x4
remotes/origin/master
remotes/origin/x2
remotes/origin/x3
remotes/origin/x4 
```

所以我有一个光秃秃的主人和主人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:03:39.610

> 但是当我将数据拉到远程时，没有非裸仓库吗？当 Bare repo 没有工作树时，我的其他数据在哪里？

您不是拉到遥控器，而是在*推*到遥控器。
而且你总是推送到一个**[*裸*仓库](http://sitaramc.github.com/concepts/bare.html)**`.git`（以避免目录中的索引和工作树本身之间的任何差异——所有签出的文件：没有工作树，没问题）

您应该只看到`remotes/origin/master`：这是与`master`您推`master`送到同一级别的分支`origin`。

`remotes/origin/bare/master`不应该存在，这里的“bare”可以是一个分支命名空间

# .net - Techart .Net - 搜索示例示例

> ID：14605828
> 
> 赞同：0
> 
> 时间：2013-01-30T14:01:28.390
> 
> 标签：.net, teechart

这似乎是一个非常愚蠢的问题，但我无法在链接“steema.net/TeeChartForNET”上找到 Teechart 的示例。我一直在搜索，所有来源似乎都指向此链接以获取示例。但是在此页面上，它要求验证用户名和密码，当我输入我的客户编号和密码时，它不接受它。

（PS。我使用的是评估版）

我真的需要查看示例工作示例才能让我的图表正常运行。我尝试了很多代码，但无法在页面上显示图表。

感谢您提前提供任何帮助。

谢谢@Narcis。我在提到的位置找到了示例示例。我将示例示例中的代码复制粘贴到我的应用程序的页面中，但图表仍然没有显示。知道我可能做错了什么吗？这是我的代码

ASPX 代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="TestTChart.aspx.cs" Inherits="Recovery_TestTChart" %>
<%@ Register TagPrefix="tchart" Namespace="Steema.TeeChart.Web" Assembly="TeeChart" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <tchart:WebChart id="WebChart1" 
                style="Z-INDEX: 107; LEFT: 24px; POSITION: absolute; TOP: 60px" runat="server"
                Width="432px" Height="290px" Config="some long key"
                TempChart="Httphandler" AutoPostback="False" 
                GetChartFile="GetChart.aspx"></tchart:WebChart>
    </div>
    </form>
</body>
</html> 
```

ASPX.CS 代码

```
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Web;
using System.Web.SessionState;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;

public partial class Recovery_TestTChart : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Steema.TeeChart.Chart ch1 = WebChart1.Chart;
        ch1.Series.RemoveAllSeries();
        ch1.Series.Add(new Steema.TeeChart.Styles.Bubble());
        ch1.Series[0].FillSampleValues();
        ch1.Legend.Shadow.Visible = false;
        ch1.Legend.Visible = false;
        (ch1.Series[0] as Steema.TeeChart.Styles.Bubble).Pointer.Style = Steema.TeeChart.Styles.PointerStyles.PolishedSphere;
    }
} 
```

我还在与此页面相同的目录中添加了一个名为 GetChart.aspx 的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:48:01.317

这很奇怪，我们无法重现[http://www.steema.net/TeeChartForNET/index.aspx](http://www.steema.net/TeeChartForNET/index.aspx)的问题。无论如何，您应该在TeeChart 安装随附的*示例文件夹中找到完整的项目，例如：* *C:\Program Files\Steema Software\Steema TeeChart for .NET 2012 4.1.2012.09280\Examples\TeeChartForNET*。

# javascript - 简单的彗星应用程序“未定义组织”

> ID：14605831
> 
> 赞同：5
> 
> 时间：2013-01-30T14:01:44.837
> 
> 标签：javascript, jquery, comet

我正在尝试将旧的 cometd javascript 包装器和测试客户端（是 1.3.x）更新到较新的 comet 2.5.1 javascript 实现。我有所有的依赖项，浏览器可以找到它们，但我在 Firebug 的控制台中遇到错误（见下文） ![关于多个错误](../Images/139259125a6a0fdf79d12222c80c068a.png)

我的 HTML 的头部如下：

```
<head>
    <title>CometD Tester</title>
    <link rel="stylesheet" type="text/css"href="style/style.css" />
    <script type="text/javascript" src="org/cometd/Cometd.js"></script>
    <script type="text/javascript" src="org/cometd/AckExtension.js"></script>
    <script type="text/javascript" src="org/cometd/ReloadExtension.js"></script>
    <script type="text/javascript" src="jquery/jquery-1.9.0.js"></script>
    <script type="text/javascript" src="jquery/jquery.cookie.js"></script>
    <script type="text/javascript" src="jquery/jquery.cometd.js"></script>
    <script type="text/javascript" src="jquery/jquery.cometd-reload.js"></script>
    <script type="text/javascript" src="js/myCometd.js"></script>
</head> 
```

所有这些都是由浏览器找到的。看着`Cometd.js`我看到以下内容：

```
org.cometd.Cometd = function(name)
{
 ....
} 
```

那么这不是定义组织吗？请注意，控制台中的任何错误都不是来自`Cometd.js`. 否则我看不到“org.cometd”的其他定义。如果有人可以帮助我，我将不胜感激。我正在使用 Tomcat 7，以下是目录结构：

![客户端应用程序的目录布局](../Images/0b923b224813a370bf22b513aa050492.png)

谢谢。

**更新 - 进一步测试**

我将标题减少为：

```
<head>
    <title>CometD Tester</title>
    <link rel="stylesheet" type="text/css"href="style/style.css" />
    <script type="text/javascript" src="org/cometd/Cometd.js"></script>
</head> 
```

并从 index.html 中删除所有 JS。现在唯一包含的 JS 是来自 comet.org 的 Cometd.js。仍然存在相同的错误......来自该脚本的第一行：

```
org.cometd.Cometd = function(name) 
```

不知道我在这里错过了什么。

**编辑 - 添加 jquery.cometd-reload.js** 这是文件的内容。看起来它是来自 cometd 库的“重新绑定”功能，以使用 jquery 代替（？）。我在 JS 中的速度不够快，无法调试这个（我真的是 C++ 开发人员）。

```
(function($)
{
    function bind(org_cometd, cookie, ReloadExtension, cometd)
    {
        // Remap cometd COOKIE functions to jquery cookie functions
        // Avoid to set to undefined if the jquery cookie plugin is not present
        if (cookie)
        {
            org_cometd.COOKIE.set = cookie;
            org_cometd.COOKIE.get = cookie;
        }

        var result = new ReloadExtension();
        cometd.registerExtension('reload', result);
        return result;
    }

    if (typeof define === 'function' && define.amd)
    {
        define(['org/cometd', 'jquery.cookie', 'org/cometd/ReloadExtension', 'jquery.cometd'], bind);
    }
    else
    {
        bind(org.cometd, $.cookie, org.cometd.ReloadExtension, $.cometd);
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:05:46.130

所以问题是我误解了 Comet.org 网站的项目布局。[对于非 Maven 设置](http://docs.cometd.org/reference/#primer_non_maven_way "非 Maven 项目设置")，我应该更密切地遵循 Cometd Primer 上发布的方向。基本上，当您设置项目时，您会下载发行版，然后您需要从*捆绑在*tarball 中的 war 文件中获取代码。所以，一旦你提取了压缩包......

1.  `cometd-javascript-common-2.5.1.war`从（位于`\cometd-2.5.1\cometd-javascript\jquery\target`）或`cometd-javascript-jquery-2.5.1.war`（位于`\cometd-2.5.1\cometd-javascript\common\target`）中获取 org 文件夹
2.  从 jquery 文件夹中获取`cometd-javascript-jquery-2.5.1.war`

org 命名空间定义在`org/cometd.js`我以前没有的文件中，因为我错误地认为它已被`org/cometd/Cometd.js`文件替换。命名空间`org`和`comet`从该文件的第 17 行开始定义如下：

```
// Namespaces for the cometd implementation
this.org = this.org || {};
org.cometd = {};

org.cometd.JSON = {}; 
```

这些功能现在可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:11:12.623

尝试在任何其他 JavaScript 文件之前加载 jQuery -

```
<head>
    <title>CometD Tester</title>
    <link rel="stylesheet" type="text/css"href="style/style.css" />
    <script type="text/javascript" src="jquery/jquery-1.9.0.js"></script> <!-- load first -->
    <script type="text/javascript" src="org/cometd/Cometd.js"></script>
    <script type="text/javascript" src="org/cometd/AckExtension.js"></script>
    <script type="text/javascript" src="org/cometd/ReloadExtension.js"></script>
    <script type="text/javascript" src="jquery/jquery.cookie.js"></script>
    <script type="text/javascript" src="jquery/jquery.cometd.js"></script>
    <script type="text/javascript" src="jquery/jquery.cometd-reload.js"></script>
    <script type="text/javascript" src="js/myCometd.js"></script>
</head> 
```

# selenium - 元素在 webelement.clear() 上似乎是陈旧错误

> ID：14605832
> 
> 赞同：0
> 
> 时间：2013-01-30T14:01:45.550
> 
> 标签：selenium, junit

我正在使用 HtmlUnitDriver 定位一个元素。元素是文本字段（输入）。

```
 WebElement username = driver.findElement(By.id("username"));
    username.clear();
    username.sendKeys("myValue"); 
```

我尝试使用 username.clear() 清除其内容。但这给了我

元素似乎已过时。您是否离开了包含它的页面？

没有什么意义，因为我没有在页面上移动。有谁知道这是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:04:14.387

你可以试试这个，看看它是否有效：

```
public static WebElement getElementByLocator( By locator ) {
  driver.manage().timeouts().implicitlyWait( 5, TimeUnit.SECONDS );
  WebElement we = null;
  boolean unfound = true;
  while ( unfound ) {
    try {
        we = driver.findElement( locator );
        unfound = false; // FOUND IT
      } catch ( StaleElementReferenceException e ) {                        
        unfound = true;
        Thread.sleep(4000);
      }     
    } 
  }
  driver.manage().timeouts().implicitlyWait( DEFAULT_IMPLICIT_WAIT, 
        TimeUnit.SECONDS );
  return we;
} 
```

然后，

```
WebElement username = getElementByLocator( By.id("username") );
username.clear();
username.sendKeys("myValue"); 
```

# sql - 为多种产品选择最低价格

> ID：14605834
> 
> 赞同：4
> 
> 时间：2013-01-30T14:01:50.560
> 
> 标签：sql, sql-server, tsql, select, group-by

大家好，

对于一个项目，我需要对所有产品进行概览，以找到价格最低的供应商。因此，对于每种产品，都必须有一个价格和供应商的结果

如果尝试了一百个查询，但我找不到合适的查询。

表：

```
CREATE TABLE [dbo].[product](
 [id] [int] IDENTITY(1,1) NOT NULL,
 [picture_name] [varchar](255) NOT NULL)

CREATE TABLE [dbo].[supplier](
 [id] [int] IDENTITY(1,1) NOT NULL,
 [name] [varchar](50) NOT NULL)

CREATE TABLE [dbo].[supplier_overview_product](
 [supplier] [int] NOT NULL,
 [product] [int] NOT NULL,
 [price] [real] NOT NULL) 
```

产品对产品是 FK 供应商对供应商是 FK

这就是我所拥有的：

```
SELECT s.name, MIN(sop.price)
FROM dbo.supplier_overview_product AS sop
JOIN dbo.product AS p
ON sop.product = p.id
JOIN dbo.supplier AS s
ON s.id  = sop.supplier
GROUP BY s.name 
```

但是没有供应商。我想知道那是谁。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:18:03.297

我理解您的问题意味着您希望每个产品的供应商价格最低。

[CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)按每个产品的价格对供应商进行排序，主查询使用该排序仅检索价格最低的供应商。

**注意**：因为我使用的是`RANK`，如果多个供应商碰巧有相同的最低价格，他们将全部被退回。如果这不正确，请更改`RANK`为`ROW_NUMBER`

```
;WITH SuppliersByPrice AS (
    SELECT product, supplier, price,
        RANK() OVER (PARTITION BY product ORDER BY price) as ord
    FROM supplier_overview_product
)
SELECT SBP.product, SBP.price, S.name
FROM SuppliersByPrice SBP
    INNER JOIN Supplier S ON S.id = SBP.supplier
WHERE SBP.ord = 1 
```

# ajax - 具有 SEO 友好的 ajax 和历史的单页网站

> ID：14605840
> 
> 赞同：1
> 
> 时间：2013-01-30T14:02:11.933
> 
> 标签：ajax, seo, history.js, singlepage

我正忙着建立一个单页网站。页面的基本布局如下 - 一个部分在另一个部分之下：

*   标题和导航
*   内容第 1 部分（关于我们的示例）
*   内容部分 2（示例产品）
*   内容第 3 部分（示例客户端）
*   页脚

每个部分内部都有一个小菜单，用于 ajax 特定部分的内容。所以产品部分会有一个产品标题菜单，一旦点击，产品详细信息将被 ajaxed。

我可以用普通技术来做这些，但问题是，我需要网站是 SEO 友好的，并且被谷歌索引/抓取。

我以前从未使用过它，但 history.js 看起来很有希望。我已经进行了一些测试，但找不到针对我的特定问题的资源。我也愿意接受其他建议。所有 Ajaxed 内容将是单独的 HTML 文件 - 用于 SEO，因此使用 history.js 对我来说听起来不错。

**具体问题：**

*   当用户向下滚动时，通过每个不同的部分，URL 应该会相应地改变。
*   每个部分中的 ajaxed 内容也应该更改 URL。
*   谷歌应该能够抓取网站索引的单独页面。
*   我可以使用 history.js 更改页面中的所有内容，但是有没有办法定位我的部分，所以它只更改我想要的部分中的内容，而不是页面上的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:14:17.690

我建议使用backbone.js。它取决于 jquery 和 underscore.js。它为您提供以下功能

*   MVC 架构
    *   它为客户端代码提供了更多结构
*   模板
    *   您可以在客户端维护模板，从而为您提供更有条理的代码。
*   URL重写
    *   重写 ajax 调用的 url。它有助于开发 SEO 友好的网站。

# c++ - 优化我的代码/程序我哪里出错了？

> ID：14605841
> 
> 赞同：0
> 
> 时间：2013-01-30T14:02:23.073
> 
> 标签：c++

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main()
{
    int LordIronhead = 0; 
    char answer;

    cout<<"Is Lord Ironhead present? Y/N.\n";
    cin >> answer;

    if (answer == 'Y')
    {
        LordIronhead=0;
    }
    else if (answer == 'N')
    {
        LordIronhead= LordIronhead+1;
    }

    cout<< ""<<LordIronhead<<"\n"; 

    system("PAUSE");
    return 0;
} 
```

每次我运行程序并且如果我回答 NO (N) 结果总是 0 而不是 1 (LordIronhead = LordIronhead + 1)

我可以知道我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:11:53.980

您的代码是正确的，但对用户输入的大小写敏感（它对用户输入的处理方式`N`不同`n`）。在检查输入之前，您可以通过将输入转换为已知大小写来消除可能造成用户混淆的来源。您可以使用[toupper](http://www.cplusplus.com/reference/cctype/toupper/)或[tolower来执行此操作](http://www.cplusplus.com/reference/cctype/tolower/)

```
cin >> answer;
answer = toupper(answer); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:08:07.093

您的代码原则上没问题，但您可能会遇到“答案”的二值逻辑与“Y”和“N”进行检查而没有失败案例的问题。我怀疑您遇到了 EOL 或大小写或字符转换问题，同时遇到了两个如果，因此永远不会改变主。

要显示问题，请尝试使用 else 语句：

```
else if (answer == 'N')
{
     LordIronhead= LordIronhead+1;
} else {
     std::cout << "Invalid answer '" << answer << "'" << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:08:14.040

我只是自己尝试了一下，发现如果我回答 NI 得到了预期的答案（1）。但是，如果我击中 n，它会返回为 0。你确定你击中的是 N 而不是 n 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:09:30.003

更好地使用 1 和 0 而不是 N 和 Y。它更容易被系统识别

# postgresql - postgresql 函数中的语法错误

> ID：14605845
> 
> 赞同：1
> 
> 时间：2013-01-30T14:02:32.423
> 
> 标签：postgresql

我是 postgresql 的初学者，我想在 sql 中创建一个过程。我创建了一个将记录插入表中并返回 id 的函数。但是有问题，我不想要任何结果，除了输出参数。

```
CREATE OR REPLACE FUNCTION public."InsertVideo"
(
  OUT  out_scope_id       integer,
  IN   in_youtubeidvideo  varchar[],
  IN   in_title           varchar,
  IN   in_rating          double precision,
  IN   in_viewcount       integer         
)
RETURNS integer AS
$$

DECLARE
id INTEGER;

INSERT INTO Video 
(                 
  YoutubeIdVideo,       
  Title,                
  Rating,               
  ViewCount,                      
  DataAdded,
  ConvertedFlag,
  SchedulingFlag
)

VALUES 
(
  in_youtubeidvideo,                 
    in_title,            
    in_rating,           
    in_viewcount,
  now(),
  false,
  false
);

SELECT id := CURRVAL(pg_get_serial_sequence('public.video','IDVideo'));
RETURN id;

$$
LANGUAGE 'sql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:29:16.850

SQL 函数不能使用变量，因此您不需要它们。将其更改为：

```
CREATE OR REPLACE FUNCTION public."InsertVideo" (
    IN in_youtubeidvideo varchar[],
    IN in_title varchar,
    IN in_rating double precision,
    IN in_viewcount integer
) RETURNS integer AS $$

INSERT INTO Video (
    YoutubeIdVideo,
    Title,
    Rating,
    ViewCount,
    DataAdded,
    ConvertedFlag,
    SchedulingFlag
) VALUES (
    in_youtubeidvideo,
    in_title,
    in_rating,
    in_viewcount,
    now(),
    false,
    false
);

SELECT CURRVAL(pg_get_serial_sequence('public.video','IDVideo'));

$$ LANGUAGE 'sql' VOLATILE CALLED ON NULL INPUT SECURITY INVOKER; 
```

# solr - Solr4.1 上的 CopyField 问题

> ID：14605847
> 
> 赞同：3
> 
> 时间：2013-01-30T14:02:41.480
> 
> 标签：solr, indexing, solr4

我正在使用 Solr 3.6.1，我很满意。现在我想继续使用 solr4.1。因此，我采用了“schema.xml”和“solrconfig.xml”（稍作改动）并将它们放在我的新 solr4.1 配置下。索引成功（DIH）。但是，我注意到了一个问题。在“schema.xml”中，我有“copyField”指令，以便使用不同的“类型”索引相同的字段。当我尝试在 solr4.1 上使用相同的配置进行索引时，索引大小是 solr3.6.1 上索引大小的一半（当我查询时，我得到不同的结果）。Solr4.1 有什么变化吗？我需要一点帮助。

**schema.xml：**

```
<?xml version="1.0" encoding="UTF-8" ?>

<schema name="areios_pagos" version="1.5">
  <types>
    <!-- The StrField type is not analyzed, but indexed/stored verbatim. -->
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" />
    <!-- boolean type: "true" or "false" -->
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true"/>
    <!--Binary data type. The data should be sent/retrieved in as Base64 encoded Strings -->
    <fieldtype name="binary" class="solr.BinaryField"/>
    <!--
      Default numeric field types. For faster range queries, consider the tint/tfloat/tlong/tdouble types.
    -->
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" positionIncrementGap="0"/>  
    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" positionIncrementGap="0"/>

    <fieldType name="date" class="solr.TrieDateField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="tdate" class="solr.TrieDateField" precisionStep="6" positionIncrementGap="0"/>

    <fieldType name="pint" class="solr.IntField"/>
    <fieldType name="plong" class="solr.LongField"/>
    <fieldType name="pfloat" class="solr.FloatField"/>
    <fieldType name="pdouble" class="solr.DoubleField"/>
    <fieldType name="pdate" class="solr.DateField" sortMissingLast="true"/>

    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>

    <fieldType name="random" class="solr.RandomSortField" indexed="true" />

    <!-- Greek -->
    <fieldType name="text_el" class="solr.TextField" positionIncrementGap="1000">
      <analyzer> 
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <!-- greek specific lowercase for sigma -->
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="false" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
        <filter class="solr.GreekStemFilterFactory"/>
      </analyzer>
    </fieldType>    

    <!-- THIS IS FOR TIKA-PDF -->   
    <fieldType name="text" class="solr.TextField" positionIncrementGap="1000">
        <analyzer type="index">
            <charFilter class="solr.HTMLStripCharFilterFactory"/>
            <tokenizer class="solr.StandardTokenizerFactory"/>  
            <filter class="solr.GreekLowerCaseFilterFactory"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
            <filter class="solr.GreekStemFilterFactory"/>   
            <!--<filter class="solr.HunspellStemFilterFactory" dictionary="dictionaries/el_GR.dic" affix="dictionaries/el_GR.aff" ignoreCase="true" />-->
        </analyzer>
        <analyzer type="query">
            <charFilter class="solr.HTMLStripCharFilterFactory"/>
            <tokenizer class="solr.StandardTokenizerFactory"/>  
            <filter class="solr.GreekLowerCaseFilterFactory"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
            <filter class="solr.GreekStemFilterFactory"/>   
            <!--<filter class="solr.HunspellStemFilterFactory" dictionary="dictionaries/el_GR.dic" affix="dictionaries/el_GR.aff" ignoreCase="true" />-->
        </analyzer>
    </fieldType>

    <!-- THIS FIELDTYPE IN CONJUNCTION WITH THE COPYFIELD DEFINITION  
         HELPS FOR TERMS RELEVANCY
    -->
    <fieldType name="text_areios_pagos_s" class="solr.TextField" positionIncrementGap="100" >
        <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.LimitTokenCountFilterFactory" maxTokenCount="20"/>
            <filter class="solr.GreekLowerCaseFilterFactory"/>
            <!-- <filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="100"/> -->
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.LimitTokenCountFilterFactory" maxTokenCount="20"/>
            <filter class="solr.GreekLowerCaseFilterFactory"/>
            <!-- <filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="100"/> -->
        </analyzer>
    </fieldType> 
    <!-- END -->    

    <fieldType name="text_areios_pagos" class="solr.TextField" positionIncrementGap="100">    
      <analyzer type="index">       
        <tokenizer class="solr.StandardTokenizerFactory"/>      
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
        <filter class="solr.GreekStemFilterFactory"/>       
        <!--<filter class="solr.HunspellStemFilterFactory" dictionary="dictionaries/el_GR.dic" affix="dictionaries/el_GR.aff" ignoreCase="true" />-->
      </analyzer>     
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>      
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
        <filter class="solr.GreekStemFilterFactory"/>       
      </analyzer>
    </fieldType>

    <fieldtype name="ignored" stored="false" indexed="false" multiValued="true" class="solr.StrField" />

    <fieldType name="point" class="solr.PointType" dimension="2" subFieldSuffix="_d"/>

    <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>

    <fieldtype name="geohash" class="solr.GeoHashField"/>

    <fieldType name="currency" class="solr.CurrencyField" precisionStep="8" defaultCurrency="USD" currencyConfig="currency.xml" />
 </types>

 <fields>
  <field  name="ida" type="string" indexed="true" stored="true" multiValued="false"/>
  <field  name="solr_id" type="string" indexed="true" stored="true" multiValued="false"/> 
  <field  name="apofasi_number" type="text_areios_pagos" indexed="true" stored="true" multiValued="true"/>
  <field  name="apofasi_date" type="text_areios_pagos" indexed="true" stored="true"/>
  <field  name="apofasi_tmima" type="text_areios_pagos" indexed="true" stored="true"/>
  <field  name="apofasi_taxonomy" type="text_areios_pagos" indexed="true" stored="true"/>
  <field  name="content" type="text_areios_pagos" indexed="true" stored="true" multiValued="true"/> <!-- SET "multiValued=true" IN ORDER TO "copyField" --> 
  <field  name="type" type="string" indexed="true" stored="true"/>  
  <field  name="model" type="string" indexed="true" stored="true" multiValued="false"/>  
  <field  name="url" type="string" indexed="true" stored="true"/>
  <field  name="search_tag" type="text_areios_pagos" indexed="true" stored="true"/>
  <field  name="contentbin" type="text" indexed="true" stored="true" multiValued="true"/>
  <field  name="last_modified" type="string" indexed="true" stored="true"/>  
  <field  name="title" type="text_areios_pagos" indexed="true" stored="true" multiValued="true"/>
  <field  name="grid_title" type="text_areios_pagos" indexed="true" stored="true"/>
  <field  name="contentS" type="text_areios_pagos_s" indexed="true" stored="true"/>
 </fields>

 <uniqueKey>solr_id</uniqueKey>
 <defaultSearchField>content</defaultSearchField>
 <solrQueryParser defaultOperator="AND"/>

   <copyField source="apofasi_number" dest="content" />    
   <copyField source="apofasi_date" dest="content" />   
   <copyField source="apofasi_tmima" dest="content" />   
   <copyField source="apofasi_taxonomy" dest="content" />   
   <copyField source="title" dest="content" />    
   <copyField source="search_tag" dest="content" />
   <copyField source="contentbin" dest="content"/>     
   <copyField source="content" dest="contentS" />

</schema> 
```

**solrconfig.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>

<config>

  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>

  <luceneMatchVersion>LUCENE_41</luceneMatchVersion>   

  <dataDir>${solr.data.dir:}</dataDir>

  <directoryFactory name="DirectoryFactory" 
                    class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>

  <indexConfig>

  </indexConfig>

  <jmx />

  <updateHandler class="solr.DirectUpdateHandler2">   
  </updateHandler>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
       Query section - these settings control query time things like caches
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <query>

    <maxBooleanClauses>2048</maxBooleanClauses>

    <filterCache class="solr.FastLRUCache"
                        size="2048"
                        initialSize="1024"
                        autowarmCount="512"
                        cleanupThread="true" />

    <queryResultCache class="solr.FastLRUCache"
                        size="2048"
                        initialSize="1024"
                        autowarmCount="512"
                        cleanupThread="true" />

    <documentCache class="solr.FastLRUCache"
                        size="2048"
                        initialSize="2048"
                        autowarmCount="512" />

    <fieldValueCache class="solr.FastLRUCache"
                        size="2048"
                        initialSize="512"
                        autowarmCount="512"
                        cleanupThread="true" />                 

    <enableLazyFieldLoading>true</enableLazyFieldLoading>

    <queryResultWindowSize>150</queryResultWindowSize>

    <queryResultMaxDocsCached>200</queryResultMaxDocsCached>   

    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">χρησικτησια νομη</str>
          <str name="fq">apofasi_taxonomy:ΠΟΛΙΤΙΚΕΣ</str>
          <str name="sort">apofasi_date asc,ida desc,apofasi_tmima desc</str>
          <str name="start">0</str>
          <str name="rows">150</str>
        </lst>
        <lst>
          <str name="q">νομη</str>
          <str name="fq">apofasi_taxonomy:ΠΟΛΙΤΙΚΕΣ</str>
          <str name="sort">apofasi_date asc,ida desc,apofasi_tmima desc</str>
          <str name="start">0</str>
          <str name="rows">150</str>
        </lst>
        <lst>
          <str name="q">χρησικτησια νομη</str>
          <str name="fq">apofasi_taxonomy:ΠΟΙΝΙΚΕΣ</str>
          <str name="sort">apofasi_date asc,ida desc,apofasi_tmima desc</str>
          <str name="start">0</str>
          <str name="rows">150</str>
        </lst>
      </arr>
    </listener>

    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">χρησικτησια νομη</str>
          <str name="fq">apofasi_taxonomy:ΠΟΛΙΤΙΚΕΣ</str>
          <str name="sort">apofasi_date asc,ida desc,apofasi_tmima desc</str>
          <str name="start">0</str>
          <str name="rows">150</str>
        </lst>
        <lst>
          <str name="q">νομη</str>
          <str name="fq">apofasi_taxonomy:ΠΟΛΙΤΙΚΕΣ</str>
          <str name="sort">apofasi_date asc,ida desc,apofasi_tmima desc</str>
          <str name="start">0</str>
          <str name="rows">150</str>
        </lst>
        <lst>
          <str name="q">χρησικτησια νομη</str>
          <str name="fq">apofasi_taxonomy:ΠΟΙΝΙΚΕΣ</str>
          <str name="sort">apofasi_date asc,ida desc,apofasi_tmima desc</str>
          <str name="start">0</str>
          <str name="rows">150</str>
        </lst>
      </arr>
   </listener>

   <useColdSearcher>false</useColdSearcher>

   <maxWarmingSearchers>2</maxWarmingSearchers>

  </query>

  <requestDispatcher> 
    <requestParsers enableRemoteStreaming="true" multipartUploadLimitInKB="2048000" />    
    <httpCaching never304="true" />
  </requestDispatcher>

  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
  </requestHandler>

  <requestHandler name="/select" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="defType">edismax</str>
       <str name="qf">content contentS^10</str>
       <str name="pf">content^10 contentS^100</str>
       <str name="ps">100</str>
       <str name="echoParams">explicit</str>
       <int name="rows">150</int>
       <str name="sort">score desc</str>
       <str name="defType">edismax</str>
       <str name="qf">content contentS^10</str>
       <str name="pf">content^10 contentS^100</str>
       <str name="ps">100</str>
       <str name="wt">json</str>
       <str name="hl">true</str>       
       <str name="fl">solr_id,ida,type,model,keywordlist,title,apofasi_taxonomy,apofasi_tmima,apofasi_date,grid_title</str>
       <str name="hl.fl">content,title</str>
       <str name="f.content.hl.alternateField">content</str>
       <str name="hl.maxAlternateFieldLength">800</str>
       <str name="hl.fragsize">800</str>       
     </lst>  
  </requestHandler>

  <requestHandler name="/update" 
                  class="solr.XmlUpdateRequestHandler">
  </requestHandler>

  <requestHandler name="/update/javabin" 
                  class="solr.BinaryUpdateRequestHandler" />

  <requestHandler name="/update/csv" 
                  class="solr.CSVRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/update/json" 
                  class="solr.JsonUpdateRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <str name="fmap.content">text</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>      
      <str name="fmap.Last-Modified">last_modified</str>
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>
  </requestHandler>

  <requestHandler name="/update/xslt"
                   startup="lazy"
                   class="solr.XsltUpdateRequestHandler"/>

  <requestHandler name="/analysis/field" 
                  startup="lazy"
                  class="solr.FieldAnalysisRequestHandler" />

  <requestHandler name="/analysis/document" 
                  class="solr.DocumentAnalysisRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/admin/" 
                  class="solr.admin.AdminHandlers" />

  <!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler>

  <!-- Echo the request contents back to the client -->
  <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
    <lst name="defaults">
     <str name="echoParams">explicit</str> 
     <str name="echoHandler">true</str>
    </lst>
  </requestHandler>

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
    <str name="queryAnalyzerFieldType">textSpell</str>
    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">name</str>
      <str name="spellcheckIndexDir">spellchecker</str>     
    </lst>    
  </searchComponent>

  <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <str name="spellcheck.onlyMorePopular">false</str>
      <str name="spellcheck.extendedResults">false</str>
      <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler>  

  <searchComponent name="terms" class="solr.TermsComponent"/>

  <!-- A request handler for demonstrating the terms component -->
  <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
     <lst name="defaults">
      <bool name="terms">true</bool>
    </lst>     
    <arr name="components">
      <str>terms</str>
    </arr>
  </requestHandler>

  <searchComponent name="elevator" class="solr.QueryElevationComponent" >
    <!-- pick a fieldType to analyze queries -->
    <str name="queryFieldType">string</str>
    <str name="config-file">elevate.xml</str>
  </searchComponent>

  <!-- A request handler for demonstrating the elevator component -->
  <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="df">text</str>
    </lst>
    <arr name="last-components">
      <str>elevator</str>
    </arr>
  </requestHandler>  

  <searchComponent class="solr.HighlightComponent" name="highlight">
    <highlighting>
      <fragmenter name="gap" 
                  default="true"
                  class="solr.highlight.GapFragmenter">
        <lst name="defaults">
        </lst>
      </fragmenter>
      <fragmenter name="regex" 
                  class="solr.highlight.RegexFragmenter">
        <lst name="defaults">
          <!-- slightly smaller fragsizes work better because of slop -->
          <int name="hl.fragsize">70</int>
          <!-- allow 50% slop on fragment sizes -->
          <float name="hl.regex.slop">0.5</float>
          <!-- a basic sentence pattern -->
          <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
        </lst>
      </fragmenter>
      <!-- Configure the standard formatter -->
      <formatter name="html" 
                 default="true"
                 class="solr.highlight.HtmlFormatter">
        <lst name="defaults">         
          <str name="hl.simple.pre">&lt;shl&gt;</str>
          <str name="hl.simple.post">&lt;/shl&gt;</str>       
        </lst>
      </formatter>

      <!-- Configure the standard encoder -->
      <encoder name="html" 
               class="solr.highlight.HtmlEncoder" />

      <!-- Configure the standard fragListBuilder -->
      <fragListBuilder name="simple" 
                       default="true"
                       class="solr.highlight.SimpleFragListBuilder"/>

      <!-- Configure the single fragListBuilder -->
      <fragListBuilder name="single" 
                       class="solr.highlight.SingleFragListBuilder"/>

      <!-- default tag FragmentsBuilder -->
      <fragmentsBuilder name="default" 
                        default="true"
                        class="solr.highlight.ScoreOrderFragmentsBuilder">    
      </fragmentsBuilder>

      <fragmentsBuilder name="colored" 
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <lst name="defaults">
          <str name="hl.tag.pre"><![CDATA[
               <b style="background:yellow">,<b style="background:lawgreen">,
               <b style="background:aquamarine">,<b style="background:magenta">,
               <b style="background:palegreen">,<b style="background:coral">,
               <b style="background:wheat">,<b style="background:khaki">,
               <b style="background:lime">,<b style="background:deepskyblue">]]></str>
          <str name="hl.tag.post"><![CDATA[</b>]]></str>
        </lst>
      </fragmentsBuilder>

      <boundaryScanner name="default" 
                       default="true"
                       class="solr.highlight.SimpleBoundaryScanner">
        <lst name="defaults">
          <str name="hl.bs.maxScan">10</str>
          <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
        </lst>
      </boundaryScanner>

      <boundaryScanner name="breakIterator" 
                       class="solr.highlight.BreakIteratorBoundaryScanner">
        <lst name="defaults">

          <str name="hl.bs.type">WORD</str>

          <str name="hl.bs.language">en</str>
          <str name="hl.bs.country">US</str>
        </lst>
      </boundaryScanner>
    </highlighting>
  </searchComponent>

  <queryResponseWriter name="json" class="solr.JSONResponseWriter">

    <str name="content-type">text/plain; charset=UTF-8</str>
  </queryResponseWriter>

    <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>

  <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
    <int name="xsltCacheLifetimeSeconds">5</int>
  </queryResponseWriter>
  <admin>
    <defaultQuery>*:*</defaultQuery>

  </admin>

</config> 
```

问候，

汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T05:04:51.723

Solr 4.1 以压缩方式维护存储的字段，这可以解释索引大小的减少。

还，

```
<copyField source="content" dest="contentS" /> 
```

文档@ [http://wiki.apache.org/solr/SchemaXml#Copy_Fields](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)

> 复制是在流源级别完成的，没有副本馈送到另一个副本。

将 copyfield 作为 copyfield 标签的来源是行不通的。
copyfield 源必须是一个实际的字段，它有一些值并且没有级联。

您还可以查看[http://lucene.472066.n3.nabble.com/does-copyField-recurse-td2450208.html](http://lucene.472066.n3.nabble.com/does-copyField-recurse-td2450208.html)

这对你有用吗？

# cocoa - Cocoa Mac OS X 应用程序中控制器对象数量的标准是什么？

> ID：14605849
> 
> 赞同：1
> 
> 时间：2013-01-30T14:02:52.193
> 
> 标签：cocoa, model-view-controller, architecture

我正在学习 Mac OS X 开发，通过阅读不同的文章和 Aaron Hillegass 的书，似乎 MVC 是在基于 Mac 的应用程序中使用的推荐设计模式。

但是，我找不到任何关于我们应该何时引入控制器类/对象以及我们应该使用多少的说明。

所以我的问题是：

在基于 Cocoa 的 Mac OS X 应用程序中，我们通常有一个或多个控制器类吗？如果我们有多个，那么引入新控制器类的标准是什么？控制器类之间如何交互，或者它们不交互并且不需要这种交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:41:29.963

这部分是为了使应用程序易于理解，保持代码井井有条，并且在某种程度上是个人品味的问题。

像 AddressBook.app 这样的简单应用程序可以使用单个控制器层对象。这个对象可以管理用户与人和组的交互。再说一次，它可能有一个 Person 控制器和一个 Group 控制器，每个控制器都将协调它们各自的 UI 片段（Group UI 到 Group 控制器等）和数据容器（组列表和人员列表）之间的交互并且，在查看组时，属于该组的人员列表）。如果您不愿意走到这一步，您可能有一个*窗口控制器*来存储不特定于组或人的代码。也就是说，管理在 Group 和 Person 模式之间重新配置 UI 的代码可能会进入包含此 UI 的窗口的窗口控制器中。

一个复杂的应用程序可能有**许多**控制器。它可能有一个用于每个窗口的控制器，这些窗口可能拥有用于专用于应用程序一个方面的自包含控件集的每个实例的控制器。它也可能有控制器来管理非 UI 项目（网络连接/下载、用户会话、附加外围设备的物理状态等）。这真的*取决于*您的应用程序和设计需求。

应用程序架构是软件开发中一个被低估的方面。在应用程序的整个生命周期中选择*和维护*一个好的架构有时可能意味着“我们可以在一天内添加此功能”和“我们必须完全重写部分/一半/大部分应用程序才能添加*任何*类似这个功能的东西”。它既是科学又是艺术，只需要经验（并且要时刻注意你最喜欢的开源项目的架构作为示例）。

需要记住的重要一点是：控制器层是最特定于您的应用程序的层（通常是可重用性最低的部分 - 像 NSArrayController 这样的有目的的可重用控制器无法承受）。这就是使您的应用程序成为您的应用*程序的*原因。它的模型也可以被其他应用程序及其视图重用，但控制器层是应用程序的“灵魂”。

我希望这有帮助。

# php - 如何以编程方式在 WordPress 中创建帖子

> ID：14605868
> 
> 赞同：11
> 
> 时间：2013-01-30T14:03:52.083
> 
> 标签：php, html, wordpress

我想知道如何以编程方式在 WordPress 中为大约七个不同的帖子创建帖子？

我试过了：

```
 <div class="demo">     
<?php global $user_ID;
$new_post = array(
'post_title' => 'My New Post',
'post_content' => 'Lorem ipsum dolor sit amet...',
'post_status' => 'publish',
'post_date' => date('Y-m-d H:i:s'),
'post_author' => $user_ID,
'post_type' => 'post',
'post_category' => array(0)
);
$post_id = wp_insert_post($new_post); ?>
</div> 
```

它没有显示任何东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T14:07:33.710

```
global $user_ID;
$new_post = array(
'post_title' => 'My New Post',
'post_content' => 'Lorem ipsum dolor sit amet...',
'post_status' => 'publish',
'post_date' => date('Y-m-d H:i:s'),
'post_author' => $user_ID,
'post_type' => 'post',
'post_category' => array(0)
);
$post_id = wp_insert_post($new_post); 
```

# javascript - 来自控制器的确认框

> ID：14605871
> 
> 赞同：0
> 
> 时间：2013-01-30T14:03:59.867
> 
> 标签：javascript, jsp, spring-mvc

需要在 JSP 中调用确认框，以下是我在控制器中的代码，

```
 if(!(nesting)){
        bla.add("Do you want to Load anyway?");
        context.getFlowScope().put("bla", bla); 
        context.getFlowScope().put("uldSelector", uldSelector); 
        return;
        }                       
h = uloService.processDomBatch(histInfo, dl, items); 
```

以上会将错误添加到 flowscope 并返回，但是，我想调用一个确认框，然后根据是/否，我应该继续...

有没有办法做到这一点？..任何帮助都非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:18:31.587

是的@user1609085，你可以这样`AJAX`做`JavaScript`：

```
function question(val) {
    var chk = document.forms[0].chk
    var box = valBox(chk)
    var resp = confirm("Do you want to Load anyway?")
    if(resp) {
        if(box == null) { return }
        else {
            $.ajax({
                type: 'GET',
                url: 'controllerMethod?action=controllerMethod',
                data: 'uldSelector='+val,
                cache: false,
                success: function(data) {
                    alert("histInfo")
                },
                error: function(data) {
                    alert('ERROR: ' + data)
                }
            })
        }
    }
}

    function valBox(b) {
        var cnt = -1
        for(var i = b.length-1; i > -1; i--) {
            if(b[i].checked) {
                cnt = i
                i = -1
            }
        }
        if(cnt > -1) return b[cnt].value
        else return null
    } 
```

而你只放盒子`onclick="question(this.value)"`

**我希望能帮助你:)**

# php - 登录后显示按钮

> ID：14605872
> 
> 赞同：-2
> 
> 时间：2013-01-30T14:04:00.090
> 
> 标签：php, css

我有一个 joomla 登录组件，现在我想当用户成功登录时显示一个由 css 隐藏的按钮，显示：无...这是我尝试过的...

```
<?php if (true === $app->login($credentials, $options)) {
        // Success

        $app->setUserState('users.login.form.data', array());
        $app->redirect(JRoute::_($app->getUserState('users.login.form.return'), false));
        ?><script>
        $$('.formBtn').setStyles({
  display:box;
});
        </script>
        <?php

    } else {
        // Login failed !
        $data['remember'] = (int)$options['remember'];
        $app->setUserState('users.login.form.data', $data);
        $app->redirect(JRoute::_('index.php?option=com_users&view=login', false));
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:06:10.873

这就是我最终做到的方式......

```
<?php $user =& JFactory::getUser();
if($user->id)
{
?>

<script>
window.addEvent('domready', function() {
  $$('.formBtn').setStyle('display', 'block');
});

</script>
<?php
}
else
{
echo "NOT LOGGED!";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:07:09.067

您的脚本中有几个错误：

```
<script type="text/javascript">$(".formBtn").css("display", "box");</script> 
```

并且记住在按钮已经渲染**后使用它。**

# django - 如何（故意）使用 Django syncdb 跳过应用程序

> ID：14605873
> 
> 赞同：3
> 
> 时间：2013-01-30T14:04:05.303
> 
> 标签：django, django-models, django-south

我有几个 django 应用程序：

```
INSTALLED_APPS = (
    'geonode.exposure',
    'geonode.isc_viewer',
    'geonode.geodetic',
    'geonode.observations',
    'geonode.ged4gem', 
```

我需要管理所有这些，除了一个`syncdb`。我怎样才能`syncdb`故意跳过`geonode.exposure`申请？

**更新：** 我没有描述完整的配置，请允许我更详细地介绍：我正在使用 south 来管理除曝光之外的所有应用程序的数据库迁移和固定装置。曝光应用程序正在访问外部数据库并使用路由器来执行此操作（这就是我希望它被 syncdb 跳过的原因）。我的路由器设置如下所示：

```
class GedRouter(object):
    def db_for_read(self, model, **hints):
        "Point all operations on ged models to 'geddb'"
        if model._meta.app_label == 'exposure':
            return 'geddb'
        return 'default'

    def allow_syncdb(self, db, model):
        if db == 'geddb' or model._meta.app_label == "ged":
            return False # we're not using syncdb on our legacy database
        else: # but all other models/databases are fine
            return True 
```

南方不尊重allow_syncdb方法吗？是因为我没有迁移，所以在曝光应用程序上运行 syncbd 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:09:46.400

您可以`managed = False`在模型的`Meta`类中使用。这样，syncdb 不会创建应用程序的表。有关[文档](https://docs.djangoproject.com/en/dev/ref/models/options/#managed)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:10:41.270

有一个模型元选项“托管”，有关更多信息，请查看 django 文档：

[https://docs.djangoproject.com/en/dev/ref/models/options/#managed](https://docs.djangoproject.com/en/dev/ref/models/options/#managed)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T00:17:16.227

好的，这不是您直接要求的，但请考虑使用 South [http://south.aeracode.org](http://south.aeracode.org)

您可以决定哪些应用程序包含要迁移的模型版本等。听起来您需要一个解决方案。

# lucene - Lucene/检查查询

> ID：14605877
> 
> 赞同：0
> 
> 时间：2013-01-30T14:04:21.283
> 
> 标签：lucene, umbraco

我正在使用以下内容来运行 lucene 查询：

```
var searchCriteria = searcher.CreateSearchCriteria(BooleanOperation.Or);

var query = searchCriteria.GroupedOr(new string[] { "title", "Name" }, searchTerm).Compile(); 
```

如果 searchTerm = "供应商服务卡"

生成的查询=（标题：“服务？卡供应商”名称：“服务？卡供应商”）

为什么用“？”代替“For”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:38:17.297

“for”是Lucene的[StandardAnalyzer中的停用词（请参阅](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/standard/StandardAnalyzer.html#STOP_WORD_SET)[StopFilter](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/core/StopFilter.html)）。这是一个被认为足够常见的词，并且对于搜索毫无用处。我相信主要是一些连词、代词和介词。因此，它被排除在索引词和搜索查询之外。

这可以防止诸如“for”“the”“it”等词在大量无意义的比赛中对得分造成严重破坏。

# wpf - WPF DataGridCell IsReadOnly 通过 XAML 取决于属性

> ID：14605878
> 
> 赞同：0
> 
> 时间：2013-01-30T14:04:26.607
> 
> 标签：wpf, datagrid, readonly-attribute

我需要根据属性在 datagridCell 上设置 IsReadOnly 属性。

```
 <WPFCtrlDG:ExtDataGrid Grid.Row="2" 
                              InternalAddCommandHandling="False"
                              InternalDeleteCommandsHandling="False" 
                              ItemsSource="{Binding Path=Attributes, Mode=TwoWay}"
                              Command="{Binding Path=AttributesCommand}">
        <WPFCtrlDG:ExtDataGrid.Columns>
            <WPFCtrlDG:ExtDataGridTextColumn Header="Attribute" Tag="ID_ATTRIBUTE" Width="*" IsReadOnly="{Binding Path=FL_COMMON, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
            <WPFCtrlDG:ExtDataGridTextColumn Header="Value" Tag="ID_VALUE" Width="*" IsReadOnly="true"/>
        </WPFCtrlDG:ExtDataGrid.Columns>
    </WPFCtrlDG:ExtDataGrid>

public BindingList<SPC_SPL2_ATTRIBUTE> Attributes
    {
        get
        {
            if (Context.SPC_SPL2_ATTRIBUTE == null)
                Controller.Execute(delegate(IResult result)
                {
                    Dictionary<string, object> parameters = new Dictionary<string, object>();
                    parameters.Add("FL_ACTIVE", true);
                    parameters.Add("CD_SPL2", CurrentSPL2.CD_SPL2);

                    Model.Invalidate(typeof(SPC_SPL2_ATTRIBUTE), Filter.GENERIC<SPC_SPL2_ATTRIBUTE>(parameters, "ID_ATTRIBUTE"));
                    if (Model.Appendload(result) == false)
                        return false;

                    return result.Successful;
                });
            return Context.SPC_SPL2_ATTRIBUTE;
        }
        set { Context.SPC_SPL2_ATTRIBUTE = value; }
    } 
```

FL_COMMON 是一个布尔属性，位于数据网格中显示的对象内，但我编写的代码不起作用，而如果我将 IsreadOnly 设置为 true，它就可以工作。

我究竟做错了什么？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:25:26.873

你打电话给 OnPropertyChanged("FL_COMMON"); 在二传手？

包含 FL_COMMON 的类应实现 INotifyPropertyChanged，并且该属性应如下所示：

```
 private bool _FL_COMMON;
    public bool FL_COMMON
    {
        get { return _FL_COMMON; }
        set
        {
            _FL_COMMON = value;
            OnPropertyChanged("FL_COMMON");
        }
    } 
```

# c++ - 加密文本有人可以告诉我如何做到这一点吗？

> ID：14605880
> 
> 赞同：-3
> 
> 时间：2013-01-30T14:04:42.697
> 
> 标签：c++, visual-studio-2010

我编写了一个程序来读取和打印用户选择的文本文件。我现在希望程序加密文件中的文本，并让用户能够选择字母移位。有人可以告诉我怎么做吗？这是我到目前为止所拥有的：

```
#include <stdio.h>

int main(void) {
    FILE *file_in;
    char filename[20];
    char ch;
    int shift;
    // file_in is the name given to the stream. filename will be the file that the user chooses. ch is the characters in the file.

    printf("What file do you want to open?: ");
    gets(filename);
    file_in=fopen(filename, "r");
    //ask the user to enter the name of a file

    if(file_in==NULL)
        printf("Error! File did not open.\n");
    //print message if the file can not be found

    while((ch=fgetc(file_in)) != EOF) 
        putchar(ch);
        //prints the results on the screen and shows the end of the file
    fclose(file_in);
    //closes stream
}`enter code here` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:11:29.793

对于简单的字母移位，将移位存储为 an`char`并像从用户输入中读取文件名一样读取它。替换`putchar(ch);`为`putchar(ch+shift);`加密和`ch-shift`解密或 vv。`ch+shift`如果总和大于 a 的最大值，则会静默溢出`char`，从而保证每个字母`ch`都有一个“加密”对应。

# php - 添加斜杠不适用于 $_GET 单引号

> ID：14605885
> 
> 赞同：0
> 
> 时间：2013-01-30T14:05:02.010
> 
> 标签：php, mysqli, escaping

我在 GET 数组中遇到撇号问题。我似乎无法逃脱单引号。我已经在一天多的时间里浏览了类似的 SO 主题，但没有运气。我认为这可能与我与数据库的连接有关，就好像我制作了一个普通的未连接的 php 页面，addlashes 和 str_replace 都成功地转义了 GET 变量中的单引号（mysqli_real_escape_string 没有，因为没有数据库连接）。

PHP 5.2.17 Mysql 5.5.23 Magic_quotes 已关闭

连接：

```
DEFINE ('database', 'dbname');
DEFINE ('user', 'dbusername');
DEFINE ('pass', 'dbpassword');
DEFINE ('host', 'localhost');

$dbc = @mysqli_connect (host, user, pass, database) OR die ('Could not connect to database: ' . mysqli_connect_error() ); 
```

数据库似乎已连接，选择涉及没有单引号的 GET 变量的查询可以正常工作。但是，现在当传递包含单引号的 GET 时，我似乎无法逃脱它。

```
print_r($_GET);
echo "<br><br>";

$text = "O'Reilly";

echo "Normal variable called text: " . $text . "<br>
addslashes(): " . addslashes($text) . "<br>
mysqli_real_escape_string(): " . mysqli_real_escape_string($dbc, $text) . "<br>
str_replace(): " . str_replace("'", "\'", $text) . "<br>
<br>";

echo "_GET variable: " . $_GET['breed'] . "<br>
addslashes(): " . addslashes($_GET['breed']) . "<br>
mysqli_real_escape_string(): " . mysqli_real_escape_string($dbc, $_GET['breed']) . "<br>
str_replace(): " . str_replace("'", "\'", $_GET['breed']) . "<br>
<br>";

$_GET['breed'] = "O'Conner";

echo "_GET variable with new value: " . $_GET['breed'] . "<br>
addslashes(): " . addslashes($_GET['breed']) . "<br>
mysqli_real_escape_string(): " . mysqli_real_escape_string($dbc, $_GET['breed']) . "<br>
str_replace(): " . str_replace("'", "\'", $_GET['breed']) . "<br>
<br>"; 
```

给出：

```
Array ( [breed] => Cirneco dell'Etna )

Normal variable called text: O'Reilly
addslashes(): O\'Reilly
mysqli_real_escape_string(): O\'Reilly
str_replace(): O\'Reilly

_GET variable: Cirneco dell'Etna
addslashes(): Cirneco dell'Etna
mysqli_real_escape_string(): Cirneco dell'Etna
str_replace(): Cirneco dell'Etna

_GET variable with new value: O'Conner
addslashes(): O\'Conner
mysqli_real_escape_string(): O\'Conner
str_replace(): O\'Conner 
```

Cirneco dell'Etna 中的单引号绝对是单引号，而不是 ` 等。我还尝试了 urlencode() 和 urldecode() - 它用 + 替换了空格，但没有转义单引号。GET 需要单引号来创建用户友好的 URL——例如用户名和（在这种情况下）品种名称；Cirneco dell%39Etna 不直观。这根本不是一个复杂的网站，但由于所有权是网站的主要部分，单引号出现了很多，所以我想弄清楚发生了什么！

我曾尝试切换到 PDO，但发现它超出了我的范围 - 我是一名新手程序员，我在 PDO 上的尝试令人难以置信的故障排除 - 我无法判断 PDO 中的错误是我的拼写错误，还是同一问题的延续.

非常感谢。

编辑选择查询（对于没有单引号的 _GET 变量按预期工作）构造如下：

```
$q = "SELECT breed_name, breed_type from b_breed 
where breed_name = '" . $_GET['breed'] . "' 
LIMIT 1";

$result = mysqli_query($dbc,$q);

if($result->num_rows == 0)
    { 
    }
else
    { 
    $row_breed = mysqli_fetch_array($result, MYSQLI_ASSOC);
        {
        echo "<h1>" . $row_breed['breed_name'] . " - " . $row_breed['breed_type'] . "</h1>";
        }
    } 
```

我已经尝试在查询中使用 $_GET 包含添加斜杠、mysqli_real_escape_string 和 str_replace（不是同时），但没有效果。如果我回显 $q，则永远不会转义单引号。

从 b_breed 中选择品种名称、品种类型，其中品种名称 = 'Cirneco dell'Etna' LIMIT 1

奇怪的是，如果我切换双引号和单引号，那么我有：

```
$q = 'SELECT breed_name, breed_type from b_breed 
where breed_name = "' . $_GET['breed'] . '" 
LIMIT 1'; 
```

从 b_breed 中选择品种名称、品种类型，其中品种名称 = "Cirneco dell'Etna" 限制 1

它仍然在页面上不返回任何行，尽管回显的 $q 将在 PHPMyAdmin 中返回行。

编辑解决了！

它将数据库中的 ' 更改为 ASCII 字符。添加以下内容将其转换回 '，然后可以对其进行转义：

```
$_GET['breed'] = htmlspecialchars_decode($_GET['breed'], ENT_QUOTES); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:30:35.373

你可以检查你从 GET 中得到了什么

尝试

```
$string = $_GET['breed'];
for ($i=0;$i<strlen($string);$i++) {
    echo '<br>'.$string[$i].' : '.ord($string[$i]);
} 
```

# matlab - 避免matlab中的矩阵逆警告

> ID：14605888
> 
> 赞同：1
> 
> 时间：2013-01-30T14:05:04.087
> 
> 标签：matlab, matrix, matrix-inverse

我正在使用具有不同数据精度的 6x6 矩阵。当我尝试在 MATLAB 中反转该矩阵时，我通常会得到`Inf`或`NaN`作为所有数据，并且 MATLAB 会引发警告：

> 矩阵对于工作精度来说是奇异的。

有没有办法避免它并获得正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:14:25.633

您的矩阵似乎排名不足。只有满秩矩阵才能被稳健地反转。
您可以通过在原始单位矩阵中添加一个小的单位矩阵来规避您的问题。

```
 A = rand(6,5);
 A = A*A'; %' symmetric rank 5 matrix
 iA = inv(A); % results with NaNs and infs A is singular
 iAs = inv( A + eye(6)*1e-3 ); % add small (1e-3) elements to diagonal - this should help 
```

# javascript - 嵌入部分 Gist 文件

> ID：14605890
> 
> 赞同：5
> 
> 时间：2013-01-30T14:05:13.797
> 
> 标签：javascript, git, github, blogger, gist

我在[这里](https://gist.github.com/4672365)有一个要点设置。我使用以下代码将我的要点中的单个文件嵌入到网页中。

```
<script src="https://gist.github.com/4672365.js?file=1.java" type="text/javascript"></script> 
```

但我想要的是从 file 嵌入一行`1.java`。您可以说我只想将文件中的第 2 行嵌入`1.java`到我的网页中。提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T14:42:25.307

在我没有得到这个问题的有用答案后，我试着自己做一些 javascript 编码。我已经在[github](https://github.com/kashif-umair/gist-embed/blob/feature/show_single_line/gist-embed.js)上上传了该代码。此链接上的文件具有魔力。要将单行嵌入到您的网页中，您需要在`HEAD`标记中添加对我的 javascript 文件的引用。这是一个简单的代码。

```
<html>
  <head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" ></script>
    <script type="text/javascript" src="https://github.com/kashif-umair/gist-embed/raw/feature/show_single_line/gist-embed.js" ></script>
  </head>
  <body>
    <code id="gist-<YOUR_GIST_ID>" data-file="<YOUR_FILE_NAME_IN_GIST>" data-line="<LINE_NUMBER>"></code>
  </body>
</html> 
```

您需要`YOUR_GIST_ID`用 gist 的 ID、`YOUR_FILE_NAME_IN_GIST`要从中嵌入行的文件名以及要嵌入的`LINE_NUMBER`文件中的行号替换。

**注意**：

*   如果要嵌入单行，则文件名和行号都应出现在代码标记中。
*   如果你想从一个文件中嵌入多个选择性行，那么你应该放置一些值，比如 MS Word 页面范围进行打印。例如`data-line="1-4,10,12-15"`。请确保您使用正确的语法来放置这些值以避免得到奇怪的结果。
*   如果要嵌入整个文件，请从代码标记中删除数据行属性。

希望我对已经或将要面临这个问题的人有所帮助。

**由于我不断更改我的 javascript 文件，所以我认为每次都更新这个答案根本不是一个好主意。因此，从现在开始，我将更新 GitHub 存储库中的 README.md 文件。任何有问题的人都可以访问 github 阅读 README.md 文件。作为参考，我在此处添加了指向我的存储库的链接。**

**[https://github.com/kashif-umair/gist-embed](https://github.com/kashif-umair/gist-embed)**

**PS：**请查看我在 github 存储库中的 javascript 文件，并建议任何良好的编码实践。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-08T10:25:00.287

**正确**和最快的方法就是在 .js 地址后面加上`?file=file.name`:)

```
<script src="https://gist.github.com/kashif-umair/4672365.js?file=MyApplication.java"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:15:51.413

创建一个只包含您需要的行的要点。

# matlab - MATLAB 编辑器在使用 `matlab-emacs` 后不起作用

> ID：14605896
> 
> 赞同：2
> 
> 时间：2013-01-30T14:05:42.627
> 
> 标签：matlab, emacs

我的 MATLAB 编辑器停止工作。我无法通过 UI 或命令 ( `edit file.m`) 打开任何文件。这一切都始于我使用`matlab-emacs`.

我找到了打开文件的解决方法，但这很烦人。首先，我需要在要打开的文件中用鼠标右键单击。然后，我选择`Compare against > Choose`. 单击左侧面板中的行号之一打开 MATLAB 编辑器。进入编辑器后，我可以通过选择打开任何其他文件`File > Open as Text...`。我也尝试重新安装 MATLAB，但问题仍然存在。

我正在使用 MATLAB R2011a 和 Ubuntu 11.10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:05:42.627

我花了很多时间重新安装它，但它要简单得多。

1.  选择`File > Preferences...`
2.  在`Editor/Debugger`中，我的编辑器被设置为空白`Text editor`，而不是`MATLAB Editor`.
3.  只需选择`MATLAB Editor`单选按钮。

![MATLAB 编辑器](../Images/315c24973836dc459af740c14c6d6f70.png)

`matlab-emacs`扩展可能改变了我的设置。

# java - 如何为Android库项目指定多个源目录

> ID：14605899
> 
> 赞同：3
> 
> 时间：2013-01-30T14:05:52.187
> 
> 标签：java, android, ant, jar, compilation

我正在使用ant工具构建android库项目，我需要指定多个源目录。

我试图通过在 ant.properties 文件中交替添加这些行来指定多个源目录

```
source.dir=src:src2    
source.dir=src;src2 
```

但是在这两种情况下都无法构建，在这两种情况下都生成了**.class**，但是在创建 jar 文件时我得到了这个错误

`BUILD FAILED`

`C:\Program Files\Android\android-sdk\tools\ant\build.xml:681: The following error occurred while executing this line:`

`C:\Program Files\Android\android-sdk\tools\ant\build.xml:749:`

`C:\workarea\Android\Packages\test\src;src2 does not exist.`

谁能告诉我如何在**ant.properties中指定****多个源目录** 来构建**Android 库项目**？

 ***** * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-24T15:38:48.953

在不修改 SDK 文件的情况下，这对我有用：

蚂蚁属性：

```
source.absolute.dir = tmp-src 
```

custom_rules.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="CustomRules">
    <target name="-pre-build" >
        <copy todir="tmp-src" >
            <fileset dir="src" includes="**" />
            <fileset dir="src-1" includes="**" />
            <fileset dir="src-2" includes="**" />
            <fileset dir="src-3" includes="**" />
            <fileset dir="src-4" includes="**" />
        </copy>
    </target>

    <target name="-post-build" >
        <delete dir="tmp-src" />
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-09T07:54:44.053

我以一种棘手的方式解决了这个问题；这里是

要在具有多个源目录的 android 中构建 library-project，首先转到**ant.properties**文件（对于 linux，它是**build.properties**）并添加**source.dir**

```
 source.dir=first_source_dir ;second_source_dir ; third_source_dir 
```

对于 lib 项目，**ant从****ant.properties**或**build.properties**文件中指定的out.dir**目录的****bin/classes**目录创建带有编译的**.class**文件 的**jar**库；

 ******在创建 **jar**时，**ant会从****jar**中删除所有**.java**源文件，如果 coder 将任何**.java**源文件保存在**out.dir**目录中，则这些源文件可能包含在**jar中，并在****source.dir**中指定该目录；

 ******现在要删除那些**.java**源**蚂蚁**，请使用以下命令转到**source.dir目录**

```
 <property name="source.absolute.dir" location="${source.dir}" />
        dir="${source.absolute.dir}" 
```

使用此命令，**蚂蚁**实际上试图进入目录

```
cd   <your_project_root_dir>/first_source_dir ;second_source_dir ; third_source_dir 
```

这不存在...

**解决方案：**

步骤 1\. 首先确保您的**源目录**(source.dir) 和**构建目录**(out.dir) 不同；

步骤 2\. 去 C:\Program Files\Android\android-sdk\tools\ant 打开**build.xml** 然后去**jar**标签

```
 <jar destfile="${out.library.jar.file}">                        
       <fileset dir="${out.classes.absolute.dir}"
         includes="**/*.class"
         excludes="${project.app.package.path}/R.class ${project.app.package.path}/R$*.class ${project.app.package.path}/Manifest.class ${project.app.package.path}/Manifest$*.class ${project.app.package.path}/BuildConfig.class"/>
       <fileset dir="${source.absolute.dir}" excludes="**/*.java ${android.package.excludes}" />
   </jar> 
```

现在注释或删除**jar**标记中的最后一个**文件集**标记

 **```
 <jar destfile="${out.library.jar.file}">                        
       <fileset dir="${out.classes.absolute.dir}"
            includes="**/*.class"
            excludes="${project.app.package.path}/R.class ${project.app.package.path}/R$*.class ${project.app.package.path}/Manifest.class ${project.app.package.path}/Manifest$*.class ${project.app.package.path}/BuildConfig.class"/>
       <!--fileset dir="${source.absolute.dir}" excludes="**/*.java ${android.package.excludes}" /-->
    </jar> 
```

现在构建你的项目；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-10T22:17:04.443

1.  在您的项目目录中创建一个目录（比如 build_src）。
2.  进入那个目录（cd build_src）
3.  在 build_src 中创建指向要包含的所有源目录的软链接（ln -s TARGET linkname），例如：如果您的原始问题是包含 src1、src2 和标准 src 目录，则创建指向 build_src 下的 src1、src2 软链接
4.  使用 source.dir=build_src 创建 ant.properties

这对我来说很好，我认为这是最干净的方法（而且因为这些是实际源的软链接，所以你没有源的多个副本）

1.  我的一个项目有 .aidl 文件并且 AIDL 抱怨。我没有创建指向 src 的软链接，而是创建了指向 src/com 的软链接并修复了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T06:48:19.300

至少在更高版本的构建工具中，问题在于放入此属性的值被传递到`<property name="source.absolute.dirs" location="source.dirs"/>`. 该`location`属性不知道如何处理冒号/分号分隔的路径。

修复非常简单，只需使用：

```
source.absolute.dirs=src1:src2:src3 
```

等，而不是：

```
source.dirs=src1:src2:src3 
```******************

# asp.net - 我的网站需要很长时间才能加载，我可以做些什么来调查这个问题？

> ID：14605901
> 
> 赞同：3
> 
> 时间：2013-01-30T14:05:59.367
> 
> 标签：asp.net, iis-7, umbraco

我的网站是 ASP.NET、C#、.net 4，使用 Umbraco 4、IIS 7.5 几个月来一直运行良好，但突然间，加载单个页面需要很长时间，而且大多数情况下根本不加载。

数据库看起来不错，

我已经重新启动了网站，

回收APP池，

查看日志，它看起来像乱码

有没有人对我如何进一步调查有任何想法。不，我不是要您修复我的网站或告诉我为什么它无法正常工作，我只是想知道调查问题的其他方法，以便深入了解问题。

IIS 日志：

[http://pastebin.com/msjzty7m](http://pastebin.com/msjzty7m)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:10:55.323

我有几个建议：

1.  设置 ELMAH 错误日志并查看是否有一些未处理的异常。
2.  设置迷你分析器，也许它是一个新添加的脚本中的瓶颈。
3.  使用 google PageSpeed Insights 分析您的网页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:09:28.780

使用[Google Pagespeed Insights](https://developers.google.com/speed/pagespeed/insights)查看问题可能出在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:16:17.063

我的第一个猜测是这实际上是一个数据问题。并不是说获取数据需要很长时间，而是处理它。我现在有几次页面大约 138Kb，但在渲染之前花了 3 秒多的时间等待页面。基本上这是因为它正在运行一个 3 层中继器（中继器内中继器内中继器）来创建菜单系统。因此，即使站点不大，在发送之前处理此菜单也需要时间。

我的建议是注释掉您在此日期之前添加的任何新内容，然后慢慢将内容重新添加，直到找到问题部分。之后，您可以查看缓存。如果它是一个模块（.ascx），请使用@Output [Caching](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)，这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:36:09.233

这根本没有加载...在线工具无济于事，您需要调查服务器上发生的情况。

用于此的工具是来自 sysinternals 的[进程浏览](http://technet.microsoft.com/en-us/sysinternals/bb896653)器，用于查看服务器运行缓慢的原因，然后自动运行以查看您在[不知情](http://technet.microsoft.com/en-us/sysinternals/bb897437)的情况下加载的内容并降低系统速度，以及[tcpView](http://technet.microsoft.com/en-us/sysinternals/bb963902)以查看谁连接到您的服务器。

# sharepoint - 可以在 Visual Web 部件中显示 Sharepoint 的登录控件吗？

> ID：14605903
> 
> 赞同：0
> 
> 时间：2013-01-30T14:06:03.990
> 
> 标签：sharepoint, sharepoint-2010

是否可以`Login Control`在 Visual Web 部件中显示 Sharepoint？

我的要求：

我必须隐藏完整的功能区，但登录应该是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:58:32.027

尝试使用 #s4-ribbonrow { display: none; 对所有用户完全隐藏功能区 一直在母版页中，并使用下一个 URL 在 Web 部件或自定义用户控件中添加链接：

htt*://testsite.dev/_layouts/Authenticate.aspx?Source=%2FSitePages%2FHome.aspx。

此链接将提示登录窗口。

一旦用户登录 -> 他将被重定向到链接 URL 中指定的“/SitePages/Home.aspx”

# wix - 包括来自父文件夹的文件

> ID：14605906
> 
> 赞同：0
> 
> 时间：2013-01-30T14:06:07.350
> 
> 标签：wix, wix3.5, wix3

我有一个设置文件夹，为了组织起见，我将所有内容都放在文件夹中。我注意到当我在子文件夹中有一个 wxs 文件并且我包含一个位于根文件夹中的 wxi 文件时，我收到有关无法找到的属性的错误（因为它们在 wxi 文件中定义）。

是否可以将位于根文件夹中的 wxi 文件包含到子文件夹中的 wxs 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:10:59.067

我在每个 wxs 文件的顶部都有一个文件夹，仅用于包含和引用，如下所示：

```
<?include $(sys.CURRENTDIR)Includes\Includes.wxi?> 
```

将文件夹的名称更改为您自己的名称和您的 wxi 文件的名称，那应该是您...:)

# c# - 为什么我在使用消息安全性时会获得 WindowsIdentity？

> ID：14605907
> 
> 赞同：1
> 
> 时间：2013-01-30T14:06:10.457
> 
> 标签：c#, .net, wcf, security, windows-identity

从无安全性切换到证书时，我在`IAuthorizationPolicy.Evaluate (evaluationContext.Properties.TryGetValue("Identities", out obj)`? 这是设计使然：

由此 ：

```
<binding name="NetTcpBinding_IMyAppClientServiceRegular" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
          <security mode="None">
            <transport clientCredentialType="None"/>
          </security>
        </binding> 
```

对此：

```
<binding name="netTcpCertificate" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="1000" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="200" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
          <security>
            <message clientCredentialType="Certificate"/>
          </security>
        </binding> 
```

有什么方法可以避免在 IAuthorizationPolicy.Evaluate 中获取 WindowsIdentity？我只希望在使用此绑定时设置 WindowsIdentity ：

```
<binding name="NetTcpBinding_IMyAppClientServiceWindows" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
          <security mode="Message">
            <message clientCredentialType="Windows"/>
          </security> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:06:03.020

~~我注意到您没有`<security>`在 netTcpCertificate 配置中设置模式，而不是您可能想要的：`<security mode="Message">`. 通过不设置该`mode`属性，WCF 将使用[默认值](http://msdn.microsoft.com/en-us/library/ms731316.aspx)of`Transport`而不是`Message`您可能想要的证书凭据。当模式设置为传输时，WCF 可能正在传递 Windows 标识，但我没有尝试验证它。~~

更新：根据下面的评论，您应该确保*客户端*配置文件端点>indentity>dns>value 与**服务器**证书`CN=`值的名称匹配。根据您输入的内容，此值需要为 MyAppServer。

# php - Symfony2 路由：如何请求仅从一个模板中获取路由

> ID：14605910
> 
> 赞同：0
> 
> 时间：2013-01-30T14:06:22.803
> 
> 标签：php, symfony, twig, routes

我的基本模板中有一个嵌入式控制器。这是一个搜索栏。对于搜索栏控制器，我有一条路线“myProject/search”。

我想要的是只有当我嵌入控制器的模板（base.html.twig）调用它时才会采用这条路线，而不是当我手动放入浏览器时：“myproject/search”。

关于如何做到这一点的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:37:19.590

我认为，因为有些时候你不能这样做：

[http://symfony.com/doc/current/book/templating.html#embedding-controllers](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

从文档中引用：

> 即使这个控制器只在内部使用，你也需要创建一个指向控制器的路由
> 
> (...)
> 
> 从 Symfony 2.0.20/2.1.5 开始，Twig 渲染标签现在采用绝对 url 而不是控制器逻辑路径。这修复了官方博客上报告的一个重要安全问题 (CVE-2012-6431)。如果您的应用程序使用旧版本的 Symfony 或仍然使用以前的渲染标签语法，您应该尽快升级。

无论如何，我想，当您从模板中调用它时，您可以通过将一些“秘密”参数传递给搜索操作来尝试自己做。接下来在动作中检查参数是否传递给它，如果没有，则抛出 404。

实现目标的另一种方法是使用 .htaccess 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T14:10:47.493

`_method`您可以通过配置中的选项将路由限制为特定方法`routing`：

```
your_rote:
    pattern: /myProject/search
    defaults: { _controller: YourBundle:YourController:YourAction }
    requirements:
        _method: POST 
```

# java - Android Java - 创建一个 Cronjob

> ID：14605912
> 
> 赞同：4
> 
> 时间：2013-01-30T14:06:25.513
> 
> 标签：java, android, cron

我想制作一个在后端工作的“Cronjob”，并开始所有 30 分钟的方法。如果函数返回真（或其他）“Cronjob”创建状态栏通知。

这在Android中可能吗？如果是，使用哪个功能？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T14:08:22.370

Android [AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)是您正在寻找的类。它可以触发一个意图以设定的时间间隔发送到您的应用程序，以便您可以运行任何您想要的任务。

# opengl - 使用 GLFW 渲染带纹理的点精灵

> ID：14605913
> 
> 赞同：2
> 
> 时间：2013-01-30T14:06:29.090
> 
> 标签：opengl, shader, point-sprites

我目前正在渲染一堆我想使用点精灵应用纹理的点。要加载我的纹理，我正在使用 GLFW。我按照 OpenGL 超级圣经章节中的说明进行操作，但是当我尝试在片段着色器中应用纹理时，它不起作用。

这是我的一些代码片段：

```
//Variables
GLuint starTBO;
GLuint location_texture = 0;

// Set location (in main function)
glUseProgram(shader_program2);
location_texture = glGetUniformLocation(shader_program2, "sprite_texture");
glUseProgram(0);

// Set Texture (in main function)
glGenTextures(1, &starTBO);
glBindTexture(GL_TEXTURE_2D, starTBO);
if(glfwLoadTexture2D("stone.tga", GLFW_BUILD_MIPMAPS_BIT))
{
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
}
glEnable(GL_TEXTURE_2D);

// in display method
glUseProgram(shader_program2);
glActiveTexture(GL_TEXTURE0 + 0);
glUniform1i(location_texture, 0);
...

// Fragment shader
const GLchar *fragment_shader2 =
"#version 330\n"
"out vec4 out_color;"
""
"uniform sampler2D sprite_texture;"
""
"void main()"
"{" 
"   out_color = texture(sprite_texture, gl_PointCoord) + vec4(1.0, 0.0, 0.0, 1.0);"
"}" 
```

在我的 initGL 方法中启用了 Point Sprite 模式。纹理不适用于点的原因可能是什么？

编辑：我插入了一个 if 语句来查看对 glfwLoadTexture2D 的调用是否正常工作，实际上不是。什么可能导致这失败？我尝试使用相对路径和真实路径作为参数，但仍然没有变化。我也尝试使用不同的 .tga 图片。任何人，仍然没有弄清楚为什么它不起作用？

编辑2：可能是freeglut和glfw不能一起工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:56:04.440

尝试`glActiveTexture(GL_TEXTURE0 + 0)`在你的`glUniform1i()`电话之前折腾。

# python - 龙卷风，在回调函数中访问其他数据？

> ID：14605915
> 
> 赞同：1
> 
> 时间：2013-01-30T14:06:32.840
> 
> 标签：python, mongodb, tornado, asyncmongo

我刚刚开始了一个使用 Tornado 和 asyncmongo 的项目。

我有一个带有异步方法的处理程序。在里面我正在向 mongo 查询一些单词：

```
@tornado.web.asynchronous
def get(self):
    word = self.get_argument('word', None)
    if not word:
        self.write('{}')
        self.finish()
    self.db.spanish_dict.find({'$or': [{'word': word}, {'stem': word}]},
                              callback=self._on_response)

def _on_response(self, response, error):
   # need to sort response by relevancy 
```

在我的回调方法中，我需要原始单词来准确地对 mongo 结果进行排序。

我发现[这篇](https://stackoverflow.com/questions/6117920/tornado-asynchttpclient-fetch-callback-extra-parameters)文章用于`functools.partial`完成此任务，允许我将其他参数传递给回调方法

**`get`我想知道在方法中设置实例属性并在其中访问它是否有任何不利影响`_on_response`？**谢谢你

```
@tornado.web.asynchronous
def get(self):
    word = self.get_argument('word', None)
    if not word:
        self.write('{}')
        self.finish()
    self.word = word
    self.db.spanish_dict.find({'$or': [{'word': word}, {'stem': word}]},
                              callback=self._on_response)

def _on_response(self, response, error):
   # need to sort response by relevancy
   # will self.word always be accurate?
   self.word 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:02:59.950

使用 tornado.gen，您可以完全回避问题

[http://www.tornadoweb.org/documentation/gen.html?highlight=tornado.gen#tornado.gen](http://www.tornadoweb.org/documentation/gen.html?highlight=tornado.gen#tornado.gen)

# python - 删除值中的“：”

> ID：14605920
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:06:46.143
> 
> 标签：python, string, list

我有这个价值：

```
y = c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c 
```

我想删除所有的 ':' 字符。我尝试了不同的方法，例如列表，但没有成功。

有人可以帮我吗？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T14:08:00.000

只需使用[`y.replace(':', '')`](http://docs.python.org/2/library/stdtypes.html#str.replace)：

```
In [13]: y = 'c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c'

In [14]: y.replace(':', '')
Out[14]: 'c0ad0c5af4428941c56cd7488b91a2f6349c' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:15:17.187

我会使用[`str.translate`](http://docs.python.org/2/library/string.html#string.translate)：

```
y = "c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c"
y.translate(None,':') 
```

它很快 ：-）

```
>>> import timeit
>>> def replace(x):
...     return x.replace(":","")
... 
>>> def translate(x):
...     return x.translate(None,':')
... 
>>> y = "c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c"
>>> replace(y) == translate(y)
True
>>> timeit.timeit('replace(y)','from __main__ import replace,y')
1.3739330768585205
>>> timeit.timeit('translate(y)','from __main__ import translate,y')
0.9205348491668701 
```

它还可以扩展以允许删除*多个*字符，但它不执行子字符串。例如，您可以删除带有 的单词`str.replace`，但不能轻松/有效地删除`'x'`or`'y'`或`'z'`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:14:08.543

您可以尝试拆分和重新加入字符串。此外，还有一些使用正则表达式的方法，但这可能是矫枉过正。

```
y = "c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c"

print("".join(y.split(sep=":"))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:10:56.483

我不是 python 人，但我会使用 replace()。 [http://www.tutorialspoint.com/python/string_replace.htm](http://www.tutorialspoint.com/python/string_replace.htm)

```
y = "c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c";
y.replace(":",""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T14:13:29.147

那么为何不

```
print ''.join([x for x in y if x!=":"]) 
```

不同方法的不同解决方案。也许这个解决方案可以做一些其他没有问题的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T14:10:04.450

[使用string.split](http://docs.python.org/2/library/stdtypes.html#str.split)和[string.join](http://docs.python.org/2/library/stdtypes.html#str.join)执行此操作的另一种可能性（以防万一您需要原始值中的值列表）是：

```
y = c0:ad:0c:5a:f4:42:89:41:c5:6c:d7:48:8b:91:a2:f6:34:9c
y = ''.join(y.split(':')) 
```

# mysql - 在没有 PHP 的 MYSQL 上将表字段更新为其值加上一个常量

> ID：14605924
> 
> 赞同：5
> 
> 时间：2013-01-30T14:06:56.943
> 
> 标签：mysql, sql, sql-update, sum

我想执行一个`UPDATE`输入`MYSQL`字段值，添加一个常量并将新值保存在同一字段中的操作。

假设我们在名为`OldValue`的表中有一个名为 的列`aTable`。

伪代码可能是：

```
UPDATE aTable SET OldValue = OldValue + 220 WHERE someField = someValue 
```

你知道我该怎么做吗？我想在不`php`编写脚本的情况下使用单个查询（在某些管理面板上）。（当然，在那种情况下，答案很简单。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:18:21.583

您的代码将起作用。

[看到它在 SQLFiddle 中工作](http://www.sqlfiddle.com/#!2/9a26b/1)。

我逐字使用了您的确切查询，除了用实际值替换“someValue”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-31T18:35:32.817

这是一个使用原始问题本身的伪代码的工作示例。

```
UPDATE `table1` SET `field1` = `field1` - 18, `field2` = `field2` + 16 WHERE n_id IN (111,222,333) OR form IN ('Digital Editing','Studio Room') AND location_id LIKE ('%home-page10%') 
```

# javascript - 将多个参数传递给 ng-click 方法

> ID：14605926
> 
> 赞同：25
> 
> 时间：2013-01-30T14:06:59.367
> 
> 标签：javascript, angularjs

在我的代码中，我喜欢将参数传递给 ng-click 属性中指定的函数。

```
<div class="shout" ng-repeat="user in users">
 <p>{{user.name}}</p>
 <img src="media/images/delete.png" ng-click="deleteUser({{$index}},{{user._id}})"/>
</div> 
```

并在控制器中

```
function deleteUser(index, userId){...} 
```

参数 index 是从 $scope.user 和 user._id 中删除用户，从 mongodb 中删除它。我是 Angular js 的新手。

当我这样尝试时， deleteUser 没有被调用。如果我传递单个参数，它就像魅力一样，但是当我传递的不仅仅是它不起作用

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-30T14:33:32.303

`{{ }}`在为事件处理程序 ( ) 指定参数时，您不需要`ng-click`。正确的语法是`ng-click="deleteUser($index, user._id)`：

```
<div class="shout" ng-repeat="user in users">
 <p>{{user.name}}</p>
 <img src="media/images/delete.png" ng-click="deleteUser($index, user._id)"/>
</div> 
```

这是一个基于您提供的代码的工作 plunker（检查控制台以查看单击处理程序是否正常工作）：[http ://plnkr.co/edit/26A4Rj0FScPXYU7z92E6?p=preview](http://plnkr.co/edit/26A4Rj0FScPXYU7z92E6?p=preview)

# php - 更新：XML 解析错误：文档元素后出现垃圾 位置：PHP

> ID：14605927
> 
> 赞同：0
> 
> 时间：2013-01-30T14:07:00.713
> 
> 标签：php, xml-parsing

我收到一个错误。XML 解析错误：文档元素 Locationhttp://localhost/fcdemo/get-data.php?year=2012 第 2 行第 1 列后出现垃圾

```
Undefined index: type in C:\EasyPHP-12.1\www\fcdemo\get-data.php on line 3.
Undefined index: month in C:\EasyPHP-12.1\www\fcdemo\get-data.php on line 5.
Undefined index: day in C:\EasyPHP-12.1\www\fcdemo\get-data.php on line 6. 
```

我在看第 3、5 和 6 行仍然无法弄清楚。

这是我的代码。

```
 <?php
    //Sanitizing the input
    $Type   = $_GET['type'];
    $Year   = intval($_GET['year']);
    $Month  = intval($_GET['month']);
    $Day    = intval($_GET['day']);

    //Months Names
    $MonthsNames = array(null, 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');

    //Prepare variables according to type-of-chart
    switch($Type)
    {
        default:
        case 'monthly':
            $Query = "SELECT MONTH(Time) AS Value, COUNT(*) AS Total FROM `users` WHERE YEAR(Time)={$Year} GROUP BY Value";
            $ResultArray = array_fill(1, 12, 0); // fill the Result array with 0 values for each month
            $ChartHeading = 'Monthly New Users for the Year: '.$Year;
            $XaxisName = 'Months';
            break;

        case 'daily':
            $Query = "SELECT DAY(Time) AS Value, count(*) AS Total FROM `users` WHERE YEAR(Time)={$Year} AND MONTH(Time)={$Month} GROUP BY Value";
            $ResultArray = array_fill(1, 31, 0);  // fill the Result array with 0 values for each day
            $ChartHeading = 'Daily New Users for the Month: '.$MonthsNames[$Month].'/'.$Year;
            $XaxisName = 'Days';
            break;

        case 'hourly':
            $Query = "select HOUR(Time) AS Value, count(*) AS Total FROM `users` WHERE YEAR(Time)={$Year} AND MONTH(Time)={$Month} AND DAY(Time)={$Day} GROUP BY Value";
            $ResultArray = array_fill(0, 24, 0);   // fill the Result array with 0 values for each hour
            $ChartHeading = 'Hourly New Users for the Date: '.$Day.'/'.$MonthsNames[$Month].'/'.$Year;
            $XaxisName = 'Hours';
            break;
    }

    //Connect to database
    require 'connect-to-database.php';

    //Query the database
    $QueryResult = mysql_query($Query);

    //Fetch results in the Result Array
    while($Row = mysql_fetch_assoc($QueryResult))
        $ResultArray[$Row['Value']]=$Row['Total'];

    //Generate Chart XML: Head Part
    $Output = '<chart caption="'.$ChartHeading.'" xAxisName="'.$XaxisName.'" yAxisName="Users" showNames="1" bgColor="E6E6E6,F0F0F0" bgAlpha="100,50" bgRatio="50,100" bgAngle="270" showBorder="1" borderColor="AAAAAA" baseFontSize="12">';

    //Generate Chart XML: Main Body
    switch($Type)
    {
        default:
        case 'monthly':
            foreach($ResultArray as $MonthNumber => $value)  // MonthNumber is month number (1-12)
                $Output .= '<set value="'.$value.'" name="'.$MonthsNames[$MonthNumber].'" link="newchart-xmlurl-get-data.php?type=daily&amp;year='.$Year.'&amp;month='.$MonthNumber.'"/>';
            break;
        case 'daily':
            foreach($ResultArray as $DayNumber => $value)  // DayNumber is day (1-31)
                $Output .= '<set value="'.$value.'" name="'.$DayNumber.'" link="newchart-xmlurl-get-data.php?type=hourly&amp;year='.$Year.'&amp;month='.$Month.'&amp;day='.$key.'"/>';
            break;
        case 'hourly':
            foreach($ResultArray as $HourNumber => $value)  // HourNumber is hour (0-23)
                $Output .= '<set value="'.$value.'" name="'.$HourNumber.'"/>';
            break;
    }

    //Generate Chart XML: Last Part
    $Output .= '</chart>';

    //Set the output header to XML
    header('Content-type: text/xml');

    //Send output
    echo $Output;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:45:00.260

已解决 谢谢

我将其更改为： 更改为：

```
$Month = (isset($_GET['month']) && is_numeric($_GET['month']))?$_GET['month']:date("n");
$Year = (isset($_GET['year']) && is_numeric($_GET['year']))?$_GET['year']:date("Y");
$Day = (isset($_GET['day']) && is_numeric($_GET['day']))?$_GET['day']:date("d");
$Type   = (isset($_GET['type']) ? $_GET['type'] : NULL); 
```

# scala - 是否可以使用宏来简化 Scala 方法参数声明？

> ID：14605929
> 
> 赞同：1
> 
> 时间：2013-01-30T14:07:01.893
> 
> 标签：scala, macros, scala-2.10

方法通常用明显的参数名称声明，例如

```
def myMethod(s: String, image: BufferedImage, mesh: Mesh) { ... } 
```

参数名称对应于参数类型。

1) "s" 常用于String

2) "i" 表示 Int

3) 一个单词命名类的小写类名（Mesh -> mesh）

4) 长类名的类名最后一个单词小写（BufferedImage -> image）

（当然，所有的方法和参数都不方便。当然，有人会更喜欢其他规则……）

Scala 宏旨在在代码中生成一些表达式。我想编写一些特定的宏来转换为正确的 Scala 表达式，如下所示：

```
// "arguments interpolation" style
// like string interpolation
def myMethod s[String, BufferedImage, Mesh] 
{ /* code using vars "s", "image", "mesh" */ }

// or even better:
mydef myMethod[String, BufferedImage, Mesh] 
{ /* code using vars "s", "image", "mesh" */ } 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:20:33.590

除了“为什么”（不是真的，你为什么要这样做？），答案是否定的，因为据我所知，宏不能（在当前状态下）生成方法或类型，只能生成表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:32:19.440

目前这是不可能的，而且可能永远不会。宏不能引入自己的语法——它们必须通过有效的 Scala 代码（可以在编译时执行）来表示，而且它们还必须生成有效的 Scala 代码（最好是有效的 Scala AST）。

您显示的两个示例都不是有效的 Scala 代码，因此宏无法处理它们。尽管如此，[Macro Paradise](http://scalamacros.org/news/2012/12/18/macro-paradise.html)的当前夜间版本包括无类型的宏。它们允许编写扩展后进行类型检查的 Scala 代码，这意味着可以编写：

```
forM({i = 0; i < 10; i += 1}) {
  println(i)
} 
```

请注意，第一个参数列表中的花括号是必需的，因为尽管在编写代码时未对代码进行类型检查，但它必须表示有效的 Scala AST。

该宏的实现如下所示：

```
def forM(header: _)(body: _) = macro __forM

def __forM(c: Context)(header: c.Tree)(body: c.Tree): c.Tree = {
  import c.universe._
  header match {
    case Block(
      List(
        Assign(Ident(TermName(name)), Literal(Constant(start))),
        Apply(Select(Ident(TermName(name2)), TermName(comparison)), List(Literal(Constant(end))))
      ),
      Apply(Select(Ident(TermName(name3)), TermName(incrementation)), List(Literal(Constant(inc))))
    ) =>

    // here one can generate the behavior of the loop
    // but omit full implementation for clarity now ...

  }
} 
```

宏只需要一个树，而不是已经过类型检查的表达式，它在扩展之后进行类型检查。方法调用本身需要两个参数列表，如果使用下划线，则其参数类型可以在扩展阶段之后延迟。

目前有一些可用的[文档](http://docs.scala-lang.org/overviews/macros/overview.html)，但由于它是非常测试版，未来很多事情可能会发生变化。

使用类型宏可以编写如下内容：

```
object O extends M {
  // traverse the body of O to find what you want
}

type M(x: _) = macro __M

def __M(c: Context)(x: c.Tree): c.Tree = {
  // omit full implementation for clarity ...
} 
```

这很好，可以延迟整个身体的类型检查，因为它可以冷却东西......

* * *

目前还没有计划可以更改 Scalas 语法的宏，并且可能不是一个好主意。我不能说它们是否会在某一天发生，只有未来才能告诉我们这一点。

# php - 内容数据库 - 可以存储 HTML？

> ID：14605935
> 
> 赞同：19
> 
> 时间：2013-01-30T14:07:32.727
> 
> 标签：php, html, database, security

基本问题是 - 如果我限制谁可以提交给它，将 HTML 存储在数据库中是否安全？

我有一个非常简单的问题。我提供视频教程和其他内容。无需花费数月时间编写适当的 BBCode 解析器，我就需要存储 HTML，以便在从数据库中获取它时让它看起来完全符合我的要求。

基本上，我计划将有关教程系列和每一集的所有信息存储在数据库中。我想对两者的描述进行一些格式化，这样我就可以添加多个段落、有序和无序列表、所需资源的链接等等。

我正在使用 PHP 并创建自己的数据库。我现在正在使用 phpMyAdmin 将信息存储在表中。当我在 PHP 代码中提取信息时，我将使用具有只读权限的用户。

做这个的最好方式是什么？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T14:31:44.880

就像其他人指出的那样，在数据库中*存储*HTML 并没有什么危险。但是当您显示它时，您需要知道 HTML 是安全的。看到你是唯一一个编辑 HTML 的人，我认为没有问题。

但是，我根本不会存储 HTML。如果您只需要标题、段落、列表、链接、图像等，我会说 Markdown 非常适合。Markdown 的好处是它看起来就像普通文本（即您可以将您的文章作为电子邮件发送或将它们保存为 txt 文档），它占用的空间*比*HTML 少得多*，而且*您不必更改它一旦 HTML 得到更新。

[http://michelf.ca/projects/php-markdown/](http://michelf.ca/projects/php-markdown/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T14:15:40.327

存储 HTML 代码很好。但如果它不是来自受信任的来源，您需要检查它并只允许一个安全的标记子集。HTML Tidy 库将帮助您。

此外，您需要考虑网站设计的未来变化，所以不要使用太多标记，只使用基本标签。为了让它看起来像你想要的，在标记中使用全局 CSS 规则和语义命名的类。

但更好的是使用 Markdown 或其他类似 wiki 的语法。Markdown 有很好的 JS 编辑器，可以实时预览（就像 Stackowerflow 上的那个），你可以完全避免使用 HTML。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T14:16:36.407

从安全的角度来看，将您的 HTML 存储在数据库中并不比将其存储在其他任何地方更安全 - 如果您是该 HTML 的唯一作者。但是话又说回来，如果其他人可以在您的网站中创作 HTML，那么您将它存储在哪里并不重要 - 只有您如何清理它以及如何以及在何处显示它。

现在它是否是一种有效的方式来存储 HTML 是完全不同的事情。如果我是你，我会使用一些不错的模板系统并将 HTML 存储在文件中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-11T15:57:13.167

我对“我应该将 html 存储在数据库中”的最初回答通常是否定的。当然，如果您知道自己要存储什么，那肯定是安全的，但是当您只问这个问题时，您真的在考虑最佳实践吗？真正的答案是“视情况而定”。

我确信有像 Wordpress 这样将 html 存储在数据库中的东西，但是，作为一名专业的网站设计师，我喜欢记住关注点分离原则。在移动应用程序的数据库中存储 html 的可重用性如何？您的后端现在负责显示和数据吗？您是否有许多前端实现的可能性，或者您现在是否坚持后端描绘的任何内容，如果您希望它具有不同的颜色并且您在 ul 中堆叠 ul 中的 ul 怎么办？现在的 css 样式有多容易？更改或更新该 html 有多容易？

我可能是错的，但即使是 Sitecore 和 Kentico 也可能将 html 模板存储在数据库中的某个地方，但与该 html 模板关联的数据是一个模型，而不是直接在 html 模板上。

因此，当您考虑这个问题时，您可能希望将模型存储在一个地方，将模板存储在另一个地方，这样当您说“嘿，让我们构建一个移动应用程序”时，您可以获取数据并继续，而不是创建另一个表来存储相同的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-12T09:52:18.243

将文本数据存储在 Mongodb gridFS +[压缩](https://stackoverflow.com/questions/18014541/store-mongodb-data-in-compressed-format)中并使用 mongodump 进行日常备份，我犯了一个非常大的错误。GridFS 是 1GB 的文本文件，但由于备份的制作方式，备份内存使用量有时会在一个月后每天增加 1GB 20GB 内存。

在 mongodb 中，您应该对数据文件夹进行快照 - 而不是 mongodump。可能的原因是它将未使用的数据从磁盘复制到内存中，然后进行 bson 转储。因此，就我而言，长时间未使用的文本永远不应加载到内存中。我认为这就是备份的工作方式，因为即使现在我的 Mongodb 在运行 mongodump 后使用 200MB 的内存，它可以上升到 3GB

所以我认为最好的解决方案是使用文件系统来存储 HTML 文件，因为您的 RAID （如 PERC H700）具有许多惊人的缓存功能，包括预读。但它有一些限制，比如网络访问，根据我的经验，一些数据及时损坏，需要运行 chkdsk 进行修复，因为每天添加或删除许多 GB 数据。此外，您还应该考虑使用适当的 RAID 功能，例如[写入槽](https://www.dell.com/community/PowerEdge-HDD-SCSI-RAID/difference-between-write-back-and-write-thru/m-p/633628/highlight/true#M3502)，以防止电源故障时数据丢失。

Sqlite 不是为处理超大数据而设计的，因此您不应该使用它，并且缺少许多缓存功能。

不完美的解决方案是在 nodejs 中使用 MariaDB 或它自己的缓存脚本，可以使用 memcached/Linux ramdisk 和可能 1GB 的热缓存。一段时间后使用内部 nodejs 缓存机制会产生很多内存泄漏。所以我可以将它用于网络连接，并且 I/O 正在使用文件系统锁定，并且许多“HOT”最常用的文件可以被编程为缓存在 RAM 中或保持原样

# asp.net-mvc-4 - ASP.Net MVC 4 和 WebSecurity - 通过电子邮件确认用户注册

> ID：14605937
> 
> 赞同：16
> 
> 时间：2013-01-30T14:07:34.687
> 
> 标签：asp.net-mvc-4, security, simplemembership

我正在使用 ASP.Net MVC 4 项目的默认 Internet 应用程序模板。Account 控制器中的 Register 操作是这样的 -

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        try
        {
            WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
            WebSecurity.Login(model.UserName, model.Password);
            return RedirectToAction("Index", "Home");
        }
        catch (MembershipCreateUserException e)
        {
            ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
        }
    }
    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

**但是，这不提供任何即用型功能来使用电子邮件地址进行注册以及发送电子邮件以进行确认和帐户激活的步骤。** 我看到 WebMatrix 的 Starter Site 模板使用 WebSecurity 并提供了我正在寻找的功能，但它不遵循标准的 MVC 模式。我可以混合这两种方法来获得与 MVC 4 兼容的解决方案，但**我正在寻找可以使用的代码来节省时间**。非常感谢任何好的样本或指针。谢谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-30T16:26:54.880

实际上 SimpleMembership 支持两步确认。 [转至此博客文章](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)，了解如何扩展 UserProfile 以包含 Email 属性。修改注册视图以捕获电子邮件。现在，当您创建新用户时，请像这样使用[CreateUserAndAccount](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createuserandaccount%28v=vs.111%29.aspx)。

```
string confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new{Email = model.Email}, true); 
```

现在，您只需使用您最喜欢的 ASP.NET MVC 电子邮件方法将 ConfirmationToken 通过电子邮件发送给用户。我喜欢[Postal](http://aboutcode.net/postal/)，因为您可以使用 Razor 引擎生成电子邮件正文。电子邮件正文将包含指向新网页（控制器/操作）的链接，该网页以确认令牌作为 id ({controller}/{action}/{id})。当用户单击链接时，您的代码将使用[WebSecurity.ConfirmAccount](http://msdn.microsoft.com/en-us/library/gg569286%28v=vs.111%29.aspx)执行确认。这就是将电子邮件确认添加到您的 MVC 4 应用程序所需的全部内容。这里有一个[将电子邮件确认添加到 MVC 4 的分步指南](http://kevin-junghans.blogspot.com/2013/02/adding-email-confirmation-to.html)。

# django - Django标签：超过2个参数

> ID：14605938
> 
> 赞同：0
> 
> 时间：2013-01-30T14:07:41.107
> 
> 标签：django, django-templates

有没有办法为模板标签提供两个以上的参数？

我可以：

```
val1|my_function:val2 
```

但是 val3 去哪儿了？

我试过

```
val1|my_function:val2,val3 
```

编辑：val1、val2、val3 是动态的，这意味着我可以像这样访问它们 {{val2}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:30:06.100

模板标签只接受一个参数。

有几种方法可以解决这个问题，但我会考虑是否值得，或者你是否可以改变你的逻辑。

参数必须是数字或字符串。

所以这**不起作用**：

```
val1|func:['a','b']
val1[func:{'a':'b'}
val1|func:('a','b') 
```

这将起作用：

```
val1|func:10
val1|func:10.2
val1|func:"10" 
```

您可以做的是发送以结构化方式格式化的字符串：

```
val1|func:"['a','b']" 
```

然后您可以创建解析它所需的数据类型，但这将是一个非常丑陋的解决方案。

一个更干净的解决方案是使用多个标签：

```
val1|func:'a'|func:'b' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:21:27.893

那是一个过滤器，一个过滤器只能接受一个或两个参数。[编写自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)。如果您想要一个可以接受多个参数的标签，请查看[编写自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:30:19.733

对于字符串，您可以执行以下操作：

```
val1|my_function:"val2,val3" 
```

然后拆分：

```
@register.filter()
def my_funtion(val1, args):
    args = [x.strip() for x in args.split(',')]
    #do something
    return value 
```

# vb.net - 检查特定图像名称的图片框

> ID：14605940
> 
> 赞同：5
> 
> 时间：2013-01-30T14:07:41.883
> 
> 标签：vb.net, embedded-resource, picturebox

我需要检查特定图像的图片框。我知道您可以检查图片框是否填充了图像...

```
If Not pictureBox.Image is Nothing Then

Else

End If 
```

但就我而言，我需要检查这个图片框是否有我在此过程中早些时候加载的图像。

这是我用来加载图像的当前代码...

```
PictureBox1.Image = My.Resources.TestImage1 
```

我认为通过使用以下代码可以检查图像名称，但这显然不起作用。

```
If PictureBox1.Image = My.Resources.TestImage1 Then
  'do something
Else
  'do something else
End if 
```

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:15:54.840

图像不知道文件名或从中加载它的任何其他名称。但是，您可以做的是逐像素比较图像。试试这个代码：

```
Public Function AreSameImage(ByVal I1 As Image, ByVal I2 As Image) As Boolean
  Dim BM1 As Bitmap = I1
  Dim BM2 As Bitmap = I2
  For X = 0 To BM1.Width - 1
    For y = 0 To BM2.Height - 1
      If BM1.GetPixel(X, y) <> BM2.GetPixel(X, y) Then
        Return False
      End If
    Next
  Next
  Return True
End Function 
```

信用在[这里](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/d80970b9-303a-4bf6-8b7f-7bdde93a2c00)。

我在寻找这个答案时发现了一篇有用的文章：

*   [在 VB .NET 中比较两个图像以找出大于阈值的差异](http://www.vb-helper.com/howto_net_image_compare_threshold.html)

这是您检查图像是否小于 100% 相等（即相似）的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T06:41:50.800

```
Dim a as image=my.resources.image1.jpg' imported file from resources
Dim b as image=my.resources.image2.jpg' imported file from resources

Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load

picturebox1.image=a
picturebox2.image=b

end sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

   if picturebox1.image is a and picturebox2.image=b then

      picturebox2.image=a
      picturebox1.image=nothing
   else
      picturebox2.image=b
      picturebox1.image=a
end if
end sub 
```

..................去尝试一下！:)

# autoit - 如何使用 AutoIt 在 J-link 提示符下输入命令

> ID：14605945
> 
> 赞同：0
> 
> 时间：2013-01-30T14:08:03.277
> 
> 标签：autoit

全部，

当调用 JlinkSTR91x.exe 时，它​​会打开一个命令提示符 J-Link。在此提示中，我们可以键入命令。我需要使用 AutoIt 脚本来做同样的事情。这是我试过的，

```
;Execution.au3

Local $foo = Run("C:\\Program Files\\SEGGER\\JLinkARM_V426b\\JLinkSTR91x.exe", "", @SW_SHOW, $STDIN_CHILD)

StdinWrite($foo,"setb 0")

ProcessWaitClose($foo) 
```

当我运行此脚本时，会打开 J-Link 提示符，但无法在此提示符处发送命令“setb 0”。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:28:56.223

```
Run("cmd")

$prog = WinWaitActive("C:\WINDOWS\system32\cmd.exe")

ControlSend($prog, Default, $prog, "exit")
Sleep(999)
ControlSend($prog, Default, $prog, "{Enter}")

WinWaitClose($prog) 
```

从理论上讲，这可以满足您的要求。只需用您的命令替换**cmd**并插入提示的实际标题。您可以使用 AutoIt 附带的 Info-Tool 找到它。这只是一个工作示例。

当您的提示不再活动时，它甚至会发送文本。您甚至可以使用**WinSetState($prog, Default, @SW_HIDE)**隐藏提示。

# android - 谷歌驱动上传和下载服务作为后台

> ID：14605946
> 
> 赞同：3
> 
> 时间：2013-01-30T14:08:05.400
> 
> 标签：android, google-drive-api

我可以使用 Android 手机中添加的帐户上传到谷歌驱动器。我按照 [http://www.youtube.com/watch?v=Ied1CjJ0iP0](http://www.youtube.com/watch?v=Ied1CjJ0iP0)中所述的步骤进行操作。我真正想要做的是通过服务作为后台进程从多部手机上传到单个帐户。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-12T08:57:07.950

我首先使用我的片段中的正常方法登录来做到这一点

```
 private fun upload() {
        Log.i(TAG, "Start sign in")
        val signInOptions = GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
            .requestScopes(Drive.SCOPE_FILE)
            .build()
        val googleSignInClient = GoogleSignIn.getClient(this.requireActivity(), signInOptions)

        startActivityForResult(googleSignInClient.signInIntent, MyFragment.REQUEST_CODE_SIGN_IN)
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        when (requestCode) {
            MyFragment.REQUEST_CODE_SIGN_IN -> {
            if (resultCode == Activity.RESULT_OK) {
                 Log.i(TAG, "Signed into drive ok.")

                 //Create an intent for starting the service
                 //Add whatever data you need to the intent
                 val intent = Intent(context, UploadService::class.java)
                 requireContext().startService(intent)
            }
        }
    } 
```

然后在 UploadService

```
override fun onHandleIntent(intent: Intent?) {
    if (intent == null) {
        return
    }

    val lastSignedInAccount = GoogleSignIn.getLastSignedInAccount(this) ?: throw IllegalStateException("Not logged in")
    val driveClient = Drive.getDriveClient(this, lastSignedInAccount)
    val driveResourceClient = Drive.getDriveResourceClient(this, lastSignedInAccount)

    .... Do what you need to do here
} 
```

请记住将服务添加到您的 AndroidManifest.xml

```
 <service
        android:name=".UploadService"
        android:enabled="true"
        android:exported="false" /> 
```

# asp.net - iOS WebService 与 ASP 服务器通信

> ID：14605947
> 
> 赞同：0
> 
> 时间：2013-01-30T14:08:05.060
> 
> 标签：asp.net, ios, web-services, frameworks, asmx

我有一个托管在 ASP 服务器上的 web 服务 (.asmx)，我想使用来自 iOS 应用程序的 SOAP 进行通信。

对于某些函数，服务器返回原语、结构和数据集（如在 system.data.dataset 中）。

您能否向我推荐一个可以为我管理通信和 XML 解析的框架？

我应该使用哪种类来模拟数据集，或者我需要自己制作一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:18:23.790

对于您的连接尝试这个框架： [http ://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

不过苹果的 NSURLConnection api 非常好用且易于使用。

对于简单的 XML 解析尝试：[https ://github.com/TouchCode/TouchXML](https://github.com/TouchCode/TouchXML)

希望这可以帮助 ：）

山姆

# image - hadoop 文件系统（HDFS）可以存储视频类型的文件吗？

> ID：14605953
> 
> 赞同：0
> 
> 时间：2013-01-30T14:08:16.487
> 
> 标签：image, video, hadoop, hdfs

作为标题，我想知道hadoop文件系统可以直接存储视频或图像文件吗？还是我必须先做一些事情才能存储视频或图像文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:09:35.370

这是一个文件系统，你可以在上面放文件。它们是什么并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:09:40.493

视频和图像文件可以存储在 HDFS 中。

如果要处理视频和图像文件，则需要弄清楚如何拆分这些文件并编写自己的 InputFormat 和 OutputFormat 以及 RecordReader。您可以在网上搜索如何创建这些类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T19:56:13.080

您可以为此使用 Hadoop SequenceFile，它为二进制 kv 对提供存储，并且可以直接用作 hadoop 的输入

# c++ - 迭代 C++ std::map 的正确方法不起作用

> ID：14605957
> 
> 赞同：1
> 
> 时间：2013-01-30T14:08:22.590
> 
> 标签：c++, xml, stl, stdmap, abstract-syntax-tree

所以我有一个 Node 对象的抽象语法树。每个节点都有任意数量的子节点以及任意数量的标签，这些标签是通过 std::map 结构附加到节点的信息花絮。现在我想以类似 XML 的格式打印整个语法树。为此，我使用此功能：

```
int __ostreamNode_indent = 0;
std::ostream & operator << ( std::ostream & ss, Node* n )
{   
    for( int i = 0 ; i < __ostreamNode_indent ; ++i )
        ss << "  ";

    ss << "<" << n->getSymbolType() << " ";
    for( std::map<std::string,std::string>::iterator itr = n->getTags().begin() ; itr != n->getTags().end() ; ++itr )
    {   
        ss << itr->first << "=\"" << itr->second << "\" ";
    }
    ss << "numtags=" << n->getTags().size() << " ";

    if( n->getChildren().size() == 0 )
        ss << "/";

    ss << ">" << std::endl;

    __ostreamNode_indent++;
    for( unsigned int i = 0 ; i != n->getChildren().size() ; ++i )
    {   
        ss <<  n->getChildren().at(i);
    }
    __ostreamNode_indent--;

    if( n->getChildren().size() != 0 )
    {
        for( int i = 0 ; i < __ostreamNode_indent ; ++i )
            ss << "  ";

        ss << "</" << n->getSymbolType() << ">" << std::endl;
    }

    return ss;
} 
```

结构正是我想要的方式：XML-tag 类型是节点的类型，并且节点的标签嵌入在同一个 XML 开始标签中。子节点放置在开始标签和结束标签之间。这是一个例子：

```
<block line="0" numtags=2 >
  <funcdef line="0" numtags=2 >
    <identifier line="0" col="13" value="main" numtags=3 />
    <expressionunion line="0" numtags=2 >
      <identifier line="0" col="16" value="a" numtags=3 />
      <identifier line="0" col="19" value="b" numtags=3 />
    </expressionunion>
    <assignment line="1" numtags=2 >
      <identifier line="1" col="5" value="c" numtags=3 />
      <numel line="1" numtags=2 >
        <solveunder line="1" numtags=2 >
          <identifier line="1" col="11" value="a" numtags=3 />
          <identifier line="1" col="16" value="b" numtags=3 />
        </solveunder>
      </numel>
    </assignment>
    <return line="2" numtags=2 >
      <power line="2" numtags=2 >
        <identifier line="2" col="12" value="c" numtags=3 />
        <identifier line="2" col="14" value="b" numtags=3 />
      </power>
    </return>
  </funcdef>
</block> 
```

这个例子也说明了这个问题。我用线条遍历所有标签

```
 for( std::map<std::string,std::string>::iterator itr = n->getTags().begin() ; itr != n->getTags().end() ; ++itr )
    {   
        ss << itr->first << "=\"" << itr->second << "\" ";
    } 
```

并将它们输出为 key="value"。但是，有时此循环会跳过最后一个元素。请注意紧跟在此循环之后的行如何输出标签的数量。当存在两个标签时，实际上只显示第一个。为什么不显示第二个？

编辑：马克 B 回答了这个问题；阅读他的答案以了解问题的确切解释。他在心里猜到这是getTags()的定义：

```
std::map<std::string,std::string> getTags()
{   
    return tags;
}; 
```

将其更改为此（添加＆符号）就可以了：

```
std::map<std::string,std::string> & getTags()
{   
    return tags;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:29:59.177

我将使用我的心理调试技能并建议`getTags()`按值返回容器（而不是对实际容器的引用），因此`begin`and`end`节点指的是不同的临时容器。在那一点上，迭代发生的任何事情都是公平的，因为原始的临时容器已经消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:43:03.003

马克可能是对的。

另一种可能性是您损坏了该地图。通过在地图中编辑一个键来表示。

# garbage-collection - 瓦尔格林 | 自制垃圾收集| 丢失记录中肯定会丢失 1 个块中的字节

> ID：14605960
> 
> 赞同：0
> 
> 时间：2013-01-30T14:08:22.990
> 
> 标签：garbage-collection, malloc, free, valgrind

我编写了一个相当复杂的软件（到现在已经超过 10 年了）。

您可能想查看以下来源： [http ://savannah.nongnu.org/svn/?group=cybop](http://savannah.nongnu.org/svn/?group=cybop)

按照安装文件的说明编译运行。

我已经使用这个命令行运行 memcheck：christian@deneb:/home/project/cybop/examples$ valgrind --tool=memcheck --log-file=memcheck.log --leak-check=full --track-origins =是的../src/controller/cyboi exit/run.cybol

这是内存检查输出：

```
==28641== Memcheck, a memory error detector
==28641== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==28641== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==28641== Command: ../src/controller/cyboi exit/run.cybol
==28641== Parent PID: 22974
==28641== 
==28641== 
==28641== HEAP SUMMARY:
==28641==     in use at exit: 5,174 bytes in 407 blocks
==28641==   total heap usage: 636 allocs, 229 frees, 45,749 bytes allocated
==28641== 
==28641== 442 (72 direct, 370 indirect) bytes in 1 blocks are definitely lost in loss record 406 of 407
==28641==    at 0x4C28BED: malloc (vg_replace_malloc.c:263)
==28641==    by 0x401EC0: allocate_array (array_allocator.c:116)
==28641==    by 0x40719C: allocate_part (part_allocator.c:50)
==28641==    by 0x42EE3E: deserialise_cybol_part_element_content (content_element_part_cybol_deserialiser.c:262)
==28641==    by 0x43098E: deserialise_cybol_part_element (element_part_cybol_deserialiser.c:74)
==28641==    by 0x4309FD: deserialise_cybol_part (part_cybol_deserialiser.c:79)
==28641==    by 0x42F230: deserialise_cybol_part_element_content (content_element_part_cybol_deserialiser.c:331)
==28641==    by 0x43098E: deserialise_cybol_part_element (element_part_cybol_deserialiser.c:74)
==28641==    by 0x4309FD: deserialise_cybol_part (part_cybol_deserialiser.c:79)
==28641==    by 0x42F230: deserialise_cybol_part_element_content (content_element_part_cybol_deserialiser.c:331)
==28641==    by 0x42F4CB: deserialise_cybol (cybol_deserialiser.c:196)
==28641==    by 0x42FD48: deserialise (deserialiser.c:229)
==28641== 
==28641== 4,732 (72 direct, 4,660 indirect) bytes in 1 blocks are definitely lost in loss record 407 of 407
==28641==    at 0x4C28BED: malloc (vg_replace_malloc.c:263)
==28641==    by 0x401EC0: allocate_array (array_allocator.c:116)
==28641==    by 0x40719C: allocate_part (part_allocator.c:50)
==28641==    by 0x41F6EA: deserialise_xml_element (element_xml_deserialiser.c:61)
==28641==    by 0x41FA65: select_xml_element_content (element_content_xml_selector.c:144)
==28641==    by 0x41FAF3: deserialise_xml_element_content (element_content_xml_deserialiser.c:73)
==28641==    by 0x41FBA9: deserialise_xml (xml_deserialiser.c:66)
==28641==    by 0x42F3E1: deserialise_cybol (cybol_deserialiser.c:178)
==28641==    by 0x42FD48: deserialise (deserialiser.c:229)
==28641==    by 0x430088: receive_file (file_receiver.c:106)
==28641==    by 0x433D2F: initialise (initialiser.c:88)
==28641==    by 0x4344C3: manage (manager.c:320)
==28641== 
==28641== LEAK SUMMARY:
==28641==    definitely lost: 144 bytes in 2 blocks
==28641==    indirectly lost: 5,030 bytes in 405 blocks
==28641==      possibly lost: 0 bytes in 0 blocks
==28641==    still reachable: 0 bytes in 0 blocks
==28641==         suppressed: 0 bytes in 0 blocks
==28641== 
==28641== For counts of detected and suppressed errors, rerun with: -v
==28641== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 6 from 6) 
```

“肯定丢失”的错误声称并非所有内容都已正确释放。我不要求你做西西弗斯的工作并搜索我所有的源代码。本质上，所有函数都依赖一个“malloc”。数据结构（自上而下）如下：part - item - array - value，即一个part引用九个item，一个item引用三个数组。

我自制的内置垃圾收集器说一切都很好。也许有人想看看？任何提示表示赞赏。文件“array_allocator.c”的源代码片段如下：

```
void allocate_array(void* p0, void* p1, void* p2) {

    if (p0 != *NULL_POINTER_STATE_CYBOI_MODEL) {

        void** a = (void**) p0;

        // The memory area.
        int ma = *NUMBER_0_INTEGER_STATE_CYBOI_MODEL;

        // Determine type (type) size.
        determine_size((void*) &ma, p2);

        // Calculate memory area.
        calculate_integer_multiply((void*) &ma, p1);

        // The temporary size_t variable.
        size_t tma = ma;

        // CAUTION! In order to always get a correct memory address returned
        // that may be used to store data, a potential zero size is changed
        // to a minimum size of one here.
        if (tma == *NUMBER_0_INTEGER_STATE_CYBOI_MODEL) {

            tma = *NUMBER_1_INTEGER_STATE_CYBOI_MODEL;

        } else if (tma < *NUMBER_0_INTEGER_STATE_CYBOI_MODEL) {

fwprintf(stdout, L"ERROR: Could not allocate array. The memory area to be allocated is negative: %i\n", *a);

            tma = *NUMBER_1_INTEGER_STATE_CYBOI_MODEL;
        }

        *a = malloc(tma);

        // Initialise array elements with null pointer.
        //
        // CAUTION! Initialising with zero values is essential, since
        // cyboi frequently tests variables for null pointer values.
        memset(*a, *NUMBER_0_INTEGER_STATE_CYBOI_MODEL, tma);

    } else {

        log_message_terminated((void*) ERROR_LEVEL_LOG_CYBOI_MODEL, (void*) L"Could not allocate array. The array is null.");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:21:03.160

在这里问这个问题是一个错误，因为它不涉及一般的编程，而是涉及特定于项目的问题。

我终于找到了这个错误。这是一个逻辑错误。

在释放（自定义）“部分”结构时，需要“模型”的“类型”。错误是我在实际“模型”之前释放了零件的“类型”，因此“模型”释放无法正常工作并发生内存泄漏。

解决了。不属于stackoverflow。只是为了关闭它。

# listview - 使用组时无法在列表视图中获得正确数量的项目

> ID：14605973
> 
> 赞同：1
> 
> 时间：2013-01-30T14:09:18.433
> 
> 标签：listview, count, clone

我有一个使用 clone() 将自身复制到另一个列表的列表，问题是当我试图从我克隆的列表中获取计数时，它会增长 1，但实际上，我将项目添加到其他列表，所以它应该增长。

只有当我在一个小组中时才会发生：

```
for each (ListViewItem^ item in chosenList->Items)
    {
         cloneList->Items->Add((ListViewItem^)item->Clone());
        } 
```

请注意，“chosenList”中有组，并且项目属于一个组（`item->group!=NULL`）。

现在，当我尝试获取“chosenlist”组 [0] 大小（`chosenList->Group[0]->Items->count`）时，我得到的大小是我所期望的大小的两倍。我该如何解决这个问题？！

我整天都被困在这个问题上，所以答案会对我有很大帮助！！！

谢谢！阿萨夫

# ruby-on-rails - Rails 范围为空还是空？

> ID：14605977
> 
> 赞同：2
> 
> 时间：2013-01-30T14:09:32.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scope, rails-activerecord

我想限定所有`cancelled_at`IS NULL 或空/空白的记录。

我发现很多帖子要求 IS NOT NULL/empty/blank ......但我需要相反的。

我敢肯定这很简单，但我很难过。

这是我目前得到的：

```
scope :active, where("cancelled_at IS NULL") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:11:42.740

你试过吗？

```
 Patient.where("created_at IS NULL or CAST(created_at as text) = ''")
 # SELECT "patients".* FROM "patients" WHERE (created_at IS NULL or CAST(created_at as text) = '') 
```

# database - 像phpmyadmin这样的离线软件打开位于我的PC中的.sql

> ID：14605979
> 
> 赞同：0
> 
> 时间：2013-01-30T14:09:33.680
> 
> 标签：database, phpmyadmin

我的计算机中有一个 .sql 文件，目前我使用 msql 命令行客户端打开它。但它缺乏图形界面。是否有任何软件可以安装在我的 Windows 7 PC 中，以便我有一个类似于 phpmyadmin 的界面来打开保存在我的 PC 中的 .sql 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:12:17.240

也许你可以试试 MySQL Workbench。这是链接

[http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

此外，如果您只需要阅读 .sql 文件的内容，您可以使用 Notepad++ 或任何其他文本文件编辑器。但我建议使用 Notepad++，因为它支持很多文件并且也提供格式。

[http://www.notepad-plus-plus.org/](http://www.notepad-plus-plus.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:13:38.683

将其导出为 csv 并使用 excel

# java - 获取一点与另一点之间的角度（三角函数）

> ID：14605984
> 
> 赞同：2
> 
> 时间：2013-01-30T14:09:54.687
> 
> 标签：java, trigonometry

我有2分。基点和其他点。我需要得到一个角度，基地应该移动到与它相对的另一个点。但可能性是从 0 到 360 度，而不仅仅是 90 度。 ![在此处输入图像描述](../Images/2f6a8ad26f2faa538105e17425e93dc8.png)

我现在应该用三角学来完成，但我不知道怎么做。有人能解释一下我应该使用什么算法吗？还是粘贴解决方案？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:27:39.747

使用这些点绘制一个直角三角形并查看角度。如果您知道点的坐标，您将能够找到角度，因为知道三角形的一边。

总的来说应该是这样的：

```
double alpha = Math.atan((yb - yp) / (xb - xp)); 
```

在哪里

> xb, yb 是基点坐标
> 
> xp, yp 是红点的坐标

`alpha`将以弧度表示，而不是度数。

并注意`atan`返回值 from `-pi/2`to`pi/2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:27:08.287

这确实是一个三角问题，但听起来你基本上想要红点和黑点之间的角度，然后在这个角度上加上 180。

但是： Math.atan2(y, x)

可以在这里为您提供帮助，因为您可以给它 x 坐标的差异和 y 坐标的差异以获得角度（以弧度为单位）。

不过你真的应该查一下 trig，因为你可以在 10 分钟左右学会基本的东西。“SOH CAH TOA”对你的一生都有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T15:21:51.063

可以通过以下方式获得角度： angle = Math.acos(unit-vector(a).unit-vector(b)) 其中 a 和 b 是基点和初始方向之间的向量，基点和其他点分别（'.' 代表点积）如果你想要以度为单位的角度，请执行以下操作：angle = (angle*180/Math.PI)。

***如果您不了解向量并且了解 Java，请阅读以下内容：***

您将需要以下信息：

1.  Base-Point 的坐标。（表示为点对象 basePoint，具有 x 和 y）
2.  其他点的坐标。(otherPoint)
3.  Base-Point 最初指向的坐标。（initialPoint）

（向量有 2 个分量，x 和 y。用双 x 和 y 为向量声明一个类，或者使用 Point）

```
newVector(Point p1, Point p2)
{
    // returns a new vector from point a 
    //to point b given two absolute co-ordinates a and b
    vector new1 = new vector(0, 0);
    new1.x = p2.x - p1.x;
    new1.y = p2.y - p1.y;
    return new1;

} 
```

**在图中，如果你想要vector(a)，做newVector(basePoint, initialDirection);**

**同样，vector(b) = newVector(basePoint, otherPoint)**

```
unitVector(vector a)
{
    vector new1 = new vector(0,0);
    new.x = a.x/(Math.sqrt(a.x*a.x + a.y*a.y));
    new.x = a.y/(Math.sqrt(a.x*a.x + a.y*a.y));
    return new1;
} 
```

**在图中，如果你想要 unit-vector(a)，请执行 unitVector(vector(a))**

```
dotProduct(vector a, vector b)
{
    double val;
    val = a.x*b.x + a.y*b.y;
    return val;
} 
```

**在图中，如果你想要 unit-vector(a).unit-vector(b)，做 dotProduct(unit-vector(a), unit-vector(b))**

# jquery - $(first, second) 中第二个参数的目的是什么

> ID：14605992
> 
> 赞同：2
> 
> 时间：2013-01-30T14:10:11.587
> 
> 标签：jquery

> **可能重复：**
> [$() 的第二个参数是什么意思？](https://stackoverflow.com/questions/6979097/what-does-the-second-argument-to-mean)

有一段时间我使用 jQuery，有时我会看到：

```
$(argument1, argument2).doSomething(); 
```

使用第二个参数进行过滤的文档在哪里？

编辑：

我说的是这种使用方式：

```
var t=0; // the height of the highest element (after the function runs)
var t_elem;  // the highest element (after the function runs)
$("*",elem).each(function () {
    $this = $(this);
    if ( $this.outerHeight() > t ) {
        t_elem=this;
        t=$this.outerHeight();
    }
}); 
```

注意：

```
$("*",elem) 
```

我不是在谈论

```
$("a,b,span") 
```

过滤方式。我现在很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:13:38.050

[`jQuery()`这是文档](http://api.jquery.com/jQuery/#jQuery1)中的第一个定义：

```
jQuery( selector [, context ] )

   selector
      Type: selector
      A string containing a selector expression

   context
      Type: Element, jQuery
      A DOM Element, Document, or jQuery to use as context 
```

再往下：

> **选择器上下文**
> 
> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以通过使用函数的可选第二个参数为搜索提供替代上下文`$()`。

但是，在内部它只是调用[`.find`](http://api.jquery.com/find/)，您经常会发现人们建议使用`.find`过度传递第二个参数。

所以，你的例子相当于`$(argument2).find(argument1).doSomething();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:12:42.713

该文档位于[此处的 jQuery API 文档中。](http://api.jquery.com/jQuery/)

双参数语法有三种风格：

```
$( selector [, context ] ) 
```

它将选择器的范围限定为`context`元素的子级。这是您发布的示例代码中使用的变体。`selector`应用于节点的后代节点`context`。

还有：

```
$( html [, ownerDocument ] ) 
```

它从提供的原始 HTML 字符串动态创建 DOM 元素。

最后::

```
$( html, [, attributes ] ) 
```

它定义了创建 DOM 元素的指定属性、事件和方法来调用新创建的元素。

# ios - NSAttributedString.initWithHTML 在 MonoTouch 中不可用

> ID：14605995
> 
> 赞同：2
> 
> 时间：2013-01-30T14:10:32.927
> 
> 标签：ios, xamarin.ios, nsattributedstring, xamarin

似乎`initWithHTML`没有在`NSAttributedString`. 我已经检查了 PerformSelector ，但它对我来说没有意义，我找不到调用它的示例`NSAttributedString`。如果有人有一个例子，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:15:19.340

你是对的，它没有在 MonoTouch`initWithHTML`中实现，`NSAttributedString`但它与 MonoTouch 无关——它只是在 iOS 中不可用，请参阅 Apple[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)。

选择器仅在 OSX 中使用 AppKit 可用（请参阅 Apple 的 AppKit[附加文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html)）。

# java - 从 List/ArrayList 中获取最后三个元素？

> ID：14605999
> 
> 赞同：19
> 
> 时间：2013-01-30T14:10:40.167
> 
> 标签：java

我需要将最后三个元素添加到列表中。是否有任何实用方法，或者我是否会使用从“size(myList) - 1”向下迭代的 for 循环？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-30T14:13:03.907

您可以使用[`List.subList()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)来查看原始列表的尾部：

```
List<E> tail = l.subList(Math.max(l.size() - 3, 0), l.size()); 
```

在这里，`Math.max()`处理`l`包含少于三个元素的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T14:12:54.370

看：

```
List.subList(arg0, arg1)! 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T14:13:05.993

使用`List.subList` [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html#subList%28int,%20int%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html#subList%28int,%20int%29)

就像是

```
myList.subList(myList.size()-3, myList().size()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T14:14:08.583

怎么样`subList(from, to)`？

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#subList(int](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#subList(int) , int)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T14:19:12.017

尝试

```
 List list = Arrays.asList(1, 2, 3, 4);
    ListIterator i = list.listIterator(list.size());
    while (i.previousIndex() != list.size() - 4) {
        Object e = i.previous();
        System.out.print(e + " ");
    } 
```

印刷

```
4 3 2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T14:15:59.107

也许`java.util.Stack`这里更有用。你的清单有什么用？