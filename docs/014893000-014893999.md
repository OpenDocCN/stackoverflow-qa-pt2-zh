# StackOverflow 问答 14893000-14893999

# mongodb - 在 Haskell 中授权连接到 mongoDB

> ID：14893001
> 
> 赞同：4
> 
> 时间：2013-02-15T10:46:42.327
> 
> 标签：mongodb, haskell

如何对 mongoDB 进行身份验证？

我正在使用这个驱动程序[http://hackage.haskell.org/package/mongoDB](http://hackage.haskell.org/package/mongoDB)

我在文档或源代码中找不到任何相关内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:30:28.697

查看[身份验证](http://hackage.haskell.org/packages/archive/mongoDB/1.3.2/doc/html/Database-MongoDB-Query.html#v%3aauth)功能。从文档：

> ```
> auth :: MonadIO' m => Username -> Password -> Action m Bool 
> ```
> 
> 使用当前数据库进行身份验证（如果服务器在安全模式下运行）。返回认证是否成功。每个新管道都需要重新验证。

# database-design - 使用整数与字符串作为“类型”值（数据库和类设计）

> ID：14893005
> 
> 赞同：12
> 
> 时间：2013-02-15T10:46:53.810
> 
> 标签：database-design, enums, class-design, value-type

我一直在开发一些手机游戏，这些游戏从服务器数据库中获取数据。

我习惯于将“类型”值存储为整数标识符，并在客户端中使用枚举来标识来自服务器的数据。

例如：在数据库表上：

怪物表：**MonsterId** (int), Name(string), MonsterType(int)

在客户端代码上：

```
typedef enum {
    MonsterTypeGround = 1,
    MonsterTypeAquatic = 2,
    MonsterTypeAmphibious = 3,
    MonsterTypeAerial = 4
}MonsterType; 
```

请注意，上面的代码是 Objective-C，我可以在其中分配整数值。但我也在使用 C# 和 C++。

但是，我们的数据库人员说枚举是一种编译器技巧，没有枚举数据类型之类的东西。他认为整数类型标识符使人们（其他开发人员）难以理解值的含义，并且如果不查看客户端代码，他们不可能知道等价物，并且枚举不好，因为您需要确保枚举与服务器端 id 同步，并且最好使用字符串。

我的问题是：关于此事是否有客观正确的答案？

除了在客户端代码上使用枚举但仍将整数用于服务器数据库之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T11:05:27.517

## 长答案

您的数据库人员显然是错误的。当然，如果有类似 ENUM 数据类型的东西。您在示例中提供了一个。MySQL 知道这一点。许多编程语言都有类似 ENUM 的东西。

但他也是对的，因为 ENUM 通常（总是？）由编译器优化。如果有四个选项可以用 1 到 4 完美表示，但我们碰巧发现可识别的字符串在代码中更容易阅读。但是编译器没有这样的问题，实际上并不关心数字。Aerial Monster 是 4 类，Flying Spaghetti Monster 是 4 类。相比比较字符串，CPU 比较字节甚至更容易几个数量级。

此外，他认为在 C 代码或任何代码中使用 ENUM 可能是一个问题是正确的：

1.  如果更改定义（尤其是顺序），则需要重新编译程序和所有链接的程序（如果它是库）。那是一种痛苦。
2.  如果您需要使用不同的语言进行交互，那也可能会很痛苦。您需要同步多个定义。
3.  管理 ENUM 很麻烦，尤其是删除类型。

您可以通过使用将字符串转换为枚举或其他方式的函数来解决此问题。

但也有好处：

1.  如果您更改怪物类型的名称，任何空中怪物都可以保持类型 4，即使您将它们重命名为飞行怪物。保证数据库中的数据一致性，因为它是一个数字。如果您使用字符串，则没有轻松的转换方式。好吧，查找和替换将在代码中执行，但在数据库中则不行。
2.  这是一种有效的格式。它将为您节省 10 个字节。我的经验是，这很少有关系，除非你有数千万个条目。

## TL;博士

不，没有客观的答案。

如果您发现程序员的易用性最重要，那么字符串可能是更好的选择。如果您发现编译器优化最重要，那么枚举是更好的选择。

我的观点是编译器优化很少重要，但程序员的时间很少。我自己主要使用字符串，除了在某些数据库中。

所以，是的，你的家伙有一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T23:41:11.757

好吧，这里开始......潜在的downVote素材，但枚举是我最喜欢的东西之一......

## 看法

专注于最适合您的设计和代码的内容。不使用枚举是因为数据库没有那种“数据类型”？好的。那么我们不要出于同样的原因制作*任何自定义类。*那是胡说八道。

## 枚举善良

（注意：我用 C# 编写代码）

1.  允许您根据问题域声明事物。字符串是字符串，但 MonsterType 枚举是 Monster（类型）。
2.  enum 本质上是强类型的。使用未定义的枚举值是编译错误。OTOH，字符串拼写错误是另一个调试会话。
3.  我特别喜欢它的`switch`陈述。击败 theHellOutta 整数：`switch(MonsterType)`
4.  枚举可以详尽地定义所有有效值
5.  倾向于文档化
6.  代码质量增强器 - 确保您必须重新编译才能添加新成员，但这是深思熟虑的，并且缺少相关的代码更改会爆炸（一件好事）相对于未在某处处理的新字符串值，表现为难以捉摸逻辑/处理错误，需要您进行调试会话。
7.  默认为零，不为空。有趣的是，null 概念是如何把事情搞砸的。在它所属的数据库中保留“null”。
8.  专业编码提示：始终明确定义默认成员。回复：`MonsterType.Unknown = 0`。您的奖励将是更容易编写、错误更少且更易于阅读的代码。您的维护程序员会感谢您的。

## 弦坏

1.  默认值为空。这是一场围绕 null 和“空字符串”的持续战斗。我经常看到像这样愚蠢的、漏洞百出的代码：`if(string.IsNullorEmpty(myString.Trim()) ...`- 如果 myString 为空，您的程序会因运行时异常而崩溃。枚举不能发生。
2.  字符串比较区分大小写
3.  容易出现拼写错误
4.  “字符串”类型是通用的，绝不可以帮助您根据您的域表达您的问题
5.  从数据库中获取的设置`myString = null`不是一个有值的变量，它甚至不是一个对象，但我们试着像对待它一样对待它！

## 整数混淆

`if (MonsterType == 3)...` 这是什么意思？纳夫说。

这是一个实践练习。在您的 IDE 中，单击“3”并要求它“查找定义”。如果你的 IDE 会说话，它会说“你为什么不定义你的问题域中的东西，而不是让我猜“3”是什么意思？

哦，我知道。我会在某处声明一堆常量……某处。我的天啊。让我们假设我们正在使用枚举！而且它比使用一*组*有凝聚力的类型安全值更有趣！

## null 让我抓狂

C# 有一个`String.Empty`静态属性是有原因的。它不会劫持有效值（例如空格）或 null 来表示*实例化*的字符串对象，该对象的值明确不是任何（有效）字符串。这与 null 不同。

从字面上看，null 意味着什么都没有。意思是“走开，没人在家”。例如，编码人员经常希望它表示“未知的怪物类型”，但是为了大声喊出明确定义这些概念（参见上面的 enum pro 提示）。恕我直言，像这样使用 null 意味着您的设计缺少一些东西。

null 是代码僵尸。它在四处走动，但什么都没有，死了，无论如何。如果你不小心，它会咬你！

您将体验到决定将“空”字符串存储为空格字符或 null 的无穷乐趣；

并且空格实际上是有效的字符串域值，而不是“无值”值；

并且那个 null 和“空字符串”实际上并不意味着同样的事情，当你需要它们的“自然”功能时，试图让它们产生问题；

以及从 string.empty 到 null 到空间的代码转换的不断大惊小怪，反之亦然，以适应手头的任务。随着时间的推移，您的代码将在这方面变得不一致。

现在听我说，以后相信我。

# android - 在 Android 中创建视图的克隆

> ID：14893009
> 
> 赞同：3
> 
> 时间：2013-02-15T10:46:56.907
> 
> 标签：android, view, clone

有什么方法可以在 Android 中克隆视图？我引用了一个复杂的视图，它首先从布局中膨胀，然后在应用程序的整个生命周期中以编程方式进行编辑，添加子视图、删除视图等。

我需要一些方法来克隆这个视图对象。在应用程序中的这个时间点，没有足够的信息可供我重新膨胀布局并以编程方式对其应用所有视图修改以使其与原始视图匹配。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:02:17.643

无法克隆视图

我认为您必须自己实现它（构造函数或方法）

你能想出另一种解决方案吗？也许在另一个对象中保留视图状态？

您需要这种克隆的情况是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T18:24:29.327

你不能克隆视图，你必须夸大你的视图。

# javascript - CRM 2011 JScript retrieveMultiple 抛出错误请求错误

> ID：14893011
> 
> 赞同：4
> 
> 时间：2013-02-15T10:47:11.707
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm, jscript

我正在尝试使用`oData`联系表单检索多条记录，但它抛出`Bad Request`错误。谁能建议我为什么会这样。

提前致谢

**脚本**

```
// Retrieving multiple connections with accound ID as Record2Id.
function myFunction
{
    var contId = Xrm.Page.data.entity.getId();

    retrieveMultiple("ConnectionSet", "ConnectionId", "Record2Id eq '" + contId + "'",    successCallbackConnections, errorCallbackConnections, true);
}

function successCallbackConnections(data, textStatus, XmlHttpRequest)
{
    for(i=0; i < data.length; i++)
    {
        alert(data[i].RoleName);
    }       
}

function errorCallbackConnections(XmlHttpRequest, textStatus, errorThrown) {
    alert(errorThrown);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:14:33.183

尝试这个：

```
function myFunction
{
    var contId = Xrm.Page.data.entity.getId();

    retrieveMultiple("ConnectionSet", "ConnectionId,Record2Id", "Record2Id/Id eq guid'" + contId + "'",    successCallbackConnections, errorCallbackConnections, true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:54:42.643

我觉得`filter`不见了！！尝试这个：

```
retrieveMultiple("ConnectionSet", "?$filter=YourAttributeHere eq '" + contId + "'", successCallbackConnections, errorCallbackConnections, true); 
```

# ruby-on-rails-3 - Friendly_ID Ruby on Rails

> ID：14893014
> 
> 赞同：2
> 
> 时间：2013-02-15T10:47:18.037
> 
> 标签：ruby-on-rails-3, friendly-id

即使在使用 slug 之后，URL 仍然显示 id 而不是标题。代码如下

**index.html.erb**

```
<title>Blog!</title>
<h1>List of the Posts</h1>
<% @posts.each do |post| %>
  <%= link_to post.title,:id => post.slug%>
  <p><%= post.content %></p>
  <%= link_to "Edit",edit_post_path(post) %> |
  <%= link_to "Delete",post,:confirm=>"Are you sure ?",:method=>:delete %>
  <hr />
<% end %>
<p><%= link_to "Add a New Post",new_post_path %></p> 
```

**post_controller.rb**

```
class PostsController < ApplicationController
  def index
    @posts=Post.all
  end

  def show
    @posts=Post.find(params[:id])
  end 
```

结尾

**后模型**

```
 extend FriendlyId
  friendly_id :title,use: :slugged

  def should_generate_new_friendly_id?
    new_record
  end 
```

**路线.rb**

```
Blog::Application.routes.draw do
  get "blog/posts"
  resources :posts
end 
```

我希望链接是' **localhost:8080/posts/this+is+the+title** '而不是' **localhost:8080/posts/2** '

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-28T16:59:16.573

我也遇到了这个问题。当我链接到我的资源的显示操作时，我会得到`id`url 而不是我的 slug。虽然我可以输入 slugged url 并且它也可以正常工作（我只是无法链接到 slugged url）。事实证明，我必须使用命名路由助手来为 friendly_id 显示 url 中的 slug（我在助手中使用的是老派`controller: 'posts', action: 'show', id: post.id`）`link_to`。在你的情况下，我会尝试改变：

```
<%= link_to post.title, :id => post.slug %> 
```

至

```
<%= link_to post.title, post_path(post) %> 
```

此外，friendly_id 5.0 版要求您在控制器中更改`Model.find`为`Model.friendly.find`（除非您明确覆盖它`config/initializers/friendly_id.rb`。由于这是一篇较旧的帖子，它可能不适用于您，但我想我还是会添加它。尝试更改：

```
def show
  @post = Post.find(params[:id])
end 
```

至

```
def show
  @post = Post.friendly.find(params[:id])
end 
```

希望有帮助！

# jquery - Javascript / jQuery：替换（突出显示）自动完成结果中的多个用户输入词

> ID：14893016
> 
> 赞同：1
> 
> 时间：2013-02-15T10:47:20.270
> 
> 标签：jquery, autocomplete, highlight

我有一个 jQuery 自动完成功能，用户的搜索词在搜索结果中突出显示。多亏了stackoverflow，我已经完成了大部分工作，并且突出显示了这些术语。

当第二个术语在使第一个突出显示的代码中匹配时出现问题，因此部分 HTML 被突出显示。例如，如果搜索词是“word1 te”并且返回的结果包含：

“这是 word1，我正在测试”

在我的循环的第一次迭代中，它会变成：“这是`<span class='highlightedText'>`word1 `</span>`，我正在测试”

其次，它不仅会突出“testing”中的“te”，还会突出“highlightedText”中的“te”。例如“这是测试`<span class='highlight<span class='highlightedText'>`stingText `</span>`'>word1 `</span>`，我正在`<span class='highlightedText'>`测试`</span>`”

`<span class='highlightedText'>$1</span>`现在，我可以通过将高亮文本设置为粗体来简化高亮文本，这样就可以代替，`<b>$1</b>`但是如果我的用户自己输入字母“b”，该标签将被标记。

我可以尝试以某种方式排除突出显示的字母“b”，但我希望有人有一个更优雅的解决方案。

呸！希望这很清楚。

这是我到目前为止所得到的：

CSS：

```
.highlightedText {
    color: blue; font-weight:bold;
} 
```

在stackoverflow上找到的正则表达式：

```
 /**
    * http://kevin.vanzonneveld.net
    *   original by: booeyOH
    *   improved by: Ates Goral (http://magnetiq.com)
    *   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    *   bugfixed by: Onno Marsman
    *     example 1: preg_quote("$40");
    *     returns 1: '\$40'
    *     example 2: preg_quote("*RRRING* Hello?");
    *     returns 2: '\*RRRING\* Hello\?'
    *     example 3: preg_quote("\\.+*?[^]$(){}=!<>|:");
    *     returns 3: '\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:' 
 */
function preg_quote( str ) {
    return (str+'').replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g, "\\$1");
} 
```

这是我的代码：

```
$("#search_member").autocomplete({
          minLength: 2,
          source: '/controller/module/action/term/' + $(this).val(),
          delay: '500',
          select: function (event, ui) {
                  // delete what they input
                  $(this).val('');
                  // the 'value' is a URL to navigate to
                  window.location.href = '/controller/module/index/mem_code/' + ui.item.mem_code;
                  // don't populate the autocomplete box
                  return false;
          }
    }).data("autocomplete")._renderItem = function (ul, item) {
        // search and replace matched search terms with bold version
        var highlighted = item.fullname;
        var termsString = this.term;
        var termsArr = termsString.split(' ');
        for (var i = 0; i < termsArr.length; i++) {
            var term = termsArr[i];
            highlighted = (highlighted+'')
                            .replace( 
                                new RegExp( "(" + preg_quote( term ) + ")" , 'gi' )
                                , "<span class='highlightedText'>$1</span>" 
            );
        }

        var listItem = '<a>' + highlighted + ' ' + 
                    item.type_code + '</a>' ;

        $("<li></li>").data("item.autocomplete", item)
                      .append(listItem)
                      .appendTo(ul);
        return;
    };

    // clear the search box if clicked
    $('.span_link').click(function() {
        $('#search_member').val('');
        $('#table_container').hide();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:20:01.040

实际上在我提交之前找到了答案，但尽管我还是会提交它，以防它帮助其他人。

问题是我的 for 循环；不需要它，只需改进我的 reg-ex 以便它一次性替换所有单词。这是更正后的“_renderItem”函数：

```
.data("autocomplete")._renderItem = function (ul, item) {
    // search and replace matched search terms with bold version
    var highlighted = item.fullname;
    var termsString = this.term.trim();
    var words = termsString.split(' ').join('|');
    var regExp = new RegExp( "(" +  words + ")" , 'gi' );

     highlighted = (highlighted+'')
                     .replace( 
                         regExp
                         , "<span class='ui-state-highlight'>$1</span>" 
     );

    var listItem = '<a>' + highlighted + ' ' + 
                item.type_code + '</a>' ;

    $("<li></li>").data("item.autocomplete", item)
                  .append(listItem)
                  .appendTo(ul);
    return;
}; 
```

不需要 preg_quote() 函数或自定义 CSS 片段。

# google-drive-api - Google Drive API 无需手动授权即可授予访问权限

> ID：14893017
> 
> 赞同：2
> 
> 时间：2013-02-15T10:47:24.170
> 
> 标签：google-drive-api

我正在构建一个 Web 应用程序，以方便其用户上传不同类型的文档。所有用户都可以在一个地方查看每个用户文档。现在，如果一个用户想要访问另一个用户的文档，他不应该经历谷歌执行的所有正常的手动授权过程。他应该可以访问该文件。我在 alfresco CMS 中看到了此功能，用户无需手动授权即可查看和授予访问权限。让我知道我怎样才能得到这个设施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:40:50.093

也许企业帐户是您需要的。同一域内的用户可以在常规授权流程后访问彼此的文档。

# c - 如何终止后台 ssh 实例

> ID：14893018
> 
> 赞同：2
> 
> 时间：2013-02-15T10:47:27.360
> 
> 标签：c, ssh, signals, kill

我编写了使用 fork(2) 和 execl(3) 运行 ssh 以进行端口转发的 C 程序。ssh 在后台运行 -f 选项。

当 C 程序退出时，我希望它发送 SIGTERM 到它产生的 ssh 实例。

我试过了

```
// creating the ssh process
ssh_pid = fork();
if (ssh_pid == 0)
    execl("/usr/bin/ssh", "/usr/bin/ssh", "-f", other options, NULL)

// ...

printf("Killing %d\n", ssh_pid); // <--- output the PID
kill(ssh_pid, 15);
sleep(1); // give it a chance to exit properly
if (kill(ssh_pid, 0) == 0)
    kill(ssh_pid, 9); // the "shotgun" approach 
```

但是，这不起作用（即使使用 SIGKILL）。

*如果我在程序退出之前*运行 ps

 *```
ps aux | grep ssh | grep -v sshd | grep -v grep 
```

我看到这样的事情：

```
user      27825  0.2  0.0      0     0 pts/0    Z+   18:23   0:00 [ssh] <defunct>
user      27834  0.0  0.0  41452  1176 ?        Ss   18:23   0:00 /usr/bin/ssh -f [other options] 
```

当程序打印它正在杀死的 PID 时，我看到了这个：

```
Killing 27825 
```

随后重复 ps 给了我：

```
user      27834  0.0  0.0  41452  1176 ?        Ss   18:23   0:00 /usr/bin/ssh -f [other options] 
```

看来原来的 ssh 为了成为后台进程已经分叉了自己。

所以我改变了对 kill(2) 的调用，试图杀死原始 ssh 产生的所有进程：

```
kill(-ssh_pid, 15); 
```

但这似乎没有效果。我怀疑这是因为原始 ssh 不再是后台 ssh 的父级。

那么，如何安全地杀死后台 ssh？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:47:27.360

我刚刚找到的解决方案是根本不使用 -f 选项，并自己后台运行 ssh。

```
ssh_pid = fork();
if (ssh_pid == 0)
{
    freopen("/dev/null", "r", stdin);
    freopen("/dev/null", "w", stdout);
    freopen("/dev/null", "w", stderr);
    execl("/usr/bin/ssh", "/usr/bin/ssh", other options, NULL);
} 
```

因为当 ssh 获得 -f 选项时，它会创建一个子节点，并且发送给父节点的信号不会传递给子节点。*

# linux - crontab 不执行他的工作

> ID：14893021
> 
> 赞同：1
> 
> 时间：2013-02-15T10:47:35.040
> 
> 标签：linux, cron, crontab

我在执行`crontab`作业时遇到问题。我想我已经正确配置了所有东西，但是当我输入：
`*/2 * * * * /var/www/site/executescript.sh`在
`crontab -e`
我的脚本根本没有被执行.. 我唯一得到的`cron.log`是：

```
Feb 15 10:22:35 server crontab[2222]: (root) BEGIN EDIT (root)
Feb 15 10:22:45 server crontab[2222]: (root) REPLACE (root)
Feb 15 10:22:45 server crontab[2222]: (root) END EDIT (root)
Feb 15 10:26:24 server crontab[2329]: (root) BEGIN EDIT (root)
Feb 15 10:27:17 server crontab[2329]: (root) REPLACE (root)
Feb 15 10:27:17 server crontab[2329]: (root) END EDIT (root)
Feb 15 10:29:34 server crontab[2415]: (root) BEGIN EDIT (root)
Feb 15 10:29:53 server crontab[2415]: (root) REPLACE (root)
Feb 15 10:29:53 server crontab[2415]: (root) END EDIT (root) 
```

这意味着 cron 甚至没有尝试执行我的脚本。有谁知道这与什么有关？这是否意味着我的脚本中有错误（我没有看到一个..）有没有地方可以检查更准确的 cron 日志？

我的 cron 版本是 v5.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:53:31.203

您需要定义执行脚本的二进制文件。试试这个：

```
*/2 * * * * /bin/sh /var/www/site/executescript.sh in 
```

# android - Android：电池电量不足和错误的 GPS 行为

> ID：14893026
> 
> 赞同：0
> 
> 时间：2013-02-15T10:47:50.467
> 
> 标签：android, gps, batterylevel

我正在开发一个应用程序来跟踪用户的位置。但是，当设备的电池电量少于 30%（或多或少）时，我发现 GPS 的一种奇怪行为：它停止发送信息。有人知道如何避免这种行为/找到有关它的信息吗？谢谢！

更新：我试图找到一些谷歌关于这个话题的解释。（这与电池电量低时闪光灯停用或多或少相同）。有人知道我在哪里可以搜索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:13:22.293

如果启用了省电模式，Android 很可能希望保护设备免受电池耗尽的影响。在 ios 上，这样的应用程序会一直运行到电池没电为止。

# encoding - StrConv() 在 Windows 2008 服务器上损坏字符串

> ID：14893029
> 
> 赞同：0
> 
> 时间：2013-02-15T10:48:03.093
> 
> 标签：encoding, character-encoding, vb6, windows-server-2008, codepages

我正在尝试将 Web 应用程序从 windows 2008 vps 迁移到专用的 windows 2008 vps（均为 32 位版本）。我注意到的问题（到目前为止，我已经与它斗争了超过 24 小时）是大多数文本都以乱码形式出现（这会破坏所有应用程序）。该应用程序的工作方式如下：(html+js) -> php -> vb6 dll -> 回复。

最初我认为这一定是编码和 iis 的问题，但我认为情况并非如此。我将问题缩小到这个：

当调用 .dll 的函数时，函数的字符串参数首先被解析并转换为 vb6 正确格式：

```
Public Function getCorrectStringNoTrans(ByVal strWord As String) As String

    If strWord <> "" Then
        If isUTF8 = False Then
            strWord = Trim$(strWord)
        Else
            Open "c:\log.txt" For Output As #1
            Dim lol As Integer
            For lol = 1 To Len(strWord)
                Print #1, "bef:" & lol & ":" & Mid$(strWord, lol, 1) & ":" & AscW(Mid$(strWord, lol, 1)) & ":" & Asc(Mid$(strWord, lol, 1))
            Next lol

            strWord = StrConv(strWord, vbFromUnicode)

            For lol = 1 To Len(strWord)
                Print #1, "aft:" & lol & ":" & Mid$(strWord, lol, 1) & ":" & AscW(Mid$(strWord, lol, 1)) & ":" & Asc(Mid$(strWord, lol, 1))
            Next lol
            inData = strWord

            Dim c As New crc
            Dim lll As Long
            lll = UBound(inData)
            Print #1, c.CRC32(inData, lll)
            Close #1

            strWord = Trim$(ConvertUtf8BytesToString(inData))
            '''strWord = Replace$(Trim$(ConvertUtf8BytesToString(inData)), "\'", "'")
        End If
    End If

    getCorrectStringNoTrans = strWord

End Function 
```

因此，在现场机器 1（当前运行正常的机器）中，特定字符串的输出是（最后一个数字是 crc 检查）：

```
bef:1:Ξ:926:206
bef:2:Ί:906:186
bef:3:Ξ:926:206
bef:4:±:177:177
bef:5:Ξ:926:206
bef:6:»:187:187
bef:7:Ο:927:207
bef:8::140:140
bef:9:Ο:927:207
bef:10:‚:8218:130
aft:1:?:-17714:63
aft:2:?:-20018:63
aft:3:?:-17458:63
aft:4:?:-29489:63
aft:5:?:-32049:63
 1958248078 
```

但在新机器中，输出为：

```
bef:1:Ξ:926:206
bef:2:Ί:906:186
bef:3:Ξ:926:206
bef:4:±:177:177
bef:5:Ξ:926:206
bef:6:»:187:187
bef:7:Ο:927:207
bef:8::140:140
bef:9:Ο:927:207
bef:10:‚:8218:130
aft:1:?:16191:63
aft:2:?:-20161:63
aft:3:?:-17601:63
aft:4:?:16191:63
aft:5:?:-32193:63
 523875602 
```

所以 ascw() 表明字符串在我试图迁移到的**新机器中的 strconv() 之后变得混乱。**

我已经三重检查了控制面板中的设置-> 区域和语言选项，并且两台机器的所有设置都相同：

格式选项卡：当前格式：希腊语

位置标签：当前位置：希腊

管理选项卡：非 unicode 程序的语言：希腊语

然后我认为这可能是 SP2 的问题，因为正常工作的机器是 sp2，而我正在试验的这台机器是 sp1，所以我更新了，但唉，没有结果。

我不明白为什么 strconv() 不能正常工作。也许我在设置或安装中遗漏了一些东西。任何想法将不胜感激。

ps它也可以在带有iis5的windows xp开发机器中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:15:10.670

您似乎误解了编码。如果您通过 COM 传递了一个字符串，那么它将已经是未编码的“原始”unicode (UCS-2) 字符串。如果您以 UTF-8 格式传递，则在解码之前不能将其存储在字符串中，否则它将被损坏。您必须将非 ANSI 数据作为字节数组读取并酌情解码。

VB6 也没有对 UTF-8 的原生支持。`StrConv()`with`vbUnicode`和`vbFromUnicode`正在将包含 ANSI/MBCS 数据的字节数组转换为 UCS-2 中的 VB 字符串。

总之，假设您通过 COM 正确地传递了字符串，那么整个函数可以替换为`Trim$()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:41:54.663

似乎尽管我已将**非 unicode 程序的语言设置为**希腊语（代码页 1032 链接：http: [//msdn.microsoft.com/en-us/goglobal/bb964664.aspx](http://msdn.microsoft.com/en-us/goglobal/bb964664.aspx)），但两者：

```
Private Declare Function GetThreadLocale Lib "kernel32" () As Long
Private Declare Function GetUserDefaultLCID Lib "kernel32" () As Long 
```

出于未知原因，在该特定框中返回 1033（美国英语）。在 live box 中没有这样的问题，尽管它是相同的操作系统和设置

所以我所做的是改变：

```
strWord = StrConv(strWord, vbFromUnicode) 
```

至

```
strWord = StrConv(strWord, vbFromUnicode, 1032) 
```

现在可以了。

# jquery - 在 jQuery 中调用一个链接的 div

> ID：14893031
> 
> 赞同：0
> 
> 时间：2013-02-15T10:48:05.747
> 
> 标签：jquery, html, href

我的 jQuery 脚本有点问题。

我`href`在 div 中有一个不可见的链接，当我将鼠标悬停在它的父 div 上时，该 div 将变得可见。这工作得很好，但是因为变得可见的 div 必须像一个按钮，所以我在里面制作了 div，`href`因为 html5 的美妙世界允许我们这样做:)。

但现在的问题是，当我将鼠标悬停在父 div 上时，它不再可见并且我不知道如何调用它，这必须很简单，但我似乎没有找到任何关于它的信息。

这是html的一部分：

```
<div id="evenementen" class="inforow">
    <div class="pic">
        <div class="aanwijzer"></div>
    </div>
    <div class="text">
        <h3>EVENEMENTEN</h3>
        <p>some text</p>
    </div>
    <a href="evenementen">
        <div class="button" style="display:none;">MEER INFO</div>
    </a>
</div> 
```

如您所见， div 在 a 标签内。

这是我的 jQuery 代码：

```
$(document).ready(function() {
    var div = '';
    $(".inforow").hover(erover, eraf);

    function erover() { 
        div = $(this).attr('id');
        $("#" + div).stop().animate({marginTop:0, height:325},200);
        $(this).children(".button").show();
    }

    function eraf() {
        $(this).stop().animate({marginTop:20, height:285},200);
        $(this).children(".button").hide();
    }
}); 
```

所以我认为 .button 必须在其他地方进行更改。我已经尝试过 .button a 甚至 .button a:link 之类的东西（尽管这更加牵强）。无论如何，我希望有人知道答案，并提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:50:34.903

尝试：

> `$(this).find(".button").show()`

代替

> `$(this).children(".button").show()`

这样做的原因是 div 按钮不再是主（父）div 的直接子元素，而是现在包裹在 a 标签内；由于这个原因，children() 不会到达它，而 find() 会。

# ssas - 构建整个 SSAS 多维数据集不起作用，按维度构建维度 - 构建顺序？

> ID：14893033
> 
> 赞同：0
> 
> 时间：2013-02-15T10:48:14.547
> 
> 标签：ssas, bids, dimension

在 SSAS 上构建多维数据集时遇到一个奇怪的问题。我有一个事实表，比如说 FactActivity。然后我有一个维度DimActivity，它和这个事实是1对1的关系，所有的外键都绑定在这个维度上。所以日期维度、产品维度等等，都是绑定到 DimActivity 的。

当我构建整个多维数据集时，它似乎是在维度之前构建事实，因此它给了我错误。但是，如果我在事前手动构建维度，它就可以工作。

除了使用 Analysis Services 处理任务从 SSIS 执行此操作之外，我可以在 SSAS 中的任何地方配置构建顺序吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:10:18.817

处理多维数据集不会处理与其相关的维度，因为它们在 SSAS 中构造为单独的实体。在实践中，这意味着维度可以在与多维数据集无关的情况下存在、处理和访问。

没有“配置的一般构建顺序”之类的东西。应由您决定如何处理 AS 对象。有许多工具可以促进这一点，它们都将做同样的事情：构建 XMLA 脚本以在 AS 服务器上运行。

1.  SSIS：分析服务处理任务
2.  配置 SQL 代理作业。
3.  使用 SSMS 执行手动过程。
4.  使用 AMO 对您的处理活动进行编程
5.  ...

重要的是您应该在处理多维数据集之前处理您的维度。一个简单的解决方案是处理整个 SSAS 数据库（包含您的多维数据集和维度）。这样，SSAS 将在处理多维数据集之前自动处理维度。

[有关处理 Analysis Services 对象的文档](http://msdn.microsoft.com/en-us/library/ms174860%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:45:34.220

处理维度或整个多维数据集时，在单击“运行”之前，单击“更改设置...”按钮。在那里你可以改变它应该处理的方式。此链接描述了可用选项的效果。

[http://technet.microsoft.com/en-us/library/ms174774.aspx](http://technet.microsoft.com/en-us/library/ms174774.aspx)

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:17:46.387

对于遇到类似问题的其他人......

我偶尔会遇到多维数据集处理错误的原因是刷新是同时发生的——由于计划的每小时导入。

我现在使用日志来查看正在运行的 SSIS 包。导入活动时，我在此表中插入了一条记录，状态为“正在运行”。

在处理多维数据集之前，我有一个信号量来检查该表中的记录，这些记录是数据导入并且具有“正在运行”状态。如果当前没有导入正在运行，我只允许刷新多维数据集。当多维数据集正在处理时，导入也有一个信号量，并且不会开始导入，除非当前没有多维数据处理“正在运行”。

实现此逻辑后，我在处理多维数据集时从未遇到任何错误。

# c# - 在 C# 中使用 Interop HTML 2 XHTML Lib Dll 源代码时出现错误

> ID：14893034
> 
> 赞同：0
> 
> 时间：2013-02-15T10:48:19.377
> 
> 标签：c#, .net, vb.net, dll, regsvr32

当我尝试将 HTML 转换为 XHTML 标记时，我收到以下错误...

> **错误：**检索具有 CLSID {59939390-0E6A-4F1B-A742-20C5459501F7} 的组件的 COM 类工厂失败，原因是以下错误：80040154。

**谷歌搜索后，我发现了一些解决方案：**

> 将 DLL 注册到 regsvr32 "E:Source Code\bin\Interop.HTML2XHTMLLib.dll"

我只是试图注册dll。但是`E:Source Code\bin\Interop.HTML2XHTMLLib.dll`被加载了。但是找不到 DllRegisterServer 入口点，显示此错误消息。为什么..？

为 x86 和 x64 重新编译了我的项目..没用..

**VB.NET 代码：**

```
Dim xhtmlUtil As New XHTMLUtilities // Here itself im getting the above error.

sFormattedOutput = xhtmlUtil.convertToXHTML(sInputline) //Send it for conversion 
```

我的操作系统是 Windows XP 32 位 Service Pack 3。我的应用程序是在 VS2008 中完成的。目前我正在使用 VS2010。

这是我所缺少的。任何人都可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:56:14.687

> 我只是试图注册 dll。但是 E:Source Code\bin\Interop.HTML2XHTMLLib.dll 已加载。但是找不到 DllRegisterServer 入口点，显示此错误消息。为什么？

**Interop** .HTML2XHTMLLib.dll 文件不是您要使用 regsvr32 注册的库。它只是托管互操作程序集，生成的 COM 对象可用于您的 .NET 应用程序。您实际上需要为 HTML2XHTMLLib.dll 注册类型库。

为此，您有两种选择：

1.  找到包含该库的可再分发包并将其与您的应用程序一起安装。
2.  在您的开发系统上，打开 Visual Studio 的“添加引用”对话框。选择 COM 选项卡并搜索库（就像添加引用时所做的那样）。在那里你会找到图书馆的绝对路径。将库复制到客户端系统并使用`regsvr32`.

由于我不知道 HTML2XHTMLLib 的来源，我只能建议那些方法。你应该更喜欢第一个。

既然你已经开始对此进行赏金，我想更详细地介绍一下 COM 和 InterOp。

# COM 和 .NET 程序集之间的差异

COM 中有两种类型的服务器：InProc-servers 和 OutProc-servers。*InProc* (In Process) 是我们通常知道的*DLL*的服务器。*OutProc*（Out of Process）服务器是独立的，在它们自己的进程中运行。我们将它们称为*EXE*可切割文件。

您想使用 InProc 服务器。您的 COM 服务器 ( *HTML2XHTMLLib* ) 由两部分组成：

1.  一个类型库 ( `.tlb`)，包含有关服务器的元信息，它包含对象及其可访问性。
2.  一个库，包含实现所有对象的代码。该库还导出以下静态函数：
    *   [`DllGetClassObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680760%28v=vs.85%29.aspx)– 尝试创建对象的实例，在服务器内部定义
    *   [`DllCanUnloadNow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690368%28v=vs.85%29.aspx)– 告诉 COM 环境，是否可以释放服务器，因为它不再被任何其他进程使用。
    *   [`DllRegisterServer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162%28v=vs.85%29.aspx)– 调用`regsvr32`以在 Windows 注册表中注册前面提到的类型库，以使其对客户端和 COM 环境可见。
    *   [`DllUnregisterServer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms691457%28v=vs.85%29.aspx)– 当通过 调用时，完全相反`regsvr32 -u`。

类型库也可以是DLL或EXE文件的资源，这样就只有一个文件了。对于 C# 开发人员来说，这似乎有点令人困惑，因为元信息直接编译成 .NET 程序集并可以通过反射访问。

# InterOp：.NET 和 COM 之间的包装器

因此，基本上类型库描述了 .NET 反射访问通过 COM 公开的对象所需的一切。但问题是，COM 组件以不同的格式存储：

*   通常它们被直接编译成机器代码：你不能链接一个 .NET 程序集，用*AnyCPU*对 COM 服务器编译。COM 服务器直接编译为 x86-assembler 或 x86-64-assembler。它们具有固定的指针大小，因此仅与其中一种编译模型兼容。
*   COM 定义了内存管理的规则。每个 COM 对象都必须实现[`IUnknown`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509%28v=vs.85%29.aspx)-interface。这个接口定义了三个方法。这些方法`AddRef`和`Release`用于内存管理目的。每当客户端访问它需要调用的 COM 对象时`AddRef`。这将计数器增加一。当客户端不再需要该对象时，它调用`Release`而不是删除该对象，从而导致计数器递减。如果指针达到 0，则删除对象本身。这与 .NET 管理内存的方式不同。在 .NET 中，垃圾收集器以不确定的方式访问堆上的每个对象（您无法确定删除对象的确切时间点）并在没有对它的引用时释放该对象。
*   COM 定义了身份规则。每当您只想访问对象的基本接口时，都必须调用`QueryInterface`由`IUnknown`. 此方法保证在查询特定接口时始终返回相同的指针。这对于 .NET 也可能是正确的（除了您正在[重载一些运算符](http://msdn.microsoft.com/en-us/library/vstudio/85w54y0a.aspx)），但 .NET 确保对象标识的方式是不同的。
*   COM 定义了对象关系的规则。[诸如Aggregation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686558%28v=vs.85%29.aspx)和[Containment](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683706%28v=vs.85%29.aspx)之类的疯狂东西也存在于 .NET 中，但实现方式不同。
*   COM 定义了不同的多线程规则，例如[Single Threaded Appartments](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680112%28v=vs.85%29.aspx)和[Multi Threaded Appartments](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693421%28v=vs.85%29.aspx)。这些线程模型定义了对象以不同方式共存时如何交互。在 .NET 中，您必须手动执行每个同步过程。

此列表可能不完整，我也不想进一步详细说明，因为这只是您的问题的附带问题，但是您会看到，.NET 和 COM 之间存在一些很大的差异。为了管理这些差异，两个世界之间存在一个层：COM InterOp。

如果您从 .NET 调用 COM 服务器，则 InterOp 只不过是一个**.NET 程序集**，它可以在后台完成所有艰苦的工作。它是使用[tlbimp.exe](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.110%29.aspx)工具创建的。每当您从 COM 选项卡引用库时，Visual Studio 通常会为您调用它。结果是您要注册的库：*InterOp.Libary.dll*。该库重新定义了 COM 服务器的所有类型库，实现了 COM 所需的规则，并为您执行实际调用。然而，它是一个托管的 .NET 库，它没有定义前面描述的方法。这就是为什么`regsvr32`找不到`DllRegisterServer`入口点的原因。

上面描述的方式只是一种使用非托管 COM 服务器和托管 .NET 客户端的方式。还有另一种方式，对应的[tlbexp.exe](http://msdn.microsoft.com/en-us/library/hfzzah2c.aspx)和`regasm`.

# vb.net - 列表框应该只显示 pdf 扩展名？

> ID：14893038
> 
> 赞同：0
> 
> 时间：2013-02-15T10:48:27.230
> 
> 标签：vb.net, listbox

我有一个列表框，它读取预定义目录中的所有文件。在这个目录中是各种文件。我想要的是仅“过滤”PDF文件，以便仅在列表框中显示带有.pdf扩展名的文件

我该怎么做呢？

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    ' make a reference to a directory
    Dim di As New IO.DirectoryInfo("c:\")
    Dim diar1 As IO.FileInfo() = di.GetFiles()
    Dim dra As IO.FileInfo

    'list the names of all files in the specified directory
    For Each dra In diar1
        ListBox1.Items.Add(dra)
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:00:34.007

[DirectoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/8he88b63.aspx)有一个采用字符串的重载。
该字符串是过滤文件列表结果的模式。

所以你的代码可以被简化（当然，循环的文件更少，它会更高效）使用

```
Dim di As New IO.DirectoryInfo("c:\")
Dim diar1 As IO.FileInfo() = di.GetFiles("*.pdf")
Dim dra As IO.FileInfo
For Each dra In diar1
    ListBox1.Items.Add(dra)
Next 
```

另外，请注意，如果您不需要文件 FileInfo 对象，您可以简单地使用

```
Dim files As String() = Directory.GetFiles(yourDirectory, "*.PDF") 
```

[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)仅返回一个字符串数组，其中包含请求的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:55:25.587

你可以这样做：

```
For Each dra In diar1
    If System.IO.Path.GetExtension(dra.Name).ToLower() = "pdf" Then
        ListBox1.Items.Add(dra)
    End If
Next 
```

# javascript - 将配置字符串解析为 javascript/JSON

> ID：14893039
> 
> 赞同：0
> 
> 时间：2013-02-15T10:48:39.373
> 
> 标签：javascript, regex, json, textarea, config

我有一个文本区域，用户可以在其中编辑配置。它的格式如下：

```
foo = 'value'
bar = 2.1
john = false 
```

值可以是 false、true、浮点数或字符串（无函数）。我需要正则表达式这个字符串来创建类似的东西：

```
{
    foo: 'value',
    bar: 2.1,
    john: false
} 
```

有图书馆或其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:14:29.260

根据您对输入数据的信任程度，您始终可以使用如下代码编写一个简单的函数（为简单起见，使用 jQuery）：

```
var lines = $('textarea').val().split('\n');
var output = '{';
$(lines).each(function(l){
    output += '\n\t' + lines[l].replace(/(\w+)\s=\s(.*)/, '$1: $2,');
});
output = output.substring(0, output.length - 1);
output += '\n}';
$('textarea').val(output); 
```

这里的要点是，您将需要根据您想要的严格程度来调整正则表达式（即，允许空格是可选的`?`，`\s`或者确保值是特定格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:07:39.870

我接受了这个[答案](https://stackoverflow.com/questions/3870019/javascript-parser-for-a-string-which-contains-ini-data/12452845#12452845)，这应该是您请求的一个良好开端，并添加了一些进一步的规则来处理不同的数据类型，也许这会有所帮助：

```
var data ="foo = 'value'";
    data +="\n" + "bar = 2.1";
    data += "\n" + "john = false";

function JSONFY(data){
    var regex = {
        section: /^\s*\[\s*([^\]]*)\s*\]\s*$/,
        param: /^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,
        comment: /^\s*;.*$/
    };
    var value = {};
    var lines = data.split(/\r\n|\r|\n/);
    var section = null;

    function handleSection(sec) {
        var isFloat = /^(?:[1-9]\d*|0)?(?:\.\d+)?$/;
        if(sec.match(isFloat)) {
            return parseFloat(sec);
        } else if(sec=='true') {
            return true;
        } else if(sec=='false') {
            return false;
        }
        return sec.replace(/^['"]/,'').replace(/['"]$/,'');
    }

    lines.forEach(function(line){
        if(regex.comment.test(line)){
            return;
        }else if(regex.param.test(line)){
            var match = line.match(regex.param);
            if(section){
                value[section][match[1]] = match[2];
            }else{
                value[match[1]] = handleSection(match[2]);
            }
        }else if(regex.section.test(line)){
            var match = line.match(regex.section);
            value[match[1]] = {};
            section = match[1];
        }else if(line.length == 0 && section){
            section = null;
        };
    });
    return value;
}

console.log(JSONFY(data)); 
```

这是要测试的[小提琴。](http://jsfiddle.net/axelmichel/8F5hN/)

# authentication - 在安全或自定义提供程序之前加载侦听器

> ID：14893043
> 
> 赞同：2
> 
> 时间：2013-02-15T10:48:59.430
> 
> 标签：authentication, symfony, listener, provider

我正在开发一个与经典用户表单完全一样的自定义提供程序，但是我必须提供第二个参数来识别用户：websiteId（我正在创建一个动态网站平台）。

因此，用户名不再是唯一的，而是用户名和 websiteId 的组合。

我成功创建了自定义身份验证，我遇到的最后一个问题是通过侦听器从域中获取 websiteId，它可以工作，但幸运的是，从域获取网站 id 的方法是在我的身份验证提供程序之后加载的，所以我可以'没有及时得到 websiteId :(

我试图更改侦听器优先级（测试 9999、1024、255 和 0，以及负数 -9999、-1024、-255 等......），但徒劳无功，它总是在之后加载。

这是我的代码：

**服务.yml：**

```
services:

    # Listeners _________________

    website_listener:
        class: Sybio\Bundle\WebsiteBundle\Services\Listener\WebsiteListener
        arguments: 
            - @doctrine
            - @sybio.website_manager
            - @translator
            - %sybio.states%
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onDomainParse, priority: 255 }

    # Security _________________

    sybio_website.user_provider:
        class: Sybio\Bundle\WebsiteBundle\Security\Authentication\Provider\WebsiteUserProvider
        arguments: [@website_listener, @doctrine.orm.entity_manager] 
```

我的听众是“website_listener”，你可以看到我将它用于我的 sybio_website.user_provider 作为参数。

**网站监听器：**

```
// ...

class WebsiteListener extends Controller
{
    protected $doctrine;

    protected $websiteManager;

    protected $translator;

    protected $websiteId;

    /**
     * @var array
     */
    protected $entityStates;

    public function __construct($doctrine, $websiteManager, $translator, $entityStates)
    {
        $this->doctrine = $doctrine;
        $this->websiteManager = $websiteManager;
        $this->translator = $translator;
        $this->entityStates = $entityStates;
    }

    /**
     * @param Event $event
     */
    public function onDomainParse(Event $event)
    {
        $request = $event->getRequest();

        $website = $this->websiteManager->findOne(array(
            'domain' => $request->getHost(),
            'state' => $this->entityStates['website']['activated'],
        ));

        if (!$website) {
            throw $this->createNotFoundException($this->translator->trans('page.not.found'));
        }

        $this->websiteId = $website->getId();
    }

    /**
     * @param integer $websiteId
     */
    public function getWebsiteId()
    {
        return $this->websiteId;
    }
} 
```

$websiteId 是水合的，不像你在我的提供者中看到的那样及时......

**网站用户提供者：**

```
<?php
namespace Sybio\Bundle\WebsiteBundle\Security\Authentication\Provider;

// ...

class WebsiteUserProvider implements UserProviderInterface
{
    private $em;
    private $websiteId;
    private $userEntity;

    public function __construct($websiteListener, EntityManager $em)
    {
        $this->em = $em;
        $this->websiteId = $websiteListener->getWebsiteId(); // Try to get the website id from my listener, but it's method onDomainParse is not called in time
        $this->userEntity = 'Sybio\Bundle\CoreBundle\Entity\User';
    }

    public function loadUserByUsername($username)
    {
        // I need the websiteId here to identify the user by its username and the website:
        if ($user = $this->findUserBy(array('username' => $username, 'website' => $this->websiteId))) {
            return $user;
        }

        throw new UsernameNotFoundException(sprintf('No record found for user %s', $username));
    }

    // ...
} 
```

所以任何想法都会很感激;）我花了很多时间来设置我的身份验证配置，但现在我无法及时获得 websiteId，太糟糕了:(

谢谢你的回答！

**编辑：**

我还需要了解我的身份验证系统的其他文件，我认为我无法在加载时控制提供程序的位置，因为它们在 security.yml 配置中是有的：

**网站身份验证提供者：**

```
// ...

class WebsiteAuthenticationProvider extends UserAuthenticationProvider
{
    private $encoderFactory;
    private $userProvider;

    /**
     * @param \Symfony\Component\Security\Core\User\UserProviderInterface $userProvider
     * @param UserCheckerInterface $userChecker
     * @param $providerKey
     * @param EncoderFactoryInterface $encoderFactory
     * @param bool $hideUserNotFoundExceptions
     */
    public function __construct(UserProviderInterface $userProvider, UserCheckerInterface $userChecker, $providerKey, EncoderFactoryInterface $encoderFactory, $hideUserNotFoundExceptions = true)
    {
        parent::__construct($userChecker, $providerKey, $hideUserNotFoundExceptions);
        $this->encoderFactory   = $encoderFactory;
        $this->userProvider     = $userProvider;
    }

    /**
     * {@inheritdoc}
     */
    protected function retrieveUser($username, UsernamePasswordToken $token)
    {
        $user = $token->getUser();
        if ($user instanceof UserInterface) {
            return $user;
        }

        try {
            $user = $this->userProvider->loadUserByUsername($username);

            if (!$user instanceof UserInterface) {
                throw new AuthenticationServiceException('The user provider must return a UserInterface object.');
            }

            return $user;
        } catch (UsernameNotFoundException $notFound) {
            throw $notFound;
        } catch (\Exception $repositoryProblem) {
            throw new AuthenticationServiceException($repositoryProblem->getMessage(), $token, 0, $repositoryProblem);
        }
    }

    // ...
} 
```

**工厂：**

```
// ...

class WebsiteFactory extends FormLoginFactory
{
    public function getKey()
    {
        return 'website_form_login';
    }

    protected function getListenerId()
    {
        return 'security.authentication.listener.form';
    }

    protected function createAuthProvider(ContainerBuilder $container, $id, $config, $userProviderId)
    {
        $provider = 'security.authentication_provider.sybio_website.'.$id;
        $container
            ->setDefinition($provider, new DefinitionDecorator('security.authentication_provider.sybio_website'))
            ->replaceArgument(0, new Reference($userProviderId))
            ->replaceArgument(2, $id)
        ;

        return $provider;
    }
} 
```

**SybioWebsiteBundle（依赖）：**

```
// ...

class SybioWebsiteBundle extends Bundle
{
    public function build(ContainerBuilder $container)
    {
        parent::build($container);

        $extension = $container->getExtension('security');
        $extension->addSecurityListenerFactory(new WebsiteFactory());
    }
} 
```

**安全：**

```
security:
    firewalls:
        main:
            provider: website_provider
            pattern:    ^/
            anonymous: ~
            website_form_login:
                login_path:  /login.html
                check_path:  /login
            logout:
                path:   /logout.html
                target: /

    providers:
        website_provider:
            id: sybio_website.user_provider 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:23:29.150

Firewall::onKernelRequest 注册优先级为 8 (sf2.2)。优先级 9 应确保首先调用您的侦听器（对我有用）。

我有一个类似的问题，即在单个 sf2.2 应用程序中创建特定于子域​​的“活动”站点： {campaign}.{domain} 。每个用户都有许多活动，我和你一样，想阻止没有给定活动的用户登录。

我的解决方案是创建一个 Doctrine 过滤器，将我的广告系列标准添加到在 {campaign}.{domain} 下进行的每个相关查询中。kernel.request 侦听器（优先级为 9！）负责在我的通用用户提供程序尝试 loadUserByUsername 之前激活过滤器。我使用 mongodb，但 ORM 的想法是相似的。

最好的部分是我仍在使用股票身份验证类。这基本上就是它的全部内容：

配置.yml：

```
doctrine_mongodb:
    document_managers:
        default:
            filters:
                campaign:
                    class: My\Filter\CampaignFilter
                    enabled: false 
```

CampaignFilter.php：

```
class CampaignFilter extends BsonFilter
{
    public function addFilterCriteria(ClassMetadata $targetMetadata)
    {
        $class = $targetMetadata->name;
        $campaign = $this->parameters['campaign'];
        $campaign = $campaign instanceof Campaign ? $campaign->getId() : $campaign;
        if ($targetMetadata->hasField('campaign')) {
            return array('campaign' => $this->parameters['campaign']);
        }
        if ($targetMetadata->hasField('campaigns')) {
            return array('campaigns' => $this->parameters['campaign']);
        }
        return array();
    }
} 
```

我的听众被声明为：

```
 <service id="my.campaign_listener" class="My\EventListener\CampaignListener">
        <tag name="kernel.event_listener" event="kernel.request" method="onKernelRequest" priority="9" />
        <argument type="service" id="doctrine.odm.mongodb.document_manager" />
    </service> 
```

监听器类：

```
class CampaignListener
{
    private $dm;

    public function __construct(DocumentManager $dm)
    {
        $this->dm = $dm;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        if (HttpKernelInterface::MASTER_REQUEST != $event->getRequestType()) {
            return;
        }

        $request = $event->getRequest();
        if ($campaign = $request->attributes->get('campaign', false)) {
            $filters = $this->dm->getFilterCollection();
            $filter = $filters->enable('campaign');
            $filter->setParameter('campaign', $campaign);
        }
    }
} 
```

由于我的路由配置，“campaign”在此处的请求中可用：

```
campaign:
    resource: "@My/Controller/CampaignController.php"
    type:     annotation
    host: "{campaign}.{domain}"
    defaults:
        campaign: test
        domain: %domain%
    requirements:
        domain: %domain% 
```

.. 和 %domain% 是来自 config.yml 或 config_dev.yml 的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:14:54.020

就像 benki07 提供的响应一样，这是一个优先权问题，您必须将侦听器放在 Firewall::onKernelRequest 之前

然后，将调用您的侦听器 -> 调用防火墙，并使用注册的 webSiteId 调用您的身份验证侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T08:54:44.163

正如您在 SecurityExtension.php 中看到的那样，使用的工厂没有任何优先级系统。它只是将您的工厂添加到数组的末尾，就是这样。因此，不可能将您的自定义身份验证放在 symfony 的安全组件之前。

一个选项可能是用您的类覆盖 DaoAuthenticationProvider 类参数。我希望 symfony2 将从工厂更改为注册表，您可以在其中添加带有标签和优先级的自定义身份验证，因为这对我来说不够开放/关闭。

# .htaccess - 无法在 RewriteRule 中路由页面

> ID：14893046
> 
> 赞同：0
> 
> 时间：2013-02-15T10:49:09.680
> 
> 标签：.htaccess, mod-rewrite

我在写一条路线时遇到问题，这是我在规则中写的：

```
RewriteRule ^forums/139638-ideas/suggestions/([0-9]+)-([A-Za-z0-9-])?$ suggestion.php?id=$1 [NC,L] 
```

它应该呈现的路线示例是：

```
forums/139638-ideas/suggestions/2489549-ability-to-print 
```

`2489549`我发送的 id在哪里，`-`是分隔符，然后`ability-to-print`是该页面的标题，但我无法路由到该页面是我的正则表达式有问题还是我以错误的方式编写规则。对不起我的英语，而且我是 Route 写作的新手，如果你认为这是一个新手问题，我也很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:59:01.923

第二段省略了`+`，表示可以匹配多个字符。这与您对第一段所做的相同。

因此，您的规则应如下所示：

```
RewriteRule ^forums/139638-ideas/suggestions/([0-9]+)-([A-Za-z0-9\-]+)?$ suggestion.php?id=$1 [NC,L] 
```

`+`请注意第二段中的附加内容。

# c++ - Qt中GUI线程空闲时发出信号？

> ID：14893059
> 
> 赞同：8
> 
> 时间：2013-02-15T10:49:55.750
> 
> 标签：c++, qt

我有创建和管理*GUI*内容的*GUI线程。*现在，当应用程序空闲时，即所有线程都空闲（或者即使只有 GUI 线程空闲），我希望我继承的类的对象发出. 因此，每当应用程序空闲时，我都会默默地创建下一阶段所需的内容。所以我想知道如何让该对象在*GUI*线程空闲时发出一个？我的应用程序是*多线程的*并且有多个类，因此不必仅在*GUI*类中发出。还有*`QMainWindow``SIGNAL``Widgets``SIGNAL`**`SIGNAL`*`SIGNAL`不应在线程空闲时立即发出。我希望线程应该空闲足够长的时间，以便我确定用户实际上是空闲的。谢谢你！****

 **** * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T19:59:14.647

QAbstractEventDispatcher 允许将自己的事件插入[Qt 的事件循环](http://doc-snapshot.qt-project.org/4.8/qcoreapplication.html#the-event-loop-and-event-handling)中。它还允许监视事件循环的工作量。

这是一个例子。小部件正在侦听 QAbstractEventDispatcher::awake() 和 QAbstractEventDispatcher::aboutToBlock() 信号以了解事件循环何时繁忙。

```
#include <QtGui>

class IdleAwareWidget : public QWidget
{
    Q_OBJECT

public:
    IdleAwareWidget(QWidget *parent = 0) : QWidget(parent) {
        dispatcher = QAbstractEventDispatcher::instance();
        connect(dispatcher, SIGNAL(awake()), SLOT(awake()));
        connect(dispatcher, SIGNAL(aboutToBlock()), SLOT(aboutToBlock()));
    }

private slots:
    void awake() {
        lastAwake = QTime::currentTime();
        qDebug() << "Slept for " << lastBlock.msecsTo(lastAwake) << " msec";
    }

    void aboutToBlock() {
        lastBlock = QTime::currentTime();
        qDebug() << "Worked for " << lastAwake.msecsTo(lastBlock) << " msec";
    }

private:
    QAbstractEventDispatcher *dispatcher;
    QTime lastAwake;
    QTime lastBlock;
}; 
```

主.cpp：

```
#include <QtGui>

#include "idle_widget.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    IdleWidget widget;
    widget.show();

    return a.exec();
} 
```

如果问题只是关于空闲处理，那么间隔为 0 的 QTimer 是一个选项：

```
QTimer::singleShot(0, this, SLOT(doWorkInIdle())); 
```

`doWorkInIdle()`一旦事件循环进入空闲状态，这将安排对插槽的调用。将工作拆分到小夹头不会阻塞循环，应用程序将保持响应。***

# c# - 如何获取sql查询中的行数？

> ID：14893060
> 
> 赞同：0
> 
> 时间：2013-02-15T10:49:55.667
> 
> 标签：c#, datatable, traversal

```
 string query = q;
    SqlCommand queryCommand = new SqlCommand(query, Connection);
    SqlDataReader queryCommandReader = queryCommand.ExecuteReader();
    DataTable dataTable = new DataTable();
    dataTable.Load(queryCommandReader);
    List<string> rowText = new List<string>();

    for (int i = 0; i < 4; i++)
    {
        foreach (DataColumn columns in dataTable.Columns)
        {
            rowText.Add(dataTable.Rows[i][columns.ColumnName] + "");
        }
    } 
```

在此示例中，我从数据库中获取 4 行 for 循环中的条件 i < 4 我想获得真正的行数而不仅仅是 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:53:55.087

也用于`foreach`行
见[http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx)

```
foreach(DataRow row in dataTable.Rows)
{
    foreach (DataColumn column in dataTable.Columns)
    {
        rowText.Add( row[column] );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:40:56.817

在您的具体示例中，简单地替换`4`by`dataTable.Rows.Count`以便您获得：

```
for(int i = 0; i < dataTable.Rows.Count; i++)
{
    // ...
} 
```

或者切换到`foreach`并使用 Gaby 的答案。

# zend-framework - zend 无法发送 Last-Modified 标头

> ID：14893062
> 
> 赞同：1
> 
> 时间：2013-02-15T10:49:59.180
> 
> 标签：zend-framework, http-headers

我尝试发送 Last-Modified 标头。我可以在本地计算机上运行项目时看到它，但是当我在虚拟主机上运行它的副本时，没有 Last-Modified 标头。

```
class InfoController extends Zend_Controller_Action
{

    public function indexAction(){

        $arr = strip_tags($this->_getParam('link'));
        $material = new Application_Model_InlineMenus();
        $mat = $material->preparematerial($arr);
        $header= $this->getResponse()->setHeader("Last_Modified", gmdate("D, d M Y H:i:s", strtotime($mat['created']))." GMT", true);

                       //other parts of code

                                  }
} 
```

这就是我在本地机器上运行项目时在萤火虫中所拥有的

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  Keep-Alive
Content-Length  4563
Content-Type    text/html
Date    Fri, 15 Feb 2013 10:31:49 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive  timeout=5, max=99
Last-Modified   Thu, 14 Feb 2013 12:41:31 GMT
Pragma  no-cache
Server  Apache/2.2.22 (Win32) PHP/5.3.13
X-Powered-By    PHP/5.3.13 
```

这就是我的托管服务

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  keep-alive
Content-Encoding    gzip
Content-Type    text/html; charset=UTF-8
Date    Fri, 15 Feb 2013 10:34:06 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Pragma  no-cache
Server  nginx/1.1.10
Transfer-Encoding   chunked
X-Powered-By    PHP/5.3.21 
```

本地项目和实际项目之间只有一个区别——我在 www 目录中使用 .htaccess 将请求重定向到 www/public 目录。

UPD。我创建了插件并在 preDispatch() 中尝试设置标头并且我有 http-code 500

问题解决：禁用 SSI

# java - 为不同的日志文件配置不同的JDK日志格式

> ID：14893064
> 
> 赞同：0
> 
> 时间：2013-02-15T10:50:07.667
> 
> 标签：java, logging, java.util.logging

使用`java.util.logging`，是否可以为不同的日志文件设置不同的格式？对于一个文件，我想使用默认`SimpleFormatter`输出。另一个文件包含来自特定类的日志记录，我只想输出`LogRecord`不带任何格式的消息。

理想情况下，我想纯粹从配置中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T18:00:11.617

您必须创建一些 java 代码才能使其正常工作。创建一个新`Formatter`的以返回`LogRecord`不格式化的日志消息。然后使用[LogManager](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html)`config`的顶级类文档中描述的选项来附加你的和你的不格式化。`FileHandler``SimpleFormatter``FileHandler`

# html - 在 html 页面中显示会话的值

> ID：14893065
> 
> 赞同：-5
> 
> 时间：2013-02-15T10:50:11.477
> 
> 标签：html, session

我正在尝试在 html 标记中显示会话的值？

我可以在谷歌上找到的最佳搜索返回以下内容：

```
<p><%= Session("fileName").ToString()%></p> 
```

我想在我的网页上显示一条消息，文件名是“bla bla”。

```
<p>File name is = Session["fileName"].tosring()</p> 
```

如果是 MVC，我可以使用类似于

```
@Html.Raw(Session["fileName"].ToString()) 
```

但是有谁知道如何为标准的 html 网页执行此操作，我认为这应该是一个非常简单的解决方案，但没有发现任何东西可以告诉我如何执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:55:11.437

如果这是 Razor（带有 MVC），您可以使用

```
<p>@Html.Raw(Session["fileName"].ToString())</p> 
```

如果它只是一个`.html`页面，那么您将无法执行此操作，因为会话是服务器端变量，因此您需要服务器端语言来检索它

# php - 动态定义图像的路径

> ID：14893067
> 
> 赞同：-2
> 
> 时间：2013-02-15T10:50:18.253
> 
> 标签：php

我创建了一个简单的函数，不确定是否应该使用 switch/case 进行评估，但这里有。它应该获取该字段的值并确定它应该使用哪个图像，然后将图像的路径返回到 img 标签。我在调用该函数的下方有我的 img 标签，有什么关于我做错了什么的建议吗？

非常感谢

```
function imgtype ($parameter) {
   if ($paramater) === "T") {$imgsrc = 'images/onetick.gif'; return $imgsrc;}
   elseif ($parameter === "TT") {$imgsrc = 'images/twotick.gif'; return $imgsrc;}
   elseif ($parameter === "X") {$imgsrc = 'images/cross.gif'; return $imgsrc;}
} 
```

这是调用函数的标签

```
<img width="29" height="19" src="<?php imgtype($myRecord->getField('fieldvalue')); ?>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:52:25.060

您必须打印结果：

```
<img width="29" height="19" src="<?php echo imgtype($myRecord->getField('fieldvalue')); ?>"> 
```

您使用`if` `else`语句做得很好。`switch`如果您使用`===`而不是,假设它比 , 稍微快一点`==`，就像你正在做的那样。

[性能信息。](http://www.phpbench.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:53:33.127

使用 echo 调用函数：

```
echo '<img width="29" height="19" src="'.imgtype($myRecord->getField('fieldvalue')).'">'; 
```

或者在函数中添加

```
function imgtype ($parameter) {
   if ($paramater) === "T") $imgsrc = 'images/onetick.gif'; 
   elseif ($parameter === "TT") $imgsrc = 'images/twotick.gif';
   elseif ($parameter === "X") $imgsrc = 'images/cross.gif';

return '<img width="29" height="19" src="'.$imgsrc.'">';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:54:16.787

你应该`echo`这样的返回值：

```
echo imgtype($myRecord->getField('fieldvalue')); 
```

或者您可以`echo`在您的功能中：

```
function imgtype ($parameter) {
   if ($paramater) === "T") {$imgsrc = 'images/onetick.gif'; echo $imgsrc;}
   elseif ($parameter === "TT") {$imgsrc = 'images/twotick.gif'; echo $imgsrc;}
   elseif ($parameter === "X") {$imgsrc = 'images/cross.gif'; echo $imgsrc;}
} 
```

# qt - 用于滚动窗口的 qt 小部件，可用于终端的端口输出

> ID：14893069
> 
> 赞同：0
> 
> 时间：2013-02-15T10:50:23.030
> 
> 标签：qt, widget, output

我是 Qt 的新手，想知道是否有一个小部件可以将终端的输出移植到像小部件这样的滚动窗口。基本上我希望它在等离子团中使用它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:54:35.857

[您可以通过使用QListWidget](http://qt-project.org/doc/qt-4.8/qlistwidget.html#details)并提供一个在添加消息时调用[scrollToBottom()](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#scrollToBottom)的函数轻松创建自动滚动列表。

# batch-file - 递归查找调用的批处理文件

> ID：14893071
> 
> 赞同：0
> 
> 时间：2013-02-15T10:50:26.433
> 
> 标签：batch-file

我们当前的构建系统是从“主”批处理文件调用的大量批处理文件。如何找到从“主”批处理文件中调用的所有批处理文件？

不幸的是，存储库还包含许多其他批处理文件，我不能只列出工作副本中的所有批处理文件。

我不太关心“模拟”真正的执行。如果我得到一个可能从主批处理文件中调用的所有文件的列表，那就太好了。

有 299 个文件，所以我不想在每个文件中添加一个 echo ""。

引用的批处理文件使用“call xyz.bat”调用，即相对路径。有时批处理文件会更改当前工作目录，如下所示：

```
cd client
call mk.bat
cd .. 
```

或者

```
pushd client\install
call prepare.bat
popd 
```

**编辑**：添加示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:19:32.193

糟糕——这个问题几乎不可能完美解决，原因如下：

1）批处理文件可能被多种机制“调用”：

*   `CALL scriptName`

*   管道，例如：`scriptName | findstr ...`

*   FOR /F，例如：`for /f ... in ('scriptName ...') do ...`

*   CMD，例如：`cmd /c scriptName ...`或`%comspec% /c scriptName`

*   开始，例如`start "" scriptName ...`

2) 上述任何构造都可能存在，而不是对批处理脚本的“调用”。例如，CALL 可用于调用标签或执行命令。FOR /F 可用于解析字符串。等等

3）无论使用哪种“调用”机制，“调用”目标都可以用变量而不是字符串字面量来表示。例如：

```
set "myScript=ScriptName"
REM the SET may not be anywhere near the CALL
call %myScript% 
```

4) 脚本名称和路径可能不会出现在代码中。它可以从文件系统中动态读取，也可以通过逻辑导出。

5) 实际调用本身可以作为值嵌入到变量中。这适用于任何调用机制。例如：

```
set "myCommand=CALL"
%myCommand% ScriptName 
```

6）正如您在问题中指出的那样，脚本的路径可能是相对的，并且脚本可能会更改当前目录。或者“调用”可能依赖于 PATH 环境变量。

7) 任何“被调用”的脚本本身都可以“调用”另一个脚本。

* * *

您可以使用 FINDSTR 查找任何调用机制，并且您可能会找到大多数“调用”。但可能会有***很多***误报。您可以添加`/N`开关以在每个匹配的行前面加上行号。然后，您需要在文本编辑器中手动检查每个匹配行，看看它是否是您感兴趣的“调用”。

```
findstr /nir /c:"\<call\>" /c:"|" /c:"for  */f " /c:"\<cmd\>" /c:"\<%comspec%\>" /c:"\<start\>" *.bat 
```

可能有很多误报，您最好手动跟踪整个脚本的逻辑:-(尤其如此，因为不能保证 FINDSTR 会找到所有“调用”，因为调用本身可能会被隐藏在后面一个变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:35:52.670

您可以预先记录每个批处理文件。我知道你说过你不愿意，但这并不像你想象的那么难。

```
@echo off
:: addlogging.bat patch|unpatch
::
:: addlogging.bat patch
::    finds every .bat file in the current directory and every subdir
::    beyond, and patches each, prepending an echo to a log file
::
:: addlogging.bat unpatch
::    finds every .bat file in the current directory and every subdir
::    beyond, and removes the logging patch

setlocal

if #%1==#patch goto next
if #%1==#unpatch goto next
goto usage

:next
for /f "delims=" %%I in ('dir /s /b *.bat') do (
    if not "%%I"=="%~f0" (
        if #%1==#patch (
            set /p I="Patching %%I... "<NUL
            echo @echo %%time%% %%~f0 %%* ^>^> "%%userprofile%%\Desktop\%%date:/=-%%.log">"%%~dpnI.tmp"
        ) else (
            set /p I="Unpatching %%I... "<NUL
        )
        findstr /v "^@echo.*time.*~f0.*>>" "%%I">>"%%~dpnI.tmp"
        move /y "%%~dpnI.tmp" "%%I">NUL
        echo Done.
    )
)
goto :EOF

:usage
echo usage: %~nx0 patch^|unpatch 
```

# java - 字符串字面量内存利用率

> ID：14893078
> 
> 赞同：1
> 
> 时间：2013-02-15T10:50:42.237
> 
> 标签：java, string, memory

在java中有字符串文字池的概念。如果我没有在我的代码中创建任何字符串，那么这个内存池对我来说就是浪费。如何使用此内存区域而不是将其保留为字符串文字池。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:56:07.553

没有“字符串文字池”；字符串文字是[interned](http://en.wikipedia.org/wiki/String_interning)，但这意味着它们只是堆上的普通对象。它们可能会被大量引用并以这种方式节省内存，但从根本上讲，它们与任何其他对象没有什么不同。

如果您的程序中不存在字符串文字（并且您从未调用过[`String.intern`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)），那么 JVM 不会为此分配堆内存。不涉及“隐藏”内存区域，您无需执行任何操作即可“访问它”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:09:44.607

我认为这没有任何意义。无论如何，理论上，字符串池位于 Java 堆的 permgen 区域。这与 JVM 存储类的内存相同。默认情况下（至少对于 Oracle HotSpot JVM）是​​ 64 M。您可以尝试使用两个 HotSpot JVM 选项配置此区域：-XX:MaxPermSize 和 -XX:PermSize。permgen 越少，对象的内存就越多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:54:19.113

> 如何使用此内存区域而不是将其保留为字符串文字池。

它是 JVM 保留的区域，并随着程序运行而增加（达到某个阈值）。简而言之，您不能将其用于其他目的。

# ruby-on-rails - 使用部分，我如何以 DRY 方式呈现“条纹”表行？

> ID：14893079
> 
> 赞同：3
> 
> 时间：2013-02-15T10:50:49.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, partial-views

所以我有一些看起来像这样的视图代码：

```
<div class="box-content">
    <table class="table table-properties">
        <tbody>             
            <%= render :partial => 'property', collection: @search.listings, as: :listing %>
        </tbody>
    </table>                                
</div> 
```

在那`_property.html.erb`，我有这个：

```
<tr>
    <td class="span2">
        <%= link_to listing_path(listing), :class => "thumbnail thumb2" do %>
            <%= image_tag "room_1.jpg", :alt => "Lucas" %>
        <% end %>
    </td>
    <td>
        <h2><%= link_to listing.headline, listing_path(listing) %></h2>
        <h5><%= listing.listing_type.name if listing.listing_type "#{listing.neighborhood.name.capitalize}" %></h5>
        <h5>Maintenance <%= number_to_currency(listing.maintenance) %></h5>
    </td>
    <td class="span1">
        <h2 class="price"><%= number_to_currency(listing.price)%></h2>
        <h5><%= "#{listing.num_bedrooms} bed, #{listing.num_bathrooms} bath" %></h5>
    </td>
</tr> 
```

基本上，我想准确地生成上面的代码，对于每一行，唯一的区别是我希望每个第二行（即所有偶数行）都有`class=striped`..ie `<tr class=striped>`。

关于如何以干燥的方式做到这一点的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T10:57:11.843

您是否尝试过使用`cycle`and `current_cycle`？

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle)

```
<tr class="<%= cycle('odd', 'even') -%>">
  <!-- etc -->
</tr> 
```

这将您的类替换为`odd`and`even`并且恕我直言，在呈现集合时也应该工作。如果您多次需要实际循环的值，您可以使用它`current_cycle`（因为多次调用`cycle`会弄乱您的循环，除非您想要这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:00:18.370

`:nth-child()`使用css选择器不是更好吗？[http://www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:58:19.253

你可以尝试这样的事情：

```
 <tr class="<%=cycle("odd", "even") %>">
    <td class="span2">
        <%= link_to listing_path(listing), :class => "thumbnail thumb2" do %>
            <%= image_tag "room_1.jpg", :alt => "Lucas" %>
        <% end %>
    </td>
    <td>
        <h2><%= link_to listing.headline, listing_path(listing) %></h2>
        <h5><%= listing.listing_type.name if listing.listing_type "#{listing.neighborhood.name.capitalize}" %></h5>
        <h5>Maintenance <%= number_to_currency(listing.maintenance) %></h5>
    </td>
    <td class="span1">
        <h2 class="price"><%= number_to_currency(listing.price)%></h2>
        <h5><%= "#{listing.num_bedrooms} bed, #{listing.num_bathrooms} bath" %></h5>
    </td>
 </tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:05:45.057

用jquery做到这一点：

```
$(document).ready(function(){
   $("table.table-properties > tbody > tr:odd").addClass("odd");
   $("table.table-properties > tbody > tr:not(.odd)").addClass("even");  
}); 
```

# c# - 实例化一个类型约束的泛型类而不继承它

> ID：14893081
> 
> 赞同：0
> 
> 时间：2013-02-15T10:51:02.920
> 
> 标签：c#, generics, generic-constraints

**背景**

[如果您对背景不感兴趣，请跳至**问题]**

前几天阅读时，我偶然发现了这个通用类定义，它让我难过一段时间：

```
public abstract class Entity<T> where T : Entity<T> 
```

我很困惑`T`on怎么`Entity<T>`可能是 Type`Entity<T>`本身。这似乎是某种奇怪的递归约束。

然后我意识到这个约束可以通过子类来满足（当然，这`abstract`是对类的要求）：

```
public class Deriver : Entity<Deriver> 
```

在这里， type`T`被保证是 type `Entity<T>`，因为`Deriver`派生自`Entity<Deriver>`.

**问题**

无论如何，这让我想知道，如果这个类不是抽象的，我们可以直接实例化它吗？

所以给定

```
class Entity<T> where T : Entity<T> 
```

我们可以`Entity<T>`直接实例化吗？

显然我们不能说：

```
Entity<SomeClass> e = new Entity<SomeClass>(); 
```

因为`SomeClass`不满足约束`where T : Entity<T>`。

忽略明显的“你为什么要这样做？” `abstract`这本质上是一种确保在不使用关键字的情况下使用类之前获得类的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:55:18.820

这种假设是不正确的。以下将编译：

```
var e = new Entity<Deriver>(); 
```

# php - 安装 symfony-cmf-standard 时“执行缓存时出错：clear --no-warmup”

> ID：14893082
> 
> 赞同：10
> 
> 时间：2013-02-15T10:51:11.097
> 
> 标签：php, symfony, symfony-cmf

我试图安装 symfony-cmf-standard 使用：

```
composer.phar create-project symfony-cmf/standard-edition symfony-cmf-standard/ --stability=dev 
```

但我收到以下错误：

```
Could not open input file: app/console
Script sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache handling the post-install-cmd event terminated with an exception

[RuntimeException]
An error occured when executing the cache:clear --no-warmup 
```

我以管理员身份运行该命令，因此它不应该是权限问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T09:22:22.570

当我们使用命令时，它会出错，

```
composer.phar create-project symfony-cmf/standard-edition symfony-cmf-standard/ --stability=dev 
```

它创建 symfony-cmf-standard 文件夹作为项目文件夹并开始安装依赖项，但在两者之间它尝试使用清除缓存

```
php app/console cache:clear 
```

但由于当前位置位于项目文件夹之外，因此无法找到 app/console，因此失败。

现在，如果我们将目录更改为项目文件夹内并使用命令手动清除缓存

```
php app/console cache:clear 
```

它清除缓存，然后我们需要再次使用更新依赖项

```
php composer.phar update 
```

它对我有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-25T12:24:59.850

在同样的情况下，我也遇到了错误：“...PHP 致命错误：找不到类 'DOMDocument'...”

工作后：

1.  `install php-xml`（我想可以选择使用此选项编译）
2.  设置`date.timezone`在`/etc/php.ini`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-29T12:29:46.620

在我这边使用 php7.0 我必须安装：

*   `php7.0-mbstring`
*   `php7.0-xml`

然后它起作用了:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T20:03:28.560

发生这种情况是因为 DoctrinePHPCRBundle 中的以下错误：[https ://github.com/doctrine/DoctrinePHPCRBundle/issues/17](https://github.com/doctrine/DoctrinePHPCRBundle/issues/17)

要修复它，请编辑文件夹`vendor/doctrine/phpcr-bundle/Doctrine/Bundle/PHPCRBundle/Resources/config/odm.xml`中的`symfony-cmf-standard`文件并替换此行：

```
<parameter key="doctrine_phpcr.odm.metadata.driver_chain.class">Doctrine\ODM\PHPCR\Mapping\Driver\DriverChain</parameter> 
```

有了这个：

```
<parameter key="doctrine_phpcr.odm.metadata.driver_chain.class">Doctrine\Common\Persistence\Mapping\Driver\MappingDriverChain</parameter> 
```

现在复制`composer.phar`到您的`symfony-cmf-standard`文件夹中并以管理员权限运行命令：

```
php composer.phar update 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-05T05:04:27.917

确保已安装这些：

*   `php-mb`或`php54w-mbstring`或`php55w-mbstring`
*   `php-xml`或`php54-xml`或`php55w-xml`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-16T19:17:36.563

在这个问题上花费了几个小时之后，在 FreeBSD 下，您还需要安装 port `textproc/php80-xmlreader`。

# java - Java中没有重复且随机顺序的集合

> ID：14893083
> 
> 赞同：4
> 
> 时间：2013-02-15T10:51:18.320
> 
> 标签：java, list, set, duplicates, shuffle

看起来我既不能使用 ArrayList 也不能​​使用 Set：

*   `Set<>`- 我可以使用一组来避免重复，但没有随机播放选项//`Collections.shuffle(List<?> list)`

*   `ArrayList<>`- 我可以使用 shuffle 来随机化列表，但允许重复。

我可以使用 a`Set`并将其转换为 a `ArrayList`（或相反）以避免重复。或者，循环遍历集合以随机化项目。但我正在寻找更有效的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:58:33.597

您可以维护两个单独的集合， an`ArrayList`和 a `HashSet`，并拒绝插入`HashSet`.

如果您关心封装，请将两个集合包装在一个实现的元对象中`List`，并仔细记录重复元素的插入*将被拒绝*，即使一般合同`List`没有这样规定。

谈到这个解决方案的成本，我相信就时间而言，如果与普通的相比，成本绝对可以忽略不计`ArrayList`：s 成本摊销 O(1) 上的大多数操作`HashSet`，即查找和插入。另一方面，您的内存使用量将是两倍（或更多，取决于`HashSet`负载因子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:57:35.027

据我所知，套装没有排序，所以你显然不能洗牌。为了从列表中删除重复项，我发现：[如何从 ArrayList 中删除重复的元素？](https://stackoverflow.com/questions/203984/how-do-i-remove-repeated-elements-from-arraylist).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:04:10.800

您实际上可以使用“有序集”，例如 TreeSet。为了获得随机顺序，不要插入实际项目，而是插入具有随机重量的包装器并使用相应的比较器。然而，重新洗牌需要更新所有包装权重。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:01:19.290

*   您可以使用 Map 来避免重复，然后使用 Map.entrySet() 并打乱 ArrayList

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T10:59:21.240

使用最少的代码和最优雅的方式，您可以执行以下操作：

```
 public void testFoo() {
    Set<Integer> s = new TreeSet<Integer>();

    s.add(2);
    s.add(1);
    s.add(3);

    Collections.shuffle(Arrays.asList(s.toArray()));
} 
```

但这不是很有效，您可以使用数组和哈希函数将元素放在数组上所需的位置，并在放置之前检查它们是否已经存在，这将在 O(n) 时间内起作用，所以它非常好，但需要更多代码和对哈希函数的一些关注。

# forms - Joomla 表单验证缺少错误消息

> ID：14893085
> 
> 赞同：3
> 
> 时间：2013-02-15T10:51:25.730
> 
> 标签：forms, validation, joomla

我正在尝试为 Joomla 开发我的第一个组件。我已经安装了 Joomla 3，一切都很顺利。

我想在前端添加一个表单验证（客户端），我有一个提交表单。

我的代码是：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// Add form validation
JHTML::_('behavior.formvalidation');
?>
<form class="form-validate" id="myForm" method="post">
   <input name="email" type="text" class="required validate-email" size="30" />
   <button type="submit" class="validate">Submit form</button>
</form> 
```

验证有效，但不显示任何消息错误 - 只是一个字段。错误字段的 HTML 是：

```
<div id="system-message-container">
   <div id="system-message" class="alert alert-error">
      <h4 class="alert-heading"></h4>
      <div></div>
   </div>
</div> 
```

那么，如何在验证中添加文本？我需要为我的组件创建一个语言文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:08:33.117

您需要将表单提交按钮更改为`input` 试试这个-

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// Add form validation
JHTML::_('behavior.formvalidation');
?>
<form class="form-validate" id="myForm" method="post">
   <input name="email" type="text" class="required validate-email" size="30" />
  <input type="submit" name="submit" value="Submit" />
</form> 
```

**更新**：-你也可以试试这个-

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// Add form validation
JHTML::_('behavior.formvalidation');
?>
<form name="adminForm" id="myForm" method="post" onsubmit="return submitbutton();">
   <input  id="email" name="email" type="text" class="required validate-email" size="30" />
   <button type="submit" class="validate">Submit form</button>
</form>
<script type="text/javascript">
/* Override joomla.javascript, as form-validation not work with ToolBar */
function submitbutton() {   
    var f = document.adminForm;
    if (document.formvalidator.isValid(f)) {
        document.adminForm.submit(); 
        return true;
    }
    else {
        var msg = new Array();
        msg.push('Invalid input, please verify again!');           
        if($('email').hasClass('invalid')){
            msg.push('<?php echo JText::_('Invalid Email')?>');
        }
        alert (msg.join('\n'));
        return false;
    }     
}
</script> 
```

这将在客户端验证表单，但不在服务器端验证。有关更多信息，请查看 - [http://docs.joomla.org/Form_validation](http://docs.joomla.org/Form_validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T04:43:24.500

还要确保您已在 index.php 中添加此代码

```
<jdoc:include type="message" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-29T18:20:03.300

我刚刚遇到了这个问题。问题是您没有与表单字段关联的标签，Joomla 验证代码从标签文本构建错误消息。

如果您不希望标签出现，请将其设置为隐藏（如果您使用引导程序，请使用隐藏类）。您必须在标签中添加一个 for 子句。如果您还给它一个 id，它是输入 id + '-lbl' 的集合，那么它将优化标签查找的速度。

```
<form class="form-validate" id="myForm" method="post">
    <label class="hidden" for="inputid" id="inputid-lbl">Form label</label>
    <input id="inputid" name="email" type="text" class="required validate-email" size="30" />
    <button type="submit" class="validate">Submit form</button>
</form> 
```

# c++ - 密码基础加密 OpenSSL C++

> ID：14893088
> 
> 赞同：1
> 
> 时间：2013-02-15T10:51:42.937
> 
> 标签：c++, aes, pbkdf2

我在一个团队中创建用于医疗环境的应用程序。我们希望根据存储在 SQLite 数据库中的密码（散列和加盐）存储使用 AES 加密的本地数据。似乎没有太多关于这样做的信息。我错过了一个技巧吗？

**编辑：**

由于我似乎被否决了，这是我已经知道的一些内容。

我假设我需要使用 PBKDF2 密钥派生（见 SO [here](https://stackoverflow.com/a/6855338/374052)）。然后我需要按照[这个答案](https://stackoverflow.com/a/9781943/374052)做一些事情。我的问题是所有这些都是 C 代码，它没有利用 C++ 的任何 OOP 细节。我希望我缺少一些用于 OpenSSL 的不错的 C++ 包装器或其他一些我可以用来编写干净、可读和 OO 代码来解决问题的第 3 方库。

PS 我没有为这个应用程序付费，因为它是 Uni 的一个软件工程项目，并且该软件的接收者是一个慈善机构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:26:45.320

您现在的问题似乎集中在 C++ 的面向对象的密码库上。对于这个问题，我可以推荐[Botan](http://botan.randombit.net/)。它似乎确实专注于现代计算算法并包括 PBKDF2。

请注意，我不能保证这个库的安全性，我没有亲自使用或评估过它。

# ios - 通过 FTP 发送数据

> ID：14893090
> 
> 赞同：3
> 
> 时间：2013-02-15T10:51:47.883
> 
> 标签：ios, objective-c, ftp, inputstream

我正在尝试上传文件，但遇到了一些问题。我有一个来自本地路径的输入流：

```
self.stmIn = [NSInputStream inputStreamWithFileAtPath:localPath]; 
```

变量 localPath 有这个 URL：

```
/Users/JBG/Library/Application Support/iPhone Simulator/6.0/Applications/734F4DC6-8683-42BB-AB0D-A5553BC22C55/Documents/100046-003.jpg 
```

我可以毫无问题地打开流。当我尝试阅读它时，问题就来了：

```
bytesRead = [self.stmIn read:self.buffer maxLength:kSendBufferSize]; 
```

结果是-1。我不明白这个问题。任何想法？

谢谢并恭祝安康

编辑：代码基于（采用）Apple 的 SimpleFTPSample，但我将其实现为 UIViewController 旁边的 NSObject 类

编辑：使用 streamError 方法获取此信息：错误域 = NSPOSIXErrorDomain 代码 = 14“操作无法完成。地址错误”

编辑：我添加代码：

```
- (uint8_t *)buffer {
    return self->buffer;
}

- (BOOL)isSending {
    return (self.stmOut != nil);
}

- (void)startSend {
    BOOL success;
    NSURL *url;

    [[NetworkManager sharedInstance] didStartNetworkOperation];

    assert([[NSFileManager defaultManager] fileExistsAtPath:localPath]);

    assert(self.stmOut == nil);      // don't tap send twice in a row!
    assert(self.stmIn == nil);         // ditto

    url = [[NetworkManager sharedInstance] smartURLForString:ftpPath];
    success = (url != nil);

    if (success) {
        url = CFBridgingRelease(CFURLCreateCopyAppendingPathComponent(NULL, (CFURLRef) url, (CFStringRef) [localPath lastPathComponent], false));
        success = (url != nil);
    }

    if ( ! success) {
        NSLog(@"Invalid URL");
    } else {

        self.stmIn = [NSInputStream inputStreamWithFileAtPath:localPath];
        assert(self.stmIn != nil);

        [self.stmIn open];

        self.stmOut = CFBridgingRelease(CFWriteStreamCreateWithFTPURL(NULL, (CFURLRef) url));
        assert(self.stmOut != nil);

        success = [self.stmOut setProperty:ftpUser forKey:(id)kCFStreamPropertyFTPUserName];
        assert(success);
        success = [self.stmOut setProperty:ftpPwd forKey:(id)kCFStreamPropertyFTPPassword];
        assert(success);

        self.stmOut.delegate = self;
        [self.stmOut scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [self.stmOut open];
    }
}

- (void)stopSendWithStatus:(NSString *)statusString {
    if (self.stmOut != nil) {
        [self.stmOut removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        self.stmOut.delegate = nil;
        [self.stmOut close];
        self.stmOut = nil;
    }
    if (self.stmIn != nil) {
        [self.stmIn close];
        self.stmIn = nil;
    }
    if (statusString == nil) {
        statusString = @"Archivo subido";
    }
    [[NetworkManager sharedInstance] didStopNetworkOperation];
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode {
    assert(aStream == self.stmOut);

    switch (eventCode) {
        case NSStreamEventOpenCompleted: {
            NSLog(@"Opened connection");
        } break;
        case NSStreamEventHasBytesAvailable: {
            assert(NO); 
        } break;
        case NSStreamEventHasSpaceAvailable: {
            NSLog(@"Sending");
            if (self.bufferOffset == self.bufferLimit) {
                NSInteger   bytesRead;

                bytesRead = [self.stmIn read:self.buffer maxLength:kSendBufferSize];

                if (bytesRead == -1) {
                    [self stopSendWithStatus:@"File read error"];
                } else if (bytesRead == 0) {
                    [self stopSendWithStatus:nil];
                } else {
                    self.bufferOffset = 0;
                    self.bufferLimit  = bytesRead;
                }
            }

            if (self.bufferOffset != self.bufferLimit) {
                NSInteger   bytesWritten;
                bytesWritten = [self.stmOut write:&self.buffer[self.bufferOffset] maxLength:self.bufferLimit - self.bufferOffset];
                assert(bytesWritten != 0);
                if (bytesWritten == -1) {
                    [self stopSendWithStatus:@"Network write error"];
                } else {
                    self.bufferOffset += bytesWritten;
                }
            }
        } break;
        case NSStreamEventErrorOccurred: {
            [self stopSendWithStatus:@"Stream open error"];
        } break;
        case NSStreamEventEndEncountered: {
        // ignore
        } break;
        default: {
            assert(NO);
        } break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:01:05.327

试试这个代码..希望它会帮助你..

```
- (void)sendDidStart
{
    // self.statusLabel.text = @"Sending";
    [[NetworkManager sharedInstance] didStartNetworkOperation];

}

- (void)updateStatus:(NSString *)statusString
{
    assert(statusString != nil);
    //self.statusLabel.text = statusString;
}

- (void)sendDidStopWithStatus:(NSString *)statusString
{
    if (statusString == nil) {
        statusString = @"Put succeeded";
    }
    [[NetworkManager sharedInstance] didStopNetworkOperation];
}

#pragma mark * Core transfer code

// This is the code that actually does the networking.

// Because buffer is declared as an array, you have to use a custom getter.  
// A synthesised getter doesn't compile.

- (uint8_t *)buffer
{
    return self->_buffer;
}

- (BOOL)isSending
{
    return (self.networkStream != nil);
}

- (void)startSend:(NSString *)filePath
{
    BOOL                    success;
    NSURL *                 url;
    NSLog(@"localfilepath..:%@",localFilePath);
    assert(localFilePath != nil);
    assert([[NSFileManager defaultManager] fileExistsAtPath:localFilePath]);
    assert( [localFilePath.pathExtension isEqual:@"png"] || [localFilePath.pathExtension isEqual:@"jpg"] );

    assert(self.networkStream == nil);      // don't tap send twice in a row!
    assert(self.fileStream == nil);         // ditto

    // First get and check the URL.

    url = [[NetworkManager sharedInstance] smartURLForString:@"ftp://yourFTPLink/"];
    success = (url != nil);

    if (success) {
        // Add the last part of the file name to the end of the URL to form the final 
        // URL that we're going to put to.

        // url = CFBridgingRelease(
        // CFURLCreateCopyAppendingPathComponent(NULL, (__bridge CFURLRef) url, (__bridge CFStringRef) @"minkle.png" , false)
        // );
        url = CFBridgingRelease(
                                CFURLCreateCopyAppendingPathComponent(NULL, ( CFURLRef) url, ( CFStringRef) imageString , false)
                                );

        success = (url != nil);
    }

    // If the URL is bogus, let the user know.  Otherwise kick off the connection.

    if ( ! success) {
        // self.statusLabel.text = @"Invalid URL";
    }    
    else 
    {

        // Open a stream for the file we're going to send.  We do not open this stream; 
        // NSURLConnection will do it for us.

        self.fileStream = [NSInputStream inputStreamWithFileAtPath:localFilePath];
        assert(self.fileStream != nil);

        [self.fileStream open];

        // Open a CFFTPStream for the URL.

        self.networkStream = CFBridgingRelease(
                                               CFWriteStreamCreateWithFTPURL(NULL, ( CFURLRef) url)
                                               );
        assert(self.networkStream != nil);

        // if ([self.usernameText.text length] != 0) {
        success = [self.networkStream setProperty:@"yourUserName" forKey:(id)kCFStreamPropertyFTPUserName];
        assert(success);
        success = [self.networkStream setProperty:@"yourPassword" forKey:(id)kCFStreamPropertyFTPPassword];
        assert(success);
        //}

        self.networkStream.delegate = self;
        [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [self.networkStream open];

        // Tell the UI we're sending.

        [self sendDidStart];
    }
}

- (void)stopSendWithStatus:(NSString *)statusString
{
    if (self.networkStream != nil) {
        [self.networkStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        self.networkStream.delegate = nil;
        [self.networkStream close];
        self.networkStream = nil;
    }
    if (self.fileStream != nil) {
        [self.fileStream close];
        self.fileStream = nil;
    }
    [self sendDidStopWithStatus:statusString];
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
// An NSStream delegate callback that's called when events happen on our 
// network stream.
{
#pragma unused(aStream)
    assert(aStream == self.networkStream);

    switch (eventCode) {
        case NSStreamEventOpenCompleted: {
            [self updateStatus:@"Opened connection"];
        } break;
        case NSStreamEventHasBytesAvailable: {
            assert(NO);     // should never happen for the output stream
        } break;
        case NSStreamEventHasSpaceAvailable: {
            [self updateStatus:@"Sending"];

            // If we don't have any data buffered, go read the next chunk of data.

            if (self.bufferOffset == self.bufferLimit) {
                NSInteger   bytesRead;

                bytesRead = [self.fileStream read:self.buffer maxLength:jSendBufferSize];

                if (bytesRead == -1) {
                    [self stopSendWithStatus:@"File read error"];
                } else if (bytesRead == 0) {
                    [self stopSendWithStatus:nil];
                } else {
                    self.bufferOffset = 0;
                    self.bufferLimit  = bytesRead;
                }
            }

            // If we're not out of data completely, send the next chunk.

            if (self.bufferOffset != self.bufferLimit) {
                NSInteger   bytesWritten;
                bytesWritten = [self.networkStream write:&self.buffer[self.bufferOffset] maxLength:self.bufferLimit - self.bufferOffset];
                assert(bytesWritten != 0);
                if (bytesWritten == -1) {
                    [self stopSendWithStatus:@"Network write error"];
                } else {
                    self.bufferOffset += bytesWritten;
                }
            }
        } break;
        case NSStreamEventErrorOccurred: {
            [self stopSendWithStatus:@"Stream open error"];
        } break;
        case NSStreamEventEndEncountered: {
            // ignore
        } break;
        default: {
            assert(NO);
        } break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:56:07.443

你有没有打开这个字符串：

```
/Users/JBG/Library/Application Support/iPhone Simulator/6.0/Applications/734F4DC6-8683-42BB-AB0D-A5553BC22C55/Documents/100046-003.jpg 
```

到文件 URL 中？

您应该使用`fileURLWithPath:`[NSURL](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html] 文档中的内容来转换字符串到正确的 URL 的路径。

# java - 用于读取和写入 DDS 纹理的 Java 库

> ID：14893094
> 
> 赞同：2
> 
> 时间：2013-02-15T10:51:57.557
> 
> 标签：java, directx, dds-format

我正在寻找一个用于以 DDS 格式读取和写入图像的 Java 库。最好是所有子格式（DXT1c，DXT1a，DXT3，DXT5，...）

谷歌搜索还没有为我带来任何结果，所以我在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T07:13:02.013

我认为以下链接会对您有所帮助。所有这些链接都与读取和转换 DDS 图像有关。

[https://github.com/Dahie/DDS-Utils](https://github.com/Dahie/DDS-Utils)

[http://www.javaworld.com/javaworld/javatips/jw-javatip43.html?page=1](http://www.javaworld.com/javaworld/javatips/jw-javatip43.html?page=1)

[http://www.omg.org/spec/DDS-Java/1.0/Beta2/](http://www.omg.org/spec/DDS-Java/1.0/Beta2/)

[https://www.java2s.com/Open-Source/Java/Java-3D/ferox-gl/com/ferox/util/texture/loader/DDSTexture.java.htm](https://www.java2s.com/Open-Source/Java/Java-3D/ferox-gl/com/ferox/util/texture/loader/DDSTexture.java.htm)

[http://code.google.com/p/java-dds/](http://code.google.com/p/java-dds/)

[http://nuicode.svnrepository.com/svn/community-earth/CommunityEarth%20-%20NBProject/src/gov/nasa/worldwind/formats/dds/DDSConverter.java](http://nuicode.svnrepository.com/svn/community-earth/CommunityEarth%20-%20NBProject/src/gov/nasa/worldwind/formats/dds/DDSConverter.java)

[http://www.guyford.co.uk/showpage.php?id=122&page=Creating_a_Texture_from_a_Buffered_Image_in_JOGL](http://www.guyford.co.uk/showpage.php?id=122&page=Creating_a_Texture_from_a_Buffered_Image_in_JOGL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:41:58.317

你确定你用谷歌搜索过？快速搜索“dds image java”让我：

*   [http://code.google.com/p/java-dds/](http://code.google.com/p/java-dds/)
*   [http://www.jmonkeyengine.com/doc/com/jme/image/util/DDSLoader.DDSReader.html](http://www.jmonkeyengine.com/doc/com/jme/image/util/DDSLoader.DDSReader.html)
*   [http://devblog.ctdp.net/2009/12/dds-utilities-released/](http://devblog.ctdp.net/2009/12/dds-utilities-released/)

# php - jQuery 和带有 JSON 的模板

> ID：14893095
> 
> 赞同：1
> 
> 时间：2013-02-15T10:52:08.160
> 
> 标签：php, jquery, templates, handlebars.js

我正在尝试使用把手（模板）通过 ajax 组织获取的 jSon 对象

这是对象的样子，**PHP：**

```
[0] => Url Object
    (
        [url_id] => 1
        [url] => www.stackoverflow.com
        [tags] => Array
            (
                [0] => Tag Object
                    (
                        [tag_id] => 1
                        [tag_name] => programming
                    )

                [1] => Tag Object
                    (
                        [tag_id] => 2
                        [tag_name] => questions
                    )

            )

    )

[1] => Url Object
    (
        [url_id] => 2
        [url] => www.twitter.com
        [tags] => Array
            (
                [0] => Tag Object
                    (
                        [tag_id] => 3
                        [tag_name] => messaging
                    )

            )

    ) 
```

我可以通过以下方式从 Object[0] 和 object [1] 获取 url_id 和 url：**（JQUERY）**

```
$.getJSON(url,function(data){

                    Bookmarks = $.map(data,function(bookmark){ //segundo param = callback function

                                    return{
                                      url_id: bookmark.url_id,
                                      url: bookmark.url,
                                      tags: bookmark.tags
                                          }
                                                                  });

                var contenedor = $('#scriptmark').html();
                var template = Handlebars.compile(contenedor);
                var i = 0;
                while( i < Bookmarks.length){
                $('#sites').append(template(Bookmarks[i]));
                i++;}
        }); 
```

最后，这就是我的模板的样子：

```
<script id="script" type="text/x-handlebars-template">

            <div class="site">
            Site: {{url}} Tags: {{tag}}
            </div>

</script> 
```

**我正在尝试弄清楚如何获取这些标签，因为当我进行打版时，我显然会返回 Object**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:25:30.380

也许是这样的？

```
 Bookmarks = $.map(data,
     function(bookmark){ //segundo param = callback function
         var tagstring="";
         $.each(bookmark.tags, function(index, value){
              if(index > 0){tagstring+=", ";}
              tagstring+=value.tag_id+"-->"+value.tag_name;
         }
         return
         {
                url_id: bookmark.url_id,
                url: bookmark.url,
                tags: tagstring
         }
      }
 ); 
```

# microsoft-dynamics - 名称为“Dynamics.Ax.application”的重复类型。 ' 在程序集 'Dynamics.Ax.application 中，

> ID：14893099
> 
> 赞同：4
> 
> 时间：2013-02-15T10:52:11.533
> 
> 标签：microsoft-dynamics, dynamics-ax-2012, axapta

我在 Dynamics 2012 ax 中编译 CIL 时看到以下错误 -

名称为“Dynamics.Ax.application”的重复类型。在汇编'Dynamics.Ax.application，版本= 6.0.947.280，文化......

我试过了

1.  从 AOT 中删除课程
2.  删除 XppIL 目录 (c:\Program Files\Microsoft Dynamics AX\60\Server\InstanceName\bin)
3.  重启 AOS
4.  运行 CIL 编译

我还能尝试什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T13:15:08.780

以下应该可以解决问题：

*   完整编译 AX
*   停止 AOS
*   截断 SQL 中的 SysXPPAssembly 表（该表用于包含程序集并在多个 AOS 实例之间共享）
*   删除 AOS 的 bin\xppIL 目录中的 DLL 和 netmodule 文件
*   重新启动 AOS
*   执行完整的 CIL 生成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T17:03:11.593

这就是我的工作方式（这次）。

1.  停止 AOS
2.  删除/移动 XppIL 目录 (c:\Program Files\Microsoft Dynamics AX\60\Server\InstanceName\bin)
3.  重启 AOS
4.  运行完整的 CIL 编译
5.  Infolog 显示完整 CIL 返回的错误列表。
6.  本地编译有问题的类/项目，我需要更正代码。
7.  执行另一个完整的 CIL

# sql - SQL - 计算没有分组的总体平均值？

> ID：14893102
> 
> 赞同：0
> 
> 时间：2013-02-15T10:52:24.097
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

我有 2 个临时表 1 存储 2 列，Locationid，平均值，另一个存储总体平均值。

我已成功填充位置和平均列，但无法弄清楚如何进行整体平均，然后在 SELECT 中将它们连接在一起。我可以计算出总体平均值，但我无法弄清楚如何将其加入第一个临时表。

语句示例

```
SELECT AVG(Hours) AS OverallAverage
FROM Hours 
```

这可以计算出总体平均值，但我需要一些东西来加入它，即 Locationid 但如果我将 Locationid 添加到选择中，那么它将需要一个分组，因此给我每个位置的平均值而不是总体平均值。

表格的外观示例

```
LocationID 平均 总体平均
1 0.7 0.65
2 0.55 0.65
3 0.45 0.65
4 0.9 0.65

```

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:55:18.990

您可以使用`CROSS APPLY`：

```
select l.locationid, h.OverallAverage
from Location l
cross apply
(
  select avg(hours) as OverallAverage
  from hours
) h 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3e7b2/2)

甚至一个`CROSS JOIN`

```
select l.locationid, h.OverallAverage
from Location l
cross join
(
  select avg(hours) as OverallAverage
  from hours
) h 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3e7b2/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:56:25.217

我不清楚你的意思是“*但我需要一些东西来加入*”（尤其是那个“东西”），但你可以做这样的事情：

```
select t2.col1, 
       t2.col2,
       hr.col1,
       avg(hr.hours) over (partition by locationid) as average
       avg(hr.hours) over () as overall_average
from hours hr
  join table_2 t2 on t2.locationid = hr.locationid 
```

# c++ - ncurses：移动/调整窗口大小后 wgetch 无法正确读取

> ID：14893106
> 
> 赞同：2
> 
> 时间：2013-02-15T10:52:51.710
> 
> 标签：c++, c, cursor, ncurses, curses

在移动和调整窗口大小后，我很难尝试`wgetch`从窗口读取数据。

输入后，我将窗口向上移动并将其高度也增加 1。然后我清除窗口并将数据写回它。问题是当我这样做`wgetch`（或`mvwgetch`）它在我向上移动窗口之前将输入光标定位在上一个位置。

这是我的代码：

```
#include <ncurses.h>

int main() {
    WINDOW *win=initscr();
    int y,x,i=1;
    getmaxyx(win, y, x);

    //creates a sub windows 1 col high
    WINDOW *child=derwin(win, i, x, y-i, 0); 

    //doc says to touch before refresh
    touchwin(win);

    //print to child
    waddstr(child, "hello");
    wrefresh(child);
    wrefresh(win);

    noecho();
    while(wgetch(child)!='q') {
            ++i;
            mvderwin(child, y-i, 0);
            wresize(child, i, x);
            touchwin(win);

            wclear(child);

            waddstr(child,"hello");
            wrefresh(child);
            wrefresh(win);
    }
    delwin(child);
    delwin(win);
    endwin();
} 
```

这里“hello”这个词确实按预期向上移动，但是输入光标在错误的位置。使用`mvwgetch`仍然会导致同样的问题。`cbreak()`，`noecho()`而且`scrollok(child)`似乎也没有帮助。

谢谢

编辑：更新版本更好地显示问题[http://liveworkspace.org/code/31DruQ](http://liveworkspace.org/code/31DruQ) $0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:55:30.707

您必须捕获 SIGWINCH，该信号在您调整终端大小时发送。执行 endwin()、refresh()，然后重新绘制窗口。光标位置是相对于窗口的，而不是实际的终端大小。窗口不会自动调整大小。

编辑：对，你实际上是在调整窗口的大小，而不是终端。在这种情况下，首先，对子 LAST 进行一次刷新，屏幕上显示的光标是最后一次刷新的光标。

在您的子窗口周围放一个框，并检查它们实际上是否正确调整大小/移动。

# scala - Akka 和 Typesafe 配置版本问题

> ID：14893109
> 
> 赞同：3
> 
> 时间：2013-02-15T10:52:57.383
> 
> 标签：scala, version, config, akka

我尝试在 Tomcat 服务器上使用 akka 2.1.0。但是我收到一个错误，要求我也将配置库放在类路径中。

好吧，这不是问题。我将Typesafe的配置库，版本1.0.0（最新）放在lib文件夹中。但是，我总是得到错误

```
8d31597e-1b6e-4be5-9773-4fb7e0591312akka.ConfigurationException: Akka JAR version [2.1.0] does not match the provided config version [2.0]
    at akka.actor.ActorSystem$Settings.<init>(ActorSystem.scala:172)
    at akka.actor.ActorSystemImpl.<init>(ActorSystem.scala:465)
    at akka.actor.ActorSystem$.apply(ActorSystem.scala:111)
    at akka.actor.ActorSystem$.apply(ActorSystem.scala:93) 
```

lib文件夹中的jar文件是：

*   akka-actor_2.10-2.1.0.jar
*   config-1.0.0.jar
*   scala-library-2.10.0.jar

这个问题从何而来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T12:01:52.777

它加载一个包含`akka.version=2.0`但预期的配置文件`2.1.0`。您可能错误地`akka.version`在`application.conf`. 删除该设置。否则，您的类路径中有一个 akka-actor 2.0 jar 文件。

# c# - 为什么.NET Framework 中存在两个相等的接口？

> ID：14893114
> 
> 赞同：2
> 
> 时间：2013-02-15T10:53:21.433
> 
> 标签：c#, .net, wpf, winforms

为什么.NET Framework 中存在两个相等的接口？

，`System.Windows.Forms.IWin32Window`和`System.Windows.Interop.IWin32Window`。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:14:08.527

`System.Windows.Forms.IWin32Window`当您使用`WinForms`. `System.Windows.Interop.IWin32Window`当您使用`WPF`.

存在这两个接口的主要目的是，您在使用时不需要参考`WinForms`特定的程序集，`WPF`反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:00:54.093

我想这只是为了方便，所以您不需要完全不相关的`Forms`程序集，然后您实际上是在使用 WPF，因此您可以避免短名称冲突和 IntelliSense 垃圾。

# angularjs - 控制器之间无法通信

> ID：14893122
> 
> 赞同：0
> 
> 时间：2013-02-15T10:53:42.207
> 
> 标签：angularjs

**预赛**

我正在使用 angularjs 开发一个网络应用程序。在某些时候，我的主控制器连接到一个连续发送数据的 Web 服务。捕获和处理我正在使用的流（[http://ajaxpatterns.org/HTTP_Streaming](http://ajaxpatterns.org/HTTP_Streaming)）。一切都像魅力一样。我想与另一个控制器共享这些流数据，该控制器将通过 jquery 图表库处理和显示它们（尚未决定我要使用哪个，但它超出了这个问题的范围）。为了分享这些数据，我关注了这个 jsfiddle ( [http://jsfiddle.net/eshepelyuk/vhKfq/](http://jsfiddle.net/eshepelyuk/vhKfq/) )。

请在下面找到我的代码的一些相关部分。

模块、路由和服务定义：

```
var platform = angular.module('platform', ['ui']);

platform.config(['$routeProvider',function($routeProvider){
    $routeProvider.
        when('/home',{templateUrl:'partials/home.html',controller:PlatformCtrl}).
        when('/visu/:idVisu', {templateUrl: 'partials/visuTimeSeries.html',controller:VisuCtrl}).
        otherwise({redirectTo:'/home',templateUrl:'partials/home.html'})
}]);

platform.factory('mySharedService', function($rootScope) {
    return {
        broadcast: function(msg) {
            $rootScope.$broadcast('handleBroadcast', msg); 
        }
    };
}); 
```

PlatformCtrl 定义：

```
function PlatformCtrl($scope,$http,$q,$routeParams, sharedService) {

  ...

  $scope.listDataVisu ={};

  ...

  $scope.listXhrReq[idVisu] = createXMLHttpRequest();
  $scope.listXhrReq[idVisu].open("get", urlConnect, true);
  $scope.listXhrReq[idVisu].onreadystatechange = function() {
     $scope.$apply(function () {
       var serverResponse = $scope.listXhrReq[idVisu].responseText;
       $scope.listDataVisu[idVisu] = serverResponse.split("\n");
       sharedService.broadcast($scope.listDataVisu);
    });
  };
  $scope.listXhrReq[idVisu].send(null);
  var w = window.open("#/visu/"+idVisu);

  $scope.$on('handleBroadcast', function(){
    console.log("handleBroadcast (platform)");
  });

} 
```

VisuCtrl 定义：

```
function VisuCtrl($scope,$routeParams,sharedService) {

    $scope.idVisu = $routeParams.idVisu;
    $scope.data = [];

    /* ***************************************
     *   LISTENER FOR THE HANDLEBROADCAST EVENT
     *****************************************/ 

    $scope.$on('handleBroadcast', function(event,data){
        console.log("handleBroadcast (visu)");
        $scope.data = data[$scope.idVisu];
    });

} 
```

注射：

```
PlatformCtrl.$inject = ['$scope','$http','$q','$routeParams','mySharedService'];
VisuCtrl.$inject = ['$scope','$routeParams','mySharedService']; 
```

**问题定义**

运行此代码时，看起来只有`PlatformCtrl`控制器在监听`handleBroadcast`事件。实际上，只有在`handleBroadcast (platform)`每次新数据到达时才会查看控制台显示的所有内容。我很惊讶，因为我在官方文档中读到了这个`$broadcast`函数

> 向下分派事件名称到所有子作用域（及其子作用域），通知已注册的 ng.$ro​​otScope.Scope#$on 侦听器。

由于给定应用程序中的所有范围都继承自`$rootScope`，因此我不明白为什么每次广播新数据时都不会启动`$on`函数 in 。`VisuCtrl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:59:50.443

我认为当你打开一个新的浏览器窗口时，你正在启动一个新的 AngularJS 实例。这样，两个控制器不可能通过服务进行通信。

如果您在范围通信方面遇到问题，您可以注入 $rootScope 并查看是否所有应该通信的范围都实际实例化。

```
function VisuCtrl($scope, $routeParams, sharedService, $rootscope) {
    console.log($rootScope);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:40:11.470

您的请求流来自 angular，因此直到下一个 $digest 阶段才会被识别（请参阅 angular 如何通过脏匹配处理双向绑定）。要进入角度世界，您需要使用`$apply`：

```
 $scope.listXhrReq[idVisu].onreadystatechange = function() {
     $scope.$apply(function () {
       var serverResponse = $scope.listXhrReq[idVisu].responseText;
       $scope.listDataVisu[idVisu] = serverResponse.split("\n");
       sharedService.broadcast($scope.listDataVisu);
     });
  }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:57:13.297

可能是您的 VisuCtrl 尚未初始化，因为您使用的是自定义路由？当您导航到 时，它是否仍然相同`/visu/:idVisu`？

# iphone - UILocalNotification 在我的设备中不起作用

> ID：14893123
> 
> 赞同：1
> 
> 时间：2013-02-15T10:53:42.437
> 
> 标签：iphone, ios, ipad, uilocalnotification

这是我在应用程序中用于生成本地通知的代码：

```
 UILocalNotification *aNotification = [[UILocalNotification alloc] init];
 if (aNotification == nil)
 {
     NSLog(@"localNotif");
     return;
 }

 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
 NSTimeZone *sourceTimeZone = [NSTimeZone timeZoneForSecondsFromGMT:19800];
 [dateFormatter setTimeZone:sourceTimeZone];
 NSDate *sourceDate = [dateFormatter dateFromString:@"2013-02-16 15:00:00"];

 NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];
 NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
 NSTimeInterval interval = destinationGMTOffset;
 NSDate* destinationDate = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate];
 aNotification.fireDate = destinationDate;
 aNotification.timeZone = [NSTimeZone defaultTimeZone];

 NSLog(@"destinationDate %@",destinationDate);

 aNotification.alertBody = @"About To Start";
 aNotification.alertAction = @"View";
 [[UIApplication sharedApplication] scheduleLocalNotification:aNotification];
 [dateFormatter release];
 [destinationDate release];
 [aNotification release]; 
```

但是当我通过从设置应用程序更改日期和时间在设备中对其进行测试时，该事件没有触发。我究竟做错了什么？

当我在控制台中打印`destinationDate`时，它是这样的：

```
destinationDate 2013-02-16 15:00:00 +0000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:04:13.967

看看这个教程，它可能对你有帮助..

[http://www.theappcodeblog.com/2011/04/28/local-notifications-tutorial-add-a-local-notification-to-your-iphone-app/](http://www.theappcodeblog.com/2011/04/28/local-notifications-tutorial-add-a-local-notification-to-your-iphone-app/)

# mysql - 如何优化这个 mysql 3 表连接查询？

> ID：14893124
> 
> 赞同：0
> 
> 时间：2013-02-15T10:53:46.327
> 
> 标签：mysql, query-performance

```
SELECT 
  a.idmotcle,
  a.motcle, 
  count(DISTINCT c.id) as 'Programs',
  count(DISTINCT d.id) as 'Searches',
  FORMAT(count(DISTINCT d.id)/count(DISTINCT c.id),2) as 'S/P'

FROM motcle a
INNER JOIN motcle b 
     ON b.idmotcle=a.idmotcle AND a.archive=0
LEFT JOIN masters_keywords_nton c 
     ON c.id_motcle=a.idmotcle
LEFT JOIN master_search_log_tbl d 
     ON d.search_string LIKE concat('%',a.motcle,'%')
GROUP BY a.idmotcle
ORDER BY a.motcle 
```

表 - 总记录约

斑点 - 200

masters_keywrods_nton - 1300

master_search_log_tbl - 4800

我已经在 ON 子句中使用的所有字段上都有索引。

当我在生产环境中运行它时，查询当前需要 62.887 秒。

我觉得有一些更好的方法来进行加入和计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:29:14.183

如果您需要查询优化方面的帮助，请提供查询的 EXPLAIN 计划和 CREATE 表语句。

了解查询的作用也很重要——您应该为查询中的每个短语/表达式提供解释。

就像你为什么要在同一个领域加入 motcle 到自己？你为什么使用左连接？为什么将空值计为匹配项？

粗略猜测，我怀疑这可能会给你你需要的东西：

```
SELECT 
  a.idmotcle,
  a.motcle, 
  count(DISTINCT c.id) as 'Programs',
  count(DISTINCT d.id) as 'Searches',
  FORMAT(count(DISTINCT d.id)/count(DISTINCT c.id),2) as 'S/P'
FROM motcle a
INNER JOIN masters_keywords_nton c 
 ON c.id_motcle=a.idmotcle
INNER JOIN master_search_log_tbl d 
 ON d.search_string LIKE concat('%',a.motcle,'%')
WHERE a.archive=0
GROUP BY a.idmotcle
ORDER BY a.motcle 
```

但是这里明显的 WTF 是您的数据没有被规范化 (d.search_string LIKE concat('%',a.motcle,'%')) - 修复它会给你带来最大的性能改进并修复潜在的功能错误代码。（使用全文索引可能会提供暂时的缓刑）。

# neo4j - Cypher 查询最短路径

> ID：14893127
> 
> 赞同：0
> 
> 时间：2013-02-15T10:53:50.640
> 
> 标签：neo4j, cypher

我这样构建一个图形：节点代表：busStops，关系代表连接公共汽车站的公交线路。

关系类型对应于从一个节点到另一个节点所需的时间。

当我查询图形（感谢 cypher）以获取可能未链接的两个之间的最短路径时，结果是使用的关系数量最少的那个。

我会改变它，以便最短路径对应于两个节点之间使用的所有关系类型（对应于时间）的添加最小的路径？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T12:38:37.127

首先，你做错了。不要每次都使用唯一的关系类型。使用一种关系类型，然后在所有关系上放置一个属性“时间”。

其次，要计算加法，您可以使用以下密码公式：

```
START from=node({busStopId1}), to=node({busStopId2})
MATCH p=from-[:LINE*]-to  //asterix * means any distance
RETURN p,reduce(total = 0, r in relationships(p): total + r.time) as tt
ORDER by tt asc; 
```

# entity-framework-4.1 - 如何列出打开的dataReadres

> ID：14893129
> 
> 赞同：0
> 
> 时间：2013-02-15T10:53:55.110
> 
> 标签：entity-framework-4.1

我收到“*与此命令关联的 DataReader 已打开。它必须首先关闭*”错误（翻译自法语，可能不准确）。我理解这个问题，但没有一个简单的方法可以知道“已经打开的 DataReader”是哪个。我的问题是：当我停止错误时，我是否有办法列出或查看当前打开的 dataReders。提前致谢。BB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:57:35.513

可能您使用的是相同的连接。尝试将您的代码包含在如下所示的`using`语句中

```
using (SqlConnection conn  = new SqlConnection())
{
    conn.Open();
    Sqlmd.Connection = conn;  // Sqlmd is your command
    SqlDataAdapter da = new SqlDataAdapter(Sqlmd);
   //...etc
} 
```

# c# - 如何使用 Socket 在 C# .net 中获取 Winsock.state

> ID：14893130
> 
> 赞同：0
> 
> 时间：2013-02-15T10:54:04.607
> 
> 标签：c#, sockets, winsock

我们正在为 c sharp.net 实现 VB6 代码以进行客户端服务器通信。在VB6中用于通信使用Winsock控件并检查客户端/远程连接状态是否可用。在 C sharp 中，我们使用 tcplistner 类和 socket 类进行通信。但是我们不知道如何检查远程/客户端的状态是否已连接。

套接程序, ASP.Net C#, VS2008

VB6 代码

```
'checking socket status

if CommForm.Sock(i).State <> sckClosed then
s="Connection opened"
else
s="Connection closed"
end if

Public Function GetSockStatus()
{
  Select Case CommForm.Sock(i).State
  Case sckClosed
    GetSockStatus = "Closed"
  Case sckOpen
    GetSockStatus = "Open"
  Case sckListening
    GetSockStatus = "Listening"
  Case sckConnectionPending
    GetSockStatus = "Connection pending"
  Case sckResolvingHost
    GetSockStatus = "Resolving host"
  Case sckHostResolved
    GetSockStatus = "Host resolved"
  Case sckConnecting
    GetSockStatus = "Connecting"

} 
```

* * *

C#代码：

对于代码 CommForm.Sock(i).State <> sckClosed ，我尝试在 ASP.net C#

```
 if(!client.Connected) 
```

客户端是 .net 中的 sockect 对象

但是我在 .net 中找不到任何等效的 CommForm.Sock(i).State 代码，有一个返回 True/False 的 .poll，但是还有其他可以像在 VB6 WinSock 中那样为我们提供套接字状态的代码。

# android - 致命异常：Timer-0，Timer$TimerImpl.run android 服务中的错误

> ID：14893131
> 
> 赞同：0
> 
> 时间：2013-02-15T10:54:05.710
> 
> 标签：android, nullpointerexception, android-service, fatal-error

我在我的应用程序中创建了 1 个后台服务，用于提醒会议。在这个应用程序中，我得到

```
02-15 15:29:19.251: E/AndroidRuntime(7878): FATAL EXCEPTION: Timer-0
02-15 15:29:19.251: E/AndroidRuntime(7878): java.lang.NullPointerException
02-15 15:29:19.251: E/AndroidRuntime(7878):at com.oceans.reminderApp.ReminderAppService.doServiceWork(ReminderAppService.java:100)
02-15 15:29:19.251: E/AndroidRuntime(7878): at com.oceans.reminderApp.ReminderAppService$1.run(ReminderAppService.java:78)02-15 15:29:19.251: E/AndroidRuntime(7878): at java.util.Timer$TimerImpl.run(Timer.java:284)02-15 15:29:37.473: I/Process(7878): Sending signal. PID: 7878 SIG: 9

02-15 15:29:57.663: E/AndroidRuntime(8029): FATAL EXCEPTION: Timer-0
02-15 15:29:57.663: E/AndroidRuntime(8029): java.lang.NullPointerException
02-15 15:29:57.663: E/AndroidRuntime(8029): at com.oceans.reminderApp.ReminderAppService.doServiceWork(ReminderAppService.java:100)
02-15 15:29:57.663: E/AndroidRuntime(8029): at com.oceans.reminderApp.ReminderAppService$1.run(ReminderAppService.java:78)
02-15 15:29:57.663: E/AndroidRuntime(8029): at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

这是我的服务..

```
public class ReminderAppService extends Service{

public static TestAdapter dbAdp;
public static FirstActivity MAIN_ACTIVITY;  

int nDay,nMonth,nYear,nHour,nMin;

private Timer timer=new Timer();   

private static long DELAY_INTERVAL = 0 ; 

private static long UPDATE_INTERVAL = 1 * 6 * 10000;
SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy HH:mm");

public static void setMainActivity(FirstActivity activity)
{
  MAIN_ACTIVITY = activity; 
  dbAdp = new TestAdapter(activity.getApplicationContext());
}

public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
     _startService();
      if (MAIN_ACTIVITY != null)  Log.d(getClass().getSimpleName(), "Reminder App Service started");
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
     _shutdownService();
     if (MAIN_ACTIVITY != null)  Log.d(getClass().getSimpleName(), "Reminder App Service stopped");
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
}

 private void _startService()
    {     
        timer.scheduleAtFixedRate(   

              new TimerTask() {

                    public void run() {

                        try{

                            doServiceWork();

                            Thread.sleep(UPDATE_INTERVAL);

                        }catch(InterruptedException ie){

                            Log.e(getClass().getSimpleName(), "Reminder App Service InterruptedException"+ie.toString());
                        }

                    }
                  },
                  DELAY_INTERVAL,
                  UPDATE_INTERVAL);
    }

    /*
     * start the processing, the actual work, getting config params, get data from network etc
     */
    public void doServiceWork()
    {
        //Toast.makeText(getApplicationContext(), "helllllllllo", Toast.LENGTH_SHORT).show();
            dbAdp.open();
            getCalendar();
            checkMeetingReminder();
            dbAdp.close();

    }

    public void getCalendar(){
        Calendar cal = Calendar.getInstance();
        nDay = cal.get(Calendar.DATE);
        nMonth = cal.get(Calendar.MONTH);
        nYear = cal.get(Calendar.YEAR);
        nHour= cal.get(Calendar.HOUR_OF_DAY);
        nMin = cal.get(Calendar.MINUTE);
    }

    public void checkMeetingReminder(){
        Cursor meetCursor = dbAdp.meeting_queueAll();
        if(meetCursor.moveToFirst() && meetCursor.getCount() >0){
            do{
                try {

                    String mDate = meetCursor.getString(meetCursor.getColumnIndex(dbAdp.MEETING_REMINDER_DATETIME));
                    String mTag = meetCursor.getString(meetCursor.getColumnIndex(dbAdp.MEETING_TAG));
                    String mId = meetCursor.getString(meetCursor.getColumnIndex(dbAdp.MEETING_ID));
                    int snoozeStatus = meetCursor.getInt(meetCursor.getColumnIndex(dbAdp.SNOOZE_OFF));
                    java.util.Date meetDate = dateFormat.parse(mDate);
                    java.util.Date todayDate = new java.util.Date(nYear-1900,nMonth,nDay,nHour,nMin);

                    if (meetDate.equals(todayDate)){
                        Intent i = new Intent(ReminderAppService.this, ReminderAlertClass.class);
                        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        i.putExtra("MeetingId", mId);
                        i.putExtra("Message", "Time For Meeting " + mTag);
                        i.putExtra("MeetingDate",mDate);
                        startActivity(i);
                        Log.i("Meeting Reminder :", "Time for Meeting "+mTag);
                    }
                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("Meeting Reminder Parse :", e.getMessage());
                } catch (TimeFormatException e){
                    Log.e("Meeting Reminder Time format :", e.getMessage());
                }

            }while(meetCursor.moveToNext());
        }
        meetCursor.close();
    }

    /*
     * shutting down the service
    */
    private void _shutdownService()
    {
      if (timer != null) timer.cancel();
    }
} 
```

谁能告诉我错误在哪里，我该如何解决？任何形式的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:18:14.907

第一条评论是正确的，您使用的是空 dbAdp。你有一个静态函数来设置 dbAdp 并且你正在这样做以获取应用程序内容，我建议在 onCreate 函数中初始化 dbAdp，Service 也是一个上下文，所以你应该能够调用 this.getApplicationContext()

这不会回答您的问题，但可能会为您节省一些时间，我发现 Timer 在某些不遵守固定费率请求并一次拨打多个电话的 android 版本中存在缺陷。查看 AlarmManager 进行调度而不是使用服务：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

# kinect - Kinect 色框形式

> ID：14893133
> 
> 赞同：0
> 
> 时间：2013-02-15T10:54:13.293
> 
> 标签：kinect, openkinect

我很好奇 Kinect 中色框的格式。是 RGB 还是 BRG + alpha。我认为即将提供的信息是 BRG 格式，但可以为我澄清一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:05:06.367

我想，您可以通过声明颜色格式来选择它。这是参考：[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.kinect.colorimageformat.aspx)

# spring - EJB 的集成测试

> ID：14893138
> 
> 赞同：0
> 
> 时间：2013-02-15T10:54:30.343
> 
> 标签：spring, integration-testing, junit4

我有一组 EJB，它们通过一组 DAO 类从 Sybase 数据库中持久化和检索数据。DAO 类是 POJO，它们直接在 JDBC 数据源上执行 sql 过程（准备好的语句）。使用数据库中一些有意义的模拟数据，为这些 EJB 准备集成测试套件的合适框架是什么？spring/junit 提供一些帮助吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:32:22.100

我认为单元测试就足够了，具体取决于您要验证的内容。

如果您只需要测试 EJB，我会使用在内存中工作的 DAO 的模拟版本（例如，带有 HashMap 来保存和检索数据的 DAO），这样您就可以将测试集中在您的输入和输出上EJB 方法。通过这种方式，您还可以以编程方式填充您的测试数据。

如果您还需要测试由 DAO 生成的 Sybase 语句，我认为您可以将实际执行语句的方法与生成 SQL 的方法分开，这样您就可以验证生成的 SQL 而无需连接到数据库。

如果您确实需要针对数据库引擎验证您的测试，您可以尝试使用有效的数据库连接为您的集成测试配置配置[文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)，并将此连接绑定到您的 DAO bean。您甚至可以通过脚本使用一些测试数据填充此数据库。

# c++ - C++ 源文件中的不可打印 (0xFF) 字节

> ID：14893141
> 
> 赞同：6
> 
> 时间：2013-02-15T10:54:40.783
> 
> 标签：c++, editor

这个特定的 C++ 代码项目有 0xFF 字节标记，作为函数定义的前缀。

这样做的目的是什么？它是为了帮助一些简单的源文件解析器吗？

显然编译器忽略了这些标记。

![C源文件中出现奇怪的字符](../Images/8a29025b9ed83509c49391d40077489f.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T10:57:41.240

那可能是[Form Feed (ASCII 12) (on ***wiki-pedia*** )](http://en.wikipedia.org/wiki/Page_break)，换句话说就是一个空白字符。

> 换页符有时在源代码的纯文本文件中用作分页符的分隔符或代码段的标记。**一些编辑器，特别是 emacs，有内置的命令来向上/向下翻页换页符**。这种约定主要用于 Lisp 代码，也可以在 Python 源代码中看到。

当源代码通常打印在纸上以供审查/存档时，它曾经在源代码中很常见。

打印将`FF`在纯文本文档中解释为“分页符”

半相关：[https ://twitter.com/sehetw/status/297904888321544192](https://twitter.com/sehetw/status/297904888321544192)

# ios - 如何删除设备（iphone和ipad）中cache.db中的下载图像数据

> ID：14893143
> 
> 赞同：0
> 
> 时间：2013-02-15T10:54:53.990
> 
> 标签：ios

我是iOS新手在我的项目中，我通过延迟加载在tableview中显示图像。但是所有下载图像的url都存储在cache.db中。所以，当我连续执行此过程时内存会很低请告诉我如何管理记忆在这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:35:24.307

我对缓存没有经验，但我认为您可以禁用或限制缓存。要禁用缓存，您可以使用以下代码

```
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
[NSURLCache setSharedURLCache:sharedCache];
[sharedCache release]; 
```

看看这篇关于缓存限制的博客文章 [http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/](http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/)

希望能帮助到你

# mysql - MySQL按特定字母排序查询

> ID：14893145
> 
> 赞同：2
> 
> 时间：2013-02-15T10:54:57.817
> 
> 标签：mysql

我有一个 mysql 表，其中包含很多文件夹名称和目录名称，例如“C:\xx\xyz”或“C:\xx”或“C:\xx\xyz\abc”。

现在我必须按这个反斜杠的计数对这个查询进行排序。我首先需要 Dir C:\xx，因为我必须先创建此目录，然后才能在其中创建子目录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:58:36.417

像这样的东西：

```
SELECT dirName
FROM yourTable
ORDER BY (LENGTH(dirName) - LENGTH(REPLACE(dirName, '\\', ''))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:01:24.770

[SQLFillde 演示](http://sqlfiddle.com/#!2/8cb5f/1)

```
ORDER BY LENGTH(folder)-LENGTH(REPLACE(folder,'\\','')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:04:20.887

通常不需要按顺序创建目录：

```
C:\>mkdir test

C:\>dir test
 El volumen de la unidad C es Sistema
 El número de serie del volumen es: 6882-2759

 Directorio de C:\test

15/02/2013  12:01    <DIR>          .
15/02/2013  12:01    <DIR>          ..
               0 archivos              0 bytes
               2 dirs  115.358.355.456 bytes libres

C:\>mkdir test\foo\bar\one\two\three

C:\>dir test
 El volumen de la unidad C es Sistema
 El número de serie del volumen es: 6882-2759

 Directorio de C:\test

15/02/2013  12:02    <DIR>          .
15/02/2013  12:02    <DIR>          ..
15/02/2013  12:02    <DIR>          foo
               0 archivos              0 bytes
               3 dirs  115.358.355.456 bytes libres

C:\> 
```

# symfony - 如何刷新 APC 类加载器缓存？

> ID：14893160
> 
> 赞同：1
> 
> 时间：2013-02-15T10:56:00.903
> 
> 标签：symfony, apc

[Performance Symfony 一书](http://symfony.com/doc/master/book/performance.html#caching-the-autoloader-with-apc)提到当某些类移动时需要刷新 APC 缓存，而这确实是需要的。

但是，我不知道如何清除自动装载机的 APC 缓存。我尝试使用 PHP`apc_clear_cache()`函数，但没有帮助。

如何清除此 APC 缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T08:03:20.550

正如 Mauro 所提到的 apc_clear_cache 也可以带一个参数来清除不同类型的 apc 缓存：

```
 apc_clear_cache();
  apc_clear_cache('user');
  apc_clear_cache('opcode'); 
```

另请参阅[SO 上的相关帖子](https://stackoverflow.com/questions/911158/how-to-clear-apc-cache-entries)。

还有[ApcBundle](https://github.com/ornicar/ApcBundle)添加了 Symfony apc:clear 命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T07:36:00.307

只需创建一个简单的控制器 ApcController 如下

```
<?php

namespace Rm\DemoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use JMS\SecurityExtraBundle\Annotation\Secure;

/**
 * apc cache clear controller
 */
class ApcController extends Controller
{

    /**
     * clear action
     *
     * @Route("/cc", name="rm_demo_apc_cache_clear")
     *
     * @Secure(roles="ROLE_SUPER_ADMIN, ROLE_ADMIN")
     *
     * @param \Symfony\Component\HttpFoundation\Request $request
     */
    public function cacheClearAction(Request $request)
    {

        $message = "";

        if (function_exists('apc_clear_cache') 
                && version_compare(PHP_VERSION, '5.5.0', '>=') 
                && apc_clear_cache()) {

            $message .= ' User Cache: success';

        } elseif (function_exists('apc_clear_cache') 
                && version_compare(PHP_VERSION, '5.5.0', '<') 
                && apc_clear_cache('user')) {

            $message .= ' User Cache: success';

        } else {

            $success = false;
            $message .= ' User Cache: failure';

        }

        if (function_exists('opcache_reset') && opcache_reset()) {

            $message .= ' Opcode Cache: success';

        } elseif (function_exists('apc_clear_cache') 
                && version_compare(PHP_VERSION, '5.5.0', '<') 
                && apc_clear_cache('opcode')) {

            $message .= ' Opcode Cache: success';

        } else {
            $success = false;
            $message .= ' Opcode Cache: failure';
        }

        $this->get('session')->getFlashBag()
                            ->add('success', $message);

        // redirect
        $url = $this->container
                ->get('router')
                ->generate('sonata_admin_dashboard');

        return $this->redirect($url);
    }

} 
```

然后将控制器路由导入到您的**routing.yml**

```
#src/Rm/DemoBundle/Resources/config/routing.yml
apc:
    resource: "@RmDemoBundle/Controller/ApcController.php"
    type:     annotation
    prefix:   /apc 
```

现在您可以使用以下 url 清除 apc 缓存：

```
http://yourdomain/apc/cc 
```

注意：@Secure(roles="ROLE_SUPER_ADMIN, ROLE_ADMIN") 注释，这将保护您的 apc 缓存 url 免受未经授权的访问。

# perl - 你应该使用'||' 或在 Perl 中报告错误时优先级较低的“或”？

> ID：14893161
> 
> 赞同：15
> 
> 时间：2013-02-15T10:56:01.767
> 
> 标签：perl, operator-precedence

在阅读最新版本的[The Camel Book](https://rads.stackoverflow.com/amzn/click/com/0596004923)时，我被 p522 上的以下代码片段所震撼：

```
use Fcntl ":flock";
eval {
    local $SIG{ALRM} = sub { die "alarm clock restart" };
    alarm 10;               # schedule alarm in 10 seconds
    eval {
        flock(FH, LOCK_EX)  # a blocking, exclusive lock
            || die "can't flock: $!";
    };
    alarm 0;                # cancel the alarm
};
alarm 0;               # race condition protection
die if $@ && $@ !~ /alarm clock restart/; # reraise 
```

有人告诉我，您应该始终使用低优先级的逻辑 OR 运算符“或”，而不是逻辑 OR 运算符“||”。

在本书中进一步看，我看到许多其他使用相同逻辑的示例。

规则或优先级是否发生了变化？

还是'||'的处理 和“或”在更高版本的 Perl 中发生了变化？（不幸的是，由于遗留代码，我们被焊接到 5.6.1 atm）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-15T11:00:16.533

`||`和的优先级`or`没有改变。如果您不在函数属性周围使用括号，则使用`||`with`die`有点危险，请考虑

```
flock FH, LOCK_EX || die "can't flock: $!"; # WRONG! 
```

这就是为什么有些人更喜欢`or`控制结构。有括号，没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:11:14.850

[作为一个风格问题，这可能应该是 CW'ed。话虽如此，我确实有意见。]

骆驼是一个糟糕的风格指南。那不是它的工作。它提供的代码是正确的，因为它按照它在锡上所说的做，但是将它的示例变成实际使用的东西大多留给读者作为练习。

至于您的特定问题，请选择英文版本的逻辑，并为您想要一个值的情况保留类似 C 的版本。所以：

```
if ($x or $y) { ... }
if (my $z = $x || $y) { ... }
$x or die "Ohnoes!"; # Though I prefer `die "Ohnoes!" unless $x;`
return 5 unless $x and $y;
return $x && $y; # Important!  `return $x and $y;` is really-really wrong 
```

这将用最少的括号帮助您浏览大多数代码。

# visual-studio - 如何从 .NET 4.5 库项目中引用 System.Windows 5.0.5 程序集（Silverlight）？

> ID：14893166
> 
> 赞同：1
> 
> 时间：2013-02-15T10:56:21.113
> 
> 标签：visual-studio, silverlight, .net-assembly

我有一个为 Silverlight 5 编写的项目，它`System.Windows`在 5.0.5 版本中引用了 Silverlight 的程序集。

现在我想使用通常的 .NET 4.5 库项目为其创建一个单元测试项目。当我尝试`System.Windows`从 Silverlight（使用`browse`对话框）添加对程序集 5.0.5 的引用时，Visual Studio 会添加来自 .NET 4.5 的版本。

因此版本号不匹配。

*   为什么 Visual Studio 会这样？
*   我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:36:24.033

您*可以*从 .Net 项目中引用 Silverlight 程序集，但是一旦您设法添加了一个程序集，您可能会遇到与其他库的依赖关系的问题。

如果你尝试不同的方法，你会更容易......

我建议使用[Silverlight 单元测试框架](http://archive.msdn.microsoft.com/silverlightut)来测试您的 Silverlight 代码。

如果这不符合您的需要，也许[便携式类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)会。

# solr - Solr：从 QueryResponse 中检索查询

> ID：14893170
> 
> 赞同：0
> 
> 时间：2013-02-15T10:56:42.830
> 
> 标签：solr, solrj

给定一个 QueryResponse 对象（SolrJ 3.6.2），除了解析查询字符串之外，还有什么方法可以检索为获取该响应而进行的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:04:05.677

QueryResponse 公开可以从中检索 q的[Header信息。](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/client/solrj/response/QueryResponse.html#getHeader%28%29)

```
rsp.getHeader().get("q") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T07:01:45.547

QueryResponse 公开可以从中检索 q 的 Header 信息。但它不能像 Jayendra 提到的那样直接被直接检索。

你需要使用：

```
response.getHeader().get("params"); 
```

这将为您提供如下结果：

```
{start=0,q=apple,qf=name^10.0 description^5.0,version=2,rows=10,defType=edismax} 
```

在那里你可以看到你的结果。

# ruby-on-rails - 如何在 ruby on rails 中将多个控制器操作调用到单页选项卡中

> ID：14893173
> 
> 赞同：0
> 
> 时间：2013-02-15T10:57:04.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三个`models, controllers`和`views`。

```
1\. package
2\. source
3\. measure 
```

一切都有独立`forms`的。我创建了一个`controller`并在页面中`view`调用`scenario`并创建了三个。`tabs(Package, Source and Measure)``scenario`

我需要调用上面`render`的`three tabs`每一个，`controller`并且`views`喜欢`Package`应该做的动作，`create, edit, update and destroy of Packages controller`反之亦然。

我应该如何`controller`在页面中调用这三个不同的操作`Scenario`？我希望将这三个都放在一个页面中并在他们的`tabs`.

我应该在场景控制器的索引、新建、创建、编辑和更新方法中包含什么？我是否也需要为场景创建所有视图文件？

任何帮助将不胜感激。

PS 我测试了这三个在各自的页面上都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:51:18.840

最好使用 ajax 调用并使用 js/erb 模板在相应选项卡中呈现视图模板。例如，

显示.js.erb

```
$('<%= @selector %>').html("<%= escape_javascript(render(:action => :show)) %>"); 
```

如果您想使用相同的 ajax 调用在其他地方呈现显示操作，则根据您所在的页面发送选择器作为请求参数：例如，当您在场景页面上并且包选项卡的 div id 是“包”时-tab'，然后将选择器`'#package-tab'`作为参数发送并在控制器中将@selector 设置为此。有了这个，您可以从请求中控制 ajax 调用刷新哪个 dom 元素。

这能回答问题吗？

# c# - 在 OOP 方法重载中使用浮点数会出错

> ID：14893175
> 
> 赞同：2
> 
> 时间：2013-02-15T10:57:12.860
> 
> 标签：c#, oop

如果我做，

```
public class test
{
    public int add(int a, float b)
    {
        return a + Convert.ToInt32(b);
    }

    public int add(float a, int b)
    {
        return Convert.ToInt32(a) + b;
    }
} 
```

然后它编译成功，但给出后期绑定运行时错误：

```
The call is ambiguous between the following methods or properties 
```

但如果我这样做

```
public class test
{
    public int add(int a, float b)
    {
        return a + Convert.ToInt32(b);
    }

    public int add(int a, int b)
    {
        return Convert.ToInt32(a) + b;
    }
} 
```

然后它可以正常工作并在 test.add(1,2) 的情况下调用第二个 add 方法。它也适用于我用小数替换浮点数的情况。

我可以对上述错误有一点解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:01:28.173

`int`可隐式转换为`float`，因此在第一个示例中，编译器有两个等效选项，只是无法从调用中决定`add(1,2)`使用哪个重载，因为没有提示给他。

在第二种情况下，不需要转换，编译器会选择最适合的重载。

如果您在第二种情况下添加另一种方法，如下所示：

```
public float add(float  a, float b)
{
    return a + b;
} 
```

并使用显式类型的参数调用它，比如`add(1f, 3);`- 它会被调用

不深入细节，编译器总是尝试选择最合适的重载并尝试尽可能少地进行约定。如果它陷入歧义 - 它会抛出一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:00:19.090

看起来您正在将两个整数或两个浮点数传递给您的*add*方法。在第一种情况下，编译器可以将第一个参数转换为浮点数或第二个参数。因此，您有两种方法可以调用。在第二种情况下，只需使用两个整数调用*add 。*

看看[更好的函数成员定义](http://msdn.microsoft.com/en-us/library/aa691338%28v=vs.71%29.aspx)。函数成员会更好，如果

> **对于每个参数**，从*AX*到*PX*的隐式转换并不比从*AX*到*QX*的隐式转换差，并且

但是，对于您方法*的每个参数，情况并非如此。*因为如果你传递整数参数，只有第一个参数不会更糟。第二个论点更糟。（浮动反之亦然）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:01:18.497

这是因为 int 可以隐式转换为 float，所以编译器不知道是选择将第一个参数转换为 float 还是将第二个参数转换为 float。它们都是同样值得的转换。

在您的呼叫站点，通过使用浮点数和一个整数而不是两个整数调用来消除歧义：

```
test t  = new test();
t.add(1.0f, 2);
t.add(1, 2.0f); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:35:01.130

我已经尝试了我们自己的编码部分。没有遇到任何错误。

```
class Program
{

        public int add(int a, float b)
        {
            return a + Convert.ToInt32(b);
        }

        public int add(float a, int b)
        {
            return Convert.ToInt32(a) + b;
        }

    static void Main(string[] args)
    {

        Program pr = new Program();
       int k= pr.add(12, 203.9f);
       int kk = pr.add(203.9f, 12);
       Console.WriteLine(k);
       Console.WriteLine(kk);
    }
} 
```

只需查看此编码。

# java - 将 JSR-303 验证错误转换为 Spring 的 BindingResult

> ID：14893176
> 
> 赞同：17
> 
> 时间：2013-02-15T10:57:17.743
> 
> 标签：java, spring, validation, spring-mvc, bean-validation

我在 Spring 控制器中有以下代码：

```
@Autowired
private javax.validation.Validator validator;

@RequestMapping(value = "/submit", method = RequestMethod.POST)
public String submitForm(CustomForm form) {
    Set<ConstraintViolation<CustomForm>> errors = validator.validate(form);
    ...
} 
```

是否可以映射`errors`到 Spring 的`BindingResult`对象而无需手动检查所有错误并将它们添加到`BindingResult`? 像这样的东西：

```
// NOTE: this is imaginary code
BindingResult bindingResult = BindingResult.fromConstraintViolations(errors); 
```

我知道可以注释`CustomForm`参数`@Valid`并让 Spring 注入`BindingResult`作为另一个方法的参数，但在我的情况下它不是一个选项。

```
// I know this is possible, but doesn't work for me
public String submitForm(@Valid CustomForm form, BindingResult bindingResult) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T11:19:27.353

一个更简单的方法可能是使用 Spring 的抽象`org.springframework.validation.Validator`，您可以通过在上下文中使用这个 bean 来获取验证器：

```
<bean id="jsr303Validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

@Autowired @Qualifier("jsr303Validator") Validator validator; 
```

有了这个抽象，你可以通过这种方式使用验证器，传入你的 bindingResult：

```
validator.validate(obj, bindingResult); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-14T14:26:15.540

Spring 使用 SpringValidatorAdapter 将 javax.validation.ConstraintViolation 对象转换为 ObjectError 或 FieldError 对象，如绑定结果中所示。然后 BindStatus 使用消息源（如 Web 应用程序上下文本身）来转换错误。简而言之，你可以这样做：

```
SpringValidatorAdapter springValidator = new SpringValidatorAdapter(validator);
BindingResult bindingResult= new BeanPropertyBindingResult(myBeanToValidate, "myBeanName");
springValidator.validate(myBeanToValidate, bindingResult); 
```

这在编写单元测试时更容易，因为您甚至不需要创建 Spring 上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-05T20:08:33.237

```
@RequestMapping(value = "/submit", method = RequestMethod.POST)
public String submitForm(CustomForm form) {
    Set<ConstraintViolation<CustomForm>> errors = validator.validate(form);

    BindingResult bindingResult = toBindingResult(errors, form, "form");
    ...
}

private BindingResult toBindingResult(ConstraintViolationException e, Object object, String objectName) {
    BindingResult bindingResult = new BeanPropertyBindingResult(object, objectName);
    new AddConstraintViolationsToErrors().addConstraintViolations(e.getConstraintViolations(), bindingResult);
    return bindingResult;
}

private static class AddConstraintViolationsToErrors extends SpringValidatorAdapter {
    public AddConstraintViolationsToErrors() {
        super(Validation.buildDefaultValidatorFactory().getValidator()); // Validator is not actually used
    }

    @SuppressWarnings({"rawtypes", "unchecked"})
    public void addConstraintViolations(Set<? super ConstraintViolation<?>> violations, Errors errors) {
        // Using raw type since processConstraintViolations specifically expects ConstraintViolation<Object>
        super.processConstraintViolations((Set) violations, errors);
    }
} 
```

与此问题的其他答案不同，此解决方案处理已经存在 a`Set<ConstraintViolation<?>>`需要转换为 a 的情况`BindingResult`。

## 解释

Spring 提供了[`SpringValidatorAdapter`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/beanvalidation/SpringValidatorAdapter.html)执行 bean 验证的类，将结果存储在[`Errors`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/Errors.html)实例中（注意`BindingResult`extends `Errors`）。此类的正常手动使用是使用它通过以下[`validate`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/beanvalidation/SpringValidatorAdapter.html#validate-java.lang.Object-org.springframework.validation.Errors-)方法执行验证：

```
Validator beanValidator = Validation.buildDefaultValidatorFactory().getValidator();
SpringValidatorAdapter validatorAdapter = new SpringValidatorAdapter(beanValidator);

BindException bindException = new BindException(form, "form");
validatorAdapter.validate(form, bindException); 
```

但是，这在已经存在 a`Set<ConstraintViolation<?>>`需要转换为 a的情况下无济于事`BindingResult`。

仍然有可能实现这个目标，尽管它确实需要跳过几个额外的箍。 `SpringValidatorAdapter`包含[`processConstraintViolations`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/beanvalidation/SpringValidatorAdapter.html#processConstraintViolations-java.util.Set-org.springframework.validation.Errors-)将`ConstraintViolation`对象转换为适当的 Spring[`ObjectError`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/ObjectError.html)子类型并将它们存储在`Errors`对象上的方法。但是，此方法是受保护的，限制了它对子类的可访问性。

这个限制可以通过创建一个自定义子类来解决，该子类`SpringValidatorAdapter`委托或公开受保护的方法。这不是典型的用法，但它有效。

```
public class AddConstraintViolationsToErrors extends SpringValidatorAdapter {
    public AddConstraintViolationsToErrors() {
        super(Validation.buildDefaultValidatorFactory().getValidator()); // Validator is not actually used
    }

    @SuppressWarnings({"rawtypes", "unchecked"})
    public void addConstraintViolations(Set<? super ConstraintViolation<?>> violations, Errors errors) {
        // Using raw type since processConstraintViolations specifically expects ConstraintViolation<Object>
        super.processConstraintViolations((Set) violations, errors);
    }
} 
```

这个自定义类可以用来填充一个新创建`BindingResult`的，实现`BindingResult`从一个创建一个的目标`Set<ConstraintViolation<?>>`。

```
private BindingResult toBindException(ConstraintViolationException e, Object object, String objectName) {
    BindingResult bindingResult = new BeanPropertyBindingResult(object, objectName);
    new AddConstraintViolationsToErrors().addConstraintViolations(e.getConstraintViolations(), bindingResult);
    return bindingResult;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-22T04:54:54.250

我遇到了类似的问题，这就是我解决它的方法。

鉴于您的示例，这就是我实现它的方式

首先，我使用了一个智能验证器，在方法中我让 spring 注入了 BindingResult

```
@Autowired
private org.springframework.validation.SmartValidator validator;

@RequestMapping(value = "/submit", method = RequestMethod.POST)
public String submitForm(CustomForm form, BindingResult bindingResult) {
    Set<ConstraintViolation<CustomForm>> errors = validator.validate(form);
    ...
} 
```

然后使用该绑定结果，我将它传递给 SmartValidator，以便将任何错误绑定到 BindingResult。

```
validator.validate(form, bindingResult);
if(bindingResult.hasErrors()) {
     throw new BindException(bindingResult);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-16T21:28:13.140

扩展 Kristiaan 的答案，出于测试目的，没有必要创建一个 spring 上下文来使用 Spring 的 bindingResult 进行验证。下面是一个例子：

```
public class ValidatorTest {

    javax.validation.Validator javaxValidator = Validation.buildDefaultValidatorFactory().getValidator();
    org.springframework.validation.Validator springValidator = new SpringValidatorAdapter(javaxValidator);

    @Test
    public void anExampleTest() {

    JSR303AnnotatedClassToTest   ctt  = new JSR303AnnotatedClassToTest( ..init vars..)

    ... test setup...

    WebDataBinder dataBinder = new WebDataBinder(ctt);
    dataBinder.setValidator(springValidator);
    dataBinder.validate();
    BindingResult bindingResult = dataBinder.getBindingResult(); 

    ... test analysis ...

    }
} 
```

这种方法不需要提前创建绑定结果，dataBinder 会为您构建正确的结果。

# c# - 如何获取 Windows phone 8 中某些应用的电池使用情况？

> ID：14893179
> 
> 赞同：1
> 
> 时间：2013-02-15T10:57:29.927
> 
> 标签：c#, windows-phone-8, windows-phone

我正在使用 windows phone 8 示例进行练习。我已经使用以下代码找到了剩余电池百分比和剩余时间，

```
using Windows.Phone.Devices.Power;

// Constructor
    public MainPage()
    {
        InitializeComponent();

        _battery = Battery.GetDefault();
        _battery.RemainingChargePercentChanged += OnRemainingChargePercentChanged;
        UpdateUI();
    }

    private void UpdateUI()
    {
        txtContent1.Text = string.Format("{0} %", _battery.RemainingChargePercent);
        txtContent2.Text = string.Format("{0} hours", _battery.RemainingDischargeTime.TotalHours);
    }

    private void OnRemainingChargePercentChanged(object sender, object e)
    {
        UpdateUI();
    } 
```

但我不知道如何查找应用程序的电池使用情况或应用程序使用的剩余时间，例如，

我不知道如何查找 Wifi 的电池使用情况或使用 Wifi 的剩余时间。或其他一些应用程序。

如果有人知道意味着请说！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:44:08.720

出于多种原因，您无法在物理设备上执行此操作。

想一想——仅仅因为您使用的是 WiFi，并不意味着您将只为后台更新而保持网络开启。您很可能会使用它来下载音乐文件或图片，或继续播放在线广播。或者你也可以启动一个游戏。

为您提供的电池估算值基于默认指标。如果不将您的应用程序暴露给许多其他指标，将很难将其限制为非常通用的子集。

# android - 将库导入 Android 项目

> ID：14893183
> 
> 赞同：0
> 
> 时间：2013-02-15T10:57:35.650
> 
> 标签：android, eclipse

我正在尝试[将此](https://github.com/codinguser/android_contact_picker)库导入我的 Android 项目。我已经完全按照[此链接](http://developer.android.com/guide/developing/projects/projects-eclipse.html#ReferencingLibraryProject)中的描述完成了用例 1。

在 Logcat 我得到这个：

```
02-15 08:49:09.860: E/AndroidRuntime(6936): FATAL EXCEPTION: main
02-15 08:49:09.860: E/AndroidRuntime(6936): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.projectname/com.codinguser.android.contactpicker.ContactsPickerActivity}; have you declared this activity in your AndroidManifest.xml?
02-15 08:49:09.860: E/AndroidRuntime(6936):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
... 
```

我已经尝试将 ContactsPickerActivity 活动添加到 AndroidManifest.xml，但我仍然收到错误消息。

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.projectname"
          android:versionCode="1"
          android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10"
              android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.SEND_SMS" />

    <application android:allowBackup="true"
                 android:icon="@drawable/ic_launcher"
                 android:label="@string/app_name"
                 android:theme="@style/AppTheme" >

        <activity android:name="com.example.projectname.MainActivity"
                  android:label="@string/app_name"
                  android:uiOptions="splitActionBarWhenNarrow" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.example.projectname.NewTemplateActivity"
                  android:label="@string/app_name" >
        </activity>

        <provider   android:name="com.example.projectname.DataProvider"
                    android:authorities="com.example.projectname.dataprovider"
                    android:exported="false" >"
        </provider>

        <receiver android:name="com.example.projectname.SentReceiver"
                  android:enabled="true"
                  android:exported="false" >
            <intent-filter>
                <action android:name="com.example.projectname.MainActivity.SMS_SENT_ACTION" />
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

我打这个电话：

```
startActivityForResult(new Intent(getActivity(), ContactsPickerActivity.class), GET_PHONE_NUMBER); 
```

在 MainActivity 的一个片段中。

如果有人可以指导我做错了什么，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:19:59.663

解决了。

我的 AndroidManifest.xml 中缺少以下内容：

```
<uses-permission android:name="android.permission.READ_CONTACTS" />

<activity android:name="com.codinguser.android.contactpicker.ContactsPickerActivity"
                  android:label="@string/app_name" >
</activity> 
```

# android - 如何使用 Openfire 在 Android 中创建 XMPP 聊天客户端？

> ID：14893185
> 
> 赞同：0
> 
> 时间：2013-02-15T10:57:58.810
> 
> 标签：android, xmpp, openfire, smack

我是安卓新手。我想创建一个 XMPP 聊天客户端以及推送通知。我已经安装了 openfire 并且服务器已准备好在我的本地机器上进行测试。

此时我在做什么 1\. 在 ASYNC 任务中创建 XMPP 连接 2\. onPost 创建聊天管理器

```
protected void onPostExecute(final Boolean success) {
        if (success) {
            if (connection != null) {
                chatManager = connection.getChatManager();
                Chat newChat = chatManager.createChat("shobhit",
                         new MessageListener() {
                            public void processMessage(Chat chat, Message message) {
//Do something
                            }
                        });
            }
        }
    } 
```

但是，如果我这样做是正确的，我会感到非常困惑。我在 stackoverflow 上的某个地方读到 ASYNC 应该只用于持续时间短的活动，我的连接可能会在这里超时。

我还发现这些是可能的解决方案：Runnable, Handlers Create a Service Broadcast receivers

我不确定我应该选择哪种方法。你们能建议最佳方法和指向该示例的指针吗？

谢谢车坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T11:16:12.497

正如你所说，ASYNC 应该只用于小持续时间的活动。假设您在 Android 中使用某个版本的 Asmack，则连接必须位于与 Activity 不同的线程中（作为网络进程），因此您必须使用新线程/可运行来连接到 XMPP 服务器。Asmack 在那之后使用它自己的线程，但你不应该担心它。使用此模板，您可以创建简单的应用程序，该应用程序可能随时被 android 杀死。如果你想长时间抵抗，你应该使用 XMPP 部分的服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T05:27:13.160

使用 AsynTask 创建连接，在 android 中，所有与网络相关的任务都应该是不同于 UI 线程的线程，所以从 doInBackground() 方法调用它。如果您想长时间保持连接，请将其投入使用。

# .net - 让 Mono 与 Cent OS 5.6 一起工作

> ID：14893186
> 
> 赞同：0
> 
> 时间：2013-02-15T10:57:57.990
> 
> 标签：.net, linux, mono, centos

我在让 Mono 在我的 Cent OS 5.6 32 位 Web 服务器上工作时遇到问题。

我有一个 WordPress 网站，可以与 .net 后端协同工作。我按照本指南在服务器上安装了 Mono：

[http://wiki.phonicuk.com/Installing-Mono-in-CentOS-5-x.ashx](http://wiki.phonicuk.com/Installing-Mono-in-CentOS-5-x.ashx)

完成后，这是我的最终结果：

```
make[5]: Entering directory `/usr/local/src/mono-2.10.8/mcs/mcs'
Makefile:53: warning: overriding commands for target `csproj-local'
../build/executable.make:134: warning: ignoring old commands for target `csproj-local'
make install-local
make[6]: Entering directory `/usr/local/src/mono-2.10.8/mcs/mcs'
Makefile:53: warning: overriding commands for target `csproj-local'
../build/executable.make:134: warning: ignoring old commands for target `csproj-local'
/bin/sh ./../mkinstalldirs /usr/local/lib/mono/4.0
/usr/bin/install -c -c -m 755 ./../class/lib/net_4_0/dmcs.exe /usr/local/lib/mono/4.0
test ! -f ./../class/lib/net_4_0/dmcs.exe.mdb || /usr/bin/install -c -c -m 755           ./../class/lib/net_4_0/dmcs.exe.mdb /usr/local/lib/mono/4.0
/usr/bin/install -c -c -m 644 ./../class/lib/net_4_0/dmcs.exe.config   /usr/local/lib/mono/4.0
test ! -f ./../class/lib/net_4_0/dmcs.exe.so || /usr/bin/install -c -c -m 755  ./../class/lib/net_4_0/dmcs.exe.so /usr/local/lib/mono/4.0
make[6]: Leaving directory `/usr/local/src/mono-2.10.8/mcs/mcs'
make[5]: Leaving directory `/usr/local/src/mono-2.10.8/mcs/mcs'
make[5]: Entering directory `/usr/local/src/mono-2.10.8/mcs/docs'
make install-local
make[6]: Entering directory `/usr/local/src/mono-2.10.8/mcs/docs'
/bin/sh ./../mkinstalldirs /usr/local/lib/monodoc /usr/local/lib/monodoc/sources
mkdir -p -- /usr/local/lib/monodoc /usr/local/lib/monodoc/sources
/usr/bin/install -c -c -m 644 cs-errors.tree cs-errors.zip ecma334.tree ecma334.zip     Mono.tree Mono.zip netdocs.tree netdocs.zip Novell.tree Novell.zip             lang-    csharp.source Mono.source netdocs.source Novell.source /usr/local/lib/monodoc/sources
/usr/bin/install -c -c -m 644 monodoc.xml /usr/local/lib/monodoc
make[6]: Leaving directory `/usr/local/src/mono-2.10.8/mcs/docs'
make[5]: Leaving directory `/usr/local/src/mono-2.10.8/mcs/docs'
make install-local
make[5]: Entering directory `/usr/local/src/mono-2.10.8/mcs'
make[5]: Leaving directory `/usr/local/src/mono-2.10.8/mcs'
make[4]: Leaving directory `/usr/local/src/mono-2.10.8/mcs'
make[3]: Leaving directory `/usr/local/src/mono-2.10.8/mcs'
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/mcs'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8/runtime'
Making install in scripts
make[1]: Entering directory `/usr/local/src/mono-2.10.8/scripts'
Makefile:710: warning: overriding commands for target `mod'
Makefile:690: warning: ignoring old commands for target `mod'
make[2]: Entering directory `/usr/local/src/mono-2.10.8/scripts'
Makefile:710: warning: overriding commands for target `mod'
Makefile:690: warning: ignoring old commands for target `mod'
test -z "/usr/local/bin" || /bin/mkdir -p "/usr/local/bin"
/usr/bin/install -c makecert sn al ilasm gacutil mkbundle monop resgen wsdl al2 csharp2   gacutil2 gmcs mdoc monop2 resgen2 wsdl2 mono-service mono-service2 nunit-console nunit-  console2 mono-find-provides mono-find-requires mdoc-assemble mdoc-export-html mdoc-export-  msxdoc mdoc-update mdoc-validate mdassembler mdvalidater monodocer monodocs2html   monodocs2slashdoc mono-test-install peverify mcs mono-heapviz mono-configuration-crypto   dmcs disco '/usr/local/bin'
/usr/bin/install -c dtd2xsd dtd2rng installvst genxs macpack mono-cil-strip prj2make  soapsuds caspol cert2spc certmgr chktrust csharp httpcfg lc mconfig mod monolinker mono- api-info mono-shlib-cop mozroots permview pdb2mdb xsd mono-xmltool setreg secutil signcode  sgen sqlmetal sqlsharp svcutil xbuild ccrewrite '/usr/local/bin'
make[2]: Nothing to be done for `install-data-am'.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/scripts'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8/scripts'
Making install in man
make[1]: Entering directory `/usr/local/src/mono-2.10.8/man'
make[2]: Entering directory `/usr/local/src/mono-2.10.8/man'
make[2]: Nothing to be done for `install-exec-am'.
test -z "/usr/local/share/man/man1" || /bin/mkdir -p "/usr/local/share/man/man1"
/usr/bin/install -c -m 644 al.1 cert2spc.1 certmgr.1 chktrust.1 cilc.1 csharp.1 disco.1  dtd2xsd.1 gacutil.1 genxs.1 httpcfg.1 ilasm.1 lc.1 macpack.1 makecert.1 mconfig.1 mcs.1 mdassembler.1 mdoc.1 mdoc-assemble.1 mdoc-export-html.1 mdoc-export-msxdoc.1 mdoc-update.1 mdoc-validate.1 mdvalidater.1 mkbundle.1 mono.1 mprof-report.1 mono-cil-strip.1 monodocer.1 monodocs2html.1 monolinker.1 monop.1 mono-api-info.1 mono-service.1 mono-shlib-cop.1 mono-xmltool.1 mozroots.1 pdb2mdb.1 permview.1 '/usr/local/share/man/man1'
/usr/bin/install -c -m 644 prj2make.1 resgen.1 secutil.1 setreg.1 sgen.1 signcode.1   sn.1 soapsuds.1 sqlsharp.1 wsdl.1 xbuild.1 xsd.1 mono-configuration-crypto.1 ccrewrite.1   '/usr/local/share/man/man1'
test -z "/usr/local/share/man/man5" || /bin/mkdir -p "/usr/local/share/man/man5"
/usr/bin/install -c -m 644 mdoc.5 mono-config.5 '/usr/local/share/man/man5'
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/man'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8/man'
Making install in samples
make[1]: Entering directory `/usr/local/src/mono-2.10.8/samples'
make[2]: Entering directory `/usr/local/src/mono-2.10.8/samples'
make[2]: Nothing to be done for `install-exec-am'.
make[2]: Nothing to be done for `install-data-am'.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/samples'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8/samples'
Making install in msvc
make[1]: Entering directory `/usr/local/src/mono-2.10.8/msvc'
make[2]: Entering directory `/usr/local/src/mono-2.10.8/msvc'
make[2]: Nothing to be done for `install-exec-am'.
make[2]: Nothing to be done for `install-data-am'.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/msvc'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8/msvc'
Making install in docs
make[1]: Entering directory `/usr/local/src/mono-2.10.8/docs'
cd . && make PROFILE=net_2_0 -f docs.make topdir=../mcs AgilityPack.dll
make[2]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[2]: `AgilityPack.dll' is up to date.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
cd . && make PROFILE=net_2_0 -f docs.make topdir=../mcs convert.exe
make[2]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[2]: `convert.exe' is up to date.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
/bin/mkdir -p ./html
runtimedir=`cd ../runtime && pwd`; export runtimedir; \
    cd . && MONO_PATH=../mcs/class/lib/net_2_0 perl ./exdoc -h . ../mono/*/*.c
Merging: mono-api-wapi.html
Merging: mono-api-jitinternal.html
Merging: mono-api-utils.html
Merging: mono-api-types.html
Merging: mono-api-gc.html
Merging: mono-api-class.html
Merging: mono-api-assembly.html
Merging: mono-api-dynamic-codegen.html
Merging: mono-api-methods.html
Merging: mono-api-jit.html
Merging: mono-api-unsorted.html
Merging: mono-api-domains.html
Merging: mono-api-metadata.html
Merging: mono-api-codegen.html
Merging: mono-api-object.html
Merging: mono-api-gchandle.html
Merging: mono-api-marshal.html
Merging: mono-api-type.html
Merging: mono-api-profiler.html
Merging: mono-api-debug.html
Merging: mono-api-image.html
Merging: mono-api-embedding.html
Merging: mono-api-reflection.html
Merging: mono-api-internal.html
Merging: mono-api-security.html
Merging: mono-api-threads.html
Merging: mono-api-string.html
Merging: mono-api-vm.html
Merging: mono-api-exc.html
Merging: mono-api-counters.html
touch deploy/.stamp
cd . && make -f docs.make topdir=../mcs mono-file-formats.tree
make[2]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[2]: `mono-file-formats.tree' is up to date.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
cd . && make -f docs.make topdir=../mcs mono-tools.tree
make[2]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[2]: `mono-tools.tree' is up to date.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
cd . && cp -f api-style.css deploy
cd . && make -f docs.make topdir=../mcs monoapi.tree
make[2]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[2]: `monoapi.tree' is up to date.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
make[2]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[2]: Nothing to be done for `install-exec-am'.
cd . && make PROFILE=net_2_0 -f docs.make topdir=../mcs AgilityPack.dll
make[3]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[3]: `AgilityPack.dll' is up to date.
make[3]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
cd . && make PROFILE=net_2_0 -f docs.make topdir=../mcs convert.exe
make[3]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[3]: `convert.exe' is up to date.
make[3]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
/bin/mkdir -p ./html
runtimedir=`cd ../runtime && pwd`; export runtimedir; \
    cd . && MONO_PATH=../mcs/class/lib/net_2_0 perl ./exdoc -h . ../mono/*/*.c
Merging: mono-api-wapi.html
Merging: mono-api-jitinternal.html
Merging: mono-api-utils.html
Merging: mono-api-types.html
Merging: mono-api-gc.html
Merging: mono-api-class.html
Merging: mono-api-assembly.html
Merging: mono-api-dynamic-codegen.html
Merging: mono-api-methods.html
Merging: mono-api-jit.html
Merging: mono-api-unsorted.html
Merging: mono-api-domains.html
Merging: mono-api-metadata.html
Merging: mono-api-codegen.html
Merging: mono-api-object.html
Merging: mono-api-gchandle.html
Merging: mono-api-marshal.html
Merging: mono-api-type.html
Merging: mono-api-profiler.html
Merging: mono-api-debug.html
Merging: mono-api-image.html
Merging: mono-api-embedding.html
Merging: mono-api-reflection.html
Merging: mono-api-internal.html
Merging: mono-api-security.html
Merging: mono-api-threads.html
Merging: mono-api-string.html
Merging: mono-api-vm.html
Merging: mono-api-exc.html
Merging: mono-api-counters.html
touch deploy/.stamp
cd . && make -f docs.make topdir=../mcs mono-file-formats.tree
make[3]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[3]: `mono-file-formats.tree' is up to date.
make[3]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
cd . && make -f docs.make topdir=../mcs mono-tools.tree
make[3]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[3]: `mono-tools.tree' is up to date.
make[3]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
cd . && cp -f api-style.css deploy
cd . && make -f docs.make topdir=../mcs monoapi.tree
make[3]: Entering directory `/usr/local/src/mono-2.10.8/docs'
make[3]: `monoapi.tree' is up to date.
make[3]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
test -z "/usr/local/lib/monodoc/sources" || /bin/mkdir -p   "/usr/local/lib/monodoc/sources"
/usr/bin/install -c -m 644 mono-file-formats.source mono-tools.source monoapi.source    mono-file-formats.tree mono-file-formats.zip mono-tools.tree mono-tools.zip monoapi.tree monoapi.zip '/usr/local/lib/monodoc/sources'
make[2]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8/docs'
make[1]: Entering directory `/usr/local/src/mono-2.10.8'
make[2]: Entering directory `/usr/local/src/mono-2.10.8'
make[2]: Nothing to be done for `install-exec-am'.
make[2]: Nothing to be done for `install-data-am'.
make[2]: Leaving directory `/usr/local/src/mono-2.10.8'
make[1]: Leaving directory `/usr/local/src/mono-2.10.8'
[root@***** mono-2.10.8]# 
```

我已经用星号标记了服务器名称。

.net 开发人员告诉我，他们无法让 .net 进行连接，而且对于如何配置 Mono 也一无所知。开发人员说，当他们尝试应用程序时，他们在浏览器中收到了 XML 结果，这显然是 Mono 无法正常工作的证据。

除了在上面的终端中完成的操作之外，我还需要采取任何额外的步骤来进一步配置 Mono 吗？

我找不到任何清晰的信息来帮助我让它工作，而.net 开发人员似乎同样对如何正确配置 Mono 一无所知。

如果有人能指导我如何让这个工作，那就太棒了:)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T00:20:44.233

It looks to me that you have installed Mono just fine (although a pretty old version).

My guess is that you have not yet told your webserver (Apache probably) to serve .NET files when asked. For that, you need to install mod_mono.

However, it is a bit difficult to say as you do not specifiy how the Wordpress site calls the .NET code.

# c++ - 用于排序 std::set 的 C++11 std::function 和 std::reference 包装器

> ID：14893187
> 
> 赞同：0
> 
> 时间：2013-02-15T10:58:00.010
> 
> 标签：c++, c++11, std, functor, std-function

我有一个 C++ 类，它的一个字段是 std::set 对象。我想自己写一个比较函数，或者让用户指定一个。在 C++11 中有一种处理泛型函数类型的新方法：std::function。它适用于函数指针、成员函数指针、lambda 函数等。

我尝试编写一个简单的实验程序，但它一直在卡顿，即使我按照 C++11 维基百科文章的建议进行操作。也许我只是不明白应该如何使用 std::function 和 std::ref 。

无论如何，关键是当我从一个简单的 lambda 函数创建一个 std::function 并使其成为类成员时，该类的 sizeof 增长了 22。当我从一个指向全局函数的指针创建一个 std::function 时，这个 std::function 的 sizeof 是 32。所以大小很大。我将有许多对象使用相同的比较函数，所以我更喜欢让所有对象都使用一个函数。

我有两个想法，告诉我你的想法。一个想法，使用 std::ref 存储对函数的引用，这样我可以定义一个函数，许多对象将使用它来比较 std::set 元素。第二个想法：如果它不能那样工作，或者生成的函数对象太大，也许我可以使用 shared_ptr。

您可能想知道：为什么没有一个静态 std::function 成员？答案是：因为所有对象都将使用相同的比较函数。例如，我希望能够拥有 1000 个对象，其中 400 个使用一个比较函数，600 个使用不同的比较函数。

例子：

```
class MyClass
{
public:
private:
     std::function<bool (int, int)> compare;
     std::set<int> set;
}; 
```

现在如何让 std::set 使用 std::function，并让许多 MyClass 对象使用相同的函数？

我希望能够在运行时更改比较功能，以便用户能够选择集合中对象的顺序（由 GUI 显示）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:27:02.077

表示共享所有权的标准方法是使用`std::shared_ptr`. 这会增加一些开销，迫使您`std::function`在堆上分配 ，但是 a`shared_ptr`小于 a`std::function`并且它将正确管理其生命周期，因此当任何对象仍在使用函数对象时，它将保持活动状态并自动销毁不再需要。

正如您所建议的，`reference_wrapper`引用共享函数的 a 可以用作`set`的比较对象，因为`reference_wrapper`如果 a 包装了可调用类型，则它是可调用的。

```
class MyClass
{
     typedef std::function<bool (int, int)> func_type;
public:
     MyClass(std::shared_ptr<func_type> const& f)
     : compare(f), set( std::ref(*f) )
     { }
private:
     std::shared_ptr<func_type> compare;
     std::set<int, std::reference_wrapper<func_type>> set;
}; 
```

A`reference_wrapper`不能为空（如引用），因此您必须`std::set`使用有效`reference_wrapper`对象构造 。

由于`std::reference_wrapper`in`std::set`只是持有指向 的非拥有指针，因此`std::function`您需要在更新 的同时小心更新集合的比较对象`shared_ptr`，或者您可以删除对该函数的最后一个引用，因此`shared_ptr`会破坏它，在集合中留下一个悬空指针。可以这样做：

```
void MyClass::replace_cmp(std::shared_ptr<func_type> const& f)
{
  set = std::set<int, std::reference_wrapper<func_type>>( std::ref(*f) );
  compare = f;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:36:53.000

[你告诉集合在你的构造函数初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)中使用你的比较函数：

```
class MyClass
{
public:
    template<typename Fc>
    MyClass(Fc compare_func)
        : compare(compare_func),  // Initialize the comparison function
          set(compare)            // Tell the set to use out function for comparison
        {}
}; 
```

# java - 如何将文件从远程 linux 机器复制到 JSP web 目录

> ID：14893188
> 
> 赞同：0
> 
> 时间：2013-02-15T10:58:01.630
> 
> 标签：java, linux, jsp, servlets

我想创建一个 JSP 网页，其中包含一个单击按钮，我想将文件从远程 linux 机器复制到托管 JSP 页面的本地目录（在 Windows 中）。我有那台机器的用户 ID 和密码，我可以在 putty 中使用 SSH 命令连接到远程服务器。

我正在使用 Eclipse Indigo 和 Tomcat 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:04:41.553

你能从远程机器上使用 FTP 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:06:41.093

您可以使用[JSch](http://www.jcraft.com/jsch/)来实现 SSH 协议的纯 Java 实现并复制您的文件。文件传输（`scp`命令）`JSch`可能有点棘手，因此您可以添加[securechannelfacade](http://code.google.com/p/securechannelfacade/)以正确传输文件

# java - Wicket - 异常处理后正确清理页面组件

> ID：14893189
> 
> 赞同：2
> 
> 时间：2013-02-15T10:58:06.320
> 
> 标签：java, wicket, wicket-1.5

在我的检票口应用程序中，页面导航是通过在 onClick() 方法上调用新页面的构造函数来创建新页面对象。如下。

```
DisplayItem.add(new Link("edit") { 
@Override
   public void onClick() {
    try{
    setResponsePage(new ReportPage(object, getPageReference()));
       } catch ( CustomException e){
          /// set some feedback message
        }
   }
}); 
```

**ReportPage**有几个 LoadableDetachableModels、PageableListViews、Panels、Fragments 等。我在**ReportPage**的构造函数中进行异常处理，并在发生异常时将其返回。下图。（部分代码）

```
 public ReportPage(final Objectm, final PageReference pr) throws CustomException{

try{
final LoadableDetachableModel<MaintReport> ldm = 
         new LoadableDetachableModel<MaintReport>() {

            @Override
            protected MaintReport load() {
                return new MaintReport();
            }
        };

/*

Several LoadableDetachableModels, PageableListViews, Panels, Fragments  etc.

*/ 

} catch ( Exception ex){
// create Custom Exception 

} finally {

 // Clean up of stuff 

} 
```

所以如果在构建页面时出现异常。我应该如何清理（在**finally**块中）？. 我应该将所有单个对象设置为 null 吗？是否有任何 Wicket 方法来垃圾收集（或向 GC 发送信号）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:15:22.787

在构造函数中抛出异常表单会立即使半初始化对象符合垃圾回收的条件。除非您通过在抛出异常之前将对象添加到另一个对象拥有的集合中来以某种方式阻止它，否则无需担心该对象及其字段的释放。您仍然需要释放任何可能已经分配的非托管资源（例如文件句柄），就像您通常在 finally 块中所做的那样。

# java - 没有 Log4j 属性文件的 Bug4j 设置附加程序

> ID：14893192
> 
> 赞同：0
> 
> 时间：2013-02-15T10:58:09.540
> 
> 标签：java, logging, log4j, appender

我正在尝试报告 Bug4J 库的错误。根据他们的网站，您应该在 log4j.xml 文件中插入以下指令：

```
 <appender name="bug4j" class="org.bug4j.client.Bug4jAppender">
       <param name="serverUrl" value="http://<bug4j.host.name>:8063/"/>
       <param name="applicationName" value="My Application"/>
       <param name="applicationVersion" value="1.3"/>
    </appender> 
```

我正在尝试在没有属性文件的情况下设置相同的参数，但是在 localhost:8063 上的 Web 控制台中没有报告错误，到目前为止，我尝试了以下操作：

```
public TestClass
{
 static Logger log = Logger.getLogger(TestClass.class);
 TestClass()
  {
    BasicConfigurator.configure();
    Logger.getRootLogger().setLevel(Level.INFO);

    Bug4jAppender bug4jAppender = new Bug4jAppender();
    bug4jAppender.setName("BUG4J");
    bug4jAppender.setServerUrl("http://localhost:8063/");
    bug4jAppender.setApplicationName("testapp");
    bug4jAppender.setApplicationVersion("1.9");

    Logger.getRootLogger().addAppender(bug4jAppender);
    log.addAppender(bug4jAppender);

    Bug4jAgent.report("Failed to do something", null);
    log.info("Failed to do something");
 }
} 
```

请问有什么想法吗？

编辑：可能与为什么实际上没有报告任何内容有关，如果我添加：

```
 BasicConfigurator.configure();
    Logger.getRootLogger().setLevel(Level.INFO);

    Bug4jAppender bug4jAppender = new Bug4jAppender();
    bug4jAppender.setName("BUG4J");
    bug4jAppender.setServerUrl("http://127.0.0.1:8063/");
    bug4jAppender.setApplicationName("testapp");
    bug4jAppender.setApplicationVersion("1.9");
    bug4jAppender.activateOptions();

    Logger.getRootLogger().addAppender(bug4jAppender);

    //Bug4jAgent.report("Failed to do something", null);
    log.warn("Failed to do something");
    Bug4jAgent.shutdown(); 
```

我明白了

```
 Exception in thread "main" java.lang.NullPointerException
at org.bug4j.client.Bug4jAppender.append(Bug4jAppender.java:48)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
at     org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
at org.apache.log4j.Category.callAppenders(Category.java:206)
at org.apache.log4j.Category.forcedLog(Category.java:391)
at org.apache.log4j.Category.warn(Category.java:1043)
at testapp.Main.<init>(Main.java:118)
at testapp.Main.main(Main.java:837) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:14:51.013

1.  您必须在 Log4j appender 上“激活选项”。

    ```
    bug4jAppender.activateOptions(); 
    ```

2.  bug4j 代理希望是非侵入式的，因此它将报告排入队列并由后台线程处理。如果您的应用程序在报告问题后立即死亡，您应该等待后台线程报告仍在队列中的所有错误。
    在 main() 的末尾添加以下行。

    ```
    Bug4jAgent.shutdown(); 
    ```

3.  Bug4j 可以与或不与 log4j 一起使用。如果您将它与 log4j 一起使用，那么您可以以编程方式设置代理，但您可以忘记它并使用 log4j 报告错误。
    代替

    ```
    Bug4jAgent.report("Failed to do something", null);
    log.info("Failed to do something"); 
    ```

    打电话

    ```
    log.error("Failed to do something"); 
    ```

最后你应该有这样的东西：

```
 BasicConfigurator.configure();
    Logger.getRootLogger().setLevel(Level.INFO);

    Bug4jAppender bug4jAppender = new Bug4jAppender();
    bug4jAppender.setName("BUG4J");
    bug4jAppender.setServerUrl("http://localhost:8063/");
    bug4jAppender.setApplicationName("testapp");
    bug4jAppender.setApplicationVersion("1.9");
    bug4jAppender.activateOptions();

    Logger.getRootLogger().addAppender(bug4jAppender);

    log.error("Failed to do something");
    Bug4jAgent.shutdown(); 
```

# javascript - 自定义 html / javascript 键盘在 android 上太慢了

> ID：14893200
> 
> 赞同：0
> 
> 时间：2013-02-15T10:58:31.600
> 
> 标签：javascript, android, cordova

我创建了一个在 phonegap 上为 android 运行的简单数字键盘，并且正在使用 html / JavaScript 更新输入框，但响应速度非常慢。想知道是什么原因。我正在使用的简单代码是

```
if($('#checkout_wizard').is(":visible")) {
    txt = document.getElementById('txt_amount_paid');
} else {
    txt = document.getElementById('txt_number');
}

val = txt.value;

if( this.innerHTML!= '&lt;') {
    txt.value = val + this.innerHTML;
} else {
    txt.value = val.substring(0, val.length-1);
} 
```

无论如何要加速虚拟键盘？

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:39:59.027

我注意到当我从一个输入框切换到另一个输入框时，虚拟键盘非常慢并且屏幕闪烁。尤其是当我将 jQuery Mobile 与 PhoneGap 一起用于 UI 时。

要优化 jQuery Mobile 并加速某些事情，请看[一下这个问题。](https://stackoverflow.com/questions/14097351/phonegap-jquery-mobile-slow-tap-response-time)

即使您没有使用 jQuery Mobile，这里也提到了关于慢速虚拟键盘的问题，请查看： http: [//floatlearning.com/2011/03/developing-better-phonegap-apps/](http://floatlearning.com/2011/03/developing-better-phonegap-apps/)

# java - 如何在 Java 7 中用 nio 替换 File.listFiles(FileFilter filter)？

> ID：14893205
> 
> 赞同：17
> 
> 时间：2013-02-15T10:58:44.477
> 
> 标签：java, file, path, java-7, nio2

我有一些用 Java 6 编写的文件 I/0 遍历代码，试图将其移动到 Java 7 中的新 I/O，但我找不到任何替代这种东西的方法。

```
File[] files = dir.listFiles(AudioFileFilter.getInstance()); 
```

也就是说，没有办法只过滤文​​件的路径，它返回文件列表，所以如果我想限制在它调用的方法中使用 File，我必须将每个文件转换为路径（file.toPath），这似乎相当费力.

我确实看过 FileVisitor 但这似乎不允许您控制树的遍历方式，所以我认为它对我有用。

那么 Java 7 中的 Path for File 有多少替代品呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T11:08:50.900

使用[Files#newDirectoryStream](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newDirectoryStream%28java.nio.file.Path,%20java.nio.file.DirectoryStream.Filter%29)和[DirectoryStream.Filter](http://docs.oracle.com/javase/7/docs/api/java/nio/file/DirectoryStream.Filter.html)

这是代码：

```
DirectoryStream<Path> stream = Files.newDirectoryStream(dir, new DirectoryStream.Filter<Path>() {

        @Override
        public boolean accept(Path entry) throws IOException 
        {
            return Files.isDirectory(entry);
        }
    });

for (Path entry: stream) {
      ...
} 
```

顺便说一句，为简单起见，我省略了上述代码中的异常处理。

# apache2 - “PHP 致命错误：无法重新声明类”？

> ID：14893210
> 
> 赞同：2
> 
> 时间：2013-02-15T10:59:06.413
> 
> 标签：apache2, php, prestashop

我有一个看起来很奇怪的问题。我正在使用带有 LAMP 堆栈的 Prestashop。当我重新启动 Apache 时，一切正常，但过了一段时间，我开始在日志中显示这些消息：

> [2013 年 2 月 15 日星期五 10:54:42] [错误] [客户端 xxx.xxx.xxx.xxx] PHP 致命错误：无法在第 30 行的 /srv/www/my-ecommerce/classes/Manufacturer.php 中重新声明类制造商核心，推荐人：[http://my-ecommerce.tld/fr/90421-example](http://my-ecommerce.tld/fr/90421-example)
> 
> [2013 年 2 月 15 日星期五 10:55:56] [错误] [客户端 xxx.xxx.xxx.xxx] PHP 致命错误：无法在第 30 行的 /srv/www/my-ecommerce/classes/Category.php 中重新声明类 categorycore ，推荐人：[http://my-ecommerce.tld/fr/90599-example](http://my-ecommerce.tld/fr/90599-example)

如果我看一下 Category.php 或 Manufacturer.php（来自 Prestashop）中的代码，它以

```
if(class_exists('CategoryCore') != true) {
    class CategoryCore extends ObjectModel {
        // Code here
    }
} 
```

所以现在，我只是迷路了。我得到一个错误，说类被重新声明，但代码似乎避免了这种问题。

# asp.net-web-api - WebApi 动作从发布的 json 中丢失子集合

> ID：14893216
> 
> 赞同：1
> 
> 时间：2013-02-15T10:59:55.397
> 
> 标签：asp.net-web-api, json.net

假设我发布这样的对象

```
{"Dto" : {
            "DtoId" : 1, 
            "DtoThing" : "Some value", 
            "DtoChildStuff" : [{"CsId" : 1, "ChildProperty" : "SomeThing"}]
           }} 
```

像这样的 WebApi 动作

```
[HttpPost]
public Response<MyDto> Post(DtoWrapper<MyDto> input)... 
```

其中参数只是一些具有 MyDto 类型的属性 MyDto 的对象，而 MyDto 是这样的

```
[DataContract]
public class MyDto
{
    [DataMember]
    public int DtoId {get;set;}
    [DataMember]
    public string DtoThing {get;set;}
    [DataMember]
    public List<ChildStuffDto> DtoChildStuff {get;set;}
}

[DataContract]
public class ChildStuffDto
{   
    [DataMember]
    public int CsId {get;set;}
    [DataMember]
    public string ChildProperty {get;set;}
} 
```

并且（顺便说一下） DtoWrapper 只是

```
public class DtoWrapper<T>
{
   public T Dto {get;set;}
   // So that I can add some other info that I need //
} 
```

为什么动作看不到任何子对象。如果我将参数上的类型更改为对象，我可以看到正在发布的子对象，但它不会被反序列化。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:31:41.577

好的，这是我的答案，但我很想知道是否有一种方法可以在不将这行代码添加到我的操作中的情况下实现它。

```
 public Response<MyDto> Post(object input)
    {

        dynamic myWrapperObj = JsonConvert.DeserializeObject<SomeWrapperForMyDto>
                             (input.ToString());
        ... 
```

如果这就是它必须的方式，那么公平竞争，但这似乎是一种耻辱。感谢您的任何帖子:)

# grid - extjs4 应用过滤器只是为了显示网格数据

> ID：14893217
> 
> 赞同：1
> 
> 时间：2013-02-15T10:59:58.203
> 
> 标签：grid, extjs4, filtering, store

首先，我创建了这个变量：

```
 var  filters = {
        ftype: 'filters',
        encode: false,
        local: true
    }; 
```

网格的代码是这样的：

```
{
                xtype: 'gridpanel',
                filterable: true,
                features: [filters],
                store: 'Webdesktop.store',
                columns: [
                {   
                    dataIndex: 'name',
                    text: 'my_text',
                    filter: { type: 'string'}  
                },
                ],
                viewConfig: {}
} 
```

问题是，在 My_Grid 中，我只显示商店数据的一部分，当我想过滤列时，My_grid 显示过滤后的所有商店数据。
例如：
我的商店包含以下名称：'A1'、'A2'、'B1'、'B2'
我在网格中显示的内容：'A1'、'B1'
当我开始过滤时，我写了 'A'，网格将显示“A1”和“A2”，但我希望过滤器仅应用于显示的数据，而不是所有商店的数据！

# windows-phone-7 - 空闲应用的 Windows Phone CPU 使用率 50%

> ID：14893220
> 
> 赞同：0
> 
> 时间：2013-02-15T11:00:05.227
> 
> 标签：windows-phone-7, cpu-usage

我有一个使用带有 textchanged 事件处理程序的文本框的应用程序。问题是如果这个文本框被聚焦并且应用程序处于空闲状态，那么 CPU 使用率大约是 50%。有没有办法改变这个CPU使用率？这是正常的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:17:52.993

我在另一个提要上发现了同样的问题。请阅读它，也许你会发现一些结果。

这是饲料...

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3ca12e44-c50e-46e5-a7fa-209d20fb2e26/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3ca12e44-c50e-46e5-a7fa-209d20fb2e26/)

# c++ - auto_ptr 或 shared_ptr

> ID：14893234
> 
> 赞同：3
> 
> 时间：2013-02-15T11:01:04.540
> 
> 标签：c++, shared-ptr, auto-ptr, visual-c++-2005

在 C++03 环境中，您会使用 an`auto_ptr`还是 a (boost)`shared_ptr`从函数返回资源？（在 C++11 中自然会使用`unique_ptr`.）

```
auto_ptr<T> f() {
  ...
  return new T();
} 
```

或者

```
shared_ptr<T> f() {
  ...
  return new T();
} 
```

`auto_ptr`有相当多的陷阱（尤其是它的构造在我必须使用[的 MSVC 2005 上非常错误](https://stackoverflow.com/q/270347/321013)`shared_ptr`），但似乎有点矫枉过正......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T11:09:22.313

在 C++03 中，我将使用裸指针或 an`auto_ptr`并让调用者决定所有权策略。

请注意，智能指针的缺陷之一是*协方差*不适用于它们，这意味着您可以覆盖`Base* f()`但`Derived* f()`不能`std::x_ptr<Base> f()`覆盖`std::x_ptr<Derived> f()`；因此在这种情况下，您别无选择，只能使用简单的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:03:38.440

我会使用一个`shared_ptr`或一个原始指针，因为这`auto_ptr`被认为是一个坏主意。

这实际上取决于您的*所有权*语义。谁将破坏拥有的资源？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:19:33.147

免责声明：这个答案*完全*适用于 auto_ptr 使用与 VS2005 中的错误实现类似的错误实现。

`auto_ptr` *在 VS 2005 上*尝试后，我将添加自己的视图：

过去，我已经在纯本地上下文中成功使用了 auto_ptr（在此 VC++8 上），即：

```
auto_ptr<T> local( ... ); // Don't use "=" to init! Will Crash on VS2005!
// use local
...
// Sometimes:
m_managing_object.setStuff( local.release() );
// Or, alternatively:
return local.release(); 
```

这工作得很好，唯一可能出问题的是使用 init 的赋值语法，它每次都会可靠地崩溃，所以这没什么大不了的。

因此，同意其他人提到的隐含语义，我试图让我的初始示例起作用

```
auto_ptr<T> f() {
  ...
  return new T();
}
...
auto_ptr<T> pT( f() ); // or "=" init??, Variations ...
... 
```

**失败！**

在摆弄这个琐碎的例子大约 1 小时 30 之后，我*仍然*没有弄清楚`auto_ptr`每次以这种方式使用时为什么以及如何准确地崩溃。

我很确定这是由于 VS2005 的错误实现造成的，也就是说，我可能已经做了一些完全疯狂的事情，一个无错误的实现会抓住但在这里它崩溃了，我没能把它做好。

这是什么意思：这意味着我使用 VS2005 和 C++ 已经超过 5 年了，即使是最奇怪的场景，我也很有信心调试，一个多小时后，我*仍然*没有弄清楚我做错了什么。我敢肯定我最终会发现，但如果一个东西太容易被滥用，我宁愿使用`shared_ptr`它并完成它。地狱，即使是原始指针返回也更好，至少你会得到的最糟糕的事情是memleak（很容易检测到）。

所以：除了 VS2005 上最琐碎的 auto_ptr 用例之外，请远离所有用例。

# windows - php_memcache.dll 用于 php 5.2.2

> ID：14893237
> 
> 赞同：0
> 
> 时间：2013-02-15T11:01:15.693
> 
> 标签：windows, php-extension, php-5.2

我需要这个 php 版本的 php_memcache.dll：**5.2.2**

现在我尝试在这里找到它[http://museum.php.net/php5/](http://museum.php.net/php5/) 但在 Pecl for php 5.2.2 中**没有这样的文件**。

更高版本中有 memcache .dll，但它们对我不起作用。

我也试过：“ www.pureformsolutions.com/pureform.wordpress.com/2008/06/17/php_memcache.dll for PHP 5.2.* ”，但仍然不起作用。

现在你知道我可以在哪里获得这个版本的文件，或者你能帮我在 Windows 7 上使用 Cygwin 从源代码构建吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T23:42:07.377

你知道这个吗？[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/) 请告诉我。

# c# - 使用包含不同值的键对键值对进行排序

> ID：14893241
> 
> 赞同：1
> 
> 时间：2013-02-15T11:01:21.320
> 
> 标签：c#, .net, list, key-value

我正在使用 .net 2.0 c#

我有一组从文件中读取的键/值。因此，键可能相同，但与每个键相关联的值不同。

我想按排序顺序列出键，并将其显示在网格中，列中的关联值与不同的值一样多。我能做些什么 ？我尝试使用 SortedList 类，但它不允许重复键。

在.net 3.0 linq 中工作，但我需要在.net 2.0 中进行。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:45:12.570

让我们解决您在 2 个部分中指出的问题：
[a] 具有相同键但具有不同值的问题 [Soln] 在下面的代码片段中设计一个用户定义的类，即 DataKeys。
[b] 排序列表中的键 [Soln] 为用户定义的类实现 IComperable。

以下是您可以实现的示例类：

```
 internal class DataKeys : IComparable<DataKeys>
    {
        private int key;

        private string values;

        public DataKeys(int key, string values)
        {
            this.key = key;
            this.values = values;
        }

        internal int Key
        {
            get { return key; }
        }

        internal string Values
        {
            get { return Values; }
        }

        public int CompareTo(DataKeys other)
        {
            if (this.key > other.key) return 1;
            else if (this.key < other.key) return -1;
            else return 0;
        }

    } 
```

只是为了检查此代码将如何根据示例客户端代码执行：

```
 private static void Main(string[] args)
    {
        List<DataKeys> dataRepository = new List<DataKeys>()
                                            {
                                                new DataKeys(10, "Key-10"),
                                                new DataKeys(11, "Key-11"),
                                                new DataKeys(9, "Key-9"),
                                                new DataKeys(8, "Key-8"),
                                                new DataKeys(100, "Key-100")
                                            };
        dataRepository.Sort();

        foreach (var dataKeyse in dataRepository)
        {
            Console.WriteLine(dataKeyse.Key);
        }
    } 
```

输出 ：

![在此处输入图像描述](../Images/565dfcffb805283af9eb3fa533afeb28.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:21:03.653

您可以`DataTable`在您的场景中使用 a ：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        string[] lines = System.IO.File.ReadAllLines("TextFile.txt");
        DataTable dt = new DataTable();
        dt.Columns.Add("key");
        dt.Columns.Add("value");
        foreach (string line in lines)
        {
            string key = line.Split(',')[0];
            string value = line.Split(',')[1];
            dt.Rows.Add(key, value);
        }
        dt.DefaultView.Sort="key";
        dataGridView1.DataSource = dt;
    }
} 
```

`TextFile.txt`文本文件：

```
1,test1
2,test2
3,test3
2,test4
1,test5
1,test6 
```

# c++ - 共享内存中 boost::lockfree::queue 的问题（boost 1.53，gcc 4.7.2 / clang 3.0-6ubuntu3）

> ID：14893246
> 
> 赞同：9
> 
> 时间：2013-02-15T11:01:28.570
> 
> 标签：c++, boost, shared-memory, interprocess, lock-free

我在放置`boost::lockfree::queue<<T, fixed_sized<false>, ..>` 共享内存时遇到问题。我需要它是因为我必须能够在队列中插入超过 65535 条消息，并且固定大小的队列仅限于 65535。
以下代码可以正常工作（但`capacity<...>`选项暗示`fixed_sized<true>`）：

```
typedef boost::interprocess::allocator<
    MessageT, 
    boost::interprocess::managed_shared_memory::segment_manager>
        ShmemAllocator;
typedef boost::lockfree::queue<
    MessageT,
    boost::lockfree::capacity<65535>,
    boost::lockfree::allocator<ShmemAllocator> >
        Queue;
m_segment = new boost::interprocess::managed_shared_memory(
    boost::interprocess::create_only, segmentName, size);
Queue* m_queue = m_segment->construct<Queue>(
    queueName)(
    m_segment->get_segment_manager());
...
m_queue->bounded_push(message); 
```

以下代码也可以正常工作（但它不使用共享内存）：

```
boost::lockfree::queue<MessageT> q;
....
q.bounded_push(message); 
```

但是当我尝试结合它时：

```
typedef boost::interprocess::allocator<
    MessageT, 
    boost::interprocess::managed_shared_memory::segment_manager>
        ShmemAllocator;
typedef boost::lockfree::queue<
    MessageT,
    boost::lockfree::allocator<ShmemAllocator> >
        Queue;
m_segment = new boost::interprocess::managed_shared_memory(
    boost::interprocess::create_only, segmentName, size);
Queue* m_queue = m_segment->construct<Queue>(
    queueName)(
    m_segment->get_segment_manager());
...
m_queue->bounded_push(message); 
```

它无法使用以下日志进行编译：

```
In file included from src/model/Queue.h:16:

In file included from /home/uppi/lib/include/boost/lockfree/queue.hpp:24:

/home/uppi/lib/include/boost/lockfree/detail/freelist.hpp:171:28: error: no viable conversion from 'pointer' (aka 'offset_ptr<boost::lockfree::queue<PacketMessage,
      boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,
      boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_, boost::parameter::void_>::node, long, unsigned long, 0UL>') to
      'boost::lockfree::queue<PacketMessage, boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char,
      boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_,
      boost::parameter::void_>::node *'
                    return Alloc::allocate(1);
                           ~~~~~~~~~~~~~~~~~

/home/uppi/lib/include/boost/lockfree/detail/freelist.hpp:157:20: note: in instantiation of function template specialization 'boost::lockfree::detail::freelist_stack<boost::lockfree::queue<PacketMessage,
      boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,
      boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_, boost::parameter::void_>::node,
      boost::interprocess::allocator<boost::lockfree::queue<PacketMessage, boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char,
      boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_,
      boost::parameter::void_>::node, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned
      long, 0>, 0>, iset_index> > >::allocate_impl<true>' requested here
            return allocate_impl<Bounded>();

/home/uppi/lib/include/boost/lockfree/detail/freelist.hpp:89:20: note: in instantiation of function template specialization 'boost::lockfree::detail::freelist_stack<boost::lockfree::queue<PacketMessage,
      boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,
      boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_, boost::parameter::void_>::node,
      boost::interprocess::allocator<boost::lockfree::queue<PacketMessage, boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char,
      boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_,
      boost::parameter::void_>::node, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned
      long, 0>, 0>, iset_index> > >::allocate<true, true>' requested here
        T * node = allocate<ThreadSafe, Bounded>();

/home/uppi/lib/include/boost/lockfree/queue.hpp:281:34: note: in instantiation of function template specialization 'boost::lockfree::detail::freelist_stack<boost::lockfree::queue<PacketMessage,
      boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,
      boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_, boost::parameter::void_>::node,
      boost::interprocess::allocator<boost::lockfree::queue<PacketMessage, boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char,
      boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_,
      boost::parameter::void_>::node, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned
      long, 0>, 0>, iset_index> > >::construct<true, true, PacketMessage, boost::lockfree::queue<PacketMessage, boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage,
      boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >,
      boost::parameter::void_, boost::parameter::void_>::node *>' requested here
        node * n = pool.template construct<true, Bounded>(t, pool.null_handle());

/home/uppi/lib/include/boost/lockfree/queue.hpp:270:16: note: in instantiation of function template specialization 'boost::lockfree::queue<PacketMessage,
      boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,
      boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >, boost::parameter::void_, boost::parameter::void_>::do_push<true>' requested here
        return do_push<true>(t);

src/model/Queue.inl:4:18: note: in instantiation of member function 'boost::lockfree::queue<PacketMessage, boost::lockfree::allocator<boost::interprocess::allocator<PacketMessage,
      boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void, long, unsigned long, 0>, 0>, iset_index> > >,
      boost::parameter::void_, boost::parameter::void_>::bounded_push' requested here
        return m_queue->bounded_push(message);                         

/home/uppi/lib/include/boost/interprocess/offset_ptr.hpp:450:4: note: candidate function
   operator unspecified_bool_type() const 
```

请告诉我我错过了什么

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T12:44:22.833

出于兼容性原因，使用`boost::lockfree::queue`或`boost::lockfree::stack`在共享内存中限制为 65535 个元素。如果您有一个单一生产者、单一消费者的用例，您可能希望使用`boost::lockfree::spsc_queue`. 但是，这也不是动态大小的。

原因是限制是 32 位兼容性。对于 64 位平台，也许可以调整 boost.lockfree 代码以使用 32 位而不是 16 位索引。但它需要一些重要的更改才能正确实现。

# c# - MVC3 数据绑定

> ID：14893250
> 
> 赞同：2
> 
> 时间：2013-02-15T11:01:42.250
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有一个局部视图，我将模型传递给它，它显示用户可以选择的复选框，这最终会与我的表单一起发布，以便我可以查询它们的选中状态并根据需要将数据插入数据库。

我想更改我的局部视图，以便不采用包含模型列表的模型，而是直接采用模型列表，从而将其解耦并使其作为局部视图更有用。问题是当我这样做时，它似乎没有正确绑定数据。下面是之前的代码示例（正常工作和不工作之后）。

如果有人能够阐明为什么我的更改没有生效，我将不胜感激，即在我检查发布的数据时的后代码中，列表为空，而在正确填充之前：

**前：**

调用局部视图：

```
<fieldset>
    <legend>Facilities</legend>
    <div class="display-field">
        <div>
            @{Html.RenderPartial("Partial/FacilityPartial", Model);}
        </div>
    </div>
</fieldset> 
```

部分观点：

```
@model namespace.Models.SchoolRegisterModel
@for (var i = 0; i < Model.Facilities.Count; i++)
{
    @Html.HiddenFor(x => x.Facilities[i].name)
    @Html.HiddenFor(x => x.Facilities[i].facility_id)
    @Html.LabelFor(x => x.Facilities[i].@checked, Model.Facilities[i].name);
    @Html.CheckBoxFor(
            x => x.Facilities[i].@checked,
        new
        {
            id = Model.Facilities[i].facility_id,
            @class = "RightSpacing",
            description = Model.Facilities[i].description
        }
    ) 
} 
```

**后：**

调用局部视图：

```
<fieldset>
    <legend>Facilities</legend>
    <div class="display-field">
        <div>
            @{Html.RenderPartial("Partial/FacilityPartial", Model.Facilities);}
        </div>
    </div>
</fieldset> 
```

部分观点：

```
@model IEnumerable<namespace.Models.facility>
@for (int i = 0; i < Model.Count(); i++)
{
    @Html.HiddenFor(x => x.ElementAt(i).name)

    @Html.HiddenFor(x => x.ElementAt(i).name)
    @Html.HiddenFor(x => x.ElementAt(i).facility_id)
    @Html.LabelFor(x => x.ElementAt(i).@checked, Model.ElementAt(i).name);
    @Html.CheckBoxFor(
            x => x.ElementAt(i).@checked,
        new
        {
            id = Model.ElementAt(i).facility_id,
            @class = "RightSpacing",
            description = Model.ElementAt(i).description
        }
    )
} 
```

提前致谢！

乔

**完成的代码（工作）**

模型：

```
public class SchoolRegisterModel
{
    // ... Lots of data 
    public string Data { get; set; }

    [Display(Name = "Facilities")]
    public IEnumerable<FacilityViewModel> Facilities { get; set; }
}

namespace namespace.Models
{
    public class FacilityViewModel
    {
        public FacilityViewModel()
        {
        }

        public FacilityViewModel(facility facil, bool bSelected = false)
        {
            this.Facility = facil;
            this.Selected = bSelected;
        }

        public facility Facility { get; set; }
        public bool Selected { get; set; }        
    }
} 
```

编辑器模板：

```
@model namespace.Models.FacilityViewModel
@Html.HiddenFor(x => x.Facility.facility_id)
@Html.HiddenFor(x => x.Facility.name)
@Html.LabelFor(x => x.Selected, Model.Facility.name)
@Html.CheckBoxFor(x => x.Selected,
    new
    {
        id = Model.Facility.facility_id,
        @class = "RightSpacing",
        description = Model.Facility.description
    }
) 
```

控制器：

```
// GET: /School/Register

public ActionResult Register()
{
    var viewModel = new SchoolRegisterModel();

    PopulateFacilityCollection(ref viewModel);
    return View(viewModel);
}

private void PopulateFacilityCollection(ref SchoolRegisterModel viewModel)
{
    List<FacilityViewModel> FacilityCollection = new List<FacilityViewModel>();
    foreach (facility facil in DBModel.facilities)
    {
        FacilityCollection.Add(new FacilityViewModel(facil));
    }

    viewModel.Facilities = FacilityCollection;
} 
```

看法：

```
<fieldset>
    <legend>Facility</legend>
        <div class="editor-field">
            @Html.EditorFor(x => x.Facilities)
        </div>
</fieldset> 
```

现在一切似乎都很好，我希望这对其他人有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:41:58.650

问题是，当您应该使用编辑器模板时，您似乎正在使用部分视图。使用 Partials 时，您需要传递完整的模型，以便 Html 助手在它生成的名称/ID 中保留完整的对象层次结构。由于模型绑定器在反序列化期间使用这些名称，如果层次结构丢失......数据无法重新饱和。

我建议改用编辑器模板，这将允许您在局部视图中保持 Razor 代码相同，同时仅传递顶级模型中所需的对象......在您的情况下是列表。

这是一个关于如何使用它们的非常好的教程：http: [//coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)

# ruby-on-rails - Rails Web 服务器未启动

> ID：14893253
> 
> 赞同：0
> 
> 时间：2013-02-15T11:01:50.300
> 
> 标签：ruby-on-rails, ruby

*   Rails 版本 2.3.14
*   红宝石版本 1.8.7
*   宝石版本 1.6.2

`rails s`给我以下输出：

```
 exists  
      exists  app/controllers
      ...  
      exists  tmp/cache
      exists  tmp/pids
   identical  Rakefile
   identical  README
   identical  db/seeds.rb
   identical  config/initializers/backtrace_silencers.rb
   identical  config/initializers/inflections.rb
   identical  config/initializers/mime_types.rb
   identical  config/initializers/new_rails_defaults.rb
overwrite config/initializers/session_store.rb? (enter "h" for help) [Ynaqdh] Y
       force  config/initializers/session_store.rb
overwrite config/initializers/cookie_verification_secret.rb? (enter "h" for help) [Ynaqdh] Y
       force  config/initializers/cookie_verification_secret.rb
   identical  config/environment.rb
   ....
   identical  config/boot.rb
   identical  public/javascripts/controls.js
   identical  public/javascripts/application.js
   identical  doc/README_FOR_APP
   identical  log/server.log
   identical  log/production.log
   identical  log/development.log
   identical  log/test.log 
```

我的 Rails 版本真的很旧，但这不取决于我。另外，我的日志文件是空的。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:03:36.157

在 rails 2.x 中运行服务器的命令是

```
script/server 
```

`rails s`在 2.x 中创建一个名为“s”的新 Rails 应用程序，而不是启动服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:10:00.583

对于 Rails 2.x，在项目目录中使用以下命令：

```
ruby script/server 
```

# c++ - Windows phone 8：原生c++应用开发，这是什么c++？

> ID：14893255
> 
> 赞同：0
> 
> 时间：2013-02-15T11:01:51.273
> 
> 标签：c++, windows-phone-8

我试图学习如何为**Windows phone 8开发****c++**应用程序，但我遇到了某种奇怪的 c++ 语法。例如定义一个类是这样的：

 **```
partial ref class MainPage : public Windows::UI::Xaml::Controls::Page… {…} 
```

或者我认为`^`是用来代替`*`.
我在任何地方都没有看到这些关键字。那么这是一个什么样的c++呢？以及在哪里学习呢？谢谢。**

# html - 图像 [通过 CSS 的背景图像] 未在 IE7 中呈现

> ID：14893256
> 
> 赞同：-2
> 
> 时间：2013-02-15T11:01:56.207
> 
> 标签：html, css, internet-explorer, internet-explorer-7

关于 IE7 不会在以下 HTML/CSS 代码中呈现我的图像的原因，我需要一些帮助

```
<html>
   <head>
      <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
      <title>Debugging IE 7 image problem</title>
      <style>
         .delete-icon
         {
         background-image: url("http://cdn4.iconfinder.com/data/icons/momenticons-basic/16x16/trash-can-delete.png");
         background-position: top right;
         background-repeat: no-repeat;
         padding-right: 18px;
         margin-left: 7px;
         }
      </style>
   </head>
   <body>
      <table id="table_Locations">
         <tbody>
            <tr>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr class="div-input-default" id="LocationsTest2">
               <td>
                  <select name="AllTests_Locations_Substance_2" id="LocationsTest2">
                     <option value="641">Okuku</option>
                     <option value="644">Oyan</option>
                     <option value="645">Ikirun</option>
                     <option value="646">Oshogbo</option>
                  </select>
               </td>
               <td>
                    <input id="LocationsTestResults2_negative" name="AllTests_Locations_Result_2" value="776" type="radio" />Negative <input id="LocationsTestResults2_positive" name="AllTests_Locations_Result_2" value="777" type="radio" />Positive<br />
                    </td>
               <td>
                    <a class="delete-icon" href="#"></a>
               </td>
            </tr>
         </tbody>
      </table>
   </body>
</html> 
```

这在 IE8、IE9、Firefox 和 Chrome 中表现良好，但在 IE7 中表现不佳。请问如何更改此标记以使其在 IE7 中工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:05:40.810

尝试将宽度和高度设置为 .delete-icon 样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:23:03.700

试试这个：

```
.delete-icon {
         background: url("http://cdn4.iconfinder.com/data/icons/momenticons-basic/16x16/trash-can-delete.png") no-repeat right 0;
         display: inline-block;
         width: 100px; /* set to whatever you need */
         height: 100px; /* set to whatever you need */
         padding-right: 18px;
         margin-left: 7px;
} 
```

关键是给锚标签正确的显示值加上宽度和高度。

我还建议您不要将表格用于布局目的，因为这至少在 10 年或更长时间内都不是很好的做法。

# css - CSS - 同一行中的两个浮动 div，一个带有换行文本

> ID：14893257
> 
> 赞同：3
> 
> 时间：2013-02-15T11:01:59.553
> 
> 标签：css, css-float

这是问题所在：我想在同一行中有 2 个浮动 div。右 div 可以是固定宽度。左 div 应该占用所有剩余空间，并将文本包装在里面。父容器宽度是可变的，所以我不能在两个 div 上设置宽度。

[http://jsfiddle.net/af6wP/](http://jsfiddle.net/af6wP/)

```
div{border: 1px solid black}
.left{float: left}
.right{float: right}
<div class="left">
    very long text very long text very long text very long text very long text very long text very long text very long text very long text very long text very long text 
</div>

<div class="right">
    short text
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T11:08:49.643

看起来你只需要一个浮点数：

```
div{border: 1px solid black}
.left{ overflow: hidden; }
.right{float: right} 
```

示例[http://jsfiddle.net/KmPjL/](http://jsfiddle.net/KmPjL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:11:39.877

**编辑**

为右侧 div 的固定宽度提供了更好的解决方案：

**html**

```
<div class="left">
    <div class="right">
        short text
    </div>
    very long text very long text very long text very long text very long text very long text very long text very long text very long text very long text very long text 

</div> 
```

**CSS**

```
div{border: 1px solid black;}
.right{float:right;width:24%;} 
```

[查看更新的小提琴](http://jsfiddle.net/soyuka/af6wP/5/)

如果右侧容器上有长文本，则必须使用[clearfix](http://pastebin.com/dyVHk8Ax)。

# android - 在android中为片段创建上下文菜单

> ID：14893259
> 
> 赞同：1
> 
> 时间：2013-02-15T11:02:02.953
> 
> 标签：android, android-fragments

我的 android 应用程序中有两个活动。一个是列表视图，另一个是 ListDetailActivity。

我想实现 multipan 布局，所以当这个应用程序在 tablat（大屏幕）上运行时，两个屏幕都将在同一个屏幕上。为此，我们将其实现为一个片段并组合在一个片段活动中。

喜欢这张图片 ![在此处输入图像描述](../Images/1c68e782f6f0e9a4b31350f9f2db7df3.png)

但是我如何在单个屏幕上为两个片段实现上下文菜单。

可能吗？

# c - 'check' 的参数 1 的类型不兼容

> ID：14893260
> 
> 赞同：0
> 
> 时间：2013-02-15T11:02:02.917
> 
> 标签：c, incompatibletypeerror

我在编译这段代码时遇到了问题。任何解决方案将不胜感激。代码如下：

```
 #include<stdio.h>

    typedef struct nx_string_t
            {
                char *buf;
                int number; 
            }nx_string_t;

    typedef struct nx_value_t
            {
               union
                {
                nx_string_t strng;
                };
            } nx_value_t;

            void func(nx_value_t *vale);
            void check(nx_value_t *str);
            void func(nx_value_t *vale)
            {
                 if(vale->strng.buf == NULL)
                 {
                      printf("its done"); 
                      check(vale->strng);   
                 }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:09:39.020

`vale->strng`有类型`nx_string_t`。 `check`期望 a`nx_value_t*`所以你需要 `vale`通过

```
check(vale); 
```

# python - Python：json擦除词汇文件数据而不是写入

> ID：14893261
> 
> 赞同：0
> 
> 时间：2013-02-15T11:02:13.400
> 
> 标签：python, json, qa

您好，感谢您的光临。我有一个问题，编写 JSON dict 填充来自 GUI 的数据：执行此脚本后，我得到一个空的 .json 文件，即使它填充了一些东西。谷歌搜索没有任何适用的结果。

```
import easygui
import sys
from json import load, dump
from time import strftime, gmtime

def runTest():
    # This is not really correct, but it works.
    sys.argv = "Some Text"
    date = strftime("%d.%m.%Y", gmtime()) + " " + str(int(strftime("%H", gmtime())) + 4) + strftime(":%M", gmtime())
    test_case_area = easygui.buttonbox(
        "Welcome to Automation Testing Environment, please, select the testing area name:", "Autotests gentle robot",
        ("GUI", "EPG", "LCN"))
    stb = easygui.buttonbox("Please specify the STB type", "STB",
                            ("something_1", "something_2", "something_3", "something_4", "something_5", "something_6", "something_7"))
    platform = easygui.buttonbox("Please specify the {0} platform".format(stb), "{0} - Platform".format(stb),
                                 ("something_1", "something_2", "something_3", "something_4", "something_5"))
    full_platform = stb + "_" + platform
    msg = "Specify {0} parameters".format(full_platform)
    title = "{0} version information".format(full_platform)
    fieldNames = ["Software STB", "Hardware STB", "Module", "Software module", "Hardware module", "Tester", "Drive"]
    fieldValues = easygui.multenterbox(msg, title, fieldNames)
    test_conf_file_r = open("{0}:\\BBT2\\Configuration\\CP_PowerState.json".format(fieldValues[6]), "r")
    test_conf_vocab = load(test_conf_file_r)
    test_conf_vocab["platform"] = full_platform
    test_conf_vocab["SW_version"] = fieldValues[0]
    test_conf_vocab["HW_version"] = fieldValues[1]
    test_conf_vocab["test_name"] = test_case_area
    test_conf_vocab["disk"] = fieldValues[6]
    test_conf_file_w = open("{0}:\\BBT2\\Configuration\\CP_PowerState.json".format(fieldValues[6]), "w")
    dump(test_conf_vocab, test_conf_file_w) 
```

在 IDLE 完成脚本的 .json 部分后，我再次得到一个空文件，尽管调用变量`test_conf_vocab`并`test_conf_file_w` 单独工作正常。我知道我搞砸了`json.dump()`，我只是看不到或谷歌我自己的任何体面的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:04:07.800

您没有`test_conf_file_w`正确关闭文件对象。下次`with`在处理文件时考虑使用。

# c++ - 如何检查从 C++ 字符串到无符号整数的转换

> ID：14893264
> 
> 赞同：2
> 
> 时间：2013-02-15T11:02:23.753
> 
> 标签：c++, casting, type-conversion

我需要：

1）找出我当前系统上的最大无符号整数值是多少。我没有在limits.h上找到它。写作安全`unsigned int maxUnsInt = 0 - 1;`吗？我也尝试`unsigned int maxUnsInt = MAX_INT * 2 + 1`返回正确的值，但编译器显示有关 int 溢出操作的警告。

2）一旦找到，检查一个 C++ 字符串（我知道它只由数字组成）是否超过了我系统上的最大 unsigned int 值。

我的最终目标是使用 atoi 将字符串转换为无符号整数，当且仅当它是有效的无符号整数时。我宁愿只使用标准库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:25:47.880

应该有一个`#define UINT_MAX`in `<limits.h>`; 如果没有，我会感到非常惊讶。否则，保证：

```
unsigned int u = -1; 
```

将导致最大值。在 C++ 中，您也可以使用 `std::numeric_limits<unsigned int>::max()`，但在 C++11 之前，这不是一个整数常量表达式（这可能是也可能不是问题）。

```
unsigned int u = 2 * MAX_INT + 1; 
```

不保证是任何东西（至少在一个系统上 `MAX_INT == UMAX_INT`）。

关于检查字符串，最简单的解决方案是使用`strtoul`，然后验证`errno`和返回值：

```
bool
isLegalUInt( std::string const& input )
{
    char const* end;
    errno = 0;
    unsigned long v = strtoul( input.c_str(), &end, 10 );
    return errno == 0 && *end == '\0' && end != input.c_str() && v <= UINT_MAX;
} 
```

如果您使用的是 C++11，您还可以使用`std::stoul`，它会在溢出时引发`std::out_of_range`异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:14:54.210

[`numeric_limits`](http://en.cppreference.com/w/cpp/types/numeric_limits)对各种数字类型有限制：

```
unsigned int maxUnsInt = std::numeric_limits<unsigned int>::max(); 
```

[`stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)可以将字符串读入任何支持的类型`operator>>`并告诉您它是否失败：

```
std::stringstream ss("1234567890123456789012345678901234567890");

unsigned int value;
ss >> value;

bool successful = !ss.fail(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:07:03.710

根据[这个](http://en.wikipedia.org/wiki/C_data_types)你不需要计算它，只需使用适当的常数，这种情况应该是`UINT_MAX`。

很少的笔记。

与 c++ 相比，这似乎更像是一种交流方式，但既然你说你想使用`atol`我就坚持下去。c++ 将`numeric_limits`按照 Joachim 的建议使用。然而，c++ 标准也定义了类似 c 的宏/定义，因此使用起来应该是安全的。

此外，如果您希望它采用 c++ 方式，则可能更喜欢使用`stringstream`（它是标准 c++ 库的一部分）进行转换。

最后，我故意不发布显式代码解决方案，因为它看起来像家庭作业，你现在应该很好地从这里开始。

# django - Django 管理员根据表单字段值在更改表单中添加自定义按钮

> ID：14893267
> 
> 赞同：3
> 
> 时间：2013-02-15T11:02:40.610
> 
> 标签：django, django-templates, django-admin

我有一个覆盖 het Django 更改表单的应用程序。我要更改的是底部的提交按钮。下面是`change_form.html`一个 django 应用程序：

```
{% extends "admin/change_form.html" %}
{% block submit_buttons_bottom %} 
    ## add some buttons
{% endblock %} 
```

我要显示/添加的按钮取决于表单名称“状态”中某个字段的值。如何获取模板中字段的值...**类似于**：

```
{% if form.field.status == 'unresolved' %}
    <input type="submit" value="Mark as resolved" class="default" name="_save" />
{% endif %} 
```

**更新：**

我没有收到任何错误。根本没有显示任何内容。

循环通过 var 'adminform' 将带我到我需要的领域

```
{% for fieldset in adminform %}
    {% for line in fieldset %}
        {% for field in line %}
            {% if field.field.name == 'status' %}
                this is status {{ field.field.name }} - {{ field.contents }}
            {% endif %}
        {% endfor %}
    {% endfor %}
{% endfor %} 
```

但我想直接访问它。**就像是：**

```
{% if adminform.0.0.field.status == 'unresolved' %}
    <input type="submit" value="Mark as resolved" class="default" name="_save" />
{% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T10:59:16.943

这应该有效：

```
{% if adminform.form.status.value == 'unresolved' %} 
```

或者如果该字段是只读的，还有另一种方法：

```
{% if adminform.form.instance.status == 'unresolved' %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:09:03.907

尝试将您的`if`陈述更改为 -

```
{% if adminform.status.value == 'unresolved' %} 
```

我猜，但我认为`adminform`变量可能只是一种形式。查看[文档的这一部分](https://docs.djangoproject.com/en/1.4/topics/forms/#looping-over-the-form-s-fields)以查看表单字段的属性。

# javascript - 如何将画布图像保存到android phonegap中设备的sdcard中？

> ID：14893268
> 
> 赞同：1
> 
> 时间：2013-02-15T11:02:40.527
> 
> 标签：javascript, android, cordova, phonegap-plugins, phonegap-build

在画布上显示图像 在画布上绘制

它工作正常......

如何将此图像保存在设备库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:46:20.797

你可以使用这个 JavaScript 库：[canvas2image](http://www.nihilogic.dk/labs/canvas2image/)

您可以将画布数据保存为图像文件（PNG、JPEG 或 BMP）。

要将其保存到设备库中，您可以使用[此 PhoneGap 插件](http://jbkflex.wordpress.com/2012/12/23/saving-image-to-android-devices-gallery-phonegap-android/)

# c# - 如何根据 Autofac 中的可选参数将类注册为单例？

> ID：14893271
> 
> 赞同：1
> 
> 时间：2013-02-15T11:02:57.513
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, autofac

让我用代码解释我的问题，所以我有一个类：

```
public class ComplexEntity
{
    private readonly ISomeDependency _someDependency;
    private readonly int _optionalArg;

    public ComplexEntity(ISomeDependency someDependency, int optionalArg)
    {
        _someDependency = someDependency;
        _optionalArg = optionalArg;
    }
} 
```

和模块：

```
public class FooModule : Module
{
    protected override void OnMap(ContainerBuilder builder)
    {
        builder.RegisterType<ConcreteDependency>().As<ISomeDependency>().SingleInstance();
        builder.RegisterType<ComplexEntity>().AsSelf();//SingleInstance fails my test below. 
    }
} 
```

所以我的问题是 - 我如何`ComplexEntity`使用可选参数（类型为 int - 实际上它无关紧要）来解决，并且根据该可选参数，它将返回相同的实体（如果已经请求）或创建一个新的实体一 - 看看下面的测试：

```
 int optionalArgument = 10;
    int anotherOptionalArgument = 11;

    //I expect ResolveOptional returns same references for the same optional argument, 
    //thus instance1 should be equals instance2, but not equals instance3
    var instance1 = _container.ResolveOptional<ComplexEntity>(
        new TypedParameter(optionalArgument.GetType(), optionalArgument));
    var instance2 = _container.ResolveOptional<ComplexEntity>(
        new TypedParameter(optionalArgument.GetType(), optionalArgument));

    var instance3 = _container.ResolveOptional<ComplexEntity>(
        new TypedParameter(anotherOptionalArgument.GetType(), anotherOptionalArgument));

    bool ref12Equals = object.ReferenceEquals(instance1, instance2); //should be true
    bool ref13Equals = object.ReferenceEquals(instance1, instance3); //should be false
    bool ref23Equals = object.ReferenceEquals(instance2, instance3); //should be false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T08:57:25.097

在 autofac 范围内可以是单例或工厂（瞬态），而不是两者。如果您需要更复杂的生命周期管理，我相信您需要为此负责并自己管理。如果我理解正确，您需要一个生成新实例或返回单例的范围管理器。如果你仍然想使用 DI，你可以把它放在容器中，像这样：

```
 private const int FactoryMode = 11;
    private const int SingletonMode = 10;

    public static void Main()
    {
        var containerBuilder = new ContainerBuilder();
        containerBuilder.RegisterType<ComplexTypeScope>().SingleInstance();
        containerBuilder.Register((c, p) => c.Resolve<ComplexTypeScope>().Get(p.TypedAs<int>()));

        var container = containerBuilder.Build();
        ComplexType instance1 = container.Resolve<ComplexType>(new TypedParameter(typeof(int), SingletonMode));
        ComplexType instance2 = container.Resolve<ComplexType>(new TypedParameter(typeof(int), SingletonMode));
        ComplexType instance3 = container.Resolve<ComplexType>(new TypedParameter(typeof(int), FactoryMode));

        Debug.Assert(ReferenceEquals(instance1, instance2));
        Debug.Assert(!ReferenceEquals(instance1, instance3));
    }

    class ComplexType
    {
    }

    class ComplexTypeScope
    {
        private readonly Lazy<ComplexType> complexTypeSingleTon;

        public ComplexTypeScope()
        {
            complexTypeSingleTon = new Lazy<ComplexType>(() => new ComplexType());
        }

        public ComplexType Get(int parameter)
        {
            return parameter == FactoryMode ? new ComplexType() : complexTypeSingleTon.Value;
        }
    } 
```

当然，使用这种方法，容器不会管理组件的生命周期，例如自动处置。

# ruby-on-rails - 安装 ruby racer (0.10.1) 时出错

> ID：14893272
> 
> 赞同：17
> 
> 时间：2013-02-15T11:03:04.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, gem

嗨，我在捆绑安装时收到此错误...

```
Installing therubyracer (0.10.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/rajendran/.rvm/rubies/ruby-1.9.3-p374/bin/ruby extconf.rb 
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/rajendran/.rvm/rubies/ruby-1.9.3-p374/bin/ruby
extconf.rb:15:in `<main>': undefined method `include_path' for Libv8:Module (NoMethodError)

Gem files will remain installed in /home/rajendran/.rvm/gems/ruby-1.9.3-p374/gems/therubyracer-0.10.1 for inspection.
Results logged to /home/rajendran/.rvm/gems/ruby-1.9.3-p374/gems/therubyracer-0.10.1/ext/v8/gem_make.out
An error occurred while installing therubyracer (0.10.1), and Bundler cannot continue.
Make sure that `gem install therubyracer -v '0.10.1'` succeeds before bundling. 
```

我该如何解决这个..？
注意：操作系统 - Ubuntu 12.10

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-15T11:23:05.920

您可以尝试如下：

```
$ gem uninstall libv8
$ gem install therubyracer 
```

当我得到错误时，它使我的工作。

`P.S`您需要提及您的操作系统

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T07:51:08.443

类似于@Sri，但有点不同，所以贴上去别忘了：os - xubuntu 12.10

1.  宝石安装 therubyracer
2.  宝石卸载 libv8
3.  gem 卸载 therubyracer
4.  gem install therubyracer -v '0.9.9' 这个 gem 的版本是至关重要的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T08:58:16.423

sudo apt-get install g++ 完成了这项工作......

希望它会帮助某人

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T02:27:22.320

无需重新安装的另一种解决方案。（如果其他 Rails 应用程序使用不同的版本）：

1.列出已安装的gem版本：

```
$ gem list -l therubyracer    

*** LOCAL GEMS ***
therubyracer (0.12.0) 
```

2.修改您的 Gemfile 以使用已安装的 gem 之一：

```
# Gemfile
gem 'therubyracer', '0.12.0', platforms: :ruby 
```

完毕。现在尝试“捆绑安装”会给你一个成功通知。

# http - 422 状态码是否适合无法删除对象？

> ID：14893274
> 
> 赞同：1
> 
> 时间：2013-02-15T11:03:03.887
> 
> 标签：http

给定一个对具有 id 的资源的 DELETE 请求。例如，'DELETE /products/:id/ 如果无法删除资源，是否适合使用 422 Unprocessable Entity 进行响应。或者服务器应该只响应 400。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:07:48.693

422 可能不适合一般情况，因为它是[WebDAV 特定](https://www.rfc-editor.org/rfc/rfc4918)的代码。

如果问题是用户可以解决的问题，那`409 conflict`将是合适的。否则，我认为 400 是最好的可用响应。

**问题已从 修改`resource does not exist`为`resource cannot be deleted`。我在下面留下了我原来的答案。**

我建议`404: Not found`这里是适当的回应。

或者，`410: Gone`如果您能够确定该产品**确实**存在，但此后已被删除，则适用。

# c# - 添加列表框的所有项目以访问数据库

> ID：14893276
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:03:11.480
> 
> 标签：c#, winforms, listbox

如何将列表框中的所有项目添加到数据库。

当我选择所有项目并使用以下代码时，它将第一个项目添加到数据库中。

![在此处输入图像描述](../Images/67081874acd5bf1d7b78634977c40160.png)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.OleDb;

namespace Purchase_Management
{
    public partial class Form1 : Form
    {

        string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            comboBox1.SelectedText = "Mr";
            comboBox1.Items.Add("Mr");
            comboBox1.Items.Add("Mrs");
            comboBox1.Items.Add("Miss");
            DataSet ds = GetAllItems();
            comboBox2.DataSource = ds.Tables[0];
            comboBox2.DisplayMember = "Product Name";

        }

        public DataSet GetAllItems()
        {
            DataSet dataSet = new DataSet();
            // Create connection object
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "SELECT [Product Name] FROM [Product]";
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Product");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables.Count <= 0)
                return null;
            else
                return dataSet;
        }

        public string InsertUser(string custName, string title, string cust, string phoneNumber, string address1, string address2, string city, string postCode, string country, string itemPurchased)
        {

            // Create connection object
            int ix = 0;
            string rTurn = "";
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "INSERT INTO [Customer]([Customer's Ebayname], [Title],  [Customer's Name], [Phone Number], [Address 1], [Address 2], [City], [Post Code], [Country] , [Item Purchased])" +
                         "VALUES ( @custName, @title, @cust, @phoneNumber, @address1, @address2, @city, @postCode, @country , @itemPurchased)";
                OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

                oleComm.Parameters.Add("@custName", OleDbType.Char).Value = custName;
                oleComm.Parameters.Add("@title", OleDbType.Char).Value = title;
                oleComm.Parameters.Add("@cust", OleDbType.Char).Value = cust;
                oleComm.Parameters.Add("@phoneNumber", OleDbType.Char).Value = phoneNumber;
                oleComm.Parameters.Add("@address1", OleDbType.Char).Value = address1;
                oleComm.Parameters.Add("@address2", OleDbType.Char).Value = address2;
                oleComm.Parameters.Add("@city", OleDbType.Char).Value = city;
                oleComm.Parameters.Add("@postCode", OleDbType.Char).Value = postCode;
                oleComm.Parameters.Add("@country", OleDbType.Char).Value = country;
                oleComm.Parameters.Add("@itemPurchased", OleDbType.Char).Value = itemPurchased;

                ix = oleComm.ExecuteNonQuery();
                if (ix > 0)
                    rTurn = "User Added";
                else
                    rTurn = "Insert Failed";
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
                rTurn = ex.ToString();
            }
            finally
            {
                oleConn.Close();
            }
            return rTurn;
        }

        private void button1_Click(object sender, EventArgs e)
        {

            //InsertUser(textBox1.Text, comboBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text, textBox5.Text, textBox6.Text, textBox7.Text, textBox8.Text, listBox1.SelectedItem.ToString());
            SaveAllListItems();
            if (MessageBox.Show("Customer Details Saved Successfuly") == DialogResult.OK)
            {
                Form1.ActiveForm.Close();

            }
        }

        private void SaveAllListItems()
        {
            foreach (var listBoxItem in listBox1.Items)
            {
                InsertUser(textBox1.Text, comboBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text,
                    textBox5.Text, textBox6.Text, textBox7.Text, textBox8.Text, listBoxItem.ToString());
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            listBox1.Items.Add(comboBox2.Text);
        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (this.listBox1.SelectedIndex >= 0)
                this.listBox1.Items.RemoveAt(this.listBox1.SelectedIndex);
        }

    }
} 
```

如何将所有项目添加到数据库？

还有什么方法可以以编程方式选择所有项目>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:08:45.847

尝试这样的事情：

```
 private void SaveAllListItems()
        {
            foreach (var listBoxItem in listBox1.Items)
            {
                InsertUser(textBox1.Text, comboBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text, 
                    textBox5.Text, textBox6.Text, textBox7.Text, textBox8.Text, listBoxItem.ToString());
            }
        } 
```

要选择所有项目，请使用：

```
 listBox1.SelectionMode = SelectionMode.MultiSimple;

   for (int i = 0; i < listBox1.Items.Count;i++)
   {
       listBox1.SetSelected(i, true);
   } 
```

**更新：**

尝试这个

```
 private void SaveAllListItems()
        {
            string listItems = string.Empty;
            foreach (var listBoxItem in listBox1.Items)
            {

                listItems += listBoxItem.ToString();

                if (listBox1.Items.IndexOf(listBoxItem) < listBox1.Items.Count - 1)
                {
                    listItems += ", ";
                }
            }

            InsertUser(textBox1.Text, comboBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text, textBox5.Text,
                       textBox6.Text, textBox7.Text, textBox8.Text, listItems);
        } 
```

# magento - 可配置产品 - 根据第一个下拉选择更改下拉列表

> ID：14893277
> 
> 赞同：0
> 
> 时间：2013-02-15T11:03:12.917
> 
> 标签：magento, magento-1.7

我需要设置一个与可配置产品非常相似的产品，但其中的选项可以根据已选择的属性而改变。例如，如果我有以下属性`Size`并且`Colour`. 可以说我有`small`, `medium`,`large`作为`size`属性。在我的产品上，红色仅提供`medium`尺寸，但绿色和蓝色提供所有尺寸。我需要`colour`下拉框根据`size`下拉菜单的选择进行更改。

这可能吗？

注意：我知道这严格来说不是一个编程问题，但我已经看到了很多关于 SO 上的 magento 的其他“设置”问题尚未关闭，因此假设这是适当的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:02:03.100

您可以使用 Configurable prodcuts 为您执行此操作。可配置产品仅允许用户选择您在商店中设置的变体。

例如：

如果您有一个具有尺寸和颜色属性的可配置产品，并添加如下变体：

尺码：S、M、L 颜色：红、蓝

然后，您只需添加（并启用/库存）变体（简单的子产品），其中红色仅适用于 S、M，蓝色适用于尺寸 L。

当用户尝试购买产品时，他们将被要求选择尺寸，如果他们随后选择尺寸：S，那么颜色下拉菜单将动态更改为仅允许用户选择红色作为选项。

# java - 双击 jar (netbeans built) 并没有任何反应。从提示中编写 java -jar 获取空指针 exc

> ID：14893278
> 
> 赞同：0
> 
> 时间：2013-02-15T11:03:21.523
> 
> 标签：java, netbeans, ide, nullpointerexception

我对java很陌生，所以如果我没有注意到我犯的一些错误，我很抱歉。正如标题所说，当我构建一个在 Netbeans 7.2.1 上完美运行的项目，然后双击 jar 文件时，什么也没有发生。在网上查看我读到的内容，为了更好地发现错误，建议转到命令提示符并写入：

```
java -jar C:\Users\conserva\Documents\NetBeansProjects\EasyText\dist\EasyText.jar 
```

它给了我这个：

```
C:\>java -jar C:\Users\conserva\Documents\NetBeansProjects\EasyText\dist\EasyText.jar
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at easytext.MainWindow.<init>(MainWindow.java:25)
        at easytext.MainWindow$4.run(MainWindow.java:220)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$200(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

这是第 25 行的代码部分：

```
 public MainWindow() {
        initComponents();
        selectfolder.removeAllItems();
        String tempordir = ("src/easytext/textfiles/");
        String[] arr = new java.io.File(tempordir).list();
/*line 25 */         int len = arr.length;
        //System.out.println("arr.lenght è: "+arr.length);
        for (int i = 0; i<len; ++i){            
                selectfolder.addItem(arr[i]);}
          selecttext.removeAllItems();
        tempordir = ("src/easytext/textfiles/"+selectfolder.getSelectedItem().toString());
        arr = new java.io.File(tempordir).list();
        for (int i = 0; i<len; ++i){            
                selecttext.addItem(arr[i]);}
    GetText("src/easytext/textfiles/"+selectfolder.getSelectedItem().toString()+"/"+selecttext.getSelectedItem().toString());    
    } 
```

所以看起来 nullpointerecxeption 被抛出，因为我指的是 len 数组的长度。

我该如何解决这个问题？在此先感谢，如果我犯了一些愚蠢的错误或看不清楚，再次抱歉。我真的花了一些时间没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:05:32.257

从以下文档[`File.list()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#list%28%29)：

> 一个字符串数组，命名此抽象路径名表示的目录中的文件和目录。如果目录为空，则数组将为空。**如果此抽象路径名不表示目录，或者发生 I/O 错误，则返回 null。**

因此，听起来`src/easytext/textfiles/`您执行代码的位置可能不存在该目录。

# javascript - 在节点上使用 percolator js 跨域 XHR

> ID：14893283
> 
> 赞同：0
> 
> 时间：2013-02-15T11:03:41.973
> 
> 标签：javascript, jquery, node.js, xmlhttprequest, cross-domain

我已经使用 percolator js CRUDCollection 实现了一个小 API。它由 localhost:3000 上的节点提供服务。现在我希望能够将该 API 与在 localhost:8000 上运行的 django 应用程序一起使用，但它失败并出现错误`Origin http://localhost:8000 is not allowed by Access-Control-Allow-Origin.`

我尝试在 percolator 函数中设置标题，但它被忽略了：

```
list: function($, cb) {
    $.authenticate = checkAuth;
    $.res.setHeader('Access-Control-Allow-Origin', '*');
etc... 
```

我研究了 JSONP 作为替代方案，但无法弄清楚将响应包装在回调函数中的钩子。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:30:40.377

这是我第一次听说 Percolator.js。那是一个有趣的图书馆。

无论如何，设置`$.res.setHeader('Access-Control-Allow-Origin', '*');`确实对我有用。您是否检查过此标头是否实际存在于响应中？

现在关于 JSONP。您可以使用`collectionGET`而不是`list`这样：

```
collectionGET:function($) {
    var data = ...; // some code here

    var data_str = $.json(data).toString( ),
        url = require("url").parse($.req.url, true),
        jsonp = url.query.callback && url.query.callback.length && url.query.callback;

    if (jsonp) {
        $.res.setHeader( "content-type", "application/javascript" );
        $.res.write( jsonp + "(" );
    } else {
        $.res.setHeader( "content-type", "application/json" );
    }
    $.res.write( data_str );
    if (jsonp) {
        $.res.write( ");" );
    }
    $.res.end();
} 
```

虽然它有点低级别（并且似乎 Percolator.js 为响应添加了一些额外的东西）。也许你需要 Percolator.js 来完成你的任务。

# java - What API to choose for data serialization to xml?

> ID：14893286
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:03:46.287
> 
> 标签：java

I need to save user data between sessions. So I decided to using binary serialization and start saving data in xml. After some research I found several APIs, namely JAXB and xStream.

I looked through samples of xStream and I like it. It is very simple. In two words: you give an object and receive .xml representation of this object. Read an xml and receive object back.

Then I read about JAXB - it is very strong, functional. But all examples I found are about creating of xml schema, generating java classes basing on this schema and so on. At the moment it looks a little bit time consuming for me to describe my classes in .xsd. I hope it is one of many sides of JAXB usage. But what I saw, feared me a little.

Are there any other APIs that suit my task. Or what are pros and cons of JAXB and xStream then?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:24:17.067

I would start with `JAXB` as it is built-in and easy to use. You do not need to start with an `XSD`. Just add some annotations to your classes.

```
@XmlRootElement(name="doc")
public class Document {
   @XmlElement
   protected Foo foo;
   // ...
} 
```

Serialization:

```
Document doc = new Document();

JAXBContext jc = JAXBContext.newInstance(Document.class);
Marshaller m = jc.createMarshaller();
m.marshal(doc, System.out); 
```

Deserialization:

```
JAXBContext jc = JAXBContext.newInstance(Document.class);
Unmarshaller u = jc.createUnmarshaller();
Document doc = u.unmarshal(System.in); 
```

Replace `System.out` and `System.in` by your actual streams and you are ready to go.

There is a short tutorial regarding JAXB Annotations in the JAXB tutorial:

*   [http://jaxb.java.net/tutorial/section_6_2_1-A-Survey-Of-JAXB-Annotations.html](http://jaxb.java.net/tutorial/section_6_2_1-A-Survey-Of-JAXB-Annotations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:06:51.417

When JAXB is a bit too much of a powerhouse, and a simpler solution could be better, I generally try [Castor](http://castor.codehaus.org/xml-framework.html).

The good part is, you can use the simple introspection mode, quick and easy, and if you ever feel like you need more control over your generated XML, add a descriptor or mapping, but both are optional.

# github - 为 Github Stars 创建 RSS 提要

> ID：14893287
> 
> 赞同：7
> 
> 时间：2013-02-15T11:03:56.920
> 
> 标签：github, rss

有没有办法为一个人的 github 明星列表获取 RSS 提要？

我想通过 IFTTT 将它放入 Pinboard。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-05-25T18:22:00.060

此处的当前答案将星号作为 JSON 而不是 RSS。以下是我通过 IFTTT RSS 服务获得 GitHub 星星的方法：

1.  使用“新的 Feed 项匹配”触发器
2.  输入您的 GitHub 用户 RSS 提要：

    ```
    https://github.com/csu.atom 
    ```

3.  将 IFTTT 用于匹配项目的“关键字或简单短语”设置为：

    ```
    [your username] starred 
    ```

    例如，我的过滤器设置为`csu starred`（单独使用“已加星标”一词可能会起作用，但随后触发器也可能会触发一些误报，例如存储库名称或其他内容是否包含“已加星标”一词）。

4.  每当触发此触发器时，添加您想要发生的任何操作。星号存储库的链接位于`{{EntryUrl}}`变量中，标题位于`{{EntryTitle}}`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-07T17:18:04.813

您的 Github 星星可以在 JSON 中通过如下 URL 获得：[https](https://api.github.com/users/username/starred) ://api.github.com/users/username/starred （当然是您自己的用户名）

~~我找到[了这个雅虎！通过管道](http://pipes.yahoo.com/pipes/pipe.info?_id=17f899d9ec26505fcf925ee920d1e024)将您的星星变成 RSS 提要。~~

Yahoo Pipes 服务已经关闭，IFTTT 显然从他们的 Github 频道中删除了星星触发器。所以我去我自己的[Huginn](https://github.com/cantino/huginn)实例中创建了同样的东西，使用网站代理和邮政代理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T15:45:11.017

IFTTT now has this option. All you have to do [is create a recipe.](https://ifttt.com/myrecipes/personal/new)

Just put the "New Starred Repository" for THIS. And then do the appropriate steps for Pinboard for THAT.

**EDIT**

So apparently it might not work anymore, maybe, however on browsing the recipies I found [this](https://ifttt.com/recipes/71035-save-github-stars-in-pinboard), which probably does work so try it, just remember to edit it for your github username

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-16T14:03:09.450

我已经将 SiftRSS 服务 ( [https://siftrss.com/](https://siftrss.com/) ) 与`https://github.com/username.atom`OP 提到的活动源结合在一起。在 SiftRSS 上，我使用属性`/\bstarred\s\w+\/\w+/`上的正则表达式过滤活动提要。`title`工作完美，但依赖于第三方服务，如果需要自托管，我还建议使用[Huginn](https://github.com/cantino/huginn)，正如 @larcher 已经提到的那样。

# javascript - 调整大小后在画布上绘图

> ID：14893292
> 
> 赞同：0
> 
> 时间：2013-02-15T11:04:01.683
> 
> 标签：javascript, jquery, canvas

我有一个画布元素：

```
<canvas id="canvas" width="100" height="100"></canvas> 
```

还有一些 JavaScript 使画布全屏：

```
var canvas, ctx, w, h;
    function start() {
        canvas = $("#canvas")[0];
        ctx = canvas.getContext("2d");
        w = $('body').innerWidth();
        $("#canvas").width(w);
        $("#canvas").height(w);
        w = $("#canvas").width();
        h = $("#canvas").height();
        if(typeof game_loop != "undefined") clearInterval(game_loop);
        game_loop = setInterval(paint, 60);
    }

    function paint() {
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, w, h);
        ctx.strokeStyle = "blue";
        ctx.strokeRect(0, 0, 50, 50);   
    } 
```

我不知道为什么我没有得到一个大正方形`50x50`。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:18:42.823

要实际调整画布大小（如*拥有更多像素*），您需要设置宽度/高度属性。jQuerys`width()/height()`设置 css 值。导致由与以前相同数量的像素组成的*拉伸画布元素。*而是使用：

```
$('#canvas').prop({
  width: 400, // the 400 is just arbitrary
  height: 400
}); 
```

或者，根据 Alnitaks 的评论，您当然也可以直接分配值：

```
canvas.width = 400;
canvas.height = 400; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:19:30.440

这是一个使用宽度/高度在调整大小时绘制正方形的简单示例。

示例：http: [//jsfiddle.net/Ubv7X/](http://jsfiddle.net/Ubv7X/)

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var paint = function() {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;

    // Draw background
    ctx.fillStyle = 'rgb(255, 255, 255)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Draw rect
    var rect_size=50;
    ctx.fillStyle = 'rgb(0, 0, 255)';
    ctx.fillRect(canvas.width/2-(rect_size/2), canvas.height/2-(rect_size/2), 
                 rect_size, rect_size);
}

setInterval(paint, 60); 
```

# c - 编写一个函数来打印存储在数组中的字符串

> ID：14893298
> 
> 赞同：0
> 
> 时间：2013-02-15T11:04:15.120
> 
> 标签：c, arrays, function

我正在编写一个将用户输入字符串存储在数组中的程序。然后我将数组传递给一个函数来打印第二个元素。但是，我意识到每当执行函数内部的打印时程序就会崩溃。

我的示例代码如下：

```
main()
{
int num, count;
char strStorage[10][10];

printf("\nEnter how many strings: ");
scanf( "%d" , &num);
fflush(stdin);

for ( count = 0 ; count < num ; count++)
{
    printf("Enter a string: ");
    gets(strStorage[count]);
    fflush(stdin);
}

//This works
printf("%s", strStorage[2]);

printMyArray(strStorage);
}

void printMyArray(char *myArray[ ])
{
    //This doesnt work
    printf("%s", myArray[2]);

} 
```

我这样做是为了了解数组如何传递给函数。如果有人可以帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:07:43.247

问题是您应该真正将双精度数组作为双精度数组传递，而不是作为指针数组传递。

```
 void printMyArray(char *myArray[ ]) 
```

变成

```
 void printMyArray(char myArray[][10]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:08:20.220

您的代码有几个问题：

A）您为 10 个字符串留出了空间，但用户可以选择输入 10 个以上的字符串，而您没有做任何事情来阻止它们。

B) 用户可以输入超过 9 个字符（您设置的最大值）的字符串。

C）正如其他答案所说`char* []`的不一样`char [][10]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:08:41.097

`char *myArray[ ]`声明一个指针数组。因此，每个元素都是一个双指针。

要访问您需要的元素

```
printf("%s", *myArray[2]); 
```

这里，`*myArray[2]`等价于`*(*(myArray + 2))`where`*(myArray + 2)`指向指针数组中的第二个指针，加上另一个`*`访问该指针所指向的值。

# cuda - Fermi 和 Kepler GPU 特殊功能单元

> ID：14893300
> 
> 赞同：1
> 
> 时间：2013-02-15T11:04:22.063
> 
> 标签：cuda, gpgpu

Fermi GPU 具有特殊功能单元 (SFU)，以（引用关于 Fermi 的 NVIDIA 白皮书）“执行超越指令，例如正弦、余弦、倒数和平方根。每个 SFU 每个线程、每个时钟执行一条指令”。

我的问题是：

*SFU 是在单精度和双精度数字上运行还是仅在单精度上运行？*

*SFU 是否会在计算中引入任何准确性损失？*

*SFU 是否与使用 、 等内在函数`__sin()`有关`__cos()`？*

*Kepler SFU 的功能与 Fermi SFU 的功能相同吗？*

非常感谢您提前提供任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:55:43.207

这当然不能回答你所有的问题，但根据这个：[Special CUDA Double Precision trig functions for SFU](https://stackoverflow.com/questions/11554122/special-cuda-double-precision-trig-functions-for-sfu)，SFU 只在单精度上运行。这是有道理的，因为 GPU 是为单精度数字处理而设计的，而双精度是用多个寄存器模拟的，如果你的 SFU 是单精度的，就不可能模拟像 sqrt 这样的东西。我相信它们与内在函数有关。

# c# - 地理定位器导致 PositionChanged 事件中止

> ID：14893301
> 
> 赞同：1
> 
> 时间：2013-02-15T11:04:28.587
> 
> 标签：c#, geolocation, windows-phone

我的地理定位器有问题，当我将 MovementThreshold 设置为 1 时，一切正常，但如果我将其设置为 0，那么在侦听位置事件更改时会出现 Abort 错误

```
Geolocator Locator = new Geolocator();
Locator.DesiredAccuracy = PositionAccuracy.High;
Locator.MovementThreshold = 0;
Locator.PositionChanged += Locator_PositionChanged; // Error occours here but does not occour if Threshold >= 1 
```

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:22:12.327

将 MovementTreshold 设置为 0 与不设置它相同，如果未设置，则无法使用位置/状态更改事件。在这种情况下，您总是会遇到异常。

# c# - 如何：从具有可变内容的 c# 程序内部创建可执行文件？

> ID：14893306
> 
> 赞同：0
> 
> 时间：2013-02-15T11:04:41.677
> 
> 标签：c#, executable, on-the-fly

这是问题的示例：我对 SQL DB 进行了添加，并且现在希望我的程序在得到肯定响应时-创建一个可执行文件，该可执行文件根据其 GUID 删除条目。是否可以从具有可变内容的 C# 代码内部创建可执行文件？我看到解决此问题的一种方法 - “CSharpCodeProvider”加上创建一个 .cs 文件并编译它，但不太确定。这是一个正确的变体还是有任何其他变体？

UPD：更广泛的描述。主代码经过多次身份验证后，允许用户向数据库添加内容，为该信息添加 GUID 和用于访问的安全令牌。生成的 EXE 使用安全令牌进行身份验证，并根据生成的早期 GUID 从数据库数据中删除。

# mysql - magento上的mysql连接太多？

> ID：14893310
> 
> 赞同：0
> 
> 时间：2013-02-15T11:05:00.070
> 
> 标签：mysql, apache, magento, cpanel, whm

我有以下服务器`hostgator.com`

```
Intel Xeon E3-1265L 2.5GHz
100 mbps Uplink
4 GB DDR3 Memory
500 GB RAID-1 Drives
10 TB Bandwidth
Up to 5 Dedicated IPs 
```

在过去的 2 个月中，我们多次收到过多连接错误。我们每天的访问量不到 1000 次，所以我认为这对服务器来说不算太多。

上周，它再次发生，我们与支持团队所做的是清除 magento 日志表。我还将 magento 日志保留时间从 180 天减少到仅 5 天。

今天它又发生了，`whm, cpanel or the domain`它本身完全无法访问。

我想知道这是否是由于搜索引擎抓取了我们的网站？上周我在谷歌网站管理员工具中降低了抓取速度。

今天在遇到mysql连接问题的同时，我们还多次在spamd服务和chkservd上挂起。

问题是：

```
If I increase max connections to 400, is that too much for my server?

Do you think I need more server processor or ram?
Or do you think it might be a denial of service attack? 
```

请帮忙。

提前致谢。

**更新**

```
top - 05:41:25 up 12 days, 17:57, 1 user, load average: 33.40, 38.14, 54.62 
Tasks: 267 total, 12 running, 247 sleeping, 4 stopped, 4 zombie 
Cpu(s): 11.1%us, 0.9%sy, 0.1%ni, 83.7%id, 3.9%wa, 0.1%hi, 0.1%si, 0.0%st 
Mem: 2917444k total, 2281856k used, 635588k free, 56324k buffers 
Swap: 4194296k total, 290924k used, 3903372k free, 343860k cached 

PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 
26327 theprint 16 0 57088 42m 6640 R 94.0 1.5 0:58.97 php 
26316 theprint 16 0 58592 44m 6640 R 86.2 1.6 1:04.44 php 
26308 theprint 16 0 58592 44m 6644 R 74.4 1.5 1:05.23 php 
26383 theprint 16 0 59500 45m 6640 R 74.4 1.6 0:56.33 php 
26278 theprint 16 0 58596 44m 6640 R 72.5 1.5 1:05.95 php 
1253 theprint 16 0 54224 39m 6640 R 66.6 1.4 0:07.85 php 
26280 theprint 16 0 58336 44m 6640 R 64.6 1.5 1:00.90 php 
26653 theprint 16 0 59784 45m 6640 R 52.9 1.6 0:44.99 php 
26421 theprint 15 0 56280 41m 6640 S 29.4 1.5 0:36.84 php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:38:24.510

> 如果我将最大连接数增加到 400，这对我的服务器来说太多了吗？

我们不知道：您没有提供有关您的服务器如何执行或它的容量可能是多少的详细信息。即使你有，你也不太可能[得到一个明智的答案](https://serverfault.com/questions/384686/can-you-help-me-with-my-capacity-planning/384690#384690)。

> 我想知道这是否是由于搜索引擎抓取了我们的网站？

也许，你为什么不调查一下。即使为配置您的服务器提供的玩具不起作用，数据也应该可以从您的日志中获得。

去阅读一些关于 MySQL 性能调优的好书（[这](https://rads.stackoverflow.com/amzn/click/com/1449314287)是一个好的开始）和调优你的堆栈的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-28T11:15:05.083

您将需要研究您的服务器负载处理能力以及它一次可以处理多少并发连接。

如果有太多的 MySQL 连接和请求同时到来，就会出现这种情况。因为服务器无法一次处理这样的批量请求。因此，在这种情况下，您可以将服务器正在处理的并发进程数增加到最大值，也可以增加服务器容量。

但在继续之前，请确保并发请求是否真的是真实的。您将需要监视正在运行的连续 MySQL 进程。你可以通过'mysql -pr'来检查它。一旦你得到消耗最大资源的用户，然后继续检查它为什么占用资源。如果您发现没有合法进程，则可以暂停此类用户以避免产生问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T05:17:44.973

**如果您的网站有大多数静态页面？**

更好地使用**缓存**

你有很多选项来降低你的 CPU 使用率

*   mysql 或 mysqli 缓存
*   在 PHP 中运行？您可以制作一个简单的缓存脚本，可以对其进行修改以缓存部分页面或整页。使用像 Zend 这样的 Opcache 性能优于..
*   如果你有更多的内存？并且该网站以完整的 SQL 运行？使用 Memcached。

我注意到您正在使用cpanel？您需要调整您的服务取消不需要的监控服务并将 cron 添加到清除旧日志..

如果您从 Bot 获得点击数或从垃圾邮件域获得引用？在 htaccess 中阻止引荐来源 .. 或将 nginxcp 用于 cpanel

这些是我的经验指导。希望这将有助于降低您的 CPU 使用率。

# javascript - 为什么这在 AngularJS 中不起作用

> ID：14893313
> 
> 赞同：0
> 
> 时间：2013-02-15T11:05:15.580
> 
> 标签：javascript, angularjs

我的 HTML 是这样的

```
<div ng-controller = "AppControl">
   <input type="text" id="nameText" ng-model="yourName" value="{{name}}">
   <h1>You are typing : {{yourName}}</h1>
</div> 
```

JavaScript 就在这里

```
var Application = {};
var App = angular.module('Application', []);
function AppControl($scope){
  $scope.name = "Name";
} 
```

我的预期结果是：“名称”应该出现在文本框中，因为它是通过分配的`$scope`。由于文本框是`model`，所以`<h1>`标签应该用初始值更新，并且每当我更新它时都应该改变。但是当我更新它时，它正在更新值，但初始值没有出现在文本框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:11:44.590

删除`value="{{name}}"`并分配给您的模型（例如`$scope.yourName= "Name";`）。Angular 将处理剩下的事情。

```
<div ng-controller="AppControl">
   <input type="text" id="nameText" ng-model="yourName">
   <h1>You are typing : {{yourName}}</h1>
</div>

var Application = {};
var App = angular.module('Application', []);
function AppControl($scope){
  $scope.yourName = "Name";
} 
```

演示：http: [//jsbin.com/efadal/1/](http://jsbin.com/efadal/1/)

# php - 电子邮件未在重定向到页面时触发

> ID：14893314
> 
> 赞同：0
> 
> 时间：2013-02-15T11:05:16.003
> 
> 标签：php, wordpress, forms

我有一个在提交时触发电子邮件的表单，但我想在提交时将其重定向到不同的页面。

目前，电子邮件仅包含以下内容（即重新加载同一页面）：

```
<form id="customisesystem" name="enquiry" onsubmit="return formCheck(this);" method="POST" action="<?php echo the_permalink(); ?>"> 
```

我想将其更改为以下内容：

```
<form id="customisesystem" name="enquiry" onsubmit="return formCheck(this);" method="POST" action="<?php bloginfo('url'); ?>/thank-you"> 
```

但是，这不会触发电子邮件。

谁能看到出了什么问题？

这是发送电子邮件的脚本。

```
<? if(isset($_POST['submit'])) { 

$to = "rob@domain.com";
$header = 'From: admin@domain.com';
$subject = "Quotation";
$enquiry_first_name = $_POST['enquiryfirstname'];
$enquiry_last_name = $_POST['enquirylastname'];
$enquiry_title = $_POST['enquirytitle'];
$enquiry_organisation = $_POST['enquiryorganisation'];
$enquiry_address = $_POST['enquiryaddress'];
$enquiry_country = $_POST['enquirycountry'];
$enquiry_email_address = $_POST['enquiryemailaddress'];
$enquiry_telephone = $_POST['enquirytelephone'];
$enquiry_additional_comments = $_POST['enquiryadditionalcomments'];
$enquiry_product = get_the_title();
if(!empty($_POST['hardware'])) {
    foreach($_POST['hardware'] as $check) {
        $hardwareresults .= $check."\n";
    }
}
if(!empty($_POST['systems'])) {
    foreach($_POST['systems'] as $check) {
        $systemsresults .= $check."\n";
    }
}
$productresults = "";
$quantities = array_combine($_POST['product'], $_POST['quantity']);
foreach ($quantities as $product => $quantity) {
    if ($quantity > 0) {
        $productresults .= "$quantity x $product \n";
    }
}

$body = "You have a quote request from the website:

Name: $enquiry_title $enquiry_first_name $enquiry_last_name
Type of organisation: $enquiry_organisation 
Address: $enquiry_address, $enquiry_country
E-Mail: $enquiry_email_address 
Tel: $enquiry_telephone
Comments: $enquiry_additional_comments

Send more information on:
$systemsresults

Quotation:
$enquiry_product

Hardware:
$hardwareresults

Accessories:
$productresults 

Kind regards";

mail($to, $subject, $body, $header);

echo "Thank you for your enquiry.";

} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:27:12.557

继续使用`<?php echo the_permalink(); ?>`发送电子邮件的

并在您使用 echo 的电子邮件代码之后将其`"Thank you for your enquiry.";`替换为

```
header('location: ' . bloginfo('url') . '/thank-you'); 
```

**编辑**

要在感谢页面中获取发布的数据，您应该从邮件页面传递该数据。

在这种情况下，有两种方法可以在其他页面上发送数据

1.  使用获取方法。`/谢谢/?name=ABC&age=xyz
2.  将值存储在会话中并在会话页面上访问它们

**编辑**

尝试这样的事情

```
header('location: http://www.yourblog.com/thank-you/?title=' . $enquiry_title); 
```

在感谢页面中，将其放入变量中，然后在要显示的位置回显该变量。

```
<?php
$title = $_GET['title'];
...
?> Thank you message and your HTML structure
 Your message titled: <b> <?php echo $title; ?> </b> is received. we will contact you shortly
.... blah blah 
```

我希望这有点道理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:24:32.033

这很正常，因为您没有向您的电子邮件脚本发送任何信息。要在发送电子邮件后将您的客户重定向到另一个页面，您必须向用户代理发送适当的 HTTP 标头。您可以通过将此代码添加到**电子邮件脚本的最后一行**来实现这一点（不要更改提交表单中的操作）：

```
header ( "Location: " . bloginfo('url') . "/thank-you" ); 
```

这将在邮件发送过程结束后将用户重定向到另一个页面。

**编辑**

正如“Aamir Mahmood”已经提到的，您可以像这样在 URL 查询字符串中传递标题：

```
header ( "Location: http://some.site.com/foo/bar/thank-you/?title=$enquery_title"); 
```

在感谢页面中这样做：

```
$title = $_GET["title"];
# use $title as you need 
```

我希望这有帮助

# ios - 拖动后取消 UIScrollView 弹跳

> ID：14893315
> 
> 赞同：6
> 
> 时间：2013-02-15T11:05:17.227
> 
> 标签：ios, uiscrollview, core-animation, bounce

我有一个水平的 UIScrollView。我想做一个“pull-to-reset”动画的变体，我一直拉到滚动视图内容大小的右边缘，松开手指，让滚动视图飞回 (0, 0 ) 内容偏移量。

我的委托方法如下所示：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    //check if it exceeds a certain critical value
    if (scrollView.contentOffset.x - (scrollView.contentSize.width - IMAGE_WIDTH) > 80) {
        [self doAnimatedScrollTo:CGPointMake(0, 0)];
    }
} 
```

哪里`doAnimatedScrollTo:`需要自定义动画方法，因为我想控制动画的持续时间。

虽然这可行，但动画似乎已排队。UIScrollView“反弹”动画首先发生，然后我的动画发生。

有没有办法取消反弹动画，保持内容偏移从“捕捉”回来，然后执行我的动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T10:13:21.513

try this

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
  //check if it exceeds a certain critical value
  if (scrollView.contentOffset.x - (scrollView.contentSize.width - IMAGE_WIDTH) > 80) {
    [scrollView setContentOffset:CGPointMake(0, 0) animated:YES];
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T19:06:29.393

我完成了取消 UIScrollView 的反弹动画。

我想在弹跳时快速滚动到顶部时保留默认行为。但是，如果滚动视图已经在顶部，然后用户将其拉下并释放（类似于拉到刷新），我想控制反弹并做一些自定义的事情。

在滚动视图委托中，我跟踪初始位置：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y < 0.1)
    {
        isPullingTop = YES;
    }
} 
```

在滚动视图委托中检测是否设置了标志并且滚动视图被拖动得足够多

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (isPullingTop && scrollView.contentOffset.y < -30) {

        overrideBounce = YES;
    }
    isPullingTop = NO;
} 
```

我继承滚动视图并覆盖 setContentOffset：

```
-(void)setContentOffset:(CGPoint)contentOffset
{
    if (!overrideBounce)
    {
        [super setContentOffset:contentOffset];
    }
    else
    {
        //customs stuff goes here , for example an animation
        overrideBounce = NO;
    }
} 
```

# java - 如何从 LCDUI 表单启动 LWUIT 表单？

> ID：14893318
> 
> 赞同：1
> 
> 时间：2013-02-15T11:05:30.503
> 
> 标签：java, java-me, lwuit, lcdui, lwuit-form

在之前的一些问题中已经间接谈到了这个问题，但我还没有看到任何决定性的内容。

我目前正在使用这段代码在`CommandAction`实现中显示 LWUIT 表单。

```
public void commandAction(Command cmnd, Item item) {

if (item == LogIn && cmnd == maincommand) {
RechForm = new com.sun.lwuit.Form("Basefook");
            HttpRequestHandler handler = new HttpRequestHandler();
            HTMLComponent htmlc = new HTMLComponent(handler);
            htmlc.setPage("http://facebook.com");
            RechForm.addComponent(BorderLayout.CENTER, htmlc);
            com.sun.lwuit.Display.init(this);
            RechForm.show();

}

} 
```

目前它不会弹出表单，也不会崩溃。

好吧，如果那不可能，那么您能否建议一种基于 lcdui 的 MIDP 浏览器控件的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:53:15.397

解决了。​​它现在可以工作了。只需放入`com.sun.lwuit.Display.init(this);`并`startApp()` 更改

```
RechForm.addComponent(BorderLayout.CENTER, htmlc); 
```

到

```
RechForm.addComponent(htmlc); 
```

# regex - 删除字符串中“http://...”之前的所有内容

> ID：14893324
> 
> 赞同：3
> 
> 时间：2013-02-15T11:05:47.673
> 
> 标签：regex

我有一个像这样的行的txt：

```
155The Last Goodnight - Stay Beautiful by CapitolMusic  http://www.youtube.com/watch?v=H5c2iTcSlbE
156Sara Evans - A Real Fine Place To Start by saraevansVEVO http://www.youtube.com/watch?v=IrdCBkXB91I
157Simple Minds - See The Lights by SimpleMindsVEVO http://www.youtube.com/watch?v=MmKTMAak710 
```

我想删除“http://...”之前的所有内容以达到此结果：

```
http://www.youtube.com/watch?v=H5c2iTcSlbE
http://www.youtube.com/watch?v=IrdCBkXB91I
http://www.youtube.com/watch?v=MmKTMAak710 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T11:07:38.283

```
.*(?=http://) 
```

匹配最后`http://`一行之前的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T15:51:20.997

**在 Java 中**：

```
justHttp = justHttp.replaceFirst(".*(?=http://)", ""); 
```

对于任何其他用途，只需替换`http://`为`yourString`.

# gwt - 如何更改 gwt-servlet.jar 中的一个类

> ID：14893325
> 
> 赞同：0
> 
> 时间：2013-02-15T11:05:49.367
> 
> 标签：gwt, jar

我只想更改 gwt-servlet.jar 中的一个类文件。我已经更改了源代码，编译并制作了一个 jar。但是当我使用它时，Eclipse 声称类型层次结构不一致。我该怎么办？

更新：谢谢你们试图帮助，但我不必再改变班级了，问题是不同的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:16:21.713

如果您的*`imports are out of sync`*可能是由`re-build`使用外部构建器（如`Ant`.

**使固定：**

要解决此问题，请在 Eclipse 的 Package Explorer 中的项目上点击“刷新”(F5)。

*有关更多信息，请查看此* [链接](http://java.syntaxerrors.info/index.php?title=Inconsistent_hierarchy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:25:01.427

如果您在 GWT 类的修补版本中添加了对不存在的接口或类的引用，则可能会收到此错误。

# html - wp-accordion 滑块 css 错误地使字体在 IE9 中显得更粗

> ID：14893331
> 
> 赞同：0
> 
> 时间：2013-02-15T11:06:07.763
> 
> 标签：html, css, wordpress, internet-explorer

我在我的一个客户网站中使用 wp-accordion 滑块。下面的 css 是幻灯片标题，但是当我在 IE 中查看滑块时，它会使字体看起来更粗。

```
.css-vertical-text {
    color:#333;
    border:0px solid red;
    writing-mode:tb-rl;
    -webkit-transform:rotate(-90deg);
    -moz-transform:rotate(-90deg);
    -o-transform: rotate(-90deg);
    white-space:nowrap;
    display:block;
    bottom:30PX;
    width:220px;
    height:205px;
    font-size:18px;
    margin-left:10px\9;
    font-family: trebuchet ms;
    // text-shadow: 0px 0px 1px #333;
    filter: flipv fliph; 
```

}

请帮忙。我试过使用`font-weight`，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:09:45.713

试试下面的css，它可能对你有帮助

```
 font-weight:normal !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:06:47.080

看起来是因为 IE 的`filter`属性不能正常工作... [jsfiddle](http://jsfiddle.net/mhHHA/2/)

**编辑**

忽略我对 HTML5 的漫谈。我们显然在谈论 CSS3。不过，它看起来并不像 IE 支持它。

**编辑2**

更糟糕的是，我进一步研究了它，结果发现新的 CSS3`filter`属性并不是我们所说的。相反，IE 曾经有一个 IE 专用的 CSS 属性，称为`filter`. 我会尝试看看它是否适用于 IE 9 之前的 IE 浏览器，但它们不适用于 jsfiddle。我会放弃使用不标准的东西来达到你的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:12:57.470

尝试这个：

```
font:normal 18px !important; 
```

# java - blazesds消耗大量内存

> ID：14893337
> 
> 赞同：0
> 
> 时间：2013-02-15T11:06:29.550
> 
> 标签：java, apache-flex, memory-leaks, blazeds, jmap

BlazeDS 4 用于与 Flex4.6 通信。当 flex 客户端在 blazeds 服务器上调用远程调用时，服务器返回一个包含 POJO 的 arrayList。假设每个 POJO 内存大小为 12 个字节，我期望 arrayList 大小为 12*元素数。然而，我发现在某处闪耀，它被复合了多次。假设我将 200000 个 POJO 添加到数组列表中，我预计它的大小约为 2MB。但是，我可以通过分析器看到，JVM 的大小是原始大小的 N 倍，并且同样的 N 倍 mem 也被传输到 flex 浏览器应用程序。下面列出的是演示问题的示例代码，带有 jmap 探查器捕获。如果需要，我也很乐意提供弹性代码。

```
 List list = new ArrayList();
for(i=0;i<200000;i++)
{ SampleClass  sampleClassObj = new SampleClass();
  sampleClassObj.setId(1);
  sampleClassObj.setAge(20);
  list.add(sampleClassObj);
} 
return list; 
```

而SampleClass类定义如下

```
public class SampleClass
{
    long id;
    int age;
    // getters and setters for each variables
} 
```

内存在 jmap.exe 中进行了分析，它位于 jdk 路径中。在收到客户端请求之前，JVM 中的 intitail 内存约为 50MB。jmap 在客户端请求之前的输出。

num #instances #bytes 类名
1 63135 8497488 constMethodKlass
2 65671 7858440 [C
3 91344 5217976 symbolKlass
。
.
total 658429 50097416 //JVM中的初始内存

处理请求后 jmap 的输出。

num #instances #bytes 类名
1 11402 20225512 [B
2 200000 1948809 SampleClass //预期为 ~2MB
3 62734 8451040 constMethodKlass
。
.
total 1175132 93938272 //在 JVM 中消耗了未被垃圾回收的内存。

奇怪的是，当我反复尝试从 Flex 调用相同的方法时，JVM 内存并没有相应增加。这只是 JVM 中第一次出现多倍增长。但是，每次调用时，flex 客户端应用程序内存都会不断增加。

我什至尝试在 YourKit 分析器上运行相同的程序，并尝试多次调用 GC 都是徒劳的。

有人可以让我了解 blazeds 中发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:23:51.923

默认`ArrayList`容量为 10 个对象，在您添加新对象后，如果当前容量结束，您的列表将自身容量增加到当前容量的 50%。也许这是记忆喜欢的原因。尝试阅读此文档[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

# jakarta-ee - 如何进行长期的 HTTP 投递重试？

> ID：14893343
> 
> 赞同：0
> 
> 时间：2013-02-15T11:06:46.720
> 
> 标签：jakarta-ee, ejb

设想：

1.  JMS 队列中的许多消息
2.  MDB 将它们传送到远程 HTTP 服务器
3.  远程服务器可能已关闭
4.  需要不会阻塞整个服务器的重试机制。
5.  重新交付运行几天，每 1 小时一次。

我的想法是让 MDB 在新消息到达 JMS 队列时立即尝试重新传递，但将其限制为每 1 分钟 5 次。然后将消息从 JMS 队列中删除并放入数据库中。然后，另一个（@Scheduled）EJB 将每 1 小时从 DB 获取未发送的消息，并在自己的线程中发送它们。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:15:56.670

是的，有，但这取决于您使用的 JMS 提供程序。不幸的是，目前 JMS API 中不支持延迟消息，这绝对是您问题的最优雅的解决方案。但是，如果您使用以下一些 JMS 提供程序：Oracle AQ、JBoss、OpenJMS、ActiveMQ；他们通过调用内置了对延迟消息的支持：

```
msg.setLongProperty("SOME-PROVIDER-SPECIFIC-PARAMETER, delay); 
```

参考：

*   [发送延迟的 JMS 消息](http://java.dzone.com/articles/sending-delayed-jms-messages)

# internet-explorer - EPiServer Chrome 与 IE

> ID：14893347
> 
> 赞同：1
> 
> 时间：2013-02-15T11:06:58.063
> 
> 标签：internet-explorer, google-chrome, episerver

我知道 EPi 是为 IE 设计的。我有一个奇怪的问题。

我正在调试一个无法正常工作的定制标签功能。

该功能有一个包含可用标签、选定标签和一个添加按钮的列表，用于将标签从第一个列表带到第二个列表。

在 IE 和 FIREFOX 中，css 有点损坏，当您单击“添加”按钮时，系统会询问您是否要离开页面。如果您“离开”它，页面将重新加载并选择标签。

在 Chrome 中它可以完美运行。CSS 没有损坏，当您单击添加时，标签被添加而无需离开页面。

我正在运行 EPi CMS 6 R2

添加按钮的 IE HTML 输出：

```
<input name="ctl00$FullRegion$PC_52_1$EditForm$Tags$ctl01$addButton" title="Add to list" class="epi-cmsButton-text epi-cmsButton-tools epi-cmsButton-Add" id="ctl00_FullRegion_PC_52_1_EditForm_Tags_ctl01_addButton" onmouseover="EPi.ToolButton.MouseDownHandler(this)" onmouseout="EPi.ToolButton.ResetMouseDownHandler(this)" onclick="WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$FullRegion$PC_52_1$EditForm$Tags$ctl01$addButton", "", true, "", "", false, false))" type="submit" value="Add"/> 
```

添加按钮的 CHROME HTML 输出：

```
<input class="epi-cmsButton-text epi-cmsButton-tools epi-cmsButton-Add" type="submit" name="ctl00$FullRegion$PC_52_1$EditForm$Tags$ctl01$addButton" id="ctl00_FullRegion_PC_52_1_EditForm_Tags_ctl01_addButton" value="Add" title="Add to list" onmouseover="EPi.ToolButton.MouseDownHandler(this)" onmouseout="EPi.ToolButton.ResetMouseDownHandler(this)" onclick="WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$FullRegion$PC_52_1$EditForm$Tags$ctl01$addButton&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))">

FIREFOX: 
```

任何有经验的人如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:29:21.710

您可以使用 ScriptDisablePageLeaveEvent 控件禁用此警告。

遵循[这个](http://tedgustaf.com/blog/2011/1/disable-page-leave-check-for-postbacks-inside-custom-property-controls-in-episerver/)有用的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:27:07.660

通常可以通过在 App_Browsers 文件夹中放置或更改 .browser-files 来避免不同的 HTML 呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:19:32.643

这解决了它。将它放在 Episerer:ToolButton 上。DisablePageLeaveCheck="true"。

# android - 来自 textview 的双倍值

> ID：14893349
> 
> 赞同：0
> 
> 时间：2013-02-15T11:07:05.457
> 
> 标签：android, xml, android-edittext

我很确定这里有很多类似的问题，但没有一个能帮助我解决我遇到的这个问题。

假设我有一个主菜单、一个仪表板布局和 4 个按钮。A B C D

当我按 A 时，我正在开始新的活动 A。在这个活动 A 中，有一个链接我正在从中获取 json 项目。它在正常的 URL 下工作正常，但是当我试图从编辑文本/文本视图中获取价值时，它会崩溃。

```
 String url = "http://webservice.xxx.com/webservice/getLocationList.php?lat="+ latValue +"&lng="+ lngValue +""; 
```

**latValue**和**lngValue**来自我的**R.id.test**中的编辑框，这里是 EditText 的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/test"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

<EditText
    android:id="@+id/latValue"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="numberDecimal"
    android:text="54.9933628" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/lngValue"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="9.8595655"
    android:inputType="numberDecimal" /> 
    </LinearLayout> 
```

在这里，我想从中获取价值并将其放入链接中。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

                  EditText lat_source = (EditText)findViewById(R.id.latValue);
here crash -->    Double sourceLat = Double.parseDouble(lat_source.getText().toString());

    EditText lng_source = (EditText)findViewById(R.id.lngValue);
    Double sourceLng = Double.parseDouble(lng_source.getText().toString());

    String url = "http://webservice.xxx.com/webservice/getLocationList.php?lat="+ sourceLat +"&lng="+ sourceLng +"";

    Log.d(TAG, "My URL is = " + url); 
```

**日志**

```
 02-15 11:37:41.826: E/AndroidRuntime(14267):    at android.os.Looper.loop(Looper.java:137)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at android.app.ActivityThread.main(ActivityThread.java:4898)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at java.lang.reflect.Method.invoke(Method.java:511)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at dalvik.system.NativeStart.main(Native Method)
    02-15 11:37:41.826: E/AndroidRuntime(14267): Caused by: java.lang.NullPointerException
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at com.androidhive.jsonparsing.LocationBased.onCreate(LocationBased.java:69)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at android.app.Activity.performCreate(Activity.java:5206)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
    02-15 11:37:41.826: E/AndroidRuntime(14267):    at android.app.ActivityThread.performLaunchActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:13:33.603

```
LayoutInflater inflater  = LayoutInflater.from(this);
LinearLayout testLayout = (LinearLayout)inflater.inflate(R.layout.test, null)
EditText lat_source = (EditText)testLayout.findViewById(R.id.latValue);
Double sourceLat = Double.parseDouble(lat_source.getText().toString()); 
```

如前所述，为了获得`EditText`对象 through `findViewById`，您的视图应该添加到 View Hierarchy 中`setContentView`，或者您可以使用充气器并使用充气器返回的视图对象来获取`EditText`

# android - Android：在 Spinner 中包装长文本

> ID：14893350
> 
> 赞同：1
> 
> 时间：2013-02-15T11:07:13.787
> 
> 标签：android, spinner

在我的字符串数组中，我有一个长文本，我想在我的 Spinner 中显示（这个 Spinner 在一个对话框中）..我尝试了下面的代码

```
 spinner1 = (Spinner) dialog.findViewById(R.id.quesspinner);
 ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(activity,
                    android.R.layout.simple_spinner_item, R.array.fbquestion);
            arrayAdapter .setDropDownViewResource(R.layout.textview);
            spinner1.setAdapter(arrayAdapter); 
```

我的文本视图如下

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:ellipsize="marquee" /> 
```

这对大多数人都有效，但对我不知道我哪里出错了；根据这个 SO questions [How to wrap long text in a spinner](https://stackoverflow.com/questions/6107500/how-to-wrap-lengthy-text-in-a-spinner)

[在微调器android中包装文本](https://stackoverflow.com/questions/7384639/wrapping-text-in-spinner-android)

任何帮助表示赞赏。

# iis - 在 Windows Server 2008r2 上全新安装 .net 4.0 时出现致命错误

> ID：14893353
> 
> 赞同：0
> 
> 时间：2013-02-15T11:07:24.163
> 
> 标签：iis, .net-4.0, windows-server-2008

它在安装客户端配置文件时开始回滚。

Atm 服务器上没有安装 .net 4.0 版本。

有人对如何解决这个问题有一些提示吗？

事件日志：错误 1310：写入文件 c:/windows/system32/msvcr100_clr0400.dll 系统错误 0 验证您是否有权访问该目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:36:32.823

首先，运行以下 [.NET Framework 设置验证工具](http://blogs.msdn.com/cfs-file.ashx/__key/CommunityServer-Components-PostAttachments/00-08-99-90-04/netfx_5F00_setupverifier_5F00_new.zip)。

如果该工具发现任何问题，只需运行[Microsoft .NET Framework 修复工具的第 2 版](http://support.microsoft.com/kb/2698555)。

您可以在[此处](http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx)找到有关验证工具的用户指南。

# mysql - MySQL：仅在满足条件时更新字段

> ID：14893355
> 
> 赞同：81
> 
> 时间：2013-02-15T11:07:27.113
> 
> 标签：mysql, if-statement, sql-update

是否可以在 MySQL 中执行 UPDATE 查询，仅在满足特定条件时才更新字段值？像这样的东西：

```
UPDATE test
SET
    CASE
        WHEN true
        THEN field = 1
    END
WHERE id = 123 
```

换句话说：

```
UPDATE test
SET
    something = 1,        /*field that always gets updated*/
    CASE
        WHEN true
        THEN field = 1    /*field that should only get updated when condition is met*/
    END
WHERE id = 123 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-02-15T11:10:03.700

是的！

这里还有另一个例子：

```
UPDATE prices
SET final_price= CASE
   WHEN currency=1 THEN 0.81*final_price
   ELSE final_price
END 
```

这是有效的，因为如果没有更改，MySQL 不会更新该行，如[docs 中所述](https://dev.mysql.com/doc/refman/5.7/en/update.html)：

> 如果您将列设置为它当前具有的值，MySQL 会注意到这一点并且不会更新它。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-01-29T10:45:59.910

在我看来，另一个更容易阅读的解决方案是：

```
UPDATE test 
    SET something = 1, field = IF(condition is true, 1, field) 
    WHERE id = 123 
```

如果满足条件，则将“field”设置为 1（如 OP 示例），如果不满足，则使用“field”的当前值。使用先前的值与不更改相同，所以你去。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-15T11:10:01.117

试试这个：

```
UPDATE test
SET
   field = 1
WHERE id = 123 and condition 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-28T09:14:53.637

`IF()`我们可以使用 MySQL条件函数的另一种解决方案：

```
UPDATE test
SET  field  = IF(something == 1{CONDITION}, 1 {NEW VALUE}, field)
WHERE `id` = 5 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-18T20:42:11.433

另一种变化：

```
UPDATE test
SET field = IF ( {condition}, {new value}, field )
WHERE id = 123 
```

仅当满足时才会更新`field`with`{new value}``{condition}`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-08-11T08:36:34.260

找到了 AND 条件的解决方案：

```
 $trainstrength = "UPDATE user_character SET strength_trains = strength_trains + 1, trained_strength = trained_strength +1, character_gold = character_gold - $gold_to_next_strength WHERE ID = $currentUser AND character_gold > $gold_to_next_strength"; 
```

# javascript - Require.js 和 twitter-bootstrap

> ID：14893356
> 
> 赞同：2
> 
> 时间：2013-02-15T11:07:31.103
> 
> 标签：javascript, twitter-bootstrap, requirejs

我已经实现了一个 require.js-scipt 来将 twitter-bootstrap 放在一个单独的模块中。但是，当我测试它是否与包含应打开模式对话框的按钮的页面一样工作时，什么也没有发生。我猜我必须做更多的事情来将 css-components 与 require-module 粘合在一起。但我没有找到我必须改变的地方。该模块将“Loaded..”消息打印到控制台，因此它似乎到目前为止工作。

我的模块：

```
require.config({
    paths : {
        'jquery' : ['extdep/jquery-1-8-3'],
        'bootstrap-modal' : ['extdep/twitter-bootstrap/js/bootstrap-modal']
    },
    shim : {
        'bootstrap-modal' : ['jquery']
    }
});

require(['jquery', 'bootstrap-modal'],
     function($){
         console.log("Loaded :)");    
         return {};
     }
); 
```

实现模态对话框和脚本标签到模块的 div。

```
 <div class="container">
                <h2>Example of creating Modals with Twitter Bootstrap</h2>
                <div id="example" class="modal hide fade in" style="display: none;">
                    <div class="modal-header">
                        <a class="close" data-dismiss="modal">×</a>
                        <h3>This is a Modal Heading</h3>
                    </div>
                    <div class="modal-body">
                        <h4>Text in a modal</h4>
                        <p>You can add some text here.</p>
                    </div>
                    <div class="modal-footer">
                        <a href="#" class="btn btn-success">Call to action</a> <a href="#"
                            class="btn" data-dismiss="modal">Close</a>
                    </div>
                </div>
                <p>
                    <a data-toggle="modal" href="#example"
                        class="btn btn-primary btn-large">Launch demo modal</a>
                </p>
            </div>

<script data-main="main" 
            src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.4/require.min.js" /> 
```

你有什么想法我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:56:09.567

你的垫片错了。你不应该为 jQuery 本身提供一个 shim 吗？或者您使用的是为与 Require.js 一起使用而构建的版本？

```
shim : {
    'jquery':{
        exports: 'jQuery'
    },
    'bootstrap-modal': {
        deps: ['jquery'],
        exports: 'jQuery.fn.modal'
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:57:51.127

*我认为*你需要`data-parent="example"`在这条线上。

```
<a data-toggle="modal" href="#example" class="btn btn-primary btn-large">Launch demo modal</a> 
```

但我不是100%。您应该制作一个 jsfiddle，以便我们可以使用它。

# iphone - xcode：使用 AddressBookUI 的 sigsegv 崩溃

> ID：14893360
> 
> 赞同：1
> 
> 时间：2013-02-15T11:07:40.770
> 
> 标签：iphone, ios, segmentation-fault, unhandled-exception, addressbookui

我有一个，`error exc_bad_access (sigsegv)`但我不明白为什么。崩溃日志信息量不大。有人可以帮助我吗？

在我看来，错误发生在应用程序启动并加载`AddressBookUI`组件以显示联系人列表时。

这是崩溃日志文件的开头：

```
 Incident Identifier: 6C2731B3-027E-4058-8E93-C6471BC30B6C
CrashReporter Key:   [TODO]
Hardware Model:      iPhone5,2
Process:         Rubrica4146 [1532]
Path:            /var/mobile/Applications/1ECD07F4-123D-4720-8AB8-53ACDCD71450/Rubrica4146.app/Rubrica4146
Identifier:      com.7shapes.rubrica4146
Version:         21
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2013-02-15 00:01:49 +0000
OS Version:      iPhone OS 6.1 (10B143)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x90000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x392e95d0 _objc_msgSend + 16
1   CoreFoundation                      0x3154773f <redacted> + 271
2   CoreFoundation                      0x31547e09 <redacted> + 45
3   UIKit                               0x334750ab <redacted> + 51
4   UIKit                               0x33474fe3 <redacted> + 91
5   UIKit                               0x33474f39 <redacted> + 97
6   UIKit                               0x334f905b <redacted> + 2483
7   UIKit                               0x33569573 <redacted> + 1719
8   UIKit                               0x334b57e1 <redacted> + 913
9   AddressBookUI                       0x30dfc19d <redacted> + 241
10  AddressBookUI                       0x30dfc08d <redacted> + 65
11  CoreFoundation                      0x3154e349 __CFXNotificationPost + 1421
12  Foundation                          0x31e65b7f <redacted> + 71
13  UIKit                               0x334970df <redacted> + 735
14  UIKit                               0x3340d2d1 <redacted> + 2469
15  UIKit                               0x3340c7ad <redacted> + 73
16  UIKit                               0x3340c1ef <redacted> + 6199
17  GraphicsServices                    0x351235f7 <redacted> + 591
18  GraphicsServices                    0x35123227 <redacted> + 35
19  CoreFoundation                      0x315d23e7 <redacted> + 35
20  CoreFoundation                      0x315d238b <redacted> + 139
21  CoreFoundation                      0x315d120f <redacted> + 1383
22  CoreFoundation                      0x3154423d _CFRunLoopRunSpecific + 357
23  CoreFoundation                      0x315440c9 _CFRunLoopRunInMode + 105
24  GraphicsServices                    0x3512233b _GSEventRunModal + 75
25  UIKit                               0x334602b9 _UIApplicationMain + 1121
26  Rubrica4146                         0x0002988b main (main.m:16) 
```

如何理解应用程序崩溃的原因？这个崩溃日志告诉我什么？

# jquery - 在鼠标悬停事件上向上和向下滑动文本

> ID：14893361
> 
> 赞同：0
> 
> 时间：2013-02-15T11:07:42.927
> 
> 标签：jquery, jquery-animate, slidedown

我对滑动功能有一个小问题。我想要它做的是当我将鼠标悬停在按钮上时，较暗的背景会向下滑动，覆盖整个按钮（在文本后面），文本会向上滑动一点。到目前为止我所做的是：

```
<nav>
    <a href="../webdesign.html"><span>01\. <strong>HOME</strong></span><div></div></a>
    <a href="../webdesign.html"><span>02\. <strong>WEBSITE DESIGN</strong></span><div></div></a>
    <a href="../webdesign.html"><span>03\. <strong>MOBILE WEBSITES</strong></span><div></div></a>
    <a href="../webdesign.html"><span>04\. <strong>PORTFOLIO</strong></span><div></div></a>
    <a href="../webdesign.html"><span>05\. <strong>ABOUT US</strong></span><div></div></a>
    <a href="../webdesign.html"><span>06\. <strong>CONTACT US</strong></span><div></div></a>
</nav> 
```

jQuery：

```
$("nav a").mouseenter(function(){
      $('div', this).slideDown(200);
      $("nav a").css('padding-top', '5px');
}).mouseleave(function() {
      $('div', this).slideUp(500);
      $("nav a").css('padding-top', '25px');
}); 
```

CSS：

```
 nav{
        height:65px;
        font-family: moderne, Verdana, Geneva, sans-serif;
        font-size:0.9em;
        overflow:hidden;
    }

    nav a{
        background-color:rgba(000,000,000,0.1);
        border-bottom:1px solid #fff;
        border-top:1px solid #666;
        display:block;
        float:left;
        padding: 25px 0 0 10px;
        width: 144px;
        height:65px;
        color:#ffd100;
        font-size: 1em;
        margin: 0 2px;
        border-right: solid 1px #fff;
        border-left: solid 1px #666;
        -webkit-box-shadow: rgba(0,0,0,0.4) 1px 1px 3px inset;
        -moz-box-shadow: rgba(0,0,0,0.4) 1px 1px 3px inset;
        box-shadow: rgba(0,0,0,0.4) 1px 1px 3px inset;
        position:relative;
    }

    nav a strong{
        font-weight:normal;
        color:#333;
    }

    nav div{
        position:absolute;
        top:0;
        left:0;
        float:left;
        width:144px;
        background-color: rgba(0, 0, 0, .5);
        color:#ddd;
        padding:5px;
        margin-top: 0px;
        border-bottom:1px solid #999;
        font-size:15px; 
        display:none;
    } 
```

我知道 jquery 有点灾难，但我尝试了很多东西，我是 jquery 的初学者。jsFiddle 这里：[jsFiddle](http://jsfiddle.net/bFFhk/1/) 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:15:22.630

看到这个：http: [//jsfiddle.net/bFFhk/2/](http://jsfiddle.net/bFFhk/2/)

```
$("nav a").mouseenter(function () {
    $('div', this).slideDown(200);
    $(this).css('padding-top', '5px');
}).mouseleave(function () {
    $('div', this).slideUp(500);
    $(this).css('padding-top', '25px');
}); 
```

这增加了一点动画：http: [//jsfiddle.net/bFFhk/3/](http://jsfiddle.net/bFFhk/3/)

# r - 处理包含两位数和四位数字年份的日期

> ID：14893364
> 
> 赞同：2
> 
> 时间：2013-02-15T11:07:47.060
> 
> 标签：r, date

我有一个包含许多文件（通过`list.files`和读取`lapply`）的文件夹，这些文件混合使用两位数和四位数字年份。80 年代和 90 年代的日期是两位数，2000 年代的日期是四位数字（但这些在每个文件中都混合在一起，所以我不能正则表达式文件名）。

有没有首选的方法来处理这个？我有以下临时解决方案。

```
vec1 <- c("06/30/97", "12/31/99", "01/01/2000", "05/25/2001")
vec2 <- as.POSIXlt(as.Date(vec1, "%m/%d/%Y"))
vec3 <- vec2
vec3$year <- ifelse(vec3$year < 100, vec3$year + 1900, vec3$year) 
```

这似乎特别笨拙。这些情况有效，但这一定会正确调整 %y 到 %Y 吗？恐怕这会因为闰年之类的而悄然失败。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:22:53.983

我们可以修改我[对上一个问题的回答，](https://stackoverflow.com/questions/13764514/how-to-change-multiple-date-formats-in-same-column/13764691)以适应这种更“模棱两可”的情况：

```
multidate <- function(data, formats){
    a<-list()
    for(i in 1:length(formats)){
        a[[i]]<- as.Date(data,format=formats[i])
        a[[i]][a[[i]]>Sys.Date() | a[[i]]<as.Date("1000-01-01")]<-NA
        a[[1]][!is.na(a[[i]])]<-a[[i]][!is.na(a[[i]])]
        }
    a[[1]]
    }

multidate(vec1, c("%m/%d/%Y","%m/%d/%y"))
[1] "1997-06-30" "1999-12-31" "2000-01-01" "2001-05-25"
#or
multidate(vec1, c("%m/%d/%y","%m/%d/%Y"))
[1] "1997-06-30" "1999-12-31" "2000-01-01" "2001-05-25" 
```

只要您将来没有约会，它就可以工作。如果您这样做，请`Sys.Date()`在任何其他未来日期之前更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:26:00.777

如果您知道只需在只有 2 位数年份的日期之前添加“19”，您也可以使用`gsub`：

```
vec1 <- c("06/30/97", "12/31/99", "01/01/2000", "05/25/2001")
gsub("(.*)/(..)$", "\\1/19\\2", vec1)
# [1] "06/30/1997" "12/31/1999" "01/01/2000" "05/25/2001 
```

# android - 2 月 6 日更改后使用 Facebook 3.0 在多个朋友的墙上发帖

> ID：14893367
> 
> 赞同：0
> 
> 时间：2013-02-15T11:07:59.917
> 
> 标签：android, facebook-batch-request

我在[这里](https://stackoverflow.com/a/10222668/1767260)发现我们可以使用 Batch rqeuest 在多个朋友的墙上发帖，我尝试使用图形 API 这样做。但我收到了以下错误。但我可以通过提要对话框发布给单个用户。截至 2 月 6 日 Facebook不再允许我们使用图形 API 在某人的墙上发帖。那么我如何使用批量请求在朋友的墙上发帖。

> {Response: responseCode: 200, graphObject: null, error: {HttpStatus: 403, errorCode: 200, errorType: OAuthException, errorMessage: (#200) 此应用程序禁用向其他用户发布动态消息}, isFromCache:false}

使用的代码是

```
RequestBatch requestBatch = new RequestBatch();
            for (final String requestId : requestIds) {
                requestBatch.add(new Request(Session.getActiveSession(), 
                        requestId+ "/feed", postParams, HttpMethod.POST, new Request.Callback() {
                    public void onCompleted(Response response) {
                        Log.e("Response", ""+response.toString());
                    }
                }));
            } 
```

其中 requestIds 是 id 数组。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:17:22.443

> 截至 2 月 6 日，Facebook 不再允许我们使用图形 API 在某人的墙上发帖。那么我如何使用批量请求在朋友的墙上发帖。

当然，一点也不。

> OAuthException, errorMessage: (#200) 此应用程序禁用向其他用户发布动态消息

有什么可能不清楚的？

# windows - 从 32 位 wix 脚本注册 64 位 com 组件

> ID：14893368
> 
> 赞同：2
> 
> 时间：2013-02-15T11:08:10.563
> 
> 标签：windows, com, wix, 64-bit

我有为 IE 安装和注册 32 位 COM 组件的 WIX 脚本，我还想将 IE 的 64 位 COM 组件包含到同一个包中，而不创建其他包（不想在添加/删除中将用户与 2 个相同的程序混淆面板），我只看到一个变体 - 运行这样的动作

[WindowsFolder]\SysWOW64\regsvr32.exe 并没有检查此操作的响应

所以，我的安装程序可以在 32 和 64 窗口中运行

问题：有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:45:51.677

您应该将 32 位注册的注册表项放在 Win64="no" 的组件中。这将确保在为 64 位编译时，注册保持为 32 位。

# migration - 将网站迁移到另一台服务器后付款方式错误（joomla）

> ID：14893372
> 
> 赞同：0
> 
> 时间：2013-02-15T11:08:20.817
> 
> 标签：migration, joomla2.5, virtuemart

请帮我解决这个错误。我重新检查了所有 URL 和访问权限，但错误仍然存​​在（仅在将网站迁移到另一台服务器后才会发生这种情况）

请看截图：http: [//data.imagup.com/10/1175591931.png](http://data.imagup.com/10/1175591931.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:13:18.010

我们需要查看 checkout.sips_cc_form.php 中的代码才能确定，但​​不看我就猜到新服务器使用的是不同版本的 PHP。

# java - 无法从 main 外部引用在 main 中创建的对象

> ID：14893373
> 
> 赞同：0
> 
> 时间：2013-02-15T11:08:29.887
> 
> 标签：java, object, reference, main

我有一堂课，上面有人员名单。我创建了一个 PersonBeholder 类（在挪威语中是 PersonContainer 的意思）。我还有一个 Person 类，以及一个建立人与人之间关系的主类。当我尝试引用主要课程之外的人员的一般列表时，我遇到了问题。

```
class TestPersoner{
public static void main (String [ ] args){

   **PersonBeholder pl = new PersonBeholder();**

    Person Emil = new Person("Emil");
    Person Nils = new Person("Nils");

    pl.settInnPerson(Emil);        //this populates the list
    pl.settInnPerson(Nils);

    }

} 
```

现在当我尝试从外部引用 PersonBeholder pl 时遇到问题：

```
public void blirVennMed(Person p){
if(!pl.erIbeholder(p.hentNavn())) System.out.print("This is not going to work");
//this does check if there is someone in the container named p.hentNavn()
} 
```

# 输出

```
TestPersoner.java:26: error: cannot find symbol
if(!pl.erIbeholder(p.hentNavn())) System.out.print("This is not going to work");
    ^
  symbol:   variable pl
  location: class Person
1 error 
```

现在我这样做了：

```
class TestPersoner{
public static PersonBeholder pl = new PersonBeholder();
public static void main (String [ ] args){  

    Person Emil = new Person("Emil");
    Person Nils = new Person("Nils");

    pl.settInnPerson(Emil);        //this populates the list
    pl.settInnPerson(Nils);

    }

} 
```

它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:10:40.603

您的对象的范围在 main-method 中。如果要在外部使用它，请将其声明为 TestPersoner 类的成员或将其作为参数传递给方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:10:04.153

`Local variables`仅限于方法范围。你不能在你定义它们的方法之外使用它们。除非你明确地返回它们，否则它们只会在方法完成后得到 GC'D。

# asp.net - .Net Web Forms 测试响应时间之后的调用执行时间

> ID：14893377
> 
> 赞同：0
> 
> 时间：2013-02-15T11:08:34.740
> 
> 标签：asp.net, performance

我希望对几个网页（响应时间）进行性能测试，并对构成整体响应时间的每个页面后面的“执行调用”进行计时。

我将这些直接写到 Trace 中，为每个单独的调用计时的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:16:53.203

我为此使用了[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)。

# iphone - Tapku 日历在选择日期后推送到另一个视图

> ID：14893381
> 
> 赞同：1
> 
> 时间：2013-02-15T11:08:50.653
> 
> 标签：iphone, ios, calendar, pushviewcontroller, tapku

我在我的应用程序中使用 Tapku 日历并尝试实现 didSelectDate：用户选择一个日期，然后它推送到一个新视图。它确实推动了，但它推动了两次，这是我得到的错误：

**嵌套推送动画可能导致导航栏损坏**

**在意外状态下完成导航转换。导航栏子视图树可能会损坏。**

**对 AddToDiaryViewController 的开始/结束外观转换的不平衡调用：0x1f86ea60。**

这是我的 didSelectDate 代码：

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
TKDateInformation info = [d dateInformationWithTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSDate *myTimeZoneDay = [NSDate dateFromDateInformation:info timeZone:[NSTimeZone systemTimeZone]];

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
AddToDiaryViewController *yourViewController = (AddToDiaryViewController *)[storyboard instantiateViewControllerWithIdentifier:@"AddToDiary"];
NSString *dateSelected = [NSString stringWithFormat:@"Date Selected: %@",myTimeZoneDay];
yourViewController.dateString = dateSelected;

[self.navigationController pushViewController:yourViewController animated:YES];

} 
```

我正在添加这样的日历：

```
calendar =  [[TKCalendarMonthView alloc] init];
calendar.delegate = self;
calendar.dataSource = self;
// Add Calendar to just off the top of the screen so it can later slide down
calendar.frame = calendar.frame = CGRectMake(0, 0, 320,400);
// Ensure this is the last "addSubview" because the calendar must be the top most view layer
[self.view addSubview:calendar]; 
```

任何人都可以帮我解决这个问题吗？预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:16:44.957

我通过创建此方法修复了它

```
-(void)addToDiary{
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
AddToDiaryViewController *yourViewController = (AddToDiaryViewController *)[storyboard instantiateViewControllerWithIdentifier:@"AddToDiary"];
NSString *dateSelected = [NSString stringWithFormat:@"Date Selected: %@",myTimeZoneDay];
yourViewController.dateString = dateSelected;

[self.navigationController pushViewController:yourViewController animated:YES];
} 
```

然后在 didSelectDate 中调用 [self addToDiary]。

希望这可以帮助某人

# dojo - DOJO 如何关闭 Accordioncontainer 小部件中的所有窗格

> ID：14893384
> 
> 赞同：1
> 
> 时间：2013-02-15T11:08:52.710
> 
> 标签：dojo

以下 Accordioncontainer 代码。我正在尝试关闭所有窗格。请帮我

```
 <div style="width: 300px; height: 300px">
    <div data-dojo-type="dijit/layout/AccordionContainer" style="height: 300px;">
        <div data-dojo-type="dijit/layout/ContentPane" title="Heeh, this is a content pane">
            Hi!
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="This is as well" selected="true">
            Hi how are you?
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="This too">
            Hi how are you? .....Great, thx
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-25T02:56:59.467

我采取了不同的方法，我有一个完整的实现，只是希望手风琴容器在重新单击标题栏时关闭窗格，所以我找到了具有我想要的行为的方法（实际上在父类 djijt.layout .StackContainer) 并通过覆盖新子类中的方法对其进行调整。

```
define([
    "dojo/_base/declare",
    "dojo/when",
    "dijit/registry",
    "dijit/layout/AccordionContainer"
], function(declare, when, registry, AccordionContainer) {
    return declare("yourproject.CloseableAccordionContainer", [AccordionContainer], {

        // tweak the AccordionContainer so you can close panes
        selectChild: function(/*dijit/_WidgetBase|String*/ page, /*Boolean*/ animate) {
        // summary:
        //      If the selected widget is already showing, hide it. 
        //      Otherwise perform normally.
        page = registry.byId(page);

            if (this.selectedChildWidget == page) {
                // If the selected child is re-selected, hide or show it based
                // on current visibility. Had to disable animation but could
                // be enabled by overriding the _transition method
                var d;
                if(page.selected) {
                    d = this._transition(false, page, false);
                } else {
                    d = this._transition(page, false, false);
                }

                // d may be null, or a scalar like true.
                // Return a promise in all cases
                return when(d || true);     // Promise
            } else {
                return this.inherited(arguments);
            }
        }
    });
}); 
```

定义了此类后，您应该能够执行以下操作：

```
<div style="width: 300px; height: 300px">
    <div data-dojo-type="yourproject/CloseableAccordionContainer" style="height: 300px;">
        <div data-dojo-type="dijit/layout/ContentPane" title="Heeh, this is a content pane">
            Hi!
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="This is as well" selected="true">
            Hi how are you?
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="This too">
            Hi how are you? .....Great, thx
        </div>
    </div>
</div> 
```

如果您使用这种方法来覆盖正常的 Dojo 行为，请确保在所有目标平台上进行测试，可能会有您不知道的副作用。请记住，这是 OOP 的全部要点 - 扩展而不是重新定义，但是您需要深入研究 Dojo 代码库以找出正在发生的事情以及您应该做什么。这种变化对我来说看起来很安全，并且不会破坏键盘输入等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:59:08.073

你不能用手风琴容器做到这一点。您可以通过使用 dojox/widget/TitleGroup 和 dijit/TitlePane 来实现您想要的，如下所示：

```
<div style="width: 300px; height: 300px">
    <div data-dojo-type="dojox/widget/TitleGroup">
        <div data-dojo-type="dijit/TitlePane" open='false' title="Heeh, this is a content pane">
            Hi!
        </div>
        <div data-dojo-type="dijit/TitlePane" open='false' title="This is as well" selected="true">
            Hi how are you?
        </div>
        <div data-dojo-type="dijit/TitlePane" open='false' title="This too">
            Hi how are you? .....Great, thx
        </div>
    </div>
</div> 
```

# string - 如何在 Groovy 中为最后一项使用不同的分隔符加入字符串列表

> ID：14893386
> 
> 赞同：1
> 
> 时间：2013-02-15T11:08:58.570
> 
> 标签：string, list, collections, groovy

我想加入一个字符串列表以供用户输出。每个字符串之间的分隔符应为 a `','`，但分隔符应为 的最后一个元素除外`'and'`。

例如：

```
def a = ['one', 'two', 'three'];
println a.joinWithDifferentLast(', ', ' and ');
// output: one, two and three 
```

如何在 Groovy 中实现这样的连接功能？如果它可以处理一个元素（无分隔符）、两个元素（最后一个分隔符）和多个元素的情况，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:25:26.767

你也可以这样做：

```
def joinWithDifferentLast( List list, String others, String last ) {
  def start = list.take( list.size() - 1 ).join( others )
  def end   = list.drop( list.size() - 1 )[ 0 ]
  if( start ) {
    [ start, last, end ].join()
  }
  else {
    end as String ?: ''
  }
}

assert ''           == joinWithDifferentLast( [],          ', ', ' and ' )
assert '1'          == joinWithDifferentLast( [ 1 ],       ', ', ' and ' )
assert '1 and 2'    == joinWithDifferentLast( [ 1, 2 ],    ', ', ' and ' )
assert '1, 2 and 3' == joinWithDifferentLast( [ 1, 2, 3 ], ', ', ' and ' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-29T20:32:30.967

为了好玩，我试着让一些东西更容易阅读：

```
def static joinWithDifferentLast(List list, String firstJoin, String lastJoin) {
    switch (list?.size() ?: 0) {
        case 0:
            return ''
        case 1:
            return list.head() as String
        default:
            return list.init().join(firstJoin) + lastJoin + list.last()
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:14:28.933

```
List.metaClass.joinWithDifferentLast { a, b ->
    delegate.join(a).reverse().replaceFirst(a.reverse(),b.reverse()).reverse()
}

def a = ['one', 'two', 'three'];
println a.joinWithDifferentLast(',',' and ') //prints one,two and three

assert ''           == [].joinWithDifferentLast(' , ', ' and ' )
assert '1'          == [ 1 ].joinWithDifferentLast( ', ', ' and ' )
assert '1 and 2'    == [ 1, 2 ].joinWithDifferentLast( ', ', ' and ' )
assert '1, 2 and 3' == [ 1, 2, 3 ].joinWithDifferentLast(', ', ' and ' ) 
assert '1 %ac 2 %ac 3 %ac 4 %ac 5 %bi 6' == [ 1, 2, 3, 4, 5, 6 ].joinWithDifferentLast(' %ac ', ' %bi ' ) 
```

将是我的第一个蛮力和幼稚（但已纠正）的猜测:-D

```
List.metaClass.joinWithDifferentLast { a, b ->
    def l = delegate.size() 
    delegate[0..l-2].join(a) + b + delegate[l-1]
} 
```

少一点“反转”，但需要对列表的 size() 进行安全化

# java - 如何在 android 中使用 fbsdk 3.0 从 facebook 相册中获取所有图片

> ID：14893392
> 
> 赞同：1
> 
> 时间：2013-02-15T11:09:13.347
> 
> 标签：java, android, facebook-graph-api

我想从我的 Facebook 相册中的图像中获取所有图像。我授予读取权限“电子邮件、用户照片、朋友”。我正在获取所有用户的相册。但是当我尝试获取相册的图片时，响应仅包含不同尺寸的相册的第一张图片。我将 facebook Graph 请求作为“albumID/photos”发送。发送请求的代码：

请求 req = new Request(session, albumId+"/photos", null, HttpMethod.GET,callback);

请任何人告诉我如何从 facebook 相册中获取所有图片。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T06:49:36.330

看到我的问题，我已经解决了这个问题： [android how to get "any valid access_token" in android?](https://stackoverflow.com/questions/19993300/android-how-to-obtain-any-valid-access-token-in-android)

使用这个： [https ://developers.facebook.com/docs/android/run-fql-queries/](https://developers.facebook.com/docs/android/run-fql-queries/)

# git - 将功能分支重新定位到另一个功能分支

> ID：14893399
> 
> 赞同：384
> 
> 时间：2013-02-15T11:09:24.410
> 
> 标签：git, git-rebase, feature-branch

我正在处理两个（私有）功能分支。

```
a -- b -- c                  <-- Master
     \     \
      \     d -- e           <-- Branch1
       \
        f -- g               <-- Branch2 
```

在这些分支上工作了一会儿后，我发现我需要从 Branch1 中的 Branch2 进行更改。我想将 Branch2 中的更改重新定位到 Branch1。我想结束以下内容：

```
a -- b -- c                  <-- Master
           \
            d -- e -- f -- g <-- Branch1 
```

我很确定我需要将第二个分支重新定位*到*第一个分支，但我不完全确定正确的语法以及我应该检查哪个分支。

这个命令会产生预期的结果吗？

```
(Branch1)$ git rebase --onto Branch1 Branch2 
```

* * *

## 回答 #1

> 赞同：434
> 
> 时间：2013-02-15T11:19:58.163

1.  切换到分支 2

    ```
    git checkout Branch2 
    ```

2.  在 Branch1 更改之上应用当前（Branch2）更改，留在 Branch2 中：

    ```
    git rebase Branch1 
    ```

这将使您在 Branch2 中获得所需的结果：

```
a -- b -- c                      <-- Master
           \
            d -- e               <-- Branch1
           \
            d -- e -- f' -- g'   <-- Branch2 
```

*您可以删除 Branch1。*

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-04-03T07:16:42.440

注意：如果您在`Branch1`，您将使用 Git 2.0（2014 年第二季度）能够输入：

```
git checkout Branch2
git rebase - 
```

请参阅[Brian Gesiak](https://github.com/modocache)的[提交](https://github.com/git/git/commit/4f4074077fb0c3a2facc61b333337d024aeeebbf)4f40740 ：[`modocache`](https://github.com/modocache)

### `rebase`: 允许`-`上一个分支的“”简写

> 教 rebase 相同的简写，`checkout`并将`merge`分支命名为`rebase`当前分支；也就是说，“ `-`”表示“我们之前所在的分支”。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2021-06-17T11:00:27.183

我知道你已经接受了答案，但是如果你想完全按照你的要求去做（在 Branch1 上添加 Branch2 的提交，同时留在 Branch1 上），你可以这样做：

```
git checkout Branch1
git cherry-pick master..Branch2 
```

你最终会得到这个。

```
a -- b -- c                      <-- Master
           \
            d -- e -- f' -- g'   <-- Branch1 (current)
           \
            f -- g               <-- Branch2 
```

这将挑选 Branch2 上的每个提交，以便将它们放到 Branch1 上。然后你可以删除Branch2。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-06-27T15:09:22.240

我知道你要求 Rebase，但我会选择 Cherry-Pick 我想从 Branch2 移动到 Branch1 的提交。这样，我就不需要关心何时从 master 创建了哪个分支，并且我可以更好地控制合并。

```
a -- b -- c                  <-- Master
     \     \
      \     d -- e -- f -- g <-- Branch1 (Cherry-Pick f & g)
       \
        f -- g               <-- Branch2 
```

# java - Akka + Camel + FTP2 + localWorkingDirectory 工作不可靠

> ID：14893400
> 
> 赞同：2
> 
> 时间：2013-02-15T11:09:26.763
> 
> 标签：java, linux, ftp, apache-camel, akka

我在使用 Camel 的 FTP2 组件时遇到问题，消费者参与者住在 Akka 系统中。

基本思想是监视 FTP 目录中的文件，然后生成一个子 Actor 来单独处理每个文件。Akka 被用于管理并发性和可靠性。父消费者参与者使用 noop=true 轮询目录，因此它不执行任何操作，然后子消费者参与者应该下载文件，并使用“包含”Camel 选项进行过滤。重要的是下载是并发的，并且文件不加载到内存中也很重要（因此使用 localWorkDirectory）。

我写了一个简单的复制：

```
package camelrepro;

import java.io.InputStream;

import org.mockftpserver.core.command.Command;
import org.mockftpserver.core.command.ReplyCodes;
import org.mockftpserver.core.session.Session;
import org.mockftpserver.core.session.SessionKeys;
import org.mockftpserver.fake.FakeFtpServer;
import org.mockftpserver.fake.UserAccount;
import org.mockftpserver.fake.command.AbstractFakeCommandHandler;
import org.mockftpserver.fake.filesystem.FileEntry;
import org.mockftpserver.fake.filesystem.UnixFakeFileSystem;

import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.camel.CamelMessage;
import akka.camel.javaapi.UntypedConsumerActor;
import akka.testkit.JavaTestKit;

public class Main {

    public static class ParentActor extends UntypedConsumerActor {

        public ParentActor() {
            System.out.println("Parent started");
        }
        @Override
        public String getEndpointUri() {
            return "ftp://anonymous@localhost:8021?password=password&readLock=changed&initialDelay=0&delay=200&noop=true";
        }

        @Override
        public void onReceive(Object msg) throws Exception {
            if (msg instanceof CamelMessage) {
                getContext().actorOf(new Props(ChildActor.class), "0");
            } else {
                unhandled(msg);
            }
        }
    }

    public static class ChildActor extends UntypedConsumerActor {

        public ChildActor() {
            System.out.println("Child started");
        }

        @Override
        public String getEndpointUri() {
            return "ftp://anonymous@localhost:8021?password=password&readLock=changed&initialDelay=0&delay=200&include=test.txt&localWorkDirectory=/tmp";
        }

        @Override
        public void onReceive(Object msg) throws Exception {
            if (msg instanceof CamelMessage) {
                System.out.println("Child got message");
                CamelMessage camelMsg = (CamelMessage) msg;

                InputStream source = camelMsg.getBodyAs(InputStream.class, getCamelContext());
                System.out.println(source.getClass().getName());
                System.exit(0);
            } else {
                unhandled(msg);
            }
        }
    }

    public static void main(String[] args) {

        ActorSystem system = ActorSystem.create("default");

        FakeFtpServer ftpServer = new FakeFtpServer();
        UnixFakeFileSystem ftpFileSystem = new UnixFakeFileSystem();
        ftpServer.setFileSystem(ftpFileSystem);
        ftpServer.addUserAccount(new UserAccount("anonymous", "password", "/"));
        ftpServer.setServerControlPort(8021);

        // fix bug in PWD handling (either Apache FTP client or mock server depending on opinion)
        ftpServer.setCommandHandler("PWD", new AbstractFakeCommandHandler() {
            @Override
            protected void handle(Command command, Session session) {
                String currentDirectory = (String) session.getAttribute(SessionKeys.CURRENT_DIRECTORY);
                this.replyCodeForFileSystemException = ReplyCodes.READ_FILE_ERROR;
                verifyFileSystemCondition(notNullOrEmpty(currentDirectory), currentDirectory, "filesystem.currentDirectoryNotSet");
                int replyCode = ReplyCodes.PWD_OK;
                String replyText = String.format("\"%s\" OK", currentDirectory.replaceAll("\"", "\"\""));
                session.sendReply(replyCode, replyText);
            }
        });
        ftpFileSystem.add(new FileEntry("/test.txt", "hello world"));
        ftpServer.start();

        new JavaTestKit(system) {{
            getSystem().actorOf(new Props(ParentActor.class));
        }};
    }
} 
```

显示版本的 Maven 依赖项：

```
 <dependencies>
        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-actor_2.10</artifactId>
            <version>2.1.0</version>
        </dependency>
        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-remote_2.10</artifactId>
            <version>2.1.0</version>
        </dependency>
        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-camel_2.10</artifactId>
            <version>2.1.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-testkit_2.10</artifactId>
            <version>2.1.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-ftp</artifactId>
            <version>2.10.3</version>
        </dependency>
        <dependency>
            <groupId>org.mockftpserver</groupId>
            <artifactId>MockFtpServer</artifactId>
            <version>2.4</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>commons-net</groupId>
            <artifactId>commons-net</artifactId>
            <version>3.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.7.2</version>
        </dependency>
    </dependencies> 
```

我希望看到 BufferedInputStream 写入标准输出 - 并检查 ByteArrayInputStream 不是。

但相反，我看到文件未找到异常：

```
[ERROR] [02/15/2013 10:53:32.951] [default-akka.actor.default-dispatcher-7] [akka://default/user/$a/0] Error during type conversion from type: org.apache.camel.component.file.remote.RemoteFile to the required type: java.io.InputStream with value GenericFile[test.txt] due java.io.FileNotFoundException: /tmp/test.txt (No such file or directory)
org.apache.camel.TypeConversionException: Error during type conversion from type: org.apache.camel.component.file.remote.RemoteFile to the required type: java.io.InputStream with value GenericFile[test.txt] due java.io.FileNotFoundException: /tmp/test.txt (No such file or directory)
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.mandatoryConvertTo(BaseTypeConverterRegistry.java:162) 
```

有几次，它奏效了，让我怀疑这可能是一场比赛。但它几乎总是失败。

有什么线索、想法、建议吗？

FWIW：

```
uname -a: Linux 3.2.0-37-generic #58-Ubuntu SMP Thu Jan 24 15:28:10 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
java: 1.7.0_11-b21 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:38:21.960

我已经找到了解决上述问题的方法。

这是子消费者`autoAck()`返回 true 的事实（默认情况下它会这样做）。在这种情况下，akka-camel 将发送即发即弃`CamelMessage`，并继续进行清理。与此同时，子actor实际上并没有被打开`InputStream`，直到被调用的类型转换器之一`getBodyAs()`打开它。`getBodyAs()`因此，子actor通过打开文件和骆驼清理在异步发送消息后删除文件之间存在竞争。

所以解决方法是重写`autoAck()`以返回 false，并在子消息处理程序的末尾发送`Ack.getInstance()`（或者如果你喜欢）。`new Status.Failure(<cause>)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:38:21.303

使用 Camel 2.10.2，因为 2.10.3 中的 ftp 组件存在问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:10:02.743

当使用 localWorkDirectory=/tmp 时，该目录用于在路由期间临时存储文件。骆驼交换完成后，文件将被删除。我不确定这如何与异步事件的 Akka 一起使用。因此，在 Camel Exchange 完成后，Akka onReceive 可能会被称为异步，因此临时文件会被删除。

在 Camel 中，您会将文件路由到更永久的文件位置

```
 from("ftp:...")
   .to("file:inbox") 
```

然后你可以让 Akka 从 ("file:inbox") 消费。

# entity-framework - 可选的一对一关系

> ID：14893410
> 
> 赞同：0
> 
> 时间：2013-02-15T11:10:01.267
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

当我有 2 个这样的模型时：

```
public class PredictionGroup
{
    [Key]
    public Guid PredictionGroupId { get; set; }

    public Guid? ResultPredictionId { get; set; }

    [ForeignKey("ResultPredictionId")]
    public Prediction ResultPrediction { get; set; }

    public List<Prediction> Predictions { get; set; }
}

public class Prediction
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid PredictionId { get; set; }

    [Required]
    public Guid PredictionGroupId { get; set; }

    [ForeignKey("PredictionGroupId")]
    public PredictionGroup PredictionGroup { get; set; }
} 
```

这将生成：

```
CreateTable(
    "Website.PredictionGroups",
    c => new
        {
            PredictionGroupId = c.Guid(nullable: false, identity: true),
            ResultPredictionId = c.Guid(),
        })
    .PrimaryKey(t => t.PredictionGroupId)
    .ForeignKey("Website.Predictions", t => t.ResultPredictionId)
    .Index(t => t.ResultPredictionId);

CreateTable(
    "Website.Predictions",
    c => new
        {
            PredictionId = c.Guid(nullable: false, identity: true),
            PredictionGroupId = c.Guid(nullable: false),
            PredictionGroup_PredictionGroupId = c.Guid(),
        })
    .PrimaryKey(t => t.PredictionId)
    .ForeignKey("Website.PredictionGroups", t => t.PredictionGroupId)
    .ForeignKey("Website.PredictionGroups", t => t.PredictionGroup_PredictionGroupId)
    .Index(t => t.PredictionGroupId)
    .Index(t => t.PredictionGroup_PredictionGroupId); 
```

当我尝试在我的数据库中输入它时，我收到错误：`Unable to determine the principal end of the 'Site.Data.Prediction_PredictionGroup' relationship. Multiple added entities may have the same primary key.`

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:33:11.507

我添加了这个 Fluent API 代码：

```
 modelBuilder.Entity<PredictionGroup>()
            .HasOptional(m => m.ResultPrediction)
            .WithOptionalDependent()
            .Map(x => x.MapKey("PredictionResultGroupId")); 
```

这`MapKey`是可选的，但我希望它可以只用注释来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:15:53.957

我不确定您的模型是否正确，这就是您需要添加 Fluent API 代码的原因。您不应该为此需要 Fluent API 代码。[ForeignKey] 定义继续作为外键值的属性，并指向它作为键的对象。所以属性属性继续 ResultPredictionId 并为属性 ResultPrediction 说它。目前它做的相反。

```
public class PredictionGroup
{
    [Key]
    public Guid PredictionGroupId { get; set; }

    [ForeignKey("ResultPrediction")] //this is the key, point it to the object
    public Guid? ResultPredictionId { get; set; }

    public Prediction ResultPrediction { get; set; }

    public List<Prediction> Predictions { get; set; }
}

public class Prediction
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid PredictionId { get; set; }

    [Required]
    [ForeignKey("PredictionGroup")]
    public Guid PredictionGroupId { get; set; }

    public PredictionGroup PredictionGroup { get; set; }
} 
```

# android - 如何在同一活动中处理多个对话框

> ID：14893411
> 
> 赞同：1
> 
> 时间：2013-02-15T11:10:01.367
> 
> 标签：android, layout, dialog, alert

我正在创建一个应用程序，该应用程序需要 3 个以上的 Activity 对话框用于不同目的。我正在使用`onCreateDialog()`当前正在处理文件中定义的单个对话框的方法`XML`，我需要知道的是如何在不使代码变大的情况下处理更多的 xml 文件。

```
@Override
protected Dialog onCreateDialog(int id ){

        return createExampleDialog(); // Function call, body is defined below
}

// This method is used for setting the dialogbox 
@Override
protected void onPrepareDialog(int id,Dialog loginPrompt){
    final EditText first = (EditText)loginPrompt.findViewById(R.id.rf1);
    first.setText(""); // setting the editbox blank
    final EditText second = (EditText)loginPrompt.findViewById(R.id.rf2);
    second.setText("");
}

//Body the function createExampleDialog() 
private Dialog createExampleDialog(){
    LayoutInflater factory = LayoutInflater.from(this);
    final View textEntryView = factory.inflate(R.layout.userpasslayout, null);
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Add Location!");
    alert.setIcon(R.drawable.logo);
    alert.setMessage("Fill information carefully!");
    alert.setView(textEntryView);
    //AlertDialog loginPrompt = alert.create();

    //PositiveButton Onclick Listener
    alert.setPositiveButton("Register", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            Toast.makeText(DialogActivity.this, "So you think!", Toast.LENGTH_LONG).show(); 
            return;
        }
    });

    //NegativeButton onclick Listener
    alert.setNegativeButton("cancel", new DialogInterface.OnClickListener() {       
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            // NegtiveButton works automatic it will perform cancel of the dialog box;

            return;
        }
    }); 
    return alert.create();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:14:05.397

利用

```
 switch(id){
         case exampleDialog_id:
             return showExapleDialog();
         break;
         case secondDialog_id:
             returnshowSecondDialog;
         break;
         default:
         return null;} 
```

# domain-driven-design - DDD：继承和事务

> ID：14893415
> 
> 赞同：2
> 
> 时间：2013-02-15T11:10:15.487
> 
> 标签：domain-driven-design, nservicebus, event-sourcing, ddd-repositories, neventstore

我正在尝试领域驱动设计和事件溯源。我打算使用（用 C# 开发）NServiceBus、JOliver 的 EventStore 和 NES 来绑定它们。我已经拥有适用于一个简单案例的基础架构（一个仅包含值对象的聚合根）。

我正在阅读 Evans 蓝皮书，并且正在尝试开发一个简单的域模型，其中的示例取自我的工作领域（HVAC 维护公司的 ERP 和 CRM）。

我正在建模一个简单的子域，即 HVAC 机器和它们之间的关系。机器有多种类型，例如熔炉、燃烧器、空调、压缩机、通用组件。每台机器可以有多个子机器。所有机器类型都有一些共同的数据和一些共同的行为。但是每种类型都有额外的数据和特定的行为，例如，您只能将 Burner 对象添加到 Furnace。

我分析的第一个结果是每台机器都应该是一个聚合根（继承自 NES 中的 AggregateBase），因为它必须能够保存对特定机器的引用（例如，用于插入涉及单台机器的维修记录、故障记录、等），并且还可以减少大型机器树中的并发问题。

因此，我的假设如下：

```
public class Machine : AggregateBase
{
    public DateTime InstallationDate { get; private set; }

    public Guid ManufacturerId { get; private set; }

    public Guid ModelId { get; private set; }
}

public class Furnace : Machine
{
    public List<Burner> burners { get; private set; }

    // other furnace properties

    public void AddBurner(Burner burner)
    {
        // perform validation
        this.Apply<BurnerAdded>(x=> x.burnerAdded = burner);
    }

    public void Handle(BurnerAdded @event)
    {
        this.burners.Add(@event.burnerAdded);
    }
}

public class Burner : Machine
{
    // burner specific properties/methods
} 
```

但我有一些疑问：

1.  这是代表我的域的正确方法吗？我读到不鼓励类继承，但这在我看来是使用它的完美案例（燃烧器是机器，炉子也是）。我将仅限于一级继承。

2.  是否可以使用 Event Sourcing 实现类继承？特别是建议的技术堆栈（nServiceBus、EventStore、NES）？

3.  我应该如何执行添加子机器（例如燃烧器到炉子）？这个操作可以分为两种：

    1.  将新的 Burner 添加到 Burner 存储库。
    2.  将 Burner 的引用添加到父 Furnace 的 burners 列表但是这两个操作全局修改了两个聚合根，因此该操作应该在两个单独的 commandhandlers/transactions 中执行...但是第二个取决于第一个...是这是一些建模错误的证据吗？我可以将 nServicebusMessages 批处理在一起以在单个事务中执行操作，但我读到这不好......

    如果我让子机器引用父机器，则父机器会丢失子机器列表（验证所需的），我无法查询事件源存储库以获取除 Guid 之外的其他属性。

提前感谢您对讨论的任何贡献，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:00:04.840

对于＃1，我会说不。您示例中的聚合根应该是 Furnace （仅）。Burner 应该被建模为 Furnace 上的一个集合，就像你目前拥有的那样，但不应该是一个聚合根。我不认为继承本身是一个问题，除了你的刻录机现在是通过继承的聚合根（因为 Burner => Machine => AggregateBase）。

如果燃烧器仅存在于 Furnaces 的上下文中，您可能不需要 Burner 存储库 - 您将始终将燃烧器添加到熔炉。我不清楚创建一个新的燃烧器本身是否有趣，并且需要它自己的事件。该问题的答案将决定您是否需要这两个事件或只需要“添加”事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T18:15:33.010

1.  我会避免继承。相反，创建单个 Machine 聚合并创建该机器将引用的描述符对象。描述符将是一个可以区分不同机器类型的值对象。如果绝对必要，请对这个对象使用继承，但不要对聚合本身使用继承。

2.  在 ES 中使用类继承的能力仅受序列化程序的限制。ES 没有规定数据如何序列化，但如果您使用 Protobuf 或 Newtonsoft.Json 之类的东西，它们支持继承。但是，在 JSON 的情况下，使用继承确实会将 $type 属性放在 JSON 输出中。

3.  这取决于燃烧器是否需要独立于熔炉而存在。如果不是，那么它是 Furnace 聚合的值对象或实体部分，应该与 Furnace 一起完整地持久化。如果是，那么它必须是一个聚合，应该首先创建然后添加到 Furnace。这可以通过 NSerivceBus saga 来实现，其中 AddBurnerToFurnaceCommand 通过首先启动相应的 saga 来处理，该 saga 发送创建 Burner 的命令。创建 Burner 后，创建 Burner 和 Furnace 之间的关联。熔炉只会引用 Guid 的燃烧器。在 ES 中，所有查询通常通过投影处理，只有行为通过 ID 调用规范聚合的事件存储。

# fortran - 如何在 FORTRAN 的子例程中声明本地“矩阵”？

> ID：14893417
> 
> 赞同：0
> 
> 时间：2013-02-15T11:10:18.247
> 
> 标签：fortran

我正在编写一个子程序来反转矩阵。输入是矩阵 A（n x n），输出是矩阵 invA。在子例程中，我想声明一个临时矩阵“temp”维度（n 乘 2n），但声明引起了奇怪的问题。在这一行之后（我在下面强调），我还声明了整数 i 和 j 并初始化它们 i = 0,j = 0。但是调试 i 和 j 的这些值，它显示 i = 1572472 ！诡异的！！！！！如果我删除代码行“real, dimension (m, m * 2) :: temp”，那么一切都很好。任何人都可以为我解释为什么？

提前致谢。（我是 .Net 中的一名优秀程序员，现在正在学习 Fortran——但这让我发疯！）

```
program weird

implicit none

Real, Dimension (2,2)::B
Real, Dimension (2,2) ::B_inversed

B(1,1) = 0.6
B(1,2) = 0.8  
B(2,1) = -0.8
B(2,2) = 0.6

Call InverseMatrix(B,B_inversed)

contains

subroutine InverseMatrix(A, invA)
implicit none
real, intent(in), dimension (:,:) :: A  
real, intent(out), dimension (size(a,1),size(a,2)) :: invA 

real, dimension (size(a,1),2*size(a,2)) :: temp  <------THIS LINE CAUSES PROBLEMS

integer:: i,j
i = 0 !<------- 
j = 0 !<-------DEBUG line stops here, showing i = 3734648 !VERY WEIRD!!!!!

invA(1,1) =0.0
invA(1,2) =0.0
invA(2,1) =0.0
invA(2,2) =0.0

end subroutine

end program 
```

这是一个非常直接的 FORTRAN 代码，但为什么我没有得到正确的 'i' 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:41:06.623

由于 Fortran 数组携带有关其自身大小的信息，因此更好的方法是让您开始您的子例程更像这样：

```
subroutine inversematrix(a, inva)
    ! ALWAYS include the next line within any scoping unit
    implicit none
    real, intent(in), dimension (:,:) :: a  ! no need to tell the compilers what the dims are
    real, intent(out), dimension (size(a,1),size(a,2)) :: inva 

    real, dimension (size(a,1),2*size(a,2)) :: temp 
```

要回答您的问题，我无法立即了解您的代码为什么不起作用以及为什么变量`i`不保留您分配给它的值。不知是否与子程序的接口相连。在现代 Fortran 中，当技术上可行时，确保编译器生成必要的例程接口总是一个好主意。实现这一点的一种方法是将所有例程放入模块中并*使用关联*它们，另一种方法是使用基本结构编写代码

```
program
! declarations
! executable statements
contains

subroutine ...
end subroutine

end program 
```

而不是

```
subroutine ...
end subroutine

program
! declarations
! executable statements
end program 
```

但我真的只是猜测。

使用`implicit none`并确保编译器生成例程接口；这些可能无法治愈您眼前的问题，但它们是很好的一般指导方针，将来会为您节省很多痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T21:48:48.980

英特尔编译器在优化过程中会做一些可能会影响调试器输出的事情：

1.  它重新排列语句的顺序，因此分配 j = 0 的行可能会在分配 i = 0 的行之前运行。

2.  它“优化”变量，不仅通过删除未使用的变量，而且通过将变量与未同时使用的其他变量组合起来。

这两者似乎都不可预测（至少对我而言）。因此，如果您已修复程序以使其具有正确的行为，并且打印该值会产生正确的答案，那么调试器可能仍会显示错误的值。您可以尝试关闭/关闭优化，看看会发生什么。

# javascript - 带有自定义 json 配置的 grunt 任务

> ID：14893420
> 
> 赞同：3
> 
> 时间：2013-02-15T11:10:24.193
> 
> 标签：javascript, json, coffeescript, gruntjs

我想创建某种任务，我可以从不同的 json 文件中读取自定义配置，并将咖啡源文件中的内容替换为 json 文件的内容，并连接源文件。

我的项目设置：

*   ./src

    *   文件 1.coffee
    *   文件 2.coffee
*   ./配置

    *   /文件夹1

        *   development.json（包含：{“key”：“value1”}
        *   production.json（包含：{“key”：“value2”}
    *   /文件夹2

        *   development.json（包含：{“key”：“value3”}
        *   production.json（包含：{“key”：“value4”}
*   ./dist

    *   包名.coffee
    *   包名.js

file1.coffee 包含

```
myVar = '@@putkeyhere'
version = '@@version'
... 
```

我已经为自己配置并运行了 grunt concat 任务：

```
concat: {
  dist: {
    src: ['<banner>', './src/*.coffee'],
    dest: './dist/<%= pkg.name %>.coffee'
  }
}, 
```

我有 grunt-replace 任务（当我在已经连接的文件上运行“grunt replace”时，版本等的替换已经开始工作了）

```
replace: {
  dist: {
    options: {
      variables: {
        'created': '<%= grunt.template.today("dd.mm.yyyy HH:MM:ss") %>',
        'environment': 'dev',
        'version': '<%= pkg.version %>'
      },
      prefix: '@@'
    },
    files: {
      'dist/': ['./dist/<%= pkg.name %>.coffee']
    }
  }
}, 
```

最后是咖啡编译任务：

```
coffee: {
  compile: {
    files: {
      './dist/<%= pkg.name %>.js': ['./dist/*.coffee']        
    }
  }
} 
```

所有任务都为自己工作，但我需要从 config-json 文件中读取内容并将内容替换为连接的咖啡文件，然后将所有文件编译为 js。

我尝试过这样的事情，但感觉不对：

```
grunt.registerTask('mytask', '', function (env) {

  env = env || 'development';
  if (env !== 'development' && env !== 'production') {
    grunt.log.error("'" + env + "' is not valid environment");
    return false;
  }

  var c = grunt.option('c');
  if(c) {

    // if i run the task "grunt mytask:production -c folder2 it should read
    // ./config/folder2/development.json
    // that works that way, but i dont think this is a good solution
    var config = grunt.file.readJSON('./config/' + c + '/' + env + '.json')

  } else {

     // here i need to iterate for all folders in ./config, and do stuff for all
  }

}); 
```

多任务是一个选项吗？但是如何从 config.json 文件中动态读取呢？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:07:36.500

我找到了一个插件，可以帮助你实现这一点 - [https://github.com/outaTiME/grunt-replace](https://github.com/outaTiME/grunt-replace)

# android - textview Android的多个超链接点击

> ID：14893421
> 
> 赞同：0
> 
> 时间：2013-02-15T11:10:29.490
> 
> 标签：android

我的数据库中有一个字符串，如下所示

```
Sring a = "Victory to the <a href='word1'>GOD<\/a>, renowned in <a href='word2'>all three worlds!<\/a>";
text1.setText(Html.fromHtml(a)); 
```

现在我需要两者的超链接 id (`word1`和`word2`)，这`link`将有助于设置另一个 textView 属性。谁能告诉我我该怎么做？或任何其他方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:48:30.153

我已经使用 Webview 而不是 textview 实现了这一点，并创建了自定义 webview 客户端来覆盖 url。

```
webview1.setWebViewClient(new myWebViewClient());
webview1.loadData(myHTMLStringWithHyperlinks, "text/html", "UTF-8");

private class myWebViewClient extends WebViewClient {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            Log.i(TAG, "Id of hyperlink text is: "+url);

            }

            return true;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:19:46.480

**使用 SubString 方法来识别您的 ID 对href='**位置的搜索。创建一个现在包含子字符串的临时变量：

```
"word1'>GOD<\/a>, renowned in <a href='word2'>all three worlds!<\/a>" 
```

然后从 temp-vars 第一个字符中搜索**' SubString 的位置，直到****'**的位置包含您的 ID

接下来你把这个 SubString 放到 temp-var 中：

```
>GOD<\/a>, renowned in <a href='word2'>all three worlds!<\/a>" 
```

现在您可以重复前面的步骤来接收第二个 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:30:35.893

Oki 这里是我目前想到的 2 个解决方案：

**1.实现自己的架构：**

您首先需要用您的自定义架构替换所有`http://`（或者`https//`，您捕获的 URL 架构）`customSchema://`：

```
a.replaceAll("[\\"\']{1}[a-zA-Z]+:\/\/[\\"\']{1}", "customSchema://"); 
```

（我不确定我的正则表达式，我只是写在这里）

然后你声明你的 Activity 可以在你的 AndroidManifest.xml 中处理这种模式：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="customSchema" />
</intent-filter> 
```

此时，将为每个单击的 customSchema://... URL 启动您的活动（即使在其他应用程序中）

您只需检索 Activity 上的 URL 并使用它做您想做的事情：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  setContentView(R.layout.main);

  // Get the intent that started this activity
  Intent intent = getIntent();
  Uri data = intent.getData();
} 
```

如果是您的 Activity 启动了点击，请参阅[onNewIntent](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)

**2.在我看来，第二种解决方案是最简单的：**

您将字符串拆分为单独的字符串，目标是在不同的 TextView 中隔离“word1”、“word2”，如下所示：

```
<TextView 1 (Victory to the) /><TexTview 2 (word1 GOD) /><TextView 3 (renowned in) /><TextView 4 (word2 all three worlds) /> 
```

您可以使用正则表达式轻松做到这一点

您可以在标签（`setTag()`）中将word1和word2设置为TextView 2和TextView 4，以便稍后检索

在您的 TextView 2 和 TextView 4 上注册一个 onClick 事件并在其中执行您想要的操作（在这里您可以获取您的标签 ( `getTag()`)

# android - 如何在android中使用应用程序打开用户个人资料Linkedin

> ID：14893422
> 
> 赞同：2
> 
> 时间：2013-02-15T11:10:29.390
> 
> 标签：android, linkedin, linkedin-j

我正在尝试使用带有 URL 或会员 ID 的 Android 应用程序打开 Linkedin 个人资料。
我试试这个：

```
Intent linkedinIntent = new Intent(Intent.ACTION_VIEW);
linkedinIntent.setClassName("com.linkedin.android", "com.linkedin.android.profile.ViewProfileActivity");
linkedinIntent.putExtra("memberId", <member id>);
startActivity(linkedinIntent); 
```

但这段代码只是打开了 Linkedin 应用程序。
如何打开特定的个人资料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-03T15:25:09.263

```
try {
          getPackageManager().getPackageInfo("com.linkedin.android", 0);
          intent = new Intent(Intent.ACTION_VIEW, Uri.parse("linkedin://profile/yourID"));
    }catch (Exception e) {
            showerror(); // handle exception
    }finally {
        startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-08T14:27:01.107

仅仅作为网站导航到链接就可以让用户在 LinkedIn 应用程序和网络浏览器之间进行选择。和：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse(url));
context.startActivity(intent); 
```

> 在 Android API 28 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:20:08.143

根据 LinkedIn 开发者论坛上的帖子，他们的 API 没有公开此功能。

资料来源：

1.  [http://developer.linkedin.com/forum/android-intent](http://developer.linkedin.com/forum/android-intent)
2.  [http://developer.linkedin.com/forum/mobile-user-profile-url](http://developer.linkedin.com/forum/mobile-user-profile-url)

但是，有一种未记录的方法似乎有效。自然，他们可能会疏忽将其开放使用，并且使用它自然会伴随警告*，因为它没有记录，它可能会或可能不会改变。如果它确实发生了变化，它可能会破坏您的应用程序的功能*

话虽如此，LinkedIn 的一名员工在这里提出的建议：[https](https://developer.linkedin.com/comment/3614#comment-3614) ://developer.linkedin.com/comment/3614#comment-3614已经披露了上述未记录的功能。

```
http://www.linkedin.com/x/profile/{consumer-key}/{member-token} 
```

祝你好运，希望LinkedIn 能够通过他们的API 提供这样一个功能（简单但不知何故仍然被忽略）。

# google-earth - 地球插件更新

> ID：14893430
> 
> 赞同：0
> 
> 时间：2013-02-15T11:10:56.937
> 
> 标签：google-earth, google-earth-plugin

有什么方法可以确保用户使用“足够”最新版本的 Google 地球插件查看我的嵌入 html 的 GE 场景？

并可能在他的机器上启动更新？

示例 - 使用 `_...ge.getPluginVersion()..._`它检测到用户有一个“过时的”（无论它意味着什么，比如说 5.xx）GE 插头版本。采取什么行动/在哪里重定向用户以更新插件？

逻辑选择 - [http://www.google.com/intl/en_us/earth/explore/products/plugin.html](http://www.google.com/intl/en_us/earth/explore/products/plugin.html)*只是* 表明安装了一个插件，但似乎没有提供更新它的选项......

对不起，可能是微不足道的问题，但到目前为止没有找到答案......

问候

我知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:28:38.010

如您所述，API 允许您在客户端 Web 浏览器中检测插件的版本号，您可以弹出一个窗口，其中包含 Google 地球/插件版本太旧的消息，并带有升级链接。

但是您不能使用 Google Earth API 从外部网页强制或启动更新。这必须由插件本身完成。

您的 html 嵌入式 GE 应用程序只能响应插件的版本并采取相应的行动。例如，如果插件真的很旧，例如 v5.1，则不支持 gx:Track 扩展。就像运行旧 Web 浏览器的用户一样，您会发现一些用户仍在他们的浏览器中运行 GE 5.x 和 4.x，并且 Web 定义的 GE API Web 应用程序必须适应相应使用的 KML 功能。

您的 Web 应用程序可能会遇到使用 GE 插件的用户，该插件早至 GE 5.0，但绝大多数是 6.x 和 7.0。

# jquery - 如何创建保持打开状态的 JQuery 手风琴导航？

> ID：14893433
> 
> 赞同：0
> 
> 时间：2013-02-15T11:11:13.733
> 
> 标签：jquery, navigation, jquery-ui-accordion

我正在尝试创建一个手风琴导航菜单，当我单击某个页面时该菜单保持打开状态。不幸的是，在尝试了我在网上找到的解决方案后，我仍然无法打开它。

这是我的 jQuery ：

```
$(function() {
    var icons = {
    header: "ui-icon-circle-arrow-e",
    activeHeader: "ui-icon-circle-arrow-s"
    };

    $( "#accordion" ).accordion({
    header: "h3",
    navigation: true,
    heightStyle: "content",
    icons: icons
    });
    $( "#toggle" ).button().click(function() {
    if ( $( "#accordion" ).accordion( "option", "icons" ) ) {
    $( "#accordion" ).accordion( "option", "icons", null );
    } else {
    $( "#accordion" ).accordion( "option", "icons", icons );
    }
    });
}); 
```

这是我的菜单：

```
<div id="accordion" style="float:left;">
  <h3>Datamarts & Logs</h3>
  <div>
    <a href="index.php"><div class="left_menu_button">Registered instances</div></a>
    <a href="add_instance.php"><div class="left_menu_button">Add instance</div></a>
    <a href="databases_info.php"><div class="left_menu_button">Databases info & logs</div></a>
  </div>
  </div>
  <h3>Administration</h3>
  <div>
    <a href="operations_history.php"><div class="left_menu_button">Operations history</div></a>
    <a href="users.php"><div class="left_menu_button">Users</div></a>
  </div>
  <h3>Tools</h3>
  <div>
    <a href="links.php"><div class="left_menu_button"><span>Links</span></div></a>
        <a href="projects.php"><div class="left_menu_button"><span>Projects</span></div></a>       
  </div>
</div> 
```

我尝试将#id 添加到 h3 或链接末尾的锚点，但它仍然不起作用。但是，我确实有一个功能可以将每个锚点与 url 进行比较，但不知道如何在菜单中使用它。

我真的很感激在这个问题上的一些帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:17:04.707

看来你有一个额外的

```
</div> 
```

请删除它并重试。通常这种小问题会导致手风琴无法正常工作或根本无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:04:26.527

我想通了...我必须使用 $('#accordion').accordion('option', 'active', 3); 显然 3 是 H3 的编号而不是锚点，所以我使用的 4 没有对应任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T11:08:55.580

如果您使用的是 html5，您可以将手风琴索引存储在`localStorage["key"]`进入新页面之前。该`localStorage["key"]`作品用作持久存储。

```
localStorage["last_opened_index"] = accordionIndex; 
```

然后在下一页：

```
var acc_index = = localStorage["last_opened_index"] !== undefined ? localStorage["last_opened_index"] : localStorage["last_opened_index"] = 0;

$('#accordion').accordion('option', 'active', acc_index); 
```

如果您有比这更好的方法，请评论如何，如果您必须补偿它，我会添加投票：D

# xml - XML schema still allowing duplicate id's with unique

> ID：14893435
> 
> 赞同：6
> 
> 时间：2013-02-15T11:11:21.617
> 
> 标签：xml, xsd

I am trying to design an XML schema for books where a unique ID needs to be specified for each book entry. However it just doesn't seem to work. Below is the XSD i am using,

```
<?xml version="1.0"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified">

  <xs:element name="BookShelf">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Description" type="xs:string" minOccurs="0"/>
        <xs:element name="Shelf" type="ShelfType" minOccurs="1" maxOccurs="10"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="ShelfType">
    <xs:sequence>
      <xs:element ref="Book" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

<xs:element name="Book">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Title" type="xs:token"/>
      <xs:element name="Language" type="xs:language"/>
    </xs:sequence>
    <xs:attribute name="id" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:unique name="unique-bookId">
    <xs:selector xpath="Book"/>
    <xs:field xpath="@id"/>
  </xs:unique>
</xs:element>
</xs:schema> 
```

The XML I am trying to validate with this is,

```
<?xml version="1.0"?>

<BookShelf>
    <Description>My bookshelf</Description>
    <Shelf>
        <Book id="1">
            <Title>Seitsemän veljestä</Title>
            <Language>fi</Language>
        </Book>
        <Book id="1">
            <Title>Another title</Title>
            <Language>en</Language>
        </Book>
    </Shelf>
</BookShelf> 
```

which is validating fine even though it should not (I've used the same id for 2 entries). I'm pretty new at XML and would appreciate if someone could please point out what I am doing wrong here?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T11:18:38.620

You've got the `<xs:unique>` in the wrong place - it needs to be inside the definition of the *ancestor* element within which the `Book` elements should be unique, not in the `Book` element definition itself. The following would force Book ids to be unique within each shelf, but would allow the same ID on different shelves:

```
 <xs:element name="BookShelf">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Description" type="xs:string" minOccurs="0"/>
        <xs:element name="Shelf" type="ShelfType" minOccurs="1" maxOccurs="10">
          <xs:unique name="unique-bookId">
            <xs:selector xpath="Book"/><!-- selects books on this shelf -->
            <xs:field xpath="@id"/>
          </xs:unique>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

If instead you want the IDs to be globally unique across all shelves then put the unique constraint at the `BookShelf` level and adjust the selector appropriately:

```
 <xs:element name="BookShelf">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Description" type="xs:string" minOccurs="0"/>
        <xs:element name="Shelf" type="ShelfType" minOccurs="1" maxOccurs="10"/>
      </xs:sequence>
    </xs:complexType>
    <xs:unique name="unique-bookId">
      <xs:selector xpath="Shelf/Book"/><!-- selects books on all shelves -->
      <xs:field xpath="@id"/>
    </xs:unique>
  </xs:element> 
```

For future reference, note that if your schema had a `targetNamespace` then those selectors would not work as-is, because unprefixed names in selector XPaths always mean "no namespace". You would need to add `xmlns:tns="<target namespace URI>"` to your `xs:schema` element and then use a selector of `tns:Shelf/tns:Book`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:22:49.193

Do you specifically need to use digits as ID values? If not, one possibility is using `xs:ID` as the `id` attribute type instead of `xs:string`:

```
<xs:attribute name="id" type="xs:ID" use="required"/> 
```

That way only [unique XML identifiers](http://www.w3.org/TR/2004/WD-xml-id-20040407/) are allowed as values of the `id` attribute. A valid XML identifier can't start with a digit, however, so you'll have to change your ID type to something like `id-1`, for example.

# shell - UNIX shell：按字长和忽略大小写的 ASCII 顺序对字符串进行排序

> ID：14893436
> 
> 赞同：7
> 
> 时间：2013-02-15T11:11:22.763
> 
> 标签：shell, unix, sorting, command-line, awk

我想使用 unix 命令按长度排序字符串，然后按 ASCII 顺序（大小写相等）。

```
string = [a-z][A-Z][0-9] 
```

例如：

```
"A a b B cc ca cd" : 
=> A a b B
=> ca cc cd

"Hello stackoverflow how are you today"
=> are how you
=> Hello today
=> stackoverflow 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:29:24.787

我写了一条丑陋的（也许）`awk|sort|awk`线来完成这项工作。它也可以在一个 awk 进程中完成，但是，我有点懒，只是去肮脏和快速的方式。

```
echo yourStr|awk '{
split($0,o); for(x in o) print length(o[x]),o[x]}'|sort -n|awk '!p{printf $2;p=$1;next}$1==p{printf " "$2}$1!=p{printf "\n"$2;p=$1}' 
```

举个例子：

```
"Hello stackoverflow how are you today foo bar xoo yoo ooo" 
```

尝试上面的行：

```
kent$  echo "Hello stackoverflow how are you today foo bar xoo yoo ooo"|awk '{
split($0,o); for(x in o) print length(o[x]),o[x]}'|sort -n|awk '!p{printf $2;p=$1;next}$1==p{printf " "$2}$1!=p{printf "\n"$2;p=$1}'
are bar foo how ooo xoo yoo you
Hello today
stackoverflow 
```

用你的第一个例子测试：

```
kent$  echo "A a b B cc ca cd" |awk '{
pipe quote> split($0,o); for(x in o) print length(o[x]),o[x]}'|sort -n|awk '!p{printf $2;p=$1;next}$1==p{printf " "$2}$1!=p{printf "\n"$2;p=$1}' 
a A b B
ca cc cd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:55:46.867

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    IGNORECASE=1
}

{
    for(i=1;i<=NF;i++) {
        a[length($i)][$i]++
    }
}

END {

    for (i in a) {
        b[x++] = i + 0
    }

    n = asort(b)

    for (j=1;j<=n;j++) {

        m = asorti(a[b[j]],c)

        for (k=1;k<=m;k++) {

            for (l=1;l<=a[b[j]][c[k]];l++) {
                r = (r ? r FS : "") c[k]
            }

            s = (s ? s FS : "") r
            r = ""
        }

        print s
        s = ""
    }
} 
```

使用您的输入的结果，串联：

```
A a B b
ca cc cd
are how you
Hello today
stackoverflow 
```

或者，这是单线：

```
awk '{ for(i=1;i<=NF;i++) a[length($i)][$i]++ } END { for (i in a) b[x++] = i + 0; n = asort(b); for (j=1;j<=n;j++) { m = asorti(a[b[j]],c); for (k=1;k<=m;k++) { for (l=1;l<=a[b[j]][c[k]];l++) r = (r ? r FS : "") c[k]; s = (s ? s FS : "") r; r = "" } print s; s="" } }' IGNORECASE=1 file 
```

# php - HTTP_USER_AGENT 未设置 - 正常吗？或者可能是机器人？

> ID：14893437
> 
> 赞同：4
> 
> 时间：2013-02-15T11:11:26.557
> 
> 标签：php, user-agent

我正在**征求您**对此的意见/经验。

我们的 CMS 正在从 HTTP_USER_AGENT 字符串中获取信息。最近我们在代码中发现了一个错误——忘记检查 HTTP_USER_AGENT 是否存在（这是可能的，但老实说：我们只是跳过了它，没想到会发生）——这些情况导致了错误。所以我们已经纠正了它，并在那里安装了一个跟踪：如果没有设置 HTTP_USER_AGENT，则会向我们的跟踪系统发送警报。

现在我们有来自过去几个月的许多网站的数据/统计数据。现在我们的统计数据显示，这种情况**非常罕见**。~ 0.05-0.1%

另一个有趣的观察：**这些请求是单一的**. 没有发现这个“用户”在同一个会话中有多个浏览量的情况......

这迫使我们思考......我们应该将这些请求视为机器人吗？然后简单地阻止它们......或者那将是一个严重的错误？
Googlebot 和其他“好机器人”总是发送 HTTP_USER_AGENT 信息。

我知道防火墙或代理服务器可能会更改（或删除）此用户代理信息。但是根据我们的统计数据，我无法澄清这一点……

您的经历是什么？这里还有其他人对此主题进行过任何研究吗？

**我在 stackoverflow 上找到的其他帖子只是接受了“可能未发送此信息”这一事实。但是我们为什么不质疑一下呢？**真的正常吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:35:24.360

对于真正的用户，我会考虑缺少用户代理异常，但这仍然是一种[罕见的]可能性，这可能是由防火墙、代理或隐私软件剥离用户代理引起的。

缺少用户代理的请求很可能是机器人或脚本（不一定是搜索引擎爬虫）。虽然你当然不能肯定地说。

其他可能表明机器人/脚本的因素：

*   只请求页面本身，无法请求页面上的图片、CSS、Javascript等资源
*   来自页面页面的请求之间的时间间隔非常短（例如在同一秒内）。
*   未能在应设置 cookie 的后续请求中发送 cookie 或会话 ID，但请记住，真正的用户可能已禁用 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:59:31.900

所以，让我们根据反应总结一些事情。

可能最好的方法是将所有可能性结合起来。:-)

如果这是第一个（在会话中 - 就足够了）传入请求，我们可以根据多个标准立即检查请求。在服务器端，我们（可能）有一个动态数据库（由用户代理信息字符串/IP 地址构建）我们可以通过镜像公共数据库来创建这个数据库。（是的，互联网上有几个公共的、定期更新的数据库可用于检查机器人。它们不仅包含用户代理字符串，还包含源 IP）

如果我们有命中，我们可以使用数据库快速检查它。如果该过滤器显示“OK”，我们可能会将其标记为受信任的机器人并处理请求。

如果请求中没有可用的用户代理信息，我们就会遇到问题......（实际上这是我问题的起源）。如果我们没有用户代理信息怎么办？:-)

我们需要在这里做出决定。

简单地拒绝这些请求的最简单方法 - 认为这是不正常的。当然，从这一点来看，我们可能会失去真正的用户。但根据我们的统计数据，这并不是一个很大的风险——我认为。也可以发回一条人类可读的消息“对不起，但您的浏览器不发送用户代理信息，因此您的请求被拒绝” - 或其他任何内容。如果这是一个机器人，无论如何都不会有人阅读。如果这是一个人形机器人，我们可以给她/他有用的指示。

如果我们决定不拒绝这些请求，我们可能会在此处启动 MrCode 建议的后跟踪机制。好的，我们提供该请求，但尝试开始收集行为信息。如何？例如，记下 db 中的 IP 地址（灰名单），并在响应中传回一个虚假的 CSS 文件 - 这将不是由网络服务器静态提供，而是由我们的服务器端语言提供：PHP、Java 或我们正在使用的任何语言。如果这是一个机器人，它就不太可能尝试下载 CSS 文件……而如果这是一个真正的浏览器，它肯定会这样做——可能在很短的时间内（例如 1-2 秒）。我们可以轻松地继续处理提供虚假 CSS 文件的操作。只需在灰名单数据库中进行 IP 查找，如果我们判断行为正常，我们可以将该 IP 地址列入白名单（例如..）
如果我们再次收到来自灰名单 IP 地址的请求
a) 在 1-2 秒的时间范围内：我们可能会延迟我们的响应几秒钟（等待并行线程，也许它会同时下载假 CSS... )，并定期检查我们的灰名单数据库以查看 IP 地址是否消失
b) 在 1-2 秒的时间范围内：我们只是拒绝响应

所以，类似的事情......听起来怎么样？

但这还不完美。因为在这个机制中，我们为潜在的机器人提供了一个真实的页面......我认为我们也可以避免这种情况。我们可能会为第一个请求发回一个空的、稍微延迟的重定向页面……这可以通过 HTML HEAD 部分轻松完成。或者 wwe 也可以为此使用 Javascript，这又是一个很棒的机器人过滤器......但也可以是真正的用户过滤器，关闭 Javascript （我不得不说，如果我有一个没有用户代理字符串的访问者并且被切换关闭 Javascript，那真的应该下地狱了……）当然，我们可以在页面上添加一些文本“你很快就会被重定向”或者让潜在的真实用户平静下来。当此页面等待重定向发生时，真正的浏览器将下载虚假 CSS - 因此 IP 将在重定向发生时被列入白名单，瞧

# iphone - FBSDK 工作完美，但登录并查看重新加载时应用程序崩溃

> ID：14893440
> 
> 赞同：0
> 
> 时间：2013-02-15T11:11:37.377
> 
> 标签：iphone, ios, facebook, facebook-graph-api, fbconnect

我已经实现了 Facebook SDK 3.0。以下代码完美运行，但**仅当用户登录 Facebook**时才会出现错误：

**重现错误：**

1.  用户通过 fbView.m 类登录并可以发布状态
2.  用户按下导航栏后退按钮 -> DetailViewController 已加载
3.  按下 loadFB 按钮返回 FbView
4.  **仅当用户登录 Facebook 时应用**程序崩溃

 **> 有人知道这个问题的解决方案吗？也许与登录缓存有关？...有人吗？

```
-(void)loadFB{

NSLog(@"test");

FbView *f = [[[FbView alloc] initWithNibName:@"FbView" bundle:[NSBundle mainBundle]]retain];
f.RSstatus =  self.titleDV;
f.RSpostURL = self.postURL;

// Pass the selected object to the new view controller.
[self.navigationController pushViewController:FbView animated:YES];
[FbView release]; 
```

}

```
 //  FbView.m
#import "FbView.h"
#import "DetailViewController.h"
#import "AppDelegate.h"

@interface FbView () <FBLoginViewDelegate>

@property (strong, nonatomic) IBOutlet FBProfilePictureView *profilePic;
@property (strong, nonatomic) IBOutlet UIButton *buttonPostStatus;
@property (strong, nonatomic) IBOutlet UIButton *buttonPostPhoto;
@property (strong, nonatomic) IBOutlet UIButton *buttonPickFriends;
@property (strong, nonatomic) IBOutlet UIButton *buttonPickPlace;
@property (strong, nonatomic) IBOutlet UILabel *labelFirstName;
@property (strong, nonatomic) id<FBGraphUser> loggedInUser;

- (IBAction)postStatusUpdateClick:(UIButton *)sender;
- (IBAction)postPhotoClick:(UIButton *)sender;
- (IBAction)pickFriendsClick:(UIButton *)sender;
- (IBAction)pickPlaceClick:(UIButton *)sender;

- (void)showAlert:(NSString *)message
           result:(id)result
            error:(NSError *)error;

@end

@implementation FbView

@synthesize buttonPostStatus = _buttonPostStatus;
@synthesize buttonPostPhoto = _buttonPostPhoto;
@synthesize buttonPickFriends = _buttonPickFriends;
@synthesize buttonPickPlace = _buttonPickPlace;
@synthesize labelFirstName = _labelFirstName;
@synthesize loggedInUser = _loggedInUser;
@synthesize profilePic = _profilePic;
@synthesize RSstatus,RSpostURL;

- (void)viewWillDisappear:(BOOL)animated
{
        [FBSession.activeSession close];  
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
        [FBSession.activeSession close];  
    [super viewDidDisappear:animated];
}

- (void)viewDidLoad {    
    [super viewDidLoad];

    // Create Login View so that the app will be granted "status_update" permission.
    FBLoginView *loginview = 
    [[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"status_update"]];

    loginview.frame = CGRectOffset(loginview.frame, 5, 5);
    loginview.delegate = self;

    [self.view addSubview:loginview];

    [loginview sizeToFit];

    [self check];
}

-(void)check{

    AppDelegate *del=[[AppDelegate alloc]init];

    if(!FBSession.activeSession == nil){

        NSLog(@"%@",FBSession.activeSession );
    } else {

        NSLog(@"nee");

    }

}

- (void)viewDidUnload {
    self.buttonPickFriends = nil;
    self.buttonPickPlace = nil;
    self.buttonPostPhoto = nil;
    self.buttonPostStatus = nil;
    self.labelFirstName = nil;
    self.loggedInUser = nil;
    self.profilePic = nil; 
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {
    // first get the buttons set for login mode
    self.buttonPostPhoto.enabled = YES;
    self.buttonPostStatus.enabled = YES;
    self.buttonPickFriends.enabled = YES;
    self.buttonPickPlace.enabled = YES;
}

- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {
    // here we use helper properties of FBGraphUser to dot-through to first_name and
    // id properties of the json response from the server; alternatively we could use
    // NSDictionary methods such as objectForKey to get values from the my json object
    self.labelFirstName.text = [NSString stringWithFormat:@"Hello %@!", user.first_name];
    // setting the profileID property of the FBProfilePictureView instance
    // causes the control to fetch and display the profile picture for the user
    self.profilePic.profileID = user.id;
    self.loggedInUser = user;
}

- (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView {
    self.buttonPostPhoto.enabled = NO;
    self.buttonPostStatus.enabled = NO;
    self.buttonPickFriends.enabled = NO;
    self.buttonPickPlace.enabled = NO;

    self.profilePic.profileID = nil;            
    self.labelFirstName.text = nil;
}

// Post Status Update button handler
- (IBAction)postStatusUpdateClick:(UIButton *)sender {

    // Post a status update to the user's feed via the Graph API, and display an alert view 
    // with the results or an error.

    NSString *message = [NSString stringWithFormat:@"%@ \n%@",RSstatus,RSpostURL];

    [FBRequestConnection startForPostStatusUpdate:message
                                completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                                  [self showAlert:message result:result error:error];
                                    self.buttonPostStatus.enabled = YES;
                                }];

    self.buttonPostStatus.enabled = NO;       
}

// Post Photo button handler
- (IBAction)postPhotoClick:(UIButton *)sender {

    // Just use the icon image from the application itself.  A real app would have a more 
    // useful way to get an image.
    UIImage *img = [UIImage imageNamed:@"Icon-72@2x.png"];

    [FBRequestConnection startForUploadPhoto:img 
                           completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                               [self showAlert:@"Photo Post" result:result error:error];
                               self.buttonPostPhoto.enabled = YES;
                           }];

    self.buttonPostPhoto.enabled = NO;
}

// Pick Friends button handler
- (IBAction)pickFriendsClick:(UIButton *)sender {
    FBFriendPickerViewController *friendPickerController = [[FBFriendPickerViewController alloc] init];
    friendPickerController.title = @"Pick Friends";
    [friendPickerController loadData];

    // Use the modal wrapper method to display the picker.
    [friendPickerController presentModallyFromViewController:self animated:YES handler:
     ^(FBViewController *sender, BOOL donePressed) {
         if (!donePressed) {
             return;
         }
         NSString *message;

         if (friendPickerController.selection.count == 0) {
             message = @"<No Friends Selected>";
         } else {

             NSMutableString *text = [[NSMutableString alloc] init];

             // we pick up the users from the selection, and create a string that we use to update the text view
             // at the bottom of the display; note that self.selection is a property inherited from our base class
             for (id<FBGraphUser> user in friendPickerController.selection) {
                 if ([text length]) {
                     [text appendString:@", "];
                 }
                 [text appendString:user.name];
             }
             message = text;
         }

         [[[UIAlertView alloc] initWithTitle:@"You Picked:" 
                                     message:message 
                                    delegate:nil 
                           cancelButtonTitle:@"OK" 
                           otherButtonTitles:nil] 
          show];
     }];
}

// Pick Place button handler
//- (IBAction)pickPlaceClick:(UIButton *)sender {
//    FBPlacePickerViewController *placePickerController = [[FBPlacePickerViewController alloc] init];
//    placePickerController.title = @"Pick a Seattle Place";
//    placePickerController.locationCoordinate = CLLocationCoordinate2DMake(47.6097, -122.3331);
//    [placePickerController loadData];
//    
//    // Use the modal wrapper method to display the picker.
//    [placePickerController presentModallyFromViewController:self animated:YES handler:
//     ^(FBViewController *sender, BOOL donePressed) {
//         if (!donePressed) {
//             return;
//         }
//       
//         [[[UIAlertView alloc] initWithTitle:@"You Picked:" 
//                                     message:placePickerController.selection.name 
//                                    delegate:nil 
//                           cancelButtonTitle:@"OK" 
//                           otherButtonTitles:nil] 
//          show];
//     }];
//}

// UIAlertView helper for post buttons
- (void)showAlert:(NSString *)message
           result:(id)result
            error:(NSError *)error {

    NSString *alertMsg;
    NSString *alertTitle;
    if (error) {
        alertMsg = error.localizedDescription;
        alertTitle = @"Error";
    } else {
        NSDictionary *resultDict = (NSDictionary *)result;
        alertMsg = [NSString stringWithFormat:@"Successfully posted '%@'.\nPost ID: %@", 
                    message, [resultDict valueForKey:@"id"]];
        alertTitle = @"Success";
    }

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:alertTitle
                                                        message:alertMsg
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
    [alertView show];
}

@end 
```

![在此处输入图像描述](../Images/de217afb33f90f2ee332920b07dfb940.png) ![在此处输入图像描述](../Images/eff47a4a54e4bf21842dfd7183990b37.png)**

# android - 突然我的应用程序上的所有数据库功能都失败了

> ID：14893443
> 
> 赞同：0
> 
> 时间：2013-02-15T11:11:42.250
> 
> 标签：android

突然，所有数据库功能都无法在我的应用程序上运行。错误始终是`NullPointer exception`并指向来自 的不同方法`dataObjectsProvider class`，具体取决于使用的函数。例如，当尝试在 上插入值时`CreateDataObjectsMethod`，当尝试清空/删除数据库到`deleteObjectsMethod`. `onClick`所有这些功能在我上次关闭 eclipse 时都有效，我很确定除了我试图让它工作的更新按钮的方法之外，我没有改变其他任何东西。这不能解释为什么所有其他功能都不起作用。你能检查一下我是否不小心犯了一个严重的错误，我没有看到？

**DataObjectsProvider 类：**

```
public class DataObjectsProvider {

  // Database fields
  private SQLiteDatabase database;
  private DbHelper dbHelper;
  private String[] allColumns = { DbHelper.COLUMN_ID,
      DbHelper.COLUMN_SONGNAME, DbHelper.COLUMN_SONGARTIST, 
      DbHelper.COLUMN_SONGGENRE };

  public DataObjectsProvider (Context context) {
        dbHelper = new DbHelper(context);
      }

  public void open() throws SQLException {
        dbHelper.getWritableDatabase();
      }

  public void close() {
        dbHelper.close();
      }

  public DataObjects createDataObjects (String songName, String songArtist, 
          String songGenre) {
       dbHelper.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(DbHelper.COLUMN_SONGNAME, songName);
        values.put(DbHelper.COLUMN_SONGARTIST, songArtist);
        values.put(DbHelper.COLUMN_SONGGENRE, songGenre);
        long insertId = database.insert(DbHelper.TABLE_SONGS, null,
                values);
            Cursor cursor = database.query(DbHelper.TABLE_SONGS,
                allColumns, DbHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            DataObjects newDobject = cursorToDataObjects(cursor);
            cursor.close();
            return newDobject;

      }

  public Cursor fechAllDobjects(){

      Cursor mCursor = database.query(DbHelper.TABLE_SONGS, 
              new String[] {DbHelper.COLUMN_ID,
              DbHelper.COLUMN_SONGNAME, DbHelper.COLUMN_SONGARTIST, 
              DbHelper.COLUMN_SONGGENRE}, 
                null, null, null, null, null);
      if (mCursor != null) {
           mCursor.moveToFirst();
          }
          return mCursor;
  }

  public Cursor fechDobjectsByName(String inputText) throws SQLException {

      Cursor mCursor = null;
      if (inputText == null  ||  inputText.length () == 0)  {
       mCursor = database.query(DbHelper.TABLE_SONGS, 
         new String[] {DbHelper.COLUMN_ID,
         DbHelper.COLUMN_SONGNAME, DbHelper.COLUMN_SONGARTIST, 
         DbHelper.COLUMN_SONGGENRE}, 
         null, null, null, null, null);

      }
      else {
       mCursor = database.query(true, DbHelper.TABLE_SONGS, 
         new String[] {DbHelper.COLUMN_ID,
         DbHelper.COLUMN_SONGNAME, DbHelper.COLUMN_SONGARTIST, 
         DbHelper.COLUMN_SONGGENRE}, 
         DbHelper.COLUMN_SONGNAME + " like '%" + inputText + "%'", null,
         null, null, null, null);
      }
      if (mCursor != null) {
       mCursor.moveToFirst();
      }
      return mCursor;
  }

     /* public void deleteDobjects(DataObjects dobjects) {
            long id = dobjects.getId();
            database.delete(DbHelper.TABLE_SONGS, DbHelper.COLUMN_ID
                + " = " + id, null);

      }*/
      public void DeleteItem(long l)
        {
    dbHelper.getWritableDatabase();
    String query = "DELETE FROM songs WHERE _id="+l;
    database.execSQL(query);
        }

      public void UpdateItem(int id, String songName, String songArtist, String songGenre) {
          dbHelper.getWritableDatabase();
          ContentValues values = new ContentValues();
          values.put(DbHelper.COLUMN_SONGNAME, songName);
          values.put(DbHelper.COLUMN_SONGARTIST, songArtist);
          values.put(DbHelper.COLUMN_SONGGENRE, songGenre);
          database.update(DbHelper.TABLE_SONGS, values, DbHelper.COLUMN_ID +"="+id, null);
      }

      public void deleteAllDobjects() {
          dbHelper.getWritableDatabase();
          database.delete(DbHelper.TABLE_SONGS, null, null);
      }

      public List<DataObjects> getAlldobjects() {
            List<DataObjects> dobjects = new ArrayList<DataObjects>();

            Cursor cursor = database.query(DbHelper.TABLE_SONGS,
                allColumns, null, null, null, null, null); 

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              DataObjects dobject = cursorToDataObjects(cursor);
              dobjects.add(dobject);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
            cursor.close();
            return dobjects;

      }

    private DataObjects cursorToDataObjects(Cursor cursor) {
        DataObjects dobject = new DataObjects();
        dobject.setId(cursor.getLong(0));
        dobject.setSongName(cursor.getString(1));
        dobject.setSongArtist(cursor.getString(2));
        dobject.setSongGenre(cursor.getString(3));
        return dobject;
    } 
```

}

**数据库助手类：**

```
public class DbHelper extends SQLiteOpenHelper {

      public static final String TABLE_SONGS = "songs";
      public static final String COLUMN_ID = "_id";
      public static final String COLUMN_SONGNAME = "songname";
      public static final String COLUMN_SONGARTIST = "artist";
      public static final String COLUMN_SONGGENRE = "genre";

      private static final String DATABASE_NAME = "songsdb.db";
      private static final int DATABASE_VERSION = 1;

      // Database creation sql statement
      private static final String DATABASE_CREATE = "create table "
          + TABLE_SONGS + "(" 
          + COLUMN_ID + " integer primary key autoincrement, " 
          + COLUMN_SONGNAME + "," 
          + COLUMN_SONGARTIST + ","
          + COLUMN_SONGGENRE + ");";

      public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

      @Override
      public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
      }

      @Override
      public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
        Log.w(DbHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        database.execSQL("DROP TABLE IF EXISTS " + TABLE_SONGS);
        onCreate(database);
      }
} 
```

删除数据库日志：

```
02-15 13:33:13.158: W/dalvikvm(1966): threadid=1: thread exiting with uncaught exception (group=0x40c931f8)
02-15 13:33:13.168: E/AndroidRuntime(1966): FATAL EXCEPTION: main
02-15 13:33:13.168: E/AndroidRuntime(1966): java.lang.NullPointerException
02-15 13:33:13.168: E/AndroidRuntime(1966):     at com.d69.dancesongsdb.DataObjectsProvider.deleteAllDobjects(DataObjectsProvider.java:113)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at com.d69.dancesongsdb.MainActivity$3.onClick(MainActivity.java:102)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at android.os.Looper.loop(Looper.java:137)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at java.lang.reflect.Method.invokeNative(Native Method)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at java.lang.reflect.Method.invoke(Method.java:511)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
02-15 13:33:13.168: E/AndroidRuntime(1966):     at dalvik.system.NativeStart.main(Native Method) 
```

插入数据日志：

```
02-15 13:35:36.457: W/dalvikvm(2104): threadid=1: thread exiting with uncaught exception (group=0x40c931f8)
02-15 13:35:36.477: E/AndroidRuntime(2104): FATAL EXCEPTION: main
02-15 13:35:36.477: E/AndroidRuntime(2104): java.lang.NullPointerException
02-15 13:35:36.477: E/AndroidRuntime(2104):     at com.d69.dancesongsdb.DataObjectsProvider.createDataObjects(DataObjectsProvider.java:39)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at com.d69.dancesongsdb.MainActivity$2.onClick(MainActivity.java:66)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at android.view.View.performClick(View.java:3511)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at android.view.View$PerformClick.run(View.java:14105)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at android.os.Handler.handleCallback(Handler.java:605)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at android.os.Looper.loop(Looper.java:137)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at java.lang.reflect.Method.invokeNative(Native Method)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at java.lang.reflect.Method.invoke(Method.java:511)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
02-15 13:35:36.477: E/AndroidRuntime(2104):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:41:51.720

您有几行代码：

```
dbHelper.getWritableDatabase(); 
```

现在，这实际上不会做任何事情。相反，我认为你想这样做：

```
database = dbHelper.getWritableDatabase(); 
```

没有那条线，`database`当`null`你使用它时`createDataObjects`，就会导致`NullPointerException`.

我计算了至少 5 个发生这种情况的实例，因此请确保将它们全部更改。

# c# - 如何首先在实体框架代码中为每种类型配置多个对象集

> ID：14893446
> 
> 赞同：7
> 
> 时间：2013-02-15T11:11:47.367
> 
> 标签：c#, entity-framework, ado.net, ef-code-first, entity-framework-5

我正在使用`Entity Framework 5 code first`. 在我的数据库中，我有 2 个表，`AvailPayPeriods`并且`AvailPayPeriodsWeekly`. 它们看起来都一样：

```
Period datetime not null 
```

因为这 2 个表本质上是相同的，所以我决定创建以下类来表示 2 个中的 1 个：

```
public class PayPeriod : IEntity
{
     public int Id { get; set; }

     public DateTime Period { get; set; }
} 
```

我正在努力配置 2。我的数据库上下文类中有以下内容：

```
public DbSet<PayPeriod> WeeklyPayPeriods { get; set; }
public DbSet<PayPeriod> MonthlyPayPeriods { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
     modelBuilder.Configurations.Add(new WeeklyPayPeriodConfiguration());
     // Haven't yet created the configuration file for monthly pay periods
} 
```

我的`WeeklyPayPeriodConfiguration`班级：

```
class WeeklyPayPeriodConfiguration : EntityTypeConfiguration<PayPeriod>
{
     internal WeeklyPayPeriodConfiguration()
     {
          this.ToTable("AvailPayPeriodsWeekly");
     }
} 
```

当我调用我的存储库以取回每周支付期时，我收到以下错误：

```
Multiple object sets per type are not supported. The object sets 'WeeklyPayPeriods' and 'MonthlyPayPeriods' can both contain instances of type 'ePaySlips.DomainModel.Entities.PayPeriod'. 
```

如何将 2 映射到各自的表？

我是否应该创建单独的名为`WeeklyPayPeriod`and的类`MonthlyPayPeriod`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T12:56:08.057

您可以添加以下类：

```
public class MonthlyPayPeriod : PayPeriod
{

}

public class WeeklyPayPeriod : PayPeriod
{

} 
```

并将您的 DbContext 修改为：

```
public DbSet<WeeklyPayPeriod> WeeklyPayPeriods { get; set; }
public DbSet<MnthlyPayPeriod> MonthlyPayPeriods { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
        modelBuilder.Entity<WeeklyPayPeriod>().Map(m =>
                                                       {
                                                           m.MapInheritedProperties();
                                                           m.ToTable("AvailPayPeriodsWeekly");
                                                       });
        modelBuilder.Entity<MonthlyPayPeriod>().Map(m =>
                                                       {
                                                           m.MapInheritedProperties();
                                                           m.ToTable("AvailPayPeriodsMonthly");
                                                       });

} 
```

不完美，但可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T00:48:28.157

在接受的答案之后，使用相同类型两次声明 DbSet 会发生错误。发生这种情况时，实体框架无法解析为 PayPeriod 实体使用哪个 DbSet 实例。使用单独的类允许 EF 解析为正确的 DbSet。

```
//Error with DbSet<PayPeriod> defined twice    
public DbSet<PayPeriod> WeeklyPayPeriods { get; set; }
public DbSet<PayPeriod> MonthlyPayPeriods { get; set; }

//EF can resolve to each  DbSet, but can't store the baseclass PayPeriods
public DbSet<WeeklyPayPeriod> WeeklyPayPeriods { get; set; }
public DbSet<MnthlyPayPeriod> MonthlyPayPeriods { get; set; } 
```

参见相关：[Entity Framework 4 Code Only Error “Multiple objects sets per type is not supported”</a>](https://stackoverflow.com/a/9205160/3663686)

[](https://stackoverflow.com/a/9205160/3663686)

[http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type- tpc-and-choosing-strategy-guidelines.aspx](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)用于实现 Table Per Concrete Type Mappings (TPC)。

# mongodb - 在 debian 2.6.32-5-amd6 上安装 64 位软件

> ID：14893447
> 
> 赞同：0
> 
> 时间：2013-02-15T11:11:49.877
> 
> 标签：mongodb, debian, x86-64

我有奇怪的问题。我尝试使用 Debian 6.0.1a 在我的服务器上安装 64 位 MongoDB，但失败了。我的操作系统似乎有问题。

```
uname -a
Linux db 2.6.32-5-amd64 #1 SMP Tue Mar 8 22:49:26 UTC 2011 x86_64 GNU/Linux 
```

看起来没问题，但是当我尝试安装 64 位的东西时，我得到了

```
dpkg -i mongodb-server_1.4.4-3_amd64.deb 
dpkg: error processing mongodb-server_1.4.4-3_amd64.deb (--install):
 package architecture (amd64) does not match system (i386)
Errors were encountered while processing:
 mongodb-server_1.4.4-3_amd64.deb 
```

并且尝试启动二进制文件时出错

```
./mongod
bash: ./mongod: No such file or directory 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:18:24.427

它看起来正确，但我认为最好使用 apt ：

[在 Debian 上安装 MongoDB](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/)

# c# - 如何在记录中找到一组整数（N），其中包含 6 个整数

> ID：14893448
> 
> 赞同：6
> 
> 时间：2013-02-15T11:11:53.503
> 
> 标签：c#, algorithm

我在寻找 int[x,6] 数组中最常见的整数组时遇到问题，其中 x <= 100000。数字在 0 到 50 之间。例如输入。(N = 2)

```
14 24 44 36 37 45 - here
01 02 06 24 33 44
10 17 34 40 44 45 - here
12 13 28 31 37 47
01 06 07 09 40 45
01 05 06 19 35 44
13 19 20 26 31 47
44 20 30 31 45 46 - here
02 04 14 23 30 34
27 30 41 42 44 49
03 06 15 27 37 48 
```

输出：

```
44, 45 (3) // appeared 3 times 
```

我试过的附加代码。现在我知道它不起作用，但我被要求发布它。我不只是在没有尝试的情况下寻求帮助。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace TotoLotek
{
    class Program
    {

        static void Main(string[] args)
        {
            StreamReader czytnik = new StreamReader("dane_wejsciowe.txt");
            List<int[]> lista = new List<int[]>();

            string linia = "";
            while ((linia = czytnik.ReadLine()) != null)
            {
                string[] numery = linia.Split(' ');
                int[] tablica_intow = new int[6];
                for (int i = 0; i < 6; i++)
                {
                    tablica_intow[i] = int.Parse(numery[i]);
                }
                lista.Add(tablica_intow);
            }

            czytnik.Close();

            int[] tablica = new int [50];

            for (int i = 0; i< lista.Count(); i++)
            {
                for (int j = 0; j < 6; j++)
                {
                    tablica[lista[i][j]]++;
                }
            }

            int maks = tablica[0];
            int maks_indeks = 0;
            for (int i = 0; i < 50; i++)
            {
                if (tablica[i] > maks)
                {
                    maks = tablica[i];
                    maks_indeks = i;
                }
            }

            Console.Write("{0}({1}) ", maks_indeks, maks);

            List<int[]> lista2 = new List<int[]>();

            for (int i = 0; i < lista.Count(); i++)
            {
                for (int j = 0; j < 6; j++)
                {
                    if (lista[i][j] == maks_indeks)
                        lista2.Add(lista[i]);
                    break;
                }
            }

            int[] tablica2 = new int[50];
            for (int i = 0; i < lista2.Count(); i++)
            {
                for (int j = 0; j < 6; j++)
                {
                    tablica2[lista2[i][j]]++;
                }
            }

            int maks2 = tablica2[0];
            int maks_indeks2 = 0;
            for (int i = 0; i < 50; i++)
            {
                if (tablica2[i] > maks2 && i != maks_indeks)
                {
                    maks2 = tablica2[i];
                    maks_indeks2 = i;
                }
            }

            Console.Write("{0}({1}) ", maks_indeks2, maks2);

            int xdddd = 2;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:25:57.180

循环遍历行和每行中的所有数字。将每个数字与所有更高的数字配对并计算所有组合。完成后，您只需按计数对结果进行排序并取最高值：

```
int[][] numbers = {
  new int[] { 14, 24, 44, 36, 37, 45 },
  new int[] { 01, 02, 06, 24, 33, 44 },
  new int[] { 10, 17, 34, 40, 44, 45 },
  new int[] { 12, 13, 28, 31, 37, 47 },
  new int[] { 01, 06, 07, 09, 40, 45 },
  new int[] { 01, 05, 06, 19, 35, 44 },
  new int[] { 13, 19, 20, 26, 31, 47 },
  new int[] { 44, 20, 30, 31, 45, 46 },
  new int[] { 02, 04, 14, 23, 30, 34 },
  new int[] { 27, 30, 41, 42, 44, 49 },
  new int[] { 03, 06, 15, 27, 37, 48 }
};

var count = new Dictionary<KeyValuePair<int, int>, int>();
foreach (int[] row in numbers) {
  foreach (int i in row) {
    foreach (int n in row.Where(n => n > i)) {
      KeyValuePair<int, int> key = new KeyValuePair<int, int>(i, n);
      if (count.ContainsKey(key)) {
        count[key]++;
      } else {
        count.Add(key, 1);
      }
    }
  }
}

KeyValuePair<KeyValuePair<int, int>, int> most =
  count.ToList().OrderByDescending(n => n.Value).First();

Console.WriteLine("{0}, {1} ({2})", most.Key.Key, most.Key.Value, most.Value); 
```

输出：

```
44, 45 (3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:08:40.317

现在我改进了我的算法。现在可以了！！！！

```
class Program
{
    static void Main(string[] args)
    {
        List<int[]> list = new List<int[]>();
        list.Add(new int[] { 10, 20, 30, 40, 50});
        list.Add(new int[] { 10, 20, 30, 40, 50 });
        list.Add(new int[] { 10, 20, 30, 40, 50 });
        list.Add(new int[] { 10, 20, 30, 40, 50 });
        list.Add(new int[] { 10, 20, 30, 40, 50 });

        // The N
        int amountInCombination = 4;

        Dictionary<String, int> dictionary = new Dictionary<String, int>();
        foreach (int[] ints in list)
        {
            List<String> names = GetAllElemntCombinationsInRow(amountInCombination, ints);
            int count = 0;
            foreach (string name in names)
            {
                if (dictionary.TryGetValue(name, out count))
                {
                    dictionary[name]++;
                }
                else
                {
                    dictionary.Add(name, 1);
                }
            }

        }
        KeyValuePair<String, int> result = dictionary.OrderByDescending(e => e.Value).First();

        Console.WriteLine("{0} ({1})", result.Key, result.Value);
        //dictionary.OrderByDescending(e=>e.Value).First()
    }

    public static List<String> GetAllElemntCombinationsInRow(int amountInCombination, int[] row)
    {
        List<String> result = new List<string>();
        List<String> tempUniq = new List<string>();
        for (int i = 0; i < row.Count(); i++)
        {
            tempUniq = new List<string>();
            if (amountInCombination != 1)
            {
                int[] temp = new int[row.Length-i-1];
                Array.Copy(row,i+1, temp,0,row.Length-i-1);
                tempUniq = GetAllElemntCombinationsInRow(amountInCombination - 1, temp);
            }
            else
            {
                result.Add(row[i].ToString());
            }
            if (tempUniq.Count != 0)
            {
                for (int j = 0; j < tempUniq.Count; j++)
                {
                    result.Add(row[i].ToString() + "," + tempUniq[j]);
                }
            }
        }
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:12:24.747

```
var input = new int[][]
{
    new [] {14, 24, 44, 36, 37, 45},//- here
    new [] {01, 02, 06, 24, 33, 44},
    new [] {10, 17, 34, 40, 44, 45},//- here
    new [] {12, 13, 28, 31, 37, 47},
    new [] {01, 06, 07, 09, 40, 45},
    new [] {01, 05, 06, 19, 35, 44},
    new [] {13, 19, 20, 26, 31, 47},
    new [] {44, 20, 30, 31, 45, 46},//- here
    new [] {02, 04, 14, 23, 30, 34},
    new [] {27, 30, 41, 42, 44, 49},
    new [] {03, 06, 15, 27, 37, 48},
}; 
```

实施：

```
var matches = new List<int[]>();
for (int i = 0; i < input.Length; i++)
{
    // Compare with all the next arrays
    // "j = i + 1", to do not compare twice
    for (int j = i + 1; j < input.Length; j++)
    {
        var match = input[i].Intersect(input[j]).ToArray();
        if (match.Length > 1) // The smallest group contains 2 elements 
        {
            matches.Add(match);
        }
    }
}

var comparer = new ArrayComparer<int>();
var mostCommon = matches
    .GroupBy(p => p, comparer)

    // Sort by frequency
    .OrderByDescending(p => p.Count())

    // Sort by the group's length
    .ThenByDescending(p => p.Key.Count())
    .FirstOrDefault(); 
```

`ArrayComparer<T>`班级：

```
public class ArrayComparer<T> : EqualityComparer<IEnumerable<T>>
{
    public override bool Equals(IEnumerable<T> x, IEnumerable<T> y)
    {
        return x != null && y != null &&
            (x == y || Enumerable.SequenceEqual(x,y));
    }

    public override int GetHashCode(IEnumerable<T> obj)
    {
        return obj.Sum(p => p.GetHashCode() + p.GetHashCode());
    }
} 
```

显示结果：

```
if (mostCommon != null)
{
    Console.WriteLine("Most common: {{{0}}} ({1})",
        string.Join(", ", mostCommon.Key), mostCommon.Count());
}
else
{
    Console.WriteLine("Not found.");
} 
```

输出：

> 最常见：{44, 45} (3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T13:20:20.887

制作一个大小为 X 的数组（可能的数字，如 50）。遍历所有数字并将每个数字递增到适当的索引。从数组中取出最高的 N 个数字（您知道它是基于索引的哪个数字。

大量 X 可能需要更优雅的解决方案。

```
 int[][] numbers =
            {
                new[] {14, 24, 44, 36, 37, 45},
                new[] {01, 02, 06, 24, 33, 44},
                new[] {10, 17, 34, 40, 44, 45},
                new[] {12, 13, 28, 31, 37, 47},
                new[] {01, 06, 07, 09, 40, 45},
                new[] {01, 05, 06, 19, 35, 44},
                new[] {13, 19, 20, 26, 31, 47},
                new[] {44, 20, 30, 31, 45, 46},
                new[] {02, 04, 14, 23, 30, 34},
                new[] {27, 30, 41, 42, 44, 49},
                new[] {03, 06, 15, 27, 37, 48}
            };

        int[] counts = new int[50];

        foreach (var rowOfNumbers in numbers)
        {
            foreach (var number in rowOfNumbers)
            {
                counts[number]++;
            }
        }

        int[] top = new[] {0, 0};

        for (int i = 0; i < counts.Length; i++)
        {
            if (counts[i] > top[0])
                top[0] = i;

            else if (counts[i] > top[1])
                top[1] = i;
        } 
```

可以轻松地重构为更健壮的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T13:52:43.457

```
 var pairs = numbers.Select(x =>
                                  {
                                    List<KeyValuePair<int, IList<int>>> pairList = new List<KeyValuePair<int, IList<int>>>();
                                    for (int i = 0; i <= 4; i++)
                                    {
                                      for (int j = i + 1; j <= 5; j++)
                                      {
                                        //Get the pair
                                        var pair = new List<int> { x.Skip(i).First(), x.Skip(j).First() };
                                        //Pair should be unique, so make the ID the sum
                                        pairList.Add(new KeyValuePair<int, IList<int>>(pair.Sum(), pair));
                                      }
                                    }
                                    return pairList;
                                  }).SelectMany(x => x.Select(y => y.Value)).GroupBy(x => x, new PairComparer()).ToList();
  int iHighest = pairs.Max(p => p.Count());
  var highestPairs = pairs.Where(pair => pair.Count() == iHighest); 
```

这里是比较器。

```
 public class PairComparer : IEqualityComparer<IList<int>>
{

  public bool Equals(IList<int> x, IList<int> y)
  {
    return x.All(i => y.Contains(i));
  }

  public int GetHashCode(IList<int> obj)
  {
    return obj.Sum(x => x.GetHashCode());
  }
} 
```

# c++ - Ubuntu 上 Netbeans 7.3+ 中 C++ 解析器索引/缓存的位置

> ID：14893452
> 
> 赞同：0
> 
> 时间：2013-02-15T11:12:09.633
> 
> 标签：c++, linux, ubuntu, caching, netbeans

在哪里可以找到 netbeans 7.3+ 中特定 c++ 项目的解析器索引/缓存？

我使用 grep 来查找我在这个项目中使用的一些函数名称。

```
grep -nisr ~/<netbeansfolder> '<function name here>'
grep -nisr ~/.neatbeans/<version> '<function name here>'
grep -nisr ~/<projectfolder>/nbproject '<function name here>' 
```

一无所获……任何线索或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:18:35.763

找到了。

```
~/.cache/netbeans/<netbeansversion>/cnd/model/ 
```

# java - Eclipse IDE 无法解析我的 src 类名

> ID：14893456
> 
> 赞同：0
> 
> 时间：2013-02-15T11:12:38.143
> 
> 标签：java, eclipse, ide

似乎出乎意料（尽管我认为它在 ant 构建之后莫名其妙地发生了）我的 Eclipse IDE 停止解析我在项目中创建的 Java 类名，在我的包资源管理器中为我提供了一个很好的红色“x”列表。

我不确定这是如何发生或为什么发生的，而且我很难让 Eclipse 再次看到它们。在项目属性下，Java 构建路径引用中的源选项卡是 src dir，正如您所期望的那样。相比之下，引用的库拥有我使用的所有 jar，并且没有任何问题。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:35:47.863

1）右键单击 Project ，导航到**Build Path**然后单击**Configure Build Path**

2）现在点击选项卡**Sources**，您必须验证文件夹 src 下的程序在 Sources 选项卡中正确说明。

*假设我的项目名称是 EmpService ，我的程序在 src 文件夹中（忘记包，实际上包必须在 src 下），然后选项卡将显示如下*-

> EmpService/src/

问候

安舒尔

# titanium-mobile - 警报框中的选择选项（Titanium Appcelerator）

> ID：14893460
> 
> 赞同：0
> 
> 时间：2013-02-15T11:12:57.037
> 
> 标签：titanium-mobile

如何使用 Titanium Appcelerator 在 Aler 对话框中添加选择选项，如下所示？我检查了[此链接中](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.AlertDialog)的文档，但没有太多参考。

钛有可能吗？

![在此处输入图像描述](../Images/a514d1f96cc465aef2dc45ed7f595988.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:34:42.350

我认为目前钛确实具有您在图像中显示的功能....

但我们可以创建看起来像警报视图和显示的视图....

链接中显示的那些按钮是一般警报

![在此处输入图像描述](../Images/a7deec904b2cbe8afc018e62d511bd65.png)

# powershell - Powershell脚本为用户创建主文件夹并设置权限

> ID：14893462
> 
> 赞同：5
> 
> 时间：2013-02-15T11:13:03.547
> 
> 标签：powershell, folder-permissions

我正在做一个 powershell 脚本，它在 AD 中创建新的域用户帐户，并在文件服务器中创建具有相关权限的主目录。

我的问题是我无法获得权限集。

在下面的代码中，my_fileServer 是文件服务器名称；sso 表示单点登录 id，在下面的测试代码中设置为“user9999”。

任何帮助是极大的赞赏！

```
Set-Variable homeDir -option Constant -value "\\my_fileServer\Users"
Set-Variable sso -option Constant -value "user9999"

# If the folder for the user does not exist, make a new one and set the correct permissions.
if ( (Test-Path "$homeDir\$sso") -eq $false)
{
    try 
    {
        $NewFolder = New-Item -Path $homeDir -Name $sso -ItemType "Directory"
        $Rights = [System.Security.AccessControl.FileSystemRights]"FullControl,Modify,ReadAndExecute,ListDirectory,Read,Write"
        $InheritanceFlag = [System.Security.AccessControl.InheritanceFlags]::None
        $PropagationFlag = [System.Security.AccessControl.PropagationFlags]::None
        $objType =[System.Security.AccessControl.AccessControlType]::Allow
        $objUser = New-Object System.Security.Principal.NTAccount "my_full_domain_name\$sso"
        $objACE = New-Object System.Security.AccessControl.FileSystemAccessRule `
                ($objUser, $Rights, $InheritanceFlag, $PropagationFlag, $objType)
        $ACL = get-acl -Path $NewFolder
        $ACL.AddAccessRule($objACE)
        $objReturn = Set-ACL -Path "$homeDir\$sso" -AclObject $ACL
    $objReturn
    }
    catch
    {
        $msg = $_
        $msg
    }
} 
```

主文件夹创建正常，但是当我检查用户的权限时，没有勾选任何框。 ![在此处输入图像描述](../Images/21bc25940a8d4dd66a8a462d15e007b9.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T12:16:08.487

问题是你的继承。您不允许在子文件夹和文件（他在他的文件夹中拥有的项目）上继承权限。这就是您在基本安全窗口中看不到权限（仅“特殊权限”）的原因。如果您打开“高级安全设置”，您将看到用户可以完全控制此文件夹，而不是内容。只要您为 CREATOR OWNER 添加权限（具有继承），以便所有者可以访问项目，我认为您会没事的。但是，您现在可以像这样修复它：

```
$InheritanceFlag = @([System.Security.AccessControl.InheritanceFlags]::ContainerInherit,[System.Security.AccessControl.InheritanceFlags]::ObjectInherit) 
```

除非有特殊要求，否则您应该授予用户对其文件夹的完全访问权限（完全继承）。具有固定继承的完整解决方案（我还清理了您的`Set-ACL`路径并删除了不必要的返回对象）：

```
try 
{
    $NewFolder = New-Item -Path $homeDir -Name $sso -ItemType "Directory"
    $Rights = [System.Security.AccessControl.FileSystemRights]"FullControl,Modify,ReadAndExecute,ListDirectory,Read,Write"
    $InheritanceFlag = @([System.Security.AccessControl.InheritanceFlags]::ContainerInherit,[System.Security.AccessControl.InheritanceFlags]::ObjectInherit)
    $PropagationFlag = [System.Security.AccessControl.PropagationFlags]::None
    $objType =[System.Security.AccessControl.AccessControlType]::Allow
    $objUser = New-Object System.Security.Principal.NTAccount "my_full_domain_name\$sso"
    $objACE = New-Object System.Security.AccessControl.FileSystemAccessRule `
            ($objUser, $Rights, $InheritanceFlag, $PropagationFlag, $objType)
    $ACL = Get-Acl -Path $NewFolder
    $ACL.AddAccessRule($objACE)
    Set-ACL -Path $NewFolder.FullName -AclObject $ACL
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T13:15:04.093

遗憾的是，我不能投票，但我同意上述两个答案（Graimer 和 CB），实际答案是两者的结合。
- 您需要在“高级”窗口中检查权限
- 即使您的代码“有效”，如果没有继承，您的用户将无法在您分配给他们的文件夹中做很多事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:05:26.273

所有权限都正确设置为`'Special Permmissions'`，您可以检查单击`Advanced`并查看“授权”选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T16:07:04.713

保持简单，少花钱……您错过的是[SetAccessRuleProtection](http://msdn.microsoft.com/en-sg/library/system.security.accesscontrol.objectsecurity.setaccessruleprotection.aspx)函数。

这是可以为您提供所需刻度的代码。

```
if (-not (Test-Path "$homeDir\$sso"))
{
    $acl = Get-Acl (New-Item -Path $homedir -Name $sso -ItemType Directory)

    # Make sure access rules inherited from parent folders.
    $acl.SetAccessRuleProtection($false, $true)

    $ace = "$domain\$sso","FullControl", "ContainerInherit,ObjectInherit","None","Allow"
    $objACE = New-Object System.Security.AccessControl.FileSystemAccessRule($ace)
    $acl.AddAccessRule($objACE)
    Set-ACL -Path "$homeDir\$sso" -AclObject $acl

} 
```

# oracle - sql developer中的for循环

> ID：14893471
> 
> 赞同：0
> 
> 时间：2013-02-15T11:13:26.003
> 
> 标签：oracle, loops, oracle-sqldeveloper

再次出现一个令人发指的错误..

> 不是单组群功能

我有一个空表`mig_temp1`，我想用观察来填充））这个选择有什么问题？

```
begin
  for j in 1..7 loop 
    for t in 0..32 loop
      insert into mig_temp1 (report_date, portfolio, bucket, Q)
      select add_months(to_date('31.10.2014','DD.MM.YYYY'),-t),
             cp.portfolio, j, count(*)
        from proba_cft pr, credtoportfolio cp
       where pr.credit_num = cp.credit and pr.dpd_47 between 30*(j-1)+1 and 30*j;
    end loop;
  end loop;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:30:00.637

它应该通过以下方式与组一起工作`cp.portfolio`：

```
begin
  for j in 1..7 loop 
    for t in 0..32 loop
      insert into mig_temp1 (report_date, portfolio, bucket, Q)
      select add_months(to_date('31.10.2014','DD.MM.YYYY'),-t),
             cp.portfolio, j, count(*)
        from proba_cft pr, credtoportfolio cp
       where pr.credit_num = cp.credit and pr.dpd_47 between 30*(j-1)+1 and 30*j
       group by cp.portfolio;
    end loop;
  end loop;
end; 
```

# ruby - 在 Ruby on Rails 中计算/存储 line_item 总数的最佳方法是什么？

> ID：14893474
> 
> 赞同：4
> 
> 时间：2013-02-15T11:13:34.410
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有`line_items`with`unit_price`和`quantity`属性（除其他外）。

在 Ruby on Rails 中对此进行建模的最佳方法是什么？

现在，我的`LineItem`模型中的很多函数都遵循这种模式：

```
def total_price
  unit_price * quantity
end 
```

这行得通，但我想知道：这种方法有用吗？或者当一百万用户同时使用它时，它会让我的应用程序崩溃吗？

另一种方法是将 存储`total_price`为数据库字段，每次保存后都会使用以下内容进行更新：`after_save :update_total`。不过，我不是冗余数据库列的忠实粉丝。我想将它们保持在最低限度。

这样做的*专业*方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T15:44:02.720

这是计算值与存储的一般问题。我不确定所有情况都有一个单一的答案，但这里有一些需要考虑的因素：

*   计算**成本高**吗？如果是的话，最好**保存**
*   **像 unit_price 这样**的变量是否在变化？如果是，最好**计算**，因为如果你存储，当 unit_price 变化时你必须重新计算所有的 total_price
*   你会**查询计算值**吗？如果是，最好**存储**和使用数据库功能（例如，如果您想要总价大于 500 的所有产品）。
*   请注意，在这种（简单）情况下，可以要求数据库也进行计算（WHERE UNIT_PRICE * QUANTITY > 500），但某种计算可能无法或不方便用 SQL 表示。

对于所有“性能”方面，唯一正确的答案是：测量。你不能事先说出来。这意味着最初，选择最简单的方法（我会计算），配置文件，然后看看是否有理由切换。Rails 和 Ruby 充满了分析工具（您可以从 Rails[性能测试](http://guides.rubyonrails.org/performance_testing.html)开始）。

# c# - 从列表框值asp.net c#构建sql查询

> ID：14893479
> 
> 赞同：0
> 
> 时间：2013-02-15T11:14:02.523
> 
> 标签：c#, asp.net, sql, indexing-service

我正在努力解决这个问题一段时间。

这就是我想要做的：

我想为应该如下所示的 Windows 索引服务构建一个查询

```
SELECT ... FROM  (TABLE Catalog1..Scope('Deep traversal of "Path1"','Deep traversal of "Path2"') UNION ALL TABLE Catalog2..Scope('Deep traversal of "Path3"')) WHERE ... 
```

我从一个`<asp:Listbox SelectionMode=multiple>`（有一个文件作为数据源）获取信息

它以以下方式出现：

```
'DisplayNameInListbox1'=Catalog1@Path1;Path2&Catalog2
'DisplayNameInListbox2'=Catalog1@Path1
'DisplayNameInListbox3'=Catalog1@Path1;Path2&Catalog2@Path3
... 
```

在 Listbox 之一中，值可以是多个目录，并且可以选择多个值。每个目录可以独立或限制在指定路径（@path;path2）

`Dictionary<string Catalog, List<string Paths>>` 我的尝试：如果我不选择包含相同目录名称的两个值，我尝试将所有信息存储在一个可以正常工作的文件中。如果我已经有一个具有该名称的键，我也不能只跳过目录，因为路径限制可能不同。

谁能帮我找到解决这个问题的好方法？（也可以更改数据的存储方式 - 我只需要能够从文件将其提供给列表框）

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:38:50.713

这是我的问题的解决方案：

我想大多数时候最简单的解决方案是最好的！

我把问题分成两部分。现在我首先合并目录和路径，这样每个目录在字典中只存在一次。

在第二步中，我可以按顺序构建查询:)

# java - 另一个 Delphi 到 Java 的移植问题

> ID：14893480
> 
> 赞同：4
> 
> 时间：2013-02-15T11:14:03.600
> 
> 标签：java, delphi, binary, porting

我正在将一个用 Delphi 编写的旧应用程序移植到 Java。我在使用这个函数时遇到了一些问题，它计算了传输消息的 CRC。

这是原始代码：

```
 if(ReceivedMessage[slot].Message[1] = $FD) and
          (ReceivedMessage[slot].MessageLength in [1..16]) and
          (ReceivedMessage[slot].Message[counter] = $FF) then
       begin
        index := 2;
        ReceivedMessage[slot].DataReady := TRUE;

        for counter := 1 to ReceivedMessage[slot].MessageLength do
        begin
          Inc(index);

          if ReceivedMessage[slot].Message[index] < $F8 then
            ReceivedMessage[slot].Data[counter] := ReceivedMessage[slot].Message[index]
          else
          if ReceivedMessage[slot].Message[index] = $F8 then
          begin
            Inc(index);

            ReceivedMessage[slot].Data[counter] := ReceivedMessage[slot].Message[index] or $F0;
          end
          else
            ReceivedMessage[slot].DataReady := FALSE;  // Invalid data
        end;

        if ReceivedMessage[slot].DataReady = TRUE then
        begin
          Inc(index);

          if ReceivedMessage[slot].Message[index] < $F8 then
            ReceivedMessage[slot].CRC := ReceivedMessage[slot].Message[index] shl 8
          else
          if ReceivedMessage[slot].Message[index] = $F8 then
          begin
            Inc(index);

            ReceivedMessage[slot].CRC := (ReceivedMessage[slot].Message[index] or $F0) shl 8;
          end;

          Inc(index);

          if ReceivedMessage[slot].Message[index] < $F8 then
            ReceivedMessage[slot].CRC := ReceivedMessage[slot].CRC or ReceivedMessage[slot].Message[index]
          else
          if ReceivedMessage[slot].Message[index] = $F8 then
          begin
            Inc(index);

            ReceivedMessage[slot].CRC := ReceivedMessage[slot].CRC or        ReceivedMessage[slot].Message[index] or $F0;
          end; 
```

这是我的Java代码：

```
 if(array[1]==0xFD && (array[2]>0 && array[2]<17) && array[pos]==(byte)0xFF)
 {
index=2;
for(int counter=1;counter<splMsg.nbytes+1;counter++)
{
     index++;
 if(array[index]<0xF8)
     data[counter]=array[index];
 else
     if(array[index]==0xF8)
     {
      index++;
      data[counter]=(byte)(array[index] | 0xF0);
     }
     else
         return 0xFC; 
}

index++;
short crc=0x0000;

if(array[index]<0xF8)
     crc=(short) (array[index]<<8);
else
   if(array[index]==0xF8)
   {
    index++;
    crc=(short)((array[index] | 0xF0) << 8);
   }
index++;
if(array[index]<0xF8)
    crc=(short) (crc | array[index]);
else
   if(array[index]==0xF8)
   {
    index++;
    crc=(short)(crc | array[index] | 0xF0);
   }

msgcrc=new byte[] {(byte)(crc >> 8 & 0xff),(byte)(crc & 0xff)}; 
```

我的函数大多数时候返回传输的 CRC 码，但有时会失败并返回消息的最后两个字节。消息的最后 3 个字节是 CRC 码（2 个字节）和消息结束 0xff 字节。

有什么帮助吗？

谢谢，佩德罗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T11:19:54.317

记住：

Java 字节已*签名*。所以：

```
byte test = (byte)255;
System.out.println(test); 
```

将输出：`-1`

和

```
 byte test = (byte)255;
    System.out.println(test == 255); 
```

将打印`false`，但是

```
 byte test = (byte)255;
    System.out.println((test & 255) == 255); 
```

会做我认为你想要实现的（在这种情况下是 prints `true`）。

要获取无符号（字节）值，请使用`(array[index] & 255)`.

您必须在任何地方使用 0xff 进行屏蔽，否则您将获得大于 127 的字节值的符号扩展整数。

对于比较，您也可以始终对`byte`(eg `if(test == (byte)255)`) 进行强制转换，但我认为应该坚持一次转换，所以我建议使用`& 0xff`掩蔽。

# android - Android布局设计：按钮上方的表格上方的图像。当键盘出现时，我的布局被搞砸了

> ID：14893485
> 
> 赞同：0
> 
> 时间：2013-02-15T11:14:13.680
> 
> 标签：android, layout, scrollview

在我的应用程序中，我想要这样的布局：

![第一个布局](../Images/af8dba2f4f3736af0fd94ae9d4337d72.png)

我使用包含 ImageView、TableLayout 和 Button 的相对布局来做到这一点。问题是，当我打开键盘修改 EditText 时，键盘位于 EditText 之上，因此用户看不到他在写什么。当显示键盘时，我希望布局是这样的：

![布局 2](../Images/8527174acdc7ff4f2a93853a82449ee5.png)

用户应该能够在显示键盘时向上滚动视图以查看整个图像，即使当时他没有看到 EditText，因为他想将图像的一些数据复制到 EditTexts 中。我试着这样做：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:baselineAligned="false"
android:orientation="vertical" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/buttonEditStop"
    android:padding="10dip" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/stopImg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:clickable="true"
            android:contentDescription="@string/entry_img"
            android:onClick="ImageClick" />

        <TableLayout
            android:id="@+id/formLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/stopImg"
            android:layout_marginRight="10dp" >

           ...

        </TableLayout>
    </RelativeLayout>
</ScrollView>

<ImageButton
    android:id="@+id/buttonEditStop"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/edit_stop"
    android:onClick="EditButtonClicked"
    android:src="@drawable/ic_menu_edit" /> 
```

使用此代码，我的整个布局都搞砸了。我在图像顶部看到了表单，然后是一个 ImageButton，其中包含应该在 imageView 中看到的图像。

任何人都知道如何获得我想要的布局？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:30:30.253

为了避免 EditText 被重叠，我不得不使用

```
android:windowSoftInputMode="adjustPan" 
```

在我的清单中。

# magento - 需要转换为magento MVC结构

> ID：14893492
> 
> 赞同：2
> 
> 时间：2013-02-15T11:14:37.250
> 
> 标签：magento, magento-1.7, magento-1.5, magento-1.6

我开发了一个代码，其中包含一个以 json 格式返回产品评级的查询。代码如下：

```
<?php header('content-type: application/json; charset=utf-8');
require_once('/opt/phpapps/magento/app/Mage.php');
umask(0);
Mage::app();
$cid=$_GET['catid'];
$read = Mage::getSingleton('core/resource')->getConnection('core_read');
$query = "SELECT round(t1.rating_summary / 20) AS rating, t2.product_id FROM review_entity_summary AS t1 INNER JOIN catalog_category_product AS t2 ON t1.entity_pk_value = t2.product_id WHERE category_id =" . $cid . " AND store_id = '1'";

$results = $read->fetchAll($query);
$json = json_encode($results);
print_r( $json );
?> 
```

我被指示将其转换为 MVC 模式。我知道 MVC 可以通过创建单独的文件夹来完成，如块、控制器、模型、sql 等，帮助文件夹。但我不确定下一步是什么以及如何执行开发以获取 json 数据..帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:28:39.033

最好的方法是创建一个自定义扩展/模型，有很多教程可以做到这一点，但是你可以使用一些东西来生成一个例子让你开始：

[http://www.silksoftware.com/magento-module-creator/](http://www.silksoftware.com/magento-module-creator/)

但是，对于这么简单的事情，您可以在本地命名空间中创建一个自定义块，例如：

app/code/local/Mage/Catalog/Block/Product/Ratingsjson.php

```
<?php
/**
 * Ratingsjson.php
 */
class Mage_Catalog_Block_Product_Ratingsjson extends Mage_Catalog_Block_Product_Abstract
{
    /**
     * Get products with special offer attribute set
     * 
     * @return type
     */
    public function getRatings() 
    { 
        /**
         * This will be injected from the tag / XML below
         * you can pass what ever variables you want this way.
         * getSomeAttribute() will get the value 'some_attribute' from the
         * CMS tag or XML config.
         */
        $categoryId = $this->getCategoryId();
        if($categoryId == NULL) {
             $categoryId = 1; // or some default;
        }

        $resource = Mage::getSingleton('core/resource');
        $read = $resource->getConnection('catalog_read');

        // Do your stuff here...
        $query = "SELECT round(t1.rating_summary / 20) AS rating, t2.product_id FROM review_entity_summary AS t1 INNER JOIN catalog_category_product AS t2 ON t1.entity_pk_value = t2.product_id WHERE category_id =" . $cid . " AND store_id = '1'";
        $results = $read->fetchAll($query);

        return json_encode($results);
    }
} 
```

创建一个模板来做你想做的事：

模板/mymodeule/mytemplate.phtml

```
<?php
echo $this->getRatings(); 
```

然后，您可以在 CMS 页面中使用您的新块：

```
{{block type="catalog/ratignsjson" category_id="3" temaplte="mymodeule/mytemplate.phtml"}} 
```

或者，如果您想通过 XML 配置加载它：

```
<block type="catalog/ratignsjson" category_id="3" name="ratignsjson" template="mymodeule/mytemplate.phtml"/> 
```

要正确执行此操作并输出严格的 Json 数据，您需要设置 json 内容类型标头等，但我认为这对于这种特殊情况来说有点太多了。

# android - 如何从数据库中检索图像

> ID：14893496
> 
> 赞同：0
> 
> 时间：2013-02-15T11:15:06.397
> 
> 标签：android

这是我在数据库中插入图像的代码。单击browsebutton2时如何从数据库中检索相同的图像？

```
BrowseButton=(Button)findViewById(R.id.BrowseButton);
BrowseButton2=(Button)findViewById(R.id.BrowseButton2);

adapter = new ContactImageAdapter(this, R.layout.screen_list, imageArry);
BrowseButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.facebook);

        image.compress(Bitmap.CompressFormat.JPEG, 100, stream);
        byte[] imageInByte = stream.toByteArray();

        Log.d("Insert: ", "Inserting ..");
        db.addContact(new Contact("FaceBook", imageInByte));
    }
});

BrowseButton2.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:21:27.957

获取光标后，您可以使用以下代码从数据库中获取图像。

```
 Bitmap fetchedBitmap = null;     
    public static byte[] b = null;
if(cr.getBLob!=null){
        b = cr.getBlob(ColumnIndex); // Column index from which the image have to be fetched
        ByteArrayInputStream bais = new ByteArrayInputStream(b);
        fetchedBitmap = BitmapFactory.decodeStream(bais);

} 
```

# java - 睡着后应用崩溃

> ID：14893503
> 
> 赞同：0
> 
> 时间：2013-02-15T11:15:44.410
> 
> 标签：java, android, crash, sleep

我目前正在关注一些关于 Android 开发的视频教程，直到第 8 个教程都很好，我们制作了一个启动画面，2 秒后它应该进入主应用程序。问题是，2 秒后，屏幕变黑，应用程序崩溃。

[Logcat 输出](http://pastebin.com/tA78XFzn)

我完全按照他的教程进行操作，与我的唯一区别是我正在为 4.2 而不是 2.2 开发。我也在使用我的 Galaxy Note 2 而不是模拟器进行测试。

我按照他的方式完成了所有操作，然后按下播放键，应用程序在我的设备上打开，启动画面在那里持续了 2 秒（我将其设置为 2000），然后微调器（我添加的）冻结了。`The screen goes black, and then it crashes and says "Unfortunately, The Basic Series has stopped."`

我都试过了`sleep(2000)`和`Thread.sleep(2000)`。

`AndroidManifest.xml`和的代码`main.java`在[这里](http://pastebin.com/VkJj4cUt)

如果有人好奇，这是我关注的[视频](http://www.youtube.com/watch?v=P4PqZKmQjjs)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:33:45.833

1.  避免启动画面，除非你真的需要他们做一些准备操作。
2.  避免线程睡眠，否则您将面临 ANR 崩溃（使用*延迟可运行后*）
3.  避免阅读此提示：您的活动类名称是什么？菜单、菜单、菜单还是 uNeM？
4.  不太好的教程恕我直言

5.  不值得一提：如果你真的想这样做（顺便说一句，不推荐的方式），请查看 8:48 的视频并尝试添加 catch 子句并记录异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:25:25.550

如果您需要进行一些初始化，请使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，或者在完成后将使用[Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)的线程（这样它在执行 UI 操作时不会崩溃）。

如果您只需要显示初始屏幕并在一段时间后将其关闭，请使用[Handler.postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)。

在所有可能的解决方案中，不要忘记在 onPause/onDestroy 时取消它们（取决于您的操作/需要），这样如果用户离开了应用程序（退出或将其留在后台），它将不会打开当他恢复新活动时（或者更糟的是，在它进入后台时显示它）。

# asp.net-mvc - ASP.NET Web 配置 URL 位置授权

> ID：14893507
> 
> 赞同：0
> 
> 时间：2013-02-15T11:16:06.987
> 
> 标签：asp.net-mvc

我正在尝试使用在我的 Web.config 中定义的位置元素代码来限制对这个 URL 的访问，但是当直接在地址栏中输入 URL 时，它似乎并没有重定向用户。

```
<location path="~/management/account">
<system.web>
  <authorization>
    <allow roles="Admin"/>
    <deny users="*" />
  </authorization>
</system.web>
</location>

<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

这可以在 Web.config 中实现吗？或者我只是使用相关函数上方的授权+角色访问定义属性，对于这个特定的场景？

我已经看到用于限制对文件夹和特定页面的访问的 location 元素，但还没有遇到 URL 路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:12:29.337

您不能在 MVC 应用程序中使用授权和/或位置元素。要在 MVC 应用程序中获得授权支持，请`[Authorize]`在控制器级别（然后所有操作都需要授权）或操作级别应用属性

# c# - EF Code First 实现中的触发逻辑

> ID：14893509
> 
> 赞同：1
> 
> 时间：2013-02-15T11:16:18.997
> 
> 标签：c#, sql-server, asp.net-mvc-4, entity-framework-5, code-first

我已将我的 MVC 应用程序数据库实现从`database first to code first`. 唯一剩下的就是搬家了`Triggers`。我不知道把它们放在哪里。我应该将它们放入`Repository`并实施它们`add/ edit / delete methods`吗？或者，根据存储库操作，可能有更合适的位置来执行触发器。请让我对代码优先方法中的触发器实现有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:25:07.080

无法在这里提供大量帮助，因为我从来没有这样做过，但是您可以根据您正在谈论的触发器数量来查看覆盖[DbContext.SaveChanges ......](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.savechanges%28v=vs.103%29.aspx)

*更新*看看[这个问题](https://stackoverflow.com/questions/11533390/replace-t-sql-triggers-with-entity-framework-4-0-code)以获得更好的例子。

# javascript - 在javascript中比较2个字符串

> ID：14893510
> 
> 赞同：0
> 
> 时间：2013-02-15T11:16:21.350
> 
> 标签：javascript, xml, if-statement, string-comparison

我正在尝试使用 IF 语句从 XML 中读取一些特定数据，但它似乎不起作用。我的代码：

```
tipo=(x[i].getElementsByTagName("tipo")[0].childNodes[0].nodeValue);
subcategoria=(x[i].getElementsByTagName("subcategoria")[0].childNodes[0].nodeValue);
    if (tipo=="comer" && subcategoria=="bodegas") {
        Bodegas.push(x[i].getElementsByTagName("nombre")[0].childNodes[0].nodeValue)

    }; 
```

我一直在通过警报进行调试，我可以肯定的说 Tipo 和子类别的值是“comer”和“bodegas”，但是当我在 if 语句中放置警报时它不会运行，所以我猜比较是没有正确完成。有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:25:02.257

在比较字符串时，始终在查询的两侧调用`trim()`and以确保没有大小写或空格问题。`toLowerCase()`

# windows - MobaXterm 拖放面板丢失

> ID：14893512
> 
> 赞同：21
> 
> 时间：2013-02-15T11:16:36.827
> 
> 标签：windows, unix, remote-access, file-transfer

我需要从使用 MobaXterm 安装在远程 UNIX 机器上的 windows xP 机器上运行一个程序，但我对这类事情的经验很少。

我可以使用 ssh 登录机器并毫无问题地启动程序。该程序需要我在 Windows 计算机上处​​理的文件，但我想将它们复制到该远程计算机上。不幸的是，mobaxterm 帮助网站上经常提到的拖放文件传输面板不存在，我不知道如何让它出现。

有人可以建议如何让该拖放面板出现吗？我正在使用 MobaXterm 3.0 版。

或者，任何关于如何以另一种方式传输这些文件的解释也将不胜感激。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2018-03-02T10:11:52.883

如果尝试以上所有方法仍然不起作用，请尝试以下操作：

创建会话时，将 **Advanced SSH setting-->SSH-browser** type 更改为**SCP**，默认为 SFTP。. 感谢[willfurnass](https://github.com/mikecroucher/Intro_to_HPC/issues/2)

[![在此处输入图像描述](../Images/015400665cf7307875953f3fa4c42e38.png)](https://i.stack.imgur.com/lgg2i.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-16T23:42:16.120

某些 Linux 发行版或某些其他 Unix 系统默认禁用 SSH 密码验证。

为了让 MobaXterm 能够启动 SFTP 浏览器，您必须重新启用此功能：

*   编辑服务器上的“/etc/ssh/sshd_config”文件，并注释以下行：PasswordAuthentication no
*   使用以下命令重新启动 SSH 服务器：/etc/init.d/sshd restart
*   使用 MobaXterm SSH 客户端连接，您会注意到 SFTP 选项卡将正确启动。

如果您无法修改远程服务器配置，您也可以使用 SCP 在 MobaXterm 终端内执行文件传输。一个示例 SCP 命令将是：

```
scp -r /drives/c/Some/Place/On/Your/Local/Windows/Drive/ yourlogin@yourserver:/Some/Place/On/Your/Remote/Unix/Server/ 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-10T17:44:42.327

确保在“高级 SSH 设置”下的会话设置中启用了“显示 SFTP 浏览器”。

![在此处输入图像描述](../Images/35a44d09ac02a4896a6c746e7ce40439.png)

偶尔它不会再次出现，通过重启 MobaXterm 解决。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-29T12:03:37.613

缺少 sftp 面板的另一个原因是您不小心输入并存储了错误的 sftp 密码。然后 MobaXterm 似乎会尝试自动登录，但无法打开 sftp 连接。

要解决此问题，请转到“设置”>“MobaXterm 密码管理”并删除有问题的密码。这是设置页面的屏幕截图，显示了密码管理链接。

[![在此处输入图像描述](../Images/baf7c454aeca0606cab2ed5590a5b67e.png)](https://i.stack.imgur.com/1459o.png)

需要明确的是，我已经完成了@Nicolas 和@Didier 提到的设置（谢谢，伙计们！）。ssh 进入其他主机（没有存储错误密码）时，我能够获得 sftp 选项卡。而且我过去曾见过 sftp 窗格。此修复解决了我的问题。

如果您*从未*见过 sftp 窗格，请先尝试其他建议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-07T17:55:55.980

> 你有没有尝试过：
> 
> **关闭程序然后重新打开？**

*注意：我在评论中读到了这个提示，这让我免于不必要地修复 mobaXterm 的繁琐过程，因此我也不是唯一一个有这种行为的人。尽管这可能是您已经尝试过的第一件事，但有些人可能没有尝试过并且没有幸运地阅读评论 - 这是给他们的。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-12T10:06:28.943

对于最新版本，请确保您在“SSH-browser”选择器中选择了“SFTP 协议”： [![在此处输入图像描述](../Images/43e4ccdc9eb8c6ecb4e12834fa72521c.png)](https://i.stack.imgur.com/jVa21.png)

# version-control - 在另一个中使用一个 mercurial 项目的最佳实践

> ID：14893521
> 
> 赞同：1
> 
> 时间：2013-02-15T11:17:35.550
> 
> 标签：version-control, mercurial, mercurial-subrepos

在另一个项目中使用一个 mercurial 项目的最佳实践是什么？我有一个正在开发的 django 应用程序，但我也在使用 mercurial 对使用该应用程序的网站进行版本控制。我看过[mercurial subrepositories](http://mercurial.selenic.com/wiki/Subrepository)，但显然这被认为是“不得已而为之的功能”。有没有一种很好的方法来做我想做的事情，或者当我想更新到我的应用程序的新版本时，我只需要将代码从我的应用程序复制到我的网站存储库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:48:26.687

在您的特定情况下，我喜欢让`pip`处理我的 django 应用程序依赖项：http: [//guide.python-distribute.org/pip.html#installing-from-a-vcs](http://guide.python-distribute.org/pip.html#installing-from-a-vcs)

我们在我们的“网站”repo 中有 a`requirements.txt`并且我们的 deploy 会`pip install --upgrade -r requirements.txt` 从 repo 中提取最新的并将其安装到应用程序的虚拟环境中。这提供了很好的灵活性和分离性，同时将包管理留给 pip。使用 pip 中的这些 VCS url，如果您希望不同的站点使用来自同一底层存储库的不同修订版，您也可以指向特定的标签或分支。

pip 还具有`-e /path/to/file`指向网站存储库之外的“可编辑”克隆的模式，这也可以，但我没有尝试过。

也就是说，如果您认为 subrepos 更适合您的工作流程，请务必使用它们。它们工作得很好，但人们经常被工作流程限制所困扰（“你的意思是我不能提交我的父仓库而没有提交子仓库？！”）

# javascript - 即使我测试变量是否存在，JavaScript也会中断

> ID：14893522
> 
> 赞同：0
> 
> 时间：2013-02-15T11:17:39.757
> 
> 标签：javascript, jquery

当 PHP 构建 HTML 文档时，我向`var myVariable = 'somedata';`其中添加了一个 .js 文件使用的代码。当然，必须为未设置的变量准备该文件的代码。

做一些测试，我发现如果我不在 HTML 中设置变量，Firebug 控制台报告`myVariable is not defined`和代码中断：在调用使用该变量的函数之后应该运行的所有内容都不会运行。

只有那个函数需要那个变量，所以我希望它很好地返回而不是中断，所以我使用`if(undefined === myVariable) return;`了 ，但它没有用。控制台仍然报告该错误，并且 JS 仍然中断。

测试变量是否在使用之前定义的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:20:36.167

请改为检查变量的类型：

```
if (typeof myVariable === "undefined") 
```

# android - Android 可旋转饼图

> ID：14893524
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:17:45.540
> 
> 标签：android, animation, charts, pie-chart

我是 Android 图形的新手，我想实现一个可旋转的饼图，用户应该能够旋转/甩饼，它还应该响应点击事件，如本视频所示，

[优酷示例](http://www.youtube.com/watch?v=dT2u96__SiQ)

我尝试了 achartengine，但他们不支持在饼图中旋转。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T00:28:05.367

我刚刚完成了这样一个饼图的初稿，在这里查看：[https ://github.com/saulpower/ExpandablePieChart](https://github.com/saulpower/ExpandablePieChart)

# hive - 将数据加载到表中

> ID：14893525
> 
> 赞同：3
> 
> 时间：2013-02-15T11:17:54.057
> 
> 标签：hive, dbvisualizer

我是 Hive 新手并使用 DBVisualizer 进行配置

我在路径 * *D:\data files\datafiles**中有一个文本文件。我想将其中一个文件中的数据加载到在 hive 中创建的表中。当我尝试以下时，

```
load data inpath "D:\data files\sample.txt" into table sample; 
```

它显示错误，例如，

```
 cause: FAILED: Error in semantic analysis: Line 1:17 Invalid path "D:\data files\sample.txt": only "file" or "hdfs" file systems accepted 
```

如何继续，将该文件放置在正确的路径中以及放置它的位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T17:19:12.000

您可以将该文件上传到 hdfs 并尝试使用 hdfs 路径执行相同的命令。

或者

您可以使用以下本地关键字。

```
load data local inpath "D:\data files\sample.txt" into table sample; 
```

检查此以获取[更多详细信息](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Loadingfilesintotables)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-18T08:50:41.143

反斜杠在这里可能是个问题。尝试：

```
load data inpath "D:/data files/sample.txt" into table sample; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T06:41:40.133

如果您要将数据从本地机器加载到 HDFS，我们必须在加载数据命令中使用“LOCAL”：将数据 LOCAL inpath “D:\data files\sample.txt”加载到表示例中；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T13:55:10.770

有两种方法可以加载数据。

首先从本地加载数据，然后从 HDFS 加载另一个数据......但路径因操作系统而异。如果从 Linux 加载数据：

load data local inpath '/home/local/path/sample.txt' into table sample.//本地路径

load data inpath '/home/hadoop/path/sample.txt' into table sample.// Hadoop路径

如果在 Windows 中：

将路径中的数据“D:/data files/sample.txt”加载到表样本中；//这里仔细观察/不是\ok。

将数据本地路径“D:/data files/sample.txt”加载到表样本中；//本地路径

检查一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T06:01:11.720

将数据本地路径“D:\data files\sample.txt”加载到表样本中；

通过使用上面的命令，它会查找 hdfs 的位置，但提到的路径是本地环境所以使用下面的命令只有我们才能解决这个问题

加载数据本地路径“D:\data files\sample.txt”覆盖到表样本中；

通过使用上述命令数据覆盖到提到的表中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-06T12:31:59.993

您可能没有将 sample.txt 文件存储为“.txt”文件。

请检查文件是否正确保存为“.txt”文件，然后重试。

# php - (PHP) 未经许可获取 AccessToken 和 feed。（有点）

> ID：14893526
> 
> 赞同：1
> 
> 时间：2013-02-15T11:17:59.130
> 
> 标签：php, facebook, feed, status, access-token

我开始写博客，我想为博客制作一个“FacebookStatusApp”。它所要做的就是获取我的最新状态并将其请求到我的翻译页面。我可以获得最新的提要，但问题是访问令牌。我找到了一种方法来每 9 分钟刷新一次我的 access_token。这是一个网站，叫：

[https://mywebcron.com/](https://mywebcron.com/)

该站点将每 X 分钟调用一次您的网址。我选择了9分钟。

我的更新代码非常简单：

```
<?php
$file = file_get_contents("fbat.txt");
$token = $file;

$token_url = "https://graph.facebook.com/oauth/access_token?client_id=100000280644272&client_secret=secret&grant_type=fb_exchange_token&fb_exchange_token=".$token;

$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($c, CURLOPT_URL, $token_url);
$contents = curl_exec($c);
$err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
curl_close($c);

$paramsfb = null;
//parse_str($contents, $paramsfb);
echo $contents;
?> 
```

“Fbat.txt”包含当前的 AccessToken。

但我的帐户需要一个 client_secret。而且我无法为我的 Facebook 帐户获取 AccessToken：/

因此，我的解决方案是使用 MY ClientID 和 HIS ClientSecret 以及“GRAPH EXPLORER”创建一个新应用程序来生成 access_token。

所以我的问题是：如何获得我的最新状态和我的 access_token。?

如果有一个好的替代方案（例如使用 APP），我也可以这样做。

好吧，我希望你能理解我的问题：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:02:19.970

首先，您的提要需要公开。下面的代码应该做剩下的事情：

```
function fb_setup(){

    $app_id = 'APP_ID';
    $app_secret = 'APP_SECRET';

    $response = file_get_contents('https://graph.facebook.com/oauth/access_token?type=client_cred&client_id='.$app_id.'&client_secret='.$app_secret);

    $token = str_replace('access_token=', '', $response);

    $node = "PAGE_ID(if not a page just use 'me')";
    $fields = array();
    $fields[] = 'feed';
    $fields[] = 'likes';

    $response = file_get_contents('https://graph.facebook.com/'.$node.'?fields='.implode(',', $fields).'&access_token='.$token.'');

    $arr = json_decode($response);

    $data['node'] = $node;
    $data['arr'] = $arr;

    return $data;

}
function last_post(){

    $ret = fb_setup();
    $arr = $ret['arr'];
    $node = $ret['node'];

    $feed = $arr->feed->data;

    $ret = "";
    $ret .= "<div id='last-fb-post'>";
    $item = $feed[0];

    $message = str_replace("\n","</p><p>",$item->message);
    $likes = (!$item->likes->count) ? '0' : $item->likes->count;
    $coms = $item->comments->count;
    $ex_id = explode('_',$item->id);
    $id = $ex_id[1];

    $href = 'http://www.facebook.com/permalink.php?story_fbid='.$id.'&id='.$node;

    $ret .= '<a class="title" target="_blank" href="'.$href.'">Last Update: <u>' . date("F j, Y",strtotime($item->created_time)) . '</u></a>';
    if($item->type == 'photo'){
        $ret .= '<div class="fb_img"><a target="_blank" href="'.$href.'"><img src="'.$item->picture.'"/></a></div>';
    }
    $ret .= "<p class=\"msg\">";
    $ret .= $message;
    $ret .= "</p>";
    $ret .= "<p class='likes'><a htarget=\"_blank\" href=\"$href\">$likes</p>";

    $ret .= "</div>";

    return $ret;

} 
```

# forms - 非常大的外形设计

> ID：14893528
> 
> 赞同：1
> 
> 时间：2013-02-15T11:18:09.967
> 
> 标签：forms

我的表格很大，最多可以有 1000 个元素。它有许多嵌入式表单，其中有另一个嵌入式表单，显然它们默认是折叠的。

我的表单有一些用户可以开始的入口点，大多数控件不是必需的，表单被分成几部分。每个子表单都可以折叠到摘要框中。

我认为这种形式的工作流程是可以的。用户可以打开它，在一个页面中他可以对数据进行多种类型的更改，并且在大多数情况下，这些操作不会相互关联。

有没有关于这么大的一页表单设计的设计参考和研究？也许一些关于使用输入控件模式设计 UI 的标准？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:22:46.710

您需要提供工作流程。单页上那么大的表格会让人们感到困惑，甚至导致人们懒得填写。

将其分解为更小的表单，并提供向导式导航过程，以便在用户填写表单的某些部分时从一个页面移动到下一个页面。

即便如此，1000 个数据点对于一个表格来说已经很多了，而且要求人们在一个会话期间填写很多数据。因此，您最好允许人们留下部分填写的表格，稍后再返回填写，而不必重新执行他们已经输入的内容。需要某种会话保存工具。

# zend-framework - 授权 http 标头在 Zend Soap Client 上不起作用

> ID：14893530
> 
> 赞同：0
> 
> 时间：2013-02-15T11:18:23.173
> 
> 标签：zend-framework, soap

我使用以下代码使用 API 从第三方站点检索类别，但不幸的是，无法在其 API 处请求流上下文并导致内部错误。

仅供参考：它在zend框架下使用。

```
$header = "Authorization: Bearer ".$accestoken."\r\n"."Content-Type:text/xml";//.'Content-Type:application/xml';

$wsdl = 'wsdl url';

$context = stream_context_create(array('http' => array('header' => $header,'method'=>'GET')));

             $options = array('stream_context'=>$context,'encoding'=>'ISO-8859-1','exceptions'=>FALSE);

            $params = array ('accessToken' => $accestoken);

            $response = $client->getAdCategories($params);

             print_r($response); 
```

所以请找到上面的代码并为这个问题提供一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:12:26.243

```
$httpHeaders = array(
            'http'=>array(
            'protocol_version' => 1.1,
            'header' => "Authorization:Bearer ".$accestoken."\r\n" ,
                    "Connection: close"
            ));

$context = stream_context_create($httpHeaders);

    $soapparams = array(                    
                                            'stream_context' => $context,

                            );
$client = new SoapClient($wsdl, $soapparams);
$response = $client->getAdCategories($params);

         print_r($response); 
```

请参考[https://bugs.php.net/bug.php?id=49853](https://bugs.php.net/bug.php?id=49853)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:30:54.037

好的，我至少在标题中看到这是您正在尝试使用的 SOAP 服务。然后，您应该使用类似 [`Zend_Soap_Client`](http://framework.zend.com/manual/1.12/en/zend.soap.client.html).

看起来你有一个 WSDL ......所以，

```
$client = new Zend_Soap_Client("yourwsdl.wsdl"); 
```

然后提出一个请求

```
$retval = $client->method1(10); 
```

查看您的代码，我不能 100% 确定正在使用哪种身份验证方法。如果是基本 HTTP 身份验证，您可以在客户端的构造函数中将用户名和密码作为选项传递。

设置标题可能如下所示：

```
$auth = new stdClass();
$auth->user = 'joe';
$auth->token = '12345'; 

$authHeader = new SoapHeader('authNamespace', 'authenticate', $auth);

$client->__setSoapHeaders(array($authHeader)); 
```

如果您需要更多帮助，请发布您的 WSDL。

# less - TwitterBootstrap + mvc，如何将动态宽度传递给 boostrap .less 类

> ID：14893534
> 
> 赞同：4
> 
> 时间：2013-02-15T11:18:37.957
> 
> 标签：less

我正在使用 TwitterBootstrap，我想传递按钮宽度动态..就像下面的代码

![这是我的 mvc(view) 页面，我在其中给出/设置类名](../Images/78693c4e770bc3d7b0035bb97d4ec491.png)

![这是buttons.less 文件](../Images/d28f57be1149267c7f589a75beafcacc.png)

![这是 varible.less 文件](../Images/c554d9aefbbcb46f660fe402c568723c.png)

我想从客户端（从视图（MVC））**动态传递****“@wth”**值。现在它静态地出现**在**varibles.less**文件**中......但我想直接从视图（MVC）传递。

 ******> 那么，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:28:47.377

虽然如果你在浏览器中使用 less.js 给人的印象是能够做动态的事情，但这些样式都被编译成 CSS 文件，并且在它们应用于你的 html 时具有固定的值。因此**，您无法在页面加载后更改 Less 变量的值**。

如果您需要根据一些预设尺寸动态更改按钮的宽度，我会说您应该将类​​添加到您的 css（小、中、大等），然后将该类动态添加到您的CSS 通过 Jquery 的[addClass](http://api.jquery.com/addClass/)方法。

如果您需要直接设置宽度，我会使用 Jquery 的[css](http://api.jquery.com/css/)方法。

如果您要做很​​多此类事情，您可能需要考虑使用可以将 Javascript 对象绑定到您的 html 样式的数据绑定库，例如[Knockout](http://knockoutjs.com/)。******

# android - 无法获得正确的自定义 AlertDialog

> ID：14893540
> 
> 赞同：0
> 
> 时间：2013-02-15T11:18:58.790
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

我一直在尝试设置自定义 AlertDialog 但无法正确设置。

提示.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#ffe3e3"
    xmlns:tools="http://schemas.android.com/tools" 
    tools:ignore="HardcodedText">

    <TextView
        android:id="@+id/prompttitile"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|left"
        android:padding="5dp"
        android:text="Error Title Here"
        android:textColor="#c50200"
        android:textSize="16sp"
        android:textStyle="normal" 
        android:visibility="visible"
        />
    <TextView
        android:id="@+id/promptmessage"
        android:layout_below="@+id/prompttitile"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:padding="5dp"
        android:text="Error Title Here"
        android:textColor="#c50200"
        android:textSize="16sp"
        android:textStyle="normal" />   
    <LinearLayout 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/promptmessage"
        android:weightSum="2"
        android:padding="10dp"
        android:background="#333"
        >
        <Button 
            android:text="@android:string/no"
            android:id="@+id/promptno"
            android:layout_width="0sp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:padding="7dp"
            android:textColor="@android:color/black"
            android:textSize="14sp"
            android:textStyle="bold"
            android:background="@drawable/button_selector"
            android:layout_marginRight="5dp"
            android:gravity="center"
            />

        <Button 
            android:text="@android:string/ok"
            android:id="@+id/promptok"
            android:layout_width="0sp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:padding="7dp"
            android:textColor="@android:color/black"
            android:textSize="14sp"
            android:textStyle="bold"
            android:background="@drawable/button_selector"
             android:gravity="center"
            />
    </LinearLayout>
</RelativeLayout> 
```

![在此处输入图像描述](../Images/eeded0c0f02591b4cdb2efd3cc818a01.png)

我在 AlertDialog 的顶部得到黑色背景，我只想显示 AlertDialog。

**对话代码**

```
Dialog d=new Dialog(mContext);
d.setContentView(R.layout.prompt);
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
lp.width = WindowManager.LayoutParams.WRAP_CONTENT;
lp.height = WindowManager.LayoutParams.WRAP_CONTENT;
d.getWindow().setAttributes(lp);
d.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:25:57.800

试试这个

```
Dialog dialog = new Dialog(MainAppActivity.this, R.style.PauseDialog);
dialog.setContentView(R.layout.prompt);
dialog.setCancelable(true);
dialog.show(); 
```

在 style.xml 中

```
<style name="PauseDialog" parent="@android:style/Theme.Translucent.NoTitleBar"></style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:27:49.490

```
 Dialog d=new Dialog(this);
    //Add this
    d.requestWindowFeature(Window.FEATURE_NO_TITLE);

    d.setContentView(R.layout.prompt);
    WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
    lp.width = WindowManager.LayoutParams.WRAP_CONTENT;
    lp.height = WindowManager.LayoutParams.WRAP_CONTENT;
    d.getWindow().setAttributes(lp);
    d.show(); 
```

# tinymce - Tinymce Ajax 文件/图像管理器

> ID：14893541
> 
> 赞同：1
> 
> 时间：2013-02-15T11:19:02.140
> 
> 标签：tinymce

“Ajax 文件/图像管理器” - 非常流行的 TinyMCE 插件，可能已经有人像我一样遇到过同样的错误，你会帮助我的。

上传图片或按“刷新”按钮后 - 出现在底部的间距和不正确的显示菜单。如何解决这个问题？谢谢

![在此处输入图像描述](../Images/ca16b511881581efbbad7cf297442d94.png)

# android - 如何从 Qt Creator 在 Android AVD 和真实设备之间切换

> ID：14893542
> 
> 赞同：2
> 
> 时间：2013-02-15T11:19:12.317
> 
> 标签：android, qt-creator

标题基本上说明了一切，我希望能够从 Qt Creator 中指定是在模拟器还是在真实设备上启动我正在开发的应用程序。

现在 Qt Creator 会自动为我做出这个选择，因此要部署到真实设备，我必须关闭模拟器，以便 QtCreator 选择真实设备。然而，这个问题是模拟器启动真的很慢......

如果 Necessitas Qt Creator 无法做到这一点，那么至少 android-sdk 工具是否支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T13:05:21.477

不幸的是，我找不到任何可以使 Qt Creator 在 AVD 模拟器和真实目标之间切换的开关或文档。

到目前为止，我发现的唯一可靠的解决方法是关闭 Qt Creator，断开/重新连接目标的 USB 电缆并重新打开 Qt Creator。通过这种方式，真实设备被视为主要目标并默认使用。

# grid - 网格加载后聚焦或选择行

> ID：14893543
> 
> 赞同：0
> 
> 时间：2013-02-15T11:19:12.440
> 
> 标签：grid, selection, dojo, dojox.grid.datagrid

*   我有一个带有按钮的 jsp 页面。
*   单击按钮时，它会动态创建一个道场网格。
*   加载网格后，正在遍历网格，如果存在特定值，则选择整行。
*   我通过使用下面的代码实现了它，行被选中，但出现错误。
*   错误：“错误：dojo.data.ItemFileReadStore：无效的项目参数”
*   我正在使用 dojoX.grid.DataGrid(1.7)

下面是创建动态网格的代码：

```
var ioArgs = {
            url: "./DynamicDBServlet",
            content: { TABLE_NAME:tableName,WHERE_CONDN:condtn,COLUMNS:gridColumnName,ACTION:'select'}, 
            handleAs: "json",
            load: function(response) {
                //alert(response["items"][0].USER_ID);
                 var tbl = document.getElementById(gridID);
                 //alert(tbl);
                  if(tbl) tbl.parentNode.removeChild(tbl);
                var gridLayout = [];
                var key;
                colmn=gridColumnName.split(',');
                var i=0;
                while(i<colmn.length)  {
                    if(colmn[i]=="STATUS"){
                        key = colmn[i];
                        gridLayout.push({
                        field: key, 
                        name: displayName[i],
                        formatter:function(opvalue){
                            //alert(opvalue);
                            opvalue = parseInt(opvalue);
                            if(opvalue==1){
                                return "Executing";}
                            if(opvalue==2){
                                return "Suspended";}
                            if(opvalue==3){
                                return "Completed";}
                            if(opvalue==4){
                                return "Aborted";}
                            if(opvalue==5){
                                return "Error";}
                            if(opvalue==6){
                                return "Terminated";}},
                        width: '200px',
                        editable: false});
                        i++;
                    }if(colmn[i]=="PRIORITY"){
                        key = colmn[i];
                        gridLayout.push({
                        field: key, 
                        name: displayName[i],
                        formatter:function(opvalue){
                            if(opvalue==1){
                                return "High";}
                            if(opvalue==8){
                                return "Normal";}
                            if(opvalue==15){
                                return "Low";}
                            },
                        width: '200px',
                        editable: false});
                        i++;
                    }if(colmn[i]=="PROCESS_METADATYPE"){
                        key = colmn[i];
                        gridLayout.push({
                        field: key, 
                        name: displayName[i],
                        formatter:function(opvalue){
                            if(opvalue==4497){
                                return "Provisioning Sub Process";}
                            if(opvalue==4496){
                                return "Provisioning Loop";}
                            if(opvalue==4494){
                                return "Main Process";}
                            },
                        width: '200px',
                        editable: false});
                        i++;
                    }if(colmn[i]=="ORDER_TYPE"){
                        key = colmn[i];
                        gridLayout.push({
                        field: key, 
                        name: displayName[i],
                        formatter:function(opvalue){
                            if(opvalue==4488){
                                return "Training Order";}
                            },
                        width: '200px',
                        editable: false});
                        i++;
                    }else{
                        key = colmn[i];
                        gridLayout.push({
                        field: key, 
                        name: displayName[i],
                        width: '200px',
                        editable: false});
                        i++;
                    }
                }
                //alert(gridLayout);
                var gridStore = new dojo.data.ItemFileWriteStore({
                    data: response
                }); 
                var dumm = dijit.byId('dynamicgrid'+tableName); 
                if(dumm) { 
                    dumm.destroy(); 
                } 

                    var finderResponse = new dojox.grid.DataGrid({
                        id:"dynamicgrid"+tableName,
                        query: { },
                        store:gridStore,
                        structure: gridLayout,
                        selectionMode: "single"
                    }, document.createElement("div"));
                    dojo.byId(parentDiv).appendChild(finderResponse.domNode);
                    //var varb=dijit.byId("finderResponseGrid"+tableName);
                    //alert(varb);
                    //varb.layout.setColumnVisibility(0, false);
                    gbshowgridFlag = true;
                    finderResponse.startup();
                    //dijit.byId('dynamicgridCWPROCESS').focus.setFocusIndex(0);
                    try{
                     for( var i=0; i < dijit.byId('dynamicgridCWPROCESS').rowCount; i++){
                         var items = dijit.byId('dynamicgridCWPROCESS').getItem(i);
                         var value=dijit.byId('dynamicgridCWPROCESS').store.getValue(items,"PROCESS_ID");
                         if(value=="2507"){
                             dijit.byId('dynamicgridCWPROCESS').selection.setSelected(i,true);

                         }
                         }
                    if(defineDbl){
                        getProcessgrid();
                    }
                }catch(e){
                    alert(e);
                }
                },
            error: function(error) {
                alert("An unexpected error occurred: " + error);
            }
    };
    var deferred = dojo.xhrPost(ioArgs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T11:07:03.503

```
function selectRowByYourOwn(){
var row = null;

// you have to get is some have.. try onSelected='yourOwnFn', on your table tag or your div tag.
// function yourOwnFn(rowID){ row = rowID;}

grid.selection.clear();
grid.selection.setSelected(row, true);
grid.render();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:03:23.717

此代码帮助我在网格中选择行：

```
grid.selection.select(rowIndex); 
```

在你的情况下：

```
finderResponse.selection.select(rowIndex); 
```

我希望这能解决你的问题。

# database - 仅当根据 Oracle 中的检查约束有效时，如何在表之间复制记录？

> ID：14893545
> 
> 赞同：0
> 
> 时间：2013-02-15T11:19:23.143
> 
> 标签：database, oracle, check-constraints

我不知道这是否可能，但我想将一堆记录从临时表复制到普通表。问题是某些记录可能违反检查约束，因此我想插入所有可能的内容并在其他地方为无效记录生成错误日志。

如果我执行：

```
INSERT INTO normal_table
  SELECT ... FROM temp_table 
```

如果任何记录违反任何约束，则不会插入任何内容。我可以做一个循环并手动插入，但我认为性能会更低。

Ps：如果可能的话，我想要一个适用于 Oracle 9 的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:41:36.367

在 Oracle 10gR2 中，您可以使用以下[`log errors`子句](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9014.htm#BCEGDJDJ)：

```
EXECUTE DBMS_ERRLOG.CREATE_ERROR_LOG('NORMAL_TABLE');
INSERT INTO normal_table
   SELECT ... FROM temp_table
   LOG ERRORS REJECT LIMIT UNLIMITED; 
```

以最简单的形式。然后你可以看到你得到了什么错误：

```
SELECT ora_err_mesg$
FROM err$_normal_table; 
```

更多关于[这里](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_errlog.htm)`CREATE_ERROR_LOG`的步骤。

* * *

~~我认为这种方法适用于 9i，但没有可用于测试的实例，因此这实际上是在 11gR2~~
更新上运行的：在 9i 中测试和调整（以避免 PLS-00436）：

```
declare
    type t_temp_table is table of temp_table%rowtype;
    l_temp_table t_temp_table;
    l_err_code err_table.err_code%type;
    l_err_msg err_table.err_msg%type;
    l_id err_table.id%type;

    cursor c is select * from temp_table;

    error_array exception;
    pragma exception_init(error_array, -24381);
begin
    open c;
    loop
        fetch c bulk collect into l_temp_table limit 100;
        exit when l_temp_table.count = 0;

        begin
            forall i in 1..l_temp_table.count save exceptions
                insert into normal_table
                values l_temp_table(i);
        exception
            when error_array then
                for j in 1..sql%bulk_exceptions.count loop
                    l_id := l_temp_table(sql%bulk_exceptions(j).error_index).id;
                    l_err_code := sql%bulk_exceptions(j).error_code;
                    l_err_msg := sqlerrm(-1 * sql%bulk_exceptions(j).error_code);
                    insert into err_table(id, err_code, err_msg)
                    values (l_id, l_err_code, l_err_msg);
                end loop;
        end;
    end loop;
end;
/ 
```

使用您所有的真实列而不是`id`，我只是出于演示目的而这样做：

```
create table normal_table(id number primary key);
create table temp_table(id number);
create table err_table(id number, err_code number, err_msg varchar2(2000));

insert into temp_table values(42);
insert into temp_table values(42); 
```

然后运行上面的匿名块...

```
select * from normal_table;

        ID
----------
        42

column err_msg format a50
select * from err_table;

        ID   ERR_CODE ERR_MSG                                          
---------- ---------- --------------------------------------------------
        42          1 ORA-00001: unique constraint (.) violated 
```

这在几个级别上不太令人满意 - 更多的编码，如果你有很多异常（因为这些异常的单独插入）会更慢，不显示违反了哪个约束（或任何其他错误细节），并且不会如果您回滚，请保留错误 - 尽管如果这是一个问题，您可以调用一个自治事务来记录它，我在这里对此表示怀疑。

如果您的数据量足够小，不想担心该`limit`子句，您可以稍微简化一下：

```
declare
    type t_temp_table is table of temp_table%rowtype;
    l_temp_table t_temp_table;
    l_err_code err_table.err_code%type;
    l_err_msg err_table.err_msg%type;
    l_id err_table.id%type;

    error_array exception;
    pragma exception_init(error_array, -24381);
begin
    select * bulk collect into l_temp_table from temp_table;

    forall i in 1..l_temp_table.count save exceptions
        insert into normal_table
        values l_temp_table(i);
exception
    when error_array then
        for j in 1..sql%bulk_exceptions.count loop
            l_id := l_temp_table(sql%bulk_exceptions(j).error_index).id;
            l_err_code := sql%bulk_exceptions(j).error_code;
            l_err_msg := sqlerrm(-1 * sql%bulk_exceptions(j).error_code);
            insert into err_table(id, err_code, err_msg)
            values (l_id, l_err_code, l_err_msg);
        end loop;
end;
/ 
```

9i 文档似乎不再在线，但这是在一个[新功能文档](http://www.oracle.com/technetwork/database/features/plsql/documentation/plsql-9i-new-features-doc-129923.pdf)中，并且很多人都写过它——[这里也有人问过](https://stackoverflow.com/search?q=%5Boracle%5D+%22save+exceptions%22)它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:43:17.767

如果您只对检查约束特别感兴趣，那么可以考虑的一种方法是从数据字典中读取目标检查约束的定义，并将它们作为谓词应用于使用动态 sql 从源表中提取数据的查询。

鉴于：

```
 create table t1 (
   col1 number check (col1 between 3 and 10)) 
```

你可以：

```
select  constraint_name,
        search_condition
from    user_constraints
where   constraint_type = 'C' and
        table_name = 'T1' 
```

结果是：

"SYS_C00226681", "col1 介于 3 和 10 之间"

正如他们所说，从那里开始，这是“一个简单的编码问题”，并且该方法几乎适用于任何版本的 Oracle。最有效的方法可能是使用多表插入将行定向到预期的目标表或基于应用检查约束谓词的 CASE 语句的结果的错误记录表。

# webrtc - 我可以在 OnAddStream() 事件中调用 peerconnection->addStream(stream)

> ID：14893553
> 
> 赞同：1
> 
> 时间：2013-02-15T11:19:41.640
> 
> 标签：webrtc, libjingle

我尝试在服务器和客户端之间建立对等连接。我通过对等连接将本地视频流从客户端发送到服务器，当服务器在 onAddStream() 事件中接收到它时，它会接收该流并将其添加到对等连接，并使用 addStream() 将其发送回客户端，它最初来自哪里。服务器端的源代码如下所示：

```
void ServerPeerConnection::OnAddStream(webrtc::MediaStreamInterface* stream)
{
  this->AddStream(stream);
} 
```

我知道这似乎毫无意义，但这是在更进一步之前实施的第一步。

所以我问你是否允许序列？我应该在 SDP 参数在对等方之间传输之前 addStream() 还是可以在之后调用 addStream() 。现在这样做我有以下错误日志：

* * *

错误（statscollector.cc:192）：SSRC 2128160837 未与轨道关联

错误（statscollector.cc:192）：SSRC 0 未与轨道关联 Transport::ConnectChannels_w：未设置本地描述。会生成一个。叮当声：频道[音频|1| **]：提供了 NULL DTLS 身份。不做 DTLS Jingle:Channel[audio|2|** ]：提供了 NULL DTLS 身份。不做 DTLS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:37:56.997

您可以像这样**附加****远程流**：

```
var MediaStream = window.webkitMediaStream || window.MediaStream;

firstPeer.onaddstream = function(remoteSteam) {
      remoteStream = new MediaStream(remoteSteam.audioTracks, remoteSteam.videoTracks);
      otherPeer.addStream(remoteStream);  /* attaching remote stream */
}; 
```

[https://github.com/muaz-khan/WebRTC-Experiment/issues/2](https://github.com/muaz-khan/WebRTC-Experiment/issues/2)

# jquery - jq网格。自定义按钮。如何重定向页面？

> ID：14893554
> 
> 赞同：0
> 
> 时间：2013-02-15T11:19:43.707
> 
> 标签：jquery, jqgrid

我有包含图像的“操作”列。

```
add = "<input type='image' src='/add_24.png' onclick='onAdd('"+row_id+"','"+subgridTableId+"')';/>";

$("#"+subgridTableId).setRowData(ids[i], { act: add }); 
```

如何在**onClick**函数中重定向当前页面？

我已经尝试了所有已知的方法。但是当前页面只是重新加载本身。

有我的 onAdd 函数

```
function onAdd(id, pid) {

    window.open("www.msn.com");//1

    document.location.href = "sps/sites/main/export/_layouts/AddContractProperty.aspx";//2

    var form = $('<form>');//3
    form.attr('action', 'sps/sites/main/export/_layouts/AddContractProperty.aspx');
    form.attr('method', 'POST');

    // if(newWindow){ form.attr('target', '_blank'); }
    var input = $('<input type="hidden">');
    input.attr({ 'id': 'CID', 'value': cid});
    input.attr({ 'id': 'PID', 'value': pid});
    form.append(input);
    form.appendTo(document.body);
    form.submit();

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:46:09.307

首先，您使用`setRowData`网格来构造数据。[相反，使用自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)会更有效。如果您`gridview: true`另外使用它，您不仅可以简化代码，还可以提高它[的性能（详见答案](https://stackoverflow.com/a/12519858/315935)）。

要将页面重定向到新位置，您只需分配`location.href`新页面的完整 URL。不需要`window.open`。您可以在 URL 后面附加其他参数。如果您需要使用 HTTP GET 访问新页面，该方法非常有效。如果您需要使用带有 POST 的表单提交，您可以`<form>`使用现有的隐藏表单动态构建。无论如何，使用上述所有方法都是错误的。

另外，我建议您不要使用`onclick`属性来启动*全局*函数`onAdd`。取而代之的是，您可以使用`beforeSelectRow`or`onCellSelect`回调，因为[事件冒泡](http://en.wikipedia.org/wiki/DOM_events#Event_flow)将被调用。查看代码示例[的答案](https://stackoverflow.com/a/13765086/315935)。

# facebook - Facebook：我们如何最大化来自特定 source_id 的帖子计数？

> ID：14893556
> 
> 赞同：0
> 
> 时间：2013-02-15T11:19:48.843
> 
> 标签：facebook, facebook-graph-api, facebook-fql

现在我正在使用 FQL 从特定的 source_id 获取 facebook 帖子，

fql : SELECT post_id,message FROM stream where source_id="21540067693"

它只给出 20 个结果。有没有办法最大化没有。结果的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:13:47.497

well I get a solution with graph api by myself, I am posting it may be it will be helpful for someone

```
https://graph.facebook.com/[***page_id***]/posts?access_token=[******]&limit=1000 
```

# java - 构建javamail-android

> ID：14893557
> 
> 赞同：1
> 
> 时间：2013-02-15T11:19:51.047
> 
> 标签：java, android, maven, glassfish, jakarta-mail

我正在尝试自己构建库[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)。但是有文件丢失。例如 bootstrap/ant-common.xml 有人设法构建它吗？谢谢！

```
BUILD FAILED
java.io.FileNotFoundException: /Users/Downloads/javamail-android-read-     only/bootstrap/ant-common.xml (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileInputStream.<init>(FileInputStream.java:79)
    at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70)
    at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:651)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1313)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1250)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEntityReference(XMLDocumentFragmentScannerImpl.java:1906)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3033)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:307)
    at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:178)
    at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:82)
    at org.apache.tools.ant.Main.runBuild(Main.java:793)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:23:30.683

我发现了一个很棒的项目，它也是一个 Android 库项目。开箱即用：

[https://github.com/lucabelluccini/javamail_android](https://github.com/lucabelluccini/javamail_android)

我无法编译：

[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)

所有文件都未签入，作者不愿提供帮助。

# selenium - Selenium Web 驱动程序 - 单击元素时没有此类元素错误

> ID：14893558
> 
> 赞同：1
> 
> 时间：2013-02-15T11:19:52.663
> 
> 标签：selenium, selenium-webdriver

UI中的脚本

```
<div class=navdeactive><a href="technology.html">Technology</a></div> 
```

在执行以下脚本时

```
@driver.find_element(:link_text, "Technology").click 
```

出现错误>>

> Selenium::WebDriver::Error::NoSuchElementError: 找不到元素

但在视图中，源链接是可用的。

Web 驱动程序版本：**selenium-webdriver (2.25.0)**

帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:01:21.377

回答：在 UI 文本显示为**TECHNOLOGY**但在页面视图中源文本显示为**Technology** 我已将代码更改为 @driver.find_element(:link_text, "TECHNOLOGY").click...... 现在它工作正常...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:52:46.347

根据您的问题，您可以使用 xpath 并单击特定的 Html 定位器。使用 python web 驱动程序给了我下面的脚本。试试这个。

```
driver.find_element_by_xpath("//a[text()='Technology']").click() 
```

# mysql - 创建表查询中的语法错误

> ID：14893564
> 
> 赞同：0
> 
> 时间：2013-02-15T11:20:08.210
> 
> 标签：mysql, sql, phpmyadmin, syntax-error

我不能得到这个语法错误。

#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`id`在第 15 行的 '( ) ENGINE=MyISAM)'附近使用正确的语法

```
CREATE TABLE IF NOT EXISTS  `destination_cdr` (
 `id` BIGINT( 20 ) NOT NULL AUTO_INCREMENT ,
 `calldate` DATETIME NOT NULL ,
 `source` VARCHAR( 80 ) NOT NULL ,
 `destination` VARCHAR( 80 ) NOT NULL ,
 `account_code` VARCHAR( 30 ) DEFAULT NULL ,
 `pincode` VARCHAR( 45 ) NOT NULL ,
 `duration_call` BIGINT( 20 ) NOT NULL DEFAULT  '0',
 `duration_talk` BIGINT( 20 ) NOT NULL ,
 `disposition` VARCHAR( 255 ) NOT NULL ,
 `clid` VARCHAR( 80 ) DEFAULT NULL ,
 `cdr_id` BIGINT( 20 ) DEFAULT NULL ,
 `vxcdr_id` BIGINT( 20 ) DEFAULT NULL ,
 `provider` INT( 11 ) NOT NULL DEFAULT  '0' PRIMARY KEY (  `id` )) ENGINE = MYISAM
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:26:00.860

主键子句前缺少逗号。

```
 `provider` INT( 11 ) NOT NULL DEFAULT  '0', PRIMARY KEY (  `id` )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:26:13.873

您需要在提供者和主键之间使用逗号：

```
 `provider` INT( 11 ) NOT NULL DEFAULT  '0', PRIMARY KEY (  `id` )) ENGINE = MYISAM 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-08T20:15:19.023

错误 SQL 查询：

--

## -- 数据库：`wadud`

* * *

--

## -- 表的表结构`destination`

```
CREATE TABLE destination (
  id bigint(20) NOT NULL,
  country varchar(255) NOT NULL,
  photo text NOT NULL,
  tours varchar(255) NOT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

MySQL 说：文档

# 1050 - 表“目标”已存在

# c - fgets for open 的等价函数

> ID：14893565
> 
> 赞同：0
> 
> 时间：2013-02-15T11:20:09.990
> 
> 标签：c, file, stream, fopen

随着`fopen()`我逐行读取文件`fgets()`。

是否有像`fgets()`为了读取由打开的流这样的功能`open()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:24:22.593

没有这样的功能。问题是，除非您在用户空间中进行缓冲（如`FILE*`例程那样），否则无法有效地实现它：您必须`read`一个接一个地处理字符。

在 POSIX 系统上，您可以使用`fdopen`将`FILE*`结构包装在文件描述符周围，然后使用`fgets`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:09:05.660

您是否正在尝试读取标准输入？如果是这样....

字符线[1000]；文件 *fpin;

fpin=标准输入；while(fgets(line,1000,fpin)!=NULL) printf("%s",line);

# c# - 如何在 Windows Phone 8 中使用 ValueConverter 作为 StaticResource

> ID：14893569
> 
> 赞同：9
> 
> 时间：2013-02-15T11:20:19.943
> 
> 标签：c#, xaml, windows-phone-8, ivalueconverter, valueconverter

下面是我的 App.xaml

```
<Application
    x:Class="SpinrWindowsMobile.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    >

    <!--Application Resources-->
    <Application.Resources >
        <ResourceDictionary>

            <local:LocalizedStrings xmlns:local="clr-namespace:SpinrWindowsMobile" x:Key="LocalizedStrings"/>
            <converter:TextColorConverter xmlns:converter="clr-namespace:SpinrWindowsMobile.Common" x:Key="TextColorConverter"></converter:TextColorConverter>

        </ResourceDictionary>
    </Application.Resources>

    ....
</Application> 
```

我在 NameSpace **SpinrWindowsMo** **​​bile.Common**中编写了 TextColorConverter.cs 启动应用程序时它给了我异常**，无法创建 SpinrWindowsMo​​bile.Common.TextColorConverter 类型的实例**。我不知道我在哪里失踪。下面是我的**TextColorConverter.cs**类

 ******```
class TextColorConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            // some code
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
           // some code
        }
    } 
```

我正在使用 Microsoft Visual Studio 2012 For Windows Phone 作为我的开发工具。我想分享的另一件事是我没有在**System.Windows.Data命名空间中获得****ValueConverstionAttribute 类**。谁能指导我哪里错了。

 *** * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T16:26:53.557

您将使您的课程成为公共课程（默认情况下它将是内部课程）。否则无法实例化。

*公共*类 TextColorConverter : IValueConverter********

# mobile - 网页无法在移动设备上调整大小

> ID：14893570
> 
> 赞同：2
> 
> 时间：2013-02-15T11:20:21.023
> 
> 标签：mobile, twitter-bootstrap, resize, webpage

我的网页有问题，不想根据手机的宽度调整大小……至少不是整个页面。

该页面的示例可以在以下位置看到：[http](http://sibincic.bobr.si/index_table.html) ://sibincic.bobr.si/index_table.html 如果我在分辨率为 480x800 的 HTC Desire 上尝试它，它会调整它的大小，但不是一路。

如果有人对我应该做什么有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T12:20:54.283

您必须在部分中使用该句子，并使用引导响应 CSS。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

# linux - 无法使用选项 debug=false 加载我的 django 项目静态文件

> ID：14893571
> 
> 赞同：1
> 
> 时间：2013-02-15T11:20:24.140
> 
> 标签：linux, django, debugging, static, option

很奇怪，我的 django 网站（使用 django 1.3 在 linux 服务器上设置）可以使用 DEBUG = True 正确访问。但是当我将选项更改为 DEBUG = False 时，不会加载静态内容（找不到 css 文件和图像）

这是我在setting.py中得到的相关选项：

```
DEBUG = False
STATIC_ROOT = ''
ADMIN_MEDIA_PREFIX = '/static/admin/'
STATICFILES_DIRS = ("/home/ubuntu/ls_website/static/",)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

有人知道吗？如果版本太低，我会等待 1.5 发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:16:11.920

当 DEBUG=False 时，静态文件不做任何事情。您需要使用 apache 提供这些文件。Staticfiles 能够将文件收集到一个位置以方便您，然后您使用一些 apache 魔法（假设这里因为您没有指定）让 apache 拦截这些请求并为您提供静态文件。

```
 Alias /robots.txt  /home/username/Python/project/site_media/static/robots.txt
    Alias /favicon.ico /home/username/Python/project/site_media/static/favicon.ico
    Alias /static/     /home/username/Python/project/site_media/static/ 
```

我不记得将这些文件从开发站复制到部署点是 buildstatic、build_static、collectstatic 还是 collect_static，但是这些变量控制着 staticfiles 如何发挥它的魔力

```
# Absolute path to the directory that holds static files like app media.
# Example: "/home/media/media.lawrence.com/apps/"
STATIC_ROOT = os.path.join(PROJECT_ROOT, "site_media", "static")

# URL that handles the static files like app media.
# Example: "http://media.lawrence.com"
STATIC_URL = "/static/"

# Additional directories which hold static files
STATICFILES_DIRS = [
    os.path.join(PROJECT_ROOT, "static"),
    os.path.join(PROJECT_ROOT, "media"),
] 
```

这假设您的静态文件位于项目的**静态**文件夹中，并且您希望从**site_media**文件夹中提供它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:20:32.743

我发现当 debug=False 时，django 不会自动加载静态文件。选项在 urls.py 中设置静态路径或使用 apache 提供静态文件。人们说在 urls.py 中设置静态路径比使用 apache 提供静态文件要慢。虽然不知道为什么...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:34:27.393

我也在 Windows 和 Linux 之间移动以进行开发。为了解决settings.py中绝对路径的问题，我使用了这个函数：

```
def map_path(directory_name):
    return os.path.join(os.path.dirname(__file__),
        '../' + directory_name).replace('\\', '/') 
```

您可以以这种方式实现：

```
STATICFILES_DIRS = (
    map_path('static'),
) 
```

这个函数是为 Django 1.4.x 量身定做的。您需要为 Django 1.3.x 稍微修改它。希望对您有所帮助。

# php - PHP cookie没有删除

> ID：14893573
> 
> 赞同：0
> 
> 时间：2013-02-15T11:20:29.350
> 
> 标签：php, cookies

我已经阅读了各种线程，但似乎没有一个解决方案有效。

我有两个 PHP 页面：

**cookieson.php**

```
<?php session_start();
$future = time()+60*60*24*30*12;
setcookie('CookiesAgreed', 'yes', $future, '/');
?> 
```

**cookiesoff.php**

```
<?php session_start();
$past = time()-9999999999999999;
setcookie('CookiesAgreed', null, $past, '/');
?> 
```

cookieson.php 正确设置了大约一年后到期的 cookie “CookiesAgreed”。

cookiesoff.php 应该完全清除“CookiesAgreed”cookie，但似乎没有做任何事情 - 值没有改变（根据 Firefox 的 Cookies 列表），到期时间没有改变，cookie 也没有删除。有时会创建一个具有相同名称、值和到期日期的全新 cookie（同样，根据 Firefox）。

我究竟做错了什么？！

（您可以在[http://www.rugbyfiles.com/cookieson.php](http://www.rugbyfiles.com/cookieson.php)和[http://www.rugbyfiles.com/cookiesoff.php](http://www.rugbyfiles.com/cookiesoff.php)看到）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T11:24:25.383

这超出了堆栈并溢出：

```
$past = time()-9999999999999999; 
```

相反，这样做：

```
$past = time()-60*60*24*30*12; 
```

time 变量只能保存从`0`到 的值`4294967296`。当你给出这么长的负值时，它就会出栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T12:47:33.540

```
setcookie("CookiesAgreed","",time()-24*60*60,"/"); 
```

# css - LessCSS 编码标准

> ID：14893575
> 
> 赞同：1
> 
> 时间：2013-02-15T11:20:37.473
> 
> 标签：css, coding-style, standards, less

有吗？

切换到[less](http://lesscss.org/)后，我通常会得到如下代码：

```
.topNav{    
  prop: value;
  ...

  li{    
    prop: value;
    ...

    &:hover{
      ...
    }

    &.active{
      prop: value;
      ...

      a{
        prop: value;
        ...

        &:hover{
          prop: value;
          ...

          span{
            ...
          }
        }

        span{
         ...
        }

      } 

    }

    a{
      prop: value;
      ...

      &:hover{
        prop: value;
        ...
      }    

    }  

  }

} 
```

不好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T11:30:17.490

我会说这并不理想。你应该看看[http](http://smacss.com) ://smacss.com——关于 CSS 组织的很棒的书。它不是不太具体，仍然非常相关。

其中一项原则与选择的深度有关。上面编译的 LESS 的一部分`.topNav li.active a:hover span`开始变得有点深（至少 4 个，加上列出的层次结构中存在的任何元素）。问题在于它将您的 CSS 与特定的 HTML 结构紧密耦合。在不破坏 CSS 的情况下，以后更改标记变得更加困难。

LESS 提供了许多很酷的工具，但在我看来，嵌套选择器的能力是一种很容易被滥用的工具。

# php - 使用 JavasSript 检查 PHP 表单中的复选框

> ID：14893579
> 
> 赞同：0
> 
> 时间：2013-02-15T11:21:04.513
> 
> 标签：php, javascript, forms

嗨，我正在尝试添加一些功能，该功能只允许用户一次最多选择 4 个复选框，但失败得很惨…… php 和 javascript 似乎不能很好地协同工作！

我的 PHP 代码是：

```
<?php
echo "<form method='post' name='time' action='timeinsert.php'>";
echo "<td><input type='checkbox' `name='$displayTime2'onclick='KeepCount()'></td>";
echo "</form>";
?> 
```

我的 Javascript 代码是：

```
<script language="JavaScript">
<!--`
function KeepCount() {
var NewCount = 0
if (document.time.<?php"$displayTime2"?>.checked)
{NewCount = NewCount + 1}
f (NewCount == 4)
{
alert("Pick maximum of 4 time slot's Please")
document.time; return false;`
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:24:24.313

```
<script language="JavaScript">    

    var NewCount = 0;

    function KeepCount() 
    {
      if(NewCount <= 4)
      {
          if (document.time.<?php echo $displayTime2; ?>.checked)
          { 
               NewCount = parseInt(NewCount)+1;
          }
      }
      else
      {
         alert("Pick maximum of 4 time slot's Please");   
         return false;  
      }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:19:16.700

使用 jQuery：

```
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'>
</script>
<script type='text/javascript'>
    $(function() {
        $('input[type=checkbox]').click(function () {
            var count = $('input[type=checkbox]:checked').length;   
            if (count > 4) alert('Pick maximum of 4 time slots please!');
        });
    });
</script>

<?php
    echo "<form method='post' name='time' action='timeinsert.php'>";
    echo "<td><input type='checkbox' name='$displayTime2'></td>";
    echo "</form>";
?> 
```

更新：为了防止在 4 次点击后发生进一步的检查，您可以这样做：

```
<script type='text/javascript'>
    $(function() {
        $('input[type=checkbox]').click(function () {
            var count = $('input[type=checkbox]:checked').length;   
            if (count > 4) {
                $(this).removeAttr('checked');
                alert('Pick maximum of 4 time slots please!');
            }
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:56:25.830

好的，我现在已经编辑了 Stefan 的代码并提出：

```
<script type='text/javascript' src='includes/jquery-1.9.1.min.js'>
</script>
<script type='text/javascript'>
    $(function() {
        $('input[type=checkbox]').click(function () {
            var count = $('input[type=checkbox]:checked').length;   
            if (count > 4) alert('Pick maximum of 4 time slots please!');
        if (count > 4) $(this).removeAttr("checked");
        });
    });
</script> 
```

这会提醒用户并在已选中 4 个复选框后删除并打勾。是否可以添加 $(this).removeAttr("checked"); 到第一个 if 语句而不是添加另一行代码？

# ruby-on-rails - Rails：用户创建产品的管理员批准

> ID：14893581
> 
> 赞同：0
> 
> 时间：2013-02-15T11:21:16.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想创建管理员帐户，目前使用 devise gem 作为用户帐户。在应用程序上，用户创建他们的产品。管理员角色将验证产品并批准它们。在管理员批准之前，不应发布产品。我不知道该怎么做。谁能告诉程序？这将是很大的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:40:48.277

我会创建一个 column `approved`，默认情况下将 boolean 类型输入到`Product`集合中`false`。所以只有管理员才能看到这些产品。

```
current_user.admin? ? @products = Product.all : @products = Product.where(:approved => false) 
```

然后，您可以使用相同的想法列出要批准的产品。

现在你可以开始尝试一些代码，当你开始遇到代码问题时你可以回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:39:00.237

1.  安装[rails admin gem](https://github.com/sferik/rails_admin)（可选，但它是一个很棒的 gem，因此您不必从头开始构建管理面板）
2.  通过运行将一个布尔字段添加`published`到您的产品表中`rails g migration add_published_field_to_products published:boolean`
3.  进入生成的迁移文件并添加`default: false`到列中
4.  跑`rake db:migrate`
5.  为您的产品模型添加范围：`scope :published, where(published: true)`

瞧！现在管理员将能够发布或取消发布您的产品，并且在您的控制器中，您可以说`@products = Product.published`获取所有已发布的产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:41:48.593

如果您想在更广泛的层面上实现这一点，请使用 Ryan Bates cancan gem。您可以在视图级别设置角色和控制显示。

# objective-c - 检测在 os x 上运行的墙纸应用程序？

> ID：14893582
> 
> 赞同：0
> 
> 时间：2013-02-15T11:21:20.457
> 
> 标签：objective-c, macos, cocoa, osx-mountain-lion

我正在尝试检测系统上是否正在运行任何墙纸类型的应用程序并尝试关闭它们。

例如，适用于 10.8 的[Mechanical Clock 3D Lite](https://itunes.apple.com/app/mechanical-clock-3d-lite/id448125889?mt=12)是作为系统壁纸运行的应用程序之一。他们有什么方法可以检测到此类应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:56:29.860

这个问题，[Programmatically check if a process is running on Mac](https://stackoverflow.com/questions/2518160/programmatically-check-if-a-process-is-running-on-mac)，可能会引导您朝着正确的方向前进。本质上，您会找到当前正在运行的进程的列表，并检查该应用程序名称是否存在于其中。

# spring - Spring 事件和范围请求

> ID：14893586
> 
> 赞同：4
> 
> 时间：2013-02-15T11:21:30.347
> 
> 标签：spring, event-handling

我想在我的 Web 应用程序中使用 Spring Event 与我的 bean “对话”。

因此，例如，我的触发事件的 bean 是这样的：

```
@Controller
@Scope("request")
@KeepAlive
public class Controller extends InitializingBean, ApplicationEventPublisherAware {

private ApplicationEventPublisher applicationEventPublisher;    

public void test() {
  applicationEventPublisher.publishEvent(new TestEvent(this));
}

} 
```

我的监听事件是这样的：

```
@Component
@Scope("request")
@KeepAlive
public class Module implements ApplicationListener<TestEvent> {

    @Override
    public void onApplicationEvent(TestEvent event) {

    }

} 
```

最重要的一点是这些 bean 是范围请求，因为它们需要在每次调用页面时进行初始化。

但是在启动时，我收到以下消息：

> 原因：java.lang.IllegalStateException：未找到线程绑定请求：您是指实际 Web 请求之外的请求属性，还是在原始接收线程之外处理请求？如果您实际上是在 Web 请求中操作并且仍然收到此消息，则您的代码可能在 DispatcherServlet/DispatcherPortlet 之外运行：在这种情况下，请使用 RequestContextListener 或 RequestContextFilter 来公开当前请求。

就像 Spring 尝试在启动时实例化我的 Module bean 并且由于 bean 是范围请求一样，它不能这样做（上下文请求未实例化）

如果我删除事件管理，一切正常。

所以，我的问题是：

是否有可能让事件监听器是范围请求？以及如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:23:29.567

尝试在 Singleton ApplicationListener 中注入作用域代理来处理 TestEvent。

```
@Scope(proxyMode=ScopedProxyMode.TARGET_CLASS, value="request")
public class TestEventHandler {

    public void onTestEvent(TestEvent event) 
        // ...  
    }

}
  public class TestEventApplicationListener implements ApplicationListener<TestEvent> {

    @Autowired
    private TestEventHandler handler;

    @Override
    public void onApplicationEvent(TestEvent event) {

        handler.onTestEvent(event);

    }
} 
```

# android - 滚动时 SherlockFragments 中 ViewPager 中的可见性问题（在姜饼中）

> ID：14893587
> 
> 赞同：2
> 
> 时间：2013-02-15T11:21:30.893
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager

我使用 ViewPager 在片段之间滚动。

在姜饼上进行测试时，有一个奇怪的问题——

```
After scrolling first two tabs, the visibility of all fragments GONE completely 
```

这一直持续到我改变方向。此问题仅在姜饼设备启动时出现。它在 ICS 和其他设备上运行良好。

这是 TabsAdapter 的代码

```
 /**
 * This is a helper class that implements the management of tabs and all
 * details of connecting a ViewPager with associated TabHost. It relies on a
 * trick. Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show. This is not sufficient for switching
 * between pages. So instead we make the content part of the tab host 0dp
 * high (it is not shown) and the TabsAdapter supplies its own dummy view to
 * show as the tab content. It listens to changes in tabs, and takes care of
 * switch to the correct paged in the ViewPager whenever the selected tab
 * changes.
 */
private class TabsAdapter extends FragmentPagerAdapter implements
        ViewPager.OnPageChangeListener, ActionBar.TabListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final List<String> mTabs = new ArrayList<String>();
    private final List<Integer> mTabsId = new ArrayList<Integer>();
    private boolean hasClearedDetails = false;

    private int mCurrentPosition = -1;
    /**
     * Used during page migration, to remember the next position
     * {@link #onPageSelected(int)} specified.
     */
    private int mNextPosition = -1;

    public TabsAdapter(FragmentActivity activity, ActionBar actionBar, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = actionBar;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, int tabId) {
        mTabs.add(clss.getName());
        mTabsId.add(tabId);
        mActionBar.addTab(tab.setTabListener(this));
        notifyDataSetChanged();
    }

    public void removeTabAt(int location) {
        mTabs.remove(location);
        mTabsId.remove(location);
        mActionBar.removeTabAt(location);
        notifyDataSetChanged();
    }

    public Integer getIdForPosition(int position) {
        if(position >= 0 && position < mTabsId.size()) {
            return mTabsId.get(position);
        }
        return null;
    }

    public Integer getPositionForId(int id) {
        int fPos = mTabsId.indexOf(id);
        if(fPos >= 0) {
            return fPos;
        }
        return null;
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        return Fragment.instantiate(mContext, mTabs.get(position), new Bundle());
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        clearDetails();
        if (mViewPager.getCurrentItem() != tab.getPosition()) {
            Log.e(THIS_FILE+"Anurag debugging","ISSUE HERE");
            mViewPager.setCurrentItem(tab.getPosition(), true);
        }
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);

        if (mCurrentPosition == position) {
            Log.w(THIS_FILE, "Previous position and next position became same (" + position
                    + ")");
            Log.e(THIS_FILE, "Previous position and next position became same (" + position
                    + ")");
        }

        mNextPosition = position;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // Nothing to do
    }
    @Override
    public int getItemPosition(Object object){
        return mCurrentPosition;
        }
    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // Nothing to do
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        // Nothing to do
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        switch (state) {
            case ViewPager.SCROLL_STATE_IDLE: {
                Log.e(THIS_FILE, "SCROLL_STATE_IDLE"+mCurrentPosition);
                if (mCurrentPosition >= 0) {
                    sendFragmentVisibilityChange(mCurrentPosition, false);
                }
                if (mNextPosition >= 0) {
                    sendFragmentVisibilityChange(mNextPosition, true);
                }
                invalidateOptionsMenu();

                mCurrentPosition = mNextPosition;
                break;
            }
            case ViewPager.SCROLL_STATE_DRAGGING:
                Log.e(THIS_FILE, "SCROLL_STATE_DRAGGING");
                clearDetails();
                hasClearedDetails = true;
                break;
            case ViewPager.SCROLL_STATE_SETTLING:
                Log.e(THIS_FILE, "SCROLL_STATE_SETTLING");
                hasClearedDetails = false;
                break;
            default:
                break;
        }
    }

    private void clearDetails() {
        if (mDualPane && !hasClearedDetails) {
            Log.e(THIS_FILE, "check in clear detalis");
            FragmentTransaction ft = SipHome.this.getSupportFragmentManager()
                    .beginTransaction();
            ft.replace(R.id.details, new Fragment(), null);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
            ft.commit();
        }
    }
} 
```

sendFragmentVisibilityChange 的代码是

```
 private void sendFragmentVisibilityChange(int position, boolean visibility) {
    try {
        final Fragment fragment = getFragmentAt(position);
        if (fragment instanceof ViewPagerVisibilityListener) {
            ((ViewPagerVisibilityListener) fragment).onVisibilityChanged(visibility);
        }
    }catch(IllegalStateException e) {
        Log.e(THIS_FILE, "Fragment not anymore managed");

        e.printStackTrace();
    }catch(Exception e) {
        Log.e(THIS_FILE, "Fragment not anymore managed");

        e.printStackTrace();
    }
} 
```

片段正在调用 onVisibilityChanged 以执行一些滚动操作。片段扩展了 SherlockFragment。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:24:55.643

使用 setoffscreenpagelimit(int count) 将 ViewPager 的 OffscreenPageLimit 设置为 ViewPager 实际持有的视图数。

# php - 将 php 文件作为二进制文件用于 iPhone 的流式音频歌曲

> ID：14893590
> 
> 赞同：0
> 
> 时间：2013-02-15T11:21:42.190
> 
> 标签：php

这是我的 php 代码，用于将 php 文件作为流式音频的二进制文件

```
try {
    if(file_exists($filePath)) {
        header("Content-Transfer-Encoding: binary"); 
        header("Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3");
        header('Content-length: ' . filesize($filePath));
        header('Content-Disposition:attachment; filename="$filePath"');
        header('X-Pad: avoid browser bug');
        header('Cache-Control: no-cache');
        print readfile($filePath);
    } else {
        throw new Exception("File does not exist");
    }
} catch (Exception $e) {

} 
```

它适用于 Mac Mini，但不适用于 iPad 和 iPhone。甚至流媒体也在其他智能手机上运行。我是否必须添加任何内容才能使其在手持设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:28:32.833

它不应该在任何地方工作：[readfile()](http://www.php.net/manual/en/function.readfile.php)直接写入输出，所以你不打印或回显它。

```
print readfile($filePath); 
```

应该

```
readfile($filePath); 
```

回显/打印也会给你虚假的额外字符（文件中的字节数）

# wso2esb - Wso2Esb：消息处理器问题

> ID：14893592
> 
> 赞同：0
> 
> 时间：2013-02-15T11:21:42.733
> 
> 标签：wso2esb

我对消息存储中的消息处理有一个奇怪的行为。

我有一个将消息放入消息存储的代理服务和一个从消息存储获取消息并调用端点的消息处理器。

如果消息被正确处理，则调用一个序列；在这个序列中，我对表启动更新查询。

好吧，没有任何延迟地向消息存储发送 500/1000，我注意到带有查询的序列并不总是被调用，并且日志中没有写入任何错误。

如果我停用消息处理器并让该消息存储由 500/1000 条消息填充，则重新激活消息处理器总是正确调用序列。

您是否知道 Message-Processor （我的 Message-Processor 是 Scheduled 类型）必须同时处理大量消息时是否存在一些问题？

此外，Wso2Esb 使用多少个 Message-Processor 实例来处理 Message-Store 中包含的消息？（ 一个或多个 ？ ）。

如果消息处理器的不同实例可能存在线程并发问题。

干杯。

```
 warxsg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:45:11.517

您使用的 ESB 版本是什么。你能告诉我你使用的消息处理器是什么吗？例如：MessageForwading 处理器？采样处理器？

[http://wso2.org/library/articles/2011/10/implementing-store-forward-messaging-patterns-wso2esb-part-1](http://wso2.org/library/articles/2011/10/implementing-store-forward-messaging-patterns-wso2esb-part-1)和 [http://wso2.org/library/articles/2011/12/implementing-存储转发消息模式-wso2esb-part-2](http://wso2.org/library/articles/2011/12/implementing-store-forward-messaging-patterns-wso2esb-part-2)

可能会有所帮助。

干杯，

# javascript - 验证码 JavaScript，应该可以工作，但是

> ID：14893595
> 
> 赞同：0
> 
> 时间：2013-02-15T11:22:10.097
> 
> 标签：javascript, captcha

它只是不会生成随机数并将它们输入到 span id“broj1”和“broj2”中。这应该可以工作，我找不到任何明显的错误，因为我对此仍然很陌生。提前感谢您的帮助:)

```
 function potvrda(){

        var odgovor = document.getElementById("odgovor").value;
        var broj1 = parseInt(document.getElementById("broj1").innerHTML);
        var broj2 = parseInt(document.getElementById("broj2").innerHTML);
        var zbroj = broj1 + broj2;
        if (odgovor == null || odgovor ==""){
            alert("Molimo unesite zbroj");
            return false;
        }
        else if(odgovor != zbroj){
            alert("Molimo unesite ispravan Broj");
        }

        else{
            document.getElementById("status").innerHTML = "processing";
            docuemnt.getElemtntById("odgovor").innerHTML = "";
                    }}

        function randomNums(){
            var ran_num1 = Math.floor(Math.random() * 10) +1 ;
            var ran_num2 = Math.floor(Math.random() * 10) +1 ;
            document.getElementById("broj1").innerHTML = rand_num1;
            document.getElementById("broj2").innerHTML = rand_num2;
        }

    </script> 
```

```
 <form method="post" onsubmit="return potvrda();">
        Zbrojite:
        <span id="broj1"></span> + <span id="broj2"></span>=</br>
        <input type="text" id="odgovor" size="50" /> </br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:35:39.000

您正在定义`var ran_num1`and `var ran_num2`，但随后您尝试将元素的 innerHTML 设置为`rand_num1`and `rand_num2`。你少了一个“d”。这个小提琴对我有用：http: [//jsfiddle.net/68NKQ/](http://jsfiddle.net/68NKQ/)

# php - 为什么这让我“未定义”

> ID：14893599
> 
> 赞同：0
> 
> 时间：2013-02-15T11:22:30.287
> 
> 标签：php, javascript, jquery, ajax, scope

尝试运行脚本 (test.al();) 并在 test.al 内部调用 getcrypt.php();，该 php 脚本位于网络服务器上，并且正在运行。目前，这些是我的脚本

JS

```
var getcrypt = {
    php: function () {

        $.ajax({
            url: "server.com/return.php",
            type: "POST",
            async: true,
            data: "id=getit",
            success: function (msg) {
                var v = msg.match(/^.*$/m)[0];
                return v;
            }
        });
    }
}

var test = {
    al: function () {
        a = getcrypt.php();
        alert(a);
    }
} 
```

PHP

```
<?php
    $id = $_POST['id'];
    if ('getit' == $id){
        $value = 'VALUE';
        echo $value;
    }else{
        echo 0;
    }
?> 
```

这样，它将显示一个带有“unidefined”的警报，如果我添加一个警报（v）；在返回 v 之前，它会显示“VALUE”，但无法在变量之外使用它...

```
var getcrypt = {
    php: function () {

        $.ajax({
            url: "server.com/return.php",
            type: "POST",
            async: true,
            data: "id=getit",
            success: function (msg) {
                var v = msg.match(/^.*$/m)[0];
                alert(v);
                return v;
            }
        });
    }
} 
```

这会给我一个正确值的警报（在“未定义”之后）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:29:47.270

这是因为您正在进行异步调用。返回仅用于成功函数，而不用于 php 函数。

要获取值，您需要编写：

```
var value;

var getcrypt = {
  php: function (callback) {

    $.ajax({
        url: "",
        type: "POST",
        async: true,
        data: "id=getit",
        success: function (msg) {
            var v = msg.match(/^.*$/m)[0];
            alert(v);
            callback(v);
        }
    });
  }
}

getcrypt.php(function(v) {
  alert(v);
  // This happens later than the below
  value = v;
});

// The below will still not work since execution has already passed this place
// alert will still return undefined
alert(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:31:33.790

问题是 jQuery ajax 适用于回调并且不适用于返回值，因此您需要向您的 getcrypt 函数添加一个回调，所以说

```
var getcrypt = {
php: function (callback) {

    $.ajax({
        url: "server.com/return.php",
        type: "POST",
        async: true,
        data: "id=getit",
            success: function (msg) {
                var v = msg.match(/^.*$/m)[0];
                callback(v);
            }
        });
    }
} 
```

所以现在如果你打电话

```
getcrypt.php(function(returnVar){
   alert(returnVar)
}); 
```

您将收到 VALUE 的警报

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:30:02.177

`$.ajax`在收到响应之前，在调用时立即返回（嗯，几乎 :)）。你应该重写你的代码以适应这个事实，就像这样；

```
var getcrypt = {
    php: function(){
        $.ajax({
           //..other params ..//
           success: function(msg){
               var v = msg.match(/^.*$/m)[0];
               alertResponse(v);
           }
        });
    },
    alertResponse: function(processedResponse) {
         alert(v);
    }
}

var test = {
al: function(){
        getcrypt.php();
    }
} 
```

如果您需要对象中的响应`test`，请移至该对象并从方法中`alertResponse`调用它。`success`我认为[本教程](http://mostlygeek.com/tech/event-driven-programming-with-jquery/)可能对您学习 javascript 事件驱动编程模型有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:32:19.583

$.ajax 调用是异步的。所以你得到的是 $.ajax 的返回值（发送请求时，在收到响应之前）。只有当浏览器收到对 ajax 调用的响应时，才会运行成功回调，作为 $.ajax 调用的一个查看进程。换句话说，$.ajax 的返回值将始终为 null。我不确定是否可以对成功回调的返回值做任何事情，您需要将您的逻辑（或使用该逻辑调用另一个函数）放入成功回调本身，就像您对在你的最后一个例子中提醒

# r - 图上数据点的 R 箭头标记

> ID：14893602
> 
> 赞同：5
> 
> 时间：2013-02-15T11:22:37.403
> 
> 标签：r, plot

我正在寻找用索引标记数据点 - 通过目视检查轻松识别索引号。

例如，

```
x<-ts.plot(rnorm(10,0,1)) # would like to visually identify the data point indices easily through arrow labelling 
```

当然，如果有更好的方法来实现这一点，请提出建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:15:52.087

您可以使用`arrows`功能：

```
set.seed(1); ts.plot(x <-rnorm(10,0,1), ylim=c(-1.6,1.6))  # some random data
arrows(x0=1:length(x), y0=0, y1=x, code=2, col=2, length=.1) # adding arrows
text(x=1:10, y=x+.1, 0, labels=round(x,2), cex=0.65) # adding text
abline(h=0) # adding a horizontal line at y=0 
```

![在此处输入图像描述](../Images/b53d15100e25635413c0606cd90efce3.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:57:12.940

使用`my.symbols`from package`TeachingDemos`获取指向所需位置的箭头：

```
require(TeachingDemos)
d <- rnorm(10,0,1)
plot(d, type="l", ylim=c(min(d)-1, max(d)+1))
my.symbols(x=1:10, y=d, ms.arrows, angle=pi/2, add=T, symb.plots=TRUE, adj=1.5) 
```

![在此处输入图像描述](../Images/76f2fe0ac4c40ff9204bb735ac73f938.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T12:08:27.183

你可以用`text()`这个

```
n <- 10
d <- rnorm(n)
plot(d, type="l", ylim=c(min(d)-1, max(d)+1))
text(1:n, d+par("cxy")[2]/2,col=2) # Upside
text(1:n, d-par("cxy")[2]/2,col=3) # Downside 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:48:23.313

这里有一个`lattice`版本，可以看到一些基本功能的类比。

```
set.seed(1234)
dat = data.frame(x=1:10, y = rnorm(10,0,1))
xyplot(y~x,data=dat, type =c('l','p'),
       panel = function(x,y,...){
         panel.fill(col=rgb(1,1,0,0.5))
         panel.xyplot(x,y,...)
         panel.arrows(x, y0=0,x1=x, y1=y, code=2, col=2, length=.1)
         panel.text(x,y,label=round(y,2),adj=1.2,cex=1.5)
         panel.abline(a=0)

       }) 
```

![在此处输入图像描述](../Images/218080ef6f4f0d847fdaefbe23015837.png)

# android - 如何在使用 phonegap 时调用本机警报框

> ID：14893611
> 
> 赞同：0
> 
> 时间：2013-02-15T11:23:14.350
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

下面是我的代码，但它不起作用，错误函数只调用

原生插件

```
package com.gami.fre;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.util.Log;
import android.widget.Toast;

public class ConfirmBox extends Plugin {

    public static final String NATIVE_ACTION_STRING="nativeAction";       
    public static final String SUCCESS_PARAMETER="success"; 
    public Context context;
    public int result=0;

    @Override
    public PluginResult execute(String action, JSONArray data, String callbackId) 
    {

          Log.d("HelloPlugin", "PhoneGap/Cordova!");             
          //only perform the action if it is the one that should be invoked 

          if (NATIVE_ACTION_STRING.equals(action))
          {                   
              String resultType = null;                    

              try {                         
                   resultType = data.getString(0);                   
                  }                    
              catch (Exception ex) {  

                  Log.d("HelloPlugin", ex.toString());          
                  }                    

              if (resultType.equals(SUCCESS_PARAMETER))
                {          
                  Log.d("hisu", resultType);
                  AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                            context);

                        // set title
                        //alertDialogBuilder.setTitle("Your Title");

                        // set dialog message
                        alertDialogBuilder
                            .setMessage("Are you sure want to Exit!")
                            .setCancelable(false)
                            .setPositiveButton("Yes",new DialogInterface.OnClickListener()
                            {
                                public void onClick(DialogInterface dialog,int id) 
                                {
                                    //ConfirmBox.this.finish();
                                }
                              })
                            .setNegativeButton("No",new DialogInterface.OnClickListener() 
                            {
                                public void onClick(DialogInterface dialog,int id) 
                                {

                                    dialog.cancel();
                                }
                            });

                            // create alert dialog
                            AlertDialog alertDialog = alertDialogBuilder.create();
                            // show it
                            alertDialog.show();
 return new PluginResult(PluginResult.Status.OK, result);

                }      
             else 
             {                      
                  return new PluginResult(PluginResult.Status.ERROR, "Oops, Error :(");                 
             }           
        } 

    return null;

    }

} 
```

**电话间隙通话**

```
<script type="text/javascript" >
function callNativePlugin( returnSuccess ) 
{    
 Helo.callNativeFunction( nativePluginResultHandler, nativePluginErrorHandler, returnSuccess ); 

} 

function nativePluginResultHandler (result)
 {    
    //alert("SUCCESS: \r\n"+result ); 

 } 

 function nativePluginErrorHandler (error)
 {    

 alert("ERROR: \r\n"+error );

 } 
```

每次只调用错误函数；成功调用正在发生，但在第一行之后立即跳过。即在日志打印后从函数中跳过并显示错误：NULL

请帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:31:03.970

希望 addJavascriptInterface() 可以帮助您从 javascript 调用原生 android 函数

前任：

本机代码：***webview.addJavascriptInterface(this.Activity,"SomeKey");***

Javascript：

在这里，您可以将本机函数称为

***window.SomeKey.execute()*** //execute 是原生函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:32:04.923

最后我找到了最好的解决方案而不是插件。

[http://docs.phonegap.com/en/2.0.0/cordova_notification_notification.md.html#notification.alert](http://docs.phonegap.com/en/2.0.0/cordova_notification_notification.md.html#notification.alert)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T03:51:09.707

我在今年早些时候创建了这个。我不太确定它是否仍然适用于当前的 Phonegap。这是我创建的一个插件，允许您创建一个 AlertList 并将用户的选择返回给您。

[https://github.com/kidino/phonegap-alertdialoglist-plugin](https://github.com/kidino/phonegap-alertdialoglist-plugin)

![Phonegap 的 Android AlertList 对话框示例](../Images/6bf8c97fb394ee91fbb08f1097e06584.png)

通常，您需要在 Javascript 中创建一个数组。第一项将成为 AlertList 的标题。然后调用 showlist() 函数并将数组作为参数传递。查看 repo 中 www 文件夹中的示例。

```
<script>
    var fruitlist = [
                      "The Fruit List Title", // this is the title 
                      "Orange", 
                      "Apple", 
                      "Watermelon", 
                      "Papaya", 
                      "Banana", 
                      "Pear" 
              ];

    function showlist(thelist) {
            cordova.exec(
                    function(listitem) {
                            alert( "You selected "+ thelist[listitem] );
                    }, 
                    function(error) {
                            alert("Error Occured");
                    }, "AlertList", "alertlist", thelist );
    }
</script> 
```

在您的 HTML 中，您可以使用以下内容：

```
<h1><a href="javascript:showlist(fruitlist)">FRUITS</a></h1> 
```

# c# - 如何使用 Json.Net 将字典序列化为其父对象的一部分

> ID：14893614
> 
> 赞同：42
> 
> 时间：2013-02-15T11:23:39.757
> 
> 标签：c#, serialization, json.net

我正在使用 Json.Net 进行序列化。我有一堂带字典的课：

```
public class Test
{
    public string X { get; set; }

    public Dictionary<string, string> Y { get; set; }
} 
```

我可以以某种方式序列化此对象以获取以下 JSON

```
{
    "X" : "value",
    "key1": "value1",
    "key2": "value2"
} 
```

其中“key1”、“key2”是字典中的键？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-05-21T14:26:25.513

如果您使用的是[Json.Net 5.0.5](https://github.com/JamesNK/Newtonsoft.Json/releases/tag/5.0.5)或更高版本，并且您愿意将字典的类型从 更改`Dictionary<string, string>`为`Dictionary<string, object>`，那么完成您想要的一种简单方法是将`[JsonExtensionData]`属性添加到您的字典属性中，如下所示：

```
public class Test
{
    public string X { get; set; }

    [JsonExtensionData]
    public Dictionary<string, object> Y { get; set; }
} 
```

标记字典的键和值将被序列化为父对象的一部分。好处是它也适用于反序列化：JSON 中与类成员不匹配的任何属性都将被放入字典中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-15T12:41:18.177

实现[JsonConverter](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_JsonConverter.htm)派生类：应使用[CustomCreationConverter类作为基类来创建](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Converters_CustomCreationConverter_1.htm)**自定义对象**。

转换器的草稿版本（可以根据需要改进错误处理）：

```
internal class TestObjectConverter : CustomCreationConverter<Test>
{
    #region Overrides of CustomCreationConverter<Test>

    public override Test Create(Type objectType)
    {
        return new Test
            {
                Y = new Dictionary<string, string>()
            };
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteStartObject();

        // Write properties.
        var propertyInfos = value.GetType().GetProperties();
        foreach (var propertyInfo in propertyInfos)
        {
            // Skip the Y property.
            if (propertyInfo.Name == "Y")
                continue;

            writer.WritePropertyName(propertyInfo.Name);
            var propertyValue = propertyInfo.GetValue(value);
            serializer.Serialize(writer, propertyValue);
        }

        // Write dictionary key-value pairs.
        var test = (Test)value;
        foreach (var kvp in test.Y)
        {
            writer.WritePropertyName(kvp.Key);
            serializer.Serialize(writer, kvp.Value);
        }
        writer.WriteEndObject();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        JObject jsonObject = JObject.Load(reader);
        var jsonProperties = jsonObject.Properties().ToList();
        var outputObject = Create(objectType);

        // Property name => property info dictionary (for fast lookup).
        var propertyNames = objectType.GetProperties().ToDictionary(pi => pi.Name, pi => pi);
        foreach (var jsonProperty in jsonProperties)
        {
            // If such property exists - use it.
            PropertyInfo targetProperty;
            if (propertyNames.TryGetValue(jsonProperty.Name, out targetProperty))
            {
                var propertyValue = jsonProperty.Value.ToObject(targetProperty.PropertyType);
                targetProperty.SetValue(outputObject, propertyValue, null);
            }
            else
            {
                // Otherwise - use the dictionary.
                outputObject.Y.Add(jsonProperty.Name, jsonProperty.Value.ToObject<string>());
            }
        }

        return outputObject;
    }

    public override bool CanWrite
    {
        get { return true; }
    }

    #endregion
} 
```

客户端代码：

```
var test = new Test
    {
        X = "123",
        Y = new Dictionary<string, string>
            {
                { "key1", "value1" },
                { "key2", "value2" },
                { "key3", "value3" },
            }
    };

string json = JsonConvert.SerializeObject(test, Formatting.Indented, new TestObjectConverter());
var deserializedObject = JsonConvert.DeserializeObject<Test>(json); 
```

请注意：属性名和字典的键名之间可能存在冲突。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-05T17:14:51.403

您可以创建此转换器，然后将其分配给您的财产。采取了一些建议的解决方案。

```
public class DictionaryToJsonObjectConverter : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return typeof(IDictionary<string, string>).IsAssignableFrom(objectType);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            writer.WriteRawValue(JsonConvert.SerializeObject(value, Formatting.Indented));
        }
    } 
```

然后在你的 poco 类中使用它。

```
public class Poco
{
        [JsonProperty("myid")]
        public string Id{ get; set; }

        [JsonProperty("properties")]
        [JsonConverter(typeof(DictionaryToJsonObjectConverter))]
        public IDictionary<string, string> Properties { get; set; }
    } 
```

# c++ - 如何在 apache 中运行 c++ 模块？

> ID：14893616
> 
> 赞同：2
> 
> 时间：2013-02-15T11:23:47.040
> 
> 标签：c++, apache2

我已经在 apache 中编写了 c++ 模块。以下是代码::

### mod_foo.hpp

```
#ifndef MOD_FOO_HPP
#define MOD_FOO_HPP
#ifdef __cplusplus
#define EXTERN_C_BLOCK_BEGIN    extern "C" {
#define EXTERN_C_BLOCK_END      }
#define EXTERN_C_FUNC           extern "C"
#else
#define EXTERN_C_BLOCK_BEGIN
#define EXTERN_C_BLOCK_END
#define EXTERN_C_FUNC
#endif
#include <httpd.h>
#include <http_protocol.h>
#include <http_config.h>**
#endif  /* MOD_FOO_HPP */ 
```

### mod_foo.c

```
#include "mod_foo.hpp"

EXTERN_C_FUNC
int foo_handler( request_rec* inpRequest )
{
    int nReturnVal = DECLINED;

    if ( inpRequest->handler != NULL && strcmp( inpRequest->handler, "foo" ) == 0 )
    {
        ap_rputs( "Hello World from FOO", inpRequest );
        nReturnVal = OK;
    }

    return nReturnVal;
}

EXTERN_C_FUNC
void foo_hooks( apr_pool_t* inpPool )
{
    ap_hook_handler( foo_handler, NULL, NULL, APR_HOOK_MIDDLE );
}

EXTERN_C_BLOCK_BEGIN
module AP_MODULE_DECLARE_DATA foo_module =
{
    STANDARD20_MODULE_STUFF,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    foo_hooks
};
EXTERN_C_BLOCK_END 
```

该模块编译成功，它也安装在 apache 服务器上，但是当我安装它后重新启动 apache 服务器时，会发生以下错误：

> apache2：/etc/apache2/apache2.conf 第 234 行的语法错误：/etc/apache2/conf.d/foo.conf 第 1 行的语法错误：文件 /usr/lib/apache2 中的 API 模块结构 'foo_module' /modules/mod_foo.so 是乱码 - 预期签名 41503232 但看到 41503234 - 也许这不是 Apache 模块 DSO，或者是为不同的 Apache 版本编译的？

我添加了加载模块的`LoadModule`东西，`httpd.conf`但只有 c++ 模块给出了这个错误。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T09:40:46.927

我认为处理程序应该声明为静态的，这可能会导致错误，除了你应该在模块前面添加前缀 extern "C" 之外，但是添加每个带有 extern "C" 前缀的函数是不必要的。

# c# - 如何使用 LINQ 更新知道其名称的对象属性？

> ID：14893617
> 
> 赞同：0
> 
> 时间：2013-02-15T11:23:47.777
> 
> 标签：c#, linq

我的问题很简单：我正在解析一个 Excel 文件，其中包含 SQL 列的名称及其值。

我想用 LINQ 创建我的对象并设置它的属性，知道它的名字。我该怎么做 ？我想做类似的事情：

```
object obj = new object();
obj["property_name"] = "test"; 
```

但相反，我只能做不适合我的情况的 obj.propertyName 之类的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:27:57.100

您可以使用匿名类型查看 -> [http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)

```
var myObj  = new { property_name = "test"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:27:50.657

你可以用反射来做到这一点......

```
obj.GetType( ).GetProperty( "property_name" ).SetValue( obj, "test" ); 
```

// 编辑：

对不起，我给你错误的代码示例。我做了更新。

# c# - LoadState 中的异步调用阻塞了 UI 线程

> ID：14893620
> 
> 赞同：0
> 
> 时间：2013-02-15T11:23:53.830
> 
> 标签：c#, microsoft-metro, winrt-xaml, windows-store-apps, async-await

在我的 Windows 8 应用程序中，我正在覆盖 Page´s LoadState 将其设置为异步并使用它来下载和解析我等待的任务中的数据。之后我将这些数据绑定到 GridView。

尽管我的处理应该异步运行，但在我处理该任务期间所有 ui 都被阻止。

```
public class Example
    {
        // ...
        protected override async void LoadState( . . . )
        {
            await Task.Run(() => downloadAndParseData());
            // Update the UI with results
        }

        private async Task downloadAndParseData()
        {
            // ...
        }
        // ...
    } 
```

有谁知道为什么会这样以及我如何能够解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:48:15.330

我使用了 SQLite 库并且没有使用它的异步方法。

因此，所有 db 操作最终都阻塞了 ui 线程。

我通过使用 SQLite 提供的异步方法解决了我的问题

# ruby - 编写一个伟大的、可重用的“to_s”方法来更好地调试

> ID：14893628
> 
> 赞同：1
> 
> 时间：2013-02-15T11:24:35.490
> 
> 标签：ruby, object

我有几个我想`puts`经常调试的对象。 [对象](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_get)默认`to_s`方法对于该目的并不是那么好。一般来说，我觉得你会想要*查看*实例（所以最有趣的部分是实例变量）所以我想出了这个：

```
class DebugObject
    def initialize(args)
      raise ArgumentError unless args.is_a? Hash
      args.each { |k,v| instance_variable_set "@#{k}".to_sym,v } 
    end

    def to_s
      str = "#{self.class}:\n"
      instance_variables.each do |var|
        str += " %s: %s" % [var, instance_variable_get(var)]
      end
      str
    end
end

class User < DebugObject
  attrs = [:email, :password, :first_name, :last_name, :street, :postal_code, :city]
  attrs.each { |attr| attr_accessor attr }
end

class CreditCard < DebugObject
  attrs = [:holder, :number, :cardinalidity, :cvc, :error_code, :error_message]
  attrs.each { |attr| attr_accessor attr }
end 
```

与 puts 一起使用时给了我：

```
User:
 @first_name: Peter @last_name: Parker @street: Street number @postal_code: 9020
 @city: New york @email: peter@parker.com

CreditCard:
  @holder: Martin @number: 00000 @cardinalidity: 09/10 @cvc: 123
  @error_code: 00 @error_message: No eroro :) 
```

我想知道您是否有任何提示和技巧来编写一个`to_s`在调试时有用的出色、可重用的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:09:46.120

我建议只使用`p`to print 而不是`puts`. `p`在对象上打印结果，`.inspect`该对象打印出实例变量及其值，其中`puts`打印出结果`.to_s`，不打印实例变量。

# ruby-on-rails-3 - 我如何为现有的 rails gem/engine 做出贡献

> ID：14893630
> 
> 赞同：0
> 
> 时间：2013-02-15T11:24:47.633
> 
> 标签：ruby-on-rails-3, rubygems, open-source, rails-engines

什么是扩展和促进铁轨的最佳方式`gem/engine`

我找到了这个博客[gem/engine](https://github.com/jipiboily/monologue)，我想在我的 rails3 应用程序中使用它。

但是我想要的修改/功能很少，我愿意对它们进行编码。之后我想将它们添加到原件中`gem/engine`（如果作者允许）

但我对如何以及在何处编码和测试我的新更改感到困惑。

到目前为止，我已经完成了以下工作

1 - 分叉`gem/engine`到我的 github 帐户

2 - 将源克隆到我的本地机器

3 - 创建了一个示例 rails 应用程序并添加了`gem`（来自我的 github 帐户）

我的问题是，

如何对代码进行更改`gem`并对其进行测试。Gem 本身使用了 rspec，我也可以这样做，但是我正在计划的一些更改（例如布局更改）很难通过 rspec 进行检查。

这`gem`在使用`rails > 3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:38:38.683

关于它有一个出色的 ScreenCast：[RailsCasts: Contributing to Open Source](http://railscasts.com/episodes/300-contributing-to-open-source)

# ps3 - 索尼的 PhyreEngine 使用什么编程语言？

> ID：14893631
> 
> 赞同：1
> 
> 时间：2013-02-15T11:24:48.983
> 
> 标签：ps3

我正在考虑为下一个 PlayStation（将于 2 月 20 日发布）和 PSVita 开发一个标题，以在 PlayStation Network 上分发。我知道如何与索尼取得联系，但我还没有提交我的申请（尽管我有一个很好的作品集），我希望使用索尼自己的 PhyreEngine 来开发游戏。

我想知道你们中是否有人知道引擎使用或基于什么编程语言？因为我想为游戏的制作做好充分的准备。另外，如果有人读过这篇文章并曾经开发过 PSN 游戏，你有没有大概了解它的成本是多少？（开发工具包、SDK、许可证等）

谢谢

哈利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:30:47.120

PhyreEngine 本身是用 C++ 编写的。这些工具主要是 C#。

一般无法告诉您有关费用的任何信息，您必须通过官方渠道联系以获取该信息。PhyreEngine 本身对任何获得许可的开发人员都是免费的，它只是 SDK 的一部分。

（披露 - PhyreEngine 是我的项目）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:53:04.567

PhyreEngine 基于 C++，可能包含一些低级 C 库。

此信息来自此论坛中的帖子：[http](http://www.3dbuzz.com/forum/threads/181890-What-runs-on-a-PS3/page2) ://www.3dbuzz.com/forum/threads/181890-What-runs-on-a-PS3/page2 ，大约在页面的一半。一张海报问了你同样的问题。

希望这可以帮助！

# c++ - C/C++ 如何复制结构？

> ID：14893639
> 
> 赞同：3
> 
> 时间：2013-02-15T11:25:14.257
> 
> 标签：c++, c, struct, copy

在 C/C++ 中按值传递结构时，必须复制结构内容。编译器如何实现这一点？即，该副本通常发出哪些汇编指令？

例如，与调用 memcpy 相比，这些速度有多快？

现在考虑这段代码：

```
struct X { int i, j, k; };

void foo(X x);

void foo( int i, int j, int k); 
```

调用 foo(X) 和 foo(int,int,int) 之间有什么区别，或者生成的汇编代码是否相同（考虑到参数的传递）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T11:26:28.203

## 在 C++ 中

> **编译器如何实现这一点？**

他们调用该类/结构的**复制构造函数。**如果您不提供一个或您提供的一个，则隐式生成一个。

> **例如，与调用相比，这些速度有多快`memcpy`？**

取决于类及其成员。剖析应该给你一个更清晰的画面。
但是，`memcpy`应避免使用复制类实例。

## 在 C 中

> **编译器如何实现这一点？**

他们为该结构执行**[浅拷贝。](http://en.wikipedia.org/wiki/Object_copy#Shallow_copy)**出于所有实际目的，您可以将其视为与`memcpy`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T11:34:31.810

显然，如果`struct`or有构造`class`函数，则调用构造函数。

如果没有构造函数，则完全取决于编译器，但最有可能的是，对于三个整数大小的对象，它可能是三个单独的`mov`指令。对于较大的结构，它可以是对 . 的调用`memcpy`或类似的内联版本`memcpy`。

如果结构非常大（几兆字节），也很有可能`memcpy`比内联版本更快，编译器可能没有意识到这一点并使用内联版本。但是我们大多数人不使用兆字节的大型结构，所以我认为一般来说这不是太担心的事情。考虑到典型堆栈的大小有限，如果结构是兆字节大，则将结构作为参数复制到堆栈上可能不是一个好主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T11:35:07.153

有两种不同的情况。

*   如果您的 struct 是**POD**，则副本将被优化并且将与 memcpy 一样快（具有适当的优化级别）。

*   如果您的 struct**不是 POD**，则 C++ 必须为您的对象调用复制构造函数。复制构造函数可能会调用其他函数、new 运算符等，因此它会比 memcpy 慢。但`memcpy`不会正确复制结构，`memcpy`在非 POD 类型上使用会导致未定义的行为！

请注意，例如在`g++`调用`memcpy`中将被内联和优化。由于结构复制和 memcpy 调用之间的意图完全相同（将 X 字节从位置 Y 复制到 Z），我认为生成的汇编代码不会有所不同。

无论如何，可以肯定的是，通过分析代码的汇编来找出它。

* * *

编辑：只需阅读有关函数参数的问题的结尾即可。请注意，函数参数传递通常（尤其是在 x64 中）在寄存器中完成，它比`memcpy`.

我检查了汇编代码，它们**确实不同**。确切的代码将取决于您当前编译器使用的[调用约定。](http://en.wikipedia.org/wiki/X86_calling_conventions)对我来说，结构没有在寄存器中传递，而是在堆栈上传递并制作了实际的副本。三个`int`s 传入`%ecx`,`%edx`和`%r8d`。我在 Windows GCC 上试过这个。它似乎使用 Windows x64 调用对流。

有关如何传递参数的更多信息，请查看调用约定的规范。所有细节和极端案例都已制定。例如，对于 x64 GCC，请查看 System V AMD64 ABI 第 3.2.3 章参数传递。对于 Visual Studio 看[这里](http://msdn.microsoft.com/en-us/library/zthk2dkh%28v=vs.80%29.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:28:30.563

[请参阅Alok Save](https://stackoverflow.com/users/452307/alok-save) for [c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")的另一个答案。在[c](/questions/tagged/c "显示标记为“c”的问题")中，它可以是（或等效的）或它的内联版本（对于具有良好大小的结构`memcpy`最多一个指令）。`mov`

# java - 无法在 Rational application developer 8 中启动 websphere server 8

> ID：14893641
> 
> 赞同：1
> 
> 时间：2013-02-15T11:25:19.253
> 
> 标签：java, websphere, rad

我正在使用 Websphere 应用程序服务器 8.0.0.2 和 Rational 应用程序开发人员（RAD- 8.0.4）

当我尝试从 RAD 服务器选项卡启动 WAS 时。它工作了两到三倍，后来它开始给

```
Exception in thread "main" java.lang.NoClassDefFoundError: RESOURCE
Caused by: java.lang.ClassNotFoundException: RESOURCE
    at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
    at java.lang.ClassLoader.loadClassHelper(ClassLoader.java:665)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:644)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:358)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:627)
Could not find the main class: RESOURCE.  Program will exit. 
```

我重新安装了 WAS 并尝试了，它工作正常，我能够正确启动服务器 1 或 2 次，然后在我重新打开 RAD 后再次出现同样的错误。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:36:57.763

尝试清理服务器：

转到服务器视图，右键单击服务器并选择“清理...”。这会转储所有缓存的应用程序和状态文件。然后这将启动服务器并发布其上的任何项目。

# java - java，对于非常基本的 ASCII 控制台输出的 for 循环帮助

> ID：14893642
> 
> 赞同：0
> 
> 时间：2013-02-15T11:25:20.233
> 
> 标签：java, for-loop, ascii

写一些简单`ASCII`的东西，现在基本上只是为每个像素打印一个具有定义宽度和高度的字符。

我有一个 for 循环，将字符添加到字符串中，并在达到宽度时添加“\n”，以便宽度和高度正确。

但是它目前在第一行打印太多，在最后一行打印太少有什么想法吗？

将此传递给`method ('.', 7,5)`

```
private String format(char character, int width, int height)
{
    char[] picture = new char[width * height];
    String pic = "";

    for(int i = 0; i < width * height; i++)
    {
        picture[i] = character;
        pic += picture[i];

        if(i == width || i > width  && i % width == 0)
        {
            pic += "\n";

        }
    }
    return pic;
} 
```

这是我的输出

…………………………………………………………………………………………………………………………………………………………………………………………

好吧，这些点的每个块都应该在不同的行上，但由于某种原因，它把它们排成一行，无论如何你仍然可以看到第一行有 8 个，最后一行有 6 个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:30:02.840

只需将您的新行追加到循环中：

```
if(i > 0 && (i % width) == 0)
{
    pic += "\n";
}
picture[i] = character;
pic += picture[i]; 
```

你绝对应该使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)来构建字符串。

# mobile-website - 如何强制搜索引擎索引桌面而不是移动版网站

> ID：14893645
> 
> 赞同：0
> 
> 时间：2013-02-15T11:25:33.740
> 
> 标签：mobile-website

我有一个网站，有桌面版和移动版。我正在使用 Apache 规则将移动设备重定向到网站的移动版本。桌面版使用子域“www”和移动版“m”。然而，谷歌似乎比桌面版更喜欢移动版，因此信件页面的排名总是比同等的桌面版最差。此外，谷歌从移动版本索引的页面比桌面版本多得多。

我如何告诉 Google 其他搜索引擎移动版本仅适用于移动设备？是否应该使用 robots.txt 完全阻止子域“m”？或者有什么方法可以告诉那些机器人像 m.mysite.com/a-page 这样的特定页面只是 www.mysite.com/a-page 的移动版本？

# javascript - 使用 ajaxQ 对 ajax 请求进行排队

> ID：14893646
> 
> 赞同：0
> 
> 时间：2013-02-15T11:25:34.077
> 
> 标签：javascript, jquery, queue

我想使用 jquery 插件 ajaxQ。文档说所有需要扩展的东西就是写这个

```
$.ajaxq("myqueue", { ... }) 
```

代替

```
$.ajax ({ ... }) 
```

但它似乎仍然同时触发请求。有谁知道我是否在这里遗漏了什么。

# less - lesscss 导入和观看

> ID：14893647
> 
> 赞同：3
> 
> 时间：2013-02-15T11:25:35.667
> 
> 标签：less

我有两个文件： black.less

```
/* imports */
@import "elements.less";
@import "crush.less";
@import "tree.less"; 
```

我通过添加以下内容来使用较少的手表功能：

```
 less.watch(); 
```

果然，我可以看到流量变黑了。Black.less 并没有改变，因此任何正在导入的文件中的任何更改都不算作更改，并且样式不会更新。

但是，如果我触摸 black.less，则样式会按应有的方式更新。

有没有一种方法可以自动更新，无论它是导入文件还是添加到页面的实际较少文件，即我只需要更改比如说tree.less。

/K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:57:34.380

我使用[Grunt](http://gruntjs.com/)和[grunt-contrib-less 插件](https://npmjs.org/package/grunt-contrib-less)来监视我所有的 less 文件，并在它们发生变化时将它们编译成 CSS。

然后我在浏览器中使用[live.js](http://livejs.com/)来观看 CSS 文件。

这样做的好处是我可以对我的 HTML 和 JS 文件做同样的事情，以及运行测试、检查我的 JS 文件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:12:48.030

Remy Sharp 最近写了一篇关于较新版本的 Chrome 如何支持将您在开发工具中编辑的文件保存回文件系统的帖子。

他主张[永远不必离开 devtools](http://remysharp.com/2012/12/21/my-workflow-never-having-to-leave-devtools/)。只需在浏览器中进行编辑即可。此解决方案的优势在于您可以继续使用客户端的 Less 编译器。

（我仍然非常喜欢我强大的文本编辑器和命令行，无法完全放弃它们，但我认为这个答案可能会吸引至少一些提出这个问题的人。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:49:46.290

这是另一种快速方法。

```
watch -n 1 touch black.less 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-22T00:13:33.620

这对于操作来说可能为时已晚，但我有同样的问题，也许其他人也有。

[less-watch-compiler](https://www.npmjs.com/package/less-watch-compiler)将监视目录（和子目录）的更改并将任何更少的代码编译到目标文件夹。很酷的一点是您可以指定主文件，当源目录中的任何文件发生更改时，只会编译主文件。

用法：

`less-watch-compiler [options] <source_dir> <destination_dir> [main-file]`

# c++ - 断言：指针必须来自“本地”堆

> ID：14893649
> 
> 赞同：0
> 
> 时间：2013-02-15T11:25:42.943
> 
> 标签：c++, memory-management, dll, assertion

我正在测试一个名为 clunk ( [http://sourceforge.net/projects/clunk/](http://sourceforge.net/projects/clunk/) ) 的小声音库。我为 Visual Studio 11 构建了该库并将其链接到我的 Visual Studio 项目中。当我尝试 test.cpp 时，我得到了 msvcr110d.dll 抛出的断言。

它是否与我的运行时库设置有关：它是“ **Multithreaded-Debug-DLL (/MDd)** ”？在 clunk 的 cmakelist.txt 中，我添加了以下代码行：

```
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /MDd") 
```

我仍然收到指针分配存在问题的消息。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T11:45:47.587

您可能在应用程序/库边界的一侧分配内存并在另一侧释放它。这很难做到，最好避免。

您必须确保将内存返回给分配它的同一个分配器。这里有一些模式可以避免这个问题：

1.  不要让库为返回的结构分配内存，而是让应用程序来做。然后应用程序可以释放结构。

2.  让库为结构分配内存，但不是应用程序释放它，而是让应用程序调用一个特殊的释放函数。因此，如果库中有一个“getFoo”函数返回一个分配的结构，那么就有一个“freeFoo”函数来释放该结构。这确保了库将结构返回给它自己的分配器。

3.  让库使用静态分配的结构，这些结构在下次调用库之前一直有效。

4.  为库提供一个“setAlloctor”函数，并向它传递一个指向`malloc`和`free`来自应用程序的指针。这样，库将始终使用应用程序的分配器。

5.  为库提供一个`getAllocator`函数，该函数返回指向库正在使用的`malloc`和函数的指针。`free`这样，应用程序可以从库的分配器中获取内存（以使库可能释放）或将内存返回给库的分配器（由库分配）。

查看生成断言的代码，看看是否可以修改它以使用其中一种模式。例如，`delete`当您应该使用库提供的特殊析构函数时，您可能只是调用了指向从库中获得的对象的指针。

# c# - C#.net 在一个方法中锁定对象，在另一种方法中没有锁定

> ID：14893651
> 
> 赞同：1
> 
> 时间：2013-02-15T11:25:46.537
> 
> 标签：c#, object, static, locking

我有两种方法“ExecuteNoQuery”（执行 dbCommand.ExecuteNonQuery()）和“Query”执行（dbCommand.ExecuteReader()）。这两种方法都使用相同的连接对象。在 ExecuteNoQuery 方法中实现了一个锁（使用连接对象）和 Query 方法实现了无锁。如果有多个线程，不同的线程同时访问这两个方法，那会发生什么？

注意：在 Query 方法中，自定义连接池是使用相同的对象实现的。

```
public int ExecuteNoQuery(string sqlquery, Hashtable htData) {
try {
 lock(Myservice.dbcon)  
  {
    using (OracleCommand dbCommand = new OracleCommand(sqlquery, Myservice.dbcon)) 
        {

              int rowCount = dbCommand.ExecuteNonQuery();
              return 1;
        }
  }
}

public OracleDataReader Query(string sqlquery, Hashtable htData)
    {
        try
        {
            OracleDataReader dbReader = null;
            Random ran = new Random();
            int randomnumber = ran.Next(1,5);

           Myservice.dbcon = (OracleConnection) Myservice.htdbcon
           ["Connection_" +randomnumber];

            if (Myservice.dbcon.State != System.Data.ConnectionState.Executing 
              || Myservice.dbcon !=  System.Data.ConnectionState.Fetching)
                {
                    using (OracleCommand dbCommand = new OracleCommand(sqlquery,
                     Myservice.dbcon))
                    { 

                        dbReader = dbCommand.ExecuteReader();
                    }
                }
                return dbReader;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:31:39.330

> 这两种方法都使用相同的连接对象。

由于一种方法使用锁而另一种方法不使用：坏事。对于这种情况，对象不做任何保证，因此您应该期望它以有趣的方式失败。您应该在两个地方使用相同的锁对象，或者更好：只使用隔离代码中的连接，而不是共享连接。使用连接池，在某处拥有共享连接对象很少有用。更合适的模式通常是*在需要时*获取连接，然后将其处理掉。如果底层提供程序支持池，这将在理想情况下执行，没有任何同步问题，并允许并行查询等。例如：

```
using (var conn = SomeUtilityClass.GetOpenConnection())
using (var cmd = conn.CreateCommand()) 
{
    cmd.CommandText = sqlquery;
    int rowCount = dbCommand.ExecuteNonQuery();
    return 1;
} 
```

并且，重要的是，从方法中*做同样*`Query`的事情；没有锁，没有全局共享连接。

顺便说一句，我也会担心缺少参数。这表明您正在接受 SQL 注入错误。

# windows-8 - WebView.Navigate 导致未处理的异常

> ID：14893653
> 
> 赞同：3
> 
> 时间：2013-02-15T11:25:53.277
> 
> 标签：windows-8, webview, winrt-xaml, windows-store-apps

[在Windows 8 SDK 示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)中使用 WebView 控件会导致未处理的“未指定错误”。在我自己的项目中，它给了我一个未处理的异常'无法获取未定义或空引用的属性'1'。

我无法抓住它。

如果我将它部署到 Surface 或另一台机器上，它就不会发生，所以我认为它可能是我的机器。

我需要知道我可以做些什么来解决我的机器上的这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:27:04.170

当您使用其内容具有 JavaScript 异常的 WebView 调试 XAML 应用程序时，该异常会通过 WebView 提升到您（可能）可以调试它的 Visual Studio。当您在不调试的情况下运行此 (CTRL+F5) 时，这些类型的错误将被吞没。所以你的体验不是你的机器，而是附加了调试器的事实。

您可以在此处找到类似的问题及其答案：[https](https://stackoverflow.com/a/12249831/265706) ://stackoverflow.com/a/12249831/265706但请注意，该问题的答案建议禁用调试机制。确保这是你真正想做的。

# jquery - 通过 jQuery 检测 top.location.href 的变化

> ID：14893659
> 
> 赞同：0
> 
> 时间：2013-02-15T11:26:07.820
> 
> 标签：jquery, window, onchange

有什么方法可以检测 jQuery 中 top.location.href 或 window.location.href 的变化？尝试过类似的东西

```
top.location.href.change(function() {}); 
```

已经，但是没有用。

有任何想法吗？

**更新：**我想防止框架打破盒子。框架可能不会更改主页的 top.location.href。

谢谢！检测

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:34:57.787

尝试

```
$(document).ready(function() {
    $(window).bind( 'hashchange', function(e) { 
    var anchor = document.location.hash;
            if( anchor === '#first_one' ) {
                alert('url = #first');
            }else if ( anchor === '#second_one' ) {
                alert('url = #second');
            }else if ( anchor === '#third_one' ) {
                alert('url = #third');
            }
            console.log(anchor);
    });
});
```

[不适用于所有浏览器](http://caniuse.com/hashchange)。

[**jquery-hashchange-插件**](http://benalman.com/projects/jquery-hashchange-plugin/)

# ajax - 无法填充 Spring Webflow 托管 Bean 支持的 RichFaces 4 pickList 的右侧

> ID：14893663
> 
> 赞同：0
> 
> 时间：2013-02-15T11:26:20.543
> 
> 标签：ajax, spring, jsf-2, richfaces, spring-webflow-2

我正在从 Richfaces 3.3.3 迁移到 Richfaces 4.3.0，这需要将 JSF 从 1.2 升级到 2.1。我们还使用 Spring Webflow 2.3.2（从 2.1.1 升级）进行对话定义。所有 bean 都由 Spring 管理（没有 JSF 管理的 bean）。必须调整几个 Richfaces 组件才能使应用程序再次正常工作。我现在遇到的问题涉及**rich:pickList**组件，它看起来像这样（我使用了展示示例并对其进行了编辑以描述问题）：

```
<rich:pickList id="ownPicklist" value="#{listSelectBean.selectedCapitals}"
  sourceCaption="Available cities" targetCaption="Selected cities"
  listWidth="165px" listHeight="100px">
  <a4j:ajax event="change" execute="@this" render="#{mainBean.dynamicRerenderList}" />
  <f:selectItems value="#{listSelectBean.capitals}" var="capital"
    itemValue="#{capital}" itemLabel="#{capital.name}" />
  <f:converter converterId="CapitalsConverter" />
</rich:pickList> 
```

现在与展示示例不同，我们的 ListSelectBean 是一个 Spring bean，定义如下：

```
<bean id="listSelectBean" class="com.xyz.example.bean.ListSelectBean" scope="request" /> 
```

自定义转换器在 faces-config.xml 中注册：

```
<converter>  
  <converter-id>CapitalsConverter</converter-id>  
  <converter-class>com.xyz.converter.CapitalsConverter</converter-class>  
</converter> 
```

如您所见，我们有一个附加到pickList 的ajax 事件处理程序，它根据从列表中选择的值动态计算要重新呈现的组件列表。此列表还包含 pickList 本身，通常必须使用更少的元素来重新呈现它以供选择。我得到的 ajax 响应包含完整的源列表，但目标列表为空。

现在解决问题：

当我从左侧选择一个元素时，它会跳到右侧**并立即返回**。我调试了这个问题并了解到 listSelectBean 的所有 getter 和 setter 都在运行不同的 JSF 阶段时被正确调用。使用 JSF 管理的请求范围 bean 的相同示例可以正常工作（在 Richfaces 展示中），还可以在组件本身上使用 ajax 重新呈现。我怀疑 Spring (Webflow) 中的 bean 处理存在问题。但我无法确定它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:21:09.313

经过长时间的调试，我终于找到了问题的解决方案。由于 RichFaces 在渲染过程中使用 HashSet，因此对于 PickList 中使用的复杂对象（这通常是一个好主意）覆盖 hashCode() 和 equals() 方法很重要。否则选定的对象将不会被标记为选中。

# magento - 在 Magento 中单击子类别时显示产品

> ID：14893664
> 
> 赞同：1
> 
> 时间：2013-02-15T11:26:21.357
> 
> 标签：magento

如何`on-click`在 Magento 的子类别中显示产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:29:30.603

通过单击子类别，可以看到分配给该子类别的产品。确保以下几点：

产品被分配到特定类别： ![编辑产品类别](../Images/b6b1c0717eab016d0609456e1da0ff08.png)

产品的状态为“启用”，其可见性为“目录”或“目录，搜索”： ![编辑产品一般](../Images/f6b545a7894ed2857f9fb64e7d10e5e7.png)

产品的库存状态为“有货”： ![在此处输入图像描述](../Images/33c7c169b97043e0d8dbddf82646c69e.png)

..或检查`Display Out of Stock Products`in的值`System/Configuration/Catalog/Inventory`： ![在此处输入图像描述](../Images/0d8d5e9e67180e73cd0df94955e67c18.png)

最后但并非最不重要的一点是，如果您配置了多个商店，请确保将所有这些都放在正确的商店中（除了配置值，这是全局的）。

编辑：......还有一件事：

检查您的类别的显示设置，因为如果`Display mode`是“仅静态块”，它将不会显示产品： ![在此处输入图像描述](../Images/f2f2d0c0f3e8300065318c221232fdbb.png)

# html - 不同部分的相同类名

> ID：14893668
> 
> 赞同：0
> 
> 时间：2013-02-15T11:26:41.810
> 
> 标签：html, semantic-markup

我为 And 编写了一个标记， 并以这种方式将其划分为主要部分：`Corpora - A Business Theme`

[![](../Images/f2cd7223f9dd6e2b91f10605347da985.png)](https://i.stack.imgur.com/H9CKZ.jpg)

```
<header>
    <div class="roof"></div>
    <nav></nav>
    <div class="slides"></div>
</header>
<div class="content">
    <div class="roof"></div>
    <aside></aside>
    <div class="main"></div>
</div>
<footer>
    <div class="roof"></div>
    <div class="credit"></div>
</footer> 
```

可以用相同的类名命名页面的不同部分`.roof`吗？
**[编辑]** 所以，考虑到我`.roof`的风格不同，我必须写

```
<header>
    <div class="roofHeader"></div>
    <nav></nav>
    <div class="slides"></div>
</header>
<div class="content">
    <div class="roofContent"></div>
    <aside></aside>
    <div class="main"></div>
</div>
<footer>
    <div class="roofFooter"></div>
    <div class="credit"></div>
</footer> 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:36:45.270

在您的示例（屋顶）中使用相同名称命名不同部分没有问题，直到您希望它们以相同的方式设置样式或使它们看起来相同。

例如

```
<header>
<div class="roof"></div>
<nav></nav>
<div class="slides"></div>
</header>
<div class="content">
<div class="roof"></div>
<aside></aside>
<div class="main"></div> 
```

在上面的代码中，标题部分中的 div 看起来与内容部分中的 div 完全相同。

要添加更多内容-如果您正在为主题编写标记-最佳做法是-

1.  编写全局样式类

2.  部分特定的样式类

例如：- 部分特定样式 .header{ width:100%; 字体家族：爱丽儿；字体大小：12px；} 全局样式 .float-right{ float:right; }

现在 .header 类将专门用于标题部分。它将为我们提供最大的控制来更改其中的任何内容，并且不会影响其他部分，除非我们在标记中的其他地方使用它。

.float-right 类可用于 html div 或要浮动到右侧的部分中的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:32:03.203

语义上完全没问题。

对于 2 个或更多部分，如果要应用相同的样式表，则所有部分都可以具有相同的类名，并且可以为该特定类定义样式表。

例如

```
.className{ property:value; } 
```

# c# - 正则表达式查询实现

> ID：14893672
> 
> 赞同：0
> 
> 时间：2013-02-15T11:26:58.860
> 
> 标签：c#, asp.net, regex

我正在尝试检查一个搜索框，这是我的查询，它有效但有几个问题。

```
 // =================================
 var check = new Regex("[^A-Za-z]");
 Match m = check.Match(searchQuery);
 if (m.Equals(check) != true)
 {
     pnl_Message.Visible = true;
     pnl_Message.CssClass = "messageTable";
     lbl_message.Text = " * Only Letters are allowed";
  } 
```

If 语句 Equals 表示可疑比较！
但有效！
问题是它总是出现在 if 语句中，无论我设置什么表达式。

我应该如何查询 searchQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:29:33.577

您`Equals`正在将 a`Match`与 a进行比较`Regex`-它们是不同的类别，因此永远不会正确，并且您总是陷入`if`困境。

您可能想要`if (m.Success)`- 检查返回的值是否`check.Match(...)`成功匹配（即输入包含非字母）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:28:48.280

您正在使用`Object`的`Equals`方法是基类`Regex`

类ie的使用`IsMatch`方法`Regex``check.IsMatch(searchQuery)`

# java - 在文件中而不是在 JAVA 类中设置变量

> ID：14893674
> 
> 赞同：2
> 
> 时间：2013-02-15T11:27:03.497
> 
> 标签：java

我不确定标题是否正确，但目前我有：

```
private String destinationPDF = "D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/pdf/";
public static String destination ="D:/Documents/NetBeansProjects/printing~subversion/fileupload/Uploaded/";
public String fileList = "D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/Directory Files/directoryFiles.txt"; 
```

这些是在类中定义的，实际上是跨 2 个类，但这对我来说不是一个完美的情况，我想知道有没有办法将位置存储在 txt 中并访问它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:29:32.997

您需要使用 java.util.Properties 类。请参阅[jdk 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)页面上的文档。这是一个示例用法：

```
 Properties prop = new Properties();
    try {
        prop.load(new FileInputStream("config.properties"));
            System.out.println(prop.getProperty("destinationPDF"));
        System.out.println(prop.getProperty("destination"));
        System.out.println(prop.getProperty("fileList"));

    } catch (IOException ex) {
        ex.printStackTrace();
    } 
```

这里是属性文件：

```
# sample properties
destinationPDF=D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/pdf/
destination="D:/Documents/NetBeansProjects/printing~subversion/fileupload/Uploaded/
fileList =D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/Directory Files/directoryFiles.txt 
```

# powershell - 在日志文件中打印行号

> ID：14893676
> 
> 赞同：0
> 
> 时间：2013-02-15T11:27:17.610
> 
> 标签：powershell, line-numbers

我正在尝试管理我的函数中的一些非标准错误（例如错误的输入文本），并且我想通过在变量中写入一种日志来跟踪这些错误。我也在尝试写行号，这是我的代码

```
$someVar = "line $($MyInvocation.ScriptLineNumber): at least 2 arguments needed, function has been called with only $args.Count arguments" 
```

有时它会返回正确的数字，有时则不会。这是正确的方法吗？还有其他方法吗？

编辑：我发现这个问题可能与执行我用来绕过特定机器上的权限问题的脚本的非常规方式有关。我会尽快发布更详细的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:36:18.530

为什么你没有`param`在你的函数中使用并强制它们？

```
Function A()
{
   Param
   (
      [Parameter(Mandatory=$true)][String]$Arg1,
      [Parameter(Mandatory=$true)][String]$Arg2
   )
   Write-Host "$Arg1 $Arg2"
} 
```

如果你在没有任何参数的情况下运行这个函数，那么它会抛出一个错误，询问强制参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:49:19.853

尝试包装 $()。例如：

```
$someVar = "line $($MyInvocation.ScriptLineNumber): at least 2 arguments needed, function has been called with only $($args.Count) arguments" 
```

# c# - 如何使用 EzAPI 创建 SSIS 2012 项目？

> ID：14893678
> 
> 赞同：4
> 
> 时间：2013-02-15T11:27:24.973
> 
> 标签：c#, .net, ssis, ezapi

我正在尝试使用 EzAPI 创建一个 SSIS 2012 项目。但是，在将项目文件保存到磁盘后，我无法在 Visual Studio 中打开它。

我用来创建一个包含一个包的简单项目的代码如下：

```
EzProject MyProject = new EzProject();
EzPackage MyPackage = new EzPackage();
MyPackage.Name = "MyPackage";

MyProject.AddPackage(MyPackage);

MyPackage.SaveToFile("C:/Temp/MyPackage.dtsx");
MyProject.SaveAs("C:/Temp/MyProject.dtproj"); 
```

正如预期的那样，我的 C:/Temp 文件夹包含包和 .dtproj 文件。但是我无法在 Visual Studio 中打开 dtproj 文件。我尝试时收到的错误是：“来自 HRESULT x80041FEB 的异常”

此外，当我在记事本中打开 .dtproj 文件时，它不像 .dtproj 文件那样包含 XML。它包含一些带有许多特殊字符的乱码（例如：eQMs‚0¼wÆÿÀä$|）

我正在使用最新版本的 EzAPI，可在此处下载：http: [//sqlsrvintegrationsrv.codeplex.com/releases/view/82369](http://sqlsrvintegrationsrv.codeplex.com/releases/view/82369)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:20:12.530

我终于弄清楚发生了什么。

EzProject.SaveAs 不会创建 .dtproj 文件，而是创建 .ispac 文件。其中包含所有项目文件，可以部署到 SQL Server。

例如，当您使用 WinZip 打开 .ispac 文件时，您会看到它包含所有包和其他项目元数据。

下面的代码将创建一个包含一个包的项目并将其保存到一个 .ispac 文件中。

```
 EzProject MyProject = new EzProject();
        MyProject.Name = "MyProject";
        EzPackage MyPackage = new EzPackage();
        MyPackage.Name = "MyPackage";
        MyProject.AddProjectParameter("MyParameter", TypeCode.Boolean);
        MyProject.AddPackage(MyPackage);
        MyProject.SaveAs("C:/MyProject.ispac");
        MyProject.CloseProject(); 
```

# html5-canvas - HTML5 Canvas：使对象只能在画布的特定区域拖动。

> ID：14893684
> 
> 赞同：3
> 
> 时间：2013-02-15T11:27:52.187
> 
> 标签：html5-canvas, kineticjs

我正在阅读 HTML5 Canvas 教程。 [http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-events-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-events-tutorial/)

我想在画布的特定区域拖动一个对象，并且该对象不应从该区域拖出。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:16:46.660

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/)

您必须定义一个自定义的拖动边界函数来限制可以拖动对象的位置。像这样：

```
 var yellowGroup = new Kinetic.Group({
      x: stage.getWidth() / 2,
      y: 70,
      draggable: true,
      dragBoundFunc: function(pos) {   // <--- starting here
        var x = stage.getWidth() / 2;
        var y = 70;
        var radius = 50;
        var scale = radius / Math.sqrt(Math.pow(pos.x - x, 2) + Math.pow(pos.y - y, 2));
        if(scale < 1)
          return {
            y: Math.round((pos.y - y) * scale + y),  //<--- you have to return an object like {x: number, y: number }
            x: Math.round((pos.x - x) * scale + x)
          };
        else
          return pos;
      } // this bounds the dragging into a circle area.
    }); 
```

从本质上讲，它只是一点点数学，它决定了你可以在哪里设置一个点。

# java - Java CPU 使用率应该是 100%……但事实并非如此

> ID：14893685
> 
> 赞同：10
> 
> 时间：2013-02-15T11:27:53.393
> 
> 标签：java, multithreading, jvm

我在我的 Core i7 笔记本电脑上运行一个 Java 程序，它有 8 个内核（4 个物理，4 个 HT）。该程序使用 8 个并行线程，因此它应该耗尽所有 CPU。使用“-server”参数运行时，它始终处于 100%。没有它，它总体上大约是 50%-60%（总是随着 100% 的峰值和 30% 的下降而变化）。这就是我觉得奇怪的地方：当我在调试中运行程序并等待 CPU 使用率特别低 (30%) 的片刻，然后暂停执行以查看八个线程在做什么时，它们都没有处于阻塞状态. 此外，它们之间几乎没有同步。这就是我想知道的：

1.  服务器和客户端虚拟机之间有什么区别会阻止客户端的 CPU 达到 100%？
2.  在没有同步的情况下，什么可以阻止线程完全用完内核？（可能与1有关）

编辑：这是一个想法：代码分配大数组并很快将它们留给 GC。调用“new SomethingBig()”并分配该内存需要时间时，线程是否休眠？如果虚拟机中有一个进程处理一堆线程的分配，我想这可以解释为什么它们似乎在同步块之外随机暂停......

Edit2：我很确定它现在是由 GC 引起的。如果我给 VM 1500Mb 而不是默认的 500Mb，CPU 会再次达到 100%。我认为减速不会发生在服务器模式下，因为它默认使用更多内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:20:22.140

与Java无关，但是您拥有的线程数应该超过您必须充分利用CPU的核心数，这是因为有很多时候特定线程无法执行，以及更明显的是等待另一个线程持有的条件变量，线程也可能由于其他原因被阻塞，例如缓存未命中可能需要线程等待数据是否加载到 CPU 缓存中，它可能必须等待来自某个源的输入比cpu慢，实际上内存分页可能会导致您的线程等待。通过拥有比核心更多的线程，当一个线程由于某种原因被阻塞时，另一个线程可以使用被释放的那个核心。一个好的初始值大约是您拥有的内核数的 1.5 倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T05:35:12.573

如果你想监控 Java 线程在做什么，你不应该在调试模式下运行应用程序并暂停它。

相反，您应该在 CPU 使用率下降的特定时间间隔内收集**线程转储。**`kill -3 <pid>`

与您的第二次更新相关，您应该**启用带有时间戳的 GC 日志记录，**并将减速/CPU 使用率下降与 Young/Full GC 收集的时间相关联。

# asp.net-mvc - 如何在下拉列表更改时为文本框分配值

> ID：14893687
> 
> 赞同：0
> 
> 时间：2013-02-15T11:27:57.513
> 
> 标签：asp.net-mvc

我有一个下拉列表。下拉选择从数据库中获取值，在字符串值无法分配给文本框之后。

**我的控制器**

```
 [HttpPost]
        public ActionResult GetCountryBasedCharge(Int64 ID)
        {
            OrderBilling objOrderBilling = new OrderBilling();
            OrderBilling objCalculate = new OrderBilling();
            objCalculate = objOrderBilling.AutoCompleteState(ID);
            string chargeid =Convert.ToString(objCalculate.ShippingCharge);
            return Content(chargeid);
        } 
```

**我的观点**

```
@Html.DropDownList("Country", (IEnumerable<SelectListItem>)ViewBag.countrytitles, 
 "-----------Select----------"
 , new { id = "txtBCountry", @class = "selectStyle" })</td><td><label style="color:red" >*</label>
   <input type="text" class="textbox" id="txtChargeAmts" />

<script type="text/javascript" >

    $(document).ready(function () {
      var CountryID;
        $(function () {
            $("#txtBCountry").change(function () {
                CountryID = $("#txtBCountry option:selected").val();
                $.ajax({
                    type: "POST",
                    url: '../Billing/GetCountryBasedCharge',
                    data: { ID: CountryID },
                    success: function (data) {
                        if (data) {
                            alert(data);
       **$('#txtChargeAmts').html(data);**
                        }
                    }
                });
            });
        });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:34:41.010

我假设您的`data`参数正在获取一个值，如果是这种情况，您的问题是您试图将返回值作为 html 而不是作为输入文本中的值。

当您想为表单输入标签分配一个值时，您应该使用该`.val()`函数

阅读`.val()` [jquery 文档](http://api.jquery.com/val/)

尝试更改此行：

```
$('#txtChargeAmts').html(data); 
```

到

```
$('#txtChargeAmts').val(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:34:43.747

采用

```
$('#txtChargeAmts').val(data); 
```

代替

```
$('#txtChargeAmts').html(data); 
```

# java - 如何从sql数据库中获取唯一值

> ID：14893691
> 
> 赞同：0
> 
> 时间：2013-02-15T11:28:02.957
> 
> 标签：java, android, sql

以下代码给出了数据库中的所有值，甚至是重复值。

```
return database.query("contacts", new String[] {"_id", "name"}, 
     null, null, null, null, "name"); 
```

我怎样才能从上面的代码中得到不同的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:39:02.183

使用将布尔值作为第一个参数的[重载`query`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28boolean,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)`_id`并从选择中删除该列：

```
return database.query(true, "contacts", new String[] {"name"}, 
                      null, null, null, null, "name", null); 
```

该`_id`列应该是唯一的，因此将其包含在您的查询中将导致 distinct 无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:53:59.700

使用 distinct 关键字，这将从数据库返回唯一记录。

```
db.rawQuery("Select DISTINCT from table_name",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:46:05.747

使用这个查询：

```
public Cursor query (boolean distinct, String table, 
                 String[] columns, String selection, 
                 String[] selectionArgs, String groupBy, 
                 String having, String orderBy, String limit) 
```

将第一个参数设置为 true 并且不要在选择中使用你的主键。它永远是独一无二的……

# java - 选择休眠

> ID：14893694
> 
> 赞同：2
> 
> 时间：2013-02-15T11:28:04.607
> 
> 标签：java, hibernate

我不知道如何在没有查询的情况下在 Hibernate 中执行 SELECT * FROM。即我可以这样做：

```
Session session = ...;
JavaBean jb = ...;
...
session.save(jb); // I'm adding jb
session.update(jb); // I'm updating jb
session.delete(jb); // I'm deleting jb 
```

但我不知道如何从会话中选择。我知道的唯一方法是

```
list = session.createQuery("from JavaBean").list(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:40:57.023

要获取 JavaBean 的所有实例，请使用 Hibernate Criteria API：

```
Criteria criteria = session.createCriteria(JavaBean.class);
List javaBeans = criteria.list(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:32:10.320

```
Criteria crit=session.createCriteria(Class object of a pojo class)
EX:
Criteria crit=session.createCriteria(Employee.class)
List list=crit.list(); 
```

如果执行上述条件，则它会从数据库加载所有员工，即 Employee pojo 类的所有对象

在内部，hibernate 将 Employee 的每一行存储在一个对象 Employee 类中，所有 Employee 类对象存储在一个列表中，最后 hibernate 将该列表对象返回给我们的 java 应用程序

在迭代集合（列表）时，我们需要将每个对象类型转换为 pojo 类类型。

```
 Iterator it=list.iterator();
while(it.hasNext())
 {
  Employee e=(Employee)it.next();
 ..............
 ..............

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:39:11.537

我的问题的答案是：

```
List selectAll(Class clazz) {
    return session.createCriteria(clazz).list();
} 
```

看更多：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

感谢 overmeulen

# android - 如何将日期选择器文本框日期限制为未来日期。它应该只允许以前的日期

> ID：14893703
> 
> 赞同：1
> 
> 时间：2013-02-15T11:28:40.517
> 
> 标签：android, validation, datepicker

我想限制日期选择器将日期设置为高于系统当前日期。告诉我如何验证 datepicker 日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:51:58.527

```
Create Custom Dialog an show toat on date greater then current date

final Dialog dialog = new Dialog(SettingActivity.this);
                dialog.setContentView(R.layout.date_picker_view);
                dialog.setTitle("Select Date");
                final TextView tvTime = (TextView) dialog
                        .findViewById(R.id.tv_time);
                final DatePicker datePicker = (DatePicker) dialog
                        .findViewById`enter code here`(R.id.datePicker1);
                Button set = (Button) dialog.findViewById(R.id.button_time_set);
                Button cancel = (Button) dialog
                        .findViewById(R.id.button_time_cancel);

                datePicker
                        .setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);

                Calendar  originalDate=Calendar.getInstance();
                 Calendar previousWeekDay = (Calendar) originalDate.clone();
                  previousWeekDay.add(Calendar.YEAR, -35);
                  previousWeekDay.set(Calendar.MONTH, 0);
                  previousWeekDay.set(Calendar.DAY_OF_MONTH, 1);

                  datePicker.init(previousWeekDay.get(Calendar.YEAR), previousWeekDay.get(Calendar.MONTH), previousWeekDay.get(Calendar.DAY_OF_MONTH), null);

                final Calendar calendar = Calendar.getInstance();
                final int mDay = calendar
                        .get(Calendar.DAY_OF_MONTH)+1;

                calendar.set(Calendar.DAY_OF_MONTH, mDay);

                set.setOnClickListener(new OnClickListener() {

                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub

                      Calendar cal=Calendar.getInstance();
                      cal.set(datePicker.getYear(), datePicker.getMonth(), datePicker.getDayOfMonth());

                      if(cal.after(calendar)){
                        Toast.makeText(SettingActivity.this, "DOB not more then current date", Toast.LENGTH_SHORT).show();
                          handler.etDOB.setText("");
                      }else{
                             date_selected = String.valueOf(datePicker.getDayOfMonth())+"/"+String.valueOf(datePicker.getMonth()+1)+"/"+String.valueOf(datePicker.getYear());

                          handler.etDOB.setText(datePicker.getDayOfMonth()+"-"+AccessRecordForPDF.MONTHS[datePicker.getMonth()+1]+"-"+String.valueOf(datePicker.getYear()));
                          dialog.dismiss();
                      }

                    }
                });
                cancel.setOnClickListener(new OnClickListener() {

                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub
                        dialog.dismiss();
                    }
                });

                dialog.show();

            }
        });

And create dialog.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="270dp"
    android:layout_height="190dp"
    android:background="@android:color/black"
    android:orientation="vertical" >

    <DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <!--
         <com.amvrin.PillsScheduler.DrumPicker.DateDrumPicker
        android:id="@+id/datepicker"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    -->

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button_time_set"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/button_green"
            android:text="Set"
            android:textColor="@android:color/white" />

        <Button
            android:id="@+id/button_time_cancel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/button_green"
            android:text="Cancel"
            android:textColor="@android:color/white" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T05:54:12.557

```
package com.example.pickerdate;

import java.util.Calendar;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.DatePicker.OnDateChangedListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    private TextView mDateDisplay;
    private int mYear;
    private int year1;
    private int mMonth;
    private int mDay;
    private int month;
    private int day;
    static final int DATE_DIALOG_ID = 1;
    Button pickDate;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
        pickDate = (Button) findViewById(R.id.pickDate);
        pickDate.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                System.out.println("hello3");
                showDialog(DATE_DIALOG_ID);

            }
        });

        System.out.println("hello1");
        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);
        updateDisplay();
        year1 = mYear;
        month = mMonth;
        day = mDay;
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        DatePickerDialog _date = null;
        switch (id) {

        case DATE_DIALOG_ID:
            _date = new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                    mDay) {
                @Override
                public void onDateChanged(DatePicker view, int year,
                        int monthOfYear, int dayOfMonth) {
                    System.out.println("----------onDateChanged()-----------"
                            + mYear + "--" + year);
                    System.out.println("----------onDateChanged()-----------"
                            + mMonth + "--" + monthOfYear);
                    System.out.println("----------onDateChanged()-----------"
                            + mDay + "--" + dayOfMonth);

                    /*
                     * These lines of commented code used for only setting the
                     * maximum date on Date Picker..
                     * 
                     * if (year > mYear && year) view.updateDate(mYear, mMonth,
                     * mDay);
                     * 
                     * if (monthOfYear > mMonth && year == mYear )
                     * view.updateDate(mYear, mMonth, mDay);
                     * 
                     * if (dayOfMonth > mDay && year == mYear && monthOfYear ==
                     * mMonth) view.updateDate(mYear, mMonth, mDay);
                     */

                    // these below lines of code used for setting the maximum as
                    // well as minimum dates on Date Picker Dialog..

                    if ((mYear > year)
                            || ((mMonth > monthOfYear) && (mYear == year))
                            || ((mDay > dayOfMonth) && (mYear == year) && (mMonth == monthOfYear))) {
                        view.updateDate(year1, month, day);

                    }

                }
            };

        }
        System.out.println("hello5");
        return _date;
    }

    protected void onPrepareDialog(int id, Dialog dialog) {
        switch (id) {

        case DATE_DIALOG_ID:
            System.out.println("hello6");

            ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
            break;
        }
    }

    private void updateDisplay() {
        System.out.println("hello2");
        mDateDisplay.setText(new StringBuilder()
                // Month is 0 based so add 1
                .append(mMonth + 1).append("-").append(mDay).append("-")
                .append(mYear).append(" "));
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            System.out.println("hello7");

            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            System.out.println("year=" + year);
            System.out.println("month=" + monthOfYear);
            System.out.println("day=" + dayOfMonth);
            updateDisplay();
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T06:08:55.370

由于 API 级别 11，因此有一种方法：

1.DatePicker.setMaxDate(long maxDate)

2.如果它必须在以前的版本中工作，请使用此方法：

公共无效初始化（int year，int monthOfYear，int dayOfMonth，DatePicker.OnDateChangedListener onDateChangedListener）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T11:21:56.987

```
public Dialog oncreateDialogue(int id)
{
    Calendar currentDate= Calendar.getInstance();
    final int cyear = currentDate.get(Calendar.YEAR);
    final int cmonth = currentDate.get(Calendar.MONTH);
    final int cday = currentDate.get(Calendar.DAY_OF_MONTH);

    // Log.d("", "cyear"+cyear + cmonth + cday);

    DatePickerDialog dialog = null;
    /* if ( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB )
    {
       dialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener()
        {
            @Override
            public void onDateSet(DatePicker view, int selectedYear, int selectedMonth, int selectedDate)
            {
               // mTextView.setText(selectedDate + "/" + selectedMonth + 1 + "/" + selectedYear);
                Log.d("", "ondateset"+selectedDate + "/" + selectedMonth + "/" + selectedYear);

            }

        }, cyear, cmonth, cday);
       // Calendar currentDate = Calendar.getInstance();
        dialog.getDatePicker()

        //If you need you can set min date too
    }
    else
    {*/
    dialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener()
    {
        @Override
        public void onDateSet(DatePicker view, int selectedYear, int selectedMonth, int selectedDate)
        {
            int lmn=selectedMonth+1;
            sp_dobFlag=true;
            selectedDatepublic=selectedDate + "/"+lmn  + "/"+selectedYear ;
            ed_dob.setText(selectedDatepublic);
            //Log.d("", "ondateset"+selectmnth);
        }
    }, cyear, cmonth , cday)
    {

        @Override
        public void onDateChanged(DatePicker view, int year, int month, int day)
        {
            Log.d("", "not>--ondatechange"+cday);
            Log.d("", "not>--ondatechange"+day);

            if (year > cyear) 
            {

                Log.d("", "date >cdate");
                view.updateDate(cyear, cmonth, cday); //update the date picker to selected date
            }

            if(year==cyear)
            {
                if(month > cmonth)
                {
                    view.updateDate(cyear, cmonth, cday);
                }
            }

            if(year==cyear)
            {
                if(month == cmonth)
                {
                    if(day > cday)
                    {
                        view.updateDate(cyear, cmonth, cday);
                    }

                }
            }

        }
    };
    // }
    return dialog;

} 
```

# responsive-design - 如何使用 Zurb Foundation 更改布局中的元素位置

> ID：14893704
> 
> 赞同：0
> 
> 时间：2013-02-15T11:28:40.980
> 
> 标签：responsive-design, zurb-foundation

我正在使用 Zurb Foundation 为 Web 创建布局，但在重新调整浏览器大小时遇到​​了问题。

这是我的布局

```
<div class="row">
    <div class="eight columns">
        <div class="row">
            <div class="twelve columns">
                Company image
            </div>
        </div>
        <div class="row">
            <div class="four columns">
                content1
            </div>
            <div class="four columns">
                content2
            </div>
            <div class="four columns">
                content3
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                content4
            </div>
        </div>
    </div>
    <div class="four columns">
        <div class="row">
            <div class="twelve columns">
                Login
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
    </div>
</div> 
```

当对于平板电脑/手机等页面仅显示一列时，它按以下顺序显示 div：

1.  公司形象
2.  内容1
3.  内容2
4.  内容3
5.  内容4
6.  登录
7.  ...

我想要公司图片下方的登录名，如下所示：

1.  公司形象
2.  登录
3.  内容1
4.  内容2
5.  ……

我怎样才能得到这种行为？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:21:14.557

通过添加行重新设计您的布局，并将仅公司图像放入该行并在两列中登录。之后粘贴您以前的代码。

```
<div class="row">
<div class="twelve columns">
    <div class="row">
        <div class="eight columns">
                <div class="row">
                    <div class="twelve columns">
                        Company image
                    </div>
                </div>
        </div>
        <div class="four columns">
                <div class="row">
                    <div class="twelve columns">
                        Login
                    </div>
                </div>

        </div> 
    </div>
    <div class="eight columns">
        <div class="row">
            <div class="four columns">
                content1
            </div>
            <div class="four columns">
                content2
            </div>
            <div class="four columns">
                content3
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                content4
            </div>
        </div>
    </div>
    <div class="four columns">
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:55:34.323

所以在这种情况下，使用[Mobile Grid](http://foundation.zurb.com/docs/grid.php#mobileEx)链接来管理移动布局。通过这种方式进行修改（我设置了背景颜色以使此示例更清晰）。

否则，您可以使用“show-for-small”和“hide-for-small”样式并设置两个不同的视图（对于固定大小的移动设备，但内容将是多余的。

```
<div class="row">
<div class="twelve columns">
    <div class="row">
        <div class="eight columns " style="background-color:red">
                <div class="row">
                    <div class="twelve columns">
                        Company image
                    </div>
                </div>
        </div>
        <div class="four columns" style="background-color:blue">
                <div class="row">
                <div class="mobile-one"></div>
                    <div class="twelve columns mobile-three" style="background-color:gray">
                        Login
                    </div>
                </div>

        </div> 
    </div>
    <div class="row">
    <div class="eight columns" style="background-color:red">
        <div class="row">
            <div class="four columns">
                content1
            </div>
            <div class="four columns">
                content2
            </div>
            <div class="four columns">
                content3
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                content4
            </div>
        </div>
    </div>
    <div class="four columns" style="background-color:blue">
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
    </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:03:44.453

我能够通过这个实现它，我后来看到了你的答案，我认为它是一样的：

```
<div class="container">
<div class="row">
    <div class="eight columns">
        <div class="row">
            <div class="twelve columns">
                Company Image
            </div>    
        </div>
        <div class="row hide-for-small">
            <div class="four columns">
                Content1
            </div>
            <div class="four columns">
                Content2
            </div>
            <div class="four columns">
                Content3
            </div>
        </div>
        <div class="row hide-for-small">
            <div class="twelve columns">
                Content4
            </div>
        </div>
    </div>
    <div class="four columns">
        <div class="row pull-four">
            <div class="twelve columns">
                @Html.Partial("_Login")
            </div>
        </div>
        <div class="row show-for-small">
            <div class="four columns">
                Content1
            </div>
            <div class="four columns">
                Content2
            </div>
            <div class="four columns">
                Content3
            </div>
        </div>
        <br />
        <div class="row show-for-small">
            <div class="twelve columns">
                Content4
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                ...
            </div>
        </div>
    </div>
</div> 
```

可能不是最优雅的解决方案，但效果很好！

你最后一句话是什么意思？

# ruby-on-rails - 在 Ruby on Rails 项目中的 Aptana Studio3 中逐行调试 ruby 代码

> ID：14893710
> 
> 赞同：1
> 
> 时间：2013-02-15T11:29:09.100
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用 Rails 3.0.12 和 ruby​​ 1.9 ，Aptana Studio 3。我刚开始在 Rails 上学习 ruby​​，我从开源获得了一个示例项目，我想调试并查看编译流程。我没有得到如何逐行调试rails应用程序以及调试时如何查看值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:39:42.703

首先转到项目目录并使用以下命令安装包。
`bundle install`
然后使用以下命令创建数据库。
`rake db:create`
然后迁移数据库。
`rake db:migrate`
最后使用以下命令启动 rails 服务器。
`rails s`如果您的 rails 版本是`>3.x`或用于 rails 版本`2.x`使用`ruby script/server`，最后在浏览器上运行您的`localhost:3000`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T10:55:42.287

关于如何调试有几个选项。

两者都需要将**ruby​​-debug-ide** gem 安装到您的 gemset 中。

## 第一种方法（无测试，无迁移）

打开“应用程序资源管理器”视图，在组合框中选择您的项目，然后找到小齿轮图标。如果您单击那个小齿轮图标，则会有一个“调试服务器”选项。这将允许您仅测试您的应用程序的代码（没有测试和迁移）

## 第二种方法（调试任何东西）

为调试 ruby​​ 项目设置调试配置，如下所示：

1.  打开“*调试配置*”对话框（通过在快速访问文本字段中搜索“调试配置”）
2.  *在“ Ruby Application* ”下创建调试配置
3.  在*Main*选项卡上输入要运行的脚本的路径，具体取决于您要执行的操作

    3.1。如果您只想**运行您的应用程序**，请输入*rails*脚本的路径，但我从未尝试过

    3.2\. 如果要**运行迁移**，请输入*rake*脚本的路径，例如

    ```
    /home/username/.rvm/gems/ruby-1.9.3-p551@rails3221/bin/rake 
    ```

    3.3\. 如果要**运行测试**，请输入*rake_test_loader*脚本的路径，例如

    ```
    /home/username/.rvm/gems/ruby-1.9.3-p551@rails3221/gems/rake-10.4.2/lib/rake/rake_test_loader.rb 
    ```

4.  在*Arguments*选项卡上，将“*工作目录*”设置到您的应用程序主目录，然后根据您要执行的操作输入运行参数

    4.1。如果您只想**运行您的应用程序**，请将*Program Arguments*设置为`start`（我猜）

    4.2\. 如果要**运行迁移**，请将*Program Arguments*设置为所需的 rake 任务，例如`redmine:plugins:migrate`

    4.3\. 如果要**运行测试**，请设置相应的参数。就我而言，为了调试集成测试，我使用了下一个配置：

    *解释器参数*：

    ```
    -I"lib:test" -I"/home/username/.rvm/gems/ruby-1.9.3-p551@rails2661/gems/rake-10.4.2/lib" 
    ```

    *程序参数*：

    ```
    "test/integration/**/*_test.rb" 
    ```

# ruby - 为什么Ruby中的内联字符串块命名为“eos”？

> ID：14893722
> 
> 赞同：31
> 
> 时间：2013-02-15T11:29:36.117
> 
> 标签：ruby, syntax

为什么Ruby中的内联字符串块命名为“eos”？

**更新**

感谢您指出正确的方式。我一直认为“eos”是保留字，但似乎可以使用任何字：

```
a = <<MYSTRING
line 1
line 2
mystring #the thing is case sensitive
line3
MYSTRING
#The actual end of the string 
```

我还发现这个结构被命名为[Heredoc](http://en.wikipedia.org/wiki/Here_document)

这告诉我，即使是最愚蠢的问题也可以成为学习的机会。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-15T11:56:40.080

EOS 表示字符串结束。它显示在字符串的末尾。

例如，EOS 不仅仅意味着 GFJKDHAGJHFGDJ。

但是您也可以使用其他名称。

# sql-server-2008 - 转换日期用户定义的函数不起作用

> ID：14893723
> 
> 赞同：0
> 
> 时间：2013-02-15T11:29:35.727
> 
> 标签：sql-server-2008, case, user-defined-functions, date-conversion

您好我正在尝试在 SQL Server 2008 中创建一个用户定义的函数，以将日期从一种格式转换为另一种格式。

我使用的日期缺少世纪，即 1610101 是 1961/01/01，而 213/02/15 实际上是 2013/02/15。

我已经在这几个网站上搜索了一个很好的解决方案，但我看不出它有什么问题。

```
create function Convert_Date(@Cdate Date)
returns Date
as
Begin
declare @return date
select @return = case @Cdate
when (LEFT(@Cdate,1) = 1) then convert(date,('19'+ CONVERT(VARCHAR(30), right(@Cdate,6))))
when (LEFT(@Cdate,1) = 2) then convert(date,('20'+ CONVERT(VARCHAR(30), right(@Cdate,6))))
return @return
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:44:18.313

你想要这样的东西：

```
CREATE FUNCTION Convert_Date(@Cdate DATE)
RETURNS DATE
AS
BEGIN

    DECLARE @return DATE

    SELECT @return = 
    (
        CASE LEFT(@Cdate,1) 
            WHEN '1' THEN CONVERT(DATE, ('19'+ CONVERT(VARCHAR(30), RIGHT(@Cdate,6)))) 
            WHEN '2' THEN CONVERT(DATE, ('20'+ CONVERT(VARCHAR(30), RIGHT(@Cdate,6))))
        END
    )

    RETURN @return
END 
```

*您的when*语句应该是您的结果与*case*匹配的时间。

# java - 使用 OpenNI 记录和读取 oni 文件时出现问题。

> ID：14893724
> 
> 赞同：1
> 
> 时间：2013-02-15T11:29:39.547
> 
> 标签：java, kinect, openni

我试图将 Kinect 传感器的深度数据记录到文件中，然后使用 openNi 播放。我根据 openNi 的示例编写了一个简单的程序。我正在使用 java 包装器。

问题是，当我尝试读取正在录制的 .oni 文件时，出现以下错误：

```
org.OpenNI.StatusException: The file is corrupted! 
```

这是我的录制代码：

```
Context context = new Context();
// add the NITE License 
License license = new License("PrimeSense", "0KOIk2JeIBYClPWVnMoRKn5cdY4=");   //     vendor, key
context.addLicense(license); 

DepthGenerator depth = DepthGenerator.create(context);

Recorder recorder = Recorder.create(context, "oni"); 
context.createProductionTree(recorder.getInfo());
recorder.setDestination(RecordMedium.FILE, "KinectLog.oni");

recorder.addNodeToRecording(depth);

context.startGeneratingAll();

int tmp = 0;
while(tmp < 100){
    tmp++;
    context.waitAnyUpdateAll();
    recorder.Record();
    System.out.println("recording");
} 
```

也许我必须通过调用一些 .release() 方法在录制后进行清理？Recorder 没有这样的方法。

这是我播放 .oni 文件的代码：

```
Context context = new Context();
// add the NITE License 
License license = new License("PrimeSense", "0KOIk2JeIBYClPWVnMoRKn5cdY4=");   // vendor, key
context.addLicense(license); 

context.openFileRecordingEx("KinectLog.oni"); 
```

抛出 StatusException 的是 openFileRecordingEx。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:57:56.230

我想到了。我重写了一些代码并在录制结束时添加了 recorder.dispose() 以释放录制器对象。

```
 public static void main(String[] args) {

    try {

        Context context = new Context();
        // add the NITE License 
        License license = new License("PrimeSense", "0KOIk2JeIBYClPWVnMoRKn5cdY4=");   // vendor, key
        context.addLicense(license); 

        DepthGenerator depth = DepthGenerator.create(context);

        Recorder recorder = Recorder.create(context, "oni"); 

        recorder.setDestination(RecordMedium.FILE, "KinectLog.oni");

        recorder.addNodeToRecording(depth);

        context.startGeneratingAll();

        int tmp = 0;
        while(tmp < 100){
            tmp++;
            context.waitAnyUpdateAll();
            recorder.Record();
            System.out.println("recording");
        }
        recorder.dispose();         

        }
        catch (GeneralException e) {
          System.out.println(e);
          System.exit(1);
        }

} 
```

# extjs - 如何在 extjs 中创建两个面板视图

> ID：14893734
> 
> 赞同：0
> 
> 时间：2013-02-15T11:29:56.177
> 
> 标签：extjs, view, panel

我在 extjs 工作。我想创建一个带有两个面板的视图，以在点击事件上显示不同的内容。那么如何在 extjs 中创建这样的视图呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:59:05.510

选项卡面板是一个视图，您可以在其中创建多个面板：

```
Ext.create('Ext.tab.Panel', {
    width: 400,
    height: 400,
    renderTo: document.body,
    items: [{
        title: 'First Panel'
    }, {
        title: 'Second Panel'
    }]
}); 
```

# zend-framework2 - 对数据库 pdo 结果集进行两次迭代，在 zend 框架 2 中引发异常

> ID：14893736
> 
> 赞同：1
> 
> 时间：2013-02-15T11:29:59.813
> 
> 标签：zend-framework2

入`Zend\Db\Adapter\Exception\RuntimeException`档

```
\library\Zend\Db\Adapter\Driver\Pdo\Result.php:159 
```

我的数据库设置代码是

```
array(
  'db' => array(
        'driver'         => 'Pdo',
        'pdodriver'      => 'mysql',            
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\'',
            'buffer_results' => true
        ),
        'username'       => 'root',
        'password'       => '',
        'host'           => 'localhost',
        'dbname'         => 'db_name',
  ),
) 
```

结果获取代码是

```
$statement  = $this->sql->prepareStatementForSqlObject($select);
$results    = $statement->execute(); 
```

我试过`$results->buffer();`&& `$results->rewind()`

我的迭代代码就像

```
foreach ( $results as $result ){    
       // code goes here ..
}
....

foreach ( $results as $result ){    
       // code goes here ..
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T12:14:13.910

这是因为 PDO 结果集是 Forward Only （所以你不能倒带它）。

您可以尝试用 ResultSet 包装它：

```
$results    = $statement->execute(); // generate your results

$resultSet = new ResultSet; // Zend\Db\ResultSet
$resultSet->initialize($results);

// You should now be able to iterate over this multiple times..
foreach($resultSet as $row) {
    // .. 
}

// You can now buffer if you need..
$resultSet->buffer();
// Or get an array of all items
$arrayOfResults = $resultSet->toArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T12:15:46.780

您看到的异常说：

> 这个结果是只向前的结果集，不支持向前移动后调用rewind()

因此，简单的解决方案是将结果存储在一个数组中，然后您可以多次迭代该数组。

```
$records = array();

foreach ($results as $result)
{
    $records[] = $result;
} 
```

# c - C程序将错误的输出打印到文件

> ID：14893738
> 
> 赞同：0
> 
> 时间：2013-02-15T11:30:01.507
> 
> 标签：c, network-programming, libpcap

我是 C 语言的新手，我正在尝试为以太网网络编写空闲端口监视器应用程序，该应用程序按协议测量广播流量并生成文本文件报告，但是它打印到文件的输出与预计例如在代码的第 174 行，如下所示，它打印出预期值 arp1_source

```
arp1_source = source;
fprintf(stdout,"arp1->source is %s\n",arp1_source); 
```

但是当它在第 1365 行打印出相同变量的内容时，它会打印出不同的 mac 地址

```
fprintf(stdout ,"       %s          %d.%d.%d.%d      %d   %d\n",
  arp1_source,
  arp1_ip_source[0],
  arp1_ip_source[1],
  arp1_ip_source[2],
  arp1_ip_source[3],
  arp1_total,
  arp1); 
```

我不知道为什么会这样，我不知道我做错了什么请帮忙，我的代码在下面（虽然它很长，如果需要我可以发送完整的代码）谢谢。

我已经定义了变量，但是当我执行数据包的实时捕获时，在第一行打印出来的 arp1_source 中的值与捕获完成后写入文本文件中的值不同，即第一行它可能打印出

> “arp1 源是 0e:32:64:89:20:5e”

并且当要将存储在 arp1_source 中的mac地址打印到文本文件中时，如第二个代码所示，它会打印出错误的mac地址，好像原来的mac地址被另一个覆盖了，我声明了要存储的char字符串带有 const 关键字的 mac 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:58:16.857

`seems like original mac address is overwritten by another one`- 是的，这听起来就像正在发生的事情。

目前这个问题的写法，没有办法回答。您想知道为什么在第 174 行会得到预期的结果，但是在第 1365 行，字符串发生了变化……知道最好看一下这 1191 行代码。正如你所说，这很长，所以这里有一些想法：

*   搜索代码中`arp1_source`设置的每个位置*或*从中设置另一个变量的位置（特别是您是否有任何双指针获取`arp1_source`的地址？）

*   你有没有将它的地址传递给一个函数？这是改变它的主要地方

*   获取调试器并单步执行您的代码。你知道某个地方的值会发生变化，你只需要弄清楚在哪里。

*   最坏的情况，你总是可以对它进行二分搜索。在第 769 行附近的某处打印 的值`arp1_source`，这是您所期望的吗？如果是：打印大约 1066 的值；如果否：打印第 471 行附近的值，继续进行，直到您准确了解更改值的位置

# c# - 我的模型总是空的，为什么？ASP.Net MVC

> ID：14893744
> 
> 赞同：0
> 
> 时间：2013-02-15T11:30:22.523
> 
> 标签：c#, asp.net-mvc

这是我的模型：

```
 public class Stages
  {
      public int Id { get; set; }
      public string Code { get; set; }
      public string Name { get; set; }
      public string Des { get; set; }
      public string View_Count { get; set; }
  } 
```

我的控制器：

```
 public ActionResult ViewStages()
    {
        return View();
    } 
```

我的观点：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" 

Inherits="System.Web.Mvc.ViewPage<IEnumerable<Project.Models.Stages>>" %>

//Some Code...

<% foreach (var item in Model)
       { %>
    <tr>
        <td>
            <%: Html.DisplayFor(modelItem => item.Code)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Name)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Des)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.View_Count)%>
        </td>
        <td>
            <%: Html.ActionLink("Edit", "Edit", new { id = item.Id })%> |
            <%: Html.ActionLink("Details", "Details", new { id = item.Id })%> |
            <%: Html.ActionLink("Delete", "Delete", new { id = item.Id })%>
        </td>
    </tr>
<% }%>

</table>

</asp:Content> 
```

而且我总是得到这个错误：对象引用未设置为对象的实例。并且在到达 foreach 循环时发生错误。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:31:12.067

因为你没有初始化它

```
 public ActionResult ViewStages()
   {
        //this initialize your model
        var viewModel=new List<Stages>()       
                          {
                              new Stages()
                                  {
                                      Id = 1,
                                      Code = "any code",
                                      //etc
                                  }
                          }; 
        return View(viewModel);   //you have to pass the model to the view
     } 
```

# java - 从代码监控内存使用情况

> ID：14893750
> 
> 赞同：0
> 
> 时间：2013-02-15T11:30:31.140
> 
> 标签：java, jakarta-ee, memory-management, profiling, heap-memory

我们正在开发一种基于 Java 的产品，该产品由我们的客户在生产中部署。要求当 Java 堆内存达到特定阈值时，我们应该在日志文件中转储一行。由于产品在生产中部署在客户现场，我们不能使用任何外部工具或配置文件。唯一的选择是从代码中以编程方式进行。我正在考虑实现一个线程，该线程将在间隔内休眠并调用 Runtime.getRuntime().freeMemory() 并根据输出写入日志。但是，我想知道是否有任何其他更好的方法/更好的 API 可以用于此目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:36:23.340

我会用[`MemoryMXBean`](http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html)自己。它甚至可以提供您描述的那种通知（超出堆阈值）。此***示例***代码直接来自 Javadoc：

```
class MyListener implements javax.management.NotificationListener {
    public void handleNotification(Notification notif, Object handback) {
        // handle notification
        ....
    }
}

MemoryMXBean mbean = ManagementFactory.getMemoryMXBean();
NotificationEmitter emitter = (NotificationEmitter) mbean;
MyListener listener = new MyListener();
emitter.addNotificationListener(listener, null, null); 
```

# jsf - 如何从 p:blockUI 触发器引用 p:dataTable 中的 p:commandLink？

> ID：14893751
> 
> 赞同：7
> 
> 时间：2013-02-15T11:30:39.920
> 
> 标签：jsf, jsf-2, primefaces, blockui

这对我不起作用：

```
<h:form id="wfMgtForm"> 
    .
    .
    .
    <p:dataTable id="wfTable" ..." var="item">
        <p:column>
        .
        .
        .
        </p:column>
        <p:column>
            <p:commandLink id="editWatchfolderButtonId" oncomplete="dlgEditWF.show()" update=":editWFForm" process="@none">
                <f:param value="#{item.value.ID}" name="editId"/>
                <h:graphicImage alt="Edit Image" style="border: none" value="./images/edit.png" />
            </p:commandLink>
        </p:column>
    .
    .
    .
    <p:blockUI block=":wfMgtForm" trigger="editWatchfolderButtonId">
        Loading...<br/>
        <p:graphicImage alt="Loader Image" value="/images/loader.gif"/>
    </p:blockUI>
</h:form> 
```

我得到的错误是：

`Cannot find component with identifier "editWatchfolderButtonId"`.

当我使用 Firebug 查找 ID 时，我发现每一行都有不同的 ID：

`wfMgtForm:wfTable:0:editWatchfolderButtonId` `wfMgtForm:wfTable:1:editWatchfolderButtonId` `wfMgtForm:wfTable:2:editWatchfolderButtonId` `wfMgtForm:wfTable:3:editWatchfolderButtonId`
等等

我应该如何从我的 ? 中引用这个自动创建的 ID `<p:blockUI>`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T14:05:43.160

`<p:dataTable>`也是`NamingContainer`一个。包括它的 ID。

```
<p:blockUI ... trigger="wfTable:editWatchfolderButtonId"> 
```

行索引仅存在于客户端，而不存在于服务器端，因此不相关。

* * *

**更新**：刚刚在本地测试，它确实修复了异常，但它根本没有触发块 UI（PrimeFaces 3.5）。看起来像 PrimeFaces 中的一个错误。

同时，您最好的选择是按照 Aksel 的建议手动触发它，但有些不同：

```
<p:commandLink ... onclick="bui.show()" oncomplete="bui.hide()">
...
<p:blockUI widgetVar="bui" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T11:50:52.607

这是一个使用 commandLink 阻止某些东西的简单示例。[从这里](http://www.primefaces.org/showcase/ui/blockUI.jsf)修改了展示示例

```
<h:form>
    <p:commandButton value="blockMe" id="someId" />
    <br />
    <p:commandLink id="pnlBtn" value="Block" type="button"
        onclick="bui.show()" />
    <br />
    <p:commandLink id="pnlBtn2" value="Unblock" type="button"
        onclick="bui.hide()" />

    <p:blockUI block="someId" widgetVar="bui" />
</h:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T15:32:30.183

对于像我这样一无所知的人，如果 BlockUI 没有触发，请检查“触发器”目标是否启用了 Ajax。我花了将近一天的时间试图弄清楚为什么 BlockUI 没有触发，并发现我将其目标配置为 'ajax="false"'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-07T15:56:52.340

您可以使用 jquery 选择器。

```
<p:commandLink styleClass="mybutton-class">
<p:blockUI ... trigger="@(.mybutton-class)"> 
```

# c# - 使非托管 dll 对 .net 运行时可见

> ID：14893756
> 
> 赞同：0
> 
> 时间：2013-02-15T11:31:12.627
> 
> 标签：c#, .net

我有 asp.net mvc 网站。它使用的是在托管 C++ 上编写的 dll。该库依赖于其他非托管 dll。

我将非托管 dll 放置到某个文件夹中，并将此文件夹添加到环境变量中的 PATH 变量中。但我想，这是错误的方式:)

什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:51:28.033

windows查找dll的顺序如下；

1.  与调用程序集相同的文件夹
2.  系统 32
3.  SYSTEM Path 变量中指定的位置

请注意路径的系统部分。如果您在比 XP 更新的 Windows 版本上运行，那么在控制台窗口中设置 Path 变量将不会设置系统路径。系统路径必须通过环境变量对话框设置。要查看此内容，请单击开始，右键单击我的电脑，单击属性（如果是 W7，现在单击高级设置）。您现在应该打开“系统属性”对话框。转到“高级”选项卡，单击右侧的“环境变量”按钮。在系统变量中，向下滚动直到找到路径，然后单击编辑按钮。完成后，单击确定。

# delphi - 以其他形式使用声明的公共变量时的编译器错误

> ID：14893758
> 
> 赞同：1
> 
> 时间：2013-02-15T11:31:17.267
> 
> 标签：delphi, variables, public, delphi-xe3

我之前声明了许多公共变量，但在 Delphi-XE3 中是第一个。

我声明 public var 好，但不能在其他形式上使用它，但我不知道为什么？

我的主要联合代码：

```
unit uMian;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ComCtrls;

type
  TForm1 = class(TForm)
    btnLoad: TButton;
    btnShow: TButton;
    btnEaxit: TButton;
    lvStudent: TListView;
    btnAdd: TButton;
    procedure btnEaxitClick(Sender: TObject);
    procedure btnLoadClick(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure btnAddClick(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations } 
  var
    IsOpen : Boolean ;

  public
    { Public declarations }
    var
      myvar : Integer ;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses uAdd;

function AppDir () : string ;
begin
  Result := ExtractFilePath(Application.ExeName);
end;

procedure TForm1.btnAddClick(Sender: TObject);
begin
  if IsOpen then
  frmAdd.ShowModal ;
end;

procedure TForm1.btnEaxitClick(Sender: TObject);
begin
  close;
end;

procedure TForm1.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  if IsOpen then
  //CloseFile(DataFile);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  IsOpen := False ;
end;

....

end. 
```

这是很好的工作，没有问题。

但是当我在其他表单 FrmAdd 上使用时，我遇到了问题：

```
unit uAdd;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons,
  Vcl.Samples.Spin, Vcl.ExtCtrls;

type
  TfrmAdd = class(TForm)
    lbledtName: TLabeledEdit;
    lbledtAvg: TLabeledEdit;
    seAge: TSpinEdit;
    lbleId: TLabeledEdit;
    btnCansek: TBitBtn;
    btnAdd: TBitBtn;
    procedure btnAddClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmAdd: TfrmAdd;

implementation

{$R *.dfm}

uses uMian;

procedure TfrmAdd.btnAddClick(Sender: TObject);

begin
  // problem in below 
  ShowMessage(IntToStr(TForm1.myvar)) ;
end;

end. 
```

编译器错误：[dcc32 Error] uAdd.pas(problem line): E2096 Method identifier expected

注意：Cnpack`myvar`在变量列表中显示我，但 Rad Studio Auto-Complete 没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T11:34:11.933

`myvar`是对象的公共变量，即类的*实例*`TForm1`。因此，您需要指定您*所指*的实例。但是当你写的时候`TForm1.myvar`，你不指定任何实例，只指定类。

这就像知道每个人都有一种被称为“性”的属性，然后你问，“人类的性别是什么？”。【*哪个*人类？】

解决方案是改写`someform.myvar`， where`someform`是 a 的实例`TForm1`。例如，`Form1.myvar`, 很可能是您想要的。请注意，您`var Form1: TForm1`在`uMain`. 这是声明表单变量的行：您有一个指向类对象的变量`TForm1`。

所以，相反，你问，“你的朋友史密斯的性别是什么？”

# javascript - asp.net中控件的可见性？使用 javascript？

> ID：14893759
> 
> 赞同：1
> 
> 时间：2013-02-15T11:31:18.923
> 
> 标签：javascript

在asp dot net中，我将一个按钮的可见性设为假，当用户在文本框中输入任何文本时，该按钮的可见性为真。我试图做到这一点，但我在找不到对象的 java 脚本中遇到错误。以下是我的代码。

```
 <asp:TextBox ID ="txt" runat ="server" onkeyup="SetButtonStatus(event,'Button1')" ></asp:TextBox> 

<asp:Button ID="Button1" runat="server" style ="display :none;"     Text="Button" /> 
```

脚本：

```
 function SetButtonStatus(evt,btn)
  {
    var vs =document.getElementById("<%= txt.ClientID %>").value;
   if(vs.length >= 1 )
    {   
      if( document.getElementById(btn) == null )  
      {            
           document.getElementById(btn).style.display = "block" ;             

      }                 
    }
    else if(vs.length ==0) 
    {
      document.getElementById(btn).style.display="none";
    }
  } 
```

我得到的错误是：Microsoft JScript 运行时错误：需要对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:35:28.050

删除`Visible ="false"`然后尝试。

仅使用`style="display:none"`

### 编辑-1

更新您的代码这项工作正常： -

```
<script>
        function SetButtonStatus(evt) {
            var vs = document.getElementById("<%= txt.ClientID %>").value;
            if (vs.length >= 1) {
                if (document.getElementById("<%= Button1.ClientID %>") == null) {
                   //document.getElementById(btn).style.display = "block";
                }
                else {
                    document.getElementById("<%= Button1.ClientID %>").style.display = "block";
                }
            }
            else if (vs.length == 0) {
                document.getElementById("<%= Button1.ClientID %>").style.display = "none";
            }
        }
    </script>

 <asp:TextBox ID ="txt" runat ="server" onkeyup="SetButtonStatus(event)" ></asp:TextBox> 
    <asp:Button ID="Button1" runat="server" style="display:none;" Text="Button" /> 
```

# raphael - 从 Raphael 中的一个点旋转图像

> ID：14893760
> 
> 赞同：0
> 
> 时间：2013-02-15T11:31:20.507
> 
> 标签：raphael

我有一张想要从某个点旋转的图像。图像大小为 100 像素 x 100 像素。

我想在图像内的某个点附近旋转它。想想指南针。我想要旋转它的点就是针所在的位置。因此，在我的示例中，我想将图像从图像中的左上方 80px 处旋转 80px 点。这是可能的还是我必须创建某种 gif。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:13:17.700

这是一个例子 [http://jsfiddle.net/KtB3G/1/](http://jsfiddle.net/KtB3G/1/)

```
<div id="container"> 
    <img id="img" src="http://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Rectangle_example.svg/220px-Rectangle_example.svg.png"> 
</div> 

<script>
    $(function() {
        var src = $("#img").attr("src");
        $("#container").html("");
        var paper = Raphael($("#container")[0], 500, 500);

        var image = paper.image(src, 0, 0, 220, 130);

         $("#container").click(function() {
            image.animate({
                transform: "r360t50,50"
            }, 1000, ">");
        });
    });
</script> 
```

您可以使用**变换**来实现所需的结果[http://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)

编辑：为了使它工作，你必须使用 Raphael 2

# jquery - 如何在 jQuery 中使用 JSONP 随机回调？

> ID：14893761
> 
> 赞同：0
> 
> 时间：2013-02-15T11:31:21.873
> 
> 标签：jquery, ajax, callback, jsonp

我正在努力使用 jQuery 来处理 Ajax/JSONP 请求。

我正在使用两个不同的域，并且进行了几次模拟的 ajax 调用。因此，我需要依赖 jQuery 自动生成的回调随机名称。如果我添加了一个`jsonpCallback`设置，这段代码会起作用，但同时调用会是冲突的（[见这里](https://stackoverflow.com/questions/11499672/why-does-a-single-ajax-call-work-fine-but-consecutive-ajax-calls-fail)）。

按照[文档](http://api.jquery.com/jQuery.ajax/)，我最终得到以下代码：

```
var request = $.ajax({
        url: "http://www.myUrl.com/myScript.php?preventCache="+new Date(),
        data: {GETvariableName:"value"},
        contentType: "application/json",
        dataType:'jsonp'})
    .done(function(json) {
        console.dir(json.mydata);
        })
    .fail(function(e) {
        console.log(e.message);
        }); 
```

PHP 文件提供如下服务：

```
callback(
    {
        "mydata":
        [
        // my JSON content...
        ]
    }
); 
```

我收到此错误消息：

> 未捕获的 ReferenceError：未定义回调。

好的，我应该使用哪个函数名，因为它应该是自动生成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:42:23.950

php 不应定义`callback`使用发送的访问值`$_GET['callback']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:36:38.150

您应该使用查询参数 ?callback=function_name 作为服务器上的函数名称。jQuery 生成一个随机回调名称并自动将其映射到您的 .done 函数。

# c# - 解析 Oracle Text 搜索/查询中的保留字符？

> ID：14893762
> 
> 赞同：1
> 
> 时间：2013-02-15T11:31:23.663
> 
> 标签：c#, oracle-text

我正在设计一个网络应用程序，其中有一个搜索页面，可以进行全文搜索（我在我感兴趣的文本列上创建了一个 CONTEXT 索引）。使用[Oracle，您可以执行 CONTAINS 查询](http://docs.oracle.com/cd/E11882_01/text.112/e24436/cqspcl.htm)来运行全文搜索并返回结果 - 这很好，除非您输入保留字符，例如：

> “冰* AND 地方 AND 阿拉斯加”

您在“ice”之后放置“*”的事实会给您带来 Oracle 错误，即

```
ORA-29902: error in executing ODCIIndexStart() routine
ORA-20000: Oracle Text error: 
```

避免这种情况的最优雅的方法是什么——我知道你可以过滤掉保留字符和关键字——但我原以为会有更优雅的方法。如果你知道这样的事情，我真的很想知道:-)

* * *

注意：这是运行 Oracle 文本搜索的代码，没什么特别的：

```
 OracleCommand cmd = new OracleCommand("SELECT ref_id, title, table_name, description FROM v_all_media WHERE CONTAINS (title, :pTitle) > 0", conn);
 cmd.Parameters.Add("pTitle", title);
 OracleDataReader reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:12:49.473

> {}
> 
> 使用大括号转义一串字符或符号。一组大括号中的所有内容都被视为转义序列的一部分。
> 
> 当您使用大括号转义单个字符时，转义字符将成为查询中的单独标记。
> 
> \
> 
> 使用反斜杠字符转义单个字符或符号。只有反斜杠后面的字符被转义。

查看[查询中的特殊字符](http://docs.oracle.com/cd/B10500_01/text.920/a96518/cqspcl.htm#20741)

# .net - 如何使用 oracle .Net 提供程序调用 Oracle 函数？

> ID：14893763
> 
> 赞同：0
> 
> 时间：2013-02-15T11:31:24.330
> 
> 标签：.net, oracle, function, call, provider

当我在我的 .net mvc 项目中使用旧的 Oracle Dll 时，它可以工作：

```
 cmd.CommandText = "dba.user_login";
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.Parameters.Add("KUL", OracleType.VarChar).Value = userName;
   cmd.Parameters.Add("SIFRE", OracleType.VarChar).Value = pass;
   cmd.Parameters.Add("FLAG", OracleType.Float).Value = 1;
   cmd.Parameters.Add("HATA", OracleType.VarChar).Value = "error";
   cmd.Parameters.Add("result", OracleType.Float).Direction = ParameterDirection.ReturnValue; 
```

但是由于不推荐使用旧的 oracle dll，我想使用新的 oracle .net 提供程序。我试过这个：

```
 cmd.CommandText = "dba.user_login";
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.Parameters.Add("KUL", OracleDbType.Varchar2).Value = userName;
   cmd.Parameters.Add("SIFRE", OracleDbType.Varchar2).Value = pass;
   cmd.Parameters.Add("FLAG", OracleDbType.Single).Value = 1;
   cmd.Parameters.Add("HATA", OracleDbType.Varchar2).Value = "error";
   cmd.Parameters.Add("result", OracleDbType.Single).Direction = ParameterDirection.ReturnValue; 
```

但它不起作用。例外：ORA-06502：PL/SQL：数字或值错误：字符到数字的转换错误\nORA-06512：在第 1 行，谁能帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:11:32.007

太棒了，一个设计决定总是会在开始使用它时导致问题（偶尔也会出现！）

由于这回答了您的问题，因此我将“提升”我对答案的评论（如果这不正确，请告诉我，我将删除此答案）

请记住，ODP.net 默认按位置绑定（与默认 System.Data.Ora 不同）——您可以使用

```
BindByName = true 
```

强制命令对象表现相同

# php - mysql 注入和带有单选按钮的表单

> ID：14893764
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:31:26.663
> 
> 标签：php, radio-button, sql-injection

我最近问了一个关于仅包含单选按钮的表单的[**问题**](https://stackoverflow.com/questions/14886592/php-echo-is-not-working)。一位经验丰富的用户回答并告诉我，我对 SQL 注入持开放态度。有人可以解释一下吗？- 没有文本用户输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:34:10.003

用户可以轻松地编辑 HTML 或以其他方式更改提交的内容。仅仅因为它们是单选按钮并不意味着它们不能改变值；他们可以将它们设置为任何东西，包括可能导致注入的值。

通用浏览器工具使用户能够修改 HTTP 请求，因此有人可以轻松地将您的单选按钮值更改为任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:34:08.423

任何用户都可以使用 DOM 浏览器编辑这些字段，例如Firefox 中的[Firebug](http://getfirebug.com/)或 Chrome 中包含的浏览器。（检查元素选项）

没有用户输入，但用户仍然可以编辑 DOM 结构和包含。

但不仅仅是编辑它们。[如果您的站点对跨站点脚本攻击 (XSS)](http://phpmaster.com/php-security-cross-site-scripting-attacks-xss/)不安全，任何人都可以在自己的计算机或主机中创建一个表单，并使用自己的输入将其发送到您的站点`POST`。

[您可以在此站点](http://phpsec.org/projects/guide/)中阅读有关安全性和 PHP 的更多信息。

除了过滤输入之外，避免 SQL 注入的最佳方法是使用[PDO](http://php.net/manual/en/book.pdo.php)或准备好的语句对 DB 进行安全调用。

例如：

```
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value);

// insert one row
$name = 'one';
$value = 1;
$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:34:43.277

表单为人们提供**了一种**向您的 HTTP 端点提交数据的方法，但人们不需要使用它来提交数据。例如，他们可以创建自己的表单，或者手动构建 HTTP 请求。

您发送给客户的任何内容都无法阻止人们提交他们想要的任何内容。

端点需要对**任何**输入保持安全，因为您无法控制它将接收什么输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:34:33.673

恶意用户不需要您的表单来向您的服务器创建自己的 POST 请求。他们只需要知道您的服务器接受的表单密钥，然后他们就可以在那里创建自己的请求。

如果您允许将未转义的`$_POST/$_GET/$_REQUEST/$_COOKIE/(some $_SERVER)`值直接插入到您的查询中，那么您将受到影响。

为了安全起见，使用带有 PDO 或 mysqli 的参数化查询。

请阅读这篇文章：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# objective-c - NSComparisonResult，如何将 searchText 与多个字符串进行比较？

> ID：14893765
> 
> 赞同：2
> 
> 时间：2013-02-15T11:31:29.637
> 
> 标签：objective-c, cocoa-touch, search, comparison, tableview

我正在使用此代码在我的 tableview 中进行搜索：

```
for (Actor *actorz in arr)
{     
     NSComparisonResult result = [actorz.actorNaam compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:[actorz.actorNaam rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)]];
     if (result == NSOrderedSame)
     {
          [self.filteredListContent addObject:actorz];
     }   
} 
```

现在我想知道如何不仅将 searchText 与 actorz.actorNaam 进行比较，还与 actorz.actorBeschrijving 进行比较？所以我想将 searchText 与两个字符串进行比较..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:36:35.760

如果未找到该字符串，则`NSString`返回一个`NSRange`位置设置为的搜索方法。`NSNotFound`

*因此，您可以通过验证结果位置是否不是* 来检查是否找到了字符串`NSNotFound`。这听起来可能有点倒退，但逻辑是可靠的（可以说是两个否定）。

```
NSRange nameResult  = [actorz.actorNaam rangeOfString:searchText options:NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch];
NSRange descrResult = [actorz.actorBeschrijving rangeOfString:searchText options:NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch];

if ( nameResult.location != NSNotFound || descrResult.location != NSNotFound ) {
    [self.filteredListContent addObject:actorz];
} 
```

请注意，此代码段将查找包含搜索字符串的名称，而不仅仅是名称相等。您可能想使用原始代码进行更改。您当然必须删除 nameResult，因为它是多余的：

```
NSComparisonResult result = [actorz.actorNaam compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:[actorz.actorNaam rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)]];
NSRange descrResult = [actorz.actorBeschrijving rangeOfString:searchText options:NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch];

if ( result == NSOrderedSame || descrResult.location != NSNotFound ) {
    [self.filteredListContent addObject:actorz];
} 
```

但是，有一种更简单的方法。考虑使用谓词：

```
NSPredicate *actorPred = [NSPredicate predicateWithFormat:@"actorNaam contains[cd] %@ OR actorBeschrijving contains[cd] %@", searchText, searchText];

self.filteredListContent = [arr filteredArrayUsingPredicate:actorPred]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:44:39.483

我不完全确定您为什么要进行比较，对我来说，检查您正在搜索的字符串中是否存在搜索文本似乎更有意义。如果该方法对您有用，您可以尝试一下：

```
NSArray *toCompareTo = @[actorz.actorNaam, actorz.actorBeschrijving];
[toCompareTo enumerateObjectsUsingBlock:^(NSString *object, NSUinteger index, BOOL *stop) {
    if ([object rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)].location != NSNotFound) {
        [self.filteredListContent addObject:object];
        *stop = YES;
    }}]; 
```

# php - PHP 包含安全性 - 使用数组和名称前缀

> ID：14893767
> 
> 赞同：2
> 
> 时间：2013-02-15T11:31:34.150
> 
> 标签：php, arrays, security, include, prefix

我现在正在自学 php，并且正在使用 php include 开发一些简单的网站以简化页面创建过程。我已经在这个网站上搜索了使它安全的方法，但是，作为一个菜鸟，我总是害怕搞砸。

```
<?php
    $siteArticles = array('instalacoes','galeria','regiao-e-historia','precos','contactos');
    if( isset($_GET['page']) ){
        if( in_array($_GET['page'], $siteArticles, true) && file_exists('pt/'.'rbs-article-'.$_GET['page'].'.php') ){ 
            include('pt/'.'rbs-article-'.$_GET['page'].'.php'); 
        }
    }else{
        include('pt/rbs-article-home.php');
    }
?> 
```

如您所见，它首先检查页面是否允许通过数组，然后在名称文件中添加前缀。

我的问题是，这有多安全？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:43:02.093

它是安全的。`in_array()`检查是使它安全的原因。不可能仅仅因为请求的页面必须与白名单数组中的元素之一完全匹配，就对该代码执行本地文件包含 (LFI) 攻击。

# sql - 获取较小间隔的值

> ID：14893770
> 
> 赞同：0
> 
> 时间：2013-02-15T11:31:42.050
> 
> 标签：sql, sql-server

我有一个类似这样的 SQL 表：

```
Value   StartDate   EndDate 
```

我需要获取 StartDate 和 EndDate 之间的间隔是整个表中最小的值。如何在 WHERE 子句中表达它？

我正在使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:39:28.597

用这个：

```
SELECT TOP 1 value
FROM tbl1
ORDER BY DATEDIFF(ms, StartDate, EndDate) 
```

如果您的模式比具有最小差异的一行，您可以使用它：

```
SELECT TOP 1 WITH TIES value
FROM tbl1
ORDER BY DATEDIFF(ms, StartDate, EndDate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:37:22.370

您应该能够使用[`DateDiff()`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)类似于此：

```
select value, startdate, enddate
from yourtable
where datediff(ss, startdate, enddate) = (select min(datediff(ss, startdate, enddate))
                                          from yourtable) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/82b29/4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T11:37:41.160

```
SELECT TOP 1 Value
FROM YourTable
ORDER BY DATEDIFF(ms, StartDate, EndDate) 
```

请注意，如果有多个具有相同的最小差异的值，这里没有关于选择哪个值的规范。

但是，如果表中有大量行，则 DATEDIFF 可能对性能不利。如果这是一种常见的查询类型，我会考虑将差异存储为表中的另一列，然后将其用于 ORDER BY。

# shell - 用于从文件中读取包含内容并在其他文件上 grep 的 shell 脚本

> ID：14893775
> 
> 赞同：0
> 
> 时间：2013-02-15T11:31:54.803
> 
> 标签：shell

我正在研究外壳，我想编写一个衬垫，它将读取文件 A 的文件内容**并在文件****B**上执行`grep`命令。

 **例如，假设有两个文件

**dataFile.log** 具有以下值

`abc`

`xyz`

`...`等等

**现在在searchFile.log**上阅读 abc 和 grep`grep abc searchFile.log`

我有相同的 shell 脚本，但想要一个衬里

```
for i in "cat dataFile.log" do grep $i searchFile.log done; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:42:44.220

try this:

```
grep -f dataFile.log searchFile.log 
```

Note that if you want to grep as fixed string, you need `-F`, if you want to match the text in dataFile.log as regex, use `-E` or `-P`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:37:46.390

您可以使用`grep -f`选项：

```
cat dataFile.log | grep -f searchFile.log 
```

**编辑**

好的，现在我明白了这个问题。您想使用从`dataFile.log`到 grep in 的每一行`searchFile.log`。我也看到你有`value1|value2|...`，所以代替`grep`你需要`egrep`。

试试这个：

```
for i in `cat dataFile.log`
do
   egrep "$i" searchFile.log
done 
```

**编辑 2**

遵循 chepner 的建议：

```
egrep -f dataFile.log searchFile.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:41:59.770

以下情况如何：它甚至会忽略空行和 # 注释：

```
读取文件时；如果 [[ "$FILE" != [/a-zA-Z0-9]* ]]; 继续；菲; grep -h 模式 "$FILE"; 完毕;
```

当心：没有编译这个。**

# c# - 填充以编程方式创建的 asp:table 行

> ID：14893777
> 
> 赞同：1
> 
> 时间：2013-02-15T11:31:59.730
> 
> 标签：c#, asp.net

我正在设计视图中创建一个 Empty `asp:Table`。

从编程上讲，我正在添加`row`到这个`table`. 此行包含各种`custom controls`. 例如 ( `text box & dropDownList`) 的组合。

最初，我将所有内容添加`control`到`rows`& 最后添加到`table`. 它正确显示。
更改自定义控件中的值后，我想将该值保存`database`在按钮单击事件中。

在该单击事件中，我想遍历该表以查找我添加的所有行。
但在点击事件中，我总是得到空表。

在网上我对此进行了搜索，但每个人都告诉您必须重新创建表。

是他们在不重新创建所有行的情况下获得所有行的任何方式。这样我就可以将更改的值保存到数据库中。

# javascript - 仅针对文本而非 HTML 代码将哑引号转换为智能引号

> ID：14893779
> 
> 赞同：2
> 
> 时间：2013-02-15T11:32:04.950
> 
> 标签：javascript, html, replace, quotes

我在 a 中将哑引号转换为智能引号，`contenteditable`但问题是它还会在 HTML 元素中替换它们，例如：

```
<a href=“something” title=“something” 
```

从而使它们无效。我只想为用户的文本做这件事。这就是问题所在。我必须保留原始格式元素，所以我不能这样做：

```
clean($('#something_container').text()); 
```

这将在返回时删除所有 HTML 元素（格式）。这是我的代码：

```
content = clean($('#post_content').html());
$('#post_content').html(content);

// replaces ", ', --, <div> with <p>
function clean(html) {
  html = html.replace(/'\b/g, "\u2018")  // opening singles
         .replace(/\b'/g, "\u2019")  // closing singles
         .replace(/"\b/g, "\u201c")  // opening doubles
         .replace(/\b"/g, "\u201d")  // closing doubles
         .replace(/--/g,  "\u2014") // em-dashes
         .replace(/<div>/g, "<p>")  //<div> to <p>
         .replace(/<\/div>/g, "</p>"); //</div> to </p>
  return html;
}; 
```

什么是仅在用户文本中替换哑引号并跳过 HTML 标签的最佳（最有效）方法`<img src="" />`？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:13:26.107

这是一种可能的方法（不知道效率，但是如果您只处理用户手动输入的字符串，它们可能不会很长，所以没关系）：

1.  将您的字符串拆分为不重叠的块：HTML 标签与其余部分
2.  仅在非标签中“教育引语”，不理会标签
3.  把绳子重新放在一起

如果您正在处理的 HTML 格式正确（特别是，如果没有 " `<`" 浮动），则拆分为块很容易：

```
var html   = '<p style="color:red">some "quotes" in here</p>'
var chunks = html.match(/(<.+?>|[^<]+)/g)
// returns Array: ['<p style="color:red">', 'some "quotes" in here', '</p>'] 
```

然后，给定您`clean()`处理替换的函数，您可以说：

```
cleaned = chunks.map(function(chunk){
  return /</.test(chunk) ? chunk : clean(chunk)
}).join(''); 
```

`<`在和之间以外的任何地方应用您的替换`>`。

# java - 用户使用其私钥签署/时间戳数据的最佳方式是什么？

> ID：14893780
> 
> 赞同：0
> 
> 时间：2013-02-15T11:32:11.967
> 
> 标签：java, digital-signature, digital-certificate, trusted-timestamp

我对安全问题还是新手，所以我的问题实际上可能只是一个误解。

我正在使用的系统要求用户应该在 Web 应用程序的某处签署/时间戳数据。但是，为了使用数字证书进行签名，用户应该在系统上输入他们的私钥。考虑到涉及第三方的事实，我们作为一家公司应保证只允许最终用户签署/时间戳数据。

我看到的唯一方法是创建一个可以证书数据的桌面应用程序。但是我仍然需要在某个地方设置时间戳，这需要与外部服务器进行通信，这可能是我们公司“窃取”他们的私钥的一种方式。

是否有在 Internet 上特别是在 Web 应用程序上签名/时间戳数据的模式？这怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:26:49.157

所以你有一个服务器和用户。用户在他们的系统上执行数据的数字签名。时间戳与签名一起完成（它证明了签名时间）。时间戳由受信任的第三方 TSA（时间戳权威）执行。将进行签名的代码将联系 TSA（通常使用 HTTP 或 HTTPS 协议）并以这种方式执行时间戳。TSA 的证书包含在时间戳中，以便以后可以验证时间戳。

现在谈谈技术方面。对于 Web 应用程序，您最好的选择是创建一个小程序或 ActiveX 控件，将其下载到用户的浏览器并进行签名。

我们公司为此提供了预先创建的解决方案，我在[这个答案](https://stackoverflow.com/a/10656679/47961)中详细描述了它。

当然，您可以让用户下载文档并使用 Acrobat 或其他一些客户端应用程序对其进行签名，然后将文档上传回来。如果您决定自己编写此类应用程序，则需要签名组件，例如。IText 或我们的[SecureBlackbox](http://www.eldos.com/sbb/desc-pdf.php)。

# selenium - Selenium Web 驱动程序等待很长时间

> ID：14893781
> 
> 赞同：4
> 
> 时间：2013-02-15T11:32:18.673
> 
> 标签：selenium, selenium-webdriver, webdriver, qa, webdriverwait

我可以用 Selenium Web Driver 等待很长时间吗？

即使我可以像下面这样设置隐式等待命令，它也不会等待我给的时间。

```
 driver.manage().timeouts().implicitlyWait(5, TimeUnit.MINUTES); 
```

这里有什么问题吗？

就我而言，我需要执行一个测试用例并等待 4 分钟，然后再执行下一个测试用例。

我在这里使用Java。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T15:17:27.683

考虑到您需要等待特定元素，我会在下面的 ExplicitWait 行中做一些事情。

```
WebDriverWait wait = new WebDriverWait(driver, 300); // The int here is the maximum time in seconds the element can wait.
wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("someId"))); 
```

在这种情况下，您可以使用任何您想要的[ExpectedConditions 。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)也不必在一些非常特殊的情况下使用很长的等待时间。这个恕我直言是一个很好的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T06:15:49.150

实际上这不是我的答案，两天前我在这里看到了这个答案，但是我没有时间应用它。今天我尝试了它，这正是我想要的。

不幸的是，现在我在这里看不到那个答案。所以我添加了这个答案，所有的功劳都应该归给在这里发布这个答案的用户。

在这种情况下，我想做的是等待驱动程序 5 分钟，直到执行定期 cron 作业。

`Thread.sleep(4000);`暂停程序的执行。

# django - 如何从数据库中访问上一行

> ID：14893782
> 
> 赞同：0
> 
> 时间：2013-02-15T11:32:18.887
> 
> 标签：django

视图.py

```
 AppTruepower = form.cleaned_data['truepower_reading']
            AppApparent = form.cleaned_data['apparentpower_reading']
            AppVoltage = form.cleaned_data['voltage_reading']
            AppDate = form.cleaned_data['Date']
            AppTime = form.cleaned_data['Time']
            prevdate=KEBReading.objects.latest("id")
            print prevdate.truepower_reading
            print id
            KEBReading.objects.filter(id=id).update(truepower_reading=AppTruepower,apparentpower_reading=AppApparent,
                                                        voltage_reading=AppVoltage,datetime_reading=datetime.combine(AppDate,AppTime))

            a=KEBReading.objects.filter(id=id).values("truepower_reading")
            print a
            b=KEBReading.objects.filter(id=id).values("apparentpower_reading")
            print b
            print prevdate.truepower_reading 
```

在 django 表单中编辑一行时。我需要访问前一行来做一些计算。sumbody 可以建议我如何获得上一行。如果我使用 model.s.object.latest() 我会输入最后一行，但在我的情况下，我需要获取上一行，即我要编辑的当前行的前一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:44:19.760

我取决于您对行的含义是什么顺序。如果你想要上一行，`id`你可以做

```
curr_row = KEBReading.objects.filter(id=current_id)
#decrement id until you find valid record, as previous id might have deleted.
prev_row = KEBReading.objects.filter(id=current_id-1) 
```

如果您想按其他字段排序，那么

```
rows = KEBReading.objects.order_by('-some_field_to_order') # use - for reverse ordering
current_row = rows[0]
prev_row = rows[1]  
#verify for index errors though. 
```

# python - Teltonika FM1100 和 TCP 监听器

> ID：14893784
> 
> 赞同：4
> 
> 时间：2013-02-15T11:32:22.420
> 
> 标签：python, tcp

嗨，我在这里......我正在用 python 编写一个 tcp 侦听器来读取和与 teltonika 设备通信，但是在收到 imei 代码后我遇到了问题，我尝试将确认发送到设备，所以它不发送我的 AVL 数据。这是一个简单的代码：

```
#!/usr/bin/env python

import socket
import time
import binascii

#Variables______________________________________#
imei_known = 'XXXXXXXXXXXXXXX'
COM = 0
TCP_IP = '192.168.1.115'
TCP_PORT = 55001   
BUFFER_SIZE = 5024
MESSAGE_NO_OK = '00'
MESSAGE_OK = '01'
msg_ok = MESSAGE_OK.encode('utf-8')
msg_no_ok = MESSAGE_NO_OK.encode('utf-8')
#gps elememts (to be review)
long = [0] * 8
lat = [0] * 8
angle = [0] * 4
speed = [0] * 4
sat = [0] * 2
#_____________________________________________________________#

print ('Server listening on port:',TCP_PORT)
print ('\nWaiting for data input from FM1100...')

#socket    
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

server_socket.bind((TCP_IP, TCP_PORT))
server_socket.listen(5)

client_socket, addr = server_socket.accept()         
print ('\nConnection address:', addr)

#infinite loop  
while 1:

    if COM == 0:
        print ('\nCOM num = ',COM)
        data = client_socket.recv(BUFFER_SIZE)
        imei = data.decode("iso-8859-1")
        lista = list(imei)
        #vector of 15 elements for IMEI code
        lista_2 = [0] * 15
        for n in range (0,15):
            lista_2 [n]  = lista[n+2]
        imei=''.join(lista_2)    
        print ('\nDevice\'s IMEI:', imei)
        print ('\nComparing IMEI...')
        if imei_known == imei:
            print('\nDevice Recognized ')
            print('\nSending data to client...')
            client_socket.send(b'0x01')
            data = ''
        else:
            client_socket.send(msg_no_ok)
            print('\nDevice NOT Recognized')
            break

    print('\nWaiting for AVL data...') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-28T11:57:14.737

您必须以十六进制回复 FM1100。像这样：

```
client_socket.send('\x01') 
```

# php - instagram api实时挑战获取代码200但数据无效

> ID：14893786
> 
> 赞同：0
> 
> 时间：2013-02-15T11:32:32.887
> 
> 标签：php, zend-framework

我的目标是订阅我的应用程序并获取标签 love 的所有数据

```
class IndexController extends App_Controller_Default 
```

{ 公共函数 indexAction() { $data = $this->_getSubscriptionTag(); Zend_Debug::dump($data); }

```
public function realtimecallbackAction()
{
    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);
    $allParams = $this->_getAllParams();
    $dataFile = ROOT_DIR.'/data.txt';
    file_put_contents($dataFile, implode(',',$_GET).implode(',',array_keys($_GET)));
    if(isset($_GET['hub_challenge'])){
        $challenge = $_GET['hub_challenge'];
        $file = ROOT_DIR.'/json.txt';
        $json = $this->_challenge($challenge);
        file_put_contents($file, $json);
    }
    $request = $this->getRequest();
    if($request->isPost()){
        $filePostData = ROOT_DIR.'/postdata.txt';
        $postdata = file_get_contents("php://input");
        file_put_contents($filePostData, $postdata, FILE_APPEND | LOCK_EX);
    }
}

protected function _getSubscriptionTag($verifyToken='')
{
    $config = array(
        'adapter'   => 'Zend_Http_Client_Adapter_Curl',
        'curloptions' => array(CURLOPT_FOLLOWLOCATION => true),
    );
    $uri = 'https://api.instagram.com/v1/subscriptions/';
    $request = $this->getRequest();
    $callbackUrl= $request->getScheme().'://'.$request->getHttpHost().$request->getBaseUrl().'/index/realtimecallback';
    $client = new Zend_Http_Client();
    $client->setUri($uri);
    $client->setConfig($config);
    $client->setMethod(Zend_Http_Client::POST);
    $client->setParameterPost('client_id', 'my_id');
    $client->setParameterPost('client_secret', 'my_secret');
    $client->setParameterPost('object', 'tag');
    $client->setParameterPost('aspect', 'media');
    $client->setParameterPost('object_id', 'love');
    $client->setParameterPost('verify_token', $verifyToken);
    $client->setParameterPost('callback_url', $callbackUrl);
    $response = $client->request();
    $httpCode = $response->getStatus();
    $httpHeaders = $response->getHeaders();
    $httpBody = $response->getBody();
    $data = array();
    try{
        $data = Zend_Json_Decoder::decode($httpBody,Zend_Json::TYPE_ARRAY);
    }
    catch(Exception $e){
        $data['error_type'] = 'malformed json';
        $data['error_message'] = $e->getMessage();
    }
    var_dump($client->getLastRequest());
    return $data;
}

protected function _challenge($challenge)
{
    $config = array(
        'adapter'   => 'Zend_Http_Client_Adapter_Curl',
        'curloptions' => array(CURLOPT_FOLLOWLOCATION => true),
    );
    $uri = 'https://api.instagram.com/v1/subscriptions/';
    $client = new Zend_Http_Client();
    $client->setUri($uri);
    $client->setConfig($config);
    $client->setParameterGet('challenge', $challenge);
    $client->setParameterGet('client_id', 'my_id');
    $client->setParameterGet('client_secret', 'my_secret');
    $response = $client->request();
    $httpCode = $response->getStatus();
    $httpHeaders = $response->getHeaders();
    $httpBody = $response->getBody();
    return $httpBody;

} 
```

}

在 json.txt 文件中，我得到 {"meta":{"code":200},"data":[]} 如果我提出请求 [https://api.instagram.com/v1/subscriptions?client_secret=CLIENT -SECRET&client_id=CLIENT-ID](https://api.instagram.com/v1/subscriptions?client_secret=CLIENT-SECRET&client_id=CLIENT-ID) 我得到了同样的我不知道该转向哪条路:(你能帮我吗？

我也试过 $client->setParameterGet('verify_token', $challenge); 但它不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:07:19.700

:)

```
public function realtimeAction()
{ 
    $file = ROOT_DIR.'/json.txt';
    $data = $this->_getSubscriptionTag();
    $request = $this->getRequest();
    if($request->isPost()){
        $filePostData = ROOT_DIR.'/postdata.txt';
        $postdata = file_get_contents("php://input");
        file_put_contents($filePostData, $postdata, FILE_APPEND | LOCK_EX);
    }
    Zend_Debug::dump($data);
}

public function realtimecallbackAction()
{
    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);
    if(isset($_GET['hub_challenge'])){
        $challenge = $_GET['hub_challenge'];
        echo $challenge;
        exit;
    } 
```

}

非常感谢 [http://thegregthompson.com/instagram-real-time-api-php/](http://thegregthompson.com/instagram-real-time-api-php/)

# visual-studio-2012 - 从 VS 2005 到 VS2012 的性能改进

> ID：14893787
> 
> 赞同：0
> 
> 时间：2013-02-15T11:32:41.357
> 
> 标签：visual-studio-2012

请告诉我从 VS 2005 到 VS 2012 的性能改进因素。例如：List to HashSet

我想知道上述角度的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:47:21.843

考虑 .Net Framework 3 和 .Net Framework 4.5 之间的差异可能更相关...

用于 .Net 4.5 中的性能改进；

[http://msdn.microsoft.com/en-us/magazine/hh882452.aspx](http://msdn.microsoft.com/en-us/magazine/hh882452.aspx)

*一般来说*，以下描述了 .Net 版本之间的差异。

**对于.Net 4.5：**

[http://msdn.microsoft.com/en-gb/library/ms171868(v=vs.110).aspx](http://msdn.microsoft.com/en-gb/library/ms171868(v=vs.110).aspx)

**对于.Net 4：**

[http://msdn.microsoft.com/en-gb/library/ms171868(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/ms171868(v=vs.100).aspx)

**对于 .Net 3.5 SP1：**

[http://msdn.microsoft.com/en-gb/library/cc713697(v=vs.90).aspx](http://msdn.microsoft.com/en-gb/library/cc713697(v=vs.90).aspx)

**对于.Net 3.5：**

[http://msdn.microsoft.com/en-gb/library/bb332048(v=vs.90).aspx](http://msdn.microsoft.com/en-gb/library/bb332048(v=vs.90).aspx)

关于您的具体示例，在 List 和 HahSet 之间转换可能没有直接的性能改进，可能有更好的方法来处理代码中的这两种类型，例如，Linq 是在 .Net Framework 3.5 中引入的，它不是t 作为 VS 2005 的一部分提供。

# sql-server-2008 - SSRS：如何将所有选项添加到 SSRS 下拉过滤器？

> ID：14893789
> 
> 赞同：4
> 
> 时间：2013-02-15T11:32:48.590
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我正在为 SQL 2008 R2 使用 SQL Server Reporting Services。我的报告由从表格中填充的两个下拉菜单过滤，其中一个显示内部版本号。我想为用户提供选择“全部”的选项，以便返回所有内部版本号的数据，而不仅仅是一个。如何将此选项添加到我的下拉过滤器并使其正常工作？非常感谢您提供的任何帮助。J。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T13:07:45.927

我假设您不想在这里使用**多值参数**，您只希望用户针对所有构建或仅一个构建运行，而不是选择构建。否则，您只需使用标准的**多值参数**。

一种方法是为参数数据集中的所有构建返回一个额外的行，例如：

```
select buildId as null, build = 'All'
union all
select buildId = build, build
from builds 
```

我在这里返回两列，因此我们可以传递一个 NULL 值参数，但仍然有一个用户友好的描述要显示在报告中。

将其设置为您的参数数据集。在报告代码中，您可以使用该参数执行以下操作：

```
select *
from builds
where (@build is null or @build = build) 
```

当为空时将返回所有构建，`@build`如果不为空则返回指定的构建`@build`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T15:55:08.190

将存储过程中的 where 子句简单地更改为

```
Where [field] LIKE @variable 
```

然后在可用值下的 SSRS 中，“ALL”参数值为 %（百分比符号）？

这里是不是逻辑有误。似乎有想要的结果

# spring - Spring JPA Hibernate 与 Spring Hibernate

> ID：14893795
> 
> 赞同：1
> 
> 时间：2013-02-15T11:33:03.213
> 
> 标签：spring, hibernate, jpa-2.0

从性能的角度来看，**Spring JPA Hibernate**还是**Spring Hibernate**哪个应该是更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T12:53:54.807

希望此链接对您正在查看的绩效报告有所帮助

[http://www.jpab.org/All/All/All.html](http://www.jpab.org/All/All/All.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:33:51.820

我不希望 Hibernate JPA 和经典 Hibernate 之间有任何相关的性能差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:58:14.143

我认为你不应该担心它。正如拉尔夫所说，这是合理的。而是继续使用 JPA，因为您的代码将独立于供应商。或者如果你有理由去Hibernate，（也许有更好的文档或其他东西）。

# jquery - fancybox 加载到我的 iframe 底部

> ID：14893796
> 
> 赞同：0
> 
> 时间：2013-02-15T11:33:12.917
> 
> 标签：jquery, fancybox, fancybox-2

将 Fancybox 与它的新 api 一起使用，尝试构建一个可以在 iPhone 和真实计算机上运行的网站......所以，在我的 CSS 中，我必须定义我的页面大小，而不是仅仅将网站的内容作为 80% 的 iframe。突然间，这打破了 FancyBox 的工作方式，现在它的窗口在页面某处的框架之外打开。那么，我是否修复了网站，使其不会在 iFrame 中加载内容？还是我调整 Fancybox？很高兴传递更多细节......

FancyBox api 对此进行了说明，但我找不到它的设置位置。

“内容类型的 iframe 选项” `iframe`“
对象；默认值：”

```
{
scrolling : 'auto',
preload   : true
} 
```

第一次海报...这里的长期读者。

# android - 代码更改后“找不到源”

> ID：14893797
> 
> 赞同：1
> 
> 时间：2013-02-15T11:33:14.553
> 
> 标签：android, android-4.0-ice-cream-sandwich

我在一本书之后写了两组代码。它只是显示一个带有一些复选框的对话框，它们在功能方面是相似的，但它们在编程上略有不同。第一个在模拟器中运行良好，第二个说“在 JAR android.jar 中找不到源

**作品：**

```
public class DialogActivity2 extends Activity {
   CharSequence[] items = { "Google", "Apple", "Microsoft" };
   boolean[] itemsChecked = new boolean [items.length];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void onClick(View v) {
    showDialog(0); 
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case 0:
        return new AlertDialog.Builder(this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("This is a dialog with some simple text...")

        .setPositiveButton("OK",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    Toast.makeText(getBaseContext(),
                    "OK clicked!", Toast.LENGTH_SHORT).show();
                }
            }
        )

        .setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    Toast.makeText(getBaseContext(),
                    "Cancel clicked!", Toast.LENGTH_SHORT).show();
                }
            }
        )

        .setMultiChoiceItems(items, itemsChecked,
            new DialogInterface.OnMultiChoiceClickListener() {                  
                public void onClick(DialogInterface dialog, int wich, boolean isChecked) {
                    Toast.makeText(getBaseContext(), items[wich] + (isChecked ? " checked!" : " unchecked!"), Toast.LENGTH_SHORT).show();                       
                }
            }
        ).create();         
    }
    return null;
}

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
     getMenuInflater().inflate(R.menu.activity_main, menu);
     return true;
 }
} 
```

**生成“找不到源”：**

```
public class DialogActivity1 extends Activity { 
   CharSequence[] items = { "Goole", "Apple", "Microsoft" };
   boolean[] itemsChecked = new boolean[items.length];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dialog_activity1);
}

public void onClick(View v) {           
    showDialog(0);
}

@Override
protected Dialog onCreateDialog(int id) {       
    switch (id) {
    case 0:
        Builder builder = new AlertDialog.Builder(this);
        builder.setIcon(R.drawable.ic_launcher);
        builder.setTitle("Dialog with some text...");           
        builder.setPositiveButton("OK",
            new DialogInterface.OnClickListener() {                 
                public void onClick(DialogInterface dialog, int wichButton) {
                    Toast.makeText(getBaseContext(), "OK clicked!", Toast.LENGTH_SHORT).show();
                }
            }
        );

        builder.setNegativeButton("Cancel", 
            new DialogInterface.OnClickListener() {                     
                public void onClick(DialogInterface dialog, int whichButton) {
                    Toast.makeText(getBaseContext(), "Cancel clicked!", Toast.LENGTH_SHORT).show();

                }
            }
        );

        builder.setMultiChoiceItems(items, itemsChecked,
            new DialogInterface.OnMultiChoiceClickListener() {
                public void onClick(DialogInterface dialog, int wich, boolean isChecked) {
                    Toast.makeText(getBaseContext(),
                    items[wich] + (isChecked ? " checked" : " unchecked"), Toast.LENGTH_SHORT).show();                          
                }
            }
        );
        return builder.create();
    }
    return null;
}

 @Override
 public boolean onCreateOptionsMenu(Menu menu)
 {
     // Inflate the menu; this adds items to the action bar if it is present.
     getMenuInflater().inflate(R.menu.activity_dialog_activity1, menu);
     return true;
 }

} 
```

# php - 防止页面被加载

> ID：14893800
> 
> 赞同：0
> 
> 时间：2013-02-15T11:33:26.050
> 
> 标签：php, .htaccess

我正在为我创建的网页开发自己的 MVC 样式系统。文件结构如下：

```
docs/contact/contact.php
img/
inc/
index.php
.htaccess 
```

在 Docs 中，网站的每个部分都有文件夹。在这种情况下，我扩展了“联系”。.htaccess 文件将所有 URI 路由到 index.php，但如果直接访问它们，则不会，即 domain.com/docs/contact/contact.php。

这是我的 .htaccess：

```
Options +FollowSymlinks
RewriteEngine on
RewriteOptions MaxRedirects=10

AddType "text/html; charset=UTF-8" html 
AddType "text/plain; charset=UTF-8" txt

<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /

# if file not exists
RewriteCond %{REQUEST_FILENAME} !-f

# if dir not exists
RewriteCond %{REQUEST_FILENAME} !-d

# avoid 404s of missing assets in our script
RewriteCond %{REQUEST_URI} !^.*\.(jpe?g|png|gif|css|js)$ [NC]

RewriteRule .* index.php [QSA,L]

</IfModule> 
```

有没有办法阻止人们访问 docs 文件夹中的文件，除非直接从文件 index.php 调用它？这可以用.htaccess 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:37:23.853

您可以在 index.php 中定义一些东西来防止这种情况：

```
define('MyAppLoaded', true); 
```

并在您的其他文件中检查：

```
if (!defined('MyAppLoaded')) {
    // show message or handle direct access
} 
```

但真正的问题是：如果您不希望一开始就可以直接访问这些文件，为什么要将所有这些文件放在您的 docroot 中？

恕我直言，docroot 中唯一的 php 文件应该是 index.php 文件，其内容如下：

```
<?php

require __DIR__ . '/../bootstrap.php'; 
```

# c - 为什么结构中的双重成员未在 8 字节边界上对齐？

> ID：14893802
> 
> 赞同：5
> 
> 时间：2013-02-15T11:33:39.703
> 
> 标签：c, alignment

这是关于内存对齐的。在下面的代码中，我预计结构内 b 的偏移量为 8（32 位机器）。见[这里](https://stackoverflow.com/questions/10913120/why-double-in-c-is-8-bytes-aligned)。因此，使得`b`总是发生在一个高速缓存行内。然而，事实并非如此。`b`全局对象中的成员`struct test1`似乎是对齐的。我不确定它是偶然还是编译器故意这样做。

我想了解为什么编译器在`a`.

```
struct test1
{
int a;
double b;
}t1;

int main()
{
struct test1 *p = malloc(sizeof(struct test1));
printf("sizes int %d, float %d, double %d, long double %d\n", sizeof(int), sizeof(float), sizeof(double), sizeof(long double));
printf("offset of b %d\n",(int)&(t1.b)-(int)&(t1));

printf("\naddress of b (on heap) = %p, addr of b (on data seg) = %p\n",&(p->b), &(t1.b));

return 0;
} 
```

输出是...

```
sizes int 4, float 4, double 8, long double 12
offset of b 4

address of b (on heap) = 0x804a07c, addr of b (on data seg) = 0x80497e0 
```

我在 ubuntu 10.04 上使用标准 gcc 编译器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:08:18.857

According to the [System V ABI for i386](http://www.uclibc.org/docs/psABI-i386.pdf), page 28, `double` only gets 4 bytes alignment, but compilers are recommended to provide an option for 8 bytes as well. It appears this is what is implemented by GCC on Linux, the option being called `-malign-double`.

Another alternative is to use `-m64` to get x86-64 object code, which is already the default on some systems including Mac OS X.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T12:58:17.260

> 我预计结构内 b 的偏移量为 8（32 位机器）。看这里

您的参考资料解释了为什么 8 对齐双打可能是有利的。这并不*意味着*双打总是8对齐的。如果您的消息来源说它们始终是 8 对齐的，而您观察到它们不是的实现，那么您的消息来源是错误的。

从 GCC 手册页：

> 在两个字边界上对齐“双”变量将产生在奔腾上运行得更快的代码，但会消耗更多内存。

所以 GCC 声明 4 对齐的原因是为了节省内存。您可以使用`-malign-double`and`-mno-align-double`来控制它，当然，如果您在使用冲突选项编译的代码之间共享结构，那么您当然会冒创建二进制不兼容的风险。对于特定的对象/结构成员，您可以使用 GCC 自己的[`__attribute__((aligned))`](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html), `_Alignas`（在 C11 中）或`alignas`（在 C++11 中），所有这些都可以采用整数常量来指定所需的对齐方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:47:35.577

在 ANSI C 中根本无法保证对齐。

与在堆上声明的任何内容相比，自动变量更容易发生对齐。如果您使用的是 POSIX 操作系统，请使用 memalign(3) 接收您确定已对齐的内存。Malloc 可以在任何偏移量处返回内存。您可以使用编译器指令`__attribute__ ((__packed__))`，例如放入您自己的对齐方式。

# oracle11g - 在下一列值中显示第一列值，直到遇到非空值

> ID：14893807
> 
> 赞同：0
> 
> 时间：2013-02-15T11:33:51.930
> 
> 标签：oracle11g

我有表 part_volume 列部分，volume_1，volume_2，volume_3，volume_4，volume_5，volume_6 列。

表有如下数据：

```
PART      VOLUME_1 VOLUME_2 VOLUME_3 VOLUME_4 VOLUME_5 VOLUME_6               
--------- -------- -------- -------- -------- -------- --------
camera        1500        0        0        0     3000        0 
```

我想将数据显示为

```
PART      VOLUME_1 VOLUME_2 VOLUME_3 VOLUME_4 VOLUME_5 VOLUME_6               
--------- -------- -------- -------- -------- -------- --------
camera        1500     1500     1500     1500     3000     3000 
```

我怎样才能在 oracle 中实现这一点？

谢谢并恭祝安康，

洛帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:46:33.493

所以如果当前值是，只保留先前的值`0`？

如果是这样：

```
select part,
       volume_1,
       coalesce(volume_2, volume_1) volume_2,
       coalesce(volume_3, volume_2, volume_1) volume_3,
       coalesce(volume_4, volume_3, volume_2, volume_1) volume_4,
       coalesce(volume_5, volume_4, volume_3, volume_2, volume_1) volume_5,
       coalesce(volume_6, volume_5, volume_4, volume_3, volume_2, volume_1) volume_6
  from (select part,
               volume_1,
               case volume_2 when 0 then to_number(null) else volume_2 end volume_2,
               case volume_3 when 0 then to_number(null) else volume_3 end volume_3,
               case volume_4 when 0 then to_number(null) else volume_4 end volume_4,
               case volume_5 when 0 then to_number(null) else volume_5 end volume_5,
               case volume_6 when 0 then to_number(null) else volume_6 end volume_6
          from data); 
```

是否可能为空，如果是，规则是否与零相同？

# android - Android 权限、签名和开发者密钥

> ID：14893811
> 
> 赞同：6
> 
> 时间：2013-02-15T11:34:16.540
> 
> 标签：android, android-permissions

我正在开发一个包含许多组件的应用程序，每个组件都是一个单独的 Android 应用程序。“核心”应用程序将使用内容提供者来提供对数据库的访问，并且阅读权限文档“签名”保护是我想要的方式。

我已经为我的权限定义了一个组，主要是为了让我的权限可以很好地显示在应用信息的“权限”部分中我自己的图标上。他们出现`android:protectionLevel="normal"`就好了。但是当我使用它们时`android:protectionLevel="signature"`它们消失了。

```
<permission-group
    android:name="com.example.permissions.GROUP"
    android:label="@string/lblGroup"
    android:description="@string/descGroup"
    android:icon="@drawable/ic_menu_permissions_group" />

<permission
    android:name="com.example.permission.CONFIG_READ"
    android:permissionGroup="com.example.permissions.GROUP"
    android:protectionLevel="signature"
    android:label="@string/lblConfigRead"
    android:description="@string/descConfigRead" />
<permission
    android:name="com.example.permission.CONFIG_WRITE"
    android:permissionGroup="com.example.permissions.GROUP"
    android:protectionLevel="signature"
    android:label="@string/lblConfigWrite"
    android:description="@string/descConfigWrite" /> 
```

鉴于我目前正在开发并因此使用开发人员密钥，我是否需要跳过其他一些障碍才能使“签名”保护级别为开发人员工作？

一如既往地感谢您的帮助

史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:48:55.617

> 但是当我使用 android:protectionLevel="signature" 他们消失了。

那是因为用户不需要批准它们。签名级权限会根据应用程序的签名自动授予和拒绝。

> 为了让“签名”保护级别为开发人员工作，我还需要跳过其他一些障碍吗？

它已经适用于您自己的应用程序。如果“开发者”是第三方，则不能使用签名级别的权限，因为他们将使用自己的签名密钥进行签名。

# ruby-on-rails - each_with_index 无法正常工作

> ID：14893814
> 
> 赞同：0
> 
> 时间：2013-02-15T11:34:23.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, haml

我希望每个循环的第一个元素是“活动的”，并用一个活动的 css 类包装它。我试过这个，但现在每个项目都处于活动状态。艾做错了什么？

```
#myCarousel.carousel.slide
  .carousel-inner
    - @cities.each do |city|
      - city.activities.find_all_by_homepage_city(true).each do |b|
        - b.attachments.each_with_index do |a, index|
          - if index=0 
            .active.item
              = link_to(image_tag(a.file.url, :height =>"325px", :width =>"650px"))
              .carousel-caption
               %h4 yep 1
          - else 
            .item
              = link_to(image_tag(a.file.url, :height =>"325px", :width =>"650px"))
              .carousel-caption
                %h4 yep 2 
```

谢谢..remco

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:39:48.223

你有错别字，应该`if index == 0`不是`if index = 0`

无论如何，如果我想做你正在做的事情，我会做以下事情

```
#myCarousel.carousel.slide
  .carousel-inner
    - @cities.each do |city|
      - city.activities.find_all_by_homepage_city(true).each do |b|
        - b.attachments.each_with_index do |a, index|
          %div{ :class => "#{index == 0? 'active item' : 'item'}" }
            = link_to(image_tag(a.file.url, :height =>"325px", :width =>"650px"))
            .carousel-caption
              %h4
                = index == 0 ? 'yep 1' : 'yep 2' 
```

# ruby-on-rails - Spree 1.3.2 未显示我的帐户和登录/注销链接，以及控制台中的 Spree::User 对象

> ID：14893821
> 
> 赞同：0
> 
> 时间：2013-02-15T11:34:41.890
> 
> 标签：ruby-on-rails, spree

我在一个新的 rails 项目中安装了 spree 1.3.2。捆绑安装后，我运行了 spree install cmd，它运行得非常好。

在我的本地服务器上启动应用程序后，我得到了示例数据和产品。但我没有得到任何与帐户相关的链接。例如 /account 或 /login

在控制台中，当我查找 Spree::User 对象时出现错误。我无法弄清楚为什么 Object 没有出现以及为什么缺少一些 url。

任何人都可以提供一些指示吗？

谢谢，高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:50:27.317

听起来您忘记安装[spree_auth_devise](https://github.com/spree/spree_auth_devise)扩展。请查阅该项目的自述文件以获取有关如何安装它的说明。

# android - 读取期间仅在 csv 文件中显示最后一个条目？

> ID：14893823
> 
> 赞同：1
> 
> 时间：2013-02-15T11:34:44.147
> 
> 标签：android, csv, opencsv

我正在使用以下代码读取文件

`FileReader fr=new FileReader("/mnt/sdcard/content.csv");

```
 BufferedReader in = new BufferedReader(fr);
        String reader = "";
        while ((reader = in.readLine()) != null){
            String[] RowData = reader.split(",");
            id = RowData[0];
            path = RowData[1];` 
```

我也尝试过使用 opencsv 类，但是使用这两种方法我只能读取文件中的最后一个条目。我错过了什么？有人可以向我解释一下吗？

```
FileReader fr=new FileReader("/mnt/sdcard/playlist_record.csv");
        BufferedReader in = new BufferedReader(fr);
        String reader = "";
        while ((reader = in.readLine()) != null){
            String[] RowData = reader.split(",");
            id = RowData[0];
            path = RowData[1];
            type= RowData[2];
            update= RowData[3];
            server= RowData[4];
         t1.setText(id);
           // t1.append(path);
          //  t1.append(type);
           // t1.append(server);
        }
        in.close(); 
```

这是我用来读取文件的代码

# javascript - 使用复选框中选中的值自动填充文本框值，但保留手动输入的值

> ID：14893826
> 
> 赞同：2
> 
> 时间：2013-02-15T11:34:52.293
> 
> 标签：javascript, jquery, html

我使用下面的 jquery 根据选中或未选中复选框的值自动填充文本框

```
function updateTextArea() {
        var allVals = [];

        $('#all :checked').each(function () {
                allVals.push($(this).val());
        });

        document.getElementById('txtbox').value = allVals;
    }
    $(function () {
        $('#all input').click(updateTextArea);
        updateTextArea();
    }); 
```

我的html代码是

```
<div id="all">
<input id="txtbox" type="text" Height="100px"  Width="770px"  />   
  <input id="Checkbox2" type="checkbox" value="abc1@abc.com" />
  <input id="Checkbox3" type="checkbox" value="abc2@abc.com" />
  <input id="Checkbox4" type="checkbox" value="abc3@abc.com" />
  <input id="Checkbox5" type="checkbox" value="abc4@abc.com" />

</div> 
```

上面的 jquery 适用于复选框的每个选中和取消选中事件，并将其值填充到用逗号分隔的文本框中，我的问题是如果有人在上面的文本框中手动输入一些用逗号分隔的电子邮件，我希望保留该值而不是为我的复选框的选中和取消选中事件刷新。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:58:31.657

我用来解决这个问题的一般技术是：

在每次选中或取消选中时：
1\. 用逗号将列表拆分为一个数组。
2\. 收集所有已检查的预设电子邮件值（您已经这样做了）。
3\. 找出每个不在预设数组中的分割值，并将其放在一边。
4\. 插入所有选中的预设值，然后添加所有的奇数，反之亦然。

这不会保留顺序，但会保留任何手动输入的值。可以保留订单，但会有点棘手。

您也可以考虑只使用一个单独的“附加电子邮件”文本框，这将降低其复杂性并可能使其对用户更直观。

代码：

```
function updateTextArea() {
    var allVals = [];
    var checkedVals = [];

    $('#all input[type=checkbox]').each(function () {
        allVals.push($(this).val());
    });

    $('#all :checked').each(function () {
        checkedVals.push($(this).val());
    });

    var potentialOtherEmails = $("#txtbox").val().split(",");
    var confirmedOtherEmails = [];
    $(potentialOtherEmails).each(function(index,value) {
        if ($.inArray(value, allVals) == -1) {
            confirmedOtherEmails.push(value);
        }
    });

    $("#txtbox").val($.merge(checkedVals,confirmedOtherEmails));    
}

$(function () {
    $('#all input').click(updateTextArea);
    updateTextArea();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:06:26.260

给你....

```
$(function () {
    txtbox = $("#txtbox");
    var prevVal;
    $("input[type='checkbox']").click(function() {
        prevVal = txtbox.val();
        if($(this).is(":checked"))
        {
            txtbox.val(prevVal + $(this).val() + ", ");
        }
        else
        {
            prevVal = prevVal.replace($(this).val()+", ", "");
            txtbox.val(prevVal);
        }
    });
}); 
```

对现有代码的一个注意事项是，您查询 DOM 过多（在每次检查时迭代复选框），不要这样做。`document.getElementById`另外，当您有可用的 JQuery 时，为什么还要使用？:-) 这*可能*不是一个完美的解决方案，但有效！

# cordova-2.0.0 - Windows Phone 8 不会触发 inappbrowser 的事件

> ID：14893827
> 
> 赞同：1
> 
> 时间：2013-02-15T11:34:56.847
> 
> 标签：cordova-2.0.0

我正在使用科尔多瓦 2.4.0。在应用浏览器中。但事件并没有被触发。

var ref = window.open(url, '_blank');

ref.addEventListener('loadstart', function() { alert("ref"); });

页面在 inappbrowser 中打开。但事件不会触发。

# jsf - JSF 阶段渲染响应没有被调用

> ID：14893828
> 
> 赞同：2
> 
> 时间：2013-02-15T11:34:58.157
> 
> 标签：jsf, jsf-2, el

正在将应用程序从 WAS7 迁移到 Tomcat7。

我可以部署和启动 webapp。我面临的问题是 JSF 生命周期在执行操作时似乎没有完成。（不确定是否发生了这种情况，请参阅下面的解释场景）

为了监控生命周期，我编写了一个简单的生命周期代码并在`faces-config.xml`

`LifeCycleListener.java`

```
package com.csc.phaseEvent;

import javax.faces.event.PhaseEvent;
import javax.faces.event.PhaseId;
import javax.faces.event.PhaseListener;

public class LifeCycleListener implements PhaseListener {

    public PhaseId getPhaseId() {
        return PhaseId.ANY_PHASE;
    }

    public void beforePhase(PhaseEvent event) {
        System.out.println("START PHASE " + event.getPhaseId());
    }

    public void afterPhase(PhaseEvent event) {
        System.out.println("END PHASE " + event.getPhaseId());
    }

} 
```

所以这给了我在控制台`StartPhase`和`End Phase`每个阶段的输出，但是在`END PHASE INVOKE_APPLICATION 5`参考日志之后什么都没有发生

```
START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
END PHASE APPLY_REQUEST_VALUES 2
START PHASE PROCESS_VALIDATIONS 3
END PHASE PROCESS_VALIDATIONS 3
START PHASE UPDATE_MODEL_VALUES 4
END PHASE UPDATE_MODEL_VALUES 4
START PHASE INVOKE_APPLICATION 5
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:29.984: ServiceDelegator : DEBUG : :Current Process Stack [[openSession.SelectRoleSuccess, coordinatorDesktop.CoordinatorDesktop, openSession.SelectRole]]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:29.985: ServiceDelegator : DEBUG : :Executing Invoke activity [SelectRole]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:29.986: ServiceDelegator : DEBUG : :invoking service action class [SET_ROLE]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:29.992: BaseServiceAction : DEBUG : :SetRole - Session Key used BAC4DB1C-ADDA-4009-4000-96BD19DEA88F/mukul
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:29.993: java.lang.Class : DEBUG : :Executing findUserSession().
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:29.994: java.lang.Class : DEBUG : mukul:Executing persistActiveRoles(UserSession inputUserSession).
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.02: ServiceDelegator : DEBUG : mukul:Current Process Stack [[openSession.SelectRoleSuccess, coordinatorDesktop.CoordinatorDesktop, openSession.SelectRoleSuccess]]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.03: ServiceDelegator : DEBUG : mukul:Executing Invoke activity [SelectRoleSuccess]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.04: ServiceDelegator : DEBUG : mukul:invoking embedded process [coordinatorDesktop]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.05: ServiceDelegator : DEBUG : mukul:Current Process Stack [[openSession.SelectRoleSuccess, coordinatorDesktop.CoordinatorDesktop, openSession.SelectRoleSuccess, coordinatorDesktop.CoordinatorDesktop]]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logXML:260)  - 2013/02/15 16:38:30.06: ServiceDelegator : XML : mukul:process event final result [<process-step-result><outcome>coordinatorDesktop</outcome><result-params><has-errors><![CDATA[false]]></has-errors><error></error><PROCESS_STACK><![CDATA[openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$]]></PROCESS_STACK><PersistElements><roleID><![CDATA[FullRep]]></roleID></PersistElements><Session><![CDATA[USK:BAC4DB1CADDA4009400096BD19DEA88F/
]]></Session><SelectRoleActionResult><![CDATA[success]]></SelectRoleActionResult><successInd><![CDATA[success]]></successInd><outcome><![CDATA[success]]></outcome></result-params></process-step-result>]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.07: XMLUtils : DEBUG : mukul:node = error  NOT in XML <process-step-result><outcome>coordinatorDesktop</outcome><result-params><has-errors><![CDATA[false]]></has-errors><error></error><PROCESS_STACK><![CDATA[openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$]]></PROCESS_STACK><PersistElements><roleID><![CDATA[FullRep]]></roleID></PersistElements><Session><![CDATA[USK:BAC4DB1CADDA4009400096BD19DEA88F/
]]></Session><SelectRoleActionResult><![CDATA[success]]></SelectRoleActionResult><successInd><![CDATA[success]]></successInd><outcome><![CDATA[success]]></outcome></result-params></process-step-result>
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.15: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [User] value [mukul]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.16: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [systems] value [[CLIENT-DB, XMLG, CyberLifeWS, Hibernate, CyberLifeWS_VSAM, AWDnative]]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.17: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [ServletURL] value [http://localhost:8080/csa/servlet/Initializer]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.17: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [currSelectionspagecode.authorization.AdminLogon] value [{}]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.18: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [currSelectionspagecode.authorization.Roles] value [{rowTable= FullRep}]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.19: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [PROCESS_STACK] value [openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.20: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [Session] value [USK%3ABAC4DB1CADDA4009400096BD19DEA88F%2F%0C%14%0A%14%0B]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.20: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [prevSelectionspagecode.authorization.AdminLogon] value [{}]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.21: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [roles] value [[Manager, FullRep, PolAdminRep, loaderRunner, Agent, CustomerService.Level1Analyst, PolOwnerService.Level1Analyst, Approver, AgentFull, OfflineUser, PolOwnerService.ReadOnly]]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.22: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [authToken] value [mukul]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.22: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [roleID] value [FullRep]
  DEBUG [http-bio-8080-exec-1] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 16:38:30.23: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [prevSelectionspagecode.authorization.Roles] value [{rowTable=[ FullRep]}]
END PHASE INVOKE_APPLICATION 5 
```

什么也没有发生，控制台上没有错误没有消息。浏览器窗口显示它正在加载，但没有加载。

这个应用程序在 WAS 上运行良好。

任何帮助将不胜感激，这种行为的可能原因是什么？

不确定还需要什么其他信息，请询问您是否需要任何信息。

更新#1

`immediate = "true"`根据 maple_shaft尝试添加。

以下是堆栈跟踪

```
START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.410: ServiceDelegator : DEBUG : :Current Process Stack [[openSession.SelectRole]]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.411: ServiceDelegator : DEBUG : :Executing Invoke activity [SelectRole]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.411: ServiceDelegator : DEBUG : :invoking service action class [SET_ROLE]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.415: BaseServiceAction : DEBUG : :SetRole - Session Key used B9DB051D-8BF4-472D-4000-94BFA0965A49/mukul
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.415: java.lang.Class : DEBUG : :Executing findUserSession().
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.415: java.lang.Class : DEBUG : mukul:Executing persistActiveRoles(UserSession inputUserSession).
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.418: ServiceDelegator : DEBUG : mukul:Current Process Stack [[openSession.SelectRoleSuccess]]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.418: ServiceDelegator : DEBUG : mukul:Executing Invoke activity [SelectRoleSuccess]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.418: ServiceDelegator : DEBUG : mukul:invoking embedded process [coordinatorDesktop]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.418: ServiceDelegator : DEBUG : mukul:Current Process Stack [[openSession.SelectRoleSuccess, coordinatorDesktop.CoordinatorDesktop]]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logXML:260)  - 2013/02/15 18:41:27.418: ServiceDelegator : XML : mukul:process event final result [<process-step-result><outcome>coordinatorDesktop</outcome><result-params><has-errors><![CDATA[false]]></has-errors><error></error><PROCESS_STACK><![CDATA[openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$]]></PROCESS_STACK><PersistElements><roleID><![CDATA[FullRep]]></roleID></PersistElements><Session><![CDATA[USK:B9DB051D8BF4472D400094BFA0965A49/
]]></Session><SelectRoleActionResult><![CDATA[success]]></SelectRoleActionResult><successInd><![CDATA[success]]></successInd><outcome><![CDATA[success]]></outcome></result-params></process-step-result>]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.418: XMLUtils : DEBUG : mukul:node = error  NOT in XML <process-step-result><outcome>coordinatorDesktop</outcome><result-params><has-errors><![CDATA[false]]></has-errors><error></error><PROCESS_STACK><![CDATA[openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$]]></PROCESS_STACK><PersistElements><roleID><![CDATA[FullRep]]></roleID></PersistElements><Session><![CDATA[USK:B9DB051D8BF4472D400094BFA0965A49/
]]></Session><SelectRoleActionResult><![CDATA[success]]></SelectRoleActionResult><successInd><![CDATA[success]]></successInd><outcome><![CDATA[success]]></outcome></result-params></process-step-result>
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.420: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [systems] value [[CLIENT-DB, XMLG, CyberLifeWS, Hibernate, CyberLifeWS_VSAM, AWDnative]]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.420: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [User] value [mukul]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.420: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [ServletURL] value [http://localhost:8080/csa/servlet/Initializer]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.420: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [currSelectionspagecode.authorization.AdminLogon] value [{}]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [currSelectionspagecode.authorization.Roles] value [{rowTable= FullRep}]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [PROCESS_STACK] value [openSession.SelectRoleSuccess$$coordinatorDesktop.CoordinatorDesktop$$]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [Session] value [USK%3AB9DB051D8BF4472D400094BFA0965A49%2F%0C%14%0A%14%0B]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [roles] value [[Manager, FullRep, PolAdminRep, loaderRunner, Agent, CustomerService.Level1Analyst, PolOwnerService.Level1Analyst, Approver, AgentFull, OfflineUser, PolOwnerService.ReadOnly]]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [prevSelectionspagecode.authorization.AdminLogon] value [{}]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [authToken] value [mukul]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [prevSelectionspagecode.authorization.Roles] value [{rowTable=[ FullRep]}]
  DEBUG [http-bio-8080-exec-2] (com.csc.fs.logging.Log4JHandler:logDebug:145)  - 2013/02/15 18:41:27.421: pagecode.authorization.Roles : DEBUG : mukul:Persisted element [roleID] value [FullRep]
END PHASE APPLY_REQUEST_VALUES 2 
```

更新 #2：@BalusC 建议的调试步骤

我在第 594 行放了一个断点`FacesServlet#service()`，控制在这里停止。在进入它时，控制转到`LifecycleImpl#render()`第 128 行。有你`if`的分支，没有一个被评估为真，控制返回到`FacesServlet#service()`第`finally`612 行，然后调用`requestEnd()`。

更新#3：

怀疑在阶段`FacesContext#responseComplete()`期间被调用`Invoke_Application`。这是从`ExternalContextImpl#redirect()`行号 #578 调用的。while 在`redirect()`子句`else`中， ie `((HttpServletResponse) response).sendRedirect(requestURI);`被执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:42:18.943

现在问题与 JSF 无关，而是在`web.xml`.

约束不允许访问任何页面，因此浏览器卡住了。

但是非常感谢**Bauke Scholtz**的帮助

# android - 如何从android中录制的视频中获取视频名称？

> ID：14893831
> 
> 赞同：0
> 
> 时间：2013-02-15T11:35:02.640
> 
> 标签：android, listview, camera

我正在使用 android 相机开发一个简单的视频应用程序。在我的应用程序中，我有一个名为“制作视频”的按钮和一个列表视图，用于显示我的应用程序录制的视频名称。现在，当我单击按钮时，它会打开我的移动摄像头进行录制，但是当我完成录制时，摄像头会给我两个选项。“保存”和“丢弃”。现在通过单击“保存”选项，我想获取录制视频的名称并将其显示在我的列表视图中。请帮助我，我会非常感谢你。

您可以在下面查看我的代码。

```
ImageView iv;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        list =(ListView) findViewById(R.id.list);
        iv = (ImageView) findViewById(R.id.imageView1);
        Button makeVideo = (Button) findViewById(R.id.button1);
        makeVideo.setOnClickListener(new OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {
                //Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                Intent intent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
                startActivityForResult(intent, 0);

            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

//      Bitmap bm = (Bitmap) data.getExtras().get("data");
//      iv.setImageBitmap(bm);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:43:33.283

将文件路径传递给以下方法，它将给出文件名

```
public String getFileNameFromUrl(String path) {
        String[] pathArray = path.split("/");
        return pathArray[pathArray.length - 1];
    } 
```

请参阅以下链接以获取文件路径

[在android中使用默认相机获取捕获视频的视频路径](https://stackoverflow.com/questions/7756349/getting-the-video-path-of-capture-video-using-default-camera-in-android)

# php - (#120) 有时会抛出无效的专辑 ID

> ID：14893832
> 
> 赞同：2
> 
> 时间：2013-02-15T11:35:03.777
> 
> 标签：php, facebook, facebook-graph-api

在通过 PHP-SDK API 上传照片时，我抛出了异常：**(#120) Invalid album id**。一切似乎都很好，album_id 是正确的。有时有效，有时无效。是来自 Facebook 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:02:57.017

以下是所需的步骤，

1.  用户应该是页面管理员。
2.  用户应向应用授予“manage_pages”权限。
3.  应用程序应调用 graph/me/accounts 并迭代可用帐户以获取页面的 access_token。
4.  您继续上传到“/album_object_id/photos”。

您收到的错误消息显然具有误导性，或者您使用的访问令牌可能是静态的，因此要获取[访问令牌](https://developers.facebook.com/tools/access_token/)。

查看一些链接，

[将照片上传到 Facebook 相册](https://stackoverflow.com/questions/14726551/uploaded-photo-post-to-facebook-album/14726580#14726580)

[照片未使用图形 API 上传到 Facebook 相册](https://stackoverflow.com/questions/14536021/photo-not-upload-to-facebook-album-using-graph-api/14726787#14726787)

[Facebook cURL 以我的身份发帖？](https://stackoverflow.com/questions/10506060/facebook-curl-posting-as-me/10514420#10514420)

可能对你有帮助。

# android - Android：在主页按钮（或音量或键锁按钮）上启动应用程序单击

> ID：14893833
> 
> 赞同：2
> 
> 时间：2013-02-15T11:35:06.967
> 
> 标签：android, android-button

我的应用程序将在后端运行..

一旦我单击（或长按）主页按钮（或音量或键锁按钮）...我必须启动我的应用程序...

请帮我..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:39:53.833

无法覆盖android的主页按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:35:38.973

将您的应用程序设为主屏幕。这是单击主页按钮时启动应用程序的唯一方法。

# asp.net - 如何开发 P2P 聊天网页应用

> ID：14893835
> 
> 赞同：1
> 
> 时间：2013-02-15T11:35:09.533
> 
> 标签：asp.net, sockets, udp, chat, p2p

我正在开发基于 asp.net web 的点对点聊天应用程序。我正在使用 UDP 套接字进行通信。由于我的应用程序是 P2P，我应该避免与服务器交互并让对等方发送和接收他们的消息。

现在我的疑问是我应该在哪里编写与套接字相关的编码？如果我在控制器类中编写与套接字相关的编码，编码属于服务器端，对吗？每次用户从浏览器发送消息时，它都会调用定义了我的套接字的控制器类，并将消息发送到远程对等点。这种套接字编程（在控制器类中定义的套接字）会导致点对点应用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:46:26.473

在点对点通信中，您不通过服务器传递任何数据，而是让客户端直接相互通信。

在 Web 应用程序中，真正的 P2P 几乎是不可能实现的。您可以尝试在客户端上使用 javascript 和 HTML5 websocket 实现与点对点通信不完全不同的东西。

在这种情况下，您将使用您的 asp.net 服务器作为代理来设置客户端之间的连接。（因为您的服务器知道在哪里联系您的客户）。您的 javascript 客户端应该从那一刻起处理其余的通信业务。

# c# - 将文件上传到 IBM 大型机服务器导致文件不可读

> ID：14893838
> 
> 赞同：0
> 
> 时间：2013-02-15T11:35:16.170
> 
> 标签：c#, ftp

我正在将文件上传到 IBM 大型机服务器。一旦上传文件中的数据是不可读的，它看起来好像是压缩格式。我正在使用最新的 Chilkat FTP2 组件来上传文件。

我可以将相同的文件上传到我们的本地 FTP 服务器，并且该文件在 FTP 服务器上是可读的。我可以使用命令提示符将相同的文件上传到 IBM 大型机服务器，并且该文件在 FTP 服务器上是可读的。

我正在使用二进制传输模式。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:26:47.783

我敢打赌，这里的问题是字节序差异。在上传之前尝试将文件从小端转换为大端。

# c#-4.0 - 无法模拟 Windows 服务

> ID：14893844
> 
> 赞同：0
> 
> 时间：2013-02-15T11:35:30.140
> 
> 标签：c#-4.0, windows-services, impersonation

我在我的程序中使用模拟。我没有任何问题。但是，当我创建 Windows 服务时，我在模拟时遇到了异常。可能是什么问题？在我的帐户中，我可以成功应用模拟，但 Windows 服务在本地系统帐户上运行。这是个问题吗？

这是我的代码：

```
public enum SECURITY_IMPERSONATION_LEVEL : int
{
    SecurityAnonymous = 0,
    SecurityIdentification = 1,
    SecurityImpersonation = 2,
    SecurityDelegation = 3
}

public static WindowsImpersonationContext ImpersonateUser(string sUsername, string sDomain, string sPassword)
    {
        // initialize tokens
        IntPtr pExistingTokenHandle = new IntPtr(0);
        IntPtr pDuplicateTokenHandle = new IntPtr(0);
        pExistingTokenHandle = IntPtr.Zero;
        pDuplicateTokenHandle = IntPtr.Zero;

        // if domain name was blank, assume local machine
        if (sDomain == "")
            sDomain = System.Environment.MachineName;

        try
        {
            string sResult = null;
            const int LOGON32_PROVIDER_DEFAULT = 0;                
            const int LOGON32_LOGON_INTERACTIVE = 2;

            // get handle to token
            bool bImpersonated = LogonUser(sUsername, sDomain, sPassword,
                LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref pExistingTokenHandle);

            // did impersonation fail?
            if (!bImpersonated)
            {
                //Giriş yapılırken hata ile karşılaşıldı
                Helper.ShowErrorMsg(ErrorAndInfoMessages.ErrorOnLogon);
                return null;
            }

            // Get identity before impersonation
            sResult += "Before impersonation: " + WindowsIdentity.GetCurrent().Name + "\r\n";
            bool bRetVal = DuplicateToken(pExistingTokenHandle, (int)SECURITY_IMPERSONATION_LEVEL.SecurityImpersonation, ref pDuplicateTokenHandle);

            // did DuplicateToken fail?
            if (!bRetVal)
            {
                //DuplicateToken() failed
                Helper.ShowErrorMsg(ErrorAndInfoMessages.ErrorTokenFailed);
                return null;
            }
            else
            {
                // create new identity using new primary token
                WindowsIdentity newId = new WindowsIdentity(pDuplicateTokenHandle);
                WindowsImpersonationContext impersonatedUser = newId.Impersonate();

                // check the identity after impersonation
                sResult += "After impersonation: " + WindowsIdentity.GetCurrent().Name + "\r\n";
                return impersonatedUser;
            }
        }
        catch (Exception ex)
        {
            Helper.ShowErrorMsg("ImpersonateUser Hata: " + ex.Message);
            return null;   
        }
        finally
        {
            // close handle(s)
            if (pExistingTokenHandle != IntPtr.Zero)
                CloseHandle(pExistingTokenHandle);
            if (pDuplicateTokenHandle != IntPtr.Zero)
                CloseHandle(pDuplicateTokenHandle);                
        }
    } 
```

这是一个**例外：** 当应用程序未在 UserInteractive 模式下运行时显示模式对话框或表单不是有效的操作。指定 ServiceNotification 或 DefaultDesktopOnly 样式以显示来自服务应用程序的通知。

我还尝试使用我的帐户运行 Windows 服务，但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:41:21.190

尝试使用 LOGON32_LOGON_NETWORK = 3 而不是 LOGON32_LOGON_INTERACTIVE = 2。根据[MSDN](http://msdn.microsoft.com/en-us/library/aa378184%28VS.85%29.aspx)，LOGON32_LOGON_INTERACTIVE 适用于将交互使用计算机的用户，因此像 Windows 服务这样的无人值守进程可能会失败。

我们遇到了同样的问题，上述更改修复了它。

# sql - 如何将 CASE 语句重写为 SSIS 表达式？

> ID：14893845
> 
> 赞同：5
> 
> 时间：2013-02-15T11:35:37.720
> 
> 标签：sql, ssis, case-when

我有以下 SQL 查询，需要*`Derived Column Transformation`*在 SSIS 中使用。

```
CASE WHEN A IN (1,2,3) THEN "ABC"
ELSE "NA" END 
```

如何将此语句重写为 SSIS 表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T11:44:36.660

派生列表达式代码：

```
A == 1 || A == 2 || A == 3 ? "ABC" : "NA" 
```

它将检查 A 是否等于 1 或 2 或 3，如果是，则为“ABC”，否则为“NA”。

# c++ - 指向成员（偏移量）的数组作为 C++ 中的模板参数

> ID：14893847
> 
> 赞同：3
> 
> 时间：2013-02-15T11:35:39.103
> 
> 标签：c++, templates

我想要做的最好用一个例子来描述：

```
class A
{
    int f1();
    int f2();
    int f3();

    typedef int (A::*ptr)();

    constexpr static const ptr array[3] =
    {
            &A::f1,
            &A::f2,
            &A::f3,
    };

    template<ptr a[]>
    int sum()
    {
        int s = 0;
        for (int i = 0; i < 3; i++)
            s += (this->*a[i])();
    };

    int f4() { return sum<array>(); };
}; 
```

它显然不起作用，在 GCC 中给出以下输出（在模板实例化的行，定义似乎很好）：

```
main.cpp: In member function 'int A::sum()':
main.cpp:49:2: warning: no return statement in function returning non-void [-Wreturn-type]
main.cpp: In member function 'int A::f4()':
main.cpp:51:31: error: no matching function for call to 'A::sum()'
main.cpp:51:31: note: candidate is:
main.cpp:44:6: note: template<int (A::** a)()> int A::sum()
main.cpp:44:6: note:   template argument deduction/substitution failed:
main.cpp:51:31: error: could not convert template argument 'A::array' to 'int (A::**)()' 
```

（让我们忽略无意义的[问题]事实，即数组也应该在类之外声明为实际存在）

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T11:39:05.087

您忘记了确保 const 正确性。改成：

```
template<const ptr a[]>
         ~~~~~ 
```

# c# - 为什么“接口没有实现”？- C＃

> ID：14893849
> 
> 赞同：0
> 
> 时间：2013-02-15T11:35:43.980
> 
> 标签：c#, interface, implementation

我一直在阅读一些与多重继承和接口相关的代码理论。它在所有地方都说`interface is a class without implementation`。

1）没有在接口中实现方法/功能有什么用？是否支持在继承一个接口的不同类中对同一方法的多个实现？

2）那里的大多数代码示例似乎都显示了`void`接口方法。接口函数/方法总是`void`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:37:54.810

> 1）没有在接口中实现方法/功能有什么用？是否支持在继承一个接口**的不同类中对同一方法的多个实现？**

是的。

> 2）那里的大多数代码示例似乎都显示了 void 接口方法。**接口函数/方法总是无效的吗？**

一点都不。它可以返回任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:38:32.643

1）是的，你的想法是正确的。假设你有一个只有一些方法的接口`makeSound`。现在您可以在某个`Guitar`类和某个`Drums`类中实现该接口。你只需要在你的程序中知道你有一些实现的对象，`makeSound`这样你就可以调用那个方法。无需知道实际的输出/声音是什么。

对于 2) 否，接口可以包含具有任何签名的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:39:21.313

问题 1：是的，这是使用接口的原因之一。接口通常用作组件的 API。消费者可能不知道实际的实现，通过单元测试支持松散耦合和可测试性。

关于问题2：不，接口方法可以具有与类方法相同的方法签名。

# perl - Perl 分布式并行计算

> ID：14893851
> 
> 赞同：2
> 
> 时间：2013-02-15T11:35:44.910
> 
> 标签：perl, parallel-processing, distributed-computing, perl-module

我想知道是否有任何 perl 模块可用于启用类似于 apache hadoop 的分布式并行计算。

例如，当提交到客户端节点时，要在多台机器上并行执行的 perl 脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:59:35.633

我是 Perl 多核引擎的作者。

在接下来的几个周末，我将带着[MCE](https://metacpan.org/release/MCE)与[Gearman::XS](https://metacpan.org/release/Gearman-XS)一起兜风。MCE 擅长最大化给定节点上的可用内核。Gearman擅长工作分配，包括负载均衡等很多特性。将两者结合在一起是我在多个节点上水平扩展 MCE 的想法。:) 直到现在我才与任何人分享这个消息。

为什么这两个模块很合适（我的拙见）：

1.  对于分发，需要某种分块引擎。MCE 是一个分块引擎——因此分解输入对于 MCE 来说是很自然的。本质上，MCE 可以在工作提交主机以及工作节点上用于最大化可用内核的双方。

2.  对于工作节点，MCE 在处理输入数据时遵循银行排队模型。这有助于确保所有 CPU 从作业开始到最后都保持忙碌状态。当工人闲置时，剩余的“工作”正在处理他们的最后一块。

一个人的想象力是这里的极限——这两个模块一起工作有很多可能性。在编写 MCE 时，我首先关注的是节点方面。工作分配显然是下一个，我进行了搜索，发现了 Gearman::XS。这两个模块可以愉快地一起分块:) 作业分发端（更大的块），一次在节点上（更小的块）。所有网络的东西都由 Gearman 处理。

基本上，当 Gearman::XS 已经相当不错时，我无需编写作业分配方面的内容。这是我的计划。我很快就会写关于 Gearman::XS + MCE 的文章。

顺便说一句：我想人们可以用 GRID-Machine + MCE 做类似的事情。MCE 的优点在于最大化任何给定节点上的所有可用内核。

MCE 的另一个神奇之处在于，例如，人们可能不希望 200 个节点 * 16 个工作人员都从 NFS 服务器读/写。这将极大地影响 NFS 服务器。顺便说一句：RHEL 6.4 将包括 pNFS（并行 NFS）。使用 MCE，工作人员可以调用“do”方法来序列化来自 NFS 的写入/读取。因此，攻击 NFS 的次数不是 200 * 16 = 3200，而是在任何给定时间对 NFS 服务器的最大请求数仅为 200 个（每个物理节点 1 个）。

在编写 MCE 时，grace 可以应用于很多场景。[我需要在 code.google.com](http://code.google.com/p/many-core-engine-perl/)的 MCE 主页 MCE 中添加更多 wiki 。此外，MCE 会在早餐时吃掉非常大的日志文件 :) 查看[示例](https://metacpan.org/source/MARIOROY/MCE-1.404/examples)目录下的 egrep.pl 和 wc.pl。它甚至通过顺序 IO（在许多工作人员中强大的 slurp IO）击败了广泛的 finder 项目。

查看MCE 发行版中包含的[图像。](http://cpansearch.perl.org/src/MARIOROY/MCE-1.404/images/)哦，不要忘记查看主要的[Gearman](http://gearman.org/)网站。

这之后还剩下什么？嗯，网文。想到的一个想法是使用[Mojo](http://search.cpan.org/~sri/Mojolicious-3.87/)。有很多选择。这只是其中之一：

Gearman::XS + MCE + Mojolicious

同样，如果想通过 SSH 进行通信，可以使用 GRID-Machine 而不是 Gearman::XS。

无论如何，这是我使用已经可用的工作分配模块的计划。对于 MCE，我的重点是最大化单个节点上的性能——包括分块、序列化、银行排队模型、用户任务（允许多个角色）、工作人员之间的编号排序和顺序 slurp IO。

——马里奥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:26:04.000

您可能会研究像[ZeroMQ](https://metacpan.org/module/ZMQ)这样简单的消息队列。我确信[CPAN 搜索](https://metacpan.org)可以帮助您提供一些其他建议。

最近有一些关于 Many Core Engine [MCE](https://metacpan.org/module/MCE)模块的讨论，您可能想研究一下，我不确定它是否可以让您在主机上并行化，但似乎不会迈出很大的一步鉴于其既定目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T16:30:42.020

[Argon](http://argon.artfulcode.net)可能会提供您正在寻找的东西（免责声明 - 我是作者）。它允许您建立一个任意的工作人员网络，每个工作人员运行一个进程池（使用[Coro::ProcessPool](http://search.cpan.org/~jeffober/Coro-ProcessPool/lib/Coro/ProcessPool.pm)）。

创建任务非常简单：

```
use Argon::Client;

my $client = Argon::Client->new(host => "somehost", port => 8000);
my $result = $client->queue(sub {
    use My::Work::Module qw(do_work);
    my $task_id = shift;
    do_work($task_id);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T17:10:09.600

CPAN 上的`GRID`模块专为使用分布式计算而设计。

[https://metacpan.org/pod/distribution/GRID-Machine/lib/GRID/Machine/perlparintro.pod](https://metacpan.org/pod/distribution/GRID-Machine/lib/GRID/Machine/perlparintro.pod)

# c++ - 将成员函数分配为其他函数

> ID：14893855
> 
> 赞同：2
> 
> 时间：2013-02-15T11:36:02.030
> 
> 标签：c++, visual-c++, c++11

可以分配函数或更改其定义，就像通过派生类覆盖函数一样。

但是此时，它超出了类的范围。

我的意思是这样的：

```
//class.h

class MClass
{
public:

  void function(); // this is the function I am referring to.
}
//class.cpp

void MClass::function() { }

//file1.cpp
MClass mclass;

void globalFunction() { }

mclass.function = globalFunction; //is this even possible? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:55:15.540

你`function()`是一个真正的功能，而是你想要的`function Callback`。

见示例程序：[在ideone上](http://ideone.com/I68JQ1)

```
#include <functional>
class MClass
{
public:
  std::function<void(void)> func_ptr;

  void setFuncPtr(const std::function<void(void)>& ptr)
  {
    func_ptr = ptr;
  }

  void callFuncPtr()
  {
    func_ptr();
  }
}; 
```

您可以设置`func_ptr`为任何 callabe 对象

```
MClass m;
m.setFuncPtr(globalFunction);   // set to standalone function
m.callFuncPtr();

// set lambda to it
m.setFuncPtr([](){ std::cout << " do something " << std::endl; });
m.callFuncPtr(); 
```

或绑定到其他对象

```
 struct Test
 {
   void print() { std::cout << "Test::print" << std::endl; }
 };
Test t;
m.setFuncPtr(std::bind(&Test::print, t));
m.callFuncPtr(); 
```

您还可以使用 std::bind 和占位符将参数传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:41:06.737

有两种方法：

*   c++03 - 你可以使用函数指针：

    ```
    class MClass
    {
    public:

      void (*function)();
    };
    void globalFunction()
    {
      // ...
    }

    MClass obj;
    mclass.function = globalFunction; 
    ```

*   在 c++11 中，您可以使用仿函数：

    ```
    class MClass
    {
    public:

      std::function<void()> function;
    };
    void globalFunction()
    {
      // ...
    }

    MClass obj;
    mclass.function = globalFunction; 
    ```

# userid - Sharepoint 2013 应用程序用户指南

> ID：14893856
> 
> 赞同：0
> 
> 时间：2013-02-15T11:36:03.100
> 
> 标签：userid, sharepoint-2013

我在 SP App 2013 中获取 Sharepoint 用户 ID (GUID) 时没有什么问题。到目前为止，我正在使用 Sharepoint 的 userProfile 类 (SP.UserProfile.js) 获取 Sharepoint 用户的电子邮件地址和他的全名。

我需要获取我们说 GUID 的用户的唯一 id。我为此使用了下面的代码，但是每次我得到随机的所谓的同一用户的 Guid。（ehich 绝对不是用户的唯一 id）。如何获取每次登录时唯一的 sharepoint 用户 ID。

请帮忙！

谢谢

这是我的代码片段

```
 var targetUser;
    var userProps;
    var contxt_web = null;
    var clientContext = new SP.ClientContext.get_current();

    /** Get id of Current SP User*/

    contxt_web = clientContext.get_web();      
    clientContext.load(contxt_web);

    /***/

    peopleManager = new SP.UserProfiles.PeopleManager(clientContext);      

    userProps = peopleManager.getMyProperties(targetUser);

    clientContext.load(userProps);
    clientContext.executeQueryAsync(onRequestSuccess, onRequestFail);

}

function onRequestSuccess() {

    var messageText = "Name : " + userProps.get_displayName()
                               + " Sharepoint-ID : " + contxt_web.get_id()
                               + " Email : " + userProps.get_email();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:00:34.210

尝试使用 userprops.get_userId ，它可能有效..

# output - 是否可以让 SPSS 仅显示输出中重要的值？

> ID：14893859
> 
> 赞同：1
> 
> 时间：2013-02-15T11:36:06.457
> 
> 标签：output, spss, simplify

是否可以在 SPSS 的输出中仅显示显着的*P值和/或 R 值？*

这将显着简化输出并减少表格以仅显示相关部分（我需要的部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:05:44.260

我不确定这是不是一个好主意，但如果您想做一些事情，例如在回归中突出显着系数或在相关矩阵中消除不显着的相关性，SPSSINC MODIFY OUTPUT 扩展命令可以做到这一点。它包含在 Python Essentials for SPSS Statistics 中，可以从 SPSS 社区站点 www.ibm.com/developerworks/spssdevcentral 下载，或者对于 V21，可以从保存 Statistics 以供下载的同一站点或试用站点下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:12:27.197

我同意在很多情况下这不是一个好主意。

一般来说，我发现 SPSS 输出表的后处理有点尴尬。这是 R 更容易使用的一个领域。

对于偶尔的分析，我经常发现将 SPSS 输出表粘贴到 Excel 中以进行进一步处理很有用。例如，您可以按大小对列进行排序（例如，平均差、p 值、r 等），计算新值（例如，平均差、绝对相关等），使表格更易于阅读等。

# java - Android/Arduino 蓝牙通讯

> ID：14893860
> 
> 赞同：1
> 
> 时间：2013-02-15T11:36:11.333
> 
> 标签：java, android, arduino

链接成功建立并能够发送数据。

每当我们更改它时，Android 都会发送 SeekBar 数据。

```
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    if(seekBar.getId() == R.id.seekBar)
    {
        speed.setText(String.valueOf(progress));
        String outputData = String.valueOf(progress);
        streams.write(outputData.getBytes());
    }
} 
```

`streams.write()`将数据写入`OutputStream`.`Socket`

问题出在数据格式上。如果我发送'25' arduino 正在接收'2'，'5' `Serial.read()`。

数据的格式是什么，什么时候`outputData`转换成字节？一切都由 终止`\0`吗？

我需要检索整个数字而不是单个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:44:44.163

对于发送方，getBytes() 不会返回带有空终止符的 C 字符串。在 Java 中，数组包含有关其长度的信息。所以 byte[] 包含它的长度；它不像 C char[] 使用 null 来指示数组的结尾。如果要翻译出站数据，则需要自己添加终止符：

```
String outputData = String.valueOf(progress);
streams.write(outputData.getBytes());
streams.write('\0'); 
```

请注意，如果字符集默认编码在 Android 端发生更改，getBytes() 可能会完全崩溃。在不同的 Android 设备上，getBytes() 可以返回 Arduino 无法解码的 unicode 字符集编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:53:42.830

arduinoboard 似乎逐字节读取 RX-Stream。如果您发送“25”，它会传输字符“2”的 ascii 字节（即 0x32/十进制 50），然后是字符“5”的 ascii 表示（即 0x35/十进制 53）。arduino 将这些数字解释为字符。因此，如果您要传输的数字低于 256，您可以执行以下操作： 在 Android 上：

```
if(seekBar.getId() == R.id.seekBar)
    {
        speed.setText(String.valueOf(progress));
        if(progress<256)
            streams.write((byte)progress);
    } 
```

为确保 Arduino 正确解释它，请将接收到的字符用作短字符而不是字符。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:41:59.627

您有一个 int，将其转换为字符串并发送字符串：

```
 String outputData = String.valueOf(progress);
 streams.write(outputData.getBytes()); 
```

[发送 int](http://developer.android.com/reference/java/io/OutputStreamWriter.html#write%28int%29)怎么样：

```
streams.write( progress ); 
```

在 Arduino 端[`Serial.read()`](http://arduino.cc/en/Serial/read)一次读取一个字节，所以（假设在线上的大字节序）你可以这样做

```
int incomingByte = Serial.read();
incomingByte <<= 8;
incomingByte |= Serial.read(); 
```

干杯，

# asp.net-mvc - MVC 表单多部分/表单数据未正确呈现

> ID：14893862
> 
> 赞同：0
> 
> 时间：2013-02-15T11:36:12.480
> 
> 标签：asp.net-mvc, razor

这是我的看法。我正在尝试进行文件上传控制。

```
@section termimalContent {
  @using (Html.BeginForm("Add", "Terminals_Policies", "multipart/form-data"))
  {
    @Html.ValidationSummary(true)
    <fieldset>
      <legend>
        <h2>
            Create new policy</h2>
      </legend>
      <p>
        <strong>Assigning devices to Node:</strong> @Model.GroupName</p>
      <div class="editor-label">
        @Html.LabelFor(model => model.PolicyName)
      </div>
      <div class="editor-field">
        @Html.EditorFor(model => model.PolicyName)
        @Html.ValidationMessageFor(model => model.PolicyName)
      </div>
      <div class="editor-label">
        @Html.LabelFor(model => model.PolicyType)
      </div>
      <div class="editor-field">
        @Html.DropDownListFor(model => model.SelectedItems, new SelectList(Model.PolicyType, "Value", "Text"))
        @Html.ValidationMessageFor(model => model.SelectedItems)
      </div>
      <div class="editor-label">
        <label for="file1">
          Filename:</label>
      </div>
      <div class="editor-field">
        <input type="file" name="files" id="file1" />
      </div>
      <div class="editor-label">
        <label for="file2">
          Filename:</label>
      </div>
      <div class="editor-field">
        <input type="file" name="files" id="file2" />
      </div>
      @Html.HiddenFor(model => model.GroupId)
      @Html.HiddenFor(model => model.GroupName)
      <p>
        <input type="submit" value="Create" />
      </p>
    </fieldset>
  }
} 
```

但 html 被呈现为：

```
<form action="/Terminals_Policies/Add/1?Length=19" id="form0" method="post"> 
```

任何人都知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:40:38.707

尝试：

```
@using (Html.BeginForm("Add", "Terminals_Policies", FormMethod.Post,new{enctype="multipart/form-data"})) 
```

因为它应该是格式

```
Html.BeginForm(action, controller, FormMethod.Post, new { enctype="multipart/form-data"}) 
```

# xml - 将特定的 XML 解析为 CSV 格式

> ID：14893866
> 
> 赞同：1
> 
> 时间：2013-02-15T11:36:24.697
> 
> 标签：xml, bash

我如何使用一些 bash/shell 脚本来转换这个输入

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<runJobReturn xmlns="http://xml.org" xmlns:ns1="http://xml.org" xsi:type="ns1:runJobReturn">
    <ns1:item xsi:type="ns1:ArrayOf_xsd_string">
        <ns1:item xsi:type="xsd:string">15-02-2013</ns1:item>
        <ns1:item xsi:type="xsd:string">Benjamin</ns1:item>
        <ns1:item xsi:type="xsd:string">MASSY</ns1:item>
    </ns1:item>
    <ns1:item xsi:type="ns1:ArrayOf_xsd_string">
        <ns1:item xsi:type="xsd:string">15-02-2013</ns1:item>
        <ns1:item xsi:type="xsd:string">Ronald</ns1:item>
        <ns1:item xsi:type="xsd:string">MASSY</ns1:item>
    </ns1:item>
    <ns1:item xsi:type="ns1:ArrayOf_xsd_string">
        <ns1:item xsi:type="xsd:string">15-02-2013</ns1:item>
        <ns1:item xsi:type="xsd:string">Zachary</ns1:item>
        <ns1:item xsi:type="xsd:string">MASSY</ns1:item>
    </ns1:item>
    <ns1:item xsi:type="ns1:ArrayOf_xsd_string">
        <ns1:item xsi:type="xsd:string">12</ns1:item>
        <ns1:item xsi:type="xsd:string">13</ns1:item>
    </ns1:item>
    <ns1:item xsi:type="ns1:ArrayOf_xsd_string">
        <ns1:item xsi:type="xsd:string">12</ns1:item>
        <ns1:item xsi:type="xsd:string">13</ns1:item>
    </ns1:item>
</runJobReturn>
</soapenv:Body> 
```

对此输出：

```
15-02-2013|Benjamin|MASSY
15-02-2013|Ronald|MASSY
15-02-2013|Zachary|MASSY
12|13
12|13 
```

输入来自 curl。我尝试使用 sed ： echo $INP | tr -d "\n" | sed -e 's/<[^>]*>/\n/g' 但在输出中仍然在值之间乘以新行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:57:26.747

你真的不应该使用[正则表达式来解析 XML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。在 bash 中运行 XSLT 同样容易。

我建议从命令行运行 Java 版本的Saxon [-](http://www.saxonica.com/documentation/using-xsl/commandline.xml) [HE](http://saxon.sourceforge.net/#F9.4HE) (XSLT 2.0) 或运行[XMLStarlet](http://xmlstar.sourceforge.net/) (XSLT 1.0)。

例子：

**XSLT 2.0**（撒克逊）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns1="http://xml.org">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="ns1:runJobReturn/ns1:item">
        <xsl:value-of select="ns1:item" separator="|"/>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

**XSLT 1.0**（XMLStarlet、Saxon、Xalan 等）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns1="http://xml.org">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="ns1:runJobReturn/ns1:item">
        <xsl:apply-templates select="ns1:item"/>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <xsl:template match="ns1:item">
        <xsl:if test="not(position()=1)">
            <xsl:text>|</xsl:text>
        </xsl:if>
        <xsl:value-of select="."/>
    </xsl:template>

</xsl:stylesheet> 
```

这些样式表中的任何一个，应用于您的输入 XML，都会产生您想要的输出：

```
15-02-2013|Benjamin|MASSY
15-02-2013|Ronald|MASSY
15-02-2013|Zachary|MASSY
12|13
12|13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:21:47.107

这是一个快速的 awk 单行代码：

```
echo $INP |awk -F '[<>]' '$2 ~ "xsd:string" {row = row "|" $3} $2 == "/ns1:item" {print substr(row, 2) ; row = ""}' 
```

# javascript - Angular js指令在表单中未保存数据时显示浏览器后退按钮的警报

> ID：14893867
> 
> 赞同：1
> 
> 时间：2013-02-15T11:36:25.577
> 
> 标签：javascript, angularjs, angularjs-directive

我是 angularjs 的新手。当表单有未保存的数据并且用户按下浏览器后退按钮时，有什么方法可以显示警报。任何有关如何实现这一目标的指针将不胜感激。

**更新： ：**

```
 angular.module('myApp.directives', []).directive('confirmOnExit', function() {
    return {
        link: function($scope, elem, attrs) {

            $scope.$on('$locationChangeStart', function(event, next, current) {

                if ($scope.myForm.$dirty) {
                    if(!confirm("Ahh the form is dirty, do u want to continue?")) {
                        event.preventDefault();
                    }
                }
            });

            window.onbeforeunload = function(){
                alert('me');
                if ($scope.myForm.$dirty) {
                    return "The Form is Dirty.";
                }
            }
        }
    };
}); 
```

**更新代码**

```
 angular.module('myApp.directives', []).directive('confirmOnExit', function () {
    return {
        link: function ($scope, elem, attrs, $rootScope) {
            window.onbeforeunload = function () {
                if ($scope.myForm.$dirty) {
                    return " do you want to stay on the page?";
                }
            }

            $rootScope.$watch(function {
                return $location.path();
            },

            function (newValue, oldValue) {
                if (newValue != oldvalue) {
                    // here you can do your tasks
                } else {}
            },
            true);

            $scope.$on('$locationChangeStart', function (event, next, current) {
                if ($scope.myForm.$dirty) {
                    if (!confirm("The form is dirty, do you want to stay on the page?")) {
                        event.preventDefault();
                    }
                }
            });
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:18:05.100

是的，我刚刚在几分钟前向另一个用户提供了这个[答案，在根范围级别创建一个监视以捕捉位置变化：](https://stackoverflow.com/questions/14890784/fire-a-callback-when-route-is-changed-animations-loaders-stacking-different-v/14893923#14893923)

```
$rootScope.$watch(function() { // fixed function declaration
   return $location.path();
   },  
   function(newValue, oldValue) {  
      if (newValue != oldValue) { // Update: variable name case should be the same
         // here you can do your tasks
      }
      else {
      }
   },
   true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T15:59:55.183

正如您所发现的，您可以编写一个自定义指令来监视更改。您更新的代码正在按计划进行，但是您可以做一些改进：

1.  您的指令按名称引用表单，这限制了它的可重用性。例如，如果您想在名为 的表单上使用相同的指令`myOtherForm`怎么办？当前使用`$scope.myForm.$dirty`限制了这种灵活性。相反，更好的方法是在链接函数中绑定到 formController。

2.  真的不需要看`$location.path()`，因为绑定到`$locationChangeStart`会做同样的事情。

我编写了一个 angularjs 指令，您可以使用我上面讨论过的方法。@see [https://github.com/facultymatt/angular-unsavedChanges](https://github.com/facultymatt/angular-unsavedChanges)

希望您发现此指令内容丰富。随意学习它，甚至在您的项目中使用它。

# java - 在系统中添加另一个计数器

> ID：14893868
> 
> 赞同：0
> 
> 时间：2013-02-15T11:36:28.047
> 
> 标签：java, android, button, count

我在这个项目中有一个计数器，它全部工作，但我试图在屏幕底部放置另一个计数器，它会做同样的事情，但会在另一个计数上工作。所以会有两个计数器计数不同，但我无法让它工作。

**xml代码：**

```
<TextView
    android:id="@+id/TextViewCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/ButtonCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TextViewCount"
    android:layout_alignRight="@+id/TextViewCount"
    android:layout_marginBottom="22dp"
    android:text="Count" /> 
```

**主要代码：**

```
package com.example.counter;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
 // Private member field to keep track of the count
 private static int mCount = 0;

private TextView countTextView;
private Button countButton;
public static final String PREFS_NAME = "com.example.myApp.mCount";
private SharedPreferences settings = null;
private SharedPreferences.Editor editor = null;

    /** ADD THIS METHOD **/
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);  
      setContentView(R.layout.main);
      countTextView = (TextView) findViewById(R.id.TextViewCount);
      countButton = (Button) findViewById(R.id.ButtonCount);

      countButton.setOnClickListener(new View.OnClickListener() {
          public void onClick(View v) {
              mCount++;
              countTextView.setText("Count: " + mCount);
              editor = settings.edit(); 
              editor.putInt("mCount", mCount);
              editor.commit();
          }
      });
    settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

     }

    @Override
    public void onPause() {
      super.onPause();  
    }

    @Override
    public void onResume() {
      super.onResume();  
      mCount = settings.getInt("mCount", 0);
      countTextView.setText("Count: " + mCount);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:50:48.863

您需要线程来执行此任务，每个计数器必须在单独的线程中运行。

做这样的事情：

```
Thread t = new Thread(new Runnable(){

   public void run() {
      Thread.sleep(1000);
      counter++;
   }
});
t.start(); 
```

或使用 AsyncTask

**更新：**

制作另一个计数器和两个线程变量：

```
private static int mCount2 = 0;
private static Thread mT1, mT2; 
```

那么你需要一个方法，像这样：

```
private void startCounter(Thread t, counter) {
   t = new Thread(new Runnable(){

      public void run() {
         while(true) {
            Thread.sleep(1000);
            counter++;
         }
      }
   });
t.start();
} 
```

您可以在 onclick-method 中为每个带有计数器的线程调用此方法，然后您只需在 onPause 方法中停止线程：

```
@Override
public void onPause() {
  super.onPause();  
  mT1.stop();
  mT2.stop();
} 
```

也许您需要 if 子句来测试线程是否正在运行。

# iphone - iphone ansi c：未分配被释放的指针

> ID：14893872
> 
> 赞同：0
> 
> 时间：2013-02-15T11:36:36.433
> 
> 标签：iphone, c, pointers, memory, structure

我在我的 iPhone 应用程序中使用 ac lib。c lib 是由我无权访问的人编写的。

但是，我收到对象 0xa6000d 正在被释放但未分配的错误。调试变量截图在这里。

![在此处输入图像描述](../Images/3f12cad12cf9d0d6baa1a592781373ee.png)

struct GtsMsg 定义为，

```
struct msg {
    int offset;
    int dataLength;
    u8* data;
    cBool expandable;
    cBool owned;
    u8* mid2key;
};

#define GtsMsg struct msg

void freeMessageData(GtsMsg* msg) {
    if (msg == NULL) return;
    if (msg->owned) {
        if (msg->data != NULL) {
            free(msg->data);
        }
    }
    free(msg->mid2key);
    memset(msg, 0, sizeof(GtsMsg));
} 
```

malloc_error_break 的断点是**free(msg->data) 行。**

我添加了检查 if (msg->data != NULL)，但它不起作用。有什么方法可以检查 msg->data 或 msg 的内存是否已分配？

您认为 *data = (u8)'\0' 处有什么可疑之处吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:21:08.527

感谢大家的建议。感谢 hmjd 的提示。

我发现该结构用于 cpp 类中，该类的析构函数调用 freeMessageData。但我找不到该结构已初始化。因此，如果我在声明中将结构初始化为 NULL，则可以避免空闲内存问题并且不会崩溃。

这是 simonc 建议的。如果他将其写为答案，请发表评论，我可以接受。

从评论中`hmjd`，

> 检查 NULL 是没有用的，因为如果传递给它的指针是 NULL，free() 将是一个空操作。仅仅因为一个指针不是 NULL 并不意味着它指向一个有效的内存位置（内存可能已经被释放或者指针从未初始化为 NULL）。程序员有责任在尝试释放指针之前确保指针有效。

# regex - 正则表达式匹配一组排列

> ID：14893874
> 
> 赞同：0
> 
> 时间：2013-02-15T11:36:38.447
> 
> 标签：regex

我想在满足这些条件的各种排列顺序下为字符串标记匹配

1) 两个字母 's','t' 应该出现一次且只出现一次

2) 字母 'n','o','p' 中的任何一个都可以出现零次或一次

是否有适合此目的的正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:40:07.517

你可以使用这个正则表达式

```
 ^(?=[^s]*s[^s]*$)(?=[^t]*t[^t]*$)(?=[^n]*n?[^n]*$)(?=[^o]*o?[^o]*$)(?=[^p]*p?[^p]*$).*$
  ----------------                -----------------                
         |                                 |->matches further only if there is 0 or 1 occurance of n
         |
         |->matches further only if there is a single occurance of s 
```

使用`singleline`或`dotall`选项与正则表达式

# c++ - 未启用 C++ SSE3 指令集

> ID：14893875
> 
> 赞同：4
> 
> 时间：2013-02-15T11:36:41.180
> 
> 标签：c++, compiler-errors, sse3

我正在尝试使用来自的 HMMlib 库在 C++ 中处理一些隐藏的马尔可夫代码

```
http://www.cs.au.dk/~asand/?page_id=152 
```

我正在使用带有 gcc / g++ 4.6 的 ubuntu 12.04

我的编译步骤指令是：

```
g++ -I/usr/local/boost_1_52_0 -I../ MAIN.cpp 
```

这会产生以下错误：

```
In file included from ../HMMlib/allocator_traits.hpp:25:0,
             from ../HMMlib/hmm_table.hpp:25,
             from MAIN.cpp:1:
/usr/lib/gcc/i686-linux-gnu/4.6/include/pmmintrin.h:32:3: error: #error "SSE3      instruction set not enabled"
In file included from ../HMMlib/hmm_table.hpp:25:0,
             from MAIN.cpp:1:
../HMMlib/allocator_traits.hpp:50:33: error: ‘__m128d’ was not declared in this scope
../HMMlib/allocator_traits.hpp:50:40: error: template argument 2 is invalid
../HMMlib/allocator_traits.hpp:77:32: error: ‘__m128’ was not declared in this scope
../HMMlib/allocator_traits.hpp:77:38: error: template argument 2 is invalid
In file included from ../HMMlib/hmm_table.hpp:26:0,
             from MAIN.cpp:1:
../HMMlib/operator_traits.hpp:112:32: error: ‘__m128d’ was not declared in this scope
../HMMlib/operator_traits.hpp:112:39: error: template argument 2 is invalid
../HMMlib/operator_traits.hpp:205:31: error: ‘__m128’ was not declared in this scope
../HMMlib/operator_traits.hpp:205:37: error: template argument 2 is invalid
In file included from ../HMMlib/hmm_table.hpp:27:0,
             from MAIN.cpp:1:
../HMMlib/float_traits.hpp:37:13: error: ‘__m128’ does not name a type
../HMMlib/float_traits.hpp:43:13: error: ‘__m128d’ does not name a type
In file included from ../HMMlib/hmm.hpp:34:0,
             from MAIN.cpp:3:
../HMMlib/sse_operator_traits.hpp:63:35: error: ‘__m128’ was not declared in this scope
../HMMlib/sse_operator_traits.hpp:63:41: error: template argument 2 is invalid
../HMMlib/sse_operator_traits.hpp:95:36: error: ‘__m128d’ was not declared in this scope
../HMMlib/sse_operator_traits.hpp:95:43: error: template argument 2 is invalid 
```

我完全不知道这些错误是什么意思，以及如何解决它们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T11:40:37.277

您必须使用命令行选项启用 gcc 的 sse3 内在函数。尝试编译

```
g++ -msse3 -I/usr/local/boost_1_52_0 -I../ MAIN.cpp 
```

或由处理器选择指令集

```
g++ -march=core2 -I/usr/local/boost_1_52_0 -I../ MAIN.cpp 
```

回复您的评论：`-march=native`选择您当前正在运行的处理器的指令集。

[请注意，`-msse3`已经选择了它的子集`-msse2`和`-msse`]

# .net - MVC 内的 N 层

> ID：14893878
> 
> 赞同：0
> 
> 时间：2013-02-15T11:36:52.103
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, n-tier-architecture

我正在从 web 表单迁移到 MVC，我有点迷路了。[MVC Vs n 层架构](https://stackoverflow.com/questions/698220/mvc-vs-n-tier-architecture)几乎回答了我的问题，但并不完全正确。

在 Web 表单中，我通常会在我的解决方案下使用 3 个项目来构建我的网站；UI、BLL 和 DAL，也许还有一个用于测试（我相信这是常见的做法）。

现在我正在启动 MVC3，看来我不需要根据 Visual Studio 为我布置的方式将 3 分开。

MVC 是设计用于运行多个项目还是应该只运行一个项目？Web 表单似乎适合 N-Tier 应用程序，尽管我可以通过删除我的 Models 文件夹并将其移动到我的 DAL 并删除我的 Controller 文件夹并将其移动到我的 BLL 来制作我的 MVC N-Tier 似乎我是与 MVC 想要我做的事情作斗争（或者可能只是 Visual Studio 的设置方式）？或者可能保持模型和控制器原样，但在模型文件夹中创建一个“视图模型”，并且控制器与 BLL 进行大部分逻辑对话？任何指针都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:50:02.620

MVC 只是一种表示模式，因此它只说明了您应该如何构建表示逻辑。它没有说明数据访问模式或您如何构建业务域。

我倾向于在 Web 项目 (MVC)、模型（域）项目以及数据访问和/或服务项目中构建我的 Web 应用程序，具体取决于应用程序。我总是在 web 项目中删除我的 Models 文件夹，因为我不想在那里。我所有的域模型和视图模型都存在于模型项目中。

关于控制器，控制器应该只是用户想要做什么（请求）的翻译器，因此模型和视图可以相应地响应（响应）。即控制器应该很薄，以至于您几乎没有注意到它。控制器应该包含用于选择模型和显示什么视图的逻辑。所有其他逻辑都属于模型。

此外，视图应该只包含非常简单的表示逻辑，如 ifs 和 foreaches，但条件应该在视图模型中准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:20:02.073

MVC 模型仅适用于 UI。您可以继续使用与以前相同的关注点分离。

在我们的项目中，我们将网站层和视图模型保留在 Web 项目中。我们使用 WCF 服务进行数据访问（这将对应于您的 DAL）。弥合差距是一个逻辑项目（这将对应于您的业务逻辑），其中包含对服务的客户端访问以及从服务结果到视图模型需要发生的任何转换。

我们的控制器和视图模型都很薄。逻辑位于逻辑层和保持分离的域模型中。我们通常会在服务合同（在您的情况下为 DAL）和视图模型之间共享域模型，但视图模型从不直接公开域模型。

我希望这有帮助。

# javascript - 隐藏多轴highstock，填补空白

> ID：14893882
> 
> 赞同：1
> 
> 时间：2013-02-15T11:36:55.993
> 
> 标签：javascript, html, highcharts, highstock

我正在构建一个演示图表，其中 highstock 显示 4 轴，每侧两个[http://jsbin.com/oyicuc/3/edit](http://jsbin.com/oyicuc/3/edit)

当您单击图例中的系列并让图表填充剩余空间时，我希望轴隐藏。我在 y 轴上使用了 showempty: false 属性，这适用于外轴，但如果你隐藏内轴，那么它所在的间隙仍然存在。

有人知道这是否可以做到吗？提前致谢

# c# - 从 xsd 文件的命名空间中删除前缀

> ID：14893883
> 
> 赞同：0
> 
> 时间：2013-02-15T11:37:19.820
> 
> 标签：c#, xsd, xml-namespaces

我是 XSD 的新手。

```
<xs:schema id="test"
    targetNamespace="http://tempuri.org/test.xsd"
    elementFormDefault="qualified"
    xmlns:bb="http://tempuri.org/test.xsd"        
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
> 
```

字段如下

bb：名字

bb:年龄

bb：位置

我需要从命名空间中删除 'bb' 使其变为 xmlns="........." 并且我需要从字段名称中删除 'bb:' 以及使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:56:14.920

```
xsdString.Replace("xmlns:bb=", "xmlns=").Replace("<bb:", "<").Replace("</bb:", "</") 
```

# html - 初始规模，媒体查询

> ID：14893889
> 
> 赞同：0
> 
> 时间：2013-02-15T11:37:41.797
> 
> 标签：html, css, media-queries

我有一个本机移动网站，它应该适用于不同的视口大小，但我不想通过媒体查询更改属性，我只想更改网站的初始规模。

如何更改不同视口大小的初始比例？与媒体查询一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:52:09.453

你可以用javascript做到这一点，我做了类似的事情：

```
 if (document.documentElement.clientWidth < 480) {
            document
                .querySelector("meta[name=viewport]")
                .setAttribute('content', 'initial-scale=0.4', 'maximum-scale=0.4', 'width=768');
        }; 
```

这是一个专为 iPad 设计的网站，但我希望它可以扩展到 iPhone 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:25:01.897

可能最常见的设置“初始比例”的方法是指示浏览器使用设备的宽度作为视口的宽度：

```
<meta name="viewport" content="width=device-width" /> 
```

为了继续您的次要问题，是的，通过设置相对于设备宽度的视口宽度，这显然适用于不同的视口大小，并且与媒体查询兼容。

本文提供了更多详细信息： http: [//tech.bluesmoon.info/2011/01/device-width-and-how-not-to-hate-your.html](http://tech.bluesmoon.info/2011/01/device-width-and-how-not-to-hate-your.html)

# sql - 如何获取从 sql server 2008 导出的 csv 表或文本文件的数据类型

> ID：14893891
> 
> 赞同：0
> 
> 时间：2013-02-15T11:37:44.413
> 
> 标签：sql, sql-server, odbc

如何在批量导出时获取从 SQL Server 导出为 txt 或 csv 文件的表的数据类型详细信息？

任何人都可以请建议我这...

谢谢，哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:05:42.403

使用[格式文件](http://msdn.microsoft.com/en-us/library/ms190393.aspx)：

> 将数据批量导入 SQL Server 表或从表批量导出数据时，可以使用格式文件存储批量导出或批量导入数据所需的所有格式信息。这包括与该表相关的数据文件中每个字段的格式信息。

# php - PHP文件上传安全

> ID：14893906
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:38:56.727
> 
> 标签：php

我使用文件扩展名来验证上传文件，如 word excel pdf 等？

但是如果用户更改他们的文件扩展名，那么他们可以上传他们想要的任何文件。

如果用户更改其文件扩展名之后他们应该无法上传文件，我想检查文件类型。

任何人都可以帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:47:17.777

您还应该检查 mimetypes，例如：

```
$allowedMimes = array('image/gif', 'image/jpeg', 'image/jpg', 'image/png', 'image/bmp', 'image/wbmp');

//getting the mime type (it can be different from the extension) Be careful!
$imgInfo = getimagesize(imagePath);
$type = strtolower($imgInfo['mime']);

//hey dude!! This is a fake image!!
if(!in_array($type, $allowedMimes)){
    //We delete it!!
    unlink(imagePath);
}else{
    //do whatever with the image...
} 
```

[您可以在此处](http://www.iana.org/assignments/media-types)找到有关 mime 类型的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:58:00.037

为了安全

**无论类型如何，将所有文件移出 webroot。**

*   不允许直接访问文件，如果您有下载功能，请使用加载程序将文件发送给用户。
*   强制下载

有一个脚本，download.php 或其他，获取文件的 ID，验证谁登录，如果一切正常，获取文件，将其读出到浏览器，并发送适当的下载标题。

```
header('Content-type: application/octet-stream');
header('Content-disposition: attachment; filename=file.ext');
header("Content-Length: " . filesize('../not_in_web_root/file.ext'));
header("Content-Transfer-Encoding:  binary");
readfile('../not_in_web_root/file.ext');
exit; 
```

*   仅通过检查扩展名和 mimetype 来接受您想要接受的文件。只要您不允许它执行或让用户直接访问它，甚至可以接受 php。

如果您只允许图像，则使用类似的函数`getimagesize()`，如果它的大小是图像，但仍然不允许直接访问它，因为 PHP 可能嵌入其中。

如果您向用户提供文件系统功能，请根据数据库中的值而不是访问真实文件，将其设为虚拟功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:45:16.693

您可以查看文件的 MIME 类型吗？[http://us2.php.net/manual/en/fileinfo.constants.php](http://us2.php.net/manual/en/fileinfo.constants.php)

# sql - SQL - STDEVP 或 STDEV 以及如何使用它？

> ID：14893912
> 
> 赞同：37
> 
> 时间：2013-02-15T11:39:06.223
> 
> 标签：sql, sql-server, tsql, stdevp, stdev

我有一张桌子：

```
LocationId OriginalValue Mean
1          0.45         3.99  
2          0.33         3.99
3          16.74        3.99
4          3.31         3.99 
```

等等……

我将如何计算`Standard Deviation`使用此表以及您会推荐什么 -`STDEVP`或`STDEV`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-15T11:51:44.303

要使用它，只需：

```
SELECT STDEVP(OriginalValue)
FROM yourTable 
```

从下面，您可能想要`STDEVP`.

从[这里](http://social.msdn.microsoft.com/Forums/br/sqlanalysisservices/thread/0d8edea2-f08e-41b7-b120-8ac08855c23b)：

> **当被评估的数字组只是整个人口的**部分抽样时，使用****STDEV 。**除以平方偏差总和的分母是 N-1，其中 N 是观察数（数据集中项目的计数）。从技术上讲，减去 1 被称为“无偏”。**
> 
>  ****当被评估的数字组完成时使用**STDEVP - 它是****整个**值群。在这种情况下，不减去 1，除以平方偏差和的分母只是 N 本身，即观察数（数据集中的项目数）。从技术上讲，这被称为“有偏见的”。记住 STDEVP 中的 P 代表“人口”可能会有所帮助。由于数据集不仅仅是一个样本，而是由所有的实际值组成，这个标准差函数可以返回更精确的结果。****

 ***** * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-15T11:56:36.110

通常，`STDEV`当您必须根据样本估计标准偏差时，您应该使用。但是，如果您将整个列数据作为参数给出，则使用`STDEVP`.

> 一般来说，如果您的数据代表整个人口，请使用`STDEVP`; 否则，使用`STDEV`.

请注意，对于大样本，函数返回几乎相同的值，因此`STDEV`在这种情况下更好地使用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-11T17:10:28.503

在统计学中有两种标准差：一种用于样本，另一种用于总体。样本标准差（通常用字母 s 表示）用作总体标准差的估计值。当数据构成完整的总体时，使用总体标准差，通常用希腊字母小写 sigma 表示。很难直接回答您的问题 - 样本或总体 - 因为很难说出您正在处理什么：样本或总体。它通常取决于上下文。考虑以下示例。如果我想知道班级学生年龄的标准差，那么我会使用 STDEVP，因为班级是我的人口。但是，如果我想将我的班级用作学校所有学生的样本（这将是所谓的便利样本，并且可能会有偏见，但我离题了），那么我会使用 STDEV，因为我的类是一个样本。结果值将是我对 STDEVP 的最佳估计。如上所述（1）对于大样本量（例如，超过 30 个），两者之间的差异变得微不足道，并且（2）通常您应该使用 STDEV，而不是 STDEVP，因为在实践中我们通常无法访问人口。事实上，有人可能会争辩说，如果我们总是可以访问人口，那么我们就不需要统计数据了。推论统计的全部意义在于能够根据样本对总体进行推论。然后我会使用 STDEV，因为我的课程是一个样本。结果值将是我对 STDEVP 的最佳估计。如上所述（1）对于大样本量（例如，超过 30 个），两者之间的差异变得微不足道，并且（2）通常您应该使用 STDEV，而不是 STDEVP，因为在实践中我们通常无法访问人口。事实上，有人可能会争辩说，如果我们总是可以访问人口，那么我们就不需要统计数据了。推论统计的全部意义在于能够根据样本对总体进行推论。然后我会使用 STDEV，因为我的课程是一个样本。结果值将是我对 STDEVP 的最佳估计。如上所述（1）对于大样本量（例如，超过 30 个），两者之间的差异变得微不足道，并且（2）通常您应该使用 STDEV，而不是 STDEVP，因为在实践中我们通常无法访问人口。事实上，有人可能会争辩说，如果我们总是可以访问人口，那么我们就不需要统计数据了。推论统计的全部意义在于能够根据样本对总体进行推论。因为在实践中，我们通常无法接触到人口。事实上，有人可能会争辩说，如果我们总是可以访问人口，那么我们就不需要统计数据了。推论统计的全部意义在于能够根据样本对总体进行推论。因为在实践中，我们通常无法接触到人口。事实上，有人可能会争辩说，如果我们总是可以访问人口，那么我们就不需要统计数据了。推论统计的全部意义在于能够根据样本对总体进行推论。****

# javascript - 如何验证html文本框中的时间？

> ID：14893913
> 
> 赞同：-2
> 
> 时间：2013-02-15T11:39:10.337
> 
> 标签：javascript, html, validation, datetime

我需要验证 html 文本框（onkeypress）只允许给定格式的时间：

hh:mm // hh--> 只允许最多 24 和 mm --> 最多 59

没有其他文本会限制文本框：始终使用 javascript 显示在文本框中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:51:10.457

这很容易。

```
function validate(form) {
    var hhmm = form.time.value.split(':'); // split hours and minutes
    var hours = parseInt(hhmm[0]); // get hours and parse it to an int
    var minutes = parseInt(hhmm[1]); // get minutes and parse it to an int

    // check if hours or minutes are incorrect
    if(hours < 0 || hours > 24 || minutes < 0 || minutes > 59) {
        alert('NOPE'); // display error
        return false; // stop the form from sending
    }
} 
```

我建议也使用 HTML5`time`输入。如果浏览器不支持该元素（IE、Firefox），它将回退到正常的文本输入。所以它会以任何一种方式工作。

```
<input type="time" name="time" /> 
```

最后，要`validate`在提交表单时运行，添加此属性：

```
onsubmit="return validate(this);" 
```

* * *

这将起作用，但您仍然需要验证服务器端（PHP、C#、Java、Perl、Ruby 等）以确保它是有效时间。

如果黑客愿意向您发送无效数据，他们不必填写表格，但可以将定制的数据直接发送到服务器。因此，您必须（重新）在服务器端验证它。

# mysql - MySQL查询：只有一张表和第二张表存在的所有数据

> ID：14893916
> 
> 赞同：0
> 
> 时间：2013-02-15T11:39:16.920
> 
> 标签：mysql, subquery, isnull

我的数据库中有两个表。一个是配置文件列表（代码示例中的表 b）。第二个是一个日志表（代码示例中的表 a），其中记录了配置文件的更新时间。

我想执行一个查询，为我提供网站上的每个个人资料。一些配置文件尚未更新，因此日志表中没有记录，我希望它们也以 0 时间戳显示。

以下代码将仅返回两个表中都存在 id 的行。

```
SELECT b.id, b.name, b.linkname, IFNULL(MAX(a.date),0) as lastupdate
FROM links a, list b
WHERE b.id=a.id 
```

我怎样才能让它工作，所以我得到一个完整的配置文件列表和一个存在的最新时间戳和一个 0 时间戳（如果它不存在）？

提前致谢。希望这不是微不足道的，我一直在搜索大量，但找不到一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:54:23.667

用于`LEFT JOIN`获取数据..用于`GROUP BY`避免重复数据..因为`log table`您在单个配置文件中有多个条目..

```
SELECT b.id, b.name, b.linkname, IFNULL(MAX(a.date),0) as lastupdate
FROM list b
LEFT JOIN links a ON (a.id=b.id)
GROUP BY b.id; 
```

# pdf - 替换 PDF 中的字体

> ID：14893920
> 
> 赞同：6
> 
> 时间：2013-02-15T11:39:33.940
> 
> 标签：pdf, embedded-fonts

是否可以替换 pdf 文件中的（嵌入）字体？我试过 Acrobat，但我只能逐段替换。我想用完整文档中的字体替换每个单词。

也许可以用ghostscript或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T15:50:36.820

Infix Pro 可以做到

[http://www.iceni.com/infixDownload.htm?b=3](http://www.iceni.com/infixDownload.htm?b=3)

[http://www.iceni.com/blog/how-to-change-a-pdf-font-quickly/](http://www.iceni.com/blog/how-to-change-a-pdf-font-quickly/)

编辑 -> 查找和替换 -> 替换字体

# c# - For vs. Linq - 性能 vs. 未来

> ID：14893924
> 
> 赞同：42
> 
> 时间：2013-02-15T11:39:43.007
> 
> 标签：c#, performance, linq

非常简短的问题。我有一个随机排序的大字符串数组（100K+ 条目），我想在其中找到所需字符串的第一次出现。我有两个解决方案。

通过阅读我的猜测是，“for 循环”目前会提供更好的性能（但这个边距总是会改变），但我也发现 linq 版本更具可读性。总的来说，哪种方法通常被认为是当前的最佳编码实践，为什么？

```
string matchString = "dsf897sdf78";
int matchIndex = -1;
for(int i=0; i<array.length; i++)
{
    if(array[i]==matchString)
    {
        matchIndex = i;
        break;
    }
} 
```

或者

```
int matchIndex = array.Select((r, i) => new { value = r, index = i })
                         .Where(t => t.value == matchString)
                         .Select(s => s.index).First(); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-15T11:42:23.037

最佳实践取决于您的需要：

1.  开发速度和可维护性：LINQ
2.  性能（根据分析工具）：手动代码

LINQ 确实通过所有间接方式减慢了速度。不用担心，因为 99% 的代码不会影响最终用户的性能。

我从 C++ 开始，真正学会了如何优化一段代码。LINQ 不适合充分利用 CPU。因此，如果您将 LINQ 查询衡量为一个问题，那就放弃它。但也只有那时。

对于您的代码示例，我估计会减速 3 倍。通过 lambdas 进行的分配（以及随后的 GC！）和间接访问真的很痛苦。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-15T12:17:32.003

*性能稍微*好一点？循环将显着提高性能！

考虑下面的代码。在我的发布（非调试）构建系统上，它给出：

```
Found via loop at index 999999 in 00:00:00.2782047
Found via linq at index 999999 in 00:00:02.5864703
Loop was 9.29700432810805 times faster than linq. 
```

特意设置了代码，以便要找到的项目就在最后。如果一开始是对的，事情就会完全不同。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            string[] a = new string[1000000];

            for (int i = 0; i < a.Length; ++i)
            {
                a[i] = "Won't be found";
            }

            string matchString = "Will be found";

            a[a.Length - 1] = "Will be found";

            const int COUNT = 100;

            var sw = Stopwatch.StartNew();
            int matchIndex = -1;

            for (int outer = 0; outer < COUNT; ++outer)
            {
                for (int i = 0; i < a.Length; i++)
                {
                    if (a[i] == matchString)
                    {
                        matchIndex = i;
                        break;
                    }
                }
            }

            sw.Stop();
            Console.WriteLine("Found via loop at index " + matchIndex + " in " + sw.Elapsed);
            double loopTime = sw.Elapsed.TotalSeconds;

            sw.Restart();

            for (int outer = 0; outer < COUNT; ++outer)
            {
                matchIndex = a.Select((r, i) => new { value = r, index = i })
                             .Where(t => t.value == matchString)
                             .Select(s => s.index).First();
            }

            sw.Stop();
            Console.WriteLine("Found via linq at index " + matchIndex + " in " + sw.Elapsed);
            double linqTime = sw.Elapsed.TotalSeconds;

            Console.WriteLine("Loop was {0} times faster than linq.", linqTime/loopTime);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-15T13:22:08.230

根据声明范式，LINQ 表达了计算的逻辑，而不描述其控制流。该查询是面向目标的、自我描述的，因此易于分析和理解。也很简洁。此外，使用 LINQ，高度依赖于数据结构的抽象。这涉及高可维护性和可重用性。

迭代方法解决了命令式范式。它提供了细粒度的控制，从而轻松获得更高的性能。代码也更易于调试。有时结构良好的迭代比查询更具可读性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T12:05:50.330

性能和可维护性之间总是存在两难选择。通常（如果没有关于性能的特定要求）可维护性应该是赢家。只有当您遇到性能问题时，您才应该分析应用程序，找到问题根源并提高其性能（通过同时降低可维护性，是的，这就是我们生活的世界）。

关于您的样品。Linq 在这里不是很好的解决方案，因为它不会将匹配可维护性添加到您的代码中。实际上，对我来说，投影、过滤和再次投影看起来比简单的循环还要糟糕。您需要的是简单的 Array.IndexOf，它比循环更易于维护，并且具有几乎相同的性能：

```
Array.IndexOf(array, matchString) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T11:43:31.187

好吧，您自己给出了问题的答案。

`For`如果您想要最佳性能，请使用循环，或者如果`Linq`您想要可读性，请使用。

还可能要记住使用 Parallel.Foreach() 的可能性，这将受益于内联 lambda 表达式（因此，更接近 Linq），并且这比“手动”进行并行化更具可读性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T11:45:00.743

我不认为这两者都被认为是最佳实践，有些人更喜欢看 LINQ，而有些人则不喜欢。

如果性能是一个问题，我会为您的场景分析这两种代码，如果差异可以忽略不计，那么选择您觉得更符合的那个，毕竟很可能是您维护代码。

您是否还考虑过使用 PLINQ 或使循环并行运行？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-06T15:51:13.087

只是一个有趣的观察。LINQ Lambda 查询肯定会增加 LINQ Where 查询或 For 循环的惩罚。在下面的代码中，它用 1000001 个多参数对象填充一个列表，然后使用 LINQ Lamba、LINQ Where 查询和 For 循环搜索在此测试中始终是最后一个的特定项目。每个测试迭代 100 次，然后平均时间以获得结果。

LINQ Lambda 查询平均时间：0.3382 秒

LINQ Where 查询平均时间：0.238 秒

For循环平均时间：0.2266秒

我一遍又一遍地运行这个测试，甚至增加了迭代，从统计学上讲，分布几乎相同。当然，我们所说的基本上是一百万个项目搜索的 1/10 秒。所以在现实世界中，除非有那么密集的事情，否则你不确定你是否会注意到。但是，如果您执行 LINQ Lambda 与 LINQ Where 查询确实会在性能上有所不同。LINQ Where 与 For 循环几乎相同。

```
private void RunTest()
{
    try
    {
        List<TestObject> mylist = new List<TestObject>();

        for (int i = 0; i <= 1000000; i++)
        {
            TestObject testO = new TestObject(string.Format("Item{0}", i), 1, Guid.NewGuid().ToString());
            mylist.Add(testO);
        }

        mylist.Add(new TestObject("test", "29863", Guid.NewGuid().ToString()));

        string searchtext = "test";

        int iterations = 100;

        // Linq Lambda Test
        List<int> list1 = new List<int>();
        for (int i = 1; i <= iterations; i++)
        {
            DateTime starttime = DateTime.Now;
            TestObject t = mylist.FirstOrDefault(q => q.Name == searchtext);
            int diff = (DateTime.Now - starttime).Milliseconds;
            list1.Add(diff);
        }

        // Linq Where Test
        List<int> list2 = new List<int>();
        for (int i = 1; i <= iterations; i++)
        {
            DateTime starttime = DateTime.Now;
            TestObject t = (from testO in mylist
                            where testO.Name == searchtext
                            select testO).FirstOrDefault();
            int diff = (DateTime.Now - starttime).Milliseconds;
            list2.Add(diff);
        }

        // For Loop Test
        List<int> list3 = new List<int>();
        for (int i = 1; i <= iterations; i++)
        {
            DateTime starttime = DateTime.Now;
            foreach (TestObject testO in mylist)
            {
                if (testO.Name == searchtext)
                {
                    TestObject t = testO;
                    break;
                }
            }
            int diff = (DateTime.Now - starttime).Milliseconds;
            list3.Add(diff);
        }

        float diff1 = list1.Average();
        Debug.WriteLine(string.Format("LINQ Lambda Query Average Time: {0} seconds", diff1 / (double)100));

        float diff2 = list2.Average();
        Debug.WriteLine(string.Format("LINQ Where Query Average Time: {0} seconds", diff2 / (double)100));

        float diff3 = list3.Average();
        Debug.WriteLine(string.Format("For Loop Average Time: {0} seconds", diff3 / (double)100));
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.ToString());
    }
}

private class TestObject
{
    public TestObject(string _name, string _value, string _guid)
    {
        Name = _name;
        Value = _value;
        GUID = _guid;
    }
    public string Name;
    public string Value;
    public string GUID;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-28T12:34:27.303

最好的选择是使用 Array 类的 IndexOf 方法。由于它专门用于数组，因此它将比 Linq 和 For Loop 快得多。改进马特沃森的答案。

```
using System;
using System.Diagnostics;
using System.Linq;

namespace PerformanceConsoleApp
{
    public class LinqVsFor
    {

        private static void Main(string[] args)
        {
            string[] a = new string[1000000];

            for (int i = 0; i < a.Length; ++i)
            {
                a[i] = "Won't be found";
            }

            string matchString = "Will be found";

            a[a.Length - 1] = "Will be found";

            const int COUNT = 100;

            var sw = Stopwatch.StartNew();

            Loop(a, matchString, COUNT, sw);

            First(a, matchString, COUNT, sw);

            Where(a, matchString, COUNT, sw);

            IndexOf(a, sw, matchString, COUNT);

            Console.ReadLine();
        }

        private static void Loop(string[] a, string matchString, int COUNT, Stopwatch sw)
        {
            int matchIndex = -1;
            for (int outer = 0; outer < COUNT; ++outer)
            {
                for (int i = 0; i < a.Length; i++)
                {
                    if (a[i] == matchString)
                    {
                        matchIndex = i;
                        break;
                    }
                }
            }

            sw.Stop();
            Console.WriteLine("Found via loop at index " + matchIndex + " in " + sw.Elapsed);

        }

        private static void IndexOf(string[] a, Stopwatch sw, string matchString, int COUNT)
        {
            int matchIndex = -1;
            sw.Restart();
            for (int outer = 0; outer < COUNT; ++outer)
            {
                matchIndex = Array.IndexOf(a, matchString);
            }
            sw.Stop();
            Console.WriteLine("Found via IndexOf at index " + matchIndex + " in " + sw.Elapsed);

        }

        private static void First(string[] a, string matchString, int COUNT, Stopwatch sw)
        {
            sw.Restart();
            string str = "";
            for (int outer = 0; outer < COUNT; ++outer)
            {
                str = a.First(t => t == matchString);

            }
            sw.Stop();
            Console.WriteLine("Found via linq First at index " + Array.IndexOf(a, str) + " in " + sw.Elapsed);

        }

        private static void Where(string[] a, string matchString, int COUNT, Stopwatch sw)
        {
            sw.Restart();
            string str = "";
            for (int outer = 0; outer < COUNT; ++outer)
            {
                str = a.Where(t => t == matchString).First();

            }
            sw.Stop();
            Console.WriteLine("Found via linq Where at index " + Array.IndexOf(a, str) + " in " + sw.Elapsed);

        }

    }

} 
```

输出：

```
Found via loop at index 999999 in 00:00:01.1528531
Found via linq First at index 999999 in 00:00:02.0876573
Found via linq Where at index 999999 in 00:00:01.3313111
Found via IndexOf at index 999999 in 00:00:00.7244812 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-19T04:35:27.813

有点没有答案，实际上只是对[https://stackoverflow.com/a/14894589](https://stackoverflow.com/a/14894589)的扩展，但我一直在致力于为 Linq-to-Objects 提供与 API 兼容的替代品而现在。它仍然不提供手动编码循环的性能，但对于许多（大多数？）linq 场景来说它更快。它确实会产生更多的垃圾，并且前期成本会稍高一些。

代码可用[https://github.com/manofstick/Cistern.Linq](https://github.com/manofstick/Cistern.Linq)

一个 nuget 包可用[https://www.nuget.org/packages/Cistern.Linq/](https://www.nuget.org/packages/Cistern.Linq/)（我不能声称这是经过战斗强化的，使用风险自负）

从 Matthew Watson 的答案 ( [https://stackoverflow.com/a/14894589](https://stackoverflow.com/a/14894589) ) 中获取代码并进行两次微调，我们将时间缩短到“仅”比手动编码循环差 3.5 倍。在我的机器上大约需要原始 System.Linq 版本的 1/3 时间。

要替换的两个更改：

```
using System.Linq;

...

matchIndex = a.Select((r, i) => new { value = r, index = i })
             .Where(t => t.value == matchString)
             .Select(s => s.index).First(); 
```

具有以下内容：

```
// a complete replacement for System.Linq
using Cistern.Linq;

...

// use a value tuple rather than anonymous type
matchIndex = a.Select((r, i) => (value: r, index: i))
             .Where(t => t.value == matchString)
             .Select(s => s.index).First(); 
```

所以图书馆本身是一项正在进行的工作。它未能通过 corefx 的 System.Linq 测试套件中的几个边缘案例。它还需要转换一些函数（它们目前具有 corefx System.Linq 实现，从 API 角度来看，如果不是从性能角度来看，它是兼容的）。但是，如果有人愿意提供帮助、评论等，我们将不胜感激......

# ios - iOS 安全问题：当应用程序在 iOS 中进入后台时处理敏感数据的自动截图？侧信道数据泄露

> ID：14893925
> 
> 赞同：1
> 
> 时间：2013-02-15T11:39:44.923
> 
> 标签：ios, objective-c, security

当应用程序进入后台状态时，iOS 会自动截屏，并在进入前台时显示。可以从应用程序外部访问屏幕截图。

如果屏幕中有敏感数据，这可能是一个安全问题。

我就是这样处理这个问题的，如果有更好的方法，请提出建议。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Add overlay image to prevent automatic screenshot while entering background

    // prepare image to display
self.splashImageView = [[UIImageView alloc] initWithImage:image];

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    CGFloat angle = [self angleForOrientation:orientation];
    CGAffineTransform transform = CGAffineTransformMakeRotation(angle);    
    self.splashImageView.transform = transform;
    self.splashImageView.frame = self.window.frame;
    [self.window addSubview:self.splashImageView];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    if ([_splashImageView superview])
    {
        [_splashImageView removeFromSuperview];
        self.splashImageView = nil;
    }
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
} 
```

# google-apps-script - 为类中的方法编写 jsdoc 文档

> ID：14893927
> 
> 赞同：4
> 
> 时间：2013-02-15T11:39:48.480
> 
> 标签：google-apps-script, documentation, jsdoc

我正在用 Google Apps Script 编写一些库，并且正在尝试记录它们。我已经按以下格式编写了一些类，并且类中方法的注释没有显示在文档中：

```
/**
* My comments here
*/
function MyBeautifulObject(){

   this.myMethod=myMethod;
   ....

   /**
   * This comment doesn't show up
   */

   function myMethod(){
     ...
   }

} 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:38:43.210

*这个问题可能是重复的......[这个答案肯定是](https://stackoverflow.com/questions/15158745/google-apps-script-auto-generated-library-documentation/15161288#15161288)。*

Google Apps 脚本中的库支持的 jsdoc 变体不支持您要查找的级别的文档，仅支持一级函数。有一个[相关的开放错误报告](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1389&thanks=1389&ts=1338940848)，但谷歌没有回应。

您仍然可以编写 jsdoc 标签，并在 Google 基础架构之外生成文档。查看[如何在 google doc 脚本中预览 jsdoc 评论，以](https://stackoverflow.com/questions/12461752/how-to-preview-jsdoc-comments-in-google-doc-scripts)获取有关如何预览 jsdoc 评论的一些指导。您可以获取输出`jsdoc3`并将其发布在站点上，以将您的文档提供给您的社区。

其他相关/可能重复的帖子：

*   [在 Google Apps 脚本库中创建类似命名空间的组织](https://stackoverflow.com/questions/10890177/creating-a-namespace-like-organization-in-a-google-apps-script-library)
*   [Google Apps 脚本自动生成的库文档](https://stackoverflow.com/questions/15158745/google-apps-script-auto-generated-library-documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-16T10:14:55.237

如果你正在使用 TypeScript，我们已经构建了一个包来帮助解决这个问题：

[https://github.com/maelcaldas/clasp-types](https://github.com/maelcaldas/clasp-types)

我们使用它为我们的 OO 库和使用 Typescript 编写的客户端 API 生成自动完成功能。

# algorithm - 如何选择外线段

> ID：14893928
> 
> 赞同：0
> 
> 时间：2013-02-15T11:39:49.567
> 
> 标签：algorithm, geometry, computational-geometry

我有二维线段。我的目标是制作不同的封闭多边形。但是，在这里，当平行线段很少彼此靠近时，我想选择大多数外部线段。使用不同的线组合，我可以制作不同的封闭多边形。我正在思考并努力知道如何获得最外线，因为我需要由最外线组成的多边形。（多边形最后由相交的相邻线段构成。）我想得到一个包含所有线段的大边界框并获得质心，然后找到每条线的垂直距离。在这个过程中，我发现附近的线段彼此靠近（即靠近平行线）。所以，从那些附近的平行线中，我想要最外面的一条。（那是红色的）。但是如果我使用质心并比较距离，那么当存在更多凹凸转弯时，最长距离（在附近的平行线中）不会给出正确的最外侧线，因为在某些情况下，最外侧（红色）没有给出最长距离。我所拥有的是；每条线段的终点坐标。（即矢量数据）

> 所以，我正在寻找一些从附近平行线中获取大部分外线段的好方法。为了让您了解，我附上了我拥有的示例数据。最外面的线段以红色显示。最后，这条红线给了我多边形的边界。所以，我想从相应的附近平行黑线中得到红线。

注意：我的线段朝向不同的方向。而且不仅适用于 X 和 Y 轴。此外，附近的线并不总是与相邻的线成 90 或 180 角。

请给我一个方法。提前致谢

例如，如果 A,B 和 C,D 是附近的平行线段。那么最外线应该是B和C。但是，如果我比较与质心（O）的距离，那么我可以得到C作为最外线，但B不能得到，因为从O到B的距离小于O到A。我的方法在这种类型的地方失败。所以，看看替代品..

![在此处输入图像描述](../Images/9c98f683aef7076ef53291f87675e2e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:30:10.790

查找线的一般方法是使用霍夫变换。

[http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform)

但是，您提供的样本数据具有平行于轴的线。我不知道这是否是您所有数据的性质，但如果是这样，那么霍夫变换基本上分解为简单地按行对平行于 x 轴的线的强度求和，并按列对平行线求和到 y 轴。

您最终将得到两个一维数组，一个带有行总和，一个带有列总和。由于线条是黑色的，前景是白色的，因此这些数组中的局部最小值将表示沿每个轴的线条位置。由于您只需要外线，因此您不必对每一列/行求和 - 只需从图像的边缘开始计算总和，直到达到局部最小值。将线放置在轴上后，您可以遍历图像中的轴切割以找到线的端点。

# java - 如何使用 POST 将数组发送到 REST-Service (Jersey)

> ID：14893932
> 
> 赞同：4
> 
> 时间：2013-02-15T11:39:55.213
> 
> 标签：java, arrays, rest, post, jersey

我想使用 JQuery 将一组位置发送到 REST 服务。

我的代码

```
var locations = new Array();
var loc = new Location();
loc.alt = 0;
loc.lat = 0;
loc.long = 0;
loc.time = 1;

locations.push(loc);

var json_data = {value : JSON.stringify(locations)};
console.log(json_data);

$.ajax({type: 'POST',
        url: rootURL + '/Location/123',
        crossDomain: true,
        dataType: "json", // data type of response
        contentType: "application/json; charset=utf-8",
        data: json_data,
        success: function(data, textStatus, jqXHR) {
            console.log('testAddLocations erfolgreich');
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log('testAddLocations Fehler');
        }
    }); 
```

REST服务

```
@POST
@Produces({ MediaType.APPLICATION_JSON })
@Path("{tripID}")
public Response addLocations(@PathParam("tripID") final String tripID, Location[] value) { 
```

但我得到一个 HTTP-500 错误。在服务器上：

```
SCHWERWIEGEND: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
JsonFormatException{text=v, line=1, column=1}
at com.sun.jersey.json.impl.reader.JsonLexer.yylex(JsonLexer.java:662)
at com.sun.jersey.json.impl.reader.JsonXmlStreamReader.nextToken(JsonXmlStreamReader.java:162) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:19:37.930

我假设这是因为您发送数据的格式。您发布的数据不应该是整个字符串化的 JSON 吗？（包括`value`通常应该是`location`哪个？）

我的意思是 Jersey 使用不同的[JSON 表示法](http://jersey.java.net/nonav/documentation/latest/json.html#d4e949)来序列化/反序列化消息，因此，例如，如果您使用 MAPPED 表示法，您应该发送如下内容：

```
{"location":[
    {"alt":1,"lat":2,"long":3,"time":4},
    {"alt":5,"lat":6,"long":7,"time":8}
]} 
```

这意味着使用 jQuery 的代码如下：

```
$.ajax({
    data : JSON.stringify( 
    {"location" : [
        { alt: 1, lat: 2, long: 3, time: 4 },
        { alt: 5, lat: 6, long: 7, time: 8 }
    ]}),
    .... 
```

对于自然符号，您应该发送：

```
[
    {"alt":1,"lat":2,"long":3,"time":4},
    {"alt":5,"lat":6,"long":7,"time":8}
] 
```

这意味着代码如下：

```
$.ajax({
    data : JSON.stringify( 
    [
        { alt: 1, lat: 2, long: 3, time: 4 },
        { alt: 5, lat: 6, long: 7, time: 8 }
    ]),
    ... 
```

查看默认行为的一种快速方法是将其添加到您的服务中并查看它返回的格式：

```
@GET
@Produces({ MediaType.APPLICATION_JSON })
@Path("/testNotation")
public Location[] getLocations() {
    return new Location[] { new Location(), new Location() };
} 
```

有关一些额外信息，请参见此处：

[http://jersey.java.net/nonav/documentation/latest/json.html](http://jersey.java.net/nonav/documentation/latest/json.html)
[http://jersey.java.net/nonav/apidocs/1.17/jersey/com/sun/jersey/api/json/JSONConfiguration.html](http://jersey.java.net/nonav/apidocs/1.17/jersey/com/sun/jersey/api/json/JSONConfiguration.html)
[http://jersey.java.net/nonav/apidocs/1.17/jersey/com/sun/jersey/api/json/JSONConfiguration.Notation.html](http://jersey.java.net/nonav/apidocs/1.17/jersey/com/sun/jersey/api/json/JSONConfiguration.Notation.html)
[http://tugdualgrall.blogspot.ro/2011/09/jax-rs -jersey-and-single-element-arrays.html](http://tugdualgrall.blogspot.ro/2011/09/jax-rs-jersey-and-single-element-arrays.html)

# mysql - 使用Mysql数据库从两个SQL表中具体选取数据

> ID：14893933
> 
> 赞同：1
> 
> 时间：2013-02-15T11:39:57.090
> 
> 标签：mysql, sql, select

我有一个 mysql 数据库，我想做一个特定的选择。这是场景：

**第一张桌子**

有关货运车辆的道路清单数据。

```
roadListNumber(primary_key), vehicle, driver, startWorkTime, endWorkTime and so on. 
```

**第二张桌子**

使用第一个表的主键映射的货物区域。

```
roadListNumber(foreign_key), zoneId, timeInside, spentMoney and so on. 
```

问题是不是每辆车都去货物区所以一些道路列表没有与货物区（第二个表）映射，这是我的问题和问题：

如何从第一个表中选择所有的道路清单并将结果与​​第二个表（货物区）连接，**而不会**跳过未与货物区映射的道路清单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:44:09.143

您可以`LEFT JOIN`用来获取数据...也可以`GROUP BY`用来避免重复数据..

```
SELECT rl.roadListNumber,rl.vehicle,cz.zoneId,cz.spentMoney  
FROM road_list rl 
LEFT JOIN cargo_zone cz on (rl.roadListNumber=cz.roadListNumber) 
GROUP BY rl.roadListNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:44:12.003

您已经使用了正确的词 (JOIN)。您可以使用 a`LEFT OUTER JOIN`来获取第一个（或*左*）表中的所有记录，并根据子句将它们与第二个（或*右）表中的相应记录相关联。*`ON`

注意这里左右表格术语的用法*以及*它*是*如何关联的*`LEFT`*`OUTER JOIN.`

如果第二个表上没有匹配的记录，您将获得`NULL`结果集中第二个表的列。

```
SELECT * FROM roadlist rl 
    LEFT OUTER JOIN cargozones cz ON rl.roadlistnumber = cz.roadlistnumber 
```

有很多种`JOIN`。例如，如果您使用的是`INNER JOIN`，您只会获得与第二个表匹配的记录。

有关 SQL 连接如何工作的直观解释，请参阅此博客文章：[Coding Horror: A Visual Explanation of SQL Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# php - Joomla 2.5.9：模块安装困难

> ID：14893935
> 
> 赞同：0
> 
> 时间：2013-02-15T11:39:59.153
> 
> 标签：php, xml, joomla2.5

我是这项技术的新手，在访问了这么多链接后才开始模块开发。

但是，每当我尝试通过扩展管理器安装我开发的 HelloWorld 模块时，我总是遇到以下错误：

```
"JInstaller: :Install: File does not exist /Applications/MAMP/htdocs/jainism/tmp/install_511e1c1cc2b04/mod_helloworld/tmpl" 
```

这可能是问题被重复了，但我已经尝试了所有可能的解决方案，这些解决方案我在这里和其他站点都找到了，但我的问题仍然没有得到解决。

为方便起见，我只是在下面粘贴我的 xml 代码：-

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="2.5" client="site" method="upgrade">
<name>Hello, World Module!</name>
<author>Mohit Jaiswal</author>
    <license>GNU General Public License version 2 or later; see
        LICENSE.txt</license>
<version>2.5.0</version>
<description>A simple Hello, World! modules.</description>
<files>
   <filename module="mod_helloworld">mod_helloworld.php</filename>
    <folder>tmpl</folder>
     <filename>index.html</filename>
     <filename>helper.php</filename>
     <filename>mod_helloworld.xml</filename>
</files>
</extension> 
```

而且，我还多次交叉检查了上面 xml 中存在的目录结构以及文件名。

请给我你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:12:32.193

发生此错误可能是因为“tmpl”文件夹为空。如果您将默认的 0 字节“index.html”文件放在此文件夹中，错误可能会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:41:20.787

如果`tmpl`文件夹在您的模块 zip 中，那么原因可能是您正在添加`<filename>mod_helloworld.xml</filename>`xml 文件。尝试不使用它。

检查这个也 - [http://docs.joomla.org/Creating_a_simple_module](http://docs.joomla.org/Creating_a_simple_module)

希望它会奏效。

# java - JPA 映射中的原始类型。如果数据库列可能为 NULL 怎么办？

> ID：14893937
> 
> 赞同：9
> 
> 时间：2013-02-15T11:39:59.870
> 
> 标签：java, hibernate, jpa, orm, primitive

给定使用 JPA 映射的此类（使用 JPA 1.0 和 Hibernate）：

```
@Entity
public class Foo {

    private int bar;

    /* ... */
} 
```

1.  如果我尝试加载`BAR`列设置为 NULL 的记录会发生什么？
2.  可以指定对应列为NULL时如何设置`bar`字段吗？

*笔记*

我知道这不是最佳做法。这个问题更多是出于好奇，并且受到这种情况的启发：

*   数据库表是一个临时表：添加`NOT NULL`约束是不切实际的。坏数据是意料之中的，我的代码的重点是在将数据加载到“真实”数据库之前验证、清理和/或拒绝数据。
*   我对某些字段有可接受的默认值。例如，一个`boolean`应该默认为的标志`false`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T11:46:32.570

如果列可能包含空值，我宁愿使用对象，因为 Matheus 的想法引入了错误数据。`NULL <> 0`！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T11:43:39.907

1.  例外

2.

```
@Column(name = “bar”, nullable = false, columnDefinition = “bigint(20) default 0″)
private int bar; 
```

它解决了你的问题。

# objective-c - iOS6中的界面方向

> ID：14893940
> 
> 赞同：1
> 
> 时间：2013-02-15T11:40:11.617
> 
> 标签：objective-c, ios6, uiinterfaceorientation

我必须对现有应用程序进行一些更改。该应用程序的最后一次更新是在 6 月 iOS6.0 尚未启动时。我想知道方向如何在运行 iOS6.0 的设备上正常工作？因为该构建包含不推荐使用的方法？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

此方法在 iOS6.0 中没有被调用，那么应用商店中的应用程序如何在 iOS6 设备中正常工作？此外，如果我使用它的代码从 xcode 运行这个应用程序，那么它不支持 iOS6 的方向。现在我的客户说应用商店上的应用在所有设备的方向上都可以正常工作，而新版本不支持方向。我知道我可以通过使用新的定位方法来解决这个问题

```
-(BOOL)shouldAutoRotate 
```

但只是想知道旧应用程序在使用不推荐使用的方法的 iOS6 设备上如何正常工作，而当我使用 xcode 运行它时甚至没有调用这些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:24:07.747

较旧的应用程序是使用 iOS 5.x SDK 编译的，这就是它们可以在 iOS 6 上正常运行的原因，当您使用 iOS 6.x SDK 编译不符合 iOS 6 的代码时会出现问题。

# java - 如何将Frame（jframe）集成到jsp中

> ID：14893942
> 
> 赞同：0
> 
> 时间：2013-02-15T11:40:13.543
> 
> 标签：java, jsp, applet, jframe, awt

我是 Awt，Jframe 的新手。我必须将 Frame 窗口（包含显示白板的代码）集成到 jsp 页面中。你能在这方面帮忙集成一个小程序 iam 使用吗

```
<applet code="com.pvn.WhiteBoardMain.class" codebase="." archive="Applets.jar" width="600" height="480"/> 
```

那么我怎样才能在jsp页面中显示这个框架窗口本身

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:53:45.737

由于小程序是一个容器，只需添加框架即可。它应该工作。

如果您的小程序是*myApplet*并且您的框架是*myFrame*，则以下代码应该可以工作（我假设*myFrame*已首先设置为可见）：

```
myApplet.add( myFrame );
myApplet.validate(); // to force a redraw. 
```

# wpf - WPF TreeView 中的鼠标绑定

> ID：14893945
> 
> 赞同：1
> 
> 时间：2013-02-15T11:40:19.080
> 
> 标签：wpf, xaml, treeview, mouse, key-bindings

有没有办法在 WPF 树视图中执行鼠标或键绑定？

```
<TreeView ItemsSource="{Binding Main.TreeItems}">
    <TreeView.ItemTemplate>                           
        <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">                          
            <TextBlock Text="{Binding Path=Header}">
                <TextBlock.InputBindings>
                    <MouseBinding Command="{Binding TreeViewClickCommand}" MouseAction="LeftDoubleClick"/>
                </TextBlock.InputBindings>
             </TextBlock>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

这行不通。如果我在不在树视图中的按钮上使用我的命令，则该命令被触发。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:33:44.397

如果此命令在 TreeView 之外工作，我假设您的 TreeViewClickCommand 位于您的 Window/UserControl 的 DataContext 中。

使用 AncestorType 来引用 TreeViews DataContext（与 Windows DC 相同，如果您没有手动设置）：

```
Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type TreeView}}, Path=DataContext.TreeViewClickCommand}" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T12:38:35.360

您可以使用[AttachedCommandBehavior](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)来执行此操作。

# django - 自动测试以检查表格单元格中的值 - Django。

> ID：14893946
> 
> 赞同：0
> 
> 时间：2013-02-15T11:40:23.003
> 
> 标签：django, testing, integration

我的 Django 应用程序需要一些自动化测试。

许多视图生成表格数据（来自通用列表视图）。我创建了一些固定装置来测试一些导致细微错误的更复杂的情况。

我应该使用什么来测试特定表格单元格（或列）中的值？

django-test 客户端、Selenium、Nose 似乎有很多测试工具/库。很多事情似乎都是针对单元测试的（虽然我在这个级别上没有发现这么多的错误）。我正在寻找更多的集成测试。阅读所有库的所有文档需要一段时间才能找到我想要的。

那么有人可以建议我应该使用哪些库/工具来检查列表视图的表格输出中的最终输出值吗？我想提供一个 URL，并确认返回的页面在特定行/列中的值等于我的预期值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T11:43:18.783

> django-test 客户端、Selenium、Nose 似乎有很多测试工具/库。很多事情似乎都是针对单元测试的（虽然我在这个级别上没有发现这么多的错误）。我正在寻找更多的集成测试。

它非常适合集成测试。如果你尝试过，也许你会发现？也许是时候让你（重新？）了解正确的[黑客态度了](http://www.catb.org/esr/faqs/hacker-howto.html)

另外，我在[ghost.py 上玩得很开心](https://gist.github.com/jpic/074a1a54181f50d578dc)

> 阅读所有库的所有文档需要一段时间才能找到我想要的。

做研究也是你的工作。信不信由你，我昨天花了大约 5 个小时检查所有解决方案并决定使用 ghost.py 并让它与 django 很好地配合使用（因此要上传要点！）。

但是，是的，如果您不想学习任何新东西，那么您就会陷入“不知道如何进行集成测试”。如果您想学习“如何进行集成测试”，那么您必须进行研究。我的朋友没有什么秘密:)

# html - 为什么项目不在页面中心（边距：自动）

> ID：14893947
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:40:24.770
> 
> 标签：html, css, margin

我有这个 html 代码

```
<section id="ItemsContainer">
    <div id="FirstItem">
        This is First Item
    </div>
    <div id="SecondItem">
        This is Second Item
    </div>
</section> 
```

这是我的 CSS 风格

```
#FirstItem, #SecondItem {
    text-align: center;
    float: left;
    padding: 5px;
}

    #FirstItem *, #SecondItem * {
        margin-left: auto;
        margin-right: auto;
    }

@media screen and (min-width: 600px) {
    #ItemsContainer {
        margin-left: auto;
        margin-right: auto;
        width: 500px;
        padding: 5px;
    }

    #FirstItem, #SecondItem {
        margin-left: auto;
        margin-right: auto;
        width: 200px;
        text-align: center;
        float: left;
        padding: 5px;
    }
} 
```

这是代码的[jsfiddle](http://jsfiddle.net/ahmadalli/AJUsA/1/)

问题是它们位于页面中心，但不完全位于页面中心。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:43:27.613

您已设置`#ItemsContainer`为`500px`宽，但其中的两个元素不构成相同的宽度。如果你计算`2 * 200px`，加上`5px`两边的填充，那就是`420px`. 更改`#ItemsContainer`为`420px`似乎可以解决问题，*或者*您可以调整第一项和第二项的宽度以使总计`500px`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:47:46.243

我已经更新了你的小提琴：http: [//jsfiddle.net/ahmadalli/AJUsA/1/](http://jsfiddle.net/ahmadalli/AJUsA/1/)

我所做的唯一更改是：

```
#ItemsContainer {
    width: 500px;
    float: left;
}

#FirstItem, #SecondItem {
    text-align: center;
    float: left;
    padding: 5px;
    width:240px;
} 
```

我添加了浮动`#ItemsContainer`以赋予它高度，但理想情况下，您可能会为此使用 clearfix 类。

# jquery - 在鼠标悬停时更改图标大小 - (FontAwesome + Bootstrap)

> ID：14893950
> 
> 赞同：5
> 
> 时间：2013-02-15T11:40:41.707
> 
> 标签：jquery, html, css, twitter-bootstrap, font-awesome

我想在鼠标悬停元素上显示 2x 图标大小。

我正在使用带有引导程序的 FontAwesome。我有一个这样的列表：

```
<ul>
    <li><a href ="#"><i class="icon-inbox"></i> Inbox<a/></li>
    <li><a href ="#"><i class="icon-print"></i> print<a/></li>
    ....
</ul> 
```

我想在鼠标悬停元素上添加“icon-2x”fontawesome css 类，以显示更大的图标，并在鼠标离开时删除该类。

我希望它看起来像 FontAwesome 主页示例。像这样：

![在此处输入图像描述](../Images/f0c7e2968cc57b3695782824ff0a8d79.png)

我尝试使用 jQuery 查找元素以添加 css 类，但无法做到。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T11:50:10.983

你为什么不直接使用 CSS `:hover`？

```
li i[class^="icon-"] { font-size:12px; }
li:hover i[class^="icon-"] { font-size:24px; } 
```

FontAwesome 为图标使用一种字体，因此要将图标大小加倍，您只需将字体大小加倍。当然，您还需要考虑填充、边距和其他任何东西，以确保图标保持相对于它旁边的文本。

如果你仍然想使用 jQuery 添加一个新类：

```
$('li').hover(function() {
    $('i[class^="icon-"]', this).addClass('icon-2x');
}, function() {
    $('i[class^="icon-"]', this).removeClass('icon-2x');
}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-19T09:55:27.543

我建议使用 CSS 比例（我将它用于我的页面上的 FontAwesome 链接）：

```
a:hover i { transform: scale(2); } 
```

它不会移动图标旁边的元素（例如其他文本），这是改变字体大小的原因。

**更新**

在我的主页页脚查看它如何与 FontAwesome 一起使用的示例：http: [//pnowy.github.io/about/](http://pnowy.github.io/about/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:58:17.840

如果你想要一个动画开关，你需要使用 javascript。但是你可以通过这样做来实现这一点

```
<ul>
    <li><a class="image" href ="#"></a> <p>Long story</p></li>
</ul> 
```

然后像这样设置它

```
.image{
    float:left;
    display:block;
    background:url('http://icons.iconarchive.com/icons/deleket/sleek-xp-software/256/Yahoo-Messenger-icon.png');
    width:50px;
    height:50px;
    background-size:50px 50px;
}
li p{
    line-height:50px;
    vertical-align:center;
}
li:hover p{
    line-height:70px;
}
li:hover .image{
    width:70px;
    height:70px;
    background-size:70px 70px;
} 
```

你可以在这里看到一个小提琴[jsFiddle](http://jsfiddle.net/echvZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:55:43.663

您需要将字体大小应用于 :before 伪元素。

```
li:hover i:before {
    font-size: 24px /*or whatever*/
} 
```

见： [http ://astronautweb.co/snippet/font-awesome/](http://astronautweb.co/snippet/font-awesome/)

# .net - 从 ItemGroup 中定义的多个位置复制文件

> ID：14893955
> 
> 赞同：0
> 
> 时间：2013-02-15T11:40:53.620
> 
> 标签：.net, visual-studio, msbuild

项目文件：

```
...
<ItemGroup>
    <MyConfigProject Include="..\Project1.Config"></MyConfigProject>
    <MyConfigProject Include="..\Project2.Config"></MyConfigProject>
    ....
    <MyConfigProject Include="..\ProjectN.Config"></MyConfigProject>
</ItemGroup>
... 
```

我需要将所有 *.resx 文件从配置项目子文件夹资源复制到单个文件夹。
例如

```
copy ..\Project1.Config\Resources\*.resx to C:\myproject. 
```

我发现了很多使用批处理将文件组复制到多个文件夹的示例，但找不到将文件从多个文件夹复制到单个位置的示例。

注意：我不想在每个 MyConfigProject 项目中指定 Resources 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:37:40.323

只是：

```
 <Target Name="Itemgroup">
  <ItemGroup>
      <MyProjects Include="Project1;
                           Project2;Project3"></MyProjects>
  </ItemGroup>

  <Message Text="..\%(MyProjects.Identity).Config\Resources\*.resx"/>

  <ItemGroup>
      <MyConfigProject Include="..\%(MyProjects.Identity).Config\Resources\*.resx"/>
  </ItemGroup>

<Copy SourceFiles="@(MyConfigProject)" DestinationFolder="C:\SomeNewFolder"/>
  </Target> 
```

# actionscript-3 - 如何将 Actionscript 的多个标记电影剪辑翻译成 Starling？

> ID：14893958
> 
> 赞同：0
> 
> 时间：2013-02-15T11:41:01.970
> 
> 标签：actionscript-3, starling-framework

我是八哥的新手，这听起来像是一个菜鸟问题，但这里什么都没有。

想象以下场景（在 Flash 中）：

*   一个名为 test 的影片剪辑
*   测试有 80 帧
*   测试有 4 个标签，每个标签 20 帧

当我在我的项目中编写测试脚本时。我让它从标签 0-1（帧 1-19）循环。然后我告诉它在某个事件的标签 2 上循环。

这样，我就不会添加或删除一个影片剪辑或实例化一个东西。

现在，如果我考虑在八哥中实现它。我正在考虑在 Flash 中制作 4 个电影剪辑。将它们导出为精灵表，然后在脚本中制作四个影片剪辑。添加需要在杂耍者中播放的任何moviclip，并在那时同样删除它。

这样，每次我想在这些动画之间切换时，我都会添加“addchild”和“removechild”的开销成本。这是一种更经济有效的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:51:33.673

我假设您要导出单个剪辑，但要控制多重（4 个动画）而不是单个剪辑。如果是这种情况，我在几年前写了一些 JSFL 脚本（当时 CS6 还没有导出 spritesheets），它们将 .fla 文档的主时间线导出为图像序列，但在文件名。[这使得与TexturePacker](http://www.codeandweb.com/texturepacker)集成变得容易。你可以[在这里](http://lifesine.eu/rec/TPExporter.mov)看到它的视频。

这是一个 JSFL 片段，它将导出一个帧序列，其中包含基于帧标签生成的名称，这应该可以在 TexturePacker 中轻松管理：

```
var d   = (FLfile.getPlatform() == 'macos') ? '/' : '\\'; //delimiter
var doc = fl.getDocumentDOM();                            //document
var tl  = doc.getTimeline();tl.setSelectedLayers(0,true); //timeline
var cl = tl.layers[0];                                    //current layer
var numFrames = cl.frameCount;

var className = prompt("Name for your sequence", toClassName(doc.name.substr(0,doc.name.length-4)));
className = className.split('.')[0];//just in case the user adds .as
className = toClassName(className);//remove non alphabet chars
var docPath = doc.pathURI.substr(0,doc.pathURI.length - doc.name.length);
var exportPath = docPath+className+'_export'+d;
if(!FLfile.exists(exportPath)) FLfile.createFolder(exportPath);
fl.outputPanel.clear();
for(i = 0 ; i < numFrames; i++) {
    if(cl.frames[i].name != ''){//if frame is labelled
        tl.setSelectedFrames(i,i,true);
        doc.exportPNG(exportPath+cl.frames[i].name+lpad(''+i,4)+'.png',true,true);
    }
}
fl.trace("export complete!");
function lpad(number, length){
    var result = '' + number;
    while (result.length < length) result = '0' + result;
    return result;
}
function toClassName(input){
    return input.replace(/[^a-zA-Z]/g, "");
} 
```

另外，我建议看看[Dynamic-Texture-Atlas-Generator](https://github.com/emibap/Dynamic-Texture-Atlas-Generator)、[Fruitfly](https://github.com/richardlord/Fruitfly)等生成器工具。

# jquery - jquery 启用/禁用无线电相对于表单

> ID：14893961
> 
> 赞同：1
> 
> 时间：2013-02-15T11:41:14.153
> 
> 标签：jquery, html

在我的页面中，我有多种形式，当我单击单选按钮“disabled_radio”时，我会禁用单选按钮“radio_enabled_disabled”，但对于相对表单ID。

```
<td>
<form method="post" name="form1" id="form1" action="send.php">
   <div id="choice">
   <input type="radio" name="enabled_radio" value="yes" />YES
   <input type="radio" name="disabled_radio" value="no" />NO
   </div>
   <div id="mydiv">
   <input type="radio" name="radio_enabled_disabled" />
   </div>
</form>
</td>
<td>
<form method="post" name="form2" id="form2" action="send.php">
   <div id="choice">
   <input type="radio" name="enabled_radio" value="yes" />YES
   <input type="radio" name="disabled_radio" value="no" />NO
   </div>
   <div id="mydiv">
   <input type="radio" name="radio_enabled_disabled" />
   </div>
</form>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:51:07.773

首先，您需要一个没有重复使用的 id 和用于对它们进行分组的无线电名称的固定 HTML：

```
<form method="post" name="form1" id="form1" action="send.php">
   <input type="radio" name="enable_radio" value="yes">YES
   <input type="radio" name="enable_radio" value="no">NO
   <input type="radio" name="radio_enabled_disabled">
</form>
<form method="post" name="form2" id="form2" action="send.php">
   <input type="radio" name="enable_radio" value="yes">YES
   <input type="radio" name="enable_radio" value="no">NO
   <input type="radio" name="radio_enabled_disabled">
</form>
<form method="post" name="form3" id="form3" action="send.php">
   <input type="radio" name="enable_radio" value="yes">YES
   <input type="radio" name="enable_radio" value="no">NO
   <input type="radio" name="radio_enabled_disabled">
</form> 
```

然后你可以这样做：

```
$('[name=enable_radio]').change(function(){
    $(this).parent().find('[name="radio_enabled_disabled"]')
       .prop('disabled',this.value=='yes')
}); 
```

[示范](http://jsfiddle.net/dystroy/6Z2nY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:51:48.377

您的 HTML 存在一些问题，但我假设这只是您包含的一些示例代码，用于显示您正在尝试执行的操作。

如果您的单选元素是您要启用/禁用的表单的子元素，您可以使用该[`parent()`功能](http://api.jquery.com/parent/)在 DOM 中上一层，并到达表单元素。

```
$('input.disabled_radio').on('click',function(){
  $(this.parent().find('input[name="radio_enabled_disabled"]').prop('disabled','disabled');
}); 
```

此代码将找到相关的父表单元素并为其中包含的每个输入元素设置禁用属性。

就我个人而言，我喜欢尽可能详细地处理我的代码。我发现这大大提高了可读性。所以我会推荐使用 jQuery 的[`closest()`函数](http://api.jquery.com/closest/)而不是`parent()`. 该`closest()`函数要求您指定要查找的父元素的类型。所以代码看起来像这样 -

```
$('input.disabled_radio').on('click',function(){
  $(this.closest('form').find('input[name="radio_enabled_disabled"]').prop('disabled','disabled');
}); 
```

之后，要重新启用单选按钮，您需要删除该禁用属性。为此，您可以使用它-

```
.prop('disabled',''); 
```

# postgresql - postgres 中可以创建多少个模式

> ID：14893964
> 
> 赞同：49
> 
> 时间：2013-02-15T11:41:26.910
> 
> 标签：postgresql

在使用 postgres 为多租户实施解决方案时，我需要一个关于最大模式可以驻留在一个 postgres 数据库中的数量的答案。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-15T13:07:15.587

我们测试了数千个模式 - 数千个表没有问题。有几个已知问题

*   GUI 管理问题 - 由于在启动时读取完整的对象树而导致启动缓慢，
*   pg_dump 的问题 - 备份启动缓慢 - 需要大量时间来锁定对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-28T12:27:27.340

根据 Tom Lane 的说法，每个数据库的最大模式数量没有限制参考：[https ://www.postgresql.org/message-id/24478.1109618520%40sss.pgh.pa.us](https://www.postgresql.org/message-id/24478.1109618520%40sss.pgh.pa.us)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T08:44:03.743

您的 Postgres 中甚至可以有数千个模式。只需将其作为一个文件夹，帮助您实现数据的逻辑划分。您也可以阅读此内容以供参考：[https ://www.postgresql.org/message-id/13743.1177478055@sss.pgh.pa.us](https://www.postgresql.org/message-id/13743.1177478055@sss.pgh.pa.us)

# c# - 连接两个数据表

> ID：14893966
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:41:29.357
> 
> 标签：c#, asp.net, datatable

我有两个数据表

数据表1：

```
id  name
--  ----
1   jhon
2   peter 
```

数据表2：

```
city     country
---      -------
Sevilla  Spain
Granada  Spain 
```

id是对应的。我需要连接这些数据表的列。

这是期望的结果：

```
id  name   city     country
--  ----   ----     -------
1   Jhon   Sevilla  Spain
2   Peter  Granada  Spain 
```

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:47:03.303

我假设您的 DataTable 名称是 "DataTable1" 和 "DataTable2" ，您可以使用以下代码将它们合并到 DataTable1 中；

```
Datatable1.Columns.Add("city", typeof(string));
Datatable1.Columns.Add("country", typeof(string));

for (int i = 0; i < Datatable1.Rows.Count; i++)
{
    Datatable1.Rows[i][2] = DataTable2.Rows[i][0].toString();
    Datatable1.Rows[i][3] = DataTable2.Rows[i][1].toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:43:14.557

您需要将主键添加到 table2，并在两个表之间添加关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:54:31.930

使用下面的代码。

```
SqlDataSource1.ConnectionString = "--YOUR CONNECTION STRING--";
SqlDataSource1.SelectCommand = "select DataTable1.id,DataTable1.name,DataTable2.city,DataTable2.country from DataTable1,DataTable2
";
SqlDataSource1.DataBind(); 
```

好运 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:54:46.867

您可以使用 DataTable 类的 marge 方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T12:07:31.923

你可以受益于 linq

1.  将您的数据表转换为 IEnumerable
2.  然后你可以在它上面应用linq。

    ```
    var results = from myRow in DataTable1.AsEnumerable()
    var results2 = from myRow in DataTable2.AsEnumerable()

    var result3= from row1 in results
                  join row2 in results2
                   select new
                  {
                      row1.id,
                      row1.name,
                      row2.city,
                      row2.country
                 }; 
    ```

# jqgrid - 带有级别标题的jqgrid treegrid

> ID：14893968
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:41:39.317
> 
> 标签：jqgrid, jqgrid-asp.net

我有一个具有多个级别的 TreeGrid 我想**为每个级别添加标题**（即类似于子网格的标题，但我不想使用它，因为子网格的列与外部网格不对齐）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:03:05.057

我想免费驾驶保时捷，并且有人应该另外支付燃料费用。:-)如果您想使用免费产品，我认为最好使用*现有产品的**现有*功能。

 *TreeGrid 如果 jqGrid 是那种网格。如果用户折叠节点，则相应的行将被隐藏。所以*网格*有列标题，不能为*树节点*创建额外的标题。

另一方面，子网格，尤其是[作为子网格](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid)的网格，更加灵活。如果您在回调内部创建子网格，`subGridRowExpanded`您可以自由设置对齐、宽度或子网格中的所有内容。您甚至可以将任何自定义 HTML 放置在子网格的位置（请参阅[答案](https://stackoverflow.com/a/4115481/315935)中[的演示](http://www.ok-soft-gmbh.com/jqGrid/SubGrid.htm)）。在[答案中](https://stackoverflow.com/a/14265456/315935)，您将找到一个示例，如果调整主网格的列大小，如何调整子网格的宽度。

所以我认为你必须使用网格作为子网格来实现你的要求。无论如何，您应该编写一些额外的代码来实现您的确切要求。*

# assembly - x86 汇编 - 多模块编程 (MASM/TASM)

> ID：14893969
> 
> 赞同：1
> 
> 时间：2013-02-15T11:41:41.227
> 
> 标签：assembly, x86, x86-16

好的，这是代码：

```
assume cs:code, ds:data
data segment
  sname db 'Some Name','$'
  len equ $-sname
  ascii db 'a'-'A'

data ends
code segment
start:
  mov ax,data
  mov ds,ax

  cld
  lea si,sname

  do_this:
    lodsb

    cmp al,61h
    jae lowercase

    uppercase:
      cmp si,len
      je the_end
      jmp continue

    lowercase:
      mov bl,ascii
      sub ax,bx

      mov ds:[si-1],al
      cmp si,len
      je the_end

  continue:
  loop do_this

  the_end:
  mov ax,0000
  lea dx,sname
  mov ah,09h
  int 21h

  mov ax,4c00h
  int 21h

code ends
end start 
```

基本上它只是将字符串'sname'的所有小写字母转换为大写。我的问题是，我如何将此代码拆分为 2 个模块，其中一个将处理字符串打印部分。具体来说，我想要一个处理字符串转换为大写的 .asm 模块，以及一个处理：

```
 lea dx,sname
  mov ah,09h
  int 21h 
```

我似乎找不到任何好的教程，所以如果你能指点我一些，将不胜感激，如果没有，一个如何将 2 个 .asm 模块放在一起的简单示例（需要哪些指令等） ） ， 会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:01:05.057

好吧，您只需将要移动的任何代码和数据移动到不同的程序集文件并保留所有段定义。`extrn`然后使用and添加一些声明`public`：

文件 1.asm：

```
code segment

public convert
convert:
  ; code for the convert routine
  ret

code ends
end 
```

文件 2.asm：

```
code segment

extrn convert:near
start:
  ; some code
  call convert
  ; some more code

code ends
end start 
```

您可能需要正式定义子例程：

```
convert proc
  ; code for the convert routine
  ret
convert endp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:00:35.317

在下方的顶部，`.MODEL`您将提供：

```
EXTRN     RANDOM:FAR 
```

然后：

```
;
          .CODE
MAIN:
          .STARTUP
;
;     
          CALL      RANDOM 
;
; 
```

在 Random.asm 中：

```
;
          .CODE   
          ASSUME    DS:RAND_DATA
;
RANDOM    PROC      FAR PUBLIC USES CX DX DS,
                    LOWER:WORD, UPPER:WORD
                                        ;FUNCTION RANDOM(LOWER,UPPER)
                                        ;SAVE REGISTERS (USES LIST)
          PUSHF                         ;SAVE FLAGS
          MOV       AX,SEG RAND_DATA    ;SET DS-REGISTER TO POINT
          MOV       DS,AX               ;TO LOCAL DATA SEGMENT
;
;
          POPF                         ;RESTORE FLAGS

          RET                          ;RETURN (RANDOM)
RANDOM    ENDP                         ;END RANDOM 
```

一方面，我不是 ASM 的大师。所以试一试，让我知道。这是来自一个工作程序，但我必须做一些剪切和粘贴，并且有多个程序，所以让我知道它是如何工作的，我会尽力解决它。

# asp.net-mvc-3 - 如何使用 Linq 2 实体聚合字符串

> ID：14893971
> 
> 赞同：0
> 
> 时间：2013-02-15T11:41:49.563
> 
> 标签：asp.net-mvc-3, linq-to-entities, devexpress

我的数据库中有一个`IQueryable<Model>`对象。我需要将它们投射到`IQueryable<ViewModel>`

```
class Model 
{
    public Guid ModelId { get; set; }

    // some properties

    public virtual User Users{ get; set; }

}

class User
{
    public Guid UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

class ViewModel
{
    public Guid ModelId { get; set }
    public string UsersName { get; set; }
} 
```

ViewModel.UsersName 应该是所有用户名字和姓氏的合并字符串。这**需要是一个 IQueryable**，因为我将使用 DevExpress Mvc Grid 并且我需要以这种方式传递它。Grid 处理分页，所以它需要 IQueryable。

我试过了：

```
IQueryable<ViewModel> viewModel = model.Select(s => new ViewModel()
        {

            UsersName = s.Users
                .OrderBy(d => d.LastName)
                .ThenBy(d => d.FirstName)
                .Aggregate(string.Empty, (s1, users) => users.FirstName + ' ' + users.Surname + ", ")
        }); 
```

但它不能翻译为 linq 到实体。我也尝试过 string.join() 但它也不起作用。

结果字符串应为示例：“Cecelia Leblanc, Sarah Hodge”...等。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:01:30.453

通常视图模型/DTO 不应该太聪明，但在这种情况下，一点点聪明就太方便了。创建一个视图模型，如：

```
class ViewModel
{
    public Guid ModelId { get; set; }
    public IEnumerable<string> UserNames { get; set; }
    public string UserNamesString
    {
        get { return string.Join(", ", this.UserNames); }
    }
} 
```

填充它

```
var models = s.Models.Select(m => new ViewModel
                        { ModelId = m.ModelId,
                          UserNames = m.Users
                                       .OrderBy(d => d.LastName)
                                       .ThenBy(d => d.FirstName)
                                       .Select(u => u.FirstName + ' ' 
                                                  + u.Surname)
                        }).ToList(); 
```

并从 访问该`UserNamesString`属性`models.AsQueryable()`。

# php - 最近和 table_uirefs 不正常

> ID：14893979
> 
> 赞同：2
> 
> 时间：2013-02-15T11:42:13.710
> 
> 标签：php, mysql, phpmyadmin

所以，我一直试图让 phpMyAdmin 正常工作，但我不知道问题出在哪里。它说一切都很好，除了 $cfg['Servers'][$i]['recent'] 和 $cfg['Servers'][$i]['table_uiprefs']

配置文件

```
 <?php
/**
 * Debian local configuration file
 *
 * This file overrides the settings made by phpMyAdmin interactive setup
 * utility.
 *
 * For example configuration see
 *   /usr/share/doc/phpmyadmin/examples/config.sample.inc.php
 * or
 *   /usr/share/doc/phpmyadmin/examples/config.manyhosts.inc.php
 *
 * NOTE: do not add security sensitive data to this file (like passwords)
 * unless you really know what you're doing. If you do, any user that can
 * run PHP or CGI on your webserver will be able to read them. If you still
 * want to do this, make sure to properly secure the access to this file
 * (also on the filesystem level).
 */

// Load secret generated on postinst
include('/var/lib/phpmyadmin/blowfish_secret.inc.php');

// Load autoconf local config
include('/var/lib/phpmyadmin/config.inc.php');

/**
 * Server(s) configuration
 */
$i = 0;
// The $cfg['Servers'] array starts with $cfg['Servers'][1].  Do not use $cfg['Servers'][0].
// You can disable a server config entry by setting host to ''.
$i++;

/**
 * Read configuration from dbconfig-common
 * You can regenerate it using: dpkg-reconfigure -plow phpmyadmin
 */
if (is_readable('/etc/phpmyadmin/config-db.php')) {
    require('/etc/phpmyadmin/config-db.php');
} else {
    error_log('phpmyadmin: Failed to load /etc/phpmyadmin/config-db.php.'
        . ' Check group www-data has read access.');
}

/* Configure according to dbconfig-common if enabled */
if (!empty($dbname)) {
    /* Authentication type */
    $cfg['Servers'][$i]['auth_type'] = 'cookie';
    /* Server parameters */
    if (empty($dbserver)) $dbserver = 'localhost';
    $cfg['Servers'][$i]['host'] = $dbserver;

    if (!empty($dbport) || $dbserver != 'localhost') {
        $cfg['Servers'][$i]['connect_type'] = 'tcp';
        $cfg['Servers'][$i]['port'] = $dbport;
    }
    //$cfg['Servers'][$i]['compress'] = false;
    /* Select mysqli if your server has it */
    $cfg['Servers'][$i]['extension'] = 'mysqli';
    /* Optional: User for advanced features */
    $cfg['Servers'][$i]['controluser'] = $dbuser;
    $cfg['Servers'][$i]['controlpass'] = $dbpass;
    /* Optional: Advanced phpMyAdmin features */
    $cfg['Servers'][$i]['pmadb'] = $dbname;
    $cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
    $cfg['Servers'][$i]['relation'] = 'pma_relation';
    $cfg['Servers'][$i]['table_info'] = 'pma_table_info';
    $cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
    $cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
    $cfg['Servers'][$i]['column_info'] = 'pma_column_info';
    $cfg['Servers'][$i]['history'] = 'pma_history';
    $cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
    $cfg['Servers'][$i]['tracking'] = 'pma_tracking';
    $cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';

    /* Uncomment the following to enable logging in to passwordless accounts,
     * after taking note of the associated security risks. */
    // $cfg['Servers'][$i]['AllowNoPassword'] = TRUE;

    /* Advance to next server for rest of config */
    $i++;
}

/* Authentication type */
//$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
//$cfg['Servers'][$i]['host'] = 'localhost';
//$cfg['Servers'][$i]['connect_type'] = 'tcp';
//$cfg['Servers'][$i]['compress'] = false;
/* Select mysqli if your server has it */
//$cfg['Servers'][$i]['extension'] = 'mysql';
/* Optional: User for advanced features */
    $cfg['Servers'][$i]['controluser'] = 'pma';
    $cfg['Servers'][$i]['controlpass'] = 'pmapass';
/*  Optional: Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'pma';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
/* Uncomment the following to enable logging in to passwordless accounts,
 * after taking note of the associated security risks. */
// $cfg['Servers'][$i]['AllowNoPassword'] = TRUE;

/*
 * End of servers configuration
 */

/*
 * Directories for saving/loading files from server
 */
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';
$cfg['blowfish_secret'] = 'a8b7c6d'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-31T14:06:32.357

我刚刚从 PMA v3.5.4 升级到 v4.0.5 并遇到了同样的问题

> phpMyAdmin 配置存储未完全配置，部分扩展功能已停用。要找出原因，请单击此处。

单击链接让我了解了尚未设置的内容

> $cfg['Servers'][$i]['recent'] ... 不正常 [ 文档 ] 持久性最近使用的表：已禁用 $cfg['Servers'][$i]['table_uiprefs'] ... 不好的 [文档] 持久表的 UI 首选项：已禁用

## 设置高级功能的快速步骤：

从底部复制`http://SERVER/phpmyadmin/chk_rel.php`

*   使用示例/create_tables.sql 创建所需的表。文档
*   创建一个 pma 用户并授予对这些表的访问权限。文档
*   在配置文件 (config.inc.php) 中启用高级功能，例如从 config.sample.inc.php 开始。文档
*   **重新登录 phpMyAdmin 以加载更新的配置文件。**

## 详细的：

**步骤 1.**添加额外的配置到`phpMyAdmin/config.inc.php`

```
$cfg['Servers'][$i]['recent']        = 'pma_recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs'; 
```

**步骤 2.**使用 修改 phpMyAdmin 数据库`phpMyAdmin/examples/create_tables.sql`。***当然重命名了表名！***

```
-- --------------------------------------------------------

--
-- Table structure for table `pma_recent`
--

CREATE TABLE IF NOT EXISTS `pma_recent` (
  `username` varchar(64) NOT NULL,
  `tables` text NOT NULL,
  PRIMARY KEY (`username`)
)
  COMMENT='Recently accessed tables'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;

-- --------------------------------------------------------

--
-- Table structure for table `pma_table_uiprefs`
--

CREATE TABLE IF NOT EXISTS `pma_table_uiprefs` (
  `username` varchar(64) NOT NULL,
  `db_name` varchar(64) NOT NULL,
  `table_name` varchar(64) NOT NULL,
  `prefs` text NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`username`,`db_name`,`table_name`)
)
  COMMENT='Tables'' UI preferences'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;

-- -------------------------------------------------------- 
```

**步骤 3.**确保注销 PhpMyAdmin 并重新登录，刷新不会重新加载配置文件。

我们没有更多的错误

```
$cfg['Servers'][$i]['recent'] ...   OK
Persistent recently used tables: Enabled

$cfg['Servers'][$i]['table_uiprefs'] ...    OK
Persistent tables' UI preferences: Enabled 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T15:27:53.843

问题：：

请参阅有关如何更新您的 column_info 表的文档。文档 $cfg['Servers'][$i]['bookmarktable'] ... OK

$cfg['Servers'][$i]['f​​avorite'] ... 不对 永久收藏表：关闭

$cfg['Servers'][$i]['central_columns'] ... 不正确管理中央列列表：关闭

* * *

config.inc.php::

$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';

$cfg['Servers'][$i]['f​​avorite'] = 'pma__favorite';

$cfg['Servers'][$i]['central_columns'] = 'pma__central_columns';

# c# - 制作 Azure 数据库的副本

> ID：14893987
> 
> 赞同：2
> 
> 时间：2013-02-15T11:43:06.870
> 
> 标签：c#, .net, azure, azure-sql-database

我需要制作一个天蓝色数据库的副本，但我无权访问任何管理工具，只能访问一个连接字符串。

我知道要使用`CREATE DATABASE x AS COPY OF y`我需要在`master`数据库中的命令，但我不知道如何告诉 Azure 从那里运行我的命令。例如，我有这个代码：

```
var commandText = "CREATE DATABASE foobar AS COPY OF " + database;
var connectionString = <my_connection_string>;

using (var conn = new SqlConnection(connectionString))
{
    using (var cmd = new SqlCommand(commandText, conn))
    {
        cmd.CommandType = CommandType.Text;
        conn.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

正如我所料，失败并出现错误“用户必须在主数据库中”。

但是我的连接字符串对主数据库无效，那么如何从主数据库执行此命令？如果我在 SQL Management Studio 中，我会这样做：

```
use master
CREATE DATABASE x AS COPY OF y 
```

有没有办法在我的代码中模拟它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:46:25.767

更改连接字符串以访问主数据库而不是常规数据库。就这么简单，也是唯一的解决方案。

# javascript - 在保留单个击键的同时不中断键事件

> ID：14893988
> 
> 赞同：1
> 
> 时间：2013-02-15T11:43:10.433
> 
> 标签：javascript

我正在通过 javascript 设计键盘界面，并且我想定义击键组合，例如 shift+rightkey 或 ctrl+tab。但是在修改了 javascript 之后，如**[这里](http://jsfiddle.net/Arcym/ENUj2/7/)**所见，我注意到所有的键事件都在中断。在提供的示例中，如果您在按住右键的同时按 shift 键，则右键的功能会中断！

```
v = 1; /*v is the variable of velocity.*/

window.addEventListener("keydown", function(event)
{
    if(event.keyCode == 39) /*39 is the keycode of rightarrowkey.*/
    {
        //moves an element by the velocity.
        var keystroke = document.getElementById("keystroke");
        keystroke.style.left = parseInt(keystroke.style.left.slice(0,-2))+v+"px";
    }
    if(event.keyCode == 16) /*16 is the keycode of shift.*/
    {
         //increases the velocity of the element by four.
        document.getElementById("keystroke").style.borderColor = "red";
        v = 4;
    }
}, false); //but hitting the shiftkey while hitting the rightkey interrupts..! 
```

我还尝试通过一个对象记录所有击键，然后以指定的时间间隔对定义的击键进行迭代，如此处**[所示](http://jsfiddle.net/Arcym/kjkCc/3/)**。但是这个处理键盘的系统并没有*保留*单独的击键；如果我击键太快，可能不会考虑，或者如果我按住键太久，可能会过度考虑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:38:11.697

经过一番思考，我可能想出了一种方法，既可以保留每个击键，又可以处理中断的键事件。我的代码有些古怪，但它可以很好地管理用户的击键。

正如我之前在问题中所建议的那样，在不中断的情况下处理每次击键的解决方案是通过在对象中注册每个键事件。代码不断地遍历这个对象来处理任何新的键事件。

但是为了确保每个击键至少被保存和处理一次，必须为每个键事件注册一个键绑定。我扩展了对象的脚本以注册击键和键绑定。

```
var kbdin =
{
    stroked: new Object(),
    upbinded: new Object(),
    downbinded: new Object(),

    downbindKeystroke: function(keycode, functionality) {this.downbinded[keycode] = functionality;},
    upbindKeystroke: function(keycode, functionality) {this.upbinded[keycode] = functionality;},
    isDownbinded: function(keycode) {return this.downbinded[keycode];},
    isUpbinded: function(keycode) {return this.upbinded[keycode];},
    isStroked: function(keycode) {return this.stroked[keycode];},

    onDownstroke: function(event)
    {
        var keycode = event.keyCode;
        if(!this.isStroked(keycode))
        {
            this.stroked[keycode] = 1;
            if(this.isDownbinded(keycode))
            {this.downbinded[keycode]();}
        }
        if(this.isDownbinded(keycode))
        {event.preventDefault();}
    },

    onUpstroke: function(event)
    {
        var keycode = event.keyCode;
        delete this.stroked[keycode];
        if(this.isUpbinded(keycode))
        {
            this.upbinded[keycode]();
            event.preventDefault();
        }
    },

    handleKeystrokes: function()
    {
        for(var keycode in this.downbinded)
        {
            if(this.isStroked(keycode) > 5)
            {this.downbinded[keycode]();}
        }

        for(var keycode in this.stroked)
        {this.stroked[keycode]++;}
    }
};

document.addEventListener("keyup", function(event) {kbdin.onUpstroke(event);}, false);
document.addEventListener("keydown", function(event) {kbdin.onDownstroke(event);}, false);
window.setInterval(function() {kbdin.handleKeystrokes();}, 50); 
```

现在，击键和键绑定都耦合在一起，支持每个键事件的功能，既可以发出击键信号，也可以执行键绑定。这可能有点古怪，但是这段代码处理了不间断的按键事件，同时仍然保留了单个按键！

# python - 如何强制线程停止，python

> ID：14893992
> 
> 赞同：0
> 
> 时间：2013-02-15T11:43:23.750
> 
> 标签：python, multithreading

在我的代理项目中，有时服务器进程（由老师给出）以错误（以 404 开头的字符串）结束，所以我希望发送请求的线程停止而不是继续。我尝试过使用“return”或“sys.exit()”，但这似乎阻止了一切，并且代理停止接收请求并创建线程。为什么？

```
from socket import *
from threading import *
import sys
import colors 
import os
import time

def startPrefetch(pagesToPrefetch, mutex):
    for i in pagesToPrefetch:
        print i

def receivePage(conn, addr, request, mutex):
    HOSTSERVER = "127.0.0.1"
    SERVERPORT = 55555
    socketRequestServer = socket(AF_INET, SOCK_STREAM)
    socketRequestServer.connect((HOSTSERVER, SERVERPORT))
    socketRequestServer.send(request)

    finalResponse = ''

    while True:
        partialResponse = socketRequestServer.recv(64)
        if (not partialResponse): break
        finalResponse = finalResponse+partialResponse        

    if (finalResponse[0] == '4'):
        c = colors.colors()
        print c.ERROR + finalResponse + "INTERNAL SERVER ERROR"
        print c.WHITE
        return
        #sys.exit(1)

    socketRequestServer.close()      
    conn.sendall(finalResponse)
    conn.close()

    pagesToPrefetch = []

    sourceToString = finalResponse.split(' ')
    for i in sourceToString:
        if (len(i) != 0):
            if (i[0] == '<'):
                pagesToPrefetch.append(i)

    startPrefetch(pagesToPrefetch, mutex)

if __name__ == '__main__':
    HOST = '127.0.0.1'
    PORT = 55554

    print 'Creating socket'
    socketProxy = socket(AF_INET, SOCK_STREAM)

    print 'bind()'
    socketProxy.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
    socketProxy.bind((HOST, PORT))

    #Cache directory and mutex for it
    mutex = Semaphore(1)
    try:
        os.mkdir("cache")
    except OSError:
        print 'Created cache directory'

    while True:
        print 'Waiting for connection request'
        socketProxy.listen(1)
        conn, addr = socketProxy.accept()

        print 'Connected to ', addr

        request = conn.recv(512)        

        receiver = Thread(target = receivePage, args = (conn, addr, request, mutex))
        receiver.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:30:18.813

使用`return`是正确的方法（不过，您应该在这样做之前关闭连接）。

正如大卫建议的那样：

```
request = conn.recv(512) 
```

可能是罪魁祸首。如果建立连接但没有发送数据，则主线程将被锁定。更不用说请求可能大于 512。

将该行移到函数内部`receivePage`（并且不要传递`request`给`Thread`构造函数）并让我们知道它是否有效。

# database - 在 SQL 视图中使用更新查询时，在 MS Access 2007 中转换的日期和月份值

> ID：14893993
> 
> 赞同：0
> 
> 时间：2013-02-15T11:43:23.423
> 
> 标签：database, vb.net

我在将日期保存到 MS Access 2007 数据库时遇到了挑战，尤其是对于日期小于一个月的 12 日（即 01 到 11 之间的日期）的日期，**例如**，如果a`February date - 07/02/2013 (dd/MM/yyyy)` 将保存为`02/07/2013`数据库中。`14/02/2013`同时也将保存类似的二月日期`14/02/2013`。检索两个日期：第一个日期为 7 月 2 日，第二个日期为 2 月 14 日。

请注意，对于小于 11 日的日期，日期和月份值会被转置。当我使用更新查询（从 VB 2005 或直接在 MS Access 中使用 SQL 窗格）时会发生这种情况。我已将系统短日期设置（在 Windows 7 操作系统中）和字段级别的日期格式（在 MS 访问表中）设置为**dd/MM/yyyy**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:58:47.087

尝试 -`DateValue("dd-mm-yyyy")`

或 - `Format(Date,"dd-mm-yyyy")`作为表达式生成器。

# java - 内部框架不工作

> ID：14893995
> 
> 赞同：1
> 
> 时间：2013-02-15T11:43:29.097
> 
> 标签：java, swing

嗨，我在一个容器内创建了三个框架，每个框架都有三个按钮，它们执行最小、最大和关闭的功能。令人惊讶的是，只有一个框架在工作，其余三个不工作。你能把它整理一下吗。谢谢

```
 package Project;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.*;
import java.beans.PropertyVetoException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.*;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

public class Test4 {
      JInternalFrame inf ;
      DesktopPane pane;

    public static void main(String[] args) {
        new Test4();
    }

    private int xpos = 0;
    private int ypos = 0;

    public Test4() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
                pane = new DesktopPane();
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());

                JFrame frame = new JFrame();
                frame.add(pane);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public JInternalFrame newInternalFrame() {
      inf= new JInternalFrame("Blah", true, true, true, true);
        inf.setLocation(xpos, ypos);
        inf.setSize(200, 100);
        inf.setVisible(true);

        xpos += 50;
        ypos += 50;

        JPanel jp = new JPanel();
        JLabel jl=new JLabel("panel"+xpos);

        JButton jb = new JButton("_");
        JButton jb2 = new JButton("[]");
        JButton jb3 = new JButton("X");

        inf.setLayout(new GridLayout(2, 2));
jp.add(jl);
        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        inf.add(jp);
        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (inf.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
                        pane.remove(inf);
                        pane.add(inf, JDesktopPane.DEFAULT_LAYER);
                        pane.revalidate();
                        pane.repaint();
                    }
                    inf.pack();
                    inf.setIcon(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
        jb2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (inf.isMaximum()) {//restore
                        inf.pack();
                    } else {//maximize
                        inf.setMaximum(true);

                    }
                    pane.remove(inf);
                    pane.add(inf, JDesktopPane.FRAME_CONTENT_LAYER);
                    pane.revalidate();
                    pane.repaint();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
        jb3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    inf.dispose();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

            }
        });

        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) inf.getUI()).getNorthPane();
        inf.remove(titlePane);
        return inf;
    }

    public class DesktopPane extends JDesktopPane {

        @Override
        public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            int maxLayer = 0;

            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                    maxLayer = Math.max(getLayer(comp), maxLayer);
                }
            }

            maxLayer++;
            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();
                setLayer(icon, maxLayer);

            }
        }
     /*   public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                }
            }

            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();

            }
        }*/
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:42:29.937

```
package Project;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.*;
import java.beans.PropertyVetoException;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

public class Test4 {

    private JDesktopPane pane;

    public static void main(String[] args) {
        new Test4();// there was a little change here
    }
    private int xpos = 0;
    private int ypos = 0;

    public Test4() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
                pane = new Test4.DesktopPane() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(400, 400);
                    }
                };
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());

                JFrame frame = new JFrame();
                frame.add(pane);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public JInternalFrame newInternalFrame() {
        final JInternalFrame inf = new JInternalFrame("Blah", true, true, true, true);
        inf.setLocation(xpos, ypos);
        inf.setSize(200, 100);
        inf.setVisible(true);

        xpos += 50;
        ypos += 50;

        JPanel jp = new JPanel();
        JLabel jl = new JLabel("panel" + xpos);

        JButton jb = new JButton("_");
        JButton jb2 = new JButton("[]");
        JButton jb3 = new JButton("X");

        inf.setLayout(new GridLayout(2, 2));
        jp.add(jl);
        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        inf.add(jp);
        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (inf.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
                        pane.remove(inf);
                        pane.add(inf, JDesktopPane.DEFAULT_LAYER);
                        pane.revalidate();
                        pane.repaint();
                    }
                    inf.pack();
                    inf.setIcon(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
        jb2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (inf.isMaximum()) {//restore
                        inf.pack();
                    } else {//maximize
                        inf.setMaximum(true);

                    }
                    pane.remove(inf);
                    pane.add(inf, JDesktopPane.FRAME_CONTENT_LAYER);
                    pane.revalidate();
                    pane.repaint();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
        jb3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    inf.dispose();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

            }
        });

        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) inf.getUI()).getNorthPane();
        inf.remove(titlePane);
        return inf;
    }

    public class DesktopPane extends JDesktopPane {

        @Override
        public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            int maxLayer = 0;

            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                    maxLayer = Math.max(getLayer(comp), maxLayer);
                }
            }

            maxLayer++;
            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();
                setLayer(icon, maxLayer);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:04:01.110

只需添加以下行

```
final JInternalFrame inf= new JInternalFrame("Blah", true, true, true, true); 
```

代替`inf= new JInternalFrame("Blah", true, true, true, true);`

并将其`JInternalFrame inf`从 main 中删除。

# entity-framework - 首先在实体框架代码中删除 localdb

> ID：14893998
> 
> 赞同：2
> 
> 时间：2013-02-15T11:43:35.557
> 
> 标签：entity-framework, ef-code-first, code-first, localdb

我正在用 NUnit 和实体框架编写一些单元测试。如何从实体框架级别删除整个 localdb 数据库？

**注意：**我不想清除表格的数据。我想删除整个数据库。

如果尚未创建数据库，我还可以在我的应用程序工作目录中创建一个 localdb 文件：

```
string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "");
var testDbFileName = String.Format(@"UnitTestDB.mdf");
var testDbFileNameWithPath = path + @"\" + testDbFileName;

var connectionString =
String.Format(
    @"Data Source=(localdb)\V11.0;Initial Catalog={0};Integrated Security=True;AttachDBFilename={1};MultipleActiveResultSets=True",
    "UnitTestDB", testDbFileNameWithPath);

//Here would be the code passing connection string to DbContext and so on.. 
```

仅删除文件“UnitTestDB.mdf”是不够的。SQL Management Studio 中还有对 db 的引用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:49:22.693

在代码中有两种方法可以做到这一点。如果可以的话，首先坚持使用 EF 代码:-)

1) EF 在上下文中有一个不错的选择。

```
 Context.Database.Delete() 
```

2）如果你想要老式的 SQLCommand/SqlConnection 方法，比如这个 hack 例程......

```
 public  bool DropDB(string DBName, string ConnectionString)
    {

        SqlConnection conn = null;
        SqlCommand cmd = null;
        string stmt = null;

        int rowCount = 0;

        if (string.IsNullOrEmpty(DBName))
            throw new ArgumentNullException(DBName, "DBName required");

        try
        {
            conn = new SqlConnection(ConnectionString);

           stmt = "DROP DATABASE " + DBName ;

            cmd = new SqlCommand(stmt, conn);
            conn.Open();
            rowCount = cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (Exception)
        {
            //todo  whatever
            throw;
        }
        finally
        {
            if (conn != null) conn.Dispose();
            if (cmd != null) conn.Dispose();
        }
        if (rowCount == -1) return true;
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T14:00:37.770

您也可以使用 shell 命令将其删除。如果需要，您可以添加带有`-U Username` `-P Password`参数的凭据。

查看[sqlcmd 文档](https://docs.microsoft.com/en-us/sql/ssms/scripting/sqlcmd-use-the-utility?view=sql-server-ver15)！

```
sqlcmd -e -S "(LocalDb)\MSSQLLocalDB" -d "master" -Q "EXEC msdb.dbo.sp_delete_database_backuphistory @database_name = N'your-database-name'; USE [master]; DROP DATABASE [your-database-name];" 
```

# apache-flex - 如何将 S5 Flex 菜单黑色的颜色更改为其他颜色？(Joomla 1.6 S5 购物袋)

> ID：14893999
> 
> 赞同：0
> 
> 时间：2013-02-15T11:43:35.997
> 
> 标签：apache-flex, joomla, menu, s5

我正在尝试更改顶部菜单的颜色，它看起来像一个渐变，我找不到任何包含任何背景菜单颜色或其图片的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T10:54:37.310

只需在主题特定选择中更改突出显示 1 颜色。扩展/模板管理器/您的主题名称/顶点/主题特定

![在此处输入图像描述](../Images/51a3b4ac74bfaa5fafb5a64459392fe2.png)