# StackOverflow 问答 14754000-14754999

# oracle - oracle数据库架构是单层、两层还是多层？

> ID：14754000
> 
> 赞同：-2
> 
> 时间：2013-02-07T14:52:08.037
> 
> 标签：oracle, oracle10g

我目前正在学习 oracle 数据库管理 10g。我想知道 Oracle 架构属于哪一层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:04:10.127

Oracle 数据库具有客户端服务器架构。

从文档中：

> 在 Oracle 客户端/服务器架构中，数据库应用程序和数据库分为两部分：前端或客户端部分，以及后端或服务器部分。客户端执行访问数据库信息的数据库应用程序，并通过键盘、屏幕和鼠标等定点设备与用户交互。服务器执行 Oracle 软件并处理并发共享数据访问 Oracle 数据库所需的功能。

在这种情况下，客户端可能是很多东西，包括 sqlplus、Toad（或任何其他 IDE）、Java、.net 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:31:04.933

传统的三层模型是

```
client -> application server -> data storage 
```

数据存储通常是一个数据库，所以这个层通常被称为数据库层。

这就是 Oracle 数据库所在的位置。Oracle 架构的其他部分将位于其他位置。例如，SQL Plus 是一个客户端，位于客户端层，可以直接访问数据库（两层），而如今的 OEM 是一个基于浏览器的客户端，带有一个应用服务器层（三层）。

当然，现代企业通常拥有更复杂的多层架构（内存数据库/缓存、SAN 等）

# php - Zend 框架在模块 preDispatch 上执行代码

> ID：14754001
> 
> 赞同：0
> 
> 时间：2013-02-07T14:52:09.587
> 
> 标签：php, zend-framework

您好，所以我创建了一个`Zend_Controller_Plugin_Abstract`并在`routeStartup`我做一些检查并将数据插入数据库中，问题是如果我只访问一个页面一次，它会执行 5 次，所以我将在表中有 5 行。

你知道如何做一个控制器 preDispatch 功能，它只会执行一次，我需要每次对用户做一些检查，刷新/访问页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:15:29.820

控制器插件方法应该只执行一次。他们不这样做的唯一原因是如果您的应用程序用于`_forward()`将请求转发到另一个操作，因为这会导致另一个调度周期。

我建议暂时在您的函数中添加一些调试以记录 REQUEST_URI 可能使用`error_log()`. 它可能类似于您的浏览器请求`/favicon.ico`，这会导致 404 页面也由您的 ZF 应用程序提供（因此也使用该插件）。

# c# - asp.net中jquery调用的问题

> ID：14754002
> 
> 赞同：0
> 
> 时间：2013-02-07T14:52:09.363
> 
> 标签：c#, asp.net, ajax

让我告诉你，我是 Ajax 和 Jquery 以及 asp.net 的初学者，我有一个带有 c# 后端编码的 aspx 页面。我有一个单独的更新面板，其中依次包含一个 asp:table，一列包含一个带有两个字段的表单和一个用于添加组织部门的按钮，表的另一列包含一个网格视图以列出所有部门该组织的。

我的问题：每当我在更新面板中提交表单时，

## 有时它会在左栏中显示一条消息“已成功添加部门”，有时会更新gridview，有时以上两个都没有更改（即使已将部门添加到数据库中），有时也没有进行了更改，也没有将部门添加到数据库中。

经过同样的工作，才知道，第二次提交表单什么也没做。第一次一切正常，但是当我提交第二个部门时，$.POST() 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:15:00.633

我会让它在没有更新面板的情况下工作。让它在没有 ajax 的情况下工作（逐步执行代码），然后添加 .net ajax 组件。如果您是初学者，一旦核心功能正常工作，它有助于解决问题，从小处着手并添加花哨的功能。

# excel - 如何在 Excel 的 SUMIFS 函数中指定比较日期的标准？

> ID：14754003
> 
> 赞同：0
> 
> 时间：2013-02-07T14:52:11.353
> 
> 标签：excel, excel-formula, excel-2010

我正在使用 Excel 2010，其中包含[SUMIFS](http://office.microsoft.com/en-us/excel-help/sumifs-function-HA010047504.aspx)函数。我的电子表格是这种格式：

```
 A          B            C
  Date       Amount      Category
01/01/2013   $20.00      CatA
01/12/2013   $35.67      CatB
02/04/2013   $16.98      CatA 
```

等等。在电子表格的另一部分，我有这些单元格：

```
 X            Y
1               CatA_header
2    Jan-13     formula...
3    Feb-13 
4    Mar-13 
```

我想在`formula...`（在单元格 Y2 中）指定的单元格中放置一个公式，该公式将给定类别的 B 列和给定的年/月组合相加。我认为`SUMIFS`这是正确的任务，所以我尝试了这个公式：

```
=SUMIFS(B:B, A:A, AND(MONTH(A:A)=MONTH(X2), YEAR(A:A)=YEAR(X2)), C:C, "="&Y1) 
```

但是，这会返回 0，即使在我设计的示例中它应该返回 20。如何使用该`SUMIFS`功能来执行此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:09:04.443

您的行号似乎偏离了 1，例如`Y0`. 另外，我不认为您不能像那样过滤条件范围。这是适用于第 2 到第 10 行的 SUMPRODUCT：

```
=SUMPRODUCT(($B$2:$B$10)*(MONTH($A$2:$A$10)=MONTH(X2))*(YEAR($A$2:$A$10)=YEAR(X2))*($C$2:$C$10= Y$1)) 
```

# php - 如何检查 Couchbase 中是否存在密钥？

> ID：14754007
> 
> 赞同：4
> 
> 时间：2013-02-07T14:52:23.630
> 
> 标签：php, couchbase

我已经想到了两种我不太喜欢的方法：

1.  在 try..catch..中调用*touch(key, null)并从 catch 部分返回 false。*但是后来我正在更改对我不利的 ttl。
2.  在 try..catch..中调用*add(key, value)*并从 catch 部分返回 false - 这会降低效率，因为我必须删除我刚刚添加的键。

顺便说一句，我的环境是 PHP。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T06:31:24.077

Couchbase 目前还没有提供`exists`方法，但是你可以使用`add`和`delete`做这些东西，这对 Memcache/Memcached 也很有用

```
public function exists($key)
{
    if ($this->object->add($key, true)) {
        $this->object->delete($key);
        return false;
    }
    return true;
} 
```

[https://github.com/twinh/widget/blob/master/lib/Widget/Couchbase.php#L118](https://github.com/twinh/widget/blob/master/lib/Widget/Couchbase.php#L118)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:37:54.453

我也缺少一个简单的`Exists`成员。

在.Net客户端中，您拥有`client.TryGet`它，但是仍然会拉取该项目，当它返回时`false`，这并不意味着它不存在，只是它无法拉取它（只是尝试在我的节点关闭的情况下执行它） .

再次为.Net 客户端，但`ExecuteGet`会给你一个`IGetOperationResult`将暴露例如`HasValue`，但再次拉入实际值。

使用*视图*？也许有点脏，但是您可以让视图仅返回 Id，这也将消除检索文档的需要。但不确定它是否真的会表现得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:40:00.117

查看这个示例，取自 couchbase

```
 #retrieve the last access date/time of the script.
  #the key name is is the script name prefixed with DATE::
  $last_access_date=$cb_obj->get("DATE::" . $script_name);

  #handle the case where this is the first access to the script
  #and that key doesn't yet exist
  if($last_access_date == NULL){
  $last_access_date = "never";
   } 
```

[文章链接](http://www.couchbase.com/docs/couchbase-sdk-php-1.0/accessing-php.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:46:01.240

一个简单的方法是做一个 get(key); 如果键存在，则返回值，如果不存在，则操作返回 null。

你的申请还可以吗？

请注意，由于所有键都在内存中，因此无论键是否存在，获取都一样快。

# c# - 如何运行 x64 调试模式 DLL 是“任何 CPU”？

> ID：14754008
> 
> 赞同：2
> 
> 时间：2013-02-07T14:52:24.113
> 
> 标签：c#, wpf, visual-studio-2010, dll, platform-independent

我将 DLL 编译为“任何 CPU”，因此它们可以在 x86 和 x64 中运行，但是当我尝试在调试模式 (x64) 下运行时，它一直告诉我尝试运行项目时出错：无法加载文件或程序集'项目'或其依赖项之一。试图加载格式不正确的程序。

但是，当我运行从调试目录创建的 *.exe 或在没有调试的情况下在 Visual Studio 中运行它时，它运行良好，如果我在 x86 调试模式下运行它也可以。为什么它可以在 Visual Studio 中的调试模式之外的所有环境中工作？

该应用程序是桌面应用程序，因此没有 IIS 应用程序池可以更改为 32 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:28:11.733

使用[corflags.exe](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx)获取“项目”dll 的 PE 信息。它应该说`PE:PE32+`，`32Bit:0`如果它是作为 x64 构建的。检查以确保“项目”的调用者正在引用该项目，而不是其他地方构建目录中的流氓 dll。

*   首先检查参考
*   使用 corflags 检查该参考
*   报告结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:51:34.773

我注意到有时当您更改配置时，并不会更改所有项目。如果您在 x64 配置中转到 Build > Configuration Manager，是否所有项目都设置为构建 x64 版本？

# python - Python正则表达式问题

> ID：14754013
> 
> 赞同：2
> 
> 时间：2013-02-07T14:52:39.947
> 
> 标签：python, regex

所以我试图在 python 上做得更好，但是我在使用 re 模块进行正则表达式时遇到了一些麻烦。

我有一个逗号分隔的 csv 文件，我正在读取它，然后我想找到所有以逗号 5 结尾的行。所以我使用了下面的代码：

```
 five_rating = re.compile(r",5$", re.MULTILINE)
    print five_rating.findall(file.read()) 
```

但我没有得到任何输出。肯定有与我正在使用的正则表达式匹配的事件，我已经在 python 正则表达式网站上测试了我的正则表达式，它们模拟了我想要的，但是在代码中，它只是不起作用！

有什么明显的我做错了吗？

哦，我使用的是 Ubuntu，文件应该有 DOS 样式的行尾，但我尝试使用[这篇文章](http://code.activestate.com/recipes/66434-change-line-endings/)中的代码转换尾行字符，但没有成功。

顺便说一句，这是输入的示例：

```
9605,Ace Ventura: Pet Detective,5
9606,Ace Ventura: Pet Detective,1
9607,Ace Ventura: Pet Detective,4
9608,Ace Ventura: Pet Detective,3
9609,Ace Ventura: Pet Detective,2
9610,Ace Ventura: Pet Detective,4
9611,Ace Ventura: Pet Detective,3
9612,Ace Ventura: Pet Detective,4
9613,Ace Ventura: Pet Detective,5
9614,Ace Ventura: Pet Detective,5
9615,Ace Ventura: Pet Detective,4
9616,Ace Ventura: Pet Detective,1
9617,Ace Ventura: Pet Detective,3
9618,Ace Ventura: Pet Detective,4
9619,Ace Ventura: Pet Detective,3
9620,Ace Ventura: Pet Detective,1
9621,Ace Ventura: Pet Detective,2
9622,Ace Ventura: Pet Detective,3
9623,Ace Ventura: Pet Detective,5
9624,Ace Ventura: Pet Detective,2
9625,Ace Ventura: Pet Detective,2
9626,Ace Ventura: Pet Detective,4
9627,Ace Ventura: Pet Detective,3
9628,Ace Ventura: Pet Detective,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:56:45.227

给定您作为多行字符串的输入（可能是文件），如下所示：

```
st='''9605,Ace Ventura: Pet Detective,5
9606,Ace Ventura: Pet Detective,1
9607,Ace Ventura: Pet Detective,4
9608,Ace Ventura: Pet Detective,3
9609,Ace Ventura: Pet Detective,2
9610,Ace Ventura: Pet Detective,4
9611,Ace Ventura: Pet Detective,3
9612,Ace Ventura: Pet Detective,4
9613,Ace Ventura: Pet Detective,5
9614,Ace Ventura: Pet Detective,5
9615,Ace Ventura: Pet Detective,4
9616,Ace Ventura: Pet Detective,1
9617,Ace Ventura: Pet Detective,3
9618,Ace Ventura: Pet Detective,4
9619,Ace Ventura: Pet Detective,3
9620,Ace Ventura: Pet Detective,1
9621,Ace Ventura: Pet Detective,2
9622,Ace Ventura: Pet Detective,3
9623,Ace Ventura: Pet Detective,5
9624,Ace Ventura: Pet Detective,2
9625,Ace Ventura: Pet Detective,2
9626,Ace Ventura: Pet Detective,4
9627,Ace Ventura: Pet Detective,3
9628,Ace Ventura: Pet Detective,1''' 
```

这有效：

```
import re

for line in st.splitlines():
    m=re.search(r'(^.*,5$)',line)
    if m: print m.group(0) 
```

或`re.findall`版本：

```
print re.findall(r'(^.*,5$)',st, re.MULTILINE) 
```

或（恕我直言有点令人困惑） re.findall 将在没有括号的情况下工作：

```
print re.findall(r'^.*,5$',st, re.MULTILINE) 
```

你的不工作，因为没有`.*`意义'匹配所有东西'，5 $'

同样如其中一条评论所述，`file`用作标识符是一个坏主意。

您还可以使用 Python 的字符串处理来执行此操作：

```
for line in st.splitlines():
    if line.endswith(',5'): print line 
```

如果你真的有一个 CSV 文件要处理——使用内置的 CSV 模块。

* * *

最后——如果你在 *nix 上有一个 DOS 文件，只需使用 Python 的[通用行](http://docs.python.org/2/glossary.html#term-universal-newlines)支持，在其中使用[带有 'U'](http://docs.python.org/2/library/functions.html#open)的 open：

```
with open(...,'rU') as infile: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:02:58.083

请注意，您在这里并不需要正则表达式：

```
with open('file') as f:
    lines = [l.strip() for l in f.readlines() if l.strip().endswith(',5')]

print(list(lines))
>>> ['9605,Ace Ventura: Pet Detective,5', '9613,Ace Ventura: Pet Detective,5', '9614,Ace Ventura: Pet Detective,5', '9623,Ace Ventura: Pet Detective,5'] 
```

# asp.net-mvc - 为什么我在复制到新 MVC4 项目中的所有控制器上都收到 HTTP 404？

> ID：14754014
> 
> 赞同：0
> 
> 时间：2013-02-07T14:52:50.053
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我创建了一个新的 MVC4 项目，因为我在我正在处理的项目中处理了太多默认的模板化内容。我将身份验证设置为“无”，并复制了很多组件，例如控制器、基类、视图模型、验证器（Fluent 验证）等。我保留了原始`Home`控制器和视图。

那个原始`Home`页面，通过它的`Index`动作，就是所有的工作。我所有的“导入”控制器都派生自`ComairRIController`，而`Home`没有，但我什至尝试从我的一个控制器中删除此继承，并仅从 继承`Controller`，就像 一样`Home`，没有任何效果；我仍然得到404。

该项目构建时完全没有错误或警告，并且在打开 Home/Index 视图时运行良好。这里有什么问题？我该如何诊断？my 的构造函数`ComairRIController`甚至没有被调用，所以请求根本没有走得太远。

我正在使用默认路由配置：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

**重要信息：**源项目（纯 MVC4）和目标项目（Orchard 模块）具有完全相同的名称和默认命名空间。我故意这样做是为了避免尽可能多的命名空间不匹配。

**新信息：**我通过 NuGet 添加了 Elmah 2.0.2，并将其设置为记录到 XML 文件。它为每个 404 记录一个错误，错误是（为简洁起见，我省略了堆栈跟踪）：

```
<error errorId="db2b4236-b913-4b98-878e-f3e02fdff321" 
    application="/" 
    host="7F3KH5J" 
    type="System.Web.HttpException" \
    message="The controller for path '/ApplicantProfile/Start' was not found or does not implement IController." 
    source="System.Web.Mvc" 
    detail="System.Web.HttpException (0x80004005): The controller for path '/ApplicantProfile/Start' was not found or does not implement IController.&#xD;&#xA; 
```

有趣的是，对 Elmah.axd 的请求也会返回 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:57:10.410

您提到您从现有项目中复制了一些组件，但没有提及您是否复制了除 Home/Index 操作之外的任何内容的视图。

您的任何其他控制器是否都没有匹配的视图？

# java - wsimport 生成的 SOAP 客户端，是否有机会查看生成的 XML 以获取请求/响应？

> ID：14754021
> 
> 赞同：2
> 
> 时间：2013-02-07T14:53:18.480
> 
> 标签：java, soap, wsimport

我有一组`wsimport`由 WSDL 实用程序生成的 java 类。（客户端）是否有（*简单，不涉及嗅探器和自己的服务器复制*）方法来查看发送的生成的 XML？我的意思是在代码内部，某种方法或类似的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:05:32.663

这里最好的选择是使用消息处理程序。我现在正在使用移动设备编写，无法提供代码片段，但您可以 查看[http://docs.oracle.com/cd/E15051_01/wls/docs103/webserv_adv/handlers.html](http://docs.oracle.com/cd/E15051_01/wls/docs103/webserv_adv/handlers.html)也可以在客户端使用它们。

更新：这是一个更好的链接[http://www.mastertheboss.com/jboss-web-services/web-services-handler-chains-tutorial](http://www.mastertheboss.com/jboss-web-services/web-services-handler-chains-tutorial)

# android - MonthDisplayHelper.NumberOfDaysInMonth 在 MonoDroid 中返回不正确的值

> ID：14754025
> 
> 赞同：3
> 
> 时间：2013-02-07T14:53:30.613
> 
> 标签：android, datetime, mono, xamarin.android, android-calendar

我想创建一个`Calendar`，但`MonthDisplayHelper`返回的值不正确（**31**表示 2013 年 2 月，即**28**天）。我究竟做错了什么？

```
DateTime mRightNow = DateTime.Now;
MonthDisplayHelper mHelper = new MonthDisplayHelper(mRightNow.Year, mRightNow.Month, 2);
Log.Info("cal", mHelper.NumberOfDaysInMonth); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:15:33.537

您正在混合 .Net 和 Java DateTime 类！

.Net 月数以 1 为基础

Java 月份是从 0 开始的

所以 DateTime.Now 是 .Net 并在第二个月（二月）的某一天返回

但是 MonthDisplayHelper 在 Java 中，因此将 2 解释为第三个月（三月）

* * *

使用 mRightNow-1 修复此问题

也许考虑使用扩展方法使其更具可读性

```
public static class JavaDateTimeExtensions
{
    public static int JavaMonth(this DateTime input)
    {
        return input.Month - 1;
    }
} 
```

# ios - UICollectionViewCell 中的 UIScrollView 不起作用

> ID：14754026
> 
> 赞同：8
> 
> 时间：2013-02-07T14:53:33.583
> 
> 标签：ios, objective-c, uiscrollview, uicollectionview

我有`UICollectionView`一个自定义的`UICollectionViewCell`. `UICollectionView`水平滚动，每个单元格占据所有可见屏幕。

`UICollectionViewCell`有一个`UIView`子视图，而子视图又具有一个子`UIScrollView`视图。

`UIScrollView`旨在垂直滚动，但根本不滚动。我试过设置滚动视图`contentSize`但没有成功。

我怀疑这`UIScrollView`没有得到任何触摸事件，而不是大小问题。

有什么建议么？

编辑>>

我现在确定这是一个事件问题，而不是特定于`UIScrollView`.

我现在已经覆盖了in中的`pointInside:`方法，并且可以看到现在每次点击它时它都会返回 false。在这种情况下，您会认为点击事件会传播到下一个 subview ，但仍然没有收到事件。我试过添加一个，但它从来没有注册一个水龙头。`UIView``UICollectionViewCell``UIView``UIGestureRecognizer``UIView`

这里有什么东西可以拦截我不知道的事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:25:11.817

我一直在尝试用滚动视图解决类似的问题，您对事件的编辑让我想起了这个问题（这再次解决了我的问题）[如何在 UICollection 补充视图中使用 UIButton？](https://stackoverflow.com/questions/13571994/how-can-i-use-a-uibutton-in-a-uicollection-supplementary-view)

您可能需要使用 UICollectionReusableView，而不是 UICollectionViewCell。更改课程对我有用，因为我在标题中使用了一个按钮（最近是一个滚动视图）。

但是我没有尝试过细胞本身。对于从 UICollectionViewCell 捕获事件，以下可能会有所帮助？ [获取按钮操作：UICollectionView Cell](https://stackoverflow.com/questions/13757762/getting-button-action-uicollectionview-cell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:58:03.620

尝试禁用并`userInteractionEnabled`为`UIView`您启用它`UIScrollView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-10T08:29:49.897

1.  将可滚动内容嵌入到单元格内的 ScrollView 中。
2.  将“UICollectionViewDelegateFlowLayout”添加到 UICollectionViewCell 即：

    ```
    类 SomeCollectionCell: UICollectionViewCell, UICollectionViewDelegateFlowLayout { 

    }
    ```

现在在单元格内滚动应该可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-30T15:29:54.030

我不确定这是否是你的问题，但这是我的问题——我把它放在这里以防其他人出于同样的原因遇到这个问题。我想在`UIScrollView`里面放一个，`UICollectionReusableView`但偶然我创建了我的自定义类；

```
class CustomCellHeader: UICollectionViewCell {

} 
```

代替;

```
class CustomCellHeader: UICollectionReusableView {

} 
```

一旦我改变了这一点，`UIScrollView`我的标题单元格内就变得生动起来！

# expression - SSRS 2008：使用来自多个领域的 StDevP / 一般组合多个领域

> ID：14754030
> 
> 赞同：0
> 
> 时间：2013-02-07T14:53:39.773
> 
> 标签：expression, ssrs-2008-r2

我想计算来自同一数据集的两个字段的标准偏差。

示例：
MyFields1 = 10, 10
MyFields2 = 20

我现在想要的是 (10,10,20) 的标准差，预期结果是 4.7

在 SSRS 我想要这样的东西：
=StDevP(Fields!MyField1.Value + Fields!MyField2.Value)

不幸的是，这是不可能的，因为 (Fields!MyField1.Value + Fields!MyField2.Value) 返回单个值而不是值列表。有没有办法将同一数据集中的两个字段组合成某种临时数据集？

我唯一的解决方案是：

1.  创建一个包含两个字段的所有值的新数据集。但这很烦人，因为我需要其中大约 20 个，而且我有六个报告参数需要过滤每个查询。=> 维护起来可能会变得非常缓慢和烦人。

2.  手写公式。但我真的不知道怎么做。StDevP 对我来说并不是那么微不足道。这就是我使用 Avg 的方法，它在数学上更简单：
    =(SUM(Fields!MyField1.Value)+SUM(Fields!MyField2.Value))/2
    在这里找到：[http ://social.msdn.microsoft.com/论坛/is/sqlreportingservices/thread/7ff43716-2529-4240-a84d-42ada929020e](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/7ff43716-2529-4240-a84d-42ada929020e)

顺便提一句。我知道做这样的计算很奇怪，但这是我的客户想要的，我必须以某种方式交付。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:08:22.487

CTDevP 是标准差。这样的表达式对我来说很好， `=StDevP(Fields!MyField1.Value + Fields!MyField2.Value)`但它与一个值（Fields！MyField1.Value + Fields！MyField2.Value）的偏差**始终为0。** 您可以在此处查找公式： [标准偏差（wiki）](http://en.wikipedia.org/wiki/Standard_deviation)

我相信您需要为某些组（或完整数据集）计算此值，为此您需要在 CTDevP 中设置您的范围：

```
=StDevP(Fields!MyField1.Value + Fields!MyField2.Value, "MyDataSet1") 
```

# sql - 如何连接到 Umbraco 中的 Webmatrix 数据库？

> ID：14754033
> 
> 赞同：0
> 
> 时间：2013-02-07T14:53:51.160
> 
> 标签：sql, database, content-management-system, umbraco, webmatrix

标题几乎列出了我想问的问题。

四天前我才开始与 Umbraco 合作（作为我在实习期间从事的项目的一部分），我需要创建一个在线网上商店。我仍在努力适应这个软件，但有一个问题我无法找到答案：如何将 WebMatrix 制作的数据库链接到我在 Umbraco 的网站？

请记住，我无法使用 .net 文件，因为我无法访问 Microsoft Virtual PC。分配给我工作的电脑过去已经有试用版，插入新的试用码不起作用，公司不会退还我购买的软件。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:01:53.390

您是否对 web.config 和解决方案的“bin”文件夹进行了评估？如果是这样，请将 webmatrix.data.dll 添加到您的 bin 并将连接字符串添加到您的 web.config 文件以引用您的数据库。

然后在开发部分创建一个宏（剃刀），导入 webmatrix 命名空间（@using webmatrix.data）然后你可以像这样查询：

```
var db = Database.Open("mydatabaseinconnectionstring");
var query = "SELECT * FROM Table WHERE Condition";

foreach(var item in db.Query(query)){
//write out put here

Response.Write(@item.propertyValueFromDb);

} 
```

# plupload - 从粘贴到文本字段的图像的 URL 上传

> ID：14754035
> 
> 赞同：1
> 
> 时间：2013-02-07T14:53:53.847
> 
> 标签：plupload, imageurl

我有 plupload 使用 drop_element: 和 browse_button:

但是，我还希望可以选择从这样的 URL 获取文件：[http ://example.com/image.jpg](http://example.com/image.jpg)

想法是将其添加到上传队列并利用 plupload 的内置属性和方法。

plupload 论坛上的 Davit 将我引导到 mOxie.Image.load 的示例，但我不知道如何将它与 plupload 集成。 **这里有没有人有一个如何做到这一点的例子？**

如果有帮助，这是我[在 plupload 论坛上](http://www.plupload.com/punbb/viewtopic.php?id=2795)开始的主题的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T11:50:08.493

我认为最好将 URL 传递给服务器，以便它可以在那里下载和处理它。

清理和验证必须在服务器上进行。但无论如何，plupload 都应该这样做。服务器无论如何都可以下载大文件，但一定要验证它的图像，而不是一些伪装成图像的恶意二进制文件。

不需要（不确定是否可以）将图像下载到客户端，然后告诉 plupload 发送该图像。

# java - 如何从 Java 应用程序内部运行 Talend 作业

> ID：14754037
> 
> 赞同：0
> 
> 时间：2013-02-07T14:53:57.337
> 
> 标签：java, talend

我创建了一个 Talend Open Studio 作业，并希望使用 Java 应用程序内部的参数运行它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:46:07.443

您必须将作业导出为`standalone job`. 您可以按照 TalendForge 提供的教程[http://www.talendforge.org/tutorials/tutorial.php?idTuto=17#s10](http://www.talendforge.org/tutorials/tutorial.php?idTuto=17#s10)

导出后，您将获得`jar`每个作业的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T10:16:07.150

Talend Studio 允许您导出作业并从外部 Java 应用程序调用它。
此链接说明如何使用 Eclipse IDE 从 Java 程序调用 Talend 作业：

~~[https://help.talend.com/display/KB/Calling+a+Talend+Job+from+an+external+Java+application](https://help.talend.com/display/KB/Calling+a+Talend+Job+from+an+external+Java+application)~~

[从外部 Java 应用程序调用 Talend 作业](https://help.talend.com/reader/uN~DBojHtRraw~1IihuCzw/LmOR5l7nkrngW_F8T6VaEg)

# url - URL Rewrite 2.0 不排除子文件夹

> ID：14754053
> 
> 赞同：1
> 
> 时间：2013-02-07T14:54:37.647
> 
> 标签：url, iis, filter, rewrite

有人可以帮我解决我的问题吗？

我在 IIS 7.5 和 URL-Rewrite 2.0 上使用 ASPX 文件在任何访问条件下获取 SSL：

www.somedomain.com -> [https://www.somedomain.com](https://www.somedomain.com)

www.somedomain.com/mypage.aspx -> [https://www.somedomain.com/mypage.aspx](https://www.somedomain.com/mypage.aspx)

**它运行良好。**但是，由于页面加载/播放一些 MP3/OGG​​ 文件，我注意到：

1- 如果页面在 SSL 中执行，则 MP3 在某些设备（Androids/iPhone/iPad 移动设备）中无法播放；

2-如果页面在没有 SSL 的情况下执行，它会正常发生，100%。

因此，我试图在 URL-REWRITE 中过滤 MP3/OGG​​ 文件（以及 PNG/JPG 图像）以避免它们在 SSL 下的访问。我的过滤器是：

```
<add input="{REQUEST_URI}" pattern="(png|jpg|mp3|ogg)" negate="true" />
<add input="{HTTPS}" pattern="^OFF$" /> 
```

我在这些文件上尝试了很多过滤器设置，如 {REQUEST_URI}、{URL}、{UNENCODED_URL}，我发现它们都无法在 SSL 下避免这些文件。我使用 MICROSOFT NETWORK MONITOR 看到了这一点，它显示所有文件都在端口 443 (HTTPS) 中加载。另一个特点是我从未在那里看到原始文件名（MP3 文件和图像）。似乎一切都在 SSL 设置下。另一个原因是 MP3 不能在 SSL 访问中播放，并且图像会延迟几秒钟才能加载。

我无法使用整个域名/文件夹名称（如 www.mydomain.com/songs/music.MP3），因为我使用的是 JPLAYER 2.0，我无法使用整个 MP3 地址设置这个库（歌曲无法播放！），但只是它们所在的子文件夹，如下所示（参见 mp3 和 ogg 标签）：

```
 $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    $(this).jPlayer("setMedia", {
                        mp3:"audio/" + theSongs[0] + ".mp3",
                        ogg:"audio/" + theSongs[0] + ".ogg"
                    });

                },
                play: function () { // To avoid both jPlayers playing together.
                    $(this).jPlayer("pauseOthers");
                },
                swfPath: "Scripts/jPlayer/",
                supplied: "mp3, ogg",
                volume: 0.25,
                cssSelectorAncestor: "#jp_container_1",
                wmode: "window"
            }); 
```

如何避免这种行为？我不想将这些文件（MP3、OGG、JPG、PNG）放在另一个域中，以避免 URL-REWRITE 捕获它们。我需要它们在同一个主项目及其子文件夹之一（音频和图像文件夹）中。

如何创建入站规则以真正完全丢弃这些文件？注意：如果我通常使用类似的东西

```
 <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" /> 
```

它也不播放（或加载）。

我将非常感谢您为帮助我解决该问题所做的努力。亲切的问候，大卫

# linux - crontab 和 cronjob 有什么区别？

> ID：14754056
> 
> 赞同：15
> 
> 时间：2013-02-07T14:54:44.447
> 
> 标签：linux, crontab

这个问题可能听起来非常愚蠢，但如果我不问我永远不会知道......

我所做的所有任务设置总是使用“crontab”。我在某处听说过“cronjob”这个词。它是另一个工具还是只是“crontab”中某些东西的名称？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T14:56:48.987

*cronjob只是**crontab*中的一个条目，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:57:18.190

这`cronjob`是您放入`crontab`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:59:30.453

crontab 是用于启动 cron 作业（不是 cronjob）的实际命令行条目。

要创建 cron 作业，请执行以下操作

```
 crontab -e 
```

然后为要在特定“cron'ed”间隔运行的脚本/程序填写 cron 语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T07:20:07.233

尝试在 cron 沙箱中玩 - 让您尝试 crontab 计时值的组合，并为您提供作业何时运行的列表。[www.dataphyx.com](http://www.dataphyx.com)

# java - 什么是“字符串...”

> ID：14754062
> 
> 赞同：1
> 
> 时间：2013-02-07T14:55:00.083
> 
> 标签：java, android, string

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:57:40.837

`...` is a [variable argument list](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html).

Inside the function it may be treated as an array.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:56:47.337

The `...` in general stands for *variable number of arguments*

So you can have a method with variable number of arguments of any type.

The strange symbol you're seeing in your output has nothing to do with this. You may try to see what's inside with Arrays.toString() method:

```
$ cat A.java 
import java.util.Arrays;

public class A {
    public void example( String ... args ) {
        System.out.println( Arrays.toString( args ) );
    }
    public static void main( String ... args ) {
        A a = new A();
        a.example("ping", "pong\n");
        a.example("That's", "all", "folks");
    }
}

$ java A
[ping, pong
]
[That's, all, folks] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T14:58:42.937

When you call the function, it turns the list of comma separated arguments into an array of strings.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T15:00:16.960

`String...` is indeed a syntaxic sugar that replaces `String[]` and allows you to pass a undefined numbers of arguments to a method.

Example :

```
public void withArray(String[] values){ ... }
withArray(new String[] {"a", "b"});

public void withVarArgs(String... values) { ... }
withVarArgs("a", "b"); 
```

Variable args allow you to pass arguments directly, skipping `new String[]` declaration.

# javascript - 了解 javascript 函数、范围和闭包

> ID：14754064
> 
> 赞同：3
> 
> 时间：2013-02-07T14:55:00.823
> 
> 标签：javascript, scope, closures

有人可以详细解释这段 js 的作用吗？

```
(function (window) {
    var test = window['test'] = {};
    test.utils = new(function(){ ... })();
})(window); 
```

我了解该功能不是全局范围的。我知道它正在创建一个名为 test 的变量，该变量指向`window`对象中的一个属性，该属性是一个空对象。我也明白这`utils`是测试的一个属性。

我不明白最后一部分的目的是什么，`(window);`或者为什么将`utils`函数指定为`new`.

请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:57:29.920

它创建一个函数并立即调用它，传入`window`. 该函数接收一个名为的参数`window`，然后在其上创建一个空对象，该对象既可以作为`window`调用的属性，也可以`test`作为局部变量调用`test`。然后它通过调用一个函数来创建一个对象`new`，并将该对象分配给`test.utils`.

> 我不明白最后一部分的目的是什么（窗口）；...

它在您引用的代码中实际上没有任何用途，因为传递给主（外部）函数的符号`window`与接收它的参数的名称相同。如果他们的名字*不同*，那么它会有一个目的，例如：

```
(function(wnd) {
})(window); 
```

这将`window`在函数中作为`wnd`.

> 或者为什么 utils 函数被指定为新函数。

`utils`不会是一个函数（至少，除非你替换的代码`...`正在做一些*非常*奇怪的事情），它将是一个通过*调用*该函数创建的对象。

整个事情可以更清楚地重写：

```
(function(window) {

    var test;

    test = {};
    window['test'] = test;

    test.utils = new NiftyThing();

    function NiftyThing() {
    }

})(window); 
```

仍然`window`无缘无故地做这件事，但希望它能清楚地说明该`new(function() { ... })();`位在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:08:34.467

首先，这是一个自调用函数。

它本身被调用，将`window`对象作为函数输入参数，以确保在整个函数内部`window`具有预期的含义。

```
test.utils = new(function(){ ... })(); <--- This is an object constructor. 
```

当使用`new`操作符调用函数时，它变成了一个对象构造函数。

例如：

```
var conztructor = function() {
   this.name = "Matias";
};

var obj = new conztructor();
alert(obj.name); // <--- This will alert "Matias"! 
```

的目的`(window);`是创建一个新的变量和引用来保存 JavaScript`Window`对象实例，避免其他库可能重用`window`（或任何其他）标识符，并且您自己的库可能会因为这种情况而中断。

这很好，以避免更改其他库可能使用的全局范围标识符。

## 更新

针对一些评论，运行以下代码：

[http://jsfiddle.net/wChh6/5/](http://jsfiddle.net/wChh6/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:57:32.883

这里发生的是正在声明一个新的匿名函数。最后一部分`(window)`调用该函数，`window`作为参数传递。

在内部，对 的调用`test.utils = new(function(){ ... })();`创建一个新对象（其内容由传递给的函数定义`new`）并将其分配给`test.utils`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:57:59.723

当您使用最后一个括号定义函数时，该函数在加载给定参数后**自行执行，在您的情况下**`window`

```
(function (window) {
    var test = window['test'] = {};
    test.utils = new(function(){ ... })();
})(window); 
```

[JS函数定义：最后一个括号的含义](https://stackoverflow.com/questions/14103575/js-function-definition-meaning-of-the-last-parentheses)

# c# - 根据网络连接将用户引导到不同的页面

> ID：14754067
> 
> 赞同：1
> 
> 时间：2013-02-07T14:55:12.313
> 
> 标签：c#, asp.net, networking, webserver

我目前正在升级现有的 asp.net Web 应用程序。它托管在我们的本地 Web 服务器上，如果用户在本地连接，我想将他们引导到不同的页面。

示例：连接到我们本地网络的员工将被定向到页面 A。如果外部网络上的某人（可能是客户）连接，他们将被定向到页面 B。这可能吗？Web 服务器是否知道连接是否为本地连接？如果是这样，我应该能够为它编写代码。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:12:50.183

多年来，我们已经针对这种情况进行了令人尴尬的**可怕黑客攻击。**虽然我确信有更好的方法，但要做的是查看，`System.Web.HttpContext.Current.Request.UserHostAddress`如果它与列表匹配，我们转到一个页面，否则我们转到另一个页面。

# websphere - Websphere - 使用直接 JNDI 查找和 JAAS 登录模块

> ID：14754070
> 
> 赞同：3
> 
> 时间：2013-02-07T14:55:17.567
> 
> 标签：websphere, jndi, jaas

我有在 Windows 上运行的 Websphere Application Server 7.0 版。我创建了一个实现 javax.security.auth.spi.LoginModule 接口的 JAAS 登录模块，并创建了一个使用此登录模块的数据源（在 Mapping-Configuration 别名下）。由于此数据源应从登录模块获取连接凭据，因此数据源上没有配置身份验证别名。

我想在我的应用程序上使用这个数据源，但我的应用程序使用直接 JNDI 查找数据源。根据[这篇](http://publib.boulder.ibm.com/infocenter/wsdoc400/v6r0/index.jsp?topic=/com.ibm.websphere.iseries.doc/info/ae/ae/rdat_jnditips.html)文章，当使用直接 JNDI 查找时，websphere 会创建一个默认资源引用，该资源引用配置为 res-auth=application。由于 res-auth 是应用程序，因此我的登录模块永远不会被调用，但由于“组件管理的身份验证别名”为空，因此出现登录被拒绝错误。我尝试使用 res-auth=Container 手动创建资源引用，但没有帮助。

有什么办法可以将默认的 res-auth 更改为 Container？当 res-auth 设置为 Application 时，有什么方法可以使登录模块工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T13:40:10.833

您可以将 web.xml 文件中的 res-auth 更改为容器，因此它将使用容器管理的身份验证别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:20:11.023

转到您的数据源 >> 安全设置 >> 为`Component-managed authentication alias`&选择您的 jaas 登录模块`Container-managed authentication alias`

问候，

# mysql - 在子查询中访问父列信息

> ID：14754071
> 
> 赞同：4
> 
> 时间：2013-02-07T14:55:19.457
> 
> 标签：mysql

我正在尝试编写一个子查询以在更大的查询中使用，我正在编写的子查询需要从主列中获取 a.workorder_id

这个有效（注意 x.workorder_id = '805' ）

```
SELECT a.* , 
( SELECT SUM( maxes ) qty 
  FROM  ( 
     SELECT MAX( qty ) maxes 
     FROM `rework_line` x 
     WHERE x.workorder_id = '805' 
     GROUP BY x.size 
  ) as tba 
) tmpsum 
FROM rework_line a 
WHERE a.workorder_id = '805' 
GROUP BY a.workorder_id 
```

然而，当我更改 x.workorder_id = a.workorder_id 它不再起作用并告诉我

**#1054 - 'where 子句'中的未知列'a.workorder_id'**

```
SELECT a.* , 
( SELECT SUM( maxes ) 
  qty FROM  ( 
     SELECT MAX( qty ) maxes 
     FROM `mtborah_rework_line` x 
     WHERE x.workorder_id = a.workorder_id 
     GROUP BY x.size 
  ) as tba 
) tmpsum 
FROM mtborah_rework_line a 
WHERE a.workorder_id = '805' 
GROUP BY a.workorder_id 
```

我敢肯定这是我忘记的简单事情，但是在我所有的谷歌搜索中我都找不到怎么做，我还尝试在 freenode 上的 mysql 房间询问，他们只会说将其重写为连接，这是不可能的，因为我有它的查询如果我重新加入这个表，它将通过我的计数和总和

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:00:36.053

也许我遗漏了一些东西，但是为什么不使用连接中的子查询而不是相关子查询来重写它：

```
SELECT a.*, qty
FROM mtborah_rework_line a 
LEFT JOIN
(
  SELECT SUM(maxes) qty, workorder_id
  FROM
  (
    SELECT MAX( qty ) maxes, x.workorder_id
    FROM `mtborah_rework_line` x 
    GROUP BY x.size, x.workorder_id
  ) m
  GROUP BY workorder_id
) q
  on a.workorder_id = q.workorder_id
WHERE a.workorder_id = '805'; 
```

甚至这样：

```
SELECT a.*, SUM(maxes) qty
FROM mtborah_rework_line a 
LEFT JOIN
(
  SELECT MAX(qty) maxes, x.workorder_id
  FROM `mtborah_rework_line` x 
  GROUP BY x.size, x.workorder_id
) q
  on a.workorder_id = q.workorder_id
WHERE a.workorder_id = '805' 
GROUP BY a.workorder_id; 
```

# android - 每次都将 hashmap 对象添加到内存中

> ID：14754072
> 
> 赞同：-1
> 
> 时间：2013-02-07T14:55:21.843
> 
> 标签：android, storage, internal

我有一个 hashmap 对象，我保存在内部存储器中，但每次它替换 hashmap 对象而不是添加时，每次调用此方法时如何添加 hasmap 对象：

这是我的代码：

```
public void saveDataInInternalStorage(Context context, HashMap<String, HashMap<String, String>> hashMapObject,
        String fileName) {
    try {
        File file = new File(context.getDir("data", MODE_PRIVATE), fileName);
        // if (file.exists()) {
        FileOutputStream fos = new FileOutputStream(file);
        ObjectOutputStream outputStream = new ObjectOutputStream(fos);
        outputStream.writeObject(hashMapObject);
        outputStream.flush();
        outputStream.close();
        // }
    } catch (FileNotFoundException e) {
        // e.printStackTrace();
    } catch (IOException e) {
        // e.printStackTrace();
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:57:23.520

只需更改此行：

```
 FileOutputStream fos = new FileOutputStream(file, true); 
```

告诉 FOS将`true`内容附加到文件中，而不是覆盖 ist。

# java - 如何存储 ui 面板所需的权限

> ID：14754077
> 
> 赞同：0
> 
> 时间：2013-02-07T14:55:43.857
> 
> 标签：java, swing, role-base-authorization

我正在开发一个到目前为止是单用户/角色的 java swing 应用程序。现在我有一个要求，应该将用户分成具有不同权限的角色。应用程序中的每个面板都有特定的权限要求，这将决定其行为（即，它需要权限 P1 进行可视化和 P2 进行编辑）。

经过一些研究，我将坚持使用 Apache Shiro 来构建我的安全/UAC 框架。

我的问题是：我应该在哪里存储每个面板所需的权限？我的第一个想法是将它们放在 java 类本身中，但这似乎有点“hack-y”。另一种选择是将它们存储在数据库中，并将类与其所需的权限链接起来。但这会产生问题：每次添加/删除新面板时，都必须在数据库中更新权限。

如果您有任何关于如何完成/已经完成的指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:14:48.570

我认为最安全的做法是将权限存储在数据库（或任何其他集中式服务器）中。这样做的好处是，如果权限发生变化，您只有一个中心位置可以更改。

如果应用程序中有任何安全配置，那么在进行更改后，您必须确保没有用户在秘密使用旧版本......

# ios - xcode中的json异常错误

> ID：14754079
> 
> 赞同：0
> 
> 时间：2013-02-07T14:55:53.217
> 
> 标签：ios, xcode, json

我是ios的初学者。我使用 JSON 开发一个调用来访问数据并在 UITableView 上插入。在这一点上我的代码

```
 NSDictionary * dict = [[CJSONDeserializer deserializer ] deserialize:jsonData error:&error]; 
```

编译时出现此错误

```
2013-02-07 15:49:48.078 comercMobil[12933:c07] +[CJSONScannerscannerWithData:]: 无法识别的选择器发送到类 0xe7b8
2013-02-07 15:49:48.080 comercMobil [12933:c07] 异常 +[CJSONScannerscannerWithData:]: 无法识别的选择器发送到类 0xe7b8

```

有什么建议么？谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:12:14.213

有几件事：

1.  这不是编译器错误，而是运行时错误。

2.  我不认为这是导致此错误的行，因为您没有`scannerWithData`在这里打电话。我会搜索您的来源以获取对`scannerWithData`.

3.  但是，我同意 Sean 的观点，您应该考虑只使用[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html).

    ```
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data
                                                         options:0
                                                           error:&error]; 
    ```

    或者，如果您需要 5.0 之前的 iOS 支持，[SBJSON](http://sbjson.org)非常受欢迎。

# c++ - 委托断言

> ID：14754084
> 
> 赞同：0
> 
> 时间：2013-02-07T14:56:02.157
> 
> 标签：c++, debugging, assertion

嗨，我想改进我的数学库，

当我计算我所做的事情的长度时

```
assert( !equal(len,0.0));
const f32 invsqrt = 1.0/sqrt(len);
X*= invsqrt;
Y*= invsqrt;
Z*= invsqrt; 
```

这段代码很好，如果我错误地除以零，代码就会中断

“运行时已请求在第 .. Vector.h 第 88 行中断应用程序”

这很好，但我想做得更好，我想显示错误的真正位置。

因此，我不想显示“vector.h”和第 88 行，而是显示“main.cpp”“第 15 行”（如果在 main 的第 15 行调用 getLength 函数）。

Vector 只是标题，所以我认为实现这一点是可能的（这只是一种感觉）.. 但是如何？

提前致谢。我希望你能看到这样做有多么有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:59:09.217

那就是代码所在的位置，因此它将中断。

我认为您的意思是查看调用堆栈。
在 Visual Studio 中，它位于：**Debug -> Windows -> Call Stack**。

调用堆栈可以显示你是如何到达那行代码的（在工作流程中调用了哪个函数）

# email - 用于触发电子邮件的 Google App 脚本

> ID：14754086
> 
> 赞同：0
> 
> 时间：2013-02-07T14:56:07.803
> 
> 标签：email, triggers, google-apps-script

如果 Google 表格中的列 =X，我正在尝试收到一封电子邮件来提醒我。

我尝试使用通知系统，使用 EQ 运算符在单元格等于 X 时打开，这会更改单元格并且通知系统应该立即发送电子邮件。它不是那样工作的，电子邮件永远不会触发。

我想我需要一个脚本，如果一个单元格 =X 会触发一封电子邮件，这会很好，因为我可以自定义电子邮件，所以它更有意义。（即“您的活动正在举行的会议室已满员，您应该将其从预订表中删除”）

我是 Google Scripts 的新手，如果 cell =X 脚本，我可以使用一些帮助来创建电子邮件触发器。

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:49:59.597

您需要添加一个脚本来运行 onEdit。

```
function onEdit() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("NameOfYourSheet");
  var currentValue = sheet.getRange("A5").getValue();
  if (currentValue == (whateverValueYoureLookingFor)) {
    MailApp.sendEmail("youremail@domain.com", "ALERT: The cell in the sheet is equal to X!", "The message body that you want to send.");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T20:11:59.023

```
function testSchemas() {
  var htmlout = HtmlService.createTemplateFromFile('data').evaluate().getContent();

 var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('All Exams Tracker');
var range = sheet.getDataRange();
  var values = range.getValues();
  var last_row = sheet.getLastRow();
  var today = new Date()

  for (var i =3 ;i < last_row;i++) {
   var temp = values[i][4];
    var e_date = new Date(temp);
    if ((( e_date - today)/(1000*60*60*24)) < 10 && e_date > today){
      var cond = "done" }
    break; }
Logger.log(cond);  

  if (cond == "done"){

 MailAppv.sendEmail({
    to: '*************************************************************',
     subject: 'Exam Coming Next Week',
    htmlBody: htmlout,
  });

  }} 
```

这将在触发时生成 html 文件数据（如下所示）。

```
<html>
<head>
<style>
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th, td {
    padding: 5px;

}
</style>
</head>
<table style = "border: 1px solid black; border-style: collapse;">
<?   var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('All Exams Tracker');
var range = sheet.getDataRange();
  var values = range.getValues();
  var last_row = sheet.getLastRow();

  var today = new Date();?>

  <tr style="border: 1px solid black; padding: 10px;">

    <th style="border: 1px solid black; padding: 10px;">Exam Name</th>
    <th style="border: 1px solid black; padding: 10px;">Exam Date</th>
    <th style="border: 1px solid black; padding: 10px;">Priority</th>
    <th style="border: 1px solid black; padding: 10px;">College Predictor Status</th>
     <th style="border: 1px solid black; padding: 10px;">Rank Predictor Status</th>

</tr>

  <? for (var i =3 ;i < last_row;i++) {
   var temp = values[i][4];
    var e_date = new Date(temp);
    if ((( e_date - today)/(1000*60*60*24)) < 10 && e_date > today) {

   if (values[i][12] != ""){
  var col_status = "Live"}
  else
  if (values[i][11] != ""){
  col_status = "Uploaded and Tested"}
  else
  if (values[i][10] != ""){
  col_status = "Data Processed"}
  else
  if (values[i][9] != ""){
  col_status = "Template Ready"}

  else
  col_status = "Not initiated yet"

   if (values[i][19] != ""){
   var rank_status = "Live"}
  else
  if (values[i][18] != ""){
  rank_status = "Uploaded and Tested"}
  else
  if (values[i][17] != ""){
  rank_status = "Data Processed"}
  else
  rank_status = "Not Initiated yet"   

  ?>
<tr>

    <td style="border: 1px solid black; padding: 10px;"><?= values[i][2]?></td>
    <td style="border: 1px solid black; padding: 10px;"><?= values[i][4]?></td>
    <td style="border: 1px solid black; padding: 10px;"><?= values[i][8]?></td>
    <td style="border: 1px solid black; padding: 10px;"><?= col_status?></td>
    <td style="border: 1px solid black; padding: 10px;"><?= rank_status?></td>

</tr>
<? } }?>
</table>
<br><br>
<p><a href="https://docs.google.com/spreadsheets/d/1fzbRCvnNfuVTCEuRnncJxb1VW7f-tkSEywntzaTugZQ/edit#gid=0">Click Here For More Details</a></p>
</html> 
```

# html - tr 不显示底部边框

> ID：14754087
> 
> 赞同：2
> 
> 时间：2013-02-07T14:56:18.647
> 
> 标签：html, css, html-table

我正在尝试创建一个数据网格并偶然发现了两个问题。

我不得不使用border-collapse：分开；在顶部获得圆角。但是这样做我失去了在 tr 按钮上添加边框的能力。

有什么见解吗？

[http://fiddle.jshell.net/KNb7K/](http://fiddle.jshell.net/KNb7K/)

CSS：

```
table.dgrid {
    border: solid 1px #CDCDCD;
    .border-radius(8px, 0px, 0px, 8px);
    width: 100%;
    border-collapse: separate;
}
table.dgrid th:first-child{
    .border-radius(0px, 0px, 0px, 8px);
}

table.dgrid th:last-child{
    .border-radius(8px, 0px, 0px, 0px);
}

table.dgrid th{
    background-color: #E6E6E6;
}
table.dgrid tr th:last-child, table.dgrid tr td:last-child{
    border-right: 0px; 
}
table.dgrid tbody tr:last-child {
    border-bottom: 0;
}
table.dgrid tr {
    border-bottom: solid 1px #CDCDCD;
    border-collapse: collapse ;   
}
table.dgrid th, table.dgrid td {
    padding: 5px;
    text-align: center;
    vertical-align: middle;
    border-right: solid 1px #CDCDCD;
} 
```

html:

```
<table class="dgrid">
    <thead>
        <tr>
            <th>Ativar</th>
            <th>Imagem</th>
            <th>Posição</th>
            <th>Link</th>
            <th>Excluir</th>
        </tr>
    </thead>   
    <tbody>
        <tr>
            <td><input type="checkbox" /></td>
            <td></td>
            <td></td>
            <td><input type="text" /></td>
            <td></td>
        </tr>
                <tr>
            <td><input type="checkbox" /></td>
            <td></td>
            <td></td>
            <td><input type="text" /></td>
            <td></td>
        </tr>
                <tr>
            <td><input type="checkbox" /></td>
            <td></td>
            <td></td>
            <td><input type="text" /></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:05:43.333

你可以把它`bottom-border`放在上面`table.dgrid th, table.dgrid td`，然后我会更新它`table.dgrid tbody tr:last-child`，`td`让它像这样：`table.dgrid tbody tr:last-child td`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:02:19.303

`border-collapse: separate;`从中删除`table.dgrid`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:29:30.807

这有效：

```
table.dgrid {
    width: 98%;
    border-collapse: separate;
    border-bottom: solid 1px #CDCDCD;
    margin:1%;
}
table.dgrid th:first-child{
    border-top-left-radius: 8px;
}
table.dgrid th:first-child, table.dgrid td:first-child{
    border-left: solid 1px #CDCDCD;
}
table.dgrid th:last-child{
    border-top-right-radius: 8px;
}
table.dgrid th{
    background-color: #E6E6E6;
}
table.dgrid tbody tr:last-child {
    border-bottom: 0;
}
table.dgrid th, table.dgrid td {
    padding: 5px;
    text-align: center;
    vertical-align: middle;
    border-top: solid 1px #CDCDCD;
    border-right: solid 1px #CDCDCD;
} 
```

# python - 如何将大量数据写入 xls 文件？

> ID：14754090
> 
> 赞同：8
> 
> 时间：2013-02-07T14:56:25.713
> 
> 标签：python, excel, hdf5

我有非常大的数据库，我想将其写入**xlsx/xls**文件。我已经尝试使用**xlwt**，但它只允许写入 65536 行（我的一些表有超过 72k 行）。我还发现**了 openpyxl**，但它运行速度太慢，并且为大型电子表格使用了大量内存。还有其他写excel文件的可能性吗？

编辑：按照 kennym 的建议，我使用了 Optimized Reader 和 Writer。它现在消耗的内存更少，但仍然很耗时。现在导出需要一个多小时（对于非常大的表 - 最多 10^6 行）。还有其他可能吗？也许可以将整个表从**HDF5 数据库**文件导出到**excel**，而不是**逐行进行**- 就像现在在我的代码中一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-03T08:13:51.690

尝试在恒定内存模式下使用[**XlsxWriter 。**](http://xlsxwriter.readthedocs.org/index.html)

*   仅用于编写 Excel 2007 xlsx/xlsm 文件
*   **它的运行速度比 Openpyxl 快得多**
*   提供恒定记忆模式。：http: [//xlsxwriter.readthedocs.org/working_with_memory.html](http://xlsxwriter.readthedocs.org/working_with_memory.html)

对于**.xls**文件，我担心没有内存优化方式。你找到了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T02:27:18.157

使用 openpyxl 包的[优化读写器](https://openpyxl.readthedocs.io/en/latest/optimized.html)。与标准的 openpyxl 方法相比，优化的读取器和写入器运行得更快，使用的内存也少得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T07:38:54.133

XlsxWriter 为我工作。我尝试了openpyxl，但它出错了。22k*400 遥控*c

# json - 案例类只有一个字段时如何将json转为案例类

> ID：14754092
> 
> 赞同：36
> 
> 时间：2013-02-07T14:56:26.620
> 
> 标签：json, scala, playframework-2.1

在 play 2.1 中，读取用于将 Json 编组到对象。但是当案例类只有一个字段时，我该怎么做。适用于更多领域的理念不起作用，因为没有使用一个领域“和”。因此我没有得到 FunctionBuilder。

以下代码给了我一个类型不匹配。我怎样才能解决这个问题？

```
case class Data(stamm: Seq[String])

implicit val dataReads  = (
  (__ \ "stamm").read(Reads.list[String])
)(Data) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-06-26T16:52:12.373

正如 Julien 回答的那样，您可以使用以下方法阅读单字段案例类：

```
case class Person(name: String)

val personReads: Reads[Person] = 
  (__ \ "name").read[String].map { name => Person(name) } 
```

只是一个补充，如果你想写：

```
val personWrites: Writes[Person] = 
  (__ \ "name").write[String].contramap { (person: Person) => person.name } 
```

或格式化（读写）：

```
val personFormat: Format[Person] = 
  (__ \ "name").format[String].inmap(name => Person(name), (person: Person) => person.name) 
```

对于写入和格式，您必须导入：

```
import play.api.libs.functional.syntax._ 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-07T16:59:15.197

Json 组合器不适用于单字段案例类。

Pascal（此 API 的作者）在这里解释了这种情况 [https://groups.google.com/forum/?fromgroups=#!starred/play-framework/hGrveOkbJ6U](https://groups.google.com/forum/?fromgroups=#!starred/play-framework/hGrveOkbJ6U)

有一些可行的解决方法，例如：

```
case class A(value: List[Int])
val areads = (__ \ 'value).read[List[Int]].map{ l => A(l) } // covariant map 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-08T14:05:20.347

根据@yokomizor 的回答，我找到了最简单的解决方案来创建`Formatter`一个

```
case class Person(name: String)
val personFormatter: Format[Person] =
  (__ \ "full_name").format[String].inmap(Person.apply, unlift(Person.unapply)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-01T00:28:04.973

比公认的更简单的解决方案：

```
case class A(value: String)
val reads = (__ \ "key").read[String].map(A.apply) 
```

# javascript - CRM 2011 - 在关联视图或子网格中单击自己的记录链接时出现奇怪的行为表单

> ID：14754093
> 
> 赞同：1
> 
> 时间：2013-02-07T14:56:28.410
> 
> 标签：javascript, forms, dynamics-crm-2011, crm, outlook-2010

在我开始提问之前，我可以说我试用的系统安装了 Office 2010，并安装了“CRM 2011 Outlook 客户端”。我刚刚安装了 Rollup 12，但仍然出现错误（在所有其他系统上也是如此）。该错误仅发生在“Outlook”中，而不发生在“Web”版本中。

为了解释我们的问题，最好使用一个示例：我们有一个“项目 A”，在“项目 A”下我们有两个机会（“机会 A”和“机会 B”）。我们调整了机会视图，使其具有多个列：“项目”、“机会名称”、“Createdon”。

当我们打开“项目 A”并转到相关视图（或子网格）时，我们会看到我们定义的视图。当我们单击“项目 A”-链接（指同一条记录）时，表单会阻塞，我们无能为力。我们可以点击“保存”或“保存并关闭”或“查找”，但没有任何反应。就像“表单”JavaScript 停止工作一样。

在“Internet Explorer 8”中，我们遇到了“第 0 行的堆栈溢出”错误，但在 IE9 中，我们不再有该消息了。

有没有人和上面提到的一样的问题？有没有办法解决这个问题，或者我们必须在微软寻求修复。我们不能删除视图的列，因为它也用于其他几个实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:01:21.173

几周前，我认识到我在在线和本地工作的解决方案，只是没有在 Outlook 客户端中运行。完全不同的问题**，但**我相信两者都有相同的起源。

据我所知，这个问题的发生是因为 Outlook 的客户端不使用 IE 渲染引擎。相反，它依赖于旧的 Trident 版本，这是出于向后兼容性的原因而包含的某种 IE8 类似的东西（或不包含，取决于你问谁）。

因此，在我们的案例中，我们必须调整解决方案以与 IE8 一起使用（尽管客户端在 IE9 和 IE10 下运行它）。然后，它开始在所有版本中正常工作。在我看来很奇怪。

# c# - 领域驱动设计中的上下文之间的通信

> ID：14754095
> 
> 赞同：3
> 
> 时间：2013-02-07T14:56:30.550
> 
> 标签：c#, design-patterns, domain-driven-design, cqrs

在我的公司，我们目前使用 DDD 架构，结合事件溯源和 CQRS。在初始版本中，我们允许每个上下文接收来自任何其他上下文的事件。然而，这很快就变得一团糟，因为很难跟踪哪些事件是在哪里处理的。

我们当前的方法是只允许将命令发送到其他上下文。这效果更好，但似乎会产生大量代码开销。例如：

```
context A sends a  command to context B, 
which changes the state of a domain model, 
which publishes an event, 
which gets handled by an event handler, 
which sends a command back to context A, 
which changes the state of a domain model, 
which publishes an event, 
which gets handled by an event handler,
which sends a command to context C,
etcetera. 
```

许多不同上下文中的领域模型，以及许多触发发送到另一个上下文的命令的事件，都包含许多相似的数据。特别是在我们的客户网站上下文中，模型几乎不包含任何逻辑或状态，仅用于生成可以非规范化到网站数据库的事件。它有效，但这似乎也不是要走的路，因为发布事件不应该是任何领域模型的唯一目的。

我们现在的一个想法是让我们的 CMS 像域模型一样，直接处理命令，而不是通过模型发送命令并处理结果事件。这是处理此类案件的正确方法吗？还有其他更有效的方式在上下文之间进行通信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:51:15.653

> 在初始版本中，我们允许每个上下文接收来自任何其他上下文的事件。然而，这很快就变得一团糟，因为很难跟踪哪些事件是在哪里处理的。

我不认为这有什么问题。BC 之间通过事件进行通信是一种典型的事件驱动架构。事件的跟踪可以通过上下文映射来完成。

但是，在您的情况下，BC 交互似乎变得过于健谈。这可能是次优边界的症状。也许边界太细了？鉴于多个领域模型包含大量相似数据，这可能表明这些领域应该被合并。BC 的基本原则是功能和语言的[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)——密切相关的事物粘在一起。

响应命令并随后发布事件的域模型更改状态是完全有效的工作流。

> 特别是在我们的客户网站上下文中，模型几乎不包含任何逻辑或状态，仅用于生成可以非规范化到网站数据库的事件。

这似乎就像 CQRS 术语中的视图/投影。同样，这里没有错。

> 我们现在的一个想法是让我们的 CMS 像域模型一样，直接处理命令，而不是通过模型发送命令并处理结果事件。

这可能是一个重要的观察。在业务逻辑复杂的情况下，完整的领域模型是有意义的。但是，如果域是 CMS 或[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)的域，则不需要域模型。但是，您仍然可以保留事件驱动架构的其余部分。

# css - 即使应用了高度，td 背景也会延伸到 tr

> ID：14754097
> 
> 赞同：0
> 
> 时间：2013-02-07T14:56:37.883
> 
> 标签：css, mobile, html-table

我的 td 设置了高度，但在我的 iPad 和 iPhone 等移动设备上，td 背景和边框从 td 流出并流入 tr。我重新创建了我的确切代码，以向您展示它在我的桌面上通常的样子，但是您可以想象我的代码中可能存在一个错误，它允许它流入 tr 的

```
#tstyle2 {
    width: 1000px;
    border-top: 1px solid #e8e6e6;
    border-bottom: 1px solid white;
}

#tstyle2 tr {
    height: 160px;
    border-bottom: none;
    border-collapse: separate;
    border-top: 1px solid white;
    border-bottom: none;
    width: 1000px;
}

#tstyle2 td {
    border-top: none;
    display: block;
    height: 130px;
    background-color: white;
    border-left: 4px solid #bd6ec1;
    box-shadow: 0px 3px 5px #b5b6b6;
} 
```

[http://jsfiddle.net/338cR/](http://jsfiddle.net/338cR/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:28:04.783

我设法找到了解决方案：

我不得不添加

```
 display:block; 
```

到#tstyle2 tr {}

然后添加

```
width: 1000px; 
```

到#tstyle2 td {}

# android - Android：相对于 ImageView 放置按钮

> ID：14754103
> 
> 赞同：0
> 
> 时间：2013-02-07T14:56:50.033
> 
> 标签：android, android-layout, android-relativelayout

我想让位图的一部分可点击，我的布局如下所示：

```
________________________________
|             #####             |
|             #####             |
|      ___________________      |
|      |                 |      |
|      |                 |      |
|      |      image      |      |
|      |                 |      |
|      |                 |      |
|      ___________________      |
________________________________ 
```

我认为最简单的方法是在具有相对布局的图像上放置一个按钮：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/ImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

    <Button
        android:id="@+id/Button"
        android:layout_width="200dip"
        android:layout_height="150dip"/>
</RelativeLayout> 
```

但是我还没有弄清楚如何让按钮与图像的左上角对齐（而不是像现在这样）相对布局的左上角。这可以通过相对布局实现吗？

也欢迎提出其他方法的建议，我考虑过这个： [http](http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/) ://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/ 但对于我的简单矩形区域来说，这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:03:41.790

试试这个：

```
 <ImageView
        android:id="@+id/ImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

    <Button
        android:id="@+id/Button"
        android:layout_alignLeft="@id/ImageView"
        android:layout_alignTop = "@id/ImageView"
        android:layout_width="200dip"
        android:layout_height="150dip"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T10:43:15.120

你也可以使用

```
<Button
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="@drawable/image1" 
        android:drawableLeft="@drawable/image2t"
        android:drawableRight="@drawable/image3"
        android:drawableTop="@drawable/image4"
        android:drawableTop="@drawable/image4"
        android:textColor="#ffffff"
        /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:47:49.750

好的，我的 google-fu 改进了，多亏了asenovm，我想通了！imageview 有一个 android:adjustViewBounds 属性，默认设置为 false。将其设置为 true 会调整图像视图的边界，以便 alignLeft 和 alignTop 对按钮正常工作。

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/ImageView"
        android:layout_centerInParent="true" 
        android:adjustViewBounds="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

    <Button
        android:id="@+id/Button"
        android:layout_alignLeft="@id/ImageView"
        android:layout_alignTop = "@id/ImageView"
        android:layout_width="200dip"
        android:layout_height="150dip"/>
</RelativeLayout> 
```

# wix - wix：安装/卸载完成时重新启动现有服务

> ID：14754107
> 
> 赞同：2
> 
> 时间：2013-02-07T14:57:01.403
> 
> 标签：wix, windows-services, installation

当我的安装程序完成安装或卸载时，我想重新启动正在运行的服务。
我找到了这段代码：

```
<ServiceControl Id="SomeUniqueId" Name="NameOfTheirService"
            Start="both" Stop="both"/> 
```

但是我在哪里附加这个代码呢？到放置 my 的组件？

代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="325c4bfd-6614-43e9-aedb-93661295352d" Name="Plugin" Language="1033" Version="1.0.0.0"
       Manufacturer="XXX Inc." UpgradeCode="4307526e-3902-40d0-991b-bacff9b3d71b">
<Package InstallerVersion="200" Compressed="yes" />
<Media Id="1" Cabinet="media1.cab" EmbedCab="yes" />
<Property Id="XXXXXX">
  <RegistrySearch Id="XXXXXX" Type="raw" 
                  Root="HKLM" Key="SOFTWARE\XXX\XXX" Name="InstallationPath" />

</Property>
<Directory Id="TARGETDIR" Name="SourceDir">
<Directory Id="XXXXXX">
    <Component Id="ProductComponent" Guid="93118c45-f0c0-4c9e-9168-8ea905e9427c">
      <File Id="pluggin" Source="C://setup.log" KeyPath="yes" Checksum="yes"/>
      <ServiceControl Id="StartService" Name="servicename"
         Start="both" Stop="both"/>
    </Component>     
    </Directory>
    </Directory>
    <Feature Id="ProductFeature" Title="install" Level="1">
        <ComponentRef Id="ProductComponent" />
  <ComponentGroupRef Id="Product.Generated" />
    </Feature>
</Product> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:06:03.633

该`ServiceControl`元素必须放置在您安装的组件中。来自 WiX .chm：

> 启动、停止和删除父组件的服务。此元素用于通过使用启动、停止和删除属性来控制由 MSI 或 MSM 文件安装的服务的状态。例如，Start='install' Stop='both' Remove='uninstall' 表示：安装时启动服务，卸载产品时删除服务，安装和卸载时停止服务。

# ruby-on-rails - Rails 3.1 -> 3.2 升级后无法加载 JSON 扩展解析器

> ID：14754108
> 
> 赞同：2
> 
> 时间：2013-02-07T14:57:02.637
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3.2

我正在将 Rails 应用程序从 3.1.10 升级到 3.2.11。我正在使用 1.7.6 版的 json gem。

在我的应用程序控制器的顶部，我一直需要这样的库：`require 'json/ext'`，强制使用扩展的 json 解析器。

升级后，此行会抛出错误：“no such file to load -- json/ext/parser”。

如果我使用纯解析器，一切都可以正常工作，或者通过将需求更改为`require 'json'`或`require json/pure`。

[文档](http://flori.github.com/json/)建议尽可能使用扩展解析器，理由是性能优势。我正在寻求帮助以使扩展变体正常工作。谢谢！

# wcf - 托管在 Windows 服务中的 netTcpRelayBinding WCF 服务 - 标准做法

> ID：14754112
> 
> 赞同：0
> 
> 时间：2013-02-07T14:57:16.120
> 
> 标签：wcf, azure, windows-services, azureservicebus

我正在编写托管在 Windows 服务中的 netTcpRelayBinding WCF 服务。由于缺乏windows服务开发经验，我觉得我的代码很幼稚。这是从 Windows-Azure 调用的。您能否帮我查看代码，以及我如何即兴创作它：- 我们正在使用 NLOG 进行日志记录。

我的服务抛出异常（在问题末尾提到）。

我应该如何：- 1\. 定义 Windows 服务依赖项（它应该在机器连接到互联网之前启动）。2\. 应该怎么多容错，隔了一段时间怎么启动。

```
namespace XYC.Service.WinServiceHost
    {
        public partial class XYCService : ServiceBase
        {
            private ServiceHost serviceHost = null;
            private static readonly NLog.Logger Logger = NLog.LogManager.GetCurrentClassLogger();
            public One23InsightService()
            {
                // Name the Windows Service
                ServiceName = "XYCService ";
                const string logName = "Application";
                InitializeComponent();
                if (!System.Diagnostics.EventLog.SourceExists(ServiceName))
                {
                    System.Diagnostics.EventLog.CreateEventSource(ServiceName, logName);
                }
                EnLog.Source = ServiceName;
                EnLog.Log = logName;
            }

            protected override void OnStart(string[] args)
            {
                if (serviceHost != null)
                {
                    serviceHost.Close();
                }
                EnLog.WriteEntry(ServiceName + " Inside OnStart...");
                try
                {
                   serviceHost = new ServiceHost(typeof(InsightSrcDataService));

                    serviceHost.Faulted += HostFaulted;
                    serviceHost.UnknownMessageReceived += HostUnknownMessageReceived;

                    serviceHost.Open();
                    LogServiceInfo(serviceHost);
                    if (serviceHost.State != CommunicationState.Faulted)
                    {
                        EnLog.WriteEntry(ServiceName + " started successfully.");
                        EnLog.WriteEntry(ServiceName + " Automapping of entities are done successfully.");
                    }
                }
                catch (Exception ex)
                {
                    string msg = ServiceName + " failed to start. Exception Message:-" + ex.Message + (ex.InnerException != null ? ex.InnerException.Message : string.Empty);
                    EnLog.WriteEntry(msg);
                    Logger.LogException(NLog.LogLevel.Error, msg, ex);
                }
            }

            private void LogServiceInfo(ServiceHost host)
            {
                EnLog.WriteEntry(host.Description.ServiceType + "is up and running with these endpoints :");
                foreach (ServiceEndpoint se in host.Description.Endpoints)
                {
                    EnLog.WriteEntry(se.Address.ToString());
                }
            }

            private void HostUnknownMessageReceived(object sender, UnknownMessageReceivedEventArgs e)
            {
                EnLog.WriteEntry(ServiceName + " Inside UnknownMessageReceived.");
            }

            private void HostFaulted(object sender, EventArgs e)
            {
                EnLog.WriteEntry(ServiceName + " - Host Faulted.");
            }

            protected override void OnStop()
            {
                if (serviceHost == null) return;
                serviceHost.Close();
                serviceHost = null;
            }
        }
    } 
```

`Configuration`

```
 <system.serviceModel>
    <services>
      <service name="XYC.Service.WCFNetTCPContract.DataService">
        <endpoint
          name="SrcWeb"
          address="sb://data.servicebus.windows.net/App/long-guid"
                  binding="netTcpRelayBinding"
                  contract="XYC.Service.Interface.IService"
                  bindingConfiguration="Hybrid"
                  behaviorConfiguration="sbTokenProvider" />

        <endpoint
          name="AdminServiceEndpoint"
          address="sb://serviceaddress.servicebus.windows.net/Admin/long-guid"
                  binding="netTcpRelayBinding"
                  contract="One234C.Service.AdminInterface.IOne23AdminService"
                  bindingConfiguration="Hybrid"
                  behaviorConfiguration="sbTokenProvider" />
      </service>
    </services>
    <bindings>
      <netTcpRelayBinding>
        <binding name="Hybrid" connectionMode="Hybrid" maxReceivedMessageSize="500000">
          <security mode="None" />
        </binding>
      </netTcpRelayBinding>
    </bindings>
    <behaviors>

      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="False" httpsGetEnabled="False" />
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="sbTokenProvider">
          <transportClientEndpointBehavior>
            <tokenProvider>
              <sharedSecret issuerName="owner" issuerSecret="xyc" />
            </tokenProvider>
          </transportClientEndpointBehavior>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <extensions>   
    </extensions>
  </system.serviceModel> 
```

这有时会引发以下异常（我猜它缺少 Windows 服务依赖性，我希望在机器连接到互联网和 sql 服务器服务启动后启动此服务）。

1.  System.TimeoutException：打开操作未在分配的 00:00:00 超时内完成。分配给此操作的时间可能是较长超时的一部分。---> System.TimeoutException：在 00:00:00 之后打开超时，同时建立到 net.tcp://xxx.servicebus.windows.net:9351/Src/guid/ 的传输会话。分配给此操作的时间可能是较长超时的一部分。---> System.TimeoutException：通过 net.tcp://xxx.servicebus.windows.net:9351/Src/guid/ 连接到 00:00:00 后超时。对 1 个可用地址中的 0 个进行了连接尝试 ()。检查您的通道的 RemoteAddress 并验证此端点的 DNS 记录是否对应于有效的 IP 地址。分配给此操作的时间可能是较长超时的一部分。在 System.ServiceModel.Channels。
2.  System.ArgumentException：issuerSecret 无效。参数名称：Microsoft.ServiceBus.SharedSecretTokenProvider.DecodeSecret(String issuerSecret) 在 Microsoft.ServiceBus.SharedSecretTokenProvider..ctor(String issuerName, String issuerSecret) 在 Microsoft.ServiceBus.Configuration.TokenProviderElement.CreateTokenProvider() 在 Microsoft.ServiceBus.Configuration 的 issuerSecret .TransportClientEndpointBehaviorElement.CreateBehavior() 在 System.ServiceModel.Description.ConfigLoader.LoadBehaviors[T](ServiceModelExtensionCollectionElement`1 behaviorElement, KeyedByTypeCollection`1 行为，布尔 commonBehaviors) 在 System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress, Boolean skipHost) 在 System.ServiceModel.ServiceHostBase.LoadConfigurationSectionInternal(ConfigLoader configLoader, ServiceDescription description, ServiceElement serviceSection) 在 System.ServiceModel.ServiceHost.ApplyConfiguration() 在 System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses) 在 System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses) 在 One234C.Service.WinServiceHost.One23InsightService .OnStart(String[] args) issuerSecret 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:11:29.440

那么第二个错误意味着您正在使用的命名空间的颁发者密钥不正确。您可能需要检查以确保您使用的是正确的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T04:26:11.840

看起来像 NetTCPRelaybinding 实现中的错误。我也有同样的问题。我中继服务总线的部分，我可以看到正在显示的服务，但中继类型为无。

# angularjs - angular.js IE 路由问题

> ID：14754119
> 
> 赞同：3
> 
> 时间：2013-02-07T14:57:28.487
> 
> 标签：angularjs

我的应用程序似乎在 chrome 和 FF 中运行良好，但在 IE 中存在路由问题。

如果我声明我的应用程序如下

```
var app = angular.module('category', ['ngSanitize', 'ui']); 
```

完全没有问题

但是，如果我将其更改为包含这样的路由定义

```
var app = angular.module('category', ['ngSanitize', 'ui']).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
  $routeProvider.
  when('/cat/', {templateUrl: '/category.inc.php',   controller: 'CategoryProductsCtrl'}).
  when('/cat/:colour_title/', {templateUrl: '/category.inc.php', controller: 'CategoryProductsCtrl'});
}]); 
```

IE在地址栏中的猫之前添加了一个#，而不是像这样显示

example.com/cat/

它显示

example.com/#/cat/

在 IE 控制台中，我收到以下错误

错误：达到 10 次 $digest() 迭代。中止！观察者在最后 5 次迭代中触发： [["fn: function(){var a=d.url(),b=.......

我已经完成了这里的步骤

[http://docs.angularjs.org/guide/ie](http://docs.angularjs.org/guide/ie)

我包括

JSON2，angular-ui-ieshiv.min.js html5shim.js（使其在 IE7 中工作）

并且没有在我的应用程序中使用 ant 自定义标签等。任何帮助，将不胜感激。尽管我正在从服务器中提取数据，但我的应用实际上处于与此相同的状态

[http://docs.angularjs.org/tutorial/step_07](http://docs.angularjs.org/tutorial/step_07)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-21T23:19:02.943

您可以在路由器配置中将 HTML5 模式设置为 true，并从 url 中删除“#”，例如：`url: 'http://your_site.com/page/home'`

像这样。。

```
app.config: $locationProvider.html5Mode = true;
index.html: <base href="root_directory_here" /> 
```

[[更多信息在这里](https://stackoverflow.com/questions/17768814/ngroute-set-base-url-for-all-routes)，[在这里](https://stackoverflow.com/questions/16677528/location-switching-between-html5-and-hashbang-mode-link-rewriting)]

# javascript - Javascript 滚动和 iphone / ipad

> ID：14754122
> 
> 赞同：2
> 
> 时间：2013-02-07T14:57:36.927
> 
> 标签：javascript, ios, ipad, television, channels

我正在制作我的网站 (programmetv.net) 的移动版本，并且我遇到了 javascript 滚动事件的问题，该事件在 ipad 上无法在 PC 上运行。

[您可以在http://www.programmetv.net/ipad/index.php?date=20130210](http://www.programmetv.net/ipad/index.php?date=20130210)上查看我的移动版本

如果您使用 PC 进行测试，频道会停留在屏幕左侧，但如果您使用 ipad（或 iphone）进行测试，您会看到我的 javascript 无法正常工作。频道变得不可见，如果您停止滚动，它们就会变得可见。

这有我的javascript：

```
<script language="JavaScript">
    document.onscroll = scrollIt;
    function scrollIt() {
        var node = document.getElementById("chaines");
        var XX = 0;
        var YY = 0;
        var posit = (window.pageXOffset < (XX-YY)) 
            ? XX : window.pageXOffset + YY;
        node.style.left = posit + "px";
    }
</script> 
```

我想帮助制作我的 javascript 的 ipad 版本，就像在 pc (firefox) 上一样工作。

# grails - 仅在 gsp 中显示第一个错误

> ID：14754123
> 
> 赞同：1
> 
> 时间：2013-02-07T14:57:38.177
> 
> 标签：grails, grails-validation

我正在对字段执行内联验证作为它们之间的用户选项卡。当一个字段出现多个错误时会出现问题，即显示两个错误。我只想显示一个错误（第一个错误是为了争论）。

有不同的标签来处理这个吗？

```
<jqvalui:renderError for="title">
    <g:eachError bean="${objInstance}" field="title"><g:message error="${it}" /></g:eachError>
</jqvalui:renderError> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:56:57.877

所以基本上你只需要使用错误本身而不是使用为你提供的标签。

```
<g:hasErrors bean="${objInstance}" field="title">
    <g:message error="${objInstance.errors.getFieldErrors("title")[0]}" />
</g:hasErrors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:00:35.197

我知道这就像一个黑客，但如果没有确切的解决方案......考虑添加一个标志或一个计数器并在循环内设置/测试它：

```
<g:set var="isErrorShown" value=""/>
<g:eachError bean="${objInstance}" field="title">
    <g:if test="${!isErrorShown}">
        <g:message error="${it}"/>
        <g:set var="isErrorShown" value="TRUE"/>
    </g:if>
</g:eachError> 
```

# xpages - 如何在 xpage 的最底部添加 Javascript 资源？

> ID：14754125
> 
> 赞同：0
> 
> 时间：2013-02-07T14:57:43.407
> 
> 标签：xpages, lotus-domino, lotus

我需要在 xpage 的末尾包含一个 javascript 文件，以便在自动生成的 XSP.addOnLoad 事件代码之后加载它，例如

```
XSP.addOnLoad(function() {
XSP.attachEvent....
}
<script src="my.js"> 
```

理想情况下，我想将其作为主题的一部分包含在内，但如果这样做，它将进入 HEAD 部分

我也可以.. - 在主题中指定将链接插入到页面底部而不是头部的客户端 js 资源 - 直接在 xpage 上包含资源，以便它在自动生成的代码之后

注意：这是让 xpages 应用程序与 Foundations 一起工作所必需的 [http://foundation.zurb.com/docs/](http://foundation.zurb.com/docs/)

事件绑定到字段后，我需要包含基础 js 文件

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:24:55.397

尝试使用以下代码在最后添加一个脚本块：

```
XSP.addOnLoad(function() {
  document.write('<script src="my.js">');
} 
```

但是，这可能会在生成之前执行`XSP.addOnLoad`。然后，您可以尝试这样的小技巧：

```
XSP.addOnLoad(function() {
  setTimeout(document.write('<script src="my.js">'), 200);
} 
```

# php - 我想从我的表中检索唯一值

> ID：14754127
> 
> 赞同：0
> 
> 时间：2013-02-07T14:57:45.450
> 
> 标签：php, mysql, sql

在一个表中我有一些列有重复值我想从我的表中检索唯一值我使用`SELECT DISTINCT column_name FROM table_name`查询并且我得到了唯一列但我的问题是我也想要任何重复值的 id 我如何从使用单个查询？例如

```
+----+------+------+
| id | name | po   |
+----+------+------+
|  1 | some |    2 |
|  2 | xyzs |    3 |
|  3 | frth |    2 |
|  4 | lopd |    3 |
|  5 | gtry |    2 |
+----+------+------+ 
```

我想找到唯一的 po 和它的任何一个 id

输出

像这样的东西

```
po - 2 id - ( any of 1,3,5)
po - 3 id - ( any of 2 or 4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:02:59.697

只需将它们分组并获取最大 ID 或最小值。

```
SELECT max(id), po FROM table_name group by po 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:03:00.607

不要引用我的话，但你可以做类似的事情：

```
SELECT GROUP_CONCAT(id) FROM table_name GROUP BY po 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:03:54.720

如果你不在乎你会得到哪个 id，那么：

```
SELECT po,id FROM table GROUP BY po 
```

如果您希望获得具有相同 po 的第一个/最后一个 id，您也可以添加 MIN(id)/MAX(id)：

```
SELECT po,MIN(id) as id FROM table GROUP BY po 
```

您还可以拥有该 po 的*所有*id：

```
SELECT po,GROUP_CONCAT(id) as ids FROM table GROUP BY po 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:05:29.127

试试这个：

```
SELECT MIN(id) id, po 
FROM table_name
GROUPB BY po, id 
```

# uicollectionview - 发送到实例的无法识别选择器中的问题

> ID：14754130
> 
> 赞同：5
> 
> 时间：2013-02-07T14:57:58.267
> 
> 标签：uicollectionview, uicollectionviewcell

我正在创建一个 CollectionView 应用程序。我通过 JSON 字符串从服务器获取数据。我的工作流程如下

1.  将集合视图单元创建为 ProjectVCollectionViewCell.h、.m、.xib。

    .h 的代码是 -

> @interface ProjectCollectionViewCell : UICollectionViewCell @property
> (weak, nonatomic) IBOutlet UIImageView *projectImage;
> @property (weak, nonatomic) IBOutlet UILabel *projectLabel;
> @结尾

.m 的代码是默认的，并综合了上述 2 个变量。并且 .xib 具有带有图像视图和标签的集合视图单元（将上述类与集合视图单元链接并将标识符名称链接为“projectCell”。

1.  其 ViewController 的代码，包含 collectionView，如下

ViewController.m 里面的代码是

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section{
    return [projectList count];
}
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    ProjectCollectionViewCell *cell = (ProjectCollectionViewCell *)[cv dequeueReusableCellWithReuseIdentifier:@"projectCell" forIndexPath:indexPath];    

    cell.projectLabel.text = @"";//Here i am getting issue
    //cell.projectLabel.text = [[NSString alloc] initWithString:[[projectList objectAtIndex:indexPath.row] objectForKey:@"albumName"]];        
    return cell;
} 
```

在上面的代码中 cell.projectlabel 给了我问题

```
[UICollectionViewCell projectLabel]: unrecognized selector sent to instance 0x75f0fb0
2013-02-07 20:08:17.723 Sample[3189:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UICollectionViewCell projectLabel]: unrecognized selector sent to instance 0x75f0fb0'
*** First throw call stack: 
```

单元格值很好，我用 NSLog 追踪到，代码提示也在“。”之后使用 projectLabel。但我无法通过这个设置标签字段值。所以请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:39:55.647

在使用 ProjectCollectionViewCell.xib 创建自定义 ProjectCollectionViewCell 的情况下，您必须在 viewDidLoad 中注册 Nib：

```
[self.projectListView registerNib:[UINib nibWithNibName:@"ProjectCollectionViewCell" bundle:nil] forCellWithReuseIdentifier:@"projectCell"]; 
```

您应该更改为使用 StoryBoard 来节省 CollectionView 的时间。不需要注册任何东西，只需选择customCell，将您想要的所有内容拖放到CollectionView单元格中并拖动IBOutlet：[https ://github.com/lequysang/testCollectionViewScroll](https://github.com/lequysang/testCollectionViewScroll)

# iphone - ios - 确定具有某个端口的某个地址是否可访问

> ID：14754135
> 
> 赞同：1
> 
> 时间：2013-02-07T14:58:09.813
> 
> 标签：iphone, ios, objective-c, ipad, network-programming

我想知道我的服务器是否通过我的 ios 应用程序在线。这就是我正在做的事情：

```
Boolean result;
CFHostRef hostRef = CFHostCreateWithName(kCFAllocatorDefault, (__bridge CFDataRef)(serverIPAddress)); //serverIPAdress = "10.10.10.100:5010"

    if(hostRef) {
        result = CFHostStartInfoResolution(hostRef, kCFHostAddresses, NULL); // pass an error instead of NULL here to find out why it failed
    }

    if (!result) { //This means that the host was unreachable        
        return ;
    } 
```

我的服务器在线，我可以稍后在代码中访问它（这意味着我与服务器的连接工作得很好）。但是，我希望能够检测我的服务器在某个端口上是否可以访问。

另外，如果我`:5010`从IP地址中删除“”，它会检测到我的服务器在线（它不会进入“ `!result`”条件）并且如果我输入“ `10.10.10.253`”对应于没有IP地址，则检测到我的服务器离线在我的网络上。

如何确定我的服务器是否在线？

我看过这个问题：[Reachability with Address - Server AND Port - iOS 5](https://stackoverflow.com/questions/11395397/reachability-with-address-server-and-port-ios-5?rq=1)但它不起作用，因为无论我输入什么 IP 地址，它总是返回它是可访问的

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T20:07:32.237

一种方法可能是打开到特定端口的套接字连接，以查看是否得到任何响应。如果不是，则目的地不可到达。例如

```
#include <arpa/inet.h> //for PF_INET, SOCK_STREAM, IPPROTO_TCP etc

CFRunLoopSourceRef gSocketSource;
void ConnectCallBack(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info)
{
    UInt8 buffer[1024];
    bzero(buffer, sizeof(buffer));
    CFSocketNativeHandle sock = CFSocketGetNative(socket); // The native socket, used recv()

    //check here for correct connect output from server
    recv(sock, buffer, sizeof(buffer), 0);
    printf("Output: %s\n", buffer);

    if (gSocketSource)
    {
        CFRunLoopRef currentRunLoop = CFRunLoopGetCurrent();
        if (CFRunLoopContainsSource(currentRunLoop, gSocketSource, kCFRunLoopDefaultMode))
        {
            CFRunLoopRemoveSource(currentRunLoop, gSocketSource, kCFRunLoopDefaultMode);
        }
        CFRelease(gSocketSource);
    }

    if (socket) //close socket
    {
        if (CFSocketIsValid(socket))
        {
            CFSocketInvalidate(socket);
        }
        CFRelease(socket);
    }
}

void ConnectSocket()
{
    //socket
    CFSocketContext context = {0, NULL, NULL, NULL, NULL};
    CFSocketRef theSocket = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_STREAM, IPPROTO_TCP, kCFSocketConnectCallBack , (CFSocketCallBack)ConnectCallBack, &context);

    //address
    struct sockaddr_in socketAddress;
    memset(&socketAddress, 0, sizeof(socketAddress));
    socketAddress.sin_len = sizeof(socketAddress);
    socketAddress.sin_family = AF_INET;
    socketAddress.sin_port = htons(5010);
    socketAddress.sin_addr.s_addr = inet_addr("10.10.10.253");

    gSocketSource = CFSocketCreateRunLoopSource(kCFAllocatorDefault, theSocket, 0);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), gSocketSource, kCFRunLoopDefaultMode);

    CFDataRef socketData = CFDataCreate(kCFAllocatorDefault, (const UInt8 *)&socketAddress, sizeof(socketAddress));
    CFSocketError status = CFSocketConnectToAddress(theSocket, socketData, 30); //30 second timeout
    //check status here
    CFRelease(socketData);
} 
```

基本上，如果服务器在该端口上无法访问，您很可能会得到一个 kCFSocketTimeout 用于 CFSocketError 状态。如果您希望解析来自服务器的特定响应以确定服务器是否已准备好，则将在成功的套接字连接时调用 ConnectCallBack 函数。

这只是一个简单的例子，请确保不要通过在主线程上调用套接字连接来阻塞 UI，例如 recv()

# javascript - Javascript，更改组合框中的选定项目

> ID：14754137
> 
> 赞同：0
> 
> 时间：2013-02-07T14:58:10.010
> 
> 标签：javascript, html, drop-down-menu, combobox, wai-aria

我正在尝试使用 javascript 更改组合框中的选定项目，但它看起来不像 HTML 中的普通下拉列表。我试图在网上找到答案，但只为不同类型的下拉列表找到了答案。感谢任何帮助我的人。

这是代码：

```
<span class="widget-wrapper" >
<span class="off-screen module-js-ignore" id="dropdown_aria_label_1">
<span>Select Quantity</span>
<!--[if lte IE 8]><span class="dropdown-ie-value module-js-ignore">__</span><![endif]-->
</span>
<span class="widget-theme margin10R " id="quantity_select" style="" role="application">

<span tabindex="0" class="widget-dropdown module-js-ignore" role="combobox" aria-expanded="false" aria-labelledby="dropdown_aria_label_1" aria-describedby="dropdown_current_value_1" aria-valuetext="__" aria-owns="dropdown_aria_list_1" aria-haspopup="true"><!--[if lte IE 7]><span class="off-screen dropdown-ie-value module-js-ignore">__</span><![endif]--><span><b><b class="widget-default-color dropdown-selected-label module-js-ignore" style="" aria-live="assertive" id="dropdown_current_value_1" role="status">__</b></b></span></span>
<div class="dropdown-options-form " style="display:none;position:absolute;z-index:100">

<ul class="widget-dropdown-list module-js-ignore" id="dropdown_aria_list_1" role="listbox">

    <li tabindex="0" class=" dropdown_default_option " role="option" aria-disabled="false" aria-selected="true" data-value=""><span class="dropdown_option_text dropdown_option_selected_text">__</span></li>

    <li tabindex="0" class="" role="option" aria-disabled="false" aria-selected="false" data-value="1"><span class="dropdown_option_text dropdown_option_selected_text">1</span></li>

    <li tabindex="0" class="" role="option" aria-disabled="false" aria-selected="false" data-value="2"><span class="dropdown_option_text dropdown_option_selected_text">2</span></li>

    <li tabindex="0" class="" role="option" aria-disabled="false" aria-selected="false" data-value="3"><span class="dropdown_option_text dropdown_option_selected_text">3</span></li>

    <li tabindex="0" class="" role="option" aria-disabled="false" aria-selected="false" data-value="4"><span class="dropdown_option_text dropdown_option_selected_text">4</span></li>

    <li tabindex="0" class="" role="option" aria-disabled="false" aria-selected="false" data-value="dd_template"><span class="dropdown_option_text dropdown_option_selected_text">dd_template</span></li>

</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T23:59:36.243

使用以下过程：

*   查找具有该属性的元素`aria-selected="true"`
*   将其更改`aria-selected="true"`为`aria-selected="false"`
*   找到事件的目标
*   将其更改`aria-selected="false"`为`aria-selected="true"`

# c# - 以这种方式使用锁定位复制位图区域是否安全（双关语）？

> ID：14754142
> 
> 赞同：6
> 
> 时间：2013-02-07T14:58:14.037
> 
> 标签：c#, bitmap, copy, lockbits

我想我找到了一种更快的方法来在 c# 中复制位图。（如果它有效，我确定我不是第一个，但我还没有在任何地方看到它。）

我能想到的最简单的方法是断言我的想法是基于什么的，如果没有人在其中提出漏洞，假设这个想法是合理的：

```
 void FastCopyRegion(Bitmap CopyMe, ref Bitmap IntoMe, Rectangle CopyArea)
    {
        //`IntoMe` need not be declared `ref` but it brings
        //   attention to the fact it will be modified
        Debug.Assert(CopyMe.PixelFormat == IntoMe.PixelFormat,
           "PixelFormat mismatch, we could have a problem");
        Debug.Assert(CopyMe.Width == IntoMe.Width,    //This check does not verify
           "Stride mismatch, we could have a problem");// sign of `stride` match
        BitmapData copyData = CopyMe.LockBits(CopyArea,
            ImageLockMode.ReadWrite, CopyMe.PixelFormat);
        IntoMe.UnlockBits(copyData);
    } 
```

1)`LockBits`简单地将像素数据块从位图中复制到固定内存中进行编辑并复制回使用`UnlockBits`

2）使用`LockBits`不会影响复制的内存块，因此它应该对从中复制的图像没有影响。

3）由于您从不输入`unsafe`代码，因此应该没有损坏内存的风险。

我看到的可能漏洞：

1）如果`PixelFormat`两个位图的s不同，这种方法可能不会总是正确复制。但是，由于`LockBits`需要指定像素格式，因此似乎已处理。（如果是这样，那么在另外 99.9% 的时间里我们都没有切换像素格式！/EndSarcasm）

2）如果两个位图的步幅不匹配，则可能有问题（因为`stride`复制操作中是外部for循环的增量器。）此问题将限制复制到具有相等步幅的位图。

编辑：我认为断言#2 一定是错误的......我只是在稍后尝试访问通过 CopyMe 传递的位图时发现了一个错误。下面的解决方法，但我不确定它是否会留下一块固定的内存。（内存泄漏警报！）

```
 void FastCopyRegion(Bitmap CopyMe, ref Bitmap IntoMe, Rectangle CopyArea)
    {
        //`IntoMe` need not be declared `ref` but it brings attention to the fact it will be modified
        Debug.Assert(CopyMe.PixelFormat == IntoMe.PixelFormat, "PixelFormat mismatch, we could have a problem");
        Debug.Assert(CopyMe.Width == IntoMe.Width, "Width mismatch, we could have a problem");
        BitmapData copyD = IntoMe.LockBits(CopyArea, ImageLockMode.ReadWrite, CopyMe.PixelFormat);
        BitmapData copyData = CopyMe.LockBits(CopyArea, ImageLockMode.ReadWrite, CopyMe.PixelFormat);
        CopyMe.UnlockBits(copyData);
        IntoMe.UnlockBits(copyData);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T16:52:10.007

改为使用`Bitmap.Clone()`。GDI+ 往往不报告异常，由此产生的错误将很难跟踪。

将图像复制到位图中的一种非常**快速的方法是**`Graphics.DrawImage()` *只要您不转换像素格式或缩放图像*。

# c++ - C++：自动生成（默认）复制构造函数

> ID：14754145
> 
> 赞同：2
> 
> 时间：2013-02-07T14:58:28.817
> 
> 标签：c++, operator-overloading, copy-constructor

如果我声明一个类，（没有动态内存分配，没有指针）：

```
class A{
  int a,b;
public:
  A();
  A(int,int);
  A& operator=(const A);
}; 
```

不声明复制构造函数是否安全？默认的复制构造函数是什么样子的？

```
A& A::operator=(const A other)
{
   a=other.a;
   b=other.b;
   return *this;
} 
```

**即使我没有声明复制构造函数，当我调用operator=()**时也会调用默认的构造函数

 *** * *

编辑：

默认析构函数是：

```
A::~A(){} 
```

所以这里不需要

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T15:01:07.590

规则是，如果您需要提供：

*   复制构造函数或
*   析构函数或
*   复制赋值运算符

那么您可能需要提供所有三个。这条规则被称为**[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。

* * *

> **不*声明复制构造函数是否安全？***

这是安全的。

> ***您是否必须为您的示例案例？***

并不真地。具体来说，三法则支配着这一点。检查链接的问题以获取更多详细信息。

* * *

> ***默认的复制构造函数是什么样子的？***

我认为这是在问，默认的复制构造函数是做什么的。
答案在：
**C++03 标准 12.8 复制类对象：**
**第 8 段：**

> 类 X 的隐式定义的复制构造函数执行其子对象的成员复制。复制的顺序与用户定义的构造函数中基和成员的初始化顺序相同（见 12.6.2）。每个子对象都以适合其类型的方式复制：
> 
> — 如果子对象是类类型，则使用该类的复制构造函数；
> — 如果子对象是一个数组，则以适合元素类型的方式复制每个元素；
> — 如果子对象是标量类型，则使用内置赋值运算符。
> 虚拟基类子对象只能由隐式定义的复制构造函数复制一次（见 12.6.2）。

* * *

> ***即使我不声明复制构造函数，调用时也会调用默认的构造函数`operator=()`***

仅当需要创建类对象的副本时才调用复制构造函数。这涉及在传递到函数或从函数返回时创建的对象的副本。
您的复制赋值运算符`A` *按值*传递对象，这种按值传递是通过通过复制构造函数传递对象的副本并因此调用复制构造函数来实现的。
为避免复制，您需要*通过引用*传递：

```
A& A::operator=(const A& other) 
```

**好读：**
[按引用传递与按值传递有什么区别？](https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T15:01:45.437

您似乎将*复制构造函数*与*复制赋值*运算符混淆了。隐式生成*的复制构造函数*将*复制构造*每个成员：

```
A::A( A const& source )
  : a( source.a )
  , b( source.b )
{} 
```

隐式生成*的复制赋值*运算符将对每个成员进行*复制赋值：*

```
A& A::operator =( A const& source )
{
    a = source.a;
    b = source.b;
    return *this;
} 
```

您在问题中定义的*复制赋值*`A`运算符采用by *copy*，因此将调用*复制构造函数*`operator=`来创建传递给的参数。请注意，在某些情况下可能会省略副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:02:16.137

```
A::A(const A& other) != A& A::operator=(const A other) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T15:07:04.333

您的班级提供`operator=`. 根据三个规则（如@AlokSave 所说），您还应该提供复制构造函数和析构函数。

问题是，如果您对默认提供的复制构造函数感到满意，为什么您对默认提供的复制赋值运算符不满意？如果您是，请不要声明`operator=`并让编译器为您生成整个“三规则”。**

# reporting-services - 报表生成器中未填充级联参数的默认值

> ID：14754152
> 
> 赞同：1
> 
> 时间：2013-02-07T14:58:46.867
> 
> 标签：reporting-services, parameters, default, reportbuilder

我有两个从日期参数级联的参数。第一个级联参数能够填充并默认选择所有标签（这就是我想要的）。第二个成功填充值，但默认选择无（这是我要修复的）。我已经验证两者都从查询中返回各自的默认值 - 我知道查询对有问题的参数有好处，因为它成功填充了可用的选择，它只是不会默认选择它们。

将两个参数从一个参数级联起来有什么问题吗？结果集中的任何问题都会成功返回参数标签但对默认值无效？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:41:53.777

OP在评论中发布了答案：

> 我返回了一个 NULL 值，这使我无法在多属性参数中全选。我现在使用 CASE 语句检查 NULL 来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:09:24.267

I have reports that have multiple parameters cascading from a single one, so I don't think that's the problem.

My hunch is that something isn't right in the parameter. To troubleshoot this, set the value field and the Label field for the Available Values and the default values all to be the exact same field from the same dataset. (Use the one that was originally the Value field for the parameter.) If you "select all" do you get all the data you expect?

# java - 为什么#不能在java中使用标识符？

> ID：14754153
> 
> 赞同：-4
> 
> 时间：2013-02-07T14:58:49.597
> 
> 标签：java, identifier

请让我解释一下 # 不能在 java 标识符中使用。例如。诠释 e#;

另外，让我知道#在java中使用以及在哪里使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:00:51.940

因为它不是语言中的有效符号。就像你不能做的那样：

```
int HELLO+*/\Variable; 
```

见*3.8。Java 规范中的标识符：*

标识符是 Java 字母和 Java 数字的无限长度序列，其中第一个必须是 Java 字母。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T15:05:27.863

我认为您需要阅读以下内容：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)

如果您仍然不知道，请事后询问 Oracle！

# android - 带有非默认语言环境的 ActionBar NullPointerException 的 Android 应用程序

> ID：14754154
> 
> 赞同：3
> 
> 时间：2013-02-07T14:58:51.793
> 
> 标签：android, localization, tabs, android-actionbar, locale

我使用 ActionBar 和 2 个选项卡创建了非常基本的 Android 应用程序。它工作正常。然后我添加了语言环境资源目录`res/values-de`，并在其中添加了`strings.xml`用德语翻译的字符串。我将 Nexus7 上的语言更改为德语，部署后应用程序无法启动。我在模拟器上遇到了同样的问题。

请你能帮我让这个应用程序在我的移动设备上以一些非默认语言环境运行吗？在我的情况下德语...

报告以下错误。

```
02-07 15:32:41.314: W/dalvikvm(16682): threadid=1: thread exiting with uncaught exception (group=0x40d82930)
02-07 15:32:41.324: E/AndroidRuntime(16682): FATAL EXCEPTION: main
02-07 15:32:41.324: E/AndroidRuntime(16682): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tabactionbar/com.example.tabactionbar.MainActivity}: java.lang.NullPointerException
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.os.Looper.loop(Looper.java:137)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at java.lang.reflect.Method.invoke(Method.java:511)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at dalvik.system.NativeStart.main(Native Method)
02-07 15:32:41.324: E/AndroidRuntime(16682): **Caused by: java.lang.NullPointerException
02-07 15:32:41.324: E/AndroidRuntime(16682):    at com.example.tabactionbar.MainActivity.onCreate(MainActivity.java:20)**
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.Activity.performCreate(Activity.java:5104)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-07 15:32:41.324: E/AndroidRuntime(16682):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-07 15:32:41.324: E/AndroidRuntime(16682):    ... 11 more
02-07 15:32:41.334: W/ActivityManager(492):   Force finishing activity com.example.tabactionbar/.MainActivity
02-07 15:32:41.434: D/dalvikvm(492): GC_FOR_ALLOC freed 546K, 19% free 15994K/19568K, paused 64ms, total 64ms
02-07 15:32:41.574: D/libgps(492): proxy_gps_nmea_cb() 
```

**没有 TabListener 的 MainActivity 代码：**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar actionBar = getActionBar();

    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    String label1 = getResources().getString(R.string.label1);
    Tab tab = actionBar.newTab();
    tab.setText(label1);
    TabListener<Tab1Fragment> tl = new TabListener<Tab1Fragment>(this,
            label1, Tab1Fragment.class);
    tab.setTabListener(tl);
    actionBar.addTab(tab);

    String label2 = getResources().getString(R.string.label2);
    tab = actionBar.newTab();
    tab.setText(label2);
    TabListener<Tab2Fragment> tl2 = new TabListener<Tab2Fragment>(this,
            label2, Tab2Fragment.class);
    tab.setTabListener(tl2);
    actionBar.addTab(tab);          
} 
```

报错第20行是 **actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);**

**带有德语文本的 **strings.xml是****

 **```
<string name="app_name">TabActionBar</string>
<string name="hello_world">Hello world!</string>
<string name="menu_settings">Settings</string>
<string name="title_activity_main">MainActivity</string>
<string name="label1">Eins</string>
<string name="label2">Zwei</string>
<string name="body1">Erste</string>
<string name="body2">Zweite</string> 
```

请你能帮我让这个应用程序在我的移动设备上以一些非默认语言环境运行吗？在我的情况下德语...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:29:37.327

Check out this discussion: [Action Bar - Menu Button - Missing](https://stackoverflow.com/questions/12320775/action-bar-menu-button-missing)

By any chance, do you also have the ***styles.xml*** file inside the ***values-de*** folder? This could cause problems with the ActionBar becoming NULL.**

# java - 在 MouseAdapter 中访问 JFrame 的组件

> ID：14754155
> 
> 赞同：0
> 
> 时间：2013-02-07T14:58:53.123
> 
> 标签：java, adapter

使用适配器时从父组件访问元素的正确方法是什么？例子：

在我的 JFrame 中有一个带有“连接”项的菜单。我用 MouseAdapter 处理“按下”事件：

```
mntmConnect.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent arg0) {
            mainDialog.getY();
        }
    }); 
```

如您所见，我想访问此 Menu(item) 所属的 mainDialog 的组件或方法。但是在那个 MouseAdapter 中当然没有“mainDialog”是已知的。

所以这是我的方法：

**1\. 将需要的属性声明为 final**

**2.创建自己的MouseAdapter，将“mainDialog”作为ctor中的变量**

在我看来，这两个都是间接的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:01:17.030

> 这样做的正确方法是什么？

这三种方法都是正确的。

1.  将匿名类所需的属性声明为 final。
2.  将匿名类所需的属性声明为全局类。
3.  在构造函数中创建一个`MouseAdapter`将“mainDialog”作为变量的类。

我倾向于将 2 用于小型`MouseAdapter`匿名类。

我倾向于将 3 用于较大的`MouseAdapter`课程。我制作了这些单独的类并将它们放在一个控制器包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:53:03.413

> 我用 MouseAdapter 处理“按下”事件

你不应该这样做。您应该将 ActionListener（或 Action）添加到 JMenuItem。

所有组件都有父级。因此，如果您想知道被点击的菜单项的父窗口，您需要继续查找父组件，直到您到达该窗口。这是一种方法：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MenuItemFrame extends JFrame implements ActionListener
{
    public MenuItemFrame()
    {
        JMenuBar menuBar = new JMenuBar();
        setJMenuBar( menuBar );

        JMenu menu = new JMenu( "File" );
        menuBar.add( menu );

        JMenuItem item1 = new JMenuItem("Item 1");
        item1.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F2, 0, false));

        menu.add( item1 );

        JMenu subMenu1 = new JMenu("SubMenu 1");
        menu.add( subMenu1 );

        JMenuItem subItem1 = new JMenuItem("SubItem 1");
        subMenu1.add( subItem1 );

        JMenu subMenu12 = new JMenu("SubMenu 12");
        subMenu1.add( subMenu12 );

        JMenuItem subItem12 = new JMenuItem("SubItem 12");
        subMenu12.add( subItem12 );

        item1.addActionListener( this );
        subItem1.addActionListener( this );
        subItem12.addActionListener( this );
    }

    public void actionPerformed(ActionEvent e)
    {
        JMenuItem mi = (JMenuItem)e.getSource();
        mi.setText(mi.getText() + "0");
        JMenu menu = getMenuBarMenu(mi);

        JRootPane rootPane = SwingUtilities.getRootPane(menu);
        JFrame frame = (JFrame)SwingUtilities.windowForComponent(menu);
        System.out.println(frame);

    }

    public JMenu getMenuBarMenu(JMenuItem item)
    {
        JMenu menu = null;

        while (menu == null)
        {
            JPopupMenu popup = (JPopupMenu)item.getParent();
            item = (JMenuItem)popup.getInvoker();

            if (! (item.getParent() instanceof JPopupMenu) )
                menu = (JMenu)item;
        }

        return menu;
    }

    public static void main(String[] args)
    {
        JFrame frame = new MenuItemFrame();
        frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
        frame.setSize(200, 200);
        frame.setLocationRelativeTo( null );
        frame.setVisible(true);
    }
} 
```

# php - PHP在while循环中添加到数组

> ID：14754163
> 
> 赞同：0
> 
> 时间：2013-02-07T14:59:26.337
> 
> 标签：php, arrays

我在 while 循环中添加到数组时遇到了一些麻烦，想知道你们中的任何人是否可以帮助我。首先，一些背景。我正在遍历一些 sql 结果并尝试在按各种 id 分组的同时收集结果，以便以后更容易处理。它似乎只是一行代码不起作用。下面有一些代码

```
while($row=mysql_fetch_assoc($res)){
if(!array_key_exists($row['foreign_key_value'],$contacts)){
    $contacts[$row['foreign_key_value']]=array();
}
if(!array_key_exists($row['uid'],$contacts['foreign_key_value'])){
    $contacts[$row['foreign_key_value']][$row['uid']]=array();
}
$contacts[$row['foreign_key_value']][$row['uid']][$row['rating_id']]=$row['rating_value'];  

} 
```

这是我遇到问题的最后一行，我在其中添加 rating_id 和 rating_value。我循环的数据是 4 个字段——foreign_key_value、uid、rating_id 和 rating_value。我想要结束的结构看起来像

```
array(1) {
  [73]=>
  array(2) {
    [9]=>
    array(1) {
      [4]=>
      string(1) "3"
    }
  [1762]=>
    array(1) {
      [1]=>
      string(1) "5"
    }
  } 
```

我只是无法让 rating_id 和 rating_value 在最后一个数组中创建多个键值对，我期待 5 对。我得到的唯一东西是选择的最后一对。我真的不知道为什么我没有得到我需要的数据，有人可以帮忙吗？

abc667 - 你在现场。非常感谢。我一直盯着它看太久了，我错过了，现在我开始觉得自己像个白痴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:02:18.040

您需要在 while() 循环之前声明 $contacts 数组 - 这样您就可以在之后使用它

```
$contacts = array();
while($row=mysql_fetch_assoc($res)){
if(!array_key_exists($row['foreign_key_value'],$contacts)){
    $contacts[$row['foreign_key_value']]=array();
}
if(!array_key_exists($row['uid'],$contacts['foreign_key_value'])){
    $contacts[$row['foreign_key_value']][$row['uid']]=array();
}
$contacts[$row['foreign_key_value']][$row['uid']][$row['rating_id']]=$row['rating_value'];  

} 
```

# mule - Mule 3.2 按特定顺序进行流初始化

> ID：14754164
> 
> 赞同：0
> 
> 时间：2013-02-07T14:59:29.130
> 
> 标签：mule, flow, mule-studio

我有两个流动的骡子。我想让其中一个启动，只有在另一个已经启动并运行了一段时间之后。我怎样才能做到这一点？谢谢

```
<flow name="newHttpClientRequestProcessor" doc:name="newHttpClientRequestProcessor"> 
```

```
 <flow name="RestNewHttpClientRequestFlow" doc:name="RestNewHttpClientRequestFlow">
    <http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8082" path="subscription" doc:name="HTTP"/>
    <jersey:resources doc:name="REST">
        <component class="com.citi.isg.rest.endpoints.RestNewHttpClientEndpoint"/>
    </jersey:resources>
</flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:37:29.097

这与我最近回答的问题类似：[https ://stackoverflow.com/a/14633484/387927](https://stackoverflow.com/a/14633484/387927)

*   配置最初不得启动的流程`initialState="stopped"`
*   每当您要启动它时，请使用以下 MEL 表达式：`app.registry.FLOWNAME.start();`，替换`FLOWNAME`为您要启动的流程的名称。

# android - 片段和子片段的线性布局没有拉伸到整个父大小

> ID：14754166
> 
> 赞同：0
> 
> 时间：2013-02-07T14:59:29.920
> 
> 标签：android, android-layout, android-fragments

我遇到了一个问题，即我在 LinearLayout 中的 Fragment 视图没有拉伸到父级的高度和宽度。但它有点复杂，因为我在那个 Fragment 中有两个 Fragment。

这是活动的视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center|fill"
    android:orientation="vertical"
    android:padding="8dp" >

</LinearLayout> 
```

这是父片段 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:background="#FF00FF"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/mtg_player1_fragment_wrapper"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#0000FF"
        android:orientation="horizontal" >

    </LinearLayout>

    <LinearLayout
        android:id="@+id/mtg_player2_fragment_wrapper"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#FF0000"
        android:orientation="horizontal" >

    </LinearLayout>

</LinearLayout> 
```

以及子（播放器）片段 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mtg_player_life_wrapper"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/mtg_player_life_count"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#00FF00"
        android:gravity="center_vertical|center_horizontal"
        android:text="0"
        android:textSize="140sp" />

</LinearLayout> 
```

我正在添加这样的父片段（通过单击列表项）：

```
getSupportFragmentManager().beginTransaction().replace(R.id.main_content, fragment, newFragmentClass.getSimpleName()).setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN).commit(); 
```

和孩子这样的片段（在父母的`onViewCreated()`）：

```
mPlayer1Frag = (PlayerFragment) getSherlockActivity().getSupportFragmentManager().findFragmentById(R.id.player1_fragment_wrapper);
if (mPlayer1Frag == null) {
  mPlayer1Frag = new PlayerFragment();
}
if (!mPlayer1Frag.isVisible()) {
  ((RoboSherlockFragmentActivity)getSherlockActivity()).getSupportFragmentManager().beginTransaction().replace(R.id.player1_fragment_wrapper, mPlayer1Frag).commit();
}

mPlayer2Frag = (PlayerFragment) getSherlockActivity().getSupportFragmentManager().findFragmentById(R.id.player2_fragment_wrapper);
if (mPlayer2Frag == null) {
  mPlayer2Frag = new PlayerFragment();
}
if (!mPlayer2Frag.isVisible()) {
  ((RoboSherlockFragmentActivity)getSherlockActivity()).getSupportFragmentManager().beginTransaction().replace(R.id.player2_fragment_wrapper, mPlayer2Frag).commit();
} 
```

我得到的是以下内容：

![当前（有问题的）用户界面](../Images/a0ffe145fd9fd8831d8a9fae42a8274c.png)

基本上发生的事情是：

*   父 Fragment 视图没有垂直拉伸以填充整个活动的视图（没有出现粉红色）；
*   TextView（绿色）没有拉伸以覆盖子片段布局（红色/蓝色）；

我想要发生的是让父 UI 在整个活动中伸展，让孩子覆盖整个父母，让 TextViews 覆盖整个孩子。我可以将其更改为使用单个片段（并且可能会这样做），但如果我可以保持这种方式，我更愿意，因为它感觉更有条理:)

所以，问题是，我做错了什么？这不能使用另一个片段中的两个片段来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:16:45.303

在总是使用该`onCreateView()`方法`Fragment`的容器参数膨胀布局文件的方法中，如下所示：

```
inflater.inflate(R.layout.parent_view, container, false); 
```

这样，膨胀的视图将被正确地赋予`LayoutParams`，并且它将按照设计的方式运行。

# cassandra - Hector Mutator 执行实时差

> ID：14754169
> 
> 赞同：2
> 
> 时间：2013-02-07T14:59:31.180
> 
> 标签：cassandra, hector

我们使用 Hector API 在 Cassandra 上进行处理。但是，执行时间有些奇怪。

```
long methodCallElapsed1 = System.nanoTime();
MutationResult mr = mutator.execute();
long methodCallElapsed2 = System.nanoTime();
long methodCallElapsed3 = mr.getExecutionTimeMicro(); 
```

我们希望找到 methodCallElapsed2 - methodCallElapsed1 稍微接近 methodCallElapsed3 之间的区别，但是 methodCallElapsed2 - methodCallElapsed1 = 33 ms 和 methodCallElapsed3 = 1,8 ms？

谁能解释其中的区别？

# jquery - 图像选择框而不是文本选择？

> ID：14754174
> 
> 赞同：3
> 
> 时间：2013-02-07T14:59:46.197
> 
> 标签：jquery, wordpress, select, dropdownbox

我为 wordpress 创建主题，我需要有选择框，我可以在其中单击并显示要选择的图像。

目前对于该功能，我选择了带有文本的下拉列表。

```
<select id='selectbox'>
    <option >Airplane</option>
    <option >Bowling</option>
    <option >Alarm</option>
</select> 
```

但我需要某种带有图像且没有文字的选择列表。有可能做这样的事情吗？我假设它会将 jquery 包含在工作中。但我无法在网上找到任何答案。

好吧，我花了一整天的时间让它工作，但我想我太愚蠢了。在每个可能的示例和解决方案中，我在使其工作时遇到了一些问题。

这是我使用[http://pastebin.com/1kvYz8Mg](http://pastebin.com/1kvYz8Mg)的元框的完整代码，它用于 wordpress 主题，其他一切都按我的需要工作，唯一我无法得到的是，如果我可以将选择框替换为某种图像列表为字段选择正确的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:09:14.277

Try this:

**jQuery:**

```
$("#selectbox").change(function(){
    var selectedIndex = $("#selectbox")[0].selectedIndex;

    $('ul#images li').each(function(index) {
        if ( index === selectedIndex ) { $(this).show(); }
        else { $(this).hide(); }
    });
}); 
```

**html:**

```
<select id="selectbox">
    <option >Airplane</option>
    <option >Bowling</option>
    <option >Alarm</option>
</select>

<ul id="images">
    <li><img src="sample1.jpg" /></li>
    <li><img src="sample2.jpg" /></li>
    <li><img src="sample3.jpg" /></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:17:29.073

为此，您需要将相应的图像放在各自单独的“div”块中，其中每个 div 设置为 display:none。

例如

```
 <div id="0" style="display:block"><img src="your Airplane image path" /></div>
 <div id="1" style="display:none"><img src="your Bowling image path" /></div>
 <div id="2" style="display:none"><img src="your Alarm image path" /></div> 
```

然后，您需要在您的选择中添加一个 onchange 事件处理程序，以使图像显示为一个块。例如

```
 <script>
  function changeSelectBox() {
      $("#0,#1,#2").hide();

      $('#' + document.getElementById('selectbox').selectedIndex).show();
 }
 </script>

 <select id='selectbox' onchange="return changeSelectBox();">
     <option selected>Airplane</option>
     <option >Bowling</option>
     <option >Alarm</option>
 </select> 
```

然后，将 jquery 添加到您的 . 现在您可以更改选择下拉菜单，并且显示的图像也会更改。

注意：没有尝试就写了这个，可能在某处有分号错误，谁知道呢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T12:07:28.723

此示例使用 PHP，它从数据库中提取值 0 到 3 并设置图像不透明度和选择框值，如下所示：

javascript

```
<script type="text/javascript">
function ChangeLights(selector){
        if (selector == 0){
            document.getElementById("Light0").style.opacity = "1";
            document.getElementById("Light1").style.opacity = "0.2";
            document.getElementById("Light2").style.opacity = "0.2";
            document.getElementById("Light3").style.opacity = "0.2";
            document.getElementById(\'Run_Status\').selectedIndex = 0;
        }
        if (selector == 1){
            document.getElementById("Light0").style.opacity = "0.2";
            document.getElementById("Light1").style.opacity = "1";
            document.getElementById("Light2").style.opacity = "0.2";
            document.getElementById("Light3").style.opacity = "0.2";
            document.getElementById(\'Run_Status\').selectedIndex = 1;
        }
        if (selector == 2){
            document.getElementById("Light0").style.opacity = "0.2";
            document.getElementById("Light1").style.opacity = "0.2";
            document.getElementById("Light2").style.opacity = "1";
            document.getElementById("Light3").style.opacity = "0.2";
            document.getElementById(\'Run_Status\').selectedIndex = 2;
        }
        if (selector == 3){
            document.getElementById("Light0").style.opacity = "0.2";
            document.getElementById("Light1").style.opacity = "0.2";
            document.getElementById("Light2").style.opacity = "0.2";
            document.getElementById("Light3").style.opacity = "1";
            document.getElementById(\'Run_Status\').selectedIndex = 3;
        }
}
</script> 
```

php

```
$Run_Number['Run_Status'] = 0;//test value
echo '    
<select name="Run_Status" id="Run_Status">
    <option value="0" '.($Run_Number['Run_Status'] == "0" ? "selected":"").'>Not Ready</option>
    <option value="1" '.($Run_Number['Run_Status'] == "1" ? "selected":"").'>Ready</option>
    <option value="2" '.($Run_Number['Run_Status'] == "2" ? "selected":"").'>In Transit</option>
    <option value="3" '.($Run_Number['Run_Status'] == "3" ? "selected":"").'>Delivered</option>
    </select>

    <img id="Light0" class="light" src="images/light-red.jpg" height="40" style="image-orientation: 90deg; opacity: '.($Run_Number['Run_Status'] == 0 ? '1':'.2').';" title="Not Ready" onclick="ChangeLights(\'0\')">
    <img id="Light1" class="light" src="images/light-rey.jpg" height="40" style="image-orientation: 90deg; opacity: '.($Run_Number['Run_Status'] == 1 ? '1':'.2').';" title="Ready" onclick="ChangeLights(\'1\')">
    <img id="Light2" class="light" src="images/light-yel.jpg" height="40" style="image-orientation: 90deg; opacity: '.($Run_Number['Run_Status'] == 2 ? '1':'.2').';" title="In Transit" onclick="ChangeLights(\'2\')">
    <img id="Light3" class="light" src="images/light-gre.jpg" height="40" style="image-orientation: 90deg; opacity: '.($Run_Number['Run_Status'] == 3 ? '1':'.2').';" title="Delivered" onclick="ChangeLights(\'3\')">
'; 
```

我肯定会有更好的方法来做到这一点，但它确实有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:35:35.207

我可能会使用 RADIO 按钮列表，并将 LABEL 标签内的图像附加到每个 RADIO INPUT。

这是一个简单的 jsfiddle 来演示。 [http://jsfiddle.net/TnFma/](http://jsfiddle.net/TnFma/)

```
function createImageSelectList(id, name, arrOptions) {
    var $elm = $("#" + id);
    for(var x = 0; x<arrOptions.length; x++) {
        var opt = arrOptions[x];
        var subId = name + "_" + opt.value;
        var $rad = $("<input />");
        $rad.attr("type", "radio");
        $rad.attr("value", opt.value);
        $rad.attr("name", name);
        $rad.attr("id", subId);
        var $lbl = $("<label />");
        $lbl.attr("for", subId);
        $lbl.append($("<img />")
            .attr("src", $("#" + opt.image).attr("src")));
        $elm.append($lbl);
        $elm.append($rad);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T18:28:50.550

[这是一个几乎纯 CSS 的尝试。](http://jsfiddle.net/yL5gg/)

它使用无线电存储选定的值 ( `$_POST['thing']`)，这些值包含在关联的标签中。不过，控制点击时图像的可见性有点棘手。使用链接，`:target`您可以在单击“选择”时显示所有图像，但是在进行选择时您仍然需要一种隐藏其他图像的方法。这就是为什么我必须`onclick`在标签上添加属性来删除`#select`哈希。如果有人知道用 CSS 隐藏它的方法，我很想听听 :)

* * *

使用 jQuery 这很容易实现。假设你有 DIV 里面有图像和一个隐藏的输入字段：

```
$('.select').each(function(){
  var input = $('input', this),
      images = $('img', this),
      selecting = false;

  images.hide().click(function(){             

    // if the select box is open and a image was cliked
    if(selecting){
      input.val($(this).index() + 1);
      images.not(this).hide();

    // if select box is closed and the active image was clicked
    }else{     
      images.show();             
    }

    selecting = !selecting;

  }).eq(input.val() - 1).show();    

}); 
```

输入字段 ( `thing`) 将存储图像的索引...

（[小提琴](http://jsfiddle.net/cZL5B/)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T23:29:32.210

我想你正在寻找这样的东西：[Javascript image dropdown 2.0](http://www.marghoobsuleman.com/mywork/jcomponents/jquery-image-dropdown/index.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-31T06:40:31.997

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://thdoan.github.io/bootstrap-select/css/bootstrap-select.css">
<style>
body { margin:2em; }
pre { margin:1em 0; }
select.selectpicker { display:none; /* Prevent FOUC */}
</style>

<form>
<h2>Select with Thumbnails</h2>
  <select title="Select your surfboard" class="selectpicker">
    <option>Select...</option>
  <option data-thumbnail="https://avatars2.githubusercontent.com/u/7187348?v=3&s=40">Chrome</option>
  <option data-thumbnail="images/icon-firefox.png">Firefox</option>
  <option data-thumbnail="<?php echo base_url(); ?>assets/favicon.ico">IE</option>
  <option data-thumbnail="images/icon-opera.png">Opera</option>
  <option data-thumbnail="images/icon-safari.png">Safari</option>
  <option data-thumbnail="images/icon-chrome.png">Chrome</option>
    <option data-thumbnail="images/icon-firefox.png">Firefox</option>
    <option data-thumbnail="images/icon-ie.png">IE</option>
    <option data-thumbnail="images/icon-opera.png">Opera</option>
    <option data-thumbnail="images/icon-safari.png">Safari</option>
  </select>
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://thdoan.github.io/bootstrap-select/js/bootstrap-select.js"></script> 
```

# ruby-on-rails - 使用 MySQL 数据库、Formtastic 和 Active Admin 的级联下拉菜单

> ID：14754177
> 
> 赞同：0
> 
> 时间：2013-02-07T14:59:56.370
> 
> 标签：ruby-on-rails, formtastic

我设法创建了一个从服务模型填充的下拉列表。服务模型由 MySQL 表管理。我使用了这段代码：

```
f.input :service, :as => :select #<-- :as not really needed, I know... 
```

我想在服务选择下方有另一个选择框，该框根据用户从服务选择中选择的内容填充团队模型（MySQL 数据库中的团队表）中的团队。

例如，如果从服务选择中选择服务 1，则团队选择将填充数据库中的团队表中具有 service_id = 1 的外键的团队（团队 1、团队 2）。如果有人可以帮助如何插入正确的关联和 Formtastic 代码来实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:12:50.480

如果您希望根据在另一个选择框中所做的选择来更改一个选择的内容（减少选项的数量），这主要是一个客户端编程问题——Formtastic 一旦发送到浏览器就无法修改 DOM。

您需要一个 JS 来观察服务选择中的变化，另一个来根据该选择以某种方式修改团队选择。为此，您在这里有很多选择，但这实际上不是 Formtastic 问题，除了可能如何呈现正确的标记以使您的 JS 工作。

在过去，我在不同的时间做了所有这些：

1.  为每个可能的服务选择呈现一个单独的团队选择框，然后根据 JS 的需要在 DOM 中显示/隐藏正确的选择框

2.  在 Team select 中的每个选项上呈现数据属性，注意它支持哪个服务，以便 JS 可以根据所选服务删除或禁用选项

我更喜欢#2，但在 Formtastic 中#1 可能更容易。

# ruby - Ruboto（Android 版 ruby ）的最佳教程？

> ID：14754178
> 
> 赞同：10
> 
> 时间：2013-02-07T14:59:58.093
> 
> 标签：ruby, ruboto

我几乎用完了 Ruby，但现在想试试 Ruboto，Android 上的 ruby​​。谷歌未能给我足够的（几乎没有结果）。所以任何人都可以分享一些关于 Ruboto 的教程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T15:55:55.967

从外观上看，Ruboto 自己的文档仍在开发中！Ruboto 的 GitHub Wiki 提供了一些教程和示例，但它们并不完整。但是，这可能足以让您入门。请务必阅读自述文件（也可以在他们的 GitHub Wiki 上找到）：

[https://github.com/ruboto/ruboto/blob/master/README.md](https://github.com/ruboto/ruboto/blob/master/README.md)

这应该让你设置完成他们自己的教程：

[https://github.com/ruboto/ruboto/wiki/Tutorials-and-examples](https://github.com/ruboto/ruboto/wiki/Tutorials-and-examples)

正如 Ivaylo Strandjev 已经说过的，使用 Ruboto 制作应用程序真正需要学习的是足够的 Ruby 知识。从那里开始，Ruboto 只是扩展了 Ruby 与 Android 通信的能力。了解它是如何做到的就是你所需要的！

不过你是对的！目前还没有很多教程，因为 Ruboto 仍然是一项非常早期的工作。但是，如果您对 Ruby 有很好的了解，那么这些教程和对 Ruboto 在 GitHub 上的文档的透彻阅读应该足以让您大吃一惊。

红宝石快乐！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:02:22.707

Ruboto 现在支持很多 ruby​​ 的功能，并且还有一些关于如何做“更花哨的东西”的例子。到目前为止，我用**ruby**​​ 编写的所有程序也都可以在 ruboto 上运行。所以我的建议是 - 找一个 ruby​​ 教程代替。

# c# - ASP MVC 4 EntityValidationErrors

> ID：14754184
> 
> 赞同：0
> 
> 时间：2013-02-07T15:00:07.437
> 
> 标签：c#, asp.net-mvc

我有一个从数据库构建的对象“产品”。它有 3 个属性： - Id 不能为 NULL - Ref 不能为 NULL - 指定可以为 NULL

所以我使用 AjaxForm 和 @Html.EditorFor(model => model.Designation) 来更新“Designation”字段我的问题是当我的控制器收到“product”对象时，Product 的 Id 很好地填充了原始值，但是产品的 Ref 为空

我考虑了 2 个解决方案：在我的 AjaxForm 中添加一个不可编辑的 Ref 字段，或者最糟糕的是：在我的控制器中使用 Id 研究我的产品的 ref（非常糟糕：s）

你能告诉我如何做这个干净吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:04:58.987

您可能必须添加 Ref 字段，以便页面在返回到控制器时知道该字段的映射，但您可以使用[HiddenFor](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.hiddenfor%28v=vs.108%29.aspx)将其隐藏：

`@Html.HiddenFor(model => model.Ref)`

# android - 电晕Facebook登录

> ID：14754185
> 
> 赞同：0
> 
> 时间：2013-02-07T15:00:10.477
> 
> 标签：android, facebook-graph-api, coronasdk

我已经`Facebook Single Sign On`在我的应用程序中实现了。然后我发现如果用户已经在他们的手机上安装了 fb 应用程序，它就不起作用。我通过为 facebook 生成一个密钥哈希解决了这个问题，一切都恢复了。从那以后，我将我的 Corona 帐户从试用版升级到了专业版。现在我的脸书不再工作了。构建apk文件时我仍在使用`Android Debug key`，我已经尝试了我拥有的原始文件`Hash Key`并制作了另一个文件，但我无法让它工作。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:19:31.287

嗨，我们有同样的。步骤：使用电晕制作一个教程 facebook 登录示例。试试看，这将适用于已安装的 facebook 应用程序。在实施 facebook 登录到您的应用程序后，如示例所示。

这就是我们的决议。

但我不能说什么确切的，我从另一个开发者那里得到了那个应用程序来进行一些更新/错误修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:09:03.277

由于某种我不知道的原因，我的 Facebook Hash Key 发生了变化。在设备上使用我的应用程序时，我运行了“adb logcat”。在 logcat 中，Facebook 会告诉您预期的 Hash Key。将其复制/粘贴到您的 Facebook 开发者页面中即可。

# android - 导出签名的应用程序挂起

> ID：14754188
> 
> 赞同：1
> 
> 时间：2013-02-07T15:00:17.577
> 
> 标签：android, export, apk, adt

我在导出已签名的应用程序时遇到问题。我已经对我的应用程序进行了一些更新，所以我像以前一样导出应用程序。

```
Right click on project -> Android tools -> Export signed application. 
```

当我到达最后一步（查看下面链接上的图片）时，我按完成。显示加载光标，但未导出应用程序。我也尝试过使用新的密钥库。我已经禁用了自动构建。可能是什么原因？

![http://i.stack.imgur.com/P2gYE.png](../Images/53ee93eb5b5430393e5c8f9b4bbc09a3.png)

# objective-c - 使用 UISlider 中的值来更改另一个变量？

> ID：14754190
> 
> 赞同：0
> 
> 时间：2013-02-07T15:00:26.840
> 
> 标签：objective-c, xcode, mkmapview, uislider

所以我还在学习这个Objective C lark，我遇到了困难。我想要做的就是使用 Sliderchanged 中的值来填充'CGFloat lineWidth ='，希望最终结果是改变 crumbPath 线的宽度......

****** *** ** *** ** *** ** *** ** *** ******编辑****** ** *** ** *** ** *** ** *** ** *** ** *** ******

 **CrumbPathView.h

```
#import "CrumbPathView.h"

#import "CrumbPath.h"

#import "FirstViewController.h"

@interface CrumbPathView (FileInternal)
- (CGPathRef)newPathForPoints:(MKMapPoint *)points
                  pointCount:(NSUInteger)pointCount
                    clipRect:(MKMapRect)mapRect
                   zoomScale:(MKZoomScale)zoomScale;

@end

@implementation CrumbPathView

-(IBAction)sliderChanged:(UISlider *)sender
{
NSLog(@"slider value = %f", sender.value);
 }

- (void)drawMapRect:(MKMapRect)mapRect
      zoomScale:(MKZoomScale)zoomScale
      inContext:(CGContextRef)context
{
CrumbPath *crumbs = (CrumbPath *)(self.overlay);

CGFloat lineWidth = 30;

// outset the map rect by the line width so that points just outside
// of the currently drawn rect are included in the generated path.
MKMapRect clipRect = MKMapRectInset(mapRect, -lineWidth, -lineWidth);

[crumbs lockForReading];
CGPathRef path = [self newPathForPoints:crumbs.points
                                pointCount:crumbs.pointCount
                                  clipRect:clipRect
                                 zoomScale:zoomScale];
[crumbs unlockForReading];

if (path != nil)
{
    CGContextAddPath(context, path);
    CGContextSetRGBStrokeColor(context, 0.0f, 0.0f, 1.0f, 0.5f);
    CGContextSetLineJoin(context, kCGLineJoinRound);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, lineWidth);
    CGContextStrokePath(context);
    CGPathRelease(path);
 }
}

@end

@implementation CrumbPathView (FileInternal)

static BOOL lineIntersectsRect(MKMapPoint p0, MKMapPoint p1, MKMapRect r)
{
double minX = MIN(p0.x, p1.x);
double minY = MIN(p0.y, p1.y);
double maxX = MAX(p0.x, p1.x);
double maxY = MAX(p0.y, p1.y);

MKMapRect r2 = MKMapRectMake(minX, minY, maxX - minX, maxY - minY);
return MKMapRectIntersectsRect(r, r2);
}

#define MIN_POINT_DELTA 5.0

- (CGPathRef)newPathForPoints:(MKMapPoint *)points
                  pointCount:(NSUInteger)pointCount
                    clipRect:(MKMapRect)mapRect
                   zoomScale:(MKZoomScale)zoomScale
{
// The fastest way to draw a path in an MKOverlayView is to simplify the
// geometry for the screen by eliding points that are too close together
// and to omit any line segments that do not intersect the clipping rect.  
// While it is possible to just add all the points and let CoreGraphics 
// handle clipping and flatness, it is much faster to do it yourself:
//
if (pointCount < 2)
    return NULL;

CGMutablePathRef path = NULL;

BOOL needsMove = YES;

#define POW2(a) ((a) * (a))

// Calculate the minimum distance between any two points by figuring out
// how many map points correspond to MIN_POINT_DELTA of screen points
// at the current zoomScale.
double minPointDelta = MIN_POINT_DELTA / zoomScale;
double c2 = POW2(minPointDelta);

MKMapPoint point, lastPoint = points[0];
NSUInteger i;
for (i = 1; i < pointCount - 1; i++)
{
    point = points[i];
    double a2b2 = POW2(point.x - lastPoint.x) + POW2(point.y - lastPoint.y);
    if (a2b2 >= c2) {
        if (lineIntersectsRect(point, lastPoint, mapRect))
        {
            if (!path) 
                path = CGPathCreateMutable();
            if (needsMove)
            {
                CGPoint lastCGPoint = [self pointForMapPoint:lastPoint];
                CGPathMoveToPoint(path, NULL, lastCGPoint.x, lastCGPoint.y);
            }
            CGPoint cgPoint = [self pointForMapPoint:point];
            CGPathAddLineToPoint(path, NULL, cgPoint.x, cgPoint.y);
        }
        else
        {
            // discontinuity, lift the pen
            needsMove = YES;
        }
        lastPoint = point;
    }
}

#undef POW2

// If the last line segment intersects the mapRect at all, add it unconditionally
point = points[pointCount - 1];
if (lineIntersectsRect(lastPoint, point, mapRect))
{
    if (!path)
        path = CGPathCreateMutable();
    if (needsMove)
    {
        CGPoint lastCGPoint = [self pointForMapPoint:lastPoint];
        CGPathMoveToPoint(path, NULL, lastCGPoint.x, lastCGPoint.y);
    }
    CGPoint cgPoint = [self pointForMapPoint:point];
    CGPathAddLineToPoint(path, NULL, cgPoint.x, cgPoint.y);
 }

return path;
}

@end 
```

CrumbPathView.h

```
#import <MapKit/MapKit.h>
#import <UIKit/UIKit.h>

@interface CrumbPathView : MKOverlayView
{
}

- (IBAction)sliderChanged:(id)sender;

@end 
```

我已经从 .h & .m 添加了其余的代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:07:49.877

我想你大部分都在那里。您的滑块可能存储在一个属性中......当您需要它的值时，只需像检查任何其他属性一样检查它。

例子：

```
-(IBAction)sliderChanged:(UISlider *)sender
{
    //[self drawMapRect...]
}

-(void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:CGContextRef)context
{
     CrumbPath *crumbs = (CrumbPath *)(self.overlay);
     CGFloat lineWidth = self.mySliderControl.value;
     //Do something with lineWidth
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T15:08:09.220

你试过这个吗？

```
-(IBAction)sliderChanged:(UISlider *)sender
{
NSLog(@"slider value = %f", sender.value);
CrumbPath *crumbs = (CrumbPath *)(self.overlay);
 CGFloat lineWidth = (UISlider*)sender.value;
//Set value on crumbpath using slider value

 }

- (void)drawMapRect:(MKMapRect)mapRect
      zoomScale:(MKZoomScale)zoomScale
      inContext:(CGContextRef)context
 {
 CrumbPath *crumbs = (CrumbPath *)(self.overlay);

} 
```**

# java - 在 Java 中写入隐藏文件

> ID：14754192
> 
> 赞同：0
> 
> 时间：2013-02-07T15:00:29.503
> 
> 标签：java, file, file-io, hidden

我在 Java 中的隐藏文件有问题。我想写入一个隐藏的 txt 文件，但它总是说“访问被拒绝”。我的建议是使文件可见，写入文件，然后再次隐藏。但是如何使隐藏文件可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:08:47.190

我之前说过：~~问题不在于文件被隐藏了。问题是您的程序没有文件的写访问权限。让它“不隐藏”不太可能有帮助。~~

似乎它比 Windows 更复杂。当然，在修改文件之前尝试“取消隐藏”文件是值得的。

无论如何，如果您使用的是 Java 7，则读取和写入 Windows 特定文件属性的方法是使用[`java.nio.file.Files`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)API，特别是[`getFileAttributeView(...)`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#getFileAttributeView%28java.nio.file.Path,%20java.lang.Class,%20java.nio.file.LinkOption...%29)方法。对于旧版本，您将需要使用外部实用程序（请参阅@Achintya Jha 的答案）或使用 JNI / JNA 包装器来调用 Windows 本机 API。

如果您使用的是 Linux，请将 Windows 特定更改为 POSIX 和/或 Linux 特定。（请注意，很多与文件属性和权限有关的东西本质上是特定于操作系统的。）

最后，如果问题是程序没有对文件的写访问权，那么很有可能*它*无法获得写访问权。

# php - 验证在运行时添加的元素

> ID：14754193
> 
> 赞同：0
> 
> 时间：2013-02-07T15:00:30.860
> 
> 标签：php, jquery, html, validation

我正在使用以下脚本将图像输入字段添加到我的网页。一切正常，但如果我想进行验证怎么办。如果任何字段为空，我不想提交表单。我尝试了代码 ie 函数`validate()`，但它只检查第一个输入字段，即 html 的输入字段。它不适用于在 Jquery 的帮助下在运行时添加的输入字段。

```
<script type="text/javascript">
    function validate () {
            var file = document.getElementById('file').value;
            if(file==""){
                alert("None of the Image Fields can be empty!!");
            return false;
            }
    }
    $(document).ready(function(){ 

      $('#addproduct').click(function(){                
        $(this).after('<br /><input type="file" name="image_name[]" class="addfile" id="file" /> <input type="text" name="image_caption[]" placeholder="Caption for this image " size="60" /> ');
      });       
    });

    </script> 
```

我想为图像字段添加删除功能。就像每个输入字段旁边的十字按钮一样，单击该按钮时会删除该字段。

```
<input type="file" name="image_name[]" id="file" required="true"> 
<input type="text" name="image_caption[]" placeholder="Caption for this image "  size="60">
<span id="addproduct"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:30:31.460

而不是`document.getElementById('file')`使用`document.getElementsByName('image_name[]')`或 jQuery 样式`$('[name="image_name[]"]')`。这是因为`id`标签的 必须是唯一的，否则只有第一个可以被 引用`id`。

对于删除功能，请使用以下内容：

```
$(document).ready(function(){ 

  $('#addproduct').click(function(){                
    $(this).after('<br /><div><input type="file" name="image_name[]" class="addfile" id="file" /> <input type="text" name="image_caption[]" placeholder="Caption for this image " size="60" /> <input type="button" value="Delete" onclick="deleteRow(this)" /> </div>');
  });       
});

var deleteRow = function(elem) {
    $(elem).parent().remove();
} 
```

# c# - BCL 不可变集合：相等是非对称的

> ID：14754194
> 
> 赞同：5
> 
> 时间：2013-02-07T15:00:36.247
> 
> 标签：c#, data-structures, immutability, base-class-library, immutable-collections

由于不可变数据结构是一等值，我们可以像与任何其他值一样比较它们的相等性或顺序。但是在 BCL 不可变集合预览中事情变得复杂了，因为每个不可变集合都可以通过`IEqualityComparer<T>`/`IComparer<T>`实例进行参数化。看起来应该不允许比较具有不同比较器的不可变集合（因为没有为比较器本身定义相等），因为它使相等关系不对称：

```
var xs = ImmutableList<string>.Empty.Add("AAA")
  .WithComparer(StringComparer.OrdinalIgnoreCase);

var ys = ImmutableList<string>.Empty.Add("aaa")
  .WithComparer(StringComparer.Ordinal);

Console.WriteLine(xs.Equals(ys)); // true
Console.WriteLine(ys.Equals(xs)); // false 
```

这种行为会以某种方式得到解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:31:15.597

平等是一件很难定义的事情，更难在聪明的工程师房间里就该定义达成共识。:) 实际上，我们将从不可变集合的和方法中*删除*值相等，以便这些方法提供与 BCL 和客户代码中的大多数其他类型相同的速度（并且几乎无用）。`Equals``GetHashCode`

我们非常希望在未来的版本中为不可变集合添加价值相等的方法。

# php - PHP Parse 错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE

> ID：14754199
> 
> 赞同：-2
> 
> 时间：2013-02-07T15:00:47.293
> 
> 标签：php, parsing, variables

一个人得到错误：

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE 
```

从以下代码：

```
$query = "SELECT story,video FROM `storycodes` WHERE `code` = '$code"'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:00:47.293

此错误代码是由于引号的顺序错误造成的。在这段代码中，当它应该是 '$code' 时它会显示 '$code"'"

固定代码如下所示：

```
$query = "SELECT story,video FROM `storycodes` WHERE `code` = '$code'";
                                                                    ^^--here 
```

# bash - Bash：在 bash_profile 中重写 emacs 命令

> ID：14754206
> 
> 赞同：0
> 
> 时间：2013-02-07T15:01:04.413
> 
> 标签：bash, emacs, .bash-profile

我试图在我的 bash_profile 中编写一个命令来替换默认的 emacs 命令，如果文件存在，它将对文件进行 emacs，如果它不存在，则会将模板复制到新文件，然后 emacs。

我尝试的是：

```
function emacs()
{
if [ ! -f ${1} ]; then \
cp /FILEPATH/template.sh ${1}; fi;
builtin emacs ${1}
} 
```

但我得到的错误是“-bash:builtin:emacs:not a shell builtin”

如果 emacs 不是内置命令，如何创建一个新函数来替换 emacs 命令，然后在该函数中调用原始 emacs 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:17:48.023

你想要`command emacs`，没有`builtin emacs`。见`help command`。

顺便说一句，对新文件模板没有`emacs`某种内部支持吗？您可能想看看这个：[http](http://www.emacswiki.org/emacs/TemplatesMode) ://www.emacswiki.org/emacs/TemplatesMode 。（免责声明：我不使用`emacs`；这只是我在搜索“emacs 新文件模板”时发现的第一页之一。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:17:09.787

（编辑：对不起，`command emacs`在另一个答案更好，使用它。）

`builtin`仅适用于实际的 shell 内置函数，如`test`, `read`, ...

请改用 emacs 的显式路径：

```
function emacs()
{
if [ ! -f ${1} ]; then \
cp /FILEPATH/template.sh ${1}; fi;
/usr/bin/emacs ${1}
} 
```

# git - 合并具有不同行尾字符的文件

> ID：14754208
> 
> 赞同：2
> 
> 时间：2013-02-07T15:01:06.640
> 
> 标签：git, diff, git-merge, end-of-line

我在 Linux 上使用 GIT，而我的同事在 Windows 上使用 GIT。

我对文件进行了一些更改，而我的同事对该文件进行了一些其他更改。

我的同事推，我拉。

现在，我的整个文件是一个大冲突：

```
<<<<<<< HEAD
...
[my version]
....
=======
...
[colleague's version]
...
>>>>>>> branch 'master' of https://github.com/rothariel/aimnegochat.git 
```

我能做些什么？如何合并更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:44:23.017

从github中的这篇文章中，您可以克服这样的问题

建议的 eol 是 \n，您可以使用它来自动转换

```
git config --global core.autocrlf input
# Set this setting on OSX or Linux

git config --global core.autocrlf true
# Set this setting on Windows 
```

看看接下来要做什么的例子。

[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-31T08:37:22.097

我有一个类似的问题：

```
git merge <master|branch|whatever> -s recursive -Xignore-space-at-eol 
```

似乎做了我需要做的事情，但它给了我错误：

```
error: addinfo_cache failed for path ... 
```

然而：

```
git merge <master|branch|whatever> -s recursive -X renormalize 
```

似乎可以解决问题。

每次我签入文件时，我仍然遇到行尾问题。提交/合并过程中的某些东西正在将我的行尾切换回它们不应该的状态。

我试过弄乱

```
git config --global core.autocrlf <true|input|false> 
```

设置，但它似乎并没有解决这样一个事实，即某些东西正在改变我在 git 工具链中的行尾。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T15:04:41.640

您需要将同事所做的更改与您的更改合并。只需编辑文件和`add to index`. 之后您可以进行`commit`更改。

# php - PHP - 在 preg_match 函数中知道字符失败

> ID：14754213
> 
> 赞同：0
> 
> 时间：2013-02-07T15:01:22.490
> 
> 标签：php, preg-match

有一种方法可以知道哪些字符与 preg_match 函数不匹配？例如：

```
preg_match('/^[a-z]*$/i', 'Hello World!'); 
```

是否有一些函数可以知道不正确的字符，在这种情况下是空格和“！”？

* * *

感谢您的回复，但您的示例中的问题是您没有指明字符串的开头和结尾。您的示例适用于另一个字符串中包含的字符串，而不适用于与我在模式中定义的字符串完全相同的字符串。

例如，如果我必须验证一个主题的意大利财政代码，它由一个格式如下的字符串组成：

```
XXX XXX YY X YY X YYY X (X = letter, Y = number - without spaces) 
```

哪种模式是：

```
'/^[A-Z]{6}[0-9]{2}[A-Z]{1}[0-9]{2}[A-Z]{1}[0-9]{3}[A-Z]{1}$/i' 
```

我必须验证与我在模式中定义的完全匹配的字符串。

如果我使用您的代码并且错误了 1 个（仅 1 个）字符，则整个字符串将作为错误返回。 [http://eval.in/9178](http://eval.in/9178)

反转模式的问题出现在复杂的模式中，其中插入了 AND 或 OR。

我想知道的是为什么 preg_match 会失败，而不仅仅是失败与否。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:53:55.020

你有没有尝试过这样的事情？

```
$nonMatchingCharacters = preg_replace('/[a-z]/', '', $wholeString); 
```

这应该去掉“合法”字符，只留下您想在验证错误消息中提及的字符。

你也可以做其他的治疗，比如...

```
$nonMatchingCharactersArray = array_unique(explode('', $nonMatchingCharacters)); 
```

...如果你想要一个唯一的、不匹配的字符数组，而不仅仅是一个去掉了位的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:09:28.917

That will indicate you the space and !

```
preg_match_all('/[^a-z]/i', 'Hello World!', $matches);

var_dump($matches); 
```

[http://eval.in/9132](http://eval.in/9132)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:03:00.540

只需删除与 preg_replace 匹配的所有内容，然后将剩余的内容拆分为一个数组。

```
<?php

$str = preg_replace('/([0-9]{2}[a-z]*)/i', '', '03Hello 02World!');

$characters = str_split($str);

var_dump($characters); 
```

[http://eval.in/9152](http://eval.in/9152)

# python - Django：我想连接大约一对多

> ID：14754216
> 
> 赞同：0
> 
> 时间：2013-02-07T15:01:24.960
> 
> 标签：python, django, django-models, django-1.4

Django：我想连接大约一对多...

![在此处输入图像描述](../Images/a004a58427a45545bbc934a4e5486c0b.png)

我该怎么办？

```
from django.db import models

class Note(models.Model)
    content = models.CharField(max_length=20)

class A(models.Model)
    name = models.CharField(max_length=20)
    addr = models.CharField(max_length=20)
    notes = models.ManyToManyField(Note) # ...? I don't know...

class B(models.Model)
    nickname = models.CharField(max_length=20)
    mobile = models.CharField(max_length=20)
    notes = models.ManyToManyField(Note) # ...? I don't know... 
```

注型号：A 型号 = 1：N... 注型号：B 型号 = 1：N...

我想同时连接Note - A Note - B...

请回答我！

谢谢！

编辑 130208 8:36 KST----

也许 ForegienKey 可用...

但我的情况不能使用它。

因为如果我只想要连接（例如注意 A），我可以像下面的代码那样做。

```
from django.db import models

class Note(models.Model)
    content = models.CharField(max_length=20)
    conn = models.ForeignKey(A)

class A(models.Model)
    name = models.CharField(max_length=20)
    addr = models.CharField(max_length=20) 
```

但我的情况需要两个连接（注 - A，注 - B）。

所以....我不知道该怎么办...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:06:38.953

使用[models.ForeignKey](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ForeignKey)。

如果您想为 A 和 B 的每个实例提供几个注释，您可以尝试这样的操作：

```
from django.db import models

    class Note(models.Model):
        content = models.CharField(max_length=20)
        related_to = models.ForeignKey(A_or_B)

    class A_or_B(models.Model):
        pass

    class A(A_or_B):
        name = models.CharField(max_length=20)
        addr = models.CharField(max_length=20)

    class B(A_or_B):
        nickname = models.CharField(max_length=20)
        mobile = models.CharField(max_length=20) 
```

搜索属于特定 A 或 B 实例的注释将如下所示：

```
a = A(name="some_name", addr="somewhere")
a.save()
a_note = Note(content="blablabla", related_to=a.id)
a_note.save()
notes_related_to_a = Note.objects.filter(related_to=a.id)
links_from_notes_to_a = {note_x.related_to.a for note_x in notes_related_to_a}
if len(links_from_notes_to_a) and links_from_notes_to_a[0] == a:
    print "It works!" 
```

抽象父类的 `related_to`属性将有一个属性，其名称是实例的实际类的非大写名称（本例中为 a 或 b）。此属性包含您可以访问正确属性的实例`A`或从该实例。`B`

查看文档的[这一部分](https://docs.djangoproject.com/en/1.4/topics/db/models/#multi-table-inheritance)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:48:09.243

使用[外键](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_one/)

```
from django.db import models

class Note(models.Model)
    content = models.CharField(max_length=20)

class A(models.Model)
    name = models.CharField(max_length=20)
    addr = models.CharField(max_length=20)
    notes = models.ForeignKey(Note) # ...? I don't know...

class B(models.Model)
    nickname = models.CharField(max_length=20)
    mobile = models.CharField(max_length=20)
    notes = models.ForeignKey(Note) # ...? I don't know... 
```

# java - 如何在 jboss 4.2 和 jboss 6.1 中调用 EJB3

> ID：14754224
> 
> 赞同：0
> 
> 时间：2013-02-07T15:01:52.217
> 
> 标签：java, jboss, ejb

我们有两个 ejb3 应用程序，一个在 jboss 4.2 中，另一个在 jboss 6.1 中。

我想在tomcat中创建一个调用该应用程序方法的客户端。

有可能这样做吗？我必须使用什么罐子？来自 jboss 4.2 客户端或 jboss 6.1 的那些？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:24:35.157

是的，它可以做到这一点。对于要调用的任何 EJB，您都需要远程 EJB 客户端 jar。您不需要任何特定的 JBoss jar，只需要客户端 jar。当您查找 EJB 时，您可能需要在 InitialContext 上设置一些 CORBA 设置，例如每个 EJB 的 IIOP 地址和端口：

props.setProperty("org.omg.CORBA.ORBInitialHost", "JBOSS_ADDRESS"); props.setProperty("org.omg.CORBA.ORBInitialPort", "JBOSS_PORT");

# wordpress - 带有自定义查询的 WP-Paginate

> ID：14754225
> 
> 赞同：1
> 
> 时间：2013-02-07T15:01:54.937
> 
> 标签：wordpress

我正在使用自定义查询仅检索过去 30 天内发布的自定义帖子类型的帖子。

我安装了 wp-paginate 并使用它进行分页。该页面本身运行良好，但 wp-paginate 似乎为所有帖子显示了足够的页面，无论它们是否被返回，但自定义查询。

例如，有 35 个发布的帖子，但在过去 30 天内只有 12 个。WP-Paginate 应该只显示过去 30 天内所有 12 个帖子的 2 页，但它显示 4 页，第 3 页和第 4 页为空白。

我的查询代码是：

```
<?php 

$current_page = (get_query_var('paged')) ? get_query_var('paged') : 1;

function filter_where($where = '') {
    $where .= " AND post_date > '" . date('Y-m-d', strtotime('-30 days')) . "'";
    return $where;
}

$jobPosts = null;
add_filter('posts_where', 'filter_where');
$jobPosts = new WP_Query('post_type=job_boards&paged=' . $current_page);
remove_filter('posts_where', 'filter_where');

while ($jobPosts -> have_posts()) : $jobPosts -> the_post();

    // Display stuff

endwhile; wp_reset_postdata();

if (function_exists('wp_paginate')) wp_paginate();

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:07:10.343

我似乎已经解决了它，尽管它比我认为的要复杂得多。我将要显示的页数和当前页面传递给 wp_paginate 函数：

```
wp_paginate(array('pages' => $num_pages, 'page' => $current_page)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:07:49.917

在使用自定义查询时尝试下面

**对于 wp pagenavi 插件**

```
if (function_exists('wp_pagenavi')):

 wp_pagenavi( array( 'query' => $jobPosts ) );

endif; 
```

**对于 wp 分页插件**

```
if (function_exists('wp_paginate')):
   wp_paginate(false,$jobPosts);
endif; 
```

# sql - 需要在使用 sqlcmd 但机器没有安装 SQL Server 2008 的 linux 机器上运行 shell 脚本？

> ID：14754228
> 
> 赞同：1
> 
> 时间：2013-02-07T15:02:06.940
> 
> 标签：sql, sql-server, shell, sqlcmd

我们有一个场景，我们需要在 Linux 机器上运行一个 shell 脚本。此 shell 脚本在内部使用`sqlcmd`，但机器未安装 SQL Server 2008。

谁能帮助我需要哪些工具/脚本/命令，以便我可以安装/复制粘贴该客户端来运行此脚本？

提供此类客户端的链接会很有帮助，以便我可以下载并尝试一下。

Shell 脚本包含：

```
sqlcmd -S $Server -U $USER -P $PASSWORD  -i AggregateChannels.sql 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:05:46.390

一个简单的谷歌给了我[这个](http://msdn.microsoft.com/en-us/library/hh568447.aspx)：

> sqlcmd 实用程序在适用于 Linux 上的 SQL Server 的 Microsoft ODBC 驱动程序中可用。

有关安装信息，请参见[此处](http://msdn.microsoft.com/en-us/library/hh568451.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-07T11:49:54.390

您现在可以在 docker 中使用 Linux 版本的 sql 工具连接到您的 SQL 服务器。

请参阅：[https ://hub.docker.com/_/microsoft-mssql-tools](https://hub.docker.com/_/microsoft-mssql-tools)

# exception - 奇怪的 MIPS AdES 异常

> ID：14754231
> 
> 赞同：3
> 
> 时间：2013-02-07T15:02:15.473
> 
> 标签：exception, crash, mips, memory-address

我提供的信息非常有限，我知道，但这可能就足够了。

**系统规格：** MIPS 64 位处理器，8 个内核，每个内核运行 4 个虚拟 CPU。

**操作系统：**一些基于 2.6.32.9 内核的专有 Linux

**进程：**一个运行 7 个 posix 线程的简单用户级进程。这个特定的应用程序在核心 0 上运行，它与任何进程都没有任何 cpu 亲和性。

崩溃几乎不可能重现。没有具体的场景。我们知道，如果我们对应用程序执行一些次要活动，它可能每天崩溃一次。

崩溃的特定线程每 5 毫秒唤醒一次，从一个共享内存区域读取信息并更新另一个。而已。

没有太多的活动。这个过程不是很辛苦。

现在：当我打开核心并加载应用程序的无符号图像时，gdb 指向指令 100661e0。指令 100661e0 如下所示（使用未剥离图像的 objdump 视图查看）：

```
void class::foo(uint8_t factor)
{
    100661d8:   ffbf0018        sd      ra,24(sp)
    100661dc:   0080802d        move    s0,a0
    bar(factor, shared_memory_a->profiles[PROFILE_1]);
    100661e0:   0c019852        jal     10066148 <_ZN28class35barEhR30profile_t>
    100661e4:   64c673c8        daddiu  a2,a2,29640
    bar(factor, shared_memory_a->profiles[PROFILE_2]);
    100661e8:   de060010        ld      a2,16(s0) 
```

显示为异常行的行是

```
100661e0:   0c019852        jal     10066148 <_ZN28class35barEhR30profile_t> 
```

请注意，10066148 是有效指令。

Bad 寄存器包含以下地址，该地址已对齐，但就指令地址空间而言看起来无效：c0000003ddc5dd90

原因寄存器包含以下值：0000000000800014

我不明白为什么 Bad 寄存器会显示它的值，其中指令明确说明了有效指令。我有点担心分支延迟槽问题，但是当我使用简单的 C++ 运行用户态应用程序时，我不应该担心这些问题。

我会很感激任何想法。

# javascript - 如何在没有使用 imgAreaSelect 裁剪图像的情况下防止保存

> ID：14754236
> 
> 赞同：0
> 
> 时间：2013-02-07T15:02:27.933
> 
> 标签：javascript, jquery

我正在使用[imgAreaSelect](http://odyniec.net/projects/imgareaselect/)插件让用户裁剪图像。我想防止用户在没有裁剪图像的情况下点击保存按钮。如果图像已被裁剪，我正在寻找 javascript 中的解决方案，而不是检查服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:30:30.120

从 imgAreaSelect API 中的示例：

```
$('img#photo').imgAreaSelect({
    onSelectEnd: function (img, selection) {
        alert('width: ' + selection.width + '; height: ' + selection.height);
    }
}); 
```

只需检查是否`selection.width`和`selection.height`是`> 0`

# javascript - 使用 .innerHTML 动态添加 HTML（IE7 中的格式问题）

> ID：14754237
> 
> 赞同：0
> 
> 时间：2013-02-07T15:02:34.513
> 
> 标签：javascript, html, css, input, innerhtml

我有一个选择下拉列表，当更新时采用新变量并动态更新它正下方的 div。

这是我的选择输入：

```
<select name='region_name' onchange='showDistrict(this.value)'> 
```

这是我控制动态内容的javascript：

```
<script>
function showDistrict(str)
{
if (str=="")
  {
  document.getElementById("district_div").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("district_div").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getdistrict.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

页面 getdistrict.php?q= 执行另一个 MySQL 调用并将信息循环到 div "district_div" **我的问题是......该 div 区域在 IE 7 中没有正确拉伸。**所以我的动态数据覆盖了它下面的所有内容。

当我用 firebug 查看源代码时，我什至看不到来自 innerHTML 的新 html，所以我不确定这是一个 css 问题还是与 .innerHTML 有关的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:22:56.703

不为这个DIV设置任何`width`或，或者只设置，你也可以为这个DIV设置`height``min-width min-height``overflow:hidden`

# vb.net - 从正在运行的进程中提取文件名和路径

> ID：14754241
> 
> 赞同：5
> 
> 时间：2013-02-07T15:02:40.090
> 
> 标签：vb.net, process, path, filenames

我正在为客户编写屏幕捕获应用程序。捕获部分很好，但他想获取捕获的文件的名称和路径。

使用 system.diagnostics.process 我可以获得捕获的进程，并且可以获得 EXE 的完整路径，但不能获得打开的文件。

IE。记事本以“TextFile1.txt”作为其文档打开。我可以从进程中得到 MainWindowTitle，它是 'T​​extFile1.txt - Notepad' 但我需要的是更像 'c:\users....\TextFile1.txt'

有没有办法从流程中获取更多信息？

我确定有办法，但我想不通

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:16:56.890

您可以使用`ManagementObjectSearcher`获取进程的命令行参数，在这个记事本示例中，您可以解析出文件名。这是一个简单的控制台应用程序示例，它在记事本中写出所有打开文件的完整路径和文件名。

```
Imports System
Imports System.ComponentModel
Imports System.Management
Module Module1
    Sub Main()
        Dim cl() As String
        For Each p As Process In Process.GetProcessesByName("notepad")
            Try
                Using searcher As New ManagementObjectSearcher("SELECT CommandLine FROM Win32_Process WHERE ProcessId = " & p.Id)
                    For Each mgmtObj As ManagementObject In searcher.Get()
                        cl = mgmtObj.Item("CommandLine").ToString().Split("""")
                        Console.WriteLine(cl(cl.Length - 1))
                    Next
                End Using
            Catch ex As Win32Exception
                'handle error
            End Try
        Next
        System.Threading.Thread.Sleep(1000000)
    End Sub
End Module 
```

我必须添加对这个特定 dll 的引用：

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Managment.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T10:32:27.447

我认为这是最简单的方法

```
For Each prog As Process In Process.GetProcesses
    If prog.ProcessName = "notepad" Then
          ListBox1.Items.Add(prog.ProcessName)
     End If
Next 
```

# c# - 将文本框字符串值保存到数据库c#

> ID：14754243
> 
> 赞同：0
> 
> 时间：2013-02-07T15:02:45.623
> 
> 标签：c#, asp.net, asp.net-mvc-4

我有一个文本框，用户可以在其中输入他们想要的用户名并保存它。一旦他们保存它并且他们碰巧重新访问他们的个人资料页面，该文本框应该填充他们保存的最后一个用户名以显示并且用户仍然可以更改它并重新保存。我对此很陌生，不知道如何正确启动它。我正在使用 vs 2012 asp.net mvc 4 c#。到目前为止，这是我的代码：

```
 @model School.Models.StudentNameModel

    @using (Html.BeginForm("_StudentNamePartial", "Profile")) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()
<fieldset>
    <ol>
        <li>
            @Html.LabelFor(m => m.StudentName)
            @Html.DisplayFor(m => m.StudentName)
            @Html.TextBoxFor(m=>m.StudentName)
            <button type="button" value="save" />
        </li>
    </ol>

</fieldset> 
```

}

这是我的模型：

```
 public class StudentNameModel
{
    [Display(Name = "Student Name")]
    public string StudentName{ get; set; }
} 
```

我的控制器：

GET - 从数据库中获取学生姓名（如果存在）。

```
[HttpPost]
    public ActionResult _StudentNamePartial(int id)
    {
        id = WebSecurity.CurrentStudentId;
        var model = new StudentNameModel();
        using (var db = new StudentsDataContext())
        {
            var result = (from u in db.Students
                         where u.ID == id
                         select u.StudentName).FirstOrDefault();
            if(result != null)
                model.StudentName= result;
        }
        return View(model);
    } 
```

POST - 这是我想为学生保存新用户名的地方

```
[HttpPost]
    public ActionResult _StudentNamePartial(StudentNameModel model)
    {
        if (ModelState.IsValid)
        {
           using (var db = new StudentDataContext())
           {
               try
               {

               }
               catch (Exception)
               {

                   throw;
               }
           }
            return RedirectToAction("ProfileAccount");
        }
        return View(model);
    } 
```

我也遇到了麻烦，当我显示用户名时它没有点击我的`Action`方法，它总是报告对象引用为空。任何帮助都会很棒。感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:59:34.507

您似乎正在尝试将控制器操作的部分视图呈现为较大视图的一部分。在这种情况下，局部视图应该在`ProfileAccount`视图中呈现。

您可以像这样构造控制器和视图（粗略）：

**ProfileAccount 视图模型**：

```
public class ProfileAccountView 
{
    public StudentNameModel StudentName { get; set; }   
} 
```

**配置文件控制器**：

```
[HttpGet]
public ActionResult ProfileAccount(int id)
{
    // Get whatever info you need and store in a ViewModel
    var model = new ProfileAccountView();

    // Get the student info and store within ProfileAccountView
    // Do your database reads
    model.StudentName = new StudentNameModel { StudentName = result };

    return View(model);
}

[HttpPost]
public ActionResult ProfileAccount(ProfileAccountView profile)
{
    // Do whatever processing here
} 
```

**个人资料帐户视图**

```
@model School.Models.ProfileAccountView

@using (Html.BeginForm("ProfileAccount", "Profile")) 
{
    @Html.RenderPartial('_StudentNamePartial', Model.StudentName);
    <button type="button" value="save" />
} 
```

**_StudentNamePartial 部分视图**

```
@model School.Models.StudentNameModel

<fieldset>
    <ol>
        <li>
            @Html.LabelFor(m => m.StudentName)
            @Html.TextBoxFor(m=>m.StudentName)
        </li>
    </ol>
</fieldset> 
```

# mysql - INSERT INTO ON UPDATE 一切

> ID：14754245
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:02:47.940
> 
> 标签：mysql

我用这个sql语句...

```
INSERT INTO users(id, email, phone, name )
 VALUES ($id, $email, $phone, $name)
ON DUPLICATE KEY UPDATE email=VALUES(email), phone=VALUES(phone), name=VALUES(name) 
```

它工作正常，但是：有没有一种方法可以在没有每列的 column=VALUES(column) 的情况下更新每一列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:12:03.777

根据[参考手册](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)，明确列出每一列是唯一的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:10:29.597

If columns are using derived values (eg `foo=concat("one","two")`) then you don't use the VALUES function. Otherwise, yes. It just refers to what is passed in originally.

Read about it [here](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:10:47.250

不，我不这么认为。我们需要始终指定具有我们要更新的值的列名。像这样：

```
INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    {VALUES | VALUE} ({expr | DEFAULT},...),(...),...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ] 
```

# php - PHP 多条件 if 语句不返回任何内容

> ID：14754247
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:02:51.753
> 
> 标签：php

几周以来我一直试图弄清楚这一点，这是一个简单的语句，但它从不执行 if 语句。我将变量回显到屏幕上，所以我知道它们存在并且每个条件都为真，但回显“某事”永远不会执行。

```
 if ($db_a==$session_a && $db_b==$session_b && $dbfreq_b=="1")

        {
         echo "something";
        } 
```

我认为这只是括号，因为我最初有这个：

```
if (($db_a==$session_a) && ($db_b==$session_b) && ($dbfreq_b=="1")) 
```

我将存储在 MYSQL 数据库中的变量与会话变量进行比较。

如果我使用 Var_dump，则 db 变量为空，但它们会将预期的字符串值回显到屏幕上。

```
$db_a="username";
$session_a="username";
$db_b=="keyword string"; -mostly one word but could be multiple
$session_b=="keyword string";
$dbfreq_b="1"; - This is the frequency that the keyword appears in the MYSQL database 
```

使用 vardump $db_a 和 $db_b 是 NULL 但它们回显了我期望在浏览器中看到的内容。

希望这能解释更多？

感谢您非常及时的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:13:40.307

如果如您所说 $db_a = $session_a AND $db_b = $session_b AND $dbfreq_b = 1 那么条件返回 false 是不可能的。

请再次检查您的代码（所有 5 个变量）并确保满足所有条件。您可以将单个 IF 拆分为三个单独的条件，以便知道哪个条件返回 false。

```
if ($db_a == $session_a) {
    echo "first OK\n;"
} 
if ($db_b == $session_b) {
    echo "second OK\n";
}
if ($dbfreq_b == "1") {
    echo "third OK";
} 
```

您可以将变量的值添加到您的问题中吗？

# regex - 如何在 Find() 中排除文件

> ID：14754252
> 
> 赞同：1
> 
> 时间：2013-02-07T15:03:13.560
> 
> 标签：regex, perl

我正在使用 perl 在目录中查找一些 kml 文件。这些文件位于 /Data/######/。其中###### 是一个 6 位数字。所有的 kmls 都是相同的 6 位数字，无论它位于什么文件夹中... /Data/######/######_REP.kml

问题是我还有另一个文件夹 /Data/QC/######/ 也有相同的 kmls。我想从搜索中忽略该 QC 文件夹中的任何内容。

我的代码：

```
 sub repmatch{
    Push(@filelist,$File::Find::name) if ($File::Find::name =~ m\d{6}\/\d{6}_REP.kml$/)
    }

    find(\&repmatch,$dir) # $dir is my directory I passed in 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:09:49.160

在 repmatch 子例程中，添加（在推送之前）：

```
if ( $_ eq 'QC' ) {
    $File::Find::prune = 1;
    return;
} 
```

那应该解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:02:24.203

你至少可以通过两种方式做你想做的事。

## 按完整路径过滤

在每次调用回调时，标量都`$File::Find::name`包含完整路径。您想要的文件的直接父级必须是 6 位数字，并且文件必须是相同的数字加上后缀。

看起来像这样。

```
#! /usr/bin/env perl

use strict;
use warnings;

use File::Find;

my $dir = @ARGV ? shift : "/Data";

my @filelist;
sub repmatch {
  push @filelist, $File::Find::name
    if $File::Find::name =~ m!/(\d{6})/\1_REP.kml$!;
}

find \&repmatch, $dir;

print "$_\n" for @filelist; 
```

## 修剪要忽略的目录

在您的回调中设置`$File::Find::prune`会在搜索的其余部分中删除当前子树。

修剪使您的过滤器更简单。在您的回调的每次调用中，都`$_`包含文件的名称，并且可以根据数字后缀模式测试任何幸存到这一点的内容。如果要锁定对直接父级名称的约束，可以使用上一个程序中的测试。

```
#! /usr/bin/env perl

use strict;
use warnings;

use File::Find;

my $dir = @ARGV ? shift : "/Data";

my @filelist;
sub repmatch {
  $File::Find::prune = 1 if /^QC/ && -d;
  push @filelist, $File::Find::name
    if /^\d{6}_REP.kml$/;
}

find \&repmatch, $dir;

print "$_\n" for @filelist; 
```

## 样本输出

给定目录结构

```
$ ls -R 数据
数据：
123456 654321 质检

数据/123456：
123456_REP.kml

数据/654321：
654321_REP.kml

数据/质量控制：
123456_REP.kml 654321_REP.kml
```

运行上述任一程序都会产生以下输出。

```
$ ./find-kml 数据
数据/123456/123456_REP.kml
数据/654321/654321_REP.kml
```

# c++ - 如何在不污染其余代码的情况下包含 WinAPI？

> ID：14754253
> 
> 赞同：3
> 
> 时间：2013-02-07T15:03:18.693
> 
> 标签：c++, winapi

我正在开发一个 C++ 库，其中一部分是我需要的几个操作系统函数的抽象层。我开始使用 Windows API 实现它，但计划使用 #ifdef 等添加对其他平台的支持。

然而，开始成为一个问题的是，包括 Windows.h 会传播到我不需要它的整个其余代码，特别是，因为它是一个库，它也会污染其他人的代码它。我真的不介意 Windows API 是否使用命名空间或某种清晰的方式来区分其代码，而是它们 #define 了很多非常常见的词，例如 small、near、far（小写）和很多函数名也很一般。

所以我真的很希望我的代码中只有平台特定的部分可以访问这些，并且它不会包含在其他任何地方。我知道显而易见的解决方案是仅在 CPP 文件中包含 Windows.h，但这并不总是可行的，因为某些平台特定的数据类型或结构是类成员变量，例如：

```
class Window {

public:

    // ...

private:
    HWND handle;

}; 
```

那么有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T15:08:46.573

使用 pimpl 成语 ( [http://en.wikipedia.org/wiki/Opaque_pointer](http://en.wikipedia.org/wiki/Opaque_pointer) )。C++ 编程语言的局限性使得有必要使用这样的技巧来隐藏信息。

这样做的方法之一是与在 C 中的方法相同（由于以下原因，您根本没有这个问题）： 在头文件中前向声明一个结构并在其中定义其内容实施文件。

大多数人通过将示例的整个私有部分提取到它自己的结构中来做到这一点，其内容仅在实现文件中定义，并且仅将指向它的指针放在头文件中，作为私有部分的唯一成员班上。

此外，#define WIN32_LEAN_AND_MEAN 在#include 之前，以去除 windows.h 给你的内容。

# c# - 类型的二维数组之间的差异（除外） 和类型列表

> ID：14754257
> 
> 赞同：0
> 
> 时间：2013-02-07T15:03:23.293
> 
> 标签：c#

让我们有一个名为“ClassA”的类，并让我们有以下代码：

```
...
ClassA[,] all = new ClassA[8,8];
...
//Array "all" is filled with objects
...
List<ClassA> some = new List<ClassA>();
...
//List "some" is filled with some objects taken from all
...
List<ClassA> others = new List<ClassA>(); 
```

现在我想知道“all”和“some”之间的区别，例如：other = all - some

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:08:36.420

一般来说，您可以使用`Except`：

```
var others = all.Except(some); 
```

在您使用二维数组的特定情况下，您首先必须`all`使用以下方法带入正确的“形式” `Cast`：

```
var others = all.Cast<ClassA>().Except(some); 
```

# php - PHP MySQL 问题并插入 UTF-8

> ID：14754259
> 
> 赞同：2
> 
> 时间：2013-02-07T15:03:33.230
> 
> 标签：php, mysql, utf-8

我有 php & mysql 的问题，使用 utf-8 插入数据库。第一个文件：addsite：

```
<?php
include 'header.php';
if(isset($data)) {
foreach($_POST as $key => $value) {
$posts[$key] = filter($value);
}
if(isset($posts['type'])){
if($posts['url'] == "http://" || $posts['url'] == ""){
$error = "Add your page link!";
}else if($posts['title'] == ""){
$error = "Add your page title!";
}else if(!preg_match("/\bhttp\b/i", $posts['url'])){
$error = "URL must contain http://";
}else if(!preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i',       $posts['url'])){
$error = "Please do not use special characters in the url.<";
}else{
    include "plugins/" . $posts['type'] . "/addsite.php";
}
}
?>
<div class="contentbox">
<font size="2">
<li>Pick the type of exchange you are promoting from the dropdown menu.</li>
<li>Set the amount of coins you wish to give per user complete(CPC).</li>
<li>The higher the amount of coins the higher the Links position.</li>
</div>
<div class="contentbox">
<div class="head">Add Site</div>
<div class="contentinside">
    <?php if(isset($error)) { ?>
    <div class="error">ERROR: <?php echo $error; ?></div>
    <?php }
    if(isset($success)) { ?>
    <div class="success">SUCCESS: <?php echo $success; ?></div>
    <?php }
    if(isset($warning)) { ?>
    <div class="warning">WARNING: <?php echo $warning; ?></div>
    <?php } ?>

    <form class="contentform" method="post">
        Type<br/>
        <select name="type"><?php $select = hook_filter('add_site_select', ""); echo   $select; ?></select><br/><br/>
        Link<br/>
        <input name="url" type="text" value="<?php if(isset($posts["url"])) { echo $posts["url"]; } ?>"/><br/><br/>
        Title<br/>
        <input name="title" type="text" value="<?php if(isset($posts["title"])) { echo $posts["title"]; } ?>"/><br/><br/>
        Cost Per Click<br/>
        <?php if($data->premium > 0) { ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->premcpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php }else{ ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->cpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php } ?>
        <input style="width:40%;" type="Submit"/>
    </form>
</div>
 </div>
<?php
 }
else
 {
echo "Please login to view this page!";
 }
 include 'footer.php';
  ?> 
```

第二个文件，插件addsite.php

```
<?php
$num1 = mysql_query("SELECT * FROM `facebook` WHERE `url`='{$posts['url']}'");
$num = mysql_num_rows($num1);
if($num > 0){
$error = "Page already added!";
 }else if(!strstr($posts['url'], 'facebook.com')) {
$error = "Incorrect URL! You must include 'facebook.com'";
}else{
mysql_query($qry);
  mysql_query("INSERT INTO `facebook` (user, url, title, cpc) VALUES('{$data->id}', '{$posts['url']}', '{$posts['title']}', '{$posts['cpc']}') ");
$success = "Page added successfully!";
}
?> 
```

当我在表单中编写阿拉伯语并提交时，它以未知语言进入数据库，例如：

Oslash;£Ø³Ù

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:29:50.560

尝试以下操作：

1.  添加 UTF-8 元标记： `<meta http-equiv="Content-type" value="text/html; charset=UTF-8" />`
2.  添加 UTF-8 标头： `header('Content-Type: text/html; charset=utf-8');`以防标记因缺少正确标记而被忽略
3.  确保您的脚本以 UTF-8 编码（为此使用 Notepad++）
4.  `set names 'utf8'`插入前运行查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:24:01.520

有两件事可以帮助使这更容易。首先，请记住将您的数据库设为 UTF-8 格式。其次，确保将 UTF-8 内容类型与您的页面一起发送。

对于 MySQL，如果您已经创建了数据库，请执行以下操作：

```
ALTER DATABASE database_name CHARACTER SET utf8 DEFAULT CHARACTER SET utf8
    COLLATE utf8_general_ci DEFAULT COLLATE utf8_general_ci; 
```

对于表，以这种方式改变它：

```
ALTER TABLE table_name DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

然后，将正确的内容类型与您的文档一起发送。使用这个 HTML 标记：

```
<meta http-equiv="Content-type" value="text/html; charset=UTF-8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:12:20.220

我对希腊字符也有类似的问题。也许他们在数据库中看起来不熟悉，但他们是正确的。

尝试读回 PHP 中的值并进行回显。它将显示它是否正确存储。

# c++ - 在运行时生成机器指令的 Hello World 代码？

> ID：14754266
> 
> 赞同：1
> 
> 时间：2013-02-07T15:04:00.937
> 
> 标签：c++, c, assembly

我坐在 Intel MacOSX 10.6 上并在引擎盖下使用 GCC 4.2.1。我试图做的是分配一个缓冲区，用机器指令填充它，然后运行它。全部在一个程序中。

例如，

```
typedef unsigned char byte_t;

int main(int argc, char** argv) {
    byte_t* code = new byte_t[3];
    code[0] = 0x90; // NOP
    code[1] = 0xC9; // LEAVE - tried also without this.
    code[2] = 0xCB; // RET far - tried also 0xC3, the near return.
    ((void (*)(void)) code)();
    return 0;
} 
```

失败并显示消息*Bus error*。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:06:21.810

对于代码执行，内存不被认为是“安全的”，因此操作系统会阻止它。

查看 using[`mmap()`](http://linux.die.net/man/2/mmap)分配内存，并使用`PROT_EXEC`请求使内存可执行。

# c# - 强制转换后 C# 访问类成员

> ID：14754270
> 
> 赞同：3
> 
> 时间：2013-02-07T15:04:12.343
> 
> 标签：c#, class, xaml, casting, members

我一直在使用 C# 和 XAML，想知道在转换类成员之后是否有更好的方法来访问它们。这是我通常最终不得不做的一个例子：

```
private void MyButton_Clicked(object sender,  RoutedEventtArgs e)
{
    ((PlaneProjection)((Button)sender).Projection).RotationX = 20;
} 
```

每次单击它都会旋转按钮，但是对于更复杂的操作，我需要越来越多的括号。我知道我可以使用 as which 使它更容易阅读，但这仍然可以：

```
((sender as Button).Projection as PlaneProjection).RotationX = 20; 
```

这仍然比我想要的更多的括号。

我是在做这件事还是错过了什么？或者这就是它的方式，我将不得不处理这样的代码更难阅读的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:08:38.190

```
var button = sender as Button;

if (button == null)
    return;

var projection = button.Projection as PlaneProjection;

if (projection == null)
    return;

projection.RotationX = 20; 
```

是一种更安全的方法，因为您要确保您的演员表不会抛出 NullReferenceException。

但是，我必须提到，我宁愿创建一个 ViewModel 来保存按钮可以绑定到的`Double X {get;set;}`和 a ，而不是在后面的代码中操作 UI 元素。`Command`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:15:24.717

(A) 严格来说，不，没有办法。**进行强制转换**后，您将得到一个不同类型的临时值 - 并且在强制转换之后几乎没有留下任何语法分支，无论是普通强制转换还是 AS 运算符。您必须将其括起来并立即使用它，或者必须将其存储在变量中。

(B) 松散地说，有一种方法：根本不做演员表。但请注意，它将：

*   需要更新的 .Net 平台
*   不太安全（编译时名称检查关闭）
*   更不安全（运行时类型检查已关闭，如果找到属性名称，则使用它，无论您在变量中具有什么确切的对象类型）
*   性能稍差（简单地说，动态操作比编译操作慢）

好吧，正如我所说的动态，它使用 CLR4.0 动态表达式：

```
private void MyButton_Clicked(object sender,  RoutedEventtArgs e)
{
    dynamic tmp = sender;
    tmp.Projection.RotationX = 20;
} 
```

但是，我**真的**不建议这样做只是为了跳过一些括号。这个表达式中有零类型检查。它是 100% 的鸭子打字。对于一个按钮来说，没关系，因为按钮的 API 真的不太可能改变。但是对于您自己的经常会发生变异的代码，请小心 - 或包含适当的单元测试以确保属性存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:07:56.407

如果您不喜欢括号，则可以创建变量。

```
var button = (Button)sender; // or 'sender as Button'
var planeProjection = (PlaneProjection)button.Projection; // or 'button.Projection as PlaneProjection' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:22:45.160

我看不出有任何方法可以得到括号和演员表。

你不能把它分开吗

```
var planeProjection = (PlaneProjection)((Button)sender).Projection; 
```

进而

```
planeProjection.RotationX = 20;
planeProjection.RotationY = 20;
planeProjection.RotationZ = 20; 
```

# android - Google Drive Android GooglePlayServicesAvailabilityException

> ID：14754271
> 
> 赞同：0
> 
> 时间：2013-02-07T15:04:14.417
> 
> 标签：android, google-drive-api, google-play-services

当抛出异常**GooglePlayServicesAvailabilityException**我使用

```
GooglePlayServicesUtil.getErrorDialog(exception.getConnectionStatusCode()) 
```

生成并显示对话框。生成的对话框显示：

标题->“更新 Google Play 服务”除非您更新 Google Play 服务，否则此应用将无法运行。

Google Drive 只是我的应用程序的一部分，因此消息令人困惑。

我的建议是将文本更改为可以在许多情况下使用的通用文本。例如：“此应用程序有依赖于 Google Play 服务的功能。如果您不更新它，此功能将无法使用”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:50:18.600

没关系，所以创建您自己的错误对话框来说出您想要的任何内容。该方法可用于更轻松地提供此功能。

# c# - 在网格视图中为复选框列生成新列

> ID：14754276
> 
> 赞同：1
> 
> 时间：2013-02-07T15:04:29.337
> 
> 标签：c#, asp.net, gridview

我正在使用数据表作为网格视图的数据源

```
 DataTable table = new DataTable();
    table.Columns.Add("Dosage", typeof(int));
    table.Columns.Add("Drug", typeof(string));
    table.Columns.Add("Patient", typeof(string));
    table.Columns.Add("Select",typeof(bool));

    //
    // Here we add five DataRows.
    //
    table.Rows.Add(25, "Indocin", "David");
    table.Rows.Add(50, "Enebrel", "Sam");
    table.Rows.Add(10, "Hydralazine", "Christoff");
    table.Rows.Add(21, "Combivent", "Janet");
    table.Rows.Add(100, "Dilantin", "Melanie");

    GridView2.DataSource = table;

    GridView2.DataBind(); 
```

在页面加载时，我想在网格中创建新列以添加单选按钮

实际上我想为数据库中的选定复选框提交行值..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:09:45.850

如果要向 中添加新列，`GridView`则应将其添加到`DataSource`. 通过从数据库中选择另一列，或者，如果您在此处使用内存`DataTable`中的列，则添加另一列`DataColumn`。但我假设您已经添加了列（`Select`）。

然后使用 a`TemplateField`将其添加`RadioButton`并评估/绑定到列。

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" OnRowDataBound="GridView2_RowDataBound" >
         <Columns>
            <asp:TemplateField HeaderText="Select">
                  <ItemTemplate>
                     <asp:RadioButton ID="rbSelect"   runat="server" />
                  </ItemTemplate>
            </asp:TemplateField> 
```

您可以`RowDataBound`根据数据源使用它来检查它：

```
protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var rbSelect = (RadioButton)e.Row.FindControl("rbSelect");
        var row = ((DataRowView)e.Row.DataItem).Row;
        rbSelect.Checked = row.Field<bool>("Select");
    }
} 
```

# vb.net - 水晶报表 XI + VB.NET 2008

> ID：14754279
> 
> 赞同：1
> 
> 时间：2013-02-07T15:04:46.220
> 
> 标签：vb.net, crystal-reports-xi, sql-server-2008-express

我将**VB.NET 2008 Professional**与**Crystal Reports Professional XI**和**MSSQL Server 2008 Express**一起使用。

我已经尝试使用/或**SQLDataReader**和/或**DataSet**构建数据库并将其与 Report Viewer 一起使用，但它无法正常工作。出现以下问题：

1-它不考虑我在**SQL 命令**中放置的过滤器。寄存器总是全部显示。在 SQLCommand 我创建以下过滤器：

`AND SEG_Usuario.CD_Empresa = 'MTO' AND SEG_Sub_Processo.Nivel_1 <> 0 AND SEG_Usuario_Filial.CD_Filial = '010' AND SEG_Usuario.CD_Ususario = '9635'`

2- 显示的寄存器是重复的、无序的和混合的。

如果我执行我在数据库内的 SQLCommand 中使用的 SQL，数据库寄存器会正确显示，它们不会重复，它们是有序的，并且仅根据过滤器的要求显示。如果我显示 DataTable 和 DataReader 中的数据，它们也是正确的，不要重复，按照过滤器中设置的内容进行排序和显示。所以我相信 SQLCommand 是正确编写的 SQL 指令。

基本上我做了以下操作：

`Dim conexao As SqlConnection = New SqlConnection("data source=meuservidor;initial catalog=meubanco;user id='meuuser';password='minhasenha'") Dim comando As SqlCommand = New SqlCommand`

`Dim objdata As New DataTable Dim objdr As SqlDataReader`

`comando.CommandText = "SELECT .... FROM .... WHERE ..... AND... AND ...ORDER BY ....." comando.Connection = conexao conexao.Open()`

`objdr = comando.ExecuteReader objdata.Load(objdr)`

`Dim myReport As New ReportDocument() 'I have already tried to load the report this way 'myReport.Load("\path\myReport.rpt")`

`'Actually I load the report this way - I don't know if it makes any difference myreport.FileName = "\path\myReport.rpt"`

`myreport.SetDatabaseLogon("meuser", ",minhasenha", "meuservidor", "meubanco")`

`myReport.SetDataSource(objdata) CrystalReportViewer1.ReportSource = myReport`

我找不到错误。有没有其他方法可以将 SQL 命令传递给报告？非常感谢您的回答。

# asp.net - 是否可以在 IIS 上并行运行两个网站？

> ID：14754280
> 
> 赞同：0
> 
> 时间：2013-02-07T15:04:46.487
> 
> 标签：asp.net, iis

我们正计划重新设计当前的 ASP.NET 网站，但想衡量新设计的有效性。我们想要创建两个网站实例并向新站点发送一小部分流量，只有在我们确信新站点运行良好时才会增加流量。

是否可以只使用一台服务器（没有虚拟机的普通 Windows Web Server 2008）并且没有外部负载平衡器？是否有我不知道的 IIS 中内置的负载平衡器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:07:39.143

使用：IIS 上的应用程序请求路由这是可能的。

[http://www.iis.net/downloads/microsoft/application-request-routing](http://www.iis.net/downloads/microsoft/application-request-routing)

至于这是否在您的安装中，您可能需要检查，现在一些“Vanilla”安装包括这个，如果您没有，您可以使用 WebInstaller 进行快速安装。

# regex - 如何将 glob 或正则表达式定位器传递给 Perl 中的 Selenium 函数 alert_is()？

> ID：14754283
> 
> 赞同：0
> 
> 时间：2013-02-07T15:05:02.820
> 
> 标签：regex, perl, selenium, webdriver

我正在运行一个脚本，我知道一个警报会（大部分）无害地弹出，说明某个整数`$x sequence(s) deleted.`在哪里。`$x`我想让 WebDriver 期待警报并放弃它，而不会使测试用例失败。为此，我正在使用`$sel->get_alert()`. 我尝试像这样将正则表达式传递给它：

```
use strict;
use warnings;
$sel->alert_is("id=regexp:/\d+ sequence\(s\) deleted\./"); 
```

但我得到的错误说

```
Unrecognized escape \d passed through at script.pl line 44.
.
.
not ok 14 - get_alert, 'id=regexp:'/d+ sequence(s) deleted./'
Failed test 'get_alert, 'id=regexp:'/d+ sequence(s) deleted./''
at script.pl line 44.
      got: '0 sequence(s) deleted.'
  expected: 'id=regexp:/'d+ sequence(s) deleted./' 
```

当我尝试使用 glob 而不是正则表达式时，我得到了类似的结果。如果我猜出整数并像这样传递它

`$sel->alert_is("0 sequence(s) deleted.");`

它工作正常，所以我很确定 Selenese 是可靠的。当我在谷歌上寻找解决方案时，我得到了很多不同的地方，人们复制并粘贴了 WWW::Selenium 的 CPAN 列表，这没有给出示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T21:04:53.717

好吧，如果“你知道”警报会弹出，那么为什么不直接使用`dismiss_alert`呢？从文档：

说明：关闭当前显示的警报对话框。对于`comfirm()` 和`prompt()`对话框，这相当于单击“取消”按钮。对于`alert()`对话框，这相当于单击“确定”按钮。

例子：
`$driver->dismiss_alert;`

或者你可以使用`accept_alert`. 从文档：

说明：接受当前显示的警报对话框。通常，这相当于单击对话框中的“确定”按钮。

例子： `$driver->accept_alert;`

# php - symfony2 单元测试控制台输出测试名称或编号

> ID：14754284
> 
> 赞同：2
> 
> 时间：2013-02-07T15:05:06.287
> 
> 标签：php, unit-testing, symfony, phpunit

我想知道是否可以为单元测试分配名称，以便它显示为运行。因此，如果我有多个测试都在运行一个失败的名称，可以很快找到

所以添加类似的东西（这不是真正的代码，它放在下面是为了描述目的）。它标记为 1.1 和 1.2 的部分我希望在控制台中输出

```
$this->assertEquals(1, 
   $crawler->filter('h1:contains("About symblog")')->count(), 
  '1.1 Test one some description'
);

$this->assertEquals(1, 
  $crawler->filter('h2:contains("' . $blogTitle .'")')->count(), 
  '1.2 Another test'
); 
```

我不知道该怎么做。**下面的实际**代码

```
 public function testIndex()
    {
        $client = static::createClient();

        $crawler = $client->request('GET', '/blogger/');

        // Check there are some blog entries on the page
        $this->assertTrue($crawler->filter('article.blog')->count() > 0);

        // Find the first link, get the title, ensure this is loaded on the next page
        $blogLink   = $crawler->filter('article.blog h2 a')->first();
        $blogTitle  = $blogLink->text();
        $crawler    = $client->click($blogLink->link());

        // Check the h2 has the blog title in it
        $this->assertEquals(1, $crawler->filter('h2:contains("' . $blogTitle .'")')->count());

    } 
```

![phpUnit 输出示例](../Images/0d6aecf2cfff613bf3c4e51838ba5b50.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:37:17.883

只需像这样使用`--debug`标志：

```
phpunit -c app --debug path/to/your/tests 
```

# file - 更改文件的目标行

> ID：14754286
> 
> 赞同：0
> 
> 时间：2013-02-07T15:05:11.977
> 
> 标签：file, bash, text, batch-file, command-line-interface

我正在运行一个进程，它使用文件 parameters.py 中定义的一组*参数*

现在，我想将其中一个参数的值扫过一定范围。因此，我编写了一个批处理文件来自动化该过程。

**问题**

我的问题是我需要修改文件参数的第 20 行，从 to`value = 200`设置参数的新值。`value = $VAR``$VAR`

**问题**

是否有允许更改文件的特定目标行的 bash 命令？

谢谢你和欢呼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:06:48.547

尝试使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")执行此操作：

```
sed -i "20s/value = 200/value = $VAR/" file.txt 
```

这将更改为`value = 200`第`value = $VAR`20 行`s///`。是`sed`替换的骨架：`s/before/after/`

`-i`开关就地编辑文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:08:13.483

虽然这当然是可能的，但我不会推荐它。有一天，有人会在此行或空行之前添加注释，您的脚本将中断。

改用`sed`：

```
sed -e 's/value = 200/value = $VAR/' < parameters.py 
```

一个更好的解决方案是将所有内容`parameters.py`移入`parameterdefaults.py`如下：

参数defaults.py：

```
options = {
    "value": 200,
} 
```

参数.py：

```
import parameterdefaults

options = dict( **parameterdefaults.options ) # copy defaults

options['value'] = 10 # Override the few values you need to change 
```

甚至更好：

需要参数的代码.py：

```
import parameterdefaults
import parameters

options = dict( **parameterdefaults.options ) # copy defaults
options.update( parameters.options ) # merge with changes 
```

现在你可以写：

参数.py：

```
options = {
    "value": 10,
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:08:35.620

执行此操作而不是破解脚本的最简单方法*（但不是最好的方法）*是将其从

```
value = 200 
```

到

```
import os # somewhere at the top if need be.
value = int(os.environ.get('VAR', 200)) 
```

这样就可以从调用过程中修改它可能是什么。

# powershell - 使用 powershell 拆分 CSV

> ID：14754287
> 
> 赞同：3
> 
> 时间：2013-02-07T15:05:16.533
> 
> 标签：powershell, csv

我有大型 CSV 文件（每个 50-500 MB）。在这些上运行复杂的 power shell 命令需要很长时间和/或遇到内存问题。

处理数据需要按公共字段分组，比如在 ColumnA 中。因此，假设数据已经按该列排序，如果我随机拆分这些文件（即每个 x 千行），那么匹配的条目仍可能最终出现在不同的部分。A 中有数千个不同的组，因此将每个组拆分为一个文件会创建多个文件。

如何将其拆分为 10,000 行的文件而不丢失组？例如，第 1-13 行将是 A 列中的 A1，第 14-17 行将是 A2 等，第 9997-10012 行将是 A784。在这种情况下，我希望第一个文件包含第 1-10012 行，下一个文件从第 10013 行开始。

显然我想保留整个行（而不仅仅是 A 列），所以如果我将所有结果文件粘贴在一起，这将与原始文件相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:32:49.300

未测试。这假设 ColumnA 是第一列，它是常见的逗号分隔数据。您需要调整创建正则表达式的行以适合您的数据。

```
 $count = 0

 $header = get-content file.csv -TotalCount 1

 get-content file.csv -ReadCount 1000 |
  foreach {
   #add tail entries from last batch to beginning of this batch
   $newbatch = $tail + $_ 

   #create regex to match last entry in this batch
   $regex = '^' + [regex]::Escape(($newbatch[-1].split(',')[0])) 

   #Extract everything that doesn't match the last entry to new file

     #Add header if this is not the first file
     if ($count)
       {
         $header |
           set-content "c:\somedir\filepart_$count"
        }

     $newbatch -notmatch $regex | 
      add-content "c:\somedir\filepart_$count"  

   #Extact tail entries to add to next batch
   $tail = @($newbatch -match $regex)

   #Increment file counter
   $count++ 

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:52:49.650

这是我的尝试，它变得混乱 :-P 它会在拆分文件时将整个文件加载到内存中，但这是纯文本。与导入的对象相比，它应该占用更少的内存，但仍然大约是文件的大小。

```
$filepath = "C:\Users\graimer\Desktop\file.csv"
$file = Get-Item $filepath
$content = Get-Content $file
$csvheader = $content[0]
$lines = $content.Count
$minlines = 10000
$filepart = 1

$start = 1

while ($start -lt $lines - 1) {
    #Set minimum $end value (last line)
    if ($start + $minlines -le $lines - 1) { $end = $start + $minlines - 1 } else { $end = $lines - 1 }

    #Value to compare. ColA is first column in my file = [0] .  ColB is second column = [1]
    $avalue = $content[$end].split(",")[0]
    #If not last line in script
    if ($end -ne $lines -1) {
        #Increase $end by 1 while ColA is the same
        while ($content[$end].split(",")[0] -eq $avalue) { $end++ }
        #Return to last line with equal ColA value
        $end--
    }
    #Create new csv-part
    $filename = $file.FullName.Replace($file.BaseName, ($file.BaseName + ".part$filepart"))
    @($csvheader, $content[$start..$end]) | Set-Content $filename

    #Fix counters
    $filepart++
    $start = $end + 1
} 
```

文件.csv：

```
ColA,ColB,ColC
A1,1,10
A1,2,20
A1,3,30
A2,1,10
A2,2,20
A3,1,10
A4,1,10
A4,2,20
A4,3,30
A4,4,40
A4,5,50
A4,6,60
A5,1,10
A6,1,10
A7,1,10 
```

结果（我用过`$minlines = 5`）：

```
file.part1.csv:

ColA,ColB,ColC
A1,1,10
A1,2,20
A1,3,30
A2,1,10
A2,2,20

file.part2.csv:

ColA,ColB,ColC
A3,1,10
A4,1,10
A4,2,20
A4,3,30
A4,4,40
A4,5,50
A4,6,60

file.part3.csv:

ColA,ColB,ColC
A5,1,10
A6,1,10
A7,1,10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:30:14.720

这需要 PowerShell v3（由于`-append`on `Export-CSV`）。

另外，我假设您有列标题并且第一列名为`col1`. 根据需要进行调整。

```
import-csv MYFILE.csv|foreach-object{$_|export-csv -notypeinfo -noclobber -append ($_.col1 + ".csv")} 
```

这将为第一列中的每个不同值创建一个文件，并将该值作为文件名。

# php - Array_Unique 过滤

> ID：14754289
> 
> 赞同：2
> 
> 时间：2013-02-07T15:05:18.020
> 
> 标签：php, arrays, sorting

我有一个多维数组：

```
 Array
(
    [0] => Array
        (
            [Id] => 1
            [MTime_Id] => 1
            [MName] => Breakfast
            [DName] => Other Cereals
            [IName] => 
            [Date] => 2013-02-05
        )

[1] => Array
    (
        [Id] => 1
        [MTime_Id] => 1
        [MName] => Breakfast
        [DName] => Porridge
        [IName] => Oats,Milk,Sugar
        [Date] => 2013-02-06
    )

[2] => Array
    (
        [Id] => 1
        [MTime_Id] => 1
        [MName] => Breakfast
        [DName] => Porridge
        [IName] => Oats,Milk,Sugar,Oats,Milk,Sugar
        [Date] => 2013-02-05
    ) 
```

)

我正在尝试使用唯一的数组来过滤它

```
 [IName] => Oats,Milk,Sugar,Oats,Milk,Sugar 
```

我没有运气。如何过滤重复项？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:22:05.287

如果您过滤输入，因此在字段中没有额外的空格`IName`，您可以使用像这样简单的东西进行过滤：

```
$array[2]['IName'] = implode(',', array_unique(explode(',', $array[2]['IName']))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:12:37.800

问题是您在数组 2 中使用 Oats,Milk,Sugar 作为 IName 的元素，在数组 3 中您有 Oats,Milk,Sugar,Oats,Milk,Sugar。这不一样！

"Oats,Milk,Sugar"=="Oats,Milk,Sugar,Oats,Milk,Sugar"（或 "Oats,Milk,Sugar".equals("Oats,Milk,Sugar,Oats,Milk,Sugar")）是错误的。

如果你想让它独一无二，你必须分解单个结果，然后对它做一个唯一的，或者你必须将单个值存储在单独的字段中......

顺便说一句：这是一个链接如何从多维数组[中删除重复项如何从 PHP 中的多维数组中删除重复值](https://stackoverflow.com/questions/307674/how-to-remove-duplicate-values-from-a-multi-dimensional-array-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:13:27.280

我不确定是否存在为此的函数，这是一个简单的解决方案，您可以循环数组，并获取每个值的结果，然后分解结果，并将其插入数组中。然后使用 array_unique 函数。试试这个：

```
$result = array();
foreach($arrays as $array)
{
    $tmp = $array['IName'];
    $tmp2 = explode(',',$tmp);
    foreach ($tmp2 as $t)
    {
        $result[]=$t;
    }
}
$array_unique = array_unique($result); 
```

# python - smtplib、unicode 和 OpenERP 核心的问题

> ID：14754301
> 
> 赞同：2
> 
> 时间：2013-02-07T15:06:09.403
> 
> 标签：python, openerp, smtplib

我目前正在为 OpenERP 6.1.1 (python 2.7) 开发一个模块，其中电子邮件通知应由多个工作流状态更改触发。到目前为止，如此明显。当我配置 ir.mail_server 的实例并想要对其进行测试时，我得到以下异常：

```
Server Traceback (most recent call last):
  File "/opt/openerp61/server/openerp/addons/web/common/http.py", line 592, in send
    result = openerp.netsvc.dispatch_rpc(service_name, method, args)
  File "/opt/openerp61/server/openerp/netsvc.py", line 360, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/opt/openerp61/server/openerp/service/web_services.py", line 572, in dispatch
    res = fn(db, uid, *params)
  File "/opt/openerp61/server/openerp/osv/osv.py", line 167, in execute_kw
    return self.execute(db, uid, obj, method, *args, **kw or {})
  File "/opt/openerp61/server/openerp/osv/osv.py", line 121, in wrapper
    return f(self, dbname, *args, **kwargs)
  File "/opt/openerp61/server/openerp/osv/osv.py", line 176, in execute
    res = self.execute_cr(cr, uid, obj, method, *args, **kw)
  File "/opt/openerp61/server/openerp/osv/osv.py", line 164, in execute_cr
    return getattr(object, method)(cr, uid, *args, **kw)
  File "/opt/openerp61/server/openerp/addons/base/ir/ir_mail_server.py", line 191, in test_smtp_connection
    smtp_debug=smtp_server.smtp_debug)
  File "/opt/openerp61/server/openerp/addons/base/ir/ir_mail_server.py", line 241, in connect
    connection.login(user, password)
  File "/usr/lib/python2.7/smtplib.py", line 598, in login
    (code, resp) = self.docmd(encode_cram_md5(resp, user, password))
  File "/usr/lib/python2.7/smtplib.py", line 562, in encode_cram_md5
    response = user + " " + hmac.HMAC(password, challenge).hexdigest()
  File "/usr/lib/python2.7/hmac.py", line 72, in __init__
    self.outer.update(key.translate(trans_5C))
TypeError: character mapping must return integer, None or unicode 
```

问题似乎很明显，因为传递给 smtplib.SMTP.login() 的用户和密码参数是 unicode 编码的，这是 HMAC 不喜欢的。如果我“修复” OpenERP 核心并将这些参数转换为字符串，一切似乎都可以正常工作。至少 ir.mail_server 的“测试连接”功能是这样说的。

当我在这个项目中学习 OpenERP 和 Python 时，我不知道如何继续，因为几乎没有任何人提到过这个问题。因此，我的猜测是我的开发设置有一些“错误”触发了这个问题。我可以把核心补丁留在那里继续开发，但这不是一个真正的选择，因为这可能有一天会回来并咬我的屁股。

对此的任何输入都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T14:20:25.017

你是对的，HMAC 不喜欢 unicode。您可以应用以下修复，前提是您仅在用户名和密码中使用 ASCII 字符。（您必须更改`/opt/openerp61/server/openerp/addons/base/ir/ir_mail_server.py`自己的第 241 行才能应用此功能）

```
connection.login(str(user), str(password)) 
```

Trac 中有一个关于此的错误：

[http://bugs.python.org/issue5285](http://bugs.python.org/issue5285)

# django - 在 list_view 中显示其他模型的属性

> ID：14754304
> 
> 赞同：0
> 
> 时间：2013-02-07T15:06:13.987
> 
> 标签：django, django-models, django-admin

我有以下3个模型：

```
class ModelA(models.Model):
    one = models.Charfield()
    two = models.Charfield()
    #etc

class ModelB(models.Model):
    modela = models.ForeignKey(ModelA)
    modelc = models.ForeignKey(ModelC)
    #etc

class ModelC(models.Model):
    five = models.Charfield()
    six = models.Charfield()
    #etc 
```

我有一个 ModelA 的管理员：

```
class ModelAAdmin(admin.ModelAdmin):
    list_display = ('one', 'two') 
```

我想要实现的是在 ModelA 的管理列表视图中显示 ModelC 的属性“五”：

```
list_display = ('one', 'two', 'five') 
```

我收到此错误：

```
ModelAAdmin.list_display[2], 'five' is not a callable or an attribute of 'ModelAAdmin' or found in the model 'ModelA'. 
```

正确...我理解...因为 ForeignKey 不在 ModelA 上，而是在 ModelB 上。

但是如何在管理列表视图中显示该属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:12:16.820

您可以使 list_display 元素成为一个函数，该函数将对象作为参数。

```
def get_five(obj):
    return ("%s") % obj.modelc.five

get_five.short_description = 'five'

class ModelAAdmin(admin.ModelAdmin):
    list_display = ('one', 'two', get_five) 
```

不确定您是否能够像那样访问 modelc，但如果不能，您可以创建查询。

# javascript - 如何在 qooxdoo 中运行命令行脚本？

> ID：14754308
> 
> 赞同：0
> 
> 时间：2013-02-07T15:06:27.200
> 
> 标签：javascript, node.js, qooxdoo

我希望能够转到网页选择一些选项，然后使用这些选项运行命令行脚本。qooxdoo 可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:22:33.623

当然，但您将需要一些额外的部件。您可以使用 qooxdoo 创建网页，例如使用 qooxdoo 的表单元素 (qx.ui.form.*)。然后，您需要一个可以将表单数据提交到的后端（任何旧的 Apache 都可以，Node.js 服务器也可以）。在后端，您将需要一些自定义代码来创建子外壳并在其上运行命令（例如，使用 PHP、mod_perl、mod_wsgi、...、JS），添加来自 Web 表单的选项。

# android - 我可以测试我的线程循环器是否完成了它的消息？

> ID：14754311
> 
> 赞同：2
> 
> 时间：2013-02-07T15:06:41.290
> 
> 标签：android

我想测试我的 Looper 是否完成了它的工作，因为我想在我的活动的所有元素都在屏幕上之后执行代码。我想在 Looper 完成工作后触发一个事件。在 UI 中的所有元素都出现在屏幕上之后，我可以这样做还是有其他方法来执行我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:47:58.517

一旦你`looper`通过调用`Looper.loop()`它开始它*不会*退出，直到你显式调用`Looper.quit()`.

你可以用它`Semaphore`来协调你的代码，这样你就可以等到 Looper 完成它的工作。

1-在您的类中定义一个对象并使用许可`Semaphore`对其进行初始化，例如`0`

```
Semaphore semaphore = new Semaphore(0); 
```

2-在您要`wait`呼叫的地方`semaphore.acquire()`，这将阻塞直到`permit`可用

3-完成循环调用后`semaphore.release()`，这将向信号量添加一个许可，其他等待代码将继续运行。

注意，如果 looper 在`semaphore.acquire()`调用之前完成；它会立即继续，不会阻塞

有关使用的代码示例，请在此处查看[我的答案](https://stackoverflow.com/questions/14782579/waiting-for-soundpool-to-load-before-moving-on-with-application/14782648#14782648)`Semaphore`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:08:22.800

您可以检查元素的可见性。如果他们是真的，运行你的代码....（希望我理解正确。）

# c# - Facebook C# SDK 获取用户 accessToken

> ID：14754312
> 
> 赞同：1
> 
> 时间：2013-02-07T15:06:43.103
> 
> 标签：c#, asp.net, facebook, facebook-graph-api, facebook-c#-sdk

我在从登录 facebook 的结果中获取 accessToken 时遇到问题。在 Page_load 中，我的 url 没有被正确解析。

GenerateLoginUrl 方法正常工作，我可以在 QueryString 中看到 accessToken。我试过从那里得到它，但它也不起作用。

```
 protected void Page_Load(object sender, EventArgs e)
{
    var fb = new FacebookClient();

    FacebookOAuthResult result;
    if (fb.TryParseOAuthCallbackUrl(Request.Url, out result))
    {
        if (result.IsSuccess)
        {
            // result clicked authorized
            var accessToken = result.AccessToken;
            Label1.Text = accessToken.ToString();
        }
        else
        {
            // user clicked cancelled and didn't authorize the app
            var error = result.ErrorDescription;
            Label1.Text = error;
        }
    }
    else
    {
        //This is were it always goes
        Label1.Text = "not valid facebook url";
    }

}

private Uri GenerateLoginUrl(string appId, string extendedPermissions)
{

    try
    {
        dynamic parameters = new ExpandoObject();
        parameters.client_id = appId;
        parameters.redirect_uri = "local iis ip";

        // The requested response: an access token (token), an authorization code (code), or both (code token).
        parameters.response_type = "token";

        // list of additional display modes can be found at http://developers.facebook.com/docs/reference/dialogs/#display
        parameters.display = "popup";

        // add the 'scope' parameter only if we have extendedPermissions.
        if (!string.IsNullOrWhiteSpace(extendedPermissions))
            parameters.scope = extendedPermissions;

        // generate the login url
        var fb = new FacebookClient();

       var url = fb.GetLoginUrl(parameters);

       return url;
    }

    catch (FacebookOAuthException fbex)
    {
        Label1.Text = fbex.Message;
        return null;

    }

    catch (Exception ex)
    {
        Label1.Text = ex.Message;
        return null;
    }

}

protected void Button1_Click(object sender, EventArgs e)
{
    string AppId = ConfigurationManager.AppSettings["apiKey"];
    string ExtendedPermissions = ConfigurationManager.AppSettings["ExtendedPermissions"];

    var url = GenerateLoginUrl(AppId, ExtendedPermissions);

    Response.Redirect(url.AbsoluteUri, false);
} 
```

谢谢你的帮助。

更新：

在 Request.Url 中，url 始终是：

```
http://localhost:23560/Appname/default.aspx 
```

但我可以在浏览器中查看真实的网址，它是：

```
http://localhost:23560/Appname/#access_token=0000000000&expires_in=3821 
```

那么asp.net不能正确读取url吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T12:23:21.083

我找到了答案，它是：

您必须获取代码而不是令牌，代码将显示在查询字符串中，accesstoken 被剥离。

```
 parameters.response_type = "token"; 
```

交换

```
 parameters.response_type = "code"; 
```

然后兑换成代码token

```
 dynamic token = fb.Get("oauth/access_token", new
                {
                    client_id = "appid",
                    client_secret = "appsecret",
                    redirect_uri = url,
                    code = Request.QueryString["code"]
                }); 
```

var accessToken = token.access_token;

# javascript - 刷新 Div 并为更改设置动画

> ID：14754314
> 
> 赞同：1
> 
> 时间：2013-02-07T15:06:46.813
> 
> 标签：javascript, jquery, html, refresh

我知道如何刷新 a 的内容`DIV`，但是我不想让它出现，而是要进行`animate`更改。`div`本质上是一个盒子的集合，当用户接受它需要的报价`'move'`时`div`。

我将如何使用`Javascript/Jquery`？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:28:17.223

不知道你**进入那个 div是什么意思**

您可以将 div 的新内容包装在另一个 html 元素中，并用一些动画显示它。

```
<div></div>
newContent = '<span id="whatever" display="none">newContent</span>'; 
```

当你在 DOM 中有这个结构时

```
<div>
   <span id="old">oldContent</span>
   <span id="whatever" display="none">newContent</span>
</div> 
```

和

```
$('#old').animateOUT(callback(){
   $('#whatever').animateIN();
   $(this).remove();
}) 
```

`animateOUT,animateIN,callback`

不是真正的功能，而是您选择的动画效果：http: [//api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:33:51.593

我认为您有`<div/>`一个容器，其中包含用户接受的报价

```
<div id="offersContainer">
    <div class="offer">
        Offer 1
    </div>
    <div class="offer">
        Offer 2
    </div>
</div> 
```

要在商品 div 中添加新元素，请使用该`.append()`方法。

```
$("#offersContainer").append("<div id='offer_5'>New Offer</div>"); 
```

然后，您可以为新报价制作动画

```
$("#offer_5").animate({ "background-color": "blue" }, 1000); 
```

这是你想要做的吗？

**编辑**

jQuery AJAX

```
$.ajax({
    type: "GET",
    url: "/Offers/GetOffer",
    data: { offer_Id: 5 },
    success: function (data, textStatus) {
        // data can be html or json, depends on what you return from you're action
        // console.log(data);

        $("#offersContainer").append(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:36:11.123

您要么必须在要扩展的主 div 中添加一个新元素并为其设置动画，要么只需将主 div 替换为新的 div 并`slideDown()`在其上调用（或您想要执行的任何其他动画）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-27T03:45:34.240

试试这个代码为你的工作

```
<script language="javascript" type="text/javascript">
document.getElementById('div_id').innerHTML=location.reload(); //Reload code
</script> 
```

# php - $_POST['password'] 中某些字符的问题；

> ID：14754318
> 
> 赞同：1
> 
> 时间：2013-02-07T15:06:54.407
> 
> 标签：php

我在密码输入表单中遇到一些字符问题

`" = \"`

`' = \'`

`\ = \\`

`& = empty`

`+ = empty`

所以如果用户输入 `n1N'11`

在输出中他会得到 `n1N\\\'11`

1）我做错了什么？在 ajax-php 密码验证文件中，我简单地使用`$password=$_POST['password'];`并得到这样的结果。在 mysql 中记录数据的文件中，我使用`$password = $mysqli->real_escape_string($_POST['password']);`. 但是这些问题已经在密码验证中......

2）如何改变？我可以将\"改回"，但不能将空改成&或+，因为不知道访客输入了什么。或者根本不允许输入 & 和 +

3）还有更多像提到的角色吗？

我是编程新手。可能这些问题很愚蠢。

对不起，这里是ajax代码。但似乎我已经解决了我的问题。通过前需要使用encodeURIComponent

```
<script type="text/javascript">
// Pasword validation
//pass data without page refresh
function ValidatePassword(){
// Create our XMLHttpRequest object
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
var hr = new XMLHttpRequest();
}
else
{// code for IE6, IE5
var hr = new ActiveXObject("Microsoft.XMLHTTP");
}
// Create some variables we need to send to our PHP file
var url = "_validator.php";
var pass = document.getElementById("password").value;

var vars_pass = "&password="+encodeURIComponent(pass);

hr.open("POST", url, true);
// Set content type header information for sending url encoded variables in the request
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
// Access the onreadystatechange event for the XMLHttpRequest object
hr.onreadystatechange = function() {
if(hr.readyState == 4 && hr.status == 200) {
var return_data = hr.responseText;
document.getElementById("CheckPassword").innerHTML = return_data;

}
}
// Send the data to PHP now... and wait for response to update the status div
hr.send(vars_pass); // Actually execute the request
document.getElementById("CheckPassword").innerHTML = "processing...";
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:09:45.500

Try wrapping the value you pass with javascript in encodeURIComponent(). That way it should preserve the values correctly.

# javascript - 小工具门户与浏览器桌面范例

> ID：14754319
> 
> 赞同：2
> 
> 时间：2013-02-07T15:06:54.913
> 
> 标签：javascript, user-interface, desktop

我想在门户容器中的小工具范式与带有内联窗口的浏览器桌面范式之间进行一些客观的分析。两者的例子分别是[shindig](http://shindig.apache.org/)和[jquery desktop](http://sonspring.com/journal/jquery-desktop)。我想知道一个人应该选择一个而不是另一个的基础。该解决方案旨在迎合企业用例，其中我们需要表示摘要数据（以各种图形形式），并能够从摘要向下钻取到粒度增加的详细数据（例如在数据网格中），工作流涉及编辑操作在编辑操作结束时，应刷新摘要数据（饼图、条形图等）的详细数据。

此外，一位同事告诉我，浏览器桌面范式自 2000 年初问世以来并没有真正起飞，除了 Chromebook 类型的设备。还有[来自 Sencha 的 ExtJS，](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/desktop/desktop.html)它似乎也支持浏览器桌面。

我知道范式的选择通常取决于我们可能想要解决的应用程序用例（我在上面试图概述的一小部分）以及我们希望提供的丰富用户体验，但我想要想知道是否有任何来自 UI 专家的一般指导方针可供新手欣赏并用于做出客观的选择？

提前致谢！

# java - 如何使用 Java 在任何操作系统中创建隐藏文件

> ID：14754322
> 
> 赞同：2
> 
> 时间：2013-02-07T15:06:59.353
> 
> 标签：java, hidden-files

我有这段代码试图在我的 Json 文件中创建和写入，但我该如何隐藏在任何操作系统（Windows 或 Mac）中

```
File file = new File(System.getProperty("user.home") + File.separator + "Documents" + File.separator + "targetappConfig.json");

if (!(file.exists())) {

  org.json.simple.JSONArray userDetails = new org.json.simple.JSONArray();
  userDetails.add(userDetail);
  jsonObj.put("users", userDetails);
  FileWriter fileWriter = new FileWriter(file);
  fileWriter.write(jsonObj.toString());
  fileWriter.flush();
  fileWriter.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:12:17.653

我所做的是创建一个 OSValidator 并为每个操作系统编码我的文件并将其保存在应用程序目录中（windows：appdata，mac：Application Suport）。这似乎是最容易做到的。

```
public class OSValidator {
    private static String OS = System.getProperty("os.name").toLowerCase();

    public static boolean isWindows(){
        return (OS.indexOf("win")>=0);
    }

    public static boolean isMac(){
        return (OS.indexOf("mac")>=0);
    }

    public static boolean isUnix() {
        return (OS.indexOf("nix") >=0 || OS.indexOf("nux") >=0 || OS.indexOf("aix") >= 0);
    }

    public static boolean isSolaris(){
        return (OS.indexOf("sunos") >=0);
    }
}

if (OSValidator.isWindows()) {
            System.out.println("This is Windows");
            file = new File(System.getenv("APPDATA") + File.separator + "TargetApp" + File.separator +"config.json");

            if (!file.exists()) {
                try {
                    FileUtils.forceMkdir(file.getParentFile());
                } catch (IOException ex) {
                    Logger.getLogger(LoginController.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

        } else if (OSValidator.isMac()) {
            System.out.println("This is Mac");

            file = new File(System.getProperty("user.home") + File.separator + "Library" + File.separator + "Application Support"
                    + File.separator + "config.json");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:19:07.207

有关实际支持隐藏文件属性的 Windows 和其他操作系统，请参阅[此问题。](https://stackoverflow.com/questions/1294989/make-a-file-folder-hidden-on-windows-with-java)甚至有多种方法可以做到这一点。

对于 Unix/Linux，名称以点开头的文件和文件夹被认为是隐藏的（例如`.ssh`，例如）。这些默认情况下是不可见的。当然，用户可以在浏览器或`-a`用于`ls`. 尽管如此，出于方便等原因，这应该足够了。

# c# - 将文本导出到文件中，并将最新文本作为文本文件中的第一行 - C#

> ID：14754323
> 
> 赞同：0
> 
> 时间：2013-02-07T15:07:03.073
> 
> 标签：c#

我正在尝试将字符串导出到带有时间戳的文本文件。我正在使用 File.AppendAllText("C:\list.txt", text); 制作文本文件。问题在于 - 第一次运行将保存文本，任何后续运行都会将文本放在第一次运行文本的下方。我希望它像最新的文本一样位于顶部，因为我希望最新的时间戳位于顶部。

谢谢斯里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:10:36.347

将文本添加到文件的开头是一项非常昂贵的操作。基本上，您需要读取整个文件，然后将其与添加的文本一起写回，因此文件越大，速度就越慢。

如果您想首先显示最新的项目，则在显示文件时进行反转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:11:25.227

您需要先阅读现有文件，然后将该文本附加到当前消息中。然后你可以用新的日志覆盖整个文件。

不过要小心，一旦文件大小增加，这将是更多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:15:00.400

```
Void Method()
{
 string text = File.ReadAllText(@"c:\text.txt");

 string  NewText="This is new Text " + DateTime.Now.TimeOfDay;

 File.WriteAllText(@"c:\text.txt", NewText + Environment.NewLine  + text);

} 
```

# eclipse - Eclipse 将分支从分支切换到主干

> ID：14754326
> 
> 赞同：4
> 
> 时间：2013-02-07T15:07:15.037
> 
> 标签：eclipse, apache-flex, svn, flex3

我不明白我的 Eclipse 上发生的事情，我想知道这是我的 Eclipse 问题还是这实际上是一个特性。我有一个树干和一个分支。在存储库上它们是相同的，因此自从我创建分支以来没有提交任何更改。创建分支后，我将工作区从主干切换到分支。然后我开始在分支上工作和改变。突然间，我想在后备箱上看看什么东西，因为我迷失在我的变化中。所以我切换到后备箱。当 Eclipse 没有删除我的更改并且好像没有进行任何切换时，我感到很惊讶。变化继续存在。

这是正常的吗？有人可以解释吗？谢谢，大卫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T02:06:17.527

这是完全正常的，并且`svn switch`是假设的工作方式。

这是一个常见的场景。您正在使用主干，并意识到您的更改应该应用于分支。您只需进行切换，您现在就在一个新分支上，您的更改现在已应用于新分支。很多时候，我会在一个流（分支或主干）上工作，并意识到我的更改太实验性和太大而无法进入当前的开发流。我将创建一个新分支并切换到它。

千兆字节的快速磁盘和千兆字节的网络没有理由吝啬工作目录。我告诉开发人员为每个项目和分支专用一个工作目录。否则，如果他们不断在各种开发流之间来回切换，他们就会忘记并在错误的地方进行开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:18:50.717

使用几乎任何 svn 客户端，您都可以：

1.  签出一个项目
2.  做一些改变
3.  来回切换到任何卡车/分支机构
4.  沿途保留您的更改

换句话说，这里没有什么特定于 Eclipse 的。

看：`svn switch`

我更喜欢每个分支有单独的 Eclipse 项目，并将项目名称更改为 myProject-24 之类的名称，因此当分支再次签出时，默认项目名称上有一些分支标识符。

这也使您能够在每个分支级别上进行更改并跨分支进行单次提交；即使他们在谨慎的 Eclipse 项目中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-16T12:43:15.450

您可以通过执行以下操作来实现您正在寻找的功能

1.  右键单击应该替换的文件夹
2.  从上下文菜单中单击“替换为...”
3.  点击“分支...”
4.  从下拉框中选择要查看的分支

注意：这是替换您的本地更改。这是不可能逆转的。

问候托比

# javascript - Phonegap：获取联系人姓名，但不是号码

> ID：14754327
> 
> 赞同：1
> 
> 时间：2013-02-07T15:07:17.480
> 
> 标签：javascript, cordova, addressbook

我得到了联系人姓名，但没有得到号码。我哪里错了？

这是代码。

```
function loadPhoneContacts() {
    alert("Entering contacts");
    var options = new ContactFindOptions();
    options.filter="";
    options.multiple = true;
    var fields = ["displayName", "name", "nickname"];
    navigator.contacts.find(fields, onSuccessOfLoadContacts, onErrorOfLoadContacts, options);
}

function onSuccessOfLoadContacts(contacts) {

    alert("Got '" + contacts.length + "' contacts.");

    for (var i=0; i<contacts.length; i++) {

        var contactname =  contacts[i].name.formatted;
        alert(ContactName + " has " + contacts[i].phoneNumbers.length + " numbers");
        alert(contacts[i].phoneNumbers[1].value);

            for (var j=0; j<contacts[i].phoneNumbers.length; j++) {
                contactnumber = contacts[i].phoneNumbers[j].value;
                alert("Got number:" + contactnumber);
            }

    }
}

function onErrorOfLoadContacts(contactError) {
    alert('onError!');
} 
```

第二个 for 循环中的警报不会显示。

我是PG Noob。

这是更新的（不工作）代码：

```
function loadPhoneContacts() {
    var options = new ContactFindOptions();
    options.filter="";
    options.multiple = true;
    var fields = ["displayName", "name", "nickname", "phoneNumbers"];
    navigator.contacts.find(fields, onSuccessOfLoadContacts, onErrorOfLoadContacts, options);
}

// onSuccess: Get a snapshot of the current contacts
//
function onSuccessOfLoadContacts(contacts) {

    for (var i=0; i<contacts.length; i++) {

        alert(contacts[i].name.formatted);

            for (var j=0; j<contacts[i].phoneNumbers.length; j++) {
                alert(contacts[i].phoneNumbers[j].value);
            }

    }
}

// onError: Failed to get the contacts
//
function onErrorOfLoadContacts(contactError) {
    alert('onError!');
} 
```

在 var 字段中添加了 phoneNumbers，删除了变量并提醒它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:18:58.467

您没有告诉 PhoneGap 加载 PhoneNumbers，您需要将其添加到所需的字段数组中：

```
var fields = ["displayName", "name", "nickname", "phoneNumbers"]; 
```

# mysql - 分组时排序 JOIN 结果

> ID：14754328
> 
> 赞同：0
> 
> 时间：2013-02-07T15:07:23.947
> 
> 标签：mysql, sql, join, sql-order-by, left-join

以下面为例：

```
SELECT 
    *
FROM 
    auctions AS a 
    LEFT JOIN winners AS w ON a.auction_id=w.auction_id
WHERE 
    a.active=1 
AND 
    a.approved=1 
GROUP BY
    a.auction_id
ORDER BY
    a.start_time DESC
LIMIT
    0, 10; 
```

有时这可能会匹配`winners`表中的多个结果；我不需要它们，但是如果有多个匹配项，我想控制我得到的行。我怎样才能`ORDER BY`在获胜者表上进行操作，以确保我想要的行是第一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:15:02.460

不看表结构就很难准确回答，但是如果您的`winners`表有获胜者日期列或类似的东西，那么您可以使用聚合函数来获取第一条记录。

然后您可以返回与该最早日期类似的记录：

```
SELECT *
FROM auctions AS a 
LEFT JOIN winners w1
  ON a.auction_id=w1.auction_id
LEFT JOIN
(
  select auction_id, min(winner_date) MinDate -- replace this with the date column in winners
  from winners 
  group by auction_id
) AS w2
  ON a.auction_id=w2.auction_id
  and w1.winner_date = w2.MinDate
WHERE a.active=1 
  AND a.approved=1 
ORDER BY a.start_time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:14:28.203

```
SELECT *
FROM   auctions AS a
       LEFT JOIN (select auction_id from winners order BY auction_id limit 1) AS w ON a.auction_id = w.auction_id
WHERE  a.active = 1
       AND a.approved = 1
GROUP  BY a.auction_id
ORDER  BY a.start_time DESC 
```

将连接子句中对获胜者表的引用更改为子查询。然后，您可以控制返回的记录数量和顺序。

# ruby-on-rails - 为什么我无法使用 pow 发送电子邮件？

> ID：14754329
> 
> 赞同：1
> 
> 时间：2013-02-07T15:07:24.007
> 
> 标签：ruby-on-rails, ruby, email, rack-pow

我有一个使用 ActionMailer 发送电子邮件的 rails 项目。这似乎与 localhost:3000 上的 'rails server' 一起工作正常，但是当我使用 pow 时，我从 smtp 服务器收到身份验证错误消息。我猜这与环境变量有关。这是配置代码

```
 config.action_mailer.smtp_settings = {
 address: "smtp.gmail.com",
 port: 587,
 domain: "railscasts.com",
 authentication: "plain",
 enable_starttls_auto: true,
 user_name: ENV["GMAIL_USERNAME"],
 password: ENV["GMAIL_PASSWORD"]
} 
```

我在山狮。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:14:29.227

我有一个不同的建议：

在开发中，只需使用[letter_opener](https://github.com/ryanb/letter_opener)。无论如何，在这种情况下，它比实际发送电子邮件更有用。

在生产中，使用[SendGrid](http://sendgrid.com/)而不是 GMail。SendGrid 很棒，而且很容易设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T06:05:58.520

Pow 通过检查应用程序根目录中的两个文件来加载环境变量

1.  .powrc
2.  .powenv

我使用 touch 命令创建了 .powrc 文件，然后添加了我的环境变量

```
export GMAIL_USERNAME=username
export GMAIL_PASSWORD="my password" 
```

然后我以这种方式重新启动了应用程序的工作人员：

```
touch tmp/restart.txt 
```

电子邮件现在可以工作了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:13:08.647

正如 blamattina 所建议的那样，它可能与您的配置文件中的域有关！根据Ruby on Rails Guides给出的[例子：](http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration-for-gmail)

正确的、与 Gmail 兼容的配置如下所示：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
:address              => "smtp.gmail.com",
:port                 => 587,
:domain               => 'baci.lindsaar.net',
:user_name            => '<username>',
:password             => '<password>',
:authentication       => 'plain',
:enable_starttls_auto => true  } 
```

您`domain`的设置为`railscasts.com`. 除非那是您的网站，否则我的猜测是该域不正确。事实上，它[显然也是可选](https://stackoverflow.com/questions/6379950/gmail-smtp-with-rails-3)的。

这个 StackOverflow 详细说明了一个插件曾经是必需的，但如果您使用的是 Rails 3.2 或更高版本，则不再需要。文章顶部答案下方的评论详细说明了这`domain`是可选的。

更新：根据您描述的错误，您似乎遇到了身份验证错误！这可能是因为您的登录凭据[没有正确注册](https://stackoverflow.com/questions/11302900/mailer-authentication-error-in-rails-3-2-with-gmail-or-sendgrid)。

该用户在使用 Heroku 的上下文中询问，但错误是相同的。如果您的应用程序在 Rails 服务器上正常工作，但在 Pow 上不能正常工作，则这是服务器端设置问题。该解决方案涉及需要正确设置您的`ENV`（环境）变量以与您的服务器一起使用。

# python - 在 Python 中，你能提前声明所有可用的实例变量吗？

> ID：14754331
> 
> 赞同：0
> 
> 时间：2013-02-07T15:07:28.060
> 
> 标签：python, class

在 Python 中（我在这里说的是 2，但也有兴趣了解 3）是否有一种方法可以提前定义您想要可用的所有实例变量（成员字段）的列表，即使用一个错误'还没有在某处定义？

就像是

```
class MyClass(object):
    var somefield
    def __init__ (self):
        self.somefield = 4
        self.banana = 25      # error! 
```

有点像你在 Java、C++、PHP 等中所做的

**编辑：**

我想要这种东西的原因是尽早发现使用最初没有设置的变量。似乎 linter 实际上会在没有任何额外管道的情况下发现这些错误，所以也许我的问题没有实际意义......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:11:29.457

为什么是的，你可以。

```
class MyClass(object):
    __slots__ = ['somefield']
    def __init__ (self):
        self.somefield = 4
        self.banana = 25      # error! 
```

但[请注意警告](http://docs.python.org/2/reference/datamodel.html#slots)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:20:19.353

您可以使用上面发布的答案，但对于更“pythonic”的方法，请尝试（链接到 code.activestate.com）中列出的方法

以供将来参考，在我弄清楚如何链接到该网站之前，代码如下：

```
def frozen(set):
    """Raise an error when trying to set an undeclared name, or when calling
       from a method other than Frozen.__init__ or the __init__ method of
       a class derived from Frozen"""
    def set_attr(self,name,value):
        import sys
        if hasattr(self,name):                                  #If attribute already exists, simply set it
            set(self,name,value)
            return
        elif sys._getframe(1).f_code.co_name is '__init__':     #Allow __setattr__ calls in __init__ calls of proper object types
            for k,v in sys._getframe(1).f_locals.items():
                if k=="self" and isinstance(v, self.__class__):
                    set(self,name,value)
                    return
        raise AttributeError("You cannot add attributes to %s" % self)
    return set_attr 
```

# java - 更改是否有任何 EditText 处于焦点

> ID：14754332
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:07:34.377
> 
> 标签：java, android, focus, android-edittext, onfocus

在我的程序中，我使用了许多动态创建的 EditText，并且每次当它们中的任何一个发生更改（失去焦点）时，我都需要调用方法。有可能做这样的事情吗？否则如何使焦点丢失\更改所有视图的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:16:10.780

您需要为 EditText 设置[View.setOnFocusChangeListener](http://developer.android.com/reference/android/view/View.html#setOnFocusChangeListener%28android.view.View.OnFocusChangeListener%29)以监听焦点变化。

**例如：**

```
 View.OnFocusChangeListener editTextFocusChnage=
                                   new View.OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        swich(v.getId()){
         case  Edittext1_id:
           // do your work here..
                break;
         case Edittext2_id:
          // do your work here..
           break;
         case Edittext3_id:
          // do your work here..
           break;   
          .....        

        }
    }
}; 
```

其中 Edittext1_id,Edittext2_id,.... 是动态 EditText id

**编辑 ：-**

添加 `FocusChangeListener`到 EditText 的为：

```
 editText1.setOnFocusChangeListener(editTextFocusChnage);
    editText2.setOnFocusChangeListener(editTextFocusChnage);
    editText3.setOnFocusChangeListener(editTextFocusChnage);
    ..... 
```

# java - 单元格被加权到右边而不是左边

> ID：14754333
> 
> 赞同：1
> 
> 时间：2013-02-07T15:07:34.940
> 
> 标签：java, swing, miglayout

在示例程序的第一个选项卡中： 在第一行中，组件在它们的单元格中是 r 和 l 对齐的。在第二行中，单元格被跨越并推到右侧。

第一行中所有多余的空间都分配给单元格 0,0，其中包含标记为“20”的组件。

选项卡“二”通过使用 pushx 改善了这种情况。小部件看起来居中，但这不是我想要的。

但是如何将所有多余的空间分配给单元格 0、1（包含标记为“30”的组件的单元格）？我尝试发布我想要完成的图像，但系统不允许这样做。希望我的口头解释足够清楚。

```
package test1;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

import net.miginfocom.swing.MigLayout;

public class Main extends JTabbedPane {

public Main() {
    addTab("One",   createPanel1());
    addTab("Two",   createPanel2());

}
public static void main(String[] args) {
    final JFrame frame = new JFrame("Test MigLayout");
    Main main = new Main();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(main);
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            frame.pack();
            frame.setVisible(true);
            frame.setBounds(200, 200, 800, 500);
        }
    });
}

private JPanel createPanel1() {
    JPanel      panel           = new JPanel(new MigLayout("hidemode 3, debug", "[r][l]"));
    JTextField textField1 = new JTextField("20", 20);
    JTextField textField2 = new JTextField("30", 30);
    JButton button = new JButton("Button");
    panel.add(textField1);
    panel.add(textField2, "wrap");
    panel.add(button, "span 2, pushx");
    return (panel);
}
private JPanel createPanel2() {
    JPanel      panel           = new JPanel(new MigLayout("hidemode 3, debug", "[r][l]"));
    JTextField textField1 = new JTextField("20", 20);
    JTextField textField2 = new JTextField("30", 30);
    JButton button = new JButton("Button");
    panel.add(textField1);
    panel.add(textField2, "pushx, wrap");
    panel.add(button, "span 2, pushx");
    return (panel);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:33:16.313

感到惊讶的是，*任何*细胞都是水平生长的，因为默认情况下是不会的。直到重新阅读文档以进行推送：

> 使组件所在的行和/或列随着“权重”增长。这可以用来代替列/行约束中的“增长”关键字

在按钮的跨单元格中使用它可以有效地将增长约束应用于跨度的第一列。在不知道您的确切目标的情况下，除了说：不要 :-) 一个选项可能是显式增长第二列之外，很难提出任何建议：

```
JPanel panel = new JPanel(new MigLayout("hidemode 3, debug, wrap 2", "[r][l, grow]"));
JTextField textField1 = new JTextField("20", 20);
JTextField textField2 = new JTextField("30", 30);
JButton button = new JButton("Button");
panel.add(textField1);
panel.add(textField2);
panel.add(button, "span"); 
```

顺便说一句：我总是建议在层次结构中定义尽可能高的约束（布局>行/列>组件）-遵循DRY :-)

# jquery - 查找文本节点，然后用标签换行

> ID：14754334
> 
> 赞同：0
> 
> 时间：2013-02-07T15:07:37.120
> 
> 标签：jquery, textnode

我有以下 HTML，我无法控制：

```
<div id="sub-nav">
Vendita diretta            
<ul class="cms-nav-sidebar">            
<li class="icl-level-1"><a href="/tasting/">Degustazioni</a></li>
</ul>                           
</div> 
```

我需要将第一部分文本包装在标签中的 "sub-nav"`div`中。`<h1>`到目前为止，我有这个：

```
$('#sub-nav').children().wrap("<h1></h1>"); 
```

但是，这会包装标签`div`中的所有元素。`h1`如何精确定位第一个文本节点并将其包装在`h1`?

谢谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:34:12.280

Working off of the link in Blazemonger's comment...

```
$('#sub-nav').contents(':not(ul)').wrap("<h1></h1>"); 
```

...ought to work in your case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T09:40:05.900

```
$('#sub-nav').contents().filter(function(){
    return this.nodeType === 3; //text node type
}).eq(0).wrap("<h1></h1>"); 
```

# file - 终端只读取文件名的第一个字母

> ID：14754345
> 
> 赞同：1
> 
> 时间：2013-02-07T15:07:54.790
> 
> 标签：file, terminal, letter

这不是关于编码的问题，而是关于终端的问题。我以前从未遇到过这个问题，但是当我尝试执行要执行的文件名后面的脚本时，当我输入的文件名是字母时，终端会给我错误消息“没有这样的文件或目录'a'” 。文本文件。无论文件如何，它都会这样做，如果我输入文件 beta.txt 它找不到文件或目录“b”。

以前有人发生过这种情况吗？

澄清：我有一个 python 脚本 script.py，它接受一个文件作为参数，所以我在终端中输入：python script.py alphabet.txt 它给了我错误消息“nos such file or directory 'a' "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:42:54.127

是我的脚本出错了，我正在迭代文件名的字母而不是几个文件......

# java - 使用 OpenCMIS 在 SharePoint 2010 中设置/更新多个文档属性

> ID：14754348
> 
> 赞同：0
> 
> 时间：2013-02-07T15:08:01.863
> 
> 标签：java, sharepoint, metadata, cmis, opencmis

几乎“到处”都试图搜索这个，但找不到关于如何实现它的指针。请查看我的代码并提供有关如何使用 OpenCMIS 在 SharePoint 中设置/更新所有文档属性的建议。已使用 CMIS 成功创建了文档，但是我无法为不同的文档填充不同的值。

例如，a.pdf、b.pdf 具有不同的属性。因此，当我更新它们时，我希望从分配给它们的值数组映射该值，但目前，相同的值被附加到所有文档中......

请在下面查看我的代码，希望它会使事情更清楚：

```
 try {
                String [] nextLine =null;
                CSVReader reader = new CSVReader(new FileReader(indexFileLocation));
                List content = reader.readAll();

                for (Object o : content) {
                    nextLine = (String[]) o;
                    System.out.println("\n"+ nextLine[2] + "\n"+nextLine[7] + "\n"+ nextLine[6]);
                }
                //reader.close();
                Map <String, Object> newDocProps = new HashMap<String, Object>();
                newDocProps.put(PropertyIds.OBJECT_TYPE_ID, "cmis:document");
                newDocProps.put(PropertyIds.NAME, ff.getName());
                Document doc = newFolder.createDocument(newDocProps, contentStream, VersioningState.NONE);

                CmisObject cmisobject = (Document) session.getObject(doc.getId());
                Map<String, Object> pp = new HashMap<String, Object>();
                //pp.put(PropertyIds.OBJECT_ID, "Name");

                pp.put("WorkflowNumber", nextLine[7]);
                pp.put("InvoiceDate", nextLine[2]);

                cmisobject.updateProperties(pp); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:05:54.783

@Albert，您如何创建会话？这可能是会话创建的问题。请在此处粘贴您的代码以创建会话。

# file-upload - Microsoft.Web.Helpers FileUpload 自定义文本

> ID：14754352
> 
> 赞同：1
> 
> 时间：2013-02-07T15:08:19.683
> 
> 标签：file-upload, web, helpers

我在用`Microsoft.Web.Helpers.FileUpload`

```
 @FileUpload.GetHtml(
        name: "file", 
        initialNumberOfFiles: 1, 
        allowMoreFilesToBeAdded: false, 
        includeFormTag: false, 
        addText: "", 
        uploadText: "Upload Logo"
    ) 
```

当我运行我的应用程序时，它会显示一个按钮`'Choose File'`，并在按钮右侧显示文本， `'No File Chosen`然后当我选择一个文件时，它将替换为`'No File Chosen'`例如`'Example.jpg'`

我如何使它`'No File Chosen'`不显示？

# unit-testing - VS2012单元测试：如何更改TestResults文件夹的位置

> ID：14754354
> 
> 赞同：8
> 
> 时间：2013-02-07T15:08:23.900
> 
> 标签：unit-testing, visual-studio-2012

我的所有单元测试项目都在我的解决方案文件夹下的一个文件夹中，并且希望将 TestResults 文件夹与测试项目放在同一文件夹中，而不是在解决方案目录中。

我发现这可以通过测试查看文件来完成： [如何在 VS 2010 中指定单元测试结果的位置？](https://stackoverflow.com/questions/2908235/how-to-specify-the-location-for-the-unit-test-results-in-vs-2010)

但我也读到，使用 VS2012 你不应该再使用测试设置文件。实际上VS2012并没有创建一个。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-02T12:14:26.483

要为“TestSettings”文件夹指定不同的位置，`.runsettings`请按照 Visual Studio 文档中的说明将 a 添加到您的解决方案中：http: [//msdn.microsoft.com/en-us/library/vstudio/jj635153.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj635153.aspx)

我的`.runsettings`文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RunSettings>
  <RunConfiguration>
    <ResultsDirectory>.\Visual Studio Test Results</ResultsDirectory>
  </RunConfiguration>
</RunSettings> 
```

然而，据我所知，ResultsDirectory 的位置与解决方案文件夹无关（如文档中的示例文件所建议的那样），而是与`.runsettings`文件本身的位置相关。另请注意，`$(SolutionDir)`此处未展开 Visual Studio 宏之类的。总而言之，`.runsettings`文件与特定项目或解决方案无关。

他们推荐使用`.runsettings`文件而不是`.testsettings`较新版本的 Visual Studio 的原因也可以在文档中找到：http: [//msdn.microsoft.com/en-us/library/vstudio/ee256991.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee256991.aspx)

> 如果您使用**.testsettings**文件，MSTest 测试框架将用于运行您的测试。这运行得更慢，并且不允许您从第三方测试框架运行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T17:37:59.240

您可以创建一个小的 RunSettings 文件，它看起来像

```
 <RunSettings>
     <RunConfiguration>
        <ResultsDirectory>e:\myResultsFolder</ResultsDirectory>
     </RunConfiguration>
  </RunSettings> 
```

在运行测试之前，通过顶级菜单 Test->TestSettings->"Select Test Settings" 选择此设置文件。

[您可以在http://msdn.microsoft.com/en-us/library/jj635153.aspx](http://msdn.microsoft.com/en-us/library/jj635153.aspx)上找到更多详细信息。

# c++ - “对类型的非 const 左值引用无法绑定”错误与引用（类型＆）但不是指针（类型 *）

> ID：14754355
> 
> 赞同：5
> 
> 时间：2013-02-07T15:08:26.140
> 
> 标签：c++, pointers, reference, constants, lvalue

我收到此错误“输入'Cell'的非常量左值无法使用此代码绑定到'Cell *'类型的临时值：

```
class RegionHolder
{    
public:
    RegionHolder(Region& Region1):m_RegionCellNOO(&(Region1.m_NOO))
    ~RegionHolder();

protected:
    Cell & m_RegionCellNOO; // difference is here   
}; 
```

但不是这个：

```
class RegionHolder
{    
public:
    RegionHolder(Region& Region1):m_RegionCellNOO(&(Region1.m_NOO))
    ~RegionHolder();

protected:
    Cell * m_RegionCellNOO; // difference is here   
}; 
```

我不明白这个问题，真的很想使用引用而不是指针。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T15:37:46.643

您忘记向我们展示定义，但大概`Region1.m_NOO`是 type 的对象`Cell`。您的第一个示例是获取它的地址，并尝试使用生成的指针来初始化引用。引用不是从指针初始化的，而是从对象本身初始化的：

```
RegionHolder(Region& Region1):m_RegionCellNOO(Region1.m_NOO) {}
//                                            ^ no &         ^^ don't forget that 
```

使用引用而不是指针有一个警告：它们是不可分配的，因此您的类也不是。通常这不是问题。但是如果你确实需要你的类是可分配的，那么你需要使用一个指针来代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:24:00.083

一元运算`&`符获取指向变量的指针。因此，在 C++ 中（如在 C 中）`a = &b`获取指向`b`该值的指针并将其存储在 中`a`，因此如果`b`是 type `int`，则`a`需要是 type `int*`。另一方面，对引用的赋值是隐式的，所以如果 a 是类型`int&`，你只需要编写`a=b`来`a`引用`b`. 因此，在您的情况下，您需要将构造函数重写为

```
RegionHolder(Region& Region1):m_RegionCellNOO(Region1.m_NOO) {} 
```

但是，我认为在这里使用指针比使用引用更好，*并且*尝试使用 C++ 而不熟悉指针是一个非常糟糕的主意。所以我建议你花时间让自己对使用指针感到舒服，而不是试图避免它们。

# iphone - 如何在自定义单元格中点击以编程方式添加的 UiImageViews 推送新视图

> ID：14754356
> 
> 赞同：0
> 
> 时间：2013-02-07T15:08:28.997
> 
> 标签：iphone, objective-c, xcode, view, push

我想这样做，所以当我点击 UITableViewCell 中的图像时，它会推送一个新视图并显示一个您可以操作的 UIImageView（例如捏住它并展开它）。

目前，我正在使用一个自定义单元格，它以编程方式将图像添加到单元格中：

```
for (int i = 0; i < [self.news.imgURL count]; i++) {

        UIImageView *image = [[UIImageView alloc] init];
        [image setImageWithURL:[NSURL URLWithString:[self.news.imgURL objectAtIndex:i]]];
        [image setFrame:CGRectMake(20, (labelSize.height + 25 + 14) + (i * 280), 280, 280)];
        image.contentMode = UIViewContentModeScaleAspectFit;
        image.tag = 101 + i;
        image.userInteractionEnabled = YES;
        [self.contentView addSubview:image];

        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
        [tap setNumberOfTapsRequired:1]
        [image addGestureRecognizer: tap];
    } 
```

这位于我的 customcell.m 文件中。

如上面的代码所示，我使用了 GestureRecognizer，我可以使用以下代码检测图像的点击：

```
-(void) handleTap:(UITapGestureRecognizer *)recognizer {
    if (recognizer.state == UIGestureRecognizerStateEnded) {
        NSLog(@"Image tapped!", nil);
    }
} 
```

但我不知道如何从 customcell.m 文件中推送新视图。有没有办法从 customcell.m 文件中推送新视图，或者我必须从我的 masterviewcontroller 显式执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:05:30.003

这是使用委托的一个很好的用例。为您的自定义单元类定义一个委托协议。然后让您的表格视图控制器将自己设置为单元格的代表。你的协议应该有一个方法告诉代理一个图像被点击了。单元格和图像可以是委托方法的参数。

在您的单元格的`handleTap:`方法中，您可以检查委托是否响应协议方法，如果有，它会调用委托上的协议，传递自身（单元格）和点击的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:14:33.410

**在单元格点击方法或**中编写以下代码`didSelectRowAtIndexPath`

```
yourViewCon *vc = [[yourViewCon alloc] init];
[self presentModalViewController:vc animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:21:06.710

首先，您在您的`MyCustomCell.h`

```
@protocol MyCustomCellDelegate;
@interface MyCustomCell : UITableViewCell 
@property (nonatomic, weak) id <MyCustomCellDelegate> delegate;
- (void)someCustomMethod:(NSString*)stringForChangingSomethingInMyCell;
@end

@protocol MyCustomDelegate <NSObject>
@required
- (void)itemTappedForRow:(NSUIInteger)rowNumber;
@end 
```

在`MyCustomCell.m`中，您合成了委托：

```
@synthesize delegate = _delegate; 
```

在你的`handleTapMethod`：

```
// You can use self.tag to track rowNumbers
[_delegate itemTappedForRow:rowNumber]; 
```

同时在您的表格视图控制器中，您符合您刚刚定义的协议

```
@interface MyTableViewController : UITableViewController<MyCustomCellDelegate> 
```

并且您以这种方式在您的中创建单元格`cellForRowAtIndexPath`：

```
UITableViewCell *cell = [[MyCustomCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"yoBaby"];
cell.delegate = self;
cell.tag = indexPath.row;

return cell; 
```

最后，在 中`itemTappedForRow`，你推送一个新的视图控制器来为你做这些事情。我假设您正在使用导航控制器。

```
[self.navigationController pushViewController:yourNewViewControllerWithTheImageSelected animated:YES]; 
```

# android - 转换 android 图像 URI

> ID：14754358
> 
> 赞同：1
> 
> 时间：2013-02-07T15:08:31.713
> 
> 标签：android, uri

我得到以下类型的uri：

```
 /mnt/sdcard/Pictures/WW/ww_1360248819300.jpg 
```

如何将以上类型的 URI 转换为以下 URI：

```
 content://media/external/images/media/12 
```

请帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:30:25.350

```
public static Uri getImageContentUri(Context context, File imageFile) {
    String filePath = imageFile.getAbsolutePath();
    Cursor cursor = context.getContentResolver().query(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            new String[] { MediaStore.Images.Media._ID },
            MediaStore.Images.Media.DATA + "=? ",
            new String[] { filePath }, null);
    if (cursor != null && cursor.moveToFirst()) {
        int id = cursor.getInt(cursor
                .getColumnIndex(MediaStore.MediaColumns._ID));
        Uri baseUri = Uri.parse("content://media/external/images/media");
        return Uri.withAppendedPath(baseUri, "" + id);
    } else {
        if (imageFile.exists()) {
            ContentValues values = new ContentValues();
            values.put(MediaStore.Images.Media.DATA, filePath);
            return context.getContentResolver().insert(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
        } else {
            return null;
        }
    }
} 
```

# c++ - 如何从非 Qt C++ 库类向 Qt GUI 提供反馈？

> ID：14754359
> 
> 赞同：3
> 
> 时间：2013-02-07T15:08:33.650
> 
> 标签：c++, qt, signals-slots

我正在为一些计算密集型任务（机器视觉）开发一个 C++ 类库。

```
// I am a part of a Qt-agnostic library
class Cruncher
{
    /* ... */
public:
    void doStuff();
}; 
```

然后有一个使用该库的 Qt GUI。我正在创建一个工作线程来调用库中的繁重例程：

```
// I am a part of a Qt-based GUI which utilizes the library
class Worker : public QThread
{
    /* ... */
protected:
    virtual void run()
    {
        /* ... */
        Cruncher c;
        for (int i = 0; i < count; ++i)
            c.doStuff(); // takes some time, and while it's working 
                         // it should communicate status changes which should
                         // become visible in the GUI
    }
}; 
```

现在在 doStuff() 内部发生了很多事情，我想向用户提供一些关于正在发生的事情的反馈，而无需等待 doStuff() 返回。一方面，也许比在每次调用 doStuff() 后将仪表增加一步更精细的进度报告。此外，doStuff() 可能会遇到非关键故障，使其继续部分工作，但我希望在 Cruncher 工作时出现这种情况时在 GUI 中显示一条消息（并且 Worker 目前正忙于调用做东西（））。

我希望库保持独立于 Qt，所以我不愿意向 Cruncher 添加信号和插槽。当它不是 Qt 类时，还有什么其他方法可以让它向 GUI 提供反馈以报告它的工作？

我正在考虑创建一个 QTimer，它会在 Worker 运行时以固定的时间间隔轮询 Cruncher 的一些“状态”和“errorMsg”成员，但这似乎非常不理想。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:13:34.430

我发布了我自己的答案，因为虽然我接受了@Nim 的建议，但我希望答案更冗长一些，因此如果有人遇到同样的问题会更有用。

我在库中创建了消息调度程序的骨架：

```
// doesn't need to know about Qt
class MessagePort
{
public:
    virtual void message(std::string msg) = 0;
}; 
```

接下来，我向 Cruncher 添加了该对象的句柄，并通过偶尔调用 message() 来添加 doStuff()：

```
// now with Super Cow powers!
class Cruncher
{
protected:
    MessagePort *msgPort_;

public:
    Cruncher(MessagePort *msgPort) : msgPort_(msgPort) {}
    void doStuff()
    {
        while(...)
        {
            /*...*/
            msgPort_->message("Foo caused an overload in Bar!");
        }
    }
}; 
```

最后，我使用所有必要的 Qt 优点在 GUI 中制作了 MessagePort 的实现：

```
class CruncherMsgCallback : public QObject, public MessagePort
{
    Q_OBJECT

public:
    CruncherMsgCallback() : QObject(), MessagePort()
    {
        connect(this, SIGNAL(messageSignal(const QString &)), 
                GUI,    SLOT(messageShow(const QString &)), 
                Qt::QueuedConnection);
    }

    virtual void message(std::string msg)
    {
        emit messageSignal(QString::fromStdString(msg));
    }

signals:
    void messageSignal(const QString &msg);
}; 
```

最后，当 Worker 创建 Cruncher 的一个实例时，它还会给它一个指向正在工作的 MessagePort 的指针：

```
class Worker
{
protected:
    virtual void run()
    {
        CruncherMsgCallback msgC;
        Cruncher c(&msgC); // &msgC works as a pointer to a 
                           // generic MessagePort by upcasting
        c.doStuff(); // Cruncher can send messages to the GUI 
                     // from inside doStuff()
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:11:37.783

使用回调函数（类）等，并在构造过程中将其传入。您需要报告的事情，通过该回调报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:22:19.667

您可以安全地从该方法发出信号`run()`，我认为这是将信息从工作线程传递到主线程的最佳方式。只需将信号添加到您的 QThread 子类（如果您完全不确定 QThread 线程如何工作，请避免添加插槽）。

最好使来自这些信号的连接显式排队，以避免出现问题。虽然默认的自动连接类型也应该可以工作并发出排队信号，但我认为在这种情况下最好是明确的。实际上，直接信号也应该这样工作，但是您必须自己处理线程安全，而不是让 Qt 为您处理它，并且您无法连接到使用任何仅在 main 中工作的 QtGui 类的插槽线程，所以最好坚持排队连接。

要将简单的信息传递给`run()`方法，并且如果不需要立即响应，则可以使用一些共享`QAtomicInt`变量或类似的东西作为标志，工作线程在方便时会检查它们。稍微复杂一点的方法，仍然需要轮询，是拥有你用互斥锁保护的共享数据结构。与该方向通信的更复杂的方式将涉及某种消息队列（就像 Qt 在主线程的事件循环中使用的那样，当您向该方向发出信号时）。

# vb.net - vb.net 多线程

> ID：14754360
> 
> 赞同：0
> 
> 时间：2013-02-07T15:08:33.657
> 
> 标签：vb.net

我一直在为系统编写一些代码，并且需要在 VB.NET 中使用线程而不是普通计时器。

它工作正常，但问题在于闪烁时间，当单击按钮时它会按预期闪烁，如果在测试中多次单击它，则闪烁时间大致乘以原始睡眠线程时间（750ms），这继续每次点击都会发生。

我该怎么做才能使眨眼不加快？下面是代码！

```
 Private _flash As Boolean = False

    Private Sub btnButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnButton1.Click
        _flash = True
        Dim FlashThread As New Thread(New ThreadStart(AddressOf FlashLabel))
        FlashThread.Start()

    End Sub

    Private Sub FlashLabel()

        Dim _color As Color = Color.Gray    

        While _flash

              If label1.ForeColor.Equals(_color) Then
                    label1.ForeColor = Color.Red
              Else
                    label1.ForeColor = Color.Gray

              System.Threading.Thread.Sleep(750)

        End While
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:13:59.620

每次单击按钮时，您都在启动一个新线程，因此如果您单击两次按钮，它将启动两个线程，这两个线程都以 750 毫秒的间隔切换颜色，因此看起来好像有一个线程在做它快两倍。解决此问题的一种简单方法是，如果`_flash`已设置标志，则简单地跳过启动新线程，例如：

```
Private Sub btnButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnButton1.Click
    If Not _flash Then
        _flash = True
        Dim FlashThread As New Thread(New ThreadStart(AddressOf FlashLabel))
        FlashThread.Start()
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:15:41.743

您永远不会取消原始线程，因此当您再次单击该按钮时，您现在有两个线程正在运行并导致闪烁发生。

因此，您可以在另一个操作中取消线程，也可以仅在第一次启动线程后将 _flash 设置为 true 和 false。

# jquery - jQuery; 为每个元素设置默认选项

> ID：14754364
> 
> 赞同：1
> 
> 时间：2013-02-07T15:08:36.933
> 
> 标签：jquery, animation, parameters

主要是关于动画；

我有几个具有不同动画的元素，可以使用它们自己的独特设置显示或隐藏它们；带有轻微弹跳的弹出式菜单、淡入/淡出的菜单等。

几个按钮/小部件/事件将隐藏/显示这些元素，我想避免为每个潜在调用复制 hide() 或 show() 中的选项。我也不想在某处跟踪默认选项列表；我想在初始化时设置它们的动画设置，因此以后的任何脚本都不需要担心传入选项。

有没有办法保存选择目标的默认选项？就像是...

```
$('#foo').setDefaultOptions('hide', {/* New Defaults */});
// or...
$('#foo').hide.defaults = {/* New Defaults */}; 
```

所以调用下面将只使用这些选项而无需进一步输入：

```
$('#foo').hide(); // Uses those default values set earlier 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:12:32.493

用于`.data()`在创建对象后设置对象本身的选项。然后，创建您自己的版本，`.hide()`并`.show()`从中获取选项`.data()`。

```
// define custom hide function that retrieves default options
$.fn.myHide = function() {
   this.each(function() {
       var item = $(this);
       item.hide(item.data("animOptions"));
   });
   return this;
}

// set default options once
$("#foo").data("animOptions", {...});

// from then on, just call the method and it uses the object-specific default options
$("#foo").myHide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:12:52.930

是和不是。您可能会修补所有这些方法以允许默认值，但是自己传递选项更有意义。

```
$("#foo").data("hide", { /* defaults here */});

// later on...
var $foo = $("#foo"), options = $foo.data("hide");
$foo.hide(options); 
```

如果您修补方法以在存在数据选项的情况下自动执行此部分，那么未来的开发人员（或一段时间后的您自己）可能很难弄清楚为什么调用`.hide()`会导致动画，而它不应该。

# apache - Mod重写规则混乱

> ID：14754367
> 
> 赞同：0
> 
> 时间：2013-02-07T15:08:39.937
> 
> 标签：apache, .htaccess

我想在我的网站上做一些规则，特别是一些

```
xxxx.com/administration/

xxxx.com/administration/users/

xxxx.com/administration/devices/ 

xxxx.com/administration/payments/ 
```

我正在尝试获取它，因此在管理页面上有一些文本和指向其他 3 个页面的链接，但是我尝试的任何规则即使 URL 实际发生变化，它们也只会显示相同的页面，所以我假设规则是'没有被跟踪

我目前正在尝试以下 - 我已经阅读了一些规则，但我会在这里声明我不是他们的专家，所以请记住这一点。

```
RewriteRule administration/ administration.php
RewriteRule administration/users/ administrationusers.php
RewriteRule administration/devices/ administrationdevices.php
RewriteRule administration/payments/ administrationpayments.php 
```

我也尝试过以下规则

```
RewriteRule administration/ adminfiles/administration.php
RewriteRule administration/(.*)/ adminfiles/$1.php
RewriteRule administration/(.*) adminfiles/$1.php 
```

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:12:43.523

这是您应该使用的基本 .htaccess 文件。

```
RewriteEngine On
RewriteBase /
RewriteRule ^administration/?$          adminfiles/administration.php [L]
RewriteRule ^administration/([\w-]+)/?$     adminfiles/administration$1.php [L] 
```

请注意，您的网站**必须**位于根文件夹中（例如，对于 Wamp：wamp/www/）。

如果它在子文件夹中，请使用`RewriteBase /myfolder/`（例如，对于 Wamp：wamp/www/myfolder/）

# maven-3 - Maven 3 ciManagement 配置的目的是什么？

> ID：14754372
> 
> 赞同：15
> 
> 时间：2013-02-07T15:08:48.697
> 
> 标签：maven-3

我已经阅读了[Maven 文档中](http://maven.apache.org/pom.html#Continuous_Integration_Management)的部分，但我还没有真正看到任何插件`<ciManagement>`在项目 POM 中使用标签的证据。

我的问题是：

*   是否有 CI 系统会以某种智能方式使用这些信息？
*   除了项目自我文档之外，在我的项目 POM 中指定和维护这些信息还有其他好处吗？
*   Maven 本身（或任何常见的插件）是否使用此信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T22:27:43.463

文档示例[http://maven.apache.org/plugins/maven-compiler-plugin/integration.html](http://maven.apache.org/plugins/maven-compiler-plugin/integration.html)

从历史上看，这个元素被 continuum 使用以获取更多详细信息，请参阅[http://maven.apache.org/ref/3.0.4/maven-model/maven.html#class_ciManagement](http://maven.apache.org/ref/3.0.4/maven-model/maven.html#class_ciManagement)可以定义 pom 通知程序（邮件、irc）和在哪里发送通知。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-11T18:09:25.113

[SonarQube](http://www.sonarqube.org/) uses the `<ciManagement>` element of the pom to define the value of its own `sonar.links.ci` configuration property. This property is mentioned in the [SonarQube documentation](http://docs.codehaus.org/display/SONAR/Project+Administration), but there's no explanation about what is it used for. It turns out it's one more thing to keep up-to-date. I would try to remove it from the pom to see if any visible issue comes up.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-09T11:40:58.023

您可以[在此处](https://github.com/apache/maven-plugins/blob/a9566e14f980ff52f3ee3c89d64d6b98b03c0305/maven-project-info-reports-plugin/src/main/java/org/apache/maven/report/projectinfo/CiManagementReport.java#L129-L170)查找有关哪些类型`<ciManagement/>`有效的数据。

可能有比指向该哈希更好的方法，但是`maven-plugins`repo 的工作方式很奇怪。

# c# - 在 iTextSharp 中设置 AcroFields 的“textfont”属性时出现空异常

> ID：14754373
> 
> 赞同：0
> 
> 时间：2013-02-07T15:08:52.377
> 
> 标签：c#, pdf, itextsharp, itext

在使用 iTextSharp 更改现有 PDF 文档中 AcroForm 字段的字体时，我在设置“textfont”属性的行遇到空指针异常。不过，我可以使用相同的代码设置字段的值。我按照以下示例创建了我的代码 [https://stackoverflow.com/questions/14748901/custom-font-not-getting-applied-on-existing-pdf-template-itextsharppdfstamper](https://stackoverflow.com/questions/14748901/custom-font-not-getting-applied-on-existing-pdf-template-itextsharppdfstamper)

我的堆栈跟踪如下所示：

```
at iTextSharp.text.pdf.PdfContentByte.SaveColor(BaseColor color, Boolean fill)
at iTextSharp.text.pdf.PdfContentByte.SetRGBColorFill(Int32 red, Int32 green, Int32 blue)
at iTextSharp.text.pdf.PdfContentByte.SetColorFill(BaseColor value)
at iTextSharp.text.pdf.AcroFields.SetFieldProperty(String field, String name, Object value, Int32[] inst)
at iTextSharpUsage.Utilities.UpdateFontUsingEmbededFont(String inputPdf, String resultPdf) in D:\iTextSharpUsage\iTextSharpUsage\iTextSharpUsage\Utilities.cs:line 229 
```

我的代码如下所示：

```
var pdfReader = new PdfReader(inputPdf);
string fontsfolder = @"D:\Airmole\airmole.ttf";
var pdfStamper = new PdfStamper(pdfReader, new FileStream(resultPdf, FileMode.Create));
BaseFont customfont = BaseFont.CreateFont();
AcroFields af = pdfStamper.AcroFields;
List<BaseFont> list = new List<BaseFont>();
list.Add(customfont);
iTextSharp.text.Font bold = new iTextSharp.text.Font(customfont, 13,0,BaseColor.BLACK);
af.SubstitutionFonts = list;
foreach (var field in af.Fields)
{
    af.SetField(field.Key, "s");
    //this line works fine
    bool isSuccess = pdfStamper.AcroFields.SetFieldProperty(field.Key, "textcolor ", BaseColor.BLACK , null);
    //the line bellow throws a null pointer exception
    bool isSucces1s = pdfStamper.AcroFields.SetFieldProperty(field.Key, "textfont", customfont, null);
} 
```

我是否必须添加更多代码才能使其正常工作？

在这里快速更新...感谢@Bruno 发布的评论，我解决了问题，此功能在版本 5.3.3 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:51:59.643

由于您没有共享 PDF，因此我对创建的一些 PDF 进行了一些测试。我发现了一个案例，其中`/NeedAppearances`设置为*true*的表单中的预填充字段没有被展平（它们只是作为空字段出现）。我想我总是使用*错误*`/NeedAppearances`的表单（这是默认设置），因此从未遇到过问题。我解决了这个问题：http: [//sourceforge.net/p/itext/code/5682/](http://sourceforge.net/p/itext/code/5682/)

 *修复将在下一个版本中。*

# twitter-bootstrap - Bootstrap TypeAhead 2.2.2

> ID：14754377
> 
> 赞同：0
> 
> 时间：2013-02-07T15:09:01.700
> 
> 标签：twitter-bootstrap, asp.net-mvc-4, knockout.js, bootstrap-typeahead

I'm using twitter bootstrap 2.2.2 for my MVC web app. I'm trying to have a auto-complete functionality. TypeAhead seems pretty close to what I want to do but I'm unable to find how to use it for complex object along with Ajax data source. I've seen couple of typeahead forks on github but that don't seem to work with bootstrap 2.2.2\.

I really don't see the use of this control if its not meant to be for complex entities though I'm sure this can't be the case and I've read bootstrap 2.2.2 does support ajax but I m unable to figure out howto use it. Any guidance in this regard will be much appreciated.

# java - GSON mapping null value for POJO properties

> ID：14754383
> 
> 赞同：1
> 
> 时间：2013-02-07T15:09:14.873
> 
> 标签：java, json, gson

I'm trying to use GSON 2.2.2 (for the very first time) to map JSON into a Java POJO. I'm hitting a 3rd party RESTful web service and this is an example of the JSON I'm getting back:

```
{
    "response": {
        "job":{
            "eta":-1,
            "status":"approved",
            "mt":1,
            "lc_tgt":"fr",
            "body_src":"Please translated me.",
            "body_tgt":"S'il vous plaît traduire moi.",
            "unit_count":3,
            "tier":"machine",
            "credits":0,
            "ctime":"2013-02-07 14:56:12.391963",
            "lc_src":"en",
            "slug":"0",
            "job_id":"NULL"
        }
    },
    "opstat":"ok"
} 
```

The POJO I'm trying to map this into is:

```
public class Job {
    // correlates to "eta"
    private int eta;

    // correlates to "body_src"
    private String sourceBody;

    // correlates to "ctime"
    private java.util.Date creationTimestamp;

    // Getters and setters for all 3 properties
} 
```

When I run the following code, I don't get any exceptions, but the print statement just prints "`null`":

```
// Hit the 3rd party service and get the JSON (example above).
JSONObject json = hitRestfulWebService();

Gson gson = new Gson();

// json.toString = "{response":{"job":{ ..."
Job job = gson.fromJson(json.toString(), Job.class);

System.out.println(job.getSourceBody()); 
```

My only guess is that GSON can't figure out how to map the 3 JSON fields to my 3 `Job` properties. Can someone help me figure out what this mapping needs to be? Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:52:24.380

您可以使用注释来定义，哪个 json 字段映射到哪个对象成员，例如：

```
class SomeClass
{
   @SerializedName("body-src")
   String myString1;

   @SerializedName("header-src")
   String myString2;
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:20:41.780

不使用响应，而是使用 response.job

不是

```
 {   "response": {.. 
```

利用

```
 { "eva": .. 
```

这可能会有所帮助；

```
 String a = "{\"response\": {\"job\":{\"eta\":-1,\"status\":\"approved\",\"mt\":1,\"lc_tgt\":\"fr\",\"body_src\":\"Please translated me.\",\"body_tgt\":\"S'il vous plaît traduire moi.\",\"unit_count\":3,\"tier\":\"machine\",\"credits\":0,\"ctime\":\"2013-02-07 14:56:12.391963\",\"lc_src\":\"en\",\"slug\":\"0\",\"job_id\":\"NULL\"}},\"opstat\":\"ok\"}";

    Job j = I.gson().fromJson(
            ((JsonObject) ((JsonObject) new JsonParser().parse(a)).get("response")).get("job"), Job.class);

    System.out.println(j.getEta()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:46:39.700

```
public class Response{
  private Job job;

  //generate setter and getter
}

public class Job {
    // correlates to "eta"
    private int eta;

    // correlates to "body_src"
    private String sourceBody;

    // correlates to "ctime"
    private java.util.Date creationTimestamp;

    // Getters and setters for all 3 properties
} 
```

现在在格森

```
JSONObject json = hitRestfulWebService();

Gson gson = new Gson();

// json.toString = "{response":{"job":{ ..."
Job job = gson.fromJson(json.toString(), Response.class); 
```

# android - onGlobalLayout 中返回了错误的视图大小

> ID：14754391
> 
> 赞同：2
> 
> 时间：2013-02-07T15:09:40.140
> 
> 标签：android, view, statusbar

我有一个应用程序，用户可以在其中拍照或从图库中选择图片。在下一页上，我使用`onGlobalLayout`来确定 a 的大小`View`。当用户从图库中选择图片时，`View`尺寸会正确返回`onGlobalLayout`。但是，当用户拍照时，`Status Bar`顶部的 是不可见的。当下一个活动出现时，`Status Bar`从顶部滑入会改变屏幕大小，但`onGlobalLayout`不会考虑这一点，因此会返回错误的视图大小。

这似乎是 Android 的一个错误，我正在考虑提交错误报告。但是，有人对此有任何解决方法吗？

例子：

```
public class MyView extends View implements OnGlobalLayoutListener {

    @Override
    public void onGlobalLayout() {
        Log.d("MyView", "Width: " + getWidth());
        Log.d("MyView", "Height: " + getHeight());
    }
} 
```

上面的代码将返回两个不同的宽度和高度，具体取决于我返回的屏幕是否有状态栏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:45:42.860

您可以在您的视图中覆盖`fitSystemWindows`以获取大小`StatusBar`并相应地计算您的视图大小，请参阅[我的答案here](https://stackoverflow.com/questions/12804463/systembar-width-on-tablets)作为示例。

另一种解决方案，但不太通用且更麻烦，是根据预定义的[状态栏高度](https://stackoverflow.com/questions/3600713/size-of-android-notification-bar-and-title-bar)列表调整大小，因为 android 根据设备屏幕密度为状态栏设置了固定大小。

我认为这不是android中的错误。

# windows-phone-7 - Apart from device & vs2012 is there Any Alternative way to test a windows phone app?

> ID：14754392
> 
> 赞同：0
> 
> 时间：2013-02-07T15:09:41.780
> 
> 标签：windows-phone-7, microsoft-metro, windows-phone-8, windows-phone-8-emulator

i am new to windows phone app development , i wanted to know

if is there any other **alternative way** to test a windows phone app apart from testing in a windows phone device and testing vs2012 built in emulator ???

1) The reason i have asked like these that i wanted to know if i can download a windows phone emulator separately and test my app in it.

2)Am i missing any other alternative provided ?

Please let me know.

Thanks in Advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:16:51.367

不，这些是您的选择。您可以在没有 VS 的情况下启动模拟器，并且可以通过命令行工具将应用程序部署到其中，但如果不安装 VS2012 的 WP SDK，您将无法获得任何这些。但既然这都是免费的，那有什么大不了的吗？

您可以将您的应用程序作为测试版提交到商店，并邀请用户在他们的手机上测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:18:29.550

这篇文章可能有用，尽管它仍然需要 .NET 框架和一些其他依赖项（但我认为如果不使用它们你永远不会逃脱）：

> [http://www.codeproject.com/Articles/31861/Windows-Mobile-Development-Without-Visual-Studio](http://www.codeproject.com/Articles/31861/Windows-Mobile-Development-Without-Visual-Studio)

# c++ - 多重继承中如何实现同名虚函数

> ID：14754393
> 
> 赞同：7
> 
> 时间：2013-02-07T15:09:43.153
> 
> 标签：c++, multiple-inheritance

有如下代码

```
// A has a virtual function F().
class A
{
public:
    virtual void F() {};
};

// The same for B.
class B
{
public:
    virtual void F() {};
};

// C inherits A and B.
class C : public A, public B
{
public:
    // How to implement the 2 virtual functions with the same name but from
    // different base classes.
    virtual F() {...}
}; 
```

请注意，基类中有 F() 的默认实现。

感谢 Jan Herrmann 和 Spook。如果我们必须使用一些额外的助手，下面是一个更简单的解决方案吗？

```
#include <iostream>

// A has a virtual function F().
class A
{
private:
    virtual void A_F() {}

public:
    void F() {return A_F();};
};

// The same for B.
class B
{
private:
    virtual void B_F() {}

public:
    void F() {return B_F();};
};

// C inherits A and B.
class C : public A, public B
{
private:
    virtual void A_F() {std::cout << "for A\n";}
    virtual void B_F() {std::cout << "for B\n";}

};

int main()
{
    C c;
    c.A::F();
    c.B::F();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:25:55.587

```
class C_a 
  : public A
{
  virtual void F_A() = 0;
  virtual void F() { this->F_A() };
};

class C_b
  : public B
{
  virtual void F_B() = 0;
  virtual void F() { this->F_B() };
};

class C
  : public C_a
  , public C_b
{
  void F_A() { ... }
  void F_B() { ... }
}; 
```

如果我没记错的话，ISO 委员会考虑过这个问题并讨论了语言的变化。但是后来......有人找到了解决这个问题的好方法:-)

如果您能够更改类层次结构，您的第二个解决方案会更好。您可以在[http://www.gotw.ca/publications/mill18.htm](http://www.gotw.ca/publications/mill18.htm)锁定以了解为什么它更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:18:01.270

试试这个：

```
#include <cstdio>

class A
{
public:
    virtual void F() = 0;
};

class B
{
public:
    virtual void F() = 0;
};

class C : public A, public B
{
    void A::F()
    {
        printf("A::F called!\n");
    }

    void B::F()
    {
        printf("B::F called!\n");
    }
};

int main(int argc, char * argv[])
{
    C c;
    ((A*)(&c))->F();
    ((B*)(&c))->F();

    getchar();

    return 0;
} 
```

但请考虑到，您将无法从 C 的实例调用 F（模棱两可的调用）。

此外，F在 A 和 B*中*必须是抽象的，否则会出现编译错误：

```
Error 1 error C3240: 'F' : must be a non-overloaded abstract member function of 'A' 
```

# c# - UDP reception in windows 7.x mobile

> ID：14754396
> 
> 赞同：0
> 
> 时间：2013-02-07T15:09:44.880
> 
> 标签：c#, windows, mobile

I am having an issue with Windows Mobile.

I was writing a code for recieving UDP data from a windows server Aplication (created by me), which broadcasts data, but, when the windows application executes, I am encoutering a terrible issue:

> An invalid argument was supplied

when the socket `ReceiveFromAsync()` funciton works.

Can anyone help me please?

--- this is the code

```
public string Receive(int portNumber)
        {
            string response = "Operation Timeout";
            // We are receiving over an established socket connection
            registerSocket();
            if (_socket != null)
            {
                // Create SocketAsyncEventArgs context object
                SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
                socketEventArg.RemoteEndPoint = new IPEndPoint(IPAddress.Any, portNumber);
                // Setup the buffer to receive the data
                socketEventArg.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);
                // Inline event handler for the Completed event.
                // Note: This even handler was implemented inline in order to make this method self-contained.
                socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
                {

                    if (e.SocketError == SocketError.Success)
                    {
                        // Retrieve the data from the buffer
  response = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);
                        response = response.Trim('\0');
                    }
                    else
                    {
                        response = e.SocketError.ToString();
                    }
                    _clientDone.Set();
                    _socket.ReceiveFromAsync(socketEventArg);
                });
                // Sets the state of the event to nonsignaled, causing threads to block
                _clientDone.Reset();

                // Make an asynchronous Receive request over the socket
                **_socket.ReceiveFromAsync(socketEventArg);**   // here the issue arises An     //invalid argument was supplied
                // Block the UI thread for a maximum of TIMEOUT_MILLISECONDS milliseconds.
                // If no response comes back within this time then proceed
                _clientDone.WaitOne(TIMEOUT_MILLISECONDS);
            }
            else
            {
                response = "Socket is not initialized";
            }
            return response;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T14:20:04.613

我找到了解决方案。

要接收 Udp 多播，您应该`_socket.Bind(IPEndpoint)`在接收之前调用并使用`_socket.ReceiveAsync()`而不是`_socket.ReceiveFromAsync()`. 也`socketEventArg.RemoteEndpoint`应该是空的。

这段代码对我有用：

```
 _socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

        SocketAsyncEventArgs args = new SocketAsyncEventArgs();
        args.SetBuffer(new byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);
        args.Completed += args_Completed;

        _socket.Bind(new IPEndPoint(IPAddress.Any, **your port**));
        _socket.ReceiveAsync(args); 
```

# html - floating images 2 x 2

> ID：14754397
> 
> 赞同：0
> 
> 时间：2013-02-07T15:09:45.607
> 
> 标签：html, css

I am using Joomla, [Phoca Gallery](http://www.phoca.cz/phocagallery) Image Component and [Phoca Callery module](http://www.phoca.cz/documents/11-phoca-gallery-image-module/40-parameters). It is not actaully the question about Joomla, but about CSS. Plugin creates gallery with 4 images. Those images should create 2 x 2 grid, using float:left.

Here is what I have as a result: [http://jsfiddle.net/qAx7c/](http://jsfiddle.net/qAx7c/) (original link: [http://renathy.woano.lv/index.php/lv/par-mums-2](http://renathy.woano.lv/index.php/lv/par-mums-2))

```
.block {        
border:1px solid  #342e2b;
border-radius:7px;
padding: 12px 22px 12px 22px;
}

.block-box2 div.content-main {
  width:50%;
  display:inline-block;
 float:left; 
}

.block-box2 div.content-sidebar2 {
  width:49.99%;
  float:right;    
 }

/* float clearing for IE6 */
 * html .clearfix{
 height: 1%;
   overflow: visible;
}

 /* float clearing for IE7 */
 *+html .clearfix{
  min-height: 1%;
 }

/* float clearing for everyone else */
 .clearfix:after{
  clear: both;
  content: ".";
  display: block;
  height: 0;
  visibility: hidden;
  font-size: 0;
 }

/* FIXes */
#phocagallery-module-ri .phocagallery-box-file {
padding: 0 !important;
background: none !important;    
}

#phocagallery-module-ri .phocagallery-box-file-first {
   background: none !important;   
} 

#phocagallery-module-ri {
    margin-left: 40px !important;
}

#phocagallery-module-ri div.mosaic a img {
    border: 1px solid #342e2b !important;
    /*border: none !important;*/
}

 #phocagallery-module-ri div.mosaic a img, #phocagallery-module-ri div.mosaic img {
    -webkit-box-shadow: none !important;   
box-shadow: none !important;
}

<div class="block block-box2 clearfix">            
<div class="content-main">
    <div class="item-page">
        <h2>Par mums</h2>

        Some text here 
                Some text here  
    </div>
</div>
<div class="content-sidebar2">            
    <div id="phocagallery-module-ri" style="text-align:center;">
        <center style="padding:0px;margin:0px;">
            <div class="mosaic" style="float:left;padding:5px;width:170px">
                <a class="modal-button" title="Atmosfēra" href="">
                    <img src="phoca_thumb_m_parmums_telpas.jpg" alt="Atmosfēra" width="170" height="150">
                </a>
            </div>

            <div class="mosaic" style="float:left;padding:5px;width:170px">
                <a class="modal-button" title="Par mums" href="#">
                    <img src="phoca_thumb_m_parmums_atmosfera.jpg" alt="Par mums" width="170" height="149">
                </a>
            </div>

            <div class="mosaic" style="float:left;padding:5px;width:170px">
                <a class="modal-button" title="Par mums" href="#">
                    <img src="phoca_thumb_m_parmums_dzerieni.jpg" alt="Par mums" width="170" height="150">
                </a>
            </div>

            <div class="mosaic" style="float:left;padding:5px;width:170px">
                <a class="modal-button" title="Par mums ārpusē" href="#">
                    <img src="phoca_thumb_m_parmums_izskats.jpg" alt="Par mums ārpusē" width="170" height="150">
                </a>
            </div>
        </center>
    </div>
    <div style="clear:both"></div>    
</div> 
```

As you see, one image is not floating correctly. The code of div phocagallery-module-ri is generated automatically. I tried to change width, marings, paddings of images and divs, but nothing helps - one image is floating incorrectly, however it seems that everything should be fine. Can you, please, give me some ideas, why this floating is broken?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:16:14.093

第一张图片的代码是：

```
<img src="/images/phocagallery/par_mums/thumbs/phoca_thumb_m_parmums_telpas.jpg" alt="Atmosfēra" width="170" height="150"> 
```

第二张图片的代码是：

```
<img src="/images/phocagallery/par_mums/thumbs/phoca_thumb_m_parmums_atmosfera.jpg" alt="Par mums" width="170" height="149"> 
```

他们有不同的高度（ 150 和 149 ），这就是原因。

将第二个图像的高度更改为`150`将可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:14:17.407

问题是第二张图片没有第一张高。因此，第二个浮动在第一个旁边，但第三个也浮动到第一个左侧，留下一个间隙。第四个不适合第三个，所以它换行。

所以这就是原因。现在对于解决方案，我不是 CSS 专业人士，所以我不能说以下哪种解决方案是最好的，也不能说是否有另一种更好的解决方案。

一种解决方案是将每个图像嵌入一个具有固定高度的容器中，或者至少每个图像具有相同的高度。

其他可能的解决方案是使用 CSS 表格样式。第三，`clear:both`在每第二张图片之后添加一个元素（因为你只想要一行中的两个）会破坏浮动。

鉴于网站的性质和图库中的图片，您还可以选择使每个缩略图图像大小相同。这也将通过消除问题的触发器来解决它。

# jar - jython ImportError: No module named

> ID：14754402
> 
> 赞同：4
> 
> 时间：2013-02-07T15:09:49.670
> 
> 标签：jar, jython, importerror

I'm new to jython and failing utterly at importing a java class within a jar.

What I am trying to do is write a wrapper shell script which calls a jython script. I can not allowed to edit the jython at all, so adding jars to sys.path within that jython script is not possible.

Error y", line 17, in from com.polarland.testModule.cache import CacheInterface ImportError: No module named polarland

I've added the jar which contains the above package with name of TestModule.jar to PATH, ClASSPATH and JYTHONPATH with no avail. I'm worried this is due to the name of the jar but am not sure.

Any advice would be greatly appreciated!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:48:25.540

在您的 shell 脚本中使用：

```
export CLASSPATH=TestModule.jar:$CLASSPATH
jython ... 
```

在我的情况下，设置`CLASSPATH`就足够了。请记住使用完整路径名并记住使用好的 .jar 名称（`testmodule.jar`并且`TestModul.jar`不同）。也许您使用了错误的文件权限。尝试`file`命令以检查您是否可以读取该文件。我使用的一个罐子的例子：

```
mn$ file junit-4.1.jar
junit-4.1.jar: Zip archive data, at least v2.0 to extract 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T20:30:40.920

我遇到了同样的问题。

我尝试了以下功能并且效果很好！

```
>>> import sys 
>>> sys.path.append('/path/to/helloworld.jar')
>>> from com.leosoto import HelloWorld 
```

欲了解更多信息：

[http://blog.leosoto.com/2008/07/jython-import-logic.html](http://blog.leosoto.com/2008/07/jython-import-logic.html)

# java - does java provide a built-in static String.Compare method?

> ID：14754406
> 
> 赞同：15
> 
> 时间：2013-02-07T15:10:06.317
> 
> 标签：java, string, static, compare

when comparing strings I prefer not to rely on instance methods lest the string on which the method is called happens to be null. In .NET I just use the static String.Compare(string, string, bool) method. does java provide a similar built-in "null-safe" string compare utility or do I have to implement my own?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T15:15:45.953

不，JDK 不包含此类实用程序。但是有几个外部库可以做到这一点。例如`org.apache.commons.lang.StringUtils`提供 null-safe`equals(String, String)`和`equalsIgnoreCase(String, String)`. Guava 也有类似的实用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:29:19.980

String**确实**提供了一个[compareTo 方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)，它无论如何都不是 null 安全的（即，在实际调用对象上的 comapreTo 方法之前，您需要检查 null 值）。

您可以做的是像这样编写自己的比较器

```
class StringComparator implements Comparator<String> {

    public int compare(String s1, String s2) {
        if (s1 != null) {
            return s1.compareTo(s2);
        } else {
            if (s2 == null) {
                return 0;
            } else {
                return -1;
            }
    } 
```

要验证该属性，只需执行以下操作：

```
Comparator<String> comp = new Comparator<String>();
System.out.println(comp.compare(s1, s2); 
```

我实际上*并没有*测试代码，因此将其作为一般示例。好处是，即使您无论如何都需要检查空值，您也可以编写一次并多次使用它。

您还可以查看String 类中[的内置 Comparator 。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T15:17:31.987

没有。[Apache Commons](http://commons.apache.org/)这样[`StringUtils.equals()`](http://commons.apache.org/lang/api-2.5/src-html/org/apache/commons/lang/StringUtils.html#line.655)做：

```
public static boolean equals(String str1, String str2) {
    return str1 == null ? str2 == null : str1.equals(str2);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T15:36:47.450

如果要比较的字符串之一是一个常量，则可以`equals`在它处理时使用`null`。

```
if("string".equals(mystring)) {
    // do something
} 
```

如果您有 2 个变量，那么您可以编写自己的静态方法：

```
public static boolean stringEquals(String s1, String s2) {
    if (s1 == null) {
        return s2 == null;
    }
    return s1.equals(s2);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T20:11:10.380

这里有一个类似的问题 [如何简化空安全的 compareTo() 实现？](https://stackoverflow.com/questions/481813/how-to-simplify-a-null-safe-compareto-implementation)

明智地建议使用 Apache Commons`ObjectUtils`类

```
result = ObjectUtils.compare(left, right); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T15:14:49.323

我想答案是否定的，您可能必须先检查一下

```
if(myString != null && myString.equals("string")) {
    // do something
} 
```

[这里还有一些例子](https://stackoverflow.com/questions/2920525/how-to-check-a-string-against-null-in-java)

正如其他人指出的 Apache Commons 有这个，还有 Spring：

[StringUtils.hasLength()](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/util/StringUtils.html#hasLength%28java.lang.CharSequence%29)

```
if(StringUtils.hasLength(myString)) {
    // do something
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-07T15:26:00.350

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo(java.lang.String))

有一个返回 int 的比较。还有返回布尔值的equals。如果您有一个字符串实例，它应该能够执行。如果你通过 instance.equals(null) 它将返回 false。如果您的实例为空，那么您将获得一个空指针。

```
public class App
{

public static void main( String[] args )
{
    String myString = "test";

    if(myString.equals(null))
    {
        System.out.println("Its NUll");
    }else
    {
        System.out.println("Not Equal");
    }

}

} 
```

# perl - 什么 Perl 模块可以捕获任何和所有网页数据，而不管数据如何显示？

> ID：14754411
> 
> 赞同：2
> 
> 时间：2013-02-07T15:10:19.040
> 
> 标签：perl, perl-module

我正在寻找一个模块来捕获显示在浏览器（如 Firefox）中的所有数据。它需要捕获所有`CSS/JS/AJAX`数据。我尝试使用`LWP::UserAgent`which 是一些如何不捕获所有数据的方法。

如果您想查看我正在查看的网页是：

```
http://finance.yahoo.com/q?s=SAPE&ql=1 
```

您可以看到他们的菜单栏（主页、投资、新闻、个人理财等）下方有一个水平栏，其中包含日期和时间信息，例如：

2013 年 2 月 6 日，星期三，美国东部标准时间晚上 8:10 - 美国市场休市

这可以在任何浏览器中看到，但是当 Perl 获取网页时，日期、时间以及市场是否开放或关闭不在捕获的数据中。

我是否需要使用 Wireshark 来嗅探我需要的东西，或者是否有一个模块可以复制浏览器并捕获这些数据，或者有更好的方法吗？

我以为`LWP::UserAgent`捕获了所有数据，但显然我错了..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:36:30.803

如果你拿页面的“查看源代码”，这主要是 LWP::UserAgent 看到的。要获取包含动态加载的 ajax 数据、基于 javascript 构建的菜单等的页面，您需要将页面加载到 Web 浏览器、node.js 或 phantomJs 或类似工具中，这些工具实际上会运行 javascripts 并构建如您所见的页面。然后使用他们的 DOM 模型来查找相关数据（例如使用 jQuery）。

# c# - Dynamically Insert Image to PDF using LiveCycle/ITextSharp

> ID：14754412
> 
> 赞同：0
> 
> 时间：2013-02-07T15:10:27.220
> 
> 标签：c#, asp.net-mvc-3, pdf, itextsharp, livecycle

I have a pdf template I created using LiveCycle Designer. Inside it, I have 3 Image Fields that I created, ImageField1, ImageField2, ImageField3\. The images are located on a url, let's call it "[http://images.com/img/IMAGENAME.jpg](http://images.com/img/IMAGENAME.jpg)", and the user selects the images prior to generating the pdf in which case I store the image names in a string array.

Is it possible to add these images programmatically into the Image Fields? The methods I've tried so far have only lead to a corrupted pdf that won't open at all.

```
public string Foo(int id)
    {
        try
        {

            var file = string.Empty;
            var property = ((IRepositoryBase)PropertyRepository).GetById<Property>(id);
            var purchase = ((IRepositoryBase)PropertyRepository).GetByPropertyId<PropertyPurchase>(id);
            var inspection = ((IRepositoryBase)PropertyRepository).GetByPropertyId<PropertyInspection>(id);
            file = HttpContext.Current.Server.MapPath("\\Assets\\documents\\originals\\Brochure.pdf");
            var tmp = HttpContext.Current.Server.MapPath("\\Assets\\documents\\temps\\");

            tmp += string.Format("{0}-Brochure.pdf", property.Id);

            var pdfReader = new PdfReader(file);
            var pdfStamper = new PdfStamper(pdfReader, new FileStream(tmp, FileMode.Create));
            var pdfFormFields = pdfStamper.AcroFields;
            var pht = property.BrochurePhoto;
            string[] photos = pht.Split(' ');
            PdfContentByte cB = new PdfContentByte(pdfStamper.Writer);

            if (photos[0] != null)
            {
                iTextSharp.text.Image photoToPdf1 = iTextSharp.text.Image.GetInstance(new Uri("http://images.com/img/" + photos[0].ToString() + ".jpg"));
                cB.AddImage(photoToPdf1);
            }
            if (photos[1] != null)
            {
                iTextSharp.text.Image photoToPdf2 = iTextSharp.text.Image.GetInstance(new Uri("http://images.com/img/" + photos[1].ToString() + ".jpg"));
                cB.AddImage(photoToPdf2);
            }
            if (photos[2] != null)
            {
                iTextSharp.text.Image photoToPdf3 = iTextSharp.text.Image.GetInstance(new Uri("http://images.com/img/" + photos[2].ToString() + ".jpg"));
                cB.AddImage(photoToPdf3);
            }

            pdfStamper.FormFlattening = false;
            pdfStamper.Close();
            return string.Format("{0}-Brochure.pdf", property.Id);

        }
        catch (Exception ex)
        {
            Log.Error(ex);
            return string.Empty;

        }

    } 
```

# xaml - Oblic text as tile XAML

> ID：14754413
> 
> 赞同：1
> 
> 时间：2013-02-07T15:10:28.220
> 
> 标签：xaml, text, tile

I would like to display a text over other component in XAML. This text is used to display "DEMO VERSION" over all the elements on my application. How can I display oblic text in tile mode?

Like this image: ![enter image description here](../Images/77305850b44595ef95d925193fa1a0d4.png)

The container size can change, I want the text to repeat to fill the container. Any idea?

# c# - c# linq 加入列表中的子列表

> ID：14754420
> 
> 赞同：0
> 
> 时间：2013-02-07T15:10:45.317
> 
> 标签：c#, .net, linq, join

我有一个列表： `var_assets_root`有一个嵌套的子列表：`contents`。我可以在根列表上进行连接，并使用其他两个列表中的额外项目来扩充它，`lst_invtypes_assets`并`lst_stations_composite_retribution`在`var_assets_root`. 但我也想对子列表`var_assets_root-->contents\b.contents`中的项目进行连接，下面的代码到目前为止还没有这样做。 [图片>> `var_assets_root`in watch window的结构](http://i152.photobucket.com/albums/s178/xav2075/stackoverflow_linq_sublist_join_problem_zps6342848d.jpg)

```
mysql mysql_object = new mysql();
  List<mysql.invtypes_asset> lst_invtypes_assets = mysql_object.dbmysql_invtypes_asset_to_list();
  List<mysql.stations_composite_retribution> lst_stations_composite_retribution = mysql_object.dbmysql_select_stastations_composite_retribution_to_list();
  var lst_assets_list = new AssetList("134399", "343434SxSFX7qO81LqUCberhS1OQtktMvARFGED0ZRSN5c4XP230SA", "434367527");
  lst_assets_list.Query();
  var var_assets_root = lst_assets_list.assets.ToList();

  var var_assets_root_typeid_station 
    = from b in var_assets_root
    join c in lst_invtypes_assets on b.typeID equals c.typeID
    join d in lst_stations_composite_retribution on b.locationID equals d.stationID
    select new {b.contents, b.flag, b.itemID, b.locationID, d.solarSystemName, d.security, d.securityClass, d.regionName, b.quantity, b.singleton, b.typeID, c.groupID, c.marketGroupID, c.volume,
      c.typeName, c.description}; 
```

我已经完成了为每个内容子列表运行 linq 查询并相应地分配值的解决方案。

```
private void btn_evenet_Click(object sender, EventArgs e)
{
  Stopwatch stopwatch1 = new Stopwatch();
  Stopwatch stopwatch2 = new Stopwatch();
  stopwatch1.Start();
  mysql mysql_object = new mysql();
  List<mysql.invtypes_asset> lst_invtypes_assets = mysql_object.dbmysql_invtypes_asset_to_list();
  List<mysql.stations_composite_retribution> lst_stations_composite_retribution = mysql_object.dbmysql_select_stastations_composite_retribution_to_list();
  AssetList lst_assets_list = new AssetList("2312099", "J&VNM14RFUkSxSFX7qAAAAAA1OQtktMvYTVZZBhkO23235c4Z&HJKODPQLM", "123231527");
  lst_assets_list.Query();
  var var_assets_root = lst_assets_list.assets.ToList();
  var var_assets_root_typeid_station 
    = from b in var_assets_root
    join c in lst_invtypes_assets on b.typeID equals c.typeID
    join d in lst_stations_composite_retribution on b.locationID equals d.stationID
      select new { b.contents, b.flag, b.itemID, b.locationID, d.solarSystemName, d.security, d.securityClass, d.regionName, b.quantity, b.singleton, b.typeID, c.groupID, c.marketGroupID, c.volume,
      c.typeName, c.description};
  var lst_assets_root_typeid_station = var_assets_root_typeid_station.ToList(); // Using .ToArray() is about 200ms faster than .ToList()
  stopwatch2.Start(); 
  for (Int32 a = 0; a < lst_assets_root_typeid_station.Count(); a++)
  {
    if (lst_assets_root_typeid_station[a].contents.Count() >= 0)
    {
      for (Int32 b = 0; b < lst_assets_root_typeid_station[a].contents.Count(); b++)
      {
        var var_row_invtypes_assets = lst_invtypes_assets.Where(x => x.typeID == lst_assets_root_typeid_station[a].contents[b].typeID).ToArray();
        lst_assets_root_typeid_station[a].contents[b].groupID = var_row_invtypes_assets[0].groupID;
        lst_assets_root_typeid_station[a].contents[b].typeName = var_row_invtypes_assets[0].typeName;
        lst_assets_root_typeid_station[a].contents[b].description = var_row_invtypes_assets[0].description;
        lst_assets_root_typeid_station[a].contents[b].volume = var_row_invtypes_assets[0].volume;
        lst_assets_root_typeid_station[a].contents[b].marketGroupID = var_row_invtypes_assets[0].marketGroupID;
        if (lst_assets_root_typeid_station[a].contents[b].contents.Count() != 0)
        {
          for (Int32 c = 0; c < lst_assets_root_typeid_station[a].contents[b].contents.Count(); c++)
          {
            var_row_invtypes_assets = lst_invtypes_assets.Where(x => x.typeID == lst_assets_root_typeid_station[a].contents[b].contents[c].typeID).ToArray();
            lst_assets_root_typeid_station[a].contents[b].contents[c].groupID = var_row_invtypes_assets[0].groupID;
            lst_assets_root_typeid_station[a].contents[b].contents[c].typeName = var_row_invtypes_assets[0].typeName;
            lst_assets_root_typeid_station[a].contents[b].contents[c].description = var_row_invtypes_assets[0].description;
            lst_assets_root_typeid_station[a].contents[b].contents[c].volume = var_row_invtypes_assets[0].volume;
            lst_assets_root_typeid_station[a].contents[b].contents[c].marketGroupID = var_row_invtypes_assets[0].marketGroupID;
          }
        }
      }         
    }
  }
  stopwatch2.Stop();
  stopwatch1.Stop();
  lbl_stopwatch1.Text = "Everything: " +  stopwatch1.Elapsed.ToString("mm\\:ss\\.ff"); // 1.53 seconds no debugging
  lbl_stopwatch2.Text = "contents sublists: " +  stopwatch2.Elapsed.ToString("mm\\:ss\\.ff"); // contents sublists take 1.03 seconds no debugging
}
 } 
```

一旦我发现当调用 getAllContents 时，'yield' 从一堆内容节点中弹出一个内容节点，我调整了我的代码和你的函数，以便现在所有内容节点都被递归到并从 linq 查询中填充它们的空值。此外，在 var_assets_root_typeid_station 的 linq 创建之后的新代码现在几乎快了两倍。谢谢你。

```
private void btn_evenet_Click(object sender, EventArgs e)
{
  Stopwatch stopwatch1 = new Stopwatch();
  Stopwatch stopwatch2 = new Stopwatch();
  stopwatch1.Start();
  mysql mysql_object = new mysql();
  List<mysql.invtypes_asset> lst_invtypes_assets = mysql_object.dbmysql_invtypes_asset_to_list();
  List<mysql.stations_composite_retribution> lst_stations_composite_retribution = mysql_object.dbmysql_select_stastations_composite_retribution_to_list();
  AssetList lst_assets_list = new AssetList("12345678", "ABCDEFFGHIKL01235kokJDSD213123", "12345678");
  lst_assets_list.Query();
  var var_assets_root = lst_assets_list.assets.ToList();
  var var_assets_root_typeid_station 
    = from b in var_assets_root
    join c in lst_invtypes_assets on b.typeID equals c.typeID
    join d in lst_stations_composite_retribution on b.locationID equals d.stationID
      select new 
        {b.contents, b.flag, b.itemID, b.locationID, d.solarSystemName, d.security, d.securityClass, d.regionName, b.quantity, b.singleton, b.typeID, c.groupID, c.marketGroupID, c.volume,
      c.typeName, c.description};
  var lst_assets_root_typeid_station = var_assets_root_typeid_station.ToList(); // Using .ToArray() is about 200ms faster than .ToList()
  stopwatch2.Start(); 
 for (Int32 a = 0; a < lst_assets_root_typeid_station.Count(); a++)
  {
    if (lst_assets_root_typeid_station[a].contents.Count() > 0)
    {
      for (Int32 z = 0; z < lst_assets_root_typeid_station[a].contents.Count(); z++)
      {
        foreach (AssetList.Item contentnode in getAllContents(lst_assets_root_typeid_station[a].contents[z]))
        {
          var var_row_invtypes_assets = lst_invtypes_assets.Where(x => x.typeID == contentnode.typeID).ToArray();
          contentnode.groupID = var_row_invtypes_assets[0].groupID;
          contentnode.typeName = var_row_invtypes_assets[0].typeName;
          contentnode.description = var_row_invtypes_assets[0].description;
          contentnode.volume = var_row_invtypes_assets[0].volume;
          contentnode.marketGroupID = var_row_invtypes_assets[0].marketGroupID;
        }
      }
    }
  }    
  stopwatch2.Stop();
  stopwatch1.Stop();
  lbl_stopwatch1.Text = "Everything: " +  stopwatch1.Elapsed.ToString("mm\\:ss\\.ff"); // 1.16 seconds no debugging
  lbl_stopwatch2.Text = "contents sublists: " +  stopwatch2.Elapsed.ToString("mm\\:ss\\.ff"); // contents sublists take 0.63 seconds no debugging
}

IEnumerable<AssetList.Item> getAllContents(AssetList.Item contentNode)
{
  if (contentNode.contents.Count == 0)
  {
    yield return contentNode;
  }
  else
  {
    foreach (AssetList.Item subContentNode in contentNode.contents)
    {
      yield return subContentNode;
      foreach (AssetList.Item subSubContentNode in getAllContents(subContentNode))
        yield return subSubContentNode;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:38:25.750

您不只是在寻找 SelectMany 吗？

`var contents = lst_invtypes_assets.contents.SelectMany(x => x.contents);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:28:17.143

我认为你得到的是你想要访问外部`.contents`属性，如果它包含任何`contents`，那么也访问那些，等等......递归。

虽然您可以通过使用 定义递归`Func<AssetList.Item, IEnumerable<AssetList.Item>>`和一行 LINQ 来做到这一点`.Aggregate`，但定义自己的递归方法可能更容易/更具可读性。

```
IEnumerable<AssetList.Item> getAllContents(AssetList.Item station) {
    foreach (AssetList.Item subStation in station.contents) {
        yield return subStation;
        foreach (AssetList.Item subSubStation in getAllContents(substation))
            yield return subSubStation;
    }
} 
```

然后你可以做一个简单的`foreach(var station in getAllContents(parentStation))`，或修改它以包含原始站，使其成为扩展方法等。

# php - 记住从链接下拉列表中选择的值

> ID：14754424
> 
> 赞同：0
> 
> 时间：2013-02-07T15:10:52.703
> 
> 标签：php, javascript, mysql, drop-down-menu, chained

我有一个链接下拉菜单，其中包含来自我的数据库的数据...

这是它的外观：

函数.php

```
<?php
//**************************************
//     Page load dropdown results     //
//**************************************
function getTierOne()
{
    $result = mysql_query("SELECT DISTINCT make FROM vehicles ORDER BY make ASC") 
    or die(mysql_error());

      while($tier = mysql_fetch_array( $result )) 

        {
?>
<option value="<?php echo $tier['make'];?>"<?php echo (isset($_POST['drop_1']) && $_POST['drop_1'] == $tier['make']) ? ' selected="selected"' : '' ; ?>><?php echo $tier['make'];?></option>
<?php

        }

}

//**************************************
//     First selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_1" ) {
drop_1($_GET['drop_var']);
}

function drop_1($drop_var)
{  
    include_once('db.php');
    $result = mysql_query("SELECT DISTINCT model FROM vehicles WHERE make='$drop_var' ORDER BY model") 
    or die(mysql_error());

    echo '<select name="drop_2" id="drop_2">
          <option value=" " disabled="disabled" selected="selected">Selecteer Model</option>';

           while($drop_2 = mysql_fetch_array( $result )) 
            {
              echo '<option value="'.$drop_2['model'].'">'.$drop_2['model'].'</option>';
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_2').hide();
    $('#drop_2').change(function(){
      $('#wait_2').show();
      $('#result_2').hide();
      $.get(\"func.php\", {
        func: \"drop_2\",
        drop_var: $('#drop_1').val(),
        drop_var2: $('#drop_2').val()
      }, function(response){
        $('#result_2').fadeOut();
        setTimeout(\"finishAjax_tier_three('result_2', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Second selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_2" ) {
drop_2($_GET['drop_var'], $_GET['drop_var2']);
}

function drop_2($drop_var, $drop_var2)
{  
    include_once('db.php');
    $result = mysql_query("SELECT DISTINCT year FROM vehicles WHERE make='$drop_var' AND model='$drop_var2'") 
    or die(mysql_error());

    echo '<select name="drop_3" id="drop_3">
          <option value=" " disabled="disabled" selected="selected">Selecteer Jaar</option>';

           while($drop_3 = mysql_fetch_array( $result )) 
            {
              echo '<option value="'.$drop_3['year'].'">'.$drop_3['year'].'</option>';
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_3').hide();
    $('#drop_3').change(function(){
      $('#wait_3').show();
      $('#result_3').hide();
      $.get(\"func.php\", {
        func: \"drop_3\",
        drop_var: $('#drop_1').val(),
        drop_var2: $('#drop_2').val(),
        drop_var3: $('#drop_3').val()
      }, function(response){
        $('#result_3').fadeOut();
        setTimeout(\"finishAjax_tier_four('result_3', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Third selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_3" ) {
drop_3($_GET['drop_var'], $_GET['drop_var2'], $_GET['drop_var3']);
}

function drop_3($drop_var, $drop_var2, $drop_var3)
{  
    include_once('db.php');
        $result = mysql_query("SELECT DISTINCT color FROM vehicles WHERE make='$drop_var' AND model='$drop_var2' AND year='$drop_var3'") 
    or die(mysql_error());  

    echo '<select name="drop_4" id="drop_4">
          <option value=" " disabled="disabled" selected="selected">Selecteer Kleur</option>';

           while($drop_4 = mysql_fetch_array( $result )) 
            {
                if ($drop_4['color'] != "") {
              echo '<option value="'.$drop_4['color'].'">'.$drop_4['color'].'</option>';
                }
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_4').hide();
    $('#drop_4').change(function(){
      $('#wait_4').show();
      $('#result_4').hide();
      $.get(\"func.php\", {
        func: \"drop_4\",
        drop_var: $('#drop_1').val(),
        drop_var2: $('#drop_2').val(),
        drop_var3: $('#drop_3').val(),
        drop_var4: $('#drop_4').val()
      }, function(response){
        $('#result_4').fadeOut();
        setTimeout(\"finishAjax_tier_five('result_4', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Fourth selection results     //
//**************************************
if(isset($_GET['func'])&& $_GET['func'] == "drop_4" ) {
drop_4($_GET['drop_var'], $_GET['drop_var2'], $_GET['drop_var3'], $_GET['drop_var4']);
}
function drop_4($drop_var, $drop_var2, $drop_var3, $drop_var4)
{  
    include_once('db.php');
        $result = mysql_query("SELECT * FROM vehicles WHERE make='$drop_var' AND model='$drop_var2' AND year='$drop_var3' AND color='$drop_var4'") 
    or die(mysql_error());  

           while($drop_5 = mysql_fetch_array( $result )) 
                {
                if ($drop_5['img'] != "") {
              echo '<input type="checkbox" name="drop_5" id="drop_5" style="display:none;" checked value="'.$drop_5['img'].'"/>';

                }
  }
    echo '<input type="submit" name="submit" value="Submit" />';
}

?> 
```

这是我的 index.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="includes/css/style.css" type="text/css" rel="stylesheet" />
        <link href="includes/css/wt-gallery.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="includes/js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="includes/js/configuratie.js"></script>
        <script type="text/javascript" src="includes/js/jquery.wt-gallery.min.js"></script>
        <script type="text/javascript">
$(document).ready(function() {
    $('#wait_1').hide();
    $('#drop_1').change(function(){
      $('#wait_1').show();
      $('#result_1').hide();
      $.get("func.php", {
        func: "drop_1",
        drop_var: $('#drop_1').val()
      }, function(response){
        $('#result_1').fadeOut();
        setTimeout("finishAjax('result_1', '"+escape(response)+"')", 400);
      });
        return false;
    });
    $('#wait_2').hide();
    $('#drop_2').change(function(){
      $('#wait_2').show();
      $('#result_2').hide();
      $.get("func.php", {
        func: "drop_2",
        drop_var: $('#drop_2').val()
      }, function(response){
        $('#result_2').fadeOut();
        setTimeout("finishAjax2('result_2', '"+escape(response)+"')", 400);
      });
        return false;
    });
    $('#wait_3').hide();
    $('#drop_3').change(function(){
      $('#wait_3').show();
      $('#result_3').hide();
      $.get("func.php", {
        func: "drop_3",
        drop_var: $('#drop_3').val()
      }, function(response){
        $('#result_3').fadeOut();
        setTimeout("finishAjax3('result_3', '"+escape(response)+"')", 400);
      });
        return false;
    });
});

function finishAjax(id, response) {
  $('#wait_1').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax2(id, response) {
  $('#wait_2').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax3(id, response) {
  $('#wait_3').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}

function finishAjax_tier_three(id, response) {
  $('#wait_2').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax_tier_four(id, response) {
  $('#wait_3').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax_tier_five(id, response) {
  $('#wait_4').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
</script>
        </head>
<?php
$website = "it";
    // configuratie file en db connect
include "includes/inc/config.inc.php";
include('db.php');
include_once "class/slider.class.php";
include('func.php');
$slideralbum = new slideralbum($dbo);
$sliders = $slideralbum->getSliderItems($website);
?>
<body>
<p>
<form name="product" action="" method="post">

    <select name="drop_1" id="drop_1">

      <option value="" selected="selected" disabled="disabled">Selecteer Merk</option>

      <?php getTierOne(); ?>

    </select> 

    <span id="wait_1" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_1" style="display: none;"></span>
    <span id="wait_2" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_2" style="display: none;"></span> 
    <span id="wait_3" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_3" style="display: none;"></span> 
    <span id="wait_4" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_4" style="display: none;"></span> 
  <INPUT TYPE="button" VALUE="Refresh" onclick='location.reload()'>
</form>
</p>
<p>
<?php if(isset($_POST['submit'])){
    $drop = $_POST['drop_1'];
    $drop_2 = $_POST['drop_2'];
    $drop_3 = $_POST['drop_3'];
    $drop_4 = $_POST['drop_4'];
    $drop_5 = $_POST['drop_5'];
?>
<table border="1" bordercolor="#B5B5B5" style="background-color:#FFFFFF" width="250" cellpadding="3" cellspacing="3">
    <tr>
        <td>Merk:</td>
        <td><?php echo $drop;?></td>
    </tr>
    <tr>
        <td>Model:</td>
        <td><?php echo $drop_2;?></td>
    </tr>
    <tr>
        <td>Bouwjaar:</td>
        <td><?php echo $drop_3;?></td>
    </tr>
    <tr>
        <td>Kleur:</td>
        <td><?php echo $drop_4;?></td>
    </tr>
</table>
<?php
}
?>
<div id="banner-block">       <!-- Begin of Slideshow -->
    <div class="container">          
        <div class="wt-gallery" style="width:920px; height:375px;">
            <div class="main-screen">
                                <?php if(isset($_POST['submit'])){
    $drop = $_POST['drop_1'];
    $drop_2 = $_POST['drop_2'];
    $drop_3 = $_POST['drop_3'];
    $drop_4 = $_POST['drop_4'];
    $drop_5 = $_POST['drop_5'];
?>
                    <img src="images/<?php echo $drop_5;?>" alt="<?php echo $drop_5;?>" width="920" height="360"/>
<?php
                    }
?>
                <noscript>
                <!-- placeholder image when javascript is off -->
                <img src="../images/triworks_abstract27.jpg" alt=""/>
                </noscript>
            </div>
            <div class="cpanel">
            <div class="thumbs-back"></div>                        
                <div class="thumbnails">
                    <ul>
<?php $sliders = $slideralbum->getSliderItems($website, NULL);
foreach($sliders as $slider){
?> 
                        <li effect="none">
                    <div>
                        <a href="<?php echo $slider->slider_img; ?>" height="360" width="720" alt="<?php echo $slider->slider_img; ?>" />
                        <img src="<?php echo $slider->slider_tmb; ?>" height="70" width="125" alt="<?php echo $slider->slider_tmb; ?>" />
                        </a>
                    </div>
                    <div class="data">    
                    </div>
                        </li>
<?php
}
?>  
                    </ul>
                </div>          
            <div class="thumbs-fwd"></div>
        </div>
    </div>  
</div>
</div>
</body>
</html> 
```

我想在提交后记住每个下拉列表中的选定值。所以我可以以一种简单的方式更改颜色，而不必再次通过所有下拉菜单......

我让它在第一个下拉列表中工作：

```
<option value="<?php echo $tier['make'];?>"<?php echo (isset($_POST['drop_1']) && $_POST['drop_1'] == $tier['make']) ? ' selected="selected"' : '' ; ?>><?php echo $tier['make'];?></option> 
```

它也应该与其他下拉菜单一起使用，不是吗？

是否可以显示所有下拉列表而不是一一显示？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:25:55.930

我认为你可以这样做。

```
<select id="sel1">
    <option value="<?php echo $tier['make'];?>"><?php echo $tier['make'];?></option>
</select>

<script>
    var select = document.getElementById('sel1');
    select.value = <?php echo $tier['make']); ?>
    if (select.selectedIndex != 0) {
        select.style.display = '';  // Show the element
    }
</script> 
```

只需在每个选择标签之后添加一个脚本标签（如果需要，也可以在底部添加），并检查您是否从下拉列表中选择了任何选项，如果是，则使其可见。

# node.js - Heroku + socket.io 广播上的多个测功机

> ID：14754431
> 
> 赞同：6
> 
> 时间：2013-02-07T15:11:36.287
> 
> 标签：node.js, heroku, socket.io

我似乎遇到了一个问题，当我有超过 1 个测功机时，Heroku 上的 node.js 应用程序中的 socket.io 广播似乎不起作用。一旦我将它缩放到 1，它就可以完美运行。有什么我需要知道的吗？也许有一种不同的方式可以向所有测功机广播？如果我需要提供更多信息或代码，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:02:49.513

如果您在多个测功机/服务器上运行，则必须配置 socket.io 以使用非内存会话存储，如`RedisStore`. socket.io[文档有详细信息，](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)[这里](https://stackoverflow.com/questions/11064826/using-socket-io-and-redis-on-heroku-with-node-js)有更多讨论。

# c# - 如何在 DLL 中捆绑 index.html、jquery.js、main.css 以在 WPF 中使用？

> ID：14754435
> 
> 赞同：2
> 
> 时间：2013-02-07T15:11:53.013
> 
> 标签：c#, .net, wpf, dll, resources

我知道可以**捆绑**

例如。

```
index.html
main.css
jQuery.js
Logo.gif 
```

进入程序集（DLL）并通过`res://`协议在 WPF 中使用它，但我在 Visual Studio 2010/2012 中找不到任何项目模板来执行此操作。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:22:52.487

您想创建所谓的**资源文件**。有创建此类文件的向导：

**我的 VS2010 上的文件**->**新建**->**文件**-> **C#** ->**资源文件**。

# highcharts - Highstock 无法单击带有线系列的散点

> ID：14754439
> 
> 赞同：0
> 
> 时间：2013-02-07T15:12:08.240
> 
> 标签：highcharts, highstock

我想用散点系列上的一个点注册一个点击事件。当图表上没有显示其他系列时，此方法有效。但是，当显示线条系列时，我无法在分散系列上发生点击。它只注册在线系列。无论我将系列添加到图表中的顺序如何，都会发生这种情况。在这种情况下，如何在散点上注册点击事件？

我在这里有一个问题示例：http: [//jsfiddle.net/scottmlaplante/AfNzC/1/](http://jsfiddle.net/scottmlaplante/AfNzC/1/)

```
var chart = new Highcharts.StockChart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    navigator:{
        baseSeries:1  
    },
    plotOptions: {
        series: {
            cursor: 'pointer',
            point: {
                events: {
                    click: function(event) {
                        alert ('Category: '+ this.category +', value: '+ this.y + event.point.series.name);
                    }
                }
            }
        }
    },

    series: [
        {
        type: "scatter",
        name: "scatter series",
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    },
        {
        type: "line",
        name:"line series",
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:23:27.370

您可以通过检查系列索引来识别哪个系列点是 clickec。

```
if(this.series.index==1)
                        alert('scatter');
                    else
                        alert('line') 
```

[http://jsfiddle.net/scottmlaplante/AfNzC/1/](http://jsfiddle.net/scottmlaplante/AfNzC/1/)

# ssl - nginx - 奇怪的 ssl 问题

> ID：14754443
> 
> 赞同：0
> 
> 时间：2013-02-07T15:12:17.517
> 
> 标签：ssl, nginx, openssl

我遇到了一个奇怪的 Nginx SSL 问题，我似乎无法弄清楚。

发生的事情是一些用户在浏览“site2.com”时收到无效的 SSL 证书错误，错误中说 site2 的 SSL 实际上是用于 site1.com 的，所以出于某种原因，Nginx 正在从 site1 为 site2 加载 SSL。

因此，为了进行故障排除，我尝试从 nginx 配置中删除整个“SITE_1”块，然后 site2.com 根本无法加载。所以我对自己做错了什么感到非常困惑。

有人可以帮助我吗？

```
# SITE_1
server {
    listen          443;
    ssl                     on;
    server_name  site1.com;

    client_max_body_size 10M;
    client_body_buffer_size 128k;

    ssl_certificate /home/sites/conf/ssl_site1.crt;
    ssl_certificate_key /home/sites/conf/ssl_site1.key;
    ssl_session_timeout  25m;

    ssl_protocols  SSLv2 SSLv3 TLSv1;
    ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
    ssl_prefer_server_ciphers   on;

    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_read_timeout 240;
        proxy_connect_timeout 240;
        proxy_send_timeout 240;
        send_timeout 240;
        proxy_pass http://apache_server;
    }
}

# SITE_2
server {
    listen       443;
    server_name  site2.com;

    client_max_body_size 10M;
    client_body_buffer_size 128k;

    ssl_certificate /home/sites/conf/ssl_site2.crt;
    ssl_certificate_key /home/sites/conf/ssl_site2.key;
    ssl_session_timeout  25m;

    ssl_protocols  SSLv2 SSLv3 TLSv1;
    ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
    ssl_prefer_server_ciphers   on;

    gzip              on;
    gzip_static       on;
    gzip_buffers      16 8k;
    gzip_comp_level   9;
    gzip_http_version 1.0;
    gzip_min_length   0;
    gzip_types        text/plain text/css application/x-javascript;
    gzip_vary         on;

    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_read_timeout 240;
        proxy_connect_timeout 240;
        proxy_send_timeout 240;
        send_timeout 240;
        proxy_pass http://apache_server;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:19:03.830

看起来 site2 服务器声明缺少`ssl on;`配置。在 site1 中，您将其直接放在`listen`.

# javascript - Javascript (jquery.ui.slider) - 当前全局方法的替代方案？

> ID：14754444
> 
> 赞同：1
> 
> 时间：2013-02-07T15:12:19.280
> 
> 标签：javascript, jquery, jquery-ui, uislider

## 基本 Javascript 问题 - 当前全局方法的替代方案？

我首先要说我没有大量的 Javascript 经验，但是多年来一直“涉猎”它（主要是做基本的 jquery 驱动的事情和一些表单计算）。

目前我正在把一个计算器和一个基于 jquery.ui 的滑块放在一起。我让它运行良好，但昨晚遇到了一个问题，我不得不使用全局变量来解决这个问题，虽然它现在可以工作，但我觉得这不是正确的解决方案。

我从滑块外部的 Calculation 函数中的这样一行开始，在滑块内的幻灯片事件上被调用。我本可以在滑块内向上移动数学，但它用于其他事情，我更愿意将其保留为我可以在需要时调用的外部函数：

```
savings = Math.round(cost[$('.selectable-div.selected').attr('id')] * $( "#slider-gallons" ).slider( "value" ); ); 
```

...但它总是会根据滑块“开始”的位置而不是当前位置来计算，大概是因为“值”仅在滑块移动后才更改，而不是在移动期间？因此，如果我在位置 1 并移动到 2，它会显示 1 的结果。当我从位置 2 移动到位置 3 时，它会显示位置 2 的结果。当我从 3 移回 2 时，它将向我显示位置 3 的结果（无论我是“最后一个”）。

我在滑块中有另一段使用 ui.value 的小代码，它将实时更新，位置 1 显示 1，位置 2 显示 2，等等。这就是我的问题所在，我不知道如何在滑块函数本身之外调用“滑块加仑” ui.value（即在我的计算函数中）。

作为一种解决方法，我将 ui.value 定义为全局变量“var_slider_gallons_pos”，并像这样调用它：

```
savings = Math.round(cost[$('.selectable-div.selected').attr('id')] * var_slider_gallons_pos ); 
```

它工作得很好，但我对此并不满意。还有另一种方法可以做到这一点，IE（我知道下面的代码不起作用，只是我正在寻找的一个梦幻般的例子）。我只想要一些可以直接调用滑块 ui.value 的东西，而不需要那些额外的变量。

```
savings = Math.round(cost[$('.selectable-div.selected').attr('id')] * $( "#slider-gallons" ).slider( ui.value ); ); 
```

我不知道这是否有意义，但我试图调用滑块元素的 ui.value 而不必首先从滑块事件中创建一个变量。

我确定这是我忽略的一些基本元素，因为我不精通 javascript，所以希望有人可以帮助我。

编辑：为了完整起见，这是我目前使用的完整滑块和计算器代码。

滑块：

```
$( "#slider-gallons" ).slider({
        value:250,
        min: 250,
        max: 3000,
        step: 250,
        slide: function( event, ui ) {
            var_slider_gallons_pos = ui.value;
            $( "#slider-gallons-amount" ).html( "Your facility produces <span>" + var_slider_gallons_pos + "</span> Gallons of waste oil each year");
            recalculateSavings();
        }
    });

    /* these lines exist to populate the text values on load */
    /* I could probably do the var_slider_gallons_pos part differently here as well */

    var_slider_gallons_pos = $( "#slider-gallons" ).slider( "value" );
    $( "#slider-gallons-amount" ).html( "Your facility produces <span>" + $( "#slider-gallons" ).slider( "value" ) + "</span> Gallons of waste oil each year"); 
```

和计算功能：

```
function recalculateSavings() {
        var cost = {
            'calc-choice-natural-gas': 1.53,
            'calc-choice-electric': 4.86,
            'calc-choice-propane': 4.37,
            'calc-choice-fuel-oil': 3.74
        };

            /* this is the line causing me grief */
        savings = Math.round(cost[$('.selectable-div.selected').attr('id')] * var_slider_gallons_pos );
    $('#savings-calculator .calc-savings-one-year .savings').html('$' + formatNumber(savings));
    $('#savings-calculator .calc-savings-multiple-years .savings').html('$' + formatNumber(savings * var_slider_years_pos ));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:32:17.640

我找到了另一种方法！

我仍然不确定这是否是最好的方法，但我对此感到满意。

我在幻灯片函数中添加了以下代码，就在“recalculateSavings();”上方

```
$(this).slider('value', ui.value); 
```

然后在数学函数中使用。

```
$( "#slider-gallons" ).slider( "value" ); 
```

这必须强制将值更新为 ui.value 在继续进行重新计算之前，这似乎可以实时更新计算结果。这让我摆脱了所有的全局函数。

# java - 网格视图 setOnItemClickListener 不起作用

> ID：14754446
> 
> 赞同：0
> 
> 时间：2013-02-07T15:12:21.577
> 
> 标签：java, android

我正在使用gridview来显示数字，我想要下一个活动，当我点击任何数字但是当我点击n数字时没有任何反应，logcat中没有错误，也没有任何强制关闭。

这是代码

```
public class CActivity extends Activity 
{
  GridView gridView; 

   public void onCreate(Bundle savedInstanceState) 
            {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cactivity);

             gridView.setOnItemClickListener(new OnItemClickListener()
            {
              public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            Intent myIntent = new Intent(getApplicationContext(), Abc.class);
            startActivity(myIntent);
            //finish();
        }
    });
}
       private void initComponent() 
       {
         gridView = (GridView) findViewById(R.id.month_gridView);
         } 
```

我不知道问题是什么，但`gridView.setAdapter(adapter);`正在工作。请帮助

```
 gridView.setAdapter(adapter); 
```

如果我使用

```
 GridView gridView = (GridView) findViewById(R.id.month_gridView); 
```

然后应用程序强制关闭

日志猫

```
02-07 21:10:12.721: W/dalvikvm(719): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-07 21:10:12.780: E/AndroidRuntime(719): FATAL EXCEPTION: main
02-07 21:10:12.780: E/AndroidRuntime(719): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.indianic.demo.calendark/com.indianic.demo.calendark.CalendarActivity}: java.lang.NullPointerException
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.os.Looper.loop(Looper.java:123)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-07 21:10:12.780: E/AndroidRuntime(719):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 21:10:12.780: E/AndroidRuntime(719):  at java.lang.reflect.Method.invoke(Method.java:507)
02-07 21:10:12.780: E/AndroidRuntime(719):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-07 21:10:12.780: E/AndroidRuntime(719):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-07 21:10:12.780: E/AndroidRuntime(719):  at dalvik.system.NativeStart.main(Native Method)
02-07 21:10:12.780: E/AndroidRuntime(719): Caused by: java.lang.NullPointerException
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.Activity.findViewById(Activity.java:1647)
02-07 21:10:12.780: E/AndroidRuntime(719):  at com.indianic.demo.calendark.CalendarActivity.<init>(CalendarActivity.java:44)
02-07 21:10:12.780: E/AndroidRuntime(719):  at java.lang.Class.newInstanceImpl(Native Method)
02-07 21:10:12.780: E/AndroidRuntime(719):  at java.lang.Class.newInstance(Class.java:1409)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-07 21:10:12.780: E/AndroidRuntime(719):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
02-07 21:10:12.780: E/AndroidRuntime(719):  ... 11 more
02-07 21:10:18.061: I/Process(719): Sending signal. PID: 719 SIG: 9 
```

我在设置 setOnItemClickListener() 之前使用了 initComponent() 方法

强制关闭错误消失了，应用程序正常打开，

但是下一个活动没有打开或什么也没有发生。当我点击这些项目时。:(

正如你所说，我尝试了不同的案例，仍然没有成功

```
 public void onItemClick(AdapterView<?> parent, View v3,
                int position, long id) {

            //setContentView(R.layout.abc);
            switch (position) {
            case 0:
                Intent myIntent = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent);
                break;
            case 1:
                Intent myIntent1 = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent1);
                break;
            case 2:
                Intent myIntent2 = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent2);
                break;
            case 3:
                Intent myIntent3 = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent3);
                break;
            case 4:
                Intent myIntent4 = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent4);
                break;
            case 5:
                Intent myIntent5 = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent5);
                break;
            case 6:
                Intent myIntent6 = new Intent(getApplicationContext(),Abc.class);
                startActivity(myIntent6);
                break;

            default:
                break;
            }
          }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:08:42.273

您需要`initComponent()`在设置之前调用您的自定义方法`setOnItemClickListener()`

```
public class CActivity extends Activity 
{
  GridView gridView; 

   public void onCreate(Bundle savedInstanceState) 
            {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cactivity);
    initComponent();
             gridView.setOnItemClickListener(new OnItemClickListener()
            {
              public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
                  switch (position) {
                case 0://do the same for your remaining items
                    Intent myIntent = new Intent(getApplicationContext(), Abc.class);
                    startActivity(myIntent);
                    break;

                default:
                    break;
                }
              }
            //finish();
        }
    });
}
       private void initComponent() 
       {
         gridView = (GridView) findViewById(R.id.month_gridView);
         } 
```

# python - Python 多处理队列可靠性，Queue vs SimpleQueue vs JoinableQueue

> ID：14754449
> 
> 赞同：12
> 
> 时间：2013-02-07T15:12:38.173
> 
> 标签：python, process, multiprocessing

直接来自 Python[文档](http://docs.python.org/2/library/multiprocessing.html)：

> 类 multiprocessing.Queue([maxsize])
> 
> ...
> 
> qsize() 返回队列的大致大小。由于多线程/多处理语义，这个数字是不可靠的。
> 
> empty() 如果队列为空，则返回 True，否则返回 False。由于多线程/多处理语义，这是不可靠的。

而且我凭经验发现这对于 是完全正确的`Queue`，尤其是对于`empty()`。

在我的代码中，我有一堆进程（每个进程都是同一个主进程的子进程），每个进程的`run`方法中都有以下内容：

```
while self.active:
    if(self.exclusive_queue.empty() and self.exclusive_queue.qsize() == 0):
        try:
            self.exclusive_queue.put(self.general_queue.get(timeout=self.queue_timeout))
        except Queue.Empty as empty_queue:
            continue
    else:
        task = self.exclusive_queue.get()
        self.compute(task) 
```

基本上，该进程等待`general_queue`工作，但首先检查它的`exclusive_queue`. 主进程可以将任务放入进程的通用队列或独占队列中。现在，在 中`if(self.exclusive_queue.empty() and self.exclusive_queue.qsize() == 0)`，我首先使用了 a `self.exclusive_queue.empty()`，这导致了非常奇怪的行为（`qsize()`30+ 和`empty() = True`）。

所以我要去的地方是 - 因为`multiprocessing.queues.SimpleQueue`在文档中是这样写的：

> empty() 如果队列为空，则返回 True，否则返回 False。

根本没有提到可靠性。SimpleQueue.empty() 可靠吗？

其次是`multiprocessing.JoinableQueue`可靠还是比机制“更”`Queue`可靠`task_done()`？

这种方法可以被认为是正确的，还是带有回调的方法（通过孩子之间的共享管道端点）更合适？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T14:22:31.550

不是一个直接的答案，但我已经开始越来越依赖于使用保护条件迭代输入队列。多处理模块的文档中有一个示例：

```
def worker(input, output):
    for func, args in iter(input.get, 'STOP'):
        result = calculate(func, args)
        output.put(result) 
```

因此，当您对队列的输入完成时，您只需将与启动进程`put`一样多的`STOP`字符串或您选择的任何守卫添加到队列中。

# sql - Coldfusion 更新 SQL 语句

> ID：14754458
> 
> 赞同：1
> 
> 时间：2013-02-07T15:13:04.210
> 
> 标签：sql, oracle, coldfusion, oracle11g, coldfusion-9

我有以下查询，它使用 cfspreadsheet 从读取的数据中更新引用数据的表。（大约 600 行）并被称为 qry1。SQL 运行大约需要 2 分钟才能完成。我可以改进 SQL 以改进更新时间吗？products 表中有 1360000 行。此示例更新其中的 600 行。Oracle 版本是 11g Coldfusion 版本是 9.1

```
<cfloop from="1" to="#qry1.recordcount#" index="i">
    <cfquery name="qry2" datasource="db1">
        UPDATE PRODUCTS P
        SET P.QTY = <cfqueryparam value="#qry1.ITEM_NEW_INCOMING_QUOTE_QTY#" cfsqltype="cf_sql_numeric" />
        WHERE P.PRODUCT= <cfqueryparam value="#qry1.PRODUCT#" cfsqltype="cf_sql_varchar"  />
        AND EXISTS(
            SELECT QUOTE_ID
            FROM QUOTE Q
            WHERE P.QUOTE_ID = Q.QUOTE_ID
                AND Q.QUOTE_NUMBER = <cfqueryparam value="#Val(qry1.QUOTE_NUMBER)#" cfsqltype="cf_sql_numeric" /> 
            )
    </cfquery>
</cfloop> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:18:34.713

**更新** 不幸的是，由于 OP 之前省略了一些新信息，此解决方案无效。

* * *

**原始答案**

我认为您不需要使用甚至应该使用 ColdFusion 来执行此操作。这将进行 600 次数据库调用，这可能是您花费大量时间的地方。最多您只需要 CF 发送 where 子句来告诉查询您需要更新哪些 600 行。

您可以使用直接 SQL 从另一个表更新 oracle 中的表。看看这个较旧的 SO 帖子是否对您有帮助。[Oracle SQL：用另一个表中的数据更新一个表](https://stackoverflow.com/questions/7030699/oracle-sql-update-with-data-from-another-table)

如果此链接发生问题，评分最高的答案的要点是：

```
UPDATE table1 t1
   SET (name, desc) = (SELECT t2.name, t2.desc
                         FROM table2 t2
                        WHERE t1.id = t2.id)
 WHERE EXISTS (
    SELECT 1
      FROM table2 t2
     WHERE t1.id = t2.id 
     AND  -- your where clause from your first cfquery here
 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:46:07.510

无论如何，600 个单独的更新都需要相当长的时间。如果您不希望用户必须坐在那里等待，您可以使用 cfthread 进行更新并感谢用户在您的主线程上提供的文件。

或者，您可以简单地上传文件并将其保存在服务器上的某个位置。然后设置一个查找这些文件并处理它们的计划作业。

无论你做什么，都不要为了速度而牺牲良好的实践。由于上传的文件是用户输入，因此您必须验证收到的数据。

# android - 9 补丁图像在错误的位置缩放

> ID：14754460
> 
> 赞同：5
> 
> 时间：2013-02-07T15:13:05.690
> 
> 标签：android, image, scaling, nine-patch

我使用九个补丁图像作为选择器项目元素的可绘制对象。九个补丁图像在这里：

![9 补丁图像](../Images/d6b265129d01033e8fb983943bec21b4.png)

最终渲染的图像是这样的（模拟器和设备屏幕截图，两个设备的分辨率 > mdpi）：

![生成的渲染图像](../Images/a64f67c374bf6c89811199b468c12d16.png)

如您所见，它已在可拉伸区域（如 9 补丁文件中定义）之外进行了缩放，深绿色条比应有的粗得多。为什么会这样，可以避免吗？draw9patch 工具可以正确缩放此图像。它是否与 Android 试图在高分辨率设备上保留物理尺寸有关？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T15:17:06.547

您只提供图像的 mdpi 版本吗？

Android 会以正确的像素密度缩放所有不可用的图像。这发生在图像通过 9patch 缩放之前。

这意味着您的图像被放大以适合 hdpi，然后被缩放以适合内容。

要解决此问题，您必须提供图像的 hdpi 和 xhdpi 版本。9patch 不应该针对不同的像素密度和不同的内容/屏幕尺寸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T15:18:17.653

我检查了你的 9 补丁：

![在此处输入图像描述](../Images/018e769a95ff94e18d86696255e118c8.png)

为什么将未使用的边界涂成白色？它应该是透明的。因此，它不被识别为 9Patch：

![在此处输入图像描述](../Images/6388e98c4cd4e8781dfc9d7a18f3276a.png)

# haskell - 从字符串列表中读取数据

> ID：14754464
> 
> 赞同：0
> 
> 时间：2013-02-07T15:13:12.697
> 
> 标签：haskell

我有这样的数据结构

```
data Something = Something Integer String String 
```

我想转换

```
["Something", "3", "text", "42"] 
```

到数据。

现在，我有

```
altRead :: Read a => [String] -> a
altRead = read . unwords . hack
    where 
        hack = map (\x -> if isNumber x then x else "\"" ++ x ++ "\"")
        isNumber = foldl (\b c -> isDigit c && b) True 
```

但我忘了，有些数字可能是数据结构中的字符串。是否有一个简单的解决方案或者我需要编写一个替代的读取类型类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:26:29.273

有了你所拥有的，你真的不需要把它变成一个类型类。你可以这样做：

```
readSomething :: [String] -> Maybe Something
readSomething [_, n, s1, s2] = Just $ Something (read n) s1 s2
readSomething _              = Nothing 
```

或者，如果您想消除第一个词的歧义：

```
data Something = Something Integer String String
               | SomethingToo String Integer

readSomething :: [String] -> Maybe Something
readSomething ["Something", n, s1, s2] = Just $ Something (read n) s1 s2
readSomething ["SomethingToo", s, n]   = Just $ SomethingToo s (read n)
readSomething _                        = Nothing 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:55:04.070

您正在一些词法标记之上编写一个小型解析器。你不能真正实现一个`Read`实例，因为`read :: Read a => String -> a`你想要`[String] -> a`为`a == Something`. 但是，您*可以*利用`Read`已经存在的实例来引导解析您`Integer`的 .

所以让我们试试吧。我们将从`Something`令牌列表中解析一个。

```
import Safe -- gives us readMay :: Read a => String -> Maybe a

parseSomething :: [String] -> Maybe Something
parseSomething ("Something":strInt:stra:strb:_) = 
  do int <- readMay strInt
     return $ Something int stra strb
parseSomething _ = Nothing 
```

`Maybe`我们也可以使用as更紧凑`Applicative`地做到这一点

```
import Control.Applicative

parseSomething :: [String] -> Maybe Something    
parseSomething ("Something":strInt:stra:strb:_) = 
  Something <$> readMay strInt <*> pure stra <*> pure strb
parseSomething _ = Nothing 
```

真的，我们可能也应该返回任何未使用的令牌，以便我们可以继续解析。

```
parseSomething :: [String] -> (Maybe Something, [String])
parseSomething ("Something":strInt:stra:strb:rest) = 
  (Something <$> readMay strInt <*> pure stra <*> pure strb, rest)
parseSomething rest = (Nothing, rest) 
```

* * *

我将所有这些结构引入您的解析的原因是，这开始走向解析器组合器的空间，例如`Parsec`. 每当你需要一个复杂的`Read`东西时，看看 Haskell 中一些非常好的解析库就开始变得有用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:17:37.500

在 GHCI 中：

```
data Something = Something Integer String String deriving (Read, Show)

let somethingStrings = ["Something", "3", "text", "42"]

let escapeForSomething [a,b,c,d] = [a, b, "\""++c++"\"", "\""++d++"\""]

let something = read (unwords (escapeForSomething somethingStrings)) :: Something 
```

# c# - 如何将其保存在实体权中

> ID：14754468
> 
> 赞同：1
> 
> 时间：2013-02-07T15:13:24.523
> 
> 标签：c#, entity-framework, crud

假设我有一个大实体并且想要创建一个典型的 CRUD 应用程序。用户不应该有能力保存我的实体的某些字段。

所以我看到了两种实现更改保存逻辑的方法：

一个）

1.  从数据库中获取实体

2.  包含所有字段的页面（用户不应更改为隐藏输入的字段）

3.  通过 post 方法获取实体

4.  附加到上下文并保存

在这种情况下，我需要在页面上删除无用的字段。毫无疑问，这很糟糕。

b)

1.  从数据库中获取实体

2.  出页仅必要的字段（用户可以更改的字段）

3.  通过 post 方法获取实体

4.  从数据库中获取实体

5.  用新值填充数据库实体并保存

在这种情况下，我需要对 DB 进行额外的查询。所以对性能不好。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:19:23.470

或 C）：

1.  从数据库中获取实体
2.  仅使用允许的字段将实体映射到 ViewModel
3.  将带有数据的 ViewModel 发布回控制器
4.  将 ViewModel 映射回实体
5.  附加并保存。

编辑：我强烈推荐[AutoMapper](http://nuget.org/packages/automapper "自动映射器")来回映射

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:20:33.703

有趣的是，我刚刚观看了 Julie Lerman 制作的视频，其中她讨论了几乎完全相同的问题。你的解决方案都不是她所采用的：

有一个单独的实体类，其中包含您要在屏幕上显示的字段，但仍映射到与常规表相同的表。然后只需查询该 DbSet 以获取实体（仅包含这些字段），并将更新保存到该实体。

她在讨论在实体框架之上实现领域驱动设计时提到了这一点。因此，如果您在应用程序中为不同的函数使用不同的 DbContext，您仍然可以使用正在使用的 DbContext 写入表，但您可以限制上下文可以写入的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:17:52.063

建议对`ViewModels`不同的任务使用不同的。如果您想向用户显示`Model`要编辑的某些字段，那么您可以使用`EditModel`和同时保存使用`CreateModel`来创建和填充数据库。这样，您可以避免用户知道您的数据库结构，从而确保保护和安全。

# ios - ipad：读取共享网络驱动器上的文件

> ID：14754469
> 
> 赞同：0
> 
> 时间：2013-02-07T15:13:25.053
> 
> 标签：ios, networking, shared, nsurlrequest, drive

我正在编写一个 iPad 应用程序，它从 DMS（通过 https）下载文件。这工作正常。但现在我需要通过 vpn 连接从共享网络驱动器下载大型视频文件。

当我创建一个 NSURL 对象时

```
[NSURL fileURLWithPath:@"\\\\filer1\shareName\myFoler\movie.mp4" isDirectory:NO]; 
```

和一个 NSURLRequest

```
[NSURLRequest requestWithURL:url]; 
```

它会产生以下 URL：

```
file://localhost/%5C%5Cfiler1%5CshareName%5CmyFolder%5Cmovie.mp4 
```

为什么它在我的 \filer1 之前添加“localhost”？

以及如何从共享网络驱动器下载文件？

感谢您的帮助！干杯，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:53:19.807

ios 不支持直接访问 windows 网络共享上的文件。

另请参阅此问题：[iOS 上的 SMB/samba 支持？](https://stackoverflow.com/questions/8032314/smb-samba-support-on-ios)或者[iOS 是否支持通过 SMB 进行文件操作？](https://stackoverflow.com/questions/3660795/does-ios-support-file-operations-via-smb?lq=1)

# android - 在 Android 上处理图像资源大小

> ID：14754472
> 
> 赞同：0
> 
> 时间：2013-02-07T15:13:30.747
> 
> 标签：android, android-resources, android-resolution

我对在 Android 中管理图形资源有点困惑。试图阅读[这个文档](http://developer.android.com/guide/practices/screens_support.html)，但它只会让我更加困惑。谁能给我一些我应该如何处理以下情况的例子？

假设我的布局中有一个图像，它将被缩放以填充屏幕宽度。我应该生成什么图像尺寸（以像素为单位）以及我应该对这些资源应用什么配置限定符（drawable-{qualifier}）以涵盖所有主要的 dpi 和屏幕尺寸（平板电脑和手机）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:10:19.880

如果你想要一张应该填满屏幕的图像，最好使用[9-patch images](http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch)。这样，您的图像可以自动缩放以适合设备。因为即使图像具有正确的密度，实际的屏幕尺寸也会有所不同。例如，智能手机和平板电脑都可以是 hdpi，但屏幕尺寸（和实际像素数）完全不同。

因此，针对大多数设备的最简单方法是，当涉及到应该填满整个屏幕宽度的图像时，使用 9-patch 图像并创建它的 ldpi、mdpi、hdpi 和 xhdpi 版本。这样，图像将根据密度自动选择，然后拉伸以适合设备。

android sdk 还提供了一个工具来帮助创建 9-patch 图像[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

# xml - 将 Google 文档保存到 Xml

> ID：14754473
> 
> 赞同：1
> 
> 时间：2013-02-07T15:13:34.970
> 
> 标签：xml, xmlwriter, google-docs

因此，我正在努力使用 SpreadsheetEntry.SaveToXml(System.Xml.XmlWriter) 将 google doc 电子表格保存到 xml，但出现以下错误：

System.Xml.dll 中发生“System.Xml.XmlException”类型的未处理异常附加信息：前缀“”不能从“”重新定义为“ [http://www.w3.org/2005/Atom](http://www.w3.org/2005/Atom) ”相同的起始元素标记。

我的代码在下面，我几乎可以肯定我正确使用了 API……有人能告诉我如何解决这个错误吗？它可以创建文件，但它从不向其中写入任何内容。

```
 public void backUpSpreadsheets()
    {
        SpreadsheetFeed allSpreadSheets = this.allSheets;

        foreach(SpreadsheetEntry sheet in this.allSheets.Entries)
        {
            using (XmlWriter writer = XmlWriter.Create(@"C:\Users\BagpipesJohnson\Desktop\testing\" + sheet.Title.Text + ".xml"))
                sheet.SaveToXml(writer);
        }
    } 
```

谢谢

# c# - 使用 mod 运算符减少文本框中的值

> ID：14754474
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:13:36.643
> 
> 标签：c#, modulo

好的，所以我已经创建了这个自动售货机申请表，但我在摆脱变化时遇到了问题。这台机器在一天开始时有 50 个 10p。一杯汽水要 40 便士，所以，如果用户投入 50 便士，他将得到 10 便士的零钱。我有一个文本框显示机器中 10p 的数量，所以一开始是 50，在他输入 50p 之后它将是 55。但是，现在他必须得到 10p 更改（我有一个释放更改按钮），我想要文本框中 10p 的数量达到 54...有什么想法吗？我尝试使用 mod 运算符，但不知道如何使用它：

```
 decimal change = decimal.Parse(txtChange.Text)

        if (change % 10 > 1)
        {
            int tenPenny = int.Parse(txt_BoxTenPenny.Text);
            int totalTenPen = tenPenny - 1;
            txt_BoxTenPenny.Text = totalTenPen.ToString();
        } 
```

我知道这是不对的，当我进行研究时，他们使用 % 运算符并使用数字 10 作为分子..所以..我有点迷失了。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:18:03.017

像这样的东西：

```
 decimal change = decimal.Parse(txtChange.Text)

    if (change % 10 > 0)
    {
        int tenPenny = int.Parse(txt_BoxTenPenny.Text);
        int totalTenPen = tenPenny - (change % 10);
        txt_BoxTenPenny.Text = totalTenPen.ToString();
    } 
```

但假设在此之前，您已将用户放入机器的 50p 添加到`txt_BoxTenPenny`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:20:41.963

如果您试图确定欠用户多少 10 美分，则使用以下方法计算：

```
int tenPennies = change / 10 
```

与模数 (%) 运算符相反，因此：

```
 decimal change = decimal.Parse(txtChange.Text)

    int tenPenny = int.Parse(txt_BoxTenPenny.Text);
    int totalTenPen = tenPenny - change / 10 ;
    txt_BoxTenPenny.Text = totalTenPen.ToString(); 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:25:27.480

模运算符 ( `%`) 返回除法运算的*余数*。例如，`23 MOD 10 = 3`。

在这种情况下，我相信你想要整数除法，或者`Floor`. 也就是说，您想划分并丢弃剩余部分。

由于您使用的是`decimal`，我想`change`将包含`0.10`10p。在这种情况下，请尝试以下操作：

```
//calculate the number of 10p coins you will get for change
var tenPenniesChange = (int)Math.Floor(change / 0.10m);

if(tenPenniesChange > 0)
    txt_BoxTenPenny.Text = (int.Parse(txt_BoxTenPenny.Text) - tenPenniesChange).ToString();

change -= tenPenniesChange * 0.10; 
```

注意`Math.Floor`函数的使用。如果你有`change = 0.13`你会得到`tenPenniesChange = 1`。减法后，您将得到`change = 0.03`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T15:41:59.507

这可能有一些用处： [发布自动售货机更改：使用 C# 递归构建和搜索树](http://patrickjarfish.com/blog/?p=13)

# java - 以编程方式使用 java 将图像上传到谷歌应用引擎 blobstore

> ID：14754476
> 
> 赞同：2
> 
> 时间：2013-02-07T15:13:49.837
> 
> 标签：java, google-app-engine, blobstore, image-upload

我已经在 google 应用引擎页面中观看了“将文件写入 Blobstore（实验）”。

这就是我所拥有的：

```
// Get a file service
  FileService fileService = FileServiceFactory.getFileService();

  // Create a new Blob file with mime-type "text/plain"
  AppEngineFile file = fileService.createNewBlobFile("text/plain");

  // Open a channel to write to it
  boolean lock = false;
  FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);

  // Different standard Java ways of writing to the channel
  // are possible. Here we use a PrintWriter:
  **PrintWriter** out = new PrintWriter(Channels.newWriter(writeChannel, "UTF8"));
  out.println("The woods are lovely dark and deep.");
  out.println("But I have promises to keep.");

  // Close without finalizing and save the file path for writing later
  out.close();
  String path = file.getFullPath();

  // Write more to the file in a separate request:
  file = new AppEngineFile(path);

  // This time lock because we intend to finalize
  lock = true;
  writeChannel = fileService.openWriteChannel(file, lock);

  // This time we write to the channel directly
  writeChannel.write(ByteBuffer.wrap
            ("And miles to go before I sleep.".getBytes()));

  // Now finalize
  writeChannel.closeFinally();

  // Later, read from the file using the file API
  lock = false; // Let other people read at the same time
  FileReadChannel readChannel = fileService.openReadChannel(file, false);

  // Again, different standard Java ways of reading from the channel.
  BufferedReader reader =
          new BufferedReader(Channels.newReader(readChannel, "UTF8"));
       String line = reader.readLine();
  // line = "The woods are lovely dark and deep."

  readChannel.close();

  // Now read from the file using the Blobstore API
  BlobKey blobKey = fileService.getBlobKey(file);
  BlobstoreService blobStoreService = BlobstoreServiceFactory.getBlobstoreService();
  String segment = new String(blobStoreService.fetchData(blobKey, 30, 40)); 
```

不幸的是，这仅适用于文本文件。我认为`PrintWriter`应该更改为，`ImageWriter`但在谷歌应用引擎中，`ImageWriter`不支持。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:43:14.900

您可以简单地将二进制数据写入 blobstore：

```
byte[] yourBinaryData = // get your data from request
writeChannel.write(ByteBuffer.wrap(yourBinaryData)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T01:21:37.797

你应该做这个：

```
public static BlobKey toBlobstore(Blob imageData) throws FileNotFoundException,     FinalizationException, LockException, IOException {
    if (null == imageData)
        return null;

    // Get a file service
    FileService fileService = FileServiceFactory.getFileService();

    // Create a new Blob file with mime-type "image/png"
    AppEngineFile file = fileService.createNewBlobFile("image/jpeg");// png

    // Open a channel to write to it
    boolean lock = true;
    FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);

    // This time we write to the channel directly
    writeChannel.write(ByteBuffer.wrap
        (imageData.getBytes()));

    // Now finalize
    writeChannel.closeFinally();
    return fileService.getBlobKey(file);
} 
```

# siebel - 如何在 Siebel CRM Desktop 中自动填充日期字段？

> ID：14754477
> 
> 赞同：0
> 
> 时间：2013-02-07T15:13:51.043
> 
> 标签：siebel

每当我创建一个新活动时，我都需要一个自动填充的日期字段（它将自动填充但呈灰色显示，除非需要选中旁边的复选框）。

创建新活动时，我会根据日期字段执行验证。由于未选中日期字段复选框，因此未考虑验证值。

任何帮助或建议表示赞赏。

谢谢。贾亚·维涅什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:34:18.937

*   利用`predefault`和`postdefault`值来填充当前日期。
*   设置字段只读（BC 字段用户属性）。您可以在对象资源管理器的业务组件下找到它。
*   字段只读允许您根据来自同一 BC 或连接字段的其他字段的值将字段设为只读。

> 创建新活动时，我会根据日期字段执行验证。由于未选中日期字段复选框，因此未考虑验证值。

*   您的这个要求并不清楚您到底想要验证什么。由于您默认填充它，因此我认为验证您自己的自动填充数据没有意义。好吧，我在下面提供了一个建议
*   有两种类型的验证，1\. 使用配置或 2\. 使用脚本。我不太确定它是否可以通过配置来实现，但可以通过重写来编写脚本`BusComp_presetFieldValue`，`BusComp_preWriteValue`. 填充字段时执行的第一个。当你提交记录时，后一个。

假设您的要求，我有答案。如果您有任何问题或需要澄清，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T12:54:50.313

您可以将字段的 Predefault 属性添加为以下系统：TimeStamp

# c# - 更新 Autofac 后出现奇怪的异常

> ID：14754479
> 
> 赞同：9
> 
> 时间：2013-02-07T15:13:55.657
> 
> 标签：c#, exception, asp.net-mvc-4, autofac

我之前有一个 MVC4 应用程序，我已经更新了 Autofac 的版本，一切正常，现在我有这个奇怪的异常。

请帮忙！？

```
Method not found: 'Autofac.Builder.IRegistrationBuilder`3<!0,!1,!2> Autofac.Builder.IRegistrationBuilder`3.InstancePerMatchingLifetimeScope(System.Object)'.

Line 22:             var builder = new ContainerBuilder();
Line 23:             builder.RegisterFilterProvider();
Line 24:             builder.Register(x => new AuthorizationService()).As<IAuthService>().InstancePerHttpRequest();
Line 25:             builder.Register(x => new HeaderRepository()).As<IUIHeaderRepository>().InstancePerHttpRequest();
Line 26:             builder.Register(x => new PageBuilder()).As<IUPageBuilder>().InstancePerHttpRequest(); 
```

堆栈跟踪：

```
 [MissingMethodException: Method not found: 'Autofac.Builder.IRegistrationBuilder`3<!0,!1,!2> Autofac.Builder.IRegistrationBuilder`3.InstancePerMatchingLifetimeScope(System.Object)'.]
       Autofac.Integration.Mvc.RegistrationExtensions.InstancePerHttpRequest(IRegistrationBuilder`3 registration) +0
       Application.UI.Web.Services.HttpDependencyInjectionResolver.RegisterDependencies() in c:\Users\user\Documents\Visual Studio 11\Projects\MyProject\Application.UI.Web\Services\HttpDependencyInjectionResolver.cs:24
       Application.UI.Web.MvcApplication.Application_Start() in c:\Users\user\Documents\Visual Studio 11\Projects\MyProject\Application.UI.Web\Global.asax.cs:42

    [HttpException (0x80004005): Method not found: 'Autofac.Builder.IRegistrationBuilder`3<!0,!1,!2> Autofac.Builder.IRegistrationBuilder`3.InstancePerMatchingLifetimeScope(System.Object)'.]
       System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859441
       System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
       System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
       System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
       System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

    [HttpException (0x80004005): Method not found: 'Autofac.Builder.IRegistrationBuilder`3<!0,!1,!2> Autofac.Builder.IRegistrationBuilder`3.InstancePerMatchingLifetimeScope(System.Object)'.]
       System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873784
       System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
       System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T15:15:23.707

您还需要将[Autofac.Integration.Mvc](http://code.google.com/p/autofac/wiki/MvcIntegration)更新到相应的版本。

如果这没有帮助，请确保两个文件的新版本实际上都在执行代码的文件夹中。也许其中之一无法复制到 IIS 文件夹？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T10:47:47.483

很可能您正在使用与方法不兼容的 asp.net mvc 3`InstancePerHttpRequest()`

这是找到 autofac mvc 3 contrib （忘记包的名称）。就我而言，升级到 mvc 4 解决了这个问题。

# php - php数组合并/合并

> ID：14754481
> 
> 赞同：0
> 
> 时间：2013-02-07T15:14:00.510
> 
> 标签：php, arrays

嗨，所有stackoverflow成员，请帮助我解决有关数组操作的问题。

```
stores_array:  
Array
(
    [0] => store1
    [1] =>store2
)  

items_array:  
Array  
(  
  [electronics]=>led tv  
  [cosmetics]=>eyeliner  
  [fruits]=>apple 
  [vegetables]=>cabbage  
) 
```

这是我到目前为止所拥有的：

```
$new_array = array();
  foreach($stores_array as $t) {
      $new_array[$t] = $items_array;
  }

    echo '<pre>';
    print_r($new_array);  
    echo '<pre/>'; 
```

这是输出：

```
Array
(
[store1] => Array
    (
      [electronics]=>led tv  
      [cosmetics]=>eyeliner  
      [fruits]=>apple 
      [vegetables]=>cabbage  
    )  
[store2] => Array
    (
      [electronics]=>led tv  
      [cosmetics]=>eyeliner  
      [fruits]=>apple 
      [vegetables]=>cabbage  
    )

) 
```

这是我想要实现的目标：
我想在每个数组中添加一些其他值。
请看我打算添加的箭头。

```
Array
(
[store1] => Array
    (
      [electronics]=>led tv  
      [cosmetics]=>eyeliner  
      [fruits]=>apple 
      [vegetables]=>cabbage
      [store]=>store1  <------- how can i add these?
    )  
[store2] => Array
    (
      [electronics]=>led tv  
      [cosmetics]=>eyeliner  
      [fruits]=>apple 
      [vegetables]=>cabbage 
      [store]=>store2  <------- how can i add these?
    )

) 
```

提前谢谢大家..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:17:36.280

试试这个：

```
$new_array = array();
foreach($stores_array as $t) {
    $new_array[$t] = $items_array;
    $new_array[$t]["store"]=$t;
}

echo '<pre>';
print_r($new_array);  
echo '<pre/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:17:20.917

```
foreach (array_keys($my_array) as $key) {
    $my_array[$key]['store'] = $key;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:17:39.620

如果我理解问题，这应该相对容易。试试这个：

```
$new_array = array();
foreach($stores_array as $t) {
    $new_array[$t] = $items_array;
    $new_array['store'] = $t;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:17:46.703

您只需在数组末尾添加值。

```
 $new_array = array();

  foreach($stores_array as $t) {
      $items_array[] = $t;
      $new_array[$t] = $items_array;
  } 
```

无论如何，如果您只是想以某种方式检索密钥，则无需将其存储在任何地方，您可以随时使用`key($array)`

在你的情况下：

```
foreach($new_array as $data){
    echo key($data);
} 
```

[您可以在PHP 文档](http://php.net/manual/es/function.key.php)中找到有关该`key`函数的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T15:25:50.977

正如 Marc B 所说，这是一种冗余数据，但这是我的答案：

$new_array = array();

```
foreach($stores_array as $t) {
    $new_array[$t] = $items_array;
    $new_array[$t]['store'] = $t;
} 
```

# awk - 使用 awk 将列附加到文件

> ID：14754484
> 
> 赞同：3
> 
> 时间：2013-02-07T15:14:07.703
> 
> 标签：awk

我有一个有点长的 awk 脚本，我想在文件的“右侧”附加两列。我正在处理以下文件：

```
Node    temporary_Temperature   steady_Temperature  temporary_Sight steady_Sight    
1                   x                   x                   -                   -                   
2                   x                   x                   -                   -                   
3                   -                   -                   -                   -                   
4                   -                   -                   -                   -                   
5                   x                   x                   x                   -                   
6                   -                   -                   -                   -                   
7                   -                   -                   -                   -                   
8                   -                   -                   -                   -                   
9                   -                   -                   -                   -                   
10                  -                   -                   -                   -                   
11                  -                   -                   -                   -                   
12                  -                   -                   -                   -                   
13                  x                   x                   -                   -                   
14                  x                   x                   -                   -                   
15                  x                   -                   -                   -                   
16                  -                   -                   -                   - 
```

数据已经写入一个文件，我想使用 awk 迭代这个文件中的行，比方说，追加两列。在标题行，我想附加列`foo`and `bar`，然后根据其他内容附加`x`or到每一行。`-`我怎样才能做到这一点？由于我处于较长脚本的中间，除非有某种方法可以从 awk 脚本中调用 sed 并打印到同一个文件，否则我不想使用 sed？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:36:28.627

您在这里可能面临的问题是，每当 awk 修改字段时，它都会重写您的`$0`.，用 OFS 替换 IFS。如果您的 FS 是“任意数量的空白”（默认 FS），并且它被替换为“空格”（默认 OFS），您将丢失格式。

展示：

```
[ghoti@pc ~]$ printf 'one    two\tthree\n'
one    two      three
[ghoti@pc ~]$ printf 'one    two\tthree\n' | awk '{$4 = "four"} 1'
one two three four 
```

如果您真的不想修改每一行的*字段*，而只想附加一个字符串，则可以这样做而无需重写字段分隔符：

```
[ghoti@pc ~]$ printf 'one    two\tthree\n' | awk '{print $0 "\tfour"}'
one    two      three   four 
```

如果没有看到您的脚本或您想要附加的数据类型，我很难提供我知道将适用于您的情况的具体示例，但这里有一个示例可以帮助您入门：

```
 NR == 1 {
    print $0 "\tfoo\tbar";
    next;
  }
  {
    print $0 "\t" (conditionone ? "x" : "-") "\t" (conditiontwo ? "x" : "-");
  } 
```

If you need help crafting the conditions, please include them in your question. I've used short-forms in the code above; you could obviously space things out and make multiple-line prints using `printf()`, or set variables based on the two conditions to be included in your `print`.

As an alternative, you could just re-do your formatting as you go through the input data. For example (assuming the trailing spaces in your question are really what your input file looks like):

```
BEGIN {
  fmt="%-20s%-20s%-20s%-20s%-20s%-20s%s\n";
}

NR == 1 {
  printf("%s%12s%-20s%-20s\n", $0, " ", "foo", "bar");
  next;
}

{ foo="-"; bar="-"; }

conditionone { foo="x"; }
conditiontwo { bar="x"; }

{
  printf(fmt, $1, $2, $3, $4, $5, foo, bar);
} 
```

You'd probably have to fiddle with your spacing on line 1.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:39:21.233

If it's the formatting that's a problem, pipe the output through `column -t`

Example:

```
awk '
    NR==1 {print $0, "foo", "bar"; next} 
    {print $0, ($2=="x"?"-":"x"), ($4=="x"?"-":"x")}
' file | column -t 
```

outputs

```
Node  temporary_Temperature  steady_Temperature  temporary_Sight  steady_Sight  foo  bar
1     x                      x                   -                -             -    x
2     x                      x                   -                -             -    x
3     -                      -                   -                -             x    x
4     -                      -                   -                -             x    x
5     x                      x                   x                -             -    -
6     -                      -                   -                -             x    x
7     -                      -                   -                -             x    x
8     -                      -                   -                -             x    x
9     -                      -                   -                -             x    x
10    -                      -                   -                -             x    x
11    -                      -                   -                -             x    x
12    -                      -                   -                -             x    x
13    x                      x                   -                -             -    x
14    x                      x                   -                -             -    x
15    x                      -                   -                -             -    x
16    -                      -                   -                -             x    x 
```

# grails - Grails 控制器 - 动态方法文档

> ID：14754485
> 
> 赞同：1
> 
> 时间：2013-02-07T15:14:07.623
> 
> 标签：grails, controller

我想知道找出哪些动态方法添加到某些变量的最佳方法是什么。我没有在[文档](http://grails.org/doc/latest/ref/Controllers/params.html)或控制器类的 javadoc 中看到它。

一个例子是 grails 控制器中的 params 对象：

```
params.int('max') 
```

int 方法已注入，我想知道此特定地图有哪些额外的方法可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:51:15.223

不幸的是，这些方法没有得到很好的记录。最好的文档在文档的[Simple Type Converters](http://grails.org/doc/latest/guide/single.html#typeConverters)部分。在 Grails 1.2 的发行说明中也简要提到了它们，这可能更没有帮助。

[Groovy JDK](http://groovy.codehaus.org/groovy-jdk/)也是一个很好的资源，可以查看 Groovy 向标准 Java 类添加了哪些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:07:17.540

几天前我收到了**Grails 2 权威指南的副本，正如这里所说，原始类型有 8 种转换方法：**

> ... Grails 提供了方便的方法来对请求参数进行这种类型的转换。这些方法在对象上可用， 并且`params`名称对应于 Java 定义的所有八种基本类型（`Boolean`、`byte`、`char`、`short`、 `int`、`long`和）。每个方法都接受一个或两个参数。第一个参数是要转换的请求参数的名称，可选的第二个参数是一个默认值，如果找不到对应的请求参数或者在转换过程中发生错误，将返回该值...`float``double`

并且还提到了一个名为的转换方法`list`：

> ...另一种类型的转换方法被命名为`list`。该`list`方法在处理多个同名请求参数时很有用...

Brown, JS, Rocher, G.，（2013 年）。*Grails 2 权威指南*。纽约：Apress。

国际标准书号：978-1-4302-4377-9

[亚马逊](https://rads.stackoverflow.com/amzn/click/com/1430243775)

我希望引用它不会违反任何版权...

是的，我认为书籍是解决更深入问题的重要来源，我绝对会向您或任何其他想要深入了解 Grails 的程序员推荐**《Grails 2 权威指南》 。**此外，dzone.com 上的[Grails 邮件列表](http://grails.org/Mailing+lists)和[Groovy Zone](http://groovy.dzone.com/)是解决任何 Grails 相关问题和/或新闻的好资源。正如@doelleri 在他的回答中提到的， [Groovy JDK 文档](http://groovy.codehaus.org/groovy-jdk/)也很有帮助。

# sql - 分组按列抛出查询

> ID：14754486
> 
> 赞同：0
> 
> 时间：2013-02-07T15:14:11.133
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个查询来检查数据库以查看客户是否一天访问过多次。如果他们有，它会计算访问次数，然后告诉我他们访问的时间。问题是它把“Tickets.lcustomerid”扔进了 group by 子句，导致我错过了 5 条记录（没有条形码的客户）。如何更改以下查询以从 group by 子句中删除“tickets.lcustomerid”...如果删除它，我收到错误消息，告诉我“Tickets.lCustomerID”不是有效选择，因为它不是聚合的一部分或groupby 子句。

有效的查询：

```
SELECT        Customers.sBarcode, CAST(FLOOR(CAST(Tickets.dtCreated AS FLOAT)) AS DATETIME) AS dtCreatedDate, COUNT(Customers.sBarcode) AS [Number of Scans], 
                         MAX(Customers.sLastName) AS LastName
FROM            Tickets INNER JOIN
                         Customers ON Tickets.lCustomerID = Customers.lCustomerID
WHERE        (Tickets.dtCreated BETWEEN @startdate AND @enddate) AND (Tickets.dblTotal <= 0)
GROUP BY Customers.sBarcode, CAST(FLOOR(CAST(Tickets.dtCreated AS FLOAT)) AS DATETIME)
HAVING        (COUNT(*) > 1)
ORDER BY dtCreatedDate 
```

输出是：

```
sBarcode   dtcreated Date      Number of Scans  slastname    
1234     1/4/2013 12:00:00 AM         2          Jimbo         
         1/5/2013 12:00:00 AM         3          Jimbo2       
1578     1/6/2013 12:00:00 AM         3          Jimbo3 
```

我当前的带有子查询的查询

```
SELECT customers.sbarcode, 
       Max(customers.slastname)                                  AS LastName, 
       Cast(Floor(Cast(tickets.dtcreated AS FLOAT)) AS DATETIME) AS 
       dtCreatedDate, 
       Count(customers.sbarcode)                                 AS 
       [Number of Scans], 
       Stuff ((SELECT ', ' 
                      + RIGHT(CONVERT(VARCHAR, dtcreated, 100), 7) AS [text()] 
               FROM   tickets AS sub 
               WHERE  ( lcustomerid = tickets.lcustomerid ) 
                      AND ( dtcreated BETWEEN Cast(Floor(Cast(tickets.dtcreated 
                                                              AS 
                                                              FLOAT)) AS 
                                                   DATETIME 
                                              ) 
                                              AND 
Cast(Floor(Cast(tickets.dtcreated 
AS FLOAT 
)) AS 
DATETIME 
) 
+ '23:59:59' ) 
AND ( dbltotal <= '0' ) 
FOR xml path('')), 1, 1, '')                      AS [Times Scanned] 
FROM   tickets 
       INNER JOIN customers 
               ON tickets.lcustomerid = customers.lcustomerid 
WHERE  ( tickets.dtcreated BETWEEN @startdate AND @enddate ) 
       AND ( tickets.dbltotal <= 0 ) 
GROUP  BY customers.sbarcode, 
          Cast(Floor(Cast(tickets.dtcreated AS FLOAT)) AS DATETIME), 
          tickets.lcustomerid 
HAVING ( Count(*) > 1 ) 
ORDER  BY dtcreateddate 
```

当前输出（注意没有条形码的记录丢失）是：

```
sBarcode   dtcreated Date      Number of Scans  slastname    Times Scanned
1234     1/4/2013 12:00:00 AM         2          Jimbo         12:00PM, 1:00PM
1578     1/6/2013 12:00:00 AM         3          Jimbo3        03:05PM, 1:34PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:20:59.853

更新：根据我们的“聊天”，似乎 customerid 不是唯一字段，但条形码是，即使客户 ID 是主键。

因此，为了不在子查询中 GROUP BY 客户 ID，您需要加入其中的第二个客户表，以便实际加入条形码。

试试这个：

```
SELECT customers.sbarcode, 
       Max(customers.slastname)                                  AS LastName, 
       Cast(Floor(Cast(tickets.dtcreated AS FLOAT)) AS DATETIME) AS 
       dtCreatedDate, 
       Count(customers.sbarcode)                                 AS 
       [Number of Scans], 
       Stuff ((SELECT ', ' 
                      + RIGHT(CONVERT(VARCHAR, dtcreated, 100), 7) AS [text()] 
               FROM   tickets AS subticket
               inner join
               customers as subcustomers
               on
               subcustomers.lcustomerid = subticket.lcustomerid
               WHERE  ( subcustomers.sbarcode = customers.sbarcode ) 
                      AND ( subticket.dtcreated BETWEEN Cast(Floor(Cast(tickets.dtcreated 
                                                              AS 
                                                              FLOAT)) AS 
                                                   DATETIME 
                                              ) 
                                              AND 
Cast(Floor(Cast(tickets.dtcreated 
AS FLOAT 
)) AS 
DATETIME 
) 
+ '23:59:59' ) 
AND ( dbltotal <= '0' ) 
FOR xml path('')), 1, 1, '')                      AS [Times Scanned] 
FROM   tickets 
       INNER JOIN customers 
               ON tickets.lcustomerid = customers.lcustomerid 
WHERE  ( tickets.dtcreated BETWEEN @startdate AND @enddate ) 
       AND ( tickets.dbltotal <= 0 ) 
GROUP  BY customers.sbarcode, 
          Cast(Floor(Cast(tickets.dtcreated AS FLOAT)) AS DATETIME)
HAVING ( Count(*) > 1 ) 
ORDER  BY dtcreateddate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:44:51.217

我无法直接解决您的问题，因为我不了解您的数据模型或您试图通过此查询完成的工作。但是，我可以就如何自己解决问题给您一些建议。

首先，您是否准确了解您要完成的工作以及表格如何组合在一起？如果是，请继续下一步，如果不是，请先了解此知识，没有此了解，您将无法进行复杂的查询。

接下来，分步分解您要完成的工作，并确保在进行其余部分之前已涵盖每个步骤。因此，在您的情况下，您似乎缺少一些客户。从一个新查询开始（我很确定这个查询不止一个问题）。所以从 join 和 where 子句开始。

我怀疑您可能需要从客户开始并左连接到票（这会将 where 条件移动到左连接，因为它们在票上）。这将为您提供所有客户，无论他们是否有票。如果这不是您想要的，则使用 jon 和 where 子句（并在您尝试解决问题时使用 select *），直到您返回所需的确切客户记录集。在此阶段使用 select * 的原因是查看数据中的哪些内容可能导致您遇到的问题。这可能会告诉你如何修复。

通常我从连接开始，然后一次添加一个 where 子句，直到我知道我得到了正确的初始记录集。如果您有多个联接，请一次执行一次，以了解您何时突然开始拥有比预期更多或更少的记录。

然后进入更复杂的部分。一次添加一个并检查结果。如果您突然从 10 条记录变为 5 或 15 条，那么您可能遇到了问题。当您一次一步工作并遇到问题时，您会确切地知道导致问题的原因，从而更容易找到和修复。

Group BY 很重要，要彻底理解。您必须拥有 group by 中的每个非聚合字段，否则它将不起作用。把它想象成像万有引力定律一样的定律。这不是你可以改变的。但是，它可以通过使用派生表或 CTE 来解决。如果你不知道它们是什么，请仔细阅读它们，当你接触复杂的东西时，它们是非常有用的技术，你应该彻底理解它们。我怀疑您将需要在这里使用派生表方法来仅对您需要的内容进行分组，然后将该派生表加入到其余查询中以获取 ontehr 字段。我将展示一个简单的例子：

```
select 
      t1.table1id
    , t1.field1
    , t1.field2
    , a.field3
    , a.MostRecentDate
From table1 t1
JOIN
    (select t1.table1id, t2.field3, max (datefield) as MostRecentDate 
    from table1 t1
    JOin Table2 t2 on t1.table1id = t2.table1id
    Where t2.field4 = 'test'
    group by t1.table1id,t2.field3) a
    ON a.table1id = t1.table1id 
```

希望这种方法可以帮助您解决这个问题。

# javascript - 带有 Bower 的 CryptoJS，如何管理这种依赖关系？

> ID：14754488
> 
> 赞同：12
> 
> 时间：2013-02-07T15:14:20.527
> 
> 标签：javascript, dependencies, bower, cryptojs

我需要用 Bower管理[CryptoJS 。](http://code.google.com/p/crypto-js/)该项目托管在 code.google.com 上。可以作为[zip 文件](http://code.google.com/p/crypto-js/downloads/list)或通过[SVN](http://crypto-js.googlecode.com/svn/tags)下载。

Bower 可以下载解压缩的 zip 文件或从 SVN 下载所有组件并将它们放在`crypto`文件夹中吗？

`.bowerrc`文件，定义下载文件夹：

```
{
  "directory": "app/vendor"
} 
```

我试过这个`component.json`文件（失败，下载页面本身）：

```
{
  "name": "Backbone Client",
  "version": "1.0.0",
  "dependencies": {
     "crypto": "http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/"
  }
} 
```

另一个尝试（`hmac.js`覆盖`core.js`，它被保存为`index.js`）：

```
{
  "name": "Backbone Client",
  "version": "1.0.0",
  "dependencies": {
    "crypto":
       "http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/core.js",
    "crypto":
       "http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/hmac.js"
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-07T15:39:42.020

找到阅读[鲍尔官方页面](http://twitter.github.com/bower/)的方式：

> 如您所见，可以通过名称、Git 端点、GitHub 速记、URL 或本地路径来安装包。如果您从指向 zip 或 tar 文件的 URL 安装，bower 将自动提取其内容。

`component.json`：

```
{
  "name": "Backbone Client",
  "version": "1.0.0",
  "dependencies": {
    "crypto-js": "http://crypto-js.googlecode.com/files/CryptoJS%20v3.1.2.zip"
  }
} 
```

# ruby-on-rails - Rails 2.3.16 关联在使用关联时给出 ArgumentError

> ID：14754493
> 
> 赞同：0
> 
> 时间：2013-02-07T15:14:30.217
> 
> 标签：ruby-on-rails, associations, rails-activerecord

我正在将一个遗留项目从 Rails 2.3.2 升级到 2.3.16（由于最近公开的漏洞），但是当我尝试访问`has_many`任何模型上的关联时，我得到一个`ArgumentError`from `sanitize_sql`.

```
class User
  has_many :games, :dependent => destroy
end

class Game
  belongs_to :user
end 
```

当我尝试调用`Game.last.user`它返回正确的`User`对象，但调用`User.last.games`我得到以下错误堆栈：

```
ArgumentError: wrong number of arguments (2 for 1)
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_proxy.rb:174:in `sanitize_sql'
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_proxy.rb:174:in `send'
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_proxy.rb:174:in `sanitize_sql'
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_collection.rb:41:in `find'
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_collection.rb:423:in `find_target'
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_collection.rb:365:in `load_target'
  from /home/username/application/shared/bundle/ruby/1.8/gems/activerecord-2.3.16/lib/active_record/associations/association_proxy.rb:140:in `inspect'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:310:in `output_value'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:159:in `eval_input'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:271:in `signal_status'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:155:in `eval_input'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:154:in `eval_input'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:71:in `start'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:70:in `catch'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/irb.rb:70:in `start'
  from /home/username/.rvm/rubies/ruby-1.8.7-p371/bin/irb:17 
```

我在 Ruby 1.8.7 上运行 Rails 2.3.16；如果我遗漏了任何其他可能有助于诊断问题的详细信息，请告诉我。

**编辑**

我似乎已经通过编辑文件中的错误行来临时解决这个问题，`activerecord-2.3.16/lib/active_record/associations/association_proxy.rb`如下所示：

```
# Forwards the call to the reflection class.
def sanitize_sql(sql, table_name = @reflection.klass.quoted_table_name)
  @reflection.klass.send(:sanitize_sql, sql) #, table_name)
end 
```

显然，我更喜欢更长期的解决方案，因为我不能 100% 确定这不会产生额外的连锁问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T02:31:45.430

我有同样的问题，找不到是什么原因造成的。

我也得出了编辑这一行的结论。我做了一个猴子补丁初始化程序：

```
module ActiveRecord
  module Associations
    class AssociationProxy #:nodoc:
      def sanitize_sql(sql, table_name = @reflection.klass.quoted_table_name)
        @reflection.klass.send(:sanitize_sql, sql)#, table_name)
      end
    end
  end
end 
```

我希望我能尽快找到真正的原因，因为这不应该是必要的。你的问题还有进展吗？

# ruby-on-rails - Ruby：将参数的哈希添加到函数的参数中：寻找更清洁的解决方案

> ID：14754508
> 
> 赞同：0
> 
> 时间：2013-02-07T15:15:05.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要调用一个参数是哈希的函数。对于它的参数，我有一个哈希和一个需要合并的属性。为此，我使用以下内容，它可以正常工作：

```
paramsHash={:att1=> "1", :att2=>"2"} #this is obtained from a function
result=MyClass.where({:att0=> "0"}.merge(paramsHash)) 
```

如前所述，这行得通，那里没有问题。我的问题是，有没有一个很好的红宝石花式方法来做到这一点？就像是

```
paramsHash={:att1=> "1", :att2=>"2"} #this is obtained from a function
result=MyClass.where(:att0=> "0", paramsHash.as_params) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:22:11.257

没有比这更好的方法了`merge`，我只是把它写成相反的方式，这样你就可以减轻花括号：

```
result = MyClass.where(params_hash.merge(att0: "0")) 
```

这是我能想到的编写代码的最奇特的方式。但是，它确实改变了哈希合并的方式，这对您在问题中提供的代码没有影响，但如果两个哈希中都存在相同的键，则可能会有所不同。

让您的红宝石更漂亮的其他事项：

*   ruby 中的局部变量通常使用带下划线的表示法而不是驼峰式，so`params_hash`和 not `paramsHash`。
*   赋值运算符、被赋值的变量和赋值之间的空格是常见的：`result = 'this'`而不是`result='this'`
*   与 Hashes 中的键值对相同​​：`{:this => 'is a hash'}`而不是`{:this=>'is a hash'}`在 ruby​​ 1.9\. 中，您甚至可以这样做`{this: 'is a hash'}`，这是 ruby​​ 1.9 符号作为哈希键的符号。
*   一些 ruby​​ists 喜欢减轻可选的大括号，如果你愿意，你也可以这样做：

    `result = MyClass.where params_hash.merge(att0: "0")`

    或者

    `result = MyClass.where(params_hash.merge att0: "0")`

# java - 清除java中通过class.forName加载的类

> ID：14754509
> 
> 赞同：3
> 
> 时间：2013-02-07T15:15:08.213
> 
> 标签：java, swing, user-interface, classloader, java-compiler-api

我创建了加载用户选择的 java(JPanel) 文件的程序。用户基本上选择了一个由 JavaCompiler 编译的 Java 文件，然后加载下一个生成的类文件。但是，当通过一些文本编辑器对 java 文件（JPanel）进行任何更改时，问题就来了，因为即使在关闭程序并重新运行项目之后，任何新的更改都不会反映在类文件中。

我认为同一个类文件会一次又一次地从内存中加载。

有没有办法从内存中清除加载的类？

**汇编：**

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
if (compiler != null) {
        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
        StandardJavaFileManager stdFileManager = compiler.getStandardFileManager(diagnostics, null, null);
        Iterable<? extends JavaFileObject> fileObjects = stdFileManager.getJavaFileObjectsFromFiles(filesToCompile);
        List<String> optionList = new ArrayList<String>();
        // set compiler's classpath to be same as the runtime's
        rootDir=Utility.createRootDir();
        optionList.addAll(Arrays.asList("-d", rootDir.getAbsolutePath(), "-classpath", System.getProperty("java.class.path")));
        // optionList.add(()
        try {
            stdFileManager.flush();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        CompilationTask task = compiler.getTask(null, stdFileManager,null, optionList, null, fileObjects);
        Boolean result = task.call();
        try {
            stdFileManager.flush();
            stdFileManager.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
} 
```

**加载：**

```
loader = new URLClassLoader(new URL[] { rootDir.toURI().toURL() });
cls = Class.forName(Utility.extractFQDN(sourceFile)+"."+Utility.extractClassName(sourceFile),true, loader); 
```

`panel= (JPanel) cls.newInstance();`

我已经用反编译器检查了编译的类文件，它已经更新了代码，但我不知道为什么以前的类文件是由类加载器从内存中加载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:38:25.623

**编辑：**

这是一个 SSCCE 将字符串重复编译为相同的类名并演示新行为。为了避免文件混乱，它在内存中完成所有操作。我认为这应该很容易适应您的应用程序。

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.lang.reflect.Method;
import java.net.URI;
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;

import javax.tools.FileObject;
import javax.tools.ForwardingJavaFileManager;
import javax.tools.JavaCompiler;
import javax.tools.JavaFileManager;
import javax.tools.JavaFileObject;
import javax.tools.JavaFileObject.Kind;
import javax.tools.SimpleJavaFileObject;
import javax.tools.ToolProvider;

public class Compile {
    static class OutFile extends SimpleJavaFileObject {
        private final ByteArrayOutputStream out = new ByteArrayOutputStream();

        OutFile(String name) {
            super(URI.create("memory:///" + name.replace('.','/') + Kind.CLASS.extension), Kind.CLASS);
        }

        @Override
        public OutputStream openOutputStream() throws IOException {
            return out;
        }
    }

    static class InFile extends SimpleJavaFileObject {
        final String code;

        InFile(String name, String code) {
            super(URI.create("string:///" + name.replace('.','/') + Kind.SOURCE.extension), Kind.SOURCE);
            this.code = code;
        }

        @Override
        public CharSequence getCharContent(boolean ignoreEncodingErrors) {
            return code;
        }
    }

    static class Loader extends ClassLoader {
        private final Map<String, OutFile> files = new HashMap<String, OutFile>();

        public OutFile add(String className) {
            OutFile file = new OutFile(className);
            files.put(className, file);
            return file;
        }

        @Override
        protected synchronized Class<?> loadClass(String name, boolean resolve) throws ClassNotFoundException {
            Class<?> c = findLoadedClass(name);
            if(c == null) {
                OutFile file = files.get(name);
                if(file == null) {
                    return super.loadClass(name, resolve);
                }

                c = defineClass(name, file.out.toByteArray(), 0, file.out.size());
            }

            if(resolve) {
                resolveClass(c);
            }

            return c;
        }
    }

    static class FileManager extends ForwardingJavaFileManager<JavaFileManager> {
        private final Loader loader = new Loader();

        protected FileManager(JavaFileManager fileManager) {
            super(fileManager);
        }

        public Class<?> getClass(String name) throws ClassNotFoundException {
            return loader.loadClass(name);
        }

        @Override
        public JavaFileObject getJavaFileForOutput(Location location, String className, Kind kind, FileObject sibling) throws IOException {
            return loader.add(className);
        }
    }

    public static void compileAndRun(String source) throws Exception {
        InFile in = new InFile("Main", "class Main {\npublic static void main(String[] args) {\n" + source + "\n}\n}");

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        FileManager manager = new FileManager(compiler.getStandardFileManager(null, null, null));

        compiler.getTask(null, manager, null, null, null, Collections.singletonList(in)).call();

        Method method = manager.getClass("Main").getMethod("main", String[].class);
        method.setAccessible(true);
        method.invoke(null, (Object)new String[0]);
    }

    public static void main(String[] args) throws Exception {
        compileAndRun("System.out.println(\"Hello\");");
        compileAndRun("System.out.println(\"World\");");
    }
} 
```

**原来的：**

`ClassLoader`（以及类似的子类`URLClassLoader`）将始终要求父类加载器加载该类，如果有父类的话。如果在构造它时没有显式设置父级，则父级将设置为系统类加载器。因此，您创建的所有新类加载器都推迟到系统类加载器，它已经定义了类。

要获得所需的行为，请将父级设置为 null：

```
loader = new URLClassLoader(new URL[] { rootDir.toURI().toURL() }, null); 
```

**编辑：**请注意，这只是一个问题，因为您正在将类编译到根目录，该根目录也在系统类加载器的类路径上。如果您编译到某个临时目录，系统类加载器将无法找到该类，而 URL 加载器将加载该类本身。

# vb.net - 将表单中的函数调用到模块中

> ID：14754510
> 
> 赞同：0
> 
> 时间：2013-02-07T15:15:09.907
> 
> 标签：vb.net

我的模块中有一个数组，所以我想在表单文本框中显示数组的内容，这是我的数组

```
Module Module1
    Sub AddCourse()
        Dim Subjects() = {"Ms Office 2007", "internet and commmunications", "Lifetime skills"}
        For i = 0 To UBound(Subjects) ' FOR LOOP TO WRITE AN ARRAY
            i = i +1
            Subjects(i) 
        Next
        txtComputer.Text = subjects() 
```

我的问题是，当我尝试在模块中使用我的 texbox txtComputer 时出现错误。

我的问题是，如何制作要在模块中使用的表单文本框

我收到一条错误消息，内容为“未声明错误'txtComputer'。由于其保护级别，它可能无法访问。”

我的问题是基于，我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:24:24.763

我有几个建议给你。

首先，不要使用`UBound`. 这是一个旧的 VB6 函数，仅用于向后兼容。您应该改用`Subjects.Length`.

接下来，当你增加`i`变量时，你不需要说`i = i + 1`. 您可以为此使用`+=`运算符（例如`i += 1`）。

但是，无论如何，您不应该在循环`i`内显式递增。`For`每次循环遍历循环时，循环都会自动为您增加变量。如果您在循环中自己明确地这样做，就像那样，它将跳过所有其他项目。

接下来，在这种情况下，您真的应该只使用`For Each`循环，而不是迭代器：

```
For Each subject As String in Subjects
    '...
Next 
```

接下来，您实际上并没有在循环内将这些项目连接在一起。你应该做这样的事情：

```
For Each subject As String in Subjects
    txtComputer.Text += subject
Next 
```

但是，在这种情况下，为了提高效率，你真的应该使用 a `StringBuilder`，像这样：

```
Dim builder As New StringBuilder()
For Each subject As String in Subjects
    builder.Append(subject)
Next
txtComputer.Text = builder.ToString() 
```

但是，所有这些都没有实际意义，因为您真正需要做的就是调用`String.Join`：

```
txtComputer.Text = String.Join(", ", Subject) 
```

至于为什么你不能从模块访问文本框，那是因为模块是一个单独的对象，所以文本框完全超出了范围。例如，如果您同时显示表单的两个实例怎么办？这个模块到底是怎么知道你指的是哪个表单的文本框？最简单的纠正方法是将表单的引用传递给模块的方法，如下所示：

```
Module Module1
    Sub AddCourse(f As MyFormName)
        f.txtComputer.Text = "Hello world"
    End Sub
End Module 
```

然后你可以从表单中调用它，如下所示：

```
AddCourse(Me) 
```

但是，这将是非常糟糕的做法。理想情况下，表单代码之外的任何内容都不应直接处理表单上的任何控件。因此，更好的方法是简单地让方法返回数据，然后让表单将它自己的控件设置为返回的数据，例如：

```
Module Module1
    Function GetCourse() As String
        Return "Hello world"
    End Function
End Module 
```

然后从如下形式调用它：

```
txtComputer.Text = GetCourse() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:19:56.757

您可以使用`String.Join`创建一个字符串来分隔每个主题`Environment.NewLine`：

```
txtComputer.Text = String.Join(Environment.NewLine, Subjects) 
```

您的 for 循环的问题在于它根本没有意义，因为您已经在一行中声明**并初始化了数组。**

如果您仍然想使用循环，您可以使用 a`StringBuilder`将所有字符串连接在一起：

```
Dim subjectBuilder = New System.Text.StringBuilder
For Each subject In Subjects
    subjectBuilder.Append(subject).Append(Environment.NewLine)
Next
If subjectBuilder.Length <> 0 Then subjectBuilder.Length -= Environment.NewLine.Length
txtComputer.Text = subjectBuilder.ToString() 
```

# java - NetBeans 制作的 jar 文件不会通过双击启动

> ID：14754511
> 
> 赞同：1
> 
> 时间：2013-02-07T15:15:12.287
> 
> 标签：java, netbeans-7

我知道这个问题已经在这里讨论过很多次了。我在带有 OSX 10.7.4 和 NetBeans 7.2.1 的 MAC 上运行

我不知道这是否是一个新的皱纹，我是一个java新手。无论如何，在项目窗口中选择了我的项目，它会显示该项目：

`Idealizer -> Source Packages -> components-> AlsRun.java, GraphingData.java, Idealizer.java, jButtonListenerExample.java`.

AlsRun 是主类。我可以在 IDE 中运行代码，也可以通过压缩 dist 并将其移动到任何地方并键入：`java -jar "Idealizer.jar`“（在“dist”中）。

在关于这个问题的其他讨论中，似乎涉及到 MANIFEST.MF。MANIFEST.MF 看起来是正确的：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_35-b10-428-11M3811 (Apple Inc.)
Class-Path: 
X-COMMENT: Main-Class will be added automatically by build
Main-Class: components.AlsRun 
```

我相信以下是两个大提示。

**大提示1**：

当我从命令行运行代码时，程序接管，屏幕上显示的程序名称是 "components.AlsRun" 。当我尝试通过双击（从查找器）启动它时，会启动一个程序并且出现的名称是“AlsRun”。在后一种情况下启动的程序什么都不做，我只能从“强制退出”中杀死它。

**大提示2**：

写完最后一句话后，我问自己如何从命令行杀死它。如果我通过双击运行程序然后运行`ps -A | grep java`它返回以下内容：

```
33383 ?? 0:00.84 /Library/Internet Plug-ins/JavaAppletPlugin.plugin/Contents/Home/bin/java 
```

-jar /Users/pearson/NetBeansProjects/Idealizer/dist/Idealizer.jar

当我从命令行运行程序然后`ps -A | grep java`返回

```
33394 ttys001    0:01.46 /usr/bin/java -jar Idealizer.jar 
```

它运行不同版本的java，具体取决于我是通过双击还是命令行启动它。

显然 NetBeans 认为我正在创建一个不同于应用程序的“Applet”？

我在这里不知所措。为我产生错误的代码的最短版本是：

```
package components; 
import javax.swing.JFileChooser;

public class AlsRun {

public static void main(String[] args) {

    JFileChooser fc = new JFileChooser();
    int returnVal = fc.showOpenDialog(null);        

    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:59:30.690

Following the instructions here: [http://www.oracle.com/technetwork/articles/javase/javatomac3-137430.html](http://www.oracle.com/technetwork/articles/javase/javatomac3-137430.html)

fixed the problem.

# mongodb - 如何将数组项拉入mongo中的变量

> ID：14754512
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:15:14.377
> 
> 标签：mongodb

如何将数组项拉入变量中：假设这是我的文档：

```
{
    name: 'Vor',
    nums: [1,2,3,4,5]
} 
```

如何创建一个包含所有这些项目的数组？

像`my_nums = ...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:18:40.333

嗯，不就是： var my_nums = doc.nums 吗？

# python - Python：任何不使用 PIL 在图像上绘制文本的想法

> ID：14754519
> 
> 赞同：0
> 
> 时间：2013-02-07T15:15:39.260
> 
> 标签：python, image, python-imaging-library, drawtext

我使用 Python 3.3，并且我已经安装（只需执行下载的文件 .exe，不需要任何设置？）从下面的链接中拼写 PIL，不幸的是我导入 PIL 是错误未解决的 PIL。为什么？

[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

```
import PIL
from PIL import Image
from PIL import ImageDraw
from PIL import ImageFont
font = ImageFont.truetype("C:/arial.ttf",25)
img=Image.new("RGBA", (200,200),(120,20,20))
draw = ImageDraw.Draw(img)
draw.text((0, 0),"This is a test",(255,255,0),font=font)
draw = ImageDraw.Draw(img)
draw = ImageDraw.Draw(img)
img.save("a_test.png") 
```

或者有任何想法而不使用 PIL 在图像上绘制文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:26:21.617

因为它还没有发布 3.3。

“当前的免费版本是 PIL 1.1.7。此版本支持 Python 1.5.2 及更新版本，包括 2.5 和 2.6。稍后会发布 3.X 的版本。” -取自 PILs 主页。

如果您想使用 PIL，请使用 Python 2.6。Python 的 3.X 版本稍微改变了 python，因此它不完全向后兼容。

我建议您使用旧版本的 Python 而不是 3.X，除非您有充分的理由使用 3.X。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T18:27:22.163

[Pillow](https://pypi.python.org/pypi/Pillow)是 Python Imaging Library 的延续，它已更新为可与 Python 3 一起使用。这应该可以解决您未解决的 PIL 问题。

在最近的 Python 中，还有其他用于在图像上绘制文本的选项：

*   [Pygame](http://www.pygame.org/)是自 Pygame 1.9.2 起支持 Python 3 的 SDL 1.2 包装器。
*   [Wand](http://docs.wand-py.org/en/0.3.5/)是基于 ctypes 构建的 ImageMagick 包装器。
*   [gdmodule](https://github.com/Solomoriah/gdmodule)包装了 GD，但它的安装程序似乎仅适用于 Linux。它不会在 Windows 下帮助您（参见`"C:/arial.ttf"`），但它可能会帮助其他有同样问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T11:29:56.017

# 使用 opencv

```
import cv2
font = cv2.FONT_HERSHEY_SIMPLEX 
orgin = (50, 50) 
fontScale = 1
color = (255, 0, 0) 
thickness = 2 
```

使用 cv2.putText() 方法

```
image = cv2.putText(image, 'OpenCV', org, font, fontScale, color, thickness, cv2.LINE_AA) 
```

# excel - Oracle APEX：将交互式报表导出到 Excel

> ID：14754526
> 
> 赞同：1
> 
> 时间：2013-02-07T15:16:01.460
> 
> 标签：excel, excel-2007, oracle-apex

我有一个带有交互式报告的页面。如果我做了一个“控制中断”并有一个聚合，有没有办法可以将结果导出到 Excel，就像它在页面上显示的那样？

当我“下载”报告时，它显示为第三个屏幕截图，没有分开。

交互式报告结果： ![在此处输入图像描述](../Images/b598313c36ff0cd4e519b53d2c183958.png)

我想如何将数据导出到 Excel： ![在此处输入图像描述](../Images/3e2eb1363c0e56f58699a50a63d1a985.png)

当前导出的格式： ![在此处输入图像描述](../Images/a74f4cf1565e895914c5943bbefcbc1d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:24:13.893

下载到 excel 始终为 CSV 格式。文件扩展名不是`.xlsx`但是`.CSV`。所以，我会说不。
这也很艰难。即使您要创建自定义导出到 excel，您也必须提取报告的当前查询（这在 4.2 中最终变得更容易，但在 4.0/1 中可以使用 3rd 方包）。然后您还必须考虑您应用的控制中断，因为这些不会反映在 IR 查询中（即使使用`APEX_IR`）。如果您想查看它包含的内容，
我已经涉足生成一个文件并制作了一个博客文章/示例应用程序。`xlsx`请注意，这将“自定义解决方案”推向了极致（至少在我看来）。
[http://apex.oracle.com/pls/apex/f?p=10063](http://apex.oracle.com/pls/apex/f?p=10063)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T21:48:30.890

您可以在Oracle的BI Publisher中创建报表，然后通过APEX，您可以调用带有参数的报表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-24T15:35:49.247

实际上， [APEX Office Print (AOP)](https://www.apexofficeprint.com)支持将交互式报表和交互式网格（以及其他）导出到 Excel，与您在屏幕上看到的完全一样（包括中断、分组等）

# ajax - Facebook喜欢按钮的iframe在ajax请求后没有扩展

> ID：14754530
> 
> 赞同：0
> 
> 时间：2013-02-07T15:16:11.993
> 
> 标签：ajax, facebook, wordpress, facebook-like

我正在为 Wordpress 上的每个帖子添加一个 facebook 共享按钮（使用 Facebook 共享按钮新插件），它适用于每个帖子/页面，除非我通过 ajax 加载它们，结果它是一个普通的 Facebook 按钮，但是弹出窗口（写评论）出现在未展开的按钮内。

要检查，请访问：http: [//iwanttobeher.com/](http://iwanttobeher.com/)，然后单击页面底部的任何面孔，然后测试“赞”按钮，您会看到会发生什么。

我不知道该怎么做，我`FB.XFBML.parse()`在加载内容后尝试过，但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T09:10:50.177

在我们的案例中，切换到 HTML5 并没有帮助。所做的是在`FB`通过 Ajax 将新内容插入页面之前删除该对象：

```
delete FB;
wrapper.html(response.data); 
```

我们通过 Ajax 重新加载整个页面，因此新页面内容重新创建 FB 对象并重新初始化 XFBML。如果我们只重新加载页面的一部分，不确定这种解决方法是否有效。

原来的答案在[这里](https://stackoverflow.com/a/17760601/1712145)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:39:58.120

我已经设法通过使用 Facebook 的工具生成类似按钮的**HTML5而不是 Iframe 或 XFBML 来修复它：** [https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# javascript - 在 jQuery 中搜索立即选择器？

> ID：14754534
> 
> 赞同：0
> 
> 时间：2013-02-07T15:16:18.990
> 
> 标签：javascript, jquery

我有这个函数，它接受`obj`（Jq 对象）作为参数

但是，在这个函数中，我**只需要** `obj`which is `:not(:disabled)`和`:not([readonly]`

目前我已经设法做到了：

```
function CheckRequiredSelection(obj)
{
    obj.find(".requiredSelection:visible:not(:disabled):not([readonly])").andSelf().each(function ()
    {
...
    });

} 
```

但我真的很想摆脱`find`和`addSelf`欺骗。

有什么帮助吗？

该文件可以包含：

编辑＃1 ...

```
<select class="requiredSelection">
...
</select>

<select class="requiredSelection">
...
</select> 
```

在提交之前：我做了类似的事情：

`CheckRequiredSelection($(".requiredSelection"))`

编辑#2

我可以在 .each 循环内部进行检查，但由于它位于选择器之后，因此效率不高。（而不是从 100 中获得 5 个过滤元素，我将获得 100 个元素，然后我将不得不过滤。这不好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:23:27.777

我想你想要[`.filter()`](http://api.jquery.com/filter/)。

```
function CheckRequiredSelection(obj)
{
    obj.filter(":visible:not(:disabled):not([readonly])").each(function ()
    {
...
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:40:37.587

你要找的[是](http://api.jquery.com/is)

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

所以，你的代码看起来像，

```
function CheckRequiredSelection(obj) {
    obj.is(".requiredSelection:visible:not(:disabled):not([readonly])")
} 
```

我不确定它是否比它更快`filter`。

但是`is`在这种情况下是否可以使用。

您可以在[jsperf测试性能](http://www.jsperf.com)

# excel - excel vba, userforms and events：可以接受事件的无模式用户表单

> ID：14754537
> 
> 赞同：0
> 
> 时间：2013-02-07T15:16:23.380
> 
> 标签：excel, automation, excel-2010, userform, vba

我的 Excel 书包含一个名为`myUserForm`. 我想打开它，用数据填充它并以编程方式按下它的按钮。我输入数据的文本框具有更新前和更新后处理程序。

如果我调用`Call UserForm2.Show`，这些事件将运行，但我似乎无法卸载表单（调用会`Call UserForm2.Show`暂停 excel marco 的执行，直到我手动关闭它）。

如果我调用 don't `Call UserForm2.Show`（或在无模式模式下调用它），数据填充很好，但 Excel BeforeUpdate 和 AfterUpdate 处理程序将被忽略。

示例代码：

在模块中：

```
Public Function s(ByVal newValue As String) As String
    'Call UserForm2.Show
    UserForm2.TextBox1.Value = newValue
    UserForm2.Repaint
    s = UserForm2.TextBox1.Value
    UserForm2.Button1_Click
End Function

Public Function s2() As String
    s2 = s("newValue")
End Function 
```

在用户表单中：

```
Public Sub Button1_Click()
    Unload Me
End Sub

Public Sub TextBox1_AfterUpdate()
    TextBox1.Value = TextBox1.Value + "y"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T09:33:21.450

你想打开一个表单，用数据填充它，然后在没有用户交互的情况下关闭它？为什么要费心打开表格。

除此之外，只需将卸载我的代码移动到表单加载事件或表单激活事件的末尾......虽然这可能不起作用，但值得一试，抱歉无法在 PC 上测试。

# tastypie - 如何区分美味派中的详细信息或列表 REST 方法

> ID：14754541
> 
> 赞同：0
> 
> 时间：2013-02-07T15:16:35.673
> 
> 标签：tastypie

如何确定 GET 方法是在请求详细资源 (example.com/api/v1/entry/1/) 还是列表 (example.com/api/v1/entry/)

我要做的是记录一个详细的 GET 方法被调用的次数。

一个选项是检查请求对象并获取 PATH 并查看是否提供了资源 ID。但是，我想知道是否有更好的方法可以使用美味派的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:29:28.717

覆盖方法 get_detail。

```
def get_detail(self, request, **kwargs):
    # Your custom code for incrementing GET counter
    return super(YourResource, self).get_detail(request, **kwargs) 
```

每次请求获取详细信息方法时都会调用该方法。

# django - django覆盖管理模板

> ID：14754545
> 
> 赞同：7
> 
> 时间：2013-02-07T15:16:58.500
> 
> 标签：django

我正在关注[Django 教程的第 2 部分](https://docs.djangoproject.com/en/dev/intro/tutorial02/)。我正在尝试覆盖管理模板 ( `base_site.html`)

我将文件`django/contrib/admin/templates`从`mytemplates/admin/base_site.html`

我还更新了 settings.py：

```
#Base Directory
BASE_DIR = os.path.dirname(os.path.abspath(__file__))

#Template directories
TEMPLATE_DIRS = (os.path.join(BASE_DIR, 'mytemplates'),) 
```

我尝试将 mytemplates 文件夹放在项目文件夹的根目录以及 mysite 文件夹中，但没有成功。任何指针都会很棒！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T15:45:23.053

编辑了以前的用户响应——这有效：

我认为您到模板目录的相对路径是错误的。

如果您按照以下步骤操作，它应该可以工作：（我自己测试过）

1.  将目录与文件`mytemplates`并排放置`manage.py`

    ```
    project
    -app1
    -app2
    -mytemplates
        -admin
            -base_site.html
    -manage.py 
    ```

2.  将 TEMPLATE_DIRS 更改为：

    ```
    TEMPLATE_DIRS = (os.path.join(BASE_DIR, 'mytemplates'),) 
    ```

3.  确保模板加载器的顺序是：

    ```
    TEMPLATE_LOADERS = (

        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',

    ) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-19T07:16:34.633

@YardenST 的回答*几乎*对我有用。我想这是配置的问题。

如果您遇到麻烦，我建议您使用此行：

```
TEMPLATE_DIRS = (os.path.join(BASE_DIR, 'mytemplates'),) 
```

接下来，放置一个断点来显示实际结果，或者使用`print TEMPLATE_DIRS`.

**那是您应该放置要覆盖的模板的地方。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T17:03:07.683

@kat-russo，谢谢 ;)

我尝试根据文档设置管理模板

```
project_name
-app1
-app2
-project_name //main folder -> settings.py , urls.py, wsgi.py
-templates
-admin
  -project_name
     base.html 
```

没有成功，但是

```
 -templates
   -admin
      base.html 
```

为我工作。

我的配置（Django 1.10.4 w/Django CMS 3.4.1）

```
TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [os.path.join(BASE_DIR, "templates"),],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',
            'sekizai.context_processors.sekizai',
            'cms.context_processors.cms_settings',
        ],

    },
},
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-22T22:36:18.930

您可以覆盖所有模板。

在模板中创建一个管理目录并添加文件。

所有文件。

[https://github.com/django/django/tree/master/django/contrib/admin/templates/admin](https://github.com/django/django/tree/master/django/contrib/admin/templates/admin)

# jquery - 将注意力转移到 Web 表单的效果

> ID：14754548
> 
> 赞同：1
> 
> 时间：2013-02-07T15:17:03.410
> 
> 标签：jquery, css, highlighting

我想做出一些效果，点击链接后会在视觉上突出显示表单。

到目前为止我得到了

```
$('#form').addClass("message");
$('#form').animate({backgroundColor: 'ffffff'},3000);
$('#form').animate({opacity:0},3000); 
```

和它的CSS

```
.message{
  background:#9ed0f2;
} 
```

重点只是将用户的注意力引向表单。

我应该寻找一些开箱即用的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:20:15.390

您实际上可以在单击链接时将焦点放在表单元素上，突出显示该字段，就好像他们单击了它一样。

所以示例代码：

```
$('#link_that_was_clicked').click(function() {
  $('#first_form_element').focus();
}); 
```

您也可以我应该在按钮单击时为表单添加一个边框，以便整个表单被一个 2px 黑色边框包围？

当您使用 jQuery 的 .scrollTop() 和 .offet() 方法单击按钮时，您也可以让 jquery 滚动到表单

样本

```
 $('#link_that_was_clicked').click(function() {
      $(document).scrollTop( $("#form").offset().top ); 
      $('#first_form_element').focus();
    }); 
```

**链接**

[jQuery焦点](http://api.jquery.com/focus/)

[jQuery.scrollTop()](http://api.jquery.com/scrollTop/)

[jQuery.offset()](http://api.jquery.com/offset/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:21:35.343

你甚至可以从[http://jackrugile.com/jrumble/](http://jackrugile.com/jrumble/)隆隆声:)

最好创建突出显示或某些 css 类并为该类设置动画。这样您就可以**将设计**与 javascript 代码分开。

检查[http://jqueryui.com/switchClass/](http://jqueryui.com/switchClass/)进行演示

# javascript - 我们如何在 cfLayout 手风琴中设置 onExpand 事件

> ID：14754553
> 
> 赞同：1
> 
> 时间：2013-02-07T15:17:16.880
> 
> 标签：javascript, extjs, coldfusion

我们正在使用 CFLayout 在我们的 Web 应用程序中创建一个选项卡结构。创建该布局后，我们调用此函数：

```
mytabs = ColdFusion.Layout.getTabLayout("#attributes.cflayoutName#");
mytabs.on('tabchange',
    function(tablayout,tab) {           
        var tabtitle = tab.title;
        alert(tabtitle); // Actual code does various useful 'stuff' here.
    }
); 
```

这段代码运行良好，每次用户单击选项卡时都会显示警报。

问题是我们现在正试图用 CFLayout 类型的“手风琴”做同样的事情，当用户切换他们正在查看的手风琴窗格时，我无法触发事件。我们尝试将上述内容保持原样，并将“tabchange”属性更改为“expand”、“beforeexpand”、“activate”和“collapse”。

对于此测试，我使用以下简单的 JS 函数来避免 onchange 事件中的 JS 引起的问题：

```
mytabs = ColdFusion.Layout.getAccordionLayout("#attributes.cflayoutName#");
mytabs.on('expand',
    function(tablayout,tab) {
        console.log('test');
    }
); 
```

我们没有收到任何错误。控制台根本没有记录任何内容。我尝试将 console.log 替换为警报以排除该行的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:38:21.107

*这对于评论来说太长了，所以添加作为答案*

经过一些谷歌搜索后，我发现了一些我认为是相关的帖子。看起来好像 Ext JS 中的手风琴没有与选项卡相同的事件。相反，您需要添加一个侦听器以捕捉扩展。

[请参阅这篇文章](http://www.sencha.com/forum/showthread.php?49756-Accordion-events)-*如果该页面发生问题，这里是相关的部分：*

> 您需要收听手风琴中子面板的展开事件，您可以执行以下操作：
> 
> 代码：
> 
> ```
>  myAccordion.add(myFunc('myTitle'));
>     function myFunc(title)
>     {
>        return new Ext.Panel(
>        {
>           title: title,
>           listeners: { 'expand': {fn: something, scope: foo}}
>        }
>        );
>     } 
> ```

[而且我还在 SO 上找到了另一个类似的帖子](https://stackoverflow.com/questions/9572167/what-event-to-listen-on-accordion-panel-change-in-extjs)- 查看两个答案

一旦您知道手风琴需要一个听众，您就可以在 Google 上找到许多结果。例如[如何在 extJS 中将事件处理程序附加到面板？](https://stackoverflow.com/questions/4225389/how-do-i-attach-an-event-handler-to-a-panel-in-extjs)

[这个谷歌搜索会给你很多例子。](https://www.google.com/webhp?hl=en&tab=ww#hl=en&newwindow=1&tbo=d&output=search&sclient=psy-ab&q=extjs+accordion+listeners&oq=extjs+accordion+listeners&gs_l=hp.12..35i39.1217.1217.0.3536.1.1.0.0.0.0.95.95.1.1.0.les%3Bcqn%2Ccconf%3D1-2%2Cmin_length%3D2%2Crate_low%3D0-035%2Crate_high%3D0-035%2Csecond_pass%3Dfalse%2Cnum_suggestions%3D2%2Cignore_bad_origquery%3Dtrue%2Conetoken%3Dfalse..0.0...1c.1.kaFvx5_olfY&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42080656,d.b2I&fp=fcc13bb106db125&biw=1012&bih=918)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:21:19.397

我发现 Ext 库文档对于找到解决这个问题的方法非常有帮助： [这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-getComponent)。

Ext 库有一个 getComponent 方法，它允许您引用您尝试添加展开事件的手风琴布局面板。一旦你有了这个，你可以使用上面使用的“on”方法将展开事件单独分配给每个面板。

```
for (x=1; x<accordionLayoutArray.length; x++) {
        mytabs.getComponent(accordionPanelName).on('expand',
            function(tab) { ... });
} 
```

# c# - '不实现接口成员'System.ICloneable.Clone()'

> ID：14754557
> 
> 赞同：0
> 
> 时间：2013-02-07T15:17:28.133
> 
> 标签：c#, icloneable

我在 Icloneable 接口中调用时遇到了一个小问题

我已经告诉班级我想这样使用接口：

```
class UnitClass: ICloneable 
```

并已放置在克隆功能中

```
 public Object Clone()
    {
        return this.MemberwiseClone();
    } 
```

但是由于某种原因，程序告诉我我没有实现 System.ICloneable.clone() 我什至尝试给函数指定明确的名称，就像这样......

```
 public Object System.ICloneable.Clone() 
```

但效果不大，有人知道我做错了什么吗？

编辑：全班

```
class UnitClass: ICloneable
{

//-----------------------------------------------------------------------------------------------
//----------------------------------------------Variables----------------------------------------

    private int unitID; //added for xml
    private string unitName;
    private int unitBaseHP;
    private int unitCurrentHP;
    private Carrier unitCarrier;
    private int unitRechargeTime;
    private int turnLastPlayed;
    private int strengthAgainstFighters;
    private int strengthAgainstBombers;
    private int strengthAgainstTurrets;
    private int strengthAgainstCarriers;

//-----------------------------------------------------------------------------------------------
//---------------------------------------------Constructor---------------------------------------

    public UnitClass()
    {
            unitID = 0;
            unitName = "Name Not Set";
            unitBaseHP = 0;
            unitCurrentHP = 0;
            unitCarrier = null;//Carrier works as faction ie red/blue or left/right
            unitRechargeTime = 0;
            turnLastPlayed = 0;
            strengthAgainstFighters = 0;
            strengthAgainstBombers = 0;
            strengthAgainstTurrets = 0;
            strengthAgainstCarriers = 0;
    }

//-----------------------------------------------------------------------------------------------
//---------------------------------------------Gets and Sets-------------------------------------

    public int UnitID//public
    {
        set { unitID = value; }
        get { return unitID; }
    }

    public string UnitName//public
    {
        set { unitName = value; }
        get { return unitName; }
    }

    public int UnitBaseHP//public
    {
        set { unitBaseHP = value; }
        get { return unitBaseHP; }
    }

    public int UnitCurrentHP//public
    {
        set { unitCurrentHP = value; }
        get { return unitCurrentHP; }
    }

    public Carrier UnitCarrier//public
    {
        set { unitCarrier = value; }
        get { return unitCarrier; }
    }

    public int UnitRechargeTime//public
    {
        set { unitRechargeTime = value; }
        get { return unitRechargeTime; }
    }

    public int TurnLastPlayed//public
    {
        set { turnLastPlayed = value; }
        get { return turnLastPlayed; }
    }

    public int StrengthAgainstFighters//public
    {
        set { strengthAgainstFighters = value; }
        get { return strengthAgainstFighters; }
    }

    public int StrengthAgainstBombers//public
    {
        set { strengthAgainstBombers = value; }
        get { return strengthAgainstBombers; }
    }

    public int StrengthAgainstTurrets//public
    {
        set { strengthAgainstTurrets = value; }
        get { return strengthAgainstTurrets; }
    }

    public int StrengthAgainstCarriers//public
    {
        set { strengthAgainstCarriers = value; }
        get { return strengthAgainstCarriers; }
    }

//---------------------------------------------------------------------------

    public object Clone()
    {
        return this.MemberwiseClone();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:27:37.760

这对我来说很好。

```
public class MyClone : ICloneable
{
    public object Clone()
    {
        return this.MemberwiseClone();
    }
} 
```

您可能不想再分享您的课程？没有什么是真的在我身上跳出来。

# android - 发送短信，NullPointerException

> ID：14754561
> 
> 赞同：2
> 
> 时间：2013-02-07T15:17:34.357
> 
> 标签：android, sms, nullpointerexception

好的，我现在已经尝试了一切。我想做的只是发送一条短信。但是当我尝试时出现此错误：

```
02-07 17:05:45.550: W/System.err(17373): java.lang.NullPointerException
02-07 17:05:45.550: W/System.err(17373):    at android.os.Parcel.readException(Parcel.java:1333)
02-07 17:05:45.555: W/System.err(17373):    at android.os.Parcel.readException(Parcel.java:1281)
02-07 17:05:45.555: W/System.err(17373):    at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:698)
02-07 17:05:45.555: W/System.err(17373):    at android.telephony.SmsManager.sendTextMessage(SmsManager.java:113)
02-07 17:05:45.555: W/System.err(17373):    at fi.juunas.paali.MainActivity.sendSMS(MainActivity.java:178)
02-07 17:05:45.555: W/System.err(17373):    at fi.juunas.paali.MainActivity.textSingle(MainActivity.java:104)
02-07 17:05:45.560: W/System.err(17373):    at fi.juunas.paali.MainActivity$1.onClick(MainActivity.java:80)
02-07 17:05:45.560: W/System.err(17373):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:167)
02-07 17:05:45.560: W/System.err(17373):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 17:05:45.560: W/System.err(17373):    at android.os.Looper.loop(Looper.java:137)
02-07 17:05:45.560: W/System.err(17373):    at android.app.ActivityThread.main(ActivityThread.java:4507)
02-07 17:05:45.560: W/System.err(17373):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 17:05:45.565: W/System.err(17373):    at java.lang.reflect.Method.invoke(Method.java:511)
02-07 17:05:45.565: W/System.err(17373):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-07 17:05:45.565: W/System.err(17373):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-07 17:05:45.565: W/System.err(17373):    at dalvik.system.NativeStart.main(Native Method) 
```

我以这样的方法调用该函数：

```
SmsManager mgr = SmsManager.getDefault();
Log.d(TAG, "Number: " + number);
Log.d(TAG, "Message: " + msg);
mgr.sendTextMessage(number, null, msg,null,null); 
```

数字=“0401234567”味精=“T”

问题是，这在模拟器上完美运行。正如你所期望的那样。但不是在我的 Galaxy S2 上。我希望我的数字格式正确。我也试过包括国家代码，但问题是一样的。哦，是的，而且消息只有一个字符长，所以问题不可能是它太长了。并且 scAddress 和 PendingIntents 应该被允许为空。

我只是没有想法了。我唯一想到的是数字格式错误或 S2 操作系统中存在大量错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T07:41:02.350

好的，问题解决了。我将我的手机更新到了 Android 4.1.2（它以前有 ICS），现在它可以完美运行了。我没有修改代码。所以显然操作系统本身有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:29:39.280

[https://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage(java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,% 20android.app.PendingIntent)](https://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage(java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent))

发送一个待处理的意图对象并检查它为什么不起作用。待处理的意图对象将包含

```
RESULT_ERROR_GENERIC_FAILURE
RESULT_ERROR_RADIO_OFF
RESULT_ERROR_NULL_PDU 
```

如 API 所示

# ruby-on-rails-3 - db 上的错误：迁移

> ID：14754566
> 
> 赞同：0
> 
> 时间：2013-02-07T15:17:46.343
> 
> 标签：ruby-on-rails-3

我正在尝试修改在另一台计算机上构建的 rails 应用程序，我运行 bundle install 并安装了所有 gem。但是当我运行 rake db:migrate 时，它​​会抛出一堆错误，我是新来的 rail 并且无法理解什么那些错误信息

```
rake aborted!
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so: undefined symbol: ruby_current_thread -     /home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `require'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `<top (required)>'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `require'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `<top (required)>'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
/home/diadara/hw3_rottenpotatoes/config/application.rb:13:in `<top (required)>'
/home/diadara/hw3_rottenpotatoes/Rakefile:5:in `require'
/home/diadara/hw3_rottenpotatoes/Rakefile:5:in `<top (required)>'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/bin/rake:19:in `<main>'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/bin/ruby_noexec_wrapper:14:in `eval'
/home/diadara/.rvm/gems/ruby-1.9.3-p374@saasrails3.1/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:59:11.603

看起来您没有在项目中正确安装 ruby​​-debug。如果不需要，请将其从 gemfile 中删除，或者查看以下答案来修复它：[Cannot use ruby​​-debug19 with 1.9.3-p0?](https://stackoverflow.com/questions/8378277/cannot-use-ruby-debug19-with-1-9-3-p0)

# php - Windows 8 中的 Memcache 安装：无法连接到 127.0.0.1

> ID：14754581
> 
> 赞同：2
> 
> 时间：2013-02-07T15:18:22.240
> 
> 标签：php, memcached

我认为 Windows 8 中尚未安装 Memcache。我想以下警告清楚地说明了这一点：

```
 Notice: Memcache::get() [memcache.get]: Server 127.0.0.1 (tcp 11211) failed with: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (10060) in C:\xampp\htdocs\framework\registry\cache.class.php on line 39 
```

在 phpinfo() 我可以看到它已经安装：
![在此处输入图像描述](../Images/c78f5a56fc0ff28b13ed09a38f241ba7.png)

是否有任何解决方法可以让它启动并运行？
在命令提示符下，我尝试安装 memcache，如下所示：

```
memcached -d install 
```

但出现以下错误：

```
failed to install service or service already installed 
```

我以前在 Windows XP 中安装了 Memcache。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T16:19:40.323

很有趣！;)
我以管理员身份运行 CMD（以管理员身份运行），瞧，问题解决了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-10T11:46:01.097

下面的东西在 Windows 10 中对我有用。

第 1 部分：- 安装：- 下载 memcached，解压缩后放入 d:\memcache 文件夹（我使用 d 驱动器，您可以使用其他驱动器）。以管理员身份打开命令提示符。之后我运行安装命令`D:\memcache>memcached.exe -d install`，出现“安装服务失败或服务已安装”错误。所以我使用`memcached.exe -vvv`了命令。之后，它在命令提示符中给了我很多行。

第 2 部分：- 运行：- 现在转到任务管理器 (alt+ctrl+del) 并单击 Services 选项卡，在 name 列中找到**memcached**并右键单击它并单击**start**。现在您应该能够看到该 memcached 行的**运行**状态。

希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:21:59.137

`telnet`您能否使用to检查您的 memcache 守护进程是否正在接受连接`127.0.0.1:11211`，如果您收到提示，只需按 enter 即可显示`ERROR`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T17:14:44.947

我正在使用 64 位 Windows 7。

当我运行`memcached.exe`服务器启动时。我可以做到`telnet localhost 11211`它连接到服务器。请注意，这是没有以管理员身份运行 cmd 的。可悲的是，服务器和 telnet 都没有打印任何内容。

`stats`从 telnet 连接后尝试输入。你应该得到类似的东西

```
STAT pid 10876
STAT uptime 345
STAT time 1417453754
STAT version 1.2.6
STAT pointer_size 32
STAT curr_items 0
STAT total_items 0
STAT bytes 0
STAT curr_connections 3
STAT total_connections 5
STAT connection_structures 4
STAT cmd_get 0
STAT cmd_set 0
STAT get_hits 0
STAT get_misses 0
STAT evictions 0
STAT bytes_read 32
STAT bytes_written 21
STAT limit_maxbytes 67108864
STAT threads 1
END 
```

现在将其安装为服务。这是我得到

```
C:\Users\athakur\Softwares\memcached>memcached.exe -d install
failed to install service or service already installed 
```

启动和停止也是如此。**要将其安装为服务，您需要以管理员身份执行上述命令。**

如果服务器启动时没有消息或通知像我一样打扰您，您可以启动您的服务器是详细模式。我用

```
memcached.exe -vvv 
```

这就像我猜的最高级别的冗长。您可以检查所有命令`memcached.exe -h`

# magento - Magento - CDN 和基本 url 冲突

> ID：14754584
> 
> 赞同：0
> 
> 时间：2013-02-07T15:18:34.807
> 
> 标签：magento, cdn

我正在尝试设置另一个域来提供静态内容。我找到了很好的文章 ( [http://www.riyaz.net/blogging/setup-own-cdn/890/](http://www.riyaz.net/blogging/setup-own-cdn/890/) ) 来解释如何做到这一点。

我创建了一个指向主域的 CNAME 记录（js.domain.com）。还创建了一个子域 js.domain.com，其文档根目录与 domain.com 相同但是现在当我访问 js.domain.com 时，由于 magento 基本 url，它一直重定向到 domain.com。如何避免这种情况，或者我在为静态内容设置 CDN 时做错了什么。最后，我不想为我的 CDN 和主域维护两个单独的文档根。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:27:35.007

好像您错误地配置了您的虚拟主机配置，如果在 js.domain.com 上访问它，您不应该加载 Magento 本身。您可以通过为其创建自定义 htaccess（在 vhost 配置中）来完成此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:45:36.947

您的 base_url 必须是 www.domain.com

仅将媒体、皮肤等的 url 更改为 js.domain.com

# c - 在循环迭代之间等待线程池中的线程

> ID：14754589
> 
> 赞同：4
> 
> 时间：2013-02-07T15:18:40.977
> 
> 标签：c, loops, gcc, threadpool, wait

我有几个程序进行大量计算，由于我的新计算机有一个多核处理器，我决定重写我的程序以进行多线程处理。我找到了 Johan Hanssen Seferidis 的[thpool 库](https://github.com/Pithikos/C-Thread-Pool)，并正在尝试使用它。

我有一个小循环（比如说`0 < j < 12`）嵌入到一个更大的循环（`0 < i < 40000`）中。对于`i`小 j 循环的每次迭代，都会将其工作分配给线程池。每个 j 有一份工作。线程出现并抓住任何尚未被采取的东西。我需要一种方法让大型 i-loop 等待所有线程在 j-loop 中完成它们的工作，以及任何 I/O 操作，然后继续 i++。

简单示例代码：

```
#include <stdio.h>
#include "thpool.h"

int i;

void task1(int a){
printf("# Thread working: %u\n", (int)pthread_self());
printf(" Task 1 running..\n");
printf("%d\n", 10*i+a);
}

int main(){
int j;

#define NUM_HANDLER_THREADS 3

thpool_t* threadpool;
threadpool=thpool_init(NUM_HANDLER_THREADS);

for (i=0; i<5; i++)
  for (j=0; j<10; j++) {
    thpool_add_work(threadpool, (void*)task1, (void*)j);
    };

sleep(2);
puts("Will kill threadpool");
thpool_destroy(threadpool);

return 0;
} 
```

编译：

```
gcc main.c thpool.c -pthread -o test 
```

执行上述操作应该（即我想要的）按该顺序编写五个块 0-9、10-19、...、40-49，但每个块的元素可能或多或少是随机顺序。相反，程序通过整个 i 循环太快了，所以当线程开始写入 i==5 时，我得到 50-59 五次，以随机顺序。

我希望我清楚我想要做什么。也许是这样的：

```
for (i=0; i<5; i++) {
  for (j=0; j<10; j++) {
  thpool_add_work(threadpool, (void*)task1, (void*)j);
  wait_for_all_threads_to_finish();
  }
}; 
```

有任何想法吗？加入？退出？信号量？这对我来说是全新的，所以谢谢你的耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:57:53.333

我建议使用这样的信号量：

```
 #include <stdio.h>
    #include <semaphore.h>
    #include "thpool.h"

    int i;
    sem_t sem;

    void
    task1(int a)
    {
      sem_post(&sem);
      printf("# Thread working: %u\n", (int)pthread_self());
      printf(" Task 1 running..\n");
      printf("%d\n", 10*i+a);
    }

    int
    main(void)
    {
      int j;

      if (sem_init(&sem, 0, 0) == -1)
        abort();

      #define NUM_HANDLER_THREADS 3

      thpool_t* threadpool;
      threadpool=thpool_init(NUM_HANDLER_THREADS);

      for (i=0; i<5; i++)
        {
          for (j=0; j<10; j++)
            {
              thpool_add_work(threadpool, (void*)task1, (void*)j);
              sem_wait(&sem);
            }
        }

      sleep(2);
      puts("Will kill threadpool");
      thpool_destroy(threadpool);

      return 0;
    } 
```

也尝试尝试：

```
 void
    task1(int a)
    {
      printf("# Thread working: %u\n", (int)pthread_self());
      printf(" Task 1 running..\n");
      printf("%d\n", 10*i+a);
      sem_post(&sem);
    } 
```

看看有什么不同。祝你好运。

# iphone - UITableViewCell - 使用显示指示器会导致单元格标签缩进

> ID：14754590
> 
> 赞同：3
> 
> 时间：2013-02-07T15:18:48.630
> 
> 标签：iphone, ios, uitableview

我有一个 UITableView，其中一些单元格将具有披露指示器 (UITableViewCellAccessoryDisclosureIndicator)，而有些则没有 (UITableViewCellAccessoryNone)。我根据表格行的数据值在 cellForRowAtIndexPath 方法中设置它。我的问题是我在单元格中有一些右对齐的标签，无论是否显示指示器，它们都应该对齐，并且我发现指示器箭头将我的标签推错了，就好像它有一个固定保证金。有什么方法可以防止这种情况发生，而不必以编程方式重新定位我的 UILabel？我的 UITableView 是在带有原型单元格的 Interface Builder 中设计的，如果这有什么不同的话。我的应用程序面向 iOS 5.1。

![在此处输入图像描述](../Images/cc637c01077e8324091d51a6826da552.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T15:24:21.240

添加 a`UITableViewCellAccessoryDisclosureIndicator`将缩小为单元格的 contentView 分配的空间。

您要么必须创建自己的披露指示器作为图像子视图，要么需要使用数字修复标签上的约束。

或者不是使用单元格的 textLabel 作为数字然后右对齐，您可以设置自己`UILabel`添加到单元格的 contentView 中。对于 UILabel 子视图，请确保它不会超出单元格的宽度，就好像它有一个披露指示器一样。您可以将 UILabel 的背景颜色设置为红色或有助于正确对齐标签的颜色。

# sencha-touch-2 - Sencha touch 2 对事件的 html 引用

> ID：14754591
> 
> 赞同：3
> 
> 时间：2013-02-07T15:18:51.960
> 
> 标签：sencha-touch-2

我的面板中有一些 html：

```
styleHtmlContent: true,
scrollable: true,

items: {
    docked: 'top',
    xtype: 'titlebar',
    title: 'List'
        },
    html: [
        "<div style='border-radius: 4px;' class='abutton' id='abuttonbyid'>",
        "Text</div>"
    ].join("") 
```

在我的控制器中

```
config: {
    refs: {
        abutton: '.abutton',
        abuttonbyid:'#abuttonbyid'
    },

    control: {
        abutton: {
            tap: 'onButtonTap'
        },
        abuttonbyid : {
            tap: 'onButtonTap'
        }
    },
},

onButtonTap: function() {
  console.log("Tapped");
} 
```

我想要它，所以当点击 div 按钮时，我会`Tapped`进入我的 js 控制台/网络检查器。我同时使用了一个类和一个带有 id 的元素，因为我想将事件侦听器附加到许多 div 按钮，而不是一个。许多 div 按钮，一个事件。

我需要使用 html 按钮而不是 Sencha 按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:31:09.190

为什么不在标题栏上添加一个按钮？

```
items: {
  docked: 'top',
  xtype: 'titlebar',
  title: 'List',
  items: [
    {
      xtype: 'button',
      text: 'Tap Me',
      handler: function() { console.log("button tap"); }
    }
  ]
} 
```

编辑：既然你说你必须使用 html （这不是首选），那么你可以添加一个委托给你的 DOM 节点的自定义侦听器：

```
items: {
  docked: 'top',
  xtype: 'titlebar',
  title: 'List',
  html: [
    "<div style='border-radius: 4px;' class='abutton' id='abuttonbyid'>",
    "Text</div>"
  ].join(""),

  // The new "listeners" code...
  listeners: {
    tap: {
      fn: function(event, el){ console.log("tapped!"); },
      element: 'element',
      delegate: '#abuttonbyid'
    }
  }
} 
```

作为参考，我会查看有关[事件委托](http://www.sencha.com/forum/showthread.php?176239-HOWTO-Adding-Event-Listeners-to-Component-Elements)的文档。

# spring - 将超过 1 个应用程序部署到 tomcat 时出现 ClassNotFoundException

> ID：14754592
> 
> 赞同：0
> 
> 时间：2013-02-07T15:18:53.643
> 
> 标签：spring, tomcat, classnotfoundexception

我有一个应用程序，它自己部署得很好并且工作正常，但是 - 当我部署另一个相同的应用程序（在不同的上下文、目录等下）时，突然两个应用程序都无法加载，我收到以下异常：

```
2013-02-07 16:10:06,314 ERROR ContextLoader:307 - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRequestDao' defined in class path resource [persistence.hibernate.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: 
org/hibernate/criterion/Projection
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/criterion/Projection
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
        at java.lang.Class.getConstructor0(Class.java:2699)
        at java.lang.Class.getDeclaredConstructor(Class.java:1985)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:67)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
        ... 27 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.criterion.Projection
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        ... 33 more 
```

我几乎尝试了所有东西，但不明白是什么原因造成的，罐子在库中，我重复一遍：应用程序在单独部署时都在工作。

# iphone - Amazon SimpleDB – 原子性和队列 – 使 2 以原子方式放置？

> ID：14754597
> 
> 赞同：0
> 
> 时间：2013-02-07T15:19:03.950
> 
> 标签：iphone, web-applications, amazon-web-services, amazon-simpledb, atomic

我们有几个智能手机应用程序依赖于 Amazon SimpleDB 和 s3。

该架构通常非常简单，数据不敏感，每个应用程序没有太多用户，应用程序直接查询亚马逊（而不是在中间有我们自己的服务器）。

到目前为止一切都很好，完美地满足了我们合理的需求。

但是现在，我遇到了这个问题，我们的一个应用程序必须触发一个由 2 个 SimpleDB put 组成的操作。

问题是那些“2 put”必须以原子方式完成，作为一个全有或全无的块。在 2 次放置之间，数据库没有完整性，在这种不良状态下应该没有人能够读取它。

所以，我正在看的是实现这一目标的最简单方法，我想它将涉及某种队列，其中操作被一个一个地处理，包括读取。

但老实说，这不是我的领域，我希望它不会涉及在专用服务器上编写一些非常复杂的 Webapp。

任何解决方法或指向我显然还没有的知识的指针将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:31:23.900

Atomicity and transactions are some of the great features in relational databases you give up when using a NoSQL solution like SimpledDB. You may want to consider a cheap hosted MySQL database like the ones provided by Amazon RDS or one of the many other hosted DB vendors. However, if you want to continue with SimpleDB, you don't need queueing, but could roll your own transactions and do like Willy suggested:

1.  Add an attribute like "committed" to your saved items.
2.  Write a tool (or find a product) that can update all your previously saved items with a value of committed=1.
3.  Update your code so that the first step of your two-step operation saves the item with attribute committed=0, and the second step 'commits' the item by setting committed=1.
4.  Change all your queries to only pull committed items, something like this "select * from your_domain where {criteria1} and {criteria2} and {more criteria} and committed = '1'".

# c++ - 如何从核心转储中获取系统时间？

> ID：14754598
> 
> 赞同：9
> 
> 时间：2013-02-07T15:19:04.330
> 
> 标签：c++, linux, gdb, segmentation-fault, coredump

我在分段错误后生成了核心转储。gdb（或其他方式）有没有办法查看发生这种情况的系统时间？

我无法使用核心转储文件的创建时间，因为它是在没有此元信息的情况下发送给我的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-18T13:52:04.507

系统时间（不幸的是）默认情况下不存储在核心文件中。你有几个选择。其中之一是更改核心文件的名称以包含系统时间。

[您可以在此处](http://sigquit.wordpress.com/2009/03/13/the-core-pattern/)阅读有关此内容的更多信息。

基本上，您想在核心文件的名称中添加一个“%t”。

如果您正在运行自定义内核，则有更多选择。

例如，您可以更改 elf_prstatus 结构以包含您可能想要的其他内容。这是一个并非没有痛苦的选择，因为现成的工具可能并不总是令人满意。您可以将自定义注释添加到核心文件并包含应用程序特定信息，然后您可以使用 readelf 转储和检查这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:37:59.357

不回答这样的问题，但将来可能会回答。[http://stupefydeveloper.blogspot.co.nz/2008/10/gdb-examineing-core-dumps.html](http://stupefydeveloper.blogspot.co.nz/2008/10/gdb-examining-core-dumps.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T15:45:27.897

他们通过对生成核心的目录执行“ls -lrt”来检查何时创建核心转储。

# sql - 从 2 个不同的数据库服务器检索数据

> ID：14754600
> 
> 赞同：-2
> 
> 时间：2013-02-07T15:19:04.717
> 
> 标签：sql, sql-server, database

我有 3 个不同的数据库服务器。我们称它们为 A、B 和 C。我需要从 A 和 B（它们是不同的数据库服务器）获取数据库并将它们放在第三个数据库服务器“C”中。

你知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:24:09.213

三个选项

1.  编写连接到 A 和 B 的代码，整合信息，连接到 C 并将其保存在那里
2.  使用可让您连接到从表中读取数据并插入到其他表中的产品，例如 SQL Server Integration Services，并设计一个与步骤 1 执行相同操作的流程。
3.  根据引擎的不同，您可以转储 A&B 并将它们加载到 C 中，例如，您可以将 A&B 中的所有数据作为插入语句转储并在 C 中执行它们（假设表已经存在并且没有 PK 冲突)

那应该让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:26:28.507

不是没有工具或以编程方式。我认为 SQL Management Studio 允许您将多个服务器作为一个组进行查询，但结果集会出现在屏幕上。

你还没有指定你使用什么类型的服务器，所以你有点卡住了将数据从服务器 A 和 B 导出到磁盘，将数据加载到 C 的临时表中，然后从那里开始。

如果您使用 Oracle，您可以将服务器 A 和 B 定义为远程服务器并直接从 C 查询它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:28:10.410

您使用的是哪种服务器？有很多方法可以进行此类操作。

*   如果您的数据库不是太大，您可以导出数据库，然后将它们合并到一个脚本文件中并在第三个数据库上运行它。
*   您可以使用 ETL 机制来传输数据。
*   如果服务器在同一个场中，您可以编写查询来选择数据并在服务器之间插入。

如果您指定服务器类型，我可以给出更具体的示例。

# c# - 使用 ObservableCollection 中的活动任务数更新文本块

> ID：14754602
> 
> 赞同：0
> 
> 时间：2013-02-07T15:19:15.677
> 
> 标签：c#, wpf, observablecollection

我正在尝试创建一个状态窗口，向用户显示当前正在运行的任务数。每个任务都被添加到 ObservableCollection 中，并且我在窗口 XAML 中设置了绑定路径，但该框不会更新。我已经广泛搜索了有关如何完成此操作的良好工作示例或教程，但我找不到任何东西。我究竟做错了什么？顺便说一下，它是一个连接到我们办公室的每台 Cisco Switch 并下载配置文件的程序。

窗口 XAML：

```
<Window x:Class="BackupCiscoConfigs.ProcessRunning"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:BackupCiscoConfigs"
        Title="ProcessRunning" Height="300" Width="300"
        Closed="Window_Closed" ResizeMode="CanMinimize">

    <Grid>
        <Button Content="Run" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="btnRun" VerticalAlignment="Bottom" Width="75" Click="btnRun_Click" />
        <TextBlock Width="200" Height="85" Margin="35,80,43,65" Text="{Binding Mode=OneWay, Path=d1.results.Count}"></TextBlock>
    </Grid>
</Window> 
```

窗口代码隐藏：

```
namespace BackupCiscoConfigs
{
    /// <summary>
    /// Interaction logic for ProcessRunning.xaml
    /// </summary>
    public partial class ProcessRunning : Window
    {
        private MainWindow m_parent;
        private Configuration currentConfig;
        public DeviceInterface di;

        public ProcessRunning(MainWindow parent)
        {
            currentConfig = Configuration.loadConfig();
            m_parent = parent;
            InitializeComponent();
        }

        private void btnRun_Click(object sender, RoutedEventArgs e)
        {
            List<Device> devices = currentConfig.devices;
            di = new DeviceInterface(currentConfig.tftpIP,
                currentConfig.tftpDIR, currentConfig.cmd);
            di.RunCommands(devices);
        }
    }
} 
```

生成任务的类：

```
namespace BackupCiscoConfigs
{
    public class DeviceInterface
    {
        private string tftpIP;
        private string tftpDIR;
        private string command;
        private string dirDate;
        public ObservableCollection<Task> results { get; set; }

        public DeviceInterface(string tftpIP, string tftpDIR, string cmd)
        {
            this.tftpIP = tftpIP;
            this.tftpDIR = tftpDIR;
            this.command = cmd;
            dirDate = DateTimeOffset.Now.ToString("MM.dd.yyyy.HH.mm.ss");
            Directory.CreateDirectory(tftpDIR + dirDate);
        }

        public void RunCommands(List<Device> devices)
        {
            results = new ObservableCollection<Task>();
            foreach (Device d in devices)
            {
                Device d1 = d;
                d1.command = command + " tftp://" + tftpIP + "/" + dirDate + "/" + d1.ip + ".cfg";
                results.Add(Task<string>.Factory.StartNew(() => d1.BackupDevice()));
            }
            string res = "";
            foreach (Task<string> t in results)
            {
                string message = t.Result + "\n";
                res += message;
            }
            MessageBoxResult msg = MessageBox.Show(res);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:24:39.633

```
<Window x:Class="BackupCiscoConfigs.ProcessRunning"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:BackupCiscoConfigs"
        Title="ProcessRunning" Height="300" Width="300"
        Closed="Window_Closed" ResizeMode="CanMinimize">
    <Grid DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">
        <Button Content="Run" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="btnRun" VerticalAlignment="Bottom" Width="75" Click="btnRun_Click" />
        <TextBlock Width="200" Height="85" Margin="35,80,43,65" Text="{Binding Mode=OneWay, Path=Results.Count}"></TextBlock>
    </Grid>
</Window> 
```

窗口代码隐藏：

```
namespace BackupCiscoConfigs
{
    /// <summary>
    /// Interaction logic for ProcessRunning.xaml
    /// </summary>
    public partial class ProcessRunning : Window, INotifyPropertyChanged
    {
        private MainWindow m_parent;
        private Configuration currentConfig;
        private DeviceInterface di;
        public event PropertyChangedEventHandler PropertyChanged;

        // This method is called by the Set accessor of each property. 
        // The CallerMemberName attribute that is applied to the optional propertyName 
        // parameter causes the property name of the caller to be substituted as an argument. 
        private void NotifyPropertyChanged(String propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        private ObservableCollection<Task> _results;
        public ObservableCollection<Task> Results
        get
        {
            return _results;
        }
        set
        {
            _results= value;
            NotifyPropertyChanged("results");
        }

        public ProcessRunning(MainWindow parent)
        {
            currentConfig = Configuration.loadConfig();
            m_parent = parent;
            InitializeComponent();
        }

        private void btnRun_Click(object sender, RoutedEventArgs e)
        {
            List<Device> devices = currentConfig.devices;
            di = new DeviceInterface(currentConfig.tftpIP,
                currentConfig.tftpDIR, currentConfig.cmd);
            di.RunCommands(devices);
            Results = di.results;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:25:16.263

我可以立即看到两个问题：

1.  我看不到您`DataContext`为这条工作路径设置的位置：`Path=d1.results.Count`
2.  您正在更新`results`属性，但您没有实施`INotifyPropertyChanged`，这意味着 WPF 永远不会知道您已将新对象挂接`ObservableCollection`到结果中。

# esb - 无 JBI 规范化消息路由器

> ID：14754603
> 
> 赞同：0
> 
> 时间：2013-02-07T15:19:17.727
> 
> 标签：esb, apache-servicemix, jbi

规范化消息路由器 ( `NMR`) 是`JBI`环境中负责在组件之间调解消息的`JBI`部分；ServiceMix 4已从`JBI`. `OSGI`但是，我在某个地方读到了我们仍然可以`NMR`在没有`JBI`基于 ServiceMix ( `JBI-free NMR`) 的情况下使用的地方。这是什么意思？有什么我可以效仿的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:57:38.963

您可以使用 ActiveMQ 和 JMS 作为“JBI-free NMR”。事实上，JBI NMR 在幕后使用的是 ActiveMQ JMS 队列。

在 ServiceMix 4.x 中，您可以根据需要使用 Camel 和 JMS 队列作为您的 NMR。并且消息不再需要规范化，例如它们可以是任何类型，这与消息必须是 XML 的 JBI 不同。

# google-analytics - addthis，谷歌分析和谷歌加分享 - 不跟踪

> ID：14754604
> 
> 赞同：0
> 
> 时间：2013-02-07T15:19:17.967
> 
> 标签：google-analytics, google-plus, addthis

我正在尝试跟踪哪些社交媒体被点击。我正在使用两个版本的 add this。一种是垂直的，看起来像[http://postimage.org/image/4sngil7t5/](http://postimage.org/image/4sngil7t5/)。另一个看起来像[http://postimage.org/image/6lh6ffe89/](http://postimage.org/image/6lh6ffe89/)

我已经阅读了[http://support.addthis.com/customer/portal/articles/381263-addthis-client-api-#events](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api-#events)并且有一些看起来像

```
function track_add_this(evt){

_gaq.push(['b._trackEvent', 'Testing',evt.data.service+'-widget-click','/Moretest-2012_'+recipe_name+'/']);
console.info(evt.data.service);

 }

 addthis.addEventListener('addthis.menu.share', track_add_this); 
```

当我使用第二个 addthis 小部件时，它正在跟踪我的 GA 中的“evt.data.service”。当我从那里选择 google+ 社交媒体时，它运行良好。

但是当我使用第一个 addthis 小部件并单击 google+ 社交时，它根本没有跟踪。事实上，控制台没有打印任何东西，因此它没有在我的 GA 中进行跟踪。但是当我点击第一个 addthis 小部件中的任何其他社交媒体时，它的跟踪效果很好。

第一个 addthis 小部件中是否有错误？请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:03:09.487

我认为这也可能是与 addthis 小部件如何包含在您的页面上有关的问题。

如果其中一个在 iframe 中，您的代码现在可能可以访问 ga.js 并且 conole 可能会将日志与不同的帧分开，因此您看不到控制台日志。

# c# - 通过代码访问时私钥为空，为什么？

> ID：14754609
> 
> 赞同：12
> 
> 时间：2013-02-07T15:19:30.970
> 
> 标签：c#, asp.net, certificate, x509certificate, x509certificate2

我的机器上安装了一个证书，当我去查看它时，我看到消息“您有一个与此证书对应的私钥”但是，当我尝试在代码中访问该私钥时，它为空。我使用以下代码获取我的证书：

```
var x509Certificate = GetCertificate(StoreName.My, StoreLocation.LocalMachine, "CN=SomeCert"); 
```

在哪里：

```
public X509Certificate2 GetCertificate(string storeName, string storeLocation, string subjectName)
{
     var store = new X509Store(getStoreName(storeName), getStoreLocation(storeLocation));
     X509Certificate2Collection certificates = null;
     store.Open(OpenFlags.ReadOnly);

     try
     {
          X509Certificate2 result = null;
          certificates = store.Certificates;
          return getCertificateResult(certificates, subjectName, result);
     }
     finally
     {
          if (certificates != null)
          {
               foreach (var cert in certificates)
               {
                    cert.Reset();
               }
          }
          store.Close();
     }
} 
```

和：

```
private static X509Certificate2 getCertificateResult(IEnumerable certificates, string subjectName, X509Certificate2 result)
{
     foreach (var cert in certificates.Cast<X509Certificate2>().Where(cert => cert.SubjectName.Name != null && cert.SubjectName.Name.ToLower() == subjectName.ToLower()))
     {
          if (result != null)
          {
             throw new ApplicationException(string.Format("There is more than one certificate found for subject Name {0}", subjectName));
          }
          result = new X509Certificate2(cert);
     }

     if (result == null)
     {
          throw new ApplicationException(string.Format("No certificate was found for subject Name {0}", subjectName));
     }
     return result;
} 
```

我可以很好地取回证书，但是当我尝试访问私钥时，请执行以下操作：

```
x509Certificate.PrivateKey 
```

PrivateKey 的值为空。我究竟做错了什么？我需要这个值来签署 SAML2 请求。

*注意：我知道我在那里有一些抽象，但重点是我取回了证书（已找到），但私钥为空。如果有更多关于我的抽象的信息阻止问题得到回答，我可以提供更多细节。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T17:31:34.763

正如这里所描述的[文件](https://stackoverflow.com/a/4097817/938193) `.cer`（我想它也适用于所有证书格式）不能包含私钥。从安全的角度来看，它看起来是正确的，因为这个文件是公开的。
但`X509Certificate2`不仅仅是证书，它是证书本身和其他一些东西的容器。这就是它有属性的原因`PrivateKey`。如果您在代码中需要此信息并且您有私钥文件 ( `.pvk`) 和密码 - 您可以使用`.pfx`文件而不是`.cer`. 它可以使用`pvk2pfx`实用程序创建：

```
> MakeCert -r -pe -ss SampleStoreName -n "CN=Sample" Sample.cer -sky exchange -sv Sample.pvk
> pvk2pfx -pvk Sample.pvk -pi SamplePassword -spc Sample.cer -pfx Sample.pfx -f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T00:25:36.880

Reset的[文档](http://msdn.microsoft.com/en-us/library/ms148445%28v=vs.110%29.aspx)声明它释放了证书的资源。当然，由于该方法称为 Reset 而不是 Dispose，因此可以合理地假设实例应该能够在以后再次需要这些资源时重新获取这些资源。不幸的是，事实并非如此。

在 GetCertificate 的 finally 块中，您对集合中的每个证书（包括您要返回的证书）调用 Reset，这使其无用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T09:43:45.713

我知道这个问题已经很老了，但对于任何未来的读者，让我补充一下我的想法。

对我来说，您获得的证书似乎不包含私钥。商店中的所有证书都没有私钥。当然，您自己的证书将具有私钥，但其他实体的证书将没有有意义的私钥。

在您的代码中，您没有显示您从中获取证书的商店位置。难道你得到的证书不是你自己的吗？

# redirect - 如果通过 iFrame 登录，如何重定向到另一个页面？

> ID：14754613
> 
> 赞同：1
> 
> 时间：2013-02-07T15:19:38.753
> 
> 标签：redirect, iframe

我有一个带有内部 iFrame 页面的 HTML 网站。此 iFrame 加载成员的网页（如果重要，则为 php）。在人们从 iFrame 中登录后，我需要将主 HTML 页面重定向到另一个链接。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:17:25.440

放`window.top.location = "http://www.site.com";`.

# php - 匹配 n 个数字字符以及 1 或 2 个非数字字符的正则表达式

> ID：14754616
> 
> 赞同：1
> 
> 时间：2013-02-07T15:19:50.017
> 
> 标签：php, javascript, regex

我一直在使用标准`([0-9]+)`模式来匹配字符串中的数字，但现在有一个奇怪的边缘情况。我想匹配以下内容：

123
456
.123
123\.
%123
31
14
2
100.55
555.10

在上述情况下，非数字字符是：
.
%
s
h
n
d

但他们可能是各种各样的角色。
想法？

JS 或 PHP 会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:56:13.110

从一个能得到你想要的东西的模式开始：

```
\d+ 
```

现在您还想匹配十进制数字，因此扩展您的选项：

这个匹配数字后跟一个可选的小数点

```
\d+\.? 
```

这个匹配十进制数字：

```
\d*\.\d+ 
```

加入两者将为您提供可靠的数字匹配模式（如果您不想匹配类似的数字，这可能仍然存在问题`000.0000`）：

```
(?:\d+\.?|\d*\.\d+) 
```

现在是棘手的部分。您需要准确确定*哪些*其他字符可能是数字的前缀或后缀。

给定示例，我将做出以下假设：

*   `%`可以前缀小数，但没有后缀
*   `st`, `nd`, `rd`, 并且`th`只能作为整数后缀

鉴于这些假设：

`%`字符可以选择匹配小数：

```
(?:%?(?:\d+\.?|\d*\.\d+)) 
```

可以匹配带后缀的整数（这不验证后缀，`1nd`将是有效的）：

```
(?:\d+(?:st|nd|rd|th) 
```

加入这两种模式会产生：

```
(?:(?:%?(?:\d+\.?|\d*\.\d+))|(?:\d+(?:st|nd|rd|th))) 
```

当然，您可能希望将匹配限制为整个字符串：

```
/^(?:(?:%?(?:\d+\.?|\d*\.\d+))|(?:\d+(?:st|nd|rd|th)))$/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:35:34.240

我试图为所有情况创建几个规则：

```
(\d+(?:\.\d*)?)        // 123 ; 123\. ; 123.45
([%.]\d+)              // %123 ; .123
(\d+(?:st|nd|th))      // 31st ; 2nd ; 14th 
```

然后混合：

```
((?:\d+(?:\.\d*)?)|(?:[%.]\d+)|(?:\d+(?:st|nd|th))) 
```

如果您想要更短的内容，您可以简单地使用`([%.\dshnd]+)`，但这会捕获许多不需要的条目，例如`%%123%%`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:34:53.497

如果您正在寻找您期望的模式的验证（如日期？），您可以这样做：

```
[\d.%]*(nd|st|th){0,1} 
```

如果你知道 % 的位置是领先的，或者你只有一个小数，或者如果你不想要 st/nd/etc 的小数，你可以这样细化：

```
([%]){0,1}[\d]*((((\.[\d]+){0,1}){0,1})|((nd|st|th|rd){0,1})) 
```

我仍然没有在任何地方处理空间，但我认为您可以看到如何添加它？此外，您可能希望确保第 1 次与第 11 次等 - 如果您担心进一步改进验证可以开始进行类似日期的操作（您也许可以更好地使用谷歌搜索）：

```
([023]){0,1}1st|([02]){0,1}2nd|([02]){0,1}3rd|(11|12|13|30|(([012]){0,1}(([4-9])|0))th) 
```

那里有一些额外的括号，试图尽可能清楚

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T16:02:41.350

这一款适合您的需求：

```
^([.]|%)?\d+(((?<=^1)|(?<!^1)1)st|(?<!^1)((?<=^2)|2)nd|(?<!^1)((?<=^3)|3)rd|th|[.]\d*)?$ 
```

[演示](http://regexr.com?33mo5)

```
^                            # start of the string
([.]|%)?                     # . or % {0 or 1 time}
\d+                          # any digit {1 or more times}
(
    ((?<=^1)|(?<!^1)1)st     # either (1) or (ending with 1 but not 11) followed by st
    |(?<!^1)((?<=^2)|2)nd    # either (2) or (ending with 2 but not 12) followed by nd
    |(?<!^1)((?<=^3)|3)rd    # either (3) or (ending with 3 but not 13) followed by rd
    |th                      # th
    |[.]\d*                  # . followed by (a digit {0 or more times})
)?                           # {0 or 1 time}
$                            # end of the string 
```

请注意，JS 将无法理解此正则表达式，因为它不支持后视（`?<=`和`?<!`）。

# asp.net - 用户单击 ASP.Net TreeView 的节点时使用的事件处理程序

> ID：14754617
> 
> 赞同：0
> 
> 时间：2013-02-07T15:19:51.950
> 
> 标签：asp.net, vb.net, treeview, nodes

以下面的 web.sitemap 为例，我们想创建一个事件处理程序来捕获用户单击 ASP.Net TreeView 的“Teachers”链接时的情况。这恰好是一个父节点。

```
 <siteMapNode title="Teachers" url="~/DefaultTeachers.aspx" >
    <siteMapNode url="~/Teachers.aspx" title="Teachers" description="Maintain details of each Teacher." />
    <siteMapNode url="~/TeacherSchedules.aspx" title="Teacher Schedules" description="Maintain teacher schedules." />
    <siteMapNode url="~/TeacherEmailNotices.aspx" title="Email Notices To Teachers" description="Email notices to teachers." />
  </siteMapNode> 
```

你能告诉我在 ASP.Net TreeView 的标记中放置什么事件可能是这样的吗？

```
<asp:TreeView 
    id="TreeViewMain"
    runat="server"
    ExpandDepth="0"
    OnUserClickedTheLink="TreeViewMain_UserClickedTheLink"
    DataSourceID="KnowledgeAcademySiteMap">

    <RootNodeStyle ImageUrl="/Images/book.png" />
    <ParentNodeStyle ImageUrl="/Images/book.png" />
    <LeafNodeStyle ImageUrl="/Images/book.png" />
</asp:TreeView> 
```

同样在代码隐藏文件中，我们希望将 e.Node 或类似的东西放在“If”语句中，以测试实际单击了哪个节点：

```
If e.Node.Text = "Teachers" Then

    ' We will close all other nodes and open up the 3 leaf nodes under "Teachers" here.
    '----------------------------------------------------------------------------------
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:43:48.353

问题是 TreeView 只能执行以下两个功能之一：

1.  回帖
2.  导航

由于您将树视图数据源设置为站点地图，因此它将执行**导航**功能并且**不会**触发任何回发事件。它只会说 - 哦，你点击了教师节点，我只是带你到教师页面，仅此而已。

您可以尝试很多事情：

1.  处理教师页面的 Load 事件内部的处理。当此事件触发时，显然意味着正在加载教师页面，此时您可以编写代码来展开和折叠某些树视图项。
2.  另一种选择是摆脱站点地图并使用映射到自定义 xml 文件的 XmlDataSource，这样您的树视图将具有**回**发行为，并且您将能够检查 OnSelectedNodeChanged 事件中的每个单击节点：

**示例 xml 文件：**

```
<menu name="menu">
  <teachers name="teachers">
    <teacher name="teacher1" />
    <teacher name="teacher2" />
    <teacher name="teacher3" />
  </teachers>
</menu> 
```

**后面的代码：**

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        Dim ds As XmlDataSource = New XmlDataSource
        ds.DataFile = Server.MapPath("~/App_Data/menu.xml")
        TreeViewMain.DataSource = ds
        TreeViewMain.DataBind()
    End If
End Sub

Protected Sub SelectionChanged(sender As Object, e As EventArgs) Handles TreeViewMain.SelectedNodeChanged
    Dim selected As String = TreeViewMain.SelectedValue
    If selected.Equals("teachers") Then
        'Do any required processing and then manually redirect to the Teachers Page
    End If
End Sub 
```

这种方法的问题当然是您需要检查每个单击的项目并手动将用户重定向到特定页面，如果您有许多树视图项目要评估，这是不可接受的

# javascript - jQuery ajax 成功回调函数定义

> ID：14754619
> 
> 赞同：95
> 
> 时间：2013-02-07T15:19:58.220
> 
> 标签：javascript, jquery, ajax

我想使用 jQuery ajax 从服务器检索数据。

我想将成功回调函数定义放在`.ajax()`块之外，如下所示。那么我是否需要`dataFromServer`像下面这样声明变量，以便能够使用成功回调中返回的数据？

我见过大多数人在`.ajax()`块内定义成功回调。如果我想在外面定义成功回调，那么下面的代码是否正确？

```
var dataFromServer;  //declare the variable first

function getData() {
    $.ajax({
        url : 'example.com',
        type: 'GET',
        success : handleData(dataFromServer)
    })
}

function handleData(data) {
    alert(data);
    //do some stuff
} 
```

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-02-07T15:22:59.307

自 jQuery 1.5（2011 年 1 月）以来执行此操作的“新”方法是使用延迟对象而不是传递`success`回调。您应该*返回*结果，`$.ajax`然后使用`.done`等`.fail`方法在调用*之外添加`$.ajax`回调*。

```
function getData() {
    return $.ajax({
        url : 'example.com',
        type: 'GET'
    });
}

function handleData(data /* , textStatus, jqXHR */ ) {
    alert(data);
    //do some stuff
}

getData().done(handleData); 
```

这将回调处理与 AJAX 处理*分离*，允许您添加多个回调、失败回调等，而无需修改原始`getData()`函数。将 AJAX 功能与之后要完成的操作集分开是*一件好事！*.

Deferreds 还允许更轻松地同步多个异步事件，这是您不能轻易做到的`success:`

例如，我可以添加多个回调、一个错误处理程序，并在继续之前等待计时器结束：

```
// a trivial timer, just for demo purposes -
// it resolves itself after 5 seconds
var timer = $.Deferred();
setTimeout(timer.resolve, 5000);

// add a done handler _and_ an `error:` handler, even though `getData`
// didn't directly expose that functionality
var ajax = getData().done(handleData).fail(error);

$.when(timer, ajax).done(function() {
    // this won't be called until *both* the AJAX and the 5s timer have finished
});

ajax.done(function(data) {
    // you can add additional callbacks too, even if the AJAX call
    // already finished
}); 
```

jQuery 的其他部分也使用延迟对象——你可以很容易地将 jQuery 动画与其他异步操作同步。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-02-07T15:21:28.797

只需使用：

```
function getData() {
    $.ajax({
        url : 'example.com',
        type: 'GET',
        success : handleData
    })
} 
```

该`success`属性只需要一个函数的引用，并将数据作为参数传递给该函数。

由于声明的方式，您可以像这样访问您的`handleData`函数`handleData`。JavaScript 将在运行之前解析您的代码以查找函数声明，因此您将能够在实际声明之前的代码中使用该函数。这被称为[吊装](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)。

但是，这不包括像这样声明的函数：

```
var myfunction = function(){} 
```

这些仅在口译员通过它们时可用。

**[有关声明函数的 2 种方式的更多信息，请参阅此问题](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)**

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-07T16:00:14.670

我不知道您为什么要在脚本之外定义参数。那是不必要的。您的回调函数将自动以返回数据作为参数调用。很有可能在`sucess:`ie之外定义你的回调

```
function getData() {
    $.ajax({
        url : 'example.com',
        type: 'GET',
        success : handleData
    })
}

function handleData(data) {
    alert(data);
    //do some stuff
} 
```

将调用handleData 函数，并通过ajax 函数将参数传递给它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-07T15:22:05.287

尝试将您的成功处理程序重写为：

```
success : handleData 
```

ajax 方法的success 属性只需要一个函数的引用。

在您的 handleData 函数中，您最多可以使用 3 个参数：

```
object data
string textStatus
jqXHR jqXHR 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-07T15:22:22.503

我会写：

```
var handleData = function (data) {
    alert(data);
    //do some stuff
}

function getData() {
    $.ajax({
        url : 'example.com',
        type: 'GET',
        success : handleData
    })
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-07T15:22:31.040

您不需要声明变量。Ajax 成功函数自动接受最多 3 个参数：`Function( Object data, String textStatus, jqXHR jqXHR )`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-21T05:34:56.160

几个小时后玩它，几乎变得沉闷。奇迹出现在我身上，它起作用了。

```
<pre>

var listname = [];   

 $.ajax({
    url : wedding, // change to your local url, this not work with absolute url
    success: function (data) {
       callback(data);
    }
});

function callback(data) {
      $(data).find("a").attr("href", function (i, val) {
            if( val.match(/\.(jpe?g|png|gif)$/) ) { 
             //   $('#displayImage1').append( "<img src='" + wedding + val +"'>" );
                 listname.push(val);
            } 
        });
}

function myfunction() {

alert (listname);

}

</pre> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-05T09:30:04.187

在您的组件中，即 Angular JS 代码：

```
function getData(){
    window.location.href = 'http://localhost:1036/api/Employee/GetExcelData';
} 
```

# .net - 如何使用 .NET 使用无外部库向 Twitter API 1.1 发送推文

> ID：14754621
> 
> 赞同：1
> 
> 时间：2013-02-07T15:20:06.140
> 
> 标签：.net, api, twitter, twitterizer

我希望能够使用没有外部库的 .NET 向 Twitter API 1.1 发送推文。除了查看推文的成功状态和/或它是否成功连接到推特之外，推文几乎是我想做的所有事情。

我更喜欢 VB.Net 中的解决方案，但 C# 可以。

我已经使用一个名为 twitterizer 的外部库测试了一个应用程序，我可以很好地发推文，但是 twitterizer 只支持大约一个月后将被弃用的 API 1.0。

谢谢。

# ipad - 为什么更改关闭 WiFi 然后打开会杀死我在后台运行的 iPad 应用程序？

> ID：14754622
> 
> 赞同：2
> 
> 时间：2013-02-07T15:20:07.750
> 
> 标签：ipad, ios-simulator, wifi

我试图弄清楚为什么我的 iPad 应用程序在我让应用程序进入后台时被操作系统杀死，然后在设置应用程序中关闭 WiFi 再打开。

一旦我关闭然后打开 WiFi，然后返回应用程序，应用程序似乎忘记了它在做什么并启动，就好像我在杀死它后启动它一样。

这是预期的行为还是我的应用程序可能正在做的事情？它发生在设备本身上。我无法在模拟器中对其进行测试，因为那里没有 WiFi 切换开关。

# java - POST 使用 SOAPUI 有效。使用 Apache HttpComponents HttpClient 的手动 Java 客户端没有。引发服务器错误。SSL相关？

> ID：14754623
> 
> 赞同：4
> 
> 时间：2013-02-07T15:20:07.567
> 
> 标签：java, apache, https, soapui, apache-commons-httpclient

**请注意，我已经在 SOAPUI 中测试了以下内容，并且使用相同的 URL 和授权凭据似乎可以按预期工作（即返回 200 状态）。它在 SOAPUI 中运行良好的事实使我认为在构建我的请求以处理它是 https 的事实时我应该做一些特定的事情。**

尝试使用以下方法使用 DefaultHttpClient (v4.2.3) POST 到 URL：

```
String requestUrl = "https://test.host.name:9093/ws/simple/serviceName";
HttpPost httpPost = new HttpPost(requestUrl);

String username = "username@domainname";
String password = "pass-word-string";
String usernameAndPassword = username + ":" + password;
String encodedUserNameAndPassword = new sun.misc.BASE64Encoder().encode(usernameAndPassword.getBytes());
httpPost.setHeader("Authorization", encodedUserNameAndPassword);

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(httpPost);
System.out.println(response.getStatusLine().toString());

HttpEntity entity = response.getEntity();           
String responseString = EntityUtils.toString(entity, "UTF-8");
System.out.println(responseString);

EntityUtils.consume(entity); 
```

我遇到的问题是服务器响应 400 状态和错误请求消息：

```
[DEBUG] wire - << "HTTP/1.1 400 Bad Request[\r][\n]"
[DEBUG] wire - << "Connection: close[\r][\n]"
[DEBUG] wire - << "Server: Jetty(6.1.26-boomi)[\r][\n]"
[DEBUG] wire - << "[\r][\n]" 
```

如果我删除身份验证部分，那么我会得到一个“401 Not Authorized”，这至少表明服务器正在等待我的请求：

```
[DEBUG] wire - << "HTTP/1.1 401 Unauthorized[\r][\n]"
[DEBUG] wire - << "WWW-Authenticate: Basic realm="BoomiBasicRealm"[\r][\n]"
[DEBUG] wire - << "Content-Type: text/html; charset=iso-8859-1[\r][\n]"
[DEBUG] wire - << "Cache-Control: must-revalidate,no-cache,no-store[\r][\n]"
[DEBUG] wire - << "Content-Length: 1396[\r][\n]"
[DEBUG] wire - << "Server: Jetty(6.1.26-boomi)[\r][\n]" 
```

服务器管理员说他可以看到以下内容进入服务器日志：

```
SSL renegotiate denied: java.nio.channels.SocketChannel[connected local=/192.168.20.86:9093 remote=/ip.ip.ip.ip:61356]” 
```

奇怪的是，我已经使用相同的代码成功发布到使用 https 的其他 URL，尽管没有在地址中使用不同的端口，并且它可以正常工作。

当我继续调查时，服务器管理员正在从他们的角度查看它，但它在 SOAPUI 中工作的事实让我认为我需要做一些不同的事情。

我注意到 SOAPUI 使用的是 Apache-HttpClient v4.1.1，而我使用的是 4.2.3，所以我切换到 4.1.1 并没有什么不同。因此，我猜测 SOAPUI 在我需要模仿的情况下正在做一些不同的事情。

是否有任何 SOAPUI 开发人员可以提供建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:30:03.430

The sun Base64 encoder will add newlines after a certain number of characters. if your encoded username/password is too long, you will be sending a broken authorization header. trying removing any whitespace from the encode authorization value. (as a side note, you should always use an explicit encoding with `String.getBytes()`)

```
String encodedUserNameAndPassword = new sun.misc.BASE64Encoder()
    .encode(usernameAndPassword.getBytes("UTF-8"))
    .replaceAll("\\s+", ""); 
```

That said, i'm pretty sure apache http client can handle this for you. You should probably be following [this example](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientAuthentication.java).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:04:31.647

也许您应该启用[HttpClient 的抢先授权](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html#d5e1032)，而不是手动添加`Authorization`标头。

另请参阅[使用 Apache HttpClient 4 的抢先式基本身份验证](https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4)

# symfony - Symfony2 访问自定义类

> ID：14754627
> 
> 赞同：3
> 
> 时间：2013-02-07T15:20:17.123
> 
> 标签：symfony, namespaces

我无法访问在捆绑包的新文件夹中创建的自定义类。

我有一个名为：MemberBundle - 位于 src/My/Bundle/MemberBundle

我创建了一个名为 Models 的目录，位于 src/My/Bundle/MemberBundle/Models

在该目录中，我有一个名为 MemberModel.php 的文件，其中包含以下代码：

```
<?php
namespace My\MemberBundle\Models;

class MemberModel {
    public function getActiveCampaignId($zone) {
    ### Custom Mysql Query
    ...
    }
} 
```

当我尝试像这样从我的控制器访问该类时：

```
 $MemberModel = new My\MemberBundle\Models\MemberModel();
    $data = $MemberModel->getActiveCampaignId("1");
    print_r($data); 
```

我收到一个错误：

```
Fatal error: Class 'My\MemberBundle\Models\MemberModel' not found in ... 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:48:32.997

事实证明我没有根据需要使用完整路径。两条路径都需要将“捆绑”添加到其中。

我应该一直在使用这两个代码：

```
<?php
namespace My\Bundle\MemberBundle\Models;

class MemberModel {
    public function getActiveCampaignId($zone) {
    ### Custom Mysql Query
    ...
    }
} 
```

和：

```
 $MemberModel = new My\Bundle\MemberBundle\Models\MemberModel();
    $data = $MemberModel->getRandomActiveCampaignId("1");
    print_r($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T12:28:32.780

我试图附加在类名中有下划线但无法加载类的旧类。显然，当涉及到类名时，下划线是特殊字符，并被视为目录分隔符或这些行中的某些内容。

更多信息@http [://www.sitepoint.com/autoloading-and-the-psr-0-standard/](http://www.sitepoint.com/autoloading-and-the-psr-0-standard/)

> 类名中的每个下划线都转换为 DIRECTORY_SEPARATOR。下划线在命名空间中没有特殊含义。

呸。这花了我太长时间才弄清楚。

# jboss - 在哪里放置 log4j.properties 文件

> ID：14754630
> 
> 赞同：0
> 
> 时间：2013-02-07T15:20:28.853
> 
> 标签：jboss, intellij-idea, log4j, ear

我是 log4j 的新手！我正在使用 IntelliJ Idea。我在 Jboss 7.1.1 Final 上部署 EAR 应用程序。我的 EAR 应用程序包含 EJB 和 WAR 包。

所以问题是 - 将 log4j.properties 或 log4j.xml 放在哪里？我是否需要在代码中初始化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:42:16.690

您可以`log4j.xml`通过使用参数指定在 jvm 启动期间要使用的`-Dlog4j.configuration=\path\to\file`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:15:19.637

如果您使用 JBoss AS 7，则无需在应用程序中包含 log4j.xml 或 logging.properties 配置文件。这样做的唯一原因是使用 JBoss AS 7 日志记录中未包含的附加程序子系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:25:59.190

你需要把它放在任何“类路径”位置。并像在示例中一样使用它

```
package com.foo; 
```

导入 org.apache.log4j.Logger；

公共类 Bar {
静态 Logger logger = Logger.getLogger(Bar.class);
public void doIt() {
logger.debug("又做了一次！");
}
}

# git - 如何在完成命令的合并冲突导致中断后恢复 Git-Flow？

> ID：14754632
> 
> 赞同：31
> 
> 时间：2013-02-07T15:20:32.680
> 
> 标签：git, git-flow

每次我“完成”一个分支并且与 Git-Flow 合并时发生冲突时，我真的需要手动完成所有步骤吗？还是有办法在所有冲突解决后恢复？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-09-16T06:28:43.920

解决冲突后，您只需调用

```
git flow release finish [RELEASE_NAME] 
```

再次。git 是“智能”的，因为如果您尝试多次从分支 A 合并到分支 B，只要合并的源没有改变，第二次和后续的时间就会被“Already up-to-date”忽略.

# c++ - 减去未签名并获得签名

> ID：14754634
> 
> 赞同：2
> 
> 时间：2013-02-07T15:20:38.543
> 
> 标签：c++, c

我可以用这种方式制作演员表吗？

```
int clockOffset;

clockOffset=((int64_t)Time_1_delayed-Time_1-Time_2_delayed+Time_2)/2; 
```

其中所有时间变量都是`uint`。

我想将签名结果保存在`clockOffset`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:29:05.360

这是您可以在 C 中执行的操作（假设 int 和 unsigned int 比 long long 短）：

```
#include <limits.h>

...
  unsigned int Time_1_delayed, Time_1, Time_2_delayed, Time_2;
...
  long long diff = ((long long)Time_1_delayed - Time_1 - Time_2_delayed + Time_2) / 2;
  int clockOffset;

  if (diff < INT_MIN || diff > INT_MAX)
    HandleTheError();

  clockOffset = diff;
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T12:31:33.393

你不需要投射。例如你可以这样做。

```
uint32_t a = 100;
uint32_t b = 200;
int32_t c = a - b; 
```

你会得到`c = -100`.

# jquery - 选择数据表行

> ID：14754641
> 
> 赞同：0
> 
> 时间：2013-02-07T15:20:54.743
> 
> 标签：jquery, datatables

我正在使用 jquery 创建数据表：

```
$('#collectionsList').dataTable( {
    "bJQueryUI": true,
    "bPaginate" : false,
    "bFilter": false,
    "oTableTools": {
        "sRowSelect": "multi"
    },

    "sAjaxSource": serverServicesHandler.get("getCollections"),
        "fnInitComplete" : function(oSettings, json){
    }
}) 
```

我希望在单击时选择一行。

我补充说：

```
"oTableTools": {
    "sRowSelect": "multi"
} 
```

但它不起作用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:30:27.730

要使 TableTools 工作，您必须`.dataTables.sDom`在字符串中设置并包含“T”。像这样的东西：

```
$('#example').dataTable({
        sDom: 'T<"clear">lfrtip',
        oTableTools: {
            "sRowSelect": "multi"
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:24:53.813

您可以按以下方式执行此操作：

```
 oTable = $('#collectionsList').dataTable( ....);

 $('#collectionsList tbody tr').live('click', function (event) {        
 var aData = oTable.fnGetData(this); // get datarow
 if (null != aData)  // null if we clicked on title row
 {
        //now aData[0] - 1st column(count_id), aData[1] -2nd, etc. 
 }}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T11:34:09.973

为了显示选定的行，我在行处使用了这个点击功能：

```
$('body').on("click",'#collectionsList tbody tr',function() {
  if ($(this).hasClass('row_selected')) 
    $(this).removeClass('row_selected'); // select or deselect row
  else {
    /* I don't put this line below
    //---> $(this).siblings('.row_selected').removeClass('row_selected');
    */
    $(this).addClass('row_selected'); // add selected row
  }
  var aData = oTable.fnGetData(this); // get tha data array from columns
  var col0 = aData[0];  // get the first column value
  var col1 = aData[1];  // get the second column value
  var rowsID=this.id; // rowsID is your id of <tr>
}); 
```

# php - PHP 服务器停止我的循环。为什么？

> ID：14754643
> 
> 赞同：1
> 
> 时间：2013-02-07T15:21:06.427
> 
> 标签：php, loops

我正在尝试`3x + 1 problem`通过在线运行 PHP 脚本并评估所有数字来验证 ,。

我有一个无限循环正在运行，但是当值达到大约 35,000 时，服务器停止了我的循环。

我猜测终止是由于我的 HTTP 连接重置并且服务器不再为我的请求提供服务时引起的。

我想让它尽可能长时间地运行，如果它想吃掉服务器的资源。我该怎么做？定时任务？

这是脚本，永远不会打印“结束”。

```
class Collatz_Verify
{
    public function Collatz_Verify()
    {
        // open output file
        $file = 'verified_nums.txt';
        $outFile = fopen($this->NUMBERS_FILENAME, 'a');
    }

    public function verify()
    {
        $num = 0;
        while(1)
        {
            $num += 1;
            # call collatz!!
            if($this->collatz($num) == 1)
                   fwrite($this->outFile, $num);
        }
        print "ah, crap! End!";
    }

    public function collatz($num)
    {
        if ($num == 1)
            return 1;
        if (($num % 2) == 0)
            return $this->collatz($num/2);
        else
            return $this->collatz((3*$num) + 1);
    }
}

// Fire away!
$ver = new Collatz_Verify();
$ver->verify();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:24:46.420

你可以从命令行运行它......你最终会由于缺乏资源而停止。

从命令行运行将使您不必执行我的帖子之前提到的 ini_set。（见：[http](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time) ://www.php.net/manual/en/info.configuration.php#ini.max-execution-time ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:25:35.607

结尾永远不会打印，因为您处于`while(1)`循环中，因此永远不会到达之后的语句。您的脚本可能由于您`php.ini`对变量的设置而终止`max_execution_time`

编辑：尝试使用函数`set_time_limit()` [http://de2.php.net/manual/en/function.set-time-limit.php](http://de2.php.net/manual/en/function.set-time-limit.php)能够增加脚本中的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:23:41.583

php 有一个 max_execution_time 限制，如果你想让它运行更长时间，你可以试试 ini_set('max_execution_time' ,100 ); // 将 100 替换为您希望它能够运行的秒数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T15:48:31.690

PHP 停止执行循环有两个可能的原因。

首先是达到了执行时间限制。第二个是达到了最大嵌套级别（由于递归`collatz()`）。

最大嵌套级别为 100（我不知道如何更改）。默认执行时间限制为 30 秒。正如其他答案所示，您可以增加它。

要找出脚本停止的原因，您应该将显示错误设置为 on 和/或检查 Web 服务器的错误日志。您也可以检查输出文件并从最后一个成功的数字开始。因此，如果输出文件中的最后一个数字是 34998，则将该行更改`$num = 0;`为`$num = 34998;`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T15:25:39.457

在`PHP.ini`文件中，脚本执行的时间/脚本可以使用的内存有限制。

有关完整详细信息，请参阅[http://php.net/manual/en/info.configuration.php](http://php.net/manual/en/info.configuration.php)

# rest - RestEasy 客户端：如何包装列表元素？

> ID：14754648
> 
> 赞同：0
> 
> 时间：2013-02-07T15:21:25.723
> 
> 标签：rest, jaxb, client, resteasy

我正在尝试为 RestEasy REST 服务创建 RestEasy 客户端，提供以下实体：

```
@SuppressWarnings("serial")
@Entity @Table(name="product")
@XmlRootElement(name="product")
public class Product implements Serializable, IHasTraits {

    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(columnDefinition = "INT UNSIGNED")
    private Long id; 
```

结果是

```
[{"id":1,"name":"FOO","note":null,...}] 
```

然后我尝试通过一个界面阅读它。我希望可以使用相同的模型类。

```
@Path("/")
public interface RestClient {

    @GET
    @Path("/products")
    @Produces("application/json")
    public List<Product> getProducts(); 
```

使用

```
 RegisterBuiltin.register(ResteasyProviderFactory.getInstance());
    this.client = ProxyFactory.create(RestClient.class, "http://localhost:8080/essc-portal/rest"); 
```

但是客户抛出：

> 引起：javax.xml.bind.UnmarshalException - 带有链接异常：
> [com.sun.istack.SAXParseException2; 列号：0；意外元素（uri：“”，本地：“id”）。预期元素是 <{}product>]

我试图添加

```
@XmlElementWrapper(name="product") 
```

或者

```
@XmlElement(type = Product.class, name = "product") 
```

或者

```
@org.jboss.resteasy.annotations.providers.jaxb.Wrapped(element = "product") 
```

但两者都没有帮助。

我应该如何解决这个问题？我不想创建额外的 bean 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:00:00.423

RestEasy 客户期望的是：

```
 [{"product":{"id":1,"name":"EAP","note":null,"extIdJira":null,"extIdBugzilla":"226"}] 
```

不是

```
 {"products":[{"id":1,"name":"EAP","note":null,"extIdJira":null,"extIdBugzilla":"226"}]} 
```

所以我最终改变了生产方法：

```
public List<ProductWrapper> getProducts( @Context SecurityContext sc ) {
    final List<Product> prods = daoProd.getProducts_orderName(0);
    return rewrap(prods);
} 
```

和

```
private List<ProductWrapper> rewrap(List<Product> prods) {
    List<ProductWrapper> p2 = new ArrayList(prods.size());
    for( Product product : prods){
        p2.add( new ProductWrapper(product));
    }
    return p2;
} 
```

# php - 我想将数据库中的数据拆分为三列表

> ID：14754650
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:21:31.357
> 
> 标签：php, mysql

我想将数据库中的数据拆分为表的三列，但我不知道该怎么做我已经尝试过，但它不能正常工作请帮助我提前谢谢

```
 <?php
 $count=1;
$query1=mysql_query(" SELECT *,category.id ids FROM category INNER JOIN products ON  category.`cid`=products.`cid` WHERE category.id='$id' ") or die ('Product Query Problem');
    while($row1=mysql_fetch_array($query1))
    {
    $count++;
?> 
```

我想将数据库中的数据拆分为表的三列，但我不知道该怎么做我已经尝试过，但它不能正常工作请帮助我提前谢谢

```
 <div class="main_content">

<div class="featured-items clearfix">
<div class="items clearfix">
<table border="0">
<tr>
<td><div class="item-block-1">
<div class="image-wrapper">
<div class="image">
<div class="overlay">
<div class="position">
<div>
<p><?php echo $row1['description']; ?></p>
<a href="pandora-homepage.html#" class="quickshop">Quick shop</a>
</div>
</div>
</div>
<a href=""><img src="products/images/photos/photo-2.jpg" style="margin: -27.5px 0 0 0;" alt="" /></a>
</div>
</div>
<h2><a href=""><?php echo $row1['product']; ?></a></h2>
<p class="price"><?php echo $row1['price']; ?></p>
</div>
<?php
if($count%3==1)
{

    ?></td></tr>
  </table>
<?php   }}?>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:44:43.920

[您将在此处](http://davidwalsh.name/html-mysql-php)找到从 php 创建 html 表的非常清晰的示例。我复制了一些相关的行：

```
if(mysql_num_rows($result2)) {
    echo '<table cellpadding="0" cellspacing="0" class="db-table">';
    echo '<tr><th>Field</th><th>Type</th><th>Null</th><th>Key</th><th>Default<th>Extra</th></tr>';
    while($row2 = mysql_fetch_row($result2)) {
       echo '<tr>';
       foreach($row2 as $key=>$value) {
           echo '<td>',$value,'</td>';
       }
       echo '</tr>';
    }
    echo '</table><br />';
} 
```

它与表中的所有列相呼应——如果你想做一些不同的事情，你可以改变内部`foreach`循环。我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:36:17.840

尝试这个

```
 <?php
  $count=1;
 ?>
 <div class="main_content">

<div class="featured-items clearfix">
<div class="items clearfix">
<table border="0">

<?
$query1=mysql_query(" SELECT *,category.id ids FROM category INNER JOIN products ON   category.`cid`=products.`cid` WHERE category.id='$id' ") or die ('Product Query Problem');
 while($row1=mysql_fetch_array($query1))
 {
 $count++;
 ?>

  <tr><td><div class="item-block-1">
  <div class="image-wrapper">
  <div class="image">
  <div class="overlay">
  <div class="position">
  <div>
   <p><?php echo $row1['description']; ?></p>
   <a href="pandora-homepage.html#" class="quickshop">Quick shop</a>
  </div>
  </div>
  </div>
 <a href=""><img src="products/images/photos/photo-2.jpg" style="margin: -27.5px 0 0 0;" alt="" /></a>
  </div>
  </div>
  <h2><a href=""><?php echo $row1['product']; ?></a></h2>
  <p class="price"><?php echo $row1['price']; ?></p>
  </div>
  <?php
   if($count%3==1)
    {

    ?></td></tr>
   <?php   }}?>
  </table>
  </div>
  </div>
  </div> 
```

# ember.js - 计算属性返回一个函数？不确定是我还是最新的 ember.js 中的错误

> ID：14754655
> 
> 赞同：1
> 
> 时间：2013-02-07T15:21:53.867
> 
> 标签：ember.js

嘿，你们都在我的 ember 代码中遇到了最奇怪的问题。(1.0-pre4)

这个看似无害的代码根本没有按预期工作：

```
a = Ember.Controller.create({ 
        hello: function(){ 
            return "hello"; 
        }.property() 
    } ) 
```

当我这样做时，它`a.get("hello")`不会返回**hello**，而是返回一个函数！

这是一个转储：

```
i
_cacheable: true
_dependentKeys: Array[0]
func: function (){ return "hello"; }
__proto__: Ember.Descriptor 
```

在车把模板中，它显示为**[object Object]**

我绝不是一个经验丰富的 Ember 程序员。但我很确定这曾经以不同的方式工作。有什么改变吗？

但是，我注意到当我调用`a.hello.func()`then 时会返回**hello**！

这绝对没有任何意义。我可能做错了什么，或者Ember有问题吗？

任何帮助表示赞赏。我知道这个问题与其他一些问题相似，但我没有其他方法可以在其他人的答案中以一种有凝聚力的方式记下我的所有信息。

编辑：我想我知道问题是什么。你不能在“创建”函数中指定计算属性。将首先尝试“扩展”并报告！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:16:11.193

从 ember 1.0.0-pre.3 开始，您不能再通过`Object.create()`. 在大多数情况下你应该使用`extend`，但如果你需要旧的行为可以使用`createWithMixins()`。

也可以看看：

[https://github.com/emberjs/ember.js/commit/c1c720781c976f69fd4014ea50a1fee652286048](https://github.com/emberjs/ember.js/commit/c1c720781c976f69fd4014ea50a1fee652286048)

[Ember.Object.create 不再支持定义调用 _super 的方法](https://stackoverflow.com/questions/13976340/ember-object-create-no-longer-supports-defining-methods-that-call-super)

# android - 需要带有只读缩进的 EditText

> ID：14754663
> 
> 赞同：0
> 
> 时间：2013-02-07T15:22:12.947
> 
> 标签：android, textview, android-edittext

有没有人知道如何在 EditText 的第一行实现空白缩进，以便用户无法修改缩进？

我的目标是在缩进区域叠加一些其他信息（可能是图形），并且仍然允许 EditText 的其余部分将长线换行回正常的左边距。

后备方案是为“其他信息”添加单独的行或列，但这并不是对屏幕空间的良好使用。

也许有更好的方法来做到这一点。欢迎提出建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:43:45.560

我不确定您要做什么，但您可以在提示时动态地“修改”文本。

使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)，它为您提供按顺序调用的三种方法。尝试使用一些断点进行调试，以更好地理解变量并使用它们！

```
((EditText) findViewById(R.id.myEditText)).addTextChangedListener(new TextWatcher() {
      @Override
      public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

      @Override
      public void onTextChanged(CharSequence s, int start, int before, int count) {}

      @Override
      public void afterTextChanged(Editable s) {}
}); 
```

# hadoop - datanode DataNode上的致命磁盘错误失败的卷：

> ID：14754673
> 
> 赞同：0
> 
> 时间：2013-02-07T15:22:40.000
> 
> 标签：hadoop

我在我的名称节点上收到以下日志，并将我的数据节点从执行中删除

```
2013-02-08 03:25:54,345 WARN  namenode.NameNode (NameNodeRpcServer.java:errorReport(825)) - Fatal disk error on xxx.xxx.xxx.xxx:50010: DataNode failed volumes:/home/srikmvm/hadoop-0.23.0/tmp/current;
2013-02-08 03:25:54,349 INFO  net.NetworkTopology (NetworkTopology.java:remove(367)) - Removing a node: /default-rack/xxx.xxx.xxx.xxx:50010 
```

谁能建议如何纠正这个问题？

数据节点日志：

```
2013-02-08 03:25:54,718 WARN datanode.DataNode (FSDataset.java:checkDirs(871)) - Removing failed volume /home/srikmvm/hadoop-0.23.0/tmp/current:   
    org.apache.hadoop.util.DiskChecker$DiskErrorException: can not create directory: /home/srikmvm/hadoop-0.23.0/tmp/current/BP-876979163-137.132.153.125-13602411944‌​23/current/finalized 
      at org.apache.hadoop.util.DiskChecker.checkDir(DiskChecker.java:87) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:10:51.317

导致此错误消息的原因：

*   目录/目录路径是否存在
*   运行datanode进程的用户是否有权限创建/写入该目录

    /home/srikmvm/hadoop-0.23.0/tmp/current/BP-876979163-137.132.153.125-13602411944‌​23/current/finalized

# c++ - QTermWidget：模拟按键 Python/C++

> ID：14754675
> 
> 赞同：0
> 
> 时间：2013-02-07T15:22:47.870
> 
> 标签：c++, python, qt, terminal

所以我试图在我的程序中向 QTermWidget 发送一个模拟的返回键。我在 Python /Qt4 和 C++/Qt4 中都有这个的工作版本。在这一点上，我真的不在乎它是否是用任何一种语言编写的，因为我对 C++ 语法有了不错的掌握。话虽这么说，任何一种语言的答案都是天赐之物。

到目前为止我已经尝试过

```
 QTest.KeyClick(self.Terminal, Qt.KeyReturn, Qt.NoModifier) // syntax is python here 
```

和

```
 key_press = QKeyEvent(QEvent.KeyPress, Qt.Key_Return, Qt.NoModifier)
    self.Terminal.keyPressEvent(key_press)
    key_release = QKeyEvent(QEvent.KeyRelease, Qt.Key_Return, Qt.NoModifier)
    self.Terminal.keyPressEvent(key_release) 
```

还有一些我现在记不太清了。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:25:19.713

这对我有用，也应该与其他小部件一起使用。

```
import sys
from PyQt4 import QtCore, QtGui, Qt
from ChildWindow import ChildWindow

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        QtCore.QTimer.singleShot(500, self.showChildWindow)
        self.textEdit = QtGui.QTextEdit(self)
        self.textEdit.resize(100, 100)

    def showChildWindow(self):
        QtGui.QApplication.sendEvent(self.textEdit, QtGui.QKeyEvent(QtGui.QKeyEvent.KeyPress, QtCore.Qt.Key_A, QtCore.Qt.NoModifier, "hello"))
        QtGui.QApplication.sendEvent(self.textEdit, QtGui.QKeyEvent(QtGui.QKeyEvent.KeyPress, QtCore.Qt.Key_Return, QtCore.Qt.NoModifier))

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:18:51.657

你在 C++ 中试过这个吗？

```
QKeyEvent *ev = new QKeyEvent( QEvent::KeyPress, Qt::Key_Return, Qt::NoModifier );
myApp->postEvent( receivingWidget, ev ); 
```

# safari - 从 webdriver 运行 safari

> ID：14754680
> 
> 赞同：0
> 
> 时间：2013-02-07T15:22:58.607
> 
> 标签：safari, webdriver

我正在尝试从 WebDriver 运行 Safari。当我启动项目时，它无法构建，因为它找不到 safari。Safari 已安装在机器上，我已注册为开发人员。

有没有人有办法解决吗？

代码：

```
 if(browser.equalsIgnoreCase("firefox")) {
        capability = DesiredCapabilities.firefox();
        capability.setBrowserName("firefox");
        capability.setPlatform(org.openqa.selenium.Platform.ANY);
    }
    if(browser.equalsIgnoreCase("iexplore")) {
        capability = DesiredCapabilities.internetExplorer();
        capability.setBrowserName("iexplore");
        capability.setPlatform(org.openqa.selenium.Platform.WINDOWS);
    }
    if(browser.equalsIgnoreCase("chrome")) {
        capability = DesiredCapabilities.chrome();
        capability.setBrowserName("chrome");
        capability.setPlatform(org.openqa.selenium.Platform.ANY);
    }
    if(browser.equalsIgnoreCase("safari")) {
        capability = DesiredCapabilities.safari();
        capability.setBrowserName("safari");
        capability.setPlatform(org.openqa.selenium.Platform.ANY);
    }

    driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability);
    driver.navigate().to(test_data.BASE_URL); 
```

堆栈跟踪：

```
FAILED CONFIGURATION: @BeforeClass setup("safari")
org.openqa.selenium.WebDriverException: Error forwarding the new session cannot find : {platform=ANY, browserName=safari, version=}
Command duration or timeout: 203 milliseconds 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T12:30:38.123

selenium 的新版本，即**selenium 2.30.0**已发布。抓住它，因为它内置了对 safari 驱动程序的支持......享受！

# wordpress - Cforms II 上传错误

> ID：14754685
> 
> 赞同：1
> 
> 时间：2013-02-07T15:23:19.227
> 
> 标签：wordpress

我的网站上安装了 cforms II 插件。我创建了一个表单，但它似乎不起作用，因为我无法上传任何文件。

当我尝试上传文件时，它只说：

```
"File upload failed. Please try again or contact the blog admin." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:54:56.837

我相信这可能是以下任一原因的结果：

1.  上传目录的文件权限不足
2.  文件上传目录的路径损坏
3.  尝试上传大于网站限制的文件

感兴趣的链接：

上传文件失败和文件大小 [http://www.deliciousdays.com/cforms-forum/troubleshooting/upload-file-failed-and-file-size/](http://www.deliciousdays.com/cforms-forum/troubleshooting/upload-file-failed-and-file-size/)

[http://www.wordimpressed.com/screencasts/screencast-increasing-the-wordpress-default-upload-size-limit/](http://www.wordimpressed.com/screencasts/screencast-increasing-the-wordpress-default-upload-size-limit/)

如何正确增加 WordPress 的文件上传大小 [http://www.wordimpressed.com/coding/how-to-increase-wordpress-file-upload-size-correctly/](http://www.wordimpressed.com/coding/how-to-increase-wordpress-file-upload-size-correctly/)

我希望这有帮助！

# java - Hook method with multiple types

> ID：14754686
> 
> 赞同：0
> 
> 时间：2013-02-07T15:23:24.157
> 
> 标签：java, xml

**What I want to do**

I want to export several different Java objects to XML. In order to minimize code duplication, I took the following approach:

I made an abstract class implementing the creation of a standard empty DOM document and the transformer factory part.

Then I added an abstract method for filling the DOM document with the specific object data. I then made a CustomerExporter class which extended the abstract class and implemented the abstract method for that specific object.

I got that to work.

**My question**

How do write the abstract method so that it can cope with the different Java objects?

**The problem**

The objects are of different types so the attributes are not always the same. So an Interface wouldn't work (or would it?).

**The code**

Customer class

```
package org.flexdataexoporter.dao;

public class Customer{

    private int customerID;
    private String firstname;
    private String lastname;
    private int telnumber;

    public Customer(int customerID, String firstname, String lastname, int telnumber){

        this.customerID = customerID;
        this.firstname = firstname;
        this.lastname = lastname;
        this.telnumber = telnumber;
    }

    public int getCustomerID(){
        return customerID;
    }

    public String getFirstName(){
        return firstname;
    }

    public String getLastName(){
        return lastname;
    }

    public int getTelNumber(){
        return telnumber;
    }

    public void setCustomerID(int customerID) {
        this.customerID = customerID;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    public void setTelnumber(int telnumber) {
        this.telnumber = telnumber;
    }
} 
```

Customers class

```
package org.flexdataexoporter.dao;

import java.util.ArrayList;

public class Customers extends ArrayList<Customer>  {

    private static final long serialVersionUID = 1L;

    public Customers(){ };

} 
```

Abstract exporter class

```
package org.flexdataexporter.export;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.flexdataexoporter.dao.Customers;
import org.w3c.dom.Document;

public abstract class XMLExporter {

    public void generateXML(Customers customers) throws ParserConfigurationException, TransformerException{
        Document doc = createDomDoc();
        fillXML(doc, customers);
    }

    protected Document createDomDoc() throws ParserConfigurationException{
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.newDocument();
        return doc;
    }

    public abstract void fillXML(Document doc, Customers customers) throws TransformerException;

    protected void writeDoc(Document doc) throws TransformerException{

        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(System.out);
        transformer.transform(source, result);
    }

} 
```

Specific export class

```
package org.flexdataexporter.export;

import javax.xml.transform.TransformerException;

import org.flexdataexoporter.dao.Customer;
import org.flexdataexoporter.dao.Customers;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class CustomerExporter extends XMLExporter {

    public CustomerExporter(){ }

    @Override
    public void fillXML(Document doc, Customers customers) throws TransformerException {
        Element rootElement = doc.createElement("customers");
        doc.appendChild(rootElement);

        for(Customer c  : customers){
            Element customer = doc.createElement("customer");
            rootElement.appendChild(customer);
            customer.setAttribute("id", Integer.toString(c.getCustomerID()));

            Element name = doc.createElement("firstname");
            name.appendChild(doc.createTextNode(c.getFirstName()));
            customer.appendChild(name);

            Element lastname = doc.createElement("lastname");
            lastname.appendChild(doc.createTextNode(c.getLastName()));
            customer.appendChild(lastname);

            Element phone = doc.createElement("phone");
            phone.appendChild(doc.createTextNode(Integer.toString(c.getTelNumber())));
            customer.appendChild(phone);
            super.writeDoc(doc);
        }
    }
} 
```

I hope someone can help me with a solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:51:19.777

I suggest a different approach:

1.  Specify the XSD
2.  Use xjc (e.g. via a Maven Plugin or an Ant task) to generate JAXB classes
3.  Use JAXB to marshal the XML documents

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:02:14.850

I would suggest looking for a library to do this for you. But assuming you need to write it your self, I think what you want is generics

```
public abstract class XMLExporter<T> {
    public void generateXML(T object) throws ParserConfigurationException, TransformerException{
        Document doc = createDomDoc();
        fillXML(doc, object);
    }

    public abstract void fillXML(Document doc, T object) throws TransformerException;
} 
```

And then your implementing class

```
public class CustomerExporter extends XMLExporter<Customers> {

} 
```

I haven't used Java in a while so my syntax maybe wrong or incomplete but hopefully this gets going where you wanted to go.

# ios - 地址簿唯一电话号码

> ID：14754692
> 
> 赞同：3
> 
> 时间：2013-02-07T15:23:42.457
> 
> 标签：ios, addressbook

是否有任何图书馆可以使用电话号码获取地址簿联系人并将其转换为具有国际国家电话代码的唯一电话号码。

这将涉及

1.  给定特定国家代码后，将本地电话号码转换为国际电话号码。

2.  识别和维护现有的国际号码

这是为了实现类似于 whatsapp 所做的事情，通过使用完整的电话号码作为用户名并将用户联系人转换为完整的电话号码，以检查您的哪些朋友在 whatsapp 上。

我将自己尝试一下，但我觉得在满足各种不同的电话号码配置方面需要做很多工作，所以任何先机都会很有用。

# sql-server-2008 - 需要整月的每日计数 - SQL2008

> ID：14754693
> 
> 赞同：0
> 
> 时间：2013-02-07T15:23:57.870
> 
> 标签：sql-server-2008

我正在尝试生成简单的报告，该报告每天为我提供整个月的失败测试计数。有没有办法编写一个 sql 查询来做到这一点？而不是通过更改日期来运行查询？这就是我正在做的事情：

```
select count (*) from students where Message Like 'Failed Test.%'
and Timestamp > '01-01-2013' and Timestamp < '01-02-2013' 
```

所以上面的查询给了我 5 个计数。然后我将日期从 01-01 更改为 01-02 并获得下一天的计数，依此类推。但这似乎是非常耗时的事情。只是检查是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:25:45.943

这给出了一个月日期范围内按天分组的计数：

```
select cast(timestamp as date) as [Date], count (*) as NumFailedTests
from students 
where Message Like 'Failed Test.%'
and Timestamp between '2013-01-01' and '2013-01-31'
group by cast(timestamp as date)
order by cast(timestamp as date) 
```

您显然可以扩大日期范围...

[希望“时间戳”列不是真正的时间戳...]

# .htaccess - 将静态 html 重写为动态 php 错误错误标志分隔符

> ID：14754694
> 
> 赞同：2
> 
> 时间：2013-02-07T15:23:57.700
> 
> 标签：.htaccess, redirect

在完成了一些关于将静态 url 重写为 php url 的建议之后，我在尝试将 http://www.example.com/clothing 重定向 [到](http://www.example.com/clothing)http://www.example.com/index.php?main_page=index&cPath=999[时](http://www.example.com/index.php?main_page=index&cPath=999)遇到了障碍 使用这个规则

```
RewriteRule ^clothing/index.html index.php?main_page=index&cPath=999 [L] 
```

我不断得到

```
rewriterule: bad flag delimiter 
```

即使在更改/添加 / 和 \ 到规则之​​后。

这是我的 .htaccess 文件

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

# From Ultimate SEO URLs
RewriteRule ^(.*)-p-(.*).html$ index\.php?main_page=product_info&products_id=&%   {QUERY_STRING} [L]
RewriteRule ^(.*)-c-(.*).html$ index\.php?main_page=index&cPath=&%{QUERY_STRING} [L]
RewriteRule ^(.*)-m-([0-9]+).html$ index\.php?main_page=index&manufacturers_id=&%{QUERY_STRING} [L]
RewriteRule ^(.*)-pi-([0-9]+).html$ index\.php?main_page=popup_image&pID=&%{QUERY_STRING} [L]
RewriteRule ^(.*)-pr-([0-9]+).html$ index\.php?main_page=product_reviews&  products_id=&%{QUERY_STRING} [L]
RewriteRule ^(.*)-pri-([0-9]+).html$ index\.php?main_page=product_reviews_info&products_id=&%{QUERY_STRING} [L]
RewriteRule ^(.*)-ezp-([0-9]+).html$ index\.php?main_page=page&id=&%{QUERY_STRING} [L]

# All other pages
# Don't rewrite real files or directories
RewriteCond %{REQUEST_FILENAME} !-f [NC] 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*).html$ index\.php?main_page=&%{QUERY_STRING} [L] 
```

# jenkins - 缺少 jenkins valgrind 可执行选项

> ID：14754698
> 
> 赞同：2
> 
> 时间：2013-02-07T15:24:02.033
> 
> 标签：jenkins, executable, valgrind, options

我已经安装了带有[valgrind 插件](https://wiki.jenkins-ci.org/display/JENKINS/Valgrind+Plugin)的 jenkins CI 。那里缺少一件非常重要的事情：您无法设置可执行选项。我可以设置参数，但是如果我想调用`valgrind my_executable -opt my_option_value`插件会生成命令`valgrind my_executable "-opt my_option_value"`，这是没用的。

我找到了与此功能相对应的[jira 票。](https://issues.jenkins-ci.org/browse/JENKINS-15138)据说自 0.12 版起已修复，但在我的 jenkins（最新版本 - 1.500 和 valgrind 插件 0.18）和主插件网站截图中都看不到。

有谁知道 valgrind jenkins 插件是否支持可执行选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:01:32.447

问题的解决方案非常明显——它只是一个 valgrind 插件错误（它将 valgring 可执行选项转储在引号中，但它不应该）。此错误将在计划于今年 2 月底发布的插件（0.19）的下一个版本中修复。请参阅对[https://issues.jenkins-ci.org/browse/JENKINS-15138](https://issues.jenkins-ci.org/browse/JENKINS-15138)和[https://issues.jenkins-ci.org/browse/JENKINS-16123的评论](https://issues.jenkins-ci.org/browse/JENKINS-16123)

# node.js - 一般用户会话处理（Nodejs）

> ID：14754699
> 
> 赞同：0
> 
> 时间：2013-02-07T15:24:04.063
> 
> 标签：node.js, mongodb, session

`nodejs`我用and编写了一个简单的网络服务器`express`。我使用电子邮件用户名和密码实现了用户身份验证。此外，我有一个记忆功能，它将用户 ID 和密码哈希存储到一个 cookie 中。现在我想要一个额外的会话，当用户关闭浏览器或单击注销按钮时结束。

哪种方式是实施的最佳实践？会话是否与具有过期时间的记住功能相同，并且在每个请求中我必须根据数据库检查凭据？（我对此不太确定）

我正在使用的技术：`nodejs`, `express`,`mongodb`

这不仅仅是一个`nodejs`问题，我更愿意对问题进行一般性解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:34:24.983

让我先解决这个问题；将密码散列存储到 cookie 中将允许任何人在拥有密码散列时登录，如果密码散列由于某种原因被暴露，那将是灾难性的。加密 cookie 很好，但不要让您存储在数据库中的实际哈希用于身份验证。曾经。

关于重新身份验证，Node 是一种在单个线程上运行的技术，并通过在多个处理器和/或机器上运行更多实例来扩展。保持会话是避免访问数据库的好主意，但您也必须考虑架构。例如，如果您使用存储在文件中的会话（ala PHP）并且需要扩展到多台机器，会发生什么？没有什么好，至少。因此，您需要一个中心点来跟踪会话。

这可以是您的数据库 (MongoDB) 或 Redis 之类的东西，也可以是其他允许您检查会话的集中式机制。无论哪种方式，您都必须花时间执行请求并检索客户端的会话值。如果您没有需要存储的其他值，那么创建专用会话架构（需要过期等）是没有意义的，并且再次进行身份验证是最简单和最合乎逻辑的解决方案。

就我个人而言，我几乎不需要会话，只需再次进行身份验证。

# c++ - C ++编写适当的类似函数的宏

> ID：14754703
> 
> 赞同：0
> 
> 时间：2013-02-07T15:24:18.253
> 
> 标签：c++, directive

我一直在努力尝试编写一个适当`#define`的类似函数的宏，但被卡住了。这是我正在使用的示例：

```
#include <iostream>
#define pMAKE(x,y,z,dest)\
    (dest).(x) = (x);\
    (dest).(y) = (y);\
    (dest).(z) = (z);

struct pt {
    double x, y, z;
};

int main() {
    pt p;
    pMAKE(0,1,2,p);
    return 0;
} 
```

我得到的错误是：

```
A.cpp: In function ‘int main()’:
A.cpp:13: error: expected unqualified-id before ‘(’ token
A.cpp:13: error: expected unqualified-id before ‘(’ token
A.cpp:13: error: expected unqualified-id before ‘(’ token 
```

这些错误是什么意思，为什么我会得到它们？我设法让以下内容按照我想要的方式工作，但老实说，我很幸运，我真的不明白发生了什么。

```
#define pMAKE(X,Y,Z,dest)\
    dest.x = (X);\
    dest.y = (Y);\
    dest.z = (Z); 
```

我感谢每一点帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T15:26:32.873

使用您的宏的第一个版本，`pMAKE(0,1,2,p);`扩展为

```
p.0 = 0;
p.1 = 1;
p.2 = 2;; 
```

换句话说，您已经使用,预处理了对`x`,成员的引用，`y`作为变量名（在赋值的左侧）和要被预处理器替换的标签（在右侧作业）。`z``pt``x``y``z`

（正如 Konrad Rudolph 所指出的）不幸的是，您的宏仍然存在另一个严重错误。考虑表单的代码

```
pt p;
if (foo)
    pMAKE(0,1,2,p); 
```

扩展到

```
pt p;
if (foo)
    p.x = 0;
p.y = 1;  // happens regardless of 'foo' test
p.z = 2;; // happens regardless of 'foo' test 
```

您可以通过将宏更改为来解决此问题（并摆脱烦人的额外分号）

```
#define pMAKE(X,Y,Z,dest)\
    do { \
        (dest).x = (X);\
        (dest).y = (Y);\
        (dest).z = (Z);\
    } while (0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T15:26:26.230

```
struct pt {
    double x, y, z;
    pt(double _x, double _y, double _z) : x(_x), y(_y), z(_z) { }
};

pt p (0.0, 1.0, 2.0); 
```

不要在 C++ 中使用宏。

或者，正如@potatoswatter 建议的那样，~~在 C++11中立即完成~~

```
struct pt { double x, y, z; };
pt p = { 0.0, 1.0, 2.0 }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T15:29:49.983

> 这些错误是什么意思，为什么我会得到它们？

宏用参数替换*所有*出现的参数；所以

```
(dest).(x) = (x) 
```

变成

```
(dest).(0) = (0) 
```

这是胡说八道。编译器需要一个成员名称（一个标识符，在语言语法中称为“unqualified-id”），但`(0)`改为看到。

在第二个版本中，`x`不是参数名称，所以`dest.x`没有改变。

更好的方法是避免使用宏；使用一个功能：

```
pt make_pt(double x, double y, double z) {
    pt p;
    p.x = x; 
    p.y = y;
    p.z = z;
    return p;
}

int main() {
    pt p = make_pt(0,1,2);
} 
```

或者只使用聚合初始化：

```
int main() {
    pt p = {0,1,2};
} 
```

并且，在 C++11 中，来自初始化列表的赋值：

```
p = {4,5,6}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T15:31:49.713

宏用作**文本**替换。宏的参数出现在替换列表中的任何地方，在文本上都被参数替换。因此，在您的情况下，`pMAKE(0, 1, 2, p);`扩展为：

```
(p).(0) = (0);
(p).(1) = (1);
(p).(2) = (2);; 
```

（实际上，它们都在一行上，因为宏不保留换行符，但为了清楚起见，我把它放在了三行上）。

在您的情况下，您不需要宏。您需要一个内联函数（可能是 的成员函数或构造函数`pt`）。仅在需要其文本性质的地方使用宏（例如将标记组合成标识符等）。对于所有其他，使用（内联）函数。像这样：

```
struct pt
{
  double x, y, z;
  pt(double ax, double ay, double az) : x(ax), y(ay), z(az) {}
};

int main()
{
  pt p(0, 1, 2);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T15:32:51.380

使用内联函数，

```
pt& pMake(int x, int y, int z, pt&p){
    p.x=x;
    p.y=y;
    p.z=z;
    return p;
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T15:29:27.487

`.(x)`成员访问意外地使用了参数的名称`x`。（此外，成员访问的第二个操作数不是表达式，因此括号不属于。）最佳做法是保持所有宏名称和宏参数全部大写，以防止命名冲突。并避免使用单个字符标识符。

```
#define POINT_MAKE(X,Y,Z,DEST)\
    (DEST).x = (X);\
    (DEST).y = (Y);\
    (DEST).z = (Z); 
```

# clojure - 如何制作一个累积序列？

> ID：14754706
> 
> 赞同：22
> 
> 时间：2013-02-07T15:24:21.320
> 
> 标签：clojure, cumulative-sum

假设我有一个惰性序列，如下所示：

```
(def s (iterate inc 1))
(take 10 s)
=> (1 2 3 4 5 6 7 8 9 10) 
```

现在，我想生成`s`如下的累积和序列：

```
=> (1 3 6 10 15 ...) 
```

我怎样才能做到这一点？我尝试的是使用`atom`并累积总和（变异）这是生成累积序列的唯一方法还是有更好的方法来做到这一点？

注意：上述累计金额仅为示例。源序列可以是其他序列。所以我不能使用公式：`s(n) = n(n+1)/2`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-07T15:28:03.533

```
(take 10 (reductions + s))
=> (1 3 6 10 15 21 28 36 45 55) 
```

# asp.net - 在 ASP.NET 4.0 中加载上传文件时出现 EPPlus 异常

> ID：14754708
> 
> 赞同：0
> 
> 时间：2013-02-07T15:24:23.167
> 
> 标签：asp.net, epplus

这是我的代码。其目的是计算第一列中包含文本的行数。

```
ExcelWorksheet sheet = null;
using (ExcelPackage pkg = new ExcelPackage(new MemoryStream(_fileBytes)))
{
  sheet = pkg.Workbook.Worksheets[1];
}

int rows = sheet.Dimension.End.Row;
int count = 0;
for (int i = 1; i <= rows; ++i)
{
  if (!string.IsNullOrEmpty(sheet.Cells[i, 1].Text))
    ++count;
} 
```

`sheet.Cells[i, 1].Text`当我只是在调试器之外运行代码时，我在调用时遇到异常：

```
Package object was closed and disposed, so cannot carry out operations 
on this object or any stream opened on a part of this package. 
```

当我使用调试器逐步完成它时，我得到了同样的异常......除非我在我的监视窗口中有这个：`sheet.Cells[1, 1].Text`. 如果我在代码上运行调试器（即按 F5），在`sheet`对象初始化之前，我会得到异常。如果我在我的 Watch 窗口中使用剪断的代码单*步执行代码，则无一例外。*代码完美无缺。Watch 窗口正确显示了第一个单元格的内容。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:29:22.520

您收到异常是因为您试图访问语句`ExcelPackage`外部的工作表`using`（处理包）。

```
using (ExcelPackage pkg = new ExcelPackage(new MemoryStream(_fileBytes)))
{
    sheet = pkg.Workbook.Worksheets[1];
    int rows = sheet.Dimension.End.Row;
    int count = 0;
    for (int i = 1; i <= rows; ++i)
    {
    if (!string.IsNullOrEmpty(sheet.Cells[i, 1].Text))
      ++count;
    }
} 
```

顺便说一句，您可以使用 Linq 缩短代码：

```
using (ExcelPackage pkg = new ExcelPackage(new MemoryStream(_fileBytes)))
{
    var sheet = pkg.Workbook.Worksheets.First();
    int count = sheet.Cells[1, 1, sheet.Dimension.End.Row, 1]
        .Count(c => !string.IsNullOrEmpty(c.Text));
} 
```

# reference - 对象引用的 Cython 初始化

> ID：14754709
> 
> 赞同：4
> 
> 时间：2013-02-07T15:24:24.530
> 
> 标签：reference, cython

我正在尝试获取对 cython 中对象的引用。以下代码编译没有问题：

```
cdef vector[int] a
a.push_back(1)
cdef vector[int] & b=a 
```

但是，当我添加以下行时：

```
b.push_back(1) 
```

编译器抱怨 b 已被声明为引用但未初始化。我应该如何在 cython 中初始化引用？（文档对 cython 中引用的使用有点模糊）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T14:08:47.400

为什么不这样做：

```
cdef vector[int] a
a.push_back(1)
cdef vector[int] *b=&a
b[0].push_back(1)
b.push_back(2)      # Works too, I gess 
```

# uitableview - iOS6 - 如何在 UIScrollView 内滚动具有动态帧高度的 UITableView

> ID：14754713
> 
> 赞同：2
> 
> 时间：2013-02-07T15:24:39.117
> 
> 标签：uitableview, ios6, uiscrollview

我正在使用 iOS6 和 Xcode 4.5.2。使用故事板，我创建了以下图表：

![在此处输入图像描述](../Images/07de4172e6a3e3be7dc66f150f32a772.png)

这是我目前在我的代码流中所做的：

1）我以这种方式在.h文件中声明UITableView对象：

```
@property (weak, nonatomic) IBOutlet UITableView *tablePOI; 
```

2) 由于我使用来自网络请求的数据填充 UITableView，因此我事先不知道 UITableView 框架的高度。在情节提要中，我将 UITableView 框架高度初始化为 260f。

3) 我在 viewDidLoad 函数中获取 Web 数据，然后填充 UITableView 并为其设置一个新的框架和 contentSize。在此之后，我以这种方式为 UIScrollView 组件设置 contentSize：

```
[self.tablePOI setFrame:CGRectMake(0, 100, 320, 800)];
[self.tablePOI setContentSize:CGSizeMake(320, 800)];
[self.scrollView setContentSize:CGSizeMake(320, 800)]; 
```

问题是 UITableView 被剪切到之前在情节提要中初始化的高度（260f），因此 UIScrollView 不会滚动，而只是弹跳。

使用具有动态高度的 UITableView 组件时如何获得滚动？

PS。我还考虑过在不使用情节提要的情况下通过代码生成 UITableView 组件，但是使用这种方法，我必须将 UITableView 声明为保留，然后我必须管理内存分配。我真的不想这样（dealloc 已被弃用）。

# java - 有没有办法通过 Spring 计算财产价值？

> ID：14754719
> 
> 赞同：0
> 
> 时间：2013-02-07T15:24:54.767
> 
> 标签：java, spring, spring-el

我有一颗`dataSource`豆子。我需要从中提取一个布尔值：

```
dataSource.getConnection().getMetaData().supportsStoredProcedures() 
```

然后在我的 DAO 中使用它来定义行为。

获得这个值的明显方法是`dataSource`直接注入我的 DAO 类（目前它只使用 EntityManager）。但我很好奇有没有办法只获得布尔标志值？

我们可以在`@Value`注解中使用spring表达式语言来计算标志吗？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:48:46.307

像这样的东西？

[春季XML]

```
 <util:properties id="myProps" location="classpath:com/acme/app/myprops.properties"/> 
```

[爪哇]

```
 @Value("#{myProps.hostname}")
    public void setHostName(String hostname) {
        this.hostname = hostname;
    } 
```

来源： http: [//forum.springsource.org/showthread.php?69602-Value-and-PropertyPlaceholderConfigurer](http://forum.springsource.org/showthread.php?69602-Value-and-PropertyPlaceholderConfigurer)

# asp.net - asp.net 将数据集插入其他数据库

> ID：14754720
> 
> 赞同：0
> 
> 时间：2013-02-07T15:24:54.937
> 
> 标签：asp.net, dataset

我想将数据集中的数据集放到另一个数据表中的同一个数据库中

这是我的代码

```
Dim Conn As SqlConnection = New SqlConnection("server=localhost;database=MSDSS;Integrated Security=True")
    Dim urltext = "Select JournalName, IndexDB, Lang, Category From SJournal where JournalName is not null" + " And IndexDB='" & indexdb & "' And Lang='" & lang & "' And [Impact Factor] Between " & ImpactFactorBegin & " And " & ImpactFactorEnd
    Dim Ad As SqlDataAdapter = New SqlDataAdapter(urltext, Conn)
    Dim D As DataSet = New DataSet()

    Ad.Fill(D, "SJ")
    D.Tables(0).Columns.Add(New DataColumn("STV"))
    Dim journallist() As String = journalname.Split("()")
    For i As Integer = 0 To D.Tables(0).Rows.Count - 1 Step 1
        D.Tables(0).Rows(i)("STV") = GetSimilarityWith(D.Tables(0).Rows(i).Item(0).ToString, journalname)

    Next i 
```

我怎样才能把这些数据放到其他数据库？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:27:47.930

```
Dim Conn As SqlConnection = New SqlConnection("server=localhost;database=MSDSS;Integrated Security=True")
Dim Conn2 As SqlConnection = New SqlConnection("server=OTHER DB;database=MSDSS;Integrated Security=True")
Dim urltext = "Select JournalName, IndexDB, Lang, Category From SJournal where JournalName is not null" + " And IndexDB='" & indexdb & "' And Lang='" & lang & "' And [Impact Factor] Between " & ImpactFactorBegin & " And " & ImpactFactorEnd
Dim Ad As SqlDataAdapter = New SqlDataAdapter(urltext, Conn)
Dim Ad2 As SqlDataAdapter = New SqlDataAdapter(urltext, Conn2)
Dim D As DataSet = New DataSet()

Ad.Fill(D, "SJ")
D.Tables(0).Columns.Add(New DataColumn("STV"))
Dim journallist() As String = journalname.Split("()")
For i As Integer = 0 To D.Tables(0).Rows.Count - 1 Step 1
    D.Tables(0).Rows(i)("STV") = GetSimilarityWith(D.Tables(0).Rows(i).Item(0).ToString, journalname)
Next i

Ad2.Fill(D, "SJ") 
```

# c# - 使用 C# 连接到平衡器后面的特定服务器

> ID：14754722
> 
> 赞同：0
> 
> 时间：2013-02-07T15:25:03.987
> 
> 标签：c#, httprequest

我有一个平衡器，后面有 6 个服务器。当我使`HttpWebRequest`这些服务器中的任何一个都可以解决。我需要的是通过调用相同的 URL 来测试每台服务器的响应时间，但指定要响应的服务器（我需要尝试每台服务器，进行相同的调用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:32:02.280

> 我需要尝试每个服务器，进行相同的调用

这完全取决于负载均衡器的配置方式。如果您发出六个请求，很可能每个请求都由同一台服务器处理。

直接调用每个服务器，或查看负载平衡器的文档，了解如何向该平衡器后面的特定服务器发出请求，例如使用某个请求标头。

# java - 如何为 JInternalFrame 设置标准的图标化位置？

> ID：14754724
> 
> 赞同：0
> 
> 时间：2013-02-07T15:25:09.983
> 
> 标签：java, swing, location

我有一个扩展 JDesktopPane 的类，其中我有一个 JInternalFrame，我可以对其进行图标化，我真的很喜欢这个，但是当我对其进行图标化时，它会转到屏幕的左侧底部。我想将其更改为屏幕的右侧顶部。有人对如何设置该位置有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:51:01.153

您正在使用[DefaultDesktopManager](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultDesktopManager.html)来管理您的`JDesktopPane`.

该类`DefaultDesktopManager`实现了[DesktopManager](http://docs.oracle.com/javase/6/docs/api/javax/swing/DesktopManager.html)接口。

查看 的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/DefaultDesktopManager.java#DefaultDesktopManager.getBoundsForIconOf%28javax.swing.JInternalFrame%29)，`DefaultDesktopManager`该`getBoundsForIconOf`方法受到保护。您也许可以扩展`DefaultDesktopManager`以获得所需的图标行为。否则，您必须编写自己的`DesktopManager`接口实现。

# linux - 没有可用的符号表信息

> ID：14754725
> 
> 赞同：4
> 
> 时间：2013-02-07T15:25:11.590
> 
> 标签：linux, gdb

我正在测试来自第三方的库并且它崩溃了。当我想查看崩溃的原因时，我的 gdb 告诉我没有可用的调试符号

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xb53ffb70 (LWP 3722)]
0x00172a89 in tsip_transac_send () from /usr/local/lib/libtinySIP.so.0 
```

我在 gdb 控制台上发布了*bt full*，我得到了一系列如下所示的行

```
#0  0x00172a89 in tsip_transac_send () from /usr/local/lib/libtinySIP.so.0
No symbol table info available 
```

在检查 Makefile 中的 CFLAGS 后，我重新编译了库。这些值一直都很好，但我还是重新编译了它

```
CFLAGS = -g -O2 
```

我以同样的运气再次运行测试，共享库没有调试符号。

我在这里想念什么？

我使用的是 Centos 6.0，之前我在 Opensuse 中安装了该库，但我没有遇到这个问题。它可能与我的 Centos 安装有关。

万一有人关心，我正在测试 Doubango 的 webrtc2sip 库。

编辑：调试符号正在正确加载

```
(gdb) info sharedlibrary
From        To          Syms Read   Shared Object Library
0x002fb830  0x0031339f  Yes (*)     /lib/ld-linux.so.2
0x00115040  0x00120028  Yes         /usr/local/lib/libtinySAK.so.0
0x00133f30  0x0018b378  Yes         /usr/local/lib/libtinySIP.so.0
0x001d8ac0  0x00201b98  Yes         /usr/local/lib/libtinyNET.so.0
0x00215dd0  0x0023f638  Yes         /usr/local/lib/libtinyDAV.so.0
0x0024eec0  0x00261728  Yes         /usr/local/lib/libtinyMEDIA.so.0
0x0026bb00  0x002774d8  Yes         /usr/local/lib/libtinyHTTP.so.0
0x002ae340  0x002b0358  Yes         /usr/local/lib/libtinyXCAP.so.0
0x002b3990  0x002b8d18  Yes         /usr/local/lib/libtinySMS.so.0
0x002be630  0x002c9388  Yes         /usr/local/lib/libtinyMSRP.so.0
0x002de240  0x002e8e18  Yes         /usr/local/lib/libtinySDP.so.0
0x00323060  0x00345778  Yes         /usr/local/lib/libtinyRTP.so.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:56:22.200

好吧，看起来这是gdb中的一个错误。

Centos 6在其存储库中预编译了*7.2-56.el6*版本。我更新（通过编译源代码）到最新版本的 gdb，现在它可以工作了。

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:31:08.307

检查`file /usr/local/lib/libtinySIP.so.0`。如果它说*stripped*，请检查您的 lib 的构建过程。`strip`它可以手动调用以去除调试符号。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-07T15:29:21.387

看来您有冲突的编译标志。我不是专家，但看起来您的`-g`标志（用于生成调试符号）与`-O2`标志（这是一个优化参数）混合在一起。

尝试使用just`-g`并发布结果。

# java - DragSource - 启动 DragAction 时出现 InvalidDnDOperationException

> ID：14754728
> 
> 赞同：2
> 
> 时间：2013-02-07T15:25:27.677
> 
> 标签：java, swing, drag-and-drop

我的应用程序包含一些由 DnD 移动的 JPanel。我已经实现了所有的侦听器和处理程序，一切似乎都是正确的。当用鼠标拖动一个面板时，我的 DragGestureListener 识别出这一点并想要开始一个新的 DragAction：

```
 @Override
    public void dragGestureRecognized(DragGestureEvent dge) {

        // When the drag begins, we need to grab a reference to the
        // parent container so we can return it if the drop
        // is rejected
        Container parent = getPanel().getParent();

        setParent(parent);

        // Remove the panel from the parent.  If we don't do this, it
        // can cause serialization issues.  We could over come this
        // by allowing the drop target to remove the component, but that's
        // an argument for another day
        parent.remove(getPanel());

        // Update the display
        parent.invalidate();
        parent.repaint();

        // Create our transferable wrapper
        TicketTransferable transferable = new TicketTransferable(getPanel());

        // Start the "drag" process...

        dge.startDrag(null, transferable);

    } 
```

但随后发生以下异常：

```
exception in thread "AWT-EventQueue-0" java.awt.dnd.InvalidDnDOperationException: 
     Cannot find top-level for the drag source component
at sun.awt.X11.XDragSourceContextPeer.startDrag(XDragSourceContextPeer.java:126)
at sun.awt.dnd.SunDragSourceContextPeer.startDrag(SunDragSourceContextPeer.java:134) 
```

我检查了 XDragSourceContextPeer 并发现触发 DragAction 的组件（在我的情况下是 JPanel 自行移动）必须是“Window”类型才能正确启动拖动。关键是我的 JPanel 不是一个窗口，并且提到的异常被抛出。

我究竟做错了什么？

PS：所有“可移动”面板都位于 JTable 的不同单元格中。

# security - 我应该在 cookie 上设置域吗？如果是，为什么？

> ID：14754735
> 
> 赞同：0
> 
> 时间：2013-02-07T15:25:41.020
> 
> 标签：security, cookies, setcookie

我应该在 cookie 上设置域吗？如果是，为什么？-

cookie 用于购物篮，平台为 .NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:30:53.987

不，你不需要。如果cookie头域没有域属性，则有效域为请求的域。

您需要在特定场景中设置域，如果您想让您的`www.website.com`cookie 可用，`api.website.com`您需要将域设置为`.website.com`.

此外，无法通过设置其域来使`www.website.com`cookie 在不同的域中可用（安全问题）。

# php - 引用不存在的子模式

> ID：14754739
> 
> 赞同：3
> 
> 时间：2013-02-07T15:25:54.403
> 
> 标签：php, regex, pcre

我在使用正则表达式从伪 xml 标记中提取属性方面取得了一些进展，但后来我变得雄心勃勃，想要正确处理带引号的属性（引号是可选的）：

**正则表达式**

```
~\{language\s*=\s*(P?<quote>[\"\']*)(?P<att>.*?)(?P=quote)\s*/\}~ 
```

（这是在 preg_match 中用作 arg 的 var 的输出，因此“明智的东西”，例如 \" 是`chr(92) . chr(34)`预先创建的......）

**输入**

```
kjkjkjkjkjkj{language= 'DE' /}xxxxlxlxlxlllllk 
```

extracts `'DE`' 在使用 RegexBuddy 进行测试时。但是 PHP 的 preg_match 发出警告：警告：preg_match()：编译失败：引用偏移 56 处不存在的子模式。

有什么问题？我以为“报价”是之前分配的...

这是**完整的程序**，以防万一我在某处遇到 PHP 错误：

```
<?php

$QQ=chr(92) . chr(34);
$delimeters = "{}";
$del0 = preg_quote($delimeters{0});
$del1 = preg_quote($delimeters{1});
$tag="language";

$string="fdfdfdfdf{language=1}testhgg";

$preg1 = "|" . $del0 . $tag . "[^" . $del1 . "]*" . $del1 . "(.*?)" . $del0 . "/" . $tag . $del1 . "|";
$preg2 = "~" . $del0 . $tag . "\s*=\s*(?P<" . "quote>[" . $QQ . "\']*)(?P<att>.*?)(?P=quote)\s*/" . $del1 . "~";

$match=array();
preg_match($preg1,$string,$match);
echo "<br>match1:<pre>";var_dump($match);echo"</pre>";

$match=array();
preg_match($preg2,$string,$match);
echo "<br>match2:<pre>";var_dump($match);echo"</pre>";

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:28:03.033

您的命名子模式格式不正确。

```
(P?<quote>[\"\']*) 
```

应该

```
(?P<quote>[\"\']*) 
```

见[http://php.net/manual/en/regexp.reference.subpatterns.php](http://php.net/manual/en/regexp.reference.subpatterns.php)

# ruby-on-rails - 如何从 Rails 模型中显示此实例方法？

> ID：14754744
> 
> 赞同：2
> 
> 时间：2013-02-07T15:26:01.283
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, rails-models

我有两个导轨型号，用法和价格。到目前为止，它们看起来像这样：

```
class Usage < ActiveRecord::Base
    has_one :price

    def spend
        usage.amount * price.amount
    end
end 
```

和

```
class Price < ActiveRecord::Base
    belongs_to :usage
end 
```

我试图通过在控制台中执行此操作来调用“spend”：

```
Usage.create(amount:100)
Price.create(amount:0.1)

usage=Usage.find(1)
puts usage.price 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:29:31.343

您需要通过使用模型创建价格以使关联起作用。

```
usage = Usage.create(amount:100)
usage.create_price(amount:0.1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T13:32:43.863

由于价格属于使用量，所以您应该先创建使用量对象，然后使用它可以创建价格对象。

**用法 = Usage.create(数量:100)**

**价格 = usage.price.create(amount:0.1)**

然后您将获得与使用模型相关的价格。

然后在使用模型中你可以写，

```
class Usage < ActiveRecord::Base

  has_one :price

  def spend
    self.amount * (self.price.amount)
  end

end 
```

您可以像上面那样调用关联，`self.price.amount`其中“self”是 Usage 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:33:45.970

问题在于我正在做的两件事。感谢 blamattina 指出，这是在模型中定义新关联对象后创建新关联对象的方式：

```
u = Usage.create(amount:100)
u.create_price(amount:0.1) 
```

此外，在模型本身中，当在模型的实例方法中引用父类时，该类应称为 self：

```
def spend
  self.amount * price.amount
end 
```

最后一点是我出错的地方，并且可以使用 u.spend 轻松调用支出！

# c# - 静态方法中的 C# 表单修改

> ID：14754746
> 
> 赞同：0
> 
> 时间：2013-02-07T15:26:02.560
> 
> 标签：c#, winforms, static, textbox, instance

我的 C# 程序遇到了一些问题。我想创建秒表（从某个值开始倒计时），即在按下某个键时启动。为了处理键，我使用低级键盘钩子。但是这个类有静态方法，所以如果我想从不同的类调用一个方法，那不是静态的，我必须创建一个新实例。随着倒计时，我想每滴答（秒）更改元素的`Text`属性。问题是，当我必须在静态方法中创建一个新的类实例时`TextBox`，如何更改`TextBox`每个刻度（在类中）的属性，因此将不再响应以前的. 我的代码工作得很好，按键被识别，计时器正在倒计时并分别显示秒值`Countdown``Countdown``TextBox``TextBox``MessageBox`'es（用于调试），但不会更改表单中的文本。

如果它可以帮助您理解我上面写的内容，我可以给您我的代码。就在评论里这么说吧。

提前感谢您的帮助。

编码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Drawing;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace stopwatch2
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        InterceptKeys.InterceptInit();
    }

    private void Form1_Closing(object sender, CancelEventArgs e)
    {
        InterceptKeys.Unhook();
    }

    public void changeText(string text)
    {

        MessageBox.Show(text); //for debug
        textBox1.Text = text;
    }

    class InterceptKeys
    {

        private const int WH_KEYBOARD_LL = 13;
        private const int WM_KEYDOWN = 0x0100;
        private static LowLevelKeyboardProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;

        public static void InterceptInit()
        {
            _hookID = SetHook(_proc);
        }

        public static void Unhook()
        {
            UnhookWindowsHookEx(_hookID);
        }

        private static IntPtr SetHook(LowLevelKeyboardProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_KEYBOARD_LL, proc,
                    GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private delegate IntPtr LowLevelKeyboardProc(
            int nCode, IntPtr wParam, IntPtr lParam);

        public static IntPtr HookCallback(
            int nCode, IntPtr wParam, IntPtr lParam)
        {

            if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
            {
                int vkCode = Marshal.ReadInt32(lParam);

                Countdown timer = new Countdown(); //creating new instance

                if ((Keys)vkCode == Keys.Home)
                {

                    timer.StartTimer();

                }

                if ((Keys)vkCode == Keys.End)
                {

                    timer.StopTimer();

                }

            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);

    }

   public partial class Countdown : Form1
    {

        public System.Windows.Forms.Timer timer1;
        public int counter = 60;

        public void StartTimer()
        {

            timer1 = new System.Windows.Forms.Timer();
            timer1.Tick += new EventHandler(timer1_Tick);
            timer1.Interval = 1000; // 1 second
            timer1.Start();
            changeText(counter.ToString());

        }

        public void timer1_Tick(object sender, EventArgs e)
        {

            counter--;
            if (counter == 0)
                counter = 60;

            changeText(counter.ToString());

        }

        public void StopTimer()
        {
            timer1.Stop();
        }

     }

  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:32:14.660

所以，首先，你不想`Countdown`扩展`Form1`. 这给您一种错误印象，即您可以访问 的成员`Form1`，但您不能。每次使用它自己的文本框创建一个新实例时，您都在创建一个全新的表单`Countdown`，并且它是自己的……一切。

更糟糕的是，`Countdown`每次触发钩子处理程序时都会创建一个新事件，因此您不会在`Countdown`之前启动的同一实例上停止计时器。

`InterceptKeys`也不应该是 的内部类`Form1`，它应该是它自己文件中的独立类。

老实说，我什至认为这个`Countdown`类不应该存在。它的方法应该属于另外两个类之一。

让我们先来看一下`InterceptKeys`。您可以看到 90% 的课程只是在创建挂钩并确定它是否是您“关心”的事件。然后，当我们关心的事情发生时，我们只有一点点代码（那 10%）来做任何需要发生的事情。

有一种方法可以更有效地解决“关注点分离”问题。该类`InterceptKeys`只需要处理设置键盘钩子并过滤掉我们不关心的那些的样板代码。我们想把最后 10% 的代码移出这个类。事件是一个很好的方式来做到这一点。从逻辑上讲，这里发生了两个“事件”，一个是按下 home 键时，另一个是按下 end 键时。因此，我们将从在内部创建这两个事件开始`InterceptKeys`：

```
public static event Action HomePressed;
public static event Action EndPressed; 
```

现在我们可以只触发这两个事件，而不是在适当的位置调用另一个类的方法。只需更换：

```
Countdown timer = new Countdown(); //creating new instance
if ((Keys)vkCode == Keys.Home)
{
    timer.StartTimer();
}
if ((Keys)vkCode == Keys.End)
{
    timer.StopTimer();
} 
```

和：

```
if ((Keys)vkCode == Keys.Home)
{
    if(HomePressed != null) HomePressed();
}
if ((Keys)vkCode == Keys.End)
{
    if(EndPressed != null) EndPressed();
} 
```

那么，现在`InterceptKeys`有两个事件，现在呢？现在我们去`InterceptKeys`初始化`Form1`并处理事件。在我们这样做之前，我们首先要抓住曾经在里面的所有东西，`Countdown`然后把它放进去`Form1`，只需移动整个东西。使用所有这些方法，我们可以做到这一点：

```
private void Form1_Load(object sender, EventArgs e)
{
    InterceptKeys.InterceptInit();
    InterceptKeys.HomePressed += ()=> StartTimer();
    InterceptKeys.EndPressed += ()=> StopTimer();
} 
```

现在，只要按下这两个键中的一个，就会在此表单的现有方法上调用相应的方法。最重要的是，我们现在已经将所有操纵表单显示的代码移到了该表单的定义中，同时确保所有讨厌的键盘钩子都在它自己的小世界中关闭。“分离关注”，一切都在它自己的适当位置。

附带说明一下，您应该真正创建私有字段，`timer1`而`counter`不是公共字段。你没有公开使用它们，这很好，但你不想在未来这样做。您可以根据需要创建对这些字段提供有限访问的方法（这是您当前正在做的事情）。

只剩下一件事了。每次`Home`按下您都不想启动新计时器的机会。旧计时器仍然存在，因此您将拥有两个、三个或更多计时器。更有可能的是您只想重新启动现有的计时器。这很容易做到。

在`StartTimer`你不能创建一个新的计时器，而是操纵现有的计时器。从它的身体中移除所有东西，除了：

```
timer1.Start();
changeText(counter.ToString()); 
```

然后只需`Timer`在首次加载表单时创建和配置：

```
private void Form1_Load(object sender, EventArgs e)
{
    timer1 = new System.Windows.Forms.Timer();
    timer1.Tick += new EventHandler(timer1_Tick);
    timer1.Interval = 1000; // 1 second

    InterceptKeys.InterceptInit();
    InterceptKeys.HomePressed += ()=> StartTimer();
    InterceptKeys.EndPressed += ()=> StopTimer();
} 
```

# ruby-on-rails - Rails中蜻蜓宝石图像的重复记录

> ID：14754747
> 
> 赞同：2
> 
> 时间：2013-02-07T15:26:10.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dragonfly-gem

如何复制带有蜻蜓图像的 ActiveRecord 对象？

我有以下。

模型：

```
class Event < ActiveRecord::Base

  image_accessor :thumbnail

  attr_accessible :thumbnail, :remove_thumbnail, :retained_thumbnail

  validates :thumbnail, presence: true
end 
```

控制器：

```
def clone
  @event = Event.find(1).dup
  render :new
end 
```

看法：

```
<%= form_for @event do |f| %>
  <%= f.label :thumbnail %>
  <%= image_tag(@event.thumbnail.thumb('100x75').url) %>
  <label><%= f.check_box :remove_thumbnail %> Remove?</label>
  <%= f.file_field :thumbnail %>
  <%= f.hidden_field :retained_thumbnail %>
<% end %> 
```

当我呈现表单时，图像会显示，但在提交时，图像会被清除。

一件事，我想确保它们实际上是不同的图像，所以如果我编辑原始记录，它不会影响副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T21:42:07.270

以下是我如何让它工作，覆盖对象的`dup`行为：

```
def dup
  target = Event.new(self.attributes.reject{|k,v| ["id", "attachment_uid"].include?(k) })
  target.attachment = self.attachment
  target
end 
```

然后，当您调用`save`目标时，图像将被复制到新位置。

请注意，在我第一次尝试的第一行`target = super`，利用对象的默认`dup`行为，但这会导致原始对象的文件被删除。上述解决方案终于为我解决了问题。

# php - 如何使用 PHP 中的 phatomjs 在下载的页面上执行 Javascript？

> ID：14754748
> 
> 赞同：0
> 
> 时间：2013-02-07T15:26:13.200
> 
> 标签：php, javascript, phantomjs

我正在使用“自动浏览”脚本。我的脚本应该能够下载某些页面，然后解析这些页面以找到某些值，从而生成输出。服务器也需要身份验证。

我已经能够使用 PHP 的 CURL lib 获取这些页面，包括身份验证部分，但问题是这些页面的内容是在 javascript 函数中生成的，所以在使用 CURL 函数下载它们后，大部分内容都丢失了，因为JS代码没有被执行。

所以，我需要的是JS执行*后的DOM。*我花了一些时间来找出最好的方法，但我不确定是否找到了。无论如何它还没有为我工作，所以......

我所做的是在我的 Linux 机器上安装 phantomjs，并尝试使用它来执行下载页面中的 JS 代码。因此，我使用 CURL 下载页面并将其保存为“test.html”文件，然后执行“phantomjs test.html”，但我得到的只是：

```
$ phantomjs test.html 
undefined:1 SyntaxError: Parse error 
```

它什么也没做，就像被绞死一样。

test.html 包含脚本标签中的 html 和 JS 代码，你知道，就像其他所有常见的带有 JS 的网页一样。

无论如何，为了确保 test.html 没有问题，我用 wget 下载了 google.com 的 index.html 页面，得到了相同的结果：

```
$ phantomjs index.html 
undefined:1 SyntaxError: Parse error 
```

所以我得出结论，我一定做错了什么......

欢迎任何帮助。:-)

最好的，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:28:35.417

原因`phantomjs index.html`不起作用是因为您传递给 phantomjs 的第一个参数是您希望执行的 phantomjs 脚本，而不是 html 文件。我建议使用 phantomjs 直接打开网页，而不是向其中传递 html 文件。有很多例子说明如何做到这一点，甚至可以看看[http://phantomjs.org/](http://phantomjs.org/)主页上的例子。有关更多高级功能，请参阅[API](https://github.com/ariya/phantomjs/wiki/API-Reference)。如果您有任何更具体的问题，请在此处提问。

# php - 使用 PHP 快速将 SQL 查询中的所有数据放入数组中

> ID：14754752
> 
> 赞同：3
> 
> 时间：2013-02-07T15:26:20.983
> 
> 标签：php, sql-server, arrays

我正在使用类似下面的 PHP 代码将查询中的所有数据放入数组中：

```
<?php

$results = array();

$q = odbc_exec("SELECT * FROM table");

while ($row = odbc_fetch_array($q)) {
    $results[] = $row;
}

?> 
```

这很好用，但是当查询包含数千行时它会很慢。

我的问题是，在 PHP 中有什么方法可以将所有数据转储到一个数组中，而不必逐个循环遍历每条记录？

注意：数据库使用 MS SQL Server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:33:07.007

您可以尝试使用 mssql 函数而不是 odbc，但这不太可能有很大的不同。

根据驱动程序的工作方式，结果集是结果数据本身的迭代器句柄。在某些情况下，直到 php 请求行时，php 才真正获取数据。除非驱动程序中有一个 fetch all 可用，否则循环遍历所有行通常是您唯一的选择。

如果您不需要所有列，则可以通过仅指定您实际需要的列来限制正在传输的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T20:26:52.200

指定`cursor_type`in `odbc_connect`made odbc 获取更快。

```
$conn = odbc_connect($dsn, $user, $pass, SQL_CUR_USE_ODBC) 
```

[http://aaronsaray.com/blog/2007/08/02/odbc-for-udb-and-php-how-i-increased-performance-by-400/](http://aaronsaray.com/blog/2007/08/02/odbc-for-udb-and-php-how-i-increased-performance-by-400/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:11:18.273

我能够使用以下函数找到一种使用 ADOdb（PHP 的数据库抽象库）的`GetAll()`方法：

[http://adodb.sourceforge.net/](http://adodb.sourceforge.net/)

> $results = $DB->GetAll("SELECT * FROM table");

这会将所有行作为二维数组返回。

# mysql - mySql 外键名问题

> ID：14754754
> 
> 赞同：0
> 
> 时间：2013-02-07T15:26:24.903
> 
> 标签：mysql, foreign-keys, primary-key, mysql-workbench

嗨，我在 mysql 工作台中设计了一个数据库。当我去正向工程师时，我得到了（errno：121），因为我在多个表中都有相同的外键，我意识到这是不允许的。我有很多联结表，主要是 n:m 关系。我对这些联结表中的大多数使用复合主键（由 2 个外键组成）。我的问题是我是否必须将这些主键与外键一起重命名为唯一？请欣赏一些帮助。

（我还没有在下面的代码中重命名外键）

```
如果不存在 `mydb`.`tblStudent`，则创建表（
  `StudentID` INT(6) NOT NULL AUTO_INCREMENT ,
  `Student_Firstname` VARCHAR(20) NOT NULL ,
  `Student_Lastname` VARCHAR(20) NOT NULL ,
  `DOB` DATE NOT NULL ,
  `Student_Gender` ENUM('Male','Female') NOT NULL ,
  `Student_Address1` VARCHAR(40) NOT NULL ,
  `Student_Address2` VARCHAR(22) NOT NULL ,
  `Student_Address3` VARCHAR(14) NOT NULL ,
  `Student_Phonenum` INT(10) NULL ,
  `Student_Email` VARCHAR(60) NOT NULL ,
  `Student_Password` CHAR(128) NOT NULL ,
  `Enrollment_Date` DATE NOT NULL ,
  `Graduation_Date` DATE NULL ,
  `Student_Picture` VARCHAR(100) NOT NULL ,
  `PPSN` VARCHAR(9) NOT NULL ,
  主键（`StudentID`））
引擎 = InnoDB

如果不存在 `mydb`.`tblIllness`，则创建表（
  `IllnessID` CHAR(5) NOT NULL ,
  `Illness_Name` VARCHAR(30) NOT NULL ,
  主键（`IllnessID`））
引擎 = InnoDB

如果不存在 `mydb`.`tblStudentIllness`，则创建表（
  `IllnessID` CHAR(5) NOT NULL ,
  `StudentID` INT(6) NOT NULL ,
  `Doctor_Name` VARCHAR(30) NOT NULL ,
  `Doctor_Phonenum` INT(10) NOT NULL ,
  `药物` VARCHAR(40) NOT NULL ,
  `Medical_Advice` VARCHAR(250) NOT NULL ,
  主键 (`IllnessID`, `StudentID`) ,
  INDEX `IllnessID_idx` (`IllnessID` ASC) ,
  索引`StudentID_idx` (`StudentID` ASC) ,
  约束`IllnessID`
    外键（`IllnessID`）
    参考 `mydb`.`tblIllness` (`IllnessID`)
    删除级联
    在更新级联时，
  约束`StudentID`
    外键（`StudentID`）
    参考 `mydb`.`tblStudent` (`StudentID`)
    删除级联
    更新级联）
引擎 = InnoDB
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:29:46.657

[这](http://sqlfiddle.com/#!2/6cdb2)对我来说很好。一种解决方案是仅删除约束名称，它们将自动为您生成。

```
...
CONSTRAINT 
    FOREIGN KEY (`IllnessID` )
    REFERENCES `tblIllness` (`IllnessID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
CONSTRAINT
    FOREIGN KEY (`StudentID` )
    REFERENCES `tblStudent` (`StudentID` )
    ON DELETE CASCADE
... 
```

# android - 夏令时如何处理？我应该担心吗？

> ID：14754759
> 
> 赞同：2
> 
> 时间：2013-02-07T15:26:30.670
> 
> 标签：android

我试图了解当我安排闹钟时会发生什么，使用日历类计算的时间，当夏令时日期被击中？AlarmManager 是否正确处理小时更改？根据我的测试，我没有看到 Calendar 类添加任何夏令时。

**示例：**
今天是 3 月 9 日，我使用以下公式计算第二天 3 月 10 日凌晨 2 点夏令时开始的闹钟时间：

```
Calendar cal = Calendar.getInstance();

// set the time alarm should be triggered
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MINUTE, 30);
cal.set(Calendar.HOUR_OF_DAY, 10);
cal.add(Calendar.DAY_OF_WEEK, 1);

long triggerTimeMs = cal.getTimeInMillis(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:03:48.620

我认为问题实际上取决于您的手机设置。如果您的手机处理夏令时，那么您应该能够直接与手机时间进行比较而不必担心。

例如

夏令时之前：时间 T 的警报 A

夏令时后：将时间 T 与手机上的时间进行比较，该时间会自动更新。

# git - 可以有条件地设置 gitconfig 选项吗？

> ID：14754762
> 
> 赞同：29
> 
> 时间：2013-02-07T15:26:37.120
> 
> 标签：git, git-config

通过 Github，我在几台不同的计算机和服务器上使用同一组“点文件”。在我直接控制的 Mac 和 Linux 机器上，我安装了 Sublime Text 2 并将其设置为我选择的 git 合并和提交编辑器。但是，在远程（即不受我直接控制的）服务器上，我会选择使用 vim。

我宁愿不`.gitconfig`为那些远程服务器创建和维护第二个。有没有办法做这样的事情：

```
[core]
    if [[ $IS_REMOTE -eq 1 ]]; then
        editor = "vim"
    else
        editor = "subl -n -w"
    fi 
```

我在哪里根据主机名设置了 $IS_REMOTE？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T15:41:00.747

不，Git config 不支持检查或条件语句。但是您的底层外壳可能会这样做，因此您可以使用以下内容：

```
[core]
    editor = "if [[ $IS_REMOTE -eq 1 ]]; then ED='vim'; else ED='subl -n -w'; fi; $ED" 
```

如果您需要做一些比这更复杂的事情，您可以将 shell 代码放入脚本中，当然，例如

```
[core]
    editor = "my_edi_script.sh" 
```

包含`my_edit_script.sh`以下内容：

```
#!/bin/bash
if [[ $IS_REMOTE -eq 1 ]]; then
    ED="vim"
else
    ED="subl -n -w"
fi

$ED some argument or other 
```

**编辑**：`my_edit_script.sh`当然必须在 $PATH 中:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-11T03:03:05.457

`[include]`git-config 在[v1.7.9](https://git.kernel.org/cgit/git/git.git/commit/?id=9b25a0b52e09400719366f0a33d0d0da98bbf7b0)中学到的部分可以帮助您了解大部分情况。

虽然它不允许您编写运行时条件，但它*确实*为您提供了一个框架，用于将您的代码重构`~/.gitconfig`为几个部分：*共享*部分和*特定于环境的*部分。之后，您可以将类似的内容符号链接`~/.gitconfig.local`到相关的特定于 env 的配置文件，并包含`~/.gitconfig.local`来自`~/.gitconfig`.

符号链接部分可以作为 dotfiles 的 init 脚本的一部分编写并自动完成。

从命令行，可以通过以下方式添加包含路径：

```
git config --global include.path '~/.gitconfig.local' 
```

我专门使用上面的引号来防止 shell 扩展`~`到绝对路径。

这会将以下部分添加到您的`~/.gitconfig`:

```
[include]
    path = ~/.gitconfig.local 
```

[这是git-scm 书中](http://git-scm.com/docs/git-config#_includes)的一个片段，显示了一般格式：

```
[include]
    path = /path/to/foo.inc ; include by absolute path
    path = foo ; expand "foo" relative to the current file
    path = ~/foo ; expand "foo" in your $HOME directory 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-12-04T20:34:12.740

您可以根据 Git 2.13 及更高版本中的 Git 目录或分支有条件地包含另一个 Git 配置文件。

`~/.gitconfig`像往常一样将您的默认配置放入文件中。最后，有条件地包含另一个配置文件：

```
[user]
    email = john@personal.com
    name = John McGehee

# All work Git repositories are in a subdirectory of ~/work.
# All other Git repositories are outside ~/work.
[includeIf "gitdir:~/work/"]
    path = .gitconfig.work 
```

然后，在`~/.gitconfig.work`使用位于`~/work`或其任何子目录中的存储库时添加或覆盖您想要的配置值：

```
[user]
    email = john@work.com 
```

您可以通过切换到 下的 Git 目录来观察差异`~/work`，然后运行：

```
git config user.email 
```

在 .git 目录下的 Git 目录中尝试相同的命令`~/work`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T15:38:33.647

我不认为你可以做到这一点，但不是维护你的`.gitconfig`文件，而是维护一个生成`.gitconfig`文件的脚本怎么样？这样你就可以做任何你想做的事，不仅基于变量，还基于命令的输出等等......

像：

```
#!/bin/sh
if [ "$#" -eq 0 ]
then
    IS_REMOTE=
else
    case "$1" in
        remote)
            IS_REMOTE=1
            ;;
        local)
            IS_REMOTE=
            ;;
        *)
            echo "value $1 not supported" >&2
            ;;
    esac
fi

# config for both remote and local
git config --global color.ui true
git config --global alias.top '!pwd -L'

# config for remote
if [ "$IS_REMOTE" ]
then
    git config --global core.editor vim
    ...
else
    git config --global core.editor 'subl -n -w'
    ...
fi 
```

所以，如果你不带参数调用脚本，或者使用'local'参数，它会为你的`.gitconfig`文件生成一些配置，而如果你将'remote'参数传递给它，它会生成一些其他配置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T04:43:49.380

由于无法测试环境变量并以编程方式更改 .gitconfig，而且编写创建两个 .gitconfig 文件的脚本感觉比我真正想提出的工作要多，因此我将创建两个 .gitconfig文件。在那些我可以将 Sublime Text 2 设置为我的编辑器并控制合并工具和差异工具的机器上，我将使用“主要”gitconfig 作为我的符号链接的目标。在那些我没有 ST2 作为选项的机器上，我将使用“辅助”gitconfig 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-22T13:41:53.363

不完全是您问题的答案，但对相关用例很有趣：从 git [1.8.5](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.5.txt)开始，您可以使用 urlmatch 语法

有关详细信息，请参阅 [http://git-scm.com/docs/git-config](http://git-scm.com/docs/git-config)

有关遥控器的配置条目是唯一可以有条件地定义的条目，例如 `[http "https://localhost" ] sslVerify = false`

^ 将只为本地主机“远程”切换 ssl 验证

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-14T13:16:28.130

从 Git v2.31 开始，您还可以在您的`.bashrc`或其他任何内容中设置环境变量，例如在 WSL2 上，我使用以下内容将 git 配置为使用来自 Windows 的缓存 git https 凭据：

```
export GIT_CONFIG_COUNT=2 \
GIT_CONFIG_KEY_0="credential.helper" GIT_CONFIG_VALUE_0="/mnt/c/Program\ Files/Git/mingw64/libexec/git-core/git-credential-manager-core.exe" \
GIT_CONFIG_KEY_1="credential.https://dev.azure.com.usehttppath" GIT_CONFIG_VALUE_1="true" 
```

感谢 VonC 指出这一点[https://stackoverflow.com/a/65963666/9189668](https://stackoverflow.com/a/65963666/9189668)

# javascript - JQuery AJAX PUT，不工作

> ID：14754764
> 
> 赞同：0
> 
> 时间：2013-02-07T15:26:45.740
> 
> 标签：javascript, ruby, ajax, ruby-on-rails-3

我正在发送如下 JQuery AJAX 调用，以更新 ActiveRecord DB 中的记录：

```
var url_out = '/users/' + args.item.id;
$.ajax({
  url: url_out,
  type: 'POST',
  method: 'PUT',
  data: args.item,
  success: function(dat) {
    alert("did it");
  } 
```

在用户控制器中，我有这个：

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user]) 
```

所以我需要将 args.item 中的数据作为 params[:user] 传递。可以使用 AJAX 调用传递命名参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:31:34.250

我可能错了，但我知道 Rails 实际上是通过添加一个值为“PUT”的隐藏参数 _method 来模拟 http 动词，而实际请求是一个 POST（由于某些浏览器不支持所有动词”）

所以，你可以尝试做一个帖子并添加一个参数_method：“PUT”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:08:15.703

我要感谢@Dom 和@Eduard 的帮助。事实证明我需要做这样的事情：

```
x_out = {};
x_out["first_name"] = args.item.first_name;
x_send = {};
x_send["user"] = x_out; 
```

这让我可以将命名参数传递给控制器​​中的更新方法。

# ssis - 如何重试直到给定日期与 For 循环容器中的当前日期匹配？

> ID：14754765
> 
> 赞同：0
> 
> 时间：2013-02-07T15:26:49.093
> 
> 标签：ssis

### 设想：

我有一个包含日期列的查找表，我需要查看此日期列并检查它是否是今天的日期，如果不是，则等待 5 分钟并再次检查相同的内容，如果日期是当前日期，请发送电子邮件并退出循环，如果日期不是当前日期，则在 6 次重试后执行 SQL 任务。

我有一个具有以下设置的 ForLoop 容器：

```
InitExpression : @[User::Counter] = 0
EvalExpression : @[User::Counter] < 6
AssignExpression : @[User::Counter] = @[User::Counter] + 1 
```

如何/在哪里查看日期：

```
SELECT ControlTimeStamp from LOOKUPTABLE
 WHERE ControlTimeStamp = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

### 笔记：

我正在使用 Business Intelligence Development Studio (BIDS) 2008 进行 SSIS 包开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:47:51.933

我想你会想要这样的方法。执行您的 SQL 任务以确定今天是否是您的日期。从那里你需要睡 N 分钟，或者你想发送一封电子邮件。诀窍是在 Execute SQL Task 子项之间使用`Expression`一个`Precedence Constraint`。

我的实现与您的略有不同，但概念保持不变。我创建了两个变量，@ActualDate 和@ReferenceDate。@ActualDate 是今天，@ReferenceDate 是从执行 SQL 任务中设置的。然后我看看它们是否相等。对于你所拥有的，如果你得到一个结果，那么你知道发送邮件的条件已经满足，所以改变你的表达式来满足它。

![在此处输入图像描述](../Images/fc9310e929524444770d7d7de76aeb77.png)

没有显示的是如何尽早终止循环，因为我不太确定如何做到这一点。

# plugins - Jomsocial 额外字段

> ID：14754773
> 
> 赞同：1
> 
> 时间：2013-02-07T15:27:06.100
> 
> 标签：plugins, joomla, jomsocial

我正在尝试在 Jomsocial 组创建新组页面上创建额外的字段，它在 Jomsocial 文档中建议最好的方法是创建一个插件来执行此操作。

由于我从未创建过如此复杂的插件，是否有人可以从一个工作示例开始？

这是我尝试过的代码

```
 <?php
defined('_JEXEC') or die('Restricted access');
if (! class_exists ( 'plgSpbgrouppostcode' )) {
class plgSpbgrouppostcode extends JPlugin {
/**
* Method construct
*/
function plgSystemExample($subject, $config) {
parent::__construct($subject, $config);
// JPlugin::loadLanguage ( 'plg_system_example', JPATH_ADMINISTRATOR ); // only use if theres any language file
include_once( JPATH_ROOT .'/components/com_community/libraries/core.php' ); // loading the core library now
}

function onFormDisplay( $form_name )
{
/*
Add additional form elements at the bottom privacy page
*/
$elements = array();
if( $form_name == 'jsform-groups-forms' )
{
$obj = new CFormElement();
$obj->label = 'Labe1 1';
$obj->position = 'after';
$obj->html = '<input name="custom1" type="text">';
$elements[] = $obj;

$obj = new CFormElement();
$obj->label = 'Labe1 2';
$obj->position = 'after';
$obj->html = '<input name="custom2" type="text">';
$elements[] = $obj;

}

return $elements; 
```

# c# - Selenium FirefoxDriver 错误 MOZ_CRASHREPORTER_DISABLE 已添加到字典中

> ID：14754778
> 
> 赞同：1
> 
> 时间：2013-02-07T15:27:32.253
> 
> 标签：c#, firefox, windows-7, selenium, webdriver

更新 Firefox、Selenium IDE 并重新启动后，在此 C# Selenium 测试代码中开始出现此错误：

这个 C# 行：

```
WebDriver = new FirefoxDriver(); 
```

使用此错误消息关闭错误：

*   **项目已添加。在字典中键入：MOZ_CRASHREPORTER_DISABLE 正在添加的键：MOZ_CRASHREPORTER_DISABLE**

使用的软件：

*   Selenium WebDriver version 2.28 Runtime Version v4.0.30319 Visual Studio
*   Visual Studio 2012，Microsoft.NET 框架 4.5
*   Windows 7的
*   带有 Selenium IDE 1.10 和 Firebug 1.11.1 的 Firefox 17.0.2

对于解决方法，已完成以下操作：

1.  删除了 Windows 7 环境变量：MOZ_CRASHREPORTER_DISABLE 1
2.  重新启动计算机
3.  重新运行 C# Selenium 测试，一切正常。

我不确定这对 Firefox 有何影响，但现在一切正常（Firefox 正常，C# Selenium 测试正常）。

还有其他选择吗？这是 Selenium Webdriver 的问题吗？火狐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:37:11.133

这是 WebDriver .NET 绑定中的一个错误。在构建时，FirefoxDriver 会尝试将所需的环境变量添加到 Firefox 进程的环境中，而不管它们是否已经存在。这已在当前源中修复，并且应该在 .NET 绑定的下一个二进制版本中可用。不，该版本没有固定的时间表，我也无法推测。

# cordova - 显示启动画面，直到 PhoneGap 加载主页

> ID：14754790
> 
> 赞同：2
> 
> 时间：2013-02-07T15:27:56.043
> 
> 标签：cordova, splash-screen

我创建了一个 phonegap 应用程序。加载主主页（即 index.html）需要 4 秒。

有什么方法可以在 phonegap 加载 index.html 之前显示一些图像/启动画面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:33:22.607

将启动画面设置为超出您预期的时间，可能是 10 秒。

然后在页面准备好后使用以下代码将其关闭：

```
function onDeviceReady() {
    navigator.splashscreen.hide();
}

document.addEventListener("deviceready", onDeviceReady, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:37:27.357

这很简单。如果您将 splash.png 图像文件放入 res/drawable-ldpi、res/drawable-mdpi、res/drawable-hdpi、res/drawable-xhdpi 文件夹中。然后在扩展 DroidGap 的主 java 类中添加以下行：

```
super.setIntegerProperty("splashscreen", R.drawable.splash); 
```

然后修改 loadUrl 方法暂停 5 秒：

```
super.loadUrl("file:///android_asset/www/index.html", 5000); 
```

快乐编码。

# javascript - 谷歌地图保存绘制的折线坐标

> ID：14754796
> 
> 赞同：0
> 
> 时间：2013-02-07T15:28:13.117
> 
> 标签：javascript, ajax, google-maps-api-3

我想保存我在谷歌地图上绘制的坐标。

这是我的地图地址，我可以画线和距离。 [关联](http://nn-gis.com/map/draw/index.htm)

请给我一个提示，我怎样才能在任何文本框中保存这一行的坐标..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:44:10.240

您已经在变量中有标记，只需像这样循环它们：

```
var tempPosition, string="";
for (var i = vmarkers.length - 1; i >= 0; i--) {
    tempPosition = vmarkers[i].getPosition();
    if(tempPosition) {
        string += "[" + tempPosition.lat() + "," + tempPosition.lng() + "]";
    }
} 
```

# mysql - ZF2 Mysql回滚提交功能

> ID：14754799
> 
> 赞同：1
> 
> 时间：2013-02-07T15:28:17.243
> 
> 标签：mysql, insert, zend-framework2, rollback, multiple-results

我想知道 Zend Framework 2 中是否有诸如 mysql rollback commit 之类的功能？

我需要在来自一个表单提交的同一个表格中插入多行。

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:52:45.500

在 ZF2 中，beginTransaction()、commit() 和 rollback() 方法位于 ConnectionInterface 中。

据我所知，您可能必须编写如下代码：

```
$dbAdapter->getDriver()->getConnection()->beginTransaction();
. . . 
$dbAdapter->getDriver()->getConnection()->commit(); 
```

请参阅：http: [//framework.zend.com/apidoc/2.1/classes/Zend.Db.Adapter.Driver.ConnectionInterface.html](http://framework.zend.com/apidoc/2.1/classes/Zend.Db.Adapter.Driver.ConnectionInterface.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T10:00:43.820

这不能用于更新同一事务中的两个表。

# arduino - Arduino中的串行溢出

> ID：14754800
> 
> 赞同：4
> 
> 时间：2013-02-07T15:28:17.557
> 
> 标签：arduino

使用 Arduino 程序读取 SMS 时，串行监视器仅显示发件人（无日期或时间）并截断消息。这可能是由于串行溢出，这是 Arduino 中的一个常见问题。

**代码：**

```
#include <SoftwareSerial.h>
#include <String.h>

SoftwareSerial mySerial(7, 8);
void setup()
{
  mySerial.begin(9600);               
  Serial.begin(9600);    

}

void loop()
{
 mySerial.print("AT+CMGR=1\r");
 delay(100);
 while(mySerial.available())
   Serial.write(mySerial.read());
   delay(1000);
} 
```

**输出**

```
AT+CMGR=1

+CMGR: "REC READ","+XXXXX","A Silky Soni","1AT+CMGR=1

+CMGR: "REC READ","+XXXXX","A Silky Soni","1AT+CMGR=1

+CMGR: "REC READ","+XXXXX","A Silky Soni","1AT+CMGR=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:53:38.277

您可能需要调整代码中的波特率以匹配 GSM 屏蔽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T20:08:39.933

这不是波特率，因为字符串是清晰的，所以所有位都在正确的位置，但是字符串被截断。

发生这种情况是因为 GSM 屏蔽填充输出缓冲区所需的时间比指令`mySerial`耗尽的时间要长。`mySerial.read()`就是这样：当`mySerial.available()`被检查并且GSM屏蔽没有时间将任何东西放入输出缓冲区中时，结果是`while`循环失败。有一些方法可以解决这个问题：

**将`delay()`特定时间放入`while`：**

```
void loop()
{
         mySerial.print("AT+CMGR=1\r");
         delay(100);
         while(mySerial.available()){
           Serial.write(mySerial.read());
           delay(100);  //fix the time according to how fast the GSM shield
                        //wrote the data in the serial port. 
         }
         delay(1000);
} 
```

**或使用超时：**

```
unsigned long init_time, timeout=500;//choose the correct timeout value  
void loop()
{
 mySerial.print("AT+CMGR=1\r");
 //delay(100); //this delay can be omitted
 init_time=millis();
 do{
   while(mySerial.available()){
     Serial.write(mySerial.read());
     init_time=millis();
   }  
 }while(millis()-init_time < timeout);
 delay(1000);
} 
```

`millis()-init_time`给出自上次`mySerial.available()`返回 true 或检查是否不可用之前经过的时间。**在达到超时限制之前，代码仍将检查可用性。**

我建议最后一种方法。快乐编码！

# asp.net-mvc - ASP.NET MVC 应用程序有哪些好的静态代码分析规则？(N依赖)

> ID：14754802
> 
> 赞同：2
> 
> 时间：2013-02-07T15:28:29.550
> 
> 标签：asp.net-mvc, static-analysis, ndepend

我最近看到了[这个](https://stackoverflow.com/questions/8984085/httpcontext-current-user-isinrole-not-working/8984119#8984119)帖子，其中[Darin Dimitrov](https://stackoverflow.com/users/29407/darin-dimitrov)建议您永远不要在 ASP.NET MVC 应用程序中引用 HttpContext.Current。

我们有[NDepend](http://www.ndepend.com)，一种用于进行静态代码分析的工具，您认为还有哪些其他规则可以很好地使用 NDepend 之类的东西进行建模？

非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:28:29.550

在我们的代码库中（应该重用现有的基础设施并且还使用 Autofac 进行 DI），我目前已经编写了一些规则：

*   为了确保我们不会将自己与现有基础设施紧密耦合
*   我们没有在 Views 中使用 ViewBags，而是使用 ViewModels

# html - setCurrentTime mediaelements.js 出错

> ID：14754803
> 
> 赞同：1
> 
> 时间：2013-02-07T15:28:29.580
> 
> 标签：html, video, skip

我的视频有 Javascript 问题。播放器是 mediaelements.jd 播放器

如果用户单击单选按钮或其他事件，我会跳过视频。但在 IE 中，点击后错误控制台会写：

```
SCRIPT5022: DOM Exception: INDEX_SIZE_ERR (1) 
mediaelement-and-player.js, Zeile 385 Zeichen 3 
```

这条线是：

```
384 setCurrentTime: function (time) {
385     this.currentTime = time;
386 }, 
```

这里有什么问题？

# jquery - jQuery .load getlink div 内容为某个类中的每个 url

> ID：14754807
> 
> 赞同：0
> 
> 时间：2013-02-07T15:28:44.100
> 
> 标签：jquery, load

我似乎对我正在写的一些 jQuery 感到困惑。

这大约是我到目前为止的代码......

```
<div class='item_url' style='display:none';>
<a href = 'http://test.com/01'>http://test.com/01</a>
</div>
<div>Title 01</div>
<div class='status'></div>

<div class='item_url' style='display:none';>
<a href = 'http://test.com/02'>http://test.com/02</a>
</div>
<div>Title 02</div>
<div class='status'></div>

<div class='item_url' style='display:none';>
<a href = 'http://test.com/03'>http://test.com/03</a>
</div>
<div>Title 03</div>
<div class='status'></div>

    <script>
    $(function(){
        var getlink = $("div.item_url").text();
        $(".status").load(getlink + #item_status");
    });
    </script> 
```

我试着...

1.  使用类“item_url”从每个 div 中获取链接
2.  转到该链接并从 id 为“item_status”的 div 中获取内容
3.  加载我从第 2 步收到的内容并使用“状态”类填充 div
4.  我试图让这个循环并适当地级联填充的数据

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:31:58.667

您需要遍历`div`s，从文本中检索链接，确定`div.status`每个 div 之后的下一个内容，然后将数据加载到 this`div.status`中。

```
$(function(){
    $("div.item_url").each(function(i,item) {
        // item refers to the next div.item_url found in the DOM
        var getlink = $(item).text();
        // get a reference to the div with class status that follows this div
        var nextStatusDiv = $(item).next(".status");
        $(nextStatusDiv).load(getlink + " #item_status", function() {
            console.log("Loaded item status " + i + " successfully"; // for debug purposes
        });
    }
}); 
```

# javascript - 更改焦点上的文本颜色并在焦点离开后保持该颜色（onblur）

> ID：14754808
> 
> 赞同：1
> 
> 时间：2013-02-07T15:28:44.853
> 
> 标签：javascript, css

一个 CSS 和 Javascript 问题。我希望交替行具有不同的颜色，默认文本为灰色。但是，一旦输入字段具有焦点，我希望新文本为黑色，然后在字段不再具有焦点后保持黑色。这是我到目前为止所做的：

```
input {
   font-family:Verdana, Trebuchet MS;
   font-size:11px;
   vertical-align:top;
}

input:focus {
    color: black;
}

input.odd {
   color: #888;
   background:#FFFFB4;
}

input.even {
   color: #888;
   background:#FFD9C8;
} 
```

此代码实现了我对交替行具有不同颜色和默认文本为灰色的要求。但是，新文本是灰色的，而不是黑色的。那么我如何让新文本保持黑色。

**更新的 CSS**

```
input {
   font-family:Verdana, Trebuchet MS;
   font-size:11px;
   vertical-align:top;
}

input.odd {
   color: #888;
   background:#FFFFB4;
}

input.even {
   color: #888;
   background:#FFD9C8;
}

input.odd:focus, input.even:focus, input.odd.hasText, input.even.hasText {
    color: black;
} 
```

**新的 jQuery 代码**

```
$('input').focus(function() {
   $(this).addClass('hasText');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:31:37.557

很可能你想要

```
input.odd:focus,input.even:focus {
    color: black;
} 
```

如果您的意思是文本在失去焦点后恢复为灰色，您可能需要在输入文本后通过 javascript 添加一个类，并使该类与您的焦点类匹配。

**编辑**

就像是：

```
$('input').focus(function(){
    $(this).addClass('hasText');
}); 
```

然后在你的 CSS 中有：

```
input.even:focus,input.odd:focus,input.hasText{
    color: black;
} 
```

# c# - 使用 WebRequest 的多个 POST

> ID：14754809
> 
> 赞同：0
> 
> 时间：2013-02-07T15:28:49.980
> 
> 标签：c#, post, webrequest

我能够发送第一个请求工作正常，但是我无法理解为什么它在`Stream os = smsRequest.GetRequestStream()`第二次获得时停滞不前。

我知道您不能多次写入请求，这就是每次创建新实例的原因。

```
 public void SendSMS(Dictionary<double, IList<string>> texts)
    {
        if (CreateWebRequest())
        {
            foreach (double mpn in texts.Keys)
            {
                foreach (string sms in texts[mpn])
                {
                    string formParams = string.Format("sendTo=0{0}&selectText=Please+Select...&textMessage={1}&x=28&y=10", mpn, sms);
                    byte[] encodedParams = Encoding.UTF8.GetBytes(formParams);

                    HttpWebRequest smsRequest = CreateSMSRequest(encodedParams);

                    using (Stream os = smsRequest.GetRequestStream())
                    {
                        os.Write(encodedParams, 0, encodedParams.Length);
                        os.Close();
                    }
                }
            }
        }
    }

    private HttpWebRequest CreateSMSRequest(byte[] encodedParams)
    {
        HttpWebRequest smsRequest = (HttpWebRequest)WebRequest.Create(PostUrl);
        smsRequest.Method = WebRequestMethods.Http.Post;
        smsRequest.ContentType = "application/x-www-form-urlencoded";
        smsRequest.ContentLength = encodedParams.Length;
        smsRequest.AllowAutoRedirect = false;
        smsRequest.Credentials = CredentialCache.DefaultNetworkCredentials;
        smsRequest.Headers.Add(HttpRequestHeader.Cookie, _cookieData);

        return smsRequest;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:59:12.673

我认为您的答案与此答案相同： [HttpWebRequest getRequestStream hangs on multiple runs](https://stackoverflow.com/questions/12799218/httpwebrequest-getrequeststream-hangs-on-multiple-runs)

在你的 using 声明之后：

```
var response = smsRequest.GetResponse() as HttpWebResponse; 
```

# doctrine-orm - UniqueEntity 使用 Doctrine 2

> ID：14754812
> 
> 赞同：3
> 
> 时间：2013-02-07T15:28:54.070
> 
> 标签：doctrine-orm, entity, zend-framework2, unique-index

我正在使用 Zend Framework 2，并且我创建了一个用户实体。现在我正在尝试使用户名字段唯一。但是，出现以下错误。

```
[Semantical Error] The annotation "@UniqueEntity" in class User\Entity\User was never imported. Did you maybe forget to add a "use" statement for this annotation? 
```

我已添加此代码以进行唯一性检查

```
@UniqueEntity("email") 
```

**我可以看到这是 Symfony 中使用的一种方法。我如何将它用于 Zend Framework 2？**

这是我正在使用的实体

```
<?php

namespace User\Entity;

use Doctrine\ORM\Mapping as ORM,
    Zend\Form\Annotation;

/**
 * A user entity.
 *
 * @ORM\Entity
 * @ORM\Table(name="users")
 * @UniqueEntity("email")

 * @property int $id
 * @property string $username
 * @property string $email
 * @property string $password
 * 
 * @Annotation\Name("User")
 */
class User {

  /**
   * @ORM\Id
   * @ORM\Column(type="integer");
   * @ORM\GeneratedValue(strategy="AUTO")
   * 
   * @Annotation\Required(false)
   */
  protected $id;

  /**
   * @ORM\Column(type="string")
   * 
   * @Annotation\Attributes({"type":"text"})
   * @Annotation\Options({"label":"Username:"})
   * @Annotation\Filter({"name":"StringTrim"})
   * @Annotation\Filter({"name":"StripTags"})
   */
  protected $username;

  /**
   * @ORM\Column(type="string")
   * 
   * @Annotation\Attributes({"type":"text" })
   * @Annotation\Options({"label":"Email:"})
   * @Annotation\Filter({"name":"StringTrim"})
   * @Annotation\Filter({"name":"StripTags"})
   */
  protected $email;

  /**
   * @ORM\Column(type="string")
   * 
   * @Annotation\Attributes({"type":"text" })
   * @Annotation\Options({"label":"Password:"})
   * @Annotation\Filter({"name":"StringTrim"})
   * @Annotation\Filter({"name":"StripTags"})
   */
  protected $password;    

  public function __get($property) {
    return $this->$property;
  }

  /**
   * Magic setter to save protected properties.
   *
   * @param string $property
   * @param mixed $value
   */
  public function __set($property, $value) {
    $this->$property = $value;
  }

  public function getArrayCopy() {
    return array(
        'username' => $this->username,
        'email' => $this->email,
        'surname' => $this->surname,
        'first_name' => $this->first_name,
        'company' => $this->company,
        'postcode' => $this->postcode,
    );
  }

  public function populate($data) {
    $this->username = isset($data['username']) ? $data['username'] : $this->username;
  }

  public function setDate($property, $value){
    $this->$property = new \DateTime($value);
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:41:33.950

`@UniqueEntity`是 symfony 验证组件的一个特殊扩展（这里写为注解）。您正在寻找的可能是您可以在以下位置找到的验证器`DoctrineModule`：[https ://github.com/doctrine/DoctrineModule/blob/master/docs/validator.md](https://github.com/doctrine/DoctrineModule/blob/master/docs/validator.md)

对它的支持作为注释尚未内置。

# wpf - 在用户控件中获取工具提示以显示数据绑定文本并保持打开状态

> ID：14754813
> 
> 赞同：2
> 
> 时间：2013-02-07T15:28:59.653
> 
> 标签：wpf, data-binding, user-controls, tooltip

我有一个用户控件，它显示`TextBox`一个小帮助图标。

我的目标是`ToolTip`弹出一个窗口，显示一些数据绑定文本并在鼠标悬停在帮助图标上时保持打开状态。

因此，为此我在用户控件中创建了一个 HelpText 依赖属性，允许我将帮助文本字符串绑定到用户控件。

所以，我的用户控件看起来像这样

```
<UserControl Name="textField" ...>
    <StackPanel Orientation="Horizontal">
        <TextBox Text="{Binding ElementName=textField,Path=Text}"/>
        <Image Source="{StaticResource Help.Icon}">
            <Image.ToolTip>
                <ToolTip Content="{Binding ElementName=textField,Path=HelpText}"/>
            </Image.ToolTip>
        </Image>
    </StackPanel>
</UserControl> 
```

这段代码确实显示了工具提示，只是它是空的！此外，StaysOpen 属性没有任何区别，因为工具提示会在几秒钟后关闭。

有趣的是，当我直接在 Image 控件的 ToolTip 属性上设置相同的绑定时，绑定的文本会在工具提示弹出窗口中正常显示，但它仍然没有保持打开状态：

```
<Image Source="{StaticResource Help.Icon}" ToolTip="{Binding ElementName=textField,Path=HelpText}"> 
```

所以我的问题是：

1.  为什么对用户控件的 HelpText 依赖属性的绑定在第一个代码示例中不起作用，但在第二个代码示例中起作用？

2.  如何使`ToolTip`保持打开状态，或者更确切地说如何使`ToolTip`两者保持打开状态并显示数据绑定文本？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T16:05:13.817

工具提示与 XAML 的其余部分不属于同一 VisualTree，因此`DataContext`不会按照您期望的方式继承。

编写`ToolTip="{Binding SomeProperty}"`会自动将工具提示设置`DataContext`为`SomeProperty`，但是如果您构建自定义工具提示，则必须自己执行此操作。

```
<ToolTip DataContext="{Binding PlacementTarget.DataContext, 
        RelativeSource={RelativeSource Self}}" ... /> 
```

这会将工具提示绑定到工具提示`DataContext`所在`DataContext`的任何对象。

为了完成你想要做的事情，你`<ToolTip>`可能看起来像这样，因为`PlacementTarget`将是你的`Image`：

```
<!-- Could also use something like Tag if DataContext is actually used -->
<Image DataContext="{Binding ElementName=textField, Path=HelpText}" 
       Source="{StaticResource Help.Icon}">
    <Image.ToolTip>
        <ToolTip Content="{Binding PlacementTarget.DataContext, 
            RelativeSource={RelativeSource Self}}"/>
    </Image.ToolTip>
</Image> 
```

至于为什么它不会保持打开状态，我并不肯定，但可能是因为[ToolTipService.ShowDuration](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.showduration.aspx)属性默认为 5 秒，这可能会覆盖该`StaysOpen`属性。

您可以尝试将其设置为更高的值，例如

```
<Image ToolTipService.ShowDuration="60000" ... /> 
```

或者您可以尝试使用样式看起来像 a 的[解决方法](https://stackoverflow.com/a/4620580/302677)。代码可能看起来像这样：`Popup``ToolTip`

```
<Popup PlacementTarget="{Binding ElementName=MyImage}" 
       IsOpen="{Binding IsMouseOver, ElementName=MyImage, Mode=OneWay}">
    <TextBlock Text="{Binding ElementName=textField, Path=HelpText}" />
</Popup> 
```

# php - 使用 PHP 将图像添加到 Excel 文件

> ID：14754817
> 
> 赞同：6
> 
> 时间：2013-02-07T15:29:10.493
> 
> 标签：php, excel, heroku, export-to-excel

我正在使用以下函数将内容添加到使用 PHP 的 excel 文件中：

```
function __writeString($row, $col, $value ) {
        $L = strlen($value);
        $this->file .= pack("ssssss", 0x204, 8 + $L, $row, $col, 0x0, $L);
        $this->file .= $value;
} 
```

我想知道如何以相同的方式在单元格中添加图像，例如通过提供其 url 作为值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T15:31:22.537

看看这个：[PHPExcel](http://phpexcel.codeplex.com/)。它将为您提供从 PHP 读取和写入 Excel 所需的所有工具。

一旦你安装了 PHPExcel，你可以使用这样的东西来插入：

```
$objDrawing = new PHPExcel_Worksheet_Drawing();

$objDrawing->setPath('./images/picture.png');

$objDrawing->setCoordinates('A11'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-17T18:20:25.323

“Trigun”，你的建议真的很有帮助。我能够从[https://github.com/PHPOffice/PHPExcel](http://phpexcel.codeplex.com/releases)下载最新的 PHPExcel 类，并立即启动并运行。但是，花了一些额外的时间来弄清楚如何将图像添加到 excel 文件中。你的解释没有太大帮助。

以下是有关如何执行此操作的完整说明：

首先，下载库并将其放置在您网站上的合理位置：

```
sites/all/libraries/phpexcel/Classes 
```

现在，您可以在网站中任何您希望的位置创建 PHP 文件，并将以下内容添加到文件中：

1) 允许在屏幕上打印错误消息：

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);
date_default_timezone_set('Europe/London');

define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br \>'); 
```

2) 包括 Excel 类文件：

```
/** Include PHPExcel */
require_once $_SERVER["DOCUMENT_ROOT"] . "/sites/all/libraries/phpexcel/Classes/PHPExcel.php"; 
```

3）创建“PHPExcel”对象：

```
// Create new PHPExcel object
echo date('H:i:s') , " Create new PHPExcel object" , EOL;
$objPHPExcel = new PHPExcel(); 
```

4）设置一些Excel元数据，如标题和描述。

```
// Set document properties
echo date('H:i:s') , " Set document properties" , EOL;
$objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
->setLastModifiedBy("Maarten Balliauw")
->setTitle("PHPExcel Test Document")
->setSubject("PHPExcel Test Document")
->setDescription("Test document for PHPExcel, generated using PHP classes.")
->setKeywords("office PHPExcel php")
->setCategory("Test result file"); 
```

5）在“B1”单元格中添加一些数据：

```
// Add some data
echo date('H:i:s') , " Add some data" , EOL;
$objPHPExcel->setActiveSheetIndex(0)
->setCellValue('B1', 'Hello world!') 
```

6）创建一个“绘图”对象，我们可以将图像加载到其中。请记住将图像 URL 替换为 Web 服务器中的有效图像 URL：

```
// Add a drawing to the worksheet
echo date('H:i:s') , " Add a drawing to the worksheet" , EOL;
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('Thumb');
$objDrawing->setDescription('Thumbnail Image');
$objDrawing->setPath($_SERVER["DOCUMENT_ROOT"] . '/sites/default/files/product-images/10098.jpg');
$objDrawing->setHeight(21); 
```

7) 将图像复制到我们的“$objPHPExcel”对象的“A1”单元格中。

```
$objDrawing->setCoordinates('A1');
$objDrawing->setWorksheet($objPHPExcel->getActiveSheet()); 
```

8) 将“$objPHPExcel”对象保存为 Excel 文件格式。

```
// Save Excel 95 file
echo date('H:i:s') , " Write to Excel5 format" , EOL;
$callStartTime = microtime(true);

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save(str_replace('.php', '.xls', __FILE__)); 
```

9) 在屏幕上打印一些稍微有用的信息：

```
$callEndTime = microtime(true);
$callTime = $callEndTime - $callStartTime;

echo date('H:i:s') , " File written to " , str_replace('.php', '.xls', pathinfo(__FILE__, PATHINFO_BASENAME)) , EOL;
echo 'Call time to write Workbook was ' , sprintf('%.4f',$callTime) , " seconds" , EOL;
// Echo memory usage
echo date('H:i:s') , ' Current memory usage: ' , (memory_get_usage(true) / 1024 / 1024) , " MB" , EOL;

// Echo memory peak usage
echo date('H:i:s') , " Peak memory usage: " , (memory_get_peak_usage(true) / 1024 / 1024) , " MB" , EOL;

// Echo done
echo date('H:i:s') , " Done writing files" , EOL;
echo 'Files have been created in ' , getcwd() , EOL; 
```

这就是全部！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T16:00:24.123

一旦你安装了 PHPExcel。然后插入代码：我这里使用的图像是相对的。路径：'./images/logo.jpg'

```
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setPath('./images/logo.jpg');
$objDrawing->setCoordinates('A1');
$objDrawing->setWorksheet($objPHPExcel->getActiveSheet()); 
```

# javascript - 将系列总数添加到 Highcharts 中的图例

> ID：14754823
> 
> 赞同：13
> 
> 时间：2013-02-07T15:29:24.987
> 
> 标签：javascript, jquery, highcharts

使用 Highcharts.js - 我想将系列总数添加到图例中（当前显示为“12345”）。我知道我需要编写一个 labelFormatter 函数，但我不知道足够的 JavaScript 来弄清楚如何总结每个系列的总数。代码如下（这里也是实时版本：http: [//jsbin.com/ukabob/8](http://jsbin.com/ukabob/8)）。

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            backgroundColor: '#E9E7DC',
            borderRadius:0,
          margin: [0, 150, 30, 0]
        },
        colors: ['#A74B59', '#46C4B7', '#EDBA70'],
        credits: {
          enabled: false
        },          
        title: {
            text: null
        },            
        xAxis: {
            categories: ['2013', '2014', '2015', '2016', '2017', '2018',
                '2019', '2020', '2021', '2022'],                
            gridLineWidth:1,
            gridLineColor: '#FFFFFF',
            labels: {
              style: {
                color: '#000000'
              },
              formatter: function() {
                return '<div style="font-size:22px; font-family: \'Advent Pro\', sans-serif;">'+
                    this.value +'</div>';
              },
              y:25
            },
            lineColor: '#FFFFFF',
            tickColor: '#FFFFFF',
            tickLength: 30
        },
        yAxis: {
            gridLineWidth:0,
            title: {
                text: null
            },
            labels: {
              enabled: false
            }
        },
        plotOptions: {
          series: {
            marker: {
                radius: 6,

                lineWidth: 2,
                lineColor: null, // inherit from series
                symbol: 'circle',
                states: {
                    hover: {
                        fillColor: '#E9E7DC',
                        lineWidth: 2,
                      radius:6
                    }
                }
            },
            states: {
              hover: {
                lineWidth:4
              }
            }
          }
        },
        tooltip: {
            borderWidth:0,
            borderRadius: 0
            },
        legend: {
          borderRadius:0,
            backgroundColor: '#FFFFFF',
            itemMarginBottom: 7,
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',                
            y: 30,
            x: 2,
            borderWidth: 0,
            width:130,
            symbolPadding: 10,
            useHTML:true,
            shadow: {
              color: '#000',
              width: 3,
              opacity: 0.15,
              offsetY: 2,
              offsetX: 1
            },
            labelFormatter: function() {
              return '<div class="' + this.name + '-arrow"></div><span style="font-family: \'Advent Pro\', sans-serif; font-size:16px">' + this.name +'</span><br/><span style="font-size:10px; color:#ababaa">(Total: 12345)</span>';
        }

        },
        series: [{
            name: 'Honeywell',
            data: [700,725,750,850,950,1000,1025,1050,1050,1050]
        }, {
            name: 'Bombardier',
            data: [661,758,880,990,1065,1136,1193,1241,1289,1335]
        }, {
            name: 'Embraer',
            data: [747,789,839,861,890,908,984,1030,1097,1156]
        }]
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-18T22:08:17.560

一个更通用和动态的答案：

```
legend: {
   labelFormatter: function() {
      var total = 0;
      for(var i=this.yData.length; i--;) { total += this.yData[i]; };
      return this.name + '- Total: ' + total;
   }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T15:35:34.410

弄清楚了。我将总数添加到系列中，然后使用 this.options 调用它。请参阅下面的更新代码：

```
 legend: {
          borderRadius:0,
            backgroundColor: '#FFFFFF',
            itemMarginBottom: 7,
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',                
            y: 30,
            x: 2,
            borderWidth: 0,
            width:130,
            symbolPadding: 10,
            useHTML:true,
            shadow: {
              color: '#000',
              width: 3,
              opacity: 0.15,
              offsetY: 2,
              offsetX: 1
            },
            labelFormatter: function() {
              return '<div class="' + this.name + '-arrow"></div><span style="font-family: \'Advent Pro\', sans-serif; font-size:16px">' + this.name +'</span><br/><span style="font-size:10px; color:#ababaa">(Total: ' + this.options.total + ')</span>';
        }

        },
        series: [{
            name: 'Honeywell',
            total: 9150,
            data: [700,725,750,850,950,1000,1025,1050,1050,1050]
        }, {
            name: 'Bombardier',
            total: 10548,
            data: [661,758,880,990,1065,1136,1193,1241,1289,1335]
        }, {
            name: 'Embraer',
            total: 9301,
            data: [747,789,839,861,890,908,984,1030,1097,1156]
        }]
    });
}); 
```

# unit-testing - 单元测试与代码覆盖率有何关系？

> ID：14754824
> 
> 赞同：1
> 
> 时间：2013-02-07T15:29:26.973
> 
> 标签：unit-testing, code-coverage, theory

我知道代码覆盖率是一个指标，但在有关单元测试的文章中经常提到它。但是在设计单元测试时，我正在尝试为我的业务逻辑编写测试并且不太关心覆盖率。那是什么关系呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:33:18.477

The thinking goes as follows:

If the code executed when you run your unit tests covers all the code in the class you test (system under test, SUT), you obviously tested all relevant code.
So, a high code coverage of the SUT is a good thing.

But it also can be misleading. Having a 100% code coverage doesn't mean that you actually tested all your business logic. So, concentrating on testing all your business logic is actually the better approach.
If you tested all your business logic, you will have 100% code coverage - or some code in your business logic that is not needed there.
Still, you can use the code coverage to check if you actually have tested all your business logic.

So, to sum up:

1.  If you don't have 100% code coverage of your SUT, it strongly suggest that you haven't tested your complete business logic
2.  BUT: 100% code coverage doesn't ensure that you tested all of your logic

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:41:57.527

从字面上看，“单元测试”测试单个单元，或者换句话说，测试单个组件。因此，单元测试不一定涵盖业务需求，而是确保组件的*每个部分*都按照它的用途进行。代码覆盖率衡量已测试并因此得到验证的代码的百分比。每一段未经测试的代码都可能包含缺陷，因此需要高代码覆盖率结果。

当然，单元测试，或者更确切地说，用于实现单元测试的框架也可以用于一次测试多个组件。这些测试更像是集成测试，尽管水平很低。

代码覆盖率和集成（或业务逻辑测试）之间的关系是，如果你有 100% 的代码覆盖率，你就知道每个组件都在做它应该做的事情。但是如果你想确保应用程序做它应该做的事情，那么高代码覆盖率是远远不够的：对于这个额外的集成测试（一次测试多个组件）是需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:53:17.883

带有代码覆盖率的单元测试可能是一个非常强大的工具。

例如。测试方法时，您可以查看是否已命中所有逻辑路径。如果不需要更多测试。如果不可能命中一段代码，你知道你可以删除它而不会产生任何副作用。

# iphone - purgeIdleCellConnections：找到一个要清除 conn = 0x1d57ba00

> ID：14754828
> 
> 赞同：26
> 
> 时间：2013-02-07T15:29:38.287
> 
> 标签：iphone, objective-c

这里发生了什么？这是我第一次在日志中看到这个。

我已连接到 NTP 服务器。

在运行 iOS 6.0 和最新版本 XCode 的 iPhone 上构建。

我应该忽略这个吗？它似乎没有对我的应用程序做任何其他事情......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-08T07:28:18.047

重要提示：只有当您在真实设备上运行应用程序（iPhone 4 和 iOS 6.0.1）时，您才会收到此消息。此设备使用 3G 连接，而不是 WIFI 连接。

当我在模拟器上运行应用程序或在具有 Wifi 的设备上运行应用程序时，我没有收到此消息。

# java - 单击单选按钮会产生旧值吗？

> ID：14754837
> 
> 赞同：0
> 
> 时间：2013-02-07T15:30:03.613
> 
> 标签：java, swing, jtable, tablecelleditor, jradiobutton

我对java很陌生，所以请不要太苛刻:)

我有一个 JTable，每个单元格中有一列有 3 个 JRadioButtons。

JRadioButtons 显示正确，并且选择了正确的 JRadioButtons。

要将 JRadioButtons 放入 JTable 我使用 setCellRenderer() 和 setCellEditor() ：

```
private void addRadio(int intCol)
{
  mgrdData.getColumnModel().getColumn(intCol).setCellRenderer(new RadioButtonRenderer());
  RadioButtonEditor butEdit = new RadioButtonEditor(new JCheckBox());
  butEdit.UseTcp(mtcpGrid);
  mgrdData.getColumnModel().getColumn(intCol).setCellEditor(butEdit);
} 
```

下面是 RadioButtonEditor 类的代码：

```
public class RadioButtonEditor extends DefaultCellEditor implements ItemListener
{
  public JPanel pnl = new JPanel();
  public ButtonGroup group1 = new ButtonGroup();
  public JRadioButton btnVA = new JRadioButton("VA");
  public JRadioButton btnUIT = new JRadioButton("UIT");
  public JRadioButton btnAAN = new JRadioButton("AAN");

  public tcp mtcpCon;

  public RadioButtonEditor(JCheckBox checkBox)
  {
    super(checkBox);
  }

  public void UseTcp(tcp tcpCon)
  {
    mtcpCon = tcpCon;
  }

  public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)
  {
    if (value==null) return null;
    group1.add(btnVA );
    group1.add(btnUIT );
    group1.add(btnAAN );
    pnl.add(btnVA );
    pnl.add(btnUIT );
    pnl.add(btnAAN );
    btnVA.setSelected(false);
    btnUIT .setSelected(false);
    btnAAN .setSelected(false);
    String strVal1 = (String)value;
    switch(Integer.parseInt(strVal1))
    {
      Case 0:
        btnVA.setSelected(true);
        break;
      Case 1:
        btnUIT.setSelected(true);
        break;
      Case 2:
        btnAAN.setSelected(true);
        break;
    }
    System.out.println("gettablecelleditorcomponent strVal1 : " + strVal1);
    return pnl;
  }

  public Object getCellEditorValue()
  {
    String strVal2="";
    if(btnVA.isSelected()  == true) strVal2="0";
    if(btnUIT.isSelected() == true) strVal2="1";
    if(btnAAN.isSelected() == true) strVal2="2";
    System.out.println("getcelleditorvalue strVal2 : " + strVal2);
    return strVal2;
  }

  public void itemStateChanged(ItemEvent e)
  {
    super.fireEditingStopped();
  }
} 
```

下面是 RadioButtonRenderer 类的代码：

```
public class RadioButtonRenderer implements TableCellRenderer
{
  public JPanel pnl = new JPanel();
  public ButtonGroup group1 = new ButtonGroup();
  public JRadioButton btnVA = new JRadioButton("VA");
  public JRadioButton btnUIT = new JRadioButton("UIT");
  public JRadioButton btnAAN = new JRadioButton("AAN");

  public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
  {
    if (value==null) value="0";
    btnVA.putClientProperty("JComponent.sizeVariant","small");
    btnAAN.putClientProperty("JComponent.sizeVariant","small");
    btnUIT.putClientProperty("JComponent.sizeVariant","small");
    group1.add(btnVA );
    group1.add(btnUIT );
    group1.add(btnAAN );
    pnl.add(btnVA );
    pnl.add(btnUIT );
    pnl.add(btnAAN );
    btnVA.setSelected(false);
    btnUIT .setSelected(false);
    btnAAN .setSelected(false);
    switch(Integer.parseInt((String)value))
    {
      Case 0:
        btnVA.setSelected(true);
        break;
      Case 1:
        btnUIT.setSelected(true);
        break;
      Case 2:
        btnAAN.setSelected(true);
        break;
    }
    return pnl;
  }
} 
```

我想检测单击了哪个 JRadioButton，并处理该新值。我假设触发的事件应该在 RadioButtonEditor 类中，但我不知道事件。

我将 println() 添加到 getTableCellEditor() 和 getCellEditorValue() 事件中，但都打印了旧值。

例如 ：

从 row0=0、row1=1、row2=2 开始

单击 row1 上的 2 给出：

```
gettablecelleditorcomponent : 1 
```

现在 row0=0, row1=2, row2=2 点击 row0 上的 1 给出：

```
getcelleditorvalue : 2
gettablecelleditorcomponent : 0 
```

现在 row0=1, row1=2, row2=2 然后点击 row1 上的 0 给出：

```
getcelleditorvalue : 1
gettablecelleditorcomponent : 2 
```

现在 row0=1, row1=0, row2=2 然后点击 row2 上的 1 给出：

```
getcelleditorvalue : 0
gettablecelleditorcomponent : 2 
```

现在第 0 行=1，第 1 行=0，第 2 行=1

由此可以看出：

```
getTableCellEditor() has the previous value of that row
getCellEditorValue() has the global previous value 
```

在单击 JRadioButton 后，我可以使用哪个事件来获取它的新值？

**[编辑]**

我在表中添加了一个 TableModelListener，但 getFirstRow() 仍然显示最后选择的行，而不是用户单击单选按钮的行。

例如，当他们最后一次单击第 5 行中的单选按钮时，现在单击第 7 行中的单选按钮，然后 tabelChanged() 中的 getFirstRow() 仍然显示 5

下面是我的 TableModelListener 的代码：

```
mgrdData.getModel().addTableModelListener(new TableModelListener()
{
  public void tableChanged(TableModelEvent e)
  {
    System.out.println("column : " + e.getColumn());
    System.out.println("firstrow : " + e.getFirstRow());
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:06:00.103

这是我将如何做到这一点：

```
public class RadioButtonsCellEditor
    extends AbstractCellEditor
    implements TableCellEditor
{
    private final JRadioButton vuButton = new JRadioButton ("VA");
    private final JRadioButton uitButton = new JRadioButton ("UIT");
    private final JRadioButton aanButton = new JRadioButton ("AAN");
    private final ButtonGroup group = new ButtonGroup ();
    private final Box box = Box.createHorizontalBox ();

    public RadioButtonsCellEditor ()
    {
        super ();

        group.add (vuButton);
        group.add (uitButton);
        group.add (aanButton);

        box.add (vuButton);
        box.add (uitButton);
        box.add (aanButton);
    }

    @Override
    public Object getCellEditorValue ()
    {
        return
            vuButton.isSelected () ? "VU" :
            uitButton.isSelected () ? "UIT" :
            aanButton.isSelected () ? "AAN" : "";
    }

    @Override
    public Component getTableCellEditorComponent (JTable table, Object value,
            boolean isSelected, int row, int column)
    {
        vuButton.setSelected ("VA".equals (value));
        uitButton.setSelected ("UIT".equals (value));
        aanButton.setSelected ("AAN".equals (value));

        box.setBackground (table.getBackground ());
        box.setForeground (table.getForeground ());

        vuButton.setBackground (table.getBackground ());
        vuButton.setForeground (table.getForeground ());
        uitButton.setBackground (table.getBackground ());
        uitButton.setForeground (table.getForeground ());
        aanButton.setBackground (table.getBackground ());
        aanButton.setForeground (table.getForeground ());

        return box;
    }

    public static void main (String [] args)
    {
        JTable table = new JTable (
            new Object [][] {
                new Object [] {"1", "VU"},
                new Object [] {"2", "UIT"},
                new Object [] {"3", "AAN"}
            }, new Object [] {"#", "Value"});

        table.getColumnModel ().getColumn (1).setCellRenderer (new RadioButtonsCellRenderer ());
        table.getColumnModel ().getColumn (1).setCellEditor (new RadioButtonsCellEditor ());

        JFrame frame = new JFrame ("RadioButtonsCellRenderer");
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.getContentPane ().setLayout (new BorderLayout ());
        frame.getContentPane ().add (
            new JScrollPane (
                table,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED));
        frame.pack ();
        frame.setVisible (true);
    }

    private static class RadioButtonsCellRenderer
        extends Box
        implements TableCellRenderer
    {
        private final JRadioButton vuButton = new JRadioButton ("VA");
        private final JRadioButton uitButton = new JRadioButton ("UIT");
        private final JRadioButton aanButton = new JRadioButton ("AAN");
        private final ButtonGroup group = new ButtonGroup ();

        public RadioButtonsCellRenderer ()
        {
            super (BoxLayout.LINE_AXIS);

            group.add (vuButton);
            group.add (uitButton);
            group.add (aanButton);

            add (vuButton);
            add (uitButton);
            add (aanButton);
        }

        @Override
        public Component getTableCellRendererComponent (JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column)
        {
            vuButton.setSelected ("VU".equals (value));
            uitButton.setSelected ("UIT".equals (value));
            aanButton.setSelected ("AAN".equals (value));

            setBackground (table.getBackground ());
            setForeground (table.getForeground ());

            vuButton.setBackground (table.getBackground ());
            vuButton.setForeground (table.getForeground ());
            uitButton.setBackground (table.getBackground ());
            uitButton.setForeground (table.getForeground ());
            aanButton.setBackground (table.getBackground ());
            aanButton.setForeground (table.getForeground ());

            return this;
        }
    }
} 
```

编辑器将只提供将设置到表模型中的新值。您需要从表模型中读取它，而不是从编辑器中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:45:04.897

如果我正确理解您的问题，您只需向每个单选按钮添加相同的 ActionListener

```
public void actionPerformed(ActionEvent ae) {
  JRadioButton rb = (JRadioButton) ae.getSource();
  if (rb.isSelected()) {
    // do something depended on the button which was pressed
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:47:35.853

尝试将 a 添加`TableModelListener`到您的 JTable。

编辑只是更新 JTable 中的模型数据的过程。存储在编辑器中的值通常是临时的和不可预测的。

在编辑结束时，最终结果是更新了表的基础**模型**。然后将通知所有 TableModelListeners。

**更新**

喔好吧。现在的问题可能是“编辑完成”事件直到编辑器中的单选按钮失去焦点才被触发。因此，单击第 7 行实际上会触发您刚刚失去焦点的第 5 行的事件。单击 7 只是使其获得焦点并开始编辑 7 的过程。但是，您可以在编辑完成时告诉编辑器。在编辑器中，尝试这样的事情：

```
public RadioButtonEditor(JCheckBox checkBox)
{
  super(checkBox);
  ActionListener editingListener = new ActionListener()
  {
    public void actionPerformed(ActionEvent e)
    {
      // editing is now complete - don't wait for focus to be lost
      // this will switch back to showing renderer
      //    and fire the event to tablemodellisteners
      stopCellEditing();
    }
  };
  btnVA.addActionListener(editingListener);
  btnUIT.addActionListener(editingListener);
  btnAAN.addActionListener(editingListener);
} 
```

我想你是带着你的 走那条路`ItemListener`，但你没有打电话`btnVA.addItemListener(this), etc.`。但`ActionListener`无论如何，an 通常更适合单选按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:24:35.950

*   覆盖所有通知程序并正确地作为`JRadioButtons`in的工作并不容易`ButtonGroup``EditorComponent`

    ![在此处输入图像描述](../Images/a3180e3bffc1959f2ec17aa3edb1f67b.png)

*   用`JComboBox`for`XxxCellEditor`代替`JRadioButton`s in`ButtonGroup`

    ![在此处输入图像描述](../Images/f35fa3fed053b344549eb51c4dc41cd5.png)

un_comment 第 343 行，看我的观点，`JComboBox`如`XxxCellEditor`

```
import javax.swing.*;
import javax.swing.table.*;
import java.util.Date;
import java.util.Vector;
import java.awt.*;
import java.awt.event.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import javax.swing.UIManager.LookAndFeelInfo;

public class TableTestPanel extends JPanel {

    private static final String[] COLUMN_NAMES = {"List ID", "Expiration Date", "Status", "Date Created"};
    private static final DateFormat DATE_FORMAT = new SimpleDateFormat("dd/MM/yyyy");
    private static final long serialVersionUID = 1L;

    private static class StatusPanel extends JPanel {

        private static final long serialVersionUID = 1L;
        private JRadioButton theSingleOption;
        private JRadioButton theMarriedOption;
        private JRadioButton theDivorcedOption;

        StatusPanel() {
            super(new GridLayout(3, 1));
            setOpaque(true);
            ButtonGroup buttonGroup = new ButtonGroup();
            theSingleOption = new JRadioButton("Single");
            theSingleOption.setOpaque(false);
            add(theSingleOption);
            buttonGroup.add(theSingleOption);
            theMarriedOption = new JRadioButton("Married");
            theMarriedOption.setOpaque(false);
            add(theMarriedOption);
            buttonGroup.add(theMarriedOption);
            theDivorcedOption = new JRadioButton("Divorced");
            theDivorcedOption.setOpaque(false);
            add(theDivorcedOption);
            buttonGroup.add(theDivorcedOption);
        }

        public Status getStatus() {
            if (theMarriedOption.isSelected()) {
                return Status.MARRIED;
            } else if (theDivorcedOption.isSelected()) {
                return Status.DIVORCED;
            } else {
                return Status.SINGLE;
            }
        }

        public void setStatus(Status status) {
            if (status == Status.MARRIED) {
                theMarriedOption.setSelected(true);
            } else if (status == Status.DIVORCED) {
                theDivorcedOption.setSelected(true);
            } else {
                theSingleOption.setSelected(true);
            }
        }
    }

    private static class Status {

        static final Status SINGLE = new Status("Single");
        static final Status MARRIED = new Status("Married");
        static final Status DIVORCED = new Status("Divorced");
        private final String myName; // for debug only

        private Status(String name) {
            myName = name;
        }

        @Override
        public String toString() {
            return myName;
        }
    }

    private static class TableEntry {

        private static int instanceNumber;
        private Long theId;
        private Date theExpirationDate;
        private Status theStatus;
        private Date theCreationDate;

        TableEntry() {
            instanceNumber++;
            theId = new Long(instanceNumber);
            theExpirationDate = new Date();
            theStatus = Status.SINGLE;
            theCreationDate = new Date();
        }

        TableEntry(Long anId, Date anExpirationDate, Status aStatus, Date aCreationDate) {
            theId = anId;
            theExpirationDate = anExpirationDate;
            theStatus = aStatus;
            theCreationDate = aCreationDate;
        }

        public Long getId() {
            return theId;
        }

        public Date getExpirationDate() {
            return theExpirationDate;
        }

        public Status getStatus() {
            return theStatus;
        }

        public Date getCreationDate() {
            return theCreationDate;
        }

        public void setId(Long anId) {
            theId = anId;
        }

        public void setExpirationDate(Date anExpirationDate) {
            theExpirationDate = anExpirationDate;
        }

        public void setStatus(Status aStatus) {
            theStatus = aStatus;
        }

        public void setCreationDate(Date aCreationDate) {
            theCreationDate = aCreationDate;
        }
    }

    private static class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private Vector<Object> theEntries;

        MyTableModel() {
            theEntries = new Vector<Object>();
        }

        @SuppressWarnings("unchecked")
        public void add(TableEntry anEntry) {
            int index = theEntries.size();
            theEntries.add(anEntry);
            fireTableRowsInserted(index, index);
        }

        public void remove(int aRowIndex) {
            if (aRowIndex < 0 || aRowIndex >= theEntries.size()) {
                return;
            }
            theEntries.removeElementAt(aRowIndex);
            fireTableRowsDeleted(aRowIndex, aRowIndex);

        }

        public int getRowCount() {
            return theEntries.size();
        }

        @Override
        public String getColumnName(int column) {
            return COLUMN_NAMES[column];
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return Long.class;
                case 1:
                    return Date.class;
                case 2:
                    return Status.class;
                case 3:
                    return Date.class;
            }
            return Object.class;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            TableEntry entry = (TableEntry) theEntries.elementAt(rowIndex);
            switch (columnIndex) {
                case 0:
                    try {
                        entry.setId(new Long(Long.parseLong(aValue.toString())));
                    } catch (NumberFormatException nfe) {
                        return;
                    }
                    break;
                case 1:
                    entry.setExpirationDate((Date) aValue);
                    break;
                case 2:
                    entry.setStatus((Status) aValue);
                    break;
                case 3:
                    entry.setCreationDate((Date) aValue);
                    break;
                default:
                    return;
            }
            fireTableCellUpdated(rowIndex, columnIndex);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            TableEntry entry = (TableEntry) theEntries.elementAt(rowIndex);
            switch (columnIndex) {
                case 0:
                    return entry.getId();
                case 1:
                    return entry.getExpirationDate();
                case 2:
                    return entry.getStatus();
                case 3:
                    return entry.getCreationDate();
            }
            return null;
        }
    }

    private static class DateRenderer extends DefaultTableCellRenderer {

        private static final long serialVersionUID = 1L;

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (!(value instanceof Date)) {
                return this;
            }
            setText(DATE_FORMAT.format((Date) value));
            return this;
        }
    }

    private static class DateEditor extends AbstractCellEditor implements TableCellEditor {

        private static final long serialVersionUID = 1L;
        private JSpinner theSpinner;
        private Object value;

        DateEditor() {
            theSpinner = new JSpinner(new SpinnerDateModel());
            theSpinner.setOpaque(true);
            theSpinner.setEditor(new JSpinner.DateEditor(theSpinner, "dd/MM/yyyy"));
        }

        @Override
        public Object getCellEditorValue() {
            return theSpinner.getValue();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            theSpinner.setValue(value);
            if (isSelected) {
                theSpinner.setBackground(table.getSelectionBackground());
            } else {
                theSpinner.setBackground(table.getBackground());
            }
            return theSpinner;
        }
    }

    private static class StatusEditor extends AbstractCellEditor implements TableCellEditor {

        private static final long serialVersionUID = 1L;
        private StatusPanel theStatusPanel;

        StatusEditor() {
            theStatusPanel = new StatusPanel();
        }

        @Override
        public Object getCellEditorValue() {
            return theStatusPanel.getStatus();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            theStatusPanel.setStatus((Status) value);
            if (isSelected) {
                theStatusPanel.setBackground(table.getSelectionBackground());
            } else {
                theStatusPanel.setBackground(table.getBackground());
            }
            return theStatusPanel;
        }
    }

    private static class StatusRenderer extends StatusPanel implements TableCellRenderer {

        private static final long serialVersionUID = 1L;

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setStatus((Status) value);
            if (isSelected) {
                setBackground(table.getSelectionBackground());
            } else {
                setBackground(table.getBackground());
            }
            return this;
        }
    }
    private MyTableModel theTableModel;
    private JTable theTable;

    public TableTestPanel() {
        super(new BorderLayout(0, 5));
        setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        theTableModel = new MyTableModel();
        theTable = new JTable(theTableModel);
        theTable.setDefaultEditor(Date.class, new DateEditor());
        theTable.setDefaultRenderer(Date.class, new DateRenderer());
        theTable.setDefaultEditor(Status.class, new StatusEditor());
        theTable.setDefaultRenderer(Status.class, new StatusRenderer());
// comment out the two preceding lines and uncomment the following one if you want a more standard editor
// theTable.setDefaultEditor(Status.class, new DefaultCellEditor(new JComboBox(new Status[]{Status.SINGLE, Status.MARRIED, Status.DIVORCED})));
        add(new JScrollPane(theTable), BorderLayout.CENTER);
        JToolBar toolBar = new JToolBar();
        toolBar.setFloatable(false);
        toolBar.add(new AbstractAction("Add new") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                theTableModel.add(new TableEntry());
                packTable();
            }
        });
        toolBar.add(new AbstractAction("Remove") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                theTableModel.remove(theTable.getSelectedRow());
            }
        });
        add(toolBar, BorderLayout.NORTH);
    }

    private void packTable() {
        TableColumnModel columnModel = theTable.getColumnModel();
        int columnCount = theTable.getColumnCount();
        int rowCount = theTable.getRowCount();
        int[][] preferredHeights = new int[columnCount][rowCount];
        TableCellRenderer renderer;
        Component comp;
        for (int col = 0; col < columnCount; col++) {
            renderer = columnModel.getColumn(col).getCellRenderer();
            if (renderer == null) {
                renderer = theTable.getDefaultRenderer(theTableModel.getColumnClass(col));
            }
            for (int row = 0; row < rowCount; row++) {
                comp = renderer.getTableCellRendererComponent(theTable, theTableModel.getValueAt(row, col), false, false, row, col);
                preferredHeights[col][row] = (int) comp.getPreferredSize().getHeight();
            }
        }
        for (int row = 0; row < rowCount; row++) {
            int pref = 0;
            for (int col = 0; col < columnCount; col++) {
                pref = Math.max(pref, preferredHeights[col][row]);
            }
            theTable.setRowHeight(row, pref);
        }
    }

    public static void main(String[] args) {
        try {
            // UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if (info.getName().equals("Nimbus")) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        final JFrame frame = new JFrame("TestRadioButtonRenderer");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new TableTestPanel());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame.setSize(400, 300);
                frame.setVisible(true);
            }
        });
    }
} 
```

# c# - 找出克拉是否在文本框中

> ID：14754840
> 
> 赞同：1
> 
> 时间：2013-02-07T15:30:13.130
> 
> 标签：c#, winforms, textbox

有什么方法可以判断 Mouse Carat 是否在 中`TextBox`？基本上，如果克拉在`TextBox`，你可以开始打字，文字会出现在`TextBox`但如果克拉不在`TextBox`，当你开始打字时，什么都不会发生，是否可以判断它是否存在在`TextBox`？

有点像`TextBox`您在登录计算机时输入密码的位置。

抱歉，如果这听起来令人困惑，那对我来说有点令人困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T15:31:59.510

`Textbox`您可以使用该[`Control.ContainsFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.containsfocus.aspx)属性检查是否有焦点。

# templates - Ember.js：如何渲染模板并将其与特定视图连接

> ID：14754843
> 
> 赞同：1
> 
> 时间：2013-02-07T15:30:25.260
> 
> 标签：templates, ember.js, rendering

在我的一条路线中，我渲染了几个模板，如下所示：

```
Sp.IndexRoute = Ember.Route.extend({
    renderTemplate: function(controller, model) {
        this.render('index');

        this.render('rotatable', {into: 'index', outlet: 'config'}) ;
        this.render('clickable', {into: 'rotatable', outlet: 'front'}) ;
        this.render('configitem', {into: 'clickable'}) ;
        this.render('configuration', {into: 'rotatable', outlet: 'back'}) ;
    .... 
```

我有一个名为 ConfigMenuItemView 的视图，例如

```
Sp.ConfigMenuItemView = Em.View.extend({
    templateName: 'configitem',
    ... 
```

但是，当我呈现**configitem**模板时，它没有与我的 ConfigMenuItemView 连接。仅当我给它们起相同的名称（模板的第一个字符为小写）时，它才有效。有没有办法告诉渲染函数要连接到哪个 View ？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:10:40.307

为了使这个工作，使用视图名称而不是模板名称作为`this.render`. 由于您已经在视图本身上定义了一个 templateName 属性，ember 将在渲染视图时使用它。所以：

```
this.render('configMenuItem', {into: 'clickable'}) ; 
```

应该管用。

# php - 如何安装软件包 mail 和 mail_mime (pear)

> ID：14754845
> 
> 赞同：2
> 
> 时间：2013-02-07T15:30:29.427
> 
> 标签：php, forms, email, pear, packages

我已经通过创建和启动“website.com/go-pear.php”将梨安装到我的服务器上但是，现在我需要安装包 mail 和 mail-mime，我迷路了。我需要这些来设置一个 php 电子邮件表单。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:34:52.887

从控制台使用以下命令：

```
pear install <package_name> 
```

要安装 Mail，它将是：

```
pear install Mail Mail_Mime 
```

# performance - 为什么我的 GAE 应用程序提供静态文件的延迟如此之高？

> ID：14754850
> 
> 赞同：4
> 
> 时间：2013-02-07T15:30:35.707
> 
> 标签：performance, google-app-engine, go

我在 GAE 上检查我的 Go 应用程序的性能，我认为静态文件的响应时间非常高（183 毫秒）。是吗？为什么？我能做些什么呢？

```
64.103.25.105 - - [07/Feb/2013:04:10:03 -0800] "GET /css/bootstrap-responsive.css
HTTP/1.1" 200 21752 - "Go http package" "example.com" ms=183 cpu_ms=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:57:09.087

为了进行比较，我使用[tools.pingdom.com测试了一个站点](http://tools.pingdom.com)

Pingdom 报告的加载时间为`218ms`

以下是日志的结果：

```
2013-02-11 22:28:26.773 /stylesheets/bootstrap.min.css 200 35ms 45kb 
```

`238ms`从 Pingdom 和`2ms`日志中产生的另一个测试。

因此，我会说你的`183ms`看起来比较好。有很多因素在起作用：

*   您到服务器的位置
*   为资源提供服务的服务器是否过载？

您可以尝试使用 Go 实例而不是 App Engine 的静态文件服务器来提供文件。我前段时间对此进行了测试，结果偶尔会更快，但速度不太一致。由于[App Engine 实例被限制为 10 个并发请求](http://code.google.com/p/googleappengine/issues/detail?id=7927)，因此负载下的响应时间也会增加。更不用说您将按实例时间计费。

**编辑：**

如需与其他云/CDN 提供商的比较，请参阅[Cedexis 的 - 免费国家报告](http://www.cedexis.com/country-reports/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:14:21.280

对于静态文件来说，“常规”200 毫秒似乎偏高。我从我的应用程序中提供了相同“bootstrap-responsive.css”的静态版本，我可以看到两种类型的回答时间：

*   50-100ms（大部分时间）
*   150-500 毫秒（有时）

由于我到谷歌应用引擎的 ping 往返时间或多或少为 50 毫秒，因此该文件似乎通常在 50 毫秒左右的时间内提供服务。

我猜 150-300 毫秒的响应时间与谷歌应用引擎前端服务器被“冷缓存”有关。我假设从一些持久性存储中检索文件会比在前端服务器缓存中涉及更高的延迟。

我还假设您可以访问各种前端服务器并获得零星的更高延迟。

最后，浏览器的总体感知延迟应近似为：(tc)ping 往返 + 前端服务器的 tcp/http 队列/缓冲 + 文件服务应用程序时间（如您的 google 应用程序日志中所示）+ 传输时间文件。

如果前端服务器没有过载且文件很小，那么延迟应该接近 ping + 服务时间。

就我而言，50 毫秒（ping）+ 35 毫秒（服务）= 85 毫秒，非常接近我在浏览器中看到的 95 毫秒。

最后，如果您的应用程序正在处理大量请求，它们可能会排队，从而引入应用程序日志中不“可见”的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:23:29.497

您应该尝试[在静态文件上设置缓存](https://developers.google.com/appengine/docs/go/config/appconfig#Static_Cache_Expiration)。

# jquery - 使用 jQuery.getJSON() 作为 URL

> ID：14754855
> 
> 赞同：0
> 
> 时间：2013-02-07T15:30:59.100
> 
> 标签：jquery, json

我如何使用 jQuery.getJSON() 获取此 URL 的数据？

[http://gbrds.gbif.org/registry/organisation/a3c228d0-3110-11db-abb8-b8a03c50a862.json?op=contacts](http://gbrds.gbif.org/registry/organisation/a3c228d0-3110-11db-abb8-b8a03c50a862.json?op=contacts)

如果我在浏览器中查看结果，我会得到以下结果：

```
[{"position":"","lastName":"","phone":"+39 06 6118286","type":"technical","city":"","country":"","isPrimaryContact":true,"postalCode":"","address":"","email":"m.skofic@cgiar.org","description":"","province":"","firstName":"Milko Skofic","salutation":"","key":"48"},{"position":"","lastName":"","phone":"39-06-6118204","type":"administrative","city":"","country":"","isPrimaryContact":true,"postalCode":"","address":"IPGRI, Via Tre Denari, 472/a, 00057, Maccarese, Rome, Italy,","email":"eurisco@cgiar.org","description":"","province":"","firstName":"Ms. Sonia Dias","salutation":"","key":"49"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:32:31.080

查看[`getJSON`](http://api.jquery.com/jQuery.getJSON/)jQuery 文档中的方法。

辛税：

`$.getJSON(url, data, function success);`

所以，你可以尝试这样的事情：

```
$.getJSON("http://gbrds.gbif.org/registry/organisation/a3c228d0-3110-11db-abb8-b8a03c50a862.json?op=contacts", null, function(data) {

      // loop in your result if it is an array
      $.each(data, function(i, item) {

         // use data[i].property to access each property of your array.
         // for sample:

         var p = data[i].position;
         var l = data[i].lastName;

      });​

   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:33:25.200

如果您从不同的架构/主机/端口组合（例如`https://gbrds.gbif.com:8080`）请求 URL，您的浏览器将由于违反[同源策略而引发安全异常](http://en.wikipedia.org/wiki/Same_origin_policy)

解决此问题的一种方法是，如果您可以实现jquery 也支持的[jsonp 。](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:36:30.827

您需要使用 JSONP，因为它不在同一个域中。

```
$.getJSON("http://gbrds.gbif.org/registry/organisation/a3c228d0-3110-11db-abb8-b8a03c50a862.json?op=contacts&callback=?", function(data) {
    console.log(data);
}); 
```

# actionscript-3 - 对孙子（子的子）元素的 ActionScript 引用

> ID：14754858
> 
> 赞同：1
> 
> 时间：2013-02-07T15:31:09.523
> 
> 标签：actionscript-3, parent-child, mxml, grandchild

假设我有一些基本的 MXML 设置，如下所示：

```
<Item id="parent">
    <Frame>
        <mx:Image/>
    </Frame>
</Item> 
```

如何通过将 Image 元素的属性称为父项的孙子（子项的子项）来引用它？我尝试将两个调用以菊花链方式连接到 getChildAt()，即：

```
parent.getChildAt(0).getChildAt(0) 
```

但我收到以下错误：

```
Error: Call to a possibly undefined method getChildAt through a reference with static type flash.display:DisplayObject. 
```

调用孙元素的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:34:05.773

`getChildAt()`函数返回一个 DisplayObject

[getChildAt()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getChildAt%28%29)

因此，您必须按如下方式进行类型转换。

```
DisplayObjectContainer(parent.getChildAt(0)).getChildAt(0) 
```

# sql - 使用直接广播从 SqlDataSource 中提取行会导致再次访问 SQL Server 吗？

> ID：14754859
> 
> 赞同：1
> 
> 时间：2013-02-07T15:31:12.630
> 
> 标签：sql, sql-server, vb.net

我正在寻找一种从`SqlDataSource`VB.NET 代码中的对象中提取数据的方法，但是查看我为此找到的代码让我相信 select 语句在`DirectCast`.

有谁知道这种用法是否会导致运行额外的 select 语句，即使`SqlDataSource`之前已经运行过？

我从中得到的帖子在这里：[如何在 VS 2008 中遍历与 SqlDataSource 控件关联的特定表的行？](https://stackoverflow.com/questions/2384709/how-can-i-iterate-through-row-of-particular-table-associated-with-sqldatasource)

这是代码：

```
Dim datareader = DirectCast(SqlDataSource2.[Select](DataSourceSelectArguments.Empty), SqlDataReader)

While datareader.Read()        
     Label2.Text = datareader("LastName").ToString()
End While
datareader.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:58:39.507

数据阅读器将从源中读取。

如果源是数据库，那么每次调用时读取器都会从数据库中读取`Read()`。

我不清楚你的[DirectCast](http://msdn.microsoft.com/en-us/library/7k6y2h6x%28v=vs.71%29.aspx)有什么用，或者你为什么使用它。

# mysql - MySQL 更新查询中的“FROM”错误

> ID：14754867
> 
> 赞同：1
> 
> 时间：2013-02-07T15:31:36.743
> 
> 标签：mysql, syntax

我正在使用 MySQL 工作台尝试从数据库中的现有表 (TNR) 中向现有表 (OS) 中的新列 (osTNR) 添加值。我从 Stack Overflow 上的另一个响应中获取了以下语法，但它仍然无法正常工作。

```
UPDATE OS
SET OS.osTNR = TNRs.TNR
FROM OS INNER JOIN TNRs
ON OS.osTerm = TNRs.thesaurusTerm; 
```

在我运行它之前，它会突出显示它不期望在此查询中出现“FROM”。当我运行它时，我得到：

> 错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 3 行的“FROM OS INNER JOIN TNRs ON OS.osTerm = TNRs.thesaurusTerm”附近使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:33:09.350

Try this query -

```
UPDATE OS
INNER JOIN TNRs
  ON OS.osTerm = TNRs.thesaurusTerm
SET
  OS.osTNR = TNRs.TNR; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:33:23.543

Try :

```
UPDATE OS 
INNER JOIN TNRs ON OS.osTerm = TNRs.thesaurusTerm
SET OS.osTNR = TNRs.TNR; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:35:23.680

尝试这个，

```
UPDATE OS, TNRs
SET OS.osTNR = TNRs.TNR
WHERE OS.osTerm = TNRs.thesaurusTerm; 
```

它肯定会奏效。这里`OS`和`TNRs`是表名。

# ios - uipageviewcontroller 内的 uiwebview 阻止点击以翻页

> ID：14754869
> 
> 赞同：2
> 
> 时间：2013-02-07T15:31:36.790
> 
> 标签：ios, objective-c, uiwebview, uigesturerecognizer, uipageviewcontroller

我在 uipageviewcontroller 中有一个 uiwebview，我希望能够在视图中选择一些文本，因此我将 userInteractionEnabled 设置为 YES，但是当我这样做时，我失去了通过点击翻页的选项，尽管滑动仍然可以正常工作。

在 UIWebview 上捕获 UITapReconizer 并将其传递给 UIPageviewController 的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:46:30.193

`UIPageviewController`[有财产](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)_`gestureRecognizers`

我的猜测是，如果它的手势识别器和你的 - 如果你使用一个 - 不能同时行动。您可以通过手势的方法来处理它，请参阅[处理多个 UITapGestureRecognizers 的问题](https://stackoverflow.com/questions/13866623/ios-multiple-tap-gesture-recognizers)，要求您的 webView 点击识别器失败以使 pageViewController 的点击成功。

像这样（未测试）

```
UILongPressGestureRecognizer *yourTapGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];

for(UIGesture *gesture in yourPageController.gestureRecognizers){
   [gesture requireGestureRecognizerToFail:yourTapGesture];
}

[pageControllerTap requireGestureRecognizerToFail:yourTapGesture]; 
```

另外，我不明白您为什么需要`userInteractionEnabled`，您是否`UIWebView`占用了所有空间？您可以将手势附加到 webView 的超级视图，并使用`locationInView:`方法测试 webView-hit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:12:21.607

我已经整理好了。

我在生成 uiwebview 的控制器中添加了一个手势识别器：

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc]
                                             initWithTarget:self action:@selector(handleGesture:)];
    tapRecognizer.numberOfTapsRequired = 1;
    tapRecognizer.delegate = self;
    [webView addGestureRecognizer:tapRecognizer]; 
```

和

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
    return NO;
 } 
```

并在 pageviewController 中添加：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

# java - 使用 eclipse RecordingCommand.doExecute 异常

> ID：14754872
> 
> 赞同：0
> 
> 时间：2013-02-07T15:31:43.657
> 
> 标签：java, exception, eclipse-emf, emf

我正在从 org.eclipse.emf.transaction.RecordingCommand 扩展类 RecordingCommand；并在方法中覆盖方法受保护的 void doExecute() 我可能有错误，所以我的问题是我该如何处理它？即抛出异常

```
@Override
protected void doExecute()
{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:53:24.880

如果异常来自内部调用，我建议：

```
protected void doExecute() {

   try {

    //do your logic

   } catch(Exception e) {
     throw e;
   } 
```

# xml - XML Schema xsd 禁止类型

> ID：14754874
> 
> 赞同：0
> 
> 时间：2013-02-07T15:31:47.460
> 
> 标签：xml, visual-studio-2010, visual-studio, xsd, xml-validation

由于我的 XSD 不适用于 Visual Studio 2010，我用它来生成一个。mine 和 Generated 之间的区别是层次结构？我使用 dtype 来调用 complexetypes。为什么那行不通？

视觉工作室版本：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" 
           elementFormDefault="qualified" 
           targetNamespace="top.xsd" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="top">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="child1">
          <xs:complexType>
            <xs:attribute name="attribute1" type="xs:string" />
          </xs:complexType>
        </xs:element>       
        <xs:element name="child2">
          <xs:complexType>
            <xs:attribute name="attribute2" type="xs:string" />
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

我个人觉得我的版本很整洁，但出现了一个错误，此时 type 不能用作参考：

```
<?xml version="1.0" encoding="utf-8"?>
  <xs:schema attributeFormDefault="unqualified" 
             elementFormDefault="qualified"
             targetNamespace="top.xsd" 
             xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="top">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="chield1" type="chield1" />
          <xs:element name="chield2" type="chield2" />
        </xs:sequence>
    </xs:element>
    <xs:complexType name="chield1">
      <xs:attribute name="attribute1" type="xs:string" />
    </xs:complexType>
    <xs:complexType name="chield2">
      <xs:attribute name="attribute2" type="xs:string" />
    </xs:complexType>
  </xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:37:11.210

第一个问题是您的模式文档格式不正确。

一旦提供了复杂类型 'top' 缺少的结束标记，下一个问题是您指的是已命名的类型`chield1`，并且`chield2`有时称为 null 命名空间。也就是说，它们的扩展名称不标识特定的命名空间；XSD 和许多其他规范将 null 命名空间视为只是另一个恰好没有名称的命名空间。

同时，您的模式文档在命名空间中声明了两种名为`chield1`和的类型。（顺便说一句，这不是一个好的命名空间名称——命名空间名称应该是绝对 URI，尽管出于复杂的原因，许多工具不强制执行此规则。）您对元素 chield1 和 chield2 的声明不指向这些类型。如果您希望他们这样做，则声明应说明如下：`chield2``top.xsd`

```
<xs:element name="chield1" 
            type="tns:chield1"
            xmlns:tns="top.xsd" />
<xs:element name="chield2" 
            type="tns:chield2"
            xmlns:tns="top.xsd" /> 
```

当然，在实践中，tns 的命名空间声明可以在元素声明的任何共同祖先上进行，而不是；一个常见的模式是把它放在模式元素上。

# python - 预计算 len(range(start, stop,step) )

> ID：14754877
> 
> 赞同：0
> 
> 时间：2013-02-07T15:31:51.177
> 
> 标签：python, indexing, slice

`range(start, stop, step)`在我实际调用它之前，如何计算调用会产生的元素数量。

上下文是我正在实现对对象的切片索引

```
def __init__(self, impl_object):
   self.impl=impl_object # the object that actually holds (or generates) an array of values
def __getitem__(self, key):
    if isinstance(key, slice):
         (start,stop,step)=key.indices( self.impl.numValues() )
         # It would be nice to know how many items I'm dealing with
         # here
    ...snip... 
```

我已经说服自己`step>0`
`len(range(start,stop,step))==(start-stop+step-1)/step`

但我不知道如何将其概括为负面步骤。

编辑：我要求（强烈希望）解决方案需要`O(1)`时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:33:37.710

最简单的方法是

```
len(xrange(start, stop, step)) 
```

`xrange.__len__`计算它会的元素数`yield`，而不在内存中构造范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T01:28:01.137

如果您的`start`, `stop`, 和与[特定于实现的限制](http://docs.python.org/2/library/functions.html#xrange)`step`一致（例如 CPython 2.x*要求*它们是“短”Python 整数），您可以通过调用来获取将包含的值的数量：[`xrange`](http://docs.python.org/2/library/functions.html#xrange)*`range(start, stop, step)`*

 *```
len(xrange(start, stop, step)) 
```

在后台，`xrange()`调用返回一个[xrange 对象](http://docs.python.org/2/library/stdtypes.html#typesseq-xrange)：

> XRange 对象的行为很少：它们只支持索引、迭代和 len() 函数。

`len()`调用是O(1)，因为xrange类型实现了根据`__len__`传递的参数计算的方法，`len()`发现传递给它的对象实现了`__len__`，调用它来获取长度。

如果您的`start`、`stop`和`step`可能无法与 一起使用`xrange()`，这里有一个函数（归功于在[Hacker News 讨论](https://news.ycombinator.com/item?id=4129658)的帮助下[使用 xrange 实现的博客文章](http://late.am/post/2012/06/18/what-the-heck-is-an-xrange)）：

```
def len_range(start, stop, step):
    return max(0, (stop - start) // step + bool((stop - start) % step)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:36:43.443

尝试使用 abs(step) 而不是 step。*

# android - 是否有适用于 iOS 和 Android 的 Cordova 日历插件？

> ID：14754878
> 
> 赞同：0
> 
> 时间：2013-02-07T15:31:52.520
> 
> 标签：android, ios, cordova

是否存在适用于 iOS 和 Android 的 Cordova 日历插件？另外，日历插件的优点/缺点是什么？如果没有适用于 Android 和 iOS 的插件，您有什么建议？

我想做的就是阅读本地日历事件。我不想创建事件，也不想在我的应用程序中呈现日历。我想要的只是某一天所有事件的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:23:46.710

我不知道是否已经有插件，但[请查看 TimeSquare for iOS](https://github.com/square/objc-TimesSquare)和[for Android](https://github.com/square/android-times-square)。您可以轻松地为此制作插件。

# c# - C# TCP socket连接，输出IP地址

> ID：14754882
> 
> 赞同：0
> 
> 时间：2013-02-07T15:32:11.723
> 
> 标签：c#, parsing, tcp, ip-address

几天前我提出了关于如何输出/解析 IP 地址的问题。提供了一些建议，经过几天我的头撞墙，尝试不同的建议，我没有进一步了。我确信这些建议是好的，但我试图利用它们的方法是我失败的地方。

所以...我想从一个基本的角度开始。

```
 {
        BaseClient bc = null;
        try
        {
            if (m_TCP_Socket == null)
            {
                Console.Write("Client disconnected");
            }
            else
            {   

                //Console.WriteLine("New TCP connection made.");

                bc = GetNewClient();
                bc.Socket = m_TCP_Socket.EndAccept(ar);
                lock (m_clients)
                    m_clients.Add(bc);

                bc.OnConnect();
                bc.BeginReceive();
            }
} 
```

}

我想让它简单地安慰一下，“建立了新的 TCP 连接。IP：###.###.###.###。如果你做出回应，请不要对我可能知道的事情自以为是，并且不知道，因为我是学生，并且正在努力学习东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:36:47.873

这一切都在手册中。[`Socket.EndAccept()`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.endaccept.aspx)返回 a [`Socket`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)，您可以从中读取[`RemoteEndPoint`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.remoteendpoint.aspx)将是 a 的属性[`IPEndPoint`](http://msdn.microsoft.com/en-us/library/system.net.ipendpoint.aspx)，该属性具有[`Address`](http://msdn.microsoft.com/en-us/library/system.net.ipendpoint.address.aspx)属性。我想你正在寻找后者。

# node.js - Mongoose 3.4.0 返回 [object Object] 而不是实际值 - Nodejs

> ID：14754889
> 
> 赞同：8
> 
> 时间：2013-02-07T15:32:37.417
> 
> 标签：node.js, mongoose

这是我的架构

```
var elementSchema = new Schema({
  name: String,
  storage: {
    url: String,
    type: String
  }
}); 
```

但是，当我：

```
var newElement = new Element();
  newElement.storage = {};
  newElement.storage.url = "asd";
  newElement.storage.type = "asd";
  console.log(newElement.storage); 
```

我明白`[object Object]`了，虽然它应该返回`{url:"asd",type:"asd"}`

事实上，如果我去查询它，我会得到：

```
{
  storage: "[object Object]",
  bubble: ObjectId("510880b82e6e350200000002"),
  _id: ObjectId("5113c0c0786ece0000000001"),
  __v: 0
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T15:46:51.923

要使用`type`在嵌入式子文档中命名的字段，例如`storage`，您必须使用显式定义，否则 Mongoose 会感到困惑：

```
var elementSchema = new Schema({
  name: String,
  storage: {
    url: String,
    type: { type: String }
  }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-07T15:34:52.340

不使用`console.log()`，改为使用

```
var util = require('util');
util.inspect(newElement.storage); 
```

# matlab - Matlab - 带有...结束结构

> ID：14754898
> 
> 赞同：4
> 
> 时间：2013-02-07T15:33:12.717
> 
> 标签：matlab

Matlab 是否有一种 with...end 命令？[http://msdn.microsoft.com/en-us/library/wc500chb(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/wc500chb(v=vs.80).aspx)

我的工作区中有一个变量，其中包含大量嵌套数据。现在我不想一直输入这个：

```
Root.ChildLevel1.A = Root.ChildLevel1.B + Root.ChildLevel1.C 
```

而是类似的东西：

```
with Root.ChildLevel1
  A = B + C
end 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:36:31.407

我不知道 Matlab 中有这样的功能。
你能做的是

```
cur = Root.ChildLevel1;
cur.A = cur.B + cur.C; 
```

**编辑：**
根据@Nick 的评论，如果`Root.ChildLevel1`不是**的** [子类`handle`](http://www.mathworks.com/help/matlab/ref/handle.html)，则应添加以下行：

```
Root.ChildLevel1 = cur; 
```

我也建议

```
clear cur; 
```

在末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:44:24.167

我不得不说我不建议经常使用这个函数，但我曾经尝试过一个 FEX 贡献，它可以让你解压结构。

当然，这仍然需要您在完成计算后更新结构，所以我只将它用于主要使用结构作为输入的子函数。

我不确定，但我认为这是我尝试过的：

[http://www.mathworks.com/matlabcentral/fileexchange/26216-structure-fields-to-variables](http://www.mathworks.com/matlabcentral/fileexchange/26216-structure-fields-to-variables)

# weblogic - WebLogic 暂存模式会影响运行时性能吗？

> ID：14754901
> 
> 赞同：0
> 
> 时间：2013-02-07T15:33:20.537
> 
> 标签：weblogic

作为一个一般性问题，是否有任何理由将暂存模式设置为“nostage”而不是“stage”会导致性能下降？我最初使用“stage”模式，但在重新部署出现一些问题后，我决定尝试“nostage”。这导致应用程序的执行速度几乎慢了两倍。在控制台中将暂存模式切换回“阶段”后，减速消失了。

我的印象是暂存模式仅“确定如何将部署文件提供给目标服务器”（来自 Oracle 文档页面），并且不会影响运行时。这是正常行为吗？我无法找到有关暂存模式和运行时性能之间任何链接的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:43:16.040

Stage 或 nostage 不应影响运行时性能。如果没有进一步的信息，我很难找出可能导致性能下降的原因，但我可以建议的一件事是切换回暂存模式，如果这似乎可以在你找出根本原因之前给你带来更好的性能。至于您在回答中提到的重新部署问题，您没有提供任何详细信息，但我想这可能与 WLS 仍在拾取旧文件而不是新文件有关。您可以在部署期间执行一些额外的步骤来解决该问题

1.  取消部署您的应用
2.  关闭整个域
3.  删除每个托管服务器下的 tmp/stage/cache 目录
4.  启动域中的服务器
5.  进行新的部署。

当然，这听起来很麻烦，但您可以将所有这些自动化到您的部署脚本中。

# javascript - Tinymce 没有正确显示 html？

> ID：14754907
> 
> 赞同：2
> 
> 时间：2013-02-07T15:33:26.603
> 
> 标签：javascript, struts2, tinymce, wysiwyg

我有以下来自服务器的内容，我在附有tinymce的textarea下显示

```
&lt;p&gt;Test1&lt;/p&gt;
&lt;p&gt;Test2&lt;/p&gt; 
```

我在浏览器中看到带有以下 p 标签

```
<p>Test1</p> <p>Test2</p> 
```

虽然它应该显示为

```
Test1

Test2 
```

**我不确定我在这里缺少什么？我在 firebug 控制台中看不到任何错误。当我从 firebug 检查我的 textarea 时，它 textarea 与 tinymce 正确连接，但不知何故没有以正确的格式显示 html 内容？**我正在使用 struts 2 textArea 即

这是我的tinymce配置：-

```
function attachTinyMCE() {
         tinyMCE.init({
         mode: "textareas",
         theme: "advanced",
         plugins: "preview",
         readonly: true,
         theme_advanced_buttons1: "forecolor,backcolor,|,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,|,formatselect,fontselect,fontsizeselect,sub,sup,|,bold,italic,underline,strikethrough",
         theme_advanced_buttons2: "",
         theme_advanced_toolbar_location: "top",
         theme_advanced_toolbar_align: "left",
         theme_advanced_statusbar_location: "bottom",
         theme_advanced_path: false,
         theme_advanced_resizing: true,
         entity_encoding: "raw"
      });
     } 
```

**更新：-**如果我从服务器发送以下内容，即

```
 <p>Test1</p>

 <p>Test2</p> 
```

代替

```
&lt;p&gt;Test1&lt;/p&gt;
&lt;p&gt;Test2&lt;/p&gt; 
```

它在tinymce中正确显示，即

```
Test1

Test2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:37:27.560

`&lt;p&gt;`被视为编辑器的字符串 onInit。如果您希望它被评估为一个标签，您需要 在初始化编辑器之前`&lt;p&gt;`用etc... 替换。`<`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:57:13.227

我得到了这个问题。实际上是struts 2标签进行了html转义。

# javascript - How to create a function to check for property of an object in javascript, and set it if it's not there

> ID：14754908
> 
> 赞同：0
> 
> 时间：2013-02-07T15:33:28.570
> 
> 标签：javascript, function, object

I have this code...

```
var suitcase = {
    shirt: "Hawaiian"
};

var checkProp = function(obj, prop, val){
if(obj.hasOwnProperty(prop)){
    console.log(obj.prop);
} else {
    obj.prop = val;
    console.log(obj.prop);
}
};
checkProp("suitcase","shorts","blue"); 
```

and when I run it, it returns undefined. On the surface it looks fine. No syntax problems or similar things like that. What would I have to do to get this to work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:34:36.007

`suitcase` is a var, not a string. Instead, it should read

```
checkProp(suitcase,'shorts','blue'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:37:03.213

您有几个不同的选择，但我认为您的解决方案可能有效。它只是有一个小错误。在您调用您的函数时：

```
checkProp('suitcase', 'shorts', 'blue); 
```

`"suitcase"`当它应该是一个对象时，您已将其定义为一个字符串。尝试修复它，看看它是否有效。

**编辑：**

您可以尝试的另一个选择是：

```
var checkProp = function(obj, prop, val){
    if(obj) {
        if(!obj[prop]) {
            obj[prop] = val;
        }
        if(window.console && window.console.log) {
            console.log(obj[prop]);
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:38:31.787

```
var suitcase = {
    shirt: "Hawaiian"
};

var checkProp = function(obj, prop, val){
    if(obj.hasOwnProperty(prop)){
        console.log(obj[prop]);
    } else {
        obj[prop] = val;
        console.log(obj[prop]);
    }
};
checkProp(suitcase,"shorts","blue"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:34:59.260

通过它`Object`本身，而不是它的名字：

```
checkProp(suitcase,"shorts","blue"); 
```

另外，使用`obj[prop]`代替`obj.prop`.
（使用`obj.prop`，您访问的`prop`是对象的属性，字面意思，而不是您要查找的属性。）

除此之外，您的代码有效。不过，它可以像这样缩短：

```
var checkProp = function(obj, prop, val){
    obj[prop] = obj[prop] || val; // If obj[prop] exists, set it to itself (does nothing), otherwise, set it's content to `val`.
    console.log(obj.prop);
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T15:35:27.643

你想要的可能是 obj[prop] 而不是 obj.prop

# css - 引导程序：按钮太高

> ID：14754909
> 
> 赞同：4
> 
> 时间：2013-02-07T15:33:28.847
> 
> 标签：css, twitter-bootstrap

我有一个`legend`包含我的按钮`pull-right`。不幸的是，按钮太高了。请看[这里](http://jsfiddle.net/zF5ny/)的小提琴。

```
<div class="container">
    <div class="row pane" id="statistics-pane" style="">
        <legend>Network<span class="btn btn-mini pull-right">Test</span>
        </legend>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:46:29.027

我会将 pull-right 类与您的按钮分开，并包装在一个 div 中，例如

```
<div class="container">
    <div class="row pane" id="statistics-pane" style=""> 
        <legend>Network
            <div class="pull-right">
                <span class="btn btn-mini">Test</span>
            </div>
        </legend>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:43:54.303

也许给它一个最高利润来把它推低一点？

```
legend .btn {
    margin-top: 10px;
} 
```

# ruby-on-rails - Each statement inside another each malfunctions?

> ID：14754912
> 
> 赞同：2
> 
> 时间：2013-02-07T15:33:32.267
> 
> 标签：ruby-on-rails, ruby, sketchup

I'm coding a Google sketchup plugin with Ruby, and I faced a little problem. I have an array containing descriptions of every point like:

```
desc_array = ["anna ", "anna 45", "anna689", "anna36", "anna 888", "anna ",...] 
```

The array containing every point's coordinates is:

```
todraw_su = [
  [-16.23317, -16.530533, 99.276929],
  [-25.142825, -12.476601, 99.237414],
  [-32.716122, -5.92341, 99.187951],
  [-38.964589, 4.181119, 99.182358],
  [-41.351064, 18.350418, 99.453714],
  [-40.797511, 33.987519, 99.697253],
  ...
] 
```

I want to add a text in Google sketchup for each point. According to the Sketchup API this can be done by:

```
Sketchup.active_model.entities.add_text "This is the text", [x, y, z] 
```

I tried:

```
todraw_su.each {|todraw| desc_array.each {|desc| Sketchup.active_model.entities.add_text desc,todraw }} 
```

But, it gave me something unexpected, as it returns all the elements in `desc_array` for every element in `to_draw`.

What I want is every element in `desc_array` for every element in `to_draw`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:42:01.340

```
[desc_array, todraw_su].transpose.each do |desc, coord|
  # ...
end 
```

你也可以这样做`#zip`...

```
desc_array.zip(todraw_su).each do |desc, coord|
  # ...
end 
```

使用*#zip*技术，结果将始终具有第一个数组的维度，并根据需要将第二个截断或填充为零。这可能是也可能不是 TRT。在这种情况下， Transpose 会引发*IndexError*。

# ruby-on-rails - Hartl Tutorial chapter 10 Factory Girl error - factory not registered: micropost

> ID：14754919
> 
> 赞同：-1
> 
> 时间：2013-02-07T15:33:53.903
> 
> 标签：ruby-on-rails, factory-bot

I am getting this error in relation to: "Authentication authorization in the Microposts controller submitting to the destroy action"

spec/requests.authentication_pages_spec.rb:119

The only solutions I have seen to this involve restarting the rails server and/or spork (which I am not using) have restarted the server though.

git://github.com/princeofburma/sample_app.git

spec/requests.authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1', text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_error_message }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_error_message }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Users', href: users_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email", with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do
          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end

          describe "when signing in again" do
            before do
              click_link "Sign out"
              click_link "Sign in"
              fill_in "Email", with: user.email
              fill_in "Password", with: user.password
              click_button "Sign in"
            end

            it "should render the default (profile) page" do
              page.should have_selector('title', text: user.name)
            end
          end
        end
      end

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
          it { should have_selector('div.alert.alert-notice') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end

        describe "visiting the user index" do
          before { visit users_path }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "visiting the following page" do
          before { visit following_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "visiting the followers page" do
          before { visit followers_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end
      end
    end

    describe "in the Microposts controller" do

      describe "submitting to the create action" do
        before { post microposts_path }
        specify { response.should redirect_to(signin_path)}
      end

      describe "submitting to the destroy action" do
        before { delete micropost_path(FactoryGirl.create(:micropost)) }
        specify { response.should redirect_to(signin_path) }
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: 'Edit user') }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end

    describe "as non-admin user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:non_admin) { FactoryGirl.create(:user) }

      before { sign_in non_admin }

      describe "submitting a DELETE request to the Users#destroy action" do
        before { delete user_path(user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

Here is my factories.rb file

```
 FactoryGirl.define do
  factory :user do
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}   
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end
  end

  factory :micropost do
    content "Lorem ipsum"
    user
  end
end 
```

here is the spec_helper.rb

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end 
```

ran the FactoryGirl.create(:micropost) from the test console and got:

```
irb(main):002:0> FactoryGirl.create(:micropost)
ArgumentError: Factory not registered: micropost
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4
.1.0/lib/factory_girl/registry.rb:24:in `find'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4
.1.0/lib/factory_girl/decorator.rb:10:in `method_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4
.1.0/lib/factory_girl.rb:71:in `factory_by_name'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4
.1.0/lib/factory_girl/factory_runner.rb:12:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4
.1.0/lib/factory_girl/strategy_syntax_method_registrar.rb:19:in `block in define
_singular_strategy_method'
        from (irb):2
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9
/lib/rails/commands/console.rb:47:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9
/lib/rails/commands/console.rb:8:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9
         from script/rails:6:in `require
 from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:08:10.690

我认为您的问题出在您的 spec_helper.rb 中，看看它如何管理工厂定义 [https://gist.github.com/scottvrosenthal/1724370](https://gist.github.com/scottvrosenthal/1724370) 我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:08:24.177

我下载了您的项目，但没有收到该错误。我在您的应用程序中看到的唯一问题是您的模型中没有`remember_token`方法。`User`

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :remember_token
  ...
  private

    def create_remember_token
      # NoMethodError: undefined method `remember_token=' for User
      self.remember_token = SecureRandom.urlsafe_base64 
    end
end 
```

# ruby-on-rails - Ruby self in method chain

> ID：14754925
> 
> 赞同：1
> 
> 时间：2013-02-07T15:34:15.337
> 
> 标签：ruby-on-rails

I have defined two scope-like methods on a model:

```
def self.foo var
  where(foo: var)
end

def self.bar var
  where(bar: var)
end 
```

I want to be able to pass nil to one of these methods and have it effectively be ignored. So:

```
var1 = 10
var2 = nil
# ...
Model.foo(var1).bar(var2) 
```

I've tried various things such as:

```
def self.bar var
  return self if var.nil?
  where(bar: var)
end 
```

but in the above instance, `self` doesn't return what this method has been passed from the previous method in the chain, it returns `Model`, therefore I lose all the legwork done in `foo`.

How can I achieve what I'm trying?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:03:27.587

`all`将实际**运行查询而不是返回一个`ActiveRelation`**对象，该对象用于在查询实际需要返回结果时（例如：当您实际运行时`each`）延迟加载查询。否则，它根本不执行查询，为您节省了对数据库的调用。它还允许您基本上在这里尝试实现的良好链接。

你可能想尝试的是

```
def self.bar(val)
  return where({}) if val.nil?
  where(:bar => val)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:49:32.707

我相信rails 3.x，你应该能够使用这样的东西：

```
return self.scoped if var.nil? 
```

在 rails 4.x 中，您需要将其更改为：

```
return self.all if var.nil? 
```

基本上，'scoped'（和 rails 4 中的'all'）返回一个关系对象，您可以将其与其他 arel 方法链接起来，而无需实际对其应用任何条件。

# javascript - two delimiters output formatting javascript

> ID：14754926
> 
> 赞同：0
> 
> 时间：2013-02-07T15:34:23.170
> 
> 标签：javascript, jquery, recursion, split

I thought this would be easier, but running into a weird issue. I want to split the following:

```
theList = 'firstword:subwordone;subwordtwo;subwordthree;secondword:subwordone;thirdword:subwordone;subwordtwo;'; 
```

and have the output be

```
firstword
    subwordone
    subwordtwo
    subwordthree
secondword
    subwordone
thirdword
    subwordone
    subwordtwo 
```

The caveat is sometimes the list can be

```
theList = 'subwordone;subwordtwo;subwordthree;subwordfour;' 
```

ie no ':' substrings to print out, and that would look like just

```
 subwordone
    subwordtwo
    subwordthree
    subwordfour 
```

I have tried variations of the following base function, trying recursion, but either get into infinite loops, or undefined output.

```
function getUl(theList, splitOn){
    var r = '<ul>';
    var items = theList.split(splitOn);

    for(var li in items){
        r += ('<li>'+items[li]+'</li>');
    }
    r += '</ul>';
    return r;
} 
```

The above function is just my starting point and obviously doesnt work, just wanted to show what path I am going down, and to be shown the correct path, if this is totally off base.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:39:48.203

看来您需要两种情况，两者之间的区别在于`:`您的字符串中是否有 a 。

```
if(theList.indexOf(':') == -1){
    //Handle the no sublist case
} else {
    //Handle the sublist case
} 
```

从没有子列表的情况开始，我们开发了简单的模式：

```
var elements = theList.split(';');
for(var i = 0; i < elements.length; i++){
    var element = elements[i];
    //Add your element to your list
} 
```

最后，我们应用相同的模式来提出子列表案例的实现：

```
var elements = theList.split(';');
for(var i = 0; i < elements.length; i++){
    var element = elements[i];
    if(element.indexOf(':') == -1){
        //Add your simple element to your list
    } else {
        var innerElements = element.split(':');

        //Add innerElements[0] as your parent element

        //Add innerElements[1] as your child element

        //Increment i until you hit another element with ':', adding the single elements each increment as child elements.

        //Decrement i so it considers the element with the ':' as a parent element.

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:49:43.370

以下代码段根据您的要求显示列表

```
 var str  = 'subwordone;subwordtwo;subwordthree;';
    var a = []; var arr = [];
    a = str;
    var final = [];

    function split_string(a){

        var no_colon = true;

        for(var i = 0; i < a.length; i++){

    if(a[i] == ':'){
    no_colon = false;
    var temp;
    var index = a[i-1];
    var rest = a.substring(i+1);
    final[index] = split_string(rest);
    return a.substring(0, i-2);
    }

    } 

    if(no_colon) return a;

    }

    function display_list(element, index, array) {
        $('#results ul').append('<li>'+element+'</li>');
    }

    var no_colon_string = split_string(a).split(';');

    if(no_colon_string){
        $('#results').append('<ul><ul>');
    }
    no_colon_string.forEach(display_list);

    console.log(final); 
```

在这里工作**[小提琴](http://jsfiddle.net/VjacF/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:53:23.847

跟踪当前列表以添加项目，并在项目中找到冒号时创建一个新列表：

```
var baseParent = $('ul'), parent = baseParent;
$.each(theList.split(';'), function(i, e) {
  if (e.length) {
    var p = e.split(':');
    if (p.length > 1) {
      baseParent.append($('<li>').append($('<span>').text(p[0])).append(parent = $('<ul>')));
    }
    parent.append($('<li>').text(p[p.length - 1]));
  }
}); 
```

演示：http: [//jsfiddle.net/Guffa/eWQpR/](http://jsfiddle.net/Guffa/eWQpR/)

演示：http `"1;2;3;4;"`: [//jsfiddle.net/Guffa/eWQpR/2/](http://jsfiddle.net/Guffa/eWQpR/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:54:01.510

可能有一个更优雅的解决方案，但这可以解决问题。（**见下面的编辑**）

```
function showLists(text) {
    // Build the lists
    var lists = {'': []};
    for(var i = 0, listKey = ''; i < text.length; i += 2) {
        if(text[i + 1] == ':') {
            listKey = text[i];
            lists[listKey] = [];
        } else {
            lists[listKey].push(text[i]);
        }
    }

    // Show the lists
    for(var listName in lists) {
        if(listName) console.log(listName);

        for(var j in lists[listName]) {
            console.log((listName ? '    ' : '') + lists[listName][j]);
        }
    }
} 
```

**编辑** 您可以采取的另一种有趣的方法是首先将其分成几个部分（假设`text`等于您给出的示例之一）：

```
var lists = text.match(/([\w]:)?([\w];)+/g); 
```

然后你把问题分解成更简单的部分

```
for(var i = 0; i < lists.length; i++) {
    var listParts = lists[i].split(':');
    if(listParts.length == 1) {
        console.log(listParts[0].split(';').join("\n"));
    } else {
        console.log(listParts[0]);
        console.log('    ' + listParts[1].split(';').join("\n    "));
    }
} 
```

# javascript - jQuery animation stopping in an incomplete state on Mac using Chrome

> ID：14754929
> 
> 赞同：0
> 
> 时间：2013-02-07T15:34:33.250
> 
> 标签：javascript, jquery, macos, google-chrome, animation

I've got a strange problem that's being reported when using a site I'm working on. There's a jQuery animation that appears to "stop" in an incomplete state. The site is [www.snopsize.com](http://www.snopsize.com) and the problem occurs when you hit the big yellow carat next/back icons. Ideally, the next item should animate into view in the list.

This works on every device I have access to (a bunch of PCs running Chrome, Safari, IE, and Firefox), but I'm hearing reports that the animation just hangs halfway through and the views end up sitting stuck halfway between the next and the previous, and trying to move through the list just keeps animating to strange halfway points.

The code driving the animation is really simple:

```
$("#snop_container").stop(true, true).animate({left: '-=' + snop_width}); 
```

and

```
$("#snop_container").stop(true, true).animate({left: '+=' + snop_width}); 
```

for next and back. The snop_width is set to 775px and never changes. I'm really perplexed that this seems to work on everything I have access to but seems to fail occasionally given a certain Mac setup. I have no idea what could be happening, but any advice whatsoever would be greatly appreciated!

# matplotlib - matplotlib values under cursor

> ID：14754931
> 
> 赞同：31
> 
> 时间：2013-02-07T15:34:40.393
> 
> 标签：matplotlib

I'm using `matplotlib.imshow` to get an interactive display of a 2D array. The x/y coordinate under the cursor is displayed at the bottom left of the window. Is it possible to also get the value of the array under the cursor as well?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-07T15:55:17.430

您只需要重新分配`ax.format_coord`. 请参阅文档中的[此示例](http://matplotlib.org/examples/api/image_zcoord.html)。

（直接从示例中提取的代码）

```
"""
Show how to modify the coordinate formatter to report the image "z"
value of the nearest pixel given x and y
"""
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

X = 10*np.random.rand(5,3)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(X, cmap=cm.jet, interpolation='nearest')

numrows, numcols = X.shape
def format_coord(x, y):
    col = int(x+0.5)
    row = int(y+0.5)
    if col>=0 and col<numcols and row>=0 and row<numrows:
        z = X[row,col]
        return 'x=%1.4f, y=%1.4f, z=%1.4f'%(x, y, z)
    else:
        return 'x=%1.4f, y=%1.4f'%(x, y)

ax.format_coord = format_coord
plt.show() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-21T15:04:02.143

我需要一些可以重复使用的东西，所以我通过一个类封装了解决方案：

```
#!/usr/bin/env python2
# -*- coding: utf-8 -*-

import numpy as np
class imshow_show_z:

    def __init__(self, ax, z, x, y):
        self.ax = ax
        self.x  = x
        self.y  = y
        self.z  = z
        self.dx = self.x[1] - self.x[0]
        self.dy = self.y[1] - self.y[0]
        self.numrows, self.numcols = self.z.shape
        self.ax.format_coord = self.format_coord
    def format_coord(self, x, y):
        col = int(x/self.dx+0.5)
        row = int(y/self.dy+0.5)
        #print "Nx, Nf = ", len(self.x), len(self.y), "    x, y =", x, y, "    dx, dy =", self.dx, self.dy, "    col, row =", col, row
        xyz_str = ''
        if ((col>=0) and (col<self.numcols) and (row>=0) and (row<self.numrows)):
            zij = self.z[row,col]
            #print "zij =", zij, '  |zij| =', abs(zij)
            if (np.iscomplex(zij)):
                amp = abs(zij)
                phs = np.angle(zij) / np.pi
                if (zij.imag >= 0.0):
                    signz = '+'
                else:
                    signz = '-'
                xyz_str = 'x=' + str('%.4g' % x) + ', y=' + str('%.4g' % y) + ',' \
                            + ' z=(' + str('%.4g' % zij.real) + signz + str('%.4g' % abs(zij.imag)) + 'j)' \
                            + '=' + str('%.4g' % amp) + r'*exp{' + str('%.4g' % phs) + u' π j})'
            else:
                xyz_str = 'x=' + str('%.4g' % x) + ', y=' + str('%.4g' % y) + ', z=' + str('%.4g' % zij)
        else:
            xyz_str = 'x=%1.4f, y=%1.4f'%(x, y)
        return xyz_str

def new_imshow(ax, x, y, z, *args, **kwargs):
    assert(len(x) == z.shape[1])
    assert(len(y) == z.shape[0])
    dx = x[1] - x[0]
    dy = y[1] - y[0]
    if (np.iscomplex(z).any()):
        zabs = abs(z)
    else:
        zabs = z
    # Use this to center pixel around (x,y) values
    extent = (x[0]-dx/2.0, x[-1]+dx/2.0, y[0]-dy/2.0, y[-1]+dy/2.0)
    # Use this to let (x,y) be the lower-left pixel location (upper-left when origin = 'lower' is not used)
    #extent = (x[0]-dx/2.0, x[-1]+dx/2.0, y[0]-dy/2.0, y[-1]+dy/2.0)
    im = ax.imshow(zabs, extent = extent, *args, **kwargs)
    imshow_show_z(ax, z, x, y)
    ax.set_xlim((x[0], x[-1]))
    ax.set_ylim((y[0], y[-1]))
    return im 
```

示例用法：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(-5, 10, 100)
y = np.linspace(-2.0, 5, 51)
xx, yy = np.meshgrid(x, y)
Z = np.sin(xx**2 + yy**2) / (xx**2 + yy**2)

fig = plt.figure()
ax = fig.add_subplot(1,1,1)
im = new_imshow(ax, x, y, Z, aspect = 'auto', origin = 'lower', interpolation = 'nearest')
ax.set_xlabel('x')
ax.set_ylabel('y')

plt.show() 
```

特征：

*   可以显示浮点数和复数。对于复数，显示实部+虚部和极坐标形式。
*   将根据*x*和*y*数组为您设置范围。请注意，matplotlib 示例仅在您不使用 extent 关键字时才有效。
*   像素以它们的*(x,y)*位置为中心，而不是*(x,y)*是左下（或上）位置。

# iphone - Repeat (Loop) UIButton besides Play button

> ID：14754935
> 
> 赞同：1
> 
> 时间：2013-02-07T15:34:48.877
> 
> 标签：iphone, ios6, uibutton, avaudioplayer

Basically in app have a play button for audio file, want to add another UIButton Besides Play button so that whenever it is pressed it will repeat audio file for some number of times or may be infinite until it is pressed again to stop repetition of playing audio file. How can this be achieved.

Below is the code for play/pause toggle button

```
_playButton = [UIButton buttonWithType:UIButtonTypeCustom];
[_playButton addTarget:self action:@selector(playAction:) forControlEvents:UIControlEventTouchUpInside];
_playButton.frame = CGRectMake(80, 40, 25, 25);
[_playButton setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateNormal];
[_playButton setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateSelected];
UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:_playButton];

// Get the file path to the song to play.
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Theme"ofType:@"mp3"];

// Convert the file path to a URL.
NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:filePath];

//Initialize the AVAudioPlayer.
player = [[AVAudioPlayer alloc]
          initWithContentsOfURL:fileURL error:nil];
player.delegate = self;

- (void)playAction:(id)sender
{
    if([player isPlaying])
    {
        [sender setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateSelected];
        [player pause];
        //[timer invalidate];
        //timer = nil;
        //[self pauseTimer];
    }else{
        [sender setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateNormal];
        [player play];
        slidertimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(updateProgressBar:) userInfo:nil repeats:YES];
        [[NSRunLoop mainRunLoop] addTimer:slidertimer forMode:NSRunLoopCommonModes];
        timer = slidertimer;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:45:31.513

我终于像这样解决了

```
 -(void) RepeatAction:(id)sender{

if (player && player.playing) {

    [player stop];

    player = nil;

    [_playButton setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateNormal];

    return;
}

// Get the file path to the song to play.

NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Theme"ofType:@"mp3"];

// Convert the file path to a URL.

NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:filePath];

//Initialize the AVAudioPlayer.

player = [[AVAudioPlayer alloc]
          initWithContentsOfURL:fileURL error:nil];

player.delegate = self;

    player.numberOfLoops = -1;

   [player play];

} 
```

现在我面临的唯一问题是播放/暂停切换按钮受到干扰。如何解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:18:25.280

看起来您只需要每 x 秒执行一次操作。您可以将 UIButton 正在执行的代码移动到一个方法中，然后让 NSTimer 循环执行该方法 n 次，然后在完成后使 NSTimer 无效。

# jquery - jQuery 背景图片位置

> ID：14754945
> 
> 赞同：0
> 
> 时间：2013-02-07T15:35:32.077
> 
> 标签：jquery, css, background, background-position

我不知道如何将背景图像移出它的容器。

我有一个 960 宽度的容器，居中。然后我在容器中有一个横幅，我需要在横幅后面的另一层上有一个图像，但左边距为：-100px，但使用 CSS 它不起作用，因为背景图像不能移出它们的容器。我怎么能用 jQuery 做到这一点，或者有人知道用 CSS 做的语义正确的解决方法吗？

提前致谢。

编辑： http: [//i49.tinypic.com/s5wzmp.png](http://i49.tinypic.com/s5wzmp.png)这基本上就是我需要的样子，红色是背景图像，需要从横幅区域后面“达到峰值”，两者都在 960px 内容器。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style>
body { background: #000;padding: 0; margin: 0; }
.home-spot { width: 950px; height: 400px; background: #fff; margin: 0 auto; }
.image { background: url('image.png') no-repeat; height: 200px; width: 100%;  }
.banner { background: #98cb4c; height: 180px; }
</style>
</head>

<body>
    <div class="home-spot">
        <div class="image">
            <div class="banner">
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:02:40.303

我已经成功了！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style>
body { background: #000;padding: 0; margin: 0; }
.home-spot { width: 950px; height: 400px; background: #fff; margin: 0 auto; }
.image { background: url('image.png') no-repeat; height: 200px; width: 200px; position: absolute; margin-left: -100px; }
.banner { background: #98cb4c; height: 200px; width: 950px; margin-left: 100px; }
</style>
</head>

<body>
<div class="home-spot">
    <div class="image">
        <div class="banner">

        </div>

    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:37:06.267

为什么不直接删除背景图像，这样您就可以通过元素看到它背后的内容。如果您是通过 javascript 执行此操作，则将其移出视图与仅将其删除几乎没有区别。

**编辑**

我想我现在明白了。您的红色图像块需要定位为绝对值并将左侧值设置为 -100px 或其他值。然后它将浮动在它的第一个父块之外，具有除静态之外的定义位置。

这就是你想要的我认为：

[http://jsfiddle.net/UF3nd/](http://jsfiddle.net/UF3nd/)

```
<div id="main">
    <div id="wrap">
        <div id="banner">
            <div id="peak">
                I'm in back
            </div>
            I'm in front
        </div>
    </div>
</div>

#banner {
    background: orange;
    position: relative;
    width: 100%;
    height: 50px;
}
#peak {
    background: green;
    width: 50px;
    height: 50px;
    position: absolute;
    left: -50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:51:44.593

这是您可以做您想做的事情的一种方法：

[http://jsfiddle.net/BuAQC/1/](http://jsfiddle.net/BuAQC/1/)

的HTML：

```
<div class="full-width">
    <div class="width-960">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis at convallis urna. Proin id pharetra erat. Etiam fringilla sem sed leo ullamcorper sed ornare odio porttitor. Nulla ullamcorper, diam at fermentum egestas, enim nisl dapibus turpis, a sodales leo enim consequat augue. Praesent vel dapibus mauris. Fusce ut sem quis dolor condimentum accumsan in eget ipsum. Curabitur placerat molestie justo, sit amet viverra lectus euismod id. Etiam leo elit, iaculis sit amet imperdiet consectetur, mollis vitae metus. Aliquam sodales adipiscing tortor, sed venenatis velit ullamcorper non. Morbi accumsan posuere quam non dictum. Cras libero leo, adipiscing non convallis vitae, eleifend ut odio. Praesent convallis lectus sollicitudin risus dapibus laoreet.</p>
    </div>
</div> 
```

CSS：

```
.full-width {
    background-color: #333;
}

.width-960 {
    background: #dcdcdc;
    width: 920px;
    padding: 20px;
    margin: 0 auto;
} 
```

# sql - oracle查询分支情况

> ID：14754949
> 
> 赞同：0
> 
> 时间：2013-02-07T15:35:34.587
> 
> 标签：sql, oracle, case

我有几个表如下

```
orders table
-----------------------------
 id_order         no_order
-----------------------------
   1               0000001
   2               0000002
   3               0000003
-----------------------------

item_order table
-------------------------------------------
 id_item_order    id_order   product_name
-------------------------------------------
    1               2         Product X
    2               2         Product Y
    3               2         Product Z
    4               2         Product W
-------------------------------------------

faktur_pemuatan table
-------------------------------------------
 id_faktur_pemuatan     id_item_order
-------------------------------------------
  1                      1
------------------------------------------- 
```

如上表所示，订单中的 item_order 很少。如果 item_order 表中的数据不包含在 faktur_pemuatan 表中，则会出现订单 id_item_order item_order 为 1、2、3、4 的数据，但如果 faktur_pemuatan 表中包含 item_order 中的任何数据，例如。item_order id_item_order eg '1' 已包含在表 faktur_pemuatan 中，则数据不会显示订单。如何解决这个问题，应该使用什么分支 if 或 case，如果是如何查询上述问题。请帮我。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:40:15.833

尝试这个：

```
SELECT
    O.*, I.*
FROM orders O
    JOIN item_order I
        ON O.id_order = I.id_order
    LEFT JOIN faktur_pemuatan F
        ON I.id_item_order = F.id_item_order
WHERE F.id_faktur_pemuatan IS NULL 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!4/5c08b/3)**

# excel - 如何停止关闭excel，直到使用vb脚本满足验证

> ID：14754951
> 
> 赞同：1
> 
> 时间：2013-02-07T15:35:39.310
> 
> 标签：excel, excel-2010, vba

我想对列进行验证。验证是 X 应该从 0 开始。

输入数据并关闭 Excel 工作表时，它应该会抛出一条错误消息，指出数据不正确，并且除非我更正数据，否则它不应该让我关闭。

我已将代码放在关闭前。如果数据不正确，它会显示错误消息，但在我们更改不正确的数据之前关闭。

还尝试了保存前。发现的行为相同。

任何帮助或建议表示赞赏。

谢谢， Jaya Vignesh Kannan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:58:58.093

我相信 Workbook_Before_Close 宏有一个“取消”参数。然后你可以做这样的事情：

```
Dim isValid As Boolean

' Calculate isValid however you'd like

If Not isValid Then
    MsgBox "This is my invalid message!"
    Cancel = True 'Cancel workbook close
End If 
```

# sql - 从表中的特定行中选择最后十项

> ID：14754952
> 
> 赞同：0
> 
> 时间：2013-02-07T15:35:46.310
> 
> 标签：sql, tsql, ssms

我认为对于有数据库查询经验的人来说，这应该是一个非常简单的问题

我有一张桌子

```
Line_ID Run_Date    Product_ID  Pallet_Cd   Run_Qty
1   2012-10-31 01:00:00.000 175 00801004718000000002    0
1   2012-11-28 12:38:01.340 6   00801004718000000003    72
1   2012-11-28 13:32:25.250 4   00801004718000000004    180
1   2012-11-28 17:03:30.937 8   00801004718000000005    72
1   2012-11-29 07:29:58.603 1   00801004718000000006    120
1   2012-11-29 08:03:10.597 6   00801004718000000007    72
1   2012-11-29 08:24:11.370 4   00801004718000000008    180
1   2012-11-30 11:21:56.253 6   00801004718000000009    72 
```

请原谅格式，但希望你能看到表格应该是什么。

我想在特定的pallet_cd 之后获得下一行。

例如，如果我给参数 a

```
pallet_Cd = "00801004718000000007" 
```

我只想带回这些行

```
pallet cd = "00801004718000000007, 00801004718000000008, 00801004718000000009" 
```

对此的任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:38:08.233

看起来很简单...

```
SELECT TOP 10 Line_ID, Run_Date, Product_ID, Pallet_Cd, Run_Qty
FROM YourTable
WHERE Pallet_Cd >= '00801004718000000007'
ORDER BY Pallet_Cd 
```

当您通过 Pallet_Cd 订购时，这将选择接下来的 10 条记录，包括指定的托盘代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:39:04.217

如果它们`pallet_Cd`是按时间顺序排列的，`ORDER BY Pallet_Cd`并且`SELECT TOP 10` `WHERE Pallet_Cd >= X`

# sql - 要插入或删除的 PSQL/SQL 约束

> ID：14754954
> 
> 赞同：0
> 
> 时间：2013-02-07T15:35:53.300
> 
> 标签：sql, insert, constraints, psql

我有这些表：

```
user
id

permission
id
user_id

old_permission
user_id
value 
```

价值观：

```
user
id
1
2
3

permission
id    user_id
1     1     
2     2

old_permission
user_id    value
1          f
2          f
3          t 
```

正如表名所暗示的，我正在从旧的权限系统迁移。我想做的是：

当 old_permission.value 为“t”时，我希望删除用户权限中的任何匹配行。因此，如果用户 3 在权限表中有一个条目，如果其 old_permission.value = 't'，它将被删除。

如果关联的 old_permission.value = 'f' 我还想在权限表中创建一行

如何创建这样的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:25:47.653

我将创建一个基于 Old_Permission 表刷新 Permission 表的存储过程：

```
CREATE PROCEDURE RefreshPermissions()
AS
BEGIN
    DELETE
        Permission
    WHERE
        EXISTS
        (SELECT
            NULL
        FROM
            Old_Permission
        WHERE
            Permission.user_id = Old_Permission.user_id
        AND Old_Permission.Value = 't');

    INSERT INTO
        Permission (user_id)
    SELECT
        Old_Permission.user_id
    FROM
        Old_Permission
        LEFT JOIN Permission ON Old_Permission.user_id = Permission.user_id
    WHERE
        Old_Permission.Value = 'f'
    AND Permission.user_Id IS NULL;

END; 
```

然后我建议在 Old_Permission 表上使用触发器来根据需要修改 Permission 表。像这样的东西：

```
CREATE TRIGGER 
    TR_Old_Permission
AFTER INSERT OR UPDATE OR DELETE ON 
    Old_Permission
EXECUTE PROCEDURE
    RefreshPermissions(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T15:55:00.007

PL/SQL 是 Oracle 的一部分。约束是 SQL 而不是 PL/SQL 的一部分。你不能像这样创建约束。您需要编写一些代码，可能是根据您的逻辑删除和插入的过程和/或触发器。基本上，在迁移时，我不知道您究竟在做什么迁移以及如何迁移，您遍历记录，然后根据您的条件/过滤器删除和插入记录。很难提出更多建议，因为我需要更多细节来决定在你的情况下如何以及做什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T16:20:31.243

我无法理解你的确切问题，因为我想让你理解 sql 中约束的概念，包括它的定义和类型。

约束用于限制可以进入表的数据类型。

可以在创建表时（使用 CREATE TABLE 语句）或创建表后（使用 ALTER TABLE 语句）指定约束。

约束类型：

•非空

•独特

•首要的关键

•外键

•查看

•默认

用小例子解释约束的类型：-

SQL NOT NULL 约束

•NOT NULL 约束强制列不接受NULL 值。

• NOT NULL 约束强制字段始终包含一个值。这意味着如果不向该字段添加值，您将无法插入新记录或更新记录。

•以下 SQL 强制“P_Id”列和“LastName”列不接受 NULL 值：

•创建表人

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255)

)

SQL 唯一约束

UNIQUE 约束唯一标识数据库表中的每条记录。

CREATE TABLE 上的 SQL 唯一约束

当“Persons”表时，以下 SQL 在“P_Id”列上创建 UNIQUE 约束

被建造：

MySQL：

创建表人员

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255),

唯一 (P_Id)

)

SQL Server / Oracle / MS 访问：

创建表人员

(

P_Id int NOT NULL 唯一，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255)

)

要允许命名 UNIQUE 约束并在多个列上定义 UNIQUE 约束，请使用以下 SQL 语法：

MySQL / SQL Server / Oracle / MS Access：

创建表人员

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255),

约束 uc_PersonID 唯一 (P_Id,LastName)

)

* * *

ALTER TABLE 上的 SQL 唯一约束

要在已创建表时在“P_Id”列上创建 UNIQUE 约束，请
使用以下 SQL：

MySQL / SQL Server / Oracle / MS Access：

改变表人

添加唯一 (P_Id)

要允许命名 UNIQUE 约束并在多个列上定义 UNIQUE 约束，请使用以下 SQL 语法：

MySQL / SQL Server / Oracle / MS Access：

改变表人

添加约束 uc_PersonID 唯一 (P_Id,LastName)

* * *

删除唯一约束

要删除 UNIQUE 约束，请使用以下 SQL：

MySQL：

改变表人

删除索引 uc_PersonID

SQL Server / Oracle / MS 访问：

改变表人

删除约束 uc_PersonID

* * *

SQL 主键约束

PRIMARY KEY 约束唯一标识数据库表中的每条记录。

主键必须包含唯一值。

主键列不能包含 NULL 值。

每个表都应该有一个主键，每个表只能有一个主键。

* * *

CREATE TABLE 上的 SQL PRIMARY KEY 约束

以下 SQL 在“Persons”表为“P_Id”列时创建主键

创建：

MySQL：

创建表人员

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255),

主键 (P_Id)

)

SQL Server / Oracle / MS 访问：

创建表人员

(

P_Id int 非空主键，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255)

)

要允许命名 PRIMARY KEY 约束并在多个列上定义 PRIMARY KEY 约束，请使用以下 SQL 语法：

MySQL / SQL Server / Oracle / MS Access：

创建表人员

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255),

约束 pk_PersonID 主键 (P_Id,LastName)

)

* * *

CREATE TABLE 上的 SQL FOREIGN KEY 约束

以下 SQL 在创建“Orders”表时在“P_Id”列上创建一个 FOREIGN KEY： MySQL：

创建表订单

(

O_Id int 非空，

OrderNo int NOT NULL,

P_Id 整数，

主键（O_Id），

外键 (P_Id) 参考人员 (P_Id)

)

SQL Server / Oracle / MS 访问：

创建表订单

(

O_Id int NOT NULL PRIMARY KEY，

OrderNo int NOT NULL,

P_Id int FOREIGN KEY REFERENCES Persons(P_Id)

)

要允许命名 FOREIGN KEY 约束并在多个列上定义 FOREIGN KEY 约束，请使用以下 SQL 语法：MySQL / SQL Server / Oracle / MS Access：

创建表订单

(

O_Id int 非空，

OrderNo int NOT NULL,

P_Id 整数，

主键（O_Id），

约束 fk_PerOrders 外键 (P_Id)

参考人员（P_Id）

)

* * *

CREATE TABLE 上的 SQL CHECK 约束

以下 SQL 在创建“Persons”表时在“P_Id”列上创建 CHECK 约束。CHECK 约束指定列“P_Id”只能包含大于 0 的整数。

MySQL：

创建表人员

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255),

检查 (P_Id>0)

)

* * *

SQL 默认约束

DEFAULT 约束用于在列中插入默认值。

CREATE TABLE 上的 SQL DEFAULT 约束

当创建“Persons”表时，以下 SQL 在“City”列上创建一个 DEFAULT 约束：

我的 SQL / SQL Server / Oracle / MS Access：

创建表人员

(

P_Id int 非空，

姓氏 varchar(255) 非空，

名字 varchar(255),

地址 varchar(255),

城市 varchar(255) 默认 'Sandnes'

)

DEFAULT 约束也可用于插入系统值，通过使用 GETDATE() 之类的函数：

创建表订单

(

O_Id int 非空，

OrderNo int NOT NULL,

P_Id 整数，

OrderDate 日期 DEFAULT GETDATE()

)

上面的解释是使用约束的一般格式，希望它可以帮助你克服你的问题.......................

# c++ - 我可以在 c++ 中将 struct 中的变量保留为 undefined 吗？

> ID：14754955
> 
> 赞同：1
> 
> 时间：2013-02-07T15:35:52.933
> 
> 标签：c++

我已经定义了一个这样的结构

```
Struct rectangle{

int x;
int y;
int z;

}; 
```

然后在我的主要方法中，我将分配变量：

```
void main(int argc, const char *argv[])

{

   for(i=0;i<20;i++)

   {

     rectangle[i].x = 20;
     rectangle[i].y = 10;

    }

} 
```

但我不会随时分配结构的“z”变量。我可以这样做吗？希望我不是在问一些非常愚蠢的问题！

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T15:36:43.700

是的，没关系。任何尝试使用`rectangle[i].z`都会导致未定义的行为，^*但这不是问题，只要您不尝试使用它。

* * *

[* 除非`rectangle`被声明为全局/静态数组，在这种情况下，它的所有成员都被隐式初始化为零。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T15:36:47.720

你被允许这样做。该成员`z`将具有**不确定**的值。
所以如果你使用它，而不给它分配任何值，你最终会得到一个**Undefined Behavior(UB)**。

但是，如果结构对象是全局或静态对象，`z`则将被隐式初始化为`0`，您不必为 UB 操心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:38:49.027

如前所述，它不会受到伤害。您甚至可以打印 rectangle[i].z 的值来查看堆栈中之前的内容:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:50:52.043

是的，您可以在不声明的情况下逃脱，`z`但 z 的值将是未定义的。

Think about using a default constructor for the struct and also defining `rectangle z` as a gloabal or static will initialize it to `0` so you don't have to worry about the value it will take on otherwise.

# java - 允许在 Java 5 中使用 String.isEmpty() 吗？

> ID：14754956
> 
> 赞同：0
> 
> 时间：2013-02-07T15:36:05.943
> 
> 标签：java, netbeans

我正在针对 Java 5 在 Netbeans 中编译我的 Web 应用程序。

我在我的代码中使用 String.isEmpty() 并且它仍在编译？如果 String.isEmpty() 仅受 Java 6 支持，这怎么可能？

# java - 如何制作要运行的测试的junit白名单

> ID：14754972
> 
> 赞同：1
> 
> 时间：2013-02-07T15:37:04.640
> 
> 标签：java, unit-testing, junit, junit4

我正在为我正在开发的一个类编写单元测试。另一位开发人员正在为他正在开发的方法开发同一类的其他测试。所以我们的测试发现自己在同一个 JUnit 测试类中。

所以我想做的是建立一个测试套件来运行我的测试，而我正在开发作为一种临时措施。我为我的测试创建了一个类别并将它们标记为这样。然后我创建了一个类作为我的测试套件。我告诉它包括属于这个类别的测试。当我运行它时，它仍然运行一切。有很多测试，所以用@Ignore 标记所有我不想运行的测试会很乏味。有没有办法说只运行一个类别中的测试而不运行其他测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:05:52.867

我认为您可以实现自己的“org.junit.runner.RunWith”，然后注释您的测试类以根据需要使用它。

```
 @RunWith(MyRunnerClass.class) 
```

注意：这里正确的解决方案是在上面关于代码分支等的注释中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:06:39.193

您可以编写一个包装器测试类，该方法调用主测试类（仅您的方法），然后在包装器类上运行 Junit 测试。

```
public class MainTestClass {
    @Test
    public void yourFirstTest() {
    ...
    }

    @Test
    public void yourSecondTest() {
    ...
    }

    @Test
    public void otherFirstTest() {
    ...
    }
}

public class WrapperTestClass {
    @Test
    public void yourFirstTest() {
       new MainTestClass().yourFirstTest();
    }

    @Test
    public void yourSecondTest() {
       new MainTestClass().yourSecondTest();
    }
} 
```

# c++ - 删除目录中的所有文件

> ID：14754977
> 
> 赞同：25
> 
> 时间：2013-02-07T15:37:14.207
> 
> 标签：c++, qt

我需要使用 Qt 删除目录中的所有文件。

目录中的所有文件都将具有扩展名“.txt”。

我不想删除目录本身。

有谁知道我该怎么做？我看过 QDir 但没有运气。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-08-23T18:35:26.263

Bjorns 回答 tweeked 不会永远循环

```
QString path = "whatever";
QDir dir(path);
dir.setNameFilters(QStringList() << "*.*");
dir.setFilter(QDir::Files);
foreach(QString dirFile, dir.entryList())
{
    dir.remove(dirFile);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-13T20:44:12.623

忽略 txt 扩展名过滤...这是一种删除文件夹中所有内容的方法，包括非空子目录：

在 QT5 中，您可以在目录上使用 removeRecursively()。不幸的是，这会删除整个目录 - 而不仅仅是清空它。这是清除目录内容的基本功能。

```
void clearDir( const QString path )
{
    QDir dir( path );

    dir.setFilter( QDir::NoDotAndDotDot | QDir::Files );
    foreach( QString dirItem, dir.entryList() )
        dir.remove( dirItem );

    dir.setFilter( QDir::NoDotAndDotDot | QDir::Dirs );
    foreach( QString dirItem, dir.entryList() )
    {
        QDir subDir( dir.absoluteFilePath( dirItem ) );
        subDir.removeRecursively();
    }
} 
```

或者，您可以在要清除的目录上使用 removeRecursively() （这将完全删除它）。然后，在此之后用相同的名称重新创建它......效果将是相同的，但代码行数更少。然而，如果需要，这个更详细的功能为添加详细的异常处理提供了更多的可能性，例如检测特定文件/文件夹的访问冲突......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T16:35:11.577

调用 QDir::entryList(QDir::Files) 来获取目录中所有文件的列表，然后对于每个以“.txt”结尾的文件名调用 QDir::remove(fileName) 来删除文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T15:44:03.327

您以一种很好的方式开始，查看[entryList](http://qt-project.org/doc/qt-4.8/qdir.html#entryList)并且当然传递了您想要的名称过滤器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-17T10:24:06.277

为了改进@user3191791 的答案（删除所有文件和目录），这个答案：

*   使用基于范围的 for 循环对代码进行现代化改造
*   提供可选的错误检查

编码：

```
struct FileOperationResult
{
    bool success;
    QString errorMessage;
};

FileOperationResult removeDirContents(const QString &dirPath)
{
    QDir dir(dirPath);

    dir.setFilter(QDir::NoDotAndDotDot | QDir::Files);
    const QStringList files = dir.entryList();
    for (const QString &fileName : files) {
        if (!dir.remove(fileName)) {
            const QString failureMessage = QString::fromUtf8(
                "Failed to remove file %1 from %2").arg(fileName, dirPath);
            return { false, failureMessage };
        }
    }

    dir.setFilter(QDir::NoDotAndDotDot | QDir::Dirs);
    const QStringList dirs = dir.entryList();
    for (const QString &dirName : dirs) {
        QDir subDir(dir.absoluteFilePath(dirName));
        if (!subDir.removeRecursively()) {
            const QString failureMessage = QString::fromUtf8(
                "Failed to recursively remove directory %1 from %2").arg(dirName, dirPath);
            return { false, failureMessage };
        }
    }

    return { true, QString() };
} 
```

用法：

```
const FileOperationResult removeResult = removeDirContents(path);
if (!removeResult.success)
    qWarning() << removeResult.errorMessage; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T13:33:30.963

我会这样做：

```
QString path = "name-of-directory";
QDir dir(path);
dir.setNameFilters(QStringList() << "*.txt");
dir.setFilters(QDir::Files);
while(dir.entryList().size() > 0){
    dir.remove(dir.entryList().first());
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-24T11:43:02.653

rreeves 代码的其他变体：

```
QDir dir("/path/to/file");

dir.setNameFilters(QStringList() << "*.*");
dir.setFilter(QDir::Files);

for(const QString &dirFile: dir.entryList()) {
  dir.remove(dirFile);
} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-02-07T15:42:56.647

您可以在不使用 Qt 的情况下实现这一点：为此，opendir、readdir、unlink 甚至 rmdir 都将成为您的朋友。它易于使用，只需浏览手册页;)。

# actionscript-3 - 我在哪里可以全局定义一个类？

> ID：14754978
> 
> 赞同：1
> 
> 时间：2013-02-07T15:37:25.390
> 
> 标签：actionscript-3, flash

我有一个类，我想让它可以在 Flash 项目中的任何地方使用。我应该把它放在哪里？理想情况下，它将位于单独的 ActionScript 文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T15:42:32.103

如果您的 ActionScript 3 项目使用类，您可以使用 public static 像这样简单地创建全局变量：

```
//MyClass.as
package {
 public class MyClass {
  public static var myValue = 3;
 }
}

//Arbitrary.as
package {
 public class Arbitrary {
  function Arbitrary():void {
   trace(MyClass.myValue); //3
  }
 }
} 
```

您在每个项目中，都按照以下步骤启用。

单击 ActionScript 3.0 Settings... ![在此处输入图像描述](../Images/92591f036c2a47b94c3d69da09d1c9b9.png) 单击 Source path 文件夹图标，选择一个您想要的 src 文件夹。 ![在此处输入图像描述](../Images/3ceeac896d355898a4dd8ac9ff5ac58e.png) ![在此处输入图像描述](../Images/b5d2e7cfa265f72df25c53ec2f6e55a9.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T18:36:22.477

您可以使用顶级默认包声明。

```
package com.abc.globals
{
    //Note here No Class Declaration

    public var globalVars:String = "Global is horrible";
} 
```

这样您就可以使用`without import statement`并且可以使用访问变量`without class or instance`。

它就像我们的`trace("Hello Global")`.

`globalVars`将从应用程序中的任何位置访问。

# git - 在团队中工作时 Git 拉和推

> ID：14754981
> 
> 赞同：1
> 
> 时间：2013-02-07T15:37:26.580
> 
> 标签：git, github, git-push, git-pull, git-stash

我已经开始与另一位开发人员一起开展一个项目，并且刚刚意识到我的 GIT 知识是多么有限。这是交易：

*   这周我一直在进行更改，并希望将它们推向掌握
*   我的同事昨天对同一个项目进行了更改，并在昨晚推送了它们

我应该如何进行？

如果我尝试推送我的更改，我会收到错误，因为我的代码已过时。

所以，我被告知我应该 STASH 我的更改，然后将他的更改拉入我的工作目录，然后 STASH APPLY 我的更改回来。

但是当我这样做时，我会遇到冲突错误，因为我们都更改了项目文件。

如果我然后查看文件以查看冲突，我发现它们没有像正常冲突那样“标记”，所以我无法解决问题！我什至无法比较我的两个版本，因为冲突的版本是旧版本。

任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:48:22.680

1.  如果您跟踪了已更改的文件，请添加并提交它们或存储它们
2.  `git fetch`来自远程分支的更改
3.  `git rebase`您在刚刚获取的远程分支中建立的提交历史记录之上的提交
    *   您可能需要在此处解决冲突。如果是这样，Git 会告诉你。您通常可以使用默认的“mergetool”来生成保存文件以解决冲突。
4.  `git push`您的历史记录现在包含您最新的一系列提交。您的朋友也可以按照相同的程序将您的提交记录到他的本地历史记录中。

阅读官方文档总是很重要的。此外，我发现这个[视觉备忘单](http://ndpsoftware.com/git-cheatsheet.html)也很有帮助。

# java - Json 字符串到 HashMap

> ID：14754985
> 
> 赞同：1
> 
> 时间：2013-02-07T15:37:43.167
> 
> 标签：java, json, hashmap

我正在尝试将 Json String 转换为 HashMap 但它不起作用。我的代码：

```
 ObjectMapper mapper = new ObjectMapper();
 Map<String,Object> map = mapper.readValue("Json String placeholder", Map.class); 
```

我得到以下异常：

```
 java.lang.NoClassDefFoundError: com/fasterxml/jackson/annotation/JsonAutoDetect
at com.fasterxml.jackson.databind.introspect.VisibilityChecker$Std.<clinit>(VisibilityChecker.java:172)
at com.fasterxml.jackson.databind.ObjectMapper.<clinit>(ObjectMapper.java:195)
..... 
```

我究竟做错了什么？还有另一种可能转换它吗？还是缺少什​​么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:44:17.417

`NoClassDefFoundError`并非特定于您对 JSON 的特定使用，但如果 JVM 在运行时找不到在编译时可用的类，则会发生这种情况。怎么会这样？如果您的编译`classpath`与您的执行不同，最常见的情况会发生。我已经看到它发生`ant`了很多。确保相关的 jar 包含在执行类路径中。

# jquery - jQuery扩展ul列表活动状态

> ID：14754991
> 
> 赞同：0
> 
> 时间：2013-02-07T15:37:52.290
> 
> 标签：jquery, html, css

我有一些代码充当无序列表下拉菜单。它可以很好地显示和隐藏，但我正在尝试解决如何使其在嵌套子列表存在时向被单击的父元素添加活动状态。下面的代码似乎将活动状态添加到任何被点击的链接，无论它是否有孩子，但我不希望这样。

例如，我想在单击“新闻中”时为其添加活动状态。

请问有人可以帮我吗？

我的 jQuery：

```
$('.infobox.lightbox.inlinks ul > li > ul')
 .hide()
 .click(function(e){
   e.stopPropagation();
 });

 $('.infobox.lightbox.inlinks ul > li').toggle(function(){
   $(this).find('ul').slideDown(),
   $(this).addClass("expanded");
 }, function(){
   $(this).find('ul').slideUp(),
   $(this).removeClass("expanded");
 }); 
```

和我的 HTML：

```
<ul>
    <li><a href="#">Press releases</a></li>
    <li><a href="#">In the news</a>
        <ul>
          <li><a href="#">Photo galleries</a></li>
          <li><a href="#">Videos</a></li>
          <li><a href="#">Podcasts</a></li>
        </ul>
    </li>
    <li><a href="#">Media Centre</a></li>
    <li><a href="#">Fact Sheet</a></li>
    <li><a href="#">Press Contacts</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:16:05.863

[JQuery`.toggle()`](http://api.jquery.com/toggle/)用于隐藏/显示元素，而不是在函数之间“切换”。

你想做这样的事情（虽然，还有很多其他方法可以去做）：

JAVASCRIPT：

```
$('.infobox.lightbox.inlinks ul > li').click(function(e){
     if($(this).children('ul').length>0){
         e.preventDefault();
         if($(this).children('ul').is(':visible')){
           $(this).find('ul').slideUp(),
           $(this).removeClass("expanded");
         }else{
           $(this).find('ul').slideDown(),
           $(this).addClass("expanded"); 
         }
     }
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/aZBXc/6/](http://jsfiddle.net/dirtyd77/aZBXc/6/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:27:34.013

使用这个 html...

```
<div class="infobox lightbox inlinks">
    <ul>
        <li><a href="#">Press releases</a></li>
        <li><a href="#">In the news</a>
            <ul style="display:none;">
              <li><a href="#">Photo galleries</a></li>
              <li><a href="#">Videos</a></li>
              <li><a href="#">Podcasts</a></li>
            </ul>
        </li>
        <li><a href="#">Media Centre</a></li>
        <li><a href="#">Fact Sheet</a></li>
        <li><a href="#">Press Contacts</a></li>
    </ul>
</div> 
```

还有 JS...

```
$('.infobox.lightbox.inlinks ul > li').click(function(e){
    e.stopPropagation();
    $(this).find('ul').slideToggle(),
}); 
```

不使用`jQuery`准备好的...使用jQuery`on`事件...

请参阅此[jSfiddle 示例](http://jsfiddle.net/aZBXc/3/)

# javascript - window.onerror 获取列号

> ID：14754992
> 
> 赞同：1
> 
> 时间：2013-02-07T15:37:54.567
> 
> 标签：javascript, error-handling

我有带有[https://developer.mozilla.org/en/docs/DOM/window.onerror](https://developer.mozilla.org/en/docs/DOM/window.onerror)事件的 javascript 错误报告器。

问题，打包了什么javascript文件，所以一行可能有很多错误。有可以得到 line + cols 的错误吗？

# c# - HttpHandler 监听客户端断开连接？

> ID：14754993
> 
> 赞同：1
> 
> 时间：2013-02-07T15:37:55.960
> 
> 标签：c#, .net, vb.net, httphandler, abort

是否`HttpHandler`监听与浏览器的断开连接？

我的猜测是“不”，因为它似乎主要/仅用于动态文件创建，那为什么会这样呢？

但我在文档或 goog 中找不到答案。

提前谢谢了！

**背景**

我想“中止”一个 HttpHandler，因为目前，我允许大量的 excel 导出（~150k sql 行，所以 ~600k html 行）。由于几乎与代码一样荒谬的原因，我有一个查询会触发用户尝试导出的尽可能多的 sql 行。可以想象，这需要很长时间。

我想我得到了工作进程的支持，因为用户可能会对滞后感到沮丧，并以较小的结果再试一次。我目前每 30 分钟自动刷新一次工作进程，但我宁愿更快地清理。

我现在没有时间清理 sql，所以我只想监听来自客户端的“中止”，如果“中止”则终止处理程序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T02:26:18.167

您希望通过侦听客户端连接断开来完成的工作根本无法真正帮助解决您的问题。您问题的核心是直接在 HttpHandler 中启动的长时间运行的任务。

在这种情况下，即使您可以侦听客户端断开连接，它也不会被执行，因为您的代码将忙于执行而无法侦听它。

在诸如此类的长时间运行的进程中正确确定进度并执行操作的唯一方法是确保您的代码是多线程的。在 ASP.NET 中为长时间运行的进程执行此操作的问题是，它们会从为您的页面提供服务所需[的线程池中吸收线程。](http://www.codedistillers.com/tja/2012/04/06/some-thoughts-on-asp-net-threadpool-threads-asynchronous-execution-and-tpl/)正如您所经历的那样，这可能会导致您的网站挂起或响应非常缓慢。

我建议编写一个 Windows 服务来处理这些长时间运行的作业，并将结果吐到暂存目录中。然后我会使用[MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)或类似的东西将请求扔给服务进行处理。

最终，您希望在 ASP.NET 之外获得这个长时间运行的线程，您可以在其中利用多线程可以为您提供的好处。例如，能够报告进度并在需要时中止。

# mysql - 为什么 SQLAlchemy count() 比原始查询慢得多？

> ID：14754994
> 
> 赞同：57
> 
> 时间：2013-02-07T15:37:55.757
> 
> 标签：mysql, sqlalchemy

我将 SQLAlchemy 与 MySQL 数据库一起使用，我想计算表中的行数（大约 300k）。SQLAlchemy[计数](http://docs.sqlalchemy.org/ru/latest/orm/query.html#sqlalchemy.orm.query.Query.count)函数的运行时间大约是直接在 MySQL 中编写相同查询的 50 倍。难道我做错了什么？

```
# this takes over 3 seconds to return
session.query(Segment).count() 
```

然而：

```
SELECT COUNT(*) FROM segments;
+----------+
| COUNT(*) |
+----------+
|   281992 |
+----------+
1 row in set (0.07 sec) 
```

速度差异随着表的大小而增加（在 100k 行下几乎看不到）。

**更新**

使用`session.query(Segment.id).count()`而不是`session.query(Segment).count()`似乎可以解决问题并使其加快速度。我仍然很困惑为什么初始查询速度较慢。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-07T18:23:14.760

不幸的是，MySQL 对子查询的支持非常糟糕，这对我们产生了非常负面的影响。[SQLAlchemy 文档](http://docs.sqlalchemy.org/en/rel_0_8/orm/query.html?highlight=count#sqlalchemy.orm.query.Query.count)指出可以使用以下方法实现“优化”查询`query(func.count(Segment.id))`：

> 返回此查询将返回的行数。
> 
> 这会为此查询生成 SQL，如下所示：
> 
> ```
> SELECT count(1) AS count_1 FROM (
>      SELECT <rest of query follows...> ) AS anon_1 
> ```
> 
> 要对要计数的特定列进行细粒度控制，跳过子查询的使用或 FROM 子句的其他控制，或使用其他聚合函数，请结合使用 func 表达式和 query()，即：
> 
> ```
> from sqlalchemy import func
> 
> # count User records, without
> # using a subquery.
> session.query(func.count(User.id))
> 
> # return count of user "id" grouped
> # by "name"
> session.query(func.count(User.id)).\
>         group_by(User.name)
> 
> from sqlalchemy import distinct
> 
> # count distinct "name" values
> session.query(func.count(distinct(User.name))) 
> ```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-12-13T20:38:15.010

原因是 SQLAlchemy 的 count() 正在计算子查询的结果，该子查询仍在做全部工作来检索您正在计算的行。这种行为与底层数据库无关；这不是 MySQL 的问题。

SQLAlchemy[文档](http://docs.sqlalchemy.org/en/latest/orm/query.html)`func`解释了如何通过导入from来发出没有​​子查询的计数`sqlalchemy`。

```
session.query(func.count(User.id)).scalar()

>>>SELECT count(users.id) AS count_1 \nFROM users') 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-18T18:47:58.370

我花了很长时间才找到解决我问题的方法。我收到以下错误：

> sqlalchemy.exc.DatabaseError：（mysql.connector.errors.DatabaseError）126（HY000）：表'/tmp/#sql_40ab_0.MYI'的密钥文件不正确；尝试修复它

当我改变这个问题时，问题就解决了：

```
query = session.query(rumorClass).filter(rumorClass.exchangeDataState == state)
return query.count() 
```

对此：

```
query = session.query(func.count(rumorClass.id)).filter(rumorClass.exchangeDataState == state)
return query.scalar() 
```

# javascript - 使用 AngularJS 安全处理登录的最佳方法是什么

> ID：14754998
> 
> 赞同：6
> 
> 时间：2013-02-07T15:38:07.737
> 
> 标签：javascript, angularjs

我是 Angular 的新手。我正在开发一个简单的登录表单，将输入的用户名与从 JSON 查询返回的用户名进行比较。如果找到匹配项，则处理登录。

我觉得我这样做的方式不安全，我是否认为可以通过浏览器的控制台访问返回的 JSON 字符串？

一旦我了解如何正确执行此操作，我将在不久的将来为此添加密码检查。

我想指出正确的方向来解决用户以 Angular 方式登录的问题。

**应用程序.js**

```
angular.module('userApp', ["ngResource"]).

config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/login', {templateUrl: 'partials/login.html',   controller: LoginCtrl}).
        when('/loggedin', {templateUrl: 'partials/user-admin.html', controller: UserCtrl}).
        otherwise({redirectTo: '/login'});
}],[ '$locationProvider', function($locationProvider) {
    $locationProvider.html5Mode = true;
}]).

factory("User", function($resource) {
    return $resource("users/:userId.json", {}, {
        query: {method: "GET", params: {userId: "users"}, isArray: true}
    });
}); 
```

**控制器.js**

```
function LoginCtrl($scope, $route, $routeParams, $location, User) {
    $scope.users = User.query();
    $scope.loginUser = function() {
        var loggedin = false;
        var totalUsers = $scope.users.length;
        var usernameTyped = $scope.userUsername;

        for( i=0; i < totalUsers; i++ ) {
            if( $scope.users[i].name === usernameTyped ) {
                loggedin = true;
                break;
            }
        }

        if( loggedin === true ) {
            alert("login successful");
            $location.path("/loggedin");
        } else {
            alert("username does not exist")
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T15:48:18.447

是的，你是对的——**这不安全**。永远不要做这样的事情：

*   永远不要在数据库中存储普通密码（如“my_password_123”
*   永远不要向客户端返回任何类型的敏感信息并在 JavaScript 中执行秘密计算
*   切勿`providedPassword == stored password`在服务器或客户端代码中使用简单的密码比较 ()
*   永远不要使用不安全 (http) 层 - 使用安全层 (HTTPS)

这样做的正确方法如下：

1.  生成密码的哈希值并将其存储在数据库中。确保使用强大的散列算法和加盐密码。在撰写此回复时，SHA-256 就足够了，但请务必检查它是否仍然被认为是安全的。
2.  连接 SSL 证书以获得 HTTPS 支持，这样没有人会监视用户向您的服务器发送的内容
3.  用户输入`username+password`并将它们发送到服务器上的代码。**在服务器上**计算 SHA-1 哈希并将其与数据库中存储的值进行比较。然后您将身份验证的结果发送回客户端，并通过持久会话在服务器上跟踪它。

请记住，这些东西大部分是由一些安全框架完成的，比如[Spring Security](http://static.springsource.org/spring-security/site/)。我不建议从头开始做这一切，因为安全性的主题很广泛，而且很容易犯错误，被恶意用户使用。