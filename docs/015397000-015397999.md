# StackOverflow 问答 15397000-15397999

# javascript - 唯一 ID 计数器

> ID：15397000
> 
> 赞同：2
> 
> 时间：2013-03-13T21:38:52.147
> 
> 标签：javascript, google-apps-script, google-sheets, google-apps

在过去的几天里，我发布了几个关于我正在开发的 Google Apps Script Web App 的问题。到目前为止，这里的 Serge 非常有帮助。该脚本的帖子在[这里](https://stackoverflow.com/questions/15302510/google-apps-script-form-validation-on-fields-and-fileupload)。

我希望在该脚本中添加一列以生成一个 uniqueID 计数器，以便在提交新表单时，计数器将看到以前的 uniqueID 并递增 1。想法将是带有标题行的空白电子表格。脚本在表单提交时运行，看到 A2 为空白并插入 1。下一个提交的表单将看到 A2 中的 2 添加 1 并将 3 放入 A3 等等。

现在我正在处理计数器，将单元格中的数字加 1。我知道当我开发这件作品时，我需要抓住最后一行，然后找到单元格值并添加到，但是因为我是 GAS 的新手，我边走边自学，所以我试图慢慢构建到，你明白了。

这是一个基本的开始，如果这是一个正确的开始方向，我想得到一些反馈..

```
function counter() {
   //Grabs the range and pinpoint cell
   var ssRange = SpreadsheetApp.getActiveSheet().getRange(1,1,1,1);
   //Grab the cell value of A1
   var value = ssRange.getValue();
   //if statement to check value in A1 and if it is null, undefined, false, 0, NAN
if (!value) {
  //if the cell is null, undefined, false, 0, NAN sets value to 1
   var setCell = ssRange.setValue(1);
}
  //if not updates the cell by getting the value and adding 1 to it
 else {
   var updateCell = ssRange.setValue(value + 1);  
}
} 
```

**编辑（更新代码以使用 .setProperty 和 .getProperty 的 Phil Bozak 提示**

如果插入到电子表格中的 MYID 像您提到的那样被手动更改，我仍在测试此代码如何处理。我需要确保 MYID 保持唯一。必须考虑一下.. 这是代码.. 任何反馈表示赞赏！

```
function counter2() {
  //Get the spreadsheet, range, and value of first cell in range
  var sSheet = SpreadsheetApp.getActiveSheet();
  var ssRange = sSheet.getRange(1,1,1,1);
  var ssValue = ssRange.getValue();
  var setUniqueID = ScriptProperties.setProperty("MYID",1);
  var getUniqueID = ScriptProperties.getProperty("MYID");

  //will set value of first cell to 1 if null, undefined, false, 0, NAN etc.. (runs in if //statement)
  var setOne = ssRange.setValue(getUniqueID);  

  if (!ssValue) {
  setOne;
  }
  else {

  //This goes back and get the range, lastrow of range, and value of first cell in           range of last row & adds 1 to that value

  var setLast = sSheet.getRange(lastRow+1,1,1,1).setValue(getUniqueID + 1); 
    setLast;
  }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:31:47.810

另一种确保获得一个始终是最后一个计数（最高值）作为列中计数器的值的方法是这样的：（*代码中的注释）*

当你说 A 列中的值可以手动修改时，我有这个想法......在这种情况下，这是避免可能重复的唯一方法（虽然它不会阻止使用未使用的值......（但这可以实现必要时也可以）

```
function OnForm(){
var sh = SpreadsheetApp.getActiveSheet()
var startcell = sh.getRange('A1').getValue();
if(! startcell){sh.getRange('A1').setValue(1);return}; // this is only to handle initial situation when A1 is empty.
var colValues = sh.getRange('A1:A').getValues();// get all the values in column A in an array
var max=0;// define the max variable to a minimal value
  for(var r in colValues){ // iterate the array
    if(Number(colValues[r][0]>max)){max=colValues[r][0]};// get the highest numeric value in th column, no matter what happens in the column... this runs at array level so it is very fast
    }
    max++ ; // increment to be 1 above max value
sh.getRange(sh.getLastRow()+1, 1).setValue(max);// and write it back to sheet's last row.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:21:13.793

好的..我已经更新了我的代码并遇到了一个问题，我希望有人能提供帮助。该脚本将看到电子表格是空白的，并在 A1 中插入一个 1。在下一次运行时，它将看到 1 在 A1 中，并在 A2 中添加 1 和插入 2。从那时起，它只是一遍又一遍地在每行中放置 2.. 这是代码.. 不知道为什么要这样做而不是每行添加 1 并增加计数。

```
function counter2() {
  var sSheet = SpreadsheetApp.getActiveSheet();
  var ssRange = sSheet.getRange(1,1,1,1);
  var ssValue = ssRange.getValue();
  var setOne = ssRange.setValue(1);  
  var lastRow = sSheet.getLastRow();  
  var setLast = sSheet.getRange(lastRow+1,1,1,1).setValue(ssValue + 1);

  if (!ssValue) {
  setOne;
  }
  else {
  setLast;
  }
  } 
```

**编辑 1**

更新代码...在空白电子表格上的第一次运行填写 A1 = 1 和 A2 = 2。它应该只在单元格 A1 中输入 1，然后在此之后递增。第二次运行时它工作正常。想法？我错过了什么？function counter2() { //获取电子表格、范围和范围内第一个单元格的值 var sSheet = SpreadsheetApp.getActiveSheet(); var ssRange = sSheet.getRange(1,1,1,1); var ssValue = ssRange.getValue();

```
 //will set value of first cell to 1 if null, undefined, false, 0, NAN etc.. (runs in if statement)
  var setOne = ssRange.setValue(1);

  //This goes back and get the range, lastrow of range, and value of first cell in range of last row & adds 1 to that value
  var lastRow = sSheet.getLastRow();
  var startValue = sSheet.getRange(lastRow,1,1,1).getValue();
  var setLast = sSheet.getRange(lastRow+1,1,1,1).setValue(startValue + 1);      

  if (!ssValue) {
  setOne;
  }
  else {
  setLast;
  }
  } 
```

**编辑 2 - 已修复**

这是现在似乎可以正常工作的更新代码。我将变量“lastRow、startValue、setLast”移动到第二个语句的 else 语句中。这有什么关系？是因为它在到达变量时运行变量，并且通过将 if / else {} 括在括号中，它仅在运行该语句时才执行？

```
function counter2() {
  //Get the spreadsheet, range, and value of first cell in range
  var sSheet = SpreadsheetApp.getActiveSheet();
  var ssRange = sSheet.getRange(1,1,1,1);
  var ssValue = ssRange.getValue();

  //will set value of first cell to 1 if null, undefined, false, 0, NAN etc.. (runs in if statement)
  var setOne = ssRange.setValue(1);  

  if (!ssValue) {
  setOne;
  }
  else {

  //This goes back and get the range, lastrow of range, and value of first cell in range of last row & adds 1 to that value
  var lastRow = sSheet.getLastRow();
  var startValue = sSheet.getRange(lastRow,1,1,1).getValue();
  var setLast = sSheet.getRange(lastRow+1,1,1,1).setValue(startValue + 1); 
    setLast;
  }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:42:52.153

您也可以使用[ScriptProperties](https://developers.google.com/apps-script/class_scriptproperties)来管理唯一 ID。它更可靠，更容易使用。

> **可靠性说明：**假设您的电子表格出现故障，并且您的 ID 为 [1,2,3,5,4]。然后，您的脚本将插入 5 作为下一个 ID。ScriptProperties 在跟踪最大数量方面做得更好。

### > 样品使用

```
var uid = ScriptProperties.getProperty("last_unique_id")+1;
ScriptProperties.setProperty("last_unique_id",uid); //the current UID is now the "last UID"
//do something with the unique_id 
```

当然，您必须首先设置属性。我建议您使用从菜单中运行的一个小功能来执行此操作。

```
function setUIDOnce() {
  ScriptProperties.setProperty("last_unique_id",1);
} 
```

# android - 如何在 Spinner 中获取选定项目以显示 TextView

> ID：15397004
> 
> 赞同：0
> 
> 时间：2013-03-13T21:39:06.650
> 
> 标签：android

嘿，我想知道是否有人可以帮助我编辑我的代码以显示文本视图而不是类。谢谢你的帮助。

当前代码：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    String classSpot = classes[pos];
    try {
        Class nextClass = Class.forName("com.example.famouspeople." + classSpot);
        final Context context = this;
        Intent intent = new Intent(context,nextClass);
        startActivity(intent);

    }
    catch(ClassNotFoundException e){
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:52:17.180

> 我在布局中有 6 个与此类匹配的文本视图。它们都设置为可见性“消失”，我希望将与微调器中的项目相对应的设置设置为可见。

所以这不应该是棘手的。所以你已经实现了监听器并做出了想要的动作。

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
   String val = someFunction();
   if (val.equals("somevalue")) {
      textView.setVisibility(TextView.VISIBLE);
   }
} 
```

# javascript - Ajax - 表单提交 jquery/php/mysql/html 后立即强制更新 url

> ID：15397006
> 
> 赞同：0
> 
> 时间：2013-03-13T21:39:16.530
> 
> 标签：javascript, ajax, jquery

通过表单将数据正确插入我的数据库后，如何强制 all_contacts（从用户中选择 *）立即显示。必须通过 ajax 无页面刷新方法来完成。在表格 2 中，all_contacts 值确实（从用户中选择 *）并使用基于字符串 q 的 url /php/group_list.php?q=all_contacts，如果有帮助的话。

**表格 1**

```
 <form method="post" name="form">       
    <label>First Name:</label><input id="First_Name" name="First_Name" type="text" />
    <br /> 
    <label>Last Name:</label><input id="Last_Name" name="Last_Name" type="text" />
    <br /> 
    <label>Email Address:</label><input id="Email_Address" name="Email_Address" type="text" />
    <br /> 
    <label>Telephone Number:</label><input id="Telephone_Number" name="Telephone_Number" type="text" />
    <br /> 
    <label>Postal Address:</label><input id="Postal_Address" name="Postal_Address" type="text" />

    <select id="Contact_Group" name="Contact_Group">
    <option value="">Select Group</option>
    <option value="Ungrouped">Ungrouped</option>
    <option value="Friends">Friends</option>
    <option value="Family">Family</option>
    <option value="Colleagues">Colleagues</option>
    </select>
    </li></ul>
    <div >
    <input type="submit" value="Submit" class="contact"/>
    <span class="error" style="display:none"> Please Enter Valid Data</span>
    <span class="success" style="display:none"> Registration Successfully</span>
    </div></form> 
```

**表格 2**

```
<form>
<select name="users" id="users" onChange="showContact(this.value)">
<option value="">Select Group</option>
<option value="all_contacts">All Contacts</option>
<option value="friends">Friends</option>
<option value="family">Family</option>
<option value="colleagues">Colleagues</option>
<option value="ungrouped">Ungrouped</option>
</select>
</form> 
```

**js**

```
//Displays the user contact summmary
    function showContact(str)
    {
    if (str=="")
      {
      document.getElementById("txtSummary").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtSummary").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","php/group_list.php?q="+str,true);
    xmlhttp.send();
    }

    //Displays the detailed user contact description 
    function showContactDetail(str)
    {
    if (str=="")
      {
      document.getElementById("txtSummaryDetails").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtSummaryDetails").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","php/contact_details.php?q="+str,true);
    xmlhttp.send();
    }

    // Checkbox select and delete with loop
    jQuery(function($) {
        $("form input[id='check_all']").click(function() { // triggred check

            var inputs = $("form input[type='checkbox']"); // get the checkbox

            for(var i = 0; i < inputs.length; i++) { // count input tag in the form 
                var type = inputs[i].getAttribute("type"); //  get the type attribute
                    if(type == "checkbox") {
                        if(this.checked) {
                            inputs[i].checked = true; // checked
                        } else {
                            inputs[i].checked = false; // unchecked

                         }
                    } 
            }
        });

        $("form input[id='submit']").click(function() {  // triggred submit

            var count_checked = $("[name='data[]']:checked").length; // count the checked
            if(count_checked == 0) {
                alert("Please select a product(s) to delete.");
                return false;
            } 
            if(count_checked == 1) {
                return confirm("Are you sure you want to delete these product?");   
            } else {
                return confirm("Are you sure you want to delete these products?");  
              }     
        });
    }); // jquery end

    //Submit form
    $(function() {
    $(".contact").click(function() {
    var First_Name = $("#First_Name").val();
    var Last_Name = $("#Last_Name").val();
    var Email_Address = $("#Email_Address").val();
    var Telephone_Number = $("#Telephone_Number").val();
    var Postal_Address = $("#Postal_Address").val();
    var Contact_Group = $("#Contact_Group").val();

    var dataString = 'First_Name='+ First_Name + '&Last_Name=' + Last_Name + '&Email_Address=' + Email_Address + '&Telephone_Number=' + Telephone_Number + '&Postal_Address=' + Postal_Address + '&Contact_Group=' + Contact_Group;

    if(First_Name=='' || Last_Name=='' || Email_Address=='' || Telephone_Number=='' || Postal_Address=='' || Contact_Group=='')
    {
    $('.success').fadeOut(200).hide();
    $('.error').fadeOut(200).show();
    }
    else
    {
    $.ajax({
    type: "POST",
    url: "php/new_contact.php",
    data: dataString,
    success: function(){
    $('.success').fadeIn(200).show();
    $('.error').fadeOut(200).hide();

    //Newly added
    $('#First_Name').val('');
    $('#Last_Name').val('');
    $('#Email_Address').val('');
    $('#Telephone_Number').val('');
    $('#Postal_Address').val('');
    $('#Contact_Group').val('');

    }
    });
    }
    return false;
    });
    }); 
```

**更正了更新的 Ajax 版本**

```
//Displays the user contact summmary
function showContact(str)
{
if (str=="")
  {
  document.getElementById("txtSummary").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtSummary").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","php/group_list.php?q="+str,true);
xmlhttp.send();
}

//Displays the detailed user contact description 
function showContactDetail(str)
{
if (str=="")
  {
  document.getElementById("txtSummaryDetails").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtSummaryDetails").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","php/contact_details.php?q="+str,true);
xmlhttp.send();
}

// Checkbox select and delete with loop
jQuery(function($) {
    $("form input[id='check_all']").click(function() { // triggred check

        var inputs = $("form input[type='checkbox']"); // get the checkbox

        for(var i = 0; i < inputs.length; i++) { // count input tag in the form 
            var type = inputs[i].getAttribute("type"); //  get the type attribute
                if(type == "checkbox") {
                    if(this.checked) {
                        inputs[i].checked = true; // checked
                    } else {
                        inputs[i].checked = false; // unchecked

                     }
                } 
        }
    });

    $("form input[id='submit']").click(function() {  // triggred submit

        var count_checked = $("[name='data[]']:checked").length; // count the checked
        if(count_checked == 0) {
            alert("Please select a product(s) to delete.");
            return false;
        } 
        if(count_checked == 1) {
            return confirm("Are you sure you want to delete these product?");   
        } else {
            return confirm("Are you sure you want to delete these products?");  
          }     
    });
}); // jquery end

//Submit form
$(function() {
$(".contact").click(function() {
var First_Name = $("#First_Name").val();
var Last_Name = $("#Last_Name").val();
var Email_Address = $("#Email_Address").val();
var Telephone_Number = $("#Telephone_Number").val();
var Postal_Address = $("#Postal_Address").val();
var Contact_Group = $("#Contact_Group").val();

var dataString = 'First_Name='+ First_Name + '&Last_Name=' + Last_Name + '&Email_Address=' + Email_Address + '&Telephone_Number=' + Telephone_Number + '&Postal_Address=' + Postal_Address + '&Contact_Group=' + Contact_Group;

if(First_Name=='' || Last_Name=='' || Email_Address=='' || Telephone_Number=='' || Postal_Address=='' || Contact_Group=='')
{
$('.success').fadeOut(200).hide();
$('.error').fadeOut(200).show();
}
else
{
$.ajax({
type: "POST",
url: "php/new_contact.php",
data: dataString,

success: function(){

$(document).ready(function() {
    $("#formSearch").submit(function() {
        var options = {
            /* target:"#divResult", */

            success: function(html) {
                $("#txtSummary").replaceWith($('#txtSummary', $(html)));
            },

            url: "http://localhost/example/comp333assn1/php/group_list.php?q=all_contacts"
        }

        $(this).ajax(options);
        return false;

    });
});

$('.success').fadeIn(200).show();
$('.error').fadeOut(200).hide();

//Newly added
$('#First_Name').val('');
$('#Last_Name').val('');
$('#Email_Address').val('');
$('#Telephone_Number').val('');
$('#Postal_Address').val('');
$('#Contact_Group').val('');

}

});
}
return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:55:50.930

我的建议是使用 jQuery.form 插件，它将您的表单转换为 Ajax 表单，只需很少的工作和代码。它会让你的代码更加简单。

[从jQuery Form Plugin](http://www.malsup.com/jquery/form/)下载 .js 文件，然后将这一行添加到您的代码中：

```
<script src="jquery.form.3.10.js"></script> 
```

删除除您的表单之外的所有内容（但添加一个 'id' 和一个 'action' 参数），然后添加：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#yourform').ajaxForm({
                beforeSubmit: checkForm, 
                type: 'post', 
            dataType:  'json', 
                cache: false,
                beforeSend: function() {
                    $("#formstatus").addClass( "ui-autocomplete-loading" );
                },
                success: function(data, status, xhr, myForm) {
                    if ( data.usersfound !== undefined ) {
                        $('#output').html( 'ok' );
                        // ### todo: do something with data
                    }
                    if ( data.erroruser !== undefined ) {
                        $('#output').html( 'error: ' + data.erroruser.msg );
                        // ### your code returned an error
                    }
                },
                error: function(xhr ,status ,error ) {
                    $('#output').html( xhr.responseText ); 
                    // ### status != 200
                    },
                complete: function() {
                    $("#formstatus").removeClass("ui-autocomplete-loading");
                }

        }); 
    });
    function checkForm() {
        // ### todo: check the input of the form; return(false) if something is wrong, else return(true)
    }
</script> 
```

注意：
- ui-autocomplete-loading 是 jQuery UI 中的一个类，它显示“正在加载”动画。这当然是可选
的——保存数据的结果应该返回 json 数据。这可能是 (usersfound:[{"id":"1", "name":"john"}]) 或 (erroruser:{"msg":"bla"})

更多示例可以在 jQuery 表单插件页面上找到！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:44:10.090

没有直接的解决方案或具体的解决方案。它只需要你使用 JavaScript。

检查这个：

[Ajax - 提交后如何刷新](https://stackoverflow.com/questions/868890/ajax-how-refresh-div-after-submit)

# android - Facebook 分享无法获取文本

> ID：15397007
> 
> 赞同：0
> 
> 时间：2013-03-13T21:39:23.107
> 
> 标签：android, android-facebook, android-twitter

我想为游戏玩家制作推文/分享按钮。他们将使他们能够写一些推文或在墙上分享获得的分数。

我找到了这段代码：

```
String shareBody = "Share text";
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.setType("text/plain");
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
startActivity(Intent.createChooser(sharingIntent, "Test")); 
```

这段代码相当不错。对于 Twitter 应用程序，文本已正确发送。（“分享文本”）但它不适用于 facebook 应用程序。

错误在哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:42:35.227

你没有错误——这根本不可能。

Facebook 将“通过意图共享”限制为仅显示超链接（如果存在）。您无法显示任何常规文本。

做到这一点的唯一方法是建立一个完整的 facebook 连接（Facebook 的 Android SDK）并从用户那里获得 post-to-wall 权限。

# php - $.ajax 脚本不将 php 数据拉入 div

> ID：15397009
> 
> 赞同：0
> 
> 时间：2013-03-13T21:39:25.410
> 
> 标签：php, jquery, ajax, html, include

在过去的几天里，我一直在研究一个 .hover 脚本，该脚本将数据发布到 php 脚本，然后从数据库中检索相关数据。

将 id 数据发布到 details.inc.php 页面工作正常。脚本中的警报会正确检索并显示数据。

当我尝试将数据包含在 div 中时出现问题，似乎没有任何反应。Firefox show 是要执行和检索正确 id 信息的脚本。我不知道从哪里来。我已经尽我所能，但我对java的理解有限感谢您提前提供的任何帮助。

鼠标悬停函数执行并从图像中检索 id

```
<img src="#" class="latest"  id="id_retrieved_from_DB"> 
```

然后通过 jquery 和 ajax 传递 id，从 details.inc.php 中检索链接到 id 的数据，然后检索到的数据应包含在“详细信息”div 中

```
<script type="text/javascript">
    //Mouse over
    $(function(){
        $('.latest').hover(function() {
            id = $(this).attr('id');
            $.ajax({
        cache: false,
                url: "details.inc.php",
                data: 'hovered_id='+id,
                success:function(data){

                alert(data);//showing data correctly

                //not working here
        $("#details").load('details.inc.php', data);
                }
            });
return false;
        }
      });
</script> 
```

详细信息.inc.php

```
<?php require_once('../../Connections/userauthentication_conn.php'); ?>
<?php 
require_once('../../includes/session_remap.inc');
require_once('../../includes/tNG_functions.inc.php');
?>

<?php
$KTColParam1_rsDetails = "0";
if (isset($_GET["hovered_id"])) {
  $KTColParam1_rsDetails = (get_magic_quotes_gpc()) ? $_GET["hovered_id"] : addslashes($_GET["hovered_id"]);
}
mysql_select_db($database_userauthentication_conn, $userauthentication_conn);
$query_rsDetails = sprintf("SELECT tbl_entries.id_ent, tbl_entries.country_ent, tbl_entries.date_ent, tbl_entries.title_ent, tbl_entries.subject_ent, tbl_entries.description_ent, tbl_entries.image_ent, tbl_entries.url_ent FROM tbl_entries WHERE (tbl_entries.id_ent=%s) ORDER BY tbl_entries.date_ent DESC ", $KTColParam1_rsDetails);
$rsDetails = mysql_query($query_rsDetails, $userauthentication_conn) or die(mysql_error());
$row_rsDetails = mysql_fetch_assoc($rsDetails);
$totalRows_rsDetails = mysql_num_rows($rsDetails);
?>
<!-- Details -->
<a href="<?php echo $row_rsDetails['url_ent']; ?>" title="Go to <?php echo $row_rsDetails['title_ent']; ?>">
<?php
    //show if file exists
    if (file_exists("../../images/entries/" . $row_rsDetails['id_ent'] . "__img.jpg")) {
  ?>
  <img src="../../images/entries/<?php echo $row_rsDetails['id_ent']; ?>__img.jpg" width="70" height="70">
  <?php
    }
    //end show if file exists
  ?>
<p class="seriesName"><?php echo $row_rsDetails['subject_ent']; ?></p>
<h4 class="programTitle"><?php echo $row_rsDetails['title_ent']; ?></h4>
</a>
<!-- End -->
<?php
mysql_free_result($rsDetails);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:44:18.637

你为什么要做第二个ajax调用？

如果您已经有 javascript 中可用的数据，则可以替换：

```
$("#details").load('details.inc.php', data); 
```

和：

```
$("#details").html(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:58:40.850

如果 $("#details") 在脚本页面中并且这是您希望显示结果的 div，则只能使用加载：

```
//Mouse over
var id = $(this).attr('id');
$("#details").load('details.inc.php', 'hovered_id='+id, function(data){alert(data);}); 
```

或者你可以使用 $.get()

Jquery 手册 如果数据作为对象提供，则使用 POST 方法；否则，假定为 GET。

而您的 PHP 脚本使用 get。

# mysql - 仅在 MySQL 中返回最近 3 个月的记录

> ID：15397015
> 
> 赞同：36
> 
> 时间：2013-03-13T21:40:10.057
> 
> 标签：mysql

我有一个带有时间戳字段的表。如何获取最近 3 个月的数据？

特别是，三月是我当前的月份，比如说*03/2012*。我只需要返回 3 月、2 月和 1 月的记录。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-13T21:45:28.283

今天前3个月：

```
select * from table where timestamp >= now()-interval 3 month; 
```

从月初开始：

```
select * from table where timestamp >= last_day(now()) + interval 1 day - interval 3 month; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-13T22:18:25.647

要获取当月的第一天，您可以使用以下命令：

```
DATE_FORMAT(CURDATE(), '%Y-%m-01') 
```

如果当前日期是`2013-03-13`，它会返回`2013-03-01`，我们可以从这个日期减去2个月得到`2013-01-01`。您的查询可能是这样的：

```
SELECT *
FROM yourtable
WHERE data >= DATE_FORMAT(CURDATE(), '%Y-%m-01') - INTERVAL 2 MONTH 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T21:54:51.267

假设您使用的是 SQL Server（Oracle、MySQL 和其他有类似的日期函数），您可以使用 dateadd 函数为当前日期添加或减去一个间隔。

如果你想要整整三个月，你可以从今天减去 3 个月： `DATEADD(m,-3,getdate())`

但是，正如您所说，您只需要 1 月、2 月和 3 月的数据。您必须根据今天的日期进行一些计算：`dateadd(m,-2, CONVERT(datetime, CONVERT(VARCHAR(2), MONTH(getdate())) + '/01/' + CONVERT(VARCHAR(4), YEAR(getdate()))))`

最后，得到一个类似的查询

```
SELECT fields 
FROM table 
WHERE timestampfield > DATEADD(m,-2, CONVERT(datetime, CONVERT(VARCHAR(2), MONTH(getdate()))  + '/01/' + CONVERT(VARCHAR(4), YEAR(getdate())))) 
```

--- 编辑 --- erf，我刚刚注意到“mysql”标签...您可以在此处获取有关 MySQL 日期函数的更多信息： [https ://dev.mysql.com/doc/refman/5.5/en/date -and-time-functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-03T14:19:07.007

我知道这是一个老问题，但为了可能节省其他人的时间并总结上述答案，以应对需要 (1) 本月日期和 (2) 前 2 个月日期的情况（在显示数据统计信息时很常见） ：

```
WHERE ((timestamp >= NOW() - DATE_FORMAT(CURDATE(), '%Y-%m-01'))
OR  (timestamp >= DATE_FORMAT(CURDATE(), '%Y-%m-01') - INTERVAL 2 MONTH)) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-10-13T10:01:34.693

```
WHERE ((timestamp >= NOW() - DATE_FORMAT(CURDATE(), '%Y-%m-01'))
OR  (timestamp >= DATE_FORMAT(CURDATE(), '%Y-%m-01') - INTERVAL 2 MONTH)) 
```

# javascript - JSON .get 的简单存储结果在数组中？

> ID：15397016
> 
> 赞同：0
> 
> 时间：2013-03-13T21:40:11.400
> 
> 标签：javascript, jquery, asp.net-mvc, json

简单地说，我正在尝试从 json get 方法创建一个字符串数组。该方法返回一个列表，它来自一个 MVC 控制器方法，`JsonResult output(string centreName)`在我的 javascript 中，我有这个：

```
 <script src="../../Content/jquery.js"></script>
    <script type="text/javascript">
        jQuery(function () {
            jQuery("#centres").change(function () {
                var _this = jQuery(this);
                var selectedCentre = _this.val();
                $.getJSON("/Centres/output?centreName=" + selectedCentre, 
function(results) {
    // store the results here in a new array, so I can do something with them
                });
            });
        });
    </script> 
```

现在上面的所有代码都可以正常工作，我只是不知道如何正确处理结果。如何制作一个不错的“字符串数组 [] = 结果”之类的东西？

**编辑**

这是需要将结果作为字符串数组的方法：

```
document.getElementById("container2").innerHTML = "";
                        var div;
                        for (var i = 0; i < document.getElementById("centres").value; i++) {
                            div = document.createElement("div");
                            div.className = "class1";
                            div.innerHTML = "Shop " + data[i];
                            div.innerHTML += "<br>";
                            div.innerHTML += "Floor Space: <b>" + spaces[i] + " m2 </b>";
                            div.style.width = "100px";
                            div.style.height = "100px";
                            div.style.padding = "0px";
                            div.style.float = "left";
                            document.getElementById("container2").appendChild(div);
                        } 
```

如您所见，我需要遍历每个商店代码（data[i]）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:43:52.517

您不需要将它存储在一个不错的“字符串数组[]”中。.NET JSON 序列化程序应该为您序列化您的 JSON，这基本上是一个类似数组的结构。只需直接访问结果。

```
$.getJSON("/Centres/output?centreName=" + selectedCentre, function(results) {
    var data = results;

    // You can iterate over the data (or results directly) and manipulate it as needed
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:44:16.680

在 json Universe 上，列表和数组是相同的。没有具体的实现`List`，你只有数组。`results`除非服务器返回单个对象，否则可能已经是一个对象数组。

如果您尝试从对象中提取特定字段，则可以使用[`$.each()`](http://api.jquery.com/each/)语句来迭代数组并获取必要的信息。

```
$.each(results, function(index, element) {
  // your logic here
} 
```

**编辑**

if`results`是一个字符串数组，您需要将它们转换为单个字符串，您可以使用`join`方法

```
var results = ["Banana", "Orange", "Apple", "Mango"];
var joinedString = results.join();
//joinedString = 'Banana,Orange,Apple,Mango' 
```

如果您需要选择不同的分隔符，您可以使用这种方法

```
var results = ["Banana", "Orange", "Apple", "Mango"];
var joinedString = results.join(' and ');
//joinedString = 'Banana and Orange and Apple and Mango' 
```

# maven - 将现有的 Nexus 工件重新部署到 Weblogic

> ID：15397019
> 
> 赞同：1
> 
> 时间：2013-03-13T21:40:14.757
> 
> 标签：maven, hudson, weblogic, nexus, hudson-plugins

我有一个构建 Maven 项目的 Hudson 构建作业，并将生成的工件重新部署到 Nexus 和远程 Weblogic 实例以进行测试。我正在尝试创建一个单独的作业，将相同的工件部署到另一个 Weblogic 实例，但这样做无需重新编译项目并制作新的 WAR。这里的基本原理是，这些位已经存在并在开发环境中进行了测试，只有通过测试才能将它们提升到开发集成环境。这可能吗？

到目前为止，我已经尝试过： 1) 使用现有的 POM 并在命令行上声明 mvn deploy wls:undeploy wls:deploy - 这会将项目 WAR 部署到新环境，但也会从头开始构建项目。部署目标还替换了之前在 Nexus 中构建的项目工件（快照），这是有道理的。

2) 尝试创建一个新的 POM，其中来自先前构建的工件是一个依赖项，并且 wls-maven-plugin 是唯一声明的插件。由于不同的原因，在这里运行 mvn wls:deploy 也会失败。

有没有办法以我缺少的简洁方式执行这种部署？我为此使用了错误的机制（Maven）吗？我应该使用像 Ant 这样更基于过程的语言吗？任何见解将不胜感激。（另外，如果需要更多信息，请告诉我！）

编辑：如果构建的工件在目标目录中本地可用，并且该位置由属性文件引用，则重新部署成功。根据[Oracle 网站上](http://docs.oracle.com/cd/E24329_01/web.1211/e24368/maven.htm#CHEIJJHD)的文档，该参数可以是本地坐标或 GAV 坐标。如果我使用 GAV 坐标直接从 Nexus 拉出工件，然后将其推送到远程 Weblogic，我会收到以下 Maven 错误：

`[INFO] Scanning for projects... [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building MyWebApp 0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] [INFO] --- wls-maven-plugin:12.1.1.0:redeploy (default-cli) @ MyWebApp-deploy-DIT --- [INFO] ++====================================================================++ [INFO] ++ wls-maven-plugin: redeploy ++ [INFO] ++====================================================================++ [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 0.480s [INFO] Finished at: Wed Mar 20 10:19:22 EDT 2013 [INFO] Final Memory: 4M/122M [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal com.oracle.weblogic:wls-maven-plugin:12.1.1.0:redeploy (default-cli) on project MyWebApp-deploy-DIT: Invalid file. Please provide an existing fully qualified path of the file. -> [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions, please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException`

为了完整起见，我还发布了用于执行选项 #2 的 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <name>MyWebApp</name>
    <parent>
        <groupId>org.myorg.maven</groupId>
        <artifactId>MyOrg-Parent</artifactId>
        <version>2.0</version>
    </parent>
    <groupId>org.myorg.apps</groupId>
    <artifactId>MyWebApp-deploy-DIT</artifactId>
    <version>0.1-SNAPSHOT</version>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <drools.version>5.4.0.Final</drools.version>
        <REGION>DEV</REGION>
        <MyWebApp_LOGDIR>.</MyWebApp_LOGDIR>
        <webapp.jsp.dir>src/main/webapp/WEB-INF/jsp</webapp.jsp.dir>
        <buildMsgJsp>buildMsg.jsp</buildMsgJsp>
        <DEPLOYMENT_NAME>MyWebApp</DEPLOYMENT_NAME>
        <MIDDLEWARE_HOME>/ci/oracle/middleware</MIDDLEWARE_HOME>
        <WLS_ADMIN_HOST>lncibd008</WLS_ADMIN_HOST>
        <WLS_PORT>7001</WLS_PORT>
        <STAGE>true</STAGE>
        <!--<SOURCE>${project.build.directory}/MyWebApp-3.7-SNAPSHOT.war</SOURCE>-->
        <SOURCE>org.myorg.apps:MyWebApp:war:3.7-SNAPSHOT</SOURCE>
        <WLS_TARGETS>server1</WLS_TARGETS>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.myorg.apps</groupId>
            <artifactId>MyWebApp</artifactId>
            <version>3.7-SNAPSHOT</version>
            <type>war</type>
        </dependency>
    </dependencies>
    <build>
        <plugins>

            <plugin>
                <groupId>com.oracle.weblogic</groupId>
                <artifactId>wls-maven-plugin</artifactId>
                <version>12.1.1.0</version>
                <configuration>
                    <weblogicHome>wlserver_12.1</weblogicHome>
                    <upload>true</upload>
                    <remote>true</remote>
                    <stage>${STAGE}</stage>
                    <verbose>true</verbose>
                    <userConfigFile>wlsconfig/${WLS_ADMIN_HOST}${WLS_PORT}.config</userConfigFile>
                    <userKeyFile>wlsconfig/${WLS_ADMIN_HOST}${WLS_PORT}.key</userKeyFile>
                    <adminurl>http://${WLS_ADMIN_HOST}:${WLS_PORT}</adminurl>
                    <targets>${WLS_TARGETS}</targets>
                    <source>${SOURCE}</source>-->
                    <name>${DEPLOYMENT_NAME}</name>
                    <middlewareHome>C:\Oracle\Middleware</middlewareHome>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

如您所见，我有一个注释掉的和一个 GAV 。本地成功，GAV 失败并出现上述错误。

# events - 通过“CloudBlockBlob”类监控上传/下载进度？

> ID：15397022
> 
> 赞同：3
> 
> 时间：2013-03-13T21:40:28.973
> 
> 标签：events, azure-blob-storage

如果您`Stream`通过官方[`CloudBlockBlob`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblockblob.aspx)课程将 a 传输到 Azure Blob 存储，如何监控上传/下载本身的进度？我期待该类发生一些事件，因为它是一个网络 IO 类，但似乎不存在。

现在我们的应用程序将整个流发送到`CloudBlockBlob`它似乎已经完成了 - 但我们知道`CloudBlockBlob`仍在上传流中传递给它的字节，所以它真的没有完成......

我错过了什么吗？是一种完全不同的方式（无需重新发明轮子！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:47:34.063

[请参阅http://blogs.msdn.com/b/kwill/archive/2013/03/06/asynchronous-parallel-block-blob-transfers-with-progress-change-notification-2-0.aspx](http://blogs.msdn.com/b/kwill/archive/2013/03/06/asynchronous-parallel-block-blob-transfers-with-progress-change-notification-2-0.aspx)上的代码。它在文件流周围使用 ProgressStream 包装器，以便在传输数据时引发事件。

# python - 来自包的python和从源代码编译的python之间的性能差异

> ID：15397024
> 
> 赞同：1
> 
> 时间：2013-03-13T21:40:32.373
> 
> 标签：python, django, performance, apache, redhat

我想知道我可以从 rpm（或使用 yum）安装的 Python 解释器和从源代码编译的 Python 解释器（带有用于编译的先验设置好的标志）之间是否存在任何记录在案的性能差异。

我使用 Redhat 6.3 机器作为 Django/Apache/Mod_WSGI 生产服务器。我已经以不同的设置和不同的顺序正确编译了所有内容。但是，我通常将 build-dev 依赖项保留在此类机器上。出于各种与自我相关（或多或少实际）的原因，我想使用 Python-2.7.3。默认情况下，Redhat 附带 Python-2.6.6。我想我可以接受它，但它会以某种方式伤害我（我将不得不放弃并找到一些图书馆和我的自我的替代品）。

然而，除了我的自我和依赖之外，我想知道对 Django 服务器的性能有什么影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T21:44:10.237

如果您使用编译 RPM 版本时使用的完全相同的标志进行编译，您将获得一个完全一样快的二进制文件。您可以通过查看 RPM`spec`文件来获取这些标志。

但是，有时您可以做得比预建版本*更好。*例如，您可以让编译器针对您的特定 CPU 进行优化，而不是针对“通用 386 兼容”（或任何 RPM 优化对象）。当然，如果您不知道自己在做什么（或故意这样做），也总是可以构建比预构建版本慢的东西。

同时，2.7.3 在某些方面比 2.6.6 更快。他们中的大多数通常不会影响你，但如果他们这样做，他们可能会是一个巨大的胜利。

最后，对于绝大多数 Python 代码，Python 解释器本身的速度与您的整体性能或可伸缩性无关。（如果是这样，您可能想尝试使用 PyPy、Jython 或 IronPython 来替换 CPython。）对于 WSGI 服务尤其如此。如果你没有做任何缓慢的事情，Apache 可能会成为瓶颈。如果你*做*的事情很慢，它可能是 I/O 绑定的，并且超出了 Python 的控制（比如读取文件）。

最终，您可以知道获得多少收益的唯一方法是尝试两种方式和性能测试。但是，如果您只是想要一个经验法则，我会说期望获得 0% 的收益，如果幸运的话，会感到惊喜。

# boost-asio - 是否可以将 boost::asio 与 DTLS 一起使用？

> ID：15397026
> 
> 赞同：3
> 
> 时间：2013-03-13T21:40:41.987
> 
> 标签：boost-asio, dtls

我认为标题说明了大部分内容，但我也有兴趣了解在没有现有解决方案的情况下如何将 DTLS 支持纳入 asio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-15T00:31:01.250

ASIO 本身不支持 DTLS，但有一个 GitHub 库[asio_dtls](https://github.com/sdamm/asio_dtls)已将支持（正在进行中）添加到 ASIO。

它被[提交](https://github.com/chriskohlhoff/asio/pull/129)到 ASIO 中，但是 ASIO 的作者已经有一段时间没有接受新功能到 ASIO 中了，很可能是因为他努力将 ASIO 提交到 C++ 标准中占用了他所有的业余时间。

# python - PyQt DateEdit 小部件不默认为系统时间

> ID：15397030
> 
> 赞同：5
> 
> 时间：2013-03-13T21:40:57.823
> 
> 标签：python, qt, pyqt, pyqt4, pyside

我正在创建一个 GUI 并尝试使用 DateEdit 从用户那里获取日期。它工作正常，除了当我启动应用程序时，默认日期是 2000 年 1 月 1 日。如何让 DateEdit 小部件默认为系统时间？我在 PyQt 文档中找到的任何内容都没有帮助我。

```
self.date = QtGui.QDateEdit(self.wizardPage2)
self.date.setMaximumDateTime(QtCore.QDateTime(QtCore.QDate(7999, 12, 28), QtCore.QTime(23, 59, 59)))
self.date.setCalendarPopup(True) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T20:44:05.200

您正在寻找[QDateTime.currentDateTime()](http://doc-snapshot.qt-project.org/4.8/qdatetime.html#currentDateTime)：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.dateEdit = QtGui.QDateEdit(self)
        self.dateEdit.setDateTime(QtCore.QDateTime.currentDateTime())
        self.dateEdit.setMaximumDate(QtCore.QDate(7999, 12, 28))
        self.dateEdit.setMaximumTime(QtCore.QTime(23, 59, 59))
        self.dateEdit.setCalendarPopup(True)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.dateEdit)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# macos - OS X 10.6+ 按键记录，带有任何应用程序中每个按键的时间戳

> ID：15397033
> 
> 赞同：0
> 
> 时间：2013-03-13T21:41:03.120
> 
> 标签：macos, logging, timestamp, key

我目前正在为研究实验室整理工作流程。其中一个组件要求我们知道在应用程序中按下任何键的确切时间。

我尝试了几个商业键盘记录器（Backtrack，Aobo），但它们无法为每次按键添加时间戳。相反，它们会在程序打开或窗口激活的情况下为一系列按键添加时间戳。

关于如何记录每次按下带有单独时间戳的按键的任何想法？

# objective-c - Xcode 在 prepareToPlay 上停止

> ID：15397035
> 
> 赞同：21
> 
> 时间：2013-03-13T21:41:08.443
> 
> 标签：objective-c, xcode, avaudioplayer

使用 AVAudioPlayer 向正在运行的应用程序添加声音，它会在 prepareToPlay 上停止/挂起。请注意，它也会停止/挂起。多次点击“继续执行程序”可使应用程序恢复。只有在模拟器中运行程序时才会出现此问题。

使用 Xcode 4.6

代码片段：

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface ViewController : UIViewController <AVAudioPlayerDelegate>

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()
{
}

@property (nonatomic, strong) AVAudioPlayer *audioPlayer;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initilizeAudio];
}

- (void)initilizeAudio
{
    NSError *error = nil;
    NSURL *audioURL = [[NSBundle mainBundle] URLForResource:@"Background" withExtension:@"mp3"];

    self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:&error];
    if (error)
    {
        NSLog(@"Error in audioPlayer: %@", [error localizedDescription]);
    }
    else
    {
        [self.audioPlayer setDelegate:self];
        [self.audioPlayer prepareToPlay];
    }
}

@end 
```

堆栈跟踪

```
0 __cxa_throw
21 -[AVAudioPlayer prepareToPlay]
22 -[ViewController viewDidLoad]
.
.
. 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-14T07:27:16.623

问题是我通常使用设置为“所有异常”的断点进行开发，而实际抛出的异常是 __cxa_throw。这显然是在用于实现 AVAudioPlayer 的 C++ 库中。通过将断点更改为“所有 Objective-C 异常”，程序运行良好。（这可以通过编辑断点并将 Exception 字段更改为 Objective-C 来完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-05T00:21:31.373

我也有这个问题。上面的解决方案有效，但我认为有更好的方法来解决它。

作者建议忽略的错误表明 mac 正在尝试将音频发送到无法正常工作的设备。我猜代码是用 C 编写的，因此将异常转换为“仅 Objective-c”确实可以使异常静音。

真正的解决方法是让音频设备再次工作。对我来说，失败的原因是我正在切换一些音频输入和输出，但是（似乎）IOS模拟器已经记住了旧的设置。因此，当我尝试此线程中的各个步骤时：

[错误“！dat”试图设置（空）音频设备的采样率](https://stackoverflow.com/questions/6752192/error-dat-trying-to-set-the-null-audio-devices-sample-rate)

我让音频再次工作，它停止抛出任何异常。

# html - 在 HTML5 Canvas 上绘制虚线？

> ID：15397036
> 
> 赞同：41
> 
> 时间：2013-03-13T21:41:15.297
> 
> 标签：html, canvas, line

我想在 HTML5 画布上画一些虚线。但我找不到有这样的功能。画布路径只能绘制实线。人们曾尝试使用 CSS 中的一些边框功能（点、虚线）来绘制虚线，但它们只能是水平或垂直的。所以我陷入了困境。我还找到了一个名为[RGraph](http://www.rgraph.net/html5-canvas)的库，它可以绘制虚线。但是使用外部库会使绘图变得非常缓慢。那么有没有人知道如何实现这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-12T09:47:22.790

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
ctx.setLineDash([5, 3]);/*dashes are 5px and spaces are 3px*/
ctx.beginPath();
ctx.moveTo(0,100);
ctx.lineTo(400, 100);
ctx.stroke(); 
```

[JSFIDDLE](https://jsfiddle.net/y908kv0h/ "JSFIDDLE")

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-12T18:15:02.200

这是创建虚线的更简单方法：

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

ctx.setLineDash([5, 15]);

ctx.beginPath();
ctx.moveTo(0,100);
ctx.lineTo(400, 100);
ctx.stroke(); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-17T18:40:07.533

仅供参考 - 虚线和虚线是现在规范中的一些新画布功能的一部分 - 并且已经在 Chrome 中实现（现在 - 2020 年 1 月 - 可能还有其他浏览器）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-06-22T22:40:09.893

您可以使用该`setLineDash()`方法。

```
context.setLineDash([2,3]); 
```

[http://www.rgraph.net/blog/2013/january/html5-canvas-dashed-lines.html](http://www.rgraph.net/blog/2013/january/html5-canvas-dashed-lines.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-13T22:39:16.963

**在画布上绘制虚线**

我提供这个**不是**作为一个完整的解决方案，而是作为一种在任何 2 点（任意角度的线）之间绘制虚线的简单方法。它画得非常快。

您可以对其进行修改以适应虚线的需要。绘图破折号不应明显减慢绘图速度。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/pW4De/](http://jsfiddle.net/m1erickson/pW4De/)

```
 var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        DrawDottedLine(300,400,7,7,7,20,"green");

        function DrawDottedLine(x1,y1,x2,y2,dotRadius,dotCount,dotColor){
          var dx=x2-x1;
          var dy=y2-y1;
          var spaceX=dx/(dotCount-1);
          var spaceY=dy/(dotCount-1);
          var newX=x1;
          var newY=y1;
          for (var i=0;i<dotCount;i++){
                  drawDot(newX,newY,dotRadius,dotColor);
                  newX+=spaceX;
                  newY+=spaceY;              
           }
           drawDot(x1,y1,3,"red");
           drawDot(x2,y2,3,"red");
        }
        function drawDot(x,y,dotRadius,dotColor){
            ctx.beginPath();
            ctx.arc(x,y, dotRadius, 0, 2 * Math.PI, false);
            ctx.fillStyle = dotColor;
            ctx.fill();              
        } 
```

# java - 用'_'替换包含元音的字符串

> ID：15397037
> 
> 赞同：-5
> 
> 时间：2013-03-13T21:41:15.670
> 
> 标签：java

我正在尝试编写一个程序来打印输入的用户字符串，并将元音替换为_。由于编译错误，我在程序无法打印的 if 部分遇到问题。

```
import java.util.Scanner;
public class mathpowers {
    public static void main(String args[])
    {
        Scanner a = new Scanner (System.in);
        System.out.print("Enter string: ");
        String s = a.nextLine();
        int count = 0;
        for (char c : s.toCharArray())
        {
            if (c=='a' || c=='e' || c=='i' || c=='o' || c=='u') {
            {
                c = '_';
                System.out.println (c[i]);
            }
        }
        System.out.println("Your string has " + count + " upper case letters.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:48:23.150

您的代码存在许多问题并且无法编译。

*   替换`c[i]`为`c`。`c`是一个`char`，不是一个`String`。（*你甚至没有`i`...*）
*   您正在打印`count`，但您从不增加它。
*   即使你会 count `count`，你也会在打印时计算元音而不是大写。
*   您正在分配`"_"`并`c`打印它，您的输出将始终为`_`.

也许你想做这样的事情：

```
Scanner a = new Scanner (System.in);
System.out.print("Enter string: ");
String s = a.nextLine();
String res = "";
for (char c : s.toCharArray())
{
    if (c=='a' || c=='e' || c=='i' || c=='o' || c=='u') {
        res = res + '_';
    }
    else
        res = res + c;
}
System.out.println(res); //Will contain the string with the vowels replaced with _ 
```

或者..更好的代码：

```
Scanner a = new Scanner (System.in);
System.out.print("Enter string: ");
String s = a.nextLine();
String[] vals = {"a", "u", "o", "e", "i"};
for(String val : vals)
    s = s.replaceAll(val, "_");
System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:47:05.817

```
System.out.println(c[i]); 
```

应该

```
System.out.println(c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:50:19.530

首先，需要在第一行`import`前面的关键字。`java.util.Scanner;`您还需要`{`在下面的代码中删除一个额外的

```
if (c=='a' || c=='e' || c=='i' || c=='o' || c=='u') {
{ //<- This is not needed as you have another on on the end of the line above
c = '_';
System.out.println (c[i]);
}
} 
```

同样`c`在上面的代码中 a`char`不是数组，因此您只需要调用`System.out.println (c);`，但您也只需`'_'`在调用之前分配给 c ，因此您只会打印出`_`. 另一个问题是您只更改由创建的数组中的值，`s.toCharArray()`因此您需要在 for 循环之前进行此调用，然后在循环之后使用它来创建一个新字符串以分配给`s`.

最后，你永远不会增加`count`，所以你最后打印出来的总是说 0 但我想你稍后会解决这个问题。

如果您还没有使用像[Eclipse](http://www.eclipse.org/downloads/)或[NetBeans](http://netbeans.org/downloads/)这样的集成开发环境 (IDE)，我建议您下载一个，因为它会像文字处理器突出显示拼写和语法错误一样向您突出这些错误。

# php - 有没有一种方法可以在不刷新页面的情况下动态更改 Twig 块中的内容？

> ID：15397040
> 
> 赞同：1
> 
> 时间：2013-03-13T21:41:31.523
> 
> 标签：php, jquery, ajax, symfony, twig

我不确定我的标题是否准确，所以我会尽力在这里解释。

我试图做的是用 Ajax 调用我的控制器并让它更改页面上的内容而不重新加载（内容由块定义）。因此，对于一个松散的示例，在主页到达时，主页的内容将是：

```
# routing.yml
StackQuestionBundle_osgs_home:
    pattern:  /
    defaults: { _controller: StackQuestionBundle:Pages:index }
    options:
        expose: true

StackQuestionBundle_osgs_page:
    pattern:  /page
    defaults: { _controller: StackQuestionBundle:Pages:page }
    options:
        expose: true 
```

* * *

```
<!-- @StackQuestionBundle:Pages:index.html.twig -->
<header>
     {% block title %} <!-- Title --> {% endblock %}
     <nav> </nav>
</header>

<main>
    <aside> <!-- Sidebar --> </aside>
    <section>        
         {% block content %} <!-- Main Content -->{% endblock %}
    </section>
</main>

<footer>
    {% block footer %} <!-- content --> {% endblock %}
    <nav> </nav>
</footer> 
```

* * *

```
// JS
$('nav button.test').click(function() {
    $.ajax({
        url: "{{ path('OSGSBundle_osgs_page') }}",
        type: "POST",
        success: function(data) {
            //Change the content in the blocks!
            //alert("It worked!")
        }
    });
}); 
```

* * *

```
 # PagesController.php

namespace MyNameSpace\StackQuestionBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;

class PagesController extends Controller
{
    public function indexAction()
    {
        return $this->render('OSGSBundle:Pages:index.html.twig');
    }
    public function pageAction(Request $request)
    {
        $isAjax = $this->get('Request')->isXMLHttpRequest();
        if ($isAjax)
        {
            // Replace/Append the content in index.html.twig with the content from page.html.twig
        }
        else
        {
            // Load page normally if navigated to http://localhost/page
            return $this->render('OSGSBundle:Pages:page.html.twig');
        }
    }
} 
```

* * *

这就是我当前的代码的样子。到目前为止，我已经设法仅根据 DOM 元素替换数据。因此，例如，我将替换`<main>`标签中的所有信息。我只想替换我的 Twig 块标签中的内容。旁注：我正在使用 FOSJSRoutingBundle 来更改 URL。

在此先感谢，感谢您的帮助/建议。我希望这不会太混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:03:30.880

我想没有通过 javascript 更改 twig 块的通用方法，因为 javascript 是客户端，而 twig 是服务器端。

您必须通过将块包装在 div 或任何带有 id 的标签中来手动完成。

```
<section id="block-content">        
         {% block content %} <!-- Main Content -->{% endblock %}
</section> 
```

然后，您可以应用正常的 ajax 行为并在服务器上为响应呈现一个 ajax 模板，正如 toine 指出的那样，并使用 id 更改元素中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:47:43.323

1）为您的块添加一个新的树枝文件：myblock.html.twig

2）更新你的控制器

```
if ($isAjax)
{
    return $this->render('OSGSBundle:Pages:myblock.html.twig');
} 
```

# c# - smtpClient 不读取 Web.config

> ID：15397043
> 
> 赞同：4
> 
> 时间：2013-03-13T21:41:37.033
> 
> 标签：c#, asp.net-mvc-4, web-config, smtpclient

在我的 MVC4 应用程序中，我正在尝试使用 Web.config 发送邮件以进行配置设置。我有剪纸作为模拟 SMTP 服务器运行。当我尝试使用 smtpClient 并在我的代码中设置 host="localhost" 时（也就是说，不是通过 Web.config），一切正常。

我的 Web.config

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="someone@somewhere.net">
        <network
           host="localhost"
           userName=""
           password=""
           defaultCredentials="true" />
      </smtp>
    </mailSettings>
  </system.net> 
```

我的代码

```
SmtpClient client = new SmtpClient();
client.Send(myEmailObject); 
```

错误

未指定 SMTP 主机

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T23:23:44.740

ASP.NET MVC 应用程序中有多个 web.config。为了使大多数系统相关设置生效，必须将它们放在应用程序的根 web.config 中。这意味着服务器将其视为“~/web.config”并且位于 Visual Studio 解决方案的根文件夹中。

# email - 有没有办法将 TeamCity 中构建步骤中的错误添加到电子邮件通知中？

> ID：15397047
> 
> 赞同：2
> 
> 时间：2013-03-13T21:41:53.110
> 
> 标签：email, powershell, teamcity

我有一个 Powershell 构建步骤，我想将脚本中的一些消息添加到发送给通知列表中的人的结果电子邮件中。我看到这种情况发生在将失败次数和错误添加到电子邮件中的测试中。但是，如何将 PowerShell 构建步骤中的自定义消息添加到生成的电子邮件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:43:28.310

您是否尝试过使用服务消息？见这里：[http ://confluence.jetbrains.com/display/TCD7/Build+Script+Interaction+with+TeamCity](http://confluence.jetbrains.com/display/TCD7/Build+Script+Interaction+with+TeamCity)

你可以使用

```
write-host "##teamcity[message text='Its broken again' errorDetails='Your exception message' status='FAILURE']" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T08:37:05.080

为了将错误包含在电子邮件中，我发现我需要添加“compilationStarted”和“compilationFinished”标签，例如：

##teamcity[compilationStarted 编译器='Solution.sln']

##teamcity[message text='1>File.cpp(1): error C2065: "stackoverflow" : undeclared identifier' status='ERROR']

##teamcity[编译完成编译器='Solution.sln']

我使用 Python 脚本来解析 devenv 的输出，寻找特定的字符串以添加为错误和警告。电子邮件将这些添加到“编译错误”部分下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T12:14:29.177

如果您打算通过管道输出您正在运行的 Powershell 脚本中发生的错误，请尝试在捕获错误对象后将其通过管道传输到 TeamCity 服务消息

这是未经测试的代码，但它可能对您有用：

```
trap [SystemException]
{
    write-host "##teamcity[message text='An error occurred' errorDetails='$_' status='ERROR']";exit 1
} 
```

或者

```
try
{
    # Something...
}
catch
{
    write-host "##teamcity[message text='An error occurred' errorDetails='$_' status='ERROR']";exit 1
} 
```

# c++ - 如何从 std::strings 数组中检索特定元素作为 LPCSTR？

> ID：15397049
> 
> 赞同：0
> 
> 时间：2013-03-13T21:41:58.163
> 
> 标签：c++, arrays, mfc, stdstring, lpcstr

在 C++ 中，我有一个名为的字符串数组变量：

```
...
/* set the variable */
string fileRows[500];
...
/* fill the array with a file rows */
while ( getline(infile,sIn ) )
{
    fileRows[i] = sIn;
    i++;
} 
```

和一个有这个的对象：

```
string Data::fileName(){
    return (fileRows);
} 
```

我想做一个返回数组的函数，然后我想这样称呼它：

```
Data name(hwnd);
MessageBox(hwnd, name.fileName(), "About", MB_OK); 
```

但我得到这个错误：

> 无法将参数 '2' 的 'std::string* {aka std::basic_string *}' 转换为 'LPCSTR {aka const char* }' 到 'int MessageBoxA(HWND, LPCSTR, LPCSTR, UINT)'

如果我想显示数组的 5\. 元素，如何转换它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T21:45:09.257

`LPCSTR`只不过是`const char*`. 问题是`Data::fileName()`返回一个[`std::string`](http://www.cplusplus.com/reference/string/string/)对象并且没有隐式转换为`const char*`.

要从 的`std::string`形式中检索字符串`const char*`，请使用[`c_str()`](http://www.cplusplus.com/reference/string/string/c_str/)方法，：

```
MessageBox(hwnd, name.fileName().c_str(), "About", MB_OK); 
```

* * *

另请注意，您已经创建了一个对象数组`std::string`：

```
string fileRows[500]; 
```

但是在`Data::fileName()`您试图将其作为单个`std::string`对象返回时：

```
string Data::fileName() {
    return fileRows;
} 
```

不过，我建议您使用`std::vector`而不是 C 样式的数组。

> *如果我想显示数组的 5\. 元素，如何转换它？*

无论您是使用`std::vector`还是继续使用数组，它都将如下所示：

```
std::string Data::fileName() {
    return fileRows[4];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T22:03:43.833

fileRows 是一个包含 500 个元素的数组。如果要返回数组以便以后可以访问第 n 个元素，则应返回指向数组开头的指针。例如：

```
string* Data::fileName(){
        return fileRows;
} 
```

虽然使用它可能更好：

```
const string& Data::getFileName(size_t index){
        return fileRows[index];
} 
```

使用第一种方法，您可以使用以下方法访问第 n 个元素：

```
data.filename()[n]; 
```

所以，如果你想访问数组的第 5 个元素，你应该使用：

```
data.filename()[4]; 
```

另一方面，函数 MessageBox 需要一个 const char *。所以你必须调用 c_str() 方法来获取指针：

```
Data name(hwnd);
MessageBox(hwnd, name.fileName()[4].c_str(), "About", MB_OK); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T21:47:45.783

[std::string::c_str](http://www.cplusplus.com/reference/string/string/c_str/)将为您提供指向包含以 null 结尾的字符序列（即 C 字符串）的数组的指针，或`LPCSTR`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T21:45:20.080

use`std:string`的功能`c_str()`...看看这个[答案](https://stackoverflow.com/questions/1200188/how-to-convert-stdstring-to-lpcstr)

# vba - VBA - 将条件评估为字符串

> ID：15397050
> 
> 赞同：2
> 
> 时间：2013-03-13T21:42:03.853
> 
> 标签：vba, excel

我遇到了一个非常奇怪的场景。在一个函数中，我将收到一串要评估的条件。

例如

```
(a>b and (b=2 or c!=3)) 
```

> 其中 a、b 和 c 是我的变量名。

我尝试并搜索了很多，但没有得到任何有意义的东西。

所以我的问题是：是否可以评估这样的字符串？如果是，请给我一些提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:03:49.307

另一种方法，添加对*Microsoft Script Control的引用*

```
Dim vx As MSScriptControl.ScriptControl
Set vx = New MSScriptControl.ScriptControl

a = 100
b = 200
c = 300
Cond = "(a>b and (b=2 or c<>3))"

With vx
    .Language = "VBScript"
    .AddCode "function stub(a,b,c): stub=" & Cond & ": end function"

    result = .Run("stub", a, b, c)
End With

MsgBox result 
```

请注意，您需要将 != 替换为 <>，因为前者在 VB* 中无效（和/或在 jScript 中无效）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:48:48.217

这是您问题的正确答案，而不仅仅是评论。

你需要：

*   `Microsoft Visual Basic for Applications Extensibility x.x`在 VBIDE 中设置对(Tools/References) 的引用。
*   信任对 VBA 项目对象模型的访问（使用 Google 了解如何为您的 Excel 版本执行此操作）。
*   运行`initValues()`然后调用`getConstantValue("(a>b and (b=2 or c<>3))")`

代码：

```
Option Explicit

Dim a As Long
Dim b As Long
Dim c As Long

Sub initValues()
    a = 3
    b = 2
    c = 4
End Sub

Function getConstantValue(constStr As String) As Variant

    Dim oMod As VBIDE.CodeModule
    Dim i As Long, _
        num As Long

    Set oMod = ThisWorkbook.VBProject.VBComponents("Module1").CodeModule

    For i = 1 To oMod.CountOfLines
        If oMod.Lines(i, 1) = "Function tempGetConstValue() As Variant" Then
            num = i + 1
            Exit For
        End If
    Next i

    oMod.InsertLines num, "tempGetConstValue = " & constStr

    getConstantValue = Application.Run("tempGetConstValue")

    oMod.DeleteLines num

End Function

Function tempGetConstValue() As Variant
End Function 
```

# php - 在动态填充的下拉列表中预选第一个选项

> ID：15397056
> 
> 赞同：0
> 
> 时间：2013-03-13T21:42:20.433
> 
> 标签：php, javascript, jquery

我有一个使用 PHP 从 mySQL 数据库填充的下拉列表。记住这些值可能并不总是相同的，如何预先选择下拉列表中的第一个选项？

这是我的 HTML 中的代码：

```
function loadparameters(selobj, url, nameattr) {
        $(selobj).empty();
        $.getJSON(url, {}, function (data) {
            $.each(data, function (i, obj) {
                $(selobj).append($("</option><option>
               </option>").val(obj[nameattr]).html(obj[nameattr]));
            });
        });
    }

    $(function () {
        loadparameters($('select#parameterType').get(0), 
       'GetParameter.php?GetParameter=parameterType', 'parameterType');}); 
```

..和PHP脚本：

```
<?php

if(!empty($_GET['GetParameter']))
{
$list = $_GET['GetParameter'];
$qry='';
switch($list)
{
    case 'parameterType':
    {
        $qry = "SELECT parameterType FROM Parameters";
        break;
    }
}

if(empty($qry)){ echo "invalid params! "; exit; }

$dbconn = mysql_connect('*******','*******','******') 
        or die("DB login failed!");

mysql_select_db('*****', $dbconn) 
        or die("Database does not exist! ".mysql_error($dbconn));

$result = mysql_query($qry,$dbconn)
        or die("Query $qry failed! ".mysql_error($dbconn));

$rows = array();

 while($rec = mysql_fetch_assoc($result)) 
{
    $rows[] = $rec;
}
mysql_free_result($result);
mysql_close($dbconn);

echo json_encode($rows);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:58:10.713

您的代码中唯一看起来错误的是这一行

```
$(selobj).append($("</option><option></option>").val(obj[nameattr]).html(obj[nameattr])); 
```

为什么关闭/打开/关闭选项标签？

不应该是这样吗？（为了便于阅读，我缩进了代码）

```
$(selobj).append(
    $("<option></option>") // only open/close tag
        .html(obj[nameattr]) // this injects HTML
); 
```

或者

```
$(selobj).append(
    $("<option></option>") // only open/close tag
        .text(obj[nameattr]) // this only injects text
); 
```

如果您解决此问题，则应预先选择第一个选项。未预先选择它的原因是因为您的浏览器可能会自动使用空选项自行修复此问题。

此外，我发现下面的语法更具可读性：

```
var option = $("<option></option>").text(obj['nameattr']);
$(selobj).append(option); 
```

# php - Android 安全性：保存私有字符串

> ID：15397058
> 
> 赞同：0
> 
> 时间：2013-03-13T21:42:26.940
> 
> 标签：php, android, mysql, string, security

我对 Android 安全有一个特定的问题。

首先，我将描述我的问题：我想通过 PHP 连接到数据库。但是每个人都可以从我用来连接 PHP 文件的 apk 中提取链接。这导致了问题：每个人都可以通过调用此链接来操作我的数据库。我想防止 SQL 注入。

我正在寻找解决这个问题的方法。我的第一个想法，也可能是最简单的想法，是创建一个完全私有的字符串，用于对 PHP 文件的访问进行身份验证。但我不知道，我如何保存这样的字符串而不会有从代码中提取的风险（例如，使用 Strings.xml，或者只是将它写在我的代码中）。有没有一种简单的方法可以在我的 APK 中使字符串完全私有（这样没有人可以提取它）？或者有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:45:52.790

对您的应用程序进行逆向工程并找出“秘密”网址并没有真正的安全措施。

我建议您使用某种用户身份验证来保护该 URL。无论哪个客户端尝试访问它，都应该保护 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:18:05.160

可以检索/欺骗/等存储在客户端中的所有内容。在对数据库运行命令之前，您需要让客户端对服务器进行身份验证。

您需要保护您的数据库免受未经授权的访问。现在听起来你只是通过隐藏 URL 来使用“通过默默无闻的安全性”。这是不好的做法。有人找到你不想找到的人只是时间问题。它甚至不需要逆向工程，只需看一下路由器日志。

此外，[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)是指有人将恶意代码注入到 SQL 查询中，该查询是由未正确清理它的代码制作的。此攻击在经过身份验证的会话内起作用。这也是您需要注意的事情，但这不是您在问题中描述的风险。

# git - 如何在我的机器上获得特定的拉取请求？

> ID：15397059
> 
> 赞同：11
> 
> 时间：2013-03-13T21:42:29.793
> 
> 标签：git, github

有人向我发送了拉取请求。在我合并它之前，我想看看我机器上的变化。我怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-13T21:42:59.107

来自[http://community.elgg.org/pages/view/1123557/how-to-check-out-a-pull-request-for-testing](http://community.elgg.org/pages/view/1123557/how-to-check-out-a-pull-request-for-testing)

对于拉取请求 #123：

```
git fetch origin pull/123/head:pr-123
git checkout pr-123 
```

# php - 用 PHP 从远程服务器保存图像

> ID：15397067
> 
> 赞同：1
> 
> 时间：2013-03-13T21:43:23.610
> 
> 标签：php, cakephp, curl

我需要从远程站点保存图像。我的主机不允许 file_get_contents，所以我正在尝试使用 curl。我正在使用代码获取损坏的图像。请帮忙！

```
 $destination = realpath("../../app/webroot/img/uploads") . "/" . $facebook_id . "." . "gif";

    // Delete previous pic
    if (file_exists($destination)) {
        unlink($destination);
    }

    // Save new pic
    $remoteUrl = "https://graph.facebook.com/" . $facebook_id . "/picture";

    $ch = curl_init($remoteUrl);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    $rawdata = curl_exec($ch);
    curl_close($ch);
    $fp = fopen($destination, 'w');
    fwrite($fp, $rawdata);
    fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:02:31.320

您的服务器似乎正在将 graph.facebook.com 解析为由于某种原因未连接的 IPv6 地址。如果您使用的是 php5.3+，您可以尝试强制 curl 使用 IPv4：

`curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:44:49.810

`$fp = fopen($destination, 'wb');`

相反，将它们作为二进制文件打开！:)

# drawing - Libgdx - 如何在scene2d的正确位置绘制填充矩形？

> ID：15397074
> 
> 赞同：12
> 
> 时间：2013-03-13T21:43:55.470
> 
> 标签：drawing, game-engine, libgdx, shapes, rectangles

我正在使用scene2d。这是我的代码：

```
group.addActor(new Actor() {

    @Override
    public Actor hit(float arg0, float arg1) {
        return null;
    }

    @Override
    public void draw(SpriteBatch batch, float arg1) {
        batch.end();
        shapeRenderer.begin(ShapeType.FilledRectangle);
        shapeRenderer.setColor(Color.RED);
        shapeRenderer.filledRect(0, 0, 300, 20);
        shapeRenderer.end();
        batch.begin();
    }
}); 
```

问题是它相对于*屏幕*（x = 0，y = 0）绘制这个矩形，但我需要相对于我的*group*绘制它。但是，如果我用以下方法绘制其他实体：

```
batch.draw(texture, 0, 0, width, height); 
```

它正确地绘制在（x = 0，y = 0）相对于我的组（距组左下角 0,0 像素）。

任何建议如何在scene2d中实现形状绘制？有人可以解释为什么这两个电话的工作方式不同吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T22:16:39.850

[ShapeRenderer](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html)有自己的变换矩阵和投影矩阵。这些与scene2d[舞台](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Stage.html)使用的[SpriteBatch中的那些是分开的。](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html)[如果您更新 ShapeRenderer 的矩阵以匹配调用Actor.draw()](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html#draw%28com.badlogic.gdx.graphics.g2d.SpriteBatch,%20float%29)时 scene2d 使用的矩阵，那么您应该得到您想要的结果。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-16T09:27:24.317

正如 Rod Hyde 所提到的，ShapeRenderer 有自己的变换矩阵和投影矩阵。所以你必须先得到 SpriteBatch 的投影矩阵。我不确定是否有一种优雅的方式来做到这一点，我是这样做的：

```
public class myActor extends Actor{

    private ShapeRenderer shapeRenderer;
    static private boolean projectionMatrixSet;

    public myActor(){
        shapeRenderer = new ShapeRenderer();
        projectionMatrixSet = false;
    }

    @Override
    public void draw(SpriteBatch batch, float alpha){
        batch.end();
        if(!projectionMatrixSet){
            shapeRenderer.setProjectionMatrix(batch.getProjectionMatrix());
        }
        shapeRenderer.begin(ShapeType.Filled);
        shapeRenderer.setColor(Color.RED);
        shapeRenderer.rect(0, 0, 50, 50);
        shapeRenderer.end();
        batch.begin();
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-08T02:37:23.183

对我来说最好的解决方案。因为当您使用 ShapeRenderer 时，它不会对移动/缩放相机做出反应。

```
public class Rectangle extends Actor {

    private Texture texture;

    public Rectangle(float x, float y, float width, float height, Color color) {
        createTexture((int)width, (int)height, color);
        setX(x);
        setY(y);
        setWidth(width);
        setHeight(height);
    }

    private void createTexture(int width, int height, Color color) {
        Pixmap pixmap = new Pixmap(width, height, Pixmap.Format.RGBA8888);
        pixmap.setColor(color);
        pixmap.fillRectangle(0, 0, width, height);
        texture = new Texture(pixmap);
        pixmap.dispose();
    }

    @Override
    public void draw(Batch batch, float parentAlpha) {
        Color color = getColor();
        batch.setColor(color.r, color.g, color.b, color.a * parentAlpha);
        batch.draw(texture, getX(), getY(), getWidth(), getHeight());
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-13T22:20:19.443

您需要将 Actor 的本地坐标转换为屏幕坐标。假设你的舞台是全屏的，你可以使用[Actor.localToStageCoordinates](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html#localToStageCoordinates(com.badlogic.gdx.math.Vector2))：

```
vec.set(getX(), getY());
this.localToStageCoordinates(/* in/out */ vec);
shapeRenderer.filledRect(vec.x, vec.y, getWidth(), getHeight()); 
```

`vec`私有的在哪里`Vector2d`（您不想在每个渲染调用上分配一个新的）。

这也假设您`ShapeRenderer`被定义为映射到全屏（这是默认设置）。

此外，如果您从 切换`ShapeRenderer`回`SpriteBatch`，请注意`batch`已经调整为 Actor 坐标（因此您可以直接使用`getX()`和。`getY()``batch.draw(...)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-10T20:09:14.960

如果您正在使用`ShapeRenderer`不要忘记使用`setProjectionMatrix()`和`setTransformMatrix()`方法...

`Actor`on`draw`方法内的绘制圆示例：

```
@Override public void draw(Batch batch, float parentAlpha) {

    batch.end();

    if (shapeRenderer == null) {
        shapeRenderer = new ShapeRenderer();
    }

    Gdx.gl.glEnable(GL20.GL_BLEND);
    shapeRenderer.setProjectionMatrix(batch.getProjectionMatrix());
    shapeRenderer.setTransformMatrix(batch.getTransformMatrix());
    shapeRenderer.setColor(mColor.r, mColor.g, mColor.b, mColor.a * parentAlpha);

    shapeRenderer.begin(ShapeRenderer.ShapeType.Filled);
    shapeRenderer.circle(getX() + getWidth()/2 , getY() + getHeight()/2 , Math.min(getWidth(),getHeight())/2 );
    shapeRenderer.end();
    Gdx.gl.glDisable(GL20.GL_BLEND);

    batch.begin();
} 
```

# java - 同一行上的两个 TextView

> ID：15397075
> 
> 赞同：0
> 
> 时间：2013-03-13T21:44:03.647
> 
> 标签：java, android, xml

希望这是一个简单的

我希望同一行上的两个文本视图左对齐。

目前我的布局如图所示：

![在此处输入图像描述](../Images/1811f161ca3e5e24ac00f11711fc2df8.png)

我想要这个布局（注意我修改了画图）：

![在此处输入图像描述](../Images/58e9df171b388d48d1d1571a181d40a6.png)

这是我目前拥有的xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<TextView
    android:id="@+id/txtSetItem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:layout_weight="2" 
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:focusable="false"/>

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusableInTouchMode="false"

    android:focusable="false" /> 
```

```
<TextView
    android:id="@+id/txtSetAmount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:focusable="false" />

<TextView
    android:id="@+id/txtSetPrice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" 
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:focusable="false"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:47:19.693

将您的第一个 TextView 的权重更改为 0（或小于 1）。您赋予它们相同的权重，而 LinearLayout 以使它们具有相同宽度的方式放置它们，这不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:47:40.723

嗯，你的布局不应该编译——TextView 对象上没有属性`android:layout_width`。

要解决此问题，请删除`layout_weight`并设置`layout_width`为`wrap_content`

无论如何，这里：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView  
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:text="This"
/>
<TextView  
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:text="this"
/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:48:17.297

不要使用`weight`. `wrap_content`上使用`layout_width`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T21:51:47.797

这将为您提供所需的内容：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="This" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="This"
        android:paddingLeft="10dp" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T21:55:32.343

解决此问题的一种方法是使用相对布局。您可以使用更改 textView2 上的 android:layout_marginLeft 属性来更改两个文本视图的“接近”或“远”距离。以下属性： android:layout_alignBaseline="@+id/textView1" 确保 tv2 与 tv1 对齐。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="26dp"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_marginLeft="32dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="TextView" />

</RelativeLayout> 
```

# html - HTML5验证

> ID：15397076
> 
> 赞同：0
> 
> 时间：2013-03-13T21:44:03.903
> 
> 标签：html, symfony, twitter-bootstrap

我是 Html5 的新手，所以这个问题对我来说很轻松......

我正在尝试使用 HTML5 内置的表单验证。我使用 Bootstrap 作为我的框架。每次我提交表单时，当它验证时，它会将气泡置于需要修复的表单字段下方。在最终用户看来，好像是错误字段下方的字段（产品名称是错误字段）。我已经包含了我得到的屏幕截图。这是我的标记：感谢您的帮助！！！

```
<div class="control-group">
<label class="control-label required" for="product_name">Name</label>
<div class="controls">
    <input type="text" id="product_name" name="product[name]" required="required" placeholder="Product Name" class="span12" value="" />
</div> 
```

![在此处输入图像描述](../Images/5bb91a194c89f28f3b9048b6022be802.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:35:55.623

在您的 FormBuilder 中，关闭该选项`require`并使用[Form Validation](http://symfony.com/doc/current/book/validation.html)。

ProductType.php 中的示例

```
$builder->add('name', 'text', array(
    'label'    => 'Name',
    'required' => false   // this will remove the HTML5 error which in my opinion is meh
)); 
```

在您的validation.yml

```
Your\AwesomeBundle\Entity\Product:
    properties:
        name:
            - NotBlank: ~  # when you call bindRequest on the form object it will validate the form data against that constraint 
```

确保检查[表单验证文档](http://symfony.com/doc/current/book/validation.html)，因为从 Symfony2.2 开始，一些[约束](http://symfony.com/doc/current/book/validation.html#constraints)已经改变。

# rest - 通过 REST API 的关系方向

> ID：15397083
> 
> 赞同：1
> 
> 时间：2013-03-13T21:44:20.993
> 
> 标签：rest, neo4j

是否可以使用 REST API 定义关系方向（api.neo4j.org/1.9.M05/org/neo4j/graphdb/Direction.html）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:47:01.450

当然是从起始节点开始，发送新关系的JSON描述，`to`字段指向目的节点。请参阅[文档](http://docs.neo4j.org/chunked/snapshot/rest-api-relationships.html#rest-api-create-relationship)。

# ruby-on-rails-3 - 将 CSV 导入现有的 sqlite 数据库表

> ID：15397087
> 
> 赞同：0
> 
> 时间：2013-03-13T21:44:33.013
> 
> 标签：ruby-on-rails-3, csv, import, sqlite, rake-task

我已经在这个论坛上搜索了上述问题的解决方案，但我尝试的一切都没有奏效。基本上，我有一个模型库，在我的 sqlite3 数据库中有相应的库表。我有一个名为 libraries.csv 的 csv 文件，其中包含我要导入数据库的所有数据。

[我尝试了此页面](https://stackoverflow.com/questions/12461260/how-can-i-import-a-csv-file-via-a-rake-task)上第二个答案的方法，但仍然无法正常工作。我确保在 lib/tasks 文件夹中创建了我的 rake 文件 'import_libraries.rake，并且我还将 library.csv 文件保存在该文件夹中，但我不断收到此错误消息：

> 耙中止！
> 不知道如何构建任务“import_libraries”（通过使用 --trace 运行任务查看完整跟踪）

这是我正在使用的当前代码：

```
require 'csv'
desc "Imports a CSV file into an ActiveRecord table"
task :import, [:filename] => :environment do    
    CSV.foreach('libraries.csv', :headers => true) do |row|
      Library.create!(row.to_hash)
    end
end 
```

但是当我运行 bundle exec rake import_libraries 时，我收到上面的错误消息。

有什么我做错了吗？我会很感激你们的帮助。谢谢

*编辑*

我将 rake 文件从 import_libraries.rake 重命名为 import.rake 在运行 bundle exec rake import 时，我现在得到的错误消息是：

> 耙中止！UTF-8 C:/Users/username/rails_app_name/lib/tasks/import.rake:4:in `block in ' Tasks: TOP => import 中的无效字节序列（通过使用 --trace 运行任务查看完整跟踪）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:03:47.267

根据您遇到的错误和您定义的任务，您应该调用：

```
bundle exec rake import  #=> you're currently calling import_libraries which indeed doesn't exist 
```

根据您给任务的名称而不是文件的名称`rake`调用 a （请记住，每个 rake 文件中可以有许多任务）。`task`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:42:12.480

我终于通过使用这段代码解决了这个问题：

```
namespace :csv do

  desc "Import CSV Data"
  task :import => :environment do

    require 'csv'

    csv_file_path = 'lib/tasks/libraries.csv'

    CSV.foreach(csv_file_path, headers: true) do |row|
      row = Library.create!({
        :column_name1 => row[0],
        :column_name2 => row[1],
        :column_name3 => row[2],
        .
        . 
        :last_column => row[6]
      })
      puts "Success!"
    end
  end
end 
```

# rest - Paypal 支付 REST API 调用的随机信用卡数据

> ID：15397092
> 
> 赞同：0
> 
> 时间：2013-03-13T21:44:55.637
> 
> 标签：rest, paypal

有没有人涉足直接信用卡支付的 Paypal 的 REST API 调用？

该资源位于此处：

[https://api.sandbox.paypal.com/v1/payments/payment](https://api.sandbox.paypal.com/v1/payments/payment)

处理此帐户的典型方法是：

1.  通过进行包含 Client_ID 和 Secret 的 API 调用来获取访问令牌。
2.  使用访问令牌，我使用必要的卡特定数据调用支付 API。

在第 2 点中，“必要的卡特定数据”这一行很重要。到目前为止，我一直在使用我的一个测试/沙盒业务帐户进行测试。即专门为此帐户生成的信用卡数据。但是，似乎我可以操纵名称、更改到期日期（只要它是有效日期）、CVV2 编号。只要信用卡通过 MOD 10 检查，响应对象就会显示付款已处理（状态：已批准）。

我的问题是，这是一个漏洞（不太可能）还是只是设计使贝宝允许任何随机卡相关数据来验证付款。（只要它们是有效的信用卡号）。

如果是更早的，那么我想知道为什么 Paypal 要我创建一个企业帐户并为我生成信用卡数据，而我真正需要的只是我注册为开发人员时提供的 REST API 客户端 ID 和密码。

免责声明：文档没有说明可以使用随机卡相关数据的任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:48:58.570

正确，这是设计使然。只要符合 MOD-10，我们将接受沙盒环境中的任何信用卡号。这样做是为了便于在沙盒环境中进行测试。

> 如果是更早的，那么我想知道为什么 Paypal 要我创建一个企业帐户并为我生成信用卡数据，而我真正需要的只是我注册为开发人员时提供的 REST API 客户端 ID 和密码。

我不太确定你在这里的意思是什么？

# java - 是否可以在 Java 中扩展迭代器的功能？

> ID：15397095
> 
> 赞同：3
> 
> 时间：2013-03-13T21:44:59.933
> 
> 标签：java, iterator

我想知道是否有办法扩展迭代器接口的功能。假设我们有一个实现 Iterable 接口的类（在上面的示例中，我添加了 myFunction，而不是 Iterator 接口的覆盖函数）。

```
public class MyClass implements Iterable{

    @Override
    public Iterator iterator() {
        return new Iterator() {
            @Override
            public boolean hasNext() {
                throw new UnsupportedOperationException("Not supported yet.");
            }

            @Override
            public Tuple next() {
                throw new UnsupportedOperationException("Not supported yet.");
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException("Not supported yet.");
            }
            public void myFunction(){

            }
        };
    }
} 
```

如果我将此代码放在另一个函数中，则会出现编译错误（“找不到符号”），我想知道为什么会发生这种情况。

```
public void anotherFunction(){
    MyClass a = new MyClass();
    a.iterator().myFunction();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T21:49:24.567

是的当然。您可以创建另一个接口：

```
interface MyBetterIterator extends Iterator
{
    void myFunction();
} 
```

然后使该方法返回您的类型：

```
public class MyClass implements Iterable{

    @Override
    public MyBetterIterator iterator() {
...
    }
} 
```

该特性称为“返回类型协方差”，在 Java 5 中引入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T21:48:37.737

即使您向`Iterator`实例添加了自己的函数，您告诉使用您的类的类只是您返回一个`Iterator`. 这意味着您仅限于`Iterator`接口公开的签名。如果你想访问 myFunction，你必须正式声明你自己的扩展接口，`Iterator`然后让你的`iterator()`函数返回它。但是，这也会破坏`Iterable`合同，因此您必须做出选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:47:48.040

您`myFunction()`不属于该`Iterator`接口，因此不能用于以 type 声明的 Object `Iterator`。

```
a.iterator().myFunction();
  ^
  Returns an Iterator and therefore gives a compilation error 
```

# java - 如何使用非默认构造函数运行 junit 3

> ID：15397097
> 
> 赞同：-1
> 
> 时间：2013-03-13T21:45:11.420
> 
> 标签：java, unit-testing, tdd, junit3

我有一个代码库，他们将 junit 测试用例定义为：

```
public class MyTest extends BaseTestCase
{
    public MyTest( String name )
    {
        super( name );
    }

    public void testSome() throws Exception
    {
        assertTrue (1 == 1);
    }
} 
```

如何从 Eclipse 运行此测试？如何在构造函数中提供名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:05:00.000

如果您正在创建实现，为什么不自己传递超类型构造参数，即

```
public class MyTest extends BaseTestCase
{
    public MyTest()
    {
        super( "My Test" );
    }

    public void testSome() throws Exception
    {
        assertTrue (1 == 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:59:14.607

你不能像 JUnit runner 期望的那样直接运行它，`'Test class should have exactly one public zero-argument constructor'` 所以你必须手动调用它，或者像@shim cat 显示的那样，或者每个类都这样做

```
protected void setUp() throws Exception {
    System.out.println(" local setUp ");
}
protected void tearDown() throws Exception {
    System.out.println(" local tearDown ");
} 
```

但如果你想分享它，你可以按照“TestSuite”来做

```
protected void setUp() throws Exception {
    System.out.println(" Global setUp ");
}
protected void tearDown() throws Exception {
    System.out.println(" Global tearDown ");
} 
```

# jquery - jQuery DOM Traversal - 后退后进

> ID：15397101
> 
> 赞同：1
> 
> 时间：2013-03-13T21:45:16.130
> 
> 标签：jquery

需要一些有关 DOM 遍历的帮助以进行琐事测验。结构是.. 有一个动态数量的内部 div 具有重复的问题/答案结构..

```
<div class="trivia_entry">
<div class="pad50">
<span>question</span>
..radio buttons...
<input type="button" class="quizbutt" value="NEXT" />
</div>
</div>
<div class="trivia_entry">
<div class="pad50">
<span class="pno">INCORRECT</span>
<p>answer description</p>
</div>
</div> 
```

当该人单击 NEXT 按钮时，jQuery 确保他们做出了选择，然后如果他们的答案正确，则需要将下一个条目（答案）的跨度上的类更改为“pyes”。我似乎无法选择跨度，虽然..尝试过（从按钮点击处理程序中）..

```
$(this).parent().parent().parent().next('.trivia_entry span').removeClass('pno').addClass('pyes').html('CORRECT'); 
```

任何想法都非常感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:50:38.850

`parent`您可以使用方法而不是几种方法`closest`：

```
$(this).closest('.trivia_entry')
       .next('.trivia_entry')
       .find('span')
       .removeClass('pno')
       .addClass('pyes')
       .html('CORRECT'); 
```

[http://jsfiddle.net/2JvHf](http://jsfiddle.net/2JvHf)

PS：您需要使用 2 个父方法而不是三个，而且`next`方法也不能那样工作，您应该`span`从选择器中删除并使用`find`方法。

# wpf - 隐藏 WPF 网格中的列

> ID：15397105
> 
> 赞同：0
> 
> 时间：2013-03-13T21:45:20.270
> 
> 标签：wpf, gridview, grid, contextmenu

我有一个这样的网格：

```
<Grid Name="mainPane">
    <Grid.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Hide" Click="MenuItemHide_Click" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}"></MenuItem>
        </ContextMenu>
    </Grid.ContextMenu>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>            
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions >
        <RowDefinition Height="576*"/>
    </Grid.RowDefinitions>

    <GridView x:Name="permitsCol">
        <GridViewColumn x:Name="colPermitSeq" Header="Permit Seq">
        </GridViewColumn>
    </GridView>
</Grid> 
```

我有一个网格，我已经声明了一列。我在运行时添加了更多列。

我想要一个鼠标右键菜单（上下文菜单）来隐藏/删除一列。

我需要做什么才能隐藏该列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:02:59.527

嗨，尝试将此绑定到 DataGrid 的 ColumnHeaderStyle

```
<Style x:Key="DefaultColumnStyle" TargetType="{x:Type DataGridColumnHeader}">
  <Setter Property="ContextMenu" Value="{StaticResource RowMenu}" />
</Style>

<ContextMenu  x:Key="RowMenu" DataContext="{Binding PlacementTarget.DataContext,RelativeSource={RelativeSource Self}}">
   <MenuItem Header="Hide" Click="MenuItemHide_Click" CommandParameter="{Binding RelativeSource={RelativeSource Self}}">
   </MenuItem>
</ContextMenu> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T10:32:05.503

例如，如果要隐藏列，`colPermitSeq`可以使用：

```
colPermitSeq.Visibility = System.Windows.Visibility.Hidden; 
```

`Collapse`如果这样更方便，您也可以将其设置为。

至于删除，`RemoveAt`Grid.ColumnDefinitions 方法在给定位置删除一列。

```
DynamicGrid.ColumnDefinitions.RemoveAt(3); 
```

Grid.ColumnDefinitions`Clear`方法删除 Grid 中的所有列。

```
DynamicGrid.ColumnDefinitions.Clear(); 
```

# java - 在 Eclipse 中快速实现包装（委托方法）？

> ID：15397108
> 
> 赞同：21
> 
> 时间：2013-03-13T21:45:28.940
> 
> 标签：java, eclipse, wrapper, code-assist, code-templates

是否有一些模板或其他东西可以通过访问包装成员来实现 iterface 方法？

例如，假设我有

```
public class MyClass implements List<Something> {

    private final List<Something> core;

...
} 
```

现在我想`List<Something>`通过将调用传递给 Wrapped like来实现

```
@Override
public int size() {
    return core.size();
} 
```

等等。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T21:48:57.003

有。使用源菜单->生成委托方法...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-04-09T22:22:48.763

我将多说一点关于“生成委托方法”重构如何创建像您描述的转发类。

您创建一个可选择实现接口的新类，并为它提供一个具有您想要删除的类型的字段，例如：

```
public class NewClass implements ThatInterface {
  private final ThatInterface delegate;

  public MyClass(ThatInterface delegate) {
    this.delegate = delegate();
  }
} 
```

*然后*应用 Eclipse 重构。（Cmd-3 deleg... 是访问它的一种简单方法。）选中新字段的复选框。它的所有方法都将作为委托添加。

*（我认为，在 Eclipse 氧气的重构中存在一个错误，它将`default`从接口上带有该关键字的方法中复制关键字。您可能需要删除该关键字。）*

因此，对于 List 的委托，重构产生：

```
public class NewClass {
   private final List<String> delegate;

   public NewClass(List<String> delegate) {
       this.delegate = delegate;
   }

   public void forEach(Consumer<? super String> action) {
       delegate.forEach(action);
   }
   public int size() {
       return delegate.size();
   }
   public boolean isEmpty() {
       return delegate.isEmpty();
   }
   public boolean contains(Object o) {
       return delegate.contains(o);
   } 
```

等等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-15T06:38:17.793

在 Luna 中测试。

使用快捷方式`Alt`- `Shift`- `S`，`M`2次。按`Enter`

# java - 存储 JSON 对象：SQLite 与序列化到磁盘

> ID：15397111
> 
> 赞同：0
> 
> 时间：2013-03-13T21:45:37.033
> 
> 标签：java, android, json, sqlite

将构建一个应用程序，该应用程序将从 Web 服务中提取 JSON 对象，数以百计，每个相对较小，每个 20kb。

除了显示这些 POJO、下载新的和更新的 POJO 以及删除过时的 POJO 之外，该应用程序不会做太多其他事情。持久存储这些对象的首选方法是什么？我猜这两个主要竞争者将它们存储在 SQLite DB 中，可能使用 ORMLite 来减少开销，或者只是将对象序列化到磁盘，可能在一个大文件中并使用非常快速的 JSON 解析器。

任何想法什么是首选方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:51:10.690

像 SQLLite 这样的 dbms 应该具有查询、索引和排序功能（以及其他标准 SQL DBMS 功能），您应该考虑是否需要这些功能。您计划在生产环境中拥有多少个对象？如果说百万磁盘序列化方法可能无法扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:42:30.423

您可以考虑使用 CouchDB 作为移动客户端和 Web 服务之间的缓存。

CouchDB 必须在 Internet 上的服务上运行，缓存来自 Web 服务的对象。在客户端上，您可以使用 TouchDB-Android：[https](https://github.com/couchbaselabs/TouchDB-iOS/wiki/Why-TouchDB%3F) ://github.com/couchbaselabs/TouchDB-iOS/wiki/Why-TouchDB%3F 。TouchDB-Android 可以与运行在 Internet 上的 CouchDB 实例自动同步。然后应用程序本身将单独访问 TouchDB。TouchDB 会自动检测是否有互联网连接，因此您的应用程序即使在没有互联网的情况下也能继续运行。

优点： - 缓存 JSON 调用 - 客户端在 Internet 连接断开时仍然工作，当 Internet 连接再次启动时自动同步。- 负载您的网络服务，并且您可以扩展。

我们之前使用此设置来允许 Android 软件无缝运行，即使在互联网连接频繁断开并且我们从中访问数据的服务非常缓慢且容量有限的情况下也是如此。

# windows - 在设置网络连接时自动执行重复性任务

> ID：15397112
> 
> 赞同：0
> 
> 时间：2013-03-13T21:45:37.800
> 
> 标签：windows, networking, registry, settings, tcp-ip

这个问题的目的是哪种编程语言最适合完成此任务，他们的程序是否可以为我做到这一点？很多时候，我必须为通过 vsphere 创建为 vm 的 Windows 设置静态 IP 地址、网络掩码、网关 DNS 和 DNS 后缀。我输入的所有这些信息都是一样的，除了静态 IP 地址。我正在使用从 XP 到 8 的任何版本的 Windows（包括服务器版本）。无论如何我可以简化或自动化我的部分任务吗？事实上，我什至无法复制和粘贴后缀列表，因为 Windows 让您一次输入一个。诸如 Power Shell 之类的语言或使用 .bat 文件会有帮助吗？`HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\services\Tcpip\Parameters`从工作计算机导出并将其插入到新的构建注册表就足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:32:28.270

您可以使用以下方式设置静态地址：

```
netsh interface ip set address "lanname" static %IP_Addr% %Sub_Mask% %D_Gate% 1 
```

# jsf - 找不到 CDI bean

> ID：15397119
> 
> 赞同：1
> 
> 时间：2013-03-13T21:45:57.380
> 
> 标签：jsf, jsf-2, cdi

我创建了这个简单的 CDI bean：

```
import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.annotation.Resource;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.inject.Named;

    @Named("DashboardController")
    @ViewScoped
    public class Dashboard implements Serializable
    {
    .......
    } 
```

我从 faces-config.xml 中删除了所有配置。我将此 beans.xml 文件创建到 WEB-INF 目录中：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

当我打开 JSF 页面时，找不到 bean。你能告诉我我错过了什么吗？我不想将 bean 声明为 faces-config.xml。

PS 我不知道这是否重要，但这是一个带有 CDI bean 的 WAB 包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:45:55.640

您需要使用 ViewAccessScoped 而不是 ViewScoped。

```
import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.annotation.Resource;
import javax.faces.application.FacesMessage;
import org.apache.myfaces.extensions.cdi.core.api.scope.conversation.ViewAccessScoped;
//Note the different import
import javax.faces.context.FacesContext;
import javax.inject.Named;

    @Named("dashboardController")
    @ViewAccessScoped
    public class Dashboard implements Serializable
    {
    .......
    } 
```

您还应该以非大写字母开头 Named 中的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:51:40.823

您可能需要将 faces_config 文件添加到您`META-INF`的 WAB 文件夹中[，如此线程中所述](http://www.java.net/forum/topic/glassfish/glassfish/re-named-cdi-bean-wab-not-available-jsf-page)

除此之外，即使找到了 bean，您仍然可能在范围界定方面遇到问题；您不能将 JSF 范围应用于 CDI bean。CDI`@ConversationScoped`是 JSF 的一种不太方便的替代方案`@ViewScoped`。作用域的不便之处在于，你需要注入一个额外的托管对象，而且你必须自己主动管理作用域。要使用：

1.  用注释你的 bean`@ConversationScoped`

    ```
    @Named("DashboardController")
    @ConversationScoped
    public class Dashboard implements Serializable
     {

     } 
    ```

2.  将`Conversation`对象注入到您的 bean中

    ```
    @Inject
    private Conversation conversation; 
    ```

3.  在这个对象上，您需要分别调用`begin()`并`end()`开始“对话”（一个视图范围）和“结束”对话（就像 JSF 通过销毁视图范围的 bean 所做的那样）。这是设计和上下文的问题。至少，您可以调用`conversation.begin()`一个`@PostConstructor`. 您在哪里结束对话取决于您的具体用例

# xslt - 灵活的 XSL 日期/日期时间转换

> ID：15397122
> 
> 赞同：1
> 
> 时间：2013-03-13T21:46:11.170
> 
> 标签：xslt, tibco, businessworks, businessevents

我们正在使用 Tibco BusinessWorks 将 XML 文档传递给 Tibco BusinessEvents 流程。因为 BusinessEvents 没有 DATE 格式，只有 DATETIME，所以我们必须在发送到 BusinessEvents 之前更改源 XML 文档中的 Dates，并将响应的 DateTime 值映射回简单的 Dates。

**这既烦人又麻烦。**

为了提高 BusinessWorks 的性能，我正在编写一个样式表来处理映射。这就是我所拥有的。

```
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:inf="http:/the.company.namespace">

<xsl:template match="node()">
    <xsl:copy>
        <xsl:apply-templates select="node()" />
    </xsl:copy>
</xsl:template>

<xsl:template match="inf:PriorExpirationDate | inf:OrderDate | inf:SegmentEffectiveDate |
                    inf:SegmentExpirationDate | inf:CancelDate | inf:NewBusinessEffectiveDate |
                    inf:NewBusinessExpirationDate | inf:RenewalEffectiveDate | inf:RenewalExpirationDate |
                    inf:QuestionDate | inf:ViolationDate | inf:ConvictionDate |
                    inf:EffectiveDate | inf:RatingDate | inf:AdvanceDate |
                    inf:SIDRevisionDate | inf:DriverLicensedDate |
                    inf:ESignatureDate | inf:UploadDate | inf:CancelDate |
                    inf:CancelProcessedDate | inf:CancelEffectiveDate | inf:CreatedDate |
                    inf:QuoteCreationDate | inf:QuoteModifiedDate | inf:QuoteExpirationDate |
                    inf:RateStartDate | inf:RateEndDate | inf:ChangeEffectiveDate | inf:PostDate |
                    inf:EffectiveDate | inf:ExpirationDate | inf:BirthDate |
                    inf:InstallmentDueDate | inf:CommercialDriverLicenseDate ">
    <xsl:element name="{name()}">
        <xsl:value-of
            select="concat(format-date(text(),'[Y0001]-[M01]-[D01]'), 'T00:00:00')" />
    </xsl:element>
</xsl:template> 
```

虽然功能齐全，但这并不理想。我宁愿不必枚举我需要转换的每个元素，我宁愿指定一个需要转换的 TYPE。

**(1)** XSL 是否提供此功能？

**(2)**或者，有些元素名称在一个位置可能是 DATE，而在其他位置可能是 DATETIME。如果我知道父级的名称，是否有排除某些 DATETIME 元素的有效方法？

**(3)**最后，有没有人看到超出问题范围的改进空间？

*一些上下文：原始映射是在 BusinessWorks 的编辑器中完成的，GUI 会在其中生成自己的映射文件，即数百行的 if/then/else 语句系列。对于一个 50k 的文档（我们的平均值），对于在不到 50 毫秒内完成其实际工作的 Web 服务，这相当于每次转换的近 20 毫秒开销。这是必须改进的瓶颈。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:04:10.583

**只需使用**：

```
<xsl:template match="*[. castable as xs:date]">
 <!-- Your code here -->
</xsl:template> 
```

# javascript - 为什么两个 YUI 实例使用测试时忽略 YUI 测试控制台

> ID：15397125
> 
> 赞同：1
> 
> 时间：2013-03-13T21:46:27.130
> 
> 标签：javascript, yui

如果我运行这样的测试用例，我的测试结果会显示在 YUI**测试控制台小部件中**：

```
YUI({debug: true}).use('test', 'event-base', 'test-console', function (Y) {
    fooTests = new Y.Test.Case({
        name: "foo",
        testFoo: function () {
            Y.assert(5 == 6);
        }
    });    

    Y.on("domready", function () {
        (new Y.Test.Console({
            newestOnTop: false,
            style: 'block'
        })).render('#log');
        Y.Test.Runner.add(fooTests);
        Y.Test.Runner.run();
    });
}); 
```

如果我运行完全相同的代码但首先创建另一个使用“测试”的 YUI 实例，测试会显示在**浏览器的 JavaScript 控制台**中（如果它是打开的）。

```
YUI({debug: true}).use('test', function (Y) {

});

YUI({debug: true}).use('test', 'event-base', 'test-console', function (Y) {
    fooTests = new Y.Test.Case({
        name: "foo",
        testFoo: function () {
            Y.assert(5 == 6);
        }
    });    

    Y.on("domready", function () {
        (new Y.Test.Console({
            newestOnTop: false,
            style: 'block'
        })).render('#log');
        Y.Test.Runner.add(fooTests);
        Y.Test.Runner.run();
    });
}); 
```

当另一个 YUI 实例使用“测试”时，有没有办法让结果显示在测试控制台小部件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:49:52.397

[我在这里](http://yuilibrary.com/yui/docs/console/console-global.html)找到了答案。

我不得不添加

```
logSource: Y.Global 
```

到 Test.Console 的参数对象。

```
 (new Y.Test.Console({
        logSource: Y.Global,
        newestOnTop: false,
        style: 'block'
    })).render('#log'); 
```

# php - JSON/PHP 未正确解析

> ID：15397130
> 
> 赞同：1
> 
> 时间：2013-03-13T21:46:30.263
> 
> 标签：php, javascript, json

首先我会指出这个问题，基本上在我`$.each(data, function (i, v) {`的代码中，它返回了一堆变量，这些变量是从正在使用的**PHP**代码中回显的，`json_encode`但是当尝试放置这些变量甚至`alert()`它们时，它表明`undefined`我已经尝试了很多方法来实际上显示数据，但它总是返回`undefined`，我不知道为什么，因为我的代码在我看来是有效的。

我拥有的当前**javascript**代码如下

```
$.ajax({
        url: "functions/ajax.php",
        data: "func=auto",
        type: "GET",
        dataType: "json",
        success: function(data){
                $.each(data, function (i, v) {
                            var name = v['name'];
                            var player_id = v['id'];
                            alert(player_id);
                });
        },
        error: function (jqXHR, textStatus, errorThrown){
            console.log('Error ' + jqXHR);
        }
}); 
```

我目前的**PHP**代码如下

```
$res = $DB->Query("SELECT * FROM `inventory` WHERE `account_id` = '$_SESSION[ID]'");
$data = array();
while($player = $DB->fetch_assoc()) {   
        $data['name'] = $player['name'];
        $data['id'] = $player['player_id'];
}
header('Content-type: application/json');
echo json_encode($data); 
```

总结一下，当使用`alert()`它`player_id`返回`undefined`时，显然我希望它返回正确的值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T21:52:58.900

您不是在发送一个多级数组，而是发送一个只有两个元素的数组。例如你的 JS 代码应该是

```
 success: function(data){
               var name = data['name'];
               var player_id = data['id'];
             } 
```

如果该数据库查询**应该**发回多条记录，那么您构建它是错误的：

```
while($player = $DB->fetch_assoc()) {   
   $data[] = array('name' => $player['name'], 'id' => $player['player_id']);
}
echo json_encode($data); 
```

然后你的`$.each()`代码应该开始工作，因为你正在发回一个多维数组/对象。

# delphi - 在运行时重新分配数据源

> ID：15397135
> 
> 赞同：4
> 
> 时间：2013-03-13T21:46:41.753
> 
> 标签：delphi, tdbgrid

我做了一些搜索，只发现了更多未回答的问题。:)

使用 D5pro。

我想在运行时将 DataSource 重新分配给 TDBGrid。我有七个相同的结构化数据集，并且根据单击按钮，我希望在网格中显示适当的数据集。

我已经尝试了所有方法，但无法让它显示下一个 DataSet。它坚持在启动时分配的第一个。我开始过度使用方法，但仍然没有任何效果。这就是我现在的位置。

```
procedure SetSource(var aSrc : TDataSource);
begin
  aSrc.DataSet.Close;
  dbgridShowData.DataSource:=aSrc;
  aSrc.DataSet.Open;
  aSrc.DataSet.First;
  aSrc.DataSet.Refresh;
end; 
```

我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T00:33:13.453

您可以在运行时非常轻松地更改 DBGrid 显示的数据集。有两种方法：

1：使用分配给 DBGrid.DataSource 的单个 DataSource 并将 DataSource.DataSet 更改为所需的 DataSet。这是一个简单的例子，所有的分配都是在运行时进行的。

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  DBGrid1.DataSource := DataSource1;

  DataSet1.Active := true;
  DataSet2.Active := true;
  DataSet3.Active := true;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  DataSource1.DataSet := DataSet1;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  DataSource1.DataSet := DataSet2;
end;

procedure TForm1.Button3Click(Sender: TObject);
begin
  DataSource1.DataSet := DataSet3;
end; 
```

2：为每个DataSet 使用一个DataSource 并将DBGrid.DataSource 更改为所需的DataSource。这是一个简单的例子，所有的分配都是在运行时进行的。

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  DataSource1.DataSet := DataSet1;
  DataSource2.DataSet := DataSet2;
  DataSource3.DataSet := DataSet3;

  DataSet1.Active := true;
  DataSet2.Active := true;
  DataSet3.Active := true;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  DBGrid1.DataSource := DataSource1;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  DBGrid1.DataSource := DataSource2;
end;

procedure TForm1.Button3Click(Sender: TObject);
begin
  DBGrid1.DataSource := DataSource3;
end; 
```

如果定义 DBGrid 的列，则 DataSet 的结构需要相同，否则在更改显示的 Dataset 时必须更改列定义。

我更喜欢为每个 DataSet 使用一个 DataSource，因为它更灵活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T21:53:03.053

您可能需要更改`DataSource.DataSet`：

```
procedure SetDataFromDataSet(const aDataSource: TDataSource;
  const aNewDataSet: TDataSet);
begin
  aDataSource.DataSet.Close;
  aDataSource.DataSet := aNewDataSet;
  if not aNewDataSet.Active then
    aNewDataSet.Open;
end; 
```

样品用途：

```
SetDataFromDataSet(DataSource1, CustomerQuery); 
```

不过，您可能不想像这样在全局范围内关闭和打开数据集。从调用代码中执行此操作可能会更好。当然，这取决于您的应用程序需要什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T01:12:46.387

用 Delphi5 pro 测试。

```
procedure TForm1.setDataSourceDataSet(var newDataSource:TDataSource);
begin
if DBgrid1.DataSource = nil then begin
   DBgrid1.DataSource:=newDataSource;
end else begin
if DBgrid1.DataSource.Name = newDataSource.Name then exit;
DBGrid1.DataSource.Enabled:=False;
DBgrid1.DataSource:=newDataSource;
end;
If DBgrid1.DataSource.DataSet.active=False then DBgrid1.DataSource.DataSet.active:=True;
DBGrid1.DataSource.Enabled:=True;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
setDataSourceDataSet(DataSource1);
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
setDataSourceDataSet(DataSource2);
end; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-08T16:01:23.887

秘诀在于：

DBGrid1.DataSource.Enabled:=False; ...进行更改... DBGrid1.DataSource.Enabled:=True;

用 D5Pro 测试

# meteor - 如何知道用户文档何时加载到 Meteor 帐户中

> ID：15397136
> 
> 赞同：2
> 
> 时间：2013-03-13T21:46:48.243
> 
> 标签：meteor

我知道在编写依赖于加载到客户端 minimongo 的集合的代码时，您应该显式订阅集合并在完成加载时传递适当的回调。

我的问题是我在用户集合中存储了很多我的页面需要访问的重要子文档。我正在使用 Meteor Accounts，并试图找出一种类似的方法来等待整个登录的用户文档可用。使用它进行测试时：

```
console.log(Meteor.user()); 
```

登录的情况下，似乎它首先只使用_id注册一个对象，然后稍后发送其他字段（我知道我必须明确添加其他字段以从服务器发布电子邮件等）。

有没有办法让我在执行我的代码之前等待登录的用户文档完全加载？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:10:31.723

[Deps.autorun](http://docs.meteor.com/#deps_autorun)（以前的 Meteor.autorun）在某些反应性变化时重新运行，这可能适合您的用例：

**客户端js**

```
Deps.autorun(function () {
    if(Meteor.user() {
          //Collection available
      }
    }); 
```

如果你使用[订阅](http://docs.meteor.com/#meteor_subscribe)，你也可以使用它的回调。[在文档](http://docs.meteor.com/#meteor_subscribe)上阅读它，因为您可能需要对其进行一些自定义，并删除自动发布包以及将您的其他收藏设置为订阅

**服务器js：**

```
Meteor.publish("userdata", function () {
    //You might want to alter this depending on what you want to send down
    return Meteor.users.find({}, {}});
}); 
```

**客户端js**

```
Meteor.subscribe("userdata", function() {
    //Collection available
}); 
```

# javascript - jQuery同位素/砌体排水沟问题

> ID：15397138
> 
> 赞同：1
> 
> 时间：2013-03-13T21:46:53.027
> 
> 标签：javascript, jquery, css, jquery-masonry

我正在使用 jQuery [Isotope](http://isotope.metafizzy.co/)。这是一个很棒的插件，但我在以砌体模式对齐项目时遇到了一点问题。我的容器是 960px 宽，我的目标是让 4 个项目完美排列，就好像它使用 960px 网格系统一样。因此，左右边缘都将接触容器的边缘。这是它目前的外观的屏幕截图：

![在此处输入图像描述](../Images/edfb7953e12e323bac43039d9cf16e03.png)

我的代码目前是这样的：

**JS：**

```
$('#container').isotope({
  itemSelector : '.item',
      masonry : {
          columnWidth : 240,
          gutterWidth: 10
      }
}); 
```

**CSS：**

```
.item{
width:230px;
background:red;
overflow: hidden;
} 
```

**HTML：**

```
 <div class="item">a</div> 
```

到目前为止，我设法让它工作的唯一方法是将宽度设置为，`240px`但项目之间没有间隙。

**编辑**

这是一个小提琴，展示了我所拥有的[http://jsfiddle.net/qGJhe/](http://jsfiddle.net/qGJhe/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:54:45.377

根据您的 jsFiddle ( [http://jsfiddle.net/qGJhe/](http://jsfiddle.net/qGJhe/) )，我为容器添加了背景颜色，以检查您遇到的额外间隙，但它没有显示额外间隙。

此外，它不尊重您的 960px 宽度，因为布局是响应式的。所以在我看来，您没有复制与实际页面上完全相同的代码（html、css、jQuery）。

无论如何，我禁用了响应代码位以使其符合固定的 960px 宽度，并看到了 10px 的额外间隙。[http://jsfiddle.net/shodaburp/qGJhe/3/](http://jsfiddle.net/shodaburp/qGJhe/3/)

这让我意识到您对排水沟大小和元素宽度的计算相当不准确。

**240px 的元素宽度根本不会为您提供装订线空间。** [http://jsfiddle.net/shodaburp/qGJhe/4/](http://jsfiddle.net/shodaburp/qGJhe/4/)

> `gutterSize = (containerWidth - (elementWidth * numberOfElement) / numberOfGutters)`
> 
> **`gutterSize = (960 - (240 * 4) ) / 3) = 0`**
> 
> `totalWidth = (elementWidth * numberOfElement) + (gutterSize * numberOfGutters)`
> 
> `totalWidth = (240 * 4) + (3 * 0) = 960`
> 
> `extraGap = containerWidth - totalWidth`
> 
> **`extraGap = 960 - 960 = 0`**

**230px 的元素宽度加上 13 的装订线大小将为您提供 1px 的额外间隙** [http://jsfiddle.net/shodaburp/qGJhe/5/](http://jsfiddle.net/shodaburp/qGJhe/5/)

> `gutterSize = (containerWidth - (elementWidth * numberOfElement) / numberOfGutters)`
> 
> **`gutterSize = (960 - (230 * 4) ) / 3) = 13.33 = 13 (rounded)`**
> 
> `totalWidth = (elementWidth * numberOfElement) + (gutterSize * numberOfGutters)`
> 
> `totalWidth = (230 * 4) + (3 * 13) = 959`
> 
> `extraGap = containerWidth - totalWidth`
> 
> **`extraGap = 960 - 959 = 1`**

如果你想让一行中的 4 个元素很好地适应 960 像素，那么你需要将元素的宽度减小到 225 像素，并且间距大小为 20 像素。

**225px 的元素宽度加上 20 的间距大小将是完美的！** [http://jsfiddle.net/shodaburp/qGJhe/6/](http://jsfiddle.net/shodaburp/qGJhe/6/)

> `gutterSize = (containerWidth - (elementWidth * numberOfElement) / numberOfGutters)`
> 
> **`gutterSize = (960 - (225 * 4) ) / 3) = 20`**
> 
> `totalWidth = (elementWidth * numberOfElement) + (gutterSize * numberOfGutters)`
> 
> `totalWidth = (225 * 4) + (3 * 20) = 960`
> 
> `extraGap = containerWidth - totalWidth`
> 
> **`extraGap = 960 - 960 = 0`**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T21:53:38.693

是否添加了修改后的布局模式？

使用`gutterWidth`不是标准选项。[文档说](http://isotope.metafizzy.co/docs/layout-modes.html#modified_layout_modes)您需要从演示页面的源代码添加代码。

[http://isotope.metafizzy.co/custom-layout-modes/masonry-gutters.html](http://isotope.metafizzy.co/custom-layout-modes/masonry-gutters.html)

```
// modified Isotope methods for gutters in masonry
$.Isotope.prototype._getMasonryGutterColumns = function() {
  var gutter = this.options.masonry && this.options.masonry.gutterWidth || 0;
      containerWidth = this.element.width();

  this.masonry.columnWidth = this.options.masonry && this.options.masonry.columnWidth ||
                // or use the size of the first item
                this.$filteredAtoms.outerWidth(true) ||
                // if there's no items, use size of container
                containerWidth;

  this.masonry.columnWidth += gutter;

  this.masonry.cols = Math.floor( ( containerWidth + gutter ) / this.masonry.columnWidth );
  this.masonry.cols = Math.max( this.masonry.cols, 1 );
}; 
```

# matlab - 如何制作具有不同颜色条的条形图？

> ID：15397143
> 
> 赞同：1
> 
> 时间：2013-03-13T21:47:07.390
> 
> 标签：matlab, histogram

我有一个数组数据，例如：`A = [5 7 8 9 10 ... 98]`

我想使用具有不同颜色条的此数据绘制条形图。我不知道如何分别为单个条或条组着色。我只能用相同的颜色绘制它们。

例如，我想像这样绘制这种类型的数据：绿色条为`5`，红色条为`7`，`10`等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:33:40.753

在向量上调用的函数`bar`会创建一个只能有一种颜色的图形对象。要在任意位置获得具有不同颜色条形的条形图，您可以`bar`使用不同的 x 坐标多次调用：

```
A = [1,2,3,4,5,6,2,3,4,6,1];

figure
hold on

bar([1], A(1),'FaceColor','r');
bar([2:3], A(2:3),'FaceColor','b');
bar([4:7], A(4:7), 'FaceColor','g');
bar([8:11], A(8:11), 'FaceColor','m'); 
```

# sql-server - 对 PIVOT 源的数据进行排序

> ID：15397144
> 
> 赞同：0
> 
> 时间：2013-03-13T21:47:08.780
> 
> 标签：sql-server, sql-server-2008, pivot, unpivot

想象一个带有属性的表（键值）和带有很多的父表。

```
LotId       SomeText
----------- --------
1           Hello
2           World

AttributeId LotId       Val      Kind
----------- ----------- -------- --------
1           1           Foo1     Kind1
2           1           Foo2     Kind2
3           2           Bar1     Kind1
4           2           Bar2     Kind2
5           2           Bar3     Kind3 
```

我正在使用`UNPIVOT`-`PIVOT`操作以以下形式获取数据：

```
LotId       SomeText AttributeId LotId       Kind1Val Kind     AttributeId LotId       Kind2Val Kind     AttributeId LotId       Kind3Val Kind
----------- -------- ----------- ----------- -------- -------- ----------- ----------- -------- -------- ----------- ----------- -------- --------
1           Hello    1           1           Foo1     Kind1    2           1           Foo2     Kind2    NULL        NULL        NULL     NULL
2           World    3           2           Bar1     Kind1    4           2           Bar2     Kind2    5           2           Bar3     Kind3 
```

如何选择远离属性表值的数据独立性。

**错误结果的示例：**

```
LotId       SomeText attributeid_1 LotId_1  Value_1  Kind_1   attributeid_2 LotId_2  Value_2  Kind_2   attributeid_3 LotId_3  Value_3  Kind_3
----------- -------- ------------- -------- -------- -------- ------------- -------- -------- -------- ------------- -------- -------- --------
1           Hello    4             1        Foo1     Kind1    NULL          NULL     NULL     NULL     NULL          NULL     NULL     NULL
2           World    1             2        Bar2     Kind2    3             2        Bar3     Kind3    2             2        Bar1     Kind8 
```

为什么？

由于column 和in 中的`Kind2`文本。`Kind_1``Kind3``Kind_2`

[SQL小提琴](http://www.sqlfiddle.com/#!3/d41d8/10843)

```
声明 @Lot 表 (
LotId INT 主键标识，
SomeText VARCHAR(8))

插入@Lot
值（'你好'），（'世界'）

声明@属性表（
AttributeId INT 主键标识，
LotId INT,
瓦尔 VARCHAR(8),
类型 VARCHAR(8))

插入@Attribute 值
(2, 'Bar2', 'Kind2'),
(2, 'Bar1', 'Kind8'),
(2, 'Bar3', 'Kind3'),
（1，'Foo1'，'Kind1'）

选择 *
从
(
    选择 LotId，
        一些文本，
        col+'_'+CAST(rn as varchar(10)) col,
        价值
    从
    (
        选择 l.LotId，
            l.SomeText，
            cast(a.AttributeId as varchar(8)) 属性id，
            cast(a.LotId as varchar(8)) a_LotId,
            a.Val,
            一种，
            ROW_NUMBER() over(l.lotid order by a.kind 分区) rn
        来自@Lot l
        左加入@Attribute a
            在 l.LotId = a.LotId
    ) 源代码
    交叉申请
    (
        values ('attributeid', attributeid),('LotId', a_LotId), ('Value', Val), ('Kind', Kind)
    ) c (col, 值)
) d
枢
(
    最大值（值）
    对于 col in (attributeid_1, LotId_1, Value_1, Kind_1,
                attribute_2、LotId_2、Value_2、Kind_2、
                属性id_3、LotId_3、Value_3、Kind_3）
) piv

```

**正确结果的示例：**

```
LotId       SomeText attributeid_Kind1 LotId_Kind1 Value_Kind1 Kind_Kind1 attributeid_Kind2 LotId_Kind2 Value_Kind2 Kind_Kind2 attributeid_Kind3 LotId_Kind3 Value_Kind3 Kind_Kind3
----------- -------- ----------------- ----------- ----------- ---------- ----------------- ----------- ----------- ---------- ----------------- ----------- ----------- ----------
1           WithAll  1                 1           Foo1        Kind1      2                 1           Foo2        Kind2      3                 1           Foo3        Kind3
2           Hello    NULL              NULL        NULL        NULL       10                2           Bar2        Kind2      NULL              NULL        NULL        NULL
3           World    NULL              NULL        NULL        NULL       NULL              NULL        NULL        NULL       12                3           Bar3        Kind3 
```

因为`KindX`在`Kind_x`列中，等等。

[SQL小提琴](http://www.sqlfiddle.com/#!3/55da1/6)

```
声明 @Lot 表 (
LotId INT 主键标识，
SomeText VARCHAR(8))

插入@Lot
值（'WithAll'），（'Hello'），（'World'）

声明@属性表（
AttributeId INT 主键标识，
LotId INT,
瓦尔 VARCHAR(8),
类型 VARCHAR(8))

插入@Attribute 值
(1, 'Foo1', 'Kind1'),
(1, 'Foo2', 'Kind2'),
(1, 'Foo3', 'Kind3'),
(1, 'Foo4', 'Kind4'),
(1, 'Foo5', 'Kind5'),
(1, 'Foo6', 'Kind6'),
(1, 'Foo7', 'Kind7'),
(1, 'Foo8', 'Kind8'),
(1, 'Foo9', 'Kind9'),
(2, 'Bar2', 'Kind2'),
(2, 'Bar1', 'Kind8'),
（3，'Bar3'，'Kind3'）

声明@AttributesMask 表（
    类型 VARCHAR(8)
)

插入@AttributesMask
值（'Kind1'），（'Kind2'），（'Kind3'），（'Kind4'），（'Kind5'），（'Kind6'），（'Kind7'），（'Kind8'）

选择 * 从（
    选择 LotId，
        一些文本，
        --col+'_'+CAST(rn as varchar(10)) col,
        col+'_'+[种类] col,
        价值
    从
    (
        选择 l.LotId，
            l.SomeText，
            cast(a.AttributeId as varchar(8)) 属性id，
            cast(a.LotId as varchar(8)) a_LotId,
            a.Val,
            一种
            --, ROW_NUMBER() over(partition by l.[LotId] order by am.[Kind]) rn
        FROM @AttributesMask 作为我
        LEFT 在 [am].[Kind] = [a].[Kind] 上加入 @Attribute a
        LEFT JOIN @Lot l ON [a].[LotId] = [l].[LotId]

    ) 源代码
    交叉申请
    (
        values ('attributeid', attributeid),('LotId', a_LotId), ('Value', Val), ('Kind', Kind)
    ) c (col, 值)
) d PIVOT (max(value) for col in (
    属性id_Kind1、LotId_Kind1、Value_Kind1、Kind_Kind1、
    属性id_Kind2、LotId_Kind2、Value_Kind2、Kind_Kind2、
    attributeid_Kind3、LotId_Kind3、Value_Kind3、Kind_Kind3)) piv
按批次订购

```

为了获得正确的结果，我使用掩码预先排列了 PIVOT 来源的数据。不戴口罩怎么办？

*参考问题：[How to replace a functional (many) OUTER APPLY (SELECT * FROM)](https://stackoverflow.com/questions/15365367/how-to-replace-a-functional-many-outer-apply-select-from)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:17:33.520

除非我在您的解释中遗漏了某些内容，否则您不需要`AttributeMask`. 如果最终的列名只是原始列名，然后是`Kind`值，那么您可以使用：

```
select *
from
(
    select LotId,
        SomeText,
        col+'_'+Kind col,
        value
    from
    (
        select l.LotId, 
            l.SomeText,
            cast(a.AttributeId as varchar(8)) attributeid,
            cast(a.LotId as varchar(8)) a_LotId,
            a.Val,
            a.Kind
        from @Lot l
        left join @Attribute a
            on l.LotId = a.LotId
    ) src
    cross apply
    (
        values ('attributeid', attributeid),('LotId', a_LotId), ('Value', Val), ('Kind', Kind)
    ) c (col, value)
) d
pivot
(
    max(value)
    for col in (attributeid_Kind1, LotId_Kind1, Value_Kind1, Kind_Kind1,
                attributeid_Kind2, LotId_Kind2, Value_Kind2, Kind_Kind2,
                attributeid_Kind3, LotId_Kind3, Value_Kind3, Kind_Kind3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d41d8/10909)。这给出了结果：

```
| LOTID | SOMETEXT | ATTRIBUTEID_KIND1 | LOTID_KIND1 | VALUE_KIND1 | KIND_KIND1 | ATTRIBUTEID_KIND2 | LOTID_KIND2 | VALUE_KIND2 | KIND_KIND2 | ATTRIBUTEID_KIND3 | LOTID_KIND3 | VALUE_KIND3 | KIND_KIND3 |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     1 |  WithAll |                 1 |           1 |        Foo1 |      Kind1 |                 2 |           1 |        Foo2 |      Kind2 |                 3 |           1 |        Foo3 |      Kind3 |
|     2 |    Hello |            (null) |      (null) |      (null) |     (null) |                10 |           2 |        Bar2 |      Kind2 |            (null) |      (null) |      (null) |     (null) |
|     3 |    World |            (null) |      (null) |      (null) |     (null) |            (null) |      (null) |      (null) |     (null) |                12 |           3 |        Bar3 |      Kind3 | 
```

# cakephp - 登录 cakephp 2.3 静态表单

> ID：15397145
> 
> 赞同：-2
> 
> 时间：2013-03-13T21:47:09.460
> 
> 标签：cakephp

我在 cakephp 的默认布局中有一个 html 表单。我是蛋糕的新手，它的文档是……嗯，你知道的。

我的问题是是否可以将该表单的操作设置为“用户/登录”之类的内容并重定向到预览页面。Auth 组件文档也没有用，所以如果你们中的某个人给我一些启发，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:04:59.317

您是否使用[FormHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)来构建表单？如果是，您可以在 create 方法中指定表单的操作：

```
$this->Form->create('User', array('action' => 'login')); 
```

然后，您可以在控制器的登录操作中处理重定向。最有可能的是：`$this->redirect()`。

[http://book.cakephp.org/2.0/en/controllers.html#Controller::redirect](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aredirect)

您可能会发现本教程对 Auth 组件很有帮助：

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:06:34.947

设置动作： [http ://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create)

检查选项**操作**。应该是这样的：

```
$this->Form->create('User',array('action'=>array('controller'=>'users','action'=>'login'))); 
```

或者你可以直接放（不推荐）`'/Users/login'`

现在...对于重定向，请检查：

[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent::$loginRedirect](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent%3a%3a%24loginRedirect)

> **AuthComponent::$loginRedirect**
> 
> 用户登录后应重定向到控制器操作的 URL（定义为字符串或数组）。如果用户在其会话中具有 Auth.redirect 值，则该值将被忽略。

如果该页面不公开，Cake 会将您尝试访问的页面存储在会话中。如果该页面是公开的，我不确定它是否还存储该页面的 url，您必须对其进行测试。但如果没有，你可以在 AppController 上写几行让它工作。它应该是这样的：

```
if current_page is public and current_page is not login or logout page:
    $this->Session->write('Auth.redirect',$this->here); 
```

要检查页面是否公开，您需要查看 Request 对象，在 $params 的某处有一个[前缀。](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)

希望这会有所帮助...不要放弃文档^^...

# python - Python中导入的类函数中的全局变量

> ID：15397148
> 
> 赞同：4
> 
> 时间：2013-03-13T21:47:25.383
> 
> 标签：python, python-2.7, global-variables

我试图将我的代码分布在单独的文件中以提高可读性，并且我遇到了在导入文件中引用未定义的全局名称的麻烦。有没有比在调用时故意将所有必要的值传递给函数更好的解决方案？

我的代码目前是这样的：

```
#foo.py

import bar

def main():
    a = 1
    b = bar.Bar()
    while True:
        a += 1
        b.incr()
        print a
        print b.c

if __name__ == '__main__':
    main()

#END foo.py 
```

-

```
#bar.py

class Bar:
    def __init__(self):
        self.c = 0
    def incr(self):
        self.c += a

#END bar.py 
```

它给了我 NameError: global name 'a' is not defined。我是否需要像这样重写 main() ：

```
def main():
        b = new bar.Bar()
        while True:
            a += 1
            b.incr(a)
            print a
            print b.c 
```

并像这样重写incr()：

```
def incr(self,a):
            c += a 
```

或者，还有更好的方法？

为了记录，上面的代码被大量抽象。实际代码涉及大量类和函数，它们传递多种类型的许多变量，包括一些大型字典。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T21:57:15.723

如果您只想知道为什么它不起作用：

首先，`main`不是设置全局`a`，而是设置本地。如果你想让它成为全球性的，你必须明确：

```
def main():
    global a
    a = 1
    # ... 
```

但这并不能解决问题，因为 Python 中的“全局”是每个模块的。换句话说，这只是创建一个`foo.a`，但您的代码`bar.Bar`将寻找`bar.a`，它不会存在。

如果你愿意，你可以`import foo`然后访问`foo.a`。（在这种情况下，循环依赖应该没有问题，并且`if __name__ == '__main__'`不会执行两次。）或者你可以假设它`foo`已经被导入，并使用`sys.modules['foo'].a`. 或者您可以`a`从. 或者很多其他的技巧。但这些都是可怕的事情。`bar``foo`

如果您无法制作全局作品，那么正确的答案几乎总是不使用全局作品。（事实上​​，即使你*可以*制作出全球性的作品，这通常也是正确的答案。）

那么，你是怎么做到的呢？在不了解更多细节的情况下，很难猜测是否`a`属于显式模块全局、类属性、实例属性、参数`incr`等。但是根据所代表的内容找出哪个最有意义`a`，然后去做。

* * *

在评论中，您建议您有一堆这些配置变量。如果将它们全部包装在 a 中`dict`并将其传递`dict`给每个对象的构造函数，那将使事情变得更简单。

更重要的是，a`dict`是对可变对象的引用。复制它只是对同一个对象进行另一个引用。

主要.py：

```
def main():
    configs = {}
    configs['gravity'] = 1.0
    rock = rps.Rock(configs)
    rock.do_stuff()
    configs['gravity'] = 2.1
    rock.do_stuff()
if __name__ == '__main__':
    main() 
```

rps.py：

```
class Rock(object):
    def __init__(self, configs):
        self.configs = configs
    def do_stuff(self):
        print('Falling with gravity {}.'.format(self.configs['gravity'])) 
```

当你运行它时，它会打印出如下内容：

```
Falling with gravity 1.0.
Falling with gravity 2.1. 
```

您没有修改该值`configs['gravity']`（这是一个不可变的浮点数；您无法修改它），但是您*已将*其替换为不同的值（因为`configs`它是一个可变的`dict`；您可以修改它就好了）。如果身份不清楚，您可以尝试在各个地方打印出`id(self.configs)`,等内容。`id(self.configs['gravity'])`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T21:53:28.337

如果`a`是 的一个特征或配置`Bar`，则应该是其实例或类属性。

```
class Bar(object):
    class_step = 1
    def __init__(self, inst_step):
        self.inst_step = inst_step
        self.c = 0
        self.step_mode = 'class'
    def inc(self):
        self.c += Bar.class_step if self.step_mode == 'class' else self.inst_step 
```

# vba - 将变量放在需要单元格引用的公式中

> ID：15397150
> 
> 赞同：0
> 
> 时间：2013-03-13T21:47:32.587
> 
> 标签：vba, offset

我正在尝试创建一个宏来创建 X 数量的使用偏移公式的命名公式。X 将代表 sheet1 上的数据系列（列）的数量。这就是我希望它寻找其中一个被创建的方式。

```
formula = offset($b$2,$a$2,0,$a$3,1)
activeworkbook.names.add Name:="test", Refers to:=formula 
```

但我将使用 do 循环，直到 i = # of columns with values。所以这是我最好的选择，我敢肯定有很多错误，因为我无法让它运行：

```
columns = activesheet.countif((1:1),"*"
i = 5 
do until i = columns

'This is where i want to define my static cells location (not value) to be referenced in the formula
    pan = cells(1,2)
    zoom = cells(1,3)

'This is where i want to define my dynamic cells location (not value) based on the current column
    series = cells(2,i)

'This is where i want to create a name formulas specific to each series
    formula = "=offset(" & series & "," & pan & ",0" & zoom & ",1)
    activeworkbook.names.add name:=cells(1,i), refersto:=formula 
```

所以我的结果基本上是，我得到了一个新的名称公式，但参考公式填充了整数，而不是实际的单元格地址。这是因为我使用的是调用单元格值而不是粘贴单元格地址的公式。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:09:42.473

好的，我知道我做错了什么。当我录制宏时，我没有意识到它放

```
ActiveWorkbook.Names.Add Name:="Height___zoom", RefersToR1C1:="=Data!R5C1" 
```

现在我可以简单地用

```
columns = activesheet.countif((1:1),"*"
i = 5 
do until i = columns

pan = "R1C2"
zoom = "R1C3"

series = "R2C" & i

formula = "=offset(" & series & "," & pan & ",0" & zoom & ",1)
activeworkbook.names.add name:=cells(1,i), refersto:=formula 
```

或类似的东西。仍然需要解决一些问题以使其实际运行正确，但我发现该公式使用 R#C# 来引用单元格的位置。

# mysql - ruby 2.0 的 Mysql 2.9.1 错误

> ID：15397156
> 
> 赞同：3
> 
> 时间：2013-03-13T21:47:52.777
> 
> 标签：mysql, ruby, rubygems, ruby-on-rails-4

操作系统 Ubuntu 12.04。[我已经从https://github.com/rails/rails.git](https://github.com/rails/rails.git)克隆了 rails4.0.0beta1 。我有 ruby​​ 2.0.0p0（2013-02-24 修订版 39474），当我尝试执行“捆绑安装”时，我收到以下错误消息：

```
Installing mysql (2.9.1) 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /home/zergood/.rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb 
checking for mysql_query()... -lmysqlclient
checking for main() in -lm... yes
checking for mysql_query()... -lmysqlclient
checking for main() in -lz... yes
checking for mysql_query()... -lmysqlclient
checking for main() in -lsocket... no
checking for mysql_query()... -lmysqlclient
checking for main() in -lnsl... yes
checking for mysql_query()... -lmysqlclient
checking for main() in -lmygcc... no
checking for mysql_query()... -lmysqlclient
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/zergood/.rvm/rubies/ruby-2.0.0-p0/bin/ruby
    --with-mysql-config
    --without-mysql-config
    --with-mysql-dir
    --without-mysql-dir
    --with-mysql-include
    --without-mysql-include=${mysql-dir}/include
    --with-mysql-lib
    --without-mysql-lib=${mysql-dir}/
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mlib
    --without-mlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-zlib
    --without-zlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-socketlib
    --without-socketlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-nsllib
    --without-nsllib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mygcclib
    --without-mygcclib
    --with-mysqlclientlib
    --without-mysqlclientlib

Gem files will remain installed in /home/zergood/.rvm/gems/ruby-2.0.0-p0/gems/mysql-2.9.1 for inspection.
Results logged to /home/zergood/.rvm/gems/ruby-2.0.0-p0/gems/mysql-2.9.1/ext/mysql_api/gem_make.out

An error occurred while installing mysql (2.9.1), and Bundler cannot continue.
Make sure that `gem install mysql -v '2.9.1'` succeeds before bundling. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T22:05:57.043

所以，尝试类似的东西

```
sudo apt-get install libmysql-ruby libmysqlclient-dev mysql-server \
mysql-client mysql-common 
```

进而

```
gem install mysql 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-03T15:13:45.207

我有一个非常相似的问题 -使用 ruby​​ 2.0但在 Mac 10.9.2 上安装**Mysql 2.9.1 错误**

解决方案在这里找到：[https ://stackoverflow.com/a/4115182/775359](https://stackoverflow.com/a/4115182/775359)

`brew install mysql`

> 您需要 mysql2 的 MySQL 开发头文件才能正确编译。这是必需的，因为大部分功能是用 C 语言编写的，随后与 MySQL 相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T14:59:25.263

只是一个小的更正：`libmysql-ruby` 正在逐步淘汰，所以`ruby-mysql`改用 --> [https://askubuntu.com/questions/641943/e-unable-to-locate-package-libmysql-ruby](https://askubuntu.com/questions/641943/e-unable-to-locate-package-libmysql-ruby)

因此完整的命令是：

`sudo apt-get install ruby-mysql libmysqlclient-dev mysql-server \ mysql-client mysql-common`

进而

`gem install mysql`

# gcc - 对“睡眠”的未定义引用

> ID：15397160
> 
> 赞同：0
> 
> 时间：2013-03-13T21:47:58.570
> 
> 标签：gcc, include, sleep, linker-errors, mingw32

我刚刚在我的新 PC 上安装了 Codeblocks，现在我正在尝试运行一个名为 CML 的库（它是一个来自学校的库，它不是很好）但是当我尝试运行一些非常基本的示例时出现一个奇怪的错误代码。它不是 Devcpp 中的代码本身，它编译得很好。

错误：

`d:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.7.1\..\..\..\libcml.a(video.o):video.c|| undefined reference to sleep'|`

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:57:54.540

Damon 是对的，WinAPI 只提供了一个名为 Sleep 的函数。该错误看起来链接器在您链接到的库中找不到此符号。

第一个猜测是你必须添加

```
-lWinmm 
```

到您的链接器命令行。但是，据我记得 Devcpp IDE 应该默认添加这个库......

# c# - 在文档中搜索文档不好的做法？

> ID：15397167
> 
> 赞同：1
> 
> 时间：2013-03-13T21:48:19.763
> 
> 标签：c#, mongodb, database

我的“事件”集合中有与此类似的文档：

```
{
   eventname: "blah",
   invitees: [
     {
        inviteid: 1,
        userid: 34234
     },
     {
        inviteid: 2,
        userid: 5232
     }]
} 
```

如果我想要 user: "34234" 被邀请参加的所有事件，那么在每个事件文档中搜索每个`invitees`数组是否有效？似乎杀过头了。我知道这对于关系数据库来说会很棒，但是这可以在 mongodb 中做得很好吗？

更新：

我最终使用了这个，它有效，但仍然不知道这是否是一个很好的方法： `_Events.Collection.FindAll().Where(x => x.Invitees.Any(y => y.UserId == userId)).ToList();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:55:41.697

相反，这样的查询很适合 MongoDB。它允许您应用 MultiKey 索引：数据类型为数组的字段的索引。

```
db.events.ensureIndex( { "invitees.userid" : 1 }) 
```

这样，您不必在每个文档中搜索每个数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:52:48.280

我不确定 mongodb，但您可以使用 Linq 轻松执行搜索：

```
var results = 
    from evt in events
    where evt.invitees.Any(x => x.userid == 34234)
    select evt; 
```

如果事件的数量相对较少，这将非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:53:28.670

我不认为这有什么问题，这是文档数据库的好处之一。如果有的话，你应该有一个索引。请参阅[索引的 mongodb 文档](http://docs.mongodb.org/manual/core/indexes/#indexes-on-embedded-fields)。

# ide - PhpStorm 5 中 *.js.twig 文件的 Javascript 语法高亮显示

> ID：15397169
> 
> 赞同：0
> 
> 时间：2013-03-13T21:48:25.970
> 
> 标签：ide, twig, phpstorm

我应该怎么做才能使 PhpStorm 突出显示 *.js.twig 文件中的 javascript 语法，因为它突出显示 *.js 文件，同时突出显示 twig 标签和结构。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T17:10:36.390

打开设置面板（在文件 > 设置...中），然后在左侧菜单的“IDE 设置”下选择“文件类型”。在右侧菜单中，选择“已识别文件类型”下的“Javascript 文件”，然后单击“已注册模式”下的“+”。输入“*.js.twig”并单击“确定”。

# python - 使用 SQLalchemy 设置并插入多个相关表

> ID：15397174
> 
> 赞同：2
> 
> 时间：2013-03-13T21:48:51.587
> 
> 标签：python, sqlalchemy

我有多个星型模式格式的相关表，如下所示：

```
FACT TABLE
==========
id (primary key)
globalattribute1
globalattribute2

DIMENSION TABLE 1
==========
id (foreign key to fact_table.id)
specificattribute1
specificatrribute2

DIMENSION TABLE 2
==========
id (foreign key to fact_table.id)
specificattribute1
specificatrribute2 
```

这是我迄今为止在我的 Python 代码中的内容（除了 Base, session 。你能提供任何建议吗？

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import *
engine = create_engine('mysql://...')
Session = sessionmaker(bind=engine)
session = Session()
Base = declarative_base()

class Fact(Base):
    __tablename__ = 'fact_table'
    id = Column(Integer, primary_key=True)
    global1 = Column(String(255))
    global2 = Column(String(255))

    #Constructor

class Dimension1(Base):
    __tablename__ = 'dimension1'
    id = Column(Integer, ForeignKey('fact_table.id'))
    specific1 = Column(String(255))
    specific2 = Column(String(255))

    #Constructor

class Dimension2(Base):
    __tablename__ = 'dimension2'
    id = Column(Integer, ForeignKey('fact_table.id'))
    specific1 = Column(String(255))
    specific2 = Column(String(255))

    #Constructor

Base.metadata.create_all(engine) 
```

我如何使用它来插入一条记录，该记录将包含一个维度表的全局属性和特定属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:36:09.250

如果我对您的理解正确，您想同时拥有两者`Dimension1`并`Dimension2`与之建立一对一的关系`Fact`？在这种情况下，您可能需要查看[一对一](http://docs.sqlalchemy.org/en/rel_0_6/orm/relationships.html#one-to-one)关系配置。

```
class Fact(Base):
    ...
    dim1 = relationship('Dimension1', uselist=False)
    dim2 = relationship('Dimension2', uselist=False)

    #Constructor 
```

此外，您可能想查看[关联代理](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/associationproxy.html)。我没有使用它们，但据我了解，它们可用于直接指定外部属性，而不是必须做例如`fact.dim1.specific1`

我希望这能回答你的问题。如果您不想要一对一，请查看其他可用的关系并查看适合的关系。

要添加新事实，请执行以下操作：

```
fact = Fact(...)
fact.dim1 = Dimension1(...)
fact.dim2 = Dimension2(...)
session.add(fact) 
```

这将自动发出所有必要的查询`session.commit`（或者您进行交易）。有关更多详细信息，您可能还应该阅读[Using The Session](http://docs.sqlalchemy.org/en/latest/orm/session.html)。

# powershell - 递归设置 NTFS 权限

> ID：15397177
> 
> 赞同：1
> 
> 时间：2013-03-13T21:48:56.720
> 
> 标签：powershell, recursion, permissions, batch-file, ntfs

所以基本上我们有一个大型共享驱动器，其中包含许多顶级文件夹，每个文件夹都包含许多子文件夹和文件。

```
E:\Share\%Username%
E:\Share\%Username%\Folder1
E:\Share\%Username%\Folder2
E:\Share\%Username%\Folder2\Folder3 
```

在这些文件夹中的每一个都是文件 - 现在基本上随着时间的推移权限已经失控，我想要做的基本上是绝对拥有顶层内的所有内容：

```
E:\Share\%username%\ 
```

但也要设置它，以便该文件夹中的任何内容都将从其父文件夹继承权限，因此：

```
E:\Share\%Username%\[Whatever is at this level and below] (whether files or folders) 
```

继承自：

```
E:\Share\%username%\ 
```

这可以通过批处理脚本完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:55:43.780

以递归方式获取文件夹 E:\Share\%Username%\ 及其所有内容的所有权：

```
takeown /f "E:\Share\%Username%\" /r 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T00:36:38.957

真的没有理由在这里重新发明轮子，您可以在 Windows 7 中从 cmd 提示符或从 PS 使用 icacls，它是一个单一的衬垫，可以取得所有权并具有内置递归。

你真正要做的是： 取得所有权（大多数时候是可选的） 设置继承 递归应用。

[http://ss64.com/nt/icacls.html](http://ss64.com/nt/icacls.html)

如果您使用的是 XP / 2003，则可以使用 xcacls。

# c# - 通常在快捷方式目标中使用参数启动程序

> ID：15397183
> 
> 赞同：0
> 
> 时间：2013-03-13T21:49:31.660
> 
> 标签：c#, command-line, process, arguments

我想通过提供*参数*来开始一个过程（不确定这些可以称为“参数”......见下文）。现在这有点特别：

*   该过程是一个 GUI（游戏 - 使命召唤 4 多人游戏），
*   我有一个此 GUI 的 Windows 快捷方式，其目标如下`"C:\\Path To Game\\game.exe" + connect [serverip]`：（注意`+`）。当我启动这个快捷方式时，GUI 启动并执行*参数* `connect [serverip]`（游戏实际启动并连接到服务器）。

我尝试了以下方法：

1.  `Process.Start("C:\\Path To Game\\game.exe + connect [serverip]");`

    但这显然以*Win32Exception* “系统找不到指定的文件”结束。

2.  ```
    var psi = new ProcessStartInfo();
    psi.FileName = "C:\\Path To Game\\game.exe";
    psi.Arguments = "+ connect [serverip]";
    Process.Start(psi); 
    ```

    这会在 GUI 中产生错误（游戏无法启动并显示“WIN_IMPROPER_QUIT_BODY”）。

任何想法如何为我的流程提供这些*论点？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:57:00.253

是否可能需要`WorkingDirectory`为游戏设置

```
string exePath = "C:\\Path To Game\\game.exe";
var psi = new ProcessStartInfo();
psi.FileName = exePath;
psi.Arguments = "+ connect [serverip]";
psi.WorkingDirectory = Path.GetDirectoryName(exePath);
Process.Start(psi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:53:17.603

选项 2 是去那里的方式，但你的“+”发生了什么？它不是一个特殊字符，它只是传递给命令，所以你也需要在 psi.Arguments 的开头包含它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:59:33.143

你必须使用：

```
psi.Arguments = "+connect [serverip]"; 
```

`+`（和之间没有空格`connect`）。

# java - 无法在 mac 上打开 h2.jar

> ID：15397186
> 
> 赞同：4
> 
> 时间：2013-03-13T21:49:44.453
> 
> 标签：java, jar, h2

我正在尝试为我的 java 应用程序构建一个 H2 数据库，我认为它正在工作，但我无法执行 .jar 文件来查看它是否工作......我正在用我的朋友，他有一台 mac，对他来说运行良好，我们有相同的 java 版本

我尝试通过双击 .jar 并尝试使用命令行打开它

`java -jar h2-1.3.170.jar`它向我展示了那个例外

```
IO Exception: "java.net.UnknownHostException: dhcp-10-231-195-255: dhcp-10-231-195-255: nodename nor servname provided, or not known" [90028-170]

    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:158)
    at org.h2.message.DbException.convert(DbException.java:273)
    at org.h2.util.NetUtils.getLocalAddress(NetUtils.java:263)
    at org.h2.server.web.WebServer.updateURL(WebServer.java:325)
    at org.h2.server.web.WebServer.init(WebServer.java:315)
    at org.h2.tools.Server.<init>(Server.java:51)
    at org.h2.tools.Server.createWebServer(Server.java:412)
    at org.h2.tools.Console.runTool(Console.java:228)
    at org.h2.tools.Console.main(Console.java:100)
Caused by: java.net.UnknownHostException: dhcp-10-231-195-255: dhcp-10-231-195-255: nodename nor servname provided, or not known
    at java.net.InetAddress.getLocalHost(InetAddress.java:1438)
    at org.h2.util.NetUtils.getLocalAddress(NetUtils.java:261)
    ... 6 more
Caused by: java.net.UnknownHostException: dhcp-10-231-195-255: nodename nor servname provided, or not known
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
    at java.net.InetAddress.getLocalHost(InetAddress.java:1434)
    ... 7 more
Exception in thread "main" org.h2.message.DbException: IO Exception: "java.net.UnknownHostException: dhcp-10-231-195-255: dhcp-10-231-195-255: nodename nor servname provided, or not known" [90028-170]
    at org.h2.message.DbException.get(DbException.java:158)
    at org.h2.message.DbException.convert(DbException.java:273)
    at org.h2.util.NetUtils.getLocalAddress(NetUtils.java:263)
    at org.h2.server.TcpServer.getURL(TcpServer.java:193)
    at org.h2.tools.Server.getStatus(Server.java:391)
    at org.h2.tools.Console.printProblem(Console.java:300)
    at org.h2.tools.Console.runTool(Console.java:270)
    at org.h2.tools.Console.main(Console.java:100)
Caused by: org.h2.jdbc.JdbcSQLException: IO Exception: "java.net.UnknownHostException: dhcp-10-231-195-255: dhcp-10-231-195-255: nodename nor servname provided, or not known" [90028-170]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    ... 8 more
Caused by: java.net.UnknownHostException: dhcp-10-231-195-255: dhcp-10-231-195-255: nodename nor servname provided, or not known
    at java.net.InetAddress.getLocalHost(InetAddress.java:1438)
    at org.h2.util.NetUtils.getLocalAddress(NetUtils.java:261)
    ... 5 more
Caused by: java.net.UnknownHostException: dhcp-10-231-195-255: nodename nor servname provided, or not known
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
    at java.net.InetAddress.getLocalHost(InetAddress.java:1434)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T14:15:13.737

要临时修复它，请编辑主机文件并将您的主机名附加到`127.0.0.1` 环回地址：

```
sudo vi /etc/hosts 
```

> 127.0.0.1 本地主机您的主机名
> 
> 255.255.255.255 广播主机
> 
> ::1 本地主机
> 
> fe80::1%lo0 本地主机
> 
> 192.168.1.3 洛基

首先设置它，使用：

> sudo scutil --set HostName YourHostname

关注此 JIRA 链接以获取更多信息：[https ://jira.exoplatform.org/browse/KER-203?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://jira.exoplatform.org/browse/KER-203?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:00:02.993

如果你用谷歌搜索这个例外，你会发现[其他人](http://blog.leon-rosenberg.net/2012/08/oracle-kills-getlocalhost-on-macos-x-in.html)也有同样的问题。这可能是由[Java 7 中的错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7180557)引起的。

# ios - 如何应对响应式设计和 iPad/iPhone

> ID：15397188
> 
> 赞同：1
> 
> 时间：2013-03-13T21:50:10.727
> 
> 标签：ios, responsive-design

我正在为响应式设计而苦苦挣扎。

一切都是按百分比确定的，并且开始按“常规”屏幕上的预期工作。

通过 javascript 我确定设置背景图像的窗口宽度和高度。背景图像使用 css3 “cover” 属性。

但在 iPad/iPhone 上，一切显然都搞砸了。当页面内容溢出页面高度（大多数页面都这样做并且应该这样做）时，“封面”属性显然会扩展并显示图像太大。并且 height 和 margin-top 突然设置得太高了。

我的猜测是 iPhone/iPad 正在考虑将包括溢出内容在内的整个内容作为整个页面高度，而不仅仅是实际可见的屏幕......但我不知道如何处理它。

此外，当我提醒窗口宽度时，我得到：iPad、iPhone4 和 iPhone3 上的 980。我猜这表明我不能在 iPhone/iPad 上使用窗口宽度......？

我如何处理移动设置？

我希望我不需要创建 iPhone/iPad 特定的设置......但我开始担心我需要这样做？

这是带有设计的游乐场：http: [//basix.popweb.dk](http://basix.popweb.dk)

有什么帮助或建议吗？

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T00:13:59.043

好吧，我刚刚在 iPhone 上检查了您的网站，它似乎可以正常加载，但是布局似乎对我没有反应。

无论如何，您使用任何 CMS 吗？

另外，当我学习材料时，我建议您查看[http://themble.com/bones/](http://themble.com/bones/) 即使它是一个 wordpress 主题，样式表也很好地说明了什么是有效的。尽管如此，它还是使用了我建议学习的 SASS 或 LessCSS（CSS 预处理器），因为它会在编写 CSS 时为您节省大量时间。一点都不难，我在 2 小时内就学会了 LessCss [http://lesscss.org/](http://lesscss.org/)。

# android - 使用 thread.sleep() 动画 Android UI 组件（此处为 ImageView）

> ID：15397192
> 
> 赞同：-2
> 
> 时间：2013-03-13T21:50:23.713
> 
> 标签：android, android-layout, imageview

我有一个 android 应用程序，我想使用以下代码在初始屏幕上逐帧移动 imageView：

```
ImageView iv = (ImageView) findViewById(R.id.myimage);
try {
    Thread.sleep(2000); //giving a 2s wait
} catch (InterruptedException e1) {
    e1.printStackTrace();
}
for(int i=0; i<100; i++){
    iv.setPadding(0, 0, 0, i*2); //increasing the bottom padding each 50ms
    try {
        Thread.sleep(50);
    } catch (Exception e) {

    }
} 
```

但是这段代码将屏幕空白`(2000 + 100*50) milliseconds`，然后显示应用程序以及图像的最终位置（即不显示动画）。我怎样才能得到动画？此外，是否有任何适用于 android 的 UI 库可以帮助我以更简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:53:40.447

不要使用线程，而是使用处理程序：

```
new Handler().postDelayed(new Runnable(){...RUNNING CODE GOES HERE....}, 2000) 
```

在此处阅读有关为什么使用处理程序而不是线程的更多信息：http: [//shenhengbin.wordpress.com/2012/08/22/androidupdate-ui-through-handler/](http://shenhengbin.wordpress.com/2012/08/22/androidupdate-ui-through-handler/)

# php - PHP 会话数组 - 购物车 - 跨浏览器更新“滞后”

> ID：15397197
> 
> 赞同：0
> 
> 时间：2013-03-13T21:50:30.070
> 
> 标签：php, session, shopping-cart

我正在使用 $_SESSION 数组来控制添加到购物车的产品。

我发现浏览器之间的差异在于 SESSION “接受”在 SESSION 中显示最新数据的速度。

A: 我快速添加一些东西到购物车/更新购物车中的金额。

Mozilla : 直接效果 - 没问题

IE：没有直接响应 - 等待 10 秒刷新.. ：显示正确的数据

Chrome：没有直接响应 - 等待 10 秒刷新.. ：显示正确的数据

//

B：我添加了一些动作之间等待时间为 10 秒的内容：

Mozilla : 直接效果 - 没问题

IE：直接效果 - 没问题

Chrome：直接效果 - 没问题

是什么原因在 Mozilla 中只有直接直播效果而在 IE/Chrome 中没有？我该如何解决这个问题？

* * *

```
 function basket_skuadd(item) {
         var prod_sku_passed = ($(item).attr("id"));

         var result = $("#basket").empty();
         $.post('../coo.php',{cookieskuadd : prod_sku_passed},
         function(data){
         result.append(data);
         location.reload(true); 
         }  ) 
         } 
```

.. 酷.php

```
 elseif (!empty($_POST['cookieskuadd']))
        {
        session_start(); 
        //check for current product in visitor's shopping cart content
        $i=0;
        while ($i<count($_SESSION["prodsku"]) && $_SESSION["prodsku"][$i] 
        != $_POST["cookieskuadd"]) $i++;
        if ($i < count($_SESSION["prodsku"])) //increase current product's item quantity
        {
        $_SESSION["prodpcs"][$i]++;
        } 
```

* * *

我发现：

```
 location.reload(true); 
```

导致问题。我虽然然后需要另一个解决方案。

当用户在购物车内时，由于主页需要更新，我添加了重新加载功能。

无需重新加载 Coo.php 更新得很好，并在页面顶部的 DIV 中显示得很好。

# python - 如何确保子字符串是某个字符串的一部分？

> ID：15397200
> 
> 赞同：-2
> 
> 时间：2013-03-13T21:50:59.293
> 
> 标签：python, python-3.x

编写一个程序，从用户那里获取两个字符串。程序应验证 s_short 是否是 s_long 的子字符串，如果在 s_long 中找到 s_short，则程序应打印 s_long 中出现 s_short 的索引位置。如果 s_short 不是 s_long 的子字符串，您的程序应该打印 -1。例子

```
RESTART 
Enter the long string: aaaaaa
Enter the short string: aa
0 1 2 3 
RESTART  
Enter the long string: aaaaaaa
Enter the short string: ab
-1 
```

这是我的代码，但它不起作用

```
s_long=input("Enter a long string:")
s_short=input("Enter a short string:")
for index, s_short in enumerate(s_long):
  if (len(s_short))>=0:

        print(index)

else:
    print("-1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:14:15.023

你可以这样做：

```
try:
    print s_long.index(s_short)
except ValueError:
    print -1 
```

编辑：实际上有一个 find 方法，它与上述所有方法完全相同：

```
print s_long.find(s_short) # -1 if not found 
```

编辑：如果您需要出现子字符串的*所有*索引，则可以使用 Python 的`re`模块。

# sql-server - 具有 group by 和/或 distinct 和 pivot 的复杂 SQL Server 查询

> ID：15397201
> 
> 赞同：0
> 
> 时间：2013-03-13T21:51:07.487
> 
> 标签：sql-server, group-by, pivot

我有一个`UserAction`具有以下结构的表（）：

```
UserActionPK - unique primary key of the UserAction table
AgencyCode - unique name for an agency
EditedKEY - key of a table edited by the user
UserName - name of the user that edited the record
EditedDate - day on which the edit was made 
```

我需要查询这些数据并最终得到一个带有 AgencyCode 列的透视数据集，以及一组用户中的每个用户的一个列（比如说 [JohnDoe]、[JoeSmith]、[SomeGuy]）。在每个用户的列中，它将列出用户执行的 UserAction 总数。前任/

```
AgencyCode   JohnDoe   JoeSmith   SomeGuy
ABC          1         3          4
DEF          0         7          2 
```

但是，有一种特殊情况。如果用户在同一天 (EditedDate) 对同一条确切记录 (EditedKEY) 执行了多个操作，那么它应该只计为 1 个操作。例如，如果 JohnDoe 在 2013 年 1 月 1 日编辑了 EditedKEY 为“XXX”的记录 1 次，然后在 2013 年 1 月 2 日编辑了相同的 EditedKEY 记录“XXX”3 次，则应仅计为 2对总数进行编辑。在旋转它之前，我基本上只需要对 EditedDate 值进行分组。请注意，EditedKEY 值是一个 guid，因此即使在机构之间它也始终是唯一的。

我有一个查询，它将获取我需要的数据并对其进行透视，但没有将 UserAction 与相同的 EditedDate、UserName 和 AgencyCode 分组：

```
select * from
(
    select UserActionKEY, AgencyCode, EditedDate, UserName
    from UserAction
    where EditedDate >= @FromDate
    and EditedDate <= @ToDate
) Pivot1
pivot
(
    count(UserActionKEY) 
    for UserName in 
    (
        [JohnDoe],
        [JohnSmith],
        [SomeGuy],
    )
) Pivot2 
```

我怎样才能让它按天/用户/机构对这些操作进行分组？

更新 - 以下是要求的一些示例数据：

```
UserActionPK                            AgencyCode  EditedKEY                               UserName    EditedDate
0F573329-0C83-44B8-AD9A-808D8795FCCF    ABC         521A63CD-AEEF-44BF-BDCB-EE96373AC39A    JohnDoe     3/11/2013
36321DB6-DA1B-430E-B85C-36372088860E    ABC         521A63CD-AEEF-44BF-BDCB-EE96373AC39A    JohnDoe     3/11/2013
BDC9B165-CC93-409A-BEAE-3365709F6E54    ABC         042D633F-47AC-4A5C-BE3B-B179E01AD5C9    JohnDoe     3/11/2013
2475344C-80DD-4898-A7CD-B41B2593F0FE    DEF         F6016422-BB24-4B39-A735-BCD1206AEA4A    JohnDoe     3/11/2013
3CD7B9BB-428A-45E9-B254-8A2FD502B9F7    DEF         C9A028F6-6E1A-4FD6-A549-D932BC20AA88    JohnDoe     3/11/2013
B0348158-1455-42DF-81EB-29704F08E920    ABC         6937C16A-752A-4D69-BBE9-932015B8C137    JohnDoe     3/12/2013
F1C5950D-05D2-48B6-BFC3-1C32FD970F76    ABC         521A63CD-AEEF-44BF-BDCB-EE96373AC39A    JohnDoe     3/12/2013
502F67A2-6448-48FB-8BFE-74D21592BA48    ABC         B3371961-06EE-4CD3-9373-87102EB793FA    JoeSmith    3/11/2013
E797DFE0-8693-44FC-821F-46B745B37533    ABC         79E1F21F-C7D3-4F8C-8D51-536C34FF84D4    JoeSmith    3/11/2013 
```

在此示例中，JohnDoe 列应该对机构“ABC”有 4 个操作计数，即使他对该机构有 5 条记录，因为他对同一个“EditedKEY”有 2 个操作 (521A63CD-AEEF-44BF-BDCB-EE96373AC39A ) 当天，仅计为 1 次操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:01:14.140

而不是直接`COUNT(...)`，您想对分组条件加上一个附加字段执行 SELECT DISTINCT `Value = 1`。然后执行 a`SUM(Value)`代替您的`COUNT(...)`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T21:56:50.287

这种转换通常最好用客户端应用程序代码完成，而不是在 SQL 中。SQL 代码需要在前端知道查询开始时结果列的数量和名称。

# printing - 用 DO 绘制垂直线

> ID：15397203
> 
> 赞同：1
> 
> 时间：2013-03-13T21:51:13.443
> 
> 标签：printing, wolfram-mathematica

我尝试将此代码的结果绘制为垂直线，每个垂直线位于 FindRoot 例程的解决方案的位置（类似：[http](http://www.astrobio.net/albums/xsolar/ach.sized.jpg) ://www.astrobio.net/albums/xsolar/ach.sized.jpg ）。

```
 omega[a_] := 2 \[Pi] /a^(3/2);
Do[
Print[FindRoot[omega[a]/omega[5.2]==j/i+1, {a, 1}]],
{j,1,7,1},{i,1,7,1}] 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:04:58.867

我部分猜测，因为你的问题不够清楚：

```
omega[a_] := 2 Pi/a^(3/2);
ListPlot[Flatten[
  Table[{a /. FindRoot[omega[a]/omega[5.2] == j/i + 1, {a, 1}], i + j}, 
              {j, 1, 7, 1}, {i, 1, 7, 1}], 1], 
 Filling -> Axis,  PlotRange -> {{0, 6}, {0, 15}}] 
```

![数学图形](../Images/e57f4a3645229a3c2e4ec4d497ab6b6d.png)

# php - 使用 Symfony 和最小稳定性清空缓存后反序列化错误：dev

> ID：15397204
> 
> 赞同：1
> 
> 时间：2013-03-13T21:51:14.760
> 
> 标签：php, symfony, composer-php, sonata-admin

安装in后手动清除`Symfony`缓存时出现错误（但我与or有相同的错误）`SonataAdminBundle``Symfony 2.1.8``2.2``2.1`

首先，我安装了`Symfony`：

```
php composer.phar create-project symfony/framework-standard-edition Project/ 2.1.8 
```

然后通过添加 (line per line) 更新我的 composer.json ：

```
 "knplabs/knp-menu-bundle": "1.1.*",
    "sonata-project/block-bundle": "2.1.x-dev",
    "sonata-project/cache-bundle": "2.1.x-dev",
    "sonata-project/jquery-bundle": "1.8.x-dev",
    "sonata-project/exporter": "1.*",
    "sonata-project/doctrine-orm-admin-bundle": "2.1.x-dev",
    "sonata-project/admin-bundle": "2.1.x-dev"

    ...
    "minimum-stability": "dev", 
```

显然，`sonata-project/doctrine-orm-admin-bundle`捆绑包需要在 dev 处设置最低稳定性。

最后我跑了：

```
 php ../composer.phar update
    rm -rf app/cache/*
    php app/console cache:clear 
```

当我在开发环境中加载首页时，出现错误：

```
Notice: unserialize() [<a href='function.unserialize'>function.unserialize</a>]: Error at offset 154 of 25784 bytes in /web/Project/app/bootstrap.php.cache line 1316 
```

bootstrap.php.cache 加载一个反序列化文件 app/cache/dev/appDevDebugProjectContainer.php.meta ：

[http://pastebin.com/EEZmxWZQ](http://pastebin.com/EEZmxWZQ)

经过多次测试，似乎 "minimum-stability": "dev" 破坏了 clear:cache 命令。在全新安装 Symfony 后，添加“minimum-stability”：“dev”后，我又出现了错误。

你知道如何在不改变最低稳定性的情况下安装 Sonata 管理包吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:35:36.677

经过一些研究，我找到了这个解决方案

```
"symfony/symfony"              :"2.1.x@stable",

"sonata-project/intl-bundle"              :"dev-master",
"sonata-project/admin-bundle"             :"2.1.x",
"sonata-project/cache-bundle"             :"dev-master",
"sonata-project/doctrine-orm-admin-bundle":"2.1.x", 
```

# bash - bash 脚本：查找最大值、分组依据和按列排序

> ID：15397205
> 
> 赞同：3
> 
> 时间：2013-03-13T21:51:17.193
> 
> 标签：bash, shell

我有一个看起来像这样的文件：

```
b, 20, 434
a, 20, 23
a, 10, 123
a, 20, 423
a, 10, 89
b, 20, 88
b, 10, 133
b, 10, 99 
```

1.  为 col1 和 col2 的每个唯一组合找到 col 3 的最大值。（例如，所有 col3 的最大值`a,10`）
2.  按 col1 对输出进行分组（所有`a`行在一起）
3.  按 col2 对输出进行排序。

也就是说，输出应该是文件应该是

```
a, 10, 123
a, 20, 423
b, 10, 133
b, 20, 434 
```

如何在 bash 脚本中执行此操作？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-17T15:14:16.937

这可以完成工作：

```
< input sort -k3,3gr | sort -k1,1 -k2,2g -u 
```

它在第三个字段上以相反的顺序对数字进行排序，然后对第一个和第二个字段进行排序，仅采用第一次出现（-u 表示唯一）。

您不需要填充，即如果您在输入中添加一行

```
a, 3, 31 
```

输出是：

```
a, 3, 31
a, 10, 123
a, 20, 423
b, 10, 133
b, 20, 434 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T22:04:45.057

这会稍微修改空格，但也许这是可以接受的：

```
awk '$3 > a[$1,$2] { a[$1,$2] = $3 } END {for( k in a) print k a[k]}' input |
    sort -n -t, -k1,1 -k2,2 
```

但是该解决方案高度依赖于输入中的空格，因此最好执行以下操作：

```
awk '$3 > a[$1","$2] { a[$1","$2] = $3 } 
    END {for( k in a) print k "," a[k]}' FS=, input |
    sort -n -t, -k1,1 -k2,2 
```

# regex - Google Analytics - 正则表达式目标 URL 与页面浏览量不匹配

> ID：15397208
> 
> 赞同：0
> 
> 时间：2013-03-13T21:51:32.743
> 
> 标签：regex, url, google-analytics

出于某种原因 - 我的目标 URL 页面加载与我在 Google Analytics（分析）中跟踪的总体目标不匹配。

在我的网站上完成表格后 - URL 将附加以下内容：

```
?enquiry_sent 
```

所以`www.mysite.com`会变成`www.mysite.com/?enquiry_sent`

我正在使用以下正则表达式来尝试跟踪 URL 加载：

```
.*\?enquiry_sent.*|.*\?enquiry_sent 
```

昨天 - 我们开始在整个网站上进行测试，在提交的超过 75 个表格中，我们只在 GA 中注册了 7 个目标。

带有 ?enquiry_sent 的 url 的唯一页面加载都在 Google Analytics 中，但没有被注册为目标。

有谁知道为什么会发生这种情况或我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:15:00.373

你的正则表达式没有意义。它应该只是：

```
.*\?enquiry_sent.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:53:28.507

我刚刚更新了这个帖子，因为我收到了 Google 团队的回复。显然使用的正则表达式没有问题。

谷歌告诉我，目标完成实际上是衡量有多少**访问**导致目标完成，而不是目标实际完成的次数。

因此，在我的情况下，网站提交了超过 75 条潜在客户——它们仅来自 7 次访问，因此只有 7 次转化计入目标完成报告。

# ruby - 获得权限被拒绝 - /mnt/project-name/config/../tmp/ruby-inline/.ruby_inline

> ID：15397210
> 
> 赞同：1
> 
> 时间：2013-03-13T21:51:37.517
> 
> 标签：ruby, passenger, merb

我已经对我的 Merb 应用程序进行了更改并将其部署到 uat 以进行测试，但我得到了 Permission denied - /mnt/project-name/config/../tmp/ruby-inline/.ruby_inline

我根据以下检查了路径中的权限

[权限被拒绝 - /tmp/.ruby_inline/Inline_ImageScience_cdab.c](https://stackoverflow.com/questions/2564779/permission-denied-tmp-ruby-inline-inline-imagescience-cdab-c)

但我无法解决它，所以恢复了我的更改并部署了运行良好的旧 SHA，但我得到与旧 SHA 相同的“权限被拒绝错误”。我知道问题不在于我所做的更改，而在于其他一些更改，我无法弄清楚出了什么问题以及如何解决这个问题。请帮助我。谢谢。

*   在此路径的权限下方添加...

    ls -l /mnt/project-name/config/../tmp/ruby-inline/.ruby_inline

    -rw-r--r-- 1 没有人 nogroup 24571 2013-03-13 18:54 Inline_RawParseTree_ab80.c

    -rwxr-xr-x 1 没有人 nogroup 33465 2013-03-13 18:54 Inline_RawParseTree_ab80.so

    ls -l /mnt/项目名称/config/../tmp/

    lrwxrwxrwx 1 root root 22 2013-03-13 18:54 pids -> /project-name/shared/pids

    -rw-r--r-- 1 root root 69 2013-03-13 18:55 restart.txt

    drwx------ 3 没有人 nogroup 4096 2013-03-13 18:54 ruby​​-inline

    我不明白这是什么问题，并且 cap deploy 会更改文件权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:58:30.830

这是一个权限问题。运行您的应用程序的用户不允许写入 /tmp/.ruby_inline。您需要修复权限或确保应用程序以具有这些权限的用户身份运行。

# asp.net-mvc - MVC 3 WebGrid 试图控制每一行的权限

> ID：15397213
> 
> 赞同：0
> 
> 时间：2013-03-13T21:51:49.867
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webgrid

当我可以看到字典包含键和值时，为什么此列不显示链接。看起来索引“item.Name”没有解析。当我没有权限时，它工作正常。普通格式：`@<text>@Html.ActionLink("Details", "Details", new {id = item.Id})</text>`有效。

```
grid.Column(header: "Actions", format: @<text>
                 @if(Model.Permissions.ContainsKey(item.Name))
                 {
                   var permissions = Model.Permissions[item.Name];
                   if (permissions.Contains("Read"))
                   {
                      @Html.ActionLink("Details", "Details", new {id = item.Id})
                   }
                   if (permissions.Contains("Update"))
                   {
                       @Html.ActionLink("Edit", "Edit", new {id = item.Id})
                   }
                 }</text>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:27:34.550

它实际上按预期工作。我在此处的列表中搜索的字符串中有错字，`permissions.Contains("Update")`并且`permissions.Contains("Read")`. “Update”和“Read”是“Read_x”和“Update_x”形式的东西。即使我计划稍后重构它们，我也应该知道不要使用字符串文字。

# ios - 跨 3 个实体的 iOS 核心数据查询

> ID：15397214
> 
> 赞同：0
> 
> 时间：2013-03-13T21:51:58.103
> 
> 标签：ios, core-data, nspredicate

![模型图像](../Images/60977aed3924c19e6bc61b0ce086a64d.png)

我的数据模型类似于上面的简化模型。中心是一个 Person 实体，一个人可以参与一个或多个测试。一个或多个人可以参加给定的测试。最后，一个人可以与一个或多个姓氏相关联。我的大部分查询都可以只用两个实体完成，但我有一个需要全部三个。我想返回 Surname.surname = @"someValue" 的测试对象。我怎么做？

注意：关系 testTakenByPerson 绘制不正确。这是一对多的关系，而不是绘制的一对一的关系。

谢谢吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:07:24.327

与此答案类似[https://stackoverflow.com/a/15390492/1187415](https://stackoverflow.com/a/15390492/1187415)，您可以将 SUBQUERY 用于嵌套对多关系：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(personsWhoTookTest, $p, ANY $p.surnames.surname == %@).@count > 0", @"someValue"]]; 
```

# css - 移动设备的 Twitter 引导程序和最大宽度？

> ID：15397217
> 
> 赞同：4
> 
> 时间：2013-03-13T21:52:09.237
> 
> 标签：css, mobile, twitter-bootstrap, responsive-design

我想将移动设备的固定设置为 320px - 我希望我的网站始终与[屏幕上的 320px](http://mattkersley.com/responsive/)相同。

我尝试在 320px 上设置固定宽度，如下所示：

```
@media (max-width: 320px) {
    body {
        width: 320px;
    }
} 
```

但是这段代码对我不起作用。有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T21:53:57.347

您可以在 html 中使用元标记。

```
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=320, height=device-height, target-densitydpi=medium-dpi" /> 
```

# c# - 刷新 GAC 引用而不重新启动 C# 应用程序

> ID：15397218
> 
> 赞同：1
> 
> 时间：2013-03-13T21:52:12.960
> 
> 标签：c#

我有一个 C# 应用程序，用于检查丢失的 dll。如果它丢失，那么它会运行一个安装程序，将 dll 安装到 GAC 中。但是，一旦安装了，我发现程序还是找不到dll（我只是运行引用它的类，看看是否有FileNotFoundException。）有没有办法从角度刷新GAC引用正在运行的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:04:21.363

与其等待失败，不如在应用程序启动时检查 DLL，并在必要时安装，*然后再尝试从程序集中调用任何方法*？

或者，保留当前的实现，但在安装 DLL 后，使用显式重新加载程序集`Assembly.Load(...)`

# python - 通过 SOAP 访问 ISI Web of Science

> ID：15397225
> 
> 赞同：5
> 
> 时间：2013-03-13T21:52:41.940
> 
> 标签：python, web-services, soap, suds

我正在尝试编写一个 python 脚本，从 ISI Web of Science 检索有关出版物的信息。我在 GitHub 上找到了 domoritz 的 python 脚本[wos.py。](https://gist.github.com/domoritz/2012629)它使用 Suds 连接到 ISI Web of Science 网络服务。我已将它导入到我的 python 脚本中，并按照评论中非常简短的说明尝试了此代码：

```
from wos import *
soap = WokmwsSoapClient()
results = soap.search('Hallam') 
```

然后我得到一个错误：

```
suds.WebFault: Server raised fault: 'line 1:1: unexpected token: Hallam' 
```

我查看了 wos.py 中的代码。这是`search`功能：

```
def search(self, query):
    qparams = {
        'databaseID' : 'WOS',
        'userQuery' : query,
        'queryLanguage' : 'en',
        'editions' : [{
            'collection' : 'WOS',
            'edition' : 'SCI',
        },{
            'collection' : 'WOS',
            'edition' : 'SSCI',
        }]
    }

    rparams = {
        'count' : 5, # 1-100
        'firstRecord' : 1,
        'fields' : [{
            'name' : 'Relevance',
            'sort' : 'D',
        }],
    }

    return self.client['search'].service.search(qparams, rparams) 
```

我想也许`query`不能只是一个普通的 python 字符串，就像我在[WSDL](http://search.isiknowledge.com/esti/wokmws/ws/WokSearchLite?wsdl)页面中看到的那样，`userQuery`它实际上是 type `xs:string`。但是[这个页面](http://search.webofknowledge.com/esti/cxf-wsclient-demo/docs/soap/WokSearch/api/search.html)说`userQuery`“必须是一个有效的 WOKQL 查询语句。这个要求是在内部强制执行的”，这使得我看起来不需要传入一个特殊的类型。无论如何，我尝试附加`'xs:string'`到查询的开头，但我得到了同样的错误。

有人知道使用这种方法的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-10T07:45:33.057

您可以尝试使用[`Wos Python Client`](https://github.com/enricobacis/wos)可以安装的：

```
pip install wos 
```

然后你可以像这样使用它：

```
from wos import WosClient
import wos.utils

with WosClient('JohnDoe', '12345') as client:
    print(wos.utils.query(client, 'AU=Knuth Donald')) 
```

您还可以使用 CLI 工具，例如：

```
wos -u 'JohnDoe' -p '12345' query 'AU=Knuth Donald' 
```

* * *

*免责声明：我不为 Web of Science 工作，但我是客户端的作者。由于 Web of Science 不允许来自普通用户的 Web 服务请求，因此您需要访问 Web 服务（这是除了正常 WOS 访问之外的一项付费服务​​）。您应该要求您的大学向您提供 WOS 给他们的用户名和密码。这不仅适用于我的客户，也适用于任何使用 WOS Web 服务的东西。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:25:44.217

所以显然传入一个python字符串很好，但我需要一个更像搜索查询的字符串。我在之前提到[的网站](http://search.webofknowledge.com/esti/cxf-wsclient-demo/docs/soap/WokSearch/api/search.html)上找到了这个例子：

```
<soap:Body>
  <woksearch:search xmlns:woksearch="http://woksearch.v3.wokmws.thomsonreuters.com">
  <!--  this request has the minimum required elements, 
      but contains all valid retrieve options 
      for this operation and databaseId -->
  <queryParameters>
     <databaseId>WOK</databaseId> 
     <userQuery>AU=Arce, G*</userQuery>      
     <queryLanguage>en</queryLanguage> 
  </queryParameters>
.... 
```

所以我尝试使用`results = soap.search('AU=Hallam')`并且有效。我现在可以做类似的事情`print results.recordsFound`并且我得到正确的答案。

# jquery - jQuery单击触发器应用于箭头键不起作用

> ID：15397227
> 
> 赞同：1
> 
> 时间：2013-03-13T21:52:50.607
> 
> 标签：jquery, triggers, arrow-keys

我试图使用 jQuery 的 trigger() 方法将箭头导航应用于图像库。

我从另一个stackoverflow用户那里得到了一个例子，它似乎很好，但是当我向列表项添加真实链接时，它们只会在单击时加载，而不是在按下箭头键时加载。

[在这个 JSfiddle](http://jsfiddle.net/DPHWZ/1/)中，最后两个列表项“apple”和“microsoft”具有真正的链接，当它们被箭头键激活时，它们应该将页面加载到 iFrame 上，但它们没有。它们仅在单击时才能正常工作。

如何使按键等于点击？

```
var chosen = "";
$(document).keydown(function(e){ // 38-up, 40-down
    chosen = $('li.selected').index(); //grab the current selection
    if (e.keyCode == 40) { 
        if(chosen === "") {
            chosen = 0;
        } else if((chosen+1) < $('li').length) {
            chosen++; 
        }
        selectImage(chosen);
        return false;
    }
    if (e.keyCode == 38) { 
        if(chosen === "") {
            chosen = 0;
        } else if(chosen > 0) {
            chosen--;            
        }
        selectImage(chosen);
        return false;
    }
});

function selectImage(whichIndex) {
    $('li:eq('+whichIndex+') a').trigger("click");
}
$("#selection a").click(function() {
    $('li').removeClass('selected'); 
    $(this).parent().addClass('selected');

    $("#debug").text( $(this).attr("href") +" was just clicked");   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:02:49.303

该`.trigger()`函数只会导致您使用 jQuery 附加的处理程序方法执行。它不会导致`<a>`元素的正常行为执行。也就是说，它不会加载`<iframe>`.

您可以使用它`e.preventDefault()`来阻止`<a>`元素执行其默认行为，并添加显式执行它的代码。这样，它会在单击和`.trigger()`调用时执行。

在您的情况下，您需要设置`src`.`<iframe>`

尝试将事件处理程序更改为：

```
$("#selection a").click(function(e) {
    var $a = $(this);
    e.preventDefault();
    $a.parent().addClass('selected').siblings().removeClass('selected');
    $('iframe[name=iframeload]').prop('src', $a.attr('href'));
    $("#debug").text( $a.attr("href") +" was just clicked");   
}); 
```

# android - 使用自动完成选择多个对象类型

> ID：15397233
> 
> 赞同：0
> 
> 时间：2013-03-13T21:53:16.507
> 
> 标签：android

我正在寻找一些帮助来找到一种强大的方法来允许选择不同的列表项。我的情况是，例如，我有一个列表配置文件，列表团队......并且我想要一个自动完成输入，例如，如果我输入 Al，所有团队和配置文件对象都有成员变量名称开头铝。结果是我可以从活动中获得，在执行提交点击时，一个列表和一个包含所有通过自动完成表单选择的对象的列表。此外，我希望提供给用户的列表与他键入的字符匹配显示名称和图片（facebook 喜欢标签选择）。

显然，我不是要一些代码，而是至少需要一些经验丰富的 Android 开发人员的指导，他们知道该做什么和不做什么来创建这种东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:49:18.183

Loader 是过滤列表的最佳方式之一。您初始化一个加载器，该加载器采用用于过滤器的字符串约束，每次用户键入时，您都会更新约束并重新启动加载器。

如果我假设您的所有对象都缓存在 SQLite 数据库中，您可以使用 CursorAdapter、Cursor 和 CursorLoader。您可以通过使用 EditText 的内容过滤查询来创建所需的 CursorLoader。

如果您不熟悉 CursorLoader ，则可以使用[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)，这样您就不需要数据库并编写可以接受原始查询的提供程序。您在 ListA、ListB 等中的对象必须继承公共类（嗯... DataThing 可能 :-)），您将列表中的对象连接起来，然后您可以过滤列表：[过滤 Java 集合的最佳方法是什么？](https://stackoverflow.com/questions/122105/java-what-is-the-best-way-to-filter-a-collection)

这是用于数据过滤的。现在为了以您想要的方式显示数据，您可以在 EditText 字段下方显示列表，或者如果您想要更高级的外观，可以创建一个自定义组件。

# python - Python MySQLdb iterate through table

> ID：15397239
> 
> 赞同：14
> 
> 时间：2013-03-13T21:53:39.120
> 
> 标签：python, mysql, mysql-python

I have a MSQL db and I need to iterate through a table and perform an action once a WHERE clause is met. Then once it reaches the end of the table, return to the top and start over.

Currently I have

```
cursor = database.cursor()    
cursor.execute("SELECT user_id FROM round WHERE state == -1 AND state = 2")  
round_id = cursor.fetchone()

if round != 5
   ...do stuff 
```

in a loop but this obviously only keeps looping the first entry. I guess you need to use the for in function to read through the table, but I'm not sure exactly how to do this using mysqldb?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-12-11T17:14:55.633

Once you have results in the cursor, you can iterate right in it.

```
cursor = database.cursor()    
cursor.execute("SELECT user_id FROM round WHERE state == -1 AND state = 2")  
for round in cursor:
  if round[0] != 5
    ...do stuff 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T22:05:50.270

This will set the cursor at the beginning of the result set and tell you how many rows it got back (I went back and forth on this one, but [this is the most authoritative documentation](http://www.python.org/dev/peps/pep-0249/#id14) I have found, older Python MySQLdb lib returned rowcount on execute, but Python Database API Specification v2.0 does not, this should be the most compatible)

```
cursor.execute("SELECT user_id FROM round WHERE state = -1 OR state = 2")
numrows = cursor.rowcount 
```

Will tell you how many Rows you got in return

```
for x in xrange(0,numrows):
  row = cursor.fetchone()
  print row[0], "-->", row[1] 
```

Will iterate over each row (no need to enumerate x with range)

# html - 定位背景：带有zindex的url

> ID：15397242
> 
> 赞同：0
> 
> 时间：2013-03-13T21:53:55.993
> 
> 标签：html, css, joomla

这是一个让我难倒的你：

我习惯`background:url`在我的容器的右下角放置一个小图像，在 css 中效果很好。但是，当用户在帐户创建页面上时，具有“创建帐户”和“取消”按钮的部分与我的图像重叠，遮住了一半。这是它的样子：

![](../Images/c307fba226cec0d73f727c542391105f.png)

我已经研究过使用 z-index 来解决这个问题，但无济于事（因为图像是容器的一部分，如果我减少模糊 div 的 z-index，则带有按钮的整个部分都放在容器后面使他们无法看到）。我也不想单独进入每个页面并将图像放入 html 中，特别是因为我使用的是 Joomla 并且模板 html 结构对我来说非常混乱。（使用带有默认 Protostar 模板的 Joomla 3.0.3）

我错过了一些明显的东西吗？我感觉我是...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:57:38.537

你很有趣 :) 使用背景图像但想把它放在前景中。

`position`只需在`absolute`容器的右下角使用一个图像标签（不要忘记给容器`position: relative`）

# javascript - AngularJS toggle class using ng-class

> ID：15397252
> 
> 赞同：220
> 
> 时间：2013-03-13T21:54:39.280
> 
> 标签：javascript, angularjs

I am trying to toggle the class of an element using `ng-class`

```
<button class="btn">
  <i ng-class="{(isAutoScroll()) ? 'icon-autoscroll' : 'icon-autoscroll-disabled'}"></i>
</button> 
```

isAutoScroll():

```
$scope.isAutoScroll = function()
{
    $scope.autoScroll = ($scope.autoScroll) ? false : true;
    return $scope.autoScroll;
} 
```

Basically, if `$scope.autoScroll` is true, I want ng-class to be `icon-autoscroll` and if its false, I want it to be `icon-autoscroll-disabled`

What I have now isn't working and is producing this error in the console

`Error: Lexer Error: Unexpected next character at columns 18-18 [?] in expression [{(isAutoScroll()) ? 'icon-autoscroll' : 'icon-autoscroll-disabled'}].`

How do I correctly do this?

**EDIT**

solution 1: (outdated)

```
<button class="btn" ng-click="autoScroll = !autoScroll">
  <i ng-class="{'icon-autoscroll': autoScroll, 'icon-autoscroll-disabled': !autoScroll}"></i>
</button> 
```

**EDIT 2**

solution 2:

I wanted to update the solution as `Solution 3`, provided by Stewie, should be the one used. It is the most standard when it comes to ternary operator (and to me easiest to read). The solution would be

```
<button class="btn" ng-click="autoScroll = !autoScroll">
  <i ng-class="autoScroll ? 'icon-autoscroll' : 'icon-autoscroll-disabled'"></i>
</button> 
```

translates to:

`if (autoScroll == true) ?` //use class `'icon-autoscroll' :` //else use `'icon-autoscroll-disabled'`

* * *

## 回答 #1

> 赞同：440
> 
> 时间：2013-03-13T22:05:47.503

How to use conditional in ng-class:

Solution 1:

```
<i ng-class="{'icon-autoscroll': autoScroll, 'icon-autoscroll-disabled': !autoScroll}"></i> 
```

Solution 2:

```
<i ng-class="{true: 'icon-autoscroll', false: 'icon-autoscroll-disabled'}[autoScroll]"></i> 
```

Solution 3 (angular v.1.1.4+ introduced support for ternary operator):

```
<i ng-class="autoScroll ? 'icon-autoscroll' : 'icon-autoscroll-disabled'"></i> 
```

[Plunker](http://plnkr.co/edit/EdiNmaQYbVSftTuvNVpG)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-26T21:20:34.160

As alternate solution, based on javascript logic operator '&&' which returns the last evaluation, you can also do this like so:

```
<i ng-class="autoScroll && 'icon-autoscroll' || !autoScroll && 'icon-autoscroll-disabled'"></i> 
```

It's only slightly shorter syntax, but for me easier to read.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-06-12T19:54:15.513

Add more than one class based on the condition:

```
<div ng-click="AbrirPopUp(s)" 
ng-class="{'class1 class2 class3':!isNew, 
           'class1 class4': isNew}">{{ isNew }}</div> 
```

Apply: class1 + class2 + class3 when **isNew=false**,

Apply: class1+ class4 when **isNew=true**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-28T09:22:20.797

```
<div data-ng-init="featureClass=false" 
     data-ng-click="featureClass=!featureClass" 
     data-ng-class="{'active': featureClass}">
    Click me to toggle my class!
</div> 
```

Analogous to jQuery's `toggleClass` method, this is a way to toggle the `active` class on/off when the element is clicked.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-11T12:58:38.503

`autoscroll` will be defined and modified in the controller:

```
<span ng-class= "autoscroll?'class_if_true':'class_if_false'"></span> 
```

Add multiple classes based on condition by:

```
<span ng-class= "autoscroll?'first second third':'classes_if_false'"></span> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-11T06:58:01.643

I made this work in this way:

```
<button class="btn" ng-click='toggleClass($event)'>button one</button>
<button class="btn" ng-click='toggleClass($event)'>button two</button> 
```

in your controller:

```
$scope.toggleClass = function (event) {
    $(event.target).toggleClass('active');
} 
```

# android - 每次单击 ToggleButton 时，如何使用 ToggleButton 更改 TextView 的输入类型？

> ID：15397253
> 
> 赞同：0
> 
> 时间：2013-03-13T21:54:43.870
> 
> 标签：android, textview, togglebutton

我有一个`ToggleButton`我想在`TextView`每次单击按钮时更改 a 的输入类型。我希望每次单击按钮时文本视图的输入类型在密码和普通文本之间切换。但是发生的事情是，单击按钮后，文本视图的输入类型正在从密码类型更改为普通文本。但仅此而已。当我第一次单击按钮时，文本视图中的输入类型没有变化。我知道我在这里没有做任何事情，但由于我缺乏 Android 知识和经验，我似乎无法解决这个难题。

任何帮助将不胜感激！谢谢你。

```
public class TextPlay extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.text);
        initialize();
    }

    private void initialize() {
        // map the views
        final EditText commandInput = (EditText) findViewById(R.id.etCommands);
        final ToggleButton toggleButton = (ToggleButton) findViewById(R.id.tbPassword);
        toggleButton.setChecked(false);

        // set listeners on the button
        toggleButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (toggleButton.isChecked()) {
                    commandInput
                            .setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);
                    commandInput.refreshDrawableState();
                } else {
                    commandInput.setInputType(InputType.TYPE_CLASS_TEXT);
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T07:57:16.477

```
public class TextPlay extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

    Button chkCmd = (Button) findViewById(R.id.bResults);
    final ToggleButton passTog = (ToggleButton) findViewById(R.id.tbPassword);
    final EditText input = (EditText) findViewById(R.id.etCommands);
    final TextView disp = (TextView) findViewById(R.id.tvResults);

    input.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (passTog.isChecked()) {
                input.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_VARIATION_PASSWORD);
            } else {
                input.setInputType(InputType.TYPE_CLASS_TEXT);
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:01:17.953

从这里尝试解决方案：http: [//developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)

特别是本节：

```
ToggleButton toggle = (ToggleButton) findViewById(R.id.togglebutton);
toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            // The toggle is enabled
        } else {
            // The toggle is disabled
        }
    }
}); 
```

我认为使用您正在尝试的当前方式，您可以将其更改为：

```
 @Override
    public void onClick(View v) {
        if (toggleButton.isChecked()) {
            commandInput
                    .setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);
            commandInput.refreshDrawableState();
        } else {
            toggleButton.setChecked(true);
            commandInput
                    .setInputType(InputType.TYPE_CLASS_TEXT);
        }

    } 
```

注意`setChecked(true);`线路。

# c# - 使用 menustrip 导航 Windows 窗体时，我需要关闭上一个活动窗口

> ID：15397261
> 
> 赞同：1
> 
> 时间：2013-03-13T21:55:17.087
> 
> 标签：c#, winforms, .net-3.5, menustrip

我正在组合一个与 SQL 数据库交互的简单 UI。我的问题是 UI 问题，每次选择 menustrip 项目时，它都会打开一个新的活动窗口。如何设置它以关闭上一个活动窗口？我尝试过使用 Form.Close();，但这只会关闭所有内容。

![](../Images/d6da3b63a6c3e8799990065d0af5f15b.png)

```
private void addCampusToolStripMenuItem_Click(object sender, EventArgs e)
{
    if_add_campus go = new if_add_campus();
    go.Show();
}

private void addDepartmentToolStripMenuItem_Click(object sender, EventArgs e)
{
    if_add_dept go = new if_add_dept();
    go.Show();
}

private void addEmployeToolStripMenuItem_Click(object sender, EventArgs e)
{
    if_add_employee go = new if_add_employee();
    go.Show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:07:17.520

只需跟踪您在变量中创建的最后一个表单：

```
 private Form lastForm;

    private void showForm(Form frm) {
        frm.FormClosed += (sender, ea) => {
            if (object.ReferenceEquals(lastForm, sender)) lastForm = null;
        };
        frm.Show();
        if (lastForm != null) lastForm.Close();
        lastForm = frm;
    } 
```

并使用 showForm() 显示您的表单：

```
private void addCampusToolStripMenuItem_Click(object sender, EventArgs e)
{
    showForm(new if_add_campus());
} 
```

未测试，应该是接近的。

# api - 如何指定亚马逊产品 API 返回的内容

> ID：15397263
> 
> 赞同：1
> 
> 时间：2013-03-13T21:55:26.503
> 
> 标签：api, node.js, amazon-web-services, amazon, amazon-product-api

我需要我的应用程序快速，所以我想在响应中准确指定我想要的内容，而不是在那里有大量多余的信息。我知道[ResponseGroups](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_ResponseGroupsList.html)，但没有一个组可以限制我返回的信息。如果您查看[我当前的实现](http://dev.spendmycents.com/products)，它会发回大量与我正在寻找的产品无关的信息。真正的问题是它只是**笨重。**

有没有办法为每个产品指定非常具体的东西？例如：

*   格式化价格
*   姓名
*   关联
*   图片
*   描述

我不关心其他任何事情。

**注意：**我使用[Node-APAC](https://github.com/dmcquay/node-apac)来处理对亚马逊产品 API 的请求。所以它为我将响应 XML 转换为 JSON。

这是我得到的（大部分）：

```
{
    ItemSearchResponse: {
        $: {...},
        OperationRequest: [...],
        Items: [
            {
                Request: [...],
                TotalResults: [...],
                TotalPages: [...],
                MoreSearchResultsUrl: [...],
                Item: [
                    {
                        ASIN: [...],
                        DetailPageURL: [...],
                        ItemLinks: [...],
                        SmallImage: [...],
                        MediumImage: [...],
                        LargeImage: [...],
                        ImageSets: [...],
                        ItemAttributes: [...],
                        OfferSummary: [...]
                    },
                    {...},
                    {...},
                    {...},
                    {...}
                ]
            }
        ]
    }
} 
```

我想回来的是：

```
[
  {
    FormattedPrice: 12.99,
    Name: "The Hitchhiker's Guide to the Galaxy"
    Link: "http://www.amazon.com/Hitchhikers-Guide-Galaxy-Douglas-Adams/dp/0345391802"
    Image: "http://g-ecx.images-amazon.com/images/G/01/ciu/eb/05/0663124128a0de9c79891010.L._AA300_.jpg"
    Description: "<Book-Description>"
  },
  {...},
  {...}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:01:56.510

我认为没有一种方法可以准确地指定您想要的内容。您必须通过 ReponseGroup。在您的情况下，我建议您为 ResponseGroup 值传递“Small,OfferSummary”。它应该返回您需要的内容，同时保持响应大小合理。

# argparse - travis ci 中的 python 3.3 构建失败。linux box/python 安装上的错误？

> ID：15397268
> 
> 赞同：0
> 
> 时间：2013-03-13T21:55:54.423
> 
> 标签：argparse, python-3.3, travis-ci

我有一个 python 3.3 工作在 travis python 3.3 worker 上失败。这是失败工作的链接： [https ://travis-ci.org/rags/pynt/jobs/5482408](https://travis-ci.org/rags/pynt/jobs/5482408)

我认为这可能是工人的问题，原因如下：

1.  使用 python 3.3 构建通过我的盒子（真的！）
2.  基于 3.2 的 travis 正在通过
3.  错误似乎在 python 3.3 内置库代码中。/usr/lib/python3.3/argparse.py:2028

这是相关的python 3.3源

*   [https://github.com/certik/python-3.3/blob/master/Lib/argparse.py](https://github.com/certik/python-3.3/blob/master/Lib/argparse.py)
*   [https://github.com/certik/python-3.3/blob/master/Lib/gettext.py](https://github.com/certik/python-3.3/blob/master/Lib/gettext.py)

我的代码有可能在做一些有趣的事情，但我似乎无法调试它。

任何指示，建议都会有所帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:08:28.490

**更新：** 这是 travis 中的一个错误。它已被接受为一个，并已提出相应的[票证。](https://github.com/travis-ci/travis-ci/issues/998)希望它会很快得到修复。

# c - 使用for循环将字符存储到字符串中？

> ID：15397269
> 
> 赞同：1
> 
> 时间：2013-03-13T21:56:10.993
> 
> 标签：c, string, char

我有这个函数，bits_show，它打印到标准输出一个 2-3 位长的代码。

```
void bits_show(bits *a)
{
  int i;
  for (i = 0; i < a->next; i++)
    putchar(a->bits[i]);
} 
```

其中位：

```
struct bits {
  int capacity;
  int next;
  char *bits;
}; 
```

我正在尝试编写一个函数 char* bits_char(bits *a) 来捕获这些字符并将它们收集到单个 char*文件中。

这是我到目前为止所拥有的，但它不断吐出错误：

```
char* bits_char(bits *a)
{
  char* str = (char*) malloc( sizeof(a->next * char));
  int i;
  for (i=0; i<a->next; i++){
    str[i] = (a->bits[i]);
  }
  return str;
} 
```

“bits.c：在函数‘bits_char’中：

bits.c:33：错误：可变大小的对象可能未初始化

bits.c:37：警告：函数返回局部变量的地址”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:16:10.377

这是错误的：

```
sizeof(a->next * char) 
```

我想你打算写：

```
a->next * sizeof(char) 
```

但是，由于`sizeof(char)`根据定义等于 1，您只需将其省略即可。

但即使这样也是错误的，因为您需要为代码当前未编写的空终止符留出空间。分配需要：

```
malloc(a->next+1) 
```

并像这样添加空终止符：

```
str[a->next] = 0; 
```

总而言之，成品是这样的：

```
char* bits_char(bits *a)
{
  char* str = malloc(a->next+1);
  int i;
  for (i=0; i<a->next; i++){
    str[i] = (a->bits[i]);
  }
  str[a->next] = 0;
  return str;
} 
```

`malloc`我删除了C 中不需要的返回值的强制转换。

您还应该确保检查`malloc`分配失败的返回值。如果失败，它将返回空指针。我没有展示如何做到这一点，因为我不知道您的错误处理策略。

# django - FormWizard：拥有自己的 2 个模板时如何从第 1 步继续到第 2 步

> ID：15397273
> 
> 赞同：1
> 
> 时间：2013-03-13T21:56:47.107
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我在表单向导中有两个步骤。第一步是客户填写他们的具体信息，第二步是建立具体信息。

模型.py

```
class customer(models.Model): 
    LAST_NAME   = models.CharField(max_length = 50)
    FIRST_NAME  = models.CharField(max_length = 50)               
    ADDRESS     = models.CharField(max_length = 60, blank =True)

    def __unicode__(self):
        return '{0}' % (self)

class building(models.Model):
    CUSTOMER          = models.ForeignKey(customer, null = True, blank = True)
    BUILDING_USE         = models.CharField(max_length = 2, blank = True, choices = c.Anvendelse, default = '02')
    BUILDING_FLOORSPACE  = models.IntegerField(default=0)

    def __unicode__(self):
        return '{0}' % (self) 
```

表格.py

```
class customerForm(ModelForm):
    FIRST_NAME      = forms.CharField(max_length=50)
    LAST_NAME       = forms.CharField(max_length=50)  
    ADDRESS         = forms.CharField(max_length=60)

class buildingForm(ModelForm):
    CUSTOMER            = forms.CharField(widget=forms.TextInput)
    BUILDING_FLOORSPACE = forms.CharField(widget=forms.TextInput)
    BUILDING_USE       = forms.CharField(widget=forms.TextInput)

class customerWizard(FormWizard):
    def done(self, request, form_list):
        return render_to_response('done.html', {
            'form_data': [form.cleaned_data for form in form_list],
    }) 
```

网址.py

```
url(r'^contact/$', customerWizard.as_view([customerForm, buildingForm])), 
```

我实际上有两个模板 customer.html 和 building.html 我该怎么做才能使用我自己的模板。#1 将显示 customer.html，#2 将显示 building.html。当我执行此 url 时，它给了我 customer.html，但是当我提交进入下一步时，它没有显示 building.html，而是显示没有样式的 customer.html。

wizard.html(customer.html 复制到wizard.html) 一些代码...

```
<div id="tabs-1">
<p>Step {{ step }} of {{ step_count }}</p>
<form action="." method="post"> 
{% csrf_token %}

 {{ form.id }} 

some codes....

<input type="hidden" name="{{ step_field }}" value="{{ step0 }}" />
{{ previous_fields|safe }}
<input type="submit">
</form> 
```

非常感谢帮助......非常需要帮助......有点想弄清楚这一切已经两天了，每次我做改变时它都会给我一个奇怪的错误......

非常感谢您。对不起我的傻q。

# android - 带有 Spring 的 Android REST 处理过长的请求

> ID：15397277
> 
> 赞同：1
> 
> 时间：2013-03-13T21:57:20.047
> 
> 标签：android, spring, rest

我正在用 Spring 构建一个 REST 应用程序。我正在以 POJO 方式进行操作。现在我想处理一个耗时太长的 GET 请求（可以说是因为用户的连接非常糟糕）。我可以做些什么来处理这个（在春天），也许通过在 5000 毫秒后取消请求？

我的方法：
所以我想需要某种超时。在我的 google-tour 中，我发现有一个 HttpComponentsClientHttpRequestFactory 和一个所谓的 setConnectTimeout() 函数。我对此进行了测试，但我无法处理抛出的异常，因为它“深入内部”并且它作为 AsyncTask 的致命异常传递出去。所以我失败了。

最佳做法是什么？任何的想法？

**编辑**：设置了弹簧，所以请只使用弹簧解决方案。

**编辑**：根据我的研究，这是不可能的。甚至@Spring 论坛也没有答案：http: [//forum.springsource.org/showthread.php?135656-How-can-I-handle-GET-requests-that-are-taking-to-long](http://forum.springsource.org/showthread.php?135656-How-can-I-handle-GET-requests-that-are-taking-to-long)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:03:23.527

首先，不要使用 AsyncTask 来执行网络请求，因为如果您更改设备的方向，Activity 将被销毁并在重新创建后，但 AsyncTask 保留对已销毁 Activity 的引用并导致一些内存泄漏。

请改用服务。我建议你使用[RoboSpice](https://github.com/octo-online/robospice)。这是一个使用 POJO 和 Spring 轻松发出 REST 请求的库。

如果您对自动本地和远程数据持久性管理感兴趣，您可以使用[RestDroid](https://github.com/PCreations/RESTDroid)来处理它（也可以使用 POJO）。

这两个库都使用 RequestListeners 来管理您正在谈论的案例。当您的请求失败时，会通知 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:00:18.120

为什么不采取更简单的方法，试试这段代码，你会得到一个更明确的异常：

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
HttpConnectionParams.setSoTimeout(httpParameters, 10000);

HttpClient client = new DefaultHttpClient(httpParameters);
HttpGet request = new HttpGet(url);

HttpResponse response = client.execute(request); 
```

# javascript - 从数据属性获取数据

> ID：15397281
> 
> 赞同：1
> 
> 时间：2013-03-13T21:57:31.623
> 
> 标签：javascript, jquery

我在这样的链接上为用户设置了数据属性

```
 <input type="button" class="btn" data-user={"user": "<%= @user.name %>"}  value="Start" id="game"> 
```

在侦听单击事件的 javascript 函数中，我做了一个`console.log(e.target)`并将整个内容打印到控制台。

```
<input type="button" class="btn" data-user={"user": "<%= @user.name %>"}  value="Start" id="game"> 
```

如果我`console.log(e)`没有e.target，它会记录jquery事件，但数据属性是未定义的

```
data: undefined 
```

我正在尝试从数据属性中提取用户名，但不知道如何从中获取

```
<input type="button" class="btn" data-user={"user": "<%= @user.name %>"}  value="Start" id="game"> 
```

而且我不知道为什么当我只记录事件时数据未定义。

如果您能在这方面帮助我，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T21:59:44.307

您的 HTML 是……独一无二的？而不是这个：

```
data-user={"user": "<%= @user.name %>"} 
```

试试这个：

```
data-user="<%= @user.name %>" 
```

然后您可以使用标准的 jQuery [.data()](http://api.jquery.com/data/)技术获取数据（因为您提到了 jQuery）：

```
var user = $('#game').data('user'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:00:13.873

您可以从 DOM 对象访问数据，如下所示：

```
var data = $(e.target).attr("data-user"); 
```

# python - python numpy/scipy在多维数组中查找相对变量的计数或频率

> ID：15397284
> 
> 赞同：2
> 
> 时间：2013-03-13T21:57:36.027
> 
> 标签：python, numpy, scipy

我有一个三维数组，比如 dat.shape = (100,128,256)。我正在尝试计算第一个轴上值大于 10.0 的周期数。例如，对于 dat[:,0,0]，大于 10.0 的值出现了多少次？然后，dat[:,0,1] 到 dat[:,n,m]。我的最终矩阵将具有 (128,156) 的形状。

有没有办法在 numpy 或 scipy 中进行此计算而无需遍历第一和第二维？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:01:07.540

```
import numpy as np
a = np.random.randint(0, 100, (100,128,256))
np.sum(a > 10, axis=0) 
```

# r - 可能与“应用”功能相关

> ID：15397286
> 
> 赞同：1
> 
> 时间：2013-03-13T21:57:49.010
> 
> 标签：r

我正在使用以下代码创建表示 [0,1]^d 的广告维度超立方体，该代码是由该论坛上的另一位用户提出的。

```
## generation of the d-dimensional hypercube
cube <- do.call(expand.grid,replicate(d, seq_len(mesh)/mesh, simplify=FALSE)) 
```

假设我有一个功能，比如说

```
 foo <- function(u) prod(u) 
```

我想应用于上面创建的hybercube的每个点。有没有一种很好的方法可以避免在 d 行中使用循环来这样做？我尝试使用各种应用功能，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:02:11.207

First of all, a function for giving you the coordinates of the vertices:

```
hypercube <- function(d, coord = c(0, 1))
    do.call(expand.grid, replicate(d, coord, simplify = FALSE)) 
```

For example, using `d = 3`:

```
cube <- hypercube(d = 3)
cube
#   Var1 Var2 Var3
# 1    0    0    0
# 2    1    0    0
# 3    0    1    0
# 4    1    1    0
# 5    0    0    1
# 6    1    0    1
# 7    0    1    1
# 8    1    1    1 
```

Then, to run your `foo` function on every vertex of the hypercube, use `apply`:

```
apply(cube, 1, foo) 
```

# c# - 如何使用 linq 将委托聚合成一个新委托

> ID：15397293
> 
> 赞同：3
> 
> 时间：2013-03-13T21:58:17.447
> 
> 标签：c#, linq, functional-programming, aggregate

假设我有一个`IEnumerable<Func<object, bool>>`. `Func<object, bool>`如果在某个对象上调用该列表的每个函数都返回 true，我想创建一个 new应该返回 true。换句话说，我想聚合 (reduce\foldl) 一个函数列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T22:00:49.437

像这样做：

```
Func<object, bool> aggregate = o => functions.All(f => f(o)); 
```

当然这有点作弊，因为函数恰好返回`bool`，所以我们可以`Enumerable.All`直接使用来产生聚合结果。这还有一个副作用，不是列表中的所有函数都会被调用——只要一个返回`false`，我们就打包离开。

在一般情况下，这种处理是用 完成的`Enumerable.Aggregate`，可能是这样的：

```
Func<object, bool> aggregate = o => 
    functions.Select(f => f(o))
             .Aggregate(true, (result, @partial) => result && @partial); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:07:50.893

正如乔恩指出的那样，最好的方法是使用`Enumerable.All`. 但是，您可以使用折叠序列，`Aggregate`因此您也可以这样做：

```
Func<object, bool> folded = funcs.Aggregate((acc, f) => new Func<object, bool>(o => acc(o) && f(o))); 
```

此重载要求序列非空，但您可以为累加器提供初始值：

```
Func<object, bool> folded = funcs.Aggregate(new Func<object, bool>(_ => true), (acc, f) => (o => acc(o) && f(o))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:01:34.843

我会这样做：

```
bool evaluateAllFuncs(object someObject)
{
    IEnumerable<Func<object, bool>> funcs = GetAllFuncs();
    return funcs.All(f => f(someObject)));
} 
```

# iphone - 尝试开发一个 IOS phonegap 插件，用于蓝牙低功耗在两部 iPhone 之间发送数据

> ID：15397297
> 
> 赞同：2
> 
> 时间：2013-03-13T21:58:30.817
> 
> 标签：iphone, phonegap-plugins, bluetooth-lowenergy

我正在尝试开发一个用于蓝牙低功耗的 PhoneGap 插件，以便在两部 iPhone 之间发送数据，但我对 IOS 不是很好。我正在尝试使用去年 11 月发布的 Apple 开发人员 iOS 示例[BTLE Central Peripheral Transfer](https://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html)，但我想在 HTML5/Javascript 中创建自己的用户界面来与我的应用程序交互，并使用这个 Apple 示例来处理数据传输和管理蓝牙框架协调。有什么建议可以去掉 Apple 示例代码的 UI 部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T11:10:31.683

github 中有一个活动[项目](https://github.com/don/BluetoothSerial)，实现了蓝牙电话间隙插件（适用于 ios 的 ble 和适用于 android 的蓝牙经典）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:01:15.967

我建议您查看名为 bluetoothme 的库[https://github.com/sergiomtzlosa/CoreBluetooth-Demo/tree/master/CBDemo](https://github.com/sergiomtzlosa/CoreBluetooth-Demo/tree/master/CBDemo) 您只需要该目录中的 bluetoothme.h 和 bluetoothme.m 文件。

如果您可以在插件中的 viewcontroller.m 中复制连接功能等，那么您将被排序:)

# sql - 汇总函数 - 替换 NULL

> ID：15397298
> 
> 赞同：2
> 
> 时间：2013-03-13T21:58:36.887
> 
> 标签：sql, sql-server, sql-server-2008

我的 SQL 的最后部分似乎有问题。在我的 SQL NULL 中使用汇总功能实现 group by 时出现。如何修改 NULL 以便在此聚合 SQL 中将其替换为 TOTAL？

```
Current table returned
Name Activate Deactivate
Max      5       2
TAX     12       5
NULL    17       8

select 
    case 
    when (upper(m.email) like '%max.com') then 'MAX'
    when (upper(m.email) like '%tax.com') then 'TAX'
    else 'OTHER'
end Name, 
SUM(case when substring(convert(varchar(8),n.created_on,112),1,6) = '201209' then 1 else 0         end) 'Activated',
   SUM(case when substring(convert(varchar(8),m.LastLockoutDate,112),1,6)='201209' then 1 else 0              end) 'Deactivated'
           from membership.user_details d
          inner join membership.aspnet_membership m 
on m.userid = d.userid
        inner join membership.user_notes n 
         on n.userid = d.userid
        and n.CREATED_ON = (select min(created_on) 
                    from membership.user_notes 
                    where userid = n.userid
                        and note = 'received.')  
         where approved = 1
         group by case when (upper(m.email) like '%max.com') then 'MAX'
      when (upper(m.email) like '%tax.com') then 'TAX'
      else 'OTHER' end     
   with RollUp 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T22:28:15.860

将`ROLLUP`a`null`放在总计行中，因此如果您想替换它，我建议您将现有查询放在子查询中，然后在 a`CASE`上使用to`NAME`替换。`null``Total`

您的代码将与此类似：

```
select 
  case when name is null then 'Total' else name end Name,
  sum(Activated) Activated,
  sum(Deactivated) Deactivated
from
(
  select 
    case 
      when (upper(m.email) like '%max.com') then 'MAX'
      when (upper(m.email) like '%tax.com') then 'TAX'
      else 'OTHER'
    end Name, 
  SUM(case when substring(convert(varchar(8),n.created_on,112),1,6) = '201209' then 1 else 0         end) 'Activated',
  SUM(case when substring(convert(varchar(8),m.LastLockoutDate,112),1,6)='201209' then 1 else 0              end) 'Deactivated'
  from membership.user_details d
  inner join membership.aspnet_membership m 
    on m.userid = d.userid
  inner join membership.user_notes n 
    on n.userid = d.userid
    and n.CREATED_ON = (select min(created_on) 
                        from membership.user_notes 
                        where userid = n.userid
                          and note = 'received.')  
  where approved = 1
  group by case when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER' end     
) src
group by name with rollup 
```

如果您不将查询包装在子查询中，则可以使用以下内容：

```
select
   case when 
     (case 
        when (upper(email) like '%max.com') then 'MAX'
        when (upper(email) like '%tax.com') then 'TAX'
        else 'OTHER'
      end) is null then 'Total'
      else case 
        when (upper(email) like '%max.com') then 'MAX'
        when (upper(email) like '%tax.com') then 'TAX'
        else 'OTHER'
      end end Name,
  SUM(case when substring(convert(varchar(8),n.created_on,112),1,6) = '201209' then 1 else 0 end) 'Activated',
  SUM(case when substring(convert(varchar(8),m.LastLockoutDate,112),1,6)='201209' then 1 else 0 end) 'Deactivated'
from membership.user_details d
inner join membership.aspnet_membership m 
  on m.userid = d.userid
inner join membership.user_notes n 
  on n.userid = d.userid
  and n.CREATED_ON = (select min(created_on) 
                     from membership.user_notes 
                     where userid = n.userid
                       and note = 'received.')  
where approved = 1
group by case when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER' end with rollup 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T22:16:31.860

使用这个直接的名称参考：

`case when grouping(Name) then 'Total' else Name end as Name`

如果只使用单一级别的分组，则对 null 的测试就足够了；但是 grouping(...) 测试允许为每个不同的分组级别生成不同的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-26T04:55:41.737

而不是这部分

> case when (upper(m.email) like '%max.com') then 'MAX' when (upper(m.email) like '%tax.com') then 'TAX' else 'OTHER' end Name

只需使用

> 上（替换（COALESCE（m.email，'其他'），'.com'，''））作为名称

无需编写子查询并将其进一步复杂化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-07T22:00:33.220

你可以用一个函数包装你的`case`语句：`isnull`

```
select 
    isnull
        (
        case 
            when (upper(m.email) like '%max.com') then 'MAX'
            when (upper(m.email) like '%tax.com') then 'TAX'
            else 'OTHER'
        end,
        'Total'
        ) Name, 
    SUM(case
            when substring(convert(varchar(8),n.created_on,112),1,6) = '201209'
            then 1
            else 0
        end) 'Activated',
    SUM(case
            when substring(convert(varchar(8),m.LastLockoutDate,112),1,6)='201209'
            then 1
            else 0
        end) 'Deactivated'
from membership.user_details d
    inner join membership.aspnet_membership m 
        on m.userid = d.userid
    inner join membership.user_notes n 
        on n.userid = d.userid
        and n.CREATED_ON =
            (
            select min(created_on) 
            from membership.user_notes 
            where userid = n.userid
                and note = 'received.'
            )  
where approved = 1
group by
    case
        when (upper(m.email) like '%max.com') then 'MAX'
        when (upper(m.email) like '%tax.com') then 'TAX'
        else 'OTHER'
    end     
with rollup 
```

# user-interface - 使用uigetfile（MATLAB）后如何从mat文件中绘制数据

> ID：15397300
> 
> 赞同：1
> 
> 时间：2013-03-13T21:58:46.560
> 
> 标签：user-interface, mat

我正在 Matlab 上构建一个 gui，我想从一个包含 5 行和 5 列的 .mat 文件中绘制数据。我想在 5 个不同的轴上绘制每五行。例如，文件的第一行是一个 rf 脉冲序列，我想在我制作的 rf_axis 中绘制它。第二行是 gx 脉冲序列，我想在另一个轴上绘制它。我使用 uigetfile 浏览 mat 文件，但无法绘制文件中的数据。这是代码

```
filename = uigetfile('*.mat')
pathname='/home/anastasia/Documents/MATLAB/R2012a/bin/projects/ptuxiaki';
loaddata = fullfile(pathname,filename)
dat=load(loaddata)
time_step=str2double(get(handles.time_step_EDIT,'String'));
t=0:time_step:6.4-time_step;
X1=dat(1,:);
plot(handles.RFs_axis,t,X1)
zoom on
X2=dat(2,:);
plot(handles.RFa_axis,t,X2)
zoom on
X3=dat(3,:);
plot(handles.Gx_axis,t,X3);
zoom on
X4=dat(4,:);
plot(handles.Gy_axis,t,X4);
zoom on
X5=dat(5,:);
plot(handles.Gz_axis,t,X5);
zoom on 
```

# wxpython - 在 wxPython 中选择笔记本中的选项卡时没有事件

> ID：15397302
> 
> 赞同：1
> 
> 时间：2013-03-13T21:58:59.287
> 
> 标签：wxpython, wxnotebook

当用户选择或更改笔记本上的选项卡时，我正在尝试触发一个事件。这是我的代码。在PageOne 类中，我尝试将wx.aui.EVT_AUINOTEBOOK_PAGE_CHANGED 与ChangingTest(self, evt) 函数绑定。似乎无论我在绑定时尝试使用什么事件，我都无法触发事件。这可能吗？我错过了什么？

我点击按钮并调用self.ChangingTest没有问题，但我想点击标签调用self.ChangingTest。

```
import wx
import wx.lib.inspection

class PageOne(wx.Panel):
   def __init__(self, parent):
       wx.Panel.__init__(self, parent)
       box = wx.BoxSizer(wx.VERTICAL)
       # Want the users' click on the panel tab to fire an event and 
       # call ChangingTest
       self.Bind(wx.aui.EVT_AUINOTEBOOK_PAGE_CHANGED, self.ChangingTest)

       cmdClick = wx.Button(self, wx.ID_CLOSE, "Click Me")
       cmdClick.Bind(wx.EVT_BUTTON, self.ChangingTest)
       box.Add(cmdClick, 0, wx.ALL, 10)

   def ChangingTest(self, evt):
       print "ChangingTest2"

class PageTwo(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageTwo object", (40,40))

class PageThree(wx.Panel):
   def __init__(self, parent):
       wx.Panel.__init__(self, parent)
       t = wx.StaticText(self, -1, "This is a PageThree object", (60,60))

class MainFrame(wx.Frame):
   def __init__(self):
       wx.Frame.__init__(self, None, title="Simple Notebook Example")

       # Here we create a panel and a notebook on the panel
       p = wx.Panel(self)
       nb = wx.Notebook(p)

       # create the page windows as children of the notebook
       page1 = PageOne(nb)
       page2 = PageTwo(nb)
       page3 = PageThree(nb)

       # add the pages to the notebook with the label to show on the tab
       nb.AddPage(page1, "Page 1")
       nb.AddPage(page2, "Page 2")
       nb.AddPage(page3, "Page 3")

       # finally, put the notebook in a sizer for the panel to manage
       # the layout
       sizer = wx.BoxSizer()
       sizer.Add(nb, 1, wx.EXPAND)
       p.SetSizer(sizer)

if __name__ == "__main__":
    app = wx.App()
    MainFrame().Show()
    app.MainLoop() 
```

我在这里有工作版本：

```
import wx

class PageOne(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageOne object", (20,20))

class PageTwo(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageTwo object", (40,40))

class PageThree(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageThree object", (60,60))

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Simple Notebook Example")

        # Here we create a panel and a notebook on the panel
        p = wx.Panel(self)
        nb = wx.Notebook(p)

        # create the page windows as children of the notebook
        page1 = PageOne(nb)
        page2 = PageTwo(nb)
        page3 = PageThree(nb)

        # add the pages to the notebook with the label to show on the tab
        nb.AddPage(page1, "Page 1")
        nb.AddPage(page2, "Page 2")
        nb.AddPage(page3, "Page 3")

        # finally, put the notebook in a sizer for the panel to manage
        # the layout
        sizer = wx.BoxSizer()
        sizer.Add(nb, 1, wx.EXPAND)
        p.SetSizer(sizer)

    # bind event to notebook
        nb.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, self.ChangingTest)

    def ChangingTest(self, evt):
       print "It worked!"

if __name__ == "__main__":
    app = wx.App()
    MainFrame().Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:12:18.167

使用 wx.EVT_NOTEBOOK_PAGE_CHANGED 而不是 wx.aui.EVT_AUINOTEBOOK_PAGE_CHANGED 因为您使用的是 wx.Notebook，而不是 wx.aui.AuiNotebook。此外，您不应该绑定 PageOne 类，而是绑定 notebook 对象。因此，您可以编写`parent.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, self.ChangingTest)`或将其绑定到 PageOne 类 ( `nb.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, ...)`) 之外。

# wix - WiX 属性直通不起作用（有时）

> ID：15397303
> 
> 赞同：1
> 
> 时间：2013-03-13T21:59:02.047
> 
> 标签：wix, windows-installer, wix3.5

使用 WiX 3.6 我正在尝试创建一个 MSI 以静默安装内部产品。

在某些机器上，我的安装程序工作正常，但在其他机器上，安装程序失败并显示一条错误消息，指示属性值尚未从 UI 阶段传递到过程的安装阶段：

![在此处输入图像描述](../Images/ee0a13001e562ea596c0fdfb39ca0eed.png)

这个错误来自我的 WiX 源代码中的一个保护子句：

```
 <Condition Message="The property SERVER must be defined on the commandline. Installation will abort.">
      <![CDATA[Installed or SERVER]]>
    </Condition> 
```

**为什么即使我在命令行上提供了属性 SERVER，我的 Guard 子句也会触发？**

安装命令行：

```
msiexec /i 'C:\work\Excel.2010(x86).msi' SERVER=fsis-app-server ENVIRONMENT=Production SKIN=Black 
```

根据我通过咨询谷歌教授所能找到的一切，我需要做的就是公开我的财产（通过使用所有大写的名称）并标记它`Secure="yes"`：

```
<Property Id="SERVER"
          Secure="yes"/> 
```

我已经这样做了，但它仍然无法正常工作 - 有什么我错过的想法吗？

其他详情 ...

...我的安装程序配置为每次都作为 MajorUpgrade 运行。

...我专门部署到 Windows 7。在我的机器上（确实有这个问题），我有 Windows Installer。V 5.0.7601.17514

... 大多数机器升级正常，但少数（<10 出 200）因此错误而失败。我的机器是一台（有助于故障排除）。以前的版本未列在本机的*程序和功能下。*

**更新#1**

非常有趣，阅读日志。随着安装的进行，我的属性（例如 SERVER）**不会丢失它们的值。**

如果我正确阅读了日志，那么*上一个*MSI 显示的错误似乎是我的错误，而不是我当前正在运行的错误：

> MSI (s) (D8:D0) [13:20:19:213]：产品：FSIS Plugin for Excel 2010（32 位）v4.7.1047.0 -- 必须在命令行上定义属性 SERVER。安装将中止。

我使用的安装程序是 v4.8.9999.0，所以旧版本号是我对正在发生的事情的线索……尽管这与我原始屏幕截图中的 v4.5.0.0 不匹配。

看来我还有两份工作……

...凝固汽油弹旧安装程序清理这台机器
...更改安装程序以防止再次发生。

**更新#2**

我已经确认我的失败发生在卸载时。

```
 <Condition Message="The property SERVER must be defined on the commandline. Installation will abort.">
      <![CDATA[Installed or SERVER]]>
    </Condition> 
```

**为什么这个保护子句会触发和中止卸载？**

我认为“安装或”的目的是让它在移除产品时正常工作。

# macos - 启动 plist 中无法识别 LaunchEvents 键（检测 USB 设备）

> ID：15397304
> 
> 赞同：4
> 
> 时间：2013-03-13T21:59:04.363
> 
> 标签：macos, plist, launchd

我想在将 USB 设备插入 Mac OS X 系统时启动特定应用程序。我已经按照[这个 SO post](https://stackoverflow.com/a/12259762/558639)中给出的食谱进行操作。但似乎`LaunchEvents`无法识别密钥：当我重新启动系统时，我在控制台上看到以下消息：

```
com.apple.launchd.peruser.501[173]  (com.example.program) Unknown key for dictionary: LaunchEvents 
```

我正在运行 OS X 10.6.8，并且此版本的 OS X 完全有可能不支持 xpc_events。如果是这种情况，我的替代方案是什么？

（作为第二个较小的问题：有没有办法在不重新启动系统的情况下强制重新读取我的 .plist 文件？它会加快调试时间！）

全文`~/Library/LaunchAgents/com.example.plist`如下。（请注意，为了调试，我只是尝试使用 /usr/bin/open 启动 Terminal.app。一旦我完成了这么多工作，我将换入我的真实程序。）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN http://www.apple.com/DTDs/PropertyList-1.0.dtd >
<plist version="1.0">
  <dict>
    <key>Label</key>
    <string>com.example.program</string>
    <key>ProgramArguments</key>
    <array>
      <string>/usr/bin/open</string>
      <string>/Applications/Utilities/Terminal.app</string>
    </array>
    <key>LaunchEvents</key>
    <dict>
      <key>com.apple.iokit.matching</key>
      <dict>
        <key>com.apple.device-attach</key>
        <dict>
          <key>idProduct</key>
          <integer>8963</integer>
          <key>idVendor</key>
          <integer>1659</integer>
          <key>IOProviderClass</key>
          <string>IOUSBDevice</string>
          <key>IOMatchStream</key>
          <true/>
        </dict>
      </dict>
    </dict>
  </dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:53:12.003

要重新加载，首先卸载然后加载：

```
launchctl unload ~/Library/LaunchAgents/com.example.plist
launchctl load ~/Library/LaunchAgents/com.example.plist 
```

# c++ - Return 语句返回空指针值而不是所需值

> ID：15397310
> 
> 赞同：-1
> 
> 时间：2013-03-13T21:59:18.337
> 
> 标签：c++, function, return, destructor, c-strings

我通过调试运行它，在字符串子字符串函数中，一切正常，直到返回语句。

'returnString'，在下面的代码中，在返回行时具有正确的值。但是，只要我转到下一行（紧跟在右括号之后），它就会变为：

`{Text=0x003ed0e0 "îþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþ... }String`

我追溯到析构函数，是删除字符串时的值。

现在，我原以为只有在通过后才会删除该值，但似乎它首先被删除了。你们知道如何解决这个问题吗？就像我上面说的，这个函数完美地工作（至少，它看起来像这样），只是它返回值的方式有问题。

调用我的字符串函数的行：（`String LocalString((Address.Substring(0, atIndex)));`地址在相应头文件中的“私有”下声明为字符串）

子字符串在索引运算符之后稍稍下降了一半。如果我似乎缺少函数或文件，请索取。感谢阅读和（我希望）帮助。

**String.h**文件：

```
#pragma once

#include <iostream>
#include <sstream>
using namespace std;

// C++ String class that encapsulates an ASCII C-string
class String
{
public:
    // Default constructor
    String()
    {
        Text = NULL;
    }

    // MUST HAVE: Copy-constructor that performs deep copy
    String(const String& source)
    {
        Text = NULL;
        // Call the assignment operator to perform deep copy
        *this = source;     
    }

    // Init-constructor to initialize this String with a C-string
    String(const char* text)
    {
        Text = NULL;
        // Call the assignment operator to perform deep copy

        *this = text;

    }   

    // Destructor
    ~String()
    {
        delete[] Text;
    }

    // Returns the count of characters in a C-string text; NULL-terminator is not counted
    static int GetLength(const char* text)
    {
        int x = 0;
        while(text[x] != '\0')
            x++;

        return x;
    }

    // Assignment operator to perform deep copy
    String& operator = (const char* text)
    {
        // Ddispose of old Text
        delete[] Text;

        // +1 accounts for NULL-terminator
        int trueLength = GetLength(text) + 1;

        // Dynamically allocate characters on heap
        Text = new char[trueLength];

        // Copy all characters from source to Text; +1 accounts for NULL-terminator
        for ( int i = 0; i < trueLength; i++ )
            Text[i] = text[i];

        return *this;
    }

    // if length is not specified, then the substring spans from startPosition until the end of this String
    // throws an exception when startPosition is out of bounds
    String Substring(int startPosition, int length=0) const
    {
        char * str = this->GetText();
        int strLength = length;
        int x = 0;

        char* substring = new char[strLength];

        while(x < strLength && str[x+startPosition]!='\0')
        {
            substring[x] = str[x + startPosition];
            x++;
        }
        substring[x]='\0';

        String returnString = substring;

        return returnString;    
    }

    // Returns the count of characters in the String; NULL-terminator is not counted
    int GetLength() const
    {
        return GetLength(Text);
    }
private:
    // The encapsulated C-string
    char* Text;
}; 
```

**在 main.cpp 的某个地方...**

```
String LocalString((Address.Substring(0, atIndex)));
String DomainString((Address.Substring(atIndex + 1)));
// or, in simpler syntax:
/*
 * String hell0 = String andGoodbye;
 * String smile = String andWave;
 */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:24:44.130

尽管有注释`// Assignment operator to perform deep copy`，但该类没有用户定义的赋值运算符。

默认的、计算机生成的赋值运算符执行浅拷贝。一旦一个副本被销毁，包含的文本将丢失。

# javascript - 回调从未调用过 Jquery.post();

> ID：15397311
> 
> 赞同：2
> 
> 时间：2013-03-13T21:59:23.703
> 
> 标签：javascript, jquery, jquery-callback

我在使用 JQUERY Post 功能时遇到了一些麻烦。

我有 2 个调用 JQUERY Post 函数的函数。它们都工作正常，但从未调用过回调函数（handleLike）。

当我手动调用handleLike 时，它​​工作得很好。（即使handleLike里面只有一个alert，也不会调用回调函数）

你能帮我解决这个问题吗？

```
<script type="text/javascript">
    $(document).ready(function() {

      function handleLike(v_cb){

        alert("Call back chamou!");
        $('#erro').html(v_cb.mensagem);

        if (v_cb.class == 'map'){
            var elemento = $('#maplike');
        }else{
            var elemento = $('#commentlike'+v_cb.id);
        }

        if (!(elemento.hasClass('disabled'))){

            elemento.addClass("disabled"); 
            var likes = elemento.find('font').text();
            likes++;
            elemento.find('font').html(likes);
        }
      }

      $('#maplike').click(function() {

          //var map_id = $('#like').find('font').attr('value');

          var id = $(this).attr("name");

          if (!($(this).hasClass('disabled'))){

            var JSONObject= {
              "mensagem":"Testando Json", 
              "id":86,
              "class":"map"
            };

            handleLike(JSONObject);

            alert("Teste");

            $.post(
              '/cmap/maps/like',
              { id: id },
              handleLike,
              'json'
            );
          }
      });

      $('[id*="commentlike"]').click(function() {

          //var map_id = $('#like').find('font').attr('value');

          var id = $(this).attr("name");

          if (!($(this).hasClass('disabled'))){

            $.post(
              '/cmap/comments/like',
              { id: id },
              handleLike,
              'json'
            );

          }
      });

    });

  </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:13:07.520

*诊断，而不是解决方案*

合理化并添加错误处理程序，您应该得到如下内容：

```
$(document).ready(function() {
    function handleLike(v_cb){
        alert("Call back chamou!");
        $('#erro').html(v_cb.mensagem);
        var elemento = (v_cb.class && v_cb.class == 'map') ? $('#maplike') : $('#commentlike'+v_cb.id);
        if (!elemento.hasClass('disabled')){
            var f = elemento.addClass("disabled").find('font');
            f.html(++Number(f.text()));
        }
    }
    function ajaxError(jqXHR, textStatus, errorThrown) {
        alert('$.post error: ' + textStatus + ' : ' + errorThrown);
    };
    $('#maplike').on('click', function() {
        var $this = $(this);
        if (!$this.hasClass('disabled')) {
            $.post('/cmap/maps/like', { id: $this.attr("name") }, handleLike, 'json').fail(ajaxError);
        }
    });
    $('[id*="commentlike"]').on('click', function() {
        var $this = $(this);
        if (!$this.hasClass('disabled')) {
            $.post('/cmap/comments/like', { id: $this.attr("name") }, handleLike, 'json').fail(ajaxError);
        }
    });
}); 
```

*未经测试*

除非出现错误，否则错误处理程序很有可能会通知您出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:14:47.460

我遵循 Kevin B 提示并使用 $ajax 方法。

这是一个解析错误。对不起。

v_cb 的返回不是 json，而是 html。我纠正了我的回报，一切都很好。

# php - 如何在 PHP 中对选择表单的搜索结果进行分页

> ID：15397312
> 
> 赞同：0
> 
> 时间：2013-03-13T21:59:27.230
> 
> 标签：php, codeigniter, pagination

我得到了一个带有 3 个不同下拉列表的表单，其想法是对搜索结果进行分页，这在第一页上运行良好，但是当我获得两个或更多页面时，它会显示整个数据库，而不仅仅是我的搜索。

[编辑]：好的，我用 CI 的分页器类更新了我的代码。我仍然遇到类似问题的麻烦。现在它分页正确，但是当我单击链接时，它告诉我： Unknown column ' IS NULL LIMIT 9, 9' in 'where Clause'

[edit2]：以防万一有人发现这个问题，我可以在这里使用这种方法解决我的问题[http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-search-results-without-查询字符串 2/](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-search-results-without-query-strings-2/)

这是我的代码。

**模型：（**我有两个函数，一个用于返回整个搜索结果，另一个用于返回带有限制和偏移的结果）

```
function buscarHotel($dpto, $ciudad, $id_precio, $limit = 10, $offset = 0)
{

    $w=array();
        if (!empty($dpto)) 
        {
             $w[]="cod_ciudad IN (SELECT cod_ciudad FROM ciudad WHERE departamento_id = $dpto)"; 
        }
        if (!empty($ciudad)) 
        {
             $w[]="cod_ciudad IN (SELECT cod_ciudad FROM ciudad WHERE cod_ciudad = $ciudad)"; 
        }
        if (!empty($id_precio)) 
        {
             $w[]="des_precio_referencial IN (SELECT rango FROM preciohotel WHERE id = $id_precio)"; 
        }

    if (count($w)) $where="WHERE ".implode(' AND ',$w); else $where='';
    $query = $this->db->query("select id, nom_comercial, cod_ciudad, des_foto 
                               FROM hotel 
                               $where");
                               #ORDER BY id desc
                               #LIMIT $limit
                               #OFFSET $offset ");

    return $query->result();

}

function buscarHotelLimit($dpto, $ciudad, $id_precio, $limit)
{

    $w=array();
        if (!empty($dpto)) 
        {
             $w[]="cod_ciudad IN (SELECT cod_ciudad FROM ciudad WHERE departamento_id = $dpto)"; 
        }
        if (!empty($ciudad)) 
        {
             $w[]="cod_ciudad IN (SELECT cod_ciudad FROM ciudad WHERE cod_ciudad = $ciudad)"; 
        }
        if (!empty($id_precio)) 
        {
             $w[]="des_precio_referencial IN (SELECT rango FROM preciohotel WHERE id = $id_precio)"; 
        }

    if (count($w)) $where=implode(' AND ',$w); else $where='';
    /*$query = $this->db->query("select id, nom_comercial, cod_ciudad, des_foto 
                               FROM hotel 
                               $where");*/
                $this->db->select('id, nom_comercial, cod_ciudad, des_foto');
                $this->db->where("$where");
                $query = $this->db->get('hotel', $limit, $this->uri->segment(3));

    return $query->result();

} 
```

控制器：

```
function buscar()
{
    $dpto = (int)$this->input->post('departamentos');
    $ciudad = (int)$this->input->post('ciudades');
    $precio = (int)$this->input->post('precios');   

    $this->load->model('mhotel');
            $this->load->model('mciudad');

            $total = (int)count($this->mbuscador->buscarHotel($dpto, $ciudad, $precio));
    $limit = 9;

    $this->load->library('pagination');

    $config['base_url'] = 'http://infohotelperu.com/buscador/buscar';
    $config['total_rows'] = $total;
    $config['per_page'] = $limit;
    $config['num_links'] = 5;

    $this->pagination->initialize($config);

    $info = $this->mbuscador->buscarHotelLimit($dpto, $ciudad, $precio, $limit);        

    $results['info'] = $info;

    $this->load->view('resultados', $results);
} 
```

在我看来，我刚刚得到

```
<?php echo $this->pagination->create_links(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:13:13.093

这是我的控制器的代码：

```
$this->load->model("entries");

//pagination
$this->load->library('pagination');

$config['full_tag_open'] = '<div class="full_pagination">';
$config['full_tag_close'] = '</div>';

$config['next_tag_open'] = '<span class="prev_next_pagination">';
$config['next_tag_close'] = '</span>';

$config['prev_tag_open'] = '<span class="prev_next_pagination">';
$config['prev_tag_close'] = '</span>';

$config['num_tag_open'] = '<span class="num_pagination">';
$config['num_tag_close'] = '</span>';

$config['cur_tag_open'] = '<span class="cur_pagination">';
$config['cur_tag_close'] = '</span>';
$config['next_link'] = 'Next';
$config['prev_link'] = 'Vorige';
$config['base_url'] = base_url().'index.php/blog/index';

$config['total_rows'] = $this->entries->countAll();
$config['per_page'] = 3;
$config['num_links'] = 10;

$this->pagination->initialize($config);

//end pagination config

$entries = $this->entries->get_all($config['per_page']);

$data['entries'] = $entries;
$data['titel']="Blog - Frederik";
$data['main_content']='index';
$this->load->view('includes/template', $data); 
```

在我看来，这是：

```
foreach($entries as $entry){
     // display entry info here
}

<div id="pagination" align="center">
    <?php echo $this->pagination->create_links(); ?>
</div> 
```

这应该工作！不要忘记加载库！;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:43:57.260

您应该使用 codeigniter 分页。奇迹般有效 ;）

更多信息在这里：

[http://ellislab.com/codeigniter/user-guide/libraries/pagination.html](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)

# php - PHP - 检查数据是否在表中，如果是，则将其传递给 $_SESSIONS 数组

> ID：15397313
> 
> 赞同：0
> 
> 时间：2013-03-13T21:59:28.153
> 
> 标签：php, mysql, database

嗨，伙计们，这是我在这里的第一篇文章，这个论坛上有类似的问题，但我找不到一个准确回答我的问题的帖子，或者至少它对我来说不够相关 - 这是我的第三天使用PHP，所以我仍然习惯它..

我正在为我的网站制作一个小游戏，用户可以支付少量的钱来赢得奖品，奖品是一个将通过电子邮件发送给他们的代码。

目前我有我的数据库和脚本设置，因此不能使用布尔值 Available 发出两次相同的代码，如果代码尚未发出，则设置为 1，如果有，则设置为 0

我的代码表设置如下

```
CodeID | ItemID | CodeType | Available | Code             |

1      | 1      | xxxxxxx  | 1         | QLLxbttKQcHv4e4k |
2      | 1      | xxxxxxx  | 1         | 6JKMumiH35Dke4SS |
3      | 3      | xxxxxxx  | 0         | mQ2WyUjqNy5fJiEr | 
```

我想要做的是检查每个代码以查看它是否可用，如果它是我想获取 ItemID 并将其放入 $_SESSIONS 数组中，我可以在另一个页面中使用它来仅返回我已存储的代码的结果

我在检查代码是否可用以及是否将 ItemID 放入 $_SESSIONS 数组时遇到了一些问题

目前我有这个来查询数据库

```
$stock = $conn -> query('SELECT * FROM codes WHERE Available = 1'); 
```

这将检查数据库并输出当前可用的所有代码，包括重复的 ItemID

谁能帮助我，以便我只取每个 ItemID 中的 1 个并将其放入 $_SESSIONS 数组中，我可以在下一页上使用它来仅显示带有可用代码的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:02:03.530

这个查询

```
SELECT DISTINCT ItemID FROM codes WHERE Available = 1 
```

`ItemID`将只返回可用的唯一s

PS：更喜欢只选择您需要的特定列，而不是所有内容`*`

# ios - Facebook在iOS上登录错误的应用程序

> ID：15397317
> 
> 赞同：6
> 
> 时间：2013-03-13T21:59:44.763
> 
> 标签：ios, objective-c, facebook, login

我的 iOS 应用程序使用 Facebook 登录，但是我的开发团队最近决定将我们所有的应用程序整合到一个具有通用 APP ID 的通用 Facebook 应用程序中。所以我进入我的项目并尝试将我的 FacebookAppID 和 URL 类型更改为正确的 APP ID，但是当我运行应用程序并单击登录按钮时，它会将我重定向到登录 Facebook 上的旧应用程序。我完全不知道为什么会这样，但这是我的 AppDelegate 文件中的内容：

```
/*
 Callback for session changes
*/
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
switch (state) {
    case FBSessionStateOpen:
        if (!error) {
            // We have a valid session
            NSLog(@"User session found");
        }
        break;
    case FBSessionStateClosed:
    case FBSessionStateClosedLoginFailed:
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter]
 postNotificationName:FBSessionStateChangedNotification
 object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
    }
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"email",
                        @"user_games_activity",
                        @"user_location",
                        @"user_likes",
                        @"user_birthday",
                        nil];
return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
}

/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
 */
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
}
/*
 *Logout
 *
 */
- (void) closeSession {
    [FBSession.activeSession closeAndClearTokenInformation];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T22:17:01.910

您的设备上可能有两个应用程序在应用程序 Info.plist 中具有相同的 Facebook URL 方案。您可以：

*   删除旧应用程序，或
*   重新安装旧应用，但事先从 Info.plist 文件中删除 Facebook URL 方案

您可能有多个 URL 方案。如果是这样，您应该寻找看起来像 fbxxxxxxxxxxx 的那个，它显示在[http://developers.facebook.com/上的应用页面上](http://developers.facebook.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-02T15:35:38.950

我们仍然可以使用 UrlSchemeSuffix 在不同的应用程序中使用相同的 facebook url 方案。为此我们可以设置[![脸书开发者控制台](../Images/a90634b4db9c01dd30eb2e50c4925183.png)](https://i.stack.imgur.com/qZVrg.png)

然后在 Info.plist 文件中：

```
<key>FacebookUrlSchemeSuffix</key>
<string>$(FACEBOOK_URL_ENV)</string>
<key>CFBundleURLTypes</key>
<array>
        <dict>
            <key>CFBundleTypeRole</key>
            <string>Editor</string>
            <key>CFBundleURLName</key>
            <string>FACEBOOK_URL_SCHEME</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>$(FACEBOOK_URL_SCHEME)</string>
            </array>
        </dict>
</array> 
```

设置您的自定义变量 XCode：构建设置 > 用户定义（添加新的用户定义设置）

（在 fbXXXXXXXXXXXXsuffixValue 之后替换您的 Facebook 应用程序 ID）

[![在此处输入图像描述](../Images/c9359870d8023f6baabdb379bbe27cee.png)](https://i.stack.imgur.com/E6ASh.png)

# javascript - 在 jQuery UI 中调用调整大小事件

> ID：15397322
> 
> 赞同：1
> 
> 时间：2013-03-13T21:59:53.293
> 
> 标签：javascript, jquery, jquery-ui

我有一个已应用的 DIV：

```
$(mydiv).resizable({handles: "w", maxWidth: 300, minWidth: 10}); 
```

现在，有时我想以编程方式将其设为 300 像素宽或 10 像素宽。我尝试了很多组合，但没有一个有效。一些更复杂的尝试如下所示：

```
var my_event = new jQuery.Event("resize");
my_event.offsetX = my_event.clientX = my_event.pageX = $(window).width() - 300;
$(mydiv).trigger(my_event); 
```

DIV 位于页面的右边缘，因此我的鼠标距离右边缘 300 像素。

这显然是错误的做法。什么是正确的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:32:58.603

这（更新的示例）会起作用吗？（[演示](http://jsfiddle.net/U2DHH/3/)）

```
<div id="WindowA" class='Window'>I'm re-sizeale</div>
<div id="WindowB" class='Window'>I'm not re-sizeale</div>
<button id="Resize">Reset Size</button>
<script>
  var windowA = $('#WindowA'),
      windowB = $('#WindowB');

  windowA.bind({
    resize : function(event,ui) {
      windowB.css({
        "width": windowA.width() + "px",
        "height": windowA.height() + "px"
      });
    }
  }).resizable();

  $('#Resize').on('click', function () {
    windowA.css({
      "width": "150px",
      "height": "150px"
    }).trigger('resize');
  });
</script>
<style>
  .Window {
    width: 150px;
    height: 150px;
  }
  #WindowA {
    background-image: url(http://placekitten.com/200/300);
  }
  #WindowB {
    background-image: url(http://placekitten.com/g/200/300);
  }
</style> 
```

# htsql - HTSQL Select 小部件不呈现结果

> ID：15397326
> 
> 赞同：0
> 
> 时间：2013-03-13T22:00:00.600
> 
> 标签：htsql

当我尝试使用 HTRAF 呈现选择小部件时，我在 jquery.htraf.js 的第 776 行收到“Uncaught TypeError: Cannot read property 'length' of undefined”。data-htsql 属性填充了正确的查询，我可以手动查看结果。问题似乎是数据和元属性没有通过 Ajax 响应填充。第 43 行和第 44 行返回未定义的 jquery.htraf.js 堆栈链。我需要对 htsql 服务进行一些配置以使其适当地呈现 json 以与 HTRAF 库兼容吗？

我已经使用以下命令和 yaml 文件启动了 htsql 服务：

```
htsql-ctl serve -C casemart.yaml &

htsql:
  db:
    engine: mysql
    database: casemart
    username: root
    password: *********
    host: localhost
    port: 3306
tweak.autolimit:
  limit: 1000
tweak.shell.default:
tweak.override:
  included-tables: [casemart.*]
  foreign-keys:
    - sfcase(account_id) -> sfaccount(id)
    - sfcase(owner_id) -> sfuser(id)
    - sfcase(createdby_id) -> sfuser(id)
    - sfcase(closed_date_dim_id) -> date_dim(date_id) 
```

# c# - Json Converter 无法识别空属性并引发异常

> ID：15397330
> 
> 赞同：0
> 
> 时间：2013-03-13T22:00:18.377
> 
> 标签：c#, json, .net-4.5, json.net

假设我有一个示例 Json 格式字符串为

```
string per1 = @"[{""Email"":""AAA"",""mj_campaign_id"":""22"",""mj_contact_id"":""PPP"",""customcampaign"":""AAA"",""blocked"":""22"",""hard_bounce"":""PPP"",""blocked"":""22"",""hard_bounce"":""PPP""},"
                           + @"{""Email"":""BBB"",""mj_campaign_id"":""25"",""mj_contact_id"":""QQQ"",""customcampaign"":""AAA"",""blocked"":""22"",""hard_bounce"":""PPP"",""blocked"":""22""},"
                           + @"{""Email"":""CCC"",""mj_campaign_id"":""38"",""mj_contact_id"":""RRR"",""customcampaign"":""AAA"",""blocked"":""22"",""hard_bounce"":""PPP""}]"; 
```

我正在尝试使用反序列化它

```
var result = JsonConvert.DeserializeObject(per1); 
```

只要字符串的所有行都具有以下属性的值，它就可以正常工作 Email、mj_campaign_id、mj_contact_id、customcampaign、blocked、hard_bounce、error_related_to、error。但是当我在某些行中跳过一些 sttribute 值时，它会抛出一个错误说

无法将 Newtonsoft.Json.Linq.JValue 添加到 Newtonsoft.Json.Linq.JObject。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:12:32.157

您的错误是因为您没有为需要执行的对象分配值。如果您删除该值，至少添加一个空字符串。

那说！这就是手动构建 JSON 字符串的危险。如果可以的话，你应该总是避免它。如果您正在从网页阅读，该网页应该为您序列化有效负载，然后您应该使用您用来拉入有效负载的任何内容（控制器、restful 服务等）对其进行反序列化。.NET 的美妙之处在于它为您处理所有这些管道，如果您尝试重新发明 .NET 轮子，您真的会遇到痛苦的问题

# javascript - d3。用复选框绘制数据子集

> ID：15397335
> 
> 赞同：1
> 
> 时间：2013-03-13T22:00:35.727
> 
> 标签：javascript, checkbox, d3.js, data-visualization, subset

我正在使用一些示例数据进行可视化，我想在其中使用复选框来选择要绘制的数据子集。

这是我当前的工作示例 [http://bl.ocks.org/natemiller/76fed84e8d8c2f6632f6](http://bl.ocks.org/natemiller/76fed84e8d8c2f6632f6)

该示例中的复选框均未链接到任何脚本，但是我想要的是，当一个或两个框中检查一个或两个框时，数据的子集（或全部）数据（基于列“ temp”）是可绘制。

我试过浏览这个例子 [http://2011.12devsofxmas.co.uk/wordpress/wp-content/uploads/2012/01/datavis-final.html](http://2011.12devsofxmas.co.uk/wordpress/wp-content/uploads/2012/01/datavis-final.html)

但是额外的“脏数据”代码让我感到困惑，我无法确定如何引用复选框来对数据进行子集化。有人可以提供一些关于我如何实现我认为对于更高级的 JS 人员来说很容易的事情的指示吗？

# google-app-engine - 尝试以下发现的实现后，没有可用于“事务可选”的持久性提供程序：

> ID：15397336
> 
> 赞同：2
> 
> 时间：2013-03-13T22:00:36.403
> 
> 标签：google-app-engine, gwt, jpa, datanucleus

我正在尝试使用 JPA 2.0 创建一个 Google App Engine - GAE，我已经完成了所有我需要的操作，将正确的 jar 放在类路径中并确保我的实体得到了增强。但是我在创建我的 EntityManager 时遇到了问题。

我的 persistence.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="transactions-optional">    
        <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>       
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我的 Datanuclues pom 依赖如下所示：

```
 <datanucleus.version>3.1.1</datanucleus.version> 
            <!-- DN -->
    <dependency>
        <groupId>com.google.appengine.orm</groupId>
        <artifactId>datanucleus-appengine</artifactId>
        <version>2.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>${datanucleus.version}</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>${datanucleus.version}</version>
    </dependency>

    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jdo</artifactId>
        <version>${datanucleus.version}</version>
    </dependency>

<plugin>
                <groupId>org.datanucleus</groupId>
                <artifactId>maven-datanucleus-plugin</artifactId>
                <version>${datanucleus.version}</version>
                <configuration>
                    <api>JPA</api>
                    <verbose>true</verbose>
                </configuration>
                <executions>
                    <execution>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>enhance</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

我得到：

```
C:\dev\projects\org\me\workspace\lottoshop>mvn gae:run
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building GWT Maven Archetype
[INFO]    task-segment: [gae:run]
[INFO] ------------------------------------------------------------------------
[INFO] Preparing gae:run
[INFO] Preparing gae:unpack
[WARNING] Removing: unpack from forked lifecycle, to prevent recursive invocation.
[INFO] No goals needed for project - skipping
[INFO] artifact org.datanucleus:datanucleus-enhancer: checking for updates from nexus-releases-repository
[WARNING] repository metadata for: 'artifact org.datanucleus:datanucleus-enhancer' could not be retrieved from repository: nexus-releases-repository due to an error: Error transferring file: nexus.tatis.com
[INFO] Repository 'nexus-releases-repository' will be blacklisted
[INFO] artifact org.datanucleus:datanucleus-enhancer: checking for updates from nexus-snapshots-repository
[WARNING] repository metadata for: 'artifact org.datanucleus:datanucleus-enhancer' could not be retrieved from repository: nexus-snapshots-repository due to an error: Error transferring file: nexus.tatis.com
[INFO] Repository 'nexus-snapshots-repository' will be blacklisted
[INFO] [gae:unpack {execution: start-gae}]
[INFO] Found appengine-java-sdk 1.7.5.
[INFO] [gwt:i18n {execution: default}]
[INFO] [gwt:generateAsync {execution: default}]
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 4 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 1 source file to C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\WEB-INF\classes
[INFO] [war:exploded {execution: default}]
[INFO] Exploding webapp
[INFO] Assembling webapp [lottoshop] in [C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\dev\projects\org\me\workspace\lottoshop\src\main\webapp]
[INFO] Webapp assembled in [225 msecs]
[INFO] artifact org.ow2.asm:asm: checking for updates from nexus-plugin-repository
[WARNING] repository metadata for: 'artifact org.ow2.asm:asm' could not be retrieved from repository: nexus-plugin-repository due to an error: Error transferring file: nexus.tatis.com
[INFO] Repository 'nexus-plugin-repository' will be blacklisted
[INFO] [datanucleus:enhance {execution: default}]
[INFO] DataNucleus Enhancer (version 3.1.1) : Enhancement of classes
DataNucleus Enhancer completed with success for 1 classes. Timings : input=208 ms, enhance=24 ms, total=232 ms. Consult the log for full details

[ERROR] --------------------
[ERROR]  Standard error from the DataNucleus tool + org.datanucleus.enhancer.DataNucleusEnhancer :
[ERROR] --------------------
[ERROR] Mar 13, 2013 11:48:42 PM org.datanucleus.enhancer.DataNucleusEnhancer <init>
INFO: DataNucleus Enhancer for API "JPA"
Mar 13, 2013 11:48:42 PM org.datanucleus.enhancer.DataNucleusEnhancer main
INFO: DataNucleus Enhancer (version 3.1.1) : Enhancement of classes
Mar 13, 2013 11:48:42 PM org.datanucleus.metadata.MetaDataManager loadFiles
WARNING: Metadata file -enhancerName not found in CLASSPATH
Mar 13, 2013 11:48:42 PM org.datanucleus.metadata.MetaDataManager loadFiles
WARNING: Metadata file ASM not found in CLASSPATH
Mar 13, 2013 11:48:43 PM org.datanucleus.enhancer.asm.ASMClassEnhancer enhance
INFO: Class "co.za.fwc.webapp.lottery.shared.dto.Player" is already enhanced.
Mar 13, 2013 11:48:43 PM org.datanucleus.enhancer.DataNucleusEnhancer addMessage
INFO: DataNucleus Enhancer completed with success for 1 classes. Timings : input=208 ms, enhance=24 ms, total=232 ms. Consult the log for full details

[ERROR] --------------------
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [surefire:test {execution: default-test}]
[INFO] Surefire report directory: C:\dev\projects\org\me\workspace\lottoshop\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] [gwt:compile {execution: default}]
[INFO] auto discovered modules [co.za.fwc.lottery.lottoshop.LottoShop, com.extjs.gxt.samples.resources.Resources]
[INFO] com.extjs.gxt.samples.resources.Resources has no EntryPoint - compilation skipped
[INFO] Compiling module co.za.fwc.lottery.lottoshop.LottoShop
[INFO]    Validating units:
[INFO]       Ignored 81 units with compilation errors in first pass.
[INFO] Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO]    Computing all possible rebind results for 'com.google.gwt.useragent.client.UserAgentAsserter'
[INFO]       Rebinding com.google.gwt.useragent.client.UserAgentAsserter
[INFO]          Checking rule <generate-with class='com.google.gwt.editor.rebind.SimpleBeanEditorDriverGenerator'/>
[INFO]             [WARN] Detected warnings related to 'com.google.gwt.editor.client.SimpleBeanEditorDriver'.   Are validation-api-<version>.jar and validation-api-<version>-sources.jar on the classpath?
[INFO]             Specify -logLevel DEBUG to see all errors.
[INFO]             [WARN] Unknown type 'com.google.gwt.editor.client.SimpleBeanEditorDriver' specified in deferred binding rule
[INFO]    Compiling 6 permutations
[INFO]       Compiling permutation 0...
[INFO]       Process output
[INFO]          Compiling
[INFO]             Compiling permutation 3...
[INFO]       Process output
[INFO]          Compiling
[INFO]             Compiling permutation 1...
[INFO]       Process output
[INFO]          Compiling
[INFO]             Compiling permutation 2...
[INFO]       Compiling permutation 4...
[INFO]          Compiling
[INFO]             Compiling permutation 5...
[INFO]    Compile of permutations succeeded
[INFO] Linking into C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\LottoShop
[INFO]    Link succeeded
[INFO]    Compilation succeeded -- 37.226s
[INFO] [war:war {execution: default-war}]
[INFO] Packaging webapp
[INFO] Assembling webapp [lottoshop] in [C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\dev\projects\org\me\workspace\lottoshop\src\main\webapp]
[INFO] Webapp assembled in [194 msecs]
[INFO] Building war: C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT.war
[INFO] [gae:run {execution: default-cli}]
Mar 13, 2013 11:49:25 PM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory 'C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT' is not an EAR directory. File C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\appengine-application.xmlappengine-application.xml not detected.
Mar 13, 2013 11:49:25 PM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory 'C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT' is not an EAR directory. File C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\appengine-application.xmlappengine-application.xml not detected.
Mar 13, 2013 11:49:25 PM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory 'C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT' is not an EAR directory. File C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\appengine-application.xmlappengine-application.xml not detected.
Mar 13, 2013 11:49:25 PM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory 'C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT' is not an EAR directory. File C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\appengine-application.xmlappengine-application.xml not detected.
Mar 13, 2013 11:49:25 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\WEB-INF/appengine-web.xml
2013-03-13 23:49:25.382:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
Mar 13, 2013 11:49:25 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\WEB-INF/web.xml
Mar 13, 2013 11:49:25 PM com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties
INFO: Overwriting system property key 'java.util.logging.config.file', value 'C:\Users\babajide.agbebiyi\.m2\repository\com\google\appengine\appengine-java-sdk\1.7.5\appengine-java-sdk-1.7.5\config\sdk\logging.properties' with value 'WEB-INF/logging.properties' from 'C:\dev\projects\org\me\workspace\lottoshop\target\lottoshop-0.0.1-SNAPSHOT\WEB-INF\appengine-web.xml'
2013-03-13 23:49:25.757:INFO::jetty-6.1.x
2013-03-13 23:49:26.919:INFO::Started SelectChannelConnector@127.0.0.1:8080
Mar 13, 2013 9:49:26 PM com.google.appengine.tools.development.AbstractServer startup
INFO: Server default is running at http://localhost:8080/
Mar 13, 2013 9:49:26 PM com.google.appengine.tools.development.AbstractServer startup
INFO: The admin console is running at http://localhost:8080/_ah/admin
Mar 13, 2013 9:49:26 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: Dev App Server is now running
Mar 13, 2013 9:49:52 PM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /favicon.ico
Mar 13, 2013 9:49:53 PM org.datanucleus.api.jpa.JPAEntityManagerFactory <init>
WARNING: No META-INF/persistence.xml files were found in the CLASSPATH of the current thread!
Mar 13, 2013 9:49:53 PM org.datanucleus.api.jpa.JPAEntityManagerFactory <init>
WARNING: No persistence unit of name "transactions-optional" is found in the CLASSPATH of the current thread!
Mar 13, 2013 9:49:53 PM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String co.za.fwc.lottery.lottoshop.client.LottoService.greetServer(java.lang.String) throws java.lang.IllegalArgumentException' threw an unexpected exception: java.lang.ExceptionInInitializerError
        at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
        at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
        at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.ExceptionInInitializerError
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
        at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
        at co.za.fwc.lottery.lottoshop.server.LottoServiceImpl.greetServer(LottoServiceImpl.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
        ... 38 more
Caused by: javax.persistence.PersistenceException: No persistence providers available for "transactions-optional" after trying the following discovered implementations: org.datanucleus.api.jpa.PersistenceProviderImpl
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:182)
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
        at co.za.fwc.lottery.lottoshop.shared.EMF.<clinit>(EMF.java:6)
        ... 49 more 
```

更新：添加图片以显示我有 persistence.xml ![在此处输入图像描述](../Images/df6bfdbadc8cdb2c37ae24d43fb18dde.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:39:21.443

我个人会阅读错误消息。JPA 非常清楚地定义了`persistence.xml`必须在哪里，而它不在那里。

> “在当前线程的 CLASSPATH 中找不到 META-INF/persistence.xml 文件！”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T21:07:31.240

我不得不将persistence.xml 移到`WEB-INF/classes/META-INF`android studio 中的应用引擎后端应用程序中。

`projectdir/backend/src/main/webapp/WEB-INF/classes/META-INF/persistence.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T13:44:42.683

使用持久化 api 时也要记住。在 META-INF 中，有两个文件名为：

*   jdoconfig.xml
*   持久性.xml

如果您使用的是持久化 api，那么您可以通过在 jdoconfig.xml 文件中添加块注释来消除此错误

# c++ - 使用类中的 get 方法返回指针并使用 *& 以递归方式接收它

> ID：15397342
> 
> 赞同：1
> 
> 时间：2013-03-13T22:01:00.043
> 
> 标签：c++

所以我只是在写一些代码，有点难倒自己

我有一个类 Node 和另一个类 BinaryTree：

```
class Node
{
public:
    Node();
    Node(int thedata, Node* right, Node* left):data(thedata), right_pointer(right),   left_pointer(left){};
    int get_data(){return data;}
    Node* get_right() {return right_pointer;}
    Node* get_left() {return left_pointer;}
private:
    int data;
    Node* right_pointer;
    Node* left_pointer;
};

class BinaryTree
{
private:
    Node* root;
    void add_tree_node(Node*& root,int data);
    void print_tree(Node* root);
public:
    BinaryTree();
    void print_tree();
    void add_tree_node(int data); 
 }; 
```

我的问题是这个命令：

add_tree_node(root->get_right(), 数据);

我收到一条错误消息：没有重载函数的实例。其中 get_right() 返回一个指向该指针的指针，并且想知道是否有更好的方法来代替下面的两个选项。

当我这样做时： Node* right = root->get_right(); add_tree_node（右，数据）；

或者

add_tree_node(root->right_link,data);

它有效，我理解它为什么有效，因为我们传递的是指针本身而不是值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:07:28.107

`node->get_right()`返回一个右值。`add_tree_node()`接受非常量引用。您只能从左值而不是右值中进行非常量引用。因此，除非您先将其放入局部变量，否则 的返回值`node->get_right()`不能转换为非常量引用。

就是说，为什么要先`add_tree_node()`引用呢？它已经使用了一个指针，因此您可以在`Node`不需要引用的情况下改变您想要的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:08:16.753

在我看来，您需要一个 insert( *& node, data) 函数，
然后在您的主程序中，您可以使用构造函数创建一个新的二叉树，如下所示： Node* binaryTree = new Node();
从那里，您可以像这样插入节点： binaryTree->insert( binaryTree, data );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:53:29.737

```
Node* &get_right() {return right_pointer;}
Node* &get_left() {return left_pointer;} 
```

# ios - 当我尝试在 prepareForSegue 中设置此变量的值时，为什么我的应用程序会崩溃？

> ID：15397351
> 
> 赞同：2
> 
> 时间：2013-03-13T22:01:16.747
> 
> 标签：ios, objective-c, ios5, ios6, segue

我正在尝试做的事情的要点是将窗口上标签的值设置为用户在前一个窗口中输入的文本。

用户通过单击“读取”来进行转义，这会将他们转义。

这是我的 prepareForSegue 方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    ReadingViewController *destination = segue.destinationViewController;

    destination.textToRead = self.textInput.text;
} 
```

`textToRead`只是一个保存用户输入文本的 NSString 对象。（然后使用该方法将此文本设置为标签`viewDidLoad`。）

segue 的窗口按预期设置为不同的视图控制器（ReadingViewController），我通过从“Read” UIButton 控制拖动到下一个窗口来创建 segue。

我似乎无法弄清楚问题是什么。这是它给出的错误：

```
2013-03-13 19:00:08.119 Project Lego[1523:c07] -[UINavigationController setTextToRead:]: unrecognized selector sent to instance 0x894d230
2013-03-13 19:00:08.122 Project Lego[1523:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UINavigationController setTextToRead:]: unrecognized selector sent to instance 0x894d230'
*** First throw call stack:
(0x1c92012 0x10cfe7e 0x1d1d4bd 0x1c81bbc 0x1c8194e 0x2949 0x45bb87 0x45bc14 0x10e3705 0x172c0 0x17258 0xd8021 0xd857f 0xd76e8 0x46cef 0x46f02 0x24d4a 0x16698 0x1beddf9 0x1bedad0 0x1c07bf5 0x1c07962 0x1c38bb6 0x1c37f44 0x1c37e1b 0x1bec7e3 0x1bec668 0x13ffc 0x244d 0x2375 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:22:52.213

如果要访问嵌入在 navigationVC 中的视图控制器，请执行以下操作：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
    {
        UINavigationController *nav = (UINavigationController*)segue.destinationViewController;
        ReadingViewController *destination = [nav.viewControllers objectAtIndex:0];
        destination.textToRead = self.textInput.text;
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:04:06.647

您的 segue 引用的是`UINavigationController`，而不是您的 viewcontroller 类。检查你的 Storyboard 以确保 segue 连接了正确的控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:07:03.920

您似乎在导航控制器上设置 textToRead 。我假设你想在视图控制器中设置它。如果是这样，您需要

```
 if ([segue.destinationViewController 
                 isKindOfClass:[UINavigationController class]])
    {
       mvc = (ReadingViewController *) [segue.destinationViewController topViewController];
       mvc.textToRead = self.textInput.text; 

    } else {

       ReadingViewController *destination = segue.destinationViewController;
       destination.textToRead = self.textInput.text;
   } 
```

# xml - Microsoft MVC 4 参数作为 POST 正文中的 XML

> ID：15397358
> 
> 赞同：2
> 
> 时间：2013-03-13T22:01:50.620
> 
> 标签：xml, asp.net-mvc-4, asp.net-web-api, html-post

我是微软 MVC 的新手，所以请原谅我的新手问题。我们正在将 Ruby/Rails 应用程序移植到 MS MVC 4。随着时间的推移，我们将这样做，因此 .NET MVC 必须能够在不修改的情况下使用 Ruby/Rails api 请求。我无法将 POST 正文中的 xml 反序列化为对象。当我在返回行上放置一个断点时，登录的值为空。任何帮助将不胜感激。

API 请求经过身份验证...这是来自客户端的请求。

```
POST http://cloudcare.webservices.local/users/authenticate HTTP/1.1
Host: cloudcare.webservices.local
Connection: keep-alive
Content-Length: 132
Accept: text/xml

<authenticate> 
<login>david</login>
<password>secure</password>
<user_type_id>2</user_type_id>
</authenticate> 
```

这是 Api 控制器

```
public class UsersController : ApiController
{
    private IUserRepository repository;

    public UsersController(IUserRepository repo)
    {
        repository = repo;
    }

    [HttpPost]
    public AuthenticateUserViewModel authenticate([FromBody]AuthenticateUserViewModel login)
    {
        return null;
    }
} 
```

这是参数类

```
[Serializable]
[DataContract(Name = "authenticate")]
public class AuthenticateUserViewModel
{
    [DataMember(Name = "login")]
    public string Login { set; get; }

    [DataMember(Name = "password")]
    public string Password { get; set; }

    [DataMember(Name = "user_type_id")]
    public int UserTypeId { get; set; }
} 
```

这是 WebApiConfig

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "{controller}/{action}/{id}",
            defaults: new { action = "index", id = RouteParameter.Optional}
        );

        var unity = new UnityContainer();
        unity.RegisterType<Controllers.UsersController>();
        unity.RegisterType<Repository.IUserRepository, Repository.Repositories.UserRepository>(new HierarchicalLifetimeManager());
        config.DependencyResolver = new IoCContainer(unity);

        config.EnableSystemDiagnosticsTracing();

        config.Formatters.XmlFormatter.UseXmlSerializer = true;
        config.Formatters.XmlFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
        config.Formatters.XmlFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
    }
} 
```

# asp.net - 在 Visual Studio 2012 发布时预编译 Azure WebRole（不通过 WebDeploy）

> ID：15397359
> 
> 赞同：4
> 
> 时间：2013-03-13T22:01:57.103
> 
> 标签：asp.net, azure

我正在尝试预编译我的 WebForms (WebRole) 应用程序，然后再将其从 Visual Studio 2012 发布到 Azure。有多个实例，因此 WebDeploy 不是一个选项。

我还没有找到任何“最佳实践”。关于如何做到这一点的任何想法？

编辑：有没有办法在启动时预加载所有页面，以便用户不需要为所有页面的第一页加载/编译进行编译？在我的情况下，除了登录页面之外的所有页面都在表单身份验证之后。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:57:12.380

这有点棘手，但是您可以在阶段进行。首先，您创建一个预编译的网站，然后通过添加适当的设置来添加 Azure 特定配置 ServiceDefiniton.csdef。接下来使用 CSPACK.EXE 将网站打包到 cspkg 中，您也会得到 ServiceConfiguration.cscfg。现在您可以离线部署到 Windows Azure 云服务。

查看此帖子以了解分步详细信息：[Azure Web 角色中的网站项目](https://stackoverflow.com/questions/1098988/website-projects-in-azure-web-role)

# php - Laravel 3 访问一个客户的所有交易

> ID：15397365
> 
> 赞同：0
> 
> 时间：2013-03-13T22:02:13.740
> 
> 标签：php, laravel, laravel-3

客户有很多账户，账户有很多交易。

我想从一位客户那里获得所有交易..？

```
$customer = Auth::user();
$statement = $customers->accounts()->transactions()->where('customer_no', '=',     $customer->customer_no)->get(); //get all transactions 
```

我知道这不起作用，但这是我能得到的最接近的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:34:29.310

```
$customer = Auth::user();
$account_ids = $customers->accounts()->lists('id');
$statement = Transaction::where_in('account_id', $account_ids)->where('customer_no', '=', $customer->customer_no)->get(); // Get all transactions 
```

您可能不需要“customer_no”部分 b/c

# android - 筛选配置的资源标识符

> ID：15397368
> 
> 赞同：2
> 
> 时间：2013-03-13T22:02:21.097
> 
> 标签：android, android-layout, android-resources, android-identifiers

我正在开发一个应用程序，我当前的任务是支持不同的屏幕尺寸。我的问题是很多设备都有相同的标识符。

例如，`large-hdpi`支持 Nexus 7、Galaxy Note 和 Galaxy Tab。但在 Note 和 Tab 中，所有布局的下降都比在 Nexus 中大，所以我们使用`large-hdpi-v11`Nexus 7 和`large-hdpi-v8`Galaxy Note 和 Tab。

我认为这不是这些设备的最佳匹配；使用版本作为标识符即使在 Logcat 上也会显示警告。

```
[2013-03-13 18:48:14 - iba commons] 'Large Screen, API Level 8' is not a best match for any device/locale combination.
[2013-03-13 18:48:14 - iba commons] Displaying it with ', , Locale Language ___Region __, sw480dp, w480dp, h800dp, Large Screen, Long screen aspect ratio, Portrait Orientation, Normal, Day time, Medium Density, Finger-based touchscreen, Soft keyboard, No keyboard, Hidden navigation, No navigation, Screen resolution 800x480, API Level 17' which is compatible, but will actually be displayed with another more specific version of the layout. 
```

在不指定版本的情况下识别这些设备的最佳方法是什么？

# javascript - JavaScript 新日期序数（st、nd、rd、th）

> ID：15397372
> 
> 赞同：70
> 
> 时间：2013-03-13T22:02:51.173
> 
> 标签：javascript, date, ordinal-indicator

如果可能的话，没有 JavaScript 库或大量笨拙的代码，我正在寻找最简单的方法来格式化两周后的日期，格式如下：

`13th March 2013`

我正在使用的代码是：

```
var newdate = new Date(+new Date + 12096e5);
document.body.innerHTML = newdate; 
```

它返回两周后的日期和时间，但如下所示： Wed Mar 27 2013 21:50:29 GMT+0000 (GMT Standard Time)

这是[jsFiddle](http://jsfiddle.net/CT7Fm/40/)中的代码。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-13T22:11:51.083

请注意，这适用于从 1 到 31 的天数。

```
const nth = function(d) {
  if (d > 3 && d < 21) return 'th';
  switch (d % 10) {
    case 1:  return "st";
    case 2:  return "nd";
    case 3:  return "rd";
    default: return "th";
  }
}

// test code

const fortnightAway = new Date(+new Date + 12096e5);
const date = fortnightAway.getDate();
const month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][fortnightAway.getMonth()];

document.getElementById("date").innerHTML = `In two weeks it will be the ${date}<sup>${nth(date)}</sup> of ${month} ${fortnightAway.getFullYear()}`;

// test
const dates = [...Array(32).keys()].slice(1).map(i => `${i}${nth(i)}`)
console.log(dates.join(", "))
```

```
sup {
  font-size: x-small
}
```

```
<span id="date"></span>
```

这是任何数字的版本

```
const nth = function(d) {
  const dString = String(d);
  const last = +dString.slice(-2);
  if (last > 3 && last < 21) return 'th';
  switch (last % 10) {
    case 1:  return "st";
    case 2:  return "nd";
    case 3:  return "rd";
    default: return "th";
  }
}

// test
const numbers = [...Array(1225).keys()].map(i => `${i}${nth(i)}`)
console.log(numbers.join(", "))
```

```
sup {
  font-size: x-small
}
```

```
<span id="date"></span>
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-06-07T17:00:48.693

这是受其他答案启发的一个班轮。它经过测试，将采用 0 和负数。

```
function getOrdinalNum(n) {
  return n + (n > 0 ? ['th', 'st', 'nd', 'rd'][(n > 3 && n < 21) || n % 10 > 3 ? 0 : n % 10] : '');
} 
```

2020 年 6 月 23 日更新。以下是上述函数的可读性更好的答案：

```
const getOrdinalNum = (number) => {
  let selector;

  if (number <= 0) {
    selector = 4;
  } else if ((number > 3 && number < 21) || number % 10 > 3) {
    selector = 0;
  } else {
    selector = number % 10;
  }

  return number + ['th', 'st', 'nd', 'rd', ''][selector];
}; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-15T22:57:50.760

我也在为日期执行此操作，但是因为一个月中的日期只能在 1 到 31 之间，所以我最终得到了一个简化的解决方案。

```
function dateOrdinal(dom) {
    if (dom == 31 || dom == 21 || dom == 1) return dom + "st";
    else if (dom == 22 || dom == 2) return dom + "nd";
    else if (dom == 23 || dom == 3) return dom + "rd";
    else return dom + "th";
}; 
```

或使用条件运算符的紧凑版本

```
function dateOrdinal(d) {
    return d+(31==d||21==d||1==d?"st":22==d||2==d?"nd":23==d||3==d?"rd":"th")
}; 
```

[http://jsben.ch/#/DrBpl](http://jsben.ch/#/DrBpl)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T22:14:37.743

很多格式的答案，所以我将只处理任何整数的第 n 个 -

```
Number.prototype.nth= function(){
    if(this%1) return this;
    var s= this%100;
    if(s>3 && s<21) return this+'th';
    switch(s%10){
        case 1: return this+'st';
        case 2: return this+'nd';
        case 3: return this+'rd';
        default: return this+'th';
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-01-20T08:02:28.897

这是一个适用于任何数字的简单函数：

```
function getOrdinal(n) {
    let ord = ["st", "nd", "rd"]
    let exceptions = [11, 12, 13]
    let nth = 
    ord[(n % 10) - 1] == undefined || exceptions.includes(n % 100) ? "th" : ord[(n % 10) - 1]
    return n + nth
} 
```

它可以接受数字或数字作为字符串。例如：

```
getOrdinal(28)        //Outputs: 28th
getOrdinal('108')     //Outputs: 108th 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-21T12:17:17.220

如果您是 moment.js 的粉丝，那么您可以使用 format("Do")

例子

```
var newdate = new Date();
moment(newdate).format("Do MMMM YYYY")
//Returns 1st January 2020

moment("01/01/2020", "MM/DD/YYYY").format("Do")
//Returns 1st

moment("01/01/2020", "MM/DD/YYYY").format("Do MMM YYYY")
//Returns 1st Jan 2020 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-13T22:28:22.240

很多答案，还有一个：

```
function addOrd(n) {
  var ords = [, 'st', 'nd', 'rd'];
  var ord, m = n % 100;
  return n + ((m > 10 && m < 14) ? 'th' : ords[m % 10] || 'th');
}

// Return date string two weeks from now (14 days) in 
// format 13th March 2013
function formatDatePlusTwoWeeks(d) {
  var months = ['January', 'February', 'March', 'April', 'May', 'June',
    'July', 'August', 'September', 'October', 'November', 'December'
  ];

  // Copy date object so don't modify original
  var e = new Date(d);

  // Add two weeks (14 days)
  e.setDate(e.getDate() + 14);
  return addOrd(e.getDate()) + ' ' + months[e.getMonth()] + ' ' + e.getFullYear();
}

console.log(formatDatePlusTwoWeeks(new Date()));

// Alternative using Intl.DateTimeFormat
function datePlusTwoWeeks(date = new Date()) {
  let d = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 14);
  let parts = new Intl.DateTimeFormat('en',{
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }).formatToParts(d).reduce((acc, part) => {
    acc[part.type] = part.value;
    return acc;
  }, Object.create(null));
  return `${addOrd(parts.day)} ${parts.month} ${parts.year}`;
}

console.log(datePlusTwoWeeks())
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-06-22T08:51:54.450

解决方案海洋中的另一种解决方案。

```
let suffix = (day >= 4 &&  day <= 20) || (day >= 24 && day <= 30)
    ? "th"
    : ["st", "nd", "rd"][day % 10 - 1]; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-08T18:15:14.887

我参加聚会有点晚了，但这应该可行：

```
function ordinal(number) {
  number = Number(number)
  if(!number || (Math.round(number) !== number)) {
    return number
  }
  var signal = (number < 20) ? number : Number(('' + number).slice(-1))
  switch(signal) {
    case 1:
      return number + 'st'
    case 2:
      return number + 'nd'
    case 3:
      return number + 'rd'
    default:
      return number + 'th'
  }
}

function specialFormat(date) {
  // add two weeks
  date = new Date(+date + 12096e5)
  var months = [
    'January'
    , 'February'
    , 'March'
    , 'April'
    , 'May'
    , 'June'
    , 'July'
    , 'August'
    , 'September'
    , 'October'
    , 'November'
    , 'December'
  ]
  var formatted = ordinal(date.getDate())
  formatted += ' ' + months[date.getMonth()]
  return formatted + ' ' + date.getFullYear()
}

document.body.innerHTML = specialFormat(new Date()) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-10-23T11:00:33.163

这里已经有很多很好的答案，尽管使用[Intl.PluralRules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/PluralRules/PluralRules)（标准化跨语言环境的序数分类）的答案可能仍然有用。

以下是`en-GB`.

[jsfiddle](https://jsfiddle.net/4bv8kz31/)

*   一个班轮：

    ```
    console.log({one:'st',two:'nd',few:'rd',other:'th'}[new Intl.PluralRules('en-GB', { type: 'ordinal' }).select(new Date().getDate())]) 
    ```

*   一个详细的例子：

    ```
    const suffixMap = {
      one: 'st',
      two: 'nd',
      few: 'rd',
      other: 'th',
    };
    const locale = 'en-GB';
    const moment = new Date();
    const dayOfMonth = moment.getDate();
    const pluralRuleOptions = {
      type: 'ordinal',
    };
    const pluralRule = new Intl.PluralRules(locale, pluralRuleOptions);
    const ordinal = pluralRule.select(dayOfMonth);
    console.log(suffixMap[ordinal]) 
    ```

```
const suffix = {
  one: 'st',
  two: 'nd',
  few: 'rd',
  other: 'th',
};

document.getElementById("tomorrow-month").innerHTML = new Intl.DateTimeFormat('en-GB', { month: 'long' }).format(new Date(Date.now() + 86400000));
document.getElementById("tomorrow-day").innerHTML = new Intl.DateTimeFormat('en-GB', { day: 'numeric' }).format(new Date(Date.now() + 86400000));
document.getElementById("tomorrow-ordinal").innerHTML = suffix[new Intl.PluralRules('en-GB', { type: 'ordinal' }).select(new Date(Date.now() + 86400000).getDate())];

document.getElementById("yesterday-month").innerHTML = new Intl.DateTimeFormat('en-GB', { month: 'long' }).format(new Date(Date.now() - 86400000));
document.getElementById("yesterday-day").innerHTML = new Intl.DateTimeFormat('en-GB', { day: 'numeric' }).format(new Date(Date.now() - 86400000));
document.getElementById("yesterday-ordinal").innerHTML = suffix[new Intl.PluralRules('en-GB', { type: 'ordinal' }).select(new Date(Date.now() - 86400000).getDate())];
```

```
Tomorrow, on <span id="tomorrow-month"></span> <span id="tomorrow-day"></span><sup id="tomorrow-ordinal"></sup>, I ordered a time machine.
It arrived yesterday on <span id="yesterday-month"></span> <span id="yesterday-day"></span><sup id="yesterday-ordinal"></sup>.
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-10-20T13:43:28.187

这对我很有用

```
ordinal(n) {
    var s = ["th", "st", "nd", "rd"];
    var v = n%100;
    return n + (s[(v-20)%10] || s[v] || s[0]);
} 
```

用法：

```
console.log(ordinal(11))
OUTPUT: 11th 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-14T00:29:07.247

> 没有 JavaScript 库或大量笨拙的代码

实现这一点的一种简单方法是在 vanilla javascript 中使用一系列*三个三元语句*来确定序数，如下所示：

```
let dateOrdinal = 'th';

dateOrdinal = ([1, 21, 31].indexOf(dateNumber) > -1) ? 'st' : dateOrdinal;
dateOrdinal = ([2, 22].indexOf(dateNumber) > -1) ? 'nd' : dateOrdinal;
dateOrdinal = ([3, 23].indexOf(dateNumber) > -1) ? 'rd' : dateOrdinal; 
```

它不像人类可读的那样，但您*也*可以使用`switch/case`语句来做出相同的决定：

```
switch (true) {

  case ([1, 21, 31].indexOf(dateNumber) > -1) : let dateOrdinal = 'st'; break;
  case ([2, 22].indexOf(dateNumber) > -1) : let dateOrdinal = 'nd'; break;
  case ([3, 23].indexOf(dateNumber) > -1) : let dateOrdinal = 'rd'; break;
  default : let dateOrdinal = 'th';
} 
```

* * *

**工作示例：**

```
// GET DATE PARTS
const dateInTwoWeeks = new Date(+new Date + 12096e5);
const dateNumber = dateInTwoWeeks.getDate();
const dateMonth = dateInTwoWeeks.toLocaleString('default', {month: 'long'});
const dateYear = dateInTwoWeeks.getFullYear();

// DETERMINE DATE ORDINAL
let dateOrdinal = 'th';

dateOrdinal = ([1, 21, 31].indexOf(dateNumber) > -1) ? 'st' : dateOrdinal;
dateOrdinal = ([2, 22].indexOf(dateNumber) > -1) ? 'nd' : dateOrdinal;
dateOrdinal = ([3, 23].indexOf(dateNumber) > -1) ? 'rd' : dateOrdinal;

// FORMAT DATE AS STRING
const dateInTwoWeeksString = `${dateNumber}${dateOrdinal} ${dateMonth} ${dateYear}`; 

document.body.textContent = dateInTwoWeeksString;
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-14T19:12:39.193

```
 Date.prototype.getMonthName = function(shorten) {
		var monthsNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
		var monthIndex = this.getMonth();
		var tempIndex = -1;
	    if (monthIndex == 0){ tempIndex = 0 };
	    if (monthIndex == 1){ tempIndex = 1 };
	    if (monthIndex == 2){ tempIndex = 2 };
	    if (monthIndex == 3){ tempIndex = 3 };
	    if (monthIndex == 4){ tempIndex = 4 };
	    if (monthIndex == 5){ tempIndex = 5 };
	    if (monthIndex == 6){ tempIndex = 6 };
	    if (monthIndex == 7){ tempIndex = 7 };
	    if (monthIndex == 8){ tempIndex = 8 };
	    if (monthIndex == 9){ tempIndex = 9 };
	    if (monthIndex == 10){ tempIndex = 10 };
	    if (monthIndex == 11){ tempIndex = 11 };

	    if (tempIndex > -1) {
			this.monthName = (shorten) ? monthsNames[tempIndex].substring(0, 3) : monthsNames[tempIndex];
	    } else {
	    	this.monthName = "";
	    }

	    return this.monthName;
	};

    Date.prototype.getDateWithDateOrdinal = function() {
		var d = this.getDate();  // from here on I've used Kennebec's answer, but improved it.
	    if(d>3 && d<21) return d+'th';
	    switch (d % 10) {
            case 1:  return d+"st";
            case 2:  return d+"nd";
            case 3:  return d+"rd";
            default: return d+"th";
        }
	};

	var myDate = new Date();
    // You may have to check your JS Console in the web browser to see the following
	console.log("date with date ordinal: "+myDate.getDateWithDateOrdinal()+" "+myDate.getMonthName()+" "+myDate.getFullYear());

    // or I will update the Div. using jQuery
    $('#date').html("date with date ordinal: "+myDate.getDateWithDateOrdinal()+" "+myDate.getMonthName()+" "+myDate.getFullYear());
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p id="date"></p>
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-10-14T19:49:46.337

正如许多人提到的，这是另一个答案。

这直接基于**@kennebec**的回答，我找到了最简单的方法来获取为给定日期生成的**Ordinal**`JavaScript`日期：

**我创建了两个`prototype function`如下：**

```
Date.prototype.getDateWithDateOrdinal = function() {
    var d = this.getDate();  // from here on I've used Kennebec's answer, but improved it.
    if(d>3 && d<21) return d+'th';
    switch (d % 10) {
        case 1:  return d+"st";
        case 2:  return d+"nd";
        case 3:  return d+"rd";
        default: return d+"th";
    }
};

Date.prototype.getMonthName = function(shorten) {
    var monthsNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var monthIndex = this.getMonth();
    var tempIndex = -1;
    if (monthIndex == 0){ tempIndex = 0 };
    if (monthIndex == 1){ tempIndex = 1 };
    if (monthIndex == 2){ tempIndex = 2 };
    if (monthIndex == 3){ tempIndex = 3 };
    if (monthIndex == 4){ tempIndex = 4 };
    if (monthIndex == 5){ tempIndex = 5 };
    if (monthIndex == 6){ tempIndex = 6 };
    if (monthIndex == 7){ tempIndex = 7 };
    if (monthIndex == 8){ tempIndex = 8 };
    if (monthIndex == 9){ tempIndex = 9 };
    if (monthIndex == 10){ tempIndex = 10 };
    if (monthIndex == 11){ tempIndex = 11 };

    if (tempIndex > -1) {
        this.monthName = (shorten) ? monthsNames[tempIndex].substring(0, 3) : monthsNames[tempIndex];
    } else {
        this.monthName = "";
    }

    return this.monthName;
}; 
```

**注意：**只需将上述`prototype`功能包含在您的内部`JS Script`并按照如下所述使用它。

每当有`JS` **日期**时，我需要使用日期序号生成日期，我在该日期使用该原型方法，如下所示`JS` **：**

```
var myDate = new Date();
// You may have to check your JS Console in the web browser to see the following
console.log("date with date ordinal: "+myDate.getDateWithDateOrdinal()+" "+myDate.getMonthName()+" "+myDate.getFullYear());

// or I will update the Div. using jQuery
$('#date').html("date with date ordinal: "+myDate.getDateWithDateOrdinal()+" "+myDate.getMonthName()+" "+myDate.getFullYear()); 
```

它会打印出带有*日期序号*的日期，如以下**现场演示**所示：

```
 Date.prototype.getMonthName = function(shorten) {
		var monthsNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
		var monthIndex = this.getMonth();
		var tempIndex = -1;
	    if (monthIndex == 0){ tempIndex = 0 };
	    if (monthIndex == 1){ tempIndex = 1 };
	    if (monthIndex == 2){ tempIndex = 2 };
	    if (monthIndex == 3){ tempIndex = 3 };
	    if (monthIndex == 4){ tempIndex = 4 };
	    if (monthIndex == 5){ tempIndex = 5 };
	    if (monthIndex == 6){ tempIndex = 6 };
	    if (monthIndex == 7){ tempIndex = 7 };
	    if (monthIndex == 8){ tempIndex = 8 };
	    if (monthIndex == 9){ tempIndex = 9 };
	    if (monthIndex == 10){ tempIndex = 10 };
	    if (monthIndex == 11){ tempIndex = 11 };

	    if (tempIndex > -1) {
			this.monthName = (shorten) ? monthsNames[tempIndex].substring(0, 3) : monthsNames[tempIndex];
	    } else {
	    	this.monthName = "";
	    }

	    return this.monthName;
	};

    Date.prototype.getDateWithDateOrdinal = function() {
		var d = this.getDate();  // from here on I've used Kennebec's answer, but improved it.
	    if(d>3 && d<21) return d+'th';
	    switch (d % 10) {
            case 1:  return d+"st";
            case 2:  return d+"nd";
            case 3:  return d+"rd";
            default: return d+"th";
        }
	};

	var myDate = new Date();
    // You may have to check your JS Console in the web browser to see the following
	console.log("date with date ordinal: "+myDate.getDateWithDateOrdinal()+" "+myDate.getMonthName()+" "+myDate.getFullYear());

    // or I will update the Div. using jQuery
    $('#date').html("date with date ordinal: "+myDate.getDateWithDateOrdinal()+" "+myDate.getMonthName()+" "+myDate.getFullYear());
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p id="date"></p>
```

.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-28T08:56:42.243

```
function getSuffixForDate(day) {
  const lastNumberOfTheDay = day[day.length];

  const suffixes = {
    1: () => 'st',
    21: () => 'st',
    31: () => 'st',
    2: () => 'nd',
    22: () => 'nd',
    3: () => 'rd',
    23: () => 'rd',
  };

  return suffixes[lastNumberOfTheDay] !== undefined ? `${day}${suffixes[lastNumberOfTheDay]()}` : `${day}th`;
}

const date = new Date();
const formattedDate = `${getSuffixForDate(date.getDate())} ${monthNames[date.getMonth()]} ${date.getFullYear()}`; 
```

人类可读的版本...

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-14T19:33:11.043

一个简短而紧凑的解决方案：

```
function format(date, tmp){
  return [
    (tmp = date.getDate()) + 
      ([, 'st', 'nd', 'rd'][/1?.$/.exec(tmp)] || 'th'),
    [ 'January', 'February', 'March', 'April',
      'May', 'June', 'July', 'August',
      'September', 'October', 'November', 'December'
    ][date.getMonth()],
    date.getFullYear()
  ].join(' ')
}

// 14 days from today

console.log('14 days from today: ' + 
  format(new Date(+new Date + 14 * 864e5)));

// test formatting for all dates within a month from today

var day = 864e5, today = +new Date;
for(var i = 0; i < 32; i++) {
  console.log('Today + ' + i + ': ' + format(new Date(today + i * day)))
}
```

（用于获取序数后缀的紧凑型基于正则表达式的方法[出现在网络上的](https://codegolf.stackexchange.com/questions/4707/outputting-ordinal-numbers-1st-2nd-3rd) [多个](https://gist.github.com/furf/986113/c9772d6001db2120a1307634906419ee1f179f69) [地方](http://www.perlmonks.org/bare/?node_id=503217)，原始来源未知）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-14T13:08:18.603

这是一个可读的 ES+ 版本。

```
const getDateSuffix = (date) => {
  const thExpections = date => [11, 12, 13].some(exception => exception === date);
  const lastDigit = date % 10;

  if (thExpections(date) || lastDigit === 0 || lastDigit > 3) return `${date}th`;
  if (lastDigit === 1) return `${date}st`;
  if (lastDigit === 2) return `${date}nd`;
  return `${date}rd`;
};

const monthNames = [
  "January",
  "February",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December",
];

const twoWeeksFromNow = new Date(+new Date + 12096e5);
console.log(`Two weeks from now: ${getDateSuffix(twoWeeksFromNow.getDate())} ${monthNames[twoWeeksFromNow.getMonth()]} ${twoWeeksFromNow.getFullYear()}`)

console.log(`
=================
Test date suffixes:`);
const logOutDates = new Array(31).fill(0).forEach((_, index) => console.log(getDateSuffix(index + 1)))
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-01-26T11:26:03.220

**受到@user2309185**的强烈启发。

```
const ordinal = (d) => {
  return d + (['st', 'nd', 'rd'][d % 10 - 1] || 'th')
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2016-07-19T03:50:08.153

超级简单的功能实现：

```
const ordinal = (d) => {
  const nth = { '1': 'st', '2': 'nd', '3': 'rd' }
  return `${d}${nth[d] || 'th'}`
}

const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December']

const dateString = (date) => `${ordinal(date.getDate())} ${monthNames[date.getMonth()]} ${date.getFullYear()}`

// Use like this: 
dateString(new Date()) // 18th July 2016 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-01-07T06:00:02.183

这是一个简单的解决方案：

```
var date = today.getDate() + (today.getDate() % 10 == 1 && today.getDate() != 11 ? + 'st': (today.getDate() % 10 == 2 && today.getDate() != 12 ? + 'nd': 

(today.getDate() % 10 == 3 && today.getDate() != 13 ? + 'rd':'th'))); 
```

# php - 在 PHP 中“渲染”视图文件的最简单/最快的方法

> ID：15397376
> 
> 赞同：0
> 
> 时间：2013-03-13T22:03:10.033
> 
> 标签：php, templates

假设我有一个名为 MyView.php 的简单视图文件：

```
<!DOCTYPE html>
<html>
    <head>
        <title><?=$title?></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
                    <?=$cotent?>
    </body>
</html> 
```

我的代码中有一个方法叫做`render()`：

```
<?
function render($data)
{

}
?> 
```

我需要`MyView.php`从那里调用`$title`并将`$cotent`变量传递给它。

我知道有一种方法可以做到这一点，只需替换`<title><?=$title?></title>`为，比如说，`<title>{TITLE}</title>`然后`render($data)`只需加载`MyView.php`到变量中，然后`preg_replace()`将所有内容替换`{BLAH}`为`$blah`.

有没有其他简单的方法可以做到这一点？

不得使用框架。一切从头开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:07:58.100

是的。从我的个人图书馆：

```
function renderTemplate($tmpl, $__vars=array()) {
    extract($__vars, EXTR_SKIP);
    include($tmpl);
}

renderTemplate("MyView.php", array( "title" => "My Title", "content" => "My Content" )); 
```

如果你想渲染成一个字符串，你可以稍微修改一下：

```
function renderTemplateToString($tmpl, $__vars=array()) {
    ob_start();
    extract($__vars, EXTR_SKIP);
    include($tmpl);
    return ob_get_clean();
} 
```

Note that `renderTemplate()` needs to be kept in its own function, even if you're only calling it once: it's using the function's variable scope to keep template variables separate from other variables.

# algorithm - time.h / ctime 记录真实世界时间的问题

> ID：15397380
> 
> 赞同：0
> 
> 时间：2013-03-13T22:03:27.133
> 
> 标签：algorithm, sorting, ctime, time.h

我目前在排序算法中遇到计时器问题，我正在使用冒泡排序。

我需要计时器记录我的算法运行的时间，因为它正在考虑用户打开程序并将值输入程序的时间（我不想要）

我决定将计时器开始移到需要用户输入的位置并且实时获得 0，这是不正确的。

有谁知道如何解决这一问题？

（请注意下面的代码不会构建 - 只需关注计时器及其开始/结束的位置）

```
#include <stdio.h>
#include <time.h>

int main()
{
  int array[100], n, c, d, swap;

  printf("Enter number of elements\n");
  scanf("%d", &n);

  printf("Enter %d integers\n", n);

  for (c = 0; c < n; c++)
    scanf("%d", &array[c]);

    clock_t t;     
    t = clock();    // timer starts here

  for (c = 0 ; c < ( n - 1 ); c++)
  {
    for (d = 0 ; d < n - c - 1; d++)
    {
      if (array[d] > array[d+1]) /* For decreasing order use < */
      {
        swap       = array[d];
        array[d]   = array[d+1];
        array[d+1] = swap;
      }
    }
  }

  t = clock() - t; // ends timer

      printf("Sorted list in ascending order:\n");

      for ( c = 0 ; c < n ; c++ )
         printf("%d\n", array[c]);

      return 0;
        } 
```

# jsf - UIInput 的 isLocalValueSet 在自定义验证器中始终返回 true

> ID：15397381
> 
> 赞同：0
> 
> 时间：2013-03-13T22:03:34.307
> 
> 标签：jsf, jsf-2, icefaces

我编写了一个自定义验证器来验证所有表单字段。我正在使用 Incefaces 3.2 和 JSF 2.0。我注意到整数类型的 UIInput 上有多个问题。如果我没有在表单上输入任何数据并单击提交，我可以使用 myUIInput.getValue() 检查自定义验证器中的字段值并触发所需的验证。

当我在字段中输入一些值并提交时，我在我的自定义验证器中使用 getSubmittedValue() 来验证它。到目前为止，一切都很好。当我从 UI 中删除字段中的值（将其清空）并​​提交时，getValue() 仍保留旧值。isLocalValueSet() 总是返回 null。

第一次触发验证后，我尝试重置以下内容。它也没有帮助。

```
 myInput.setValue(null);
        myInput.setSubmittedValue(null);
        myInput.setLocalValueSet(false); 
```

如何将我的字段状态重置为初始值？触发验证后如何正确设置 isLocalValueSet()？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:36:34.503

JSF 组件按照它们在组件树中出现的顺序进行验证。鉴于您正在使用`getSubmittedValue()`，这仅意味着您的自定义验证器在处理任何组件*之前被触发。*也许您已将验证器附加到表单开头的隐藏输入中。

因此，这意味着当您的自定义验证器完成时，JSF 将继续处理组件树中的所有后续组件，从而以“通常的方式”对每个单独的组件重做整个验证过程，从而覆盖您从自定义操作中操作的组件状态验证器开启。

我不确定具体的功能要求是什么以及为什么需要这样处理它，这有点臭，但理论上你可以通过在处理完所有组件*后触发自定义验证器来解决它。*并处理`getValue()`而不是`getSubmittedValue()`. 同样，具体的功能要求太不清楚，无法提出任何设计改进。

# r - 考虑两个变量匹配两个数据帧具有相同的水平

> ID：15397385
> 
> 赞同：3
> 
> 时间：2013-03-13T22:03:49.490
> 
> 标签：r

亲爱的，我有一个问题，我有两个这样的数据框：

```
z=data.frame(x1=c(1,2,5,4,9,1,4,2,9,21),x2=c(2,2,2,4,8,9,1,9,1,1),x3=c("a","b","b","a","a","b","b","b","a","a"))
z1=data.frame(y=c("a","b"),x=c("protein","cell")) 
```

考虑到 z1 的 y 中的级别与 z 的 x3 中的级别相同，我一直在尝试将 z 与 z1 匹配，并且我想要一个新列来显示所有数据框 z 中 z1 的变量 z。我想要一些这样的；我使用了匹配，但我没有得到那个结果。

```
 x1 x2 x3   N
1   1  2  a protein
2   2  2  b    cell
3   5  2  b    cell
4   4  4  a protein
5   9  8  a protein
6   1  9  b    cell
7   4  1  b    cell
8   2  9  b    cell
9   9  1  a protein
10 21  1  a protein 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:08:08.630

你正在寻找`merge`

您可以适当地设置`by.y`，`by.x`因为它们在两列中没有相同的名称

```
merge(z,z1,by.y='y', by.x = 'x3')
   x3 x1 x2       x
1   a  1  2 protein
2   a 21  1 protein
3   a  4  4 protein
4   a  9  8 protein
5   a  9  1 protein
6   b  5  2    cell
7   b  2  2    cell
8   b  4  1    cell
9   b  2  9    cell
10  b  1  9    cell 
```

* * *

使用`match`类似的东西

```
z$x <- z1[match(z$x3,z1$y),'x']
z
   x1 x2 x3       x
1   1  2  a protein
2   2  2  b    cell
3   5  2  b    cell
4   4  4  a protein
5   9  8  a protein
6   1  9  b    cell
7   4  1  b    cell
8   2  9  b    cell
9   9  1  a protein
10 21  1  a protein 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:20:30.980

这种方法使用包`qdap`：

```
library(qdap)
z$N <- z$x3 %l% z1 
```

**产量：**

```
> z
   x1 x2 x3       N
1   1  2  a protein
2   2  2  b    cell
3   5  2  b    cell
4   4  4  a protein
5   9  8  a protein
6   1  9  b    cell
7   4  1  b    cell
8   2  9  b    cell
9   9  1  a protein
10 21  1  a protein 
```

# r - R中的并行优化

> ID：15397390
> 
> 赞同：21
> 
> 时间：2013-03-13T22:04:16.430
> 
> 标签：r, optimization, parallel-processing

我在具有 8 个多核处理器的 linux 机器上运行 R，并且有一个优化问题，我想通过并行化优化例程本身来加速。重要的是，这个问题涉及 (1) 多个参数，以及 (2)*固有的缓慢*模型运行。一个相当普遍的问题！

有人知道这种情况下的*并行优化器*吗？

更具体地说，求解器喜欢`nlm()`在算法每次在参数空间中迈出一步时运行多个模型评估（每个参数值两个），因此在这些情况下并行化多个模型运行的实例将大大加快速度。健康。

似乎使用该包的代码`parallel`可以以这样一种方式编写，即用户必须进行*最少的*代码修改才能从使用`nlm()`或`optim()`转移到这个并行优化例程。也就是说，似乎可以基本上不做任何更改地重写这些例程，除了多次调用模型的步骤（这在基于梯度的方法中很常见）将并行完成。

理想情况下，像 nlmPara() 这样的东西会采用看起来像

```
fit <- nlm(MyObjFunc, params0); 
```

并且只需要很小的修改，例如，

```
fit <- nlmPara(MyObjFunc, params0, ncores=6); 
```

想法/建议？

PS：我已经采取措施加速这些模型运行，但由于各种原因它们很慢（即我不需要关于加速模型运行的建议！;-)）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T03:04:20.327

这是一个粗略的解决方案，至少有一些希望。非常感谢 Ben Bolker 指出许多/大多数优化例程允许用户指定的梯度函数。

具有更多参数值的测试问题可能会显示出更显着的改进，但在 8 核机器上，使用并行梯度函数的运行时间大约是串行版本的 70%。请注意，这里使用的粗略梯度近似似乎会减慢收敛速度，因此会增加一些时间。

```
## Set up the cluster
require("parallel");
.nlocalcores = NULL; # Default to "Cores available - 1" if NULL.
if(is.null(.nlocalcores)) { .nlocalcores = detectCores() - 1; }
if(.nlocalcores < 1) { print("Multiple cores unavailable! See code!!"); return()}
print(paste("Using ",.nlocalcores,"cores for parallelized gradient computation."))
.cl=makeCluster(.nlocalcores);
print(.cl)

# Now define a gradient function: both in serial and in parallel
mygr <- function(.params, ...) {
  dp = cbind(rep(0,length(.params)),diag(.params * 1e-8)); # TINY finite difference
  Fout = apply(dp,2, function(x) fn(.params + x,...));     # Serial 
  return((Fout[-1]-Fout[1])/diag(dp[,-1]));                # finite difference 
}

mypgr <- function(.params, ...) { # Now use the cluster 
  dp = cbind(rep(0,length(.params)),diag(.params * 1e-8));   
  Fout = parCapply(.cl, dp, function(x) fn(.params + x,...)); # Parallel 
  return((Fout[-1]-Fout[1])/diag(dp[,-1]));                  #
}

## Lets try it out!
fr <- function(x, slow=FALSE) { ## Rosenbrock Banana function from optim() documentation.
  if(slow) { Sys.sleep(0.1); }   ## Modified to be a little slow, if needed.
  x1 <- x[1]
  x2 <- x[2]
  100 * (x2 - x1 * x1)^2 + (1 - x1)^2
}

grr <- function(x, slow=FALSE) { ## Gradient of 'fr'
  if(slow) { Sys.sleep(0.1); }   ## Modified to be a little slow, if needed.
  x1 <- x[1]
  x2 <- x[2]
  c(-400 * x1 * (x2 - x1 * x1) - 2 * (1 - x1),
    200 *      (x2 - x1 * x1))
}

## Make sure the nodes can see these functions & other objects as called by the optimizer
fn <- fr;  # A bit of a hack
clusterExport(cl, "fn");

# First, test our gradient approximation function mypgr
print( mypgr(c(-1.2,1)) - grr(c(-1.2,1)))

## Some test calls, following the examples in the optim() documentation
tic = Sys.time();
fit1 = optim(c(-1.2,1), fr, slow=FALSE);                          toc1=Sys.time()-tic
fit2 = optim(c(-1.2,1), fr, gr=grr, slow=FALSE, method="BFGS");   toc2=Sys.time()-tic-toc1
fit3 = optim(c(-1.2,1), fr, gr=mygr, slow=FALSE, method="BFGS");  toc3=Sys.time()-tic-toc1-toc2
fit4 = optim(c(-1.2,1), fr, gr=mypgr, slow=FALSE, method="BFGS"); toc4=Sys.time()-tic-toc1-toc2-toc3

## Now slow it down a bit
tic = Sys.time();
fit5 = optim(c(-1.2,1), fr, slow=TRUE);                           toc5=Sys.time()-tic
fit6 = optim(c(-1.2,1), fr, gr=grr, slow=TRUE, method="BFGS");    toc6=Sys.time()-tic-toc5
fit7 = optim(c(-1.2,1), fr, gr=mygr, slow=TRUE, method="BFGS");   toc7=Sys.time()-tic-toc5-toc6
fit8 = optim(c(-1.2,1), fr, gr=mypgr, slow=TRUE, method="BFGS");  toc8=Sys.time()-tic-toc5-toc6-toc7

print(cbind(fast=c(default=toc1,exact.gr=toc2,serial.gr=toc3,parallel.gr=toc4),
            slow=c(toc5,toc6,toc7,toc8))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-03T18:39:53.063

我是 R 包**optimParallel**的作者。它提供了基于梯度的优化方法的并行版本`optim()`。该包的主要功能是`optimParallel()`，其用法和输出与`optim()`. 使用`optimParallel()`可以显着减少优化时间，如下图所示（`p`是参数的数量）。

[![在此处输入图像描述](../Images/f5c791d4f97d811d06c9dcc59eeff5d3.png)](https://i.stack.imgur.com/XIjk9.png)

有关更多信息，请参阅[https://cran.r-project.org/package=optimParallel](https://cran.r-project.org/package=optimParallel)和[http://arxiv.org/abs/1804.11058](http://arxiv.org/abs/1804.11058)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-07T21:24:15.603

由于您尚未接受答案，因此这个想法可能会有所帮助：对于全局优化，该软件包`DEoptim()`具有用于并行优化的内置选项。好消息是，它易于使用并且文档编写得很好。

cf [http://www.jstatsoft.org/v40/i06/paper](http://www.jstatsoft.org/v40/i06/paper)（目前关闭）

[http://cran.r-project.org/web/packages/DEoptim/index.html](http://cran.r-project.org/web/packages/DEoptim/index.html)

注意：差分 Evolglobal 优化器可能仍会遇到本地优化器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:46:17.743

I used the package doSNOW to run a code on 8 cores. I can just copy&paste the part of the code that refers to this package. Hope it helps!

```
 # use multicore libraries
      # specify number of cores to use
    cores<- 8
      cluster <- makeCluster(cores, type="SOCK")
      registerDoSNOW(cluster)

      # check how many cores will be used
      ncores <- getDoParWorkers()
    print(paste("Computing algorithm for ", cores, " cores", sep=""))
      fph <- rep(-100,12)

      # start multicore cicle on 12  subsets
      fph <- foreach(i=1:12, .combine='c') %dopar% {
        PhenoRiceRun(sub=i, mpath=MODIS_LOCAL_DIR, masklocaldir=MASK_LOCAL_DIR, startYear=startYear, tile=tile, evismoothopt=FALSE)
      }

  stopCluster(cluster) # check if gives error
  gc(verbose=FALSE) 
```

# xcode - 界面生成器中的扭曲视图。这怎么可能？

> ID：15397391
> 
> 赞同：1
> 
> 时间：2013-03-13T22:04:18.220
> 
> 标签：xcode, cocoa, interface-builder

刚刚在 itnerface 构建器文件中看到了这一点。如何才能做到这一点？这是界面生成器的一些超级秘密隐藏功能吗？

![在此处输入图像描述](../Images/a94a5e37a0897a6de051d789540790d3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:00:36.823

Looks like the "Bump Distortion" content filter. See the View Effects panel in IB (furthest right, looks like a stack of layers):

![enter image description here](../Images/2f4b56f1ef13f8cf6e642194082052ce.png)

# php - 从 csv 文件 php 创建关联数组

> ID：15397392
> 
> 赞同：0
> 
> 时间：2013-03-13T22:04:20.687
> 
> 标签：php, arrays, associative-array

我正在尝试读取一个 csv 文件，然后将第一列和第 21 列存储在关联数组中，以使第 1 列成为键，第 21 列成为值。

稍后我想根据“键”提取记录。包含代码的 PHP 文件是 upload.php

```
$calls = array();
$file_handle = fopen($C1.".File.csv","r"); // $C1 is defined before.
 //Just appending something to the file name. This file exists. 
while (!feof($file_handle) ) {
    $line= fgetcsv($file_handle, 1024);
    $calls[$line[0]] = $line[20]; //Line 94 of this file

}
fclose($file_handle);
print_r($calls); 
```

我收到这个错误

```
Undefined offset: 20 in upload.php on line 94 
```

我哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:11:52.730

零索引数组中的第 20 个“列”将是`$line[19]`

根据您的评论更新（以及后续编辑）：

错误在未设置循环期间的某个时间点清楚地指出`$line[20]`- 如果每行都有适当数量的列，那么我能想到的唯一另一个原因是 CSV 文件末尾有一个空行。

例如。

```
1\.  foo, bar, baz
2\.  a  , b  , c
3\.                    <-- empty line as a result of carriage return 
```

所以......您想在`trim($line)!=''`之前`fgetcsv`和/或作为良好错误处理检查的一部分检查数组的长度是否大于您尝试读取的最高索引。

# android - 在两个片段之间拖放？

> ID：15397395
> 
> 赞同：10
> 
> 时间：2013-03-13T22:04:46.853
> 
> 标签：android, drag-and-drop, android-animation

我有一个特殊的要求，我需要在一个屏幕中拖动一个元素，然后另一个片段变得可见，我可以在其中放置拖动的视图。

实现这一目标的最佳方法是什么？我不确定如何在两个片段之间实现这种行为。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T09:19:13.827

我们需要了解的基础知识是这些用于拖放的常量，它们都适用于活动和片段

> **DragEvent.ACTION_DRAG_STARTED**
> 
> **DragEvent.ACTION_DRAG_ENTERED**
> 
> **DragEvent.ACTION_DRAG_EXITED**
> 
> **DragEvent.ACTION_DROP**
> 
> **DragEvent.ACTION_DRAG_ENDED**

现在您需要在 DragEvent.ACTION_DRAG_ENTERED OR STARTED 上使片段可见

[http://www.vogella.com/tutorials/AndroidDragAndDrop/article.html](http://www.vogella.com/tutorials/AndroidDragAndDrop/article.html)

在这里，我给您留下了一些好的链接....

[https://blahti.wordpress.com/2012/03/03/improved-drag-drop-for-gridview/](https://blahti.wordpress.com/2012/03/03/improved-drag-drop-for-gridview/)

# multithreading - 暂停我的应用程序而不停止显示

> ID：15397397
> 
> 赞同：-1
> 
> 时间：2013-03-13T22:04:55.690
> 
> 标签：multithreading, sleep, thread-sleep

我试图让我的应用程序等待 5 秒钟。但是，如果我在创建的线程中使用 sleep() 或 wait() 并不重要，我的屏幕总是变白，并且在 5 秒后它会做它应该做的事情。如何让应用程序等待而不暂停屏幕显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:09:59.220

您应该考虑实现某种计时器，而不是睡眠或等待。这将允许渲染和其他事情在您的计时器完成时继续。

教程在这里： [倒数计时器ios教程？](https://stackoverflow.com/questions/17145112/countdown-timer-ios-tutorial)

# mercurial - Mercurial - 查看修改文件中特定行的所有变更集

> ID：15397398
> 
> 赞同：6
> 
> 时间：2013-03-13T22:04:57.477
> 
> 标签：mercurial, tortoisehg

Annotate 可以让您看到对该行的最新更改，如果该更改是合并，那么我别无选择，只能浏览修订历史并找到下一次修改的时间。

我也试过`hg grep -l '[contents of line]'`但是：

*   a）我不知道如何定位特定文件（因此在中等大小的仓库中需要很长时间）
*   b）它似乎只返回最后一个修订号

以下链接大致相似 - [如何找到修改了对函数的引用的所有变更集？](https://stackoverflow.com/questions/5669315/how-to-find-all-changsets-where-a-reference-to-a-function-was-modified)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T02:05:42.957

使用 Tortoisehg：

1.  查看 -> 清单
2.  右键单击感兴趣的文件，然后单击“文件历史记录”
3.  单击“使用修订号注释”

顶部面板允许您快速查看文件提交的历史记录，底部面板显示基于顶部面板中所选版本的注释文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-21T12:59:44.247

在没有额外脚本的情况下使用 arielf 的响应：

UNIX：

*   命令：

    ```
     hg log --template '{rev}\n' <FILE> | 
           xargs -I @ hg grep <PATTERN> -r @ <FILE> 
    ```

*   您可以使用它为配置文件 (.hgrc) 添加别名：

    ```
     [alias]
      _grep_line_in_history = ! $HG log --template '{rev}\n' $2 | 
           xargs -I @ hg grep '$1' -r @ $2 
    ```

视窗：

*   命令：

    ```
     FOR /F "usebackq" %i IN (`hg log --template "{rev}\n" <FILE>`) DO
      @(echo %i & hg grep <PATTERN> -r %i <FILE>) 
    ```

*   别名：

    ```
     [alias]
      _grep_line_in_history = ! FOR /F "usebackq" %i IN 
           (`%HG% log --template "{rev}\n" "$2"`) DO @(echo %i & %HG% grep "$1" -r %i "$2") 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:42:19.753

我认为这需要一些（两步）编程。

下面的 shell 脚本对我来说效果很好。它打印修订和匹配的行。如果您只想要修订列表，您可以添加一个步骤以去除匹配的文本并仅保留修订前缀，并可能通过“sort -u”管道：

```
#!/bin/bash
#
# script to grep for a pattern in all revisions of a file
# Usage: scriptname 'pattern' filepath
#
function fatal() {
    echo "$@" 1>&2
    exit 1
}

function usage() {
    echo "$@" 1>&2
    fatal Usage: $0 pattern file
}

case "$1" in
    '') usage 'missing pattern to search for' ;;
    *)  Pat="$1" ;;
esac

if [ "$2" != '' ]; then
    File="$2"
else
    usage 'must pass file as 2nd argument'
fi

# -- generate list of revisions (change-sets) involving $File
for rev in `hg log --template '{rev}\n' $File`; do
    # -- grep the wanted pattern in that particular revision
    hg grep "$Pat" -r $rev $File
done 
```

笔记：

*   并非完全万无一失（例如模式中的引号）
*   我也不检查文件是否存在以支持重命名/删除的文件

# php - 使用 ./、../、.. 进行路径 - 它们对我的视图文件到底意味着什么？

> ID：15397401
> 
> 赞同：0
> 
> 时间：2013-03-13T22:05:08.603
> 
> 标签：php, html

当我将网站移动到子文件夹时，我总是担心路径问题，因为我不知道如何用 PHP 处理它。

我想通过一个例子来学习这一点，因为我可以通过查看例子轻松地学习它。

假设我有一个网站在此目录中运行：`httpdocs/development/subfolder/myWebsite/index.php`

默认情况下，PHP 会运行`httpdocs/index.php`，所以它是根路径，但我的网站在子文件夹中运行。

在我网站的 index.php 中（所以我们在一个子文件夹中）如何确保我指向正确的文件夹？

```
<img src="images/1.jpg"> // Does no dot means root path?

<img src="./images/1.jpg"> //Does ./ means which_directory_our_php_page_currently_in/images?

<a href="./"> // Points /subfolder/myWebsite/ or httpdocs/ ?

<a href=".."> //Same as above, but no front slash.

<a href=""> //Same as above 
```

我不想定义或 const 来使用 PHP 跟踪它并在我移动文件时更改它。像：

```
define('SITE_PATH', './development/subfolder/myWebsite/'); 
```

尤其是当它涉及时`DIRECTORY_SEPARATOR`，事情只会变得更加混乱。

我想知道如何专业地用 PHP 处理它；`和有什么区别`./`？最后是什么`..`意思没有正斜杠。`

 `谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:08:16.130

您示例中的所有路径都是相对的，这意味着它们基于当前位置。以 a 开头的路径`/`意味着它是基于站点根目录的绝对路径。

如果您想始终 100% 确定您所引用的内容，请使用`/`路径前面的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:24:06.753

在 UNIX 系统中，在当前目录中`'./dirName'`查找子目录；仅指当前位置。换句话说，等价于。但是，您不要在 href 中使用它：对于相对于当前位置的路径，不要使用前面的.`dirName``.``./dirName``'dirName'``.`

`'../dirName'``dirName`在当前目录的父目录中查找子目录。`..`指父目录。

如果文件路径以正斜杠开头，则它指的是根目录。`'/dirName'`指`dirName`位于根目录内的子目录。`

# iphone - 是否可以使用 xcode 中的 gdb 在越狱 iphone 中调试其他应用程序？远程调试？

> ID：15397403
> 
> 赞同：4
> 
> 时间：2013-03-13T22:05:16.160
> 
> 标签：iphone, ios, gdb, jailbreak

是否可以使用 xcode 中的 gdb 在越狱 iphone 中调试其他应用程序？远程调试？没有任何版本的 gdb 可与 ios 6.1 一起使用...在 ios 6.1 中使用 gdb 的其他方法有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:14:24.813

您必须在您的 iDevice 上安装调试服务器 (iphonedevwiki.net/index.php/Debugserver) 才能远程调试应用程序。使用 IDA，您可以将“远程 gdb 调试器”附加到 iDevice 上运行的调试服务器。我已经让它与 IDA 连接到调试服务器，不幸的是，这就是它的进展。IDA 的远程 gdb 调试器中的某些内容与发送命令不兼容。我认为这与这个（sourceware.org/gdb/onlinedocs/gdb/Darwin.html）有关，它描述了必须设置gdb来调试darwin。IDA 不这样做，因此它不能与 iDevice 上运行的调试服务器正确同步。虽然使用本机 gnu gdb 客户端是可行的，但我认为缺少 GUI 是乏味的，让它在 IDA 中工作会很棒。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:08:08.707

In order to debug iphone apps on ios6, you need to use gdb. im not sure what you mean by when you ask if ida can do that. IDA disassembles an IDA file. to decrypt it, you must crack the app using clutch or rasticrac on iPhone. in order to debug, you have to use GDB. Yes, all of these CAN be done on ios 6.1 jailbroken.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T21:42:25.917

Ida 不仅是一个反汇编器，它还是一个非常强大的调试器。不幸的是，它似乎无法使用调试服务器进行远程调试。

# java - 将数组的整数添加到某个数字（java）

> ID：15397405
> 
> 赞同：0
> 
> 时间：2013-03-13T22:05:41.850
> 
> 标签：java

我有一个java问题。

我有两个`int[]`数组：`cdn`和`cmn`.
`cdn`是 我需要一个程序，将 upto 的连续整数相加`{1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}`
`cmn`并返回加法中使用的整数个数。然后它从upto的下一个整数继续相加并返回整数个数。对于上面的数组，这样做了 3 次：第一次返回值为 7，第二次返回值为 7，第三次返回值为 16。可以收集的整数个数为. 我的代码是：`{8,8,16}`
`cdn[]``cmn[init]``cdn[]``cmn[init+1]``int[]``{7,7,16}`

```
int numofints = 0;
int init = 0;
int plus = 0;
while(init < m2){
 for(int j = 0; j < cdn.length; j++){
    plus += cdn[j];
    numofints++;
  if(plus == cmn[init]){
   init++;
  }
 }
}
System.out.print(numofints); 
```

其中`m2`是 的大小`cmn`，在这种情况下为 3。请注意，我的程序从头开始`cdn`一遍又一遍地循环，因为`j = 0`. 我希望它从上次结束的地方开始！我希望你有我的解决方案。

比约恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:14:15.920

只需拉出`j`外循环，并使用 a`while`代替`for`, 用于内循环

你还需要放入`plus = 0`循环中

```
public class T {
  public static void main(String[] args) {
    int[] cdn = {1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};
    int[] cmn = {8,8,16};

    int numofints = 0;
    int init = 0;
    int m2 = 3;

    int j = 0;
    while(init < m2){
     int plus = 0;
     while(j < cdn.length){
        plus += cdn[j];
        j++;
        numofints++;
        if(plus == cmn[init]){
          init++;
          System.out.println(j);
          break;
        } 
      }
    if (j == cdn.length) break;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:36:40.390

不`if(plus == cmn[init]){`应该`if(plus >= cmn[init])`吗？如果您完全更改 cdn 并且“加号”恰好超过“cmn [init]”，那么您的代码将会中断。

# c# - Combobox SelectedItem 属性始终返回并始终显示第一项

> ID：15397407
> 
> 赞同：0
> 
> 时间：2013-03-13T22:05:47.820
> 
> 标签：c#, winforms, combobox, selecteditem

我有 3 个组合框`ObjetivosCB`，`FrecuenciasCB`并且`ResponsablesCB`在我的表单中如下所示

```
public partial class Form_Indicador : Form
{
    public Indicador Indicador { get; set; }
    private void Form_AgregarIndicador_Load(object sender, EventArgs e)
    {
        if (Indicador == null)
            Indicador = new Indicador();

        ConfigurarObjetivosCB();
        ConfigurarFrecuenciasCB();
        ConfigurarResponsablesCB();

        CargarPropiedadesIndicador();
    }

    private void ConfigurarResponsablesCB()
    {
        ResponsableCB.DataSource = ResponsableRepository.Instance.All();
        ResponsableCB.DisplayMember = "Area";
        if (Indicador.Responsable == null) 
            ResponsableCB.SelectedIndex = -1;
    }

    private void ConfigurarFrecuenciasCB()
    {           
        FrecuenciasCB.DisplayMember = "Periodo";
        FrecuenciasCB.DataSource = IndicadorRepository.Instance.AllFrecuencias();       
        if (Indicador.Frecuencia == null) 
            FrecuenciasCB.SelectedIndex = -1;   
    }

    private void ConfigurarObjetivosCB()
    {
        ObjetivosCB.DataSource = _objetivoFachada.All();
        ObjetivosCB.DisplayMember = "Nombre";
        if (Indicador.Objetivo == null) ObjetivosCB.SelectedIndex = -1;
    }

    private void CargarPropiedadesIndicador()
    {            
        ObjetivosCB.DataBindings.Add("SelectedItem", Indicador, "Objetivo");
        ResponsableCB.DataBindings.Add("SelectedItem", Indicador, "Responsable");
        FrecuenciasCB.DataBindings.Add("SelectedItem", Indicador, "Frecuencia");
    } 
```

}

问题是，`FrecuenciasCB.SelectedItem`总是`ResponsablesCB.SelectedItem`显示并返回第一个项目，但`ObjetivosCB.SelectedItem`工作正常。我不明白...三种方法具有相同的逻辑。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:58:03.577

我已经解决了！问题是`Equals()`in`Indicador`和的定义错误`Frecuencia`。

# c++ - 重载模板函数

> ID：15397412
> 
> 赞同：0
> 
> 时间：2013-03-13T22:06:01.527
> 
> 标签：c++

目前，我在重载某个功能时遇到了一些困难。这是我的代码：

```
template<typename Value>
bool process(Value thisValue)
{
  return processAccordingToTheType(thisValue);
} 
```

所以，processAccordingToTheType有两个重载函数：

```
bool processAccordingToTheType(int thisValue){}
bool processAccordingToTheType(string thisValue){} 
```

当我尝试编译它时，它说：

```
error C2665: 'processAccordingToTheType' : none of the 2 overloads could convert all the argument types 
```

我需要做什么？

更新：

```
int main()
{
  int i = 1;
  process <int> (i);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:03:15.653

从您的示例代码中，我了解到您需要做两件事：

1.  调用特定类型的`process`函数
2.  限制这些调用`string`和`int`类型

将函数包装在`processAccordingToType`里面`process<T>`是完全多余的：`process<T>`实际上意味着“根据类型处理”。这里的关键字是“模板专业化”。您需要专门针对`int`和的“根据类型处理”方法`string`。

您可以按以下方式执行此操作：

```
#include <iostream>

using namespace std;

template<typename T>
bool process(T t)
{
    // call a Compile-Time Assertion 
    cout << "I don't want this to be called." << endl;
}

template <>
bool process<int>(int i)
{
    cout << "process(int) called." << endl;
}

template <>
bool process<string>(string s)
{
    cout << "process(string) called." << endl;
}

int main()
{
    process(1);
    process(string("s"));
    process(1.0d);
} 
```

输出：

```
process(int) called.
process(string) called.
I don't want this to be called. 
```

理想情况下，您希望防止您的 API 的用户`process`使用其他类型进行调用。不允许他们在运行时调用和处理它（就像在我的示例中所做的那样）是不可接受的。您可以通过编译时断言来实现这一点。阅读 Andrei Alexandrescu 的“Modern C++ Designs”，了解如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:19:06.160

查看模板专业化。做你正在寻找的东西，而不是根据类型推迟到另一个函数。

[http://www.cprogramming.com/tutorial/template_specialization.html](http://www.cprogramming.com/tutorial/template_specialization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:20:00.737

您可以使用非模板函数或另一个模板函数重载函数模板。确保无论你做什么，你都在增量测试，因为模板错误是出了名的难以理解。

[http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

```
#include <iostream>

using namespace std;

template <typename Value>
bool processAccordingToTheType( Value thisValue ){
    cout << "Generic Type" << endl;
    return false;
}

bool processAccordingToTheType(int thisValue){
    cout << "int type" << endl;
    return true;
}

template <typename Value>
bool process( Value thisValue ){
    return processAccordingToTheType(thisValue);
} 

int main( int argc, char* argv[] ){

    cout << process( 1 ) << endl;
    cout << process( "Hello" ) << endl;

    return 0;
} 
```

# inno-setup - InnoSetup - 编译时出现错误的“文件正在被另一个进程使用...”消息

> ID：15397414
> 
> 赞同：15
> 
> 时间：2013-03-13T22:06:11.843
> 
> 标签：inno-setup, file-in-use

虽然我真的很喜欢 InnoSetup，但我已经为这个错误的信息而苦恼了一段时间，但我的挫败感达到了新的高度。有很多帖子抱怨这个问题，这肯定是一个 InnoSetup 错误，但我找不到有用的解决方法。

我有一个非常简单（签名）的设置，它只是复制一些文件并创建一个快捷方式。它甚至不包括可执行文件。当我尝试编译设置时，我收到“该进程无法访问该文件，因为它正被另一个进程使用”消息 - 重复（通常我总是让设置在 3 次尝试内编译），但现在它似乎是徒劳的经过许多。许多尝试。InnoSetup 输出或错误对话框中无法清除“正在使用”的文件。绝对没有竞争的进程在运行。（我已经重新启动了机器，但仍然收到此消息）。

非常感谢有关如何解决此问题的任何想法。

这是完整的设置代码 - 它已签名，但这与我使用相同签名创建的其他设置没有问题。

```
#define MyAppName "Easy-IAP for IronKey"
#define MyAppVersion "4.0"
#define MyAppPublisher "Command Post Solutions"
#define MyAppURL "http://www.commandpostsolutions.com/"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{51668D56-27F6-4C83-87F2-677328EFE808}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName="\EZ-IAP"
DefaultGroupName={#MyAppName}
DisableProgramGroupPage=yes
OutputBaseFilename=IronKeySetup
SetupIconFile=C:\Users\ron\Dropbox\EZIAP\eziap.ico
Compression=lzma
SolidCompression=yes
SignedUninstaller=yes
SignTool=Standard /d $qEasy-IAP Installer$q $f                                                                   

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Files]
Source: "C:\Users\ron\Dropbox\Easy-IAP for IronKey\AccessDatabaseEngine.exe"; DestDir: "{app}"; Flags: onlyifdoesntexist
Source: "C:\Users\ron\Dropbox\Easy-IAP for IronKey\dotNetFx40_Full_x86_x64.exe"; DestDir: "{app}"; Flags: onlyifdoesntexist
Source: "C:\Users\ron\Dropbox\Easy-IAP for IronKey\Easy-IAP for IronKey\bin\Release\Easy-IAP for IronKey.exe"; DestDir: "{app}";
; NOTE: Don't use "Flags: ignoreversion" on any shared system les
[ICONS]
Name: "{drive:{app}}\Easy-IAP"; Filename: "{app}\Easy-IAP for IronKey.exe"; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-21T14:37:34.180

我有同样的问题。这是由于 McAfee 防病毒软件对正在编译的 exe 文件运行实时扫描...由于似乎无法从实时扫描中排除目录，我在 McAfee SecurityCenter 中将其关闭，现在它很好。希望这有帮助

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-26T15:35:55.973

问题通常是打开的资源管理器窗口正在查看输出文件所在的文件夹。

Explorer 在构建可执行文件时不断打开它，试图获取其图标和其他元数据。关闭所有正在查看输出文件夹的打开的资源管理器窗口，然后重试。

出于这个原因，您最好从命令行或 Visual Studio 或其他自动构建过程的一部分运行您的 inno 设置文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T12:42:24.887

这不是错误，这只是应用程序的糟糕设计（或糟糕的文档）:)

使用`OutputDir`您部分中的指令`[Setup]`来避免这种错误行为。

```
OutputDir=c:\output 
```

`OutputDir`指定脚本的“输出”目录，安装编译器将放置生成的`SETUP.*`文件。默认情况下，它会`Output`在包含此脚本的目录下创建一个名为的目录。

你问为什么？

如果你没有`OutputDir`在你的脚本文件中使用（而且很多人不使用它），Inno Setup 会尝试在“userdocs:”文件夹中创建生成的设置，这会在所有 Windows 系统上造成很多麻烦。

始终使用此参数，即使您想在当前文件夹中进行设置，在这种情况下使用：

```
OutputDir=output 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-09T14:56:45.990

我有 OutputDir = x:]setup 但错误仍然存​​在。如果我重新启动我的机器，然后作为第一个任务构建，那么构建工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-18T07:53:47.600

Win 7 Pro/64，InnoSetup 5.5.5(a)：我遇到了完全相同的 InnoSetup 编译问题。通过撤销共享更改项目中使用的文件夹属性和输出后，它们都可以正常工作。结论 - 最好不要在共享文件夹中使用 InnoSetup。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-13T03:53:43.423

当 OutputDir="." 时我有这个。（意思是，将输出与源文件放在同一目录中）。每隔一秒构建就会失败。

我通过添加修改我的 powershell 构建脚本以删除整个输出目录来修复它，然后构建我的应用程序（它自动创建了该目录），然后运行 ​​iscc 来创建 setup.exe

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-01T16:06:57.857

该错误可能是因为您尝试复制与 Windows 服务链接的文件夹。

要解决此问题，请使用`[Code]`部分而不是将文件夹放在 [Files] 中。这允许您检查该文件夹是否存在，关闭相关的 Windows 服务并最终复制该文件夹。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-13T07:07:51.517

我遇到了同样的问题，上面已经说明了解决方案，当您编译的 .exe 的输出文件在您从 inno setup 放置输出目录的目录中已经具有相同的名称时，出现此错误的另一个原因. 在编译时，您需要一些特殊字符，如“-”或“_”来创建文件名并避免出现此错误消息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-23T23:01:52.883

我在我的工作机器上尝试了各种文件夹，但没有解决问题。我终于通过使用成功了：

```
OutputDir=C:\Users\userid\Downloads 
```

（将“userid”替换为您的特定帐户）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-23T15:03:35.563

我尝试了上面的所有建议。我做不到。然后我从版本 6.2 切换回 6.0.2 并解决了问题。

# php - 无法从 JSON 中获取值

> ID：15397415
> 
> 赞同：2
> 
> 时间：2013-03-13T22:06:18.337
> 
> 标签：php, html, ajax, json

这是php中的代码

```
 <?php session_start();

 //Connect to database from here
    $link = mysql_connect('****', '****', '****'); 
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }
    //select the database | Change the name of database from here
    mysql_select_db('****'); 

//get the posted values
$user_name=htmlspecialchars($_GET['user_name'],ENT_QUOTES);
$pass=$_GET['password'];

//now validating the username and password
$sql="SELECT user_name, password FROM tbl_user WHERE user_name='".$user_name."'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);

//if username exists
if(mysql_num_rows($result)>0)
{
    //compare the password
    if(strcmp($row['password'],$pass)==0)
    {
        // Return success message
        $message = array("flag" => "1", "msg" => "Login successfully.");
        echo json_encode($message);
         //Regenerate session ID to prevent session fixation attacks
        //session_regenerate_id();

        //now set the session from here if needed
        //$_SESSION['u_name']=$user_name; 
        //$member=mysql_fetch_assoc($result);
        //$_SESSION['u_id']=$member['id'];
        //$name_show=$member['first_name'].' '.$member['last_name'];
        //$_SESSION['name']=$name_show;
            //Write session to disc
            //session_write_close();

        }
    else
        // Return error message
        $message = array("flag" => "0", "msg" => "Incorrect password.");
        echo json_encode($message);
}
else    //if username not exists
{       // Return error message
        $message = array("flag" => "0", "msg" => "Incorrect id.");
        echo json_encode($message);
}
mysql_close($link);     
?> 
```

这是html中的代码

```
 $.ajax({
                type: "get",
                url: "http://mydomain.com/ajax_login.php",
                data: {
                    user_name: $("#username").val(),
                    password: $("#password").val()
                },
                success: function(jsondata){

                    if (jsondata.flag == "0"){
                         //if flag is 0, indicate login fail
                    }
                    else {
                         //if flag is 1, indicate login success and redirect to another page
                        window.location.href = 'ABC.html';
                    }                       
                },
                datatype: "json"
            }); 
```

显示节目`"{\"flag\":\"0\",\"msg\":\"Incorrect id.\"}"`

我的问题是，现在即使标志为 0，它仍然转到 ABC.html 应该修改 if 子句，以便如果标志为 0，它仍将在子句的真实部分中？

编辑这是编码的更多细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:16:24.467

也许`jsondata.flag`是未定义的。
您需要解码响应字符串以将其用作 JS 对象。
或者设置`dataType : 'json'`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:17:10.990

请务必`dataType: "json"`在您的 jQuery ajax 方法中配置您的 ajax 调用，并确保在您的 PHP 响应中发送 JSON 标头，例如。

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
header("Content-type: application/json");
echo json_encode($yourArray); 
```

如果您没有正确配置您的 ajax 调用，则结果可能会被解释为一个简单的字符串。

# c# - UserPrincipal oUserPrincipal = UserPrincipal.FindByIdentity(ctx, found.DisplayName) 返回 null

> ID：15397417
> 
> 赞同：0
> 
> 时间：2013-03-13T22:06:31.643
> 
> 标签：c#, .net

不知道为什么会发生这种情况，但是当我运行此代码时，它可以在一台服务器上运行，但不能在另一台服务器上运行。

两台服务器都返回正确的 found.DisplayName，但是只有一台服务器返回 oUserPrincipal 的值，而另一台服务器返回空值。

错误行：

```
 UserPrincipal oUserPrincipal = UserPrincipal.FindByIdentity(ctx, found.DisplayName) returns null

        dynamic config = _getExpandoFromXml("config.xml");

        PrincipalContext ctx = new PrincipalContext(ContextType.Domain, config.activeDirectory.sDomain, config.activeDirectory.sDefaultOU,config.mailServer.user, config.mailServer.pass);
        UserPrincipal user = new UserPrincipal(ctx);

        PrincipalSearcher search = new PrincipalSearcher(user);
        Console.WriteLine("before foreach");
        foreach (Principal found in search.FindAll())
        {
            try{
                if (found.DisplayName == null)
                {
                    Console.WriteLine("found.Dispalyname is null");
                }
                else
                {    
                    Console.Write("Dispalyname: ");
                    Console.WriteLine(found.DisplayName);
                }
                UserPrincipal oUserPrincipal = UserPrincipal.FindByIdentity(ctx, found.DisplayName);
                Console.Write("looking for user: ");
                Console.WriteLine(found.DisplayName);
                Console.WriteLine("after findbyidentiy");
                if (oUserPrincipal == null)
                {
                    Console.WriteLine("oUserPrinciapal is null");
                }
                if (oUserPrincipal.LastPasswordSet == null)
                {
                    Console.WriteLine("lastpasswordset is null");
                }
                DateTime? dateOrNull = oUserPrincipal.LastPasswordSet;
                Console.WriteLine("after LastPasswordSet"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:19:50.977

FindByIdentity 只能搜索少数几个属性。这些是“ [IdentityType](http://msdn.microsoft.com/en-us/library/bb356425.aspx)枚举中包含的任何格式”。

Name 是一个有效选项，但 DisplayName 未列出，因此您可能会得到 DisplayName 和 Name 恰好相同的结果，否则它将失败。

使用：

```
var oUserPrincipal = UserPrincipal.FindByIdentity(ctx, found.Name); 
```

或者

```
var oUserPrincipal = UserPrincipal.FindByIdentity(ctx, found.SamAccountName); 
```

应该管用。

[FindByIdentity](http://msdn.microsoft.com/en-us/library/bb344891.aspx)还有一个三参数版本，可让您指定要搜索的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T18:23:39.880

就我而言，我发现问题在于它没有连接到 AD 服务器。如果我将鼠标悬停在 上`oPrincipalContext`，它的属性`ConnectedServer`表明它抛出了一个类型异常`System.DirectoryServices.DirectoryServicesCOMException`。如果发生这种情况，应该重新启动域控制器上的服务。我们发现它可能发生在高登录时间，因为我们的开发网络上只有 1 个 DC。

[![在此处输入图像描述](../Images/10307243b87fc329852b01f8bec37695.png)](https://i.stack.imgur.com/1quuK.jpg)

# go - Go——优雅地处理多个错误？

> ID：15397419
> 
> 赞同：13
> 
> 时间：2013-03-13T22:06:40.940
> 
> 标签：go

有没有办法清理这个（IMO）看起来很可怕的代码？

```
 aJson, err1 := json.Marshal(a)
bJson, err2 := json.Marshal(b)
cJson, err3 := json.Marshal(c)
dJson, err4 := json.Marshal(d)
eJson, err5 := json.Marshal(e)
fJson, err6 := json.Marshal(f)
gJson, err4 := json.Marshal(g)
if err1 != nil {
    return err1
} else if err2 != nil {
    return err2
} else if err3 != nil {
    return err3
} else if err4 != nil {
    return err4
} else if err5 != nil {
    return err5
} else if err5 != nil {
    return err5
} else if err6 != nil {
    return err6
} 
```

具体来说，我说的是错误处理。能够一口气处理所有错误会很好。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T22:21:02.900

```
var err error
f := func(dest *D, src S) bool {
    *dest, err = json.Marshal(src)
    return err == nil
} // EDIT: removed ()

f(&aJson, a) &&
    f(&bJson, b) &&
    f(&cJson, c) &&
    f(&dJson, d) &&
    f(&eJson, e) &&
    f(&fJson, f) &&
    f(&gJson, g)
return err 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-13T22:18:02.167

将结果放在一个切片而不是变量中，将初始值放在另一个切片中进行迭代，如果出现错误则在迭代期间返回。

```
var result [][]byte
for _, item := range []interface{}{a, b, c, d, e, f, g} {
    res, err := json.Marshal(item)
    if err != nil {
        return err
    }
    result = append(result, res)
} 
```

* * *

你甚至可以重用一个数组而不是两个切片。

```
var values, err = [...]interface{}{a, b, c, d, e, f, g}, error(nil)
for i, item := range values {
    if values[i], err = json.Marshal(item); err != nil {
        return err
    }
} 
```

当然，这需要一个类型断言来使用结果。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-13T22:28:14.163

定义一个函数。

```
func marshalMany(vals ...interface{}) ([][]byte, error) {
    out := make([][]byte, 0, len(vals))
    for i := range vals {
        b, err := json.Marshal(vals[i])
        if err != nil {
            return nil, err
        }
        out = append(out, b)
    }
    return out, nil
} 
```

你没有说你希望你的错误处理如何工作。失败一个，失败所有？第一个失败？收集成功还是扔掉它们？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-14T17:59:44.890

我相信这里的其他答案对于您的特定问题是正确的，但更一般地说，`panic`可以用来缩短错误处理，同时仍然是一个表现良好的库。（即，不`panic`跨越包边界。）

考虑：

```
func mustMarshal(v interface{}) []byte {
    bs, err := json.Marshal(v)
    if err != nil {
        panic(err)
    }
    return bs
}

func encodeAll() (err error) {
    defer func() {
        if r := recover(); r != nil {
            var ok bool
            if err, ok = r.(error); ok {
                return
            }
            panic(r)
        }
    }()

    ea := mustMarshal(a)    
    eb := mustMarshal(b)
    ec := mustMarshal(c)

    return nil
} 
```

`mustMarshal`每当封送`panic`值出现问题时，此代码都会使用。但是该`encodeAll`函数将从`recover`恐慌中返回，并将其作为正常的错误值返回。在这种情况下，客户端永远不会受到恐慌。

但这伴随着一个警告：在任何地方都使用这种方法是不习惯的。它也可能更糟，因为它不能很好地专门处理每个单独的错误，但或多或​​少地对待每个错误都是一样的。但是当有大量错误需要处理时，它就有它的用处。例如，我在 Web 应用程序中使用这种方法，其中顶级处理程序可以捕获不同类型的错误，并根据错误类型将它们适当地显示给用户（或日志文件）。

当有很多错误处理时，它会生成更简洁的代码，但会失去惯用的 Go 并专门处理每个错误。另一个缺点是它可以防止*应该*恐慌的东西真正恐慌。（但这可以通过使用您自己的错误类型轻松解决。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-03T14:05:02.427

您可以创建一个可重用的方法，然后仅在一个 if 条件下捕获错误。这个实现只会显示最后一个错误。

```
func hasError(errs ...error) error {
    for i, _ := range errs {
        if errs[i] != nil {
            return errs[i]
        }
    }
    return nil
}

aJson, err := json.Marshal(a)
bJson, err2 := json.Marshal(b)
cJson, err3 := json.Marshal(c)
dJson, err4 := json.Marshal(d)
eJson, err5 := json.Marshal(e)
fJson, err6 := json.Marshal(f)
gJson, err7 := json.Marshal(g)

if error := util.hasError(err, err1, err2, err3, err4, err5, err6, err7); error != nil {
    return error
} 
```

# django - Django在自己加入同一个表时查询

> ID：15397423
> 
> 赞同：3
> 
> 时间：2013-03-13T22:07:02.730
> 
> 标签：django, orm, self-join

我发现在我的工作中，我经常不得不自己加入同一张表，部分原因是我无法控制数据库设计，部分原因是大部分时间都需要非常定制的东西。

```
Select distinct t.label, z.dupCount
    From optevents t
    Join
      (select label, Count(*) dupCount
          from optevents 
          group By label
          Having Count(*) > 1) z
    On z.label = t.label
    where t.campaignId = 100
    order By dupCount Desc 
```

我很好奇如何将其转换为 Django ORM 查找？

模型定义非常简单，根本没有外键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:41:06.460

您应该能够通过混合[`annotate`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)和[`values`](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#values)

```
OptEvents \
    .objects \
    .filter(campaign__pk=100) \
    .values("label") \
    .annotate(dupCount=mod‌​els.Count("label")) \
    .order_by("dupCount") 
```

[这是 Daniel Roseman 的一篇很好的博客文章](http://blog.roseman.org.uk/2010/05/10/django-aggregation-and-simple-group/)

# objective-c - 对应一个带有数组槽的按钮

> ID：15397431
> 
> 赞同：0
> 
> 时间：2013-03-13T22:07:31.573
> 
> 标签：objective-c

我想在屏幕上放一堆与数组插槽相对应的按钮。例如，buttonA 对应于 myArray[3][28]。

我是否必须有大量这样的 else-if 语句：

```
else if (x == 3 && y == 28)
    //"it's buttonQ" code
else if (x == 3 && y == 29)
    //"it's buttonR" code 
```

或者，还有更好的方法？

注意：x 是二维数组 myArray 的“水平”索引，而 y 是它的“垂直”索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:47:13.893

我认为设计一个方案是可行的，您可以将位置用作数据方案的一部分。在我看来，这就是您正在做的事情，因为您将水平坐标与字母表中的字母相关联。

因此，您可以执行以下操作：

```
NSString *letters = @"ABCDEFGHIJKLMNOPQRSTUVXYZ";

...
else if (x == 3) {
   NSString *letter = [NSString stringWithFormat:@"%c"
                             [letters characterAtIndex:y-11]];
   // use letter in your code
}
... 
```

同样，您可以在更复杂的按钮矩阵中考虑到行的设备代码。

# c# - 为大尺寸和普通尺寸的 xml 功能区按钮添加两个图像

> ID：15397433
> 
> 赞同：5
> 
> 时间：2013-03-13T22:07:42.123
> 
> 标签：c#, xml, vsto, ribbon

我在 Ribbon XML 上有一个带有这样的自定义图像的按钮

```
<group id="MyGroup">
<button id="buttonTest" size="large" getImage="GetCustomImage" label="Test"/>
</group> 
```

```
public Bitmap GetCustomImage(Office.IRibbonControl control)
{
    return Resources.test; // test.png
} 
```

但是当用户在快速访问工具栏上添加这个按钮时，按钮变成正常大小。Office 调整大小图标，之后它看起来很难看。如何为大 (32x32) 和普通 (16x16) 尺寸的按钮添加两个图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T19:50:02.723

当按钮位于快速访问工具栏上时，是否会调用 GetCustomImage 方法？如果是这样，那么按照您的要求去做应该不会太难。您只需要知道按钮是在功能区还是在 QAT

## 但

如果那**不起作用**，我认为不可能按照您的要求进行操作。每个按钮只能有 1 个图像和 1 个与之关联的尺寸。

你可以做的是有 2 个按钮并切换哪个是可见的。并且用户可以确保将其添加`buttonNormal`到快速访问工具栏。我的意思是，这很丑陋，我不知道我是否会这样做。但是，如果丑陋的图标真的困扰着你，那就继续吧。

```
<group id="MyGroup">
    <button id="buttonLarge" size="large" image="largeImage" label="Test" getVisible="GetIsLargeButtonVisible"/>
    <button id="buttonNormal" size="normal" image="normalImage" label="Test" getVisible="GetIsNormalButtonVisible"/>
</group> 
```

然后在`GetIsNormalButtonVisible`and`GetIsLargeButtonVisible`方法中，您可以隐藏和显示您想要的任何一个。

# ios - 将 RSS 查看器添加到选项卡式应用程序 XCode

> ID：15397435
> 
> 赞同：0
> 
> 时间：2013-03-13T22:07:48.740
> 
> 标签：ios, uitableview, rss-reader

我有一个选项卡式应用程序，我想设置一个选项卡 (UITableViewController) 以显示来自 RSS 提要的内容。我怎么做？有没有关于它的教程或非常简单的开源代码？我是初学者，不明白我已经阅读了几天的pro tuts。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:15:39.123

以下是示例代码

[iphone-rss-reader-application-with-source-code](http://www.imthi.com/blog/programming/iphone-rss-reader-application-with-source-code.php)

[如何制作一个简单的 rss 阅读器 iPhone 应用教程](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)

[iphone RSS 趣味小程序](http://www.sourcecodeprojects.com/1093770/)

# android - 以编程方式更改 android 的网络浏览器设置

> ID：15397440
> 
> 赞同：0
> 
> 时间：2013-03-13T22:07:57.617
> 
> 标签：android, browser

我正在做一个 MDM，此时我正在检查一些功能，看看这些功能是否可以在 android 中构建，我已经搜索了有关启用/禁用 java 脚本、弹出窗口和 cookie 以编程方式但显然 Web 浏览器是唯一管理这些的设置，我想知道是否有人以编程方式启用/禁用这些功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:30:12.830

请参阅[访问 android 股票浏览器设置](https://stackoverflow.com/questions/4236685/access-android-stock-browser-settings)- AFAIK 不存在从网页中更新这些设置的 API（想象一个坏演员可以通过启用弹出窗口来达到的坏处）

# c++ - AntTweakBar 未出现在基于 ATI 图形的硬件上

> ID：15397442
> 
> 赞同：2
> 
> 时间：2013-03-13T22:08:04.700
> 
> 标签：c++, opengl, glfw, ati

我目前正在大学三年级的一个项目中使用 OpenGL 与 GLEW、GLFW 和 AntTweakBar。在我自己的机器（i5-2500k，GTX 570）上运行良好。但是，当我在许多其他系统（所有这些系统都具有 ATI 图形）上尝试它时，我只能获得要显示的实际渲染或 AntTweakBars。

为了更清楚一点，在我自己的机器上，我使用以下行初始化 AntTweakBar：

```
TwInit(TW_OPENGL, NULL); 
```

哪个工作正常。现在，在我在大学尝试过的其他计算机上，如果我保持这条线不变，AntTweakBars 不会出现，但我自己的渲染确实出现了。但是，如果我将该行更改为：

```
TwInit(TW_OPENGL_CORE, NULL); 
```

调整栏出现，但我自己的渲染消失了。我可能会得出它与 ATI 图形有关的结论，但我无法访问另一台基于 nvidia 的机器进行测试。那么，有没有人经历过类似的事情，或者对问题可能是什么有任何想法？

# android - ProgressDialog、activity的onCreate()和AsyncTask

> ID：15397445
> 
> 赞同：0
> 
> 时间：2013-03-13T22:08:09.113
> 
> 标签：android, android-asynctask, progressdialog, android-lifecycle

这个问题与`AsyncTask`需要杀死 a 的 a 有关`ProgressDialog`。在任务运行时，活动被销毁并重新创建（例如手机轮换）。在 的帮助下创建了一个新对话框，`onSaveInstanceState()`但`AsyncTask`由先前销毁的活动产生的 ，看不到它。

图片，如果你愿意的话……（例如，为了快速样机代码）。

```
public class Bob extends Activity {

    private ProgressDialog m_d;

    public void onCreate(Bundle b) {
        m_d = new ProgressDialog(this);
        // ...
        if (b != null) {
            if (b.getBoolean("dialog") == true)
                m_d.show();
        }
        // ...
    }

    public void onSaveInstanceState(Bundle b) {
        super.onSaveInstanceState(b);
        b.putBoolean("dialog", (m_d.isShowing()));
    }

    public void onDestroy() {
        if (m_d.isShowing()) {
            m_d.dismiss();
            m_d = null;
        }
        //...
    }
} 
```

`AsyncTask` `onPreExecute()`做`m_d.show()`和`onPostExecute()`做`m_d.hide()`。_

问题是当我的活动被重新创建时（例如，在手机轮换时），`AsyncTask`似乎有旧的`m_d`. 是的`null`，因为那被杀了`onDestroy()`。

它没有 new `m_d`，在重新创建活动时创建。所以现在我有一个`ProgressDialog`，而应该杀死它的人`onPostExecute()`看不到它。

怎么办？我需要旧`AsyncTask`的以某种方式发出信号让新`ProgressDialog`的离开。

```
private OnItemSelectedListener onSpinnerSelection = new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // ...
        new Switcharoo().execute();
    }
}

private class Switcharoo extends AsyncTask<Void, Void, Void> {

    protected void onPreExecute() {
        m_d.show();
        // ...
    }

    protected void onPostExecute() {
        if (m_d != null) m_d.hide();
        // ...
    }

    protected Void doInBackground(Void... arg0) {
        // ...
    }
} 
```

如果 Android 在任务运行时没有终止我的活动，那很好。像我预期的`ProgressDialog`那样弹出并消失。

如果 Android 在任务运行时出于任何原因决定重新启动我的活动，即使我在其中重新创建了它，它`m_d`也会`null`在其中- 它有旧的，而不是新的。`onPostExecute()``onCreate()``m_d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:34:34.100

有两个问题：第一个`AsyncTask`是绑定到创建它的活动。我的意思是，活动的实例。

如果您希望它在活动轮换之间存活，您必须将其存储在其他地方（例如检查[此）。](http://commonsware.com/blog/2010/09/10/asynctask-screen-rotation.html)在任何情况下，您都需要从新活动中引用它（您可以做的另一件事是使用模型片段，即没有您设置为 UI 的片段`setRetainInstance(true)`）。

一旦您从新创建的活动中获得了对异步任务的引用，就没有什么可以阻止您拥有`m_d`异步任务的本地以及使用新对话框更新它的 setter 方法。

另请注意，最好让弱引用指向活动和对话框本身，以便允许垃圾收集。否则，在任务本身的执行结束之前，不会释放对话框（可能还有活动本身）。

# uigesturerecognizer - 如何从标签栏按钮创建页面控制模式视图

> ID：15397452
> 
> 赞同：0
> 
> 时间：2013-03-13T22:08:35.957
> 
> 标签：uigesturerecognizer, uitabbar, swipe, uipagecontrol

我想实现一个类似于下面屏幕截图的模态视图。

当用户按下选项卡栏（帮助）按钮时，我希望视图显示显示多页帮助屏幕中的第一页，页面控制点用于通过左右滑动手势进行顺序导航以导航到每个帮助页面.

![在此处输入图像描述](../Images/59cccfd4ab6a3ab6911f4447318fd1fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:31:15.590

令人惊讶的是，额外的研究会产生什么。找到了使用 UIScrollView 和 UIPageControl 来实现类似功能的示例。

# c# - 不兼容类型“System.Linq.Enumerable”的通用方法“Sum”

> ID：15397454
> 
> 赞同：1
> 
> 时间：2013-03-13T22:08:44.787
> 
> 标签：c#, linq, kendo-ui, kendo-grid

我在使用 MVC Wrappers for Kendo UI 时遇到了一些问题。似乎 IEnumerable 不支持计数以外的任何聚合值。我得到的例外是：类型“System.Linq.Enumerable”上没有通用方法“Sum”与提供的类型参数和参数兼容。如果方法是非泛型的，则不应提供类型参数。

我不确定如何解决这个问题，也不确定这是否是 Kendo 的缺陷。

**请注意，下面使用的聚合函数不是 LINQ，而是 Kendo UI 的包装器作为函数提供的。有关详细信息，请参阅[Kendo UI 文档](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/configuration)。**

**数据源：**

*   北风

**控制器：**

```
public ActionResult Index() { return View(); }
public ActionResult Read([DataSourceRequest] DataSourceRequest request) { return GetView(request); }
private IEnumerable<dynamic> GetData() { var db = new NwEntities(); return db.Products; }
private JsonResult GetView(DataSourceRequest request) { return Json(GetData().ToDataSourceResult(request)); } 
```

**看法：**

```
@model IEnumerable<dynamic>
@(
 Html.Kendo().Grid(Model).Name("Grid")
    .DataSource(ds =>
        ds.Ajax()
        .Model(m =>
        {
            m.Id("ProductID");
            m.Field("ProductName", typeof(string));
            m.Field("UnitPrice", typeof(decimal));
        })
        .Aggregates(aggregate => aggregate.Add(a => "UnitPrice").Count().Sum())
        .Read(r => r.Action("Read", "Home"))
    )
    .Columns(columns =>
    {
        columns.Bound("ProductID");
        columns.Bound("ProductName");
        columns.Bound("UnitPrice").Format("{0:c}");
    })
    .Groupable()
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T05:22:25.257

这现在是 Kendo UI 的一个已知问题，将由 Kendo UI 团队修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T22:35:43.040

@MitchellSkurnik[在这里](http://www.telerik.com/forums/no-generic-method-sum-on-type-system-linq-enumerable-is-compatible "这里")收到了答复。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T22:15:44.323

不带参数的 Sum 仅适用于内置类型 decimal、double、int 等的 IEnumerables。

要使用泛型类型调用它，您必须提供一个转换函数。

IE

```
enumerable.Sum(e => e.Value) 
```

其中 e.Value 是您想要求和的值。

另请参阅[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)

# python - 静态文件：Django 1.4 中没有此类文件或目录错误

> ID：15397458
> 
> 赞同：2
> 
> 时间：2013-03-13T22:08:56.993
> 
> 标签：python, django, static, webserver, django-1.4

我使用 django 开发服务器在本地创建了一个应用程序，现在想将它托管在网络上。

我使用 python 2.7、django 1.4.5 和 Flup 在服务器上上传并安装了所有内容。一切正常，直到我尝试使用任何静态文件。当我的网站试图打开一个文本文件时，它会说：“没有这样的文件或目录”，尽管该文件肯定在那个文件夹中。

更奇怪的是，服务器管理员告诉我，他的日志显示该站点甚至没有查看它告诉我的目录，因此错误消息是关于它正在搜索的路径的“谎言”。

既然我想主持我的节目，我有什么需要做的不同的事情吗？在开发服务器上它工作得非常好，现在即使我尝试了每一个路径组合，`settings.py`我认为它也行不通。

如何让 Django 在生产服务器上提供静态文件？

**编辑：**

当我尝试访问[http://ulli.cepheus.uberspace.de/fcgi-bin/mysite/polls/4/](http://ulli.cepheus.uberspace.de/fcgi-bin/mysite/polls/4/)

我收到以下错误消息，但如果您查看该链接，则文本文件显然在那里。

> /polls/4/ 处的 IOError
> 
> [Errno 2] 没有这样的文件或目录：' [http](http://ulli.cepheus.uberspace.de/static/m.txt) ://ulli.cepheus.uberspace.de/static/m.txt '

Stack Overflow 不允许我发布我的 settings.py 或其他任何内容，因为其中的链接太多......我该如何展示给你看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:10:45.120

你试过跑步吗

> `python manage.py collectstatic -l`

[可以在此处找到](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)有关 staticfiles 应用程序的更多信息。

如果没有更多信息，我们能做的最好的就是为您提供一个阅读文档的链接，然后告诉我们您尝试过什么以及未尝试过什么。如果其他一切设置正确，则运行我上面给您的命令应该可以解决问题的具体原因之一。

# android - 使用Spring从httpresponse到位图的图像

> ID：15397465
> 
> 赞同：2
> 
> 时间：2013-03-13T22:09:24.323
> 
> 标签：android, spring, bitmap, jpeg, httprequest

我正在尝试对 url 进行 http 请求。我认为它会在响应正文中使用位图进行响应，但出现以下错误：

```
03-13 22:54:36.106: W/System.err(26547): org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [android.graphics.Bitmap] and content type [image/jpg;charset=utf-8]
03-13 22:54:36.106: W/System.err(26547):    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:79)
03-13 22:54:36.116: W/System.err(26547):    at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:655)
03-13 22:54:36.116: W/System.err(26547):    at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:641)
03-13 22:54:36.116: W/System.err(26547):    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:484)
03-13 22:54:36.116: W/System.err(26547):    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:439)
03-13 22:54:36.116: W/System.err(26547):    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:415)
03-13 22:54:36.116: W/System.err(26547):    at com.hera.ooshopping.AsyncPicLoading.getFileFromServer(AsyncPicLoading.java:174)
03-13 22:54:36.116: W/System.err(26547):    at com.hera.ooshopping.AsyncPicLoading.doInBackground(AsyncPicLoading.java:65)
03-13 22:54:36.116: W/System.err(26547):    at com.hera.ooshopping.AsyncPicLoading.doInBackground(AsyncPicLoading.java:1) 
```

从错误看来，响应是 JPG（第一行），但我不太确定。我可以解析对字符串的响应，这会创建一个带有奇怪字符的巨大字符串，而不是 base64。

我如何将我的响应体解析为位图或图像什么是可用的？我真的不明白。我的请求代码如下：

```
HttpBasicAuthentication authHeader = new HttpBasicAuthentication(user.getUsername(), user.getPassword());
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setAuthorization(authHeader);

HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);
System.out.println("entity:" + requestEntity.toString());

RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
restTemplate.getMessageConverters().add(new ByteArrayHttpMessageConverter());
restTemplate.getMessageConverters().add(new ResourceHttpMessageConverter());

try {
    // GET Request
    ResponseEntity<Bitmap> response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, Bitmap.class);

    return response.getBody();
} catch (Exception e) {
    e.printStackTrace();
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:36:26.480

我只是偶然发现了同样的问题。

`ResourceHttpMessageconverter`不能直接转换`Resource`为位图。相反，您可以使用它来创建您的位图：

```
ResponseEntity<Resource> response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, Resource.class);
Bitmap bitmap = BitmapFactory.decodeStream(response.getBody().getInputStream()); 
```

这段代码对我有用。让我知道这是否能解决您的问题。

# compiler-construction - 有什么方法可以创建在硬件中实现的高级语言解释器？

> ID：15397466
> 
> 赞同：4
> 
> 时间：2013-03-13T22:09:28.067
> 
> 标签：compiler-construction, programming-languages, hardware, interpreter, hdl

一些随机的想法抓住了我，我就是无法摆脱它。我在想，因为现代处理器只是不同种类的汇编语言的解释器，是否有创建一些直接在硬件中实现的高级语言解释器，使用一些 HDL 甚至直接使用逻辑门设计？同时我在想为什么这还没有完成，我现在能想到的一些原因是：

*   理论上的原因——理论上是不可能的，尽管在我看来这是可能的，因为我们已经拥有的 cpu 或者我们正在谈论的机器只是图灵机的一种变体，所以它们的性质没有区别，但我不是 100 % 确定这一点。
*   设计复杂性——制造如此复杂的机器通常太难了。
*   速度缺点——即使设计和实施得当，它仍然无法取胜，因为它们的速度将成为它的缺点。

我只是对这个问题很好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:25:00.710

听说过[LISP 机器](http://en.wikipedia.org/wiki/Lisp_machine)或[Symbolics](http://en.wikipedia.org/wiki/Symbolics)公司。

我知道答案很短，主要是链接，但答案是自包含的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:09:01.163

这已经完成了[Java 处理器](http://en.wikipedia.org/wiki/Java_processor)。

这不是一个非常复杂的指令集计算机（VCISC），它导致物理上的大型处理器。语言的某些部分没有像其他部分那样经常使用，这导致处理器很少使用的部分，浪费了硅面积。

处理器的更大芯片尺寸会增加产量损失，从而增加最终用户的价格。这种经济性有利于更小的简单处理器。

低功耗处理器设计倾向于支持 RISC 而不是 CISC 架构。[深蓝](http://en.wikipedia.org/wiki/Deep_Blue_%28chess_computer%29)等超级计算机使用了许多 RISC 内核。大多数移动通信设备使用[ARM](http://en.wikipedia.org/wiki/ARM_core) RISC 内核。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T23:54:48.480

Burroughs 有著名的“硬件中的 Algol” [（参见 B5500）](http://en.wikipedia.org/wiki/Burroughs_large_systems)。

鲜为人知的是 Burroughs 美丽的[B1700](http://en.wikipedia.org/wiki/Burroughs_B1700)，它让每个进程定义微码来解释进程代码使用的 HLL。因此，每个进程可以有*不同*的HLL 指令集；硬件切换的微码集在上下文切换上。

RISC 世界的一个教训是，构建传统指令集并将您的语言的代码编译成这些指令更经济（并且您获得更大的市场）。DEC VAX 试图有特定语言的指令；事实证明，使用更传统的 VAX 指令而不是特定的指令会更快。

如果您坚持，使用 FPGA 实现 HLL 指令集可能相对容易。（我可以想象这是一个 EE 设计课上的研究生项目）。与 x86 或其他现代 RISC 芯片相比，它的性能不会有竞争力。

# php - 从 li 内部的输入中获取 id

> ID：15397470
> 
> 赞同：0
> 
> 时间：2013-03-13T22:09:46.290
> 
> 标签：php, jquery, html, ajax

我正在尝试将该输入中的文本添加到我的数据库中，但它仅从 li 中的第一个元素获取数据。问题在于 $("input#todo_id-" + currentID).val()，我需要进行哪些更改？提前感谢您的帮助。

```
<li id="todo-'.$this->data['id'].'" class="todo">
<input id="todo_id-'.$this->data['id'].'" type="text" class="category">
<a id="addCategory" href="#" >Save</a>   
</li> 
```

jQuery：

```
$('#addCategory').live("click",(function(e){        
$.get("ajax.php",{'text':$("input#todo_id-" + currentID).val(),"id":currentID.data('id'),'action':'new_category' },function(msg){
        $(msg).hide().appendTo('.categoryList').slideDown();
});
    e.preventDefault();
}));

currentID = $(this).closest('.todo'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:11:45.363

`currentID = $(this).closest('.todo');`是一个 jQuery 对象而不是一个 ID。
如果您想要一个 ID，请使用：`currentID = $(this).closest('.todo').attr('id');`

然后记得把你的`$.get()`调用参数ìd改成`"id":currentID`

顺便提一句：

它`attr('id')`不是`data('id')`
`live()`被弃用的。`on()`改为使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:17:54.623

我想你想要被点击的 li 的 ID。您需要在处理程序中设置 currentID 才能使其正常工作。此外，正如所写，currentID 不是实际的 id 字符串，它是元素的 jQuery。

```
$('#addCategory').live('click', function(e) {
    var currentID = $(this).closest('.todo');
    $.get("ajax.php",
          {
              'text':currentID.find("input:first").val(),
              'id':currentID.attr("id"),
              'action':"new_category"
          },
// etc. etc. 
```

请注意，正如 Horen 指出的那样，我使用 .attr() 而不是 .data(); Horen 关于 .live() 被弃用而支持 .on() 也是正确的

# python - 如何使 gunicorn 中的工人过期（和复活）？

> ID：15397472
> 
> 赞同：4
> 
> 时间：2013-03-13T22:09:50.610
> 
> 标签：python, gunicorn

我有一个内存泄漏缓慢的应用程序，由于各种原因，我无法摆脱它。所以我想使用让我的工人定期死亡和复活的老把戏。

（即在 multiprocessing Pool 中使用与 maxtasksperchild 相同的策略......“......在其他系统（如 Apache、mod_wsgi 等）中发现的释放工作人员持有的资源的常见模式是允许池中的工作人员完成在退出、清理并产生一个新进程来替换旧进程之前只需要完成一定数量的工作......")

到目前为止，我能想到的最好的方法是让一个线程休眠，然后调用`os._exit(-1)`.

这是要走的路，还是有更好的方法来定期回收我的工人？

这是我现在要走的路：

```
class Quitter(Thread):

    def run(self):
        while True:
            time.sleep(random.randrange(5, 7)):
            print str(os.getpid())
            os._exit(-1)

Quitter().start() 
```

gunicorn 回应：

```
2013-03-13 03:21:24 [6487] [INFO] Booting worker with pid: 6487
...
2013-03-13 03:21:30 [6492] [INFO] Booting worker with pid: 6487 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T22:13:05.130

Gunicorn 实际上将其作为配置选项提供 - 看看[max_requests](http://docs.gunicorn.org/en/latest/settings.html#max-requests)。

# java - 自动从数据库中获取 URL

> ID：15397476
> 
> 赞同：3
> 
> 时间：2013-03-13T22:10:04.137
> 
> 标签：java, android, mysql

当我点击按钮时，我试图自动从我的数据库表在线获取一个 URL `btnDelete`。问题是它从数据库返回正确的值，但是当尝试将它与：

```
Uri uri = Uri.parse(TAG_url);
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

它说*“不幸的是，对数据库的访问已停止。”*

当我`Log.d()`从`TAG_url`它返回时，它只返回“URL”但是当我使用

```
txtDesc.setText(product.getString(TAG_url)); 
```

它正确显示来自数据库的链接。

```
03-14 11:50:18.169: E/Trace(5227): error opening trace file: No such file or directory (2)
03-14 11:50:31.499: E/AndroidRuntime(5227): FATAL EXCEPTION: main
03-14 11:50:31.499: E/AndroidRuntime(5227): java.lang.NullPointerException: uriString
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.net.Uri$StringUri.<init>(Uri.java:464)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.net.Uri$StringUri.<init>(Uri.java:454)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.net.Uri.parse(Uri.java:426)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at com.example.androidhive.EditProductActivity1$2.onClick(EditProductActivity1.java:106)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.view.View.performClick(View.java:4084)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.view.View$PerformClick.run(View.java:16966)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.os.Handler.handleCallback(Handler.java:615)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.os.Looper.loop(Looper.java:137)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-14 11:50:31.499: E/AndroidRuntime(5227):     at dalvik.system.NativeStart.main(Native Method)
03-14 11:50:44.299: E/Trace(5251): error opening trace file: No such file or directory (2) 
```

有人可以帮我吗？

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class EditProductActivity extends Activity {

    EditText txtName;
    EditText txtPrice;
    EditText txtDesc;
    EditText txtimg;
    EditText txtCreatedAt;
    Button btnSave;
    Button btnDelete;
    Button btnvideo;

    String pid;
    String url;

    // Progress Dialog
    private ProgressDialog pDialog;

    // JSON parser class
    JSONParser jsonParser = new JSONParser();

    // single product url
    private static final String url_product_detials = "http://10.0.2.2/android_connect/get_product_details.php";

    // url to update product
    private static final String url_update_product = "http://10.0.2.2/android_connect/update_product.php";

    // url to delete product
    private static final String url_delete_product = "http://10.0.2.2/android_connect/delete_product.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUCT = "product";
    private static final String TAG_PID = "pid";
    private static final String TAG_NAME = "name";
    private static final String TAG_PRICE = "price";
    private static final String TAG_DESCRIPTION = "description";
    private static final String TAG_img = "img";
    private static final String TAG_url = "url";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.edit_product);

        // save button
        btnSave = (Button) findViewById(R.id.btnSave);
        btnDelete = (Button) findViewById(R.id.btnDelete);

        // getting product details from intent
        Intent i = getIntent();

        // getting product id (pid) from intent
        pid = i.getStringExtra(TAG_PID);

        // Getting complete product details in background thread
        new GetProductDetails().execute();

        // save button click event
        btnSave.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // starting background task to update product
                new SaveProductDetails().execute();
            }
        });

        // Delete button click event
        btnDelete.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // deleting product in background thread
                Log.v(TAG_url, "index=");
                Uri uri = Uri.parse(TAG_url);
                Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                startActivity(intent);

            }
        });
    }

    /**
    * Background Async Task to Get complete product details
    * */
    class GetProductDetails extends AsyncTask<String, String, String> {

        /**
        * Before starting background thread Show Progress Dialog
        * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(EditProductActivity.this);
            pDialog.setMessage("Loading movies details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
        * Getting product details in background thread
        * */
        protected String doInBackground(String... params) {
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {

                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("pid", pid));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_product_detials, "GET", params);

                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(TAG_PRODUCT); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                            // product with this pid found
                            // Edit Text
                            url = TAG_url;
                            Log.v(url, "index=");
                            txtName = (EditText) findViewById(R.id.inputName);
                            txtPrice = (EditText) findViewById(R.id.inputPrice);
                            txtDesc = (EditText) findViewById(R.id.inputDesc);
                            // txtimg = (EditText) findViewById(R.id.inputimg);

                            // display product data in EditText
                            txtName.setText(product.getString(TAG_NAME));
                            txtPrice.setText(product.getString(TAG_PRICE));
                            txtDesc.setText(product.getString(TAG_url));
                            txtimg.setText(product.getString(TAG_img));
                        } else {
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }

                private String getText(String string) {
                    // TODO Auto-generated method stub
                    return null;
                }
            });

            return null;
        }

        /**
        * After completing background task Dismiss the progress dialog
        * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }

    /**
    * Background Async Task to Save product Details
    * */
    class SaveProductDetails extends AsyncTask<String, String, String> {

        /**
        * Before starting background thread Show Progress Dialog
        * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(EditProductActivity.this);
            pDialog.setMessage("Saving product ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
        * Saving product
        * */
        protected String doInBackground(String... args) {
            // getting updated data from EditTexts
            String name = txtName.getText().toString();
            String price = txtPrice.getText().toString();
            String description = txtDesc.getText().toString();
            String img = txtimg.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair(TAG_PID, pid));
            params.add(new BasicNameValuePair(TAG_NAME, name));
            params.add(new BasicNameValuePair(TAG_PRICE, price));
            params.add(new BasicNameValuePair(TAG_DESCRIPTION, description));
            params.add(new BasicNameValuePair(TAG_img, img));
            params.add(new BasicNameValuePair(TAG_url, url));

            // sending modified data through http request
            // Notice that update product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_update_product,
                    "POST", params);

            // check json success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully updated
                    Intent i = getIntent();
                    // send result code 100 to notify about product update
                    setResult(100, i);
                    finish();
                } else {
                    // failed to update product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
        * After completing background task Dismiss the progress dialog
        * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once product uupdated
            pDialog.dismiss();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:06:47.170

在我看来， var`TAG_url`仅用作描述符，而不是可变对象。首先你有：`private static final String TAG_url = "url";`定义为节点名。使用它是`txtDesc.setText(product.getString(TAG_url));`有效的，因为您正在检索与节点“url”关联的数据（这是什么`TAG_url`）。在这种情况下，数据不在`TAG_url`var 中，而是`TAG_url`用作查找数据的键。

任何对日志的引用都`TAG_url`将返回它的内容：`url`. 同样，解析调用 using`TAG_url`也将使用它的内容。因此，`Uri uri = Uri.parse(TAG_url);`实际上是调用`Uri uri = Uri.parse("url");`- 等等错误。

您应该将`TAG_url`parse 调用中的 var 替换为包含您打算调用的实际 url 的 var。在您的数据库调用期间，您应该将该 url 存储在一个单独的 var 中，然后对其进行解析。

编辑：

在不知道您的 JSON 或其他数据的结构的情况下，我不能肯定地说。但是作为示例，我们假设通过调用从数据库返回的`product.getString(TAG_url)`数据是您想要发送到解析器的数据。（我假设由于您提到`txtDesc`通过调用时数据已正确设置为 TextView `txtDesc.setText(product.getString(TAG_url));`。）

鉴于此，您可以`String incomingURL;`在类的顶部创建一个字段，并分配数据库调用的结果，如`incomingURL = product.getString(TAG_url);`. 然后，您将使用新字段设置 TextView，例如`txtDesc.setText(incomingURL);`.

然后，使用该变量进行解析：`Uri uri = Uri.parse(incomingURL);` 这将从数据库调用中获取数据，并将其放入解析器中。请记住，`incomingURL`如果在数据库调用完成之前可以单击按钮，则需要检查是否为 null。

# scalability - Servicestack 的会话在多服务器环境中的可扩展性有哪些用途？

> ID：15397478
> 
> 赞同：1
> 
> 时间：2013-03-13T22:10:18.427
> 
> 标签：scalability, servicestack

当用户通过身份验证时，会话使用定义的 ICacheclient 存储，可以是 memory、memcached 或 redis。如果我使用两个 Web 服务器，我想会话只填充在完成身份验证的服务器上，对吗？

在这种情况下我是否必须使用粘性会话（内存缓存客户端）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:27:56.233

我们有一对服务器来提供我们的 Web 应用程序，并且可以根据需要进行扩展。我们使用 REDIS 通过 ICacheclient 接口来维护客户端的身份验证状态。为了在构建机器上轻松测试，我们根据是否附加了调试器在 redis 和 memcached 之间切换。我们的 Apphost.cs 有这个：

```
if (Debugger.IsAttached)
{
    container.Register<ICacheClient>(new MemoryCacheClient());        
}
else
{
    container.Register<IRedisClientsManager>(c => new PooledRedisClientManager(AppConfig.REDISUrl + ":" + AppConfig.REDISPort));
    container.Register<ICacheClient>(c => (ICacheClient)c.Resolve<IRedisClientsManager>().GetCacheClient());
} 
```

内置的身份验证方法仅适用于 ICacheClient 设置为[文档中所述的任何内容](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)

# batch-file - 如何从包含空格的文件中复制名称并使用该名称创建新文件

> ID：15397479
> 
> 赞同：0
> 
> 时间：2013-03-13T22:10:19.317
> 
> 标签：batch-file, rename

我正在使用批处理文件来转换两个具有相同名称但扩展名不同的文件，即

```
test file.dat
test file.txt 
```

我想将这些文件与分隔符结合起来（我用过~）

我希望将新文件命名为新扩展名但保留原始名称，我已经解决了这个问题，但是我使用的大多数文件中都有空格，我可以让它与空格一起使用

我到目前为止的代码：

```
type *.dat > new.andy
echo. >> new.andy
echo ~ >> new.andy
type *.txt >> new.andy
for /F %%a in ('dir /b *.dat') do set FileName=%%~na
REN new.andy %FileName%.andy 
```

到目前为止，我已经得到了脚本，除了用它的全名重命名文件，包括空格，到现在它只到第一个空格，即 test.andy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:41:16.157

测试以下

```
type "*.dat" > new.andy
echo. >> new.andy
echo ~ >> new.andy
type "*.txt" >> new.andy
for /F %%a in ('dir /b *.dat') do set FileName=%%~na
REN new.andy %FileName%.andy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:04:44.907

你可以从这样的事情开始：

```
@echo off

for /f "tokens=*" %%a IN ('dir /b *.dat') do (
  type "%%a" >  "%%~na.andy"
  echo.      >> "%%~na.andy"
  echo ~     >> "%%~na.andy"
)

for /f "tokens=*" %%a IN ('dir /b *.txt') do (
  type "%%a" >> "%%~na.andy"
) 
```

这会将所有`*.dat`文件与所有`*.txt`文件合并，合并文件的名称将为`.andy`.

根据您的目标以及文件的组织方式，可以对此进行改进。

# python - 如何在 Selenium WebDriver 中设置浏览器宽度和高度？

> ID：15397483
> 
> 赞同：89
> 
> 时间：2013-03-13T22:10:30.183
> 
> 标签：python, selenium, selenium-webdriver, screen-resolution

我正在为 Python 使用 Selenium WebDriver。我想实例化具有特定宽度和高度的浏览器。到目前为止，我能得到的最接近的是：

```
driver = webdriver.Firefox()
driver.set_window_size(1080,800) 
```

哪个有效，但在创建后设置浏览器大小，我希望它在实例化时设置。我猜有一种方法如下：

```
profile = webdriver.FirefoxProfile();
profile.set_preference(foo, 1080)
driver = webdriver.Firefox(profile) 
```

但我不知道`foo`会是什么，我也不知道文档在哪里。

**Q1：**有没有办法在实例化时设置宽度/高度？

**Q2：**列出所有可用密钥的参考文档在哪里`profile.set_preference`？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-03-15T11:43:05.660

这是我在 Python 中使用 Selenium 2.48.0 的方法：

```
from selenium.webdriver import Firefox
driver = Firefox()
driver.set_window_position(0, 0)
driver.set_window_size(1024, 768) 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-02-23T06:20:30.913

对我来说，在 OS X 10.9 上的 Java 7 中唯一有效的是：

```
// driver = new RemoteWebDriver(new URL(grid), capability);
driver.manage().window().setPosition(new Point(0,0));
driver.manage().window().setSize(new Dimension(1024,768)); 
```

哪里`1024`是宽度，哪里是`768`高度。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2019-04-27T08:18:29.150

这是一个适用于无头和非无头模式的解决方案，它将以指定的大小启动窗口，而不是在之后设置它：

### 铬合金：

```
from selenium.webdriver import Chrome
from selenium.webdriver.chrome.options import Options

opts = Options()
opts.add_argument("--window-size=2560,1440")

driver = Chrome(options=opts) 
```

### 火狐：

```
from selenium.webdriver import Firefox, FirefoxOptions

opts = FirefoxOptions()
opts.add_argument("--width=2560")
opts.add_argument("--height=1440")

driver = Firefox(options=opts) 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-13T22:16:44.363

尝试这样的事情：

```
IWebDriver _driver = new FirefoxDriver();
_driver.Manage().Window.Position = new Point(0, 0);
_driver.Manage().Window.Size = new Size(1024, 768); 
```

不确定它是否会在启动后调整大小，所以可能不是你想要的

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-05-11T00:20:02.767

如果您使用的是铬

```
 chrome_options = Options()
 chrome_options.add_argument("--start-maximized");
 chrome_options.add_argument("--window-position=1367,0");
 if mobile_emulation :
     chrome_options.add_experimental_option("mobileEmulation", mobile_emulation)

  self.driver = webdriver.Chrome('/path/to/chromedriver', 
                                  chrome_options = chrome_options) 
```

这将导致浏览器在第二台显示器上启动，而不会出现任何恼人的闪烁或屏幕移动。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-12T13:59:31.930

这很简单。这是完整的代码。

```
from selenium import webdriver
driver = webdriver.Chrome()
driver.get("Your URL")
driver.set_window_size(480, 320) 
```

> 确保 chrome 驱动程序在您的系统路径中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T16:53:48.637

这是来自 python selenium 2.31.0 firefox_profile.py 的 firefox 配置文件默认首选项

并在 Firefox 地址栏中键入“about:config”以查看所有首选项

参考 about:config 中的条目：http://kb.mozillazine.org/About: [config_entries](http://kb.mozillazine.org/About:config_entries)

```
DEFAULT_PREFERENCES = {
    "app.update.auto": "false",
    "app.update.enabled": "false",
    "browser.download.manager.showWhenStarting": "false",
    "browser.EULA.override": "true",
    "browser.EULA.3.accepted": "true",
    "browser.link.open_external": "2",
    "browser.link.open_newwindow": "2",
    "browser.offline": "false",
    "browser.safebrowsing.enabled": "false",
    "browser.search.update": "false",
    "extensions.blocklist.enabled": "false",
    "browser.sessionstore.resume_from_crash": "false",
    "browser.shell.checkDefaultBrowser": "false",
    "browser.tabs.warnOnClose": "false",
    "browser.tabs.warnOnOpen": "false",
    "browser.startup.page": "0",
    "browser.safebrowsing.malware.enabled": "false",
    "startup.homepage_welcome_url": "\"about:blank\"",
    "devtools.errorconsole.enabled": "true",
    "dom.disable_open_during_load": "false",
    "extensions.autoDisableScopes" : 10,
    "extensions.logging.enabled": "true",
    "extensions.update.enabled": "false",
    "extensions.update.notifyUser": "false",
    "network.manage-offline-status": "false",
    "network.http.max-connections-per-server": "10",
    "network.http.phishy-userpass-length": "255",
    "offline-apps.allow_by_default": "true",
    "prompts.tab_modal.enabled": "false",
    "security.fileuri.origin_policy": "3",
    "security.fileuri.strict_origin_policy": "false",
    "security.warn_entering_secure": "false",
    "security.warn_entering_secure.show_once": "false",
    "security.warn_entering_weak": "false",
    "security.warn_entering_weak.show_once": "false",
    "security.warn_leaving_secure": "false",
    "security.warn_leaving_secure.show_once": "false",
    "security.warn_submit_insecure": "false",
    "security.warn_viewing_mixed": "false",
    "security.warn_viewing_mixed.show_once": "false",
    "signon.rememberSignons": "false",
    "toolkit.networkmanager.disable": "true",
    "toolkit.telemetry.enabled": "false",
    "toolkit.telemetry.prompted": "2",
    "toolkit.telemetry.rejected": "true",
    "javascript.options.showInConsole": "true",
    "browser.dom.window.dump.enabled": "true",
    "webdriver_accept_untrusted_certs": "true",
    "webdriver_enable_native_events": "true",
    "webdriver_assume_untrusted_issuer": "true",
    "dom.max_script_run_time": "30",
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-28T09:16:31.073

```
profile = webdriver.FirefoxProfile()
profile.set_preference('browser.window.width',0)
profile.set_preference('browser.window.height',0)
profile.update_preferences() 
```

将此代码写入测试代码的设置部分，在：`webdriver.Firefox()`行之前。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-09T15:17:19.673

我尝试使用以下代码在 mac chrome 和 windows chrome 上设置分辨率。

```
driver.manage().window().setSize(new Dimension(1280, 768)); 
```

使用以下代码测试分辨率更改：-

```
Dimension dimension = driver.manage().window().getSize();
LOGGER.info("dimension is " + dimension); 
```

# windows-8 - BOO 是否在 WinRT（Windows 8 应用程序）上运行？

> ID：15397485
> 
> 赞同：1
> 
> 时间：2013-03-13T22:10:37.340
> 
> 标签：windows-8, windows-runtime, boo

我可以在 WinRT 上为 Windows 8 应用程序编译 BOO 吗？你有没有尝试过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:00:09.893

# arrays - 使用联合将 char 数组读取为 unsigned long int

> ID：15397486
> 
> 赞同：0
> 
> 时间：2013-03-13T22:10:41.483
> 
> 标签：arrays, char, union, long-integer, unsigned

正如标题所暗示的那样，基本上我通过联合将 char 数组转换为 unsigned long int（或者更确切地说，读取为 unsigned long int）。

```
union {
    char buffer[8];
    unsigned long int buffer_ui;
} char_array_ui; 
```

我将 8 个字符读入 char 数组，然后将这 8 个字符的值作为 unsigned long int 返回。（对于那些好奇的人，这是因为我正在从 /dev/urandom 读取字符）。这样做安全吗？我的程序中是否有任何可能出现的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:15:28.947

需要注意的 2 件事：

*   只要`unsigned long`8 字节的大小是正确的 - 可能并非每个平台都如此。
*   不同平台上的字节序可能不同，从而产生不同的结果。如果您读取数据，`unsigned long`它会自动处理以产生正确的结果，但如果您逐个字节地读取它，那么顺序就是您存储字节的方式。

# mysql - 休眠间隔

> ID：15397490
> 
> 赞同：0
> 
> 时间：2013-03-13T22:10:57.947
> 
> 标签：mysql, hibernate

我尝试在休眠中使用此查询，但间隔有问题。

```
select * from table where timestampfield >= now()-interval 3 month; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:15:43.653

我相信该`INTERVAL`关键字仅在函数内有效，例如`DATE_ADD()`or`DATE_SUB()`

```
select * from table where timestampfield >= DATE_SUB(now(), interval 3 month); 
```

# ajax - Pagemethod 抛出“在序列化“System.Reflection.RuntimeModule”类型的对象时检测到循环引用

> ID：15397491
> 
> 赞同：0
> 
> 时间：2013-03-13T22:11:11.977
> 
> 标签：ajax, asmx, pagemethods

我看过很多关于这个错误的帖子，解释了 JSON 问题。我只是有一个调用网络方法的经典网络表单。我在一个表单中有一堆单选按钮和 2 个下拉菜单。一旦我检查了一个单选按钮和两个下拉菜单，我必须单击`Build template`按钮来填充表单（基本上是带有收件人、抄送、主题字段等的电子邮件表单）

当我选择第一个单选按钮然后选择下拉菜单时，我得到了所需的结果。但是，当我选择任何其他返回数据的单选按钮时，我会收到此循环引用错误。最后一个单选按钮不返回数据，因此不会引发序列化错误。

这是调用页面方法的javascript

```
function HandleIT() {
    var ServiceID = document.getElementById("<%=ddServiceList.ClientID%>").value;
    var Status;

    // #code to set the drop downs to 1,2,3,4,5 on 'checked'# removed

    PageMethods.FindAllRecipient(ServiceID, Status, onSucess, onError);

    function onSucess(result) {
        document.getElementById("<%=txtTo.ClientID%>").value = result[0];
        document.getElementById("<%=txtCC.ClientID%>").value = result[1];
    }

    function onError(result) {
        alert('Something wrong.');
    }
} 
```

这是服务器方法中的代码：

```
[WebMethod]
public static object[] FindAllRecipient(string serviceID, string currentStatus)
{
    RemoteObj1 = new ServiceEmailer();
    Object[] results = RemoteObj1.FindAllRecipients(
        Convert.ToInt16(serviceID),
        Convert.ToInt16(currentStatus));

    return results;
} 
```

该代码在服务器方法中运行良好。所以那里没有问题。正如错误所说的那样，问题出在序列化和返回结果时。

# java - 为什么 Java 中 switch 语句的范围不受限制？

> ID：15397492
> 
> 赞同：6
> 
> 时间：2013-03-13T22:11:19.463
> 
> 标签：java, switch-statement, scope, language-design

为什么，在 Java 中，变量的范围仅限于 switch 块而不是 case 块。例如，

```
// Scope limited to a switch block
switch (number) {
case 1:
    String result = "...";
    break;
case 2:
    result = "...";
    break; 
```

在上面的例子中，result 只需要声明一次。如果您声明它两次，那么您会收到一条`Duplicate local variable`消息。

我的问题是：程序怎么知道你已经声明了`result`if `number = 2`？（它不会落入`case 1`也不会声明变量......或者会吗？）

编辑：

我可能会让大家感到困惑。我了解如何限制变量的范围，但我的问题是：*如果结果不属于这种情况，Java 如何知道结果已被声明*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T22:12:18.630

编辑：Java 使用**词法范围**（也称为静态范围），因此变量的范围是在编译时确定的，与实际评估无关。

Java 是块作用域的，因此它的作用域将尊重`{}`上面示例中的。

见[JLS 6.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)：

> 块中局部变量声明的范围（第 14.4 节）是声明出现的块的其余部分，从它自己的初始化程序开始，并在局部变量声明语句的右侧包括任何进一步的声明符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T22:14:36.177

您可以通过添加大括号将范围限制为 case 块，如下所示：

```
// Scope limited to a switch block
switch (number) {
case 1:{
    String result = "...";
    break;
}
case 2:{
    String result = "...";
    break;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T22:44:29.233

在祖父语言 Fortran 中，有一个计算的 GOTO 语句

```
 GOTO expr
        ...
    1   ...
        ...
    2   ...
        ... 
```

根据 的值`expr`，代码跳转到 1、2 等。

C（和Java）的`switch`语句基本上是变相的计算GOTO。我们有一段带有一些标签的连续代码，我们跳转到其中一个标签。如果没有`break`，我们将执行该块的其余部分。

这种相当低级的控制机制与当今程序员的直觉相反；我们会认为 switch 语句选择一个子句并执行该子句，就像一个`if-elseif-elseif-...-else` 语句。

Java 继承了 C 的 switch 语义，因为它们不想过多地偏离 C。较新的语言不太可能继续这个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T22:12:25.977

Java 使用块作用域，选择案例不是块（它们更像标签）。不过，这会起作用：

```
switch (key) {
case 1: {
    String result = "1";
    return result ;
  }
case 2: {
    String result = "2";
    return result ;
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T22:16:17.200

你是什​​么意思？为了理解答案，您需要了解编译器的工作原理。将 switch 视为一个大块，在每个 switch 语句的末尾有多个“goto”语句。

我不确定 java unroll switch 语句是如何展开的，但一种简单易行的方法是（伪字节码）：

```
 if (number == 1) goto label1;
    if (number == 2) goto label2;
    goto labelEnd;
label1:
    String result = "...";
    goto labelEnd;
label2:
    result = "...";
    goto labelEnd;
labelEnd:
    <some code> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T23:03:53.583

变量作用域被限制在 switch 块而不是 case 块的原因是 java 允许从一个 case 块跌落到下一个，即

```
switch (number) {
case 1:
     .... some code ...
case 2:
     .... some more code ... 
```

在这种情况下，如果 number 为 1，则执行 case 1 和 case 2。中断就像选择的 goto 结束，它永远不会结束范围。变量范围必须处于**选择级别**。

正如其他人所说，使用块来限制范围，即

```
switch (number) {
case 1:{
    String result = "...";
    break;
}
case 2:{
    String result = "...";
    break;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T04:35:31.993

因为没有“案例块”。

Everything inside the switch statement is in the same block. You can't declare the same variable twice in the same block.

If you want a 'case block' you have to write the `{` and `}` yourself.

# jquery - 脚本将 div 更改为固定位置 - 将 jquery 解决方案转换为 mootools

> ID：15397500
> 
> 赞同：0
> 
> 时间：2013-03-13T22:12:02.273
> 
> 标签：jquery, mootools

我需要有一个 div 在页面加载时位于屏幕中间，并与屏幕的其余部分一起滚动，当它到达屏幕顶部时更改为固定位置。我找到了一个用 jquery 编写的解决方案，但我在 mootools 中需要它。谁能帮我这个？

```
function sticky_relocate() {
var window_top = $(window).scrollTop();
var div_top = $('#right-column').offset().top;
  if (window_top > div_top)
    $('#contact').addClass('fixed')
  else
    $('#contact').removeClass('fixed');
}
 $(function() {
$(window).scroll(sticky_relocate);
sticky_relocate();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:30:48.927

```
function sticky_relocate() {
    var window_top = $(window).getScroll().y;
    var div_top = $('right-column').getPosition().y;

    if (window_top > div_top)
        $('contact').addClass('fixed')
    else
        $('contact').removeClass('fixed');
}

$(window).addEvent('scroll', function(){
    sticky_relocate();
});
sticky_relocate(); 
```

# c - 在 C 中，结构成员可以使用与类型相同的名称吗？

> ID：15397502
> 
> 赞同：4
> 
> 时间：2013-03-13T22:12:11.877
> 
> 标签：c, syntax, struct

例如，以下是有效的 C 代码吗？

```
typedef struct {
    /* ... */
} foo;

typedef struct {
    foo foo; /* Is it ok that 'foo' == 'foo'? */
} bar; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T22:15:47.407

是的，这是有效的 C（尽管它不可​​读，应该避免使用）。

类型标识符和结构成员标识符存在于不同的名称空间中。

参见 C99, 6.2.3p1 标识符的命名空间：

> [...] 不同类别的标识符有单独的名称空间，如下所示： — 标签名称（通过标签声明和使用的语法消除歧义）；
> 
> — 结构、联合和枚举的标签 [...]
> 
> ——结构或工会的成员；每个结构或联合对其成员都有一个单独的名称空间 [...]
> 
> — 所有其他标识符，称为普通标识符 [...]

# ios - AVAssetReader Crash：轨道必须都具有媒体类型 AVMediaTypeAudio'

> ID：15397504
> 
> 赞同：0
> 
> 时间：2013-03-13T22:12:24.750
> 
> 标签：ios, avassetreader

我正在阅读 AVURLAsset 并通过以下调用初始化阅读器

```
AVAssetReaderOutput *assetReaderOutput =
[AVAssetReaderAudioMixOutput
 assetReaderAudioMixOutputWithAudioTracks:songAsset.tracks
 audioSettings: nil]; 
```

songAsset (AVURLAsset) 使用 MPMediaItems URLAsset 属性进行初始化。

我在某些资产上因此而崩溃。

```
[AVAssetReaderAudioMixOutput initWithAudioTracks:audioSettings:] tracks must all have media type AVMediaTypeAudio' 
```

如果 MPMediaItem 是音频资产并在 iTunes 中播放，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T20:25:50.017

代替`songAsset.tracks`，使用`[songAsset tracksWithMediaType:AVMediaTypeAudio]`代替。某些资产具有视频和音频轨道，例如 iTunes 音乐视频。

尝试这个

```
NSArray <AVassetTrack *> *audioTracks = [songAsset tracksWithMediaType: AVMediaTypeAudio];
assetReaderOutput = [AVAssetReaderAudioMixOutput assetReaderAudioMixOutputWithAudioTracks: audioTracks
                                                                            audioSettings: nil]; 
```

# r - 当所有出现的自变量都是 NA 时的线性模型

> ID：15397510
> 
> 赞同：5
> 
> 时间：2013-03-13T22:12:35.767
> 
> 标签：r, dataframe, lm, na

我正在寻找有关如何在所有出现的独立/解释变量都是 NA（即`x3`以下）时处理线性回归中的 NA 的建议。

我知道显而易见的解决方案是从模型中排除有问题的自变量/解释变量，但我正在遍历多个区域，并且**不希望**每个区域都有不同的功能形式。

下面是一些示例数据：

```
set.seed(23409)
n <- 100

time <- seq(1,n, 1)
x1 <- cumsum(runif(n))           
y  <- .8*x1 + rnorm(n, mean=0, sd=2)
x2 <- seq(1,n, 1)       
x3 <- rep(NA, n)            
df <- data.frame(y=y, time=time, x1=x1, x2=x2, x3=x3)

# Quick plot of data
library(ggplot2)
library(reshape2)
df.melt <-melt(df, id=c("time"))

p <- ggplot(df.melt, aes(x=time, y=value)) + 
  geom_line() + facet_grid(variable ~ .)
p 
```

我已阅读文档`lm`并尝试了各种`na.action`设置但均未成功：

```
lm(y~x1+x2+x3, data=df, singular.ok=TRUE)

lm(y~x1+x2+x3, data=df, na.action=na.omit)
lm(y~x1+x2+x3, data=df, na.action=na.exclude)

lm(y~x1+x2+x3, data=df, singular.ok=TRUE, na.exclude=na.omit)
lm(y~x1+x2+x3, data=df, singular.ok=TRUE, na.exclude=na.exclude) 
```

有没有办法让 lm 无错误地运行，并简单地返回一个系数，以反映相关变量缺乏解释能力（即零或 NA）的解释性反映？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:00:43.300

您将无法包含包含所有`NA`值的列。它会做一些奇怪的事情`model.matrix`

```
 x1 <- 1:5
 x2 <- rep(NA,5)

 model.matrix(~x1+x2) 
     (Intercept) x1 x2TRUE
attr(,"assign")
[1] 0 1 2
attr(,"contrasts")
attr(,"contrasts")$x2
[1] "contr.treatment" 
```

因此，您的替代方法是根据数据以编程方式创建模型公式。

就像是...

```
make_formula <- function(variables, data, response = 'y'){
   if(missing(data)){stop('data not specified')}
   using <-  Filter(variables,f= function(i) !all(is.na(data[[i]])))

   deparse(reformulate(using, response))
 }

 variables <- c('x1','x2','x3')

make_formula(variables, data =df)

[1] "y ~ x1 + x2" 
```

我曾经`deparse`返回一个字符串，这样`environment`在函数中创建公式就不会出现问题。`lm`可以愉快地接受一个有效公式的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T19:53:23.113

这是一个想法：

```
set.seed(23409)
n <- 100

time <- seq(1,n, 1)
x1 <- cumsum(runif(n))           
y  <- .8*x1 + rnorm(n, mean=0, sd=2)
x2 <- seq(1,n, 1)       
x3 <- rep(NA, n)            
df <- data.frame(y=y, time=time, x1=x1, x2=x2, x3=x3)

replaceNA<-function(x){
  if(all(is.na(x))){
    rep(0,length(x)) 
  } else x

} 

lm(y~x1+x2+x3, data= data.frame(lapply(df,replaceNA)))
Call:
lm(formula = y ~ x1 + x2 + x3, data = data.frame(lapply(df, replaceNA)))

Coefficients:
(Intercept)           x1           x2           x3  
    0.05467      1.01133     -0.10613           NA  

lm(y~x1+x2, data=df)
Call:
lm(formula = y ~ x1 + x2, data = df)

Coefficients:
(Intercept)           x1           x2  
    0.05467      1.01133     -0.10613 
```

因此，您将仅包含`NA`'s 的变量替换为仅包含 0 的变量。你得到系数值 NA，但模型拟合的所有相关部分都是相同的（期望 qr 分解，但如果需要相关信息，可以轻松修改）。请注意，组件`summary(fit)$alias`（请参阅 参考资料`?alias`）可能有用。

这似乎与您的另一个问题有关：[Replace lm coefficients in [r]](https://stackoverflow.com/questions/15417680/replace-lm-coefficients-in-r)

# java - 单元测试模拟注入

> ID：15397512
> 
> 赞同：1
> 
> 时间：2013-03-13T22:12:42.083
> 
> 标签：java, spring, hibernate, junit, mockito

我正在尝试对我的课程进行单元测试，并模拟 DAO 以提供可预测的结果。尽管如此，当我收到休眠错误时，似乎仍在调用我的 DAO 方法。

> org.hibernate.exception.GenericJDBCException：找不到站 TST。

这个错误是我的数据库不包含 TST 的结果，但是因为我模拟了 DAO，所以不应该调用它吗？我如何模拟调用，以便甚至不命中数据库。

这是我设置模拟的方式

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:applicationContext.xml" })
public class MyServiceTest{

    @Autowired
    private MyService service;

    private MyDAO dao;

    private LinkedList objs;    

    @Before
    public void init() throws SecurityException, NoSuchFieldException,
            IllegalArgumentException, IllegalAccessException {

        // mock the dao for predictable results
        dao = mock(MyDAO.class);

        when(dao.myDBCall(anyString(), any(Date.class))).thenReturn(legs);
        Field f = MyService.class.getDeclaredField("dao");
        f.setAccessible(true);
        f.set(service, dao);

    }

    @Test
    public void testCall() {
        // construct our sample leg data
        legs = new LinkedList();
//fill in my stub data i want to return

        Collections.shuffle(legs);

        List results = service.testingCall("TST", new Date()); // this fails because service is using the dao, but it is making a call to the DB with this garbage 'Test' param rather than just returning 'legs' as stated in my when clause
        assertThat(results, not(nullValue()));

    }

    @Test
    public void testGetGates() {
        // fail("Not yet implemented");
    }

    @Test
    public void testGetStations() {
        // fail("Not yet implemented");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:19:06.747

我认为你`Service`是由 spring 实例化的，并且`Dao`在`application-context.xml`你尝试将你的模拟注入你的服务之前你就得到了错误。

我喜欢用来测试我的服务的一件事是`Autowired`构造函数，然后在我的测试中，我没有通过 spring 实例化我的服务，而是使用构造函数和模拟。

```
private MyDao myDao;

@Autowired
public MyService(MyDao myDao){
this.myDao = myDao;
} 
```

然后在你的测试中：

```
MyService myService = new Myservice(mockedDao); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:26:25.480

首先，而不是`Field f = MyService.class.getDeclaredField("dao");`检查[PowerMock](https://code.google.com/p/powermock/)（检查`Whitebox`）

模拟一个对象不会阻止休眠启动（因为您正在加载`applicationContext.xml`，所以休眠将尝试连接到数据库）。您的模拟 - 它只是一个测试实例的一个字段的 POJO，而不是 Spring bean 或类的替代品。

如果您只想测试 dao 和服务类（创建清晰的单元测试） - 从测试中删除与 Spring 相关的注释并自己进行（创建模拟，创建服务，将模拟放入服务并测试它）。

如果您想使用 Spring 上下文（创建集成测试）测试您的应用程序 - 为休眠创建[H2 内存数据库](https://boplicity.nl/confluence/display/Java/Unit+testing+JPA+-+Hibernate+components+with+in-memory+H2+database)并测试您的服务（不要忘记在 中清除它`@After`）。

第三种方式 - 将您的配置文件拆分为两个 Spring 配置文件（例如`dev`和`test`）并自己实现模拟（将模拟放到`test`、真正的休眠和 dao 到`dev`）。

如果您不想使用 Spring 配置文件 - 可以拆分`applicationContext.xml`为 3 个文件（用于普通 bean，用于真正的 DB bean，用于模拟）。

还有一种更性感的方式——使用[springockito-annotations](https://bitbucket.org/kubek2k/springockito/wiki/springockito-annotations)（但你仍然需要避免加载 hibernate）

# java - StringBuilder vs. .concat vs.“+”运算符在eclipse中的相 对性能与命令行不同吗？

> ID：15397515
> 
> 赞同：9
> 
> 时间：2013-03-13T22:12:52.383
> 
> 标签：java, eclipse, jvm

我正在阅读有关 java 编译器如何在可能的情况下将与“+”运算符连接的字符串编译为 StringBuilder 的实例，以及如何更好地使用简单的“+”运算符，因为它们[编译为相同的代码](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)。（除非您在 while 循环中构建字符串，在这种情况下，显然最好使用 StringBuilder。）

我还读到字符串上的 .concat 方法一直是最糟糕的[选择](http://kaioa.com/node/59)（以至于它被[Findbugs](http://findbugs.sourceforge.net/)变成了一个错误！）。

所以我决定自己在eclipse中编写一个小java类来测试它。我的结果让我有点吃惊。我发现，如果我在 Eclipse 和命令行中编译并运行它们，不同的方法相对更快或更慢。

首先我的日食结果是：

```
the total millis to concatenate with + was: 12154
the total millis to concatenate with .concat was: 8840
the total millis to concatenate with StringBuilder was: 11350
the total millis to concatenate with StringBuilder with a specified size was: 5611 
```

所以在eclipse中指定大小的StringBuilder最快，其次是.concat（奇怪），然后StringBuilder和“+”连接几乎相同。

然而，我在命令行上的结果是：

```
the total millis to concatenate with + was: 4139
the total millis to concatenate with .concat was: 8590
the total millis to concatenate with StringBuilder was: 10888
the total millis to concatenate with StringBuilder with a specified size was: 6033 
```

因此，当我从命令行编译并运行时，“+”运算符显然是最快的，其次是带有大小的 String builder，然后是 concat，最后是普通的 StringBuilder！

这对我来说没有意义。显然，我读到的所有 stackoverflow 答案都说 + 运算符编译成普通的旧 StringBuilder 实例必须是过时的。

有谁知道这里到底发生了什么？

我正在使用 jdk1.7.0_07，据我所知，eclipse 和我的命令行都引用了完全相同的一个。我知道的唯一区别是 eclipse 是使用“javaw”，但从我读过的内容来看，这不应该有所作为。

如果您想验证我没有做错任何事情，这是我的测试课程，但我很确定它是可靠的。

```
public class Test {

    static final int LOOPS = 100000000;
    static final String FIRST_STRING = "This is such";
    static final String SECOND_STRING = " an awesomely cool ";
    static final String THIRD_STRING = "to write string.";

    /**
     * @param args
     */
    public static void main(String[] args) {

        Test.plusOperator();
        Test.dotConcat();
        Test.stringBuilder();
        Test.stringBuilderSizeSpecified();

    }

    public static void plusOperator() {
        String localOne = FIRST_STRING;
        String localTwo = SECOND_STRING;
        String localThree = THIRD_STRING;

        Calendar startTime = Calendar.getInstance();
        for (int x = 0; x < LOOPS; x++) {
            String toPrint = localOne + localTwo + localThree;
        }
        Calendar endTime = Calendar.getInstance();
        System.out.println("the total millis to concatenate with + was: " + 
                (endTime.getTimeInMillis() - startTime.getTimeInMillis()));
    }

    public static void stringBuilder() {
        String localOne = FIRST_STRING;
        String localTwo = SECOND_STRING;
        String localThree = THIRD_STRING;

        Calendar startTime = Calendar.getInstance();
        for (int x = 0; x < LOOPS; x++) {
            StringBuilder toBuild = new StringBuilder()
                .append(localOne)
                .append(localTwo)
                .append(localThree);
        }
        Calendar endTime = Calendar.getInstance();
        System.out.println("the total millis to concatenate with StringBuilder was: " + 
                (endTime.getTimeInMillis() - startTime.getTimeInMillis()));
    }

    public static void stringBuilderSizeSpecified() {
        String localOne = FIRST_STRING;
        String localTwo = SECOND_STRING;
        String localThree = THIRD_STRING;

        Calendar startTime = Calendar.getInstance();
        for (int x = 0; x < LOOPS; x++) {
            StringBuilder toBuild = new StringBuilder(50)
                .append(localOne)
                .append(localTwo)
                .append(localThree);
        }
        Calendar endTime = Calendar.getInstance();
        System.out.println("the total millis to concatenate with StringBuilder with a specified size was: " + 
                (endTime.getTimeInMillis() - startTime.getTimeInMillis()));
    }

    public static void dotConcat() {
        String localOne = FIRST_STRING;
        String localTwo = SECOND_STRING;
        String localThree = THIRD_STRING;

        Calendar startTime = Calendar.getInstance();
        for (int x = 0; x < LOOPS; x++) {
            String toPrint = localOne.concat(localTwo).concat(localThree);
        }
        Calendar endTime = Calendar.getInstance();
        System.out.println("the total millis to concatenate with .concat was: " + 
                (endTime.getTimeInMillis() - startTime.getTimeInMillis()));
    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T22:31:31.287

在 Oracle JDK 1.7 (javac 1.7.0_17) 上，“+”运算符仍然使用 实现`StringBuilder`，如`javap -c`在类上运行以获取字节码所示（此处仅显示循环）：

```
public static void plusOperator();
Code:

  16: iload         4
  18: ldc           #10                 // int 100000000
  20: if_icmpge     53
  23: new           #11                 // class java/lang/StringBuilder
  26: dup           
  27: invokespecial #12                 // Method java/lang/StringBuilder."<init>":()V
  30: aload_0       
  31: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  34: aload_1       
  35: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  38: aload_2       
  39: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  42: invokevirtual #14                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
  45: astore        5
  47: iinc          4, 1
  50: goto          16

public static void stringBuilder();
Code:

  16: iload         4
  18: ldc           #10                 // int 100000000
  20: if_icmpge     50
  23: new           #11                 // class java/lang/StringBuilder
  26: dup           
  27: invokespecial #12                 // Method java/lang/StringBuilder."<init>":()V
  30: aload_0       
  31: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  34: aload_1       
  35: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  38: aload_2       
  39: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  42: astore        5
  44: iinc          4, 1
  47: goto          16 
```

这两者之间的唯一区别是带有“+”的版本将循环内的转换`StringBuilder`为a 。`String`

所以问题就变成了：为什么你的测试对相同的代码显示出如此不同的结果。或者更完整地说，*为什么这不是一个有效的微基准*。以下是一些可能的原因：

*   你在计算挂钟时间。这意味着您实际上是在测量 JVM 在运行测试时所做的一切。其中包括垃圾收集（这很重要，因为您正在创建大量垃圾）。您可以通过获取线程 CPU 时间来缓解这种情况。
*   您无需验证 HotSpot 何时或是否正在编译方法。这就是为什么您应该在任何微基准测试之前进行预热阶段：基本上，`main()`在运行实际测试之前运行多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:27:15.320

尝试放置`StringBuilder toBuild = new StringBuilder()`在循环上方。`String toPrint`与字符串相同`+=`，你会看到不同之处。
不要在循环中创建新的 String 和 StringBuilder。

# css - 如何覆盖 tr:nth-child(2n)？

> ID：15397516
> 
> 赞同：1
> 
> 时间：2013-03-13T22:12:53.983
> 
> 标签：css

站点范围的样式表具有以下形式的指令

```
#outerdiv tr:nth-child(2n) {
    background-color: #cccccc;
} 
```

我想覆盖包含在 div 中的表`#innerdiv`，而这些表又包含在 div 中`#outerdiv`。

我发现的唯一工作是：

```
#innerdiv tr:nth-child(2n) {
    background-color: #ffffff;
} 
```

在我看来，这似乎过于具体，而且可能非常脆弱。

是否有其他方法可以*撤销*站点范围的指令？*或者，有*没有办法为`#innerdiv`.

FWIW，以下不起作用：

```
#innerdiv tr {
    background-color: #ffffff; !important;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:14:57.840

尝试这个

```
#innerdiv tr {
    background-color: #ffffff !important;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T22:15:44.217

根据表的嵌套方式，如果第一个表是 的直接子表，则可以使用以下代码`#outerdiv`：

```
table tr {
    background-color: #fff
}
#outerdiv > table tr:nth-child(2n) {
    background-color: #cccc;
} 
```

# python - Google App Engine Python HTML 表

> ID：15397522
> 
> 赞同：1
> 
> 时间：2013-03-13T22:13:05.863
> 
> 标签：python, html, html-table

我正在尝试在 Google App Engine 应用程序中创建一个表，其中表中的背景颜色会根据输入定期更改。有谁知道如何做到这一点？这是我的代码：

```
 self.response.out.write("""
         <img src="/images/resistor.png" width = "150">
         <table border = "1">
         <tr height="150" >
         <td bgcolor="%s" width="35">  </td> <td bgcolor="%s" width="35">  </td> <td bgcolor="%s" width="35">  </td> <td bgcolor="%s" width="35"> </td> %(Red,Blue,Black,Green)
         </tr>
         </table>
          <form action="/sign" method="post">
            <div><textarea name="content" rows="3" cols="60"></textarea></div>
            <div><input type="submit" value="Sign Guestbook"></div>
          </form> """)
    self.response.out.write('</pre></body></html>') 
```

例如，%( ) 中的红色、绿色...颜色将是会发生变化的变量，因此在某一时刻它们都可能是红色或蓝色和黄色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:26:03.163

[这种类型的字符串格式已被弃用](http://docs.python.org/2/library/string.html#format-examples)。请`.format()`在新代码中使用该方法。例子：

```
self.response.out.write("""
     <img src="/images/resistor.png" width = "150">
     <table border = "1">
       <tr height="150" >
         <td bgcolor="{}" width="35">  </td> 
         <td bgcolor="{}" width="35">  </td> 
         <td bgcolor="{}" width="35">  </td> 
         <td bgcolor="{}" width="35">  </td>
       </tr>
     </table>
     <form action="/sign" method="post">
       <div><textarea name="content" rows="3" cols="60"></textarea></div>
       <div><input type="submit" value="Sign Guestbook"></div>
     </form> """.format( ('Red','Blue','Black','Green') ))
self.response.out.write('</pre></body></html>') 
```

对于基本之外的任何内容，请查看使用模板。模板系统的示例是 Jinja2 和 Django 模板。

# c++ - C++做while循环没有响应

> ID：15397524
> 
> 赞同：-10
> 
> 时间：2013-03-13T22:13:18.957
> 
> 标签：c++

嘿伙计们，我有一个简单的while循环，但是程序在运行时进入无响应状态，这是循环。

```
bool SetTime(const int hour,const int min,HWND sec)
{
    do 
    {
        time_t s=time(0);  
        tm t=*localtime(&s);
        itoa(t.tm_sec,buf3,10);
        SetWindowText(sec,buf3);
        if (hour == t.tm_hour && min == t.tm_min)
        {
              exit(0);
        }
        Sleep(1000);
     }
     while( hour == t.tm_hour && min >t.tm_min);
 } 
```

它每秒运行一次，当它到达适当的时间时它会停止

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:16:43.253

假设 Win32 由于 HWND，您正在阻止事件循环。如果您想推迟操作，请查看使用计时器。

# ruby-on-rails - Rails模型散列，排除属性

> ID：15397537
> 
> 赞同：11
> 
> 时间：2013-03-13T22:14:32.730
> 
> 标签：ruby-on-rails, json

我正在尝试形成一个如下所示的 json 响应：

```
{
  "user": {
    "birthday": "2013-03-13",
    "email": "example@example",
    "id": 1,
    "name": null,
    "username": "example"
  },
   "other_data": "foo"
} 
```

之前，当我刚刚返回用户时，我使用

```
render :json => @user, :except => [:hashed_password, :created_at, :updated_at] 
```

防止发送 hashed_pa​​ssword、created_at 和 updated_at 属性。有没有办法做到这一点，但也允许与用户一起发送额外的数据？现在我只是将要发送到哈希的属性一个一个添加，但这显然并不理想。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-13T22:26:43.577

渲染 json 数据首先会自动调用模型上的“as_json”，它会返回一个 ruby​​ 哈希。之后，会调用 'to_json' 以获取哈希的字符串表示形式。

为了实现你想要的，你可以这样调用：

```
render :json => {
  :user => @user.as_json(:except => [:hashed_password]),
  :some_other_data => {}
} 
```

在这种情况下，没有响应 'as_json' 的对象，因此控制器只需调用 'to_json' 将您的哈希转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:21:44.787

我建议使用这个 gem：[https ://github.com/fabrik42/acts_as_api](https://github.com/fabrik42/acts_as_api)

# ios - Flowplayer Flash 覆盖功能和 ios 兼容性

> ID：15397544
> 
> 赞同：2
> 
> 时间：2013-03-13T22:15:15.790
> 
> 标签：ios, flash, video, flowplayer, overlays

我有一个 Flowplayer 闪存问题。我正在使用多个视频叠加层，播放器可以在多个桌面浏览器上完美运行，但不能在 ios 设备上运行。我已经尝试过 iPad js 包含和 .ipad()。但没有任何效果。谁能指出这里的缺陷或解决方法以使其在 ios 设备上播放？这是完整的代码...谢谢！

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>

<script type="text/javascript" src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>

<script src="http://www.angelmedflight.com/flowplayer/example/flowplayer-3.2.6.min.js"></script>
<script src="http://www.angelmedflight.com/flowplayer/flowplayer.ipad-3.2.2.min.js"></script>

<style>
#overlay {
    display: none;
    padding: 0px;
    width: 720px;
    height: 466px;
    background-image: url('http://www.angelmedflight.com/assets/images/BlackBox.png');
}
.close {
    background: url('http://www.angelmedflight.com/assets/images/close.png') no-repeat;
    position: absolute;
    top: 2px;
    right: 5px;
    display: block;
    width: 35px;
    height: 35px;
    cursor: pointer;
}
.close:hover {
    background: url('http://www.angelmedflight.com/assets/images/closeHover.png') no-repeat;
}
#player {
    display: block;
    width: 640px;
    height: 360px;
    margin-top: 40px;
    margin-left: 40px;
    border-top: 1px solid #000;
    border-left: 1px solid #111;
    border-right: 1px solid #444;
    border-bottom: 1px solid #666;
    border: 1px solid #000;
}
#player *:focus {
    outline-style: none;
}
</style>

<script>

$(function () {
    var player = $f("player", "http://angelmedflight.com/flowplayer/flowplayer-3.2.15.swf").ipad();

    $("a[rel]").overlay({
      mask: {
        color: '#000',
        opacity: 0.8
      },
      onLoad: function () {
        player.play(this.getTrigger().attr("href"));
      },
      onClose: function () {
        player.unload();
      }
    });

  });

</script>

</head>

<body>

<div class="ls-layer">
    <img class="ls-bg" src="assets/images/carousel/video1.jpg" />

    <a rel="#overlay" href="http://www.angelmedflight.com/video/Process_640x360_vegas_i.mp4"><img class="ls-s1" src="http://www.angelmedflight.com/assets/images/carousel/layer_play_button.png" /></a>

</div>

<div id="overlay">
    <a class="close"></a>           

    <div id="player">&nbsp;</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T16:29:10.993

当您说“它不起作用”时，究竟是什么体验？

它根本不加载视频还是只是不将其加载到叠加层中？

我相信该插件以全屏模式打开播放器并自定义此模式的外观。

当播放器在 iOS 上以全屏模式加载时，它会在系统播放器中呈现，因此您尝试使用的 JS 将无效。

如果它根本不播放，我无法帮助你。也许您可以提供更多信息。

# php - 使用 SQLITE 和 PHP PDO 插入失败 - 一般错误：25 绑定或列索引超出范围

> ID：15397545
> 
> 赞同：1
> 
> 时间：2013-03-13T22:15:19.433
> 
> 标签：php, sqlite, pdo, slim

我正在尝试使用 Slim 框架中的 PHP PDO 函数将一些数据插入到我的数据库中，但是当我使用 curl 发布时，我收到以下错误；

*SQLSTATE[HY000]：一般错误：25 绑定或列索引超出范围*

我正在使用的 curl 命令是；

```
curl -i -X POST -H 'Content-Type: application/json' -d '{"category_name":"cat3",     "item_name":"test"}' http://localhost/api/add 
```

有问题的PHP函数是；

## 错误函数

```
function addContent() {
    $request = \Slim\Slim::getInstance()->request();
    $content = json_decode($request->getBody());
    $sql = "insert into category (category_name) values (:category_name);
    insert into item (category_id,item_name) values 
    ((select category_id from category where category_name = :category_name2),     :item_name);";
    try {
        $db = getConnection();
        $stmt = $db->prepare($sql);
        $stmt->bindParam("category_name", $content->category_name);
        $stmt->bindParam("category_name2", $content->category_name);
        $stmt->bindParam("item_name", $content->item_name);
        $stmt->execute();
        $db = null;
        echo json_encode($content);
    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
} 
```

sql 基本上将一个新类别添加到类别表中，然后将一个新项目添加到引用新创建的类别的项目表中。如果我在 sqlite 中运行查询，那么它似乎可以很好地添加所需的行，查询是；

```
insert into category(category_name) values ('cat2');
insert into item (category_id,item_name) values
((select category_id from category where category_name = 'cat2'),'item3'); 
```

我为已经存在的类别写了类似的东西，似乎工作正常；

## 类似的工作功能

```
function addContent() {
    $request = \Slim\Slim::getInstance()->request();
    $content = json_decode($request->getBody());
    $sql = "insert into item (category_id,item_name) values
((select category_id from category where category_name = :category_name), :item_name);";
    try {
        $db = getConnection();
        $stmt = $db->prepare($sql);
        $stmt->bindParam("category_name", $content->category_name);
        $stmt->bindParam("item_name", $content->item_name);
        $stmt->execute();
        $db = null;
        echo json_encode($content);
    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
} 
```

通过阅读，我相信我需要分别设置两个 :category_name 引用，这就是我有 :category_name 和 :category_name2 的原因。否则，据我所知，这应该按预期工作。任何意见是极大的赞赏。

## 工作功能由 IMSoP 和 jeroen 的回答提供

这现在可以按要求工作，尽管可能不是最漂亮的解决方案，但可以完成工作。谢谢各位的建议。

```
function addContent() {
    $request = \Slim\Slim::getInstance()->request();
    $content = json_decode($request->getBody());
    $sql_category = "insert into category (category_name) values (:category_name);";
    $sql_item = "insert into item (category_id,item_name) values 
((select category_id from category where category_name = :category_name),     :item_name);";
    try {
        $db = getConnection();

        $stmt_category = $db->prepare($sql_category);
        $stmt_category->bindParam("category_name", $content->category_name);
        $stmt_category->execute();

        $stmt_item = $db->prepare($sql_item);
        $stmt_item->bindParam("category_name", $content->category_name);
        $stmt_item->bindParam("item_name", $content->item_name);
        $stmt_item->execute();

        $db = null;
        echo json_encode($content);
    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:26:25.533

您尝试准备的 SQL 字符串包含 2 个 SQL 语句。我不确定，但 SQLite（或 PDO 驱动程序）可能不支持这一点，所以只会准备其中一个，这意味着另一个中的占位符没有定义。

尝试将其分成两个单独的语句，每个语句分别准备和执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:24:30.523

问题可能是 PDO 不能在一个查询中执行多个 sql 语句。要查看这是否是问题所在，只需将查询拆分为不同的调用。

~~您也可以[在此处检查](https://stackoverflow.com/questions/6346674/pdo-support-for-multiple-queries-pdo-mysql-pdo-mysqlnd)您的系统是否满足在 PDO 中运行多个查询的要求。~~

# javascript - 如何为一个函数使用多个事件处理程序？

> ID：15397546
> 
> 赞同：-1
> 
> 时间：2013-03-13T22:15:23.890
> 
> 标签：javascript, javascript-events

我如何组合多个事件处理程序，

```
document.getElementById("prix").onchange = function(e)
{
document.getElementById("hhh").innerHTML = this.value*100;
};
document.getElementById("prix").onkeyup = function(e)
{
document.getElementById("hhh").innerHTML = this.value*100;
}; 
```

我知道这太可怕了我这样做，那么我该如何结合它们呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:16:33.947

只需定义函数并使用它两次

```
var handler = function (e) { 
  document.getElementById("hhh").innerHTML = this.value*100;
};

document.getElementById("prix").onchange = handler;
document.getElementById("prix").onkeyup = handler; 
```

# dynamics-crm-2011 - 以编程方式更新早期绑定帮助文件

> ID：15397547
> 
> 赞同：2
> 
> 时间：2013-03-13T22:15:26.887
> 
> 标签：dynamics-crm-2011, dynamics-crm

有没有办法以编程方式更新主要使用 CRM 2011 中的 CrmSvcUtil.exe 创建的帮助文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:32:17.070

由于 CrmSvcUtil 基本上是一个控制台应用程序，您应该能够使用 C# 应用程序以编程方式启动它。

[如何在隐藏控制台的情况下运行 C# 控制台应用程序](https://stackoverflow.com/questions/836427/how-to-run-a-c-sharp-console-application-with-the-console-hidden)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:30:43.253

您可以为您运行一个批处理文件，但我猜您希望它在您创建/更新实体时运行。我认为没有办法让 CRM 检测到此类更改并在您的计算机上执行文件。我的回答是否定的，但如果有人知道一种方法并纠正我，那就太好了。

# c# - 并行循环内的局部变量线程安全

> ID：15397552
> 
> 赞同：4
> 
> 时间：2013-03-13T22:15:38.217
> 
> 标签：c#, parallel-processing, parallel.foreach

我`cnt`在 nested 中有一个变量 () `parallel.foreach`。我运行这个程序，显然它运行良好。有人知道这段代码真的是线程安全的吗？`parallel`是否可以在循环内定义变量？

谢谢你。

```
 object obj = new object();
    int total=0;

    Parallel.For(0, 2, i =>
    {
        Parallel.For(0, 1000000, j =>
        {
            int cnt = 0;
            if ((arr[i, j] % 2) == 0)
            {
                Interlocked.Increment(ref cnt);
            }
            lock (obj)
            {
                total= total+ (cnt / 2);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T22:17:28.130

此代码是线程安全的 - 唯一的共享数据 ( `total`) 已正确同步。即使不使用它也是线程安全的`Interlocked.Increment`（即：在您编辑之前）。

但是，它*效率*不高。

[将重载与本地初始化程序和最后的委托](http://msdn.microsoft.com/en-us/library/dd783586.aspx)一起使用会好得多。

```
int total=0;
Parallel.For(0, 2, 
{
    Parallel.For(0, 1000000, 
      local => 0,
      (j, state, local) =>
      {
        if ((arr[i, j] % 2) == 0)
        {
           ++local;
        }
        return local;
      },
      local => Interlocked.Increment(ref total, local)
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:18:19.403

该代码确实是安全的，因为该`lock`语句充当完整的围栏操作。它确保增量操作是原子的并且不会受到来自其他线程的竞争

# javascript - 用 JS 获取选项标签的值

> ID：15397558
> 
> 赞同：-2
> 
> 时间：2013-03-13T22:15:56.187
> 
> 标签：javascript, jquery

我需要使用 javascript 从使用我下载的这个 jq 插件创建的选择中获取选项标签的值。

```
$(document).ready(function() {
    $("<select />").appendTo("#menu");

    $("<option />", {
        "selected": "selected",
        "value": "",
        "text": "Ir a...",
    }).appendTo("#menu select");

    $("#menu li a").each(function() {
        var el = $(this);
        $("<option/>",{
            "value": el.attr("href"),
            "text": el.text()
        }).appendTo("#menu select");

    });

    $("#menu select").change(function(){
        window.location = $(this).find("option:selected").val();
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:20:54.303

假设您有一些这样的 html 代码：

```
<select id="title">
  <option value="1">Mr</option>
  <option value="2">Mrs</option>
  <option value="3">Miss</option>
</select> 
```

现在用户已经选择了第二个选项：Mrs. 获取值（在本例中为“2”）：

```
$("select#title").val(); 
```

要获取所选选项的文本（在本例中为“夫人”）：

```
$("#title option:selected").text(); 
```

# vim - Vim：处理函数时检测到错误 37_MRU_LoadList：

> ID：15397567
> 
> 赞同：6
> 
> 时间：2013-03-13T22:16:34.050
> 
> 标签：vim

我不知道发生了什么，在集群中，无论何时我试图打开任何文件，无论它是否是新文件，我都会收到错误消息：

```
Error detected while processing function <SNR>37_MRU_LoadList:
line    5:
E684: list index out of range: 0
E15: Invalid expression: s:MRU_files[0] =~# '^\s*" Most recently edited files in Vim'
Press ENTER or type command to continue 
```

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T07:49:24.590

好像您正在使用[mru.vim - 插件来管理最近使用的 (MRU) 文件](http://www.vim.org/script.php?script_id=521)，并且不知何故存储文件已损坏。

尝试删除它：

```
:call delete(g:MRU_File) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-06T20:31:38.090

就像@balrok 在他的评论中所说的那样，这种情况似乎是在主分区空间不足时发生的。就我而言，我的集群空间仅限于 70G 左右。将所有数据文件移到另一个空间后，这个问题就解决了。

# ios - 我可以关闭当前未使用的 UIAppFonts 的文件描述符吗？

> ID：15397573
> 
> 赞同：3
> 
> 时间：2013-03-13T22:16:53.637
> 
> 标签：ios, uiwebview, file-descriptor, uifont, uiappfonts

我们将很多字体与我们的 iOS 应用程序捆绑在一起，并将它们全部放入`UIAppFonts`以加快加载速度。
（我们在内部使用它们`UIWebView`，它比使用加载文件快得多*）*`@font-face`。

然而，这导致我偶尔会收到这种警告：

```
Mar 13 23:07:16 iPad afcd[2582] <Error>: Max open files: 78
Mar 13 23:07:17 iPad mobile_house_arrest[2584] <Error>: Max open files: 78
Mar 13 23:07:17 iPad mobile_house_arrest[2586] <Error>: Max open files: 78
Mar 13 23:07:17 iPad mobile_house_arrest[2587] <Error>: Max open files: 78
Mar 13 23:07:17 iPad mobile_house_arrest[2588] <Error>: Max open files: 78 
```

这也与打开文件时的 I/O 异常有关。

我使用[这个片段](https://stackoverflow.com/a/8153026/458193)来找出泄漏的文件，看起来 iOS **在应用程序的整个生命周期中为****列出的每种字体保留了打开的文件描述符`UIAppFonts`**。

```
File Descriptor 8 number 9 in use for: Fonts/ABeeZee-Regular.ttf
File Descriptor 9 number 10 in use for: Fonts/ABeeZee-Regular.ttf
File Descriptor 10 number 11 in use for: Fonts/ABeeZee-Italic.ttf
File Descriptor 11 number 12 in use for: Fonts/ABeeZee-Italic.ttf
File Descriptor 12 number 13 in use for: Fonts/AmaticSC-Regular.ttf
File Descriptor 13 number 14 in use for: Fonts/AmaticSC-Regular.ttf
File Descriptor 14 number 15 in use for: Fonts/AmaticSC-Bold.ttf
File Descriptor 15 number 16 in use for: Fonts/AmaticSC-Bold.ttf
File Descriptor 16 number 17 in use for: Fonts/AnonymousPro-Bold.ttf
File Descriptor 17 number 18 in use for: Fonts/AnonymousPro-Bold.ttf
File Descriptor 18 number 19 in use for: Fonts/AnonymousPro-Regular.ttf
File Descriptor 19 number 20 in use for: Fonts/AnonymousPro-Regular.ttf 
```

对我们来说，这意味着大约有一百个打开的文件描述符，尽管`UIAppFonts`目前使用的不超过五个。有时，会出现重复的条目。

**`UIAppFonts`是否有强制关闭我目前不使用的文件描述符？**

如果没有，是否有另一种方法可以保持本地字体可用，`UIWebView`而无需求助于`@font-face`哪种方法很慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:50:23.723

> 如果没有，是否有另一种方法可以使 UIWebView 可以使用本地字体，而无需诉诸 @font-face 这很慢？

原来，有。

我们通过使用注册字体[`CTFontManagerRegisterFontsForURL`](http://developer.apple.com/library/ios/#documentation/Carbon/Reference/CoreText_FontManager_Ref/Reference/reference.html)和使用取消注册字体解决了这个问题[`CTFontManagerUnregisterFontsForURL`](http://developer.apple.com/library/ios/#documentation/Carbon/Reference/CoreText_FontManager_Ref/Reference/reference.html)。这使它们可用于`UIWebView`，因为您总是在使用它们之前注册字体`font-family`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-04T02:09:55.017

我在关闭与 Sprite Kit 操作关联的文件描述符时遇到问题，

```
playSoundFileNamed: 
```

他们从不关闭。所以他们吃掉了文件描述符，直到应用程序崩溃。我想出了一个关闭它们的方法。我不明白为什么它不适用于您的 UIAppFonts。

我修改了您在问题中引用的代码段。这是我的修改版，

```
#import <sys/types.h>
#import <fcntl.h>
#import <errno.h>
#import <sys/param.h>

-(void)closeFileDescriptorsForSounds
{
    int flags;
    int fd;
    char buf[MAXPATHLEN+1] ;
    int n = 1 ;

    for (fd = 0; fd < (int) FD_SETSIZE; fd++) {
        errno = 0;
        flags = fcntl(fd, F_GETFD, 0);
        if (flags == -1 && errno) {
            if (errno != EBADF) {
                return ;
            }
            else
                continue;
        }
        fcntl(fd , F_GETPATH, buf ) ;
        NSLog( @"File Descriptor %d number %d in use for: %s",fd,n , buf ) ;
        ++n ;

// My modifications to the snippet...

        NSString *str = [NSString stringWithUTF8String:buf];
        NSString *theFileName = [str lastPathComponent];

        if ([theFileName isEqualToString:@"LoudBang.mp3"])
        {
            NSLog(@"FD is LoudBang");
            NSFileHandle *loudBangHandle = [[NSFileHandle alloc] initWithFileDescriptor:fd closeOnDealloc:YES];
        }
        else if ([theFileName isEqualToString:@"QuietBang.mp3"])
        {
            NSLog(@"FD is QuietBang");
            NSFileHandle *quietBangHandle = [[NSFileHandle alloc] initWithFileDescriptor:fd closeOnDealloc:YES];
        }
    }
} 
```

我将 buf 转换为字符串，然后隔离文件名。然后我将文件名与我要关闭的已知文件进行了比较。当找到我要关闭的文件时，代码使用以下内容在文件描述符周围创建一个 NSFileHandle，

```
NSFileHandle *loudBangHandle = [[NSFileHandle alloc] initWithFileDescriptor:fd closeOnDealloc:YES]; 
```

这个 init 专门关闭了 NSFileHandle 的 dealloc 上的文件描述符（几乎立即关闭）。

让我们知道它是否适用于您的 UIAppFonts。

# php - 在mysql查询中插入文件大小列

> ID：15397574
> 
> 赞同：0
> 
> 时间：2013-03-13T22:17:00.213
> 
> 标签：php, mysql, file-upload

我正在尝试将文件大小列添加到我的 mysqli 查询中，但我不确定在此循环中执行此操作的正确方法。我试过了`$_FILES[file][size]`。但我不希望这会奏效。谁能启发我实现这一目标的正确方法。谢谢

```
 foreach  ($_FILES['file']['name'] as $key => $name) {

  if(move_uploaded_file($_FILES['file']['tmp_name'][$key],"test/$name"))
 {
  mysqli_query($db,"INSERT INTO files VALUES('$_GET[draft]','$name','$_FILES[file][size]')");
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:40:51.350

假设您的 HTML 代码中有

```
<form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="myFile1" />
    <input type="file" name="myFile2" />
    ....
    ...// other input and your submit input
</form> 
```

你的`$_FILES`遗嘱结构是

```
Array
(
    [myFile1] => Array
        (
            [name] => XXX
            [type] => XXX
            [tmp_name] => XXX
            [error] => UPLOAD_ERR_OK  (= 0)
            [size] => XXXX
        )

    [myFile2] => Array
        (
            [name] => XXXX
            [type] => XXXX
            [tmp_name] => XXXX
            [error] => UPLOAD_ERR_OK
            [size] => XXXX
        )
    etc..
) 
```

然后你可以做

```
// Loop on each entry of $_FILES
foreach($_FILES as $nameOfInputFile => $fileStructure) {

    // Check the error status first, skip the file if an error occured
    if ($fileStructure['error'] != UPLOAD_ERR_OK)
        continue;

    // $fileStructure contain the current file data
    if(move_uploaded_file($fileStructure['tmp_name'],"test/" . $fileStructure['name']))
    {
        mysqli_query($db,"INSERT INTO files VALUES('" . $_POST['draft'] . "','$name','" . $fileStructure['size'] . "')");
    }

} 
```

注意：当您发布文件时，您的草稿值应使用`$_POST`

# java - TCP 客户端/服务器

> ID：15397579
> 
> 赞同：0
> 
> 时间：2013-03-13T22:17:27.050
> 
> 标签：java, sockets, tcp

我有这段代码，由于某种原因，它卡在服务器端的 readline() 行，总是等待客户端，但另一端的客户端发送数据。

服务器和客户端的代码都在下面可用。

# 服务器代码

```
import java.io.*;
import java.net.*;

public class TCPServer {
  public static final int SERVER_PORT = 6789;

  public static void main(String argv[]) throws Exception {
    String clientSentence;
    String capitalizedSentence;

    ServerSocket welcomeSocket = new ServerSocket(SERVER_PORT);

    while (true) {
      Socket connectSocket = welcomeSocket.accept();
      InputStream sin = connectSocket.getInputStream();
      BufferedReader inFromClient = new BufferedReader(new InputStreamReader(sin));

      PrintWriter outToClient = new PrintWriter(connectSocket.getOutputStream(), true);
      clientSentence = inFromClient.readLine();

      capitalizedSentence = clientSentence.toUpperCase() + "\r\n";

      outToClient.print(capitalizedSentence);
    }
  }
} 
```

# 客户代码

```
import java.io.*;
import java.net.Socket;

public class TCPClient {

  public static void main(String[] args) throws Exception { 
    String hostName = "localhost";
    int port = 6789;
    String sentence; 
    String modifiedSentence; 

    BufferedReader inFromUser = new BufferedReader(new InputStreamReader(System.in));
    Socket clientSocket = new Socket(hostName, port);

    PrintWriter outToServer =  null;
    clientSocket.getOutputStream();

    BufferedReader inFromServer = null;
    inFromServer=new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
    sentence = inFromUser.readLine(); 
    outToServer.print(sentence + "\r\n");

    modifiedSentence = inFromServer.readLine();
    System.out.println("FROM SERVER: " +modifiedSentence); 
    clientSocket.close(); 
  } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:25:18.177

在修复你的语法错误之后`outToServer`，我认为问题在于你在`PrintWriter`客户端使用输出流的方式。[从文档中](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)：

> 与 PrintStream 类不同，如果启用了自动刷新，它将仅在调用 println、printf 或 format 方法之一时完成，而不是在碰巧输出换行符时完成。这些方法使用平台自己的行分隔符概念，而不是换行符。

由于您使用`print`的是手动附加的新行，因此消息永远不会刷新到套接字的输出流。我相信您可以`println`改用以下方法来解决此问题：

```
outToServer.println(sentence); 
```

更好的是使用`DataInputStream`and`DataOutputStream`而不是`BufferedReader`and `PrintWriter`，因为它们更适合通过套接字流发送和接收任意数据。

# node-gyp - 是否有用于在 node-gyp 中列出源的通配符机制

> ID：15397582
> 
> 赞同：17
> 
> 时间：2013-03-13T22:17:32.617
> 
> 标签：node-gyp

我正在`binding.gyp`为我的新 node.js 模块编写文件。我的所有源文件都在`src/`子目录下。我想在构建模块时使用所有这些。我不想每次添加新的 cpp 文件时都修改 binding.gyp，而是想通过某种通配符机制列出所有 cpp 文件。node-gyp 支持吗？类似以下的东西（不起作用

```
{
  'targets' : [
      {
          'target_name' : 'mymod',
          'sources' : 'src/*.cpp'
      }
   ]
} 
```

我查看了[https://code.google.com/p/gyp/wiki/InputFormatReference](https://code.google.com/p/gyp/wiki/InputFormatReference)，但没​​有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-14T20:07:30.017

弄清楚了

```
{
  'targets' : [
      {
          'target_name' : 'mymod',
          'sources' : [ '<!@(ls -1 src/*.cpp)' ],
      }
   ]
} 
```

看看[这个链接](https://chromium.googlesource.com/external/gyp/+/md-pages/docs/InputFormatReference.md#Command-Expansions)

**更新**

上面的解决方案不能跨平台移植。这是一个便携式版本：

```
{
  'targets' : [
      {
          'target_name' : 'mymod',
          'sources' : [  "<!@(node -p \"require('fs').readdirSync('./src').map(f=>'src/'+f).join(' ')\")" ],
      }
   ]
} 
```

本质上，它`ls`通过使用节点`fs`模块列出目录内容的 Javascript 代码替换了特定于平台的目录列表命令 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T18:58:09.180

一个更便携的版本（不依赖于节点，而是依赖于 python）：

```
"<!@(python -c \"import os; print '\n'.join(['%s' % x for x in os.listdir('.') if x[-3:] == '.cc' and 'test' not in x])\")" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-27T09:34:06.263

为了过滤特定的文件扩展名`cpp`并支持预编译`libraries` `.a`文件，我稍微修改了接受的解决方案：

```
'sources': [
        'jamspell.cpp',
        "<!@(node -p \"require('fs').readdirSync('./src').filter(f=>f.endsWith('.cpp')).map(f=>'src/'+f).join(' ')\")",
        "<!@(node -p \"require('fs').readdirSync('./src/jamspell').filter(f=>f.endsWith('.cpp')).map(f=>'src/jamspell/'+f).join(' ')\")"
        ],
        'include_dirs': [
            "<!@(node -p \"require('node-addon-api').include\")"
        ],
        'libraries': [
          "<!@(node -p \"require('fs').readdirSync('./lib/contrib').filter(f=>f.endsWith('.a')).map(f=>'lib/contrib/'+f).join(' ')\")"
        ],
        'dependencies': [
            "<!(node -p \"require('node-addon-api').gyp\")"
        ], 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T09:39:28.590

如果有人想在某个文件夹中包含所有子文件和文件夹（在行尾定义，此处为“源”）：

```
{
  "targets": [
    {
      "target_name": "addon",
      "sources": [ 
            "<!@(node -p \"var fs=require('fs'),path=require('path'),walk=function(r){let t,e=[],n=null;try{t=fs.readdirSync(r)}catch(r){n=r.toString()}if(n)return n;var a=0;return function n(){var i=t[a++];if(!i)return e;let u=path.resolve(r,i);i=r+'/'+i;let c=fs.statSync(u);if(c&&c.isDirectory()){let r=walk(i);return e=e.concat(r),n()}return e.push(i),n()}()};walk('./sources').join(' ');\")"
        ]
    }
  ]
} 
```

（基于，但不完全是：[node.js fs.readdir 递归目录搜索](https://stackoverflow.com/questions/5827612/node-js-fs-readdir-recursive-directory-search/60946635#60946635)）

# api - 亚马逊产品 API 不尊重 ResponseGroups

> ID：15397584
> 
> 赞同：1
> 
> 时间：2013-03-13T22:17:41.133
> 
> 标签：api, node.js, amazon-web-services, amazon, amazon-product-api

我试图让所有产品的价格在 12.50 到 11.50 之间。我正在使用[Node-APAC](https://github.com/dmcquay/node-apac)来处理我对 Amazon 产品 API 的请求。这是我的请求代码：

```
exports.search = function(req, res){

  OperationHelper = require('apac').OperationHelper;

  var opHelper = new OperationHelper({
      awsId: process.env.AMZ_ACCESS_KEY_CODE,
      awsSecret: process.env.AMZ_SECRET_ACCESS_KEY,
      assocId: process.env.AMZ_ASSOCIATE_ID
  });

  opHelper.execute('ItemSearch', {
      'SearchIndex': 'All',
      'Keywords': ' ',
      'MaximumPrice': 12.50,
      'MinimumPrice': 11.50,
      'ResponseGroup': 'Medium'
  }, function(error, results) {
     res.send(results);
  });
}; 
```

响应不会将结果限制为[Medium ResponseGroup](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/RG_Medium.html)。[你可以在这里](http://pastie.org/6479677)看到一些完整的回应（它是巨大的）。这是结构：

```
{
    ItemSearchResponse: {
        $: {...},
        OperationRequest: [...],
        Items: [
            {
                Request: [...],
                TotalResults: [...],
                TotalPages: [...],
                MoreSearchResultsUrl: [...],
                Item: [
                    {
                        ASIN: [...],
                        DetailPageURL: [...],
                        ItemLinks: [...],
                        SmallImage: [...],
                        MediumImage: [...],
                        LargeImage: [...],
                        ImageSets: [...],
                        ItemAttributes: [...],
                        OfferSummary: [...]
                    },
                    {...},
                    {...},
                    {...},
                    {...}
                ]
            }
        ]
    }
} 
```

它没有返回文档所说的应该包含在 Medium ResponseGroup 中的内容。它返回了一堆其他不必要的东西。任何帮助表示赞赏！

* * *

注意：它也会退回不符合价格范围的产品。这些问题可能是相关的。那里的任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T01:07:55.617

根据[ItemSearch 操作的亚马逊产品广告文档](http://docs.aws.amazon.com/AWSECommerceService/2011-08-01/DG/ItemSearch.html)，“MinimumPrice (resp.MaximumPrice)”指定要退货的商品的最低（或最高）价格。价格以最低货币面值表示，例如，美分，对于例如，3241 代表 32.41 美元。”。

因此，如果您更改以下两个参数的值：

```
'MaximumPrice': 12.50,
'MinimumPrice': 11.50, 
```

和

```
'MaximumPrice': 1250,
'MinimumPrice': 1150, 
```

价格过滤应该起作用。至于 ResponseGroup，我建议您通过“Small,OfferSummary”（根据我对您的问题[“如何指定亚马逊产品 API 返回的内容”](https://stackoverflow.com/questions/15397263/how-to-specify-what-amazon-product-api-returns)的回答）。

# java - 为什么这个 postDelayed 不会永远运行？

> ID：15397587
> 
> 赞同：0
> 
> 时间：2013-03-13T22:17:58.053
> 
> 标签：java, android, handler, postdelayed

这是我的代码，但理论上它应该每秒发布此日志消息，直到永远，但事实并非如此。有任何想法吗？我的目标是让它永远运行，但 while 循环也不起作用。

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.Menu;

public class Blink extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_blink);

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            public void run() {
            Log.d("AAA", "Test");
            }
        }, 1000);

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T22:21:01.790

在跑步者内添加： `handler.postDelayed(this, 1000);`

# ios - 移动 CALayer 帧但不移动剪辑蒙版

> ID：15397593
> 
> 赞同：4
> 
> 时间：2013-03-13T22:18:32.307
> 
> 标签：ios, objective-c, core-graphics, calayer

我想通过设置它的框架来移动一个图层，但也没有移动图层剪辑。

我创建了一个创建如下的图层：

```
layer = [CustomLayer layer];
layer.frame = CGRectMake(50, 50, 100, 30);
[layer setNeedsDisplay];
[self.view.layer addSublayer:layer]; 
```

还有一个像这样的剪辑层：

```
clipLayer = [CAShapeLayer layer];
UIBezierPath *clipPath = [UIBezierPath bezierPathWithRoundedRect:layer.bounds
                                                    cornerRadius:10.0f];
clipLayer.path = clipPath.CGPath;
layer.mask = clipLayer; 
```

但是，稍后在我的代码中，如果我设置图层框架：

```
layer.frame = CGRectOffset(layer.frame, -20.0, 0.0); 
```

图层及其剪辑蒙版都是偏移的。我想要达到的效果是在圆角矩形剪切区域下方“滚动”一层。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:58:14.460

我会将剪辑层剪辑到第三层。这第三层需要：

*   与要遮罩的图层大小相同
*   位于要遮罩的图层的同一位置
*   有 clearColor 背景颜色

然后只需移动底层，第三层及其裁剪层将保持不变。

注意：这对我有用 - 虽然，您还必须确保要移动的图层是剪辑图层的子视图。

# math - 在javascript中找到三次贝塞尔曲线的所有点

> ID：15397596
> 
> 赞同：5
> 
> 时间：2013-03-13T22:18:43.327
> 
> 标签：math, graphics, geometry, 2d, bezier

我有一个带有 2 个控制点的立方贝塞尔曲线。起点和控制点是已知的。需要得到曲线的所有点，给定控制点、起点和终点。我想要实现的是..给定一个从1到曲线长度的值i..获取该位置每个点的X和Y以及alpha（角度）。我找不到很好的参考或工作代码。我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T00:38:28.383

如果我理解正确，您正在尝试确定贝塞尔曲线在每个点的位置和斜率（与曲线相切）。

假设您的起点是 (ax, ay)，终点是 (dx, dy)，控制点是 (bx, by) 和 (cx, cy)。

位置很容易。首先，计算混合函数。这些控制控制点在曲线上的“效果”。

```
B0_t = (1-t)^3
B1_t = 3 * t * (1-t)^2
B2_t = 3 * t^2 * (1-t)
B3_t = t^3 
```

请注意当 t 为 0 时 B0_t 为 1（而其他一切都为零）。此外，当 t 为 1 时 B3_t 为 1（并且其他所有值都为零）。所以曲线从 (ax, ay) 开始，到 (dx, dy) 结束。

任何中间点 (px_t, py_t) 将由以下给出（将 t 从 0 变为 1，在循环内以小增量变化）：

```
px_t = (B0_t * ax) + (B1_t * bx) + (B2_t * cx) + (B3_t * dx)
py_t = (B0_t * ay) + (B1_t * by) + (B2_t * cy) + (B3_t * dy) 
```

坡度也很容易做到。使用[https://stackoverflow.com/a/4091430/1384030中给出的方法](https://stackoverflow.com/a/4091430/1384030)

```
B0_dt = -3(1-t)^2
B1_dt = 3(1-t)^2 -6t(1-t)
B2_dt = - 3t^2 + 6t(1-t)
B3_dt = 3t^2 
```

因此，x 和 y 的变化率为：

```
px_dt = (B0_dt * ax) + (B1_dt * bx) + (B2_dt * cx) + (B3_dt * dx)
py_dt = (B0_dt * ay) + (B1_dt * by) + (B2_dt * cy) + (B3_dt * dy) 
```

然后用于`Math.atan2(py_dt,px_dt)`获取角度（以弧度为单位）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T11:22:50.140

[De Casteljau 算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)在数值上更稳定。在这里，它还有一个额外的优点，即它计算切线（因此，切角）作为计算点之前的步骤。

但是，它根据*参数*值而不是*length*工作。作为渲染曲线的一部分，最好通过参数而不是值来计算点。参数的范围将是`[0 ... 1]`，`0`对应于`1`曲线的起点和终点。

# emacs - Ansi彩色文件编辑

> ID：15397597
> 
> 赞同：4
> 
> 时间：2013-03-13T22:18:54.683
> 
> 标签：emacs, terminal, ansi-escape, transcription, ansi-colors

# 语境

有一些来自终端交互的脚本文件，使用传统的 Unix 命令“脚本”获得。

这些脚本包含大量控制字符（如编辑 shell 命令时的退格），以及运行各种命令的结果的大量颜色代码序列。有时，甚至会运行诸如“emacs -nw”或“aptitude”之类的彩色全终端（基于 ncurses）的应用程序。

在程序运行时，TERM 环境变量被设置为“xterm”。

# 需要1：阅读（或多或少解决）

我需要再次阅读这些文件，有时还需要复制粘贴一些小部分。

问题是：虽然这里改变了一种颜色并没有太大问题，但它们的实际密度使输出几乎不可读。更糟糕的是，编辑过的命令行（带有光标跳转和编辑过的单词）完全不可读。

## “好的”解决方案

使用例如“less -r”浏览文件。在同一终端设置中向前翻页可再现各种颜色和字符样式。

但是许多其他功能或多或少都被破坏了，例如向后搜索会产生混乱的终端输出，通常必须按“Ctrl-L”来清理。

# 需求2：编辑

我首选的编辑器是 emacs。有些人在 emacs 中运行 shell 时也遇到过类似的情况，例如[，Emacs shell 有问题](https://stackoverflow.com/questions/704616/something-wrong-with-emacs-shell)。

这里的情况不一样。差异示例：这里我们不必运行实际的 shell，但我们需要像通常的编辑一样自由移动光标。

在这里编辑意味着在编辑器中轻松打开这样的脚本文件，然后：

*   *随时通过编辑，查看终端代码所传达的字符变化（颜色、属性）*
*   （可选）一些在终端网格上相邻但在文件中被一些控制字符分隔的字符将对此有视觉提示
*   插入一些文本的能力，
*   删除部分，
*   使用所有编辑器功能，如搜索/替换等。
*   从文件复制和粘贴（包括到外部程序，它只接收纯文本）
*   在我最疯狂的梦想中，某种“扁平化”动作，比如选择一个带有大量编辑命令行的序列，然后用一系列简单的字符替换它，就好像它是在一次运行中键入的一样。上面提到的“视觉提示”会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-29T00:03:26.123

键入`Alt-:`以评估 minibuffer 中的某些内容。评估`(ansi-color-apply-on-region (point-min) (point-max))`并将 ansi 颜色代码转换为字体颜色。

# c - (C) 将 strtok() 用于以空格分隔的子字符串？

> ID：15397602
> 
> 赞同：1
> 
> 时间：2013-03-13T22:19:13.050
> 
> 标签：c, string, pointers, strtok

C 菜鸟。我正在尝试将字符串“文件”拆分为由空格分隔的子字符串，并将所有新子字符串放入二维数组“file_array”中。

当前代码的错误：二维数组在新二维数组中的每个字符串之前被几个随机字符填充。二维数组也没有被“文件”中的所有子字符串填充（我从测试打印中知道这一点）。

很抱歉缺少评论 - 格式不起作用。

```
int submit_files(char files[]){

        char file_array[20][50];
        char *file;
        int i = 0;
        file = strtok(files, " ");

        while(file != NULL){
             strcat(file_array[i], file);
             file = strtok(NULL, " ");
             i++;
        }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:25:39.023

```
int submit_files(char files[])
{
    char file_array[20][50];
    char *file;
    int i = 0;
    for (file = strtok(files, " "); file && i < 20; file = strtok(NULL, " "), i++)
    {
         strncpy(file_array[i], file, 50);
    }
    for (; i < 20; ++i)
    {
         *file_array[i] = 0;
    }

    return 0;
} 
```

# visual-studio-2012 - 将 wp8 项目转移到不同的计算机

> ID：15397604
> 
> 赞同：0
> 
> 时间：2013-03-13T22:19:54.097
> 
> 标签：visual-studio-2012, windows-phone

我的旧电脑坏了，我将我的项目文件夹压缩并备份在云中。我已将它们下载到新计算机并将它们放在 VS 2012 for WP 的“项目”文件夹中。我可以打开解决方案文件，但构建应用程序会引发读取错误，并向我显示旧计算机上的路径。请就跨计算机传输 windows phone 项目的正确方法提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:35:19.157

在记事本中打开您的 .csproj 文件并手动修复您找到的任何路径。您可能还需要在 .sln 文件中执行此操作。

# php - 在 Codeigniter 中验证数字

> ID：15397606
> 
> 赞同：0
> 
> 时间：2013-03-13T22:20:03.790
> 
> 标签：php, codeigniter, escaping

这是我的 Codeigniter 应用程序中模型内的函数示例。

```
function is_subscriber($thread_id) {
    $this->db->query("SELECT user_id FROM subscriptions WHERE thread_id = $thread_id");
} 
```

我应该在哪里以及如何逃脱`$thread_id`？由于数据库字段 thread_id 是整数`$thread_id`，因此在查询中不应用单引号括起来。所以我想知道我应该如何在 Codeigniter 中转义数字？我应该自己检查是否`$thread_id`是数字，还是有办法用 Codeigniter 来做？

我发现`escape_like_str()`哪个转义而不添加引号，而不是添加引号的 escape()。我也应该使用`escape_like_str()`数字吗？

`$thread_id`其次，我应该在模型中还是在控制器中“验证” ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:36:46.863

codeigniter 数据库适配器具有内置的查询参数化；它就像用问号替换每个参数一样简单，然后将数组中的所有变量作为第二个参数传递。

```
$this->db->query("SELECT user_id FROM subscriptions WHERE thread_id = ?", array($thread_id)); 
```

当您以这种方式进行设置时，就没有 sql 注入的可能性，并且您不必担心转义数据（至少对于 SQL 部分而言不是；XSS 和 html 转义仍然是一个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:42:10.813

Sam 的方式是执行此操作的正确 Codeigniter 方式。如需更多标准 PHP 方式：

```
$thread_id = intval($thread_id);
$this->db->query("SELECT user_id FROM subscriptions WHERE thread_id = ". $thread_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:09:57.223

尽管您必须使用 Sam Dufel 的答案中的查询，但只是为了回答您的众多问题和假设

> 我应该在哪里以及如何转义 $thread_id？

一般规则是 - 尽可能靠近查询构建。
因此，**最好**的方法是使用占位符，因为它可以保证数据在插入查询之前正确格式化。

> 由于数据库字段 thread_id 是一个整数 $thread_id 不应在查询中用单引号引起来。

这并不完全正确。只有在严格模式下运行 mysql 时，才不能使用引号。
但总的来说，您可以一直使用引号。因此，将数字格式化为字符串是很可能的解决方案。

> 所以我想知道我应该如何逃避数字......

逃避数字的**唯一方法是****强制转换**它。`intval()`没关系

> ... 在 Codeigniter 中？

如果它允许您使用占位符 - 去吧。

> 我应该自己检查 $thread_id 是否是一个数字，还是有办法用 Codeigniter 做到这一点？

一般来说，不需要*检查*。在数据库级别，只需要正确的*格式*。

> 我还应该对数字使用 escape_like_str() 吗？

这**绝对，绝对**没有意义。
你应该使用流感疫苗来保护你的钱不被抢劫吗？这里也是。是不同的事情。

> 我应该在模型或控制器中“验证” $thread_id 吗？

首先，您必须区分输入*验证*和特定于数据库的*格式*。
第二个是强制性的和无条件的，而第一个是可选的。
只要这种“验证”与 DB 格式化无关，您可以在任何地方进行。

就个人而言，我会在控制器中执行此操作，并在失败时抛出 404。因为它是执行 HTTP 特定操作的控制器，而模型必须与环境无关。
但同样，这样的验证与必须始终应用的特定于数据库的格式无关。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T23:58:00.130

使用标准查询时，您可能希望`$this->db->escape_like_str()`像这样使用

```
$sql = 'SELECT name FROM users WHERE id = '.$this->db->escape_like_str($id).'AND user_id ='.$this->db->escape_like_str($user_id).'LIMIT 1'; 
```

或者：

```
$sql = 'SELECT name FROM users WHERE id = ? AND user_id = ? LIMIT 1'
$query = $this->db->query(array($id,$user_id)); 
```

这种方法不验证数字只是为了安全而将它们转义，如果你想验证一个数字，你可以使用 PHP 原生函数，或者`is_numeric`你可以阅读 PHP 手册或发现你自己需要使用什么。.`ctype_digit``is_int()`

# jquery - Google Chrome 上的平滑 div 滚动问题

> ID：15397608
> 
> 赞同：0
> 
> 时间：2013-03-13T22:20:11.277
> 
> 标签：jquery, google-chrome, html, scroll

我有平滑 div 滚动的问题。我使用 jquery.scrollTo-1.4.3.1 库在我的网站上“移动”一个 div。它工作得很好，但在谷歌浏览器上却不行，因为它看起来有低 FPS。我注意到（但我不确定），该问题仅在某些时候发生并且在缓存清理时消失。如何检查有什么问题或尝试清理 javascript 中的缓存？感谢帮助。

PS：我在4台电脑上测试网站，每个人都有这个问题......

编辑：

网站位于：http: [//imap.stackoverflow.octibse.com/](http://imap.stackoverflow.octibse.com/)

# session - 流星会话替换？

> ID：15397609
> 
> 赞同：9
> 
> 时间：2013-03-13T22:20:14.927
> 
> 标签：session, meteor

在最新的 Meteor 版本（版本 0.5.8）中，`Session`已从服务器端代码中删除。

以前我曾经为服务器`Session`存储特定于*客户端的*变量；**这个功能的替代品是什么？**

示例案例：`User One`打开浏览器，`User Two`打开浏览器。一个调用服务器上的方法设置一些令牌，另一个调用服务器上的方法做同样的事情。然后，当客户端请求某些内容时，我需要访问它。**我如何区分两者？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T20:31:27.547

您需要将令牌保存到数据库中的集合中。

如果您`Session`想简单地将`session`包复制到应用程序的`packages`目录并更改其 package.js 以在服务器上加载，则可以在服务器上使用。但是 Session 是一种内存数据结构，因此如果您有多个服务器实例，它将无法工作；并且您将无法在不丢失用户令牌的情况下重新启动服务器。

如果您将令牌存储在数据库中，它们将在服务器重新启动时保持不变，并将与未来版本的 Meteor 一起使用，该版本[能够通过在需要时添加更多服务器实例来扩展应用程序](https://trello.com/card/multitier-server-architecture-support-very-large-numbers-of-simultaneous-clients/508721606e02bb9d570016ae/46)。

如果您需要使令牌过期（这样您的集合就不会无限制地增长），您可以在令牌集合中添加一个“lastUsed”日期字段，并定期删除未使用超过您选择的到期时间的令牌时期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:02:45.213

您也可以使用每个选项卡独有的会话 ID。不太确定如何获取当前会话 id，但它应该在某个地方（你可以在 中看到它`Meteor.default_server.sessions`，所以还有一种方法：

**客户端js**

```
Meteor.call("test", Meteor.default_connection._lastSessionId, function(err,result) {
    console.log(result);
}); 
```

**服务器端Js**

```
Session = {
  set : function(key, value, sessionid) { 
      console.log(Meteor.default_server.sessions[sessionid]);
      if(!Meteor.default_server.sessions[sessionid].session_hash) Meteor.default_server.sessions[sessionid].session_hash = {};
      Meteor.default_server.sessions[sessionid].session_hash.key = value;
  },
  get : function(key, sessionid) {
      if(Meteor.default_server.sessions[sessionid].session_hash)
        return Meteor.default_server.sessions[sessionid].session_hash.key;
  },
  equals: function(key, value, sessionid) {
      return (this.get(key, sessionid) == value)
  },
  listAllSessionids: function() {
      return _.pluck(Meteor.default_server.sessions, "id");
  }  
};

Meteor.methods({
    test:function(sessionid) {

        if(!Session.get("initial_load", sessionid)) Session.set("initial_load", new Date().getTime(), sessionid);

        return Session.get("initial_load", sessionid);
    }
}); 
```

我挂钩`Meteor.default_connection._sessions`以存储这些值，以便在会话不再有效时（即用户已关闭他的选项卡）涉及某种类型的垃圾收集，以防止浪费内存。在`livedata_server.js`这些旧会话中，DDP 线上 1 分钟没有活动（如心跳）后被销毁。

因为服务器可以看到每个人的会话，您可以使用`sessionid`访问另一个用户的会话数据。并`listAllSessionids`给出当前活动的所有 sessionid 的数组。

**在方法中自动设置像 this.userId 这样的会话，而不在调用中使用参数**

看起来有这个功能，但它没有完全连接起来。会话 id 将被存储，`this.sessionData`但它可能仍未完成。它在那里被调用，`method`但它还没有被设置（在`livedata_connection.js`&中`livedata_server.js`）

# c++ - 二叉搜索树的深度

> ID：15397611
> 
> 赞同：1
> 
> 时间：2013-03-13T22:20:20.393
> 
> 标签：c++, binary-search-tree, treenode

所以我需要用 C++ 编写一个函数来返回树的深度。我有点困惑这意味着什么。它是每个单独节点的深度还是整个树的深度，例如树有 4 个级别。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:40:18.530

树的深度是最深节点的级别。这看起来是一个很好的定义。话虽如此，这是 C++ 类中的一个实现，其中 root 是该类的一个属性。基本上，你得到左子树的深度和右子树的深度，然后选择这两者中最大的一个。

```
#define max(a,b)  ((a)>=(b) ? (a) : (b))

int height2(Node *t) {
  if(!t) 
    return 0;
  int height_left  = height2(t->L);
  int height_right = height2(t->R);
  return 1 + max(height_left,height_right);
};

int height() {
  return height2(root);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:19:50.730

```
class Node {
public:
    //...
    unsigned int depth() {
        return 1 + max(depth(left),
                       depth(right));
    }
private:
    unsigned int depth(Node* node) {
        return node ? node->depth() : 0;
    }
    Node* left;
    Node* right;
}; 
```

# perl - 如何使用 awk 和 sed 或 perl 脚本格式化文件以获得所需的文件

> ID：15397614
> 
> 赞同：1
> 
> 时间：2013-03-13T22:20:33.543
> 
> 标签：perl, shell, unix, sed, awk

我有一个如下文件：

```
101 start_time
102 start_time
101 end_time
103 start_time
103 end_time
102 end_time
104 start_time
104 end_time
102 start_time
102 end_time 
```

我想要一个如下的输出文件：

```
101 start_time end_time
102 start_time end_time
103 start_time end_time
104 start_time end_time
102 start_time end_time 
```

使用基本的 sed 或 awk 操作或使用 perl 如何完成？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:42:29.313

怎么样：

```
awk '$1 in a{ print $1, a[$1], $2; delete a[$1]; next} {a[$1] = $2}' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:23:45.473

```
perl -anE'say "@F end_time" if $F[1] eq "start_time"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:55:18.850

遵循 Perl 方法。

*   注1：写得不是很好，但可以正常工作
*   注2：我的回答是基于这样的考虑，即“start_time”和“end_time”不是字面意义上的字符串，而是某种时间戳或其他

你去：

```
#!/usr/bin/perl
use warnings;
use strict;

my @waiting; #here we will keep track of the order
my %previous; #here we will save previous rows that still can't be printed
open (my $IN,'<','file.txt') or die "$!"; #assuming that your data is in file.txt
while (<$IN>) {
    chomp;
    my ($id,$time)=split/ /;
    if (exists $previous{$id}) { #if this is the end_time
        $previous{$id}->[1]=$time;
        if ($waiting[0]==$id) { #if we are not waiting for another row's end_time
            my $count=0;
            for (@waiting) { #print anything you have available
                last if !defined $previous{$_}->[1];
                print join(' ',$x,@{$previous{$_}}),"\n";
                delete $previous{$_};
                $count++;
            }
            shift @waiting for 1..$count; 
        }
    }
    else { #if this is the start_time
        push @waiting,$id;
        $previous{$id}=[$time,undef];
    }
}
close $IN; 
```

# bash - 使用 SED 删除 X= 和空格之间的文本意外行为

> ID：15397616
> 
> 赞同：0
> 
> 时间：2013-03-13T22:20:38.390
> 
> 标签：bash, replace, sed

我正在尝试从“123 var1=test1 var2=test2 456”中删除“var1=test1”

出于某种原因，结果也删除了 var2=test2... 为什么会发生这种情况，我该如何解决？

> 回声 123 var1=test1 var2=test2 456 | sed "s/var1=.* //g"

结果是：123 456

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:22:52.123

```
echo '123 var1=test1 var2=test2 456' | sed -r 's/var1=\S+ //g' 
```

`.*`您的错误是使用匹配到最后一个空格的贪心。相反，我搜索*非空间* `\S`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:23:16.367

那是因为`/.* /`捕获所有内容，包括*最后一个*空格。相反，尝试

```
sed "s/var1=[^ ]*//g" 
```

删除之后的所有内容，`=`这*不是*空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:23:14.603

发生这种情况是因为 .* 是贪婪的。由于第一个空格应该结束它，请使用：

```
s/var1=[^ ]* //g 
```

你可能想把那个放在单引号中，以防你的 shell 想要对 ^ 做一些事情

# ajax - 使用 AJAX 登录后重定向到 JSP 页面

> ID：15397618
> 
> 赞同：0
> 
> 时间：2013-03-13T22:20:47.453
> 
> 标签：ajax, jsp, jquery

我有一个 login.jsp 页面，用户在其中输入用户名和密码。使用 ajax ($.post) 将用户名和密码发送到服务器。身份验证完成后，我想将用户重定向到 index.jsp 页面。

js：

```
function Login()
{
    var traderName = document.getElementById('username').value;
    var traderPass = document.getElementById('password').value;

    //SetLoginLoading();

    data = {action:'login',username:traderName,password:traderPass};

    $.post('TraderServlet',$.param(data),function(response){
    });
    return false;
} 
```

小服务程序

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
              ....
              login(request, response);
              ....
     }       
   private void login(HttpServletRequest request, HttpServletResponse response) throws IOException {
        String name = request.getParameter(PARAMETER_NAME);
        String pass = request.getParameter(PARAMETER_PASS);
        traderBean.login(name, pass);

        response.sendRedirect("index.jsp");
    } 
```

我尝试使用 response.sendRedirect() 但它不起作用。我应该使用 jQuery 重定向用户使用 ajaxCallback 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:55:15.497

一般来说，如果您只是要重定向，那么使用 AJAX 确实没有意义，因为您可以通过直接从表单中处理 servlet 来完成此操作。

对于您的问题，首先检查您的 servlet 的 url 模式。确保它实际上被调用。如果是这样，那么如果它具有类似的 url 模式

`/TraderServlet`

然后它预计`index.jsp`也位于`Web`. 可能是您根本没有重定向到您期望去的地方。

一种检查方法是（如果您在 Chrome 中）使用调试器工具（Windows/Nix 上的 F12，Mac 上的 Ctrl-Shift-I），看看它给出了什么错误。

# racket - 如何接受拖放到球拍画布上的剪贴板数据

> ID：15397623
> 
> 赞同：4
> 
> 时间：2013-03-13T22:21:06.560
> 
> 标签：racket

我正在使用 Racket 编写一个 UI 应用程序，并且希望能够从其他应用程序拖放项目，例如图像。具体来说，我想从浏览器（例如 Chrome 或 FF）中的网页中拖动图像并将其拖放到`canvas%`应用程序中，从而接收原始图像数据（应用程序将在接受 PNG 元数据之前检查丢弃的图像）。

`canvas%`类或超类上没有直接与剪贴板事件相关的功能（我可以找到） 。

我熟悉 Swing 和 Win32 等其他框架中的剪贴板 dnd。

看起来`clipboard-client%`该类是必需的，但 Racket 文档很难将点连接到将其附加到窗口类之一。

有什么好的教程或示例代码可以参考吗？

* * *

更新：我查看了 clipboard.rkt 的球拍源代码（OSX），它似乎只能访问“通用”粘贴板。OSX 有一个单独的粘贴板用于拖放操作。

因此，看起来 dnd 在 OSX 上的 Racket 中是不可能的，我将不得不使用 Objective-C FFI 来实现所需的功能并将我的用户限制为使用 Mac 的用户。

结束这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:22:54.030

据我所知，Racket gui 库仅通过实现的接口的`accept-drop-files`和`on-drop-file`方法处理“文件”的拖放。我不熟悉 dnd 协议，但至少在 Linux 上，从 Firefox 拖动的图像不算作文件，因此它们不被接受，而从 nautilus 拖动的文件是。`window<%>``canvas%`

这是我用来测试它的小程序：

```
#lang racket/gui

(define my-canvas%
  (class canvas%
    (define/override (on-drop-file file)
      (printf "got file: ~s\n" file)
      (super on-drop-file file))
    (super-new)))

(define f (new frame% (width 400) (height 400) (label "frame")))
(define c (new my-canvas% (parent f)))
(send c accept-drop-files #t)
(send f show #t) 
```

我建议在[球拍邮件列表](http://racket-lang.org/community.html)上询问。

# liferay - 可以通过 JSON-WS API 远程调用 ResourceLocalService 吗？

> ID：15397624
> 
> 赞同：0
> 
> 时间：2013-03-13T22:21:12.810
> 
> 标签：liferay, liferay-6

我正在尝试使用 JSON-WS API 创建 Liferay 权限资源。我还没有找到任何`http://localhost:8080/api/jsonws`用于创建资源的 JSON-WS API 注册服务方法。

根据[JSON Web Services](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/json-web-services)文档，您可以通过添加 @JSONWebService 注释来远程启用服务。我不清楚如果 Liferay 的内置服务尚未公开，您如何以及是否可以注册它们。

此外，ResourceLocalService的[Javadocs特别声明：](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/ResourceLocalService.html)

> **这是本地服务。**此服务的方法不会基于传播的 JAAS 凭据进行安全检查，因为**只能从同一 VM 内访问此服务。**

那么甚至可以使用 JSON-WS API 远程访问 ResourceLocalService 的方法吗？如果是这样，你能指出我正确的方向吗？

PS：我在我的外部应用程序中成功使用 JSON-WS API 来获取已经发布和列出的服务方法`http://localhost:8080/api/jsonws`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:00:03.673

在 Liferay 中 - 正如您从文档摘录中指出的那样 -`*LocalService`只能从同一个 VM 获得。远程可用的服务只是`*Service`（没有*本地*部分），它们的实现应该检查权限，然后将调用转发给`*LocalService`适用的。

在没有实际对象的情况下仅向 Liferay 添加资源是没有意义的，因此`ResourceLocalService`应该由添加另一个实体的服务调用（资源需要实际对象的附加对象引用，包括类名和首要的关键）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:17:18.820

我为此使用的方法是编写自己的服务，该服务没有数据表，但公开了一些 JSON WS 方法。您可以在插件项目中使用服务构建器的选项来创建远程服务（我使用了一个 portlet 插件，因为我的应用程序中有 portlet，但我相信它也可以在钩子插件中完成）。

service.xml 的快速摘录：

```
 <entity name="UserNotification" local-service="true"
    remote-service="true">
 </entity> 
```

没有字段，没有查找器……只有实体名称。

然后在你的插件项目的 UserNotificationServiceImpl 中创建你想要公开的方法并对有问题的 Liferay 服务进行定期服务调用（你负责使用权限检查器，这里没有关于安全性的自动操作）。当您重新构建服务时，ServiceBuilder 会对您的方法进行反向工程并创建远程服务 API。

棘手的一点是调用您的自定义 API，它的形式与您对内置 API 的调用不同。假设您希望服务要求身份验证并为您的方法提供用户上下文以与权限检查器一起使用，您可以通过以下形式进行调用：

```
https://user:passwd@example.com/api/secure/jsonws/plugin-name.entity-name/method? ...parameters 
```

还有其他调用格式，但关键是您直接寻址 Liferay，然后使用点分符号识别插件和实体。如果您在自己的应用程序上下文中处理您的插件

```
https://user:passwd@example.com/plugin-name/api/secure/jsonws/entity-name/method? ...parameters 
```

您将无法获得身份验证上下文，因此您将无法使用权​​限检查器。不幸的是，您会在 Liferay 站点周围找到大量材料，告诉您以这种方式拨打电话。不。

我还没有解决所有细节（配置设置、调用细微差别等），但[开发人员指南](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/json-web-services)中的新文档现在已经很好地解决了这些问题。所以一定要研究一下。

您还需要阅读[Service Builder](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/service-build-5)。

但请注意——您可能习惯于使用门户提供的 API 页面作为服务的参考。这对于内置服务很好，但对于插件提供的服务，此页面不可靠，因为它提供了不正确的示例。去文档。

# php - 在 CodeIgniter 中将 MVC 应用程序转换为 HMVC

> ID：15397626
> 
> 赞同：1
> 
> 时间：2013-03-13T22:21:19.723
> 
> 标签：php, codeigniter

我在 CodeIgniter 中有一个使用常规 MVC 模式构建的应用程序。如果我想切换到 HMVC，那么我必须将所有模型、视图和控制器移动到模块文件夹中吗？我不明白在 HMVC 中是否一切都是模块，或者模块和旧的 MVC 结构可以共存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:51:56.593

HMVC 中的 H 代表分层结构，普通控制器、vews 和模型文件夹中的文件位于分层结构的顶部。这意味着您仍然可以使用旧的控制器、模型、视图文件夹。然后，系统中的所有模块都可以访问这些文件夹。

# python - list.index(value) 执行什么样的查找？

> ID：15397630
> 
> 赞同：1
> 
> 时间：2013-03-13T22:21:34.543
> 
> 标签：python, list, dictionary, hashtable, cpython

当我打电话时，python 在幕后做了什么：

```
very_big_list.index(value) 
```

在字符串列表上？

它比这个等效的字典查找更有效吗？

```
d = {'hello':1, 'dog':2, 'cat':3, ...}
print d['dog'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:22:36.633

`.index()`循环遍历列表，直到找到一个相等的元素（`element == searchterm`为 True）。字典查找效率更高*。*

在 CS 术语中，`.index()`复杂度为 O(n)，字典查找为 O(1)。请参阅Python Wiki 上的[时间复杂度概述。](http://wiki.python.org/moin/TimeComplexity)

# c# - ServiceStack CookieException

> ID：15397631
> 
> 赞同：1
> 
> 时间：2013-03-13T22:21:44.573
> 
> 标签：c#, api, servicestack

在 ServiceStack (3.9.33) 下，我们得到以下异常：

```
errorCode":"CookieException"
"message":"The 'Name'='$Version' part of the cookie is invalid."
"stackTrace":"   at System.Net.Cookie..ctor(String name, String value)\r\n   at
System.Net.Cookie..ctor(String name, String value, String path, String domain)\r\n   at
ServiceStack.WebHost.Endpoints.Extensions.HttpRequestWrapper.get_Cookies()\r\n   at
ServiceStack.ServiceHost.HttpRequestAuthentication.GetCookieValue(IHttpRequest httpReq, 
String cookieName)\r\n   at 
ServiceStack.ServiceInterface.AuthenticateAttribute.AuthenticateIfDigestAuth(IHttpRequest 
req, IHttpResponse res)\r\n   at 
ServiceStack.ServiceInterface.AuthenticateAttribute.Execute(IHttpRequest req, 
IHttpResponse res, Object requestDto)\r\n   at 
ServiceStack.ServiceInterface.RequestFilterAttribute.RequestFilter(IHttpRequest req, 
IHttpResponse res, Object requestDto)\r\n   at 
ServiceStack.WebHost.Endpoints.EndpointHost.ApplyRequestFilters(IHttpRequest httpReq, 
IHttpResponse httpRes, Object requestDto)\r\n   at 
ServiceStack.WebHost.Endpoints.RestHandler.ProcessRequest(IHttpRequest httpReq, 
IHttpResponse httpRes, String operationName) 
```

当我们的供应商（我们无法控制的代码）提交以下请求时：

```
Content-Length: 283401
Authorization: Basic --------------------------
Cookie: $Version=0; ss-id=----; $Path=/, $Version=0; ss-pid=---; $Path=/
Host: -----
User-Agent: Jakarta Commons-HttpClient/3.1 
```

我们可以用来避免异常的任何可能的解决方法或设置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T07:13:37.110

我今天的日志中出现了一堆相同的错误（ServiceStack 3.9.67）。

我不会担心试图避免异常或返回正常资源。我不是 PHP 开发人员，但我相信它们是恶意形成的请求 - 攻击者期待 PHP 服务器。他们要么试图探测 PHP 版本和环境工作目录，要么试图将环境变量设置为根目录（我不确定 PHP 所做的 'cookie <-> 变量' 废话魔术的方向）。

编辑：我最终为它编写了一个修复程序：[https ://github.com/ServiceStack/ServiceStack/pull/857](https://github.com/ServiceStack/ServiceStack/pull/857)

# ruby - REMOTE_ADDR、HTTP_X_FORWARDER、action_dispatch.remote_ip - rails 中的差异和访问

> ID：15397633
> 
> 赞同：2
> 
> 时间：2013-03-13T22:21:46.080
> 
> 标签：ruby, ruby-on-rails-3, http, http-headers, user-agent

我正在整合 vbulletin 论坛和我的 rails 应用程序。

我需要获取请求 ip 来创建一些哈希值。我发现了一些文章，其中包含如何使用 php`$_SERVER['REMOTE_ATTR']`来获取这个 ip 的提示，它应该`request.env['REMOTE_ATTR']`在 Rails 中。

不幸的是，我在生产和开发上都得到`127.0.0.1`了，所以我检查了一下`request.env`，发现真正的请求 ip 在`'HTTP_X_FORWARDER'`and中`'action_dispatch.remote_ip'`。

现在在一个视图中，我尝试同时输出：

`<%= request.env['action_dispatch.remote_ip']%>`输出正确的ip。

`<%= request.env['HTTP_X_FORWARDER']%>`输出空白。

`<%= debug request.env %>`向我展示了该`'HTTP_X_FORWARDER'`值是请求的 IP 地址，这很奇怪。

你知道为什么`REMOTE_ADDR`总是`127.0.0.1`，并且`'HTTP_X_FORWARDER'`输出空白吗？可以`'action_dispatch.remote_ip'`用来获取这个请求ip吗？

# java - 在这个 Java 套接字代码中，这个无限循环是否会因套接字关闭而终止？

> ID：15397634
> 
> 赞同：1
> 
> 时间：2013-03-13T22:21:47.187
> 
> 标签：java, sockets, serversocket

这是一个基本的 Java 服务器（[源代码](http://cs.lmu.edu/~ray/notes/javanetexamples/#date)），但我不太明白，因为我对这`while(true)`部分很好奇，它什么时候终止？

```
public static void main(String[] args) throws IOException {
    ServerSocket listener = new ServerSocket(9090);
    try {
        while (true) {
            Socket socket = listener.accept();
            try {
                PrintWriter out =
                    new PrintWriter(socket.getOutputStream(), true);
                out.println(new Date().toString());
            } finally {
                socket.close();
            }
        }
    }
    finally {
        listener.close();
    }
} 
```

我们将如何到达最后一部分，即

```
finally {
        listener.close(); 
```

或者它只是标准的网络代码，拥有`while(true)` ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:23:07.443

如果抛出异常，循环将被打破。

Java中与IO相关的代码，当它失败时，几乎总是会抛出一个异常，指出它失败的原因。[例如，您可以在http://docs.oracle.com/javase/6/docs/api/java/io/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/io/package-summary.html)中查找正在调用的方法，并查看它可以抛出哪些异常。

`while(true)`是守护进程、服务器等的常用习惯用法，您希望永远不会停止运行，或者您以抛出异常的形式停止。

# algorithm - 面试 - 在数组中查找幅度极点

> ID：15397637
> 
> 赞同：6
> 
> 时间：2013-03-13T22:21:58.397
> 
> 标签：algorithm

Magnitude Pole：数组中的一个元素，其左侧元素小于或等于它，而右侧元素大于或等于它。

**示例输入**

```
3,1,4,5,9,7,6,11 
```

**期望的输出**

```
4,5,11 
```

我在一次采访中被问到这个问题，我必须返回元素的索引并且只返回满足条件的第一个元素。

**我的逻辑**

> 1.  取两个 MultiSet（这样我们也可以考虑重复），一个用于元素的右侧，一个用于元素的左侧（极点）。
> 2.  从第 0 个元素开始，将其余所有元素放在“正确的集合”中。
> 3.  如果此第 0 个元素小于或等于“右集”上的所有元素，则基本条件，则返回其索引。
> 4.  否则将其放入“左集”并从索引 1 处的元素开始。
> 5.  遍历数组，每次从“左集”中选择最大值，从“右集”中选择最小值并进行比较。
> 6.  在任何时刻，对于任何元素，其左侧的所有值都在“左集”中，而其右侧的值在“右集”中

**代码**

```
int magnitudePole (const vector<int> &A) {  
   multiset<int> left, right;        
   int left_max, right_min;          
   int size = A.size();
   for (int i = 1; i < size; ++i)
       right.insert(A[i]);
   right_min = *(right.begin()); 
   if(A[0] <= right_min)
       return 0;
   left.insert(A[0]);
   for (int i = 1; i < size; ++i) {
       right.erase(right.find(A[i]));
       left_max = *(--left.end());
       if (right.size() > 0)
           right_min = *(right.begin());
       if (A[i] > left_max && A[i] <= right_min)
           return i;
       else
           left.insert(A[i]);
   }
   return -1;
} 
```

**我的问题**

> *   有人告诉我我的逻辑不正确，我无法理解为什么这个逻辑不正确（尽管我已经检查了某些情况并且它返回了正确的索引）
> *   为了我自己的好奇心，如何在 O(n) 时间内不使用任何集合/多集合来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T22:26:06.413

对于 O(n) 算法：

1.  计算 [0, length(n)) 中所有 k 从 n[0] 到 n[k] 的最大元素，将答案保存在数组 maxOnTheLeft 中。这花费 O(n);
2.  计算 [0, length(n)) 中所有 k 从 n[k] 到 n[length(n)-1] 的最小元素，将答案保存在数组 minOnTheRight 中。这花费 O(n);
3.  遍历整个事情并找到 maxOnTheLeft <= n[k] <= minOnTheRight 的任何 n[k]。这需要 O(n)。

你的代码（至少）在这里是错误的：

```
if (A[i] > left_max && A[i] <= right_min) // <-- should be >= and <= 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-03T07:27:40.190

Java实现：

```
Collection<Integer> magnitudes(int[] A) {
    int length = A.length;
    // what's the maximum number from the beginning of the array till the current position
    int[] maxes = new int[A.length];
    // what's the minimum number from the current position till the end of the array
    int[] mins = new int[A.length];

    // build mins
    int min = mins[length - 1] = A[length - 1];
    for (int i = length - 2; i >= 0; i--) {
        if (A[i] < min) {
            min = A[i];
        }
        mins[i] = min;
    }

    // build maxes
    int max = maxes[0] = A[0];
    for (int i = 1; i < length; i++) {
        if (A[i] > max) {
            max = A[i];
        }
        maxes[i] = max;
    }

    Collection<Integer> result = new ArrayList<>();
    // use them to find the magnitudes if any exists
    for (int i = 0; i < length; i++) {
        if (A[i] >= maxes[i] && A[i] <= mins[i]) {
            // return here if first one only is needed
            result.add(A[i]);
        }
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T22:28:56.570

*   创建两个 bool[N] 称为 NorthPole 和 SouthPole（只是为了幽默。
*   通过 A[] 跟踪到目前为止找到的最大元素，如果 A[i] > Max(A[0..i-1]) 则将 SouthPole[i] 设置为 true
*   如果 A[i] < Min(A[i+1..N-1)，则通过 A[] 后退并设置 NorthPole[i] true
*   通过 NorthPole 和 SouthPole 向前走，找到都设置为 true 的第一个元素。

上面每一步都是O(N)，因为访问每个节点一次，所以总体上是O(N)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T22:39:34.013

您的逻辑似乎完全正确（但没有检查实现）并且可以实现以提供 O(n) 时间算法！很好的工作思维在集合方面。

您的右集可以实现为支持最小值的堆栈，而左集可以实现为支持最大值的堆栈，这给出了 O(n) 时间算法。

拥有一个支持 max/min 的堆栈是一个众所周知的面试问题，并且每次操作都可以这样做（push/pop/min/max 为 O(1)）。

要将其用于您的逻辑，伪代码将如下所示

```
foreach elem in a[n-1 to 0]
    right_set.push(elem)

while (right_set.has_elements()) {
   candidate = right_set.pop();
   if (left_set.has_elements() && left_set.max() <= candidate <= right_set.min()) {
       break;
   } else if (!left.has_elements() && candidate <= right_set.min() {
        break;
   }
   left_set.push(candidate);
}

return candidate 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-04T19:07:36.167

我在 Codility 上看到了这个问题，用 Perl 解决了这个问题：

```
sub solution {
        my (@A) = @_;            

        my ($max, $min) = ($A[0], $A[-1]);
        my %candidates;

        for my $i (0..$#A) {
                if ($A[$i] >= $max) {
                        $max = $A[$i];
                        $candidates{$i}++;
                }
        }
        for my $i (reverse 0..$#A) {
                if ($A[$i] <= $min) {
                        $min = $A[$i];
                        return $i if $candidates{$i};
                }
        }
        return -1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T22:23:26.330

1.  Create array of ints called `mags`, and int variable called `maxMag`.
2.  For each element in source array check if element is greater or equal to `maxMag`.
3.  If is: add element to mags array and set `maxMag = element`.
4.  If isn't: loop through mags array and remove all elements lesser.

Result: array of magnitude poles

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-25T15:22:34.390

有趣的问题，我在下面给出了自己的 C# 解决方案，请阅读评论以了解我的方法。

```
public int MagnitudePoleFinder(int[] A)
{
    //Create a variable to store Maximum Valued Item i.e. maxOfUp
    int maxOfUp = A[0];

    //if list has only one value return this value
    if (A.Length <= 1) return A[0];

    //create a collection for all candidates for magnitude pole that will be found in the iteration
    var magnitudeCandidates = new List<KeyValuePair<int, int>>();

    //add the first element as first candidate
    var a = A[0];
    magnitudeCandidates.Add(new KeyValuePair<int, int>(0, a));

    //lets iterate
    for (int i = 1; i < A.Length; i++)
    {
        a = A[i];
        //if this item is maximum or equal to all above items ( maxofUp will hold max value of all the above items)
        if (a >= maxOfUp)
        {
            //add it to candidate list
            magnitudeCandidates.Add(new KeyValuePair<int, int>(i, a));
            maxOfUp = a;
        }
        else
        {
            //remote all the candidates having greater values to this item
            magnitudeCandidates = magnitudeCandidates.Except(magnitudeCandidates.Where(c => c.Value > a)).ToList();
        }
    }
    //if no candidate return -1
    if (magnitudeCandidates.Count == 0) return -1;
    else
        //return value of first candidate
        return magnitudeCandidates.First().Key;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T23:51:01.193

下面的代码怎么样？我认为它的效率在最坏的情况下并不好，但它的预期效率会很好。

```
 int getFirstPole(int* a, int n)
{
    int leftPole = a[0];
    for(int i = 1; i < n; i++)
    {
        if(a[j] >= leftPole)
        {
            int j = i;
            for(; j < n; j++)
            {
                if(a[j] < a[i])
                {
                    i = j+1;  //jump the elements between i and j                   
                    break;
                }
                else if (a[j] > a[i])
                    leftPole = a[j];
            }
            if(j == n) // if no one is less than a[i] then return i
                return i;
        }
    }
    return 0;
} 
```

# asp.net - 如何在后面的代码中找到 AjaxToolkit TabContainer？

> ID：15397638
> 
> 赞同：0
> 
> 时间：2013-03-13T22:21:59.270
> 
> 标签：asp.net

我在转发器中有一个标签容器。当页面构建时，我想设置活动选项卡。我如何在后面的代码中找到它？

这不起作用：

```
AjaxControlToolkit.TabContainer tc = FindControl("projTabContainer"); 
```

因为我正在尝试将控件强制转换为 tabcontainer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:24:13.807

试试下面的。

```
AjaxControlToolkit.TabContainer tc = e.Item.FindControl("projTabContainer") as AjaxControlToolkit.TabContainer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:29:52.670

如果在`TabContainer`a`ItemTemplate`中`Repeater`，则必须设置`ActiveTab`in [`ItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)。这也是唯一可以通过这种方式找到它的地方，因为`RepeaterItem`is it's `NamingContainer`。

```
void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
{
     if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
     {
         var tc = (AjaxControlToolkit.TabContainer)e.Item.FindControl("projTabContainer");
         tc.ActiveTab = ...
     }
} 
```

# jquery - 幻灯片可以在除 chrome 之外的所有浏览器中使用，甚至可以在 chrome 隐身模式下使用

> ID：15397639
> 
> 赞同：0
> 
> 时间：2013-03-13T22:22:04.520
> 
> 标签：jquery

我最近在我的页面上添加了一个 jquery 库，它可以在每个浏览器中使用，除了某些 google chrome 实例（在我的计算机上不起作用，但在我的同事身上起作用）。它甚至可以在 chrome 的隐身模式下完美运行。我对这个问题感到非常困惑，我假设它是谷歌如何处理缓存的问题，或者我可能运行了一个我没有注意到的额外的 jquery 实例。 ![截屏](../Images/b112cee7a37c50d1814a828293b6aea0.png)

```
<script language="javascript">

$(document).ready(function(){
var a = function(self){
self.anchor.colorbox();
};
$("#pikame").PikaChoose({buildFinished:a,carousel:true,carouselOptions:{wrap:'circular'}});

});

        </script> 
```

编辑：忘记链接[http://ra-yon.com/beta/Test_sites/HFE/advertisements.php](http://ra-yon.com/beta/Test_sites/HFE/advertisements.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:25:50.087

事实证明，这个问题是由 chrome 扩展 -adblock 引起的，我将图像和 js 放在一个名为广告的文件夹中，该文件夹被程序列入黑名单，这不允许任何内容正确加载。更改了文件夹的名称，现在一切正常！

# c++ - 如何用布尔值打破while循环？

> ID：15397641
> 
> 赞同：0
> 
> 时间：2013-03-13T22:22:07.553
> 
> 标签：c++, while-loop, nested, boolean, n-queens

我试图打破几个嵌套的 while 循环，但我遇到了麻烦。我希望这个程序进入外循环，它只会运行一定的次数。我尝试用布尔值来做，但我的程序终止得太早了。这是一个 N-Queens 问题，我正在解决 1x1、2x2、3x3、...nxn 个皇后。

这是我的代码：

```
bool ok(int *q, int col)
{
   for(int i=0; i<col; i++)
      if(q[col]==q[i] || (col-i)==abs(q[col]-q[i])) return false;

return true;
};

void print(int q[], int n, int cnt)
{
    //static int count =0;
    cout<<"There are "<<cnt<<" solutions for "<<n<<" queens." <<endl;   
};

int main()
{
    int n;
    int *q;
    cout<<"Please enter the size of the board:"<<endl;
    cin>>n;

    int static count = 0;

    int c = 1;
    int a = 1;
    bool from_backtrack=false;

    while(a!=n){

        q= new int[a];
        q[0]=0;
        bool foundSolution=true;
        while(foundSolution)
        {
            if (c==a){
                a++;
            }
            while(c<a)
            {
                if(!from_backtrack)
                    q[c] = -1; //Start at the top
                from_backtrack=false;
                while(q[c]<a)
                {
                    q[c]++;
                    if  (q[c]==a)
                    {
                        c--;
                        if(c==-1) {
                            print(q, n, count);
                            foundSolution=false;
                            //system("PAUSE"); exit(1);
                        }
                        continue;
                    }
                    if( ok(q,c) ) break; //get out of the closest while loop
                }
                c++;
            }
            count++;
            c--;
            if(c==-1) {
                print(q, n, count);
                foundSolution=false;
                //system("PAUSE"); exit(1);
            }
            from_backtrack=true;
        }
        delete[a] q;
        a++;
    }
    system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:06:54.103

最优雅的方法是将一些内部循环包装在一个函数中。它会更容易阅读和控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:34:25.443

在我的工作中，我们采用 MISRA 指南，其中指出“......每个 while 循环只有 1 个中断”。这导致我重写了我的`if`和`while`循环：

```
bool can_continue = true;

if (can_continue)
{
  status = Do_Something();
  if (status != SUCCESS)
  {
    can_continue = false;
  }
}

if (can_continue)
{
  status = Do_Another_Thing();
  can_continue = status == SUCCESS;
}

//.. and so on. 
```

这个想法是如果执行无法继续，则将标志设置为“false”。在任何段可能导致执行失败后检查它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T01:40:51.247

认为它像无用一样疯狂。

但是，假设您想要 3 次迭代，您将定义一个由 3 个元素组成的 bool 数组（全部设置为 true）。在每次迭代中，将当前元素设置为 false，直到到达数组的末尾。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T22:30:19.033

```
while( true ){

    if( condition == true ){
        goto bye;
    }
}

:bye 
```

只是不要在你的作业中提交这个......

# php - spl_autoload_register() 和/或 __autoload() 是“三重加载”

> ID：15397651
> 
> 赞同：0
> 
> 时间：2013-03-13T22:22:47.443
> 
> 标签：php, debugging

我正在记录我的类名`spl_autoload_register()`以跟踪应用程序的流程。在我的应用程序的每次页面刷新时，我都会看到类被加载了 3 次。如果我使用它会发生同样的事情，`__autoload()`这让我相信架构存在问题而不是自动加载实现。我应该如何调试这个？我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:19:24.107

我有两个丢失的图像资源和一些不准确的 .htaccess 指令。Apache 试图将图像作为 404 页提供 - 从而导致我的应用程序每次都启动。用这个修复它：

```
...
RewriteCond %{REQUEST_URI} !\.(jpg|jpeg|png|css|js|svg)$
... 
```

# c# - 从窗口获取数据

> ID：15397657
> 
> 赞同：0
> 
> 时间：2013-03-13T22:23:02.333
> 
> 标签：c#, mysql, .net, winforms

我需要做的基本上是获取用户名（已经存储为变量）和他们的分数（这也是一个变量），并在他们按下“提交”时将其存储在我的数据库中。这是我点击按钮的代码。

```
private void btnSubmitScore_Click(object sender, EventArgs e)
{
    string connStr = "server=server; " +
                     "database=databasename; " +
                     "uid=username; " +
                     "pwd=password;";
    MySqlConnection myConn = new MySqlConnection(connStr);
} 
```

显然我已经更改了`login`细节等。我环顾四周，只设法找到关于如何以表格形式显示数据库中的数据的令人困惑的代码（我稍后会这样做），但现在，我需要知道如何添加`sName`并`iTotalScore`进入数据库。（字段被调用`'Name'`并`'Score'`在 DB 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:51:04.770

您将使用`SqlConnection`,`SqlCommand`及其属性的组合。连接本质上是您的代码的东西。该命令是文字 SQL 语句，或对存储过程的调用。

一个常见的 C# 习惯用法是围绕第一行编写代码，如下所示：

```
using (SqlConnection myConnection = new SqlConnection()) {
    string doThis = "select this, that from someTable where this is not null";
    SqlCommand myCommand = new SqlCommand(dothis, myConnection);

    try {
       myCommand.Connection.Open();
       myReader = myCommand.ExecuteReader(); //pretend "myReader" was declared earlier

    } catch (Exception myEx) {
         // left to your imagination, and googling.
    }
    finally {
        myCommand.Connection.Close();
    }
}

// do something with the results. Your's to google and figure out 
```

总纲是

1.  使用连接
2.  实例化和配置一个 SqlCommand
3.  如图所示使用 try/catch。
4.  “使用”块在我们完成后可以在幕后清理/处置我们不再需要的所有对象；特别是 SqlConnection 对象。

您必须了解有关这些 Sqlxxxxx 类的更多信息，有很多方法可以配置它们以执行您想要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:34:52.940

我不熟悉 MySql 连接器，但代码应该类似于：

```
private void Insert()
{
    string connStr = "server=server; " +
                 "database=databasename; " +
                 "uid=username; " +
                 "pwd=password;";

    string query = "INSERT INTO TableName('Name','Score) VALUES (@name, @score);";

    using(MySqlConnection connection = new MySqlConnection(connStr))
    {
        MySqlCommand insertCommand = new MySqlCommand(connection,command);
        insertCommand.Paramaters.AddWithValue("@name",sName);
        insertCommand.Paramaters.AddWithValue("@score",iTotalScore);
        connection.Open();
        command.ExecuteNonQuery();
        connection.Close();
   }
} 
```

# matlab - 将遗传算法染色体中的基因限制为整数倍

> ID：15397662
> 
> 赞同：1
> 
> 时间：2013-03-13T22:23:18.683
> 
> 标签：matlab, genetic-algorithm

如果我使用 matlab 中的 GA，有没有办法将染色体中的基因限制为 10000 的整数倍？

我有一个这样的染色体`{Pdg1 Pdg2 ... Pdg33}`，我需要`0<=Pdgn<=400000`哪里`n=1,2..,33`和`mod(Pdgn ,10000)=0`。matlab中的GA（多目标优化）是否允许这样做？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:38:00.827

`gamultiobj`不支持整数约束。我通常执行标量化并使用 plain `ga`。

```
function res = scalarizedFitness(x)
    [obj1, obj2, obj3] = yourFitnessFunction(x);
    %choose w1, w2, w3
    res = w1 * obj1 + w2 * obj2 + w3 * obj3;
end 
```

避免标量化的方法是为`gamultiobj`. 我从来没有这样做过。[这里](http://www.mathworks.com/support/solutions/en/data/1-10PDHC/)有一些关于它的注释。

`ga`从某些版本开始支持整数约束。我的 2011b 支持它。键入`help ga`并查找它是否包含该行`X = ga(FITNESSFCN,NVARS,A,b,[],[],lb,ub,NONLCON,INTCON)`。请注意，`INTCON`用于说明哪些参数是整数的参数。

`0<=Pdgn<=400000``lb`: 可以使用和`ub`参数设置上下限。

`mod(Pdgn ,10000)=0`有不同的方法来放置复杂的约束。我想最适合你的是改变你的健身功能：

从`f(Pdgn) where 0<=Pdgn<40000`到`f(X) where 0<X<40 and Pdgn = X * 10000`

生成的代码可能看起来像

```
function result = fitnessfun(X)
    Pgds = X * 10000;
    result = scalarizedFitness(Pgds);
end

NVARS = 33;
%lower bounds
lb = 0 * ones(1, NVARS);
%upper bounds
ub = 40 * ones(1, NVARS);
%which variables are integers (all of them)
intcon = 1:NVARS;
result = ga(@fintessfun, NVARS, [], [], [], [], lb, ub, [], intcon); 
```

# php - 网站偶尔显示乱码

> ID：15397666
> 
> 赞同：2
> 
> 时间：2013-03-13T22:23:48.453
> 
> 标签：php, encoding, joomla, joomla2.5

有时在访问相关网站时，该网站在屏幕上显示乱码，而不是实际网站。

![显示内容的屏幕截图](../Images/2bd88fc98e1ee679c0e195503508edd1.png)

大多数时候都很好。这是间歇性发生的，很难重现。该站点使用 Joomla 2.5.8 在 LiteSpeed V5.5 上运行 PHP 5.4.4 和 MySQL 5.5.28-rel29.3 构建。

这似乎是一个编码问题。我已检查服务器是否在标头中发送了正确的编码 UTF-8。但我不确定我还应该检查什么。

非常感谢有关如何解决此类问题的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T18:56:17.637

尝试关闭 gzip（Joomla 和服务器）和文件压缩（如果您有此类支持的插件/模板）。
如果问题无法解决，请尝试关闭缓存。

# javascript - on() jQuery 函数中的“选择器”是什么？

> ID：15397667
> 
> 赞同：0
> 
> 时间：2013-03-13T22:23:55.990
> 
> 标签：javascript, jquery, javascript-events

我有以下工作代码，当我单击`a`带有 id 的标签时，“hi”会打印到控制台`info-toggle`。

`<a href="#" id="info-toggle">More info</a>`

```
$.ajax({
  'url': '/maps/building/' + marker.urlID,
  'dataType': 'json',
  'success': function(data) {
    infowindow.setContent(data.html_short);
    infowindow.open(map, marker);
    $(document).on('click', '#info-toggle', function(event) {
      event.preventDefault();
      console.log('hi');
    });
  }
}); 
```

但是，如果我将`.on()`调用修改为以下

```
$('#info-toggle').on('click', function(event) {
  event.preventDefault();
  console.log('hi');
}); 
```

'hi' 没有打印出来。

从文档：

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最内到最外的元素），并为沿该路径匹配选择器的任何元素运行处理程序。

是`selector`指括号内的选择器还是函数`$()`中的第二个参数？`.on()``.on( events [, selector ] [, data ], handler(eventObject) )`

# javascript - 什么 Javascript 库可以针对对象评估类似 MongoDB 的查询谓词？

> ID：15397668
> 
> 赞同：17
> 
> 时间：2013-03-13T22:24:03.610
> 
> 标签：javascript, node.js, mongodb, predicate

是否有一个 javascript 库可以让我在类似于 MongoDB 查询语言的 DSL 中表达对象谓词？为了在大型程序中清晰起见，我想说：

```
var obj = { 
    a: 1, 
    b: 'abcdefg' 
}, qry = { 
    a: { $gt: 0 }, 
    b: /^abc/ 
}; 

if(query(qry).matches(obj)) { 
    // do something appropriate since 
} 
```

代替：

```
var obj = { 
    a: 1, 
    b: 'abcdefg' 
}; 
if(obj.a>0 && qry.b.test(obj.b)) { 
    // do something appropriate 
} 
```

我正在使用 Node.js，所以[NPM](https://npmjs.org/)上的任何东西都会很棒。如果库可以从数组中选择对象以及匹配单个对象，那将是一个额外的好处。

我回顾了这两个相关的问题，但它们对我的情况并不是特别有帮助：

*   [实现类似 goMongoDB 的查询表达式对象评估](https://stackoverflow.com/questions/14972025/implementing-mongodb-like-query-expression-object-evaluation)
*   [在 PHP 中评估类似 MongoDB 的 JSON 查询](https://stackoverflow.com/questions/14070460/evaluating-mongodb-like-json-queries-in-php)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T15:58:18.280

好的，我找到了答案：[Sift.js](https://github.com/crcn/sift.js)

现在长答案：这已经被[问过并回答过](https://stackoverflow.com/questions/8695718/is-there-a-way-to-use-mongodb-query-objects-to-filter-regular-javascript-arrays)。重点是：

*   如果你真的想要 Mongo 语法，请使用 Sift
*   如果您想更主流，请像其他人一样使用[Underscore.js](http://documentcloud.github.com/underscore/)。除了它基本上完成 sift 的功能之外，它还有许多方便的功能，但语法略有不同。
*   您可能根本不需要任何库 - 现代浏览器直接在[Array 原型](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/prototype)上支持许多有用的功能，`filter()`例如。

最后一点，[mongodb-riff](https://github.com/jostylr/mongodb-riff)似乎正在尝试做类似的事情，但目前该页面明确指出它不起作用 - 也许它已被放弃。但他的自述文件至少是有价值的 :-)，他提到了 sift 和[查询引擎](https://github.com/bevry/query-engine)，它们看起来更成熟，虽然对我来说太复杂了！

就我个人而言，我将使用 Underscore，因为现在我第一次研究它，我意识到它有很多我需要的方便的东西，而且我真的只想做一些简单的功能，比如`_.find()`在 Underscore 中的功能. 但我想如果你想做更复杂的类似 mongo 的查询，你会用 Sift 在更少的 LOC 中完成。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-22T15:56:03.810

看看[明哥](https://github.com/kofrasa/mingo)

在没有找到合适的替代方案后，我实施了它。

它仍在积极开发中，但可以使用。测试覆盖不完整。

可从浏览器和 nodejs 使用

[编辑]

这个库现在是 MongoDB 前端查询语言最完整的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-12T11:12:12.490

[https://github.com/mirek/node-json-criteria](https://github.com/mirek/node-json-criteria)库正是这样做的——使用 MongoDB 查询格式评估对 JSON 对象的条件查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T03:20:08.280

# lodash.js

你想使用 lodash.js。它是 underscore.js 的替代品。性能快了两倍。

[http://lodash.com/](http://lodash.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T23:50:20.317

我能找到的最接近的是[linq.js](http://linqjs.codeplex.com/)，它是 JavaScript 的 LINQ。希望这会对您有所帮助。

# perl - 如何将 PHYLIP 格式转换为 FASTA

> ID：15397672
> 
> 赞同：4
> 
> 时间：2013-03-13T22:24:12.140
> 
> 标签：perl, bioinformatics

我刚开始使用 perl，我有一个问题。我有 PHYLIP 文件，我需要将其转换为 FASTA。我开始写脚本。首先，我删除了行中的空格，现在我需要对齐每行中应该是 60 个氨基酸的所有行，并且序列标识符应该打印在新行中。也许有人可以给我一些建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T02:22:20.893

BioPerl [Bio::AlignIO](http://doc.bioperl.org/bioperl-live/Bio/AlignIO.html)模块可能会有所帮助。它支持[PHYLIP](http://doc.bioperl.org/bioperl-live/Bio/AlignIO/phylip.html)序列格式：

**phylip2fasta.pl**

```
use strict;
use warnings;
use Bio::AlignIO; 

# http://doc.bioperl.org/bioperl-live/Bio/AlignIO.html
# http://doc.bioperl.org/bioperl-live/Bio/AlignIO/phylip.html
# http://www.bioperl.org/wiki/PHYLIP_multiple_alignment_format

my ($inputfilename) = @ARGV;
die "must provide phylip file as 1st parameter...\n" unless $inputfilename;
my $in  = Bio::AlignIO->new(-file   => $inputfilename ,
                         -format => 'phylip',
                         -interleaved => 1);
my $out = Bio::AlignIO->new(-fh   => \*STDOUT ,
                         -format => 'fasta');

while ( my $aln = $in->next_aln() ) {
    $out->write_aln($aln);
} 
```

**$ perl phylip2fasta.pl test.phylip**

```
>Turkey/1-42
AAGCTNGGGCATTTCAGGGTGAGCCCGGGCAATACAGGGTAT
>Salmo_gair/1-42
AAGCCTTGGCAGTGCAGGGTGAGCCGTGGCCGGGCACGGTAT
>H._Sapiens/1-42
ACCGGTTGGCCGTTCAGGGTACAGGTTGGCCGTTCAGGGTAA
>Chimp/1-42
AAACCCTTGCCGTTACGCTTAAACCGAGGCCGGGACACTCAT
>Gorilla/1-42
AAACCCTTGCCGGTACGCTTAAACCATTGCCGGTACGCTTAA 
```

**test.phylip** [http://evolution.genetics.washington.edu/phylip/doc/sequence.html](http://evolution.genetics.washington.edu/phylip/doc/sequence.html)

```
 5    42
Turkey    AAGCTNGGGC ATTTCAGGGT
Salmo gairAAGCCTTGGC AGTGCAGGGT
H. SapiensACCGGTTGGC CGTTCAGGGT
Chimp     AAACCCTTGC CGTTACGCTT
Gorilla   AAACCCTTGC CGGTACGCTT

GAGCCCGGGC AATACAGGGT AT
GAGCCGTGGC CGGGCACGGT AT
ACAGGTTGGC CGTTCAGGGT AA
AAACCGAGGC CGGGACACTC AT
AAACCATTGC CGGTACGCTT AA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:29:30.877

如果您可以访问 BioPerl，我建议使用它（请参阅其他答案）。如果没有，这是我几年前在旧硬件作业中使用的快速脚本。它可能对你有用。

需要注意的一件事：它将整个 fasta 序列打印在一行上，因此您可以在最后编辑 print 语句以每行打印 70 AA。

```
#!/usr/bin/perl

use warnings;
use strict;

<DATA> =~ /(\d+)/; # first number is number of species

my $num_species = $1;
my $i = 0;
my @species;
my @acids;

# first $num_species rows have the species name
for ($i = 0; $i < $num_species; $i++) {   
    my @line = split /\s+/, <DATA>;
    chomp @line;

    push @species, shift (@line);
    push @acids, join ("", @line);

}

# Get the rest of the AAs
$i = 0;
while (<DATA>) {
    chomp;
    $_ =~ s/\r//g; #remove \r

    next if !$_;

    $_ =~ s/\s+//g; #remove spaces
    $acids[$i] .= $_;
    $i = ++$i % $num_species;

}

# Print them
for ($i = 0; $i < $num_species; $i++) {
    print "> ", $species[$i], "\n";

    # uncomment next line if you want to remove the gaps ("-")
    $acids[$i] =~ s/-//g;
    print $acids[$i], "\n\n";
}

# Simple PHYLIP Amino Acid file
__DATA__
 10 234
Cow          MAYPMQLGFQ DATSPIMEEL LHFHDHTLMI VFLISSLVLY IISLMLTTKL
Carp         MAHPTQLGFK DAAMPVMEEL LHFHDHALMI VLLISTLVLY IITAMVSTKL
Chicken      MANHSQLGFQ DASSPIMEEL VEFHDHALMV ALAICSLVLY LLTLMLMEKL
Human        MAHAAQVGLQ DATSPIMEEL ITFHDHALMI IFLICFLVLY ALFLTLTTKL
Loach        MAHPTQLGFQ DAASPVMEEL LHFHDHALMI VFLISALVLY VIITTVSTKL
Mouse        MAYPFQLGLQ DATSPIMEEL MNFHDHTLMI VFLISSLVLY IISLMLTTKL
Rat          MAYPFQLGLQ DATSPIMEEL TNFHDHTLMI VFLISSLVLY IISLMLTTKL
Seal         MAYPLQMGLQ DATSPIMEEL LHFHDHTLMI VFLISSLVLY IISLMLTTKL
Whale        MAYPFQLGFQ DAASPIMEEL LHFHDHTLMI VFLISSLVLY IITLMLTTKL
Frog         MAHPSQLGFQ DAASPIMEEL LHFHDHTLMA VFLISTLVLY IITIMMTTKL

             THTSTMDAQE VETIWTILPA IILILIALPS LRILYMMDEI NNPSLTVKTM
             TNKYILDSQE IEIVWTILPA VILVLIALPS LRILYLMDEI NDPHLTIKAM
             S-SNTVDAQE VELIWTILPA IVLVLLALPS LQILYMMDEI DEPDLTLKAI
             TNTNISDAQE METVWTILPA IILVLIALPS LRILYMTDEV NDPSLTIKSI
             TNMYILDSQE IEIVWTVLPA LILILIALPS LRILYLMDEI NDPHLTIKAM
             THTSTMDAQE VETIWTILPA VILIMIALPS LRILYMMDEI NNPVLTVKTM
             THTSTMDAQE VETIWTILPA VILILIALPS LRILYMMDEI NNPVLTVKTM
             THTSTMDAQE VETVWTILPA IILILIALPS LRILYMMDEI NNPSLTVKTM
             THTSTMDAQE VETVWTILPA IILILIALPS LRILYMMDEV NNPSLTVKTM
             TNTNLMDAQE IEMVWTIMPA ISLIMIALPS LRILYLMDEV NDPHLTIKAI

             GHQWYWSYEY TDYEDLSFDS YMIPTSELKP GELRLLEVDN RVVLPMEMTI
             GHQWYWSYEY TDYENLGFDS YMVPTQDLAP GQFRLLETDH RMVVPMESPV
             GHQWYWTYEY TDFKDLSFDS YMTPTTDLPL GHFRLLEVDH RIVIPMESPI
             GHQWYWTYEY TDYGGLIFNS YMLPPLFLEP GDLRLLDVDN RVVLPIEAPI
             GHQWYWSYEY TDYENLSFDS YMIPTQDLTP GQFRLLETDH RMVVPMESPI
             GHQWYWSYEY TDYEDLCFDS YMIPTNDLKP GELRLLEVDN RVVLPMELPI
             GHQWYWSYEY TDYEDLCFDS YMIPTNDLKP GELRLLEVDN RVVLPMELPI
             GHQWYWSYEY TDYEDLNFDS YMIPTQELKP GELRLLEVDN RVVLPMEMTI
             GHQWYWSYEY TDYEDLSFDS YMIPTSDLKP GELRLLEVDN RVVLPMEMTI
             GHQWYWSYEY TNYEDLSFDS YMIPTNDLTP GQFRLLEVDN RMVVPMESPT

             RMLVSSEDVL HSWAVPSLGL KTDAIPGRLN QTTLMSSRPG LYYGQCSEIC
             RVLVSAEDVL HSWAVPSLGV KMDAVPGRLN QAAFIASRPG VFYGQCSEIC
             RVIITADDVL HSWAVPALGV KTDAIPGRLN QTSFITTRPG VFYGQCSEIC
             RMMITSQDVL HSWAVPTLGL KTDAIPGRLN QTTFTATRPG VYYGQCSEIC
             RILVSAEDVL HSWALPAMGV KMDAVPGRLN QTAFIASRPG VFYGQCSEIC
             RMLISSEDVL HSWAVPSLGL KTDAIPGRLN QATVTSNRPG LFYGQCSEIC
             RMLISSEDVL HSWAIPSLGL KTDAIPGRLN QATVTSNRPG LFYGQCSEIC
             RMLISSEDVL HSWAVPSLGL KTDAIPGRLN QTTLMTMRPG LYYGQCSEIC
             RMLVSSEDVL HSWAVPSLGL KTDAIPGRLN QTTLMSTRPG LFYGQCSEIC
             RLLVTAEDVL HSWAVPSLGV KTDAIPGRLH QTSFIATRPG VFYGQCSEIC

             GSNHSFMPIV LELVPLKYFE KWSASML--- ----
             GANHSFMPIV VEAVPLEHFE NWSSLMLEDA SLGS
             GANHSYMPIV VESTPLKHFE AWSSL----- -LSS
             GANHSFMPIV LELIPLKIFE M-------GP VFTL
             GANHSFMPIV VEAVPLSHFE NWSTLMLKDA SLGS
             GSNHSFMPIV LEMVPLKYFE NWSASMI--- ----
             GSNHSFMPIV LEMVPLKYFE NWSASMI--- ----
             GSNHSFMPIV LELVPLSHFE KWSTSML--- ----
             GSNHSFMPIV LELVPLEVFE KWSVSML--- ----
             GANHSFMPIV VEAVPLTDFE NWSSSML-EA SL-- 
```

输出：

```
> Cow
MAYPMQLGFQDATSPIMEELLHFHDHTLMIVFLISSLVLYIISLMLTTKLTHTSTMDAQEVETIWTILPAIILILIALPSLRILYMMDEINNPSLTVKTMGHQWYWSYEYTDYEDLSFDSYMIPTSELKPGELRLLEVDNRVVLPMEMTIRMLVSSEDVLHSWAVPSLGLKTDAIPGRLNQTTLMSSRPGLYYGQCSEICGSNHSFMPIVLELVPLKYFEKWSASML

> Carp
MAHPTQLGFKDAAMPVMEELLHFHDHALMIVLLISTLVLYIITAMVSTKLTNKYILDSQEIEIVWTILPAVILVLIALPSLRILYLMDEINDPHLTIKAMGHQWYWSYEYTDYENLGFDSYMVPTQDLAPGQFRLLETDHRMVVPMESPVRVLVSAEDVLHSWAVPSLGVKMDAVPGRLNQAAFIASRPGVFYGQCSEICGANHSFMPIVVEAVPLEHFENWSSLMLEDASLGS

> Chicken
MANHSQLGFQDASSPIMEELVEFHDHALMVALAICSLVLYLLTLMLMEKLSSNTVDAQEVELIWTILPAIVLVLLALPSLQILYMMDEIDEPDLTLKAIGHQWYWTYEYTDFKDLSFDSYMTPTTDLPLGHFRLLEVDHRIVIPMESPIRVIITADDVLHSWAVPALGVKTDAIPGRLNQTSFITTRPGVFYGQCSEICGANHSYMPIVVESTPLKHFEAWSSLLSS

> Human
MAHAAQVGLQDATSPIMEELITFHDHALMIIFLICFLVLYALFLTLTTKLTNTNISDAQEMETVWTILPAIILVLIALPSLRILYMTDEVNDPSLTIKSIGHQWYWTYEYTDYGGLIFNSYMLPPLFLEPGDLRLLDVDNRVVLPIEAPIRMMITSQDVLHSWAVPTLGLKTDAIPGRLNQTTFTATRPGVYYGQCSEICGANHSFMPIVLELIPLKIFEMGPVFTL

> Loach
MAHPTQLGFQDAASPVMEELLHFHDHALMIVFLISALVLYVIITTVSTKLTNMYILDSQEIEIVWTVLPALILILIALPSLRILYLMDEINDPHLTIKAMGHQWYWSYEYTDYENLSFDSYMIPTQDLTPGQFRLLETDHRMVVPMESPIRILVSAEDVLHSWALPAMGVKMDAVPGRLNQTAFIASRPGVFYGQCSEICGANHSFMPIVVEAVPLSHFENWSTLMLKDASLGS

> Mouse
MAYPFQLGLQDATSPIMEELMNFHDHTLMIVFLISSLVLYIISLMLTTKLTHTSTMDAQEVETIWTILPAVILIMIALPSLRILYMMDEINNPVLTVKTMGHQWYWSYEYTDYEDLCFDSYMIPTNDLKPGELRLLEVDNRVVLPMELPIRMLISSEDVLHSWAVPSLGLKTDAIPGRLNQATVTSNRPGLFYGQCSEICGSNHSFMPIVLEMVPLKYFENWSASMI

> Rat
MAYPFQLGLQDATSPIMEELTNFHDHTLMIVFLISSLVLYIISLMLTTKLTHTSTMDAQEVETIWTILPAVILILIALPSLRILYMMDEINNPVLTVKTMGHQWYWSYEYTDYEDLCFDSYMIPTNDLKPGELRLLEVDNRVVLPMELPIRMLISSEDVLHSWAIPSLGLKTDAIPGRLNQATVTSNRPGLFYGQCSEICGSNHSFMPIVLEMVPLKYFENWSASMI

> Seal
MAYPLQMGLQDATSPIMEELLHFHDHTLMIVFLISSLVLYIISLMLTTKLTHTSTMDAQEVETVWTILPAIILILIALPSLRILYMMDEINNPSLTVKTMGHQWYWSYEYTDYEDLNFDSYMIPTQELKPGELRLLEVDNRVVLPMEMTIRMLISSEDVLHSWAVPSLGLKTDAIPGRLNQTTLMTMRPGLYYGQCSEICGSNHSFMPIVLELVPLSHFEKWSTSML

> Whale
MAYPFQLGFQDAASPIMEELLHFHDHTLMIVFLISSLVLYIITLMLTTKLTHTSTMDAQEVETVWTILPAIILILIALPSLRILYMMDEVNNPSLTVKTMGHQWYWSYEYTDYEDLSFDSYMIPTSDLKPGELRLLEVDNRVVLPMEMTIRMLVSSEDVLHSWAVPSLGLKTDAIPGRLNQTTLMSTRPGLFYGQCSEICGSNHSFMPIVLELVPLEVFEKWSVSML

> Frog
MAHPSQLGFQDAASPIMEELLHFHDHTLMAVFLISTLVLYIITIMMTTKLTNTNLMDAQEIEMVWTIMPAISLIMIALPSLRILYLMDEVNDPHLTIKAIGHQWYWSYEYTNYEDLSFDSYMIPTNDLTPGQFRLLEVDNRMVVPMESPTRLLVTAEDVLHSWAVPSLGVKTDAIPGRLHQTSFIATRPGVFYGQCSEICGANHSFMPIVVEAVPLTDFENWSSSMLEASL 
```

# css - 重复背景图像在视口处停止：需要 100%

> ID：15397674
> 
> 赞同：0
> 
> 时间：2013-03-13T22:24:15.703
> 
> 标签：css, image, background, repeat

我有一个小的 .png 文件，它重复形成背景图像。我需要将`body`页面的高度设置为 100%，以便在我的内容包装器上使用 min-height 属性。但是，尝试结合使用背景图像`height:100%`会导致在页面滚动时图像被截断。请参阅图片以详细说明我的意思：

顶部的背景 ![在此处输入图像描述](../Images/9ff5246411fddf4621581b07a75da32a.png) 但是滚动时它被切断

这是一个小提琴：

[http://jsfiddle.net/Nick_B/x2h3g/](http://jsfiddle.net/Nick_B/x2h3g/)

即使在用户向下滚动后，如何让背景图像在整个页面上重复？这是CSS：

```
body {  
    background-color:#9AAEBF; 
    overflow-y:scroll;
    height:100%;
}

html:after { /* from  www.css-tricks.com/snippets/css/transparent-background-images */
    background-image: url('http://www.example.com/img/background.png');    
    opacity:0.4;
    content: "";
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    position: absolute;
    z-index: -1;
} 
```

谢谢你的想法。

# android - android.hardware.usb UsbManager 类公共方法 getDeviceList 和 getAccessoryList 返回 null

> ID：15397675
> 
> 赞同：2
> 
> 时间：2013-03-13T22:24:30.057
> 
> 标签：android, usb

我正在尝试通过 USB 将 Android 手机连接到配件（在本例中为 MacBook Pro）并使用 getDeviceList() 来验证连接是否被识别，并使用 toString() 将 UsbDevice 对象的描述打印到屏幕上以下代码：

```
//as host
HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
String s = "";
while(deviceIterator.hasNext()){
   UsbDevice device = deviceIterator.next();
   manager.requestPermission(device, mPermissionIntent);
   Log.d("List Devices", device.toString());

   s += device.toString();
} 
```

代码示例几乎直接来自 Android 开发者网站，但多部手机似乎无法识别任何外围设备。同样，我尝试将 Android 手机视为配件，但得到了类似的结果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:07:11.207

关于附件模式，来自[Android 开发人员指南](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)：

> USB 附件模式允许用户连接专为 Android 供电设备设计的 USB 主机硬件。配件必须遵守 Android 配件开发工具包文档中概述的 Android 配件协议。

因此，只有实现了 AOA（Android 开放附件）协议的设备才会显示为`UsbAccessory`来自手机。

至于主机模式，手机本身一定是允许的，否则它不会真正起作用。诚然，在大多数 Android 手机/平板电脑上，开箱即用的完全支持主机模式似乎非常罕见。[此答案](https://stackoverflow.com/a/11992683/155407)演示了如何让您的手机/平板电脑完全支持主机模式（如果还没有的话），但请注意，这需要 root 访问权限。

# java - Hibernate + SQLite 不创建数据库

> ID：15397677
> 
> 赞同：4
> 
> 时间：2013-03-13T22:24:43.087
> 
> 标签：java, hibernate, sqlite, javafx

这是我的问题：

我有一个使用 JavaFX + Hibernate + SQLite 的桌面应用程序。这是我的模型：

```
 @Entity
@Table(name = "usuario")
public class Usuario implements AbstractModel, Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @NotNull @Size(min=5, max=100)
    private String username;

    @NotNull @Size(min=5, max=100)
    private String password;

    @NotNull
    private Boolean administrador;

    @Version
    private Integer version;

    public Usuario() {
    }

    public Usuario(Integer id, String username, String password, Boolean admin, Integer version) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.administrador = admin;
        this.version = version;
    }

    @Override
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPasword(String password) {
        this.password = password;
    }

    public Boolean getAdministrador() {
        return administrador;
    }

    public void setAdministrador(Boolean administrador) {
        this.administrador = administrador;
    }

    public Integer getVersion() {
        return version;
    } 
```

这是我的persistence.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="PartyRockPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>br.com.gear7.partyrock.model.Usuario</class>

    <properties>
      <property name="javax.persistence.jdbc.driver" value="org.sqlite.JDBC" />
      <property name="javax.persistence.jdbc.url" value="jdbc:sqlite:party_rock.sqlite" />
      <property name="javax.persistence.jdbc.user" value="" />
      <property name="javax.persistence.jdbc.password" value="" />

      <property name="hibernate.dialect" value="br.com.gear7.partyrock.utils.SQLiteDialect"/>
      <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
      <property name="hibernate.connection.charSet" value="UTF-8"/>
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
    </properties>
  </persistence-unit>
</persistence> 
```

最后这是我的 SQLiteDialect

```
> package br.com.gear7.partyrock.utils;
/*
 * The author disclaims copyright to this source code. In place of
 * a legal notice, here is a blessing:
 * 
 * May you do good and not evil.
 * May you find forgiveness for yourself and forgive others.
 * May you share freely, never taking more than you give.
 *
 */
import java.sql.Types;

import org.hibernate.dialect.Dialect;
import org.hibernate.dialect.function.StandardSQLFunction;
import org.hibernate.dialect.function.SQLFunctionTemplate;
import org.hibernate.dialect.function.VarArgsSQLFunction;
import org.hibernate.Hibernate;

public class SQLiteDialect extends Dialect {
    public SQLiteDialect() {
        super();
        registerColumnType(Types.BIT, "integer");
        registerColumnType(Types.TINYINT, "tinyint");
        registerColumnType(Types.SMALLINT, "smallint");
        registerColumnType(Types.INTEGER, "integer");
        registerColumnType(Types.BIGINT, "bigint");
        registerColumnType(Types.FLOAT, "float");
        registerColumnType(Types.REAL, "real");
        registerColumnType(Types.DOUBLE, "double");
        registerColumnType(Types.NUMERIC, "numeric");
        registerColumnType(Types.DECIMAL, "decimal");
        registerColumnType(Types.CHAR, "char");
        registerColumnType(Types.VARCHAR, "varchar");
        registerColumnType(Types.LONGVARCHAR, "longvarchar");
        registerColumnType(Types.DATE, "date");
        registerColumnType(Types.TIME, "time");
        registerColumnType(Types.TIMESTAMP, "timestamp");
        registerColumnType(Types.BINARY, "blob");
        registerColumnType(Types.VARBINARY, "blob");
        registerColumnType(Types.LONGVARBINARY, "blob");
        // registerColumnType(Types.NULL, "null");
        registerColumnType(Types.BLOB, "blob");
        registerColumnType(Types.CLOB, "clob");
        registerColumnType(Types.BOOLEAN, "integer");

        registerFunction("concat", new VarArgsSQLFunction(org.hibernate.type.StandardBasicTypes.STRING, "",
                "||", ""));
        registerFunction("mod", new SQLFunctionTemplate(org.hibernate.type.StandardBasicTypes.INTEGER,
                "?1 % ?2"));
        registerFunction("substr", new StandardSQLFunction("substr",
                org.hibernate.type.StandardBasicTypes.STRING));
        registerFunction("substring", new StandardSQLFunction("substr",
                org.hibernate.type.StandardBasicTypes.STRING));
    }

    public boolean supportsIdentityColumns() {
        return true;
    }

    /*
     public boolean supportsInsertSelectIdentity() {
     return true; // As specify in NHibernate dialect
     }
     */

    public boolean hasDataTypeInIdentityColumn() {
        return false; // As specify in NHibernate dialect
    }

    /*
     public String appendIdentitySelectToInsert(String insertString) {
     return new StringBuffer(insertString.length()+30). // As specify in NHibernate dialect
     append(insertString).
     append("; ").append(getIdentitySelectString()).
     toString();
     }
     */

    public String getIdentityColumnString() {
        // return "integer primary key autoincrement";
        return "integer";
    }

    public String getIdentitySelectString() {
        return "select last_insert_rowid()";
    }

    public boolean supportsLimit() {
        return true;
    }

    public String getLimitString(String query, boolean hasOffset) {
        return new StringBuffer(query.length() + 20).append(query).append(
                hasOffset ? " limit ? offset ?" : " limit ?").toString();
    }

    public boolean supportsTemporaryTables() {
        return true;
    }

    public String getCreateTemporaryTableString() {
        return "create temporary table if not exists";
    }

    public boolean dropTemporaryTableAfterUse() {
        return false;
    }

    public boolean supportsCurrentTimestampSelection() {
        return true;
    }

    public boolean isCurrentTimestampSelectStringCallable() {
        return false;
    }

    public String getCurrentTimestampSelectString() {
        return "select current_timestamp";
    }

    public boolean supportsUnionAll() {
        return true;
    }

    public boolean hasAlterTable() {
        return false; // As specify in NHibernate dialect
    }

    public boolean dropConstraints() {
        return false;
    }

    public String getAddColumnString() {
        return "add column";
    }

    public String getForUpdateString() {
        return "";
    }

    public boolean supportsOuterJoinForUpdate() {
        return false;
    }

    public String getDropForeignKeyString() {
        throw new UnsupportedOperationException(
                "No drop foreign key syntax supported by SQLiteDialect");
    }

    public String getAddForeignKeyConstraintString(String constraintName,
            String[] foreignKey, String referencedTable, String[] primaryKey,
            boolean referencesPrimaryKey) {
        throw new UnsupportedOperationException(
                "No add foreign key syntax supported by SQLiteDialect");
    }

    public String getAddPrimaryKeyConstraintString(String constraintName) {
        throw new UnsupportedOperationException(
                "No add primary key syntax supported by SQLiteDialect");
    }

    public boolean supportsIfExistsBeforeTableName() {
        return true;

}
    public boolean supportsCascadeDelete() {
        return false;
    }
} 
```

当我运行我的应用程序时，一切都很顺利，但没有创建数据库文件，这意味着我的表也没有创建。

在过去的 3 个小时里一直在为此苦苦挣扎，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-15T15:55:36.900

很抱歉，我花了这么长时间，但这就是为我解决问题的方法。我将 DIALECT 文件更改为我找到的更好的文件。

```
package gear7.partyrock.utils;

/*
 * The author disclaims copyright to this source code.  In place of
 * a legal notice, here is a blessing:
 *
 *    May you do good and not evil.
 *    May you find forgiveness for yourself and forgive others.
 *    May you share freely, never taking more than you give.
 *
 */

import java.sql.Types;
import org.hibernate.dialect.Dialect;

import org.hibernate.dialect.function.AbstractAnsiTrimEmulationFunction;
import org.hibernate.dialect.function.NoArgSQLFunction;
import org.hibernate.dialect.function.SQLFunction;
import org.hibernate.dialect.function.SQLFunctionTemplate;
import org.hibernate.dialect.function.StandardSQLFunction;
import org.hibernate.dialect.function.VarArgsSQLFunction;
import org.hibernate.type.StandardBasicTypes;

public class SQLiteDialect extends Dialect {
  public SQLiteDialect() {
    registerColumnType(Types.BIT, "boolean");
    registerColumnType(Types.TINYINT, "tinyint");
    registerColumnType(Types.SMALLINT, "smallint");
    registerColumnType(Types.INTEGER, "integer");
    registerColumnType(Types.BIGINT, "bigint");
    registerColumnType(Types.FLOAT, "float");
    registerColumnType(Types.REAL, "real");
    registerColumnType(Types.DOUBLE, "double");
    registerColumnType(Types.NUMERIC, "numeric($p, $s)");
    registerColumnType(Types.DECIMAL, "decimal");
    registerColumnType(Types.CHAR, "char");
    registerColumnType(Types.VARCHAR, "varchar($l)");
    registerColumnType(Types.LONGVARCHAR, "longvarchar");
    registerColumnType(Types.DATE, "date");
    registerColumnType(Types.TIME, "time");
    registerColumnType(Types.TIMESTAMP, "datetime");
    registerColumnType(Types.BINARY, "blob");
    registerColumnType(Types.VARBINARY, "blob");
    registerColumnType(Types.LONGVARBINARY, "blob");
    registerColumnType(Types.BLOB, "blob");
    registerColumnType(Types.CLOB, "clob");
    registerColumnType(Types.BOOLEAN, "boolean");

    //registerFunction( "abs", new StandardSQLFunction("abs") );
    registerFunction( "concat", new VarArgsSQLFunction(StandardBasicTypes.STRING, "", "||", "") );
    //registerFunction( "length", new StandardSQLFunction("length", StandardBasicTypes.LONG) );
    //registerFunction( "lower", new StandardSQLFunction("lower") );
    registerFunction( "mod", new SQLFunctionTemplate(StandardBasicTypes.INTEGER, "?1 % ?2" ) );
    registerFunction( "quote", new StandardSQLFunction("quote", StandardBasicTypes.STRING) );
    registerFunction( "random", new NoArgSQLFunction("random", StandardBasicTypes.INTEGER) );
    registerFunction( "round", new StandardSQLFunction("round") );
    registerFunction( "substr", new StandardSQLFunction("substr", StandardBasicTypes.STRING) );
    registerFunction( "substring", new SQLFunctionTemplate( StandardBasicTypes.STRING, "substr(?1, ?2, ?3)" ) );
    registerFunction( "trim", new AbstractAnsiTrimEmulationFunction() {
        protected SQLFunction resolveBothSpaceTrimFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "trim(?1)");
        }

        protected SQLFunction resolveBothSpaceTrimFromFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "trim(?2)");
        }

        protected SQLFunction resolveLeadingSpaceTrimFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "ltrim(?1)");
        }

        protected SQLFunction resolveTrailingSpaceTrimFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "rtrim(?1)");
        }

        protected SQLFunction resolveBothTrimFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "trim(?1, ?2)");
        }

        protected SQLFunction resolveLeadingTrimFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "ltrim(?1, ?2)");
        }

        protected SQLFunction resolveTrailingTrimFunction() {
          return new SQLFunctionTemplate(StandardBasicTypes.STRING, "rtrim(?1, ?2)");
        }
    } );
    //registerFunction( "upper", new StandardSQLFunction("upper") );
  }

  public boolean supportsIdentityColumns() {
    return true;
  }

  /*
  public boolean supportsInsertSelectIdentity() {
    return true; // As specify in NHibernate dialect
  }
  */

  public boolean hasDataTypeInIdentityColumn() {
    return false; // As specify in NHibernate dialect
  }

  /*
  public String appendIdentitySelectToInsert(String insertString) {
    return new StringBuffer(insertString.length()+30). // As specify in NHibernate dialect
      append(insertString).
      append("; ").append(getIdentitySelectString()).
      toString();
  }
  */

  public String getIdentityColumnString() {
    // return "integer primary key autoincrement";
    return "integer";
  }

  public String getIdentitySelectString() {
    return "select last_insert_rowid()";
  }

  public boolean supportsLimit() {
    return true;
  }

  public boolean bindLimitParametersInReverseOrder() {
    return true;
  }

  protected String getLimitString(String query, boolean hasOffset) {
    return new StringBuffer(query.length()+20).
      append(query).
      append(hasOffset ? " limit ? offset ?" : " limit ?").
      toString();
  }

  public boolean supportsTemporaryTables() {
    return true;
  }

  public String getCreateTemporaryTableString() {
    return "create temporary table if not exists";
  }

  public boolean dropTemporaryTableAfterUse() {
    return true; // TODO Validate
  }

  public boolean supportsCurrentTimestampSelection() {
    return true;
  }

  public boolean isCurrentTimestampSelectStringCallable() {
    return false;
  }

  public String getCurrentTimestampSelectString() {
    return "select current_timestamp";
  }

  public boolean supportsUnionAll() {
    return true;
  }

  public boolean hasAlterTable() {
    return false; // As specify in NHibernate dialect
  }

  public boolean dropConstraints() {
    return false;
  }

  /*
  public String getAddColumnString() {
    return "add column";
  }
  */

  public String getForUpdateString() {
    return "";
  }

  public boolean supportsOuterJoinForUpdate() {
    return false;
  }

  public String getDropForeignKeyString() {
    throw new UnsupportedOperationException("No drop foreign key syntax supported by SQLiteDialect");
  }

  public String getAddForeignKeyConstraintString(String constraintName,
      String[] foreignKey, String referencedTable, String[] primaryKey,
      boolean referencesPrimaryKey) {
    throw new UnsupportedOperationException("No add foreign key syntax supported by SQLiteDialect");
  }

  public String getAddPrimaryKeyConstraintString(String constraintName) {
    throw new UnsupportedOperationException("No add primary key syntax supported by SQLiteDialect");
  }

  public boolean supportsIfExistsBeforeTableName() {
    return true;
  }

  public boolean supportsCascadeDelete() {
    return true;
  }

  /* not case insensitive for unicode characters by default (ICU extension needed)
  public boolean supportsCaseInsensitiveLike() {
    return true;
  }
  */

  public boolean supportsTupleDistinctCounts() {
    return false;
  }

  public String getSelectGUIDString() {
    return "select hex(randomblob(16))";
  }
} 
```

我在我的 persistence.xml 上更改了这一行

```
<property name="hibernate.hbm2ddl.auto" value="update"/> 
```

这为我解决了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:28:36.080

当你运行你的代码时，你可以将东西存储在数据库中吗？

查看您的persistence.xml，我可以看到`<property name="hibernate.hbm2ddl.auto" value="create-drop"/>`在休眠启动时将创建一个数据库，然后在休眠关闭时将其删除。很可能正在创建数据库，但删除数据库的 Hibernate 正在删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T07:07:16.413

只需在persistence.xml 中添加这个<property name="hbm2ddl.auto">create</property>。它会起作用的。但是除了创建之外，它不起作用。

# javascript - 调用js函数改变css颜色

> ID：15397679
> 
> 赞同：0
> 
> 时间：2013-03-13T22:24:57.550
> 
> 标签：javascript, jquery, html, css

我想用功能改变点击颜色，但是有一个问题，当我点击劣势时必须是红色，当我点击平均时必须是黄色，当我点击优势时必须是绿色......当我点击时另一件事必须失去焦点背景颜色......如何用功能做到这一点

```
function colored() {                
$(this).css('background-color','#C90');
} 
```

[http://jsfiddle.net/EC44Z/15/](http://jsfiddle.net/EC44Z/15/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:35:11.337

您没有将点击处理程序附加到您的 HTML 元素

例如，如果您希望名为 disabled 的链接更改背景颜色：

假设您有兴趣更改以下背景颜色：

```
<a href="javascript:void(0)" id="price_quality_dis" class="ca_button" onClick="colored();">Disadvantage</a> 
```

您将需要提供一个点击处理程序，如下所示：

```
$('#price_quality_dis').click(function(){
  $(this).css('background-color','#C90');
}); 
```

此外，您应该使用 class 属性来装饰您的 a 标签，以将单击时应具有相同背景颜色的链接组合在一起

一个例子是：http: [//jsfiddle.net/XUXwJ/](http://jsfiddle.net/XUXwJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:37:37.550

首先，我建议对此类功能使用 CSS 样式。所以你的颜色应该被定义为类，例如：

```
.is-advantage { background-color: #ccc; } 
```

然后，您应该为单击事件实现某种事件处理程序。在提供的 jsfiddle 中，我根本看不到您的函数将在哪里被调用。你可能想要这样的东西：

```
// change the class each time the button is clicked
$('.button').click(function() {
  $(this).toggleClass('is-advantage');
}); 
```

您可以使用[addClass](http://api.jquery.com/addClass/)、[removeClass](http://api.jquery.com/removeClass/)、[toggleClass](http://api.jquery.com/toggleClass/)等函数来更改当前为按钮设置的类。

# python - 分离 SQLAlchemy 实例，因此不会发生刷新

> ID：15397680
> 
> 赞同：14
> 
> 时间：2013-03-13T22:24:58.013
> 
> 标签：python, sqlalchemy, pyramid

我想从我的会话中分离一个类的实例，但它应该仍然可以读取（不发出查询）。我已经浏览了好几天的文档，但是我尝试的每种方法都会导致消息

```
DetachedInstanceError: Instance <MyModel at 0x36bb190> is not bound to a Session;
attribute refresh operation cannot proceed 
```

我正在与`zope.sqlalchemy`Pyramid 的事务管理器一起工作。我希望我的对象在事务提交**后**可用。我只需要它来读取“缓存”值，即事务提交之前其中的值。

我能找到的唯一可能的解决方案是包装类（或属性本身），然后手动跟踪更改（我可以这样做，但它真的很难看，而且根本不是 Pythonic）。

有没有办法阻止 SQLAlchemy 尝试刷新这些值？

作为后备，我什至愿意只返回`None`，只要在事务提交后没有抛出上述错误

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-14T23:16:57.520

您可以通过执行以下操作来做到这一点（例如缓存）：

```
session.expunge(obj) 
```

根据 sqlalchemy 文档：

[http://docs.sqlalchemy.org/en/rel_1_0/orm/session_api.html?highlight=expire#sqlalchemy.orm.session.Session.expunge](http://docs.sqlalchemy.org/en/rel_1_0/orm/session_api.html?highlight=expire#sqlalchemy.orm.session.Session.expunge)

这将为您提供处于分离状态的对象，您可以安全地使用 - 您需要记住，您将无法读取会发出另一个查询的属性，因此与类似会话的关系相关联，这将以`DetachedInstanceError`.

默认情况下，提交将发出 expire_all() ，这意味着所有对象将在读取时刷新它们的状态，通过删除它们，您将它们从会话中分离出来，因此在提交事务后不应有后续查询。

我建议不要在全球范围内禁用此功能，因为其他评论建议迈克拜尔通常认为这是一个好主意，并且对于大多数人来说是一个理智的默认设置，从长远来看可以让你头疼。

只是在你需要的时候明确地删除它们。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-20T01:33:59.517

[http://docs.sqlalchemy.org/en/latest/orm/session_api.html](http://docs.sqlalchemy.org/en/latest/orm/session_api.html)

我想你正在寻找`expire_on_commit = False`

我相信这可以让您分离对象并继续使用它。然而，尝试修改它并提交将导致`DetachedInstanceError`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-11T17:18:07.103

尝试这个：

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension(), expire_on_commit=False)) 
```

我也有这个问题，使用`expire_on_commit=False`解决了我的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-08T03:06:19.087

```
@contextmanager
def make_session_scope(Session):
    """Provide a transactional scope around a series of operations."""
    session = Session()
    session.expire_on_commit = False
    try:
        yield session
        session.commit()
    except:
        session.rollback()
        raise
    finally:
        session.close()

 with make_session_scope(session) as session:
      query = session.query(model) 
```

# prolog - 如何使用递归规则将序言中列表中的所有元素相乘？

> ID：15397681
> 
> 赞同：-2
> 
> 时间：2013-03-13T22:24:59.540
> 
> 标签：prolog

这些是我的事实：

```
%adjroom(Start,End,Key).
adjroom(corridor, room101,17).
adjroom(corridor, room102,3).
adjroom(corridor, room103,5).
adjroom(corridor, room104,20).
adjroom(corridor, store,18).
adjroom(corridor, lift,7).
adjroom(corridor, toilet,11).
adjroom(corridor, kitchen,2).
adjroom(kitchen, laundry,10).
adjroom(lift, lab,13). 
```

我的问题：

需要实施新的安全策略。根据新政策，必须控制机器人进入房间。为了实施此政策，每个机器人都有一个数字 ID，指示机器人可以访问的房间。为给定的一组房间获取 ID 号的基本原理如下：ID 号是通过将机器人需要访问的房间的所有密钥代码相乘获得的。例如，要访问厨房、卫生间和房间 102，需要生成以下 ID 2*11*3=66（请参阅建筑物的平面图了解与每个房间相关的代码）。编写一个 PROLOG 规则，给定一组房间生成与其关联的 ID。

这是我的规则：

```
rr([ ]).

rr([Y,Y2|T]):-adjroom(X,Y,Z),adjroom(X2,Y2,Z2), Q is Z * Z2, print(Q),rr([Y2|T]). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:52:33.110

Prolog算术有点麻烦。假设您有一个数字列表，您将需要（至少）一个 2 参数谓词来完成乘法运算：

```
multiply_list([N], N).
multiply_list([N|Ns], M) :-
  multiply_list(Ns, T), M is N * T. 
```

可以使用 maplist/3 或 findall/3 将房间列表映射到数字列表

高温高压

# javascript - Firefox 偏移错误，除非我清除缓存

> ID：15397684
> 
> 赞同：0
> 
> 时间：2013-03-13T22:25:08.173
> 
> 标签：javascript, jquery, firefox

老实说，如果有人理解我做错了什么，我真的不明白这里发生了什么，请帮忙。

我正在尝试获取 div 的偏移量

```
var $offset = $('#wrapper').offset().top; 
```

它是一个包装器 div，chrome 上的偏移量是 669.XXXpx

在 Firefox 中，它与这个数字大约有 87px 不同，现在这是奇怪的部分。如果我清除缓存，firefox 会得到正确的数字。然后它会在大约 5 或 6 次刷新中不断得到正确的数字……然后它又开始出错了。但如果我按住

```
 <shift> + <ctrl> + r 
```

...繁荣...它又是对的。起初我以为 Firefox 持有 $('#wrapper'); var 在缓存或类似的东西中，但我停止缓存该 var，我只是在需要它的地方调用它......但这并没有帮助。

我尝试了很多不同的东西，调用它的函数是我最后一个 javascript 文件的绝对最后一行，它被包裹在一个 document.ready 中，所以它应该是绝对最后执行的东西，并且页面应该正确设置.

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:33:05.963

缓慢加载脚本......在我的挫败感中，直到我退后一步才想到它。

# wordpress - WordPress 将头像拉到帖子中

> ID：15397688
> 
> 赞同：1
> 
> 时间：2013-03-13T22:25:21.930
> 
> 标签：wordpress, post, avatar, author

我正在创建一个很少但会发生的网站，我将有一位客座作者。我查看了作者框的插件，但没有一个足以满足我的需求。

我正在创建一些基本的 CSS 样式并对作者框进行硬编码，因为这几次我需要担心这一点。

我会在帖子中添加什么代码来根据电子邮件地址提取头像？似乎这可以通过一小段 php.ini 来实现。有没有一种简单的方法可以为我创建一个简码？我只涉足 WordPress 修改。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:29:47.193

我要做的是使用 Shortcode API：

[http://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

有了这个，您可以注册一个短代码，如

```
[author_avatar] 
```

这个简码很简单，它只使用 get_avatar()

[http://codex.wordpress.org/Function_Reference/get_avatar](http://codex.wordpress.org/Function_Reference/get_avatar)

基于 Shortcode API，您基本上可以通过简码传递参数，例如：

```
[author_avatar email="author.name@domain.com" size="32"] 
```

比使用 wp_enqueue_style() 拉入你的 CSS

[http://codex.wordpress.org/Function_Reference/wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)

我为简短而道歉，我希望这很有用。

# php - 使用 XMLReader 和 PHP 获取 XML 属性

> ID：15397690
> 
> 赞同：2
> 
> 时间：2013-03-13T22:25:32.037
> 
> 标签：php, xml, xmlreader

我不明白为什么我不能引用 XML 属性“headendId”。我已经参考了几篇关于这个的帖子，我的语法似乎很好？有人可以解释我做错了什么吗？提前致谢。

```
<?php
$reader = new XMLReader();
$reader->open('file.xml');

while($reader->read())
{
    if($reader->nodeType == XMLREADER::ELEMENT && $reader->localName == 'headend')
{   
//$reader->read();
$headend = (string)$reader->getAttribute('headendId');
echo $headend;
}
} 
```

（xml是）

```
<lineup>
 <headend headendId="something">
  <name>some name</name>
  <ids>ids</ids>
  <codes>codes</codes>
 </headend>
</lineup> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:33:37.297

*找到下一个节点*后不要前进`->read()`（属性不是节点）：

```
while ($reader->read())
{
        if ($reader->nodeType === XMLREADER::ELEMENT 
            && $reader->localName === 'headend')
        {
                echo $reader->getAttribute('headendId');
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T01:15:05.993

[它的工作原理与上次](https://stackoverflow.com/a/15351723/367456)概述的相似：

```
require('xmlreader-iterators.php'); // https://gist.github.com/hakre/5147685

$elements = new XMLElementIterator($reader, 'headend');
foreach ($elements as $element) {
    echo $element->getAttribute('headendId'), "\n";
} 
```

`XMLElementIterator`只允许迭代特定元素，这里你想要元素`headend`。

然后在每个元素上，您可以调用该`getAttribute()`方法来获取 headend headendId 属性的字符串值。

# delphi - 如何在 C++Builder 中构造这个 Delphi 类？

> ID：15397693
> 
> 赞同：1
> 
> 时间：2013-03-13T22:25:39.403
> 
> 标签：delphi, c++builder

这段代码的 C++ 等价物是什么

`ImageEnView1.IEBitmap.VirtualBitmapProvider := TIESlippyMap.Create();`

我得到一个编译错误

> [bcc32 错误] Unit1.cpp(12907): E2285 找不到“TIESlippyMap::TIESlippyMap()”的匹配项

在我的代码上

```
ImageEnview1->IEBitmap->VirtualBitmapProvider = new TIESlippyMap(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T22:28:09.563

```
ImageEnView1->IEBitmap->VirtualBitmapProvider = new TIESlippyMap(); 
```

**更新：**您正在尝试调用此构造函数：

```
constructor Create(provider:TIESlippyMapProvider = iesmpMapQuest; const cachePath:string = ''); 
```

您得到的编译器错误意味着 C++ 编译器找不到没有参数的构造函数，或者至少找不到具有参数的构造函数，这些参数都具有分配给它们的默认值。根据您使用的 C++Builder 版本，在为类生成 C++ .hpp 文件时，随附的 Delphi 编译器可能不会发出默认参数值。较旧的 Delphi 编译器版本不能正确执行此操作，但较新的版本可以。在这种情况下，听起来您使用的是受影响的版本，因此您必须明确填写这些参数值：

```
ImageEnView1->IEBitmap->VirtualBitmapProvider = new TIESlippyMap(iesmpMapQuest, ""); 
```

或者编辑 .hpp 文件以正确包含默认值：

```
class TIESlippyMap : public ...
{
...
public:
    __fastcall TIESlippyMap(TIESlippyMapProvider provider = iesmpMapQuest, const String cachePath = "");
...
}; 
```

# jquery - 查找每个元素的最后一个子元素

> ID：15397694
> 
> 赞同：1
> 
> 时间：2013-03-13T22:25:44.257
> 
> 标签：jquery, css, function, each

如果最后一个孩子有一个特定的类，我正在尝试更改元素组的最后一个孩子的 css。

例如

```
<div class="box">
<div class="entry"></div>
<div class="entry"></div>
<div class="divider"></div>
<div class="entry"></div>
<div class="entry"></div>
</div>

<div class="box">
<div class="entry"></div>
<div class="entry"></div>
<div class="entry"></div>
<div class="entry"></div>
<div class="divider"></div>
</div>

<div class="box">
<div class="entry"></div>
<div class="entry"></div>
<div class="divider"></div>
<div class="entry"></div>
<div class="entry"></div>
</div> 
```

我只想更改`"divider"`第二个条目块的类的 css，因为它是最后一个孩子。这是我到目前为止得到的。似乎这样可行，但可惜不是：

```
$(".entry").each(function() {
  if($(this).is('last-child')) {
    if($(this).hasClass("divider")) {
          $(this).css("border-top-color", "green");
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:28:38.883

看来你只需要这个：

```
$('.divider:last-child').css(...); 
```

即改变每一个`.divider`是`last-child`其父级的CSS。

不需要 a`.each`因为该`.css`函数隐式地对每个匹配元素进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T22:28:38.587

只需使用`:last-child`选择器：

```
$('.divider:last-child').css('border-top-color','green') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:29:33.953

我认为您在最后一个子选择器中缺少冒号，请尝试将其更改为`:last-child`.

# php - sql查询中变量的任何值避免被零除错误

> ID：15397695
> 
> 赞同：1
> 
> 时间：2013-03-13T22:25:52.287
> 
> 标签：php, mysql, pdo, divide-by-zero

我想让用户过滤结果。

为此，我有几个下拉列表，默认情况下设置为“全部”。这些字段的值通过 POST 方法发送到 php，然后我继续：

```
if ($variable == "All") {
$variable = '%';
} 
```

然后在 PDO 语句中，WHERE 子句是这样的：

```
WHERE field LIKE :variable 
```

之后我通过一个数组传递变量

我得到一个除以零的错误，这很奇怪，因为当我对 SQL 查询进行硬编码时

```
field LIKE '%' 
```

一切都好...

感谢您的帮助，非常感谢，因为我一直在尝试许多选项来解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:07:48.033

除以零错误实际上是因为我的 SQL 查询包含一个适用于 SQL 但 php 不能很好解释的 CONCAT(name,'%')。

相反， CONCAT(name, "%") 工作得很好......

菜鸟失误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:05:05.347

而不是添加许多无用的 WHERE 条件，例如

```
field1 LIKE :value1 OR field2 LIKE :value2 OR field3 LIKE :value3 
```

生成类似的查询

```
field1 LIKE '%' OR field2 LIKE '%' OR field3 LIKE '%actual filter%' 
```

这只会导致查询的执行时间更长，您应该编写仅在设置时添加过滤器的条件。

# jquery - 基于 .on() .mouseenter() 为图像的位置设置动画

> ID：15397696
> 
> 赞同：0
> 
> 时间：2013-03-13T22:26:01.323
> 
> 标签：jquery

[http://jsfiddle.net/Pjp9x/6/](http://jsfiddle.net/Pjp9x/6/) 问题：我在网站上有一个巨大的宽度图像。因为它是一个时间线，所以我觉得展示它的好方法是水平滚动。我在视口内创建了一个视口和两个按钮。

我正在尝试根据鼠标所在的位置创建图像滚动。从逻辑上讲，我希望图像从左侧或右侧添加或减去，并像这样设置动画。此外，我希望图像在离开每个输入的空间后停止。

**查询**

```
$(".move_right").on({
      mouseenter: function(){
        $('.image').animate({right:'-100px'},"fast");

      }
});

$(".move_left").on({
      mouseenter: function(){
        $('.image').animate({left:'-100px'},"fast");

      }
}); 
```

**HTML**

```
<div class="container">
     <div class="move_left"></div>
     <div class="move_right"></div>
     <img class="image" src="http://img3.etsystatic.com/008/0/6026325/il_fullxfull.365768623_qlyl.jpg" />
</div> 
```

**CSS**

```
.container{
 height:100%;
 width:100%;
 overflow:hidden;
 position:relative;
}
.image{
  position:relative;   

}
.move_left{
    position:absolute;
    bottom:0;
    right:0;
    width:10%; 
    background:red;
    z-index:5;
    height:100%;
}
.move_right{
    position:absolute;
    bottom:0;
    left:0;
    width:10%;
    background:red;
    z-index:5;
    height:100%
} 
```

我的 jquery 技能非常有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:49:11.287

我认为您正在尝试重新发明轮子，为什么不使用此插件：[http ://www.smoothdivscroll.com/#quickdemo](http://www.smoothdivscroll.com/#quickdemo)

# ruby-on-rails - 似乎无法使用 rails 和 less 导入文件

> ID：15397698
> 
> 赞同：3
> 
> 时间：2013-03-13T22:26:05.353
> 
> 标签：ruby-on-rails, less

我似乎无法弄清楚为什么我的导入语句不起作用。

我有一个位于 /assets/stylesheets/config/load.css.less 的文件和一个位于 /assets/stylesheets/config/global.css.less 的文件

在配置文件中，我只是使用 @import "global.css.less";

代码是如此简单，以至于让我感到困惑为什么它不起作用。似乎没有其他人遇到这个问题，所以它一定很简单。有任何想法吗？

我得到的错误是

Less::ParseError: 'global_vars.css.less' 没有找到。

任何可以帮助它的人将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:17:40.043

Less 会查看你的 assets 目录的根目录`@import`，尝试更改：

`@import "global.css.less"`

至

`@import "config/global.css.less"`

看看这是否有效。

# ios - 上传前转义字典中的字符 - Objective C

> ID：15397701
> 
> 赞同：0
> 
> 时间：2013-03-13T22:26:13.680
> 
> 标签：ios, string, dictionary, escaping, salesforce

我的公司有一个直接与 Salesforce 交互的 iOS 应用程序，但有一个主要缺点。当用户尝试上传非法字符时，应用程序会挂起、返回错误值或导致其他一些不稳定的行为。

我在神秘的互联网中发现了一段非常方便的代码（感谢 MailDrop），它过滤字符串并用正斜杠转义那些非法字符。然后它返回一个字符串中的值，准备进行更新插入/查询。

不过，我真正遇到的一件事是让它与我们的应用程序一起使用。我们的数据存储在字典中，并以多种方式写入（查询服务器或手动输入），并在应用程序生命周期的不同时间写入。我不太确定如何以最有效的方法调用这个漂亮的“escapeSosl”。有没有办法可以在每次写入 Core Data 时转义这些字符？我最害怕的是通过应用程序并调用数百次。

下面是转义方法：

```
- (NSString *)escapeSosl:(NSString *)src {
        // from docs, these are all reserved
        NSArray *reserved = [NSArray arrayWithObjects:@"\\", @"&", @"|", @"!", @"{", @"}", @"[", @"]", @"^", @"~", @"*:", @":", @"'" ,@"\"", @"+", @"-", nil];
        NSMutableString *s = [NSMutableString stringWithString:src];
        NSString *r;
        NSEnumerator *e = [reserved objectEnumerator];
        while (r = [e nextObject])
            [s replaceOccurrencesOfString:r withString:[NSString stringWithFormat:@"\\%@", r] options:NSLiteralSearch range:NSMakeRange(0, [s length])];
        return s;
    } 
```

我发现复杂的是这些转义的时间，以及如何将其应用于每种情况。例如，应用程序使用手动输入或通过反向地理编码找到的位置向 Salesforce 查询帐户。以下是应用程序从 Salesforce 服务器请求数据的示例：

```
-(void)checkServerForLeadMatchingAddressOnAccount:(SFAccount *)account {

currentAccount = account;

//Parse the account location data, removing the last word in the `street` object
NSString *street = account.shippingStreetAddress;
NSMutableArray *streetArray = [[street componentsSeparatedByString:@" "] mutableCopy];
[streetArray removeLastObject];
street = [streetArray componentsJoinedByString:@" "];
street = [street stringByAppendingString:@"_%"];

NSString *city = account.shippingCity;
NSString *state = account.shippingState;
NSString *zip = account.shippingZIP;

//Check for a matching lead on the server. User the callback methods to proceed (either create new data on the server or download to the device

NSLog(@"is connected: %i", self.isConnectedToServer);

if (self.isConnectedToServer){
    requestCheckForLead = [[SFRestAPI sharedInstance] requestForQuery:[NSString stringWithFormat:@"SELECT ID, Company, Name, Street, City, State, PostalCode, Phone FROM Lead WHERE PostalCode = '%@' AND Street LIKE '%@' AND City = '%@' AND State = '%@'", zip, street, city, state]];
    [[SFRestAPI sharedInstance] send:requestCheckForLead delegate:self];
    openTasks++;
} else {
    NSLog(@"I can't connect");
    [self.serverDelegate serverObjectManager:self communicationSuccessful:NO withResponse:@"Could not connect to the server."];
} 
```

我可能会转义字符的另一个区域是在开始上传到服务器之前。上传了几项内容，包括帐户、帐户的联系人（1:1 相对）、帐户的机会（1:1 相对）和机会的当前服务水平（1:many rel）。

下面是与帐户关联的联系人的示例 - 它同时使用字符串和字典引用，但有一些额外的逻辑用于从姓氏中解析名字。我想以一种我不需要担心这些操作的时间的方式来转义数据。

```
NSMutableDictionary *contactDict = [NSMutableDictionary new];

if (myAccount.contact.email) {
    [contactDict setObject:myAccount.contact.email forKey:@"Email"];
} else {
    [contactDict setObject:@"" forKey:@"Email"];
}

if (myAccount.contact.name) {
    //Split name in two
    NSArray *nameArray = [myAccount.contact.name componentsSeparatedByString:@" "];

    NSString *firstName = [nameArray objectAtIndex:0];
    NSString *lastName = [nameArray lastObject];

    [contactDict setObject:firstName forKey:@"firstName"];
    [contactDict setObject:lastName forKey:@"lastName"];
} else {
    [contactDict setObject:@"" forKey:@"firstName"];
    [contactDict setObject:@"" forKey:@"lastName"];
}

if (myAccount.contact.phone){
    [contactDict setObject:myAccount.contact.phone forKey:@"Phone"];
} else {
    [contactDict setObject:@"" forKey:@"Phone"];
}

updateContactRequest = [[SFRestAPI sharedInstance] requestForUpdateWithObjectType:@"Contact" objectId:myAccount.createdContactID fields:contactDict];
[[SFRestAPI sharedInstance] send:updateContactRequest delegate:self]; 
```

所以这似乎是一个很大的问题，但是有没有人有一些关于我如何在这些不同的字典中转义字符的指针，使用类似于我上面包含的“escapeSosl”代码的东西，每当事情被写入核心数据时?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:38:12.530

在这一行中，您构建您的查询

```
requestCheckForLead = [[SFRestAPI sharedInstance] requestForQuery:[NSString stringWithFormat:@"SELECT ID, Company, Name, Street, City, State, PostalCode, Phone FROM Lead WHERE PostalCode = '%@' AND Street LIKE '%@' AND City = '%@' AND State = '%@'", zip, street, city, state]]; 
```

而不是`street`作为参数传递`[self escapeSosl:street]`，其他参数以此类推。

# c# - 实体框架 - 索引 0 处的初始化字符串的格式

> ID：15397705
> 
> 赞同：4
> 
> 时间：2013-03-13T22:26:29.293
> 
> 标签：c#, entity-framework, asp.net-mvc-4, web-config

这里是个例外，

```
System.ArgumentException: Format of the initialization string does not conform to specification starting at index 0.

   at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue)
   at System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey)
   at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules)
   at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(DbConnectionPoolKey key, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions)
   at System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key)
   at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value)
   at System.Data.Entity.Internal.LazyInternalConnection.Initialize()
   at System.Data.Entity.Internal.LazyInternalConnection.get_Connection()
   at System.Data.Entity.Infrastructure.DbContextInfo..ctor(Type contextType, DbProviderInfo modelProviderInfo, AppConfig config, DbConnectionInfo connectionInfo)
   at System.Data.Entity.Infrastructure.DbContextInfo..ctor(Type contextType, DbConnectionInfo connectionInfo)
   at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration, DbContext usersContext)
   at System.Data.Entity.MigrateDatabaseToLatestVersion`2.InitializeDatabase(TContext context)
   at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
   at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
   at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.OrderByDescending[TSource,TKey](IQueryable`1 source, Expression`1 keySelector)
   at Article.GetAll() in Article.cs:line 43
   at ASP._Page_Views_Home_Index_cshtml.Execute() in Index.cshtml:line 9
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.StartPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) 
```

我的连接字符串是，

```
 <connectionStrings>
    <add name="MyContext" connectionString="Persist Security Info=false;Integrated Security=false;Connection Timeout=4;Initial Catalog=<nice>;User ID=<nice>;pwd=<nice>;server=<nice>" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=<nice>;Initial Catalog=Master;Persist Security Info=False;User ID=<nice>;Password=<nice>;MultipleActiveResultSets=True;Application Name=EntityFramework" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

我不知道是怎么回事。我的连接字符串不起作用怎么办？

**！！更新！！**

有趣的是 - 我发现当我使用 web 部署一个新的连接字符串和实体框架 > 默认连接工厂 > 参数被添加......我知道对吗？什么？！

我发布的“生产就绪”web.config 的结果如下所示：

```
<connectionStrings>
    <add name="MyContext" connectionString="Data Source=<nice>;Initial Catalog=<nice>;Persist Security Info=False;User ID=<nice>;Password=<nice>; MultipleActiveResultSets=True;Application Name=EntityFramework" providerName="System.Data.SqlClient" />
    <add name="MyContext_DatabasePublish" connectionString="Data Source=<nice>;Initial Catalog=<nice>;Persist Security Info=False;User ID=<nice>;Password=; MultipleActiveResultSets=True;Application Name=EntityFramework" providerName="System.Data.SqlClient" />
</connectionStrings>

<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
        <parameters>
            <parameter value="DatabasePublish" />
        </parameters>
    </defaultConnectionFactory>
    <contexts>
        <context type="MyContextDBContext, Models">
            <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[MyContextDBContext, Models], [Models.Migrations.Configuration, MyWebsite.Models]], EntityFramework, PublicKeyToken=<nice>">
                <parameters>
                    <parameter value="DatabasePublish" />
                </parameters>
            </databaseInitializer>
        </context>
    </contexts>
</entityFramework> 
```

很有趣吧？

现在，当网站发布时会抛出“连接字符串格式错误”。

我想我想要的是消除自动添加新连接字符串和上下文的需要，并且正是我在 web 配置中放置的内容。

最糟糕的是，这个所谓的“功能”破坏了 web.config 转换的使用。事实上，我已经开始喜欢使用新的“预览转换”功能了。但是，即使是预览也确实显示了这些更改。

这里发生了什么？

我可以删除它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:33:53.360

如果你把它添加到 Global.asax，你应该知道这个字符串有什么问题..

```
throw new Exception(ConfigurationManager.ConnectionStrings["MyContext"].ConnectionString); 
```

如果您在其中看到任何令牌占位符，您应该更好地了解该怎么做。

还要检查您的用户在 SQL 服务器上的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T20:17:04.080

我遵循了所有建议，没有任何效果。但我发现这一行创建了错误：Database.EnsureCreated()

在我删除 EnsureCreated 方法后，我能够创建我的第一个迁移。

# cakephp - 一种在 CakePHP 中查找的方法

> ID：15397708
> 
> 赞同：2
> 
> 时间：2013-03-13T22:26:35.040
> 
> 标签：cakephp, cakephp-1.2

CakePHP 中的模型方法 read() 只返回一条记录，因此我们不需要循环围绕结果集，如下所示：

```
//In Controller
$item = $this->Item->read(null,$id);
$this->set(compact('item'));

//In View
echo $item['Item']['title']; 
```

但是，我希望能够通过一些条件来控制结果，而 read() 方法不提供添加条件的能力，所以我必须使用 find() 方法，如下所示：

```
//In controller
$item = $this->Item->find('all',array('conditions' => array('id' => $id, 'lock' => 'yes')));
$this->set(compact('item'));

//In View
echo $item[0]['Item']['title']; 
```

是否有任何解决方案允许 find 只返回一条记录，即我不必处理 $item[0] 而只需 $item 作为第一个示例？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T22:33:05.790

永远不要使用 read()，总是使用 find(first)：

```
$item = $this->Item->find('first', $options); 
```

见[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-first](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-first)

read() 被认为是不好的做法，因为它会更改模型本身，并且通常弊大于利 - 特别是如果您不知道或不期望此方法的确切结果。

# c - 何时知道函数是否是回调？

> ID：15397710
> 
> 赞同：0
> 
> 时间：2013-03-13T22:26:36.393
> 
> 标签：c, callback

我从此链接获取了代码[Hello World In GTK 。](https://developer.gnome.org/gtk-tutorial/2.24/c39.html)在那里它使用了许多回调函数，但对于每个回调函数来说

```
static void hello( GtkWidget *widget,gpointer data ) 
```

当它使用它作为回调时

```
g_signal_connect (button, "clicked",G_CALLBACK (hello), NULL); 
```

但是在这里，它没有将任何参数传递给 hello() 函数。如果我尝试在正常功能中执行此操作，即

```
#include <stdio.h>
int hello(int a) {
   printf("hello");
}

void main() {
   int j=10;
   hello;
} 
```

它没有给我任何错误，也没有输出。

Q1。回调函数如何忽略参数？

Q2。如何进行函数回调？即在我的第二个`hello`示例中，函数 hello 会回调吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:40:55.610

代码编译是因为打招呼就像提到一个 int 值。例如：

```
hello; // this just writes the function pointer with a ; so it works
12345; // this is similar to the above and will compile 
```

我假设回调是使用前面提到的宏或连接函数中的其他方式传递参数的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:48:18.190

您正在做的是通过将指向函数的[指针](http://en.wikipedia.org/wiki/Function_pointer)传递给 GLib 来将函数附加到信号。这样做的重点是在触发信号时调用该函数。在这种情况下，即每当按下 GTK 按钮时。基本上，这会将用户操作（按下按钮）链接到您的函数，但这样做的方式是实现 GTK 按钮的代码永远不必知道您的函数。

该宏[`G_CALLBACK`](https://developer.gnome.org/gobject/stable/gobject-Closures.html#G-CALLBACK:CAPS)将函数指针转换为类型[`GCallback`](https://developer.gnome.org/gobject/stable/gobject-Closures.html#GCallback)，该类型定义为：

```
typedef void (*GCallback)(void); 
```

正如文档所解释的：

> 用于结构定义和函数签名中的回调函数的类型。这并不意味着所有回调函数都必须不带参数并返回 void。回调函数所需的签名由使用的上下文确定（例如，它连接到的信号）。使用 G_CALLBACK() 将回调函数转换为 GCallback。

GLib 这样做的原因是为了使回调类型统一（并记录您对宏所做的操作）。GLib 允许使用不同数量参数的回调，但提供了一个通用的、一致的接口来将这些回调附加到信号上。在内部，GLib 使用正确数量的参数分派函数。

要了解有关函数指针的更多信息，请参阅这个 SO 问题：[函数指针的意义是什么？](https://stackoverflow.com/questions/2592137/what-is-the-point-of-function-pointers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:29:10.057

我怀疑 G_CALLBACK 是一个宏。（宏在编译之前由预处理器扩展，所以看起来无效的 C 可能使用了很多宏。）你应该看看这个宏扩展成什么。它将帮助您弄清楚代码在做什么。

顺便说一句，如果您将函数指针（通过获取函数的地址。例如`&hello`）传递给另一个函数并且您想在该函数中调用它，您可以这样做`(*function)(arg,arg2)`

# eclipse-plugin - 如何安装 PyDev 扩展

> ID：15397712
> 
> 赞同：0
> 
> 时间：2013-03-13T22:26:45.543
> 
> 标签：eclipse-plugin, aptana, pydev

在 Eclipse 中安装 PyDev 并寻求了解其功能后，我注意到在 Windows> Preferences> PyDev 中，我没有找到 PyDev Extensions 的指南

我怎样才能将它包含在我的 PyDev 中？

*   我的 Eclipse SDK 版本 4.2.2
*   Build id: M20130204-1200 我的版本是
*   PyDev 2.7.0.2013012902 Aptana Studio 3 版本为 3.3.2.201302081500-7G7F17UIS_IYK7UrNh8biKtz0dax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:57:03.143

我是 Python 和 PyDev 的新手，用 Google 搜索了一下，发现在[http://marketplace.eclipse.org/user/879/favorites](http://marketplace.eclipse.org/user/879/favorites)中，这些扩展被合并到了产品中。我向任何花时间阅读我的不当问题的人道歉。

# ruby - 为什么哈希初始化的功能差异？

> ID：15397713
> 
> 赞同：0
> 
> 时间：2013-03-13T22:27:02.907
> 
> 标签：ruby

是否有关于初始化差异的文档？Hash 上的文档没有任何可以解释差异的东西。

```
foo = [1,2,3,4]
test1 = Hash.new([])
test2 = Hash.new{|h,k| h[k] = []}

foo.each do |i| 
    test1[i] << i 
    test2[i] << i
end

puts "test 1: #{test1.size}" #0
puts "test 2: #{test2.size}" #4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:31:51.390

文档中有提及。阅读[文档](http://ruby-doc.org/core-2.0/Hash.html)：

```
new(obj) → new_hash
new {|hash, key| block } → new_hash 
```

> [...] 如果指定了 obj，则这个单一对象将用于所有默认值。如果指定了一个块，它将使用哈希对象和键调用，并且应该返回默认值。如果需要，将值存储在散列中是块的责任。

```
h = Hash.new("Go Fish")
h["a"] = 100
h["b"] = 200
h["a"]           #=> 100
h["c"]           #=> "Go Fish"
# The following alters the single default object
h["c"].upcase!   #=> "GO FISH"
h["d"]           #=> "GO FISH"
h.keys           #=> ["a", "b"]

# While this creates a new default object each time
h = Hash.new { |hash, key| hash[key] = "Go Fish: #{key}" }
h["c"]           #=> "Go Fish: c"
h["c"].upcase!   #=> "GO FISH: C"
h["d"]           #=> "Go Fish: d"
h.keys           #=> ["c", "d"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:46:33.167

有区别，在某些情况下可能很重要

```
test1 = Hash.new([])
test2 = Hash.new{|h,k| h[k] = []}

test1['foo'] #=> []
test2['foo'] #=> []

test1.keys == test2.keys #=> false 
```

第一个构造只返回默认值，但不对当前散列做任何事情，但第二个构造使用键/值初始化散列，其中值由给定块计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:30:39.837

这是一个常见的问题。使用 test1 （非块），您正在修改默认对象，即当哈希中不存在密钥时获得的东西。

```
foo = [1,2,3,4]
test1 = Hash.new([])
test2 = Hash.new{|h,k| h[k] = []}

foo.each do |i| 
    test1[i] << i 
    test2[i] << i
    p test1['doesnotexist'] #added line
end

puts "test 1: #{test1.size}" #0
puts "test 2: #{test2.size}" #4 
```

输出：

```
[1]
[1, 2]
[1, 2, 3]
[1, 2, 3, 4]
test 1: 0
test 2: 4 
```

# mysql - 由于内存限制，无法连接到 vmc mysql 服务

> ID：15397717
> 
> 赞同：0
> 
> 时间：2013-03-13T22:27:19.363
> 
> 标签：mysql, ruby-on-rails, cloud-foundry, tunnel, vmc

我无法在 cloudfoundry 基础设施上连接到我的免费托管应用程序实例。

当我运行“vmc tunnel mysql-service”时，我得到以下信息：

1：无 2：mysql 3：mysqldump 你想启动哪个客户端？> 2

在端口 10000 上打开隧道... FAILED CFoundry::AccountNotEnoughMemory: 600: 内存容量不足，允许：2048M 有关详细信息，请参阅 ~/.vmc/crash

检查我看到的 ~/.vmc/crash 日志：

崩溃时间：2013-03-13 18:16:54 -0400

CFoundry::AccountNotEnoughMemory: 600: 内存容量不足，允许：2048M

<<< 请求：PUT [https://api.cloudfoundry.com/apps/caldecott](https://api.cloudfoundry.com/apps/caldecott) 应用程序/json REQUEST_BODY: {"name":"caldecott","instances":1,"state":"STARTED","staging":{"model":"sinatra","stack":"ruby19"}, "资源":{"内存":64,"磁盘":2048,"fds":256},"env":["CALDECOTT_AUTH=43ae7176-67f6-41ac-8cff-bf21b4249a49"],"uris":[" caldecott-d9149.cloudfoundry.com"],"services":["mysql-service"],"console":null,"debug":null} 响应：[403] RESPONSE_HEADERS：缓存控制：无缓存连接：保持活动内容类型：应用程序/json；charset=utf-8 日期：2013 年 3 月 13 日星期三 22:16:54 GMT 保持活动：超时=20 服务器：nginx 传输编码：分块 x-ua 兼容：IE=Edge，

> > >

cfoundry-0.5.2/lib/cfoundry/baseclient.rb:156:in `handle_error_response' cfoundry-0.5.2/lib/cfoundry/baseclient.rb:135:in`handle_response' cfoundry-0.5.2/lib/cfoundry/baseclient.rb:85:in `request' cfoundry-0.5.2/lib/cfoundry/baseclient.rb:74:in`put' cfoundry-0.5.2/lib/cfoundry/v1/ model_magic.rb:55:`block (2 levels) in define_client_methods' cfoundry-0.5.2/lib/cfoundry/v1/model.rb:91:in`更新中！cfoundry-0.5.2/lib/cfoundry/v1/app.rb:131:`update!' cfoundry-0.5.2/lib/cfoundry/v1/app.rb:121:in`开始！隧道-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/tunnel.rb:173:in `start_helper' tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/tunnel.rb:89:in`create_helper' 隧道-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/tunnel.rb:28 :in `open!' tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/plugin.rb:41:in`block in tunnel'interact-0.5.2/lib/interact/progress.rb:98:in `with_progress' tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/plugin.rb:40:in`tunnel' Mothership-0.5.1/lib/mothership/base.rb:66:in `run' mothership-0.5.1/lib/mothership/command.rb:72:in`block in invoke'

我应该采取什么措施来解决这个问题？

为了提供进一步的背景，下面是有关 env 的一些细节。我的应用程序正在运行：

vmc stats logoff 使用清单文件 manifest.yml

获取注销的统计信息...好的

实例cpu内存盘

# 0 0.1% 74.2K 的 2G 63.3M 的 2G

vmc env 注销使用清单文件 manifest.yml

获取用于注销的环境......好的

vmc services 正在获取服务...好的

名称服务版本 mysql-service mysql 5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:49:01.943

这是因为您已经使用了所有分配的 2Gb RAM。为了与服务建立隧道，vmc 需要部署一个名为 Caldecott 的小型 Rub​​y 应用程序，它使用 64Mb。所以简而言之，您需要释放 64Mb！

# android - Eclipse DDMS 不显示 sdcard 的内容

> ID：15397718
> 
> 赞同：4
> 
> 时间：2013-03-13T22:27:20.010
> 
> 标签：android, eclipse, ddms

Eclipse 的文件资源管理器显示了一个用于 Android 模拟器和 Android 设备的 sdcard 文件夹。但是，它不显示文件夹的任何内容。

这个 sdcard 文件夹是否对应一个 SD 卡？如果是这样，如何使用 DDMS 查看 SD 卡上的文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T22:32:32.133

我猜你的意思是“一个 sdcard 文件夹” `/sdcard`。很长一段时间以来，这一直不是外部存储的位置。

根据您的 Android 模拟器/设备的版本，您可以查看`/mnt/sdcard/`、`/storage/sdcard0/`或`/mnt/shell/emulated/0/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T18:08:14.970

我有同样的问题：

使用 Eclipse DDMS 文件资源管理器，sdcard 的内容在任何文件夹中都不可见（Android 4.2.2 的 CyanogenMod）。

解决方案是：在设备上，您必须授予 ADB 根访问权限。此处：设置/开发人员选项/根访问

然后 sdcard 的内容在此文件夹中可见：/mnt/shell/emulated/0

# function - 在 Haskell 中，将 Lambda 函数转换为常规函数

> ID：15397720
> 
> 赞同：0
> 
> 时间：2013-03-13T22:27:28.363
> 
> 标签：function, haskell, lambda

这是我试图理解的 Haskell 程序的一个片段：

```
englishToFrench =  [("the", "le"),("savage", "violent"),("work", "travail"),
         ("wild", "sauvage"),("chance", "occasion"),]

data Entry = Entry {word       :: String,
                    definition :: String,
                    length'    :: Int}
             deriving Show

listOfEntries = map (\(x, y) -> Entry x y (length x)) englishToFrench 
```

简而言之，该程序获取一个字符串元组列表并生成一个条目对象列表。

但是，我不喜欢 lambda 函数，`map`我想创建一个常规函数来替换它。

我尝试了这个，但它给了我一个错误，即 x 和 y 不在范围内：

```
entryBuilder x y = Entry x y (length x)

entries = map (entryBuilder x y) englishToFrench 
```

谁能告诉我如何转换 lambda 函数以及一般方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:33:02.457

首先，您的`entryBuilder`函数类型错误。它应该是：

```
entryBuilder :: (String, String) -> Entry
entryBuilder (x, y) = Entry x y (length x) 
```

而你的有类型

```
String -> String -> Entry 
```

的类型`map`是

```
map :: (a -> b) -> ([a] -> [b]) 
```

因为你的列表类型是 [(String, String)] 你想要一个类型的函数

```
(String, String) -> b 
```

传递给`map`.

这是你的`entryBuilder`功能，所以你可以使用

```
listOfEntries = map entryBuilder englishToFrench 
```

请注意，您可以使用现有的`entryBuilder`using定义`uncurry`：

```
entryBuilder :: String -> String -> Entry

listOfEntries = map (uncurry entryBuilder) englishToFrench 
```

`uncurry`有类型

```
uncurry :: (a -> b -> c) -> ((a, b) -> c) 
```

即它将两个参数中的柯里化函数转换为具有单个对参数的函数。由于您现有的`entryBuilder`功能具有类型

```
String -> String -> Entry 
```

`uncurry entryBuilder`有类型

```
(String, String) -> Entry 
```

这是您需要传递给的函数类型`map`。

# jquery - 选择特定选择选项时调用函数

> ID：15397721
> 
> 赞同：1
> 
> 时间：2013-03-13T22:27:36.047
> 
> 标签：jquery, option, onchange

我有两个选择菜单请求

1.  居民的建筑号码和
2.  他们的公寓号码

如果访问者选择任一菜单的最后一项（两者都具有相同的`value,` `text`和`class`），我想调用一个函数来向他们隐藏表单并显示一条消息。

该功能运行良好，因为它还通过一个非居民可能会点击的独立链接调用：（*不要住在这里？）*

如果以及何时选择了最后一个选项，我无法使`select`'事件调用该函数。`change()`

这是我的选择代码的简短版本：

```
<form id="document-request" name="document-request" class="clearfix">
    <label>Your Full Name:
        <input type="text" name="fullname" value="" class="span12"
        required>
    </label>
    <label>Your Email:
        <input type="text" name="email" value="" class="span12 email"
        required>
    </label>
    <label for="building">Your Bldg &amp; Apt#:</label>
    <select name="building" class="span2" required>
        <optgroup label="Building">
            <option value="" name="building">--</option>
            <option value="1" name="building">1</option>
            <option value="2" name="building">2</option>
            <option value="3" name="building">3</option>
            <option value="4" name="building">4</option>
            <option value="5" name="building">5</option>
            <option value="6" name="building">6</option>
            <option value="7" name="building">7</option>
        </optgroup>
        <option value="nonresident" name="building" class="dontlivehere">I Don’t Live Here</option>
    </select> 
```

这是jQuery：

```
$('#document-request select').change(function () {
    var theValue = $(this).child('option:selected').text();
    if ((theValue).contains('Live Here')) {
        residenceAlert();
    }
}); 
```

我还尝试通过作用于 和 来实现这`value`一点`class`。
我真的不需要那`dontlivehere`门课，它只是我试图找到解决方案的一部分。

可以在[**此处找到正在进行的示例页面**](http://northqueensviewhomes.com/policies.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:35:15.307

`.child()`不是有效的 jQuery 函数，请尝试`.find()`

```
var theValue = $(this).find('option:selected').text(); 
```

我可能会使用这样的东西：

```
if ($(this).find('option:selected').val() === 'nonresident') {
    residenceAlert();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:41:19.190

浏览器调试器控制台将显示以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'child' 
```

`child()`不是 jQuery 方法。

例如，将其更改为[**find()**](http://api.jquery.com/find/)。

替换为 后`child()`，`find()`您可能会收到下一个错误，具体取决于您的浏览器：

```
Uncaught TypeError: Object has no method 'contains' 
```

[**string.contains()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/contains)仅受 FireFox 支持，使用[**indexOf()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)可能会更好，除非您当然不需要支持任何其他浏览器。

您的完整代码可能类似于：

```
$('select').change(function () {
    var theValue = $(this).find('option:selected').text();
    if (theValue.indexOf('Live Here')) {
        residenceAlert();
    }
}); 
```

* * *

[**演示**](http://jsfiddle.net/WccXM/)- 使用`.find()`和`indexOf()`

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:38:03.290

这对我有用：

**HTML**：

```
<select id="building" name="building" class="span2" required>
    <optgroup label="Building">
    <option value="" name="building">--</option>
    <option value="1" name="building">1</option>
    <option value="2" name="building">2</option>
    <option value="3" name="building">3</option>
    <option value="4" name="building">4</option>
    <option value="5" name="building">5</option>
    <option value="6" name="building">6</option>
    <option value="7" name="building">7</option>
    </optgroup>  
    <option value="nonresident" name="building" class="dontlivehere">I Don’t Live Here</option>
  </select> 
```

**jQuery：**

```
$(document).ready(function(){
$('select#building').change(function() {
      var theValue = $('option:selected').text();
        console.log(theValue);
      if ((theValue).contains('Live Here')) {
      alert("it works!");
   }
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T22:40:14.090

2个问题：

1）子方法。

2) 包含方法。

```
var theValue = $(this).find('option:selected').text();
if( theValue.indexOf('Dont Live Here') >= 0){
    residenceAlert()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T22:33:47.247

这行不应该：

```
if ((theValue).contains('Live Here')) { 
```

说：

```
if ((theValue).contains("I Don't Live Here")) { 
```

# c++ - 从 BackgroundSubtractorMOG2 检索背景图像时出错

> ID：15397723
> 
> 赞同：2
> 
> 时间：2013-03-13T22:27:43.077
> 
> 标签：c++, opencv

我正在尝试从 BackgroundSubtractorMOG2 获取背景图像：

```
bg->getBackgroundImage(back); 
```

但我得到一个`Thread 1 SIGABRT`（作为 c++ n00b 让我感到困惑）和这个错误：

```
OpenCV Error: Assertion failed (nchannels == 3) in getBackgroundImage, file /Users/hm/Downloads/OpenCV-2.4.4/modules/video/src/bgfg_gaussmix2.cpp, line 579
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我不确定问题是什么，怀疑它与 nmixtures 参数有关，但我将其保留为默认值（3）。有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:41:30.297

看起来您需要使用 3 通道图像而不是灰度图像。确保您使用的图像类型是 CV_8UC3，或者如果您正在从文件中读取，则使用`cv::imread('path/to/file')`没有其他参数。

# ios - 使用社交框架发布超过 140 个字符的推文？

> ID：15397724
> 
> 赞同：1
> 
> 时间：2013-03-13T22:27:43.357
> 
> 标签：ios, objective-c, twitter, social, sharing

我正在开发一个非常简单的应用程序来提高我处理著名语录的编码技能。我希望能够让用户通过 Twitter 分享它们，但如果引用对于 Twitter 来说太长，我希望能够做一些事情，而不是说“对不起，你不能分享这个。 "

有没有一种方法可以让我同时发布多条推文，以便我可以将引用拆分为多条推文？从用户体验的角度来看，这甚至值得打扰吗？这很混乱，但我确实认为应该包括共享功能，我应该尝试克服这个问题。

所以，具体来说：**我可以使用社交框架同时发布多条推文吗？**

更主观的是：**对于可以共享数据的情况，是否有更好的方法，有时适合推文，有时不适合？**

**编辑：**我想知道是否有一个不错的方法是在我的详细视图中截取报价本身的屏幕截图（它有一个很好的字体等）。然后将其发布到 Twitter 上，并附上一些类似“看看这个很棒的报价”来自xx作者！”。对这种方法的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:51:35.800

使用 NSURL 对象并将内容加载到`NSString`.

```
NSURL *url = [NSURL URLWithString: [NSString stringWithFormat:@\"http://tinyurl.com/api-create.php?url=%@\", [LongURLTextField text]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:37:43.887

对于任何感兴趣的人：在弹出警报以与用户确认后，我将报价分成多个子字符串并按顺序发布推文。我还为用户提供了捕获屏幕该区域的屏幕截图并将其作为图像发布的选项，这是一个很好的附加功能。

# c - C：指向结构指针数组的指针（分配/解除分配问题）

> ID：15397728
> 
> 赞同：37
> 
> 时间：2013-03-13T22:27:57.717
> 
> 标签：c, pointers, memory, memory-management

我一直在回到 C 语言中，但是我很难记住这种内存管理的大部分工作原理。我想要一个指向结构指针数组的指针。

说我有：

```
struct Test {
   int data;
}; 
```

然后是数组：

```
struct Test **array1; 
```

它是否正确？我的问题是处理这件事。所以数组中的每个指针都指向单独分配的东西。但我认为我需要先这样做：

```
array1 = malloc(MAX * sizeof(struct Test *)); 
```

我无法理解上述内容。我需要这样做吗，为什么需要这样做？特别是，如果我要为指针指向的每个事物分配内存，那么为指针分配内存意味着什么？

现在说我有一个指向结构指针数组的指针。我现在希望它指向我之前创建的同一个数组。

```
struct Test **array2; 
```

我是否需要像上面那样为指针分配空间，或者我可以这样做：

```
array2 = array1 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-13T22:45:40.750

**分配的数组**

使用分配的数组很容易理解。

声明你的指针数组。此数组中的每个元素都指向一个`struct Test`：

```
struct Test *array[50]; 
```

然后根据需要分配和分配指向结构的指针。使用循环很简单：

```
array[n] = malloc(sizeof(struct Test)); 
```

然后声明一个指向这个数组的指针：

```
 // an explicit pointer to an array 
struct Test *(*p)[] = &array;  // of pointers to structs 
```

这允许您使用`(*p)[n]->data`; 引用第 n 个成员。

如果这些东西令人困惑，请不要担心。这可能是 C 语言中最困难的方面。

* * *

**动态线性阵列**

如果您只想分配一个结构块（实际上是一个结构数组，*而不是*指向结构的指针），并且有一个指向该块的指针，您可以更轻松地做到这一点：

```
struct Test *p = malloc(100 * sizeof(struct Test));  // allocates 100 linear
                                                     // structs 
```

然后你可以指向这个指针：

```
struct Test **pp = &p 
```

您不再有指向结构的指针数组，但它大大简化了整个事情。

* * *

**动态分配结构的动态数组**

最灵活，但并不经常需要。它与第一个示例非常相似，但需要额外分配。我编写了一个完整的程序来演示这个应该可以正常编译。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

struct Test {
    int data;
};

int main(int argc, char **argv)
{
    srand(time(NULL));

    // allocate 100 pointers, effectively an array
    struct Test **t_array = malloc(100 * sizeof(struct Test *));

    // allocate 100 structs and have the array point to them
    for (int i = 0; i < 100; i++) {
        t_array[i] = malloc(sizeof(struct Test));
    }

    // lets fill each Test.data with a random number!
    for (int i = 0; i < 100; i++) {
        t_array[i]->data = rand() % 100;
    }

    // now define a pointer to the array
    struct Test ***p = &t_array;
    printf("p points to an array of pointers.\n"
       "The third element of the array points to a structure,\n"
       "and the data member of that structure is: %d\n", (*p)[2]->data);

    return 0;
} 
```

输出：

```
> p points to an array of pointers.
> The third element of the array points to a structure,
> and the data member of that structure is: 49 
```

或整套：

```
for (int i = 0; i < 100; i++) {
    if (i % 10 == 0)
        printf("\n");
    printf("%3d ", (*p)[i]->data);
}

 35  66  40  24  32  27  39  64  65  26 
 32  30  72  84  85  95  14  25  11  40 
 30  16  47  21  80  57  25  34  47  19 
 56  82  38  96   6  22  76  97  87  93 
 75  19  24  47  55   9  43  69  86   6 
 61  17  23   8  38  55  65  16  90  12 
 87  46  46  25  42   4  48  70  53  35 
 64  29   6  40  76  13   1  71  82  88 
 78  44  57  53   4  47   8  70  63  98 
 34  51  44  33  28  39  37  76   9  91 
```

* * *

**单动态分配结构的动态指针数组**

最后一个例子是相当具体的。正如我们在前面的示例中看到的，它是一个动态的指针数组，但与这些不同的是，元素都在一次*分配*中分配。这有其用途，最值得注意的是在不同配置中对数据进行排序，同时保持原始分配不受干扰。

我们首先分配一个元素块，就像我们在最基本的单块分配中所做的那样：

```
struct Test *arr = malloc(N*sizeof(*arr)); 
```

现在我们分配一个*单独*的指针块：

```
struct Test **ptrs = malloc(N*sizeof(*ptrs)); 
```

然后，我们用原始数组之一的地址填充指针列表中的每个槽。由于指针算法允许我们从一个元素移动到另一个元素地址，这很简单：

```
for (int i=0;i<N;++i)
    ptrs[i] = arr+i; 
```

此时以下都指的是同一个元素字段

```
arr[1].data = 1;
ptrs[1]->data = 1; 
```

经过以上审查，我希望清楚*原因*。

当我们完成指针数组和原始块数组时，它们被释放为：

```
free(ptrs);
free(arr); 
```

注意：我们不会单独释放`ptrs[]`数组中的每个项目。这不是他们的分配方式。它们被分配为单个块（由 指向`arr`），这就是它们应该被释放的方式。

那么为什么有人要这样做呢？几个原因。

首先，它从根本上减少了内存分配调用的数量。而不是`N+1`（一个用于指针数组，N 用于单个结构）您现在只有**两个**：一个用于数组块，一个用于指针数组。内存分配是程序可以请求的最昂贵的操作之一，并且在可能的情况下，最好将它们最小化（注意：文件 IO 是另一个，仅供参考）。

另一个原因：同一基本数据数组的多种表示形式。假设您想对数据进行升序和降序排序，并同时提供两种排序*表示*。您可以复制数据数组，但这需要大量复制并占用大量内存。相反，只需分配一个额外的指针数组并用基数组中的地址填充它，然后对该指针数组进行排序。当被排序的数据很大（每个项目可能是千字节，甚至更大）时，这具有特别显着的好处。原始项目保留在基本数组中的原始位置，但是现在您有了一个非常有效的机制，您可以在其中对它们进行排序无需实际*移动*他们。您对指向项目的指针数组进行排序；这些物品根本不会移动。

我意识到这是一个非常重要的内容，但是指针的使用对于理解 C 语言可以做的许多强大的事情至关重要，所以请阅读书籍并不断刷新你的记忆。它会回来的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T23:18:20.620

正如其他人所建议的那样，声明一个实际的数组可能会更好，但您的问题似乎更多的是关于内存管理，所以我将讨论这个问题。

```
struct Test **array1; 
```

这是指向 a 地址的指针`struct Test`。（不是指向结构本身的指针；它是指向保存结构*地址*的内存位置的指针。）声明为指针分配内存，但不为其指向的项目分配内存。由于可以通过指针访问数组，因此您可以将其`*array1`用作指向元素类型为 的数组的指针`struct Test`。但是还没有一个实际的数组可以指向它。

```
array1 = malloc(MAX * sizeof(struct Test *)); 
```

这会分配内存来保存`MAX`指向类型项目的指针`struct Test`。同样，它不会*为*结构本身分配内存；仅用于指针列表。但是现在您可以将`array`其视为指向已分配指针数组的指针。

为了使用`array1`，您需要创建实际的结构。您可以通过简单地声明每个结构来做到这一点

```
struct Test testStruct0;  // Declare a struct.
struct Test testStruct1;
array1[0] = &testStruct0;  // Point to the struct.
array1[1] = &testStruct1; 
```

您还可以在堆上分配结构：

```
for (int i=0; i<MAX; ++i) {
  array1[i] = malloc(sizeof(struct Test));
} 
```

分配内存后，您可以创建一个指向相同结构列表的新变量：

```
struct Test **array2 = array1; 
```

您不需要分配任何额外`array2`的内存，因为指向您分配给`array1`.

* * *

有时您*想要*一个指向指针列表的指针，但除非您正在做一些花哨的事情，否则您可以使用

```
struct Test *array1 = malloc(MAX * sizeof(struct Test));  // Pointer to MAX structs 
```

这声明了指针`array1`，为结构分配了足够的内存`MAX`，并指向`array1`该内存。现在您可以像这样访问结构：

```
struct Test testStruct0 = array1[0];     // Copies the 0th struct.
struct Test testStruct0a= *array1;       // Copies the 0th struct, as above.
struct Test *ptrStruct0 = array1;        // Points to the 0th struct.

struct Test testStruct1 = array1[1];     // Copies the 1st struct.
struct Test testStruct1a= *(array1 + 1); // Copies the 1st struct, as above.
struct Test *ptrStruct1 = array1 + 1;    // Points to the 1st struct.
struct Test *ptrStruct1 = &array1[1];    // Points to the 1st struct, as above. 
```

* * *

那么有什么区别呢？一些东西。显然，第一种方法要求您为指针分配内存，然后为结构本身分配额外的空间；第二个让你一`malloc()`通电话就可以逃脱。额外的工作能给你带来什么？

由于第一种方法为您提供了一个指向`Test`结构的实际指针数组，因此每个指针都可以指向`Test`内存中任何位置的任何结构；它们不必是连续的。此外，您可以根据需要为每个实际`Test`结构分配和释放内存，并且可以重新分配指针。因此，例如，您可以通过简单地交换它们的指针来交换两个结构：

```
struct Test *tmp = array1[2];  // Save the pointer to one struct.
array1[2] = array1[5];         // Aim the pointer at a different struct.
array1[5] = tmp;               // Aim the other pointer at the original struct. 
```

另一方面，第二种方法为所有`Test`结构分配一个连续的内存块，并将其划分为`MAX`项目。并且数组中的每个元素都驻留在固定位置；交换两个结构的唯一方法是复制它们。

指针是 C 语言中最有用的结构之一，但它们也可能是最难理解的结构之一。如果您打算继续使用 C，那么花一些时间使用指针、数组和调试器，直到您对它们感到满意为止，这可能是一项值得的投资。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T22:42:29.983

我建议您使用 typdefs 一次构建一个层来创建类型层。通过这样做，所需的不同类型将更加清晰。

例如：

```
typedef struct Test {
   int data;
} TestType;

typedef  TestType * PTestType; 
```

这将创建两种新类型，一种用于结构，另一种用于指向结构的指针。

所以接下来如果你想要一个结构数组，那么你将使用：

```
TestType array[20];  // creates an array of 20 of the structs 
```

如果你想要一个指向结构的指针数组，那么你可以使用：

```
PTestType array2[20];  // creates an array of 20 of pointers to the struct 
```

然后，如果您想将结构分配到数组中，您可以执行以下操作：

```
PTestType  array2[20];  // creates an array of 20 of pointers to the struct
// allocate memory for the structs and put their addresses into the array of pointers.
for (int i = 0; i < 20; i++) {
    array2 [i] = malloc (sizeof(TestType));
} 
```

C 不允许您将一个数组分配给另一个数组。您必须改为使用循环将一个数组的每个元素分配给另一个数组的元素。

**编辑：另一种有趣的方法**

另一种方法是更面向对象的方法，您可以在其中封装一些东西。例如，使用相同的类型层，我们创建了两种类型：

```
typedef struct _TestData {
    struct {
        int myData;   // one or more data elements for each element of the pBlob array
    } *pBlob;
    int nStructs;         // count of number of elements in the pBlob array
} TestData;

typedef TestData *PTestData; 
```

接下来我们有一个帮助函数，我们用它来创建对象，命名得当`CreateTestData (int nArrayCount)`。

```
PTestData  CreateTestData (int nCount)
{
    PTestData ret;

    // allocate the memory for the object. we allocate in a single piece of memory
    // the management area as well as the array itself.  We get the sizeof () the
    // struct that is referenced through the pBlob member of TestData and multiply
    // the size of the struct by the number of array elements we want to have.
    ret = malloc (sizeof(TestData) + sizeof(*(ret->pBlob)) * nCount);
    if (ret) {   // make sure the malloc () worked.
            // the actual array will begin after the end of the TestData struct
        ret->pBlob = (void *)(ret + 1);   // set the beginning of the array
        ret->nStructs = nCount;           // set the number of array elements
    }

    return ret;
} 
```

现在我们可以在下面的源代码段中使用我们的新对象。它应该检查从 CreateTestData() 返回的指针是否有效，但这实际上只是为了说明可以做什么。

```
PTestData  go = CreateTestData (20);
{
    int i = 0;
    for (i = 0; i < go->nStructs; i++) {
        go->pBlob[i].myData = i;
    }
} 
```

在真正动态的环境中，您可能还希望拥有一个`ReallocTestData(PTestData p)`重新分配`TestData`对象的函数，以修改对象中包含的数组的大小。

使用这种方法，当您完成特定的 TestData 对象时，您可以像 in 一样释放该对象，`free (go)`并且同时释放该对象及其数组。

**编辑：进一步扩展**

有了这个封装的类型，我们现在可以做一些其他有趣的事情。例如，我们可以有一个复制函数，`PTestType CreateCopyTestData (PTestType pSrc)`它会创建一个新实例，然后将参数复制到一个新对象。在下面的示例中，我们重用`PTestType CreateTestData (int nCount)`将创建我们类型实例的函数，使用我们正在复制的对象的大小。在创建新对象之后，我们从源对象复制数据。最后一步是修复源对象中指向其数据区的指针，使新对象中的指针现在指向自身的数据区，而不是旧对象的数据区。

```
PTestType CreateCopyTestData (PTestType pSrc)
{
    PTestType pReturn = 0;

    if (pSrc) {
        pReturn = CreateTestData (pSrc->nStructs);

        if (pReturn) {
            memcpy (pReturn, pSrc, sizeof(pTestType) + pSrc->nStructs * sizeof(*(pSrc->pBlob)));
            pReturn->pBlob = (void *)(pReturn + 1);   // set the beginning of the array
        }
    }

    return pReturn;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T00:17:49.770

结构与其他对象没有太大区别。让我们从字符开始：

```
char *p;
p = malloc (CNT * sizeof *p); 
```

*p 是一个字符，所以`sizeof *p`sizeof (char) == 1; 我们分配了 CNT 字符。下一个：

```
char **pp;
pp = malloc (CNT * sizeof *pp); 
```

*p is a pointer to character, so `sizeof *pp` is sizeof (char*). We allocated CNT pointers. Next:

```
struct something *p;
p = malloc (CNT * sizeof *p); 
```

*p is a struct something, so `sizeof *p` is sizeof (struct something). We allocated CNT struct somethings. Next:

```
struct something **pp;
pp = malloc (CNT * sizeof *pp); 
```

*pp is a pointer to struct, so `sizeof *pp` is sizeof (struct something*). We allocated CNT pointers.

# html - 防止图像被下载到移动网站上的页面

> ID：15397729
> 
> 赞同：8
> 
> 时间：2013-03-13T22:28:03.053
> 
> 标签：html, css, performance, mobile

我怎样才能做到这一点，以便在我的网站的移动版本中，图像不会从网络服务器下载到，因为这些是不需要且未被使用的大文件，因此严重影响了网站移动版本的使用. 在查看了以前此类性质的线程后，我发现使用如下代码隐藏图像的父级可以受益。

```
.parent {display:block;}
.background {background-image:url(myimage.png);}

@media only screen and (max-width:480px) {
.parent {display:none;}
} 
```

问题是我不想将背景图像 CSS 用于与它们相关的 SEO 问题，因为我喜欢使用 Schema 标记等 ..所以如何防止 IMG 标记被下载，如 display:none; 只隐藏图像而不是停止下载它。

注意：这不是为了版权保护问题，例如防止右键单击等，而是为了下载到移动设备的速度和最终大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:00:12.313

**此解决方案使用 CSS 来防止加载背景图像，使用 jQuery 来防止加载图像。**我不熟悉任何会阻止图像加载的 CSS 解决方案。

**JS 小提琴：http:** [//jsfiddle.net/CoryDanielson/rLKuE/6/](http://jsfiddle.net/CoryDanielson/rLKuE/6/)

如果您提前知道图像的高度和宽度（甚至比例），您可以`background-image`为一堆固定大小的 DIV 设置。这可能适用于图标和布局类型的图像。查看下面的 HTML/CSS 示例。

### 背景图片

```
/* hidden by default */
aside {
    display: none;
}

/* Pictures load for 'big screen' users.. pcs/tablets? */
@media screen and (min-width: 750px) {
  aside {
      display: block;
  }

  .catpicDiv {
    height: 100px;
    width: 100px;
    display: inline-block;
    border: 1px solid red;
    background-image: url('http://img2.timeinc.net/health/images/slides/poodle-1-400x400.jpg');
    background-size: cover;
  }
} 
```

和 HTML

```
<aside>
    <div class="catpicDiv"></div>
    <div class="catpicDiv"></div>
    <div class="catpicDiv"></div>
</aside> 
```

* * *

* * *

### 图像元素是一个不同的故事......

我不知道有任何纯 CSS 解决方案来阻止它们加载图像。所以我会这样解决它：

定义IMG标签如下

```
<img src="" data-src="url-to-image.jpg" /> 
```

然后，在文档头部的某个地方你需要类似的 javascript

* * *

1）加载所有图像的功能

```
function loadAllTheImages() {
    $("img").each(function(){
        $(this).attr('src', $(this).attr('data-src'));
    });
} 
```

2) 确定用户是在移动设备还是 PC 上的代码（慢速与快速连接），然后加载图像。这段代码不是万无一失的，有比这更准确和合理的测试。

```
$(window).load(function(){
    if ( $(window).width() > 750 ) {
        loadAllTheImages(); // !
    } else {
        $("body").append("<a id='mobileCheck' href='javascript: void(0);'>I GOTS 4G, LEMME HAVE EM!</a>");
    }
}); 
```

3）也许还有一些代码可以激活按钮来加载图像？为什么不，我猜……？

```
$(document).ready(function(){
    $('body').prepend("<h1>" + $(window).width().toString() + "</h1>");
    $('body').on('click', '#mobileCheck', function(){
        loadAllTheImages(); // !
        $("#mobileCheck").remove();
    });
}); 
```

* * *

与此处类似的解决方案以及我在评论中的假设：

[使用 jQuery 延迟图像加载](https://stackoverflow.com/questions/2897598/delay-image-loading-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T08:31:56.383

CSS 中没有本机解决方案可以阻止图像加载，即使您隐藏它们或将显示设置为无。

你必须使用一些 JS 来实现这个结果。如果您熟悉 JS，那根本不是问题。有几个插件可以做你想做的事。您也可以编写自己的 JS，因为它并不难。

这是我根据屏幕尺寸加载图像的代码：

[代码笔演示](http://codepen.io/GlupiJas/pen/RaqrPB)

它可以在没有像 JQ 这样的库的情况下工作，但如果您使用其中一个库，它会自动切换到它（根据您的特定需求调整它）。

**JS**

```
// use jQuery or pure JS
if (typeof jQuery !== 'undefined') {
  // jQuery way
  // alert("jquery");

  $(function() {
    $(window).on('load resize', function() {
      var products = $("[data-product-image]");
      products.each(function(key, value) {
        var bg = null;
        if (window.outerWidth < 500) return;
        if (window.outerWidth < 1000) bg = $(value).data("product-image-s");
        if (window.outerWidth >= 1000) bg = $(value).data("product-image");
        console.log($(window).outerWidth);
        $(value).css({
          'background-image': 'url(' + bg + ')',
          'background-position': 'center',
          'background-size': 'cover',
        });
      });
    });
  });
} else {
  // Pure JS way
  // alert("JS");

  (function() {
    window.addEventListener('load', wlImageLoader);
    window.addEventListener('resize', wlImageLoader);
    function wlImageLoader() {
      console.log('event! Trig trig');
      var all = document.getElementsByTagName("div");
      var products = [];
      for (i = 0; i < all.length; i++) {
        if (all[i].hasAttribute('data-product-image')) {
          products.push(all[i]);
        }
      }
      Array.prototype.forEach.call(products, function(value) {
        var bg = null;
        var curent = window.getComputedStyle(value).getPropertyValue('background-image');
        console.log(curent);
        if (window.outerWidth < 500 || curent != 'none') return;
        if (window.outerWidth < 1000 && curent == 'none') bg = value.getAttribute('data-product-image-s');
        if (window.outerWidth >= 1000 && curent == 'none') bg = value.getAttribute('data-product-image');
        // if (window.outerWidth >= 2000 && curent == null) bg = value.getAttribute('data-product-image-l');
        if(bg == null || curent != 'none') return;
        value.style.backgroundImage = "url(" + bg + ")";
        value.style.backgroundPosition = "center";
        value.style.backgroundSize = "cover";
        curent = window.getComputedStyle(value).getPropertyValue('background-image');
        console.log(curent);
      });
    }
  })();
} 
```

**HTML**

```
<div data-product-image="img/something_normal.jpg" data-product-image-s="img/something_small.jpg" id="p3" class="product"> 
```

但是，如果您是一个时间加载狂，您可能更喜欢在 JS 中本地编写代码，因为您通常不使用大多数 jQuery 库。对于快速的互联网连接，这不是问题，但如果您将移动设备定位在乡村，这可能会有所作为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T22:37:23.893

如果@media 标记符合您的标准（例如，超过一定的分辨率），我建议将@import 和@media 命令组合起来仅@import 包含图像的样式表。

因此，默认情况下，您不会导入应用 BG 图像的样式表，只有当您确定该网站是“非移动”时，您才会最终这样做......如果这有意义的话！

W3c 网站有一些很好的组合规则的例子：

[http://www.w3.org/TR/css3-mediaqueries/#media0](http://www.w3.org/TR/css3-mediaqueries/#media0)

# emacs - 在 emacs 中锁定诸如 ctrl 或 alt 之类的键

> ID：15397734
> 
> 赞同：2
> 
> 时间：2013-03-13T22:28:19.047
> 
> 标签：emacs

有时在阅读代码时，除了或或其他组合来继续在代码中移动时，一直按住`ctrl`键或键是很痛苦的。我想知道是否有办法将这些键锁定一段时间，然后能够只使用组合键来导航`alt``n``p`

注意：我不想要这样的答案`use vim`。我没有时间阅读愚蠢的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:46:08.973

例如，您可以定义一个次要模式，键盘映射将导航命令分配给仅字母，而不使用`C-`or`M-`修饰符。

例如：

```
(define-minor-mode my-minor-mode
  "Navigate with easy key bindings"

  ; Make this a global mode (i.e. active in all buffers)
  :global t

  ; "foo" will be printed in the modeline when this mode is active
  :lighter " foo"

  ; Setup the keymap
  :keymap (let ((map (make-sparse-keymap)))
            (define-key map (kbd "n") 'next-line)
            map)) 
```

然后，您可以将此模式分配给键绑定以轻松打开和关闭它：

```
(global-set-key (kbd "<f5>") 'my-minor-mode) 
```

* * *

您可能需要查看文档以更好地了解其`define-minor-mode`工作原理：

`C-h``f``define-minor-mode``RET`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:11:49.007

试试`M-x view-mode`。这将许多单个字符绑定到各种导航命令。键入`C-h f view-mode`以查看整个列表。

# wordpress - 使用主题 wordpress 解析错误

> ID：15397736
> 
> 赞同：0
> 
> 时间：2013-03-13T22:28:26.233
> 
> 标签：wordpress, parsing, widget, themes

我已经开发了一个带有 wordpress 和主题 Lugada 的本地站点。本地一切正常。我已经在ovh上传输了所有数据。

当我想看看做了什么时，我得到了错误：

> 解析错误：语法错误，第 1 行 /homez.705/cadeauxd/www/wp-content/themes/lugada/include/widget.php 中的意外 T_STRING

当我在开头添加空行时，情况相同：在第 1 行

这是文件：

```
<?php
class RecentPost_Widget extends WP_Widget {

    /* Register widget with WordPress. */
    public function __construct() {
        parent::__construct(
            'recentpost_widget', // Base ID
            '(Lugada) Recent Post with Thumbnail', // Name
            array( 'description' => __( 'lugada recent post with post-thumbnail support widget.', 'lugada' ), ) // Args
        );
    }

    /* Front-end display of widget. */
    public function widget( $args, $instance ) {
        extract( $args );
        $title = apply_filters( 'widget_title', $instance['title'] );
        $rcnumber =  $instance['rcnumber'] ;

        echo $before_widget;
        if ( ! empty( $title ) )
            echo $before_title . $title . $after_title;
        ?>
        <?php 
        echo '<ul>';
        echo lugada_display_recent_posts($rcnumber); 
        echo '</ul>';?>
        <?php
        echo $after_widget;
    }

    /* Sanitize widget form values as they are saved. */
    public function update( $new_instance, $old_instance ) {
        $instance = $old_instance;
        $instance['title'] = strip_tags( $new_instance['title'] );
        $instance['rcnumber'] = strip_tags( $new_instance['rcnumber'] );

        return $instance;
    }

    /* Back-end widget form. */
    public function form( $instance ) {
        if ( $instance ) {
            $title = esc_attr( $instance[ 'title' ] );
            $rcnumber = esc_attr( $instance[ 'rcnumber' ] );
        }
        else {
            $title = __( 'Recent post', 'lugada' );
            $rcnumber = __( '5', 'lugada' );
        }
        ?>
        <p>
        <label for="<?php echo $this->get_field_id( 'title' ); ?>"><?php _e( 'Title:','lugada' ); ?></label> 
        <input class="widefat" id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" type="text" value="<?php echo $title; ?>" />
        </p>
        <p>
        <label for="<?php echo $this->get_field_id( 'rcnumber' ); ?>"><?php _e( 'Number of recent post to show:','lugada' ); ?></label> 
        <input class="widefat" id="<?php echo $this->get_field_id( 'rcnumber' ); ?>" name="<?php echo $this->get_field_name( 'rcnumber' ); ?>" type="text" value="<?php echo $rcnumber; ?>" />
        </p>
        <?php 
    }

} // class RecentPost_Widget

class RandomPost_Widget extends WP_Widget {

    /* Register widget with WordPress. */
    public function __construct() {
        parent::__construct(
            'randompost_widget', // Base ID
            '(Lugada) Random Post', // Name
            array( 'description' => __( 'lugada random post widget.', 'lugada' ), ) // Args
        );
    }

    /* Front-end display of widget. */
    public function widget( $args, $instance ) {
        extract( $args );
        $title = apply_filters( 'widget_title', $instance['title'] );
        $rndnumber =  $instance['rndnumber'] ;

        echo $before_widget;
        if ( ! empty( $title ) )
            echo $before_title . $title . $after_title;
        ?>
        <?php 
        echo '<ul>';
        echo lugada_display_random_posts($rndnumber); 
        echo '</ul>';?>
        <?php
        echo $after_widget;
    }

    /* Sanitize widget form values as they are saved. */
    public function update( $new_instance, $old_instance ) {
        $instance = $old_instance;
        $instance['title'] = strip_tags( $new_instance['title'] );
        $instance['rndnumber'] = strip_tags( $new_instance['rndnumber'] );

        return $instance;
    }

    /* Back-end widget form. */
    public function form( $instance ) {
        if ( $instance ) {
            $title = esc_attr( $instance[ 'title' ] );
            $rndnumber = esc_attr( $instance[ 'rndnumber' ] );
        }
        else {
            $title = __( 'Random post', 'lugada' );
            $rndnumber = __( '5', 'lugada' );
        }
        ?>
        <p>
        <label for="<?php echo $this->get_field_id( 'title' ); ?>"><?php _e( 'Title:','lugada' ); ?></label> 
        <input class="widefat" id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" type="text" value="<?php echo $title; ?>" />
        </p>
        <p>
        <label for="<?php echo $this->get_field_id( 'rndnumber' ); ?>"><?php _e( 'Number of random post to show:','lugada' ); ?></label> 
        <input class="widefat" id="<?php echo $this->get_field_id( 'rndnumber' ); ?>" name="<?php echo $this->get_field_name( 'rndnumber' ); ?>" type="text" value="<?php echo $rndnumber; ?>" />
        </p>
        <?php 
    }

} // class RandomPost_Widget

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:05:30.327

该错误通常意味着您在某处有一个未闭合的字符串。规定的行号通常没有意义。还要检查诸如不成对的圆括号或方括号之类的内容，以及您认为您使用 HTML 或 PHP 编写但实际上是使用另一种编写的地方。

# cxf - 在 CXF Wsdl2Java 实用程序中使用 exceptionSuper 参数时的完全限定类名

> ID：15397738
> 
> 赞同：4
> 
> 时间：2013-03-13T22:28:29.680
> 
> 标签：cxf, wsdl2java

这与此问题以及应用于 cxf 的后续补丁有关。

[当使用 WSDL-first 方法生成 java 存根时，有没有办法让异常扩展 RuntimeException 而不是 Exception？](https://stackoverflow.com/questions/7192477/when-using-a-wsdl-first-approach-to-generate-java-stubs-is-there-a-way-to-make/15396274#15396274)

感谢 Daniel 和 Piepera 的补丁。但是生成的代码只添加了类名而不是完全限定名，并且没有为提供的自定义异常添加导入语句。

我已指定使用“com.google.adwords.api.AdwordsException”作为 exceptionSuper 和 wsdl2java maven 插件创建以下 wsdl 错误。但它没有为 com.google.adwords.api.AdwordsException 添加导入语句，编译失败。

```
 @WebFault(name = "ApiExceptionFault", targetNamespace = "https://adwords.google.com/api/adwords/billing/v201209")
  public class ApiException extends AdwordsException { 
```

您能否修复它以添加导入语句或使用完全限定名称。

* * *

**WSDL2JAVA 用法**

wsdl2java -d C:\Dev\src\main\java -exceptionSuper com.google.adwords.api.AdwordsException -client -verbose -xjc-Xvalue-constructor -xjc-npa [https://adwords.google.com/api/ adwords/cm/v201209/CampaignService?wsdl](https://adwords.google.com/api/adwords/cm/v201209/CampaignService?wsdl)

# ruby-on-rails - 在 Mongoid 中链接 map_reduce 调用的正确方法是什么？

> ID：15397754
> 
> 赞同：3
> 
> 时间：2013-03-13T22:29:07.863
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有一个属于用户的元素模型。我正在尝试计算以下哈希：有多少用户的元素计数为 1、2、3 等。我采用的方法是首先生成 {user -> num elements} 的哈希，然后将其反转使用第二个 map-reduce。

这是我到目前为止所拥有的：

```
Element.map_reduce(%Q{
  emit(this.user_id, 1);
}, %Q{
  function(key, values) {
    return Array.sum(values);
  }
}).out(inline: true).map_reduce(%Q{
  if (this.value > 1) {
    emit(this.value, this._id);
  }
}, %Q{
  function(element_count, user_ids) {
    return user_ids.length;
  }
}).out(inline: true) 
```

这给了我一个“未定义的方法`map_reduce'”错误。我在文档中找不到答案。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T20:47:46.173

我使用聚合而不是 mapreduce 计算哈希，首先按用户分组，然后再按元素计数分组：

```
Element.collection.aggregate([
  {
    "$group" => {
      "_id" => "$user_id", "elements_count" => {"$sum" => 1}
    }
  },
  {
    "$group" => {
      "_id" => "$elements_count", "users_count" => {"$sum" => 1}
    }
  },
  { "$project" => {
        "_id" => 0,
        "users_count" => '$users',
        "elements_count" => '$_id',
    }
  }
]) 
```

这将返回以下数组：

```
[
 {"users_count"=>3, "elements_count"=>2},
 {"users_count"=>4, "elements_count"=>3},
 ...
] 
```

如果需要，也可以使用[$sort](http://docs.mongodb.org/manual/reference/method/db.collection.aggregate/)运算符对其进行排序

# internet-explorer-8 - IE8 忽略 Fancybox 2 的背景规则...无论 Fancybox CSS 为何，都是黑色背景

> ID：15397757
> 
> 赞同：0
> 
> 时间：2013-03-13T22:29:33.940
> 
> 标签：internet-explorer-8, fancybox

我在整个站点中使用 Fancybox v2.1.4 没有问题，除了 ie8（即使 ie7 也可以）。当我将fancybox应用于ie8中的div时，所有背景css都丢失了。

这是它应该看起来的样子，并且在所有浏览器中看起来都很棒，但 ie8： [http ://hallyb.com/images/good.jpg](http://hallyb.com/images/good.jpg)

以下是它在 ie8 中的呈现方式：http: [//hallyb.com/images/bad.jpg](http://hallyb.com/images/bad.jpg)

我对 fancybox.css 所做的任何更改都不会影响这个黑色背景；实际上，首先将背景颜色设置为#fff，然后添加背景图像，没有任何关于它说“黑色”。

感谢您对此问题的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:38:30.713

解决了！

这很棘手，因为我正在使用 PIE ( [http://css3pie.com](http://css3pie.com) ) 在旧版 IE 中出色地呈现 css3 效果。出于某种原因，IE8 不喜欢在嵌套元素上调用 PIE.htc 行为文件时，例如我在这里使用的 fancybox 'wrap' 代码。IE7似乎不在乎。从 fancybox css 中删除重复的行为属性，一切都很好。

# java - Java - 如何读取下一行并将多个数据分别存储在自己的变量中？

> ID：15397758
> 
> 赞同：0
> 
> 时间：2013-03-13T22:29:34.673
> 
> 标签：java, variables, network-programming, store, next

我在将数据从一个客户端类传递到另一个服务器类时遇到了问题。我创建了变量来存储客户端发送到服务器的每个信息，如果地址或密码不正确，它使用 if 语句拒绝服务，否则。

但是，当用户输入密码时，我遇到了问题；然后地址。数据在第一轮自动传递。而不是客户端发送密码数据，并将数据存储在服务器的密码变量中。然后客户端发送地址，将数据存储在地址变量中。它只是发送两者，并将两者存储在一个变量中。

**我想显示：**

```
Password received: unlo91\ (made up password)
Address received: localhost 
```

**相反，我得到：**

```
Password received: unlo91\localhost (made up password)
Address received: null 
```

有没有一种方法，“对。客户端刚刚发送了密码。将其存储在 PW var 中。好的，现在不要存储在 PW var 中，因为它已经在使用（或已经使用过一次）。继续下一个可用变量（地址）存储下一个。”

**服务器：**

```
cliPass = fromClient.readLine(); 
System.out.println("Client entered... " + cliPass );
cliAd = fromClient.readLine(); 
System.out.println("Client entered... " + cliAd); 
```

**客户：**

```
 System.out.println("Type password");
    myPass = fromUser.readLine();
    toServer.writeBytes(myPass);

    System.out.println("Type address");
    myAd = fromUser.readLine();
    toServer.writeBytes(myAd); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:41:05.010

You're not really asking the right question, the problem you have is caused by a previous oversight, and if you fix it you can skip this problem.

When you read the line in on the client with `fromUser.readLine();`, the String you recieve will have had its line separator removed, as stated in the Javadocs:

> public String readLine() throws IOException
> 
> Read a line of text. A line is considered to be terminated by any one of a line feed ('\n'), a carriage return ('\r'), or a carriage return followed immediately by a linefeed.
> 
> **Returns**: A String containing the contents of the line, not including any line-termination characters, or null if the end of the stream has been reached

Therefore, if you add them back in to the String before you send it to your server like so:

```
System.out.println("Type password");
myPass = fromUser.readLine() + System.lineSeparator();
toServer.writeBytes(myPass);

System.out.println("Type address");
myAd = fromUser.readLine() + System.lineSeparator();
toServer.writeBytes(myAd); 
```

Your server code should work as expected, as they will then be counted as separate lines once again.

Or if you really want to do that, you should consider a `Map<String, String>` if you have an unknown number of variables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:34:51.427

使用`ArrayList<String>`.

ArrayList 有一个方法 ，`add`它在集合的末尾添加一个新值。完成后，您可以在 ArrayList 上使用`for`or`foreach`循环，并一次将每个值添加到其中。

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

如果您需要存储一堆字符串但将它们与名称相关联，那么您需要一个`HashMap<String,String>`.

您可以在 HashMap 上执行`.add("username", "tom")`和操作，并获得您执行的值并返回“tom”。`.add("password", "hunter12")``.get("username")`

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:40:47.897

The problem is that the readline method returns the string without a line break.

[http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)

When you use it on the server there is no line break, so it continues to wait for the end of the line.

Try this on your client:

```
System.out.println("Type password");
myPass = fromUser.readLine();
toServer.writeBytes(myPass + "\n");

System.out.println("Type address");
myAd = fromUser.readLine();
toServer.writeBytes(myAd + "\n"); 
```

# function - 编写等效的 powershell 脚本和函数的最佳实践

> ID：15397763
> 
> 赞同：1
> 
> 时间：2013-03-13T22:29:59.673
> 
> 标签：function, powershell

我有一个包含多个参数的脚本，并且我已经记录了适当的帮助注释（例如.SYNOPSIS、.DESCRIPTION、.PARAMETER）。我的组织中的几个不同的用户将使用这个 powershell 脚本，一些知道 powershell 并且会从具有特定参数值的 powershell 调用它，还有一些不知道 powershell 并且只需在 Windows 资源管理器中右键单击脚本文件并选择使用 PowerShell 运行（因此参数将使用其默认值）。

我的难题是在没有一堆重复代码的情况下，在 powershell 中执行此操作的最佳方法是什么。在我看来，这些是我的选择：

1 - 只需编写一个为所有参数提供默认值的 DoStuff.ps1 脚本。这允许它直接从 Windows 资源管理器运行，但对于想要将其用作自己脚本中的函数的 powershell 用户来说感觉很笨重，因为而不是编写：

```
Do-Stuff param1 param1 
```

他们将做：

```
.\DoStuff.ps1 param1 param2 
```

2 - 在 DoStuff.ps1 中，将它执行的操作移动到 DoStuff 函数中，并在函数声明之后调用 DoStuff 函数，并将参数传递到脚本中。这仍然允许从 Windows 资源管理器运行脚本，以及开发人员将脚本点源到他们自己的脚本中，以便他们可以访问该函数。不利的是，当开发人员点源脚本时，脚本将使用默认参数调用函数（除非我允许他们为脚本提供可选的 Switch 参数以触发函数不被调用）。尽管如此，这意味着我必须复制所有脚本帮助文本，以便它同时显示脚本和函数（描述、参数描述等）。

我想不出任何其他选择。理想情况下，我只能在 .ps1 文件中编写函数并使用“default”关键字标记函数，这样如果调用脚本，则默认运行该函数；但我不认为 PowerShell 提供这样的东西。

您认为在这种情况下最好的方法是什么。有什么我忽略或不知道的吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:33:03.020

> 但是对于想要将其用作自己脚本中的函数的 powershell 用户来说感觉很笨重

根据您的描述，默认参数似乎是最好的（或者至少是最差的）方法。

但与其命名你的脚本，不如将它命名`DoStuff.ps1`为它并调用它，这样它就可以更像一个内部函数来调用：

*   用破折号命名：`Do-Stuff.ps1`
*   请记住，您不需要指定`ps1`
*   如果脚本位于文件夹中，`$env:Path`则无需指定路径。

还要考虑脚本可以从相对路径加载模块：您可以将大部分代码放在前端（右键单击它）脚本加载并调用的脚本模块中。脚本作者自己加载模块。

# python - Py2app 问题：python 二进制文件根本没有共享库（或框架）

> ID：15397764
> 
> 赞同：1
> 
> 时间：2013-03-13T22:30:11.963
> 
> 标签：python, python-2.7, py2app

我正在尝试为脚本构建发行版。我已经使用 py2exe 创建了一个 exe 文件，它工作正常。我正在尝试使用 py2app 为 Mac 创建类似的东西。但是，当我使用命令时出现此错误

```
python setup.py py2app 
```

错误消息：python 二进制文件根本没有共享库（或框架）

知道为什么会这样吗？我正在导入一些像 BeautifulSoup 这样的模块，除了像 urllib 这样的标准模块，主脚本文件中的数学我在运行 python 2.7 的 64 位 Windows 机器上运行整个东西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T23:20:46.490

您需要`py2app`在 Mac 上运行。

该`py2app`代码使用用于运行它的 Python 副本来构建独立的可执行文件。如果该 Python 不是 Mac 版本（如果您在 Windows 上运行，则不是），它将无法创建 Mac 可执行文件。

从技术上讲，错误消息告诉您它找不到`libpython.dylib`or`Python.framework`关联`sys.executable`，这是真的，但在这种情况下可能更有用。

* * *

有一些替代方法`py2app`，例如`cx_freeze`，但它们的工作方式都相同：从用于运行它们的 Python 安装构建一个可执行文件。

因此，如果您想在 Windows 上构建 Mac 可执行文件，则没有自动化的方法可以做到这一点。

但有几种可能性。

首先，您可以花 100 美元左右购买二手 Mac Mini。为开发设置它，打开远程登录访问（在首选项的共享窗格中）并让它在角落里运行。在 Windows 中，您可以使用一个小的 4 行`ssh`脚本来告诉 Mac 检查源、`py2app`它、`zip`结果，然后`scp`将其移至 Windows 框（或通过 Windows 文件共享复制它，或`ftp`它，或检查它进入源代码控制或其他）。

如果由于某种原因这不可行，希望您至少可以偶尔访问 Mac。（如果没有，您将如何测试？）。如果是这样，您可以构建一个应用程序`py2app`并将其压缩以用作模板。每次您想要创建一个新版本时，您都可以在 Windows 上执行此操作，只需修改模板中的内容即可。

主`foo.py`脚本进入`foo.app/Contents/Resources/foo.py`. 任何其他 Python 模块（无论是标准库、第三方还是您自己的代码），除了少数例外，都进入`foo.app/Contents/Resources/lib`. 任何 C 扩展模块都进入一个目录，如`foo.app/Contents/Resources/lib/python2.7/lib-dynload`.

只要您不修改任何 C 扩展，升级到新版本的 Python，或添加您不知道如何手动安装的新第三方库（例如，因为您通过 获取它们作为鸡蛋`easy_install`），这将继续有效。如果您执行上述任何操作，则需要返回 Mac 并使用`py2app`.

如果您根本无法使用 Mac，您也许可以`py2app`为其他项目找到一个预构建的应用程序，该应用程序恰好包含您需要的所有内容，在这种情况下，您可以将*其*用作模板。但这是一个巨大的延伸。

# android - 无法在 Mac 10.5 上使用 Eclipse AVD 创建 SD

> ID：15397770
> 
> 赞同：1
> 
> 时间：2013-03-13T22:30:37.787
> 
> 标签：android, eclipse, macos, sd-card, avd

编辑：如果我没有提供足够的信息，我很抱歉。但是，如果您需要一些信息来回答这个问题，请让我知道它是什么，我会把它放在这里。

我正在尝试在我的 Mac OS X 10.5.8 上使用 Eclipse 3.8 (Juno) 创建一个 AVD。当我打开 AVD 管理器并单击“新建”时，我必须选择：

AVD 名称

设备

目标

CPU/ABI

SD卡大小/文件

在我可以点击“确定”之前。当我为其中的每一个做出选择并点击“确定”时，我仍然在“创建新的 AVD”窗口中，但在 Eclipse 中收到错误：

```
[2013-03-13 18:29:51 - SDK Manager] dyld: unknown required load command 0x80000022
[2013-03-13 18:29:51 - SDK Manager] Failed to create the SD card.
[2013-03-13 18:29:51 - SDK Manager] Failed to create sdcard in the AVD folder. 
```

我知道我也有类似的问题，但提供的大多数解决方案都是用我无法理解的术语给出的。如果您知道如何帮助我，请简单地与我交谈。谢谢你。

# angularjs - 使用 $routeProvider 调用后更改主窗口中的绑定

> ID：15397774
> 
> 赞同：0
> 
> 时间：2013-03-13T22:31:07.073
> 
> 标签：angularjs

我用 $routeProvider 调用我的控制器，如下所示：

```
$routeProvider
    .when('/home', {
        templateUrl: "partials/main.html",
        controller: "AppCtrl"
    }); 
```

所以控制器中的焦点`$scope`只会改变 的内容`partials/main.html`。
我需要更改`{{status}}`index.html，但如果我`$scope.status = 'ready';`在控制器中更改它不会更改，只有在 main.html 中才会更改。
我怎样才能使这项工作？
非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:38:43.487

与 AppCtrl 关联的范围原型应该从与您在 index.html 中定义的控制器关联的范围继承。在该控制器上定义一个方法，然后您可以从您的子控制器/范围调用它（因为[JavaScript 原型继承](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)的工作方式）：

```
function MainCtrl($scope) {
   $scope.updateStatus = function(newStatus) {
       $scope.status = newStatus;
   }
}

function AppCtrl($scope) {
   ...
   $scope.updateStatus(....);
} 
```

[小提琴](http://jsfiddle.net/mrajcok/eMaBR/)。在小提琴中，我不使用 ng-view，但它仍然显示了这个概念。

# javascript - 如何设置某件事在一定时间内发生？

> ID：15397780
> 
> 赞同：-2
> 
> 时间：2013-03-13T22:31:35.903
> 
> 标签：javascript, jquery, html, canvas, timer

在这个[JSFiddle](http://bit.ly/YGAn2T)中，您可以看到红色方块从一个图块移动到下一个图块的速度非常快，我该如何设置它以便从一个图块到下一个图块大约需要 0.2 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:32:34.250

要回答您标题中的问题，在给定时间段后执行某些 JavaScript 的方法是使用`setTimeout()`（或`setInterval()`）。

动画运动，在电脑上和沃尔特·迪斯尼的手绘动画是一样的。画一堆图片，每张都有少量的变化，一次显示一张，等待一小段时间再显示每一帧。

所以，要做到这一点，你需要计算每一帧。找到目标位置和当前位置之间的差异，并将这些差异分解为步骤。然后，绘制图像将位置移动一步，直到当前位置与目的地匹配。

[jsfiddle.net/kmHZt/79](http://jsfiddle.net/kmHZt/79/)

```
var lastPos;
function draw() {
    var endPos = {
        x: (playerX - vX) * 32,
        y: (playerY - vY) * 32
    };
    var pos = $.extend({}, endPos, lastPos);
    var step = {
        x: (endPos.x - pos.x) / 10,
        y: (endPos.y - pos.y) / 10
    };
    drawStep();

    function drawStep() {
        context.clearRect(0, 0, canvas.width, canvas.height);
        for (y = 0; y <= vHeight; y++) {
            for (x = 0; x <= vWidth; x++) {
                theX = x * 32;
                theY = y * 32;
                context.drawImage(tiles[board[y + vY][x + vX]], theX, theY, 32, 32);
            }
        }
        context.fillStyle = 'red';
        pos.x += step.x;
        pos.y += step.y;
        context.fillRect(pos.x, pos.y, 32, 32);
        if (Math.round(pos.x - endPos.x) + Math.round(pos.y - endPos.y) == 0) {
            lastPos = pos;
            return;
        }
        setTimeout(drawStep, 20);
    }
} 
```

# powershell - 为什么 export-csv 返回一个包含奇怪数据的文件？

> ID：15397781
> 
> 赞同：0
> 
> 时间：2013-03-13T22:31:40.590
> 
> 标签：powershell, cmdlets, cmdlet

我有一个二进制 cmdlet `Get-CustomPSObject`。当我做类似的事情时：

```
Get-CustomPSObject > a.txt 
```

结果存储为纯文本，这意味着 Get-CustomPSObject 工作正常。

但是，当我尝试：

```
Get-CustomPSObject | Export-csv a.csv 
```

a.csv 文件变为：

```
"Capacity","Count","IsReadOnly","IsFixedSize","SyncRoot","IsSynchronized"
"4","1","False","False","System.Object","False" 
```

这些字段都不在我的 PSObject 中。我不知道他们代表什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:18:51.497

`Export-CSV`接受它收到的第一个对象来创建标题。最有可能的是，您的 Get-CustomPSOjbect 运行一个方法/cmdlet/脚本，它返回一个您未保存的对象。例如，您使用类似的东西

```
get-childitem 
```

并不是

```
$files = get-childitem 
```

在你的`Get-CustomPSObject`函数里面。

**编辑** 好的，所以你的 cmdlet 是一个二进制 cmdlet。重要信息。我不是这方面的专家，所以如果我错了，请纠正我。

当你制作一个可以输出多个对象的二进制cmdlet时，你需要一个一个地编写它们。PowerShell 背后的想法之一是使用管道，该管道可以在对象到来时使用它们，而无需等待完整的数组。

由于您当前在二进制 cmdlet 中存在“设计缺陷”，`Export-CSV`因此尝试将数组（作为一项）导出到 csv 文件，而不是其中的元素。

你现在使用这个：

```
WriteObject(list/array of objects) 
```

这是不好的。它同时输出所有对象。

要修复它，请在“对象创建循环”结束时运行它：

```
WriteObject(mycurrentobject) 
```

这很好。您启用管道的使用，并且每个对象在创建时都会被一一发送。`Export-CSV`然后可以接收每个对象并将它们转换为 csv 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:18:00.527

在您使用 > 的第一个示例中，输出通过 Powershell 格式化系统运行，而在第二个使用 export-csv 的示例中，输出不是。

如果您查看 get-custompsobject | gm 你应该看到那些没有在控制台中显示或发送到你的文本文件的额外属性。

对于 export-csv，您可以使用 select-object 控制将哪些属性发送到 csv 文件

```
get-custompsobjct | select-object column1, column2 | export-csv a.csv 
```

# erlang - 没有缺少函数的 Erlang 编译时错误

> ID：15397784
> 
> 赞同：5
> 
> 时间：2013-03-13T22:31:48.530
> 
> 标签：erlang

当我在另一个不存在或具有错误数量的模块中调用函数时，为什么没有编译时错误或警告？

编译器在一个模块中包含所有导出信息，以使这成为可能。它只是尚未实施，还是有技术原因导致我看不到？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T22:53:07.500

我不知道它为什么会丢失（可能是因为模块是完全独立的，并且一个模块的编译实际上并不依赖于另一个模块——但这只是猜测）。但我相信你可以通过透析器静态分析发现这样的问题。看看[http://www.erlang.org/doc/man/dialyzer.html](http://www.erlang.org/doc/man/dialyzer.html)

它是系统本身的一部分，因此请尝试将其包含在您的工作流程中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T21:29:21.153

正如其他人所说。模块是单独编译的，绝对不能保证编译时存在的环境与运行时退出的环境相同。这意味着在编译时检查模块或其中的函数是否存在基本上是没有意义的。在运行时，该模块可能会或可能不会被加载，您调用的函数可能会或可能不会在模块中定义，或者它可能会执行与您预期完全不同的事情。

这一切都归功于 Erlang 系统的动态特性。没有真正的方法来定义运行时系统中的内容。热代码加载是其中的一部分，并且由于系统的动态特性而可以正常工作。这意味着您**可以**在运行时重新定义系统，您**可以**加载具有不同接口的现有模块的新版本，您**可以**加载全新的模块并删除现有模块。

为此，必须在运行时完成所有关于模块或函数是否存在的检查。

像透析器这样的工具**可以**帮助解决这个问题，但它们确实假设您在运行时没有做任何“*有趣*”的事情，并且您检查的系统与您运行的系统相同。这当然很好，但非常静态。并且与 Erlang 的天性相反，即在所有方面都是动态的。

不幸的是，在这种情况下，你不能既吃蛋糕又吃蛋糕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T11:38:32.527

您可以使用该`xref`应用程序检查已弃用、未定义和未使用的函数（以及更多！）的使用情况。

编译模块`debug_info`：

```
Eshell V6.2  (abort with ^G)
1> c(test, debug_info).
{ok,test} 
```

检查模块`xref:m/1`：

```
2> xref:m(test).
[{deprecated,[]},
 {undefined,[{{test,start,0},{erlang,foo,0}}]},
 {unused,[]}] 
```

您可能想在`xref`这里查看更多信息：

[Erlang -- Xref - 交叉参考工具（工具用户指南）](http://www.erlang.org/doc/apps/tools/xref_chapter.html)

[Erlang——外部参照（工具参考手册）](http://www.erlang.org/doc/man/xref.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T23:38:27.910

这是由于热代码加载。每个模块都可以在任何特定时间加载。因此，当您的模块`A`代码中有调用函数时，当您的模块源代码没有函数`B:F`时，您无法在编译时判断它是错误的。想象一下：您通过调用来编译模块。您将模块加载到没有功能的内存中。然后你加载包含调用但不调用它的模块。然后用.编译新版本的模块。然后加载这个新模块，然后你就可以调用了，一切都很好。想象一下您的模块使模块运行并加载它。您无法在任何特定时间判断该模块是错误的`B``B:F``A``B:F``B``B:F``A``B:F``B``B:F``B:F``A``B``A`包含对不存在函数的调用`B:F`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T08:37:23.020

当您编译例如`alpha`调用 的模块时`beta:some_function(...)`，编译器不能假定某些特定版本的`beta`将在运行时使用。`beta`也许你会在编译后编译一个更新的版本，`alpha`这将有正确的`some_function`导出。也许您将上传`alpha`以在具有所有其他模块的不同主机上使用。

因此，编译器只编译远程调用，任何错误（不存在的模块或函数）都会在运行时解决，此时`beta` *将*加载某个版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T05:14:55.130

在我看来，大多数（如果不是全部的话）编译器不会在编译时验证函数是否存在。通常需要的是函数的原型声明：返回值的类型、所有参数的列表和类型。这是在 C/C++ 中通过在每个模块定义（不是 .c 或 .cpp）中包含 some_file.h 来完成的。

在 Erlang 中，这种类型验证是在程序运行时动态完成的，因此不需要包含这些定义。甚至完全没用，因为 Erlang 允许在运行时升级应用程序，因此在应用程序生命周期内，函数类型可能会发生变化，或者函数可能会有意或无意地消失；这就是为什么 Erlang 设计者选择在运行时而不是在构建时进行验证的原因。

您所说的错误通常发生在代码生成的链接阶段，当“编译器”试图将一些单独的目标代码收集在一起以构建可执行文件或库时，在此阶段链接器解决了所有外部地址（对于共享变量，静态调用...）。这个阶段在 Erlang 中不存在，一个模块是完全自包含的；它不与应用程序的其余部分共享任何内容，没有变量或函数地址。

当然，在更新正在运行的生产程序之前，必须使用一些工具并进行一些测试，但我认为这些验证与算法本身的正确性具有完全相同的重要性。

# r - 用 plotmath 保持尾随零

> ID：15397789
> 
> 赞同：9
> 
> 时间：2013-03-13T22:32:07.283
> 
> 标签：r, ggplot2, plotmath

我用来在我的一个情节`annotate()`上覆盖文本。`ggplot2`我使用该选项`parse=T`是因为我需要使用希腊字母 rho。我希望文字说`= -0.50`，但尾随的零被剪掉了，而我得到`-0.5`了。

这是一个例子：

```
library(ggplot2)
x<-rnorm(50)
y<-rnorm(50)
df<-data.frame(x,y)

ggplot(data=df,aes(x=x,y=y))+
geom_point()+
annotate(geom="text",x=1,y=1,label="rho==-0.50",parse=T) 
```

有谁知道我怎样才能让最后一个 0 出现？我以为我可以这样使用`paste()`：

```
annotate(geom="text",x=1,y=1,label=paste("rho==-0.5","0",sep=""),parse=T) 
```

但后来我得到了错误：

```
Error in parse(text = lab) : <text>:1:11: unexpected numeric constant
1: rho==-0.5 0
             ^ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T22:39:18.857

这是一个`plotmath`表达式解析问题；这不`ggplot2`相关。

您可以做的是确保将`0.50`其解释为字符串，而不是四舍五入的数值：

```
ggplot(data=df, aes(x=x, y=y)) +
    geom_point() +
    annotate(geom="text", x=1, y=1, label="rho=='-0.50'", parse=T) 
```

你会得到相同的行为使用`base`：

```
plot(1, type ='n')
text(1.2, 1.2, expression(rho=='-0.50'))
text(0.8, 0.8, expression(rho==0.50)) 
```

如果您想要更通用的方法，请尝试类似

```
sprintf('rho == "%1.2f"',0.5) 
```

有一个与此问题相关的[r-help 线程。](http://r.789695.n4.nabble.com/Format-of-numbers-in-plotmath-expressions-td4645126.html)

# android - 是否可以使用 URI 和 cursorLoader 而不是 ContentResolver() insert() ， delete() modfiy() 等来修改联系人

> ID：15397790
> 
> 赞同：0
> 
> 时间：2013-03-13T22:32:07.517
> 
> 标签：android

我是 Android 开发的新手，并试图添加一个活动，让我无需访问联系人应用程序即可操作联系人。

我使用 cursorLoader() 访问联系人并将其显示在 listView 中。现在我想插入、删除或编辑一个新联系人。

我的问题是我必须为此使用 ContentResolver().insert() 还是有办法使用 CursorLoader() 本身来做到这一点。CursorLoader() 是否仅用于访问数据？

我确实看到了使用 ContentResolver() 执行此操作的示例，但想知道是否不再推荐这样做？

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:38:03.093

CursorLoader 确实仅用于访问数据。

它的实现可帮助您在整个生命周期内将数据保存在活动/片段更新中（它知道何时停止、重新启动、启动等）。

insert 命令是一个原子命令，没有理由将其包装在 Loader 中，这个简单的操作有点开销（但仍需要在新任务中执行）

# jquery - 引导初学者问题

> ID：15397791
> 
> 赞同：-1
> 
> 时间：2013-03-13T22:32:12.160
> 
> 标签：jquery, css, twitter-bootstrap

我正在制作我的第一个引导网站，但遇到了很多问题。

[该网站在这里](http://www.posterlikes.com/page/)

1.  使用引导程序内置功能“navbar-fixed-top”，它弄乱了导航位置。我怎样才能让它再次到位。*（如果你用 ff 取消选中“位置：固定”，你可以看到导航应该在哪里）*

2.  我添加了两个轮播。我得到了一些数字，而不是漂亮的圆形分页。这是为什么 ？

3.  当我调整浏览器的大小时，我的背景颜色不会扩展 100%，我会在每一侧得到 10px 的空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:43:28.860

1.  而不是使用`navbar-fixed-top`尝试使用`affix span12`
2.  `carousel-indicators`我在你的 bootstrap.css 中没有看到这个类。确保您拥有最新版本。
3.  我没有这个问题。

# routes - 有没有办法在 MKMapView 中绘制名称？

> ID：15397796
> 
> 赞同：0
> 
> 时间：2013-03-13T22:32:18.670
> 
> 标签：routes, drawing, mapkit, names

我查看了许多关于如何在 MKMapView 上绘制路线的细线，但没有看到任何内容。

我希望能够在地图地形上但在道路名称和编号等下绘制信息（例如路线的交通流量图像，可能是注释）。

似乎没有办法做到这一点，因为地图/道路名称没有在 mapkit 中作为单独的图层公开？

听起来我确实可以在道路名称下绘制一条*路线*，但那是因为我可以为此使用 Apple 的 API，并且大概 Apple 正在将信息放在他们发回给我的图块中的订单名称 > 路线 > 地图数据中使用这种方法...

即使只是听到这不能做也会很高兴知道！

而且，大概它也不能用谷歌地图来完成？

提前致谢！

预计到达时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:59:29.550

我很确定无法更改抽奖顺序。叠加层始终绘制在地图图块的顶部。但是，您可以在叠加层中使用 alpha，以免混淆道路名称。也有可能找到一种混合模式，使您的信息看起来好像在名称下方，尽管在短暂使用这些模式之后，我没有找到具有那么大效果的模式。我认为叠加层被渲染到单独的位图（出于性能原因），然后绘制在地图图块上，这样可能会影响混合模式的工作方式。（编辑：我读过另一篇文章，因为这表明混合模式不适用于叠加）。

# vba - Excel VBA：如何仅对大于特定值的值求和？

> ID：15397797
> 
> 赞同：4
> 
> 时间：2013-03-13T22:32:28.413
> 
> 标签：vba, excel, sum

我一整天都在工作，试图找出解决问题的方法。我的大部分谷歌搜索都把我带到了这个网站，所以我决定放弃并寻求一些帮助。

我有一个包含股票投资组合头寸的 Excel 文件。我需要弄清楚如何编写一个宏，它可以立即告诉我那些超过投资组合价值 5% 的头寸加起来是否超过投资组合价值的 40%。

我对 VBA 有一些基本的了解，我知道如何选择正确的列，但我不知道如何仅对超过 5% (0.05) 的位置求和。我尝试了不同的 If 表达式，但我似乎无法正确处理。

有人可以给我指路吗？我只需要宏来检查我的列，然后在 MsgBox 中打印位置（> = 0.05）是否超过 40%（0.40）。

非常感谢你！

示例列：

```
Weights
0.032
0.067
0.103
.
.
.
0.02 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T22:56:40.847

为了建立 Doug Glancy 的评论，您应该能够为此使用 SUMIF。假设您的投资组合权重在 A2:A200 范围内，这将为您提供所需的：

`=SUMIF(A2:A200,">=0.05")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:52:08.733

如果我正确理解了您的问题，我认为以下就是您想要的。

```
Sub GetThreshold()

Dim myRng As Range
Dim pos As Double

Set myRng = ThisWorkbook.Sheets("Sheet1").Range("A2:A100")

For Each mycell In myRng
    If mycell.Value >= 0.05 Then
        pos = pos + mycell.Value
    End If
Next

If pos > 0.4 Then
    MsgBox "Position exceeds the threshold of 40%", vbCritical, "Position Break"
Else
    MsgBox "Position within the threshold of 40%", vbInformation, "Position Break"
End If

End Sub 
```

希望这可以帮助。

# c++ - 将外部算法从文本文件 c++ 加载到程序中

> ID：15397798
> 
> 赞同：0
> 
> 时间：2013-03-13T22:32:29.423
> 
> 标签：c++, graph-algorithm

我正在开始一个项目，并在开始做出重大决定之前寻求一些指导。

该项目是一个网络模拟器。基本上，我将加载一个表示计算机网络的有向图。预计网络将运行一种算法来模拟整个网络的操作。图上的每个单独节点都将运行相同的算法。

例如：一个简单的泛洪算法，它从根节点开始，每个节点都应该能够接收到消息然后将其重新发送给它的邻居。

我的问题是加载每个节点运行的算法。用户应该能够使用该算法创建一个文本文件，并将其加载到我的程序中，以便每个节点单独运行。

文本文件可以是任何格式，但我相信如果将它们格式化为 c++ 函数会最简单。

我能想到的唯一想法是创建一个解析器来读取每一行。这不仅会很困难，而且由于大多数算法中都存在循环，我认为这不会起作用。

我愿意给出更详细的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:37:43.770

通常，如果您想在文件中编写代码，您会使用脚本语言。[Lua](http://www.lua.org/)是一个流行的。

您对为算法解析文本文件的描述基本上是您创建自己的脚本语言（这也很常见）。

也许您不需要成熟的脚本语言，但至少，您需要一种[特定于域的语言](http://en.wikipedia.org/wiki/Domain-specific_language)，并且还不如为此目的使用脚本语言（沙盒）。[Boost::Spirit](http://boost-spirit.com/home/)是一种用于直接在 C++ 代码中描述和嵌入特定领域语言解析器的选项。

# javascript - 敲除计算属性输出函数体

> ID：15397810
> 
> 赞同：4
> 
> 时间：2013-03-13T22:33:16.653
> 
> 标签：javascript, mvvm, knockout.js

我是淘汰赛的新手，我正在尝试获取计算属性的值，但我得到的只是函数体。我的视图模型是

```
 var AuthorViewModel = function (data) {
    this.id        = ko.observable(data.id);
    this.firstName = ko.observable(data.firstName);
    this.lastName  = ko.observable(data.lastName);
    this.email     = ko.observable(data.email);
    this.phone     = ko.observable(data.phone)
    this.address   = ko.observable(data.address);
    this.fullName = ko.computed(function () {
        return this.firstName() + " " + this.lastName();
    },this);
}; 
```

但是我没有得到连接的字符串

```
    函数可观察（）{
    if (arguments.length > 0) {
    // 写

    // 如果值没有改变，则忽略写入
    if ((!observable['equalityComparer']) || !observable['equalityComparer'](_latestValue, arguments[0])) {
    observable.valueWillMutate();
    _latestValue = 参数[0];
    if (DEBUG) observable._latestValue = _latestValue;
    observable.valueHasMutated();
    }
    返回这个；// 允许链式赋值
    }
    别的 {.....

```

更新抱歉没有发布视图

 `````
<h1>Demo Application</h1>

<ul data-bind="foreach: authors">
    <li>
        <span data-bind="text: fullName()"></span>
        <a href="#" data-bind="click: edit">Edit</a>
    </li>
</ul>

<div>
    <button class="btn" data-bind="click: addAuthor">Add Author</button>
</div> 
```` 

`任何帮助，将不胜感激`

 `**更新 2 AuthorsViewModel**

 `````
 var AddAuthorViewModel = function() {
        this.id = ko.observable();
        this.firstName = ko.observable();
        this.lastName = ko.observable();
        this.email = ko.observable();
        this.phone = ko.observable();
        this.address = ko.observable();
    };

    AddAuthorViewModel.prototype.template = "AddAuthor";

    AddAuthorViewModel.prototype.add = function () {
        this._requireModal();

        var newAuthor = {
            id        : this.id,
            firstName : this.firstName,
            lastName  : this.lastName,
            email     : this.email,
            phone     : this.phone,
            address   : this.address,
        };
        // Close the modal, passing the new author object as the result data.
        this.modal.close(newAuthor);
    }; 
````  `应用视图模型 `/`

 ````
 The root view model for the application
    var AppViewModel = function() {
        this.authors = ko.observableArray();
    };

    AppViewModel.prototype.addAuthor = function() {
        showModal({
            viewModel: new AddAuthorViewModel(),
            context: this // Set context so we don't need to bind the callback function
        }).then(this._addAuthorToAuthors);
    };

    AppViewModel.prototype._addAuthorToAuthors = function (newAuthorData) {
        this.authors.push(new AuthorViewModel(newAuthorData));
    }; 
```` 

`我实际上正在使用来自[http://aboutcode.net/2012/11/15/twitter-bootstrap-modals-and-knockoutjs.html](http://aboutcode.net/2012/11/15/twitter-bootstrap-modals-and-knockoutjs.html)的教程，只做了一些修改`

 `* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:54:37.377

您的问题出在`newAuthor`创建部分：

```
var newAuthor = {
    id        : this.id,
    firstName : this.firstName,
    lastName  : this.lastName,
    email     : this.email,
    phone     : this.phone,
    address   : this.address,
 }; 
```

因为使用此代码，您正在创建一个引用可观察对象本身而不是它们的值的对象。

因此，在您`AuthorViewModel`的`data`对象最后将具有可观察的属性，您可以将其再次包装成一组新的可观察属性......

所以你需要在创建时解开你的 observables `newAuthor`：

```
var newAuthor = {
    id        : this.id(),
    firstName : this.firstName(),
    lastName  : this.lastName(),
    email     : this.email(),
    phone     : this.phone(),
    address   : this.address(),
}; 
````````

# haskell - Haskell 和网络框架

> ID：15397813
> 
> 赞同：2
> 
> 时间：2013-03-13T22:33:49.473
> 
> 标签：haskell, yesod, haskell-snap-framework, happstack

我开始开发一个应用程序（一些内部使用的无聊会计软件），并决定将其基于网络，因为这样可以一次性解决几个问题。

现在有几个可供 Haskell 选择的 web 框架（happstack、yesod 和 snap），我仍然开始再次感受到不得不处理 HTML、CSS 和极其聪明的有线 JavaScript 的痛苦。

嗯。

所以我到底想什么还不如尝试所有的 AJAX 方式并在[Cappuccino](http://www.cappuccino-project.org/)或[SproutCore](http://www.sproutcore.com)中做 UI 。（搜索引擎优化在这里不是问题）。

但是现在我真的不需要一个完整的 web 框架，比如上面三个之一，理论上一个可以提供 JSON 或 XML 包装的数据的 HTTP 服务器就足够了。

现在使用这三个中的任何一个还有意义吗？

最重要的是，这种方法的可行性如何？

君特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:56:17.143

我认为您的问题在这里可能接近“过于宽泛” - 所以我想这取决于您的要求。如果您所做的只是交换 JSON，那么您可能不需要类型安全 URL 之类的东西，实际上 Yesod 书有一个[JSON Web 服务示例](http://www.yesodweb.com/book/json-web-service)，它避免使用 Yesod 本身，而是构建在底层[WAI](http://hackage.haskell.org/package/wai)包上。

我无法对 Snap 和 Happstack 发表评论，因为我没有真正研究过它们，但也有其他选择。例如，[Scotty](https://github.com/xich/scotty)在 WAI 之上添加了一个更简单的层，这对于构建基本服务器来说应该绰绰有余，而无需太多学习曲线。我还发现阅读 Scotty 的代码是了解 WAI 的好方法，如果您正在开发更复杂的 Yesod 应用程序，这也非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:09:51.933

所有三大 Web 框架都有自己的 Web 服务器。Yesod 的服务器是[warp](http://hackage.haskell.org/package/warp)。Snap 的服务器是[snap-server](http://hackage.haskell.org/package/snap-server)。Happstack 的服务器是[happstack-server](http://hackage.haskell.org/package/happstack-server)。它们都有适合您的应用程序的相当低级别的 API。Warp 的 API 在[wai](http://hackage.haskell.org/package/wai)中定义。Snap 服务器的 API 在[snap-core](http://hackage.haskell.org/package/snap-core)中定义。Happstack 没有单独的 API 包，但是他们在[happstack-lite](http://hackage.haskell.org/package/happstack-lite)包中有一个简化版本。

我建议您查看 API 并使用您最喜欢的任何一个。

# c# - 您可以将 DataTable 声明为数组吗？

> ID：15397817
> 
> 赞同：-1
> 
> 时间：2013-03-13T22:34:10.327
> 
> 标签：c#, arrays, datatable

```
DataTable[] dt = new DataTable[2];

for(i = 0; i <= 1; i++)
{
  dt[i].Columns.Add("id");
  dt[i].Columns.Add("name");
} 
```

当我运行它时，我得到：

你调用的对象是空的。

可以像这样声明和使用 DataTable 数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:35:54.153

是的，您可以这样做，您会收到该错误，因为`dt[i]`它不是 DataTable 实例：

你可以这样做：

```
dt[i] = new DataTable(); 
```

完整代码：

```
DataTable[] dt = new DataTable[2];

for(i = 0; i <= 1; i++)
{
   dt[i] = new DataTable()
   dt[i].Columns.Add("id");
   dt[i].Columns.Add("name");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:36:24.163

```
DataTable[] dt = new DataTable[2];

for(i = 0; i <= 1; i++)
{
  dt[i].Columns.Add("id");
  dt[i].Columns.Add("name");
} 
```

我认为在代码中您声明了一个具有 2 个位置（空）的数组，但实际上并未填充它们。

你需要：

```
DataTable[] dt = new DataTable[2];

for(i = 0; i <= 1; i++)
{
  dt[i] = new DataTable();
  dt[i].Columns.Add("id");
  dt[i].Columns.Add("name");
} 
```

为了回答您的问题，是的，您应该能够拥有一系列`DataTable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:36:31.450

您必须先初始化`DataTable[]`数组元素：

```
dt[0] = new DataTable();
dt[1] = new DataTable(); 
```

或在循环内

```
for(i = 0; i <= 1; i++)
{
  dt[i] = new DataTable();
  dt[i].Columns.Add("id");
  dt[i].Columns.Add("name");
} 
```

# python - Python本地日期时间月

> ID：15397818
> 
> 赞同：1
> 
> 时间：2013-03-13T22:34:11.673
> 
> 标签：python, datetime

我有一个 Python TZ 感知日期`end_date`时间，例如 2013-03-01 06:00:00+00:00。我想获得美国/芝加哥时区的这个日期时间的月份。如果我这样做，`end_date.month`我会得到 3。我想做一个方法调用，比如`end_date.timezone('America/Chicago').month`- 或其他东西 - 这会给我正确的值 2。

以为我理解这个 datetime/pytz 的东西......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T23:21:51.257

您可以使用`.astimezone()`（并且根据文档，处理时区转换和夏令时之类的事情，您应该`.normalize()`得到结果）。

```
from pytz import timezone
end_date = ...tz-aware datetime...
us_tz = timezone('America/Chicago')

localized_end_date = us_tz.normalize(end_date.astimezone(us_tz)) 
```

请注意，`.astimezone`不能与天真的日期时间一起使用 - 它必须是可识别 TZ 的日期时间。另一种方法是在实例上使用该`.localize()`方法。`tzinfo`

```
end_date = ...naive datetime...
localized_end_date = timezone('America/Chicago').localize(end_date, is_dst=None) 
```

# haskell - GADT 中的递归替换

> ID：15397825
> 
> 赞同：4
> 
> 时间：2013-03-13T22:34:40.723
> 
> 标签：haskell, gadt

假设我有以下 GADT AST：

```
data O a b c where 
    Add ::  O a a a
    Eq :: O a b Bool
    --... more operations

data Tree a where 
    N :: (O a b c) -> Tree a -> Tree b -> Tree c
    L :: a -> Tree a 
```

现在我想构造一个函数来替换树中所有`L`类型的（屋檐） ，如下所示：`a`

```
f :: a -> Tree b -> Tree b
f x (L a) | typeof x == typeof a = L x
f x (L a) = L a
f x (N o a b) = N o (f x a) (f x b) 
```

有可能构建这样的功能吗？（可能使用类？）如果对 GADT 进行更改，是否可以完成？

我已经有一个 typeof 函数：`typeof :: a -> Type`在一个类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:41:35.790

我认为当前的 GADT 不可能做到这一点，除非您可以接受部分定义的功能。你可以写

```
--f :: (Typeable a, Typeable b) => a -> Tree b -> Tree a
f x (L a)
   | show (typeOf x) == show (typeOf a) = L x 
```

但你不能使这个功能完全，因为你需要

```
 | otherwise = L a 
```

这不会进行类型检查，因为您刚刚证明`L a :: Tree a`并且`L x :: Tree x`是不同的类型。

但是，如果您将 定义`GADT`为存在量化

```
data Tree where
    N :: (O a b c) -> Tree -> Tree -> Tree
    L :: Typeable a => a -> Tree

f :: Typeable a => a -> Tree -> Tree
f x (L a)
    | show (typeOf x) == show (typeOf a) = L x
    | otherwise = L a 
```

你丢失了你的类型信息`Tree`，但是这个类型检查并且是总的

另一个保留类型信息的版本

```
data Tree a b c where
    N :: (O a b c) -> Tree a b c -> Tree a b c -> Tree a b c
    L :: Typeable a => a -> Tree a b c

f :: Typeable a => a -> Tree a b c -> Tree a b c
f x (L a)
    | show (typeOf x) == show (typeOf a) = L x
    | otherwise = L a 
```

`L`在这里，您保留类型中存储在 a中的任何可能值的类型信息`Tree`。如果您只需要几种不同的类型，这可能会起作用，但会很快变得笨重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:16:18.943

诀窍是使用类型见证：[http ://www.haskell.org/haskellwiki/Type_witness](http://www.haskell.org/haskellwiki/Type_witness)

```
data O a b c where 
    Add ::  O a a a
    Eq :: O a b Bool

instance Show (O a b c) where
    show Add = "Add"
    show Eq = "Eq"

data Tree a where 
    T :: (Typeable a, Typeable b, Typeable c) => (O a b c) -> Tree a -> Tree b -> Tree c
    L :: a -> Tree a

instance (Show a) => Show (Tree a) where
    show (T o a b) = "(" ++ (show o) ++ " " ++ (show a) ++ " " ++ (show b) ++ ")"
    show (L a) = (show a)

class (Show a) => Typeable a where
    witness :: a -> Witness a

instance Typeable Int where
    witness _ = IntWitness

instance Typeable Bool where
    witness _ = BoolWitness

data Witness a where
    IntWitness :: Witness Int
    BoolWitness :: Witness Bool

dynamicCast :: Witness a -> Witness b -> a -> Maybe b
dynamicCast IntWitness  IntWitness a  = Just a
dynamicCast BoolWitness BoolWitness a = Just a
dynamicCast _ _ _ = Nothing

replace :: (Typeable a, Typeable b) => a -> b -> b
replace a b = case dynamicCast (witness a) (witness b) a of
    Just v  -> v
    Nothing -> b

f :: (Typeable a, Typeable b) => b -> Tree a -> Tree a
f x (L a) = L $ replace x a
f x (T o a b) = T o (f x a) (f x b) 
```

# javascript - 检查元素是否存在于父元素中

> ID：15397830
> 
> 赞同：0
> 
> 时间：2013-03-13T22:34:53.567
> 
> 标签：javascript, jquery

我通过使用 href 值将 youtube 视频嵌入并附加到 div 并将其添加到 youtube.com/embed/ +hrefvariable。我只需要一些指导来检查 youtube 视频是否已经在 div 中，而不是运行将其附加到那里的点击功能。我正在考虑将 .length() 与父 div 一起使用？

这是附加功能：

```
$(function () {
    $(".youtube").click(function (a) {
        a.preventDefault();
        a = '<iframe src="http://www.youtube.com/embed/' + $(this).attr("href") + '?&iv_load_policy=3&autoplay=1#t=0m12s&rel=0" frameborder="0" allowfullscreen ></iframe>';
        $("#currentvid").html(a);
        $("#currentvid").animate({
            opacity: 1
        }, 1E3);
        return !1
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:37:58.427

您可以`if ($("#currentvid iframe").length) return;`在点击功能的顶部执行此操作。我还建议存储`$('#currentvid')`在`var`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:38:02.497

```
var iframe_ele = $("#currentvid").find('iframe');
if (iframe_ele.length > 0) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:37:34.010

如果要检查 iframe 是否已存在，请使用：

```
if ($("iframe").length == 0){
   //iframe doesn't exist yet. Append it.
} 
```

如果你有多个 iframe，给它一个 id 并检查它。

# php - 使用生成的表格更新数量

> ID：15397836
> 
> 赞同：0
> 
> 时间：2013-03-13T22:35:17.160
> 
> 标签：php, jquery

当用户更新产品数量时，我有一个更新总价的功能。生成表单时，总计不会更新总计，但是当我刷新页面时，它可以工作。我想我需要使用 .on 功能，但我不确定。

```
$('.qty').keyup(function(event){
    var total = parseFloat($('#total').text());
    var newTotal = 0;
    var id = this.id.replace('qty-','');
    var qty = $('#qty-'+id).val();

    $('ol li').each(function(idx, li){
        var lId = li.id.replace('cart-','');
        var price = $('#price-'+lId).text();
        var lQty = $('#qty-'+lId).val();
        newTotal += parseFloat(price) * parseFloat(lQty);
    }); 

    $('#total').html(newTotal.toFixed(2));

    $.ajax({
        type: "POST",
        url: "resources/changeQty.php",
        data:{ id: id, qty: qty },
        cache: false,
    });

}); 
```

文本字段的代码是这样的：

```
<input type="text" name="newQty" id="qty-'.$productId.'" class="qty" size="2" maxlength="3" value="1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:29:19.823

我没有使用 keyup 函数，而是使用了“Peeyush”建议的 .on 函数。看完这篇文章后： [jQuery.on() 是否适用于在创建事件处理程序后添加的元素？](https://stackoverflow.com/questions/9814298/does-jquery-on-work-for-elements-that-are-added-after-the-event-handler-is-cre/9814409#9814409)

我改变了这个：

```
$('.qty').keyup(function(event){}); 
```

对此：

```
$('#mainCart').on("keyup",".qty",function(e){}); 
```

“keyup”是触发事件“.qty”是选择器，触发事件的东西，在这种情况下，“keyup”功能是我想要在有人按下“.qty”中的键时发生的事情。

对不起，如果那不是很好的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:47:56.803

如果数据库正确更新，则问题出在 javascript 价格计算中（中间部分）。

您还应该发布带​​有`#total`元素的部分，但我的猜测是这是不正确的：

```
$('#total').html(newTotal.toFixed(2)); 
```

如果`#total`是输入，则应将其替换为：

```
$('#total').val(newTotal.toFixed(2)); 
```

# spring - 无法在事务中间更改事务只读属性

> ID：15397840
> 
> 赞同：3
> 
> 时间：2013-03-13T22:35:31.497
> 
> 标签：spring, postgresql, spring-jdbc, bonecp

我将 BoneCP 与 Postgresql 和 Spring JdbcTemplate 一起使用。当 JdbcTemplate 执行查询然后尝试关闭连接时，它会收到以下异常：

> org.postgresql.util.PSQLException：无法在事务中间更改事务只读属性。在 org.postgresql.jdbc2.AbstractJdbc2Connection.setReadOnly(AbstractJdbc2Connection.java:725) 在 com.jolbox.bonecp.ConnectionHandle.setReadOnly(ConnectionHandle.java:1279) 在 com.jolbox.bonecp.ConnectionHandle.(ConnectionHandle.java:254)在 com.jolbox.bonecp.ConnectionHandle.recreateConnectionHandle(ConnectionHandle.java:273) 在 com.jolbox.bonecp.ConnectionHandle.close(ConnectionHandle.java:476) 在 org.springframework.jdbc.datasource.DataSourceUtils.doCloseConnection(DataSourceUtils.java :341) 在 org.springframework.jdbc.datasource.DataSourceUtils.releaseConnection(DataSourceUtils.java:294) 在 org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection(DataSourceUtils.java:328) 在 org.

由于无法关闭连接，打开的连接数达到最大连接数，然后应用程序变得无响应。

我没有设置任何与交易相关的属性。所以交易设置应该是默认的。我怎样才能解决这个问题？

依赖和配置：

bonecp 0.8.0-rc1 postgresql 9.2-1002.jdbc4 spring-jdbc 3.2.1.RELEASE

```
<bean id="dataSource" class="com.jolbox.bonecp.BoneCPDataSource"        destroy-method="close">         <property name="driverClass" value="org.postgresql.Driver" />       <property name="jdbcUrl" value="jdbc:postgresql://127.0.0.1/mkayman" />         <property name="username" value="mkayman" />        <property name="password" value="" />       <property name="idleConnectionTestPeriodInMinutes" value="5" />         <property name="idleMaxAgeInMinutes" value="30" />      <property name="maxConnectionsPerPartition" value="5" />        <property name="minConnectionsPerPartition" value="2" />        <property name="partitionCount" value="2" />        <property name="acquireIncrement" value="1" />      <property name="statementsCacheSize" value="100" />     </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:12:33.430

我今天遇到了这个问题。您可能缺少 boneCP 所需的依赖项之一。

我错过了 SLF4J 库，并收到了相同的消息。检查您是否有依赖项：http://jolbox.com/index.html?page=http: [//jolbox.com/requirements.html](http://jolbox.com/index.html?page=http://jolbox.com/requirements.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T10:34:04.970

我遇到了同样的问题，并且能够通过执行以下两个步骤来解决它：

*   通过添加以下语句设置隔离级别： config.setDefaultTransactionIsolation("READ UNCOMMITTED");

*   在关闭之前提交每笔交易。

我不确定哪一个解决了这个问题，或者两者都是必要的。

# javascript - 解释在给定情况下正确使用 angularjs 指令

> ID：15397841
> 
> 赞同：0
> 
> 时间：2013-03-13T22:35:32.543
> 
> 标签：javascript, angularjs, angularjs-directive

到目前为止，根据我对 angular 的理解和使用，指令用于 DOM 操作，而控制器用于良好控制。

我知道指令应该是通用的和可重用的，我正在努力将迷你向导转换为指令并使其通用。也许真正的通用要求太多了。

基本上它的div，单击按钮->（发生一些逻辑）->fadeout.callBack（fadein new div）->再次重复->并在最后一个窗口上单击一个按钮并返回到原始div。

现在，我使用 fadeOut/fadeIn 使用嵌套的 jquery 选择器来完成此操作。

它运作良好，我只想将它从控制器中分离出来，以尽可能地保持“最佳实践”。

对我来说真正令人困惑的一点是，指令似乎是在运行时不断更新的功能，而淡入/淡出功能实际上是 onClick 类型的东西。

任何意见将是有益的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:43:29.330

我同意上述评论，尤其是您可以通过提供示例来帮助说明问题。我不完全确定指令在运行时是什么意思。但是，代替示例，我有几个可能的建议。

1.  创建一个 jquery 插件并尝试使用[angular ui](http://angular-ui.github.com/ "角度用户界面")有一个 jq 指令可以处理许多插件
2.  angularui 还有一个可能适合您的动画指令
3.  您将看到的一种技术是有时使用观察者或超时来检查@mark-rajcok 所建议的状态。

在我看来，从您提供的内容来看，这是一个非常可解决的问题，已经解决了。我建议拉下 angularui 和配套的引导代码以获取想法。免责声明：我已经完成了 angularui 项目的工作。

# function - MATLAB 中的高斯函数

> ID：15397847
> 
> 赞同：-1
> 
> 时间：2013-03-13T22:35:59.633
> 
> 标签：function, matlab, math, gaussian

如果我想创建一个高斯函数然后找到特定点的值，我将在 MATLAB 中使用哪些函数。抱歉，如果这应该是显而易见的，但不知何故我无法通过谷歌搜索找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:38:31.047

看一下正态分布pdf：

[http://www.mathworks.com/help/stats/normpdf.html](http://www.mathworks.com/help/stats/normpdf.html)

# ios - 序列化异步方法

> ID：15397848
> 
> 赞同：5
> 
> 时间：2013-03-13T22:36:05.890
> 
> 标签：ios, block

我有许多需要串行执行的任务，但任务包括完成块中的下一个块。

什么是一次完成这些任务的好技术，在当前任务完成其完成块后开始下一个任务？

除了具有串行 NSOperationQueue 的 NSOperation 子类之外，还有其他技术吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T22:42:54.710

标准解决方案：

1.  `NSOperationQueue`与. `maxConcurrentOperationCount`_ `1`你说你不想那样做，但你没有说为什么。串行队列是最合乎逻辑的解决方案。

    例如：

    ```
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    queue.maxConcurrentOperationCount = 1;

    [queue addOperationWithBlock:^{
        NSLog(@"Starting #1");
        sleep(3);
        NSLog(@"Finishing #1");
    }];

    [queue addOperationWithBlock:^{
        NSLog(@"Starting #2");
        sleep(3);
        NSLog(@"Finishing #2");
    }];

    [queue addOperationWithBlock:^{
        NSLog(@"Starting #3");
        sleep(3);
        NSLog(@"Finishing #3");
    }]; 
    ```

2.  如果您不想要 serial `NSOperationQueue`，您可以使用标准并发队列，但只需使每个操作都依赖于前一个操作。您将在不使用串行队列的情况下实现您正在寻找的串行行为。

    例如：

    ```
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    NSOperation *operation;
    NSOperation *previousOperation;

    operation = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@"Starting #1");
        sleep(3);
        NSLog(@"Finishing #1");
    }];
    [queue addOperation:operation];

    previousOperation = operation;
    operation = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@"Starting #2");
        sleep(3);
        NSLog(@"Finishing #2");
    }];
    [operation addDependency:previousOperation];
    [queue addOperation:operation];

    previousOperation = operation;
    operation = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@"Starting #3");
        sleep(3);
        NSLog(@"Finishing #3");
    }];
    [operation addDependency:previousOperation];
    [queue addOperation:operation]; 
    ```

3.  您还可以使用`dispatch_queue_create`. 除了使用 GCD 而不是`NSOperationQueue`.

    例如：

    ```
    dispatch_queue_t queue = dispatch_queue_create("com.ConnerDouglass.operationtest", 0);

    dispatch_async(queue, ^{
        NSLog(@"Starting #1");
        sleep(3);
        NSLog(@"Finishing #1");
    });

    dispatch_async(queue, ^{
        NSLog(@"Starting #2");
        sleep(3);
        NSLog(@"Finishing #2");
    });

    dispatch_async(queue, ^{
        NSLog(@"Starting #3");
        sleep(3);
        NSLog(@"Finishing #3");
    }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:46:10.527

我认为这是一个有趣的解决方案：[https ://github.com/berzniz/Sequencer](https://github.com/berzniz/Sequencer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:43:57.613

像这样的东西怎么样：

```
-(void)start
{
    // Start the async chain
    [self performSelectorInBackground:@selector(action1) withObject:nil];
}
-(void)notifyDone:(NSNumber *)taskID
{
    NSLog(@"Done with task #%i", taskID.intValue);
}
-(void)action1
{
    // Do some fancy async stuff here
    // Now, we are done. Notify the main thread that task 1 is complete.
    [self performSelectorOnMainThread:@selector(nofityDone:) withObject:[NSNumber numberWithInt:1] waitUntilDone:YES];
    // Move onto the next task once the main thread is done handling the notification
    [self action2];
}
-(void)action2
{
    // Do the same sort of thing as "action1" did, then call he next method
} 
```

# php - showCalendar 未定义

> ID：15397857
> 
> 赞同：0
> 
> 时间：2013-03-13T22:36:36.017
> 
> 标签：php, joomla, calendar, joomla3.0

在 joomla 1.5 中，我使用以下内容来显示日历。

```
<?php JHTML::_('behavior.calendar'); ?>

<input type="reset" class="button" value="..." onclick="return showCalendar('startdate','%Y-%m-%d');" /> 
```

我怎样才能在 joomla 3.0 中拥有同样的财富？现在我明白了`Uncaught ReferenceError: showCalendar is not defined`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:47:33.893

这有效

```
<?php echo JHTML::_('calendar', $startdate, "mydate" , "mydate", '%Y-%m-%d');?> 
```

# c# - 将 id 从 gridview 捕获到 fillgridview

> ID：15397859
> 
> 赞同：0
> 
> 时间：2013-03-13T22:36:43.157
> 
> 标签：c#, asp.net, gridview, categories, rowcommand

我在一页上有两个gridview..我列出了第一个而不是commandargument（“id”）我列出了第二个..但是我在这些gridviews上做一些我可以完成第一个gridview，因为没有必要捕获 id 以列出它。它列出了它所拥有的一切。但第二个，我只想列出该产品的类别 ID。你能帮助我吗 ？以及词语的翻译；

Doldur：填充/ Guncelle：更新/ Sil：删除/ vazgec：取消

错误的地方充满了问号。谢谢你的帮助

```
 private void Doldur()
    {
        WebHelper.FillGridView(myGrid, Service.GetAllCategories());
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
            return;

        Doldur();
    }

    protected void myGrid_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        GridViewRow row = null;

        if (e.CommandSource is ImageButton)
        {
            row = ((e.CommandSource as ImageButton).NamingContainer) as GridViewRow;
        }

        int id = 0;

        int.TryParse(e.CommandArgument.ToString(), out id);

        switch (e.CommandName)
        {
            case "sil":
                Service.Sil(id);
                break;
            case "guncelle":
                // textbox'ı yakalamak için
                TextBox txtKategoriAd = myGrid.Rows[row.RowIndex].FindControl("txtKategoriAd") as TextBox;
                var kategori = new Categories { CategoryID = id, CategoryName = txtKategoriAd.Text };
                Service.Update(kategori);
                // Edit moddan çıkılmalı..
                myGrid.EditIndex = -1;
                break;
            case "vazgec":
                myGrid.EditIndex = -1;
                break;
            case "link":
                int categoryId = Convert.ToInt32(e.CommandArgument);
                myGrid2.DataSource = Service.GetProductsByCategories(categoryId);
                myGrid2.DataBind();
                break;
        }

        Doldur();
    }
    protected void myGrid_RowEditing(object sender, GridViewEditEventArgs e)
    {
        myGrid.EditIndex = e.NewEditIndex;
        Doldur();
    }

    private void Doldur2()
    {
        WebHelper.FillGridView(myGrid2, Service.GetProductsByCategories(??????));
    }

    protected void myGrid2_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        GridViewRow row = null;

        if (e.CommandSource is ImageButton)
        {
            row = ((e.CommandSource as ImageButton).NamingContainer) as GridViewRow;
        }

        int id = 0;

        int.TryParse(e.CommandArgument.ToString(), out id);

        switch (e.CommandName)
        {
            case "sil2":
                Service.Sil2(id);
                break;
            case "guncelle2":
                // textbox'ı yakalamak için
                TextBox txtKategoriAd2 = myGrid2.Rows[row.RowIndex].FindControl("txtKategoriAd2") as TextBox;
                var product = new Products { ProductID = id, ProductName = txtKategoriAd2.Text };
                Service.Update2(product);
                // Edit moddan çıkılmalı..
                myGrid2.EditIndex = -1;
                break;
            case "vazgec2":
                myGrid2.EditIndex = -1;
                break;
        }

        Doldur2();
    }
    protected void myGrid2_RowEditing(object sender, GridViewEditEventArgs e)
    {
        myGrid2.EditIndex = e.NewEditIndex;
        Doldur2();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:23:19.747

您应该为第二个网格保存类别 ID。

```
case "link":
                int categoryId = Convert.ToInt32(e.CommandArgument);
                Session["CategoryID"] = categoryId;
                myGrid2.DataSource = Service.GetProductsByCategories(categoryId);
                myGrid2.DataBind();
                break; 
```

和

```
 private void Doldur2()
    {
        int catid = (int)Session["CategoryID"];
        WebHelper.FillGridView(myGrid2, Service.GetProductsByCategories(catid));
    } 
```

就这样。

# c - 取线性输入，转换成几何序列并取整？

> ID：15397864
> 
> 赞同：0
> 
> 时间：2013-03-13T22:37:10.423
> 
> 标签：c, math, 8051, adc

抱歉，想标题有点吃力。

基本上，我有一段代码从我的嵌入式板（8051）上的比较器读取一个值。这将是一个 0-255 之间的值，其中 0 是 0V，255 是 5V。

我需要将这些值输出到一组八个 LED，每个 LED 在变量 P1 上分配一个位，以人类可读的方式（IE 像电平表）。因此，输入值必须四舍五入，以便从 16 到 32 的任何值输出为 1、33 到 48 为 2、49 到 80 为 4、81 到 112 为 8 等。

到目前为止，我知道的唯一可行的解​​决方案是一串 if-else 语句，但是在意识到它不会削减它之前，我深入了两层。

有谁知道如何做到这一点？我的大脑已经变得糊涂，试图弄清楚如何在数学上做到这一点。

谢谢！乔

编辑：这是我计算的快照，我希望它更清楚一点。[http://i.imgur.com/r3n8Ila.png](http://i.imgur.com/r3n8Ila.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:13:49.463

我认为与您的数据相当接近的数学公式可能是

```
BitNumber = floor(voltage / 32 + 1/2) 
```

其中 floor 是比您的结果低的最接近的整数。

这也可以写成

```
BitNumber = round(voltage / 32) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:46:56.630

```
#include <stdio.h>

int round8values(int inputVoltage)
{
    return 1 + inputVoltage/32 ;
}

int main(void)
{
    printf("31 goes to :  %d \n", round8values(31));
    printf("31 goes to :  %d \n", round8values(42));
    printf("31 goes to :  %d \n", round8values(64));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:47:46.700

好的，对于这个新的值列表，您需要浮点运算，例如

```
int bitno = (trunc(1 + (val/255.0 - 0.0625)/0.125)); 
```

或者你可以作弊并以足够的精度进行 int 算术：

```
int bitno = ((val*31372 + 515000)/1000000); 
```

您至少需要 24 位 usigned int 才能使此类操作正常工作而不会溢出。

一旦你计算了你需要的位，设置它：

```
int LEDval = bitno == 0 ? 0 : 1 << (bitno - 1); 
```

或者为了避免三元运算，

```
int LEDval = 0;
if (bitno) LEDval = 1 << (bitno - 1); 
```

# .htaccess - 如何保留 URL，但重定向内容？

> ID：15397873
> 
> 赞同：0
> 
> 时间：2013-03-13T22:37:49.843
> 
> 标签：.htaccess, url, mod-rewrite

我希望能够重写一个域名。

目前我正在使用htaccess：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^mydomain.com [NC]
RewriteRule .* http://www.mydomain.net%{REQUEST_URI} [R=301,L] 
```

现在，当用户在地址栏中键入“ [http://mydomain.com](http://mydomain.com) ”时，页面将重定向到“ [http://www.mydomain.net](http://www.mydomain.net) ”。但是，与此同时，地址字段变成了第二个。

我希望能够提供不同的内容，但让用户/客户端的 url 保持不变。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:52:40.230

如果您想从其他地方提供内容，则必须使用内部重写。当您只有一个 URL 替换路径（即没有域）并且没有`R`标志时，这是自动完成的

```
RewriteRule ^this$ /that 
```

当您收到对 的请求时`www.mydomain.com/this`，来自的内容`www.mydomain.com/that`将被提供给客户端。

您还可以在目标中使用请求 URL，或仅使用其中的一部分

```
RewriteRule ^.*$ /test.php?url=$0 
```

有关详细信息，请参阅[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)和[mod_rewrite 介绍](http://httpd.apache.org/docs/current/rewrite/intro.html)。

# javascript - 内联javascript，'javascript：alert（'asdf'）'中的'javascript'是什么

> ID：15397878
> 
> 赞同：3
> 
> 时间：2013-03-13T22:38:09.587
> 
> 标签：javascript

我不编写内联 javascript，但我一直在我使用的代码库中看到并使用它：

`<div onClick='javascript:alert("asdf");'></div>`

我做了一些测试，发现在我所有的浏览器中，即使是 IE5 模式下的 IE，你都可以更改`javascript`为任何内容，并且`alert`会正常触发。

`<div onClick='qwerty:alert("asdf");'></div>`

那个分隔符是什么？它背后的历史是什么？它曾经需要或有用吗？我似乎记得`<script type="text/javascript">`实际上并不需要`type`属性集，这也与此有关吗？我尝试了一些谷歌搜索，但很难搜索。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T22:40:38.237

如果页面上的第一个脚本是 VBScript，则它是IE 中仅需要的[标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)
如果您添加`<script type="VBScript"></script>`到（较旧？）IE，如果它们是特定于 javascript 并且没有标签 javascript: 告诉 IE切换回来

在这里查看我的答案：[JavaScript 伪协议实际上做了什么？](https://stackoverflow.com/questions/10068781/what-does-the-javascript-pseudo-protocol-actually-do)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T22:43:37.957

一般来说，它只是一个标签，类似于：

```
label:
  statement; 
```

这就是为什么`qwerty:alert("asdf")`有效，因为它是合法的 Javascript。

IE 确实以不同的方式处理这个问题。[您可以在此答案](https://stackoverflow.com/a/372279/263004)中找到更多详细信息。

相关答案和链接：

*   ['javascript:' 前缀何时是有效语法？](https://stackoverflow.com/questions/561550/when-is-the-javascript-prefix-valid-syntax)
*   [无用的javascript：伪协议](http://crisp.tweakblogs.net/blog/the-useless-javascript-pseudo-protocol.html)

# ssas - 使用 SUM 求平均值并使用 MDX 除以非空计数

> ID：15397888
> 
> 赞同：0
> 
> 时间：2013-03-13T22:38:50.337
> 
> 标签：ssas, mdx

我知道这应该很容易，但我是 MDX 的新手，无法正确处理。我的目标是获取特定客户的平均订单成本，包括层次结构中客户的子账户。如果我想计算零美元订单但我不计算，我可以使用下面的 MDX 正确获得平均值（它们实际上显示为空，而不是零，但不用担心）。那么如何更新查询以使其仅查看非空 OrderCost 值？最后一行是失败的尝试。

```
WITH MEMBER avgcost as ([Measures].[OrderCost]/[Measures].[OrderCount])
SELECT avgcost on columns,
[Dim User].[User ID].&[381] on rows
from [OrdersCube]
//where Filter([Dim User].[User ID].All, [Measures].[OrderCost].Value <> "") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:21:57.067

您是否考虑过使用该`Avg()`功能？默认情况下它会忽略空单元格。您需要构建一个集合来描述您想要平均的单个订单（而不是单个用户的聚合 OrderCost）。例如：

```
WITH MEMBER avgcost as Avg([Orders].Members, [Measures].[OrderCost])
SELECT 
    avgcost on columns,
    [Dim User].[User ID].&[381] on rows
from [OrdersCube] 
```

请参阅此处的文档：http: [//msdn.microsoft.com/en-us/library/ms146067.aspx](http://msdn.microsoft.com/en-us/library/ms146067.aspx)

# php - 需要帮助使用 php 和 jquery ajax 使用 mysql 数据库中的数据填充 html 选择

> ID：15397891
> 
> 赞同：0
> 
> 时间：2013-03-13T22:39:09.817
> 
> 标签：php, jquery, html, ajax

我有一个 html 选择，用户在其中选择一个选项，然后单击 go。我接下来想要做的是根据他们在第一次选择中选择的选项，从 mysql 数据库中接收到另一个数据。

我让我的代码在运行查询的位置获取数据，然后在 ajax 调用中运行成功。问题是我不知道如何格式化返回的数据，以便能够用它填充 html 选择。我想我需要将返回的 json 中的结果解析为一个数组，该数组可用于输出每个值的选择选项。但是，我不确定如何执行此操作。或者如果有人有更好的建议，请帮忙。

进程.php

```
<?php
$pdo = new PDO("mysql:host=localhost;dbname=sales_rep", "root", "");

$country = $_POST['q'];

$stmt = $pdo->prepare("
    SELECT DISTINCT state_prefix
    FROM zips
    WHERE country = '$country'
    ORDER BY state_prefix ASC
    LIMIT 50");

if($stmt->execute()){
    echo json_encode($stmt->fetchAll( PDO::FETCH_OBJ ));

} else {
    echo "query fail";
}   

?> 
```

代表.js

```
 $('#country').submit(function(event) {

event.preventDefault();

 /*clear result div*/
   $("#result").html('');

  var values = $(this).serialize();

  $.ajax({
  url: "process.php",
  type: "post",
  data: values,
  dataType: 'json',
  success: function(response){
       console.log(response);
  },
  error:function(){
      alert("failure");
      $("#result").html('there is error while submit');
  }   
 }); 

  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:56:22.800

我用的是：

这是我的 php 服务器：

```
<?php
$HTTP_RAW_POST_DATA = file_get_contents("php://input");
$data=json_decode($HTTP_RAW_POST_DATA,true);
$option= $data['option'];
require_once '../../Model/yourmodel.php';
$model= new Model();
header("Content-Type: text/html;charset=utf-8");
print json_encode($model->getQueries($option));
?> 
```

这是我的模型：

```
 $data = array();
        try {
            $myconexion= new conexion();
            $cn = $myconexion->connect();
            mysql_query("SET NAMES 'utf8'");
            $rs = mysql_query($sql, $cn); //some sql
            while($reg = mysql_fetch_assoc($rs)) {
                $data[] = $reg;
            }
            mysql_free_result($rs);
            mysql_close($cn);
        } catch (exception $e) {
            try {
                mysql_free_result($rs);
            } catch (exception $e) {

            }
            try {
                mysql_close($cn);
            } catch (exception $e) {

            }

        }
        return $data; 
```

还有一些客户：（jquery）

```
$("#country").submit(function(event){
event.preventDefault();

    var option = $("#myIDoption").val();
    //my atributes
    var jsonCliente = {
        option : option,
      };

     $.ajax({
        type: "POST",
        data: JSON.stringify(jsonCliente),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        url: "../backend/someurl.php",
        success: function ( data ) {
          //example of json result
          /*
          [{"idtb_producto":"3","name":"ENFERMEDADES ENDEMICAS EN EL PERU",
          "stock":null,"buyprice":null},{"idtb_producto":"4","name":
          "ENFERMEDADES PARASITARIAS","stock":null,"buyprice":null}]    
          */
             $.each(data, function(i) {
               var nombre = data[i].name;
               var stock = data[i].stock;
               var price = data[i].buyprice;
               //do something with my data
            });

        }
    });

    return false;
 }); 
```

我希望这些信息对你有帮助：D

# imagemagick - 可以在 Imagemagick 中绘制 Web 按钮吗？

> ID：15397892
> 
> 赞同：1
> 
> 时间：2013-03-13T22:39:11.720
> 
> 标签：imagemagick, imagemagick-convert

关于 Imagemagick 的全部新手问题：正在制作这种按钮：

[带金属环的按钮](http://mygimptutorial.com/round-web-20-button-with-a-metal-ring)

从 0% 到 100%（不使用 Gimp 或 Photoshop 等外部程序的背景或蒙版图像）甚至可能吗？

如果是的话，有人对我有一些快速的提示吗？

# c++ - Boost C++ Phoenix 用户定义参数的下标运算符 [] 错误

> ID：15397899
> 
> 赞同：3
> 
> 时间：2013-03-13T22:39:29.637
> 
> 标签：c++, templates, boost, boost-phoenix, boost-proto

使用现有的 Boost Phoenix（占位符）参数，例如`_1`，我可以使用数组/下标运算符。例如，以下摘录将显示一个`1`.

```
int arr[4] = {1,2,3,4};
std::cout << _1[0](arr) << std::endl; 
```

但是，如果我定义自己的占位符参数：

```
phoenix::actor<phoenix::expression::argument<1>::type> const my_1 = {{}}; 
```

尽管它可以正常工作（以下输出为 7）：

```
std::cout << my_1(7) << std::endl; 
```

如果我尝试使用下标运算符（如上）：

```
std::cout << my_1[0](arr) << std::endl; 
```

我收到很多错误；总之，使用 G++ 4.7.2，模板参数推导失败；使用 Clang 3.2，我被告知函数不能返回数组类型。

如何使我的 Phoenix 占位符参数支持下标运算符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:57:28.830

只需摆脱该`actor`部分，它就可以正常工作：

```
#include <iostream>
#include <boost/phoenix.hpp>

int main()
{
    namespace phx = boost::phoenix;

    phx::expression::argument<1>::type const my_1 = {{{}}};
    int arr[4] = { 1, 2, 3, 4 };
    std::cout << my_1[0](arr) << '\n';
} 
```

[[在线演示](http://liveworkspace.org/code/24eNCC%244)]

# mysql - 在数据库中存储大列表的正确方法

> ID：15397902
> 
> 赞同：0
> 
> 时间：2013-03-13T22:39:35.683
> 
> 标签：mysql, sql

我正在我的数据库中创建一个表来存储一堆与工作相关的技能，类似于 LinkedIn 的技能和专业知识功能。

我应该如何存储数据？

我想将工作与一组技能相关联，但很多技能重叠，即“监督技能”、“管理”等。然后，该技能组将与适当的用户相关联（我已经有一个名为 的表`user`）

我是否应该创建一个名为“jobs”的表，然后为每种工作类型（维护、银行、客户服务）创建一个列，然后创建一个名为“skills”的第二个表，然后添加所有技能？

显然，我被困住了。任何指导表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:58:08.207

为了避免冗余和依赖性，您应该[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的表。

在您的情况下，这意味着 3 个表：

1.  工作
2.  技能
3.  Jobs_has_Skills

# android - Android 相同的代码给出了两种不同的输出（dateFormat）

> ID：15397905
> 
> 赞同：0
> 
> 时间：2013-03-13T22:40:03.810
> 
> 标签：android, date-format

好的，我有一个无法解决的问题。我正在和朋友一起开发一个应用程序。

问题是，使用这段代码，应用程序为我运行，但是当我的朋友运行它时，他收到一个错误（`IllegalArgumentException`），就像他仍然有一些标签字符一样。

```
idical = Html.toHtml(icalarr.get(info.position));
int l = idical.length() - 5;
idical = idical.substring(3, l); 
```

于是他把代码改成了：

```
idical = idical.substring(11, l); 
```

现在我得到了错误，就像我“剪切”了太多字符一样。这没有意义，因为代码相同，而且我们使用相同的 IDE 和设备

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:50:47.610

您是否调查过您的字符集编码是否与您的朋友不同？在 Eclipse 中，可以通过右键单击项目并选择 Properties 来找到它。在打开的页面（资源页面）上，有用于编码和文件行分隔符的选项。如果您没有相同的文件，那么每个系统都会以不同的方式解释文件，即使您看到的文本看起来相同。

另一种选择是将原始文本加载到 Notepad++ 之类的程序中并检查字符集。您还可以在那里寻找可能导致问题的“不可见”字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:54:55.330

看起来您正在从日历中提取年份（返回`int`）然后转换为 html，然后从 html 中提取结果的数字部分。

虽然您的构建显然存在一些差异，但如果您根本不将日历内容转换为 html，似乎对您来说会更容易，即：

```
idical = icalarr.get(info.position).toString(); 
```

# c - 在 Windows 和 Linux 系统中，物理到虚拟的 IRQ 映射是如何实现的？

> ID：15397907
> 
> 赞同：3
> 
> 时间：2013-03-13T22:40:13.847
> 
> 标签：c, linux, windows, linux-kernel, kernel

据我所知，Windows 系统中有 255 个虚拟 IRQ（芯片组只允许 16 个物理 IRQ），它们通常都使用物理 IRQ 11。在 Linux 系统中，还有一个虚拟 IRQ 的概念。

所以，我很感兴趣这个映射是如何实现的？来自 Linux 内核或只是算法的源代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:29:39.660

中断处理的具体实现会因架构和平台而异。这个答案主要针对Linux，因为源代码可用。至少对于 Linux，有一个通用的 IRQ 处理层，驱动程序是针对该层编写的，以便驱动程序可以在体系结构之间兼容，而与底层中断体系结构无关。

现代平台可能有多个中断控制器，因此它的平台特定代码处理请求的 IRQ 号`request_irq()`到特定中断控制器的映射。

以`mach-pxa`PXAxxx 基础平台的 Linux 架构为例。平台[irq.c](https://github.com/mirrors/linux-2.6/blob/master/arch/arm/mach-pxa/irq.c)文件包含两个`struct irq_chip`引用，指示两个不同的中断控制器。当`pxa_init_irq()`被调用时，它会为特定的中断控制器分配一个虚拟中断号。平台代码确保为每个可能的中断源分配唯一的中断号。

有很多细节过于详细，无法在此处发布，因此我建议获取 Linux 源代码的副本并深入研究。如果您正在寻找映射，请专门查看不同的`arch`目录。

如果你`make htmldocs`从顶层做一个，你会得到一个`Documentation/DocBook/index.html`你可以细读的。有关更多详细信息，请查看该`genericirq`部分。

此外，[Linux Device Drivers, Corbet, Rubini, Kroah-Hartman](https://rads.stackoverflow.com/amzn/click/com/0596005903)一书是一个极好的信息来源。

# mongodb - 流星模板在引导模式对话框中渲染

> ID：15397913
> 
> 赞同：2
> 
> 时间：2013-03-13T22:40:26.050
> 
> 标签：mongodb, twitter-bootstrap, meteor

当我试图显示从 Bootstrap 模态对话框中的集合中获取的值时，我遇到了这个问题。

这是客户端javascript的代码：

```
Template.Modal_edit_client.edit_client_name = function() {
    var c = Clients.findOne({_id: Session.get("current_editing")});
    return c.name;
}; 
```

这是模板：

```
<template name="Modal_edit_client">
    <div id="Modal_edit_client" class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Editar cliente</h3>
        </div>
        <div class="modal-body">
            <form id="edit_client" action="">
                <fieldset>
                    <input id="edit_client_name" placeholder="Nombre y apellido" type="text" value="{{edit_client_name}}">
                    {{edit_client_name}}
                </fieldset>
            </form>
        </div>
        <div class="modal-footer">
            <a id="edit_client_cancel" href="#" class="btn">Cancelar</a>
            <a id="edit_client_save" href="#" class="btn btn-primary">Guardar</a>
        </div>
    </div>
</template> 
```

该页面未呈现，这是显示控制台的内容：

```
Uncaught TypeError: Cannot read property 'name' of undefined 
Exception from Meteor.flush: TypeError: Cannot call method 'firstNode' of undefined
    at Object.Spark.renderToRange (http://localhost:3000/packages/spark/spark.js?ba288278f8e36e3529187cea4590001f50ef0f95:545:25)
    at http://localhost:3000/packages/spark/spark.js?ba288278f8e36e3529187cea4590001f50ef0f95:860:13
    at http://localhost:3000/packages/deps/deps-utils.js?0c00e493224f891c3d6c82a23693ba55e0f47611:78:31
    at _.extend.run (http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:19:20)
    at rerun (http://localhost:3000/packages/deps/deps-utils.js?0c00e493224f891c3d6c82a23693ba55e0f47611:78:11)
    at http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:71:15
    at Array.forEach (native)
    at Function._.each._.forEach (http://localhost:3000/packages/underscore/underscore.js?017a0dea6ebb07eec57a1541a0fd524665e769bd:79:11)
    at http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:69:13
    at Array.forEach (native) logging.js:30
Exception from Meteor.flush: TypeError: Cannot call method 'firstNode' of undefined
    at Object.Spark.renderToRange (http://localhost:3000/packages/spark/spark.js?ba288278f8e36e3529187cea4590001f50ef0f95:545:25)
    at http://localhost:3000/packages/spark/spark.js?ba288278f8e36e3529187cea4590001f50ef0f95:860:13
    at http://localhost:3000/packages/deps/deps-utils.js?0c00e493224f891c3d6c82a23693ba55e0f47611:78:31
    at _.extend.run (http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:19:20)
    at rerun (http://localhost:3000/packages/deps/deps-utils.js?0c00e493224f891c3d6c82a23693ba55e0f47611:78:11)
    at http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:71:15
    at Array.forEach (native)
    at Function._.each._.forEach (http://localhost:3000/packages/underscore/underscore.js?017a0dea6ebb07eec57a1541a0fd524665e769bd:79:11)
    at http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:69:13
    at Array.forEach (native) logging.js:30
Exception from Meteor.flush: TypeError: Cannot call method 'firstNode' of undefined
    at Object.Spark.renderToRange (http://localhost:3000/packages/spark/spark.js?ba288278f8e36e3529187cea4590001f50ef0f95:545:25)
    at http://localhost:3000/packages/spark/spark.js?ba288278f8e36e3529187cea4590001f50ef0f95:860:13
    at http://localhost:3000/packages/deps/deps-utils.js?0c00e493224f891c3d6c82a23693ba55e0f47611:78:31
    at _.extend.run (http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:19:20)
    at rerun (http://localhost:3000/packages/deps/deps-utils.js?0c00e493224f891c3d6c82a23693ba55e0f47611:78:11)
    at http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:71:15
    at Array.forEach (native)
    at Function._.each._.forEach (http://localhost:3000/packages/underscore/underscore.js?017a0dea6ebb07eec57a1541a0fd524665e769bd:79:11)
    at http://localhost:3000/packages/deps/deps.js?d804638a4633c2f6488827923ba5fbd00f07d518:69:13
    at Array.forEach (native) 
```

我认为问题显示在第一行，`Uncaught TypeError: Cannot read property 'name' of undefined`. 有没有办法等到 `c.name !== undefined`AMD 渲染模板之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:17:44.793

当流星第一次在浏览器上加载时，它的集合中没有来自服务器的任何数据，但模板仍然会呈现。与未设置会话一样。因此，您需要在加载时处理案例（在尝试阅读之前检查是否有记录`name`

```
Template.Modal_edit_client.edit_client_name = function() {
    var c = Clients.findOne({_id: Session.get("current_editing")});
    if(c) return c.name;
}; 
```

# java - Bean 验证 - 在第一个错误时停止验证

> ID：15397931
> 
> 赞同：5
> 
> 时间：2013-03-13T22:41:32.760
> 
> 标签：java, bean-validation

我想知道是否可以在一个验证器失败时停止执行其他验证器？

我有一些豆子，像这样注释

```
import org.hibernate.validator.constraints.*;

/*...*/

@NotBlank(message = SignupForm.NOT_BLANK_MESSAGE)
@Email(message = SignupForm.EMAIL_MESSAGE)
private String email;

@NotBlank(message = SignupForm.NOT_BLANK_MESSAGE)
@Length(min = 6, message = SignupForm.PASSWORD_LENGTH_TOO_SHORT_MESSAGE)
private String password; 
```

这是我的 JSP

```
<form:label path="email"><s:message code="email" /></form:label>
<form:errors path="email" element="div" class="text-error"/>
<form:input path="email" class="input-block-level" placeholder="Email address" />

<form:label path="email2"><s:message code="repeat_email" /></form:label>
<form:errors path="email2" element="div" class="text-error"/>
<form:input path="email2" class="input-block-level" placeholder="Email address" />

<form:label path="password"><s:message code="password" /></form:label>
<form:errors path="password" element="div" class="text-error"/>
<form:password path="password" class="input-block-level" placeholder="Password" />

<form:label path="password2"><s:message code="repeat_password" /> </form:label>
<form:errors path="password2" element="div" class="text-error"/>
<form:password path="password2" class="input-block-level" placeholder="Password" /> 
```

现在 - 在我的页面上，当我尝试提交空表单时，我得到

```
E-mail
The value may not be empty! 
```

和

```
Password
Password must be at least 6 characters long
The value may not be empty! 
```

对于`password`字段，我从两个验证器中都收到错误 - 这是非常不可取的。如果是`email`字段，我知道空字符串是有效的电子邮件地址（？！），这就是为什么我当时只收到一条消息。

那么是否可以按指定的顺序运行验证并在第一次失败后停止处理或仅获得第一条消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-17T23:41:03.317

出于文档的考虑，这实际上适用于那些尝试使用 Validator API 手动验证其 bean 并且喜欢在第一次失败时停止的人，无论该特定字段定义了多少验证（并且可能失败）。

根据 Hardy 提到的内容，当将组分配给每个验证并定义 @GroupSequence 时，在验证时，验证将在第一个失败的组处停止。

这是验证分组的一个很好的例子[https://www.baeldung.com/javax-validation-groups](https://www.baeldung.com/javax-validation-groups)

*   **只需确保将 bean 的类本身作为 @GroupSequence 中的最后一个组**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:21:25.737

Bean Validation 规范定义了组序列来定义有序的验证。这个想法是，您将为*密码*和*电子邮件*定义一个序列，然后当您验证值时，您需要将正确的组序列传递给验证器。但是，我自己不知道如何在 JSF 中指定/定位正确的组。

为了更具体地解决您的问题，您可以使用单个*@Pattern*约束来表达您的约束，或者编写自定义*@Password*约束。在后一种情况下，您可以利用约束组合和*@ReportAsSingleViolation*。

# android - 如何在不重叠或交叉淡化的情况下淡化图像？

> ID：15397933
> 
> 赞同：1
> 
> 时间：2013-03-13T22:41:46.320
> 
> 标签：android, image, fadein, fadeout, imageswitcher

在我的应用程序中使用 ImageSwitcher，但我不希望图像交叉淡入淡出。我想显示一个图像，然后“淡出”为黑色并与另一张图像“淡入”。但由于某种原因，它不断交叉淡化这两个图像。如果有人可以提供帮助，我将不胜感激。

Activity_intro.java

```
public class IntroActivity extends Activity implements ViewFactory {

    private static final String TAG = "IntroActivity";

    private final int[] images = { R.drawable.wheelpaper1, R.drawable.wheelpaper2};
    private int index = 0;
    private final int interval = 4000;
    private boolean isRunning = true;

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.activity_intro);

        startAnimatedBackground();  

    }

    private void startAnimatedBackground() {
        Animation aniIn = AnimationUtils.loadAnimation(this,
                android.R.anim.fade_in);
        aniIn.setDuration(1500);
        Animation aniOut = AnimationUtils.loadAnimation(this,
                android.R.anim.fade_out);
        aniOut.setDuration(1500);

        final ImageSwitcher imageSwitcher = (ImageSwitcher) findViewById(R.id.imageSwitcher1);
        imageSwitcher.setInAnimation(aniIn);
        imageSwitcher.setOutAnimation(aniOut);
        imageSwitcher.setFactory(this);
        imageSwitcher.setImageResource(images[index]);

        final Handler handler = new Handler();
        Runnable runnable = new Runnable() {

            @Override
            public void run() {
                if (isRunning) {
                    index++;
                    index = index % images.length;
                    Log.d("Intro Screen", "Change Image " + index);
                    imageSwitcher.setImageResource(images[index]);
                    handler.postDelayed(this, interval);
                }
            }
        };
        handler.postDelayed(runnable, interval);

    }

    @Override
    public View makeView() {
        ImageView imageView = new ImageView(this);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new ImageSwitcher.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        return imageView;
    }

    @Override
    public void finish() {
        isRunning = false;
        super.finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:58:04.317

那么这里有一个建议。

我总是发现查找源代码会有所帮助，例如，请参见[此处。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/widget/ImageSwitcher.java)

您会看到图像切换器实际上只是一个特定于 imageView 的视图翻转器。现在，不会为您想要的方法公开任何方法 - 它不是一个非常复杂的类。

所以你可以从它继承来衍生出你自己的——创建一个自定义视图并在你的 xml 中使用它。我会建议类似：

```
public class CustomImageSwitcher extends ImageSwitcher {

private Queue<Runnable> mAfterAnimationQueue = new LinkedList<Runnable>();

private final GradientDrawable blackDrawable; // just incase you want a gradient too...

public CustomImageSwitcher(Context context) {
    super(context);
    blackDrawable = new GradientDrawable(Orientation.BOTTOM_TOP, new int[] {
            getResources().getColor(android.R.color.black),
            getResources().getColor(android.R.color.black) }); 
}

public CustomImageSwitcher(Context context, AttributeSet attrs) {
    super(context, attrs);
    blackDrawable = new GradientDrawable(Orientation.BOTTOM_TOP,
            new int[] { getResources().getColor(android.R.color.black) });
}

public void postAfterAnim(Runnable runnable) {
    mAfterAnimationQueue.add(runnable);
}

protected void onFadeToBlackEnded() {
    while (!mAfterAnimationQueue.isEmpty()) {
        mAfterAnimationQueue.remove().run();
    }
}

private Animation.AnimationListener biDirectionalCustomListener = new AnimationListener() {

    @Override
    public void onAnimationEnd(Animation animation) {
        onFadeToBlackEnded();
        animation.reset();
    }

    @Override
    public void onAnimationRepeat(Animation animation) {
        ; // we only really want the end event!
    }

    @Override
    public void onAnimationStart(Animation animation) {
        ;
    }
};

// THIS ISN'T A COMPLETED EXAMPLE AS THIS WOULD UNSET ANY PREVIOUS ANIMATION
// LISTENERS
@Override
public void setInAnimation(Animation inAnimation) {
    inAnimation.setAnimationListener(biDirectionalCustomListener);
    super.setInAnimation(inAnimation);
}

// THIS ISN'T A COMPLETED EXAMPLE AS THIS WOULD UNSET ANY PREVIOUS ANIMATION
// LISTENERS
@Override
public void setOutAnimation(Animation outAnimation) {
    outAnimation.setAnimationListener(biDirectionalCustomListener);
    super.setOutAnimation(outAnimation);
}

// override the image switcher's methods

@Override
public void setImageResource(final int resid) {
    super.setImageDrawable(blackDrawable);
    postAfterAnim(new Runnable() {
        @Override
        public void run() {
            CustomImageSwitcher.super.setImageResource(resid);
        }
    });
}

// obviously override more if you want.... just change the method name

} 
```

这有点像深夜的草图——一些问题是我们没有正确代理进来的动画（你应该或者至少让它很清楚它将被取消设置）。

但粗略的想法是，您真正想要的是在视图翻转器中有一个中间视图，它包含一个简单的黑色可绘制对象并且是一个中间阶段。希望它是不言自明的。

另一方面，在您的示例中，您可能希望提取您为每个方法创建的一些对象并将它们作为字段，因为您将每次都使用它们 - 例如`Handler`。

最后一点，我真的*不*喜欢这样使用视图翻转器。如果你覆盖 onDraw 等，你可能会发现你可以用一个图像视图做所有事情，但这是另一个问题的开始，而不是这个问题的结束。

最良好的祝愿，希望这会有所帮助。

# python - 从文件生成字符串

> ID：15397936
> 
> 赞同：1
> 
> 时间：2013-03-13T22:41:55.260
> 
> 标签：python, string-parsing, file-read

这是[Project Euler Problem 22](http://projecteuler.net/problem=22 "欧拉计划问题 22")解决方案的开始。我有一个他们的文本文件的示例版本，我试图一次生成一个名称。 [这](http://docs.python.org/3.3/library/stdtypes.html#string-methods "字符串方法")是字符串方法文档的链接。我为该任务编写了以下代码：

```
def name_gen():
    with open('C:/python/namessample.txt') as nameFile:
        nameGenerator = (i.strip('"').split(sep='","') for i in nameFile)
        for name in nameGenerator:
            yield type(name), type(nameGenerator), type(nameFile), name

for i in name_gen():
    print(i) 
```

这是代码输出：

```
(<class 'list'>, <class 'generator'>, <class '_io.TextIOWrapper'>, ['DOUGLASS', 'CORDELL', 'OSWALDO', 'ELLSWORTH', 'VIRGILIO', 'TONEY', 'NATHANAEL', 'DEL', 'BENEDICT', 'MOSE', 'JOHNSON', 'ISREAL', 'GARRET', 'FAUSTO', 'ASA', 'ARLEN', 'ZACK', 'WARNER', 'MODESTO', 'FRANCESCO', 'MANUAL', 'GAYLORD', 'GASTON', 'FILIBERTO', 'DEANGELO', 'MICHALE', 'GRANVILLE', 'WES', 'MALIK', 'ZACKARY', 'TUAN', 'ELDRIDGE', 'CRISTOPHER', 'CORTEZ', 'ANTIONE', 'MALCOM', 'LONG', 'KOREY', 'JOSPEH', 'COLTON', 'WAYLON', 'VON', 'HOSEA', 'SHAD', 'SANTO', 'RUDOLF', 'ROLF', 'REY', 'RENALDO', 'MARCELLUS', 'LUCIUS', 'KRISTOFER', 'BOYCE', 'BENTON', 'HAYDEN', 'HARLAND', 'ARNOLDO', 'RUEBEN', 'LEANDRO', 'KRAIG', 'JERRELL', 'JEROMY', 'HOBERT', 'CEDRICK', 'ARLIE', 'WINFORD', 'WALLY', 'LUIGI', 'KENETH', 'JACINTO', 'GRAIG', 'FRANKLYN', 'EDMUNDO', 'SID', 'PORTER', 'LEIF', 'JERAMY', 'BUCK', 'WILLIAN', 'VINCENZO', 'SHON', 'LYNWOOD', 'JERE', 'HAI', 'ELDEN', 'DORSEY', 'DARELL', 'BRODERICK', 'ALONSO']) 
```

nameFile 和 nameGenerator 的类型似乎是正确的，但 name 最好一次是一个字符串，而不是字符串列表。我猜想 name 是一个列表的原因是因为 .split 返回一个列表，但是我想不出另一种方法来分隔文件中的名称。我还使用 .strip 删除了前导引号和尾随引号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:46:05.867

该文件包含*一行*，因此实际上无需遍历该文件。只需循环拆分列表：

```
def name_gen():
    with open('C:/python/namessample.txt') as nameFile:
        for name in nameFile.read().split(','):
            yield name.strip('"') 
```

或者只返回整个列表；无论如何，您已经将其读入内存：

```
def name_gen():
    with open('C:/python/namessample.txt') as nameFile:
        return [name.strip('"') for name in nameFile.read().split(',')] 
```

如果您确实有多行，每行包含多个名称，则可以嵌套循环：

```
def name_gen():
    with open('C:/python/namessample.txt') as nameFile:
        for line in nameFile:
            for name in line.rstrip('\n').split(','):
                yield name.strip('"') 
```

# ruby-on-rails - Rails：ActiveRecord 关联保存问题

> ID：15397937
> 
> 赞同：0
> 
> 时间：2013-03-13T22:41:57.450
> 
> 标签：ruby-on-rails, database, associations, rails-activerecord, legacy-code

在保存 ActiveRecord 关联时遇到问题，需要您的帮助 :)

我需要将文章合并功能添加到遗留代码。

预计将按以下方式工作：

1.  将“源”文章的文本合并到“目标”文章。
2.  检查“来源”的评论，如果有的话，将它们重新关联到“目标”。
3.  销毁“源”文章。注释应保留并与“目标”相关联。

这是我的文章模型代码（为便于阅读而减少）。

```
class Article < Content

  before_destroy :reload_associated_comments

  has_many :comments,   :dependent => :destroy, :order => "created_at ASC" do

  def reload_associated_comments
    unless self.comments.empty?
      article = Article.find(@merge_with)
      self.comments.each do |comment|
        comment.article = article
        article.save!
      end
    end
  end

  def merge_with(id)
    @merge_with = id
    article = Article.find(@merge_with)
    if !article.nil?
      text = article.body + body
      article.body = text
      article.save!
      self.destroy
      return article
    end
    nil
  end
end 
```

这是评论模型（也减少了）：

```
class Comment < Feedback
  belongs_to :article
end 
```

问题是当我从**before_destroy**钩子返回时，没有任何东西保存到数据库中。我通过以下方式进行检查：

```
eval Article.find(target_article_id).comments 
```

保存不会引发异常。我在这里缺少什么？

提前致谢！

**这对我有用**

```
 def merge_with(id)
    @merge_with = id
    article = Article.find(@merge_with)
    unless article.nil?
      text = article.body + body
      article.body = text
      article.save!
      reload_associated_comments
      self.reload
      self.destroy
      return article
    end
    nil
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:10:59.420

`before_destroy`实际上，Rails 在调用文章的回调之前会销毁每条评论。可悲的是，rails 就是这样工作的。更改此行为将意味着破坏旧版应用程序。您可以在此处找到有关此问题的更多信息：[https ://github.com/rails/rails/issues/670](https://github.com/rails/rails/issues/670)

在我看来，最好的解决方案是覆盖该`destroy`方法并摆脱回调：

```
class Article < Content

  def destroy
    reload_associated_comments
    super
  end

  has_many :comments,   :dependent => :destroy, :order => "created_at ASC" do

  def reload_associated_comments
    unless self.comments.empty?
      article = Article.find(@merge_with)
      self.comments.each do |comment|
        comment.article = article
        comment.save!
      end
    end
  end

  def merge_with(id)
    @merge_with = id
    article = Article.find(@merge_with)
    if !article.nil?
      text = article.body + body
      article.body = text
      article.save!
      self.destroy
      return article
    end
    nil
  end
end 
```

另外，正如@Zippie 提到的，您应该打电话`comment.save!`而不是`article.save!`

希望能帮助到你！

# python - 通过 matplotlib 中的绘图输入

> ID：15397943
> 
> 赞同：0
> 
> 时间：2013-03-13T22:42:18.420
> 
> 标签：python, input, numpy, matplotlib, scipy

我写了一些代码，开头有一些布尔语句，根据哪些是真/假，不同的问题得到解决，并创建不同的图（目前使用 imshow 和一些动画）。

我将如何运行代码，出现某种交互式窗口（以绘图或其他方式），您可以选择其中哪些是真或假？

其次，我也有一些需要的控制台输入，如果我可以双击并在某种 gui 中也有这个，那就太酷了。我的编程知识主要是基于定义和原始计算，我对课程不是很了解，但我都是为了学习。

目前我对这些部分进行了硬编码，并希望能够使用 GUI 来更改它们。

```
animate = True
parta   = False                   # This chooses which problem we solve
partb   = True               
if parta and partb == True:
    print 'Code is not set up to run both a and be simultaneously'
    quit() 
```

我还有一堆输入，它们以以下样式存储到变量中。

```
xy_values = raw_input('Enter xmin,ymin separated by a comma or [Enter] for 0,0: ')
if xy_values == '':
    a = 0\. ; c = 0.
else:
    a,c = [float(x) for x in xy_values.split(",")] 
```

我希望只出现一个窗口，我可以让用户输入所有这些数据，然后让我的程序的其余部分基于该数据运行，如果可能的话，允许重新运行和重新更改数据（但是最后一块不是必需的）。我已经进行了大约一个小时的挖掘，但没有发现任何真正有意义或对我有帮助的东西。[主要是我一直在使用 matplotlib 查看绘图窗口上的按钮]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:52:15.163

这在 matplotlib 中称为小部件：

[http://matplotlib.org/api/widgets_api.html](http://matplotlib.org/api/widgets_api.html)

这里有一些例子：

[http://matplotlib.org/examples/widgets/index.html](http://matplotlib.org/examples/widgets/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:52:55.850

如果您正在寻找用户界面，我建议您使用 Tkinter：它非常简单，您可以在其中嵌入 matlplotlib 图形。

示例：[在 tkinter 中运行 matplotlib](https://stackoverflow.com/questions/3845407/running-matplotlib-in-tkinter)

# ios - 顺序 CAKeyFrameAnimations 在屏幕上消失

> ID：15397949
> 
> 赞同：1
> 
> 时间：2013-03-13T22:42:40.750
> 
> 标签：ios, core-animation, caanimation, cakeyframeanimation, cashapelayer

编辑：附加代码`CAAnimationGroup`，动画按顺序绘制，但我仍然遇到`firstAnimation`一旦开始就消失的问题，`secondAnimation`我在[文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAAnimationGroup_class/Introduction/Introduction.html)中注意到`CAAnimationGroup`它说：

> Animations 属性中动画的 removedOnCompletion 属性当前被忽略。

**我该如何解决这个问题？**

* * *

我正在尝试为`CAKeyFrameAnimation`同一图层上的多个对象设置动画，以便`firstAnimation`完成后，它绘制的路径在启动时仍保留在屏幕上，`secondAnimation`因此最终结果是由屏幕上两个对象的路径共同制作的图片。

目前，如果我将两个动画对象（按顺序）放在同一个方法中并调用它，则只会`secondAnimation`在屏幕上绘制。如果我将它们分开并按顺序调用它们，`firstAnimation`被绘制到屏幕上，然后在`secondAnimation`开始时消失。就其本身而言，动画完全按预期工作。

我已经尝试四处寻找`CAAnimationGroup`示例，因为它*似乎*是我正在寻找的东西，但是从我看到的几个示例中，我不太清楚发生了什么，或者如何产生我正在寻找的效果因为，谁能告诉我如何按顺序绘制两个动画并将结果保留在屏幕上？

这是我的图层、我的两个动画和我的组：

```
CAShapeLayer *pathLayer = [CAShapeLayer layer];
pathLayer.frame = self.animationLayer.bounds;
pathLayer.bounds = pathRect;
pathLayer.geometryFlipped = YES;
pathLayer.strokeColor = [[UIColor blackColor] CGColor];
pathLayer.fillColor = nil;
pathLayer.lineWidth = 10.0f;
pathLayer.lineJoin = kCALineJoinBevel;

CAKeyframeAnimation *firstAnimation = [CAKeyframeAnimation animationWithKeyPath:@"path"];
firstAnimation.beginTime = 0.0;
firstAnimation.duration = 4.0;
firstAnimation.removedOnCompletion = NO;   //Is being ignored by CAAnimationGroup
firstAnimation.fillMode = kCAFillModeForwards;
firstAnimation.values = [NSArray arrayWithObjects:
                         (id)path0.CGPath,(id)path1.CGPath,
                         (id)path2.CGPath,(id)path3.CGPath,
                         (id)path4.CGPath,(id)path5.CGPath,nil];
firstAnimation.keyTimes = [NSArray arrayWithObjects: 
                         [NSNumber numberWithFloat:0.0],
                         [NSNumber numberWithFloat:0.2],
                         [NSNumber numberWithFloat:0.21],
                         [NSNumber numberWithFloat:0.22],
                         [NSNumber numberWithFloat:0.63],
                         [NSNumber numberWithFloat:1.0], nil];

CAKeyframeAnimation *secondAnimation = [CAKeyframeAnimation animationWithKeyPath:@"path"];
secondAnimation.beginTime = 4.0; //This should come directly after firstAnimation
secondAnimation.duration = 3.0;
secondAnimation.removedOnCompletion = NO;   //Is being ignored by CAAnimationGroup
secondAnimation.fillMode = kCAFillModeForwards;
secondAnimation.values = [NSArray arrayWithObjects:
                          (id)path00.CGPath,(id)path01.CGPath,
                          (id)path02.CGPath,nil];
secondAnimation.keyTimes = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.0],
                          [NSNumber numberWithFloat:0.8],
                          [NSNumber numberWithFloat:1.0],nil];

CAAnimationGroup *group = [CAAnimationGroup animation];
group.animations = [NSArray arrayWithObjects:firstAnimation,secondAnimation,nil];
group.duration = 7.0;  //The total time of the animations, don't know if redundant
group.delegate = self;

[self.pathLayer addAnimation:group forKey:@"path"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:59:25.083

好的，所以我找到了一个尝试性的技巧来解决我的问题，Till 的评论非常适合纯序列化，但动画不断消失，所以这对我的情况根本不起作用。

我使用的技巧是为*每个动画创建一个**单独*的层，而不是将两个动画放在一个实例上，然后根据时间控制器为两个动画指定and以获得 1）正确的时间顺序动画之间和2）每个动画中的时间是正确的。*`CAShapeLayer``duration``keyTime`*

 *通过使用单独的图层，`removedOnComplete = NO`由于我没有使用`CAAnimationGroup`，所以我的动画是持久的，这是我在我的应用程序中真正需要的东西。

不过，我不会立即接受这个答案，因为这似乎是一种低调的方式来做一些在 iOS 上应该更直观的事情。*

# c# - 如何找到 .Any() 的反义词

> ID：15397950
> 
> 赞同：5
> 
> 时间：2013-03-13T22:42:45.850
> 
> 标签：c#, .net, linq

我的大脑在我需要设置的查询上失败了。

我有一个具有两个（相关）属性的 Cat 对象：

```
public virtual ICollection<Ribbon> Ribbons { get; set; }
public virtual ICollection<Trophy> Trophies { get; set; } 
```

Ribbon 和 Trophy 都有一个名为“UmbracoActivityId”的整数属性。ribbon 和奖杯彼此之间没有直接关系，但它们都与一只猫和一个 UmbracoActivity 相关。猫在 UmbracoActivity 中完成的每个“步骤”都会获得一条丝带，完成所有步骤后会获得一个奖杯。他们是非常有竞争力的猫:)

我需要做的是计算已经开始 UmbracoActivity 但还没有完成所有步骤（没有收到奖杯）的猫。

**简而言之：**找到所有不同的丝带，其中拥有丝带的猫没有奖杯，其 UmbracoActivityId 与丝带的 UmbracoActivityId 相同。

**我在代码中得到了什么：**

```
var ribbons = db.Ribbons
   .Where(ribbon => db.Cats.Find(ribbon.CatId)
       .Trophies.Any(trophy => trophy.UmbracoActivityId == ribbon.UmbracoActivityId)); 
```

我快接近了，但是如果功能区确实有一个具有相同 UmbracoActivityId 的奖杯，那么 .Any() 语句是正确的。我需要相反的。将“==”切换为“!=”是很容易的，但在这种情况下，一只猫可能拥有许多具有不同 UmbracoActivityId 的奖杯。

我需要在某处反向声明以搜索相反的内容，但我不确定在哪里执行此操作:(

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T22:44:50.403

`.Any(x == y)`->`.All(x != y)`

如果有任何匹配，第一个成功。否则失败。

如果有任何匹配，则第二个失败。否则就成功了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T22:44:57.867

只需使用否定 - 即`Where(ribbon => !db...Any(...))`（注意添加的`!`）。

**如果任何**奖杯共享相同的 UmbracoActivityId，则猫将**不**包括在内。

```
var ribbons = db.Ribbons
   .Where(ribbon => !db.Cats.Find(ribbon.CatId)
       .Trophies.Any(trophy => trophy.UmbracoActivityId == ribbon.UmbracoActivityId)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:54:22.050

```
var ribbons = db.Ribbons
   .Where(ribbon => db.Cats.Find(ribbon.CatId)
       .Trophies.All(trophy => trophy.UmbracoActivityId != ribbon.UmbracoActivityId)); 
```

我有几种方法可以做到这一点，但是如果没有猫奖杯等于ribbon.UmbracoActivity，这将返回true。

我想你也可以使用 .Exist 和 "==" 。

# sql - SQL Server 删除具有重复信息的条目

> ID：15397953
> 
> 赞同：1
> 
> 时间：2013-03-13T22:42:57.440
> 
> 标签：sql, sql-server

我需要生成一份报告，以识别使用与其他客户相同的身份证明的任何客户。

经过一系列其他操作后，我有一个表格，其中包含客户姓名、客户编号以及他们在注册时使用的身份证明编号，按 ID 号分组，任何组只剩下一个条目出去。

问题在于，似乎大量客户在他们的名下拥有多个帐户，这些需要被忽略，除非其他客户也使​​用相同的 ID 号，在这种情况下，需要保留所有具有该 ID 号的条目。

例如下面，我想删除条目 1-3，因为它显然是同一个人，但保留 4 和 5，因为 6 不匹配。

```
 ID # | Name    | customer number   
   1 | 1111 | April   | 321  
   2 | 1111 | April   | 432  
   3 | 1111 | April   | 431  
   4 | 2222 | Bob     | 987  
   5 | 2222 | Bob     | 454  
   6 | 2222 | Charles | 159 
```

有什么好的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:49:36.670

也许使用`EXISTS`：

```
SELECT ID,Name,[customer number]  
FROM dbo.Customer c1
WHERE EXISTS
(
    SELECT 1 FROM dbo.Customer c2
    WHERE c2.ID = c1.ID 
    AND   c2.Name <> c1.Name
) 
```

请注意，这也将省略具有唯一 ID/名称的记录。如果要包括这些，则必须使用另一个`NOT EXISTS`：

```
SELECT ID,Name,[customer number]  
FROM dbo.Customer c1
WHERE EXISTS
(
    SELECT 1 FROM dbo.Customer c2
    WHERE c2.ID = c1.ID 
    AND   c2.Name <> c1.Name
)
OR NOT EXISTS
(
    SELECT 1 FROM dbo.Customer c2
    WHERE c2.ID = c1.ID 
    AND   c2.[customer number] <> c1.[customer number]
) 
```

（假设这`[customer number]`是标识符，因为您没有显示 pk 列名）

# php - 从不同的目录中获取 SESSIONS 和 COOKIES

> ID：15397954
> 
> 赞同：0
> 
> 时间：2013-03-13T22:43:01.670
> 
> 标签：php, session, cookies, session-cookies

例如; 我在 www 目录下有两个目录，如图所示
![在此处输入图像描述](../Images/cd469239457bc940bc2257cfd255d493.png)

如果我在其中定义了一个 cookie，例如 site1，我无法从 site2 目录访问 cookie。对于会话，这种情况是相同的。有什么方法可以从不同的目录访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:48:54.290

如果两个站点都是子域，可以使用 的 domain 参数[`setcookie`](http://php.net/manual/en/function.setcookie.php)。但是，如果它们是单独的站点，则您无法访问其他站点的 cookie 数据。Cookies 是**客户**端。

会话是服务器端的，但会话 ID 存储为 cookie，因此您面临同样的问题。您可以从 PHP 会话文件夹中读取会话数据，但您无法知道哪个会话适用于您当前的用户。

# php - KeyValuePairOfstringanyType，我该如何声明和格式化？

> ID：15397957
> 
> 赞同：1
> 
> 时间：2013-03-13T22:43:10.650
> 
> 标签：php, wsdl, dynamics-crm-2011, keyvaluepair

我在 php 中有一个从 WSDL 生成的数据对象。此数据对象中的一个变量名为“KeyValuePairOfstringanyType”类型`KeyValuePairOfstringanyType[]`

伟大的。我如何声明并为其赋值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:24:59.683

它应该只是一个带有单个键->值的 PHP 数组，并使用字符串作为键：

```
$someDataObject->KeyValuePairOfstringanyType = array("somekey"=>"some value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:58:55.363

# C＃

假设您正在创建一个插件（我们说的是 C# 代码，对吧）？

```
KeyValuePair<String, Object> general = new KeyValuePair<String, Object>();
KeyValuePair<String, Object> specific 
  = new KeyValuePair<String, Object>{ Key = "Konrad", Value = new Object() };
KeyValuePair<String, Object> typed 
  = new KeyValuePair<String, Object>{ Key = "Konrad", Value = "Viltersten" }; 
```

第一个创建一个空实例。另外两个有值。我放最后一个来举例说明*Object*实例几乎可以是任何东西。您没有被锁定到*Object*类。

*此外，如果您要拥有一个KeyValuePair*实例的数组（一组，一堆），建议的方法是使用以下方法。*Dictionary*实例由许多这样的对象组成。

```
Dictionary<String, Objet> pairs = new Dictionary<String, Object>();
pairs.Add("key", new Object()); 
```

# JS

假设您正在谈论 UI（即 JavaScript），则不存在等价物，因为 JS 并不是真正面向对象的*方式*。您可以执行以下操作。

```
var kindOfKeyValuePair = "beep";
kindOfKeyValuePair.key = "myKey";
kindOfKeyValuePair.value = "myValue"; 
```

但是，您也可以这样做（这与您使用强类型的真实编程语言的 C# 方式不同）。

```
var kindOfKeyValuePair = "beep";
kindOfKeyValuePair.notKey = "myKey";
kindOfKeyValuePair.hardlyAnyValue = "myValue"; 
```

# 其他

假设您希望在 CRM 中编写 PHP 代码，那将不会发生（除非您正在讨论使用由它提供支持的页面中的外部内容填充 IFRAME 组件）。

# javascript - 水平的 具有固定的第一个元素

> ID：15397959
> 
> 赞同：1
> 
> 时间：2013-03-13T22:43:26.653
> 
> 标签：我用jquery, jquery, javascript, jquery

我有一个`<ul/>`水平设置的，包含在 a`<div/>`中，因此当`<ul/>`溢出时，您可以滚动`<div/>`查看其余部分。它看起来像这样：

[jsFiddle](http://jsfiddle.net/V6m2q/1/)

![水平滚动 <ul/>](../Images/ad837468c98fb84a6f244460a3a5c178.png)

**HTML：**

```
<div>
    <ul>
        <li>HEADER</li>
        <li>Item1</li>
        <li>Item2</li>
        <!-- Additional items -->
    </ul>
</div> 
```

**CSS：**

```
div {
    white-space:nowrap; overflow-x:scroll; width:100%;}
ul {
    list-style-type:none; }
li {
    display:inline-block; } 
```

## 有没有办法`<ul/>`在滚动溢出时“修复”原位的第一个元素？

**当其余项目滚动时，第一个元素（带有 text `"HEADER"`）应保持原位。**我意识到可能没有“优雅”的解决方案。

我尝试仅将`"HEADER"`项目设置为 之外的单独元素`<ul/>`，但由于我将`<ul/>`宽度设置为`100%`，它会使整个`<ul/>`溢出浏览器窗口之外。

[我用jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")标记了这个问题，因为 a) 我已经在我的应用程序中使用[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，并且 b) 我认为元素有可能`$.clone()`并将其“修复”到位。这可能是答案，但我正在为具体的实现或是否有更简单的方法来实现这一点而苦苦挣扎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:07:47.873

根据您的小提琴，只需更改/添加以下 CSS：（[小提琴](http://jsfiddle.net/zrVPJ/)）

```
ul {
    list-style-type:none;
    margin-left: 85px;
}

li:first-child {
    position: fixed;
    margin-left: -85px;
    background-color: white;
} 
```

需要设置固定标题的背景，以便滚动`li`的 s 在其后面不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:58:29.707

这会很好，但很难移动第二个 li

```
li:first-child {
    position:fixed;
    width:80px;
    background-color:white; 
```

}

因此，如果可以将标头移到 ul 之外，这是一个更简单的解决方案：

```
<style type="text/css">
* {
    margin:0; padding:0;
}
div {
    width:100%;
    white-space:nowrap;
    overflow-x:scroll;
    border:1px solid blue;
}
ul {
    list-style-type:none;
    position:relative;
    left:100px;
}
li {
    border:1px solid black;
    display:inline-block;
    width:80px;
}
span {
    position:fixed;
    overflow:hidden;
    width:80px;
    background-color:white;
    z-index:10;
}
</style>

<span>HEADER</span>
<div>
    <ul>
        <li>HEADER</li>
        <li>Item1</li>
        <li>Item2</li>
        <li>Item3</li>
        <li>Item4</li>
        <li>Item5</li>
        <li>Item6</li>
        <li>Item7</li>
        <li>Item8</li>
        <li>Item9</li>
        <li>Item10</li>
        <li>Item11</li>
        <li>Item12</li>
        <li>Item13</li>
        <li>Item14</li>
        <li>Item15</li>
        <li>Item16</li>
        <li>Item17</li>
        <li>Item18</li>
        <li>Item19</li>
        <li>Item20</li>
        <li>Item21</li>
        <li>Item22</li>
        <li>Item23</li>
        <li>Item24</li>
        <li>Item25</li>
        <li>Item26</li>
        <li>Item27</li>
        <li>Item28</li>
        <li>Item29</li>
        <li>Item30</li>
        <li>Item31</li>
        <li>Item32</li>
        <li>Item33</li>
        <li>Item34</li>
        <li>Item35</li>
        <li>Item36</li>
        <li>Item37</li>
        <li>Item38</li>
        <li>Item39</li>
        <li>Item40</li>
        <li>Item41</li>
        <li>Item42</li>
        <li>Item43</li>
        <li>Item44</li>
        <li>Item45</li>
        <li>Item46</li>
        <li>Item47</li>
        <li>Item48</li>
        <li>Item49</li>
        <li>Item50</li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:57:18.223

我想玩 position : 固定了一段时间，所以这就是我想给你的，你显然需要更多地玩它。此外，您可以[在此处查看小提琴](http://jsfiddle.net/PCv4T/19/)。

```
<div class="full">
    <div class="topdiv">
        <ul>
            <li class="fix">HEADER</li>
            <li>Item1</li>
            <li>Item2</li>
            <li>Item3</li>
            <li>Item4</li>
            <!-- Additional items -->
        </ul>
    </div>
</div>

.full{
    display : block;
    float : left;
    width : 500px;
}
.topdiv {
    width : 200px;
    overflow : auto;
}
ul {
    width : 1000px;
}
li {
    display : block;
    float : left;
    left : 300px;
    margin-left : 50px;
    margin-top : 25px;
}
.fix {
    position : fixed;
    left : 0px;
    margin-left : 0px;
    margin-top : 0px;
} 
```

# mysql - Mule ESB 自行重启

> ID：15397962
> 
> 赞同：1
> 
> 时间：2013-03-13T22:43:29.013
> 
> 标签：mysql, memory-management, mule

我的 Mule 应用程序有问题。

我在 Amazon 微型实例上运行我的 Mule 应用程序，该应用程序开始在 mysql 数据库中插入大量数据，突然 mule 应用程序重新启动，将其留在日志中：

```
JVM exited unexpectedly.
JVM exited in response to signal SIGKILL 
9
...
...
...
Startup failed: Timed out waiting for signal from JVM.
JVM did not exit on request, terminated
JVM exited on its own while waiting to kill the application.
JVM exited in response to signal SIGKILL 
9
...
...
... 
```

会不会是因为 Micro Instance 提供的资源不足而导致 CPU 数量的内存问题？如果没有，什么是好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T12:51:43.660

可能启动太慢了。尝试在 conf/wrapper.conf 更新超时：

```
# Increase the default startup timeout so that the JVM has enough
# time to download the required jars on a slow connection
wrapper.startup.timeout=1200 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-23T15:45:02.393

Mule 进程将由`wrapper`也监视进程的进程控制。可以有不同的情况。例如，`JVM`在高负载下将不会响应`wrapper`已发送的 ping。默认配置将杀死 ( `kill -9`) Mule 进程并重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T19:33:28.200

我收到了类似的日志错误。原因是：

*   不正确的 jvm 系统属性：-M ...

[https://docs.mulesoft.com/mule-runtime/4.3/mule-app-properties-system](https://docs.mulesoft.com/mule-runtime/4.3/mule-app-properties-system)

*   ram 小于 512m
*   ram 超过硬件限制
*   java ram：xmx xms 不正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-03T23:53:51.007

这绝对是内存问题。您没有足够的内存。

由于您的内存有限 - 优化您的解决方案以使用流而不是将值保存在内存/变量中。

# html - 如何让表格单元格具有相同的高度

> ID：15397966
> 
> 赞同：7
> 
> 时间：2013-03-13T22:43:46.373
> 
> 标签：html, css, css-tables

如何使表格单元格的高度相同？查看[http://thomaswd.com/organizer/dashboard](http://thomaswd.com/organizer/dashboard)并单击日历。您将看到表格单元格具有不同的高度。我的表格顶部有 2 行固定高度，我的表格高度为 100%。我不想要指定的像素高度，因为在调整浏览器大小时这将不起作用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T23:13:36.077

看起来您想要的是最高单元格的高度在整个行中传播。

您可以使用 javascript 执行此操作：

```
var eq_el_height = function(els, min_or_max) {

    els.each(function() {
        $(this).height('auto');
    });

    var m = $(els[0]).height();

    els.each(function() {
        var h = $(this).height();

        if (min_or_max === "max") {
            m = h > m ? h : m;
        } else {
            m = h < m ? h : m;
        }
    });

    els.each(function() {
        $(this).height(m);
    });
}; 
```

将表格单元格传递给这样的函数：

```
 $(#fixedheight tr').each(function(){
            eq_el_height($(this).find('td'), "max");
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T23:19:20.667

为了使表格单元格具有相同的高度，我使用了谷歌浏览器并通过右键单击日期并选择“检查元素”来检查日历上的某一天。然后我改变了“日历日”的样式，如下所示：

```
/* shared */
td.calendar-day, td.calendar-day-np {  
    border-bottom:1px solid #999; 
    border-right:1px solid #999; 
    height: 10%;
} 
```

只需在 style.css 中指定您想要的高度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T14:26:38.183

另一种解决方案可能是：

```
var maxHeight = null;
$('#tableId tr').each(function() {
    var thisHeight = $(this).height();
    if(maxHeight == null || thisHeight > maxHeight) maxHeight = thisHeight;
}).height(maxHeight); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T22:47:34.753

来自：[如何强制表格中的所有行具有相同的高度](https://stackoverflow.com/questions/5671098/how-can-i-force-all-rows-in-a-table-to-have-the-same-height)

```
<html>
    <head>
        <style type="text/css">
            #fixedheight {
                table-layout: fixed;
            }

            #fixedheight td {
                width: 25%;
            }

            #fixedheight td div {
                height: 20px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <table id="fixedheight">
            <tbody>
            <tr>
                <td><div>content</div></td>
                <td><div>lots of content that should spend way more time wrapping down than it should if I were just to have a short bit of stuff, that would be invaded by zombies and the such</div></td>
                <td><div>more content</div></td>
                <td><div>small content</div></td>
                <td><div>enough already</div></td>
            </tr>
            </tbody>
        </table>
    </body>
</html> 
```

# image - 如何使用 html5 检测网络摄像头？

> ID：15397971
> 
> 赞同：1
> 
> 时间：2013-03-13T22:44:08.697
> 
> 标签：image, html, canvas, webcam, capture

我正在使用这个想法，[html5 图像上传](https://developer.mozilla.org/en-US/docs/WebRTC/Taking_webcam_photos)，用 html5 和网络摄像头捕获图像。

我遇到的问题是网络摄像头只被检测到几次。

如果我刷新页面，我可能不会收到 ALLOW 消息，并且即使该`getUserMedia`方法正在运行，画布也是空白的。

有没有办法请求相机初始化/检测，即使浏览器需要再次要求用户允许网络摄像头？

关于这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:45:06.657

看看 Addy Osmani 的 getUserMedia 垫片：[https ://github.com/addyosmani/getUserMedia.js](https://github.com/addyosmani/getUserMedia.js)

源代码可用。

他使用了一个回调，该回调在网络摄像头成功 ALLOW-ed 并且正在流式传输时触发。你可以看看他是怎么做到的。

还有一个在错误时触发的回调。如果出现计时问题，您可以使用此回调尝试重做。

他还为不支持 getUserMedia 的浏览器（如 IE、Safari、Android 和 Blackberry）提供 Flash 回退。

我读到 IE 实验性地支持 getUserMedia...使用 navigator.msGetUserMedia 进行测试 - 并在以下位置查看 API：[http ://html5labs.interoperabilitybridges.com/prototypes/media-capture-api-(2nd-updated)/media-捕获 api-（第二次更新）/信息](http://html5labs.interoperabilitybridges.com/prototypes/media-capture-api-(2nd-updated)/media-capture-api-(2nd-update)/info)

# c++ - C++ 程序不从文件中读取字符

> ID：15397980
> 
> 赞同：0
> 
> 时间：2013-03-13T22:44:32.190
> 
> 标签：c++, arrays, file, loops

所以，我试图让程序读取一个文件并打印出晴天、阴天和雨天的数量。它只是一直打印 0。我错过了什么？我尝试将文件从 .dat 更改为 .txt，但结果仍然相同。这是数据文件中的内容：

RRCSSSCSCRRRCSSSCSSRSCCRCRRCSS SSSCCSSSCCSSSCCSSSCRCRCCSSSSSS SSSSCSSSCSSSCRRCCCSSSSSCSSSSCS

```
 #include <iostream> 
    #include <fstream>
    #include <iomanip>
    #include <string>  

    using namespace std;

    int main()

    {  

    const int MONTH = 3;

    const int DAY = 30;

    char name[MONTH][DAY] = {"June", "July", "August"};
    char rain = 'R'; 
    char sun = 'S';    
    char cloud = 'C';    
    char letter;    
    int day = 0;    
    int count = 0;    
    int rainy = 0;    
    int cloudy = 0;
    int sunny = 0;          

    ifstream inputFile;

    cout << " Weather for Summer Months\n";

    cout << "--------------------\n\n";   

    inputFile.open("C:\rainorshine.dat");    

    if (inputFile)
    {
    cout << "Error opening data file.\n";
        system("pause");
    }
    else

    {   cout << "Weather Report\n\n";

    while (inputFile >> letter)
    {
        cout << letter << endl;  // print out characters read from file 
    }             
   for (count = 0; count < MONTH; count++)    
    {    
        for (day = 0; day < DAY; day++)    
        {    
            cout  << name[count][day];    
           inputFile >> name[count][day];    
            if (name[count][day] == 'R')    
                rainy++;
                else if (name[count][day] == 'S')    
                sunny++;            
            else if (name[count][day] == 'C')    
                cloudy++;
        }

        cout << endl;        
        cout << "  Sunny Days Total: " << rainy << endl;    
        cout << "  Rainy Days Total: " << sunny << endl;    
        cout << "  Cloudy Days Total: " << cloudy << endl << endl;      
    }
    system("pause");
        return 0;
    inputFile.close();

    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:48:42.147

这：

```
while (inputFile >> letter)
{
    cout << letter << endl;  // print out characters read from file 
} 
```

咀嚼所有的字母，完成后你就在文件的末尾。因此，当您尝试在循环中再次读取数据时`for`，就没有什么可读取的了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T22:57:34.580

```
"C:\rainorshine.dat"
// ^^ 
```

这不是后跟 a 的反斜杠`'r'`，而是回车符的转义序列。您需要使用正斜杠或转义反斜杠本身：

`"C:/rainorshine.dat"`或者`"C:\\rainorshine.dat"`

这意味着您永远不会打开文件。你会注意到，如果你的情况是

```
if (!inputFile) // notice the !
{
    cout << "Error opening data file.\n"; 
```

而不是逻辑不正确

```
if (inputFile) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:49:35.283

在这条线之后；

```
while (inputFile >> letter)
{
    cout << letter << endl;  // print out characters read from file 
} 
```

您需要重新打开文件或回到开头。下次您尝试读取文件时，您已经在最后，所以您什么也得不到。

就像是;

```
 inputFile.seekg(0, inputFile.beg); 
```

应该解决问题。

# vba - 访问 2010 循环遍历记录集并更改子表单字段（如果为空）

> ID：15397981
> 
> 赞同：2
> 
> 时间：2013-03-13T22:44:38.063
> 
> 标签：vba, loops, if-statement, case, recordset

我在主窗体上有一个命令按钮，单击该按钮时，将循环遍历子窗体的显示记录上的字段，并更改该字段中所有数据的值以匹配主窗体上未绑定的组合框的值。这样用户就可以选择一次更新子表单上的多条记录。该代码可以正常工作，但如果可以将其更改为仅在每条记录为空白时才更新该字段，则该代码将更有用。换句话说，我希望它检查每条记录是否有该字段的空白，然后根据组合框填充它，如果它不为空白或为空，则跳到下一条记录。这就是代码现在的样子。我不太擅长访问 VBA，不确定是否应该使用“Case”或“If”，或者如何将它与下面的代码一起使用。

```
Private Sub comm_1_Click()
Dim rs As DAO.Recordset

Set rs = Me.Skid1.Form.RecordsetClone
With rs
    .MoveFirst
    Do While Not .EOF
        .Edit
        ![Release Code] = Me.code_updater.Value
         .Update
         .MoveNext
     Loop
 End With
 Set rs = Nothing

End Sub 
```

我已经尝试过了，但它似乎只更新了一些空白记录（很奇怪），我很确定它很接近但不完全。

```
Private Sub comm_1_Click()
Dim rs As DAO.Recordset
Dim fld As Field

Set rs = Me.Skid1.Form.RecordsetClone
With rs
    .MoveFirst
    Do While Not .EOF
     For Each fld In .Fields

      If IsNull(fld.Value) Then
        .Edit
        ![Release Code] = Me.code_updater.Value
        .Update
         End If
        .MoveNext
          Next

    Loop
End With
Set rs = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:24:27.687

我怀疑你想要

```
Private Sub comm_1_Click()
Dim rs As DAO.Recordset
Dim fld As Field

Set rs = Me.Skid1.Form.RecordsetClone
With rs
    .MoveFirst
    Do While Not .EOF
      ''Anything, space filled, null, ZLS
      If Trim(![Release Code] & "") = "" Then
        .Edit
        ![Release Code] = Me.code_updater.Value
        .Update
      End If
      .MoveNext
    Loop
End With
Set rs = Nothing

End Sub 
```

我建议您编辑您的表格，并通过将文本数据类型的“允许零长度”属性设置为“否”来确保它不会接受零长度字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:41:38.420

这有什么区别吗？它检查空白字段和​​ NULL 字段 - 是的，它们是两个不同的东西！

```
Private Sub comm_1_Click()
Dim rs As DAO.Recordset
Dim fld As Field

Set rs = Me.Skid1.Form.RecordsetClone
With rs
.MoveFirst
Do While Not .EOF
 For Each fld In .Fields

  If (IsNull(fld.Value) Or fld.Value = "")Then
    .Edit
    ![Release Code] = Me.code_updater.Value
    .Update
     End If
    .MoveNext
      Next

Loop
End With
Set rs = Nothing

End Sub 
```

# php - 未捕获的错误：语法错误，无法识别的表达式。jQuery + PHP 问题

> ID：15397984
> 
> 赞同：0
> 
> 时间：2013-03-13T22:44:51.290
> 
> 标签：php, javascript, jquery, mysql

我确定问题很简单，我只是无知，无法弄清楚。

我的网站上有一个个人资料提要，它允许用户使用 jquery 的 ajax 功能发布一个立即出现的状态。

当尝试发布 jquery 所说的错误时，新发布行的整个 html 是语法错误。但是，如果我删除所有 html 并且只显示实际帖子的文本而不是 html，它仍然会给我错误。

这是javascript：

```
 $('body').on('click','.submit_feed',function () {

    var post = $("#feed_content").val();
    var hidden_id = $("#hidden").val();

    $("#loading").fadeIn("slow");

    if( content.length < 4)
    {
        $.ajax({
            url: "http://localhost/matthew/xaos/users/ajax/feed",
            type: "POST",
            data: {
                parent: hidden_id,
                content:post
            },
            cache: false,
            success: function (data) {
                $('#feed_error').html($(data).hide().fadeIn('slow'));
                $("#loading").fadeOut("slow");
            }
        });
        $("#loading").fadeOut("slow");
    }
    else
    {
        $('#feed_error').remove();
        $.ajax({
            url: "http://localhost/matthew/xaos/users/ajax/feed",
            type: "POST",
            data: {
                parent: hidden_id,
                content:post
            },
            cache: false,
            success: function (data) {
                $('#feed').prepend($(data).hide().fadeIn('slow'));
                $("#loading").fadeOut("slow");
                $("input[type='text']").val('');
            }
        });
    }
    return false;
}); 
```

正如您所看到的，它请求与 users/ajax/feed 交互，这是将数据插入数据库并返回 html 的原因。

这是我使用的 php：

```
 $return['user']     = user_lib::find_user($this->user['user_id']);
    $return['content']  = $this->input['content'];

    if( isset( $this->input['content'] )  )
    {
        if( strlen( trim( $this->input['content'] ) ) < 4 )
        {
            print '<h6>Post must be more than 4 characters</h6>';
            exit();
        }
        $previous_feed = $this->db->fetch_row("select feed_id from user_feed order by feed_id desc");
        if( ! $previous_feed )
        {
            $previous_feed['feed_id'] = 0;
        }

        $insert['feed_id']      = $previous_feed['feed_id'] + 1;
        $insert['feed_parent']  = $this->input['parent'];
        $insert['feed_user']    = $this->user['user_id'];
        $insert['feed_date']    = time();
        $insert['feed_content'] = $this->input['content'];

        $return['feed_id'] = $this->db->insert('user_feed', $insert );

        $html = <<<HTML
        <table style="border:solid 1px #d7d7d7;margin-bottom:5px;">
            <tr>
                <td class="row2" style="width:1%;">{$data['avatar']}</td>
                <td class="row1" style="width:100%;" valign="top">
                    <p>{$return['user']}</p>
                    <p>{$return['content']}</p>
                </td>
            </tr>
        </table>
HTML;

        @header( "Content-type: text/html;charset=utf-8" );
        print $html;
        exit();
    } 
```

当我删除所有 html 并执行 print $return['content']; 或打印 $this->input['content'] 浏览器控制台日志中没有发生错误，但它不会向#feed id 返回任何文本。

如果需要任何其他信息，请告诉我。

任何关于正在发生的事情的想法将不胜感激，谢谢！

# c# - 为什么我的 MonoDroid/Xamarin.Android 项目突然给我一个“'java' exited with code 1”。错误？

> ID：15397987
> 
> 赞同：4
> 
> 时间：2013-03-13T22:45:01.143
> 
> 标签：c#, android, visual-studio-2010, xamarin.android

在我的 MonoDroid/Xamarin.Android 应用程序上工作时，它突然停止构建，告诉我

```
"java" exited with code 1. 
```

打开正常的 MSBuild 输出详细度后，它显示错误发生在`Xamarin.Android.Common.targets`，位于`C:\Program Files (x86)\MSBuild\Xamarin\Android`. 行（第 988 行）开始这个 xml 块：

```
<CompileToDalvik 
    JavaMaximumHeapSize="$(JavaMaximumHeapSize)"
    JavaOptions="$(JavaOptions)"
    AndroidSdkDirectory="$(_AndroidSdkDirectory)"
    ClassesOutputDirectory="$(IntermediateOutputPath)android\bin\classes"
    JavaSdkDirectory="$(_JavaSdkDirectory)"
    MonoPlatformJarPath="$(MonoPlatformJarPath)"
    JavaSourceFiles="@(AndroidJavaSource)" 
    JavaLibraries="@(AndroidJavaLibrary)"
    LibraryProjectJars="$(IntermediateOutputPath)__library_projects__\*.jar"
UseDx="$(UseDx)"
/> 
```

此外，当我打开上述文件时，我有 53 个警告，都类似于：

```
The element 'PropertyGroup' in namespace 'http://schemas.microsoft.com/developer/msbuild/2003' has invalid child element 'ResolveReferencesDependsOn' in namespace 
'http://schemas.microsoft.com/developer/msbuild/2003'. List of possible elements expected: 'Property, AllowUnsafeBlocks, ... [followed by a long list of elements] 
```

我删除了我最近添加的所有代码，然后完全恢复到以前有效的代码，但无论我做什么，错误都会继续。我发现了一个可能出现在同一行的已[解决错误](https://bugzilla.xamarin.com/show_bug.cgi?id=8137)，但那里给出的解决方案对我不起作用。此外，由于警告以及我的代码曾经在其当前版本中运行这一事实，它似乎不是同一个问题。任何想法为什么会发生这种情况，以及我如何解决它？

更多详细信息：我尝试运行一个新的 M4A 项目，它运行良好，所以看起来这不是 M4A 文件的问题，而是我的代码的问题。

更多细节：当错误突然改变时，我正在浏览每个课程，将它们注释掉，看看我是否能找到导致问题的特定块。[它现在显示与此问题](https://stackoverflow.com/questions/15163492/cannot-find-symbol-fastdevlauncher-blocking-deployment-to-android-emulator)中发现的错误相同的错误。我也在使用 30 天试用版。但是，我使用的是 Visual Studio。我会看看那里的答案和评论是否也会对我有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T07:22:13.820

是的，这是一个很好的解决方案，我已经从我的项目中删除了同样的问题。您需要的步骤

```
1\. Delete Bin and obj folder from project
2\. Delete Solution File From Project Folder
3\. Open New Visual Studio and then Click File > Open > Project/Solution >
   Select Folder Where placed you project.
   and after all, Rebuild Solution file and then rebuild your project. 
```

我相信你会成功解决这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T08:24:02.283

我遇到了同样的问题，并通过删除我的整个解决方案并再次将其从源代码管理中拉出来解决它。如果您没有可提取的来源，那么我建议删除所有生成的文件，例如 bin 和 debug 文件夹的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T10:12:59.390

我在同事的电脑上遇到了这个问题。问题最终是他的旧 sdk 安装在 Program Files 下，而更新安装在 AppData 下。在 Visual Studio 中的 Options > Xamarin > Android 下更改此文件夹为他解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-13T09:01:28.700

我已经通过禁用 Proguard 选项并能够构建它来解决。

```
Right Click on Project -> Click Properties -> Android Options -> Uncheck Checkbox of Enable Proguard. 
```

# django - 在 django 1.5 模型中自动创建 slug 字段 - 来自 django 教程的示例

> ID：15397988
> 
> 赞同：1
> 
> 时间：2013-03-13T22:45:14.787
> 
> 标签：django, django-models

我对 Django 很陌生，我正在尝试在 django 模型中自动创建一个 slug 字段。因此，按照 django 101 教程，我尝试从以下 models.py 创建 slug 字段

```
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    slugp = models.SlugField(max_length=255, unique=True)

    def __unicode__(self):
         return self.question

    def save(self, *args, **kwargs):
        self.slugp = slugify(self.question)
        super(Poll, self).save(*args, **kwargs) 
```

然后我使用 django API 如下：

```
from writedb.models import Poll, Choice 
from django.utils import timezone
p = Poll(question="What's new?", pub_date=timezone.now())
p.save
# out: <bound method Poll.save of <Poll: What's new?>>
p.slugp
#out: u'' 
```

无论我做什么，slugp 字段似乎都没有被填充（或者我访问它的方式是错误的？我似乎也没有在数据库中填充该字段） - 我想知道我做错了什么。任何指针将不胜感激 - 如果这是一个 101 问题，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:53:49.923

您没有`save`正确调用该方法。`p.save`需要`p.save()`。前者只会返回`save`属性的内容，即方法本身，后者实际执行方法。

# ruby - 为什么不调用 Class.new ？

> ID：15397995
> 
> 赞同：3
> 
> 时间：2013-03-13T22:45:58.903
> 
> 标签：ruby

我正在尝试覆盖`Class.new`，以便我可以看到正在创建哪些类，例如

```
class Class
  class << self
  alias new_orig new
  def new(*args)
    obj = new_orig *args
    print "created",obj,"\n"
    obj
  end
  end
end

class X
end 
```

它不打印任何东西，但是如果我使用 Class.new 创建类，它就可以工作

```
puts Class.new

created#<Class:0x8b75888>
#<Class:0x8b75888> 
```

`class X`那么为什么和之间有区别`Class.new`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:56:20.510

要获得想要的效果，您可以使用[`Class#inherited`](http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-inherited)：

```
class Class
  def inherited(subclass)
    puts "Created #{subclass}"
  end
end

class XX  #writes "Created XX"
end 
```

# javascript - 当我收到 200 响应时，CoffeeScript 不断触发错误？

> ID：15397997
> 
> 赞同：2
> 
> 时间：2013-03-13T22:46:05.703
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, coffeescript

我正在尝试做一个`remote: true`表格，我已经完成了所有设置，当我单击提交按钮时，每次都会触发错误操作。这就是我的 CoffeeScript 的设置方式：

```
$(document).ready ->
  $("#new_report").on("ajax:success", (e, data, status, xhr) ->
    $("#new_report").append "<p>SUCCESS</p>"
  ).bind "ajax:error", (e, xhr, status, error) ->
    $("#new_report").append "<p>ERROR</p>" 
```

还有我的 Reports_Controller

```
 def create
    @report = Report.new(params[:report])

    respond_to do |format|
    if @report.save
    format.json { render json: "Created", :status => :created }
     else
    format.json { render json: @report.errors, status: :unprocessable_entity }
    end
     end 
```

我的表格：

```
 <%= form_for(@report, remote: true ) do |t| %>
<p id="reportalert"></p>
    <%= t.text_field  :plant_site,    placeholder: "Plant Site" %>

    <%= t.text_field  :route_number,  placeholder: "Route Number" %>

    <%= t.text_field  :driver_name,   placeholder: "Driver name if available" %>

    <%= t.date_select :date_recorded, html: { class: "input-block-level" } %>

    <%= t.text_field  :action,        placeholder: "Action taken" %>

    <%= t.text_area   :report_body,   placeholder: "What you witnessed",
                                     style: "height: 300px;",
                                     class: "input-block-level" %>

    <%= t.submit     "File Report",  class: "btn btn-primary btn-large" %>

    <% end %> 
```

但是我查看rails日志，只有200响应，没有错误，而且信息已经提交到数据库，为什么会`ajax:error`触发呢？我也尝试过用`ajax:error`and`ajax:success`替换`ajaxSuccess`and`ajaxError`但它什么也没做。任何信息都会非常感谢。

我正在尝试关注：[http ://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html](http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:06:30.507

看来您没有在控制器的 JSON 响应中返回状态。这是在 jQuery 中触发 ajax:success 的原因：

```
if ( status >= 200 && status < 300 || status === 304 ) {....} 
```

所以你的 respond_to 块应该是这样的：

```
respond_to do |format|
  if @report.save
    format.json { render json: "Created", :status => :created }
  else
    format.json { render json: @report.errors, status: :unprocessable_entity }
  end
end 
```