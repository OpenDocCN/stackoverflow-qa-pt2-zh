# StackOverflow 问答 12880000-12880999

# javascript - 使用 Ajax 读取 html 中的值（响应）

> ID：12880000
> 
> 赞同：1
> 
> 时间：2012-10-14T06:54:39.813
> 
> 标签：javascript

当我发布 api 调用时，我得到这个 html 作为响应，所以我想知道如何使用 jquery 或一些简单的 javascript 代码读取**client_id**和**session_token ？**

```
function getNewsFeed(d) {
    var c = {
        page_num: b,
        num_events: d,
        return_as_html: true,
        source: "web"
    };
    TAGGED.api.call(c, check)
} 
```

现在想检查一下：

```
function check() {
    // checking here
} 
```

> ["{\"stats\":\"ok\",\"dia\":\"44\",\"result\":{\"success\":true,\"session_token\":\" 969ndg1ai0c43034\",\"next_event_id\":0,\"client_id\":1314852}}"]

我没有 JSON，所以无法使用 **我尝试使用的 JSON.parse 读取它，但在 firebug 中它不显示 JSON**

当我用萤火虫检查它时，我得到相同的代码作为响应和 html。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:07:13.073

如果您可以确定您的值中不会包含某些特殊字符，则可以用逗号分隔，然后用冒号分隔，并去掉不匹配的字符...

```
str = '["{\"stats\":\"ok\",\"dia\":\"44\",\"result\":{\"success\":true,\"session_token\":\"969ndg1ai0c43034\",\"next_event_id\":0,\"client_id\":1314852}}"]'

// replace all characters that are not letters, numbers, underscore, colon or comma
str = str.replace(/[^a-zA-Z0-9_:,]/g,'')

// get array of key value pairs
all = str.split(',')

// create empty opts object to store final data
opt = {}

// loop through array of key value pairs
for(i in all){

    // split into key value array
    bits = all[i].split(/:/)

    // assign to opt object
    opt[bits[0]] = bits[1]

}

// access values vie keys of opt
alert(opt.client_id+": "+opt.session_token) 
```

# compiler-construction - Solaris 5-10 CC 编译器缺少符号错误导致链接失败

> ID：12880008
> 
> 赞同：0
> 
> 时间：2012-10-14T06:56:05.637
> 
> 标签：compiler-construction, compiler-errors, solaris, cc

> **可能重复：**
> [Solaris 10 CC 预处理器错误导致未定义符号](https://stackoverflow.com/questions/12870028/solaris-10-cc-preprocessor-bug-causes-undefined-symbols)

*如果这个问题发布看起来很熟悉，我深表歉意。我昨天在这里发布了这个问题：[Solaris 10 CC 预处理器错误导致未定义符号](https://stackoverflow.com/questions/12870028/solaris-10-cc-preprocessor-bug-causes-undefined-symbols)。但是，我添加了一些仅出现在这篇文章中的更多澄清信息（我从昨天开始了解到的）。*

我有一个非常简单的 C++ 文件，如下所示，我正在使用 CC 编译器在 Solaris 5-10 上进行编译。这是我的文件 myTest.C 中的源代码：

```
#include <map>
std::map<int, bool> myVar2;
int main() { return 0; } 
```

我想首先在这个文件上运行 CC 预处理器，检查预处理文件，然后将该预处理文件编译成目标文件。我称之为“间接编译”。为此，我执行以下操作：

```
% CC -P -o myFile_indirect.i myFile.C
% CC -c -o myFile_indirect.o myFile_indirect.i 
```

我还想编译这个文件，而不像通常那样进行单独的预处理步骤。我称之为“直接编译”。为此，我执行以下操作：

```
% CC -c -o myFile_direct.o myFile.C 
```

理论上，myFile_direct.o 和 myFile_indirect.o 在功能上应该是等效的。它们当然应该在各自的符号表中包含相同数量的符号，对吧？因此，让我们检查一下它们的符号：

```
% gnm myFile_direct.o | c++filt > direct_symbols.txt
% gnm myFile_indirect.o | c++filt > indirect_symbols.txt
% wc -l *direct_symbols.txt
57 direct_symbols.txt
45 indirect_symbols.txt 
```

令人惊讶的是，直接编译的目标文件包含 12 个在间接编译的文件中不存在的符号。为什么？这对我来说似乎是一个严重的错误。为什么间接编译的文件中没有这些符号？如果它们是不必要的，为什么将它们包含在直接编译的文件中？直接编译不应该先做同样的预处理，然后对用户隐藏它吗？这里发生了什么？

您可以看到这些缺失的符号阻止了间接编译的目标文件的最终链接。但是直接编译的目标文件链接就好了：

```
% CC -o myFile_direct myFile_direct.o
% CC -o myFile_indirect myFile_indirect.o
Undefined                       first referenced
 symbol                             in file
main                                /opt/solstudio12.2/prod/lib/crt1.o
void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__deallocate_buffers() myFile_indirect.o
__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::erase(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator,__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator) myFile_indirect.o
ld: fatal: Symbol referencing errors. No output written to myFile_indirect 
```

PS。我不认识十二个额外的符号，也不明白它们的目的是什么：

```
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__nil()
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::erase(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator)
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__erase(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__right(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator::operator++()
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__maximum(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__minimum(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__leftmost()
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rightmost()
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__erase_leaf(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rotate_left(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:29:05.117

这是 Solaris 支持人员告诉我的关于此问题的内容：

“解决您的问题的方法是不使用免费源 *.i（由 C++ 编译标志 -P 生成），而是使用主要源 *.cpp 来生成目标模块 *.o。

在这方面可能存在隐藏缺陷也就不足为奇了，因为用于生成礼貌源的 C++ 编译标志 -P 主要是为提供信息和诊断包含文件扩展而设计的。”</p>

啊。这真是太可怕了。

# c# - 如何在本地主机中调用 Web 服务

> ID：12880009
> 
> 赞同：0
> 
> 时间：2012-10-14T06:56:08.430
> 
> 标签：c#, asp.net, web-services

我没有 IIS，我使用 Visual Studio 附带的本地主机，如果我使用本地主机，我不确定如何进行服务调用。它告诉我“无法连接到远程服务器”，有没有办法可以使用 localhost 进行 Web 服务调用？这是我的代码：

```
 public void CallService()
    {
        WebRequest requestweb = WebRequest.Create("http://localhost/WebServices/MyTestService/HelloWorld");
        requestweb.Method = "GET";
        //Line below returns "Unable to connect to remote server"
        WebResponse response = requestweb.GetResponse();
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);
        Stream data = response.GetResponseStream();
        response.Close();
    } 
```

真的很感激这方面的建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:04:15.773

在您喜欢的网络浏览器中打开您尝试连接的网站。从地址栏中复制值并将其作为参数粘贴到`WebRequest.Create`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:02:31.780

您可以使用简单的 Java TCP 隧道。

下载**[这个](http://jcbserver.uwaterloo.ca/cs436/software/tgui/tcpTunnelGUI.shtml)**Java 应用程序，然后将流量返回。

在命令提示符下，您将像这样运行 java 应用程序...假设您希望在端口 80 上进行外部访问，并且您的标准调试环境在端口 1088 上运行...

```
java -jar tunnel.jar 80 localhost 1088 
```

# performance - AS3 瓶颈

> ID：12880015
> 
> 赞同：0
> 
> 时间：2012-10-14T06:57:03.453
> 
> 标签：performance, actionscript-3, flash

在 ActioScript3 和 flash 中开发应用程序/游戏/任何东西时，我应该注意哪些常见的瓶颈或固有的缓慢动作/功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:49:09.320

瓶颈：

*   例外
*   重绘
*   大图像
*   舞台上有很多小的矢量图形元素
*   透明元素/面具

有几个好的做法：

*   使用弱链接
*   使用`Event.RENDER`
*   将值存储在变量中，而不是频繁调用对象的字段
*   不要在循环中定义变量
*   最好使用 StageVideo
*   如果您使用 Flex，请小心绑定
*   小心事件：
    *   不要忘记删除事件监听器
    *   不要在没有需要的情况下分派事件。特别是如果它们导致重新绘制舞台
*   加上常见的编程良好实践

# c++ - 创建动态集合错误

> ID：12880021
> 
> 赞同：0
> 
> 时间：2012-10-14T06:57:54.097
> 
> 标签：c++, arrays, pointers, heap-memory

我有这段代码用于管理动态集合列表，它主要受 .NET System.List 集合的启发，但这是用普通 C++ 编写的。

```
void List<T>::Insert(int index, T item)
{
    if(index > GetLength() && index >= 0)
        throw new StandartException("Index was out of array range");

    if(GetLength()==length)
    {
        T * newl = new T[length + 4];
        this->CopyTo(newl);
        delete[] this->items;
        this->items = newl;
        length += 4;
    }

    T * store = new T[length];
    CopyTo(store, index);
    store[index] = item;
    CopyTo((store + index + 1), index, GetLength() - index);
    used++;
    delete[] items;
    items = store;
}

template <typename T>
void List<T>::CopyTo(T * destination, int start, int count)
{
    for(int i = start, c = 0;i < GetLength() && c < count;i++, c++)
        *(destination + i) = items[i];
} 
```

所以有方法插入，它必须在数组中的指定索引上插入项目。首先，我正在检查是否在 0 和 Length + 1 之间指定了索引（因为我需要有一个选项来在集合的 ond 上添加项目）。然后我正在测试它是否不是分配数组的结尾（GetLength（）=获取数组中的元素数，长度=为元素分配的空间数）。如果是，我正在为数组分配新空间、复制实际元素、释放旧存储并设置指向新地址的指针。

之后，我再次分配新空间。我将实际元素从零复制到索引 - 1，设置必须插入其位置的项目并将其他旧元素复制到它们的索引（它们以前的索引 + 1）。最后，我正在释放旧空间并添加新空间。

**错误：**我开始调试。一切正常，我第一次运行 Insert 没有问题，但是在第一次删除时（`delete[] this->items;`在 if 块中）我收到了这个错误： ![为什么？](../Images/039897bc75fe63808c3960fcc7b497de.png)

有谁知道我为什么会得到这个以及如何修复它？我认为我在任何地方都没有经历过数组范围。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:13:29.010

你的问题是这一行：

```
T * store = new T[length]; 
```

您插入一个项目，但不要分配比以前更大的数组。当您转到`CopyTo`新数组时，您会溢出数组。

# canvas - 画布上仅绘制一个 box2d 对象

> ID：12880022
> 
> 赞同：1
> 
> 时间：2012-10-14T06:57:58.190
> 
> 标签：canvas, box2d

我正在尝试使用 Box2dWeb 在画布中绘制几个球对象，而不使用 debugDraw()。我正在使用以下代码绘制圆圈：

```
function drawObjects()
{
     node = world.GetBodyList();
     while (node) {
            var currentBody = node;
            node = node.GetNext();
             position = currentBody.GetPosition();
            if (currentBody.GetType() == b2Body.b2_dynamicBody) 
            {
                canvas.width=canvas.width;
                context.arc(position.x*30,position.y*30,shape.GetRadius()*20,0,7);
                context.stroke();
                context.fill();
            }
            }
} 
```

当我使用 debugDraw 时，我能够看到我正在添加的两个 Circle 对象。但是当尝试使用画布方法时，只显示了一个圆形对象..关于我哪里出错的任何指针？此外，我觉得我对我正在使用的 box2d 方法的理解可能做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:01:50.820

您每次都使用此行清除画布：

`canvas.width=canvas.width;`

在 while 循环之外的顶部执行此操作。

（改变画布宽度，即使是相同的值，也会清除画布。这通常也是最快的清除方法，这就是为什么你会看到它使用了很多）

# python - Selenium WebDriver (2.25) 超时不工作

> ID：12880024
> 
> 赞同：9
> 
> 时间：2012-10-14T06:58:17.943
> 
> 标签：python, selenium, selenium-webdriver, qa

我想我已经阅读了 Stack Overflow 上的所有 Selenium 超时问题，但是在我的 Selenium webdriver 2.25（Python 2.7 绑定）中，隐式和显式超时都不起作用，并且“no_timeout_here =”行都将永远挂起——

```
browser = webdriver.Firefox()
browser.implicitly_wait(6)               
browser.set_page_load_timeout(30)        
browser.get("http://www.google.com")
try:
    #no_timeout_here = browser.find_element_by_id("id_not_found")
    no_timeout_here = WebDriverWait(browser, 5).until(lambda browser:
            browser.find_element_by_id("id_not_found"))
except:
    raise 
```

所有指针将不胜感激！

**10 月 16 日更新**

感谢 seleniumnewbie 的全面回答，但是，您的单元测试代码仍然挂在 Python 2.7 下的我的 Ubuntu 11.04（64 位）上——

```
(2012/10/17 11:51:58)$ time ./timeout.py 
^CTraceback (most recent call last):
...
KeyboardInterrupt

real    2m26.572s
user    0m0.368s
sys 0m0.232s

(2012/10/17 11:54:26)$ python -V
Python 2.7.2+

(2012/10/17 11:57:04)$ uname -a
Linux 3.0.0-26-generic #43-Ubuntu SMP Tue Sep 25 17:19:22 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

(2012/10/17 11:57:10)$ ls selenium-server-standalone-2.25.0.jar 
```

我可以知道您的操作系统/Python 版本吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T13:21:46.880

如果您使用的是 Firefox 17 和 Selenium 2.26.0，那么您遇到了缺陷 #4814：[http ://code.google.com/p/selenium/issues/detail?id=4814](http://code.google.com/p/selenium/issues/detail?id=4814)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T10:16:04.253

基于在[这里找到的答案](https://stackoverflow.com/questions/12692172/test-dynamically-loaded-content-with-selenium-web-driver)

## 1

我建议将 WebDriverWait 与 ExpectedConditons 一起使用。

```
//scroll down with Javascript first
WebDriverWait wait = new WebDriverWait(driver, 30);
WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("selector")));
//interact with your element
element.click() 
```

看看 Selenium 官方页面提供的指导：http: [//seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

## 2

特别尝试使用流利的等待。主要特点是：

*一个 Wait 接口的实现，可以动态配置它的超时和轮询间隔。每个 FluentWait 实例定义等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。*

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

所描述的方法返回您可以操作的 Web 元素。所以方法如下：1）你需要找到你希望在滚动后呈现的元素的选择器，例如

```
String cssSelector = "blablabla" 
```

2) 使用 js 向下滚动 3)

```
WebElement neededElement  = fluentWait(cssSelector);
neededElement.click();
//neededElement.getText().trim(); 
```

您可以[在此处获取有关流利等待的更多信息](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

**更新**

* * *

```
from selenium import webdriver
import unittest, time, re

class Sdsdsd(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "https://www.google.com/"
        self.verificationErrors = []

    def test_sdsdsd(self):
        driver = self.driver
        driver.get ("http://www.google.com")
        try:
             driver.find_element_by_id("id_not_found")# I am only searching for the element not assigning it to anything.
        except:
            raise

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

我得到了这个异常，这是期望的

```
E
======================================================================
ERROR: test_sdsdsd (__main__.Sdsdsd)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "sdsdsd.py", line 19, in test_sdsdsd
    driver.find_element_by_id("id_not_found")
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/webdriver.py", line 172, in find_element_by_id
    return self.find_element(by=By.ID, value=id_)
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/webdriver.py", line 525, in find_element
    {'using': by, 'value': value})['value']
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/webdriver.py", line 144, in execute
    self.error_handler.check_response(response)
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/errorhandler.py", line 110, in check_response
    raise exception_class(message, screen, stacktrace)
NoSuchElementException: Message: u'Unable to locate element: {"method":"id","selector":"id_not_found"}' ; Stacktrace: Method WebDriverError threw an error in file:///private/var/folders/TA/TAS7MYfcEuG3lBNHwhrjRU+++TI/-Tmp-/tmpEf_lrD/extensions/fxdriver@googlecode.com/resource/modules/utils.js 

----------------------------------------------------------------------
Ran 1 test in 33.818s

FAILED (errors=1) 
```

另请注意，它在 33 秒后失败，这意味着它在出错之前等待了 30 秒。

当我将隐式等待更改为`self.driver.implicitly_wait(15)`

我收到这个错误

```
E
======================================================================
ERROR: test_sdsdsd (__main__.Sdsdsd)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "sdsdsd.py", line 19, in test_sdsdsd
    driver.find_element_by_id("id_not_found")
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/webdriver.py", line 172, in find_element_by_id
    return self.find_element(by=By.ID, value=id_)
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/webdriver.py", line 525, in find_element
    {'using': by, 'value': value})['value']
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/webdriver.py", line 144, in execute
    self.error_handler.check_response(response)
  File "/Library/Python/2.6/site-packages/selenium-2.2.0-py2.6.egg/selenium/webdriver/remote/errorhandler.py", line 110, in check_response
    raise exception_class(message, screen, stacktrace)
NoSuchElementException: Message: u'Unable to locate element: {"method":"id","selector":"id_not_found"}' ; Stacktrace: Method WebDriverError threw an error in file:///private/var/folders/TA/TAS7MYfcEuG3lBNHwhrjRU+++TI/-Tmp-/tmpXSbCY0/extensions/fxdriver@googlecode.com/resource/modules/utils.js 

----------------------------------------------------------------------
Ran 1 test in 18.843s

FAILED (errors=1) 
```

# php - 使用键名但空值初始化关联数组

> ID：12880026
> 
> 赞同：58
> 
> 时间：2012-10-14T06:58:45.470
> 
> 标签：php, arrays, initialization, associative

我在书籍或网络上找不到任何示例，描述如何仅按名称正确初始化关联数组（使用空值）-当然，除非这是正确的方法（？）

感觉好像还有另一种更有效的方法可以做到这一点：

**配置文件**

```
class config {
    public static $database = array (
        'dbdriver' => '',
        'dbhost' => '',
        'dbname' => '',
        'dbuser' => '',
        'dbpass' => ''
    );
}

// Is this the right way to initialize an Associative Array with blank values?
// I know it works fine, but it just seems ... longer than necessary. 
```

**索引.php**

```
require config.php

config::$database['dbdriver'] = 'mysql';
config::$database['dbhost'] = 'localhost';
config::$database['dbname'] = 'test_database';
config::$database['dbuser'] = 'testing';
config::$database['dbpass'] = 'P@$$w0rd';

// This code is irrelevant, only to show that the above array NEEDS to have Key
// names, but Values that will be filled in by a user via a form, or whatever. 
```

任何建议、建议或方向将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-14T07:12:20.637

你所拥有的是最明确的选择。

但是您可以使用[array_fill_keys](http://www.php.net/manual/en/function.array-fill-keys.php)缩短它，如下所示：

```
$database = array_fill_keys(
  array('dbdriver', 'dbhost', 'dbname', 'dbuser', 'dbpass'), ''); 
```

但是，如果用户无论如何都必须填写值，您可以将数组留空，并在 index.php 中提供示例代码。分配值时将自动添加键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T07:13:46.567

第一个文件：

```
class config {
    public static $database = array();
} 
```

其他文件：

```
config::$database = array(
    'driver' => 'mysql',
    'dbhost' => 'localhost',
    'dbname' => 'test_database',
    'dbuser' => 'testing',
    'dbpass' => 'P@$$w0rd'
); 
```

# python - 为什么当我退出 while 循环时我的列表消失了？

> ID：12880028
> 
> 赞同：0
> 
> 时间：2012-10-14T06:59:04.033
> 
> 标签：python, loops, while-loop

我有一段代码循环，直到引发错误或将 None 值分配给变量“父级”。在每个循环中，它都会将一个值附加到一个称为 actionList 的列表中。通过打印语句，我知道列表在循环的每次迭代中都在增长。然而，在我退出循环后（通过一个被捕获的 KeyError），打印语句显示该列表现在被分配了一个值 None。知道发生了什么吗？

```
while parent is not None:
                print "iterating"
                print actionList
                try:
                    pathList.append(parentMap[parent])
                except KeyError:
                    break
                actionList.append(actionMap[parent])
                parent = parentMap.get(parent, None)
            return actionList.reverse() 
```

经过进一步检查，一旦我离开循环，actionList 似乎仍然完好无损。但是，当在 actionList 上使用 reverse() 方法时，它就会消失。我使用 reverse() 错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T07:02:33.733

是的。 `reverse`反转列表并返回无。改为这样做：

```
actionList.reverse()
return actionList 
```

您也可以这样做`return list(reversed(actionList))`，这将返回列表的反向*副本*。

# cocoa-touch - 是否有关于设计一个非常大的视图并使用情节提要将其放入 scrollView 的教程

> ID：12880030
> 
> 赞同：1
> 
> 时间：2012-10-14T07:00:21.117
> 
> 标签：cocoa-touch, interface-builder, uistoryboard, xcode4.5

这个问题可能与

[使用故事板在 xcode 4.2 中设计滚动视图](https://stackoverflow.com/questions/8809984/designing-inside-a-scrollview-in-xcode-4-2-with-storyboards)

但那里的答案根本没有意义。

好的，我创建了一个新控制器并添加了一个滚动视图。

我注意到的第一件事是没有地方指定滚动视图的内容大小。

![在此处输入图像描述](../Images/c4f8c33e5de012ab6413c7318e07df4c.png)

不在属性检查器中，不在尺寸检查器中。

然后呢？

我期待一个比普通盒子更大的盒子，我可以在其中绘制我想要放入的所有视图。也没有这样的东西。

我很沮丧。

那里的所有“教程”都讲述了如何使用代码填充滚动视图。

我尝试的另一件事是选择控制器转到尺寸检查器，然后选择 FREEFORM。

伟大的。我仍然无法使那个模板变大。 ![在此处输入图像描述](../Images/12a8970c38ff96c20d4d829034338991.png)

我应该在 XIB 中执行此操作吗？至少在那一个上，我可以拥有一个巨大的 UIView。或者这样做的官方方式行业标准方式是什么？这个有 WWDC 吗？

假设我想画这样的东西：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:22:33.370

我认为您无法获得有关此的*教程*，因为这在 IB 中根本不可能。正如大多数人已经注释掉你想要在这里做的事情需要以编程方式完成的那样。

如果您正在使用`XIB`，您可以在那里设置所有内容。在尺寸选项卡下（在检查器中），您需要更改高度以填充所有内容，但您仍然需要以`contentSize`编程方式设置。

因为`storyboard`我认为不可能在 IB 中更改滚动视图的大小。

# html - CSS 表大于指定

> ID：12880031
> 
> 赞同：3
> 
> 时间：2012-10-14T07:00:27.913
> 
> 标签：html, css, layout, html-table

我正在编写一些代码来生成带有标题的“全屏”页面。我正在使用表格进行布局，使用 CSS 指定尺寸和格式。

该表格的高度和宽度为 100%，以使其填充窗口/视口，这首先按预期工作。该表有两行，每行一个单元格。第一行的单元格的高度为 20px，而另一行的单元格的高度为 100%，以允许它填充窗口的剩余空间。底部单元格内是一个 iFrame，设置为 100%x100% 以填充单元格。iFrame 可按预期工作，但该表未遵循其设置。

当页面在 IE（特别是我的目标浏览器）中呈现时，表格被拉伸到视口范围之外。具体来说，表格的尺寸增加了 20 像素。即使我将表格设置为固定高度，它仍然会在我设置的尺寸上增加 20px。我希望代码将表格强制为 100% 高度，顶部单元格为 20px，底部单元格专门占用表格高度的剩余可用空间，而不拉伸表格。这在 Chrome 中完美运行，但 IE 始终使表格的高度为 100%+20px，即使 CSS 规则将其严格设置为 100% 高度。

以下是我的代码的简化版本：

```
 <table style=" height:100%; width: 100%;"><tr><td style="height: 20px;">
    {content header here}
    </td></tr><tr><td style="height: 100%;">
    {iframe with dimensions 100% x 100% here}
    </td></tr></table> 
```

Chrome 中的结果完美显示。在 IE 中，包含表最终高 20px 并超出视口，导致 iframe 的底部 20px 超出视口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:10:25.707

这很正常。表格行之一的高度为“20px”，另一行的高度为“100%”。

**使用“height:auto”代替“height:100%”。**

如果第一行的高度为 20px，这将强制浏览器计算父元素的左侧页面高度空间：

此外，如果您的表格有边框并且您的元素设置了一些填充或边距，“height:auto”可以为您节省潜在的问题。

# c++ - 了解类变量如何在 C++ 中的真实情况下存储在内存中

> ID：12880032
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:00:55.663
> 
> 标签：c++, opencv

我试图弄清楚 Vec3b 如何为 Opencv 工作（但我认为这更多是关于基本 c++ 的问题）。
源代码如下（简化）：

```
 ```
template<typename _Tp, int m, int n> class CV_EXPORTS Matx
{
    public:
    // constructors, methods and operators
    ...
        _Tp val[m*n]; //< matrix elements
};

// inherits from Matx
template<typename _Tp, int cn> class CV_EXPORTS Vec : public Matx<_Tp, cn, 1>
{
    public:
    // constructors, methods and operators
    ...
};

typedef Vec<uchar, 3> Vec3b; 
``` 例如，我可以使用它从图像中读取三元组 BGR（像素）：  

```
 ```
int main( int argc, char** argv )
{
    Vec3b* data= (Vec3b*)inputImage.data;
    // access the 10th pixel
    data[10] = Vec3b(0,0,255);
} 
``` 告诉我我是否理解正确。

inputImage.data 是一个字节数组，包含 BGR 值和每行末尾的偏移量；由于 val 是 Matx 的唯一数据成员，我们可以确信 Vec3b 是一组三个字节，因此当我遵循第 10 个指针时，我可以访问或修改从第 31 个字节开始的三个字节。

只有两个问题：

1）为什么我们确定数据在内存中的存储方式？仅仅因为 val 是唯一的变量？

2) 如果 1\. 为真，您不认为这是一种危险的技术吗，因为仅添加第二个变量会使几乎所有使用 Vec2b 的代码都无法使用？  

            回答 #1

赞同：1

时间：2012-10-14T08:21:19.933

这通常会在实践中起作用，但存在一些潜在的陷阱。我们可以相对确定数据在内存中的布局方式，因为 C++ 相当明确地定义了从类定义到内存布局的映射。变量将按照它们在类定义中指定的顺序排列在内存中，尽管可以在变量之间插入填充以帮助对齐。由于这两个项目都是相同基本类型的数组，我们可以确保每个元素的对齐方式相同。此外，指向第一个数据成员的指针通常等于指向对象本身的指针，尽管我认为这仅适用于[普通的旧数据](http://en.wikipedia.org/wiki/Plain_old_data_structure)类型。在实践中，这对于任何不涉及虚函数的东西都是正确的。

这是危险的方式，因为您提到矩阵或 vec2b 的成员变量的任何更改都会立即破坏这一点。此外，添加任何虚拟方法都会破坏这一点，因为 vtable 将添加到对象的开头。

```

```

# python - django 1.4 上的管理页面不起作用

> ID：12880033
> 
> 赞同：0
> 
> 时间：2012-10-14T07:01:32.487
> 
> 标签：python, django, django-admin, admin

我正在尝试建立一个我以前做过很多次的简单事情，那就是在 Django 上启用管理页面，但这次是在 1.4 版本上。

我一遍又一遍地收到这条消息（`ImportError at /admin/ No module named django.contrib.auth`）。

**这是我的网址文件：**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.conf import settings

from filebrowser.sites import site

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

import django

from django.contrib import auth

from django.contrib.admin import *

urlpatterns = patterns('',  
            url(r'^admin/', include(admin.site.urls)), 
            url(r'^admin/filebrowser/', include(site.urls)),

            url(r'^polls/', include('volcano.urls')),
            url(r'^contact/', include('form_handle_app.urls')),

            # Uncomment the admin/doc line below to enable admin documentation:
            #url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
            #url(r'^admin/', include('django.contrib.admin.urls')), 
            url(r'^login/', 'django.contrib.auth.views.login', {'template_name': 'login.html'}),   
                        ) 
```

**这是设置文件：**

```
 # Django settings for sito project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

import os
#PROJECT_ROOT = os.path.realpath(os.path.dirname(__file__))
PROJECT_ROOT = '/home/framoau/sito'

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'testo',                      # Or path to database file if using sqlite3.
        'USER': '********',                      # Not used with sqlite3.
        'PASSWORD': '********',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = '/home/framoau/sito/media/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = 'media' 

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '$hebtpijge6%o*7uegb6!sny5vl0n4w9j2wao-(fxsdb1@kv7b'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    'django.template.loaders.eggs.Loader',
) 

# URL of the login page.
LOGIN_URL = '/contact/login/'

TEMPLATE_CONTEXT_PROCESSORS = ("django.contrib.auth.context_processors.auth",
                               "django.core.context_processors.debug",
                               "django.core.context_processors.i18n",
                               "django.core.context_processors.media",
                               "django.core.context_processors.static",
                               "django.core.context_processors.tz",
                               "django.contrib.messages.context_processors.messages"
                               ) 

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    #'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',

    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'sito.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'sito.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/framoau/sito/templates',
)

INSTALLED_APPS = ( 
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'grappelli',
    'filebrowser',

    'django.contrib.admindocs',

    'volcano',
    'form_handle_app',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

**我的管理页面：**

```
from volcano.models import Poll, Choice
from form_handle_app.models import Document

from django.contrib import admin

#admin.site.register(Poll)
#admin.site.register(Choice)
admin.site.register(Document) 
```

**最后，Django 的错误转储：**

```
> Environment:

Request Method: GET
Request URL: http://192.168.0.4/admin/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'grappelli',
 'filebrowser',
 'django.contrib.admindocs',
 'volcano',
 'form_handle_app')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/contrib/admin/sites.py" in wrapper
  213\.                 return self.admin_view(view, cacheable)(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/contrib/admin/sites.py" in inner
  192\.                                            current_app=self.name):
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in reverse
  447\.                 app_list = resolver.app_dict[ns]
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in app_dict
  290\.             self._populate()
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in _populate
  253\.                     for name in pattern.reverse_dict:
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in reverse_dict
  276\.             self._populate()
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in _populate
  265\.                 lookups.appendlist(pattern.callback, (bits, p_pattern, pattern.default_args))
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in callback
  216\.         self._callback = get_callable(self._callback_str)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/functional.py" in wrapper
  27\.         result = func(*args)
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py" in get_callable
  105\.                     not module_has_submodule(import_module(parentmod), submod)):
File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /admin/
Exception Value: No module named django.contrib.auth 
```

我尝试在 manage.py shell 控制台中导入所有库，对所有对象应用所有自省技术，一切都很容易，只有当我正常运行 Django 时才会停止。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:39:40.657

我知道了 ：））

问题在于在主 url 中导入/包含其他 url。试图评论这条线`url(r'^contact/', include('form_handle_app.urls')),` ，事情进展顺利。

我发现`uform_handle_app.urls`, 有一条不涉及任何东西 ( `url(r'^$', 'contact'),`) 的坏行，同时，django 不会抱怨，除非它被浏览器触摸；添加管理页面时，您拥有的所有网址都应该没问题，即使您不会使用它们。`

# c# - 将datagridview序列化为xml文件不起作用

> ID：12880034
> 
> 赞同：0
> 
> 时间：2012-10-14T07:01:55.970
> 
> 标签：c#, winforms, datagridview, xml-serialization

我知道这是一个非常简单和基本的问题，但我想知道如何解决这个问题。我在从 datagrdiview 序列化对象时遇到问题。

这条线不适用于我

```
if (dataGridView1 != null) 
    _example.Details = dataGridView1.DataBindings;   // Not Working. 
```

请告诉我我在这里做的错误是什么......！谢谢你。

```
private void button3_Click(object sender, EventArgs e)  //Read
{
            XmlSerializer _serializer = new XmlSerializer(typeof(XMLExample));
            XMLExample _example = new XMLExample();

            // Read file.
            using (TextReader textReader = new StreamReader(@"C:\test\testserialization.xml"))
            {
                _example = (XMLExample)_serializer.Deserialize(textReader);
                textReader.Close();
            }

            textBox1.Text = _example.ID;
            textBox2.Text = _example.Initial;

            dataGridView1.DataSource = _example.Details;
        }

        private void button2_Click(object sender, EventArgs e) //Write
        {
            XmlSerializer _serializer = new XmlSerializer(typeof(XMLExample));
            XMLExample _example = new XMLExample();

            _example.ID = textBox1.Text;
            _example.Initial = textBox2.Text;

            List<Detail> _source = new List<Detail>();

            for (int i = 0; i < 10; i++)
            {
                _source.Add(new Detail
                {
                    FirstName = "Name_" + i,
                    LastName = "Surname_" + i,
                    Section = "section_"+i,
                });
            }

            dataGridView1.DataSource = _source;

            if (dataGridView1 != null && dataGridView1.DataSource != null) 
               _example.Details = (List<Detail>)dataGridView1.DataSource;

            using (TextWriter textWriter = new StreamWriter(@"C:\test\testserialization.xml"))
            {
                _serializer.Serialize(textWriter, _example);
                textWriter.Close();
            }
        } 
```

类文件：

```
[Serializable]
public class StudentInfo : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public string UserID { get; set; } // Textbox1
    public string Department { get; set; } // Textbox2
    public List<Detail> Details { get; set; }
}

[Serializable]
public class Detail // Datagridview1
{
    [XmlElement("FirstName")] //Datagridview
    public string FirstName { get; set; }
    [XmlElement("LastName")] //Datagridview
    public string LastName { get; set; }
    [XmlElement("Section")] //Datagridview
    public string Section { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:26:41.923

尝试这个：

```
if (dataGridView1 != null && dataGridView1.DataSource != null) test.Details = (List<Detail>)dataGridView1.DataSource; 
```

分配`List<Detail>`给 DataGridView 对象的属性 DataSource 的示例代码（在构造函数中添加此代码）：

```
 List<Detail> _source = new List<Detail>();
            for (int i = 0; i < 10; i++)
            {
                _source.Add(new Detail
                {
                    FirstName = "Name_" + i,
                    LastName = "Surname_" + i,
                    Section = "Section_" + i
                });
            }

            dataGridView1.DataSource = _source; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:29:53.463

您必须对 dataGridView 和 DataTable 或 DataSource 进行序列化

例子：

```
XmlSerializer ser = new XmlSerializer(typeof(DataTable));
DataTable dt = new DataTable("data");
TextWriter writer = new StreamWriter(Application.StartupPath+"\\"+fname+".xml");
ser.Serialize(writer, dt);
writer.Close(); 
```

# php - PHP搜索功能说明

> ID：12880035
> 
> 赞同：0
> 
> 时间：2012-10-14T07:01:55.940
> 
> 标签：php, wordpress

[我在 Stack Overflow 上的另一个问题](https://stackoverflow.com/questions/1260878/mysql-structure-for-comments-and-comment-replies)中找到了这个函数，但我想澄清一下：

```
function sort_comments($ar)
{
    $comments = array();
    foreach($ar as $item)
    {
        if(is_null($item['parent_id'])) $comments[] = $item;
        else 
        {
                $parent_array = array_search_key($item['parent_id'],$comments,'id');
                if($parent_array !== false) $comments[$parent_array]['replies'][] = $item;
        }
    }
    return $comments;
} 
```

有人可以解释传递给 array_searched_key() 的参数吗？我在 php.net 中搜索了这个函数，但没有找到。同样，我对这些参数有点困惑，特别是为什么将 $comment 数组传递给它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:56:05.110

我不认为这是在这种情况下使用的 WordPress 函数 - 我可以在[WordPress 代码库](http://plugins.svn.wordpress.org/cbpress/trunk/lib/class.fn.php)中找到这个函数的唯一地方只接受两个参数。

我宁愿认为他们指的是我在[pastebin](http://pastebin.com/arCgJTXg)上找到的其他功能。不幸的是，作者没有提供描述参数的评论，但我们有：

```
$needle - a value to match inside the array of arrays being searched 
$haystack - an array of arrays being searched 
$haystackKey - the key within the inner arrays which we want to find in the array of arrays
$strict - if set to true (default false) then type matching is enforced 
```

因此，如果键和数据对可以位于至少一个内部数组中，则该函数返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:05:11.763

首先，这不是 PHP 的核心功能。这是一个专门用于在显示评论时对评论进行排序的 Wordpress 功能。

但据我了解，有一个简单的解释：

```
First argument: the ID to search (the query)
Second argument: array to search in (the datas)
Third argument: the column to search in (in the array) 
```

据我了解，就是这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:12:11.100

如果您链接了相关的 StackOverflow 线程，它将把事情放在上下文中。我的猜测是[这个 implementation](http://www.php.net/manual/en/function.array-search.php#99203)或类似的。该函数不是 PHP 的原生函数，不知道它的来源就无法回答。

# php - 使用 PHP 或 SQL 进行错误检查

> ID：12880041
> 
> 赞同：0
> 
> 时间：2012-10-14T07:02:53.827
> 
> 标签：php, mysql, sql, web, integrity

给出下表：

```
CREATE TABLE User (
Email VARCHAR(256) PRIMARY KEY,
Name VARCHAR(256),
); 
```

我正在尝试将日期插入表中。要检查重复，我应该使用 SQL 从 email = $email 的用户中选择电子邮件并检查返回的数字或行数是否为 1，如果是 1，我只使用 php 打印错误消息，或者我是否应该尝试插入数据到表中并使用以下打印错误？

```
mysql_query('INSERT INTO ...');
if (mysql_errno() == 1062) {
    print 'no way!';
} 
```

哪个是更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:08:46.743

您可以进行这样的查询：

```
$sql = "INSERT INTO `table` VALUES ('$email','$Name')"
      ." WHERE NOT EXISTS (SELECT * FROM `table` WHERE `email`='$email')";

mysql_query($sql) or die("There's a duplicate.");` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:14:47.087

通常最好让 DBMS 进行检查，因为功能已经存在并经过测试。您只需要处理错误消息。

如果您坚持使用自己的代码进行检查，请准备好数小时的头脑风暴（考虑到所解决问题的复杂性）。

# java - 创建一个数组，其中内部数组具有不同的长度

> ID：12880043
> 
> 赞同：1
> 
> 时间：2012-10-14T07:03:22.597
> 
> 标签：java, multidimensional-array

如果我在编译时知道数组的格式，我已经知道如何在 Java 中创建不同长度的数组。
前任：

```
char[][] array = { { 'a', 'b', 'c'}, {'d'}, {'e', 'f'}}; //etc.... 
```

问题是我需要在运行时制作。我不知道编译时数组需要的大小，但我会在运行时知道。

这里的目标是在 java 中制作（并具有 java 中数组的优点（如 .length））以制作 C 中的内容：

```
char[][] arrayC = malloc(outerArraySize);
for(int i = 0; i < outerArraySize; i++){
    arrayC[i] = malloc(innerArraySize[i]);
} 
```

此 C 代码是在此处临时制作的，因此它可能包含错误，但其目的只是为了澄清问题信息。

无论如何在Java中正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T07:05:36.990

当然 - 只需使用[数组创建表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)：

```
char[][] array = new char[outerArraySize][];
for (int i = 0; i < outerArraySize; i++) {
    array[i] = new char[innerArraySize[i]];
} 
```

您可能还需要考虑使用字符串而不是字符数组，具体取决于具体情况。

# c++ - 使用 bgl 和 dfs 构建搜索树

> ID：12880044
> 
> 赞同：1
> 
> 时间：2012-10-14T07:03:27.070
> 
> 标签：c++, boost

我想使用 dfs 算法创建图的搜索树。我一遍又一遍地收到编译错误，我的代码就是这样（编译错误太长了，我不粘贴它）：

```
typedef adjacency_list <vecS, vecS, undirectedS> Graph;   
typedef graph_traits <Graph>::edge_descriptor Edge;
typedef graph_traits <Graph>::vertex_descriptor Vertex;

typedef pair<int, int> E;
vector<E> edges;

Graph g(edges.begin(), edges.end(), n);

vector<Vertex> p(n);
Vertex s = vertex(0,g);

breadth_first_search(g, s, visitor(record_predecessors(&p[0], on_tree_edge()))); 
```

部分错误：

```
instantiated from here
/usr/include/boost/graph/breadth_first_search.hpp:39:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘initialize_vertex’
/usr/include/boost/graph/breadth_first_search.hpp:40:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘discover_vertex’
/usr/include/boost/graph/breadth_first_search.hpp:41:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘examine_vertex’
/usr/include/boost/graph/breadth_first_search.hpp:42:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘examine_edge’
/usr/include/boost/graph/breadth_first_search.hpp:43:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘tree_edge’
/usr/include/boost/graph/breadth_first_search.hpp:44:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘non_tree_edge’
/usr/include/boost/graph/breadth_first_search.hpp:45:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘gray_target’
/usr/include/boost/graph/breadth_first_search.hpp:46:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘black_target’
/usr/include/boost/graph/breadth_first_search.hpp:47:7: error: ‘struct boost::predecessor_recorder<long unsigned int*, boost::on_tree_edge>’ has no member named ‘finish_vertex’
make: *** [file] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:21:07.113

`breadth_first_search`期望一个`BFSVisitor`. `record_predecessors`返回一个`EventVisitor`. 您需要使用`make_bfs_visitor`它才能使其工作。

```
breadth_first_search(g, s, visitor(make_bfs_visitor(record_predecessors(&p[0], on_tree_edge())))); 
```

# ruby - appfog gem install — 找不到命令

> ID：12880045
> 
> 赞同：1
> 
> 时间：2012-10-14T07:03:28.350
> 
> 标签：ruby, path, rubygems, appfog

我有一个要上传到 AppFog 的 Rails 应用程序。成功安装了命令行工具，`gem install af`但是当我想执行它时，它给了我错误：

```
~$ af login
-bash: af: command not found 
```

所以我去了我的 rbenv 目录，它就在那里：

```
~$ cd .rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/
af-0.3.18.7/ 
```

这是路径问题吗？我该如何解决？

* * *

环境：

*   OSX 山狮
*   rbenv + 红宝石 1.93 p194
*   红宝石 1.8.24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:29:26.123

似乎重新启动我的操作系统（或者可能是终端？）解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T16:13:31.517

我只需要将 af gem 安装为 sudo

我跑了：

```
sudo gem install af 
```

它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:20:30.367

您可以从路径运行命令***af吗？***

> cd *.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/af-0.3.18.7/bin*
> 
> 登录*_*

如果是，那么您需要在 Mac 中的配置文件（类似于 Ubuntu 中的 .bashrc）中包含此类路径，以便您可以从终端的任何位置运行。

# java - 如何将具有范围的随机数分配给二维数组维度

> ID：12880049
> 
> 赞同：0
> 
> 时间：2012-10-14T07:04:14.603
> 
> 标签：java, arrays

在 main 中，为第一维和第二维分配 2 个随机数（3 到 10 之间的整数）

我有这个，但 Math.random() 方法不起作用；不起作用

```
import java.lang.Math;

public class Homework2 {
public static void main(String[] args){

    double doubMatrix1[][] = (int) (Math.random()*(10-3+1)+3);
    double doubMatrix2[][];
    double doubMatrix3[][];

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:23:25.110

您的代码中的问题是您正在尝试使用 int 初始化 double 矩阵

类型必须相等！

这是您修复的代码。

```
import java.lang.Math;

public class Homework2 {
public static void main(String[] args){

    int d1 = (int) (Math.random()*(10-3+1)+3);
    int d2 = (int) (Math.random()*(10-3+1)+3);

    double doubMatrix1[][] = new double[d1][d2];
    double doubMatrix2[][];
    double doubMatrix3[][];

}
} 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:33:10.387

`Math.random()`返回 0.0 到 1.0 之间的分数。因此，`(int) (Math.random()*(10-3+1)+3)`您只能获得一个介于 3 到 10 之间的随机数。但是您将其分配给`double doubMatrix1[][]`. 所以可能你以错误的方式调用构造函数。您应该`r1, r2`根据老师教的方法生成两个不同的随机数，然后调用构造函数`double doubMatrix1[][] = double[r1][r2]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T17:28:20.377

看看这个，这可能会有所帮助：

```
// DMA of 2D array in C++
#include<iostream>
#include<iomanip>
using namespace std;
int main()
{
int x = 3, y = 3;

int **ptr = new int *[x];

for(int i = 0; i<y; i++)
{
    ptr[i] = new int[y];
}
srand(time(0));

for(int j = 0; j<x; j++)
{
    for(int k = 0; k<y; k++)
    {
        int a = rand()%5;
        ptr[j][k] = a;
        cout<<ptr[j][k]<<" ";
    }
    cout<<endl;
}
} 
```

我们在这里使用了一个指针并像二维数组一样处理它，使用 % 作为限制

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T07:06:35.740

要在 Java 中创建多维数组，请使用`new <type>[dim1][dim2]`，如以下代码所示：

```
Random rand = new Random();

int r1 = rand.nextInt(8) + 3;
int r2 = rand.nextInt(8) + 3;
double doubMatrix[][] = new double[r1][r2]; 
```

# javascript - 在数据表中设置默认排序列

> ID：12880051
> 
> 赞同：13
> 
> 时间：2012-10-14T07:04:56.397
> 
> 标签：javascript, jquery, datatables

我正在开发 Jquery 中的数据表插件。并且必须设置数据排序的默认列，所以我的意思是：

我有一个有 4 列的表，默认情况下数据按第 1 列排序，我希望数据应按第 2 列或第 3 列排序。

如何做到这一点：

```
$('#tblMainTable').dataTable({
    "bJQueryUI" : true,
    "sDom" : 'R<"H"lfr>t<"F"ip<',
    "aoColumns" : [ 
        {"bSortable" : false}, 
        null, 
        null,
        null,
        {"bSortable" : false}, 
        {"bSortable" : false}
    ],
    "aaSorting": [[ 2, "desc" ]]
}); 
```

我在“aaSorting”中指定了这一点，但没有得到结果。

请解释一下？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-14T07:21:56.410

[数据表api](http://datatables.net/api)中的示例是这样的：

```
$(document).ready(function() {
  var oTable = $('#example').dataTable();

  // Sort immediately with columns 0 and 1
  oTable.fnSort( [ [0,'asc'], [1,'asc'] ] );
} ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-12T19:33:25.373

我知道你现在有了答案，但这里有一种来自 DatatTable API 的更简单的方法

```
$('#tblMainTable').dataTable({
    "order": [[1, "desc"], [2, "desc"]]
}); 
```

请注意，索引从 0 '零'开始，因此该示例的意思是“第 2 列和第 3 列是默认排序列及其降序（使用 asc 表示升序）。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-31T07:18:41.333

我知道你得到了答案，但只是为了记录

您还可以使用参数从服务器端对其进行排序

```
params.iSortCol_0 
```

它基本上是一个整数 0,1,2.. 表示第一、第二、第三.. 列。所以你可以在获取数据之前写一个开关..

```
 String sortOn = 'firstcolumnname'; //default
 switch(params.iSortCol_0 as int) {

   case 0:
     sortOn = 'id';
     break;
  ......

  } 
```

并按您的查询顺序包含此内容

```
 order by ${sortOn} 
```

希望这会有所帮助

# ruby - 在 ruby 中检查哈希的所有值是否都是正确的值（来自预定义的值集）

> ID：12880057
> 
> 赞同：0
> 
> 时间：2012-10-14T07:05:59.300
> 
> 标签：ruby, hash

我有一个哈希表，其中有多个值被传递给一个函数我不知道键的名称，但我知道键的值必须等于字符 AS 或 X。如何轻松检查哈希中的所有值表是否等于那些字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:44:15.397

NullUserException 很好，你也可以

```
match_values = %w(A S X)
hash.values.all? { |value| match_values.include?(value) } 
```

# ruby-on-rails - Rails：记录用户未读通知的数量

> ID：12880066
> 
> 赞同：12
> 
> 时间：2012-10-14T07:08:42.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有一个处理用户活动通知系统的活动模型。当某个动作发生时（例如正在创建新文章），活动观察者会创建一个新活动。现在我想记录当前用户有多少活动通知没有看到（类似于 facebook 上的通知宝石）。每次用户单击他们的通知链接时，该数字应重置为 0，并且创建的每个通知都应将计数增加 1。我将在哪里为每个用户存储此数据？使用会话工作还是其他更好的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-14T07:54:42.093

有几种可能的方法：规范化和非规范化。我将从标准化开始：

## 方法一：归一化

听起来您在这里使用了三个模型：活动、通知（“user_activities”）和用户。如果我在这里的假设有误，请纠正我：

*   Activity belongs_to :user 和 has_many :notifications （一个用户执行一个活动，多个用户收到该活动的通知）
*   通知belongs_to :activity 和belongs_to :user 并具有“读取”属性/标志
*   用户 has_many ：通知

在活动的 after_create 回调中，模型应该确定哪些用户需要该活动的通知，然后通过为每个用户创建通知对象来通知他们。

在通知上，您可以创建一个名为 unread 的类方法，它指定活动的读取标志为假的条件：

```
def self.unread
  where(:read => false)
end 
```

然后，要访问用户的未读通知计数，只需调用：

```
user.notifications.unread.count 
```

当用户查看他的通知时，调用：

```
user.notifications.unread.update_all(:read => true) 
```

## 方法 2：非规范化

在这种方法中，每当创建活动时，它应该为每个通知用户手动增加一个计数器。您可以通过以下任一方式完成此操作：

*   用户的“unseen_count”属性
*   非关系型数据库（如redis）中的键值对

在活动中：

```
def users_to_notify
  # Find a list of users to notify
end

def notify_users(users)
  users.each &:notify
end

def after_create
  notify_users(users_to_notify)
end 
```

在用户中：

```
def notify
  update_attributes(:unseen_count => unseen_count + 1)
end

def see_activities
  update_attributes(:unseen_count => 0)
end 
```

这种方法的缺点是您已经消除了通知模型，因此用户只有原始的通知计数，并且无法查看通知及其相关活动的详细列表。您可以使用混合方法，但请记住，处理两个真相来源以获得未见通知计数是有风险的。

[附带说明：在观察者](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)中调用 notify_users而不是直接在模型上调用 after_create可能更有意义：

```
class ActivityObserver < ActiveRecord::Observer
  def after_create(activity)
    activity.users_to_notify.each &:notify
  end
end 
```

如果您使用观察者，您可以删除 Activity#notify_users 和 Activity#after_create。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T08:30:11.347

请看看这个宝石：
[https ://github.com/ledermann/unread](https://github.com/ledermann/unread)

它由我编写，并以更高效的方式处理任何 ActiveRecord 对象的已读/未读状态。

# python - 如何打包我的 Python 3 程序以便我可以发布它

> ID：12880068
> 
> 赞同：4
> 
> 时间：2012-10-14T07:09:31.227
> 
> 标签：python, python-3.x, packing

我正在使用 Pygame。我应该考虑如何以及哪些文件包含在脚本中，以便每个人都可以运行它？我正在使用 python 3.2，因此 py2exe 不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:45:47.970

使用[**cx_Freeze**](http://cx-freeze.sourceforge.net/)！真的行。而且它的作者也没有忽视 Python 3 的存在。事实上，Python 3.3 的版本已经出来了，仅仅几天就发布了。

# android - 在 Android 上管理网络带宽

> ID：12880085
> 
> 赞同：2
> 
> 时间：2012-10-14T07:12:21.840
> 
> 标签：android, voip, bandwidth, bandwidth-throttling

是否有一个 API 可以动态控制每个应用程序在 Android 中占用多少带宽？

例如，如果我想开始使用 VOIP 应用程序并且我想确保它获得所有/大部分可用带宽？

# android - 在 SQLite 中选择查询？

> ID：12880086
> 
> 赞同：0
> 
> 时间：2012-10-14T07:12:42.457
> 
> 标签：android, sqlite, select-query

我正在使用该函数从表中检索一个值，

```
public ArrayList selectValue(SQLiteDatabase sqliteDB, String contactEmail){
        Cursor c = sqliteDB.rawQuery("SELECT * FROM " + TABLE_NAME + " WHERE ContactEmail='"+contactEmail+"'",null);
        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                    double contactId = c.getDouble(c.getColumnIndex("ContactId"));
                    results.add("ContactEmail: " +contactEmail+ ",ContactId: " + contactId);
                }while (c.moveToNext());
            } 
        }
        return results;
    } 
```

但是上面的函数从表中检索所有值..不确定查询有什么问题..

我也尝试过硬编码这样的值，

```
Cursor c = sqliteDB.rawQuery("SELECT * FROM " + TABLE_NAME + " WHERE ContactEmail='peter@peter.com'",null); 
```

但这也给出了所有行。我在这里错过了什么吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:59:36.537

谢谢大家的回复。。我解决了这个问题。。

这就是我更改代码并使其工作的方式，

```
public String selectValue(SQLiteDatabase sqliteDB, String contactEmail){

        String contactId="Nothing";

        Cursor c = sqliteDB.rawQuery("SELECT * FROM " + TABLE_NAME + " where ContactEmail = '"+contactEmail+"'", null);
        if (c != null ) {
            if  (c.moveToFirst()) {
                contactId = c.getString(c.getColumnIndex("ContactId"));
            }   
        }
        return contactId;
    } 
```

再次感谢！！祝你有美好的一天！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T07:40:19.390

尝试这样做：

```
 SQLiteDatabase mDb;
    DataBaseHelper mDbHelper;
    mDbHelper = new DataBaseHelper(context);
    mDb = mDbHelper.getWritableDatabase();
    Cursor cursor = mDb.query(TABLE_NAME, null, ContactEmail + " =? ", new String[] { "peter@peter.com" }, null, null, null);
    //Continue with your code

private static class DataBaseHelper extends SQLiteOpenHelper {

        /* Create a helper object to create, open, and/or manage a database */
        DataBaseHelper(Context context) {
            super(context, TABLE_NAME, null, DATABASE_VERSION);
        }

        /* Called when the database is created for the first time */
        @Override
        public void onCreate(SQLiteDatabase db) {
                     //Your code
        }

            /* Called when the database needs to be upgraded*/ 
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                      //Your code
        }
} 
```

# php - 在 PHP 中标记字符串中的第 N 个字符

> ID：12880090
> 
> 赞同：1
> 
> 时间：2012-10-14T07:13:42.980
> 
> 标签：php, string

我想知道是否有标记第*n*个字符的好方法。目前我有这个代码，但它有一些缺陷。

```
$string ='Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque ac arcu sit amet lorem mollis dignissim ac ut metus. Aliquam sed nulla ut risus sollicitudin luctus vitae eget quam. Nam velit diam, ullamcorper id tempus ac, iaculis sed arcu. Sed sed lectus rhoncus leo vehicula accumsan consequat a risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Proin posuere, diam scelerisque suscipit accumsan, enim tortor lobortis sapien, a faucibus sapien metus eu erat. Phasellus condimentum elit ac nisi fringilla imperdiet. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris ac lectus quis lorem ornare ornare non vel nunc. Fusce et odio at leo interdum cursus eget sed magna. Nam convallis vehicula fermentum. Etiam turpis mauris, convallis et sollicitudin quis, rutrum in sapien. Suspendisse purus eros, sagittis vitae venenatis tincidunt, imperdiet molestie sem. Vestibulum eleifend urna vitae tortor suscipit consequat. Praesent placerat magna a ligula fringilla dapibus. Ut volutpat purus eu felis elementum eu laoreet nulla eleifend.';

echo mark_nth_char($string, 100);
function mark_nth_char($string, $pos, $prefixlen=10, $suffixlen=10, $fixchar='...') {
    $output = $fixchar;
    for ($i = $pos - $prefixlen ; $i < $pos + $suffixlen; $i++ ) {
        if ($i == $pos)
            $output .= '<b><font color="red">' . $string[$i] . '</font></b>';
        else 
            $output .= $string[$i];
    }
    return $output . $fixchar;
} 
```

问题：

1.  如果传递的数字小于 $prefixlen`，则会导致错误。
2.  如果传递的数字超过总字符串长度，则会导致错误。
3.  如果总字符串长度小于 和 的总和`$prefixlen`，`$suffixlen`则不应添加它们。

我想在匹配字符（具有指定位置的字符）周围包含字符串。可能还有其他我不知道的问题，但不是解决这些问题，我想知道是否有更好的方法，可以以更有效和优雅的方式完成。

感谢你的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:24:31.080

您的函数可能包含以下单个语句：`if($pos<strlen($string) return substr($string,0,$pos-1).'<b><font color="red">' . $string{$pos-1} . '</font></b>'.substr($string,$pos+1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:11:00.057

好的，这似乎到目前为止有效。请让我知道它是否有缺陷。或任何改进建议将不胜感激。

```
$string ='123456789012345678901234567890';
echo '<p>' . mark_nth_char($string, 4) . '</p>';
echo '<p>' . mark_nth_char($string, 15) . '</p>';
echo '<p>' . mark_nth_char($string, 28) . '</p>';

$string = "Hello World.";
echo '<p>' . mark_nth_char($string, 10) . '</p>';
echo '<p>' . mark_nth_char($string, 6) . '</p>';

function mark_nth_char($string, $pos, $prefixlen=10, $suffixlen=10, $fixchar='...') {

    if (!($pos<strlen($string) && $pos > 0)) 
        return;

    // prefix
    $startpos = ($pos < $prefixlen) ? 0 : $pos - $prefixlen ;
    $length = ($pos < $prefixlen) ? $pos - 1 : $prefixlen - 1;
    $prefix = substr($string, $startpos, $length);
    if ($pos > $prefixlen) 
        $prefix = $fixchar . $prefix;

    // match
    $match = '<span style="background-color: FEE333; font-weight:bold; color:red; font-size : xx-large;">' . $string{$pos-1} . '</span>';

    // suffix
    $startpos = $pos;
    $suffix = substr($string, $startpos, $suffixlen);
    if (strlen($suffix) >= $suffixlen) 
        $suffix .= $fixchar;

    // output
    return $prefix . $match . $suffix;

} 
```

我还想知道如何为该位置传递一个负数，以便它向后找到字符。但要编码它真的让我绞尽脑汁。

# node.js - 连接到 Node 上的 MongoHQ，错误

> ID：12880092
> 
> 赞同：0
> 
> 时间：2012-10-14T07:13:53.367
> 
> 标签：node.js, mongodb, mongohq

我正在尝试将我构建的应用程序连接到 MongoHQ 数据库。

这是代码：

```
mongo = require('mongodb')
Server = mongo.Server
Db = mongo.Db
BSON = mongo.BSONPure;
con = null;

server = new Server('staff.mongohq.com', 'THE_PORT', {auto_reconnect: true});
DBCon = new Db('THE_DB', server, {safe: false});
DBCon.authenticate('test_user', 'test_pass', function() {});
DBCon.open(function(err, db) { if(!err) { con = db; } }); 
```

我有在 MongoHQ 中创建的数据库和用户。当我从命令行连接时，一切正常。

但是当我运行我的应用程序时，我收到了这个错误：

```
return this.connectionPool.getAllConnections();

TypeError: Cannot call method 'getAllConnections' of undefined 
```

它无法连接到数据库。但是当我在没有身份验证的情况下连接到我的本地数据库时，它可以正常工作。

那么错误是什么，我应该如何解决它？

谢谢！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:23:23.387

在建立连接之前发送您的身份验证调用。您需要将身份验证调用嵌套在“打开”回调中，这样的事情应该可以工作：

```
mongo = require('mongodb')
Server = mongo.Server
Db = mongo.Db
BSON = mongo.BSONPure;
con = null;

server = new Server('staff.mongohq.com', 'THE_PORT', {auto_reconnect: true});
DBCon = new Db('THE_DB', server, {safe: false});
DBCon.open(function(err, db) {
  if(!err) {
    db.authenticate('test_user', 'test_pass', function(err){
      if(!err) con = db;
    }
  }
}); 
```

# linux - linux nasm程序集查找变量中保存的位数

> ID：12880093
> 
> 赞同：1
> 
> 时间：2012-10-14T07:14:15.490
> 
> 标签：linux, assembly, x86, nasm

我正在编写一个程序来打印从 0 到 100 的所有数字，并且我需要找到一个变量（在本例中为变量`counter`）所持有的位数。

这是我的代码：

```
SECTION .data
len EQU 32

SECTION .bss
counter resd len 
digit1 resd len
digit2 resd len
digit3 resd len

SECTION .text
GLOBAL _start
_start:
nop

Print:
mov eax, 4
mov ebx, 1
mov ecx, counter
mov edx, len
int 80h 

Set:
mov BYTE [counter], 1

Divide:
; HERE IS WHERE I NEED TO FIND THE LENGTH OF THE VARIABLE COUNTER
; initial division
mov ax, [counter]   ; number we want to print
mov ch, 10    ; we divide by ten to siphon digits
div ch        ; divide our number by 10

; al now has 11, ah has 1
mov dh, ah             ; save the remainder in dh
xor ah,ah
mov ch, 10             ; refill ch with the divisor
div ch                 ; al now has 1, ah now has 1

Move:                     ; now to move our digits to a printable state
mov [digit1], dh      ; first digit is in edx
mov [digit2], ah
mov [digit3], al

Adjust:
add BYTE [digit1], '0'
add BYTE [digit2], '0'
add BYTE [digit3], '0'

Print:
mov eax, 4
mov ebx, 1
mov ecx, digit1
mov edx, len
int 80h

mov eax, 4
mov ebx, 1
mov ecx, digit2
mov edx, len
int 80h

mov eax, 4
mov ebx, 1
mov ecx, digit3
mov edx, len
int 80h

Exit:
mov eax, 1
mov ebx, 0
int 80h 
```

我需要找到长度，以便知道要划分多少次以及打印变量计数器的位数。

我怎样才能找到它有多长？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:27:12.783

对于 range 中的数字`0..100`，我只需在边界处进行比较，伪汇编器如下：

```
 mov ax, [counter]

    mov cx, 3             ; default length
    cmp ax, 100           ; >= 100, use 3
    bge done

    dec cx                ; set length to 2
    cmp val, 10           ; >= 10, use 2
    bge done

    dec cx                ; set length to 1

done:
                          ; cx now holds the digit count. 
```

这实际上最多可以处理 999 个，但如果您想扩大范围，您还可以在 100 个之前添加更多条件检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:03:59.690

阿基举了个例子！用“-S”开关编译它，看看编译器用它做了什么——尽管这可能没有太大帮助。:)

你问如何算出位数。我见过代码（来自一本著名书籍的作者！），它执行一个完整的`div`循环，直到商为零，只是为了计算数字。然后他做了另一个`div`循环来找到他们！执行 >10、>100、>1000 等将起作用。但为什么你需要知道？您可以一直保持`div`直到商为零，然后计算数字。实际上，您可以通过将商与 9 进行比较来保存`div`(`div`非常慢！) - 如果`be`您的最后一位数字在 al 中。`div`IMO ，做额外的事情更简单。:)

我们以“错误”的顺序得到余数/数字。我知道解决这个问题的三种方法。我认为“最简单”的是将它们推入堆栈，对它们进行计数，然后按照我们想要存储/打印它们的顺序将它们弹出，在之前或之后添加“0”。

另一种方法是从缓冲区的“后部”开始并“向前”工作。这就是阿基的颂歌所做的。对于 C 兼容代码，返回一个以零结尾的字符串很好，但 sys_write 不知道以零结尾的字符串，它想知道长度。（没问题，我们可以找到“zstring”的长度）请注意，这不会到达缓冲区的开头。如果您不关心“C 兼容”代码，您可以返回“我们在缓冲区中到达的位置”和长度 - 也许在sys_write 想要的位置`ecx`和位置。`edx`或者您可以空格填充到缓冲区的开头。右对齐的数字打印在列中看起来不错。:)

还有一种方法是继续将它们“向后”放入缓冲区并在最后做一个“反向字符串”。

这些方法都不是很快。`div`很慢，期间！我“拥有”一些来自 Terje Mathieson（“光速”解决方案专家）的代码，这些代码不使用`div`但我不理解也不使用它。如果您赶时间，可以在各种优化手册中找到它。:)

将自己限制为 100 并不会带来太多好处。使用完整的 32 位寄存器编写例程同样容易（也许更容易），并且 CPU 对此很满意。如果您需要处理负数，那只会稍微复杂一些。如果您在此处找不到示例，可以在 Nasm 论坛上找到一些示例，但您可以自己尝试一下，就像您正在做的那样，这是一个有趣的练习。

呃...看...保留“太多”内存可能会使您的程序“臃肿”，但不会造成任何伤害。保留“不够”的内存是一个错误！所以你最好在“太多”方面犯错。仍然...

 ````
SECTION .data
len EQU 32

SECTION .bss
counter resd len 
digit1 resd len
digit2 resd len
digit3 resd len 
```

...使用一个 128 字节的缓冲区，并为单个数字/字符打印 32 个字节，似乎很多。:)

最好的，弗兰克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:33:47.193

通常这是通过内部缓冲区完成的（实际上堆栈会这样做：）

你除以 Y=X mod 10（或 Y=X mod base），X=X div base，直到 X=0（并压入每个 mod Y）计算除数，然后从堆栈 C 中弹出每个结果的次数并写入输出流。

```
void print_number(int eax, int ebx) {  // ebx = base, eax = number
   int ecx = 0;
   do {
      edx = eax % ebx;
      eax = eax / ebx;
      push(edx);
      ecx++;
   } while (eax);

   while (ecx) {
      pop (eax);
      putch(eax+'0');
      ecx--;
   }
} 
```

关键是您最终会根据需要进行多次划分。

稍微优化一点的事情是[再次在 C 中鼓励您自己的思考]...

```
void print_number(int a, int base) {
     char string[10];
     static *ptr = string+9;  // points to the last char of string
     *ptr--=0;                // write ending ASCII Zero.
     *ptr='0';
     while (a) {
          *--ptr= '0'+(a % base);  // works for base = 2-10
          a/=base;
     }
     printf("%s",ptr);
} 
```

你能找出为什么这有效（或无效）吗？`

# php - 如何在创建的文本文件上添加新行？（php）

> ID：12880094
> 
> 赞同：0
> 
> 时间：2012-10-14T07:14:18.647
> 
> 标签：php

我正在编写一个 php 脚本。如下：

```
<?
$a='a b c d e';
$b=explode(" ",$a);
foreach ($b as $c) {

$filename = 'test.txt';
$fp = fopen($filename, "a+");
$write = fputs($fp, $c."/n");
fclose($fp);

}
?> 
```

输出（test.txt）如下：

```
a/nb/nc/nd/ne/n 
```

但我想得到这样的文本文件：

```
a
b
c
d
e 
```

任何机构都可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T07:16:07.610

转义序列用`\`not表示`/`- 因此您需要使用 "\n" 将换行符放入您的字符串（和文件）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-12T08:11:46.390

在第 8 行，您可以添加 \n\r

这将使它从 Windows/MAC/LINUX/UNIX 跨平台。

例如。$write = fputs($fp, $c."\r\n");

# android - 更新Android游标中的单行

> ID：12880095
> 
> 赞同：0
> 
> 时间：2012-10-14T07:14:43.903
> 
> 标签：android, performance, cursor

在我的应用程序中，我将 ListView 与 CursorAdapter 一起使用。当数据库某行中的某些数据发生更改时，我为 CursorAdapter 重新创建游标。

这个过程很昂贵。有什么方法可以更新光标中只需要的行吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:47:22.230

我认为没有更好的方法。但是 CursorAdapter 只加载那些可见的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:17:37.343

没有。尽管我们可能希望看看`MatrixCursor`它是否对您有用。

# javascript - 如何将变量从 JavaScript 函数发送到文本框？

> ID：12880097
> 
> 赞同：3
> 
> 时间：2012-10-14T07:15:01.890
> 
> 标签：javascript, function, variables, object

> **可能重复：**
> [使用 javascript 设置输入字段的值](https://stackoverflow.com/questions/7609130/set-the-value-of-a-input-field-with-javascript)

好的，所以我试图让我的函数结果返回输入框（这是计算器的一部分）。一个例子是：我在计算器中输入 1，然后它执行 1+2+3+4+5+6+7+8+9+10 并通过下面的函数将 55 输出到警报消息框中。我试图让结果显示在框内而不是警报框内。

下面我提供了以下代码：“L”函数、“输入”框和控制该函数的按钮 onClick。

我已经在这个问题上待了大约一个星期，试图弄清楚。如果您需要计算器中的更多代码，我可以提供。

```
function Loop(input)
{
     var num = parseInt(input) + 10;
     var i=0;
     var sum=0;

    while(i < num)
        {
            sum=sum+i;
            i++;
        }
    alert(sum);

} 
```

```
<input type="button" value="   L    " name="L" onClick="Loop(this.form.display.value)">

<form><input name="display"  id="input" size=25><form> 
```

这是其余的代码，因为我在下面得到的两个答案不起作用（尽管感谢您尝试解决！）

```
<html> 
<head>
<title>Assignment 2</title>
<SCRIPT LANGUAGE="JavaScript">
<!-- Functions
function addChar(input, character) 
{
if(input.value == null || input.value == "0")
    input.value = character;
else
    input.value += character;
}

function changeSign(input) 
{
if(input.value.substring(0, 1) == "-")
    input.value = input.value.substring(1, input.value.length);
else
    input.value = "-" + input.value;
}

function compute(form)  
{
    form.display.value = eval(form.display.value);
}

function Loop(input)
{
     var num = parseInt(input) + 10;
     var i=0;
     var sum=0;

    while(i < num)
        {
            sum=sum+i;
            i++;
        }
    document.getElementById("input").value=sum;

}
// End -->
</SCRIPT>
</head>
<body>
<div align="center">
<span style="font-weight:bold" size="20">Calculator</span>
<br>
<!-- Prints my name -->
<form  name="MyName" id="form1" style="font-weight:bold" size="20">
<script>
document.write("Mallery, Cody");
</script>
</form>
<!-- functions -->

<!-- The Calculator! -->
<center><form>
<table border=4>
<tr>
<td>
<input name="display"  id="input" size=25>
<br>
</td>
</tr>
<tr>
<td>
<input type="button" value="    7    " onClick="addChar(this.form.display, '7')">
<input type="button" value="    8    " onClick="addChar(this.form.display, '8')">
<input type="button" value="    9    " onClick="addChar(this.form.display, '9')">
<input type="button" value="    /    " onClick="addChar(this.form.display, '/')">
<br>

<input type="button" value="    4    " onClick="addChar(this.form.display, '4')">
<input type="button" value="    5    " onClick="addChar(this.form.display, '5')">
<input type="button" value="    6    " onClick="addChar(this.form.display, '6')">
<input type="button" value="    *    " onClick="addChar(this.form.display, '*')">
<br>

<input type="button" value="    1    " onClick="addChar(this.form.display, '1')">
<input type="button" value="    2    " onClick="addChar(this.form.display, '2')">
<input type="button" value="    3    " onClick="addChar(this.form.display, '3')">
<input type="button" value="    -    " onClick="addChar(this.form.display, '-')">
<br>

<input type="button" value="   0     " onClick="addChar(this.form.display, '0')">
<input type="button" value="    N    " onClick="changeSign(this.form.display)">
<input type="button" value="    +    " onClick="addChar(this.form.display, '+')">
<input type="button" value="   C   " onClick="this.form.display.value = 0 ">
<br>
<input type="button" value="   L    " name="L" onClick="Loop(this.form.display.value)" 
                                               title="If the L button is pressed, the digit present in the results box will be looped through and added up to the 'digit plus 10'.For example: After the calculator has been reset. The user can press the 1 button, then the L button 55 should be displayed in the calculator 1 + 10 = 11, therefore start with 1 and loop until less than 11 adding all of the numbers 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 = 55">
<input type="button" value="   =    " name="enter" onClick="compute(this.form)">
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T07:28:35.777

把它放在你的 JS 函数中而不是你的警报中

```
document.getElementById("input").value=sum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:21:07.617

我假设您输入的文本字段是用 type="text" 正确编写的。

您可以为元素分配一个 id，然后使用 javascript 设置其值。使用获取对象`document.getElementbyId("<Id>")`

然后设置值`document.getElementbyId("<Id>").value=<value>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:21:45.113

尝试

```
document.forms[0].display.value=sum; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T07:30:28.800

您只需要进行 3 次更改。然后您可以在任何文本输入上使用相同的功能，就像现在一样。

首先，您要将元素本身传递给函数

```
function Loop(input)
{ 
```

变成

```
function Loop(inputElement)
{
  var input = inputElement.value; 
```

接下来，将您的警报输出语句更改为：

```
inputElement.value = sum; 
```

最后，更改您的 html（删除“.value”）

```
onClick="Loop(this.form.display)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T07:30:49.897

您没有正确检索输入值。你可以这样做：

```
<input name="display" id="input1" size="25">
<form>
    <input type="button" value="   L    " name="L" onClick="Loop()">
<form>
<script type="text/javascript">

function Loop()
{
    var input = document.getElementById("input1").value;
    var num = parseInt(input) + 10;
    var sum=0;

    for(var i=0; i<num; i++)
    {
        sum = sum+i;
    }

    document.getElementById("input1").value = sum;
}

</script> 
```

我还用 for 替换了while *，**因为*在这种情况下，我认为它更容易阅读。

 ** * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-14T07:48:42.650

```
<input type="button" value="   L    " name="L" onClick="Loop(this.form.display.value)"> 
```

`this`这里指的是`<input>`它没有形式，你`document`有形式，所以： `document.forms[0].display.value`会给你你需要的；

* * *

对于您的更新：http:
[//jsfiddle.net/jNqEv/3/](http://jsfiddle.net/jNqEv/3/)

```
function Loop(input)
{
     var num = parseInt(input) + 10;
     var i=0;
     var sum=0;

    while(i < num)
        {
            sum=sum+i;
            i++;
        }
    // NOTE: it's not a good idea to give an item `input` ID;
    document.getElementById("input").value=sum; // instead of document.getElementbyId("input").value=sum; 
    // what's this for?
    // document.form[0].display.value=sum; 
}​ 
```*

# c++ - OpenCV 加速 Mat 迭代

> ID：12880108
> 
> 赞同：1
> 
> 时间：2012-10-14T07:18:35.367
> 
> 标签：c++, opencv

我需要在 HSV 颜色空间中迭代一个 3 通道矩阵，它非常慢。大约需要 2.5 秒。

```
cv::Mat img = cv::imread( "image.jpg" );
cv::Mat img32FC3;

img.convertTo( img32FC3, CV_32FC3 );
cv::cvtColor( img32FC3, img32FC3, CV_BGR2HSV );
int height = img32FC3.rows;
int width = img32FC3.cols;
cv::Size size = img32FC3.size();
if( img32FC3.isContinuous() ) {
  size.width *= size.height;
  size.height = 1;
}
size.width *= 3;
for( int i = 0; i < size.height; i ++ ) {
    float* ptr = img32FC3.ptr<float>(i);

    for( int j = 0; j < size.width; j += 3 ) {
        h = (ptr[ j ]);
        s = (ptr[j +1 ]);
        v = (ptr[j +2 ]);
    }
}

cv::cvtColor( img32FC3, img32FC3, CV_HSV2BGR );
img32FC3.convertTo( img, CV_8UC3 );
imwrite("test.jpg", img ); 
```

上面的代码改编自[openCV 的文档，](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#Mat%3a%3aisContinuous)其中声明它是高性能的。所以我想知道如何加快速度，因为 2.5 秒真的非常非常慢:(。

顺便说一句：图像为 3744x5616 像素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T02:28:33.180

您不应该直接访问垫子的数据，因为有时它不会像您期望的那样存储。在这里检查[我的答案](https://stackoverflow.com/questions/7860599/why-does-assertion-fail-here/13187395#13187395)。

另一种方法是使用 Mat 迭代器。根据 [opencv_tutorials.pdf，ver 2.4.2 pp. 89-92]，它比我链接中的嵌套循环稍慢。（对于大图像，您的速度会慢 5%，但请注意，它们只使用了 MatIterator，而不是可以通过一个好的编译器进一步优化的*const 。）*

```
MatConstIterator_<Vec3b> it = M.begin<Vec3b>(), it_end = M.end<Vec3b>();
for(; it != it_end; ++it)
{ 
  //do sth read-only otherwise use MatIterator_<Vec3b>
  b = (*it)[0]; 
  g = (*it)[1]; 
  r = (*it)[2]; 
} 
```

`<double>`如果是灰度，来自 ocv2.4.2 refman p19。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:51:54.033

加速的最佳机会是并行化循环。OpenCV 使用 TBB 作为多线程环境，你可能想检查一下。顺便说一句，您不需要对大小等进行所有计算。您已经检查了矩阵是连续的（），因此您可以在`float ptr = reinterpret_cast<float>(img32FC3.data)`循环中获取指针：

```
for (size_t i = ; i < img32FC3.rows*img32FC3.cols; ++i, ptr +=3) {
  // do something
} 
```

# java - Java - 通过二叉树的路径的最大总和

> ID：12880110
> 
> 赞同：1
> 
> 时间：2012-10-14T07:18:54.237
> 
> 标签：java, recursion, binary-search-tree

我正在尝试为通过二叉树的路径的最大总和编写一种方法：

```
public class ConsTree<T> extends BinaryTree<T>
{
    BinaryTree<T> left;
    BinaryTree<T> right;
    T data;

    public int maxSum() 
    {
    }
} 
```

如图所示，每棵树在其左侧和右侧都包含一棵树，以及一个泛型类型的数据。我对如何开始这个有点困惑。如果有人可以就算法的外观提供帮助或让我朝着正确的方向前进，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:41:58.647

递归思考的方法是考虑案例。在我们的例子中，我们查看单个节点并可以决定它有哪些路径：

1.  如果节点没有子节点，则唯一的路径是单例路径（由该节点本身组成）。
2.  如果节点只有一个子节点，则所有路径都通过该子节点。
3.  否则，该节点有两个孩子。然后，所有路径都通过它的两个孩子之一。

在情况 1 中，最大值必须是该节点的值。在情况 2 中，最大值是该节点的值，加上其子节点的最大路径和（因为该路径通过唯一的子节点扩展到父节点的路径）。在情况 3 中，最大值是它的两个孩子的最大 max-path-sum（因为最好的路径必须经过两个孩子中的一个，并且父母可以看到孩子的最佳路径中哪一个更好）。

因此，代码非常简单。在这里，由于您返回一个`int`，我将假设`T = int`。

```
public int maxSum() {
    /* case 1 */
    if(left == null && right == null)
        return data;

    /* case 2 */
    if(right == null)
        return data + left.maxSum();
    else if(left == null)
        return data + right.maxSum();

    /* case 3 */
    return Math.max(data + left.maxSum(), data + right.maxSum());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T01:41:38.027

```
private static int max = Integer.MIN_VALUE;

public static int maxPathSum(TreeNode root) {
    int rd = dfs(root);
    return rd > max ? rd : max;
}

// close paths:
// 1 left leaf
// 2 right leaf
// 3 left + root + right
//
// open paths:
// 4 root
// 5 left + root
// 6 right + root
private static int dfs(TreeNode root) {
    if (root.left == null && root.right == null) {
        return root.val;
    }
    if (root.left == null && root.right != null) {
        int rPathMax = dfs(root.right);
        max = rPathMax > max ? rPathMax : max;
        return Math.max(root.val, rPathMax + root.val);
    }
    if (root.right == null && root.left != null) {
        int lPathMax = dfs(root.left);
        max = lPathMax > max ? lPathMax : max;
        return Math.max(root.val, lPathMax + root.val);
    }
    int lPathMax = dfs(root.left);
    int rPathMax = dfs(root.right);
    int closePathMax = lPathMax + rPathMax + root.val;

    int innerMax = Math.max(closePathMax, Math.max(lPathMax, rPathMax));
    max = innerMax > max ? innerMax : max;
    return Math.max(root.val, Math.max(lPathMax + root.val, rPathMax + root.val));
} 
```

# java - Java 错误：需要在 actionPerformed 中将变量声明为 final，但我需要更改它

> ID：12880112
> 
> 赞同：0
> 
> 时间：2012-10-14T07:19:02.963
> 
> 标签：java, swing, variables, timer, actionlistener

[Robin](https://stackoverflow.com/users/1076463/robin)已经解决了这个问题。谢谢罗宾！

我想要做的背后的想法是制作一个每 X 秒执行一次动作的计时器，但 X 必须在使用之间进行更改。

现在我正在这样做：

```
 try {
        final FileWriter fstream = new FileWriter("timetest.log");
        final BufferedWriter out = new BufferedWriter(fstream);

        ActionListener task_performer = new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                critical_requests[0]++;
                try {
                    System.out.println("DEBUG: Critical Section requests: " + critical_requests[0] + "\n");
                    out.write("Critical Section request:\t" + critical_requests[0] + "\n");
                } catch (IOException e) {
                    System.out.println(e.getMessage() + "\n");
                }
                ((Timer)evt.getSource()).setDelay( 150 + (rand.nextInt(10) * time_unit ));
            }
        };
        new Timer(wait_delay, task_performer).start();
        System.out.println("Entering while loop\n");
        while(true) {
            if(critical_requests[0] >= 60){
                try {
                    out.close();
                } catch (IOException e) {
                    System.out.println("Close failed for some reason:\t" + e.getMessage() + "\n");
                    System.exit(-1);
                }
                System.exit(0);
            }
            //System.out.println("" + critical_requests[0] + "\n");    // Debug
            critical_requests[0] = critical_requests[0];    // Java is an insane language and it requires me to have this line here
        }
    } catch (IOException e) {
                System.out.println(e.getMessage());
                System.exit(-1);
    } 
```

我得到的错误是：

```
local variable is accessed from within inner class; needs to be declared final 
```

我尝试将其中一些设为最终值，但随后我无法更改侦听器内部的值。加上一些变量没有意义使 final （BufferedWriter out，rand）。

所有 5 个编译器错误是：从内部类中访问局部变量 rand；out、rand 和 wait_delay 需要分别声明为 final 一个，critical_requests 需要声明两个。

我该如何调和呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:50:52.523

查看您的代码，问题是变量`wait_delay`和`critical_requests`变量。

1.  没有真正需要在`ActionListener`. `Timer`在它对延迟产生任何影响之前，您必须重新设置它`Timer`
2.  `Timer`每次更改变量时创建一个新对象`wait_delay`会产生很多`Timer`实例，`Timer`默认情况下每个实例都会重复运行。只有当你打电话`setRepeats( false )`时，他们才会真正停下来。查看您的评论（这应该是问题的一部分），您想更新`Timer`
3.  如果你真的需要改变`critical_requests`里面的变量`ActionListener`，你可以将它存储在一个最终的数组中

所以我建议将您的代码更改为类似

```
final int[] critical_requests = new int[]{ 0 };
final Outputstream out = ...;
ActionListener task_performer = new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            critical_requests[0] = critical_requests[0] + 1;
            try {
                out.write("Critical Section request:\t" + (critical_requests[0]) + "\n");
                ((Timer)evt.getSource()).setDelay( 10 + (rand.nextInt() % 10) );
            } catch (IOException e) {
                System.out.println(e.getMessage());
                System.exit(-1);
            }
        }
};
Timer the_one_and_only_timer = new Timer( wait_delay, task_performer ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:31:23.087

通常，您有两种选择：

*   将其作为类字段。
*   使用另一个变量并将旧变量分配给它，类似于：

```
ActionListener task_performer = new ActionListener()
{
    public void actionPerformed(ActionEvent evt)
    {
        int temp = wait_delay; // assuming wait_delay is final
        temp = ...; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T07:32:29.300

在方法中制作“wait_delay”非局部变量。把它排除在方法定义之外。

# java - 关于比较两个字符串

> ID：12880116
> 
> 赞同：1
> 
> 时间：2012-10-14T07:15:41.527
> 
> 标签：java, string

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我是编程新手，我正在使用java。这是我写的一个程序：

```
class HelloApp {

    static String hi;

    public static void main(String[] args) {
        int length = args.length;
        if (length > 0) {
            hi = args[0];
            sayHi();
        }
    }

    static void sayHi() {
        if (hi == "hello") {
            System.out.println("Hello!");
        }
    }
} 
```

我的问题是：为什么不输入“java HelloApp hello”使“Hello！” 出现在下一行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T07:21:14.400

```
if (hi == "hello") { 
```

应该：

```
if (hi.equals("hello")) { 
```

* * *

`==`检查两个引用是否指向堆中的相同对象，同时`equals()`检查两个 String 引用是否指向具有相同 String 值的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T07:22:07.003

您以错误的方式比较字符串...

[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

```
static void sayHi() {
    if (hi.equals("hello")) {
        System.out.println("Hello!");
    }
} 
```

这应该可以解决您的问题..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T07:22:09.093

`==`测试引用相等，而不是字符串相等。您想`.equals`改用：

```
if (hi.equals("hello")) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T07:22:26.300

你在比较`String`s 不正确。检查字符串是否相等的正确方法是 via`str.equals(anotherStr)`或`str.equalsIgnoreCase(anotherStr)`。`==`运算符检查字符串是否指向相同的内存位置，而不是内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T09:08:38.243

正如 neilvillareal 所说，您可以使用 str.equals(anotherStr) 或 str.equalsIgnoreCase(anotherStr) 方法，请参阅以下链接以了解 '==' 和 'equals/equalsIgnoreCase' 方法之间的区别：[http://www。 java-samples.com/showtutorial.php?tutorialid=221](http://www.java-samples.com/showtutorial.php?tutorialid=221)

# android - 亚行需要始终重置

> ID：12880119
> 
> 赞同：1
> 
> 时间：2012-10-14T07:19:53.967
> 
> 标签：android

每当我第一次运行我的模拟器时，它会显示但没有启动我的应用程序，并且我在 DDMS 视图中找不到任何设备，直到我重置 ADB。它总是第一次发生。但是在我重置 ADB 之后，它就可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:21:53.143

在您的系统上卸载并重新安装 Android。

# android - 为什么小部件在添加时不更新

> ID：12880126
> 
> 赞同：0
> 
> 时间：2012-10-14T07:21:10.233
> 
> 标签：android, service, widget

我创建了一个由服务更新的小部件。但是，该服务处理的其接口在添加时并未更新，而是在应用程序的第二次运行时更新。

小部件提供者.java：

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    for (int appWidgetId : appWidgetIds) {

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);

        Intent intent = new Intent(context, MetalPriceService.class);
        intent.setAction(MetalPriceService.UPDATEPRICE);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

        views.setOnClickPendingIntent(R.id.widget_refresh_btn, pendingIntent);
        appWidgetManager.updateAppWidget(appWidgetId, views);

        context.startService(intent);
} 
```

小部件价格更新服务.java：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStart(intent, startId);

    try {
        updatePrice(intent); //deal with interface updating stuffs
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    stopSelf(startId);

    return START_STICKY;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:32:46.477

只需让自己成为 RemoteViews 并直接在服务中更新小部件。您将通过以下方式获得 AppWidgetManager：

AppWidgetManager mgr=AppWidgetManager.getInstance(this);

其他一切都正常。

如果您真的想强制现有的 AppWidgetProvider 完成工作，请向您的组件发送带有自定义操作的广播，并在收到时从 onReceive() 自己调用 onUpdate()

# android - 相机在 jellybean 中运行时的相机预览截图

> ID：12880128
> 
> 赞同：1
> 
> 时间：2012-10-14T07:21:39.167
> 
> 标签：android, camera, screenshot, android-4.2-jelly-bean

我已经看到了一些与此相关的线程，但并不完全相同，所以就到这里吧。我正在尝试在 android jellybean 中截取相机预览屏幕的屏幕截图。它需要是可编写脚本的，因此降低音量 + 电源的技巧显然不起作用。Screencap -p 、 monkeyrunner.takeSnapshot() 等不起作用。

有谁知道我如何可靠地在 jellybean 中截取屏幕截图？请注意，在 ICS 中，screencap -p 工作得很好，但在 jellybean 中，图像已损坏（新的覆盖系统搞砸了）。在此先感谢 NoamM

# symfony - 在亚马逊 ec2 上访问 symfony2 应用程序时出现 500 内部错误

> ID：12880137
> 
> 赞同：0
> 
> 时间：2012-10-14T07:22:30.953
> 
> 标签：symfony, bitnami

> **可能重复：**
> [如何远程访问 symfony config.php？](https://stackoverflow.com/questions/12870243/how-do-i-access-to-symfony-config-php-remotely)

我将沙箱上传到亚马逊 ec2 上的 bitnami AMI，但当我进入 web/index.php 时出现“500 内部错误”，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:13:45.423

取消注释 config.php 中的以下行以进行调试：

```
if (!in_array(@$_SERVER['REMOTE_ADDR'], array(
    '127.0.0.1',
    '::1',
))) {
    header('HTTP/1.0 403 Forbidden');
    exit('This script is only accessible from localhost.');
} 
```

那些阻止了来自外部的所有访问..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T08:55:08.170

你检查**过 config.php**吗？那里列出了哪些建议？

首先你永远不会访问`web/index.php`. 您必须将文档根目录设置为指向**web**文件夹。由于安全原因，这很重要。

其次，500 服务器错误也可能是权限问题。您的网络服务器需要有权执行这些文件。在debian linux上我会设置这样的权限

```
chown -R www-data:www-data /var/www/www.example.com/web 
```

当网络服务器以 www-data 作为用户/组运行时。

# html - HTML表格中的列相互覆盖

> ID：12880138
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:22:43.573
> 
> 标签：html, dreamweaver

多年来，我一直在使用 DreamWeaver 构建简单的网站，并且从未遇到过使用表格来分隔页面上的文本的任何困难。

在我最近的项目中，我在一个 1 x 1 表（1 x 1 包含一个 Photoshop 生成的 HTML 切片作为背景）中创建了一个 7（行）乘 2（列）表，我打算在其中输入一个标签（第 1 列）和相关信息（第 2 列）。当我在 DW Live View 或浏览器中查看结果时，第 2 列的内容写在第 1 列的顶部。

如果我提取 7 x 2 表的代码并将其粘贴到空白页中，它可以正常工作。

我已将违规页面上传到：[http ://www.onthepeninsula.biz/new/lucyscafe/index.html](http://www.onthepeninsula.biz/new/lucyscafe/index.html)

底行包含四列（仅针对该行，第二列已拆分为三个单元格。第 2 列和第 3 列中的内容均已写入第 1 列。

**页面链接错误 - 应该是[http://www.onthepeninsula.biz/new/lucyscafe/index.html](http://www.onthepeninsula.biz/new/lucyscafe/index.html)**

```
<html>
<head>
<title>On The Peninsula | Lucy's Cafe</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">
body {
    background-color: #2A599E;
    margin-left: 10px;
    margin-top: 10px;
    margin-right: 10px;
    margin-bottom: 10px;
}
</style>
<link href="../otp.css" rel="stylesheet" type="text/css">
<script language="javascript">

<!--//BEGIN Script

function map(url) {

link =
window.open(url,"Link","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0,resizable=0,width=640,height=565,left=100,top=150");

}
//END Script-->
</script>
<script type="text/javascript">
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>
</head>
<body bgcolor="#FFFFFF" onLoad="MM_preloadImages('../images/buttons/home4.jpg','../images/buttons/name4.jpg','../images/buttons/category4.jpg','../images/buttons/pricing4.jpg','../images/buttons/join4.jpg','../images/buttons/contact4.jpg','../images/buttons/social4.jpg')">
<!-- Save for Web Slices (shop.psd) -->
<table width="719" height="280" border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
        <td colspan="5">
            <img src="../images/shop/shop_01.jpg" width="1040" height="40" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="40" alt=""></td>
    </tr>
    <tr>
        <td rowspan="18">
            <img src="../images/shop/shop_02.jpg" width="40" height="1000" alt=""></td>
        <td colspan="3">
            <img src="heading.jpg" width="960" height="80" alt=""></td>
        <td rowspan="18">
            <img src="../images/shop/shop_04.jpg" width="40" height="1000" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="80" alt=""></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="../images/shop/shop_05.jpg" width="960" height="31" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="31" alt=""></td>
    </tr>
    <tr>
        <td><a href="../index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image42','','../images/buttons/home4.jpg',1)"><img src="../images/buttons/home3.jpg" alt="On The Peninsula Home" width="220" height="58" border="0" id="Image42"></a></td>
        <td rowspan="16">
            <img src="../images/shop/shop_07.jpg" width="20" height="889" alt=""></td>
<td width="720" height="298" rowspan="6" align="left" valign="top" background="../images/shop/shop_08.jpg"><table width="720" height="290" border="0" cellpadding="5">
  <tr>
    <td><table width="700" height="280"border="0" cellpadding="5">
      <tr>
        <td width="170" height="38">Business Name:</td>
        <td width="504" height="38">Lucy's Cafe</td>
      </tr>
      <tr>
        <td width="170" height="38">Address:</td>
        <td width="504" height="38">26 Talford Street, Mitchell Valley VIC 3999</td>
      </tr>
      <tr>
        <td width="170" height="38">Telephone:</td>
        <td width="504" height="38">(03) 9999 9999</td>
      </tr>
      <tr>
        <td width="170" height="38">&nbsp;</td>
        <td width="504" height="38">&nbsp;</td>
      </tr>
      <tr>
        <td width="170" height="38">&nbsp;</td>
        <td width="504" height="38">&nbsp;</td>
      </tr>
      <tr>
        <td width="170" height="38">&nbsp;</td>
        <td width="504" height="38">&nbsp;</td>
      </tr>
      <tr>
        <td width="170" height="38">&nbsp;</td>
        <td width="504" height="38">&nbsp;</td>
      </tr>
    </table></td>
  </tr> 
</table></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="58" alt=""></td>
    </tr>
    <tr>
        <td><a href="../name.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image','','../images/buttons/name4.jpg',1)"><img src="../images/buttons/name3.jpg" alt="Browse by Business Name" width="220" height="60" border="0" id="Image"></a></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="60" alt=""></td>
    </tr>
    <tr>
        <td><a href="../category.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image2','','../images/buttons/category4.jpg',1)"><img src="../images/buttons/category3.jpg" alt="Browse by Category" border="0" width="220" height="61" id="Image2"></a></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="61" alt=""></td>
    </tr>
    <tr>
        <td><a href="../pricing.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image3','','../images/buttons/pricing4.jpg',1)"><img src="../images/buttons/pricing3.jpg" alt="Pricing" border="0" width="220" height="59" id="Image3"></a></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="59" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="../images/shop/shop_12.jpg" width="220" height="1" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="1" alt=""></td>
    </tr>
    <tr>
        <td><a href="../join.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image4','','../images/buttons/join4.jpg',1)"><img src="../images/buttons/join3.jpg" alt="Join On The Peninsula" width="220" height="59" border="0" id="Image4"></a></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="59" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="../images/shop/shop_14.jpg" width="220" height="1" alt=""></td>
        <td rowspan="2">
            <img src="../images/shop/shop_15.jpg" width="720" height="31" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="1" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2"><a href="../contact.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image5','','../images/buttons/contact4.jpg',1)"><img src="../images/buttons/contact3.jpg" alt="Contact On The Peninsula" border="0" width="220" height="59" id="Image5"></a></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="30" alt=""></td>
    </tr>
    <tr>
        <td width="720" height="519" rowspan="6" valign="top" background="../images/shop/shop_17a.jpg"><table width="720" border="0" cellpadding="10">
          <tr>
            <td width="700"><p>This is an example of one of the business pages in On The Peninsula. </p>
            <p>The top section of each business page contains the important contact and location details for your business, including a link to a location map, if your business has a public-friendly workplace.</p>
            <p>Please note that this is an example page and that the email and web addresses listed above are not real - if you click on either, you'll be directed to the email address and Facebook page for On The Peninsula.</p>
            <p>In this section of the page, you have the opportunity to provide an overview of your business, what you do, what you sell, your trading hours - pretty much anything that you wish to tell a visitor to your site.</p>
            <p>You might be wondering about that black and white square on the bottom left corner of this page. This is called a Quick Response (or QR) code. These are very similar to a barcode and can be read by any one of several QR readers available for smartphones and tablets. These QR readers can be downloaded at no cost.</p>
            <p>The codes themselves can be linked to just about any piece of information - web addresses, contact cards, photos ... you name it. We have chosen to use them to create contact records in iPhones, Androids and any other device. We will link the QR code on your page to your contact details so that if someone scans the code on your page, your contact details will be saved on their device. Try it on this page and you'll find that our contact details get loaded into your phone!</p>
            <p>Finally, you'll notice that we are supporters of <a href="http://www.starlight.org.au" target="_blank">Starlight Children's Foundation</a> and you can be too. If you would like to have the Starlight Support's badge on your page, it will cost you $10 per year. Every dollar rasied via this process will be matched by us and donated directly to Starlight Children's Foundation.</p>
            <p>&nbsp;</p></td>
          </tr>
          </table>
      </td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="29" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="../images/shop/shop_18.jpg" width="220" height="1" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="1" alt=""></td>
    </tr>
    <tr>
        <td><a href="../social.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image6','','../images/buttons/social4.jpg',1)"><img src="../images/buttons/social3.jpg" alt="Facebook & Twitter" width="220" height="60" border="0" id="Image6"></a></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="60" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="../images/shop/shop_20.jpg" width="220" height="30" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="30" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="../images/shop/shop_21.jpg" width="220" height="190" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="190" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="../images/shop/shop_22.jpg" width="220" height="220" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="209" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="../images/shop/shop_23.jpg" width="720" height="41" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="11" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="../images/shop/shop_24.jpg" width="220" height="30" alt=""></td>
        <td>
            <img src="../images/shop/spacer.gif" width="1" height="30" alt=""></td>
    </tr>
</table>
<!-- End Save for Web Slices -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:50:12.583

您的问题出在样式表中。您的`opt.css`文件包括：

```
#Table_01 tr td table tr td {
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    font-size: 12px;
    color: #FFF;
    position: absolute;
} 
```

这会将`td`表格中的所有单元格设置为具有绝对定位。位置值未设置，因此它们都以彼此重叠的 (0, 0) 结束。

更改`position: absolute`以`position: relative`修复它。

顺便说一句，我使用 Chrome 中的开发人员工具发现了问题。Firefox 和 Internet Explorer 也有类似的工具。值得学习如何使用这些，以便您可以追踪此类问题。

# php - PHP 聊天会话

> ID：12880139
> 
> 赞同：0
> 
> 时间：2012-10-14T07:22:48.403
> 
> 标签：php, jquery, ajax

我已经为我的客户网站构建了一个聊天脚本。用户登录后，我设置会话并通过将聊天状态设置为 1 来更新数据库中的表。一旦用户注销，我将聊天状态设置为 0，此外，如果用户关闭浏览器的选项卡聊天状态设置为 0，不再进行聊天。

这里的主要问题是如果用户的计算机关闭或电源被切断，如何检测用户无法聊天。或者即使用户打开一个新选项卡而不是关闭选项卡而是关闭浏览器？

我被困住了。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:30:52.110

或多或少是 jhonraymos 所说的。如果这是一个基于 PHP 的聊天，那么您无法真正说出连接何时被强行关闭之类的内容。我想说，只是有某种方法可以让聊天超时。

IE：如果在几分钟内，或者可能长达几个小时内没有来自客户端的请求，那么可以安全地假设它们不再连接，然后您可以将聊天状态设置为 0。

更新：

抱歉，我没有看到你的新评论。看着另一页...

```
session_start();
// set timeout period in seconds
$inactive = 600;
// check to see if $_SESSION['timeout'] is set
if(isset($_SESSION['timeout']) ) {
    $session_life = time() - $_SESSION['timeout'];
    if($session_life > $inactive)
    { session_destroy(); header("Location: logoutpage.php"); }
}
$_SESSION['timeout'] = time(); 
```

再次道歉，仍然习惯于stackoverflow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T13:38:00.600

只需使用 phpmyadmin 在 MYSQL 中创建一个事件，每 1 分钟使 status = 0（更新 login_table set status = '0'）。

然后设置一个 SetInterval 以每 30 秒更新一次状态 = 1。

制作另一个 SetInterval 来检查 status = 1 并将所有内容检索到 DIV（这将显示在线用户。

# windows - 获取文件系统限制

> ID：12880144
> 
> 赞同：8
> 
> 时间：2012-10-14T07:24:26.903
> 
> 标签：windows, delphi, winapi, delphi-7

我想编写一个函数来告诉我是否可以将文件/文件夹写入特定路径。我想这样做而不实际将任何文件写入磁盘。有没有 WINAPI 函数呢？感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T08:14:06.660

您可以使用[GetFileSecurity()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446639%28v=vs.85%29.aspx)和[AccessCheck()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374815%28v=vs.85%29.aspx)函数。阅读 Aaron Ballman 关于[如何检查访问权限](http://blog.aaronballman.com/2011/08/how-to-check-access-rights/)的文章。他提供了`CanAccessFolder()`执行您要求的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T07:15:06.923

```
function CheckFileAccess(const FileName: string; const CheckedAccess: Cardinal): Cardinal;
var Token: THandle;
    Status: LongBool;
    Access: Cardinal;
    SecDescSize: Cardinal;
    PrivSetSize: Cardinal;
    PrivSet: PRIVILEGE_SET;
    Mapping: GENERIC_MAPPING;
    SecDesc: PSECURITY_DESCRIPTOR;
begin
  Result := 0;
  GetFileSecurity(PChar(Filename), OWNER_SECURITY_INFORMATION or GROUP_SECURITY_INFORMATION or DACL_SECURITY_INFORMATION, nil, 0, SecDescSize);
  SecDesc := GetMemory(SecDescSize);

  if GetFileSecurity(PChar(Filename), OWNER_SECURITY_INFORMATION or GROUP_SECURITY_INFORMATION or DACL_SECURITY_INFORMATION, SecDesc, SecDescSize, SecDescSize) then
  begin
    ImpersonateSelf(SecurityImpersonation);
    OpenThreadToken(GetCurrentThread, TOKEN_QUERY, False, Token);
    if Token <> 0 then
    begin
      Mapping.GenericRead := FILE_GENERIC_READ;
      Mapping.GenericWrite := FILE_GENERIC_WRITE;
      Mapping.GenericExecute := FILE_GENERIC_EXECUTE;
      Mapping.GenericAll := FILE_ALL_ACCESS;

      MapGenericMask(Access, Mapping);
      PrivSetSize := SizeOf(PrivSet);
      AccessCheck(SecDesc, Token, CheckedAccess, Mapping, PrivSet, PrivSetSize, Access, Status);
      CloseHandle(Token);
      if Status then
        Result := Access;
    end;
  end;

  FreeMem(SecDesc, SecDescSize);
end; 
```

你可以这样使用： if (CheckFileAccess(SysteemGegevens.DFImportPath, FILE_ALL_ACCESS) <> FILE_ALL_ACCESS) then

和

```
const
FILE_READ_DATA = $0001;
FILE_WRITE_DATA = $0002;
FILE_APPEND_DATA = $0004;
FILE_READ_EA = $0008;
FILE_WRITE_EA = $0010;
FILE_EXECUTE = $0020;
FILE_READ_ATTRIBUTES = $0080;
FILE_WRITE_ATTRIBUTES = $0100;
FILE_GENERIC_READ = (STANDARD_RIGHTS_READ or FILE_READ_DATA or
FILE_READ_ATTRIBUTES or FILE_READ_EA or SYNCHRONIZE);
FILE_GENERIC_WRITE = (STANDARD_RIGHTS_WRITE or FILE_WRITE_DATA or
FILE_WRITE_ATTRIBUTES or FILE_WRITE_EA or FILE_APPEND_DATA or SYNCHRONIZE);
FILE_GENERIC_EXECUTE = (STANDARD_RIGHTS_EXECUTE or FILE_READ_ATTRIBUTES or
FILE_EXECUTE or SYNCHRONIZE);
FILE_ALL_ACCESS = STANDARD_RIGHTS_REQUIRED or SYNCHRONIZE or $1FF; 
```

# python - 比较日期时间对象python中的时间

> ID：12880158
> 
> 赞同：0
> 
> 时间：2012-10-14T07:26:49.523
> 
> 标签：python, django, datetime, comparison

我有一个奇怪的问题。

我正在运行一个 django 应用程序，在我的一个模型中，我有一种方法来比较用户给出的时间和存储在模型数据库中的时间

因此，出于调试目的，我这样做了。

`print self.start`
`print start`
`print self.start.time < start.time`

输出是：

`2012-10-15 01:00:00+00:00`
`2012-10-22 01:01:00+00:00`
`False`

这怎么可能？！？！？！

我在 django shell 和 python cli 中试过这个！两者都给我True！具有相同的价值观。

多谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T07:45:58.843

`.time`是一种*方法*，而不是一种属性。

```
>>> import datetime
>>> a = datetime.datetime(2012, 10, 15, 1, 0, 0)
>>> a.time
<built-in method time of datetime.datetime object at 0x10049f508>
>>> a.time()
datetime.time(1, 0) 
```

因此，正确的代码应该是`if self.start.time() < start.time()`.

# sorting - 通过 populateState 方法对 joomla 中的列进行排序

> ID：12880159
> 
> 赞同：5
> 
> 时间：2012-10-14T07:26:57.817
> 
> 标签：sorting, joomla, getstate

我在 Joomla 后端对表格列进行排序。我根据[本教程](http://docs.joomla.org/Adding_sortable_columns_to_a_table_in_a_component)调整设置。

如我们所见，建议覆盖`populateState`方法并手动获取排序选项。

```
public function populateState() {
    $filter_order = JRequest::getCmd('filter_order');
    $filter_order_Dir = JRequest::getCmd('filter_order_Dir');

    $this->setState('filter_order', $filter_order);
    $this->setState('filter_order_Dir', $filter_order_Dir);
} 
```

但我注意到本机组件`com_content`并没有在模型文件中明确设置这些选项`administrator/components/com_content/models/articles.php`。

```
protected function populateState($ordering = null, $direction = null)
{
    // Initialise variables.
    $app = JFactory::getApplication();
    $session = JFactory::getSession();

............................................
............................................
............................................

    // List state information.
    parent::populateState('a.title', 'asc');
} 
```

相反，它只是调用 parent `populateState`。实际上`JModelList::populateState()`包括：

```
protected function populateState($ordering = null, $direction = null)
{
    // If the context is set, assume that stateful lists are used.
    if ($this->context) {
        $app = JFactory::getApplication();

.....................................
.....................................
.....................................

        $value = $app->getUserStateFromRequest($this->context.'.ordercol', 'filter_order', $ordering);
        if (!in_array($value, $this->filter_fields)) {
            $value = $ordering;
            $app->setUserState($this->context.'.ordercol', $value);
        }
        $this->setState('list.ordering', $value);

        // Check if the ordering direction is valid, otherwise use the incoming value.
        $value = $app->getUserStateFromRequest($this->context.'.orderdirn', 'filter_order_Dir', $direction);
        if (!in_array(strtoupper($value), array('ASC', 'DESC', ''))) {
            $value = $direction;
            $app->setUserState($this->context.'.orderdirn', $value);
        }
        $this->setState('list.direction', $value);
    }
    else {
        $this->setState('list.start', 0);
        $this->state->set('list.limit', 0);
    }
} 
```

所以我试图模仿本机的代码`com_content`。因此我假设

```
class CompViewData extends JView
{

function display($tpl = null)
{
    $this->state = $this->get('State'); 
```

将调用 parent `JModelList::populateState()`（所以我不会在模态类中覆盖它）并设置`$this->setState('list.ordering', $value);`. 但是由于某种原因，当我调用`$this->state->get()`in`getListQuery()`来构建我的 SQL 查询时

```
protected function getListQuery()
{

    $orderCol   = $this->state->get('list.ordering', 'id');
    $orderDirn  = $this->state->get('list.direction', 'asc'); 
```

这个变量碰巧没有定义。

我错过了什么？我认为它以某种方式与适当的用户会话有关，但我没有任何证据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:57:16.663

在遇到同样的问题后，我发现，正如你所说，超类 populateState() 确实定义了行为。但是，它还会检查以确保您的字段在“白名单”中。

```
if (!in_array($value, $this->filter_fields)) 
```

如果您查看 com_content，您将在模型类的顶部看到此部分（在您的案例中为 models/articles.php）：

```
public function __construct($config = array())
{
    if (empty($config['filter_fields']))
    {
        $config['filter_fields'] = array(
            'id', 'a.id',
            'title', 'a.title',
             //...(more fields here)
            'publish_up', 'a.publish_up',
            'publish_down', 'a.publish_down',
        );

        $app = JFactory::getApplication();
        $assoc = isset($app->item_associations) ? $app->item_associations : 0;
        if ($assoc)
        {
            $config['filter_fields'][] = 'association';
        }
    }

    parent::__construct($config);
} 
```

您需要包含此部分，以便 ModelList 类知道“排序”字段在白名单中。显然，将字段替换为您希望过滤的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:56:54.350

Joomla是这样`JModelList`定义的`populateState`

```
protected function populateState($ordering = null, $direction = null) 
```

这意味着如果你的类中没有`populateState`覆盖，这将被调用但它没有值。如果要使用排序，最低要求是设置默认值。如果您根本不打算使用排序，则可以从您的课程中完全删除此方法。

因此，您需要的最低限度是在您的课程中进行插值

```
protected function populateState($ordering = null, $direction = null) {
    parent::populateState('id', 'ACS');
} 
```

否则，除非您单击订购列，`$state->get()`否则您将不会得到任何东西。`$this->state->get()`然后父母`populateState`将从请求中获取变量。

# javascript - 如果其他域使用 iframe 显示我的网站，如何重定向到错误页面

> ID：12880165
> 
> 赞同：1
> 
> 时间：2012-10-14T07:27:46.523
> 
> 标签：javascript, .htaccess, iframe, meta

最近我的网站内容被许多其他网站窃取。

他们所做的只是为我的网站创建一个 iframe，并在他们的域上显示特定数据以获得高流量。当我发现时，我试图用`htaccess`和`meta`标签来阻止它。

他们滥用的我的网页是一个 html 页面，其中包含来自子目录的 iframe。他们不使用该 iframe，而是针对 html 页面的其他内容，但我的阻止技术在 Firefox 中不起作用，它也阻止了我的 iframe。它在 Google Chrome 和 Internet Explorer 中运行良好。

我的`.htaccess`设置 - 适用于 Firefox，但不适用于 Google chrome 和 Internet Explorer，而且它不显示来自同一域的我的 iframe：

```
Header set X-Frame-Options DENY
Header always append X-Frame-Options SAMEORIGIN 
```

我的元设置 - 这适用于除 Firefox 之外的所有浏览器：

```
<meta http-equiv="X-Frame-Options" content="deny"> 
```

我暂时这样做是为了阻止我的内容在其他网站上使用。我想要重定向到我的自定义页面之类的东西，或者当用户在框架内单击时它会重定向。欢迎任何更好的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:42:24.143

iframe 的内容协商完全由客户端（浏览器）处理。客户端决定是否显示 iframe 的内容以及是否支持**SAMEORIGIN**选项（某些浏览器可能不会）。

就 htaccess 而言，服务器不知道对页面的请求（因为有人直接访问该页面）和对嵌入在 iframe 中的页面的请求之间的区别，因此您在 htaccess 中无能为力文件以防止页面通过 iframe 加载。

您可以尝试许多不同的方法，其中大部分都可以规避：

1.  为您不介意在 iframe 中的页面创建一个单独的空间，在其他任何地方，使用**SAMEORIGIN**标头

2.  对于您不想嵌入 iframe 的所有页面，请检查引用者并在嵌入 iframe 时重定向到自定义页面：

    ```
    RewriteEngine On
    RewriteCond %{HTTP_REFERER} !^$
    RewriteCond %{HTTP_REFERER} !^http://your-website.com
    RewriteRule ^ /custom_page.html [L,R=302] 
    ```

3.  不要使用 iframe 并在任何地方设置**SAMEORIGIN**标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:40:59.410

一种方法是通过 JavaScript 将用户重定向到您的网站来*打破框架：*

```
if (top.location != location) {
    top.location.href = document.location.href;
} 
```

# iphone - 我需要一种方法来检测我的 UIButton 上的最后五次点击时间

> ID：12880166
> 
> 赞同：3
> 
> 时间：2012-10-14T07:27:55.763
> 
> 标签：iphone, objective-c, ios, uibutton, nstimer

我有一个`UIButton`用户必须在三秒钟内点击它 5 次，我试图为此实现一个方法，但是如果用户在连续 3 秒内点击按钮 5 次，我会得到正确的结果，如果用户例如，单击一次并停止 2 秒，计数器在计算中采用第一次单击。

简而言之，我需要一种检测最后五次点击并知道点击是否在三秒内的方法......

这是我的旧代码：

```
-(void)btnClicked{
 counter++;

if (totalTime <=3 && counter==5) {

        NSLog(@"My action");
        // My action
}} 
```

我知道我的代码太简单了，所以我问你专业的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:37:54.283

尝试适当地改变这个例子：

```
// somewhere in the initialization - counter is an int, timedOut is a BOOL
counter = 0;
timedOut = NO;

- (void)buttonClicked:(UIButton *)btn
{
    if ((++counter >= 5) && !timedOut) {
        NSLog(@"User clicked button 5 times within 3 secs");

        // for nitpickers
        timedOut = NO;
        counter = 0;
    }
}

// ...

[NSTimer scheduledTimerWithTimeInterval:3.0
    target:self
    selector:@selector(timedOut)
    userInfo:nil
    repeats:NO
];

- (void)timedOut
{
    timedOut = YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T07:41:18.023

只需有一个带有最后四次点击的时间戳的数组，每次点击时，检查前四次是否在当前时间的 3 秒内。如果不是这种情况，则丢弃最旧的时间戳并替换为当前时间，但如果是这种情况，您将获得您的事件，您可以清除数组，以便在接下来的 5-clicks-in-3 中不使用它们-秒事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:52:01.500

这是 H2CO3 代码的“我的版本”。这应该更适合您的要求。

```
int counter = 0;
BOOL didTimeOut = NO;

- (void)buttonClicked:(UIButton *)button {
    counter ++;
    if (counter == 1) {
        didTimeOut = NO;
        [NSTimer scheduledTimerWithTimeInterval:3.0f
                                         target:self
                                       selector:@selector(timedOut)
                                       userInfo:nil
                                        repeats:NO
         ];
    } else {
        if ((counter >= 5) && !didTimeOut) {
            //Do your action as user clicked 5 times in 3 seconds

            counter = 0;
            didTimeOut = NO;
        }
    }

}

- (void)timedOut {
    didTimeOut = YES;
} 
```

# java - 如何垃圾收集对象数组？

> ID：12880168
> 
> 赞同：4
> 
> 时间：2012-10-14T07:28:04.537
> 
> 标签：java, arrays, object, memory, garbage-collection

我正在使用 java 中的大型程序工作，现在我试图避免徘徊以提高它的内存使用率，我在构造函数中实例化了一些对象，并一直实例化到程序结束，但它们并不总是被使用。我的问题特别是关于垃圾收集对象数组。

例如，当用户按下一个菜单项时，会调用一个包含许多组件的 JDialog，这些组件是在程序运行时实例化的，但我想在必要时实例化它们并在不需要时释放它们。

例如：

```
JRadioButton Options = new JRadioButton[20];
for (int i = 0; i < 20; i++) {
    Options[i] = new JRadioButton(Labels[i]);
} 
```

如果我想释放数组，我应该怎么做？

这：

```
for (int i = 0; i < 20; i++) {
    Options[i] = null;
    Labels[i] = null;
} 
```

或者简单地说：

```
Options = null;
Labels = null; 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:32:04.043

首先，只有在无法访问 Java 对象时才会对它进行垃圾回收（并且它可能具有除您的数组之外的其他引用）。然后 GC 在几乎不可预测的时间运行（因此内存可能会在很久以后被释放）。

清除数组的元素不会释放整个数组，但可以释放每个元素（前提是它变得无法访问）。

设置一个变量`null`可能会释放数组（当然还有所有元素）。

但是对于这么小的程序，也许GC永远不会发生。

至少阅读[维基百科上](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)的 GC ，也许还有[GC 手册](http://gchandbook.org/)

请注意，某个对象的活跃度是整个程序的属性（实际上是整个进程的属性：值的活跃度与特定执行相关，而不是与您的源代码相关）。换句话说，您可以做`Options = null;`并且仍然`Options[24]`可以通过其他一些参考路径访问该对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T07:35:05.633

如果`Options`持有对数组的唯一引用，则要么使对象无法访问，要么将对象释放到垃圾收集器。

如果其他东西仍在引用该数组，则无论如何它都不会被释放，因此第一个选项是唯一会释放内容的选项。请注意，第一个选项*只会*释放内容，除非您也设置为 null ，否则`Options`仍会引用实际内容。`Array``Options`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T07:47:26.127

正在做

```
Options = null;
Labels = null; 
```

应该足以释放这些对象。除非有另一个对数组的引用，否则不需要将元素归零。但是，当有其他对数组的引用时，我认为将元素设为空是不明智的。其他参考资料的存在是有原因的。当他们不再需要数组及其内容时，他们应该释放他们的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T07:30:34.243

两者都可以，但建议使用第一个，然后再做第二个。

这是[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html) `clear()`方法的源代码

```
// Let gc do its work
for (int i = 0; i < size; i++)
    elementData[i] = null; 
```

另一种做同样事情的方法是

```
Arrays.fill(Options, null); 
```

它不会做任何不同的迭代并将数组元素设置为`null`.

# vb.net - NET中的VB6的vbUnicode等价物？

> ID：12880169
> 
> 赞同：1
> 
> 时间：2012-10-14T07:28:22.730
> 
> 标签：vb.net, vb6, vb6-migration

NET 等效于 vbUnicode UTF32Encoding/UTF32Decoding 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T08:21:42.957

vbUnicode 只是一个常数。它本身是没有意义的。给我们看一些代码。你想做什么？

[您是否像这样使用StrConv](http://msdn.microsoft.com/en-us/library/aa263373(v=vs.60).aspx)将 ANSI 字符串转换为 UTF32 ？

```
newString = StrConv(ansiString, vbUnicode) 
```

VB.Net 等价物可能是[Encoding.Default.GetString](http://msdn.microsoft.com/en-us/library/744y86tc.aspx)因为[Encoding.Default](http://msdn.microsoft.com/en-us/library/system.text.encoding.default.aspx)用于 ANSI 编码

```
newString = Text.Encoding.Default.GetString(ansiStringAsByteArray) 
```

但这可能取决于您用于获取 ANSI 字符串的代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T07:44:13.303

不确定您在寻找什么，但[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)尤其是这些课程[`Encoding.UTF32Encoding`](http://msdn.microsoft.com/en-us/library/system.text.utf32encoding.aspx)可能是您需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-16T01:48:01.630

`Encoding.Default`@MarkJ 的回答对我有用，但我有点紧张，因为默认值似乎取决于您的语言环境。找到了 KB [311338](https://support.microsoft.com/en-us/kb/311338)，它展示了如何明确指定字符集，并推荐 1252 用于西欧字符。所以转换马克的例子，变成：

```
newString = System.Text.Encoding.GetEncoding(1252).GetString(ansiStringAsByteArray) 
```

在我的美国英语系统上，它给出了与 相同的结果`Encoding.Default`，但指定 1252 理论上应该给出相同的结果，而不管语言环境如何。

**2016 年 1 月 18 日更新**

在看到下面@MarkJ 的评论后，我做了一些研究，发现[VB6 StrConv](https://msdn.microsoft.com/en-us/library/aa263373%28v=vs.60%29.aspx)实际上确实使用默认语言环境，除非您指定一个。（并且您只能指定一个 LocaleID，例如美国英语的 1033，而不是 ANSI 代码页，例如西欧的 1252。）因此`Encoding.Default`更接近于`StrConv`没有 LocaleID。`GetEncoding(1252)`添加了 Mark 的 VB6 示例中没有的特殊性。

# jquery - jquery 1.7+，body 追加一个新元素，以及如何使用 on() 而不是 live() 将操作绑定到它？

> ID：12880172
> 
> 赞同：3
> 
> 时间：2012-10-14T07:29:06.183
> 
> 标签：jquery

我在 jquery 1.6 之前使用了 live 函数。在 jquery 1.7+ 中，不推荐使用 live 函数，而是使用 on 函数。我对以下代码有疑问：

```
 $('#button').on('click', function(event) {
                    //add a new element to body
                    $('body').append('<div class="future">I am a new div</div>');
        });
    //bind a action to new element which is add a moment ago.
    $('body').on('change', '.future', function() {
        $(this).css({
            'color' : 'red',
            'font-weight' : 'bold'
        });
        $(this).text("on click me.");
        $(this).on('click', {
            name : 'liujun'
        }, myhandler);
    });

    function myhandler(event) {
        alert(event.data.name);
    } 
```

新操作不起作用，语法正确。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:46:35.740

**工作演示** [http://jsfiddle.net/nQDs2/4/](http://jsfiddle.net/nQDs2/4/)

*   首先点击`button`尝试点击`trigger`
*   然后，单击红色`on click me`消息。

[在 div 更改时触发 jQuery 事件](https://stackoverflow.com/questions/4979738/fire-jquery-event-on-div-change)\

对于**IE** [jQuery 观看 div](https://stackoverflow.com/questions/3233991/jquery-watch-div/3234646#3234646)

我不知道为什么我被否决了，希望它适合你的事业`:)`

**代码**

```
$('#button').on('click', function(event) {
    //add a new element to body
    $('body').append('<div class="future">I am a new div</div>');
});

//bind a action to new element which is add a moment ago.
$('body').on('change', '.future', function() {
    $(this).css({
        'color': 'red',
        'font-weight': 'bold'
    });
    $(this).text("on click me.");
    $(this).on('click', {
        name: 'liujun'
    }, myhandler);
}).bind('DOMNodeInserted DOMNodeRemoved', function(event) {
    if (event.type == 'DOMNodeInserted') {
       // alert('Content added! Current content:' + '\n\n' + this.innerHTML);
    } else {
       // alert('Content removed! Current content:' + '\n\n' + this.innerHTML);
    };
});

$('#trgbutton').click(function() {
    $('.future').trigger('change');
});

function myhandler(event) {
    alert(event.data.name);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:40:46.833

我很确定这段代码是罪魁祸首。

```
$(this).on('click', {
      name : 'liujun'
}, myhandler); 
```

它看起来不像一个有效的语法。

如果你想传递一个参数，试试这个

```
 $(this).on("click", function(e) {
      myHandler({name: liujun})
   }) 
```

这实际上很令人困惑，如果您可以向我们展示 jsFiddle 中的 HTML，也许我们可以提供更多帮助。

# php - PHP MySQL，按更新字段分组

> ID：12880173
> 
> 赞同：0
> 
> 时间：2012-10-14T07:29:10.660
> 
> 标签：php, mysql, web, pdo

我目前正在做一个项目，我一直在寻找我遇到的具体问题，所以我来这里发布问题。

基本上，我有一个表格来处理我正在开发的网站上的通知，并且我正在使用 GROUP BY 来处理冗余通知，比如如果有人多次评论同一件事，我只想显示最新的通知。这是我正在使用的查询示例（我在 PHP 中使用 PDO 驱动程序）：

```
SELECT * FROM
((SELECT `a`,`b`,`c` FROM `table` WHERE `c` IN ($array) AND `b` IN ('a','b') AND  `read`='false' AND `id`!='xxx' GROUP BY `c` )
UNION ALL
(SELECT `a`,`b`,`b` FROM `table` WHERE `b` IN ('a','b') AND `id`='xxx' AND `read`='false' ) ) as x ORDER BY `id` DESC LIMIT 15 
```

问题出在这个查询之后，所以基本上，在我的通知窗口中，当用户查看所有这些时，我将他们所有的读取列设置为 true。现在，当用户重新加载页面时，它将显示下一个我有意隐藏的通知。

基本上，如何将与原始查询不匹配的所有内容设置为 true，以便在查看原始通知后不再显示。现在，如果事后创建了一个新通知，显然我仍然希望显示这些通知。

如果您有任何建议，请让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:17:14.407

顺便说一句，我想出了这一点，以防万一将来有人遇到这个问题。在遍历结果集时，我将每个 ID 存储在一个数组中。在此之后，我只是设置了另一个查询，将所有不在数组中的 ID 设置为在两个原始最低和最高 ID 之间“读取”。它完美地工作。不确定我在这里传达了最好的答案，但如果有人对此有任何疑问，请告诉我。

再次感谢！

# mysql - 使用 ALL 的 MySQL 子查询

> ID：12880180
> 
> 赞同：0
> 
> 时间：2012-10-14T07:30:33.513
> 
> 标签：mysql, subquery

相关架构：

```
courier(courid:int,courname:str)
city(cid:int,cname:str,zid:int) #zid belonging to some table named zone
courierservice(courid:int,cid:int) 
```

因此，显而易见的关系是快递“服务”城市。我一直在努力让所有快递员都服务于“两个”城市，cname 为 A 和 B。即可能的交叉点。

我可以使用以下方法获得解决方法：

```
 select courname from courier where courid in (select courid from courierservice
 where cid=(select cid from city where cname='A')) and
 courid in (select courid from courierservice where cid=(select cid from city where cname='B')); 
```

但这看起来有点重。

根据文档，它应该使用以下 All 子查询：

```
select * from courier where courid in (select courid from courierservice 
where cid = all (select cid from city where cname='A' or cname='B')); 
```

但它返回一个空集。

有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:35:26.303

尝试替换`cid = all`as `cid in`，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:42:28.843

`ALL()`返回一个集合。但是当你比较使用`'='`它时，它会与元素进行比较。所以一个元素不能与一个集合进行比较。如果您想知道该元素是否在集合内，那么您必须使用`IN`子句而不是`'='`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:08:30.890

It's meaningless to use `= ALL`: how can a single `courierservice.cid` *simultaneously* be equal to more than one `city.cid`? `ALL` is only ever used with a comparison operator that can match more than one value, such as `>=` or `<>`: see [Subqueries with `ALL`](http://dev.mysql.com/doc/en/all-subqueries.html).

However, you would do well to rewrite your query using `JOIN` (to be both more concise and more performant):

```
SELECT courname FROM courier NATURAL JOIN (
  SELECT   courid
  FROM     courierservice JOIN city USING (cid)
  WHERE    cname IN ('A', 'B')
  GROUP BY courid
  HAVING   SUM(cname='A') AND SUM(cname='B')
) t 
```

# asp.net - 从数据源中删除对象

> ID：12880195
> 
> 赞同：0
> 
> 时间：2012-10-14T07:32:37.287
> 
> 标签：asp.net, button, buttonclick

我正在尝试通过单击按钮从它使用的域数据源中删除在数据网格中选择的项目。

按钮单击的代码是：

```
 private void medItemRemove_Click(object sender, RoutedEventArgs e)
        {
            if (medicineInventoryDataGrid.SelectedIndex != -1)
            {
                MedicineInventory M = (MedicineInventory)medicineInventoryDataGrid.SelectedItem;

                MedicineInventory toRemove = (from a in ctx.MedicineInventories where (a.MedicineInventoryId == M.MedicineInventoryId) select a).Single();

                ctx.MedicineInventories.Remove(toRemove);               

            }
        } 
```

但是在单击时，我收到以下错误：

> “特定实体不包含在 EntitySet 中。”

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:26:58.337

尝试

```
 MedicineInventory M = (MedicineInventory)medicineInventoryDataGrid.SelectedItem.DataItem; 
```

# graphics - 屏幕尺寸和桌面尺寸有什么区别？

> ID：12880199
> 
> 赞同：1
> 
> 时间：2012-10-14T07:33:01.517
> 
> 标签：graphics, directx

我经常在图形编程论坛或一些文档中看到屏幕大小和桌面大小，屏幕大小不等于桌面大小吗？以下面为例，有什么区别？

> 对于窗口模式，目标表面的大小应该是桌面的大小。对于全屏模式，目标表面的大小应该是屏幕大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:38:04.487

那是因为桌面大小并不总是填满屏幕。将您的分辨率更改为 800x600 或（如果可能）640x480，您会看到在许多屏幕上，它只会占用显示屏上的一小部分区域。屏幕尺寸 = 您的屏幕可以显示的全部大小。桌面尺寸就是我刚才描述的那个盒子。大多数情况下，它们是相同的——但并非总是如此。

它还可以根据上下文描述适合当前窗口的内容，减去标题栏、工具栏、任务栏等。

# android - 多个警报的警报接收器

> ID：12880204
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:33:47.063
> 
> 标签：android, broadcastreceiver, repeatingalarm

我有一个程序，允许用户输入 3 次警报，然后在适当的时间显示警报。但是，每当我设置警报时，只会执行最后一个警报。

所以基本上，用户输入 1,2 或 3 然后我执行时间选择对话框的数量，然后将这些时间发送到警报接收器。但只有最后一个警报正在执行。任何帮助表示赞赏。为代码长度道歉，我知道这非常低效。

警报活动片段::

```
buttonSetTime.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(alarmNumInt == 1){
                tvSet.setText("");
                openTimePicker1(false);
                }
                else if (alarmNumInt == 2){
                    tvSet2.setText("");
                    openTimePicker2(false);
                    tvSet.setText("");
                    openTimePicker1(false);

                    }
                else {
                tvSet3.setText("");
                openTimePicker3(false);
                tvSet2.setText("");
                openTimePicker2(false);
                tvSet.setText("");
                openTimePicker1(false);
                }
            }
        });

    protected void openTimePicker1(boolean b) {
        // TODO Auto-generated method stub
          Calendar calendar = Calendar.getInstance();

          timePromptDia = new TimePickerDialog(
            AlarmActivity.this, 
            onTimeSetListener, 
            calendar.get(Calendar.HOUR_OF_DAY), 
            calendar.get(Calendar.MINUTE), 
            b);
          timePromptDia.setTitle("Set Alarm 1 Time");  

          timePromptDia.show();

         }

    protected void openTimePicker2(boolean b) {
        // TODO Auto-generated method stub
          Calendar calendar = Calendar.getInstance();

          timePromptDia2 = new TimePickerDialog(
            AlarmActivity.this, 
            onTimeSetListener2, 
            calendar.get(Calendar.HOUR_OF_DAY), 
            calendar.get(Calendar.MINUTE), 
            b);
          timePromptDia2.setTitle("Set Alarm 2 Time");  

          timePromptDia2.show();

         }

    protected void openTimePicker3(boolean b) {
        // TODO Auto-generated method stub
          Calendar calendar = Calendar.getInstance();

          timePromptDia3 = new TimePickerDialog(
            AlarmActivity.this, 
            onTimeSetListener3, 
            calendar.get(Calendar.HOUR_OF_DAY), 
            calendar.get(Calendar.MINUTE), 
            b);
          timePromptDia3.setTitle("Set Alarm 3 Time");  

          timePromptDia3.show();

         }

          OnTimeSetListener onTimeSetListener = new OnTimeSetListener(){

          public void onTimeSet(TimePicker view, int hourOfDay, int minute) {       
           Calendar calNow = Calendar.getInstance();
           Calendar calSet = (Calendar) calNow.clone();

           calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
           calSet.set(Calendar.MINUTE, minute);
           calSet.set(Calendar.SECOND, 0);
           calSet.set(Calendar.MILLISECOND, 0);

           if(calSet.compareTo(calNow) <= 0){
            //Today Set time passed, count to tomorrow
            calSet.add(Calendar.DATE, 1);
           }
           setAlarm(calSet);
           //condition for other alarms

          }};

          OnTimeSetListener onTimeSetListener2 = new OnTimeSetListener(){

              public void onTimeSet(TimePicker view, int hourOfDay, int minute) {                   
               Calendar calNow = Calendar.getInstance();
               Calendar calSet = (Calendar) calNow.clone();

               calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
               calSet.set(Calendar.MINUTE, minute);
               calSet.set(Calendar.SECOND, 0);
               calSet.set(Calendar.MILLISECOND, 0);

               if(calSet.compareTo(calNow) <= 0){
                //Today Set time passed, count to tomorrow
                calSet.add(Calendar.DATE, 1);
               }
               setAlarm2(calSet);
               }};

           OnTimeSetListener onTimeSetListener3 = new OnTimeSetListener(){

                      public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

                       Calendar calNow = Calendar.getInstance();
                       Calendar calSet = (Calendar) calNow.clone();

                       calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
                       calSet.set(Calendar.MINUTE, minute);
                       calSet.set(Calendar.SECOND, 0);
                       calSet.set(Calendar.MILLISECOND, 0);

                       if(calSet.compareTo(calNow) <= 0){
                        //Today Set time passed, count to tomorrow
                        calSet.add(Calendar.DATE, 1);
                       }
                       setAlarm3(calSet);
                       }};

            protected void setAlarm(Calendar targetCal) {
                // TODO Auto-generated method stub

                  Intent intent1 = new Intent(getBaseContext(), AlarmReceiver.class);
                  PendingIntent pendingIntent1 = PendingIntent.getBroadcast(getBaseContext(), req, intent1, 0);
                  AlarmManager alarmManager1 = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
                  alarmManager1.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), pendingIntent1);
                   alarmManager1.setRepeating(AlarmManager.RTC_WAKEUP, 
                             targetCal.getTimeInMillis(), 
                             TimeUnit.HOURS.toMillis(24),
                             pendingIntent1);

                   tvSet.setText("Alarm 1 is set @ " + targetCal.getTime() + "\n" +" Repeat everyday\n");

            }

            protected void setAlarm2(Calendar targetCal2) {
                // TODO Auto-generated method stub

                  Intent intent2 = new Intent(getBaseContext(), AlarmReceiver.class);
                  PendingIntent pendingIntent2 = PendingIntent.getBroadcast(getBaseContext(), req2, intent2, 0);
                  AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
                  alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal2.getTimeInMillis(), pendingIntent2);
                   alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, 
                             targetCal2.getTimeInMillis(), 
                             TimeUnit.HOURS.toMillis(24),
                             pendingIntent2);

                   tvSet2.setText("Alarm 2 is set @ " + targetCal2.getTime()+" Repeat everyday\n");
            }

            protected void setAlarm3(Calendar targetCal3) {
                // TODO Auto-generated method stub

                  Intent intent3 = new Intent(getBaseContext(), AlarmReceiver.class);
                  PendingIntent pendingIntent3 = PendingIntent.getBroadcast(getBaseContext(), req3, intent3, 0);
                  AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
                  alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal3.getTimeInMillis(), pendingIntent3);
                   alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, 
                             targetCal3.getTimeInMillis(), 
                             TimeUnit.HOURS.toMillis(24),
                             pendingIntent3);

                   tvSet3.setText("Alarm 3 is set @ " + targetCal3.getTime() + " Repeat everyday\n");         
            }   
} 
```

和广播接收器活动：

```
 public class AlarmReceiver extends BroadcastReceiver {
 @Override
 public void onReceive(Context arg0, Intent arg1) {

     playSound();
     Toast toast;
     toast = Toast.makeText(arg0, "Time for Blood Glucose Testing!", Toast.LENGTH_LONG); 
     toast.setGravity(Gravity.CENTER, 0,0); 
     toast.show();
     Vibrator vibrator = (Vibrator) arg0.getSystemService(Context.VIBRATOR_SERVICE);
     vibrator.vibrate(1000);

  }
 public void playSound(){
     ToneGenerator alertTone = new ToneGenerator(AudioManager.STREAM_DTMF,ToneGenerator.MAX_VOLUME);
     alertTone.startTone(ToneGenerator.TONE_DTMF_1, 1000);
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:52:53.617

req、req2 和 req3 的值是多少？对于每个警报，这些都需要不同。

另外，我认为这不会解决您的问题，但您不需要在 AlarmManager 上调用 set() 和 setRepeating()，只需调用其中一个即可。

在警报发生时调用 set() 并自行重置警报，或者让 AlarmManager 使用 setRepeating() 处理重置。

# javascript - 如何在 Firefox 插件上加载 fb all.js 脚本

> ID：12880222
> 
> 赞同：0
> 
> 时间：2012-10-14T07:38:20.437
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在尝试异步加载 connect.facebook.net/en_US/all.js 脚本，请参见[此处](https://builder.addons.mozilla.org/package/157155/latest/)

问题是 fbAsyncInit 永远不会被调用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:56:39.607

这是因为内容脚本中的“窗口”不是真正的窗口，而是代理。我可以通过将 window 替换为“unsafeWindow”来使您的代码正常工作：

[https://builder.addons.mozilla.org/package/157253/latest/](https://builder.addons.mozilla.org/package/157253/latest/)

请注意，这引入了一个可能的安全问题 - 特别是您不应信任来自 unsafeWindow 的任何数据或任何附加到它的任何数据。这是一种 hack，可用于在代理无法运行的情况下使事情正常运行，但可用于允许网页以浏览器的权限执行任意代码。

# php - 如何调整 gd 图像的大小以适合其中写入的文本？

> ID：12880223
> 
> 赞同：0
> 
> 时间：2012-10-14T07:38:22.963
> 
> 标签：php, gd

我想调整 GD 图像的大小，使其内容适合图像。

这显然是可能的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T09:58:47.943

最大的问题是恢复文本的大小。Imagettftext 和 imagettfbox 返回一个点数组，这些点描述了图像中文本的位置，但不是允许您在逻辑上适合图像的区域。

这就是我的意思：

```
function demo($text, $size, $angle, $font)
{
    $gdh = imagecreatetruecolor(300, 300);
    $white = imagecolorallocate($gdh, 255, 255, 255);
    imagefill($gdh, 0, 0, $white);

    $black = imagecolorallocate($gdh, 0, 0, 0);
    $rect = imagettftext($gdh, $size, $angle, 50, 250, $black, $font, $text);

    // Display a rectangle using the teturn of imagettftext
    $red = imagecolorallocate($gdh, 255, 0, 0);
    imageline($gdh, $rect[0], $rect[1], $rect[2], $rect[3], $red);
    imageline($gdh, $rect[0], $rect[1], $rect[6], $rect[7], $red);
    imageline($gdh, $rect[2], $rect[3], $rect[4], $rect[5], $red);
    imageline($gdh, $rect[4], $rect[5], $rect[6], $rect[7], $red);

    // Calculate and display the real area we need to fit our image
    $blue = imagecolorallocate($gdh, 0, 0, 255);
    $minX = min(array ($rect[0], $rect[2], $rect[4], $rect[6]));
    $maxX = max(array ($rect[0], $rect[2], $rect[4], $rect[6]));
    $minY = min(array ($rect[1], $rect[3], $rect[5], $rect[7]));
    $maxY = max(array ($rect[1], $rect[3], $rect[5], $rect[7]));
    imageline($gdh, $minX, $minY, $minX, $maxY, $blue);
    imageline($gdh, $maxX, $minY, $maxX, $maxY, $blue);
    imageline($gdh, $minX, $minY, $maxX, $minY, $blue);
    imageline($gdh, $minX, $maxY, $maxX, $maxY, $blue);

    header("Content-type: image/png");
    imagepng($gdh);
    die();
} 
```

如果我们调用：

```
demo("Cheers!", 48, 45, "font.ttf"); 
```

我们会得到这张图片：

![在此处输入图像描述](../Images/e20b5e13fb5068144374017f33ee175d.png)

您可以看到由 imagettfbox 给出的红色区域，以及蓝色计算区域，这将允许我们定义适合文本的新图像大小。

这是使文本适合图像的解决方案（当然，将 font.ttf 替换为您自己的字体）。

```
function fitImageToText($gdh, $text, $size, $angle, $font)
{
    // Recover the box size where we will be able to put our text
    // Took from the doc http://www.php.net/manual/en/function.imagettfbbox.php#105593
    putenv('GDFONTPATH=' . realpath('.'));
    $rect = imagettfbbox($size, $angle, $font, $text);
    $minX = min(array ($rect[0], $rect[2], $rect[4], $rect[6]));
    $maxX = max(array ($rect[0], $rect[2], $rect[4], $rect[6]));
    $minY = min(array ($rect[1], $rect[3], $rect[5], $rect[7]));
    $maxY = max(array ($rect[1], $rect[3], $rect[5], $rect[7]));
    $targetWidth = $maxX - $minX;
    $targetHeight = $maxY - $minY;
    $srcWidth = imagesx($gdh);
    $srcHeight = imagesy($gdh);

    // Creating target image
    $targetGdh = imagecreatetruecolor($targetWidth, $targetHeight);
    imagealphablending($targetGdh, false);
    imagesavealpha($targetGdh, true);
    imagecopyresampled($targetGdh, $gdh, 0, 0, 0, 0, $targetWidth, $targetHeight, $srcWidth, $srcHeight);

    // Writting text inside the new image
    $red = imagecolorallocate($targetGdh, 255, 0, 0);
    imagettftext($targetGdh, $size, $angle, abs($minX), abs($minY), $red, $font, $text);

    return $targetGdh;
} 
```

调用它：

```
$gdh = imagecreatefrompng("cheers.png");
$newGdh = fitImageToText($gdh, "Cheers!", 48, 45, "font.ttf");
imagedestroy($gdh);

// Outputs the image
header("Content-type: image/png");
imagepng($newGdh);
imagedestroy($newGdh);
die(); 
```

原图：

![在此处输入图像描述](../Images/2486db44868d0b6298d72f35dcd2eab4.png)

结果图片：

![在此处输入图像描述](../Images/68bc955ed8e62cf1b69937092abd57b3.png)

注意：源图像的纵横比将适合文本大小，没有任何逻辑。如果要保留图像的纵横比，可以使用以下内容：

```
function fitImageToText($gdh, $text, $size, $angle, $font)
{
    // Recover the box size where we will be able to put our text
    // Took from the doc http://www.php.net/manual/en/function.imagettfbbox.php#105593
    putenv('GDFONTPATH=' . realpath('.'));
    $rect = imagettfbbox($size, $angle, $font, $text);
    $minX = min(array ($rect[0], $rect[2], $rect[4], $rect[6]));
    $maxX = max(array ($rect[0], $rect[2], $rect[4], $rect[6]));
    $minY = min(array ($rect[1], $rect[3], $rect[5], $rect[7]));
    $maxY = max(array ($rect[1], $rect[3], $rect[5], $rect[7]));
    $targetWidth = $maxX - $minX;
    $targetHeight = $maxY - $minY;
    $srcWidth = imagesx($gdh);
    $srcHeight = imagesy($gdh);

    // Recovering new source image size respecting its aspect ratio
    $srcRatio = $srcWidth / $srcHeight;
    $targetRatio = $targetWidth / $targetHeight;
    if ($srcWidth <= $targetWidth && $srcHeight <= $targetHeight)
    {
        $imgTargetWidth = $srcWidth;
        $imgTargetHeight = $srcHeight;
    }
    else if ($targetRatio > $srcRatio)
    {
        $imgTargetWidth = (int) ($targetHeight * $srcRatio);
        $imgTargetHeight = $targetHeight;
    }
    else
    {
        $imgTargetWidth = $targetWidth;
        $imgTargetHeight = (int) ($targetHeight / $srcRatio);
    }

    // Creating target image
    $targetGdh = imagecreatetruecolor($targetWidth, $targetHeight);
    imagealphablending($targetGdh, false);
    imagesavealpha($targetGdh, true);
    imagecopyresampled($targetGdh, $gdh, 0, 0, 0, 0, $imgTargetWidth, $imgTargetHeight, $srcWidth, $srcHeight);

    // Writting text inside the new image
    $red = imagecolorallocate($targetGdh, 255, 0, 0);
    imagettftext($targetGdh, $size, $angle, abs($minX), abs($minY), $red, $font, $text);

    return $targetGdh;
} 
```

这将导致：

![在此处输入图像描述](../Images/8733243ec23a2787dd74ac939f63a9a8.png)

# c# - 如何显示 X 和 Y 坐标

> ID：12880231
> 
> 赞同：0
> 
> 时间：2012-10-14T07:39:50.940
> 
> 标签：c#, mouse, coordinates

目前我有以下代码来获取鼠标位置，它工作正常，没有错误。不过现在，我需要说出我设置的 2 个标签中的坐标。如果您需要在示例代码中使用它们，标签名称是“Xcoord”和“Ycoord”。谢谢！（：

```
private void pictureBox_View_MouseDown(object sender, MouseEventArgs e)
{
    int x, y;
    x = e.X;
    y = e.Y;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:45:07.750

转换[`Int32.ToString`](http://msdn.microsoft.com/en-us/library/system.int32.tostring.aspx)并设置为[`Label.Text`](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.text%28v=VS.90%29.aspx)属性：

```
pictureBox_View.MouseMove += (sender, e) =>
                            {
                                Xcoord.Text = e.X.ToString();
                                Ycoord.Text = e.X.ToString();
                            }; 
```

**更新**：您可以在表单中使用 Timer 进行全局使用：

```
var timer = new Timer{Interval = 30};
timer.Tick += (s, ev) =>
                    {
                        Xcoord.Text = Cursor.Position.X.ToString();
                        Ycoord.Text = Cursor.Position.Y.ToString();
                    };
timer.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:44:15.740

`Xcoord.Text = e.X.ToString()`和`Ycoord.Text = e.Y.ToString()`

**编辑**

```
private void pictureBox_View_MouseDown(object sender, MouseEventArgs e)
{
    int x, y;
    x = e.X;
    y = e.Y;
    Xcoord.Text = x.ToString();
    Ycoord.Text = y.ToString();
} 
```

`Xcoord`并且`Ycoord`必须是定义此事件处理程序的表单上的标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:44:29.717

不确定到底是什么问题，只需将它们保存在标签文本属性中即可。

```
pictureBox.MouseMove += pictureBox_View_MouseMove;

private void pictureBox_View_MouseMove(object sender, MouseEventArgs e)
{
    Xcoord.Text = e.x.ToString();
    Ycoord.Text = e.y.ToString();
} 
```

# html - 无序列表项的背景图像交换鼠标悬停

> ID：12880233
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:40:11.643
> 
> 标签：html

我有一个列表项目，我想在项目上有一个图像而不是文本.... 最好的方法是什么？让我丧命的是试图用 onmouseover 事件交换图像......任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:46:38.733

你可以这样做[**我的小提琴**](http://jsfiddle.net/tuS6Y/)

解释：

在这里，您为每个元素提供一个背景图像，然后为这些`<li>`元素提供一点填充`<li>`......现在使用`:hover`您将这些替换为另一个图像:)

HTML

```
<ul>
   <li>Hello</li>
   <li>World</li>
</ul>​ 
```

CSS

```
ul li {
    background-image: url('http://www.bseindia.com/include/images/nav_bullet.png');
    background-repeat: no-repeat;
    background-position: 2px 4px;
    padding-left: 10px;
}

li:hover {
    background-image: url('http://www.rbs.in/India/_image/bullet-blue.gif');
    background-repeat: no-repeat;
    background-position: 2px 4px;
    padding-left: 10px;
} 
```

​</p>

# java - 如何在 Java 中获取错误/通知整数算术溢出？

> ID：12880237
> 
> 赞同：2
> 
> 时间：2012-10-14T07:41:09.933
> 
> 标签：java, math, netbeans, overflow

让我们有一个简单的代码如下

```
public class Sandbox {

    public static void run(String[] args) {
        int i = Integer.MAX_VALUE;
        int j = i+1;
        System.out.println(i);
        System.out.println(j);
    }
} 
```

这将打印输出

> 2147483647
> 
> -2147483648

执行代码时，j 处的值在没有通知我的情况下被忽略。

我使用 Netbeans IDE 运行此代码。

是否可以配置系统在发生此类算术溢出时通知我们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T07:48:13.647

[请参阅Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)中的最后一句话（第 15.18.2 章。数字类型的加法运算符（+ 和 -））：

> 尽管可能会发生上溢、下溢或信息丢失，但数值加法运算符的求值永远不会引发运行时异常。

有关此问题的长篇文章和解决方法的介绍，请参阅文章[Signaling Integer Overflows in Java](http://www.drdobbs.com/jvm/signalling-integer-overflows-in-java/210500001?pgno=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T10:40:03.483

在Java 8 之后的[Math API中，您可以使用：](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html)

```
Math.addExact(i, 1); 
```

`ArithmeticException`如果结果溢出，它将抛出`int`。

# r - 格子包的 equal.count() 带状疱疹

> ID：12880241
> 
> 赞同：4
> 
> 时间：2012-10-14T07:41:28.657
> 
> 标签：r, grouping, lattice

`equal.count()`当显然可以创建没有重叠的分组时，为什么该函数会创建重叠的带状疱疹。另外，重叠是在什么基础上决定的？

例如：

```
equal.count(1:100,4)

Data:
  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21  22
 [23]  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44
 [45]  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66
 [67]  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88
 [89]  89  90  91  92  93  94  95  96  97  98  99 100

Intervals:
   min   max count
1  0.5  40.5    40
2 20.5  60.5    40
3 40.5  80.5    40
4 60.5 100.5    40

Overlap between adjacent intervals:
[1] 20 20 20 
```

创建大小为 25 的组不是更好吗？或者，也许我错过了一些使这个功能有用的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T09:19:50.323

重叠平滑了带状疱疹之间的过渡（顾名思义，屋顶重叠），但更好的选择是使用一些窗口函数，例如在光谱分析中。

我相信它是史前遗物，因为这种行为可以追溯到一些非常古老的前格子代码，并且`coplot`只有 veteRans 才能记住。`lattice::equal.count`调用，您会在其中找到一些解释`co.intervals`。`graphics`尝试：

```
lattice:::equal.count(1:100,4,overlap=0) 
```

# delphi - Delphi：应该使用哪个异常类来引发最后的 Win32/Win64 错误？

> ID：12880243
> 
> 赞同：3
> 
> 时间：2012-10-14T07:41:41.860
> 
> 标签：delphi, freepascal

1.  在编写利用 Windows API 函数或某些 Windows DLL（例如 ntdll.dll）的函数的函数/过程/方法时，应该使用哪个 Delphi 异常类来引发最后的 Win32/Win64 错误？

    [从关于System.SysUtils.EExternal](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.EExternal)的 Delphi XE3 文档中引用：

    > *“注意：`EExternal`类代表 Win32 异常代码。`ExceptionRecord`成员指向**Win32**异常记录。”*

2.  从这一点，我得出结论，Win32和Win64的异常机制是有区别的。它们之间有什么区别？

3.  出于调试目的——我的意思是关于堆栈帧相关的东西——差异是否会导致每个平台的异常处理的代码实现不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T07:53:03.403

首先，我假设您的问题与 Delphi 有关，尽管有 Free Pascal 标签。我的假设是基于您引用 Delphi 文档的事实。

应通过调用将 Windows API 消息转换为异常[`RaiseLastOSError`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.RaiseLastOSError)。这将引发[`EOSError`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.EOSError). 那是一个原生的 Delphi 异常。

[`EExternalError`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.EExternal)异常无关。这就是 RTL 将系统陷阱（例如访问冲突、数学错误等）转换为本机异常时使用的方法。请注意，Win32 通常用于指代 32 位和 64 位 Windows API。实际上只有一个接口同时具有 32 位和 64 位变体。

32 位和 64 位 Windows 之间的底层异常处理模型完全不同。32 位模型是基于堆栈的，而 64 位模型是基于表的。这意味着异常处理和 try/finally 的实现在 32 位和 64 位体系结构之间完全不同。

基于 64 位表的模型在 XE2 中的原始实现存在大量错误。我很高兴地说，在我和其他人提交的一些QC报告之后，XE3的实现有了很大的改进。

Stack Overflow 不是深入探讨这两种架构的异常处理 ABI 的底层细节的地方。相反，我提供以下文章：

*   [Win32™ 结构化异常处理深度速成课程](http://www.microsoft.com/msj/0197/exception/exception.aspx)
*   [x64 结构化异常处理](http://www.osronline.com/article.cfm?article=469)

# biztalk - 使用本地帐户在 Windows 7 上安装 BizTalk

> ID：12880247
> 
> 赞同：1
> 
> 时间：2012-10-14T07:42:24.237
> 
> 标签：biztalk, biztalk-2010, biztalk-deployment

在开发环境中，我尝试使用本地帐户在 Windows 7 上安装 BizTalk。PC 不是域的一部分。安装很顺利，并且我在 Windows 7 上遵循了 BizTalk 的 msdn 文档。当我尝试运行 BizTalk 配置实用程序时，SSO 是第一个失败的事情。

它创建了 SSODB 数据库、构建表等，但 SSO 配置失败。我在事件日志中看到错误，例如：

```
SSO AUDIT
 Function: GetApplications2
 Tracking ID: a9b83ad5-1f05-407f-9d0b-63b4e4acd7d5
 Client Computer: VM-BizTalk (mmc.exe:3572)
 Client User: VM-BizTalk\Jeremy
 Application Name: -
 Error Code: 0xC0002A02, The SSO system is currently disabled.

The SSO service is running under a local account. This is not recommended and will limit the functionality of SSO. See your documentation for details.
 SSO Service Account: VM-BizTalk

Access denied. The client user must be a member of one of the following accounts to perform this function.
 SSO Administrators: SSO Administrators
 SSO Affiliate Administrators: -
 Application Administrators: -
 Application Users: -
 Additional Data: VM-BizTalk\Jeremy 

Secret server access denied.
 Client User: VM-BizTalk\Jeremy 
```

sso 服务帐户和我的帐户都是 SSO 管理员组（本地帐户和组）的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:36:50.547

好吧，我又挖了一点，在 BizTalk 配置日志文件中发现了一个额外的错误：

**无法生成主密钥并将其备份到文件：C:\Program Files\Common Files\Enterprise Single Sign-On\SSO0FAB.bak (SSO) 附加信息 (0x80070005) 访问被拒绝。**

搜索这个错误我发现了一个博客条目：

[http://blogical.se/blogs/mikael_sand/archive/2009/10/01/failed-to-create-the-master-secret-file-why-do-these-things-always-happen-to-me。 aspx?CommentPosted=true#commentmessage](http://blogical.se/blogs/mikael_sand/archive/2009/10/01/failed-to-create-the-master-secret-file-why-do-these-things-always-happen-to-me.aspx?CommentPosted=true#commentmessage)

建议此解决方案：

1.  取消配置 BizTalk 并删除 SSODB 和 BusinessRulesDB。向导不会删除它们。
2.  现在手动创建 SSO 管理员组并向其中添加安装帐户和 BizTalk 服务帐户。
3.  注销并重新登录。重新启动安装。

我做了上面的步骤。另外，在第 2 步之后，我重新运行了 BizTalk 安装，选择了修复，然后完成了安装过程，这让我完成了配置步骤，最后配置成功！

# asp.net - 触发 ImageButton 服务器端事件，但页面未使用 ASP.NET UpdatePanel 更新

> ID：12880251
> 
> 赞同：2
> 
> 时间：2012-10-14T07:42:56.597
> 
> 标签：asp.net, asp.net-ajax

我有实现的功能，即当用户在 GridView 页脚并按 Enter 键时，将插入该行。在 GridView 中，我有 2`<asp:ImageButton>`个，`<EmptyDataTemplate>`另一个在`<FooterTemplate>`我编写 JavaScript 以在最后一个字段中使用时执行 ImageButton Click 事件，ImageButton Server-Side Click 事件被触发但页面未更新。

这是JavaScrip函数：

```
 function insertByEnterKey(buttonId) {
        var button = document.getElementById(buttonId);
        var keyEvent = event.keyCode;

        if (keyEvent == 13) {
            button.click();

        }
    } 
```

这是 ASPX：

```
<asp:UpdatePanel ID="UpdatePanel" runat="server">
        <ContentTemplate>
            ...
            <asp:GridView ID="grvDonationDist" runat="server" AutoGenerateColumns="False" ShowFooter="True"
                DataKeyNames="reciept_num,donation_code" meta:resourcekey="grvDonationDistResource1"
                ShowHeaderWhenEmpty="True" BorderWidth="1px" BackColor="White" BorderColor="LightSteelBlue"
                CellPadding="0" Font-Name="tahoma" Font-Size="10pt" ForeColor="DarkBlue" HeaderStyle-BackColor="#aaaadd"
                GridLines="None">
                <EmptyDataTemplate>
                    <asp:Label CssClass="label" ID="lblEmptyDonationDist" runat="server" Text="No Donations"
                        meta:resourcekey="lblEmptyDonationDistResource1"></asp:Label>
                    <tr>
                        <td>
                            <asp:ImageButton ID="lbtnAdd" runat="server" OnClick="lbtnAdd_Click" meta:resourcekey="AddResource1"
                                ImageUrl="Content/images/add.png"></asp:ImageButton>
                        </td>
                        ...
                        <td>
                            <asp:TextBox ID="txtDonationNotesFooter" CssClass="textbox" runat="server" meta:resourcekey="txtDonationNotesResource1"
                                onKeyDown="insertByEnterKey('lbtnAdd');"></asp:TextBox>
                        </td>
                    </tr>
                </EmptyDataTemplate>
                <Columns>
                    <asp:TemplateField FooterText="Total" ShowHeader="False">
                        <EditItemTemplate>
                          ...
                        </EditItemTemplate>
                        <ItemTemplate>
                            ...
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:ImageButton ID="lbtnAdd" runat="server" OnClick="lbtnAddFromFooter_Click" meta:resourcekey="AddResource1"
                                ImageUrl="Content/images/add.png"></asp:ImageButton>
                        </FooterTemplate>
                    </asp:TemplateField>
                  ...
                    <asp:TemplateField HeaderText="Notes" SortExpression="distribution_remrks" meta:resourcekey="TemplateFieldResource3">
                        <EditItemTemplate>
                            ...
                        </EditItemTemplate>
                        <ItemTemplate>
                           ...
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtDonationNotesFooter" CssClass="textbox" runat="server" meta:resourcekey="txtDonationNotesResource1"
                                onKeyDown="insertByEnterKey('lbtnAdd');"></asp:TextBox>
                        </FooterTemplate>
                    </asp:TemplateField>                  
                </Columns>
            </asp:GridView>
      </ContentTemplate>
</asp:UpdatePanel> 
```

这是 VB.NET：

```
Protected Sub lbtnAddFromFooter_Click(sender As Object, e As EventArgs)
    'Footer Add
    'Add Insert Logic here
    Try

        Dim donationDist As New DonationDist

        Dim txtDonationValueFooter As TextBox = grvDonationDist.FooterRow.FindControl("txtDonationValueFooter")
        Dim txtDonationNotesFooter As TextBox = grvDonationDist.FooterRow.FindControl("txtDonationNotesFooter")
        Dim ddlCountryFooter As DropDownList = grvDonationDist.FooterRow.FindControl("ddlCountryFooter")
        Dim ddlPurposeFooter As DropDownList = grvDonationDist.FooterRow.FindControl("ddlNewDonationPurposeType")
        Dim chkPartial As CheckBox = grvDonationDist.FooterRow.FindControl("chkPartialFooter")
        Dim standInstruct As Label = grvDonationDist.FooterRow.FindControl("lblStandInstructFooter")
        Dim donationValue As Decimal = Convert.ToDecimal(txtDonationValueFooter.Text)

        'Validation: Donation Value must be > 0
        If (donationValue <= 0) Then

            If (CultureInfo.CurrentUICulture.Name.Contains("ar")) Then

                ShowAlert("قيمة الترع يجب ان تكون أكبر من الصفر")

            ElseIf (CultureInfo.CurrentUICulture.Name.Contains("en")) Then

                ShowAlert("Donation Value must be greater than 0")

            End If

            Exit Sub

        End If

        myDonationDistDataTable = Session("myDonationDistDataTable")

        'Validation: Only one donation type per Receipt
        For Each row As DataRow In myDonationDistDataTable.Rows

            If (row.Item("donation_code") = ddlPurposeFooter.SelectedValue) Then

                If (CultureInfo.CurrentUICulture.Name.Contains("ar")) Then

                    ShowAlert("لا يمكن تكرار الغرض في نفس سند القبض")

                ElseIf (CultureInfo.CurrentUICulture.Name.Contains("en")) Then

                    ShowAlert("You cannot add more than on Donation Type per receipt")

                End If

                Exit Sub
            End If

        Next

        myDonationDistDataRow = myDonationDistDataTable.NewRow()
        myDonationDistDataRow("reciept_num") = 0
        myDonationDistDataRow("donation_code") = Convert.ToInt16(ddlPurposeFooter.SelectedValue)
        myDonationDistDataRow("donation_name") = ddlPurposeFooter.SelectedItem.Text
        myDonationDistDataRow("donation_value") = Convert.ToDecimal(txtDonationValueFooter.Text)
        myDonationDistDataRow("country_code") = Convert.ToInt16(ddlCountryFooter.SelectedValue)
        myDonationDistDataRow("country_name") = ddlCountryFooter.SelectedItem.Text
        myDonationDistDataRow("distribution_remrks") = txtDonationNotesFooter.Text
        myDonationDistDataRow("partial") = chkPartial.Checked
        myDonationDistDataRow("standing_inst_num") = If(String.IsNullOrWhiteSpace(standInstruct.Text), 0, Convert.ToInt32(standInstruct.Text))

        'add the new DataRow to DataTable's Row
        myDonationDistDataTable.Rows.Add(myDonationDistDataRow)

        Session("myDonationDistDataTable") = myDonationDistDataTable

        grvDonationDist.DataSource = myDonationDistDataTable
        grvDonationDist.DataBind()

    Catch ex As Exception
         'TODO: Log the exception
    End Try
End Sub 
```

这段代码有什么问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:25:37.387

你不能那样做，你需要将事件添加到更新面板
javascript：

```
 function insertByEnterKey(buttonId) {
        var button = document.getElementById(buttonId);
        var keyEvent = event.keyCode;

        if (keyEvent == 13) {
            __doPostBack('<%= UpdatePanel.UniqueId %>', '');
        }
    } 
```

aspx：

```
<asp:UpdatePanel ID="UpdatePanel" runat="server" UpdateMode="Conditional" onload="UpdatePanel_Load">
    <ContentTemplate>

    </ContentTemplate>
</asp:UpdatePanel> 
```

CS：

```
protected void UpdatePanel_Load(object sender, EventArgs e)
    {
        //add your code here
    } 
```

如果您的代码中没有 _doPostBack，您可以像这样添加它..

```
protected void Page_Load(object sender, EventArgs e)
    {
        ClientScript.GetPostBackEventReference(this, string.Empty);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:13:43.987

我只是通过在`insertByEnterKey()`函数后添加 return false 来解决它

```
onKeyDown="insertByEnterKey('lbtnAdd'); return false;" 
```

**更好的解决方案：**

当用户按下“Enter Key”时，使 JavaScript 函数返回 False，否则返回 True。

```
function insertByEnterKey(buttonId) {
            var button = document.getElementById(buttonId);
            var keyEvent = event.keyCode;

            if (keyEvent == 13) {
                button.click();
                return false;
            } else {
                return true;
            }
        } 
```

并像这样在文本框中使用它：

```
<asp:TextBox ID="txtDonationNotesFooter" runat="server" onKeyDown="return insertByEnterKey('lbtnAdd');"></asp:TextBox> 
```

# qt - Qt hide QLayout（在两种布局之间切换）

> ID：12880252
> 
> 赞同：1
> 
> 时间：2012-10-14T07:43:16.337
> 
> 标签：qt, layout

我没有找到解决我的问题的两个`QLayouts`. `QHBoxLayout`当我将添加新的小部件、按钮等时，我需要具有可能扩展功能的应用程序。...所以我有：一种`QDialog`和两种布局。现在我知道我无法隐藏布局。所以我只是托盘：

```
layout()->removeItem(firstlayout);
layout()->addLayout(secondLayout); 
```

但是当我这样做时，我在位置 [0,0] 上看到了第一个布局中的所有项目。所以下一步我尝试：

```
for (all items in first layout) if (widget) widget->hide(); 
```

但这仅适用于`QWidget`我在布局中有许多不同的项目。

简单的方法是使用小部件，因为可以使用隐藏/显示，但是当我添加新项目时我需要自动扩展窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:23:12.230

只需重建布局，无需同时保持两个布局。可能最清楚的是有两个（或更多）方法，首先删除当前布局，然后创建新布局，向其中添加小部件，隐藏所有要隐藏的小部件，并将其设置为当前布局。请注意，您甚至不需要为布局保留成员变量，因为 QWidget 无论如何都有它并为您提供了 setter 和 getter。

或者，如果您在不同的布局中有不同的小部件，并且实际上希望能够“切换页面”，可以这么说，只需使用[QStackedWidget](http://doc.qt.digia.com/latest/qstackedwidget.html "QStackedLayout")。或者，如果您有一个固定部分（按钮等），然后与“页面”分开，然后将“页面”放入 QStackedWidget，并保留固定部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:16:24.830

'addLayout(secondLayout/firstLayout) ' 将自动删除其他布局，您不必删除它。如果您保留指向布局的指针（之前有 addWidget() ），您可以稍后简单地使用布局和小部件。:)

# python - Python用注释绘制3D点

> ID：12880254
> 
> 赞同：2
> 
> 时间：2012-10-14T07:43:40.610
> 
> 标签：python, matplotlib

我有一个 3D 图，我想用坐标注释它们。但是，注释会重叠。我希望它们不要重叠。

我的问题是——

*   注释重叠
*   在传说中，我不明白为什么有三角形和圆形两个符号。不应该只有一个吗？

仅供参考，我的数据集仅限于以下几点。因此，即使任何其他参数都是硬编码的，我也可以。

这是我的代码。

```
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d import proj3d
import matplotlib.pyplot as plt
import pylab    

xData1=[ 24500.,   2980.,   2980.,  13740.]
xData2=[  8360.,   8360.,  24500.,   5670.,   2980.,   2980.,  11050.,  13740.]
yData1=[ 179.,  244.,  242.,  181.]
yData2=[ 132.,  149.,  116.,  163.,  247.,  228.,  116.,  116.]
zData1=[  1.,  44.,  86.,  44.]
zData2=[ 86.,  22.,   1.,  86.,  43.,  86.,  86.,  22.]

fig = plt.figure()
ax = fig.gca(projection='3d')

ax.plot(xData1, yData1, zData1, '^', c='r', label='cfg1')
ax.plot(xData2, yData2, zData2, 'o', c='b', label='cfg2')

for i in range(len(xData1)):
    text='['+str(int(xData1[i]))+','+str(int(yData1[i]))+','+str(int(zData1[i]))+']'    
    x2, y2, _ = proj3d.proj_transform(xData1[i],yData1[i],zData1[i], ax.get_proj())    
    label = pylab.annotate(text,
    xycoords='data', 
    xy = (x2, y2), xytext = (60, 20),
    textcoords = 'offset points', ha = 'right', va = 'bottom',
    bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
    arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))

for i in range(len(xData2)):
    text='['+str(int(xData2[i]))+','+str(int(yData2[i]))+','+str(int(zData2[i]))+']'    
    x2, y2, _ = proj3d.proj_transform(xData2[i],yData2[i],zData2[i], ax.get_proj())    
    label = pylab.annotate(text,
    xycoords='data', 
    xy = (x2, y2), xytext = (20, 20),
    textcoords = 'offset points', ha = 'right', va = 'bottom',
    bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
    arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))

ax.set_xlabel('X-Data')
ax.set_ylabel('Y-Data')
ax.set_zlabel('Z-Data')

ax.legend(ncol=3)
plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:27:37.560

这两个问题都是相对容易的答案。我先从第二个开始：您的图例中有两个符号，因为您在定义图例时没有指定数字，默认值为两个。要更正，只需更改：

```
 ax.legend(ncol=3, numpoints=1) 
```

where`numpoints`更改图例中的点数 - 现在设置为 1。

第一个问题的答案涉及操纵文本注释的位置，更具体地说`xytext`，它给出了文本的坐标。用下面的代码替换第二个 for 循环应该可以消除重叠文本，并为您提供一个很好的示例，说明如何针对任何其他难看的位置问题更改注释框的位置：

```
 for i in range(len(xData2)):
    text='['+str(int(xData2[i]))+','+str(int(yData2[i]))+','+str(int(zData2[i]))+']'
    x2, y2, _ = proj3d.proj_transform(xData2[i],yData2[i],zData2[i], ax.get_proj())
    if i==4:
        label = pylab.annotate(text,
                       xycoords='data',
                       xy = (x2, y2), xytext = (0, -50),
                       textcoords = 'offset points', ha = 'right', va = 'bottom',
                       bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
                       arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))
    elif i==6:
        label = pylab.annotate(text,
                           xycoords='data',
                           xy = (x2, y2), xytext = (-40, 0),
                           textcoords = 'offset points', ha = 'right', va = 'bottom',
                           bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
                           arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'))
    else:
        label = pylab.annotate(text,
                           xycoords='data',
                           xy = (x2, y2), xytext = (-20, 10),
                           textcoords = 'offset points', ha = 'right', va = 'bottom',
                           bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
                           arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0')) 
```

# jquery - jQuery 插件创建和面向公众的方法

> ID：12880256
> 
> 赞同：4
> 
> 时间：2012-10-14T07:44:05.423
> 
> 标签：jquery, plugins, methods, public, creation

我创建了一个插件来使用 DIV 将 HTML 选择框转换为自定义下拉菜单。

一切都很好，但我想让它变得更好一点。[看我的 jsFiddle](http://jsfiddle.net/sygad/ajEv2/)

在插件的末尾，我有 2 个方法，slideDownOptions 和 slideUpOptions，我想让这些在插件之外可用，以便其他事件可以触发动作。

我有点困惑如何做到这一点，更具体地说，如何从插件内部和插件外部调用方法。

任何帮助总是很感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T08:14:33.147

考虑使用面向对象的代码重构你的插件。有了这个，你可以为你的插件制作 API，比如 jQuery UI API。因此，您可以访问插件方法，例如：

```
$('select').customSelect(); // apply plugin to elements
$('select').customSelect('resetOpacity'); // call method resetOpacity();
$('select').customSelect('setOpacity', 0.5); // call method with arguments 
```

创建此类插件的基本模板如下所示：

```
// plugin example
(function($){
    // custom select class
    function CustomSelect(item, options) {
        this.options = $.extend({
            foo: 'bar'
        }, options);
        this.item = $(item);
        this.init();
    }
    CustomSelect.prototype = {
        init: function() {
            this.item.css({opacity:0.5});
        },
        resetOpacity: function() {
            this.setOpacity('');
        },
        setOpacity: function(opacity) {
            this.item.css({opacity:opacity});
        }
    }

    // jQuery plugin interface
    $.fn.customSelect = function(opt) {
        // slice arguments to leave only arguments after function name
        var args = Array.prototype.slice.call(arguments, 1);
        return this.each(function() {
            var item = $(this), instance = item.data('CustomSelect');
            if(!instance) {
                // create plugin instance and save it in data
                item.data('CustomSelect', new CustomSelect(this, opt));
            } else {
                // if instance already created call method
                if(typeof opt === 'string') {
                    instance[opt].apply(instance, args);
                }
            }
        });
    }

}(jQuery));

// plugin testing
$('select').customSelect(); 
```

在这里工作 JS 小提琴：http: [//jsfiddle.net/XsZ3Z/](http://jsfiddle.net/XsZ3Z/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T08:21:59.460

您必须重构代码才能使其正常工作。考虑使用[jQuery 样板](http://jqueryboilerplate.com/)：

```
;(function ( $, window, undefined ) {

  var pluginName = 'convertSelect',
  document = window.document,
  defaults = {
    propertyName: "value"
  };

  function Plugin( element, options ) {
    this.element = element;
    this.options = $.extend( {}, defaults, options) ;

    this._defaults = defaults;
    this._name = pluginName;

    this.init();
  }

  Plugin.prototype = {

    // Private methods start with underscore
    _generateMarkup: function() {

      // you can access 'this' which refers to the constructor
      // so you have access the all the properties an methods
      // of the prototype, for example:
      var o = this.options

    },

    // Public methods
    slideDownOptions: function() { ... }

  }

  $.fn[ pluginName ] = function ( options ) {
    return this.each(function () {
      if (!$.data( this, 'plugin_' + pluginName ) ) {
        $.data( this, 'plugin_' + pluginName, new Plugin( this, options ) );
      }
    });
  };

}(jQuery, window)); 
```

然后你可以像这样调用公共方法：

```
var $select = $('select').convertSelect().data('plugin_convertSelect');
$select.slideDownOptions(); 
```

我的一个项目也有类似的问题，我最近不得不重构整个事情，因为我用太多的方法污染了 jQuery 命名空间。jQuery Boilerplate 工作得很好，它基于官方的 jQuery 指南，但有一些曲折。如果您想查看此插件模式的实际效果，请查看[https://github.com/elclanrs/jq-idealforms/tree/master/js/src](https://github.com/elclanrs/jq-idealforms/tree/master/js/src)。

# android - 使用 ViewPager 实现捏缩放

> ID：12880262
> 
> 赞同：8
> 
> 时间：2012-10-14T07:44:32.667
> 
> 标签：android, zooming, android-viewpager, pinchzoom

我正在使用 ViewPager 从远程服务器检索图像。一切都运行良好，但问题是我不知道如何实现捏放大/缩小功能。我的代码如下

```
public class ImagePagerActivity extends BaseActivity {

    private ViewPager pager;

    private DisplayImageOptions options;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.ac_image_pager);
    Bundle bundle = getIntent().getExtras();
    String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
    int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

    options = new DisplayImageOptions.Builder()
                .showImageForEmptyUri(R.drawable.image_for_empty_url)
                .cacheOnDisc()
                .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
                .build();

    pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(new ImagePagerAdapter(imageUrls));
    pager.setCurrentItem(pagerPosition);

    }

    protected void onStop() {
    imageLoader.stop();
    super.onStop();
    }

    private class ImagePagerAdapter extends PagerAdapter {

    private String[] images;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images) {
    this.images = images;
    inflater = getLayoutInflater();
    }

    public void destroyItem(View container, int position, Object object) {
    ((ViewPager) container).removeView((View) object);
    }

    public void finishUpdate(View container) {
    }

    public int getCount() {
    return images.length;
    }

    public Object instantiateItem(View view, int position) {
                final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
                final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
                final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

    imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {

    public void onLoadingStarted() {
    spinner.setVisibility(View.VISIBLE);
    }

    public void onLoadingFailed(FailReason failReason) {
    String message = null;
    switch (failReason) {
    case IO_ERROR:
    message = "Input/Output error";
    break;
    case OUT_OF_MEMORY:
    message = "Out Of Memory error";
    break;
    case UNKNOWN:
    message = "Unknown error";
    break;
    }
    Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

    spinner.setVisibility(View.GONE);
                              imageView.setImageResource(android.R.drawable.ic_delete);
                    }

    public void onLoadingComplete(Bitmap loadedImage) {
    spinner.setVisibility(View.GONE);
    Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
    imageView.setAnimation(anim);
    anim.start();
    }

    public void onLoadingCancelled() {
    // Do nothing
    }
    });

    ((ViewPager) view).addView(imageLayout, 0);
    return imageLayout;
    }

    public boolean isViewFromObject(View view, Object object) {
    return view.equals(object);
    }

    public void restoreState(Parcelable state, ClassLoader loader) {
    }
    public Parcelable saveState() {
    return null;
    }

    public void startUpdate(View container) {
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T14:17:55.820

如果您的 viewpager 使用的是 imageView，那么您可以使用 touchImageView

[https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)

只需用这个自定义视图替换您当前的图像视图。祝你好运

# jquery - 保存页面之间div的垂直位置，然后动画到新位置？

> ID：12880275
> 
> 赞同：1
> 
> 时间：2012-10-14T07:46:38.500
> 
> 标签：jquery, cookies

我正在使用[Sticky Panel](http://code.google.com/p/sticky-panel/ "粘性面板")在主页上放置一个 div，以便它与页面一起从大约一半向下滚动到从页面顶部粘贴 100px。

在我网站的其余部分，div 已经位于距离页面顶部 100 像素的固定位置。如果有人在没有先滚动主页的情况下从主页导航到任何其他页面，则 div 会跳转到 100px 的位置。

我想保存 div 的垂直位置（可能在 cookie 中？）并将其传输到新页面，然后让 div 动画到 100px 位置。

非常感谢任何帮助

更新：

我找到了一些与 jquery cookie 插件一起使用的代码，我认为可以对其进行修改：

```
$(document).ready(function(){
  // does cookie exist?
  if ($.cookie('menu_position')) {
        var coords = $.cookie('menu_position').split(',');
  } else {
        var coords = [100,100]; // default top and left
  }
  $('.menu').css({top:coords[0],left:coords[1]});
}); 
```

然后，在您的可拖动对象的拖动停止事件上，将 cookie 值设置为

```
$.cookie('menu_position',$('.menu').css('top')+','+$('.menu').css('left')); 
```

我可以简单地设置顶部位置吗？因为左边的位置会根据第一次访问者的屏幕分辨率而有所不同，不是吗？另外我假设应该在主页卸载事件上设置 cookie，在每个其他页面上读取并在会话结束时删除？因此，如果有人登陆 about 页面进入主页，则不会发生任何事情。我认为我的逻辑有效:-)

然后只需要让它动画！唷

# codeigniter - CodeIgniter Only Index Page 正在工作

> ID：12880278
> 
> 赞同：1
> 
> 时间：2012-10-14T07:46:44.337
> 
> 标签：codeigniter

我最近开始使用 codeIgniter，但遇到了一个问题。

我的文件`view`夹中有两个文件

1.  索引.php
2.  配置文件.php

当我转到 url`http://localhost/php/ci/index.php/`时，它会显示我的 index.php 页面，一切都很好。

但是当我去`http://localhost/php/ci/profile.php/`它说

`The requested url was not found on server`.

为什么会发生这种情况是什么问题？？

我的控制器文件名称是：

1.  home_control.php
2.  profile_control.php

home_control 将与 index.php 交互，而 profile_control 将与 profile.php 交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:54:44.887

这是错误的做法，请阅读有关如何设置`.htaccess`文件以及路由如何工作的手册。你不需要有多个`index.php`类似的文件，应该只有一个。

[这是](http://codeigniter.com/user_guide/general/urls.html)您应该开始阅读的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:56:20.593

您对 MVC 的理解存在根本缺陷。`index.php`位于**文档根目录**（即 www 目录）中的文件实际上负责在每个*请求*上启动 CodeIgniter。这就是`index.php`您在 URL 栏中看到的内容。

*您*对在文件夹中制作`index.php`的内容感到困惑。您永远无法在文件夹内创建文件并使用 URL 栏立即访问它。你必须通过一个控制器。`index.php`*`views``views`*

 *如果您访问`http://localhost/php/ci/index.php/profile_control`并`controllers/profile_control.php`包含::

```
<?php
class Profile_control extends CI_Controller{
    function __construct(){
        parent::__construct();
    }
    function index(){
        $this->load->view('profile')
    }
} 
```

您将能够看到里面的内容`views/profile.php`

为减少混淆，[您必须在继续之前阅读此内容](http://codeigniter.com/user_guide/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:15:06.800

就像另一个说的那样。一切都通过 index.php。但是您实际上可以隐藏它，这样您就不必在 url 中键入它，这不是很漂亮。

转到您的 applications/config/config.php 并找到类似以下内容：

```
/*
|--------------------------------------------------------------------------
| Index File
|--------------------------------------------------------------------------
|
| Typically this will be your index.php file, unless you've renamed it to
| something else. If you are using mod_rewrite to remove the page set this
| variable so that it is blank.
|
*/
$config['index_page'] = "index.php"; 
```

删除 index.php。如果我没记错的话，你需要在 .htaccess （在你的 index.php 旁边）添加这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

如果一切正常，您可以调用您的配置文件控制器，例如`http://localhost/php/ci/profile_control`. 默认情况下，它会调用 index 操作，因此请确保您`public function index`在该控制器中有一个。url 结构总是`http://url.com/*controller*/*action*/*extra params here*`

例如，如果你想在你的控制器中调用另一个动作（函数）`public function profile()`，你可以调用这个 url `http://localhost/php/ci/profile_control/profile`。

> 正是在第二个操作中，您使用**$this->load->view('profile')**指定了其他视图文件。这将调用**view/profile.php**文件

您也可以像这样 -> 将值传递给该操作`http://localhost/php/ci/profile_control/profile/id/7`。

在您的个人资料操作中，您需要如下获取这些值

```
public function profile($action, $value)
{
    //$action = the word id and $value = the number 7
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-18T07:42:03.363

您可以使用以下代码在项目文件夹内但在应用程序文件夹外创建另一个 .htaccess 文件

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

我也有同样的问题，只有我的索引页面在工作，它对我有用！*

# c# - Linq to sql ExecuteQuery 用于聚合函数

> ID：12880283
> 
> 赞同：0
> 
> 时间：2012-10-14T07:47:28.717
> 
> 标签：c#, asp.net, .net, linq-to-sql

我在 SQL 查询中使用聚合函数，我想要 linq to sql 中的结果。

我的查询是：

```
 string sql = "Select sum(e.Salary) as 'TotalSalary' from Employee e"; 
```

我正在使用 LinqToSql 来获取 TotalSalary。

```
IEnumarable result = DBContext.ExecuteQuery(sql); 
```

如何从结果中获得“TotalSalary”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:54:59.277

如果您使用的是 Linq2Sql，您可以简单地执行以下操作：

```
var totalSalary = DBContext.Employee.Sum(e => e.Salary) 
```

或者，使用自定义 SQL 方法，它可以这样工作：

```
string sql = "Select sum(e.Salary) from Employee e";
var totalSalary = DBContext.ExecuteQuery<decimal>(sql).Single(); 
```

*（根据需要调整`decimal`到您的实际数据类型）*

# list - 在erlang中模拟范围（L，N）

> ID：12880288
> 
> 赞同：4
> 
> 时间：2012-10-14T07:48:02.930
> 
> 标签：list, erlang, range, seq

一大早玩 Erlang 我得到了一个奇怪的结果：

```
 -module(bucle01).

   -compile(export_all).

   for(N) when N >=0 ->

                lists:seq(1,N).

   for(L,N) when L =< N ->

                lists:seq(L,N);

   for(L,N) when L > N ->

                lists:reverse(for(N,L)). 
```

当我运行程序时，我看到了这个：

```
> bucle01:for(1,10).

[1,2,3,4,5,6,7,8,9,10]

> bucle01:for(10,1).

[10,9,8,7,6,5,4,3,2,1]

>bucle01:for(7,10).

[7,8,9,10]

>bucle01:for(8,10).

"\b\t\n"                %% What's that !?!

>bucle01:for(10,8).

"\n\t\b"               %% After all  it has some logic ! 
```

请问有什么“不要喝太多”的“Kool-Aid”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T08:18:55.230

Erlang 中的字符串只是 ASCII 数字的列表。Erlang shell 试图通过查找可打印字符来确定您的列表是数字列表还是字符串，而不需要元数据。

`\b`(backspace)、`\t`(tab) 和`\n`(newline) 都是一些常见的 ASCII 字符，因此 shell 会显示字符串而不是数字。但是，列表的内部结构完全相同。

这也包含在 Erlang 常见问题解答中： [为什么数字列表打印不正确？](http://www.erlang.org/faq/problems.html#id53803)
这里有一些想法可以防止这种魔法：[我可以在 Erlang shell 中禁用将小整数打印为字符串的列表吗？](https://stackoverflow.com/questions/2348087/can-i-disable-printing-lists-of-small-integers-as-strings-in-erlang-shell)

# php - 如何查询一行中的所有字段

> ID：12880291
> 
> 赞同：1
> 
> 时间：2012-10-14T07:48:35.603
> 
> 标签：php, mysql, loops

我知道这很简单，但是我有一段时间没有使用 PHP/MySQL，而且我一直在阅读其他线程/php 网站，但似乎无法理解。

如何从 MySQL 表中查询单行并打印出所有包含数据的字段？我需要排除 NULL 字段，并且只将那些有数据的字段添加到 html 列表中。

为了澄清，我想在不指定字段名称的情况下显示字段数据，只是因为我有很多字段并且不知道哪些字段将为 NULL 或不。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:49:50.357

只是`SELECT * FROM table_name WHERE....`会做的伎俩。

要从特定字段中获取数据，它将是`SELECT field_1,field_2,field_3`......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:02:07.903

您概述的内容需要 4 个基本步骤：

1.  连接到数据库。

2.  查询特定行。

3.  从结果中删除空值。

4.  创建html。

第 1 步是非常特定于环境的，因此我们可以安全地跳过这里。

第 2 步 - SQL

```
SELECT * from <tablename> WHERE <condition isolating single row> 
```

第 3 步 - PHP（假设 $query 代表执行的数据库查询）

```
//convert the result to an array
$result_array = mysql_fetch_array($query);

//remove null values from the result array
$result_array = array_filter($result_array, 'strlen'); 
```

第 4 步 - PHP

```
foreach ($result_array as $key => $value)
{
    echo $value \n;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:53:54.800

你必须创建一个代表 mysql 查询的字符串。然后在 php 中有一个名为`mysql_query()`. 使用上述字符串作为参数调用此函数。它会返回你所有的结果。[这里有些例子](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T07:55:27.147

你需要这样做......

首先连接到你的sql...[参考](http://php.net/manual/en/function.mysqli-connect.php)

现在进行查询并将其分配给变量...

```
$query = mysqli_query($connect, "SELECT column_name1, column_name2 FROM tablename"); 
```

如果要检索单行使用`LIMIT 1`

```
$query = mysqli_query($connect, "SELECT column_name1, column_name2 FROM tablename LIMIT 1"); 
```

如果您想获取所有列，只需使用`*`而不是列名，并且如果您想将某些行保留在特定列数据所在的位置，`blank`您可以这样做

$query = mysqli_query($connect, "SELECT * FROM tablename WHERE column_name4 !=''");

现在从中取出数组并像这样循环遍历数组..

```
while($show_rows = mysqli_fetch_array($query)) {
   echo $show_rows['column_name1'];
   echo $show_rows['column_name2'];
} 
```

如果你不想在 while 循环中包含列名，你可以这样做：

```
while($show_rows = mysqli_fetch_array($query)) {
   foreach( $show_rows as $key => $val )
   {
       echo $show_rows[$key];
   }
} 
```

# ajax - Ajax表单提交mootools我做错了什么

> ID：12880297
> 
> 赞同：0
> 
> 时间：2012-10-14T07:49:48.387
> 
> 标签：ajax, forms, mootools

我有以下js代码：

```
window.addEvent('domready', function() {
    var trigger = $('sendme');
    trigger.addEvent( 'click', function(event){
          event.preventDefault()
          var sendform =    new Form.Request($('newform'), {
              onSend: function(){
                  console.log('sending');
              },
              onComplete: function(){
                  console.log('sent');
              }
          });           
          sendform.send();
    });
}); 
```

并用数据形成：

```
<form action="index.php?option=com_mycomp&amp;layout=edit&amp;id=1" method="post" name="newform" id="newform" class="form-validate">... 
```

表单提交得很好，我可以看到更改，但没有日志，因此无法执行我需要的操作

表单操作不应该给我任何回复，这是简单的帖子，但不应该这样做吗？我是否需要将表单发送到另一个文件，该文件会给我像 json 这样的响应并像这样提交我的表单？我究竟做错了什么 ？

任何帮助表示赞赏。谢谢！

**自发布以来的小更新，**

我将表单更改为通过 json 文件发送数据和接收响应，但仍然没有响应消息。一切都在更新，所以提交作品 100%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:21:43.457

正确的方法是 new Form.Request($('newform'), **console.log(),** {

```
window.addEvent('domready', function() {
    var trigger = $('sendme');
    trigger.addEvent( 'click', function(event){
          event.preventDefault()
          var sendform =    new Form.Request($('newform'),console.log(), {
              onSend: function(){
                  console.log('sending');
              },
              onComplete: function(){
                  console.log('sent');
              }
          });           
          sendform.send();
    });
}); 
```

# .net - 将 async 和 await 与 System.Threading.Thread.Sleep 一起使用

> ID：12880299
> 
> 赞同：10
> 
> 时间：2012-10-14T07:49:54.343
> 
> 标签：.net, asynchronous, async-await

我开始使用 .NET4.5 进行异步和等待。所有示例似乎都使用以下内容来模拟长期操作：

```
await Task.Delay(3000); 
```

现在我的长期计算非常类似于：

```
System.Threading.Thread.Sleep(3000) 
```

例如：

```
for(i=0;i<1000000000;i++)
    i=i*2; 
```

如何使用 async 和 await 进行这项工作？现在看来，我可以通过这种很棒的新方法“仅”使用 webrequests、WCF 等方法。

我在哪里错过了重点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T08:42:45.777

```
await Task.Run(() => Thread.Sleep(10000)) 
```

会工作，但它相当没有意义

# windows-8 - Windows 8 - 启用远程访问选项消失了

> ID：12880301
> 
> 赞同：14
> 
> 时间：2012-10-14T07:50:33.813
> 
> 标签：windows-8

我在笔记本电脑上安装了 win 8 rtm，今天决定要 RDP 到它。我去了“系统属性”对话框的远程表，没有启用它的选项。微软显然想强迫我使用一个无用的“远程协助”字段组。

我想要的是允许任何人 RDP 进入的神奇复选框。我见过（[http://blogs.technet.com/b/digital_musketeer/archive/2011/09/14/how-to-enable-remote-desktop- on-the-windows-8-ctp.aspx](http://blogs.technet.com/b/digital_musketeer/archive/2011/09/14/how-to-enable-remote-desktop-on-the-windows-8-ctp.aspx)）其他人可以选择，但我没有。我的看起来像链接中的屏幕截图，除了远程访问字段组不存在。我是管理员。有人知道打开这个的reg键吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T14:41:26.453

根据[http://en.wikipedia.org/wiki/Windows_8_editions#Comparison_chart](http://en.wikipedia.org/wiki/Windows_8_editions#Comparison_chart)，只有 Windows 8 的 Pro 和 Enterprise 版本可以托管 RDP。因此，如果您没有这些版本中的任何一个，您将无法使用 RDP 连接到您的笔记本电脑。也在官方 Windows 团队博客[http://blogs.windows.com/windows/b/bloggingwindows/archive/2012/04/16/announcing-the-windows-8-editions.aspx](http://blogs.windows.com/windows/b/bloggingwindows/archive/2012/04/16/announcing-the-windows-8-editions.aspx)上得到证实。

我正在运行 Windows 8 Enterprise RTM，我可以得到与您链接的博客文章中相同的对话框。选择略有不同，但选项存在，请参阅[http://www.guidingtech.com/13469/how-to-enable-remote-desktop-in-windows-8/](http://www.guidingtech.com/13469/how-to-enable-remote-desktop-in-windows-8/)以获取 Win8 RTM 中对话框的屏幕截图。

# c# - c#中java BufferedReader的等价物是什么？

> ID：12880302
> 
> 赞同：0
> 
> 时间：2012-10-14T07:50:51.687
> 
> 标签：c#, windows-phone-7, bufferedreader, bufferedwriter

> **可能重复：**
> [.NET 等效于 Java 的 BufferedReader](https://stackoverflow.com/questions/12009695/net-equivalent-of-javas-bufferedreader)

这是我的 Java 代码。我想将其转换为 c#。你能帮我么？

```
BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(connect.getOutputStream()));
writer.write("username=0920307&password=85181395&submit=Login");
writer.close();
BufferedReader reader = new BufferedReader(new InputStreamReader(connect.getInputStream())); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:02:16.930

与 Java 的 Buffered Writer 等效的 C# 是 StreamWriter。

祝你的项目好运。

# python - 无法以相反的顺序打印给定级别的 BST 元素

> ID：12880305
> 
> 赞同：0
> 
> 时间：2012-10-14T07:51:17.833
> 
> 标签：python, algorithm, binary-search-tree

我正在尝试编写一个代码，给定一个二叉搜索树根和一个级别，在该级别打印出树的元素。这工作正常：

```
def myprint(root,level):
    if root:
        if not level:
            print root.data,
        else:
            myprint(root.left,level-1)
            myprint(root.right,level-1) 
```

但是，当我尝试调整它以以相反的顺序打印元素时，它不起作用。对于以下树：

```
 26
                    /          \
                   13          39
                  /  \        /  \
                 6    19     32   51
                / \   / \    / \  / \
               4   8  14    31 33   68
                        \
                         17 
```

如果我想从右到左输出第 3 级（根级别为 0）的元素，则输出应为`68 33 31 14 8 4`. 上面的代码正确地执行相反的操作，即打印出`4 8 14 31 33 68`. 但是下面的代码没有正确打印相反的顺序，`31 33 68 4 8 14`而是打印出来：

```
def revprint(root,level):
    if root:
        if not level:
            print root.data,
        else:
            myprint(root.right,level-1)
            myprint(root.left,level-1) 
```

任何人都可以发现错误，并告诉我如何纠正它？初始化树的代码如下：

```
class tree:
    def __init__(self,data):
        self.data = data
        self.successor,self.left,self.right = None,None,None
    def push(self,data):
        root = self
        while root:
            oldroot = root
            if root.data > data:
                root = root.left
            elif root.data < data:
                root = root.right
        if data > oldroot.data:
            oldroot.right = tree(data)
        else:
            oldroot.left = tree(data)

a = tree(26)
for x in [13,39,6,19,4,8,5,10,9,14,17,15,32,51,68,31,33,36,34]:
a.push(x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:48:39.747

```
Here my code prints the tree level by level as well as upside down

int counter=0;// to count the toatl no. of elments in the tree

void tree::print_treeupsidedown_levelbylevel(int *array)
{
int j=2;  
int next=j;
int temp=0;
while(j<2*counter)
{
    if(array[j]==0)
    break;

    while(array[j]!=-1)
    {
        j++;
    }

    for(int i=next,k=j-1 ;i<k; i++,k--)
    {
        temp=array[i];
        array[i]=array[k];
        array[k]=temp;
    }

    next=j+1;
    j++;
}

for(int i=2*counter-1;i>=0;i--)
{
    if(array[i]>0)
    printf("%d ",array[i]);

    if(array[i]==-1)
    printf("\n");
}
} 

void tree::BFS()
{
queue<node *>p;

node *leaf=root;

int array[2*counter];
for(int i=0;i<2*counter;i++)
array[i]=0;

int count=0;

node *newline=new node; //this node helps to print a tree level by level
newline->val=0;
newline->left=NULL;
newline->right=NULL;
newline->parent=NULL;

p.push(leaf);
p.push(newline);

while(!p.empty())
{
    leaf=p.front();
    if(leaf==newline)
    {
        printf("\n");
        p.pop();
        if(!p.empty())
        p.push(newline);
        array[count++]=-1;
    }
    else
    {
        cout<<leaf->val<<" ";
        array[count++]=leaf->val;

        if(leaf->left!=NULL)
        {
            p.push(leaf->left);
        }
        if(leaf->right!=NULL)
        {
            p.push(leaf->right);
        }
        p.pop();
    }
}
delete newline;

print_treeupsidedown_levelbylevel(array);
}

 Here in my code the function BFS prints the tree level by level, which 
 also fills the data in an int array for printing the tree upside down.
(note there is a bit of swapping is used while printing the tree upside down 
 which helps to achieve our goal). 
 if the swaping is not performed then for a tree like

                     8
                   /  \
                  1    12
                  \     /
                   5   9
                 /   \
                4     7
                     /
                    6
  o/p will be
  6
  7 4
  9 5
  12 1
  8

  but the o/p has to be
  6
  4 7
  5 9
  1 12
  8

  this the reason why swapping part wass needed in that array. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:57:18.030

你在`myprint`打电话`revprint`。的固定版本`revprint`：

```
def revprint(root,level):
    if root:
        if not level:
            print root.data,
        else:
            revprint(root.right,level-1)
            revprint(root.left,level-1) 
```

# javascript - 浮动堆叠css

> ID：12880308
> 
> 赞同：2
> 
> 时间：2012-10-14T07:51:37.500
> 
> 标签：javascript, html, css

我正在使用一个为表单生成一些 html 的 joomla 插件。我遇到的问题是css。

该脚本生成几个不同高度的 div，所有这些都堆叠成两列布局。问题是，由于它们都是向左浮动的，有时第二列高 div 会阻止下一个 div 浮动在相邻的短第一列 div 下方。无需进一步挥手，这是一个[jsfiddle](http://jsfiddle.net/U5FV9/1/)

我可以使用什么合理的浏览器兼容的 css 来正确堆叠浮动？请注意，第二列 div 基本上没有类或 id 来将它们与第一列 div 区分开来。

以下是我最好避免的事情：

1.  不兼容的解决方案，如 nth-child()
2.  更改脚本以使用 html 生成 css 挂钩

Javascript有点好

编辑：似乎javascript评论不够突出。正如 jsfiddle 所代表的那样，一切正常。这就是我**希望**布局的样子。不幸的是，我不能`correctfloat`在 div 上使用类名，因为我不是生成它的人。删除正确的浮点类名以查看问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:23:36.120

[http://masonry.desandro.com/](http://masonry.desandro.com/)

这是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:07:56.243

您在 css 文件中使用此样式代码

```
#yourdiv{
 float:left;
 height:yoursizepx;
 width:yoursizepx;
 overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T08:11:56.767

`clear: left`在课堂上使用`short`解决了您给出的示例中的问题：

```
.short{
    height:100px;
    clear:left;
} 
```

请参阅：http: [//jsfiddle.net/U5FV9/2/](http://jsfiddle.net/U5FV9/2/)和 [http://jsfiddle.net/U5FV9/3/](http://jsfiddle.net/U5FV9/3/)

但是，根据您提供的有关动态创建的表单的信息，我不禁觉得它可能无法始终解决问题。例如，如果一个`short`元素需要在右边怎么办？

我认为对您来说更好的解决方案是拥有两个浮动的列容器并包含您的`short`和`tall`元素。这样，您始终可以确保它们正确显示。

这是一个如何实现它的示例：http: [//jsfiddle.net/U5FV9/5/](http://jsfiddle.net/U5FV9/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T13:01:32.760

根据 Mladen 的要求，我发布了最适合我的方法。我使用了一个名为[selectivizr](http://selectivizr.com/)的不显眼的 javascript 库，它启用了对最新 css 的跨浏览器支持，get this, **all browsers**。

然后我开始使用：

```
someclassname:nth-child(2n){
    float:right;
} 
```

将每隔一列的 div 向右对齐，而实际上不需要第二个列容器。它仍然不是一个完美的解决方案，因为理论上 div 仍然可以在一侧堆积，但我到目前为止还没有看到它发生。

谢谢你们的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T07:59:00.887

如果我理解正确，您是否尝试过在块上修改或添加溢出属性？

```
overflow:hidden; 
```

# cakephp - 如何使用 counterCache() 来跟踪 CakePHP 的视图计数？

> ID：12880309
> 
> 赞同：0
> 
> 时间：2012-10-14T07:51:43.193
> 
> 标签：cakephp, cakephp-2.0, counter-cache

每次用户查看提交时，我都会跟踪计数并将其绑定到会话：

提交控制器：

```
// Count view
if ($this->Session->check('viewed_submission_' . $submissionId) !== true) {
    $clientIp = ip2long($this->request->clientIp());
    $this->SubmissionsViews->countView($submissionId, $clientIp);
    $this->Session->write('viewed_submission_' . $submissionId, true);
} 
```

我在 SubmissionsViews 表中跟踪它们。

提交视图模型：

```
class SubmissionsViews extends AppModel {

    var $name = 'SubmissionsViews';

    var $belongsTo = array(
        'Submission' => array(
            'className' => 'Submission'
        )   
    );

    public function countView($submissionId, $clientIp) {
        $this->set('submission_id', $submissionId);
        $this->set('user_ip', $clientIp);
        $this->save($this->data);
    }   
} 
```

我的 SubmissionsView 表`submissions_views`具有以下字段：

*   ID
*   提交ID
*   用户IP
*   创建

我正在尝试设置 counterCache 以跟踪该表的添加，但不知道如何设置它。我目前`$belongsTo`在我的提交模型中添加 counterCache：

```
class Submission extends AppModel {
    var $belongsTo = array(
        'User' => array(
            'className' => 'User'
        ),
        'SubmissionsViews' => array(
            'counterCache' => true
        )   
    ); 
```

但它告诉我它找不到`Submission.submissions_views_id`。在文档中，它只是说我需要在我的`submissions`表中添加一个名为的字段`submissions_views_count`，所以我很困惑如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:30:50.620

1.  模型名称应该是单数的，所以`SubmissionViews`应该是`SubmissionView`.
2.  您的关联不正确。`Submission`hasMany `SubmissionView`，而不是 belongsTo。
3.  counterCache 需要在`SubmissionView`belongsTo 配置中的模型中指定`Submission`，而不是在`Submission`模型文件中。请更仔细地阅读手册。

# javascript - 使用下拉菜单更改 Kickstrap 主题？

> ID：12880314
> 
> 赞同：0
> 
> 时间：2012-10-14T07:52:20.403
> 
> 标签：javascript, html, twitter-bootstrap, less, kickstrap

我正在使用[Kickstrap](http://ajkochanowicz.github.com/Kickstrap/)为我的引导应用程序设置主题，我的客户希望用户能够即时更改主题。我知道要更改主题，您所要做的就是更改themes.less 文件中的目录，但我不知道最好的方法。另外，我想记住用户的主题偏好，所以我需要存储一个 cookie 来执行此操作，但我不完全确定是否可以将 cookie 作为变量直接读入 LESS。

基本上，我只想要一个允许用户从列表中选择主题的下拉菜单。

任何建议都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:52:03.317

假设您只是使用纯 HTML/CSS/JavaScript 而不是服务器端框架，有几种方法可以做到这一点。一个涉及实际[修改 LESS 源代码](https://stackoverflow.com/questions/10274260/programmatically-editing-less-css-code-with-jquery-like-selector-syntax)，但让我提供一些更简单的方法：

我会尝试将 theme.less 保留为空白，因此它只会显示默认的 Bootstrap 主题。

然后你可以像这样在单独的行上加载你的 Kickstrap 主题：

```
<link rel="stylesheet/less" type="text/css" href="kickstrap.less" />
<link rel="stylesheet/less" type="text/css" href="mytheme.less" />
<script src="less.js"></script> 
```

**两个主题文件**

当然，您的主题可能有两个文件，例如`variable.less`并且`bootswatch.less`可能无法将它们分开：

```
<link rel="stylesheet/less" type="text/css" href="kickstrap.less" />
<link rel="stylesheet/less" type="text/css" href="variables.less" />
<link rel="stylesheet/less" type="text/css" href="bootswatch.less" />
<script src="less.js"></script> 
```

因此，您可以只`@import`将`variables.less`文件放入`bootswatch.less`.

```
@import "variables.less"; 
```

然后使用上面的原始示例。

```
<link rel="stylesheet/less" type="text/css" href="kickstrap.less" />
<link rel="stylesheet/less" type="text/css" href="bootswatch.less" />
<script src="less.js"></script> 
```

顺便说一句，如果您不使用 LESS 客户端，请不要担心。只需为每个使用编译的 CSS 文件。

```
<link rel="stylesheet/less" type="text/css" href="css/kickstrap.css" />
<link rel="stylesheet/less" type="text/css" href="css/bootswatch.css" /> 
```

**写入 DOM**

至于在 DOM 中更改它，我会尝试利用`cssIfy()`. `kickstrap.js`这将接受一个字符串（.css 文件名）并将其作为样式表写入 DOM。如果您需要将其编写为 .less 文件，您可能可以轻松地操作此函数。也许是这样的：

```
function lessIfy(filePath) {
  var linkElement = document.createElement("link");
  linkElement.setAttribute("rel", "stylesheet/less");
  linkElement.setAttribute("type", "text/css");
  linkElement.setAttribute("href", filePath);
  document.getElementsByTagName('body')[0].appendChild(linkElement);
} 
```

如果您这样做，您需要确保`less.js`之后加载，因此请尝试在此之前附加它或（更糟）在此之后再次加载 less.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T05:59:15.277

看看“包含的主题”选项如何在您选择主题时更改主题。

# eclipse - XText：在自定义 STRING 终端中截断的第一个和最后一个字符

> ID：12880317
> 
> 赞同：0
> 
> 时间：2012-10-14T07:52:54.690
> 
> 标签：eclipse, xtext, emf

我以这种方式重新定义了 STRING 终端

```
terminal STRING : ('.'|'+'|'('|')'|'a'..'z'|'A'..'Z'|'_'|'0'..'9')*; 
```

因为我必须识别 STRING 不是由 " 或 ' 分隔

问题是，虽然生成的解析器可以工作，但它会截断已识别字符串的第一个和最后一个字符。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:05:19.223

如果您自定义 STRING 规则，您还必须调整相应的值转换器。

像这样的东西必须绑定在你的运行时模块中：

```
public class MyStringValueConverter extends STRINGValueConverter {

    @Override
    protected String toEscapedString(String value) {
        return value;
    }

    public String toValue(String string, INode node) {
        if (string == null)
            return null;
        return string;
    }
} 
```

有关详细信息，请参阅文档。

# python - 如何生成一些具有特定形状的数据？

> ID：12880320
> 
> 赞同：0
> 
> 时间：2012-10-14T07:53:04.703
> 
> 标签：python, math

我有几张图表，我想为其合成原始 (x,y) 数据。我没有原始数据，只有图表。

理想情况下，我希望能够使用数学函数来近似曲线的形状，这样我就可以改变函数以产生稍微不同的输出，这样我就可以有简单的再现性。

第一张图片显示了一组曲线：最近一段时间的平均温度异常，可以追溯到现在之前的 20,000 年。第二张图片显示了一个阶跃函数，在现在之前 10,000 年发生了变化（对数刻度）。（您还会注意到它们具有相反的 x 轴方向）。

对于其中的每一个，我想要生成的最终数据是一个文本文件，每 10 年或 100 年有一个温度异常值。

欢迎任何解决方案。

![在此处输入图像描述](../Images/1443561febe8bd89d75679cc4236ea6c.png) ![在此处输入图像描述](../Images/9ade09b9d8cc21761be30da569a52d32.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:28:35.363

我不确定我是否完全理解你的问题。但是您可以尝试做的是将数据数字化（windig 适用于 windows，engage 适用于 linux），然后在点之间进行一些数据插值。

几乎一直有效的平凡插值只是两个连续点之间的直线。更复杂的方法是保持二阶导数连续 的三次样条（例如 B 样条[http://en.wikipedia.org/wiki/B-spline ）。](http://en.wikipedia.org/wiki/B-spline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:23:28.790

我决定回答一些关于使用代数生成曲线的方法的细节。

对于周期性曲线，您可以使用正弦或余弦，并调整幅度和频率以匹配您的特定情况。例如，y = A sin(2x)，其中幅度为 A，周期与 x 的内部函数（括号内的那个位）有关。在 gnuplot 中试试这个：

```
A=2
f(x) = A*sin(2*x)
set xrange[-pi:pi]
plot f(x), sin(x), cos(x) 
```

要随着 x 的变化而改变幅度，只需将 x 值的幂项或指数项添加到幅度：

```
f(x) = A*exp(0.5*x)*sin(2*x)
set xrange[-2*pi:2*pi]
plot f(x), sin(x)
# add an initial value (offset)
f(x) = 5+A*exp(0.5*x)*sin(2*x)
plot f(x), sin(x) 
```

等等。

# java - Spring Roo：如何获取模型的属性传递给视图

> ID：12880322
> 
> 赞同：0
> 
> 时间：2012-10-14T07:53:21.493
> 
> 标签：java, spring, spring-mvc, spring-roo

我使用 Spring Roo 创建了一个项目。我有一个用户实体 (MODEL)，我将它传递给一个 .jspx 文件 (VIEW)。我想显示我的用户类具有的用户信息，例如姓名、地址和其他属性。

这是控制器中将模型传递给视图的代码：

```
@RequestMapping(value = "/{id}", produces = "text/html")
public String UserRoleController.show(@PathVariable("id") Long id, Model uiModel) {
    uiModel.addAttribute("userrole", UserRole.findUserRole(id));
    return "userroles/account";
} 
```

我知道在 jspx 文件中我可以使用 ${"userrole"} 获取传递的信息，但是如何获取对象的实际属性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:19:50.620

非常简单，在您的 JSP 中只需执行以下操作：

```
${userrole.yourAttribute} 
```

当您在`${}`.

# php - 在尝试读取数据时调用非对象上的成员函数 query()

> ID：12880323
> 
> 赞同：0
> 
> 时间：2012-10-14T07:53:22.243
> 
> 标签：php

嗨，我一直在从这本书中学习 php [PHP Solutions Dynamic Web Design Made Easy](https://rads.stackoverflow.com/amzn/click/com/1430232498)并进入了我必须使用 mysqli api 来处理数据库的部分。在编写连接函数并运行脚本后，我收到此错误：

![在此处输入图像描述](../Images/82a372a4479e0f77b45514da1b11495a.png)

这是我的代码：

```
function dbConnect($usertype , $connectionType = 'mysqli'){
    $host = 'localhost';
    $db = 'phpsols';
    if($usertype == 'read'){
        $user = 'psread';
        $pwd = 'Aleczandru1989';
    }elseif($usertype == 'write'){
        $user = 'aleczandru';
        $pwd = 'Aleczandru1989';
    }else{
        exit('Unrecognized type');
    }

    if($connectionType == 'mysqli'){
        return new mysqli($host , $user , $pwd , $db) or die ('Cannot open database');
    }else{
        try{
            return new PDO("mysql:host=$host;dbname=$db", $user, $pwd); 
        }  catch (PDOException $e){
            echo 'Cannot connect to database';
            exit;
        }
    }
}

$conn = dbConnect('read');
$sql = 'SELECT * FROM images';
$result = $conn->query($sql) or die(mysqli_error()); //Line 5
$numRows = $result->num_rows; 
```

在这种情况下，第 5 行是指 $result = $conn->query($sql) 或 die(mysqli_error());。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:00:09.730

您尝试使用 dbConnect('read'); 创建的 $conn 对象 失败。如果你想做一个 var_dump($conn); 它可能表明它不是你所认为的那样。错误实际上是在描述什么是错误的。您尝试使用 $conn 上的 '->query(..' 访问查询函数。但 $conn 必须是实际具有查询功能的对象引用。将创建此对象的点是：

```
return new mysqli($host , $user , $pwd , $db) 
```

和

```
return new PDO("mysql:host=$host;dbname=$db", $user, $pwd); 
```

既然你显示了一个不同的错误，那么

```
or die ('Cannot open database'); 
```

我的猜测实际上是错误的

```
return new PDO("mysql:host=$host;dbname=$db", $user, $pwd); 
```

你会发现异常。但是由于致命错误， echo 语句不再可见。您将不得不在那里进行一些调试！

我没有使用 PDO 的经验，但对象的构造似乎没问题。（但这可以帮助您： http: [//nl1.php.net/manual/en/class.pdo.php#84751](http://nl1.php.net/manual/en/class.pdo.php#84751)）如果构造正常，则检查您的数据库引擎是否实际运行:)？

# python - Python Pickle 追加返回“无”而不是用户的输入

> ID：12880324
> 
> 赞同：0
> 
> 时间：2012-10-14T07:53:53.037
> 
> 标签：python, append, pickle

```
post=input(str("Enter your post below: \n"))
addpost=pickle.dump(post, open("The Wall.txt","ab"))
print(addpost) 
```

不知道为什么此代码返回“无”而不是输入的内容...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:00:14.847

因为`pickle.dump`将对象写入文件，并返回`None`.

你可能想要

```
addpost = pickle.load(open("The Wall.txt", "rb")) 
```

反而。

# php - 来自 PHP 的 SQL Server 2012 连接错误

> ID：12880333
> 
> 赞同：2
> 
> 时间：2012-10-14T07:55:07.310
> 
> 标签：php, sql-server

我正在使用此代码登录到 sql server express 2012

```
 <?php 
      $serverName = "SD-20120627VVKE\SQLEXPRESS";

    $connectionOptions = array("Database"=>"android_api");

    $conn = sqlsrv_connect( $serverName, $connectionOptions);

    if( $conn === false )

          { die( FormatErrors( sqlsrv_errors() ) ); }
    ?> 
```

但我得到了这个屏幕

![在此处输入图像描述](../Images/2e384502b3ba7c4fb74a1561c265c493.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:18:20.033

试试这个：

```
<?php
$server = "SD-20120627VVKE\\SQLEXPRESS";
$options = array(  "UID" => "<username>",  "PWD" => "<password>",  "Database" => "android_api");
$conn = sqlsrv_connect($server, $options);
if ($conn === false) die("<pre>".print_r(sqlsrv_errors(), true));
echo "Successfully connected!";
sqlsrv_close($conn);
?> 
```

# c# - 从 DataGrid 的 DataGridTemplateColumn 获取复选框值

> ID：12880335
> 
> 赞同：4
> 
> 时间：2012-10-14T07:55:27.990
> 
> 标签：c#, wpf

我有这个 XAML

```
<DataGrid Name="grdData" ... >
   <DataGrid.Columns>
      <DataGridTemplateColumn Header="Something">
         <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
               <CheckBox Name="chb" />
            </DataTemplate>
         </DataGridTemplateColumn.CellTemplate>
       </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我尝试使用此代码获取 Checked State

```
for( int i = 0 ; i < grdData.Items.Count ; i++ )
{
    DataGridRow row = ( DataGridRow )grdData.ItemContainerGenerator.ContainerFromIndex( i );
    var cellContent = grdData.Columns[ 1 ].GetCellContent( row ) as CheckBox;
    if( cellContent != null && cellContent.IsChecked == true )
    {
       //some code
    }
} 
```

我的代码错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T08:03:44.390

由于您正在遍历`Items`您的`ItemsSource`. 为什么不在`bool property`您的班级中拥有它并从那里获得它。

假设 ItemSource 是，然后在类中`List<Person>`创建一个 bool 属性，并像这样将其与您的复选框绑定 -`IsManager``Person`

```
<CheckBox IsChecked="{Binding IsManager}"/> 
```

现在您可以遍历 Items 以获得这样的值 -

```
foreach(Person p in grdData.ItemsSource)
{
   bool isChecked = p.IsManager; // Tells whether checkBox is checked or not
} 
```

**编辑**

如果您无法创建属性，我建议使用这些`VisualTreeHelper`方法来查找控件。使用这个方法来找到孩子（也许你可以把它放在一些实用程序类中并使用它，因为它是通用的） -

```
public static T FindChild<T>(DependencyObject parent, string childName)
           where T : DependencyObject
{
   // Confirm parent is valid.  
   if (parent == null) return null;

   T foundChild = null;

   int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
   for (int i = 0; i < childrenCount; i++)
   {
      var child = VisualTreeHelper.GetChild(parent, i);
      // If the child is not of the request child type child 
      T childType = child as T;
      if (childType == null)
      {
          // recursively drill down the tree 
          foundChild = FindChild<T>(child, childName);

          // If the child is found, break so we do not overwrite the found child.  
          if (foundChild != null) break;
      }
      else if (!string.IsNullOrEmpty(childName))
      {
          var frameworkElement = child as FrameworkElement;
          // If the child's name is set for search 
          if (frameworkElement != null && frameworkElement.Name == childName)
          {
             // if the child's name is of the request name 
             foundChild = (T)child;
             break;
          }
      }
      else
      {
          // child element found. 
          foundChild = (T)child;
          break;
       }
   }
   return foundChild;
} 
```

现在使用上述方法获取复选框的状态 -

```
for (int i = 0; i < grd.Items.Count; i++)
{
   DataGridRow row = (DataGridRow)grd.ItemContainerGenerator.ContainerFromIndex(i);
   CheckBox checkBox = FindChild<CheckBox>(row, "chb");
   if( checkBox != null && checkBox.IsChecked == true )
   {
       //some code
   }
} 
```

# c# - 从数据表模式中获取列描述

> ID：12880337
> 
> 赞同：5
> 
> 时间：2012-10-14T07:56:11.713
> 
> 标签：c#, schema, database-connection

我想知道列的详细信息。我是从微软的网站上了解到的。但我仍然不知道如何获取列的描述。下面我从 Microsoft 支持站点获得了代码块。

```
OleDbConnection cn = new OleDbConnection();
OleDbCommand cmd = new OleDbCommand();
DataTable schemaTable; 
OleDbDataReader myReader; 

cn.ConnectionString = "Provider=SQLOLEDB;Data Source=server;User ID=login;
                       Password=password;Initial Catalog=Northwind";
cn.Open();
cmd.Connection = cn;
cmd.CommandText = "SELECT * FROM Employees";
myReader = cmd.ExecuteReader(CommandBehavior.KeyInfo); 
schemaTable = myReader.GetSchemaTable();
foreach (DataRow myField in schemaTable.Rows){
    foreach (DataColumn myProperty in schemaTable.Columns) {
    Console.WriteLine(myProperty.ColumnName + " = " + myField[myProperty].ToString());
    }
    Console.WriteLine();
    Console.ReadLine();
}
myReader.Close();
cn.Close(); 
```

拜托，你能帮我吗，在这个代码块中，我如何获得列的描述？

# php - PHP字符串在引号之间拆分

> ID：12880339
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:56:31.703
> 
> 标签：php, split

> **可能重复：**
> [获取引号中的文本](https://stackoverflow.com/questions/8635657/get-text-in-quotes)

我有一个字符串 ["xx.xx.xx.xx"] 我希望它只返回引号内的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:02:37.260

您可以将正则表达式与捕获组一起使用：

```
if (preg_match('/\["(.*?)"\]/', '["xx.xx.xx.xx"]', $matches)) {
  echo $matches[1];
} 
```

# php - htaccess工作机制

> ID：12880340
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:56:42.397
> 
> 标签：php, .htaccess, function, redirect

**我有以下 htaccess 文件：**

```
重写引擎开启

RewriteRule ^(.*)-(.*)-(.*)$ index.php?page=$1&id=$2&im=$3

```

**在我的 php 页面中：**

href="home-46-126" //联系我们

href="home-38-129" //新闻

**我想知道重定向是如何完成的？进行此重定向的功能是什么？如果用户点击“联系我们”，网站如何知道去向？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:13:22.933

它不是 htaccess 函数，htaccess 只是解析“home-46-126”，并使用这些值重定向到 index.php。

如果您想稍后使用这些值，您必须在 PHP 脚本中键入它。

```
<?php
$_GET["page"]; // including "home"
$_GET["id"]; // including "46"
$_GET["im"]; // including "126"
?> 
```

然后你必须把这些值放到数据库中，或者在某个地方，你会发现这个 ID 和 IM 是与我们联系的页面

# vb6 - 应使用 ieframe.dll 或 shdocvw.dll 中的哪一个作为依赖项？

> ID：12880345
> 
> 赞同：2
> 
> 时间：2012-10-14T07:57:43.560
> 
> 标签：vb6, dependencies, webbrowser-control, shdocvw, ieframe.dll

如果我正在使用一个`WebBrowser`组件，我发现有时编译器会`ieframe.dll`为`shdocvw.dll`.

如果针对 XP 和 Win 7，应该使用哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:39:19.593

由于您永远无法重新分发任何一个 DLL，所以这无关紧要。

在运行时，您编译的程序应该通过编译的类 ID“找到”所需的库。无论目标机器上安装什么版本的 IE，这些都是相同的。

是什么让你不这么认为？

# java - 如何正常为4G分配Heap和Permgen内存？

> ID：12880346
> 
> 赞同：1
> 
> 时间：2012-10-14T07:57:44.897
> 
> 标签：java, heap-memory, permgen

我有 4G 内存（64 位）。目前，我在 Eclipse IDE(JUNO) 中使用默认内存设置。当我在上面部署应用程序时`JBoss 7.1`出现`Out Of Memory`错误。我想知道`memory ratio`和？比方说，如果我将堆内存设置为 1G 内存，那么 permgen 内存将为 512M，仅举个例子。如果是这样，permgen 将是堆内存的 50%。你能为他们提供内存分配的方式吗？`heap memory``permgen memory`

目前eclipse.ini

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms128m
-Xmx1024m 
```

原因 ：

```
 Caused by: java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:00:35.423

这取决于您看到的典型内存使用情况。当您收到内存不足错误时，它应该说明它是用于 perm gen 还是 heap space；相应地调整。

编辑：如果说您的堆空间不足，那么您要增加 Xmx1024m。也许试试 Xmx2g。

我还假设您看到 OutOfMemoryError 是 Eclipse？如果它实际上是针对 JBoss 的，那么 eclipse.ini 将无济于事，因为当您部署到 JBoss 时，它将是一个不同的 VM。在这种情况下，您需要增加 $JBOSS_HOME/bin/appclient.conf 中的 Xmx 值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:15:08.407

> 我想知道堆内存和永久内存的内存比例？

没有固定的比例。堆内存和永久内存大小是独立指定的，使用不同的参数。

我的建议是不要使用 permgen 设置……除非 OOME 消息*告诉*您 permgen 内存已用完。

# c++ - 仅在按下键时调用函数，而不是在释放键时调用

> ID：12880349
> 
> 赞同：0
> 
> 时间：2012-10-14T07:58:33.437
> 
> 标签：c++, c, windows, winapi, keyboard-events

当下面的代码片段运行时，每次点击一个键时，都会调用函数*LowLevelKeyboardProc*。但问题是它在按下一个键时和释放一个键时都被调用。这意味着，每次点击该函数被调用两次。但是我希望该函数在键被调用时只被调用一次按下而不是释放键时。

即使我可以在函数*LowLevelKeyboardProc*中过滤按键的按下和释放，也可以。有什么办法可以做到这一点。

```
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
  // call the function only if the key is pressed,else ( i.e key released) do nothing
}

BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved){
  handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hinstDLL, 0);
  MSG msg;

  while(GetMessage(&msg, NULL, 0, 0)){
    TranslateMessage(&msg);
    DispatchMessage(&msg);
  }
  return msg.wParam;
}

BOOL WINAPI DllMain( HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) { // ENTRY POINT
 if(hookThreadHandle==NULL) { 
    LPTHREAD_START_ROUTINE lpStartAddress = &installHook;
    hookThreadHandle = CreateThread(NULL, 0, lpStartAddress, NULL, 0, &hookThreadId);
 }
 return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:06:21.250

您无法更改调用 LowLevelKeyboardProc 的方式，但在函数内部您可以知道调用的原因：

```
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) 
{
     if ( nCode < 0 )
     {
         return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
     }

     if ( wParam == WM_KEYDOWN )  // possibly you want also WM_SYSKEYDOWN
     {
         // do what you need
     }
} 
```

# json - 将类型 ActiveRecord JSON 输出属性转换为另一种类型

> ID：12880352
> 
> 赞同：0
> 
> 时间：2012-10-14T07:59:01.447
> 
> 标签：json, activerecord, type-conversion

我有以下 ActiveRecord 模型，其中`to_json`方法被覆盖。

```
 class Country < ActiveRecord::Base
  attr_accessible :iso, :name
  def as_json(options={})
    result = super({:only => [:id, :name]}.merge(options))
    result
  end
end 

```

我想将`id`整数类型转换为字符串。我怎样才能做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:22:44.493

这是javascript吗？在javascript中你会做类似的事情

```
var id = 1;
id = id + ''; //Make it a string 
```

请参阅此主题：[http ://forums.devshed.com/javascript-development-115/how-to-convert-int-to-string-415083.html](http://forums.devshed.com/javascript-development-115/how-to-convert-int-to-string-415083.html)

# php - 用 Ajax 调用 PHP 程序

> ID：12880354
> 
> 赞同：-1
> 
> 时间：2012-10-14T07:59:22.913
> 
> 标签：php, javascript, jquery, ajax

我有一个用于计算用户横幅点击次数的 PHP 程序。我的横幅链接是这样的：

```
<a href="<?=$banner_url;?>" onclick="banner_click_count('<?=$banner_id;?>')"><img src=...> 
```

当用户单击图像时，它会以as 参数运行`banner_click_count()`函数。`$banner_id`

```
function banner_click_count($ban_id)
{
$.ajax({
   type: "POST",
   url: 'banner_click.php',
   data: {banner_id: $ban_id}
   });

} 
```

在**banner_click.php**，我得到**banner_id**，`$banner_id = $_GET['banner_id']);`根据它搜索数据库。找到记录，然后在**banner_count**列字段中加1。之后，重定向到**banner_url**。

当我运行程序时，我 `Parse error: parse error, expecting T_VARIABLE' or '$''`上线了`$.ajax({`

附录：在您的帮助下，错误被清除，但是当我点击链接时，它直接重定向到**banner_url**并且不运行 AJAX 功能。

附录：我把警报（“你好”）；在ajax函数的顶部，我明白了。所以它进入功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:12:21.080

1.你需要把你的javascript函数放在`<script>`标签下

2.你需要通过`json string as post data`

3.虽然您将数据作为帖子传递，但您将在 php 中获取此数据`as $_POST not $_GET`

所以改变你的功能如下

```
<script>
function banner_click_count(ban_id)
{
$.ajax({
   type: "POST",
   url: 'banner_click.php',
   data: {banner_id: ban_id}
   });

}
</script>

// in your php use as below
echo $_POST['banner_id'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:19:00.057

确保banner_id 在引号中，并且您在页面中包含JQuery。并且不要忘记成功/错误返回。

```
$.ajax({
   type: "POST",
   url: 'banner_click.php',
   data: {'banner_id': $ban_id},
   success: function(s) { 
     console.log('success' + s);
   },
   error: function(e) {
     console.log('error' + e);
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:53:33.080

`return false`在函数结束之前我们不需要 a吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:32:15.517

我找到了解决方案。谢谢大家。

```
function banner_click_count(ban_id)
{
  $.post(
  "banner_click.php",
  {
  banner_id: ban_id
  });
} 
```

# objective-c - 试图用 ocmock 存根 char 值

> ID：12880359
> 
> 赞同：1
> 
> 时间：2012-10-14T07:59:51.977
> 
> 标签：objective-c, ocmock

我有一个笔记类，内容如下：

```
@interface Note
    -(char)alphabetName;
@end 
```

我试图在测试中解决这个问题：

```
id mockNote = [OCMockObject mockForClass:[Note class]];
[[[mockNote stub] andReturnValue:OCMOCK_VALUE((char){'A'})] alphabetName]; 
```

由于存根调用出现错误，我的测试套件将无法运行：“获取'char'类型的临时对象的地址”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:11:34.023

我无法重现此错误。如果你摆脱临时的会发生什么？

```
id mockNote = [OCMockObject mockForClass:[Note class]];
char a = 'A';
[[[mockNote stub] andReturnValue:OCMOCK_VALUE(&a)] alphabetName]; 
```

# android - 在 Android 中收到消息时如何调用媒体播放器？

> ID：12880362
> 
> 赞同：1
> 
> 时间：2012-10-14T08:00:31.383
> 
> 标签：android

我想在收到消息时播放声音。我有一个 BroadcastReceiver，我在其中调用另一个名为 play 的函数来播放声音或音乐。我的代码如下所示：

### 在我的主要活动中

我的游戏活动：

```
public class PlayActivity extends Activity
{
    private MediaPlayer mediaPlayer;

    public void play() {
        mediaPlayer = MediaPlayer.create(this, R.raw.gotye);
        mediaPlayer.setLooping(true);
        mediaPlayer.start();
    } 
```

我的广播接收器看起来像：

```
package org.secure.sms;

import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver
{
    public static final String SMS_EXTRA_NAME = "pdus";
    public static final String SMS_URI = "content://sms";

    private MediaPlayer mediaPlayer;
    private MainActivity Play;

    public void onReceive( Context context, Intent intent )
    {
        // Get SMS map from Intent
        Bundle extras = intent.getExtras();

        String messages = "";

        if ( extras != null )
        {
            // Get received SMS array
            Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

            // Get ContentResolver object for pushing encrypted SMS to incoming folder
            ContentResolver contentResolver = context.getContentResolver();

            for ( int i = 0; i < smsExtra.length; ++i )
            {
                SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

                String body = sms.getMessageBody().toString();
                String address = sms.getOriginatingAddress();

                messages += "SMS from " + address + " :\n";
                messages += body + "\n";

                putSmsToDatabase( contentResolver, sms );
            }

            // Display SMS message
            Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
            Play.play();
        }
    } 
```

我收到一条错误消息，说应用程序不幸失败了。我可以看到 toast 消息，但应用程序没有播放音乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:11:01.747

除非您在其他地方初始化 PlayActivity，否则您的 Play 为空。也许您可以直接在广播接收器中创建和播放音乐？

我认为您在使用原始类型时可能必须使用不同的输入方法。使用文件路径和 URI 会更容易，但这里有一些关于原始文件的示例代码。

```
AssetFileDescriptor afd = resources.openRawResourceFd(R.raw.yourthinghere);
mp.setDataSource(afd.getDescriptor(), afd.getStartOffset(), afd.getLength()); 
mp.prepare();
mp.start();
afd.close(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:07:24.470

这可能是因为您正在使用`Play.play()`而类名是 PlayActivity。此外，如果您使用的是 <classname>.<methodname>();，您的播放方法必须是静态的。

# windows - JVM 内存管理在 Windows 和 Linux 上的工作方式相同吗？

> ID：12880368
> 
> 赞同：0
> 
> 时间：2012-10-14T08:01:33.520
> 
> 标签：windows, linux, memory, jvm, visualvm

我最初的问题是，通过**VisualVM**检查我的 Java 程序在 Windows 7 上所需的**堆大小**在技术上是否合理，并得出这样的结论，即该程序在 Linux（RedHat）上也需要相同数量的堆?

 **我不知道系统（操作系统甚至 CPU 和 RAM）如何影响 JVM 的内存管理。好吧，windows 是我的开发系统，有 4GB 内存和 Core 2 Due CPU，但是 Linux 是生产系统，有 32GB 内存和多个强大的处理器，

实际上，我担心的是 Linux 上的程序可能需要更多内存。少一点就可以了。**

# version - Java 版本的差异

> ID：12880371
> 
> 赞同：4
> 
> 时间：2012-10-14T08:02:11.837
> 
> 标签：version, java

这两个java版本之间有什么区别吗？如果有任何差异，我如何拥有该版本`java version "1.4.2"`，因为那是我在服务器中拥有的。

1)

```
java version "1.4.2_06"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_06-b03)
Java HotSpot(TM) Client VM (build 1.4.2_06-b03, mixed mode) 
```

2)

```
 java version "1.4.2"
    Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)
    Classic VM (build 1.4.2, J2RE 1.4.2 IBM AIX 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T08:08:45.900

从实施的角度来看，它们*非常不同，因为第一个来自 Sun，第二个来自 IBM。*由于它们来自不同的供应商，补丁级别没有任何意义（`_06`在 Sun JDK 上）。

从行为的角度来看，它们应该是相同的。话虽如此，我记得过去 IBM jdk 的一些问题，在这些问题中它的性能非常差。

如果你想使用 IBM 的 java 版本，你可以从[这里](http://www.ibm.com/developerworks/java/jdk/)获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:25:50.633

我建议您仔细比较各个版本的各个发行说明的“已修复错误”部分。

请注意，1.4.2_06 版本的发布日期是 2004-12-10（根据发布说明），而 IBM 版本名称是“20090307”，这意味着它是在大约 5 年后构建的。虽然不能保证 IBM 版本已经跟踪到该日期的所有修复，但可以公平地假设他们将（至少）跟踪与安全相关的补丁。

* * *

> 我发布这个的原因是因为当我尝试从命令行对服务器进行一些部署时，我遇到的问题很少，所以想知道这可能是 java 版本的差异。

可能，但是（IMO）问题更可能与 Java 版本无关。无论哪种方式，我认为列举差异不太可能帮助您隔离问题。

我建议您提出一个新问题，在其中描述您的实际问题。我们可能会也可能不会提供帮助......但我认为您成功的机会比您目前的方法更大。

# jquery - 如何使用 jquery ajax 迭代 json

> ID：12880377
> 
> 赞同：0
> 
> 时间：2012-10-14T08:04:02.897
> 
> 标签：jquery, json, scriptmanager

我正在尝试迭代 JSON 对象，但未能迭代它。

CS：

```
[WebMethod]
public static List<TicVersion> GetTicVersionList()
{
    List<TicVersion> versionList = new List<TicVersion>
                                           {
                                               new TicVersion
                                                   {
                                                       Date = DateTime.Now,
                                                       Version = "2"
                                                   },
                                               new TicVersion
                                                   {
                                                       Date = DateTime.Now,
                                                       Version = "4"
                                                   },
                                               new TicVersion
                                                   {
                                                       Date = DateTime.Now,
                                                       Version = "13"
                                                   },
                                               new TicVersion
                                                   {
                                                       Date = DateTime.Now,
                                                       Version = "28"
                                                   },
                                           };
    return versionList;
}

public class TicVersion
{
    public DateTime Date { get; set; }
    public string Version { get; set; }
} 
```

脚本管理器

```
<asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" EnablePartialRendering="true"
    runat="server" /> 
```

js：

```
$.ajax({
    type: "POST",
    url: "ManagerTic.aspx/GetTicVersionList",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false, // TODO!
    success: function (result) {
        createTicVersionList(result);
    }
});

function createTicVersionList(result) {
    var items = [];
    $.each(result.d, function (key, val) { // here is the problem.... i am not being able to get the values
        items.push('<li id="' + val.Version + '" class="ui-widget-content">' + val.Date + '</li>'); // i need the actual Date and Version 
    });
    $('<ol/>', {
        'id': 'selectable',
        'class': 'ui-selectable',
        html: items.join('')
    }).appendTo('.baseVersion');
} 
```

**编辑**

```
> if i console.log(result) inside the each, i am getting 
> - Object
> - - d
> - - - [0]
> - - - [1]
> - - - [2]
> - - - [3] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:08:47.937

这里`result.d`没有意义，应该`result`只有。

所以在你的情况下替换这个

```
$.each(result.d, function (key, val) {
    // existing 
} 
```

和

```
$.each(result, function (key, val) {
    // existing 
} 
```

这将解决您的问题。

# python - 没有模块名称 pygame.base

> ID：12880380
> 
> 赞同：2
> 
> 时间：2012-10-14T08:05:29.410
> 
> 标签：python, opengl, multiprocessing, pygame, pyinstaller

我编写了我的程序来生成主应用程序的进程。当我运行 pyinstaller 打包的 exe 时，它​​说`no Module name pygame.base`. 但是，如果我将应用程序保留在主线程中，它就不会这样做。

我需要检测关闭的过程，因为 GLUT 没有右上角退出按钮的事件，除非我使用全屏，否则我无法删除它。程序的线程挂起，应用程序永远不会关闭。所以主线程检查进程是否正在运行。如果没有，它会关闭整个应用程序。但是如果我只使用主线程，所有的关闭都会挂起。

我可以很好地退出游戏内活动。但我需要一种方法来捕捉 X 按钮。或修复 pyinstaller。

我查了很多东西让 pyinstaller 包含所有内容。我使用了 OneDir 选项，所以我可以看到这些文件。我将所有依赖项从一个有效的依赖项复制到了一个无效的依赖项，而无需替换 exe。它仍然有导入错误。

任何见解都会很好。现在 X 按钮是一个危险。我猜多处理不能很好地与 pyinstaller 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:59:28.150

`event.type == pygame.QUIT`在 Windows 上时，[x] 按钮为我触发。

# c++ - 与 glog 库链接

> ID：12880383
> 
> 赞同：2
> 
> 时间：2012-10-14T08:06:12.390
> 
> 标签：c++, glog

我正在尝试使用 glog 日志库（[LINK](http://code.google.com/p/google-glog/)）。在 VS2012 中（我使用的是 Windows 8 Professional 64 位（日语）），我使用单个 main.cpp 文件创建了一个空解决方案，就像文档（[LINK](http://google-glog.googlecode.com/svn/trunk/doc/glog.html)）中的文件一样。此外，我在解决方案中导入 glog 项目（dll 之一或静态库之一）并设置项目依赖项。为了避免一些错误，我必须注释掉 port.h 中的第 97 行：

```
/* In windows-land, hash<> is called hash_compare<> (from xhash.h) */
#define hash  hash_compare 
```

在 glog 编译时，主应用程序给了我未解决的外部符号错误（带有 dll 和静态版本）。

```
1>main.obj : error LNK2019: 未解決の外部シンボル "void __cdecl google::InitGoogleLogging(char const *)" (?InitGoogleLogging@google@@YAXPBD@Z) が関数 _main で参照されました。
1>main.obj : error LNK2019: 未解決の外部シンボル "public: __thiscall google::LogMessage::LogMessage(char const *,int)" (??0LogMessage@google@@QAE@PBDH@Z) が関数 _main で参照されました。
1>main.obj : error LNK2019: 未解決の外部シンボル "public: __thiscall google::LogMessage::~LogMessage(void)" (??1LogMessage@google@@QAE@XZ) が関数 _main で参照されました。 
```

我正在编译为 Win32。如果我检查调试文件夹，它实际上包含 dll+lib 或静态 lib 文件。我也尝试在不使用 Visual Studio 依赖系统的情况下手动链接到库，但它是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:18:01.393

我已经从主干为 MSVS2012 构建了 glog（如我所知，这里已经介绍了标题中提到的小补丁），所以它对我有用。看起来您对 glog 库的依赖描述丢失了。

您可以添加特定于 Windows 的内容吗

```
#pragma comment(lib, "path_to_glog_from_project_dir.lib") 
```

到您的项目文件之一，例如，直接进入 main.cpp 并对其进行测试。

# f# - 在 F# 中使用属性

> ID：12880388
> 
> 赞同：0
> 
> 时间：2012-10-14T08:07:22.133
> 
> 标签：f#, module

希望这是连贯的，尽管冗长。

我正在尝试在一个`.fs`文件中创建一个属性，我可以从一个单独的`.fs`文件中设置该属性，然后在第一个`.fs`文件的模块中使用该值......例如，

在我的第一个文件`function.fs`中，我想定义一个属性`theta`。

然后我想定义一个`Q`函数`function.fs`：

`function Q = Q(r)`和... `Q(r)`取决于一些依赖于 的计算`theta`，
即
`A1(theta), A2(theta), A3(theta)`

`Q`以列表的形式返回一个数据集。

我还想在我的主 .fs 文件中维护一组 theta 值`program.fs`（即
`theta = [90;120;150;180])`

然后我想`function.fs`为每个生成一个数据集`theta`。

我的想法是通过设置属性 theta 的值，运行程序以生成数据集，为 设置新值`theta`，运行程序以生成数据集，重复...我已经做了很多研究，我不清楚的是我如何真正回忆代码中属性的值`Q(r)`。

我已经成功地在我的`function.fs`文件中设置了一个属性，我可以从中设置`program.fs`：
在`function.fs`我有：

```
namespace models.test

type ContactAngle() =
    let mutable m_theta = 90.0
    //read only property
    member this.Empty = 
         m_theta = 90.0
     //read-write property
     //i think i'm onto something with this static...
     member this.Angle
         with get() =
             m_theta
         and set newAmt = 
             m_theta <- newAmt

//module HTModel = 
```

在`program.fs`我有：

```
open models.test

let me = new ContactAngle()
printfn "%A" me.Angle
me.Angle <- 120.0
printfn "%A" me.Angle 
```

这使我可以重新定义 value `theta`。我苦苦挣扎的地方是我现在如何在`function.fs`.

我觉得我错过了一些非常基本的东西，需要一些帮助！任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:43:47.410

由于函数在调用时评估而不是在创建时评估（就像在例如 C# 中一样），您可以`ContactAngle`像这样在您的类型中创建一个普通函数：

```
member this.DoSomenthingWithTheta multiplier
    m_theta <- m_theta * multiplier 
```

您可以在班级的任何地方重用您的可变值。为了澄清您应该阅读[F# 语言参考](http://msdn.microsoft.com/en-us/library/dd233244.aspx)的“成员”部分的所有内容。

但是，如果您想在您的类型之外并且在没有启动实例的地方使用该值。那么你将不得不采取不同的方法。例如，创建一个静态可变字段并使用静态属性公开它。或者创建一个单例来在整个应用程序中存储您的值。

但是这种方式扼杀了函数式编程的“精神”:)。

# java - 不断收到 Illegal start of type 错误，我该如何纠正这个并继续前进？

> ID：12880389
> 
> 赞同：0
> 
> 时间：2012-10-14T08:07:42.107
> 
> 标签：java

我的部分代码如下；`illegal start of type`由于不断出现错误（在`if`语句的行上），我无法编译。我能做些什么来改变它？

```
public class Job
{

    boolean jobsCompleted = false;
    Job firstJob = getCurrentJob();
    String jobName = firstJob.getName();
    int jobDuration = firstJob.getDuration();
    if (!myJob.isEmpty()&& jobDuration > 0 && jobDuration <= myTotalDuration) 
    //this is where i am getting the error, highlighting red before the 'if' statement. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:21:01.180

您需要将一些代码放入方法中，因为您只能`if`在方法内部使用。

例如

```
public class AClass {
    void aMethod() {
        if( true == true ) {
            //do something
        }
    }
} 
```

# php - 切换到虚拟主机后的 URL 重写

> ID：12880391
> 
> 赞同：0
> 
> 时间：2012-10-14T08:08:21.747
> 
> 标签：php, apache, mod-rewrite, easyphp

经过一段相当陡峭的学习曲线后，我设法在我的机器上创建了一个虚拟主机（运行 EASY PHP v12 的 Windows 7）来为我正在开发的一个站点提供服务。（在此之前，我会进入并将 DocumentRoot 和 Directory 路径更改为我想要处理的项目的文件夹）。

如果没有虚拟主机，我可以毫无问题地进行 url 重写工作。以下是我在每个项目中设置的 .htaccess

```
RewriteEngine On
Options +FollowSymlinks
RewriteCond %{HTTP_HOST} ^localhost.com
RewriteRule (.*) http://www.localhost.com/$1 [R=301,L]

#RewriteCond %{THE_REQUEST} ^.*/index.php
#RewriteRule ^(.*)index.php$ http://www.localhost.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 

RewriteBase / 
```

例如，当我访问 localhost.com/file 时，它​​会将我带到当前“服务器”工作目录的根文件夹中的 file.php。

由于使用此代码添加虚拟主机

```
#virtualhost
<VirtualHost 127.0.0.1>
DocumentRoot "c:/dropbox/newsite/site"
ServerName newsite
<Directory "c:/dropbox/newsite/site">
    Options FollowSymLinks Indexes
    AllowOverride All
    Order deny,allow
    Allow from 127.0.0.1
    Deny from all
    Require all granted
</Directory>
</VirtualHost>
#virtualhost 
```

我似乎无法让重写工作 - 例如 newsite/home 应该带我到 home.php 但没有。

欢迎大家提出意见。谢谢。

# c - GCC_NO_EXECUTABLES ---交叉编译工具链后不允许链接测试

> ID：12880394
> 
> 赞同：12
> 
> 时间：2012-10-14T08:08:39.223
> 
> 标签：c, gcc, cross-compiling

我正在尝试使用本教程构建交叉编译器： [http ://wiki.osdev.org/OS_Specific_Toolchain](http://wiki.osdev.org/OS_Specific_Toolchain)

在成功构建 binutils、all-gcc、newlib 之后

我在 build-gcc 的最后一部分中遇到错误

```
checking for shl_load... configure: error: Link tests are not allowed after GCC_NO_EXECUTABLES.
Makefile:8970: recipe for target `configure-target-libstdc++-v3' failed
make[1]: *** [configure-target-libstdc++-v3] Error 1
make[1]: Leaving directory `/usr/src/build-gcc'
Makefile:870: recipe for target `all' failed
make: *** [all] Error 2 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T10:29:51.443

我不知道你配置命令选项。但是如果你给了**--enable-language=c**把它改成**--enable-languages=c**。或者您可能正在使用语言 c 和 c++ 编译引导程序。在这种情况下会发生此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T16:55:08.743

我在尝试为 ARM 构建交叉编译器时遇到了这个问题。最终，切换到使用[crosstool-NG](http://crosstool-ng.org/)。这是一个大大简化流程的脚本。它对我来说就像一个魅力。

# android - 如何使用 XML 和 java 代码定义自定义小部件

> ID：12880397
> 
> 赞同：4
> 
> 时间：2012-10-14T08:08:48.657
> 
> 标签：android, custom-controls

我想定义一个自定义小部件，它包含一些其他控件并有自己的逻辑。我想使用 XML 文件来定义 UI，并使用 java 代码来定义逻辑。但我不知道该怎么做。

我关注了这篇文章[Building mix-up custom Android component/widget using Java class and XML layout](http://maohao.wordpress.com/2009/08/27/building-mix-up-custom-component-android/)，但不是一个有效的。以下是我的代码。

XML:

```
<com.example.MyView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="custom button 1"/>

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="custom button 2"/>

</com.example.MyView> 
```

Java代码：

```
public class MyView extends LinearLayout {

    public MyView(Context context) {
        super(context);
    }

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        LayoutInflater.from(getContext()).inflate(R.layout.test_view, this);  // **line 32**
    }
} 
```

在主布局中，我这样调用它：

```
<com.example.MyView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
</com.example.MyView> 
```

不幸的是，它在运行时抛出异常：

```
05-26 14:11:25.199: ERROR/AndroidRuntime(15799): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.MyActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.example.MyView.onFinishInflate(MyView.java:32)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:631)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.example.MyView.onFinishInflate(MyView.java:32)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:631)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.example.MyView.onFinishInflate(MyView.java:32)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:631)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.example.MyView.onFinishInflate(MyView.java:32)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:631)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    .... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:21:44.613

您不能像以前那样声明自定义视图。如果您在主布局中使用自定义视图，`onFinishInflate`则将调用该方法来构造自定义视图，并在该方法中调用上面的布局。问题是您在该布局中已经有一个自定义视图引用（当`LayoutInflater`遇到自定义视图标记时将再次膨胀），因此您将陷入循环膨胀情况。

你可能想要这样的东西：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android>

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="custom button 1"/>

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="custom button 2"/>

</merge> 
```

因此，当您的自定义视图将从布局文件中膨胀时，它将附加上面 xml 布局的内容。该`onFinishInflate`方法将保持不变：

```
@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    LayoutInflater.from(getContext()).inflate(R.layout.test_view, this);  // **line 32**
} 
```

**编辑**：似乎在方法中膨胀内容布局`onFinishInflate`会再次触发该方法（至少在旧版本上）。您可以修改布局以使用`LinearLayout`这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
   android:layout_width="match_parent"
   android:layout_height="match_parent">

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="custom button 1"/>

    <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="custom button 2"/>

</LinearLayout> 
```

然后在`onFinishInflate`方法中：

```
@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    View v = LayoutInflater.from(getContext()).inflate(R.layout.aaaaaaaaaaa, this, false); 
    addView(v);
} 
```

`merge`这将在布局层次结构中引入另一个无用的元素，因此您可以简单地在自定义视图的构造函数中使用标签填充布局：

```
public MyView(Context context) {
    super(context);
    LayoutInflater.from(getContext()).inflate(R.layout.test_view, this);
}

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);
    LayoutInflater.from(getContext()).inflate(R.layout.test_view, this);
}

public MyView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    LayoutInflater.from(getContext()).inflate(R.layout.test_view, this);
} 
```

# c# - 如何将控件附加到面板？

> ID：12880402
> 
> 赞同：0
> 
> 时间：2012-10-14T08:09:27.793
> 
> 标签：c#, asp.net, user-controls, append, panel

我正在用 ASP.NET 开发一个动态网站。作为试验，我尝试了如下所示的代码，它为 Panel1 添加了一些控件。当用户第一次单击一个按钮时，控件被添加到面板中，但是当用户第二次单击同一个按钮时，以前的控件被替换为新的控件。但是我希望每次用户单击按钮时控件一个接一个地附加。代码是这样的：

```
Control c=Page.LoadControl("DData.ascx");
Panel1.Controls.Add(c); 
```

我也试过

```
Control c=Page.LoadControl("DData.ascx");
Panel1.Controls.AddAt(Panel1.Controls.Count,c); 
```

但这取代了第一个输出。请告诉我如何附加这些控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:29:22.097

如您所料，这会附加一个控件：

```
Control c = Page.LoadControl("DData.ascx");
Panel1.Controls.Add(c); 
```

您可以通过这种方式添加任意数量的控件。

[但是，您需要以某种持久/有状态方式（数据库、会话、 ViewState](http://msdn.microsoft.com/en-us/library/bb386448%28v=vs.100%29.aspx)等）跟踪您正在添加的控件。

*每次页面加载时都*需要重建控件树。

查看我对类似问题的回答：

*   [https://stackoverflow.com/a/10050755/453277](https://stackoverflow.com/a/10050755/453277)
*   [https://stackoverflow.com/a/9545079/453277](https://stackoverflow.com/a/9545079/453277)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T08:49:04.627

可能是关于asp.net页面的生命周期。每次页面加载时，它都会返回初始状态。按钮单击事件在页面加载后处理，您在页面上只有一个控件。请查看[Button 以在每次单击时动态添加控件](http://forums.asp.net/t/1624689.aspx)

# java - 更新 INI/属性文件

> ID：12880405
> 
> 赞同：1
> 
> 时间：2012-10-14T08:10:16.327
> 
> 标签：java, ini

我有一个 INI 文件。它可能包含部分和评论。我想在 Java 代码中读取和更新属性，同时保留属性和 ini 注释的顺序。

1.  使用 Java`Properties`类 - 不够好，因为它不处理部分。
2.  使用 Apache `INIConfiguration`- 不保留注释，无法读取带有 # 值的属性。
3.  使用 ini4j - 一些评论没有被保留

有人建议我如何仅更新 INI 文件中的特定条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:04:32.477

IniEditor 保留所有内容，包括评论：[https ://github.com/nikhaldi/inieditor-java](https://github.com/nikhaldi/inieditor-java)

# jquery - 如何相对于另一个列表中的项目显示另一个列表中的项目？

> ID：12880407
> 
> 赞同：0
> 
> 时间：2012-10-14T08:10:32.740
> 
> 标签：jquery, html, css

我正在尝试创建一个项目符号导航栏，以浏览一系列图像。

我还想在突出显示的项目符号下方显示一个缩略图。

我的方法是动态创建两个列表——一个无序列表的项目符号和一个无序列表的缩略图。我通过遍历我拥有的所有图像来做到这一点 - 并`append()`进入两个列表（`append()`一个列表的项目符号，然后`append()`另一个列表的缩略图）

然后我`hover()`为每个项目符号添加一个函数，它将隐藏所有缩略图但显示相应的缩略图。

它可以工作 - 但是缩略图总是出现在同一个固定位置。如何在突出显示的项目符号下方显示它？

请在此处查看我的 jsfiddle：http: [//jsfiddle.net/beeband/u2zKE/](http://jsfiddle.net/beeband/u2zKE/)

注意。有一个错误 - 最后两个拇指从未出现 - 不知道那里发生了什么，图像存在。可能有关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:19:42.650

[http://jsfiddle.net/u2zKE/2/](http://jsfiddle.net/u2zKE/2/)

干得好

问题是您使用 index 属性，第一个元素将返回 2。 [http://jsfiddle.net/u2zKE/3/](http://jsfiddle.net/u2zKE/3/)

所以你的 DOM 有问题。

我修改了代码以使用自定义`data-index attribute`. 因此，DOM 不会损坏。

```
 var liMarkup = $('<li class="bulletButton" data-index="'+i+'"><a href="#">'+i+'</a></li>'); // New line with data-index attribute 
```

另一个变化是使用 data-index 属性

```
 .eq($(this).data("index"))//Get the li at same index which triggered hover 
```

# java - 在java中更改线程用户

> ID：12880408
> 
> 赞同：0
> 
> 时间：2012-10-14T08:10:41.927
> 
> 标签：java, multithreading, permissions

我在 Windows 下以 USER_1 身份运行我的 java 程序。我需要我的程序在 USER_2 的许可下创建一个线程。

我不知道该怎么做。在网上搜索了几个小时并没有给我任何答案。

Thread.setDaemon(true/false) 怎么样？无论如何会有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:16:06.330

那么，你的谷歌一定是不同的，[链接](https://stackoverflow.com/questions/2014691/can-i-switch-user-on-runnable-thread-in-java?rq=1)。简短的回答；你不能。

用户被绑定到进程。就操作系统而言，线程不是单独的进程。

# ruby-on-rails - 将 Facebook、twitter、google plus 集成到另一个应用程序中

> ID：12880414
> 
> 赞同：2
> 
> 时间：2012-10-14T08:11:30.663
> 
> 标签：ruby-on-rails, ruby, facebook, twitter, integration

将 facebook、twitter 和 google plus 集成到另一个 web 应用程序中，以便将该应用程序中的帖子作为 facebook 中的状态、twitter 中的推文和 google plus 中的状态写掉。我正在使用 ruby​​ on rails 开发它。我搜索了很多关于这个但没有找到任何对我有用的东西。可以发布一些对此有帮助的链接或想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:11:02.150

对于 Facebook，我必须建议您使用 Koala Gem ......

对于 Twitter **推特** [https://twitter.com/about/resources/buttons](https://twitter.com/about/resources/buttons)推特 按钮可以在这里轻松生成并放置在您的网站上。它工作得很好。您甚至可以自定义 Twitter 中的所有内容。它非常用户友好。

对于谷歌加 **谷歌加** 我只是在谷歌加..面临一些困难，因为它有这么多的限制。我仍然想分享一个链接，您可以按照它..

[如何将我们网站上的内容分享到 google plus](https://stackoverflow.com/questions/10832670/how-to-share-content-from-our-site-to-google-plus/15879167#15879167)

我希望它会正常工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:43:23.697

有很多 gem 可用于访问这些 API：

*   [Twitter API 包装器](http://twitter.rubyforge.org/)
*   [Facebook API 包装器](https://github.com/mmangino/facebooker)
*   [Google Plus API 包装器](http://code.google.com/p/google-api-ruby-client/)

由于 API 是不稳定的，因此最好使用像[resque](https://github.com/defunkt/resque)这样的排队系统在 Post#after_create 中对调用进行排队，然后让 resque worker 异步执行调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T13:38:23.503

我建议使用 Koala ( [https://github.com/arsduo/koala/wiki](https://github.com/arsduo/koala/wiki) ) 与 Facebook 交互。它是迄今为止维护最好的 fb 库。

否则，您应该了解有关 OAuth2 的一两件事：

*   [https://github.com/intridea/oauth2](https://github.com/intridea/oauth2)
*   [https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)
*   [https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

使用[https://github.com/sferik/twitter](https://github.com/sferik/twitter)与 twitter 进行交互。

对于 google，我发现手动实现 XML 聊天比使用任何现有的 API 包装器更容易。要将 XML 响应转换为数据，您可以结合使用`Response#parsed`oauth2 gem 和`Array.wrap`ActiveSupport 的方法（XML 解析器无法将单个节点告诉一个可能重复的节点（因此是一个数组），它只出现一次，在我看来，XML 的一个很大的缺点）

或者您可以直接向 google 询问 JSON，这样您就已经拥有正确结构化的数据。

而且，正如@brendan-benson 非常正确地所说，只在后台工作人员中进行 API 调用，而不是在您的正常请求/响应周期中。

# java - XmlHttpRequest 级别 2：响应不返回任何内容

> ID：12880416
> 
> 赞同：1
> 
> 时间：2012-10-14T08:11:34.387
> 
> 标签：java, httpresponse, xmlhttprequest-level2

我有这个问题，我昨天已经问过这个问题但我没有任何答案...... :(

我在客户端有这段代码：

```
 var formdata = new FormData();
    //fill fields of formdata... for example:
    var file = document.getElementById("file").files[0];
    formdata.append("file", file);
    //and others....but the problem is not here
    var xhr = new XMLHttpRequest();
    xhr.open("POST","http://127.0.0.1:8080/Commerciale",true);
    xhr.send(formdata);
    xhr.onreadystatechange = function() {

        if (xhr.readyState == 4) {
    if (xhr.status == 200) {
                   var str = xhr.responseText;
                   alert(str);
              }
         }
      }); 
```

到目前为止，这似乎是公平的。在 servlet 中，我有以下代码：

```
 protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException             {
   ***other code, but i think that the problem is here:
   PrintWriter ajaxWriter = response.getWriter();
   ajaxWriter.println(p.getJSON());
   ajaxWriter.flush();          
   System.out.println(p.getJSON());
   ajaxWriter.close();
 } 
```

问题在于

```
 System.out.println(p.getJSON()); 
```

打印出我的期望，但似乎

```
 xhr.responseText 
```

不返回任何东西，实际上警报是空的。

有人可以解释我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:09:40.927

:) 发现这是原因后：

冲洗后不应关闭写入器。
删除行：

```
ajaxWriter.close(); 
```

一个有趣的相关问题 -[是否应该在 HttpServletResponse.getOutputStream()/.getWriter() 上调用 .close()？](https://stackoverflow.com/questions/1159168/should-one-call-close-on-httpservletresponse-getoutputstream-getwriter)

尽管没有禁止关闭编写器/流的特定文档 - 这是容器应该执行的操作，而不是应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T08:35:01.147

您应该在 POST 请求上设置内容类型：

```
 var formdata = new FormData();    
    var file = document.getElementById("file").files[0];
    formdata.append("file", file);

    var xhr = new XMLHttpRequest();
    xhr.open("POST","http://127.0.0.1:8080/Commerciale",true);
    xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xhr.onreadystatechange = function() {

    if (xhr.readyState == 4) {
        if (xhr.status == 200) {
            var str = xhr.responseText;
            alert(str);
        }
     }
  };
xhr.send(formdata); 
```

# c++ - 将手动写入的数组分配给之前创建的变量

> ID：12880422
> 
> 赞同：2
> 
> 时间：2012-10-14T08:12:48.730
> 
> 标签：c++, arrays

如何将手动写入的数组分配给之前创建的变量。

例如：
**啊**

```
class PredefinedMatrices {
public:
    PredefinedMatrices();

    unsigned char getSBoxValue(unsigned char hexNumber) const;

private:
    unsigned char sbox[256];
}; 
```

**交流**

```
PredefinedMatrices::PredefinedMatrices() {
    sbox[256] = //Sure it won't work
    {
        0x34, 0x5b,
        0x93, 0xc2
    };
}
unsigned char PredefinedMatrices::getSBoxValue(unsigned char hexNumber) const {
    return sbox[hexNumber];
} 
```

直接在类中分配值是行不通的。
这样做没有用：

```
unsigned char *matrice;
matrice = new unsigned char[256]{...}; 
```

由于额外的分配时间和内存消耗，我不想将临时矩阵的 memcpy 放入我需要的矩阵中。

编辑：手动写入的数组是来自 AES 加密的 S-Box。我可以动态计算它，但我不想将处理器周期浪费在恒定且我们知道其值的东西上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:24:01.197

> 直接在类中分配值是行不通的。

是的，它会的。

```
matrice[0] = 0x34;
matrice[1] = 0x5b;
... 
```

> 由于额外的分配时间和内存消耗，我不想将临时矩阵的 memcpy 放入我需要的矩阵中。

如果您制作临时矩阵`static unsigned char [256]`并在构造函数中定义和初始化它，则没有额外的分配时间（它在程序加载时初始化一次，而不是每次调用构造函数时），并且内存消耗 256 字节是很可能低于`matrice`分别填充每个元素的代码。

jrok 关于根本不使用原始数组的评论可能很好，但这取决于您使用数组的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:52:41.450

我找到了解决方案。我这样做了：
**啊**

```
class PredefinedMatrices {
public:
    PredefinedMatrices();

    unsigned char getSBoxValue(unsigned char hexNumber) const;

private:
    static const unsigned char sbox[256]; //I use const only to allow the compiler to optimize the code better
}; 
```

**a.cpp**

```
PredefinedMatrices::PredefinedMatrices() {}

const unsigned char PredefinedMatrices::sbox[256] =
{
    0x34, 0x5b,
    0x93, 0xc2
};

unsigned char PredefinedMatrices::getSBoxValue(unsigned char hexNumber) const {
    return sbox[hexNumber];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:05:04.327

当最后一个索引为 255 时，您错误地分配给数组的第 256 个元素。使用向量是迄今为止比原始数组更好的方法。您可以在构造函数中初始化矩阵。

```
class PredefinedMatrices {
public:
    PredefinedMatrices();

    vector<unsigned char> matrice;
};

PredefinedMartices::PredefinedMatrices()
{
    matrice.resize(256,0);
    matrice[0] = 0x34;
    matrice[1] = 0x5b;
    matrice[2] = 0x93;
    matrice[3] = 0xc2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T08:22:57.687

想一想，您应该逐项填充数组或使用缓冲区并从中复制数据。假设 C++ 支持这样的语法：

```
unsigned char myBuffer[256];
myBuffer = { 1, 2, ... }; 
```

那么你认为编译器做的不是临时缓冲区和 memcpy 吗？如果你逐项填充数组，你有一个更大的代码会影响你的执行速度，所以实现这一点的唯一有效方法是 temp buffer + memcpy。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T09:30:23.430

如果您使用的是 C++11，则可以使用常规初始化语法：

```
PredefinedMatrices::PredefinedMatrices()
  :sbox {
     0x34,
     0x5b,
     0x93,
     0xc2,
     /*...*/
    }
{} 
```

# c++ - 在 C\C++ 中使用 XML 创建 GUI

> ID：12880424
> 
> 赞同：3
> 
> 时间：2012-10-14T08:13:10.170
> 
> 标签：c++, c, xml, windows, user-interface

我从未真正使用过 XML，有人可以推荐我为 C\C++ 应用程序创建 GUI 配置文件的方法。推荐我框架或其他东西，因为我真的不知道如何最好地使用。

我只为 Windows 编写应用程序，我不想使用依赖于 .NET 的框架。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:33:21.343

我建议查看[QT 项目](http://doc.qt.digia.com/qt/index.html)中名为[QT Quick](http://doc.qt.digia.com/qt/qtquick.html)的产品，它使用配置文件（[但它不是 XML](http://en.wikipedia.org/wiki/QML)）来描述用户界面和 JavaScript 来处理操作，它与后端的 C++ 代码交互。

我不认为大多数 GUI 使用 XML 文件来描述小部件/控件。但是 Mozilla 有一种基于 XML 的标记语言，用于创建称为[XUL（XML 用户界面语言）](https://developer.mozilla.org/en-US/docs/XUL)的 GUI 。可以通过称为[XPCOM/XPConnect](https://developer.mozilla.org/en-US/docs/The_Joy_of_XUL)的其他技术将其用作 C/C++ 桌面代码的前端。

我在一次演讲中说，使用 HTML5（必须是 HTML-5）以及 Javascript 和浏览器将取代传统的 GUI 工具包作为 C++ 桌面应用程序的前端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T09:42:41.017

我认为您可以使用[Glade](http://glade.gnome.org/)为 GUI 生成 XML 并使用[GTK+](http://www.gtk.org/)工具包...

> 通过使用 GtkBuilder，Glade XML 文件可用于多种编程语言，包括 C、C++、C#、Vala、Java、Perl、Python 等。
> 
> Glade 是在 GNU GPL 许可下发布的自由软件。

...即使在 Windows 上也能正常工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:02:36.177

想一想，Windows 程序员可能会使用内部（！）Windows 接口。从[XMLDOM](http://msdn.microsoft.com/en-us/library/windows/desktop/ms764730%28v=vs.85%29.aspx)和[xmllite](http://msdn.microsoft.com/en-us/magazine/cc163436.aspx)中选择一个。

# android - MyCustomAdapter.getView 处的 java.lang.NullPointerException

> ID：12880430
> 
> 赞同：-1
> 
> 时间：2012-10-14T08:14:24.740
> 
> 标签：android, android-layout, nullpointerexception, contacts

我想创建一个多联系人选择器。最初我只是想通过提供静态值来测试它是否有效。我想实现一个`CustomAdapter`来执行任务，但我得到`java.lang.NullPointerException`并根据 log cat 它在第 1 行。41 这是`paramView = mInflater.inflate(R.layout.custcontactview, null);`

谁能告诉我我做错了什么？

注意：如果有人知道有关创建多个联系人选择器的好教程，请提供链接。

**原木猫**

```
10-13 19:44:38.115: E/AndroidRuntime(1461): java.lang.NullPointerException
10-13 19:44:38.115: E/AndroidRuntime(1461):     at com.example.multiplecontacts.MyCustomAdapter.getView(MyCustomAdapter.java:41)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.AbsListView.obtainView(AbsListView.java:1430)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.ListView.makeAndAddView(ListView.java:1745)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.ListView.fillDown(ListView.java:670)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.ListView.fillFromTop(ListView.java:727)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.ListView.layoutChildren(ListView.java:1598)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.AbsListView.onLayout(AbsListView.java:1260)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.View.layout(View.java:7175)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.View.layout(View.java:7175)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.View.layout(View.java:7175)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.View.layout(View.java:7175)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.View.layout(View.java:7175)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.os.Looper.loop(Looper.java:130)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at java.lang.reflect.Method.invokeNative(Native Method)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at java.lang.reflect.Method.invoke(Method.java:507)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-13 19:44:38.115: E/AndroidRuntime(1461):     at dalvik.system.NativeStart.main(Native Method) 
```

**custcontactview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingBottom="5.0px"
android:paddingLeft="5.0px"
android:paddingTop="5.0px" >

<TextView
    android:id="@+id/txtContactName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15.0dip"
    android:layout_toLeftOf="@+id/checkBox1"
    android:layout_alignParentLeft="true"
    android:text="Medium Text"
    android:textAppearance="?android:textAppearanceMedium" />

<TextView
    android:id="@+id/txtContactNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txtContactName"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="15.0dip"
    android:layout_toLeftOf="@+id/checkBox1"
    android:text="Small Text"
    android:textAppearance="?android:textAppearanceSmall" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="10dp"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false" />

</RelativeLayout> 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" />

</RelativeLayout> 
```

**MainActivity.java**

```
public class MainActivity extends ListActivity {

ListView mListView;
MyCustomAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mAdapter = new MyCustomAdapter();
    mListView = getListView();
    mAdapter.addItem("Jay", "+919033953469");
    mAdapter.addItem("Jay", "+918469000500");
    mAdapter.addItem("Tapan", "+919033843969");
    mAdapter.addItem("Tapan", "+919408396544");     
    mListView.setAdapter(mAdapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

**MyCustomAdapter.java**

```
public class MyCustomAdapter extends BaseAdapter {

private LayoutInflater mInflater;
private ArrayList<String> mData = new ArrayList();
private ArrayList<String> mNumber = new ArrayList();

public MyCustomAdapter() {
}

public int getCount() {
    return this.mData.size();
}

public void addItem(String paramString1, String paramString2) {
  this.mData.add(paramString1);
  this.mNumber.add(paramString2);
  notifyDataSetChanged();
}

public Object getItem(int paramInt) {
    return (String) this.mData.get(paramInt);
}

public long getItemId(int paramInt) {
    return paramInt;
}

public View getView(int paramInt, View paramView, ViewGroup paramViewGroup) {
    if(paramView == null) {
        paramView = mInflater.inflate(R.layout.custcontactview, null);
    }
    /*CheckBox cbx = (CheckBox) paramView.findViewById(R.id.checkBox1);
    cbx.setTag(paramInt);
    TextView tvTitle = (TextView) paramView.findViewById(R.id.txtContactName);
    TextView tvTitle1 = (TextView) paramView.findViewById(R.id.txtContactNumber);
    tvTitle.setText(mData.get(paramInt).toString());
    tvTitle1.setText(mNumber.get(paramInt).toString());*/
    return paramView;
}

public static class ViewHolder {
    public CheckBox cb;
    public TextView nameView;
    public TextView numberView;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:22:43.180

mInflater 为 NULL

```
public MyCustomAdapter(Context context) {
    mInflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

# r - 使用 R 有条件地创建变量

> ID：12880433
> 
> 赞同：0
> 
> 时间：2012-10-14T08:14:37.107
> 
> 标签：r

我正在尝试根据日期创建一个新的 var“PERIOD”。样本数据如下：

```
Date
1/10/2012
1/11/2012
1/12/2012
1/13/2012
1/14/2012
1/15/2012
1/16/2012
1/17/2012
1/18/2012 
```

调节新数据集后如下所示：

```
 Date      PERIOD
1/10/2012     Y1
1/11/2012     Y1
1/12/2012     Y1
1/13/2012     Y1
1/14/2012     Y1
1/15/2012     Y2
1/16/2012     Y2
1/17/2012     Y2
1/18/2012     Y2 
```

我使用的代码是

```
dat$PERIOD<-{If '1/10/2012' <=  as.Date(dat$Date) <= '1/14/2012' dat$PERIOD='Y1' else
    If '1/15/2012' <=  as.Date(dat$Date) <= '1/18/2012'dat$PERIOD='Y2'
} 
```

但我收到错误：

```
Error: unexpected string constant in dat$PERIOD<-{If '1/10/2012' 
```

谢谢你。问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:27:33.800

请参阅`?as.Date`正确的日期格式。
您的条件语句大多是错误的。R 区分大小写。你必须使用`if`. 请在下面找到一些示例代码：

```
d <- data.frame(Date=as.Date(paste(2012, 1, 10:18, sep="/")), stringsAsFactors=FALSE)
d$PERIOD <- ifelse(as.Date("2012/1/15") > d$Date, "Y1", "Y2") 
```

# php - PHP排序数组函数

> ID：12880435
> 
> 赞同：0
> 
> 时间：2012-10-14T08:14:43.040
> 
> 标签：php

我有一张由评论组成的表格。其中一些是对其他评论的回复，并在 parent_commentid 表中设置了一个值。我正在尝试创建一个函数，该函数检查结果集中的每个元素是否在 parent_columnid 中有一个值，如果有，则取整个元素并在元素内对其进行排序，comment_id 与当前元素的 parent_commentid 匹配迭代。到目前为止，这是我想出的。

```
 function sort_comments($comments){
    $result = array();
    foreach($comments as $comment){
        if(is_null($comment['parent_commentid'])) $result[] = $comment;
        else{
            $parent_comment = array_search($comment['parent_commentid'], $comments);
            if($parent_array !== false) $result[$parent_comment][] = $comment;
        }
    }
} 
```

array_search 不是我正在寻找的功能，而是我能想到的壁橱。我不知道从这里去哪里。还请记住，可能存在对其他回复的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:24:03.287

您需要通过他们自己的 id 来存储评论，以便您以后可以引用它们：

```
function sort_comments($comments){
    $result = array();
    foreach($comments as $comment){
        if(is_null($comment['parent_commentid'])){ 
            $result[$comment['commentid']] = $comment;
        }else{
            $parent_comment = $result[$comment['parent_commentid']]
            if($parent_comment) 
                $parent_comment[$comment['commentid']] = $comment;
            else
                // what happens in this case:
                // parent_commentid set, but no such comment exists?
        }
    } 
```

注意`$comment['commentid']`. 我不知道您如何称呼评论的 id ( `commentid`?)，但由于您有一个专栏，因此`parent_commandid`您很可能确实有这样一个专栏来引用您的评论。使用它来存储评论，在顶层或在其他评论中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T08:43:39.343

要按数组的内部字段排序，我通常使用 usort。Usort 用作递归方法，因此您可以确保每次尝试对数组中的元素进行排序时都会调用自定义函数。这样，您将获得更干净的代码。

这是一个例子：

```
function cmp_rand_score($a, $b)
{
  if($a["rand_score"] == $b["rand_score"]){
    return 0;
  }
  return ($a["rand_score"] < $b["rand_score"]) ? 1 : -1;
}

//If you are inside a class:
usort($rows, array($this, "cmp_rand_score"));

//If not you can call directly:
usort($rows, "cmp_rand_score"); 
```

希望能帮助到你。

# python - 在 Python 中制作表格最简单的方法是什么？

> ID：12880439
> 
> 赞同：2
> 
> 时间：2012-10-14T08:14:59.147
> 
> 标签：python, matplotlib

我想用 Python 创建一个看起来像一个简单的 excel 表的表，因此我已经使用了 pyExcelerator。但现在我想着只用`pyplot.table`which 似乎很容易。但是，我需要进行一些更改，我不知道这在 vpyplot.table 中是否可行。

例如，我想在左上角添加一个单元格，并且我还想在单元格下方创建两个单元格`t+1`（参见下表示例）。

那么，是否可以进行这些更改，`pyplot.table`或者我应该更好地使用另一种方式来制作表格？![表格示例](../Images/cfe723c3187f574ad5700c266a46651a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:22:20.410

构建一个程序来生成图像中的表格以包含在您的 Word 文档中有点过分。它有很多额外的工作和完全不必要的努力。在 Excel 中制作表格，然后将其粘贴到 Word 中。它看起来不错，并且更容易更新和更改。

如果您以此为借口来学习新事物，那很好，但是您需要给我们更多的帮助来帮助您。SO 不是代码工厂。提供你尝试过的东西，以及你遇到问题的代码示例。我们可以提供帮助。

# java - Java 从构造函数调用构造函数

> ID：12880443
> 
> 赞同：9
> 
> 时间：2012-10-14T08:15:13.723
> 
> 标签：java, constructor

我有一个构造函数

```
private Double mA;
private Double mB;

Foo(Double a) {
  mA = a;
  mB = a + 10;
}

Foo(Double a, Double b) {
  mA = a;
  mB = b;
  // some logic here
} 
```

如果我像这样调用第二个构造函数：

```
Foo(Double a) {
  Double b = a + 10;
  this(a, b);
} 
```

比编译器告诉我的，构造函数应该是第一条语句。那么我需要将所有逻辑从第二个构造函数复制到第一个构造函数吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T08:16:05.920

你为什么不直接做`this(a, a+10)`呢？

请注意`this()`or`super()`必须是构造函数中的第一条语句（如果存在）。但是，您仍然可以在参数中执行逻辑。如果你需要做复杂的逻辑，你可以通过在一个参数中调用一个类方法来完成：

```
static double calculateArgument(double val) {
    return val + 10; // or some really complex logic
}

Foo(double a) {
    this(a, calculateArgument(a));
}

Foo(double a, double b) {
    mA = a;
    mB = b;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T08:16:20.340

如果您在构造函数中使用`this()`或`super()`调用来调用另一个构造函数，则它应该始终是构造函数中的第一条语句。

这就是为什么您的以下代码无法编译的原因：-

```
Foo(Double a) {
  Double b = a + 10;
  this(a, b);
} 
```

您可以修改它以遵循上述规则：-

```
Foo(Double a) {
  this(a, a + 10);  //This will work.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T08:16:47.783

*另一个构造函数的调用必须是构造函数的第一行。*

您可以调用*显式构造函数调用*-

```
Foo(Double a) {
  this(a, a+10);
} 
```

# xml - mongo的Spring servlet-context.xml错误

> ID：12880444
> 
> 赞同：1
> 
> 时间：2012-10-14T08:15:31.473
> 
> 标签：xml, spring, mongodb

我有以下 spring servlet-context.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans 
    xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc" 
    xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/data/mongo http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd"> 
```

我在 Eclipse 中得到以下文件错误：

> 通过文件“servlet-context.xml”验证文件“spring-mongo-1.0.xsd”时检测到以下错误。在大多数情况下，可以通过直接验证“spring-mongo-1.0.xsd”来检测这些错误。但是，只有在 servlet-context.xml 的上下文中验证 spring-mongo-1.0.xsd 时才会发生错误。

src-resolve：无法将名称“存储库：存储库”解析为（n）“类型定义”组件位置：第 110 行

该项目仍然有效，但我试图摆脱这个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:10:44.337

根据@francadaval，解决方案是将 xsd 的链接更改为：

springframework.org/schema/data/mongo/spring-mongo.xsd

# php - 奇怪的 Facebook API 行为。CSRF 状态令牌与提供的不匹配

> ID：12880445
> 
> 赞同：1
> 
> 时间：2012-10-14T08:16:02.067
> 
> 标签：php, facebook, facebook-php-sdk

> **可能重复：**
> [CSRF 状态令牌与提供的一个不匹配 FB PHP SDK 3.1.1 Oauth 2.0](https://stackoverflow.com/questions/8977502/csrf-state-token-does-not-match-one-provided-fb-php-sdk-3-1-1-oauth-2-0)
> [CSRF 状态令牌与提供的一个不匹配](https://stackoverflow.com/questions/11957455/csrf-state-token-does-not-match-one-provided)

我一次又一次地检查了 Devs 面临的 Facebook API 类似问题。PHP-SDK 在每次运行时都会记录一个错误，上面写着

```
CSRF state token does not match one provided. 
```

奇怪的是，预期的应用程序似乎工作正常（这是一个批处理发布脚本，一旦我重置批处理，它就会生成此错误。）

[所以我在此处](https://github.com/facebook/facebook-php-sdk)提供的 PHP-SDK 中找到了 base_facebook.php 。并更改了此代码（在[此处](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php)）：

```
protected function getCode() {
    if (isset($_REQUEST['code'])) {
      if ($this->state !== null &&
          isset($_REQUEST['state']) &&
          $this->state === $_REQUEST['state']) {

        // CSRF state has done its job, so clear it
        $this->state = null;
        $this->clearPersistentData('state');
        return $_REQUEST['code'];
      } else {
        self::errorLog('CSRF state token does not match one provided.');
        return false;
      }
    } 
```

到这个（只是为了跟踪错误日志中的错误）：

```
protected function getCode() {
    if (isset($_REQUEST['code'])) {
      if ($this->state !== null && isset($_REQUEST['state']) && $this->state == $_REQUEST['state']) {
        // CSRF state has done its job, so clear it
        $this->state = null;
        $this->clearPersistentData('state');
        return $_REQUEST['code'];
      } else {
        $add = '';
        if($this->state == null){
            $add .= ' state is null.';
        }
        if(!isset($_REQUEST['state'])){
            $add .= ' state is not set.';
        }
        if($this->state !== $_REQUEST['state']){
            $add .= ' states do not match.';
        }
        self::errorLog('CSRF state token does not match one provided.'. $add);
        return false;
      }
    }

    return false;
  } 
```

再次运行该应用程序时，我得到更新的错误：

```
CSRF state token does not match one provided. state is null. states do not match. 
```

现在，$this->state() 为 NULL，我没想到这是 facebook sdk 中最小的错误。我确定我的应用只生成一个登录 url 请求，只有当用户与我的应用没有会话时也是如此。

帮助将不胜感激。

# mongodb - 为什么一个 mongoDB 复合索引会影响另一个复合索引？

> ID：12880449
> 
> 赞同：5
> 
> 时间：2012-10-14T08:16:07.357
> 
> 标签：mongodb, mongodb-query

从我从 mongodb 文档中读取的内容来看，查询中只使用了一个索引。但是，我发现其他一些复合索引的存在会影响此查询的质量。这是一个例子：

db.products.ensureIndex({'b' : 1, 'ld' : 1, 'li' : 1})

db.products.find({'b' : {$in : b.ct}, 'ld' : {$lt : d}}).limit(24).sort({'li' : 1}).explain ()

```
{ "cursor" : "BtreeCursor b_1_l.d_1_l.i_1 multi",
"isMultiKey" : true,
"n" : 24,
"nscannedObjects" : 1079,
"nscanned" : 1102,
"nscannedObjectsAllPlans" : 1182,
"nscannedAllPlans" : 1205,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
....} 
```

db.products.ensureIndex({'li' :1, 'b' : 1, 'ld' : 1})

db.products.find({'b' : {$in : b.ct}, 'ld' : {$lt : d}}).limit(24).sort({'li' : 1}).explain ()

```
{ "cursor" : "BtreeCursor b_1_l.d_1_l.i_1 multi",
"isMultiKey" : true,
"n" : 24,
"nscannedObjects" : 614,
"nscanned" : 624,
"nscannedObjectsAllPlans" : 1283,
"nscannedAllPlans" : 1875,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 1,
"nChunkSkips" : 0,
....} 
```

的值`nscanned`几乎减少了一半。为什么？

==================================================== ===============

根据评论，我更新了我的命令行序列以提供更详细的信息。请注意，索引名称已更改，因为我修改了数据库。结果是一样的。两个指标更好，但为什么呢？

db.products.stats()

```
{
"ns" : "mytest.products",
"count" : 209607,
"size" : 90155636,
"avgObjSize" : 430.11748653432375,
"storageSize" : 123936768,
"numExtents" : 11,
"nindexes" : 1,
"lastExtentSize" : 37625856,
"paddingFactor" : 1,
"systemFlags" : 0,
"userFlags" : 0,
"totalIndexSize" : 5927600,
"indexSizes" : {
    "_id_" : 5927600
},
"ok" : 1
} 
```

b.ct

```
[
2020,
3564969011,
2021,
15762981,
271619011,
2023,
2024,
2027,
3825141,
505092,
2025,
2028,
10825721,
2080,
2026,
2085,
2029,
2030,
2032,
3564970011,
2081,
2082,
2083,
2084,
271621011,
2087 
```

]

d

ISODate("2012-11-30T00:00:00Z")

db.products.ensureIndex({'b': 1, 'd': 1, 'i': 1})

db.products.stats()

```
{
"ns" : "mytest.products",
"count" : 209607,
"size" : 90155636,
"avgObjSize" : 430.11748653432375,
"storageSize" : 123936768,
"numExtents" : 11,
"nindexes" : 2,
"lastExtentSize" : 37625856,
"paddingFactor" : 1,
"systemFlags" : 0,
"userFlags" : 0,
"totalIndexSize" : 22614816,
"indexSizes" : {
    "_id_" : 5927600,
    "b_1_d_1_i_1" : 16687216
},
"ok" : 1
} 
```

db.products.find({'b' : {$in : b.ct}, 'd' : {$lt : d}}).limit(24).sort({'i' : 1}).explain ()

```
{
"cursor" : "BtreeCursor b_1_d_1_i_1 multi",
"isMultiKey" : true,
"n" : 24,
"nscannedObjects" : 1294,
"nscanned" : 1300,
"nscannedObjectsAllPlans" : 1395,
"nscannedAllPlans" : 1401,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 12,
"indexBounds" : {
    "b" : [
        [
            2020,
            2020
        ],
        [
            2021,
            2021
        ],
        [
            2023,
            2023
        ],
        [
            2024,
            2024
        ],
        [
            2025,
            2025
        ],
        [
            2026,
            2026
        ],
        [
            2027,
            2027
        ],
        [
            2028,
            2028
        ],
        [
            2029,
            2029
        ],
        [
            2030,
            2030
        ],
        [
            2032,
            2032
        ],
        [
            2080,
            2080
        ],
        [
            2081,
            2081
        ],
        [
            2082,
            2082
        ],
        [
            2083,
            2083
        ],
        [
            2084,
            2084
        ],
        [
            2085,
            2085
        ],
        [
            2087,
            2087
        ],
        [
            505092,
            505092
        ],
        [
            3825141,
            3825141
        ],
        [
            10825721,
            10825721
        ],
        [
            15762981,
            15762981
        ],
        [
            271619011,
            271619011
        ],
        [
            271621011,
            271621011
        ],
        [
            3564969011,
            3564969011
        ],
        [
            3564970011,
            3564970011
        ]
    ],
    "d" : [
        [
            true,
            ISODate("2012-11-30T00:00:00Z")
        ]
    ],
    "i" : [
        [
            {
                "$minElement" : 1
            },
            {
                "$maxElement" : 1
            }
        ]
    ]
},
"server" : "li91-182:27017"
} 
```

db.products.ensureIndex({'i': 1, 'b': 1, 'd': 1})

db.products.stats()

```
{
"ns" : "mytest.products",
"count" : 209607,
"size" : 90155636,
"avgObjSize" : 430.11748653432375,
"storageSize" : 123936768,
"numExtents" : 11,
"nindexes" : 3,
"lastExtentSize" : 37625856,
"paddingFactor" : 1,
"systemFlags" : 0,
"userFlags" : 0,
"totalIndexSize" : 39302032,
"indexSizes" : {
    "_id_" : 5927600,
    "b_1_d_1_i_1" : 16687216,
    "i_1_b_1_d_1" : 16687216
},
"ok" : 1
} 
```

db.products.find({'b' : {$in : b.ct}, 'd' : {$lt : d}}).limit(24).sort({'i' : 1}).explain ()

```
{
"cursor" : "BtreeCursor b_1_d_1_i_1 multi",
"isMultiKey" : true,
"n" : 24,
"nscannedObjects" : 206,
"nscanned" : 206,
"nscannedObjectsAllPlans" : 445,
"nscannedAllPlans" : 619,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 6,
"indexBounds" : {
    "b" : [
        [
            2020,
            2020
        ],
        [
            2021,
            2021
        ],
        [
            2023,
            2023
        ],
        [
            2024,
            2024
        ],
        [
            2025,
            2025
        ],
        [
            2026,
            2026
        ],
        [
            2027,
            2027
        ],
        [
            2028,
            2028
        ],
        [
            2029,
            2029
        ],
        [
            2030,
            2030
        ],
        [
            2032,
            2032
        ],
        [
            2080,
            2080
        ],
        [
            2081,
            2081
        ],
        [
            2082,
            2082
        ],
        [
            2083,
            2083
        ],
        [
            2084,
            2084
        ],
        [
            2085,
            2085
        ],
        [
            2087,
            2087
        ],
        [
            505092,
            505092
        ],
        [
            3825141,
            3825141
        ],
        [
            10825721,
            10825721
        ],
        [
            15762981,
            15762981
        ],
        [
            271619011,
            271619011
        ],
        [
            271621011,
            271621011
        ],
        [
            3564969011,
            3564969011
        ],
        [
            3564970011,
            3564970011
        ]
    ],
    "d" : [
        [
            true,
            ISODate("2012-11-30T00:00:00Z")
        ]
    ],
    "i" : [
        [
            {
                "$minElement" : 1
            },
            {
                "$maxElement" : 1
            }
        ]
    ]
},
"server" : "li91-182:27017"
} 
```

db.products.getIndexes()

```
[
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "mytest.products",
    "name" : "_id_"
},
{
    "v" : 1,
    "key" : {
        "b" : 1,
        "d" : 1,
        "i" : 1
    },
    "ns" : "mytest.products",
    "name" : "b_1_d_1_i_1"
},
{
    "v" : 1,
    "key" : {
        "i" : 1,
        "b" : 1,
        "d" : 1
    },
    "ns" : "mytest.products",
    "name" : "i_1_b_1_d_1"
}
] 
```

db.products.dropIndex({'i': 1, 'b': 1, 'd': 1}) { "nIndexesWas" : 3, "ok" : 1 }

db.products.getIndexes()

```
[
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "mytest.products",
    "name" : "_id_"
},
{
    "v" : 1,
    "key" : {
        "b" : 1,
        "d" : 1,
        "i" : 1
    },
    "ns" : "mytest.products",
    "name" : "b_1_d_1_i_1"
}
] 
```

db.products.find({'b' : {$in : b.ct}, 'd' : {$lt : d}}).limit(24).sort({'i' : 1}).explain ()

```
{
"cursor" : "BtreeCursor b_1_d_1_i_1 multi",
"isMultiKey" : true,
"n" : 24,
"nscannedObjects" : 1294,
"nscanned" : 1300,
"nscannedObjectsAllPlans" : 1395,
"nscannedAllPlans" : 1401,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 131,
"indexBounds" : {
    "b" : [
        [
            2020,
            2020
        ],
        [
            2021,
            2021
        ],
        [
            2023,
            2023
        ],
        [
            2024,
            2024
        ],
        [
            2025,
            2025
        ],
        [
            2026,
            2026
        ],
        [
            2027,
            2027
        ],
        [
            2028,
            2028
        ],
        [
            2029,
            2029
        ],
        [
            2030,
            2030
        ],
        [
            2032,
            2032
        ],
        [
            2080,
            2080
        ],
        [
            2081,
            2081
        ],
        [
            2082,
            2082
        ],
        [
            2083,
            2083
        ],
        [
            2084,
            2084
        ],
        [
            2085,
            2085
        ],
        [
            2087,
            2087
        ],
        [
            505092,
            505092
        ],
        [
            3825141,
            3825141
        ],
        [
            10825721,
            10825721
        ],
        [
            15762981,
            15762981
        ],
        [
            271619011,
            271619011
        ],
        [
            271621011,
            271621011
        ],
        [
            3564969011,
            3564969011
        ],
        [
            3564970011,
            3564970011
        ]
    ],
    "d" : [
        [
            true,
            ISODate("2012-11-30T00:00:00Z")
        ]
    ],
    "i" : [
        [
            {
                "$minElement" : 1
            },
            {
                "$maxElement" : 1
            }
        ]
    ]
},
"server" : "li91-182:27017"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T22:29:02.770

根据 10gen，[BSON 是 JSON 类文档的二进制编码序列化](http://www.mongodb.org/display/DOCS/BSON)。但是 BSON 文档中的字段顺序确实很重要：

```
> db.things.insert({b:1,d:1,i:1});
> db.things.insert({i:2,b:2,d:2});
> db.things.insert({d:3,i:3,b:3});
> db.things.find();
{ "_id" : ObjectId("50904ee4875db529686c5775"), "b" : 1, "d" : 1, "i" : 1 }
{ "_id" : ObjectId("50904ef0875db529686c5776"), "i" : 2, "b" : 2, "d" : 2 }
{ "_id" : ObjectId("50904efc875db529686c5777"), "d" : 3, "i" : 3, "b" : 3 } 
```

因此，每当您创建索引时`db.products.ensureIndex({'b' : 1, 'l.d' : 1, 'l.i' : 1})`，`db.products.ensureIndex({'l.i' :1, 'b' : 1, 'l.d' : 1})`您都会得到 2 个具有**不同**字段顺序的索引。这可以通过`db.products.getIndexes()`您提供的结果进行检查：

```
[{
    "v" : 1,
    "key" : {
        "b" : 1,
        "d" : 1,
        "i" : 1
    },
    "ns" : "mytest.products",
    "name" : "b_1_d_1_i_1"
},
{
    "v" : 1,
    "key" : {
        "i" : 1,
        "b" : 1,
        "d" : 1
    },
    "ns" : "mytest.products",
    "name" : "i_1_b_1_d_1"
}] 
```

并且不同的字段顺序显然可能导致不同的`nscanned`值 -[要扫描的项目数（包括索引树节点）](http://www.mongodb.org/display/DOCS/Explain#Explain-nscanned)：

> 检查的项目（文档或索引条目）的数量。项目可能是对象或索引键。

# c++ - 如何编写一个类或函数在OpenGL中自动分配纹理单元

> ID：12880452
> 
> 赞同：1
> 
> 时间：2012-10-14T08:16:35.257
> 
> 标签：c++, opengl, textures

我已经看到许多示例来硬编码程序中纹理单元的数量。例如：

```
glActiveTexture(GL_TEXTURE0 + 0);
glBindTexture(GL_TEXTURE_2D, object1BaseImage);
glActiveTexture(GL_TEXTURE0 + 2);
glBindTexture(GL_TEXTURE_2D, object1NormalMap);
glActiveTexture(GL_TEXTURE0 + 4);
glBindTexture(GL_TEXTURE_2D, shadowMap); 
```

问题是两个同时使用的纹理在渲染场景时可能会因为使用相同的纹理单元而相互冲突。我的问题是如何通过实现类或函数来自动分配 OpenGL 中的纹理单元？因为有许多不同的常量定义了我可以使用多少个采样器对象：

```
GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS,
GL_MAX_GEOMETRY_TEXTURE_IMAGE_UNITS,
GL_MAX_TESS_CONTROL_TEXTURE_IMAGE_UNITS,
GL_MAX_TESS_EVALUATION_TEXTURE_IMAGE_UNITS,
GL_MAX_TEXTURE_IMAGE_UNITS and
GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS. 
```

我对常数感到困惑，不应该有一个常数`GL_MAX_FRAGMENT_TEXTURE_IMAGE_UNITS`吗？我想我需要在分配纹理单元时获得最大数量的纹理单元。所以有**两个**问题：

1.  如何理解上面提到的六个常数，为什么没有一个名为 的常数`GL_MAX_FRAGMENT_TEXTURE_IMAGE_UNITS`。
2.  如何编写一个类或函数使用常量自动分配纹理单元。

有任何想法吗？代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:25:08.907

> 如何编写一个类或函数使用常量自动分配纹理单元。

这很简单：*不要。*

纹理图像单元的“分配”通常由您打算使用的*程序设定的约定完成。*您决定单元 0 是漫反射纹理所在的位置；如果特定的网格和着色器没有漫反射纹理，则不要在单元 0 中放置任何东西。单元 12 可能是阴影贴图所在的位置。

这就是为什么[shading_language_420pack](http://www.opengl.org/registry/specs/ARB/shading_language_420pack.txt)允许您直接在着色器中设置纹理单元。即使没有这个，您通常应该在编译着色器后设置采样器的纹理单元并且不要移动它。

当您不必更改程序状态时，没有任何意义。

在 3.3+ 硬件上，您有不少于 48+ 个可用的纹理单元。你不太可能用完。

> 因为有许多不同的常量定义了我可以使用多少个采样器对象：

不，有*一个*常量定义了您可以使用多少个“采样器对象”：`GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS`. 这是 OpenGL 提供的纹理图像单元总数的硬性限制。`glActiveTexture`取一个 和 之间的`GL_TEXTURE0`数字`GL_TEXTURE0+GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS`。

*个别的是可以在单个着色器阶段*中活动的 GLSL 采样器类型的最大数量。至于你使用哪个片段着色器，它是`GL_MAX_TEXTURE_IMAGE_UNITS`. 这是出于遗留原因，因为最初只有片段着色器可以访问纹理。

# facebook - Facebook 爬虫机器人崩溃网站

> ID：12880456
> 
> 赞同：7
> 
> 时间：2012-10-14T08:18:01.047
> 
> 标签：facebook, bots, web-crawler

Facebook 是否只是实施了一些网络爬虫？在过去的几天里，我的网站已经崩溃了几次，被我追溯到 Facebook 的 IP 严重超载。

我试过谷歌搜索，但找不到任何关于通过 robots.txt 控制 Facebook 爬虫机器人的明确资源。有一个关于添加以下内容的参考：

用户代理：facebookexternalhit/1.1 抓取延迟：5

用户代理：facebookexternalhit/1.0 抓取延迟：5

用户代理：facebookexternalhit/* 抓取延迟：5

但我找不到任何关于 Facebook 机器人是否尊重 robots.txt 的具体参考。根据较早的消息来源，Facebook“不会抓取您的网站”。但这绝对是错误的，因为我的服务器日志显示他们以每秒许多页面的速度从 69.171.237.0/24 和 69.171.229.115/24 范围内的十几个 IP 爬取我的网站。

我找不到任何关于这方面的文献。我怀疑这是 FB 在过去几天刚刚实施的新东西，因为我的服务器以前从未崩溃过。

有人可以请教吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:56:49.447

正如[在 facebook 和 Crawl-delay 上的类似问题中](https://stackoverflow.com/questions/7716531/facebook-and-crawl-delay-in-robots-txt)所讨论的那样，facebook 并不认为自己是机器人，甚至不请求您的 robots.txt，更不用说注意它的内容了。

您可以**实现自己的速率限制代码**，如类似问题链接中所示。这个想法是在您的服务器容量过剩或被特定用户代理淹没时简单地返回 http 代码 503。

那些为大型科技公司工作的人似乎不明白“改善缓存”是小公司没有预算来处理的事情。我们专注于为真正付钱的客户提供服务，并且没有时间抵御来自“友好”公司的猖獗网络机器人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:43:10.810

我们几乎在同一时间（10 月中旬）看到了相同的行为——来自 Facebook 的大量请求导致排队请求和整个系统的缓慢。一开始是每 90 分钟一次；几天后，这种频率增加并随机分布。

这些请求似乎不尊重 robots.txt，因此我们不得不考虑不同的解决方案。最后，我们设置 nginx 将所有带有 facebook 用户代理的请求转发到一对专用的后端服务器。如果我们使用 nginx > v0.9.6 我们可以为此做一个很好的正则表达式，但我们没有，所以我们使用了一个映射

```
 map $http_user_agent $fb_backend_http {
             "facebookexternalhit/1.0 (+http://www.facebook.com/externalhit_uatext.php)"
                    127.0.0.1:80;
     } 
```

这对我们很有效；在我们受到重创的几周内，这种请求分区使繁重的流量远离系统的其余部分。

现在对我们来说，它似乎已经基本消失了——我们只是看到了间歇性的峰值。

至于为什么会发生这种情况，我仍然不确定 - 4 月份似乎发生了类似的事件，归因于错误 [http://developers.facebook.com/bugs/409818929057013/](http://developers.facebook.com/bugs/409818929057013/) 但我不知道最近有类似的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:43:54.907

无论 facebook 发明了什么，你肯定需要修复你的服务器，因为它可能会因外部请求而崩溃。

此外，只是在谷歌上的第一次点击：http `facebookexternalhit`: [//www.facebook.com/externalhit_uatext.php](http://www.facebook.com/externalhit_uatext.php)

# mysql - 如何将复合唯一添加到表mysql中的列

> ID：12880457
> 
> 赞同：4
> 
> 时间：2012-10-14T08:18:16.557
> 
> 标签：mysql, phpmyadmin

我有一张桌子：

1.  `user_id int Composite Unique (deal_id + user_id+deal_type)`.
2.  `deal_id int`
3.  `deal_type varchar`.
4.  `created_on datetime`.

这是我的桌子。我想在`user_id`列上创建一个复合唯一性，以便单个用户只能`deal_id`对每个`deal_type`.

如何***在 mysql phpmyadmin***中使复合唯一。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T08:27:38.777

```
ALTER TABLE my_table ADD UNIQUE KEY (user_id, deal_type, deal_id); 
```

# hibernate-search - Hibernate Search 是否加载实体关联，我可以将自由文本查询与本机 SQL 混合使用吗？

> ID：12880459
> 
> 赞同：0
> 
> 时间：2012-10-14T08:18:28.070
> 
> 标签：hibernate-search

```
package example;
...

@Entity
@Indexed
public class Book {

@Id
@GeneratedValue
private Integer id;

@Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
private String title;

@Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
private String subtitle; 
@Field(index = Index.YES, analyze=Analyze.NO, store = Store.YES)
@DateBridge(resolution = Resolution.DAY)
private Date publicationDate;

@IndexedEmbedded
@ManyToMany 
private Set<Author> authors = new HashSet<Author>();

@OneToMany(mappedBy="book")
List<BookPages> bookPages;

} 
```

1）如果搜索结果是 Book.class 类型，结果是否包含 @ManyToOne 对象（bookPages），还是我必须单独加载它们？因为我需要它们来显示结果。

2) 是否可以在搜索中添加原生 sql 子句？因为我需要限制结果，为此我必须加入另一个未在 Book.class 中声明的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:18:44.070

1.  这是一个基本的 Hibernate ORM 问题，与 Hibernate Search 无关。是的，您始终可以通过调用 getter / 访问字段来从一个实体导航到它的关系：根据您的（可配置的）获取策略，它会在加载主实体时“一次性”预加载关系（可能带有JOIN）或按需透明地获取它。但是，此配置对功能没有任何影响，更多的是性能调整选项。
2.  不，您不能将 SQL 与 Hibernate Search（全文）查询混合使用；您可以做的是从映射中的另一个表中公开所需的数据 - 无论如何这将是一个更清晰的映射 - 然后使用 Hibernate Search 注释来确保您需要的所有字段也被索引，以便您可以包含直接在 FullTextQuery 中的限制；fill 的执行速度比任何 SQL 都要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T16:34:37.177

无法将本机 SQL 与休眠搜索查询混合使用，因为如果不迭代至少一个结果，就无法将两个查询的结果相交。

请参阅有关此确切问题的文档参考。 [Hibernate Search - FAQ - 我可以混合使用 HQL 和 Lucene 查询吗？](http://hibernate.org/search/faq/) [http://hibernate.org/search/faq/](http://hibernate.org/search/faq/)

# c# - 单元测试有效字符的最佳实践

> ID：12880460
> 
> 赞同：1
> 
> 时间：2012-10-14T08:18:35.527
> 
> 标签：c#, unit-testing, tdd, vs-unit-testing-framework

假设一个方法接受一个字符串作为输入参数，并且这个字符串只能包含从 1 到 8 的数字和一个破折号（“/”）。

在开发测试驱动时，您将如何编写单元测试来验证该方法是否进行了正确的参数检查？

我的第一个想法是颠倒 ArgumentException 的要求和测试，即有一个数据驱动的单元测试，它使用所有其他可能的字符调用该方法并期望 ArgumentException。然而，……这感觉有点像用大锤敲碎坚果……

有没有针对这种情况的最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T08:32:04.450

> 我的第一个想法是颠倒 ArgumentException 的要求和测试

这是函数应该做的第一件事。如果它是一个公共函数，那么它应该假定它的参数是无效的，除非另有证明。您所说的要求很容易通过正则表达式检查来涵盖 - 如果该正则表达式失败，则抛出 ArgumentException 或 OutOfRangeException。

> 您将如何编写单元测试来验证该方法是否进行了正确的参数检查

你只需要两个重复调用目标函数的测试方法。对于第一个有一堆带有有效参数的调用，并确保检查返回值（如果有）。
对于第二个测试方法会触发一堆无效输入，包括带有特殊字符、大小写等的字符串，无效输入会触发异常，这将导致测试失败（您需要用预期的异常属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:02:02.257

您可以尝试数据驱动单元测试（MSDN：[如何：创建数据驱动单元测试](http://msdn.microsoft.com/en-us/library/ms182527%28v=vs.100%29.aspx)）。

这允许您定义数据源，如 XML、CSV 或数据库表，并将多种可能的输入放入其中。单元测试只编写一次，但对源中的每个数据行执行一次。

您可以填充，例如一个包含一些有效输入字符串的 CSV 文件并对其进行测试，以及另一个包含一些无效字符串的 CSV 文件，并使用测试方法检查`[ExpectedExcetion(typeof(...))]`（或在这种情况下您的代码应该执行的任何操作。）

这很容易实现（参见上面的链接），如果您愿意，您甚至可以随机生成数千种不同格式的可能输入。

# sql-server-2012 - 计算 SSAS 中的新度量

> ID：12880472
> 
> 赞同：1
> 
> 时间：2012-10-14T08:20:55.910
> 
> 标签：sql-server-2012, ssas, business-intelligence

我的 sql server 分析服务 (2012) 项目中有一个多维数据集。我的措施之一是从 ATM 取款。现在我想要一个新的计算方法来显示从今天到最后一天提取资金的增长情况。它是一种动态计算的度量。有什么解决方案可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:12:45.840

您正在寻找的最有可能称为 KPI = 关键绩效指标。[在此处](http://msdn.microsoft.com/en-us/library/ms174538%28v=sql.90%29.aspx)查看有关如何添加所需指标的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T14:28:20.370

您应该使用 KPI 来构建您的度量。

在 Visual Studio 中打开您的 SSAS 项目并双击您的多维数据集。在 KPI 选项卡中有一个面板，其中包含一些使用并行周期的 KPI 样本。

这是创建跨两个时期的营业利润的示例：

```
IIf
( 
  KPIValue( "Gross Profit Margin" ) >
  ( KPIValue( "Gross Profit Margin" ),
    ParallelPeriod
    ( 
       [<<Time Dimension Name>>].[<<Time Hierarchy Name>>].[<<Time Year Level Name>>],
       1,
       [<<Time Dimension Name>>].[<<Time Hierarchy Name>>].CurrentMember
    )
  ), 1, -1
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T14:21:39.077

如果你想根据最后一个值显示增长，例如今天我提款比昨天少 10%，你可以使用 KIP

如果你想显示到目前为止你撤回了多少，你应该使用像 YTD（年初至今）这样的计算器

# routing - 基于真实交通街道数据的边权计算

> ID：12880473
> 
> 赞同：0
> 
> 时间：2012-10-14T08:21:00.080
> 
> 标签：routing, navigation, shortest-path, dijkstra, weighted-average

我目前正在android中开发一个导航系统，我正在使用dijkstra的最短路径算法我的顶点类包含如下所示的成员：

```
-------------------------------------
|                 Vertex            |
-------------------------------------
|    |      |           |           |
| id | name | longitude | latitude  |
------------------------------------- 
```

以及具有如下所示成员的边：

```
---------------------------------------------
|                Edge                       |
---------------------------------------------
|    |      |        |             |        |
| id | name | source | destination | weight |
--------------------------------------------- 
```

由于顶点和边具体基于真实数据：交叉点为顶点，一个交叉点与另一个交叉点为边，简单地说，我的应用程序的整个图表就是我所在城市的道路网络。

我的问题是，我仍然无法提出一种算法或算术方程来计算基于一个交叉点到另一个交叉点的距离以及它到达一个交叉点到另一个交叉点的时间的边权重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:13:38.080

这取决于您要优化的内容（您可以让用户选择）：

如果你想要最短的路线，一条边的成本就是街道的长度。

如果您想要最快的路线，成本将是预期的街道旅行时间。

如果您想要在油耗方面最经济的路线，成本将是“街道长度/每加仑英里数（预期速度）

燃油经济性因汽车而异，但您可以假设经济性（以每加仑英里数为单位）随着速度线性增长，直到达到一定速度，然后开始下降^([[维基百科](http://en.wikipedia.org/wiki/File%3aFuel_economy_vs_speed_1997.png)])。因为你总是可以比最大速度慢。速度，假设一个恒定的效率。`(miles/gallon) / (miles/hour) = (hours/gallon)`，因此成本大约与时间成正比，并以汽车的最有效速度（可由用户输入）应用速度限制。

如果您有准备好的拥堵数据源，请使用它来确定预期的汽车速度。

通过观察汽车来测量预期行驶时间的一种方法是对过去 {interval} 离开街道的所有汽车取平均值（小时？分钟？只有最后一辆车？最后十辆车？）。但是，这并不会很快导致拥堵。你可以取所有汽车的平均速度仍然存在的速度。但是，这会高估红绿灯的效果。

*你可以取过去一小时内进入*街道的所有汽车的平均速度。`average(distance traveled/time spent)`或`average(distance traveled)/average(time spent)`。如果街道没有生命，只需限制其速度或使用更长的测量间隔。

请记住，两个方向的预期速度可能不同（取决于您的数据源），因此请始终使用成对的有向边并分别在每个方向上进行测量。

[1] [http://en.wikipedia.org/wiki/File:Fuel_economy_vs_speed_1997.png](http://en.wikipedia.org/wiki/File:Fuel_economy_vs_speed_1997.png)

# java - 如何从 JOptionPane 返回到主菜单（JFrame）

> ID：12880475
> 
> 赞同：0
> 
> 时间：2012-10-14T08:21:15.137
> 
> 标签：java, swing, jframe, joptionpane

我用Java做了一个小数字猜谜游戏。我的主 JFrame（主菜单）有三个 JButton，播放、声音和退出。

按下播放按钮开始我的游戏，一系列 JOptionPanes 出现要求用户输入数字。它工作正常，游戏运行正常。但是当我按播放按钮玩游戏时，我无法按退出或声音按钮或游戏中的任何其他按钮。我什至不能按下主 JFrame 窗口的 X（关闭）按钮，直到我完全玩游戏，或者关闭 JOptionPane 从而关闭当前游戏。

当我已经按下声音按钮开始背景声音时，我可以按下退出按钮。当我已经按下声音按钮时，我可以按下播放按钮。

有什么建议么？

我的问题是，假设我正在使用 JOptionPane 制作一个小游戏，当 JOptionPane 已经打开时，如何按下我的主 JFrame（主菜单）上存在的 JButton

这是我的SSCCE

```
import javax.swing.*;
import java.awt.event.*;

class Test2 {
    static JFrame frame;
    static JPanel jp;

    static JButton b1;
    static JButton b2;
    static JButton b3;

    public static void main(String[] args)  {
        final long startTime = System.currentTimeMillis();
        frame=new JFrame("Game ");
        jp=new JPanel();
        b1=new JButton("Play");
        b1.addActionListener (new Action());
        b2=new JButton("Exit");
        b2.addActionListener (new Action1());
        b3=new JButton("Sound");
        b3.addActionListener (new Action2());

        jp.add(b1);
        jp.add(b2);
        jp.add(b3);

        frame.add(jp);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300,400);
        frame.setVisible(true);
    }

    static class Action implements ActionListener { // For (game) Play button
        public void actionPerformed (ActionEvent e) {
            Thread  bb=new Thread(new Runnable(){
                public void run(){
                    new Test2().start();
                }});
            bb.setPriority(1);
            bb.start();
        }
    }

    static class Action1 implements ActionListener { // For Exit button
        public void actionPerformed (ActionEvent e) {

            Thread  tt=new Thread( new Runnable(){
                public void run(){
                    int response = JOptionPane.showConfirmDialog(
                            null,
                            "Exit application?",
                            "Confirm",
                            JOptionPane.YES_NO_OPTION,
                            JOptionPane.QUESTION_MESSAGE);
                    if (response == JOptionPane.NO_OPTION) {

                    }
                    else if (response == JOptionPane.YES_OPTION) {
                        System.exit(0);
                    }
                }
            });
            tt.setPriority(10);
            tt.start();
        }
    }

    static class Action2 implements ActionListener { //For Sound Button
        public void actionPerformed (ActionEvent e)  {

            try {
                /* Code to play sound */
            }
            catch(Exception ex) {
                ex.printStackTrace();
            }
        }
    }

    void start() { //   sample  game
        JOptionPane.showMessageDialog(null,"Step 1  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 2  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 3  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 4  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 5  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 6  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 7  ..click OK  to continue");
        JOptionPane.showMessageDialog(null,"Step 8  ..click OK  to continue");
    }
} 
```

在我的新代码中，只有 start() 方法发生了变化

```
void start()                          //   sample  game
{

JOptionPane pane = new JOptionPane();
 // Configure via set methods
dialog = pane.createDialog(null,"exp 1");
 // the line below is added to the example from the docs

dialog.setSize(300, 200);

 dialog.setModal(false); // this says not to block background components

JButton nextButton = new JButton("Go to Dialog2");

dialog.add(nextButton);
nextButton.setBounds(25,25,20,20);

 dialog.show();

JOptionPane pane2 = new JOptionPane();
 // Configure via set methods
 dialog2 = pane2.createDialog(null,"exp 2");
 // the line below is added to the example from the docs
 dialog2.setModal(false); // this says not to block background components
// dialog2.show();

nextButton.addActionListener(new ActionListener() {
 public void actionPerformed(ActionEvent arg0) {

dialog2.setVisible(true);
dialog.setVisible(false);

 }
});

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T16:22:41.493

不幸的是，JOptionPane 是一个模态对象，在通过所有对话框之前不能离开它们。从文档中，**所有对话框都是模态的。每个 showXxxDialog 方法都会阻塞当前线程，直到用户交互完成。**

您可以通过创建非模态对话框来解决您的问题。 [创建非模态对话框的示例](https://stackoverflow.com/questions/5706455/can-i-use-a-java-joptionpane-in-a-non-modal-way)

取而代之的是，**JDialog**类似于**JFrame**，你可以在里面添加 Button，事件监听器。 [一个简单的例子](http://chopapp.com/#gmhpocwg)

您可以为自己创建一个自定义`JDialog`类:)

有 [一个定制的例子`JDialog`](http://chopapp.com/#uqu8a4y2)

我编辑了你的代码，就像：

```
void start() { // sample game
    MyDialog dialog7 = new MyDialog(null);
    MyDialog dialog6 = new MyDialog(dialog7);
    MyDialog dialog5 = new MyDialog(dialog6);
    MyDialog dialog4 = new MyDialog(dialog5);
    MyDialog dialog3 = new MyDialog(dialog4);
    MyDialog dialog2 = new MyDialog(dialog3);
    MyDialog dialog1 = new MyDialog(dialog2);

    dialog1.setVisible(true);
} 
```

# c# - 根据一定的标准判断一行代码是否有效

> ID：12880478
> 
> 赞同：2
> 
> 时间：2012-10-14T08:21:32.333
> 
> 标签：c#, .net, regex, string

给定一行代码，我需要根据某些标准确定它是否有效。

1.  如果该行包含任何特殊关键字。关键字以美元符号开头。例如，`$SREAD`这里是关键字

    ```
    tempval = $SREAD(13,"B14.OATEMP"); 
    ```

2.  我需要在包含关键字的方法中获取一些参数。然后将参数计数与应用程序内的常量值进行比较。

在这里确定有效性的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:28:12.473

试试这个正则表达式：

```
\$keyword\(([^,\)]+,?)+\) 
```

**更新**：和你的代码：

```
var inputString = "tempval = $keyword(13,\"B14.OATEMP\");";
inputString = Regex.Replace(inputString, "\".*?\"", "\"\"");

var count = 0;

if (Regex.IsMatch(inputString, @"\$keyword\(([^,\)]+,?)+\)"))
    count = Regex.Matches(inputString, @"\$keyword\(([^,\)]+,?)+\)")[0]
                 .Groups[1].Captures.Count; 
```

# php - 带有 ID 和描述的 PHP 数组 - 随机化数组并打印列表

> ID：12880480
> 
> 赞同：2
> 
> 时间：2012-10-14T08:21:39.017
> 
> 标签：php, arrays, multidimensional-array, shuffle

因为我不是一个 php 人，所以我需要帮助来创建一个包含 YouTube 视频和每个视频描述的数组。

现在我有一个只保存视频 ID 的数组。向每个 ID 添加描述的最佳方法是什么，以便我可以轻松地遍历数组并在下面创建所需的输出。

```
<?php
    $vids = array(
        "OOWvNbU6ciLg",
        "5itTJabAJfps",
        "jFA8Tesmames",
        "Trz9Y01xx1TY",
        "mMQGcIrlyseU",
        "qGrlQNvqqL14",
        "QymnLbSpJ7lA",
        "jFAh8Tesmmes",
        "5itTJtbAJfps",
        "OOWvNpU6ciLg"
    );
?> 
```

我最终想要的是一个视频列表，下面有视频描述。而且我希望在创建列表之前对我的数组进行洗牌，因此每次创建列表时我都有不同的顺序。

**HTML**

```
<li class="video">
    <figure>
        <iframe width="100%" height="200px" src="http://www.youtube.com/embed/OxXAT2epfEYA?HD=1;rel=0;showinfo=0" frameborder="0" allowfullscreen></iframe>
        <figcaption>Description of the video</figcaption>
    </figugre>
</li> 
```

定义数组的最佳方法是什么，以便我可以对其进行洗牌，然后循环遍历数组并使用嵌入代码和下面的描述打印每个`<li>`项目。`iframe`

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:52:09.947

将有关视频的所有信息保存在关联数组中：

```
$single_video = array(
    "id" => "OOWvNbU6ciLg",
    "description" => "Video descr"
); 
```

现在构建这些视频的数组：

```
$vids = array(
    array(
        "id" => "OOWvNbU6ciLg",
        "description" => "Video descr"
    ),
    array(
        "id" => "5itTJabAJfps",
        "description" => "Other video descr"
    ),
); 
```

现在您可以轻松地对其进行随机播放，然后循环：

```
$vids = array();
shuffle($vids);
foreach($vids as $video){
    //$video here is associative array with single video
    echo "{$video['id']} - {$video['description']}";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:00:20.753

只是在我的脑海中想你可以通过将 ID 和描述放在数组中来创建一个关联数组。

```
vidArray = array(
videoId1 => 'This is the description for video 1.',
videoId2 => 'This is the description for video 2',
etc. ); 
```

然后，您可以使用 for each 语句循环遍历数组并使用数组元素信息创建 iframe。

PHP 也有一个内置的 shuffle 函数来随机打乱一个数组。 [阵列洗牌](http://us1.php.net/manual/en/function.shuffle.php)

# php - 为什么php中的“未定义+ x = x”？

> ID：12880487
> 
> 赞同：1
> 
> 时间：2012-10-14T08:22:33.760
> 
> 标签：php, types, undefined

如果我们有这个代码

```
echo $a + 1; 
```

php 返回：`Notice: Undefined variable: a in...`还有`1`

这是有点不清楚的情况吧？如果`$a`是未定义的（`$a`实际上是未定义的），为什么是`undefined + 1`= `1`？结果一定也`undefined`对吗？听听你的意见很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:25:24.053

不存在的变量的默认值为`null`。`null`转换为数字是`0`. `0`+ 一个数字就是这个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:25:26.753

$a + 1 给 php 假设 $a 是 int 类型。int 的默认值不能未定义，为 0。则 0 + 1 = 1

# pentaho - 匿名访问 pentaho

> ID：12880494
> 
> 赞同：0
> 
> 时间：2012-10-14T08:22:58.250
> 
> 标签：pentaho

我想在没有登录的情况下访问我的 pentaho 用户控制台。这会发生吗？如何？

我的意思是用户控制台是登录后出现的页面。如下面的网址：

```
http://localhost:8080/pentaho/home 
```

我已经按照本[教程](http://wiki.pentaho.com/display/ServerDoc2x/Opening+Up+Some+Action+Sequences+for+Anonymous+Access)进行操作，但我无法继续进行第三步。错误提示

> 请求的资源 () 不可用。

有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:37:05.430

该教程可能有点过时了。以下是 Pentaho 安全指南的最新说明：http: //infocenter.pentaho.com/help/index.jsp?topic=%2Fsecurity_guide% [2Ftask_removing_security.html](http://infocenter.pentaho.com/help/index.jsp?topic=%2Fsecurity_guide%2Ftask_removing_security.html)

我自己没有启用匿名访问，但对角色和 ACL 进行了其他自定义。我查看了这些说明，它们看起来合理且完整。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T09:49:19.223

按照本指南中的步骤有一个选项：[https ://help.pentaho.com/Documentation/6.1/0P0/150/040](https://help.pentaho.com/Documentation/6.1/0P0/150/040)

该文档可能会导致混乱，但它确实有效。

基本上你应该得到的最终结果是：

*   输入 pentaho URL 时使用 AnonymousUser 自动登录
*   AnonymousUser 只有读取权限
*   如果要编辑，请输入登录 URL 并使用管理员凭据

# c++ - 如何使用 x264 与 ffmpeg 进行编码？

> ID：12880495
> 
> 赞同：0
> 
> 时间：2012-10-14T08:22:59.357
> 
> 标签：c++, encoding, ffmpeg, x264, libx264

我尝试使用 ffmpeg 对视频进行编码/但它在 AVCodecContext 和 AVCodec 的初始化时失败。我所做的：

```
_codec = avcodec_find_encoder(CODEC_ID_H264);
_codecContext = avcodec_alloc_context3(_codec);
_codecContext->coder_type = 0;
_codecContext->me_cmp|= 1;
_codecContext->me_method=ME_HEX;
_codecContext->me_subpel_quality = 0;
_codecContext->me_range = 16;
_codecContext->gop_size = 12;
_codecContext->scenechange_threshold = 40;
_codecContext->i_quant_factor = 0.71;
_codecContext->b_frame_strategy = 1;
_codecContext->qcompress = 0.5;
_codecContext->qmin = 2;
_codecContext->qmax = 31;
_codecContext->max_qdiff = 4;
_codecContext->max_b_frames = 3;
_codecContext->refs = 3;
_codecContext->trellis = 1;
_codecContext->width = format.biWidth;
_codecContext->height = format.biHeight;
_codecContext->time_base.num = 1;
_codecContext->time_base.den = 30;
_codecContext->pix_fmt = PIX_FMT_YUV420P; 
_codecContext->chromaoffset = 0;
_codecContext->thread_count =1;
_codecContext->bit_rate = (int)(128000.f * 0.80f);
_codecContext->bit_rate_tolerance = (int) (128000.f * 0.20f);
int error = avcodec_open2(_codecContext, _codec, NULL);
if(error<   )
{
    std::cout<<"Open codec fail. Error "<<error<<"\n";
    return NULL;    
} 
```

以这种方式，ii 在 avopen_codec2() 上失败：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xae1fdb70 (LWP 30675)]
0xb2eb2cbb in x264_param_default () from /usr/lib/libx264.so.120 
```

如果我评论所有 AVCodecContext 参数设置 - 我有：

```
[libx264 @ 0xac75edd0] invalid width x height (0x0) 
```

并且 avcodec_open 返回负值。我正在做的哪些步骤是错误的？

感谢您的帮助（ffmpeg 0.10 && libx264 昨天的每日快照）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T23:47:02.380

根据我的经验，在初始化编解码器时，您应该尽可能少地给 FFMPEG 提供信息。这可能看起来违反直觉，但这意味着 FFMPEG 将使用它的默认设置，这比您自己的猜测更有可能起作用。看看我会在下面包括什么：

```
AVStream *st;
m_video_codec = avcodec_find_encoder(AV_CODEC_ID_H264);
st = avformat_new_stream(_outputCodec, m_video_codec);
_outputCodecContext = st->codec;
_outputCodecContext->codec_id = m_fmt->video_codec;
_outputCodecContext->bit_rate = m_AVIMOV_BPS;           //Bits Per Second 
_outputCodecContext->width    = m_AVIMOV_WIDTH;         //Note Resolution must be a multiple of 2!!
_outputCodecContext->height   = m_AVIMOV_HEIGHT;        //Note Resolution must be a multiple of 2!!
_outputCodecContext->time_base.den = m_AVIMOV_FPS;      //Frames per second
_outputCodecContext->time_base.num = 1;
_outputCodecContext->gop_size      = m_AVIMOV_GOB;      // Intra frames per x P frames
_outputCodecContext->pix_fmt       = AV_PIX_FMT_YUV420P;//Do not change this, H264 needs YUV format not RGB 
```

与之前的答案一样，这里是 FFMPEG 库将 RGB 帧编码为 H264 视频的工作示例：

[http://www.imc-store.com.au/Articles.asp?ID=276](http://www.imc-store.com.au/Articles.asp?ID=276)

不过，对您的代码有一个额外的想法：

*   你有没有像下面这样调用注册？

    avcodec_register_all();

    av_register_all();

    如果您没有在代码开头附近调用这两个函数，那么您对 ​​FFMPEG 的后续调用将失败，并且您很可能会出现段错误。

看看链接的示例，我在 VC++2010 上对其进行了测试，它运行良好。

# ruby - 使用 Net::SMTP 时无法调用方法`start_tls`

> ID：12880496
> 
> 赞同：1
> 
> 时间：2012-10-14T08:23:02.190
> 
> 标签：ruby, smtp

我有以下代码：

```
require 'net/smtp'

#This method prints the method "starttls"
p Net::SMTP.instance_methods

#And here I get an error of unknown method
Net::SMTP.starttls

Net::SMTP.start('smtp.gmail.com', 587, 'mypassword') do |smtp|
smtp.open_message_stream('from@example.com', ['to@example.com']) do |f|
  f.puts 'From: from@example.com'
  f.puts 'To: to@example.com'
  f.puts 'Subject: My Subject!'
  f.puts 'Test subject.'
end 
```

在显示方法 starttls 在 Net::SMTP.instance_methods 的实例方法列表中可用后，我收到以下错误：

```
["starttls", "ready", "enable_starttls", "ssl?", "open_timeout", "capable_cram_md5_auth?", "tls?", "capable_plain_auth?", "data", "inspect", "disable_starttls", "rcptto", "starttls_auto?", "mailfrom", "open_timeout=", "capable_auth_types", "auth_cram_md5", "authenticate", "quit", "send_message", "rcptto_list", "set_debug_output", "esmtp=", "starttls?", "esmtp", "auth_plain", "debug_output=", "starttls_always?", "auth_login", "started?", "read_timeout", "capable_starttls?", "enable_tls", "finish", "open_message_stream", "enable_starttls_auto", "send_mail", "start", "address", "port", "sendmail", "esmtp?", "disable_tls", "helo", "read_timeout=", "disable_ssl", "capable_login_auth?", "ehlo", "enable_ssl", "handle_different_imports", "include_class", "java_kind_of?", "java_signature", "methods", "freeze", "extend", "==", "nil?", "object_id", "method", "tainted?", "is_a?", "instance_variable_get", "instance_variable_defined?", "instance_variable_set", "hash", "display", "send", "private_methods", "enum_for", "equal?", "com", "to_java", "type", "instance_of?", "id", "taint", "class", "java_annotation", "instance_variables", "to_s", "org", "to_a", "__send__", "=~", "protected_methods", "__id__", "java_implements", "tap", "frozen?", "java", "respond_to?", "instance_eval", "===", "java_package", "untaint", "clone", "java_name", "to_enum", "singleton_methods", "eql?", "instance_exec", "dup", "kind_of?", "java_require", "javax", "public_methods"]

NoMethodError: undefined method `starttls' for Net::SMTP:Class 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:36:36.047

我认为您的问题是您试图将“starttls”称为静态方法而不是实例方法。请先定义一个新的 SMTP 客户端，然后调用它的“starttls”方法。

```
smtp_client = Net::SMTP.new('address')
smtp_client.starttls 
```

# java - 测试一个java类

> ID：12880497
> 
> 赞同：1
> 
> 时间：2012-10-14T08:23:31.307
> 
> 标签：java, exception, exception-handling

这里有什么问题？我只是试图根据构造函数中的 if 语句捕获自定义异常，整个代码

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package question3_test;

/**
 *
 * @author jackandjill
 */
public class Triangle2 
{
    private int side1, side2, side3;
    private  double area;
    private  String message;    

    public  int getSide1()
    {
        return side1;
    }

    public void setSide1(int s1)
    {
        side1 = s1;
    }

    public  int getSide2()
    {
        return side2;
    }

    public void setSide2(int s2)
    {
        side2 = s2;
    }

    public  int getSide3()
    {
        return side3;
    }

    public void setSide3(int s3)
    {
        side3 = s3;
    }

   public Triangle2(int a,int b,int c) throws InvalidValueException
   {
    setSide1(a);
    setSide2(b);
    setSide3(c);

    try
    {
         if (!(side1 + side2 > side3) && (side2 + side3 > side1)&& (side1 + side3 > side2))

                 throw new InvalidValueException("Invalid Value");
    }
    catch (InvalidValueException excep)
    {
        message = excep.getMessage();
        //throw new InvalidValueException(message);
    }

    public double findArea(int side_1, int side_2, int side_3)
    {
        int s, a, b,c;
        a = side_1;
        b = side_2;
        c = side_3;
        s = ((a + b + c)/2);
        area = Math.sqrt(s*(s-a)*(s-b)*(s-c));
        //area =
        return area;
    }
   }
} 
```

问题出在我的 catch 语句中，它带有红色下划线，并在相应的 try 语句中表示从未抛出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:25:52.473

您不能像下面的代码那样抛出异常类：-

```
throw InvalidValueException; 
```

你必须为你的异常**创建一个新实例**，然后抛出它： -

```
throw new InvalidValueException(); 
```

但是，您的代码中仍然存在一些逻辑问题。你已经声明你`Exception`是 throws，但同时，你在`catch`块本身中处理它。为什么要这么做？

**更新**： -

根据您修改后的帖子： -

```
try
{
   if (!(side1 + side2 > side3) && (side2 + side3 > side1) && 
        (side1 + side3 > side2))

       message = "Invalid Triangle";

} catch (InvalidValueException e) {
    message = "Invalid Traingle";
} 
```

由于您无处可在您`try block`的 Exception 中抛出任何异常，因此`catch block`会抱怨..

如果你想要`throw`一个异常并且`catch`它就位，像这样使用它： -

```
public Triangle2(int a,int b,int c) throws InvalidValueException

      if (!(side1 + side2 > side3) && (side2 + side3 > side1) && 
            (side1 + side3 > side2))

           throw new InvalidValueException("Invalid Value")
} 
```

并且假设您正在从您的`main`方法中使用它，您应该在`try-catch`那里有一个块来处理构造函数中声明的异常。：-

```
public static void main(String[] args) {
    Triangle triangle = null;
    try {
         triangle = new Triangle(2, 3, 4);
    } catch (InvalidValueException e) {
        e.printStackTrace();
    }
} 
```

如果您只在方法中处理异常，则不应在方法声明中声明它。但如果您不处理它，则必须声明要抛出该异常。

**一个异常应该被处理，或者声明被抛出**（*在这种情况下，你应该抛出那个异常*），**但永远不要同时**

有关异常的更多信息，请参阅本教程：- [http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:29:01.923

在您使用异常的方式上，您的代码存在一些混淆。

1.  在`try`块内，您永远不会抛出异常，而是尝试在下面捕获它。
2.  您声明您的方法抛出异常，但方法的主体从不抛出它。

* * *

```
public Triangle2(int a,int b,int c) 
throws InvalidValueException // declared, but never thrown!
{
  try
  {
    if (!(side1 + side2 > side3) && (side2 + side3 > side1)&& (side1 + side3 > side2))
      message = "Invalid Triangle";
  }
  catch (InvalidValueException excep)  // caaught, but never thrown in try body!
  {
    message = "Invalid Triangle";
  }
} 
```

这是您应该编写它的方式，实际上要简单得多：

```
public Triangle2(int a,int b,int c) throws InvalidValueException
{
  setSide1(a);
  setSide2(b);
  setSide3(c);
  if (!(side1 + side2 > side3) && (side2 + side3 > side1)&& (side1 + side3 > side2))
    throw new InvalidValueException("Invalid Triangle");
} 
```

您不应该在抛出异常的同一上下文中捕获异常：**使用构造函数**的地方,`new Triangle2(a,b,c)`是捕获的（最早合理的）地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:29:19.093

`exception`您应该从 catch 块重新抛出您的自定义。

```
catch (InvalidValueException excep)
{
    message = "Invalid Triangle";
    throw new InvalidValueException(message);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T08:33:26.437

看起来像是`InvalidValueException`一个已检查的异常（编译时异常），并且您在 catch 块中的代码不会引发该异常。

您可以通过首先检查方法中的值并在其中任何一个无效时立即抛出异常来克服该错误消息（以有意义的方式）。

或者，如果可能，您也可以将其`RuntimeException`改为 a。

# php - cURL 变量错误

> ID：12880499
> 
> 赞同：0
> 
> 时间：2012-10-14T08:23:42.773
> 
> 标签：php, forms, curl, submit

我正在尝试使用 cURL 将表单从一个站点提交到另一个站点。但是它给了我一些 $fields_string 变量错误（未定义的变量）。

这是我第一次使用 cURL 并且对此没有太多了解。所以请指导我解决这个我可以成功提交表单的问题。

**信息：**我现在正在 localhost 上工作，并尝试在 localhost 另一个网站上提交表单进行测试。

这是我的代码

```
<?php

    $url = 'http://localhost/qa/ask';
    $fields = array(

                'title'=>urlencode($_POST['title']),
                'content'=>urlencode($_POST['content']),
                'tags'=>urlencode($_POST['tags']),
                'q_notify'=>urlencode($_POST['q_notify']),

            );

    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');    

    $ch = curl_init();

    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

    $result = curl_exec($ch);

    curl_close($ch);
?> 
```

这是我的 html 表单

```
<form action="submit.php" method="POST"> 
    <INPUT NAME="title" TYPE="text" CLASS="qa-form-tall-text custom-ask-text" value="" placeholder="Ask your question" autocomplete="off" role="textbox"> 

    <TEXTAREA NAME="content" CLASS="qa-form-tall-text"></TEXTAREA>

    <INPUT NAME="tags" TYPE="text" CLASS="qa-form-tall-text custom-ask-text" value=""> 

    <label><input type="checkbox" class="qa-form-tall-checkbox" checked="" value="1" name="q_notify">Email me if my question is answered or commented on</label>

    <INPUT CLASS="custom-ask-submit" TYPE="submit" value="ask"> 

    <INPUT TYPE="hidden" NAME="doask1" VALUE="1"> 
</form> 
```

谢谢

**编辑：新代码**

```
<?php

$url = 'http://localhost/qa/ask';
$fields = array(
            'title'=>$_POST['title'],
            'content'=>$_POST['content'],
            'tags'=>$_POST['tags'],
            'q_notify'=>$_POST['q_notify'],

        );

$fields_string = '';
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }

$ch = curl_init();

curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields);

$result = curl_exec($ch);

curl_close($ch);

?> 
```

如果一切都正确，那么我分配的网址可能是错误的。我正在使用 question2answer.org 脚本，并希望在我的用户可以从我的其他网站提交表单/问题的地方制作表单。

编辑：@GBD

```
Curl error: array(22) { ["url"]=> string(23) "http://localhost/qa/ask" ["content_type"]=> string(24) "text/html; charset=utf-8" ["http_code"]=> int(200) ["header_size"]=> int(443) ["request_size"]=> int(211) ["filetime"]=> int(-1) ["ssl_verify_result"]=> int(0) ["redirect_count"]=> int(0) ["total_time"]=> float(0.141) ["namelookup_time"]=> float(0) ["connect_time"]=> float(0.016) ["pretransfer_time"]=> float(0.016) ["size_upload"]=> float(87) ["size_download"]=> float(16130) ["speed_download"]=> float(114397) ["speed_upload"]=> float(617) ["download_content_length"]=> float(-1) ["upload_content_length"]=> float(87) ["starttransfer_time"]=> float(0.141) ["redirect_time"]=> float(0) ["certinfo"]=> array(0) { } ["redirect_url"]=> string(0) "" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:28:05.850

您要附加到`$fields_string`;

```
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; } 
```

没有`$fields_string`先设置为起始值。只需先将其设置为空字符串，错误就会消失；

```
$fields_string = '';
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:38:13.363

不要为帖子字段构建自己的字符串。CURL 完全能够获取 PHP 数组并进行自己的编码。`curl_setopt($ch, CURLOPT_POSTFIELDS, $fields)`是你所需要的全部。

# python - Python，处理动画gif保存动画参数

> ID：12880510
> 
> 赞同：2
> 
> 时间：2012-10-14T08:25:54.987
> 
> 标签：python, imagemagick, python-imaging-library, animated-gif, pythonmagick

是否可以在 Python 中处理（扩展、添加背景和“原始图像下方”的一些文本）动画 gif？我相信我应该分别处理每一帧（这是一个性能问题，但总比没有好）但我根本找不到**任何**工作代码。

PIL 对动画 gif 的支持似乎非常有限

PythonMagick - 好吧，也许它支持但**根本没有文档**

魔杖 - 似乎不支持遍历帧......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:07:42.963

**更新**(2013-06-18)：Wand 0.3 现在提供您需要的[序列功能](http://docs.wand-py.org/en/0.3-maintenance/guide/sequence.html)。

有一个[补丁](https://github.com/dahlia/wand/pull/88)可以为 Wand 修复它。这最终将合并到上游，但您目前可以使用此分支。

# java - 从另一个更改 jpanel 的颜色

> ID：12880512
> 
> 赞同：2
> 
> 时间：2012-10-14T08:26:13.300
> 
> 标签：java, swing, colors, background, jpanel

我有一个由两个组成的框架 `JPanels`

`Panel1`包含一个按钮，当单击该按钮时，我希望 panel2 更改颜色并变为红色，但这并没有发生

因此，有关如何从另一个面板更改面板颜色的任何帮助和解释

```
 public class MyForm extends JFrame {
            public MyForm() {
    // TODO Auto-generated constructor stub
    super();
    // setLayout(new FlowLayout());
    Panel1 panel1 = new Panel1();
    add(panel1, BorderLayout.NORTH);

    Panel2 panel2 = new Panel2();
    add(panel2, BorderLayout.CENTER);
}

class Panel1 extends JPanel {

    public Panel1() {
        // TODO Auto-generated constructor stub

        JButton btn = new JButton("Change Color");
        add(btn);
        btn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                System.out.println("Sqsq");
                Panel2 panel2 = new Panel2();
                panel2.setBackground(Color.red);
                panel2.repaint();

            }
        });
    }
}

class Panel2 extends JPanel {
    public Panel2() {
        // TODO Auto-generated constructor stub
        super();
        setBackground(Color.black);

    }

    @Override
    protected void paintComponent(Graphics g) {
        // TODO Auto-generated method stub
        super.paintComponent(g);
    }
}

public static void main(String[] args) {
    MyForm form = new MyForm();
    // form.setLocationRelativeTo(null);
    form.setSize(500, 500);
    form.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    form.setVisible(true);

}
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T08:31:45.463

首先，在您的`btn` `actionPerformed`方法中，您正在创建一个**新** `Panel2`的引用，它与添加到框架中的引用不同，因此，什么都不会改变......

您需要传递`Panel1`并引用要更新的组件...

```
class Panel1 extends JPanel {

    private JComponent changeMe;

    public Panel1(JComponent changeMe) {
        this.changeMe = changeMe;
        // TODO Auto-generated constructor stub

        JButton btn = new JButton("Change Color");
        add(btn);
        btn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                System.out.println("Sqsq");
                if (changeMe != null) {
                    changeMe.setBackground(Color.red);
                    changeMe.repaint();
                }

            }
        });
    }
} 
```

您可能需要请求重新绘制父容器，但看看这是怎么回事......

# iphone - 在开始时添加滚动条，而不是在第一次触摸之后

> ID：12880513
> 
> 赞同：0
> 
> 时间：2012-10-14T08:26:50.977
> 
> 标签：iphone, objective-c, uiscrollview, scrollbar

我正在显示`webView`, 只有在触摸它并向下滚动页面后`scroll bar`才会出现。

如何在开始时自动显示`webView`设置，`scroll bar`以便显示它，并且是否可以在代码中`objective c`而不是在`HTML`代码中控制他的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:57:25.653

为了显示指标，您可以使用以下技巧：

1.  实施`webViewDidFinishLoad`和使用此方法`flashScrollIndicators`：

    ```
    -(void)webViewDidFinishLoad:(UIWebView *)webView {
        [webView.scrollView flashScrollIndicators];
    } 
    ```

2.  使用此类别显示指标：

    ```
    #define noDisableVerticalScrollTag 836913

    @implementation UIImageView (ForScrollView)

    - (void) setAlpha:(float)alpha {

    if (self.superview.tag == noDisableVerticalScrollTag) {
        if (alpha == 0 && self.autoresizingMask == UIViewAutoresizingFlexibleLeftMargin) {
            if (self.frame.size.width < 10 && self.frame.size.height > self.frame.size.width) {
                UIScrollView *sc = (UIScrollView*)self.superview;
                if (sc.frame.size.height < sc.contentSize.height) {
                    return;
                }
            }
        }

        if (alpha == 0 && self.autoresizingMask == UIViewAutoresizingFlexibleTopMargin) {
            if (self.frame.size.height < 10 && self.frame.size.height < self.frame.size.width) {
                UIScrollView *sc = (UIScrollView*)self.superview;
                if (sc.frame.size.width < sc.contentSize.width) {
                    return;
                }
            }
        }
    }

    [super setAlpha:alpha];
    }
    @end 
    ```

3.  然后，给你`UIWebView`的标签是这样的：

    ```
    [webViews.scrollView setTag:noDisableVerticalScrollTag]; 
    ```

就是这样，页面加载完成后，指示器将保留在屏幕中。

对于颜色问题，您的意思是更改指示器颜色吗？

# c++ - 覆盖迭代器的 operator*()

> ID：12880515
> 
> 赞同：2
> 
> 时间：2012-10-14T08:27:08.713
> 
> 标签：c++, iterator

假设我有一些用户定义的复杂结构，比如

```
struct usrStruct{
     double a;
     T1 b;
     T2 c;
     /* and so on...*/
} 
```

它用作 std::vector、std::list 或任何*可迭代*对象的基本元素。

假设`std::vector<usrStruct>`通过迭代器传递给我的函数

```
 template<class InputIterator>  
  T myFoo( InputIterator first, InputIterator last ){ /*...*/ }. 
```

**问**：有没有一种标准的方法来覆盖`operator*()`, （在 `InputIterator`这种情况下`std::vector<usrStruct>::iterator`），以便 与成员*交互*？`myFoo`*`a`*

 *即，这样

```
 *first == (*first).a; 
```

因此与?的整个定义*正交*`myFoo`工作*`usrStruct`*

 *谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:22:46.567

您可以创建一个`iterator`基于`vector::iterator`双值并将其反映为双值的新值，这非常简单：

```
template< class BaseIterator >
struct custom_iterator :
    std::iterator<std::iterate_traits<BaseIterator>::iterator_category, double>
{
public:
    typedef std::iterator<std::iterate_traits<BaseIterator>::iterator_category, double>
        base_t;
    typedef typename base_t::reference reference;
public:
    custom_iterator( BaseIterator it ) : m_it( it ) {}
public:
    reference operator*() const {
        return my_it->a;
    }
    custom_iterator& operator++ () {++m_it; return *this;}
    custom_iterator operator++ (int) {
        custom_iterator tmp( *this );
        ++m_it;
        return *this;
    }
    bool operator==( custom_iterator const& rhs ) const {
        return m_it == rhs.m_it;
    }
private:
    BaseIterator m_it;
}; 
```

现在您可以将其用作`myFoo( custom_iterator(v.begin()), custom_iterator(v.end()) )`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:37:43.880

不，你不能那样做。您可以使您的结构隐式转换为双精度（通过`operator double`）。或者，您可以通过重载`operator==(usrSruct,double)`和/或`operator==(double,usrStruct)`.**

# javascript - javascript获取样式和增量

> ID：12880524
> 
> 赞同：0
> 
> 时间：2012-10-14T08:28:15.710
> 
> 标签：javascript, css, attributes, onclick, increment

我正在尝试制作一个滑块来更改外部 css onclick 中的 margin-left 属性。所以我需要获取属性，然后设置新属性。

这是我的代码：

```
<style>
#divName
 {
  margin-left:20px;
 }
</style>

    <script language="javascript" type="text/javascript">  

                var x = document.getElementById(divName);

            if (x.currentStyle)
            {
                var y = x.currentStyle[marginLeft];
            }
            else (window.getComputedStyle)
            {
                var y = document.defaultView.getComputedStyle(x,null).getPropertyValue(marginLeft);
            }

                y = y + 20;

                document.getElementById(divName).style.marginLeft = y .'px';

    </script> 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:41:27.367

在 Javascript 中，`.`运算符不连接字符串。

请改用`+`运算符：

```
document.getElementById(divName).style.marginLeft = y + 'px'; 
```

您可能还需要`marginLeft`作为字符串而不是名称传递（除非范围内有一个变量被命名`marginLeft`并设置为`"marginLeft"`）：

```
var y = x.currentStyle["marginLeft"]; 
```

和：

```
var y = document.defaultView.getComputedStyle(x, null).getPropertyValue("marginLeft"); 
```

# javascript - 如果浮点数中只有一个数据点，如何显示日期标签？

> ID：12880525
> 
> 赞同：2
> 
> 时间：2012-10-14T08:28:23.237
> 
> 标签：javascript, flot

以下是我`xaxis`的浮动参数 -

```
xaxis: {
    mode : "time",
    minTickSize: [1, "day"],
    color : "#999"
} 
```

我想要的是日期标签在 x 轴上可见。当我有多个数据点时，它可以工作 -

![完美运行](../Images/6f0688e86a2c627518a7814acbaa6798.png)

但是当我只有一个数据点时它不起作用。

![浮动日标签不起作用。](../Images/a75664e47fbb0b73cb2e0cfede840d68.png)

当只有一个数据点时，是否有渲染日期标签？我尝试使用“1 小时”作为最小刻度大小，它会使时间线混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:06:05.513

这是我创建的一天的示例。我不认为应该有任何问题。 ![在此处输入图像描述](../Images/1ac21a9c5bcbdeefea509cddc91b741e.png)

# c - 使用数组打印出多个星号，取决于用户在 C 中输入的数字

> ID：12880526
> 
> 赞同：1
> 
> 时间：2012-10-14T08:28:31.227
> 
> 标签：c, arrays, function

所以这个程序应该根据你输入的数字打印出星号的数量，所以如果你输入 5，5 个星号将被打印出来。

我不知道我哪里出错了？此外，如果有人可以推荐一本好书，我通读了我的学校课本和 C 的傻瓜，我就是不明白。

* * *

```
 void barplot(int num1, char array[]);

int main()
{
    int n1;
    printf("Enter a number: ");
    scanf("%d",&n1);
    printf("You have entered: %d\n",n1);

    char astrk[n1];
    strcpy(astrk, "*");

    barplot(n1, astrk);
    return(0);

}

void barplot(int num1, char array[])
{
    printf("num1=%d\n",num1);
    int i=0;

    for(i=0; i<num1; i++)
    {
        printf("%c",array[i]);
    }
} 
```

编辑：每个分配都需要一个数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:46:31.780

鉴于您被困在使用数组中，您可以使用以下字符填充`astrk`数组：`'*'``memset`

```
char astrk[n1];
memset(astrk, '*', n1);

barplot(n1, astrk);
return 0; 
```

`memset`用字符（第二个参数）的副本填充数组（第一个参数），直到第三个参数中的长度。请注意，这不会以空值终止数组，因此您不能直接使用`printf`它。

如果您确实希望能够做到`printf`这一点，那么您应该为空终止符分配足够的空间，如下所示：

```
char astrk[n1+1];
memset(astrk, '*', n1);
astrk[n1] = '\0'

printf("%s", astrk);
return 0; 
```

那么你根本不需要这个`barplot`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:32:27.040

你真的不需要一个完整的`char`数组来存储一个字符。让我们`char[]`用一个来替换`char`：

```
void barplot(int num1, char array);

int main()
{
    int n1;
    printf("Enter a number: ");
    scanf("%d", &n1);
    printf("You have entered: %d\n", n1);

    barplot(n1, '*');
    return 0;
}

void barplot(int num1, char ch)
{
    printf("num1=%d\n",num1);
    int i;

    for(i=0; i<num1; i++)
    {
        putchar(ch);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:28:24.900

我想知道为什么没有提到标准 c 不允许变长数组。您可以在 C99 (ISO/IEC 9899:1999) 中执行可变长度数组，但它们不是 C++ 或标准 C 的一部分。某些编译器可能支持它，但始终存在风险。

此外，我确信上述问题是一项分配，其目的是在运行时确定的大小应使用诸如 malloc 之类的动态分配来处理。

```
char arr[SIZE]; // size has to be a constant value or a variable with const modifier 
```

对于上述语法，大小无法在运行时确定。

您应该使用 malloc 作为标准做法

```
char *arr = malloc(n1); 
```

这也需要稍后释放

```
free(arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T08:32:41.240

你没有`astrk`用星号填充你的数组。您刚刚复制了一个只有一个星号的字符串文字。

如果您只需要打印这些星号，为什么还需要一个数组呢？

尝试这个：

```
void barplot(int num1)
{
    printf("num1=%d\n",num1);

    for(i=0; i<num1; i++)
    {
        printf("*");
    }
    printf("\n");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T08:43:31.030

```
void barplot(int num1)
{
  char s[BUFSIZ];
  memset(s,'*',BUFSIZ);
  printf("%.*s",num1%BUFSIZ,s);
} 
```

# c++ - 使用 STL priority_queue 时有关内存管理的建议

> ID：12880527
> 
> 赞同：1
> 
> 时间：2012-10-14T08:28:45.677
> 
> 标签：c++, memory-leaks, stl, priority-queue

我正在尝试从 Java 适应 C++，当我从 STL priority_queue 中弹出（）项目时，我不确定管理内存的正确方法。

我是否应该使用 delete 来清理从队列中删除的不再需要的项目？如果是这样，怎么做？如果不是，为什么不呢？

我给自己写了一个小程序来学习如何使用priority_queue（代码如下）。在这个程序中，内存泄漏没什么大不了的，因为它的规模很小，而且结束得很快。但是我想学习正确的做事方式，这样我就可以编写一个程序来正确处理更大的队列而不会出现内存泄漏。

我不明白的是：top() 返回的是引用而不是指针。但是我不能在引用上使用删除，可以吗？

有人可以在这里指出我正确的方向吗？

--------------------

```
struct PathCost{
    int dest;
    int cost;
    PathCost(int _dest, int _cost){
      dest = _dest;
      cost = _cost;
    }
    bool operator<(PathCost other) const;
    bool operator>(PathCost other) const;
};

bool PathCost::operator<(PathCost other) const{
  return cost < other.cost;
}
bool PathCost::operator>(PathCost other) const{
      return cost > other.cost;
}

int main(){

  PathCost pc = PathCost(1, 2);
  pc = PathCost(3, 4);
  PathCost* pcp = new PathCost(5, 6);
  delete pcp;

  priority_queue<PathCost,
                 vector<PathCost>,
                 greater<vector<PathCost>::value_type> > tentativeQ;

  cout << "loading priority queue ...\n";
  tentativeQ.push(PathCost(8, 88));
  tentativeQ.push(PathCost(5, 55));
  tentativeQ.push(PathCost(7, 77));
  tentativeQ.push(PathCost(4, 44));

  cout << "\nlist items on queue in priority order ...\n";
  while (!tentativeQ.empty()){
    pc = tentativeQ.top();
    cout << "dest:" << pc.dest << " cost:" << pc.cost << endl;
    tentativeQ.pop();
    /* DO I NEED TO DO MEMORY CLEANUP AT THIS POINT? */
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:31:13.373

> 我是否应该使用 delete 来清理从队列中删除的不再需要的项目？如果是这样，怎么做？如果不是，为什么不呢？

您不需要执行任何清理，因为 priority_queue 正在保存`PathCost`对象。当它们从队列中移除时，它们的析构函数会根据语言规则自动调用。

在幕后，故事可能会更复杂一些。通常，将项目插入priority_queue 数据结构将导致动态分配该对象的副本。但是资源分配和解除分配由底层数据结构（默认情况下[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)）处理，因此您不必担心内存管理。据说标准库容器和容器适配器具有*值语义*。

> 我不明白的是：top() 返回的是引用而不是指针。但是我不能在引用上使用删除，可以吗？

据说[`priority_queue`](http://en.cppreference.com/w/cpp/container/priority_queue)拥有它*拥有*的元素，所以如果你引用它的一个元素，你就不能删除它。实际上，您根本不知道它是否需要删除。此外，尽管您可以访问队列中元素的引用，但您不必保留对这些元素的引用。您也可以制作自己的副本：

```
const PathCost& pRef = tentativeQ.top(); // take constant reference to top element
PathCost p = tentativeQ.top(); // make copy of last element 
```

在第一种情况下，您必须注意不要在通过调用删除顶部元素后使用该引用`pop()`。

# php - 做一个向后看的正则表达式

> ID：12880528
> 
> 赞同：1
> 
> 时间：2012-10-14T08:28:53.317
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:17:20.667

一种通用的方法是使用自定义回调。如果您想采用 fix-broken-links 方式，请尝试以下操作：

```
 $string = '"a dumb-ass car":http://example.com/funny-stuff-is-funny - funny-enough?';

    echo preg_replace_callback( /* Fixing broken links with NON-BREAKING HYPHEN */
                 '@https?\://[^\s]+‑[^\s]+@u',
                 function ($matches) {
                         return str_replace('‑', '$1===-===', $matches[0]);
                         // or better, use strtr() for one-character replacement:
                         // return strtr($matches[0], '‑', '-');
                 },
                 preg_replace( /* NON-BREAKING HYPHEN inside of a word */
                              '@(?<= \w)-(?= \w)@xu',
                              '‑',
                              $string)); 
```

# python - Is there anything similar to Python function decorators in F# programming language?

> ID：12880529
> 
> 赞同：6
> 
> 时间：2012-10-14T08:28:53.900
> 
> 标签：python, f#, decorator

I am learning F# and have some experience with Python. I really like Python function decorators; I was just wondering if we have anything similar to it in F#?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T09:16:40.900

F# 中的函数装饰器没有语法糖。

对于类型，您可以使用`StructuredFormatDisplay`属性来自定义 printf 内容。下面是[F# 3.0 Sample Pack](http://fsharp3sample.codeplex.com/wikipage?title=Format)中的一个示例：

```
[<StructuredFormatDisplayAttribute("MyType is {Contents}")>]
type C(elems: int list) =
   member x.Contents = elems

let printfnSample() = 
    printfn "%A" (C [1..4])

// MyType is [1; 2; 3; 4] 
```

对于函数，您可以使用函数组合轻松表达[Python 的装饰器。](http://docs.python.org/reference/compound_stmts.html#function)例如，[这个 Python 示例](https://stackoverflow.com/a/739665/634025)

```
def makebold(fn):
    def wrapped():
        return "<b>" + fn() + "</b>"
    return wrapped

def makeitalic(fn):
    def wrapped():
        return "<i>" + fn() + "</i>"
    return wrapped

@makebold
@makeitalic
def hello():
    return "hello world" 
```

可以翻译成F#如下

```
let makebold fn = 
    fun () -> "<b>" + fn() + "</b>"

let makeitalic fn =
    fun () -> "<i>" + fn() + "</i>"

let hello =
    let hello = fun () -> "hello world"
    (makebold << makeitalic) hello 
```

# objective-c - 如何调用encodeWithCoder

> ID：12880534
> 
> 赞同：3
> 
> 时间：2012-10-14T08:29:20.053
> 
> 标签：objective-c, ios, serialization, nscoder

可能是一个nooby问题 - 怎么`encodeWithCoder`称呼？我需要使用它来将对象保存在 iphone 上的文件中，我只是不确定它的实际调用方式。我必须手动调用它吗？如果是这样，我将使用什么作为`NScoder`参数的输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T08:40:50.747

您不自己调用它，而是使用[NSKeyedArchiver](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)：

```
NSData *serialized = [NSKeyedArchiver archivedDataWithRootObject:foo]; 
```

`foo`你符合的对象在哪里`NSCoding`。还有一种方法可以将归档对象直接保存到文件中。

# css - 使用字体的目的是什么：继承？

> ID：12880536
> 
> 赞同：46
> 
> 时间：2012-10-14T08:29:25.013
> 
> 标签：css

我只是想知道为什么`font: inherit;`在级联样式表中使用。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-14T08:44:10.953

就像其他答案所说的那样，它是从父元素继承 CSS 属性。

其他答案未能说明的是*您为什么需要 this*。因为毕竟 CSS 属性是继承的，对吧？

嗯，不。大多数是，默认情况下（但链接颜色不是从父元素继承的，例如）。但是考虑一下这种情况：

```
p { color: blue; }

div.important { color: red; } 
```

```
<div class="important">
    <p>This is a text</p>
</div> 
```

现在文本将是蓝色的，而不是红色的。如果我们希望`<p>`拥有其父级的样式而不是其默认样式，我们必须覆盖其 CSS。我们当然可以重复属性值 ( `red`)，但这违反了 DRY（不要重复自己）。相反，我们*继承*它：

```
div.important p { color: inherit; } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T17:43:07.750

该声明`font:inherit`用于许多“CSS Reset”样式表中，这些样式表经常被复制到各种库和框架中。Eric Meyer最初的[Reset CSS](http://meyerweb.com/eric/tools/css/reset/)有`font:inherit`. 没有给出具体的动机。据说总体理由是“减少浏览器在默认行高、页边距和标题字体大小等方面的不一致”。但迈耶链接到他[之前的一篇文章](http://meyerweb.com/eric/thoughts/2007/04/18/reset-reasoning/)，他解释了这个想法，除其他外说：“我想要这一切，因为我不想把风格效果视为理所当然。这有两个目的。首先，它让我对文档的语义更加思考。重置到位后，我不选择`strong`因为设计要求大胆。相反，我选择正确的元素——无论是`strong`or `em`or `b`or `h3`or 什么——然后根据需要设置样式。”</p>

一些 HTML 元素在浏览器中具有字体属性的默认呈现：标题、表单字段、表格标题单元格、一些短语元素等。使用 CSS 重置，或者特别`font: inherit`意味着在支持该`inherit`值的浏览器上，所有这些元素都呈现在复制文本字体，除非样式表中另有规定。

因此，这是关于创作和设计的特定方法（或者，正如某些人可能会说的，意识形态或宗教）。它已获得普及并经常被常规应用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-11T02:42:42.453

> `font`CSS 属性是设置`font-style`, `font-variant`, `font-weight`, `font-size`, `line-height`, 和`font-family`;的简写属性。或者使用特定关键字将元素的字体设置为系统字体的方法。[-MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/font) _

通过使用`font: inherit;`，它告诉元素从其父容器继承这些相关值。请参阅以下示例：

**在第一组中：**你可以看到浏览器默认设置了一些特殊的样式，`h1`更粗更大，它也自动继承了相关值`body`。但是，对于`input`元素，它不会继承任何这些值，因为它是一个被替换的元素并且服务于它的独特目的。

**在第二组中：**`body`它强制这些元素通过使用继承这些值`font: inherit;`。

现在，你看看它做了什么。何时使用它完全取决于您，例如，您可能希望`<h1>`在主页中为站点徽标使用标签，并且您可能希望使其看起来与其他页面上的显示没有区别。当然，它通常用于 CSS 重置框架。

```
body {
  font-family: "Comic Sans MS", "Comic Sans", cursive;
  font-style: italic;
}

.inherit {
  font: inherit;
}
```

```
<h1>Heading</h1>
<input type="button" value="Button">

<hr>

<h1 class="inherit">Heading</h1>
<input class="inherit" type="button" value="Button">
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T12:21:21.007

并非所有浏览器都继承所有元素的字体属性。Netscape 4.x 在继承方面出了名的糟糕。考虑以下样式：

```
body { background: black; color: white } 
```

在 Netscape 4.x 中，颜色没有应用于表格元素，因此您最终会在黑色背景上的表格中使用默认的黑色文本。

字体属性对某些元素有相同的处理，特别是表单元素（以及旧浏览器的表格元素）。看到这样的定义并不少见：

```
table, form { font: inherit } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T08:31:37.527

`inherit`用于从父元素获取属性。换句话说，继承父元素的属性。

默认属性是`inherit`，这意味着，假设你有`div`一个`p`.

```
<div>
    <p>Hello World!</p>
</div> 
```

现在你给一个风格：

```
div {font-famlily: Tahoma;}
p {font-family: inherit;} 
```

这`font-family`是从其父元素`inherit`ed 到的。`p``div`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-23T06:19:49.923

在 CSS 中使用`{font:inherit;}`是有意义的，因为各种用户代理（又名浏览器）都有用户代理样式表（阅读：默认样式表），例如

```
body
{
    font: -magic-font-from-user-preferences;
}

textarea, input
{
    font: monospace;
} 
```

用于解决由于用户代理样式表而默认继承或不继承但内容作者希望继承字体系列的`{font:inherit;}`特殊情况。`font``font-family`

`inherit`不幸的是，由于各种错误，具有该值的实际用户代理行为会有所不同。不过，结果行为可能比默认值更接近作者意图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-14T08:30:12.877

`inherit`在 CSS 中只是意味着它从父元素继承值，例如：

```
<div style="font-family: Arial;">
   <p style="font-family: inherit; /* This will inherit the font-family of the parent p*/">
      This text will be Arial..And inherit is default behavior of the browser
   </p>
</div> 
```

这里从它的父`<p>`级继承`font-family: Arial;``div`

> 您需要使用继承，例如在锚元素的情况下，颜色属性通常在用户代理样式表中设置为蓝色。如果你想强调继承值的重要性，你可以在作者或用户样式表中使用继承值，覆盖用户代理样式表声明。

[更多参考](http://reference.sitepoint.com/css/inheritvalue)

# javascript - 大型 Web 应用程序的原生或 jQuery

> ID：12880539
> 
> 赞同：1
> 
> 时间：2012-10-14T08:30:40.690
> 
> 标签：javascript, jquery, ajax, performance, post

我知道用原生 JavaScript 编码意味着你的代码执行速度比用 jQuery 编码要快，但是要快多少呢？

特别是，如果对于一个非常大的 web 应用程序，我想知道速度的提高是否值得花更多的时间在本机 JavaScript 中进行编码而不是 jQuery？

还是速度上的差异根本没有那么大？

例如，要在 jQuery 中设置 AJAX 请求，您所要做的就是调用`$.ajax`或`$.post`传递一些参数，但使用原生 JavaScript，您必须根据用户浏览器等创建对象`XMLHttpRequest`。`ActiveXObject`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T08:40:39.603

速度上的差异以毫秒为单位——这可以加起来数千个 jQuery 调用。

原因在于，使用 jQuery，它会根据您提供的信息来测试不同的场景，因此它可以以多种方式发挥作用——即使是您永远不会使用的方式。对于您使用的函数，jQuery 仍然对可能的变量和场景执行测试，您永远不会为您的特定应用程序提供它。

这就是让它变慢的原因。这实际上取决于您将对 jQuery 进行多少次调用。

虽然，它也非常兼容跨浏览器，这是一个很大的优势。

我个人会推荐 jQuery，原因有很多。但同样，这取决于您需要使用它的重量，以及您定义的“巨大”差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:44:10.300

如果您只想做一个 AJAX 请求，您可以创建自己的迷你框架，该框架包含创建 XMLHttpRequest 并执行与浏览器相关的工作。

与您需要的任何其他功能相同的方式。

然而：事情变得非常复杂。想想动画。jQuery 或任何其他框架会做得更好更快。并跨浏览器测试。

帮自己一个忙，使用现有的框架。

还有一件事：*过早的优化是万恶之源*。首先找到应用程序中的瓶颈，然后优化该部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T09:08:27.050

测试一下。

选择您的 Web 应用程序的一部分并用 JavaScript 编写它，然后使用 jQuery 执行等效操作。测试性能。

开发优于 jQuery 的 JavaScript 取决于您或团队的技能。jQuery 是久经沙场的代码，它为您抽象了许多浏览器的怪癖。它确实增加了一些开销来满足许多开发用例，但这是许多开发人员愿意支付的价格。

在 JavaScript 中重新创建相同的功能需要技能和知识，同时消除 Web 应用程序不需要的开销。

我推荐你使用 jQuery。但是，一旦 jQuery 成为您的 Web 应用程序的一部分，它就会成为您的代码，因此您必须努力了解它在做什么以及为什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T08:43:18.977

根据我的经验，我认为最好的方法是使用 jQuery 而不是原生 JS。特别是如果您的应用需要 IE6-IE8 的支持。大多数时候，您将花费在修复跨浏览器问题上，而不是专注于开发。

即使您会根据自己的需要制作自己的“迷你框架”，我也不认为它不会像 jQuery 那样具有如此高的质量和速度。但是，如果您将使用 jQuery - 遵循最佳实践，您将不会遇到性能问题，并且您的代码会更小且易于阅读。

我认为你应该只在高度专业化的 Web 应用程序中使用原生 JS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T09:13:32.187

在我正在构建的应用程序中，我们将 JQuery 与我们自己的原型结合使用。从用户的角度来看，仅使用直接 JS 的时间差异可以忽略不计。加上 CBS（跨浏览器支持）非常重要。

# nservicebus - CQRS 项目是否需要像 NServiceBus 这样的消息传递框架？

> ID：12880540
> 
> 赞同：4
> 
> 时间：2012-10-14T08:30:50.040
> 
> 标签：nservicebus, cqrs, masstransit

过去 6 个月的学习曲线一直充满挑战，主要罪魁祸首是 CQRS 和 DDD。

这很有趣，我们的项目已经完成了 1/2，而我没有时间深入研究的领域是消息传递框架。

目前我不使用 DTC，所以很有可能如果我的读取模型没有更新，那么我将在读取和写入数据库之间出现不一致。我的读写数据库也将在同一台机器上。我怀疑我们是否会将它们放在不同的机器上。

我的系统中没有大量消息，所以我更关心的是系统的一致性和可靠性。

那么，我是否必须放入像 NServiceBus 这样的消息传递框架（即使读写数据库都在同一台机器上）还是我有其他选择？是的，有学习曲线，但我想如果我不使用它，我会学到很多东西。

另外，如果没有必要，我不想放一层

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T16:25:40.423

> 目前我不使用 DTC，所以很有可能如果我的读取模型没有更新，那么我将在读取和写入数据库之间出现不一致。

就个人而言，我不喜欢 DTC 并尽量避免它。相反，通常可以实现补偿机制，特别是对于最终一致性已经可以接受并且更新是幂等的读取模型之类的东西。例如，您可以在实体上实现一个版本，并拥有一个确保版本同步的后台任务。拥有 DTC 将提供事务重试功能，但它仍然无法解决重试后发生故障的情况 - 您仍然必须查看错误日志并制定处理错误的程序。

> 那么，我是否必须放入像 NServiceBus 这样的消息传递框架（即使读写数据库都在同一台机器上）还是我有其他选择？

这取决于几件事。您在 CQRS 系统中经常遇到的是需要 pub/sub，其中几个子系统发布查询/缓存系统订阅的事件。如果您发现除了基本的点对点消息传递之外还需要发布/订阅，那么请使用 NServiceBus 之类的东西。此外，即使您出于可扩展性目的不需要它，我也不会立即回避使用 NServiceBus，因为我认为逻辑分区本身是有益的。另一方面，正如您所指出的，增加复杂层的成本很高，因此首先尝试看看最简单的方法是否可行。

另一个要问的问题是您是否需要一个单独的查询存储。如果你只有一台机器，为什么还要麻烦？您可以使用像[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)这样更简单的东西，并且仍然可以获得 CQRS 的很多好处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T06:06:36.897

> CQRS 项目是否需要像 NServiceBus 这样的消息传递框架？

简短的回答：不。

这是我第一次听说 eulerfx 提到的“读取模型模式”。这是一个很好的名字，但还有更多：

“查询”部分背后的总体思路是查询数据的非规范化视图。在“读取模型模式”链接中，您会注意到用于填充读取模型的查询正在做一些提升。在上面提到的示例中，所需的数据操作并没有那么复杂，但如果它*变得*更复杂怎么办？这就是去规范化的用武之地。当您执行“命令”部分时，下一个操作是对数据进行去规范化并存储结果以便于阅读。所有繁重的工作都应该由您的域完成。

这就是您询问消息传递的原因。这里有几种技术：

*   同一个数据库、同一个表、不同列中的非规范化数据
*   同一数据库中的非规范化数据，不同的表
*   不同数据库中的非规范化数据

那就是存储。一致性如何？：

*   立即一致
*   最终一致

最简单的解决方案（快速获胜）是对域中的数据进行非规范化，然后在通过存储库保存域对象后，立即将非规范化数据保存到相同的数据存储、相同的表、不同的列。100% 一致，您可以立即开始读取非规范化数据。

如果你*真的*想要，你可以创建一组单独的对象来传输该数据，但是只编写一个简单的查询层来返回数据访问框架提供的一些数据承载对象会更简单（在 .Net 的情况下，这将是`DataRow`/ `DataTable`)。绝对没有理由变得花哨。总会有例外，但是您可以继续编写数据容器。

为了最终的一致性，您将需要某种形式的排队和相关处理。您可以推出自己的解决方案，也可以选择服务总线。这取决于您和您的时间/技术限制:)

顺便说一句：我在这里有一个免费的开源服务总线：

*   [Shuttle.Esb](https://github.com/Shuttle/Shuttle.Esb)
*   [文件](http://shuttle.github.io/shuttle-esb/)

任何反馈都将受到欢迎。但是任何旧的服务总线都可以（MassTransit / NServiceBus / etc.）。

希望有帮助。

# mysql - SQL查询以n年m月的形式列出员工的服务年限

> ID：12880551
> 
> 赞同：0
> 
> 时间：2012-10-14T08:32:16.630
> 
> 标签：mysql

我有一个名为员工的表，列是

```
empid,empname,joining date,retiring date  
1,employee,2000-1-1,2010-3-1 
```

我必须获取员工的服务年限。输出应如下所示：

```
years  months
10      2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T08:35:54.867

您可以使用 MySQL 的[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timestampdiff)函数获取整年数以及加入和退休日期之间的整月数，然后取后者模 12 以获取自上一整年以来的月数：

```
SELECT empname,
       TIMESTAMPDIFF(YEAR,  `joining date`, `retiring date`)      AS years,
       TIMESTAMPDIFF(MONTH, `joining date`, `retiring date`) % 12 AS months
FROM   employee 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/51f29/1/0)上查看。

# android - 如何在列表视图中找到项目的位置？

> ID：12880561
> 
> 赞同：-3
> 
> 时间：2012-10-14T08:33:49.923
> 
> 标签：android

我删除了列表视图中的一个项目，这样它就不会出现！我知道元素的名称（就像我有一个水果列表：苹果是目标）我想删除“苹果”。为此，我使用`lv.remove(position)`where lv is ListView，我如何找到只知道名称“Apple”和列表视图的 NO (xy) 的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:51:50.583

我想你可能已经使用了适配器，如果我应该使用 baseadapter，将水果放入 ArrayList<>，我们可以控制 ArrayList，刷新你的适配器。好的，这是我的观点。

# asp.net-mvc-3 - Mvc 基础视图模型在布局中渲染数据

> ID：12880562
> 
> 赞同：1
> 
> 时间：2012-10-14T08:33:56.230
> 
> 标签：asp.net-mvc-3, c#-4.0

我创建了一个基本视图模型，我的所有视图模型都继承自该视图模型。那部分很容易。

所有视图都绑定到一个视图模型（所有视图都继承自基本视图模型）

在 OnActionExecuted 方法中，我根据某些条件将真/假值插入到 baseviewmodel 内的属性中。

从事物的角度来看。我有一个单一的布局页面，我希望能够读取属性的值并根据该值呈现不同的局部视图。

这可能吗？我不想将代码添加到每个视图，但我认为我也不应该将布局绑定到我的 baseviewmodel。

如果我可以避免将值插入到 valuebag 中，那就太好了，因为我需要能够通过强类型名称在应用程序中的任何位置访问这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:11:27.103

不确定我是否完全遵循用例，但您是否考虑过嵌套布局页面，而不是尝试渲染部分视图。

我认为您应该能够覆盖 onactionexecuted 中的布局，因此您可以根据 bool 设置布局，并且该布局将仅呈现正确的选项。

看这里的例子：

[使用 Razor 嵌套布局页面](http://www.mikesdotnetting.com/Article/164/Nested-Layout-Pages-with-Razor)

高温高压

硅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:47:59.773

您想要的可能是不可能的，因为当您从控制器调用视图时，首先执行该视图中的代码，然后执行布局代码
以实现您正在做的事情，您可以做两件事1\. 在自身

内部创建逻辑`controller`然后呈现正确的`view`
2.call 布局，在or 的某些属性中`controller`为其命名`partial view``model``viewbag`

# android - Android GCM：自动唤醒不起作用

> ID：12880565
> 
> 赞同：0
> 
> 时间：2012-10-14T08:34:37.627
> 
> 标签：android, google-cloud-messaging, power-management, wakelock

这是我的类 GCMIntentService 的代码，当通知到达电话时调用它。我的问题如下：

当手机收到通知时，他会醒来，但之后就再也不会回到待机模式了。

我认为问题在于唤醒锁，但不知道它是什么。

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService{

    public String regIdtoSend = ""; 

    public GCMIntentService(){
        super(Utils.GCMSenderId);
    }

    @Override
    protected void onError(Context context, String regId) {
        // TODO Auto-generated method stub
        Log.e("", "error registration id : "+regId);
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        // TODO Auto-generated method stub
        handleMessage(context, intent);
    }

    @Override
    protected void onRegistered(Context context, String regId) {
        // TODO Auto-generated method stub
        // Log.e("", "registration id : "+regId);
        handleRegistration(context, regId);
    }

    @Override
    protected void onUnregistered(Context context, String regId) {
        // TODO Auto-generated method stub

    }

    @SuppressWarnings({ "deprecation", "static-access" })
    private void handleMessage(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Utils.notiMsg = intent.getStringExtra("message");
        Utils.notiTitle = intent.getStringExtra("title");
        Utils.notiType = intent.getStringExtra("type");
        Utils.notiUrl = intent.getStringExtra("url");

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);

        int icon = R.drawable.ic_action_lab_white;
        CharSequence tickerText = Utils.notiMsg;
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);
        CharSequence contentTitle = "Nouveau deal";
        CharSequence contentText = Utils.notiMsg;
        Intent notificationIntent = new Intent();
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        mNotificationManager.notify(1, notification);

        Utils.notificationReceived=true;
        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG");
        wl.acquire();

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:04:14.280

改成

```
wl.acquire(15000);
wl.acquire(); 
```

# php - 等效于 ms sql server 的 mysql_insert_id()

> ID：12880567
> 
> 赞同：2
> 
> 时间：2012-10-14T08:34:57.087
> 
> 标签：php, sql-server, sql-server-2012

> **可能重复：**
> [SQL：如何获取我刚刚插入的值的 id？](https://stackoverflow.com/questions/45651/sql-how-to-get-the-id-of-values-i-just-inserted)

对于 PHP，什么相当于`mysql_insert_id()`sql server 2012？

`sqlsrv_insert_id()`似乎不存在。

说这是代码

```
 if ($result) {
            // get user details 
            $uid = mysql_insert_id(); // last inserted id
            $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
            // return user details
            return mysql_fetch_array($result);
        } else {
            return false;
        } 
```

对于 mysql，我应该如何为 sql server 做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T08:41:46.037

看看这个： http: [//fr2.php.net/manual/en/book.mssql.php](http://fr2.php.net/manual/en/book.mssql.php) 在评论那里你有 php 语法在评论：

```
函数 mssql_insert_id() {
    $id = 0;
    $res = mssql_query("SELECT @@identity AS id");
    if ($row = mssql_fetch_array($res, MSSQL_ASSOC)) {
        $id = $row["id"];
    }
    返回$id；
}

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:42:21.923

或查询：

```
SELECT `column_id` FROM `table` ORDER BY `column_id` DESC TOP 1 
```

TOP 是 LIMIT 的 MySql 等价物

# ruby-on-rails - 您如何使用 gmaps4rails 在 Ruby on Rails 中使用 UJS 发送 ajax 调用？

> ID：12880571
> 
> 赞同：0
> 
> 时间：2012-10-14T08:35:27.767
> 
> 标签：ruby-on-rails, gmaps4rails

我遵循了两个位置的示例：

*   [https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS)
*   [https://gist.github.com/1643990](https://gist.github.com/1643990)

但它们都不起作用。我没有得到任何回报。我目前在 RoR 3.2.8 中使用 1.5.5 版本的 gmaps4rails。

show_map.js.erb

```
$('#map_container').show();
$('#map_container').html('<%= escape_javascript( gmaps({:last_map => false}) ) %>');
Gmaps.map = new Gmaps4RailsGoogle();

Gmaps.load_map = function() {
  Gmaps.map.map_options.maxZoom = 15;
  Gmaps.map.initialize();
  Gmaps.map.create_markers();
  Gmaps.map.adjustMapToBounds();
  Gmaps.map.markers = <%= @json %>;
  Gmaps.map.callback();
};
Gmaps.loadMaps(); 
```

users_controller.rb

```
 def show_map
    @user = User.first
    @json = @user.to_gmaps4rails
    respond_to do |format|
      format.js {}
    end
  end 
```

显示.html.haml

```
 = link_to "Map", show_map_path, :remote => true
  #map_container{:style => 'display:none;'} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:08:20.337

我有同样的问题`@persistence`，我更喜欢在这个线程中报告。我尝试先遵循两个 wiki 示例，然后坚持`@apneadiving`评论并遵循您的要点，但我仍然遗漏了要点中的一些内容。我将此代码放在我的控制器中：

**事件控制器**

```
def index
    @json = Event.all.to_gmaps4rails do |event, marker|
        marker.title        event.title
        marker.infowindow   event.description
        marker.sidebar      'This is a side bar'
    end
    p @json
    respond_with @json
end 
```

在我看来，我粘贴了要点的确切代码。当我按下加载按钮时，我在控制台中检查我的 json 信息是否正常，但由于 Javascript 错误，地图未加载：

`TypeError: Gmaps.map is undefined`

我想我错过了地图的某种 Javascript 初始化？

**2012 年 5 月 11 日更新：**

这确实是问题所在。结合 gist 和 wiki 示例中的 javascript，我通过将以下代码放入视图中来完成这项工作：

**索引视图**

```
<!-- create html + load js files but don't create map itself: will be done after ajax call -->
<%= gmaps({:last_map => false}) %>
<br/>

<!-- button to trigger ajax call -->
<button type="button" id="ajax">Load Map</button>

<script type="text/javascript" charset="utf-8">
$(function() {

    //hide the empty container
    $(".map_container").hide();

    // Map initialization
    Gmaps.map = new Gmaps4RailsGoogle();
    Gmaps.load_map = function() {
         Gmaps.map.map_options.maxZoom = 15;
         Gmaps.map.initialize();
         Gmaps.map.create_markers();
         Gmaps.map.adjustMapToBounds();
         Gmaps.map.callback();
    };

    $("#ajax").click(function(){
         $.getJSON('/events', function(json){
              $(".map_container").show();
              Gmaps.loadMaps();
              Gmaps.map.addMarkers(json);
         })
    })
});
</script> 
```

我还在 GitHub 中留下了一些加载 Gmaps4Rails 地图的简单示例：[https ://github.com/daviddefco/Gmaps4RailsS​​amples.git](https://github.com/daviddefco/Gmaps4RailsSamples.git)

1.  使用和 HTML 部分
2.  使用由 HTML 按钮触发的 AJAX 请求（要点示例）
3.  在 Javascript 操作中使用 AJAX 请求（wiki 示例）

我是 RoR 和 Javascript 新手，因此欢迎评论或代码改进。

# objective-c - Xcode 一次编译程序并安装到多个设备

> ID：12880580
> 
> 赞同：0
> 
> 时间：2012-10-14T08:37:53.263
> 
> 标签：objective-c, ios, xcode, compilation

当我按下 Build and Go - 我的程序正在重新编译然后发送到 iOS 设备 - 所以如果我需要将它安装到 2 或 3 台设备 - 校验和会有所不同。我需要为所有相同的设备拥有一个二进制文件 - 我怎么能这样做 - 编译一次并在多个设备上安装这个二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:11:25.387

您需要将所有设备添加到您的[配置文件](https://developer.apple.com/ios/manage/devices/index.action)中。然后，您可以`.ipa`使用 Xcode 创建包含预构建应用程序的文件，然后将其分发以使用 iTunes 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:09:28.947

请使用 TestFlight (https://testflightapp.com) 或 HockeyApp (http://www.hockeyapp.net)。这允许您分发您的应用程序 OTA（空中下载），捕获崩溃日志，对其进行符号化，强制用户更新到特定版本，...

为此，您必须将所有设备放入配置文件中。执行此操作时，您不必为每个设备单独构建和安装它，因为该应用程序已经在您的配置文件中为设备签名。因此，您也可以简单地将 IPA 拖放到 iTunes 并进行同步。

# java - 如何从 java 中的 JSON 字典中获取信息

> ID：12880587
> 
> 赞同：0
> 
> 时间：2012-10-14T08:39:43.633
> 
> 标签：java, json, dictionary

我在网站上有一本 json 格式的字典，例如：

```
"types":[{
    "id":"0",
    "name":"value1"
    },{
    "id":"1",
    "name":"value2"
    },{
    "id":"2",
    "name":"value3"
    }] 
```

我找不到任何有用的方法示例来帮助我检索该信息并将其放入例如字符串数组中。也许你们中的任何人遇到同样的问题，请帮忙！

PS我尝试[了最简单的方法来从java中的URL读取json，](https://stackoverflow.com/questions/4308554/simplest-way-to-read-json-from-a-url-in-java)但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:54:56.877

它是 json 对象值的数组，其键为`types`. 您可以使用 json-java 库`gson, jackson,flexjson etc..`来解析这个 json 对象并获得所需的结果。

GSON 示例 -

```
JsonElement jElement = new JsonParser().parse(jsonString);
JsonObject  jObject = jElement.getAsJsonObject();
jObject = jObject.getAsJsonObject("types"); 
```

或者你可以使用 pojo 类，比如 -

```
public class Type {
  private int id;
  private String name;
  ...
}

gson.fromJson(jsonString, Type.class); 
```

参考[java 文档](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)。

# sql - SQL：当其他值更改时将字符串添加到字段

> ID：12880590
> 
> 赞同：0
> 
> 时间：2012-10-14T08:40:07.703
> 
> 标签：sql, duplicates

我有 2 列（ColA、ColB）都是数据类型 Nvarchar。
我需要 col B 对于 ColA 中的值是唯一的

有些行在 ColA 中有 2 个不同的值，在 ColB 中有相同的值（非唯一）。

我想编写一个查询来显示 ColB 值以及最后的字母“D”（重复），其中 ColA 中的值正在更改为其他值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:36:22.470

据我了解，您想标记需要更改 ColB 值的行。

如果是这样试试这样的

```
SELECT t1.COLA, 
       t1.COLB + 'D' 
FROM   TABLE1 t1 
       INNER JOIN TABLE1 t2 
               ON t1.COLB = t2.COLB 
                  AND t1.COLA != t2.COLA 
```

这只会显示“双”行。如果要显示所有行，只需在末尾添加一个 UNION：

```
SELECT t1.COLA, 
       t1.COLB + 'D' 
FROM   TABLE1 t1 
       INNER JOIN TABLE1 t2 
               ON t1.COLB = t2.COLB 
                  AND t1.COLA != t2.COLA 
UNION 
SELECT * 
FROM   TABLE1 
WHERE  COLA NOT IN (SELECT t1.COLA 
                    FROM   TABLE1 t1 
                           INNER JOIN TABLE1 t2 
                                   ON t1.COLB = t2.COLB 
                                      AND t1.COLA != t2.COLA) 
```

[请参阅SQL Fiddle](http://sqlfiddle.com/#!3/ff8bd1/12)中的完整示例。

# jquery - 我应该何时将事件绑定到由 Knockout 绑定生成的元素？

> ID：12880593
> 
> 赞同：2
> 
> 时间：2012-10-14T08:40:24.110
> 
> 标签：jquery, web-applications, knockout.js, knockout-2.0

我正在使用以下标记（删节）在表格中显示人员对象列表。我想在单击一行时打开一个编辑详细信息弹出窗口，但我的基本事件绑定不适用于通过 Knockout 数据绑定添加到表中的行。

```
<script>
    function PersonModel(data) {
        var self = this;
        self.id = data.Id;
        self.firstName = data.FirstName;
    }
    $(function () {
        function personListModel() {
            var self = this;
            self.persons = ko.observableArray([]);
            $.getJSON("Person/IndexJson", function (allData) {
                var mappedPersons = $.map(allData, function (item) { return new PersonModel(item); });
                self.persons(mappedPersons);
            });
        }
        ko.applyBindings(new personListModel());
        $(".person-row").click(function () {
            alert("Hello ");
        });
    });
</script>
<table>
    <tbody data-bind="foreach: persons">
        <tr class="person-row" data-bind="attr: { 'data-id': id }">
            <td data-bind="text: firstName"></td>
            <td data-bind="text: surname"></td>
            <td data-bind="text: email"></td>
            <td data-bind="text: cell"></td>
        </tr>
    </tbody>
</table> 
```

如果我在页面呈现和绑定后从 JS 控制台绑定单击事件处理程序，则该处理程序被正确调用，但上面代码中的初始事件绑定根本不起作用。我必须做什么才能绑定到由淘汰赛生成的行。我认为在`ko.applyBindings()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T08:50:20.693

您需要使用 JQuery 的[on 方法](http://api.jquery.com/on/)订阅页面加载后添加的 DOM 元素上的事件：

```
$(".person-row").on("click", function(event){
    alert("Hello ");
}); 
```

或者您可以使用[点击绑定](http://knockoutjs.com/documentation/click-binding.html)结构并使用敲除处理订阅：

```
function personListModel() {
    var self = this;
            ...

    self.personClicked = function(data) {
        alert("Hello ");
    }
} 
```

在您看来：

```
<tr class="person-row" data-bind="attr: { 'data-id': id }, click: $root.personClicked"> 
```

[你可以在这个fiddle](http://jsfiddle.net/qxhp3/1/)中看到它的作用。

# c# - Java和C#中双值的低级实现

> ID：12880598
> 
> 赞同：4
> 
> 时间：2012-10-14T08:40:55.187
> 
> 标签：c#, java, database, double

我面临一个棘手的问题。我想通过 C# 从 sqlite 数据库中读取数据。数据库中的数据字段具有一种 blob 类型。该字段包含由 Java 编写的 double 值（也有其他类型的值，例如 text 和 int）。我需要通过 C# 读取双精度值。

我很抱歉我在这个问题上犯了一个可怕的错误。我通过创建一个由从数据库读取的 blob 流初始化的 ByteBuffer 来读取 Java 中的双精度值。C# 中没有对应的 ByteBuffer 数据结构，所以我使用下面的代码从 8 字节流中获取双精度值。

```
public double getDouble()
{
    if(CURRENT_POSITION + 7 >= CURRENT_LENGTH)
    {
        return 0;
    }
    double ret = (double)(TEMP_BYTE_ARRAY[CURRENT_POSITION + 7] << 56 |
                          TEMP_BYTE_ARRAY[CURRENT_POSITION + 6] << 48 |
                          TEMP_BYTE_ARRAY[CURRENT_POSITION + 5] << 40 |
    .....
    );
    return ret;
} 
```

但是我无法通过 C# 使用相同的代码从 blob 字段中获得正确的双精度值。谁能给我一些关于如何将Java定义的二进制样式双值转换为C#双值的建议？

顺便说一句，由于 blob 字段压缩了很多其他类型的值，我无法更改数据库的结构。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:39:24.887

使用[BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.todouble.aspx)：

```
double ret = BitConverter.ToDouble(TEMP_BYTE_ARRAY, CURRENT_POSITION); 
```

您发布的代码只是创建一个整数并将整数转换为双精度数，这不是您想要的。

**或者**，您可以通过在[MemoryStream上创建](http://msdn.microsoft.com/en-us/library/system.io.memorystream%28v=vs.80%29.aspx)[BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader%28v=vs.80%29.aspx)来获得与 ByteBuffer 相同的功能。例如：

```
MemoryStream memStream = new MemoryStream(TEMP_BYTE_ARRAY);
BinaryReader reader = new BinaryReader(memStream);

//read data
double a = reader.ReadDouble();
int b = reader.ReadInt();
string c = reader.ReadString(); 
```

# android - 更新 SQLite 字段不起作用

> ID：12880599
> 
> 赞同：0
> 
> 时间：2012-10-14T08:41:02.083
> 
> 标签：android, sqlite

我有一个在线页面，我在其中放置 SQLite 查询，然后在我的 Android 应用程序上遍历它们并执行它们。这是代码：

```
 URL url;
        try {
            url = new URL(Database.UpdateDB_URL);

            URLConnection connection = url.openConnection();
            BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            String line = null;
            File dbfile = new File(Database.Database_PATH);

            SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);

            while ((line = reader.readLine()) != null)
                db.rawQuery(line.trim(), null);
            db.close();
            reader.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

以下是运行 while 循环时 line.trim() 中内容的示例：

```
UPDATE Behavior SET Body="AAAAAA" WHERE _id=1 
```

但是当我在手机中浏览数据库时，我发现没有任何变化，但是如果我在我的电脑上运行这个确切的查询，它就可以了！
这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:00:49.210

对于更新 Sqlite 使用 database.update() 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:26:28.413

[在这个](https://stackoverflow.com/questions/6982663/android-database-sqlite-sqlitedatabase-rawquery-is-not-updating-a-datetime-col)线程的帮助下，它解决了。你只需要添加光标对象，moveToFirst，然后关闭它。

# jquery - 如果元素未显示，jQuery 'trigger('click')` 无法在歌剧上工作

> ID：12880604
> 
> 赞同：4
> 
> 时间：2012-10-14T08:42:01.377
> 
> 标签：jquery, html, css, safari, opera

我有一些元素点击它事件触发点击`<input style="display:none" type="file"/>`元素。该元素是隐藏的 ( `display:none`)。在此浏览器上：Chrome、IE、FireFox 正在运行（触发器执行），但在 Opera 和 Safari 上却没有。对于有问题的浏览器（Opera 和 Safari），我需要做些什么特别的事情吗？有走走的吗？

非常感谢！

这是事件的代码

```
$('#add_cv').click(function(){
   $('#add_cv_input').trigger('click');
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T08:49:49.447

好的，我找到了这个解决方法，我已将元素的 css 设置为：

```
visibility: hidden;
position: absolute;
top:0; 
```

它适用于上面的每个浏览器。我会很高兴听到任何其他解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T10:52:22.543

使用以下作为替代`display: none`：

```
position: absolute;
top: 0;
left: -9999px; 
```

# c++ - 如何在其他核心上运行每个线程？

> ID：12880606
> 
> 赞同：1
> 
> 时间：2012-10-14T08:42:09.157
> 
> 标签：c++, multithreading, udp, multicore

我有一个接收数据并计算它的 udp 服务器。

每个角色我都有两个线程。

在我的 cpu 中有一个 8 多核，我以不同的速度发送数据。

但在最大情况下，我只使用了我的 cpu 两个核心 50% 的 %14%。如果我发送更多数据值，我的缓冲区将被填满并且不使用更多 CPU。

为什么每个核心只出现 50% 而不是更多？

我认为将这两个角色划分为多核。

我想确保每个都在其他核心上。

我如何明确选择在其他核心上运行的每个线程？

我的程序在 c++ visaul studio 9 上运行并在 windows7 上运行，我使用 boost::thread。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T09:03:02.883

调度程序将处理您的线程等将运行的位置。这是特定于操作系统的，因此如果您想尝试更改代码的运行方式，您将需要一个特定于操作系统的 API，它可以让您设置线程关联等。

此外，取决于您的应用程序是什么样的，从外观上看它是一个客户端服务器，因此它并不完全受 CPU 限制。您总共有多少个线程，您提到每个角色 2 个？一个线程只能在一个 CPU 上运行。尝试制作可以真正并行运行的工作单元，这样它们就可以真正独立运行，最好是在不同的内核上运行。

操作系统通常会很好地运行您的代码，因为它会有更好的整体画面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:03:59.430

您不能让一个线程使用多个内核。为了获得更好的 CPU 利用率，您需要重新设计程序以创建更多线程并让操作系统为您安排它们。无需手动将线程限制为特定内核。操作系统非常擅长弄清楚如何将内核分配给线程。

在您的情况下，如果数据计算任务占用大量 CPU，您可以为每个请求生成一个新线程，或者拥有一个工作线程池来挑选传入任务并处理它们。这只是想法之一。如果不了解更多关于您的应用程序架构和它试图解决的问题，很难说。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T09:12:09.937

在每个线程中，您可以使用[SetThreadAffinityMask](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686247%28v=vs.85%29.aspx)来选择您的线程应该在其上运行的 CPU。但我建议您为每个传入请求创建一个新的工作线程（如果您使用线程池，您会看到相当大的性能提升）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-26T11:38:43.043

请注意编译器和链接器设置启用多线程。

最佳实践也不是启动许多线程，而是启动长寿命线程，这些线程执行一些排队工作，例如计算或下载。

# google-app-engine - 在 App Engine/Java 上从后端启动前端延迟任务

> ID：12880607
> 
> 赞同：2
> 
> 时间：2012-10-14T08:42:11.677
> 
> 标签：google-app-engine

是否可以从 App Engine/Java 上的延迟后端启动延迟前端任务。延迟任务使用特定主机在后端启动，代码如下：

```
queue.add(withPayload(new MyDeferredTask()).header("Host",
    BackendServiceFactory.getBackendService().getBackendAddress("backend1", 1)); 
```

这很好用。如果从该后端启动延迟任务，则该任务也会在后端运行。是否有要使用的特定主机，或者在前端显式启动延迟任务的另一种方法？

**更新**

我错过了原始问题中的一些重要信息：我说的是延迟任务，其中传入了有效负载。从后端启动延迟任务会在同一后端启动新的延迟任务。我想知道的是，当它从后端启动时，是否可以在前端显式启动延迟任务。上面的原始问题已被修改以反映这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T12:57:39.687

要回答我的老问题，特别是对于延迟任务 - 如果您有一个在后端运行的任务并希望在前端启动一个任务，您应该明确指定前端实例的主机，即 myapp.appspot.com。如果您不指定主机，则任务将在与起始代码相同的实例上运行。

无论调用者在哪个实例上运行，要明确地从前端开始，请执行以下操作：

```
Queue queue = QueueFactory.getQueue("my-queue");
TaskOptions taskOptions = TaskOptions.Builder.withPayload(new MyDeferredTask());
taskOptions.header("Host", "myappid.appspot.com");
queue.add(taskOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:02:03.223

只需调用`URL`您的前端“您要运行的 servlet”，`URL-fetch service`或使用 servlet 的 url 将任务添加到一个队列。

前端只处理对应用程序的所有 HTTP 调用，并将其发送到 web.xml 文件中配置的 servlet

# eclipse-plugin - 哪个eclipse插件实现了Ctrl+PageDown或者M1+PageDown

> ID：12880610
> 
> 赞同：3
> 
> 时间：2012-10-14T08:42:37.150
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在学习 Eclipse 插件开发，可以通过查看现有内置插件本身的实现来完成大量学习。当我在寻找在选项卡之间切换的快捷方式时，我发现了这个 --> [Eclipse HotKey: how to switch between tabs？](https://stackoverflow.com/questions/2332330/eclipse-hotkey-how-to-switch-between-tabs)

但是，我无法搜索实际实现 Ctrl+PageDown 键绑定的***命令***/***键***绑定/***处理***程序类。

同样，我能够在plugins/org.eclipse.ui_some_version.jar（在我的情况下为org.eclipse.ui_3.103.0.v20120705-114351.jar）中找到M3+PAGE_DOWN（ALT+PAGE_DOWN）的***键***绑定和***命令***) 但不是***Handler***。

**我怎样才能找到这些？我应该参考哪个插件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T15:38:52.223

您可以在 org.eclipse.ui.workbench 中找到处理程序（请参阅类 org.eclipse.ui.part.MultiPageEditorPart）

处理程序以编程方式而非声明方式定义：

```
public abstract class MultiPageEditorPart extends EditorPart implements IPageChangeProvider {

    private static final String COMMAND_NEXT_SUB_TAB = "org.eclipse.ui.navigate.nextSubTab"; //$NON-NLS-1$

    private void initializeSubTabSwitching() {
        IHandlerService service = (IHandlerService) getSite().getService(IHandlerService.class);
        service.activateHandler(COMMAND_NEXT_SUB_TAB, new AbstractHandler() {
            // ...
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:55:44.750

这些命令在 org.eclipse.ui.part.MultiPageEditorPart 中以编程方式处理。
分析元素来源的好工具是“插件注册表”视图、“插件间谍”和谷歌。

# jquery - 如何找到这个 div id？

> ID：12880613
> 
> 赞同：0
> 
> 时间：2012-10-14T08:42:48.850
> 
> 标签：jquery, parent

```
<div id="findThisId"></div>

<div id="divID">
    <span id="spanID">
        <p id="pID">p</p>
    </span>
</div>
<br/>
<div id="output"></div> 
```

我已经能够通过以下方式到达父 div `<p>`：

```
$('#pID').parent().parent().attr('id') 
```

但是如何找到以前的 div id？

[http://jsfiddle.net/W5NHH/](http://jsfiddle.net/W5NHH/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T08:50:54.280

这应该适合你

```
$('#pID').closest('div').prev().attr('id'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:44:40.240

您需要做的就是插入一个简单的`.prev()`：

```
$('#output').html($('#pID').parent().parent().prev().attr('id'));​ 
```

请参阅[文档`.prev()`](http://api.jquery.com/prev/)

using 的一个常见缺陷`.prev()`是它实际上只寻找直系兄弟姐妹，因此最终可能会[`.prevAll()`](http://api.jquery.com/prevAll/)在现实世界的情况下使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T08:53:37.453

加入派对有点晚了，但这里有点不同`:)` [http://jsfiddle.net/DF8jK/1/](http://jsfiddle.net/DF8jK/1/)

**父母**API - [http://api.jquery.com/parents/](http://api.jquery.com/parents/)

希望它也适合原因。`:)`

这可能会派上用场 - [jQuery：查找上一个 div](https://stackoverflow.com/questions/2328080/jquery-finding-previous-div)

**代码**

```
alert($('#pID').parents('div').prev().html());​ 
```

# asp.net - 从零开始的会员网站

> ID：12880614
> 
> 赞同：2
> 
> 时间：2012-10-14T08:42:50.593
> 
> 标签：asp.net, .net, asp.net-membership

我是基于数据库的网站的新手。我刚刚从零开始学习设计网站，但现在我正在研究如何在本地制作会员网站（没有 Wordpress、没有 Joomla 等）。

我的网站是一个在线订购网站。注册以将我的客户数据保存在我的数据库中，他/她可以下订单。

我的客户可以重新登录以编辑他们的数据（如地址等）或使用他们保存在我的网站数据库中的相同信息下订单。

我应该先从哪里开始？

有什么基本教程可以用来开始一切吗？我需要什么？视觉工作室 2010？WAMP？IIS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:49:09.717

从这里开始：[http ://www.asp.net/mvc](http://www.asp.net/mvc)

请注意以下段落：

> 什么都没有？此按钮将为您安装所有内容，包括 Visual Studio 2012 和 MVC 4。

您可以使用 Visual Studio Express 并试用提供的 MVC 脚手架（模板）。它提供了一个完整的工作示例，包括数据库访问和成员资格。您可以使用所有、部分或不使用提供的代码。

您还可以按照[此介绍](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)和[此示例音乐商店](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1)等教程进行操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T08:54:52.827

如果您使用 Visual Studio，您将在 ASP.NET 中使用数据库作为 SQL Server 进行开发。如果您使用 WAMP，您将使用 PHP 和数据库作为 MySQL 进行开发。

既然您提到您已经开始学习 ASP.NET，我建议您不要立即使用 Visual Studio，IDE 可能会让您不知所措，至少它做到了。

而是从 w3schools **[HERE](http://www.w3schools.com/aspnet/default.asp)**提供的教程开始。

**为了运行网站，教程提到安装一个名为WebMatrix**的轻量级软件。

 **w3schools 的教程涵盖了表单和数据库连接，这是构建具有注册、登录、编辑详细信息等功能的网站所需的。**

# javascript - 如何判断元素是否具有流体宽度

> ID：12880615
> 
> 赞同：7
> 
> 时间：2012-10-14T08:43:17.710
> 
> 标签：javascript, html, css

> **可能重复：**
> [使用 JavaScript 确定元素是否具有固定宽度或百分比宽度](https://stackoverflow.com/questions/1782566/determine-whether-element-has-fixed-or-percentage-width-using-javascript)

我需要知道一个元素是否具有流体宽度。如果真的需要它，我可以详细说明为什么，但我认为不需要。

基本上，是元素`N%`宽度还是`Npx|pt|em|etc`宽度？现在我只看到获取当前计算宽度的方法。因此，即使一个元素是 100% 宽，在 JS 中获取值也会返回，例如，`500px`或者在那个时刻它有多宽。

是否有任何我不知道的黑客或 JS API 来了解这一点或获取原始 CSS 值？

另外，请不要使用 jQuery。这是我的一个[JS 库](http://epiceditor.com)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:09:09.767

~~您需要使用`window.getComputedStyle`那些支持它的浏览器，以及`element.currentStyle`那些支持它的浏览器。或者你可以使用 jQuery`$(element).css('width')`来抽象差异*（虽然我没有测试过后者）*~~.

似乎以下内容并没有达到我的预期，至少在宽度和高度方面没有。在四处搜索之后，我发现了另一个 SO 问题，它被认为是不可能*的（至少在不解析样式表的情况下是不可能的？！）*。对我来说似乎很生气，我会继续寻找以防万一。

[在jQuery中获取CSS规则的百分比值](https://stackoverflow.com/questions/744319/get-css-rules-percentage-value-in-jquery)

```
if( window.getComputedStyle ) {
  value = window.getComputedStyle(element,null).width;
} else if( element.currentStyle ) {
  value = element.currentStyle.width;
} 
```

### 更新

我发现这行得通……！但仅适用于 firefox :( 对我来说，如果元素没有任何东西可以计算它的宽度（即它不是文档流的一部分），它应该返回它的原始值是有意义的：

```
function isElementFluid(elm){
  var clone = elm.cloneNode(false);
  if( window.getComputedStyle ) {
    value = window.getComputedStyle(clone,null).width;
  } else if( clone.currentStyle ) {
    value = clone.currentStyle.width;
  }
  return (value && String(value).indexOf('%') != -1 );
} 
```

*（尚未针对 IE 进行测试）*

又是一个我同意 FireFox 的实施并对 Chrome 或 Safari 皱眉的例子。

### 更新 2

好吧，不喜欢被电脑打败；）所以想出了这个功能——完全是顶级的，但它似乎确实有效。同样，我还没有在 IE 上对此进行测试，因为目前我手头没有 Windows 机器。当最初的 FF 版本非常简洁时，这很烦人，但这里的逻辑是合理的——它回到了正常人在测试某些东西是否有弹性时会做的事情。

```
function isElementFluid(elm){
  var wrapper, clone = elm.cloneNode(false), ow, p1, p2;
  if( window.getComputedStyle ) {
    value = window.getComputedStyle(clone,null).width;
  } else if( clone.currentStyle ) {
    value = clone.currentStyle.width;
  }
  /// the browsers that fail to work as Firefox does
  /// return an empty width value, so here we fall back.
  if ( !value ) {
    /// remove styles that can get in the way
    clone.style.margin = '0';
    clone.style.padding = '0';
    clone.style.maxWidth = 'none';
    clone.style.minWidth = 'none';
    /// create a wrapper that we can control, my reason for
    /// using an unknown element is that it stands less chance
    /// of being affected by stylesheets - this could be improved
    /// to avoid possible erroneous results by overriding more css
    /// attributes with inline styles.
    wrapper = document.createElement('wrapper');
    wrapper.style.display = 'block';
    wrapper.style.width = '500px';
    wrapper.style.padding = '0';
    wrapper.style.margin = '0';
    wrapper.appendChild(clone);
    /// insert the element in the same location as our target
    elm.parentNode.insertBefore(wrapper,elm);
    /// store the clone's calculated width
    ow = clone.offsetWidth;
    /// change the wrapper size once more
    wrapper.style.width = '600px';
    /// if the new width is the same as before, most likely a fixed width
    if( clone.offsetWidth == ow ){
      /// tidy up
      elm.parentNode.removeChild(wrapper);
      return false;
    }
    /// otherwise, calculate the percentages each time - if they
    /// match then it's likely this is a fluid element
    else {
      p1 = Math.floor(100/500*ow);
      p2 = Math.floor(100/600*clone.offsetWidth);
      /// tidy up
      elm.parentNode.removeChild(wrapper);
      return (p1 == p2) ? Math.round(p1)+'%' : false;
    }
  }
  else {
    p1 = (value && String(value).indexOf('%') != -1);
    return p1 ? value : false;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:53:18.417

您可以使用以下方法检索 CSS 值：

```
element.style.width 
```

这将返回：

```
auto - 浏览器设置宽度。这是默认的
长度 - 以长度单位定义宽度
% - 定义父元素的宽度（以 % 为单位）
inherit - width 属性的值是从父元素继承的

```

返回值粘贴自：[http ://www.w3schools.com/jsref/prop_style_width.asp](http://www.w3schools.com/jsref/prop_style_width.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:08:41.867

我想你要找的是

```
获取计算样式
```

它在 IE8 及以下版本中不受支持，但你可以在 IE 中模拟它，请参阅：[http ://snipplr.com/view/13523/](http://snipplr.com/view/13523/)

# ruby-on-rails - 如何将 Rails 会话 cookie 过期时间设置为“会话”

> ID：12880623
> 
> 赞同：10
> 
> 时间：2012-10-14T08:44:05.413
> 
> 标签：ruby-on-rails, ruby, session, session-timeout

我对不在表面上的 Rails 部分不是很有经验。

我想要的只是有一个会话cookie，它的过期时间设置为`session`这样，当用户离开浏览器或其他任何东西时它就会过期。作为安全措施。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T09:51:33.060

默认情况下，cookie 是会话 cookie。您可以通过在 中提供选项哈希来完全控制 cookie `config/initializers/session_store.rb`。选项与 to 相同`Rack::Session::Cookie`（[**请参阅文档**](http://rubydoc.info/github/rack/rack/master/Rack/Session/Cookie)）。因此，例如，对于特定的到期日期，您可以提供`:expire_after`.

如果您使用的是[设计](https://github.com/plataformatec/devise)和**`rememberable`**策略，那么还有另一个 cookie 可用于检索用户。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T09:04:46.693

你可以配置它。看看这些链接

*   [https://stackoverflow.com/a/1232216/1160106](https://stackoverflow.com/a/1232216/1160106)
*   [https://stackoverflow.com/a/5861018/1160106](https://stackoverflow.com/a/5861018/1160106)

# c# - C# AForge，程序在学习阶段冻结

> ID：12880629
> 
> 赞同：2
> 
> 时间：2012-10-14T08:45:00.233
> 
> 标签：c#, neural-network, aforge

我在玩 AForge。我从 AForge 网站复制粘贴了示例。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using AForge;
using AForge.Neuro;
using AForge.Math;
using AForge.Neuro.Learning;

namespace NeuralNetTest
{
    class Program
    {
        static void Main(string[] args)
        {
            // initialize input and output values
            double[][] input = new double[4][] {
                new double[] {0, 0}, new double[] {0, 1},
                new double[] {1, 0}, new double[] {1, 1}
            };

            double[][] output = new double[4][] {
                new double[] {0}, new double[] {1},
                new double[] {1}, new double[] {0}
            };
            Console.WriteLine("Tworzę sieć neuronową...");
            // create neural network
            ActivationNetwork network = new ActivationNetwork(
                new SigmoidFunction(2),
                2, // two inputs in the network
                2, // two neurons in the first layer
                1); // one neuron in the second layer
            // create teacher
            BackPropagationLearning teacher = new BackPropagationLearning(network);
            Console.WriteLine("Sieć neuronowa uczy się...");
            while (true)
            {
                double error = teacher.RunEpoch(input, output);
                if (error < 0.001) break;
            }
            Console.WriteLine("Uczenie sieci neuronowej zakończone.");
            Console.WriteLine("Sieć jest gotowa obliczać XOR.");

            while (true)
            {
                Console.WriteLine("Wpisz pierwszy bajt: (0 lub 1):");
                double f1 = (double)Convert.ToInt32(Console.ReadLine());
                Console.WriteLine("Wpisz drugi bajt: (0 lub 1):");
                double f2 = (double)Convert.ToInt32(Console.ReadLine());
                double[] netout = network.Compute(new double[2] { f1, f2 });
                Console.WriteLine("{0} XOR {1} to {2}.", (int)f1, (int)f2, netout[0]);
                Console.ReadLine();
            }
        }
    }
} 
```

如您所见，它应该能够计算两位的 XOR。然而。它冻结了学习！它工作正常，但现在每次错误为 0.26981832999407546 时它都会冻结。

它正在工作。现在，BOOM，它不起作用，到底是什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T12:47:54.913

它可能无法收敛，您可以将`teacher.LearningRate`默认值为 0.1 的学习率设置为较低的数字。

另请注意，您的程序在学习过程中冻结，因为这需要时间，您可以在另一个单独的线程上运行培训。

我有一个很好的使用 AForge.NET 和 Accord.NET 的演示，[看看](https://github.com/ammar-lakis/NNSamples).

# java - 向 ArrayList 元素添加空格

> ID：12880631
> 
> 赞同：-2
> 
> 时间：2012-10-14T08:46:08.697
> 
> 标签：java, string, arraylist, whitespace

给定一个 ArrayList 的元素，类似于：

```
List<String> bunchOfLetters = new ArrayList<String>(); 
```

以及添加一些字母的标准方法，例如

```
public void makeUpSomeLetters(){

bunchOfLetters.add("abcdefg"); 
```

我知道要遍历 ArrayList 来检查我需要做的元素

```
for(int i = 0; i<bunchOfLetters.size(); i++)
{ 
```

但我不知道如何在其末尾添加空格，例如使最终结果变为：

```
[abcdefg ] 
```

而不仅仅是

```
[abcdefg] 
```

目的：我想添加所述空格，以便我可以为所述元素获取子字符串，而不会让控制台省略字符。感谢您的时间。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:47:55.920

```
List<String> list = new ArrayList<String>();
list.add("ABCD");
list.set(0, list.get(0) + " ");
System.out.print(list.get(0).equals("ABCD ")); 
```

**输出：**

```
true 
```

# ruby - Heroku 应用程序因“libruby.so.1.9：无法打开共享对象文件”而崩溃

> ID：12880632
> 
> 赞同：9
> 
> 时间：2012-10-14T08:46:10.873
> 
> 标签：ruby, heroku, nokogiri, fog

我在部署这个应用程序时从来没有遇到过问题，但我刚刚推送，现在我收到了这个奇怪的错误，它在堆栈中足够深，甚至没有发送到 Airbrake。我觉得这可能是 Heroku 的问题，可能与[https://status.heroku.com/incidents/450](https://status.heroku.com/incidents/450)有关？你怎么看？

```
2012-10-14T08:40:31+00:00 heroku[web.1]: State changed from starting to crashed
2012-10-14T08:40:31+00:00 heroku[web.1]: State changed from crashed to starting
2012-10-14T08:40:35+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 16119`
2012-10-14T08:40:38+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.5/lib/nokogiri.rb:27:in `require': libruby.so.1.9: cannot open shared object file: No such file or directory - /app/vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.5/lib/nokogiri/nokogiri.so (LoadError)
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.5/lib/nokogiri.rb:27:in `<top (required)>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/fog-1.6.0/lib/fog/core.rb:30:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/fog-1.6.0/lib/fog/core.rb:30:in `<top (required)>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/fog-1.6.0/lib/fog.rb:1:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/fog-1.6.0/lib/fog.rb:1:in `<top (required)>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/config/boot.rb:8:in `<top (required)>'
2012-10-14T08:40:38+00:00 app[web.1]:   from config.ru:7:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from config.ru:7:in `block in <main>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-10-14T08:40:38+00:00 app[web.1]:   from config.ru:1:in `new'
2012-10-14T08:40:38+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/fog-1.6.0/lib/fog/core/parser.rb:1:in `require'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/fog-1.6.0/lib/fog/core/parser.rb:1:in `<top (required)>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `eval'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:71:in `start'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `load'
2012-10-14T08:40:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-10-14T08:40:39+00:00 heroku[web.1]: Process exited with status 1
2012-10-14T08:40:39+00:00 heroku[web.1]: State changed from starting to crashed
2012-10-14T08:40:46+00:00 heroku[router]: Error H10 (App crashed) -> GET paintafish.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:40:17.603

我遇到了类似的问题，但使用的是 kgio (2.7.4) gem。在用完想法后，我只是删除了 heroku 应用程序并重新创建。问题消失了。

# node.js - 是否应该在应用程序设置中调用 ensureIndex？

> ID：12880633
> 
> 赞同：1
> 
> 时间：2012-10-14T08:46:18.800
> 
> 标签：node.js, mongodb, indexing

`ensureIndex`每当应用程序更改时调用是否合适，例如在`app.configure`？

与仅为新的 mongo 实例设置相比，除了启动时间稍慢之外，它还有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:18:33.460

当在已经存在的索引上调用确保索引时，它将注册为无操作。这意味着如果从`app.configure`.

我看不到任何其他缺点，因为该函数只会运行并且如果它已经存在则不会创建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T20:55:18.963

我通常`ensureIndex()`从应用程序 init 调用，包裹在对预期现有集合的检查中。如果集合已经存在，假设数据库已经正确索引并跳过`ensureIndex()`调用。

更多信息： [Mongodb：何时调用 ensureIndex？](https://stackoverflow.com/questions/7000777/mongodb-when-to-call-ensureindex/#19390845)

# helpers - 在 CakePHP 2 中使用 $helper

> ID：12880635
> 
> 赞同：1
> 
> 时间：2012-10-14T08:46:28.953
> 
> 标签：helpers, cakephp-2.2

我有一个关于明确声明 $helper 的问题。这是来自 CakePHP Book 的示例代码。

```
<?php
class PostsController extends AppController {
    public $helpers = array('Html', 'Form');

    ..
} 
```

在我的代码中，我根本没有那个声明，但我的应用程序仍在运行，我可以通过我的网络表单保存数据，我也可以使用 $this->Html->link()。

我真的需要那个声明吗，如果我不需要，会有什么缺点吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:48:06.027

`$helpers`仅当您使用“HTML”和“Form”以外的 Helper 时才需要声明该变量。核心助手 'Html' 和 'Form' 默认加载到`$helpers`数组中，因此如果您只打算使用它们，则不需要声明。

如果要添加自定义助手或使用任何其他核心助手，则必须声明`$helpers`数组。执行此操作时，您将覆盖默认帮助器数组，因此如果您仍打算使用它们，则需要确保再次包含默认值。

```
// Default. You do not need to declare this if you 
// only intend to use these helpers.
$helpers = array('HTML', 'Form'); 

// Add 'CustomHelper' to $helpers array. In this case
// HTML and Form must be declared.
$helpers = array('HTML', 'Form', 'Custom'); 
```

# c# - 如何避免在 C# 中覆盖多个方法？

> ID：12880639
> 
> 赞同：1
> 
> 时间：2012-10-14T08:46:57.503
> 
> 标签：c#

我有一个我们购买的 DLL，但我无法访问它的源代码。然而，对于我现在面临的问题，我被告知我必须从 DLL 中的一个类继承，并重写它的一个方法。

我试过了，效果很好，正如预期的那样。我现在的问题是我有很多类我需要做同样的事情，并且不想多次重复相同的代码。尽管所有这些类都继承自同一个 DLL 类，但在所有这些类中编写相同的代码对我来说并不好。这是一类的代码：

```
public class MyClass : DllClass
{
    protected override void MethodFromDll()
    {
       //here I inserted my code and it works ok
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T08:49:03.017

为什么不创建一个派生自`DllClass`并覆盖那里的方法的抽象类，然后从中派生其他类呢？

```
public abstract class MyClassBase : DllClass
{
    protected override void MethodFromDll()
    {
       //here I inserted my code and it works ok
    }
}

...

public class MyClass : MyClassBase
{
    // Whatever else you need
} 
```

那是假设您首先需要在这里继承-您肯定需要有多个派生类，还是可以有很多`MyClass`由组合使用的类？

# algorithm - 有哪些有效的理解算法的方法？

> ID：12880642
> 
> 赞同：2
> 
> 时间：2012-10-14T08:47:59.477
> 
> 标签：algorithm

有哪些有效的方法可以理解算法的概念？比如对“河内之塔”有很多直观的解释，还有一些“通俗易懂”的算法。但是对于更复杂的算法，我找不到便于理解的动画。

这个问题可能看起来很主观。尽管如此，我相信很多人和我一样想知道是否有更好的方法来更直观地理解算法，因为对于某些人来说，视觉表达的东西变得更容易理解。

# javascript - 在 TinyMCE 已经启动后绑定 onkeydown

> ID：12880643
> 
> 赞同：2
> 
> 时间：2012-10-14T08:48:09.117
> 
> 标签：javascript, jquery, html, tinymce

我喜欢在 tinyMCE 已经为站点启动之后绑定事件 onKeyDown。

`$('#content_ifr').keydown(...);`在这里不起作用。那么怎么可能做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:14:16.620

```
$('#'+your_editor_id + '_ifr').bind('keydown',function(){
    //do what you like here with the event
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:33:03.320

首先，您的 jQuery 选择器无效...它正在寻找一个`content_ifr`肯定不存在的 tagName。假设元素有 ID`content_ifr`用途：

```
$('#content_ifr').keydown(...); 
```

要在 TinyMCE 初始化后调用它，`oninit`请在配置对象中使用 TinyMCS 回调。

参考文档： [http ://www.tinymce.com/wiki.php/Configuration:oninit](http://www.tinymce.com/wiki.php/Configuration:oninit)

您可以随时使用 jQuery 事件委托来调用您的代码，而无需使用 jQuery`on()`或`delegate()`方法在 TinyMCE 配置中调用它

**编辑：** 如果元素是我怀疑它来自选择器的 iframe，则需要使用`contents()`方法`keydown`在 iframe 中绑定事件

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-14T09:07:34.827

你可以这样写：

```
$('content_ifr').bind('keydown',function(){
    //your code goes here
 }); 
```

# django - 我可以在 Django 中删除表单实例吗

> ID：12880645
> 
> 赞同：0
> 
> 时间：2012-10-14T08:48:25.530
> 
> 标签：django, django-forms

我有一个简单的编辑表单，我的想法是在表单中添加一个删除按钮，并在我的视图中使用它。

```
if request.method == 'POST':
    form = myform(request.POST,instance=myobject)
    if request.POST.get('delete'):
        form.delete()
    else:
        if form.is_valid():
            form.save() 
```

这行不通。我可以这样删除，我有错误，还是我应该先查询，然后删除数据`Mydata.objects.get(id=id).delete()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:03:51.353

你不能那样删除。您需要通过查询和删除来获取实例。

此外，您创建表单的方式`form = myform(request.POST,instance=formdata)`也不合适。`instance`应该是对象而不是发布在 中的数据`request.POST`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:00:26.413

事实上，你可以。只需执行 form.instance.delete()
这是可能的，因为您将 myobject 作为实例传递。

**编辑：**再想一想这是没有意义的，因为你也可以做 myobject.delete() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:58:25.940

不，您不能调用`delete()`（看起来像） a `ModelForm`, `myform`.

要删除实例，您仍然需要通过第二种方式调用模型管理器： `Mydata.objects.get(id=id).delete()`.

# java - 为 Jtable 中的单元格设置背景颜色

> ID：12880646
> 
> 赞同：0
> 
> 时间：2012-10-14T08:48:40.957
> 
> 标签：java, swing, jtable

> **可能重复：**
> [更改 JTable 单元格颜色](https://stackoverflow.com/questions/818287/changing-jtable-cell-color)

我必须在 jtable 中设置某些特定单元格的颜色，但是当我编写以下代码时，整个表格都是彩色的

```
Component cell=(Component) jTable2.getCellRenderer(0,0);
                cell.setBackground(Color.BLUE); 
```

在这种情况下，只有 (0,0) 应该被着色。

# c# - 始终在不同线程中创建的其他表单之上显示表单

> ID：12880647
> 
> 赞同：1
> 
> 时间：2012-10-14T08:48:51.950
> 
> 标签：c#, winforms, task-parallel-library

> **可能重复：**
> [设置 WinForms.Form 所有者时的跨线程异常 - 如何正确执行？](https://stackoverflow.com/questions/5273674/cross-thread-exception-when-setting-winforms-form-owner-how-to-do-it-right)

我是 C# Windows 窗体应用程序开发的新手。

在我的应用程序主表单中，我们在其他线程中创建新表单，如下所示。

```
Task.Factory.StartNew(
            () =>
            {
                PlotForm plotForm = new PlotForm();
                Application.Run(plotForm);
            }); 
```

我想始终在主表单的顶部显示该表单。Forms 中有一个最顶层的属性。如果我将其设置为 true，它们也会位于其他表单之上。

在互联网上，据说解决方案是设置所有者属性，当我设置此属性时，我得到了跨线程操作，因为表单是创建不同的线程。

```
Task.Factory.StartNew(
            () =>
            {
                PlotForm plotForm = new PlotForm();
                plotForm.Owner = this;
                Application.Run(plotForm);
            }); 
```

**跨线程操作无效：控件“Form1”从创建它的线程以外的线程访问。**

你知道解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:06:35.560

对于跨线程操作，您需要使用`Invoke`. “invoke”调用告诉表单“请在你的线程而不是我的线程中执行此代码”。

```
Task.Factory.StartNew(
            () =>
            {
                PlotForm plotForm = new PlotForm ();
                this.Invoke((MethodInvoker)delegate()
                {                   
                   plotForm.Owner = a;
                   plotForm.Show();
                });
            }); 
```

# cmake - 如何结合使用 CMake 和干净的目标来复制目录？

> ID：12880655
> 
> 赞同：0
> 
> 时间：2012-10-14T08:49:24.957
> 
> 标签：cmake

如何在 CMake 中定义一个规则，它将递归地将完整的目录结构复制到目标目录，并在`make clean`之后运行时删除复制的目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:56:36.470

利用

```
add_custom_command(OUTPUT ${CMAKE_BINARY_DIR}/target_dir
    COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/dir ${CMAKE_BINARY_DIR}/target_dir)
add_custom_target(copy_dir_target ALL
    DEPENDS ${CMAKE_BINARY_DIR}/target_dir) 
```

CMake 应该自动添加使用 OUTPUT 生成的任何文件/目录`add_custom_command()`。

如果这不起作用，您可以尝试收集您希望复制的文件`file(GLOB ...)`，然后`add_custom_command()`只复制单个文件`foreach(FILE ${FILES})`，最后将所有内容包装到单个`add_custom_command()`调用中。这样每个文件都将被清理，除了目标目录本身。

最后，您可以`ADDITIONAL_MAKE_CLEAN_FILES`在源目录上设置属性，但请务必将文件复制到相应的二进制目录中。

# html - 绝对定位在 IE 中不起作用

> ID：12880657
> 
> 赞同：2
> 
> 时间：2012-10-14T08:49:39.667
> 
> 标签：html, css, internet-explorer, css-position

此代码在 chrome 和 firefox 中完美运行，但在 IE 中，绝对定位的 div 出现在右上角。

```
<div id="three_pictures">
   <img alt="3steps" src="/assets/3steps.jpg">
   <a href="/users/new" style="position: absolute; top: 65px; left: 50px; width: 204px; height: 256px;"></a>
   <a href="/get_a_present" style="position: absolute; top: 16px; left: 273px; width: 191px; height: 303px;"></a>   
   <a href="/posted_presents" style="position: absolute; top: 51px; left: 508px; width: 148px; height: 276px;"></a> 
</div> 
```

和

```
#three_pictures
{
padding-top: 20px;
width: 700px;
position: relative;
background-color: white;
margin: 0px auto;
} 
```

我想在图像的某些区域上有链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:47:55.150

什么是包含元素`#three_pictures`以及它的样式（如果有的话）？

如果没有，那么看起来你`margin: 0px auto;`实际上并没有在`#three_pictures`元素上工作（因为`position:relative;`它上面的样式）所以你需要做的就是将它包装在一个单独的 div 中，它上面有`margin: 0px auto; and width:700px;`样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:22:50.327

这正是他们发明图像地图的目的。它们在 HTML 5 中仍然有效并受支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:53:12.180

首先您更改 id 名称，然后您必须使用此样式代码为其

```
#stepsThree{
   position:relative;
} 
```

我认为这是最好的问候

# wordpress - buddypress 对个人资料的评论

> ID：12880658
> 
> 赞同：0
> 
> 时间：2012-10-14T08:49:48.217
> 
> 标签：wordpress, profile, buddypress

我想将功能添加到 buddypress，我可以在每个个人资料页面上发表评论，是否有此功能的插件，或者我必须编辑代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:37:55.163

看看这篇文章：[http](http://buddydev.com/buddypress/using-activity-as-wire-in-buddypress-1-2-themes/) ://buddydev.com/buddypress/using-activity-as-wire-in-buddypress-1-2-themes/结合 Michal 的评论：http: [//buddydev.com /buddypress/using-activity-as-wire-in-buddypress-1-2-themes/#comment-19742](http://buddydev.com/buddypress/using-activity-as-wire-in-buddypress-1-2-themes/#comment-19742)。

# c++ - SSE 舍入精度

> ID：12880660
> 
> 赞同：1
> 
> 时间：2012-10-14T08:49:54.563
> 
> 标签：c++, optimization, rounding, sse

我对 SSE 舍入有一个小问题。该代码是不言自明的，我试图在 293.05694580 中获得 0.0001 的计数，包括一些舍入（例如，5.21 中有 52 个 0.1）...

```
#include <xmmintrin.h> 
#include <emmintrin.h> 

int main(void)
{
    float val       = (float) 293.05694580;
    float tickSize  = (float)   0.0001;

    __m128 _val     = _mm_set_ps1( val );
    __m128 _shift   = _mm_set_ps1( 1 / tickSize );

    /* 293.0569480 * 10000 should be 2930569.480 */
    __m128 _mul     = _mm_mul_ps(_val, _shift);

    /* Rounding 2930569.480 should get 2930569, but returns 2930570 instead. Why? */
    __m128i _ticks  = _mm_cvtps_epi32( _mul );
} 
```

最后，如何恢复 _ticks 中结果的顺序？非常感谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:03:00.323

检查中间结果，不要假设它

检查/设置 sse 舍入模式

计数使用整数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:38:03.843

如果有人关心，最终的代码是

```
inline void QTickCalcer::tickCountsFromDoubleArray(
        const double * src, int * dest, const unsigned int elemCount) const 
{
/*  src and dest need to be align_malloced              */
__m128i * r  = (__m128i*)dest;

__m128i r1;
__m128i r2;
__m128i rTot;

__m128d * d1 = (__m128d*) & src[0];
__m128d * d2 = (__m128d*) & src[2];

__m128d tmp1;
__m128d tmp2;

for ( register unsigned int i = 0; i < elemCount/4; i++ )
{
    tmp1    = _mm_mul_pd( *d1,  this->_dshiftor);           
    tmp2    = _mm_mul_pd( *d2,  this->_dshiftor);           

    /*  Interleave - http://msdn.microsoft.com/en-us/library/c8c5hx3b(v=vs.71).aspx                 */      
    r1  = _mm_cvtpd_epi32 ( tmp1 );
    r2  = _mm_cvtpd_epi32 ( tmp2 );
    rTot = _mm_unpacklo_epi32 ( r1, r2 );

    /*  Shuffle to match the ordering in src - http://software.intel.com/en-us/forums/topic/309988  */
    *r = _mm_shuffle_epi32( rTot, _MM_SHUFFLE(3,1,2,0));

    d1 += 2;
    d2 += 2;
    r++;
}
}; 
```

感谢所有的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:43:35.470

对于性能和精度，也许您可​​以：

*   仅在精度异常处理程序中使用双精度（取消屏蔽精度异常）
*   如果要求是“需要 X 位数的美分”，您可以将大笔资金放入双数组，将小笔资金放入浮点数组。在此之前从 X 计算你拆分它的数字

# jquery - 使用加载和单击事件使用 jQuery 更改锚点的类

> ID：12880662
> 
> 赞同：0
> 
> 时间：2012-10-14T08:50:25.330
> 
> 标签：jquery, onclick, onload, addclass, removeclass

我有一个锚元素。'page-2' 类调用该页面并使用 JavaScript 显示它：

```
<a id="btn2" class="page-2">Go to page 2</a> 
```

我还有一个使用类“disabledPage2”禁用链接的功能，该类显示一条消息。加载锚元素时，我需要自动添加 disabledPage2 类：

```
var anchorElement = $(this);
if ($(this).hasClass('disabledPage2')) { message.
    new Messi('We need your X info before we can continue.', {title:'Notice'});
    return false;
} 
```

当我手动添加“disabledPage2”类时，它可以正常运行，但我无法自动添加该类。

然后我有一组单选按钮：

```
<?php
   $widthArray = array(380,410,435,460,490,515);
   $x = 0;
   while($result = mysql_fetch_assoc($results)){
   echo '<li>
           <label class="label_radio">' . $result['option_label'] . '
             <input type="radio" name="optionName" class="radioOff" validate="required:true" value="' . $result['ID'] . '" onclick="$(\'#swoosher\').effect(\'size\', {to: {width: '.$widthArray[$x].'} }, 500);"/>
           </label>
         </li>';$x++;}
 ?> 
```

单击单选按钮时，我需要删除“disabledPage2”类。

我尝试创建一个这样的函数来处理加载锚元素时加载禁用类：

```
$('#btn2').load(function(){
  $('#btn2').addClass('disabledPage2');
}); 
```

而这个处理单选按钮的 onclick 事件：

```
$(document).ready(function(){
  $(":input").click(function(){
    $('#btn2').removeClass('disabledPage2');
  });
}); 
```

我试图让它以各种方式工作，但我发现没有任何“解决方案”有效。我对 JavaScript 和 jQuery 有点陌生，显然我做的不对。

有谁知道如何完成我想做的事情，或者你能指出我可以找到答案的地方。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:27:49.720

从 btn2 中删除加载功能：

```
$(document).ready(function(){

   $('#btn2').addClass('disabledPage2');

  //This will work when you click all input elements on your page. why not use the class (redioOdd) like this $(".radioOff").click
  $(":input").click(function(){

       $('#btn2').removeClass('disabledPage2');

  });

}); 
```

# c++ - 如何降低找到最长之字形序列的时间复杂度？

> ID：12880663
> 
> 赞同：0
> 
> 时间：2012-10-14T08:50:27.407
> 
> 标签：c++, algorithm, sequence, dynamic-programming

我试图解决顶部编码器上的锯齿形序列问题。我的代码的时间复杂度是 O(n*n)。如何将其减少到 O(n) 或 O(nlog (n)) 伪代码或算法解释对我真的很有帮助这是问题陈述。问题陈述

> 如果连续数字之间的差异在正负之间严格交替，则数字序列称为之字形序列。第一个差异（如果存在）可以是正面的也可以是负面的。少于两个元素的序列通常是锯齿形序列。
> 
> 例如，1,7,4,9,2,5 是锯齿形序列，因为差值 (6,-3,5,-7,3) 交替出现正负。相反，1,4,7,2,5 和 1,7,4,5,5 不是之字形序列，第一个是因为它的前两个差是正数，第二个是因为它的最后一个差是零。
> 
> 给定一个整数序列，sequence，返回序列的最长子序列的长度，即锯齿形序列。子序列是通过从原始序列中删除一些元素（可能为零）而获得的，而其余元素则保持其原始顺序。

这是我的代码

```
#include <iostream>
#include<vector>
#include<cstring>
#include<cstdio>
using namespace std;

class ZigZag
{
  public:
  int dp[200][2];
  void print(int n)
  {
      for(int i=0;i<n;i++)
      {
          cout<<dp[i][0]<<endl;
      }
  }
  int longestZigZag(vector<int> a)
  {
      int n=a.size();
      //int dp[n][2];
      for(int i=0;i<n;i++)
      {
          cout<<a[i]<<" "<<"\t";
      }
      cout<<endl;
      memset(dp,sizeof(dp),0);
      dp[0][1]=dp[0][0]=1;
      for(int i=1;i<n;i++)
      {
            dp[i][1]=dp[i][0]=1;

            for(int j=0;j<i;j++)
            {
                if(a[i]<a[j])
                {
                   dp[i][0]=max(dp[j][1]+1,dp[i][0]);
                }
               if(a[j]<a[i])
               {
                    dp[i][1]=max(dp[j][0]+1,dp[i][1]);
               }
            }
            cout<<dp[i][1]<<"\t"<<dp[i][0]<<" "<<i<<endl;
            //print(n);
      }
      cout<<dp[n-1][0]<<endl;
      return max(dp[n-1][0],dp[n-1][1]);
  }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:41:48.340

你可以使用**贪婪**的方法在**O(n)**中做到这一点。取第一个不重复的数字 - 这是您的之字形子序列的第一个数字。检查数组中的下一个数字是否小于或大于第一个数字。

 ****案例1：**如果**lesser**，检查下一个元素并继续直到找到最小元素（即）之后的元素将大于前一个元素。这将是你的第二个元素。

**情况2：**如果**更大**，检查下一个元素并继续直到找到最大元素（即）之后的元素将小于前一个元素。这将是你的第二个元素。

如果您使用案例 1 找到第二个元素，请使用案例 2 找到第三个元素，反之亦然。在这两种情况之间保持交替，直到原始序列中没有更多元素。你得到的结果数字将形成最长的锯齿形子序列。

**例如：{ 1, 17, 5, 10, 13, 15, 10, 5, 16, 8 }**

结果子序列：

**1 -> 1,17（情况 2）-> 1,17,5（情况 1）-> 1,17,5,15（情况 2）-> 1,17,5,15,5（情况 1）- > 1,17,5,15,5,16 (案例 2) -> 1,17,5,15,5,16,8 (案例 1)**

因此最长之字形子序列的长度为 7。

你可以参考 sjelkjd 的[解决方案](http://community.topcoder.com/stat?c=problem_solution&cr=107835&rd=4493&pm=1259)来实现这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:28:08.407

由于子序列不一定是连续的，因此您不能使其成为 O(n)。在最坏的情况下，复杂度为 O(2^n)。但是，我做了一些检查以尽快切断子树。

```
int maxLenght;

void test(vector<int>& a, int sign, int last, int pos, int currentLenght) {
    if (maxLenght < currentLenght) maxLenght = currentLenght;
    if (pos >= a.size() || pos >= a.size() + currentLenght - maxLenght) return;
    if (last != a[pos] && (last - a[pos] >= 0) != sign) 
        test(a,!sign,a[pos],pos+1,currentLenght+1);
    test(a,sign,last,pos+1,currentLenght);
}

int longestZigZag(vector<int>& a) {
    maxLenght = 0;
    test(a,0,a[0],1,1);
    test(a,!0,a[0],1,1);
    return maxLenght;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T08:26:19.593

`O(n)`您可以在时间和`O(n)`额外空间中解决这个问题。

算法如下。

1.  将替代项的差异存储在新的大小数组中`n-1`
2.  现在遍历新数组并检查替代项的乘积是否小于零。
3.  相应地增加结果。如果在遍历时发现数组的乘积大于零，则在这种情况下存储结果并再次开始计算差异数组中的其余元素。
4.  找出其中的最大值，将其存储到结果中，然后`return (result+1)`

这是它在 C++ 中的实现

```
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    ios_base::sync_with_stdio(false);
    int n;
    cin>>n;
    vector<int> data(n);
    for(int i = 0; i < n; i++)
        cin>>data[i];
    vector<int> diff(n-1);
    for(int i = 1; i < n; i++)
        diff[i-1] = data[i]-data[i-1];
    int res = 1;
    if( n < 2)
        cout<<res<<"\n";
    else
    {
        int temp_idx = 0;
        for(int i = 1; i < n-1; i++)
        {
            if(diff[i]*diff[i-1] < 0)
            {
                temp_idx++;
                res++;
            }
            else
            {
                res = max(res,temp_idx);
                temp_idx = 1;
            }
        }
        cout<<res+1<<"\n";
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:00:49.687

您可以使用[RMQ](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Segment_Trees)删除内部 for 循环。当您找到 and 的答案时`dp[i][0]`，`dp[i][1]`将其保存在两个 RMQ 树中 - 例如 RMQ [0]和 RMQ [1] - 就像您现在对`dp`数组的两行所做的那样。因此，当您计算 时`dp[i][0]`，您将值`dp[i][0]`放在`a[i]`RMQ [0]中的位置上，这意味着存在一个长度`dp[i][0]`以数字结尾逐渐增加的锯齿形序列`a[i]`。

然后，为了计算`dp[i + 1][0]`，您不必遍历 0 和 之间的所有数字`i`。相反，您可以查询 RMQ [0]以获取位置 > 上的最大数字`a[i + 1]`。这将为您提供以大于当前数字的数字结尾的最长 zig-zag 子序列 - 即可以随着数字 递减而继续递减的最长子序列`a[i + 1]`。然后，您可以对另一半之字形子序列的RMQ [1执行相同的操作。]

由于您可以实现查询复杂度为 的动态 RMQ `O(log N)`，因此总体复杂度为`O(N log N)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-14T07:06:13.643

**这是一个纯粹的理论解决方案。如果你在学术环境中被问到，站在黑板旁边，这就是你解决问题的方法。**

可以使用动态规划创建问题的解决方案：

子问题的形式是：如果我有序列的元素 x，那么以该元素结尾的最长子序列是什么？

然后你可以使用递归调用来计算你的解决方案，它应该看起来像这样（关系的方向可能是错误的，我没有检查过）：

```
S - given sequence (array of integers)
P(i), Q(i) - length of the longest zigzag subsequence on elements S[0 -> i] inclusive (the longest sequence that is correct, where S[i] is the last element)

P(i) = {if i == 0 then 1
   {max(Q(j) if A[i] < A[j] for every 0 <= j < i)

Q(i) = {if i == 0 then 0  #yields 0 because we are pedantic about "is zig the first relation, or is it zag?". If we aren't, then this can be a 1.
   {max(P(j) if A[i] > A[j] for every 0 <= j < i) 
```

这应该是`O(n)`正确的记忆（存储 Q(i) 和 P(i) 的每个输出），因为每个子问题只计算一次`n*|P| + n*|Q|`：

这些调用返回解决方案的长度——只要找到最大值，就可以通过存储“父指针”找到实际结果，然后在这些指针上向后遍历。

您可以简单地通过用数组查找替换函数调用来避免递归：`P[i]`和`Q[i]`，并使用`for`循环。**

# javascript - 交替向前和向后执行 javascsript for 循环

> ID：12880669
> 
> 赞同：5
> 
> 时间：2012-10-14T08:50:59.700
> 
> 标签：javascript, for-loop, reverse

**更新如下**

我正在尝试做的是以块的形式遍历数组，从块到块交替迭代的方向。使困惑？我也是。例如，如果我想遍历一个包含 25 个元素的数组，但我想按以下顺序执行：0、1、2、3、4、9、8、7、6、5、10 , 11, 12, 13, 14, 19, 18, 17, 16, 15, 20, 21, 22, 23, 24，最有效的方法是什么？我正在寻找可扩展的东西，因为我现在使用的数组实际上是 225 个元素，我想在 15 个元素块中遍历它，但这可能会在某个时候改变。到目前为止，我发现真正有效的唯一方法是将迭代顺序硬连接到第二个数组中，然后以正常方式遍历该数组以获得原始数组的索引。但这很糟糕。任何帮助将不胜感激。

@Bergi 要求提供一些示例代码。请不要打我太多。我还是菜鸟：

```
function zeroPadNumber(theNumber, thePadding) {
    var thePaddedNumber = thePadding.substring(0, (thePadding.length - theNumber.length)) + theNumber;
    return thePaddedNumber;
}

var thisTile = 225;
var waveLoop = 15;
function mosaicWave() {
    var theStartNum = thisTile;
    for (w = 0; w < 15; w++) {
        var theNum = theStartNum - w;
        var theNumString = String(theNum); 
        var thePaddedNum = zeroPadNumber(theNumString, "000");
        var theImgName = "sm_" + thePaddedNum;
        var theNewSrc = theImgFolder + theImgName + "bg.gif";
        document.images[theImgName].src = theNewSrc;
        thisTile = theNum - 1;
        if (waveLoop < 15) {
            var prevStartTile = theStartNum + 15;
            var thePrevNum = prevStartTile - w;
            var thePrevNumString = String(thePrevNum); 
            var thePrevPaddedNum = zeroPadNumber(thePrevNumString, "000");
            var thePrevName = "sm_" + thePrevPaddedNum;
            var thePrevSrc = theImgFolder + thePrevName + ".gif";
            document.images[thePrevName].src = thePrevSrc;
        }
    }
    if (waveLoop == 1) {
        var lastWave = function() {
            var theStartNum = 15;
            for (c = 0; c < 15; c++) {
                var theNum = theStartNum - c;
                var theNumString = String(theNum); 
                var thePaddedNum = zeroPadNumber(theNumString, "000");
                var theImgName = "sm_" + thePaddedNum;
                var theNewSrc = theImgFolder + theImgName + ".gif";
                document.images[theImgName].src = theNewSrc;
            }
        }
        setTimeout(lastWave, 100);
        waveLoop = 15;
        thisTile = 225;
    } else {
        waveLoop--;
        setTimeout(mosaicWave, 100);
    }
} 
```

这个片段做了一个不同的动画。它从矩阵的右下角开始，“打开”底行的 15 个图块。然后它向上移动一行，打开该行中的瓷砖并关闭前一行中的瓷砖。依此类推，直到顶行打开然后关闭。与我试图在新功能中实现的自上而下的蛇形效果相距不远。每行的颠倒顺序是让我难过的主要事情。话虽如此，任何有关优化上述代码的建议也将不胜感激。

**更新 1：**

对我来说，这似乎应该有效，但事实并非如此。谁能发现问题？

```
var loopRange = 225;
var blockRange = 15;
var theDirection = 1;
var weaveLoop = 0;

function mosaicWeave() {
    var curObj, curSrc, lastObj, lastSrc;
    var toggleLeadTile = function() {
        alert(curSrc);
        curObj.src = curSrc;
    };
    var toggleLastTile = function() {
        lastObj.src = lastSrc;
    };
    while (weaveLoop < loopRange) {
        imgNum = weaveLoop + 1;
        imgName = "sm_" + zeroPadNumber(String(imgNum), "000");
        if (imgNum < 15) {
            //handle first row
            curObj = document.images[imgName];
            curSrc = theImgFolder + imgName + "bg.gif";
            window.setTimeout(toggleLeadTile, 100);
        } else if (imgNum == 225) {
            //handle last row
            curObj = document.images[imgName].src;
            curSrc = theImgFolder + imgName + "bg.gif";
            window.setTimeout(toggleLeadTile, 100);
            for (i = 211; i < 226; i++) {
                lastImgName = "sm_" + ((weaveLoop + 1) - 15);
                lastObj = document.images[lastImgName];
                lastSrc = theImgFolder + lastImgName + ".gif";
                window.setTimeout(toggleLastTile, 100);
            }
        } else {
            //handle middle rows
            lastImgName = "sm_" + ((weaveLoop + 1) - 15);
            curObj = document.images[imgName];
            curSrc = theImgFolder + imgName + "bg.gif";
            lastObj = document.images[lastImgName];
            lastSrc = theImgFolder + lastImgName + ".gif";
            window.setTimeout(toggleLeadTile, 100);
            window.setTimeout(toggleLastTile, 100);
        }
        if (weaveLoop % blockRange == (theDirection == -1 ? 0 : blockRange - 1)) {
            theDirection *= -1;
            weaveLoop += blockRange;
        } else {
            weaveLoop += theDirection;
        }
    }
} 
```

**更新 2：**

感谢大家的意见。这有效：

```
var resetLoop = 1;
var weaveArray = new Array(225);
var weaveRange = 15, weaveDirection = 1, weaveIndex = 0, wInitLoop = 0;

function mosaicWeave() {
    while (weaveIndex < 225) {
        weaveArray[wInitLoop] = weaveIndex + 1;
        if (weaveIndex % weaveRange == (weaveDirection == -1 ? 0 : weaveRange - 1)) {
            weaveDirection *= -1;
            weaveIndex += weaveRange;
        } else {
            weaveIndex += weaveDirection;
        }
        wInitLoop++;
    }
    mWeaveOn();
}

function mWeaveOff() {
    var theNumString = String(weaveArray[resetLoop - 16]); 
    var theImgName = "sm_" + zeroPadNumber(theNumString, "000");
    document.images[theImgName].src = "images/" + theImgName + ".gif";
    mosaicArray[resetLoop - 1] = 0;
    resetLoop++;
    if (resetLoop < 226) {
        setTimeout(mWeaveOn, 25);
    } else if (resetLoop > 225 && resetLoop <= 240) {
            setTimeout(mWeaveOff, 25);
    } else {
        resetLoop = 1;
    }
}

function mWeaveOn() {
    var theNumString = String(weaveArray[resetLoop - 1]); 
    var theImgName = "sm_" + zeroPadNumber(theNumString, "000");
    document.images[theImgName].src = "images/" + theImgName + "bg.gif";
    mosaicArray[resetLoop - 1] = 1;
    if (resetLoop < 16) {
        resetLoop++;
        setTimeout(mWeaveOn, 25);
    } else {
        setTimeout(mWeaveOff, 25);
    }
} 
```

有没有人对是否有更有效的方法有意见？或者在不同的平台/浏览器或不同的情况下，这可能会如何中断？再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T09:17:25.220

```
var arr = [0,1,2,3,4,5,6,7,8,9,10,11,11,13,14,15,16,17,18,19,20,21,22,23,24],
    i = 0,
    j = arr.length,
    tmp,
    chunk = 5;

while(i < j) {
    tmp = arr.slice(i, i+=chunk);
    if ((i / chunk) % 2 == 0) {
        tmp = tmp.reverse();
    }
    console.log(tmp);
} 
```

***[演示。](http://jsfiddle.net/mSZb4/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:05:35.293

这是一个灵活的解决方案，您可以根据需要更改块大小。

```
var index, max = 25;
for (var i = 0; i < max; i++) {
  if (parseInt(i / 5) % 2)
    index = parseInt(i / 5)*5 + 4 - i % 5;
  else
    index = i;
  // use index as array index
  foo(index);
} 
```

[小提琴](http://jsfiddle.net/5de6L/)

如果您总是有 5 的倍数，您可以在五个元素上硬编码迭代并执行一个外部循环，该循环计数`max/5`并切换到正确的硬编码迭代。

```
var index, max = 25;
for ( var i=0; i<max/5; i++) {
  if (i%2) {
    foo(i*5+4);
    foo(i*5+3);
    foo(i*5+2);
    foo(i*5+1);
    foo(i*5+0);
  } else {
    foo(i*5+0);
    foo(i*5+1);
    foo(i*5+2);
    foo(i*5+3);
    foo(i*5+4);
  }
} 
```

[小提琴](http://jsfiddle.net/fUQXF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T14:50:48.027

我想最简单和最清晰的解决方案是嵌套两个厕所：

```
var arr = new Array(25),
    chunksize = 5;
for (var i=0; i<arr.length; i+=chunksize)
    if (i % (chunksize*2))
         for (var j=i+chunksize-1; j>=i; j--)
             exec(j);
    else
         for (var j=i; j<i+chunksize; j++)
             exec(j); 
```

但是，您也可以只使用一个循环和循环计数器。在正确的位置（4, 5, 14, 15, ...），方向（增量/减量）会改变，计数器会跳转一个块大小（4→9, 5→10, 14→19, ...）：

```
var arr = new Array(25),
    chunksize = 5;

var dir = 1,
    i = 0;
while (i<arr.length) {
    exec(i); // or whatever you need to do
    if (i % chunksize == (dir==-1 ? 0 : chunksize - 1)) {
        dir *= -1;
        i += chunksize;
    } else
        i += dir;
} 
```

或者，在一个 for 语句中：

```
for (var dir=1, i=0; i<arr.length; i+= (i+1)%chunksize == (dir==-1) ? (dir*=-1) && chunksize : dir)
    exec(i); // or whatever you need to do 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T08:55:28.140

这个函数接受一个数组和一个块大小（在你的例子中，5）

```
function forwardAndBack(arr, blocksize){
  var i, j, l = arr.length ;
  for (i = 0 ; i < l ; i++){
    if (i % (2 * blocksize) > (blocksize - 1)){
      j = i + (blocksize - (2*(i % blocksize)))-1 ;
    }
    else {
      j = i ; 
    }
    arr[j] && myFunction(arr[j]) ;  // In case you've gone too high
  }
} 
```

像这样使用：

```
var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24] ;
var result = [] ;
function myFunction(x){result.push(x)} ;

forwardAndBack(arr, 5);

console.log(result) ;  // returns [0, 1, 2, 3, 4, 9, 8, 7, 6, 5, 10, 11, 12, 13, 14, 19, 18, 17, 16, 15, 20, 21, 22, 23, 24] 
```

# box2d - Box2D 中“地体”的目的是什么？

> ID：12880673
> 
> 赞同：3
> 
> 时间：2012-10-14T08:51:46.250
> 
> 标签：box2d, jbox2d

我刚刚开始在 java 中为一个班级制作一个 Asteroids 克隆游戏。这是我第一次使用 Box2D，所以我试图确保我了解类层次结构的基础知识。

我感到困惑的一件事是[Box2D 手册](http://www.box2d.org/manual.html#_Toc258082968)中的内容。在谈论如何制作不同的身体时，它开始谈论“地面身体”，它是静态的。地面主体是世界层次结构的推荐部分吗？或者它只是用来作为其他物体休息的表面的东西？如果它只是一个表面，我应该在 Asteroids 游戏中使用它吗？

我正在查看示例测试平台中的几个物理演示。离小行星最近的一个叫做“应用力”，它有一个接地体，尽管它实际上并没有接地。

任何关于它如何工作的解释都会很有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T08:33:43.460

我认为你应该有一个设置 isSensor = YES 的地面体。这样你就不会在地面上发生任何碰撞。所以你的物体会通过。您还可以检查您的物体是否接触到传感器，然后您可能想要删除屏幕外的物体。否则，您必须自行安排检查对象何时离开屏幕，然后删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T07:11:04.973

这不是必需的，但如果你没有一个，一切都会从屏幕底部掉下来。

可能的问题？如果您长时间运行该程序，则除此之外，其他事情可能会从顶部循环回来

# vb.net - 如何获取祖父节点的标签属性（值）

> ID：12880677
> 
> 赞同：1
> 
> 时间：2012-10-14T08:52:30.153
> 
> 标签：vb.net

我是该网站的新手，也是 VB.net 的新手。我想在单击 Grand 孩子时在树视图控件中获取 Grand Parent 节点的 Tag 值。我有一个从数据库表填充的树，并且对于每个节点，我将 Tag 属性设置为绑定到一个整数。这棵树有三个层次。

-祖父

- 父亲

- -孩子

-祖父

- 父亲

- -孩子 。. . 等等...

我真正需要的是，当我点击子节点时，我想存储这个子 na 变量的祖父的标签值......

我希望你明白我需要什么。任何帮助都将受到高度赞赏。

# java - /Library/Java/Extensions 的作用是什么 - 从那里添加或删除类是否安全？

> ID：12880678
> 
> 赞同：4
> 
> 时间：2012-10-14T08:52:41.633
> 
> 标签：java, macos, classpath

该目录`/Library/Java/Extensions`对 Mac OSX 的 Java 框架起什么作用？

是否由 Apple 的 Java 更新自动更新，在不影响 JVM 或 Java 应用程序稳定性的情况下修改目录保存的内容是否安全？

**编辑**：具体来说，如果现有的 jar`Extensions`导致冲突，那么从目录中删除类有什么影响`Extensions`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:08:48.257

查看[Java 开发指南 for Mac](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/01-JavaOverview/JavaOverview.html#//apple_ref/doc/uid/TP40001883-SW1)。

> 可以通过将 custom.jar、.zip 和 .class 文件以及本机 JNI 库添加到扩展目录来扩展 Java。**在 OS X 中，将您的扩展放在 /Library/Java/Extensions/ 中。Java 在启动 Java 虚拟机时会自动查找此目录。**
> 
> 将扩展放入 /Library/Java/Extensions/ 会为该特定计算机上的每个用户加载这些扩展。最好限制哪些用户可以使用某些扩展，方法是将它们放在适当用户主目录内的 ~/Library/Java/Extensions/ 目录中。默认情况下，该文件夹不存在，因此您可能需要创建它。**尝试在应用程序中包含所有依赖库，而不是依赖 Java Extensions 目录，因为它的内容是未版本化的，并且无法容纳同一库的多个版本。**

# java - Spring 中 DynamoDB 的事务策略

> ID：12880680
> 
> 赞同：5
> 
> 时间：2012-10-14T08:52:55.643
> 
> 标签：java, spring, transactions, jta, amazon-dynamodb

在 Java Spring 应用程序中启用 AWS DynamoDB 上的多操作更新的事务性最合适的方法是什么？

AWS 的 DynamoDB 仅在每行更新时是原子的。我需要将二级索引维护为单独的表，因此我将在主表中插入“主”行，然后在二级索引表中插入一行。如果第二次插入失败，我想“回滚”第一次，以保持我的数据一致。DynamoDB 对事务或回滚没有任何本机支持。

在使用 Hibernate 等 JPA 数据源时，我熟悉使用 Spring 事务管理器，但我不确定实现我自己的事务管理代码的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:57:07.517

我们也有类似的要求。我们采用的是“多语言”方法。那就是将事务部分（您的主表）保存在关系数据库中。仅在主表中提交事务后更新 DynamoDB 中的二级索引。

# android - Android 应用提交。删除日志的简单方法？

> ID：12880686
> 
> 赞同：3
> 
> 时间：2012-10-14T08:53:35.750
> 
> 标签：android, logging, google-play

Android 应用程序提交说，在提交之前删除任何日志记录。关于这个有几个问题

1.  是否`System.out.println`被视为日志记录？如何在整个应用程序中禁用它而不必将其删除
2.  在清单中尝试过`android:debuggable="false"`，但 Eclipse 说“避免对调试模式进行硬编码；将其排除在外允许调试和发布版本自动分配一个”
3.  我有一些第三方 jar 文件在我测试我的应用程序时显示 Log 语句。考虑到我没有来源，我该如何删除它们。

建议高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:00:39.140

我确定您已经遇到了这样一个事实，即您可以使用 if(GLOBAL_VALUE) 技巧，因为您的日志已经存在！

因此，我的建议是使用 Proguard；[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

以下 proguard.cfg 块指示删除 Log.d 调用。

```
-assumenosideeffects class android.util.Log {
    public static *** d(...);
} 
```

您可以根据您放在那里的值对其他调用（如 Log.i、Log.e 等）执行此操作！

至于你的 Jar，如果它引用了 Android Log 系统，ProGuard 应该负责处理。

# c# - Asp.net & 文件修改？

> ID：12880690
> 
> 赞同：4
> 
> 时间：2012-10-14T08:54:06.887
> 
> 标签：c#, asp.net, .net, iis-7, appdomain

我们正在更改文件并将其*上传*到 Web 服务器。

*一劳永逸*，我想知道更改文件将如何影响iis的Appdomain

*我目前使用网站 - 所以我是根据我的知识写的。*

中的值是`web Application`什么？（X中修改的文件将如何影响iis中的Appdomain？）

```
______________________________|_ Web Application _|___ Web Site _____________

changed Global.asax           |                   |     restarted 
                              |                   |
                              |                   |   
changed web.config            |                   |     restarted 
                              |                   |
                              |                   |
changed CS file               |                   |      nothing
                              |                   |
                              |                   |
changed Aspx file             |                   |      nothing
                              |                   |
                              |                   |
changed App_code(folder) file |                   |     restarted 
                              |                   |
                              |                   |
changed BIN(folder) dll file  |                   |     restarted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:51:57.047

当以下任何一项被修改时，应用程序池将被回收：

*   网络配置
*   机器配置
*   全球.asax
*   bin目录
*   app_code 目录

应用程序池可能会因其他原因而被回收，例如，通过明确将其配置为在特定时间或一定时间后回收。

除非将这些文件写入上述目录之一，否则修改静态文件（.js、.css、.html、.jpg 等）不会触发回收。

# ios - IOS语音来电拒接

> ID：12880693
> 
> 赞同：0
> 
> 时间：2012-10-14T08:54:35.473
> 
> 标签：ios

ios中是否可以以编程方式拒绝语音呼叫并自动发送短信。如果是，那么使用哪个api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:28:57.617

这是不可能的，作为第 3 方开发人员，您无法使用设备的核心功能。

# jquery - 在链接点击时获取渲染器函数内jquery数据表的rowIndex？

> ID：12880700
> 
> 赞同：2
> 
> 时间：2012-10-14T08:55:57.337
> 
> 标签：jquery, html, datatables

这是我在数据表中添加列的小代码片段。我想在“addCustomer”函数中传递数据表的行索引。基本上，如果我在 datable 中有 100 个客户并且当我单击 labelCustName 链接时，我想在 addCustomer 函数中获取该行索引？

```
 "aoColumns": [     { "mDataProp": "checkbox","bSortable": false,"bSearchable": false},
                   { "mDataProp": "Subject","bSearchable": true,
                 "fnRender": function ( o, val ) {
                 var custId =o.aData["custId"];
                 var labelCustName = o.aData["CustName"];
                 var dept = o.aData["CustDept"];
                 custId = "<a href= \"javascript:addCustomer(curRoWId);\">"labelCustName "</a>";  
                 return custId;
                   }
            }
           ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:26:24.687

我们可以得到 rowindex insise 渲染函数

```
 o.iDataRow 
```

# c# - 如何检查角色的字符串数组并返回最高级的角色？

> ID：12880701
> 
> 赞同：0
> 
> 时间：2012-10-14T08:56:35.823
> 
> 标签：c#

以下代码为我的用户返回一组角色：

```
var userRoles = Roles.GetRolesForUser(); 
```

可能的角色是：

```
public enum RoleType
{
    Default = 10,
    Guest = 20,
    User = 30,
    Admin = 40,
    Super = 50
} 
```

如何通过 userRoles 数组检查我的代码并返回它可以找到的最高 RoleType？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:59:07.680

```
var highestRole = userRoles.Max(); 
```

做你想做的事。

*（您需要`using System.Linq;`在文件顶部添加此功能）*

**更新 1：** 在线工作示例：http: [//ideone.com/U1hXK](http://ideone.com/U1hXK)

**更新 2：**

上面的示例假定这`userRoles`是一个`RoleType`值数组。

如果`userRoles`是代表角色类型的s数组`string`，那么我们需要先解析这些值。代码现在变为：

```
var highestRole = userRoles
    .Select(r => Enum.Parse(typeof(RoleType), r))
    .Max(); 
```

在线工作示例：http: [//ideone.com/JHHva](http://ideone.com/JHHva)

# c# - 将二维数组放入列表框中

> ID：12880707
> 
> 赞同：0
> 
> 时间：2012-10-14T08:57:26.143
> 
> 标签：c#, arrays, listbox

所以我有这个数组

```
string[,] cars = new String[2, 2] { 
                { "VW Golf GTI", "30000" }, 
                { "Porsche GT3", "300000" }, 
                { "Porsche Cayenne", "80000" }, 
                { "BMW M6", "90000" } 
            }; 
```

并且想把所有东西都放在一个列表框中，我认为这会起作用，但它没有：/

```
lstBoxMarket.Items.AddRange(cars); 
```

现在我如何将所有内容以格式放入列表框中

汽车 - 价格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:03:54.153

试试这个：

```
string[,] cars = new string[4, 2] {
    { "VW Golf GTI", "30000" },
    { "Porsche GT3", "300000" },
    { "Porsche Cayenne", "80000" },
    { "BMW M6", "90000" }
};

for (int i = 0; i < cars.GetLength(0); i++)
{
    lstBoxMarket.Items.Add(cars[i, 0] + " - " + cars[i, 1]);
} 
```

您的版本`cars`当前不会编译，因为您正在为数组初始值设定项（2 行 x 2 列）指定常量，但您的数据有 4 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:30:09.830

更好的方法是将 ItemsSource 绑定到数据模型 Car 类型的新类的 ObservableCollection

你的看法

**.xaml**

```
<StackPanel>
        <ListBox ItemsSource="{Binding DataCollection}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" />
                    <TextBlock Text=" - "/>
                    <TextBlock Text="{Binding Id}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
        </ListBox>
</StackPanel> 
```

你的模型 **Car.cs**

```
public class Car
{
    public string Name { get; set; }
    public int Id { get; set; }
} 
```

您的视图模型将有一个 Collection 将绑定到 ItemsSource

**CarViewModel.cs**

```
public ObservableCollection<Car> DataCollection { get; set; }

DataCollection = new ObservableCollection<Car> 
{ 
    new Car { Name = "VW Golf GTI", Id = 30000 }, 
    new Car { Name = "Porsche GT3", Id = 30000 }, 
    new Car { Name = "Porsche Cayenne", Id = 80000 }, 
    new Car { Name = "BMW M6", Id = 90000 }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T09:29:12.217

USE`DataSource`属性加载多维数组的数据。

```
listBox1.MultiColumn = true;
    listBox1.DataSource = cars; 
```

# debugging - IE10 不使用 IE10“文档模式”接收来自 ActiveX 对象的事件

> ID：12880710
> 
> 赞同：3
> 
> 时间：2012-10-14T08:57:51.000
> 
> 标签：debugging, events, activex, internet-explorer-10, forward-compatibility

IE10 使用标准文档模式不获取 ActiveX 事件，在以前版本的 IE 上相同的控件触发事件，并且在触发时通知 IE。

我使用具有这种模式的代码来处理事件：'alert(true);'

'true' 仅在使用 IE9 和更低的文档模式时发出警报

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T02:33:41.317

以下是一些原因：

*   通过[组策略](http://support.microsoft.com/kb/2522815)或[用户设置启用](http://msdn.microsoft.com/en-us/library/ie/gg699456)[ActiveX 过滤](http://blogs.msdn.com/b/ie/archive/2011/02/28/activex-filtering-for-consumers.aspx)
*   [由于证书过时](http://blogs.msdn.com/b/ieinternals/archive/2012/06/13/windows-internet-explorer-block-rsa-key-shorter-than-1024-bits.aspx?Redirected=true)，ActiveX 被阻止
*   IE10 在 Metro 模式下运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T13:57:27.597

在这里找到了一个对我有用的解决方案：http: [//social.msdn.microsoft.com/Forums/ie/en-US/34a8d6e5-c14a-48ef-af49-a9f970697564/are-activex-control-events-still-在 ie10 标准模式中支持？forum=ieextensiondevelopment](http://social.msdn.microsoft.com/Forums/ie/en-US/34a8d6e5-c14a-48ef-af49-a9f970697564/are-activex-control-events-still-supported-in-ie10-standards-mode?forum=ieextensiondevelopment)

它演示了使用“eval”：

eval('function ActivexID::OnLoad(msg) { alert(msg); }');

# php - PHP IRC BOT 无法连接

> ID：12880711
> 
> 赞同：0
> 
> 时间：2012-10-14T08:58:09.580
> 
> 标签：php, sockets, connect, bots, irc

2 年前它起作用了，现在却出现了一些令人讨厌的错误，我找不到它为什么不起作用的答案：

```
$this->BotSocket = socket_create(AF_INET,SOCK_STREAM,SOL_TCP);
    if (!$this->BotSocket) {
        die('Socket error1 : '.socket_strerror(socket_last_error()));
    }
    /**
     * Bind the socket to make it irc'able 
     */

    if(!socket_bind($this->BotSocket, $this->BotConfig['hostname'])) { 
        die('Socket error2 : '.socket_strerror(socket_last_error()));
    }

    if(!socket_connect($this->BotSocket, $this->BotConfig['server'], $this->BotConfig['port'])) { 
        die('Socket error3 : '.socket_strerror(socket_last_error()));
    } 
```

和连接字符串：

```
 $this->BotConfig = array(

        /**
         * Bot configuration for information
         */

        'nickname' => 'Muts',
        'realname' => 'Vii personal funbot',
        'ident'    => 'Muts',

        /**
         * Bot server configration
         */

        'hostname' => 0,
        'server'   => 'OGN2.OnlineGamesNet.net',
        'port'     => 6667, 
```

（数组中有更多它是正确关闭的）和我得到的错误：

> 警告：socket_connect() [function.socket-connect]：无法连接 [110]：第 225 行 /home/patrick/domains/xxxx/public_html/muts/bot.php 中的连接超时 套接字错误 3：连接超时

有人可以帮我解决这个问题吗？

还值得注意： - 使用 telnet 使用相同的连接设置 - 使用 mIRC 使用相同的连接设置 - 它正在运行一个网络服务器（外部而不是本地计算机）

主机的结果：OGN2.OnlineGamesNet.net 是 ogn2.ogamenet.net 的别名。ogn2.ogamenet.net 地址为 79.110.87.154 - traceroute：traceroute 到 79.110.87.154 (79.110.87.154)，最大 30 跳，40 字节数据包

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:04:03.207

该错误指向外部的东西，而不是您的代码 - 特别是如果它之前有效。

检查您的防火墙设置和套接字端口，以及您要连接的服务器是否处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:28:46.417

将此代码添加到 PHP 文件的顶部以获得更详细的错误消息：

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

* * *

如果您有 SSH 访问权限，请尝试以下方法：

**DNS问题？**

```
host OGN2.OnlineGamesNet.net 
```

**路由问题？**

```
traceroute 79.110.87.154 
```

**尝试完整的 TCP 握手**

```
telnet OGN2.OnlineGamesNet.net 6667 
```

# android - 将 Android 设备与虚拟 COM 端口设备连接

> ID：12880712
> 
> 赞同：5
> 
> 时间：2012-10-14T08:58:16.803
> 
> 标签：android, connection, usb, robot

所以我需要用[这个](http://neatorobotics.com)连接安卓设备。

机器人正在 USB 端口上运行 API 命令解释器。通过 USB 电缆连接到机器人。驱动程序将 USB 端口连接转换为 Com 端口连接。

我有搭载 android 2.3.4 的 htc hero。但如果需要，我可以购买 4.0 平板电脑。

我找到[了涵盖串行库的教程。该库允许您使用虚拟串行端口 (RFCOMM) 连接其他蓝牙设备。](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/6908-android-serial-tutorial.html)我想做同样的事情，但使用 USB 连接。

我也找到[了通过这些串行端口连接、读取和写入数据的 API](http://code.google.com/p/android-serialport-api/)，但我认为我真的不需要这个。

我正在乞求发展，所以任何帮助将不胜感激。我正在寻找一些允许我在 android 上使用虚拟 com 端口的库或代码示例。像[这样](http://slickdevlabs.com/slick-usb-2-serial-library/)的东西。

编辑：

[在这里](http://www.cygnal.org/ubb/Forum9/HTML/002248.html)发现了一些东西，不确定它是否会有所帮助。

# algorithm - 需要知道多少次遍历才能构造一个 BST

> ID：12880718
> 
> 赞同：21
> 
> 时间：2012-10-14T08:59:20.417
> 
> 标签：algorithm, binary-search-tree, inorder, postorder, preorder

我对不同站点上的许多文章感到非常困惑，这些文章涉及`Binary Search Tree`从任何一个遍历（`pre`，`post`或`in-order`）或其中任何两个的组合构建一个。例如，在[这个](http://www.geeksforgeeks.org/archives/657)页面上，它说给定`pre`,`post`或`level`顺序遍历，连同`in-order`遍历，可以构造`BST`. 但是[在这里](http://www.geeksforgeeks.org/archives/25203)和[那里](http://www.geeksforgeeks.org/archives/25268)，他们向我们展示了如何单独构建一个`BST`。`pre-order`此外，他们[在这里](http://www.geeksforgeeks.org/archives/24867)向我们展示了如何构造`BST`from given`pre`和`post-order`traversals。在其他一些站点中，我找到了一个`BST`仅从`post-order`遍历构造 a 的解决方案。

现在我知道给定`inorder`和`pre-order`遍历，可以唯一地形成一个`BST`. 至于我提供的第一个链接，虽然他们说我们不能构造`BST`from`pre-order`和`post-order`，但我不能对`post-order`数组进行排序以获取它的`inorder`遍历，然后使用它和`pre-order`数组来形成`BST`? 这与第四个链接中的解决方案相同还是不同？并且`pre-order`仅给出，我可以对它进行排序以获得`in-order`，然后使用它和`pre-order`来获得`BST`. 同样，这是否必须与链接 2 和 3 的解决方案不同？

具体来说，什么足以唯一地生成`BST`？如果不需要唯一性，那么我可以简单地对其进行排序以获取遍历，并从中递归地`in-order`构建 N 个可能的 s 之一。`BST`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-14T09:14:15.993

要构造 BST，您只需要一次（不是按顺序）遍历。

通常，要构建二叉树，您将需要两次遍历，例如按顺序和预排序。但是，对于 BST 的特殊情况 - 中序遍历始终是包含元素的排序数组，因此您始终可以重建它并使用算法从前序遍历和中序遍历中重建通用树。

因此，树是 BST 的信息，以及其中的元素（甚至是无序的）等价于中序遍历。

**奖励：**为什么对于一般树来说一次遍历还不够，（没有信息它是 BST）？
**答**：假设我们有`n`不同的元素。但是，这些元素有`n!`可能的列表`n`- 树的可能数量要大得多（2 * n！n 个元素的可能树都是腐烂的树，因此`node.right = null`在每个节点中，树实际上是右侧的列表. 有`n!`这样的树，并且总是有另外 n! 棵树`node.left = null`）因此，根据鸽子洞原理 - 至少有一个列表生成 2 棵树，因此我们无法从一次遍历中重建树。(QED)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T05:05:14.127

如果给定 BST 节点的值，则只需遍历一次就足够了，因为其余数据由节点的值提供。但是，如果这些值是未知的，那么根据我的理解，从一次遍历中构建一个唯一的 BST 是不可能的。但是，我愿意接受建议。

# ios - iOS，我应该将哪些图形/游戏库/工具用于儿童教育工具？请讨论

> ID：12880721
> 
> 赞同：-4
> 
> 时间：2012-10-14T08:59:40.520
> 
> 标签：ios, cocos2d-iphone, core-animation, core-graphics

我需要改进我的孩子教育拼图应用程序中的有趣因素。目前我的应用程序并不好玩，事实上，单词拼图让它听起来很有趣，但它更像是一个学习工具。

所以我想，我需要添加一些动画/效果。在这个阶段我不知道这是否意味着精灵，我想它可能会很好。

我没有做过图形编程。我热衷于钻研游戏编程，至少是为了体验一下，所以如果我决定写一个游戏，我会有一点经验。

然而，我在这里的首要任务是合理快速地开发一些东西，大概说 20 小时（我只是提到这一点，所以我最终不必重新发明轮子并花费 6 个月的时间）和我的零预算。

所以我想我的问题是，我应该使用哪些图形/游戏库，使用起来不会非常复杂，但给我在游戏开发方面的良好基础，我不必购买游戏引擎等?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:06:37.030

那么 inhmo Cocos2d 将为您完成这项工作。如果您已经了解 iOS 的使用方法，学习曲线就不会那么高，它有大量的动画和一个非常强大的社区。浏览文档并向社区寻求有关您想要实现的动画效果类型的帮助。[从这里](https://stackoverflow.com/questions/3012163/how-to-learn-animations-in-cocos2d)开始

# java - JSF(1.2) DataTable 编辑行与按钮单击

> ID：12880731
> 
> 赞同：1
> 
> 时间：2012-10-14T09:00:48.790
> 
> 标签：java, jsp, jsf

> **可能重复：**
> [在数据表中创建可编辑的行](https://stackoverflow.com/questions/4533508/make-editable-rows-in-datatable)

伙计们，

在下表中，我想编辑行。

![在此处输入图像描述](../Images/87cdaa25b8dc0e547a0a532e601b03ff.png)

当我单击编辑按钮时，屏幕将如下所示，可编辑字段 ![在此处输入图像描述](../Images/8e7f5eb7cfaa0bacdfa0afbf54181da0.png)

当我单击保存按钮时，列表应该使用同一行的新值进行更新。例如，我将行更改为 2000，Micky，4500。

我怎样才能做到这一点？

我尝试了以下逻辑，但它不起作用，请帮助我。

```
 <h:dataTable binding="#{myBean.dataTable}" id="beanTable" value="#{myBean.dataList}" var="dataItem" styleClass="dataTableEx" headerClass="headerClass"
                columnClasses="columnClass1" rowClasses="rowClass1,rowClass2" border="1"  cellpadding="2" cellspacing="0" >

<h:column>
    <f:facet name="header">
        <h:outputText value="Save" />
    </f:facet>
    <h:commandButton value="Save" actionListener="#{myBean.saveAction}"  />     
</h:column>

<h:column>
    <f:facet name="header">
        <h:outputText value="Edit" />
    </f:facet>
    <h:commandButton id="edit"  value="Edit" actionListener="#{myBean.editAction}"  />      
</h:column>

public void editAction(ActionEvent e){
        MyData data = (MyData)dataTable.getRowData();
        data.setEditable(true);
    }

// saveAction is not working.   
    public void saveAction(ActionEvent e){
        int index = dataTable.getRowIndex();
        MyData data = (MyData)dataTable.getRowData(); // returns old value not the newly edited values.
        dataList.remove(index); // dataList has the bean objects
        dataList.add(index, data); 
    } 
```

# android - 在 Android 中处理大型 Parcelable ArrayList

> ID：12880733
> 
> 赞同：1
> 
> 时间：2012-10-14T09:01:29.577
> 
> 标签：android, android-sqlite

我正在开发一个 Android 应用程序，它是 JSON Web 服务 API 的客户端。

我有资源对象类（有些是嵌套的），并且我使用所有资源类`IntentService`的接口从访问网络服务器传递结果。`Parcelable`

Web 服务返回可能很大的数组或结果（例如，由于嵌套，帖子对象还包含评论数组，每个评论还包含一个用户对象）。

目前我要么将结果插入到 SQlite 数据库中，要么将它们显示在`ListView`. （我的相关方法被接受`ArrayList<resourceClass>`为参数）。（有些数据需要持久存储，有些则不需要）。

因为我不知道我可以在不达到内存限制的情况下以这种方式处理多大的列表，这是一个好习惯吗？

将解析后的 JSON 立即保存到本地文件并将文件路径传递给`ResultReceiver`，然后从该文件插入到数据库或显示数据是一个更好的主意吗？

有没有更好的方法来处理这个？

顺便说一句 - 我正在使用 Gson 的阅读器将 JSON 解析为流，因此在那个阶段不应该存在内存问题。

# asp.net - Asp.net 详细视图

> ID：12880737
> 
> 赞同：1
> 
> 时间：2012-10-14T09:01:57.127
> 
> 标签：asp.net, detailview

我是新手，所以请任何人给我一个带有 CRUD 操作的 Asp.net 详细视图控件的示例，该控件内置在详细视图中。如果你不明白我，请回复我。

我正在尝试这个，

```
 <asp:DetailsView ID="DetailsView1" AutoGenerateRows="false" runat="server" OnItemUpdating="update"
            OnModeChanging="mode">
            <Fields>
                <asp:BoundField DataField="PrName" HeaderText="Name" />
                <asp:CommandField ShowEditButton="true" ShowDeleteButton="true" />
                <asp:CommandField UpdateText="Update" CancelText="Cancel" DeleteText="Delete" />

            </Fields>
        </asp:DetailsView>

protected void mode(object sender, DetailsViewModeEventArgs e)
{
    if (DetailsView1.CurrentMode == DetailsViewMode.ReadOnly)
    {
        DetailsView1.ChangeMode(DetailsViewMode.Edit);
        FileUpload fl = new FileUpload();
        BindPropertyList();
        fl = (FileUpload)DetailsView1.FindControl("FileUpload1");
    }
    else
    {
        DetailsView1.ChangeMode(DetailsViewMode.ReadOnly);
        BindPropertyList();
    }
}
protected void update(object sender, DetailsViewUpdateEventArgs e)
{
    TextBox t1 = new TextBox();
    t1 = (TextBox)DetailsView1.Rows[0].Cells[1].Controls[0];
    DetailsView1.ChangeMode(DetailsViewMode.ReadOnly);
    BindPropertyList();
}
protected void delete(object sender, DetailsViewDeleteEventHandler e)
{
} 
```

我正在使用此代码，但我没有更新点击事件工作，但其他工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:22:15.633

可能是因为您在定义中使用小写的更新方法名称吗？您正在使用上 U 调用详细视图中的更新方法？

# javafx-2 - 找不到 javafx.scene.control.Pagination

> ID：12880742
> 
> 赞同：0
> 
> 时间：2012-10-14T09:03:29.933
> 
> 标签：javafx-2, javafx

我正在使用包含 javafx 2.2.1 的 java 1.7_07。

当我尝试导入包 javafx.scene.control.Pagination Netbeans 时找不到它。该类存在于 API 文档中，我看不到原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:09:21.557

检查您的 javafx 版本：[如何获取 JavaFX 的版本号？](https://stackoverflow.com/questions/11266997/how-to-get-the-version-number-of-javafx)

您可以在设置为旧 JavaFX 的 NetBeans 设置中使用 Java 平台，这`Pagination`是一个相对较新的控件。

# php - PHP分发文件夹中的文件，每个文件夹最多X个文件

> ID：12880758
> 
> 赞同：1
> 
> 时间：2012-10-14T09:05:47.477
> 
> 标签：php, file, directory

我正在编写将文章兑现为 .txt 文件的功能。我想在一个文件夹中最多容纳 1000 个文件，并仅通过文件名访问文件。如果文章ID为5，则加载文件5.txt

现在，我在制作函数时遇到问题，该函数将在哪个文件夹中找到确切的文件名。

因此，在文件夹“1”中是文件 1.txt，文件夹“2”中的 2.txt 到 999.txt 是 1000.txt 到 1999.txt 等等。在文件夹“10”中是文件 10000.txt 到 10999。文本

有谁知道我如何在哪个目录中找到确切 ID 的文件名。

```
function find_file($id){

//something here

} 
```

当我打电话

```
find_file('1005'); 
```

它应该返回`2`

如果我打电话

```
find_file('2305'); 
```

它应该返回`3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:15:53.433

这应该有效：

```
function find_file($id) {
    return intval($id / 1000) + 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:19:45.863

```
// Extract the number from the file
$filePart = explode(',', $fileName);
$fileInt = intval($filePart[0]);
// Divide to get folder name
$folderInt = floor($fileInt / 1000) + 1;
// Make it a string.
$folderName = "$folderInt; 
```

# regex - 在 vim 中替换时的正则表达式嵌套引用问题

> ID：12880759
> 
> 赞同：2
> 
> 时间：2012-10-14T09:05:50.257
> 
> 标签：regex, vim

我有一些这样的文字：

```
prefix:hello1_Th2ere_a3nd_Ther4e 
```

我想将这些文本更改为：

```
prefix:Hello1Th2ereA3ndTher4e 
```

我正在尝试运行以下命令：

```
:1,$s/prefix:\(\([a-z]\)\([a-zA-Z0-9]\+\)_\)\+\([a-z]\)\([a-zA-Z0-9]\+\)/??? 
```

那么我不知道如何填写“？？？”

引用未嵌套时，我们可以通过“\1\2”引用正则表达式引用中的内容，但是当引用嵌套时​​该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:26:43.090

这通常由两个嵌套替换完成：

```
%s/\v(prefix\:)@<=%([a-zA-Z]%([a-zA-Z0-9]+)_)+[a-zA-Z][a-zA-Z0-9]+/\=substitute(substitute(submatch(0), '\v[^_]+', '\u\0', 'g'), '_', '', 'g')/ 
```

请注意，您的正则表达式与示例字符串不匹配：“Th2ere”和“Ther4e”中的“T”不匹配，`[a-z]`因此我将其替换为`[a-zA-Z]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:52:10.743

嵌套匹配仍然计算`\1`,`\2`等，从左边开始计算左大括号；那些不适用的内部匹配只是空的。

提示：为避免不必要的捕获组，`\%(...\)`请用​​于不需要捕获的部分。像 Perl 这样的正则表达式引擎允许命名捕获，这使得这更容易理解，但 Vim 不支持这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-23T22:44:23.700

一种完全不同的方法是在`split()`您的字符串中以“_”字符获取列表。用应用于`substitute()`列表中的每个字符串`map()`，然后`join()`将这些部分组合在一起：

```
:s/prefix:\zs.*/\=join(map(split(submatch(0), '_'), 'substitute(v:val, ''^[a-z]'', ''\u&'', '''')'), '') 
```

这是相当长的，但它有非常简单的正则表达式。

```
:help split()
:help substitute()
:help map()
:help join()
:help /\zs 
```

# jquery - Jquery fadeIn 循环停止，但在停止不工作之前完成淡入

> ID：12880763
> 
> 赞同：3
> 
> 时间：2012-10-14T09:06:42.733
> 
> 标签：jquery, fadein

我已经循环淡入/淡出。
在悬停时，我想获得淡入->停止效果，然后在鼠标移出时重新启动动画。
想不通:(

html:

```
<style>
div{
width:300px;
height:300px;
background-color:black;  
}​
</style>

<div>
</div> 
```

这是js代码：

```
function fade(){
$('div').fadeIn(2000, function(){
   $('div').fadeOut(2000, fade());                           
    })
}

fade();

$('div').hover(function(){
    $('div').fadeIn({duration:100, queue:false}).stop(true, true);
},function(){
    fade();
});​ 
```

这是一个 JsFiddle 链接：http:
[//jsfiddle.net/5Zqcu/55/](http://jsfiddle.net/5Zqcu/55/)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:20:55.603

我修改了[小提琴](http://jsfiddle.net/kaidul/5Zqcu/64/)

```
function fade(){
    $('div').fadeIn(2000, function(){
       $('div').fadeOut(2000, fade);                           
    })
}

fade();

$('div').hover(function(){
    $('div').stop(true);
},function(){
    fade();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:20:12.817

你需要在做动画/淡入之前停下来：

```
function fade(){
    $('div').fadeIn(2000, function(){ 
       $('div').fadeOut(2000, fade);                           
    })
}
fade();

$('div').hover(function(){
    $(this).stop().animate({opacity:1},100);
},function(){
    fade(); 
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T10:23:05.053

似乎你想要某种脉冲元素，它会淡入淡出，直到你将鼠标悬停在它上面，然后它应该变得完全不透明。你最好使用`fadeTo`as`fadeIn`并且`fadeOut`经常将起始不透明度作为显示的不透明度。

此外，您不需要使用回调来排列下一个动画，您可以将它们串在一起，因为它们会自动排入`fx`队列。当您想停止动画时，您需要使用`stop(true)`，如果您使用`stop()`它将停止当前动画但开始下一个动画。

```
function fade() {
    $("div").fadeTo(2000, 0).fadeTo(2000, 1, fade);
}

fade(); // Start throbbing

$("div").hover(function() {
    // You want to clear the queue but not call the complete callback
    // and then rapidly fade in
    $(this).stop(true).fadeTo(100, 1);
}, fade); 
```

这是更新的小提琴[http://jsfiddle.net/5Zqcu/66/](http://jsfiddle.net/5Zqcu/66/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:42:03.440

超短篇也是一样：

```
$('div').on('mouseenter').stop(true).fadeTo(100,1)
   ._.on('mouseleave').repeat().fadeTo(2000,0).fadeTo(2000,1,$)
   ._.mouseleave(); 
```

这个例子[http://jsfiddle.net/creativecouple/rLcqD/](http://jsfiddle.net/creativecouple/rLcqD/)使用了一个小[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)来实现简短的语法。

# php - Yii-自定义搜索组合框

> ID：12880764
> 
> 赞同：1
> 
> 时间：2012-10-14T09:07:05.030
> 
> 标签：php, yii

我在数据库中有一个可以存储 0 或 1 的归档状态。0 = 非活动和 1 = 活动。当我在 yii, admin.php 文件中创建一个组合框时，它会正确搜索，但组合框中出现的文本是 0 和 1，但我看到 In-Active 和 Active，但在选项值中它应该是 0 和 1。这里是我的代码...

```
 $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'cities-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
'id',
'country.countryname'=>array('name'=>'countryid', 'value'=>'$data->country->countryname', 'filter'=>CHtml::listData(Countries::model()->findAll(array('order'=>'countryname')), 'id', 'countryname')),

'cityname',
'citycode',
'citystatus'=>array('name'=>'citystatus', 'value'=>'$data->setCityStatus() . $data->getCityStatus($data->citystatus)', 'filter'=>CHtml::listData(Cities::model()->findAll(array()), 'citystatus', 'citystatus')),
'citycoords',

array(
'class'=>'CButtonColumn',
'template'=> ($iHasFullAccess == 1 ? '{view}{update}{delete}' :  '{view}') ,
),
),
)); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:58:32.603

在您的 CGridView 中配置您的列，如下所示：

```
'citystatus'=>array(
   'name'=>'citystatus',
   'value'=>'$data->citystatus == 1 ? "Active" : "Inactive"', 
   'filter'=> array(0 => 'Inactive', 1 => 'Active')), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:00:51.637

尝试在 CgridView 列表中更改您的 citystatus 选项，如下所示

```
'citystatus'=>array('name'=>'citystatus', 'value'=>'Cities::getCityStatus($data->citystatus)', 'filter'=>CHtml::listData(Cities::model()->findAll(array()), 'citystatus', 'citystatus')), 
```

在您的城市模型中更改您的 getCityStatus 函数，如下所示

```
function getCityStatus($index){
  $status = array('Inactive','Active');
  return $status[$index];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T15:19:42.023

阅读后：[http ://www.yiiframework.com/wiki/653/displaying-sorting-and-filtering-model-relations-on-a-gridview/](http://www.yiiframework.com/wiki/653/displaying-sorting-and-filtering-model-relations-on-a-gridview/)

如果是模型，请添加以下内容：

```
use yii\helpers\ArrayHelper;
use app\models\citystatus; 
```

后来在数据网格中

```
>    'columns' => [
>         ['class' => 'yii\grid\SerialColumn'],
>         .....................,
>         [
>             'attribute' => 'deviceState',
>             'value' => 'deviceStateList.Description',
>             'label' => 'Device State',
>             'filter'=> ArrayHelper::map(Citystatus::find()->all(), 'RecordID', 'CityName'),
>         ], 
```

高温高压

# php - 如何在php中重复旋转图像而不增加其文件大小

> ID：12880768
> 
> 赞同：0
> 
> 时间：2012-10-14T09:07:40.740
> 
> 标签：php, image-processing, rotation, computer-vision, php-gd

我目前正在使用 php GD 中提供的 imagerotate() 来让用户旋转图像。每当用户旋转 45 度、75 度等时，都会添加背景颜色以使图像具有矩形形状。用户旋转的次数越多，图像尺寸越大，背景颜色区域越宽。

```
$image = imagerotate($image,45, 0xFFFFFF); 
```

php gd 中是否有任何旋转图像的自由度（例如：45 度、75 度、306 度）而不添加任何背景图像或不增加文件图像？

编辑：当图像尺寸越来越大且白色区域越来越宽时，我收到此错误：“致命错误：允许的内存大小为 33554432 字节已用尽”。这就是为什么我想知道任何其他方式来旋转图像。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:16:18.637

尝试将背景设置为黑色，即 0，并使用**JPEG**，这是一种压缩图像格式。这可能会有所帮助 - 虽然我还没有测试过自己。试试看。

例子：

```
$image = imagerotate($image, 45, 0x000000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:22:25.117

我正准备在这里用 DCoder 的相同答案编写一些代码。

这是您可以应用的最佳过程，因为它只需要一次转换。

再见

# android - 如何将非基本数据传递给创建活动？

> ID：12880769
> 
> 赞同：1
> 
> 时间：2012-10-14T09:08:06.900
> 
> 标签：android, android-activity, pojo

在我看到的每个示例中，数据在某种程度上都是基本（原始）数据的同义词——整数、字符、布尔数组等等——这对我来说太局限了，因为我想传递一个常规对象。

那么如何将任何数据传递给活动，例如，实例`MyClass`？

我检查了`Intent.putExtra`-- 我发现的只是基本类型 + `Bundle`，但`Bundle`它本身也只处理基本类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:29:58.980

如[android guide faq](http://developer.android.com/guide/faq/framework.html#3)中所述，有几种方法可以做到这一点。

我认为在您的情况下，静态变量最有帮助。

您还可以实现应用程序并使用它在活动之间共享您的数据。这是[关于此的简短教程](http://trace.adityalesmana.com/2010/08/declare-global-variable-in-android-via-android-app-application/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:55:29.973

> 在我看到的每个示例中，数据在某种程度上都是 POJO 数据的同义词——这对我来说太局限了，因为我想传递一个常规对象（不是 int、字符串或布尔数组）。

[POJO = Plain Ol' Java Object](http://en.wikipedia.org/wiki/Plain_Old_Java_Object) = “常规对象（不是 int、字符串或布尔数组）”。

> 那么如何将任何数据传递给活动，例如 MyClass 的实例？

让它`Parcelable`。

# ruby - 如何从Ruby中的哈希表中获取第一个键值对

> ID：12880770
> 
> 赞同：68
> 
> 时间：2012-10-14T09:08:25.727
> 
> 标签：ruby, hash

我正在尝试从 ruby​​ 的哈希表中获取第一个键和值键。我不知道哈希的键值，因为它被传递给方法。我在网上找不到任何地方如何找到第一个键/值作为单独的哈希表。我想`hash[0]`只会尝试找到一个名称为 0 的元素，它只是`nil`在我运行代码时返回。

我知道我可以找到键名和值，然后从中创建一个新的散列，但我想知道是否有更简单的方法可以做到这一点，所以我马上得到一个散列。

这是我的代码：

```
def rps_game_winner(game)

rock_in_hash = game.invert['R']
paper_in_hash = game.invert['P']
scissors_in_hash = game.invert['S']

if(rock_in_hash)
      if(paper_in_hash)
        return paper_in_hash;
      elsif(scissors_in_hash)
        return rock_in_hash
      end
    elsif(paper_in_hash)
      if(rock_in_hash)
        return paper_in_hash
      elsif(scissors_in_hash)
        return scissors_in_hash
      end
    end
        key = game.keys[-1]
        value = game.values[-1]
            winner = {key => value}
    return winner 
    end

game_one = { "Bob" => 'P', "Jim" => 'P' }

puts rps_game_winner(game_one) 
```

这让我得到了正确的结果问题是我不明白为什么它是-1而不是零......我希望有更好的方法来获取哈希表的第一个键/值对而不是创建新的哈希具有您从上一个表中检索到的键和值的表。

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-10-14T09:21:49.560

你可以做

```
key, value = hash.first 
```

或者，如果您愿意：

```
key = hash.keys[0]
value = hash.values[0] 
```

那么也许：

```
new_hash = {key => value} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-01-12T04:38:14.143

有一个**较短的答案**不需要您使用额外的变量：

```
h = { "a" => 100, "b" => 200 , "c" => 300, "d" => 400, "e" => 500}
Hash[*h.first] #=> {"a" => 100} 
```

或者，如果您想**在任何单个位置检索键/值**

```
Hash[*h.to_a.at(1)] #=> {"b" => 200} 
```

或**从一系列位置检索键/值**：

```
 Hash[h.to_a[1,3]] #=> {"b"=>200, "c"=>300, "d"=>400} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-09T21:05:40.297

```
[hash.first].to_h 
```

另一种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-02T05:24:34.700

```
my_hash = { "a" => "first", "b" => "second" }

{ my_hash.keys.first => my_hash.values.first } 
```

这也有效

# c# - 如何将值拆分为 2 个值

> ID：12880780
> 
> 赞同：0
> 
> 时间：2012-10-14T09:09:43.580
> 
> 标签：c#, vb.net

像这样的用户输入

```
textbox1.text = 01/02/03/...... 
```

我想像这样在3个文本框中分别显示值

在`"/"`它应该移动到下一行之后

```
txt1.text =  01
    txt2.text = 02
   txt3.text =  03
    .... 
```

这该怎么做。

需要vb.net代码帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:43:45.157

**选项1**

如果总是 3 个文本框，您可以为每个文本框编写静态代码，如下所示：

```
'EDIT: This code now checks for the existence of a second or third value to avoid
'out of bounds errors
Dim originalValue As String = "01/02/03"
Dim splitBySlash As String() = originalValue.Split("/")

txt1.Text = splitBySlash(0)
If splitBySlash.Length > 1 Then txt2.Text = splitBySlash(1)
If splitBySlash.Length > 2 Then txt3.Text = splitBySlash(2) 
```

**选项 2**

如果基于斜杠的文本框数量可变，则必须在运行时创建它们并将它们添加到父控件，如下所示：

```
'You can enter as many (or few) slashes as you like in this code, it will automatically
'adjust the text boxes created as necessary.
Dim originalValue As String = "01/02/03" 'could go on like /04/05/etc
Dim splitBySlash As String() = originalValue.Split("/")

For Each value As String In splitBySlash
    Dim newTxt As New TextBox()
    newTxt.Text = value

    yourParentControl.Controls.Add(newTxt)
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:20:22.030

试试这个：

```
string rockString =  "01/02/03/";
string[] words = rockString.Split('/');
foreach (string word in words)
    {
      Console.WriteLine(word);
     } 
```

**正如你在评论中问的**

在不同的文本框中

```
textbox1.text = words[0]; //textbox1.text="01";
    textbox2.text = words[2]; //textbox2.text="02";
    textbox3.text = words[3]; //textbox3.text="03"; 
```

在同一个文本框中

```
 textbox1.text = words[0]+words[1]+words[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:21:27.500

尝试使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)或 Regex.Split

```
Dim value As String = "01//02//03//" 
Dim lines As String() = Regex.Split(value, "//") 
For Each line As String In lines    
Console.WriteLine(line) 
Next 
```

# string - 将字符串传递给 C++ 中的函数

> ID：12880786
> 
> 赞同：1
> 
> 时间：2012-10-14T09:10:56.073
> 
> 标签：string, c++-cli

我想将像“Celcius”这样的字符串传递给我拥有的函数，但我不断收到来自函数的错误。

```
System::Console::WriteLine' : none of the 19 overloads could convert all the argument types 
```

我想我只是有一些简单的错误。有人可以指出我的错误吗？使用 MS Visual C++ 2010

我已经发布了有问题的代码。其他功能（未发布）工作正常。

```
void PrintResult( double result, std::string sType );    // Print result and string
                                                         // to the console
//=============================================================================================
//          start of main
//=============================================================================================
void main( void )
{
ConsoleKeyInfo CFM;
// Program Title and Description

ProgramDescription();

// Menu Selection and calls to data retrieval/calculation/result Print
CFM=ChooseFromMenu();
switch(CFM.KeyChar)    //     ************************************************************
    {                                                                                  //*
        case '1' : PrintResult(F2C(GetTemperature()),"Celsius");                       //*
                 break;                                                                //*
                                                                                       //*
        case '2' : PrintResult(C2F(GetTemperature()),"Fahrenheit");                    //*
                 break;                                                                //*
                                                                                       //*
        default : Console::Write("\n\nSwitch : Case !!!FAILURE!!!");                   //*
    }                       //************************************************************

system("pause");

return;
}
//Function
void PrintResult( double result, std::string sType )
{
Console::WriteLine("\n\nThe converted temperature is {0:F2} degrees {1}\n\n",result,sType);

return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T09:28:20.533

`Console::WriteLine`是一个 CLI(C++.NET) 函数，你不能传递`std::string`给它，你应该`System::String^`用于这个目的。

在本机 C++ 中，您应该使用：

```
std::cout << "\n\nThe converted temperature is " << result
    << " degrees " << ' ' << sType << "\n\n"; 
```

# c# - 与字符串变量一起使用时，是否需要在 C# 中显式关闭 StreamReader？

> ID：12880787
> 
> 赞同：0
> 
> 时间：2012-10-14T09:10:58.590
> 
> 标签：c#

这是我的代码：

```
string data = "...";
var stream = new StreamReader(data); 
```

不调用`Close()`方法可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:12:37.037

是的，否则你会有内存泄漏。[用 using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)包裹你`StreamReader`，这样你就不必担心清理它，例如

```
using (var reader = StreamReader(data))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:07:48.173

你真的编译并运行你的代码了吗？

**构造[`StreamReader(string)`函数](http://msdn.microsoft.com/en-us/library/f2ke0fzy.aspx)将输入*视为文件名！***

除非这不是您的代码并且您的*意思是* [`StringReader`](http://msdn.microsoft.com/en-us/library/system.io.stringreader.stringreader.aspx)，否则您的代码正在尝试流式传输 中指定的文件名的内容`data`，这可能会抛出 a `FileNotFoundException`，因为该文件可能不存在。如果是这样，您肯定需要调用`Close`或将您的代码集成到一个`using`语句中以释放文件句柄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:19:40.490

您可能还想查看有关 msdn 的本教程：http:
[//msdn.microsoft.com/en-us/library/aa355056.aspx](http://msdn.microsoft.com/en-us/library/aa355056.aspx)

它告诉您在`using`声明中需要注意的事项。除此之外，使用是要走的路。

关于 codeProject 的另一篇相当[不错的文章。](http://www.codeproject.com/Articles/6564/Understanding-the-using-statement-in-C)值得一读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T10:04:07.843

在您的进程停止使用该资源之前，其他进程将无法访问该资源，因此如果您不需要它，您应该关闭它

# visual-c++ - LPTSTR 字符串中的垃圾值

> ID：12880793
> 
> 赞同：0
> 
> 时间：2012-10-14T09:11:40.380
> 
> 标签：visual-c++

我编写了一个函数来从路径返回扩展名，如下所示：

```
 LPTSTR GetExtension(LPCTSTR path1)
{
    CString str(path1);
    int length = str.ReverseFind(L'.');
    str = str.Right(str.GetLength()-length);

    LPTSTR extension= str.GetBuffer(0);
    str.ReleaseBuffer();

    return extension;

} 
```

我检查了语句，发现扩展名在返回时具有有效值（.txt），但是当我在 main 方法中使用以下语句时，如下所示

```
LPTSTR extension = GetExtension(L"C:\\Windows\\text.txt"); 
```

变量扩展名具有以下垃圾值：ﻮ</p>

> ﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮﻮ䞐泸᠀pꬰp⚜p⚜p⚜

谁能告诉我背后的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:41:06.093

您正在返回一个指向已释放缓冲区的指针。 缓冲区是函数的局部变量*。*两个大禁忌。将签名更改为

```
 size_t GetExtension(LPCTSTR path, LPTSTR buffer, size_t bufferSize) 
```

这样您就可以将结果复制到*缓冲区*中。

或者返回一个 CString 或 std::wstring，你使用的是 C++，而不是 C。使用 TCHAR 也是处理字符串的一种非常过时的方式，最后一个非 Unicode 版本的 Windows 于 12 年前及时死亡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:20:17.393

我没有我的编译器，但你可能正在获取缓冲区并存储它的位置。然后在 LPTSTR 仍指向一个位置时释放它。

或者，当您在函数内部查看它时，LPTSTR 可能在堆栈上。退出该功能时，您将失去它。

# r - 为 R 定制 ESS 环境

> ID：12880794
> 
> 赞同：8
> 
> 时间：2012-10-14T09:12:09.543
> 
> 标签：r, emacs, environment, ess

我正在尝试优化我的[ESS](http://ess.r-project.org/) - R 环境。到目前为止，我使用了[r-autoyas](http://www.svenhartenstein.de/Software/R-autoyas)，我按照[样式指南](http://google-styleguide.googlecode.com/svn/trunk/google-r-style.html)设置了意图和内容，在迷你缓冲区中有函数参数的 eldoc 提示，并且我可以选择[按键](https://gist.github.com/318365)以查找有关变量的信息点（更多[在这里](http://www.sigmafield.org/comment/10)）。

为了拥有一个不错的 R 环境，您还使用了其他任何东西吗？也许非 ESS 的人有一些好东西要添加（我通过查看 Eclipser 获得了变量的信息）。一个示例可能是一种无需键入变量名称即可插入“刚刚定义”变量的简单方法（应该是这样的吗？）。

（如果没有很好的表述，请帮助我改变问题而不是“关闭”线程）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T11:22:23.247

我没有使用 autoyas，因为我发现[自动完成集成](https://stackoverflow.com/a/7890516/453735)是一种更好的方法。

插入先前定义的符号是一种通用的 emacs 功能，称为“dabbrev-expand”，并且绑定到`M-/`. 我在我的 .emacs 中有这个，以使其在完整符号上完整：

```
(setq dabbrev-abbrev-char-regexp "\\sw\\|\\s_\\|s.")
(setq dabbrev-case-fold-search t) 
```

我广泛使用的另一件事是[imenu-based-jump-to-symbol-definition](http://code.google.com/p/imenu-anywhere/source/browse/trunk/imenu-anywhere.el)。它提供与 emacs 标签类似的功能，但仅适用于与当前缓冲区模式相同的打开缓冲区。它还使用 IDO 进行查询：

![imenu-anywhere 截图](../Images/ab3bc3cdadf3c088247bdcc07d397557.png)

放入`imenu-anywhere.el`您的 emacs 加载路径并添加以下内容：

```
(require 'imenu-anywhere)
(global-set-key [?\M-o] 'imenu-anywhere) 
```

现在，如果我执行 `M-o`foo `RET`，只要在其中一个打开的缓冲区中定义了“foo”，emacs 就会跳转到“foo”的函数/类/方法/通用定义。这当然适用于模式定义 imenu-tags 时。ESS 定义了这些，因此您不需要添加更多。

还有一些 R-yas 模板的集合。我没有开始使用它们，但我的猜测是它是一种非常有效的模板插入机制。

[编辑] 激活 tracebug：

```
(setq ess-use-tracebug t) 
```

# php - Mysql，根据日期选择行

> ID：12880797
> 
> 赞同：1
> 
> 时间：2012-10-14T09:12:13.963
> 
> 标签：php, mysql, database, phpmyadmin, mysqli

我想做的事情：

选择日期 = 2012-10-14 的行，然后显示该行之后的 4 行。所以从这个列表

```
2012-10-12 column #2
2012-10-13 column #2
2012-10-14 was very sunny.
2012-10-15 rained all day.
2012-10-16 whatever.
2012-10-17 column #2
2012-10-18 column #2
2012-10-19 rained all day.
2012-10-20 whatever.
2012-10-21 column #2
2012-10-22 column #2 
```

它会返回这个：

```
2012-10-14 was very sunny.
2012-10-15 rained all day.
2012-10-16 whatever.
2012-10-17 column #2
2012-10-18 column #2 
```

感谢帮助。

PS：数据库中没有周末的数据，所以有些日期会丢失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:14:47.423

```
SELECT * FROM my_table WHERE date >= '2012-10-14' ORDER BY date LIMIT 5 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ba997/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:16:32.397

此版本适用于日期范围，而不是固定数量的行。目前尚不完全清楚你想要哪一个。

```
select * from mytable where date_diff(date,'2012-10-14') <= 4 and date >= '2012-10-14'; 
```

# c# - 无法将数据表绑定到图表控件

> ID：12880800
> 
> 赞同：3
> 
> 时间：2012-10-14T09:12:33.650
> 
> 标签：c#, charts, datatable

我想在我的测试应用程序中使用极坐标图。我有一个包含几列的数据表，其中名为“X”的列应该提供 x 值成员，其他应该是 y 值成员。我在 MSDN 上找到了一个教程，但它并没有真正起作用，因为这条线

```
chart1.DataBindTable(dt, "X"); 
```

不会编译。欢迎任何提示，谢谢。

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;

namespace PolarChartTest_01
{
    public partial class Form1 : Form
    {
    public DataTable dt;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dt.Rows.Clear();
        dt.Columns.Clear();
        chart1.Series.Clear();

        dt.Columns.Add("X", typeof(int));
        dt.Columns.Add("Y", typeof(int));

        for (int j = 0; j < 7; j++)
        {
            DataRow dr = dt.NewRow();

            dr["X"] = j * 45;
            dr["Y"] = j;
            dt.Rows.Add(dr);

        }

        chart1.DataBindTable(dt, "X");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:28:56.320

它不会编译，因为 DataTable 没有实现 IEnumerable 接口。尝试：

```
var enumerableTable = (dt as System.ComponentModel.IListSource).GetList();
chart1.DataBindTable(enumerableTable , "X"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T12:53:01.983

这可能会帮助您在页面加载时写下这个

```
chart.DataSource = dataqtableName;
chart.Series["seriesName"].XValueMember = "columNameUwantToBind";
chart.Series["seriesName"].YValueMembers = "columNameUwantToBind";
chart.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T10:02:11.507

另一种解决方案可能是：

```
chart1.DataBindTable(dt.DefaultView, "X"); 
```

作为奖励，除了“可数据绑定”之外，此返回的 DataView 还可用于排序和过滤。

# c++ - 何时删除添加到 std::vector 的元素？

> ID：12880803
> 
> 赞同：0
> 
> 时间：2012-10-14T09:13:00.233
> 
> 标签：c++

我是 C++ 新手，对内存管理有疑问。

在标题中，我有这个：

```
std::vector<Obstacle::Obstacle*> obstacles; 
```

在.cpp中我这样做：

```
Circle *circle = new Circle(x, y, radius);
obstacles.push_back(circle); 
```

`Circle`的子类在哪里`Obstacle`。

我的问题是我应该什么时候调用`delete`向量中的元素？我听说每个都`new`应该用一个来平衡`delete`。我是否需要在析构函数中循环遍历向量并调用`delete`每个元素？没有更优雅的方式吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T09:15:36.940

您必须`delete`在清除向量之前调用元素，或者在向量超出范围之前调用元素，**前提是该向量拥有指向的对象**。一个更优雅的解决方案是让向量保持[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。特定类型的智能指针应取决于所有权策略。例如，拥有指向对象的向量应使用 C++11 `std::unique_ptr`：

```
std::vector<std::unique_ptr<Obstacle>> obstacles; 
```

当然，以上所有这些都是假设您确实有充分的理由使用指针。通常最好的解决方案是最简单的：按价值持有物品：

```
std::vector<SomeType> things; 
```

请注意，这不适用于您的情况，您要存储指向从基类派生的对象的指针，因为存储基类型的值会导致[对象切片](http://en.wikipedia.org/wiki/Object_slicing)。

**编辑**：确保当向量超出范围时删除元素的一种简单方法是编写范围保护类：

```
template <typename CONTAINER>
struct PtrContainerGuard
{
  PtrContainerGuard(CONTAINER& container) : c_(container) {}
  ~PtrContainerGuard()
  {
    for (typename CONTAINER::iterator it = c_.begin(); it != c_.end(); ++it)
      delete (*it);
  }
private:
  CONTAINER& c_;

} 
```

然后

```
std::vector<Obstacle*> obstacles;
PtrContainerGuard<std::vector::Obstacle*> p(obstacles); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:05:40.557

为什么不使用 shared_ptr？您不必创建新对象，也不必担心在使用它们时会删除它们。

```
typedef shared_ptr<Obstacle> ObstaclePtr;
int main()
{
std::vector<ObstaclePtr> obstacles;
//Create objets using shared_ptr and push them in vector
ObstaclePtr obstacle1(new Circle());
obstacles.push_back(obstacle1);

ObstaclePtr obstacle2(new Circle());
obstacles.push_back(obstacle2);
//When vector obstacles goes out of scope here, all circles inside are destructed!
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T09:17:00.317

是的，有一种更优雅的方式。扔掉你所有的指针。

```
std::vector<Obstacle::Obstacle> obstacles;

Circle circle(x, y, radius);
obstacls.push_back(circle); 
```

什么都没有`new`，什么都不需要`delete`，你节省了内存分配，访问存储在向量中的对象变得更有效率。

此外，您的代码不会再让更有经验的 C++ 开发人员眼花缭乱。

总而言之，我称之为胜利。:)

# regex - 匹配括号之间的语法高亮

> ID：12880805
> 
> 赞同：4
> 
> 时间：2012-10-14T09:13:21.090
> 
> 标签：regex, vim, syntax-highlighting

假设我有一个在 Vim 中打开的 LaTeX 文档，我想突出显示

```
{\color{red} ... } 
```

（其中的点应该象征一些内容），也就是说，我想要`{\color{red}`，`}`并且这些之间的所有内容都突出显示。我已经完成了

```
:syn region WarningMsg start=+{\\color{red}+ end=+}+ 
```

但是我有一个问题，如果我写了类似的东西`{\color{red} some{thing} important}`，那么它只会`{\color{red} some{thing}`被突出显示，因为 Vim 当然会首先出现`}`. 如何制作此突出显示规则以使其跳过匹配的大括号？甚至多层次的这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:56:48.737

为清楚起见，最好为每个语法区域指定一个定制名称，然后将其链接到标准颜色组。我已重命名您的原始区域`redTeX`。

您需要定义第二个区域 ，`innerBrace`定义要忽略的大括号，并将该区域标记为透明。然后`redTeX`应该被标记为包含透明区域，然后它将被忽略。

```
syn region innerBrace start=+{+ end=+}+ transparent contains=redTeX
syn region redTeX start=+{\\color{red}+ end=+}+ contains=innerBrace
hi link redTeX WarningMsg 
```

请注意，在这种情况下，会增加`redTeX`与`innerBrace`. 我通过将其标记`innerBrace`为包含来解决此问题`redTeX`。

希望这是有道理的！

# ios - 找不到 Apple 推送通知服务的证书签名请求 (CSR)

> ID：12880819
> 
> 赞同：1
> 
> 时间：2012-10-14T09:16:05.197
> 
> 标签：ios, xcode

我正在尝试添加到我的应用程序推送通知服务。按照所有说明，我已经通过 Enterprise Distribution 成功分发了我的应用程序。但是现在启用 Apple 推送通知服务我需要证书签名请求 (CSR) 文件并意外删除了他。如何在不创建新证书和经历应用程序分发的艰难过程的情况下获得另一个 CSR 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:44:17.143

就像它在配置门户中告诉您的那样-打开钥匙串访问->应用程序菜单->证书助手->从证书颁发机构请求证书。

但是，您可能必须使用最终生成的新证书重新签署您的应用程序。企业社会责任是“容易”的一点！

# proxy - Jmeter的代理服务器不记录

> ID：12880826
> 
> 赞同：0
> 
> 时间：2012-10-14T09:16:57.240
> 
> 标签：proxy, jmeter, neoload

JMeter 的新手。我已经从 JMeter 网站下载并配置了代理服务器作为分步指南。得到正确的日志消息，例如“已创建协议 8080”和“代理正在运行”等。但它只是没有使用 Tomcat 记录 localhost:8080。更改为 Neoload 以记录 localhost:8080 并且一切正常，但 JMeter 只是不记录任何内容。日志或屏幕中没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:36:43.313

你启动代理了吗？尝试停止它以查看您是否在浏览器中收到错误。你确定 neoload 还没有监听同一个端口，并且 jmeter 无法在同一个端口上启动。

最后，您可以尝试在浏览器地址中使用您的 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:40:55.777

我不知道你犯了什么错误。这是您可以从头开始做的事情：

1.  创建空计划
2.  将 HTTP 代理服务器添加到 WorkBench
3.  在它的配置中设置端口在你的计算机上释放一个（也许 8080 正忙）。点击开始
4.  将浏览器代理设置为localhost，选择与JMeter的代理相同的端口
5.  浏览任何网址

--> 采样器应该出现在 JMeter

您可能还想更改目标控制器，以便采样器出现在更合适的位置

# javascript - 将 rel="xx" 添加到 jQuery a.link 元素

> ID：12880828
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:17:09.293
> 
> 标签：javascript, jquery, hyperlink, rel

我使用一个小的 jQuery 脚本来运行一个简单的音乐播放器，但我想在这个 jQuery 脚本中的链接中添加一个 rel="player"（例如播放/停止按钮）。这样我就可以从我使用的另一个 jQuery 脚本中排除这些 rel="player" 链接，因为我不希望它考虑这些`rel="player"`元素。

我认为这很简单，但我真的不知道该怎么做。

[这](http://hyker.be/cv/js/jquery.simpleplayer.min.js)是播放器的 jQuery 脚本，如果有必要的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:28:50.097

您可以使用它来将 rel 添加到所有链接

```
$('a').attr('rel','xx'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:34:27.070

这应该照顾所有的链接。如果您不想要所有链接，则需要具体说明您想要的链接。

```
$('a').each(function () {
   $(this).attr('rel', 'xx');
}); 
```

# python - 嵌套列表对象不支持索引

> ID：12880829
> 
> 赞同：1
> 
> 时间：2012-10-14T09:17:14.213
> 
> 标签：python, list, object, indexing

我在构造函数中创建了一个名为 env 的嵌套列表，还有另一种填充网格元素的方法，定义如下：

```
class Environment(object):
    def __init__(self,rowCount,columnCount):
        env = [[ None for i in range(columnCount)] for j in range(rowCount) ] 
        return env       

    def addElement(self, row, column):
        self[row][column] = 0 
```

稍后在代码中，我通过运行创建一个 Environment 实例：

```
myEnv = createEnvironment(6,6) 
```

然后我想通过运行向环境中添加一个元素：

```
myEnv.addElement(2,2) 
```

所以我期望发生的是，我会收到一个新的 Environment 对象，它是一个 6x6 网格，网格的 2,2 位置为 0。但这没有用。

我有两个错误：

1.  我无法从**init**方法返回 None 以外的任何内容。
2.  我们在尝试执行时遇到的主要问题是`addElement(2, 2)`这个错误：

    `"TypeError: 'Environment' object does not support indexing.`

我查看了`__getitem__`and`__setitem__`方法，但无法让它们处理多维列表。我应该使用更好的数据结构来创建网格吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:20:20.880

这里的问题是你不能用`__init__`. 您可能可以`list`在 中进行子类化并做一些事情`__new__`，但这将是巨大的矫枉过正，更好的选择就是包装列表：

```
class Environment(object):
    def __init__(self, rows, columns):
        self.env = [[None for column in range(columns)] for row in range(rows) ] 

    def addElement(self, row, column):
        self.env[row][column] = 0 
```

请注意，您声称正在调用它有点奇怪`myEnv = createEnvironment(6,6)`- 使用函数而不是构造函数有点奇怪。

如果你真的希望你的对象表现得像列表一样，你当然可以提供一些额外的包装函数，比如`__getitem__`/ `__setitem__`。例如：

```
def __getitem__(self, row, column):
    return self.env[row][column] 
```

例如，这将允许您这样做`some_environment[5, 6]`。（您可能宁愿返回该列，这取决于您的系统以及最适合您的方式）。

# jquery - 每次使用 jQuery 调整窗口大小时，我将如何更新变量？

> ID：12880830
> 
> 赞同：0
> 
> 时间：2012-10-14T09:17:14.467
> 
> 标签：jquery

每次调整窗口大小时，如何更新另一个函数中的变量？

代码如下：

```
$(window).resize(function() {                
    Here is the NewVarialble;
});

(function (a) {
    OldVariable;
    Want to update the OldVarible with NewVariable;
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:22:32.313

```
var resizeMe = function (newVar) {
    var oldVar = newVar;
}

$(window).resize(function (r) {  
    console.log(r);
    var newV = r;           
    resizeMe(newV);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:47:59.253

要么使变量成为全局变量（坏主意），要么将调整大小块移动到自执行匿名函数中，如下所示：

```
(function (a) {
    OldVariable;
    $(window).resize(function() {                
        this now has access to oldvariable
    });    
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:45:01.187

目前还不是 100% 清楚您遇到了什么问题，但似乎只是关于范围。

这可能对范围等有用的阅读 [http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)

这是一个工作版本 - 在 js 上使用下面粘贴的代码，我不建议在窗口对象上使用变量，它只是为了演示

[http://jsfiddle.net/6B93N/](http://jsfiddle.net/6B93N/)

```
 $(document).ready(function(){// wrapper function / scope change as appropriate

        window.OldVariable =  -1; // placed globally but change as appropriate

        $(window).resize(function() {
            var NewVariable; // null initially

            NewVariable = Math.random();// assign a random number
            updateOldVar(NewVariable);
        });

        function updateOldVar(a) {
            window.OldVariable = a;
            //console.log(window.OldVariable);
        }

        $('.testbtn').on('click', function() {
           console.log(window.OldVariable);
        });

    }); 
```

进一步 **编辑下面的评论：**

```
 $(document).ready(function () {// wrapper function / scope change as appropriate

        var d = {
          divalayerWidth: 0,
          divalayerHeight: 0
        };

        $(window).resize(onWindowResize);

        function onWindowResize(e){
            updateD(d, e.target.outerWidth, e.target.outerHeight);
        }

        function updateD(d, w, h){

            d.divalayerWidth = w;
            d.divalayerHeight = h;
        }

    }); 
```

# mysql - 如何部分转储表格并将其保存在不同的服务器上？

> ID：12880832
> 
> 赞同：0
> 
> 时间：2012-10-14T09:17:33.567
> 
> 标签：mysql, database, mysqldump, database-backups

我有一个数据库服务器，它有一个 90 GB 的表。现在我想备份那张桌子。但是数据库几乎已满，我无法恢复到同一台服务器。

有没有办法使用备份`mysqldump -u username -ppassword dbname tablename > different_server_location`

这些天我过去常常在同一台服务器上执行此操作。

例子：

`mysqldump -u username -ppassword dbname tablename > /tmp/file_name`

由于数据库服务器上没有可用空间，我如何备份 90 GB 的表！

我可以分几块备份文件吗？我的意思是一次 10 GB 等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:50:59.220

为什么不从同一网络中的另一台服务器转储，例如：

```
mysqldump --host=myserver -u backup mydb > test.sql 
```

# java - 计算单个文件中每个段落中的单词数.. 基于地图

> ID：12880833
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:17:54.130
> 
> 标签：java, mapreduce

其实这是mapreduce程序。这是我的简单字数统计程序：

```
 public static class MapClass extends MapReduceBase
    implements Mapper<LongWritable, Text, Text, IntWritable> {

    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value,
                    OutputCollector<Text, IntWritable> output,
                    Reporter reporter) throws IOException {
      String line = value.toString();
      StringTokenizer itr = new StringTokenizer(line);
      while (itr.hasMoreTokens()) {
        word.set(itr.nextToken());
        output.collect(word, one); 
```

在这里，我计算文件中的单词数。

但是我需要在文件的每个段落中都没有单词..我们得到每个段落的数值。现在地图基于那个没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:15:57.007

在单个映射器中实际上不可能了解特定行所在的段落。您需要将其中的一些逻辑放在其他地方。

一种方法是编写一个新的 InputFormat，它一次将整个段落而不是行传递给映射器。现在映射器同时传递了行的文本和行号。这种另一种方法将传递整个段落和段落编号。

一种可扩展性较低的方法是在行号和段落号之间创建映射。在您的字数映射器中，您可以写出单词、计数和单词所在的行。然后，您可以将这些记录与行到段落的映射结合起来，以生成每个段落中的单词数。

# regex - 一种方法，多条休息路径

> ID：12880834
> 
> 赞同：1
> 
> 时间：2012-10-14T09:17:55.257
> 
> 标签：regex, rest, path, annotations, resteasy

是否可以在 Java 中的同一个 REST 方法上设置多个`@Path`注释？

显然我已经尝试过了，但是它没有工作它无法编译，但是有什么方法可以做到这一点吗？也许竞争正则表达式？

如果有帮助，我正在使用 resteasy。

我的方法看起来像这样（下面的伪代码）：

```
@Path("/project/{projecID}/car/{carID}/carService/{carserviceID}/engine/{engineID}")
public Engine getCarEngin(@PathParam("projecID") projectID, @PathParam("carID") carID, @PathParam("carserviceID") carserviceID, @PathParam{engineID}){
    // return engine based on the id
}

@Path("/project/{projecID}/bus/{busID}/busService/{busserviceID}/engine/{engineID}")
public Engine getBusEngin(@PathParam("projecID") projectID, @PathParam("busID") busID, @PathParam("carserviceID") carserviceID, @PathParam{engineID}){
    // return engine based on the id
} 
```

所以方法是一样的，逻辑是一样的，但是我想把它统一在一个方法下，但保持两条路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:39:48.653

> 是否可以在 Java 中的同一个 REST 方法上设置多个 @Path 注释？

正如您所发现的那样，这是不可能的。

```
Perhaps vie the regular expression? 
```

您可以使用正则表达式来做到这一点，但这只会引入很多不必要的复杂性。它还会降低您的`@Path`-annotations 的可读性。恕我直言，不要为此使用正则表达式。

也许你可以做这样的事情：

```
enum VehicleType {
    BUS, CAR
}

@Path("/project/{projecID}/{vehicleType}/{vehicleID}/service/{serviceID}/engine/{engineID}")
public Engine getEngine(@PathParam("projecID") projectID, 
    @PathParam("vehicleType") VehicleType vehicleType,  
    @PathParam("vehicleID") vehicleID, @PathParam("serviceID") serviceID, 
    @PathParam("engineID"} engineID){

    // return engine based on the id
} 
```

# javascript - javascript 类型是函数

> ID：12880836
> 
> 赞同：-2
> 
> 时间：2012-10-14T09:18:11.080
> 
> 标签：javascript

如何只使用一种类型的javascript呢？所以

```
is ({}) // object
is (function () {}) // function 
```

向我跑来是（）我需要功能。**不是 jQuery**谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:22:16.993

使用`typeof`运算符。

```
var type = typeof(function() {}); // "function"
type = typeof({}) // "object" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:22:31.517

所以; 就是这样：

```
Type = {

    isrgx: /\[|\]|object| /g,

    toString: function(args) {

        return (Object.prototype.toString.call(args));
    },

    is: function(args) {

        return (this.toString((args || "")).replace(this.isrgx, ""));
    }
}; 
```

**类型.is()**

```
Type.is({}); // --> Object

Type.is(function() {}); // --> function

Type.is("dklsk"); // --> String

Type.is(111); // --> Number 
```

如果我们添加以下内容会更好:) **isFunction(), isObject()**

```
Type = {

    isrgx: /\[|\]|object| /g,

    toString: function(val) {

        return (Object.prototype.toString.call(val));
    },

    is: function(val) {

        return (this.toString((val || "")).replace(this.isrgx, ""));
    },

    isFunction: function(val) {

        return (this.is(val) == "Function");
    },

    isObject: function(val) {

        return (this.is(val) == "Object");
    }
}; 
```

**类型.isObject()**

```
Type.isObject({}); // --> true
Type.isObject("dsds"); //--> false 
```

**类型.isFunction()**

```
Type.isFunction(function() {}); // --> true
type.isFunction("dsdsds"); // --> false 
```

别紧张...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T09:22:49.830

无法完全想象你在说什么，但如果你想检查特定功能的“类型”，你可以做

```
if (typeof(myFunc) === 'function') 
```

# android - android actionbar - 动态删除actionbar

> ID：12880837
> 
> 赞同：7
> 
> 时间：2012-10-14T09:18:13.137
> 
> 标签：android, android-actionbar

我想以两种方式使用活动

1.  它显示可以编辑的项目列表，添加的新项目等
2.  它显示项目列表以便选择一个。

由于 Activity 的主要逻辑是显示项目列表，我想在同一个 Activity 中处理这两种情况。尽管如此，在 1\. 我想显示操作栏，以便用户可以从那里导航到任何想要的地方。在 2\. 情况下，我不希望显示任何操作栏，用户所能做的就是选择一个项目或按取消/返回。

实现这一目标的最佳方法是什么。我的第一个猜测是两个主题，我动态设置了这两种情况中的哪一种是必需的。但我想知道是否还有一种方法可以轻松地以编程方式从屏幕上删除操作栏，这将使我免于声明两个主题等。您如何处理此要求的任何建议都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T10:49:26.317

这个怎么样？

```
public void hideActionBar(){
    getActionBar().hide();
} 
```

来源：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T11:19:34.500

用这个：

```
getActionBar().hide(); 
```

[操作栏隐藏方法的 Android 文档](http://developer.android.com/reference/android/app/ActionBar.html#hide%28%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T04:02:21.503

如果您想实际删除操作栏（而不是首先创建它）而不是创建它，然后立即隐藏它，您可以通过主题或代码来完成。

**通过主题或样式属性**：

使用预定义系统主题之一，例如**Theme.Holo.NoActionBar**或其变体。这是最简单的方法。

如果您想在自定义主题中定义使用属性，那么您可以这样做：

```
<resources>
    <style name="MyTheme" parent="some_parent_theme">
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowActionBar">false</item>
        <item name="android:windowFullscreen">true</item>
    </style>
</resources> 
```

现在将此主题添加到您的活动或应用程序中。

**通过代码**（确保在 Activity.onCreate 中的 setContentView 之前调用它）：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-16T16:12:12.193

对于那些有问题的人`getActionBar().hide();`

考虑使用：

```
getSupportActionBar().hide(); 
```

# java - Dynamically Selecting Fields from Java Objects

> ID：12880851
> 
> 赞同：0
> 
> 时间：2012-10-14T09:20:51.897
> 
> 标签：java, database, select, enums

I've got an Object in Java representing the contents of a database, like so:

```
public Database {
    int varA;
    String varB;
    double varC;
} 
```

Now I'm trying to select and order certain elements for forther processing, but I want to make it configurable, so I created an enum which represents all attributes of the object like

```
public enum Contents {
    VarA,
    VarB,
    VarC;
} 
```

So now when I create a selection like

```
Contents[] select = { Contents.VarC, Contents.VarB }; 
```

i want to generate a List of String values representing the actual database contents from this. Now the only Implementation i could think of is switching for each entry in the selection, with has a pretty ugly quadratic complexity...

```
public List<String> switchIT(Database db, Contents[] select) {
    List<String> results = new ArrayList<String>();

    for (Contents s : select) {
        switch(s) {
            case VarA:
                results.add(db.varA.toString());
                break;
            //go on...
        }
    }

    return results;
} 
```

is there a more direct way to map between enum and dynamic object values? Or in more general terms: What is the best way to select values from an object dynamically?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:23:07.877

Use the power of Java enums, which are fully-fledged classes.

```
public enum Contents {
  VarA { public String get(Database d) { return d.getVarA(); } },
  VarB { public String get(Database d) { return d.getVarB(); } },
  VarC { public String get(Database d) { return d.getVarC(); } };
  public String get(Database d) { return ""; }
} 
```

Your client code then becomes

```
public List<String> switchIT(Database db, Contents[] select) {
  List<String> results = new ArrayList<String>();
  for (Contents s : select) results.add(s.get(db));
  return results;
} 
```

A more concise, but slower, solution would be to use a single implementation of `get` based on reflection and use the name of the enum member to generate the appropriate getter name:

```
public enum Contents {      
  VarA, VarB, VarC;

  private final Method getter;

  private Contents() {
    try {
      this.getter = Database.class.getMethod("get"+name());
    } catch (Exception e) { throw new RuntimeException(e); }
  }
  public String get(Database d) {
    try {
      return (String) getter.invoke(d); 
    } catch (Exception e) { throw new RuntimeException(e); }
  }
} 
```

# jsf - 双击列表框的值后如何调用Java方法

> ID：12880854
> 
> 赞同：0
> 
> 时间：2012-10-14T09:21:00.417
> 
> 标签：jsf, jsf-2, listbox, multi-select, double-click

我有如下多选列表框。

```
<t:selectManyListbox id="sourceCars"  style="width: 40%;"
                     value="#{PersonalInformationDataBean.listOfUsers002}" size="10">
    <t:selectItems value="#{PersonalInformationDataBean.showAllMyRemData()}" var="t"
                   itemLabel="#{t.title}" itemValue="#{t.status}" >
    </t:selectItems>
</t:selectManyListbox> 
```

`callMeOnDoubleClick()`如果我双击列表框中的项目，我想要的是调用 Java 方法。

知道如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:26:20.357

使用`<f:ajax event="dblclick">`.

```
<t:selectManyListbox ...>
    <f:ajax event="dblclick" listener="#{bean.listener}" />
</t:selectManyListbox> 
```

### 也可以看看：

*   [如何在 JSF 中创建选择列表？尝试使用 JS/jQuery 移动项目，但使用“验证错误：值无效”提交错误](https://stackoverflow.com/questions/12874394/how-to-create-a-picklist-in-jsf-tried-moving-items-using-js-jquery-but-submit)

# python - 多次重用代码的最有效方法？还有我的 while 无限循环与布尔开关

> ID：12880857
> 
> 赞同：1
> 
> 时间：2012-10-14T09:21:51.400
> 
> 标签：python, while-loop, boolean, infinite-loop

当我刚开始时，我正在制作一个石头剪刀布游戏作为一个小项目，我必须经常使用相同的代码。最好的方法是什么，因为目前我已经将它复制并粘贴到了整个地方。它看起来很不整洁，而且我在验证输入时遇到了循环问题，不得不全部更改它是一件很痛苦的事情。

```
user_continue = raw_input("Would you like to play again? Y/N: ")
user_continue = user_continue.upper()
#Yes or no continue for the continue while loop to continue working until correct user input.
y_n_continue = False
while y_n_continue == False:
    if user_continue == "Y" or user_continue == "YES" or user_continue == "N" or user_continue == "NO":
        if user_continue == "Y" or user_continue == "YES":
            continue_game = True
            y_n_continue = True
        elif user_continue == "N" or user_continue == "NO":
            continue_game = False
            y_n_continue = True
        else:
            print "Press Y or N"
            y_n_continue = False
    else:
        print "" 
```

如果我添加整个代码可能会更容易（有了修复，感谢 Anton。目前我收到错误 - TypeError：'bool' object is not callable。

我基本上是想让它循环游戏只要用户想要，同时还要验证输入以使一切尽可能防弹。

编辑 2 - 这是新代码，我有一些测试数据。

当我启动它时，系统会提示您在开始时输入 y/n。

您还必须在每场比赛后输入 y 或 n 两次。

如果您将“错误”数据输入到石头/纸/剪刀选择中，它将进入 y/n 选择

```
import random

def continue_game():
    while True:
        user_continue = raw_input("Would you like to play again? Y/N: ").upper()
        if user_continue in ["Y", "YES", "N", "NO"]:
            return user_continue in ["Y", "YES"]
        else:
            print "Press Y or N"

while continue_game():

    #computers choice of rock, paper or scissors
    computer_input = ["ROCK", "PAPER", "SCISSORS"]
    computer_choice = random.choice(computer_input)
    #users choice or rock, paper or scissors
    user_input = raw_input("Choose rock, paper or scissors: ")
    #Turns user input to upper case.
    user_choice = user_input.upper()
    if user_choice == "ROCK" or user_choice == "PAPER" or user_choice == "SCISSORS":
        #Computer = ROCK
        if computer_choice == "ROCK":
            #user = ROCK
            if user_choice == "ROCK":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You draw!"

                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

            #user = PAPER
            elif user_choice == "PAPER":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You win!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

            #user = SCISSORS   
            elif user_choice == "SCISSORS":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You lose!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

        #Computer = PAPER
        elif computer_choice == "PAPER":
            #user = ROCK
            if user_choice == "ROCK":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You lose!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

            #user = PAPER
            elif user_choice == "PAPER":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You draw!"
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

            #user = SCISSORS   
            elif user_choice == "SCISSORS":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You win!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

        #Computer = SCISSORS
        elif computer_choice == "SCISSORS":
            #user = ROCK
            if user_choice == "ROCK":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You win!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

            #user = PAPER
            elif user_choice == "PAPER":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You lose!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

            #user = SCISSORS   
            elif user_choice == "SCISSORS":
                print "You have chosen: " + user_choice
                print "The computer has chosen: " + computer_choice
                print "You draw!"
                #replay?
                if continue_game():
                    print "continue"
                else:
                    continue_game = False

        else:
            print "Something has gone wrong."
    else:
        print "Are you sure you entered that correctly?" 
```

输出：

```
Would you like to play again? Y/N: y

Choose rock, paper or scissors: rock

You have chosen: ROCK

The computer has chosen: PAPER

You lose!

Would you like to play again? Y/N: y

continue

Would you like to play again? Y/N: y

Choose rock, paper or scissors: paper

You have chosen: PAPER

The computer has chosen: ROCK

You win!

Would you like to play again? Y/N: wer

Press Y or N

Would you like to play again? Y/N: dfg

Press Y or N

Would you like to play again? Y/N: y

continue

Would you like to play again? Y/N: y

Choose rock, paper or scissors: test

Are you sure you entered that correctly?

Would you like to play again? Y/N: y

Choose rock, paper or scissors: rock

You have chosen: ROCK

The computer has chosen: SCISSORS

You win!

Would you like to play again? Y/N: n

exit

Would you like to play again? Y/N: n

>>> 
```

我知道我很痛苦，但这一切都值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T09:25:30.830

您可以从代码中创建一个函数并返回`continue_game`变量的值。这是包装在函数中的代码的缩小版本，以及它的用法示例：

```
def continue_game():
    while True:
        user_continue = raw_input("Would you like to play again? Y/N: ").upper()
        if user_continue in ["Y", "YES", "N", "NO"]:
            return user_continue in ["Y", "YES"]
        else:
            print "Press Y or N"

if continue_game():
    print "continue"
else:
    print "exit" 
```

更新：关于您的完整代码，要修复错误，您需要删除以下行：

```
continue_game = True 
```

并替换：

```
while continue_game == True: 
```

和：

```
while continue_game(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:26:54.120

首先你应该避免像 while var == False 使用 while not var 之类的东西：

同样的事情：

"如果 user_continue == "Y" 或 user_continue == "YES" 或 user_continue == "N" 或 user_continue == "NO":"

做类似的事情：

“如果 user_continue.upper() 在 "YESNO"

有更好的方法吗？反而 ：）

我认为询问玩家是否想再次玩的正确方法是制作一个“游戏”函数并在最后调用它

这里的例子：http: [//pastebin.com/0jQtwGdi](http://pastebin.com/0jQtwGdi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:33:00.230

一旦你弄清楚这个代表游戏规则的表格：

```
 | ROCK2 | PAPR2 | SCIS2 |
------+-------+-------+-------|
ROCK1 |    0  |     2 |     1 |
PAPR1 |    1  |     0 |     2 |
SCIS1 |    2  |     1 |     0 |

1 = column wins, 2 = row wins, 0 = draw 
```

通过使用字典和元组的索引以及一些异常处理，您的整个程序可以缩小很多：

```
import random

m = dict(
        rock     = dict(rock=0, paper=2, scissors=1),
        paper    = dict(rock=1, paper=0, scissors=2),
        scissors = dict(rock=2, paper=1, scissors=0)
    )

while True:

    try:
        continue_game = {'n': False, 'y': True}[
            raw_input("Would you like to play again? Y/N: ")[0].lower()
        ]
    except:
        print "Press Y or N"
        continue # next loop

    if not continue_game: break

    human = raw_input("Choose rock, paper or scissors: ").lower()
    computer = random.choice(m.keys())

    print "You have chosen:", human
    print "The computer has chosen:", computer
    print ("You draw!", "You lose!", "You win!")[ m[computer][human] ] 
```

一开始您可能会发现它有点棘手，但是这样设计的代码可以确保您[不会重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，并且它比在您的情况下使用 if-then-else 结构化的代码更具可读性（和可维护性）。

# java - getTableCellRendererComponent 被一遍又一遍地调用，使 CPU 使用率达到 100%

> ID：12880867
> 
> 赞同：1
> 
> 时间：2012-10-14T09:22:41.307
> 
> 标签：java, swing, jtable, cpu-usage, tablecellrenderer

我有一个`JTable`，其中一个列应该显示图像；我重写了执行此操作`getTableCellRendererComponent`的方法。`DefaultTableCellRenderer`但问题是，当图像**不是** `Null`并且单元格显示它时，此方法被反复调用（就像在无限循环中调用一样）并使用 100% 的 CPU！（当图像是`Null`没有问题的！）。

问题是什么？

我的扩展课程是：

```
public class imageCellRenderer extends DefaultTableCellRenderer{

    @Override
    public void validate() {}
    @Override
    public void revalidate() {}
    @Override
    protected void firePropertyChange(String propertyName, Object oldValue, Object newValue) {}
    @Override
    public void firePropertyChange(String propertyName, boolean oldValue, boolean newValue) {}
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        if(isSelected) {
            this.setBackground(table.getSelectionBackground());
            this.setForeground(table.getSelectionForeground());
        }else {
            this.setBackground(table.getBackground());
            this.setForeground(table.getForeground());
        }
        this.setIcon(null);
        Image Scaled;
        ImageIcon tmp;
        System.out.println("CR");
        if(value != null){
            System.out.println("CRP");
            if(value instanceof ImageIcon){
                tmp=(ImageIcon)value;
            }else{
                tmp=new ImageIcon(value.toString());
            }
            int w=tmp.getIconWidth();
            int h=tmp.getIconHeight();
            int refW=100;
            int refH=100;
            double ratio=(double)w/(double)h;
            if(w!=refW && h!=refH){
                int nh,nw;
                double relx=(double)w/(double)refW;
                if(((double)h/relx)<refH){
                    nh = (int) Math.round(refW / ratio);
                    nw = refW;
                }else{
                    nw=(int)Math.round(refH*ratio);
                    nh=refH;
                }
                Scaled=tmp.getImage().getScaledInstance(nw, nh, Image.SCALE_SMOOTH);

                tmp=new ImageIcon(Scaled);
            }
            this.setIcon(tmp);
            table.setRowHeight(row, tmp.getIconHeight());

            this.setSize(100, tmp.getIconHeight());
            this.setHorizontalAlignment(JLabel.CENTER);
        }
        return this;
    }

} 
```

我像这样使用它：

```
jTable1.getColumnModel().getColumn(2).setCellRenderer(new imageCellRenderer()); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T09:49:44.760

去除那个

```
table.setRowHeight(row, tmp.getIconHeight()); 
```

从渲染器调用。此调用将调整再次触发渲染器的行高

# asp.net - 会员提供者将密码重置为自定义格式的密码

> ID：12880872
> 
> 赞同：0
> 
> 时间：2012-10-14T09:22:50.707
> 
> 标签：asp.net, asp.net-membership

会员提供者 ResetPassword 方法，重置包含大量非 alfa 数字字符的密码。

问题是是否可以将默认密码创建模板更改为仅限数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:37:30.513

对我有用的技巧是：

1.  重置密码并获取新密码，然后使用新密码调用方法 ChangePassword 将接受我自己选择的新生成的密码，如果有人能提出一些不那么棘手的建议，将不胜感激。

# javascript - 睡眠后如何从 xmlhttp 对象发送 POST 请求

> ID：12880875
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:23:09.667
> 
> 标签：javascript

> **可能重复：**
> [如何在 JavaScript 循环中添加延迟？](https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop)

我想从对象发送一些`POST`请求，而无需等待睡眠后的响应。在循环中，正在发送此请求。如果我不等待就发送所有请求，我的浏览器会暂时没有响应，服务器端也不允许这样做。我怎样才能在所有这些请求中加入睡眠？ 这就是我正在使用的 -`xmlhttp``javascript``for``POST`

```
for (var i = 0; i < users.length; i++) {
    var http = new XMLHttpRequest();
    //set args here, which is based elements of array users
    http.open('POST', '/user/home/index.php', true);
    //Set all headers here then send the request
    http.send(args);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:42:59.480

没有办法延迟当前脚本的执行。您将不得不使用异步请求并重组您的代码。

因此，如果您有这样的代码：

```
function postData() {
    for (var i = 0; i < users.length; i++) {
        var http = new XMLHttpRequest();
        //set args here, which is based elements of array users
        http.open('POST', '/user/home/index.php', true);
        //Set all headers here then send the request
        http.send(args);
        //access request result
        if (http.status == 200) {
            console.log(http.responseText);
        } else {
            console.log('request error');
        }
    }
} 
```

像这样改变它：

```
var userIndex = 0;

function postData() {
    if (userIndex >= users.length) {
        //no more users to process
        return;
    }

    var http = new XMLHttpRequest();
    //set args here, which is based elements of array users
    http.open('POST', '/user/home/index.php', true);

    //set request handler
    http.onreadystatechange = function() {
        if (http.readyState != 4) return;
        if (http.status == 200) {
            console.log(http.responseText);
        } else {
            console.log('request error');
        }
        //process next user index
        userIndex++;
        window.setTimeout(function() {
            postData(); //do it again
        }, 5000); //5 seconds delay
    };

    //Set all headers here then send the request
    http.send(args);
}

postData(); //start the request chain 
```

# audio - 是否有用于 MP3 编码的 ActionScript 库而不是 Shine-MP3-Encoder？

> ID：12880877
> 
> 赞同：2
> 
> 时间：2012-10-14T09:23:34.143
> 
> 标签：audio, actionscript, mp3, codec

是否有用于 MP3 编码的 ActionScript 库而不是 Shine-MP3-Encoder？（https://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy）这个库工作正常，但我想找到一个类似的解决方案（在 ActionScript 上，而不是 C 上）来针对特定需求对其进行优化。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-15T08:58:34.820

我将麦克风录制成 WAV，然后用`ffmpeg -i d:/path/input.wav d:/path/output.mp3`它立即转换成 MP3。当 FFMPEG 完成时，我删除了 WAV。FFMPEG 是一个很酷的小 EXE，您可以在任何目录中添加到您的项目中。我使用[Thibault 的课程](http://code.tutsplus.com/tutorials/create-a-useful-audio-recorder-app-in-actionscript-3--active-5836)录制成 WAV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-03T16:32:00.780

不要等待它。纯 AS3 库是不可能的，因为 AS3 的速度太慢，无法进行 MP3 编码。为此，您需要通过[AIR Native Extensions](http://www.adobe.com/devnet/air/native-extensions-for-air.html) (ANE) 或 Alchemy 使用 C++。ANE 与 Adob​​e AIR 配合使用，因此您可以将内容发布为桌面和移动应用程序。我看不出有什么问题。

有关基于 ANE 的麦克风录音，请参阅这些：

*   [ANE-RecordAudio](https://github.com/mani95lisa/ANE-RecordAudio)
*   [空气麦克风](http://www.as3gamegears.com/air-native-extension/airmicrophone/)
*   [空气麦克风-ANE](https://github.com/j3k0/AirMicrophone-ANE)

# ios - 关闭当前呈现的并在应用程序简历上显示特定的 ViewController

> ID：12880880
> 
> 赞同：1
> 
> 时间：2012-10-14T09:23:45.740
> 
> 标签：ios, modalviewcontroller

我是新手，正在为 iPhone 开发一个带有各种（**A**、**B**、**C**、**D**）视图控制器的单一视图应用程序。根视图控制器为**A**，其他视图控制器显示为

> [自我presentModalViewController：**C**动画：YES]；在某些按钮上单击。

如果应用程序由于电话或主页按钮或任何操作而在**C**或任何其他视图中暂停，并且在恢复时我想关闭呈现的视图（ **C**或**D**或任何）并呈现**B。**

我应该编码什么？（在 appDelegate.m 上）或在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:28:45.807

您可以使用以下`AppDelegate`方法：

**更新**

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was
    //inactive. If the application was previously in the background, optionally refresh the user interface.
    [self.viewController dismissAnyViewController];
    [self.viewController representBmodelViewController];
} 
```

在您的 中实现这两种方法`viewContoller`，第一种方法`viewController`是使用

```
[self dismissModalViewControllerAnimated:NO]; 
```

然后呈现您想要的`viewController`.

阅读方法内的注释以了解它的作用。

# javascript - 构造 Json 数组时遇到问题

> ID：12880881
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:23:59.517
> 
> 标签：javascript, json

我一直在努力构建一个 json 数组，但没有任何成功。对于有 json 经验的人来说，这对他来说是小菜一碟。

所以我想构造一个这样的json数组：

```
 { 
    "M" : [ {id:"58893_1_M", value:"Ontario", imageFile:"58893_1.jpg"} ] ,
    "L" : [ {id:"58893_1_L", value:"Ontario", imageFile:"58893_1.jpg"} ] , 
    "XL" : [ {id:"58893_1_XL", value:"Ontario", imageFile:"58893_1.jpg"} ] 
 } 
```

这是代码：

```
 var totalObjects = new Array();

 for (i = 0; i < roomQuotes.length; i++) {

        var selectedClothe = {
            index: []
        };

        var clotheId = some value;
        var clotheQuantity = some value;
        var clotheImage =some value;

        selectedClothe.index.push({ "id": clotheId , "value": clotheQuantity , "imageFile": clotheImage });

        totalObjects.push(selectedClothe);

    } 
```

但相反我有这个输出

```
 { 
    "index" : [ {id:"58893_1_M", value:"Ontario", imageFile:"58893_1.jpg"} ] ,
    "index" : [ {id:"58893_1_L", value:"Ontario", imageFile:"58893_1.jpg"} ] , 
    "index" : [ {id:"58893_1_XL", value:"Ontario", imageFile:"58893_1.jpg"} ] 
 } 
```

如何在索引变量中输入值？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:48:19.423

尝试：

```
var totalObjects = {};

 for (i = 0; i < roomQuotes.length; i++) {

        var selectedClothe = [];

        var clotheId = some value;
        var clotheQuantity = some value;
        var clotheImage =some value;

        selectedClothe.push({ "id": clotheId , "value": clotheQuantity , "imageFile": clotheImage });

        totalObjects.[clotheId.substr(clotheId.lastIndexOf('_') +1)] = selectedClothe;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:26:45.833

用这个。假设`_`字符后面的结束衣服ID名称是衣服尺寸。

```
var totalObjects = {}; //selection object

for (i = 0; i < roomQuotes.length; i++) {

    var clotheId = some value;
    var clotheQuantity = some value;
    var clotheImage = some value;

    var clotheSize = clotheId.substr(clotheId.lastIndexOf('_')+1);
    if (typeof(totalObjects[clotheSize]) == 'undefined') {
        //clothe size array not yet exist. create it
        totalObjects[clotheSize] = []; //clothe size array
    }

    totalObjects[clotheSize].push({ "id": clotheId , "value": clotheQuantity , "imageFile": clotheImage });
}
//note: there will be no "totalObjects.XL" if there's no selected clothe of "XL" size

//example: list selected clothe sizes
//see web browser's Error Console for console.log result
var clotheSizes = Object.keys(totalObjects); //clothe size code array
console.log('Selected clothe sizes: '+clotheSizes.join(', '));
//shows e.g.: "M, L, XL" or "" if no selection

//example: get first selected clothe ID of first clothe size selection
if (clotheSize.length > 0) {
    var clothSizeSelections = totalObjects[clotheSizes[0]];
    console.log('First selected clothe ID: '+clothSizeSelections[0].id);
} else {
    console.log('No selection');
}

//example: is "M" clothe size has selection?
if (typeof(totalObjects.M) != 'undefined') {
    console.log(totalObjects.M.length+' selections for clothe size "M"');
} else {
    console.log('No selection for clothe size "M"');
} 
```

# ruby-on-rails-3 - 跨域 json POST rails 3 休息服务

> ID：12880882
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:24:12.853
> 
> 标签：ruby-on-rails-3, rest, jquery, http-post

如何为 rails 3 rest 服务进行跨域 POST 调用。

我已经阅读了很多关于 jsonp 的内容，但它仅适用于 GET 方法。有没有其他方法可以在 rails 3 上执行此操作。任何人都可以为我提供对 rails rest 服务进行跨域 json POST 调用的确切步骤。

我想通过 ajax jquery 对 Rails 服务器端休息服务进行 POST 调用。

我尝试使用 JSONP，但它对我不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:28:47.287

包括 POST 作为类型。

```
$.ajax({
   type: "POST",
   url: 'ruby/file/name',
   data: {'foo': 'bar'},
   success: function(s) { 
     console.log('success' + s);
   },
   error: function(e) {
     console.log('error' + e);
   }
}); 
```

# javascript - javascript中页面重新加载的断点

> ID：12880884
> 
> 赞同：0
> 
> 时间：2012-10-14T09:24:34.260
> 
> 标签：javascript, debugging

我在调试国外复杂的js代码。有按钮，当我按下它时，页面会重新加载，但这不应该发生。当我打破点击处理程序时，它会完全执行并且页面重新加载/刷新在它完成后发生。退出处理程序后，我进入 jquery 深度。如何跟踪使页面重新加载的代码？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:21:46.520

问题是`<button>`声明不包含该`type`属性。以下[是 HTML 标准对此的说明：](http://www.w3.org/TR/2011/WD-html5-20110525/the-button-element.html#attr-button-type)

> type 属性控制按钮被激活时的行为。它是一个枚举属性。下表列出了属性的关键字和状态 — 左列中的关键字映射到与关键字在同一行的第二列中的单元格中的状态。
> 
> ```
> +---------+---------------+--------------------+
> | Keyword |     State     |  Brief description |
> +---------+---------------+--------------------+
> | submit  | Submit Button | Submits the form.  |
> | reset   | Reset Button  | Resets the form.   |
> | button  | Button        | Does nothing.      |
> +---------+---------------+--------------------+ 
> ```
> 
> 缺失值默认为提交按钮状态。
> 
> 如果 type 属性处于 Submit Button 状态，则该元素具体是一个提交按钮。

提交按钮的默认操作是将表单提交到服务器（从而重新加载页面）。为防止这种情况，您需要`type="button"`在按钮上指定属性，或[阻止单击处理程序中的默认操作。](http://api.jquery.com/event.preventDefault/)

[JSFiddle 显示所有案例。](http://jsfiddle.net/57C7x/)

# javascript - 在 iframe 加载时加载文本

> ID：12880892
> 
> 赞同：2
> 
> 时间：2012-10-14T09:25:40.727
> 
> 标签：javascript, jquery, html, iframe, load

我有一个脚本，它会在加载 iframe 的内容时显示加载文本。我第一次打开页面时，它会完美运行。但是在这个页面上，我有将在 iframe 内启动的链接，并且不会为这些链接显示加载文本:(

请参阅此处的示例： [http ://www.ndnm.co.cc/test.php](http://www.ndnm.co.cc/test.php)

它会在您第一次加载页面时工作，但如果您单击“测试链接”，则不会显示加载文本:(

注意：iframe 正在加载外部域

我该如何解决？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:28:12.633

您可以尝试在链接上放置一个点击事件，这样所有点击它的人都会显示“页面正在加载..”图像，并被已经存在的“hideProgress()”函数隐藏。

就像是：

```
<a href="http://www.perdu.com" target="iframe" onClick="document.getElementById('loader').style.display = 'block';">TEST LINK</a><br> 
```

像这样的东西：http: [//jsfiddle.net/SFjS2/](http://jsfiddle.net/SFjS2/)（请记住，第二页加载得非常快，所以“页面加载”图像不会很容易看到..尝试在那里放更多东西：P）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:55:07.063

当您将其标记为此类时，我将为您提供一个 jquery 解决方案。

解决方案代码位于[http://jsfiddle.net/nPWAp/1/](http://jsfiddle.net/nPWAp/1/)但是 HTML 是

```
<body>
<div>
   <a href="#" id="testlink">TEST LINK</a>
</div>
<iframe id="frame"></iframe>
<div id="statement"></div>
</body> 
```

jQuery是

```
$(document).ready(function() {
    $("#testlink").click(function() {
      // --- set statement -- 
      $("#statement").show();  // show the div in case it was hidden.     
      $("#statement").text("Loading content..."); // replace the text
      $("#statement").hide(5000); // hide after 5 seconds

      // --- Scrape content --- //        
      $("#frame").attr('src', "http://www.test.com");
    });
}); 
```

添加一些 CSS

```
#frame{
wdith: 100%
height: 50em;
border: 1px solid #ccc;
} 
```

它应该都发出咕噜声。显然，您会想查看 jquery 以获得一些更有趣的选项。

高温高压

# c# - 动态绑定到 DataTemplate

> ID：12880896
> 
> 赞同：2
> 
> 时间：2012-10-14T09:26:07.187
> 
> 标签：c#, xaml, data-binding, windows-8, windows-runtime

我有一个`ListBox`和多个`DataTemplate`s，在单独的文件中。

```
<ListBox ItemTemplate="{StaticResource ItemTemplate1}"/> 
```

在`Styles.xaml`文件中：

```
<DataTemplate x:Key="ItemTemplate1">...</DataTemplate>

<DataTemplate x:Key="ItemTemplate2">...</DataTemplate> 
```

我想根据其列表中的对象类型`ItemTemplate`更改。`ListBox`

有没有办法访问`DataTemplate`代码隐藏中的单独 s，以便我可以绑定到 my 的属性`Page`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:35:06.097

试试这个解决方案几乎可以实现您想要实现的目标：

*在 WP7 中按类型动态应用数据模板*

[http://www.codeproject.com/Articles/113152/Applying-Data-Templates-Dynamically-by-Type-in​​-WP7](http://www.codeproject.com/Articles/113152/Applying-Data-Templates-Dynamically-by-Type-in-WP7)

它基于 WP7，但也适用于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:28:53.290

做到这一点的方法`TemplateSelector`是指定 DataType 属性而不指定 x:Key。

```
<DataTemplate DataType="{x:Type Type1}">...</DataTemplate>
<DataTemplate DataType="{x:Type Type2}">...</DataTemplate> 
```

在这种情况下，适当的 DataTemplate 将自动应用于已绑定指定类型属性的所有位置。

但我更喜欢使用`TemplateSelector`.

要在代码隐藏中访问分离的 DataTemplate，您应该首先获取资源字典：

```
var dict = new ResourceDictionary 
{Source = new Uri("/ProjectNamespace;component/Styles.xaml",  UriKind.Relative)}; 
```

然后你可以得到模板：

```
var dataTemplate = (DataTemplate) dict["ItemTemplate1"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:41:38.817

WPF 中有内置支持以满足您的要求。开始阅读[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx "数据模板选择器")以在运行时根据特定条件选择模板。

# hibernate - 从 HQL 查询中获取对象

> ID：12880905
> 
> 赞同：0
> 
> 时间：2012-10-14T09:27:57.563
> 
> 标签：hibernate

我正在做一个涉及 struts2 和 hibernate 的项目。实际上，我想执行下面的选择查询并将值存储到用户类型的对象中。我尝试使用 tostring()、querystring() 方法都只返回查询字符串。我尝试在谷歌上搜索它说“HQL以对象的形式返回结果”但我无法使用查询获取类的成员。如何获取它请帮助提前谢谢

```
Query query=session.createQuery(" from Users where userid=:temp");
query.setParameter("temp", "kumar"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:40:53.437

```
List<User> users = query.list(); 
```

看起来它应该可以工作（假设您的表和实体已设置）。您也可以使用[条件](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)。

# c++ - 无法计算方程，总是给出零

> ID：12880912
> 
> 赞同：0
> 
> 时间：2012-10-14T09:28:48.397
> 
> 标签：c++, equation

我错过了什么？变量 percent_ 始终等于 0。我检查了 nTimes 和奖金，它们给出了正确的值作为输入的值。即使我测试了一个简单的等式，例如 percent_=1+1，percentage_ 也会给出 0。有人可以帮忙吗？

```
 #pragma once
    #include <iostream>
    #include <string>
    #include <cstdlib>
    #include <iomanip>

    using namespace std;

    class GuessMachine
    {
    private:
        int nTimes;
        int winnings;
        string nM[6];

    public:
        GuessMachine();
        void displayPrizes();
        void displayMenu();
        int getInput();
        void checkNumber();
        void checkPrize();
    };

    void GuessMachine::checkPrize()
    {
        MagicNumber mn;
        int prize_=mn.generateNumber();
        float percentage_;

        percentage_ = float (winnings/nTimes*100); //<--On this line percentage is always 0 no matter what winnings and nTimes are
        cout<<"Percentage is "<<percentage_<<endl; 

        if(percentage_ >= 50)
        {
            cout<<"You have scored "<<percentage_<<"% and won "<<nM[prize_];
        }
        else
        {
            cout<<"You have scored "<<percentage_<<"%. You lose!!";
        }

        cin.ignore();
        cin.ignore();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:31:27.880

尝试

```
float (winnings) /nTimes*100 
```

反而。

您的版本仍将`int`-转换`0`为浮点数。

如果一个操作数`/`是浮点数，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:33:27.783

改变

```
percentage_ = float (winnings/nTimes*100); 
```

至

```
 percentage_ = (float(winnings))/nTimes*100; 
```

因为您需要将 1 个数字更改为浮动，以便该部门在浮动上工作。

# c# - 在 DrawText win32 函数中设置格式

> ID：12880919
> 
> 赞同：1
> 
> 时间：2012-10-14T09:29:10.830
> 
> 标签：c#, winapi

当我通过 Win32 API 的 DrawText 函数绘制文本时，
有没有办法确定将使用哪种字体，或者确定字体大小、粗体或斜体？
PS我用C#写的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T09:35:38.743

正如[MSDN 所说](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498%28v=vs.85%29.aspx)，

> DrawText 函数使用设备上下文的选定字体、文本颜色和背景颜色来绘制文本。

这意味着您可以从设备上下文中获取当前字体句柄，然后获取[`LOGFONT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145037%28v=vs.85%29.aspx)为您提供您请求的字体详细信息的结构。

由于 API 使用当前选择的字体，要更改它，您需要有可用的新字体句柄（您通常预先创建它，或者`HFONT`使用例如[`CreateFont`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183499%28v=vs.85%29.aspx)或`CreateFontIndirect`API 获取字体句柄）。然后在调用之前，`DrawText`您将当前选择的字体替换为您自己使用的字体，一旦完成，您将使用另一个调用`SelectObject`放回原始字体。`SelectObject`

# java - 是否可以在运行时使用 java 代码修改 JVM 参数？

> ID：12880920
> 
> 赞同：5
> 
> 时间：2012-10-14T09:29:10.703
> 
> 标签：java, jvm-arguments

> **可能重复：**
> [从 JVM 内部修改 JVM 参数](https://stackoverflow.com/questions/514487/modify-jvm-args-from-inside-the-jvm)

我从 JVM 内部发现了一个关于这个[Modify JVM args](https://stackoverflow.com/questions/514487/modify-jvm-args-from-inside-the-jvm)的老问题。这是3.5年前问的。想知道现在可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T09:32:03.253

不，仍然无法在运行时更改 JVM 参数。对于大多数设置，它很可能也永远不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:51:43.150

一般来说没有。

但是，在*某些*情况下，您可以在运行时更改一些特定的配置参数，例如：

*   [http://fahdshariff.blogspot.sg/2011/08/changeing-java-library-path-at-runtime.html](http://fahdshariff.blogspot.sg/2011/08/changing-java-library-path-at-runtime.html)

尽管如此，尝试在运行时更改 JVM 参数可能是一个坏主意——它们是为运行时环境的一次性配置而设计的。如果您发现自己想在运行时更改 JVM 参数，我怀疑您的设计一开始就有问题，您应该寻找其他方法来实现您的目标。

# cryptography - C# SHA256Managed 和 cryptopp::SHA256 有什么区别

> ID：12880923
> 
> 赞同：3
> 
> 时间：2012-10-14T09:29:42.197
> 
> 标签：cryptography, sha, sha256, crypto++

我正在尝试用 cryptopp::SHA256 替换 MS SHA256Managed 函数。这是 C# 代码

```
internal byte[] GenerateKey(byte[] keySeed, Guid keyId)
{
        byte[] truncatedKeySeed = new byte[30];
        Array.Copy(keySeed, truncatedKeySeed, truncatedKeySeed.Length);
        Console.WriteLine("Key Seed");
        foreach (byte b in truncatedKeySeed)
        {
            Console.Write("0x" + Convert.ToString(b, 16) + ",");
        }
        Console.WriteLine();
        //
        //  Get the keyId as a byte array
        //
        byte[] keyIdAsBytes = keyId.ToByteArray();
        SHA256Managed sha_A = new SHA256Managed();
        sha_A.TransformBlock(truncatedKeySeed, 0, truncatedKeySeed.Length, truncatedKeySeed, 0);
        sha_A.TransformFinalBlock(keyIdAsBytes, 0, keyIdAsBytes.Length);

        byte[] sha_A_Output = sha_A.Hash;
        Console.WriteLine("sha_a:" + sha_A_Output.Length);
        foreach (byte b in sha_A_Output)
        {
            Console.Write("0x" + Convert.ToString(b, 16) + ",");
        }
        Console.WriteLine(); 
        .....
} 
```

输出结果：

关键种子 0x5d,0x50,0x68,0xbe,0xc9,0xb3,0x84,0xff,0x60,0x44,0x86,0x71,0x59,0xf1,0x6d,0x6b,0x75,0x55,0x44,0xfc,0xd5,0x11,0x69,0x89, 0xb1,0xac,0xc4,0x27,0x8e,0x88

密钥 ID 0x39,0x68,0xe1,0xb6,0xbd,0xee,0xf6,0x4f,0xab,0x76,0x8d,0x48,0x2d,0x8d,0x2b,0x6a,

sha_a:32 0x7b,0xec,0x8f,0x1b,0x60,0x4e,0xb4,0xab,0x3b,0xb,0xbd,0xb8,0x71,0xd6,0xba,0x71,0xb1,0x26,0x41,0x7d,0x99,0x55,0xdc,0x8e ,0x64,0x76,0x15,0x23,0x1b,0xab,0x76,0x62,

Crypto++的替换函数如下：

```
 byte key_seed[] = { 0x5D, 0x50, 0x68, 0xBE, 0xC9, 0xB3, 0x84, 0xFF, 0x60, 0x44, 0x86, 0x71, 0x59, 0xF1, 0x6D, 0x6B, 0x75, 0x55, 0x44, 0xFC,0xD5, 0x11, 0x69, 0x89, 0xB1, 0xAC, 0xC4, 0x27, 0x8E, 0x88 };
  byte key_id[] = { 0x39,0x68,0xe1,0xb6,0xbd,0xee,0xf6,0x4f,0xab,0x76,0x8d,0x48,0x2d,0x8d,0x2b,0x6a };
  byte truncated_key_seed[sizeof(key_seed)];
  memset( truncated_key_seed,0,sizeof(truncated_key_seed));
  memcpy( key_seed, truncated_key_seed, sizeof(key_seed) );
  byte output[SHA256::DIGESTSIZE];
  memset(output,0,sizeof(output));

  SHA256 sha_a;
  sha_a.Update(truncated_key_seed,sizeof(key_seed));
  sha_a.Update(key_id,sizeof(key_id));
  sha_a.Final(output);
  printf("size:%lu\n",sizeof(output));
  PrintHex(output,sizeof(output)); 
```

但是输出的哈希值为 DB 36 C9 F6 F7 29 6D 6F 52 21 DA 9F 55 1D AE BC 3E 5A 15 DF E1 37 07 EE 8F BC 73 61 5F D6 E1 C3 与C#的sha_a结果不同。

从[MSDN](http://msdn.microsoft.com/en-us/library/System.Security.Cryptography.SHA256Managed.aspx)和[Cryptopp 参考资料](http://www.cryptopp.com/docs/ref/class_hash_transformation.html#_details)中，SHA256Managed::TransformBlock 和 SHA256Managed::TransformFinalBlock 对 Cryptopp::Update 和 Cryptopp::Final 做了同样的事情。

SHA256Managed 和 cryptopp::SHA256 有什么区别导致这个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:09:37.847

对我来说，这似乎是您代码中的错误。

```
 sha_a.Update(truncated_key_seed,sizeof(key_seed)); 
```

确保`truncated_key_seed`两个版本中的相同，尤其是原始版本中未包含的字节`key_seed`...

# android - 如何将数据从文本文件发布到服务器文本文件

> ID：12880924
> 
> 赞同：0
> 
> 时间：2012-10-14T09:29:43.550
> 
> 标签：android, textbox, webserver, http-post

嗨，我将经度和纬度值存储在文本文件中并将它们保存在我的 sdcard 中。现在我想将此数据保存到 webserver(java) 文本文件。请告诉我如何在服务器中创建文本文件以及如何将数据发布到该文件.这是我的代码。

```
public class MainActivity extends Activity implements LocationListener{

private final static String STORETEXT="storetext.txt";

LocationManager locationManager ;
String provider;
String value1;
String value2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting LocationManager object
    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);        

    // Creating an empty criteria object
    Criteria criteria = new Criteria();

    // Getting the name of the provider that meets the criteria
    provider = locationManager.getBestProvider(criteria, false);

    if(provider!=null && !provider.equals("")){

        // Get the location from the given provider 
        Location location = locationManager.getLastKnownLocation(provider);

        locationManager.requestLocationUpdates(provider, 20000, 1, this);

        if(location!=null)
            onLocationChanged(location);
        else
            Toast.makeText(getBaseContext(), "Location can't be retrieved", Toast.LENGTH_SHORT).show();

    }else{
        Toast.makeText(getBaseContext(), "No Provider Found", Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onLocationChanged(Location location) {
    // Getting reference to TextView tv_longitude
    TextView tvLongitude = (TextView)findViewById(R.id.tv_longitude);

    // Getting reference to TextView tv_latitude
    TextView tvLatitude = (TextView)findViewById(R.id.tv_latitude);

    // Setting Current Longitude
    tvLongitude.setText("Longitude:" + location.getLongitude());

    // Setting Current Latitude
    tvLatitude.setText("Latitude:" + location.getLatitude() );

    value1 = tvLongitude.getText().toString();
    value2 = tvLatitude.getText().toString();

    // saveClicked();

    SaveClicked2();

}

public void SaveClicked2() {

    try{

    File file = new File("/sdcard/Sree.txt");
    file.createNewFile();
    FileOutputStream fOut = new FileOutputStream(file);
     OutputStreamWriter out = new OutputStreamWriter(fOut);
     out.append(value1);
     out.append(value2);
     out.close();

     Toast.makeText(getBaseContext(),
                "Done writing values to textfile",
                Toast.LENGTH_SHORT).show();

    }
    catch(Exception e){

        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();

    }

}

private void saveClicked() {

    try{
        OutputStreamWriter out=
                new OutputStreamWriter(openFileOutput(STORETEXT, 0));
        out.write(value1);
        out.write(value2);
        out.close();

        Toast
    .makeText(this, value1, Toast.LENGTH_LONG)
    .show();

    }
    catch(Throwable t){
        Toast.makeText(this, "Exception: "+ t.toString(), Toast.LENGTH_LONG)
        .show();

    }
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub      
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub      
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub      
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:55:07.430

如果您的 SD 卡上有文本文件，那么您可以使用以下上传方法将文件上传到您的服务器。

您将需要一个脚本，例如这个名为 uploader.php 的 PHP 脚本

```
 <?php

    $target_path = "H:/www/yourwebsitedirectory.com/"; 
    $target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
    } else{
    echo "There was an error uploading the file, please try again!";
    }

    ?> 
```

然后在你的 java 中你可以有一个像这样的 Uploader 函数：确保填写正确的异常处理，并且你需要获取 HTTPClient 库。

```
 public static void Uploader(File fname, String fpath) {
          try {
          DefaultHttpClient httpclient = new DefaultHttpClient();
          httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

          String postURL = "http://www.yourwebsite.com/uploader.php";
          HttpPost httppost = new HttpPost(postURL);

          // the boundary key below is arbitrary, it just needs to match the MPE so it can decode multipart correctly
          httppost.setHeader("Content-Type", "multipart/form-data; boundary=--32530126183148");
          MultipartEntity mpEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, "--32530126183148", Charset.forName("UTF-8"));
    try {
        mpEntity.addPart("uploadedfile",    new FileBody((fname), "application/txt"));
        mpEntity.addPart("MAX_FILE_SIZE",   new StringBody("100000"));

    } catch (Exception e1) {
    } 
          httppost.setEntity(mpEntity);
          HttpResponse response;
          try {
              response = httpclient.execute(httppost);
              HttpEntity resEntity = response.getEntity();
              if (resEntity != null) {
                  resEntity.consumeContent();
              }
          } catch (ClientProtocolException e) {
          } catch (Exception e) {
          }
          httpclient.getConnectionManager().shutdown();
          } catch (Throwable e) {
              try {
              } catch (Throwable e1) {
              }
          }
      } 
```

像这样调用函数：

```
 File tmpDir = new File(android.os.Environment.getExternalStorageDirectory(),"Directory of your file");
    File fname = new File(tmpDir, filesnameonSD);
    Uploader(fname); 
```

为了测试您的 PHP 脚本，您可以使用具有以下简单 HTML 表单的网页

```
 <form enctype="multipart/form-data" action="uploader.php" method="POST">
  <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
  Choose a file to upload: <input name="uploadedfile" type="file" /><br />
  <input type="submit" value="Upload File" />
  </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:36:56.137

我认为您需要做的是创建一个服务器端应用程序（即 web 服务），它将接受来自客户端 Android 应用程序的数据并在服务器上创建文件。

您不直接从您的 android 应用程序访问服务器文件系统 - 您只需将信息发送到服务器应用程序来处理它。

网上有很多用于创建 Web 服务的教程。

# c# - 如何在函数中获取默认构造函数值

> ID：12880925
> 
> 赞同：0
> 
> 时间：2012-10-14T09:29:52.850
> 
> 标签：c#, default-constructor

```
AppXmlLogWritter objParameterized = new AppXmlLogWritter(1234, "LogApplication", "LogFilepath");

AppXmlLogWritter objParmeterlessConstr = new AppXmlLogWritter();

objParameterized.WriteXmlLog("0", "LogFlag"); 
```

如何在此函数中获取默认构造函数值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:38:25.467

通过 this() 在你的其他构造函数中调用构造函数，如下所示

```
 public AppXmlLogWritter(int intLogIDPrefix, string strLogApplication, string strLogFilePath)
          :this()
    {
        LogIDPrefix = intLogIDPrefix;
        LogApplication = strLogApplication;
        LogFilePath = strLogFilePath;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:38:55.993

要从另一个构造函数调用类的基本构造函数，请使用如下`this`关键字：

```
public AppXmlLogWritter(int intLogIDPrefix, string strLogApplication, string strLogFilePath) 
    : this()
{ ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T09:33:24.830

不太清楚你在说什么价值，但如果你提到`randomNumber`，你已经在课堂上对它进行了*访问*。

如果您要调用的函数是使用 type 的函数`AppXmlLogWritter`，您可以定义如下属性：

```
public class AppXmlLogWritter{

        public int RandomNumber {get;set}; //PUBLIC PROPERTY

        public AppXmlLogWritter()
        {
            Random random = new Random();
            RandomNumber = random.Next(9999);
            LogDateTime = DateTime.Now.ToString("yyyyMMdd HHmmss");
        }

     .... ..
     .... ..       

} 
```

# emacs - 如何防止执行退出之前运行的所有钩子？

> ID：12880930
> 
> 赞同：2
> 
> 时间：2012-10-14T09:30:21.423
> 
> 标签：emacs, pymacs

我是在专门谈论 Pymacs，但这有助于了解在其他情况下是否会发生类似的事情。

问题：当 Pymacs 出现问题时，无论如何它都会尝试重新启动自己，尤其是当它根本无法启动时。但不知何故，它在保存或关闭任何文件（在 Python 模式下不是必需的）之前添加了一个要运行的钩子。那么，会发生什么 - 以“好的”方式关闭 Emacs 变得不可能 - 我只能从 shell 终止进程，因为 Pymacs 会进入无限循环：保存文件时 - 它会尝试重新启动自身，失败并防止文件被保存——因为它失败了，它会提示重新启动——无论我回答是或否来重新启动它，它都会失败并再次要求重新启动。

`M-x unload-feature`没有帮助，因为它无法卸载它（因为 .emacs 加载它）。顺便说一句，我不确定是否`unload-feature`可以做任何有意义的事情：| 我试图评估`(setq kill-buffer-hook nil)`，但这似乎也没有帮助。也许还有其他一些钩子？有没有办法强制`unload-feature`实际做某事？在这种情况下，我更喜欢保存文件并崩溃，然后是无限循环并且没有崩溃，但文件未保存的情况。

# c++ - 将现有键的值添加到 C++ 哈希图中的新键

> ID：12880937
> 
> 赞同：0
> 
> 时间：2012-10-14T09:30:48.333
> 
> 标签：c++, hashmap, key

我希望仅使用整数键在 C++ 中的哈希映射中插入整数数据。我拥有的原始数据将重复许多键。如果键不存在，我希望在 map 中插入一个值。但是，如果 key 存在旧数据并且应该添加我希望添加的新数据（c= key1 的旧值+ key1 的新值；c 应该为 key1 插入）。目前它正在被覆盖。

要查找 Map 中是否存在密钥，我发现使用它

if ( map.count("key")>0) { // 得到密钥 }.

但是，如果我必须在每次插入之前进行此检查，它只会将插入的复杂性增加到 n^2。有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:45:12.280

为什么你不使用`unordered_map`或`unordered_multimap`来自 C++11 或使用它的`boost`对应物？

你也可以这样做：

```
auto i = map.find( "key" );
if( i == map.end() ) {insert into map}
i->second = new value; 
```

如果地图中已经存在值，则使用此技术，您无需检查。并且根据`map`（甚至`unordered_map`）`map["key"]`将创建项目，如果它不存在并默认初始化它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T16:14:57.173

```
Lets say, you have a *map named* `m`, with **integer** `b` as value and `s` (can be of any data type, doesn't matter) as **key**, then you can use following snippet(C++):

auto i=m.find(s);              // iterator for map
if(i==m.end())             // element not found, if iterator reaches at end
    m.insert(make_pair(s,b));  // element inserted as new pair
else
{
    cin>>p;
    i->second+=p;          // accessing 'value' for given key and 
                           // incrementing it by p 
} 
```

# php - 在缩略图中显示最新的网络摄像头图像

> ID：12880938
> 
> 赞同：2
> 
> 时间：2012-10-14T09:30:49.167
> 
> 标签：php, webcam

几天来，我一直在尝试显示我的天气摄像头的缩略图。服务器路径如下

public_html ..cam ...20121012 ...20121013 ...20121014

日期文件夹是由我的网络摄像头设置每天自动创建的。所以每天它都会创建一个新文件夹并将其命名为 date('Ymd')。

我正在使用以下脚本将图像显示在我的 wordpress 侧边栏上，但我无法让它工作。此外，我想让它显示为缩略图，当访问者点击它时，让它在弹出屏幕中打开稍大（实际大小）。

```
<?php
chdir('/home/deb57301n2/domains/meteowestkust.be/public_html/cam/');
$subdirname = date('Ymd').'/';
echo getcwd();
$newest_mtime = 0;
$show_file = 'webcam_offline.png';
if ($handle = opendir($subdirname)) {
 while (false !== ($file = readdir($handle))) {
    if (($file != '.') && ($file != '..')) {
       $mtime = filemtime($subdirname.$file);
       if ($mtime > $newest_mtime) {
          $newest_mtime = $mtime;
          $show_file = $subdirname.$file;
       }
    }
  }
}
print '<img src="' .$show_file. '" alt="Weather Cam - West Coast - Belgium">';
?> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:17:24.817

它通过添加

$show_file = ' **/cam/** '.$subdirname.$file;

无论如何，谢谢你们的帮助！

# string - 在 Haskell 中使用字符串键进行动态编程

> ID：12880939
> 
> 赞同：2
> 
> 时间：2012-10-14T09:30:58.560
> 
> 标签：string, haskell, memoization

作为纯函数式编程习惯的新手，我不知道如何实现这种动态编程案例。我有一个`f :: String -> [String]`递归计算的函数并想记住它。Input `String`s 可以是任意的，所以我猜需要像 lazy 这样的东西`Map`，但找不到。如何在 Haskell 中实现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:31:03.350

使用记忆库：

```
import qualified Data.MemoCombinators as Memo

f :: String -> [String]
f = Memo.list Memo.char memof  -- because String = [Char]
    where
    memof x = ... f ...          -- call *f* recusively (not memof) 
```

有关更多信息，请参阅[文档](http://hackage.haskell.org/packages/archive/data-memocombinators/0.4.3/doc/html/Data-MemoCombinators.html)。另见[备忘录](http://hackage.haskell.org/packages/archive/MemoTrie/0.5/doc/html/Data-MemoTrie.html)

# php - 如何将 PHP 5.4 语法支持添加到 Aptana Studio 3？

> ID：12880944
> 
> 赞同：13
> 
> 时间：2012-10-14T09:31:26.883
> 
> 标签：php, syntax, aptana

在 Aptana 的代码编辑器中使用 PHP 5.4 的语法功能（例如`[]`，而不是）时，我得到一个语法错误。`array ()`有没有办法添加对 PHP 5.4 的支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:13:59.947

还没有。

[在http://jira.appcelerator.org/browse/APSTUD-4447](http://jira.appcelerator.org/browse/APSTUD-4447)有一张票

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T18:03:33.963

PHP 5.4 语法支持目前在最新版本的 Aptana Studio 3 中可用。但是 5.6 语法支持似乎不可用。我已经发布了一个关于它的问题。

# c# - PDF阅读器捕捉区域

> ID：12880945
> 
> 赞同：1
> 
> 时间：2012-10-14T09:31:29.737
> 
> 标签：c#, pdf

我需要构建一个可以呈现 pdf 文档的应用程序。应用程序应允许用户在 pdf 上绘制矩形以定义地址区域、发票号码区域等区域。应用程序将需要捕获这些区域并保存它们。

我已经有一个应用程序，我可以在其中将这些区域信息与 pdf 一起传递，它会将文本返回给我。我目前唯一的问题是我无法从用户那里获取区域信息。

所以任何人都可以请我指向任何可以执行上述操作的应用程序（允许用户绘制矩形来捕获区域）。

# c# - 计算数据库中检索到的行

> ID：12880950
> 
> 赞同：2
> 
> 时间：2012-10-14T09:32:40.910
> 
> 标签：c#, database, ms-access

![表格1](../Images/88116f2d6640c2e5f383a4ef3be43fca.png)

我是 Visual C# 的新手，想知道如何计算从数据库中检索到的数据。

使用上面的GUI，当点击“计算”时，程序会在textBox1中显示学生人数，在textBox2中显示所有学生的平均GPA。

这是我的数据库表“学生”：

![在此处输入图像描述](../Images/a4594ffdca50b497c06ea4e2c518e745.png)

我能够显示学生人数，但我仍然对如何计算平均 GPA 感到困惑

这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
            string connection = @"Provider=Microsoft.ACE.OLEDB.12.0;Data  Source=C:\Database1.accdb";
            OleDbConnection connect = new OleDbConnection(connection);

        string sql = "SELECT * FROM Students";
        connect.Open();
        OleDbCommand command = new OleDbCommand(sql, connect);
        DataSet data = new DataSet();
        OleDbDataAdapter adapter = new OleDbDataAdapter(command);
        adapter.Fill(data, "Students");

        textBox1.Text = data.Tables["Students"].Rows.Count.ToString();

        double gpa;
        for (int i = 0; i < data.Tables["Students"].Rows.Count; i++)
        {
            gpa = Convert.ToDouble(data.Tables["Students"].Rows[i][2]);
        }

        connect.Close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:35:56.943

您可以通过以下方法使用LINQ *to DataTable*[`Average`](http://msdn.microsoft.com/en-us/library/bb534965.aspx)：

```
var gpa = data.Tables["Students"].AsEnumerable()
              .Average(row => row.Field<double>("GPA")); 
```

# ruby-on-rails - 没有路线匹配 [GET] "/"

> ID：12880951
> 
> 赞同：1
> 
> 时间：2012-10-14T09:32:52.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我是 Rails 新手，所以听起来可能很幼稚。我遇到了这个错误

```
No route matches [GET] "/" 
```

这是我的路线.rb

```
MyApp::Application.routes.draw do
    match 'welcome/contact' => 'welcome#index'
end 
```

这是我的控制器

```
class WelcomeController < ApplicationController
   def index
      redirect_to :action => :contact
   end
   def contact

   end
end 
```

我的 app/view/welcome/ 中有一个contact.html.erb。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:47:23.540

我不明白你想做什么。但我认为您希望您的视图 Welcome/contact 作为您的索引页面，如果这是正确的，您只需像这样更改您的 routes.rb 文件：

```
root to: 'welcome#contact' 
```

并且您必须从公用文件夹中删除 index.html 文件。

另一方面，您可以[在此处阅读更多铁路路线](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:09:39.377

您需要向**WelcomeController添加****联系**操作

 **```
class WelcomeController < ApplicationController
  def index
     redirect_to :action => :contact
  end

  def contact
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:17:12.897

您要做的是渲染联系页面，而不是重定向到另一个控制器和操作。

只需将联系人视图中的代码放入`app/views/welcome/index.html.erb`文件中，就可以愉快地生活了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T09:41:31.737

您需要为控制器中除 CRUD 操作之外的操作创建路由。这将解决所有操作的问题。

```
match ':controller(/:action)' 
```**

# c++ - 提升线程池

> ID：12880954
> 
> 赞同：3
> 
> 时间：2012-10-14T09:33:29.263
> 
> 标签：c++, multithreading, boost, threadpool, boost-asio

我的应用程序需要一个线程池，并且我想尽可能地依赖标准（C++11 或 boost）的东西。我意识到有一个非官方的（！）boost线程池类，它基本上解决了我需要的东西，但是我宁愿避免它，因为它不在boost库本身 - 为什么它仍然不在核心库中很多年？

在此页面和其他地方的一些帖子中，人们建议使用 boost::asio 来实现类似线程池的行为。乍一看，这看起来像是我想做的，但是我发现我所看到的所有实现都无法加入当前活动的任务，这使得它对我的应用程序毫无用处。为了执行加入，它们向所有线程发送停止信号，然后加入它们。但是，这完全抵消了线程池在我的用例中的优势，因为这使得新任务需要创建新线程。

我想做的是：

```
ThreadPool pool(4);
for (...)
{
    for (int i=0;i<something;i++)
        pool.pushTask(...);
    pool.join();
    // do something with the results
} 
```

任何人都可以提出解决方案（除了使用 sourceforge 上现有的非官方线程池）？C ++ 11或核心提升中有什么可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:49:15.213

> 乍一看，这看起来像是我想做的，但是我发现我所看到的所有实现都无法加入当前活动的任务，这使得它对我的应用程序毫无用处。为了执行加入，它们向所有线程发送停止信号，然后加入它们。但是，这完全抵消了线程池在我的用例中的优势，因为这使得新任务需要创建新线程。

我想你可能误解了 asio 的例子：

IIRC（已经有一段时间了）在线程池中运行的每个线程都已调用`io_service::run`，这意味着每个线程实际上都有一个事件循环和一个调度程序。然后让 asio 完成任务，您可以`io_service`使用 io_service::post 方法将任务发布到 io_service::post 方法，而 asio 的调度机制会负责其余的工作。只要您不调用`io_service::stop`，线程池将继续使用与您开始运行一样多的线程运行（假设每个线程都有工作要做或已分配一个`io_service::work`对象）。

所以你*不需要*为新任务创建新线程，这会违背线程池的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:31:57.687

让每个任务类派生自具有“OnCompletion(task)”方法/事件的任务。然后线程池线程可以在调用任务的主 run() 方法后调用它。

等待一个任务完成就很容易了。OnCompletion() 可以执行任何所需的操作来向发起线程发出信号、向 condvar 发出信号、将任务排队到生产者-消费者队列、调用 SendMessage/PostMessage API、Invoke/BeginInvoke 等等。

如果一个起始线程需要等待多个任务全部完成，您可以扩展上述内容并向池发出单个“等待任务”。等待任务有自己的 OnCompletion 来传达其他任务的完成情况，并有一个线程安全的“任务计数器”（原子操作或锁），设置为要发出的“主要”任务的数量。等待任务首先发布到池中，运行它的线程在等待任务中的私有“allDone”condvar 上等待。然后将“主要”任务发送到池，并将它们的 OnCompletion 设置为调用等待任务的方法，该方法将任务计数器递减到零。当任务计数器达到零时，实现这一点的线程向 allDone condvar 发出信号。等待任务 OnCompletion 然后运行，从而发出所有主要任务完成的信号。

这种机制不需要线程池线程的持续创建/终止/加入/删除，对原始任务需要如何发出信号没有任何限制，并且您可以根据需要发布任意数量的此类任务组。但是，您应该注意，每个等待任务都会阻塞一个线程池线程，因此请确保在池中创建一些额外的线程（通常没有任何问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:22:15.303

这似乎是[boost::futures](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.futures)的工作。文档中的示例似乎准确地展示了您想要做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T09:40:23.793

加入一个线程意味着停止它直到它停止，如果它停止并且你想给它分配一个新任务，你必须创建一个新线程。因此，在您的情况下，您应该等待一个条件（例如`boost::condition_variable`）来指示任务结束。因此，使用这种技术很容易使用`boost::asio`and来实现它`boost::condition_variable`。每个线程调用`boost::asio::io_service::run`和任务将在不同的线程上安排和执行，最后，每个任务将设置一个`boost::condition_variable`或事件减量 a`std::atomic`以指示作业结束！这真的很容易，不是吗？

# php - 检索具有重定向的页面

> ID：12880956
> 
> 赞同：0
> 
> 时间：2012-10-14T09:33:58.313
> 
> 标签：php

好的全部更新了。我使用这个功能：

```
 private function get_follow_url($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $a = curl_exec($ch);

    if(preg_match('Location:(.*)', $a, $r)){
        $url=trim($r[1]);
        $this->get_follow_url($url);
    }
  return $a;
} 
```

当它被回显时我得到了这个：

```
HTTP/1.1 301 Moved Permanently Server: nginx/0.7.67 Date: Sun, 14 Oct 2012 10:03:21 GMT Content-Type: text/html; charset=UTF-8 Connection: keep-alive X-Powered-By: PHP/5.2.17 X-Pingback: http://thesexguy.com/xmlrpc.php Location: http://example.com/mature Content-Length: 0 
```

所以我做了一个递归......并尝试在抓取位置字后再次获取页面......

它应该带我去[http://example.com/mature](http://example.com/mature)进行递归吗？我对吗？但是我没有刮掉位置词..为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:36:02.653

您需要使用[`CURLOPT_FOLLOWLOCATION`](http://php.net/manual/en/function.curl-setopt.php)或设置 cURL 来检索完整的标头 ( `CURLOPT_HEADER`) 并解析`Location`标头。

# javascript - 用 dojo 和 javascript 替换 HTML 内容

> ID：12880962
> 
> 赞同：0
> 
> 时间：2012-10-14T09:35:15.277
> 
> 标签：javascript, jquery, html, dojo

**使用基本 HTML 制作了一个表格并将其存储在一个变量 getcontent 中。**

```
getcontent="<table style="height: 1000px; ; width: 500px;" border="1">
    <tbody>
    <tr>
    <td>[Assignment name]</td>
    <td>[<span>Approximate Value of Contract</span>]</td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>
    </tbody>
    </table>" 
```

**Contentinsquare 是一个包含字符串的数组，可以填充到表中。（方括号）在 getcontent**

contentinsquare=["姓名","100$"]

**我希望将 contentinsqaure 的值放在方括号之间。为此，我使用了代码：-**

```
 var contentinsquare=["name","100$"]
  var  strInputCode = contentinsquare[1].replace(/&(lt|gt);/g, function (strMatch, p1){
                return (p1 == "lt")? "<" : ">";
            });
            var strTagStrippedText = strInputCode.replace(/<\/?[^>]+(>|$)/g, "");

    contentinsquare[1]=strTagStrippedText

var strforlabelname = []
    var strfortextarea = []
    var strfortext = []
    var str = []
    label = dojo.query('label');
    console.log(label, "all label names")
    for( i = 0; i < label.length; i++)
    {
        if(label[i].id != "")
        {
            inner = dojo.byId(label[i].id).innerHTML
            var name = inner.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
            strforlabelname.push(name)
        }
    }
    console.log(strforlabelname, "string")
    text = dojo.query('input')
    for( i = 0; i < text.length; i++)
    {
        if(text[i].id == "")
        {

        }
        else
        {
            innertext = dijit.byId(text[i].id).getValue();

            str.push(innertext)
//console.log(str,"strng1")
        }
    }
    textarea = dojo.query('textarea')
    for( i = 0; i < textarea.length; i++)
    {
        if(textarea[i].id == ""||textarea[i].id =="textareaidfirst")
        {

        }
        else
        {
            innertextarea = dojo.byId(textarea[i].id).value
            str.push(innertextarea)

        }
        }
for( i = 0; i < strforlabelname.length; i++)
        {
    for( j = 0; j < contentinsquare.length; j++)
    {

            if(contentinsquare[j] == strforlabelname[i])
            {
                var patt = new RegExp("\\[" + strforlabelname[i] + "\\]", "g")
                getcontent = getcontent.replace(patt, str[i]);

            }

        }

}

This results to :- 
```

***结果 ：-***

```
"<table style="height: 1000px; ; width: 500px;" border="1">
<tbody>
<tr>
<td>name</td>
<td>[<span>Approximate Value of Contract</span>]</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>" 
```

那就是包含标签的方括号`<span>`不起作用。我希望 100 美元在 thr 上被更换。

# python - 如何以编程方式从 Python 提升到顶级 Visual Studio

> ID：12880963
> 
> 赞同：1
> 
> 时间：2012-10-14T09:35:19.090
> 
> 标签：python, visual-studio, com

您如何以编程方式从 python 提升 VisualStudio 环境？

您可以按如下方式获得 Visual Studio 的句柄：

```
import win32com.client
>>> b = win32com.client.Dispatch('VisualStudio.DTE') 
```

但是需要调用 b 的什么方法来使 VisualStudio 环境集中并提升到顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:45:26.200

首先你可以得到 Visual Studio 的主窗口：

```
w = b.MainWindow 
```

然后你可以得到主窗口的句柄（HWND）：

```
h = w.Hwnd 
```

然后使用 win32gui 模块，您可以将此窗口移到顶部：

```
import win32gui
win32gui.SetForegroundWindow(h) 
```

# c# - Pex 可以自动发现类型上溢/下溢情况吗？

> ID：12880966
> 
> 赞同：6
> 
> 时间：2012-10-14T09:35:52.747
> 
> 标签：c#, .net, unit-testing, pex

假设有这样的方法（C#）：

```
public static int Add(int x, int y)
{
    return x + y;
} 
```

如果总和不适合`int`数据类型，则可能是值得进行单元测试的错误情况。Pex 是否能够识别此类错误并为这些错误生成单元测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T16:40:35.947

是的，它非常擅长。在引入 Pex 时，他们会经常使用在 Java 库的二进制排序例程中发现的错误，当找到新的中点时，它会溢出非常大的数组。一组相关的错误是闰年错误，它们通常会使用微软自己的产品（Azure？）中的一个功能，该功能在野外显示了其中一个。

Pex 捕获许多不同类别的错误，包括溢出、下溢、空引用、无效参数，甚至是您在应用程序中抛出的任何自定义异常。我强烈建议您阅读一些入门指南，然后将 Pex 与代码合同结合起来，从长远来看让您的生活更轻松。

# java - Java在数组索引中找到最后一个成员

> ID：12880971
> 
> 赞同：1
> 
> 时间：2012-10-14T09:36:08.550
> 
> 标签：java, arrays, indexing

所以假设我有一个大小为 10 的数组，索引范围从 0 到 9。我添加了一堆元素并在索引 6 处停止添加。所以使用 array.length，我可以知道数组的大小是 10，但是我如何找到哪个索引包含最后一个值，然后是空的？我是否应该做一个循环并在 index == null 处停止？

我通过创建一个动态数组来模仿数组列表，该数组在大小满时增长。

arg，忘了告诉大家，如果数组是int，那么空的slots就是0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:38:55.820

使用`java.util.ArrayList`. 您无需考虑索引，它是可调整大小的数组实现。

默认情况下，在创建数组时，所有值都是空的，因此如果您不在任何索引处插入任何值（可能在数组的末尾或开头或中间），它只会为空。所以你应该放空检查来验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:54:58.203

由于这是您的分配，因此一个技巧是添加一个变量以跟随添加的元素数量。

因此，您可以拥有一个`public int size = 0`变量并更改您的添加和删除操作，以在添加或删除元素时增加和减少此变量。

然后在您添加方法中，您可以进行简单检查以查看是否需要扩展数组

```
if (size == array.length)
   expandArray 
```

# jquery - 如何从 Heroku 的 Play 框架、Jquery Ajax 捕获和渲染图像

> ID：12880972
> 
> 赞同：1
> 
> 时间：2012-10-14T09:36:14.697
> 
> 标签：jquery, heroku, playframework, image-rendering

正如标题所述，我正在尝试从我的数据库中获取图像以尝试在外部网页上显示。最终，我想将它用于使用 PhoneGap 运行的移动应用程序。

```
renderBinary(member.profileImage.getFile()); 
```

（这是在成员类中）

```
public Blob profileImage; 
```

到目前为止，然后我尝试使用 ajax 接收图像，我得到了这个：（注意，这就像我得到的 100 行中的一半）

�������"������ ��?����������
���������<br> �3�!1AQa"q�2��� B#$R�b34r��C%�S���cs5���&D�TdE£t6�U�e���u��F'�������������� Vfv��������7GWgw���������5�!1AQaq"2����B#�R��3$b�r��CScs4�%���&5 ��D�T�dEU6te����u��F��������������Vfv��������'7GWgw����������? ��^�[�'*��X���;+����#��u#Ѻ�zn���s����L�ʿ�m�Z%%�Z�P�n �W��&�6��}�G�� O�Q�k~1�y$\��Վ��ku���z�X�.�WSs�z��c}�f� ������J��L���'ncO��E��K�z��V%7\����0���c`��/�?����A^� ��v��k�&�^� i�s?ͳژM!+}Ula.~��˩w�g�؊�̻��Q��|���W��

那么无论如何我可以将其转换为Base64吗？或者甚至只是我可以用来放置在 html 文件上的图像标签中的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-20T12:21:24.717

这看起来像一个编码问题。

您是在图像中存储 mimetype，还是提前知道 mime 类型？AJAX 上的 HTTP 响应标头是什么样的？根据我所看到的，您可能只需要包含一个 mime 类型。例如，`content-type: image/JPEG`在您的响应标头中使用 JPEG。

# php - MySQL - 如何跟踪每个查询？

> ID：12880976
> 
> 赞同：0
> 
> 时间：2012-10-14T09:36:37.543
> 
> 标签：php, mysql, logging, doctrine

> **可能重复：**
> [如何启用 MySQL 查询日志？](https://stackoverflow.com/questions/6479107/how-to-enable-mysql-query-log)

有没有办法跟踪 MySQL 中的每个 SQL 查询？

我使用 Doctrine ORM 构建实体并从数据库中获取它们，并想看看 Doctrine 产生了哪些查询。所以当我刷新一个使用 Doctrine ORM 从数据库中获取一些数据的网页时，我在哪里可以看到在数据库中执行的查询？

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:40:18.827

启用 MySQL 的[通用查询日志](http://dev.mysql.com/doc/en/query-log.html)：

> 一般查询日志是[**mysqld**](http://dev.mysql.com/doc/en/mysqld.html)在做什么的一般记录。当客户端连接或断开连接时，服务器将信息写入此日志，并记录从客户端接收到的每个 SQL 语句。当您怀疑客户端出现错误并想确切了解客户端发送到[**mysqld**](http://dev.mysql.com/doc/en/mysqld.html)的内容时，通用查询日志非常有用。

MySQL内部

```
set global general_log = 1;
set global log_output = 'table' /* so we can query it*/

select * from general_log       /* to select */

truncate general_log            /*if you got to much data*/

set global general_log = 0      /*to turn it off again*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:43:49.410

让这个应用程序决定是否要记录查询，如果要记录所有查询，则在 MySQL 端记录查询。

Doctrine 在包中有一个内置的记录器接口和一个演示记录器。来自[http://docs.doctrine-project.org/en/2.0.x/reference/configuration.html#sql-logger-optional](http://docs.doctrine-project.org/en/2.0.x/reference/configuration.html#sql-logger-optional)：

```
<?php
$config->setSQLLogger($logger);
$config->getSQLLogger(); 
```

> 获取或设置记录器，用于记录 Doctrine 执行的所有 SQL 语句。记录器类必须实现 Doctrine\DBAL\Logging\SQLLogger 接口。可以在 Doctrine\DBAL\Logging\EchoSQLLogger 中找到使用 echo 和 var_dump 记录到标准输出的简单默认实现。

# javascript - XMLHttpRequest 错误检查——写这个的更好的方法？

> ID：12880977
> 
> 赞同：0
> 
> 时间：2012-10-14T09:36:42.017
> 
> 标签：javascript, xmlhttprequest, try-catch

我编写了一个从桌面运行的网页，以从公共网站上获取信息。我正在尝试到达 1）如果没有互联网连接，则会发出警报 2）如果有互联网连接但不知何故未正确检索信息，则会提醒用户。

如果没有 Internet 连接，try and catch 可用于测试。

我正在使用 xml.status 代码进行第二次测试...如果网站处于活动状态，但提取的信息被弄乱了....该测试条件没有按我想要的方式工作。我试着给 xml.open 一个虚假的网站，并期待一个非 200-300 的状态代码。但它不起作用......而是激活了catch语句。为什么是这样？有没有更好的方法来写这个？

另外，在旁注中，我已经返回“”；因为我使用它的调用变量不能为空或未定义：variable = getInfo(); n.setAttribute("占位符", 变量);

```
function getInfo() {
        var xml = null;
        xml = new XMLHttpRequest(); 
        try {
            xml.open("get", "http://example.asp", false);
            xml.send(null);
            if ((xml.status >= 200 && xml.status <= 300) || xml.status == 304) {
                var hi = xml.responseText;
                hi = hi.replace(/(\r\n|\n|\r)/gm, "");
                var what1 = /winning_number_sm.*?ul/
                    var what2 = /\d+/g

                    hi = what1.exec(hi);
                var temp;
                for (i = 0; i < 6; i++) {
                    if (null !== (temp = what2.exec(hi))) {
                        numbers[i] = temp;
                    }
                }
                return numbers;
            } else {
                alert("Error Connecting to Website! You will have to eneter informatin by hand");
                return "";
            }
        } catch (e) {
            alert("No Internet Connection! You will have to enter information by hand");
            return "";
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:47:14.043

我不知道您是否可以使用 jQuery 框架，但是要从 ajax 连接中获取错误（测试网站是否启动），您可以轻松地做到这一点：

```
//your ajax object
var request = $.ajax({
  url: "http://www.exemple.com/script.php",
  type: "POST",
  data: {/*your datas*/},
  dataType: "html"
});

request.done(function(msg) {
  //make your stuff automatically
});

request.fail(function(jqXHR, textStatus) {
  alert( "Error Connecting to Website! You will have to enter informatin by hand");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:08:07.427

另一种方法是调用本地 php 脚本，其测试远程 url 与 curl 函数（例如：[http](http://www.php.net/manual/en/function.curl-error.php) ://www.php.net/manual/en/function.curl-error.php ）

# 3d - 需要 .js 和 HTML 示例以在网页中显示 .STL 3D 对象

> ID：12880980
> 
> 赞同：9
> 
> 时间：2012-10-14T09:36:53.667
> 
> 标签：3d, webgl, three.js

[任何人都可以为使用STLLoader.js](https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/STLLoader.js)在网页中显示 ASCII（不是二进制）.stl 对象文件生成一个干净的“傻瓜”示例吗？结果应该让用户在当前的 HTML5 浏览器中操作对象，并且除了灰度对象表面和背景之外没有花哨的视觉效果。

STLLoader.js 可能需要three.js 或three.min.js 的帮助，但我不知道。STLLoader.js 包含以下使用示例，但不包含 HTML 包装器。

**[STLLoader.js 中的](https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/STLLoader.js)**使用示例****

 **```
 /** 
     * Usage:
     *  var loader = new THREE.STLLoader();
     *  loader.addEventListener( 'load', function ( event ) {
     *
     *      var geometry = event.content;
     *      scene.add( new THREE.Mesh( geometry ) );
     *
     *  } );
     *  loader.load( './models/stl/slotted_disk.stl' );
     */ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T21:07:47.950

three.js 示例是一个很好的来源：

[https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_stl.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_stl.html)

这是一个简化版本：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - STL</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #000000;
                margin: 0px;
                overflow: hidden;
            }

            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;

            }

            a { color: skyblue }
        </style>
    </head>
    <body>
        <div id="info">
            STL loader test
        </div>

        <script src="http://threejs.org/build/three.min.js"></script>

        <script src="http://threejs.org/examples/js/loaders/STLLoader.js"></script>

        <script>

            var container, camera, scene, renderer;

            init();
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                // renderer

                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );

                // scene

                scene = new THREE.Scene();

                // camera

                camera = new THREE.PerspectiveCamera( 35, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.set( 3, 0.5, 3 );
                scene.add( camera ); // required, because we are adding a light as a child of the camera

                // lights

                scene.add( new THREE.AmbientLight( 0x222222 ) );

                var light = new THREE.PointLight( 0xffffff, 0.8 );
                camera.add( light );

                // object

                var loader = new THREE.STLLoader();
                loader.load( 'slotted_disk.stl', function ( geometry ) {

                    var material = new THREE.MeshPhongMaterial( { color: 0xff5533 } );

                    var mesh = new THREE.Mesh( geometry, material );

                    scene.add( mesh );

                } );

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;

                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function animate() {

                requestAnimationFrame( animate );

                render();

            }

            function render() {

                var timer = Date.now() * 0.0005;

                camera.position.x = Math.cos( timer ) * 5;
                camera.position.z = Math.sin( timer ) * 5;

                camera.lookAt( scene.position );

                renderer.render( scene, camera );

            }

        </script>
    </body>
</html> 
```

三.js r.70**

# javascript - jquery从url中查找并替换最后一个参数

> ID：12880986
> 
> 赞同：2
> 
> 时间：2012-10-14T09:38:16.480
> 
> 标签：javascript, jquery

嗨，首先我已经环顾四周，但没有什么与我想要发生的事情相匹配，所以我问是否有人可以帮助我解决这个问题。

我有一个 URL “/view/album/4/photo/1”，我想删除最后一个参数并用一些东西替换它。我想要做的是找到最后一个“/”并删除它后面的数字并用新值替换它。

使用 php 很容易，但我不知道如何在 jquery 中做到这一点，因为我刚开始学习它。所以我真的很感谢任何可以提供帮助的人。:)

顺便说一句，这是我获取网址的代码：

action = $(form).attr('action'); // "/view/album/4/photo/1"

我不知道如何处理变量来更改最后一个参数的值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:44:26.943

```
var paths = location.pathname.split('/');
paths[ paths.length-1 ] = 'foo'; // new value
location.pathname = paths.join('/'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T09:48:54.900

试试这个`:)` [http://jsfiddle.net/hE6MC/](http://jsfiddle.net/hE6MC/)

**或** [http://jsfiddle.net/YwG6b/](http://jsfiddle.net/YwG6b/)

API：[http ://www.w3schools.com/jsref/jsref_lastindexof.asp](http://www.w3schools.com/jsref/jsref_lastindexof.asp)

顺便说一句，我知道`:)` [http://w3fools.com](http://w3fools.com)

**代码**

```
url = "/view/album/4/photo/1"
var value = url.substring(url.lastIndexOf('/') + 1);

alert(value);

url = url.replace(value, 'hulk')
alert("new url => " + url);​ 
```

**其他方式**

```
var str = '/view/album/4/photo/1';
var i = str.lastIndexOf('/');
if (i != -1) {
    str = str.substr(0, i) + "/new stuff";
}

alert(str);
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T09:47:57.287

简单易行：正则表达式。

```
action = (action.match(/(.*)\d+$/) == null) ? action : (action.match(/(.*)\d+$/)[1]+"2"); 
```

给

```
/view/album/4/photo/2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T09:49:39.830

如果您只想替换最后一个字符，您可以使用`slice`方法。

```
$('form').attr('action', function(i, a){
    a.slice(0, -1) + 'number'
}) 
```

# haskell - 如何使用 foldr/foldl 定义 foldM（如果可能）？

> ID：12880989
> 
> 赞同：4
> 
> 时间：2012-10-14T09:38:51.373
> 
> 标签：haskell, functional-programming, monads, fold

我想制作一个通用函数，可以折叠各种输入（请参阅[使单个函数适用于列表、字节字符串和文本（可能还有其他类似的表示形式）](https://stackoverflow.com/questions/12857615/making-a-single-function-work-on-lists-bytestrings-and-texts-and-perhaps-other)）。正如[一个答案所建议](https://stackoverflow.com/a/12857865/1333025)的那样，[ListLike](http://hackage.haskell.org/package/ListLike-3.1.6)就是为了这个。它的[FoldableLL](http://hackage.haskell.org/packages/archive/ListLike/3.1.6/doc/html/Data-ListLike-FoldableLL.html)类为任何可折叠的东西定义了一个抽象。但是，我需要一个单子折叠。所以我需要`foldM`用`foldl`/来定义`foldr`。

到目前为止，我的尝试失败了。我试图定义

```
foldM'' :: (Monad m, LL.FoldableLL full a) => (b -> a -> m b) -> b -> full -> m b
foldM'' f z = LL.foldl (\acc x -> acc >>= (`f` x)) (return z) 
```

但它在大量输入时内存不足 - 它构建了一个大型未评估的计算树。例如，如果我将一个大文本文件传递给

```
main :: IO ()
main = getContents >>= foldM'' idx 0 >> return ()
  where
    -- print the current index if 'a' is found
    idx !i 'a' = print i >> return (i + 1)
    idx !i _   =            return (i + 1) 
```

它会耗尽所有内存并失败。

我有一种感觉，问题在于一元计算是以错误的顺序组成的——就像`((... >>= ...) >>= ...)`不是，`(... >>= (... >>= ...))`但到目前为止我还没有找到解决方法。

* * *

**解决方法：**由于`ListLike`暴露`mapM_`，我通过将累加器包装到状态单子中来构建 s `foldM`：`ListLike`

```
modifyT :: (Monad m) => (s -> m s) -> StateT s m ()
modifyT f = get >>= \x -> lift (f x) >>= put

foldLLM :: (LL.ListLike full a, Monad m) => (b -> a -> m b) -> b -> full -> m b
foldLLM f z c = execStateT (LL.mapM_ (\x -> modifyT (\b -> f b x)) c) z 
```

虽然这适用于大型数据集，但它不是很好。它并没有回答最初的问题，如果可以在只是`FoldableLL`（没有`mapM_`）的数据上定义它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T10:04:53.480

所以目标是`foldM`使用`foldr`or重新实现`foldl`。应该是哪一个？我们希望延迟处理输入并允许无限列表，这排除了`foldl`. 会不会是这样`foldr`。

所以这里是`foldM`来自标准库的定义。

```
foldM             :: (Monad m) => (a -> b -> m a) -> a -> [b] -> m a
foldM _ a []      =  return a
foldM f a (x:xs)  =  f a x >>= \fax -> foldM f fax xs 
```

要记住的`foldr`是，它的论点只是替换了列表中的`[]`和（对此进行了抽象，但它仍然作为指导原则）。`:``ListLike`

那么应该`[]`换成什么呢？显然与`return a`。但是`a`从哪里来？它不会`a`是传递给的初始值`foldM`——如果列表不为空，当`foldr`到达列表末尾时，累加器应该已经改变。所以我们用`[]`一个函数替换，该函数接受一个累加器并在底层 monad 中返回它：（`\a -> return a`或简单地`return`）。`foldr`这也给出了将计算的事物的类型： `a -> m a`。

我们应该用什么来代替`:`？它需要是一个函数`b -> (a -> m a) -> (a -> m a)`，获取列表的第一个元素、处理后的尾部（当然是懒惰的）和当前的累加器。我们可以从上面的代码中得到提示：它将是`\x rest a -> f a x >>= rest`. 所以我们的实现`foldM`将是（在上面的代码中调整类型变量以匹配它们）：

```
foldM'' :: (Monad m) => (a -> b -> m a) -> a -> [b] -> m a
foldM'' f z list = foldr (\x rest a -> f a x >>= rest) return list z 
```

事实上，现在你的程序可以消耗任意大的输入，并在你执行时吐出结果。

我们甚至可以归纳地证明定义在语义上是相等的（尽管我们可能应该进行共归纳或取归纳来满足无限列表的需要）。

我们想展示

```
foldM f a xs = foldM'' f a xs 
```

对于所有人`xs :: [b]`。因为`xs = []`我们有

```
 foldM f a []
≡ return a     -- definition of foldM
≡ foldr (\x rest a -> f a x >>= rest) return [] a -- definition of foldr
≡ foldM'' f a [] -- definition of foldM'' 
```

并且，假设我们有它`xs`，我们展示它`x:xs`：

```
 foldM f a (x:xs)
≡ f a x >>= \fax -> foldM f fax xs --definition of foldM
≡ f a x >>= \fax -> foldM'' f fax xs -- induction hypothesis
≡ f a x >>= \fax -> foldr (\x rest a -> f a x >>= rest) return xs fax -- definition of foldM''
≡ f a x >>= foldr (\x rest a -> f a x >>= rest) return xs -- eta expansion
≡ foldr (\x rest a -> f a x >>= rest) return (x:xs) -- definition of foldr
≡ foldM'' f a (x:xs) -- definition of foldM'' 
```

当然，这种等式推理并*没有*告诉您有关您感兴趣的性能属性的任何信息。

# c++ - 在自定义类型上使用 push_back 时出现“无匹配函数”调用错误

> ID：12880992
> 
> 赞同：2
> 
> 时间：2012-10-14T09:39:18.173
> 
> 标签：c++, push-back

尝试推回自定义类型的对象时出现此错误。代码如下：

```
class Item_base    
{
    public:     
    Item_base(string isbn=" ", int num=0):book(isbn),number(num){}    
    Item_base(Item_base &I):book(I.book),number(I.number){cout<<"\nCopy Constructor"<<endl;}    
    Item_base &operator=(Item_base &d){if (this != &d){this->book=d.book;this->number=d.number;cout<<"\nAssignment Operator"<<endl;return *this;}else{cout<<"\nAssignment Operator"<<endl;return *this;}}    
    ~Item_base(){cout<<"Item_base Destructor"<<endl;}   
    protected:    
    string book;     
    int number;    
};

#include <iostream>   
using namespace std;
#include <vector>
#include "Item_base.h"
int main (int argc, char * const argv[]) {    
    // insert code here...    
    vector<Item_base> vecbase;     
    Item_base derivo("Harry Potter",10);     
    cout<<"enter book name, qty, dqty"<<endl;     
    vecbase.push_back(derivo);     
    return 0;   
} 
```

我得到的错误信息是：

> 错误：没有用于调用 'Item_base::Item_base(const Item_base&)' 的匹配函数

有人可以帮我弄这个吗？我是编程新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:42:05.353

Vector只有两种push_back函数的实现

*   `push_back(const T&)`
*   `push_back(T&&)` **(C++11 起)**

这解释了为什么我们需要`const T&`为我们的类提供带有参数的复制构造函数

# postgresql - 如何在 PostgreSQL 中回滚更新

> ID：12880994
> 
> 赞同：20
> 
> 时间：2012-10-14T09:39:46.977
> 
> 标签：postgresql, rollback

在终端（在 ubuntu lucid 中）使用 sql 编辑我的 PostgreSQL 数据库中的一些记录时，我进行了错误的更新。

代替 -

```
update mytable set start_time='13:06:00' where id=123; 
```

我打了——

```
update mytable set start_time='13:06:00'; 
```

因此，所有记录现在都具有相同的 start_time 值。

有没有办法撤销这个改变？表中有大约 500 多条记录，我不知道每条记录的 start_time 值是多少

是不是永远失去了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T09:45:54.340

我假设这是一个已经提交的交易？如果是这样，那就是“提交”的意思，你不能回去。

如果幸运的话，一些数据可能是可以恢复的。立即停止数据库。

[这是我之前就同一主题写的答案](https://stackoverflow.com/questions/12472318/can-i-rollback-a-transaction-ive-already-committed-data-loss/12472582#12472582)。我希望它会有所帮助。

这也可能是：[在 postgresql 中恢复已删除的行](https://stackoverflow.com/questions/6151632/recoved-deleted-rows-in-postgresql)。

除非数据绝对重要，否则只需从备份中恢复，这会容易得多，痛苦也少。如果您没有备份，请认为自己非常糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-17T07:30:42.687

如果您发现错误并立即关闭任何使用数据库的应用程序并使其脱机，您可以使用时间点恢复 (PITR) 重播预写日志 (WAL) 文件，直至但不包括进行错误交易的时刻。这会将数据库返回到之前的状态，从而有效地“撤消”该事务。

作为生产应用程序数据库的一种方法，它有许多明显的局限性，但在某些情况下，PITR 可能是最佳选择，尤其是在发生关键数据丢失时。但是，如果在损坏事件之前尚未配置归档，则它没有任何价值。

[https://www.postgresql.org/docs/current/static/continuous-archiving.html](https://www.postgresql.org/docs/current/static/continuous-archiving.html)

其他关系数据库引擎也存在类似的功能。

# android - SQLite 或序列化

> ID：12880995
> 
> 赞同：9
> 
> 时间：2012-10-14T09:39:58.927
> 
> 标签：android

我正在编写一个需要存储数据的应用程序。一个数据包大约有 4 个类，它们之间有许多依赖关系。例如，类 A 有一个对象 B 的列表，B 有一个对象 C 的列表以及更多的依赖项......

我想知道什么会更好。将它们保存在 SQLite db 中或单独序列化每个包并将它们存储在序列化文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:44:27.677

对我来说，唯一正确的解决方案是将数据保存在数据库中，尤其是在存在任何依赖关系的情况下。对于初学者来说，一开始可能很难进入数据库创建。但是在您以正确的形式创建数据库之后，您只需插入数据，将来如果您想更改某些内容或扩展您的应用程序，您将不会遇到任何问题。通过简单的序列化，逻辑必须在应用程序内部解决，并且可能会导致更多问题，特别是如果您有任何依赖项。

如果您需要保存数据的好教程，您应该查看本教程 [http://thenewboston.org/watch.php?cat=6&number=111](http://thenewboston.org/watch.php?cat=6&number=111)

对于保存数据的其他不同解决方案，网站上也有一些教程，Nr。108 - 110 Android 编程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:44:06.440

IT 取决于数据的使用。您可能会很好地选择 JSON/GSON 序列化并避免在 SQLite 上执行 ORM 的开销。（开销意味着额外的编码编组到/从数据库）但是，如果您的数据受到增长或数据库可以更好地管理的东西（跨更大数据集的大量非顺序或随机访问）然后去对于 SQLite 和 ORM。最后，它归结为您要管理的数据类型。同样，如果您的数据集可能会增长并且涉及大量随机访问，那么使用 SQLite 可能是值得的。

# css - 如何获取 Bootstrap 的贴附导航列表样式？

> ID：12880999
> 
> 赞同：9
> 
> 时间：2012-10-14T09:40:33.013
> 
> 标签：css, twitter-bootstrap, nav

我一直在玩 Bootstrap 一段时间。虽然我总是能够让一切正常工作。我一直在为即将到来的项目考虑它，该项目需要一个附加的侧面导航，就像[Twitter Bootstrap 文档中的那个一样。](http://twitter.github.com/bootstrap/components.html)

我什至尝试将这些类包含到我的元素中。

```
<ul class="nav nav-list affix-top"> 
```

这里的任何引导专家都可以帮助我弄清楚我需要添加什么才能使这些启动和工作。此外，我一直无法让 V 形完全像那里那样显示，我的 V 形总是与文本混在一起。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T09:48:49.907

你记得在 JS 中打开它吗？

他们使用：

```
$('#navbar').affix() 
```

，但您需要将选择器更改为您需要的任何内容。

啊，现在你已经改写了你想要的！

他们有另一门课叫做`.bs-docs-sidenav`

```
.bs-docs-sidenav {
    width: 228px;
    margin: 30px 0 0;
    padding: 0;
    background-color: #fff;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
    -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.065);
    -moz-box-shadow: 0 1px 4px rgba(0,0,0,.065);
    box-shadow: 0 1px 4px rgba(0,0,0,.065);
} 
```

然后他们添加一个名为`active`li 的类，然后在此处指定其行为：

```
.bs-docs-sidenav > .active > a {
    position: relative;
    z-index: 2;
    padding: 9px 15px;
    border: 0;
    text-shadow: 0 1px 0 rgba(0,0,0,.15);
    -webkit-box-shadow: inset 1px 0 0 rgba(0,0,0,.1), inset -1px 0 0 rgba(0,0,0,.1);
    -moz-box-shadow: inset 1px 0 0 rgba(0,0,0,.1), inset -1px 0 0 rgba(0,0,0,.1);
    box-shadow: inset 1px 0 0 rgba(0,0,0,.1), inset -1px 0 0 rgba(0,0,0,.1);
} 
```

简而言之，这不是引导程序的内置功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:49:12.160

我遇到了同样的问题，直到在引导文档页面上找到这个包含后才能让我的工作。

[http://twitter.github.com/bootstrap/assets/js/application.js](http://twitter.github.com/bootstrap/assets/js/application.js)

```
!function ($) {

  $(function(){

    var $window = $(window)

    // Disable certain links in docs
    $('section [href^=#]').click(function (e) {
      e.preventDefault()
    })

    // side bar
    $('.bs-docs-sidenav').affix({
      offset: {
        top: function () { return $window.width() <= 980 ? 290 : 210 }
      , bottom: 270
      }
    })          
  })
}(window.jQuery) 
```

因此，在复制和粘贴引导 afix 导航时添加代码住所应该可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T03:58:03.423

要获得与 github.io 页面上相同的效果，您需要他们添加的完整 css

```
<style type="text/css">

.bs-docs-sidenav > li > a {
    border: 1px solid #E5E5E5;
    /*display: block;*/
    /*margin: 0 0 -1px;*/
    padding: 8px 14px;
}

.bs-docs-sidenav > li > a {
    border: 1px solid #E5E5E5;
    /*display: block;*/
    /*margin: 0 0 -1px;*/
    padding: 8px 14px;
}

.bs-docs-sidenav > li:first-child > a {
    border-radius: 6px 6px 0 0;
}

.bs-docs-sidenav > li:last-child > a {
    border-radius: 0 0 6px 6px;
}

.bs-docs-sidenav > .active > a {
    border: 0 none;
    box-shadow: 1px 0 0 rgba(0, 0, 0, 0.1) inset, -1px 0 0 rgba(0, 0, 0, 0.1) inset;
    padding: 9px 15px;
    position: relative;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.15);
    z-index: 2;
}

.bs-docs-sidenav .icon-chevron-right {
    float: right;
    margin-right: -6px;
    margin-top: 2px;
    opacity: 0.25;
}

.bs-docs-sidenav > li > a:hover {
    background-color: #F5F5F5;
}

.bs-docs-sidenav a:hover .icon-chevron-right {
    opacity: 0.5;
}

.bs-docs-sidenav .active .icon-chevron-right, .bs-docs-sidenav .active a:hover .icon-chevron-right {
    /*background-image: url("../img/glyphicons-halflings-white.png");*/
    opacity: 1;
}

.bbs-docs-sidenav.affix {
    top: 40px;
}

.bbs-docs-sidenav.affix-bottom {
    bottom: 270px;
    position: absolute;
    top: auto;
}

</style> 
```

将其包含在您的模板或 html 中，并遵循引导程序侧导航格式：

```
<div class="row">
      <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#overview"><i class="icon-chevron-right"></i> Overview</a></li>
          <li><a href="#transitions"><i class="icon-chevron-right"></i> Transitions</a></li>
          ....
        </ul>
      </div>
      <div class="span9">

      ....

      </div>
</div> 
```