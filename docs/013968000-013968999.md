# StackOverflow 问答 13968000-13968999

# parameters - 如何从命令行向 JBoss 提供 VM 参数？

> ID：13968002
> 
> 赞同：0
> 
> 时间：2012-12-20T08:29:12.310
> 
> 标签：parameters, jboss, jvm

我正在配置 JaCoCo 代码覆盖工具以使用 JBoss。这包括将 JaCoCo 代理作为 VM 参数添加到 JBoss。我通过直接在 JBoss run.config 脚本中将参数添加到 JAVA_OPTS 来让它工作，但是因为这需要非常动态，我需要在命令行中提供 VM 参数（由 Jenkins 执行）。我该怎么做呢？我知道系统属性可以在键前使用“D”给出。

另外，是否可以将代理添加到 run.config 文件，然后将自定义属性传递给它？所以我会将它添加到 run.config 文件中：

```
JAVA_OPTS="$JAVA_OPTS -javaagent:/home/installations/jacoco/jacocoagent.jar=destfile=$path/jacoco.exec" 
```

然后我会像这样启动 JBoss：

```
./run.sh -Dpath=/home/workspace/jacoco 
```

这样的事情有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:53:07.407

由于run.sh本身是一个shell脚本文件，也就是说它接受你传入的参数。或者，你可以编写另一个shell脚本来包装run.sh，然后你可以在这个外部脚本文件中处理你想要的参数，不需要污染原始的 run.sh，它提供了更多的可移植性。

# database - CakePHP 2.1 按自定义顺序显示记录

> ID：13968003
> 
> 赞同：2
> 
> 时间：2012-12-20T08:29:20.610
> 
> 标签：database, customization, cakephp-2.1

我创建了两个表'college'和'users'，结构如下。

```
college('id', 'name').
users('id', 'name', 'dob'). 
```

添加大学时，我必须在选择框中选择用户。所以我必须在添加（1、2、3等）的同时为用户名提供自定义顺序，这样在显示大学时我可以很容易地按顺序显示它。即使我认为为每个用户创建另一个自定义订单表。但在我看来，这对每所大学来说都是非常漫长的过程。

如果我的逻辑很好，那么建议我怎么做？如果您有任何其他解决方案，请建议我。工作会更有价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:35:20.907

我认为您正在寻找的是以下内容：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)

据我了解，您正在寻找将用户与大学联系起来的方法。使用 HABTM 表，您可以灵活地将用户分配到大学，而不会直接弄乱任何大学/用户数据。您只是将两条记录链接在一起。更不用说，您可以将多个用户链接到多个大学，反之亦然。

要创建一个 HABTM 表，它将如下所示：

```
CREATE TABLE colleges_users (
  id char(36) NOT NULL PRIMARY KEY, 
  college_id char(36) NOT NULL, 
  user_id char(36) NOT NULL
); 
```

然后只需在两个模型中添加关系。

# json - 如何使用 Json.NET 在 PowerShell 中解析 json？

> ID：13968004
> 
> 赞同：8
> 
> 时间：2012-12-20T08:29:26.877
> 
> 标签：json, powershell, json.net

我想在 PowerShell 中解析 JSON，但我不能使用 PowerShell 中可用的新 v3 函数。我的第一个想法是加载 JSON.Net 程序集并使用它来解析 JSON 字符串，但它并没有像我预期的那样工作。

我有这个 JSON：

```
$json = "{""Name"": ""Apple"",  
           ""Price"": 3.99,  
            ""Sizes"": [    
                 ""Small"",    
                 ""Medium"",
                 ""Large""]}" 
```

我使用以下代码加载 JSON.NET 程序集：

```
[Reflection.Assembly]::LoadFile("$currentPath\Newtonsoft.Json.dll”) 
```

并尝试用

```
$result = [Newtonsoft.Json.JsonConvert]::DeserializeObject($json) 
```

现在我希望`$result["Name"]`是这样，`Apple`但我什么也没得到。有任何想法吗？

代码 ´$result.ContainsKey("Name") `returns`True `but`$result.GetValue("Name") `returns`null`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T12:13:38.910

好的，这就是我的做法，因此它至少可以在 Windows 2008 上运行到 PowerShell v2。

首先，为您想要使用的版本加载 Json.NET 程序集，我选择了 .NET 3.5 版本：

```
[Reflection.Assembly]::LoadFile("Newtonsoft.Json.dll") 
```

我将 JSON 放在一个文件中，因为它用于我编写的部署配置中，所以我需要读取该文件，然后解析 json

```
$json = (Get-Content $FileName | Out-String) # read file
$config = [Newtonsoft.Json.Linq.JObject]::Parse($json) # parse string 
```

现在要从配置中获取值，您需要使用`Item`似乎由 PowerShell 在哈希表/字典上定义的方法。因此，要获得一个简单字符串的项目，您可以编写：

```
Write-Host $config.Item("SomeStringKeyInJson").ToString() 
```

如果你有很多事情，你需要做类似的事情

```
$config.Item("SomeKeyToAnArray") | ForEach-Object { Write-Host $_.Item("SomeKeyInArrayItem").ToString() } 
```

访问您编写的嵌套项目

```
$config.Item("SomeItem").Item("NestedItem") 
```

这就是我在 PowerShell 中使用 Json.NET 解析 JSON 的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-13T00:10:39.900

如果你到了这里并且使用的是 Powershell 5.0，它可以在[powershell 库中找到](https://www.powershellgallery.com/packages/newtonsoft.json/1.0.2.201)

```
Install-Module Newtonsoft.Json
Import-Module Newtonsoft.Json

$json = '{"test":1}'
[Newtonsoft.Json.Linq.JObject]::Parse($json) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T08:39:35.263

也许这就是你所追求的：

[http://poshcode.org/2930](http://poshcode.org/2930)

```
 function Convert-JsonToXml {
PARAM([Parameter(ValueFromPipeline=$true)][string[]]$json)
BEGIN { 
   $mStream = New-Object System.IO.MemoryStream 
}
PROCESS {
   $json | Write-Stream -Stream $mStream
}
END {
   $mStream.Position = 0
   try
   {
      $jsonReader = [System.Runtime.Serialization.Json.JsonReaderWriterFactory]::CreateJsonReader($mStream,[System.Xml.XmlDictionaryReaderQuotas]::Max)
      $xml = New-Object Xml.XmlDocument
      $xml.Load($jsonReader)
      $xml
   }
   finally
   {
      $jsonReader.Close()
      $mStream.Dispose()
   }
}
}

function Write-Stream {
PARAM(
   [Parameter(Position=0)]$stream,
   [Parameter(ValueFromPipeline=$true)]$string
)
PROCESS {
  $bytes = $utf8.GetBytes($string)
  $stream.Write( $bytes, 0, $bytes.Length )
}  
}

$json = '{
    "Name": "Apple",
    "Expiry": 1230422400000,
    "Price": 3.99,
    "Sizes": [
        "Small",
        "Medium",
        "Large"
    ]
}'

Add-Type -AssemblyName System.ServiceModel.Web, System.Runtime.Serialization
$utf8 = [System.Text.Encoding]::UTF8                 
(convert-jsonToXml $json).innerXML 
```

输出 ：

```
<root type="object"><Name type="string">Apple</Name><Expiry type="number">1230422
400000</Expiry><Price type="number">3.99</Price><Sizes type="array"><item type="s
tring">Small</item><item type="string">Medium</item><item type="string">Large</it
em></Sizes></root> 
```

如果你想要名称节点：

```
$j=(convert-jsonToXml $json)
$j.SelectNodes("/root/Name") 
```

或者

```
$j |Select-Xml -XPath "/root/Name" |select -ExpandProperty node 
```

# java - 如何在 jackrabbit 中获取旧版本节点的属性？

> ID：13968014
> 
> 赞同：8
> 
> 时间：2012-12-20T08:30:31.043
> 
> 标签：java, jackrabbit, jcr, jcr-sql2

我已经创建了节点并创建了 3 个版本。

```
String path = "/my111";
MyClass m1  = new  MyClass();
m1.setPath(path);
m1.setName("Myname");
m1.setLanguage("English");      
ocm.create(m1);
ocm.save();     

for (int i = 0; i < 4; i++) {
 ocm.checkout(path);
 m1.setName("mz676666" + i);
 ocm.update(m1);
 ocm.save();
 ocm.checkin(path);         
  } 

 VersionIterator iterator = ocm.getAllVersions(path);
 while (iterator.hasNext()) {
      Version version = (Version)iterator.next();
       System.out.println("version::"+version.getName());           
}

Output :

version::jcr:rootVersion
version::1.0
version::1.1
version::1.2
version::1.3 
```

现在我想得到`name`一个版本`1.2`..

我试过了

```
org.apache.jackrabbit.ocm.version.VersionIterator iterator = ocm.getAllVersions(path);
    while (iterator.hasNext()) {
        Version version = (Version)iterator.next();
        System.out.println("version::"+version.getName());

    MyClass m1 = (MyClass) ocm.getObject(path, version.getName());
    System.out.println(m1.getName());  // But it always print `null`. Why??
} 
```

可以触发查询并获取数据吗？

我怎样才能做到这一点？

请回答这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T11:52:45.590

我已经很久没有和 Jackrabbit 合作了，所以我可能错了。

但据我记得，以前版本节点的内容存储为*冻结节点*存储在*版本节点*下。

因此，我认为您可以尝试使用以下方法检索它：

```
VersionIterator iterator = ocm.getAllVersions(path);

while (iterator.hasNext()) {
    Version version = (Version)iterator.next();

    //Here you go:
    MarketingZone m1 = (MarketingZone) version.getFrozenNode();

    System.out.println(m1.getName());

} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:52:17.103

卢卡是对的。每个版本都有一个冻结节点，它代表您在签入时的节点。您可以像调用基本节点一样在其上调用方法。

```
Version version = ...
Node node = version.getFrozenNode();
String name = node.getName();

// get a property, eg. someStringProperty
String someStringProperty = node.getProperty("someStringProperty").getString(); 
```

# java - 模拟打印机

> ID：13968018
> 
> 赞同：7
> 
> 时间：2012-12-20T08:30:42.737
> 
> 标签：java, web-applications, printing

我们必须用 Java 构建一些软件，最后打印一些文档。不同的文档应进入打印机的不同托盘。因为在开发过程中，我们没有与客户相同的打印机，所以我们正在寻找一个模拟打印机的小软件。我们应该能够配置该模拟，例如有多少托盘可用。

有谁知道mac或windows这样的工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:43:23.450

编写一个抽象层，为客户的“真实”打印机实现一次，为“虚拟”打印机实现一次。为客户版本编写集成测试，在客户的环境中运行这些测试。针对抽象层的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T08:43:32.373

您可以在 Windows 上自己创建一个虚拟打印机，无需任何特殊软件。

在 Windows 7 中：

1.  控制面板
2.  设备和打印机
3.  [右键] 添加打印机
4.  添加本地打印机
5.  使用现有端口（假设它已经存在，如果不存在则创建一个新端口）
6.  File：（打印到文件），NUL：（无处打印）或 CON：（打印到控制台）
7.  从打印机列表中选择您要模拟的打印机。

如果您将其设置为默认打印机，它应该很容易从 java 代码中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T16:48:54.800

您可以安装 PDF 打印，它可以用作 Java 应用程序的虚拟打印机。基本上，您要做的是安装一个免费提供的 PDF 打印机，让您的 java 应用程序发现该打印服务并将任何文档打印到该服务。我记得，当我没有打印机时，我也遇到过同样的情况，我使用下面给出的代码将我的应用程序与虚拟打印机连接起来。

```
public class HelloWorldPrinter implements Printable, ActionListener {

public int print(Graphics g, PageFormat pf, int page) throws
                                                    PrinterException {

    if (page > 0) { /* We have only one page, and 'page' is zero-based */
        return NO_SUCH_PAGE;
    }

    /* User (0,0) is typically outside the imageable area, so we must
     * translate by the X and Y values in the PageFormat to avoid clipping
     */
    Graphics2D g2d = (Graphics2D)g;
    g2d.translate(pf.getImageableX(), pf.getImageableY());

    /* Now we perform our rendering */
    g.drawString("Hello world!", 100, 100);

    /* tell the caller that this page is part of the printed document */
    return PAGE_EXISTS;
}

public void actionPerformed(ActionEvent e) {
     PrinterJob job = PrinterJob.getPrinterJob();
     job.setPrintable(this);

     PrintService[] printServices = PrinterJob.lookupPrintServices(); 
    try {
        job.setPrintService(printServices[0]);
        job.print();
    } catch (PrinterException ex) {
        Logger.getLogger(HelloWorldPrinter.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public static void main(String args[]) {

    UIManager.put("swing.boldMetal", Boolean.FALSE);
    JFrame f = new JFrame("Hello World Printer");
    f.addWindowListener(new WindowAdapter() {
       public void windowClosing(WindowEvent e) {System.exit(0);}
    });
    JButton printButton = new JButton("Print Hello World");
    printButton.addActionListener(new HelloWorldPrinter());
    f.add("Center", printButton);
    f.pack();
    f.setVisible(true);
}
} 
```

# java - java中的对象如何计算哈希码？

> ID：13968023
> 
> 赞同：-2
> 
> 时间：2012-12-20T08:30:52.893
> 
> 标签：java, object, jvm, hashcode, java-6

> **可能重复：**
> [如何在 Java 中计算 hashCode()](https://stackoverflow.com/questions/2427631/how-is-hashcode-calculated-in-java)

我知道在java中生成的每个对象都有哈希码，并且可以有两个不同的对象具有相同的哈希码。所以，我不知道哈希码的生成取决于对象类型或其他东西......

你能建议我如何在 java 中实现哈希码或它依赖（基于）什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:33:45.267

哈希码通常为每个对象实现，并使用使该对象唯一并遵守哈希码等于合同的字段进行计算。如果未实现，将使用超类的哈希码。

“默认实现”将是使用其内存地址（也称为指针）计算的对象哈希码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:35:35.393

有很多关于这个尝试的资源

*   [http://en.wikipedia.org/wiki/Java_hashCode()](http://en.wikipedia.org/wiki/Java_hashCode())
*   [Java中hashCode()是如何计算的](https://stackoverflow.com/questions/2427631/how-is-hashcode-calculated-in-java)

# sql - sql合并两个常用字段不完整的表

> ID：13968027
> 
> 赞同：0
> 
> 时间：2012-12-20T08:31:09.233
> 
> 标签：sql, sql-server, sql-server-2008, join, merge

在 SQL Server 2008 中，我有以下两个表

```
 Table_1:
C1  C2
A   TypeStringA-1
B   TypeStringA-2
C   TypeStringA-3
D   TypeStringA-4
E   TypeStringA-5

  Table_2
C1  C2
A   TypeStringB-1
B   TypeStringB-2
D   TypeStringB-3
E   TypeStringB-4 
```

我想显示以下数据：

```
 Result
A  TypeStringA-1 TypeStringB-1
B  TypeStringA-2 TypeStringB-2
C  TypeStringA-3 Null
D  TypeStringA-4 TypeStringB-3
E  TypeStringA-5 TypeStringB-4 
```

现在我拥有的是两个子查询和一个 where：

```
select
query1.C1
query1.C2
query2.C2
(select C1, C2 
from Table_1) as query1
(select C2
from table_2) as query2
where query1.C1 = query2.C1
order by query1.C1 
```

但是从逻辑上讲，在我的结果中，我没有需要显示的 Null 数据，这就是我得到的：

```
 Result
A  TypeStringA-1 TypeStringB-1
B  TypeStringA-2 TypeStringB-2
D  TypeStringA-4 TypeStringB-3
E  TypeStringA-5 TypeStringB-4 
```

问题是我应该使用什么来根据需要使用 Null 数据拍摄表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:32:36.450

```
select  coalesce(t1.C1, t2.C1)
,       t1.C2
,       t2.C2
from    Table_1 t1
full outer join
        Table2 t2
on      t1.C1 = t2.C1 
```

# ios - iOS如何计算每个区域的大小宽度（任何位置和任何缩放）

> ID：13968030
> 
> 赞同：6
> 
> 时间：2012-12-20T08:31:18.893
> 
> 标签：ios, mkmapview

就像标题一样，有谁知道如何计算每个区域的尺寸宽度到米，意味着在每个地方和任何缩放。

我找到了如何获得缩放比例。

```
CLLocationDegrees longitudeDelta = myMapView.region.span.longitudeDelta;
CGFloat mapWidthInPixels = myMapView.bounds.size.width;
double zoomScale = longitudeDelta * MERCATOR_RADIUS * M_PI / (180.0 * mapWidthInPixels); 
```

但我不知道结果是什么意思，如果我想获得尺寸宽度的米或线 20f，我将**mapWidthInPixels**更改为 20 对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T09:08:24.513

您可以在此处找到公式的详细说明：[将经度纬度转换为米](https://stackoverflow.com/questions/3024404/transform-longitude-latitude-into-meters)。

示例代码：

```
CLLocationDegrees deltaLatitude = self.mapView.region.span.latitudeDelta;
CLLocationDegrees deltaLongitude = self.mapView.region.span.longitudeDelta;
CGFloat latitudeCircumference = 40075160 * cos(self.mapView.region.center.latitude * M_PI / 180);
NSLog(@"x: %f; y: %f", deltaLongitude * latitudeCircumference / 360, deltaLatitude * 40008000 / 360); 
```

[Mark Ransom](https://stackoverflow.com/users/5987/mark-ransom)的学分

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-14T18:16:06.607

这对我很有用。我的解决方案是在 Swift 中，但是 Obj-C 是类似的。

斯威夫特：

```
let mRect: MKMapRect = self.mapView.visibleMapRect
        let eastMapPoint = MKMapPointMake(MKMapRectGetMinX(mRect), MKMapRectGetMidY(mRect))
        let westMapPoint = MKMapPointMake(MKMapRectGetMaxX(mRect), MKMapRectGetMidY(mRect))
        let currentDistWideInMeters = MKMetersBetweenMapPoints(eastMapPoint, westMapPoint)
        let milesWide = currentDistWideInMeters / 1609.34  // number of meters in a mile
        println(milesWide) 
```

Obj-C（对以下代码的原始贡献者的称赞[https://stackoverflow.com/a/5813609/3750109](https://stackoverflow.com/a/5813609/3750109)）

```
MKMapRect mRect = self.mapView.visibleMapRect;
        MKMapPoint eastMapPoint = MKMapPointMake(MKMapRectGetMinX(mRect), MKMapRectGetMidY(mRect));
        MKMapPoint westMapPoint = MKMapPointMake(MKMapRectGetMaxX(mRect), MKMapRectGetMidY(mRect));

        self.currentDistWideInMeters = MKMetersBetweenMapPoints(eastMapPoint, westMapPoint); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:56:54.730

以经度米为单位的距离会随着纬度的增加而变化。当您离赤道越远时，相同的经度值会以米为单位变小。最好的方法可能是`CLLocation`在左中和右中创建两个 s，然后用于`-distanceFromLocation:`获取它们之间的距离（以米为单位）。

# android - 进入暂停状态时如何完成内置 WiFi 设置屏幕

> ID：13968032
> 
> 赞同：0
> 
> 时间：2012-12-20T08:31:24.893
> 
> 标签：android, android-intent, preferences, android-wifi

在我的应用程序中，我正在调用 Preference.xml 文件中的内置 WiFi 设置。

我正在使用此代码调用内置 WiFi 设置

```
<Preference
        android:key="wi5"
        android:summary="click this for wi5 setting"
        <intent android:action="android.settings.WIRELESS_SETTINGS" />
    </Preference> 
```

当我处于 WiFi 设置并且 WiFi 设置进入暂停状态时。我想关闭设置屏幕。如何实现这一目标

# java - 多线程中的 java.sql.Connection

> ID：13968035
> 
> 赞同：-3
> 
> 时间：2012-12-20T08:31:56.117
> 
> 标签：java, multithreading, jakarta-ee, singleton

> **可能重复：**
> [java.sql.Connection 线程安全吗？](https://stackoverflow.com/questions/1531073/is-java-sql-connection-thread-safe)

多个线程可以使用同一个 java.sql.Connection 同时向数据库发送查询吗？所有线程将同时使用该连接。

如果连接是从单例类获得的，上述情况是否仍然可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:35:55.673

是的，这是可能的，但我建议您实现一些连接池 - c3p0 是非常流行的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:37:32.887

不，`java.sql.Connection`不是线程安全的。想象一个线程发出一个命令，而另一个命令执行回滚。即使之前的命令完全有效，它也会被回滚。或者一个线程执行命令，而另一个线程关闭连接。

然而！创建多个连接没有问题！SQL 服务器旨在处理大量异步连接。与其在应用程序中重新发明轮子和同步数据库访问，不如在数据库本身中使用同步机制。

# android - Unity3D：无需重新插入即可在两台 Android 设备上构建和运行

> ID：13968036
> 
> 赞同：3
> 
> 时间：2012-12-20T08:31:57.293
> 
> 标签：android, build, unity3d, build-process

是否可以在两台连接的 Android 设备上安装具有一个 Build & Run 进程的应用程序？

或者是否可以连接两台设备并选择设备来构建应用程序而无需烦人的重新插入？

[UnityAnswers](http://answers.unity3d.com/questions/366379/build-run-on-two-android-devices-simultaneously.html)中的相同问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:10:04.003

这在 Unity 中尚无法实现，但在 Eclipse 上是可能的。建立在一个之上，然后在 adb 中选择以另一个为目标。

在 Unity 4 中，您可以选择构建一个 Eclipse 项目（或者您可以尝试将 Unity 作为 Unity 3.x 的子视图 hack，或者使用 appjiggers Unity2Eclipse 插件），您可以在 Eclipse 中构建两个机器人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-29T05:54:50.373

在我们可以构建并运行到多个设备之前，请制作一个 .bat 来指示 adb 将 .apk 推送到您希望的任意多个设备。

# javascript - JavaScript - 等待 IndexedDB 中的异步函数

> ID：13968038
> 
> 赞同：1
> 
> 时间：2012-12-20T08:32:07.203
> 
> 标签：javascript, indexeddb

我有一个带有 indexedDB 函数的 JS 文件，如下所示：

```
// Get all object stores from IndexedDB
mydb.indexedDB.getObjStores = function() {
  var db = mydb.indexedDB.db;
  return db.objectStoreNames;
}; 
```

我从另一个 JS 文件中调用这个函数，我需要对象存储的名称来对它们做一些事情，比如填充一个组合：

```
function doSomething(){
  var arr = mydb.indexedDB.getObjStores();
  for (var i=0; i<arr.length;i++) {
    document.getElementById('mycombo').options[i] = new Option (arr[i], i);
  }
} 
```

根据浏览器的不同，组合是空的，尽管我可以获得数组的长度（奇怪）。我认为问题在于异步的事情正在杀死我......我认为使用 addEventListener 之类的东西是个好主意（[我什么时候可以告诉我已经在 indexedDB 中打开了一个连接？](https://stackoverflow.com/questions/11641751/indexeddb-best-method-to-wait-for-database-to-open-in-function-in-javascript)），但是这个 indexedDB 调用没有 onsuccess 事件. 它适用于 Chrome 和 Firefox，但不适用于 PDA 浏览器，例如，我该如何等待？那是问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:49:28.893

问题解决了。这个浏览器中的 indexedDB 规范有点不同：getObjStores() 返回一个带有一些数组的对象，其中一个是对象存储列表。所以我正在检索不存在的数据，因为我期待一个 DOMStringList。在非常特殊的情况下出现“愚蠢”错误。谢谢你。

# php - 单击按钮时向 MySQL 添加数据，而不是在加载页面时

> ID：13968040
> 
> 赞同：0
> 
> 时间：2012-12-20T08:32:11.150
> 
> 标签：php, mysql, youtube-api

我有一个页面，您可以在其中将视频添加到播放列表。这是通过单击添加按钮来完成的。

然而问题是每次我去这个页面时，不管点击添加按钮，它都会将该视频添加到你的播放列表中，即使它已经存在。

您必须有一个帐户才能使用播放列表功能。添加按钮在您登录时可见，如果没有进入则看不到添加按钮。

这是我添加到数据库的代码：

```
if (isset($_SESSION['username'])){

                echo '<button type="submit" formmethod="post" formaction="video.php" onClick="Confirm(this.form)">ADD</button>';

                $userID = $_SESSION['username'];
                $ID = $watch;
                $artist = $new[0];
                $title = $new[1];
                $youtubeID = $code;
                include 'opendb.php';
                $sql = "insert into youtube_playlist (userid,youtubeID,artist,title) values ((select id from users where username = \"$userID\"),\"$youtubeID\",\"$artist\",\"$title\")";
                $result = mysql_query($sql,$conn) or die(mysql_error());

            }
            //if not logged in.
            else{
                echo "You are not logged in, you cant use the playlist feature.";
            } 
```

因此，即使您登录并尝试观看视频，即使您不想，它也会将其添加到播放列表中。你如何确保这永远不会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:02:24.580

你总是可以尝试这样的事情：

```
<html>
<head>
<title>My Website</title>
</head>
<body>
<?php
    if (isset($_POST['add'])) {
        $userID = $_SESSION['username'];
        $ID = $watch;
        $artist = $new[0];
        $title = $new[1];
        $youtubeID = $code;
        include 'opendb.php';
        $sql = "insert into youtube_playlist (userid,youtubeID,artist,title) values ((select id from users where username = \"$userID\"),\"$youtubeID\",\"$artist\",\"$title\")";
        $result = mysql_query($sql,$conn) or die(mysql_error());
    }

    if (isset($_SESSION['username'])){
        echo "<form action='' method='post'>
            <input name='add' type='submit' value='Add'/>
        </form>";
    } else {
        echo "You are not logged in, you cant use the playlist feature.";
    }
?>
</body>
</html> 
```

# html - 网页如何使用 www.website.com/?=example 导航？

> ID：13968043
> 
> 赞同：0
> 
> 时间：2012-12-20T08:32:25.190
> 
> 标签：html, css

说，如果我有一个网站`http://website.com/`

如何允许我的每个导航选项卡加载带有地址的新页面，例如，`http://website.com/?=newpage`

我的其他 html 页面应该是什么文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:34:55.513

没有不同的文件可以从中加载内容，它只是`GET`一个值为 in 的变量`URL`，您需要服务器端或 jQuery 来加载页面上的相应内容

以 PHP 为例

```
<?php
if(isset($_GET['page']) && $_GET['page'] == 'first_page') {
?> 
Whatever you type in here shows when url is like www.example.com?page=first_page
<?php
} elseif($_GET['page']) && $_GET['page'] == 'second_page') {
?>
Whatever you type in here shows when url is like www.example.com?page=second_page
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:37:41.503

您需要使用服务器端语言来解析查询字符串（问号 (?) 之后的所有内容）。实际页面是默认页面（通常是 index.html）。您也可以使用 JavaScript，但这种方法更复杂，并且对不支持它的客户端有问题。

# android - Android上OpenGL表面视图上不需要的透明SupportMapFragment

> ID：13968064
> 
> 赞同：1
> 
> 时间：2012-12-20T08:34:11.333
> 
> 标签：android, google-maps, opengl-es

我正在尝试使用 SupportMapFragment 使用适用于 Android 的 Google Maps API V2，当我在使用 opengl 和相机的表面视图顶部添加地图时遇到问题。

问题是我将片段动态地添加到表面视图的顶部，我得到的只是缩放控件，而是一个透明的地图。

是否与已经在使用 opengl 的应用程序不兼容？

我应该在加载地图之前销毁 opengl 上下文吗？

会不会是其他问题，例如错误的 API 密钥、权限等？

我能做些什么让它与其他opengl表面一起工作吗？

**更新**：我设法在独立活动（ProgramaticDemoActivity.java）上显示地图，所以这不是 API KEY 问题（尽管我必须创建一个新的 API 控制台项目）。

然后我再次尝试查看我的表面视图，我可以看到地图，但并非总是如此。调用 mMapFragment.getMap() 时，我通常会得到 null。即使在我将片段添加到布局（以编程方式）之后，也可能调用 onCreateView 的速度不够快。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:46:15.453

从 Map API V2 开始，它使用 GL 表面。较旧的 API 可能会遵循一些 z 顺序，因为它使用简单的 2D 画布来绘制地图。

截至目前，android 无法按特定顺序处理重叠的 EGL 表面。作为一种特殊的视图，它在某种意义上穿透其余部分以直接访问该矩形内存框架，这些不会尊重您布局中提到的 z 顺序。

即使在同一设备上进行不同的运行，也或多或少是抛硬币决定哪一个在上面。

请参阅 Dianne 的回复： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/COffLpanlz0](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/COffLpanlz0)

但是请为您的 GL Surface探索[setZOrderMediaOverlay()和 setZOrderOnTop()。](http://developer.android.com/reference/android/view/SurfaceView.html#setZOrderMediaOverlay%28boolean%29)你可能有一些运气。

解决方法：

*   可以尝试 Map API V1，它可能会在您的应用程序出名时看到它的插件
*   可以改为将 Web API 用于具有严格免费配额的静态地图位图（支付更多费用）

或者随意给[问题加注星标（例如#6613）](http://code.google.com/p/android/issues/detail?id=6613)并等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T02:55:46.027

添加 MapFragment 后，您无法直接 getMap() ...您必须等到它准备好。建议您创建一个 MyCustomisedMapFragment 并让它在其 onResume 方法中执行某些操作，以告诉您的其他代码已为您准备好 getMap()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:34:54.287

“透明地图”是什么意思？您看到地图图块“透明”还是什么也看不到（只有缩放控件而没有图块）？

您是否尝试过在没有 OpenGL 层的情况下使用 SupportMapFragment？只是为了丢弃 API 密钥问题。

我在使用 Google Maps 活动时遇到了同样的问题，我再次测试和测试解决了它，但我认为问题与 Maps API 密钥有关。

# c# - 在 Asp.net C# 中创建动态控件，并缓存控件并绑定数据

> ID：13968066
> 
> 赞同：0
> 
> 时间：2012-12-20T08:34:16.123
> 
> 标签：c#, asp.net, caching, dynamic-controls

我正在创建动态控件，如文本框、`Page_Init`. 创建控件后，我将数据绑定到控件。当页面回发发生时，我必须重新创建控件并重新绑定数据。

有什么方法可以缓存动态创建的控件并将最新数据更新到该控件。例如，我创建文本框然后将值设置为“abc”，当有回发时，我不想再次重新创建文本框，或者只想从缓存中获取控制权并想更新最新值说“xyz”到那个文本框。

基本上是第一次创建控件，缓存控件并将最新数据绑定到回发控件。

谢谢 Yogesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:38:26.637

在您的 init 方法中添加以下代码

```
if(!IsPostBack)
{
    //Put your control initzilation here and it will not be triggered on a PostBack
} 
```

您将需要其他逻辑来更改需要更改的控件的 txt 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:44:39.000

在方法中创建控件`Page_OnInit`应注意控件保留其数据。

如果您也在代码中设置数据，请确保将它们封装在

```
if (!Page.IsPostBack)
{
    //set data here
} 
```

这确保了只有第一次设置数据，而不是每次都覆盖。

* * *

**编辑：**

作为一个更完整的例子：

```
protected void Page_OnInit(object sender, EventArgs e)
{
    TextBox txt = new TextBox();
    //create more controls
    if (!Page.IsPostBack)
    {
        txt.Text = "initial value";
    }
    Page.Controls.Add(txt);
    //add other controls
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T13:42:11.733

没有每次你必须创建它

我不知道，但我认为这是微软的错误或其他东西，但你必须每次都创建它

一些开发人员建议您必须在 page_Preinit 中创建它，但您不会获得任何静态表格或面板控件，那么您在哪里添加控件？

# javascript - 每个元素上的同位素过滤器链接

> ID：13968067
> 
> 赞同：2
> 
> 时间：2012-12-20T08:34:34.673
> 
> 标签：javascript, jquery, jquery-isotope

我对这个游戏比较陌生，想看看是否有人可以帮助我？

我正在尝试在一个元素上创建一个链接，该元素的行为类似于顶部菜单中的一个过滤器，在这种情况下为 .graphic ！

这是我的菜单：

```
<section id="options" >
<ul  id="nav" class="drop option-set clearfix" data-option-key="filter">
<li id="filters"><a href="#filter" data-option-value=".home" class="selected">home</a></li>
<li id="filters"><a href="#filter" data-option-value=".product">industrial design</a></li>
<li id="filters"><a href="#filter" data-option-value=".graphic">website design</a></li>
<li id="filters"><a href="#filter" data-option-value=".hosting">website hosting</a></li>
<li id="filters"><a href="#filter" data-option-value=".ip">zelo ip</a></li>
<li id="filters"><a href="#filter" data-option-value=".research">research</a></li>
<li id="filters"><a href="#filter" data-option-value=".contact">contact us</a></li>
</ul>
</section> 
```

这是元素：

```
<div class="element home width4 height2" style="background-size: 100% Auto; background-repeat: no-repeat; background-position: 0px 0px;background-image:url('images/home/004.jpg');">
<p class="weight"><a href="#filter" data-option-value=".graphic">more...</a></p></div> 
```

我究竟做错了什么？

演示可以在这里看到：http: [//zelo.co.uk/dynamic](http://zelo.co.uk/dynamic)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:35:22.783

顶部菜单链接可以作为同位素过滤器正常工作，因为链接包含在一个类中`<ul>`，该类`option-set`本身包含在一个带有 id 的部分中`options`；

```
<section id="options" >
                <ul  id="nav" class="drop option-set clearfix" data-option-key="filter">
                  <li id="filters"><a href="#filter" data-option-value=".home" class="selected">home</a></li>
                  <li id="filters"><a href="#filter" data-option-value=".product">industrial design</a></li>
..... 
```

（请注意，您不应该对每个列表项应用相同的 id，id 应该是唯一的）。

负责应用同位素的 JS 的相关部分如下 - 要使其正常工作，您需要更改标记以便所有链接都可以由相同的 JS 函数处理，或者创建一个专门针对链接的新函数页面的主容器（可能通过对每个容器应用特定的类）。

```
 var $optionSets = $('#options .option-set'),
      $optionLinks = $optionSets.find('a');

  $optionLinks.click(function(){
    var $this = $(this);
    // don't proceed if already selected
    if ( $this.hasClass('selected') ) {
      return false;
    }
    var $optionSet = $this.parents('.option-set');
    $optionSet.find('.selected').removeClass('selected');
    $this.addClass('selected');

    // make option object dynamically, i.e. { filter: '.my-filter-class' }
    var options = {},
        key = $optionSet.attr('data-option-key'),
        value = $this.attr('data-option-value');
    // parse 'false' as false boolean
    value = value === 'false' ? false : value;
    options[ key ] = value;
    if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
      // changes in layout modes need extra logic
      changeLayoutMode( $this, options )
    } else {
      // otherwise, apply new options
      $container.isotope( options );
    }

    return false;
  }); 
```

# sql - 连接两个 select 语句的结果

> ID：13968075
> 
> 赞同：1
> 
> 时间：2012-12-20T08:35:00.193
> 
> 标签：sql, oracle

我的查询类似于：

```
concatenate( 
 (select col1 from table1) , ( select col1.substr(1,<tillENd>) ) 
) 
```

如果两个子选择都返回一行和一列，则此方法可以正常工作。就我而言，两者都会给出多行但一列。

我想逐行连接它们。我怎样才能做到这一点？

* * *

更新：完整的查询类似于以下内容。

查询一：

```
select col3 
from tabl2 
where col2 in (select substr(A,1,instr(A,'_',-1)-1) 
               from ( select substr(col1,1,instr(col1,'/')-1) as A 
                      from ( select col1 from tabl1 ) 

               ) 
           ) 
```

第二次选择查询：

```
select substr(col1,instr(col1,'/')) as A1 
from ( select col1 
from tabl1 ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T08:39:05.673

```
select ...
from   ...
union all
select ...
from   ... 
```

或者，如果您使用 UNION 而不是 UNION ALL，则完整的结果集受 DISTINCT 操作的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:18:05.063

现在您已经提供了一些示例查询，我们可以更轻松地提供解决方案。

关于您的附加要求，我假设您不想匹配 void 字符串，所以最简单的方法是在子查询中将它们过滤掉。

```
with data as ( select substr(col1,1,instr(col1,'/')-1) as A
               , substr(col1,instr(col1,'/')) as A1 
            from tabl1
           where instr(col1,'/') > 0 )
select tabl2.col3
       , data.A1
from data
      join tabl2
     on tabl2.col2 = substr(data.A,1,instr(data.A,'_',-1)-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:44:25.653

试试[LISTAGG](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions089.htm#CJABDFBD)功能。另请参阅[收集](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions031.htm#i1271564)功能。

然后连接结果。

# php - 我需要制作一个程序，自动将表单发送到 PHP 文件，然后加载该 PHP 文件的内容

> ID：13968077
> 
> 赞同：-1
> 
> 时间：2012-12-20T08:35:08.980
> 
> 标签：php, html, load

所以基本上我有一个 php 程序，它根据一些变量创建一个表单并将其发送到另一个 php 文档。然后，该 php 表单将读取该表单并生成错误消息或重定向到另一个网页。我想要第一个 php 文件或单独的文件来激活它，然后分析链接上的内容以查看它是否正常工作。

我知道如何使用 php 代码来加载单独网页的内容，但是由于我想要读取的 php 表单不会输出任何实际的 HTML 代码，除非它接收到表单。

我不一定要寻找实际的代码，但如果有人能指出我要研究哪些概念的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:38:19.983

希望您了解 CURL 使用 CURL 您可以将数据/变量发布到任何 Web 链接并从中获取返回内容您可以在[http://www.askapache.com/php/sending-post-form-data看到一个最小示例-php-curl.html](http://www.askapache.com/php/sending-post-form-data-php-curl.html)

希望这可以帮助

# objective-c - 在 iOS 6 中获取当前界面方向

> ID：13968081
> 
> 赞同：7
> 
> 时间：2012-12-20T08:35:40.090
> 
> 标签：objective-c, ios, xcode

我在 iOS 5.x 中动态进行方向检查，如下所示：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 if(interfaceOrientation == UIInterfaceOrientationPortrait||interfaceOrientation ==         UIInterfaceOrientationPortraitUpsideDown) 
 {
self.viewProfile.frame = CGRectMake(238, 612, 295, 73);
// some more settings
}
else
{
self.profileNew.frame = CGRectMake(374, 540, 295, 58);
 // some more settings
}
 return YES;
} 
```

对于 iOS 6，我做了以下代码，但那不起作用：

```
-(BOOL)shouldAutorotate{    
   return YES;
}

-(NSInteger)supportedInterfaceOrientations
{
 if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation)) 
  {
   self.viewProfile.frame = CGRectMake(238, 612, 295, 73);
   // some more settings
  }
  else
  {
   self.profileNew.frame = CGRectMake(374, 540, 295, 58);
   // some more settings
  }
 return UIInterfaceOrientationMaskAll;
} 
```

如何像在 iOS 5.x 中一样检查 iOS 6 中的界面方向？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T08:43:52.917

您可以使用该`viewWillLayoutSubviews`方法，在其中检查方向

`[[UIApplication sharedApplication] statusBarOrientation];`

并相应地设置你的框架。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T08:44:11.893

尝试在此方法中进行检查

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)orientation
                            duration:(NSTimeInterval)duration 
```

编辑：

用这个：

```
BOOL isInPortrait = UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T04:16:55.727

结合 Levi's 和 Nikola Kirev 的答案，现在代码可以正常工作。谢谢你们俩。这是其他人参考的代码：

对于 iOS 6：

```
 -(BOOL)shouldAutorotate{
    return YES;
  }

-(NSInteger)supportedInterfaceOrientations{
        if (UIDeviceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation])) {
            self.viewProfile.frame = CGRectMake(238, 612, 295, 73);
            //other codes            
        }

        else {
            self.viewProfile.frame = CGRectMake(374, 462, 295, 58);
            //other codes
        }
        return UIInterfaceOrientationMaskAll;
       }

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)orientation
                            duration:(NSTimeInterval)duration{
    if (UIDeviceOrientationIsPortrait(orientation)) {
        self.viewProfile.frame = CGRectMake(238, 612, 295, 73);
        //other codes
        self.profileNew.frame = CGRectMake(238, 713, 295, 73);            
    }

    else {
        self.viewProfile.frame = CGRectMake(374, 462, 295, 58);
        //other codes
    }
} 
```

对于 iOS 5.x 和 4.x

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if(interfaceOrientation == UIInterfaceOrientationPortrait||interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {
        self.viewProfile.frame = CGRectMake(238, 612, 295, 73);
        //other codes      
    }

    else {
        self.viewProfile.frame = CGRectMake(374, 462, 295, 58); 
        //other codes
        }
    return YES;
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:47:48.587

试试这个 ：

```
UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation] 
```

# java - 使用 executorservice 控制运行时进程

> ID：13968082
> 
> 赞同：1
> 
> 时间：2012-12-20T08:35:48.273
> 
> 标签：java, file-io, executorservice

我使用 Runnable 对象来运行 processCommand 并执行一些需要一些时间的处理（我们称之为进程内）。在 insideprocess 结束时，它会将一些内容写入文本文件。这个想法是，如果在某个指定的时间内，insideprocess 仍然没有完成，它必须被杀死，所以我使用 ExecutorService 来处理它。但是如果 insideprocess 比指定的时间早完成，它会中断 ExecutorService 以便主线程可以继续下一个任务。

但问题是，有时，内部进程根本不创建文件，或者它创建了一个文件，但里面没有任何内容。当内部进程早于指定时间完成时，就会发生这种情况。我不知道我的实施有什么问题。请注意，如果我手动执行该过程（不使用 ExecutorService），则该过程运行良好并且它可以正确写入所有内容。

在这里，我发布我的代码来完成这项工作：

```
public void process(){

    for (int i = 0; i < stoppingTime.length; i++) {
        for (int j = 2 * i; j < 2 * (i + 1); j++) {
            final int temp = j;
            ExecutorService executor = Executors.newSingleThreadExecutor();

            Runnable r = new Runnable() {

                @Override
                public void run() {
                    Process p = null;

                    int ex = 1;

                    try {
                        p = Runtime.getRuntime().exec(
                                processCommand.get(temp));

                        while (ex != 0) {
                            try {
                                //sleep every 30 second then check the exitValue
                                Thread.sleep(30000);
                            } catch (InterruptedException e) {

                            }
                            ex = p.exitValue();
                            p.destroy();                                
                        }                           
                    } catch (IOException e) {
                        e.printStackTrace();
                        System.out.println("IOException");
                    }
                }

            };

            Future future = executor.submit(r);

            try {
                System.out.println("Started..");
                future.get(stoppingTime[i], TimeUnit.SECONDS);                  
                System.out.println("Finished!");
            } catch (TimeoutException e) {
                System.out.println("Terminated!");
            } catch (InterruptedException e) {
                System.out.println("Future gets InterruptedException");
            } catch (ExecutionException e) {
                System.out.println("Future gets ExecutionException");
            }
            executor.shutdownNow();
            System.out.println("shutdown executor");
        }
        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T01:40:59.767

老问题，我想我还是会试试的。

首先，你得到一个`ExecutorService`内部双循环，在与定义相同的块中`Runnable`。如果您想获得本机执行的返回值，`"processCommand"`然后像您说的那样继续执行下一个任务，那么您需要`ExecutorService`通过在循环之前实例化它来重用它。

其次，`stoppingTime[i]`是`int`while`Future.get(...)`采取`long`。

# android - Android使用片段作为照片库，如何？

> ID：13968083
> 
> 赞同：1
> 
> 时间：2012-12-20T08:35:49.697
> 
> 标签：android, gallery, fragment

我正在尝试实现一个画廊。

由于画廊小部件已被弃用......为了实现它并具有分页滚动效果，我正在使用片段（android 兼容性 v4）来做到这一点。

一切看起来都很好，直到向后滚动......我的应用程序只是强制关闭，原因是：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

看起来它在回滚以显示上一张照片时重新获得了 ImageView。

而且我不知道如何解决这个问题......

这是我的 xml 和代码

[XML]

```
<android.support.v4.view.ViewPager android:id="@+id/pager" android:layout_below="@id/head" android:layout_width="wrap_content" android:layout_height="350dp" android:layout_marginTop="35dp" /> 
```

[代码]

```
public class PhotoView extends FragmentActivity
{
  private Button btnBack=null;
  private ClickHandler click=null;
  private ViewPager pager=null;
  private ArrayList<ImageView> imgList=new ArrayList<ImageView>();

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photo_show);
    initUI();
    handler.sendEmptyMessage(0);
  }

  private void initUI()
  {
    btnBack=(Button)findViewById(R.id.btnBack);
    btnBack.setOnClickListener(click);
    pager=(ViewPager)findViewById(R.id.pager);
  }

  private Handler handler=new Handler()
  {
    public void handleMessage(Message msg)
    {
      loadPhotos();
    }
  };

  private void loadPhotos()
  {
    for(int i=0; i<Constants.PHOTO_LIST.size(); i++)
    {
      ImageView img=new ImageView(this);
      img.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
      imgList.add(img);
      new ImageDL(Constants.PHOTO_LIST.get(i).getFileId(), Params.IMAGE_SIZE_PARAM_ORIGINAL).execute(img); // async D/L photo
    }
    pager.setAdapter(new PhotoAdapter(getSupportFragmentManager()));
  }

  @Override
  public void onBackPressed()
  {
    super.onBackPressed();
    btnBack.performClick();
    return;
  }

  @Override
  protected void onStop()
  {
    super.onStop();
    for(int i=0; i<imgList.size(); i++) //Do recycle when activity stopped, but I'm not yet sure this code is right...
    {
      Drawable drawable=imgList.get(i).getDrawable();
      if(drawable instanceof BitmapDrawable)
      {
        BitmapDrawable bitmapDrawable=(BitmapDrawable) drawable;
        Bitmap bitmap=bitmapDrawable.getBitmap();
        bitmap.recycle();
      }
    }
    imgList.clear();
    imgList=null;
  }

  private class ClickHandler implements OnClickListener
  {
    public void onClick(View v)
    {
      if(v==btnBack)
      {
        finish();
        overridePendingTransition(R.anim.lr1, R.anim.lr2);
        System.gc();
      }
    }
  }

  private class PhotoAdapter extends FragmentPagerAdapter
  {
    public PhotoAdapter(FragmentManager mgr)
    {super(mgr);}

    @Override
    public int getCount()
    {
      return(imgList.size());
    }

    @Override
    public Fragment getItem(int position)
    {
      return(new PhotoFragment(position));
    }
  }

  private class PhotoFragment extends Fragment 
  {
    private int index=-1;

    private PhotoFragment(int index)
    {this.index=index;}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
      return imgList.get(index);
    }
  }
} 
```

那是我第一次在我的代码中使用 Fragment API，我不确定我所做的代码逻辑是否正确......

有什么想法可以帮助我解决这个问题，或者在 Android 2.3 ~ 4.x 中实现画廊（带有分页滚动）的另一种更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T04:20:21.057

您不应该使用 imgList 作为缓存。

您实现 onCreateView() 的问题在于：。在第 0 页，ViewPager 会将 imageView 添加到第 0 页，并将 imageView 添加到其布局（父视图）中（我认为）。. 当您滚动回第 0 页时，ViewPager 将再次调用 onCreateView()，从而在尝试将已添加的 imageView 重新添加到其布局中时出现错误：

java.lang.IllegalStateException：指定的孩子已经有一个父母。

所以你不应该在 loadPhotos() 方法中使用 imgList；而是在 onCreateView() 中初始化 imageView 。

修改后的代码：

```
 private void loadPhotos()
  {

    pager.setAdapter(new PhotoAdapter(getSupportFragmentManager()));
  }

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
      ImageView img=new ImageView(this);
      img.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

      new ImageDL(Constants.PHOTO_LIST.get(i).getFileId(),  Params.IMAGE_SIZE_PARAM_ORIGINAL).execute(img); // async D/L photo

      return img;
} 
```

# sql-server - 在 2 个表中加入父级以完全匹配子行值

> ID：13968085
> 
> 赞同：2
> 
> 时间：2012-12-20T08:36:13.570
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, sql-server-2012

我有 2 个具有以下结构的表：

表 1 (Tb1)：

```
MasId Int, ItemId int, Quantity int
1          1           10
1          2           5
1          3           18
2          2           3
2          4           8 
```

表 2 (Tb2)：

```
MasId Int, ItemId int, Quantity int
10          1           10
10          2           5
10          3           18
6           2           3
6           4           8 
```

我想将 Tb1 与 Tb2 与`ItemId`和`Quantity`列相匹配。并获得以下查询：

```
Tb1.MasId   Tb2.MasId
1           10
2           6 
```

表 1 和表 2 包含大约 2000000 条记录。我用`SQL Server 2012`

**编辑 1**

在 Tb1 和 Tb2 中存在如下记录：

结核病1：

```
MasId, ItemId, Quantity
3      15       10
3      16       2 
```

结核病：

```
MasId, ItemId, Quantity
20     15      10
20     18      5 
```

Tb1.MasId 和 Tb2.MasId 不匹配在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:16:43.737

以下[作为 SqlFiddle 可用的](http://sqlfiddle.com/#!6/9244c/9)查询即使使用棘手的数据也会返回正确的结果：

```
SELECT
   Tb1MasId = A1.MasId,
   Tb2MasId = B1.MasId
FROM
   (
      SELECT
         MasID,
         Pattern = Checksum_Agg(Binary_Checksum(ItemId, Quantity))
      FROM dbo.Tb1
      GROUP BY MasId
   ) A1
   INNER JOIN (
      SELECT
         MasID,
         Pattern = Checksum_Agg(Binary_Checksum(ItemId, Quantity))
      FROM dbo.Tb2
      GROUP BY MasId
   ) B1
      ON A1.Pattern = B1.Pattern
      AND NOT EXISTS (
         SELECT * 
         FROM
            (
               SELECT A2.ItemID, A2.Quantity
               FROM dbo.Tb1 A2
               WHERE A1.MasID = A2.MasID
               UNION ALL
               SELECT B2.ItemID, B2.Quantity
               FROM dbo.Tb2 B2
               WHERE B1.MasId = B2.MasID
            ) X
         GROUP BY ItemID, Quantity
         HAVING Count(*) = 1
      ); 
```

[页面上的其他答案使用我的 SqlFiddle](http://sqlfiddle.com/#!6/9244c/9)中的示例数据给出了不正确的结果。具体来说，添加以下数据`Tb2`将破坏[XLAnt 的当前查询](https://stackoverflow.com/a/13968114/57611)`2, 8`（由于未检测到`8, 3, 18`不属于，这将显示错误匹配）。

```
INSERT dbo.Tb2
VALUES
   (7, 1, 10),
   (7, 2, 5),
   (7, 3, 17),
   (8, 3, 18),
   (8, 2, 3),
   (8, 4, 8); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:38:13.963

尝试 ：

```
SELECT Tb1.MasId AS MasId1, Tb2.MasId AS MasId2
FROM Tb1, Tb2, (SELECT MasId, COUNT(MasId) AS Cnt FROM Tb1 GROUP BY MasId) Cnt
WHERE Tb1.ItemId = Tb2.ItemId
  AND Tb1.Quantity = Tb2.Quantity
  AND Tb1.MasId = Cnt.MasId
GROUP BY Tb1.MasId, Tb2.MasId, Cnt.Cnt
HAVING COUNT(Tb1.MasId) = Cnt.Cnt 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!6/b3119/11/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:53:13.647

你也可以像下面这样分组

```
SELECT Tb1.MasId, Tb2.MasId
       FROM Tb1 
          INNER JOIN Tb2 
             ON Tb1.ItemId = Tb2.ItemId
             AND Tb1.Quantity = Tb2.Quantity
 group by Tb1.MasId, Tb2.MasId 
```

# jquery - 使用 jsonp 对 localhost php 的 Ajax 请求不起作用

> ID：13968087
> 
> 赞同：0
> 
> 时间：2012-12-20T08:36:30.440
> 
> 标签：jquery, mysql, ajax, jsonp

您好正在使用 Jquery 调用 php 脚本。php 脚本位于`http://localhost:8080/getData.php`并访问一个 MySql 数据库。

我在我的电脑上使用一个 tomcat 服务器设置，服务器地址为 localhost:8080

我查看了 ajax 响应 data.status 它是 0

我已经阅读了有关跨域请求的信息，并且知道如果我使用 JSONp 这应该不是问题。

任何帮助将非常感激。

**我用来调用 ajax 函数的 HTML 中的 jquery 部分如下：**

```
<script type="text/javascript">
$(document).ready(function() {
   $.ajax({
       type:'GET',
       url:'http://localhost/getData.php',
       datatype:'jsonp',
       timeout: 5000,
       success: function(data){
           //data loaded
           alert('loaded');

       },
       error: function(data){
           // error on loading data
           alert('error');        
       }
    });
});
</script> 
```

**实际的 getData.php 代码如下：**

```
<?php
header('Content-type: application/json');

$server = "127.0.0.1";
$username = "root";
$password = "";
$database = "deals";

$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$sql = "SELECT area_id, name AS area_name, sector AS area_sector FROM deals.areas ORDER BY name";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());

$records = array();

while($row = mysql_fetch_assoc($result)) {
    $records[] = $row;
}

mysql_close($con);

echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:39:55.997

我看到三个问题：

1.  您的 PHP 脚本正在寻找一个名为 的 GET 参数`jsoncallback`，但这不是 jQuery 默认发送的名称，即`callback`. 要么更改您的 PHP 以使用`callback`：

    ```
    // Here ----v
    echo $_GET['callback'] . '(' . json_encode($records) . ');'; 
    ```

    ...或将此选项添加到您的[`ajax`](http://api.jquery.com/jQuery.ajax/)调用中以告诉 jQuery 使用`jsoncallback`：

    ```
    jsonp: "jsoncallback", 
    ```

    您可以使用浏览器开发工具中的“网络”选项卡来检查调用并查看查询字符串的样子，以确保它们匹配。

2.  您的 ajax 选项中有错字，`datatype:'jsonp'`而不是`dataType:'jsonp'`（`T`in`dataType`必须为大写），因此 jQuery 根本不会尝试进行 JSON-P 调用，它会尝试 XHR。

3.  您在问题中说过 PHP 页面位于`http://localhost:8080/getData.php`，但`url`您给出的 jQuery 是`http://localhost/getData.php`（没有端口）。

# batch-file - 使用批处理更改所有名为 LaunchNFW 的键

> ID：13968090
> 
> 赞同：0
> 
> 时间：2012-12-20T08:36:37.197
> 
> 标签：batch-file, registry

嗨，我有一个名为的注册表项`LaunchNFW`，它在注册表中出现 x 次。

我需要将此键的每个实例的值从 1 更改为 3

有没有办法做到这一点`reg query`？

我为此使用标准的Windows批处理...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:27:10.583

干得好

```
for /f "usebackq" %%a in (`reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion"`) do (
for /f "usebackq" %%b in (`reg query "%%a" /v *`) do (
if "%%b"=="LaunchNFW" reg add "%%a" /v "%%b" /d "3" /f
)
) 
```

您可以使用它来遍历一个配置单元中的每个键。只需为您要检查的每个配置单元重复代码，并且显然更改为值将存在的最高根键。

# c# - 获取 ASP.NET 中继器以仅显示来自 SQL Server 数据源的 3 个最新条目

> ID：13968091
> 
> 赞同：0
> 
> 时间：2012-12-20T08:36:39.010
> 
> 标签：c#, asp.net, sql-server

我找不到我的问题的答案，但我认为你可以帮助我:)

我在 ASP.NET 网站中有一个中继器，我只想显示 3 个最新条目。我知道这是可能的，但我无法让它工作.. :(

我的中继器看起来像这样

```
 <asp:Repeater ID="Repeater1" runat="server" DataSourceID="Sql_letter">
    <ItemTemplate>
        <p><%# Eval("Wishlist_Letter_FirstName") %> fra <%# Eval("Wishlist_Letter_City") %></p>

        <p>Har skrevet til Julemanden</p>

        <asp:TextBox ID="r" runat="server" Text='<%# Eval("Wishlist_Letter_Message")%>' TextMode="MultiLine" CssClass="txt_message" BackColor="Transparent" BorderWidth="0" BorderStyle="None" ReadOnly="True"></asp:TextBox>

        <br /> <br />
    </ItemTemplate>
</asp:Repeater> 
```

我的`SqlDataSource`：

```
<asp:SqlDataSource ID="Sql_letter" runat="server" 
     ConnectionString="<%$ ConnectionStrings:sqlconnection %>" 
     SelectCommand="SELECT * FROM [Wishlist_Letter]">
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:38:53.713

你能不能把你的选择命令改成类似

```
SELECT TOP 3 * FROM [Wishlist_Letter] ORDER BY EntryDate DESC 
```

在上面的查询中，哪里`EntryDate`是明确的字段来表明它是否会在前 3 名中？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T08:39:25.793

`SelectCommand`应该是这样的

```
SELECT TOP 3 * FROM [Wishlist_Letter] ORDER BY [Timestamp] DESC 
```

但你需要`Timestamp`在你的桌子上有一个字段或相同的东西。ms sql 上没有保证返回最新三个条目的自然排序。

在你的情况下，它应该是

```
SELECT TOP 3 * FROM [Wishlist_Letter] ORDER BY [ID] DESC 
```

# ios5 - 我想从警报视图中获取值（登录 ID 和密码）并检查是否使用情节提要进行转换

> ID：13968093
> 
> 赞同：0
> 
> 时间：2012-12-20T08:36:45.230
> 
> 标签：ios5

// 当我单击按钮时，我希望出现一个警报视图，然后输入登录详细信息，如果详细信息正确，则移动到下一个视图，否则不。这该怎么做 ？

// 现在，当我单击按钮时，myButton 方法结束时会出现警报视图。如何控制流量？

```
- (IBAction)myButton:(id)sender
    {
        flag= [self alertview];

        if (flag)
        {
            SecondViewController *svc =[self.storyboard instantiateViewControllerWithIdentifier:@"vinay"];
            [svc setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
            [self presentViewController:svc animated:YES completion:nil];
        }
    }

-(int)alertview
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Login"
                                                    message:[NSString stringWithFormat:@"Enter Login ID and Password:"]
                                                   delegate:self cancelButtonTitle:@"Ok"
                                          otherButtonTitles:nil];
    flag=1;

    [alert setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
    [alert show];
    return flag;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:53:28.300

我为解决此问题所做的工作如下：

1.  需要符合`UIAlertViewDelegate`.h 文件中的协议
2.  然后需要为`UIAlertView`. 方法是`alertView:clickedButtonAtIndex:`。
3.  然后在方法中必须跟踪使用按钮索引点击的按钮并访问警报视图使用`NSString *pass = [alertView textFieldAtIndex:0].text;`代码的文本字段。（这里的 0 是第一个文本框）

享受编码:)

# html - 读取一列中的所有图像，将 base64 字符串结果包含到图像 html 标记中。XPage

> ID：13968094
> 
> 赞同：2
> 
> 时间：2012-12-20T08:36:53.493
> 
> 标签：html, database, image, base64, xpages

如您所见，它可以将图像数据从 Lotus 数据库转换为 base64 字符串。问题是我手动输入了图像的文件名（第 4 行）。我的数据库中有很多图像，只有我的“btnbg.jpg”可以读取，其他的则不能。我的代码如何读取数据库列中的所有图像文件名。另外，如何将结果 base64 字符串包含到我的 html 图像标记中。非常感谢你，上帝保佑

```
var testView:NotesView = database.getView("uploadforms");
    var col:NotesDocumentCollection = testView.getAllDocumentsByKey("1");
    var testDoc:NotesDocument = col.getFirstDocument();
    var attachment:NotesEmbeddedObject = testDoc.getAttachment("btnbg.jpg");
    var input:java.io.InputStream = attachment.getInputStream();

    var base64Enc = new sun.misc.BASE64Encoder();
    var output = new java.io.ByteArrayOutputStream();
    base64Enc.encode( input, output );

    return output.toString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:37:38.523

> “我的代码如何读取数据库列中的所有图像文件名”

您需要将附件名称打印到列中。例如借助“@AttachmentNames”函数。您需要使用“ViewNavigator”类准确地遍历列

如果您更喜欢使用文档，请使用一些方法从文档中获取所有附件，例如文档和 RT 项目上的“EmbeddedObjects”方法。

> “如何将结果 base64 字符串包含到我的 html 图像标签中”

你可以在 css 的帮助下做到这一点： background:url(data:image/jpeg;base64,...

在 css base64 中使用大量图片是个坏主意。

# css - 包含 z-index 是否会增加浏览器处理时间？

> ID：13968097
> 
> 赞同：9
> 
> 时间：2012-12-20T08:37:07.903
> 
> 标签：css, performance, z-index

我正在开发一个完全基于 CSS 的网站，需要`z-index`多次使用，价值范围`-10000`从`50000`.

是否`z-index`显着增加了受支持的浏览器渲染网页的时间？是否被`z-index`认为是一种好的做法，或者是否有其他替代方案（1）渲染速度更快和/或（2）更普遍接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:44:48.190

Z-index 是相对的，不是绝对的。z-index 为 1,000,000 的元素呈现在 z-index 较低的元素之前和 z-index 较高的元素之后。如果并不意味着浏览器将创建 1,000,000 层。

我认为重要的是不同 z-index 的数量（更准确地说是[堆叠上下文）。](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:51:17.823

您始终可以尝试确保元素在文档中的顺序正确。文档中较低的任何内容都将呈现在文档中较高的任何内容之前。实现服务器端可能不是最简单的事情，但这肯定符合您的要求：

1) 渲染速度更快
最有可能是因为这是默认的 DOM 渲染机制。
2）更普遍接受
当然。

# jquery - jquery 更改多个类以影响 z-index 和其他属性

> ID：13968104
> 
> 赞同：1
> 
> 时间：2012-12-20T08:37:31.813
> 
> 标签：jquery, class, addclass, removeclass

我不确定该怎么做。我正在开发一个功能，它将使用几个不同的特性，并且在这个阶段才刚刚开始。

我的目标是让 4 个不同的盒子相互堆叠，有点像一个标签。我有它，这样我就可以选择其中一个盒子，它会出现在前面，但我希望能够相应地更改剩余 3 个盒子的类别，以便它们整齐地堆叠。

**JavaScript**：

```
<script>
    $(document).ready(function () {
        $('#sites div').click(function () {
            $('.topZ-index').removeClass('topZ-index');
            $(this).addClass('topZ-index');
        });
    });
</script> 
```

**HTML**：

```
<div id="sites">
    <div id="layer1" class="layer1"></div>
    <div id="layer2" class="layer2"></div>
    <div id="layer3" class="layer3"></div>
    <div id="layer4" class="layer4"></div>
</div> 
```

这是我到目前为止所拥有的，每个 div 都有一个 margin-top 和 margin-left 从它重叠的那个居中。

我看到很多在两个项目之间切换的例子，但这涉及到 4 个不同的层

我知道我最终会希望使用缓动和计时器文件以及其他一些文件将选定的框平滑地滑动到前面，并为未选定的项目添加轻微的淡入淡出。我不确定在这个开始阶段有多少轴承。

在这一点上，我只需要正确堆叠盒子。

我的目标是在视觉上获得类似于从牌组中拉出一张牌并将其放在顶部的效果。看来，我可能还需要更改 id，但我不确定在 jquery 中这有多大可能。

在任何使用萤火虫的情况下，这是我选择一个框后 html 需要看起来的示例。

```
<div id="sites">
    <div id="layer1" class="layer1"></div>
    <div id="layer4" class="layer2 topZ-index"></div>
    <div id="layer2" class="layer3"></div>
    <div id="layer3" class="layer4"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:02:38.420

这假设您有实现堆叠顺序的类 zindex1 到 zindex4。

```
$(document).ready(function() {
    $('#sites div').click(function() {
        $('#sites div').removeClass('zindex1 zindex2 zindex3 zindex4');
        $(this).addClass('zindex1');
        var index = 2;
        var top = $(this).attr('id');
        $('#sites div').each(function() {
            if ($(this).attr('id') != top) {
                $(this).addClass("zindex" + index);
                index++;
            }
        });
    });
});​ 
```

看我的[小提琴](http://jsfiddle.net/barmar/HJAUp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:06:41.517

您可以通过操纵 z-index 来做到这一点。例如：

```
 $('#sites div').click(function () {

     var max_zindex = 0;

     $('.layer').each(function() {
            var zindex =  parseInt($(this).css("z-index"), 10);
         if(zindex > max_zindex) 
            max_zindex = zindex;                     
     });
     max_zindex++; 
    $(this).css('z-index', max_zindex);
  }); 
```

在这里查看工作演示：http: [//jsfiddle.net/viralpatel/h3WaL/2/](http://jsfiddle.net/viralpatel/h3WaL/2/) ​</p>

# git - 如何在 git 中合并 2 个分支，只保留一个分支的更改

> ID：13968106
> 
> 赞同：2
> 
> 时间：2012-12-20T08:37:40.457
> 
> 标签：git

我有两个分支。一个是`master`，另一个是 i `myBranch`，它们看起来像这样：

```
master
   |
   |  myBranch
   |  /
   | /
   |/
   | 
```

我想将它们合并到一个分支中，保留分支中的所有更改`master`，而不保留`myBranch`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T08:47:13.170

`ours`使用合并策略合并分支：

```
git checkout -b new-branch master
git merge -s ours myBranch 
```

`-X ours`请注意，这与 Koraktor 的回答中最初所述的完全不同。`-X ours`是`recursive`策略的一个选项，它仍然会保留所有更改，但**在发生冲突时**`myBranch`更喜欢 master的解决方案。，另一方面，完全忽略由 引入的变化。**`-s ours``myBranch`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:43:10.680

只需删除分支： `git branch -d "myBranch"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T08:41:08.090

```
$ git checkout -b new-branch
$ git merge -s ours myBranch 
```

如果您希望这直接发生在 上`master`，只需省略第一个命令。

PS：“user4815162342”是对的，我的意思`-s`不是`-X`。**

# cas - CAS服务器刷新登录页面后要求认证

> ID：13968116
> 
> 赞同：0
> 
> 时间：2012-12-20T08:38:20.577
> 
> 标签：cas, jasig

我正在使用 CAS 服务器。开始时我提供用户名和密码，然后我重定向到所需的页面。但是当我刷新页面时，它再次重定向到上一页并询问用户名和密码。

谁能帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:58:58.937

看起来您在应用程序客户端并没有真正通过身份验证：您使用什么 CAS 客户端？`ticket`当您返回应用程序时是否有参数？这张票是否由您的 CAS 服务器验证？

# r - 用 plyr 分割数据框

> ID：13968125
> 
> 赞同：1
> 
> 时间：2012-12-20T08:39:06.147
> 
> 标签：r, split, statistics, dataframe, plyr

我找到了关于这个主题的几个问题/答案，但我无法解决我的问题......所以我会问我的方式。对不起，如果它很明显。

我准备了一个与 ggplot2 一起使用的数据框（z2）。该数据框包含一个带有实数的“值”列，一个标识测试参数的“名称”列，一个作为每个人的唯一 ID 的“loghos”列，以及一个作为结果变量的“statut”列。

我可以使用以下代码轻松地根据每个“名称”的“状态”绘制“值”：

```
pt <- ggplot(z2, aes(y = value, x = statut))
pt + geom_boxplot(aes(colour=statut)) + facet_wrap(~name, scales="free_y") 
```

在数据框中，我为每个“loghos”（不同时间点的几个样本）的每个“名称”重复了值。

我只想绘制每个“姓名”和每个“患者”的最小值。所以我尝试为此使用 plyr，我写道：

```
x = ddply(z2, .(loghos,name), function(x) return(min(x,na.rm=T))) 
```

但是，我收到此错误消息，现在我不知道该怎么办？

```
Erreur dans FUN(X[[1L]], ...) : 
  only defined on a data frame with all numeric variables 
```

我敢肯定这没什么大不了的，但我找不到如何正确写 i ！

提前致谢，

朱利安

编辑：下面提供了data.frame的示例

```
y = z2[sample(nrow(z2),20),c(1,2,3,9,11,12,13)]
y
      cleBilan   name  value   loghos sexe age    statut
80612   328347   plaq 384.00 31218139    M  21 transfert
36304   363835     gb   5.62 41416171    M  72   service
59346   267744 lympho   9.90 30628552    F  22   service
62746   388270 lympho   8.70 41620223    M  78   service
81046   342228   plaq 185.00 41120284    M  19   service
67400   323055   mono   3.10 31273421    F  45   service
35572   335928     gb  16.16 41178061    F  22 transfert
71136   256960 neutro  10.65 30401746    M  71 transfert
34324   293368     gb  16.20 30894579    F  30   service
69010   383939   mono   6.90 41574890    M  22   service
63665   236360   mono   4.40 29970714    M  71   service
31366   233999     gb   7.20 29959612    F  18   service
60867   317932 lympho  12.00 31229099    M  50   service
74487   355581 neutro  10.68 41154330    F  23   service
65520   265864   mono   7.00 30583193    M  78   service
36553   375590     gb   7.10 41489078    M  61   service
65849   268730   mono   3.90 30652360    M  89     deces
80813   354964   plaq 404.00 41120284    M  19   service
31271   232524     gb   6.30 29934806    M  36   service
72789   291335 neutro  11.00 30923095    F  35   service 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:10:22.713

评论中的答案摘要：

正如 baptiste 评论的那样：“`ddply`将数据拆分为小块；您需要为其提供一个函数，该函数将块（data.frame）作为输入并返回 data.frame。`summarise`就是这样一个函数，但`min`它本身不是” .

所以为了减少初始data.frame，正确的代码是：

```
x = ddply(z2, .(loghos, name, statut), summarise, value = min(value,na.rm=T)) 
```

在这个函数中，只有`loghos`和`name`被`value`使用，因为`statut is unique for each`loghos `. I added it to the list to keep its value in the`x` data.frame，因为它是输出变量。

# java - 错误：光标在没有事先关闭的情况下完成

> ID：13968129
> 
> 赞同：2
> 
> 时间：2012-12-20T08:39:12.287
> 
> 标签：java, android, sqlite, android-cursor

我在 android 上有一个基于谷歌地图的应用程序。
简而言之，该应用程序的工作原理是：首先将一些样本数据（包含纬度/经度对进入数据库），读取它们，最后将它们绘制在地图叠加层上。

当我在 Android 2.3.3 (Gingerbread) 模拟器和我的 HTC Desire S 上运行此应用程序时，它运行良好。但是当我在 Android 4.0.3 (ICS) 模拟器中尝试相同的应用程序时（在清单文件中进行更改后）对于 sdk 版本）`Cursor Finalized without Prior Close()`当我尝试执行活动时出现错误。出现 NullPointer 异常并且应用程序崩溃。

**StackTrace pastebin 在**[这里](http://pastebin.com/6E8PADtx)
**更新了方法**

```
public int getAllEntries() {
        //int entryCount;
        Cursor cursorE = db.rawQuery("SELECT COUNT(LATS) FROM myPROmapData",
                null);
try {
            if (cursorE.moveToFirst()) {
                return cursorE.getInt(0);
            }   
            return cursorE.getInt(0);
            } finally {
              cursorE.close();
            }
    }

--
public Double[] PopulateLats() {

        //id = getAllEntries();

        int LatcolumnIndex = 0;

        Cursor cursor = db.rawQuery("SELECT LATS FROM myPROmapData", null);
        try {
            Double myLats[] = new Double[cursor.getCount()];;
            if (cursor.moveToFirst()) {

                for (int i = 0; i < cursor.getCount(); i++)
                    {
                        myLats[i] = cursor.getDouble(LatcolumnIndex);
                        cursor.moveToNext();
                        //cursor.close();
                    }  

            }   
            return myLats;
            } finally {
              cursor.close();
            }
}

--

public Double[] PopulateLons(){
        int LoncolumnIndex = 0;
        Cursor cursor2 = db.rawQuery("SELECT LONS FROM myPROmapData", null);
        try {
            Double myLons[] = new Double[cursor2.getCount()];;
            if (cursor2.moveToFirst()) {

                for (int i = 0; i < cursor2.getCount(); i++)
                    {
                        myLons[i] = cursor2.getDouble(LoncolumnIndex);
                        cursor2.moveToNext();
                        //cursor.close();
                    }  

            }   
            return myLons;
            } finally {
              cursor2.close();
            }
} 
```

这是我的活动代码：

```
public class MapMaster extends MapActivity {
    /** Called when the activity is first created. */
    private List mapOverlays;
    private Projection projection;
    private MapController mc;
    private MapView mapView;
    private GeoPoint gP;
    // private GeoPoint gP2;
    private MyOverlay myoverlay;
    //Author: Kanishk

    DBAdapter db = new DBAdapter(this);
    public Double GetStartLat4gp()
    {   
        Double Lat1 = null;
        db.open();

        //db.insertQuote(); //INSERTING SAMPLE DATA INTO TABLE

        Double[] dtaStartLat = null;
        dtaStartLat = db.PopulateLats();

        for(int z=0;z<(dtaStartLat.length);z++)
        {
            //System.out.println("START_LAT:");
            //System.out.println(dtaStartLat[z]);
            Lat1 = dtaStartLat[z];
            break;
        }
        db.close();
        return Lat1;
    }
    public Double GetStartLon4gp()
    {   
        Double Lon1 = null;
        db.open();

        //db.insertQuote(); //INSERTING SAMPLE DATA INTO TABLE

        Double[] dtaStartLon = null;
        dtaStartLon = db.PopulateLons();

        for(int z=0;z<(dtaStartLon.length);z++)
        {
            //System.out.println("START_LAT:");
            //System.out.println(dtaStartLon[z]);
            Lon1 = dtaStartLon[z];
            break;
        }
        db.close();
        return Lon1;
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map_master);
        //Double myStartLat = null;
        //Double myStartLon = null;

        mapView = (MapView) findViewById(R.id.mapview1);// Creating an instance
                                                        // of MapView
        mapView.setBuiltInZoomControls(true);// Enabling the built-in Zoom
                                                // Controls

        //mapView.setTraffic(true);
        //mapView.setStreetView(true);

        GeoPoint gP = new GeoPoint((int)(GetStartLat4gp() * 1E6), (int)(GetStartLon4gp() * 1E6));
        //gP = new GeoPoint(28570000, 77320000);// Creating a GeoPoint

        System.out.println("v START CORDS v");
        System.out.println(GetStartLat4gp());
        System.out.println(GetStartLon4gp());
        System.out.println("^ START CORDS ^");

        mc = mapView.getController();
        mc.setCenter(gP);

        mc.setZoom(15);// Initializing the MapController and setting the map to
                        // center at the
        // defined GeoPoint

        mapOverlays = mapView.getOverlays();
        projection = mapView.getProjection();

        myoverlay = new MyOverlay();
        mapOverlays.add(myoverlay);

        db.open();

        //db.CreateSampleData();  //create sample data
        //db.SyncNclean();      //SYNC - CLEAN

        if(db.doesDatabaseExist(this, "PROdb")){
            Toast.makeText(this, "EXISTS", Toast.LENGTH_SHORT).show();
            db.SyncNclean();
            Toast.makeText(this, "CLEANING..CREATING SAMPLE DATA..", Toast.LENGTH_SHORT).show();
            db.CreateSampleData();
            Toast.makeText(this, "Sample Data Created", Toast.LENGTH_SHORT).show();

        }
        else{
            Toast.makeText(this, "DOES NOT EXISTS", Toast.LENGTH_SHORT).show();
            db.SyncNclean();
            Toast.makeText(this, "CLEANING..CREATING SAMPLE DATA..", Toast.LENGTH_SHORT).show();
            db.CreateSampleData();
            Toast.makeText(this, "Sample Data Created", Toast.LENGTH_SHORT).show();

        }

        long id = 0;
        id = db.getAllEntries();
        CharSequence text = "The data was added successfully!\nData Totals = " + id + "Records";
        System.out.println(text);
        db.close();
    }
    public Double[] GetLats()
    {   
        db.open();

        //db.insertQuote(); //INSERTING SAMPLE DATA INTO TABLE

        Double[] dtaMyLats = null;
        dtaMyLats = db.PopulateLats();
        for(int z=0;z<(dtaMyLats.length);z++)
        {
            System.out.println("LATS:");
            System.out.println(dtaMyLats[z]);
        }
        db.close();
        return dtaMyLats;
    }
    public Double[] GetLons()
    {
        db.open();
        Double[] dtaMyLons = null;
        dtaMyLons = db.PopulateLons();
        for(int z=0;z<(dtaMyLons.length);z++)
        {
            System.out.println("LONS:");
            System.out.println(dtaMyLons[z]);
        }
        db.close();
        return dtaMyLons;
    }
    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    class MyOverlay extends Overlay {

        public MyOverlay() {

        }
        //Author: Kanishk

        public void draw(Canvas canvas, MapView mapv, boolean shadow) {
            super.draw(canvas, mapv, shadow);
            // Configuring the paint brush
            Paint mPaint = new Paint();
            mPaint.setDither(true);
            mPaint.setColor(Color.RED);
            mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(4);

            Double[] LatArr = GetLats();
            Double[] LonArr = GetLons();

        //generate geopoints dynamically based on coordinates from index @ array
            //author: Kanishk

            int count = LatArr.length;
            //System.out.println(count);

            for(int i=0;i<count-1;i++)
            {

                    Double lat1;
                    Double lon1;
                    Double lat2;
                    Double lon2;
                    lat1 = LatArr[i];
                    lon1 = LonArr[i];
                    //System.out.println(LatLon[i][j]);
                    /*System.out.println("<< BREAK >>");
                    System.out.println(lat1);
                    System.out.println(lon1);
                    */
                    lat2=LatArr[i+1];
                    //lat1 = null;
                    lon2=LonArr[i+1];
                    //lon1 = null;
                    //i++;

                    if(lat2!=null){
                    GeoPoint gp1 = new GeoPoint((int)(lat1 * 1E6), (int)(lon1 * 1E6)); //
                    GeoPoint gp2 = new GeoPoint((int)(lat2 * 1E6), (int)(lon2 * 1E6)); //
                    System.out.println("<< coord1 >>");
                    System.out.println(lat1);
                    System.out.println(lon1);
                    System.out.println("<< coord2 >>");
                    System.out.println(lat2);
                    System.out.println(lon2);

                    Point p11 = new Point();
                    Point p22 = new Point();

                    Path mypath = new Path();
                    projection.toPixels(gp1, p11);
                    projection.toPixels(gp2, p22);
                    mypath.moveTo(p22.x, p22.y);// *
                    mypath.lineTo(p11.x, p11.y);// *

                    canvas.drawPath(mypath, mPaint);
                    }

            }
        // logic end

        }

    }
} 
```

DBAdapter 类：

```
public class DBAdapter {
    int id = 0;
    //public static final String KEY_ROWID = "_id";
    public static final String KEY_PHID = "phID";
    public String KEY_LAT = "LATS";
    public String KEY_LON = "LONS";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "PROdb";
    private static final String DATABASE_TABLE = "myPROmapData";
    private static final int DATABASE_VERSION = 9;

    //private static final String DATABASE_CREATE = "create table myPROmapData (_id integer primary key autoincrement, phID integer, LATS real not null, LONS real not null);";
    private static final String DATABASE_CREATE = "create table myPROmapData (phID integer, LATS real not null, LONS real not null);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            try {
            db.execSQL(DATABASE_CREATE);
            }
            catch (Exception e){
                Log.e(TAG,"Error: onCreate db");
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            try {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS myPROmapData");
            onCreate(db);
            }
            catch (Exception e){
                Log.e(TAG,"Error: onUpgrade db");
            }
        }
    }

    // ---opens the database---
    public DBAdapter open() throws SQLException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    // ---closes the database---
    public void close() {
        DBHelper.close();
    }

    // ---insert sample data into the database---
    public long CreateSampleData() {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_PHID, 100);

        initialValues.put(KEY_LAT, 28.4588);
        initialValues.put(KEY_LON, 77.0725);
        db.insert(DATABASE_TABLE, null, initialValues);

        initialValues.put(KEY_LAT, 28.4719);
        initialValues.put(KEY_LON, 77.0722);
        db.insert(DATABASE_TABLE, null, initialValues);

        /*initialValues.put(KEY_LAT, 28.5700);
        initialValues.put(KEY_LON, 77.3200);*/
        initialValues.put(KEY_LAT, 28.4795);
        initialValues.put(KEY_LON, 77.0800);
         db.insert(DATABASE_TABLE, null, initialValues);

        /*initialValues.put(KEY_LAT, 28.4700);
        initialValues.put(KEY_LON, 77.0300);*/
        initialValues.put(KEY_LAT, 28.4813);
        initialValues.put(KEY_LON, 77.0931);
         db.insert(DATABASE_TABLE, null, initialValues);

        /*initialValues.put(KEY_LAT, 27.1833);
        initialValues.put(KEY_LON, 78.0167);*/
        initialValues.put(KEY_LAT, 28.4820);
        initialValues.put(KEY_LON, 77.1023);
         db.insert(DATABASE_TABLE, null, initialValues);

        /*initialValues.put(KEY_LAT, 26.4583);
        initialValues.put(KEY_LON, 80.3173);*/
        initialValues.put(KEY_LAT, 28.4804);
        initialValues.put(KEY_LON, 77.1251);

        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    public int getAllEntries() {
        //int entryCount;
        Cursor cursorE = db.rawQuery("SELECT COUNT(LATS) FROM myPROmapData",
                null);
        if (cursorE.moveToFirst()) {
            //entryCount = cursorE.getInt(0);
            return cursorE.getInt(0);
            //return entryCount;
        }
                        //  CLOSING CURSOR
        cursorE.close(); 
        return cursorE.getInt(0);

        //return entryCount;
    }

    public boolean doesDatabaseExist(ContextWrapper context, String dbName) {
        File dbFile = context.getDatabasePath(dbName);

        return dbFile.exists();
    }

    public void SyncNclean(){

        Log.w(TAG, "Sync'ing with Master Server..");

        //sync master server here

        Log.w(TAG, "Sync Complete..");
        //Log.w(TAG, "Cleaning old data..");

        db.execSQL("DROP TABLE IF EXISTS myPROmapData");
        DBHelper.onCreate(db);

        Log.w(TAG, "Cleaning completed..");
    }

    public Double[] PopulateLats() {

        //id = getAllEntries();

        int LatcolumnIndex = 0;

        Cursor cursor = db.rawQuery("SELECT LATS FROM myPROmapData", null);
        Double myLats[] = new Double[cursor.getCount()];;
        if (cursor.moveToFirst())
        {                       
            for (int i = 0; i < cursor.getCount(); i++)
            {
                myLats[i] = cursor.getDouble(LatcolumnIndex);
                cursor.moveToNext();
                cursor.close();
            }  

        }
        // Original location for cursor.close()

        return myLats;

    }

    public Double[] PopulateLons(){
        int LoncolumnIndex = 0;
        Cursor cursor2 = db.rawQuery("SELECT LONS FROM myPROmapData", null);
        Double myLons[] = new Double[cursor2.getCount()];;
        if (cursor2.moveToFirst())
        {                       
            for (int i = 0; i < cursor2.getCount(); i++)
            {
                myLons[i] = cursor2.getDouble(LoncolumnIndex);
                cursor2.moveToNext();
                cursor2.close(); //third try
            }
            // second tried here: cursor2.close();
        }
        // Original location for cursor.close()
        //db.close();

        return myLons;
    }

} 
```

任何帮助将不胜感激。谢谢阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:47:04.313

空指针异常的解决方法是：

GetStartLat4gp 或 GetStartLon4gp 返回 null。

除此之外，当你重写这个方法时，代码会更稳定

```
public int getAllEntries() {
    //int entryCount;
    Cursor cursorE = db.rawQuery("SELECT COUNT(LATS) FROM myPROmapData",
            null);
    try {
      if (cursorE.moveToFirst()) {
          return cursorE.getInt(0);
      }   
      return cursorE.getInt(0);
    } finally {
      cursorE.close();
    }
} 
```

在它的原始草稿中，它没有关闭光标，因为它确实提前返回了。

使用 try {} finally { close resources } 作为一种好的样式，以确保在任何情况下都关闭所有资源（甚至是意外异常）

除此之外，将另一个光标的 close() 移回循环外，它会在循环内引发错误。（最好，也使用 try / finally ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:24:05.670

我相信这是因为你在 finally 之前做了一个 return 语句，所以在这种情况下 finally 永远不会被执行，因此数据库不会被关闭

您应该移动从光标获取值并将其设置为变量，然后在函数底部返回变量，如下所示。

```
public int getAllEntries() {
    //int entryCount;
    Cursor cursorE = db.rawQuery("SELECT COUNT(LATS) FROM myPROmapData",
            null);
    int value = 0
    try {
      if (cursorE.moveToFirst()) {
          value = cursorE.getInt(0);
      }   
      value = cursorE.getInt(0);
    } finally {
      cursorE.close();
    }
    return value;
} 
```

此外，作为旁注，您的 db.rawQuey 也应该在 try 语句中，否则如果查询因任何原因而失败，应用程序将强制关闭。

# c++ - POCO：如何在 c++ 中使用 poco 将图像上传到 webser

> ID：13968134
> 
> 赞同：8
> 
> 时间：2012-12-20T08:39:29.503
> 
> 标签：c++, image, upload, poco-libraries

我正在尝试将图像上传到远程 Web 服务器。我使用过 HTMLForm 和 FilePartSource。我能够成功地将图像上传到本地服务器（即 loclhost），但是当我尝试将其上传到远程服务器时，从远程 Web 服务器收到的响应是“需要 411 长度”。我试图设置 request.setContentLength(sizeofimagefile) 但仍然是同样的问题。任何人都可以指导我解决问题或。这是我的代码。

```
 HTMLForm htmlform;
htmlform.set("aaaaaa", "bbbbbbb");
htmlform.set("cccccc", "ddddddd");
htmlform.setEncoding(HTMLForm::ENCODING_MULTIPART);

PartSource * pFileSrc = new FilePartSource("filename", "application/octet-stream");

std::istream& mystream = pFileSrc->stream();
mystream.seekg(0, std::ios::end);
int uiLength = mystream.tellg();

    htmlform.addPart("file", pFileSrc);

URI uri("yyy");

    HTTPClientSession session(uri.getHost(), uri.getPort());        
HTTPRequest post_req(Poco::Net::HTTPRequest::HTTP_POST,"xxx",HTTPMessage::HTTP_1_1);        
post_req.setKeepAlive(true);
htmlform.prepareSubmit(post_req);

std::ostream& oustr = session.sendRequest(post_req);
htmlform.write(oustr);

HTTPResponse res;
std::istream& rs = session.receiveResponse(res);

std::cerr << rs.rdbuf(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-06T11:43:09.317

```
std::ostream& oustr = session.sendRequest(post_req);
htmlform.write(oustr); 
```

您的代码无法将表单数据分配给请求对象。因此，当您调用 session.sendRequest 时，会向服务器发送一个空请求。要将 HTMLForm 正确转换为 HTTPRequest，您必须这样编写 -

> htmlform.write(session.sendRequest(post_req));

对我有用的图片上传代码是 -

> ```
>  HTTPRequest request(HTTPRequest::HTTP_POST, "/fileupload/upload_file.php",    HTTPMessage::HTTP_1_1);
>     HTMLForm form;
>     form.setEncoding(HTMLForm::ENCODING_MULTIPART);
>     form.set("entry1", "value1");
>     form.set("entry2", "value2");
>     form.addPart("file", new FilePartSource("/home/abc/Pictures/sample.png"));
>     form.prepareSubmit(request);
> 
>     HTTPClientSession *httpSession = new HTTPClientSession("localhost");
>     httpSession->setTimeout(Poco::Timespan(20, 0));
>     form.write(httpSession->sendRequest(request));        
> 
>     Poco::Net::HTTPResponse res;
>     std::istream &is = httpSession->receiveResponse(res);
>     Poco::StreamCopier::copyStream(is, std::cout); 
> ```

相应的上传服务器使用标准 PHP 代码上传 HTML 表单文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:03:26.467

如果您可以将文件上传到本地服务器但不能使用远程服务器，首先您应该检查您的远程 Apache/PHP 是否有上传限制。在远程服务器中尝试 phpinfo()。

[http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/](http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/)

如果没有，你应该修改你的代码......

来自 Poco 文档，网址为：http: [//www.appinf.com/docs/poco/Poco.Net.HTMLForm.html](http://www.appinf.com/docs/poco/Poco.Net.HTMLForm.html)

> *HTML表格：*
> 
> HTMLForm(const HTTPRequest & request, std::istream & requestBody);
> 
> 从给定的 HTTP 请求创建一个 HTMLForm。**上传的文件会被静默丢弃**。

并使用此构造函数：

> *HTML表格：*
> 
> HTMLForm( const HTTPRequest & request, std::istream & requestBody, PartHandler & handler);
> 
> 从给定的 HTTP 请求创建一个 HTMLForm。**上传的文件被传递给给定的 PartHandler**。

在您的示例中，您应用的是什么构造函数？

另一方面，

> *添加部分：*
> 
> void addPart( const std::string & name, PartSource * pSource ); 向表单添加部分/附件（文件上传）。该表单拥有 PartSource 的所有权，并在不再需要时将其删除。**仅当表单的编码集为“multipart/form-data”时才会发送该部分**

尝试将“multipart/form-data”与 addPart 和 HTMLForm 的第二个构造函数一起使用。

如果它不起作用，请尝试使用像 Wireshark 这样的网络嗅探器来检查您发送的内容。

*检查您的请求的 Content-Length 标头是否具有 sizeof(your image) + sizeof("aaaaaa" 和 "cccccc" params)。*或者尝试使用 GET 方法而不是 POST 发送您的表单。

让我知道它是否有效。

问候

# javascript - $.mobile.changePage() 更改页面没有数据（白屏）？

> ID：13968135
> 
> 赞同：3
> 
> 时间：2012-12-20T08:39:33.120
> 
> 标签：javascript, jquery, jquery-mobile, dialog, html5-video

我的页面中有很多链接，每个链接都有两个属性，即格式和 src。

```
<a class="play" src="'.$p['video_path'].'" format="'.$p['video_type'].'"></a> 
```

它点击了什么，我得到了它的 2 attr 并像这样在 js 中制作 HTML。

```
$(".play").live('click',function() {
   var src = $(this).attr('src');
   var fmt = $(this).attr('format');
   var html = '<video width="200" height="240" controls> <source src="'+src +'" type="video/'+ fmt +'"> </video>'; 
   $("#myVideoDiv").html(html);
   $.mobile.changePage( $("#myVideoDiv"), { transition: 'pop' } );
 });
<div data-role="dialog" id="myVideoDiv"></div> 
```

当我点击任何视频链接时，我的浏览器 url 会像这样改变

```
http://pp.local/maps/maps/40295472#&ui-state=dialog 
```

但什么都没有显示只是一个白屏。虽然它可以工作，但`$("#myVideoDiv").html( html );`我可以通过 Firbug 看到 HTML。Firebug 中没有错误或警告:(

基本上我需要做的是，我想在 jquery Mobile 对话框中显示每个视频，就像我们在普通 jquery UI 中一样，如下面的代码。我也需要在这里做同样的事情，但是使用 jquery mobile 对话框。

```
 $(".watchVideo").live('click', function() {
    if( $('div.ui-dialog').length ) {
      $('div.ui-dialog').remove();
    }
    var path  = $(this).attr('rel');
    var title = $(this).attr('title');        
    var $dialog = $('<div>', {
        title: 'Title'
    }).dialog({
        autoOpen: false,
        modal: true,
        width: 600,
        height: 500,
       closeOnEscape: false
    });

    var tab = '<table id="video_player" style="margin: 10px 10%;"><tr><td><object codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"><param value="'+path+'" name="src"><param value="true" name="autoplay"><param value="true" name="controller"><embed pluginspage="http://www.apple.com/quicktime/download/" controller="true" style="height:300px;width:400px;background-color:#D9EBFB" autoplay="true" target="myself" src="'+path+'"></object></td></tr></table>';
    $('<div id="updateContent">').html( tab ).appendTo( $dialog );
    $dialog.dialog('open');
    return false;    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:46:12.123

我已经成功地重现了您的问题，不幸的是我不能 100% 确定这是问题所在。我认为您的页面/对话框设置有误。

看看我的工作示例，尝试在您的应用程序中使用它：http: [//jsfiddle.net/Gajotres/5REkc/](http://jsfiddle.net/Gajotres/5REkc/)。此示例使用对话框作为视频容器：

```
$('#index').live('pagebeforeshow',function(e,data){   
    $('#show-video').live('click', function(e) {
        $('#video-content').append('<video width=450px height=300px controls="controls"><source src="http://dev.swinginsam.com/_files/testvid_01.ogv" type="video/ogg"></video>');  
        $.mobile.changePage("#second", { transition: "slide"});
    });        
}); 
```

我还为您创建了另一个示例。这个要好得多，它使用弹出窗口作为视频容器。与弹出对话框不同，它将调整大小以适应视频标签：http: [//jsfiddle.net/Gajotres/vscrU/](http://jsfiddle.net/Gajotres/vscrU/)。

```
$('#index').live('pagebeforeshow',function(e,data){   
    $('#show-video').live('click', function(e) {
        $('#popup-video').append('<video width=600px height=300px controls="controls"><source src="http://dev.swinginsam.com/_files/testvid_01.ogv" type="video/ogg"></video>');  
        $('#popup-video').popup("open");
    });        
});

<div data-role="popup" id="popup-video" data-tolerance="15,15" class="ui-content"</div> 
```

数据容差在这里，所以弹出窗口可以有一个填充。没有它，视频播放器会溢出弹出容器。

还有一件事，我可以看到您正在使用 php 进行内容生成。在这种情况下，弹出窗口是更好的解决方案。与对话框（充当另一个页面，并且是另一个页面）不同，弹出窗口是单个页面的一部分，因此我在服务器端生成中具有更好的可用性。

**警告：**

我的示例仅适用于 Firefox 浏览器。我只使用了一个 ogg 视频源。视频来源取自[这篇](https://stackoverflow.com/questions/12154307/jquery-mobile-single-page-app-video-dynamic-changing-video)文章。

# jquery - 有人知道一个好的滑块处理jQuery插件吗？

> ID：13968137
> 
> 赞同：0
> 
> 时间：2012-12-20T08:39:36.577
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-slider

我目前正在使用标准的 jquery ui 滑块控件（带有手柄的控件，而不是轮播图像滑块）。虽然功能还可以，但我发现很难从中得到我想要的东西。主要问题是自定义栏本身 - 我想要轨道内的手柄（标准是更多图形均衡器），并添加 + - 控件。

所以，要么我正在寻找扩展/改进版本或自定义滑块。

有人用过这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:48:23.900

也许这是您正在寻找的东西 [http://www.egrappler.com/jquery-slidertrackbar-smart-slider/](http://www.egrappler.com/jquery-slidertrackbar-smart-slider/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T08:41:46.860

访问[http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)并获取 NIVO-Slider ，您将在那里找到所需的一切，包括安装指南

# c++ - Linux 中 PHP 的 utf8_decode 函数的 C++ 等价物

> ID：13968142
> 
> 赞同：0
> 
> 时间：2012-12-20T08:39:57.447
> 
> 标签：c++, linux, unicode, utf-8

> **可能重复：**
> [C++ & Boost：编码/解码 UTF-8](https://stackoverflow.com/questions/6140223/c-boost-encode-decode-utf-8)

我需要将`wstring`具有 UTF-8 编码文本的（错误地）转换为它自己的新更正 wstring。

PHP 的`ut8_decode`函数完美地处理了这个问题。我也可以通过 iconv 做到这一点：

从：

```
# cat wtf  | grep 1856 | awk '{print $2}'
å°ç³å·ãçç¾ 
```

至：

```
#cat wtf  | grep 1856 | awk '{print $2}'| iconv -f utf8 -t ISO-8859-1
小石川　玉美 
```

在 C# 中，我能够通过以下方式获得这种行为：

```
public static string Utf8Decode(string utf8me) {
    return Encoding.UTF8.GetString(Encoding.GetEncoding(28591).GetBytes(utf8me));
} 
```

我的大部分搜索都提出了特定于 Windows 的解决方法。由于我在 Linux 上，我假设我想使用 iconv，但我不确定如何在 C++ 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:59:44.747

`iconv`也是一个函数`iconv()`

请参阅 GLIBC 文档：

*   [http://www.gnu.org/software/libc/manual/html_node/Generic-Charset-Conversion.html](http://www.gnu.org/software/libc/manual/html_node/Generic-Charset-Conversion.html)
*   [http://www.gnu.org/software/libc/manual/html_node/iconv-Examples.html](http://www.gnu.org/software/libc/manual/html_node/iconv-Examples.html)

# asp.net - Global.asax Application_Error 是异步的吗？

> ID：13968147
> 
> 赞同：3
> 
> 时间：2012-12-20T08:40:30.400
> 
> 标签：asp.net

我需要使用复杂的长时间工作逻辑来处理丢失的请求文件。

我可以这样做，`Application_Error`但不确定它本身是否异步？

如果需要 5 分钟或更长时间才能工作，此处理程序会一直阻止其他用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:54:49.780

这`Application_Error`一部分，是从您加载的页面中调用的，所以问题是页面或处理程序是否是异步的。

如果你不使用会话，当然如果你不使用其他同步锁，比如互斥锁，或者数据库打开/读/写

这是为什么 ？因为会话正在锁定完整处理，请查看此问题/答案： [调用 aspx 页面以随机返回图像缓慢的](https://stackoverflow.com/questions/9694117/call-aspx-page-to-return-an-image-randomly-slow)
[ASP.NET 服务器不会异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously/12285168#12285168)
[尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous)
[Web 应用程序在处理共享相同的另一个 Web 应用程序时被阻止session](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)  
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)  
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)  
[文件上传和结果池会杀死 ASP.NET Web 应用程序](https://stackoverflow.com/questions/13295313/file-upload-and-result-pooling-kills-asp-net-web-app)

所以为了简单起见，这`Application_Error`只是一个静态函数调用，但连接到页面或处理程序的处理。确保页面或处理程序没有相互阻塞，一切正常。

另一方面，5 分钟的处理，如果您尝试将 500 个放在一起而不将它们放在查询列表中，您可能会遇到其他问题。

我只是做了一个简单的测试，放置`System.Threading.Thread.Sleep(20000);`并`Application_Error`出错，然后继续加载其他页面，并且可以正常工作。

# indexing - 用新的索引结构扩展 neo4j

> ID：13968149
> 
> 赞同：0
> 
> 时间：2012-12-20T08:40:35.893
> 
> 标签：indexing, neo4j

假设我想实现一个新的索引结构（例如，`BITMAT`），它将提高某些查询的效率（以路径查询为例`BITMAT`）。如何扩展`Neo4j`以使具有指定查询模式的每个查询都使用我的新索引而不是 Neo4j 的本机索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:17:22.783

你可以实现一个新的 IndexProvider 挂钩到正常的 Neo4j 索引系统。然后它会自动暴露给 Cypher。您可以在此 SpatialIndexProvider 中看到一个示例，将子图查询投影到索引查找中并针对它运行 Cypher 查询：

[https://github.com/neo4j/spatial/blob/master/src/main/java/org/neo4j/gis/spatial/indexprovider/LayerNodeIndex.java](https://github.com/neo4j/spatial/blob/master/src/main/java/org/neo4j/gis/spatial/indexprovider/LayerNodeIndex.java)

使用 Cypher 进行测试：

[https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/IndexProviderTest.java#L141](https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/IndexProviderTest.java#L141)

# android - 为什么这个 xml 布局会使我的应用程序崩溃？

> ID：13968150
> 
> 赞同：0
> 
> 时间：2012-12-20T08:40:36.153
> 
> 标签：android, xml

此布局用作 listView 中项目的布局。我的布局非常简单，一切正常，但现在我对其进行了一些更改，当它尝试加载时它正在崩溃我的应用程序。不知道我做错了什么

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:weightSum="8"
    android:layout_width="fill_parent"
    android:layout_height="75dp">

   <TextView android:id="@+id/priceText"
        android:layout_weight="2"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" 
        android:layout_marginLeft="5dp" />

   <LinearLayout
        android:layout_weight="5"
        android:layout_height="fill_parent"
        android:weightSum="2" 
        android:orientation="vertical">

       <TextView android:id="@+id/storeText"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="right|bottom"
            android:textStyle="bold"
            android:textSize="22dp"
            android:textColor="#000000"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp" />

       <TextView android:id="@+id/distanceText"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="right|top"
            android:textSize="16dp"
            android:textColor="#545454"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp" />

   </LinearLayout>

   <TextView
       android:layout_height="fill_parent"
       android:layout_alignParentBottom="true"
       android:layout_alignParentTop="true"
       android:layout_marginBottom="5dp"
       android:layout_marginTop="5dp"
       android:layout_weight="1"
       android:gravity="right|center_vertical"
       android:text=">"
       android:textColor="#000000"
       android:textSize="36dp"
       android:textStyle="bold" 
       android:layout_marginRight="5dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:49:52.557

**当你使用 android:layout_weight 放 layout_width="0dip"**

工作代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:weightSum="8"
    android:layout_width="fill_parent"
    android:layout_height="75dp">

   <TextView android:id="@+id/priceText"
        android:layout_weight="2"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" 
        android:layout_marginLeft="5dp" />

   <LinearLayout
        android:layout_weight="5"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:weightSum="2" 
        android:orientation="vertical">

       <TextView
           android:id="@+id/storeText"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_marginBottom="5dp"
           android:layout_marginTop="5dp"
           android:layout_weight="1"
           android:gravity="right|bottom"
           android:textColor="#000000"
           android:textSize="22dp"
           android:textStyle="bold" />

       <TextView
           android:id="@+id/distanceText"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_marginBottom="5dp"
           android:layout_marginTop="5dp"
           android:layout_weight="1"
           android:gravity="right|top"
           android:textColor="#545454"
           android:textSize="16dp" />

   </LinearLayout>

   <TextView
       android:layout_height="fill_parent"
       android:layout_width="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_alignParentTop="true"
       android:layout_marginBottom="5dp"
       android:layout_marginTop="5dp"
       android:layout_weight="1"
       android:gravity="right|center_vertical"
       android:text=">"
       android:textColor="#000000"
       android:textSize="36dp"
       android:textStyle="bold" 
       android:layout_marginRight="5dp" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:44:47.063

您需要在所有视图中添加`android:layout_width=".."`和：`android:layout_height=".."`

```
 <TextView android:id="@+id/storeText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right|bottom"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

   <TextView android:id="@+id/distanceText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right|top"
        android:textSize="16dp"
        android:textColor="#545454"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

   </LinearLayout>

  <TextView
   android:layout_height="fill_parent"
   android:layout_width="0dp"
   android:layout_alignParentBottom="true"
   android:layout_alignParentTop="true"
   android:layout_marginBottom="5dp"
   android:layout_marginTop="5dp"
   android:layout_weight="1"
   android:gravity="right|center_vertical"
   android:text=">"
   android:textColor="#000000"
   android:textSize="36dp"
   android:textStyle="bold" 
   android:layout_marginRight="5dp" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:46:14.620

您给 android_layout_weight 的每个元素都没有给出宽度。如果你给了这个权重，所以元素占据了一定的空间，你应该给布局 android:layout_width="0" 所以它将权重作为宽度

每个元素都需要高度和宽度标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:49:05.020

你错过了一些布局宽度和布局高度属性。我已经添加了所有项目。

请使用以下代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:weightSum="8"
    android:layout_width="fill_parent"
    android:layout_height="75dp">

   <TextView android:id="@+id/priceText"
        android:layout_weight="2"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:layout_width="wrap_content"

        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" 
        android:layout_marginLeft="5dp" />

   <LinearLayout
        android:layout_weight="5"
        android:layout_height="fill_parent"
        android:weightSum="2" 
        android:layout_width="wrap_content"
        android:orientation="vertical">

       <TextView android:id="@+id/storeText"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="right|bottom"
            android:textStyle="bold"
            android:textSize="22dp"

            android:textColor="#000000"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp" />

       <TextView android:id="@+id/distanceText"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="right|top"
            android:textSize="16dp"
            android:textColor="#545454"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp" />

   </LinearLayout>

   <TextView
       android:layout_height="fill_parent"
       android:layout_alignParentBottom="true"
       android:layout_alignParentTop="true"
       android:layout_marginBottom="5dp"
       android:layout_marginTop="5dp"
       android:layout_weight="1"
       android:gravity="right|center_vertical"
       android:text=">"
        android:layout_width="fill_parent"

       android:textColor="#000000"
       android:textSize="36dp"
       android:textStyle="bold" 
       android:layout_marginRight="5dp" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:03:32.057

我不知道你想通过这个布局在这里实现什么，但你的 xml 中几乎没有错误。

1.  在不同的地方缺少宽度和高度。考虑添加这些。

2.  您正在添加 LinearLayout 作为父标签，但使用 RelativeLayout 标签，如

    android:layout_alignParentBottom="true" android:layout_alignParentTop="true"

    考虑删除那些。

3.  正确使用`android:layout_weight=""` 和`android:layout_height="" , android:layout_width=""`

如果需要任何澄清或帮助，请发表评论

# javascript - 一口气找到所有搜索结果

> ID：13968154
> 
> 赞同：0
> 
> 时间：2012-12-20T08:40:56.830
> 
> 标签：javascript, jsp

我有一个文本框、一个搜索按钮和一个页面中的大量文本。我想要做的是，我想在文本框中输入一个字符串，然后单击搜索按钮。当我这样做时，我希望在该页面中突出显示所有结果。我如何实现这一目标？

这是我的代码的 POC-

```
<%@page import="java.util.ArrayList"%>
<%@page import="java.util.List"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Auto Completion</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<%
            List<String> strList = new ArrayList<String>();
            strList.add("\"red\"");
            strList.add("\"orange\"");
            strList.add("\"blue\"");
            strList.add("\"pink\"");
            strList.add("\"brown\"");
            strList.add("\"yellow\"");
            strList.add("\"violet\"");
            strList.add("\"indigo\"");
            strList.add("\"green\"");
            strList.add("\"grey\"");
            strList.add("\"black\"");
%>
<script>
    $(function() {
        var availableTags = <%=strList.toString() %>;
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
    <script>
    function selected () {
        // What to do? 
    }
    </script>
</head>
<body>

    <%=strList.toString()%>
    <div class="ui-widget">
        <label for="tags">Tags: </label>
        <input id="tags" />

        <input type="button" onclick="javascript:selected();" value="Search"/>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:50:55.380

您可以用类似的东西替换所有出现的搜索字符串

```
<span class="highlighted">search string</span> 
```

在哪里

```
.highlighted {
   background-color: yellow;
} 
```

在进行下一次搜索之前，请记住从上一次搜索中删除突出显示。

这只是给您一个想法，您不必使用 a`span`并且您可以根据自己的喜好设置突出显示的样式。此外，最好将搜索和替换限制为包含文本的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:15:11.137

使用正则表达式对象：http: [//jsfiddle.net/DQqLs/](http://jsfiddle.net/DQqLs/)

然后，您可以从文本框中传入字符串，它会使用 span 标签突出显示匹配项。

```
<style>
.highlight{
background:yellow;
}
</style>

<input type="text" id="txtBox" />
<input type="button" id="btn" value="search"/>
    <p id="pText">
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).
    </p>

<script>
    var btn = document.getElementById('btn'),
        txtBox = document.getElementById('txtBox'),
        p = document.getElementById('pText');

        btn.onclick = function(){
           p.innerHTML = highlightText(txtBox.value,p.textContent);
        };

    function highlightText(searchStr, rawText){
        var re = new RegExp(searchStr,"g"),
            highlightedText='';
        hlText = rawText.replace(re, function(e){
            return '<span class="highlight">' + e +'<\/span>';
        });
        return hlText;
     }

</script> 
```

# ios5 - 是否有 iOS 5 后备智能应用横幅？

> ID：13968164
> 
> 赞同：2
> 
> 时间：2012-12-20T08:41:33.193
> 
> 标签：ios5

从 iOS 6 开始，当在网站上设置以下元标记时，Safari 将显示智能应用横幅 (https://developer.apple.com/news/index.php?id=10082012b)：

```
<meta name="apple-itunes-app" content="app-id=311507490"/> 
```

我也很想在装有 iOS 5 的设备上看到这个。我一直在寻找一个 jQuery 后备智能横幅，但还没有找到。

是否有 iOS 5 后备智能横幅插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:46:57.823

找到了。jQuery 智能横幅：

[http://jasny.github.com/jquery.smartbanner/#](http://jasny.github.com/jquery.smartbanner/#)

# asp.net-mvc-3 - 是什么触发了 asp.net MVC 3 中的不显眼验证检查

> ID：13968174
> 
> 赞同：6
> 
> 时间：2012-12-20T08:42:18.263
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我试图弄清楚不显眼的验证在 asp.net mvc 3 中是如何工作的。

我想知道单击提交表单时触发验证检查的原因。脚本 jquery.validate.unobtrusive.js 如何绑定到表单提交事件？

我也想知道如何手动防止/触发此检查。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T08:56:32.010

`jquery.validate.unobtrusive`是 的验证器`jquery.validate`。它就像一个扩展。

`jquery.validate.unobtrusive`实现所有事件并`jquery.validate`使用它。

您可以查看 jQuery.validate.js 文件并查看它使用了表单的提交。

```
// validate the form on submit
this.submit( function( event ) {
   ... 
```

如果您想自己触发验证，可以致电

```
$("#myform").valid() 
```

# java - 错误的资源泄漏警告？

> ID：13968184
> 
> 赞同：4
> 
> 时间：2012-12-20T08:42:58.520
> 
> 标签：java, eclipse, compiler-warnings, java-7, try-with-resources

我在此代码段中收到有关“s”和“p”的资源泄漏警告。这个警告有效吗？

```
try (StringWriter s = new StringWriter(); PrintWriter p = new PrintWriter(s)) {
    p.print(InetAddress.getLocalHost().getHostName());
    p.print('/');
    Enumeration<NetworkInterface> e = NetworkInterface.getNetworkInterfaces();
    while (e.hasMoreElements()) {
        NetworkInterface i = e.nextElement();
        System.out.println(i);
        if (i.getHardwareAddress() == null || i.getHardwareAddress().length == 0)
            continue;
        for (byte b : i.getHardwareAddress())
            p.printf("%02x", b);
        return s.toString();
    }
    throw new RuntimeException("Unable to determine Host ID");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:48:36.457

在这个片段中 - 不。除了由 JVM 管理的资源外，没有可言的资源。

# java - 我应该为秒表应用程序使用什么“绘图”方法？

> ID：13968185
> 
> 赞同：0
> 
> 时间：2012-12-20T08:43:04.927
> 
> 标签：java, swing, time, jpanel

我正在寻找在java中制作一个简单的（现在）秒表应用程序，我最终想将它移植到android设备，但首先我只是在一个简单的计算机运行版本上工作，我想知道我应该做什么至于在屏幕上显示经过的时间，所以对于我只有一个带有开始和停止按钮的 JPanel，实际显示时间的最佳方式是什么？我觉得简单地绘制数字并擦除它们既慢又低效，我该怎么做才能使 GUI 快速更新为正确的当前时间？我知道如何使用 System.currentTimeMillis() 计算经过的时间，我只是在寻找在屏幕上显示可以快速更新的时间的最佳方式。我想把它显示到至少百分之一秒，这意味着屏幕需要经常改变。

我应该只使用 JLabel 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:55:35.053

您可以将小时、分钟、秒、毫秒分成不同的“JLabel”。

所以使用`Timer`or`ExecutorService`你会`JLabel`经常更新 Seconds 和 Milliseconds 。其他`JLabel`的仅在需要时更新，即经过一分钟。

# java - Quartz - 在一周中的几天和时间每两周安排一次工作

> ID：13968187
> 
> 赞同：6
> 
> 时间：2012-12-20T08:43:15.853
> 
> 标签：java, jakarta-ee, cron, quartz-scheduler

我需要创建将：

*   开始一个 2012 年 12 月 20 日
*   结束日期 = 2017 年 12 月 31 日
*   将在周日和周一每 2 周发生一次
*   下午 5 点起火。

这个 cron 表达式有效吗？

```
Date start = 12/20/2012;
Date endDate = 12/31/2017;
SimpleTrigger trigger = newTrigger()
    .withIdentity("trigger3", "group1")
    .startAt(startDate) 
    .withSchedule(cronSchedule("* * 17 0 0/2 *,SUN,MON").build())
    .endAt(endDate)
    .build; 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:16:44.017

我建议您根据您的 cron 表达式进行单元测试。感谢 Van de Voorde [Toni](http://www.devexp.eu/2009/08/18/quartz-test-a-cron-expression/)，您可以基于此代码，并使用它来验证“nextValidTimeAfter”是否符合您的期望：

```
import java.text.ParseException;
import java.util.Date;

import org.quartz.CronExpression;

public class CronTester {

    public static void main(String[] args) throws ParseException {
        final String expression = "* * 17 0 0/2 *,SUN,MON";
        final CronExpression cronExpression = new CronExpression(expression);

        final Date nextValidDate1 = cronExpression.getNextValidTimeAfter(new Date());
        final Date nextValidDate2 = cronExpression.getNextValidTimeAfter(nextValidDate1);

        System.out.println(nextValidDate1);
        System.out.println(nextValidDate2);

    }
} 
```

# javascript - 如何从javascript变量中删除$？

> ID：13968191
> 
> 赞同：0
> 
> 时间：2012-12-20T08:43:38.460
> 
> 标签：javascript

> **可能重复：**
> [从字符串中删除字符](https://stackoverflow.com/questions/4846978/remove-characters-from-a-string)

我有一个变量`p`，我想从中删除`$`。该变量将是一个数字，例如`$10.56`。我怎样才能做到这一点？我认为可以使用它来完成，`.replace('$','')`但我不太确定如何实现这一点。

这是我的javascript代码：

```
function myFunction() {
  var p = parseFloat(document.getElementById('p_input').value);
  var q = parseFloat(document.getElementById('q_input').value);
  if (!q){
  document.getElementById('t').value = '';
  }
  else {
  var t = q * p;
  document.getElementById('t_output').value = t;
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:45:36.957

这很简单：

```
var myString = "$15.62"
console.log(myString.replace('$', ''));
//Logs: "15.62" 
```

请注意，这个新值实际上并没有“保存”到`myString`，您必须自己将其分配给一个变量：

```
var newString = myString.replace('$', ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:46:06.693

试试这个，假设 p_input 和 q_input 的值是货币值：

```
var p = parseFloat(document.getElementById('p_input').value.replace('$', ''));
var q = parseFloat(document.getElementById('q_input').value.replace('$', '')); 
```

# jsp - 避免输出循环中的空白

> ID：13968198
> 
> 赞同：1
> 
> 时间：2012-12-20T08:44:17.197
> 
> 标签：jsp, jstl

我使用这个 JSTL 语句......

```
<c:forEach var="i" begin="1" end="5">
  <c:out value="${i}"/> 
</c:forEach> 
```

结果是：

```
1 2 3 4 5 
```

有没有一种简单的方法可以避免输出行出现空白？我想看到这样的输出：

```
12345 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:23:35.757

```
<c:forEach var="i" begin="1" end="5"><c:out value="${i}"/></c:forEach> 
```

或者干脆

```
<c:forEach var="i" begin="1" end="5">${i}</c:forEach> 
```

# ios - “收到内存警告”消息后 iOS UITableView 内容松动

> ID：13968208
> 
> 赞同：1
> 
> 时间：2012-12-20T08:44:44.060
> 
> 标签：ios, uitableview, cocoa-touch, uikit, didreceivememorywarning

（最初我发布了这个，`Apple Developer Network`四天后没有任何回应，所以我在这里复制/粘贴）

ARC 已启用。

在我的课堂上，我有一个`UITableViewController`财产，

`@property (nonatomic, strong) UITableViewController* tableViewControllerSectionMenu;`

用于保存表格视图`UIPopoverController`。

此代码`UITableViewController`在`viewDidLoad:`

```
self.tableViewControllerSectionMenu = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
self.tableViewControllerSectionMenu.tableView.dataSource = self.dataSource;
self.tableViewControllerSectionMenu.tableView.delegate = self; 
```

这工作正常，直到发生内存警告。

之后，表格是空白的。

我尝试`reloadData`在调用 popover 的地方放置，但这并没有改变。

有人知道为什么会发生这种情况以及如何解决这个问题吗？

通过谷歌搜索，我找到了几种解决方案，但在我的情况下都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:55:56.423

我认为收到内存警告时您的数据已被清除。你有没有实施`didReceiveMemoryWarning`或`viewDidUnload`任何机会？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:25:58.180

当收到内存警告消息时，屏幕上当前不可见的所有视图都将被清除。它们应该在以后需要时重新创建。

重新创建它们也意味着再次附加委托和数据源。由于在 ViewController X 中收到内存警告，并且它的视图在屏幕上，因此我的表格视图被清除了。

但由于我没有从 X 移动，委托和数据源没有再次附加，就像在`viewDidLoad`.

为了避免从 X 退一步，我为我的表格视图创建了一个新类，在其中`viewDidLoad`我附加了委托和数据源。

# wpf - 温莎城堡和 WPF 导航

> ID：13968210
> 
> 赞同：1
> 
> 时间：2012-12-20T08:44:45.837
> 
> 标签：wpf, castle-windsor

我有一个 WPF 应用程序，其中我已经使用 Castle Windsor 类型的工厂来创建视图和视图模型。应用程序本身有一个 sdi 接口，并使用内置的 WPF 页面和框架组件进行导航。

因为我想在导航时释放页面上使用的所有视图模型，所以我尝试使用范围生活方式来实现这一点。基本思想是在显示新页面之前处理当前范围并创建一个新范围。

我现在的问题是城堡范围实现中的空引用异常是随机的。有时代码运行没有问题，有时它不会工作。

异常发生在 Castle.Windsor\MicroKernel\Lifestyle\Scoped\CallContextLifetimeScope.cs:Line 81 中的 Castle.MicroKernel.Lifestyle.Scoped.CallContextLifetimeScope.GetCachedInstance(ComponentModel instance, ScopedInstanceActivationCallback createInstance) 中。

您基本上认为这是一个好方法还是有更好的解决方案？如果你说这样也行，你对异常有什么想法吗？

谢谢马库斯

# c - Raspberry Pi 上 armv6 中 log10 数学函数的错误结果

> ID：13968217
> 
> 赞同：15
> 
> 时间：2012-12-20T08:45:12.987
> 
> 标签：c, arm, raspberry-pi

我有这个非常简单的代码：

```
#include <stdio.h>
#include <math.h>
int main()
{
    long v = 35;
    double app = (double)v;
    app /= 100;
    app = log10(app);
    printf("Calculated log10 %lf\n", app);
    return 0;
} 
```

此代码在 x86 上完美运行，**但在 arm 上不起作用，结果为 0.00000。**一些想法？

其他信息：

操作系统：linux 3.2.27

我用 ct-ng 构建 arm 工具链：arm-unknown-linux-gnueabi-

libc 版本 2.13

输出`gcc -v`：

使用内置规范。COLLECT_GCC=arm-unknown-linux-gnueabi-gcc COLLECT_LTO_WRAPPER=/opt/x-tools/arm-unknown-linux-gnueabi/libexec/gcc/arm-unknown-linux-gnueabi/4.5.1/lto-wrapper 目标：arm -unknown-linux-gnueabi 配置为：/home/mirko/misc/rasppi-ct-ng-files/.build/src/gcc-4.5.1/configure --build=x86_64-build_unknown-linux-gnu --host =x86_64-build_unknown-linux-gnu --target=arm-unknown-linux-gnueabi --prefix=/opt/x-tools/arm-unknown-linux-gnueabi --with-sysroot=/opt/x-tools/ arm-unknown-linux-gnueabi/arm-unknown-linux-gnueabi//sys-root --enable-languages=c --disable-multilib --with-pkgversion=crosstool-NG-1.9.3 --enable-__cxa_atexit --disable-libmudflap --disable-libgomp --disable-libssp --with-host-libstdcxx='-static-libgcc -Wl,-Bstatic,-lstdc++,-Bdynamic -lm' --with-gmp=/home /mirko/misc/rasppi-ct-ng-files/.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:13:10.583

ARM Linux 发行版上的浮点支持并非微不足道。因此，您应该使用与您的系统相匹配的工具链，即操作系统和硬件，并使用正确的编译开关。

首先，您需要了解 ARM 的调用约定，即**“调用函数时如何传递参数？”** . ARM 是 RISC 架构，只能在寄存器上工作。没有直接操作内存的指令。如果您需要更改内存中的值，您首先需要将其加载到寄存器中，对其进行修改，然后您需要将其存储回内存中。

当您调用一个函数时，您可能需要向它传递参数，您可以将参数放在堆栈（内存）上，但由于 ARM 只能使用寄存器，因此您的函数可能首先会将它们加载回寄存器。为了避免这种浪费，ARM 调用约定使用寄存器来传递参数。但是，由于 ARM 的寄存器数量有限，调用约定还要求您仅将前四个 (r0-r3) 寄存器用于前四个参数，其余的仍必须使用堆栈来传递。

第二件事是早期的 ARM 内核没有任何浮点支持，操作是在软件中实现的。*（这仍然是通过 gcc 支持的`-mfloat-abi=soft`。）*

我们可以通过以下代码段轻松演示这意味着什么。

```
float pi2(float a) {
    return a * 3.14f;
} 
```

编译这个 via`-c -O3 -mfloat-abi=soft`和`obdump`ing 给了我们

```
00000000 <pi2>:
   0:   f24f 51c3   movw    r1, #62915  ; 0xf5c3
   4:   b508        push    {r3, lr}
   6:   f2c4 0148   movt    r1, #16456  ; 0x4048
   a:   f7ff fffe   bl  0 <__aeabi_fmul>
   e:   bd08        pop {r3, pc} 
```

正如您所看到的（实际上它是不可见的:)）`pi2`获取它的参数`r0`，填充`pi constant`并`r1`使用`__aeabi_fmul`将它们相乘并返回结果`r0`。由于`__aeabi_fmul`也使用相同的调用约定，有关的详细信息`r0`不可见。我们所有的函数都是为了填充`r1`和委托给`__aeabi_fmul`.

当向 ARM 添加浮动硬件支持时（同样是因为架构风格），它带有自己的一组寄存器*(s0, s1, ...)*。

如果我们编译相同的代码片段`-c -O3 -mfloat-abi=softfp`并转储我们得到

```
00000000 <pi2>:
   0:   eddf 7a04   vldr    s15, [pc, #16]  ; 14 <pi2+0x14>
   4:   ee07 0a10   vmov    s14, r0
   8:   ee27 7a27   vmul.f32    s14, s14, s15
   c:   ee17 0a10   vmov    r0, s14
  10:   4770        bx  lr
  12:   bf00        nop
  14:   4048f5c3    .word   0x4048f5c3 
```

正如您现在所看到的，编译器不会创建对的调用，`__aeabi_fmul`而是`vmul.f32`在将位于的参数移动`r0`到`s14`并填充`3.14`到后创建一条指令`s15`。在乘法指令之后，它将可用的结果移`s14`回，`r0` **因为该函数的任何调用者都会因为调用约定而期望它**。

现在，如果您将`pi2`其视为某个第三方提供给您的库，您可以理解 soft 和 softfp 实现都为您做同样的事情，您可以互换使用它们。如果系统为您提供它们，那么您不会关心您的应用程序是否在支持硬件浮点的系统上运行。这对于让旧软件在新硬件上运行非常好。

然而，在保持兼容性的同时，这种方法引入了在 ARM 寄存器和 FP 寄存器之间移动值的开销。这显然会影响性能，并由一个新的调用约定解决，`hard`由`gcc`. 这个新约定规定，如果您的函数中有浮点参数，您可以使用与普通寄存器交错的浮点寄存器，也可以在浮点寄存器中返回浮点值`s0`。

再次，如果我们编译我们的代码片段`-c -O3 -mfloat-abi=hard`并转储我们得到

```
00000000 <pi2>:
   0:   eddf 7a02   vldr    s15, [pc, #8]   ; c <pi2+0xc>
   4:   ee20 0a27   vmul.f32    s0, s0, s15
   8:   4770        bx  lr
   a:   bf00        nop
   c:   4048f5c3    .word   0x4048f5c3 
```

你可以看到没有寄存器被移动。`pi2`传入的参数`s0`，编译器创建代码以填充`3.14`并`s15`用于`vmul.f32 s0, s0, s15`获得我们想要的结果`s0`。

这种新约定的大问题是，当您改进编译器生成的代码时，您会完全扼杀兼容性。您不能指望使用`hard`约定构建的应用程序可以与为 softfp 构建的库一起使用，`soft/softfp`而为 softfp 构建的应用程序不会与为 hard 构建的库一起使用。

有关调用约定的更多信息，您应该查看[ARM 的网站](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042e/index.html)。

# android - 如何从网络更新我的活动中的滚动文本？

> ID：13968218
> 
> 赞同：2
> 
> 时间：2012-12-20T08:45:29.870
> 
> 标签：android, scroll, scrollview

嗨，我是 android 新手，我正在开发一个应用程序，是否有任何教程教我如何向我的应用程序添加滚动文本。

我还想使用网站更新文本，即；考虑例如我正在显示某些公司的详细信息，然后我需要从公司网站获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:53:15.180

如果您在滚动视图中添加了带有包装内容的 Textview，则意味着它将自动滚动。textview 属性必须支持多行。

```
<Scrollveiw>
<somelayout>
<textview> </textview>
</somelayout>
</Scrollview> 
```

那个设计应该是这样的。我们有滚动监听器。在滚动监听器的末尾，您可以调用网站并添加网站详细信息。

谢谢

# c++ - 在 C++ 中使用不完整的派生类覆盖方法返回类型

> ID：13968220
> 
> 赞同：1
> 
> 时间：2012-12-20T08:45:41.297
> 
> 标签：c++, multiple-inheritance

我正在用 C++ 编写一个“文件系统”抽象，具有以下继承层次结构：

```
 [Node]
   ^
   |
   +----[Dir]
   |
   +----[File] 
```

Where`Node`定义了与两者相同的所有行为（名称、上次修改时间等），但是，我有一个`Node`称为`getParent()`返回 type的方法`Dir *`。这很好用，因为虽然`Dir.h`显然需要知道 中的实现规范`Node.h`，`Node.h`但不需要知道其中的内容，`Dir.h`所以我可以使用前向声明。伟大的。

但是，我最近决定添加多重继承，这样我就可以在某个时间支持文件系统的“快照”。这些是“实时”`Node` `File`和`Dir`类的只读版本，并且由于实时版本可以读取和写入，我让每个实时版本都从其快照对偶继承：

```
[NodeSnapshot] <------ [Node]
    ^                    ^
    |                    |
    +---[DirSnapshot]<---+---[Dir]
    |                    |
    +---[FileSnapshot]<--+---[File] 
```

因此，`Dir`继承自两个`Node`and `DirSnapshot`，并且`File`继承自两个`FileSnapshot`and `Node`。到目前为止，一切看起来都不错，直到我们得到`getParent()`. 在`NodeSnapshot`中，我返回一个`DirSnapshot *`. 没问题，我可以再次使用前向声明。但是，在`Node`，我想返回`Dir *`。作为程序员，我知道这`Dir`是 的子类型`DirSnapshot`，但是编译器无法知道这一点，因为前向声明中没有嵌入任何有用的信息。

是否可以通知编译器这个前向声明是一个子类，因此它不应该告诉我 of 的返回类型与 of 的返回类型`Dir::getParent()`不同`DirSnapshot::getParent()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:00:05.743

可以在没有任何语言支持的情况下实现/模拟返回类型协变，尽管解决方案往往很冗长。另一方面，相互递归的定义是没有问题的。需要使用调用虚拟私有函数的非虚拟公共（内联）函数。这是一种有用的技术，有些人甚至认为所有接口都应该这样实现。

这是一个例子：

```
// forward declare classes
class A;
class B;
class AA;
class BB;

// parents
class A
{
    virtual B* getB_impl();
public:
    B* getB() { return getB_impl(); }
};
class B
{
    virtual A* getA_impl();
public:
    A* getA() { return getA_impl(); }
};

// kids
class AA : public A
{
    virtual BB* getBB_impl();
    B* getB_impl();
public:
    BB* getB() { return getBB_impl(); }
};
class BB : public B
{
    virtual AA* getAA_impl();
    A* getA_impl();
public:
    AA* getA() { return getAA_impl(); }
};

// implement parents
B* A::getB_impl() { return new B; }
A* B::getA_impl() { return new A; }

// implement kids
B* AA::getB_impl() { return getBB_impl(); }
BB* AA::getBB_impl() { return new BB; }
A* BB::getA_impl() { return getAA_impl(); }
AA* BB::getAA_impl() { return new AA; }

// check
A a; B b;
A* pa; B* pb;
AA aa; BB bb;
AA* paa; BB* pbb;

pa = b.getA();
pb = a.getB();

pa = bb.getA();
pb = aa.getB();

paa = bb.getA();
pbb = aa.getB(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:25:39.067

您应该从项目中排除多重继承。快照与文件系统/目录/文件的当前状态相关联，因此它是数据。当您不想复制功能并从节点继承文件和目录时，您需要继承是可以接受的。但是，由于快照是数据，因此您可能需要将节点数据移动到某个结构，将特殊文件/目录数据移动到其他结构，所有这些都将在某些函数调用中返回或保存/恢复，这将因继承而重载。

```
 [Node]       [Node Data]
   ^
   |
   +----[Dir]   [Node Data][Dir Special Data]
   |
   +----[File]  [Node Data][File Special Data]

virtual void Node::Snapshot()
{
//some code operating with Node Data (saving on disk for ex)
}
virtual void Dir::Snapshot()
{
Node::Snapshot();
//some code operating with Special Dir Data (saving on disk for ex)
}
virtual void File::Snapshot()
{
Node::Snapshot();
//some code operating with Special File Data (saving on disk for ex)
} 
```

# qt - Qt - 从 QBytearray 获取音频幅度

> ID：13968222
> 
> 赞同：1
> 
> 时间：2012-12-20T08:45:49.897
> 
> 标签：qt, audio-recording, waveform, amplitude, qbytearray

我正在尝试使用 Qt (c++) 创建一个程序，该程序可以使用 QAudioinput 和 QIODevice 从我的麦克风录制音频。我进行了一项研究，并想出了一个位于此[页面](http://www.codeproject.com/Articles/421287/Cross-Platform-Microphone-Audio-Processing-Utility)上的示例。这个例子做我需要的。

现在，我正在尝试创建录制声音的音频波形。我想提取音频幅度并将它们保存在 QList 中。为此，我使用以下代码：

```
//Check the number of samples in input buffer
qint64 len = m_audioInput->bytesReady();

//Limit sample size
if(len > 4096)
    len = 4096;
//Read sound samples from input device to buffer
qint64 l = m_input->read(m_buffer.data(), len);
if(l > 0)
{

    //Assign sound samples to short array
    short* resultingData = (short*)m_buffer.data();

     for ( i=0; i < len; i++ )
     {
         btlist.append( resultingData[ i ]);
     }

} 
```

m_audioInput 是 QAudioinput | m_buffer 是 QBytearray | m_input 是 QIODevice | btlist 是 QList

我使用以下 QAudioFormat：

```
m_format.setFrequency(44100); //set frequency to 44100
m_format.setSampleRate(44100); //set sample rate to 44100
m_format.setChannels(1); //set channels to mono
m_format.setSampleSize(16); //set sample sze to 16 bit
m_format.setSampleType(QAudioFormat::SignedInt ); //signed integer sample
m_format.setByteOrder(QAudioFormat::LittleEndian); //Byte order
m_format.setCodec("audio/pcm"); //set codec as simple audio/pcm 
```

当我打印我的 QList 时，使用 qWarning() << btlist.at(int)，我得到一些代表我的音频幅度的正数和负数。我使用 Microsoft Excel 绘制数据并将其与实际声音波形进行比较。

（根据 OP 评论进行编辑）我正在像这样在 Qt 中使用 QPainter 绘制波形

```
 for(int i = 1; i < btlist.size(); i++){ 
       double x1 = (i-(i/1.25))-0.2;
       double y1 = btlist.at(i-1);
       double x2 = i-(i/1.25);
       double y2 = btlist.at(i);
       painter.drawLine(x1,y1,x2, y2); 
  } 
```

**问题**是我的 QList 在像[这样](http://pastebin.com/aYRUPiE5)的幅度数据之间也有很多零 (0) ，如果我将其绘制为波形，它们是一条直线，这是不正常的，因为它会损坏我的波形。我的问题是为什么会这样？这些零 (0) 代表什么？难道我做错了什么？另外，有没有更好的方法从 QBytearray 中提取音频幅度？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:39:42.940

您使用的 drawline 方法采用***整数值***。这意味着大多数时候您的两个`x`索引都是相同的。通过简化您的公式，`x`给定的值`i`是`(i/5.0)`。就其本身而言，这不是问题，因为线条将被叠加，这是一种完美的绘图方式（只是为了确保这是您想要做的）。

您看到的零可能是完全有效的。他们代表***沉默***。

真正的问题是 16 位 PCM 值的范围是`[-32767 , 32768]`. 我怀疑您使用的油漆设备是否涵盖此范围。您需要标准化您的 y 轴。此外，[qt 协调系统似乎没有负值](http://qt-project.org/doc/qt-4.8/coordsys.html)（编辑：不要介意负数，它说逻辑坐标已转换）。

例如，使用以下转换您的 pcm 值：

```
 ((btlist.at(i) / MAX_AMPLITUDE + 1.0) / 2) * paintDevice.height(); 
```

***编辑：***

顺便说一句，您没有使用`l`，这是您读取的真实数据量。如果它不如`len`，您将在缓冲区末尾读取无效值，可能会读取垃圾\读取零\崩溃。

你的缓冲区是一个***字节缓冲区***。并且您使用***短指针***进行迭代。所以无论你使用`l`还是`len`最大**尺寸都需要除以二**。这可能是您图片中零线的原因。

```
 for ( i=0; i < l/2; i++ )
 {
     btlist.append( resultingData[ i ]);
 } 
```

# android - Android RenderScript 与 OpenGL ES 着色语言的关系

> ID：13968223
> 
> 赞同：2
> 
> 时间：2012-12-20T08:45:56.717
> 
> 标签：android, opengl-es

Android的RenderScript和OpenGL Shading Language有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:03:00.560

Renderscript 和 OpenGL ES 着色语言之间没有关系。Renderscript 是一种基于 C99 的语言，用于加速各种设备上的计算工作负载。GL ES 着色器语言是一种受限制的类 C 语言，主要用于图形。

# ruby-on-rails-3.2 - 嵌套路由会引发未定义的方法错误

> ID：13968225
> 
> 赞同：0
> 
> 时间：2012-12-20T08:46:00.867
> 
> 标签：ruby-on-rails-3.2, rails-routing

我有两个资源——用户和列表，我想嵌套它们。一切正常，但是一旦我在用户中嵌套列表，它就会引发错误。它在本地主机上运行良好 - 它只是失败的测试。

这是错误之一：

```
 1) Authentication signin with valid information 
     Failure/Error: before { sign_in user }
     ActionView::Template::Error:
       undefined method `lists_path' for #<#<Class:0x007fecbd7812f0>:0x007fecbad265a0>
     # ./app/views/shared/_create_list.html.erb:2:in `_app_views_shared__create_list_html_erb___4033534818329635871_70327383327980'
     # ./app/views/users/show.html.erb:17:in `_app_views_users_show_html_erb___4510442023060893439_70327361676640'
     # (eval):2:in `click_button'
     # ./spec/support/utilities.rb:7:in `sign_in'
     # ./spec/requests/authentication_pages_spec.rb:32:in `block (4 levels) in <top (required)>' 
```

路线.rb

```
MyApp::Application.routes.draw do
  resources :users do
    resources :lists, only: [:show, :create, :destroy]
  end
  resources :items, only: [:show, :create, :destroy]
  resources :sessions, only: [:new, :create, :destroy] 
```

列表.rb

```
class List < ActiveRecord::Base
  attr_accessible :name
  belongs_to :user
  has_many :items, dependent: :destroy

  validates :name, presence: true, length: { maximum: 60 }
  validates :user_id, presence: true
end 
```

用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  has_many :lists, dependent: :destroy
  has_many :items, through: :lists 
```

任何建议都非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:05:54.973

我必须在我的应用程序中更新我的路径。而不是`list_path(list)`，它必须是`user_list_path(user, list)`

# grails - Grails 项目的 Web 前端工具

> ID：13968228
> 
> 赞同：2
> 
> 时间：2012-12-20T08:46:21.710
> 
> 标签：grails, frontend, gsp

我以前只开发过 Java SE 应用程序，现在我正在尝试在 Grails 中做一些小项目。我的前端开发能力真的很差。好的，我在 Grails 中了解了 GSP 背后的主要思想，但是有很多工具可以简化前端开发，比如 Twitter Bootstrap。

我的问题是，哪些前端工具最适合 Grails 项目并且可以与 GSP 自然结合？

我正在研究的另一个选择是在 Flex 之类的东西上做整个前端，在 Grails 中做这样的事情有多难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:50:31.207

Grails 最适合 HTML+CSS+JS 前端。如果您愿意，您仍然可以使用[Flex](http://grails.org/plugin/flex)、[Vaadin](http://grails.org/plugin/vaadin)、[GWT](http://grails.org/plugin/gwt)等。但是标准的 HTML + 现代框架确实更容易使用。

对于基于 html/css/js 的标准 web 应用程序，我可以推荐[Twitter Bootstrap 插件](http://grails.org/plugin/twitter-bootstrap)（但你不限于它）。这是非常有用的框架，但您应该了解所有基础知识（html 和 css）

# vim - 在 ~/.vim/ 上找不到 OS X 10.8 Mountain Lion 上的 VIM 安装

> ID：13968229
> 
> 赞同：2
> 
> 时间：2012-12-20T08:46:23.377
> 
> 标签：vim, terminal, macvim, sparkup

我是 OS X 和 VIM 的新手，我只是尝试安装**MacVim**（我从 github 下载了快照 66，实际上是 build 7.3.754）。

问题是当我尝试安装Sparkup（https://github.com/rstacruz/sparkup）时，发现安装文件夹不在`~/.vim/`

我在终端上试过这个：

```
ls ~/.vim/ 
```

但它总是回来`ls: /Users/andreoentoro/.vim: No such file or directory`

关于我在这里做错了什么的任何见解？尽管我非常擅长使用 DOS 命令，但我并不真正习惯于终端，但它完全不同。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:54:02.180

这个文件夹、它的子文件夹（如`plugin`、`doc`等）和你`~/.vimrc`的不是由 Vim 创建的。您必须自己创建它们：

```
$ cd
$ mkdir .vim
$ touch .vimrc 
```

如果您按照插件的说明进行操作，以下是您应该得到的：

```
/Users/andreoentoro/.vim
   |-after
   |---plugin
   |-----snipMate.vim
   |-autoload
   |---snipMate.vim
   |-doc
   |---snipMate.txt
   |-ftplugin
   |---html_snip_helper.vim
   |-plugin
   |---snipMate.vim
   |-snippets
   |---(many files)
   |-syntax
   |---snippet.vim 
```

仅仅复制`ftplugin`是不够的。

# ios - 将 GPUImage 过滤器应用于 UIView

> ID：13968233
> 
> 赞同：4
> 
> 时间：2012-12-20T08:46:47.007
> 
> 标签：ios, filter, effect, gpuimage

我有问题。我需要对`Pixelate or Blur`整个`UIView`. 喜欢`eBay iPad`应用程序。

我想用`GPUImage`，但我不知道怎么做。有一种方法可以直接将过滤器应用于 a`GPUImageView`而不通过 a `UIImage`？

主要问题是`UIView`在`iPad`3 号上制作大屏幕截图非常昂贵（`UIWindow`抓取时间为 2 秒）。所以完美的解决方案是直接将过滤器应用于视图，就像 eBay 应用程序一样，但是.. 怎么样？

谢谢大家！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T03:43:43.913

要将视图拉入 GPUImage，您可以使用 GPUImageUIElement 源，该源将 UIView 或 CALayer 作为输入。FilterShowcase 示例应用程序中有一个示例。

这确实依赖于`-renderInContext:`底层 CALayer 的方法，这对于重绘视图可能很昂贵。但是，如果视图是静态的，您只需使用此更新一次，生成的图像将作为纹理缓存在 GPU 上。在那之后应用到它的过滤器操作将非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:50:07.553

您可以通过将`CIFilter`s 应用于您的 views`layer.filters`属性来实现您所追求的外观。查看文档以获取更多信息：

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:52:28.247

也许这适合你？没有尝试过，但在一篇文章中读到过一次：

[堆栈模糊](https://github.com/tomsoft1/StackBluriOS)

抱歉，我再次阅读了你的帖子，这个扩展是关于模糊 UIImage 的，你说这是你不想要的东西......好吧，如果人们去谷歌搜索模糊图像，我还是把它留在这里..对不起 ：（

# c - 控制虚拟化 CPU 的时钟速度？

> ID：13968236
> 
> 赞同：0
> 
> 时间：2012-12-20T08:46:58.863
> 
> 标签：c, throttling, vm-implementation

我目前正在用 c 语言构建一个小型虚拟机，对旧的 16 位 CPU 进行建模，该 CPU 以超慢的时钟速度（几 100 Khz）运行。我将如何限制虚拟机对操作码等的处理速度？或者我什至想要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:42:54.993

正如我在评论中所说，我建议使用某种计时器机制

如果你想匹配一定的速度，我会这样做：

```
1 kHz   1000 Hz    1/s             
----- * ------- * ----- therefore  1 kHz = 1000/s
  1      1 kHz     1 Hz 
```

这意味着每秒发生 1000 次操作，因此请取倒数以找到操作之间的时间量，即 1/1000 秒或 1 毫秒

所以假设你想匹配 125 kHz

```
125 kHz   1000 Hz    1/s             
------- * ------- * ----- therefore  125 kHz = 125000/s
  1      1 kHz       1 Hz 
```

所以 1/125000 s 或 .008 ms 或 8000 ns

希望这可以帮助！

# c++ - 是模板参数的 decltype 的结果

> ID：13968241
> 
> 赞同：0
> 
> 时间：2012-12-20T08:47:12.787
> 
> 标签：c++, templates

结果和`decltype`模板标识符一样吗？（当提到 T 及其值时，正确的术语是什么？）。那就是断言失败的情况？

```
template<typename T>
void foo(T x)
{
  static_assert(std::is_same<decltype(x), T>::value, "decltype check failed");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:50:54.920

变量的类型`x`是 T，因此 static_assert 总是会通过。

# ruby-on-rails - 将局部变量传递给嵌套的局部变量

> ID：13968243
> 
> 赞同：5
> 
> 时间：2012-12-20T08:47:15.433
> 
> 标签：ruby-on-rails, nested, partial-views

我有一个页面大致呈现这样的集合：

index.html.haml

```
= render partial: 'cars_list', as: :this_car,  collection: @cars 
```

_cars_list.html.haml

**编辑：** _cars_list 有关于个别汽车的其他信息。

```
%h3 Look at these Cars!
%ul
  %li Something about this car
  %li car.description
%div
  = render partial: 'calendars/calendar_stuff', locals: {car: this_car} 
```

_calendar_stuff.html.haml

```
- if car.date == @date
  %div 
    = car.date 
```

_cars_controller.rb

```
def index
  @cars = Car.all
  @date = params[:date] ? Date.parse(params[:date]) : Date.today
end 
```

部分日历中发生的情况是，`this_car`它始终是汽车收藏中的第一辆车，即一遍又一遍地打印相同的日期。

如果我将逻辑`_calendar_stuff`移入`cars_list`部分中，则打印结果会按预期更改。

因此，Rails 似乎在`this_car`每次渲染局部时都没有将本地对象传递给嵌套的局部。

有谁知道为什么？

PS如果我用

```
@cars.each do |car|
  render 'cars_list', locals: {this_car: car}
end 
```

我得到同样的行为。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T09:18:58.250

试试这个重构，看看你是否得到了你想要的输出：

**index.html.haml**

```
= render 'cars_list', collection: @cars, date: @date 
```

去掉`partial`关键字，并将`@date`实例变量作为局部变量传入，以将逻辑封装在您的局部变量中。这一点我是从[Rails Best Practices](http://rails-bestpractices.com/posts/27-replace-instance-variable-with-local-variable)得到的。

**_cars_list.html.haml**

```
%h3 Look at these Cars!
%ul
  %li Something about this car
%div
  = render 'calendars/calendar_stuff', car: car, date: date 
```

`@cars`当你作为 a传入时`collection`，这个局部变量将引用一个名为 的奇异局部变量`car`，然后可以将它与现在局部变量一起传递给下一个局部`date`变量。由于正在渲染的部分与此处不同（在下方`calendars/`），`partial`因此此处明确需要关键字。

**_calendar_stuff.html.haml**

```
- if car.date == date
  %div 
    = car.date 
```

**编辑**

建议将调用移至`collection`_cars_list.html.haml **，**但这不适合该问题。

**编辑 2**

如果您仍想将局部变量指定为 ，这是上述代码的版本`this_car`，因此您将覆盖将自动生成的`car`局部变量`collection`。

**index.html.haml**

```
= render 'cars_list', collection: @cars, as: :this_car, date: @date 
```

**_cars_list.html.haml**

```
%h3 Look at these Cars!
%ul
  %li Something about this car
  %li this_car.description
%div
  = render 'calendars/calendar_stuff', this_car: this_car, date: date 
```

**_calendar_stuff.html.haml**

```
- if this_car.date == date
  %div 
    = this_car.date 
```

# javascript - jquery获取背景渐变颜色

> ID：13968244
> 
> 赞同：5
> 
> 时间：2012-12-20T08:47:16.053
> 
> 标签：javascript, jquery, css

我想获取背景颜色并将其放入 `body`，例如我的背景与课堂上的一样`FirstColor`：

```
.FirstColor{
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#ECAA63), to(#E36D0A));
} 
```

现在我想在课堂上获取颜色`#ECAA63`和`#E36D0A`背景`.FirstColor`并替换它们而不是颜色`body`

`body`是：

```
body{
    background: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 350, from(#CEEEEE), to(#98BFF1));
} 
```

将它们的类替换`.FirstColor`为`body`：

> #ECAA63 - 代替 -> #CEEEEE
> #E36D0A - 代替 -> #98BFF1

我试图让背景颜色交流：http: [//jsfiddle.net/rKQwu/](http://jsfiddle.net/rKQwu/)但做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:51:07.030

CSS`background`样式是几个更具体的`background-XXX`属性的组合。

`-webkit-gradient`实际上存储在`background-image`属性中，而不是像`background-color`您在原始代码中那样。当然，它也可以在复合`background`值中使用。

您将需要解析该字符串，如@acjohnson55 的答案所示。

请注意，至少在 Chrome 中，返回的字符串以`rgb(r, g, b)`语法而不是十六进制字符串的形式输出颜色。您需要确保您写回的颜色也包含在`rgb(...)`.

根据您最新的小提琴，请参阅[http://jsfiddle.net/alnitak/xG4SW/ 。](http://jsfiddle.net/alnitak/xG4SW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:26:31.597

首先，为什么不直接切换div的类而不是直接修改样式呢？

但是如果有理由需要这样做，那么您需要从样式值中解析`from`和`to`值。正如我在评论中所说，您的代码在您的 jsfiddle 中似乎很好；问题似乎是您为库选择了 MooTools 而不是 jQuery，在我切换它之后，它按预期工作。我对 Webkit 标准了解不多，但是在 Chrome 23 上，十六进制值被转换为`rgb(r, g, b)`样式三元组，所以我写了一些代码来解析它们：

```
var bgGrad = $('.FirstColor').css("background");
var parseRgb = (function (rgbStr) { return rgbStr.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/); });
var fromStr = bgGrad.match(/from\((.*)\),/)[1];
var fromRgb = parseRgb(fromStr);

var toStr = bgGrad.match(/to\((.*)\)\)/)[1];
var toRgb = parseRgb(toStr);

alert('From rgb: ' + fromRgb.slice(1,4) + '\nTo rgb: ' + toRgb.slice(1, 4));
​ 
```

[在此代码之后（在此处](http://jsfiddle.net/JWC76/2/)的 jsfiddle 中），`fromRgb`是`toRgb`3 个 rgb 值的数组。一旦提取和修改了您认为合适的值，重建一个新的背景渐变字符串应该是微不足道的。我不太了解这段代码对不同情况的鲁棒性，但对于您给出的示例，它在上述 Chrome 版本上对我来说似乎工作正常。

# sql - 在 Sql 命令 Crystal Reports 中使用 Like '%" 运算符

> ID：13968246
> 
> 赞同：0
> 
> 时间：2012-12-20T08:47:23.107
> 
> 标签：sql, crystal-reports, report

我有一个查询来根据参数提取数据，但现在我在查询中使用 Like '%' 运算符时遇到问题，因此当我根据此参数选择数据时，只能使用前缀为此运算符的字母的数据拉。

下面是查询

```
select InventoryName,StockNumber,OBAL,RPO,XEFR,RDJ,RET,TSFR,ISS,PISS,ADJ,CBAL 
from Transactions
where InventoryName LIKE 'se%' and ReportingPeriod ='January 2005'
order by InventoryName,StockNumber 
```

例如，有了这个，我可以提取 SE 为 2005 年 1 月的数据。它在 SQL 2005 中运行良好，但现在我想在 Crystal 报表中使用它作为参数，以帮助根据所选的 InventoryName 和月份提取数据和年份。我是水晶报表的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T06:54:49.560

使用符号 '*' 而不是 '%'。我也遇到过这个问题，sql需要'%'而CR需要'*'，你可以试试CR设计器的简单例子，在“RecordSelection”中插入where子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:58:06.540

根据我的评论，您可以使用以下内容：

```
where   InventoryName LIKE @input + '%' 
```

# c# - 为什么 C# 支持使用字符串切换而 C++ 不支持？

> ID：13968255
> 
> 赞同：7
> 
> 时间：2012-12-20T08:48:18.243
> 
> 标签：c#, c++, switch-statement

> **可能重复：**
> [为什么 switch 语句不能应用于字符串？](https://stackoverflow.com/questions/650162/why-switch-statement-cannot-be-applied-on-strings)

在一些帖子中，我读到原因是“编译器必须理解两个值相等意味着什么”，但是在 C# 中它也不知道并且只是调用类似于 的函数`Equals`，那么为什么 C++ 也不能这样做呢？

# java - JAX-RS 中必需的 @QueryParam（以及在他们缺席的情况下该怎么做）

> ID：13968261
> 
> 赞同：79
> 
> 时间：2012-12-20T08:48:57.227
> 
> 标签：java, jax-rs

我使用**RESTEasy JAX-RS**实现将 Web 服务组件部署到**JBoss Application Server 7 。**

 **是否有注释可用于在**JAX-RS中声明必需的强制****@QueryParam**参数？而且，如果不是，那么处理缺少此类参数的情况的“标准”方法是什么？

 **当使用所有必需参数正确调用时，我的 Web 服务（资源）方法返回 JSON 字符串化结果，但我不确定向调用者指示缺少必需参数的最佳方法是什么。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-20T19:44:15.770

好问题。不幸的是（或者幸运的是）JAX-RS 中没有强制任何参数的机制。如果未提供参数，则它的值将是`NULL`并且您的资源应相应地处理它。我建议用于`WebApplicationException`通知您的用户：

```
@GET
@Path("/some-path")
public String read(@QueryParam("name") String name) {
  if (name == null) {
    throw new WebApplicationException(
      Response.status(Response.Status.BAD_REQUEST)
        .entity("name parameter is mandatory")
        .build()
    );
  }
  // continue with a normal flow
} 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-02-20T21:56:55.937

您可以使用`javax.validation`注释来强制参数是强制性的，方法是用 注释它们`@javax.validation.constraints.NotNull`。请参阅[Jersey 的示例](https://jersey.java.net/documentation/latest/bean-validation.html#d0e11875)和[RESTeasy](http://docs.jboss.org/seam/3/rest/latest/reference/en-US/html/rest.validation.html)的示例。

因此，您的方法将简单地变为：

```
@GET
@Path("/some-path")
public String read(@NotNull @QueryParam("name") String name) {
  String something = 
  // implementation
  return something;
} 
```

请注意，JAX-RS 提供程序随后会将异常转换为某些错误代码。它通常可以通过注册您自己的`javax.ws.rs.ext.ExceptionMapper<javax.validation.ValidationException>`.

这提供了一种将强制参数转换为错误响应的集中方式，并且不需要重复代码。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-08-08T13:29:44.350

我遇到了同样的问题，并决定不希望在我的 REST 代码中分散大量样板空检查，所以这就是我决定做的：

1.  创建一个注解，在未指定必需参数时引发异常。
2.  处理抛出的异常的方式与我处理 REST 代码中抛出的所有其他异常的方式相同。

对于**1)**，我实现了以下注释：

```
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Required
{
    // This is just a marker annotation, so nothing in here.
} 
```

...以及以下 JAX-RS`ContainerRequestFilter`来执行它：

```
import java.lang.reflect.Parameter;
import javax.ws.rs.QueryParam;
import javax.ws.rs.container.ContainerRequestContext;
import javax.ws.rs.container.ContainerRequestFilter;
import javax.ws.rs.container.ResourceInfo;
import javax.ws.rs.core.Context;
import javax.ws.rs.ext.Provider;

@Provider
public class RequiredParameterFilter implements ContainerRequestFilter
{
    @Context
    private ResourceInfo resourceInfo;

    @Override
    public void filter(ContainerRequestContext requestContext)
    {
        // Loop through each parameter
        for (Parameter parameter : resourceInfo.getResourceMethod().getParameters())
        {
            // Check is this parameter is a query parameter
            QueryParam queryAnnotation = parameter.getAnnotation(QueryParam.class);

            // ... and whether it is a required one
            if (queryAnnotation != null && parameter.isAnnotationPresent(Required.class))
            {
                // ... and whether it was not specified
                if (!requestContext.getUriInfo().getQueryParameters().containsKey(queryAnnotation.value()))
                {
                    // We pass the query variable name to the constructor so that the exception can generate a meaningful error message
                    throw new YourCustomRuntimeException(queryAnnotation.value());
                }
            }
        }
    }
} 
```

您需要以与在 JAX-RS 库中`ContainerRequestFilter`注册其他类相同的方式进行注册。`@Provider`也许 RESTEasy 会自动为您完成。

对于**2)**，我使用通用 JAX-RS 处理所有运行时异常`ExceptionMapper`：

```
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

@Provider
public class MyExceptionMapper implements ExceptionMapper<RuntimeException>
{
    @Override
    public Response toResponse(RuntimeException ex)
    {
        // In this example, we just return the .toString() of the exception. 
        // You might want to wrap this in a JSON structure if this is a JSON API, for example.
        return Response
            .status(Response.Status.BAD_REQUEST)
            .entity(ex.toString())
            .build();
    }
} 
```

和以前一样，请记住将类注册到您的 JAX-RS 库中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-05T13:11:17.610

可能最简单的方法是使用`@Nonnull`from`javax.annotation`来实现这一点。它使用起来非常简单，因为您只需在之前添加它，`@QueryParam`如下所示。

但是，请记住，`IllegalArgumentException`当参数为 null 时，这将抛出一个异常，因此您发送回的响应将是您对异常所做的任何事情。如果您不拦截它，它将是 a`500 Server Error`即使发送回的正确内容是`400 Bad Request`. 您可以拦截`IllegalArgumentException`并处理它以返回正确的响应。

* * *

例子：

```
import javax.annotation.Nonnull;
...

    @GET
    @Path("/your-path")
    public Response get(@Nonnull @QueryParam("paramName") String paramName) {
        ... 
    } 
```

* * *

返回给调用者的默认错误消息如下所示：

> {"timestamp":1536152114437,"status":500,"error":"Internal Server Error","exception":"java.lang.IllegalArgumentException","message":"com 的 @Nonnull 参数 'paramName' 的参数/example/YourClass.get 不能为 null","path":"/path/to/your-path"}****

# silverlight - 如何在 DatePicker 和 TimePicker 控件上分别设置 Silverlight 5 CurrentCulture 和 CurrentUICulture？

> ID：13968267
> 
> 赞同：0
> 
> 时间：2012-12-20T08:49:14.587
> 
> 标签：silverlight, silverlight-5.0, silverlight-toolkit

我为线程设置了两种不同的文化：

```
Thread.CurrentThread.CurrentCulture = "fi-FI"
Thread.CurrentThread.CurrentUICulture = "en-Us" 
```

但是日历文字显示在芬兰文化中。

我需要保留基于 CurrentUICulture 的文本（翻译）和基于 CurrentCulture 的文本格式。

你能建议怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:47:38.897

这是不可能的。Calendar 控件仅对 CurrentCulture 值作出反应。ResourceManager 使用 CurrentUICulture 来加载 UI 中使用的不同字符串、图像等，但这不是存储日/月名称的位置。它们是 .NET 框架本身的一部分。要获得所需的功能，您必须编写自己的 DatePicker 和/或 TimePicker 控件的实现。也许您可以下载 Silverlight Toolkit 的代码并将其用作您自己实现的基础。您正在寻找的基本上是一种手动覆盖月份和日期名称的方法。也许甚至可以扩展控件并在顶部添加该功能，但我对此表示怀疑。

# forms - extjs 表单的丢失事件

> ID：13968269
> 
> 赞同：1
> 
> 时间：2012-12-20T08:49:31.033
> 
> 标签：forms, extjs, extjs4

我在 extjs 上有一个在窗口中打开的大表单，出于速度原因，我将其缓存在隐藏面板中。一次只能有一个窗口，所以缓存的表格也是单一的。在显示事件中，我将表单添加到窗口，没有渲染并且表单的suspendLayout 选项。在关闭事件中，我使用面板添加方法将表单移动到隐藏面板。我不使用删除方法而不是窗口而不是面板。所以，几次都完美，但在打开 3-5 个窗口后窗体失去了所有事件：按钮、组合框、触发器和其他控件没有响应。问题出在哪里？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:28:03.410

很难确定，但我的理论是，您的听众设置的可观察对象是在某个不确定的不活动时间段内收集的垃圾。

我已经看到这种情况发生在表示从父窗口观看的 iframe 主体的对象上。正文中的单击事件将工作一段时间，然后所有事件将停止。

测试该理论的一种方法是将对象引用存储在全局变量中 - 这不是您想要在任何应用程序中执行的操作，但值得一试以进行测试。全局变量永远不会被垃圾收集。

# java - 强制 JScrollPane 中的 JEditorPane 收缩 + 重新包装

> ID：13968271
> 
> 赞同：1
> 
> 时间：2012-12-20T08:49:44.383
> 
> 标签：java, swing, resize, jscrollpane, jeditorpane

`JScrollPane`扩展其子级时出现问题，`JEditorPane`但在再次缩小其大小时强制水平滚动条（而不是强制`JEditorPane`重新计算换行）。

代码的基本流程如下：

```
JFrame f = new JFrame();
JEditorPane jep = new JEditorPane();
JScrollPane jsp = new JScrollPane(jep);
f.add(jsp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:49:44.383

这是一个 hack，但我能找到的最好方法（不使用丑陋的 s）是在调整子组件大小时`ScrollPaneManager`实现 a来调整子组件的大小。`ComponentListener``JScrollPane`

```
jsp.addComponentListener(new ComponentListener() {
    @Override
    public void componentShown(ComponentEvent e) {}

    @Override
    public void componentResized(ComponentEvent e) {
        Dimension jspSize = ((JScrollPane)e.getComponent()).getViewport().getSize();
        jep.setBounds(0, 0, jspSize.width, jspSize.height);
    }

    @Override
    public void componentMoved(ComponentEvent e) {}

    @Override
    public void componentHidden(ComponentEvent e) {}
}); 
```

# asp.net - 在 Kentico CMS 7 的附加文档中进行全文搜索

> ID：13968276
> 
> 赞同：2
> 
> 时间：2012-12-20T08:50:00.407
> 
> 标签：asp.net, sql-server-2008, kentico

有什么方法可以搜索附件并在搜索结果中显示附件？我的搜索结果应该只显示包含搜索文本的附件。现在我可以搜索附件并显示附件包含搜索文本的页面。说，我有一个主页和附件 myattachment.docx 作为其附件。在站点搜索中搜索背景作为搜索文本时，仅包含在 myattachment.docx 中（不包含在主页中），搜索结果显示主页作为搜索结果。我的意图是返回类似 Home/myattachment.docx 的结果，而不是主页。我的页面可能有任意数量的附件。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T11:46:08.977

这方面的信息有点草图。有关我使用的文档，请参见下文。

在 AppCode（或 Old_App_Code）中创建自定义全局事件处理程序，确保它是 CMSModule Loader 的部分类。

在覆盖中添加您的自定义事件处理程序`Init()`您想要的是`DocumentEvents.GetContent.Execute`.

发件人对象应该是当前`TreeNode`被索引以供搜索。然后，您可以使用该节点访问相关附件并修改事件参数`e.content`以将您的文档文本添加到搜索中。

```
[CustomDocumentEvents]
public partial class CMSModuleLoader
{
    private class CustomDocumentEventsAttribute : CMSLoaderAttribute
    {
        public override void Init()
        {
            // Assigns custom handlers to the appropriate events
            DocumentEvents.GetContent.Execute += Document_GetContent;
        }

        private void Document_GetContent(object sender, DocumentEventArgs e)
        {
            TreeNode node = sender as TreeNode;
            if (node != null)
            {
                //Note, this is psuedo code, this isnt the way to iterate over TreeNode.Attachments
                foreach( attachment in node.Attachments ) {
                    e.Content += attachment.content;
                }
            }
        }

    }
} 
```

更多信息

请参阅[http://devnet.kentico.com/docs/devguide/index.html?event_handlers_overview.htm](http://devnet.kentico.com/docs/devguide/index.html?event_handlers_overview.htm)了解在版本 7 中实现自定义事件的一般情况。

请参阅第 5 版中的自定义搜索 [http://devnet.kentico.com/Knowledge-Base/Search/How-to-search-for-documents-using-assigned-categor.aspx](http://devnet.kentico.com/Knowledge-Base/Search/How-to-search-for-documents-using-assigned-categor.aspx)

请参阅[http://devnet.kentico.com/Knowledge-Base/API-and-Internals/Custom-Handler-Library-compatibility.aspx](http://devnet.kentico.com/Knowledge-Base/API-and-Internals/Custom-Handler-Library-compatibility.aspx)以获取版本 5 自定义搜索示例中提到的版本 7 的更新事件名称。

# android - 如何使用 Web 服务在 android 返回的列表视图中显示数据？

> ID：13968281
> 
> 赞同：1
> 
> 时间：2012-12-20T08:50:29.433
> 
> 标签：android

我的网络服务：`shreeomex.com/service.asmx` 我无法在列表视图中显示它。谁能告诉我我做错了什么？

这是我的代码：

```
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        //this is the actual part that will call the webservice
        androidHttpTransport.call(SOAP_ACTION1, envelope);

        // Get the SoapResult from the envelope body.
        SoapObject result = (SoapObject)envelope.getResponse();
        result = (SoapObject) result.getProperty(1);
        table = (SoapObject) result.getProperty(0);
         tableRow = (SoapObject) table.getProperty(0);
        if(result != null)
        {
            //Get the first property and change the label text

                try {
                    SAXParserFactory saxparser = SAXParserFactory.newInstance();
                    SAXParser parser = saxparser.newSAXParser();
                    XMLReader xmlReader = parser.getXMLReader();
                    ParsingClass pc = new ParsingClass();
                    xmlReader.setContentHandler(pc);
                            String xml= result.toString();  ss.setText(xml);
                              StringReader sr = new StringReader(xml);
                                InputSource is = new InputSource(sr);
                                is.setEncoding("ISO-8859-1");
                                xmlReader.parse(is);

                // InputStream is = getAssets().open("service.xml");
                    //  xmlReader.parse(new InputSource(is));
                    BindingData bindingData = new BindingData(this, pc.CompanyId,
                            pc.CompanyName, pc.IsActive);
                    listView.setAdapter(bindingData);
                } catch (Exception e) {
                    ss.setText(e.toString());
                    e.getMessage();
                }
            }  

    } 
```

# php - url 中的未知字符 %252B

> ID：13968282
> 
> 赞同：5
> 
> 时间：2012-12-20T08:50:31.267
> 
> 标签：php, encoding, ascii, urlencode

我有一个页面，其中包含从 rss 获得的链接。它们是：断开的链接

```
http://news.asiaone.com/News/Latest%252BNews/Singapore/Story/A1Story20121220-390687.html 
```

工作链接

```
http://news.asiaone.com/News/Latest%2BNews/Singapore/Story/A1Story20121220-390687.html 
```

我意识到它可以通过将 %252B 更改为 %2B 来工作。我正在使用 php。有没有办法在运行中检测和纠正它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T08:56:00.667

URL 已被双重编码。`%25`是“%”的转义序列，所以一个正则`%2B`再次转义为`%252B`.

`urldecode`值，但最好避免在可能的情况下对其进行双重编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:53:16.593

使用“urldecode”

```
echo urldecode("http://news.asiaone.com/News/Latest%252BNews/Singapore/Story/A1Story20121220-390687.html"); 
```

# sharepoint - 将文件上传到 SharePoint copyintoitems 会引发错误

> ID：13968287
> 
> 赞同：0
> 
> 时间：2012-12-20T08:50:58.350
> 
> 标签：sharepoint, file-upload

我正在使用 API 将文件上传到 SharePoint `Copy.CopyIntoItems`。当目标 URL 为“http://sharepointserver/sitename”时，上传工作。但是，当 url 带有域名时，例如“http://sharepointserver.domain/sitename”，则`CopyIntoItems`API 调用失败，返回的错误是“Object reference not set to an instance of an object”。

知道为什么在 url 更改时会出现奇怪的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T12:45:31.163

以下关于 SO 的答案链接到 MSDN 上的一个线程，详细解释了为什么会发生这种行为：[https ://stackoverflow.com/a/2692212/274354](https://stackoverflow.com/a/2692212/274354)

链接到 MSDN 线程：

[将目标 URI 与 FQDN 一起使用时出现 CopyIntoItems 错误](http://social.msdn.microsoft.com/Forums/sharepoint/en-US/833e38a8-f13c-490d-8ba7-b889b6b25e38/copyintoitems-errors-when-using-destination-uri-with-fqdn?forum=sharepointdevelopmentlegacy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:35:16.357

您不能将 url 与域名一起使用，例如“http://sharepointserver.domain/sitename”用于复制项目

# ruby - `require': 无法加载此类文件 -- 邮件 (LoadError)

> ID：13968288
> 
> 赞同：1
> 
> 时间：2012-12-20T08:51:01.213
> 
> 标签：ruby, ide, editor, rvm, geany

在尝试使用[geany](http://www.geany.org/)的邮件 gem 时，我收到如下错误：

```
/home/thufir/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mail (LoadError)
    from /home/thufir/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from mail.rb:3:in `<main>'

------------------
(program exited with code: 1)
Press return to continue 
```

但是，该程序在 CLI 中运行良好：

```
thufir@dur:~$ 
thufir@dur:~$ ruby ruby/mail.rb 
hello world
hello world
thufir@dur:~$ 
thufir@dur:~$ nl ruby/mail.rb 
     1  require 'yaml'
     2  require 'net/imap'
     3  require 'mail'

     4  2.times do
     5    puts 'hello world'
     6  end
thufir@dur:~$ 
thufir@dur:~$ ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [i686-linux]
thufir@dur:~$ 
thufir@dur:~$ gem -v
1.8.24
thufir@dur:~$ 
thufir@dur:~$ rvm -v

rvm 1.17.2 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

thufir@dur:~$ 
```

为什么 geany 对邮件 gem 有问题？

只是为了确认：

```
thufir@dur:~$ 
thufir@dur:~$ type rvm | head -1
rvm is a function
thufir@dur:~$ 
thufir@dur:~$ gem list --local

*** LOCAL GEMS ***

bundler (1.2.3)
i18n (0.6.1)
mail (2.5.3)
mime-types (1.19)
polyglot (0.3.3)
rake (10.0.3)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
treetop (1.4.12)
thufir@dur:~$ 
```

[geany邮件列表问题](http://thread.gmane.org/gmane.editors.geany.general/7201/focus=7205)

[相关问题](https://stackoverflow.com/questions/10679196/i-cant-load-ruby-gems?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:37:36.707

您的系统未配置为使用登录 shell，这里是如何在 gnome 终端[https://rvm.io/integration/gnome-terminal/中启用登录 shell 的示例](https://rvm.io/integration/gnome-terminal/)

也在运行：

```
rvm get head --auto-dotfiles 
```

将更新您的 shell 配置以“正确”的方式加载 rvm

# python - 太多打开的文件并行 Python 子进程错误

> ID：13968290
> 
> 赞同：1
> 
> 时间：2012-12-20T08:51:07.143
> 
> 标签：python, subprocess, parallel-python

类似问题的问题： [Parallel Python - too many files](https://stackoverflow.com/questions/9362362/parallel-python-too-many-files) and [Python too many open files (subprocesses)](https://stackoverflow.com/questions/12523534/python-too-many-open-files-subprocesses)

我正在使用 Parallel Python [V1.6.2] 来运行任务。该任务处理输入文件并输出日志/报告。假设有10个文件夹，每个文件夹有5000~20000个文件，并行读取、处理和写出日志。每个文件大约 50KB ~ 250KB

运行约 6 小时后，Parallel Python 失败并出现以下错误。

```
 File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 342, in __init__
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 506, in set_ncpus
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 140, in __init__
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 146, in start
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
  File "/usr/lib/python2.7/subprocess.py", line 1135, in _execute_child
  File "/usr/lib/python2.7/subprocess.py", line 1091, in pipe_cloexec
OSError: [Errno 24] Too many open files
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 66, in  apport_excepthook
ImportError: No module named fileutils

Original exception was:
Traceback (most recent call last):
  File "PARALLEL_TEST.py", line 746, in <module>
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 342, in __init__
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 506, in set_ncpus
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 140, in __init__
  File "/usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py", line 146, in start
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
  File "/usr/lib/python2.7/subprocess.py", line 1135, in _execute_child
  File "/usr/lib/python2.7/subprocess.py", line 1091, in pipe_cloexec
OSError: [Errno 24] Too many open files 
```

[虽然我理解，这可能是这里http://bugs.python.org/issue2320](http://bugs.python.org/issue2320)指出的子进程中的问题，但是，似乎解决方案只是 Py V3.2 的一部分。我目前绑定到 Py V2.7。

我想知道以下建议是否有帮助：[1] [http://www.parallelpython.com/component/option,com_smf/Itemid,1/topic,313.0](http://www.parallelpython.com/component/option,com_smf/Itemid,1/topic,313.0)

*) 在 /usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/pp.py 的 destroy() 方法中添加 worker.t.close()

*) 在 /usr/local/lib/python2.7/dist-packages/pp-1.6.2-py2.7.egg/ppauto.py 中增加 BROADCAST_INTERVAL

我想知道 Python V2.7 中是否有可用的修复程序/解决此问题的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T17:09:41.950

我的团队最近在运行 celeryd 任务队列作业时偶然发现了一个类似的问题，即相同的文件句柄资源耗尽问题。我相信 OP 已经搞定了，它很可能是 Python 2.7 和 Python 3.1 中 suprocess.py lib 中的杂乱代码。

As suggested in , [Python Bug#2320](http://bugs.python.org/issue2320), please pass in `close_fds=True` everywhere you call subprocess.Popen(). In fact they make that a default in Python 3.2 while also fixing the underlying race condition issue. See more details in that ticket.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:10:50.057

我已经离开了一些线路来破坏作业服务器。job_server.destroy() 解决了这个问题。

# jms - 具有高可用性的消息传递 jms 顺序

> ID：13968291
> 
> 赞同：1
> 
> 时间：2012-12-20T08:51:14.553
> 
> 标签：jms, weblogic, high-availability

我已经使用 weblogic server 12c 设置了统一的分布式队列。我正在尝试使用 jms 分布式队列来实现交付顺序和高可用性。在我的原型测试部署中，我在集群中有两台托管服务器，让我们说 managed_server1 和 managed_server2。每个托管服务器都托管 jms 服务器，即 jms server1 和 jms server2。我已经使用 jdbc 持久存储配置了 jms 服务器。我已启用服务器关联。

1.  我有一个生产者正在运行，例如 java queuproducer t3::/managed_server1。我发送了 4 条消息。从 weblogic 监控控制台我看到队列中有 4 条消息，因为队列中还没有消费者。
2.  现在我关闭了 managed_server1。
3.  在 java queuconsumer t3://managed_server2 上启动一个消费者来监听。此消费者无法消费消息，因为生产者将所有消息发送到 jms server1，并且它已关闭。
4.  启动托管服务器 1，启动一个消费者来收听 t3://managed_server1 我可以获取所有消息。

这是我的问题，如果 managed_server1 出现故障，那么它就再也没有恢复，我是否丢失了所有消息。此外，如果有另一个生产者向 java queuproducer t3://managed_server2 发送消息，则不保证基于这些生产者之间时间的消息顺序。

我有点失落，我是不是错过了什么。订单单位可以帮助我克服这个问题。或者我应该使用分布式主题而不是分布式队列，其中所有 jms 服务器将接收来自生产者的所有消息，但是如果我的消费者正在侦听的一个 jms 服务器出现故障，那么当我切换到另一个时，我的应用程序中只有一个消费者jms 服务器，我可能从一开始就开始接收消息，而不是从我离开的地方。

任何有关相同的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:50:28.260

好问题 ！

“这是我的问题，如果 managed_server1 出现故障，那么它就再也没有恢复，我是否丢失了所有消息。”

Ans - 不，您不会丢失所有消息，它们存储在为部署在托管服务器 1 上的 JMS 服务器配置的 JDBC 存储中。如果您希望从 managed_server2 使用发送到 managed_server1 的消息，您需要配置 JMS 迁移。

“另外，如果有另一个生产者向 java queuproducer t3://managed_server2 发送消息，则不能保证基于这些生产者之间时间的消息顺序。顺序单位可以帮助我克服这个问题。”

Ans - 如果您希望严格按照特定顺序使用消息，那么您将不得不使用顺序单元 (UOO)。当使用 UOO 发送消息时，它们将被发送到多个 UDQ 目标之一，如果该目标中途失败，并且启用了迁移，则消息将迁移到下一个 UDQ 目标，并且新的 UDQ 消息也将传递到新目标。

有用的链接 -

[http://www.youtube.com/watch?v=B9J7q5NbXag](http://www.youtube.com/watch?v=B9J7q5NbXag) http://www.youtube.com/watch?v=_W3EJ8p35lI

希望这可以帮助。

# java - 使用 FTPUtil 下载文件夹及其子文件夹

> ID：13968293
> 
> 赞同：0
> 
> 时间：2012-12-20T08:51:16.553
> 
> 标签：java, file, ftp, download, ftputil

我想使用[FTPUtil](http://amoebacode.com/media/amoebacode.com/ftp/javadoc/com/amoebacode/ftp/FTPUtil.html)库和 java API 从 ftp 下载文件。具体来说，我想下载一个文件夹及其子文件夹（如果有）。FTPUtil 上是否已经实现了一种简单的方法？

其他图书馆推荐也可以。

谢谢

# html - 如何像 google 为其官方博客做的这种 css3 类型的动画

> ID：13968295
> 
> 赞同：0
> 
> 时间：2012-12-20T08:51:19.543
> 
> 标签：html, css, css-transitions

我目前在 wordpress 网站上工作，基本上是一个博客。客户端在标题部分请求一些简单的干净动画，就像谷歌在 [http://googleblog.blogspot.in/上做的那样](http://googleblog.blogspot.in/)

我知道谷歌使用 css3 转换和以下属性来缩放、翻译和计时功能

谁能告诉我如何创建类似的东西基本上我无法理解为鼠标移动和气泡移动路径编写的逻辑（他们移动它的路径看起来他们没有使用三次贝塞尔曲线）

因此，如果有人知道它的进展情况，请添加您的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:59:25.303

您提供的示例不是用 CSS 制作的，因为它响应鼠标移动。它可能是用javascript制作的。

至于那个，不能给出“我怎么做这个”的简单答案，因为它很可能是一个相当广泛的脚本。

# asp.net-mvc-3 - 使用属性访问属性值

> ID：13968298
> 
> 赞同：2
> 
> 时间：2012-12-20T08:52:09.017
> 
> 标签：asp.net-mvc-3, c#-4.0, custom-attributes

如何访问属性类中的属性值。我正在编写一个自定义验证属性，该属性需要根据正则表达式检查属性的值。例如：

```
public class MyAttribute
{
public MyAttribute (){}

//now this is where i want to use the value of the property using the attribute. The attribute can be use in different classed
public string DoSomething()
{
//do something with the property value
}
}

Public class MyClass
{
[MyAttribute]
public string Name {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:59:46.397

如果您只想使用正则表达式验证属性，则可以从 继承，有关如何执行此操作的示例`RegularExpressionAttribute`，请参阅[https://stackoverflow.com/a/8431253/486434 。](https://stackoverflow.com/a/8431253/486434)

但是，如果您想做一些更复杂的事情并访问您可以继承`ValidationAttribute`并覆盖 2 个虚拟方法的值`IsValid`。例如：

```
public class MyAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        // Do your own custom validation logic here
        return base.IsValid(value);
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        return base.IsValid(value, validationContext);
    }
} 
```

# android - 切换选项卡和重新启动活动

> ID：13968299
> 
> 赞同：2
> 
> 时间：2012-12-20T08:52:20.517
> 
> 标签：android, tabs

我想在每次切换时重新启动活动，一个活动连接网络并上传数据。

如果它成功显示数据，则无需在选项卡更改时重新启动活动。

如果无法显示数据不成功，我希望每次切换选项卡时重新启动活动并连接网络再次上传。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:05:18.693

请检查此代码

```
 productSpec = tabHost.newTabSpec("Products");
   Intent productsIntent = new Intent(this, ProductActivity.class);
            Bundle param = new Bundle();
            param.putInt("Categories", 0); //Your id
            param.putCharSequence("CategoryName", "No Category");
            productsIntent.putExtras(param);
            productSpec.setContent(productsIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)); 
```

// 这是我们所在的位置 清除当前选项卡 ..

在不同的活动中访问 tabHost 并执行相同的操作..

```
 Intent productsIntent = new Intent(context, ProductActivity.class);
                        Bundle param = new Bundle();
                        param.putInt("Categories", 1); //Your id
                        param.putCharSequence("CategoryName", categoryValues[position]);
                        productsIntent.putExtras(param);
                        MainTabActivity.productSpec.setContent(productsIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
                        MainTabActivity.tabHost.setCurrentTab(1); 
```

# ruby-on-rails - Rails 下载 S3 文件

> ID：13968300
> 
> 赞同：0
> 
> 时间：2012-12-20T08:52:26.720
> 
> 标签：ruby-on-rails, sdk, amazon-web-services, amazon-s3, download

我正在使用回形针将文件上传到 S3，现在我想从同一个应用程序下载它们。所以我正在做很多页面所说的，但如果我使用'aws-sdk'，它会说AWS::S3::S3Object方法'find'不存在，如果我使用'aws-s3'gem，它说我需要使用'aws-sdk'。在控制器中，我正在调用：

```
aws_object = AWS::S3::S3Object.find @component.folder.path, 'bucket-name'
send_data(aws_object.value, :type => @component.folder_content_type) 
```

**编辑：** 我的模型看起来像：

```
attr_accessible :folder

has_attached_file   :folder, 
                    :path => ":rails_root/data/folders/:id/:basename.:extension",
                    :storage => :s3,
                    :s3_credentials => {
                        :bucket => "my-bucket-name",
                        :access_key_id => "XXXXXXXXX",
                        :secret_access_key => "XXXXXXXXX"
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T04:37:52.533

这对我有用：

[http://trevorturk.com/2008/12/11/easy-upload-via-url-with-paperclip/](http://trevorturk.com/2008/12/11/easy-upload-via-url-with-paperclip/)

也有例子可以下载。

秘密是“.read”：

```
data = open(asset.uploaded_file.url)
send_data data.read, :type => data.content_type, :x_sendfile => true,:filename => asset.file_name 
```

# sql-server-2008 - 从 id 获取最新日期

> ID：13968302
> 
> 赞同：0
> 
> 时间：2012-12-20T08:52:36.180
> 
> 标签：sql-server-2008

我运行上面的 sql 语句，我得到了这个。[IMG]http://i1093.photobucket.com/albums/i422/walkgirl_1993/asd-1_zps5506632e.jpg[/IMG] 我正在尝试显示最新的日期，你可以参见 3 和 4。对于 caseid 3，它应该显示最新的行，即 2012-12-20 16:12:36.000。我尝试使用 group by，order by。谷歌一些网站说使用排名，但我不确定排名，因为我没有真正获得排名。一些建议？

```
select [Case].CaseID, Agent.AgentName, Assignment.Description, A.AgentName as EditedBy, A.DateEdited from Agent inner join [Case-Agent] on [Case-Agent].AgentID = Agent.AgentID inner join [Assignment] on Assignment.AssignmentID = [Case-Agent].AssignmentID inner join [Case] on [Case].CaseID = [Case-Agent].CaseID inner join (select EditedCase.CaseID, [EditedCase].DateEdited, [Agent].AgentName from EditedCase inner join [Agent] on [Agent].AgentID = [EditedCase].AgentID) A on A.CaseID = [Case].CaseID where [Assignment].AssignmentID = 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:17:46.140

要使用 RANK 执行此操作，您只需将 RANK 添加到子查询并为每个 CaseID 和 Agent 对 DateEdited 进行排名，然后在主查询中放置一个 WHERE 子句以仅选择排名为 1 的行。我想我有得到正确的分区子句 - 没有看到你的数据有点难。

像这样：

```
SELECT 
  [Case].CaseID 
  ,Agent.AgentName 
  ,Assignment.Description 
  ,A.AgentName AS EditedBy 
  ,A.DateEdited 
FROM Agent 
  INNER JOIN [Case-Agent] ON [Case-Agent].AgentID = Agent.AgentID 
  INNER JOIN [Assignment] ON Assignment.AssignmentID = [Case-Agent].AssignmentID 
  INNER JOIN [Case] ON [Case].CaseID = [Case-Agent].CaseID 
  INNER JOIN (SELECT 
                EditedCase.CaseID 
                ,[EditedCase].DateEdited 
                ,[Agent].AgentName
                ,RANK ( ) OVER (PARTITION BY EditedCase.CaseID, [Agent].AgentName 
                               ORDER BY [EditedCase].DateEdited DESC ) AS pos
              FROM EditedCase 
                INNER JOIN [Agent] on [Agent].AgentID = [EditedCase].AgentID) A on A.CaseID = [Case].CaseID 
WHERE [Assignment].AssignmentID = 0 
  AND pos = 1 
```

您还可以将子查询更改为带回 MAX 日期的聚合查询，如下所示：

```
SELECT 
  [Case].CaseID 
  ,Agent.AgentName 
  ,Assignment.Description 
  ,A.AgentName AS EditedBy 
  ,A.DateEdited 
FROM Agent 
  INNER JOIN [Case-Agent] ON [Case-Agent].AgentID = Agent.AgentID 
  INNER JOIN [Assignment] ON Assignment.AssignmentID = [Case-Agent].AssignmentID 
  INNER JOIN [Case] ON [Case].CaseID = [Case-Agent].CaseID 
  INNER JOIN (SELECT 
                EditedCase.CaseID 
                ,MAX([EditedCase].DateEdited) AS DateEdited 
                ,[Agent].AgentName
              FROM EditedCase 
                INNER JOIN [Agent] on [Agent].AgentID = [EditedCase].AgentID
              GROUP BY
                EditedCase.CaseID
                ,[Agent].AgentName) A on A.CaseID = [Case].CaseID 
WHERE [Assignment].AssignmentID = 0 
  AND pos = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:20:05.903

你走在正确的轨道上；您需要在这里使用排名功能，例如`row_number()`：

```
with LatestCase as
(
  select [Case].CaseID
    , Agent.AgentName
    , Assignment.Description
    , A.AgentName as EditedBy
    , A.DateEdited
    , caseRank = row_number() over (partition by [Case].CaseID order by A.DateEdited desc)
  from Agent
    inner join [Case-Agent] on [Case-Agent].AgentID = Agent.AgentID
    inner join [Assignment] on Assignment.AssignmentID = [Case-Agent].AssignmentID
    inner join [Case] on [Case].CaseID = [Case-Agent].CaseID
    inner join
    (
      select EditedCase.CaseID
        , [EditedCase].DateEdited
        , [Agent].AgentName
      from EditedCase
        inner join [Agent] on [Agent].AgentID = [EditedCase].AgentID
    ) A on A.CaseID = [Case].CaseID where [Assignment].AssignmentID = 0
)
select *
from LatestCase
where caseRank = 1 
```

# php - MySQL查询更新错误，语法？

> ID：13968303
> 
> 赞同：-1
> 
> 时间：2012-12-20T08:52:47.437
> 
> 标签：php, mysql, sql

得到这样的查询：

```
 UPDATE trails SET route = '$route', distance = '$distance', desc = '$description' WHERE route='$route' 
```

它返回此错误：

```
 Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc = 'Bla bla bla' WHERE route='London to Dublin'' at line 1 
```

谢谢！。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:59:07.253

`DESC`是保留关键字。使用反引号引用它：

```
UPDATE trails SET route = '...', distance = '...', `desc` = '...' WHERE route = '...' 
```

顺便说一句，您的代码中存在更严重的问题。以 SQL 注入为例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:56:03.697

[这不是正确的答案。] 您应该在将字符串传递给查询之前对其进行转义。

请参见此处： http: [//php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)或此处，如果您使用的是旧的已弃用函数[http://php.net/manual/en/function.mysql-真正的转义字符串.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:00:49.453

第一的 ：

像这样逃避你的变量

```
 $route = mysqli_real_escape_string ($route ) ; // if you are using mysqli
  $route = mysql_real_escape_string ($route ) ; // if you are using mysql

 and so on .. with other variables 
```

试试这个：

```
 UPDATE trails SET route = '".$route."', distance = '".$distance."', `desc` = '".$description."' WHERE route='".$route."' 
```

obs ：`desc`是 mysql 的保留关键字，因此请使用其他单词或反引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:01:01.013

试试这个

```
mysql_query("UPDATE trails SET `route` = '".mysql_real_escape_string($route)."', `distance` = '".mysql_real_escape_string($distance)."', `desc` = '".mysql_real_escape_string($description)."' WHERE route='".mysql_real_escape_string($route)."'"); 
```

# c# - 最佳列宽 OpenOffice Calc

> ID：13968304
> 
> 赞同：3
> 
> 时间：2012-12-20T08:52:48.843
> 
> 标签：c#, openoffice-calc

我正在将 CSV 文件中的数据输入到 OpenOffice 电子表格中。

此代码在电子表格中获取新工作表：

```
Public Spreadsheet getSpreadsheet(int sheetIndex, XComponent xComp) 
{ 
  XSpreadsheet xSheets = ((XSpreadsheetDocument)xComp).getSheets();
  XIndexAccess xSheetIA = (XIndexAccess)xSheets;
  XSpreadsheet XSheet = (XSpreadsheet)xSheetsA.getByIndex(sheetIndex).Value; 
  return XSheet;
} 
```

然后，我有一种方法，可以一次将一个列表输入到一个单元格区域中。我希望能够自动设置这些单元格的列大小。这就像

```
string final DataCell; 
Xspreadsheet newSheet = getSpreadsheet(sheetIndex, xComp);
int numberOfRecords = ( int numberOfColumns * int numberOfRows); 
for(cellNumber = 0; cellNumber < numberOfrecords; cellNumber++)
{
  XCell tableData = newSheet.getCellbyPosition(columnValue, rowValue);
  ((XText)tableData).setString(finalDataCell);
  column Value++; 
  if(columnValue > = numberOfColumns)
  {
    rowVal++ column = 0; 
  } 
} 
```

谷歌搜索后，我发现了这个功能：

`columns.OptimalWidth = True`在[http://forum.openoffice.org/en/forum/viewtopic.php?f=20&t=31292](http://forum.openoffice.org/en/forum/viewtopic.php?f=20&t=31292)

但我不确定如何使用它。任何人都可以进一步解释这一点或想出另一种方法来让细胞自动适应吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:45:20.027

我知道代码中的注释是西班牙语的，但代码是英语的。我通过谷歌翻译运行评论，所以现在它们是英文的。我从[这里](http://www.oooforum.org/forum/viewtopic.phtml?t=49630)复制了它：

```
//Auto Enlarge col width 
private void largeurAuto(string NomCol) 
{ 
XCellRange Range = null; 
Range = Sheet.getCellRangeByName(NomCol + "1"); //Recover the range, a cell is 

XColumnRowRange RCol = (XColumnRowRange)Range; //Creates a collar ranks 
XTableColumns LCol = RCol.getColumns(); // Retrieves the list of passes
uno.Any Col = LCol.getByIndex(0); //Extract the first Col

XPropertySet xPropSet = (XPropertySet)Col.Value; 
xPropSet.setPropertyValue("OptimalWidth", new one.Any((bool)true)); 
} 
```

这是做什么的：首先它获取范围名称，然后获取第一列。但是，真正的代码是使用 XpropertySet，[这里](http://www.openoffice.org/api/docs/common/ref/com/sun/star/beans/XPropertySet.html)解释得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:56:19.563

```
 public void optimalWidth(XSpreadsheet newSheet)
        {
        // gets the used range of the sheet
            XSheetCellCursor XCursor = newSheet.createCursor();
            XUsedAreaCursor xUsedCursor = (XUsedAreaCursor)XCursor;
            xUsedCursor.gotoStartOfUsedArea(true);
            xUsedCursor.gotoEndOfUsedArea(true); 

            XCellRangeAddressable nomCol = (XCellRangeAddressable)xUsedCursor;

            XColumnRowRange RCol = (XColumnRowRange)nomCol;
            XTableColumns LCol = RCol.getColumns();
       // loops round all of the columns
            for (int i = 0; i < nomCol.getRangeAddress().EndColumn;i++) 
            {
            XPropertySet xPropSet = (XPropertySet)LCol.getByIndex(i).Value; 
            xPropSet.setPropertyValue("OptimalWidth", new uno.Any(true));
            }
        } 
```

# jqplot - 如何使用Jqplot在同一个堆积条形图中显示两组不同颜色的条形图

> ID：13968309
> 
> 赞同：10
> 
> 时间：2012-12-20T08:53:04.397
> 
> 标签：jqplot, axis, bar-chart, stacked, stackedbarseries

我想制作一个包含两组堆叠条的条形图，它们组合在一起以比较两组堆叠条。这应该以下列方式显示：

![条形图](../Images/e7e22dd99d0c758bcf300fe671e354a5.png)

我已经通过这个[链接](http://www.jqplot.com/tests/bar-charts.php)

但它并没有帮助我绘制像你在上图中看到的那样的东西。我什至尝试发送两个数据集，`[[s1, s2, s3], [s4, s5, s6]]`但它并没有帮助我绘制图表。有谁知道该怎么做？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:39:22.563

设置该选项`stackSeries: true`将为条形图创建所需的显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-20T06:55:21.920

官方来源：

*   jqPlot源码：[源码，](https://bitbucket.org/cleonello/jqplot/get/e8af8a37f0f1.zip) 2013-03-27的1.0.8r1250版本。对于这个问题，`src/jqplot.core.js`第 2499、2563 和 2649 行。
*   jqPlot 文档：它说[API 文档](http://www.jqplot.com/docs/files/jqplot-core-js.html)是最准确的。您还可以在[1.0.8r1250 通用版本中查看](https://bitbucket.org/cleonello/jqplot/downloads/)[网页](http://www.jqplot.com/docs/files/usage-txt.html)、README.txt、optionsTutorial.txt、jqPlotOptions.txt、[jqPlotOptions.txt](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html#jqPlot_Options)、jqPlotCssStyling.txt、usage.txt、changes.txt

jqPlot[文档](http://www.jqplot.com/docs/files/usage-txt.html)不是最新的，所以我查看了[源代码](https://bitbucket.org/cleonello/jqplot/get/e8af8a37f0f1.zip)。不幸的是，没有办法直接拥有两组带有堆积条形图的条形图。该`jqPlot.stackSeries`属性只是一个布尔值。它的唯一功能是告诉 jqPlot 将每个系列堆叠在一起，以获得与不同系列中的值一样多的条形图。每个系列每条都绘制一个值，第一个系列位于底部。换句话说，所有`[0]`值都绘制在第一个栏中，`[1]`第二个中的值，依此类推。条中显示的数量是当前系列和所有先前系列的 [n] 值的总和。无法指定有两个或多个系列分组。jqPlot 中不存在执行所需操作的能力。

**但是你可以完成你想要的：**

jqPlot 本身不支持您想要的事实并不意味着您不能做到，只是您需要发挥创造力。

您想要的图表可以看作是两个独立的图表，它们相互重叠，各个图表上的条之间的间距允许足够的空间 ( `seriesDefaults.rendererOptions.barMargin`) 让另一个图表中的条重叠在它们旁边。

您可以使用 jqPlot 创建： ![在此处输入图像描述](../Images/068449126a6f9db43db9d1f6ac15f175.png)

该图表具有您希望设置为可见的比例、背景和网格线。请注意，该图表中有一个额外的条形图。这需要为另一个图表提供的最后一个条形图提供足够的背景和网格线。

您还可以使用 jqPlot 创建第二个图： ![具有透明背景的第二张图](../Images/4470261fd4d8a279bed9e7bcafed174b.png)

此图在 jqPlot 中设置为不可见的比例和网格线。

```
seriesDefaults.axes.xaxis.tickOptions.show = false;
seriesDefaults.axes.yaxis.tickOptions.show = false;
etc. 
```

背景设置为`transparent`. `<div>`请注意，在定位相对于第一个图时，您需要将该图的位置稍微向右偏移。

叠加，你最终得到： ![叠加图 1 和图 2](../Images/10033f0a406f88fe430929a8373e3326.png)

`<div>`然后，您使用背景颜色与网页背景颜色相同的空白，并将其覆盖以覆盖第一个图表上的额外条，但留下足够的第一个图表的背景和网格线以稍微超出最后一个条第二张图。

你最终会得到：

![最终图表](../Images/b57780f790740529d00ac358e8f11bc8.png)

您可以[**在 JSFiddle**](http://jsfiddle.net/8k01c5av/8/)使用 jqPlot 1.0.8r1250 看到一个有效的解决方案。

将原始请求与使用此方法生成的最终版本的图形进行比较，您可以看到它们非常接近： ![将 jqPlot 版本与原始愿望进行比较](../Images/57bcd94d963a77d21a06d06052fc1a7e.png) 两者之间最明显的区别是 jqPlot 版本中 Y 轴之间的空间更大。不幸的是，似乎没有减少堆叠条形图数量的选项。

请注意，此代码生成的图形右侧缺少边框是故意的，因为它在原始请求中不存在。就个人而言，我更喜欢在图表的右侧有一个边框。如果您稍微更改 CSS，这很容易获得：我首选的图表版本在左侧包含一个边框并平衡空白： ![我喜欢的图表版本](../Images/8f0c6b517950d291651577e11b2974e4.png)

您可以看到[**这个版本的工作 JSFiddle**](http://jsfiddle.net/8k01c5av/7/)。

总而言之，这并不难。当然，如果 jqPlot 支持多组条形图会更容易。希望它会在某个时候。然而，最后一个版本是 2013-03-27，在那之后似乎没有任何开发工作。在此之前，每隔几个月就会发布一次。但是，jqPlot 是在 GPL 和 MIT 许可下发布的，因此任何人都可以继续工作。

```
$(document).ready(function () {
    //Numbers derived from desired image
    //var s1 = [10, 29, 35, 48, 0];
    //var s2 = [34, 24, 15, 20, 0];
    //var s3 = [18, 19, 26, 52, 0];
    //Scale to get 30 max on plot
    var s1 = [2, 5.8, 7, 9.6, 0];
    var s2 = [6.8, 4.8, 3, 4, 0];
    var s3 = [13.6, 8.8, 3, 7.8, 0];
    plot4 = $.jqplot('chart4', [s1, s2, s3], {
        // Tell the plot to stack the bars.
        stackSeries: true,
        captureRightClick: true,
        seriesColors: ["#1B95D9", "#A5BC4E", "#E48701"],
        seriesDefaults: {
            shadow: false,
            renderer: $.jqplot.BarRenderer,
            rendererOptions: {
                // jqPlot does not actually obey these except barWidth.
                barPadding: 0,
                barMargin: 66,
                barWidth: 38,
                // Highlight bars when mouse button pressed.
                // Disables default highlighting on mouse over.
                highlightMouseDown: false
            },
            title: {
                text: '', // title for the plot,
                show: false,
            },
            markerOptions: {
                show: false, // wether to show data point markers.
            },
            pointLabels: {
                show: false
            }
        },
        axes: {
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                tickOptions: {
                    show: false
                },
                lastPropertyConvenience: 0
            },
            yaxis: {
                // Don't pad out the bottom of the data range.  By default,
                // axes scaled as if data extended 10% above and below the
                // actual range to prevent data points right on grid boundaries.
                // Don't want to do that here.
                padMin: 0
            }
        },
        legend: {
            show: false,
            location: 'e',
            placement: 'outside'
        },
        grid: {
            drawGridLines: true, // wether to draw lines across the grid or not.
            shadow: false, // no shadow
            borderWidth: 1,
            background: 'white', // CSS color spec for background color of grid.
            lastPropertyConvenience: 0
        },
        lastPropertyConvenience: 0
    });
});

    $(document).ready(function () {
        //Numbers derived from desired image
        //var s1 = [10, 29, 35, 48, 0];
        //var s2 = [34, 24, 15, 20, 0];
        //var s3 = [18, 19, 26, 52, 0];
        //Scale to get 30 max on plot
        var s1 = [2, 5.8, 7, 9.6, 0];
        var s2 = [6.8, 4.8, 3, 4, 0];
        var s3 = [3.6, 3.8, 5.2, 10.4, 0];
        plot4 = $.jqplot('chart5', [s1, s2, s3], {
            // Tell the plot to stack the bars.
            stackSeries: true,
            captureRightClick: true,
            seriesColors: ["#754DE9", "#666666", "#000000"],
            seriesDefaults: {
                shadow: false,
                renderer: $.jqplot.BarRenderer,
                rendererOptions: {
                    // jqPlot does not obey these options except barWidth.
                    show: true,
                    barPadding: 0,
                    barMargin: 66,
                    barWidth: 38,
                    // Highlight bars when mouse button pressed.
                    // Disables default highlighting on mouse over.
                    highlightMouseDown: false
                },
                title: {
                    text: '', // title for the plot,
                    show: false,
                },
                markerOptions: {
                    show: false, // wether to show data point markers.
                },
                pointLabels: {
                    show: false
                }
            },
            axesDefaults: {
                //show: false    
            },
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    tickOptions: {
                        show: false
                    },
                    lastPropertyConvenience: 0
                },
                yaxis: {
                    show: false,
                    // Don't pad out the bottom of the data range.  By default,
                    // axes scaled as if data extended 10% above and below the
                    // actual range to prevent data points right on grid boundaries.
                    // Don't want to do that here.
                    padMin: 0,
                    tickOptions: {
                        show: false
                    },
                }
            },
            legend: {
                show: false,
                location: 'e',
                placement: 'outside'
            },
            grid: {
                drawGridLines: false, // wether to draw lines across the grid or not.
                shadow: false, // no shadow
                borderWidth: 10,
                background: 'transparent', // CSS color for background color of grid.
                gridLineColor: 'transparent', // *Color of the grid lines.
                borderColor: 'transparent', // CSS color for border around grid.
                lastPropertyConvenience: 0
            },
            lastPropertyConvenience: 0
        });
    });
```

```
#cover1 {
    padding:0;
    margin: 0;
    background-color: white;
    left: 451px;
    width: 88px;
    /* Uncomment the next three lines to have a border on the right of the graph and 
         balanced whitespace:*/
    /*
    border-left: 2px solid #CCCCCC;
    left:476px;
    width: 62px;
    */
}
#chart4 .jqplot-xaxis-tick {
    visibility: hidden;
}
#chart5 .jqplot-xaxis-tick {
    visibility: hidden;
}
#chart4 .jqplot-yaxis-tick {
    font: 9px arial
}
```

```
<link class="include" rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/jqplot/1.0.8/jquery.jqplot.css" />

<!--[if lt IE 9]><script language="javascript" type="text/javascript" src="http://cdn.jsdelivr.net/excanvas/r3/excanvas.js"></script><![endif]-->
<script class="include" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<!-- Main jqPlot -->
<script class="include" type="text/javascript" src="http://cdn.jsdelivr.net/jqplot/1.0.8/jquery.jqplot.js"></script>
<!-- Additional jqPlot plugins -->
<script class="include" type="text/javascript" src="http://cdn.jsdelivr.net/jqplot/1.0.8/plugins/jqplot.barRenderer.min.js"></script>
<script class="include" type="text/javascript" src="http://cdn.jsdelivr.net/jqplot/1.0.8/plugins/jqplot.categoryAxisRenderer.min.js"></script>

<div style="position:absolute; left:10px; top:10px;">
    <div id="chart4" style="width:548px; height:185px;"></div>
    <div id="chart5" style="width:536px; height:185px; top:-185px; left:53px;"></div>
    <div id="cover1" style="position: relative; height: 152px; top:-361px;"></div>
</div>
```

上面的代码基于[问题中列出的示例页面](http://www.jqplot.com/tests/bar-charts.php)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T17:54:13.740

实用的解决方案...

```
 $(document).ready(function(){
  var s1 = [2, 0, 0, 10,11,0, 6, 2, 0,10,11];
  var s2 = [7, 0, 0, 4,11,0, 6, 2, 0,10,11];
  var s3 = [4, 0, 0, 7,11,0, 6, 2, 0,10,11];
  var s4 = [0, 20, 0, 0,0,0, 0, 0, 0,0,0];
  plot3 = $.jqplot('chart3', [s1, s2, s3,s4], {
    stackSeries: true,
    captureRightClick: true,
    seriesDefaults:{
      renderer:$.jqplot.BarRenderer,
      rendererOptions: {
          barMargin: 30,
          highlightMouseDown: true   
      },
      pointLabels: {show: true}
    },
    axes: {
      xaxis: {
          renderer: $.jqplot.CategoryAxisRenderer
      },
      yaxis: {
        padMin: 0
      }
    },
    legend: {
      show: true,
      location: 'e',
      placement: 'outside'
    }      
  });
  $('#chart3').bind('jqplotDataClick', 
    function (ev, seriesIndex, pointIndex, data) {
      $('#info3').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
    }
  ); 
}); 
```

图片： [![在此处输入图像描述](../Images/edf00743661c27229a6caa40f92eb818.png)](https://i.stack.imgur.com/JoCt9.png)

# c# - 将对象 X 转换为继承 X 的对象 Y

> ID：13968311
> 
> 赞同：0
> 
> 时间：2012-12-20T08:53:07.887
> 
> 标签：c#, casting

我有一个继承 TcpClient 的 X 类和一个 TcpListener。我希望当我调用返回 TcpClient 的 AcceptTcpClient() 时，我将获得一个 X 类，或者能够将这个 TcpClient“转换”到我的类 X。

我不能做像 (X)TcpClient 这样的事情，所以我有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:55:53.517

那是不可能的。如果对象具有正确的运行时类型，您只能向下转换。

相反，您可以使用接受 TcpClient 的构造函数创建一个适配器，然后添加它自己的功能。

```
class MyTcpClientAdapter
{
    private TcpClient tcpClient;

    public MyTcpClientAdapter(TcpClient tcpClient) {
        this.tcpClient = tcpClient;
    }

    // etc...
} 
```

# objective-c - 为每个 UITableViewCell 设置高度后获取 UITableViewCell 的高度

> ID：13968316
> 
> 赞同：4
> 
> 时间：2012-12-20T08:53:40.403
> 
> 标签：objective-c, ios

我为每个 UITableViewCell 设置了高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我需要获取每个 UITableViewCell 的高度

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

因为我需要在不同的单元格中添加SubView。

我尝试使用`cell.frame`& `cell.bounds`& `cell.contentView.frame`，但高度没有改变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-01T09:23:27.207

这可能为时已晚，但您可以使用委托方法：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGRect cellSize = cell.frame;
} 
```

希望它可以帮助任何人，如果我错过了什么，请告诉我。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-11T08:24:25.963

`UITableView`s方法呢， `- (CGRect)rectForRowAtIndexPath:(NSIndexPath *)indexPath`。

得到这样的矩形，

```
CGRect cellRect = [tableView rectForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-29T18:23:28.050

我这样解决了：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    // create object
    id myObj = [_arrayEvents objectAtIndex:indexPath.row];

    // create static identifier
    static NSString * myIdentifier = @"Cell";

    // create static UITableViewCell
    static UITableViewCell * cell;

    // create cell with object
    cell = [self buildCell:myIdentifier tableView:tableView obj: myObj];

    return cell.contentView.frame.size.height;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T08:59:51.297

它们是不同的东西。在 heightForRowAtIndexPath: 你告诉 UITableView 它应该使用多少垂直空间来显示相应的单元格，但这不会影响单元格的实际大小！因此，如果您希望它们匹配，您必须手动设置尺寸。

如果您不想/需要调整单元格框架的大小，您应该简单地将高度存储在自定义单元格类的属性中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T09:12:11.273

正如@ilMalvagioDottorProsci 所说，heightForRowAtIndexPath 函数返回的值不会影响单元格的实际大小。

如果你想实现每行高度由单元格高度决定。我有一个技巧。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    id aKey = [self buildCellCacheKey:indexPath];
    UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];

    if ([_cellCache objectForKey:aKey]==nil) {
        [_cellCache setObject:cell forKey:aKey];
    }

    return cell.bounds.size.height;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // for flexible height of table view cell.in this way,the cell height won't be caculate twice.
    id aKey = [self buildCellCacheKey:indexPath];
    UITableViewCell *cacheCell = [_cellCache objectForKey:aKey];
    if (cacheCell) {
        [cacheCell retain];
        [_cellCache removeObjectForKey:aKey];
        LOGDebug(@"return cache cell [%d]",indexPath.row);
        return [cacheCell autorelease];
    }

// here is the code you can config your cell..  
} 
```

# c# - RavenDb 如何在减少最终结果中将组值减少到集合中？

> ID：13968318
> 
> 赞同：1
> 
> 时间：2012-12-20T08:53:46.487
> 
> 标签：c#, linq, mapreduce, ravendb

我希望从代码中我想做什么比标题更清楚。基本上我按 2 个字段分组，并希望将结果减少到一个集合中，所有 ProductKey 在 Map 阶段构建。

```
public class BlockResult
{
    public Client.Names ClientName;
    public string Block;
    public IEnumerable<ProductKey> ProductKeys;
}

public Block()
{
    Map = products =>
            from product in products
            where product.Details.Block != null
            select new
            {
                product.ClientName,
                product.Details.Block,
                ProductKeys = new List<ProductKey>(new ProductKey[]{
                    new ProductKey{
                        Id = product.Id,
                        Url = product.Url
                    }
                })
            };

    Reduce = results =>
            from result in results
            group result by new {result.ClientName, result.Block} into g
            select new BlockResult
            {
                ClientName = g.Key.ClientName,
                Block =  g.Key.Block,
                ProductKeys = g.SelectMany(x=> x.ProductKeys)
            };
} 
```

我得到了一些奇怪的 System.InvalidOperationException 和一个源代码转储，基本上它试图用 int (?) 初始化列表。

如果我尝试仅用 IEnumerable ProductIds 替换 ProductKey（并在代码中进行适当的更改）。然后代码运行，但我没有得到任何减少的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:11:10.557

你可能不想这样做。你真的需要以这种方式查询吗？如果您知道上下文，那么您可能应该这样做：

```
var q = session.Query<Product>()
               .Where(x => x.ClientName == "Joe" && x.Details.Block == "A"); 
```

但是，要回答您的原始问题，以下索引将起作用：

```
public class Products_GroupedByClientNameAndBlock : AbstractIndexCreationTask<Product, Products_GroupedByClientNameAndBlock.Result>
{
    public class Result
    {
        public string ClientName { get; set; }
        public string Block { get; set; }
        public IList<ProductKey> ProductKeys { get; set; }
    }

    public class ProductKey
    {
        public string Id { get; set; }
        public string Url { get; set; }
    }

    public Products_GroupedByClientNameAndBlock()
    {
        Map = products =>
                from product in products
                where product.Details.Block != null
                select new {
                                product.ClientName,
                                product.Details.Block,
                                ProductKeys = new[] { new { product.Id, product.Url } }
                            };

        Reduce = results =>
                    from result in results
                    group result by new { result.ClientName, result.Block }
                    into g
                    select new {
                                g.Key.ClientName,
                                g.Key.Block,
                                ProductKeys = g.SelectMany(x => x.ProductKeys)
                            };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:01:07.777

复制时，我得到相同的 InvalidOperationException，指出它不理解索引定义（为简洁起见，省略了堆栈跟踪）。

网址：“/indexes/Keys/ByNameAndBlock” System.InvalidOperationException：无法理解查询：

我仍然不完全确定你在这里尝试什么，所以这可能不是你所追求的，但我设法让以下工作。简而言之，Map/Reduce 处理匿名对象，因此对自定义类型进行强类型化对 Raven 来说毫无意义。

```
public class Keys_ByNameAndBlock : AbstractIndexCreationTask<Product, BlockResult>
{
    public Keys_ByNameAndBlock()
    {
        Map = products =>
              from product in products
              where product.Block != null
              select new
                  {
                      product.Name,
                      product.Block,
                      ProductIds = product.ProductKeys.Select(x => x.Id)
                  };

        Reduce = results =>
                 from result in results
                 group result by new {result.Name, result.Block}
                 into g
                 select new
                     {
                         g.Key.Name,
                         g.Key.Block,
                         ProductIds = g.SelectMany(x => x.ProductIds)
                     };
    }

}

public class Product
{
    public Product()
    {
        ProductKeys = new List<ProductKey>();
    }

    public int ProductId { get; set; }
    public string Url { get; set; }
    public string Name { get; set; }
    public string Block { get; set; }
    public IEnumerable<ProductKey> ProductKeys { get; set; }
}

public class ProductKey
{
    public int Id { get; set; }
    public string Url { get; set; }
}

public class BlockResult
{
    public string Name { get; set; }
    public string Block { get; set; }
    public int[] ProductIds { get; set; }
} 
```

# php - 为什么我必须点击两次？

> ID：13968319
> 
> 赞同：0
> 
> 时间：2012-12-20T08:53:48.327
> 
> 标签：php, login

我有一个登录页面，我必须：插入用户和密码（1 次）；单击按钮（登录按钮）两次以实际登录。我将 Xamp 与 PHP 5.3 和 HeidiSQL 一起使用。如果我已经在会话中，它会跳过登录窗口并重定向到内容页面，否则提交表单（这就是我希望它这样做）。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php
 session_start();
 include("../conect.php");

 if(isset($_SESSION['name']))

 { 
    $username = $_SESSION['name']; 
    $pass = $_SESSION['pass'];
    $check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error());

    while($info = mysql_fetch_array( $check ))  
        {
                if ($pass != $info[2]){
                    header('.<?php $_PHP_SELF ?>.');  
                }

                else
                    {   if($_SESSION['role']==0) 
                        header("Location: content0.php");

                        if($_SESSION['role']==1) 
                        header("Location: content1.php");

                        if($_SESSION['role']==2) 
                        header("Location: content2.php");
                    }
        }
 }

 //if the login form is submitted 

 if (isset($_POST['login'])) { 
    $nume=mysql_real_escape_string($_POST['username']);
    $parola=md5(mysql_real_escape_string($_POST['pass']));
    if((!$_POST['username']) || (!$_POST['pass'])) {

        die('You did not fill in a required field.');

    }

    $check_pass = mysql_query("SELECT * FROM users WHERE username = '$nume'")or die(mysql_error());
    $check2 = mysql_num_rows($check_pass);

    if ($check2 == 0) {
        die("That user does not exist in our database");
    }

    while($data = mysql_fetch_array( $check_pass )) {
            //gives error if the password is wrong
            if ($parola != $data[2]) {

                die('Incorrect password, please try again.');
            }
            else {  
                        $result = mysql_query("SELECT * FROM users WHERE username = '$nume'")or die(mysql_error());
                        while($data=mysql_fetch_row($result)){
                            $_SESSION['name']=$data[1];
                            $_SESSION['pass']=$data[2];
                            $_SESSION['role']=$data[3];
                        }
                    }
                } 

} 

mysql_close($con);
?>

<html>

<head>
<title>Login</title>
<link rel="stylesheet" href="/css/butoane.css" type="text/css" />
<link rel="stylesheet" href="/css/admin_tools.css" type="text/css" />
<script>

</script>
</head>
<body id="login_background">

<div id="ambele">
<div class="form_box">

    <form action="<?php $_PHP_SELF ?>" method="post">
    <label for="username">Username</label><input type="text" id="username" name="username" maxlength="40"/>
    <label for="password">Password</label><input type="password" id="password"name="pass" maxlength="20"/>
    <input type="submit" name ="login" value="Login" class="button"/>
    </form>
</div>

<div id="register"> 
<a href="registration_form.php" id="reg">Not registered yet? Go to Registration</a>
</div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:05:46.647

我认为您需要退出脚本才能进行重定向。

```
<?php
header('Location: content.php');
die();
?> 
```

此外，您将 PHP 标记放置在错误的位置。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php
[...]
?>
[...] 
```

这将导致`Headers already sent`PHP 中的错误，因为您在进行重定向之前已经向客户端发送了一些内容。

# c# - DataContext="{Binding}" 是什么意思？

> ID：13968321
> 
> 赞同：23
> 
> 时间：2012-12-20T08:53:52.507
> 
> 标签：c#, wpf, xaml

我正在尝试找出 HeaderedContentControl 中的项目在不是我的项目中来自哪里。这是代码：

```
 <HeaderedContentControl 
            Content="{Binding Path=Workspaces}"
            ContentTemplate="{StaticResource WorkspacesTemplate}"
            Header="Workspaces"
            Style="{StaticResource MainHCCStyle}" 
            DataContext="{Binding}" // <--- this 
       />

<DataTemplate x:Key="WorkspacesTemplate">
<TabControl 
  IsSynchronizedWithCurrentItem="True" 
  ItemsSource="{Binding}" 
  ItemTemplate="{StaticResource ClosableTabItemTemplate}"
  Margin="4"
  /> 
```

所以让我们检查一下：

1.  ContentTemplate 属性描述了项目的显示方式。
2.  WorkspacesTemplate 将 ItemsSource 的属性设置为 {Binding}，这意味着它已绑定到其 DataContext 属性（HeaderedContentControl 的 DataContext）
3.  所以我查看了 HeaderedContentControl 的 dataContext，但它也被描述为“{Binding}”......

这意味着什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T09:04:16.377

如果没有看到更多代码，很难确定，但`DataContext="{Binding}"`通常是不必要的，因为当前绑定上下文中的任何对象都会自动将其`DataContext`属性设置为`{Binding}`.

记住：

*   `Property="{Binding}"`意思是“设置`this.Property`为”的评估`this.DataContext`值
*   `Property="{Binding Path=SubProperty}"`意思是“设置`this.Property`为”的评估`this.DataContext.SubProperty`值
*   ETC

这意味着这`DataContext="{Binding}"`意味着“设置`this.DataContext`为”的评估值`this.DataContext`，这（在大多数情况下）是多余的！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-27T14:20:43.123

`{Binding}`类似于绑定'this'或当前数据上下文-从父母分配或继承。为了更好地理解，等价于`{Binding}`is`{Binding .}`或`{Binding Path=.}`

# c# - 将 NameValueCollection 插入到数据表中，这给了我错误，例如此行已属于此表

> ID：13968322
> 
> 赞同：2
> 
> 时间：2012-12-20T08:53:54.493
> 
> 标签：c#, asp.net

asp.net 和 C# 的新手，任何帮助都会很棒谢谢。

我的代码

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string x = "item_name1=number1&item_number1=product1";
        NameValueCollection key = HttpUtility.ParseQueryString(x);
        DataTable Theproducts = new DataTable();

        Theproducts.Columns.Add("ProductID");
        Theproducts.Columns.Add("ProductName");
        DataRow row = Theproducts.NewRow();        
        int index = 1;
        foreach(string keys in key.AllKeys)
        {
            if (keys == ("item_number" + index.ToString()))
            {
                row["ProductID"] = key[keys];
            }
            if (keys == ("item_name" + index.ToString()))
            {
                row["ProductName"] = key[keys];
            }
            Theproducts.Rows.InsertAt(row, 0);
        }
        GridView1.DataSource = Theproducts;
        GridView1.DataBind();
    }//end of button 
```

收到错误此行已属于此表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:55:24.803

您需要`DataRow`在 foreach 循环内移动声明。

```
foreach(string keys in key.AllKeys)
{
      DataRow row = Theproducts.NewRow(); 
      if (keys == ("item_number" + index.ToString()))
      {
            row["ProductID"] = key[keys];
      }
      if (keys == ("item_name" + index.ToString()))
      {
            row["ProductName"] = key[keys];
      }
      Theproducts.Rows.InsertAt(row,0);
} 
```

目前，您正在**foreach 循环之外**创建 DataRow 对象，并且在每次迭代中，您都尝试将相同的对象插入到数据表中。这就是您收到错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:55:52.833

您需要将行插入移动到循环之外

```
 DataRow row = Theproducts.NewRow();
    foreach(string keys in key.AllKeys)
    {
      -------
    }      
    Theproducts.Rows.InsertAt(row, 0); 
```

在您的代码中，您尝试为每个存在的键插入相同的行（两次或多次）。但是您的表架构需要一行只有两列。
因此，在尝试插入之前，您需要等待循环结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:56:38.420

就像您每次都将相同的实例（行）添加到数据表中一样。您正在修改同一个行对象。将新行创建移动到循环中将解决该问题，因为在每次迭代中都会创建新行对象

```
 int index = 1;
    foreach(string keys in key.AllKeys)
    {
        DataRow row = Theproducts.NewRow();

        if (keys == ("item_number" + index.ToString()))
        {
            row["ProductID"] = key[keys];
        }
        if (keys == ("item_name" + index.ToString()))
        {
            row["ProductName"] = key[keys];
        }
        Theproducts.Rows.InsertAt(row, 0);
    } 
```

# java - 在 JCheckBox 中有一个左右对齐的标签

> ID：13968323
> 
> 赞同：12
> 
> 时间：2012-12-20T08:53:54.817
> 
> 标签：java, swing, jcheckbox

我将从我想要的开始，然后从那里开始：

```
+------------------------------------------+
|[] jCheckBox                       jLabel |
+------------------------------------------+ 
```

基本上我想要一个`JCheckBox`带有 2 段文本，1 段左对齐和 1 段右对齐。我希望整个框都是可点击的，并且完全像一个`JCheckBox`（就像我按下鼠标一样，它会突出显示框等）。

现在我试过了：

*   在文本框内使用 HTML，并带有如下行的表格：`<html><table width=100%><tr width=100%><td>Left Text</td><td align=right>Right Text</td></tr></table>`。这在`[] Left TextRightText`没有任何视觉对齐的情况下产生。

*   将`JCheckBox`和都添加`JLabel`到面板中，但这需要我实现所有鼠标事件并在`JCheckBox`. 我把它放在一边——但是我愿意重新考虑这是否是唯一的选择

*   将 JLabel 添加到 JCheckBox

    *   首先，这导致 JCheckBox 决定更改字体，因此必须“调整”
    *   其次，基线偏离了 1 或 2 个像素，这是通过实现将 LayoutManager 放置`JLabel`在基线上来解决的。
    *   第三，`JLabel`与文本重叠，`JCheckBox`所以我调整我的布局管理器，但是（的）`JCheckBox`没有给出正确的结果。`getPreferedSize()``[1,1]`

所以，基本上我的问题是：我应该如何实现这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:28:41.757

*   创建父级`JLabel`，`JLabel`没有实现任何`LayoutManager`，然后设置正确`LayoutManager`，我认为 GridLayout( `with 2 segments of text, 1 left aligned and 1 right aligned`)

*   添加两个`JLabels`正确对齐的 ( `JLabel.setHorizontalAlignment(javax.swing.SwingConstants.XXX);`)

*   `JCheckBox`与父母`JLabel`( `JLabel.setLabelFor(JCheckBox);`)放在一起

*   [JLabel 中的 MultiIcon](https://stackoverflow.com/questions/8575641/how-returns-xxxsize-from-jcomponents-added-to-the-jlabel)方法相同

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:00:43.587

这就是我设法使用 JCheckBox 作为父类来实现它的方法。这是缺少设置标签文本和颜色的方法。

```
package mock.dlect;

import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.LayoutManager;
import javax.swing.Icon;
import javax.swing.JCheckBox;
import javax.swing.JLabel;

public class LeftRightCheck extends JCheckBox {

    private final static JCheckBox DEFAULT_CHECK_BOX = new JCheckBox();
    private final JLabel rightLabel;

    public LeftRightCheck(String leftText, String rightText, Icon icon,
            boolean selected) {
        super(leftText, icon, selected);
        rightLabel = new JLabel(rightText, TRAILING);
        // TODO figure out how to make the font work right on OSX
        this.setLayout(new BaseLineSingleElementLayoutManager(10));
        this.add(rightLabel);
    }

    @Override
    public final void setFont(Font font) {
        font = font.deriveFont(DEFAULT_CHECK_BOX.getFont().getSize2D());
        super.setFont(font);
        if (rightLabel != null) {
            rightLabel.setFont(font);
        }
    }

    private class BaseLineSingleElementLayoutManager implements LayoutManager {

        private int hgap;
        private Component component;

        public BaseLineSingleElementLayoutManager(int hgap) {
            this.hgap = hgap;
        }

        @Override
        public void addLayoutComponent(String name, Component comp) {
            // Do Nothing
        }

        @Override
        public void removeLayoutComponent(Component comp) {
            // Do Nothing
        }

        @Override
        public Dimension preferredLayoutSize(Container parent) {
            if (parent != null && parent instanceof JCheckBox) {
                JCheckBox cc = (JCheckBox) parent;
                // These 2 lines will add the size of the checkbox to the
                // preferred size
                Dimension parentSize = DEFAULT_CHECK_BOX.getPreferredSize();
                parentSize.width += cc.getFontMetrics(cc.getFont()).
                        stringWidth(cc.getText()) + hgap;
                if (checkComponent(cc)) {
                    Dimension childSize = this.component.getPreferredSize();
                    parentSize.height = Math.max(parentSize.height,
                            childSize.height);
                    parentSize.width += childSize.width;
                }
                return parentSize;
            }
            return new Dimension();
        }

        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return preferredLayoutSize(parent);
        }

        @Override
        public void layoutContainer(Container parent) {
            if (!checkComponent(parent)) {
                return;
            }
            this.component.setSize(parent.getSize());
            this.component.setLocation(0, getBaseline(parent)
                    - getBaseline(this.component));
        }

        private int getBaseline(Component c) {
            return c.getBaseline(c.getWidth(), c.getHeight());
        }

        protected boolean checkComponent(Container parent) {
            if (parent == null) {
                return false;
            } else if (parent.getComponentCount() >= 1
                    && parent.getComponent(0).isVisible()) {
                this.component = parent.getComponent(0);
                return true;
            } else {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:48:17.913

```
public class LeesCheckbox extends JPanel 
{
    private JCheckBox checkbox;

    public LeesCheckbox(String leftText, String rightText){
        super(new BorderLayout());
        checkbox = new JCheckBox(leftText);
        add(checkbox, BorderLayout.WEST);
        add(new JLabel(rightText), BorderLayout.EAST);
        setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));
        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                checkbox.setSelected(!checkbox.isSelected());
            }
        });
    }

    public JCheckBox getCheckbox() {
        return checkbox;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Box content = new Box(BoxLayout.Y_AXIS);
        content.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        LeesCheckbox box = new LeesCheckbox("Left text", "Right text");
        box.setMaximumSize(new Dimension(Integer.MAX_VALUE, 25));
        content.add(box);
        content.add(Box.createVerticalGlue());

        frame.setContentPane(content);
        frame.setSize(300, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

# php - PHP：exit()、die() 和 return 有什么区别；在“自我”和包含的文件中？

> ID：13968324
> 
> 赞同：11
> 
> 时间：2012-12-20T08:53:57.063
> 
> 标签：php, return, exit, die

我还在学习 PHP。`exit()`终止脚本时，`die();`和?之间有什么区别`return;`：

1.  在同一个文件中（单个脚本文件）
2.  在 include 的子级内
3.  在 include 的父级中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T08:56:31.630

Return 返回一个值。这可以是任何东西，并且适用于功能。

[PHP中的die()和exit()有什么区别？](https://stackoverflow.com/questions/1795025/what-are-the-differences-in-die-and-exit-in-php)

[http://php.net/manual/en/function.return.php](http://php.net/manual/en/function.return.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-05T23:34:31.200

## [`die`](http://php.net/manual/en/function.die.php)和[`exit`](http://php.net/manual/en/function.exit.php)（[等效函数](https://stackoverflow.com/questions/1795025/what-are-the-differences-in-die-and-exit-in-php/27851270#27851270)）

> 终止脚本的执行。

## [`return`](http://php.net/manual/en/function.return.php)

> 将程序控制权返回给调用模块。在被调用模块调用之后的语句处继续执行。
> 
> 如果从函数内部调用，return 语句会立即结束当前函数的执行，并将其参数作为函数调用的值返回。return 还结束 eval() 语句或脚本文件的执行。
> 
> 如果从全局范围调用，则结束当前脚本文件的执行。如果包含或需要当前脚本文件，则将控制权传递回调用文件。此外，如果包含当前脚本文件，则返回的值将作为包含调用的值返回。如果从主脚本文件中调用 return，则脚本执行结束。如果当前脚本文件由 php.ini 中的 auto_prepend_file 或 auto_append_file 配置选项命名，则该脚本文件的执行结束。

* * *

# [`die`](http://php.net/manual/en/function.die.php)对比[`exit`](http://php.net/manual/en/function.exit.php)

[`die()`](http://php.net/manual/en/function.die.php)PHP和[`exit()`](http://php.net/manual/en/function.exit.php)PHP之间的区别在于它们的**起源**。

*   [`exit()`](http://php.net/manual/en/function.exit.php)来自[**C**](http://en.cppreference.com/w/c/program/exit)[`exit()`中](http://en.cppreference.com/w/c/program/exit)**。**
***   [`die()`](http://php.net/manual/en/function.die.php)来自[**Perl**](http://perldoc.perl.org/functions/die.html)。[`die`_](http://perldoc.perl.org/functions/die.html)**

 ***** * *

## PHP 手册

PHP 手册[`die`](http://php.net/manual/en/function.die.php)：

> 这种语言结构等价于[`exit()`](http://php.net/manual/en/function.exit.php).

PHP 手册[`exit`](http://php.net/manual/en/function.exit.php)：

> 注意：此语言结构等价于[`die()`](http://php.net/manual/en/function.die.php).

[函数别名列表的](http://php.net/manual/en/aliases.php)PHP 手册：

> [`die`](http://php.net/manual/en/function.die.php)是主函数的别名[`exit()`](http://php.net/manual/en/function.exit.php)

* * *

# 其他语言不同

[`die()`](http://php.net/manual/en/function.die.php)并且**在其他语言中有所不同，**[`exit()`](http://php.net/manual/en/function.exit.php)但在 PHP 中它们是相同的。

 **来自[另一个 PHP 咆哮](http://www.beastwithin.org/users/wwwwolf/code/phprant.html)：

> ...作为 C 和 Perl 编码器，我已经准备好回答：“为什么，exit() 只是以数字退出状态退出程序，而 die() 将错误消息打印到 stderr 并以 EXIT_FAILURE 状态退出。 " 但后来我记得我们正处于 PHP 的混乱语法领域。
> 
> 在 PHP 中，exit() 和 die() 是相同的。
> 
> 设计者显然认为“嗯，让我们从 C 中借用[exit()](http://en.cppreference.com/w/c/program/exit)。如果我们也像[从 Perl 中一样使用 die()，](http://perldoc.perl.org/functions/die.html) Perl 人可能会喜欢它。哎呀！我们现在有两个退出函数！让我们让它两者兼而有之可以将字符串或整数作为参数并使它们相同！”
> 
> 最终结果是，这并没有真正让事情变得“更容易”，只是更令人困惑。C 和 Perl 编码器将继续使用 exit() 仅抛出一个整数退出值，并使用 die() 抛出错误消息并以失败退出。新手和 PHP 作为第一语言的人可能会想知道“嗯，两个退出函数，我应该使用哪个？” 手册没有解释为什么会有 exit() 和 die()。
> 
> In general, PHP has a lot of weird redundancy like this - it tries to be friendly to people who come from different language backgrounds, but while doing so, it creates confusing redundancy.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T16:37:58.567

Return 是返回一个值 (char,int,string,array...) 并退出函数。

**来自 php 手册：**

> 注意：这个语言结构等价于 die()。

**但是die**和**exit**之间仍然存在区别：

> 使用 die() 你可以发布一个字符串： die("An error occurred");

使用 exit() 的结果相同

```
<?php
    echo("An error occurred <br>");
    exit(0);
?> 
```

**或者，如果您是 cli 或 unix shell：**

在命令行上使用 PHP，die("An error occurred") 简单地将“An error occurred”打印到 STDOUT 并以正常退出代码 0 终止程序。

```
<?php
    fwrite(STDERR, "An error occurred \n");
    exit(0); //
?> 
```******

# iptables - iptables：默认链字段的含义

> ID：13968333
> 
> 赞同：0
> 
> 时间：2012-12-20T08:54:21.650
> 
> 标签：iptables, chain

例如，我有一些连锁店，如：

```
*filter
:INPUT ACCEPT [368:102354]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [92952:20764374] 
```

有没有人能解释一下[368:102354]、[0:0]和[92952:20764374]是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:24:00.847

它们是计数器 - 已通过链的数据包和字节数。

# html - 星爆效果在 CSS3 中可行吗？

> ID：13968335
> 
> 赞同：20
> 
> 时间：2012-12-20T08:54:25.510
> 
> 标签：html, css, effects

有人知道下面的图像是否可以用 CSS 制作吗？亮线和暗线可以而且应该是相等的宽度，并且边缘会逐渐变暗，这样整个背景就会变成深色（在这种情况下是深蓝色）。

任何帮助都将不胜感激。我的谷歌技能对这种效果没有任何帮助，只找到了“星爆贴纸/徽章之类的东西”。

![在此处输入图像描述](../Images/0c60441b6f2f8d0831e24cd790d975aa.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T10:18:12.513

不。遗憾的是，css3 生成的图像规格不包括锥形/角度渐变（尽管它们可能会在下一个版本中出现！）这将是仅使用 css 来做到这一点的最有可能的方法。但是，您*可以*使用 css+svg 执行此操作。实际上，我曾经做过一次实验，有这个 svg 文档：

```
<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
      "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="512px" height="512px" viewBox="-256 -256 512 512" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Burst</title>
    <defs>
      <g id="burst">
        <g id="quad">
          <path id="ray" d="M0,0 -69,-500 69,-500 z" />
          <use xlink:href="#ray" transform="rotate(30)"/>
          <use xlink:href="#ray" transform="rotate(60)"/>
          <use xlink:href="#ray" transform="rotate(90)"/>
        </g>
        <use xlink:href="#quad" transform="rotate(120)"/>
        <use xlink:href="#quad" transform="rotate(240)"/>
      </g>
      <radialGradient id="grad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
        <stop offset="0%" stop-color="white" stop-opacity="0.65"/>
        <stop offset="100%" stop-color="black" stop-opacity="0.65"/>
      </radialGradient>
      <!-- a circle mask -->
      <mask id="m"><circle r="256" fill="white"/></mask>
    </defs>
    <!-- added a mask and scaled it to a different aspect ratio below. scale(x,y) -->
    <g mask="url(#m)" transform="scale(1, 0.75)"> 
      <use xlink:href="#burst" fill="lightslateblue"/>
      <use xlink:href="#burst" fill="darkslateblue" transform="rotate(15)"/>
      <circle r="360px" fill="url(#grad)" />
    </g>
    </svg>
```

将其设置为背景图像，并设置 css `background-size: cover`。而已。这是在数据 url 中使用此图像[的小提琴。](http://jsfiddle.net/Z37Ge/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-25T22:01:41.857

# 是的，这是可能的。

但这需要一些工作。

我有这个完全相同的问题，并且找不到任何使用纯 CSS 完成此效果的示例。所以，我决定修补它。

经过*大量*的实验，我终于想出了一个不仅是在 CSS 中的解决方案，而且是一个相当便携（相对而言）的解决方案。

`::before`我开始分别创建上半部分和下半部分，在`::after`伪元素上使用线性渐变技巧，第二步（到目前为止是最耗时的一步）是将两半合并为一个元素。

**工作演示：** [http ://codepen.io/pestbarn/pen/aBybeK](http://codepen.io/pestbarn/pen/aBybeK)

（原海报想要一个晕影效果，我在上面的演示中单独创建，使用带有径向渐变的 div 叠加）

我在[github.com/pestbarn/starburst.css](https://github.com/pestbarn/starburst.css)上提供了 vanilla CSS 和 Sass mixin ，您可以在官方[演示页面上](https://codepen.io/lethargic/full/RRYdxX)找到一些示例。

**这是跨浏览器吗？**

据我所知，是的。您可以在存储库中查看当前的浏览器支持。

**我可以动画吗？**

是的，就像您为任何其他元素设置动画一样。自己试试吧！

**有什么注意事项吗？**

唉，有。使用与另一种（例如亮度）大不相同的两种颜色会产生锯齿状的边缘。因此，我建议使用彼此非常相似的颜色。

此外，由于效果是使用伪元素创建的，因此在某些情况下您需要显式设置元素的高度和宽度。

随意尝试！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:00:08.537

[Lea Verou](http://permalink.gmane.org/gmane.comp.web.css.general/30546)的 CSS4[草案](http://lea.verou.me/specs/conical-gradient/)中有一个实验性属性：

```
div
{
    repeating-conical-gradient(black, black 5%, #f06 5%, #f06 10%)
} 
```

但据我了解，这只是一个建议，仅在 CSS3 中是不可能的。只需使用背景图像，或者您可以尝试在旋转元素中使用三角形图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-24T09:02:56.497

随着`conic-gradient()`CSS 规范的添加，现在可以使用用于该类型效果的 CSS 创建效果。

本质上，您将像这样设置渐变色标：

```
background-image: conic-gradient( circle,
  black 0%,  black 5%,
  white 5%,  white 10%,
  black 10%, black 15%,
  ...
); 
```

[这是一个工作小提琴](https://jsfiddle.net/marcuserronius/q2hpuLgy/)

[这是一个动画版本](https://jsfiddle.net/marcuserronius/m397uzy6/):-) 不过，我的浏览器上的动画有点不稳定。它可能会被优化一点。

请注意，这只适用于 WebKit 浏览器；即 Chrome 和 Safari。但老实说，这涵盖了大部分用户，我相信其余的用户很快就会增加对它的支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-14T09:41:01.190

目前有比“conic-gradient()”方法更好的解决方案来扩展“marcus erronius”的答案。有一个`repeating-conic-gradient`，它创建一个由重复梯度组成的图像。

```
div {
  height: 500px;
  background: repeating-conic-gradient(
    hsl(0deg 0% 80% / 31%) 0deg 15deg,
    hsla(0,0%,100%,0) 0deg 30deg
  ) #3c1c32
}
```

```
<div></div>
```

[你可以在W3 CSS Image Values](https://www.w3.org/TR/css-images-4/#example-34b67cf2)阅读更多关于它的信息。
此属性并非与所有浏览器兼容。检查[caniuse](https://caniuse.com/#feat=css-conic-gradients)了解更多信息。

# javascript - 在移动 html 应用程序中保存表单文件字段状态

> ID：13968337
> 
> 赞同：1
> 
> 时间：2012-12-20T08:54:37.830
> 
> 标签：javascript, html, mobile, offline

我正在开发简单的移动 html 应用程序，其中主要部分是提交一些报告的表单。我需要让这个应用程序离线工作。这很简单。我可以将所有字段保存到 localStorage 等，除了文件字段之一。

有什么办法，我怎样才能获得文件输入的内容，保存值并恢复它们？

或者这样的事情可以用PhoneGap或类似的系统来构建本机html应用程序吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:00:18.090

最新的浏览器和移动浏览器支持 FileSystem API。这是一个相当简单的代码，一旦你使用它们。

请参考[html5rocks 文章](http://www.html5rocks.com/en/tutorials/file/filesystem/)，我个人学习 API 时使用的。

如果你想通过 Phonegap 路线，它在 phonegap 上几乎是相似的。请参阅[PhoneGap 文件 API](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#File)。

# c# - 为什么我在打开连接时收到“关闭阅读器时调用 HasRows 的尝试无效”？

> ID：13968342
> 
> 赞同：3
> 
> 时间：2012-12-20T08:55:04.990
> 
> 标签：c#, .net, sql-server-2008

我有这个代码：

```
// this is managed elsewhere
SqlConnection connection =...
connection.Open();

// this is one block of code, separate from the above
using( var transaction = connection.BeginTransaction() ) {
   using( var command = connection.CreateCommand() ) {
     command.Transaction = transaction;
     command.CommandText = ...
     using( var reader = command.ExecuteReader() ) {
         if( reader.HasRows ) {
             if( reader.Read() ) {
                 //get data from the reader
             }
         }
     }
} 
```

而且这段代码大部分时间都运行得很好。然而有时 - 很少 - 检索会`HasRows`产生以下异常：

```
Invalid attempt to call HasRows when reader is closed.
System.InvalidOperationException
  at System.Data.SqlClient.SqlDataReader.get_HasRows()
  // my code calling HasRows listed here 
```

我有 99.5% 的把握在那一刻连接是打开的。我的代码`HasRows`在从读者那里阅读之前使用，[就像 MSDN 建议的那样](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.80%29.aspx)。

该异常的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:00:27.267

这恰好是[意外的行为`ExecuteReader()`](https://stackoverflow.com/q/14229310/57428)- 很可能是一个错误。内部深处`ExecuteReader()`发生了一些随机错误，很可能是网络超时，连接关闭，然后`SqlDataReader`返回关闭，就好像什么都没发生一样。难怪后续调用会`HasRows`产生异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:16:56.270

quickfix 您可以添加一个检查以查看您的连接是否在 hasrows 之前打开，如果连接已关闭，请再次打开您的连接

但我建议您也在那里添加体面的日志记录（我很好奇；））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:34:35.267

我担心您在上面的评论，即您不是每次都创建连接。让连接池担心开销。您应该每次都创建一个连接。创建连接，进行读取，销毁连接。长期存在的连接可能会在服务器之间丢弃通信时出现间歇性问题（所需要的只是超时或一些丢弃的数据包）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:03:51.353

你有没有在任何地方声明你的 DataReader????

此外，如果您有 BeginTransaction() 函数，那么该函数应该具有您想要执行的命令类型的功能，即 executeReader、ExecuteNonQuery 等。首先检查您的阅读器：

```
ISReading... 
```

然后继续使用 reader.hasRow。

DataReader 还存储一个完整的表，所以你应该检查 Tables[0].rows

# git - 控制 Git 存储库的默认克隆文件夹

> ID：13968344
> 
> 赞同：3
> 
> 时间：2012-12-20T08:55:10.357
> 
> 标签：git

当我们克隆一个 git 存储库时，我们可以要求 git 创建一个目录来填充 git 目录，这要归功于以下命令：

```
git --clone http://bitbucket.org/....../myrepo.git ToToFolder 
```

在这里，myrepo.git 将被克隆到 ToToFolder。

如果我使用相同的命令而不强制克隆到 ToToFolder，则克隆将在*“源存储库的“人性化”部分”中*完成，因此进入文件夹 myrepo。

我正在创建一个 git repo，我想控制“默认克隆文件夹”的名称，而不更改我的 repo 的名称。所以我有一个名为“myrepo.git”的仓库，如果有人打电话给我，我希望这样：

```
git --clone http://bitbucket.org/....../myrepo.git 
```

将 repo 克隆到一个名为“ToToFolder”的文件夹中。

是否可以 ？如果是的话，我该如何管理它？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:31:24.737

不 - 无法更改 repo 将具有客户端的名称。您可以创建一个更复杂的解决方案，该解决方案需要服务器上的一些设置和客户端上的自定义脚本，但我想这不是您想要的。

# php - Imagick：PNG 支持在命令行中可用，但在 PHP 中不可用

> ID：13968345
> 
> 赞同：1
> 
> 时间：2012-12-20T08:55:12.323
> 
> 标签：php, image, png, imagick

我发现我的 Imagick 安装中没有 PNG 支持，所以我安装了**libpng**。现在我可以看到运行命令时支持 PNG 格式

```
convert -list format 
```

从 PNG 到 JPG 的转换可以从命令行正常工作：

```
convert a.png b.jpg 
```

但是当我尝试在 PHP 中读取 PNG 文件时：

```
 $src = new \Imagick();
    $src->readImageBlob( file_get_contents($file) ); // reading PNG format 
```

- 它给了我**错误 500（“...没有此图像格式的解码委托”）**

此外，当我运行时`phpinfo()`- 我在 Imagick 支持的文件格式列表中看不到 PNG。还有很多其他的，但没有PNG。

我尝试重新安装 PHP Imagick 驱动程序，然后重新启动 apache - 仍然没有成功。

PS：我有 PHP 5.4 @ CentOS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:10:46.347

根据安装要求。“Imagick 支持的格式数量完全取决于 ImageMagick 安装支持的格式数量。” 我想你需要重建 PHP imagemagick 扩展。见这里： http: [//php.net/manual/en/imagick.installation.php](http://php.net/manual/en/imagick.installation.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:29:47.587

问题解决了。

我从下面的链接中使用了 Imagick 安装指南@CentOS，完全按照那里所说的重新安装了所有内容，并且它有所帮助**-** [http://www.directadmin.com/forum/showthread.php?t=44449&page=1](http://www.directadmin.com/forum/showthread.php?t=44449&page=1)

# php - PHP 变量到 JavaScript

> ID：13968347
> 
> 赞同：1
> 
> 时间：2012-12-20T08:55:19.493
> 
> 标签：php, javascript, jquery

如何将 php variabele 的值添加到 jquery 变量并添加它们，我有一个表单，它将获取一个值并发布到第二页，其中第二页包含一个 div 面板，其中表单复选框值正在添加和减去，基本上我想要将提交的值从page1添加到page2。这是代码。我有3个表单值将被一个一个重定向。每当用户提交相应的按钮时

```
if($_POST['submit'])
{
$beg=$_POST['basic'];
}

function refreshPrices() {

    var currentTotalValue = 0;
    var beg=?????
    $("#results div").each(function() {
        if (!isNaN(parseInt($(this).find("span").text().substring(1)))) {
            currentTotalValue += parseInt($(this).find("span").text().substring(1));
        }
    });

    $("#totalValue").text("$" + currentTotalValue)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:56:47.250

```
var beg=<?php echo $beg; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:59:20.247

尝试这个：

```
var beg = '<?php echo $beg ;?>'; 
```

如果你想增加总价值，你可以这样做：

```
currentTotalValue = currentTotalValue + parseInt(beg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:46:51.270

通过输入类或 id （如 dat）检索值

var beg = $("#basic").val();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:03:25.613

最好这样做：

```
var js_var = '<?=json_encode($php_var);?>'; 
```

通过这种方式，您将能够将任何类型的数据传输到 js（数组、对象、字符串等）并像这样轻松访问它：

```
js_var['element'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:05:26.650

```
var beg = '<?php echo $beg ;?>'; 
```

**但这在页面加载期间只能是一次。之后我们不能将服务器端脚本分配给 js。**

# magento - 会话刷新在 magento 中不适用于 memcache

> ID：13968350
> 
> 赞同：1
> 
> 时间：2012-12-20T08:55:32.820
> 
> 标签：magento, session, memcached

我已经成功配置`memcache`了会话`magento`并且它工作正常。现在我想通过使用 memcache 对象从 magento 本身刷新 memcache 会话。我努力了

```
$memcache = new Memcache();
$memcache->flush();
$memcache->flush_all();
$memcache->delete(arguments); 
```

但从上面看，没有什么对我有用。

我可以从命令行刷新所有会话，但不能从脚本中完成。在这里，我`ubuntu`用作操作系统。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:28:02.550

尝试使用：

```
Mage::app()->getCacheInstance()->flush(); 
```

它清理缓存存储，包括 memcached 数据。我正在使用 memcache，这是我清理缓存数据的 shell 脚本：

```
ini_set("display_errors", 1);

require '../app/Mage.php';
Mage::app('admin')->setUseSessionInUrl(false);
Mage::getConfig()->init();

try {
    Mage::app()->cleanCache(); // Clean Magento caches
    Mage::app()->getCacheInstance()->flush(); // Clean cache storage

    echo "\033[01;31m Cache instances were flushed successfully \033[0m \n";
    flush();
} catch (Exception $e) {
    echo "\nAn error was occurred: " . $e->getMessage() . "\n";
    flush();
} 
```

它正在清理内存缓存存储。Memcache 默认使用一个存储来存储缓存和会话。如果要从当前 memcached 会话中删除所有数据，请使用类（或某些子类）Mage_Core_Model_Session_Abstract_Varien。有一个方法 unsetAll 从会话中删除所有数据。该方法还会清除 memcached 会话（如果有）。

# csv - 使用 spamwriter.writerow 在两列 csv 中输出使用美丽汤刮取的数据时出现问题

> ID：13968353
> 
> 赞同：1
> 
> 时间：2012-12-20T08:55:34.143
> 
> 标签：csv, python-2.7, beautifulsoup

我正在使用漂亮的汤从网站上抓取 2 组数据，我希望它们在 csv 文件中并排输出 2 列。我为此使用 spamwriter.writerow([x,y]) 参数，但我认为由于我的递归结构中的一些错误，我在我的 csv 文件中得到了错误的输出。以下是参考代码：

```
import csv
import urllib2
import sys  
from bs4 import BeautifulSoup
page = urllib2.urlopen('http://www.att.com/shop/wireless/devices/smartphones.html').read()
soup = BeautifulSoup(page)
soup.prettify()
with open('Smartphones_20decv2.0.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')        
    for anchor in soup.findAll('a', {"class": "clickStreamSingleItem"},text=True):
        if anchor.string:
            print unicode(anchor.string).encode('utf8').strip()         

    for anchor1 in soup.findAll('div', {"class": "listGrid-price"}):
        textcontent = u' '.join(anchor1.stripped_strings)
        if textcontent:
            print textcontent
            spamwriter.writerow([unicode(anchor.string).encode('utf8').strip(),textcontent]) 
```

我在 csv 中得到的输出是：

```
Samsung FocusÂ® 2 (Refurbished) $99.99
Samsung FocusÂ® 2 (Refurbished) $99.99 to $199.99 8 to 16 GB
Samsung FocusÂ® 2 (Refurbished) $0.99
Samsung FocusÂ® 2 (Refurbished) $0.99
Samsung FocusÂ® 2 (Refurbished) $149.99 to $349.99 16 to 64 GB 
```

问题是我在第 1 列中只获得 1 个设备名称，而不是所有设备名称，而所有设备的价格都在上涨。请原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:02:18.687

您正在使用`anchor.string`, 而不是`archor1`. `anchor`是上一个循环中的*最后*一项，而不是当前循环中的项。

也许在这里使用更清晰的变量名有助于避免混淆；使用`singleitem`，`gridprice`也许？

可能是我误解了，您想将每个`anchor1`与相应的`anchor`. 您必须将它们循环在一起，也许使用`zip()`：

```
items = soup.findAll('a', {"class": "clickStreamSingleItem"},text=True)
prices = soup.findAll('div', {"class": "listGrid-price"})
for item, price in zip(items, prices):
    textcontent = u' '.join(price.stripped_strings)
    if textcontent:
        print textcontent
        spamwriter.writerow([unicode(item.string).encode('utf8').strip(),textcontent]) 
```

*通常*，循环遍历父表行应该更容易，然后在循环中找到该行中的单元格。但是`zip()`，只要`clickStreamSingleItem`单元格与`listGrid-price`匹配项对齐，它也应该起作用。

# php - 如何只重写2个文件夹htaccess

> ID：13968354
> 
> 赞同：2
> 
> 时间：2012-12-20T08:55:36.463
> 
> 标签：php, .htaccess

每个人。我只需要重定向 2 个文件夹：

```
example.com/foo/
example.com/bar 
```

至

```
example.com/index.php?i=foo
example.com/index.php?i=bar 
```

我的 htaccess：

```
RewriteEngine on
RewriteRule ^/foo/$ /index.php?i=foo [L]
RewriteRule ^/bar/$ /index.php?i=bar [L] 
```

但是当我打开 /foo/ 或 /bar/ 时，我仍然得到 404

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:58:37.827

删除前导正斜杠：

```
RewriteEngine on
RewriteRule ^foo/?$ index.php?i=foo [L]
RewriteRule ^bar/?$ index.php?i=bar [L] 
```

我还将目录名称的尾部斜杠设为可选。

# javascript - FB JS SDK没有选择范围

> ID：13968362
> 
> 赞同：0
> 
> 时间：2012-12-20T08:56:01.117
> 
> 标签：javascript, facebook, api, facebook-graph-api, facebook-javascript-sdk

这是我在这里发布的第一个问题，但在过去发现堆栈不仅仅是有用的。我还应该说我已经搜索了很多小时，阅读了许多已经提出的问题，但仍在苦苦挣扎。

所以，我正在编写一个 FB 应用程序，我的问题是 JS SDK，我已经在 FB 的开发人员区域设置了权限，并且还在 FB.login 中指定了“范围”，但是在一个干净的（全新的帐户) 版本的 FB，我没有被要求提供我指定的权限，特别是 publish_stream 和 photo_upload。如果不正常工作，所有上传的图像都需要用户在他们的相册中“批准”，这很烦人，用户不太可能这样做。

当我检查我的开发者帐户的权限时，我拥有正确的权限，但我无法理解为什么我的两个帐户之间存在差异。

这是我指定了“范围”的登录功能：

```
function login() {
FB.login(function(response) {
    if (response.authResponse) {
        // connected
        var access_token =   FB.getAuthResponse()['accessToken'];
        console.log('Access Token = '+ access_token);
        testAPI();
    } else {
        // cancelled
    }
}, {scope:'publish_stream,photo_upload'}); 
```

}

任何帮助将不胜感激，如果我错过了任何信息，请轻推我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:10:20.043

可能是您使用的是旧的 SDK，这就是它不起作用的原因。早些时候，权限的属性名称不是“范围”，而是“perms”，所以尝试使用“perms”并检查它是否有效。

# r - 基于时间间隔的R中时间序列数据的局部和全局极值点

> ID：13968363
> 
> 赞同：0
> 
> 时间：2012-12-20T08:56:02.627
> 
> 标签：r, extract, time-series, max, minimum

我是 R 的新手。实际上，我有一个时间序列数据，我想每隔一小时确定一次极值点。此外，数据包括温度和日期时间列，其中数据时间为时间戳格式。提取的点应包括局部点和全局点。

表名是 p2，列有 temperature 和 date_time。

```
 temperature   date_time
1      0.34 2007-09-30 00:01:30
2      0.32 2007-09-30 00:03:30
3      0.26 2007-09-30 00:05:30
4      0.21 2007-09-30 00:07:30
5      0.14 2007-09-30 00:09:30
6      0.17 2007-09-30 00:11:30
7      0.16 2007-09-30 00:13:30
8      0.03 2007-09-30 00:15:30
9      0.02 2007-09-30 00:17:30
10     0.01 2007-09-30 00:19:30
11    -0.06 2007-09-30 00:21:30
12    -0.01 2007-09-30 00:23:30
13    -0.10 2007-09-30 00:25:30
14    -0.10 2007-09-30 00:27:30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:35:56.750

计算每小时的全局极值：

```
p2$date_time <- as.POSIXct(df$date_time,tz="GMT")
p2$hours <- format(df$date_time,"%Y-%m-%d %H")
library(plyr)

p2_1 <- ddply(p2,.(hours),function(x) data.frame(min.pos=x$date_time[which.min(x$temperature)],
                                         min=min(x$temperature),
                                         max.pos=x$date_time[which.max(x$temperature)],
                                         max=max(x$temperature)))

          hours             min.pos   min             max.pos   max
1 2007-09-30 00 2007-09-30 00:41:31 -0.24 2007-09-30 00:01:30  0.34
2 2007-09-30 01 2007-09-30 01:01:31 -0.25 2007-09-30 01:05:31 -0.16 
```

# authentication - 使用另一个字段而不是使用电子邮件字段设计身份验证

> ID：13968367
> 
> 赞同：0
> 
> 时间：2012-12-20T08:56:11.897
> 
> 标签：authentication, devise

我尝试在 devise.rb 中设置 config.authentication_keys = [:actor_id]，这是我的表单：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

    <div><%= f.label :name %><br />
  <%= f.text_field :name %></div>
  <div><%= f.label :serial_number %><br />
  <%= f.text_field :serial_number %></div>
  <div><%= f.label :email %><br />
  <%= f.text_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.submit "Sign up" %></div>
<% end %> 
```

我将名称、序列号和电子邮件值保存在我的自定义表中，而不是设计生成的表中，我还删除了默认电子邮件字段。但它仍然抛出以下错误：

```
Can't mass-assign protected attributes: email 
```

我试图将电子邮件重命名为电子邮件，它抛出以下错误：

```
undefined method `downcase!' for 1:Fixnum 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:24:07.193

您需要将此添加到您的用户模型中：

```
attr_accessible :email 
```

检查这个 Railscast 并学习 :)

[http://railscasts.com/episodes/26-hackers-love-mass-assignment](http://railscasts.com/episodes/26-hackers-love-mass-assignment)

# c# - 调用者未通过服务 wsDualHttpBinding 的身份验证

> ID：13968369
> 
> 赞同：0
> 
> 时间：2012-12-20T08:56:17.407
> 
> 标签：c#, wcf

我已经搜索并尝试应用其他帖子中给出的解决方案，但我还不能解决我的问题。

我必须使用 wsDualHttpBinding 进行双工连接。当我尝试在与 WCF 服务器相同的机器上运行我的客户端时，它可以完美运行，但是当我将客户端移动到同一域上的其他机器时，它返回错误“调用者未通过服务身份验证”

这是我客户端上的 app.config

```
<wsDualHttpBinding>
  <binding name="duplexendpoint" closeTimeout="00:01:00" openTimeout="00:01:00"
      receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false"
      transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
  <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
      maxBytesPerRead="4096" maxNameTableCharCount="16384" />
  <reliableSession ordered="true" inactivityTimeout="00:10:00" />
  <security mode="Message">
      <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default"/>
  </security>

  </binding>
</wsDualHttpBinding> 
```

然后我尝试通过代码提供凭证：

```
client.ClientCredentials.Windows.ClientCredential.UserName = "serverusername";
client.ClientCredentials.Windows.ClientCredential.Password = "serverpassword";
client.ClientCredentials.Windows.ClientCredential.Domain = "serverdomain"; 
```

并给出错误“客户端无法在配置的超时时间内完成安全协商”

有什么办法可以解决我的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T03:20:22.423

好的，我找到了解决问题的方法，我必须从客户端机器上关闭防火墙。

# qt - 如何在 Qt5 和 QML 中使用 QtQuick.Window 元素？

> ID：13968370
> 
> 赞同：3
> 
> 时间：2012-12-20T08:56:22.473
> 
> 标签：qt, window, qml, qt5

我最近为 Mac OS X 安装了 Qt5 RC2 并开始开发一些 QML 应用程序。看了新元素后，特别想试试Window和Screen Element。(http://qt-project.org/doc/qt-5.0/qtquick/qmlmodule-qtquick-window2-qtquick-window-2.html)

所以我将导入设置在文件的顶部，如下所示：

导入 QtQuick 2.0
导入 QtQuick.Window 2.0

找到了导入，但我既不能使用 Window 也不能使用 Screen。每次我键入 Screen 或 Window 时都会出现一个错误，上面写着“未知组件（M300）”

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:09:19.557

有时 QtCreator 无法识别某些类型/属性，主要是 Qt4.x 中不存在的类型/属性，但这并不意味着您不能使用它们，所以是的，'Window' 是未知的，就像属性'antialiasing' , 'fontSizeMode' 或 'active' 是，但你可以使用它们，这是 QtQuick.Window 2.0 的使用示例：

```
import QtQuick        2.0
import QtQuick.Window 2.0

Window {
    id: win1;
    width: 320;
    height: 240;
    visible: true;
    color: "yellow";
    title: "First Window";

    Text {
        anchors.centerIn: parent;
        text: "First Window";

        Text {
            id: statusText;
            text: "second window is " + (win2.visible ? "visible" : "invisible");
            anchors.top: parent.bottom;
            anchors.horizontalCenter: parent.horizontalCenter;
        }
    }
    MouseArea {
        anchors.fill: parent;
        onClicked: { win2.visible = !win2.visible; }
    }

    Window {
        id: win2;
        width: win1.width;
        height: win1.height;
        x: win1.x + win1.width;
        y: win1.y;
        color: "green";
        title: "Second Window";

        Rectangle {
            anchors.fill: parent
            anchors.margins: 10

            Text {
                anchors.centerIn: parent
                text: "Second Window"
            }
        }
    }
} 
```

您只需要将 Window 项作为根对象，并且可以将其他 Window 项嵌入其中。

# matlab - Matlab：获取序列的所有组合？

> ID：13968371
> 
> 赞同：2
> 
> 时间：2012-12-20T08:56:25.350
> 
> 标签：matlab, cell, sequence, combinations

我有一个序列，如：{1,2,3}，我想得到它的所有组合，如：{{},{1},{2},{3},{1,2},{1,3 },{2,3},{1,2,3}} 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:02:43.757

试试这个： http: [//www.mathworks.com/help/stats/combnk.html](http://www.mathworks.com/help/stats/combnk.html)。我相信你需要梳子，而不是烫发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:07:44.527

蛮力它：

```
a  = { 1, 2, 3 };
n  =numel(a);
nn = 2^n;
res = cell(1, nn);
for ii=1:nn,
    res{ii} = a( bitget( ii-1, n:-1:1 ) == 1 );
end 
```

# sql - 无法通过 SSMS 访问 MSDB 文件夹中的 SSIS 包

> ID：13968379
> 
> 赞同：3
> 
> 时间：2012-12-20T08:56:47.673
> 
> 标签：sql, sql-server-2008, ssis

> SSIS 服务配置中指定的 SQL Server 实例不存在或不可用。当计算机上没有 SQL Server 的默认实例时，可能会发生这种情况。有关详细信息，请参阅 Server 2008 联机丛书中的“配置集成服务服务”主题。
> 
> 用户“XXXXX”登录失败。(MsDtsSrvr)

连接到服务器上的 Intergation Services 后，当我尝试打开 Stored Packages 下的 MSDB 文件夹时收到上述错误错误消息。这是 SQL Server 的默认实例。我检查了 MsDtsSrvr.ini.xml 文件，一切看起来都很好。用户有权访问 MSDB 系统表。任何人都可以推荐其他东西来检查吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-19T14:32:05.670

将用户添加为具有对 msdb 的 sys_admin 权限的 SQL 服务器的登录名（摘自 davey 于 6 月 19 日 21:54 回复原始问题的最后评论，这对我有用 - 这就是答案）

# ios - 简单的手势识别器

> ID：13968380
> 
> 赞同：1
> 
> 时间：2012-12-20T08:56:52.120
> 
> 标签：ios, uigesturerecognizer

是否可以在执行另一个手势期间触发一个手势？假设我有手势 A，它是平移手势，B 是长按手势。B 可以在平底锅时手指留在屏幕上开火吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:14:16.463

绝对地！Apple 甚至为您提供了控制这种行为的委托方法，最值得注意的是：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizershouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

# c# - 访问子类中的受保护成员

> ID：13968381
> 
> 赞同：2
> 
> 时间：2012-12-20T08:56:52.697
> 
> 标签：c#, .net

我有点卡住了，经过一番搜索，我转向你：

```
class StatusResponse
{
    protected int _statusCode { get; set; }
    protected string _statusMessage { get; set; }

    public StatusResponse(string Response)
    {
        if (!String.IsNullOrEmpty(Response))
        {
            this._statusCode = int.Parse((Response.Split(' '))[0].Trim());
            this._statusMessage = Response;
        }
    }
}

class GroupStatusResponse : StatusResponse
{
    public int Count { get; private set; }
    public int FirstArticle { get; private set; }
    public int LastArticle { get; private set; }
    public string Newsgroup { get; private set; }

    public GroupStatusResponse(string Response) : base(Response)
    {
            string[] splitResponse = Response.Split(' ');
            this.Count = int.Parse(splitResponse[1].Trim());
            this.FirstArticle = int.Parse(splitResponse[2].Trim());
            this.LastArticle = int.Parse(splitResponse[3].Trim());
            this.Newsgroup = splitResponse[4].Trim();
    } 
```

为什么我不能这样做：

```
GroupStatusResponse resp = new GroupStatusResponse("211 1234 3000234 3002322 misc.test");
Console.Writeline(resp._statusCode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:59:54.573

使用

```
Console.Writeline(resp._statusCode); 
```

从外部派生类是公共的，而不是受保护的使用。

但是，您可以添加如下内容：

```
class GroupStatusResponse : StatusResponse
{
   public int GetStatusCode()
   {
      return _statusCode;
   }
} 
```

这是完全有效的使用。

此外，如果场景是任何人都应该允许读取 _statusCode，但只有基类应该能够设置它，您可以将其定义更改为：

```
public string _statusMessage { get; private set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:00:06.223

这是因为 _statusCode 是`protected`. 这意味着该字段在类之外是不可访问的。

# php - 在php中获取最新的文件尾数

> ID：13968382
> 
> 赞同：0
> 
> 时间：2012-12-20T08:56:52.417
> 
> 标签：php, file-upload, upload, image-uploading

我的目录中有这样的东西：

```
slider-1.jpg
slider-2.png
slider-4.gif
slider-8.png
slider-11.gif 
```

现在有没有办法获得最后一个尾随数量的“滑块”图像？我需要得到这个，所以下一个上传的图像应该命名为slider-12.xxx

我尝试了每个循环，但它显然让我将滑块 3 作为下一个名称，在我的情况下这是错误的 :)

好的，这就是我的做法

```
foreach ($files as $filename) {
    $filesarr[]= $filename;
    $namearr = explode('.', $filename); //I had to grab this piece as well during the project, so this is main reason not usin Louis proposal.... i needed that array for something else...
    $numbers = explode('-', $namearr[1]);
    $compare[]=$numbers[2];   

}
sort($compare, SORT_NUMERIC); 
$assigned_number = end($compare) + 1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:04:13.120

你可以尝试这样的事情：

```
$max = 0;
foreach($files AS $file) {
    $max = max($max, filter_var($file, FILTER_SANITIZE_NUMBER_INT));
}
$max++; 
```

或这个：

```
natcasesort($files);
$max = filter_var(array_slice($files, -1), FILTER_SANITIZE_NUMBER_INT) + 1; 
```

# javascript - 在运行流星应用程序时，有哪些方法可以在服务器端执行任意代码？

> ID：13968383
> 
> 赞同：4
> 
> 时间：2012-12-20T08:56:57.080
> 
> 标签：javascript, node.js, meteor

有时我发现自己想在应用程序运行时在服务器上执行一些特权代码。例如，我可能想快速删除集合中的文档（当客户端被阻止这样做时）。或者，我可能想快速尝试服务器端功能，例如`Email.send`和`Accounts.createUser`。

那么有哪些方法可以实现呢？我关心流星应用程序如何运行的两种情况：

1.  使用`meteor`命令运行
2.  作为捆绑的节点应用程序运行

最后，我还想设置可以在 Meteor 上下文中执行一些代码的 cron 作业。这是否可以通过变通办法直接实现或可行？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T00:42:45.687

难道你不能只写只对你的用户有用的服务器端方法吗？然后公开`Meteor.methods`它们并在客户端控制台中运行它们。这就是我想测试时所做的。`Email.send`. 您还可以更进一步，编写一个基本的管理 UI。

例如，在服务器上：

```
 Meteor.methods({
    test_sendEmail: function(options) {
      if (this.userId != adminUserId) return; // don't execute unless admin
      Email.send(options);
    }
  }); 
```

在客户端：

```
 Meteor.call("test_sendEmail", {to: "foo@bar.com", subject: "Foo", text: "Bar"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:02:45.970

您可以通过使用 curl 模拟浏览器来调用流星服务器端代码。如果每次都启动流星，则必须将代码放入 Meteor.startup() 函数中。如果您模拟浏览器，您可以让流星服务器运行，然后根据表单或查询字符串指定要执行的任意函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:00:49.733

要在应用程序运行时与数据库交互，您可以`meteor mongo`在应用程序的根目录中进行。这将启动一个 mongo shell，但您不能在其中测试服务器端功能。到目前为止，我认为没有办法在（未捆绑的）meteor 应用程序中实际运行服务器端控制台，但也许您可以`meteor bundle`使用您的应用程序，使用节点运行它，然后找到启动服务器的方法侧控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T22:03:19.620

你也可以这样做`Meteor.methods({eval: function(code){eval(code);}})`，它允许你输入你想要的任何代码并在服务器端运行它。这不是世界上最安全的事情，但它对我有用。我的猜测是，通过确保方法中带有 this.userId 的用户是管理员，可以降低它的不安全性。这是一个用于测试的存储库，请随意克隆和分叉：

[https://github.com/belisarius222/meteor-eval-test](https://github.com/belisarius222/meteor-eval-test)

免责声明：这是允许任何人在服务器上运行任意代码的代码。这是一个概念证明，并不是为了保证安全。

# jquery - jQuery 创建一个浮动 div

> ID：13968389
> 
> 赞同：-2
> 
> 时间：2012-12-20T08:57:39.857
> 
> 标签：jquery, jquery-plugins, floating

我想使用 jQuery 创建一个浮动 div，允许用户在访问我的网站之前先注册。除非用户注册，否则页面的其他部分将被禁用。可以在[此处](https://mentor.mara.com/)找到正在讨论的 div 示例。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:10:10.670

看起来你在谈论模态对话框

见[http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

# android - Android - 自定义 ListView 上的 setChoiceMode = 无效

> ID：13968390
> 
> 赞同：3
> 
> 时间：2012-12-20T08:57:40.043
> 
> 标签：android, android-layout, android-listview

我正在使用用于我的**ListView**的自定义适配器。创建 ArrayList 后

```
WifiListAdapter<WifiListItem> adapter = new WifiListAdapter<WifiListItem>(
            this, R.layout.listview_item_text, listItems); 
```

我的应用程序中有以下代码：

```
 ListView listView = (ListView) findViewById(android.R.id.list);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    listView.setAdapter(adapter); 
```

但是，当我尝试单击复选框时，没有任何反应。所以我必须手动管理切换复选框状态。

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
    CheckedTextView checkBox = (CheckedTextView) v
            .findViewById(R.id.text1);
    if (checkBox != null) {
        checkBox.toggle(); 
```

然后它工作。（在此之前我必须删除 setChoiceMode 方法调用）

那么可能是什么问题呢？为什么没有效果？

我的 R.layout.listview_item_text.xml

```
 <TextView
    android:id="@+id/topText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="22sp"
    android:paddingTop="7dp"
    android:textColor="?android:attr/textColorPrimary"/>

<TextView
    android:id="@+id/botText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="17sp"
    android:paddingTop="2dp"
    android:paddingBottom="7dp"
    android:textColor="?android:attr/textColorTertiary"
 /> 
```

在我的适配器中，我使用以下代码扩展复选框布局：

```
 convertView = mInflater.inflate(
                        R.layout.listview_item_checkbox, null);

            CheckedTextView checkbox = ((CheckedTextView) convertView
                    .findViewById(R.id.text1)) 
```

listview_item_checkbox.xml

```
 <CheckedTextView
    android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:textSize="22sp"
    android:paddingTop="7dp"
    android:paddingBottom="7dp"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
     /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:20:28.563

而不是您的代码：

```
if (checkBox != null)
        checkBox.toggle(); 
```

尝试这样的事情：

```
if (checkBox != null) checkBox.setChecked(l.getCheckedItemPositions().get(position)); 
```

如果可以 - 改进您的代码（创建`CheckableFrameLayout`为列表项的父布局）。`ListView`保留已检查位置的[BooleanSparseArray](http://developer.android.com/reference/android/util/SparseBooleanArray.html)（您可以使用getCheckedItemPositions [()](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPositions%28%29)方法获取它）。在代码 ( [grepcode](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/AbsListView.java#AbsListView.updateOnScreenCheckedViews%28%29) ) 中，它`View`仅在`View`实现[Checkable](http://developer.android.com/reference/android/widget/Checkable.html)时自行设置是否已检查。如果 create`CheckableFrameLayout`和 sat 作为主父级，则不必在适配器中处理这些情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:27:59.320

我相信您必须使用实现[Checkable](http://developer.android.com/reference/android/widget/Checkable.html)的小部件。尝试使用`android.R.layout.simple_list_item_multiple_choice`. 如果你需要两行，那么实现类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T14:00:53.277

The thing is that there is some problem in the source code (event for lastest version at the time I am writing this answer, 4.3r2.1). Here is the problem:

```
1899        if (mChoiceMode != CHOICE_MODE_NONE && mCheckStates != null) {
1900            if (child instanceof Checkable) {
1901                ((Checkable) child).setChecked(mCheckStates.get(position));
1902            } else if (getContext().getApplicationInfo().targetSdkVersion
1903                    >= android.os.Build.VERSION_CODES.HONEYCOMB) {
1904                child.setActivated(mCheckStates.get(position));
1905            }
1906        } 
```

Source code: [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/widget/ListView.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/widget/ListView.java?av=f)

The easiest answer to your question, if your minSDK is 11, is customize the checkbox like this:

```
<?xml version="1.0" encoding="utf-8"?>
<selector
 xmlns:android="http://schemas.android.com/apk/res/android" >
 <item android:state_activated="true" android:drawable="@drawable/checkbox_selected"/>
 <item android:state_activated="false" android:drawable="@drawable/checkbox_deselected" />
 <item android:state_checked="false" android:drawable="@drawable/checkbox_deselected" />
 <item android:state_checked="true" android:drawable="@drawable/checkbox_selected" />
</selector> 
```

Save it to the drawable folder as xml file and refer it as layout.

The middle level solution is set onItemClickListener and perform different behavior depending on the choice mode.

Here is the source code which works: [https://github.com/jiahaoliuliu/CustomizedListRow](https://github.com/jiahaoliuliu/CustomizedListRow)

And the hard but correct solution is the one from MarvinLab, which you can find it here: [http://www.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/](http://www.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/)

Related issue: [What is the difference between the states selected, checked and activated in Android?](https://stackoverflow.com/questions/11504860/what-is-the-difference-between-the-states-selected-checked-and-activated-in-and)

# spring - Tomcat 回复 401 for ant starttask

> ID：13968392
> 
> 赞同：2
> 
> 时间：2012-12-20T08:57:43.413
> 
> 标签：spring, ant, tomcat7

我正在关注春季[教程](http://static.springsource.org/docs/Spring-MVC-step-by-step)。因为它用蚂蚁任务控制tomcat。早些时候我遇到了一些问题，因为 tomcat 7 manager 应用程序与以前的版本不同。但我能够修复它们。现在 ant listtask 工作正常。但其他人不是。例如 ant starttask 返回此错误。

```
start-webapp:

BUILD FAILED
C:\Users\rsenarath\workspace\myspringapp\build.xml:108: java.io.IOException: Server returned HTTP response code: 401 for URL: http://localhost:8080/manager/text/start?path=%2Fmyspringapp 
```

但是，当我在浏览器上复制 url(http://localhost:8080/manager/text/start?path=%2Fmyspringapp) 时，它会要求输入用户名密码，并且它的回复没有问题，如下所示。

```
OK - Started application at context path /myspringapp 
```

有人可以帮我弄这个吗。我的 build.properties 如下

```
appserver.name=tomcat
appserver.home=C:/Users/rsenarath/apache-tomcat-7.0.34
appserver.lib=${appserver.home}/lib
appserver.bin=${appserver.home}/bin
deploy.path=${appserver.home}/webapps

tomcat.manager.url=http://localhost:8080/manager/text
tomcat.manager.username=tomcat
tomcat.manager.password=s3cret 
```

和ans任务如下

```
<path id="catalina-ant-classpath">
    <fileset dir="${appserver.lib}">
        <include name="catalina-ant.jar"/>
        <include name="tomcat-coyote.jar"/>
        <include name="tomcat-util.jar"/>
    </fileset>
    <fileset dir="${appserver.home}/bin">
        <include name="tomcat-juli.jar"/>
    </fileset>
</path>

<taskdef name="catalina-deploy" classname="org.apache.catalina.ant.DeployTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-list" classname="org.apache.catalina.ant.ListTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-reload" classname="org.apache.catalina.ant.ReloadTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-resources" classname="org.apache.catalina.ant.ResourcesTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-start" classname="org.apache.catalina.ant.StartTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-stop" classname="org.apache.catalina.ant.StopTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-undeploy" classname="org.apache.catalina.ant.UndeployTask" classpathref="catalina-ant-classpath"/>

<target name = "stop-webapp">
    <catalina-stop url="${tomcat.manager.url}"
                         username="${tomcat.username}"
                         password="${tomcat.password}"
                         path="/${name}"
                         failonerror="false"/>
</target>

<target name = "start-webapp">
    <catalina-start url="${tomcat.manager.url}"
                       username="${tomcat.username}"
                       password="${tomcat.password}"
                       path="/${name}"/>
</target>

<target name="list-webapp" description="List Tomcat applications">
    <catalina-list url="${tomcat.manager.url}"
                 username="${tomcat.manager.username}"
                 password="${tomcat.manager.password}"/>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:14:48.183

在您的 start-webapp 和 stop-webapp 目标中，您将这些变量用于用户/密码：

```
tomcat.username
tomcat.password 
```

但是在您的配置数据中，您设置了这些：

```
tomcat.manager.username
tomcat.manager.password 
```

因此，当您运行 start-webapp 目标时，可能未设置用户名和密码，因此是 401。也许您可以更新启动和停止目标中的变量名称以匹配配置。

# c# - 如何在我的 WPF 项目中运行文件夹视频中的视频，而不是在项目之外？

> ID：13968395
> 
> 赞同：0
> 
> 时间：2012-12-20T08:57:59.470
> 
> 标签：c#, wpf, video, wpf-controls

我有一个项目 WPF，我想运行一个视频。我成功运行了一个视频，但我想在项目内部解决，而不是在外部，例如，我想要：

```
 <MediaElement Name="redangVideo" Source="Videos\clip.avi" LoadedBehavior="Manual" /> 
```

不是：

```
 <MediaElement Name="redangVideo" Source="C:\path_file\Videos\clip.avi" LoadedBehavior="Manual" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:12:35.150

对于**.xaml**，假设您的*Videos*文件夹位于根位置

```
<MediaElement Name="redangVideo" Source="/Videos/clip.avi" LoadedBehavior="Manual" /> 
```

对于**.cs**：代码隐藏

```
redangVideo.Source = "pack://application:,,,/AssemblyName;component/Videos/clip.avi"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:21:17.817

假设您在**InnerFolder目录中的项目中有此文件****video.avi**（将其命名为**MyControls**），然后使用此方法：

 **```
MediaElement getMedia()
    {
        MediaElement m= new MediaElement();
        m.Source = new MediaElement(new Uri("pack://application:,,,/MyControls;component/InnerFolder/video.avi"));
        return m;
    } 
```**

# iphone - 当我们从ios中的json获取valueOfKey时如何检查valueOfKey是Array还是Object

> ID：13968397
> 
> 赞同：4
> 
> 时间：2012-12-20T08:58:02.297
> 
> 标签：iphone, objective-c, ios, xcode

我有2个案例要解析`JSON`首先是：

```
{
    "post_filter_data": {
        "Items": [
            {
                "ItemID": "50cb4e46b5d30b0002000009",
                "ItemName": "Fruit salad test",
                "ItemPrice": "122.0",
                "ItemDescription": "test test",
                "ItemImageUrl": "http://s3.amazonaws.com/menubis-mms-prototype-dev/menubis/assets/50cb4e64b5d30b0002000013/landing_page.jpg?1355501156"
            },
            {
                "ItemID": "50d0870d910ef2000200000a",
                "ItemName": "test new",
                "ItemPrice": "120.0",
                "ItemDescription": null,
                "ItemImageUrl": "http://s3.amazonaws.com/menubis-mms-prototype-dev/menubis/assets/50d0871a910ef20002000015/Screenshot-2.png?1355843354"
            }
        ]
    }
} 
```

其中 Items 是一个`NSArray`并且它很容易解析但是当只有一个对象时我通过异常得到它。其次`JSON`是其中的 Items 标签有一个对象：

```
{
    "post_filter_data": {
        "Items": {
            "ItemID": "50d1e9cd9cfbd20002000016",
            "ItemName": "test",
            "ItemPrice": "120.0",
            "ItemDescription": "test",
            "ItemImageUrl": "http://s3.amazonaws.com/menubis-mms-prototype-dev/menubis/assets/50d1ea019cfbd20002000022/11949941671787360471rightarrow.svg.med.png?1355934209"
        }
    }
} 
```

我的代码在这里我正在解析它：

```
NSDictionary *dictMenu=[responseDict valueForKey:@"post_filter_data"];
NSArray* subMenuArray=[dictMenu valueForKey:@"Items"]; 
```

有没有什么方法可以让我检查出来`valueForKey:@"Items"`是`Array`or `Object`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T09:11:02.223

在 _recievedData 中获取数据 rx，然后检查对象的类。

```
 id object = [NSJSONSerialization
                     JSONObjectWithData:_recievedData
                     options:kNilOptions
                     error:&error];
    if (error)
    {
         NSLog(@"Error in rx data:%@",[error description]);
    }
    if([object isKindOfClass:[NSString class]] == YES)
    {
         NSLog(@"String rx from server");
    }
    else if ([object isKindOfClass:[NSDictionary class]] == YES)
    {
         NSLog(@"Dictionary rx from server");
    }
    else if ([object isKindOfClass:[NSArray class]] == YES)
    {
         NSLog(@"Array rx from server");
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T09:02:29.213

是的，您可以使用`class`like

```
if ([[dictMenu valueForKey:@"Items"] isKindOfClass:[NSArray class]])
{
    // array inside
} 
```

# c# - 身份证号码的C#正则表达式？

> ID：13968399
> 
> 赞同：1
> 
> 时间：2012-12-20T08:58:09.433
> 
> 标签：c#, regex

我想构造一个格式为“xxxxx-xxxxxxx-x”的正则表达式，其中 x 都是数字...帮助？

编辑：

到目前为止我有这个：

```
string pattern = @"\d{5}[-]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:01:23.627

该正则表达式看起来像这样：

```
string pattern = @"\b\d{5}-\d{7}-\d"; 
```

还可以查看本教程

[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:01:58.870

```
Regex.Match(input, @"\b\d{5}-\d{7}-\d$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:07:06.123

```
string strRegex = @"[0-9]{5}\-[0-9]{7}\-[0-9]{1}";
RegexOptions myRegexOptions = RegexOptions.None;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"12345-1234567-9";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here
  }
} 
```

# perl - 将 char 添加到数组元素

> ID：13968400
> 
> 赞同：1
> 
> 时间：2012-12-20T08:58:12.070
> 
> 标签：perl

有没有更简单的方法可以将 char 添加到 perl 中数组元素的开头和结尾。

`Ex:my $str ='table1,table2,table3'`

`my @arry = split (/,/,$str)`

我喜欢输出应该看起来像

`'table1','table2','table3'`

所以可以在sql查询中使用

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T09:19:52.347

```
join(',', map "'$_'", @arry) 
```

就是你要的。

但最好使用占位符：

```
my $str = 'table1,table2,table3';
my @arry = split(/,/, $str);
if (@arry) {
    my $query = 'select * from tablename where colname in (' . join(',',('?') x @arry) . ')';
    my $sth = $dbh->prepare($query);
    $sth->execute(@arry);
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:28:47.917

If you are going to use DBI ([https://metacpan.org/module/DBI](https://metacpan.org/module/DBI)) to work with your database, it can do it for you if you use placeholders in your queries, so that you don't have to quote values.

For example, if you want to insert something into a table:

```
 $dbh->do("INSERT INTO table VALUES(?, ?, ?)", undef, @arry) 
        or die $dbh->errstr; 
```

where `@arry` is an array containing exactly 3 values to be inserted into a table.

More on this can be found here [https://metacpan.org/module/DBI#Placeholders-and-Bind-Values](https://metacpan.org/module/DBI#Placeholders-and-Bind-Values)

# c# - 将 stderr 流重定向到 MonoTouch 中的文件

> ID：13968405
> 
> 赞同：3
> 
> 时间：2012-12-20T08:58:24.193
> 
> 标签：c#, xamarin.ios, stderr

是否有可能将标准错误重定向到 MonoTouch 下的文件？

在 Objective-C 中，您可以使用

```
freopen("file.log", "a+", stderr); 
```

如[这里](https://stackoverflow.com/questions/9619708/nslog-to-both-console-and-file)和[这里](https://stackoverflow.com/questions/7286918/internally-capture-redirect-stdout)所述。

但是我怎样才能在 MonoTouch 下做同样的事情呢？

Xamarin Docs 提供了一个[使用文件系统](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Working_with_the_File_System)的部分，但我不知道如何从那里访问 stderr 流。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:20:09.553

您可以使用[Console.SetError](http://msdn.microsoft.com/en-us/library/system.console.seterror.aspx)以 .NET 方式进行操作。

OTOH 直接在自己的`TextWriter`实例中进行所有写作通常更容易。

这将允许您在正常、文件或其他任何内容之间轻松*更改*错误输出的目的地（例如， [Touch.Unit](https://github.com/spouliot/Touch.Unit/blob/master/NUnitLite/TouchRunner/TouchRunner.cs#L241)使用连接到删除服务器套接字的写入器）。`Console.Error`

# javascript - 需要重新连接集线器

> ID：13968408
> 
> 赞同：0
> 
> 时间：2012-12-20T08:58:38.453
> 
> 标签：javascript, signalr

我在带有信号器的 ASP.NET 网站上有一个简单的项目。启动连接集线器的代码：

```
var scriptStarted = 'var myHub = $.connection.' + hubName + ';' + methodNameInitHub + '(myHub);';
$.connection.hub.error(function () {
    alert("An error occured");
});

$.connection.hub.start()
                        .done(function () {
                            eval(scriptStarted);
                            myHub.server.registerClient($.connection.hub.id, clientIdentifier);
                        })
                        .fail(function () { alert("Could not Connect!"); }); 
```

此方法在“methodNameInitHub + '(myHub);”中调用

```
function methodInitEventHub(hub) {
            if (hub) {
                hub.client.addEvent = function (eventOperationName, eventType) {
                    $("#events").append("<li>" + eventOperationName + ", " + eventType + "</li>");
                };
            }
        } 
```

停止连接集线器的代码：

```
$.connection.hub.stop(); 
```

当我加载 .aspx 页面并启动集线器时，所有代码都执行没有错误，但未收到来自服务器的事件。[在我停止并重新启动后，客户端（浏览器） http://clip2net.com/s/2CP2e](http://clip2net.com/s/2CP2e)开始收到集线器连接事件

为什么我需要重新启动连接集线器才能开始从服务器接收到事件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:20:56.920

您遇到问题的原因是因为在调用 start 之前您必须至少拥有 1 个客户端集线器功能，否则您将不会订阅集线器。

尝试做

```
myHub.client.foo = function() {} 
```

在开始之前。

在您停止然后重新启动连接后它工作的原因是因为您的脚本绑定了一个新的客户端方法，因此允许您在重新启动连接后订阅集线器。

希望这可以帮助！

# javascript - 我可以在创建对象时在该对象内部保留一个对象的副本吗

> ID：13968409
> 
> 赞同：7
> 
> 时间：2012-12-20T08:58:52.340
> 
> 标签：javascript, html, class, object

我可以在创建对象时在该对象内部保留一个对象的副本吗

这是我创建一个新学生对象的函数：

```
function student(id, name, marks){
    this.id = id;
    this.name = name;
    this.marks = marks;
} 
```

我想在对象内部初始化时创建对象的副本：我想出了这个：

```
function student(id, name, marks){
    this.id = id;
    this.name = name;
    this.marks = marks;
    this.baseCopy = this;
} 
```

但问题是它给了我baseCopy中当前对象副本的无限循环；而且，当我更新对象的任何属性时，它也会自动更新。

**1\. 这怎么可能，我可以在创建对象时在该对象内部保留具有初始值的对象的副本？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T09:02:51.380

由于您已经在使用 jQuery，通用答案是：

```
this.baseCopy = $.extend(true, {}, this); 
```

将生成当时存在的任何属性值的“深层”副本，而不会递归地引用自身。

**注意**- 我确实包含了一些通用的 JS 代码，但是 OP 完全改变了这个问题，所以恢复到只使用 jQuery 会更简单。这当然会复制直接存在于对象上的任何方法，尽管如果编写得当，这些方法将位于对象的原型上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:10:38.007

一个没有 jQuery 的替代方案：（
你知道它也可以不用。）

```
function student(id, name, marks){
    this.id = id;
    this.name = name;
    this.marks = marks;

    var tempCopy = {}; // Initialize a temporary variable to copy the student to.
    for(key in this){   // Loop through all properties on this (student)
        if(this.hasOwnProperty(key)){ // Object.prototype fallback. I personally prefer to keep it in, see Alnitak's comment.
            tempCopy[key] = this[key]; // Copy the property
        }
    }
    this.baseCopy = tempCopy; // "Save" the copy to `this.baseCopy`
}

var s = new student(1, 'Jack', [5,7]);
s.marks = s.marks.concat([6,8]); // Jack's gotten 2 new marks.

console.log(s.name + "'s marks were: ", s.baseCopy.marks);
console.log(s.name + "'s marks are: ", s.marks);
// Logs:
// Jack's marks were:  [5, 7]
// Jack's marks are:  [5, 7, 6, 8] 
```

这样做的好处是它会自动复制学生的*所有*属性，而不必`baseCopy`手动“设置”它们。
此外，由于它不使用 jQuery，因此速度更快。在处理大量数据时，这可能很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:16:42.210

以下方法对我有用（可能不是最好的解决方案，可能还有另一种涉及对象原型的方法）

```
function BaseStudent(id, name, marks) {
    this.id = id;
    this.name = name;
    this.marks = marks;
}

function Student(id, name, marks) {
    this.baseCopy = new BaseStudent(id, name, marks);
    BaseStudent.call(this, id, name, marks);
}

var s = new Student(1, 'Name', 100);

console.log(s.id); // logs 1
console.log(s.name); // logs 'Name'
console.log(s.marks); // logs 100

s.name = 'AnotherName';

console.log(s.name); // logs 'AnotherName'
console.log(s.baseCopy.name);​ // logs 'Name' 
```

# jsf - 如何刷新 p:dataTable 中的数据，保留过滤器和排序？

> ID：13968410
> 
> 赞同：1
> 
> 时间：2012-12-20T08:58:54.647
> 
> 标签：jsf, sorting, primefaces

如何在保留**过滤**和**排序**选项的**PrimeFaces DataTable中刷新数据？**

 ****DataTable 在内部处理过滤，因此在支持 bean 中刷新数据后，更改还不可见，因此需要在 JavaScript 中调用 dataTable 上的 filter()。至少在我的情况下。之后，数据被过滤，但没有排序！但是，列标题上的样式被保留了，因此列显示为已排序，这让最终用户感到困惑（对他来说，这是一个错误）。

dataTable 也有一个 sort() 函数，但调用它会导致错误：

```
TypeError: f is undefined 
```

所以看起来这不是处理那个案子的正确方法......

官方文档在这种情况下是沉默的，但刷新按钮是常见的情况。此外，在我的情况下，数据应该自动刷新，并且排序和过滤不应该改变。

那么，数据刷新后如何对DataTable进行重新排序呢？如何避免自己在 backing bean 中编写排序并重新使用 PrimeFaces 排序？****

# perl - Perl CGI 使用 span 设置数据样式

> ID：13968411
> 
> 赞同：1
> 
> 时间：2012-12-20T08:58:58.270
> 
> 标签：perl, cgi, html

我是 CGI/HTML/CSS 新手，但对 perl 还算不错。我正在编写一个小 CGI 脚本，需要知道如何更改一行文本中某些数据元素的样式。我采用了面向对象的方法来使用 CGI。

我正在遍历一组数据，并希望将每行变量的样式更改为与该标准样式不同的样式。我对每一行的输出将如下所示：

```
server=$hostName  appHost=$appHost  port=$port   cache=$maxCache 
```

目前，我只是在做：

```
print $cgi->br("server=$hostName  appHost=$appHost  port=$port   cache=$maxCache"); 
```

理想情况下，我希望每个变量都是粗体红色（或者最好是我在 CCS 样式表中创建的样式）。我在想也许我需要使用 span 元素，但我已经尝试过但惨遭失败

非常感谢

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:13:03.053

在你的 perl 脚本中，写：

```
print $cgi-br "server=<span class='myclass'>$hostName</span>  appHost=<span class='myclass'>$appHost</span>  port=<span class='myclass'>$port</span>   cache=<span class='myclass'>$maxCache</span><br><br>"; 
```

（请注意，`<br><br>`需要在字符串内部，而不是外部）。

然后在你的 CSS 文件中，输入：

```
.myclass {
    color: red;
    font-weight: bold;
} 
```

`<head>`您可以通过让您的 perl 脚本在 HTML 部分中打印以下内容来将它们链接在一起：

```
print $cgi-br "<link rel='stylesheet' href='URL of your CSS file'/>"; 
```

# git - git-svn 不适用于证书

> ID：13968413
> 
> 赞同：2
> 
> 时间：2012-12-20T08:59:00.980
> 
> 标签：git, certificate, git-svn

我可以访问 SVN 存储库。访问是通过 HTTPS，我正在使用在我的 Windows 机器上导入的证书，现在我想使用 git-svn 克隆该存储库，完成我的工作并将更改推送到该 SVN，但我只是得到 perl 错误：

```
Client certificate filename: Use of uninitialized value in chomp 
```

有什么方法可以显示 git 我的证书在哪里？我认为主要原因是证书和 git 无法向该 SVN 进行身份验证，但也许我错了，这是完全不同的东西。有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-05T23:27:31.127

我刚刚解决了这个问题，在`~/.subversion/servers`. 我将这些行添加到该部分中该文件的底部`[global]`：

```
ssl-client-cert-file = /home/myusername/certificate.pfx
store-passwords = yes
store-plaintext-passwords = yes
store-ssl-client-cert-pp = yes
store-ssl-client-cert-pp-plaintext = yes 
```

然后，当我执行`git svn clone -s`一次时，它会提示我输入证书的密码，然后继续结帐。当我最初尝试此操作时，它反复提示我输入证书文件名，因为它没有与默认服务器文件一起存储。因为它没有被存储，它不得不为我猜的每个 https 请求询问我的证书。如果我执行`^d`or`^c`退出该循环，那么我会收到有关“chomp 中未初始化的值”的错误。

# c# - 我应该对没有明显方法返回的代码进行单元测试吗？

> ID：13968422
> 
> 赞同：3
> 
> 时间：2012-12-20T08:59:38.280
> 
> 标签：c#, unit-testing, nunit, moq

我有一个类，其唯一目的是从接口对其他类运行方法。

测试类的接口没有问题，但是运行器实际上并没有做任何事情，并且（就目前而言）传递给构造函数的唯一参数是私有的。

就我而言，这些类正在将文本文件导入数据库。

```
internal DataImporter
{
  private List<IFileImporter> _importers;

  public DataImporter(List<IFileImporter> importers){
    _importers = importers;

  public bool RunImporters()
  {
    //foreach importer, call its "Run" method - each one then does whatever it needs to do
    //however, this need not call a specific "Run" method on IFileImporter
    //I have another app that uses IFileImporter to check for presence of a file first
    //then allow user to choose to import or not.
  } 
```

在我看来，这里没有什么可以测试的吗？我无法测试 的值`_importers`，也不想仅仅为了测试而将其公开。DataImporter 特定于此实例，因此创建接口似乎没有任何好处。

我在其他地方重新使用了 IFileImporters，但这是唯一的“批量”导入器，其他的是从 winforms 应用程序手动调用的，还有一些根本不在这个项目中。

那么，我需要对此进行测试吗……我可以对此进行什么测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:07:19.223

简而言之，是的。我可以马上想到一些测试。

您的测试通过模拟您在构造函数中传递的 IFileImporters 来确保调用所有导入器。至少，它断言您在构造函数中传递的内容实际上已被该方法使用。

一个测试，以确保如果任何导入程序引发异常，您的类的行为符合您的预期。

如果列表为空，测试应该断言该行为。（默认为 True 返回？）

如果一个或多个导入器失败，测试还应该断言您期望的行为。（您是对您的 RunImporters 结果使用和-ing 或or-ing 您的导入程序结果吗？）

无论前一个是否失败，该方法是否运行每个导入器，或者在第一次失败时返回 false？

如果它提供了一个空列表，还应该对你的构造函数或断言进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:09:07.683

您可以断言这些方法已被调用。您可以参考这些问题以了解如何完成：

*   [如何断言是否在 RhinoMocks 中的另一个方法中调用了一个方法？](https://stackoverflow.com/questions/2774875/how-to-assert-if-a-method-was-called-within-another-method-in-rhinomocks)
*   [Rhino Mocks - 如何断言一个模拟方法被调用了 n 次？](https://stackoverflow.com/questions/642801/rhino-mocks-how-to-assert-a-mocked-method-was-called-n-times)

您还可以断言在`DataImporter`类中没有遇到异常。

*如果您对所使用的界面有绝对控制权，那么让它们中的每一个都*返回一个`boolean`指示特定操作是否成功的指示可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:12:36.933

您的方法返回`bool`，这就是您开始的地方，例如：

*   没有进口商会怎样？例子：`Run_ReturnsFalse_WhenThereIsNoImporters`
*   当其中一个打破（或抛出）时会发生什么？例子：`Run_ReturnsFalse_WhenAtLeastOneImporterFails`
*   什么表示成功（`true`我想是返回）？例子：`Run_ReturnsTrue_WhenAllImportersSucceed`

你设置你的模拟来模拟每个场景并再次测试。当确实**没有可观察到的效果**（如返回值）时，您将通过验证是否对模拟对象进行了调用来做到这一点。

# c++ - 用 qt 制作 C++ 库

> ID：13968431
> 
> 赞同：0
> 
> 时间：2012-12-20T09:00:05.927
> 
> 标签：c++, qt, dll

我用 qt creator 构建了一个 C++ 库。qt 在调试文件夹 3 文件中为我构建：

> ```
> '1\. libSerialize.a' and '2\. Serialize.dll' and 'serialize.o' . 
> ```

现在我想将此库添加到另一个 qt 项目中。我怎样才能做到这一点？。我怎样才能包含那个库？. 我应该在哪里复制那些？. 哪一个是必要的？. 这是我的`.pro`文件：

```
QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = get_send_array
TEMPLATE = app

SOURCES += main.cpp\
        widget.cpp \
    student.cpp

HEADERS  += widget.h \
    student.h 
```

所以谢谢，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:09:03.530

采用：

```
win32:LIBS += /path/to/the/lib/Serialize.dll
unix:LIBS += -L/path/to/the/lib/ -lSerialize 
```

`Serialize.dll`是一个windows动态加载库，`libSerialize.a`是一个`ar`归档文件（你可以把它称为静态库），通常用于*nix系统。

# android - 多个 SeekBar 活动致命崩溃

> ID：13968434
> 
> 赞同：1
> 
> 时间：2012-12-20T09:00:11.727
> 
> 标签：android, logcat

我在带有多个 SeekBars 的 Android 中有这个 MainActivity 类：

```
package com.simplemathgame;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity  implements OnSeekBarChangeListener {
    private TextView numberOfAddDrills = (TextView) findViewById(R.id.add_drills_number);
    private TextView numberOfSubDrills = (TextView) findViewById(R.id.sub_drills_number);
    private TextView numberOfMulDrills = (TextView) findViewById(R.id.mul_drills_number);
    private TextView numberOfDivDrills = (TextView) findViewById(R.id.div_drills_number);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SeekBar addSeekBar = (SeekBar) findViewById(R.id.add_seek_bar);
        SeekBar subSeekBar = (SeekBar) findViewById(R.id.sub_seek_bar);
        SeekBar mulSeekBar = (SeekBar) findViewById(R.id.mul_seek_bar);
        SeekBar divSeekBar = (SeekBar) findViewById(R.id.div_seek_bar);

        addSeekBar.setOnSeekBarChangeListener(this);
        subSeekBar.setOnSeekBarChangeListener(this);
        mulSeekBar.setOnSeekBarChangeListener(this);
        divSeekBar.setOnSeekBarChangeListener(this);
        Log.w("here","2");
    }

    @Override
    public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2){
        Log.w("here","3");
        switch (arg0.getId()) 
        {
        case R.id.add_seek_bar:
            numberOfAddDrills.setText(""+arg1);
            break;
        case R.id.sub_seek_bar:
            numberOfSubDrills.setText(""+arg1);
            break;
        case R.id.mul_seek_bar:
            numberOfMulDrills.setText(""+arg1);
            break;
        case R.id.div_seek_bar:
            numberOfDivDrills.setText(""+arg1);
            break;
        }
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }   
} 
```

这是LogCat：

```
12-20 08:58:49.402: D/dalvikvm(668): GC_EXTERNAL_ALLOC freed 43K, 53% free 2546K/5379K, external 1917K/2137K, paused 43ms
12-20 08:58:52.563: D/AndroidRuntime(668): Shutting down VM
12-20 08:58:52.563: W/dalvikvm(668): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-20 08:58:52.582: E/AndroidRuntime(668): FATAL EXCEPTION: main
12-20 08:58:52.582: E/AndroidRuntime(668): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.simplemathgame/com.simplemathgame.MainActivity}: java.lang.NullPointerException
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.os.Looper.loop(Looper.java:123)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-20 08:58:52.582: E/AndroidRuntime(668):  at java.lang.reflect.Method.invokeNative(Native Method)
12-20 08:58:52.582: E/AndroidRuntime(668):  at java.lang.reflect.Method.invoke(Method.java:507)
12-20 08:58:52.582: E/AndroidRuntime(668):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-20 08:58:52.582: E/AndroidRuntime(668):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-20 08:58:52.582: E/AndroidRuntime(668):  at dalvik.system.NativeStart.main(Native Method)
12-20 08:58:52.582: E/AndroidRuntime(668): Caused by: java.lang.NullPointerException
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.Activity.findViewById(Activity.java:1647)
12-20 08:58:52.582: E/AndroidRuntime(668):  at com.simplemathgame.MainActivity.<init>(MainActivity.java:11)
12-20 08:58:52.582: E/AndroidRuntime(668):  at java.lang.Class.newInstanceImpl(Native Method)
12-20 08:58:52.582: E/AndroidRuntime(668):  at java.lang.Class.newInstance(Class.java:1409)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
12-20 08:58:52.582: E/AndroidRuntime(668):  ... 11 more
12-20 08:58:54.923: I/Process(668): Sending signal. PID: 668 SIG: 9 
```

我不知道这个 java.lang.RuntimeException 在哪里。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:05:20.873

你应该看看这里，看看当时什么是空的：

```
12-20 08:58:52.582: E/AndroidRuntime(668): Caused by: java.lang.NullPointerException
12-20 08:58:52.582: E/AndroidRuntime(668):  at android.app.Activity.findViewById(Activity.java:1647)
12-20 08:58:52.582: E/AndroidRuntime(668):  at com.simplemathgame.MainActivity.<init>(MainActivity.java:11) 
```

所以第 11 行是崩溃的地方。

问题是您不能从那里调用 findViewById，在 setContentView 之后的 OnCreate 方法中调用它们。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:05:44.743

您必须在`findViewById()`里面包含所有 for TextView，`onCreate()`因为没有`setContentView()`它会返回`null`.

```
private TextView numberOfAddDrills;
private TextView numberOfSubDrills;
private TextView numberOfMulDrills;
private TextView numberOfDivDrills;

     @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        numberOfAddDrills = (TextView) findViewById(R.id.add_drills_number);
        numberOfSubDrills = (TextView) findViewById(R.id.sub_drills_number);
        numberOfMulDrills = (TextView) findViewById(R.id.mul_drills_number);
        numberOfDivDrills = (TextView) findViewById(R.id.div_drills_number);
        .....
    } 
```

# angularjs - 使用模拟的 httpBackend 进行角 E2E 测试？

> ID：13968435
> 
> 赞同：4
> 
> 时间：2012-12-20T09:00:14.140
> 
> 标签：angularjs, karma-runner

我和我的老板之间就[Angular E2E 测试进行了热烈的讨论。](http://docs.angularjs.org/guide/dev_guide.e2e-testing)根据[vojitajina 拉取请求](https://github.com/angular/angular-seed/pull/28)，我们需要运行服务器才能运行 e2e 测试。所以，运行e2e测试涉及到一个真实的服务器，一个真实的服务器涉及到DB。这会使测试变慢。好吧，现在的问题是如何在不涉及真实服务器的情况下测试 e2e ？有没有办法使用 httpBackend 和 e2e 角度 API，我可以在其中使用 browser()、element()、select() 进行测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T19:34:27.640

[参见下面的编辑] 我们使用 shell 脚本定期从我们的种子测试服务器捕获 curl 请求。然后通过 $httpBackend.whenGet(...).respond() 返回这些响应以拦截并返回该数据。

所以，在我们的 index.html

```
if (document.location.hash === '#test') {
  addScript('/test/lib/angular-mocks.js');
  addScript('/test/e2e/ourTest.js');
  window.fixtures = {};
  addScript('/test/fixtures/tasks/tasks_p1.js');
  // the tasks_p1.js is generated and has "window.fixtures.tasks_p1 = ...json..."
  addScript('/test/fixtures/tasks/tasks_p2.js');
  // the tasks_p2.js is generated and has "window.fixtures.tasks_p2 = ...json..."
  addScript('/test/e2e/tasks/taskMocks.js\'><\/script>');
} 
```

我们的Test.js

```
angular.module('ourTestApp', ['ngMockE2E','taskMocks']).
    run(function ($httpBackend, taskMocks) {
      $httpBackend.whenGET(/views\/.*/).passThrough();
      $httpBackend.whenGET(/\/fixtures.*\//).passThrough();

      taskMocks.register();

      $httpBackend.whenGET(/.*/).passThrough();
    }); 
```

taskMocks.js

```
/*global angular */
angular.module('taskMocks', ['ngMockE2E']).
  factory('taskMocks', ['$httpBackend', function($httpBackend) {
  'use strict';
  return {
    register: function() {
      $httpBackend.whenGET(..regex_for_url_for_page1..).respond(window.fixtures.tasks_p1);
      $httpBackend.whenGET(..regex_for_url_for_page2..).respond(window.fixtures.tasks_p2);
    }
  };
}]); 
```

在少数情况下，我们的数据与当前日期有关；例如“本周的任务”，所以我们在 register() 方法中处理捕获的数据。

**编辑** 我们现在使用[Rosie](https://github.com/bkeepers/rosie)为我们的模拟对象创建工厂。因此，对于预期的 json 响应，不再需要 CURLing 测试服务器。index.html 不再加载这些“.js”固定装置，模拟看起来像：

taskMocks.js

```
/*global angular */
angular.module('taskMocks', ['ngMockE2E']).
  factory('taskMocks', ['$httpBackend', function($httpBackend) {
  'use strict';
  var tasks_p1 = [ Factory.build('task'), Factory.build('task')], 
      tasks_p2 = [ Factory.build('task'), Factory.build('task')] 
  return {
    register: function() {
      $httpBackend.whenGET(..regex_for_url_for_page1..).respond(tasks_p1);
      $httpBackend.whenGET(..regex_for_url_for_page2..).respond(tasks_p2);
    }
  };
}]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-31T12:18:39.700

要回答您的问题，是的，有一种方法可以在不涉及真实服务器的情况下做到这一点，您可以使用 $httpBackend 在 e2e 测试中模拟响应，但它不像在单元测试中模拟它们那么简单。您还需要在 index.html 中包含 angular-mocks.js 以及在 app.js 中包含“ngMockE2E”。

[如何模拟 AJAX 请求？](https://stackoverflow.com/questions/13899176/how-to-mock-an-ajax-request/17969366#17969366)

# embedded - SD 驱动程序 - 写入速度

> ID：13968438
> 
> 赞同：3
> 
> 时间：2012-12-20T09:00:37.230
> 
> 标签：embedded

我们一直在试图弄清楚为什么我们只能在声称 90MBps 的 UHS104 卡上实现约 53MBps 的写入速度。由于硬件限制，提供给该卡的时钟频率仅为 148.5 MHz（而不是 208MHz）。这是否意味着我们应该达到 (148.5 * 4)/8 = 74.25MBps 的速度？或者我们的计算是错误的，因为它假设如果卡在 208MHz 的频率上保证 90MBps 的速度，那么它应该在 148.5 的频率上保证 74.25MBps 的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:05:26.683

简化的[物理层规范](https://www.sdcard.org/downloads/pls/)指出，为了获得最佳性能，您需要写入完整的`AU`块 - 通常为 2 或 4 MB，否则当跨块边界写入时，卡将不得不在内部复制数据。不幸的是，4.13 章节中的大部分内容`Speed Class Specification`都丢失了。

第一个 AU 可能具有不同的磨损级别策略，因为它们通常用于 FAT。这可能会使它们的写入速度变慢。

# sql - 无法在存储过程中对选定查询进行联合

> ID：13968440
> 
> 赞同：2
> 
> 时间：2012-12-20T09:00:48.203
> 
> 标签：sql, sql-server, stored-procedures

```
ALTER PROC [dbo].[Usp_SelectQuestion]
   @NoOfQuestion int
AS
BEGIN
  Declare @CNT int
  Declare @test int
  Declare @x int
  Declare @y int

  set @x = 1;
  set @y = 1; 
  set @CNT=(Select Count(*) from (select Distinct(setno)from onlin) AS A)
  set @test=@NoOfQuestion/@CNT

  while (@x <= @CNT)  
  begin
    select top (@test) * from onlin where setno = @x order by NEWID()
      set @x = @x + 1
  end
END 
```

在这个存储过程中，我将每个循环的输出作为单个表，因此我将多个表作为输出，但我希望单个表中的所有行我认为通过联合我们可以实现，但我不知道如何使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:34:26.853

用这个：

```
CREATE TEMPORARY TABLE tmp SELECT * FROM tableName; 
```

然后插入表

```
INSERT INTO tableName SELECT * FROM tmp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:05:10.713

创建一个`temp table`并插入到循环中，然后结果将是：

```
SELECT * FROM tempTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:34:08.437

```
declare @temptable as table(col1 int, col2 varchar(50),... etc)

  while (@x <= @CNT)  
  begin
     insert into @temptable   'temptable columns need to match columns in the SELECT statement
        select top (@test) * from onlin where setno = @x order by NEWID()

     set @x = @x + 1
  end

  select * from @temptable 
```

# delphi - 是否可以在连接到来自 FULL JOIN 表 SELECT 查询的数据集的 DBGrid 中编辑字段值？

> ID：13968445
> 
> 赞同：2
> 
> 时间：2012-12-20T09:01:00.680
> 
> 标签：delphi, sql-server-2000

我有这个查询

```
SELECT
   T1.Add,
   T1.Edit,
   T1.Usr,
   T2.FirstName,
   T2.LastName 
FROM
   T2 
FULL JOIN 
   T1 ON T1.Usr = T2.Guid 
```

是否可以从 DBGrid 编辑此结果？如果字段不存在，我想添加字段和表格并更改它们的值`T1.Add`。`T1.Edit``T1`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:23:31.423

根据使用的组件，您可以使用 BeforePost（执行操作和重新查询）、用于 IBDataSet 的 ModifySQL/insertSQL、OpdateObject TQuery 等。
另一种方法是使用“INSTEAD OF 触发器”作为持久视图。

# java - 如何获取网页字段的内容并将它们存储到java中的数据库中

> ID：13968447
> 
> 赞同：-8
> 
> 时间：2012-12-20T09:01:04.540
> 
> 标签：java

我有一个 HTML 页面的链接，其中有 4 个字段名、姓氏、年龄、性别。如果我在浏览器中打开该链接，它也会显示文件和数据。

我想根据 Java 中的字段获取所有这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:04:11.550

试试[HtmlUnit](http://htmlunit.sourceforge.net/)。通过这个项目，您可以分析主页的结构并获取 HTML 节点的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:15:30.560

不要使用 HTML 文件，而是`jsp`为您的表单使用文件。将您的表单提交给 a `servlet`，让其`servlet`建立数据库连接并将提供的值插入数据库。

# asp.net-mvc - 提交表单时模型为空

> ID：13968452
> 
> 赞同：23
> 
> 时间：2012-12-20T09:01:44.383
> 
> 标签：asp.net-mvc, forms, razor, submit, form-submit

当我点击提交时，`file`参数为空。

```
public ActionResult Create()
{
  return View(new FileViewModel());
}

[HttpPost]    
[InitializeBlobHelper]
public ActionResult Create(FileViewModel file)
{
  if (ModelState.IsValid)
  {
     //upload file
  }
  else
    return View(file);
}

public class FileViewModel
{
  internal const string UploadingUserNameKey = "UserName";
  internal const string FileNameKey = "FileName";

  internal const string Folder = "files";

  private readonly Guid guid = Guid.NewGuid();

  public string FileName
  {
    get
    {
      if (File == null)
        return null;
      var folder = Folder;
      return string.Format("{0}/{1}{2}", folder, guid, Path.GetExtension(File.FileName)).ToLowerInvariant();
    }
  }

  [RequiredValue]
  public HttpPostedFileBase File { get; set; }
} 
```

这是cshtml：

```
@model MyProject.Controllers.Admin.FileViewModel

@{
  ViewBag.Title = "Create";
  Layout = "~/Views/Shared/_BackOfficeLayout.cshtml";
}

@using (Html.BeginForm("Create", "Files", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  <fieldset>
    <legend>Create</legend>

    <div class="editor-label">
      @Html.LabelFor(model => model.File)
    </div>
    <div class="editor-field">
      @Html.TextBoxFor(model => model.File, new { type = "file" })
      @Html.ValidationMessageFor(model => model.File)
    </div>

    <p>
      <input type="submit" value="Create" />
    </p>
  </fieldset>
}

<div>
  @Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-20T09:32:10.370

这是命名冲突和绑定器试图将您的 File 属性绑定到具有文件名的 FileViewModel 对象，这就是您得到 null 的原因。POST 名称不区分大小写。

改变：

```
public ActionResult Create(FileViewModel file) 
```

至：

```
public ActionResult Create(FileViewModel model) 
```

或任何其他名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-09T11:02:53.650

这也解决了我的问题。这是我使用的名称，类似于模型，也类似于我为发布的模型分配的变量。一旦我整理出字段名称，所有工作都按预期工作。

当然，该错误无助于指出这一点。

# typo3 - 将插件包含为内容元素时的 TYPO3 扩展选择记录

> ID：13968455
> 
> 赞同：0
> 
> 时间：2012-12-20T09:01:49.587
> 
> 标签：typo3

当包含前端插件作为内容元素时，如何从存储文件夹中选择项目？

我做了一个扩展（或正在尝试做），它将块保存在一个文件夹中，可以在多个页面上使用。

在向页面添加前端插件并选择扩展时，我希望能够选择应该在那里显示的记录......

我一直在尝试设置 Flexforms，但仍然没有任何结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T07:14:35.087

如果你想通过 flexform 来做，你可以使用以下方式，

```
<selectProperty>
  <TCEforms>
  <label>Select property</label>
  <displayCond>FIELD:WhichPage:=:Home</displayCond>
   <config>
   <type>select</type>
   <foreign_table>Your table name</foreign_table>
   <foreign_table_where>AND  (your table name.deleted = 0) AND  (your table name.hidden = 0) AND  (tx_wellnessproperty_property.sys_language_uid = CAST('###REC_FIELD_sys_language_uid###' AS UNSIGNED) OR sys_language_uid = '-1' ) ORDER BY your table name.uid DESC  </foreign_table_where>
  <size>3</size>
  <minitems>0</minitems>
  <maxitems>3</maxitems>
  </config>
  </TCEforms>
  </selectProperty> 
```

通过使用这种 flexform 方法，您可以使用每个插件单独选择记录..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:17:30.623

有一个名为“插入记录”的内容元素。也许就是，你需要什么？

如果您需要扩展程序，只需粘贴一些代码。那样更容​​易提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:43:28.973

是的，FlexForm 是存储插入插件附加设置的典型位置，对于普通 BE 编辑器来说是最舒适的。

另一方面，如果您是唯一一个管理该页面的人（具有完全管理员访问权限）并且您不需要在页面上多次粘贴此插件，您还可以将默认记录的 uid 保存在TypoScript -`setup`所需页面上包含的模板字段。

就像是

```
plugin.tx_yourext_pi1.initialRecordUid=123 
```

或用于 Extbase

```
plugin.tx_yourext.settings.initialRecordUid=123 
```

虽然您没有告诉我们您将如何创建扩展，但我们无法为您提供更好的帮助。

# java - IllegalStateException：提交响应后无法转发

> ID：13968461
> 
> 赞同：0
> 
> 时间：2012-12-20T09:02:03.847
> 
> 标签：java, jsp, servlets

下面的代码抛出**IllegalStateException: Cannot forward after response has been committed** ：

```
private void doRequest(HttpServletRequest request) throws IOException, ServletException {
        CallableStatement stmt = null;
        ResultSet rs = null;
        String someString;
        try {
            this.connectDB();
            stmt = this.conn.prepareCall("{call sp_SomeSP1(?)}");
            stmt.setLong(1, someFunc());

            rs = stmt.executeQuery();

            while (rs.next()) {
                if (rs.getInt(1)==someOtherFunc()) {
                    someString = rs.getString(2);
                    break;
                }
            }

            stmt = conn.prepareCall("{call sp_someSP(?, ?)}");
            stmt.setLong(1, someFunc());
            stmt.setTimestamp(2, new Timestamp(getFrom().getTime()));

            rs = stmt.executeQuery();
            if (rs.next()) {
                lastUpdated = rs.getTimestamp("LastUpdated");
            }

            request.setAttribute("lastUpdated", lastUpdated);

            LOGGER.debug("Forwarding to view...");
            getServletContext().getRequestDispatcher("/SomeJSP.jsp").forward(this.request, this.response);

        } catch (NamingException e) {
            LOGGER.error("Database connection lookup failed", e);
            sendError("Server Error");
        } catch (SQLException e) {
            LOGGER.error("Query failed", e);
            sendError("Server Error");
        } catch (IllegalStateException e) {
            LOGGER.error("View failed", e);
        } finally {
            try {
                if (rs!=null) rs.close(); 
            } catch (NullPointerException e) {
                LOGGER.error("Result set closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Result set closing failed", e);
            }
            try {
                if (stmt!=null) stmt.close();
            } catch (NullPointerException e) {
                LOGGER.error("Statement closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Statement closing failed", e);
            }
            try {
                this.closeDB();
            } catch (NullPointerException e) {
                LOGGER.error("Database connection closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Database connection closing failed", e);
            }
        } 
```

在 JSP 页面中有此代码，因此页面将刷新：

```
<meta http-equiv="Refresh" content="10"> 
```

问题是，错误大多数时候不会发生，只有当我`Servlet`在多个浏览器或选项卡中访问转发到 JSP 时，但并非总是如此，只有一段时间才会发生错误。

可能是什么问题呢？

**堆栈跟踪：**

```
java.lang.IllegalStateException: Cannot forward after response has been committed
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:339)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doRequest(CallDetailsServlet.java:103)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doGet(CallDetailsServlet.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Dec 20, 2012 5:04:58 PM org.apache.jasper.runtime.JspFactoryImpl internalGetPageContext
SEVERE: Exception initializing page context
java.lang.IllegalStateException: Page needs a session and none is available
    at org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:148)
    at org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:125)
    at org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:112)
    at org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:65)
    at org.apache.jsp.error_jsp._jspService(error_jsp.java:53)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.mywebapp.servlet.Servlet.sendError(Servlet.java:56)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doRequest(CallDetailsServlet.java:57)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doGet(CallDetailsServlet.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

12 20, 12 5:05:14 PM com.mycompany.mywebapp.servlet.CallDetailsServlet doRequest
ERROR: View failed
java.lang.IllegalStateException: Cannot forward after response has been committed
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:339)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doRequest(CallDetailsServlet.java:103)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doGet(CallDetailsServlet.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
12 20, 12 5:05:15 PM com.mycompany.mywebapp.servlet.CallDetailsServlet doRequest
ERROR: View failed
java.lang.IllegalStateException: Cannot forward after response has been committed
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:339)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doRequest(CallDetailsServlet.java:103)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doGet(CallDetailsServlet.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Dec 20, 2012 5:05:16 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.catalina.connector.Request.notifyAttributeAssigned(Request.java:1552)
    at org.apache.catalina.connector.Request.access$000(Request.java:105)
    at org.apache.catalina.connector.Request$3.set(Request.java:3342)
    at org.apache.catalina.connector.Request.setAttribute(Request.java:1504)
    at org.apache.catalina.connector.RequestFacade.setAttribute(RequestFacade.java:541)
    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:281)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doRequest(CallDetailsServlet.java:103)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doGet(CallDetailsServlet.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Dec 20, 2012 5:05:16 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [callDetailsServlet] in context with path [/WebCharts] threw exception
java.lang.NullPointerException
    at org.apache.catalina.connector.Request.notifyAttributeAssigned(Request.java:1552)
    at org.apache.catalina.connector.Request.access$000(Request.java:105)
    at org.apache.catalina.connector.Request$3.set(Request.java:3342)
    at org.apache.catalina.connector.Request.setAttribute(Request.java:1504)
    at org.apache.catalina.connector.RequestFacade.setAttribute(RequestFacade.java:541)
    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:281)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doRequest(CallDetailsServlet.java:103)
    at com.mycompany.mywebapp.servlet.CallDetailsServlet.doGet(CallDetailsServlet.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

**获取：**

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    super.doGet(request, response);
    doRequest(request);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:12:49.773

你`doGet()`的坏了。您应该删除该`super.doGet(request, response);`行。默认情况下，它会返回一个“HTTP 405 Method Not Allowed”错误页面，该页面有效地提交了您的响应。

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    doRequest(request);
} 
```

不要`super.doXxx()`在 servlet 中调用该方法。默认情况下，它们返回一个 HTTP 405 错误，指示该方法不可用（根据模板方法模式）。

### 也可以看看：

*   [java.lang.IllegalStateException：提交响应后无法（转发|发送重定向|创建会话）](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe/2125045#2125045)
*   [HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET](https://stackoverflow.com/questions/5370633/servlet-405-error/5370738#5370738)

# java - Java MongoDB 查询

> ID：13968463
> 
> 赞同：1
> 
> 时间：2012-12-20T09:02:09.807
> 
> 标签：java, mongodb

我的数据库中有这样的结构：

```
{
  {
     "document_id" : 35,
     "transport" : ["car", "plane", "train", "boat"]
  },

  {
     "document_id" : 36,
     "transport" : ["car", "bike", "train"]
  }
} 
```

我将如何进行搜索查询以查找带有例如运输“飞机”的文档/记录？

谢谢你的帮助。

史蒂文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:12:01.223

要搜索包含元素的数组，您只需根据数组检查该元素。

所以，只需使用： -

```
db.collection.find({transport:"plane"}) 
```

会给你你想要的。

这是Java中的实现： -

```
BasicDBObject doc = new BasicDBObject("document_id", 35)
                             .append("transport", new String[] {"car", "plane"});

BasicDBObject doc2 = new BasicDBObject("document_id", 36)
                             .append("transport", new String[] {"car"});

coll.insert(doc);
coll.insert(doc2);

DBObject query = new BasicDBObject("transport", "plane");
DBCursor cursor = coll.find(query, new BasicDBObject("_id", 0));

while (cursor.hasNext()) {
    System.out.println(cursor.next());
} 
```

**输出 ： -**

```
{ "document_id" : 35 , "transport" : [ "car" , "plane"]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:12:13.830

来自 MongoShell

`db.find({transport:"plane"})`会做。

如果值是数组，MongoDB 将搜索整个数组以匹配查询。

使用 Java 驱动程序。

您首先获得 Mongo 收藏

```
List<Map<String,Object>> list = new ArrayList<Map<String,Object>>();
BasicDBObject dbo = new BasicDBObject();
dbo.append("transport", "plane");
DBCursor cur = collection.find(dbo);
while (cur.hasNext()) {
            list.add(JSONHelper.toJSON(cur.next().toMap()));
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T06:56:51.400

```
@Document(collection = "document")
public class Transport {

private ObjectId document_id;

private ArrayList transport;

}

//

   List<String> list = new ArrayList<String>();
        list.add("car");
        list.add("plane");
        list.add("train");
        list.add("boat");

Transport transport;

transport.setTransport(list); 
```

# php - FQL 查询在首次加载时未返回结果。仅在页面刷新后返回

> ID：13968467
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:02:14.593
> 
> 标签：php, facebook, facebook-fql

> **可能重复：**
> [php 数组在首次加载时未返回](https://stackoverflow.com/questions/13965848/php-array-not-returning-on-first-load)

嗨，这让我发疯了。在我意识到有一个 Facebook 特定论坛之前，我在另一个 SO 论坛上发帖，但运气不佳。所以很抱歉重新发布。

我有一个访问用户个人资料的 Facebook 登录脚本。然后，它会重定向到并填充带有注册表的页面，其中包含他们的所有个人资料信息。

这段代码跳过了所有正确的环节，但问题是第一次加载页面时变量 $fqlResult 没有被填充，因此表单保持空白。

**如果我按 f5，页面重新加载，$fqlResult 返回正确的数据并填充表单。**

```
 <?php
  $is_fb = false;
  $is_linkedin = false;
  $reg_method = $_GET['conn_social'];

  if (isset($_GET['in_uid'])){
    $cur_in_uid = $_GET['in_uid'];
  }

  if ($reg_method == "facebook"){
    $is_fb = true;
  }
  else if ($reg_method == "linkedin"){
    $is_linkedin = true;
  }

  if($is_fb) {
    global $fbconfig;
    $facebook = new Facebook(array( 'appId'  => $fbconfig['appid'],
                                    'secret' => $fbconfig['secret'],
                                    'cookie' => true ));

    $user = $facebook->getUser();

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');

      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

    $is_fb_uid_exist = hl_check_fb_uid_exist($user_profile['id']);

    if($is_fb_uid_exist){
      $is_fb = false;
    }

    try{
      $fql = "select name, first_name, last_name, birthday_date, sex, profile_url, hometown_location, current_location, work, activities, interests, music, tv, movies, books, quotes, about_me, website, education, sports, inspirational_people, languages, pic_square from user where uid=" . $user;

      $param = array( 'method'    => 'fql.query',
                      'query'     => $fql,
                      'callback'  => '' );

      //This is returning a blank dataset on the first page load. If you refresh the page, then the array is populated.
      $fqlResult = $facebook->api($param);
    }

 }
?> 
```

在此之后，每个字段都填充了一个看起来像这样的调用

```
 <?php elseif($is_fb && isset($fqlResult[0]['first_name'])) : ?>

    <input type="text" name="hl_first_name" id="hl_first_name" style="width:130px;" value="<?php echo $fqlResult[0]['first_name']; ?>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:16:04.540

在 $param 中提供访问令牌，您将在第一次加载时获得结果。

```
 $param = array( 'method'    => 'fql.query',
                  'query'     => $fql,
                  'access_token' => ACCESS_TOKEN,
                  'callback'  => '' ); 
```

# svn - 预提交钩子以阻止 svnsync 以外的提交

> ID：13968478
> 
> 赞同：3
> 
> 时间：2012-12-20T09:02:48.963
> 
> 标签：svn, svnsync

我需要为用户维护一个镜像存储库（只读）。我需要阻止所有提交，除了来自 svnsync 的提交。我想我可以使用预提交挂钩来阻止 svnsync 以外的提交？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:44:08.420

为什么要用钩子？您不能只使用该`authz`文件来设置适当的权限吗？

例如

```
[/]
svnsync = rw
* = r 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:42:44.403

我会避免镜像 - 并专注于让您的访问控制直接在主控中，以便用户可以被限制为只读访问。

您将以与您描述的场景大致相同的方式进行设置。只允许执行 svnsync 的服务帐户提交。这里有很多选项，具体取决于您的设置。您是否与 LDAP 集成？您目前如何进行身份验证/授权？

查看[svnperms](http://svn.apache.org/repos/asf/subversion/trunk/tools/hook-scripts/svnperms.py)

# c# - 从文本框中获取电子邮件地址并发送

> ID：13968480
> 
> 赞同：1
> 
> 时间：2012-12-20T09:02:51.340
> 
> 标签：c#

```
if (txtEmail.Text != null)
{
    try
    {
        SmtpClient sc = new SmtpClient("localhost", 587);
        sc.Host = "smtp.gmail.com";
        sc.Credentials = new NetworkCredential("MyEmail@gmail.com", 
                                               "MyPassword");
        sc.DeliveryMethod = SmtpDeliveryMethod.Network;
        sc.EnableSsl = true;
        MailMessage mailMessage = new MailMessage();
        mailMessage.From = new MailAddress("MyEmail@gmail.com");
        mailMessage.Subject = "Sending Test";
        mailMessage.Body = "this is a test message your UserName is"
                            + txtUserName.Text;
        mailMessage.IsBodyHtml = true;
        string mailBox = txtEmail.Text.Trim();
        mailMessage.To.Add(mailBox);
        sc.Send(mailMessage);
        lblMessage.Text = "Mail send...";
    }
    catch (Exception ex)
    {
        lblMessage.Text = ex.Message;
    }
}
else
{
    lblMessage.Text = "you should enter your email address";
} 
```

好吧，首先对不起我的英语语言很差，但是我读了很多关于如何用 C# 发送电子邮件的文章，我知道该怎么做......

但是我的问题是，当我想发送输入到文本框中的电子邮件时，例如

> (E-mailAddress.text) 转换成 MailAddress 或 MailMessage.Add，

它给了我一个例外，上面写着

> （参数'addresses'不能为空字符串。参数名称：addresses）

并向我展示了用 E-mailAddress.text 填充的 MailAdress 或 MailMessage 对象，而不是像“abc@yahoo.com”这样的字符串，甚至更进一步，我无法发送电子邮件......如果有的话帮助我会很高兴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:56:13.930

首先我会改变

```
txtEmail.Text != null 
```

到

```
!string.IsNullOrEmpty(txtEmail.Text) 
```

然后我会尝试这样做：

```
mailMessage.To.Add(new MailAddress(txtEmail.Text.Trim())); 
```

代替

```
string mailBox = txtEmail.Text.Trim();
mailMessage.To.Add(mailBox); 
```

我还将实施一种方法来验证输入的电子邮件地址以避免无效地址:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:55:42.370

检查：

```
if (txtEmail.Text.Trim() != String.Empty) 
```

代替

```
if (txtEmail.Text != null) 
```

# android - 如何使用联系人 ID 编辑 nativecontacts 字段

> ID：13968481
> 
> 赞同：0
> 
> 时间：2012-12-20T09:02:56.763
> 
> 标签：android, native, edit

如何使用联系人 ID 以编程方式在 android 中以编程方式编辑本机联系人中的名字、姓氏、手机号码、照片、电子邮件、地址。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:24:29.020

在按钮上单击执行以下操作：

```
 Intent in = new Intent(Intent.ACTION_INSERT_OR_EDIT);
        in.setType(ContactsContract.Contacts.CONTENT_ITEM_TYPE);
        startActivityForResult(in,EDIT_CONTACT); 
```

并在 onActivityResult 函数中执行此操作：

案例 EDIT_CONTACT：

```
 if (resultCode == RESULT_OK) {
                Uri contactData = data.getData();
                Cursor cur = managedQuery(contactData, null, null, null, null);
                ContentResolver contect_resolver = getContentResolver();

                if (cur.moveToFirst()) {
                    String id = cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts._ID));
                    String name = "";
                    String no = "";
                    String key = cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts.LOOKUP_KEY));

                    String where = ContactsContract.Data.DISPLAY_NAME + " = ? AND " + 
                    ContactsContract.Data.MIMETYPE + " = ? AND " +
                    String.valueOf(ContactsContract.CommonDataKinds.Phone.TYPE) + " = ? ";
                    String[] params = new String[] {name,
                    ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE,
                    String.valueOf(ContactsContract.CommonDataKinds.Phone.TYPE_HOME)};

                    Cursor phoneCur = contect_resolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

                    if (phoneCur.moveToFirst()) {
                        name = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                        no = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        key = phoneCur.getString(phoneCur.getColumnIndexOrThrow(ContactsContract.Contacts.LOOKUP_KEY));

                        System.out.println("EDITIDDDDDDDDDD"+name);
                        System.out.println("EDITIDDDDDDDDDD"+no);
                        System.out.println("EDITIDDDDDDDDDD"+key);

                    /*ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

                    if ( (null == phoneCur)  ) {
        //                          createContact(name, phone);
                      } else {
                        ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
                                .withSelection(where, params)
                                .withValue(ContactsContract.CommonDataKinds.Phone.DATA, no)
                                .build());
                    }

                    phoneCur.close();

                    try {
                        cr.applyBatch(ContactsContract.AUTHORITY, ops);
                    } catch (RemoteException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (OperationApplicationException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
             */

                    id = null;
                    name = null;
                    no = null;
                    phoneCur = null;
                    key = null;

                contect_resolver = null;
                cur = null;

                             }
                    }
            }

        break; 
```

# java - JAVA中如何通过IP地址获取时区

> ID：13968483
> 
> 赞同：1
> 
> 时间：2012-12-20T09:03:09.820
> 
> 标签：java, jsp

我想通过 JAVA 中的 IP 地址获取时区。

实际上我有一个将在客户端机器上运行的应用程序。

我有客户端机器的 IP 地址。但无法获取每台客户端计算机的时区。

在客户端机器中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:03:14.227

通过 IP 地址获取时区；有 GeoTimezone，其中有一定范围的 IP 代表更具体的 TIMEZONE 和国家。您可以下载 CSV 格式的所有文件并创建一个数据库。然后通过sql查询你可以得到你的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:07:37.397

在 Java 中会给你时区

```
java.util.TimeZone.getDefault(); 
```

如果您想在服务器上获取客户端的时区，请在客户端调用它并发送回服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:06:27.963

我不认为这是可能的。但是您可以做的是使用 JavaScript 通过 HTML 获取时区，然后通过表单提交或类似的方式检索此数据。

# html - 使用 CSS 过渡移动 div

> ID：13968486
> 
> 赞同：17
> 
> 时间：2012-12-20T09:03:31.740
> 
> 标签：html, css

我正在使用以下代码在悬停时显示隐藏的 div。我正在使用 CSS`transition`属性来淡入隐藏的 div。是否可以在隐藏的（例如从左到右）div 中滑动而不是仅使用 CSS 淡入？这是我的代码：

**HTML**

```
<div class="box">
    <a href="#"><img src="http://farm9.staticflickr.com/8207/8275533487_5ebe5826ee.jpg"></a>
    <div class="hidden"></div>
</div> 
```

**CSS**

```
.box{
    position: relative;    
}

.box .hidden{    
   background: yellow;
    height: 300px;    
    position: absolute;
    top: 0;
    left: 0;    
    width: 500px;
    opacity: 0;    
    transition: all 1s ease;
}

.box:hover .hidden{
    opacity: 1;
} 
```

**演示：http:** [//jsfiddle.net/u2FKM/](http://jsfiddle.net/u2FKM/)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-20T09:20:02.243

像这样的东西？

[演示](http://jsfiddle.net/u2FKM/4/)

我使用的代码：

```
.box{
    position: relative;
    overflow: hidden;
}

.box:hover .hidden{

    left: 0px;
}

.box .hidden {    
    background: yellow;
    height: 300px;    
    position: absolute; 
    top: 0;
    left: -500px;    
    width: 500px;
    opacity: 1;    
    -webkit-transition: all 0.7s ease-out;
       -moz-transition: all 0.7s ease-out;
        -ms-transition: all 0.7s ease-out;
         -o-transition: all 0.7s ease-out;
            transition: all 0.7s ease-out;
} 
```

我还可以补充一点，可以使用 移动元素`transform: translate();`，在这种情况下，它可以像这样工作 - [DEMO nr2](http://jsfiddle.net/u2FKM/13/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:19:49.137

我添加了供应商前缀，并将动画更改为`all`，因此您拥有动画的不透明度和宽度。

这是你要找的吗？[http://jsfiddle.net/u2FKM/3/](http://jsfiddle.net/u2FKM/3/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-23T20:28:19.020

只是为了添加我的答案，似乎转换需要基于 css 属性中的初始值和最终值才能管理动画。

那些重新设计的 css 类应该提供预期的结果：

```
.box{
    position: relative;  
    top:0px;
    left:0px;
    width:0px;
}

.box:hover .hidden{
    opacity: 1;
     width: 500px;
}

.box .hidden{    
   background: yellow;
    height: 300px;    
    position: absolute; 
    top: 0px;
    left: 0px;    
    width: 0px;
    opacity: 0;    
    transition: all 1s ease;
}
```

```
<div class="box">

    <a href="#">
        <img src="http://farm9.staticflickr.com/8207/8275533487_5ebe5826ee.jpg"></a>
        <div class="hidden"></div>

</div>
```

[http://jsfiddle.net/u2FKM/2199/](http://jsfiddle.net/u2FKM/2199/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T09:08:41.690

```
transition-property:width; 
```

这应该有效。你必须有浏览器相关的代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T09:58:52.293

这对您来说可能是一个很好的解决方案：像这样更改代码

```
.box{
    position: relative; 
}
.box:hover .hidden{
    opacity: 1;
    width:500px;
}
.box .hidden{
    background: yellow;
    height: 334px; 
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    opacity: 0;
    transition: all 1s ease;
} 
```

在此处查看[演示](http://www.jsfiddle.net/u2FKM/11/)

# android - 如何更新图像视图中的位图

> ID：13968490
> 
> 赞同：3
> 
> 时间：2012-12-20T09:03:49.630
> 
> 标签：android

```
protected Bitmap doInBackground(String...params) {
        // TODO Auto-generated method stub
         try {

              /* Open a new URL and get the InputStream to load data from it. */

              URL aURL = new URL(params[0]);
              URLConnection conn = aURL.openConnection();
              conn.connect();
              InputStream is = conn.getInputStream();

              /* Buffered is always good for a performance plus. */
              BufferedInputStream bis = new BufferedInputStream(is);

              /* Decode url-data to a bitmap. */
              Bitmap bm = BitmapFactory.decodeStream(bis);
              b1=bm;

              bis.close();
              is.close();

          } catch (IOException e) 
          {

              Log.e("DEBUGTAG", "Remote Image Exception", e);

          }

       return null;
   }

// TODO Auto-generated method stub
        super.onPostExecute(result);

        i1.setImageBitmap(b1);
        Animation rotation = AnimationUtils.loadAnimation(MainActivity.this, R.anim.rotate);
     i1.startAnimation(rotation);
    //System.out.println("imageview is working");
        try {
            System.out.println("thread going to sleep");
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        i1.setImageBitmap(b1);
        } 
```

我正在通过位图在图像视图中显示来自互联网的图像现在我通过更新 url 获得了另一个图像这个位图但是我无法显示这个图像只有前一个图像显示，如果我在一个仅循环显示最后一张图片？任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:09:44.307

从您的 OnCreate 或您想从网络下载代码的任何地方调用它

```
new Thread(new Runnable() {
                public void run() {
                    Drawable drawable = createDrawableFromURL(_mDrawingURL);

                    Message msgURL = new Message();
                    msgURL.arg2 = URL_CONSTANT;
                    msgURL.obj = drawable;
                    _handler_url.sendMessage(msgURL);   
                }
            }).start();
        } catch (JSONException e) {
            e.printStackTrace();
        } 
    } 
```

此方法将用于从 Internet 下载图像：

```
private Drawable createDrawableFromURL(String urlString) {
        Drawable image = null;
        try
        {
            InputStream inputStream = new URL(urlString).openStream();
            image = Drawable.createFromStream(inputStream, null);
            inputStream.close();
        }
        catch (MalformedURLException e) {
            e.printStackTrace();
            image = null;
        } catch (IOException e) {
            e.printStackTrace();
            image = null;
        }
        return image;
    } 
```

下载图片后，imageview 会更新图片：

```
private Handler _handler_url = new Handler(){
        public void dispatchMessage(Message msg) {
            switch (msg.arg2) {
            case URL_CONSTANT:
                Drawable drawable = (Drawable) msg.obj;
                if(drawable!=null)
                    _mImageView.setImageDrawable(drawable);

                break;
            default:
                break;
            }
        };
    }; 
```

# ios - 是否可以使用核心运动进行距离测量

> ID：13968492
> 
> 赞同：4
> 
> 时间：2012-12-20T09:03:52.067
> 
> 标签：ios, core-motion

> **可能重复：**
> [使用 Core Motion](https://stackoverflow.com/questions/4449565/getting-displacement-from-accelerometer-data-with-core-motion)
> [Android 加速度计精度（惯性导航）从加速度计数据中获取位移](https://stackoverflow.com/questions/7829097/android-accelerometer-accuracy-inertial-navigation)

我正在尝试使用核心运动用户加速度值，并对它们进行双重积分以得出覆盖的距离。我沿着 Y 轴线性移动我的 iPhone，对着桌子上的 30 厘米原木尺。首先，我让设备静止 10 秒，然后通过平均各自的用户加速度值来计算我沿三个轴的偏移量。当我尝试计算所覆盖的距离时，从加速度值中减去 X、Y 和 Z 偏移量。在偏移减法之后，这些值当然分别通过低通滤波器和中值滤波器。滤波器是线性滤波器，截止频率由在低通中取平均值的相邻值的数量和中值滤波器中的中值指定。我已经尝试过从 1 到 100 的不同值。最后，使用梯形规则对这些过滤值进行双重积分以获得距离。但是，计算出来的距离没有接近 30 厘米。我得到的最接近的值是 -22 厘米（我想知道为什么即使我将设备沿 Y 正方向移动，我也会得到负值）。我也遇到了这个： [http://ajnaware.wordpress.com/2008/09/05/accelerating-iphones/](http://ajnaware.wordpress.com/2008/09/05/accelerating-iphones/) 这是一篇关于同一件事的旧帖子，它说返回的加速度计读数似乎以大约 0.18m/s^2 的量子形式出现（即大约 0.018g），很快就会导致很大的累积误差。这样一来，为了让这个误差真正无关紧要，人们必须将设备加速近 1.8m/s^2，这对于距离/长度测量目的来说实际上是不可能的。对于小的运动，看起来不可能通过使用最佳滤波器和高阶数值积分方法来计算距离，而没有像这样不切实际的速度/加速度约束。可能吗？当我得到越来越多的运动更新时，如何使用我的加速度与时间戳数据来内插一个随时间增长的多项式，这近似表示加速度与时间的曲线。多项式的双重积分将是小菜一碟。但是，对于小距离，多项式会有很大的误差分量。使用我的设备将受到的可预测的已知运动，我希望拍摄大量快照（计算距离与实际已知距离）以类似方式计算我的误差多项式，然后从我的第一个多项式中减去它。这能行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:11:09.987

虽然这不适合 StackOverflow，因为这不是一个问题而是一个讨论，所以我会尝试总结一下我的想法。

如前所述，加速度计非常不准确，您需要非常高的精度才能完成此类任务，尤其是在您尝试测量如此短的距离时。另外，加速度计因设备而异，对于不同设备的相同运动，您将获得不同的结果。加上一个非常巨大的随机误差。

我的猜测是，您可以通过校准设备并使“测量移动”几次（例如 10 次）来消除很大一部分随机性/错误。之后，您有足够的数据来获得可能接近实际值的平均值。

校准是这里的关键部分，你必须想出一种聪明的校准方法，比如让用户以不同的速度移动设备不同的距离。

但这一切都只是理论。我真的很想看到你的结果，但我怀疑即使使用最好的过滤器/算法，你也能让它工作得足够好，因为噪音太大了。

# android - Android 警报对话框未显示

> ID：13968493
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:03:58.687
> 
> 标签：android, android-dialog

我正在比较字符串，如果所有字符串都相等，则必须显示一个对话框“ALL ARE EQUAL”，否则另一个对话框“NOT EQUAL”。我只想在警报对话框中使用确定按钮。我的代码：

```
if(s1.equals("yes") && s2.equals("yes") && s3.equals("yes") && s4.equals("yes"))
        showA(); 
```

`showA()`方法在哪里

```
private void showA() {
    AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setTitle("Hello!!");
    ab.setMessage("ALL ARE EQUAL");
    ab.setCancelable(false);
    ab.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }
    });
    AlertDialog ad = ab.create();

    ad.show();

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T09:10:28.757

如果它没有进入方法内部，我认为您的字符串可能是“YES”或“Yes”。

如下图所示，你为什么不试试呢？

```
if(s1.equalsIgnoreCase("yes") && s2.equalsIgnoreCase("yes") && s3.equalsIgnoreCase("yes") && s4.equalsIgnoreCase("yes"))
    showA(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T09:13:31.790

似乎您的字符串`s1,s2,s3 &s s4`处于未定义的情况下，最好使用[equalsIgnoreCase](http://developer.android.com/reference/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)，如下所示：

> s1.equalsIgnoreCase("是")

反而

> s1.equals("是")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:14:09.623

```
if(s1.equalsIgnoreCase("yes") && s2.equalsIgnoreCase("yes") && s3.equalsIgnoreCase("yes") && s4.equalsIgnoreCase("yes"))      {
        showA();
} else {
     showB()
}

private void showA() {
    AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setTitle("Hello!!");
    ab.setMessage("ALL ARE EQUAL");
    ab.setCancelable(false);
    ab.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }
    });
    AlertDialog ad = ab.create();

    ad.show();    
}

private void showB() {
    AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setTitle("Hello!!");
    ab.setMessage("NOT EQUAL");
    ab.setCancelable(false);
    ab.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }
    });
    AlertDialog ad = ab.create();

    ad.show();   
} 
```

你需要这样的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:16:32.057

你的代码工作得很好。只需确保您的字符串等于`yes`区分大小写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:23:07.133

首先，您必须检查 s1,s2,s3,s4 的值，然后进行比较。

你的代码是正确的，。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T09:30:44.243

```
if(s1.equalsIgnoreCase("yes") && s2.equalsIgnoreCase("yes") && s3.equalsIgnoreCase("yes") && 

s4.equalsIgnoreCase("yes"))      {

       showAlertDialog("All ARE EQUAL");

} else {

     showAlertDialog("All ARE NOT EQUAL");
}

private void showAlertDialog(String msg){

    AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setTitle("Hello!!");
    ab.setMessage(msg);
    ab.setCancelable(false);
    ab.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }
    });
    AlertDialog ad = ab.create();

    ad.show();    

} 
```

不要两次输入相同的代码，只需创建一个方法并传递您需要的参数即可。

# mysql - 如何从 MySQL 中的表中删除列

> ID：13968494
> 
> 赞同：489
> 
> 时间：2012-12-20T09:04:03.380
> 
> 标签：mysql, ddl, alter-table

鉴于使用创建的表：

```
CREATE TABLE tbl_Country
(
  CountryId INT NOT NULL AUTO_INCREMENT,
  IsDeleted bit,
  PRIMARY KEY (CountryId) 
) 
```

如何删除该列`IsDeleted`？

* * *

## 回答 #1

> 赞同：767
> 
> 时间：2012-12-20T09:05:52.150

```
ALTER TABLE tbl_Country DROP COLUMN IsDeleted; 
```

[这是](http://sqlfiddle.com/#!2/21bdf)一个工作示例。

请注意，`COLUMN`关键字是可选的，因为 MySQL 只接受`DROP IsDeleted`. 此外，要删除多列，您必须用逗号分隔它们并包括`DROP`每个列。

```
ALTER TABLE tbl_Country
  DROP COLUMN IsDeleted,
  DROP COLUMN CountryName; 
```

这允许您在一个语句`DROP`中`ADD`和`ALTER`同一张表上的多个列。来自[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)：

> 您可以在单个语句中发出多个`ADD`、`ALTER`、`DROP`和子句，用逗号分隔。这是标准 SQL 的 MySQL 扩展，每条语句只允许每个子句中的一个。`CHANGE``ALTER TABLE``ALTER TABLE`

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-12-20T09:08:28.177

使用[`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)with`DROP COLUMN`从表中删除一列，`CHANGE`或`MODIFY`更改一列。

```
ALTER TABLE tbl_Country DROP COLUMN IsDeleted;
ALTER TABLE tbl_Country MODIFY IsDeleted tinyint(1) NOT NULL;
ALTER TABLE tbl_Country CHANGE IsDeleted IsDeleted tinyint(1) NOT NULL; 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-12-20T09:06:06.850

要删除单个列：

```
ALTER TABLE `table1` DROP `column1`; 
```

要删除多个列：

```
ALTER TABLE `table1`
DROP `column1`,
DROP `column2`,
DROP `column3`; 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-12-20T09:07:29.860

您可以使用

```
alter table <tblname> drop column <colname> 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-12-20T09:06:51.577

```
ALTER TABLE `tablename` DROP `columnname`; 
```

或者，

```
ALTER TABLE `tablename` DROP COLUMN `columnname`; 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-06-08T14:37:00.627

如果您正在运行 MySQL 5.6 及更高版本，则可以在线执行此操作，允许其他会话在执行操作时读取和写入您的表：

```
ALTER TABLE tbl_Country DROP COLUMN IsDeleted, ALGORITHM=INPLACE, LOCK=NONE; 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-12-20T09:06:38.823

使用`ALTER`：

```
ALTER TABLE `tbl_Country` DROP COLUMN `column_name`; 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-12-20T09:06:23.123

```
ALTER TABLE tbl_Country DROP columnName; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-01-24T22:43:01.957

值得一提的是 MySQL 8.0.23 及以上版本支持[Invisible Columns](https://dev.mysql.com/doc/refman/8.0/en/invisible-columns.html#invisible-column-metadata)

```
CREATE TABLE tbl_Country(
  CountryId INT NOT NULL AUTO_INCREMENT,
  IsDeleted bit,
  PRIMARY KEY (CountryId) 
);

INSERT INTO tbl_Country VALUES (1, 1), (2,0);

ALTER TABLE tbl_Country ALTER COLUMN IsDeleted SET INVISIBLE;

SELECT * FROM tbl_Country;
CountryId
1
2

ALTER TABLE tbl_Country DROP COLUMN IsDeleted; 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=1560f65244f019e5de550091d8d3d183)**

在需要暂时“隐藏”列才能安全删除它的情况下（例如重新处理相应的应用程序/报告等），它可能很有用。

# c# - RIA 服务返回的 Silverlight POCO

> ID：13968501
> 
> 赞同：5
> 
> 时间：2012-12-20T09:04:37.910
> 
> 标签：c#, .net, silverlight, wcf-ria-services, silverlight-5.0

我正在使用使用 RIA 服务的 Silverlight 5 业务应用程序从服务端返回 POCO 类以填充分层菜单。

我对 POCO 类的最初问题是 SubMenuItems 属性没有通过 RIA 服务传递，尽管它是在服务端填充的。

**原创 POCO**

```
public class BusinessModelMenuDto
{
    [Key]
    [Required]
    public int ID { get; set; }
    public string TextToDisplay { get; set; }
    public string ImageSource { get; set; }
    public IEnumerable<BusinessModelMenuDto> SubMenuItems { get; set; }
} 
```

**服务电话**

```
 public IEnumerable<BusinessModelMenuDto> GetCabsHeirarchy() 
```

经过一些进一步的调查，我发现SubMenuItems 需要`[Include]`and`[Association]`属性才能传递数据。第一次使用 ID => ID 的关联没有给出预期的结果，因此我添加了 ParentID 属性并更改了加载代码以填充外键，如下所示。我还将 Associate 更改为从 ID 映射到 Parent ID。

**更新了 POCO 类**

```
public class BusinessModelMenuDto
{
    [Key]
    [Required]
    public int ID { get; set; }
    public int? ParentID { get; set; }
    public string TextToDisplay { get; set; }
    public string ImageSource { get; set; }
    [Include]
    [Association("SubItems", "ID", "ParentID")]
    public IEnumerable<BusinessModelMenuDto> SubMenuItems { get; set; }
} 
```

在服务器端，我目前正在加载两级菜单，因此顶级项目包含一组子项，但在此之下没有其他子项。

我遇到的问题是，当 RIA 服务通过网络发送集合时，层次结构变得混乱。我已确认我返回的内容结构正确，但未正确到达客户端。顶层还可以，但第二层（SubMenuItems）混在一起，出现了两个更进一步的 SubMenuItems 层。

知道我做错了什么吗？我认为问题出在关联上，或者是同一个 POCO 对象（BusinessModelMenuDto）被用于多个级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:00:11.280

我们发现我们必须对项目使用 Guid`Key`并在服务器上为其分配一个唯一值，然后再传回客户端。

所以你的类定义会变成：

```
public class BusinessModelMenuDto
{
    [Key]
    [Required]
    public Guid ID { get; set; }
    public Guid? ParentID { get; set; }
    public string TextToDisplay { get; set; }
    public string ImageSource { get; set; }
    [Include]
    [Association("SubItems", "ID", "ParentID")]
    public IEnumerable<BusinessModelMenuDto> SubMenuItems { get; set; }
} 
```

然后在创建新元素时设置 ID：

```
ID = Guid.NewGuid(); 
```

# jsp - 使用 s:file 在 struts2 中上传文件

> ID：13968504
> 
> 赞同：0
> 
> 时间：2012-12-20T09:05:11.533
> 
> 标签：jsp, file-upload, struts2

我正在尝试使用 S:file 标签上传文件，但它给了我 http 500 内部错误。但是当我在同一代码中直接将文件名和路径作为常量时，它可以工作。所以我不确定我在哪里错过了循环孔。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Struts 2 - Login Application | ViralPatel.net</title>
</head>

<body>
<h2>Struts 2 - Login Application</h2>
<s:actionerror  />
<s:form action="uploadFile.action"  method="post" enctype="multipart/form-data" >
<s:textfield name="myName"></s:textfield>
  <s:file name="myFile"></s:file>
    <s:submit  value="Submit" align="center" />
</s:form>
</body>
</html> 
```

行动

```
class FileUploadAction extends ActionSupport implements ServletRequestAware {
    File userImage;
    String userImageContentType;
    String userImageFileName;
    HttpServletRequest servletRequest;

    public String execute() {
        try {
            String filePath = servletRequest.getSession()
                    .getServletContext().getRealPath("/");
            File fileToCreate = new File(filePath, this.userImageFileName);
            FileUtils.copyFile(this.userImage, fileToCreate);
        } catch (Exception e) {
            addActionError(e.getMessage());
            return INPUT;
        }
        return SUCCESS;
    }

    public void setServletRequest(HttpServletRequest servletRequest) {
        servletRequest = servletRequest;
    }
} 
```

配置

```
<action name="userImage" class="net.viralpatel.struts2.FileUploadAction"> 
    <interceptor-ref name="fileUpload"> 
        <param name="maximumSize">2097152</param> 
        <param name="allowedTypes">
                  image/png,image/gif,image/jpeg,image/pjpeg
            </param> 
    </interceptor-ref> 
    <interceptor-ref name="defaultStack">
    </interceptor-ref> 
    <result name="success">SuccessUserImage.jsp</result> 
    <result name="input">UserImage.jsp</result> 
</action> 
```

* * *

编辑：下次编辑您的帖子而不是在评论中发布代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:49:06.303

**编辑**：您的 Action 没有`private File myFile;`带有它的 GETTER。

开始纠正那个...

* * *

问题可能出在您的操作代码中，而不是在这里。

如果您传递包含文件名/路径的字符串，它是什么意思？

您`private File myFile;`在 Action 中是否有公共访问器（getter 和 setter）（并且 File 是 java.io.File，而不是其他文件）？

看看这两个简单的教程：

[http://viralpatel.net/blogs/struts-2-file-upload-save-tutorial-with-example/](http://viralpatel.net/blogs/struts-2-file-upload-save-tutorial-with-example/)

[http://www.roseindia.net/struts/struts2/struts-2-file-upload.shtml](http://www.roseindia.net/struts/struts2/struts-2-file-upload.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:22:29.283

您将`fileUpload`拦截器两次放入您的操作拦截器堆栈，因为`defaultStack`已经包含`fileUpload`拦截器。您可以像这样在堆栈内配置拦截器：

```
<action ...>
  <interceptor-ref name="defaultStack">
    <param name="fileUpload.allowedTypes">
      image/png,image/gif,image/jpeg,image/pjpeg
    </param>
  </interceptor-ref>
  <result ... />
</action> 
```

还要确保你在动作类中为你的变量有公共的 getter/setter。

# c - 这些形式的指针声明有什么区别？

> ID：13968510
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:05:40.640
> 
> 标签：c, pointers, declaration

> **可能重复：**
> [C - 指针初始化，星号位置](https://stackoverflow.com/questions/4203009/c-initialization-of-pointers-asterisk-position)

这些声明之间有什么区别：

```
char* str; 
```

和

```
char *str; 
```

有什么区别吗？

另一个例子：

```
 char* str; 
   struct StrStackLink *next; 
```

`str`两者都是`next`指针还是星星的位置有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:08:25.070

没有区别 - 两者都声明了一个指向 char 的指针。但是，在同一行上声明多个变量时会有所不同

```
char* str1, str2; 
```

声明`str1`为指针和`str2`字符，而

```
char *str1, *str2; 
```

声明两个 char 指针

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:08:18.010

您编写的所有 char 指针声明都是等效的。星星的位置确实改变了任何东西。

可能会造成混淆的情况是以下声明

```
char* a, b; 
```

在这里，您声明 a，指向 的指针`char`和 b，a `char`。因此，为了清楚起见，我建议用变量名折叠星号。

```
char *a, b; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:07:00.517

不，根本没有区别。只是个人喜好问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:07:22.233

两者没有任何区别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T09:08:28.947

不，没有区别，但符号`char *str`更好，因为你知道那`str`是一个指针。

例如，声明`char *str1,str2`意味着它`str1`是一个指针，但`str2`它是一个字符。声明`char* str1,str2`的含义相同，但令人困惑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T09:08:19.023

没有区别。

你有什么证据让你这么想吗？

你也可以这样声明：

```
char * p; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T09:10:42.563

全然没有区别

两者`char *str`都`char* str`相同，甚至

`char * str;`也是一样的。

空格不会影响这一点，并且`*`总是与标识符名称一起使用。

是的，第二个问题`next`都是`str`指针。

在下面的情况下，

`char *str,s;`这里`str`是`pointer`while`s`只是`char`。如果要将两者都作为指针放在`*`每个标识符之前。

或者，`typedef`当您需要多个相同类型的指针时，在这种情况下应该考虑使用它。

```
typedef char* pchar;

pchar str, s; // both str and s are pointers 
```

# annotations - 生成注释的命令

> ID：13968511
> 
> 赞同：2
> 
> 时间：2012-12-20T09:05:43.687
> 
> 标签：annotations, intellij-idea

我一直在查看 Intellij 12 的文档，但找不到答案。我目前在 Android 项目上使用带有 AndroidAnnotations 的 Intellij 12。该项目由多个模块组成，但只有 1 个使用注释，其余的是库和依赖项。

当我重建整个项目时，会重新生成注释。但这比制作我的主模块并运行它需要更长的时间。我正在寻找一种方法来重新生成命令上的注释（通过动作或蚂蚁），所以我可以将它包含在我的运行配置中。

我记得使用 Intellij 11，它会在每次运行时重新生成注释，但 12 似乎以不同的方式处理事情。

# php - 用 PHP 更新 MySQL 中大于 100 万亿的大量数字是不可靠的

> ID：13968516
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:05:53.123
> 
> 标签：php, mysql, bigint

当我像这样在 PHP 中向 MySQL 发送值时：

```
$mysqli->query("update bank set cash = $cash"); 
```

它适用于较小的数字，但任何 100 万亿或更大的数字都会产生意想不到的结果。有时它会以 100 为增量更新数字，有时根本不会。

一旦数量超过几十亿，准备好的语句也会有不同但不可靠的结果：

```
$stmt->prepare("update bank set cash = ?");
$stmt->bind_param('i',$new_cash_amt);
$stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:06:55.213

1.  使用双引号。
2.  用`or die(mysql_error());`来看你的bug。
3.  停止使用 mysql* 函数，很快就会被弃用。

使固定：

```
$amount = 17;
$mysqli->query("
        update player_stats 
        set cash = cash + $amount 
        where username = 'cheater2'
") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:08:47.737

您正在使用单引号，它不会解析 php 变量。它正在寻找`cash=cash+$amount`一个字符串，而不是一个保存数据的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:11:40.980

我在这里回答我自己的问题。

事实证明，当您传递这样的值时：

```
$huge_number = 100000000000012345;
echo "The huge_number is: $huge_number"; 
```

它将打印以下内容：

> 巨大的数字是：1.0000000000001E+17

在此转换中会丢失精确值。这就是为什么值有时会以 100 的倍数递增，而在其他时候根本不会。

与准备好的语句一样，任何大于 32 位整数的值（因为我将“i”作为绑定参数中的类型）都将被截断和意外更改。我应该将新值作为“d”传递，如下所示：

```
$stmt->bind_param('d',$new_cash_amt); //This works correctly 
```

# xcode - 有人可以向我建议如何分发应用程序

> ID：13968517
> 
> 赞同：0
> 
> 时间：2012-12-20T09:05:53.410
> 
> 标签：xcode, app-store

我正在尝试为已经在他的 Mac 上创建分发证书的朋友分发应用程序，我如何为他上传应用程序，因为每次我下载证书时它都没有附带密钥（灰色图标密钥）。我该怎么办？我相信灰色的钥匙是私钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:35:09.513

你需要[TestFlight](https://www.testflightapp.com)。在那里注册，并将邀请发送到您朋友的电子邮件。他必须在他的设备中打开电子邮件并按照说明进行操作。在您的朋友注册他的设备后，他就可以从 TestFlight 网站下载和安装应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:25:33.207

无法下载私钥。它必须从最初用于向 Apple 请求证书的 Mac 的钥匙串中导出。

# printing - 打印良好的 matplotlib 的颜色选择

> ID：13968520
> 
> 赞同：10
> 
> 时间：2012-12-20T09:05:55.190
> 
> 标签：printing, matplotlib, pandas

我正在使用 pandas 和 matplotlib 生成带有很多条形的条形图。

我知道如何循环浏览选定颜色的列表（[如何给 pandas/matplotlib 条形图自定义颜色](https://stackoverflow.com/questions/11927715/how-to-give-a-pandas-matplotlib-bar-graph-custom-colors)）。问题是要选择什么颜色，以便我的图表可以很好地打印在纸上（用于研究论文）。我最感兴趣的是列之间的足够对比和看起来令人愉快的颜色选择。我想要多种颜色而不是灰度或单色调配色方案。

是否有任何预定的方案可供人们使用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T19:38:22.717

所以你的要求是“很多颜色”和“打印时没有两种颜色应该映射到相同的灰度值”，对吗？任何“顺序”颜色图（亮度单调增加或减少）都应满足第二个标准。我认为在 matplotlib 中的所有选择中，您只剩下`cubehelix`（已经提到过）`gnuplot`、、和`gnuplot2`：

[![3 个颜色图，显示亮度和色调](../Images/edca3f2c1053a3d6e42fd1c249ffe196.png)](https://i.stack.imgur.com/LLKmW.png)

白线是每种颜色的亮度，因此您可以看到每种颜色在打印时会映射到不同的灰度值。黑线是色调，表明它们在各种颜色中循环。

请注意，cubehelix 实际上是一个函数 ( `from matplotlib._cm import cubehelix`)，您可以调整 helix 的参数以产生更多变化的颜色，[如下所示](http://www.mrao.cam.ac.uk/%7Edag/CUBEHELIX/cubewedges.html)。换句话说，cubehelix 不是颜色图，它是一组颜色图。这里有 2 个变体：

![在此处输入图像描述](../Images/a5df65718b1f357d9b767b7d09beafce.png)

![在此处输入图像描述](../Images/7dabe43bebb468091eca89a92e418179.png)

对于变化较少的颜色（对许多事情来说更令人愉悦，但可能不适用于您的条形图），也许可以尝试 ColorBrewer 3 色地图，`YlOrRd`, `PuBuGn`, `YlGnBu`：

[![3 个具有单调亮度但色调变化较小的颜色图](../Images/f362a0b53b3a7f0049dd2b5aa939bd55.png)](https://i.stack.imgur.com/PCC07.png)

[https://www.flickr.com/photos/omegatron/7298887952/](https://www.flickr.com/photos/omegatron/7298887952/)

不过，我不建议只使用这种颜色来识别条形图。您应该始终使用文本标签作为主要标识符。另请注意，其中一些会产生与背景完全融合的白条，因为它们用于热图，而不是图表颜色：

```
from matplotlib import pyplot as plt
import pandas, numpy as np  # I find np.random.randint to be better

# Make the data
x = [{i:np.random.randint(1,5)} for i in range(10)]
df = pandas.DataFrame(x)

# Make a list by cycling through the colors you care about
# to match the length of your data.
cmap = plt.get_cmap('cubehelix')
indices = np.linspace(0, cmap.N, len(x))
my_colors = [cmap(int(i)) for i in indices]

# Specify this list of colors as the `color` option to `plot`.
df.plot(kind='bar', stacked=True, color=my_colors) 
```

| [![gnuplot 条形图](../Images/0e9b17e51f34d5e38585b2315a8854d0.png)](https://i.stack.imgur.com/jqPPe.png) | [![gnuplot2条形图](../Images/6a2e3da77b3992d580db473364a7936f.png)](https://i.stack.imgur.com/RQ5G4.png) | [![立方体螺旋条形图](../Images/86ce8322ccf6bed1e0add73fa7ab61bc.png)](https://i.stack.imgur.com/lzu6O.png) | [![YlGnBu 条形图](../Images/6d2e5ae77683a4e9dad0637ceb01e293.png)](https://i.stack.imgur.com/Hb0b0.png) |
| --- | --- | --- | --- |

这些是新人：

| [![新人彩条](../Images/87af547e0fb212b942908a7db0759ad2.png)](https://i.stack.imgur.com/E4LtK.png) | [![viridis 条形图](../Images/cb669614a61fb06048a606c2d6abea2a.png)](https://i.stack.imgur.com/uoVLQ.png) |
| --- | --- |

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-21T02:55:08.243

在 1.5 中，matplotlib 将附带 4 个新的合理设计的颜色图：

*   `'viridis'`（从 2.0 开始的默认颜色图）
*   `'magma'`
*   `'plasma'`
*   `'inferno'`.

[A Better Default Colormap for Matplotlib |](https://youtu.be/xAoljeRJ3lU)中介绍了设计这些颜色图的过程。[科学 2015 年](https://youtu.be/xAoljeRJ3lU)。

[![在此处输入图像描述](../Images/fd530ce9c7944a0fbc4c225d7728e432.png)](https://i.stack.imgur.com/cbEp7.png)

为这个过程开发的工具可以通过`pip install viscm`.

* * *

我会建议`cubehelix`彩色地图。它被[设计](https://www.mrao.cam.ac.uk/%7Edag/CUBEHELIX/)为在颜色和灰度中具有正确的亮度排序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T09:45:35.343

我不知道预定的计划。我通常使用几种颜色来绘制发布图。在选择颜色时，我主要考虑两点：

1.  **色盲**：维基百科上的[这个](http://en.wikipedia.org/wiki/Category:Articles_with_images_not_understandable_by_color_blind_users)页面有很多关于选择大多数色盲人可以区分的颜色的好信息。如果您在“编辑提示”部分注意到，一旦您考虑了指南，则只有几组颜色可用。（一个好的经验法则是永远不要混合红色和绿色！）您还可以使用链接的色盲模拟器来查看您的情节是否清晰可见。
2.  **Luminance**：我所在领域的大多数期刊默认以黑白形式出版。即使大多数人在线阅读论文，我仍然希望确保在灰度打印时可以理解这些情节。所以我注意使用具有不同亮度的颜色。要进行测试，一个好方法是对生成的图像进行去饱和处理，这样您就可以很好地了解它在灰度打印时的外观。在许多情况下（尤其是线图或散点图），我还使用颜色以外的其他东西来区分集合（例如线型、不同的标记）。

如果在 matplotlib 图中未指定颜色，则它有一组默认的颜色循环。[这个答案](https://stackoverflow.com/a/9398214/1580351)很好地解释了如何更改默认颜色集。您可以将其自定义为您喜欢的颜色集，因此绘图将依次使用它们。

# ruby - 将句子大写

> ID：13968527
> 
> 赞同：2
> 
> 时间：2012-12-20T09:06:15.727
> 
> 标签：ruby, string, activesupport

是否有一种方法（可能在 Rails 的某个库中）或一种简单的方法可以将字符串的第一个字母大写而不影响字符串其余部分的大写/小写状态？我想用它来大写错误消息。我期待这样的事情：

```
"hello iPad" #=> "Hello iPad" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:12:56.990

Ruby 中有一个 capitalize 方法，但它会将字符串的其余部分小写。否则，您可以编写自己的：

```
class String
  def capitalize_first
    (slice(0) || '').upcase + (slice(1..-1) || '')
  end

  def capitalize_first!
    replace(capitalize_first)
  end
end 
```

**编辑：**添加`capitalize_first!`变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:20:41.990

相当笨拙，但它有效：

```
str = "hello IiPad"
str[0] = str[0].upcase #or .capitalize 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:39:03.400

感谢其他答案，我意识到我需要注意的一些要点，并且没有内置的方法。正如 Vitaly Zemlyansky 所暗示的那样，我查看了`camelize`Active Support of Rails 的来源，这给了我一个提示：那就是使用正则表达式。我决定使用这个：

```
sub(/./){$&.upcase} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-20T09:10:09.810

试试这个

```
"hello iPad".camelize 
```

# vb.net - 增强 'Rock, Paper, Scissors' 以在 VB.NET 中包含 'Lizard, Spock' 并使代码更具可扩展性、可维护性和可重用性

> ID：13968528
> 
> 赞同：3
> 
> 时间：2012-12-20T09:06:18.160
> 
> 标签：vb.net, winforms, oop, object, orm

我是编程和 OOP 的新手，所以请原谅我缺乏知识。

作为我的 Rock, Paper and Scissors 游戏的一部分，我有一个抽象超类（**Weapon** ），它在 VB.NET中有子类（**Rock, Paper 和 Scissors ），例如：**

```
 Public MustInherit Class Weapons
         Public MustOverride Function compareTo(ByVal Weapons As Object) As Integer

    End Class

    Public Class Paper
        Inherits Weapons

        Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Paper Then
                Return 0
            ElseIf TypeOf Weapons Is Rock Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

    Public Class Rock
        Inherits Weapons

        Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Rock Then
                Return 0
            ElseIf TypeOf Weapons Is Scissors Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class

    Public Class Scissors
        Inherits Weapons

        Public Overrides Function compareTo(ByVal Weapons As Object) As Integer
            If TypeOf Weapons Is Scissors Then
                Return 0
            ElseIf TypeOf Weapons Is Paper Then
                Return 1
            Else
                Return -1
            End If
        End Function
    End Class 
```

还有一个超类**Player**，它具有子类（**PlayerComputerRandom**、**PlayerHumanPlayer**和***PlayerComputerTactical***），例如：

```
 Imports RockPaperScissors.Weapons

Public Class Player

    Private pName As String
    Private pNumberOfGamesWon As String
    Public pWeapon As Weapons

    Property Name() As String
        Get
            Return pName
        End Get
        Set(ByVal value As String)
            pName = value
        End Set
    End Property

    Property NumberOfGamesWon As String
        Get
            Return pNumberOfGamesWon
        End Get
        Set(ByVal value As String)
            pNumberOfGamesWon = value
        End Set
    End Property

    Property getWeapon As Weapons
        Get
            Return pWeapon
        End Get
        Set(ByVal value As Weapons)
            pWeapon = value
        End Set
    End Property

    Public Sub pickWeapon(ByVal WeaponType As String)
        If WeaponType = "Rock" Then
            pWeapon = New Rock()

        ElseIf WeaponType = "Paper" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class

    Imports RockPaperScissors.Weapons

Public Class PlayerComputerRandom
    Inherits Player

    Private Enum weaponsList
        Rock
        Paper
        Scissors
    End Enum

    Public Overloads Sub pickWeapon()

        Dim randomChoice = New Random()
        Dim CompChoice As Integer = randomChoice.Next(0, [Enum].GetValues(GetType(weaponsList)).Length)

        If CompChoice = "0" Then
            pWeapon = New Rock()

        ElseIf CompChoice = "1" Then
            pWeapon = New Paper()

        Else
            pWeapon = New Scissors()

        End If

    End Sub

End Class

 Public Class PlayerComputerTactical
    Inherits Player

    Private plastMove As String

    Property lastMove() As String
        Get
            Return plastMove
        End Get
        Set(ByVal value As String)
            plastMove = value
        End Set
    End Property

    Public Overloads Sub pickWeapon()
        ' Add tactical player functionality
    End Sub

End Class

     Public Class PlayerHumanPlayer
        Inherits Player

    End Class 
```

我有 GameForm 类，它实例化对象并执行用于前端的各种其他逻辑，如下所示：

```
 Public Class GameForm
    Private Sub btnRock_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRock.Click
        findWinner("HumanPlayer", "Rock", "RandomComputer")
    End Sub

    Private Sub btnPaper_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPaper.Click
        findWinner("HumanPlayer", "Paper", "RandomComputer")
    End Sub

    Private Sub btnScissors_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnScissors.Click
        findWinner("HumanPlayer", "Scissors", "RandomComputer")
    End Sub

    Public Sub findWinner(ByVal p1name As String, ByVal p1WeaponSelected As String, ByVal p2Name As String)
        Dim player1 = New PlayerHumanPlayer()
        Dim player2 = New PlayerComputerRandom()

        player1.Name = p1name
        player1.pickWeapon(p1WeaponSelected)  ' Should I be using the Rock Class???

        player2.Name = p2Name
        player2.pickWeapon()

        Dim winner As Integer = player1.getWeapon().compareTo(player2.getWeapon())

        Select Case winner
            Case 1
                txtGameStatus.Text = player1.Name() + " wins!"
            Case -1
                txtGameStatus.Text = player2.Name() + " wins!"
            Case 0
                txtGameStatus.Text = "Draw!"
        End Select
    End Sub

End Class 
```

我需要做的是能够添加新的武器（**蜥蜴，Spock**），我知道我可以通过简单地添加继承**武器基类的子类（****蜥蜴，Spock** ）来做到这一点。

 **但是，这将需要对所有子类（**Rock、Paper 和 Scissors**）进行代码更改，这并不是真正的长期可维护解决方案。当然不是最佳做法。

我是编码和 OOP 的新手，有人可以展示我如何增强现有游戏以轻松添加额外的武器吗？我可以使用数据库表来存储武器吗？如果是这样，你能告诉我怎么做吗？我只想为这款游戏提供长期、可重复使用的解决方案。

知道如何实现这一目标吗？任何帮助将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:28:43.703

尽管可以动态添加新的“子类”，但它没有意义。只是不要将“Paper”和“Rock”（例如）视为不同的类，而是将其视为具有不同属性的同一类。武器的一个属性是它的“名称”（“岩石”），另一个属性是它与另一种武器的比较（由名称定义）。

** 已更新** 示例：

```
Private TheData() As String = {"Scissor|Paper,Spock|Lizard,Rock",
                               "Paper|Rock,Spock|Scissor,Lizard",
                               "Rock|Scissor,Lizard|Paper,Spock",
                               "Spock|Rock,Lizard|Scissor,Paper",
                               "Lizard|Scissor,Paper|Rock,Spock"}

Sub Main()

    Dim Weapons As New List(Of Weapon)

    For Each s In TheData
        Dim spl = s.Split("|"c)
        Weapons.Add(New Weapon(spl(0), spl(1).Split(","c), spl(2).Split(","c)))
    Next

    Dim r As New Random

    Dim outcome(2) As Integer
    For i = 1 To 1000000
        Dim w1 = Weapons(r.Next(Weapons.Count))
        Dim w2 = Weapons(r.Next(Weapons.Count))
        Dim o = w1.CompareTo(w2)
        outcome(o + 1) += 1
    Next i
    Console.WriteLine("Loose = {0}, Win = {1}, Draw = {2}", outcome(0), outcome(2), outcome(1))

    Console.ReadLine()

End Sub

End Module

Public Class Weapon
Implements IComparable(Of Weapon)

Public Name As String
Private StrongerWeapons As List(Of String)
Private WeakerWeapons As List(Of String)

Public Sub New(name As String, stronger As IEnumerable(Of String), weaker As IEnumerable(Of String))
    Me.Name = name
    StrongerWeapons = New List(Of String)(stronger)
    WeakerWeapons = New List(Of String)(weaker)

End Sub

Public Function CompareTo(other As Weapon) As Integer Implements IComparable(Of Weapon).CompareTo
    Select Case True
        Case Me.Name = other.Name : Return 0
        Case WeakerWeapons.Contains(other.Name) : Return -1
        Case StrongerWeapons.Contains(other.Name) : Return 1
        Case Else : Throw New ApplicationException("Error in configuration!")
    End Select
End Function
End Class 
```

现在您将拥有一个可配置的“战斗系统”。

更新后的示例显示了系统“正在运行”。`TheData`是您的配​​置被“存储”的地方，它可以在文本/xml 文件、数据库或其他任何内容中。

请注意，这是可**配置**的示例，而不是 Stone/Scissor/Paper(Lizard/Spock) 的示例，因为在这种特定情况下，“解决方案”会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:11:27.653

如果这有助于您可以为您的类编写运算符以进行比较和其他 Ex ，那也是一回事：

```
#Region "Operators"
    Public Shared Operator =(ByVal crD1 As GPSCoordinate, ByVal crD2 As GPSCoordinate) As Boolean
        Return IsEql(crD1, crD2)
    End Operator

    Public Shared Operator <>(ByVal crD1 As GPSCoordinate, ByVal crD2 As GPSCoordinate) As Boolean
        Return Not IsEql(crD1, crD2)
    End Operator

    Private Shared Function IsEql(ByVal crD1 As GPSCoordinate, ByVal crD2 As GPSCoordinate) As Boolean
        If crD1 Is Nothing And crD2 Is Nothing Then
            Return True
        ElseIf Not crD1 Is Nothing And Not crD2 Is Nothing Then
            Return CBool(crD1.Value = crD2.Value)
        End If
        Return False
    End Function
#End Region 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:29:03.167

一种广泛使用的方法是[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)。当您需要定义依赖于两个不同类的行为（或返回值）时，您可以应用此方法。您无需创建 switch 语句，而是为每个案例创建一条消息，并让每个类决定如何表现。我不熟悉 VB，所以请原谅我使用另一种语言，但我想你会明白的：

```
abstract class Weapon
{
abstract public function compareTo($otherWeapon);
abstract public function compareToRock();
abstract public function compareToPaper();
}

class Rock extends Weapon
{
public function compareTo($otherWeapon)
{
return $otherWeapon->compareToRock();
}

public function compareToRock(){return 0;}

public function compareToPaper(){return -1;}
}

class Paper extends Weapon
{
public function compareTo($otherWeapon)
{
return $otherWeapon->compareToPaper();
}

public function compareToRock(){return 1;}

public function compareToPaper(){return 0;}
} 
```

下一步是添加`Scissors`类，这意味着：

*   在超类中添加 compareToScissors() 抽象消息。
*   在每个子类中添加 compareToScissors() 实现。
*   添加`Scissors`类并实现对应的方法。

添加`Lizard`和`Spock`只是重复相同的步骤。如您所见，这里有一些权衡：

*   (+) 您正在添加行为，而不是更改现有行为（即您没有修改现有方法实现）。从维护和测试的角度来看，这很好（您的测试应该仍然有效）。
*   (+) 这更多地取决于个人喜好，但对我来说，将 switch 语句分隔在单个方法中更容易理解。
*   (-) 有一个方法爆炸。这是双重调度的一个广为人知的副作用，即添加一个新变体意味着在所有其他类中添加一个新方法。

As a final note you may consider not returning an integer but to actually model your result as an object (Win/Loose/Tie). By doing so you can then delegate behavior to the result instead fo making switch statements over it.

HTH**

# javascript - get() 请求中的条件

> ID：13968538
> 
> 赞同：0
> 
> 时间：2012-12-20T09:06:38.443
> 
> 标签：javascript, ajax, jquery

我想`get`根据我得到的数据对 jQuery 请求设置条件。

这是我的功能：

```
function validateForm() {
    var username = $('#username').val()
    var result = ''

    $.get(
        '/auth_validate_username/', 
        { 'result': result }, 
        function(data) {
            $.post(
                '/auth_validate_username/', 
                { 'username': username }, 
                function(data) { 
                    $('.error_message').html(data); 
                }
            );
        }
    );
    return false;
}; 
```

HTML：

```
<form  method="post" onsubmit="return validateForm();">
    <input id='username' type="text" name="username"/>
    <div class='error_message'></div>
    <button type="submit">Valider</button>
</form> 
```

我想设置一个条件，如果`result`我用我的`get`函数得到的不是空的，那么表单就不会提交。但是如果`result != ''`，那么我希望提交表单。

关于如何在`get`请求中的表格上设置条件的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:12:26.360

在`get`请求后执行的函数中，可以执行任意的javascript语句。包括`if`.

```
function validateForm() {
    var username = $('#username').val()
    var result=''

    $.get(
        '/auth_validate_username/', 
        { 'result': result }, 
        function(data) {

            // Magical line there
            if (data !== '') {

                $.post(
                    '/auth_validate_username/', 
                    { 'username': username }, 
                    function(data) { 
                        $('.error_message').html(data);
                    }
                );
            }
        }
    );
    return false;
}; 
```

# python - 编写此函数的更多pythonic方式

> ID：13968542
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:06:50.570
> 
> 标签：python, optimization, python-3.x

我想知道是否有更多的pythonic方式来编写这个函数：

```
def parse(filename):
    with open(filename, 'r', encoding='koi8-r') as f:
        for log_line in f:
            for s in services:
                if ' ' + s + ' ' in log_line:
                    print(s)
                    services.remove(s) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:15:38.983

使用集：

```
def parse(filename):
    servicesset = set(services)
    with open(filename, 'r', encoding='koi8-r') as f:
        for log_line in f:
            words = set(log_line.split())
            servicesset -= words

    services[:] = list(servicesset) 
```

这假定`services`全局是一个列表。请注意，*传入*服务然后返回结果会*更好：*

 *```
def parse(filename, services):
    services = set(services)
    with open(filename, 'r', encoding='koi8-r') as f:
        for log_line in f:
            words = set(log_line.split())
            services -= words

    return list(servicesset) 
```*

# php - 如何为 Composer 存储库定义显式 SVN 修订版？

> ID：13968546
> 
> 赞同：1
> 
> 时间：2012-12-20T09:06:55.900
> 
> 标签：php, svn, composer-php

我正在尝试使用 Composer 将*google-api-php-client*库包含到我的项目中。最简单的方法是从 VCS 主干分支获取库，但我认为在我的情况下这不是最好的主意。更好的是指向一些稳定的库状态（标签或修订）。虽然没有可用的标签，但获得特定的 svn 修订版是唯一的选择。但我不知道该怎么做。

我尝试了不同的包配置，但没有成功，如下所示：

```
{
  "repositories":[
    {
        "type":"package",
        "package":{
            "name":"project/google-api-php-client",
            "version":"0.2.1",
            "source":{
                "type":"svn",
                "url":"http://google-api-php-client.googlecode.com/svn",
                "reference":"trunk/?r=515"
            }
        }
    }
  ]
} 
```

是否可以使用作曲家签出 svn 修订版？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:48:54.757

在定义版本时使用包存储库，您可以在参考中指定修订。我的 wordpress composer.json 中的一个例子

```
{
    "repositories": [
        "type": "package",
        "package": {
            "name": "wordpress-plugin/wp-minify",
            "type": "wordpress-plugin",
            "version": "1.2",
            "source": {
                "type": "svn",
                "url": "http://plugins.svn.wordpress.org/wp-minify",
                "reference": "trunk@691320"
            },
            "require": {
                "composer/installers": "~1.0"
            }
        }
    ]
} 
```

这会从主干安装插件，其中包含`691320`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:18:05.343

版本可以在需要部分设置（你没有显示）。

唯一可用的 SVN 选项是：

```
{
    "repositories": [
        {
            "type": "vcs",
            "url": "http://svn.example.org/projectA/",
            "trunk-path": "Trunk",
            "branches-path": "Branches",
            "tags-path": "Tags"
        }
    ]
} 
```

看起来你想使用一个包，但你也可以只定义这个存储库和`require`适当的版本（你可以标记吗？这更容易）。

您也可以尝试将修订版放入`version`参数中，但我认为这不会奏效。

此外，文档说明了关于“主干”路径：

> 由于 Subversion 没有原生的分支和标签概念，因此 Composer 默认假定代码位于 $url/trunk、$url/branches 和 $url/tags 中。如果您的存储库具有不同的布局，您可以更改这些值。

# sql - 在 SQL 中，如果为空，如何将日期字段转换为字符串？

> ID：13968551
> 
> 赞同：4
> 
> 时间：2012-12-20T09:07:10.700
> 
> 标签：sql, date, select, sql-server-2008-r2, case

我想在 SQL Server 2008 R2 中编写一个 SQL 查询，当它为 NULL 时将日期转换为字符串。例如...

```
 Date                            ShipmentRef     RecieptNo
    2009-01-01 03:12:11.596         DS298-YYY       18060
                                    FM298-YYY       95464
    2010-11-11 08:33:55.974         IL298-YYY       56703
    2003-08-01 07:00:44.846         UI835-XYX       40264
                                    US655-YXY       34643
    2004-03-07 12:46:33.352         WE242-XXX       83755 
```

以上数据只是我当前数据的示例表。当我运行 SELECT 查询时，我希望它返回如下数据：

```
 Date                            ShipmentRef     RecieptNo
    2009-01-01 03:12:11.596         DS298-YYY       18060
    InsertRandomStringHere          FM298-YYY       95464
    2010-11-11 08:33:55.974         IL298-YYY       56703
    2003-08-01 07:00:44.846         UI835-XYX       40264
    InsertRandomStringHere          US655-YXY       34643
    2004-03-07 12:46:33.352         WE242-XXX       83755 
```

我不确定哪个会更好，CASE 或 CONVERT。您给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T09:11:48.057

假设 SQL 服务器：

```
SELECT ISNULL(CONVERT(nVarChar(30), Date, 121), 'InsertRandomStringHere') 
```

[**演示**](http://sqlfiddle.com/#!3/d41d8/7324)

[转换和转换 (Transact-SQL)](https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql?view=sql-server-2017)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T09:08:08.180

```
COALESCE(datefield, 'InsertRandomStringHere') 
```

（尽管正如其他人指出的那样，对于某些 DBMS，您可能需要进行额外的类型转换操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:10:57.110

试试这个 。这是wto mysql

```
select if(Date <> '',Date,'xxxxxxx'),ShipmentRef,RecieptNo from table 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:12:12.127

这取决于您到底想要达到什么目标。

列中的每个值都必须是相同的类型（至少在 MS-SQL 中），因此如果在日期的情况下想要“随机字符串” ，`Date`列中的所有值都必须是类型。`VARCHAR``NULL`

然后是这样的：

```
SELECT CAST(COALESCE(GETDATE(), 'InsertRandomStringHere') AS VARCHAR) AS DATE
UNION
SELECT CAST(COALESCE(NULL, 'InsertRandomStringHere') AS VARCHAR) 
```

应该管用。

但是，可能很难从`Date`电线另一端的应用程序（如果有应用程序）的列中读取值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:12:37.843

```
SELECT ISNULL(Date, 'InsertRandomStringHere') AS Date
FROM Table 
```

# bash - 使用 Sublime Text 2 的 bash 脚本构建系统

> ID：13968552
> 
> 赞同：3
> 
> 时间：2012-12-20T09:07:13.070
> 
> 标签：bash, build-automation, sublimetext2

我在 Sublime 2 中使用 SQL 查询。我有一个自定义脚本，它以 sql 文件名作为参数，将其上传到服务器，下载查询结果并将其转换为有效的 csv 文件。它有效，而且非常有用。

但是，当我尝试使用此脚本为 Sublime Text 2 设置构建系统时，出现错误。这是我的崇高构建文件：

```
{
    "cmd" : ["exec_sql.sh", "$filename"],
    "selector" : "source.sql",
    "path" : "/Users/username/sql"
} 
```

SQL 文件和 exec_sql 脚本都位于 /Users/username/sql/ 文件夹中。这是我得到的：

```
/Users/username/sql/exec_sql.sh: line 9: which: command not found
/Users/username/sql/exec_sql.sh: line 16: basename: command not found
/Users/username/sql/exec_sql.sh: line 19: username@hostname.com:/tmp/: No such file or directory
/Users/username/sql/exec_sql.sh: line 24: ssh: command not found
/Users/username/sql/exec_sql.sh: line 25: username@hostname.com:/tmp/.csv: No such file or directory
[Finished in 0.0s with exit code 127] 
```

似乎尽管是一个命令行脚本，但 sh 文件被解释为其他东西。我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:57:26.907

我认为如果将您的自定义脚本添加到系统路径（添加到 BIN 目录），问题就可以解决。

我将使用我已成功使用的详细示例。

1.  确保您的自定义脚本被标记为可执行文件并获得了 shebang。一个简单的脚本，其中包含在您的示例中失败的 basename 命令（我称之为 test_basename.sh）：

    ```
    #!/bin/bash
    echo $1
    basename $1 
    ```

2.  创建一个符号链接以将脚本包含在 BIN 目录中，以便它可以在任何文件夹中执行。在我的 Ubuntu 中，我使用以下命令执行此操作：

    ```
    sudo ln -s /Users/username/sql/test_basename.sh /usr/bin/test_basename.sh 
    ```

3.  检查控制台中任意目录下的脚本

    ```
    cd /tmp
    test_basename.sh some-filename 
    ```

4.  重新启动崇高文本

5.  创建一个使用简单脚本的构建系统。我以 $file 为例。其他选项在[文档](http://docs.sublimetext.info/en/latest/reference/build_systems.html#build-system-variables)中。

    ```
    {
        "cmd" : ["test_basename.sh", "$file"]
    } 
    ```

6.  在 Sublime Text 中打开一个文件并运行创建的构建系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T08:22:08.557

如果您不想创建符号链接，请使用变量`$project_path`或`$file_path`

```
{
    "shell_cmd": "./do.sh",
    "shell": true,
    "working_dir": "$project_path"
} 
```

变量参考：[sublimeText docs](http://docs.sublimetext.info/en/latest/reference/build_systems/configuration.html#build-system-variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T20:21:11.337

我能够为 Sublime Text 2 创建一个通用的 Bash 构建系统：

1.  创建一个新的构建系统
2.  使用以下代码：

    ```
    {
        "cmd": ["/path/to/bash-build.sh", "$folder"],
        "shell": true,
        "working_dir": "$folder",
        "windows": {
            "cmd": ["C:\\path\\to\\bash-build.sh", "$folder"]
        }
    } 
    ```

3.  另存为`bash.sublime-build`

4.  使用您选择的编辑器创建一个新的 shell 脚本并将以下代码粘贴到其中：

    ```
    #!/bin/env bash

    echo "Start building..."

    if [ -f $1/build.sh ]; then
        cd $1
        build.sh
        cd -
    else
        echo "File doesn't exist: $1/build.sh"
    fi

    echo "Done."

    exit $? 
    ```

    将其保存`bash-build.sh`在您在 Sublime 构建系统中引用的同一文件夹中

5.  在 Sublime 中打开一个文件夹（注意：在 Windows 上，从命令行打开 Sublime 时构建系统似乎损坏）

6.  创建一个新的文本文件并将其保存`build.sh`到在 Subilme 打开的根文件夹中

7.  在`build.sh`中，发疯：

    ```
    #!/bin/env bash

    # do some crazy, custom build

    exit $? 
    ```

我已经开始将它与[Pandoc](http://pandoc.org/)结合使用来从 Markdown 文件生成 HTML 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T18:06:56.653

好像你在 Mac 上。在我意识到系统路径变量错误之前，我遇到了同样的问题。

我通过以下方式修复了它。

首先，通过将其粘贴到终端（不带第一个 $）来获取当前 PATH：

```
$ echo $PATH 
```

复制此路径（它看起来像这样`/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/Library/Frameworks/Python.framework/Versions/3.4/bin:/opt/local/bin:/opt/local/sbin`：）

现在编辑构建系统以包含此路径（`path`您使用的变量实际上应该是 a `working_dir`）：

```
{
"cmd" : ["exec_sql.sh", "$filename"],
"selector" : "source.sql",
"working_dir" : "/Users/username/sql",
"path": "PASTE $PATH VALUE HERE" 
```

}

它现在应该可以工作了。至少它帮助了我。

# java - java.lang.ClassNotFoundException：org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuterFilter

> ID：13968559
> 
> 赞同：4
> 
> 时间：2012-12-20T09:07:34.693
> 
> 标签：java, struts2

我将所有struts2 jars复制到该`WEB-INF/lib`文件夹​​中，struts.xml文件如下图所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">* 
```

运行应用程序时我仍然遇到此异常。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-27T09:51:04.927

对于新版本的 Struts2 类路径更改如下（Struts 2.5）

```
org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter 
```

包名称已更改一些类已移至不同的包，请参阅下面的列表以获取更多详细信息：

* * *

**新的：**

* * *

```
org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter
org.apache.struts2.dispatcher.filter.StrutsExecuteFilter
org.apache.struts2.dispatcher.filter.StrutsPrepareFilter
org.apache.struts2.dispatcher.listener.StrutsListener
org.apache.struts2.result.ServletRedirectResult
com.opensymphony.xwork2.interceptor.ValidationAware 
```

* * *

老的：

* * *

```
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
org.apache.struts2.dispatcher.ng.filter.StrutsExecuteFilter
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter
org.apache.struts2.dispatcher.ng.listener.StrutsListener
org.apache.struts2.dispatcher.ServletRedirectResult
com.opensymphony.xwork2.ValidationAware 
```

更多详情请[点击这里](https://cwiki.apache.org/confluence/display/WW/Version+Notes+2.5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-14T11:20:50.963

关于提到的错误 SEVERE: Exception starting filter struts2 java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter

问题：以下组合 Eclipse - WTPPlugin - Struts2 - Maven3 似乎有问题

结果：我们假设当我们以“在服务器上运行”运行项目时，我们假设 eclipse 运行 maven，创建 WAR 文件并部署在服务器上。但它对我来说并不完美。我确实在maven创建WAR的目标文件夹中看到了WAR文件，并且WAR是完美的。但是eclipse似乎运行了别的东西。

解决方案：将所有需要的 JAR 文件放入 eclipse 项目的 WEB-INF/lib 中。如果您使用版本控制，请确保忽略 lib 文件夹。使用 maven 时如何找到所有必需的 JAR？转到目标文件夹和 WAR 文件。将其打开并转到 WEB-INF/lib。将所有这些 JARS 复制到 eclipse 项目的 WEB-INF/lib 中。

谢谢，苛刻

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-04T16:10:58.450

它发生在我身上，我通过从 Intellij 设置重新创建工件来解决它。如果您使用 Intellij，则需要再次为您的 Web 项目重新创建 Artifacts。

*   转到文件-> 项目结构
*   从左侧选项卡中选择工件。
*   通过选择工件并单击工件顶部的 (-) 按钮来删除当前工件。
*   添加新的文物，第一次战争爆炸然后战争档案。
*   享受。

![在此处输入图像描述](../Images/2834b4358d1526e14de730d40c6e1bab.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:47:21.783

`web.xml`在您的文件 中包含此映射

```
<filter> 
       <filter-name>struts2</filter-name> 
       <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class> 
      </filter>

    <filter-mapping> 
       <filter-name>struts2</filter-name> 
       <url-pattern>/*</url-pattern> 
      </filter-mapping> 
```

# java - 将用自然语言编写的条件解释为 Java 代码

> ID：13968560
> 
> 赞同：0
> 
> 时间：2012-12-20T09:07:35.420
> 
> 标签：java, nlp, interpreter

问题：

*   我希望用户能够在文本编辑器中以简单的语法编写条件，例如：A?outcome1:(B?outcome2:outcome3)

A 和 B 是布尔条件。所以上面这句话的意思是：如果 A 为真，则结果 1，否则如果 B 为真，则结果 2，否则为结果 3。

在 Java 中，我实现了这种语法的解释器，以便 A、B、outcome1、outcome2、outcome3 被翻译成预先存储在某处的值（A 和 B 将是返回布尔值的函数，结果将是对象），并且评估条件并返回结果。

我的问题是，我在这里重新发明轮子吗？是否有 Java 包或库已经提供了“[受约束的] 自然语言解释为 Java 代码”类型的函数的简洁实现？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:48:28.603

我最终用 Java 编写了一个类，它读取人类编写的规则并对其进行解释。在这里找到它： [https ://github.com/seinecle/Umigon/blob/master/src/java/RuleInterpreter/Interpreter.java](https://github.com/seinecle/Umigon/blob/master/src/java/RuleInterpreter/Interpreter.java)

# sql - 将表链接到第二个表中的两列

> ID：13968561
> 
> 赞同：1
> 
> 时间：2012-12-20T09:07:36.543
> 
> 标签：sql, oracle

我有一个问题，我认为我的主要问题是弄清楚如何表达它以从 Google 获得可接受的答案。

情况：

表 A 是“发票”，它有一个列在两个地方链接到表 B 的“工作”。它链接到我们的“工作编号”列或“客户编号”列。主要问题是，如果我们设置作业而不是客户设置作业，“客户编号”和“作业编号”可能是相同的编号。

我得到的是，每次在任一列中有相同的数字时，结果都会重复。

现在这极大地简化了情况以尝试使其更容易理解，但我本质上是在寻找一个语句，它查看表 A 获取值，然后与列 B1 进行比较，如果不匹配，然后将其与 B2 进行比较，如果不匹配的则将其从结果中排除。关键是，如果它在与 B1 比较时匹配，则不会继续将其与 B2 进行比较。

对此的任何帮助将不胜感激，即使它只是指向执行此操作的非常明显的运算符或函数的方向。漫长的一天即将结束。

谢谢你。

编辑：

进一步说明：

```
Invoice Table
---------------------------------
PK,  INVOICE_NUMBER,  LINK_TO_JOB

Job Table
---------------------------------
PK, JOB_NUMBER, CLIENT_JOB_NUMBER 
```

现在问题的关键是两个PK都是数据库生成的序号，没有重叠。发票编号和作业编号都是应用程序生成的序列号，没有重叠。作业的链接是应用程序生成的，并且在开具发票时，会根据规则链接到作业表中的两个字段之一。为简单起见，假设这些规则是如果没有链接到作业编号，是否有一个客户作业编号链接。

现在，客户工作编号是一个写入购买人员的字段，很多错误可能而且确实会发生，但也有很多废话。诸如“电子邮件”“传真”之类的东西是非常常见的答案。因此，当其中有诸如“电子邮件”之类的废话时，它会链接到具有相同“电子邮件”标签的一系列其他字段。

所以这是问题一。

问题二 Where 语句：

```
SELECT INVOICE_NUMBER,
       LINK_TO_JOB
       JOB_NUMBER,
       CLINET_JOB_NUMBER

    FROM JOBS_TABLE a, 
         INVOICE_TABLE b 
```

如何设置 where 语句以获得期望的结果，我尝试过：

```
WHERE (LINK_TO_JOB = JOB_NUMBER OR LINK_TO_JOB = CLIENT_JOB_NUMBER) 
```

这会返回很多倍数，例如当作业编号和客户作业编号相同时，以及当答案“电子邮件”中写入多个相同时等。现在这可能是不可避免的，我最终将使用带有此 where 语句的 Distinct 来尽我所能用我所拥有的。但是我想做的是：

```
WHERE (LINK_TO_JOB = JOB_NUMBER (+) OR LINK_TO_JOB = CLIENT_JOB_NUMBER (+)) 
```

这会返回一个错误，因为您可以将外连接与 OR 运算符一起使用。

如果没有任何结果，我可能只需要使用 OR 连接，然后加入 Select Distinct，然后在 Invoicing 流程中构建冗余，以便当数据库丢失链接时，手动流程会捕获它们。

尽管我对任何想法都很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:13:42.183

使用 SELECT DISTINCT 从结果集中删除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:43:09.893

一种方法是使用集合操作。UNION 将为您提供一组独特的值。你没有提供太多细节，所以我猜测细节：你需要根据你的需要修改它们。

```
with j as ( select * from jobs )
select j.*, inv.*
from invoices inv
     join j on ( inv.job_no = j.job_no)
union
select j.*, inv.*
from invoices inv
     join j on ( inv.job_no = j.client_no) 
```

* * *

您遇到困难的根本原因是数据模型是半熟的。在适当的设计中，INVOICES.JOB_NO 将具有引用 JOBS.JOB_NO 的外键关系。而 JOBS.CLIENT_NO 将是一条附加信息，一个业务密钥，但不会被 INVOICES 引用。当然它可以显示在实际发票上，这就是 Nature 给我们加入的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:27:15.057

好的，这里是集体努力。我使用了 APC 建议的联合加入。并修改以适应我的数据及其所有怪癖（从纸袋中读取法语无法数据模型）然后我将所有内容都包含在 user1871207 和 Hikaru-Shindo 建议的独特声明中。

但是对我来说是负分，我的问题如此不清楚的原因有好几倍，但我难以掌握/解释的一大块信息是发票并不总是用于工作，再加上发票可以合并（它只是把所有东西都搞砸了）而且这只是一个大混乱，我在你的帮助下设法贴上了一小块两年前的透明胶带。

我在这里继续职业生涯的唯一希望是利用出现的例外情况（它们会像蜘蛛猴一样向我袭来！）希望修改整个发票流程，以便我们可以报告一些基本的损益数字。

为你的所有帮助干杯。

# java - 如何实现集合论与对象集的并集和交集

> ID：13968563
> 
> 赞同：2
> 
> 时间：2012-12-20T09:07:42.513
> 
> 标签：java, union, set

嗨，我已经看过这篇[文章](https://stackoverflow.com/questions/5283047/intersection-union-of-arraylists-in-java)，当您有两组数据（即字符串）时如何实现联合和交集。当我的集合包含对象时，我该如何做同样的事情，并且我只想获得一个属性的联合每个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:35:16.173

> 但是我想以某种方式覆盖它们，这样如果我的集合中已经有一个对象在所选属性中具有相同的值，它就不会添加一个对象。如果我不够清楚，请告诉我，这样我就可以写一个例子。

我认为最好的方法是使用 ConcurrentMap。

```
ConcurrentMap<String, MyType> map = new ConcurrentHashMap<>();

// the collection to retain.
for(MyType mt: retainedSet) map.put(mt.getKey(), mt);

// the collection to keep if not duplicated
for(MyType mt: onlyIfNewSet) map.putIfAbsent(mt.getKey(), mt);

// to get the intersection.
Set<String> toKeep = new HashSet<>();
for(MyType mt: onlyIfNewSet) toKeep.add(mt.getKey());

// keep only the keys which match.
map.keySet().retainAll(toKeep); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:24:44.440

Google Guava 有 Sets 类，其中包含这些方法等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:22:07.337

在[这个答案](https://stackoverflow.com/questions/5283047/intersection-union-of-arraylists-in-java/5283079#5283079)中，使用[集合](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)方法`retainAll(Collection)`- 交集和`#addAll(Collection)`- 联合。

由于这些方法使用 equals，因此您还必须覆盖`equals`Class 中的方法并实现基于单一属性的比较。

如果是简单的比较，这里有一个例子（由我的 IDEA 生成）：

```
public class Main {

private Integer age;

...

@Override
public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || getClass() != o.getClass()) return false;

    Main main = (Main) o;

    if (age != null ? !age.equals(main.age) : main.age != null) return false;

    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:17:06.977

Intersection 使用[contains](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#contains%28java.lang.Object%29 "包含")，它使用 equals 。您应该`equals()`在要进行交集的类上实现方法。

我没有找到关于`set.addAll()`实现的具体评论，但很可能它也用于`equals()`确定一个对象是否已经在场景中。

如果您只想按字段进行比较，您的 equals() 应该只比较该字段。

# wamp - 使用 LG IDE 在电视上运行应用程序

> ID：13968565
> 
> 赞同：1
> 
> 时间：2012-12-20T09:07:47.257
> 
> 标签：wamp, wampserver, lg, smart-tv

我有一台 LG SMART 电视升级器 LG SP820。

我正在按照此说明尝试使用 LG IDE 在电视上运行运行应用程序：

[http://developer.lge.com/resource/tv/RetrieveDocDevLibrary.dev](http://developer.lge.com/resource/tv/RetrieveDocDevLibrary.dev)

从电视浏览器我收到一条消息：

```
Cannot connect to destination IP address 
```

我还安装了 WAMPSERVER 并使用 WAMPSERVER 我能够在 localhost 上成功运行该页面。

什么会阻止 LG SMART TV 连接到我的本地计算机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:01:07.387

问题是电视和 PC 不在同一个交换机上（即使在同一个网络中）。

在同一台交换机上连接电视和 PC 解决了问题

# ubuntu - 无法使用“外部工具”功能从 gedit 执行 PHP

> ID：13968568
> 
> 赞同：0
> 
> 时间：2012-12-20T09:08:01.890
> 
> 标签：ubuntu, development-environment, gedit, ubuntu-12.10

在我的 gedit 中，我设置了一个像这样的外部工具：-

姓名：`Run PHP`

编辑：-

```
#!/bin/sh
php 
```

节省：`Nothing`

输入：`Current document`

输出：`Display in bottom pane`

适用性：`All documents`

但它没有在底部窗格中输出任何内容。它只是显示了这一点： -

```
运行工具：运行PHP
完毕。

```

它不显示实际输出，但如果代码中有任何语法或运行时错误，该错误将在底部窗格中以红色显示。问题仅在于脚本的实际输出。

任何人都可以帮忙吗？我在下面附上了我的 gedit 设置窗口的屏幕截图。

（我使用的是 Ubuntu 12.10 顺便说一句）。谢谢。

![在此处输入图像描述](../Images/99fdc4dd4dab767e90df75ae2711f676.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:55:02.480

问题是，该输出没有新行...在 PHP 命令之后附加 echo "" 或其他内容（或将 PHP_EOL 回显到 PHP 代码）

```
#!/bin/sh
php
echo "" 
```

# jquery - 下拉列表的选定值在 Kendo Mobile 中显示 [object object]

> ID：13968570
> 
> 赞同：2
> 
> 时间：2012-12-20T09:08:04.510
> 
> 标签：jquery, kendo-ui

我试过使用下面的代码，我只是第一次完美绑定，当我试图选择另一个“类别”但产品没有显示在“产品下拉列表”中并且它也被禁用时。但我一直休息指出来自 Web 服务的数据即将到来，但它没有刷新数据

在 HTML 中

```
 <body>
<select id="ddlCategory" style="width: 300px">
    <option>---Select---</option>
</select>
<select id="ddlProduct" style="width: 300px">
</select>
<script type="text/javascript">
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "WebService.asmx/GetCategory",
        dataType: "json",
        success: function (data) {
            var dataSource = [];
            for (i = 0; i < data.d.length; i++) {
                dataSource.push({ "category": data.d[i].category })
            };
            $("#ddlddlCategory").kendoDropDownList({
                dataTextField: "category",
                dataValueField: "category",
                dataSource: dataSource,
                change: ChangeWeek
            });
        },
        failure: function (msg) {
            alert(msg);
        }
    });

    //$("#ddlProduct").kendoDropDownList();      
    function ChangeWeek(e) {
        //var ddlProduct = $("#ddlProduct");
        var ddlCategory = $("#ddlCategory").data("kendoDropDownList");
        var dataItem = ddlCategory.text();
        $.ajax({
            type: "POST",
            url: "WebService.asmx/GetProduct",
            data: "{'Category':'" + dataItem + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (data) {
                debugger
                //$("#ddlProduct").empty();
                var dataSource = [];
                for (i = 0; i < data.d.length; i++) {
                    dataSource.push({ "product": data.d[i].product })
                };
                $("#ddlProduct").kendoDropDownList({
                    dataTextField: "product",
                    dataValueField: "product",
                    dataSource: dataSource,
                    //  isVisible: true
                });
            },
            failure: function (msg) {
                alert(msg);
            }
        });
    }
    var app = new kendo.mobile.Application();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:13:30.190

尝试指定`dataValueField`：

```
 $("#ddlCategory").kendoDropDownList({
            dataTextField: "CategoryName",
            dataValueField: "CategoryName",
            dataSource: dataSource,
            change: ChangeWeek
        }); 
```

# selenium-webdriver - 我们可以安排 Selenium 测试用例吗

> ID：13968573
> 
> 赞同：1
> 
> 时间：2012-12-20T09:08:08.417
> 
> 标签：selenium-webdriver

我已经创建了 Selenium Web Driver 测试用例并在 Maven 中运行它。

我们可以安排 Selenium 测试用例在用户给定的日期/时间运行吗？

我用谷歌搜索并发现了几个选项，例如（1）创建一个批处理文件然后将其添加到 Windows 调度程序中或（2）使用 Jenkins

在某个地方，给出了 Quartz Scheduler。

有没有其他更好的方法，或者是这些选项中最好的方法。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:11:31.893

我们使用 Jenkins，因为它提供了多种选项来连接到不同的源代码控制系统，允许使用脚本、maven 命令、ant 等以各种方式构建您的需求。您可以创建依赖作业，使用各种插件来添加额外的功能Jenkins，共享报告，发送电子邮件......并且可以根据各种参数安排作业，例如基于时间或基于您的存储库中的提交或基于您正在部署的构建。我没有使用过 Quartz 调度器，所以对此没有意见。

# python - psycopg2 为 date_part 函数返回错误（？）类型

> ID：13968574
> 
> 赞同：2
> 
> 时间：2012-12-20T09:08:08.897
> 
> 标签：python, django, psycopg2

我有一个 Django 应用程序，它使用基于 django 聚合查询集的 Google Visualization API（Google 图表）生成一些图形。Google Charts API 期望数据格式正确，以正确绘制生成图表（即日期需要是 javascript 类型的 Date，而不是整数或浮点数）。

假设我想为我的模型 Posts 创建一个聚合，以显示特定用户每年的记录总数。我的代码看起来像这样：

```
qset = Post.objects.filter(user__id=1).extra(select={"year": "date_part('year', cdt)"}\
          .values("year").annotate(num_records=Count("id")).order_by() 
```

这项工作非常好，除了`date_part()`用于从 timestampz 字段中提取年份的 postgresql 函数返回为浮点数，而不是 int，以防弄乱我的图表数据。

从 psql 运行类似的查询会返回一个整数，这是我所期望的。

```
select date_part('year', cdt) from public.core_post where id=6543;
  date_part 
  -----------
  2011
(1 row) 
```

同样，使用 psycopg2 库运行一个小型 python 程序给了我同样的问题：

```
import psycopg2

def main():
    conn_string = "host='localhost' dbname='mydb' user='username' password='secret'"
    conn = psycopg2.connect(conn_string)
    cursor = conn.cursor()

    sql = "select date_part('year', cdt) from public.core_post where id=6543;"
    cursor.execute(sql)

    for rec in cursor.fetchone():
        print type(rec), rec

if __name__ == '__main__':
    main()

<type 'float'> 2011.0
[Finished in 0.1s] 
```

任何人都知道为什么，或者它是否可以修复？

（我当然可以在将数据传递到我的图形库之前编写一个修复此问题的函数，但我宁愿能够传入查询集（因为这就是我编写图形库的方式）。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:21:10.640

好吧，尴尬。只需重新阅读有关 date_part 的 PostgreSQL 文档，其中清楚地说：

```
Function                    Return Type
date_part(text, interval)   double precision 
```

我会接受这个作为答案，并将其留作将来参考。

通过将结果转换`date_part()`为 int 来解决。

```
qset = Post.objects.filter(user__id=1).extra(
           select={"year": "date_part('year', cdt)::int"}) \
           .values("year").annotate(num_records=Count("id")).order_by() 
```

# r - 快速融化的数据表操作

> ID：13968579
> 
> 赞同：8
> 
> 时间：2012-12-20T09:08:24.990
> 
> 标签：r, dataframe, data.table, aggregation, reshape2

我正在寻找用于操作`data.table`其结构类似于`melt`从`reshape2`包中创建的数据框的对象的模式。我正在处理具有数百万行的数据表。性能至关重要。

问题的一般形式是是否有一种方法可以根据列中的值子集执行分组，并让分组操作的结果创建一个或多个新列。

问题的一种特定形式可能是如何使用`data.table`来完成`dcast`以下内容的等效操作：

```
input <- data.table(
  id=c(1, 1, 1, 2, 2, 2, 3, 3, 3, 3), 
  variable=c('x', 'y', 'y', 'x', 'y', 'y', 'x', 'x', 'y', 'other'),
  value=c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10))
dcast(input, 
  id ~ variable, sum, 
  subset=.(variable %in% c('x', 'y'))) 
```

其输出是

```
 id  x  y
1  1  1  5
2  2  4 11
3  3 15  9 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T10:13:47.847

未经测试的快速答案：似乎您正在寻找*by-without-by*，也就是*grouping-by-i* ：

```
setkey(input,variable)
input[c("x","y"),sum(value)] 
```

这就像 SQL 中的快速 HAVING。`j`对 的每一行进行评估`i`。换句话说，上面是相同的结果，但比：

```
input[,sum(value),keyby=variable][c("x","y")] 
```

在仅选择感兴趣的组之前，对所有组（浪费地）进行后一个子集和评估。前者（*by-without-by*）仅直接进入组的子集。

与往常一样，组结果将以长格式返回。但是之后在（相对较小的）聚合数据上重新调整到广泛的范围应该是相对即时的。反正就是这么想的。

如果有很多不感兴趣的列，第一个`setkey(input,variable)`可能会咬人。`input`如果是这样，可能值得对所需的列进行子集：

```
DT = setkey(input[ , c("variable","value")], variable)
DT[c("x","y"),sum(value)] 
```

将来实现辅助键时会更容易：

```
set2key(input,variable)              # add a secondary key 
input[c("x","y"),sum(value),key=2]   # syntax speculative 
```

也可以分组`id`：

```
setkey(input,variable)
input[c("x","y"),sum(value),by='variable,id'] 
```

根据您的数据，包括`id`在密钥中可能是值得的成本：`setkey`

```
setkey(input,variable,id)
input[c("x","y"),sum(value),by='variable,id'] 
```

如果您将 by-without-by 与 by 组合在一起，如上所述，那么 by-without-by 就像子集一样运行；即，`j`仅在`i`缺少 by 时为每一行运行（因此名称为*by-without-by*）。因此，您需要`variable`再次包含 ，`by`如上所示。

或者，以下内容应通过`id`“x”和“y”的并集进行分组（但以上是您在问题中所要求的，iiuc）：

```
input[c("x","y"),sum(value),by=id] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:17:42.863

```
> setkey(input, "id")
> input[ , list(sum(value)), by=id]
   id V1
1:  1  6
2:  2 15
3:  3 34

> input[ variable %in% c("x", "y"), list(sum(value)), by=id]
   id V1
1:  1  6
2:  2 15
3:  3 24 
```

最后一个：

```
> input[ variable %in% c("x", "y"), list(sum(value)), by=list(id, variable)]
   id variable V1
1:  1        x  1
2:  1        y  5
3:  2        x  4
4:  2        y 11
5:  3        x 15
6:  3        y  9 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:34:03.390

我不确定这是否是最好的方法，但您可以尝试：

```
input[, list(x = sum(value[variable == "x"]), 
             y = sum(value[variable == "y"])), by = "id"]
#    id  x  y
# 1:  1  1  5
# 2:  2  4 11
# 3:  3 15  9 
```

# windows-phone-7 - Windows phone 8 等待不等待

> ID：13968580
> 
> 赞同：3
> 
> 时间：2012-12-20T09:08:25.507
> 
> 标签：windows-phone-7, .net-4.5, windows-phone-8

我正在编写一个示例 Windows Phone 8 应用程序。我还[为 .NET Framework 4、Silverlight 4 和 5 以及 Windows Phone 安装了框架 Async](https://nuget.org/packages/Microsoft.Bcl.Async/1.0.12-beta)。

但是，方法上的 await 不会等待，并且我的 mainpage.xaml 加载会尝试访问尚未填充的属性。

这是我的代码。

```
public static ObservableCollection<Model.CatalogCategory> Products { get; set; } 
private async void Application_Launching(object sender, LaunchingEventArgs e)
    {
        ApplicationViewModel vm = new ApplicationViewModel();
        Products = await vm.LoadLocalDataAsync();

    } 
```

在这个方法之后，mainpage.xaml 被加载，它试图访问“Products”并抛出一个空引用异常。

我需要采取不同的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:16:34.157

您没有正确理解 Async 和“等待”的含义。'await' 仅等待该方法块中的其余代码。await 行之后的其余代码将转换为仅在异步任务完成后调用的回调。这不会阻止整个方法。该方法被视为已完成，控制权返回给调用者。

您要么删除那里的“等待”，要么尝试在 MainPage_Loaded 事件或 OnNavigatedTo 事件中加载数据。任何适合你的。

# php - 我使用 ajax 制作了一个 sql 语句，但似乎什么也没发生

> ID：13968587
> 
> 赞同：0
> 
> 时间：2012-12-20T09:08:47.993
> 
> 标签：php, mysql, ajax, jquery

我输入了这段代码，但是当我检查我的 mysql 数据库时似乎什么也没发生

```
$.ajax("ajax.php?type=insert&giftcode="+newarray[$x]+"&winner=winner1"); 
```

我把 ajax.php

```
require_once('setup.php'); //where i connect to the database 

if ($_GET['type']== "insert")
{

    $query='UPDATE prizes SET winner='+$_GET['winner'] +',time='+NOW()+',WHERE prizecode='+$_GET[giftcode]+'LIMIT 1';
    $insert_query = $db->query($query) ;
    checkDBError($insert_query);

    echo("something happened");

} 
```

数据库本身没有问题，因为连接没有问题，因为它适用于代码的不同部分，但我可以看到我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:11:31.517

您在查询中使用了 + 号。这仅在 javascript 中有效。请使用积分！此外，WHERE 语句之前的 , 符号不正确。

```
if($_GET['type']== "insert") {
    $query = 'UPDATE prizes SET winner = '.$_GET['winner'].', time = NOW() WHERE prizecode = '.$_GET['giftcode'].' LIMIT 1';
    $insert_query = $db->query($query) ;
    checkDBError($insert_query);

    echo("something happened");
} 
```

# jquery - 我可以使用 jQuery 更改页面上链接的内容吗？

> ID：13968588
> 
> 赞同：4
> 
> 时间：2012-12-20T09:08:55.073
> 
> 标签：jquery

我的 HTML 看起来像这样：

```
<div id="control">
    <a href="/xx/x">y</a>
    <ul>
        <li><a href="/C003Q/x" class="dw">x</a></li>
        <li><a href="/C003R/xx" class="dw">xx</a></li>
        <li><a href="/C003S/xxx" class="dw">xxx</a></li>
    </ul>
</div> 
```

有没有一种使用 jQuery 的方法，我可以轻松地将这个 HTML 更改为下面的 HTML，其中每个链接都有包含在 a 中的文本，并且每个链接都`<span>`更改 `href`为`data-href`？

```
<div id="control">
    <a data-href="/xx/x" ><span>y</span></a>
    <ul>
        <li><a data-href="/C003Q/x" class="dw"><span>x</span></a></li>
        <li><a data-href="/C003R/xx" class="dw"><span>xx</span></a></li>
        <li><a data-href="/C003S/xxx" class="dw"><span>xxx</span></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:11:37.780

尝试这个：

```
$("#control a").each(function() {
    var $el = $(this);
    $el.html("<span>" + $el.text() + "</span>")
        .data('href', $el.attr('href'))
        .removeAttr('href');
}); 
```

[**示例小提琴**](http://jsfiddle.net/Y3pTw/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:10:56.633

您可以使用 each() 来遍历`a`具有`class` `dw`.

**[现场演示](http://jsfiddle.net/VgBGk/)**

```
$('#control a.dw').each(function(){  
    $(this).html("<span>" + $(this).text() + "</span>" );
}); 
```

如果您想对具有类似 href 的元素执行相同操作，`/x`则需要更改选择器。

```
$('#control a[href*="/x"]').each(function(){  
    $(this).html("<span>" + $(this).text() + "</span>" )
     .attr('data-href', $(this).attr('href'))
     .removeAttr('href');;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:13:51.280

你可以使用`wrapInner`和`data`方法。

```
$('#control a').each(function(){
    $(this).data('href', this.href).wrapInner('<span></span')
    // $(this).attr('data-href', this.href)
    //                       .removeAttr('href') // not a good idea
    //                       .wrapInner('<span></span>')
}) 
```

[http://jsfiddle.net/Ck6zh/](http://jsfiddle.net/Ck6zh/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:19:13.443

您可以像这样将 href 标签更改为 data-href 标签

```
var foo=$("#control").html();
foo=foo.replace(/href/g,"data-href");
$("#control").html(foo); 
```

[看到这个小提琴](http://jsfiddle.net/Dineshkani/fXM4G/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:25:45.040

您可以试试这个，将每个 href 属性更改为 data-href ，然后添加 span 标签：

```
$("#control").find('a').each(function() {
    $(this).attr('data-href',$(this).attr('href'));
    $(this).removeAttr('href');
    $(this).html("<span>" + $(this).text() + "</span>" );
});​​​​​​​​ 
```

# php - facebook id 是不可变的吗

> ID：13968591
> 
> 赞同：1
> 
> 时间：2012-12-20T09:09:03.483
> 
> 标签：php, facebook

我正在使用官方的**php facebook sdk**，并且通过执行一个简单的操作来提取有关当前登录用户的数据：

```
$data = $fb->api('/me', 'GET'); 
```

现在，`$data`包含很多东西，其中有一个，你可能知道一个 id ( `$data["id"]`)。我的问题是：给定某个用户，您认为这条信息有多独特和不可变？你认为它会随着时间而改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:27:53.407

它是独一无二的，不会改变（根据整个 FB API 文档，但没有明确说明）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:44:50.910

id不会改变。然而，关联的访问令牌会经常更改，因此您应该只存储 id 并在需要时使用它来获取访问令牌。

# image-processing - 计算机视觉中的平滑度约束

> ID：13968597
> 
> 赞同：2
> 
> 时间：2012-12-20T09:09:18.750
> 
> 标签：image-processing, computer-vision, 3d-reconstruction

我从阴影中读了一本**Shape**的书，我遇到了“ **Smoothness Constraint** ”的方程。我有点不明白这个等式的含义。任何人都可以帮我解释一下吗？非常感谢您花时间阅读我的问题。

我想上传这个方程的图片，但不幸的是，我是新成员，所以我不能上传图片，我不知道如何在这里写数学公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:10:53.943

平滑度约束（在空间上）是指像素值会随着您向任何方向移动而缓慢变化的假设，并且它们的值可能会接近其邻居的值。

在 shape-from-shading 上下文中，这可能意味着平滑度超过了恢复的 3d 位置。相邻像素应投影到靠近 3d 空间的位置。

# python - 使用 Python 将最大值提取到输出文件

> ID：13968598
> 
> 赞同：0
> 
> 时间：2012-12-20T09:09:20.857
> 
> 标签：python, arrays, list, max, dictionary

好的，在尝试自学最好的方法是什么之后，我已经搜索了这个特定的答案。我是 python 新手，希望有人知道一种快速的方法来帮助我！以下是输入数据文件的示例：

Lat,Long,Var,Id,日期时间
47.022,-104.330,10,MBVR,12/12/20 06:36:00
47.022,-104.330,11,MBVR,12/12/20 06:26:00
48.810, -104.253,10,MCOM,12/12/20 06:41:00
48.810,-104.253,13,MCOM,12/12/20 06:38:00
48.810,-104.253,12,MCOM,12/12/20 06:48:00
47.022,-104.330,11,MBVR,12/12/20 05:17:00
47.022,-104.330,10,MBVR,12/12/20 05:34:00
47.022,-104.330,12, MBVR,12/12/20 05:24:00

该文件可以有许多不同的 id，这只是一个示例。我让程序停止摄取数据并将其分离出来，并编写一个输出文件。这是我的代码的一部分：

```
csv_max = 'X:\\csv\\lsrwnd.dat'
my_file = open(csv_max, "rb")
rowadd = my_file.next()
for line in my_file:
    items = line.split(",")
    coords = items[0:2]
    wind = items[2]
    station = items[3]
    timestamp = items[4] 
```

所以这是我的问题。我需要做的是创建一个只有“id”列的最大值的输出文件。因此，如果重复“站”，我需要程序运行该站的每次出现，找到最大“id”，并且只返回每个相应“站”的“id”最大值行。从上面的数据示例中，我想要的是：

48.810,-104.253,13,MCOM,12/12/20 06:38:00
47.022,-104.330,12,MBVR,12/12/20 05:24:00

其余的可以倾倒。对于 MCOM，最大 id 为 13，对于 MBVR，最大值为 12。因此，如果有 50 个不同的站点，我只需要返回 50 条线路，返回的 50 条线路中的每条线路都是该站点的最大“id”。我可以创建输出文件，但是如何获取每个站的最大 id 数据以及其他元素？我尝试使用字典，但我无法弄清楚如何返回整行而不是仅返回最大值键和站名。“日期时间”变量并不重要（就需要最近或第一次出现而言）。预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:21:36.420

```
import csv
d = {}
with open('input.csv', 'r') as f:
    csvr = csv.DictReader(f)
    for rec in csvr:
        if rec['Id'] not in d or int(rec['Var']) > int(d[rec['Id']]['Var']):
            d[rec['Id']] = rec
with open('output.csv', 'w') as f:
    csvw = csv.DictWriter(f, fieldnames=csvr.fieldnames)
    csvw.writeheader()
    csvw.writerows(d.itervalues()) 
```

output.csv 文件现在看起来像这样：

```
Lat,Long,Var,Id,Date Time
48.810,-104.253,13,MCOM,12/12/20 06:38:00
47.022,-104.330,12,MBVR,12/12/20 05:24:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:26:08.767

当你遍历你的行时，将最大 id 值存储在一个名为 max_stations 的字典中。

```
csv_max = 'X:\\csv\\lsrwnd.dat'
my_file = open(csv_max, "rb")
rowadd = my_file.next()
max_stations = {}
for line in my_file:
    items = line.split(",")
    coords = items[0:2]
    wind = items[2]
    station = items[3]

    try:
        current_wind = max_stations[station]
    except IndexError:
        current_wind = wind
    max_wind = wind if wind >= current_wind else current_wind  

    max_stations[station] = max_wind
    timestamp = items[4] 
```

# c# - 微调器图形在 jQuery UI 对话框中未正确显示

> ID：13968599
> 
> 赞同：3
> 
> 时间：2012-12-20T09:09:27.167
> 
> 标签：c#, asp.net-mvc, jquery-ui

我试图显示一个带有微调器 GIF 的 jQuery UI 对话框。最初是用 HTML 静态编码的 GIF：

```
<div id="LoadingDiv" style="display:none; text-align: center">
    <img alt="Loading..." src='/Content/images/ajax-loader.gif' />
</div> 
```

但是，IE 中存在一些已知问题，这些问题会阻止 GIF 图像在 jQuery UI 对话框中正确设置动画。所以我采取了动态地将一个`img`元素附加到`div`元素：

```
$("#FilterForm").submit(function (){
    $("#LoadingDiv").html($("<img>").attr({ 
        'id':'spinner', 
        'alt':'Loading...',
        'src': '@Url.Content("~/Content/images/ajax-loader.gif")'
    }));
    $("#LoadingDiv").dialog("open");
}); 
```

这给系统带来了一些奇怪的错误。提交表单时，有时会显示 GIF，有时则不会。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T03:27:12.823

[通过使用Spin.js](http://fgnass.github.com/spin.js/)实施解决方法来解决。不需要 GIF 和更好的跨浏览器兼容性。

编码：

```
$("#FilterForm").submit(function (){
    var opts = {
        top: '10px',
        left: '50px',
        length: 2,
        width: 3,
        radius: 7
    };
    var loadingDiv = document.getElementById("LoadingDiv");
    var spinner = new Spinner(opts).spin(loadingDiv);

    $("#LoadingDiv").dialog("open");
}); 
```

# c - 为什么 `&` 在 C 中同时用于二进制 AND 和 address-of？

> ID：13968600
> 
> 赞同：6
> 
> 时间：2012-12-20T09:09:29.243
> 
> 标签：c, syntax

这个问题是对[C 中什么是 &&& 操作](https://stackoverflow.com/q/13946938/713554)的回应，这让我想到`&`将其用作二进制 AND 和地址。

为什么这两个非常不同的任务使用相同的符号？当考虑它时，`@`似乎是一个更好的地址符号。

我不认为它在实践中会引起很多问题，因为编译器可能会捕获大多数错误使用，但是可能会创建涉及宏的代码，看起来它正在执行二进制 AND 而实际上它正在执行寻址.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T09:12:27.170

我认为没有什么大的理由可以将它用于两种不同的事物。

幸运的是，该语言没有歧义，因为一种用途是一元运算符，另一种是二元运算符（即有两个操作数）。* 同上（乘法或取消引用）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T09:32:08.193

`@`不用于“地址”的原因（正如您建议的那样是一个不错的选择）是该字符不是[ISO 646 字符集](http://en.wikipedia.org/wiki/ISO/IEC_646)的一部分，该字符集实际上在 C 的早期使用。

虽然确实 C 的设计者*可以*使用`@`并为其设计一个三元组序列，但我怀疑他们觉得这不值得这么麻烦。`&&&` *可以*出现在人们的代码中的事实可能不足以被认为是选择不同运算符符号的理由。

# sqlite - 为什么外键在 websql 中不起作用..？

> ID：13968602
> 
> 赞同：4
> 
> 时间：2012-12-20T09:09:37.707
> 
> 标签：sqlite, google-chrome, foreign-keys, web-sql

我尝试使用 web sql 在我的应用程序中使用外键..我在 chrome 中测试它..没有错误..但是当我手动插入到表 img（包含 FK）进行测试时，
我预计会失败..但插入仍然成功..这是我的代码..请帮助我..

```
tx.executeSql("PRAGMA foreign_keys = ON;");    
tx.executeSql("CREATE TABLE IF NOT EXISTS img (ID INTEGER PRIMARY KEY ASC,imgID VARCHAR, image VARCHAR,  FOREIGN  KEY (imgID) REFERENCES trans (ID) )", []); 
```

在这种情况下，我尝试使用 FK 方法来保存我的图像名称数据并连接到 trans 表。

我的插入代码

```
tx.executeSql("insert into img (imgID,image) values ('100','23.jpg')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:05:01.653

是否`INSERT`在与 相同的数据库连接上执行`CREATE`？因为`PRAGMA foreign_keys = ON`仅对连接有效。它必须为您打开的每个连接执行。

此外，请确保在您不在事务中时运行该 PRAGMA 语句，因为[这不会产生任何影响](http://www.sqlite.org/pragma.html#pragma_foreign_keys)。您以开头的示例代码`tx.`表明这是您的问题的原因。

**更新** 正如[MisterSmith](https://stackoverflow.com/users/813951/mister-smith)在评论中指出的那样，基于 Chromium 的浏览器的扩展无论如何都不能在事务之外运行 SQL 语句，因此不可能执行外键。

因此，您必须确保您的外键在应用程序代码中保持完整性，或者您可以编写[触发器来强制执行外键](http://www.justatheory.com/computers/databases/sqlite/foreign_key_triggers.html)（如果 Chromium 扩展允许触发器）。

# authentication - 会话超时后如何将用户重定向到自定义网页？

> ID：13968604
> 
> 赞同：1
> 
> 时间：2012-12-20T09:09:41.653
> 
> 标签：authentication, servlets, servlet-filters, session-timeout

我想通过我的代码将用户重定向到会话超时页面。我可以在过滤器中编写什么逻辑来检查会话是否已超时并将用户重定向到该自定义页面（例如 CustomSessionTimeout.jsp）。这个页面不需要经过任何过滤。

这是第一个过滤器中一个方法的签名

**公共无效doFilter（ServletRequest servletRequest，ServletResponse servletResponse，FilterChain filterChain）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:37:19.923

您可以通过查看用户是否[发送](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestedSessionId%28%29)了会话 cookie 以及根据服务器不再[有效的请求来检查这一点。](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isRequestedSessionIdValid%28%29)

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;

    if (request.getRequestedSessionId() != null && !request.isRequestedSessionIdValid()) {
        // Session has expired! Now do your job.
        response.sendRedirect(request.getContextPath() + "/CustomSessionTimeout.jsp");
        return;
    }

    chain.doFilter(req, res);
} 
```

# c# - WiX：如何将目录 ID 设置为文件源？

> ID：13968606
> 
> 赞同：1
> 
> 时间：2012-12-20T09:09:55.637
> 
> 标签：c#, wix

您好，我需要从用户指定的位置复制文件，我该如何设置它以便我可以使用目录 ID？

像这样的东西！（这行不通）

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLDIR" Name="name" >

            <Component Id="id1" Guid="GUID">
                <File Name="dll.dll" DiskId="1" Vital="yes"
                      Source="[MYDIR]\dll.dll" />
            </Component>

        </Directory>
        <Directory Id="MYDIR" Name="mydirname" >
        </Directory>
    </Directory>
</Directory> 
```

我有一个浏览对话框，所以我设置了 MYDIR，但用户指定我将在哪里找到我想要的文件，然后我想使用该路径作为源，这可能吗？

谢谢你的回答

编辑

我把我的`INSTALLDIR`

```
<CopyFile Id="dll.dll" 
SourceDirectory="MYDIR" 
SourceName="dll.dll" 
DestinationDirectory="INSTALLDIR" 
DestinationName="dll.dll" /> 
```

并且工作正常:)

唯一的问题是如果路径错误并且文件没有被复制，安装程序仍然运行并且我没有得到我的文件:(所以我必须以某种方式验证路径或执行自定义操作以检查文件是否存在

无论如何感谢一切！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:42:45.150

是的，有可能，我认为 CopyFile 元素是您所需要的：

```
<Component Id="MyComponent" Guid="YOUR_GUID">  
 <CopyFile Id="dll.dll" SourceProperty="[MYDIR]" SourceName="dll.dll" DestinationDirectory="INSTALLDIR" DestinationName="dll.dll" /> 
</Component> 
```

# c# - 在 WCF 服务和客户端中使用程序集的接口和类

> ID：13968613
> 
> 赞同：1
> 
> 时间：2012-12-20T09:10:16.117
> 
> 标签：c#, wcf

我有一个与 WCF 服务通信以访问数据的项目。有时服务器是本地的，然后它使用 sql 存储过程直接查询数据库。

为了解释，假设我有以下方法：

```
Asset GetAsset(int AssetID); 
```

此方法要么由 WCF 服务公开，要么在直接查询数据库时在本地使用。我遇到的问题是 WCF 服务的公开方法的 Asset 对象与本地方法不同。即暴露的服务方法是：

```
WcfService.Asset GetAsset(int AssetID); 
```

直接DB查询方法是：

```
LocalNamespace.Asset GetAsset(int AssetID); 
```

虽然可以，但我不想让 Direct DB 查询方法使用 WcfService Asset 对象，因为我希望能够在需要时删除 WcfService。理想情况下，我想将公共对象/接口捆绑在一个单独的程序集中，我可以在本地和服务上使用它。

我还有选择吗？也许我对 Referenced Assemblies 选项知之甚少，尽管它已打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:15:26.630

你绝对可以做到，这是 WCF 的一大优势。创建一个单独的程序集，其中包含您的`[DataContract]`类、`[ServiceContract]`接口，仅此而已。然后，您可以在 WCF 服务、WCF 客户端或完全在 WCF 之外随意使用它。在添加服务引用时使用 Referenced Assemblies 选项，以确保使用您的合同程序集。

你可以比那更好。将您的服务合同实现类移动到另一个单独的程序集中。然后，您可以直接在进程中调用它们，而无需通过服务调用。这会将您的 WCF 服务项目简化为`.svc`文件集合和`web.config`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:33:57.720

创建一个`Data Access Layer`（DAL）对象，可能在一个单独的项目中。

使用它来处理所有调用，而不是`x`通过反射或任何其他方式访问程序集，正如您所提到的，在 WCF 和本地项目中添加对对象的引用。您可以使用此访问层中的任何内容，例如`Entity Framework`或`NHibernate`。使用该`DAL`对象调用进入数据库的方法。

```
Public Class ServiceDAL
{
  public Asset GetAsset(int id)
  {
    //Get your asset
    return asset;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:17:51.367

在（添加服务引用）对话框中，按（高级...）按钮，然后选中（在引用的程序集中使用类型），这将解决问题，但您应该将共享类放在单独的程序集中，并在两者中引用它客户和服务。

# c# - 如何将 Windows 消息从 C# 发送到 C++ (MFC)？

> ID：13968615
> 
> 赞同：1
> 
> 时间：2012-12-20T09:10:22.017
> 
> 标签：c#, string, mfc, sendmessage

我正在尝试将 Windowsmessage 从 C#（紧凑框架）中的应用程序发送到 C++（MFC）中的另一个应用程序，它们都在 PDA 中。

在接收器应用程序 (MFC) 中，我意识到我收到了消息，但我无法读取字符串消息，它显示了一个小方块。

这是发件人的代码（C#）

```
OpenNETCF.Win32.Win32Window.SendMessage(hwndVal, typeMsgVal, intValue, stringMessage); 
```

这是接收器的代码（C++）

```
CString myStr = (CString) lParam;
AfxMessageBox(myStr); 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:34:07.557

您的每个应用程序在计算机上都有自己的内存空间。通过发送变量“stringMessage”，您实际上是在发送该字符串的内存地址，而其他应用程序无法使用该地址。

我不知道它是否适用于 pda 开发，但[这篇文章](https://stackoverflow.com/questions/7894224/sharing-memory-between-two-applications#)可能会有用。

如果您的资源有限，您总是可以一一发送字符串的字符。由于 c# 是 Unicode，所以在 c++ sice 上进行，你使用 wchar_t 来处理 lParam！

编辑：正如 Rup 提到的，如果您需要发送大字符串或需要非常频繁地发送消息，则应该使用 WM_COPYDATA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:17:52.410

C# 字符串被编码为 Unicode，而默认`CString`行为是`LPCTSTR`. 确保您的 MFC 应用程序使用 MultiByte 字符集进行编译（使用`_UNICODE`指令或代表编译器语句）。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/de-de/library/ey142t48%28v=vs.80%29.aspx#_core_mfc_support_for_unicode_strings)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:40:42.530

更好的解决方案是创建一个 C++/CLI dll 并将消息发送到这个 dll，这个 dll 将与 MFC dll 通信。优点是，在 C++/CLI dll 中，您可以将 System.String 转换为 CString 并将此 CString 传递给 MFC dll。

# javascript - HTML5 画布在图像中打洞

> ID：13968626
> 
> 赞同：1
> 
> 时间：2012-12-20T09:10:58.773
> 
> 标签：javascript, html

我需要在 HTML5 画布中做几个动画对象。当它们与其他图像交叉时，我需要在一些图像中打孔。我需要固定干部之间的延迟。所以我这样做了：[youtube-example](http://www.youtube.com/watch?v=OqZS__fC9kM) 但它的工作速度相当慢我的方式：正如你在视频中看到的那样 - 在任何情况下，单位都应该是可见的，为此我在其他对象上打孔。我从服务器获取图像并检查单元是否与每个 cadr 中的其他对象交叉。如果单位越过它们，我会在其他物体上打洞

代码：Holc-需要孔的地方。ObjUnit- 制造孔的单位。

```
{
    Holc.wait = true;
    var difY = ObjUnit.PosY - Holc.PosY;
    var difX = ObjUnit.PosX - Holc.PosX;
    var tempc = 0;
    tmpcontext.beginPath();
    tmpcontext.globalCompositeOperation = "destination-out";
    var gradient = tmpcontext.createRadialGradient(maxUnitX + difX + ObjUnit.height / 2, maxUnitY + difY + ObjUnit.height / 2, 0,
    maxUnitX + difX + ObjUnit.height / 2, maxUnitY + difY + ObjUnit.height / 2, ObjUnit.height / 2 + 10);
    gradient.addColorStop(0.3, 'rgba(255,255,255,1)');
    gradient.addColorStop(1, 'rgba(255,255,255,0)');
    tmpcontext.fillStyle = gradient;
    tmpcontext.fillRect(maxUnitX + difX, maxUnitY + difY, ObjUnit.width, ObjUnit.height);

} 
```

我为每个跨对象的单元执行此代码。在此之后我这样做：

```
if (Holc.wait == true) {
    MainTimerInterval.AllLoaded = false;
    var imageData = tmpcontext.getImageData(maxUnitX, maxUnitY, Holc.width, Holc.height);
    var tmpCanvas = document.createElement("canvas");
    var tmpcontext = tmpCanvas.getContext("2d");
    tmpCanvas.width = Holc.width;
    tmpCanvas.height = Holc.height;
    tmpcontext.putImageData(imageData, 0, 0);
    varmass.needtoload++;
    PictureData.push({
        TextureId: finmass[i][j2].TextureId,
        Version: "No",
        SizeofKadr: PictureData[j3].SizeofKadr,
        isNeedHole: PictureData[j3].isNeedHole,
        Image: new Image()
    });
    PictureData[PictureData.length - 1].Image.onload = function () {
        varmass.loaded++;
    }
    PictureData[PictureData.length - 1].Image.src = tmpCanvas.toDataURL();
} 
```

如您所见，我从临时画布上的源图像中剪切径向渐变，并从临时画布数据创建图像，然后将其推送到图像数组。

当`varmass.needtoload==varmass.loaded`我开始绘制动画时。
而且它的工作速度非常慢。
**我认为缓慢的操作是这样的：**

```
PictureData[PictureData.length - 1].Image.src = tmpCanvas.toDataURL(); 
```

你知道如何更有效地做到这一点吗？

# mysql - CentOS：MySQL ERRNO 28

> ID：13968628
> 
> 赞同：2
> 
> 时间：2012-12-20T09:11:01.860
> 
> 标签：mysql, centos, errno

几天来，我的服务器出现问题。创建表后，出现错误：ERRNO 28。

我认为它表示没有更多可用内存。

现在我通过终端输入了这个：df-h

Filesystem Size Used Avail Use% Mounted on
/dev/sdb2 1.4T 1.3T 0 100% /
/ dev/sdb1 494m 13M 456M 3% / boot
tmpfs 7.8 GG 0 7.8 0% /dev/shm

如您所见，没有更多的可用空间。现在我已经清除了我的日志文件、tmp 文件并删除了不必要的文件（总计 500GB）。然后我的服务器上有大约 500 GB 可用空间，但只有 10-20 秒。之后又有 0% 的可用空间。

我已经执行了以下命令：-sh /*

结果如下：
12K /aquota.group
12K /aquota.user
5,9M /bin
11M /boot
8,0K /buser
136K /dev
6,0M /etc
41M /extra
80K /home
212M /lib
19M /lib
64
16K /lost+found
4,0K /media
4,0K /mnt
4,0K /mv
4,0K /opt
0 /proc
60K /root
28M /sbin
4,0K /selinux
4,0K /srv
0 /sys
4,0K / tmp
559M /usr
9,3G /var
5,8G /www

现在，如果将所有这些加在一起，您会发现它不能满。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:16:31.087

你检查过这个[http://www.cyberciti.biz/faq/mysql-error-28-and-solution/](http://www.cyberciti.biz/faq/mysql-error-28-and-solution/)

您需要检查 MySQL 运行的所有文件系统

希望能解决

# java - Java CFX Web 服务和 Delphi 2010

> ID：13968646
> 
> 赞同：4
> 
> 时间：2012-12-20T09:12:18.207
> 
> 标签：java, web-services, delphi, soap

我在调用我的 Java Webservice 时遇到了一些问题。只要我使用原始数据类型，例如字符串、整数等，一切正常。

但是当我尝试使用对象作为参数时，我的 java 方法只接收到 null。所以映射似乎不起作用。我举了一个简单的例子：

Web服务的Java接口

```
@WebService(name="TestService", targetNamespace=CNAPBackOffice.NAMESPACE_SERVICES)
@SOAPBinding(style=SOAPBinding.Style.RPC, use=SOAPBinding.Use.LITERAL)
public interface TestService {
    @WebMethod(operationName="sendComplexType")
    @WebResult(name="okString")
    public String sendComplexType(TestData data);
} 
```

Java 实现

```
@WebService(endpointInterface = "lu.ciss.backoffice.cnap.services.TestService",
        portName = "TestEndpoint", serviceName = "TestService",
        targetNamespace = CNAPBackOffice.NAMESPACE_SERVICES)
public class TestServiceImpl implements TestService {

    @Override
    public String sendComplexType(TestData data) {
        return data.getTestString();
    }

} 
```

测试数据类

```
public class TestData {
    String testString;
    ... + Setter/Getter for testString
} 
```

我使用生成的 WSDL 使用“Component->Import WSDL...”菜单将其导入 Delphi。之后我像这样调用Webservice：

```
procedure TFRM_Test.TestClick(Sender: TObject);
var
Service: TestService;
data: TestData;
result: String;
begin
  Service := GetTestService(true);
  data := TestData.Create;

  data.testString := 'Bla';

  result := Service.sendComplexType(data);

  ShowMessage(result);
end; 
```

就像我之前说的，Java 端收到 null ，在这种情况下会导致异常。所以很明显，两个世界之间的映射不能正常工作。我尝试更改 WSDL 导入菜单中的不同选项，但似乎没有任何效果。我看了一下 Delphi 发出的 SOAP 请求：

```
<?xml version="1.0"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:NS2="http://cnap.backoffice.ciss.lu/services">
        <NS1:sendComplexType xmlns:NS1="http://cnap.backoffice.ciss.lu/services">
            <arg0 href="#1"/>
        </NS1:sendComplexType>

        <NS2:testData id="1" xsi:type="NS2:testData">
            <testString xsi:type="xsd:string">Bla</testString>
        </NS2:testData>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我以前从未见过这种奇怪的引用概念。这会引起麻烦吗？或者其他人有其他想法甚至更好：一个解决方案:)

提前致谢。

PS 这里是生成的 WSDL：

```
<?xml version="1.0" ?><wsdl:definitions name="TestService" targetNamespace="http://cnap.backoffice.ciss.lu/services" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://cnap.backoffice.ciss.lu/services" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
<xs:schema targetNamespace="http://cnap.backoffice.ciss.lu/services" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:complexType name="testData">
    <xs:sequence>
      <xs:element minOccurs="0" name="testString" type="xs:string"></xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>
  </wsdl:types>
  <wsdl:message name="sendComplexType">
    <wsdl:part name="arg0" type="tns:testData">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="sendComplexTypeResponse">
    <wsdl:part name="okString" type="xsd:string">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="TestService">
    <wsdl:operation name="sendComplexType">
      <wsdl:input message="tns:sendComplexType" name="sendComplexType">
    </wsdl:input>
      <wsdl:output message="tns:sendComplexTypeResponse" name="sendComplexTypeResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="TestServiceSoapBinding" type="tns:TestService">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"></soap:binding>
    <wsdl:operation name="sendComplexType">
      <soap:operation soapAction="" style="rpc"></soap:operation>
      <wsdl:input name="sendComplexType">
        <soap:body namespace="http://cnap.backoffice.ciss.lu/services" use="literal"></soap:body>
      </wsdl:input>
      <wsdl:output name="sendComplexTypeResponse">
        <soap:body namespace="http://cnap.backoffice.ciss.lu/services" use="literal"></soap:body>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="TestService">
    <wsdl:port binding="tns:TestServiceSoapBinding" name="TestEndpoint">
      <soap:address location="http://localhost:7777/CNAP_BackOffice/services/TestService"></soap:address>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:21:40.953

这是德尔福的错。

您的 JSR-181/JSR-224 注释接口具有显式`@SOAPBinding(style=SOAPBinding.Style.RPC, use=SOAPBinding.Use.LITERAL)`，并且您生成的 WSDL 清楚地表明它是 RPC/Literal WebService

```
 <wsdl:binding name="TestServiceSoapBinding" type="tns:TestService">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"></soap:binding>
    <wsdl:operation name="sendComplexType">
      <soap:operation soapAction="" style="rpc"></soap:operation>
      <wsdl:input name="sendComplexType">
        <soap:body namespace="http://cnap.backoffice.ciss.lu/services" use="literal"></soap:body>
      </wsdl:input> 
```

然而，Delphi 创建了带有 MultiRef 值的 Soap-Encoded SOAP 1.1 Envelope 并使用`SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"`.

所以你必须在 Delphi 中调整一些选项......

也许 Delphi 不能导入 RPC/Literal？尝试切换到 Document/Literal/Wrapped：

```
@SOAPBinding(style=SOAPBinding.Style.DOCUMENT, use=SOAPBinding.Use.LITERAL, parameterStyle = ParameterStyle.WRAPPED) 
```

# php - 如何使用 TinyButStrong 检查布尔变量是 1/true 还是 0/false？

> ID：13968650
> 
> 赞同：5
> 
> 时间：2012-12-20T09:12:30.907
> 
> 标签：php, tinybutstrong

我对 TinyButStrong 有点陌生，我想知道如何检查布尔变量是 0 还是 1 ？例如，我有这个：

```
$TBS->MergeBlock('tests', $tests); 
```

并且 $tests 有一个变量调用“激活”，它是一个布尔值。所以，在我的 .docx 文档中，如果变量设置为 true(1)，我想写字符串“Activated”，如果设置为 false(0)，我想写字符串“未激活”。

我应该在 .docx 文档中使用哪种语法？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:38:36.153

它们是在合并期间格式化值的几种方法，但默认情况下，TBS 使用 PHP 隐式转换将数据项转换为字符串。

因此，`true`转换为 '1' 并`false`转换为 '' *（空字符串）*。

对于不存在的值：如果要合并的数组中的key不存在，则可以通过参数避免TBS错误信息`noerr`，替换的值为'' *（空字符串）*。

所以你的解决方案是：

```
[test.ativated;noerr;if [val]=1;then 'Activated';else 'non-activated'] 
```

# eclipse - Eclipse Juno 中的工作集“其他项目”不见了？

> ID：13968658
> 
> 赞同：11
> 
> 时间：2012-12-20T09:12:59.393
> 
> 标签：eclipse, eclipse-juno, working-set

在 Eclipse Indigo 的项目浏览器中选择工作集作为顶级元素时，总是有一个虚拟工作集`Other Projects`。但是现在在 Juno 中，似乎没有显示任何工作集之外的项目......有没有办法重新启用这种行为？

**更新：**

这是`Select Working Sets...`对话框的屏幕截图： ![在此处输入图像描述](../Images/4d15ca8e50963fd483f841f5aa45bd9a.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T16:34:17.200

我找到了这个，我也看过这个。

只需将 Perspective 'Java EE' 更改为 'Java'

**窗口 -> 打开透视图 -> Java**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-08T09:41:07.700

这与视角无关，而是与视图相关。

项目浏览器视图没有**“其他项目”**工作集。

相反，如果您想访问此功能，您应该使用**“包资源管理器”**视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:24:11.203

这个你可以自己决定...

在导航视图的视图菜单中，选择“配置工作集...”。

在显示的对话框中（见下文），您可以选择是否添加“其他项目”工作集...

![配置工作集对话框](../Images/1d884e013223db3097b61b8b13e2b2fd.png)

# multilingual - FuelPHP：动态更改语言

> ID：13968668
> 
> 赞同：0
> 
> 时间：2012-12-20T09:13:41.700
> 
> 标签：multilingual, fuelphp

我正在尝试编写一个`FuelPHP`支持多种语言的（v1.4）模块。我有以下目录结构：

```
fuelphp/
  app/
    modules/
      mymodule/
        lang/
          en/
            signup.php
          te/
            signup.php
        ...
      ...
  ... 
```

在全局`config.php`文件中，我将 language 和 language_fallback 参数设置为`en`：

```
'language' => 'en', // Default language
'language_fallback'  => 'en', // Fallback language when the file isn't available 
```

当我尝试更改模块控制器中的语言时，通过

```
\Config::set('language', 'te'); 
```

`echo \Lang::get('key');`总是返回一个空字符串

`te`如果我直接在`config.php`文件本身中将语言参数更改为 , 它会按预期工作。

我的模块的控制器看起来像：

```
<?php
namespace mymodule;
class Controller_Mymodule extends \Controller {
    /**
     * Show signup form
     */
    public function get_signup() {
            \Config::set('language', 'te');
            \Lang::load('signup');

            $view = \View::forge('mymodule/signup');

            return $view;
    }
}
?> 
```

这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T14:56:05.600

尝试做 Lang::load('signup'); 而不是 \Lang::load('signup');

根据我的经验， \Lang::load('signup'); 指的是应用程序中的全局语言，而 Lang::load('signup'); 应该参考您模块中的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:50:22.643

尝试调用 echo \Lang::get('signup.key'); 我遇到了同样的问题，这为我解决了。

# vba - 通过 VBA 导入文本文件

> ID：13968670
> 
> 赞同：3
> 
> 时间：2012-12-20T09:13:42.753
> 
> 标签：vba, excel

这是每次我运行它而不是更新我导入的旧数据时的问题，它将旧数据推送到右侧。

任何人都可以帮助我，我想将文本文件导入到特定区域还包含导入后分隔的文本，如下所示

就像将文件从 A3 列导入到 z3 之类的东西，我找不到合适的词来解释它

```
Sub import()
    rPaht = Sheet5.Range("a1")
    rFileName = Sheet5.Range("b1")
    Sheet5.Range("a4").CurrentRegion.Offset(500, 0).Resize(, 40).Clear
    With Sheet5.QueryTables.Add(Connection:= _
        "TEXT;" & rPaht & "\" & rFileName & ".txt", Destination:=Sheet5.Range("$A$4"))
        .Name = Sheet5.Range("b1").Value
        .TextFilePlatform = 874
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileOtherDelimiter = "?"
        .Refresh BackgroundQuery:=True
    End With
    Sheet5.Range("a1") = rPaht
    Sheet5.Range("b2") = rFileName
End Sub 
```

如果您能建议任何新的代码，我将不胜感激

解释包括是我学习编码的最佳礼物

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:26:43.727

`recording macro`我尝试通过将 txt 文件读入 excel 中的queryTable

我认为您缺少一条关键线

`.RefreshStyle = xlOverwriteCells`

我试过这条线，行为是替换`WITH`并将`WITHOUT`数据向右移动

`RefreshStyle`的默认值为`xlInsertDeleteCells`--`Partial rows are inserted or deleted to match the exact number of rows required for the new recordset.`

[参考](http://msdn.microsoft.com/en-us/library/office/bb209094%28v=office.12%29.aspx)

# php - 我想更改访客的随机用户名 至

> ID：13968671
> 
> 赞同：1
> 
> 时间：2012-12-20T09:13:43.587
> 
> 标签：php, random

我会试着解释一下。

这段代码在这里：

```
if (empty($userid)) {
    $random = rand(10000,99999);
    $sql = ("insert into cometchat_guests (name,lastactivity) values ('Guest ".$random."','".getTimeStamp()."')");
    $query = mysql_query($sql);
    $userid = mysql_insert_id();
    setcookie($cookiePrefix.'guest', base64_encode($userid), time()+3600*24*365, "/");
}

return $userid; 
```

这将返回访客 13245 或访客 85247 等随机用户名。

我想要的是它返回来宾贝蒂，或来宾幽灵，或来宾山羊，或来宾茶壶等。

我将如何编辑代码来实现这一点？

非常感谢您的帮助，我真的很感激。

我试过这个：

```
if (empty($userid)) {
    $random = rand(10000,99999);
    $filename="words.txt";
    $words=file($filename);
    shuffle($words);
    $word=$words[o];
    $sql = ("insert into cometchat_guests (name,lastactivity) values ('Guest ".$word."','".getTimeStamp()."')");
    $query = mysql_query($sql);
    $userid = mysql_insert_id();
    setcookie($cookiePrefix.'guest', base64_encode($userid), time()+3600*24*365, "/");
}

return $userid; 
```

但它没有工作大声笑

回答。对于其他想要此功能的人：

```
if (empty($userid)) {
    $names= array('Goat', 'Teapot', 'Fuzzyface');
            $random = rand(0,count($names)-1);
            $name= $names[$random];
    $sql = ("insert into cometchat_guests (name,lastactivity) values ('Guest ".mysql_real_escape_string($name)."','".getTimeStamp()."')");
    $query = mysql_query($sql);
    $userid = mysql_insert_id();
    setcookie($cookiePrefix.'guest', base64_encode($userid), time()+3600*24*365, "/");
}

return $userid; 
```

这成功了 :) 感谢加法器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:19:07.797

你需要一本字典来做到这一点。您可以提供一个包含单词的数组

```
if (empty($userid)) {
    $dictionary = array(0 => 'Betty', 1 => 'Ghost');
    $max = count($dictionary) - 1;
    $random = rand(0, $max);
    $sql = ("insert into cometchat_guests (name,lastactivity) values ('Guest".$random."','".getTimeStamp()."')");
    $query = mysql_query($sql);
    $userid = mysql_insert_id();
    setcookie($cookiePrefix.'guest', base64_encode($userid), time()+3600*24*365, "/");
}

return $userid; 
```

根据需要扩展数组。也许还有一本带有随机单词的附加字典，您可以在某处下载。当然，如果已经将姓名提供给某人以避免重复，您将不得不检查您的号码。

我建议您创建双字来最大化字数。您可以从此处获取列表：[http](http://www.momswhothink.com/reading/list-of-nouns.html) ://www.momswhothink.com/reading/list-of-nouns.html 并命名始终包含 2 个世界的名称，例如 betty_ghost。您还可以让用户选择前缀，例如“叔叔”、兄弟、先生等 - 或在单词上附加一个随机数。有了这些词，您无论如何都需要注意，有些人可能不喜欢他们得到的词 - 并且不使用您的服务。所以，如果他们不喜欢，就让他们买一个新的。

在上面的代码中，您添加了必须替换的 words 文件

```
$word=$words[o]; 
```

和

```
$random = rand(0,count($words) - 1);
$word = $words[$random]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:20:58.157

你可以有一个 mysql 表，其中包含随机单词。然后您可以随机选择一行并将其用作用户名。例如

```
if (empty($userid)) {
    $randomSql = "SELECT RANDOM_WORD FROM `random_word_table` ORDER BY RAND() LIMIT 0,1;"
    $randomQuery = mysql_query($randomSql);
    $randomResult = mysql_fetch_row($randomQuery);        

    $sql = ("insert into cometchat_guests (name,lastactivity) values ('Guest ".$randomResult['RANDOM_WORD']."','".getTimeStamp()."')");
    $query = mysql_query($sql);
    $userid = mysql_insert_id();
    setcookie($cookiePrefix.'guest', base64_encode($userid), time()+3600*24*365, "/");
}

return $userid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:21:28.960

像这样：

```
$names= array('Ann', 'Betty', 'Charles');
$random = rand(0,count($names)-1);
$name= $names[$random];
$sql = ("insert into cometchat_guests (name,lastactivity) values ('Guest ".mysql_real_escape_string($name)."','".getTimeStamp()."')"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:22:48.990

这是一个独立的函数，它将向您返回一个随机的用户名。当然，您需要向池中添加更多名称以减少名称冲突的机会。

```
<?php
function make_random_username() {
    $user_name_pool = array(
        'Ghost',
        'Goat',
        'Teapot'
    );
    $number = rand(0, count($user_name_pool) - 1);
    return 'Guest '.$user_name_pool[$number];
}
?> 
```

如果您不想编造很多用户名，可以[使用最常用的英语名词列表](http://www.desiquintans.com/articles.php?page=nounlist)。

# php - SimpleXMLElement 作为动态网页而不是本地文件 XML

> ID：13968673
> 
> 赞同：1
> 
> 时间：2012-12-20T09:13:49.703
> 
> 标签：php, xml, facebook, simplexml

我正在为 wordpress 创建一个 facebook 提要插件，并在它使用本地文件时让它工作，但是我需要加载到`$fb = new SimpleXMLElement($xmlstr);`.

`$xmlstr`是一个带有 XML 的变量，该文件中的内容来自这里[https://www.facebook.com/feeds/page.php?format=rss20&id=133869316660964](https://www.facebook.com/feeds/page.php?format=rss20&id=133869316660964)。

SimpleXMLElement 是否可以存储来自网页的数据？

我尝试使用 file_get_contents 但它没有用。当我使用该功能时，facebook 给出了这个错误：http: [//imgur.com/3qOxl](http://imgur.com/3qOxl)使用此代码时：`echo "contents: " . file_get_contents('https://www.facebook.com/feeds/page.php?format=rss20&id=133869316660964');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:52:39.067

我使用 PHP 的 cURL 库解决了这个问题。

```
 // Init a cURL resource
   $ch = curl_init("https://www.facebook.com/feeds/page.php?format=rss20&id=133869316660964");
   curl_setopt( $ch, CURLOPT_POST, false );
   curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
   // Make facebook think it is being accessed by a browser to avoid 
   //compatability issues
   curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; 
   Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7");
   curl_setopt( $ch, CURLOPT_HEADER, false );
   curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
   $data = curl_exec( $ch ); 
```

从那里我将简单的 xml 设置为 $data。

```
$fb = new SimpleXMLElement($data); 
```

希望这对未来的人们有所帮助！

重要的是：

```
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; 
       Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7"); 
```

因为否则 facebook 会认为您使用的是过时的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:24:13.047

file_get_contents 将与呈现的数据一起返回给您，例如，当我们使用它时，这将返回与您在 Web 浏览器选项中`file_get_contents('google.com/index.html')`获得的相同的 HTML 内容。`View Source`

# windows-phone-8 - Windows Phone 8 网络信息

> ID：13968680
> 
> 赞同：8
> 
> 时间：2012-12-20T09:14:17.103
> 
> 标签：windows-phone-8

我正在尝试获取有关网络的一些信息，例如网络类型、网络状态、小区 ID、MCC、MNC、LAC、BID、NID、SID、信号强度、运营商名称。

我现在唯一能得到的是移动运营商名称，使用：

```
 using Microsoft.Phone.Net.NetworkInformation;
  System.Text.StringBuilder sb = new System.Text.StringBuilder();            

  sb.Append("Mobile operator:  ");
  sb.AppendLine(DeviceNetworkInformation.CellularMobileOperator); 
```

就像我可以得到的那样，如果 WiFi 可用，漫游可用，只是真或假。是否有任何解决方案可以获取其他一些信息，例如网络类型，如果它是 GSM - 例如 CDMA？

还要寻找 wifi 网络列表、可用点并获取列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T09:31:43.547

您只能获取当前连接的网络接口的信息，而不是任何其他热点或蜂窝塔或它们的信号强度。您也不能强制手机更改连接。

您*可以*判断您使用的是 GSM、CDMA 还是 WiFi，以及您的连接速度，以及您是否在漫游。

请参阅[MSDN 上的此页面](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202867%28v=vs.105%29.aspx)，特别是此[链接页面](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487166%28v=vs.105%29.aspx)，了解可用 API 的演练。

`Microsoft.Phone.Net.NetworkInformation.NetworkType`您可以从（参见[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.net.networkinformation.networkinterfaceinfo%28v=vs.105%29.aspx)）获取网络类型（GSM/CDMA/WiFi ）。

获取`NetworkInformation`对象的代码片段是：

```
private void UpdateNetworkInterfaces()
{
    NetworkInterfaces.Clear();
    NetworkInterfaceList networkInterfaceList = new NetworkInterfaceList();
    foreach (NetworkInterfaceInfo networkInterfaceInfo in networkInterfaceList)
    {
        NetworkInterfaces.Add(networkInterfaceInfo.InterfaceName);
    }
} 
```

# c++ - 我应该如何备份我的实时数据？有更好的解决方案吗？

> ID：13968682
> 
> 赞同：2
> 
> 时间：2012-12-20T09:14:37.237
> 
> 标签：c++, backup

## 问题

我应该如何备份程序中的实时数据？我目前正在使用 C++ Boost 中的“Interprocess”库提供的内存映射文件。我想知道有没有更好的替代解决方案？

## 更多细节

我的程序定期从硬件设备接收实时数据并将数据存储到固定大小的缓冲区中。通常周期很短，比如 3 秒。因为缓冲区很重要，**所以我想备份它，以防我的程序崩溃，它可以恢复到崩溃前的原始状态。**

**我这样做：**估计缓冲区的最大大小并创建一个相同大小的内存映射文件。绑定内存缓冲区和映射文件，所以当内存发生变化时，变化会立即写入本地文件。

当程序从崩溃中恢复时，它只是读取映射文件并反序列化数据。

**根据一些先决条件，**此解决方案可以正常工作：1）。数据量是预先知道的：3 个数据项或 5 个数据项。2）。每个数据项的大小都是预先固定的（在 C/C++ 语言中，这意味着一个固定大小的结构/类）。

但是，我预见**到我的项目中会发生一些可能会打破这些先决条件的事情：** 1）。**数据项数量可能会在系统运行时发生变化。** 客户可能会开始使用更多的硬件设备，因此会收到更多的数据。这意味着我需要重新创建映射文件，复制旧数据，然后开始存储新数据。这可能会带来性能问题。2）。**一些特殊数据的大小无法预先确定**，例如用户输入的一些描述信息。

那么：**如何备份程序中的数据？** 我想知道是否**有比内存映射文件更好的解决方案？**

# c# - 在严格的文本中获取文本的特定部分

> ID：13968684
> 
> 赞同：5
> 
> 时间：2012-12-20T09:14:47.257
> 
> 标签：c#, .net, string, c#-4.0

假设有如下文本：

`string str = @"stackoverflow(`**堆叠**`:stackoverflow)overstackflow(`**_**`:stackoverflow)";`

我想获得大胆的领域。我想我必须在文本中找到“（”和“：”并获取它们之间的文本。不是吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T09:23:15.763

也许用简单的`string`方法：

```
IList<String> foundStrings = new List<String>();
int currentIndex = 0;
int index = str.IndexOf("(", currentIndex);
while(index != -1)
{
    int start = index + "(".Length;
    int colonIndex = str.IndexOf(":", start);
    if (colonIndex != -1)
    {
        string nextFound = str.Substring(start, colonIndex - start);
        foundStrings.Add(nextFound);
    }
    currentIndex = start;
    index = str.IndexOf("(", currentIndex);
} 
```

[**演示**](http://ideone.com/zQWIgH)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:19:47.937

看看这个帖子，你就能找到答案。

> [如何提取括号（圆括号）之间的文本？](https://stackoverflow.com/questions/378415/how-do-i-extract-a-string-of-text-that-lies-between-two-brackets-using-net)

您只需要对该正则表达式进行小的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:20:05.763

```
string strRegex = @"\((.+?)\:";
RegexOptions myRegexOptions = RegexOptions.None;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"stackoverflow(stack:stackoverflow)overstackflow(over:stackoverflow)";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T09:21:25.413

我会选择类似的东西：

```
Regex matcher = new Regex(@"([^():}]+)\(([^():}]*):([^():}]*)\)");
MatchCollection matches = matcher.Matches(str); 
```

这将查看您输入的所有内容，如`group1(group2:group3)`. （如果任何组包含一个`(`，`)`或者`:`整个事情将被忽略，因为它无法弄清楚什么是在哪里。）

然后，您可以获得匹配的值，例如

```
foreach(Match m in matches)
{
    Console.WriteLine("First: {0}, Second: {1}, Third{2}",
        m.Groups[1].Value, m.Groups[2].Value, m.Groups[3].Value);
} 
```

因此，如果您只想要 the`(`和 the之间的位，则`:`可以使用

```
foreach(Match m in matches)
{
    Console.WriteLine(m.Groups[2].Value);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T09:25:03.060

```
public static void Main(string[] args)
        {
            string str = @"stackoverflow(stack:stackoverflow)overstackflow(over:stackoverflow)";
            Console.WriteLine(ExtractString(str));
        }

        static string ExtractString(string s)
        {
            var start = "(";
            int startIndex = s.IndexOf(start) + start.Length;
            int endIndex = s.IndexOf(":", startIndex);
            return s.Substring(startIndex, endIndex - startIndex);
        } 
```

结果是`stack`，但您可以在`foreach`循环中使用它来迭代您的字符串。

[**演示**](http://ideone.com/kMyhjs)

# teechart - Silverlight 嵌入式 Techart

> ID：13968691
> 
> 赞同：0
> 
> 时间：2012-12-20T09:15:08.127
> 
> 标签：teechart

如何将 Teecharts 集成到 Silverlight 嵌入式中？普通的 Silverlight 不可用，袖珍版仅适用于 Windows 窗体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:20:41.357

Steema 尚未使用 Windows Embedded Compact 7 测试 TeeChart for NET。尽管该环境的应用程序可以使用 NET 框架构建，但 Steema 并未准备任何特定的 Compact 7 就绪程序集。

谢谢，

# mysql - MySQL 循环遍历日期并生成记录集列

> ID：13968693
> 
> 赞同：0
> 
> 时间：2012-12-20T09:15:19.903
> 
> 标签：mysql, date, loops

鉴于这两个表：

```
tblHotels:
id INT
hotel_name VARCHAR
booking_open_date DATETIME
booking_close_date DATETIME

tblRegistrantHotelDates:
id INT
registrant_id INT
hotel_id INT
booking_date DATETIME 
```

...其中*tblRegistrantHotelDates*中的每个条目都代表在酒店住一晚的注册人（因此入住两晚的注册人将在表中有两行具有相同的酒店 ID 和不同的预订日期）...

如何以这种格式获得一组结果：

```
registrant_id,hotel_id,3rd March,4th March,5th March
42,6,1,0,1
57,6,1,1,0 
```

...其中列名是通过从 *tblHotels.booking_open_date* 循环到 *tblHotels.booking_close_date* 生成的（我不关心列名的确切日期格式），以及每个日期中的 1/0列表示注册人是否将在该日期入住该酒店？

注意：并非所有酒店都有相同的预订开放/关闭日期，尽管它们总是会重叠。因此，生成的列名称必须从最早酒店的开业日期到最新酒店的关闭日期。

这在 SQL 中甚至可能吗？

编辑 - 这就是我所拥有的。它没有将日期作为列名，它只适用于我明确查询的尽可能多的日期，这是一个令人震惊的笨拙和缓慢的混乱。对于寻找类似解决方案的其他人：这就是不这样做的方法。希望知道该怎么做的人很快就会出现：

```
SELECT
reg.first_name,
reg.last_name,

MIN(h.booking_open_date) AS day_1,
(
    SELECT 1 FROM tblRegistrantHotelDates rh
    WHERE rh.hotel_id = h.id
    AND rh.registrant_id = reg.id
    AND rh.hotel_date = MIN(h.booking_open_date)
) AS day_1_booked,

CASE WHEN DATE_ADD(MIN(h.booking_open_date),INTERVAL 1 DAY) < MAX(h.booking_close_date) THEN
    DATE_ADD(MIN(h.booking_open_date),INTERVAL 1 DAY)
END AS day_2,
(
    SELECT 1 FROM tblRegistrantHotelDates rh
    WHERE rh.hotel_id = h.id
    AND rh.registrant_id = reg.id
    AND rh.hotel_date = DATE_ADD(MIN(h.booking_open_date),INTERVAL 1 DAY)
) AS day_2_booked,

CASE WHEN DATE_ADD(MIN(h.booking_open_date),INTERVAL 2 DAY) < MAX(h.booking_close_date) THEN
    DATE_ADD(MIN(h.booking_open_date),INTERVAL 2 DAY)
END AS day_3,
(
    SELECT 1 FROM tblRegistrantHotelDates rh
    WHERE rh.hotel_id = h.id
    AND rh.registrant_id = reg.id
    AND rh.hotel_date = DATE_ADD(MIN(h.booking_open_date),INTERVAL 2 DAY)
) AS day_3_booked,

## etc etc...

MAX(h.booking_close_date) AS day4,
(
    SELECT 1 FROM tblRegistrantHotelDates rh
    WHERE rh.hotel_id = h.id
    AND rh.registrant_id = reg.id
    AND rh.hotel_date = MAX(h.booking_close_date)
) AS day_4_booked

FROM tblRegistrants reg
LEFT JOIN tblRegistrantHotelDates hd ON hd.registrant_id = reg.id
LEFT JOIN tblHotels h ON hd.hotel_id = h.id
GROUP BY reg.id 
```

# mongodb - 如何检索 MongoDB 中每个文档的最后更新时间？

> ID：13968700
> 
> 赞同：25
> 
> 时间：2012-12-20T09:15:53.393
> 
> 标签：mongodb, morphia

我想知道是否有办法在 MongoDB 的集合中获取数据（即文档）的最后更新/修改时间。更清楚地说，我想进行查询以检索在特定时间后更新的所有文档。

是否有任何可能的方法可以在 MongoDB 中检索最后修改的时间戳？

注意：对于新创建的文档，我知道我们可以从 objectId 检索时间戳，但对于更新，id 将是相同的。MongoDB 是否将每个文档的最后更新时间存储在任何地方？

我使用 morphia 作为 java 驱动程序，所以如果 morphia 有任何可能的方法，请告诉我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T09:37:53.813

您需要自己捕获上次更新时间。

对于我的应用程序，我保留了一个 AuditTrail 对象，该对象捕获 AuditEvents。这些事件发生在对象的任何插入、更新或删除（删除在我的系统中是虚拟的，只是设置一个标志）。

对于每个 AuditEvent，我都会跟踪日期、经过身份验证的用户、数据库操作以及应用程序填写的描述。这是在 PersistentObject 中实现的，因此对于保存在 Mongo 中的任何对象的任何数据库操作都会自动调用它。

这个实际花费了很少的时间来实现，但提供了获取最后更新时间的能力，以及您可能需要的任何其他信息，以确保 Mongo 中所有内容的安全性和客户支持。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T09:18:36.277

不，MongoDB 本身不存储创建或更新时间戳。您必须自己执行此操作（并且您已经发现，如果您使用 ObjectID _id 那么您已经获得了创建日期）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T15:00:12.010

您可以使用@user1530669 提到的审计跟踪实体（我正在调用我的 delta - 代码已经在 StackOverflow 的某处可用）。

或者您可以简单地保存上次更改时间。我通常使用基本实体来设置它，所有其他实体都对其进行扩展（对于您的特定要求，您可能可以删除它，`creationDate`因为`lastChange`对您来说已经足够了）：

```
protected Date creationDate;
protected Date lastChange;

// Getters and setters or final setters which don't do anything,
// if you only want to allow the entity to update the values

@PrePersist
public void prePersist() {
    creationDate = (creationDate == null) ? new Date() : creationDate;
    lastChange = (lastChange == null) ? creationDate : new Date();
} 
```

然后，在您的查询中，您可以添加一个过滤器，以便该`lastChange`属性比您的检索限制更新。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-15T11:17:42.453

您可以执行以下操作。使用**MongoDB 4.2+ 版**，您现在可以同时执行聚合运算符，例如`$toDate`从 ObjectId "_id" 中提取**时间戳** `update`。

这里我们使用聚合查询`$toDate`从 MongoDB 的 ObjectId "_id" 字段中提取时间戳，并使用`{$replaceRoot: {newRoot: "$$ROOT"}}`而不是显式声明来更新文档`$set`

```
var collection = "person"

agg_query = [
    {
        "$addFields" : {
            "_last_updated" : {
                "$toDate" : "$_id"
            }
        }
    },
    {
        $replaceRoot: {
            newRoot: "$$ROOT"
        } 
    }
]

db.getCollection(collection).updateMany({}, agg_query, {upsert: true}) 
```

# linux - Busybox OOM 杀手

> ID：13968706
> 
> 赞同：1
> 
> 时间：2012-12-20T09:16:10.860
> 
> 标签：linux, memory, out-of-memory, virtual-machine, busybox

我正在使用 Busybox 测试和嵌入 linux CPE；

```
BusyBox v1.00 (2012.07.10-03:48+0000) multi-call binary 
```

我想尝试消耗盒子上所有可用的虚拟内存来测试 OOM 杀手的行为。

这里的内存统计：

```
# free
          total         used         free       shared      buffers
Mem:        27876        21824         6052            0          708
Swap:            0            0            0
Total:        27876        21824         6052
# 
```

问题是 CPE 上的工具非常有限，因此“vi”、“dd”之类的命令不存在。

我在网上找到一篇文章：http: [//linuxdevcenter.com/pub/a/linux/2006/11/30/linux-out-of-memory.html](http://linuxdevcenter.com/pub/a/linux/2006/11/30/linux-out-of-memory.html)

但是由于设备上缺少内置工具，因此在执行脚本时遇到了问题。

有什么想法可以在命令行上消耗所有可用内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:29:26.733

I haven't tested it under busybox but i [fork bomb](http://en.wikipedia.org/wiki/Fork_bomb) may do the trick (I belive `:(){ :|: & };:`) should work on any ksh). It will spawn processes recursively so it will consume all of resources at some point (unless you run out of, say, pids faster - but I would think that on embedded devices memory is primary concern).

# c# - DataGridView 完全填充列

> ID：13968708
> 
> 赞同：0
> 
> 时间：2012-12-20T09:16:13.147
> 
> 标签：c#, .net, datagridview

我们有一个有 6 列的数据网格。我们需要确保 6 列在 datagridview 中完全填充。

我们试过了`dataView.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);`。它不起作用。我们应该做什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:20:14.157

您可以将其中一列的 AutoSizeMode 属性设置为 Fill。这将导致列始终调整自身大小以填充所有可用空间。

此链接可以帮助：

[如果网格较小，则调整 DataGridView 的列以填充可用空间，并在网格大于可用空间的情况下使用滚动](https://stackoverflow.com/questions/9024967/adjust-datagridviews-columns-to-fill-available-space-if-the-grid-is-smaller-and?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:26:53.820

您可能想尝试这样的事情，它会平移列以填充数据网格；

```
DataGrid.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells; 
```

或者

```
DataGrid.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill; 
```

让我知道这是否不是你要找的，我会改变它。DataGridViewAutoSizeColumnsMode 还有其他可能的选项，如果您想尝试其他选项，只需查看 intelisense。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:42:36.113

将[`AutoSizeColumnsMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.autosizecolumnsmode.aspx)属性值设置为`Fill`。

```
dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill; 
```

# c# - Lambda 表达式不起作用

> ID：13968709
> 
> 赞同：1
> 
> 时间：2012-12-20T09:16:18.543
> 
> 标签：c#, lambda

我正在尝试清除属性的所有现有选择，但它不适用于 lambda 表达式。

我试过使用“All”，但它返回一个布尔值，在这种情况下不起作用。如何使用 lambda 完成此操作？

```
var permGroup =  (ObservableCollection<PermissionGroup>)
                       this.choicesOptionsTree.ItemsSource;

// NOT WORKING 
permGroup.All(pg => pg.Permissions.All); 

// WORKING               
//clear all existing selections).
foreach (var perGrp in permGroup)
{
    foreach (var perm in perGrp.Permissions)
    {
        perm.Selected = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:19:53.257

`All()`用于确定集合中的所有元素是否满足给定条件，而不是对所有元素执行操作。

你想使用`ForEach()`-

```
permGroup.ForEach(pg => pg.Permissions.ForEach(perm => perm.Selected = false)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:18:15.267

您可以使用：

```
foreach (var perm in permGroup.SelectMany(x => x.Permissions))
{
  perm.Selected = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:19:00.617

```
permGroup.ForEach(pg => pg.Permissions.ForEach(p => p.Selected = false)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:24:15.733

这是另外几种方法

```
permGroup.SelectMany(pg => pg.Permissions).ForEach(x => x.Selected = false); 
```

或者

```
foreach (var permission in groups.SelectMany(x => x.Permissions))
                permission.Selected = false; 
```

# javascript - 如何检查嵌套事件是否触发？

> ID：13968716
> 
> 赞同：0
> 
> 时间：2012-12-20T09:16:36.813
> 
> 标签：javascript, jquery, jquery-mobile

在这个例子中，我想先触发 swiperight 功能，并检查这本书是否被“按下”。如何将绑定“按下”变成条件语句？谢谢你。

```
 $(document).swiperight(function(){
      $("#book").bind("pressed", function(event) {   //  Change this statement to   if ($("#book") is "pressed"){..}
           console.log("pressed");
      });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:24:14.547

尝试

```
$("#book").click(function(event) { 
    var $this = $(this);
    //emulate toggle button
    $this.data("pressed", $this.data("pressed") ? '' : 1);     
});

$(document).swiperight(function(){
   if(!$("#book").data("pressed")) { //If not pressed
      //your code goes here
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:26:59.723

```
$(document).swiperight(function(){
      if($("#book").attr("pressed") === "true") {
          $("#book").bind("pressed", function(event) {
              $(this).attr("pressed", "true");
              console.log("pressed");
          });
      }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T09:23:56.743

没有本机“按下”事件，所以我猜这是您自己触发的自定义事件，使用`$("#book").trigger("pressed")`. 如果是这种情况，在触发事件之前添加一个标志：

```
$("#book").data("pressed", "true")
$("#book").trigger("pressed") 
```

然后每当你想检查：

```
if ($("#book").data("pressed") === "true") {
    //already pressed...
} 
```

# android - 我想在按下主页按钮时停止媒体播放器

> ID：13968717
> 
> 赞同：2
> 
> 时间：2012-12-20T09:16:38.110
> 
> 标签：android, background, media-player, playing

当我离开我的应用程序时（按下主页按钮或返回按钮时），音乐会继续在后台播放。我怎样才能阻止它？

```
public class MainActivity extends Activity implements OnClickListener {

MediaPlayer ourSong;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ourSong = MediaPlayer.create(MainActivity.this, R.raw.girissong);
    ourSong.start();

    // codes

}

@Override
public void onClick(View v) {

    // some code

         }

         }

} 
```

我制作了这段代码，当我去下一堂课时它应该停止，下一首歌将开始

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:18:40.227

覆盖 Activity 的 onPause 方法并在 MediaPlayer 上调用 stop。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T09:21:14.383

在您的课程中放置以下两种方法，分别在导航到其他屏幕和主页按钮时停止音乐播放....

```
@Override
public void onPause()
{
   super.onPause();
   if(ourSong.isPlaying())
   ourSong.stop();
   else
   return;
}

@Override
public void onStop()
{
   super.onStop();
  if(ourSong.isPlaying())
    ourSong.stop();
  else
   return;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T09:19:02.087

查看你想在[onPause](http://developer.android.com/reference/android/app/Activity.html)上做什么。例子：

```
protected void onPause() {
     super.onPause();

     ourSong.stop();
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T09:23:24.467

您必须重写**onKeyDown()**方法并检查**keyevent**是否是主页键或返回按钮方法，并在此方法中停止您的媒体播放器对象然后释放它。 **mp.stop(); mp.release();**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T09:19:13.300

你可能应该把

```
if (player != null && player.isPlaying()) {
    player.stop();
    player.release();
    player = null;
} 
```

在您的活动的 onStop() 或 onDestroy() 方法中。

如果你把它放在`onStop()`音频中，当按下主页按钮时（或者任何其他活动接管电话响铃时），它就会停止。

如果你把它放进去，`onDestroy()`它会一直播放，直到系统需要你的应用程序正在使用的资源。无论哪种方式，这是一个好主意，这样您的应用程序就不会保留 MediaPlayer 资源，以防用户出于任何原因没有点击停止按钮。

# php - PHP - 列出目录文件作为导航。如何先显示索引并显示为1？

> ID：13968719
> 
> 赞同：1
> 
> 时间：2012-12-20T09:16:37.717
> 
> 标签：php, navigation, directory

我正在基于目录中的 php 文件构建页面导航。

目前我的目录中有 5 个文件：index.php、2.php、3.php、4.php、5.php

凭借我有限的 PHP 技能，我设法将代码显示为：[2] [3] [4] [5] [index]

但是，此时我遇到了一个有点超出我的路障。

我想让 [index] 显示为 [1]，我希望首先显示 [1]。

我想让它看起来像这样：[1] [2] [3] [4] [5]

```
<?php
    $pathfiles = "../directory/";
    $files = glob("../directory/*.php");
    foreach( $files as $file ) {
        echo '[<a href="'.($pathfiles).''
        .basename($file).'">'
        .basename($file, ".php").'</a>] ';
    }
?> 
```

任何帮助或线索将不胜感激。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:27:49.623

```
<?php
$pathfiles = "../directory/";
$files = glob("../directory/*.php");
$list = array();
    foreach($files as $file)
    {
        $nb = basename($file) == "index" ? "1" : basename($file);
        $list[$nb] = '[<a href="'.($pathfiles).''.basename($file).'">'.$nb.'</a>] ';
    }
    ksort($list);
    foreach ($list as $l)
    {
        echo $l;
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:28:26.863

在迭代之前，您需要将 index.php 值推到顶部；

```
$key = array_search('index.php', $files);
unset($files[$key]);
natsort($files);
array_unshift($files, 'index.php'); 
```

然后，在您的迭代中，只需查找值 index.php 并将其更改为 [1]

# wpf - WPF Scrollviewer 滚动到鼠标位置

> ID：13968723
> 
> 赞同：6
> 
> 时间：2012-12-20T09:16:54.407
> 
> 标签：wpf, image, offset, scrollviewer

我正在开发一个图像查看器控件，该控件由滚动查看器内的图像组成。为了进行缩放，我在图像的 layouttransform 中使用了 scaletransform。Zoomin 发生在鼠标点击。如果用户单击图像，我希望鼠标位置的像素位于滚动查看器可视区域的中心。为此，我想修改滚动查看器的偏移量，但我不确定如何计算将像素置于鼠标指针中心下方的正确偏移量。

[以下](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5202aae5-b2cc-4fc3-aa43-4541fcc856fb)是如何将滚动条保持在其相对位置的描述。这很好用，但不是我想要的。

如何正确计算偏移量？

这是我的一些代码：

xml:

```
<ScrollViewer Margin="5" Name="scrvImagePanel" VerticalAlignment="Stretch" 
                  CanContentScroll="True"
                  DockPanel.Dock="Left" 
                  HorizontalAlignment="Stretch" 
                  HorizontalContentAlignment="Stretch"
                  HorizontalScrollBarVisibility="Auto" 
                  VerticalContentAlignment="Stretch" 
                  VerticalScrollBarVisibility="Auto"
                  Background="{StaticResource {x:Static SystemColors.ControlDarkBrushKey}}"
                  ScrollChanged="OnScrollChanged">
        <Image Name="imgPicture"
               MouseUp="imgMouseUp" 
               Stretch="None"
               HorizontalAlignment="Left" 
               VerticalAlignment="Top" 
               >
            <Image.LayoutTransform>
                <TransformGroup>
                <ScaleTransform x:Name="imgZoomTransform" ScaleX="1" ScaleY="1"></ScaleTransform>
                </TransformGroup>
            </Image.LayoutTransform>                
        </Image>
    </ScrollViewer> 
```

和代码：

```
private void imgMouseUp(object sender, MouseButtonEventArgs e)
{
   Point absScreenPos = e.GetPosition(imgPicture);

    //calculate the new zoom factor
    this.ZoomFactor = imgZoomTransform.ScaleX;
    if (e.ChangedButton == MouseButton.Right)
    {
      this.ZoomFactor /= 2.0;
    }
    else if (e.ChangedButton == MouseButton.Left)
    {
      this.ZoomFactor *= 2.0;
    }

    //perform the zooming
    this.DoZoom(this.ZoomFactor, absScreenPos.X, absScreenPos.Y);

}

private void DoZoom(double zoom, double posX, double posY)
{
  // update the scale transform
  imgZoomTransform.ScaleX = zoom;
  imgZoomTransform.ScaleY = zoom;

  this.AdjustScroll(new Point(posX, posY));
}

private void AdjustScroll(Point? centerPoint)
{
  if(centerPoint != null)
  {
    var sv = this.scrvImagePanel;

    double offsetX = (centerPoint.Value.X / this.imgPicture.ActualWidth) * sv.ActualWidth;
    double offsetY = (centerPoint.Value.Y / this.imgPicture.ActualHeight) * sv.ActualHeight;

    sv.ScrollToHorizontalOffset(offsetX);
    sv.ScrollToVerticalOffset(offsetY);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:31:43.173

这个想法很简单，当鼠标按下时，你应该计算它到中心的距离，并将它添加到当前偏移量或从当前偏移量中减去它。
考虑这段代码：

```
bool left = false;
    double scale = 2;
    double ZoomFactor;
    private void imgMouseUp(object sender, MouseButtonEventArgs e)
    {
        Point absScreenPos = e.GetPosition(imgPicture);

        //calculate the new zoom factor
        this.ZoomFactor = imgZoomTransform.ScaleX;
        if (e.ChangedButton == MouseButton.Right)
        {
            left = false;
            this.ZoomFactor /= scale;
        }
        else if (e.ChangedButton == MouseButton.Left)
        {
            left = true;
            this.ZoomFactor *= scale;
        }
        //perform the zooming
        this.DoZoom(this.ZoomFactor, absScreenPos.X, absScreenPos.Y);
    }
    private void AdjustScroll(Point? centerPoint)
    {
        if (centerPoint != null)
        {
            Point poi = Mouse.GetPosition(scrvImagePanel);

            double Xmove = ( scrvImagePanel.ActualHeight) / 2 - poi.X;
            double Ymove = (scrvImagePanel.ActualWidth) / 2 - poi.Y;

            if (left)
            {
                scrvImagePanel.ScrollToHorizontalOffset((scrvImagePanel.HorizontalOffset - Xmove) * scale);
                scrvImagePanel.ScrollToVerticalOffset((scrvImagePanel.VerticalOffset - Ymove) * scale);
            }
            else
            {
                scrvImagePanel.ScrollToHorizontalOffset((scrvImagePanel.HorizontalOffset - Xmove) / scale);
                scrvImagePanel.ScrollToVerticalOffset((scrvImagePanel.VerticalOffset - Ymove) / scale);
            }
        }
    } 
```

**我知道这段代码不能完美运行，但我认为这必须为您提供路径**

# jquery - 在选择选项更改时删除旧 cookie

> ID：13968725
> 
> 赞同：2
> 
> 时间：2012-12-20T09:17:02.210
> 
> 标签：jquery, jquery-cookie

我有一个选择选项，我想在每次点击时保存选定的值。这是我的脚本

```
// on change deletes bill_client_id old values and set the new values
jQuery("#bill_client_id").change(function() {   
    jQuery.cookie('bill_client_id"', '', { expires: -1 });
    jQuery.cookie('bill_client_id', jQuery("#bill_client_id").val());
    alert(jQuery.cookie("bill_client_id"));
})

// on document ready Select options by values
for(var i = 0 ; i < jQuery.cookie('bill_client_id').length; i++) {              
    jQuery("#bill_client_id option[value='"+jQuery.cookie('bill_client_id')[i]+"']").attr('selected', 'selected');
} 
```

问题被`bill_client_id`保存了 2 次（我可以在 Firebug 中看到它们）并且在准备好文档时我只得到了旧的`bill_client_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:23:35.603

也许是因为您的 cookie 名称不匹配？

```
jQuery.cookie('bill_client_id"', '', { expires: -1 }); 
```

应该：

```
jQuery.cookie('bill_client_id', '', { expires: -1 }); 
```

# c++ - 在 C 项目中可重用的最小 C++ 特性集（几乎？）零胶水代码

> ID：13968728
> 
> 赞同：1
> 
> 时间：2012-12-20T09:17:08.853
> 
> 标签：c++, c

*免责声明*：我知道任何一方的纯粹主义者，C 或 C++，都不会喜欢这样。这项工作需要完成。

我想尽可能多地使用 C++ 的非 OOP 相关特性来使我的类 C 编码（当然是用 C++ 编译器编译）更有趣。最终产品应该是一个类似 C 的库（和一个随附的可执行文件），它相对容易嵌入到 C 程序中。

例如，我非常需要的是**函数重载**。我猜客户端代码（用 C 编写）可以使用**libffi**或类似代码来获得重命名的名称，因此可以调用函数。

其他不错的功能是**默认值**，也许还有**模板**。

我不会使用任何 C++ 库（只有 C），没有例外，没有 RTTI，也没有对象。

1.  *什么是 C 中没有的 C++ 功能的完整列表，我可以在这些限制下使用这些功能，以及有哪些常见的库和技术可以使其尽可能轻松地工作？*
2.  *我应该注意什么？*

我知道[相关问题](https://stackoverflow.com/questions/199418/using-c-library-in-c-code)，但正如我所说，我不想要**任何胶水代码**（也许除了修饰部分，如果他不使用 C++，客户必须这样做），我不会使用任何 OOP 功能。我准备做出妥协。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:36:01.053

我会因此而被否决很多，因为这并不能真正回答问题，但是...

*   如果您想从外部被可移植地调用，请使用 C 原型。没有重载，没有默认参数，没有模板，没有 C++ 类型。只有C类型，即。整数、浮点数和指针（指向不透明的不完整 C++ 结构的指针是可以的）。要求客户端库使用 libffi 或类似的库是自找麻烦。
*   如果你想使用 C++ 特性和库，你可以使用它们并且仍然遵守上面的一些工作（不要忘记`extern "C"`，并捕获所有异常）。

如果客户不愿意使用 C++（这完全可以理解），那么无论如何您都必须编写胶水代码。最小化粘合代码的唯一解决方案是设计一个*干净的 API*。

It is possible to write the "top layer" (close to the externally visible API) in a way that will require almost no glue, and use C++ for the internals.

# unicode - QTextCodec::setCodecForCStrings 在 Qt5 中已消失

> ID：13968734
> 
> 赞同：9
> 
> 时间：2012-12-20T09:17:49.917
> 
> 标签：unicode, qt5

我的项目中所有显示的文本都是希腊语。我没有使用`tr()`，直接使用希腊字符。对于我使用的正确编码：

```
QTextCodec::setCodecForCStrings(QTextCodec::codecForName("ISO 8859-7"));//for Greek 
```

Qt5拿走`setCodecForCStrings`了，所有的字符都显示为`"???????"`。有解决方法吗？

请注意这是一个大项目，我想避免对程序中的每个字符串都使用代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T20:51:13.560

Thank you Esailija

So saving all my files with UTF-8 encoding solved the problem.

If you are using Qt Creator, change the default encoding to UTF-8:
Preferences -> Text Editor -> Default Encoding ... choose UTF-8
Then for the existing files go to Edit->Select Encoding and change it to UTF-8

also for anyone wanting more details look here [http://www.macieira.org/blog/2012/05/source-code-must-be-utf-8-and-qstring-wants-it/](http://www.macieira.org/blog/2012/05/source-code-must-be-utf-8-and-qstring-wants-it/)

# asp.net-mvc-4 - 在 VS2012 中使用 Package Manager Consoler 安装 Mvc Scaffolding 包时出错

> ID：13968740
> 
> 赞同：3
> 
> 时间：2012-12-20T09:18:04.590
> 
> 标签：asp.net-mvc-4, visual-studio-2012, nuget-package, asp.net-mvc-scaffolding, t4scaffolding

我是使用包管理器控制台的新手。我需要安装`Autofac.Mvc3`和 `MvcScaffolding`打包。我尝试通过运行以下命令使用包管理器控制台进行安装。

```
PM> Install-Package Autofac.Mvc3 
```

但我得到了以下错误。

> 正在尝试解决依赖项“Autofac (≥ 2.6.3.862)”。
> 安装包：底层连接已关闭：发送时发生意外错误。
> 在 line:1 char:16
> + Install-Package <<<< Autofac.Mvc3
> + CategoryInfo: NotSpecified: (:) [Install-Package], WebException
> + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

在安装时`MvcScaffolding`：

```
PM> Install-Package MvcScaffolding 
```

它抛出这个错误。

> 正在尝试解决依赖项“T4Scaffolding”。
> 安装包：底层连接已关闭：发送时发生意外错误。
> 在 line:1 char:16
> + Install-Package <<<< MvcScaffolding
> + CategoryInfo : NotSpecified: (:) [Install-Package], WebException
> + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

在 VS2012 中创建 MVC4 应用程序时，我在“packages”文件夹中确实有一些预安装的 dll，但它不包含 MvcScaffolding/Au​​tofac。

请告诉我必须将它们安装在“packages”文件夹中，还是通过运行上述命令进行安装。

请帮忙..提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:46:15.377

这个错误为我解决了。我想知道它是如何解决的。我尝试再次运行这些命令。现在它已正确安装，我的 web.config 也随之更改！我跟着这个[链接](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)。它对我帮助很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:48:54.890

它在 VS 2012 上运行良好吗

它是否也适用于参考模型以及 CRUD 模型上的 FK 关系？

# php - 自动上传项目

> ID：13968745
> 
> 赞同：1
> 
> 时间：2012-12-20T09:18:24.893
> 
> 标签：php, ftp, phpdesigner

假设我有一个本地项目，其文件也在线存储；现在，使用 netbeans，我可以提供本地项目的 FTP 详细信息，以便在文件更改/保存时上传文件。

我将如何在**PHPDesigner 8**中做同样的事情（如果可能的话）？

在谷歌上找不到太多，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T07:57:46.213

PHPDesigner 8 与 Netbeans 的“保存时上传”没有什么不同。

我已经通过以下方式进行了设置：

*   创建一个项目（我的存储库在我的本地驱动器上）。
*   将 FTP 连接添加到项目。

完成此操作后，您可以浏览远程 FTP 站点。

*   通过 FTP 自动下载双击文件并打开它以在 PHPDesigner 中进行编辑。
*   保存更改会自动将文件上传回 FTP 站点。
*   然后，您可以使用 WinSCP 将更改同步到本地驱动器（仅当您的存储库是本地时才需要）。

# c++ - Makefile：Foreach 和 eval 缺少分隔符？

> ID：13968758
> 
> 赞同：2
> 
> 时间：2012-12-20T09:19:12.673
> 
> 标签：c++, makefile, separator

我的 Makefile 中有这个：

```
# Build source files
define compile_rule
%.o : %.$1
        $$(COMPILE) $$(COMPILE_FLAGS) $$(CC_FLAGS) -o $$@ $$<
endef
$(foreach EXT, $(SRC_EXT), $(eval $(call compile_rule, $(EXT)))) 
```

但是，如果我输入`make`此错误，为什么会发生这种情况？

```
*** missing separator (did you mean TAB instead of 8 spaces?).  Stop. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:38:59.577

您需要在 endef 正上方的行中使用制表符而不是 8 个空格。

# ios5 - 带有 ios 故事板的标签栏

> ID：13968761
> 
> 赞同：0
> 
> 时间：2012-12-20T09:19:18.307
> 
> 标签：ios5, ios-4.2

我有 6 个 ViewController，我只需要在其中 4 个中显示标签栏（viewcontroller 2、viewcontroller 3、view controller 4、viewcontroller 5）。当我使用模态视图控制器从第 6 个视图控制器导航到第 2 个视图控制器时，标签栏不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:43:38.037

如果您从 VC6 模态显示 VC2，您将看不到 VC2 的包含控制器。这是设计使然。

但无论如何，你的 UI 逻辑可能是错误的。模态演示在上下文之外呈现一个 viewController - 期望您随后将通过呈现控制器返回（弹出堆栈），而不是在其他地方导航（例如，通过选项卡）。

您是如何从您的一个选项卡视图中获得 TO VC6 的？如果您需要更多帮助，也许您应该发布一个故事板风格的草图来展示您的意图。

# oozie - oozie 时区设置

> ID：13968768
> 
> 赞同：11
> 
> 时间：2012-12-20T09:19:47.153
> 
> 标签：oozie

我是 oozie 的新手，在更改 oozie 默认时区时遇到问题。我正在编写 oozie 协调员工作，并尝试指定时区，例如

```
<coordinator-app name="hello-coord" frequency="${coord:days(1)}"
                  start="2009-01-02T08:00Z" end="2009-01-04T08:00Z" timezone="GMT+05:30"
                 xmlns="uri:oozie:coordinator:0.1"> 
```

正如这里解释的那样[http://oozie.apache.org/docs/3.2.0-incubating/CoordinatorFunctionalSpec.html#a4._Datetime_Frequency_and_Time-Period_Representation](http://oozie.apache.org/docs/3.2.0-incubating/CoordinatorFunctionalSpec.html#a4._Datetime_Frequency_and_Time-Period_Representation) 但它不起作用。谁能告诉我哪里出错了？

其次，我想在 oozie 工作流程开始时获取日期时间。假设我想在过去的某个日期运行协调员工作，比如一周前，该工作以 15 分钟的频率运行了一整天。我想要的是在工作流程开始时有日期时间。

非常感谢您宝贵的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T11:44:18.087

您可以在您的

`oozie-site.xml`

`<property> <name>oozie.processing.timezone</name> <value>GMT+0400</value> </property>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-07T06:48:06.770

你也可以试试这个：

```
$ oozie info -timezones<br><br> 
```

格式为“SHORT_NAME (ID)”。

将 ID 提供给 -timezone 参数。

也可以使用 GMT 偏移量（例如 GMT-07:00、GMT-0700、GMT+05:30、GMT+0530）

可用时区：

```
 SST (Pacific/Midway)<br>
  NUT (Pacific/Niue)<br>
  SST (Pacific/Pago_Pago)<br>
  SST (Pacific/Samoa)<br>
  SST (US/Samoa)<br>
  HAST (America/Adak)<br>
  HAST (America/Atka)<br>
  HST (HST)<br>
  ... 
```

如果您需要的时区低于此命令给定的时区，您可以直接在协调器中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T19:08:38.020

你好朱奈德和 ygnhzeus，

为了在 oozie 中更改您的时区，您只需在 oozie-default.xml 文件中更改默认时区。

```
**<property>
        <name>oozie.processing.timezone</name>
        <value>GMT+0530</value>
        <description>
            Oozie server timezone. Valid values are UTC and GMT(+/-)####, for example 'GMT+0530' would be India
            timezone. All dates parsed and genered dates by Oozie Coordinator/Bundle will be done in the specified
            timezone. The default value of 'UTC' should not be changed under normal circumtances. If for any reason
            is changed, note that GMT(+/-)#### timezones do not observe DST changes.
        </description>
    </property>** 
```

现在只需停止 oozie 并重新启动它。谢谢您，数据工程师 Amudhan K。

# dart - 如何在 Dart 中创建 CSS 关键帧规则

> ID：13968777
> 
> 赞同：4
> 
> 时间：2012-12-20T09:20:11.637
> 
> 标签：dart

我需要在 Dart 中动态创建 @keyframe 规则并将它们添加到文档样式表中。这是我正在尝试做的 JS 中的一个示例：

```
var styleSheet = document.styleSheets[0];
var rule = '@-webkit-keyframes { ... }';
styleSheet.insertRule(rule, 0); 
```

它提出了两个问题：

1.  如何在 Dart 中创建 @keyframe 规则？API 文档中有一个 CSSKeyframesRule，但最新的 Dart 编辑器说没有这种类型，当我尝试使用它时，Dartium 会抛出异常（它被弃用了吗？）。我想这不仅仅是 JS 中的字符串，因为 Dart 应该处理供应商前缀？

2.  如果我创建一个规则，我如何将它插入到样式表中。StyleSheet 类似乎没有像 insertRule 这样的方法。我当然可以只创建 crete 样式节点并设置其 innerHTML，但我不想为每个关键帧规则创建单独的节点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:44:49.130

以下代码似乎有效。

```
void main() {
  final styleSheet = document.styleSheets[0] as CssStyleSheet;
  final rule = '@-webkit-keyframes mymove { from {top:0px;} to {top:200px;} }';
  styleSheet.insertRule(rule, 0);
} 
```

# java - 如何在Java中找到给定段落中最大的字谜

> ID：13968782
> 
> 赞同：-2
> 
> 时间：2012-12-20T09:20:28.290
> 
> 标签：java, collections, arraylist, core

我试图在给定的段落中找到最大的字谜。假设向我提供了一个包含单词的字符串。现在我想找到所有的字谜，在所有的字谜中，我想返回所有最大字谜的列表。

例如，

```
String s = "Hello jjkkllmm how are you. See you at lljjmmkk tomorrow with kkjjmmll. ootty tyoto" 
```

这里*jjkkllmm*、*lljjmmkk*、*kkjjmmll*、 *ootty 和*tyoto*是字谜，其中*jjkkllmm*、*lljjmmkk*和*kkjjmmll*是最大且大小相等的字词，因此我的方法应返回所有最大且大小相同的字谜词。

我从我这边尝试了下面的代码，但我不知道它是否是完美的解决方案或者是否可以改进。

```
public static Set<String> findAllAnagram(String words)
{
    Map<String,String> tempMap = new HashMap<String,String>();
    Set<String> allAnagrams = new LinkedHashSet<String>();
    String[] wordArr = words.split(" ");

    for (String string : wordArr)
    {
        if(tempMap.containsKey(sort(string)))
        {
            allAnagrams.add(tempMap.get(sort(string)));
            allAnagrams.add(string);
        }
        else
        {
            tempMap.put(sort(string), string);
        }
    }
    return allAnagrams;
}

public static String findBiggestAnagram(String word)
{
    Set<String> allAnagrams =findAllAnagram(word);
    int biggestAnnagramCount = 0;
    String biggestAnnaGramWord = "";
    for (String string : allAnagrams)
    {
        if(biggestAnnagramCount<string.length())
        {
            biggestAnnaGramWord = string;
            biggestAnnagramCount=string.length();
        }
    }
    return biggestAnnaGramWord;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:23:30.097

一个简单的解决方案是为每个字谜建立一个密钥。

通过小写和排序字母（“See”=>“ees”）可以构建一个明显的方法。

使用 a`HashMap<String, List<String>>`来保留字谜的所有版本，您将遍历单词以将它们链接到它们的键。

之后，您只需在列表中具有多个元素的键中取最大键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:48:09.960

将字符串按空格拆分并在对字符串进行排序后将每个单词添加到一个集合中，添加到集合后返回false实际上是字谜，因为它已经添加了。

```
 char[] chars = original.toCharArray();
   Arrays.sort(chars);
   String sorted = new String(chars);
   set.add(sorted) 
```

# html - 未从 Cloudfront 播放 HTML5 (mp4) 视频

> ID：13968784
> 
> 赞同：1
> 
> 时间：2012-12-20T09:20:38.780
> 
> 标签：html, google-chrome, video, amazon-cloudfront

我正在尝试在来自 Amazon Cloudfront 的 Chrome 23 中播放 HTML5 视频。应该很简单，但我无法让它工作。HTML 是您所期望的：

```
<video width="1280" height="720">
  <source src="http://d1dsyb3mv0b0i6.cloudfront.net/test/lines.mp4" type="video/mp4" />
  Your browser does not support the video element.
</video> 
```

我确保按照[此答案](https://stackoverflow.com/a/8764385/414376)中的建议`Content-Header`设置为`video/mp4`和`Content-Disposition`设置为。`inline`

但是，当我在 Chrome 中打开带有 video 元素的测试页并查看网络控制台时，我只看到请求状态为`(pending)`，随后`(canceled)`：

![在此处输入图像描述](../Images/7f2e87e33b9c9883bab4c018975a2121.png)

当我将视频元素指向本地计算机上的副本时，视频播放得很好，但由于某种原因，它没有从 Cloudfront 正确提供。

请注意，我使用的是下载分发，因为我不需要 RMTP 流。可以肯定的是，我也尝试了流式分发，但这会导致请求状态`(pending)`后跟`(failed)`.

任何人有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:41:11.480

检查您是否在 S3 中找到了您认为它所在的文件，并确保将权限设置为允许在没有身份验证字符串的情况下加载对象。

检查此处也可以生成策略：

[http://awspolicygen.s3.amazonaws.com/policygen.html](http://awspolicygen.s3.amazonaws.com/policygen.html)

# jquery - jquery mobile - 页面加载时的事件绑定问题

> ID：13968791
> 
> 赞同：1
> 
> 时间：2012-12-20T09:20:58.307
> 
> 标签：jquery, jquery-mobile

我正在为我的网站使用 jquery mobile。如果页面是第一次加载它工作正常。如果页面是通过 ajax（带有转换）加载的，它将不起作用。我尝试了 pageinit 事件但没有成功。

这是包含在所有页面中的页脚脚本。

```
 <a href="javascript:void(0);" id="expand-footer" class="expand-button" data-role="none"></a>
    <div class="footer-content"> Footer </div>

    $(document).ready(function() {
       $('#expand-footer').unbind("click").click(function(e) {
        e.preventDefault();
        console.log("click");
        $('#expand-footer').toggleClass('expand-button-close', 'expand-button');

        if ($('#expand-footer').hasClass('expand-button expand-button-close')) {
            console.log("if click");
            $('.footer-content').hide("slide", { direction: "down" }, 1000);
        } else {
            console.log("else click");
            $('.footer-content').show("slide", { direction: "down" }, 1000);
        }

    });
   }); 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:50:01.067

我认为你不应该听`unbind`。自然，我会听这个`click`事件：

```
$('#expand-footer').click(function (e) {
    e.preventDefault();
    console.log("click");
    $('#expand-footer').toggleClass('expand-button-close', 'expand-button');

    if ($('#expand-footer').hasClass('expand-button expand-button-close')) {
        console.log("if click");
        $('.footer-content').hide("slide", { direction: "down" }, 1000);
    } else {
        console.log("else click");
        $('.footer-content').show("slide", { direction: "down" }, 1000);
    }
}); 
```

如果移动站点将在设备上使用，那么您需要添加一个事件侦听器，用于设备何时准备就绪`document.addEventListener("deviceready", onDeviceReady, false);`，如果您需要一直使用此代码，则在设备准备好时执行它。

```
function onDeviceReady(){
    $('#expand-footer').click(function (e) {
        e.preventDefault();
        console.log("click");
        $('#expand-footer').toggleClass('expand-button-close', 'expand-button');

        if ($('#expand-footer').hasClass('expand-button expand-button-close')) {
            console.log("if click");
            $('.footer-content').hide("slide", { direction: "down" }, 1000);
        } else {
            console.log("else click");
            $('.footer-content').show("slide", { direction: "down" }, 1000);
        }
    });  
} 
```

但是，如果您只需要在用户导航到某个页面时执行代码，那么您可以使用以下任何一种方法：

*   页面显示
*   页面创建
*   页面初始化

更多文档可以在这里找到：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

您的语法将如下所示：

```
$(document).on('pageinit', '#your_page_id', function(){
    $('#expand-footer').click(function (e) {
        e.preventDefault();
        console.log("click");
        $('#expand-footer').toggleClass('expand-button-close', 'expand-button');

        if ($('#expand-footer').hasClass('expand-button expand-button-close')) {
            console.log("if click");
            $('.footer-content').hide("slide", { direction: "down" }, 1000);
        } else {
            console.log("else click");
            $('.footer-content').show("slide", { direction: "down" }, 1000);
        }
    });   
}); 
```

要使用其他事件：

```
$(document).on('pagecreate', '#your_page_id', function(){
    //your code here
});

$(document).on('pageshow', '#your_page_id', function(){
    //your code here
}); 
```

`.live`也可以，但很快就会被弃用：

```
$('#your_page_id').live("pagecreate", function(){
     //your code here
}); 
```

使用 JavaScript 动态附加 id：

```
$(document).append('<div data-role="page" id="your_page_id"><div data-role="content">dummy text</div></div>'); $('#my_page_id').page(); 
```

或在您的 PHP 文件中：

```
<?php
    echo "<div data-role=\"page\" id=\"your_page_id ";
    //use single quote ' to avoid escaping double quote in string
    echo " \"></div>";
?> 
```

避免使用特定 ID：或者，您可以使用 jQuery 将 jQuery 应用于任何页面：

```
$(document).on('pagecreate','[data-role=page]', function(){
    //code here
});

$(document).on('pageinit','[data-role=page]', function(){
    //code here
});

$(document).on('pageshow','[data-role=page]', function(){
    //code here
}); 
```

# c# - 使用 C# 从 html 表创建 EXCEL

> ID：13968795
> 
> 赞同：1
> 
> 时间：2012-12-20T09:21:17.753
> 
> 标签：c#, html, excel, export, html-table

我正在尝试使用 C# 和 HTML 表创建一个用于运送产品的 excel 表。下面显示的图像是我在浏览器中显示的 HTML。我试图做的是把这张桌子塞进一个excel页面，保持比例和合并完好无损。（我在每个 td 上放置了一个边框颜色来表示 excel 中的单元格，一旦它出现在 Excel 工作表中，就不需要该颜色了）。

![浏览器中显示的 HTML 表格](../Images/d9329d1ec9910a71db92bda5961dc368.png)

我尝试从这篇文章（[How to export html table to excel using asp.net/c#](http://forums.asp.net/t/1573064.aspx/1)）开始工作，但是当使用此代码时，我的表在文件中并没有变成单元格，它只是一个包含文本的单元格。

![电子表格](../Images/0af72b5f6e44e9a70aad6d8387e8ac28.png)

要添加的是，当使用该链接上的代码时，我在 aspx 页面中复制了代码并将其作为 html 字符串添加到表单中，如链接上的示例所示。然后，这产生了与我之前手工制作的相同形式。

```
var html = "<tabe><tr><td width=\"86\">x</td><td width=\"72\">x</td><td width=\"91\">x</td><td width=\"72\">x</td><td width=\"72\">x</td><td width=\"139\">x</td><td width=\"93\">x</td><td width=\"72\">x</td><td width=\"72\">x</td><td width=\"72\">x</td><td width=\"72\">x</td><td width=\"72\">x</td></tr><tr><td rowspan=\"5\" colspan=\"2\" style=\"border: solid 2px black;\">INVOICE</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td rowspan=\"2\" colspan=\"2\" style=\"background-color: green;\">Ref</td><td></td><td style=\"background-color: green;\">Swiss Post</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td style=\"background-color: yellow;\">SoBling</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></table>"; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:38:53.953

我给你做了几个链接，可以帮助你合并、宽度、高度和创建 Excel。我制作的链接只引用了应该一起工作的 SO。

[在 C# 中使用字符串作为输入创建简单的 Excel 工作表](https://stackoverflow.com/questions/10100901/creating-simple-excel-sheet-in-c-sharp-with-strings-as-input)

[使用 C# 合并 Excel 中的单元格](https://stackoverflow.com/questions/532199/merging-cells-in-excel-using-c-sharp)

[.net c# excel列AutoFit](https://stackoverflow.com/questions/1345396/net-c-sharp-excel-column-autofit)

[excel单元格着色](https://stackoverflow.com/questions/5897062/excel-cell-coloring)

宽度和高度是“相同的”。我没有在代码方面为您提供解决方案，而是提供链接，以便您制定自己的解决方案并从中学习。询问您是否有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:40:43.643

我建议使用 epplus 来创建 excel 图表

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

# reporting-services - 在 Reporting Services 中查看“全选”标签

> ID：13968798
> 
> 赞同：0
> 
> 时间：2012-12-20T09:21:28.377
> 
> 标签：reporting-services, ssrs-2012

我有 ssrs 2012，我必须使用参数（多值）创建报告。我的问题是：当有人检查所有可能的值时，是否可以将标签设置为“全部检查”？现在我列出了所有标签...

谢谢，垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:18:32.427

如果要显示参数的所有选定值，通常会编写如下表达式：

```
=Join(Parameters!MyParam.Label, ",") 
```

如果您想显示“检查所有”而不是首先列出的所有不同参数，您需要知道您在多值字段上显示的参数数量。如果值列表来自对数据库的查询，则可以使用以下表达式：

```
=IIF(Parameters!MyParam.Label.Length = Count(Fields!Label.Value, "DataSet1"), 
"Checked all", Join(Parameters!MyParam.Label, ",")) 
```

# php - 如何在php中查询excel文件？

> ID：13968800
> 
> 赞同：-3
> 
> 时间：2012-12-20T09:21:29.227
> 
> 标签：php

我想比较两个 excel 文件的第一列，如果找到匹配项，我需要将第 5 列的值复制到另一个 excel 表。我试过了`php_excel_reader`，`php_excel_writer`但没有成功。

我想要这样的东西：

```
excelF1;
excelF2;
for ($i=1; $i<=rowlength(excelF1); $i++)
{
    val1 = excelF1[i][1];
    for ($j=1; $j<=rowlength(excelF2); $j++)
    {
        val2 = excelF2[j][1];
        if(val1 == val2)
        {
            val3 = excelF2[j][5];
            //insert val3 into last column of excelF1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:17:31.837

试试这个：[PHPExcel](http://phpexcel.codeplex.com/)和[PHPExcel 示例](http://phpexcel.codeplex.com/wikipage?title=Examples&referringTitle=Home) 或更轻量级[的 php-excel-reader](http://code.google.com/p/php-excel-reader/wiki/Documentation)（仅适用于 xls）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T09:45:13.747

尝试 fgetcsv() 和 fputcsv() 函数。

文档： http: [//php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

# java - 如何用java读取网站的源代码

> ID：13968801
> 
> 赞同：2
> 
> 时间：2012-12-20T09:21:30.700
> 
> 标签：java, web-crawler

我正在尝试用 Java 编写一个网络爬虫，到目前为止，尽管我在使用 JavaScript 或 PHP 动态获取内容的网站上遇到问题，但到目前为止它大部分都可以工作，例如，如果我尝试爬取 tumblr 博客而不是获取整个源代码使用链接和所有内容我只获得 CSS 和标题信息，这是因为所有帖子信息都是由 JavaScript 收集的。

我用来从网页获取源代码的代码是......

```
public static String openURL( String url )
{
    String source = null;                                                                           
    String temp = "";                                                                       
    BufferedInputStream bis;                                                                        
    try
    {
        URL my_url = new URL(url);                                                          

        HttpURLConnection urlConnection = (HttpURLConnection) my_url.openConnection();
        urlConnection.setRequestProperty("User-Agent", "Mozilla/5.0");
        InputStream is = urlConnection.getInputStream();

        bis = new BufferedInputStream(is);                  

        byte[] buffer = new byte[1024];
        int bytesread = 0;
        source = "";

        bytesread = bis.read(buffer);

        while( bytesread != -1 )
        {
            source += new String(buffer, 0, bytesread);
            bytesread = bis.read(buffer);
        }
    }
    catch (Exception ex ){}
    System.out.println(source);
    return source;                                                                              
} 
```

有没有人可以改变这个，所以它会得到动态内容，任何帮助将不胜感激

干杯丹尼尔

**编辑：**抱歉，虽然您的回答很有帮助，但这个项目更具教育意义，所以我试图找到一种不使用第三方 API 的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:28:06.347

一般来说，网络爬虫会看到没有处理 javascript 的网站。Web 开发人员知道这一点，所以“好”的网站可以在没有 JS 的情况下成功阅读

如果你真的很想实际处理 JS，（尽管如果你不这样做，你的生活会轻松很多），你可以使用这个工具： http: [//phantomjs.org/](http://phantomjs.org/)

我实际上没有使用它，但它允许您在不使用浏览器的情况下处理 JS..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:40:25.800

如果你想用 Java 来做，看看可以处理 javascript的[htmlunit](http://htmlunit.sourceforge.net/) ，或者可以帮助你驱动真正的浏览器的[selenium](http://code.google.com/p/selenium)

# database - 带推进的多连接查询

> ID：13968803
> 
> 赞同：0
> 
> 时间：2012-12-20T09:21:37.347
> 
> 标签：database, zend-framework, orm, propel

让我们考虑下表：

```
 special_product(
  id
 product_key - FK to product.key)

 product(
 id
 key
 name)

product_attributes(
id
product_id FK to product.id
description
) 
```

我的问题是如何编写一个查询，从`SpecialProductQuery`类开始为我提供列 special_product.id、product.id、product_attributes.description。

基本上生成的查询应该是

```
select s.id, p.id, pa.description 
from special_product s
left join product p on s.key = p.key
left join product_attributes pa on p.id = pa.product_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:05:05.127

假设您已经在架构中建立了关系，您应该能够做到：

```
 $specialProduct = specialProductQuery::create()
      ->joinWithProduct(SpecialProduct.Product)
      ->joinWith(Product.ProductAttributes)
      ->find(); 
```

从这里您可以从子对象中获取您需要的任何值（请记住，您仍然需要遍历集合）：

```
 foreach($specialProduct as $special)
 {
      $product = $special->getProduct();
 } 
```

YMMV 取决于您如何命名模型。

# java - 如何在显示目录大小的java程序中实现目录deph？

> ID：13968806
> 
> 赞同：0
> 
> 时间：2012-12-20T09:21:41.753
> 
> 标签：java, recursion, directory

代码：

```
public class DirSize
{
    public static void main(String[] args)
    {
        DirSize ds = new DirSize();
        System.out.println(ds.getDirSizeInMegabytes(new File("c:/temp")));
    }

    long getDirSize(File dir)
    {
        long size = 0;

        if (dir.isFile())
        {
            size = dir.length();
        }
        else
        {
            File[] subFiles = dir.listFiles();

            for (File file : subFiles)
            {
                if (file.isFile())
                {
                    size += file.length();
                }
                else
                {
                    size += this.getDirSize(file);
                    System.out.println("Directory " + file.getName()
                                       + " size = " + size / 1021 / 1024);
                }
            }
        }
        return size;
    }

    long getDirSizeInMegabytes(File dir)
    {
        return this.getDirSize(dir) / 1024 / 1024;
    }
} 
```

我想只打印大小目录，例如从初始开始的第二级：

```
c:\temp1\temp2 
```

但如果还有 temp3：

```
c:\temp1\temp2\temp3 its size shouldn't be printed. 
```

喜欢：

```
 c:\temp1\temp2 size = 10M
 c:\temp1\temp21 size = 15M
 .... 
```

怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:27:41.680

您需要在递归方法中添加递归深度，以便能够限制打印的内容：

```
long getDirSize(File dir, int depth, int printDepth) 
```

然后你需要这样的递归调用：

```
size += this.getDirSize(file, depth+1, printDepth); 
```

如果你的意思是你只想打印最大深度的尺寸，那么你需要添加测试，比如

```
if (depth == printDepth) { // or depth <= printDepth maybe
    // ...do printing only for these
} 
```

* * *

将整个东西包装在一个类中可能是有意义的，因此您可以将 printDepth 设为成员变量，并将递归方法设为私有，例如：

```
class DirSizePrinter {
    int printDepth;
    File root;
    public DirSizePrinter(int printDepth, File root) {
        this.printDepth = printDepth;
        this.root = root;
    }

    public long printSize() {
        return printSizeRecursive(0);
    }

    private long printSizeRecursive(int depth) {
        // ... code from question with depth added, and using printDepth and root
    }
} 
```

用法：

```
 new DirSizePrinter(3, "C:/temp").printSize(); 
```

或者这个的一些变化，这取决于你的所有要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:31:01.030

```
void getDirSize(File dir,depth) {
    long size = 0;

    if (dir.isFile()) {
        size = dir.length();
    } else {
        depth++;
        File[] subFiles = dir.listFiles();

        for (File file : subFiles) {
            if (file.isFile()) {
                size += file.length();
            } else {
                size += this.getDirSize(file,depth);
                if(depth==1) {
                System.out.println("Directory " + file.getName()
                        + " size = " + size / 1021 / 1024);
}
            }

        }
    }

} 
```

然后打电话

```
getDirSize(new File("c:/temp"),0) 
```

# python - 找出选择最有价值歌手的方法

> ID：13968809
> 
> 赞同：-11
> 
> 时间：2012-12-20T09:22:07.817
> 
> 标签：python, algorithm, machine-learning, artificial-intelligence

我们学生会会组织一场歌唱比赛，我校的每个人都可以通过点击网站上歌手的照片来选择他/她最喜欢的歌手，然后学生投票（点击照片）结合 10 位音乐专业人士的投票（每位评委只能对一名选手投“喜欢”或“不喜欢”），最终选出今年最有价值歌手。

问：如果我现在知道每个参赛者的点击率（1+ - 40,000+）和评委评分（0 - 10），那我可以选择哪种方式？（最好使用 Python 描述算法）

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:27:36.793

首先**将两个特征标准化为**相同的比例，简单的方法是标准化为 [0,1] 区间¹：

```
students_score = (throughput-1)/40000.0
judge_score = judge/10.0 
```

现在你有两个归一化分数，你需要决定每个分数的权重，并用它们的**线性组合**进行评估：

```
final_score = a * students_score + b * judge_score 
```

`a,b`您可以在哪里调整参数，以及`students_score ,judge_score`上面计算的标准化结果

您也可以`a,b`使用**[线性回归](http://en.wikipedia.org/wiki/Linear_regression)**选择最优值- 如果您愿意手动为参赛者样本打分

* * *

（1）有时最好用动态的东西来规范化，`max { throughputfor all }`例如，而不是硬绝对超级限制（在你的情况下为 40000）

# jquery - jQuery轮播

> ID：13968813
> 
> 赞同：1
> 
> 时间：2012-12-20T09:22:33.730
> 
> 标签：jquery, jquery-animate, jcarousel

在使用 .html() 将 HTML 移动到空 div 后，我试图让 jquery 轮播工作...

```
 $("#mydiv li a").click(function(e){
    if($(this).children('div').length > 0 ){
        var details = $(this).children("div").html(); 
        $("#info div").html(details); 
        openInfo();
    } else{
        e.preventDefault(); //prevent click
    }
}); 
```

这是将 div 动画化到页面上的函数（openInfo）。当它打开时，它上面有旋转木马，但我无法让它工作。

```
function openInfo(){
    $('#info').animate({
        height: windowHeight
    }, 900, function() {
        $("#info div").fadeIn(100);
    });
} 
```

我正在使用 jcarousel，我让它在页面的不同部分工作，所以它在其他地方工作。将html移入#info轮播后，如何让jcarousel识别它？任何帮助/建议表示赞赏。

# drupal - mysql_data_seek 不工作 drupal7 API

> ID：13968814
> 
> 赞同：0
> 
> 时间：2012-12-20T09:22:42.530
> 
> 标签：drupal, drupal-7

我需要从查询结果资源中读取两次数据。我曾尝试使用以下查询，但它不起作用。

```
$result = db_query("SELECT * FROM test");

echo '<pre>';

print_r($result->fetchAssoc());

mysql_data_seek($result, 0);

print_r($result->fetchAssoc()); 
```

只是我尝试再次通过 $result->fetchAssoc() 函数迭代结果一次我想从第一行迭代记录所以我使用了 mysql_data_seek 但它不起作用

我如何`mysql_data_seek`在drupal7中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:56:45.440

Drupal 7 uses PDO so the short answer is you *don't* use the deprecated `mysql_` family of functions anywhere. If you are using those functions, you're doing something wrong.

An equivalent of your code using the Drupal API:

```
$result = db_query("SELECT * FROM test")->fetchAllAssoc('p_key');

print_r($result[0]);
print_r($result[0]); 
```

See [this post](https://drupal.stackexchange.com/questions/34730/db-query-not-returning-anything-or-empty-drupal-7/34731#34731) for a list of the other helper methods you can use.

# ruby-on-rails - 我如何按距离以外的其他方式对 rails geocoder gem 的结果进行排序

> ID：13968816
> 
> 赞同：8
> 
> 时间：2012-12-20T09:22:46.837
> 
> 标签：ruby-on-rails, activerecord, rails-geocoder

我有这个出色的 gem [https://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)在我的应用程序中运行良好，但我需要对活动记录查询的结果进行稍微不同的排序。

例如使用 rails 控制台

```
$> Person.near('London',10) 
```

生成一个长 SQL 查询（不相关），然后

```
ORDER BY distance ASC 
```

这给出了一个从最近到最远（最多 10 英里）的人的有序列表。现在如果我这样做

```
$> Person.near('London',10).order('price_per_hour') 
```

该查询由

```
ORDER BY distance ASC, price_per_hour 
```

我仍然想要伦敦附近的所有人，但我不希望它按距离排序。反正好像也没有办法拿出来。

我无法在活动记录查询之外进行排序，因为我正在使用分页，因此需要在主查询中进行排序，然后再进行分页。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T09:29:48.793

你应该尝试[`reorder`](http://guides.rubyonrails.org/active_record_querying.html#reorder)而不是`order`：

```
Person.near('London',10).reorder('price_per_hour') 
```

`reorder`删除和替换范围创建的`order`语句`near`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T11:39:46.260

我知道为时已晚。现在`geocoder`gem 提供删除默认距离顺序

```
Person.near('London',10,order: false).order('price_per_hour') 
```

# forms - 如何保存 TWebBrowser 的内容，包括用户输入的表单值？

> ID：13968818
> 
> 赞同：6
> 
> 时间：2012-12-20T09:22:49.397
> 
> 标签：forms, delphi, save, twebbrowser

是否可以将 Webbrowser（在 Delphi 中）中加载的整个文档保存为具有新值的普通 HTML 文件（我的意思是用户在 html 表单中输入的值这个文档）？下次使用应用程序时，我需要它来阅读这个包含所有值的 HTML 文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:53:52.190

当然这是可能的！

小型演示应用程序，创建一个新的 vcl 表单应用程序，在您的表单上放置 a `TWebBrowser`， a`TButton`和 a`TMemo`并使用此代码（不要忘记`OnCreate`为 Form 和`OnClick`Button 绑定）

```
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, OleCtrls, SHDocVw, StdCtrls,mshtml, ActiveX;

type
  TForm1 = class(TForm)
    WebBrowser1: TWebBrowser;
    Button1: TButton;
    Memo1: TMemo;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

//code snagged from about.com
procedure WBLoadHTML(WebBrowser: TWebBrowser; HTMLCode: string) ;
var
   sl: TStringList;
   ms: TMemoryStream;
begin
   WebBrowser.Navigate('about:blank') ;
   while WebBrowser.ReadyState < READYSTATE_INTERACTIVE do
    Application.ProcessMessages;

   if Assigned(WebBrowser.Document) then
   begin
     sl := TStringList.Create;
     try
       ms := TMemoryStream.Create;
       try
         sl.Text := HTMLCode;
         sl.SaveToStream(ms) ;
         ms.Seek(0, 0) ;
         (WebBrowser.Document as IPersistStreamInit).Load(TStreamAdapter.Create(ms)) ;
       finally
         ms.Free;
       end;
     finally
       sl.Free;
     end;
   end;
end;

procedure TForm1.Button1Click(Sender: TObject);

var
  Doc : IHtmlDocument2;

begin
 Doc := WebBrowser1.Document as IHtmlDocument2;
 Memo1.Lines.Text := Doc.body.innerHTML;
end;

procedure TForm1.FormCreate(Sender: TObject);

var
  Html : String;
begin
 Html := 'change value of input and press Button1 to changed DOM<br/><input id="myinput" type="text" value="orgval"></input>';
 WBLoadHTML(WebBrowser1, Html);
end;

end. 
```

输出：

![在此处输入图像描述](../Images/df3d339e58942af90b4419db2cab118e.png)

**编辑**

正如**mjn**指出的那样，不会显示**密码类型输入的值。**不过，您仍然可以获得它们的价值：

将这两行添加到 Button1.Click 并更改 html

创建时：

```
Html := 'change value of input and press Button1 to changed DOM<br/><input id="myinput" type="password" value="orgval"></input>'; 
```

点击：

```
El := (Doc as IHtmlDocument3).getElementById('myinput') as IHtmlInputElement;
     Memo1.Lines.Add(Format('value of password field = %s', [El.value])) 
```

# xsd - jaxb 将 xml 解组到对象返回空列表

> ID：13968820
> 
> 赞同：1
> 
> 时间：2012-12-20T09:23:02.160
> 
> 标签：xsd, jaxb, xjc

**我正在使用 xjc 为这个 XSD 生成 Java 类：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">    
<xs:element name="message">
<xs:complexType>
  <xs:sequence maxOccurs="unbounded" minOccurs="0">
    <xs:element name="key">
      <xs:complexType>
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute type="xs:string" name="name" use="optional"/>
            <xs:attribute type="xs:string" name="type" use="optional"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
  <xs:attribute type="xs:string" name="type"/>
  <xs:attribute type="xs:string" name="routingType"/>
  <xs:attribute type="xs:string" name="computerName"/>
  <xs:attribute type="xs:string" name="userName"/>
  <xs:attribute type="xs:string" name="module"/>
</xs:complexType>
</xs:element>
</xs:schema> 
```

**我的问题是解组以下 XML：** 

```
<message type="MSG_TYPE_TEST" routingType="routed" computerName="PRO31218S82-002" userName="SYSTEM" module="myService">
    <key name="HANDLER" type="String">CB</key>
   <key name="STAND" type="String">01</key>
</message> 
```

**进行解组的 Java src 如下所示：** 

```
Unmarshaller u = JAXBContext.newInstance(Message.class).createUnmarshaller();
JAXBElement<Message> jaxbObject = u.unmarshal(source, Message.class);
Message message = jaxbObject.getValue();
System.out.print(message.getKey().size()); // list is empty 
```

message.geKey() 返回一个空列表，而 message.getType()、message.getRoutingType() 和其他属性 getter 返回预期值。
*我究竟做错了什么？*

**Generated (by xjc) Message 类如下所示：** 

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.12.20 at 09:24:38 AM CET 
//

package generated;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.XmlValue;

/**
 * <p>Java class for anonymous complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType>
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence maxOccurs="unbounded" minOccurs="0">
 *         &lt;element name="key">
 *           &lt;complexType>
 *             &lt;simpleContent>
 *               &lt;extension base="&lt;http://www.w3.org/2001/XMLSchema>string">
 *                 &lt;attribute name="name" type="{http://www.w3.org/2001/XMLSchema}string" />
 *                 &lt;attribute name="type" type="{http://www.w3.org/2001/XMLSchema}string" />
 *               &lt;/extension>
 *             &lt;/simpleContent>
 *           &lt;/complexType>
 *         &lt;/element>
 *       &lt;/sequence>
 *       &lt;attribute name="type" type="{http://www.w3.org/2001/XMLSchema}string" />
 *       &lt;attribute name="routingType" type="{http://www.w3.org/2001/XMLSchema}string" />
 *       &lt;attribute name="computerName" type="{http://www.w3.org/2001/XMLSchema}string" />
 *       &lt;attribute name="userName" type="{http://www.w3.org/2001/XMLSchema}string" />
 *       &lt;attribute name="module" type="{http://www.w3.org/2001/XMLSchema}string" />
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "key"
})
@XmlRootElement(name = "message")
public class Message {

    protected List<Message.Key> key;
    @XmlAttribute
    protected String type;
    @XmlAttribute
    protected String routingType;
    @XmlAttribute
    protected String computerName;
    @XmlAttribute
    protected String userName;
    @XmlAttribute
    protected String module;

    /**
     * Gets the value of the key property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the key property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getKey().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link Message.Key }
     * 
     * 
     */
    public List<Message.Key> getKey() {
        if (key == null) {
            key = new ArrayList<Message.Key>();
        }
        return this.key;
    }

    /**
     * Gets the value of the type property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getType() {
        return type;
    }

    /**
     * Sets the value of the type property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setType(String value) {
        this.type = value;
    }

    /**
     * Gets the value of the routingType property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getRoutingType() {
        return routingType;
    }

    /**
     * Sets the value of the routingType property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setRoutingType(String value) {
        this.routingType = value;
    }

    /**
     * Gets the value of the computerName property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getComputerName() {
        return computerName;
    }

    /**
     * Sets the value of the computerName property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setComputerName(String value) {
        this.computerName = value;
    }

    /**
     * Gets the value of the userName property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getUserName() {
        return userName;
    }

    /**
     * Sets the value of the userName property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setUserName(String value) {
        this.userName = value;
    }

    /**
     * Gets the value of the module property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getModule() {
        return module;
    }

    /**
     * Sets the value of the module property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setModule(String value) {
        this.module = value;
    }

    /**
     * <p>Java class for anonymous complex type.
     * 
     * <p>The following schema fragment specifies the expected content contained within this class.
     * 
     * <pre>
     * &lt;complexType>
     *   &lt;simpleContent>
     *     &lt;extension base="&lt;http://www.w3.org/2001/XMLSchema>string">
     *       &lt;attribute name="name" type="{http://www.w3.org/2001/XMLSchema}string" />
     *       &lt;attribute name="type" type="{http://www.w3.org/2001/XMLSchema}string" />
     *     &lt;/extension>
     *   &lt;/simpleContent>
     * &lt;/complexType>
     * </pre>
     * 
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "value"
    })
    public static class Key {

        @XmlValue
        protected String value;
        @XmlAttribute
        protected String name;
        @XmlAttribute
        protected String type;

        /**
         * Gets the value of the value property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getValue() {
            return value;
        }

        /**
         * Sets the value of the value property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setValue(String value) {
            this.value = value;
        }

        /**
         * Gets the value of the name property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getName() {
            return name;
        }

        /**
         * Sets the value of the name property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setName(String value) {
            this.name = value;
        }

        /**
         * Gets the value of the type property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getType() {
            return type;
        }

        /**
         * Sets the value of the type property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setType(String value) {
            this.type = value;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:06:54.733

根据`Message`您在问题中发布的课程，运行以下命令：

```
package generated;

import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        StreamSource source = new StreamSource("src/generated/input.xml");

        Unmarshaller u = JAXBContext.newInstance(Message.class).createUnmarshaller();
        JAXBElement<Message> jaxbObject = u.unmarshal(source, Message.class);
        Message message = jaxbObject.getValue();
        System.out.print(message.getKey().size()); // list is empty
    }

} 
```

我得到以下输出，显示正确填充的集合：

```
2 
```

* * *

当我从您发布的 XML 模式生成新模型时，我也得到了正确的输出，并且我将创建的方式更改`JAXBContext`为以下内容：

```
Unmarshaller u = JAXBContext.newInstance("generated").createUnmarshaller(); 
```

* * *

**更新**

> 我的 xsd 实际上也有一个目标命名空间（我没有发布），当从 xsd 中删除它时，我得到了你得到的结果。你有关于如何解决这个问题的提示吗？

如果您的`schema`元素如下所示：

```
<xs:schema 
    elementFormDefault="qualified" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.com/foo"> 
```

然后，您的 XML 文档必须声明该名称空间并相应地限定元素。它可能看起来像：

```
<message 
    xmlns="http://www.example.com/foo"
    type="MSG_TYPE_TEST" 
    routingType="routed" 
    computerName="PRO31218S82-002" 
    userName="SYSTEM" module="myService">
    <key name="HANDLER" type="String">CB</key>
    <key name="STAND" type="String">01</key>
 </message> 
```

然后，由于您从 XML 模式生成模型，我建议您`JAXBContext`在生成的包名称上创建您的模型。这将确保从类`@XmlSchema`上的注释中获取模式元数据`package-info`。

```
Unmarshaller u = JAXBContext.newInstance("generated").createUnmarshaller(); 
```

# c# - 使用 DataTextField 和 DataValueField 从另一个列表复制下拉列表

> ID：13968822
> 
> 赞同：0
> 
> 时间：2012-12-20T09:23:06.897
> 
> 标签：c#, asp.net, drop-down-menu

我创建了一个数据层方法

```
 public static List<SegmentBL> GetAllSegment(string SortDirection, string SortExpression)
    {

        var ds = DBHelper.GetDatabase().ExecuteDataSet("UDS_Select_SegmentMaster");

        var val = ds.Tables[0].AsEnumerable().Select(r => new SegmentBL
        {
            _SegmentId = Convert.ToInt32(r[0].ToString()),
            _SegmentName = r[1].ToString()
        });
        List<SegmentBL> list = val.ToList();
        return list;
    } 
```

从中我创建了一个业务逻辑方法

```
public DropDownList GetAll(string SortDirection, string SortExpression)
    {
        var list = new DropDownList();
        list.DataSource = SegmentDL.GetAllSegment(SortDirection, SortExpression);
        list.DataTextField = "_SegmentName";
        list.DataValueField = "_SegmentID";
        list.DataBind();
        ListItem item = new ListItem();
        item.Text = "--Select--";
        item.Value = "0";
        list.Items.Insert(0, item);
        return list;
    } 
```

最后是用于填充下拉列表的表示层方法

```
 private void FillSegment()
    {
        ddlSegment.DataSource = seg.GetAll(General.SortAscending,"SegmentID").Items;

        ddlSegment.DataBind();
        ddlSegment.DataTextField = "_SegmentName";
        ddlSegment.DataValueField = "_SegmentID";
    } 
```

它工作正常，除了 DataTextField 和 DataValueField 没有正确分配。目前 DataTextField 和 DataValueField 相同。我在上面的代码中犯了什么错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:25:19.157

在元素被添加到数据源绑定之前，您正在绑定元素被添加之后。您可以`pass`下拉列表到您的方法，而不是在方法中创建本地下拉列表`GetAll`。

```
public DropDownList GetAll(string SortDirection, string SortExpression, DropDownList list)
{
  //  var list = new DropDownList(); //Remove this line
    list.DataSource = SegmentDL.GetAllSegment(SortDirection, SortExpression);
    list.DataTextField = "_SegmentName";
    list.DataValueField = "_SegmentID";      
    ListItem item = new ListItem();
    item.Text = "--Select--";
    item.Value = "0";
    list.Items.Insert(0, item);
    list.DataBind();
    return list;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:27:51.277

移动 Databind() 行。

```
private void FillSegment()
    {
        ddlSegment.DataSource = seg.GetAll(General.SortAscending,"SegmentID").Items;

        ddlSegment.DataTextField = "_SegmentName";
        ddlSegment.DataValueField = "_SegmentID";

        ddlSegment.DataBind(); //After and not before defining the fields value
    } 
```

# java - STS+Roo 基础知识：自定义方法

> ID：13968825
> 
> 赞同：0
> 
> 时间：2012-12-20T09:23:14.790
> 
> 标签：java, aspectj, spring-roo

我从数据库生成一个 Roo 项目并尝试获得一些使用 roo 的经验。

当我刚刚保存一个新的“用户”时，我想发送一封电子邮件，所以我进入

```
UserController_roo_Controller.aj 
```

并修改方面的创建方法。不幸的是，roo 有时会覆盖这个 roo 控制器。

我想这是错误的第四类编辑。那么我在哪里放置该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:47:20.943

你是在编辑aj文件还是java文件？Roo 将替换 AspectJ (aj) 文件中的方法，但不会替换 java 文件中的方法。

如果是这种情况，将 create 方法从 aj 类移动到 java 类，Roo 将停止自动生成该方法

# php - 如何使单选按钮返回布尔值真/假而不是开/关

> ID：13968827
> 
> 赞同：11
> 
> 时间：2012-12-20T09:23:21.593
> 
> 标签：php, arrays, radio-button

我希望我的单选按钮返回一个布尔值 true 或 false instade of on/off

所以我在输入值中传递真/假：

```
<label>Male
   <input type="radio" name="IsMale" value="true" />
</label> 
<label>Female
   <input type="radio" name="IsMale" value="false" />
</label> 
```

但它以文本格式返回真/假。请高手，我怎样才能以布尔格式获得它们？

更多细节：事实上，我需要将我的 $_POST 数组存储在 file.txt 中，对于我的单选按钮，我需要存储例如：

```
array ( "IsMale" => true ); 
```

并不是 ：

```
array ( "IsMale" => "true" ); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T09:25:56.220

您必须检查数据并对其进行修改。

```
if(isset($_POST['SubmitButton'])) { 

  $_POST['IsMale'] = $_POST['IsMale'] == 'true' ? true : false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:29:26.717

您不能使单选按钮或任何其他表单元素直接提交 PHP 真实值，只能提交诸如“true”之类的字符串。

要解决您的问题，您必须更改 PHP 文件中 $_POST 项的值。

```
//Form has been submitted
if(isset($_POST['submit'])) {

    //Radio button has been set to "true"
    if(isset($_POST['IsMale']) && $_POST['IsMale'] == 'true') $_POST['IsMale'] = TRUE;

    //Radio button has been set to "false" or a value was not selected
    else $_POST['IsMale'] = FALSE;

} 
```

**编辑：** Ben 提供了一个使用三元运算符的功能解决方案，这是一种更短的替代方案。上面的例子可以准确地阐明过程中发生的事情（以更详细的形式）。

# javascript - OnClick 绕过表单提交

> ID：13968836
> 
> 赞同：-1
> 
> 时间：2012-12-20T09:23:44.467
> 
> 标签：javascript, jquery, forms, submit, jquery-events

我有一个这样的表格：

```
<form id= 'lol' name = 'whyyyyy'>
<input name='dumbo'>
<input name='idiot'>

<input type='submit' value='I have no idea why its like this' onclick='document.lol.submit()'>
</form> 
```

现在，我想阻止实际发送表单，但到目前为止所有尝试都失败了。

我当前的代码如下所示：

```
$(document).ready(function(){
    $('form[name="whyyyyy"]').submit(function(e){
       e.preventDefault();
        alert(1);
        return false;
     });
}) 
```

但内联提交命令似乎绕过了 jQuery 函数。

有人可以把光切碎吗？

编辑：

1.  表格不能更改，我无权更改。
2.  点击代码应该触发提交功能，其中包含一些复杂的代码验证墙。所以我必须缓存它触发的提交动作，但我现在不能这样做。
3.  提交功能应在发送时触发，但不会被触发。

这是 jfiddle 中的代码示例。正如你所看到的，它被jQuery过去了......

[http://jsfiddle.net/StCPp/4/](http://jsfiddle.net/StCPp/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:26:33.927

如果您不需要提交按钮，为什么不使用常规按钮

```
<input type="button" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:44:47.617

删除onclick

```
$('input[type=submit]').attr('onclick','') 
```

然后将点击事件添加到功能就绪

```
 $('input[type=submit]').on('click',function(){
      //do your event
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:47:00.290

好的，如果我做对了，您可以删除内联事件处理程序`onclick`并添加您的自定义处理程序（您可以在其中进行验证和所有必要的步骤）：

```
$(document).ready(function() {

   var $submit_button = $('input[type=submit]');

   $submit_button.removeAttr('onclick');

   $submit_button.click(function() {
     //TODO: implement your custom handler
     //execute validation etc.
   });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:28:58.603

Just use a normal button instead of a submit.

If you want to bypass a submit button you can make the class of the button cancel.

```
 <input type='submit' class='cancel' value='i have no idea why he done it like this' onclick='document.lol.submit()'> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:27:36.660

```
<input type='button' value='i have no idea why he done it like this' onclick='document.getElementById('lol').submit()'> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T09:31:14.703

在您的附加 JavaScript 中，删除内联 onclick 事件并将其替换为您想要的任何内容。问题解决了。

您也可以完全删除他的按钮并用您选择的一个替换它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T09:31:48.380

删除该`document.lol.submit`功能。这样，您就可以为所欲为。

```
// Magic line
delete document.lol.submit;

// Or
$('form[name="whyyyyy"] input[type=submit]').attr('onclick', '');

$(document).ready(function(){
    $('form[name="whyyyyy"]').submit(function(e){
        e.preventDefault();
        alert(1);
        return false;
    });
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-20T09:50:20.537

您不一定需要使用 jquery 来实现这一点。你可以使用标准的javascript。

```
$(document).ready(function(){

    document.whyyyyy.submit = function(e){

        alert(1);
        return false; 
};
}); 
```

此示例有效，但您可能遇到了 jquery 错误。

# asp.net - 对通过链接表连接的多个表的 Linq 查询

> ID：13968839
> 
> 赞同：0
> 
> 时间：2012-12-20T09:23:56.587
> 
> 标签：asp.net, vb.net, linq, subquery

我是linq的新手。我有一张二手车表，可以在多个网站上发布。在此之上，每辆车都有多个图像。网站和图像通过链接表连接。

可推车

*   车牌
*   制作
*   模型

链接表网站

*   车牌
*   网站ID

网站表

*   网站ID
*   网站名称

链接表图像

*   车牌
*   图片ID

图像标签

*   图片ID
*   位置路径
*   替代文字

...

我知道如何执行表的连接，但基于链接表的选择不起作用

我现在拥有的

```
 Return From link In AixamReader.Link_Cars_Websites
        Join car In AixamReader.Cars_SecondHandCars 
                On link.SecondHandCarID Equals car.SecondHandCarID
        From imglink In AixamReader.Link_SecondHandCars_Images 
                Where imglink.SecondHandCarID = car.SecondHandCarID
        Join webimg In AixamReader.WebSite_Images 
                On imglink.ImageID Equals webimg.ImageID
                Where link.WebsiteID = pWebsiteID 
                And car.OnWebsite = True
       Select car, webimg 
```

如何为特定网站选择每辆车，然后为每辆车选择第一张图片。

谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:55:02.180

这应该有帮助

```
From webSiteCarLink In AixamReader.Link_Cars_Websites

Join car in AixamReader.SecondHandCars
On webSiteCarLink.CarID Equals car.CarID

Join carImageLink In AixamReader.Link_SecondHandCars_Images
On webSiteCarLink.CarID Equals carImageLink.CarID

Join image In AixamReader.WebSite_Images
On carImageLink.ImageID Equals image.ImageID

Where webSiteCarLink.WebsiteID = pWebsiteID 
And car.OnWebsite = True

Group image By Key = car Into imageGroup

Select imageGroup.Key, imageGroup.FirstOrDefault(); 
```

# vb.net - 在事件中向父级发送值然后关闭子窗体

> ID：13968842
> 
> 赞同：0
> 
> 时间：2012-12-20T09:24:01.127
> 
> 标签：vb.net, winforms

我有一个父表单，其中包含一个从数据库填充的组合框，用户可以从中选择。组合框中的最后一个值是“添加新值”，如果用户选择此项，则会打开一个子表单供用户向数据库添加新值。我有一个按钮按下事件来将此值添加到数据库中，将新值发送`return value`给父级并关闭表单。然后父级应该从它的组合框中选择新值并等待用户执行另一个操作。

但是，将表单发送`return value`给父级并关闭表单的代码无法正常工作。我`hide`是孩子，然后与父母一起调用一个函数来访问`return value`. 此时子窗体和代码在运行另一个or`shows`之前停止。`hide``close`

我该如何解决这个问题（下面的代码）？

父组合框事件：

```
Private Sub cmbLocations_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles cmbLocations.SelectedIndexChanged
    If Not cmbLocations.SelectedIndex = -1 Then
        If cmbLocations.SelectedIndex = cmbLocations.Items.Count - 1 Then
            If diaAddLocation.IsAccessible = False Then diaAddLocation.Activate()
            diaAddLocation.RequestSender = Me
            diaAddLocation.ShowDialog()
            FillLocations()
            cmbLocations.SelectedIndex = LocationFromLocationName(diaAddLocation.formresult)
            diaAddLocation.Close()
            diaAddLocation.Dispose()
        Else
            bttYes.Enabled = True
        End If
    End If
End Sub 
```

子按钮按下和返回值功能

```
Public Sub bttAddLOCtoDatabase_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bttAddLOCtoDatabase.Click

    Dim LocationToBeAdded As String
    LocationToBeAdded = "'" & TextBox1.Text & "'"
    AddLocation("'" & textbox1.Text & "'")
    FormResult = textbox1.Text
    GetLocations()
    frmFieldMaster.InitialiseNewParameter()
    Me.Hide()
End Sub

Public Function Result() As String
    Return FormResult
End Function 
```

编辑：

实现了史蒂夫解决方案的代码：

```
Public Sub bttAddLOCtoDatabase_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bttAddLOCtoDatabase.Click

    Dim LocationToBeAdded As String
    LocationToBeAdded = "'" & TextBox1.Text & "'"
    AddLocation("'" & textbox1.Text & "'")
    FormResult = textbox1.Text
    GetLocations()
    frmFieldMaster.InitialiseNewParameter()
    DialogResult = Windows.Forms.DialogResult.OK
    'me.Hide()

End Sub

Public Function Result() As String
    Return FormResult
    Me.Close()
End Function

Private Sub cmbLocations_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles cmbLocations.SelectedIndexChanged
    Dim ValueTaken As Boolean = False
    If Not cmbLocations.SelectedIndex = -1 Then
        If cmbLocations.SelectedIndex = cmbLocations.Items.Count - 1 Then
            Using diaaddlocation = New diaAddLocation
                diaaddlocation.requestsender = Me
                If DialogResult.OK = diaaddlocation.showdialog Then
                    FillLocations()
                    cmbLocations.SelectedIndex = LocationFromLocationName(diaaddlocation.result)
                    diaaddlocation.close()
                ElseIf DialogResult.Cancel = diaaddlocation.showdialog Then
                    cmbLocations.SelectedIndex = -1
                End If
            End Using
        Else
            bttYes.Enabled = True
        End If
    End If
End Sub 
```

当我运行代码时，它会进入`IF DialogResult.OK...`并打开孩子。然后当我关闭孩子时，父母会运行接下来的两行代码并从孩子那里得到结果。在此之后，父母`IF DialogResult.OK...`再次运行线路并在孩子打开的情况下停止。代码永远不会到达该`diaaddlocation.close`行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:45:44.933

你不需要所有这些。你可以试试这样的

```
 If cmbLocations.SelectedIndex = cmbLocations.Items.Count - 1 Then
        Using diaAddLocation = new diaAddLocation()
             diaAddLocation.RequestSender = Me
             if DialogResult.OK = diaAddLocation.ShowDialog() then
                 FillLocations()
                 cmbLocations.SelectedIndex = LocationFromLocationName(diaAddLocation.formresult)
             End If
        End Using
   Else
       ..... 
```

这需要设置为的`DialogResult`属性和`bttAddLOCtoDatabase`设置为`DialogResult.OK`的子表单`AcceptButton`属性`bttAddLOCtoDatabase`。现在您可以删除`bttAddLOCtoDatabase_Click`方法内的 Hide() 调用

这是有效的，因为在您不退出 Using 语句之前，您的子表单仍然可以读取其属性（结果）

编辑：与主要问题无关，但这些行是错误的：

```
 ElseIf DialogResult.Cancel = diaaddlocation.showdialog Then
       cmbLocations.SelectedIndex = -1 
```

你应该和

```
 Using diaAddLocation = new diaAddLocation()
      diaAddLocation.RequestSender = Me
      Dim dr = diaAddLocation.ShowDialog()
      if dr = DialogResult.OK then
          ....
      else if dr = DialogResult.Cancel then
          ....
      end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:49:19.300

我不明白是什么问题，但如果你没有得到“FormResult”的价值</p>

如果您关闭并不重要，但最好在关闭之前设置 DialogResult，因为您将其显示为对话框（showdialog）

验证 diaAddLocation 是您的窗口的实例，而不是直接的窗口类如果您的表单名称是 frmdiaAddLocation，那么不要像这样使用它

```
frmdiaAddLocation.showdialog 
```

像使用它一样

```
Dim diaAddLocation AS  frmdiaAddLocation = New frmdiaAddLocation()
diaAddLocation.ShowDialog() 
```

只有这样使用才能为您提供结果值

# php - Codeigniter 查找用户是否登录

> ID：13968843
> 
> 赞同：0
> 
> 时间：2012-12-20T09:24:10.523
> 
> 标签：php, codeigniter, lamp

在 codeigniter 中，我试图包含一个 Logger 库，在下面的代码中，我需要检查用户是否已登录，如果是，请找到他的用户 ID。

```
 <?php
    class Logger {

private $CI;

public function __construct() {
    $this->CI =& get_instance();
}

public function request_logger() {
    $uri = $this->CI->uri->uri_string();
    $ip="";
    $userID="";
    //$ip = ip2long($_SERVER['REMOTE_ADDR']);
    $ip = $_SERVER['REMOTE_ADDR'];
        $params = trim(print_r($this->CI->input->post(), TRUE));

    log_message('info', '==============');
    log_message('info', 'URI: ' . $uri);
    log_message('info', '--------------');
    log_message('info', 'PARAMS:' . $params);
    log_message('info', 'IP:' . $ip);
    log_message('info', '==============');
    //if ($this->ion_auth->logged_in())
    if(isset($_POST['user_id']))
    {
        log_message('info', '<== Inside loggedin loop ==>');
        $userID=$this->input->post('user_id');

     }
        log_message('info', 'USERID' . $userID);

}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:33:02.823

您可以使用 codeigniter Session 类。您可以使用用户数据创建新会话，就像这样

```
$newdata = array(
                   'username'  => 'johndoe',
                   'email'     => 'johndoe@some-site.com',
                   'logged_in' => TRUE
               );

$this->session->set_userdata($newdata); 
```

您可以通过以下方式访问这些数据，

```
$userId = $this->session->userdata('userid'); 
```

访问此用户指南[Codeignitor 会话](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

# java - 如何使用spring集成调用restful webservice？

> ID：13968848
> 
> 赞同：3
> 
> 时间：2012-12-20T09:24:13.233
> 
> 标签：java, spring, spring-integration

我是春季集成的新手。要进行休息网络服务调用，我有以下配置。

```
<int-http:outbound-gateway
    url="#{appProperties['rootUrl']}#{appProperties['myMethod']}"
    request-channel="myRequestChannel" reply-channel="myResponseChannel" >
</int-http:outbound-gateway> 
```

但我还应该传递身份验证信息（用户名和密码）来进行网络服务调用。我如何发送身份验证信息`http:outbound-gateway`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:44:02.350

`request-factory`您必须使用自定义 ClientHttpRequestFactory 并使用该属性将其提供给适配器。

将`CommonsClientHttpRequestFactory`与 custom 一起使用`HttpClient`，或子类化`SimpleClientHttpRequestFactory`并覆盖该`prepareConnection`方法以添加凭据。

谷歌搜索“resttemplate 基本身份验证”将提供几个示例，包括[http://blog.mitemitreski.com/2012/03/basic-authentication-with-resttemplate.html](http://blog.mitemitreski.com/2012/03/basic-authentication-with-resttemplate.html)

# php - 从邻接列表类别创建 html 表

> ID：13968851
> 
> 赞同：0
> 
> 时间：2012-12-20T09:24:17.350
> 
> 标签：php, html

我正在使用此代码片段从 mySql db 获取所有类别项目并列出它们。如您所料，有主要类别及其子类别，例如类别 A 及其子/后代，然后是类别 B 及其子/后代等。

现在我喜欢为永远的类别创建一个 HTML 表格——比如说有 4 个列——并将每个类别及其子类别放入一个表格中，例如：

更新

```
 Html Table 1

  Category A    Child3      Child6   Child11
  Child1        Child4      Child7   Child12
  Child 1.1     Child5      Child8   Child13
  Child 1.2     Child 5.1   Child9
  Child2        Child 5.2   Child10 
```

这是我用来获取类别和子项列表的代码片段。它正确列出了所有类别和子类别。现在我喜欢在带有列的 HTML 表格中显示列表。我在这里卡住了。我怎样才能做到这一点？

```
 $categoryArr = Array();

        while($categoryRow = mysql_fetch_array($category_query_result)){
            $categoryArr[] = array('parentid'=>$categoryRow['parent_id'],
            'childof'=>$categoryRow['child_of'],
            'categorytitle'=>$categoryRow['category_title'],
            'categoryfilename'=>$categoryRow['category_file_name'],
            'level'=>$categoryRow['level_num']);
        }

        function display_categories($Arr,$thisparent,$level){
            foreach ($Arr AS $key => $catNode ){
                if($catNode['childof']=="$thisparent"){
                    echo "" .$catNode['categorytitle'] ."<br>";

                      display_categories($Arr, $catNode['parentid'] ,$level+1);

                } 

            }

        }

        display_categories($categoryArr,0,1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:09:39.287

**更新：**

```
$categoryArr=array(array("parentid"=>1,"title"=>"Father 1","childof"=>0),array("parentid"=>2,"title"=>"Son 1.2","childof"=>1),array("parentid"=>3,"title"=>"Grandson 1.2.3","childof"=>2),array("parentid"=>4,"title"=>"Son 1.4","childof"=>1),array("parentid"=>5,"title"=>"Son 1.5","childof"=>1),array("parentid"=>6,"title"=>"Son 1.6","childof"=>1),array("parentid"=>7,"title"=>"Grandson 1.5.7","childof"=>5),array("parentid"=>8,"title"=>"Father 8","childof"=>0),array("parentid"=>9,"title"=>"Son 8.9","childof"=>8),array("parentid"=>10,"title"=>"Grandgrandson 1.2.3.10","childof"=>3));
function rebuild($data,$find)
{
    $cache=array_filter($data,create_function('$n','return $n["childof"]=='.$find.';'));
    $rt=array();
    foreach($cache as $node)
    {
        $rt[]=$node;
        $rt=array_merge($rt,rebuild($data,$node["parentid"]));
    }
    return $rt;
}
$cache=array_filter($categoryArr,function($n){return $n["childof"]==0;});
$base=array();
foreach($cache as $root)
{
    $base[]=array_merge(array($root),rebuild($categoryArr,$root["parentid"]));
}
$xml=new DOMDocument("1.0","UTF-8");
$xml->formatOutput=true; // just to debug
$root=$xml->createElement("root");
$xml->appendChild($root);
foreach($base as $list)
{
    $table=$xml->createElement("table");
    $root->appendChild($table);
    $rows=ceil(count($list)/4);//change 4 to whatever column you need
    foreach(range(1,$rows) as $idx)
    {
        $tr=$xml->createElement("tr");
        $table->appendChild($tr);
    }
    $cur=0;
    foreach($list as $node)
    {
        if($cur>=$rows) $cur=0;
        $td=$xml->createElement("td");
        $td->appendChild($xml->createTextNode($node["title"]));
        $table->getElementsByTagName("tr")->item($cur)->appendChild($td);
        $cur++;
    }
}
echo $xml->saveXML(); 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <table>
    <tr>
      <td>Father 1</td>
      <td>Grandson 1.2.3</td>
      <td>Son 1.4</td>
      <td>Grandson 1.5.7</td>
    </tr>
    <tr>
      <td>Son 1.2</td>
      <td>Grandgrandson 1.2.3.10</td>
      <td>Son 1.5</td>
      <td>Son 1.6</td>
    </tr>
  </table>
  <table>
    <tr>
      <td>Father 8</td>
      <td>Son 8.9</td>
    </tr>
  </table>
</root> 
```

**PS**使用`DOMDocument`不是必须的；由于我们已经知道每个表格有多少项目，因此可以只计算每个表格单元格上的位置并直接输出它，但对我来说，`DOMDocument`更懒惰:)

* * *

**第一次尝试：**

可能不是一个优雅的解决方案，但它应该可以工作：

```
$categoryArr=array(array("parentid"=>1,"title"=>"Father","childof"=>0),array("parentid"=>2,"title"=>"Son 2","childof"=>1),array("parentid"=>3,"title"=>"Grandson 2.3","childof"=>2),array("parentid"=>4,"title"=>"Son 4","childof"=>1),array("parentid"=>5,"title"=>"Son 5","childof"=>1),array("parentid"=>6,"title"=>"Son 6","childof"=>1),array("parentid"=>7,"title"=>"Grandson 5.6","childof"=>5));
$xml=new DOMDocument("1.0","UTF-8");
$xml->formatOutput=true; // just to debug
$root=$xml->createElement("table");
$xml->appendChild($root);
foreach(range(1,ceil(count($categoryArr)/4)) as $idx) // change 4 to whatever column you need
{
    $tr=$xml->createElement("tr");
    $root->appendChild($tr);
}
function addNode(&$xml,$data,$currID,&$currRow)
{
    if($currRow>=$xml->getElementsByTagName("tr")->length) $currRow=0;
    $cache=array_filter($data,create_function('$n','return $n["parentid"]=='.$currID.';'));
    if(count($cache)==1)
    {
        $td=$xml->createElement("td");
        $cache=array_pop($cache);
        $td->appendChild($xml->createTextNode($cache["title"]));
        $xml->getElementsByTagName("tr")->item($currRow)->appendChild($td);
        $currRow+=1;
    }
    $cache=array_filter($data,create_function('$n','return $n["childof"]=='.$currID.";"));
    foreach($cache as $node)
    {
        addNode($xml,$data,$node["parentid"],$currRow);
    }
}
$cur=0;
addNode($xml,$categoryArr,0,$cur);
echo $xml->saveXML(); 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<table>
  <tr>
    <td>Father</td>
    <td>Grandson 2.3</td>
    <td>Son 5</td>
    <td>Son 6</td>
  </tr>
  <tr>
    <td>Son 2</td>
    <td>Son 4</td>
    <td>Grandson 5.6</td>
  </tr>
</table> 
```

没有要测试的“真实”数据，所以如果有问题请告诉我。

# node.js - Powershell 执行 node.js 脚本并捕获输出

> ID：13968852
> 
> 赞同：0
> 
> 时间：2012-12-20T09:24:18.823
> 
> 标签：node.js, powershell

我在 Powershell 中有一些奇怪的情况。当我运行时：

```
PS> node.exe [PATH_TO_GRUNT]\grunt 
```

我得到了完整的输出（30-40 行），但是当我运行时：

```
PS> Write-Host(node.exe [PATH_TO_GRUNT]\grunt) 
```

我只给我一行。这有什么问题？我尝试添加 --no-color, 2>&1 选项，但它们根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:38:13.273

尝试使用 -Separator 标志：

```
PS> Write-Host(node.exe [PATH_TO_GRUNT]\grunt) -Separator `n 
```

# mysql - SQLAlchemy InvalidRequestError('Transaction XXX is not on the active transaction list) 是如何发生的？

> ID：13968854
> 
> 赞同：1
> 
> 时间：2012-12-20T09:24:28.677
> 
> 标签：mysql, session, sqlalchemy

最近我有一个 SQLAlchemy InvalidRequestError。错误日志显示：

```
InvalidRequestError: Transaction <sqlalchemy.orm.session.SessionTransaction object at
0x106830dd0> is not on the active transaction list 
```

什么情况下会报这个错误？？？

- - -编辑 - -

```
# the following two line actually in my decorator
s = Session()
s.add(model1)

# refer to <http://techspot.zzzeek.org/2012/01/11/django-style-database-routers-in-sqlalchemy/>
s2 = Session().using_bind('master')

model2 = s2.query(Model2).with_lockmode('update').get(1)
model2.somecolumn = 'new'

s2.commit() 
```

引发此异常

-----编辑2 -----

```
s = Session().using_bind('master')

model = Model(user_id=123456)
s.add(model)
s.flush() 
# here, raise the exception. 
# I add log in get_bind() of RoutingSession. when doing 'flush', the _name is None, and it returns engines['slave'].  
#If I use commit() instead of flush(), then it commits successfully 
```

我将 using_bind 方法更改如下，它运行良好。

```
def using_bind(self, name):
    self._name = name
    return self 
```

上一个 RoutingSession：

```
class RoutingSession(Session):
    _name = None                                                                                                                                                

    def get_bind(self, mapper=None, clause=None):   
        logger.info(self._name)         
        if self._name:                                                                           
            return engines[self._name]                                          
        elif self._flushing:                                                                                                                                                                                                                  
            logger.info('master')                                                  
            return engines['master']                                               
        else:                                                                      
            logger.info('slave')    
            return engines['slave']

    def using_bind(self, name):                              
        s = RoutingSession()                                                      
        vars(s).update(vars(self))   
        s._name = name                                                                    
        return s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:37:44.850

这是一个永远不应该发生的内部断言。如果您可能不正确地以并发方式使用 Session 或操纵其内部，那么至少没有完整的堆栈跟踪就无法回答这个问题。如果我操作与 Session 对象有关的私有方法或状态，我只能显示引发的异常。

就是这样：

```
from sqlalchemy.orm import Session

s = Session()
s2 = Session()

t = s.transaction
t2 = s2.transaction

s2.transaction = t   # nonsensical assignment of the SessionTransaction
                     # from one Session to also be referred to by another,
                     # corrupts the transaction chain by leaving out "t2".
                     # ".transaction" should never be assigned to on the outside

t2.rollback()  # triggers the assertion case 
```

基本上，上述情况永远不会发生，因为您不应该分配给“.transaction”。这是一个只读属性。

# java - 不允许使用字符串“--”，java 项目

> ID：13968861
> 
> 赞同：2
> 
> 时间：2012-12-20T09:24:59.043
> 
> 标签：java, xml, string, parsing

> **可能重复：**
> [解决“注释中不允许使用字符串“--”。例外？](https://stackoverflow.com/questions/10155940/cure-for-the-string-is-not-permitted-within-comments-exception)

我有一个 Java 项目来解析和编辑 XML 文件。当我尝试运行该项目时，我收到以下日志消息：

```
注释中不允许使用字符串“--”。
线程“main”org.xml.sax.SAXParseException 中的异常：注释中不允许使用字符串“--”。
    在 com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
...

```

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T09:27:46.827

在不进一步了解您的代码的情况下：

正如你所说，有错误。在您的 XML 工作表中的某处，您有一条注释，其中包含 a `--`。例如这样的：

```
<root>
  <!-- my comment with -- in it -->
</root> 
```

这不是格式良好的 XML。`--`不允许在评论内。解析器将无法检测到注释的结尾。

# jquery - MVC 4 在不使用 JQuery 的情况下验证复选框

> ID：13968870
> 
> 赞同：1
> 
> 时间：2012-12-20T09:25:29.877
> 
> 标签：jquery, checkbox, asp.net-mvc-4, model-validation

我目前正在尝试验证付款表单上的条款和条件复选框，以便在选中条款和条件复选框之前不会提交表单。

我正在创建的特定表单仅供一组使用 IE6 的客户使用（因此我无法使用 JQuery 进行验证）。

我已经使用所需的数据注释修饰了条款和条件 bool 模型值，但未显示所需的错误消息（与使用字符串、十进制或 int 等的其他值不同。

我已经设法使用此代码显示错误：

```
if (ModelState.IsValid && model.TermsAndConditions)
            {
                ConnectAndRedirectoToProtx(model);
            }
            else
            {
                //store locally and sort later
                TempData["message"] = "You must first read through and agree to the terms and conditions";
            } 
```

此代码位于控制器的 HttpPost Index ActionResult 中，然后我在视图中呈现如下：

```
div style="color: red;font-weight:bold;">@TempData["message"]</div> 
```

使用此 cpde 的问题是它仅显示所有其他字段是否正确，是否可以不使用 JQuery 显示此错误消息以及单击提交按钮后立即显示的其他错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:42:15.250

所需的数据注释标记在您的情况下将不起作用，因为即使未选中的复选框也会将错误值传递给模型。如果不支持 JQuery，您可以使用 Java Script（直到这也被浏览器阻止。）访问以下链接以获得帮助。

[http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

此外，您可以更改控制器功能，如下所示，仅针对这种情况跟踪错误

```
if(!model.TermsAndConditions)
{
    TempData["message"] = "You must first read through and agree to the terms and conditions";
}

if (ModelState.IsValid)
        {
            ConnectAndRedirectoToProtx(model);
        }
        else
        {
            //store locally and sort later
            TempData["message"] = "Invalid Model or some other error message......";
        } 
```

# java - 获取蓝牙设备服务安卓

> ID：13968874
> 
> 赞同：0
> 
> 时间：2012-12-20T09:25:46.483
> 
> 标签：java, android, bluetooth, android-4.0-ice-cream-sandwich

有什么方法可以获取 BluetoothDevice 功能列表吗？即）蓝牙设备是设备，系统，打印机或扫描仪等。我想通过BluetoothDevice从特定设备获取服务。是否有任何获得设备服务的意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:35:14.860

> BluetoothClass 可用作粗略描述设备的提示（例如在 UI 中显示图标），但不能可靠地描述设备实际支持的蓝牙配置文件或服务

要从设备获得支持的服务，我们必须使用

```
android.bluetooth.BluetoothClass.Service 
```

# vxworks - 进入柜台一次

> ID：13968875
> 
> 赞同：0
> 
> 时间：2012-12-20T09:25:46.400
> 
> 标签：vxworks

我想知道是否有可能获得用于 TickCounter 中断的计数器的值。

目的：

我想知道当前的 Tick 和这个寄存器的值。

这样我就可以评估了。

例如，

滴答声是 12，寄存器是 1526。所以我可以实现一个虚拟时钟，它使用滴答计数器（基数 1ms）和寄存器，这样我就有一个更精确的时钟。

编辑：

我找到了这个实现

```
> #ifndef CERT /*******************************************************************************
> *
> * tickGet - get the value of the kernel's tick counter
> *
> * This routine returns the current value of the tick counter.
> * This value is set to zero at startup, incremented by tickAnnounce(),
> * and can be changed using tickSet().
> *
> * RETURNS: The most recent tickSet() value, plus all tickAnnounce() calls since.
> *
> * SEE ALSO: tickSet(), tickAnnounce()
> * 
> * INTERNAL
> * There should be no need to lock interrupts on this one; the compiler should
> * only generate a read from one half of the UINT64 which means that the read
> * can never be interrupted.
> */
> 
> ULONG tickGet (void)
>     {
>     return (ULONG) (vxAbsTicks & 0xFFFFFFFFull);
>     }
> #endif /* !CERT */ 
```

但我无法访问该`vxAbsTicks`值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:04:48.350

简单而正确的答案是只调用tickGet()。

# java - 从 JPanel 添加/删除

> ID：13968876
> 
> 赞同：2
> 
> 时间：2012-12-20T09:25:49.687
> 
> 标签：java, swing, jpanel, jlabel, keylistener

我正在尝试制作一个基本地图，按下按钮移动一个角色。我正在使用 Netbeans，到目前为止一切顺利！除了尝试从 JPanel 中删除 JLabel，然后向其中添加新的 JLabel。

这是我的完整代码：

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class startMap extends JFrame {

public int locX = 1;
public int locY = 1;
ImageIcon tile = new ImageIcon("src/tile.png");
JLabel tileLabel = new JLabel(tile);
ImageIcon berry = new ImageIcon("src/berry.png");
JLabel berryLabel = new JLabel(berry);
ImageIcon blank = new ImageIcon("src/blank.png");
JLabel blankLabel = new JLabel(blank);
JLabel testL = new JLabel("LOL");
JPanel[][] map = new JPanel[7][7];

public startMap() {
    setBackground(Color.BLACK);
    setFocusable(true);
    keyHandler kh = new keyHandler();
    addKeyListener(kh);
    mapGUI();
}

public void mapGUI() {
    JPanel mainP = new JPanel();
    mainP.setBackground(Color.BLACK);
    mainP.setLayout(new FlowLayout());
    for (int x = 0; x < 7; x++) {
        for (int i = 0; i < 7; i++) {
            map[x][i] = new JPanel();
            System.out.println("1");
            blankLabel = new JLabel(blank);
            map[x][i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
            map[x][i].add(blankLabel);
        }
    }
    for (int x = 1; x < 6; x++) {
        for (int i = 1; i < 6; i++) {
            System.out.println("2");
            map[x][i].removeAll();
            revalidate();
            repaint();
            tileLabel = new JLabel(tile);
            map[x][i].add(tileLabel);
            revalidate();
            repaint();
        }
    }
    System.out.println("3");
    map[locX][locY].removeAll();
    revalidate();
    repaint();
    map[locX][locY].add(berryLabel);
    revalidate();
    repaint();
    for (int x = 0; x < 7; x++) {
        for (int i = 0; i < 7; i++) {
            mainP.add(map[x][i]);
        }
    }

    add(mainP);
}

@Override
public void paint(Graphics g) {
    super.paint(g);

}

private class keyHandler extends KeyAdapter {

    @Override
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            locY+=1;
            map[locX][locY].removeAll();
            revalidate();
            repaint();
            map[locX][locY].add(berryLabel);
            revalidate();
            repaint();

        }

    }
} 
```

}

这是用户单击“右”时正方形的变化。

这是 KeyAdapter 代码：

```
private class keyHandler extends KeyAdapter {

    @Override
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            locY+=1;
            map[locX][locY].removeAll();
            revalidate();
            repaint();
            map[locX][locY].add(berryLabel);
            revalidate();
            repaint();

        }

    }} 
```

注意：系统输出只是我用来检查什么时候被调用的调试方法。

所以当我运行它看起来像这样

向右移动并重新验证 $ repaint：

![在此处输入图像描述](../Images/ecbc476f95074a4fee9f97637c143461.png)

为什么位于 1,1 的盒子会变成灰色？

帮助弄清楚如何使框保持白色方块而不是变回灰色。

----------------------------------------SSCCE------------------------ -------------

使用上面的完整代码，这是主类：

```
import javax.swing.*;

public class TestGame extends JFrame {

public static void main(String[] args) {
    startMap sm = new startMap();
    sm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    sm.setVisible(true);
    sm.setSize(380,415);
    sm.setResizable(false);
}
} 
```

固定版本：

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class startMap extends JFrame {

public int locX = 1;
public int locY = 1;
ImageIcon tile = new ImageIcon("src/tile.png");
JLabel tileLabel = new JLabel(tile);
ImageIcon berry = new ImageIcon("src/berry.png");
JLabel berryLabel = new JLabel(berry);
ImageIcon blank = new ImageIcon("src/blank.png");
JLabel blankLabel = new JLabel(blank);
JLabel testL = new JLabel("LOL");
JPanel[][] map = new JPanel[7][7];

public startMap() {
    setBackground(Color.BLACK);
    setFocusable(true);
    keyHandler kh = new keyHandler();
    addKeyListener(kh);
    mapGUI();
}

public void mapGUI() {
    JPanel mainP = new JPanel();
    mainP.setBackground(Color.BLACK);
    mainP.setLayout(new FlowLayout());
    for (int x = 0; x < 7; x++) {
        for (int i = 0; i < 7; i++) {
            map[x][i] = new JPanel();
            System.out.println("1");
            blankLabel = new JLabel(blank);
            map[x][i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
            map[x][i].add(blankLabel);
        }
    }
    for (int x = 1; x < 6; x++) {
        for (int i = 1; i < 6; i++) {
            System.out.println("2");
            map[x][i].removeAll();
            tileLabel = new JLabel(tile);
            map[x][i].add(tileLabel);
            revalidate();
            repaint();
        }
    }
    System.out.println("3");
    map[locX][locY].removeAll();
    map[locX][locY].add(berryLabel);
    revalidate();
    repaint();
    for (int x = 0; x < 7; x++) {
        for (int i = 0; i < 7; i++) {
            mainP.add(map[x][i]);
        }
    }

    add(mainP);
}

@Override
public void paint(Graphics g) {
    super.paint(g);

}

private class keyHandler extends KeyAdapter {

    @Override
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            berryLabel = new JLabel(berry); //THIS
            tileLabel = new JLabel(tile); //And THIS had to be RE initialized idk why.
            map[locX][locY].removeAll();
            map[locX][locY].add(tileLabel);

            locY += 1;
            map[locX][locY].removeAll();
            map[locX][locY].add(berryLabel);
            revalidate();
            repaint();

        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:37:26.017

应在添加/删除后调用

```
revalidate();
repaint(); 
```

不要`repaint()`从`paint()`

# netty - 有人可以更好地解释解码器/编码器吗？

> ID：13968878
> 
> 赞同：10
> 
> 时间：2012-12-20T09:25:56.473
> 
> 标签：netty

修改后的问题：

好的，所以我正在尝试将其合并到我自己的定制游戏中。我了解 Netty 服务器和客户端如何连接的过程。我也了解解码器和编码器在理论上是如何工作的。但这是我仍然想了解的。

我的服务器进程：

```
Server boots up -> Client starts
Client requests connection -> Server accepts
Server instructs client connection is good -> Client continues to the login screen
(Ignoring any type of security protocol)
Client sends username and password over Channel
Server gets username and password checks it in the database or file
Server pushes -> yes or no
if yes Server sends player stats
if no Server creates new player 
```

在这个过程之后，我知道我需要一个世界处理程序，以便每个人都能近乎实时地看到更新。现在我不知道如何为这些东西实现解码器。

我真的很想看一些例子，并解释它们是如何实现的。最好有一些说明.... 注意：我并不是说要为我解决这个问题，而是告诉我如何处理不同的信息。请提供最佳实践和标准......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:42:06.547

人们编写自己的编码器/解码器（编解码器），因为 Netty 没有强加或定义应用程序级协议，因此您可以自由编写自己的协议。例如，您定义的编解码器集是一个协议，可以是基于字符串和某种二进制格式（如 Protobuf）之间的任何协议。Netty 为您提供了方便的编解码器（您使用的是示例）。

> > 我认为这是为了防止流过早被切断？

通常，当您发送/接收流时，您需要将其分解为固定长度的块（称为帧）。一种流行的方法，自 Internet 诞生以来就一直在使用，即使用块的长度（通常是 4 字节 int）作为从流中读取的第一个字段。因此，如果第一个 int 的值是 20，那么您知道接下来的 20 个字节是有效负载（数据），第 21 个字节是另一个长度的第一个字节。这种方法的优点是它允许可变长度的块。但你不限于此。例如，如果您计划编写一个使用具有预定义长度（带有填充）的字符串的协议，那么您将编写或者甚至更好地使用适合它的 Netty 当前编解码器。

有一次，我实现了一个包含三个解码器的协议，这些解码器将按以下顺序执行：

1.  接收流并将其分解为长度前缀帧；
2.  将每一帧转换为字符串；
3.  使用 Jackson libray 将字符串转换为预定义的 Java 对象。

编码器只会做同样的操作，但会倒退。不幸的是，我丢失了原始代码，但我会尽快重写它。

> > 但是流如何知道流是一个字符串或一系列 int 或一系列双精度数？你怎么告诉它区别是问题？

简短的回答：它不知道。您必须在编解码器中对此信息进行编码。例如，您可以使用操作码作为有效负载中的第一个字段，说明有效负载是字符串、双精度、整数或两者的任意组合。

基本上，Netty 提供了一个流，你可以随意解码。例如，如果您正在读取一系列 long（8 个字节），那么您将编写一个每次从流中读取 64 个字节的编解码器，因为每个都代表一个 long。Netty 提供开箱即用的编解码器，因此您无需每次都重新发明轮子。

# jquery - 选择器获取 div 内的元素

> ID：13968880
> 
> 赞同：0
> 
> 时间：2012-12-20T09:26:05.943
> 
> 标签：jquery, jquery-selectors

我有以下代码：

```
<div class="div1">
    <div class="text_wrapper">
        <div class="whatevername1" style="color:blue;">
            text1...
        </div>
    </div>
</div>
<div class="div2">
    <div class="text_wrapper">
        <div class="whatevername2" style="color:blue;">
            text1...
        </div>
    </div>
</div> 
```

我想知道如何`whatevername`从第一个 div 类开始选择该类作为孩子。

**编辑：**

我没有类whatevername，可以是动态生成的任何名称，这就是我要选择的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:42:17.787

选择类名开始`whatevername`

```
var ele= $('div [class^="whatevername"]') 
```

[http://jsfiddle.net/hbjp9/1/](http://jsfiddle.net/hbjp9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:28:56.897

```
$('.whatevername1') 
```

to select the `div`

**UPDATE** To the edit

```
$('.text_wrapper').children('div'); 
```

if you want to select first you can use `:eq(0)` like this

```
$('.text_wrapper:eq(0)').children('div'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:33:32.127

这将选择两个 div 的内容：

`$('div > [class^=whatevername']).html()`

[http://jsfiddle.net/2ZPU3/](http://jsfiddle.net/2ZPU3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:30:58.800

```
$('.div1').children('.whatevername').[dosomething] 
```

要选择`whatevername`内部`div1`

# user-interface - 关于时间的无效值

> ID：13968884
> 
> 赞同：0
> 
> 时间：2012-12-20T09:26:22.563
> 
> 标签：user-interface, time

图形用户界面

```
try {
    h = Integer.parseInt(hhTf.getText());
    m = Integer.parseInt(mmTf.getText());   
} catch (NumberFormatException e) {
    Label.setText("Not a integer value!");    
} 
```

1.  怎么办 如果小时的有效值是从 1 到 12，分钟的有效值是从 0 到 59。如果我输入无效的整数，例如 3:60，它会显示相应的消息？如果我输入诸如 S:rf 之类的字符串，这就是我要做的。那么无效整数怎么办？

2.  如果我输入一个字符串...它将显示不是整数值..但之后我输入正确的时间...消息仍然存在..如何清除这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:46:52.427

尝试这样的事情

这是来自我的 C# 代码

日期时间时间；字符串 timeStr = "23:00"

if(DateTime.TryParse(out time)) { /* 使用 time 或 timeStr 进行出价 */ }

# webdriver - 如果元素不在同一级别上，如何使用 webdriver 和 css 找到元素的第 n 次出现？

> ID：13968887
> 
> 赞同：1
> 
> 时间：2012-12-20T09:26:27.947
> 
> 标签：webdriver, selenium-webdriver

我试图自动化的页面在不同级别有 n 个相同的按钮。这 n 个按钮具有相同的属性。可以说，如果我想点击第二个，我怎么能使用 webdriver 和 CSS 来做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:38:32.380

例如说唯一属性是 class='custom_button' 你可以使用

```
List <WebElement> custButtons = driver.findElements(By.className("custom_button"));
custButtons.get(2).click(); 
```

这将单击页面上类名“custom_button”的第三个按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:39:10.500

Prashant Shukla 有正确的答案。

* * *

无论如何，如果您想使用单个命令在一行上执行此操作：

我不知道如何使用单个 CSS 选择器来做到这一点（即使是伪选择器`:nth-child()`也不允许这样做）。但有人可能知道答案。我可以建议的是一个 XPath 选择器。诀窍是使用`descendant`轴。

例如，如果您想选择`<a class='post-tag'>`页面上的第二个元素（恰好是`webdriver`此页面上的标签 :)），无论其他任何事情，您都可以这样做：

```
driver.findElement(By.xpath("/descendant::a[@class='post-tag'][2]")); 
```

# javascript - 如何在进行旋转转换时相对于父节点定位 div？

> ID：13968890
> 
> 赞同：1
> 
> 时间：2012-12-20T09:26:33.127
> 
> 标签：javascript, css, css-transitions

这是我的问题

[小提琴](http://jsfiddle.net/hZfhQ/1/)

我有 4 个 div，`position:absolute`它们的位置是根据它们的 id 定义的。

当用户点击一个 div 时，该 div 会进行旋转和缩放的转换。我的目标是将生成的 div（黄色）定位在一个非常特殊的位置：在父节点的中心。

现在在我的[Fiddle](http://jsfiddle.net/hZfhQ/1/)中，它确实会自行旋转，这不是我想要的。

我尝试了什么；

*   添加到我的 transform `transform:translate(x,y)`，但这与单击之前的 div 相关，这意味着每个 div 都会将转换后的 div 发送到另一个位置。
*   添加`left:5%;top:5%;`希望它会起作用，但事实并非如此。
*   再次添加一个`transform-origin`，它是相对于 div 本身而不是父级或主体

**我的问题：是否可以在过渡期间相对于父节点而不是自身来定义 div 的位置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:57:53.010

您的`top`和`left`覆盖不起作用的原因是 ID 选择器比类选择器更具体，因此具有优先权。您可以使用以下方法解决此问题`!important`：

```
.isTurning{
    background-color:yellow;
    z-index:1;
    -webkit-transition: -webkit-transform 0.3s ease-in-out, left 0.3s ease-in-out, top 0.3s ease-in-out;
    -webkit-transform: scale(2) rotateY(180deg);
    left:27% !important;
    top: 25% !important;
} 
```

或使用特异性：

```
#b_1.isTurning, #b_2.isTurning, #b_3.isTurning, #b_4.isTurning{
    background-color:yellow;
    z-index:1;
    -webkit-transition: -webkit-transform 0.3s ease-in-out, left 0.3s ease-in-out, top 0.3s ease-in-out;
    -webkit-transform: scale(2) rotateY(180deg);
    left:27%;
    top: 25%;
}​ 
```

这是一个演示：http: [//jsfiddle.net/Fs6Zw/](http://jsfiddle.net/Fs6Zw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:55:10.157

我删除了你不想要的翻转效果。

我添加`position:relative`了父母。所以现在当你`position: absolute`是孩子时，他们是根据父母定位的。

我通过这样做将黄色方块放在中心：

```
top:50% !important;
left:50% !important;
margin-top: -75px;
margin-left: -75px; 
```

忘记包含链接：http: [//jsfiddle.net/hZfhQ/2/](http://jsfiddle.net/hZfhQ/2/)

# jquery - 在jQuery中拖动时元素不能有z-index最大值

> ID：13968898
> 
> 赞同：4
> 
> 时间：2012-12-20T09:27:10.363
> 
> 标签：jquery, jquery-ui, drag-and-drop

我有一个可拖动的项目，但是当我拖动它时它位于其他 html 元素下，即使我设置`.item_dragable { cursor: move; z-index: 2147483646; }` 了事件可拖动：

```
jQuerydragable.draggable({
    cancel: "a.ui-icon", // clicking an icon won't initiate dragging
    revert: "invalid", // when not dropped, the item will revert back to its initial position
    containment: "document",
    helper: "clone",
    cursor: "move",
    zIndex: 2147483647
}); 
```

怎么了？我使用最新的 jQuery 和 jQuery ui

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:59:26.047

让您的可拖动项目遍历其他所有内容的最佳方法是使用该选项`appendTo`（请参阅[jQuery UI 文档](http://api.jqueryui.com/draggable/#option-appendTo)）并将其设置为`"body"`：

```
jQuerydragable.draggable({
    cancel: "a.ui-icon", // clicking an icon won't initiate dragging
    revert: "invalid", // when not dropped, the item will revert back to its initial position
    containment: "document",
    helper: "clone",
    cursor: "move",
    zIndex: 100000,
    appendTo: "body"
}); 
```

当然，还要设置一个足够大的 z-index，使其高于所有其他值。

# php - PHP中的文件夹保护

> ID：13968901
> 
> 赞同：0
> 
> 时间：2012-12-20T09:27:16.097
> 
> 标签：php, directory-structure

PHP中文件夹保护的更好方法是什么？例如在`views`我有文件的文件夹中`index.php`，如果继续这个地址：`mysite.com/views/`打开的文件，我不想要这个。

我的想法是重命名`index.php`为其他名称，例如`indexx.php`，现在如果`.htaccess`写`Options -Indexes`这有帮助，因为原因`403 error`

但是……有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:41:46.130

1.  将您的 MVC 文件夹从公共目录上移一级。
2.  将下一个内容添加到每个文件夹 index.html 文件中：

    **不允许直接访问。**

3.  从下一行开始你所有的控制器和模型文件，并在你的 index.php （init.php 或任何你使用的）中定义 SOMECONSTANT ：

    ```
    if ( ! defined('SOMECONSTANT')) exit('No direct script access allowed'); 
    ```

# ant - Jenkins 在启动 JBoss 服务器时挂起构建

> ID：13968902
> 
> 赞同：1
> 
> 时间：2012-12-20T09:27:16.860
> 
> 标签：ant, jboss, jenkins

我正在使用 Ant 在 Jenkins 中启动/停止我们的 JBoss 服务器。JBoss 服务器在 Jenkins 中启动良好，但即使服务器已经启动，构建也不会完成。是否可以在 Ant 或 Jenkins 中定义一种方法来克服这个问题？即在 Jenkins 中是否有可能克服这个问题，或者在 Ant 中是否有可能以某种方式“在后台”启动服务器，以便当 Jenkins 执行 Ant 任务时它立即进入构建的下一步（我可以手动定义睡眠在 Jenkins 中等待服务器启动）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:14:41.293

[您可以探索JBoss Management Plugin](https://wiki.jenkins-ci.org/display/JENKINS/JBoss+Management+Plugin)，而不是使用 ant

# java - 从日期 JAVA 中删除秒和区域信息

> ID：13968903
> 
> 赞同：0
> 
> 时间：2012-12-20T09:27:22.587
> 
> 标签：java, datetime

我在 SQL Server 的日期时间与 java 之间转换时遇到问题`java.util.date`，已解决[将日期时间解析为 JAVA 日期](https://stackoverflow.com/questions/13967635/parse-datetime-to-java-date)，但现在问题是我的`datetime`（2013 年 1 月 1 日）转换为`Tue Jan 01 00:00:00 PKT 2013`我希望它`01 Jan 2013`是可能的还是我必须使用字符串...我尝试了[JODA 时间](http://joda-time.sourceforge.net/)，但问题仍然存在。请引导我走正确的道路

编辑：

我`datetime`在 SQL 服务器数据库中有格式，`dd MMM yyyy`例如`01 Jan 2013`，我现在必须从`SqlRowSet`类似的地方获取值，`rs.getString(4)`才能将我从数据库获取的日期时间字符串转换为`java.util.date`我使用上述问题中的指南所做的，但问题是它添加区域和秒数的附加信息，例如

> 2013 年 1 月 1 日 SQL Server 格式日期时间
> 
> 2013 年 1 月 1 日星期二 00:00:00 PKT java.util.date 格式

**我想要的`java.util.date`是`01 Jan 2013`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:30:35.107

A `java.util.Date` is internally represented by a number (a `long`), not by fields for day, month, hour, etc... You obtain those by formating this number with a `SimpleDateFormat`. The string you are getting now is a default representation obtained by using `Date.toString()`. If you want it formatted differently, use the `SimpleDateFormat`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:09:58.100

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)将完成这项工作。

```
SimpleDateFormat sdf = new SimpleDateFormat( "dd MMM yyyy" );
System.out.println( sdf.format( date ) ); 
```

只要您想要的格式与特定的语言环境匹配，也可以使用[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html)

这是一个接近您想要的示例：

```
DateFormat df = DateFormat.getDateInstance( DateFormat.LONG, Locale.UK );
System.out.println( df.format( date ) ); 
```

编辑：为了从行集中获取日期，只需调用

```
Date date = rs.getDate(4); 
```

它会根据您的需要返回日期对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:43:01.523

在我看来，最好使用 Joda Time API 来轻松操作日期时间字段。这个 API 对此非常有用。在包中使用日期时间格式化程序或简单的日期时间格式化程序类`java.util.Date`。这将更有利于为您获得所需的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:20:28.863

@Jakub 正确地提到了。您可以使用`java.text.SimpleDateFormat`

```
java.util.Date today=new java.util.Date();
SimpleDateFormat format=new SimpleDateFormat("dd MMM yyyy"); 
System.out.println(format.format(today)); 
```

我用它来格式化今天的日期。您可以从数据库中检索日期并以类似的方式检索。但请记住，如果您使用`rs.getDate()`它，它会回报您`java.sql.Date`。因此，您可以继续。

# android - 替代服务类的完成（）方法？把它杀了

> ID：13968904
> 
> 赞同：16
> 
> 时间：2012-12-20T09:27:24.490
> 
> 标签：android, service, kill, activity-finish

我之前在几个活动中使用了方法 finish() 没有问题。

但是，当我尝试在广播接收器内部调用它时，我从编译器收到错误消息“方法完成（）对于 AudioService 类型未定义”

AudioService 是我的 Android 应用中的 Service 类的名称。

如果服务中没有 finish() 方法，我可以调用什么来杀死该服务？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-20T09:29:24.583

use this line:

```
this.stopSelf(); 
```

to kill itself.
Or from outside use `stopService(intent);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T09:30:50.223

您可以尝试 `AudioService` 从广播接收器停止您的服务：

```
Intent intent = new Intent();
intent.setClass(context, AudioService.class); 
context.stopService(intent); 
```

`context`您在接收广播接收器时收到的第一个参数在哪里

# c# - 调试器停止时代码正在运行？

> ID：13968905
> 
> 赞同：3
> 
> 时间：2012-12-20T09:27:29.670
> 
> 标签：c#, visual-studio-2010, ssh

当我的应用程序启动时，我正在连接到 ssh 服务器。因此，我正在使用 SSH.net 库。当我启动 Visual Studio 并打开主 wpf 视图时，即使我的程序未运行，Visual Studio 也会在后台启动此连接。因此，当我使用调试器启动程序时，我得到一个“每个套接字地址只能使用一次”异常。我正在运行 Visual Studio 2010 + Wpf + Caliburn Micro。

为什么 Visual Studio 会这样做？

问候马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:36:02.430

当您打开窗口时，听起来*Visual Studio 设计器正在打开连接。*可能是因为打开连接的函数在构造函数中，被设计者调用来显示窗口...

如果您在设计器中，请在打开 SSH 连接的函数中添加以下代码，以*防止打开连接：*

```
bool isInDesignMode = System.ComponentModel.DesignerProperties.GetIsInDesignMode(new DependencyObject());
if (isInDesignMode)
     return; 
```

# cakephp - 将别名和两个 url 路由到一个控制器？

> ID：13968917
> 
> 赞同：1
> 
> 时间：2012-12-20T09:27:59.057
> 
> 标签：cakephp, cakephp-2.1

我对 CakePHP 还很陌生，但对编程来说一点也不陌生。通常我可以很快解决问题。但是，我认为我需要一些帮助。查看 CakePHP Cookbook，它非常清楚地解释了路线。我唯一挂断的是路由别名。也许我弄错了，但就路由别名而言，我的理解是它只是一个别名。因此，原始路线也应该存在。它似乎并没有真正那样工作。

我创建了一条使用 /merchants 捕获所有内容的路线，创建了一个别名

```
Router::connect('/merchants/:action/*', array('controller' => 'users')); 
```

它做它应该做的事情。如果我去 /merchants/login，它真的是 /users/login。如果我转到 /users/login，它会将我重定向到 /merchants/login。我确实在 AppController 中设置了 Auth 组件。如果我把 Auth 去掉，那么别名就可以正常工作。所以我认为Auth是罪魁祸首。我是不是有点太聪明了？有一个更好的方法吗？使用同一控制器分开登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:55:00.137

这当然是由于反向路由。您配置的路由使 Cake 使用`/merchants/`而不是`/users/`在解析链接时使用。

登录操作是[默认的](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent%3a%3a%24loginAction) `/users/login`。因此，当 Cake 将用户重定向到登录 url 时，也会在登录 url 中`/users/`被替换`/merchants/`为。

如果您想为不使用的登录强制使用特定的 URL `/merchants/`，您可以为它声明更具体的路由，如下所示：

```
Router::connect('/login',   array('controller' => 'users', 'action' => 'login'));
Router::connect('/merchants/:action/*', array('controller' => 'users')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:24:11.077

听起来`/users/login`您的 ACL 或身份验证设置中不允许使用。当您访问`/users/login`Auth 时，发现您无权访问，因此重定向到您`Auth::$loginAction`（您没有发布但我认为是`/merchants/login`基于行为）。

确保`Auth::$loginAction`设置为用户控制器登录操作，而不是商家路由。这样，当需要检查访问权限时，Auth 知道该操作是允许的，因为默认情况下允许登录操作。

# ftp - 我从 cpanel 创建的 ftp 用户无法通过 filezilla 访问，而管理员用户可以访问

> ID：13968919
> 
> 赞同：1
> 
> 时间：2012-12-20T09:28:03.210
> 
> 标签：ftp, filezilla

我无法通过 ftp 从我在 cpanel 中创建的用户访问文件，但我可以访问由托管帐户创建的帐户。我使用的是 ftpes://，后跟域名。我收到以下错误：

```
530 Login authentication failed
Error:  Critical error
Error:  Could not connect to server 
```

我想创建一个用户，以便他可以在子文件夹（名为网站的文件夹）中进行更改，这是配置给用户的路径，而不是 public-html。我是 ftp 的菜鸟，如果有任何帮助，我将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:45:28.947

我找到了：如果您创建了自己的用户名，那么您需要使用创建 ftp 帐户时提供的密码输入完整的用户名 ie:example@example.com。主机名将是 ftpes://example.com 。就是这样。

# c# - 确认邮件

> ID：13968921
> 
> 赞同：1
> 
> 时间：2012-12-20T09:28:06.190
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, email, smtpclient

我正在使用此 URL 将确认邮件发送到以下注册表

[http://blogs.microsoft.co.il/blogs/shair/archive/2011/12/06/email-confirmation-asp-net-mvc-web-application.aspx#comments](http://blogs.microsoft.co.il/blogs/shair/archive/2011/12/06/email-confirmation-asp-net-mvc-web-application.aspx#comments)

但我遇到了错误。任何人都可以帮助我。

```
message.Subject = "Please Verify your Account";
MailBody.Append("<html><table cellpadding='0' cellspacing='0' width='100%' align='center'>" + "<tr><td><p>Dear " + user.UserName+ "</p><br>");
MailBody.Append("To verify your account, please click the following link:<span style='font-weight:bold;'> <a href=verifyUrl + "\" target="http://localhost:51819">" + verifyUrl + "+"</a></span> to complete your registration.<br>); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:43:01.577

您在第二个附录中缺少引号。脚本荧光笔甚至显示错误。

如果您想在字符串中使用双引号，则需要对其进行转义，例如 \"

所以你的第二个附加应该是这样的

```
 MailBody.Append("To verify your account, please click the following link:<span style='font-weight:bold;'><a href=\"" 
    + verifyUrl + "\" target=\"http://localhost:51819\">" 
    + verifyUrl + "</a></span> to complete your registration.<br>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:53:41.367

你`New line in constant`是因为你在没有告诉编译器你想要第二行的情况下打破了这条线。

有 3 种方法可以解决此问题：

*   不要断线
*   转义每个特殊字符
*   使用`@`符号做你想做的事

举个例子：

```
StringBuilder sb = new StringBuilder();

sb.Append("<html><table cellpadding='0' cellspacing='0' width='100%' align='center'>");
sb.Append("<tr><td><p>Dear " + user.UserName+ "</p><br>");
sb.Append("To verify your account, please click the following link:<span style='font-weight:bold;'>");
sb.Append("<a href='" + verifyUrl + "' target='http://localhost:51819'>" + verifyUrl + "</a></span> to complete your registration.<br>");

MailBody.Append(sb.ToString()); 
```

您还需要**避免在字符串中混合使用单引号和双引号**，想法是仅**在内部使用单引号并使用双引号来分隔字符串**。

您也可以`@`在字符串前面使用 ，**然后可以像这样换行**：

```
MailBody.Append(
   String.Format(
     @"<html>
       <table cellpadding='0' cellspacing='0' width='100%' align='center'>
         <tr>
           <td>
             <p>Dear {0}</p>
             To verify your account, please click the following link:
             <span style='font-weight:bold;'>
               <a href='{1}'>{1}</a>
             </span> to complete your registration.
           </td>
         </tr>
       </table>
       </html>", user.UserName, verifyUrl)); 
```

我也曾经`StringBuilder`避免在模板中包含变量，因为它使查看和编辑变得更加简单。

最后**但并非最不重要**的一点是，您应该对 HTML 有更多的了解......没有`target="http://localhost:51819"`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:45:48.743

你的第二个`MailBody.Append`都搞砸了

```
MailBody.Append("To verify your account, please click the following link:<span style='font-weight:bold;'> <a href="+verifyUrl + "\" target=\"http://localhost:51819\">" + verifyUrl + "</a></span> to complete your registration.<br>"); 
```

# javascript - Chrome 上的 toggleSlide 问题 - 剪切字母/不可见文本

> ID：13968925
> 
> 赞同：3
> 
> 时间：2012-12-20T09:28:27.287
> 
> 标签：javascript, jquery, html

我正在使用 jquery 1.8.2 和 toggleSlide 动画来顺利显示搜索输入框，但在 chrome 上有两个问题 - 其中一个我已经分成[了一个 jsfiddle](http://jsfiddle.net/nilphilus/MUvz5/)

```
$('#hiddenBlock').slideToggle(500);
$('#inputHiddenBlock').slideToggle(500);
$('#but').slideToggle(500); 
```

在 chrome 上打开[这个小提琴](http://jsfiddle.net/nilphilus/MUvz5/)并单击按钮 - 在文本框中写入一些文本并再次单击按钮两次 - 一个隐藏第二个再次显示 - 文本现在不可见并保持这种状态，直到 fe 再写一个字母刷新。

这可能也与第二个问题有关，这似乎与画布/显示文本有关 - 它允许将像“l”这样的字母切成两半......

在该示例中，您会看到“l”和“t”：
[“l”和“t”http://img171.imageshack.us/img171/5784/beztytuuvxq.png](http://img171.imageshack.us/img171/5784/beztytuuvxq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:43:51.530

您不需要`slideToggle`文本框和搜索按钮。只需要 div`hiddenBlock`就足够了。

我简化了您的解决方案：

```
// on dom ready hides your div
$(document).ready(function(){
  $('#hiddenBlock').hide();
});

 function toggleSearchWindow() {
   $('#hiddenBlock').slideToggle("fast");
 }

 $('input[type=button]').click(function() {
   toggleSearchWindow();
 });​ 
```

[**测试**](http://jsfiddle.net/MUvz5/12/)

**更新**我将输入的文本放在一个临时变量中，看看这是否解决了你的剪切文本：

**[测试2](http://jsfiddle.net/MUvz5/13/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:44:07.403

尝试删除

```
display:none; 
```

从 #inputhiddenblock 和 #but css 然后删除

```
$('#inputHiddenBlock').slideToggle(500);
$('#but').slideToggle(500); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:47:46.397

我已经更新了你的 jsfiddle 链接。

问题是您没有初始化输入文本字段，并且在输入文本字段的 dom 加载中，我们已将其初始化为内联而不显示任何内容。

我已经评论过了；

> $('#inputHiddenBlock').slideToggle(500);

# java - 从 JSP 调用 Servlet 的方法

> ID：13968928
> 
> 赞同：2
> 
> 时间：2012-12-20T09:28:32.933
> 
> 标签：java, html, jsp, servlets

我正在使用 JSP 和 Servlet 开发一个 Web 应用程序。

当用户单击更新按钮时，我想从 JSP 页面调用 servlet 的方法。

```
<input type="button" value="Update" onclick="<%MyServletName.Update(request, response);%>"></input> 
```

当我单击更新按钮时，此方法正在调用 servlet，但问题是加载表单时会自动调用此方法。

提前致谢.....

源代码....

```
<%@page import="MyPackageName.MyServletName"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Update</title>
</head>
<body>
<form>
<%
String[][] data = (String[][])request.getAttribute("data");
String[] columnNames = (String[])request.getAttribute("columnNames");
//fill the table data
if(columnNames.length!=0 && data.length!=0)
{
%><table><%
}
for(int i=0;i<data.length;i++){
%>
<tr> <td><%= columnNames[0] %></td> <td><input type="text" name="text1" value="<%= data[i][0] %>"></td> </tr>
<tr> <td><%= columnNames[1] %></td> <td><input type="text" name="text2" value="<%= data[i][1] %>"></td> </tr>
<tr> <td><%= columnNames[2] %></td> <td><input type="text" name="text3" value="<%= data[i][2] %>"></td> </tr>
<%
}
%>
<tr>
<td></td>
<td><input type="button" value="Update" onclick="<%PlanProtocolEdit.Update(request, response);%>"></input></td>
</tr>
</table>
</form>
</body>
</html> 
```

除了 dogGet() 和 doPost() 之外，还有什么方法可以调用 servlet 方法而不调用 servlet dogGet() 和 doPost() 方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T09:30:13.660

您应该在表单本身而不是实际的输入按钮上指定操作。

如果您在表单上定义操作。例如

表单提交按钮会将表单提交到该 URL。例如

```
<form action="/mypath/someurl">
    <input type="submit" value="Submit" />
</form> 
```

您可以向标记添加附加属性以`form`指定您希望请求是 a`get`还是 a `post`。

```
<form action="/mypath/someurl" method="POST"> 
```

将发送一个发布请求，然后您可以使用该`handlePost`方法在您的 Servlet 中获取它

应该使用上述方法，目前您正在尝试在 javascript onclick 事件上调用 Java 方法。这是不正确的，它没有按照你的想法做。

中的代码`PlanProtocolEdit`。更新应该在 servlet 的`doGet`or`doPost`方法中，该方法将通过如上所述配置您的表单来触发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T09:33:31.330

`<input type="button" value="Update" onclick="<%MyServletName.Update(request, response);%>"></input>`

您的 jsp 中的这一行将被评估为

`<input type="button" value="Update" onclick=""></input>`在 HTML 页面中。如果你想在点击时调用你的servlet，首先将你的servlet映射到一个url路径，比如web.xml中的/myservletpath，然后使用 `<input type="button" value="Update" onclick="location.href='/myservletpath'"></input>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T16:31:53.240

您可以通过创建 jsp 的 useBean 来调用 doPost() 和 doGet() 以外的 servlet 方法。

```
<jsp:useBean id="someid" class="SomePackageName.PlanProtocolEdit"> 
```

并调用 servlet 方法 onclick 为：

```
<input type="button" value="Update" onclick="<% someid.Update(args[0], args[1]); %>" /> 
```

这个 jsp bean 将识别您的 servlet 类，您现在可以在 jsp 页面中使用在 useBean 标记中给它的 id 访问该类。

不要忘记关闭 useBean 标记。

# java - Make a log file in Java mySQL

> ID：13968938
> 
> 赞同：0
> 
> 时间：2012-12-20T09:29:07.623
> 
> 标签：java, mysql, sql, jdbc

I want to make a log in mySQL using Java but I want to do the following: - Make a record with the CURRENT_TIMESTAMP - Update the record with an end time (so begin time and end time)

I can't post my code because I get an error when I try...

Thank you in advance,

Remco

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:33:04.280

您可以使用[log4j](http://logging.apache.org/log4j)并使用适当的附加程序，就像[这个问题中详述的那样](https://stackoverflow.com/questions/1364322/log-to-a-database-using-log4j)

问题是 JDBCAppender 已被弃用。如果您确实需要此功能，这是另一种解决方案：[log4j-databaseappender](http://code.google.com/p/log4j-databaseappender/)，但是它在文档上非常稀疏（确切地说，几乎没有），有点旧，并且只有一个所有者，但如果您可以作为一个很好的起点想自己动手。至少代码很小。

至于 log4j，当有针对一般问题的现成解决方案时，我当然不会尝试重新发明轮子并创建另一个日志框架。但是，如果您使用另一个框架（您没有指定），我相信它会让您同事的生活更轻松，而不必应对不同的日志记录方法......至少我很高兴看到我必须处理的代码中的统一日志记录指令......

# android - can i direct play .caf file in android?

> ID：13968939
> 
> 赞同：4
> 
> 时间：2012-12-20T09:29:11.997
> 
> 标签：android, audio, playback, caf

> **Possible Duplicate:**
> [Can an Android phone decode and play back a *.caf file w/ iLBC codec?](https://stackoverflow.com/questions/5172441/can-an-android-phone-decode-and-play-back-a-caf-file-w-ilbc-codec)

I am developing such type of application ,In my android application play a1.caf file .

I want to know ,*is possible to play .caf file in android.*

`If yes ,then how to play` ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T09:35:03.150

不，你不能[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)状态所有使用的格式。

您必须先转换为 AAC 或 WAV，然后才能使用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:36:31.133

Android 未在支持媒体格式的文档中列出，意味着您不能，请查看 android 提供的支持的媒体格式。

[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)

# c# - 如何在我的 MVC 站点地图中创建不可点击的动态节点？

> ID：13968946
> 
> 赞同：0
> 
> 时间：2012-12-20T09:29:31.863
> 
> 标签：c#, asp.net-mvc-4, mvcsitemapprovider

我`MvcSiteMapProvider`用来在我的 ASP.NET MVC 应用程序中创建面包屑。我有一些动态资源，我想为其创建一些子节点。其中一些节点，我想出现在面包屑中但不可点击。

对于静态资源，您可以`clickable="false"`在 XML 站点地图文档中指定这些节点会出现，但不会是超链接。我找不到在`DynamicNode`我的动态节点提供程序类返回的值上设置的等效属性。

是否可以添加一个动态的“不可点击”节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:52:15.407

`DynamicNode`没有 n`Clickable`属性，因为它没有从`MvcSiteMapNode`类继承。

反思`MvcSiteMapNode`表明，实现`Clickable`由[`Attributes`](http://msdn.microsoft.com/en-us/library/system.web.sitemapnode.attributes.aspx "System.Web.SiteMapNode.Attributes 属性")属性支持：

```
public bool Clickable
{
    get
    {
        return ((this["clickable"] == null) || bool.Parse(this["clickable"]));
    }
    set
    {
        this["clickable"] = value.ToString();
    }
} 
```

该类`DynamicNode`公开了自己的属性，在解析动态节点时将`Attributes`其复制到实例中。`MvcSiteMapNode`因此，可以使用以下代码设置属性：

```
var node = new DynamicNode();

node.Attributes["clickable"] = "false"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T11:19:31.850

在 v4 中，动态节点上现在有一个 Clickable 属性，现在将属性设置为 clickable 会导致错误，因为属性不再受 Attributes 字典支持。

```
var node = new DynamicNode();

node.Clickable = false; 
```

# jsf - JSF 1.2 NavigationHandler#handleNavigation 调用了两次

> ID：13968953
> 
> 赞同：0
> 
> 时间：2012-12-20T09:29:55.877
> 
> 标签：jsf, jsf-1.2

我正在尝试实现自定义导航，它可以完成通常的工作并更新我的面包屑。

```
public class CustomNaviguationHandler extends NavigationHandlerImpl{

     public void handleNavigation(FacesContext context, String fromAction, String outcome) {
         //do the breadcrumb update

         super.handleNavigation(context, fromAction, outcome);
     }
} 
```

但是当我调试它时，该方法执行了2次一次，

1.  第一次，fromAction 和结果为空
2.  第二次，这些参数包含正确的值。

处理程序已在 faces-config.xml 中注册

```
<navigation-handler>my.package.CustomNaviguationHandler</navigation-handler> 
```

我不确定为什么？任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:28:46.950

您根本不应该扩展 JSF impl 类`NavigationHandlerImpl`。您应该改为扩展 JSF API 类[`NavigationHandler`](http://docs.oracle.com/javaee/5/api/javax/faces/application/NavigationHandler.html)。

这是一个启动示例。在方法中做好你的工作`handleNavigation()`。如果您不想对导航负责，请委托给`parent`.

```
public class CustomNavigationHandler extends NavigationHandler {

    private NavigationHandler parent;

    public CustomNavigationHandler(NavigationHandler parent) {
        this.parent = parent;
    }

    @Override
    public void handleNavigation(FacesContext context, String from, String outcome) {
        parent.handleNavigation(context, from, outcome);
    }

} 
```

# android - 服务中的广播接收器

> ID：13968955
> 
> 赞同：1
> 
> 时间：2012-12-20T09:29:59.730
> 
> 标签：android, android-service, android-download-manager

我尝试启动一项服务以从服务器下载文件。当我使用 BroadcastReceiver 管理 DownloadManager 的返回时，问题就开始了，如果我在 MainActivity 中复制粘贴，它会起作用，但在服务中它会引发错误。我的目标是下载一个文件（视频），当它完成下载下一个，但它只下载第一个然后抛出错误。

我的课：

```
public class VideosDownloader extends IntentService {

    public VideosDownloader() {
        super("VideosDownloader");
    }

    private boolean download = true;
    private final String SERVER_URL = 
            "http://127.0.0.1/42de2533d3b2776e456d62cd0fc3a101/";
    private SharedPreferences preferenceManager;
    final String strPref_Download_ID = "VIDEOS_DOWNLOAD_ID";
    private long enqueue;
    private DownloadManager manager;
    private int count = 0;
    private int count_max = 6;

    @Override
    protected void onHandleIntent(Intent intent) {
        Bundle b = intent.getExtras();
        preferenceManager = PreferenceManager.getDefaultSharedPreferences(this);
        manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
        // THROW THE FIRST TIME:
        DownloadManager.Request request=new DownloadManager.Request(
                Uri.parse(SERVER_URL + "video" + count + ".mp4"));
        request.setDescription("");
        request.setTitle("Downloading");
        request.setDestinationInExternalPublicDir(
                Environment.DIRECTORY_DOWNLOADS, "video" + count + ".mp4");
        request.setShowRunningNotification(true);
        enqueue = manager.enqueue(request);
        Editor PrefEdit = preferenceManager.edit();
        PrefEdit.putLong(strPref_Download_ID, enqueue);
        PrefEdit.commit();
        count++;
        BroadcastReceiver receiver = new BroadcastReceiver() {

            private int progress = 0;

            @Override
            public void onReceive(Context context, Intent intent) {
                if (count < count_max) {
                    DownloadManager.Request request = new DownloadManager.Request(
                            Uri.parse(SERVER_URL + "video" + count + ".mp4"));
                    request.setDescription("");
                    request.setTitle("Downloading...");
                    request.setDestinationInExternalPublicDir(
                            Environment.DIRECTORY_DOWNLOADS, "video" + count
                                    + ".mp4");
                    request.setShowRunningNotification(true);
                    enqueue = manager.enqueue(request);
                    Editor PrefEdit = preferenceManager.edit();
                    PrefEdit.putLong(strPref_Download_ID, enqueue);
                    PrefEdit.commit();
                    Log.d("ENQUEUE", "ENQUEUE: " + enqueue);
                    count++;
                }
            }
        };
        registerReceiver(receiver, new IntentFilter(
                DownloadManager.ACTION_DOWNLOAD_COMPLETE));
    }
} 
```

Logcat，我不明白错误：

```
12-20 10:17:06.859: E/ActivityThread(12324): Service com.example.downloadtest.VideosDownloader has leaked IntentReceiver com.example.downloadtest.VideosDownloader$1@4054a258 that was originally registered here. Are you missing a call to unregisterReceiver()?
    12-20 10:17:06.859: E/ActivityThread(12324): android.app.IntentReceiverLeaked: Service com.example.downloadtest.VideosDownloader has leaked IntentReceiver com.example.downloadtest.VideosDownloader$1@4054a258 that was originally registered here. Are you missing a call to unregisterReceiver()?
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:756)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:551)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:836)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:823)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:817)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
    12-20 10:17:06.859: E/ActivityThread(12324):    at com.example.downloadtest.VideosDownloader.onHandleIntent(VideosDownloader.java:132)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.os.Handler.dispatchMessage(Handler.java:99)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.os.Looper.loop(Looper.java:138)
    12-20 10:17:06.859: E/ActivityThread(12324):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:55:26.993

每当收到指定的 Intent 时都会调用 onHandleIntent()。因此，您多次注册 BroadcastReceiver。

因此，您要么必须在完成操作后调用 unregisterReceiver，要么在创建服务时注册 BroadcastReceive，而不是在触发 onHandleIntent 时注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:07:38.340

an`IntentService`在请求之间被杀死。

当您在服务中注册您的接收器时，您永远不会取消注册它，因此您“泄漏”它

将您的接收器移入您的`Activity`，在 中注册`onResume`和取消注册`onPause`。

然后每次您的寄存器收到广播时，都会向您的`Service`

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

> 注意：如果在 Activity.onResume() 实现中注册接收器，则应在 Activity.onPause() 中取消注册。（暂停时您不会收到意图，这将减少不必要的系统开销）。不要在 Activity.onSaveInstanceState() 中取消注册，因为如果用户移回历史堆栈，则不会调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:50:55.060

My idea is dont put or register broadcast receiver inside the service.It is a bad idea
you can start a service from broad cast receiver.
If you put/register broadcast receiver in the service,then you to need unregister it.It is more complex

# performance - vb6 adodb recordset manipulation

> ID：13968958
> 
> 赞同：1
> 
> 时间：2012-12-20T09:30:10.057
> 
> 标签：performance, collections, vb6, recordset

i am working with a vbaccelerators' sgrid and need to load records as fast as i can.

am want ti use a recordset (am already using a collection) to store loaded records so that i effect any changes to the grid on it, save the changes to the recordset until i click save, then update the database with the recordset.

currently i load data from database to collection, from collection to grid. this makes the app slow for over 10k records which have to all be loaded once not in batches. using a recrdset will avoid two looping as i mentioned above.

my questions is how to i insert, delete, update specifi record(s) in a recordset? are there any utility classes or libraries to acheive this?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:14:45.217

你看过下面的链接吗

[VB6 ADODB 记录集更新](https://stackoverflow.com/questions/6333700/vb6-adodb-record-set-update)

这将帮助您更新记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:47:57.867

您还可以使用连接的执行方法，如下所示。只需编写普通的 sql 插入查询并传递给连接执行方法。

```
 Dim strConnection As Strin
 strConnection = "Provider=MSDASQL.1;Persist Security Info=False;Data Source=SepsisQStar"
 Set gcnMain = New ADODB.Connection
 gcnMain.Open strConnection

strCom =  "INSERT INTO RawData (FileName, FileTimeStamp, SampleName, MOverZ, Intensity) VALUES ('"
              strCom = strCom & FileName & "','"
              strCom = strCom & FileTimeStamp & "','"
              strCom = strCom & SampleName & "',"
              strCom = strCom & MoverZ & ","
              strCom = strCom & Intensity & ")"

gcnMain.Execute strCom, , adCmdText 
```

# python - Going from URL encoded accented e to accented e in a .json text file using Python

> ID：13968961
> 
> 赞同：0
> 
> 时间：2012-12-20T09:30:21.370
> 
> 标签：python, utf-8, character-encoding, url-encoding

I am copying strings containing the word `cafe` (but with an accented `e`) from a javascript source file into a python script where I need to do some processing over the data and then output some JSON. I am having some trouble getting my head around the encoding/decoding details though. This is perhaps best illustrated with an example:

```
$ python
>>> import urllib2, json
>>> the_name = "Tasty Caf%C3%E9"
>>> the_name
'Tasty Caf%C3%E9'
>>> the_name_unquoted = urllib2.unquote(the_name)
>>> the_name_unquoted
'Tasty Caf\xc3\xe9'
>>> json.dumps({'bla': the_name_unquoted})
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.7/json/__init__.py", line 231, in dumps
return _default_encoder.encode(obj)
File "/usr/lib/python2.7/json/encoder.py", line 201, in encode
chunks = self.iterencode(o, _one_shot=True)
File "/usr/lib/python2.7/json/encoder.py", line 264, in iterencode
return _iterencode(o, 0)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xc3 in position 9: invalid continuation byte 
```

I've spent some time trying to understand how encodings work, though clearly I'm not getting it. Exactly what encoding/format (any other appropriate terminology here?) is `the_name_unquoted` in above and what is it about it that utf8 cannot decode correctly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:39:04.943

那是因为 unicode 编码支持该字符。您可以通过将字符串转换为 unicode 来解决此问题。

```
the_name = u'Tasty Caf%C3%E9' 
```

或者，如果字符串已经存在，您可以对其进行转换。

```
the_name = 'Tasty Caf%C3%E9'
the_name = unicode(the_name) 
# or..
the_name = the_name.decode('utf8', the_name) 
```

# puppet - Whats the best approach to create a repo of the installers to be used for installing and upgrading in the puppet managed nodes

> ID：13968963
> 
> 赞同：0
> 
> 时间：2012-12-20T09:30:29.230
> 
> 标签：puppet, configuration-management

Lets take the example, I am having a jboss-4.2.3 installers as a .tar file. In general to install jboss, i ll 1\. untar the jboss-4.2.3 into a prefefined folder (opt/server/jbossas/) into multiple servers 2\. untar the openjdk into a preferined path (/opt/software/java)set the path in the bash.profile 3\. Create server profile in the place where jboss is installed 4\. Start the server.

Lets say that I have to do this in 16 nodes (servers). Now, I should store the jboss and openjdk installers at a central location and it should be transferred to the nodes before the 1st step can begin.

I wrote the manifest to perform the requirements form 1 to 4\. But not sure how can I automate the transfer of the installers from a central repo. I am not worried about the type of central repo. It can be a ftp or puppet or anything else.

Please help me. I was going through filebucket. Will this help or should i write a manifest to get this file from a ftp server?

How to create a file repo which can be referred in puppet manifests?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:43:20.523

为 Puppet 提供安装程序的一般解决方案是设置您自己的软件包存储库（而不仅仅是一个文件存储库）。

[http://www.techrepublic.com/blog/opensource/create-your-own-yum-repository/609](http://www.techrepublic.com/blog/opensource/create-your-own-yum-repository/609)

然后，您可以使用 Puppet 的内置包资源来轻松安装/升级/卸载

[http://docs.puppetlabs.com/references/latest/type.html#package](http://docs.puppetlabs.com/references/latest/type.html#package)

以下项目似乎提供了 JBoss 的 rpm/deb 版本，您可以将其发布到您的存储库

[https://github.com/floreal/jboss-deb-package](https://github.com/floreal/jboss-deb-package)

[http://code.google.com/p/jboss-rpm/](http://code.google.com/p/jboss-rpm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:36:18.563

我不确定你的确切问题，但你可以看看这个并得到一个想法......

在大多数情况下，文件从 puppetmaster 传输到客户端。如果您在模块中定义了解压缩和安装软件包的策略，例如模块名称 jboss，您可以将 tarball 保留在 puppet master 中的此类结构中，并从 puppet 客户端运行 puppet 代理：

```
/etc/puppet/module/jboss/files/jboss_pkg.tar 
```

然后，您的客户政策应在以下内容中说明如下内容： 例如，

```
/etc/puppet/modules/jboss/manifests/init.pp
class jboss {
    file { '/tmp/installation/jboss_pkg.tar' :
            source => "puppet:///modules/jboss/jboss_pkg.tar",
         }

    #You can then right a small script that will execute all the installation process. You can use 'exec' in puppet to do that.

    exec { 'install_jboss' :
           command => "/path/to/install_jboss.sh",
           require => File["/tmp/installation/jboss_pkg.tar"],
           onlyif => "/check/that/it/is/not/installed/already",
         }
     ## and write other execs to start the server or enable services etc...
 }

  # In site.pp
  node 'client.mytest.org' {
       include jboss
  } 
```

# linux - script for moving log files in hourly folders

> ID：13968964
> 
> 赞同：1
> 
> 时间：2012-12-20T09:30:30.133
> 
> 标签：linux, bash, shell, unix, scripting

This is my script :

```
 set -x

    PTH=/data0101/track_logs
    cd /data0101/track_logs

    if [[ `ls -lrth | grep IMEI_TRACK | wc -l` -gt 0 ]];
    then
       FILE_COUNT=`ls -lrth | grep IMEI_TRACK | wc -l`

       YEAR=`date | awk '{print $6}'`
       mkdir $PTH/$YEAR

       MONTH=`date | awk '{print $2}'`
       mkdir $PTH/$YEAR/$MONTH

       DAY=`date | awk '{print $3}'`

       HOUR=`date | awk '{print $4}' | cut -d":" -f 1`
       if [[ $HOUR -ne 0 ]];
       then
          HR=$(( $HOUR - 1 ))
       else
          DAY=$(( $DAY - 1 ))
          HR=23
          mkdir $PTH/$YEAR/$MONTH/$DAY
       fi
       case $HR  in
            00-23) for (( i=1;i<=$FILE_COUNT;i++ ))
                   do
                    chk=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 | awk '{print    $8}' | cut -d: -f1`
                    FILE=`ls -lrth | grep IMEI_TRACK |  awk '{print $9}'`
                    if [[ $chk -eq $HR ]];
                    then
                       mkdir $PTH/$YEAR/$MONTH/$DAY/$HR
                       mv $FILE $PTH/$YEAR/$MONTH/$DAY/$HR/
                    else
                       break
                    fi
                   done ;;

       esac
    fi 
```

When I run the script this is what I get:

```
 + PTH=/data0101/track_logs
    + cd /data0101/track_logs
    ++ ls -lrth
    ++ grep IMEI_TRACK
    ++ wc -l
    + [[ 200 -gt 0 ]]
    ++ ls -lrth
    ++ grep IMEI_TRACK
    ++ wc -l
    + FILE_COUNT=200
    ++ date
    ++ awk '{print $6}'
    + YEAR=2012
    + mkdir /data0101/track_logs/2012
    mkdir: cannot create directory `/data0101/track_logs/2012': File exists
    ++ date
    ++ awk '{print $2}'
    + MONTH=Dec
    + mkdir /data0101/track_logs/2012/Dec
    mkdir: cannot create directory `/data0101/track_logs/2012/Dec': File exists
    ++ date
    ++ awk '{print $3}'
    + DAY=20
    ++ date
    ++ awk '{print $4}'
    ++ cut -d: -f 1
    + HOUR=14
    + [[ 14 -ne 0 ]]
    + HR=13
    + case $HR in 
```

This clearly shows that this script is not getting further than the case statement. Is there anything wrong with my case construct. Kindly help. Also suggestions on overall development of the script is also welcome.

I tried using the range in my case construct like this:

```
 case $HR  in
                [00-23]) for (( i=1;i<=$FILE_COUNT;i++ ))
                           do
                            chk=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 | awk '{print    $8}' | cut -d: -f1`
                            FILE=`ls -lrth | grep IMEI_TRACK |  awk '{print $9}'`
                            if [[ $chk -eq $HR ]];
                            then
                               mkdir $PTH/$YEAR/$MONTH/$DAY/$HR
                               mv $FILE $PTH/$YEAR/$MONTH/$DAY/$HR/
                            else
                               break
                            fi
                           done ;;

      esac 
```

bu this doesn't help as well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:17:36.297

您需要单独检查每个数字，例如`[0-2][0-9]`，您也可以使用`find`而不是循环遍历文件，`mkdir`如有`-p`必要，可以选择创建父目录，并使用多个变量赋值`read`：

```
#!/bin/bash

PTH="/data0101/track_logs"
cd "$PTH"

if [[ $(ls -lrth | grep IMEI_TRACK | wc -l) -gt 0 ]]; then
    DATE=$(date +"%Y %m %d %H")
    DIR=${DATE// /\/}
    read YEAR MONTH DAY HOUR <<<$DATE

    case $HOUR  in
        [0-2][0-9]) mkdir -p "$DIR"
                    find ./ -mtime -1 -name "*IMEI_TRACK*" -type f -exec mv "{}" "$DIR" \;;;

    esac
fi 
```

如果您只是将此脚本放在文件夹中，则无需检查小时`/etc/cron.hourly`，那么您的脚本将如下所示：

```
#!/bin/bash

PTH="/data0101/track_logs"
cd "$PTH"

DIR=$(date +"%Y/%m/%d/%H")
mkdir "$DIR"

find ./ -mtime -1 -name "*IMEI_TRACK*" -type f -exec mv "{}" "$DIR" \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:57:46.267

这是我的最终脚本：

```
 cd /data0101/track_logs

    if [[ `ls -lrth | grep IMEI_TRACK | wc -l` -gt 0 ]];
    then
       FILE_COUNT=`ls -lrth | grep IMEI_TRACK | wc -l`
       YEAR=`date | awk '{print $6}'`
       MONTH=`date | awk '{print $2}'`
       DAY=`date | awk '{print $3}'`
       HOUR=`date | awk '{print $4}' | cut -d":" -f 1`
       if [[ "$HOUR" -ne 0 ]];
       then
          HR=$(( $HOUR - 1 ))
       else
          DAY=$(( $DAY - 1 ))
          HR=23
       fi

       case $HR in
                 [0-9]) for (( i=1;i<=$FILE_COUNT;i++ ))
                          do
                           chk_hr=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 | awk '{print $8}' | cut -d: -f1`
                           chk_day=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 | awk '{print $7}'`
                           FILE=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 |  awk '{print $9}'`
                           if [[ $chk_hr -eq $HR && $chk_day -eq $DAY ]];
                           then
                              mkdir -p $DIR_PATH/$YEAR/$MONTH/$DAY/$HR
                              mv $FILE $DIR_PATH/$YEAR/$MONTH/$DAY/$HR/
                           fi
                          done ;;
                 [1-2][0-9]) for (( i=1;i<=$FILE_COUNT;i++ ))
                               do
                                chk_hr=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 | awk '{print $8}' | cut -d: -f1`
                                chk_day=`ls -lrth | grep IMEI_TRACK | head -$i | tail -1 | awk '{print $7}'`
                                FILE=`ls -lrth | grep IMEI_TRACK |  head -$i | tail -1 | awk '{print $9}'`
                                if [[ $chk_hr -eq $HR && $chk_day -eq $DAY ]];
                                then
                                   mkdir -p $DIR_PATH/$YEAR/$MONTH/$DAY/$HR
                                   mv $FILE $DIR_PATH/$YEAR/$MONTH/$DAY/$HR/
                                fi
                               done ;;
        esac
    fi
enter code here 
```

虽然有点冗长，但它的工作方式正是我想要的。感谢大家的支持。

# java - Java MTP library that works on Windows

> ID：13968965
> 
> 赞同：16
> 
> 时间：2012-12-20T09:30:31.860
> 
> 标签：java, android, windows, mtp

Does anybody know of a **working** Java MTP library for Windows? I'm trying to pull/push files into an Android device and I can't use adb. So far I've found [jMTP](http://code.google.com/p/jmtp/) and [jusbpmp](http://code.google.com/p/jusbpmp/) but neither of them work properly:

*   jMTP successfully recognizes my Android devices but as of this writing there is no support for file transfer of any kind. All I've managed to do is go through the file system.
*   jusbpmp is supposed to be able to but its awfully buggy and fails to recognize some of the devices I'm trying to develop for.

**Worst of all**: Both projects seem to be dead and buried.

# php - 如何不在独白日志行中显示最后一个括号？

> ID：13968967
> 
> 赞同：23
> 
> 时间：2012-12-20T09:30:38.563
> 
> 标签：php, symfony, monolog

```
// in my PHP code
$log = new Logger('LaurentCommand');
$log->pushHandler(new StreamHandler('./app/logs/LaurentCommand.log'));
$log->addInfo("Start command",array('username' => 'Joe', 'Age' => '28')); 
```

结果日志文件 LaurentCommand.log ：

> [2012-12-20 10:28:11] LaurentCommand.INFO: 启动命令 {"username":"Joe","Age":"28"} []

为什么最后这个括号？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-20T11:31:23.773

那是额外的数据。[LineFormatter](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Formatter/LineFormatter.php#L24)的默认格式是`"[%datetime%] %channel%.%level_name%: %message% %context% %extra%\n"`. 用户名/年龄是上下文，通常为空的额外内容会导致此空数组`[]`。

如果您使用处理器将数据附加到日志记录，他们通常会将其写入额外的键以避免与上下文信息冲突。如果这对您来说确实是个问题，您可以更改默认格式并省略`%extra%`.

编辑：从 Monolog 1.11 开始， LineFormatter 在构造函数中有一个 $ignoreEmptyContextAndExtra 参数，可让您删除这些参数，因此您可以使用它：

```
// the last "true" here tells it to remove empty []'s
$formatter = new LineFormatter(null, null, false, true);
$handler->setFormatter($formatter); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-04T12:09:53.113

老问题，但抛出另一个简单的选择：

```
$slackHandler = new \Monolog\Handler\SlackWebhookHandler(...);
$slackHandler->getFormatter()->ignoreEmptyContextAndExtra(true); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-12T18:34:55.740

I know this is an old question, but I ran into it too and I want to share my solution.

The brackets at the end of log lines are due to how Monolog's `LineFormatter` tries to `json_encode()` the data in `%extra%`. The brackets are a JSON representation of an empty array.

To turn off those brackets, I ended up having to subclass `Monolog\Formatter\LineFormatter` with my own class and overwrite its `convertToString($data)` function so it returns an empty string if there's no data present. Here's my new subclass:

```
namespace My\Fancy\Monolog;
use Monolog\Formatter\LineFormatter;

class LineFormatter extends LineFormatter {

    protected function convertToString($data)
    {
        if (null === $data || is_scalar($data)) {
            return (string) $data;
        }

        // BEGIN CUSTOM CODE - This section added to prevent empty 
        // brackets from appearing at the end of log lines:
        if ((is_array($data) && !$data) 
            || is_object($data) && !get_object_vars($data)) {
            return '';
        }
        // END CUSTOM CODE 

        $data = $this->normalize($data);
        if (version_compare(PHP_VERSION, '5.4.0', '>=')) {
            return $this->toJson($data);
        }

        return str_replace('\\/', '/', json_encode($data));
    }
} 
```

You can use this class by injecting an instance of it into your Monolog handler class, like so:

```
$handler = new Monolog\Handler\StreamHandler('/path/to/my/logfile', 'debug');
$handler->setFormatter(new My\Fancy\Monolog\LineFormatter());
$monolog->pushHandler($handler); 
```

Enjoy!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-03T10:56:22.433

Symfony 4 解决方案：

1.  创建记录器：

    ```
    use Monolog\Formatter\LineFormatter;

    class Formatter extends LineFormatter
    {
        public function __construct(
            $format = null,
            $dateFormat = null,
            $allowInlineLineBreaks = false,
            $ignoreEmptyContextAndExtra = false
        ) {
            parent::__construct($format, $dateFormat, $allowInlineLineBreaks, true);
        }
    } 
    ```

2.  在中定义格式化程序`services.yml`：

    ```
    log.custom.formatter:
      class: App\Formatter 
    ```

3.  为所需的环境定义格式化程序`monolog.yml`：

    ```
    handlers:
      main:
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%.log"
        level: debug
        channels: ["!event"]
        formatter: log.custom.formatter 
    ```

# android - 4.2 之前的设备上的 Photosphere

> ID：13968968
> 
> 赞同：1
> 
> 时间：2012-12-20T09:30:40.113
> 
> 标签：android, photosphere

在 4.2 之前的 android 设备上是否有可能通过意图或其他方式查看 photosphere 图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:31:19.330

查看 photospheres 可用于所有 2.2+ 设备与 Google Play 服务 2.0 检查示例和[sdk 参考](http://developer.android.com/reference/com/google/android/gms/panorama/PanoramaClient.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:01:12.873

你应该检查[这个](https://github.com/kennydude/photosphere)项目。虽然它不像简单地启动那么容易，`Intent`但绝对有可能在旧设备上进行这项工作。

下面是它在浏览器中的外观示例：http: [//kennydude.github.com/photosphere/test.html](http://kennydude.github.com/photosphere/test.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T17:30:09.323

正如paiNie 所说，我们已经通过Google Play Services 在所有运行2.2 和up 的设备上提供了Photo Sphere 查看器。

您可以在此处找到一些如何使用它的示例代码： [http ://android-developers.blogspot.com/2012/12/new-google-maps-android-api-now-part-of.html](http://android-developers.blogspot.com/2012/12/new-google-maps-android-api-now-part-of.html)

# google-app-engine - 将数据从 Google Datastore (GAE) 迁移到 Google Cloud SQL

> ID：13968969
> 
> 赞同：1
> 
> 时间：2012-12-20T09:30:41.653
> 
> 标签：google-app-engine, cloud, google-cloud-sql

我将 Google Datastore 用于我的应用程序，现在出于报告目的，我想将我的数据从 GAE Datastore 迁移到 Google Cloud SQL。

我有什么选择？（我有超过 100,000 个条目，并且在延期工作中完成它需要很多时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:29:57.707

阅读您的问题，您似乎有一个两部分的问题：1）将所有过去的数据一次性导出到 Cloud SQL，2）设置某种定期 ETL 过程以保持两个数据库同步。

对于一次性转储，根据阅读文档，您似乎有几个选择：

1.  使用[Bulkloader 将所有数据导出](https://developers.google.com/appengine/docs/python/tools/uploadingdata)到 CSV，然后将其加载到本地 MySQL 实例中，生成 mysqldump 并按照[本教程](https://developers.google.com/cloud-sql/docs/import_export)将其加载到 Cloud SQL 中，或者创建一个脚本来连接到 Cloud SQL 实例并加载一次数据一笔交易。
2.  以编程方式在您的应用程序中创建一个进程，以发布一个任务，将给定的数据写入 Cloud SQL 实例，并创建一个单独的工作线程，连接到 Cloud SQL 数据库并写入数据。

就个人而言，我会选择 bulkloader/local mysql/mysqldump 路线，因为您不会在主应用程序中添加任何丢弃代码。如果出现任何问题，您只需清除 Cloud SQL 实例并重新启动即可。

对于 ETL 部分，我建议使用任务队列路由，因为您将能够接近实时，但能够通过限制队列执行速度来控制成本。

编辑：这篇文章可能很有趣 - 涵盖从 GAE 到另一个数据库的数据迁移：[http](http://www-cs-students.stanford.edu/~silver/gae.html) ://www-cs-students.stanford.edu/~silver/gae.html （有意义的内容在咆哮部分之后......）

# joomla - 如何从 JOOMLA 2.5 中的 url 中删除 Itemid

> ID：13968971
> 
> 赞同：1
> 
> 时间：2012-12-20T09:30:41.943
> 
> 标签：joomla, joomla2.5

我在主页上有一些模块，它们的文章标题和链接必须在文章页面上重定向。

问题是，如果有与文章关联的菜单，那么当我单击文章标题时，文章会正确打开。但是如果没有与文章关联的菜单，则文章根本没有打开并重定向到再次主页。

模块文章链接具有 Itemid，它是 joomla 添加的默认 Itemid，当我从 url 手动删除该 Itemid 文章正确打开但 Itemid 不是。

这是我正在处理的站点链接，请看一下

[http://www.econewsindia.com/](http://www.econewsindia.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:10:54.500

我从您的网站发现您没有为文章类别创建适当的菜单项。遵循此程序。

1.  创建一个新菜单并将其命名为文章菜单或您喜欢的任何名称
2.  为该菜单下的每个“顶级”文章类别创建一个菜单项（不需要子类别）。使用“类别列表”或“类别博客”菜单项类型 - 首选第一个。
3.  如果您愿意，您可以使用菜单模块在前端显示此菜单，但这不是必需的。

现在，每篇文章都将有一个与之关联的正确项目 ID，并且您的文章将正确重定向。

# python - Python 正则表达式：排除 \r\n

> ID：13968973
> 
> 赞同：1
> 
> 时间：2012-12-20T09:30:51.280
> 
> 标签：python, regex, string

我试图从字符串中取出字母和空格，但它保留`\r\n`了我不想要的结果。还有一个函数可以返回不包括我给它的正则表达式的结果？

* * *

我需要排除的代码`\r\n`

```
region = ",,,Central California\r\n"

#\w Matches word characters.
#\s Matches whitespace
print re.findall(r"[\w\s]+", region) 
```

* * *

异常输出`['Central California']`

输出得到`['Central California\r\n']`

* * *

返回与正则表达式不匹配的所有内容

```
region = ",,,Central California\r\n"

#\W Matches nonword characters.
print re.exclude_function(r"[\W]+", region) 
```

* * *

异常输出`['Central California']`

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:36:05.563

在我看来，您正在解析一个 csv 文件。您应该考虑为此使用[内置的 Python 库](http://docs.python.org/2/library/csv.html)。

要删除尾随换行符，您可以使用[str.srip()](http://docs.python.org/2/library/stdtypes.html#str.strip)。

如果您想捕获每个片段中的所有内容，您可以做一些比这更简单的事情：

```
re.findall(r',?([^,]+)(?:,|\r\n)', string)
# this regex captures anything between `,` and/or a newline 
```

用你的字符串显示它：

```
>>> s = ",,,Central California\r\n"
>>> re.findall(r',?([^,]+)(?:,|\r\n)', s)
['Central California'] 
```

有多个项目：

```
>>> s = ",itemA,itemB,Central California\r\n"
>>> re.findall(r',?([^,]+)(?:,|\r\n)', s)
['itemA', 'itemB', 'Central California']

>>> s = "BASE,itemA,itemB,Central California\r\n"
>>> re.findall(r',?([^,]+)(?:,|\r\n)', s)
['BASE', 'itemA', 'itemB', 'Central California'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:33:14.813

`\s`包含`\r`and `\n`，所以只需使用

```
re.findall(r"[\w\t ]+", region) 
```

取而代之`"\t"`的是（作为制表符并且`" "`是空格）。

如果您想要一个函数返回与您的正则表达式不匹配的所有内容，只需对其进行全部替换：

```
def exclude_function(regex, string):
    return re.sub(regex, "", string) 
```

# android - Facebook 访问令牌过期问题

> ID：13968981
> 
> 赞同：-3
> 
> 时间：2012-12-20T09:31:04.080
> 
> 标签：android, facebook, facebook-graph-api, access-token, facebook-access-token

在我只想获取 facebook 页面的提要的情况下。如果我使用（即在应用程序本地存储）访问令牌将在 60 天内过期。是否有访问令牌永不过期的解决方案。我阅读了[链接](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)，但这表明我们需要为它创建一个应用程序访问令牌。这是可行的解决方案还是有什么方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:46:52.393

如链接所述，您可以使用应用访问令牌发布。

您不必创建应用访问令牌，而是在创建应用时自动生成。您可以在此处检查您的应用的访问令牌：

[https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)

但是，如果您将来重置您的应用程序密码，这将会改变。希望这可以帮助。

# java - Log4 记录器滚动附加程序

> ID：13968983
> 
> 赞同：1
> 
> 时间：2012-12-20T09:31:13.723
> 
> 标签：java, logging, log4j

我正在使用`org.apache.log4j.RollingFileAppender`并面临奇怪的问题。当我将日志文件名设置为时，`process.log`它不会翻转，但是当我将日志文件名设置为时，`process1.log`它`process2.log`可以正常工作并在给定最大文件大小后翻转。

```
log4j.appender.ProcessLogAppender=org.apache.log4j.RollingFileAppender
log4j.appender.ProcessLogAppender.File=D:/logs/process.log

log4j.appender.ProcessLogAppender.Append=true
log4j.appender.ProcessLogAppender.MaxFileSize=30KB
log4j.appender.ProcessLogAppender.MaxBackupIndex=5
log4j.appender.ProcessLogAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.ProcessLogAppender.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n

log4j.logger.com.util.ApplicationLogger=ALL,ProcessLogAppender 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:04:57.717

[像这样](http://www.imrantariq.com/blog/?p=491)正确创建 java 日志记录类并通过它读取您的属性文件。重启服务器。这些将解决这个问题。

这些线非常重要。

```
private static Properties loggerProperties = LoggerClassName.read(“log4j.properties”);

static Logger validation =
Logger.getLogger(LoggerClassName.class);

static {
  PropertyConfigurator.configure(loggerProperties);
  validation.setLevel(Level.DEBUG);
} 
```

# windows - 删除 hiberfil.sys 和 pagefile.sys

> ID：13968986
> 
> 赞同：1
> 
> 时间：2012-12-20T09:31:16.203
> 
> 标签：windows

我假设在 Windows 未运行时删除 hiberfil.sys 和 pagefile.sys 是保存的，并且它们将在下次 Windows 启动时再次创建。这个对吗？

我想创建分区的图像并最小化图像大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:38:14.320

`hiberfil.sys`用于休眠窗口（它需要一个地方来存储 RAM 内容）。`pagefile.sys`用于分页机制。

两者都可以删除（尽管 windows 会阻止它，但您需要在 windows 不运行时这样做）。但最好更改图像创建方法以跳过这些文件或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:39:05.957

我相信它是重新创建的，不一定是在 Windows 启动时，而是在手动再次打开休眠时。

有多种方法可以做到这一点并防止它再次出现

[https://superuser.com/questions/141033/why-does-hiberfil-sys-come-back-from-the-dead-on-windows-7](https://superuser.com/questions/141033/why-does-hiberfil-sys-come-back-from-the-dead-on-windows-7)

# c# - Linq to Objects中的自定义比较器

> ID：13968987
> 
> 赞同：0
> 
> 时间：2012-12-20T09:31:17.373
> 
> 标签：c#, linq

我有一个清单。

其中 T 是一个类，具有 int 和其他参数等属性

例如

```
 ID Name

  1  Apple
  2  Banana
  3  Test 
```

现在我有另一个指定顺序的列表

```
Like 2,1,3 
```

所以我想使用 2,1,3 像 Banana,Apple 对它们进行排序，然后测试

我怎样才能用 IComaparer 实现这个

目前我尝试这个但它失败了

```
 test = test.OrderBy(p=>  SortableIntList.Contains(p.ID)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:39:54.477

为了快速让它工作，

```
test = test
    .Where(p => SortableIntList.Contains(p.ID))
    .OrderBy(p => SortableIntList.IndexOf(p.ID)); 
```

为了提高效率，您可能希望将排序顺序存储在字典中（ID => 位置），然后像这样调用它

```
var SortableIntDictionary = SortableIntList
    .Select((ID, Index) => new { ID, Index })
    .ToDictionary(p => p.ID, p => p.Index);
test = test
    .Where(p => SortableIntDictionary.ContainsKey(p.ID))
    .OrderBy(p => SortableIntDictionary[p.ID]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:44:37.280

试试这个，不需要比较器

```
 // Setup test data
 var orderList = new List<int> { 2, 1, 3 };

 var stuffList = new List<Stuff> { 
            new Stuff { Id = 1, Name = "Apple" },
            new Stuff { Id = 2, Name = "Banana" },
            new Stuff { Id = 3, Name = "Test" }
        };

 // Do sort according to list
 var result = orderList.Select(idx => stuffList.Where(s => s.Id == idx)); 
```

编辑：创建 ID 查找可能会更快：

```
var stuffDictionary = stuffList.ToDictionary(s => s.ID, s => s);
var result = orderList.Where(idx => stuffDictionary.ContainsKey(idx))
                      .Select(idx => stuffDictionary[idx]); 
```

# php - php在类中的函数之间共享变量

> ID：13968988
> 
> 赞同：1
> 
> 时间：2012-12-20T09:31:21.550
> 
> 标签：php, variables, share

我是 PHP OOP 的新手，如何在类内的函数之间共享或传递变量？

```
class Sample {

    public function One() {

         $var1 = 'abc';
         $var2 = 'xyz';

        return $var1;
    }

    public function Two() {

        $var3 = $var1.$var2;

        return $var3;
    }

} 
```

还是可以返回多个值？

谢谢。

**更新**

```
class Sample {

// This is how you declare class members
public $var1, $var2;

public function One() {

     // You use $this to refer class memebers
     $this->var1 = 'abc';
     $this->var2 = 'xyz';

    return $this->var1;
}

public function Two() {

    $var3 = $this->var1.$this->var2;

    return $var3;
}

}

$test = new Sample();
echo $test->Two(); 
```

我已经测试了一个提供的示例，当调用函数 Two() 时它在我的页面中返回空白，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:34:11.497

使变量成为公共变量，在之后声明`class Sample {`，它们可以在类内的任何地方使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:35:53.810

在类中声明变量并使用 $this 访问变量

```
class Sample {
    public $var1;
    public $var2;

    public function One() {
        $this->var1 = 'abc';
        $this->var2 = 'xyz';
        return $this->var1;
    }

    public function Two() {
        $var3 = $this->var1.$this->var2;
        return $var3;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:37:35.697

```
class Sample {

    // This is how you declare class members
    protected $var1, $var2;

    public function One() {

         // You use $this to refer class memebers
         $this->var1 = 'abc';
         $this->var2 = 'xyz';

        return $this->var1;
    }

    public function Two() {

        $var3 = $this->var1.$this->var2;

        return $var3;
    }

} 
```

# android - Layout not changed on rotation

> ID：13968998
> 
> 赞同：0
> 
> 时间：2012-12-20T09:31:45.150
> 
> 标签：android, android-layout, android-screen-support

I have 2 layouts with the same name located at layout and layout-land folders. However the landscape version sometimes isn't applied though the orientation change is detected in `onConfigurationChanged(Configuration newConfig)`. Strange thing is it happens only in specific cases. My app workflow is : LoginActivity->TabActivity The problematic activity is in one of the tabs. When I leave login in landscape it is allright and behaves correctly in all cases. When I leave login in portrait the activity in one of the tabs doesn't use the correct layout when I rotate the screen. Any idea what's wrong ? I can post some code if needed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:35:11.963

Add `android:configChanges="orientation"` for your Activity in Androidmanifest.xml file....