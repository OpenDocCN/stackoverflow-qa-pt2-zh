# StackOverflow 问答 13488000-13488999

# java - 由于 return 语句，我无法理解哪些代码无法编译

> ID：13488003
> 
> 赞同：1
> 
> 时间：2012-11-21T07:04:24.923
> 
> 标签：java

```
import java.util.Scanner;
public class Test{
   public static int[] calculateFactors(int n){
      int[] array = new int[n];
      for(int i = 0; i<=n;i++){
         if(n%i==0){
            return array[i];
         }
      }
   }

   public static void main(String[] args){
      System.out.println("Please enter the number you want to find the factors for:");
      Scanner input = new Scanner(System.in);
      int n = input.nextInt();
      System.out.println(calculateFactors(n));
   }
} 
```

我不明白为什么我会出错。我正在尝试编写一个代码，其中用户输入一个数字，程序返回这个数字的所有因素。谁能告诉我为什么当我无法返回具有相应 i 因子的数组时。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T07:06:45.630

查看您的代码（为清楚起见添加了空格）：

```
public static int[] calculateFactors(int n) {
    int[] array = new int[n];
    for(int i = 0; i <= n; i++) {
        if(n % i == 0) {
            return array[i];
        }
    }
} 
```

有两个问题：

*   您的 return 语句与声明的返回类型不匹配。您试图返回一个`int`，但您的方法声明它返回一个`int[]`
*   由于您的方法是非无效的，因此方法的结尾必须无法到达......您*必须*通过任何可能的路径返回一个值。您的代码并非如此。如果`n`是 -1 会发生什么？它永远不会通过循环，所以它永远不会返回。更一般地说，编译器会假设（几乎）任何`if`条件*都可能*为假。

现在，至于如何修复它 - 给定方法名称，听起来你真的*想要*返回所有因素......所以你不应该在找到*第*一个因素后立即返回。我会将因子收集在 a`List<Integer>`而不是数组中。将`return`语句转换为`add`调用，然后在循环结束时返回。哦，您可能希望以`i`1 而不是 0 开始循环...

不过，所有这些都是针对这个特定问题的。更一般地说，您应该查看编译器给您的错误。他们应该为您提供您自己解决此问题所需的所有信息。既然您*确实*了解了问题，请再次阅读这些消息并尝试找出之前阻止您理解它的原因。你能自己解决，还是你错过了一些重要的概念？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:05:26.623

到达循环结束时缺少返回

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:10:48.607

两个错误首先：

```
for(int i = 0; i<=n;i++){ 
```

应该

```
for(int i = 0; i<n;i++){ 
```

第二：

```
 for(int i = 0; i<=n;i++){
  if(n%i==0){
    return array[i];
  }
} 
```

应该

```
for(int i = 0; i<=n;i++){
    if(n%i==0){
       return array[i];
    }
 }
return something 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:07:38.653

问题在于声明：

```
 return array[i]; 
```

这是无效的，因为您试图返回数组的索引，这是一个 int，您的方法签名正在返回 int[] 更改为此

```
 return array; 
```

# iframe - 在 IFrame 中发生重定向

> ID：13488004
> 
> 赞同：0
> 
> 时间：2012-11-21T07:04:27.857
> 
> 标签：iframe

我有一个我想放入 IFrame 的附属 URL，这样当用户访问我的 IFrame 页面时，附属 cookie 就会被丢弃在他们的计算机上。但是，附属 URL 不是实际的产品页面，而是在 cookie 被删除后重定向到产品页面。当它重定向到产品页面时，IFrame 正在爆发。有什么我可以做的，这样当附属 URL 重定向时，它仍然停留在同一个 IFrame 页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:18:19.123

您可以编写一些 javascript 来防止帧破坏，如 Jeff Atwood 这篇精彩的博客文章中所述：

[http://www.codinghorror.com/blog/2009/06/we-done-been-framed.html](http://www.codinghorror.com/blog/2009/06/we-done-been-framed.html)

我已经为我自己的一个网络应用程序编写了一个函数。它只会在指定的时间内阻止破坏，因此用户仍然可以根据需要导航离开页面。

```
function preventBusting (time, frame) {
  var prevent_bust = 0;
  window.onbeforeunload = function () { prevent_bust++ };

  var intervalID = setInterval(function () {
    if (prevent_bust > 0) {
        prevent_bust -= 2;
        window.location.assign(url_204);    
        frame.text("This site does not allow framing.");
    }
  }, 1);

  setTimeout(function () {
    window.clearInterval(intervalID);
  }, time);
} 
```

您应该在将 iFrame 添加到页面后立即调用此函数。在这种情况下，'time' 是防止破坏的时间量（以毫秒为单位），而 'frame' 是对 iframe 的 jQuery 引用，因此如果尝试破坏，它可以用一些文本替换。您还需要一个返回 204 的 URL，该 URL 存储在此处的“url_204”变量中。

# c# - 单击按钮时动态添加新文本框

> ID：13488006
> 
> 赞同：7
> 
> 时间：2012-11-21T07:04:37.623
> 
> 标签：c#, asp.net, dynamic, controls

我正在使用此代码

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
<asp:Button ID="addnewtext" runat="server" Text="Add" onclick="addnewtext_Click" width="76px" /> 
```

和**aspx.cs**页面代码：

```
TextBox tb;
static int i = 0;
protected void addnewtext_Click(object sender, EventArgs e)
{
    tb = new TextBox();
    tb.ID = i.ToString();

    PlaceHolder1.Controls.Add(tb);
    i++;
} 
```

每次单击按钮时，我都想添加另一个文本框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T07:07:55.673

**原因：** 当您再次单击按钮而不是回发到服务器端时，它会删除以前添加的动态文本框

**解决方案：** 要再次添加它，您需要这样做

```
 TextBox tb;
static int i = 0;
protected void addnewtext_Click(object sender, EventArgs e)
{
        i++;
    for(j=0;j<=i;j++)
    {
    tb = new TextBox();
    tb.ID = j.ToString();

    PlaceHolder1.Controls.Add(tb);
    }

} 
```

这意味着您需要再次创建添加的文本框...因为您正在向页面动态添加控件...

像这样的文章可能会对您有所帮助：[**在 ASP.NET 应用程序中为动态创建的控件保留状态**](http://www.codeproject.com/Articles/3684/Retaining-State-for-Dynamically-Created-Controls-i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:25:26.803

让我们来看一个列表视图

```
<asp:ListView ID="lvDynamicTextboxes" runat="server" 
  ItemPlaceholderID="itemPlaceholder">   <LayoutTemplate>     <table>       <asp:PlaceHolder ID="itemPlaceholder" 
        runat="server"></asp:PlaceHolder>     </table>   </LayoutTemplate>   <ItemTemplate>     <tr>       <asp:TextBox ID="txtText" runat="server">       </asp:TextBox>     </tr>   </ItemTemplate>      
</asp:ListView>

<asp:Button ID="btnAddTextBox" runat="server" 
  Text="Add" onclick="btnAddTextBox_Click" /> 
```

还有一些代码

```
private void BindListView()
{
    //get the current textbox count     int count = 1;
    if (ViewState["textboxCount"] != null)
        count = (int)ViewState["textboxCount"];

    //create an enumerable range based on the current count     IEnumerable<int> enumerable = Enumerable.Range(1, count);

    //bind the listview     this.lvDynamicTextboxes.DataSource = enumerable;
    this.lvDynamicTextboxes.DataBind();
}

private void IncrementTextboxCount()
{
    int count = 1;
    if (ViewState["textboxCount"] != null)
        count = (int)ViewState["textboxCount"];

    count++;
    ViewState["textboxCount"] = count;
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
   {
        this.BindListView();  
    }
}

protected void btnAddTextBox_Click(object sender, EventArgs e)
{
    this.IncrementTextboxCount();
    this.BindListView();
} 
```

现在要从这些添加的文本框中**提取值：**

```
private IList<string> GetValues()
{
    List<string> values = new List<string>();
    TextBox txt = null;
    foreach (ListViewItem item in this.lvDynamicTextboxes.Items)
    {
        if (item is ListViewDataItem)
       {
            txt = (TextBox)item.FindControl("txtText");
            values.Add(txt.Text);
        }
    }
    return values;
} 
```

# linux - Linux上有任何可用的图像库来获取原始图像中剪切小图像的位置吗？

> ID：13488007
> 
> 赞同：0
> 
> 时间：2012-11-21T07:04:45.767
> 
> 标签：linux, image-processing

假设我有一个名为 的小图像`sub-imag.png`，它是从一个名为 的大图像中剪裁出来的`imag.png`，然后，我想`sub-imag.png`在`imag.png`.

linux上是否有任何图像库可以做这种工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:16:32.610

请查看下一个库：

*   [VlFeat](http://www.vlfeat.org/)
*   [开放式CV](http://opencv.willowgarage.com/wiki/)

但我相信最能满足您需求的是[ImageMagic](http://www.imagemagick.org/script/compare.php)及其[compare()](http://imagemagick.org/Usage/compare/)函数，因为它很简单。

# android - 以编程方式将 RelativeLayout toRightOf 更改为 toLeftOf

> ID：13488013
> 
> 赞同：8
> 
> 时间：2012-11-21T07:05:40.163
> 
> 标签：android, android-relativelayout

我正在制作聊天应用程序。我想把时间戳放在聊天气泡旁边。消息将左对齐（用于接收）和右对齐（用于发送）。

所以，我正在寻找一种方法来更改`toLeftOf`为`toRightOf`. 现在，它看起来像这样：

![时间戳错误对齐](../Images/38b15526f79b07f5d041ca7ddad89ec8.png)

这是我的每条消息的 XML 代码（我有`ArrayAdapter`这个处理）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/bubble"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#ffffff" />

        <TextView
            android:id="@+id/timeStamp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/bubble" />

</RelativeLayout> 
```

我四处搜索并找到了这个，但不起作用：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
     RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
if(isReceivedMessage){
    params.addRule(RelativeLayout.RIGHT_OF, R.id.bubble);
}
else{
    params.addRule(RelativeLayout.LEFT_OF, R.id.bubble);
}
timeStampTextView.setLayoutParams(params); 
```

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T06:41:52.387

试试这个从任何视图中删除**toRightOf**和**toLeftOf**属性。我正在从 textview 中删除这些属性。

```
 TextView header2=(TextView) findViewById(R.id.text_view_header_shoppinglist);
        RelativeLayout.LayoutParams mLayoutParams2=(RelativeLayout.LayoutParams)header2.getLayoutParams();
        mLayoutParams2.addRule(RelativeLayout.LEFT_OF,0);
        mLayoutParams2.addRule(RelativeLayout.RIGHT_OF,0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:13:58.850

**Rewrite**从当前 TextView 中
移除该属性，然后创建两个不同的 LayoutParams：一个 for和一个 for 。您可以根据需要切换参数。`layout_toRightOf``toRightOf``toLeftOf`

另一种方法是使用具有两种布局的自定义适配器。这种方法应该更快，因为您不是在运行时重新安排布局，而是在视图回收器中维护两个单独的“回复”和“发送”布局列表。

（请注意，API 17 已经引入[`removeRule()`](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#removeRule%28int%29)，但这还没有帮助。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:14:33.030

请使用以下代码。

```
RelativeLayout wrapper = (RelativeLayout) findViewById(R.id.wrapper);
if(isReceivedMessage){
    wrapper.setGravity(Gravity.RIGHT);
}
else{
    wrapper.setGravity(Gravity.LEFT);
} 
```

# android - 如何将 json 字符串值转换为 ArrayList 并在 Android ListView 中显示值

> ID：13488014
> 
> 赞同：-5
> 
> 时间：2012-11-21T07:05:43.480
> 
> 标签：android, json

这是我的 JSON 数组和对象。

```
{
"table1": [
    {
        "item_id": "1",
        "items": [
            "Veg Snacker",
            "Chicken Snacker",
            "Snack Box *1pc. Chicken & Fries",
            "Chicken Rizo",
            "Veg Stripes",
            "Popcorn Chicken"
        ]
    }
],
"success": 1
} 
```

所以，我想将此`items`字符串值显示到 android`ListView`中。我试过分配，但我不能得到它。所以请如果有人知道如何将 `json`字符串值转换为`ArrayList`.

我想要像这样的输出：

```
Veg Snacker
Chicken Snacker
Snack Box..... ect, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:21:13.780

**这应该让你开始：**

```
 String jsonString = "PUT JSON STRING HERE";
    JsonObject object = new JsonObject(jsonString);
    JsonArray tables = object.getJsonArray("table1");
    for(JsonObject value: tables){

        JsonArray items = value.getJsonArray("items");
        for(JsonObject item: items){
            Log.i("TAG",item.toString());
        }

    } 
```

请记住，此解决方案没有任何错误处理。我也没有测试过，我只是快速写了它。

# database - 如何对未在数据库级别链接的表使用休眠？

> ID：13488018
> 
> 赞同：0
> 
> 时间：2012-11-21T07:06:01.920
> 
> 标签：database, hibernate, hql

我是新来的冬眠。我需要使用休眠从我们的一个旧数据库中获取记录（似乎数据库没有定义正确的 FK 关系）。

```
public class Class1 {

    @Id
    int index;
    @ManyToOne
    private Class2 class2;
        ....
        ....

}

public class Class2 {
    ...

    private Collection<Class1> class1;

    @OneToMany
    @JoinColumn(name="index")
    public Collection<Class1> getClass1() {
        return class1;
    }
    public void setClass1(Collection<Class1> class1) {
        this.class1= class1;
    }
} 
```

我的要求是将对象作为集合获取。

```
Object1 of Class2 ->  Object1 of Class 1
                      Object2 of class 1
                      Object3 of class 1

Object1 of Class2 ->  Object4 of Class 1
                      Object5 of class 1
                      Object6 of class 1

Object1 of Class2 ->  Object7 of Class 1
                      Object8 of class 1
                      Object9 of class 1 
```

尽管未指定 FK 关系，但我在数据库中有公用表。

我只是想知道我是否可以将休眠关系（如@Onetomany）用于其表对应的实体在数据库级别没有链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:03:36.790

如果您的映射对应于数据库表的结构，那么一切都会按预期工作。是否存在外键约束这一事实并不重要。

你的映射是错误的。在双向 OneToMany 关联中，必须使用属性将*一侧*标记为*多侧的反面。*有关如何映射双向关联的信息，`mappedBy`请参阅[hibernate 文档。](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html_single/#collections-bidirectional)

# php - slideToggle 函数向下滑动选定的 div

> ID：13488020
> 
> 赞同：0
> 
> 时间：2012-11-21T07:06:12.060
> 
> 标签：php, jquery, mysql

我再次需要有关此 JQuery 代码的帮助，我真的对 JQuery 有一点经验，如果问题一团糟，我很抱歉。因为我从他们那里复制了这个，所以我把它归功于[http://www.w3schools.com](http://www.w3schools.com)

```
//the JS code
$(document).ready(function(){
$(".flip").click(function(){
    $(".panel").slideToggle("slow");
  });
});

<p class="flip">click to view full credit report details</p>
<div class='panel'>                              
 <?php                          
   display_column_name($table_name,$table_id);
 ?>
</div> 
```

好的，所以代码实际上是循环的，它会根据我的数据库中有多少数据而重复，所以现在的问题是当我点击“点击查看完整的信用报告详细信息”时，它会打开所有内容。我想要的是当我点击在那它只打开那部分......而不是其他......关于这个的任何想法？我真的需要帮助谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:10:15.147

每个 p 元素都应该有动态 id。它使用另一个动态设置的 id 调用 div。

在你的循环中你可以这样做

```
$(document).ready(function(){
$("#flip_<?php echo $id_from_database;?>").click(function(){
    $("#panel_<?php echo $id_from_database;?>").slideToggle("slow");
  });
}); 
```

和你的html，这也应该在循环内

```
<p id="flip_<?php echo $id_from_database;?>">click to view full credit report details</p>
<div id='panel_<?php echo $id_from_database;?>'>                              
 <?php                          
   display_column_name($table_name,$table_id);
 ?>
</div> 
```

**或者**

**第二种方法**

这个代码在循环内

```
<p id="flip_<?php echo $id_from_database;?>" onclick="expandDiv('<?php echo $id_from_database;?>')">click to view full credit report details</p>
    <div id='panel_<?php echo $id_from_database;?>'>                              
     <?php                          
       display_column_name($table_name,$table_id);
     ?>
    </div> 
```

循环外的javascript函数

```
function expandDiv(id){
   $("#panel_"+id).slideToggle("slow");
} 
```

在哪里

`$id_from_database`是来自数据库的记录的唯一 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:22:32.273

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
    $('.report a').click(function(){
        var id = $(this).attr("id");
        $('.detail').slideUp('slow');
        $('#detail_'+id).slideDown('slow');
    });
});
</script>

<style>
    .detail{display: none;}    
</style>
<div id="reports">

    <div class="report">
        <a id="1" href="#">click to view full credit report details</a>
        <div class="detail" id="detail_1">
            Here are details related to report # 1
        </div>
    </div>
    <div class="report">
        <a id="2" href="#">click to view full credit report details</a>
        <div class="detail" id="detail_2">
            Here are details related to report # 2
        </div>
    </div>
    <div class="report">
        <a id="3" href="#">click to view full credit report details</a>
        <div class="detail" id="detail_3">
            Here are details related to report # 3
        </div>
    </div>
</div> 
```

**循环：** 在你的循环中，你必须像这样制作动态 id

```
<div class="report">
    <a id="<?php echo $current_record_id; ?>" href="#">click to view full credit report details</a>
    <div class="detail" id="detail_<?php echo $current_record_id; ?>">
        <?php echo $detail; ?>
    </div>
</div> 
```

# ajax - 同一页面中的多个 Ajax 调用

> ID：13488021
> 
> 赞同：0
> 
> 时间：2012-11-21T07:06:19.593
> 
> 标签：ajax

我使用 ajax call for vote 和 unvote 相同的选择。如果用户第一次点击该图像将被替换为已投票，如果用户再次点击相同的选项进行取消投票，该图像将被替换为投票。单击该图像时，它将采用两个变量并转到 ajax 页面。

但在我的页面第一次它工作正常。但是第二次用户点击取消投票功能时，它不起作用并且没有将图像替换为取消投票。

谁能帮我解决这个问题。

[http://domian.com/mysite/pollpage.php?id=7&mview=6](http://domian.com/mysite/pollpage.php?id=7&mview=6)

这是网址。使用 fb 或 twitter 登录后，我们可以为选项投票

主页中的编码

```
$('.vote').click(function() {
    alert("=====");
    var valueid=$(this).attr("alt");
    alert(valueid);
    $.ajax({
        type: "POST",
        url: "voteajax.php",
        data: "votebtn="+valueid+""
    }).done(function( msg ) {
        var received_data=msg.trim();
        if(received_data=='0')
        {
            alert('Please sign in to vote!');
        }
        else
        {
            alert('received data'+received_data);
            gg2=received_data.split("/");
            var x=gg2[0];
            var no_of_vote=gg2[1];
            $('#totalnoofvotespan').html(no_of_vote);
            //$('#totalnoofvotespan').attr('innerHTML', 'newhtml');
            $('.vote').attr('src', 'images/voteblue.jpg');
            $('#vote'+x).attr('src', 'images/voted.jpg');
           window.location='<?php echo $_SERVER['REQUEST_URI']; ?>';
        }
    });
}); 
```

该 voteajax 页面的编码

```
$pollid=$ex[0];

$choiceid=$ex[1];

$sel_dup1=$jeob->SqlQuery("select * from je_user_vote where user_id='$userid' AND poll_id='$pollid' AND choice_id='$choiceid'");

$rr=mysql_num_rows($sel_dup1);

    if($rr=="0") 
    {

            $query=mysql_query("update je_user_vote set user_id ='$userid',poll_id='$pollid',choice_id ='$choiceid',datetime_voted='$date' where user_id ='$userid' AND poll_id='$pollid' ");
                    $query_fbfr = mysql_query("update je_fbvote_count set fbuser_id ='$userid',fbpoll_id='$pollid',fbchoice_id ='$choiceid',datetime_created='$date' where fbuser_id ='$userid' AND fbpoll_id='$pollid' ");

    }
    else
    {
        //echo "delete from je_user_vote where user_id='$userid' AND poll_id='$pollid' AND choice_id='$choiceid'";
        mysql_query("delete from je_user_vote where user_id='$userid' AND poll_id='$pollid' AND choice_id='$choiceid'");
            mysql_query("delete from je_fbvote_count where fbuser_id='$userid' AND fbpoll_id='$pollid' AND fbchoice_id='$choiceid'");
    } 
```

编码在 ajax 中，我在其中编写以更新和删除投票在上述编码中，更新工作正常，但是当尝试从主页删除时，它没有执行删除查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:09:56.270

它不应该取消投票。您的代码中似乎没有该逻辑。只有投票功能：

```
$('#vote'+x).attr('src', 'images/voted.jpg'); 
```

没有什么像：

```
if (voted) {
     $('#vote'+x).remove();
     voted = false;
} 
```

顺便说一句，我会投票给`'; drop table je_user_vote`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-17T07:27:15.317

```
**Index.php**

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- This is a pagination script using Jquery, Ajax and PHP
     The enhancements done in this script pagination with first,last, previous, next buttons -->

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Pagination with Jquery, Ajax, PHP</title>
        <link rel="stylesheet" href="pagingstyle.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
        <script type="text/javascript" src="script_div.js"></script>
        <script type="text/javascript" src="validate.js"></script>
    </head>
    <body>
    <div style="margin-top:10px;"> 
      <blockquote>&nbsp;</blockquote>
<!--    <iframe src="http://onlinewebapplication.com/ads.html" frameborder="0" scrolling="no" height="126px" width="100%"></iframe></div> -->
</div> 
<div align="center" style="font-size:24px;color:#cc0000;font-weight:bold">Pagination with jquery, Ajax and PHP</div>
<select id="user">
<option value="-1">select..</option>
<option value="activate">activate</option>
<option value="deactivate">deactivate</option>
</select>

        <div id="container" class="box">
            <div class="data" class="box"></div>
            <div class="pagination" class="box"></div>
        </div>
        <div id="container2">
            <div class="data2"></div>
            <div class="pagination2"></div>
        </div>
<!--------------------------------------------------------------------------------------------->
        <select id="car">
<option value="">select..</option>
<option value="white">white</option>
<option value="red">red</option>
<option value="black">black</option>
<option value="silver">silver</option>
</select>
        <div id="container1"  class="box1">
            <div class="data1"  class="box1"></div>
            <div class="pagination1"  class="box1"></div>
        </div>
        <div id="container3">
            <div class="data3"></div>
            <div class="pagination3"></div>
        </div>
    </body>
</html>
-----------------------------------------------------------------------------------
**`userdata.php`**
<?php
error_reporting(E_ALL ^ E_NOTICE);
if($_POST['page'])
{
$page = $_POST['page'];
$cur_page = $page;
$page -= 1;
$per_page = 1;
$previous_btn = true;
$next_btn = true;
$first_btn = true;
$last_btn = true;
$start = $page * $per_page;
include "config.php";
$query_pag_data = "SELECT * from users LIMIT $start, $per_page";
$result_pag_data = mysql_query($query_pag_data) or die('MySql Error' . mysql_error());
$msg = "";
while ($row = mysql_fetch_array($result_pag_data)) {
$htmlmsg=htmlentities($row['name']);
    $msg .= "<li><b>" . $row['id'] . "</b> " . $htmlmsg . "</li>";
}
$msg = "<div class='data'><ul>" . $msg . "</ul></div>"; // Content for Data
/* --------------------------------------------- */
$query_pag_num = "SELECT COUNT(*) AS count FROM users";
$result_pag_num = mysql_query($query_pag_num);
$row = mysql_fetch_array($result_pag_num);
$count = $row['count'];
$no_of_paginations = ceil($count / $per_page);

/*---------------Calculating the starting and endign values for the loop----------------------------------- */
if ($cur_page >= 7) {
    $start_loop = $cur_page - 3;
    if ($no_of_paginations > $cur_page + 3)
        $end_loop = $cur_page + 3;
    else if ($cur_page <= $no_of_paginations && $cur_page > $no_of_paginations - 6) {
        $start_loop = $no_of_paginations - 6;
        $end_loop = $no_of_paginations;
    } else {
        $end_loop = $no_of_paginations;
    }
} else {
    $start_loop = 1;
    if ($no_of_paginations > 7)
        $end_loop = 7;
    else
        $end_loop = $no_of_paginations;
}
/* ----------------------------------------------------------------------------------------------------------- */
$msg .= "<div class='pagination'><ul>";

// FOR ENABLING THE FIRST BUTTON
if ($first_btn && $cur_page > 1) {
    $msg .= "<li p='1' class='active'>first</li>";
} else if ($first_btn) {
    $msg .= "<li p='1' class='inactive'>first</li>";
}

// FOR ENABLING THE PREVIOUS BUTTON
if ($previous_btn && $cur_page > 1) {
    $pre = $cur_page - 1;
    $msg .= "<li p='$pre' class='active'>Previous</li>";
} else if ($previous_btn) {
    $msg .= "<li class='inactive'>Previous</li>";
}
for ($i = $start_loop; $i <= $end_loop; $i++) {

    if ($cur_page == $i)
        $msg .= "<li p='$i' style='color:#fff;background-color:#006699;' class='active'>{$i}</li>";
    else
        $msg .= "<li p='$i' class='active'>{$i}</li>";
}

// TO ENABLE THE NEXT BUTTON
if ($next_btn && $cur_page < $no_of_paginations) {
    $nex = $cur_page + 1;
    $msg .= "<li p='$nex' class='active'>Next</li>";
} else if ($next_btn) {
    $msg .= "<li class='inactive'>Next</li>";
}

// TO ENABLE THE END BUTTON
if ($last_btn && $cur_page < $no_of_paginations) {
    $msg .= "<li p='$no_of_paginations' class='active'>Last</li>";
} else if ($last_btn) {
    $msg .= "<li p='$no_of_paginations' class='inactive'>Last</li>";
}
$goto = "<input type='text' class='goto' size='1' style='margin-top:-1px;margin-left:60px;'/><input type='button' id='go_btn' class='go_button' value='Go'/>";
$total_string = "<span class='total' a='$no_of_paginations'>Page <b>" . $cur_page . "</b> of <b>$no_of_paginations</b></span>";
$msg = $msg . "</ul>" . $goto . $total_string . "</div>";  // Content for pagination
echo $msg;
}

---------------------------------------------------------------------------------------
**`cardata.php`**
<?php
error_reporting(E_ALL ^ E_NOTICE);
if($_POST['page'])
{
$page = $_POST['page'];
$cur_page = $page;
$page -= 1;
$per_page = 1;
$previous_btn = true;
$next_btn = true;
$first_btn = true;
$last_btn = true;
$start = $page * $per_page;
include "config.php";
$query_pag_data = "SELECT * from cars LIMIT $start, $per_page";
$result_pag_data = mysql_query($query_pag_data) or die('MySql Error' . mysql_error());
$msg = "";
while ($row = mysql_fetch_array($result_pag_data)) {
$htmlmsg=htmlentities($row['car_name']);
    $msg .= "<li><b>" . $row['id'] . "</b> " . $htmlmsg . "</li>";
}
$msg = "<div class='data1'><ul>" . $msg . "</ul></div>"; // Content for Data
/* --------------------------------------------- */
$query_pag_num = "SELECT COUNT(*) AS count FROM cars";
$result_pag_num = mysql_query($query_pag_num);
$row = mysql_fetch_array($result_pag_num);
$count = $row['count'];
$no_of_paginations = ceil($count / $per_page);

/*---------------Calculating the starting and endign values for the loop----------------------------------- */
if ($cur_page >= 7) {
    $start_loop = $cur_page - 3;
    if ($no_of_paginations > $cur_page + 3)
        $end_loop = $cur_page + 3;
    else if ($cur_page <= $no_of_paginations && $cur_page > $no_of_paginations - 6) {
        $start_loop = $no_of_paginations - 6;
        $end_loop = $no_of_paginations;
    } else {
        $end_loop = $no_of_paginations;
    }
} else {
    $start_loop = 1;
    if ($no_of_paginations > 7)
        $end_loop = 7;
    else
        $end_loop = $no_of_paginations;
}
/* ----------------------------------------------------------------------------------------------------------- */
$msg .= "<div class='pagination1'><ul>";

// FOR ENABLING THE FIRST BUTTON
if ($first_btn && $cur_page > 1) {
    $msg .= "<li p='1' class='active'>first</li>";
} else if ($first_btn) {
    $msg .= "<li p='1' class='inactive'>first</li>";
}

// FOR ENABLING THE PREVIOUS BUTTON
if ($previous_btn && $cur_page > 1) {
    $pre = $cur_page - 1;
    $msg .= "<li p='$pre' class='active'>Previous</li>";
} else if ($previous_btn) {
    $msg .= "<li class='inactive'>Previous</li>";
}
for ($k = $start_loop; $k <= $end_loop; $k++) {

    if ($cur_page == $k)
        $msg .= "<li p='$k' style='color:#fff;background-color:#006699;' class='inactive'>{$k}</li>";
    else
        $msg .= "<li p='$k' class='active'>{$k}</li>";
}

// TO ENABLE THE NEXT BUTTON
if ($next_btn && $cur_page < $no_of_paginations) {
    $nex = $cur_page + 1;
    $msg .= "<li p='$nex' class='active'>Next</li>";
} else if ($next_btn) {
    $msg .= "<li class='inactive'>Next</li>";
}

// TO ENABLE THE END BUTTON
if ($last_btn && $cur_page < $no_of_paginations) {
    $msg .= "<li p='$no_of_paginations' class='active'>Last</li>";
} else if ($last_btn) {
    $msg .= "<li p='$no_of_paginations' class='inactive'>Last</li>";
}
$goto = "<input type='text' class='goto1' size='1' style='margin-top:-1px;margin-left:60px;'/><input type='button' id='go_btn1' class='go_button' value='Go'/>";
$total_string = "<span class='total1' a1='$no_of_paginations'>Page <b>" . $cur_page . "</b> of <b>$no_of_paginations</b></span>";
$msg = $msg . "</ul>" . $goto . $total_string . "</div>";  // Content for pagination
echo $msg;
}
-------------------------------------------------------------------------------
**`userstatus.php`**

<?php
error_reporting(E_ALL ^ E_NOTICE);
if($_POST['page'])
{
    $q=$_POST['q'];
    //echo "value:".$q;
$page = $_POST['page'];
$cur_page = $page;
$page -= 1;
$per_page = 1;
$previous_btn = true;
$next_btn = true;
$first_btn = true;
$last_btn = true;
$start = $page * $per_page;
include "config.php";
$query_pag_data = "SELECT * from users where status='$q' LIMIT $start, $per_page";
$result_pag_data = mysql_query($query_pag_data) or die('MySql Error' . mysql_error());
$msg = "";
while ($row = mysql_fetch_array($result_pag_data)) {
$htmlmsg=htmlentities($row['name']);
    $msg .= "<li><b>" . $row['id'] . "</b> " . $htmlmsg . "</li>";
}
$msg = "<div class='data2'><ul>" . $msg . "</ul></div>"; // Content for Data
/* --------------------------------------------- */
$query_pag_num = "SELECT COUNT(*) AS count FROM users where status='$q'";
$result_pag_num = mysql_query($query_pag_num);
$row = mysql_fetch_array($result_pag_num);
$count = $row['count'];
$no_of_paginations = ceil($count / $per_page);

/*---------------Calculating the starting and endign values for the loop----------------------------------- */
if ($cur_page >= 7) {
    $start_loop = $cur_page - 3;
    if ($no_of_paginations > $cur_page + 3)
        $end_loop = $cur_page + 3;
    else if ($cur_page <= $no_of_paginations && $cur_page > $no_of_paginations - 6) {
        $start_loop = $no_of_paginations - 6;
        $end_loop = $no_of_paginations;
    } else {
        $end_loop = $no_of_paginations;
    }
} else {
    $start_loop = 1;
    if ($no_of_paginations > 7)
        $end_loop = 7;
    else
        $end_loop = $no_of_paginations;
}
/* ----------------------------------------------------------------------------------------------------------- */
$msg .= "<div class='pagination2'><ul>";

// FOR ENABLING THE FIRST BUTTON
if ($first_btn && $cur_page > 1) {
    $msg .= "<li p='1' class='active'>First</li>";
} else if ($first_btn) {
    $msg .= "<li p='1' class='inactive'>First</li>";
}

// FOR ENABLING THE PREVIOUS BUTTON
if ($previous_btn && $cur_page > 1) {
    $pre = $cur_page - 1;
    $msg .= "<li p='$pre' class='active'>Previous</li>";
} else if ($previous_btn) {
    $msg .= "<li class='inactive'>Previous</li>";
}
for ($i = $start_loop; $i <= $end_loop; $i++) {

    if ($cur_page == $i)
        $msg .= "<li p='$i' style='color:#fff;background-color:#006699;' class='active'>{$i}</li>";
    else
        $msg .= "<li p='$i' class='active'>{$i}</li>";
}

// TO ENABLE THE NEXT BUTTON
if ($next_btn && $cur_page < $no_of_paginations) {
    $nex = $cur_page + 1;
    $msg .= "<li p='$nex' class='active'>Next</li>";
} else if ($next_btn) {
    $msg .= "<li class='inactive'>Next</li>";
}

// TO ENABLE THE END BUTTON
if ($last_btn && $cur_page < $no_of_paginations) {
    $msg .= "<li p='$no_of_paginations' class='active'>Last</li>";
} else if ($last_btn) {
    $msg .= "<li p='$no_of_paginations' class='inactive'>Last</li>";
}
$goto = "<input type='text' class='goto2' size='1' style='margin-top:-1px;margin-left:60px;'/><input type='button' id='go_btn2' class='go_button' value='Go'/>";
$total_string = "<span class='total2' a2='$no_of_paginations'>Page <b>" . $cur_page . "</b> of <b>$no_of_paginations</b></span>";
$msg = $msg . "</ul>" . $goto . $total_string . "</div>";  // Content for pagination
echo $msg;
}
--------------------------------------------------------------------------------------
**`carcolor.php`**
<?php
error_reporting(E_ALL ^ E_NOTICE);
if($_POST['page'])
{
    $q=$_POST['q'];
    //echo "value:".$q;
$page = $_POST['page'];
$cur_page = $page;
$page -= 1;
$per_page = 1;
$previous_btn = true;
$next_btn = true;
$first_btn = true;
$last_btn = true;
$start = $page * $per_page;
include "config.php";
$query_pag_data = "SELECT * from cars where color='$q' LIMIT $start, $per_page";
$result_pag_data = mysql_query($query_pag_data) or die('MySql Error' . mysql_error());
$msg = "";
while ($row = mysql_fetch_array($result_pag_data)) {
$htmlmsg=htmlentities($row['car_name']);
    $msg .= "<li><b>" . $row['id'] . "</b> " . $htmlmsg . "</li>";
}
$msg = "<div class='data3'><ul>" . $msg . "</ul></div>"; // Content for Data
/* --------------------------------------------- */
$query_pag_num = "SELECT COUNT(*) AS count FROM cars where color='$q'";
$result_pag_num = mysql_query($query_pag_num);
$row = mysql_fetch_array($result_pag_num);
$count = $row['count'];
$no_of_paginations = ceil($count / $per_page);

/*---------------Calculating the starting and endign values for the loop----------------------------------- */
if ($cur_page >= 7) {
    $start_loop = $cur_page - 3;
    if ($no_of_paginations > $cur_page + 3)
        $end_loop = $cur_page + 3;
    else if ($cur_page <= $no_of_paginations && $cur_page > $no_of_paginations - 6) {
        $start_loop = $no_of_paginations - 6;
        $end_loop = $no_of_paginations;
    } else {
        $end_loop = $no_of_paginations;
    }
} else {
    $start_loop = 1;
    if ($no_of_paginations > 7)
        $end_loop = 7;
    else
        $end_loop = $no_of_paginations;
}
/* ----------------------------------------------------------------------------------------------------------- */
$msg .= "<div class='pagination3'><ul>";

// FOR ENABLING THE FIRST BUTTON
if ($first_btn && $cur_page > 1) {
    $msg .= "<li p='1' class='active'>First</li>";
} else if ($first_btn) {
    $msg .= "<li p='1' class='inactive'>First</li>";
}

// FOR ENABLING THE PREVIOUS BUTTON
if ($previous_btn && $cur_page > 1) {
    $pre = $cur_page - 1;
    $msg .= "<li p='$pre' class='active'>Previous</li>";
} else if ($previous_btn) {
    $msg .= "<li class='inactive'>Previous</li>";
}
for ($i = $start_loop; $i <= $end_loop; $i++) {

    if ($cur_page == $i)
        $msg .= "<li p='$i' style='color:#fff;background-color:#006699;' class='active'>{$i}</li>";
    else
        $msg .= "<li p='$i' class='active'>{$i}</li>";
}

// TO ENABLE THE NEXT BUTTON
if ($next_btn && $cur_page < $no_of_paginations) {
    $nex = $cur_page + 1;
    $msg .= "<li p='$nex' class='active'>Next</li>";
} else if ($next_btn) {
    $msg .= "<li class='inactive'>Next</li>";
}

// TO ENABLE THE END BUTTON
if ($last_btn && $cur_page < $no_of_paginations) {
    $msg .= "<li p='$no_of_paginations' class='active'>Last</li>";
} else if ($last_btn) {
    $msg .= "<li p='$no_of_paginations' class='inactive'>Last</li>";
}
$goto = "<input type='text' class='goto3' size='1' style='margin-top:-1px;margin-left:60px;'/><input type='button' id='go_btn3' class='go_button' value='Go'/>";
$total_string = "<span class='total3' a3='$no_of_paginations'>Page <b>" . $cur_page . "</b> of <b>$no_of_paginations</b></span>";
$msg = $msg . "</ul>" . $goto . $total_string . "</div>";  // Content for pagination
echo $msg;
}
----------------------------------------------------------------------------------
config.php
<?php
$con=mysql_connect("localhost","root","") or die("error:".mysql_error());
$db=mysql_select_db("test2",$con);
?>
-------------------------------------------------------------------------------------
script_div.js

            $(document).ready(function(){       
                function loadData(page){                 
                    $.ajax
                    ({
                        type: "POST",
                        url: "userdata.php",
                        data: "page="+page,
                        success: function(msg)
                        {
                            //alert("I AM FIRST:"+msg);
                            $("#container").ajaxComplete(function(event, request, settings)
                            {
                                $("#container").html(msg);
                            });
                        }
                    });
                }
                loadData(1);  // For first time page load default results
                $('#container .pagination li.active').live('click',function(){
                    var page = $(this).attr('p');
                    loadData(page);

                });           
                $('#go_btn').live('click',function(){
                    var page = parseInt($('.goto').val());
                    var no_of_pages = parseInt($('.total').attr('a'));
                    if(page != 0 && page <= no_of_pages){
                        loadData(page);
                    }else{
                        alert('Enter a PAGE between 1 and '+no_of_pages);
                        $('.goto').val("").focus();
                        return false;
                    }

                });
                $('#user').change(function(){
                    var location = $(this).val();
                    /* don't do anything if blank option selected*/
                     if( location !=''){
                         $('.box').hide();
                         //$('#'+location).show();
                     }
                     else if(location=="-1")
                         {
                         $('.box').show();
                         }

                });
            });

//<!----------------------------------------------------------------------------------------->
//<!--user data with filtration-->

                $(document).ready(function(){
                $('#user').change(function(){
                    dis=$(this).val();
                    function loadData(page){  
                        //alert(dis);               
                        $.ajax
                        ({

                            type: "POST",
                            url: "userstatus.php",
                            data: {page:page,
                                q:dis},
                            success: function(msg1)
                            {
                                //alert("I AM MESSAGE 1"+msg1);
                                $("#container2").ajaxComplete(function(event1, request1, settings1)
                                {

                                    $("#container2").html(msg1);
                                });
                            }
                        });
                    }
                    loadData(1);  // For first time page load default results
                    $('#container2 .pagination2 li.active').live('click',function(){
                        var page = $(this).attr('p');
                        loadData(page);

                    });           
                    $('#go_btn2').live('click',function(){
                        var page = parseInt($('.goto2').val());
                        var no_of_pages = parseInt($('.total2').attr('a2'));
                        if(page != 0 && page <= no_of_pages){
                            loadData(page);
                        }else{
                            alert('Enter a PAGE between 1 and '+no_of_pages);
                            $('.goto2').val("").focus();
                            return false;
                        }

                    });
                    });   
            });

//<!---------------------------------------------------------------------------------------------->
//<!--car data-->

                $(document).ready(function(){       
                    function loadData(page){                 
                        $.ajax
                        ({
                            type: "POST",
                            url: "cardata.php",
                            data: "page="+page,
                            success: function(msg)
                            {
                                //alert("I AM FIRST:"+msg);
                                $("#container1").ajaxComplete(function(event, request, settings)
                                {
                                    $("#container1").html(msg);
                                });
                            }
                        });
                    }
                    loadData(1);  // For first time page load default results
                    $('#container1 .pagination1 li.active').live('click',function(){
                        var page = $(this).attr('p');
                        loadData(page);

                    });           
                    $('#go_btn1').live('click',function(){
                        var page = parseInt($('.goto1').val());
                        var no_of_pages = parseInt($('.total1').attr('a1'));
                        if(page != 0 && page <= no_of_pages){
                            loadData(page);
                        }else{
                            alert('Enter a PAGE between 1 and '+no_of_pages);
                            $('.goto1').val("").focus();
                            return false;
                        }

                    });
                    $('#car').change(function(){
                        var location = $(this).val();
                        /* don't do anything if blank option selected*/
                         if( location !=''){
                             $('.box1').hide();
                             //$('#'+location).show();
                         }

                    });
                });
//<!----------------------------------------------------------------------------------------->
//<!--car data with filtration-->

                $(document).ready(function(){
                    $('#car').change(function(){
                        dis1=$(this).val();
                        function loadData(page){          
                            $.ajax
                            ({
                                type: "POST",
                                url: "carcolor.php",
                                data: {page:page,
                                    q:dis1},
                                success: function(msg3)
                                {
                                    //alert("I AM MESSAGE 1"+msg1);
                                    $("#container3").ajaxComplete(function(event3, request3, settings3)
                                    {

                                        $("#container3").html(msg3);
                                    });enter code here
                                }
                            });
                        }
                        loadData(1);  // For first time page load default results
                        $('#container3 .pagination3 li.active').live('click',function(){
                            var page = $(this).attr('p');
                            loadData(page);

                        });           
                        $('#go_btn3').live('click',function(){
                            var page = parseInt($('.goto3').val());
                            var no_of_pages = parseInt($('.total3').attr('a3'));
                            if(page != 0 && page <= no_of_pages){
                                loadData(page);
                            }else{
                                alert('Enter a PAGE between 1 and '+no_of_pages);
                                $('.goto3').val("").focus();
                                return false;
                            }

                        });
                        });   
                }); 
```

# sql-server - MVC 4 SQL Server，如何获取表中的第一条记录？

> ID：13488024
> 
> 赞同：0
> 
> 时间：2012-11-21T07:06:32.697
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-4

如何获得独立于行主键的表中的第一条记录？

我正在使用带有 EF Code First 和数据库上下文的 MVC 4，还是必须为此使用 LINQ？

我想我可以用它`db.ToList()`来获取列表，然后遍历特定元素，但那不是“下载”整个表格吗？

因为如果它确实是不好的做法和低效吗？

编辑：意思是说“第一张唱片”，抱歉有任何混淆:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:57:31.260

你有没有尝试过：

```
db.List.First(); 
```

*   如果您没有 order by 子句，则将根据聚集索引对行进行排序（默认为主键）
*   如果您有 order by 子句行将按您指定的顺序排序

# java - 如何以另一种外观和感觉启动 Java 应用程序 (jar)？

> ID：13488029
> 
> 赞同：4
> 
> 时间：2012-11-21T07:06:51.627
> 
> 标签：java, user-interface, jar

我正在使用一个 java 应用程序 ( [weka](http://www.cs.waikato.ac.nz/ml/weka/) )，我想知道我是否可以改变它的图形用户界面的外观和感觉，因为这个蓝钢主题看起来真的很丑。

当我在 java 中编写 gui 时，我记得我可以使用 UIManager.setLookAndFeel() 方法更改外观。

我可以在运行 jar 文件时做类似的事情，例如传入任何参数吗？！？！

我正在使用 linux (crunchbang)。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:10:20.660

是的，你应该自己拦截命令行参数，或者使用这个 jvm 参数：

```
-Dswing.metalTheme=steel 
```

看看[这里](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)的参考资料以获得更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:17:06.197

用这个

> UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

我感觉最好的。类似于 Netbeans 或 eclipse 的样子。

对于窗户： `-Dswing.defaultlaf=com.sun.java.swing.plaf.windows.WindowsLookAndFeel`

对于 linux 不确定虽然感觉 `java -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel`

# android - 支持 SDK 但不支持 PhoneGap 的印度语语言

> ID：13488032
> 
> 赞同：14
> 
> 时间：2012-11-21T07:06:58.280
> 
> 标签：android, sdk, internationalization, harfbuzz

我正在尝试在 android 中开发一个专门支持印度语言的应用程序。我只想在应用程序上以用户选择的任何印度语言转换我的文本页面。

为此，我不想使用`web-service`也不想使用`Phonegap`. 我做了一些研究并意识到印度字体的渲染很复杂。

我听说有一个库*“Harfbuzz”*可以正确渲染 Indic Fonts，但它只支持**NDK**。

**SDK**是否有任何*库*或引擎？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:38:39.333

查看[C. Scott Ananian 博士的此页面](http://cananian.livejournal.com/63595.html)，它可能对您尝试做的事情有用。他曾使用[Pango](http://en.wikipedia.org/wiki/Pango)（一个 Unicode 文本布局库）的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T04:08:08.953

启用带有印度文字的手机已经存在了很长一段时间。看看这个： **[http ://code.google.com/p/indic-keyboards/](http://code.google.com/p/indic-keyboards/)**

（*一个提供输入法的开源项目，允许在 Windows 和 Linux 上使用 Java 和 Unicode 使用印度语脚本。*）**

# iphone - 在地图视图iphone sdk上区分土地和水

> ID：13488042
> 
> 赞同：1
> 
> 时间：2012-11-21T07:07:44.717
> 
> 标签：iphone, maps, mapkit

我正在实现一张地图，我需要在其中自定义地图的颜色。即在世界地图中，我需要用灰色显示被土地覆盖的表面积，用黑色显示被水覆盖的表面积。我为此使用了叠加层。但我不知道如何获得土地和水的坐标。任何人都可以帮我解决这个问题。

# android - 谷歌地图，显示当前用户位置附近的地方

> ID：13488048
> 
> 赞同：0
> 
> 时间：2012-11-21T07:08:02.313
> 
> 标签：android, google-maps, maps

我正在研究谷歌地图，我已经设法在地图上放置了大约 73 个来自 sqllite DB 的精确点，它们为当前用户城市的商店提供了一个地点。

现在我只需要向用户展示壁橱的五个地方，而不是所有 73 个地方。有没有人对此有想法或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:11:43.740

```
public Location geoLat(GeoPoint userGeopoint)
{
    Location location = new Location("");
    location.setLatitude(userGeopoint.getLatitudeE6()/1E6);
    return location;
}

public Location geoLng(GeoPoint userGeopoint)
{
    Location location = new Location("");
    location.setLatitude(userGeopoint.getLongitudeE6()/1E6);
    return location;
}

public GeoPoint userGeopoint(Location location)
{
    Double userLat = location.getLatitude()*1E6;
    Double userLng = location.getLongitude()*1E6;
    GeoPoint point = new GeoPoint(userLat.intValue(), userLng.intValue());
    return point;
}

private void nearRSU(Location location)
{
    Location userlocation = new Location("point A");
    Location objectlocation = new Location("point B");
    userlocation.setLatitude(geoLat(userGeopoint(location())).getLatitude());
    userlocation.setLongitude(geoLng(userGeopoint(location())).getLongitude());

    double rangeconv = 0, ctrange = 0, sumrange = 0, alltimes = 0;
    String rgtype = "", tmtype = "";
    int a = 0;
    String objectaddress = null;
    GeoPoint pointB = null;

    for (int i = 0 ; i < listLocRSU.size(); i++)
    {
        GeoPoint pointA = new GeoPoint((int) (listLocRSU.get(i).lat * 1E6), 
                                      (int) (listLocRSU.get(i).lng * 1E6));

        objectlocation.setLatitude(pointA.getLatitudeE6()/1E6);
        objectlocation.setLongitude(pointA.getLongitudeE6()/1E6);

        double range = userlocation.distanceTo(objectlocation);

        if (range >= 1000)
        {
            rangeconv = range / 1000;
            rgtype = " km";
        }
        else
        {
            rangeconv = range;
            rgtype = " m";
        }

        double times = rangeconv / 40;
        if (times >= 1)
        {
            alltimes = times;
            tmtype = " h";
        }
        else
        {
            alltimes = times * 60;
            tmtype = " min";
        }

        if (ctrange > rangeconv)
        {
            ctrange = rangeconv;
            sumrange = ctrange;
            a = i;
            pointB = new GeoPoint ((int) (listLocRSU.get(a).lat * 1E6), 
                                   (int) (listLocRSU.get(a).lng * 1E6));
        }
    else if (ctrange < rangeconv)
        {
            sumrange = ctrange;
            a = a;
            pointB = new GeoPoint ((int) (listLocRSU.get(a).lat * 1E6), 
                                   (int) (listLocRSU.get(a).lng * 1E6));
        }

        double objLat = listLocRSU.get(a).lat;
        double objLng = listLocRSU.get(a).lng;

        Geocoder objectgc = new Geocoder(this, Locale.getDefault());
        try 
        {
            List<Address> addresses = objectgc.getFromLocation(objLat, objLng, 1);
            StringBuilder objaddress = new StringBuilder();
            if (addresses.size() > 0) 
            {
                Address address = addresses.get(0);
                address.getMaxAddressLineIndex();
                objaddress.append(address.getAddressLine(0)).append(", ");
                objaddress.append(address.getLocality()).append(", ");
                objaddress.append(address.getCountryName()).append(", ");
                objaddress.append(address.getPostalCode());
            }
            objectaddress = objaddress.toString();
        } 
        catch (IOException e){}

        List<Overlay> overlays = map.getOverlays();
        Drawable marker = this.getResources().getDrawable(R.drawable.marker);
        MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(marker, this);            

        OverlayItem overlayitem = new OverlayItem(pointB, listLocRSU.get(a).locname, 
                "Address:\n" + objectaddress + 
                "\n\nLongitude:\n" + listLocRSU.get(a).lng + 
                "\n\nLatitude:\n" + listLocRSU.get(a).lat + 
                "\n\nDistance:\n" + sumrange + rgtype + 
                "\n\nTime Calculation (40 km/h):\n" + alltimes + tmtype);

        itemizedOverlay.addItem(overlayitem);
        overlays.add(itemizedOverlay);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:40:33.633

首先，计算用户位置与所有地点之间的距离。

要获取用户位置，请阅读本指南[位置策略](http://developer.android.com/guide/topics/location/strategies.html)

为您的位置创建一个类，并使用一种方法来计算它与用户位置之间的距离：

```
public class Place {
    public Location location;
    private float distanceToUser;

    public Place(Location _loc){
        location = _loc;
    }

    public void calculateDistance(Location userLocation){
        distanceToUser = location.distanceTo(userLocation);
    }
} 
```

在这里，`distanceTo`方法被调用：阅读[distanceTo](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)

现在，创建`Place[]`数组并使用数据库中的所有位置对其进行初始化。对于每个地方调用`calculateDistance`方法。

之后，使用`Arrays.sort`（[Arrays.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28short%5B%5D%29)）对数组进行排序

仅在地图上显示阵列中的前五个位置

完毕！

# python - 为什么我不能发送 cv2 视频源？

> ID：13488051
> 
> 赞同：3
> 
> 时间：2012-11-21T07:08:12.210
> 
> 标签：python, opencv, mpi, pickle

我尝试使用 MPI scatter 将 cv2 Video Capture 源发送到不同的进程。这样，每个进程都会有一个句柄来检索帧。

```
if rank == 0:
  video_source = cv2.VideoCapture('my_video.avi')
  source_list = [video_source] * world_communicator.Get_size()
else:
  source_list = None
data = world_communicator.scatter(source_list, root=0)
# Do stuff with access to the video source... 
```

但是，我收到此代码的以下错误。

```
[dfaux@ubiquitous mpi_practice]$ mpirun -n 2 python cv2_video_practice.py
Traceback (most recent call last):
  File "cv2_video_practice.py", line 93, in <module>
    process_video(source, destination, kernel)
  File "cv2_video_practice.py", line 58, in process_video
    data = comm.scatter(frame_counts, root=0)
  File "Comm.pyx", line 874, in mpi4py.MPI.Comm.scatter (src/mpi4py.MPI.c:68023)
  File "pickled.pxi", line 656, in mpi4py.MPI.PyMPI_scatter (src/mpi4py.MPI.c:32402)
  File "pickled.pxi", line 131, in mpi4py.MPI._p_Pickle.dumpv (src/mpi4py.MPI.c:26847)
  File "pickled.pxi", line 81, in mpi4py.MPI._p_Pickle.dump (src/mpi4py.MPI.c:26188)
cPickle.PicklingError: Can't pickle <type 'cv2.VideoCapture'>: it's not the same object as cv2.VideoCapture 
```

为什么我不能腌制视频源？为什么`<type 'cv2.VideoCapture'>`不是同一个对象`cv2.VideoCapture`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T16:57:33.620

`cv2.VideoCapture`不是所有向量的列表。相反，它是指向视频中某个帧的句柄。这样，将这样的对象分散到一堆其他进程是没有意义的。相反，我建议在每个进程中打开一个句柄，然后让每个进程从不同的帧开始：

```
source.set(cv.CV_CAP_PROP_POS_FRAMES, start_frame) 
```

# windows - Groovy：如何将 .groovy 脚本制作为 Windows 服务

> ID：13488056
> 
> 赞同：2
> 
> 时间：2012-11-21T07:08:49.987
> 
> 标签：windows, service, groovy

如何将 .groovy 脚本制作成 Windows 服务？这个链接[http://groovy.codehaus.org/Windows+Services](http://groovy.codehaus.org/Windows+Services)对我不利，因为我使用的是 Win Serv 2008 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:27:06.530

在第一次做同样的事情的过程中。经过一些研究和一些指导，看起来一个不错的方法是使用 gradle。在初始设置之后，构建项目将为您创建一个 windows 和 Unix 服务。

还有一个 Gradle 包装器，因此即使您无法在服务器本身上安装 gradle，您也可以运行服务。

[http://www.gradle.org/](http://www.gradle.org/) [http://en.wikipedia.org/wiki/Gradle](http://en.wikipedia.org/wiki/Gradle)

# gwt - 如何通过单击按钮在另一个页面中打开 html gwt 页面

> ID：13488057
> 
> 赞同：0
> 
> 时间：2012-11-21T07:08:51.297
> 
> 标签：gwt

我的 GWT 中有一个 DockLayoutPanel，我已将北部、南部和西部定义为以下

```
dockLayoutPanel.addNorth(new HTML("PLACE HOLDER FOR HEADER"), 8);
dockLayoutPanel.addSouth(new HTML("PLACE HOLDER FOR FOTTER"), 5);
dockLayoutPanel.addWest(scrollPanel, 50);----scrollPanel is basically a flextable with buttons. 
```

基本上我想要实现的是当用户单击 中的按钮时`flextable`，它必须在同一页面内向按钮右侧打开另一个 HTML gwt 页面。（即在同一页面内和中心的`dockLayoutPanel`）。

有人可以帮我解决这个问题。首先是如何在另一个页面中嵌入 HTML gwt 页面，其次是如何通过单击同一页面中的按钮来打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:22:54.723

如此处所述：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)

```
 Button b = new Button("Click Me");
    b.addClickHandler(new ClickHandler() {
      public void onClick(ClickEvent event) {
        // handle the click event
        dockLayoutPanel.add(<Add the page here>)
    }   }); 
```

一切都发生在与 Ajay 请求相同的页面上。

您应该阅读以下教程以了解 mvp 模式，这很有帮助。 [https://developers.google.com/web-toolkit/articles/mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:45:56.940

据我了解您的问题，您希望借助按钮在 GWT 应用程序中嵌入 HTML 页面。这是可能的解决方案之一。

*   [首先使用 GWT 的Frame](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/Frame.html)类创建一个 iFrame 。
*   接下来为按钮添加一个点击处理程序
*   在单击处理程序的 onClick 方法中，使用所需的 URL（HTML 页面的路径）填充创建的 iFrame。

IFrame 还有许多其他潜在用途。您可以使用它来显示从某个远程服务器访问的数据，即使这些数据与 Gwt 或 Java 无关。将 IFrame 视为相框。你可以放一张彩色照片或一张黑白照片或一张没关系的纸。IFrame 充当您显示任何内容的门户。

# facebook - 我在哪里可以找到针对应用程序开发人员的 Facebook 应该做和不应该做的总结？

> ID：13488060
> 
> 赞同：-1
> 
> 时间：2012-11-21T07:09:08.617
> 
> 标签：facebook, licensing

当主题阅读时，我正在寻找作为画布应用程序开发人员我能做什么和不能做什么的总结。我尝试阅读适用于页面的条款和条件、政策以及其他特定于 Facebook 内容的政策 - 某些条款存在歧义，例如，这一条款指定*您的应用程序的主要目的不是链接到第三方应用程序*- 我什至不确定这意味着什么！那么，如果我开发了一个银行画布页面，这是否意味着我无法链接到原始银行网站？另一个条款说我不能通过我的画布页面发布广告 - 所以，如果我正在开发一个忠诚度积分应用程序，它提供产品优惠（手表或类似的东西可享受 10% 的折扣），它是否有资格作为广告？

我尝试了查找幻灯片共享，我什至用谷歌搜索了很多 - 我没有找到任何可以解释 Facebook 应用程序（特别是画布应用程序）的一堆做和不做的法律术语的东西。如果你们能从法律/政策的角度在这里分享您作为应用程序开发人员的经验，那将极大地帮助我。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:44:03.143

I've been looking for stuff like that aswell. Fb and documenting :/

As for *the primary purpose of your application will not be to link to a third party application*: I presume they mean, not just a canvas app with a redirect/framebreaker to the third party app/site. But something you actually use inside facebook.

Fb wants you to use its own advertisements, this used to be more of a privacy thing, because a lot of advertising networks use tracking cookies etc and this conflicts with the FB Privacy Policy. But since they went public, i'm guessing they need to show some ad income.

If for example, you have an app and as a bonus they get a point for every time they buy something, they get a discount or every time they unlock an achievement or w/e. it should not be a problem.

I do advise you to contact FB directly tho, just to be sure... response can be slow (weeks).

# javascript - 为没有它的出站链接添加 onClick

> ID：13488061
> 
> 赞同：0
> 
> 时间：2012-11-21T06:53:41.230
> 
> 标签：javascript, onclick

我想添加`onClick=""`类型为 bit.ly、j.mp 和 domain.com/go/ 的链接（在内容和评论中），这些链接还没有，因此链接看起来像：

```
<a href="http://domain.com/go/best-house/" rel="external nofollow" onClick="_gaq.push(['_trackEvent', 'click', 'ps', 'http://domain.com/go/best-house/']);">link text</a> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:09:05.250

使用纯 JavaScript：

```
window.onload = function() {

    var elements = document.getElementsByTagName('a'),
        addGaqPush = function() {
            _gaq.push(['_trackEvent', 'click', 'ps', 'event_house']);
    };
    for( var i = 0, len = elements.length; i < len; i++ ) {
        elements[i].onclick = addGaqPush;
    }
} 
```

# java - n个系统中的Java独立应用程序无需手动安装？

> ID：13488063
> 
> 赞同：7
> 
> 时间：2012-11-21T07:09:37.230
> 
> 标签：java, swing, deployment, installation, desktop-application

我为医院做了一个java应用程序。该应用程序是一个 ERP 软件。该应用程序将安装在大约 n 个系统中。但是在所有这些系统中安装相同的应用程序有点困难，而且需要很多时间。

即使已经这样做了，将来，如果应用程序需要稍微修改，那么修改后的应用程序也应该在医院的所有这些系统中被替换。我使用 mysql 作为我的数据库，我已将其放置在主要医院服务器中，所有其他系统都可以从该服务器通过网络访问它。

通过 RMI 方法我们可以以某种方式访问​​它，但是 RMI 有点太慢了。

谁能告诉我一些解决方案或建议来解决这个问题？

对于 java web 应用程序，我们可以在主服务器中部署应用程序 war 文件，LAN 或任何其他网络中的所有系统都可以通过浏览器获取应用程序。对于我的桌面 Java Swing 应用程序，是否有任何类似的解决方案，它是一个基于 exe、jar 的应用程序。

如何在不手动安装的情况下在大约 200 个系统中获得 Java Deskop Swing 应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T07:14:48.147

Java Web Start 是最好的解决方案。[http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:21:35.177

使用 Java Web Start 是解决问题的一种方法。试试[这个](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)来学习 Java Web Start。

# c++ - 在 while 循环中调用 getline(cin, str) 时遇到问题

> ID：13488067
> 
> 赞同：0
> 
> 时间：2012-11-21T07:09:55.403
> 
> 标签：c++

我在用

```
getline(cin , inputStr); // where string = inputStr; 
```

从字符串类型的用户那里获取输入。代码运行良好。但现在不知何故，在一个while循环中，它没有被调用。也就是说，编译器似乎跳过了这部分。

但`cin >> str`单独工作很好。有什么建议么？

* * *

评论中的代码：

```
int num, choice;
string inputStr="";
while(1)
{
     cout<<"1) Search \n";
     cout<<" EXIT\n";
     cout<<"Choose your choice : ";
     cin >> choice;
     switch(choice)
     {
     case 1:
         cout<<"word for search\n";
         getline(cin, str);
         cout<< str <<endl;
         return 0;
        //just checking whether this commands work or not.
     }
     else
     {
         return 0;
     }
     .......// there is 300 lines of code still there 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:28:45.670

问题是`cin >> choice;`将换行符留在输入流中，因此`getline(cin, str);`由于该换行符而立即返回。

尝试在之后添加一个`cin.ignore();`以`cin >> choice;`使用换行符。

# php - 命令不适用于 PHP exec() 但如果通过提示运行则可以

> ID：13488068
> 
> 赞同：0
> 
> 时间：2012-11-21T07:09:58.587
> 
> 标签：php, linux, system, exec, shellexecute

我正在尝试使用 SWATH (http://www.cs.cmu.edu/~paisarn/software.html) 来处理我的项目。基本上，该程序会将句子分解为一组单词。我已经安装了所有东西，并尝试通过命令提示符（Mac 上的终端）运行命令。

我运行了一个命令

```
swath -u u -m long < in_OdwJYw.txt > test.txt 
```

该程序运行良好，输出正确的 test.txt 并带有分解词

所以我将代码实现到我的 PHP 文件中。我用这个方法

```
exec("swath -u u -m long < in_OdwJYw.txt > test.txt"); 
```

没有错误显示“test.txt”文件已创建但内部没有任何内容（0 字节）

我的问题是为什么该命令可以通过提示运行以及为什么我不使用 exec() system() 或 shell_exec()。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:11:49.487

**编辑：**原始帖子由 OP 编辑​​。代码片段是：

```
exec("swath -b "|" -u u -m long < in_OdwJYw.txt > test.txt"); 
```

* * *

您必须转义您的命令字符串。类似的东西应该会有所帮助。

```
exec("swath -b \"|\" -u u -m long < in_OdwJYw.txt > test.txt"); 
```

详细来说，你的绳子会在`exec("swath -b \"`这个地方被剪断。管道在您的命令字符串之外。我认为您的命令的其余部分将被忽略，只有第​​一部分将在 exec 中运行。

要包括其余部分，您必须转义您的特殊字符，在这种情况下您的`"`. 当您使用带有语法突出显示的编辑器时，您会更好地看到它。

[这里](http://www.homeandlearn.co.uk/php/php7p7.html)有一个简单的 php esaping 示例。

通常它对命令`print_r()`的输出很有用`exec()`。所以你可以看到发生了什么。

# string - 我可以在 mysql 5.1 中使用字符串设置外键吗？

> ID：13488079
> 
> 赞同：2
> 
> 时间：2012-11-21T07:10:54.477
> 
> 标签：string, foreign-keys, alter-table, mysql-5.1

我有以下两张表，

书桌

```
 BOOK_ID VARCHAR(25) NOT NULL PRIMARY KEY
    AUTHOR_ID VARCHAR(25) 
```

作者表

```
 AUTHOR_ID VARCHAR(25) NOT NULL PRIMARY KEY 
```

我想从书表中设置外键 AUTHOR_ID 来连接作者表。但我收到以下错误；

```
 MySQL Error Number 1005 
```

我对两个表的数据类型都使用主键和外键`INTEGER`然后不会发生错误。我可以`string`在 mysql 5.1 (InnoDB) 中使用外键使用数据类型吗？首先，我创建没有外键的数据库。而且我也用这个语句改变了我的数据库，它来自mysql查询浏览器；

```
ALTER TABLE `millionaire_db`.`book` ADD CONSTRAINT `FK_book_1` FOREIGN  KEY`FK_book_1` (`AUTHOR_ID`) REFERENCES `author` (`AUTHOR_ID`) ON DELETE RESTRICT ON UPDATE RESTRICT; 
```

# php - 确定（在下一页中）单击了哪个锚标记（上一页中的锚标记）

> ID：13488080
> 
> 赞同：2
> 
> 时间：2012-11-21T07:11:18.817
> 
> 标签：php, anchor

抱歉，问题标题令人困惑/含糊。我想不出更好的了。

***情况***

假设一个页面`abc.php`有一组锚标签。

```
<a href="xxx.php">AAA</a>
<a href="xxx.php">BBB</a>
<a href="xxx.php">CCC</a> 
```

如果我点击`BBB`，有没有办法在里面找到`xxx.php`把`BBB`它带到这里的链接？同理，如果`CCC`被点击，是否可以知道`xxx.php`重定向是因为`CCC`链接而发生的？

简而言之，我正在寻找一组重定向到单个页面的链接，并在该页面中确定哪个链接导致了重定向。

**PS**：我知道我可以做到这一点，**`query strings`**但我希望尽可能避免使用它们。此外，我还希望它仅在 PHP 中使用（如果可能，即服务器端；类似的东西`$_SERVER['HTTP_REFERER']`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:24:30.533

如果您不想在客户端上公开查询字符串（我看不出有理由为您的问题范围避免它们）并且您希望所有操作都在服务器端执行，您可以尝试使用重写规则阿帕奇。

就像是

```
<a href="xxx_aaa">AAA</a>
<a href="xxx_bbb">BBB</a>
<a href="xxx_ccc">CCC</a> 
```

并在您的 .htaccess 中重写规则，例如：

```
RewriteRule ^xxx_(.*)$ xxx.php?id=$1 
```

在您的脚本中，您可以知道它的来源

```
$_REQUEST['id'] 
```

是的，即使您没有公开它，最后您也使用了查询字符串，但是像 $_SERVER['HTTP_REFERER'] 这样的解决方案将不起作用。

# php - 如何将以下字符串转换为数组

> ID：13488082
> 
> 赞同：0
> 
> 时间：2012-11-21T07:11:27.190
> 
> 标签：php, string

```
Disk Space:50MB Data transfer:500MB Domains:1 Email Accounts:2 
```

我需要这种格式的所需输出。

```
Disk Space:50MB
Data transfer:500MB
Domains:1
Email Accounts:2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:35:14.027

```
$str="Disk Space:50MB Data transfer:500MB Domains:1 Email Accounts:2";
$match=null;
preg_match_all('/[^\:]+\:[^\s]+/i',$str,$match);
print_r($match); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => Disk Space:50MB
            [1] =>  Data transfer:500MB
            [2] =>  Domains:1
            [3] =>  Email Accounts:2
        )

) 
```

这假设您的字符串将采用`[name][colon][value][space]`格式，其中 [name] 中没有 [colon]，[value] 中没有 [space]。

此外，您可能想要`trim`匹配的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T07:17:51.563

```
<?php
echo nl2br("text\r\n");
?> 
```

# c# - 如何对齐由 C# 中的 Stream writer 创建的文本文件？

> ID：13488086
> 
> 赞同：1
> 
> 时间：2012-11-21T07:11:46.050
> 
> 标签：c#, asp.net, text-files, streamwriter

我使用以下代码从 sql server 2005 读取数据并将该数据添加到列表中。然后我使用该列表创建一个文本文件。它工作正常。

```
 String con1 = System.Configuration.ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString;

     try
            {
                List<string> list = new List<string>();

                using (SqlConnection con = new SqlConnection(con1))
                {
                    con.Open();

                    using (SqlCommand command = new SqlCommand("SELECT * FROM test", con))
                    {
                        SqlDataReader reader = command.ExecuteReader();
                        while (reader.Read())
                        {
                            string name = reader.GetString(0);
                            string dept = reader.GetString(1);
                            list.Add(name);
                            list.Add(dept);
                        }
                        StreamWriter SW;
                        SW = File.CreateText("d:\\test.txt");

                        foreach (string Txt in list)
                        {
                            SW.WriteLine(Txt);
                        }

                        SW.Close();
                    }
                } 
```

我的问题是对齐**，如果我创建文本文件，记录将逐行显示。**这里 aaaa，cccc 是 name.bbbb，dddd 是 Dept。但它显示像，

```
aaaa
bbbb
cccc
dddd 
```

但**我需要名字，像一张桌子一样分开**

```
aaaa       bbbb
cccc       dddd 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:15:04.387

更改此行

```
list.Add(name);
list.Add(dept); 
```

至

```
list.Add(name + "\t" + dept); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:16:14.290

```
for (int i = 0; i < list.Count; i += 2)
{
   SW.Write(list[i]);
   SW.Write("\t");
   SW.WriteLine(list[i+1]);
} 
```

# android - SQLite 的 ContentObserver？

> ID：13488090
> 
> 赞同：2
> 
> 时间：2012-11-21T07:12:01.663
> 
> 标签：android, observer-pattern, android-sqlite, android-cursoradapter

我一直在研究如何在 ListView 中显示我的数据库中的数据，同时跟踪数据库中的更改。

假设我有一个聊天应用程序，它显示了我所属的所有聊天室的 ListView。

适配器的查询是`SELECT * FROM CHAT_ROOM ORDER BY UPTDATE_TIME`，这意味着我希望首先显示具有最近活动的聊天室。正如我在`ChatroomListActivity`收到 3 号聊天室的消息一样，这意味着它现在需要成为 1 号聊天室并相应地重新排列单元格。

我知道 Loaders 能够在后台重新查询，但正如我在[上一个问题](https://stackoverflow.com/a/13473279/1056359)中回答的 commonsware一样，Loaders 似乎还不够好。

是否有不同的机制来实时观察数据库的变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T07:58:08.123

我做的方式

*   类 GroupChatActivity
*   类 MessageDataSource
*   类句柄NewMessage

GroupChat 活动有点明显。MessageDataSource 从数据库插入和返回对象的类。HandleNewMessage，这个不用我解释了。

*   GroupChat -> MessageDataSource -> getMessages()
*   HandleNewMessage -> MessageDataSource -> insertNewMessage();

您现在想要的是 GroupChat 和 HandleNewMessage 与 MessageDataSource 的同一实例对话。因此，您要做的是在 MessageDataSource 示例中对 MessageDataSource 进行静态引用：

```
 public class MessageDataSource {

    private static MessageDataSource mInstance;

    public static MessageDataSource getInstance(Context context) {
        if(mInstance == null){
            mInstance = new MessageDataSource(context);
        }
        return mInstance;
    }

    private MessageDataSource(Context context) {
        // NOTE: private constructor
    }
} 
```

因为您将构造函数设为私有，所以您不能这样做

```
MessageDataSource data = new MessageDataSource(context); 
```

因为构造函数是私有的，所以你必须这样做

```
MessageDataSource data = MessageDataSource.getInstance(context); 
```

现在，您的**GroupActivity**和**HandleNewMessage**类可以与 MessageDataSource 的同一个实例对话，您可以创建一个自定义**接口**来通知任何观察者。

例子：

```
 public class MessageDataSource {

    private static MessageDataSource mInstance;

    private SQLiteDatabase mDataBase;
    private SQLiteHelper DBHelper;
    private OnInsert mOnInsert;

    public static MessageDataSource getInstance(Context context) {
        if(mInstance == null){
            mInstance = new MessageDataSource(context);
        }
        return mInstance;
    }

    private MessageDataSource(Context context) {
        DBHelper = SQLiteHelper.getInstance(context);
    }

    public void createMessage(String JID, String message, String sender) {
        // Do DB Stuff here
        if(mOnInsert != null) {
            mOnInsert.onInsert(message);
        }
    }

    public void setOnInsertListener(final OnInsert onInsert) {
        mOnInsert = onInsert;
    }

    public static interface OnInsert {
        // Notify the observer that an insert has bin made
        public String onInsert(String message);
    }
} 
```

您可以通过您认为需要的接口发送尽可能多的对象。现在，在您的**GroupChatActivity**中，您可以设置（在我的情况下）OnInserListener，就像设置 OnClickListener 的正常方式一样。或者你可以让你 Activity 实现接口。

此示例可能无法满足您的确切需求，但要观察何时将新内容插入您的数据库并且您需要更新您的 listView，我认为这是要走的路，但如果有人找到更好的方法，请发表评论。:D

我希望这可以使您朝着正确的方向前进。

亲切的问候。

# php - XML解析器PHP.Syntax错误？

> ID：13488091
> 
> 赞同：1
> 
> 时间：2012-11-21T07:12:01.570
> 
> 标签：php, parsing

我有 XML 文件。这是电影放映时间，我尝试解析。

```
<?xml version="1.0" encoding="UTF-8"?> <billboard>
    <genres>
<shows>
<show id="160576" film_id="5710" cinema_id="89" hall_id="241">
                <begin>2012-11-15</begin>
                <end>2012-11-18</end>
                <times>
                                            <time time="12:30:00">
                            <prices>30, 55</prices>
                            <note><![CDATA[]]></note>
                        </time>
                                            <time time="14:45:00">
                            <prices>30, 55</prices>
                            <note><![CDATA[]]></note>
                        </time>
                                            <time time="17:00:00">
                            <prices>30, 55</prices>
                            <note><![CDATA[]]></note>
                        </time>
                                            <time time="23:45:00">
                            <prices>30, 55</prices>
                            <note><![CDATA[]]></note>
                        </time>
                                    </times>
            </show> 
```

我解析了我的 XML 并回显内容。但我无法回显“时间”和“价格”。插入代码后“//回显时间和价格//”脚本不起作用（白屏）。请帮助。PS对不起我的英语。

```
 $xmlstr = file_get_contents('test.xml');
$x = new SimpleXMLElement($xmlstr); 
$id_f = 89;
$cinema_id = "//show[@cinema_id=".$id_f."]";

$cinema=$x->xpath($cinema_id);
///////////////////////start/////////////////////////////////////////////
 foreach($cinema as $cinema)
      {
///////////string///////////////////
$begin_m = $cinema[0]->begin;
$end_m = $cinema[0]->end;
$film_id_m = $cinema[0]['film_id'];

/////////echo//////////////////////
echo "<b>Begin: </b>".$begin_m."<br>"; 
echo "<b>End: </b>".$end_m."<br>"; 
echo "<b>ID film: </b>".$film_id_m."<br>"; 
/////////echo time and price///

    foreach($cinema[0]->times->time as $k){
    $obj=current($k);
    $time_b = $obj['time']."\n";

    echo "Time: "$time_b."<br>";
    foreach($cinema[0]->times as $price){

    echo "Price: "$price[0]->pices."<br>";

}
/////////////   

    echo "<hr>";  
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:46:58.437

您的代码中存在语法错误，导致 500 Internal Server 错误（显示白屏）。

语法错误 1：

```
echo "Time: ".$time_b."<br>";
          // ^ you were missing this 
```

语法错误 2：

```
 echo "Price: ".$price[0]->pices."<br>";
            // ^ you were missing this 
```

此外，在您的`foreach`循环中，您为元素分配了与您正在循环的数组相同的变量名称。这不会导致错误，但这意味着您的`$cinema`数组在循环后已死，它将被设置为最后一个元素的值。给它一个不同的名字：

```
foreach($cinema as $cinemaItem) 
```

修复这些后，您的代码将按预期输出。将来您应该检查错误日志或打开错误，因为它们会告诉您语法错误在哪里：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

# javascript - 有没有办法使用 javascript 检查 chrome chrome://flags/ 值？

> ID：13488093
> 
> 赞同：6
> 
> 时间：2012-11-21T07:12:18.167
> 
> 标签：javascript, google-chrome

我想检查是否在页面加载时使用 java 脚本将**[禁用加速 2D 画布]设置为禁用或启用。** `chrome://flags/`有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:44:01.457

好吧，试着回答后面的问题：用户的画布硬件加速了吗？

使用 GPU 画布，drawImage() 到旋转和非旋转上下文之间的时间几乎没有差异。将相同的操作与在 CPU 上运行的画布进行比较会产生很大的差异。

# perl - 如何从两个文本文件中提取不匹配的行？

> ID：13488101
> 
> 赞同：1
> 
> 时间：2012-11-21T07:13:03.003
> 
> 标签：perl, cmd

我知道使用 perl 提取匹配行，但我想要两个不匹配的文件中的行，即它们对于两个文本文件中的文件是唯一的。

**文件 1**：

```
one|E2027.1|073467|66   ATGCTATGTTTTGCTAAT  
one|E2002.1|073405|649  ATGAAAGCTTTAAAGAAA  
one|E2001.1|734704|201  ATGTTTTCAGGTATTATA  
one|E2025.1|073468|204  ATGAAACAGAAATATATT  
one|E2028.1|073431|578  ATGTTATTTAATTATGGT  
one|E2040.1|073743|862  ATGATTTATCCTAATAAT 
```

.........~2000 条这样的线

**文件2**：

```
one|E2027.1|073467|66  
one|E5005.5|000005|005  
one|E2001.1|734704|201  
one|E2025.1|073468|204  
one|E2028.1|073431|578  
one|E2040.1|073743|862 
```

.........~2000 条这样的线

如何使用 perl 或 cmd 命令提取不匹配的行？
在这里，例如文件 2 的第 2 行是文件 2 所独有的.....!!!

这是我到目前为止所拥有的

```
foreach(@2) {
    @org=split('\t',$_);
    chomp($two=$_);
    foreach(@1) {
        if($_=~m/^$two.+/) {
            print OUT1 "$_";
        } else {
            print OUT2 "$_";
        }
    }
} 
```

但其他输出会提供 GB 的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:45:48.963

您必须先读入其中一个文件。然后您可以匹配另一个文件的每一行的内容。我使用`first`List [::Util](https://metacpan.org/module/List%3a%3aUtil)来做到这一点。`grep`也可以，但`first`在找到第一次出现后会停止，这样可以节省处理大文件的时间。

```
use strict;
use warnings;
use List::Util qw(first);
use 5.014;

my $file1 = <<"FILE1";
one|E2027.1|073467|66\tATGCTATGTTTTGCTAAT
one|E2002.1|073405|649\tATGAAAGCTTTAAAGAAA
one|E2001.1|734704|201\tATGTTTTCAGGTATTATA
one|E2025.1|073468|204\tATGAAACAGAAATATATT
one|E2028.1|073431|578\tATGTTATTTAATTATGGT
one|E2040.1|073743|862\tATGATTTATCCTAATAAT
FILE1

my $file2 = <<"FILE2";
one|E2027.1|073467|66
one|E5005.5|000005|005
one|E2001.1|734704|201
one|E2025.1|073468|204
one|E2028.1|073431|578
one|E2040.1|073743|862
FILE2

my @file1_content = map { (split(/\t/))[0] } split /\n/, $file1;

foreach my $line (split /\n/, $file2) {
  chomp $line; # we need that because the split above is just a filler
  next if first { $_ eq $line } @file1_content;
  say $line;
} 
```

* * *

我强烈建议您在所有程序中使用`strict`and 。`warnings`它们都可以帮助您发现小的、微妙的错误。以更具描述性的方式命名变量也是一个好主意。数组命名`@1`和`@2`非常糟糕。我很难理解哪个变量做了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:41:31.090

只是为了帮助您改进代码：

```
foreach(@2) {
    @org=split('\t',$_);
    chomp($two=$_);
    foreach(@1) {
        if($_=~m/^$two.+/) {
            print OUT1 "$_";
        } else {
            print OUT2 "$_";
        }
    }
} 
```

你知道内循环的代码多久执行一次吗？`scalar(@2) * scalar(@1)`次，在您的示例中约为 400 万次。这就是为什么你的文件变得那么大的原因。将内循环替换为

```
$matched=0;
foreach(@1) {
    if($_=~m/^$two.+/) {
        $matched=1;
        last;
    }
}
if($matched) {
    print OUT1 $_;
} else {
    print OUT2 $_;
} 
```

内部循环现在跟踪匹配并且写入文件只发生在外部循环中。**请注意，我试图适应您的编码风格！**

# 编码风格！啊！:D

这种编码风格是从上个千年开始的！让我添加一些说明如何使您的代码更安全、更易读和更可调试：

*   总是`use strict;`和`use warnings;`。许多错误可以通过这种方式尽早发现。
*   不要使用全局（包）变量，这对`strict`ures 没有那么诱人。使用词法变量 ( `my @lines = ...`)。
*   使用正确的变量名：`@1`不是很有帮助。事实上，使用它的单个元素 ( `$1[42]`) 看起来很混乱，因为`$1`Perl 的正则表达式捕获变量。它不必非常富有诗意。一个简单的`@lines`会工作，但甚至`@gargravarr`比`@1`.
*   不需要时不要使用字符串插值。可接受的用途：`"Hi $name, what's up?"`. 坏：`print "$_"`。只需使用`print $_`.
*   使用空白。`if($_=~m/^$two.+/)`看起来像线路噪音。为了进行比较，请看这段手工制作的史诗般美丽的 Perl 代码：

```
foreach 我的 $line (@lines) {
    打印$差异$行
        if $line =~ /^$prefix.*/;
}
```

因此，让我们尝试重写该代码：

```
my $matched = 0;

foreach my $line (@lines) {
    if ($line = ~/^$two.+/) {
        $matched=1;
        last;
    }
}

if ($matched) {
    print OUT1 $_;
} else {
    print OUT2 $_;
} 
```

现在感觉好多了！:)**知道你在做什么！不要只是复制'n'粘贴代码片段。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:01:52.997

```
#!/usr/bin/perl
use strict;
use warnings;

open my $fh1 ,'<', 'f1' or die $!;
open my $fh2 ,'<', 'f2' or die $!;
chomp(my @ar1=<$fh1>);
chomp(my @ar2=<$fh2>);
close $fh1;
close $fh2;

my @ar3=();
foreach my $x (@ar2) {
   push @ar3, $x if not grep (/^\Q$x\E/,@ar1);
}
print "@ar3"; 
```

其中 f1 和 f2 是您的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:39:07.257

**我懂了; 前提是要比较的数据应该在两个文件中的单列中**

```
use strict;use warnings;
print "Enter file1: ";
chomp($file=<STDIN>);
open(FH,$file);

print"Enter file2: ";
$hspfile=<STDIN>;
open(FH1,$hspfile);

my $list1;
my $list2;
my @list1 =<FH1> ;my @list2 =<FH> ;
print "enter output file1 : ";
$out = <STDIN>;
chomp($out);
open(OUT,">$out");
LIST2: foreach $list2 (@list2){
LIST1: foreach $list1 (@list1){
if ("$list2" eq "$list1") {
next LIST2;
}
}
print OUT"$list2";
} 
```

# c++ - 枚举不能在 Windows7 上使用 mingw 编译器与 C++ 一起使用

> ID：13488104
> 
> 赞同：0
> 
> 时间：2012-11-21T07:13:07.577
> 
> 标签：c++, windows, windows-7, mingw

我正在尝试使用 mingw 编译器在 Windows 上编译 libaws。在 libaws (https://sourceforge.net/projects/libaws/) 代码中，我试试这个：

```
C:/la/include/libaws/config.h:2:0: warning: "WIN32" redefined [enabled by default]
<built-in>:0:0: note: this is the location of the previous definition
In file included from C:/tools/libaws-0.9.2/src/canonizer.h:23:0,
                    from C:\tools\libaws-0.9.2\src\s3\s3connection.cpp:25:
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:62:9: error: expected identifier before '(' token
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:62:9: error: expected '}' before '(' token
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:62:9: error: expected unqualified-id before numeric constant
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:62:9: error: expected ')' before numeric constant
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:70:5: error: expected unqualified-id before 'public'
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:109:19: error: 'ActionType' was not declared in this scope
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:109:43: error: expected primary-expression before 'const'
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:110:19: error: expected primary-expression before 'const'
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:110:51: error: expected primary-expression before 'aExpiration'
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:129:5: error: expected unqualified-id before 'private'
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:135:51: error: 'ActionType' has not been declared
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:139:40: error: variable or field 'setRequestMethod' declared void
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:139:40: error: 'ActionType' was not declared in this scope
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:154:5: error: expected unqualified-id before 'public'
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:161:1: error: expected declaration before '}' token
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:143:7: warning: 'size_t aws::s3::getS3Data(void*, size_t, size_t, void*)' declared 'static' but never defined [-Wunused-function]
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:146:7: warning: 'size_t aws::s3::setCreateBucketData(void*, size_t, size_t, void*)' declared 'static' but never defined [-Wunused-function]
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:149:7: warning: 'size_t aws::s3::setPutData(void*, size_t, size_t, void*)' declared 'static' but never defined [-Wunused-function]
                    C:/tools/libaws-0.9.2/src/s3/s3connection.h:152:7: warning: 'size_t aws::s3::getHeaderData(void*, size_t, size_t, void*)' declared 'static' but never defined [-Wunused-function]
                    src\CMakeFiles\aws.dir\build.make:561: recipe for target 'src/CMakeFiles/aws.dir/s3/s3connection.cpp.obj' failed
                    mingw32-make[2]: *** [src/CMakeFiles/aws.dir/s3/s3connection.cpp.obj] Error 1
                    CMakeFiles\Makefile2:1006: recipe for target 'src/CMakeFiles/aws.dir/all' failed
                    mingw32-make[1]: *** [src/CMakeFiles/aws.dir/all] Error 2
                    Makefile:145: recipe for target 'all' failed
                    mingw32-make: *** [all] Error 2

                    C:\la> 
```

它发生的地方是在一个班级

```
class S3Connection {
    enum ActionType {
        // VALUES
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:16:47.727

好吧，你显然是在重新定义`WIN32`你的`enum`. `WIN32`在 Windows 平台上预定义。

**编辑：** 您的日志中实际上有 2 个错误：

`WIN32`重新定义`config.h`，该库实际上会指导您如何进行每个平台的配置：

```
// unset WIN32 for cygwin environment
#cmakedefine CYGWIN
#ifdef CYGWIN
#  undef WIN32
#endif 
```

@MichaelBurr 回答中指出了第二个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:47:07.460

问题是枚举名称之一`s3connection.h`与 Win32 SDK 中的宏名称冲突。在 Win32 中，`DELETE`是用于处理 ACL（访问控制列表）的宏。处理此问题的最佳方法可能是：

```
#undef DELETE 
```

在包含 Windows 标头之后和包含`libaws`标头之前的某个位置。

要么这样，要么修改枚举名称（以及可能使用它们的任何地方），这样就不会发生冲突。

请记住，这表明`libaws`可能没有直接在 Windows 目标上进行太多使用/测试，因此您可能需要支付更多费用才能成为先驱。使用 Cygwin 而不是 MinGW 可能会更好，因为它看起来`libaws`至少在 Cygwin 平台上完成了一些工作。

# windows-phone-7 - WP7 MediaHistory.Instance 空引用异常

> ID：13488105
> 
> 赞同：2
> 
> 时间：2012-11-21T07:13:11.413
> 
> 标签：windows-phone-7, instance, nullreferenceexception

按照[MSDN 上](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769558%28v=vs.105%29.aspx)关于如何将我的应用程序与 Music & Video Hub 集成的说明，我想设置正在播放的磁贴和历史磁贴。

每次我收到`TrackEnded`事件，这意味着轨道是好的，然后我在集线器中设置正在播放磁贴

但是，我有时会收到空引用**异常**`MediaHistory.Instance`

```
MediaHistoryItem nowPlayingItem = new MediaHistoryItem();
nowPlayingItem.Title = track.Title;
nowPlayingItem.PlayerContext.Add("LaunchNowPlaying", myID);
nowPlayingItem.ImageStream = imageStream;
nowPlayingItem.Source = string.Empty;
MediaHistory.Instance.NowPlaying = nowPlayingItem; // null reference exception 
```

为什么以及如何解决这个问题？

# python - 如何在python的scrapy中启用cookiemiddleware

> ID：13488106
> 
> 赞同：6
> 
> 时间：2012-11-21T07:13:15.733
> 
> 标签：python, scrapy

在他们的文档[中 http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#cookies-mw](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#cookies-mw)

他们告诉启用 cookie 中间，但我无法找到如何执行此操作以及为此编辑哪个文件。谁能告诉我我该怎么做

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T07:50:56.867

**更新**它会显示cookie默认在中间件中，所以`COOKIES_ENABLED = True`应该足够了。如果中间件不是默认值的一部分，则仅需要以下内容...

从我可以从 doc.scrapy.org/en/latest/topics/downloader-middleware.html 中得知，您可以 `'scrapy.contrib.downloadermiddleware.cookies.CookiesMiddleware'`使用相关的顺序添加到 DOWNLOADER_MIDDLEWARE：

> 要激活下载器中间件组件，请将其添加到 DOWNLOADER_MIDDLEWARES 设置中，该设置是一个字典，其键是中间件类路径，它们的值是中间件顺序。

```
DOWNLOADER_MIDDLEWARES = {
    'myproject.middlewares.CustomDownloaderMiddleware': 543,
    'scrapy.contrib.downloadermiddleware.cookies.CookiesMiddleware': 700 # <-
} 
```

700 来自[http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#built-in-downloader-middleware-reference](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#built-in-downloader-middleware-reference)`DOWNLOADER_MIDDLEWARES_BASE`的默认值 然后将（和可选）与您的其余设置一起放置.`COOKIES_ENABLED = True``COOKIES_DEBUG = True`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-12T13:44:41.583

只是说：

```
COOKIES_DEBUG = True 
```

在`my-project/my-spider/spiders/settings.py`

# php - 使用正则表达式检查“%”字符的 MySQL 查询值

> ID：13488107
> 
> 赞同：0
> 
> 时间：2012-11-21T07:13:20.997
> 
> 标签：php, mysql, regex

我想检查 MySQL Query 的值是否包含`%`字符（可以出现多次）但不包含转义的`\%`.

所以它应该匹配：

*   `'%test'`
*   `'%test\%'`
*   `'test\\%'`- 应该匹配，因为它是逃避而`\`不是`%`
*   `'%test\%%'`
*   `'\%test%test\%'`

但不是：

*   `'test\%'`
*   `'\%test\%'`
*   `'\%test\%test\%'`

我不擅长正则表达式，有人可以帮助我吗？

提前致谢。

**编辑**：
我正在尝试创建一个用于从数组生成 SQL 查询的 PHP 库，并且生成的查询可能主要用于 MySQL。
因此，正则表达式过滤过程将在 PHP 中进行。

对不起，我忘了提这个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:20:48.757

假设 SQL Server，这*应该*工作：

```
WHERE
  ColumnX LIKE '%[%]%' ESCAPE '\' 
```

虽然我不确定它`\\%`是否正确处理。

这在任何情况下都应该有效：

```
WHERE
  REPLACE(REPLACE(ColumnX, '\\', ''), '\%', '') LIKE '%[%]%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:31:32.147

检查 PHP 代码：

```
unset($str1,$str2,$str3,$str4,$str5,$str6,$str7);

$str1 = '%100'; 
$str2 = '%100\%';
$str3 = "100\\\\%";
$str4 = "%100\\%%";
$str5 = '100\%';
$str6 = "100\\\\\\\\%";
$str7 = "100\\\\\\%";
$str8 = "100\\\\\\\\\\\\%";
$str9 = "100\\\\\\\\\\\\\\%";

$reg_exp=  '/^%|[^\x5C]%|[^\x5C](\x5C\x5C)+%/';

echo $str1.' = '.preg_match($reg_exp, $str1).'<br />';
echo $str2.' = '.preg_match($reg_exp, $str2).'<br />';
echo $str3.' = '.preg_match($reg_exp, $str3).'<br />';
echo $str4.' = '.preg_match($reg_exp, $str4).'<br />';
echo $str5.' = '.preg_match($reg_exp, $str5).'<br />';
echo $str6.' = '.preg_match($reg_exp, $str6).'<br />';
echo $str7.' = '.preg_match($reg_exp, $str7).'<br />';
echo $str8.' = '.preg_match($reg_exp, $str8).'<br />';
echo $str9.' = '.preg_match($reg_exp, $str9).'<br />'; 
```

[http://ideone.com/Bgq5bV](http://ideone.com/Bgq5bV)

# android - Android 如何判断是否正在使用互联网连接？

> ID：13488109
> 
> 赞同：2
> 
> 时间：2012-11-21T07:13:41.430
> 
> 标签：android, user-experience

当用户浏览应用程序时，我的应用程序会从服务器下载大量内容（json 和图像）。为了用户体验，我不想现场下载内容，而是将它们预先缓存在内存和SD卡上，这样它们就可以在没有太多等待的情况下使用。

由于我不希望预缓存过程占用过多的网络流量，从而使用户操作受到网络流量堵塞的阻碍，因此我只会在我的应用程序没有任何 Internet 活动时才让应用程序开始预缓存这些内容。

因此，我想问一下是否有任何方法可以确定我的应用程序是否有任何互联网活动。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-12T14:09:11.967

用户在第一次打开应用程序时因为还有其他下载而不会使用的体验听起来会阻碍用户。警告用户数据量可能是另一种解决方案。在警告屏幕（首次打开时），用户可以被引导到他们可以设置网络的设置中。这允许用户在需要时进行自定义，否则他们将继续平稳过渡到应用程序。

可以使用 ConnectivityManager 设置网络设置。这将允许您查看用户是否使用 Wifi 与移动数据。

[http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)

DDMS 工具包括一个用于监控网络流量的工具。这可能是一种选择。

[http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)

# hadoop - 为什么在hadoop reducer中执行context.write时没有锁定问题

> ID：13488111
> 
> 赞同：0
> 
> 时间：2012-11-21T07:13:48.570
> 
> 标签：hadoop, file-io

我对 conext.write 如何在 hadoop reducer 中工作感到困惑。如果所有人都写入 HDFS 中的同一个文件，为什么 hadoop 减速器中没有锁定问题（如果有超过 1 个减速器）？

通常，如果我们自己在 hadoop mapper/reducer 中写入同一个文件，我们会遇到无法同时写入同一个文件的锁定错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:34:11.580

如果您的 map reduce 程序在多节点集群上运行，那么每个节点上都会运行唯一的 Map 和 Reduce 程序。

Map Reduce 中的 Reduce 不直接写入文件本身。它将这个任务委托给负责数据下沉的 OutputFormat。它可以是文件、数据库表或任何其他位置。FileOutputFormat 将下沉到 Hadoop 分布式文件系统 (HDFS) 中的某个位置。DBOutputFormat 将下沉到数据库表（阅读这篇[文章](http://shazsterblog.blogspot.com/2012/11/storing-hadoop-wordcount-example-with.html)）。

有关文件锁定的问题，请查看 Yahoo Developer Network 上的这篇[文章](http://developer.yahoo.com/hadoop/tutorial/module4.html#dataflow)。

# .net - 在托管环境中，为什么我们需要 IDisposable

> ID：13488112
> 
> 赞同：2
> 
> 时间：2012-11-21T07:13:52.787
> 
> 标签：.net, garbage-collection, idisposable

托管代码的主要优点之一是内置内存管理。您不需要跟踪指针、缓冲区大小、释放您完成的内存等，*托管*方面会为您完成这些。

那么为什么我们有一个`IDisposable`接口呢？ [MSDN 说](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口是处理非托管资源，如窗口句柄、文件等。但为什么要求我显式调用`Dispose`方法（或使用`Using`）？

1.  为什么当对象超出范围并`Dispose`自动调用时，CLR 不能跟踪？

```
Public Function DoSomething() As String
    Dim reader As New StreamReader("myfile.txt")
    Dim txtFromFile As String = reader.ReadToEnd()

    Return txtFromFile '<==== reader goes out of scope after this line, so call Dispose automatically
End Function 
```

1.  至少，为什么垃圾收集器最终不会找到它并调用`Dispose`？

我错过了什么？

**编辑**

有几个人（这里和其他建议的答案`Using`）建议垃圾收集不够好，因为 GC*最终*只能收集`IDisposable`​​. 我不明白为什么该论点区分 an`IDisposable`和 .NET 中的任何其他对象。在您说`IDisposable`对象更占用资源之前，请考虑：

1.  上面的[MSDN](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)说`IDisposable`适用于非托管对象，无论它们的资源要求如何
2.  我见过一些资源非常密集的 .NET 对象（[System.Web.UI.Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)或[System.Data.Objects.ObjectContext](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)怎么样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:59:34.530

正如我在评论中所说，CLR 不会跟踪对象何时超出范围。

让我们举个例子：

```
Public Function DoSomething() As String
    Dim reader As New StreamReader("myfile.txt")
    Dim txtFromFile As String = reader.ReadToEnd()

    Return txtFromFile '<==== reader goes out of scope after this line, so call Dispose automatically
End Function 
```

它实际上需要分析方法的整个主体，检查您是否已将对该阅读器的引用传递给另一个方法，或者将引用存储在例如字段中。

*然后*它需要确定该其他方法是否已将引用存储在某处，或者是否调用了其他方法等。

*然后*它必须*推断*，如果引用存储在其他任何地方，其意图是否是其他东西稍后会使用该引用并期望在那里找到一个未处置的实例。

将其与*您的*知识进行比较。您*知道*（希望）您是否在其他地方存储了引用，或者将引用传递给其他已“获得”此一次性用品的“所有权”。如果您知道这些都没有发生，您可以将此知识传达给编译器 - 通过添加一个`Using`块。

* * *

> 或者无论如何，垃圾收集器最终不会到达并调用`Dispose`吗？

如果 a) 对象直接“包含”非托管资源，并且 b) 实现该对象的人遵循最佳实践，那么他们应该在该对象上实现一个终结器，该终结器将对非托管资源执行清理（通常通过调用之间共享的方法）终结器和`Dispose`)。

但是，您不知道*下*一次垃圾回收何时发生。同时，您可能会拒绝其他程序访问相同的非托管资源 - 甚至是您自己程序的另一部分。您应该将非托管资源视为稀缺资源。如果有人已实现，他们希望您在您知道不再需要访问该资源时`Dispose`调用它（显式或通过）。`Using`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:06:26.703

当对象超出范围时，CLR 不会跟踪。垃圾收集器的重点是它*最终会*收集死对象。但关键词是“最终”。您无法保证它*何时*发生，因此如果您需要它在特定时间发生，您必须做一些事情来实现它。这是什么`Dispose()`，`using`是为了什么。

通常，CLR*无法*跟踪对象何时超出范围，因为虽然它可能不再存在于创建它的范围内，但引用可能已传递给另一个范围内的另一个函数，可能在另一个线程上。

当你创建一个对象时，你只会得到一个对它的引用。像其他任何参考一样。该对象不在当前范围内，它与创建它的站点没有特殊附件。

这与 C++ 中的情况不同，在 C++ 中创建对象时，它就存在于其中，并且当您离开*该*特定范围时将调用析构函数（并且如果对该对象的引用存在于其他地方，则运气不好）

所以在这种情况下，您实际上必须更加小心并在垃圾收集环境中编写更多代码。您不能仅仅依赖资源的生命周期受其声明的范围的限制，因此您必须明确说明何时应该处置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:34:33.603

C++ 语言旨在准确跟踪事物何时进入和超出范围。在对象具有明确可识别的“所有者”的情况下，它非常擅长这一点。不幸的是，在许多情况下，对象本身并没有特定的所有者。例如，如果某个对象生成一个包含字符“Hello”的字符串并将其传递给存储对它的引用的`Foo`其他对象，则既不`Bar``Foo``Bar`将有任何方式知道其他对象是否以及何时不再需要该字符串。C++ 可以通过让每个字符串关联一个计数器来处理这种情况，使用任何方法创建一个引用递增该计数器，并使用任何放弃引用的方法递减它，如果计数器达到零，则删除该对象。不幸的是，要求方法在每次传递对对象的引用时增加和减少计数器可能会很昂贵，尤其是在多处理器机器上（因为有必要确保如果例如计数等于 3 并且两个处理器同时创建对对象，一个会将计数从 3 增加到 4，另一个将计数从 4 增加到 5，而不是让两个处理器都看到计数是 3，然后都将其设置为 4，这将是一场灾难）。

垃圾收集系统通过简单地让程序绕过引用来避免这个问题，而不必担心跟踪对对象的最后一个引用何时被放弃或覆盖。任何时候系统决定它应该尝试重用一些内存，它可以暂时冻结所有内容，检查哪些对象仍然具有对它们的实时引用，并释放不再需要的对象使用的任何内存。当系统决定启动垃圾收集周期时，所有进程都必须同步（不同的系统在必须冻结所有内容的时间上有所不同），但其成本可能远低于任何时候要求处理器间同步的成本例程将引用传递给另一个。

垃圾收集系统可以很好地管理内存。释放对象使用的内存将无济于事，直到如果内存被释放，内存实际上将用于某些事情。不需要使用太多内存的应用程序可能会在不执行任何垃圾收集的情况下运行任意长时间这一事实是一件好事，因为当没有其他东西需要内存时，将对象不必要地保留在内存中并没有什么坏处无论如何。不幸的是，应用程序没有使用太多内存这一事实并不意味着没有任何废弃的对象可以独占使用内存以外的资源（例如，为独占访问而打开的文件之类的东西）并阻止其他对象- 成为这些资源的用户，避免访问它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T17:40:27.537

只是为了将其他答案中所有令人惊奇的有用信息汇总到一个地方，我认为这是理解为什么.NET**需要**`IDisposable`.

# 资源可用性

1.  垃圾收集方案（即“托管代码”）是为管理内存*而设计的*并且非常擅长管理内存。
2.  还有其他类型的系统资源，例如：文件句柄、数据库连接、套接字、窗口、进程等。
3.  GC 的一个关键特性是它会留下废弃的内存，直到有*其他东西*需要内存，而不是尽快清理它。这对内存有好处（谁在乎它不使用时的作用），但对其他资源却不是那么好。它们取决于在实际可用时被列为可用。
4.  如果没有`IDisposable`，非内存资源（文件等）将不可用，直到 GC 碰巧最终确定了首先获取它们的对象，即当系统需要该对象的内存空间时。这可能是 a) 很长一段时间，或 b) 永远不会。

# 定稿

1.  GC 以不确定的顺序最终确定对象。更糟糕的是，它将对象终结的托管和非托管部分分开。
2.  这意味着，GC 可以在非托管部分*之前*完成对象的托管部分。如果非托管尝试回调托管...

# 代码结构

1.  *编译器*没有好的方法可以知道对象何时“被遗弃”。
2.  块为变量提供`Using`了专门的作用域以通知编译器，“在这个块结束后，我将放弃这个对象”。
3.  这将管理引用的责任转移到了*程序员*身上，而不是 CLR（通常在哪里）。如果你从一个`Using`块中传递一个资源，你很可能会得到一个`NullReferenceException`
4.  由于上面讨论的原因，这个负担确实需要落在程序员身上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T07:44:19.857

也许如果您有一个长期运行的函数，或者如果您已经使用外部资源在长期存在的类中初始化了一个字段，那么等到变量/字段超出范围可能是不可取的。

此外，如果一个静态字段已经像这样初始化，它永远不会超出范围。

# web-services - 使用 C# 作为服务器端的黑莓推送通知

> ID：13488116
> 
> 赞同：1
> 
> 时间：2012-11-21T07:13:59.433
> 
> 标签：web-services, blackberry

1.  我正在尝试使用 C# Web 服务在黑莓中发送推送通知，但我面临的问题是它返回异常“远程服务器返回错误：（404）未找到。”。根据 RIM 标准，所有信息都是正确的，所以请尽快帮助我。

    ```
     [WebMethod]
    public bool push(string notification)
    {
        bool success = true;
        byte[] bytes = Encoding.ASCII.GetBytes("Hello");

        Stream requestStream = null;
        HttpWebResponse HttpWRes = null;
        HttpWebRequest HttpWReq = null;

        String BESName = "cp****.pushapi.eval.blackberry.com";
        try
        {
            //http://<BESName>:<BESPort>/push?DESTINATTION=<PIN/EMAIL>&PORT=<PushPort>&REQUESTURI=/
            // Build the URL to define our connection to the BES.
            string httpURL = "https://" + BESName +  "/push?DESTINATION=2B838E45&PORT=32721&REQUESTURI=/";

            //make the connection
            HttpWReq = (HttpWebRequest)WebRequest.Create(httpURL);
            HttpWReq.Method = ("POST");
            //add the headers nessecary for the push
            HttpWReq.ContentType = "text/plain";
            HttpWReq.ContentLength = bytes.Length;
            // ******* Test this *******
            HttpWReq.Headers.Add("X-Rim-Push-Id", "2B838E45" + "~" + DateTime.Now); //"~" +pushedMessage +
            HttpWReq.Headers.Add("X-Rim-Push-Reliability", "application-preferred");
            HttpWReq.Headers.Add("X-Rim-Push-NotifyURL", ("http://" + BESName + "2B838E45~Hello~" + DateTime.Now).Replace(" ", ""));

            // *************************
            HttpWReq.Credentials = new NetworkCredential("Username", "Password");

            requestStream = HttpWReq.GetRequestStream();
            //Write the data from the source
            requestStream.Write(bytes, 0, bytes.Length);

            //get the response
            HttpWRes = (HttpWebResponse)HttpWReq.GetResponse();

            var pushStatus = HttpWRes.Headers["X-RIM-Push-Status"];

            //if the MDS received the push parameters correctly it will either respond with okay or accepted
            if (HttpWRes.StatusCode == HttpStatusCode.OK || HttpWRes.StatusCode == HttpStatusCode.Accepted)
            {
                success = true;
            }
            else
            {
                success = false;
            }
            //Close the streams

            HttpWRes.Close();
            requestStream.Close();
        }
        catch (System.Exception)
        {
            success = false;
        }

        return success;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:07:27.200

当我尝试上面的代码时，我得到了同样的错误。代替

```
String BESName = "cp****.pushapi.eval.blackberry.com"; 
```

和

```
String BESName = "cpxxx.pushapi.eval.blackberry.com/mss/PD_pushRequest"; 
```

并确保您在此处提供正确的用户名和密码：

```
HttpWReq.Credentials = new NetworkCredential("username", "password"); 
```

我得到了成功 = true;

然而，即使上面的代码执行成功，我仍然没有在黑莓设备上看到推送消息。

# python - 无法在 Sikuli 中导入 PIL

> ID：13488117
> 
> 赞同：2
> 
> 时间：2012-11-21T07:14:03.723
> 
> 标签：python, sikuli

我想在 Sikuli 中导入 PIL 为此我添加了下面的代码

```
import sys
sys.path.append("C:\\Python27\Lib\site-packages")
sys.path.append("C:\\Python27\Lib\site-packages\PIL")

import PIL
import Image 
```

所以它导入了上述模块，但是当我尝试导入 ImageFont 时，它给了我以下错误：

```
def getmask2(self, text, mode="", fill=Image.core.fill):
File "C:\Python27\Lib\site-packages\PIL\Image.py", line 39, in __getattr__
raise ImportError("The _imaging C module is not installed")
ImportError: The _imaging C module is not installed 
```

我能够在 Python 脚本中成功导入 PIL 和 Image 和 ImageFont 并且代码运行良好。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T23:03:18.737

Sikuli IDE 使用 Jython，因此安装到本地 Python 版本的包将无法在 Sikuli IDE 中导入，并且 Jython 不支持 c 扩展，据我所知 PIL 需要哪些（请参阅 [http://bugs. jython.org/issue1388](http://bugs.jython.org/issue1388)）。

我认为您需要使用 Java 库，可能类似于 ImageJ（请参阅 [http://fiji.sc/wiki/index.php/Jython_Scripting](http://fiji.sc/wiki/index.php/Jython_Scripting)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T08:38:09.230

由于以下（我认为有价值的信息）被拒绝作为对原始问题的编辑（我的意图：人们应该首先看到这一点），我现在把它作为答案：

我想补充一点：只要 Python 模块只包含 Python 代码，就可以在 Jython/Sikuli 脚本中导入它们。有许多为 Python 编写的模块，它们都持有这种条件（例如 xlrd、xlwt）。但正如正确提到的：PIL 包含基于 C 的内容，并且通常（JNI 库除外）无法加载（因此上述错误消息是正确的，但可能会导致错误的方向）。

# silverlight - 有没有办法在视频结束时停止 (M MPCM) Silverlight 视频播放器？

> ID：13488118
> 
> 赞同：1
> 
> 时间：2012-11-21T07:14:08.477
> 
> 标签：silverlight, sharepoint, sharepoint-2010

我在 SharePoint 2010 网站中使用 MMPCM Silverlight 视频播放器。视频不断循环播放。有没有办法在视频结束时停止播放器？

# twitter-bootstrap - 如何显示引导程序的工具提示

> ID：13488120
> 
> 赞同：0
> 
> 时间：2012-11-21T07:14:28.903
> 
> 标签：twitter-bootstrap

```
 $(function(){ 
        $("#plus").tooltip({
            placement: 'top',
            trigger: 'hover',
            title : 'test'
        })
        $('#minus').tooltip({
            placement: 'top',
            trigger: 'hover',
            title : 'test'
        })
    });    

<button class="btn" type="button" id="plus"><i class="icon-plus-sign"></i></button
<button class="btn" type="button" id="minus"><i class="icon-minus-sign"></i></button> 
```

我在写你的代码没有显示你的弹出窗口。

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:13:44.573

看来你做得对了。虽然第一个按钮结束标签没有关闭。

```
</button 
```

其他引导功能是否正常工作（即包括引导 js 文件等）？

我在这里测试了你的例子：[JSFiddle](http://jsfiddle.net/RL2ux/)（切换到底部）

# objective-c - Xib 无法读取存档错误

> ID：13488124
> 
> 赞同：2
> 
> 时间：2012-11-21T07:14:42.970
> 
> 标签：objective-c, cocoa, xcode4.5

我正在努力`xcode 4.5`；我有两个xib，一个用于英语，另一个用于阿拉伯语。在阿拉伯语 xib 中进行了一些更改后，我保存了它并得到了错误：

```
Interface Builder XIB Compiler Error Group

/Users/administrator/Desktop/project/projectName/projectName/ar.lproj/MainMenu.xib: 
The document "MainMenu.xib" could not be opened. Could not read archive. 
```

谁能告诉我如何解决这个问题？

# eclipse - 如何在 Jetty 上部署 Web 应用程序

> ID：13488126
> 
> 赞同：0
> 
> 时间：2012-11-21T07:14:51.270
> 
> 标签：eclipse, command-prompt

我创建了一个战争文件，然后我在 Eclipse 中执行，如此处[所述](http://www.enavigo.com/2008/08/29/deploying-a-web-application-to-jetty/#more-208)。

我不知道配置上下文路径，如何运行war文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:27:49.517

有两种方法可以使用`Jetty`Server运行 webapp

1.  [使用Jetty_WTP_Plugin](http://wiki.eclipse.org/Jetty_WTP_Plugin)配置码头服务器并在 eclipse 中运行 webapp
2.  [从 Eclipse 的 Jetty Distributions](http://www.eclipse.org/jetty/downloads.php)下载独立的码头服务器

如果你使用第二个选项，你需要创建war文件保持war文件接口/webapps文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:32:00.850

我没有使用过jetty，但我知道它与tomcat非常相似。只需将您的战争文件（例如 foo.war）放在 webapps 目录中即可；通过以下命令启动码头

```
java -jar start.jar 
```

并`http://localhost:8080/foo`在您的浏览器中点击

顺便说一句，您使用的教程已经很老了，可能不适用于 jetty 8 或 9

# ruby-on-rails - 无法安装 Nokogiri

> ID：13488129
> 
> 赞同：1
> 
> 时间：2012-11-21T07:14:52.647
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, nokogiri

当我`sudo gem install nokogiri`在 Ubuntu 12.1 上运行时，我得到了这个。出了什么问题，我该如何解决？

```
jason@jason:~/ror/clss$ sudo gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file 
-- mkmf (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:5:in `<main>'

Gem files will remain installed in /var/lib/gems/1.9.1/gems/nokogiri-1.5.5 for 
inspection. Results logged to /var/lib/gems/1.9.1/gems/nokogiri-1.5.5/ext/nokogiri
/gem_make.out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:26:01.847

尝试安装“libxslt-dev”和“libxml2-dev”包：

```
sudo apt-get install libxslt-dev libxml2-dev 
```

说明在[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)

* * *

更新：

你需要`sudo aptitude install ruby1.9.1-dev`.

资料来源：“ [Rails 教程：捆绑安装时的 nokogiri-1.5.2 错误](https://stackoverflow.com/questions/10466566/rails-tutorial-nokogiri-1-5-2-error-on-bundle-install/10466866#10466866)”。

# java - 读取 .txt 文件并更新 Java Bean 对象

> ID：13488133
> 
> 赞同：0
> 
> 时间：2012-11-21T07:15:09.287
> 
> 标签：java, string, file-io

我有以下 .txt 格式的文件

* * *

```
*XXX=017
*tag=016
*foci
String value
*XXX=018
*tag=024
*foci
*listname   
*XXX=018
*tag=024
*foci
String value
String value
String value 
```

* * *

在这里我们可以看到我们有一些预定义的标签，每个标签都有一些值与之相关联。

现在每个都`*XXX`标志着要更新的对象的开始。该对象将存储诸如 018、024、与 *foci 关联的字符串值或列表值之类的值。然后它会再次移动到 next `*XXX`。

我已经创建了 bean 对象并读取了文件。但是由于没有指定 *foci 标记后有多少行可用，因此很难正确地对对象进行分组。任何人都可以就如何区分每个对象或如何确定我们已经到达`*foci`标签数据的末尾或标签数据的末尾给出任何建议`*XXX`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:27:04.223

您可以使用 Java 属性而不是从 .txt 文件中读取。

```
1.*XXX=017
1.*tag=016
1.*foci
2.*XXX=018
2.*tag=024
2.*foci *listname 
```

数字可用于将输入集分组在一起，并且可以在从属性中获取属性时附加到键值中。

# c# - 服务器关闭连接而不发送任何数据

> ID：13488137
> 
> 赞同：1
> 
> 时间：2012-11-21T07:15:23.547
> 
> 标签：c#, asp.net, http, download

我刚开始编写 Web 服务器，我从这里下载了一个示例：http: [//www.codeproject.com/Articles/17071/Sample-HTTP-Server-Skeleton-in-C](http://www.codeproject.com/Articles/17071/Sample-HTTP-Server-Skeleton-in-C)

当我尝试打开（下载）除 htm 扩展之外的任何其他文件时，我的浏览器出现错误提示

> “错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭了连接，没有发送任何数据。”

我**无法调试**问题，因为程序本身并**没有崩溃**。我假设这与文件请求类型有关，但我不知道从哪里开始。

那么这里缺少什么，我该怎么办？

# simplexml - 保存格式化的xml

> ID：13488140
> 
> 赞同：1
> 
> 时间：2012-11-21T07:15:30.953
> 
> 标签：simplexml, domdocument, line-breaks, formatted

嗨，有人可以告诉我为什么这个 inst 保存到我的 XML 文件中吗？它不返回任何错误但也不写入文件？这可能很愚蠢，所以我提前道歉

```
<?php

$pastor    = $_POST["Speaker"];
$title     = $_POST["Title"];
$link      = $_POST["podcasturl"];
$download  = $_POST["Download"];
$podcastid = $_POST["Podcastid"];
$pubdate   = $_POST ["Date"];

$filename = 'podcast.xml';

$xml = simplexml_load_file($filename);
$xml->addChild('title');
$xml->addChild('pastor', $pastor);
$xml->addChild('title', $title);

function saveXMLFormatted($xml, $filename) {
    $savexml                     = new DOMDocument('1.0');
    $savexml->preserveWhiteSpace = FALSE;
    $savexml->loadXML($xml->asXML());
    $savexml->formatOutput = TRUE;
    file_put_contents($filename, $savexml->saveXML());
} 
```

# javascript - SetTimeout 无法正常工作

> ID：13488145
> 
> 赞同：1
> 
> 时间：2012-11-21T07:15:48.567
> 
> 标签：javascript

我认为单击按钮后5s会显示带有OK字符串的弹出窗口，但单击按钮后立即显示弹出窗口，为什么？

谢谢！

```
<html>
<head>
    <title>Wake up call</title>
    <script type="text/javascript">
        function wakeUpCall() { // Function is defined here
            setTimeout(aa("ok"), 5000);
        }

        function aa(bb) {
            alert(bb);
        }
    </script>
</head>
<body bgcolor="lightblue">
    <form>
        <input type="button"
            value="Wake me"
            onclick="wakeUpCall()">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:31:09.770

您正试图以错误的方式进行操作。

您必须使用回调`setTimeout`：

```
setTimeout(function()
{
    // actual code here
}, 5000); 
```

迈克在他的回答中提供了 - 您可以使用可评估的字符串：

```
setTimeout('/* actual code here */', 5000); 
```

但强烈建议不要这样做，请使用他的另一个示例 - 将回调函数作为引用传递并调用回调参数。但是，您必须记住，如果您使用回调参数，请参阅MDN文章的这一[部分。](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Callback_arguments)并非所有浏览器都支持回调参数。

就个人而言，我建议使用普通的旧回调，因为这就是 setTimeout 的使用方式。

仅供参考：

您的代码段不适合您的原因是，因为：

```
setTimeout(aa('ok'), 5000);
// aa('ok') here is executed, and returns its value, so, in the end, you pass the returned value of aa inside the Timeout.
// and, nor alert alert, nor your function have a "return" statement, so they both will  return always undefined.
// that translates to:

setTimeout(undefined, 5000); // and, that does nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:34:41.147

```
function wakeUpCall() { // Function is defined here
            setTimeout(function(){ alert("ok");}, 5000);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:18:38.643

如果你这样做怎么办：

```
<html>
<head>
    <title>Wake up call</title>
    <script type="text/javascript">
        function wakeUpCall() { // Function is defined here
            setTimeout('aa("ok");', 5000);
        }

        function aa(bb) {
            alert(bb);
        }
    </script>
</head>
<body bgcolor="lightblue">
    <form>
        <input type="button"
            value="Wake me"
            onclick="wakeUpCall()">
    </form>
</body>
</html> 
```

请注意，我在 setTimeout 函数中引用了要执行的语句。如果这些引用让您感到困惑，我认为这是一个很好的资源来看看：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

另一种方法，我刚刚从上面的资源中了解到，是这样的：

```
function wakeUpCall() { // Function is defined here
    setTimeout(aa, 5000, "Your tekst here");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T07:20:03.140

### 为此使用匿名函数。

```
<html>
<head>
    <title>Wake up call</title>
    <script type="text/javascript">
        function wakeUpCall() { // Function is defined here
            setTimeout(function(){aa("ok");}, 5000);
        }

        function aa(bb) {
            alert(bb);
        }
    </script>
</head>
<body bgcolor="lightblue">
    <form>
        <input type="button"
            value="Wake me"
            onclick="wakeUpCall()">
    </form>
</body>
</html> 
```

# javascript - jQuery的骨架是如何工作的？

> ID：13488154
> 
> 赞同：2
> 
> 时间：2012-11-21T07:16:21.183
> 
> 标签：javascript, jquery

我用 JavaScript 编程已经有几年了，但我从来没有理解不同的技术在 JavaScript 中是如何工作的，只是*它**有效*..

现在，在正确学习了原型和构造函数的工作原理之后，我在着手为自己的网站制作自己的（不可公开访问的）插件之前，先看看 jQuery 来学习一些东西。

问题只是我不明白它是如何工作的。这是一个几乎可以工作的示例：http: [//jsfiddle.net/3zWvR/1/](http://jsfiddle.net/3zWvR/1/)

```
(function() {
    test = function(selector) {
        return new test.prototype.init(selector);
    }
    test.prototype = {
        init: function(selector) {
            alert("init ran");
            if (!arguments[0]) {
                return this;
            }
        }
    }
 // As I understand the jQuery code, the next line should really be
 // test.prototype = {
    test.prototype.init.prototype = {
        send: function() {
            alert("send ran");
        }
    }

    window.ob = test;
})()

ob().send();​ 
```

我在那里评论了一行，显示了我认为如果我像 jQuery 那样做的话，我认为真正应该存在的东西。但是我无法复制它，以便您也可以执行 ob.method() ...

jQuery“框架”或骨架是如何构建的，它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:40:19.840

嗯，你的问题很有趣，自从我开始看 jQuery 的源代码以来，我一直在想这个问题。如果您添加以下代码，您的代码应该可以按照您的意愿工作：

```
test.prototype.init.prototype = test.prototype;
test.send = test.prototype.send = function(){
  alert("send ran");
}; 
```

而不是这个：

```
test.prototype.init.prototype = {
  send: function() {
    alert("send ran");
  }
}; 
```

您可能会说“我已经知道了，您只是将方法添加`send()`到`test`对象和自身的原型中”，但是这样做，您正在做您想做的事： make that`ob`以及`ob()`使用创建的所有变量它，喜欢`var somevar = ob()`有方法`send()`。

如果你看一下 jQuery 源代码，他们使用方法`extend()`来扩展 jQuery 对象。查看一些`.extend()`调用，您会发现如果仅将一个方法/属性添加到`jQuery.fn`对象（即 的简写`prototype`），则该`jQuery`对象没有该方法/属性。如果您在控制台中输入，您可以看到这一点`jQuery.off`，它会返回`undefined`，但该方法`off`存在于`jQuery.fn`对象中（`jQuery.fn.off`在控制台中输入，您将看到它）。

如果你想`jQuery`，当你写一个插件时，你从做开始`jQuery.fn.plugin =`，所以你将你的插件添加到由创建的对象中`jQuery`，但是你的插件不能直接从`jQuery`.

可以将`jQuery`其视为也具有许多实用程序的构造函数。当您确实`$(selector)`拥有所有方法`jQuery.fn`但不是所有对象时返回的`jQuery`对象，只有他们添加到`jQuery.fn`.

# java - 加密html文件的文件夹并在解密后使用java应用程序中的文件

> ID：13488155
> 
> 赞同：3
> 
> 时间：2012-11-21T07:16:21.060
> 
> 标签：java, file, encryption, encryption-symmetric

> **可能重复：**
> [为客户端加密 html 文件并在 Swing 应用程序中浏览它们](https://stackoverflow.com/questions/13487103/encrypt-the-html-files-for-client-side-and-browse-them-in-a-swing-application)

我正在开发一个swing应用程序，其中客户端必须访问本地存储在机器中的html文件，但我希望客户端不应该直接访问html文件，所以想使用java和Java应用程序加密html文件的整个文件夹我会编写硬代码来解密加密文件夹中的 html 文件。另外一件事应该可以在加密文件夹中进行更新，以便将来可以在客户端合并加密文件。

我被困在这里，对我的问题没有任何线索，对我的问题的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:23:27.740

**-**那么我会要求你使用`Cipher`，`CipherInputStream`并`CipherOutputStream`进行**加密**和**解密**。

**-**您可以遍历文件夹中的文件，然后对每个文件进行加密，同样您可以遍历文件夹中的文件进行解密。

**请参阅此链接：**

[http://www.flexiprovider.de/examples/ExampleCrypt.html](http://www.flexiprovider.de/examples/ExampleCrypt.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:25:13.980

阅读此链接：

*   将 AES 与 Java 技术结合使用（由于域是数字，因此无法正常使用链接）：`http://192.9.162.55/developer/technicalArticles/Security/AES/AES_v1.html`

默认情况下，您最多可以使用 AES 128 位。

[要使用 256 位 AES 密钥，您必须从此处](http://java.sun.com/javase/downloads/index.jsp)下载并安装“Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files” 。

这是一个简单的例子，它使用 AES 加密和解密 java 中的字符串消息：

```
 import java.security.*;
   import javax.crypto.*;
   import javax.crypto.spec.*;
   import java.io.*;

   /**
   * This program generates a AES key, retrieves its raw bytes, and
   * then reinstantiates a AES key from the key bytes.
   * The reinstantiated key is used to initialize a AES cipher for
   * encryption and decryption.
   */

   public class AES {

     /**
     * Turns array of bytes into string
     *
     * @param buf   Array of bytes to convert to hex string
     * @return  Generated hex string
     */
     public static String asHex (byte buf[]) {
      StringBuffer strbuf = new StringBuffer(buf.length * 2);
      int i;

      for (i = 0; i < buf.length; i++) {
       if (((int) buf[i] & 0xff) < 0x10)
        strbuf.append("0");

       strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
      }

      return strbuf.toString();
     }

     public static void main(String[] args) throws Exception {

       String message="This is just an example";

       // Get the KeyGenerator

       KeyGenerator kgen = KeyGenerator.getInstance("AES");
       kgen.init(128); // 192 and 256 bits may not be available

       // Generate the secret key specs.
       SecretKey skey = kgen.generateKey();
       byte[] raw = skey.getEncoded();

       SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");

       // Instantiate the cipher

       Cipher cipher = Cipher.getInstance("AES");

       cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

       byte[] encrypted =
         cipher.doFinal((args.length == 0 ?
          "This is just an example" : args[0]).getBytes());
       System.out.println("encrypted string: " + asHex(encrypted));

       cipher.init(Cipher.DECRYPT_MODE, skeySpec);
       byte[] original =
         cipher.doFinal(encrypted);
       String originalString = new String(original);
       System.out.println("Original string: " +
         originalString + " " + asHex(original));
     }
   } 
```

上面的代码必须以这样一种方式进行修改，即您将加密文件读入`StringBuffer`/byte 数组等​​，取消加密它们（仅在内存中）完成所需的工作，然后重新加密`StringBuffer`/data/bytes 并将其写入文件。

另一个很棒的 Cryptographic API 是：

*   [充气城堡](http://www.bouncycastle.org/)

Bouncy Castle API 也有很多示例：

*   [如何使用 Bouncy Castle API 和 NetBeans 或 Eclipse 在 CBC 模式下使用 AES 加密/解密 Java 文件](http://www.itcsolutions.eu/2011/08/24/how-to-encrypt-decrypt-files-in-java-with-aes-in-cbc-mode-using-bouncy-castle-api-and-netbeans-or-eclipse/)

# ajax - 不使用 RPC 的 GWT Ajax 调用

> ID：13488156
> 
> 赞同：0
> 
> 时间：2012-11-21T07:16:21.660
> 
> 标签：ajax, gwt, rpc

我有一个需要很长时间才能构建的客户端类，特别是 com.bradrydzewski.gwt.calendar.client.Calendar；

有没有办法可以将此类的构造传递给 ajax 调用，这样它就不会阻塞？

```
Calendar calendar = new Calendar(); 
```

我不能使用 RPC，因为这个日历是不可序列化的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:33:29.747

如果您能深入了解为什么需要很长时间，那将会很有帮助。

如果必须在客户端上进行的 DOM 操作花费了“长时间”，那么异步将无济于事。JavaScript 是单线程的，因此任何 CPU 绑定的任务都会在运行时将整个页面向下拖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:12:20.760

我会使用单独的**Transfer Object**类来存储日历的详细信息，然后将其传递到服务器端（RPC 或普通 Ajax，没关系）。

# javascript - VML 的“矩阵”属性在 IE8 中不起作用

> ID：13488165
> 
> 赞同：1
> 
> 时间：2012-11-21T07:17:25.370
> 
> 标签：javascript, css, internet-explorer-8, transformation, vml

我正在尝试在以下示例中添加“矩阵”属性来缩放 vml 形状。我添加矩阵属性的方式似乎存在一些错误。请帮忙。 **注意：该示例将在 IE8 中运行。**

```
<html xmlns:v="urn:schemas-microsoft-com:vml">
<head>
    <style>
        v\:*{ behavior: url(#default#VML) }
    </style>
</head>
<body>
    <DIV style="HEIGHT: 400px">
    <v:oval strokecolor="red" fillcolor="yellow" matrix="10,0,0,10,0,0" style="position:relative;top:50;left:50;width:75;height:50">
    </v:oval>
    </DIV>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:39:24.790

矩阵属性不能应用于椭圆。相反，您可以尝试将其应用于椭圆形内部的倾斜。

[这里](http://samples.msdn.microsoft.com/workshop/samples/vml/shape/skew/t_skew.htm)有一个例子可能会有所帮助。您可能需要打开兼容性视图。

# javascript - 在 chrome 和 firefox 中响应为空

> ID：13488166
> 
> 赞同：0
> 
> 时间：2012-11-21T07:17:36.010
> 
> 标签：javascript, xml, wcf-rest

我想使用 javascript 调用休息服务。我的代码是：

```
function CreateXMLHttpRequest() {
   if (typeof XMLHttpRequest != "undefined") {
      alert("1");
      return new XMLHttpRequest();
   }
   else if (typeof ActiveXObject != "undefined") {
      alert("2");
      return new ActiveXObject("Microsoft.XMLHTTP");
   }
   else {
      throw new Error("XMLHttpRequestnot supported");
   }
}

function CallWebService() {
   var objXMLHttpRequest = null;
   objXMLHttpRequest = CreateXMLHttpRequest();

   objXMLHttpRequest.open("POST", "http://localhost:2546/abc.svc/json/GetXml", true);
   objXMLHttpRequest.setRequestHeader("Content-Type", "application/xml;charset=UTF-16");
   var packet = '<CompanyRequest xmlns="http://schemas.datacontract.org/2004/07/abc.DomainModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><CompanyName>company</CompanyName></CompanyRequest>';

   objXMLHttpRequest.send(packet);
      alert(packet);
      var d =(objXMLHttpRequest.responseText);
      alert(d);           
   } 
```

它在 IE 中运行良好，但在 Firefox 和 chrome 中响应为空。我不明白出了什么问题。我一直在寻找这个3天。让我知道是否有任何错误。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:00:32.457

您正在进行异步调用。尝试使用回调。

```
function CreateXMLHttpRequest() {
     if (typeof XMLHttpRequest != "undefined") {
         return new XMLHttpRequest();
     } else if (typeof ActiveXObject != "undefined") {
         return new ActiveXObject("Microsoft.XMLHTTP");
     } else {
         throw new Error("XMLHttpRequestnot supported");
     }
 }
 function CallWebService() {
     var objXMLHttpRequest = CreateXMLHttpRequest();
     objXMLHttpRequest.open("POST", "http://localhost:2546/abc.svc/json/GetXml", true);
     objXMLHttpRequest.setRequestHeader("Content-Type", "text/xml");
     var packet = '<CompanyRequest xmlns="http://schemas.datacontract.org/2004/07/abc.DomainModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><CompanyName>company</CompanyName></CompanyRequest>';
     objXMLHttpRequest.onreadystatechange = function (){
         if (objXMLHttpRequest.readyState==4 && objXMLHttpRequest.status==200) {
             alert(objXMLHttpRequest.responseText);
         }
     }
     objXMLHttpRequest.send(packet);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:59:54.770

您正在执行异步请求。

尝试做一个同步请求，比如

```
 objXMLHttpRequest.open("POST", "http://localhost:2546/abc.svc/json/GetXml", false); 
```

或异步

```
objXMLHttpRequest.onreadystatechange = function () {
    if ( objXMLHttpRequest.readyState == 4 ) {
        alert(req.responseText);
    }
}; 
```

并将标题设置为：

尝试这个：

```
 objXMLHttpRequest.setRequestHeader("Content-Type", "text/xml");

 objXMLHttpRequest.setRequestHeader( "SOAPAction", "http://localhost:2546/abc.svc/json/GetXml" ); 
```

# javascript - 数组到对象单行

> ID：13488170
> 
> 赞同：1
> 
> 时间：2012-11-21T07:17:47.237
> 
> 标签：javascript, arrays, javascript-objects

有没有比这更简洁的方法将所有数组索引和值移动到一个对象：

```
arr = ["one","two","three"];
var rv = {};
for (var i = 0; i < arr.length; i++)
    rv[i] = arr[i]; 
```

我知道您可以遍历数组并一个一个地添加到一个新对象中，但是我*讨厌*在我想在两者之间切换时向我的代码添加一个循环，特别是在 SO 上提供答案时（请注意，这意味着制作一个功能已失效，因为这会使答案膨胀）。

PS：我不介意您的回答是否令人不悦或滥用语言功能，无论如何，JShackery 让我着迷。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:20:30.743

> 是否有一种简洁的方法将所有数组索引和值作为键值对移动到对象？

他们*已经是*。JavaScript 中的数组只是对象，具有以数组索引命名的属性。在经典的计算机科学意义上，它们[根本不是真正的数组。](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)

所以你很可能会发现你大部分时间都不需要这样做。（你的用例会很有趣。）但是当你这样做时，不，没有特别的捷径。无论你做什么，它都会成为一个循环，无论它是你代码中的一个循环，它是公开的，还是隐藏在下面的东西。您执行此操作的代码似乎与其他代码一样好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:20:47.213

这是一种骇人听闻的方式：

```
myArray.__proto__ = Object.prototype 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:29:49.890

如前所述，数组也是对象：`typeof [] === 'object'`

但无论如何，试试这个：

```
function objectify(arr) {
    return arr.reduce({}, function (p, e, i) {
        p[i] = e;
        return p;
    });
} 
```

It's not really cleaner than yours, but it avoids declaring `i`. For a faster function, move the anonymous function outside of objectify so it doesn't get recreated every time.

# android - 如何将应用程序前面的图标添加到列表中

> ID：13488171
> 
> 赞同：-1
> 
> 时间：2012-11-21T07:17:47.467
> 
> 标签：android, list

我正在尝试列出用户安装的应用程序及其图标。到目前为止，我设法让用户安装了应用程序，但我无法将它与应用程序名称和图标一起放在列表中。

例如列表的行:: {icon} test_application

**活动**

```
ArrayList<String> listing = null;
listing = new ArrayList<String>(); 
```

> ```
> ArrayList<Object> icons = new ArrayList<Object>(); 
> ```

```
CharSequence c = null;
int count = 0;
Drawable icon = null;

super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView i = (TextView) findViewById(R.id.textView1);

    PackageManager pm = getPackageManager();
    List<ApplicationInfo> packages = pm
            .getInstalledApplications(PackageManager.GET_META_DATA);

    for (ApplicationInfo applicationInfo : packages) {
        if ((applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1) {

            count = count + 1;
            try {
                c = pm.getApplicationLabel(pm.getApplicationInfo(
                        applicationInfo.processName,
                        PackageManager.GET_META_DATA));
                icon = pm.getApplicationIcon(applicationInfo.packageName);

            } catch (NameNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            listing.add(c.toString()); 
```

> ```
>  icons.add(icon) 
> ```

```
 }
    }

    ListView list = (ListView) findViewById(R.id.listView1);
    list.setAdapter(new ArrayAdapter<String>(this, R.layout.text, R.id.textView1, listing));
    String Counting = String.valueOf(count);
    i.setText(Counting);
} 
```

}

**xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        tools:context=".MainActivity" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >

    </ListView>

</RelativeLayout> 
```

**行 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/imageView1"
        />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_toRightOf="@+id/textView1"
        android:text="TextView" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:47:12.350

[此](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)链接具有使用文本和图像创建列表的示例代码。

您还需要将图标存储在另一个数据结构中（可能是另一个数组列表）。然后，您必须创建自己的适配器来创建需要视图。查看[此](https://stackoverflow.com/questions/8166497/custom-adaptor-for-list-view)帖子以获取示例代码..

以下是您需要遵循的步骤：

1）创建一个类，如下所示：

```
class MyAppInfo{
public String  appName;
public Drawable icon;
} 
```

2）现在更改数组列表以获取此对象，如下所示：

```
ArrayList<MyAppInfo> listing = null;
listing = new ArrayList<MyAppInfo>(); 
```

3) 现在在您的循环中创建 MyAppInfo 对象并将应用程序的名称和图标存储在该对象中，并将该对象添加到 arraylist 中，如下所示。

```
 PackageManager pm = getPackageManager();
    List<ApplicationInfo> packages = pm
            .getInstalledApplications(PackageManager.GET_META_DATA);
    MyAppInfo tempObj;

    for (ApplicationInfo applicationInfo : packages) {
        if ((applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1) {
                tempObj = new MyAppInfo();

            count = count + 1;
            try {
                c = pm.getApplicationLabel(pm.getApplicationInfo(
                        applicationInfo.processName,
                        PackageManager.GET_META_DATA));
                icon = pm.getApplicationIcon(applicationInfo.packageName);

                 tempObj.appName = c.toString();
                 tempObj.icon= icon;

            } catch (NameNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            listing.add(tempObj);

        }
    } 
```

4）现在创建您自己的适配器并在获取视图中使用此列表来创建`ImageView`图标和`TextView`应用程序名称......

# c - 如何使 Visual C++ 解决方案在开始构建另一个项目时不删除一个项目

> ID：13488173
> 
> 赞同：0
> 
> 时间：2012-11-21T07:17:52.920
> 
> 标签：c, visual-studio-2010, visual-studio, visual-c++

我在解决方案、库和可执行文件中有两个项目。

首先我构建库，但是当我开始构建另一个项目时，它会清理库，即使库文件位于不同的文件夹中并且无论如何都不应该与它冲突。

怎么说不通过构建我的可执行文件来删除库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:11:05.237

如果您的可执行文件依赖于您的库，则在清理或重新生成可执行文件时将自动清理该库。如果只生成可执行文件（不重新生成），它将不会被清理，它只会编译自上次构建以来的修改。

如果您的可执行文件不依赖于您的库，则不应清理该库。如果确实如此，您可以尝试通过右键单击解决方案资源管理器中的项目来构建可执行文件。

# titanium - Titanium Mobile - PhotoGallery - 成功回调 - 事件属性 - media.file 返回 null

> ID：13488176
> 
> 赞同：0
> 
> 时间：2012-11-21T07:18:05.783
> 
> 标签：titanium, titanium-mobile, appcelerator-mobile

Titanium SDK：2.1.1，主机操作系统：Mac OS X 10.6.8，移动平台：iOS 5

我无法访问 Titanium.Media.openPhotoGallery 的成功回调返回的“Blob”对象的某些属性。无法访问的属性是“file”和“nativePath”，但是我可以访问“height”、“width”和“mimeType”等属性。我在模拟器上测试。

这是我到目前为止编码的内容。

```
Titanium.Media.openPhotoGallery({
    success : function(event) {

        var image = event.media;

        if (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {

            // following properties are accessible
            Ti.API.info(' event.media = ' + event.media );
            Ti.API.info('event.media.height = ' + event.media.height );
            Ti.API.info('event.media.width = ' + event.media.width );
            Ti.API.info('event.mediaType = ' + event.mediaType );

            // following properties are un-accessible
            Ti.API.info(' event.media.nativePath = ' + event.media.nativePath );
            Ti.API.info(' event.media.file = '  + event.media.getFile() );              
    },
    cancel : function() {},
    error : function(error) {},
    allowEditing : true,
    mediaTypes : [Ti.Media.MEDIA_TYPE_PHOTO]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:52:44.190

您无法从 iphone 照片库访问文件或文件本机路径。它无法访问。尽管您可以将所选图像存储在文件系统或 sqlite db 上，然后在其上执行所有任务...:)

# perl - 获取电话号码的基础（池）（Perl）

> ID：13488179
> 
> 赞同：2
> 
> 时间：2012-11-21T07:18:27.090
> 
> 标签：perl

我在数据库中有很多数字。例如，

```
448-48-00 #(from 00 to 99, 100 numbers)
336-87-00 #(same as above)
449-20-00 #(from 000 to 999, 1000 numbers) 
```

我需要得到这些数字的基数。对于此示例，我需要获取 44848、33687 和 4492。

我有这段代码，但我不知道如何完成它:)

```
#!/usr/bin/perl

use v5.10;
use warnings;

my @p = 4484900..4484999;
push @p, $_ for 3368700..3368799;

my $data;

do {
    my $z = 1;
    while($z++ <= length $_) {
        $data->{substr $_, 0, $z}++;
    }
} for @p;

foreach my $key (sort { $data->{$a} <=> $data->{$b} } (keys %$data)) {
    say $key if $data->{$key} > 99;
} 
```

我需要获取最长的元素并删除包含它的最长代码的短元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:26:26.423

```
#!/usr/bin/env perl -l

use strict; use warnings;

my $prefix = "1234";

foreach (<DATA>) {
    print $prefix . $1 . $2 if m/^(\d{3})-(\d{1,2})/;
}

__DATA__
448-48-## (00-99)
336-87-## (-||-)
449-2#-## (0-9, 00-99) 
```

**输出**

```
123444848
123433687
12344492 
```

如果您只想要更高的价值：

```
#!/usr/bin/env perl -l

my @arr;
my $prefix = "1234";
my $higher_prefix = 0;

foreach (<DATA>) {
    my $cur = $1 . $2 if m/^(\d{3})-(\d{1,2})/;
    $higher_prefix = $prefix . $cur if $cur > $higher_prefix;
}

print $higher_prefix;

__DATA__
448-48-## (00-99)
336-87-## (-||-)
449-2#-## (0-9, 00-99) 
```

**输出**

```
123444848 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:08:41.547

我试图了解您在代码中所做的事情并对其进行改进以做您想做的事情。免责声明：这不是那么简单，例如，算法无法看到您不想分组`44848..`并且`4492...`要分组，`44.....`而是要分组`4492...`而不是`44924..`等等。但也许这已经可以帮助你了。

I think the important part is the "smart filter" which for example looks at `336` and `3368` and deletes the count of `336` if it isn't higher than the other (`336` marks a trivial super set of `3368`). Important here is the string-sort together with the `state` variable `$last`:

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature qw(say state);
use List::Util 'shuffle';

# shuffled phone numbers (don't make it too easy)
my @numbers = shuffle (
    4484800 .. 4484899,
    3368700 .. 3368799,
    4492000 .. 4492999
);

my %count = ();

# import phone numbers
foreach my $number (@numbers) {

    # work on all substrings from the beginning
    for (my $pos = 1; $pos <= length $number; $pos++) {
        my $prefix = substr $number, 0, $pos;
        $count{$prefix}++; # increase the number of equal prefixes
    }
}

# smart filter
foreach my $prefix (sort {$a cmp $b} keys %count) {
    state $last //= 'nothing';

    # delete trivial super sets
    if ($prefix =~ /^\Q$last/ and $count{$last} == $count{$prefix}) {
        delete $count{$last};
    }

    # delete trivial sets
    if ($count{$prefix} == 1) {
        delete $count{$prefix};
        next;
    }

    # remember the last prefix
    $last = $prefix;
}

# output
say "$_ ($count{$_})" for sort {
    $count{$b} <=> $count{$a} or $a cmp $b
} keys %count; 
```

The output is absolutely right but not yet what you want:

```
44 (1100)
4492 (1000)
33687 (100)
44848 (100)
44920 (100)
44921 (100)
44922 (100)
44923 (100)
44924 (100)
44925 (100)
44926 (100)
44927 (100)
44928 (100)
44929 (100)
336870 (10)
(large list of 10-groups) 
```

So if you want to get rid of the 10-groups, you could change

```
# delete trivial sets
if ($count{$prefix} == 1) {
    delete $count{$prefix};
    next;
} 
```

to

```
# delete trivial sets
if ($count{$prefix} <= 10) {
    delete $count{$prefix};
    next;
} 
```

Output:

```
44 (1100)
4492 (1000)
33687 (100)
44848 (100)
44920 (100)
44921 (100)
44922 (100)
44923 (100)
44924 (100)
44925 (100)
44926 (100)
44927 (100)
44928 (100)
44929 (100) 
```

This looks very good. Now it's up to you what to do with the `4492`-100-groups and the `44`-1100-group. If you want to delete the 100-groups depending on their length, that could also delete the `4492` group in favor of the large `44` group.

# restlet - 从 Restlet 注释生成 REST API 文档

> ID：13488180
> 
> 赞同：2
> 
> 时间：2012-11-21T07:18:31.943
> 
> 标签：restlet, restlet-2.0

RESTful Web 服务 API 是使用 Restlet 实现的。我需要为这些生成 API 文档。我不是从单独的文档开始，而是评估是否可以从源代码注释本身生成。

我看着大摇大摆的口气。Swagger 似乎基于 JAX-RS 规范。Enunciate 看起来更有希望，因为有一个常见问题解答提到如何为非 JAX-RS 实现生成，但没有任何帮助。

1.  是否有任何工具（或者如果社区使用过任何工具）从 Restlet 注释生成 API 文档？

2.  有没有人将 Restlet 与 enunciate 集成以生成文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-15T07:55:39.280

Restlet 现在支持在运行时基于您的应用程序生成相应的 Swagger 和 RAML 内容的能力。

以下文档可以帮助您：

*   对于 Swagger（扩展`org.restlet.ext.swagger`）：请参阅[http://restlet.com/technical-resources/restlet-framework/guide/2.3/extensions/swagger](http://restlet.com/technical-resources/restlet-framework/guide/2.3/extensions/swagger)
*   对于 RAML（扩展名`org.restlet.ext.raml`）：请参阅[http://restlet.com/technical-resources/restlet-framework/guide/2.3/extensions/raml](http://restlet.com/technical-resources/restlet-framework/guide/2.3/extensions/raml)

然后，您可以利用工具社区中的工具来生成您的 API 文档。您可以考虑 Swagger UI，它是一个很好的工具，可以在线显示 API 提供的内容并与之交互。

希望它可以帮助你，蒂埃里

# c++ - 具有线程本地存储的自定义内存管理器

> ID：13488183
> 
> 赞同：6
> 
> 时间：2012-11-21T07:18:40.333
> 
> 标签：c++, c

我们的程序中有一个自定义的内存管理器，我们所有的 malloc/free 调用都由内存管理器管理，但是在程序的初始，getpwuid() 将被调用，并且在某些客户的机器上激活了 nss_ldap 它会调用来自 libc 的 malloc 不是来自我们的内存管理器，这会导致我们的内存管理器出现错误，来自 gdb 的堆栈报告是：

```
Breakpoint 2, 0x0000003df8cc6eb0 in brk () from /lib64/libc.so.6
0  0x0000003df8cc6eb0 in brk () from /lib64/libc.so.6
1  0x0000003df8cc6f72 in sbrk () from /lib64/libc.so.6
2  0x0000003df8c73d29 in __default_morecore () from /lib64/libc.so.6
3  0x0000003df8c70090 in _int_malloc () from /lib64/libc.so.6
4  0x0000003df8c70c9d in malloc () from /lib64/libc.so.6
5  0x0000003df880fc65 in __tls_get_addr () from /lib64/ld-linux-x86-64.so.2
6  0x00002aaaae302a7c in _nss_ldap_inc_depth () from /lib64/libnss_ldap.so.2
7  0x00002aaaae2f91a4 in _nss_ldap_enter () from /lib64/libnss_ldap.so.2
8  0x00002aaaae2f942c in _nss_ldap_getbyname () from /lib64/libnss_ldap.so.2
9  0x00002aaaae2f9aa9 in _nss_ldap_getpwuid_r () from /lib64/libnss_ldap.so.2
10 0x0000003df8c947c5 in getpwuid_r@@GLIBC_2.2.5 () from /lib64/libc.so.6
11 0x0000003df8c9412f in getpwuid () from /lib64/libc.so.6
12 0x0000000001414be3 in lc_username () 
```

我跟踪了_nss_ldap_inc_depth()的代码，似乎__tls_get_addr()被调用了，因为使用了线程本地存储，我尝试将内存管理器更改为共享库，但__tls_get_addr()仍然从libc调用malloc ，我怎样才能让它调用我们的内存管理器而不是 libc 的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:32:48.793

您可以使用`LD_PRELOAD`在任何其他库（包括 glibc）之前加载您的库，它将被链接，例如：

```
$ LD_PRELOAD=/path/to/library/libmymalloc.so /bin/myprog 
```

[这里](http://www.jayconrod.com/cgi/view_post.py?23)有一个教程展示了它是如何工作的，它甚至有一个示例插入`malloc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:48:36.950

您可以更改内存管理器以使用`mmap`instread of `brk`.

一个进程中只能有一个用户`brk`。因此，如果您还没有替换所有调用`malloc`和相关函数（`calloc`以及`strdup`更多），则不能使用`brk`.

`mmap`但是，没有这样的问题。您的内存管理器可以使用`mmap`，并且`malloc`仍然可以并行工作。

# android - Canvas.concat() 和 Canvas.setMatrix() 之间的区别？

> ID：13488187
> 
> 赞同：0
> 
> 时间：2012-11-21T07:19:13.197
> 
> 标签：android, matrix, android-canvas

about中的文件`Canvas.setMatrix()`说：

> 用指定的矩阵完全替换当前矩阵。如果矩阵参数为空，则当前矩阵重置为单位。

关于`Canvas.concat()`说：

> 将当前矩阵与指定矩阵预连接。

但看起来很奇怪。当我尝试这段代码时：

```
Matrix matrix = new Matrix();
mCamera = new Camera();
canvas.save();

mCamera.rotateY(y_rotate_angle);
mCamera.getMatrix(matrix);
canvas.concat(matrix);
canvas.drawText(text, 30, 100, redPaint);

//      canvas.restore();
canvas.setMatrix(null);
canvas.setMatrix(matrix);
canvas.drawText(text, 30, 100, greenPaint); 
```

结果，第二个文本将在 (60,100)处绘制，**而不是**在 (30,100) 处绘制（即使我尝试`canvas.restore()`并发表评论`canvas.setMatrix`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:04:42.987

很奇怪！我在保存之前得到了画布矩阵，然后打印它的成员。我猜它是`IDENTITY`矩阵，但事实并非如此！所以当我这样做时`setMatrix(null)`，画布的矩阵是由一个不等于原始矩阵的矩阵设置的画布矩阵，这引起了问题。

# android - 如何从 SQLite 中的特定列中删除特定数据？

> ID：13488189
> 
> 赞同：0
> 
> 时间：2012-11-21T07:19:18.823
> 
> 标签：android, sqlite

我的应用程序有一个 sqlite 表，其中包含以下列：

*   CONTACT_ID = "_id",
*   CONTACT_NAME = "con_name",
*   CONTACT_USERID = "con_userid",
*   CONTACT_ACCID = "con_accid"。

该列的内容`con_accid`是类型`String`。表的主键是`id`。我想删除特定的数据`con_accid`。例如，我想删除所有具有`con_accid`as的项目的项目名称`"raja"`。我尝试了以下不同的查询，但都不起作用：

```
Cursor cursor = database.query(ContactsDB.TABLE_CONTACTS, allColumns,
            ContactsDB.CONTACT_ACCID + "= ' " + comment +"'"  , null, null, null, null); 
    if (cursor != null) {
       cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Log.i(TAG, "delete");
            ContactsInfo _comment = cursorToComment(cursor);
            long id = _comment.getId();
            database.delete(ContactsDB.TABLE_CONTACTS, ContactsDB.CONTACT_ID + "=" + id  , null);
            cursor.moveToNext();
        }
    } 
```

和这个：

```
String query = "SELECT * FROM todo WHERE con_accid='" + comment;
Cursor  cursor = database.rawQuery(query,null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:48:08.877

这应该删除数据库中的所有行`con_accid = raja`：

```
database.delete(TABLE_CONTACTS, CONTACT_ACCID + " = ?", new String[] {"raja"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:01:15.487

检查“数据库”实例是用 .getWritableDatabase() 创建的。您的查询应该可以正常工作。

# java - 在 RAD 上为 WebSphere 6 重新包装耳朵

> ID：13488191
> 
> 赞同：0
> 
> 时间：2012-11-21T07:19:26.997
> 
> 标签：java, jar, websphere, ear

我有一个 Web 应用程序，并且我更新了其中一个 jars（对其进行了数字签名）。当我用新的 jar 替换旧的 jar 并重新启动服务器时，应用程序感觉不到变化。我也尝试过清除缓存。我想我需要再次重新打包整个耳朵，然后重新部署它，对吗？如果是的话，请告诉我通过 RAD（Rational Application Developer）这样做的步骤。我有旧耳朵和新罐子可用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:37:13.440

停止服务器——删除项目——启动服务器——添加项目——发布

# objective-c - 属性callbachHandler需要定义方法callbackhandler——使用@synthesize,@dynamic或者提供方法实现

> ID：13488193
> 
> 赞同：0
> 
> 时间：2012-11-21T07:19:30.743
> 
> 标签：objective-c, xcode, ios5

![代码部分的图像](../Images/8a95cbd0fc5fb4b84752f764316aa9d0.png)[点击这里查看图片](https://i.stack.imgur.com/sxo1o.png)

请检查此图像。当我们尝试运行项目时，由于此警告而发生异常。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:28:21.063

你必须在**iOS 版本 < 6 中合成它。** 实现后添加这一行

```
@synthesize callbackHandler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:29:23.357

您使用的 Xcode 版本比编写此代码的版本更旧。升级，或者按照它说的去做并编写一个综合语句。

# php - 等待离开页面，直到 ajax 完成

> ID：13488195
> 
> 赞同：0
> 
> 时间：2012-11-21T07:19:33.540
> 
> 标签：php, javascript, jquery, ajax

基本上，我在`$.POST()`单击元素时发送一个。此元素将用户带到不同的页面，并且 POST 请求不会一直通过。但是，如果我慢慢地通过它，脚本就会运行。

如何让页面等到脚本运行直到它离开页面？还是这里有不同的问题？对 AJAX 有点陌生

```
$('.ad-link').on('click', function() {
    $.get('http://easyuniv.com/php/clickPP.php?id='+$(this).attr('id'));
}); 
```

然后 clickPP.php 只是一个简单的 SQL 查询，我已经验证它可以工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:24:52.730

您可以为此使用回调，如下所示：

```
$('.ad-link').on('click', function(e) {
    e.preventDefault();
    var url_to_redirect = $(this).attr('href');
    $.get(
        'http://easyuniv.com/php/clickPP.php?id='+$(this).attr('id'),
        {},
        function(return_data){  // callback function, wait till request is finished
            // use the return_data if you need it
            location.href = url_to_redirect; // redirect the user
        }
    );
}); 
```

# php - 删除数组中的冗余数据

> ID：13488196
> 
> 赞同：1
> 
> 时间：2012-11-21T07:19:35.267
> 
> 标签：php, arrays

我有一个问题，我在下面有这个结果，我想删除相同的时间戳。

样本结果：

```
Array
(
[0] => [1341100800000, 0]
[1] => [1341100800000,85]
[2] => [1343779200000,54]
[3] => [1343779200000, 0]
) 
```

期望输出

```
Array
(
[0] => [1341100800000,85]
[1] => [1343779200000,54]
) 
```

我正在考虑使用 explode 然后 substr 函数来获取值。这是我到目前为止提出的..

```
$explode = array();
    foreach($string_format as $key => $value) {
        $explode[] = explode(',', substr($value, 1));
        if((isset($explode[0]) && $explode[0][0] == $explode[1][0])) {
            unset($explode[0]);
        }
        //print_r($explode);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:34:00.670

脚本：

```
foreach($string_format as $key => $value) {
    $explode = explode(',', $value);
    $unique[$explode[0]] = $value;
} 
```

输入：

```
$string_format = array('0' => '1341100800000, 0',
'1' => '1341100800000,85',
'2' => '1343779200000,54',
'3' => '1343779200000, 0'); 
```

输出：

```
$unique =
Array
(
    [1341100800000] => 1341100800000,85
    [1343779200000] => 1343779200000, 0
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:45:54.227

这不是很好地使用[http://us2.php.net/manual/en/function.array-unique.php](http://us2.php.net/manual/en/function.array-unique.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:34:27.353

这应该可以正常工作:)

```
 $explode = array();
    $timestmp = array();

   foreach($string_format as $key => $value) {
        $explode[$key] = explode(',', substr($value, 1));

        if( in_array( $explode[$key][0], $timestmp)) {
            unset ($explode[$key]);
        } else {
             $timestmp[]= $explode[$key][0];
        }
    } 
```

# jquery - 我们如何防止 MVC3 中的提交按钮操作？

> ID：13488205
> 
> 赞同：0
> 
> 时间：2012-11-21T07:20:30.080
> 
> 标签：jquery, razor, jquery-events, asp.net-mvc-3-areas

我在 mvc34 razor 视图中遇到了提交按钮的问题。我在 jQuery 中动态添加了一行到 webgrid，其中包含一个提交按钮，用于在 db 中插入行数据。如果弹出空，我想验证行的文本框发出警报并停止操作。当我试图这样写

```
$('#btnInsert').click(function()
{
 if ($('#tbStudentName').val() == '') {
               alert('Please enetre!');
                           return false;
            } 
}); 
```

这个事件在 jQuery 中根本没有触发。**我们可以像上面那样在jQuery中调用动态创建的提交按钮客户端点击事件吗？** 我是这样写的

```
function InsertClick(button) {
        if ($('#tbStudentName').val() == '') {
           alert('Please enetre!');
                       return false;
        }        
    } 
```

但控制器端 FormAction 方法仍在触发。谁能告诉我防止服务器端动作的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:28:20.303

您可以通过将事件绑定到表单本身来做到这一点。

```
$("form").submit(function(e) { e.PreventDefault(); return false; } 
```

当然，您可以添加一些 if 语句以仅在某些情况下防止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:46:08.883

或者，您可以使用输入类型按钮，默认情况下不是表单提交的原因，如果验证成功，则通过

```
$(this).parents("form").submit(); 
```

这是示例：

```
<script type="text/javascript">
    $(function () {
        $(".go").click(function () {
            var wrong = true; //fake data
            if (wrong) {
                alert("your value is wrong");
            } else {
                $(this).parents("form").submit();
            }
        });
    });
</script>

@using(Html.BeginForm())
{

    @Html.TextBoxFor(x=>x.CompanyName)
    @Html.ValidationMessageFor(x=>x.CompanyName)
    <br/>

    <input type="button" value="go" class="go" />
} 
```

**更新**

如果要动态添加按钮，则应使用 jquery[实时](http://api.jquery.com/live/)事件`Attach an event handler for all elements which match the current selector, now and in the future.`

这是示例：

```
<script type="text/javascript">
    $(function () {
        $(".go").live("click", function () {
            var wrong = true; //fake data
            if (wrong) {
                alert("your value is wrong");
            } else {
                $(this).parents("form").submit();
            }
        });

        $(".add").click(function () {
            $("form:first").append("<input type='button' value='go' class='go' />");
        });

    });
</script>

@using(Html.BeginForm())
{

    @Html.TextBoxFor(x=>x.CompanyName)
    @Html.ValidationMessageFor(x=>x.CompanyName)
    <br/>

}

<a class="add" href="#">add button dinamically</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:59:05.190

我找到了这样的解决方案

```
<input type="submit" value="Insert" onclick="return Validate(this);" />

function Validate(button){
if($('#tbemail').val()==''){
    alert('Can't be blank!');
    return 1==3;
}

} 
```

# html - 仅在 IE9 中的 CSS 问题

> ID：13488213
> 
> 赞同：0
> 
> 时间：2012-11-21T07:21:03.093
> 
> 标签：html, css, internet-explorer-9

我正在使用基于弹簧的应用程序，其中所有图像都是从单独的图像服务器加载的。我有一个跨应用程序使用的通用 css 文件。最初它的文档类型为 MATHML，我也尝试了其他文档类型。但是 css 不仅适用于具有 IE9 标准的 IE9 浏览器模式，而且适用于具有 IE8 文档标准的 IE9 浏览器模式。Firefox、chrome、IE8 也是如此。任何人都可以建议我使其在 IE9 中工作的解决方案。

我试过使用

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

但它仍然没有工作。

# asp.net - 在 IE 中打开网络文档显示空白页

> ID：13488214
> 
> 赞同：1
> 
> 时间：2012-11-21T07:21:09.937
> 
> 标签：asp.net, internet-explorer

**在 IE9 上可以使用 - 但我们的大多数员工都没有使用最新版本。**

我们有一个文档库页面，它指向网络文件夹中的各种文件。
每个人都可以访问此文件夹，并且他们不必使用登录凭据。

单击文件的链接时，它会打开一个新网页，其中将显示该文件。
不幸的是，在 IE 低于 9 的情况下，网页仍然是空白的，并且没有多少修补（我已经尝试过）让我们可以访问。

链接是这样的：`file://intranet/documentation/Sedation%20protocol.doc`

这是非常紧急的；任何帮助将不胜感激。

**编辑：**
我们已将此共享文件夹移动到新服务器（从 win server 2003 到 win serer 2008），这是问题开始的时候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:05:57.327

找到了这个问题的“解决方案”：

转到控制面板上的 Internet 属性，然后`Security`单击选项卡。

在`Local intranet`选项卡上，单击`Sites`。
在那里，取消选中“自动检测 Intranet 网络”并勾选剩余的 3 个框。

![在此处输入图像描述](../Images/bee8e20a308e32587547ed5d24041bdb.png)

从那里，单击`Trusted sites`并取消勾选`Enable Protected Mode`

![在此处输入图像描述](../Images/ce5d7a5fabc2b8f6c3b076f31ee25fd1.png)

那应该解决它。

**编辑：**似乎*某些*IE 仍然有问题，所以：
打开 IIS7，并创建一个链接到物理文件夹的新虚拟文件夹。之后，在虚拟文件夹上启用目录浏览。

从那里，它只是链接到虚拟文件夹中的文档。

# flash-cs5 - 没有声卡时如何让AS3中的影片剪辑/按钮工作

> ID：13488215
> 
> 赞同：1
> 
> 时间：2012-11-21T07:21:09.427
> 
> 标签：flash-cs5

我正在使用 AS3 开发我的 Flash 游戏。我从来没有在没有声卡系统的情况下测试过这个游戏。客户回复说如果系统中没有声卡，则游戏的电影剪辑和按钮都不起作用。这意味着游戏完全被禁用，但如果我在系统中有声卡就没有问题。如果系统中没有声卡，如何使所有功能（电影剪辑、按钮）工作。

提前感谢纳亚克

# sql - 在 SQL 查询的换行中添加回车的标准方法是什么？

> ID：13488218
> 
> 赞同：4
> 
> 时间：2012-11-21T07:21:33.187
> 
> 标签：sql, syntax, linefeed

在原始 SQL 查询中添加换行符的标准语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:45:49.913

在查询中将回车符或换行符插入字符串文字的标准方法是简单地将其逐字包含在字符串文字中。SQL 字符串中没有转义字符；唯一不能包含在字符串中的字符是单引号 ( `'`) 字符，可以通过将其加倍来进行转义。

例如，要插入包含换行符的行：

```
INSERT INTO table VALUES ('this is a string
with a newline'); 
```

如果您想控制是否插入回车、换行或机器人，您需要确保它们中的一个或两个出现在文字源中。

一些实现实现了 C 风格的转义序列；在这些实现中，您可以编写`'\n'`, `'\r'`,`'\r\n'`来添加换行符、回车符或 CRLF。但是，这种语法是非标准的，因此不能移植到所有数据库。

# ios - 半圆形滑块

> ID：13488222
> 
> 赞同：-1
> 
> 时间：2012-11-21T07:22:05.170
> 
> 标签：ios, uislider

我需要实现一个半圆形 UISlider 控件。我用谷歌搜索了很多，但找不到任何解决方案。即使我尝试改造 UISlider 但未能成功。请帮我 。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:18:52.470

好像你用谷歌搜索错了:) [http://www.cocoacontrols.com/platforms/ios/controls/uicircularslider](http://www.cocoacontrols.com/platforms/ios/controls/uicircularslider)。您可以看到他正在做什么来创建圆形滑块，并创建自己的半圆形滑块。祝你好运！

# spring-security - 退出时从浏览器中删除 Cookie（Spring Security 3.1）？

> ID：13488223
> 
> 赞同：2
> 
> 时间：2012-11-21T07:22:07.173
> 
> 标签：spring-security, session-cookies, spring-3

我正在使用 Spring Security 3.1 来处理登录身份验证、会话超时和最大会话数。

此外，我仅在注销时删除 cookie。

```
<logout delete-cookies="JSESSIONID" logout-success-url='logout page' /> 
```

此外，我已将最大会话数设置为 1 以进行测试。当我在浏览器中打开我的网页时，它会将 jsession id 存储在 cookie 中，但是当我退出并重新打开浏览器时问题就开始了。此时我在浏览器中找不到任何 cookie，它们被删除，这就是为什么我没有被重定向到欢迎页面（登录后的页面）。

但是当我再次登录时，它会显示我正在打印的错误消息：-超出会话数。

这可能意味着会话在服务器端仍然有效，但它会从客户端的 cookie 中删除，因此我既看不到欢迎页面，也无法在登录页面上登录。

我还需要做什么才能使 cookie 保留在浏览器中直到会话超时？我已将会话超时设置为 10 天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:58:43.740

这是正常行为。JSESSIONID cookie 仅在浏览器会话的生命周期内有效，因此在您关闭浏览器时消失。这不是你可以改变的。

浏览器对会话的感知与服务器上会话的生命周期之间没有联系。除非您实际注销，否则服务器会话仍然存在，直到超时并被服务器删除（在您的情况下为 10 天）。在此之前，尝试再次登录将超过允许的会话数。

如果你想保持登录状态 10 天，你可能想看看使用 remember-me cookie 而不是标准的 servlet 容器会话。

除非您明确要求限制用户可以拥有的并发会话数，否则我会避免使用它，因为它只会给您带来问题。您实际上并没有为此显示您的配置，但实际上只有两个选项。用户可以再次登录并且前一个会话将被标记为已过期，或者尝试第二次登录将导致错误，直到前一个会话超时，或者用户注销以显式使其无效。该行为由`error-if-maximum-exceeded` [命名空间属性](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt)控制。

# javascript - 使用 javascript/jquery 从 Google Maps API 的动态列表中填充数组

> ID：13488224
> 
> 赞同：0
> 
> 时间：2012-11-21T07:22:07.327
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个获取地点列表的搜索应用程序。这些位置和名称将位于属性标记中，例如

```
<div data-location="22.4245,-15.000" data-id="place_name_1">Place Name 1</div>
<div data-location="23.4435,-13.000" data-id="place_name_2">Place Name 2</div>
<div data-location="27.42755,-13.000" data-id="place_name_3">Place Name 3</div> 
```

我正在使用这些信息来获取谷歌地图中的标记。我正在查看他们的[文档](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)，我想知道如何将这些信息放入 javascript 中的数组中？如果您查看链接，则有一个像这样的数组：

```
var beaches = [ 
  ['Bondi Beach', -33.890542, 151.274856, 4], 
  ['Coogee Beach', -33.923036, 151.259052, 5], 
  ['Cronulla Beach', -34.028249, 151.157507, 3], 
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2], 
  ['Maroubra Beach', -33.950198, 151.259302, 1] 
]; 
```

我需要做什么才能将数据从 html 获取到 javascript 中的数组？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:40:09.527

尝试这个：

```
var $beaches = [];

$.find("div").each(function(){

     var $loc = [];

    $loc.push($(this).html());
    $loc.push($(this).attr("data-location"));
    $loc.push($(this).attr("data-id"));
    $loc.push(2);

    $beaches.push($loc);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:30:02.390

使用 jQuery，您可以解析 HTML：

```
var beaches = [];

// iterate over all <div>s (assuming they're always in that format)
$('div').each(function (index, div) {

    // break apart the comma-separated coordinates in the data-location attribute
    var coords = $(div).data('location').split(',');

    // add this location to the beaches array (with z-index 0)
    beaches.push([$(div).text(), coords[0], coords[1], 0]);

}); 
```

一些应用程序可能会将坐标编码为经度、纬度。如果是这种情况，您将需要交换 的位置`coords`，即：`beaches.push([$(div).text(), coords[1], coords[0], 0]);`。

请记住，该数组非常特定于`setMarkers()`您所指的示例（实际上是函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:26:59.337

```
var beaches = [];    
$('div[data-location][data-id]').each(function() {
    beaches.push([
        [$(this).attr('data-id')]
            .concat(
                $(this).attr('data-location').split(","),
                [2]
            )
    ]);
}); 
```

# ruby-on-rails - rails paypal notify validate 日语

> ID：13488227
> 
> 赞同：8
> 
> 时间：2012-11-21T07:22:19.460
> 
> 标签：ruby-on-rails, post, encoding, paypal

当我收到来自 Paypal 的通知时，我会将其发送回 Paypal 以确保它来自 Paypal。代码运行良好，我没有问题：

```
# payment_notifications_controller.rb # notification_validation, line 90
response = RestClient.post(PAYPAL_CONFIG["url_validate"], params.merge({"cmd" => "_notify-validate"}), :content_type => "application/x-www-form-urlencoded") 
```

问题是当用户有一个日本名字时。收到的通知（来自 Paypal）如下：

```
Parameters: {"last_name"=>"\x8F\xBC\x8C\xB4", "payment_cycle"=>"Daily", "next_payment_date".... 
```

当我尝试将其发送回 Paypal（以确保它来自 Paypal）时，出现此错误：

```
ArgumentError (invalid byte sequence in UTF-8):
 app/controllers/payment_notifications_controller.rb:90::in `notification_validation' 
```

就像 RestClient 不喜欢 "\x8F\xBC\x8C\xB4" 一样。我尝试添加：content_type =>“shift_jis”和“utf-8”，但我总是有这个错误。

如果我这样做：

```
params[:last_name] = params[:last_name].encode("UTF-8", "Shift_JIS")
# now params[:last_name] is 松原 
```

然后我的 RestClient.post 被发送到 Paypal，但 Paypal 返回错误（INVALID）可能是因为 Paypal 正在等待获取“\x8F\xBC\x8C\xB4”而不是“松原”。

您知道我该如何解决吗？

编辑：我也在[贝宝论坛上发帖](https://www.x.com/developers/paypal/forums/instant-payment-notifications-ipn-payment-data-transfer-pdt/notify-validate-params-japanese)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T00:31:41.773

所以我想我有解决办法。

在卖家的 paypal 帐户中转到：个人资料 > 我的销售工具 > PayPal 按钮语言编码 > 更多选项

> 使用以下下拉菜单选择您网站上使用的编码。
> 
> 编码：Shift_JIS
> 
> 您想对从 PayPal 发送给您的数据（例如，IPN、可下载日志、电子邮件）使用相同的编码吗？
> 
> 否，使用：UTF-8

现在我可以得到“验证”。

# c# - 使用 c# 在 asp.net 中发送邮件失败

> ID：13488228
> 
> 赞同：0
> 
> 时间：2012-11-21T07:22:23.070
> 
> 标签：c#, asp.net, sendmail

> **可能重复：**
> [通过 Gmail 在 .NET 中发送电子邮件](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)

此邮件代码在本地主机中工作，即在我的计算机上，但是当我将它上传到服务器上时它不起作用。错误是：发送邮件失败。请告诉我问题出在哪里。

```
 if (Session["userinfo"] != null)
     {

         lblTest.Text = Session["userinfo"].ToString();
         MailMessage msg = new MailMessage();
         msg.From = new MailAddress("shop.bcharya@gmail.com");
         msg.To.Add(new MailAddress("bcc@dr.com"));
         msg.To.Add(new MailAddress("info@yzentech.com"));
         msg.Subject = "Mail from BcharyaCorporation.online shopping site";
         msg.Body = ""+lblTest.Text+"  wants to buy some products. please contact with him/her";
         SmtpClient sc = new SmtpClient();
         sc.Host = "smtp.gmail.com";
         // sc.Port = 25;
         sc.Credentials = new NetworkCredential("shop.bcharya@gmail.com", "mypassword");
         sc.EnableSsl = true;
         try
         {
             sc.Send(msg);
             lblPayment.Text = "Sorry. Currently we are out of online payment service. We will contact you for payment process. Thank you for buying this product.";

         }
         catch (Exception ex)
         {
             lblPayment.Text=ex.Message.ToString();
             Response.Write(ex.Message);
         }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:31:47.877

对于 gmail 邮件设置也添加端口号

```
sc.Port = 587; 
```

在这条线之后

```
sc.Host = "smtp.gmail.com"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:35:46.473

如果 SMTP 服务器支持（例如 GMail 和 Hotmail），则仅使用端口 587 和 SSL。有些服务器只使用端口 25 而没有 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:55:44.170

您可以使用下面给定的代码发送电子邮件。这里通过电子邮件发送错误详细信息是一种方法。试试这个代码来发送电子邮件。

```
using System.Web.Mail
public static bool SendErrorEmail(string to, string cc, string bcc, string subject,    string body, MailPriority priority, bool isHtml)
{
 try
{
using (SmtpClient smtpClient = new SmtpClient())
{
using (MailMessage message = new MailMessage())
 {
 MailAddress fromAddress = new MailAddress(“yourmail@domain.com”, “Your name”);
 // You can specify the host name or ipaddress of your server
 smtpClient.Host = “mail.yourdomain.com”; //you can specify mail server IP address here
 //Default port is 25
 smtpClient.Port = 25;
 NetworkCredential info = new NetworkCredential(“yourmail@domain.com”, “your password”);
 smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
 smtpClient.UseDefaultCredentials = false;
 smtpClient.Credentials = info;
 //From address will be given as a MailAddress Object
 message.From = from;
 message.Priority = priority;
 // To address collection of MailAddress
 message.To.Add(to);
 message.Subject = subject;
 // CC and BCC optional
 if (cc.Length > 0)
 {
 message.CC.Add(cc);
 }
 if (bcc.Length > 0)
 {
 message.Bcc.Add(bcc);
 }
 //Body can be Html or text format;Specify true if it is html message
 message.IsBodyHtml = isHtml;
 // Message body content
 message.Body = body;
 // Send SMTP mail
 smtpClient.Send(message);
 }
 }
 return true;
 }
 catch (Exception ee)
 {
 Logger.LogError(ee, “Error while sending email to ” + toAddress);
 throw;
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:59:49.123

使用以下方法，然后检查：

SmtpClient sc = new SmtpClient(string); //使用指定的 SMTP 服务器发送电子邮件

# java - 在Android中解析xml后显示地图上的所有Geopoints

> ID：13488229
> 
> 赞同：2
> 
> 时间：2012-11-21T07:22:28.920
> 
> 标签：java, android, google-maps

我已经从我的 php 中解析了 xml 代码（通过 XML DOM 方法），其中包含 POI 列表的纬度、经度。我想使用来自单独类的引脚显示所有点。问题是当我打开应用程序时我不想要列表视图，它应该打开地图并显示所有标记。有人可以帮我吗？提前致谢。

代码

```
import java.util.ArrayList;
import java.util.HashMap;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ParseXMLaroundme extends ListActivity{
 String latitude;
    public  ParseXMLaroundme () {
        // TODO Auto-generated constructor stub

        @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
          setContentView(R.layout.aroundme);

            ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

            String xml = ParseXMLMethods.getXML();
            Document doc = ParseXMLMethods.XMLfromString(xml);

            /*
            int numResults = ParseXMLMethods.numResults(doc);

            if((numResults <= 0)){
                Toast.makeText(ParseXMLDemo.this, "There is no data in the xml file", Toast.LENGTH_LONG).show();  
                finish();
            }
            */

            NodeList children = doc.getElementsByTagName("ListingElement");

            for (int i = 0; i < children.getLength(); i++) {                            
                HashMap<String, String> map = new HashMap<String, String>();    
                Element e = (Element)children.item(i);
                map.put("ItemID", ParseXMLMethods.getValue(e, "ItemID"));
                map.put("ImageURL", ParseXMLMethods.getValue(e, "ImageURL"));
                map.put("VideoURL", ParseXMLMethods.getValue(e, "VideoURL"));
                map.put("AudioURL", ParseXMLMethods.getValue(e, "AudioURL"));
                map.put("StartDate", ParseXMLMethods.getValue(e, "StartDate"));
                map.put("EndDate", ParseXMLMethods.getValue(e, "EndDate"));
                map.put("ItemName", ParseXMLMethods.getValue(e, "ItemName"));
                map.put("Address", ParseXMLMethods.getValue(e, "Address"));
                map.put("Suburb", ParseXMLMethods.getValue(e, "Suburb"));
                map.put("Postcode", ParseXMLMethods.getValue(e, "Postcode"));
                map.put("Longitude", ParseXMLMethods.getValue(e, "Longitude"));
                map.put("Latitude", ParseXMLMethods.getValue(e, "Latitude"));
                map.put("SubtypeName", ParseXMLMethods.getValue(e, "Subtypename"));
                map.put("Cost", ParseXMLMethods.getValue(e, "Cost"));
                map.put("Details", ParseXMLMethods.getValue(e, "Details"));
                map.put("Website", ParseXMLMethods.getValue(e, "Website"));
                map.put("MajorRegionName", ParseXMLMethods.getValue(e, "MajorRegionName"));
                map.put("Phone", ParseXMLMethods.getValue(e, "Phone"));
                map.put("Email", ParseXMLMethods.getValue(e, "Email"));
                map.put("OpeningHours", ParseXMLMethods.getValue(e, "OpeningHours"));
                String targetlatitude=map.get("latitude");
                String targetlongitude=map.get("longitude");

                Double targetlat = Double.valueOf(targetlatitude);
                Double targetlng = Double.valueOf(targetlongitude);
                mylist.add(map);            
            }       

        /*

           ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.me_layout, 
                           new String[] { "Latitude", "Longitude", "VideoURL", "StartDate", "EndDate", "ItemName" }, 
                          new int[] { });

           setListAdapter(adapter);

            */

            final ListView lv = getListView();

            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                    Toast.makeText(ParseXMLaroundme.this,o.get("NewsBody"), Toast.LENGTH_LONG).show(); 
                }
            });

        }
    } 
```

# categories - magento：产品没有出现在前端：没有代码

> ID：13488233
> 
> 赞同：0
> 
> 时间：2012-11-21T07:22:36.420
> 
> 标签：categories, product, magento

我仍然是学习 Magento 的新手。我只遵循了一个教程，但它不起作用。我添加了一个新产品并将其与所有类别相关联，就像测试一样。一旦他单击子类别，本教程将显示产品的图像，但我没有。

它给了我这个错误：

> 在此服务器上未找到请求的 URL /magento/sample-sub-cat-1-tutorials/sample-sub-category-2.html。

怎么了？我在管理面板中做所有事情而没有编码作为开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:56:54.220

那是您的网络服务器软件返回的错误页面，而不是 Magento 处理的 404 页面。尝试在您的 url 字符串之前添加 index.php 即`site.com/index.php/magento/sample-sub-cat-1-tutorials/sample-sub-category-2.html`；如果可行，您需要检查服务器重写（系统 > 配置 > Web > 搜索引擎优化）或检查您的 Web 服务器软件是否可以进行重写。

# java - 如何使用 Liferay 和 Maven 高效地编写 portlet？

> ID：13488237
> 
> 赞同：5
> 
> 时间：2012-11-21T07:22:57.490
> 
> 标签：java, maven, liferay

我可以轻松地创建一个用于编程 portlet 的 Maven 项目（例如使用原型）。但是为了将这个项目部署到 Liferay，我必须运行：

`mvn package liferay:deploy`

即使我只更改一个简单的 JSP 文件，我也必须重新部署整个 portlet 应用程序。有没有办法加快这个开发过程？

我不想使用 Ant，因为那样我将不得不处理依赖项和其他东西。我真的很想使用 Maven 来开发 Liferay portlet 应用程序。

我尝试了 JRebel，但由于打包到 WAR 文件，它的魔法不起作用:(

要重新创建这种情况：

1.  使用 artifactId 从 maven 原型创建项目：liferay-portlet-archetype
2.  向 pom.xml 添加属性：liferay.version、liferay.auto.deploy.dir
3.  启动 Liferay
4.  mvn package liferay:deploy -> 这将创建一个 WAR 文件并将其部署到 liferay 自动部署目录。
5.  每次你想改变一些东西，你必须做 mvn package liferay:deploy

这比 hello world 更耗时。

据我所知，这应该是最好的做法。但是 Liferay 文档在这个主题上很少见。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:55:18.783

使用 STS（SpringSource Tool Suite）和 Liferay IDE 的组合解决了问题。使用这种组合，根本不需要使用 Liferay Maven 插件。只需简单地添加 Liferay 服务器，在该服务器上部署 Maven 应用程序即可。

恕我直言，将这种组合与 JRebel 结合使用是最有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:24:29.653

您的应用程序可以打包在 WAR 中以供 JRebel 工作，这没有问题。您是否将 rebel.xml 配置文件放入 WAR 中？

# asp.net - 如何通过 VB.Net 使用 Asp.Net 在 SQL Server 2008R2 中保存和检索图像

> ID：13488239
> 
> 赞同：2
> 
> 时间：2012-11-21T07:23:01.733
> 
> 标签：asp.net, sql-server, vb.net

我有一个 FileUpload`fileupload2`控件和一个图像框控件`image1`。现在我想保存浏览图像并在浏览路径时将其显示在图像框上。我正在编写如下代码。

该代码有什么问题以及我在浏览路径时如何在图像框中显示它？

```
Protected Sub btnsave_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnsave.Click
    Connection()

    Dim cmd As New SqlCommand
    cmd.Connection = cn
    cmd.CommandText = "INSERT INTO Personal_info (image_id,pic)VALUES (@image_id,@pic)"

    cmd.Parameters.Add("@image_id", SqlDbType.VarChar, 200)
    cmd.Parameters.Add("@pic", SqlDbType.Image, 200)

    cmd.Parameters("@image_id").Value = txtid.Text
    cmd.Parameters("@pic").Value = FileUpload2.FileBytes

    Dim i = -1

    i = cmd.ExecuteNonQuery

    If i = -1 Then
        lblMessage.ForeColor = Drawing.Color.Red
        lblMessage.Text = "Fail to Save"
        'MsgBox("Fail", MsgBoxStyle.OkOnly, "Error")
    Else
        lblMessage.ForeColor = Drawing.Color.Green
        lblMessage.Text = "Success to Save"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T08:10:26.903

要在图像框中显示图像，您需要提供图像路径或 url。您不能直接从数据库中读取它。

一种方法是

1.  从数据库中检索图像
2.  将图像保存在服务器中
3.  将图像框传递给图像服务器路径

    ```
    '1\. retrieve the imange from the database
    Dim cmd As New SqlCommand
    cmd.Connection = cn
    cmd.CommandText = "SELECT pic FROM Personal_info  WHERE image_id=@image_id;"

    cmd.Parameters.Add("@image_id", image_id)

    Dim rd As SqlDataReader = cmd.ExecuteReader
    Dim MyData() As Byte
    If rd.Read Then
        If rd("pic").ToString <> Nothing Then
            MyData = rd("pic")
        End If

    End If

    '2\. save the image in the server
    Dim oFileStream As New System.IO.FileStream(System.AppDomain.CurrentDomain.BaseDirectory & "image\image.jpg", System.IO.FileMode.Create, IO.FileAccess.ReadWrite)
    oFileStream.Write(MyData, 0, MyData.Length)
    oFileStream.Close()

    '3\. pass the image box the image server path
    image1.ImageUrl = "~/image/image.jpg" 
    ```

# android - 获取 Android 中 MediaPlayer 的 SeekBar 位置

> ID：13488242
> 
> 赞同：0
> 
> 时间：2012-11-21T07:23:27.793
> 
> 标签：android, android-mediaplayer

在我的 Android 应用程序中，我正在使用默认的 MediaPlayed 使用意图播放所需的视频。它的代码如下

```
 File sdcard = Environment.getExternalStorageDirectory();
    File file=new File(sdcard,"big-buck-bunny.m4v");        
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(file), "video/*");
    startActivity(intent); 
```

但现在我想在播放视频的 SeekBar 位置。请给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:48:38.860

像这样的东西应该可以工作，你必须适应你的需要：

```
mp.getDuration();
seekBar.setMax(mp.getDuration());
public void startPlayProgressUpdater() {

    seekBar.setProgress(mp.getCurrentPosition());

    if (mp.isPlaying()) {

        Runnable notification = new Runnable() {

            public void run() {

                startPlayProgressUpdater();
                textViewSongTime1.setText(("Total: ")
                        + (getTimeString(mp.getDuration())));
                textViewSongTime2.setText(("Remaining: ")
                        + (getTimeString(mp.getDuration()
                                - mp.getCurrentPosition())));
            }

        };

        handler.postDelayed(notification, 300);

    } else {

        mp.pause();

        seekBar.setProgress(0);

    }

} 
```

# javascript - 使用变量+字符串获取一个变量的值来调用它

> ID：13488244
> 
> 赞同：0
> 
> 时间：2012-11-21T07:23:35.820
> 
> 标签：javascript

我有一个重置游戏片段的脚本，但我无法让变量调用另一个变量来获取最终值。

以下是包含原始位置的变量，我需要在我的函数中使用这些值：

```
red_1_x = $('#red_1').css('left');
red_1_y = $('#red_1').css('top'); 
```

这是我调用动画函数的函数：

```
$('.piece').mouseover(function(e) {
    var id = $(this).attr('id');
    resetGroundShoe(id);
}); 
```

$(this).attr('id') 例如：**red_1**

这是动画功能：

```
function resetPiece(id){
    if(!id){
        alert('no id');
    }
    else{
        x = id+'_x';
        y = id+'_y';
        gotoX = x;
        gotoY = y;
        $('#'+id).animate({left: x}, 250, function(){
            $('#'+id).animate({left: y}, 250);
        });
    }
} 
```

由于某种原因， **gotoX**和**gotoY**不是**red_1_x**和**red_1_y的数值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:25:48.063

假设这些是全局变量，您可以使用`window[x]`并使用存储在/`window[y]`中的名称访问全局变量。`x``y`

然而，使用全局变量是一种非常糟糕的风格，听起来你应该将这些值作为参数传递！

# c# - 日期时间转换异常

> ID：13488245
> 
> 赞同：0
> 
> 时间：2012-11-21T07:23:44.267
> 
> 标签：c#, datetime

这是代码

```
String date = "1980/1/1"; 
DateTime dateTime = DateTime.ParseExact(date, "yyyy/MM/DD", null);
// I have also tried 
// DateTime dateTime = DateTime.ParseExact(date, "yyyy/MM/DD", CultureInfo.InvariantCulture); 
```

这是例外

> 字符串未被识别为有效的日期时间。

**更新**

使用以下代码得到相同的错误

```
 DateTime dateTime = DateTime.ParseExact(date, "yyyy/M/D", null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:25:15.150

使用单`M`和单`d`

```
DateTime dateTime = DateTime.ParseExact(date, "yyyy/M/d", null); 
```

Single`M`会处理 month `01`, `1`to `12`, 同样 Single`d`会处理 day from `1`to `31`, 包括`01`to 。`09`

您可能会看到：[自定义日期和时间格式字符串 - MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:24:54.537

仅使用`yyyy/M/D`. 它抛出了一个异常，因为它期望`yyyy/01/01`月和日有两位数。

```
DateTime dateTime = DateTime.ParseExact(date, "yyyy/M/d", null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:48:55.177

试试这个（经过测试）

```
String date = "1980/1/1";
DateTime dateTime = DateTime.ParseExact(date, "yyyy'/'M'/'d",null); 
```

字符斜线在单引号之间。

# haxe - 在 Haxe 中使用数组作为参数

> ID：13488247
> 
> 赞同：1
> 
> 时间：2012-11-21T07:23:54.017
> 
> 标签：haxe

我有一个将数组作为参数的函数，它不断返回以下错误消息：

```
Test.hx:34: characters 23-24 : Array<Int> should be { length : Void -> Int }
Test.hx:34: characters 23-24 : Invalid type for field length :
Test.hx:34: characters 23-24 : Int should be Void -> Int
Test.hx:34: characters 23-24 : For function argument 'array' 
```

这是产生错误消息的代码：

```
class Test{
    static function main() {
        var a = new Array();
        a  = [1,2,3,4];
        enlarge1DArray(a); //why won't it work when I try to invoke this function?
    }

    static function enlarge1DArray(array){
        var i = 0;
        while(i < array.length()){
            i++;
            trace("i is " + i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T07:54:44.437

`length`您尝试访问的是属性，而不是方法。请参阅[数组 API 文档](https://api.haxe.org/Array.html#length)。

`while`从此更改行：

```
while(i < array.length()) 
```

对此：

```
while(i < array.length) 
```

**详细答案：**

您遇到的错误是由于 Haxe 在猜测类型时感到困惑。基本上，因为您将长度视为一种方法，所以假设`array`参数中的参数`enlarge1DArray`必须是某种对象，该对象具有称为长度的方法，类型签名为“Void->Int”。

简而言之，因为您要的是一种方法，所以它期望参数“array”具有：

```
{ length : Void -> Int } 
```

当一个数组实际上有：

```
{ length : Int } 
```

所以编译器很困惑，说你打错了。[您可以在类型推断](http://haxe.org/ref/type_infer)的 Haxe wiki 页面上阅读更多相关信息。以后你可以明确说明每个函数参数的类型，然后 Haxe 会给你更多有用的错误信息。

# c++ - C++中常量数据的内存存储

> ID：13488248
> 
> 赞同：-1
> 
> 时间：2012-11-21T07:24:00.223
> 
> 标签：c++, constants, local-variables

如 C++ Complete Reference 中所述，常量数据存储在 ROM 中。但是局部变量存储在堆栈中，堆栈位于 RAM 中。那么如果我们声明局部常量数据，它存储在哪里呢？内存还是只读存储器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T07:43:52.093

唯一真正可能的答案是“***它取决于***”。

C++ 是硬件之上的一层抽象，它生成的代码可能由其他软件（如操作系统）“*托管”。*

它使用硬件的方式取决于硬件本身是什么、工作原理和管理，以及编译器设计者打算如何使用所有这些好东西。

常量和变量之间的区别在于，变量（由语言设计者）被设计为可以修改并保留其值，而常量被设计为永远不会被修改。

C++ 关于常量的唯一说法是试图修改它们会导致“未定义的行为”：即“语言设计者对可能（或不会）发生的事情只字未提”。

编译器设计师做他们可以与他们工作的平台兼容的事情。一些常量存储在真实的 ROM 中（想想微控制器），一些在 RAM 中“写访问被拒绝”（因此，如果您尝试修改它们，则会生成硬件陷阱：会发生什么取决于操作系统：通常陷阱是翻译成该语言可能支持或不支持的操作系统异常）一些只是在不存在这种“设施”的RAM中，还有一些甚至在机器代码指令本身内部。

无论如何，除非您自己对硬件进行编程，否则您不会关心这些细节。并且说“常量可以放入 ROM”可能是真的（如果平台允许的话），但“常量存储在 ROM 中”只是一个简单的谎言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:29:47.820

术语“ROM”通常是为物理上无法写入的硬件保留的。常量仍然放置在物理上的“RAM”中（否则，您的程序怎么可能加载？）

从技术上讲，在规范中写入几乎没有保护......如果你这样做只是[未定义的行为。](http://en.wikipedia.org/wiki/Undefined_behavior)

至于东西存放在哪里，目前的架构有一些典型的做法。但是编译器可以自由地做出自己的决定。看这个，例如：

[字符串文字：它们去哪儿了？](https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:33:43.757

运行时存储在堆栈上的本地常量数据。静态本地和全局数据通常在编译时存储在只读段中。然而，编译器可以进行一些优化，甚至将局部常量存储在只读段中。

# python - subplot matplotlib 语法错误

> ID：13488249
> 
> 赞同：0
> 
> 时间：2012-11-21T07:24:02.200
> 
> 标签：python, matplotlib, plot, outofrangeexception, subplot

我正在使用 matplotlib 在循环中绘制子图。例如，我想对 49 个数据集进行细分，并且从文档中，我以这种方式实现了它；

```
import numpy as np
import matplotlib.pyplot as plt

X1=list(range(0,10000,1))
X1 = [ x/float(10) for x in X1 ]
nb_mix = 2

parameters = []

for i in range(49):

    param = []

    Y = [0] * len(X1)

    for j in range(nb_mix):

        mean = 5* (1 + (np.random.rand() * 2 - 1 ) * 0.5 )
        var = 10* (1 + np.random.rand() * 2 - 1 )
        scale = 5* ( 1 + (np.random.rand() * 2 - 1) * 0.5 )

        Y = [ Y[k] + scale * np.exp(-((X1[k] - mean)/float(var))**2) for k in range(len(X1)) ] 
        param = param + [[mean, var, scale]]

    ax = plt.subplot(7, 7, i + 1)
    ax.plot(X1, Y)

    parameters = parameters + [param]

ax.show() 
```

但是，从 i=0 开始，我的索引超出范围错误。

我在哪里可以做得更好才能让它发挥作用？

- 这是我得到的错误

```
Traceback (most recent call last):
  File "F:\WORK\SOLVEUR\ALGOCODE\PYTHON_\DataSets\DataSets_DONLP2_gaussians.py", line 167, in <module>
    ax = plt.subplot(7, 7, i + 1)
  File "C:\Python27\lib\site-packages\matplotlib\pyplot.py", line 766, in subplot
    a = fig.add_subplot(*args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\figure.py", line 777, in add_subplot
    a = subplot_class_factory(projection_class)(self, *args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 8364, in __init__
    self._subplotspec = GridSpec(rows, cols)[int(num)-1]
  File "C:\Python27\lib\site-packages\matplotlib\gridspec.py", line 175, in __getitem__
    raise IndexError("index out of range")
IndexError: index out of range 
```

谢谢

# vba - 从 Excel 中的联系人列表中按电子邮件 ID 获取姓名

> ID：13488251
> 
> 赞同：2
> 
> 时间：2012-11-21T07:24:08.413
> 
> 标签：vba, excel, outlook

我在 Excel 表中有一个电子邮件 ID 列表，我想使用 VBA 脚本从 Outlook 联系人列表中获取他们的姓名。我在网上搜索但没有找到适合我的东西？

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:11:26.693

以下**作品**。**下面的代码获取与“abc@xyz.com”**对应的名称 您可以使用数组并进行比较我认为。不确定是否有更好的方法。

```
Public Sub getName()
  Dim contact As Object
  Dim AL As Object
    Dim outApp As Object
    Set outApp = CreateObject("Outlook.Application")
    'Logon
    outApp.Session.Logon

    'Get contact from Outlook
    Set AL = outApp.Session.GetDefaultFolder(10)
        For Each contact In AL.Items
            'iterate through each contact and compare
            If contact.Email1Address = "abc@xyz.com" Then
                Debug.Print (contact.FullName)
            End If
        Next contact
    outApp.Session.Logoff
    outApp.Quit

    'cleanup
    Set outApp = Nothing
    Set GAL = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T16:14:27.793

下面的代码会有帮助吗？
它适用于： `My Name <My.Name@MyCompany.co.uk>`, `My Name`,`MyName@Gmail.Com`

```
Sub Test()

    Dim rEmails As Range
    Dim rEmail As Range
    Dim oOL As Object

    Set oOL = CreateObject("Outlook.Application")
    Set rEmails = Sheet1.Range("A1:A3")

    For Each rEmail In rEmails
        rEmail.Offset(, 1) = ResolveDisplayNameToSMTP(rEmail.Value, oOL)
    Next rEmail

End Sub

' Author: Sue Mosher - updated by D.Bartrup-Cook to work in Excel late binding.
Public Function ResolveDisplayNameToSMTP(sFromName, OLApp As Object) As String

    Select Case Val(OLApp.Version)
        Case 11 'Outlook 2003

            Dim oSess As Object
            Dim oCon As Object
            Dim sKey As String
            Dim sRet As String

            Set oCon = OLApp.CreateItem(2) 'olContactItem

            Set oSess = OLApp.GetNameSpace("MAPI")
            oSess.Logon "", "", False, False
            oCon.Email1Address = sFromName
            sKey = "_" & Replace(Rnd * 100000 & Format(Now, "DDMMYYYYHmmss"), ".", "")
            oCon.FullName = sKey
            oCon.Save

            sRet = Trim(Replace(Replace(Replace(oCon.email1displayname, "(", ""), ")", ""), sKey, ""))
            oCon.Delete
            Set oCon = Nothing

            Set oCon = oSess.GetDefaultFolder(3).Items.Find("[Subject]=" & sKey) '3 = 'olFolderDeletedItems
            If Not oCon Is Nothing Then oCon.Delete

            ResolveDisplayNameToSMTP = sRet

        Case 14 'Outlook 2010

            Dim oRecip As Object 'Outlook.Recipient
            Dim oEU As Object 'Outlook.ExchangeUser
            Dim oEDL As Object 'Outlook.ExchangeDistributionList

            Set oRecip = OLApp.Session.CreateRecipient(sFromName)
            oRecip.Resolve
            If oRecip.Resolved Then
                Select Case oRecip.AddressEntry.AddressEntryUserType
                    Case 0, 5 'olExchangeUserAddressEntry & olExchangeRemoteUserAddressEntry
                        Set oEU = oRecip.AddressEntry.GetExchangeUser
                        If Not (oEU Is Nothing) Then
                            ResolveDisplayNameToSMTP = oEU.PrimarySmtpAddress
                        End If
                    Case 10, 30 'olOutlookContactAddressEntry & 'olSmtpAddressEntry
                            ResolveDisplayNameToSMTP = oRecip.AddressEntry.Address
                End Select
            Else
                ResolveDisplayNameToSMTP = sFromName
            End If
        Case Else
            'Name not resolved so return sFromName.
            ResolveDisplayNameToSMTP = sFromName
    End Select
End Function 
```

# ms-access - 在访问中分组和计数

> ID：13488254
> 
> 赞同：1
> 
> 时间：2012-11-21T07:24:30.703
> 
> 标签：ms-access, count, group-by

我有这个表可以访问，我正在尝试进行计数和分组，但出现错误。

![在此处输入图像描述](../Images/826653330e7ef79648d32186a76c6a33.png)

我要做的是按来源对 2008 年之前制造的具有 AC 的汽车数量进行分组。

我试过这个：

```
SELECT SOURCE_ID, COUNT (SOURCE_ID) AS VEHICLES_WITH_AC
FROM VEHICLE
WHERE VEH_AC = 'Y'
GROUP BY  SOURCE_ID, VEH_AC,  VEH_YEAR
HAVING VEH_YEAR <'2008'; 
```

但我得到：![在此处输入图像描述](../Images/f2906b820759d387201fcf1b57f06a0e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:17:09.100

```
SELECT SOURCE_ID, COUNT (*) AS VEHICLES_WITH_AC
FROM VEHICLE
WHERE VEH_AC = 'Y' AND VEH_YEAR < '2008'
GROUP BY  SOURCE_ID; 
```

1）您显然需要按 source_id 进行总计，而不需要其他任何内容，因此您无需按其他任何内容进行分组。

2）您对 VEH_YEAR 的条件应该放在 where 子句中，否则所有 veh_year 行将在聚合后被选中并丢弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:35:49.533

尝试删除`;`after`WHERE`子句。[参考](http://www.pcreview.co.uk/forums/level-clause-t1155773.html)

# mysql - ODBC Access2010 MySQL 连接错误

> ID：13488255
> 
> 赞同：0
> 
> 时间：2012-11-21T07:24:32.617
> 
> 标签：mysql, odbc, ms-access-2010

> **可能重复：**
> [Mysql 服务器不支持 4 字节编码的 utf8 字符](https://stackoverflow.com/questions/1890693/mysql-server-does-not-support-4-byte-encoded-utf8-characters)

我有一个 64 位操作系统、Microsoft Access 2010 和远程 MySQL 4.1.13（我有凭据）。我下载了 32 位 ODBC 连接器并安装了它。尝试插入数据时链接表后，出现以下错误：

```
Run-time error '3155':

ODBC- insert on a linked table 'sometable' failed.

[MySQL] [ODBC 5.2 (w) Driver] [mysqld-4.1.13-standard] Server does not support
4-byte encoded UTF8 characters. (#0) 
```

我不懂这啥意思？我真的很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:51:34.830

如果您安装了 32 位 Access 和 32 位 ODBC 驱动程序，请确保创建 32 位数据源。通过 Windows 系统配置的标准对话框只允许您在 64 位 Windows 上创建 64 位驱动程序

# python - 我是否还需要通过scrapy中的表单传递所有隐藏字段

> ID：13488266
> 
> 赞同：0
> 
> 时间：2012-11-21T07:25:36.257
> 
> 标签：python, forms, httpwebrequest, scrapy

我想知道，如果我需要在工作网站上进行一些搜索，那么我是否只需要传递表单上可见的那些变量或所有变量，甚至是一些隐藏字段，如

表格在这里 `http://www.example.com/search.php`

现在表单上有两个字段，例如 `searchTerm`和`area` ，并且有 5 个隐藏字段

表格提交 `http://www.example.com/submit.php` 现在我有这些疑问

1.  我是否需要使用带有表单页面 url 或帖子 url 的 scrapy 打开表单页面
2.  我是否也需要传递隐藏变量，否则它们会自动与表单一起发布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:09:08.097

如果您正在使用，`FormRequest.from_response()`则所有隐藏值都已自动预先填充。

但在大多数情况下，您还需要覆盖它们，这取决于网站的功能和行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:47:20.447

有时您可以不使用某些隐藏字段，有时则不能。

您无法知道服务器逻辑。这取决于网站如何处理每个表单字段。

# java - 如何在java中使用OCR识别来自不同表单字段的表单数据？

> ID：13488270
> 
> 赞同：1
> 
> 时间：2012-11-21T07:25:50.233
> 
> 标签：java, ocr, tesseract, icr, form-processing

![这是表格](../Images/ccc496c3559f3299097ad81136cbd334.png)

我有一个包含不同字段的表单图像，如姓名、号码、地址等。我想识别这些字段中的数据并将它们保存到数据库中。现在，我的 OCR 工作正常，但我不知道如何从图像中提取特定字段数据（名称、地址）以用于 OCR。只是我想知道如何识别输出文件中的字符来自名称字段或地址字段或任何其他字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:28:31.097

由于您知道不同字段将在表单的确切区域，因此您可以使用一些图像处理库裁剪图像并仅将特定区域发送到 OCR 引擎。

检查[这个 SO 问题](https://stackoverflow.com/questions/2386064/how-to-crop-to-the-image-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-19T07:57:47.003

您有两种解决方案来获取您想要的数据，要么使用@osiris 的解决方案，要么您必须添加一个文本挖掘层。第一个解决方案：您获取图像并将其切成碎片（包含所需数据的碎片）。例如，您通过根据字段位置（X 和 Y）裁剪原始图像，将图像切割成 2 部分，其中包含名称和包含地址的第二部分，为此您必须使用图像库来操作您的原始图像。第二种解决方案是使用文本挖掘层而不进行裁剪。在此解决方案中，您必须使用检测姓名和地址的模型（duckling.ai），您可以训练自己的模型，或者您甚至可以使用一些聊天机器人引擎，然后训练您的聊天机器人引擎将姓名和地址检测为实体（重铸.ai 或 rasa 例如）。

# .net - 如何始终重定向到主域？

> ID：13488272
> 
> 赞同：0
> 
> 时间：2012-11-21T07:25:57.720
> 
> 标签：.net, iis-6

我有多个域重定向到同一个网站。示例 www.abc.com 和 www.def.com 都重定向到 www.abc.com。我想要的是，即使用户在浏览器地址栏中键入 www.def.com，它也应该在浏览器栏中显示 www.abc.com。

我的网站在 .NET 中并托管在 IIS6 上。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:33:46.147

您将需要使用重写工具，例如 Ionics - [http://iirf.codeplex.com/](http://iirf.codeplex.com/)。

或者，您可以编写一些代码来检测域并使用正确的响应代码进行重定向，302 最适合 seo。

# java - Struts2 日期标签格式

> ID：13488274
> 
> 赞同：0
> 
> 时间：2012-11-21T07:26:01.980
> 
> 标签：java, struts2

我们如何使用 struts2 日期标签具有以下格式：

*   2010 年 12 月 1 日
*   2010 年 12 月 2 日
*   2010 年 12 月 3 日
*   2010 年 12 月 5 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:29:33.557

我刚刚检查了`s:date`struts2 uses的实现`java.util.SimpleDateFormat`，你可以在这里找到信息[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)，它显示了你可以使用的所有格式，它们都不符合你的要求。所以解决方案应该**使用您的格式将 Date 解析为 String**。

**这是 Struts2 日期实现**

```
if (date != null) {
            TextProvider tp = findProviderInStack();
            if (tp != null) {
                if (nice) {
                    msg = formatTime(tp, date);
                } else {
                    TimeZone tz = getTimeZone();
                    if (format == null) {
                        String globalFormat = null;

                        // if the format is not specified, fall back using the
                        // defined property DATETAG_PROPERTY
                        globalFormat = tp.getText(DATETAG_PROPERTY);

                        // if tp.getText can not find the property then the
                        // returned string is the same as input =
                        // DATETAG_PROPERTY
                        if (globalFormat != null
                                && !DATETAG_PROPERTY.equals(globalFormat)) {
                            SimpleDateFormat sdf = new SimpleDateFormat(globalFormat,
                                    ActionContext.getContext().getLocale());
                            sdf.setTimeZone(tz);
                            msg = sdf.format(date);
                        } else {
                            DateFormat df = DateFormat.getDateTimeInstance(
                                    DateFormat.MEDIUM, DateFormat.MEDIUM,
                                    ActionContext.getContext().getLocale());
                            df.setTimeZone(tz);
                            msg = df.format(date);
                        }
                    } else {
                        SimpleDateFormat sdf = new SimpleDateFormat(format, ActionContext
                                .getContext().getLocale());
                        sdf.setTimeZone(tz);
                        msg = sdf.format(date);
                    }
                }
                if (msg != null) {
                    try {
                        if (getVar() == null) {
                            writer.write(msg);
                        } else {
                            putInContext(msg);
                        }
                    } catch (IOException e) {
                        LOG.error("Could not write out Date tag", e);
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:31:41.917

动作类：

```
 public String execute() {

    Calendar cal = Calendar.getInstance();
    //set date to january 31, 2010
    cal.set(2010, 0, 31);
    Date newDate = cal.getTime();

    setCustomDate(newDate);

    return SUCCESS;

}

public Date getCustomDate() {
    return customDate;
}

public void setCustomDate(Date customDate) {
    this.customDate = customDate;
} 
```

JSP：

```
 <li>
  Date format in "dd MMMMM yyyy"
  --> <strong><s:date name="todayDate" format="dd MMMMM yyyy" /></strong>
  </li> 
```

但是如果你想要带前缀的日期，你需要做一些手动代码工作。

检查此链接以手动添加后缀。

[如何在 Java 中将月份中的日期格式化为“11 日”、“21 日”或“23 日”？（序数指标）](https://stackoverflow.com/questions/4011075/how-do-you-format-the-day-of-the-month-to-say-11th-21st-or-23rd-in-java)

# iphone - 如何使用 iPhone SDK 从 url 中仅获取特定部分的文本？

> ID：13488279
> 
> 赞同：0
> 
> 时间：2012-11-21T07:26:28.780
> 
> 标签：iphone, html, objective-c, ios, xcode

在我的应用程序中，我有一些网页的 URL，我想通过识别 html 标签从该 URL（其 html 页面）中仅获取特定的部分/部分。

例如，我想`<div id="content"> to </div>`按照 html 源代码获取部分。这样我就可以将其保存在另一个文件中。

**例如，我的网址是** [http://www.makepartsfast.com/2012/09/4337/more-3d-printing-in-metals-ex-one-introduces-the-m-flex-3d-printing-system/](http://www.makepartsfast.com/2012/09/4337/more-3d-printing-in-metals-ex-one-introduces-the-m-flex-3d-printing-system/)，其中打开一个html页面。我只想要该页面的一部分。

我该怎么做？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:05:49.400

这是 Cocoa+NSString 解决方案（工作+测试）。您会看到，当您使用这样的自定义解析器时，唯一真正的技巧是如何找到“结束”点。事实上，你不能只是去 "" 因为其他 div 在中间打开，所以你的解析器会在你正在寻找的内容结束之前停止。我显然不是说没有其他方法可以使用更复杂的 XML 解析器。但是网页并不那么容易解析，它们的代码并不总是完美的......而且这很简单并且有效（您仍然应该考虑获取 URL 内容的另一种方式，而不是 stringWithContentsOfURL: 这不是异步的）：

```
NSString *originalString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.makepartsfast.com/2012/09/4337/more-3d-printing-in-metals-ex-one-introduces-the-m-flex-3d-printing-system/"] encoding:NSUTF8StringEncoding error:nil];

NSScanner *scanner = [NSScanner scannerWithString:originalString];
NSString *extractedString = nil;

[scanner scanUpToString:@"<div id=\"content\">" intoString:nil];
[scanner scanString:@"<div id=\"content\">" intoString:nil];

[scanner scanUpToString:@"<div style=\"clear:both;\">" intoString:&extractedString];

if (extractedString) 
{
    // string was extracted
    NSLog(@"%@", extractedString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:41:37.330

查看Raywenderlich的教程[如何在 iOS 上解析 HTML。希望这可以帮助你。](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

[http://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:42:54.850

您可以使用开源库 GDataXMLNode。它允许您操作 xml 文件。看一眼

[http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml) http://code.google.com/p/gdata-objectivec-client/source/browse /trunk/Source/XMLSupport/?r=129

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:45:08.300

您最好的选择是使用`NSXMLParser`搜索属性等于“内容”的`div`标签。`id`捕获所有中间内容，直到适当的`</div>`结束标记。请参阅[Apple 的教程](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.html)。

# visual-studio - Nuget 的最佳实践：调试还是发布？

> ID：13488280
> 
> 赞同：100
> 
> 时间：2012-11-21T07:26:32.760
> 
> 标签：visual-studio, debugging, release, nuget

目前，我使用 Nuget 将发布版本打包到 nuget.org 的官方版本，但我使用 Nuget 打包调试版本，以便将符号源推送到 symbolsource.org。

编辑：（Jon Skeet，来自 Noda Time 开发的一些偏见）

NuGet 现在支持推送到 NuGet 库*和*symbolsource.org（或类似服务器），[如文档](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-symbol-package)所述。不幸的是，这里有两个相互矛盾的要求：

*   当只*使用*库而不需要任何调试时，你真的想要一个发布版本。毕竟，这就是发布版本的用途。
*   出于诊断目的调试库时，您确实需要禁用所有适当优化的调试版本。毕竟，这就是调试版本的用途。

这很好，但 NuGet 不允许（据我所知）在同一个包中以有用的方式发布发布和调试版本。

所以，选择是：

*   将调试版本分发给每个人（如文档中的示例所示），并接受任何规模和性能影响。
*   将发布版本分发给每个人，并忍受稍微受损的调试体验。
*   寻求一个非常复杂的分发策略，可能会提供单独的发布和调试包。

前两个确实归结为调试和发布版本之间差异的影响......尽管值得注意的是，因为想要检查某些行为而想要进入库的代码和想要调试库的代码，因为您认为自己发现了错误。在第二种情况下，最好将库的代码*作为 Visual Studio 解决方案*获取并以这种方式进行调试，因此我不会过多注意这种情况。

我的诱惑是只保留发布版本，期望*相对*较少的人需要调试，而那些这样做的人不会受到发布版本中的优化的*太大影响。*（无论如何，JIT 编译器都会进行大部分优化。）

那么，还有其他我们没有考虑过的选择吗？是否还有其他因素可以打破平衡？将 NuGet 包推送到 SymbolSource 是否足够新，以至于“最佳实践”真的还没有建立？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-01T07:31:07.097

对于 SymbolSource，我认为最佳做法是：

1.  仅将发布的二进制 + 内容包推送到 nuget.org（或任何其他生产源）
2.  将调试二进制+内容包推送到开发提要：
    *   内部部署
    *   在 myget.org 上
    *   在 nuget.org 作为预发布包。
3.  将发布和调试二进制+符号包推送到 symbolsource.org 或任何其他符号存储。

虽然我们在这里，一个常见的误解是 .NET 中的发布和调试版本确实有很大差异，但我假设差异就在这里，因为任何一个版本中可能包含或可能不包含的各种代码，如调试.断言。

也就是说，将这两种配置都推送到 SymbolSource 确实值得，因为您永远不知道何时需要调试生产代码。远程生产使其更难。发生这种情况时，您将需要从您的工具中获得的帮助。我显然不希望任何人。

关于版本控制还有一个问题需要考虑：让 2 个不同的包（在调试和发布中构建）共享 1 个版本号是否正确？SymbolSource 会接受这一点，因为它提取包并将二进制文件存储在单独的构建模式分支中，如果仅允许 NuGet 相应地标记包。目前没有办法确定一个包是调试模式还是发布模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T21:41:11.443

我完全同意你的结论。带有 RELEASE 的 NuGet 包和带有调试功能的 SymbolSource。直接进入包似乎很少见，启用优化的偶尔调试失误可能是可以接受的。

如果真的有问题，我认为理想的解决方案是让 NuGet 支持它。例如，想象一下，如果在调试时，它可以将发布 DLL 替换为 SymbolSource 包中包含的那个。

理想情况下，随后会发生的情况是，`nuget pack SomePackage -Symbols`针对发布版本会创建一个发布 nuget 包，但会创建一个调试符号包。并且 VS 插件将更新为足够智能，以便在调试器中运行时查看关联并拉入调试程序集并加载它们。有点疯狂，但会很有趣。

但是，我只是没有看到足够多的人抱怨这一点，所以目前值得。

NuGet 团队接受拉取请求。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-21T00:51:59.890

自 OP 的帖子发布以来已经 8 年了（之前的答案仍然在下面获得最高投票），所以我会用现在使用的东西来破解它。

*“进入*” NuGet 包有两种方式：

**1\. PDB 分布**

`.symbols.nupkg`符号包被[认为是旧](https://docs.microsoft.com/en-au/nuget/create-packages/symbol-packages)的，并已被`.snupkg`发布到[符号服务器](https://docs.microsoft.com/en-us/nuget/create-packages/symbol-packages-snupkg)的包所取代。大多数供应商都支持它，*Azure DevOps*是最大的局外人，[功能请求](https://developercommunity.visualstudio.com/idea/657354/add-snupkg-support-to-azure-devops-artifacts.html)仍在“审查中”（感谢@alv 提供链接）。

以下是[官方说明](https://docs.microsoft.com/en-us/nuget/create-packages/symbol-packages-snupkg)。只需将这两行添加到 csproj 文件中：

```
<PropertyGroup>
  <IncludeSymbols>true</IncludeSymbols>
  <SymbolPackageFormat>snupkg</SymbolPackageFormat>
</PropertyGroup> 
```

在消费者方面，确保您的 IDE 已针对 NuGet.org（或 Azure 等）符号服务器进行配置，以允许在调试时[单步执行包代码。](https://docs.microsoft.com/en-us/visualstudio/debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger)

**2.源码链接。链接实际代码**

在某些情况下，由于 MSIL/JIT 优化，PDB 可能会隐藏源代码的某些细节。因此，有一种方法可以在调试时“<em>进入”NuGet 的实际源代码。它被称为.NET Foundation 的[Source Link——](https://github.com/dotnet/sourcelink) “一个与语言和源代码控制无关的系统，用于为二进制文件提供源代码调试体验”。

Visual Studio 15.3+ 和所有主要供应商都支持它（也支持私有存储库）。

设置（[官方文档](https://github.com/dotnet/sourcelink)）很简单——只需在项目文件中添加一个开发依赖项（取决于你的 repo 的类型）以及一些标志：

```
<PropertyGroup>
    <PublishRepositoryUrl>true</PublishRepositoryUrl>
    <EmbedUntrackedSources>true</EmbedUntrackedSources>
</PropertyGroup>
<ItemGroup>
  <PackageReference Include="Microsoft.SourceLink.GitHub" Version="1.0.0" PrivateAssets="All" />
</ItemGroup> 
```

[在“改进 NuGet 包的 5 个步骤](https://alex-klaus.com/better-nuget/)”中查看有关此主题的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T07:28:22.993

[创建和发布符号包](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-symbol-package)中的示例将 Debug 目录中的文件引用为 dll 和 pdb 文件的源。

> 指定符号包内容
> 
> 符号包可以按照约定从按上一节中描述的方式构建的文件夹中构建，或者可以使用 files 部分指定其内容。如果你想构建前面描述的示例包，你可以把它放到你的 nuspec 文件中：

```
<files>
  <file src="Full\bin\Debug\*.dll" target="lib\net40" /> 
  <file src="Full\bin\Debug\*.pdb" target="lib\net40" /> 
  <file src="Silverlight\bin\Debug\*.dll" target="lib\sl40" /> 
  <file src="Silverlight\bin\Debug\*.pdb" target="lib\sl40" /> 
  <file src="**\*.cs" target="src" />
</files> 
```

由于发布符号的目的是允许其他人在调试时单步执行您的代码，因此发布用于调试的代码版本似乎是最谨慎的做法，而无需进行可能影响代码单步执行的优化。

# java - 解析 HttpServletRequest 包含 jsonp 字符串

> ID：13488303
> 
> 赞同：4
> 
> 时间：2012-11-21T07:28:41.820
> 
> 标签：java, parsing, servlets, jetty, jsonp

当我尝试发送跨域 jsonp 请求时：

```
$.getJSON(url + "?callback=?",
    value : 'John',
    record : {
        value : 'a',
        list : [ 1, 2 ]
    }); 
```

然后我尝试使用 java servlet 来获取它，如下所示：

```
public class TestServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                         HttpServletResponse response)
               throws ServletException, IOException {

        String output = request.getParameter("callback") 
                            + "({\"response\":\"test\"});";

        response.setContentType("application/javascript;charset=utf-8");

        PrintWriter out = response.getWriter();
        out.println(output);
    }
} 
```

内部 servlet 请求字符串具有参数名称：

```
_=1353482336546
value=John
record[value]=a 
```

**如何将请求字符串解析为原始 JSON？**

我使用嵌入式码头服务器，我想在 JSON 字符串上使用“JSON to Object”码头解析器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T05:32:58.117

您可以应用 flexjson 将 json 字符串解析为对象。请看一下：

[活生生的例子](https://gist.github.com/yutax77/2988072#file-figures-java)

[flexjson 库](http://flexjson.sourceforge.net/)

# javascript - 一键执行 JavaScript 函数和托管 bean 操作

> ID：13488305
> 
> 赞同：0
> 
> 时间：2012-11-21T07:28:41.660
> 
> 标签：javascript, jsf, jsf-2, primefaces

是否可以执行像`bar.show()`PrimeFaces 通知栏这样的 JavaScript 操作和像`#{managedBean.foo}`单击 JSF 组件的按钮一样的托管 bean 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:44:47.667

检查primefaces commandButton的vdl：http: [//www.primefaces.org/docs/vdl/3.4/primefaces-p/commandButton.html](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandButton.html)

对 bean 使用 action 或 actionListener，例如对客户端 javascript 回调使用 onclick

编辑（添加示例）：

```
<h:form id="formId">
    <p:commandButton value="Button" update="formId" id="ajax"  
         actionListener="#{myBean.serverSideBeanMethod}" onclick="clientSideJavaScriptFunction()" />
</h:form> 
```

# android - 如何在android中获取已读消息的数量？

> ID：13488308
> 
> 赞同：1
> 
> 时间：2012-11-21T07:28:47.357
> 
> 标签：android, sms

在我的应用程序中，我想向用户提供有关收件箱中已读和未读消息数量的信息。我搜索并发现android api中没有这样的内容：//sms/read。我试过了这段代码到现在：

```
 Uri number_of_sms_read = Uri.parse("content://sms/read");
        Cursor c = ShowTheMessages.this.getContentResolver().query(number_of_sms_read, null,null, null, null);
        c.moveToFirst();
        NumberOfSmsReadInInbox = c.getCount(); 
```

你能告诉我是否可以在android中获取已读和未读消息的计数？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:49:30.810

我想你可以看看这个与你相反的问题：[Get number of unread sms](https://stackoverflow.com/questions/3718687/get-number-of-unread-sms)

它为查询提供 WHERE 条件`"read = 0"`，因此您可能需要提供`"read = 1"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:50:55.633

```
final Uri SMS_INBOX = Uri.parse("content://sms/inbox");

Cursor c = getContentResolver().query(SMS_INBOX, null, "read = 1", null, null);
int unreadMessagesCount = c.getCount();
c.deactivate(); 
```

# java - 在java中将文本文件转换为字符串

> ID：13488317
> 
> 赞同：2
> 
> 时间：2012-11-21T07:29:27.520
> 
> 标签：java, android

我编写了一个代码，通过将文本文件转换为字符串并将其发送到 Web 服务来发送文本文件。请有人告诉我将字符串作为流发送到 Web 服务的其他可用方法。

```
public class MainActivity extends Activity {
    Button b1;
    String s;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        b1=(Button)findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                File upfile=new File("sdcard/text/testfile.txt");
                try {
                    FileInputStream fin=new FileInputStream(upfile);
                    byte[] buffer= new byte[(int)upfile.length()];
                    new DataInputStream(fin).readFully(buffer);
                    fin.close();
                    s=new String(buffer,"UTF-8");
                    System.out.print(buffer);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                // TODO Auto-generated method stub
                Toast.makeText(MainActivity.this, s, 20).show();

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T07:49:57.307

试试这个。

```
public void mReadJsonData() {
    try {
        File f = new File("sdcard/text/testfile.txt");
        FileInputStream is = new FileInputStream(f);
        int size = is.available();
        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();
        String text = new String(buffer);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:39:41.640

使用此代码从文件中读取数据并将其转换为字符串并根据您的需要提前进行处理 -

```
File upfile=new File("sdcard/text/testfile.txt");
 try {
            final BufferedReader reader = new BufferedReader(new FileReader(upfile));
            String encoded = "";
            try {
                String line;
                while ((line = reader.readLine()) != null) {
                    encoded += line;
                }
            }
            finally {
                reader.close();
            }
                 System.out.print(encoded);
        }
        catch (final Exception e) {

        } 
```

# cross-browser - 禁用浏览器中的键？

> ID：13488318
> 
> 赞同：0
> 
> 时间：2012-11-21T07:29:34.170
> 
> 标签：cross-browser, browser

我开始为我的网站设计一个模块，寻找一种扩展 flash 的方法（例如，我可以用 JavaScript 做的事情）来禁用键盘命令。例如，我希望能够禁用 F1 键，这样它就不会在 Chrome 中打开支持选项卡。我研究了访问密钥，但它们似乎不是一个好的解决方案。如果有人知道这如何可能，甚至我应该研究哪种语言，或者即使他们已经尝试过并且只是发现它是不可能的，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T15:02:31.743

我不确定 Chrome 之后的其他浏览器是否适合您，但您是否尝试过其中一些解决方案？

[1][如何禁用浏览器的默认帮助功能](https://stackoverflow.com/questions/9019278/how-to-disable-default-help-function-of-browsers)

[2][在浏览器中禁用 F1-Help 键并设置您自己的帮助文件或链接或页面等...](http://blogfornet.com/2013/05/disable-f1-help-key-in-browser-and-set-your-own-help-file-or-link-or-pages-etc/)

[3][如何使用 Javascript 禁用功能键？](https://stackoverflow.com/questions/13678847/how-to-disable-function-keys-using-javascript)

# java - 想要为应用播放背景音乐时，计算机找不到“AudioStream”

> ID：13488320
> 
> 赞同：0
> 
> 时间：2012-11-21T07:29:47.383
> 
> 标签：java, audio, eclipse-indigo

所以我试图做的是让我的应用程序在后台使用 .wav 音乐文件播放音乐。
我有这段代码，但在下面找不到 AudioStream

```
sun.audio.*; 
```

如果你们中的任何人都使用过 Eclipse IDE，那么您将如何找到 AudioStream 来导入它...

这是我使用的代码。它在不实现或扩展任何东西的 Sound 类下。

```
private AudioStream as;
private String lastSoundPath;

private void setStream(String soundPath){
    this.lastSoundPath = soundPath;
    try {
        InputStream in = new FileInputStream(soundPath);
        this.as = new AudioStream(in);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是我在尝试玩 Bangarang 时遇到的错误（我知道随机...）

```
java.io.IOException: could not create audio stream from input stream
at sun.audio.AudioStream.<init>(AudioStream.java:82)
at vapour.studios.destiny.client.Sound.setStream(Sound.java:17)
at vapour.studios.destiny.client.Sound.<init>(Sound.java:24)
at vapour.studios.destiny.Destiny.main(Destiny.java:23) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:03:28.337

You need to use javaSE 1.7 as execution environment in project properties.

it worked for me on Mac OS 10.8

# ruby-on-rails - 如何编写带有多个子查询的 Rails finder

> ID：13488333
> 
> 赞同：3
> 
> 时间：2012-11-21T07:30:46.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是一个图书馆系统，人们可以在这里借书。每本书都属于一个类别。我们想根据人们借的最多的书来给他们一些建议。

这里有四个模型：

```
class Person < AR
  has_many :borrows
end

class Borrow < AR
  belongs_to :person
  belongs_to :book
end

class Category < AR
  has_many :books
end

class Book < AR
  has_many :borrows
  belongs_to :category
end 
```

我写了 SQL 来找书

```
 SELECT * FROM books WHERE category_id = 
  (SELECT category_id FROM books WHERE id IN
    (SELECT book_id FROM borrows WHERE person_id =10000)
  GROUP BY category_id ORDER BY count(*) DESC LIMIT 1)
AND id NOT IN
  (SELECT book_id FROM borrows WHERE person_id =10000) 
```

这似乎有效，但我想知道如何以 Rails 方式编写查找器......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:24:14.753

你可以做以下事情，在 person.rb 中写下

```
has_many :books, :through => :borrows
has_many :categories_of_books, :through => :books,  :source => :category 
```

&

```
def suggested_books
 Book.where("category_id IN (?) AND id NOT IN (?)",  self.categories_of_books, self.books)
end 
```

虽然它会导致超过 1 个查询，但它很干净，你只需要这样做：

```
 @user.suggested_books 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:24:00.933

使用活动记录，您可以消除三个支持连接的子查询中的两个：

```
Book.where(
  category_id: Category.limit(1)
    .joins(:books => :borrows)
    .where("borrows.person_id = ?", 10000)
    .group("categories.id")
    .order("COUNT(*) DESC")
    .pluck("categories.id")
  ).joins(:borrows).where("borrows.person_id != ?", 10000) 
```

仍然不是最好的解决方案，因为它会生成两个单独的查询（一个用于内部查询`Category`）。根据您的需要，如果您决定将内部查询的结果（相关用户的借用最多的类别）用于其他事情，这可能不会那么糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:09:52.777

可能是这样的：

```
@person = Person.find(10000)
@categories = @person.books.map{|b| b.category}.uniq!
@suggestions = @categories.map{|c| c.books} - @person.books 
```

为了让 '@person.books' 工作，你必须在你的 Person 模型中添加：

```
has_many :books, :through => :borrows 
```

# hibernate - GROUP BY UPPER(XXX) 与 Hibernate 中的条件

> ID：13488335
> 
> 赞同：1
> 
> 时间：2012-11-21T07:31:11.340
> 
> 标签：hibernate, jakarta-ee, group-by

我正在尝试修改我的 Hibernate 条件查询以添加类似`GROUP BY UPPER (PERSONID)`. 我已经搜索了很多，但我没有找到任何关于此的内容。

我要更改的代码是：

```
Projections.groupProperty("PersonId"); 
```

我还没有找到 Projections 对象的忽略大小写方法或上层方法..我有点绝望。

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:48:49.910

尝试使用[Projections#sqlGroupProjection](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/criterion/Projections.html)。

```
Projections.sqlGroupProjection("upper({alias}.PERSONID) as pid",
                    "PERSONID",
                    new String[] { "pid" },
                    new Type[] { StandardBasicTypes.STRING }) 
```

不要忘记 {alias} 并使用表中的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:51:10.390

我会使用本机查询并执行原始 SQL。

利用`entityManager.createNativeQuery()`

通常，直接去比通过 HQL 弄清楚如何“正确”地去做更简单、更快捷。

# c# - 书呆子删除

> ID：13488336
> 
> 赞同：0
> 
> 时间：2012-11-21T07:31:12.920
> 
> 标签：c#, asp.net-mvc, nerddinner

我对 MVC 很陌生，我正在查看 NerdDinner 的代码

看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<NerdDinner.Models.Dinner>" %>

<asp:Content ID="Title" ContentPlaceHolderID="TitleContent" runat="server">
    Delete Confirmation: <%:Model.Title %>
</asp:Content>

<asp:Content ID="Main" ContentPlaceHolderID="MainContent" runat="server">

    <h2>
        Delete Confirmation
    </h2>

    <div>
        <p>Please confirm you want to cancel the dinner titled: 
        <i> <%:Model.Title %>? </i> </p>
    </div>

    <% using (Html.BeginForm()) { %>

        <input name="confirmButton" type="submit" value="Delete" />        

    <% } %>

</asp:Content> 
```

控制器：

```
 [HttpPost, Authorize]
    public ActionResult Delete(int id, string confirmButton) {

        Dinner dinner = dinnerRepository.GetDinner(id);

        if (dinner == null)
            return View("NotFound");

        if (!dinner.IsHostedBy(User.Identity.Name))
            return View("InvalidOwner");

        dinnerRepository.Delete(dinner);
        dinnerRepository.Save();

        return View("Deleted");
    } 
```

控制器如何获取要删除的项目的 ID？视图上似乎没有任何内容包含要传递给控制器​​的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:36:32.487

`using (Html.BeginForm())`将呈现一个 HTML`<form>`元素，其`action`属性默认为当前 URI。

这意味着如果您当前位于`/Dinner/Delete/5`，表单将发布到该 URI，并且常规模型绑定将发挥作用，将 映射`5`到`{id}`路由参数。

# php - 在 codeigniter 中使用 htaccess 隐藏 index.php 后，登录 url 重定向到主页 - [Codeigniter url 重定向问题]

> ID：13488337
> 
> 赞同：0
> 
> 时间：2012-11-21T07:31:15.647
> 
> 标签：php, apache, .htaccess, codeigniter, url-rewriting

我正在使用 Codeigniter Gocart 脚本开发一个购物车网站。我使用 htaccess 隐藏了 index.php。当我尝试使用**localhost/project143/secure/login 登录**时，它工作正常并进入登录页面。但是，当我尝试以**hostname/projects/project143/secure/login**的身份实时登录链接时，它会重定向到主页而不是登录页面。URL 中带有 index.php 的登录页面（**[http://hostname/projects/project143 /index.php/secure/login](http://hostname/projects/project143/index.php/secure/login)**）正在打开登录页面。我附上了我的问题和重定向代码的屏幕截图以进行澄清。有人知道这个问题并修复吗？

**.htaccess**

```
 RewriteEngine on
    RewriteBase /projects/project143/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|assets|uploads|robots\.txt)
    RewriteRule ^(.*)$ index.php/$1 [L] 
```

**主页：** ![在此处输入图像描述](../Images/29b8fefb0090cd8c1c613b6e9389d574.png) **URL 中包含 index.php 的** ![在此处输入图像描述](../Images/e78a033d043a350de0c81622e6d58360.png) **登录页面： URL 中没有 index.php 的登录页面：** ![在此处输入图像描述](../Images/b7bf4db78ec7b0bd9e5370da42a5610e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:51:23.897

这是解决方案 [如何在codeigniter的路径中删除“index.php”](https://stackoverflow.com/questions/1445385/how-to-remove-index-php-in-codeigniters-path)

尝试用户独角兽的答案。它会起作用。

# c# - 在 10.6 上构建 MacOS 10.8 源代码

> ID：13488341
> 
> 赞同：1
> 
> 时间：2012-11-21T07:32:05.113
> 
> 标签：c#, monodevelop, foundation, monomac, nsusernotification

我正在尝试[在 Mac 上构建 SparkleShare](https://github.com/hbons/SparkleShare/blob/master/SparkleShare/Mac/README.md)。

*   我有 Mac OS 10.6
*   SparkleShare 声称可以在[Snow Leopard (10.6) 或更高版本上运行](http://sparkleshare.org)
*   SparkleShare 包含对 的调用`NSUserNotification`，该类[在 OS X v10.8 及更高版本中可用](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotification_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012259)

Monodevelop 抛出错误：

> 错误 CS0246：找不到类型或命名空间名称“NSUserNotification”。您是否缺少 using 指令或程序集引用？

在 Monodevelop 中，当我开始输入 时`MonoMac.Foundation.NSUser`，唯一建议的项目是`NSUserDefaults`,`NSUserNotification`不建议。

这种交叉编译可能吗？
我无法升级到 10.8，因为我还想检查 10.6 上的用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:21:12.447

跑：

```
git clone https://github.com/mono/monomac
git clone https://github.com/mono/maccore
cd monomac
make 
```

它应该生成`MonoMac.dll`. 将其复制到您所在的任何`MonoMac.dll`位置，重新启动 Monodevelop，该项目现在应该可以正常构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:01:00.160

我刚刚看了一下 MonoMac 的源代码，并且`NSUserNotification`是最近添加的，它是在三个月前添加的：[https](https://github.com/mono/monomac/commit/2c4a8c639254705e0dde1ce32f4e49cfcb72187e) ://github.com/mono/monomac/commit/2c4a8c639254705e0dde1ce32f4e49cfcb72187e 。

这些是生成的文件：

*   [NSUserNotification.g.cs](http://pastebin.com/FUvfP1GB)
*   [NSUserNotificationCenter.g.cs](http://pastebin.com/0qJGGknH)
*   [NSUserNotificationActivationType](http://pastebin.com/8P3D7H1Q)
*   [NSUserNotificationCenterDelegate.g.cs](http://pastebin.com/abRkHBMS)

作为旧 MonoMac 版本的解决方法，您可以简单地将这些复制到您的代码中。

# tridion - 分配非管理员用户权限以删除 Tridion 构建块（架构、组件模板、页面模板等）

> ID：13488342
> 
> 赞同：2
> 
> 时间：2012-11-21T07:32:08.967
> 
> 标签：tridion, tridion-2011, administration

我`TridReadWrit`在 tridion 中创建了一个用户（不是管理员用户）并分配给组`Developer` 该用户对 Tridion Building Blocks 具有读/写权限。

为用户启用了以下权限-权限在“测试发布”>属性>安全选项卡>开发人员组中设置

*   出版管理
*   文件夹管理结构组管理
*   模式管理
*   组件管理
*   组件模板管理
*   页面管理页面
*   模板管理发布到内容
*   分销商工作流程管理
*   分类管理
*   模板构建块管理
*   虚拟文件夹管理

此外，我尝试设置所有权限，除了第二次尝试“测试发布”>“属性”>“安全选项卡”>“开发人员组”

*   出版管理
*   权限管理

用户`TridReadWrit`无法删除页面模板的两种情况（由同一用户创建）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:40:03.613

You have to provide delete permission to user or group. Go to building blocks folder containing PT and and choose Properties in the context menu.

In the security tab assign the Delete permission to user or group.

Hope it helps.

# jquery - 如何使用 HTML5 和 jQuery 将数据存储到 Google Docs 中？

> ID：13488346
> 
> 赞同：0
> 
> 时间：2012-11-21T07:32:46.400
> 
> 标签：jquery, html, documentation, store

这就是我将数据存储到 html5 本地存储中的方式。新要求正在从本地存储更改为 Google 文档。那么我该怎么做呢？我真的不知道。

```
//function to store the feedback to the database
function saveFeedback() {
     function saveFeedback() {
      var smiley_id, word_ids, word_texts;
      if (chosen_item === null) {
        chosen_item = 'debug';
        chosen_smiley = undefined;
      }
      if ((chosen_item !== null) && (chosen_smiley !== null)) {    
        word_ids = [];
        word_texts = [];
        if (chosen_smiley != undefined) {
          smiley_id = chosen_smiley.attr('class');
        }
        for (var i = chosen_words.length - 1; i >= 0; i--) {
          word_ids[i] = $('span',chosen_words[i]).attr('class').split(' ')[1];
          word_texts[i] = chosen_words_text[i];
        };
        if (stored_data.feedbacks[chosen_item] === undefined) {
          stored_data.feedbacks[chosen_item] = [];
        }    
        if (chosen_item === 'debug') {
          smiley_id = 'positive';
        }
        stored_data.feedbacks[chosen_item].push({smiley : smiley_id, word_1 : word_ids[0], word_2 : word_ids[1], word_3 : word_ids[2], word_1_text : word_texts[0], word_2_text : word_texts[1], word_3_text : word_texts[2]});
        if (chosen_item !== 'debug') {
          storeData(stored_data);   
        }
        chosen_smiley = null;
        chosen_words = [];
        chosen_words_text = [];
      }  
    }
//store the feedback data in the local database
function storeData(data) {
  console.log('storing feedback');
  localStorage.labraryFeedback = JSON.stringify(data);
} 
```

非常感谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:35:25.103

检查[Google Drive API JavaScript 文档](https://developers.google.com/drive/quickstart-js)

# c# - 如何将“0”（零）前缀为整数值

> ID：13488357
> 
> 赞同：2
> 
> 时间：2012-11-21T07:33:43.190
> 
> 标签：c#

我有一种情况，我需要在整数前面加上零。最初我有12个字符的字符串，前7个是字母，5个是数值。生成的字符串有时在数值的起始位置为零。例如 ABCDEF* *0* *1234，我的场景是从生成的字符串中生成一系列字符串。假设我想生成一个范围（假设数量为 3），那么它将是 ABCDEF01235、ABCDEF01236、ABCDEF01237。

当我尝试将具有 0（如上所示）的字符串转换为 int 时，它仅返回 1234。有没有办法做到这一点，而不截断零？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:37:47.413

您可以使用[`PadLeft`](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx)将给定的字符串扩展为给定的总长度：

```
int num = 1234;
Console.WriteLine(num.ToString().PadLeft(5, '0'));  // "01234" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-30T13:30:34.970

```
 int num = 1234;
 Console.WriteLine(num.ToString("D5"));  // "01234" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:37:56.010

没有`int`。

您必须使用`string`连接解析的数字和`0`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T07:56:40.857

我认为您可以使用 string.Format

```
 int num = 1234;
    Console.WriteLine(string.Format("0{0}", num)); 
```

# ruby-on-rails-3 - Rails 3 中的 Ckeditor

> ID：13488358
> 
> 赞同：0
> 
> 时间：2012-11-21T07:33:50.067
> 
> 标签：ruby-on-rails-3, ckeditor

我在我的 rails 3.2 应用程序中添加了 ckeditor(gem "ckeditor", "3.7.3") 并且工作正常。
但问题是我想把整个工具栏上的特定东西拿出来，我已经看到[了](https://stackoverflow.com/questions/9142293/how-to-configure-ckeditor-in-rails-3-1-gem-asset-pipeline/9199004#9199004)。
[这里](https://github.com/galetahub/ckeditor)提到了两种类型的工具栏 Full 和 Easy，其中 Easy 的配置如下[所示](https://github.com/galetahub/ckeditor/blob/master/app/assets/javascripts/ckeditor/config.js)。

* * *

所以问题是我如何获取所有变量的信息，以便我只使用我需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T17:09:21.217

如果您创建一个`/app/assets/javascripts/ckeditor`目录，然后在其中创建一个`config.js`文件，则可以添加一些这样的自定义项来制作一个最小的工具栏，请注意在此示例中我不想要 NewPage 和 Preview 的文档部分：

```
CKEDITOR.config.toolbar=  [
//    { name: 'document', items : [ 'NewPage','Preview' ] },
    { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
    { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','Scayt' ] },
    { name: 'insert', items : [ 'Image','Table','HorizontalRule','Smiley','SpecialChar' ] },
    { name: 'tools', items : [ 'Maximize','-','About' ] },
    '/',
    { name: 'styles', items : [ 'Styles','Format' ] },
    { name: 'basicstyles', items : [ 'Bold','Italic','Strike','-','RemoveFormat' ] },
    { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote' ] },
    { name: 'links', items : [ 'Link','Unlink','Anchor' ] }

]; 
```

请注意，您可能希望包含捆绑的 config.js 的内容，否则图像上传器和文件浏览器之类的内容将不起作用。我的看起来像这样：

```
CKEDITOR.editorConfig = function( config )
{
    // Define changes to default configuration here. For example:
    // config.language = 'fr';
    // config.uiColor = '#AADC6E';

    /* Filebrowser routes */
    // The location of an external file browser, that should be launched when "Browse Server" button is pressed.
    config.filebrowserBrowseUrl = "/ckeditor/attachment_files";

    // The location of an external file browser, that should be launched when "Browse Server" button is pressed in the Flash dialog.
    config.filebrowserFlashBrowseUrl = "/ckeditor/attachment_files";

    // The location of a script that handles file uploads in the Flash dialog.
    config.filebrowserFlashUploadUrl = "/ckeditor/attachment_files";

    // The location of an external file browser, that should be launched when "Browse Server" button is pressed in the Link tab of Image dialog.
    config.filebrowserImageBrowseLinkUrl = "/ckeditor/pictures";

    // The location of an external file browser, that should be launched when "Browse Server" button is pressed in the Image dialog.
    config.filebrowserImageBrowseUrl = "/ckeditor/pictures";

    // The location of a script that handles file uploads in the Image dialog.
    config.filebrowserImageUploadUrl = "/ckeditor/pictures";

    // The location of a script that handles file uploads.
    config.filebrowserUploadUrl = "/ckeditor/attachment_files";

    // Rails CSRF token
    config.filebrowserParams = function(){
        var csrf_token, csrf_param, meta,
            metas = document.getElementsByTagName('meta'),
            params = new Object();

        for ( var i = 0 ; i < metas.length ; i++ ){
            meta = metas[i];

            switch(meta.name) {
                case "csrf-token":
                    csrf_token = meta.content;
                    break;
                case "csrf-param":
                    csrf_param = meta.content;
                    break;
                default:
                    continue;
            }
        }

        if (csrf_param !== undefined && csrf_token !== undefined) {
            params[csrf_param] = csrf_token;
        }

        return params;
    };

    config.addQueryString = function( url, params ){
        var queryString = [];

        if ( !params ) {
            return url;
        } else {
            for ( var i in params )
                queryString.push( i + "=" + encodeURIComponent( params[ i ] ) );
        }

        return url + ( ( url.indexOf( "?" ) != -1 ) ? "&" : "?" ) + queryString.join( "&" );
    };

    // Integrate Rails CSRF token into file upload dialogs (link, image, attachment and flash)
    CKEDITOR.on( 'dialogDefinition', function( ev ){
        // Take the dialog name and its definition from the event data.
        var dialogName = ev.data.name;
        var dialogDefinition = ev.data.definition;
        var content, upload;

        if (CKEDITOR.tools.indexOf(['link', 'image', 'attachment', 'flash'], dialogName) > -1) {
            content = (dialogDefinition.getContents('Upload') || dialogDefinition.getContents('upload'));
            upload = (content == null ? null : content.get('upload'));

            if (upload && upload.filebrowser && upload.filebrowser['params'] === undefined) {
                upload.filebrowser['params'] = config.filebrowserParams();
                upload.action = config.addQueryString(upload.action, upload.filebrowser['params']);
            }
        }
    });
}; 
```

# selenium - 如何在 Selenium IDE 中自动化鼠标滚动事件

> ID：13488359
> 
> 赞同：6
> 
> 时间：2012-11-21T07:33:52.860
> 
> 标签：selenium, mouseevent, selenium-ide

我正在尝试在 selenium IDE 中捕获/自动化鼠标滚动事件。就像在 Facebook 朋友列表页面中一样，我们必须滚动到最后才能列出所有朋友。

我想使用 Selenium IDE 自动化该功能。

**我做了什么 ：**

> 1.  使用我当前的脚本，我可以登录 Facebook。
>     
>     
> 2.  然后从标题中单击我的名字，我可以转到我的个人资料页面。
>     
>     
> 3.  在我的个人资料页面上，我正在存储朋友数量的值，然后单击朋友链接我可以转到朋友列表页面。
>     
>     
> 4.  在使用断言功能的朋友列表页面上，我将我在前一页存储的朋友数量的值与朋友列表页面上显示的数量进行比较。

**我不能做什么**

> 1.  我想使用命令滚动并比较已经列出了多少朋友以及剩余多少，
> 
> 如果（剩余<1）那么我不会进一步滚动
> 
> 否则我会滚动一段时间，然后再比较剩下多少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T07:40:50.120

硒 RC：

`selenium.getEval("window.scrollBy(x,y)");`

硒 IDE：

```
storeEval  |  selenium.browserbot.getCurrentWindow().scrollTo(x,y) 
```

**更新：**

```
<tr>
    <td>storeEval</td>
    <td>selenium.browserbot.getCurrentWindow().scrollTo(100,800)</td>
    <td></td>
</tr>
<tr>
    <td>waitForPageToLoad</td>
    <td></td>
    <td>10000</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>selenium.browserbot.getCurrentWindow().scrollTo(200,1600)</td>
    <td></td>
</tr>
<tr>
    <td>waitForPageToLoad</td>
    <td></td>
    <td>10000</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>selenium.browserbot.getCurrentWindow().scrollTo(300,2400)</td>
    <td></td>
</tr> 
```

这会将窗口滚动到 3 个不同的坐标。

# android - 这是从服务器下载视频后播放视频的正确方法吗

> ID：13488360
> 
> 赞同：0
> 
> 时间：2012-11-21T07:33:54.717
> 
> 标签：android

以下哪项是在 Android 中播放视频的更好方法：

1.  从服务器流式传输视频 URL 并播放。

2.  或从服务器下载视频并播放视频后。

提前致谢........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:54:39.800

如果设备连接到可以处理压力的互联网连接，选项 1 效果会更好。因为每个人都讨厌缓冲！否则选项2更好。

但这也取决于视频的大小和其他变量，例如用户观看剪辑的次数、用户想要观看的时间（他启动您的应用程序的第二秒或一/两分钟后）等等！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:01:07.593

你的问题没有共同的答案

流媒体更好

1）互联网连接速度足够快，无需缓冲即可流式传输

2）用户需要立即观看视频，无需等待下载

3) 用户只会观看一两次视频

什么时候下载比较好

1) 用户想稍后再看视频，而不是在下载后立即观看

2）用户会多次观看视频，因此流式传输会导致流量过多

# android - 无法在 Android 中创建媒体播放器

> ID：13488363
> 
> 赞同：2
> 
> 时间：2012-11-21T07:34:08.740
> 
> 标签：android, android-mediaplayer

我开发了一个简单的应用程序，一旦活动开始，警报就会在给定的时间段内启动。我已经在模拟器中尝试过编码，它可以工作。但是当我在手机（Android 2.3.5）中运行应用程序时，应用程序会强制关闭。

RemoteAlarmActivity.java

```
MediaPlayer mp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mp = MediaPlayer.create(RemoteAlarmActivity.this, R.raw.music);
    Log.d(this.getClass().getName(), "Alarm Created");

    try {
        mp.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    mp.start();
    Log.d(this.getClass().getName(), "Alarm Started");

    Handler h = new Handler();
    Runnable stopPlaybackRun = new Runnable() {
        public void run(){
            mp.stop();
            mp.release();
        }    
    };
    h.postDelayed(stopPlaybackRun, 20 * 1000);
} 
```

日志猫

```
11-21 15:27:23.192: E/MediaPlayer(13047): Unable to to create media player
11-21 15:27:23.292: D/MediaPlayer(13047): create failed:
11-21 15:27:23.292: D/MediaPlayer(13047): java.io.IOException: setDataSourceFD failed.: status=0x80000000
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.media.MediaPlayer.setDataSource(Native Method)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.media.MediaPlayer.create(MediaPlayer.java:704)
11-21 15:27:23.292: D/MediaPlayer(13047):   at com.testing.alarm.RemoteAlarmActivity.onCreate(RemoteAlarmActivity.java:21)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.app.ActivityThread.access$1500(ActivityThread.java:135)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.os.Handler.dispatchMessage(Handler.java:99)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.os.Looper.loop(Looper.java:150)
11-21 15:27:23.292: D/MediaPlayer(13047):   at android.app.ActivityThread.main(ActivityThread.java:4385)
11-21 15:27:23.292: D/MediaPlayer(13047):   at java.lang.reflect.Method.invokeNative(Native Method)
11-21 15:27:23.292: D/MediaPlayer(13047):   at java.lang.reflect.Method.invoke(Method.java:507)
11-21 15:27:23.292: D/MediaPlayer(13047):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
11-21 15:27:23.292: D/MediaPlayer(13047):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
11-21 15:27:23.292: D/MediaPlayer(13047):   at dalvik.system.NativeStart.main(Native Method)
11-21 15:27:23.302: D/com.testing.alarm.RemoteAlarmActivity(13047): Alarm Created 
```

附件是编码的一部分以及logcat。有人可以帮我指出我的编码有什么问题吗？谢谢...

# visual-studio - 为 Windows RT 创建桌面应用程序？

> ID：13488364
> 
> 赞同：2
> 
> 时间：2012-11-21T07:34:10.550
> 
> 标签：visual-studio, windows-phone

我已经安装了 Windows Phone SDK 8.0，并且没有用于桌面 Windows RT 应用程序的项目类型。

如何开发此类应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:03:48.597

Windows RT 与Phone SDK 无关——它来自主桌面开发环境。

Microsoft 不允许为 Windows RT 构建桌面应用程序。RT 桌面仅限于使办公应用程序工作，但不包括完整的 Windows 功能。

要开发 Windows 8 桌面应用程序，您可以像过去用于桌面应用程序一样使用 Visual Studio。

要构建一个 Windows 商店应用程序，您将进入 c# 并选择 Windows 商店。 [教程](http://msdn.microsoft.com/en-us/library/windows/apps/Hh974581.aspx)位于 Microsoft。在那里，您将获得一系列模板，您可以根据这些模板构建您的应用程序。我希望这些模板也将构建可以在 Windows RT 设备上运行的应用程序。（虽然我没有测试过）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-04T22:35:42.727

> 为 Windows RT 创建桌面应用程序？

从技术上讲，您不能为 Windows RT开发*桌面应用程序。*它没有得到微软的官方支持。不过，您可以为它开发*商店应用程序*。商店应用程序*曾经*被称为*Metro Apps*，但微软因使用该名称而面临法律风险（请参阅[Microsoft 删除 Windows 8 的“Metro”名称](http://www.bbc.com/news/technology-19108952)）。

要绕过限制，请参阅[Can ARM 桌面程序可以使用 Visual Studio 2012 构建](https://stackoverflow.com/questions/11151474/can-arm-desktop-programs-be-built-using-visual-studio-2012)。但是，如果您提交应用，您的应用可能会被 Microsoft 的 Windows 应用商店拒绝。

> ...不是桌面 Windows RT 应用程序的项目类型。

Windows RT 在那里 - 你想要一个 Windows 应用商店应用程序：

![Windows 应用商店应用](../Images/b65b819897d641dfba4b695a7c9a4989.png)

Windows 应用商店应用项目将定义`WINAPI_FAMILY=WINAPI_FAMILY_APP`. 它将具有三个平台`X86`：`X64`和`ARM`。Windows RT 专业版是`X64`. Windows RT 是`ARM`. 我不确定`X86`归类为什么。对于开发人员和工程师来说，这一切都只`WINAPI_FAMILY=WINAPI_FAMILY_APP`需要三个平台。在 Visual Studio 下 Pro 和非 Pro 之间没有区别（有些人放弃）。

有关`WINAPI_FAMILY`平台检测的一些好读物，请参阅 Chuck Walbourn 的三部分系列[游戏的双重用途编码技术](http://blogs.msdn.com/b/chuckw/archive/2012/09/17/dual-use-coding-techniques-for-games.aspx)。

Windows Phone 和 Windows Store 的后端区别在于：

Windows RT 使用位于

*   `%VSINSTALLDIR%\VC\bin\x86_ARM\CL.exe`

Windows Phone 使用位于

*   `%VSINSTALLDIR%\VC\WPSDK\WP80\bin\x86_arm\link.exe`

显然，当平台发生变化时，路径也会发生变化。但链接器（link.exe）和其他工具（如 lib.exe）与编译器位于同一目录中。

Windows RT (ARM) 的环境标记为*Visual Studio 2012 ARM Cross Tools Command Prompt*。您可以在*Start* (what's left of it) → *Program Files* → *Visual Studio 2012* → *Visual Studio Tools*找到它：

![在此处输入图像描述](../Images/98abb7cdbb5ed95925c357d817e4fdca.png)

Windows Phone (ARM) 的环境标记为*Visual Studio 2012 ARM Phone Tools Command Prompt*：

![在此处输入图像描述](../Images/909095d4681887f7e43b8449cf3b115d.png)

同样，Windows Phone (X86) 的环境标记为*Visual Studio 2012 X86 Phone Tools Command Prompt*；和 Windows RT Pro (X64) 被标记为*Visual Studio 2012 X64 Cross Tools Command Prompt*。

所有的命令提示符都设置了环境，所以`INCLUDE`，`LIBPATH`等都`PATH`准备好进行命令行开发了。迄今为止，这就是我所使用的全部内容，因为我一直在移植库。我还没有将 Visual Studio 用于项目。

您还需要查看是否[可以使用 Visual Studio 2012 构建 ARM 桌面程序以](https://stackoverflow.com/questions/11151474/can-arm-desktop-programs-be-built-using-visual-studio-2012)进行`_ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE=1`定义。

另请参阅 Jason Zander在 MSDN上的[What you need to know about development for Windows on ARM (WOA) 。](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)

最后，请参阅XDA 开发人员论坛上[移植到 Windows RT 的桌面应用程序。](http://forum.xda-developers.com/showthread.php?t=2092348)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-26T22:07:12.627

您可以破解 Visual Studio 2012 及更高版本，以允许您在 Windows 桌面应用程序中引用 RT。

1.) 在 Visual Studio 中卸载您的项目

2.) 将 TargetPlatformVersion 属性添加到项目中：

```
<PropertyGroup>
  <TargetPlatformVersion>8.0</TargetPlatformVersion>
</PropertyGroup> 
```

3.) 重新加载项目。

4.) 转到“添加参考...”

5.) 现在左侧面板上应该有一个额外的 Windows 选项，允许您添加 Windows 核心参考。

有关详细信息，请参阅[从桌面应用程序使用 Windows 8* WinRT API](http://software.intel.com/en-us/articles/using-winrt-apis-from-desktop-applications)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T07:47:21.987

Windows Phone 8 和 Windows 8 是两个独立的产品，需要 2 个独立的 SDK 来开发。Windows Phone 8 只能在移动设备上运行，而 Windows 8 可以在台式机、笔记本电脑和平板电脑上运行。

构建 Windows 8 应用程序所需要做的就是一台安装了 Windows 8 和 Visual Studio 2012 的机器。您可以使用 Visual Studio Express（免费）版的 Windows 8 Enterprise 的 90 天评估来构建此类应用程序。如果您是学生，您可以通过 Dreamspark 程序免费获得完整版的 Visual Studio。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T08:00:43.233

要开发 Windows 应用商店应用程序，您需要[Visual Studio 2012](http://msdn.microsoft.com/en-us/library/windows/apps/br211384.aspx)。

Windows Phone SDK 附带的 Visual Studio Express 没有用于开发 Windows 应用商店应用程序的模板。

# iphone - 应用程序窗口应该有一个根视图控制器

> ID：13488372
> 
> 赞同：0
> 
> 时间：2012-11-21T07:34:41.477
> 
> 标签：iphone, objective-c, ios, rootview

我从客户那里收到了一个需要编译的项目，但是当我运行它时会出现错误`Application windows are expected to have a root view controller at the end of application launch`并且`EXC_BAD_Access (code=2, address=0x0)`

据我所知，这是由于`application:didFinishLaunchWithOptions:`在 中`AppDelegate`，但我的项目的问题是没有`AppDelegate`文件。

**编辑：**

我试图在 Xcode 4.5.1 上运行该项目，现在它给出了错误`address doesn't contain a section that points to a section in a object file.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:53:39.990

我还遇到了“应用程序窗口应该有一个根视图控制器”错误消息。

如果您使用的是故事板并且您已验证：

1.  应用程序委托 application:didFinishLaunchingWithOptions 方法返回 TRUE 并且什么也不做。
2.  视图控制器在 IB 中设置为初始视图控制器。
3.  故事板在 TARGETS Summary 选项卡上适当设置。

验证您没有在视图控制器实现中创建“视图” UIView @property 和 @synthezised。我经历了这一点，通过一个漫长的消除过程，当我意识到我创建了一个“视图”UIView 属性时，我意识到我已经创建了一个与 IB 创建并链接到视图控制器的那个完全相同的“视图”UIView 属性。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:43:55.243

问题是没有 AppDelegate 文件。这通常是设置根视图控制器的地方

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
  // Override point for customization after application launch.
  self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

  // set root view controller
  self.window.rootViewController = self.viewController;
  [self.window makeKeyAndVisible];
  return YES;
} 
```

# ios - 如何在 IOS 应用程序的启动屏幕中嵌入 flash/SWF 动画？

> ID：13488374
> 
> 赞同：1
> 
> 时间：2012-11-21T07:35:06.727
> 
> 标签：ios, animation, flash

我想在应用程序启动屏幕中嵌入一个动画标志，这个标志已经完成了两种格式的文件SWF和Flash，我的问题是如何将这些文件直接嵌入到应用程序启动屏幕中，这样动画标志就直接出现了在启动屏幕上。

感谢您的关心，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:40:20.600

这是不可能的。iOS 不支持 Flash。

更新：跟进一个可能的解决方案，因为您的 Flash 只是一个动画，也许您可​​以将其渲染为视频并改用它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:39:54.953

If you are planning to publish your app on the AppStore, then what you are trying to do is Impossible !

Your best option is to create the animation you want using Core animation or you can simply convert that animation to a video and play it once your app is loaded.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:42:20.697

首先，您的启动屏幕是静态图像（“ `Default.png`”）......所以你不能在那里做动画。

一旦您的应用程序完全启动并且静态图像消失，那么您就可以制作动画了。

实际上，它*不能*是 Flash 或 SWF（顺便说一下，Flash 文件是 SWF 文件）。[可以使用Adob​​e AIR](http://www.adobe.com/devnet/air.html)为 iOS 构建基于 Flash 的应用程序，但这是一个与 Xcode 分开的完整环境和 IDE。

使用 CoreAnimation、HTML5 或其他一些精细的动画框架（Unity、Cocos2d 或其他）制作启动动画会更聪明。

或者一个单独的视频文件（在这种情况下，用户的交互可能性很小）。但是 +1 给达伦，因为它比我想象的更快地提出了这个答案。

# ruby-on-rails - 如何检查rails中的数据是否为空？

> ID：13488389
> 
> 赞同：0
> 
> 时间：2012-11-21T07:35:47.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我必须检查@empqua.document 中是否有文件下载或空白。我的代码就像。

相关文件：`<% if @empqua.document.empty? %> Blank <%else%> <%= link_to "Download",@empqua.document.url, :target => "_blank", :class => "filelink" %> <% end %></td></tr>`

我写了这段代码，但它给出了一个错误：

> 未定义的方法“空？” 对于 /documents/original/missing.png:Paperclip::Attachment

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:40:35.867

试试看

```
@empqua.document.present? 
```

# vb.net - 编码/解码字符串

> ID：13488394
> 
> 赞同：5
> 
> 时间：2012-11-21T07:36:06.253
> 
> 标签：vb.net, string

（使用 vb.net）

你好，

我有一个 ini 文件，我需要在 ini 文件中将 RTF 文件作为单行发布 - 比如...

```
[my section]
rtf_file_1=bla bla bla (the content of the rtf file) 
```

为避免 RTF 文件中的换行符、特殊代码等包含在 ini 文件中，如何将其编码（和解码）为单个字符串？

如果有一个函数可以将字符串（在我的情况下是 RTF 文件的内容）转换为一行数字，然后将其解码回来，那我是怎么回事？

你会怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T07:54:12.843

您可以使用 base64 编码对它们进行编码。就像内容被视为二进制一样->它可以是任何类型的文件。但当然，在配置文件中，您将无法读取文件的内容。

这里是 Base64 编码/解码的片段

```
//Encode
string filePath = "";
string base64encoded = null;
using (StreamReader r = new StreamReader(File.OpenRead(filePath)))
{
    byte[] data = System.Text.ASCIIEncoding.ASCII.GetBytes(r.ReadToEnd());
    base64encoded = System.Convert.ToBase64String(data);
}

//decode --> write back
using(StreamWriter w = new StreamWriter(File.Create(filePath)))
{
    byte[] data = System.Convert.FromBase64String(base64encoded);

    w.Write(System.Text.ASCIIEncoding.ASCII.GetString(data));
} 
```

在 VB.NET 中：

```
 Dim filePath As String = ""
    Dim base64encoded As String = vbNull

    'Encode()
    Using r As StreamReader = New StreamReader(File.OpenRead(filePath))
        Dim data As Byte() = System.Text.ASCIIEncoding.ASCII.GetBytes(r.ReadToEnd())
        base64encoded = System.Convert.ToBase64String(data)
    End Using

    'decode --> write back
    Using w As StreamWriter = New StreamWriter(File.Create(filePath))
        Dim data As Byte() = System.Convert.FromBase64String(base64encoded)
        w.Write(System.Text.ASCIIEncoding.ASCII.GetString(data))
    End Using 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-21T23:57:41.573

使用此函数解码 Base64 编码的字符串：

```
Private Function DecodeBase64(ByVal Base64Encoded)
    Return System.Text.Encoding.UTF8.GetString(System.Convert.FromBase64String(Base64Encoded))
End Function 
```

如果它不起作用，请尝试在解码之前在 Base64 编码字符串的末尾添加“=”或“==”以匹配其长度。

# php - Codeigniter 中的用户身份验证/授权

> ID：13488397
> 
> 赞同：1
> 
> 时间：2012-11-21T07:36:12.830
> 
> 标签：php, codeigniter, facebook-graph-api, authentication, openid

我正在 Codeigniter 中构建一个社交平台。我希望实现一个社交登录选项，如 StackOverflow（它使用 OpenId），用户可以选择 Facebook、LinkedIn、Twitter 或 Google 登录到我的网站。我知道几个 PHP 库像 OpenId，A3M 的 CI ..

我的查询是 A3M 是否会检测到通过 Linked In 登录的用户已经是最初使用 FB 并将两个 Id 映射到同一用户而不是生成新用户的注册用户。

对于我的需求，是否有更好的建议替代 A3M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:30:55.410

您可以查看 Phil Sturgeon 的“Codeigniter OAuth”。

> OAuth 协议的实现，带有驱动程序以与不同的提供者（例如 Twitter、Google 等）一起工作。

OAuth：[https ://github.com/philsturgeon/codeigniter-oauth](https://github.com/philsturgeon/codeigniter-oauth)

和

OAuth 2.0：[https ://github.com/philsturgeon/codeigniter-oauth2](https://github.com/philsturgeon/codeigniter-oauth2)

两者和其他也可在[http://getsparks.org/packages/summary获得](http://getsparks.org/packages/summary)

# audio - sencha Touch 中的音频

> ID：13488400
> 
> 赞同：1
> 
> 时间：2012-11-21T07:36:29.463
> 
> 标签：audio, sencha-touch, touch, sencha-touch-2

我正在用 sencha touch 播放音轨。它工作正常..但我想要两件事。

1）如何隐藏音频播放器并自动播放声音。为此，我尝试了

```
autoplay:true, and 
hidden:true, 
```

但这不起作用..

2）我想添加一个按钮来播放音频，即它包含文本“点击播放”，当它被点击时它变成暂停..当暂停点击它变成播放..我已经这样做了但它确实根本不工作..即首先我必须点击播放器上的播放按钮，然后我的自定义按钮开始起作用..请帮助我摆脱这个..

```
{
     xtype: 'audio',
     url: 'lib/touch/snd/sound.mp3',
     id: 'sound1',
     autoplay:true,
     hidden:true
},
{
     xtype: 'button',
     text:'Tap to play audio',
     handler: function() {
         var container = this.getParent().getParent(),
         // use ComponentQuery to get the audio component (using its xtype)
         audio = container.down('audio');
         audio.toggle();
         this.setText(audio.isPlaying() ? 'Pause' : 'Play');
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:03:30.310

请参阅文档... [链接](http://docs.sencha.com/touch/2-1/#!/api/Ext.Audio-event-play)

它应该是这样的

```
{
 xtype: 'audio',
 url: 'lib/touch/snd/sound.mp3',
 id: 'sound1',
 autoplay:true,
 hidden:true
},
{
 xtype: 'button',
 text:'Tap to play audio',
 handler: function() {
     Ext.getCmp('#sound1').play(this,erg); or
     Ext.getCmp('#sound1').pause(this,0,erg);
 }
} 
```

# c++ - C++ V8 对象上下文

> ID：13488402
> 
> 赞同：1
> 
> 时间：2012-11-21T07:36:34.757
> 
> 标签：c++, node.js

我正在尝试在 C++ 中执行回调（其中 C++ 作为 node.js 程序的一部分运行）。回调是到第 3 方库，当它有数据要传递时，它将调用回调。

我似乎遇到的问题是变量类型：

```
static void sensorEventCallback(const char *protocol, const char *model,
        int id, int dataType, const char *value, int timestamp,
        int callbackId, void *context)
{
   //process the data here
}

Handle<Value> sensorEvents( const Arguments& args ) {
    HandleScope scope;
    ...
    callbackId = tdRegisterSensorEvent(
            reinterpret_cast<TDSensorEvent>(&telldus_v8::sensorEventCallback),
            Context::GetCurrent()->Global());
} 
```

我得到的错误：

> 错误：无法将 'v8::Local<v8::Object>' 转换为 'void*' 参数 '2' 到 'int tdRegisterSensorEvent(void ( *)(const char* , const char*, int, int, const char*, int, int, void*), void*)'</p>

它似乎在与作为上下文的论点 2 作斗争。关于如何将 V8 对象转换为 tdRegisterSensorEvent 将接受的对象的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:03:27.843

稍微窥探一下，这`GetCurrent`似乎是在 V8 标头中定义以返回 a `Local<Context>`：

[GitHub 上的 v8.h，上下文对象定义中 GetCurrent() 的位置](https://github.com/joyent/node/blob/05e6f318c6ecccea73698367010e51812c5b3862/deps/v8/include/v8.h#L3400)

这是从基类派生的*“轻量级堆栈分配句柄”*`Local<T>`的模板：*`Handle<T>`*

 *[GitHub上的v8.h，Local的定义](https://github.com/joyent/node/blob/05e6f318c6ecccea73698367010e51812c5b3862/deps/v8/include/v8.h#L257)

[GitHub上的v8.h，Handle的定义](https://github.com/joyent/node/blob/05e6f318c6ecccea73698367010e51812c5b3862/deps/v8/include/v8.h#L144)

所以看起来你有一个 Context 指针，它的生命周期由一个叫做`HandleScope`. 如果您将上下文指针拉出并保存以供稍后在回调中使用，则在进行调用时它可能仍然存在，也可能不存在。

如果您知道所有回调将在句柄范围释放之前发生，您可以尝试使用取消引用运算符重载获取指针并传递它：

[GitHub 上的 v8.h，T* Handle::operator*()](https://github.com/joyent/node/blob/05e6f318c6ecccea73698367010e51812c5b3862/deps/v8/include/v8.h#L213)

但是你可能没有这个保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:02:38.510

正如 nm 所说，我猜应该传递上下文对象的地址。然后你可以在你的回调中将其转换回

```
void telldus_v8::sensorEventCallback(const char *protocol, const char *model,
        int id, int dataType, const char *value, int timestamp,
        int callbackId, void *context)
{
   v8::Local<v8::Object>* ctx_ptr = static_cast<v8::Local<v8::Object>*>(context);
   //process the data here
}

v8::Local<v8::Object> ctx = Context::GetCurrent()->Global();
callbackId = tdRegisterSensorEvent(
        reinterpret_cast<TDSensorEvent>(&telldus_v8::sensorEventCallback),
        &ctx); 
```*

# java - 如何选择特定的一组 带有 jsoup 的标签

> ID：13488404
> 
> 赞同：0
> 
> 时间：2012-11-21T07:36:49.727
> 
> 标签：java, jsoup

我有以下要解析的 HTML 代码 ![截屏](../Images/ec5230ecc35c7b87e61cf0a0df047976.png)

谁能告诉我如何只选择框中的 p 标签。或者谁能​​告诉我如何删除红线下方的标签？此外，还有大量不需要的 p 标签

div class="SPOSTARBUST-Related-Posts"

但

```
document.select("div.SPOSTARBUST-Related-Posts").remove(); 
```

似乎什么也没做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:02:22.410

如果您只想选择`<p>`红色框中的标签，如您所见，您可以找到的唯一条件是`style="text-align: justify"`.

使用[JSoup 选择器语法](http://jsoup.org/cookbook/extracting-data/selector-syntax)，您可以这样做

```
Elements paragraphs = doc.select("p[style*=justify]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:59:44.927

您应该使用以下选择器

```
div[id=content] > p 
```

像这样

```
 final String html = "<head><body/><div id=\"content\"><p>a</p><p>b</p><div><p>v</p></div></div></html>";
    final Document doc = Jsoup.parse(html);

    final Elements ps = doc.select("div[id=content] > p");
    System.out.println(ps.size()); 
```

这*将* `p`返回`div[id="content"]`.

# java - 使用四个规则之一对列表进行排序的最佳实践

> ID：13488405
> 
> 赞同：3
> 
> 时间：2012-11-21T07:36:50.460
> 
> 标签：java, android, performance, list

我有一系列需要按规则订购的对象。但是我需要能够切换规则，但是我有一组有限的排序规则。哪种数据结构是最好的选择？

作为一个例子，我有这个类：

```
class Test {
    public final int amount;
    public final int cost;
    public final String name;
    public final int whatever;
    // ...

    // TODO: add a constructor to set the fields :-)
} 
```

我如何存储这些字段以按金额、成本、名称或其他方式对它们进行排序。但只是其中一个规则。

我可以想象使用 an`ArrayList`或 a`HashSet`来调用排序函数和 custom `Comparator`。但我无法想象这就是效率。我认为这在移动设备上很重要。有什么更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:46:30.137

您不能使用 an`Set`进行排序，因为它没有任何顺序。每一个拥有`List`和定制的概念是如何`Comparator<T>`合理的。

您应该采用该解决方案，此时不要关心性能。如果您对获得的结果不满意，请尝试提出更好的解决方案。

最好的解决方案是以正确的顺序从存储中读取数据。我不知道你的应用程序商店的结构如何。因此，我无法帮助您。但是实施类似的解决方案，您会发现情况还不错。

在移动设备上重要的是内存使用。如果您的应用程序将使用大量这些排序操作，您可以将比较器创建为枚举，这样它们只会被加载一次，此外还可以简化代码

```
private enum  TestComparator implements Comparator<Test> {
 BY_NAME {

    @Override
    public int compare(Test o1, Test o2) {

       //We validate first against null

       return o1n.name.compareTo(o2.name);

    }               
  }
 BY_WHATEVER{

    @Override
    public int compare(Test o1, Test o2) {

       //We validate first against null
      return (o1.whatever<o2.whatever ? -1 : (o1.whatever==o2.whatever ? 0 : 1));
    }               
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T07:56:15.740

做这个：

```
class Test {
public final int amount;
public final int cost;
public final String name;
public final int whatever;
// ...

// TODO: add a constructor to set the fields :-)

    class TestAmountComparator implements Comparator<Test> {
        @Override
        public int compare(Test t1, Test t2) {
            return Integer.valueOf(t1.amount).compareTo(Integer.valueOf(t2.amount))          
        }
    }

    class TestCostComparator implements Comparator<Test> {
        @Override
        public int compare(Test t1, Test t2) {
            return Integer.valueOf(t1.cost).compareTo(Integer.valueOf(t2.cost))          
        }
    } 
```

}

将您的 Test 对象存储在`ArrayList`（或任何其他集合）中，然后以这种方式对它们进行排序：

```
List<Test> list = new ArrayList<Test>(myTest); //your Test list
//sorting
Collections.sort(list, new TestAmountComparator()); //sort by amount
Collections.sort(list, new TestCostComparator()); //sort by cost 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:24:50.963

我的版本：

```
class Test3 implements Comparable<Test3> {
    public int amount;
    //...

    Comparator<Test3> comparator;

    public void setComparator(Comparator<Test3> comparator) {
        this.comparator = comparator;
    }

    @Override
    public int compareTo(Test3 o) {
        return comparator.compare(this, o);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T08:02:11.647

我宁愿实现**Comparable 接口**并在类中实现**compareTo**方法。它提供了跨不同数据结构排序的一致性行为。在这种情况下，仅当需要特殊排序时才会使用**Comparator 接口。**

```
class Test implements Comparable {
    public final int amount;
    public final int cost;
    public final String name;
    public final int whatever;
    // ...
    //add equals ,hashcode, and compareTo method in the class...
    // TODO: add a constructor to set the fields :-)
} 
```

如果实例是唯一的并且实现了可比较，则可以使用 TreeSet。否则，您必须使用列表并使用 Collection.sort 函数对它们进行排序。

您可以根据访问使用情况来决定 DS。如果要按顺序访问元素，请使用 LinkedList 否则用户 ArrayList

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T09:24:15.640

这就是我们如何在不丢失重复项的情况下使用 TreeSet：

```
import java.util.Comparator;
import java.util.TreeSet;

    public class Test {
        int amount;

        Test(int amount) {
            this.amount = amount;
        }

        public static void main(String args[]) throws Exception {
            Comparator<Test> c = new Comparator<Test>() {
                @Override
                public int compare(Test o1, Test o2) {
                    if (o1.amount >= o2.amount) {
                        return 1;
                    }
                    return -1;
                }
            };
            TreeSet<Test> s = new TreeSet<Test>(c);
            s.add(new Test(2));
            s.add(new Test(1));
            s.add(new Test(1));
            for (Test t : s) {
                System.out.println(t.amount);
            }

        }
    } 
```

这打印：

```
1
1
2 
```

# c# - 会话过期或浏览器关闭时在 asp.net 中触发事件

> ID：13488407
> 
> 赞同：0
> 
> 时间：2012-11-21T07:36:56.200
> 
> 标签：c#, asp.net, vb.net

当我的用户会话已过期或我关闭浏览器时，我想在 asp.net 中触发一个事件。实际上，当他/她离开站点时，我想根据登录用户更新数据库中的某些内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:43:54.957

请参阅此处的会话状态事件文档：http: [//msdn.microsoft.com/en-us/library/ms178583.aspx](http://msdn.microsoft.com/en-us/library/ms178583.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:49:18.833

不幸的是，这个问题非常接近“我想在计算机关闭后保存我的数据”......非常困难且不可预测。

*   进程外会话不会触发会话终止事件
*   用户只需关闭浏览器、注销或关闭机器，无需任何通知您的站点
*   甚至更糟 - 他们没有观看广告并积极查看您的网站，而是让浏览器保持打开状态并去喝酒，睡觉......
*   或者浏览器可能会崩溃

现在有时您可以尝试处理浏览器的卸载事件......您可能有足够的时间来发送响应。

可能最可靠的解决方案是让浏览器发出心跳请求，并以这种方式将用户标记为活动状态（在自定义数据库/存储中）。定期检查并标记一段时间内没有发送心跳请求的所有用户...

# single-sign-on - 使用 OAuth + SAML 承载流进行身份验证（无效断言）

> ID：13488408
> 
> 赞同：1
> 
> 时间：2012-11-21T07:36:59.520
> 
> 标签：single-sign-on, saml

我正在尝试使用 OAuth + SAML 承载流进行身份验证 (http://help.salesforce.com/help/doc/en/remoteaccess_oauth_SAML_bearer_flow.htm)

但我被困在我收到无效断言错误的地方：

```
{"error":"invalid_grant","error_description":"invalid assertion"} 
```

这是我的断言：

```
<?xml version="1.0"?>
  <saml:Assertion xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="C625490D-C2B9-15BE-6DFA-7286288D9655" IssueInstant="2012-04-04T06:54:14Z" Version="2.0">
    <saml:Issuer>3MVG9Y6d_Btp4.....d0jnN</saml:Issuer>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
      <ds:SignedInfo>
        <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
        <ds:Reference URI="#C625490D-C2B9-15BE-6DFA-7286288D9655">
          <ds:Transforms>
            <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
            <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          </ds:Transforms>
          <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
          <ds:DigestValue>f187DeCiwFhhH2etlU+5byskey4=</ds:DigestValue>
        </ds:Reference>
      </ds:SignedInfo>
      <ds:SignatureValue>
MIID6zCCAtOgAwI...........4qbvd3sxAQmkhR98FSsQixMI+bTHq9zRgeFu6W5GWsun3tmqNE=
</ds:SignatureValue>
    </ds:Signature>
    <saml:Subject>
      <saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">org2@dot.com
      </saml:NameID>
      <saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
        <saml:SubjectConfirmationData Recipient="https://login.salesforce.com/services/oauth2/token" NotOnOrAfter="2012-11-20T06:35:42Z"/>
      </saml:SubjectConfirmation>
    </saml:Subject>
    <saml:Conditions NotBefore="2012-11-19T06:34:42Z" NotOnOrAfter="2012-11-20T06:35:42Z">
      <saml:AudienceRestriction>
        <saml:Audience>https://login.salesforce.com/services/oauth2/token</saml:Audience>
      </saml:AudienceRestriction>
    </saml:Conditions>
    <saml:AuthnStatement AuthnInstant="2012-11-20T06:35:42Z" SessionIndex="ED868FE5-841D-5192-766C-941A60D6602F">
      <saml:AuthnContext>
        <saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</saml:AuthnContextClassRef>
      </saml:AuthnContext>
    </saml:AuthnStatement>
  </saml:Assertion> 
```

这就是我提出请求的方式：

```
curl https://login.salesforce.com/services/oauth2/token -H "Content-Type='application/x-www-form-urlencoded'" -d "grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer" -d "assertion=`cat saml-assertion.base64`" 
```

我已将断言正确编码为 base64url（以前我收到关于断言中无效字符的错误，我已修复）

请告诉我什么/在哪里可以进一步检查以了解为什么我的断言无效！PS：一切都是从上面 url 的示例断言中复制的，用户名、颁发者和证书由我更改。此外，我将 NotBefore 设置为用户的确切登录时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-14T17:02:47.527

当您发送授权类型值时，也需要对其进行编码。urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Asaml2-bearer

Saml 断言需要是单个断言。它需要像您一样进行 Base64 编码，然后再次删除填充或 urlencode。

> “断言”参数的值必须包含单个 SAML 2.0 断言。SAML 断言 XML 数据必须使用
> base64url 进行编码，其中编码遵循
> RFC 4648 [RFC4648] 第 5 节中的定义，并且填充位设置为零。为了避免后续编码步骤的需要（例如，通过“application/
> x-www-form-urlencoded”[W3C.REC-html401-19991224]），
> base64url 编码的数据不应该换行和填充字符
> （“= ") 不应包括在内。

[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-17#section-2.1](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-17#section-2.1)

使用后编码值发送：

grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Asaml2-bearer& assertion=PHNhbWxwOl...[省略]...ZT4

# android - android layout.xml 文件中编译时间的空指针异常

> ID：13488409
> 
> 赞同：0
> 
> 时间：2012-11-21T07:37:07.617
> 
> 标签：android, android-layout, android-listview, nullpointerexception

当我在布局中使用自定义小部件类型时，出现空指针异常。我的 src 文件中也有该小部件，但找不到此异常出现的原因。

**它在com.siliconithub.android.zoom.ImageZoomView**的编译时间上给出以下错误：

**java.lang.NullPointerException**

**异常详细信息记录在窗口 > 显示视图 > 错误日志中**

这是我的 item_image_detail.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="320dp"
    android:layout_height="fill_parent"
    android:background="#FFF"
    android:minWidth="320dp"
    android:orientation="vertical" >

<LinearLayout
    android:id="@+id/frameImage"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="3dp"
    android:layout_marginRight="3dp"
    android:background="#000"
    android:gravity="center_horizontal" >

    <com.siliconithub.android.zoom.ImageZoomView
        android:id="@+id/imgWithZoom"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</LinearLayout>

<TableRow
    android:id="@+id/rowOptionsImage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="3dp"
    android:layout_marginRight="3dp"
    android:background="@drawable/bg_bottom"
    android:gravity="center" >

    <TextView
        android:id="@+id/totalLikes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingRight="10dp"
        android:textColor="#FFF" />

    <ImageButton
        android:id="@+id/btnLike"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:contentDescription="@string/description_btnlike"
        android:src="@drawable/btn_like" />

    <TextView
        android:id="@+id/totalComments"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/ic_comment"
        android:gravity="center_vertical"
        android:paddingLeft="50dp"
        android:textColor="#FFF" />
</TableRow> 
```

可能是什么原因？

**编辑 ：**

这是它的日志：

```
java.lang.NullPointerException
at com.siliconithub.android.zoom.ImageZoomView.onLayout(ImageZoomView.java:166)
at android.view.View.layout(View.java:11278)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1617)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1401)
at android.view.View.layout(View.java:11278)
at android.view.ViewGroup.layout(ViewGroup.java:4224)
at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
at android.view.View.layout(View.java:11278)
at android.view.ViewGroup.layout(ViewGroup.java:4224)
at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
at android.view.View.layout(View.java:11278)
at android.view.ViewGroup.layout(ViewGroup.java:4224)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
at android.view.View.layout(View.java:11278)
at android.view.ViewGroup.layout(ViewGroup.java:4224)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
at android.view.View.layout(View.java:11278)
at android.view.ViewGroup.layout(ViewGroup.java:4224)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:449)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:326)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

ImageZoomView 代码：

```
public class ImageZoomView extends View implements Observer {

    /** Paint object used when drawing bitmap. */
    private final Paint mPaint = new Paint(Paint.FILTER_BITMAP_FLAG);

    /** Rectangle used (and re-used) for cropping source image. */
    private final Rect mRectSrc = new Rect();

    /** Rectangle used (and re-used) for specifying drawing area on canvas. */
    private final Rect mRectDst = new Rect();

    /** Object holding aspect quotient */
    private final AspectQuotient mAspectQuotient = new AspectQuotient();

    /** The bitmap that we're zooming in, and drawing on the screen. */
    private Bitmap mBitmap;

    /** State of the zoom. */
    private ZoomState mState;

    // Public methods

    /**
     * Constructor
     */
    public ImageZoomView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * Set image bitmap
     * 
     * @param bitmap The bitmap to view and zoom into
     */
    public void setImage(Bitmap bitmap) {
        mBitmap = bitmap;

        mAspectQuotient.updateAspectQuotient(getWidth(), getHeight(), mBitmap.getWidth(), mBitmap
            .getHeight());
        mAspectQuotient.notifyObservers();

        invalidate();
    }

    /**
     * Set object holding the zoom state that should be used
     * 
     * @param state The zoom state
     */
    public void setZoomState(ZoomState state) {
        if (mState != null) {
            mState.deleteObserver(this);
        }

        mState = state;
        mState.addObserver(this);

        invalidate();
    }

    /**
     * Gets reference to object holding aspect quotient
     * 
     * @return Object holding aspect quotient
     */
    public AspectQuotient getAspectQuotient() {
        return mAspectQuotient;
    }

    // Superclass overrides

    @Override
    protected void onDraw(Canvas canvas) {
        if (mBitmap != null && mState != null) {
            final float aspectQuotient = mAspectQuotient.get();

            final int viewWidth = getWidth();
            final int viewHeight = getHeight();
            final int bitmapWidth = mBitmap.getWidth();
            final int bitmapHeight = mBitmap.getHeight();

            final float panX = mState.getPanX();
            final float panY = mState.getPanY();
            final float zoomX = mState.getZoomX(aspectQuotient) * viewWidth / bitmapWidth;
            final float zoomY = mState.getZoomY(aspectQuotient) * viewHeight / bitmapHeight;

            // Setup source and destination rectangles
            mRectSrc.left = (int)(panX * bitmapWidth - viewWidth / (zoomX * 2));
            mRectSrc.top = (int)(panY * bitmapHeight - viewHeight / (zoomY * 2));
            mRectSrc.right = (int)(mRectSrc.left + viewWidth / zoomX);
            mRectSrc.bottom = (int)(mRectSrc.top + viewHeight / zoomY);
            mRectDst.left = getLeft();
            mRectDst.top = getTop();
            mRectDst.right = getRight();
            mRectDst.bottom = getBottom();

            // Adjust source rectangle so that it fits within the source image.
            if (mRectSrc.left < 0) {
                mRectDst.left += -mRectSrc.left * zoomX;
                mRectSrc.left = 0;
            }
            if (mRectSrc.right > bitmapWidth) {
                mRectDst.right -= (mRectSrc.right - bitmapWidth) * zoomX;
                mRectSrc.right = bitmapWidth;
            }
            if (mRectSrc.top < 0) {
                mRectDst.top += -mRectSrc.top * zoomY;
                mRectSrc.top = 0;
            }
            if (mRectSrc.bottom > bitmapHeight) {
                mRectDst.bottom -= (mRectSrc.bottom - bitmapHeight) * zoomY;
                mRectSrc.bottom = bitmapHeight;
            }

            canvas.drawBitmap(mBitmap, mRectSrc, mRectDst, mPaint);
        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom)     {
        super.onLayout(changed, left, top, right, bottom);

        mAspectQuotient.updateAspectQuotient(right - left, bottom - top, mBitmap.getWidth(),
                mBitmap.getHeight());
        mAspectQuotient.notifyObservers();
    }

    // implements Observer
    public void update(Observable observable, Object data) {
        invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:12:22.363

您缺少构造函数：

```
/**
 * Constructors
 */

public ImageZoomView(Context context) {
    this(context, null);
}

public ImageZoomView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public ImageZoomView(Context context, AttributeSet attrs, int defaultStyles) {
    super(context, attrs, defaultSytles);
} 
```

# ios-ui-automation - Monkeytalk：我无法运行 javascript

> ID：13488414
> 
> 赞同：0
> 
> 时间：2012-11-21T07:37:46.650
> 
> 标签：ios-ui-automation

我正在尝试使用 monekytalk 自动化我的 IOS 应用程序，但问题是：

在 Monekytalk 中，我们可以将 mt(monkeytalk script) 导出为 JS (java script) 并对其进行编辑

1stly：当我专注于js时，我没有得到那个运行工具栏但是当我专注于运行工具栏的mt文件时，即使我运行，它运行的是mt脚本文件而不是运行js

我已经浏览了可能的 pdf 并且每个地方都写了如果有 js 文件，则默认情况下会运行 js 文件，但实际上并没有发生。

有人可以帮我吗？我正在为IOS做这件事

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:00:37.070

mt 文件是必须的，您可以将 mt 文件导出到 js 文件，然后使用所有编程逻辑更改 js 文件，然后在 mt 文件中调用该 js 文件...示例 login.mt 文件将具有命令 Script login.js 运行. 只有当 mt 文件被聚焦时，你才能运行到 bar 但是这样你就可以从你的 mt 文件中运行你的 javascript 代码......希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:00:28.680

mt 文件是运行测试所必需的，您可以使用以下命令创建一个 js 文件并将其包含在 mt 文件 JavaScript 选项卡中

加载（“myscript.js”）；

并调用方法。

# java - 无法创建 Android 虚拟设备

> ID：13488419
> 
> 赞同：236
> 
> 时间：2012-11-21T07:38:19.900
> 
> 标签：java, android

![确定按钮不可点击](../Images/f8438f55733b98f86883396236c1fe2c.png)

出于某种原因，当我尝试创建 AVD 时，无法单击“确定”按钮。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-11-21T07:48:17.597

仅仅是因为 CPU/ABI 说“没有为此目标安装系统映像”。您需要安装系统映像。

在 Android SDK 管理器中检查您是否已安装“ARM EABI v7a 系统映像”（对于 4.0 及以上的每个 Android 版本，您必须安装系统映像才能运行虚拟设备）

在您的情况下，仅存在 ARM 系统映像（Android 4.2）。如果您运行的是旧版本，英特尔提供了系统映像（英特尔 x86 ATOM）。您可以在互联网上查看两者之间的性能比较。

在我的情况下（见下图）我没有为 Android 4.2 安装系统映像，而我已经为 4.1.2 安装了 ARM 和 Intel 系统映像

只要我不安装 4.2 系统映像，我就会遇到和你一样的问题。

**更新**：这篇最近的文章[在英特尔架构上加速 Android 模拟器](http://software.intel.com/en-us/articles/speeding-up-the-android-emulator-on-intel-architecture)解释了如何正确使用/安装英特尔系统映像来加速模拟器。

**编辑/跟进**

我在图片中显示的是 Android 4.2，因为这是最初的问题，但对于每个版本的 Android 都是如此。

当然（正如@RedPlanet 所说），如果您正在为 MIPS CPU 设备进行开发，则必须安装“MIPS 系统映像”。

最后，正如@SeanJA 所说，**您必须重新启动 eclipse**才能看到新安装的图像。但对我来说，我总是重新启动一个我更新的软件，以确保它考虑到所有的修改，我认为这样做是一个好习惯。

![在此处输入图像描述](../Images/82f657318581949b827a534f488751d1.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-14T07:59:32.720

完成 ARM EABI v7a 系统映像的安装后必须重新启动 Eclipse。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-03T16:12:18.790

这可能发生在以下情况：

*   **您的机器上安装了多个 Android SDK 副本。** 您可能正在为一个 Android SDK 副本更新可用的图像和设备，并尝试在另一个副本中调试或运行您的应用程序。

    如果您使用的是 Eclipse，请查看您的**“Preferences | Android | SDK Location** ”。确保它是您期望的路径。如果不是，请将路径更改为指向您认为安装了 Android SDK 的位置。

*   您的模拟器中没有 Android 设备设置，如本页其他答案中所述。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-26T21:46:50.693

对于 Ubuntu 并运行 android-studio run 来安装软件包（默认情况下不安装）：

```
android update sdk 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-15T12:55:03.537

我在使用 4.2.2 图像创建 AVD 时遇到了同样的问题，我通过执行以下操作解决了它：

1.  检查 adt-bundle-windows-x86_64-20131030\sdk\system-images\android-17 中是否存在“默认”文件夹。

2.  如果存在，则将“默认”文件夹的内容（下载的系统映像）移动到 adt-bundle-windows-x86_64-20131030\sdk\system-images\android-17。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-30T14:08:47.850

我想用最近的 Android Studio 的截图来更新这个问题。花了一些时间才找到安装新系统映像的位置。

您可以通过两条路径之一进入 SDK 管理器。选项 1\. 工具 > Android > SDK Manager 选项 2\. Android Studio > Preferences > Appearance & Behavior > System Settings > Android SDK（适用于 Mac；适用于其他人。）

在“SDK 平台”窗格中，选中“显示包”框以查看系统映像。

选择你想要的，点击“应用”，瞧！

[![在此处输入图像描述](../Images/69ded292fc3a2a38b1a0e996edd96664.png)](https://i.stack.imgur.com/uun4b.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-05T21:39:30.917

我必须将名为“default”的文件夹中的文件夹移动到 android-## 文件夹，以便 Eclipse 可以看到图像。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-20T13:11:27.193

此错误可能与最新的 Android Wear 技术有关。我试图为穿戴 SDK 启动一个模拟器，为下周做准备。API 级别仅在 4.4.2 KitKat 的最新版本中支持它。

因此，如果您使用诸如可穿戴设备之类的东西，它会在 Eclipse 中以 2.3.3 Gingerbread 的形式启动默认设置。确保您的目标与支持的最低目标相匹配。对于可穿戴设备，它是最新的 19 KitKat。

# php - PHP PDO bindValue 使用 MySQL IN()？

> ID：13488423
> 
> 赞同：0
> 
> 时间：2012-11-21T07:38:37.357
> 
> 标签：php, mysql, pdo

我的这个查询什么也没返回。它不会抛出任何错误。在这个网站上找不到解决方案。这里有什么问题？

```
$query = "SELECT * FROM `votes` WHERE `tags` IN (:tags)";
$stmt = $dbh->prepare($query);
$stmt->bindValue(':tags', 'one, two, three');
$stmt->execute();
// 0 results, should be more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:14:39.123

无论您使用的是 bindParam() 还是 bindValue()，这都不会满足您的要求。

SQL 查询参数仅代替*一个值*。您不能绑定包含逗号的字符串并将其解释为多个值。列表中的每个不同值都需要一个参数占位符。

此外，您根本不需要使用 PDO 绑定参数值。您可以将数组传递给execute()。在这种情况下，我将使用位置参数而不是命名参数。PDO 支持两者，但不要将它们混合在一个查询中。

```
$query = "SELECT * FROM `votes` WHERE `tags` IN (?, ?, ?)";
$stmt = $dbh->prepare($query);
$params = explode(', ', 'one, two, three');
$stmt->execute($params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:45:00.143

您的绑定值有错误。

```
$stmt->bindValue(':tags', 'one, two, three'); 
```

应该

```
$stmt->bindValue(':tags', "'one', 'two', 'three'"); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-21T07:49:26.387

尝试改用 PDO:: [bindParam](http://php.net/manual/en/pdostatement.bindparam.php)。

```
$query = "SELECT * FROM `votes` WHERE `tags` IN (:tags)";
$stmt = $dbh->prepare($query);
$stmt->bindParam(':tags', implode(",", array('one, two, three')));
$stmt->execute(); 
```

尽管使用 implode 有点违背了绑定的原始目的，并且绑定了字符串化数组而不是原始数组。

# javascript - Javascript翻译/解释

> ID：13488425
> 
> 赞同：-2
> 
> 时间：2012-11-21T07:38:45.650
> 
> 标签：javascript, forms

如果有人能如此友善并帮助我理解这个脚本，将不胜感激。

它是什么意思，它有什么作用？

```
<iframe style='display:none;width:0px; height:0px;' src='about:blank'
name='gform_ajax_frame_2' id='gform_ajax_frame_2'></iframe>
<script type='text/javascript'>
  function gformInitSpinner_2() {
    jQuery('#gform_2').submit(function () {
      jQuery('#gform_submit_button_2').attr('disabled', true).after('<' + 'img id="gform_ajax_spinner_2"  class="gform_ajax_spinner" src="content/plugins/gravityforms/images/spinner.gif" alt="" />');
      jQuery('#gform_wrapper_2 .gform_previous_button').attr('disabled', true);
      jQuery('#gform_wrapper_2 .gform_next_button').attr('disabled', true).after('<' + 'img id="gform_ajax_spinner_2"  class="gform_ajax_spinner" src="content/plugins/gravityforms/images/spinner.gif" alt="" />');
    });
  }
  jQuery(document).ready(function ($) {
    gformInitSpinner_2();
    jQuery('#gform_ajax_frame_2').load(function () {
      var contents = jQuery(this).contents().find('*').html();
      var is_postback = contents.indexOf('GF_AJAX_POSTBACK') >= 0;
      if (!is_postback) {
        return;
      }
      var form_content = jQuery(this).contents().find('#gform_wrapper_2');
      var is_redirect = contents.indexOf('gformRedirect(){') >= 0;
      jQuery('#gform_submit_button_2').removeAttr('disabled');
      if (form_content.length > 0) {
        jQuery('#gform_wrapper_2').html(form_content.html());
        jQuery(document).scrollTop(jQuery('#gform_wrapper_2').offset().top);
        if (window['gformInitDatepicker']) {
          gformInitDatepicker();
        }
        if (window['gformInitPriceFields']) {
          gformInitPriceFields();
        }
        var current_page = jQuery('#gform_source_page_number_2').val();
        gformInitSpinner_2();
        jQuery(document).trigger('gform_page_loaded', [2, current_page]);
      } else if (!is_redirect) {
        var confirmation_content = jQuery(this).contents().find('#gforms_confirmation_message').html();
        if (!confirmation_content) {
          confirmation_content = contents;
        }
        setTimeout(function () {
          jQuery('#gform_wrapper_2').replaceWith('<' + 'div id=\'gforms_confirmation_message\' class=\'gform_confirmation_message_2\'' + '>' + confirmation_content + '<' + '/div' + '>');
          jQuery(document).scrollTop(jQuery('#gforms_confirmation_message').offset().top);
          jQuery(document).trigger('gform_confirmation_loaded', [2]);
        }, 50);
      } else {
        jQuery('#gform_2').append(contents);
        if (window['gformRedirect']) gformRedirect();
      }
      jQuery(document).trigger('gform_post_render', [2, current_page]);
    });
  });
</script>
<script type='text/javascript'>
  jQuery(document).ready(function () {
    jQuery(document).trigger('gform_post_render', [2, 1])
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:51:34.897

要回答您的问题：

它检查表单以查看是否可以呈现，如果满足所有需求，它会在 iframe 中呈现表单。

要知道什么元素做什么：研究[Jquery Api](http://api.jquery.com/)并使用一些你自己的大脑逻辑。

# marionette - 复合视图中的木偶 children.findByIndex(x)？

> ID：13488428
> 
> 赞同：2
> 
> 时间：2012-11-21T07:38:49.750
> 
> 标签：marionette

对 javascript 和骨干木偶来说相当新，我似乎无法弄清楚如何做到这一点。我想按索引从复合视图中选择一个子视图（或文档所说的任何其他选择器可用于继承的集合视图（来自保姆）。）。

即来自myCompositeView：

```
someMethod: function(index){
    this.children.findByIndex(index);
 },
 ... 
```

如何从compositeView 访问collectionView，以便我可以findByIndex 或findByModel 等并获得对实际Marionette View 的引用？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:35:18.697

确保您使用的是 Marionette v1.0.0-beta6，因为这是引入您需要的功能的地方。

CompositeView 直接从 CollectionView 扩展而来，因此`this.children.findByIndex`只要您使用正确版本的 Marionette，调用应该可以工作。

# haskell - 使用 Haskell 子集的无限权力列表

> ID：13488431
> 
> 赞同：0
> 
> 时间：2012-11-21T07:39:09.687
> 
> 标签：haskell, functional-programming

我需要创建一个函数“powers”，它接受一个数字 n 并将该数字的无限列表返回到每个数字的幂，例如

```
powers 2 = 2,4,8,16,32...... 
```

我需要使用非常特定的语言子集来执行此操作，其中我唯一可用的内置函数是：div、mod、even、odd、head、tail、not、null、length、reverse、elem、map、filter、foldr、sum , product, take, drop, takewhile, dropWhile, zipWith 和 from。

该子集也没有 ^ 运算符。

还有一些更重要的限制：

*   代码不得超过 1 行，长度超过 80 个字符
*   不允许使用“辅助函数”，即我不能编写另一个函数以在此定义中使用。

到目前为止，我的想法是沿着这些思路：

```
powers = \n -> map (\x -> "some function to get n to the power of x") (from 1) 
```

但我无法弄清楚如何在没有辅助函数的情况下让函数执行此操作。

例如，如果我要使用返回数字 x 的无限列表的函数 inflist，那么我可以执行以下操作。

```
powers = \n -> map (\x -> product(take x (inflist n))) (from 1) 
```

但我不能这样做或任何类似的事情，因为我不能使用那个功能。

抱歉，如果符号与普通的 haskell 不同，它是使用此符号的非常严格的核心 haskell 子集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:42:55.923

这是一个递归问题。

```
powers n = n : map (* n) (powers n) 
```

（你可以使用`:`吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T02:48:38.010

当洞察力来临时，这很有趣。在列表中生成连续更长的 2 重复

```
[ [ 2 | y <- [1..x]] | x <- [1..]] 
```

然后取每个列表的乘积。

```
map product [ [ 2 | y <- [1..x]] | x <- [1..]] 
```

一定要在调用之前使用 take x ，因为我使用一个 mod 和多个 mod 函数来限制列表。

如果允许迭代。

```
take 24 $ iterate (2*) 2 
```

将生成列表。

**编辑 2018 年 4 月 4 日**

一个无限**递归函数**，可能是您要填写函数的内容。有可能：

```
pow l = l ++ pow [(last l * 2)] 
```

要生成一个列表，绝对有必要组装一个列表，并且必须使用列表的最后一个元素来计算序列中的下一个元素。这也必须与 take 一起运行。以下命令也以 1 开始列表。它可以以任何数字开始，例如 64 或 63。我尝试将最后一个值作为参数传递，但函数不会生成列表。有一个选择，使用 ':' 而不是 '++' 但它会生成列表中的每个元素。要生成值列表而不是列表列表，请在 'take' 之前使用 'concat $' 来清理它。

```
take 10 $ pow [1] 
```

# jquery - 在不隐藏图像的情况下取消绑定 jCrop

> ID：13488433
> 
> 赞同：3
> 
> 时间：2012-11-21T07:39:13.283
> 
> 标签：jquery, jcrop

我制作了一个图像编辑器，可让您选择性地裁剪正在使用的图像（使用 Jcrop）。

```
$('#canvas img').Jcrop({
    bgColor: 'black',
    bgOpacity: .4
}, function () {
    jcrop_api = this;
}); 
```

出于这个原因，我需要随意绑定和取消绑定Jcrop，但是我注意到当我调用时

```
jcrop_api.destroy() 
```

它也隐藏了 Jcrop 绑定的图像。我是否以正确的方式使用它？有没有解决的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:43:20.093

**解决方案**

从那以后，我发现这是不可能的。但是，您可以这样做：

初始化 jCrop 后，使用以下命令清除选择并停止图像不再“可选择”：

```
 jcrop_api.release();
    jcrop_api.disable(); 
```

然后使用以下命令再次启用它：

```
 jcrop_api.enable(); 
```

# ios - 配置 iAD 后应用程序在设备上崩溃，但在模拟器上没有

> ID：13488438
> 
> 赞同：3
> 
> 时间：2012-11-21T07:39:40.357
> 
> 标签：ios, cocos2d-iphone, ios6, iad

我正在 cocos2d 上创建一个应用程序。我配置了 iAd，但我不知道我的应用程序在设备上崩溃了，但是当我在模拟器上运行应用程序时它工作正常。

错误：

```
[ADBannerView initWithAdType:]: unrecognized selector sent to instance 
```

代码：

```
- (void)createAdBannerView {
    Class classAdBannerView = NSClassFromString(@"ADBannerView");
    if (classAdBannerView != nil) {

        _adBannerView = [[classAdBannerView alloc] initWithAdType:ADAdTypeBanner];

        [_adBannerView setPosition:ccp([[CCDirector sharedDirector] winSize].width/2, -33)];

        [_adBannerView setDelegate:self];

        [[[CCDirector sharedDirector] view] addSubview:_adBannerView];

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:12:00.503

initWithAdType**需要**iOS 6.0 或更高版本。如果您在 iOS 5.x 设备上进行测试，您会看到崩溃。在旧设备上使用旧的方式初始化 ADBannerViews（例如，initWithFrame）。

这是 initWithAdType 的 iOS 6.0 声明：

```
- (id)initWithAdType:(ADAdType)type __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_6_0); 
```

要支持创建 iAd 横幅的旧 iOS5 方式，您需要添加：

```
#import <iAd/ADBannerView_Deprecated.h> 
```

示例代码：

```
ADBannerView *iAdView = nil;
if ([[ADBannerView class] instancesRespondToSelector:@selector(initWithAdType:)]) { // iOS 6.0
    iAdView = [[[ADBannerView alloc] initWithAdType:ADAdTypeBanner] autorelease];
} else { // iOS 4.x-5.x
    iAdView = [[[ADBannerView alloc] initWithFrame:CGRectMake(0, 0, appleWidth_, appleHeight_)] autorelease];
    iAdView.currentContentSizeIdentifier = isLandscape_ ? ADBannerContentSizeIdentifierLandscape : ADBannerContentSizeIdentifierPortrait;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:47:15.893

我不知道您为什么使用这种方式，但以下是 Apple 文档中提到的方式：

```
ADBannerView *adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
adView.delegate = self;
[[[CCDirector sharedDirector] view] addSubview:adView]; 
```

# android - 过滤具有多个文本视图的列表视图

> ID：13488441
> 
> 赞同：0
> 
> 时间：2012-11-21T07:39:56.617
> 
> 标签：android, android-layout

我有一个带有 3 个 TextView 的 ListView。我想构建一个过滤器来过滤第一个 TextView。但是我构建的过滤器现在正在过滤 ListView 中的所有项目。有没有办法只过滤特定的TextView？

```
 ...
    filterText = (EditText) findViewById(R.building_list.search_box);
    filterText.addTextChangedListener(filterTextWatcher);
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] {KEY_NAME, KEY_DESC, KEY_DATE, KEY_LINK }, new int[] {
             R.id.name, R.id.desciption, R.id.date, R.id.link});
    Filter filterx = ((Filterable) adapter).getFilter();
    setListAdapter(adapter);
        ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:11:30.083

将 3 的内容`TextView`放在一个名为 的类中`Data`：

```
public class Data {
    public final String text1;
    public final String text2;
    public final String text3;

    public Data(String t1, String t2, String t3){
      this.text1 = t1;
      this.text2 = t2;
      this.text3 = t3;
    }

    @Override
    public final String toString(){
      return text1;
    }
} 
```

现在`Data`在您的适配器中使用一组对象。适配器的默认`Filterable`实现使用`toString()`其对象进行过滤，在本例中为`text1`. 因此，适配器将基于`text1`.

# c++ - XCode附加过程/分离过程（以编程方式分离调试器）

> ID：13488444
> 
> 赞同：2
> 
> 时间：2012-11-21T07:40:19.730
> 
> 标签：c++, c, xcode, lldb

我使用 XCode 4.5 调试插件，使用 Info > Launch > Wait for ??? 启动和调试工作很好。

但是，每次我点击停止按钮或按下播放按钮时，我附加插件的应用程序都会被杀死（杀死：9）。如果我附加到一个进程，播放或停止按钮将我与该进程分离不是逻辑吗？

有没有一种方法可以让我在 Xcode 中改变这种行为，而不是每次都在 lldb 控制台 >> process detach 上输入以使其继续？

我想的是在我的主应用程序（我附加 XCode 的那个）中添加一些代码来添加一段代码来断开调试器是否可能？

[ 编辑 ]

找到此代码来确定是否附加了调试器：

```
bool debugger_attached( void )
{
    int mib[ 4 ];
    struct kinfo_proc info;
    size_t size;

    info.kp_proc.p_flag = 0;

    mib[0] = CTL_KERN;
    mib[1] = KERN_PROC;
    mib[2] = KERN_PROC_PID;
    mib[3] = getpid();

    size = sizeof( info );

    sysctl( mib, sizeof( mib ) / sizeof( *mib ), &info, &size, NULL, 0 );

    return ( ( info.kp_proc.p_flag & P_TRACED ) != 0 );
} 
```

现在如何将调试器与当前进程分离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:36:14.770

我认为从后续评论中已经清楚地表明，这种行为——Xcode 没有简单的 GUI 手势来从进程中分离——是今天的工作方式。至少在一个用例中这是正确的行为——在你的 Mac 上进行 iOS 模拟器进程调试时，Xcode/lldb 不会直接启动模拟器应用程序——它附加到一个已经启动的进程。在这种情况下，当您在 Xcode 中按下停止按钮时，您希望模拟的应用程序停止运行。这是一个用户不知道/不应该知道的实现细节，但行为有一些逻辑。

对于它的价值，您可以在`~/.lldbinit`文件中创建一个别名，例如

```
command alias det process detach 
```

现在在调试器控制台中，您可以键入只是`det`为了分离。（或您要设置的任何别名）。它不像在 GUI 中按一个按钮那么简单，但它比`process detach`.

# c# - 带有非 ui 应用程序的 Geckofx

> ID：13488450
> 
> 赞同：2
> 
> 时间：2012-11-21T07:40:51.253
> 
> 标签：c#, webkit, geckofx

我是 geckofx 的新手，想知道我是否可以在非 ui 应用程序（如 Windows 控制台或 Web 服务）中使用它。它将在后台运行以获取 html 内容？

我一直在使用网络浏览器，但无法阻止它弹出新窗口。

此外，任何想法与[webkit2](http://sourceforge.net/projects/webkit2net/)做同样的事情，它根本没有文档和示例代码，但它似乎是我最需要的，因为它与我不需要的 UI 进程隔离。不幸的是，它需要安装 Apple Application Support，我无法接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:42:41.807

我能够通过调用该`CreateControl`方法来做到这一点。

```
GeckoWebBrowser obj = new GeckoWebBrowser();
obj.CreateControl(); 
```

显然，调用`CreateControl`会强制创建句柄，因此一切都可以像在可见窗口中一样工作。

此外，您可能需要调用`Application.DoEvents`几次，主要是在您要求浏览器执行某些操作之后。

# eclipse - 在eclipse中导入现有的heroku项目

> ID：13488451
> 
> 赞同：1
> 
> 时间：2012-11-21T07:41:00.190
> 
> 标签：eclipse, heroku, eclipse-plugin

我正在使用 Eclipse 来处理 heroku。好吧，在将应用程序导入 eclispe 时，总是会收到此错误“通过转到首选项将您的 SSH 密钥关联到您的 Heroku 帐户”。甚至尝试创建一个新的 ssh 密钥并将其添加到 heroku 帐户。但是我仍然一次又一次地得到这个错误。任何想法？

# google-maps - 标记管理器在 Maps API 3.10 中不起作用

> ID：13488452
> 
> 赞同：5
> 
> 时间：2012-11-21T07:41:21.360
> 
> 标签：google-maps, google-maps-api-3, markermanager

标记管理器不适用于 Google Maps API v3.10 和当前版本。

如果您检查它的示例页面 [http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/examples/google_northamerica_offices.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/examples/google_northamerica_offices.html) 您会看到地图没有被缩放控制改变，并且没有任何标记。您将看到以下 JavaScript 错误：

> 未捕获的类型错误：无法调用未定义的方法“substr”

但是，如果您为 version 加载 Maps API `v=3.9`，那么一切都会好起来的（我在测试页面上检查过）。

我认为经理的脚本文件中有一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:31:25.243

标记管理器与 Google Maps API v 3.10 及更高版本不兼容。在包含 Google Maps 时指定版本或将 markermanager.js（版本 1.0）中的第 98 行从

```
if (typeof map.mapTypes.get(sType) === 'object' && typeof map.mapTypes.get(sType).maxZoom === 'number') { 
```

至

```
if (sType != "constructor" && typeof map.mapTypes.get(sType) === 'object' && typeof map.mapTypes.get(sType).maxZoom === 'number') { 
```

# http-status-code-404 - feedburner 饲料中的链接断开

> ID：13488455
> 
> 赞同：1
> 
> 时间：2012-11-21T07:41:41.677
> 
> 标签：http-status-code-404, feedburner

我们已经设置了一个 RSS 提要[http://www.beautysouthafrica.com/RSS/BeautySA-RSS-Feed.aspx](http://www.beautysouthafrica.com/RSS/BeautySA-RSS-Feed.aspx) 并将其与我们的 feedburner 帐户[http://feeds.feedburner.com/beautySA](http://feeds.feedburner.com/beautySA)相关联。

但是，如果您单击 feedburner 提要中的链接，它们会返回 404 错误。是否有我设置不正确的 feedburner 设置，或者是网站内的 feed 导致了这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:03:00.247

当我在他尝试订阅的浏览器中登录 Google Apps 帐户时，我遇到了用户遇到此问题。如果 Google Apps 域的管理员没有为该域开启 FeedBurner 服务，您就会收到此错误消息。

就解决方案而言，您可以让您的 Google Apps 域管理员打开该服务，尽管他们可能不想这样做。否则，我认为您只能使用不同的电子邮件地址。

# php - 检查不同数组或变量上的相同值

> ID：13488461
> 
> 赞同：0
> 
> 时间：2012-11-21T07:42:11.290
> 
> 标签：php, arrays, variables

我有 2 个等值的变量：

```
 $word1 = 'a, b, c, d';
    $word2 = 'b, c, d, a'; 
```

我想检查这两个变量是否具有完全相同的值。如何检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:49:33.187

你可以使用[array_dif()](http://php.net/manual/en/function.array-diff.php)

例子

```
<?php

$word1 = 'a, b, c, d';
$word2 = 'b, c, d, a';

$array1 = explode(', ', $word1);
$array2 = explode(', ', $word2);
$result = array_diff($array1, $array2);

print_r($result);

?> 
```

[活生生的例子](http://codepad.org/FpuEqRwP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:47:32.880

使用此代码，您必须在数组中获得相同的值

```
 <?php

 $word1 =array('a, b, c, d');
 $word2 =array('b, c, d, a');
 $data = array_intersect($word1, $word2);

  ?> 
```

# android - 不能使用paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN)); 在安卓中

> ID：13488463
> 
> 赞同：0
> 
> 时间：2012-11-21T07:42:30.917
> 
> 标签：android, porter-duff

我正在我的图像中制作反射效果，但我不能使用这条线

```
 paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN)); 
```

有一条红线是“DST_IN”，表示它无法解析或不是字段。除了我，还有谁可以使用它？是否有任何插件等可以使用该行？我试图搜索它，但我找不到任何使用它的方法。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:48:55.473

解决了：

把它改成这个

paint.setXfermode（新 PorterDuffXfermode（PorterDuff.Mode.DST_IN））；

# javascript - 将字符串转换为 javascript 对象

> ID：13488470
> 
> 赞同：0
> 
> 时间：2012-11-21T07:43:03.940
> 
> 标签：javascript, jquery

我希望我的用户在输入字段中输入一些文本，然后在单击该按钮时单击“评估”按钮，如果可以的话，我会将输入的文本转换为 JavaScript 对象，并将显示它的所有成员（属性和函数）。

例如，如果用户输入`"document"`或我将分别显示和`"window"`的所有成员。`document``window`

遍历对象的成员已经完成，但是当用户在输入文本字段中输入一些文本并且我得到的文本比该值被视为字符串时，我当然如何将该文本转换为像`"document"`to`document`和`"window"`to的对象`window`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:45:03.243

您可以使用“评估”。 **编辑：**感谢@Victor 和@Cerbrus 的评论指出这里不需要**eval 。**您也可以使用`window[input]`.

```
var input = "document";
var obj = eval(input);
for (var prop in obj) console.log(prop + ": " + obj[prop]); 
```

如果它是另一个对象（即全局对象）的成员，那么您可以使用括号表示法：

```
var hello = "world";
var variableName = "hello";
console.log(JSON.stringify(window[variableName])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:23:38.893

建议的解决方案不适用于子属性（例如 window.document.body）。我写了一个小 jsFiddle，它应该适用于大多数情况。它当然缺乏真正的错误检查，但应该是一个不错的起点[http://jsfiddle.net/a6A4m/1/](http://jsfiddle.net/a6A4m/1/)

```
 var showProperties = function(text) {
        var output = '';
        var object = window;

        // if it isn't the global window object
        if (text !== 'window') {
            var parts = text.split('.');

            // Since we're using pop, we need to reverse it first.
            parts = parts.reverse();

            while (parts.length > 0) {
                object = object[parts.pop()];
            }
        }

        $('#content').html(getOutput(object));
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:48:04.120

如果你得到这样的输入值

```
var selector = $('input').val(); 
```

那么对象将是

```
$(selector) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T18:59:42.777

如果您的字符串是 JSON 格式，或者字符串是 javascript 对象的名称，那么我在这里看到 jQuery.parseJSON 将字符串转换为对象的方法。

```
var s2o = (new Function("return " +val+";"))(); 
```

假设 val 包含来自文本输入的值。

这有点像使用 Function 对象作为“编译器”，这样你就可以返回一个 javascript 对象。

如果用户传入**文档**，则给出`document`对象；
如果用户传入**{id:1, name:"test"}**，它会给出该对象。

# tridion - 使用数据库查询的 SDL Tridion 邮件统计

> ID：13488477
> 
> 赞同：2
> 
> 时间：2012-11-21T07:43:46.393
> 
> 标签：tridion

SDL tridion 不提供任何有助于以所需格式获取多个出版物的邮件统计报告的功能。我正在使用以下查询（请忽略查询优化）来获得所需的结果，但它与界面上显示的不同。例如，我在接口上访问的链接计数为 67，而在 DB 中使用以下查询为 97。似乎我缺少一些过滤器。任何关于这里缺少的东西的指针都会很棒。

```
/*DB Query*/
select e.EMAIL_LINK_URL, COUNT(e.EMAIL_LINK_URL) as maxcount 
from Mailings a, EMAILS b, EMAILSTATUSES c, EMAILSTATUS_TYPES d, EMAIL_LINKURL e
where a.ID=b.MAILING_ID 
and b.ID=c.EMAIL_ID 
and c.STATUS_ID = d.ID 
and c.EMAIL_LINK_ID = e.ID 
and c.STATUS_ID = 5 (/*Status Type - 5 is for link accessed*/) 
and a.ID = 2628 (/*Mailing ID*/)
group by e.EMAIL_LINK_URL 
order by maxcount desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:34:23.513

尽管编写自己的特定数据库查询可能比为每个邮件查询 API 执行得更好——正如您发现的那样，您很容易错过一些东西。完成的查询和数据库表的设计也可能在未来版本中更改，恕不另行通知。

API 面向未来并受支持；直接数据库查询不是（尽管我们通常不担心只读查询）

出于上述原因，我建议任何寻找此类信息的人首先使用 Audience Management API 进行尝试。

# php - 需要magento中每个标记产品的计数

> ID：13488482
> 
> 赞同：0
> 
> 时间：2012-11-21T07:44:05.530
> 
> 标签：php, magento, tags, magento-1.7

我需要获取标记产品的数量。我正在获取名称和网址。我正在使用这段代码：

```
<?php if( sizeof($this->getTags()) > 0 ): ?>
    <ul class="tags-list" style="margin-left:10px;">
        <?php foreach ($this->getTags() as $_tag): ?>
            <li><a href="<?php echo $_tag->getTaggedProductsUrl() ?>" style="font-size:<?php echo $_tag->getRatio()*70+100 ?>%; text-decoration:none; font-family:Trebuchet MS;"><?php echo $this->htmlEscape($_tag->getName()) ?></a>**(want the count here like 5)**</li>
        <?php endforeach; ?>
    </ul>
<?php else: ?>
    <p class="note-msg"><?php echo $this->__('There are no tags available.') ?></p>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:03:44.777

这将显示每个标签的计数，前提是您有一个类似的方法`getTagCount()`，它将显示给定标签的计数。

***函数可以定义为：*

```
//only an idea
<?php
public function getTagCount() {
    return count( $this->tag );
}
?>

<?php if( sizeof($this->getTags()) > 0 ): ?>
    <ul class="tags-list" style="margin-left:10px;">
        <?php foreach ($this->getTags() as $key => $_tag): ?>
            <li><a href="<?php echo $_tag->getTaggedProductsUrl() ?>" style="font-size:<?php echo $_tag->getRatio()*70+100 ?>%; text-decoration:none; font-family:Trebuchet MS;"><?php echo $this->htmlEscape($_tag->getName()) ?></a><?php echo $_tag->getTagCount();?></li>
        <?php endforeach; ?>
    </ul>
<?php else: ?>
    <p class="note-msg"><?php echo $this->__('There are no tags available.') ?></p>
<?php endif; ?> 
```

希望能帮助到你。

# winapi - Windows 中的两个进程单个生产者/单个消费者。互斥量、事件或信号量哪个更好

> ID：13488489
> 
> 赞同：0
> 
> 时间：2012-11-21T07:44:45.197
> 
> 标签：winapi, synchronization, ipc, producer-consumer

我可以使用任何一种原语来使其工作，但我想从性能的角度来看，哪种原语更适合这种情况。

我只需要同步两个进程。总是有两个，不多也不少。一个写入内存映射文件，而另一个以生产者/消费者方式读取。我关心性能，考虑到场景有多简单，我想我可以使用一些轻量级的东西，但我不确定哪个更快，但对于这种场景仍然足够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:48:26.610

第一点：它们都是内核对象，所以它们都涉及从用户模式到内核模式的切换。这本身就产生了足够的开销，以至于您不太可能注意到它们之间在速度或类似方面的任何真正差异。因此，哪个更可取将在很大程度上取决于您如何在共享内存区域中构建数据，以及您如何使用它。

让我们从可能是最简单的情况开始：共享内存区域形成了瓶颈。消费者不阅读的所有时间，生产者都在写，反之亦然。至少在最初，这似乎是我们可以使用单个互斥锁的情况。生产者等待互斥体，写入数据，释放互斥体。消费者等待互斥体，读取数据，释放互斥体。这种情况一直持续到一切完成。

不幸的是，虽然这可以防止生产者和消费者同时使用共享区域，但它并*不能*确保正确操作。例如：生产者写入一个充满信息的缓冲区，然后释放互斥体。然后它再次等待互斥锁，所以当读取器完成后，它可以写入更多数据——但在这一点上，不能保证消费者将是下一个获得互斥锁的人。生产者可能会立即将其取回，并*在*其刚刚生成的内容上写入更多数据，因此消费者将永远不会看到以前的数据。

防止这种情况的一种方法是使用几个事件：一个从生产者到消费者说有数据等待读取，另一个从消费者到生产者说缓冲区中的所有数据都已被读取读。在这种情况下，生产者等待其事件，消费者只有在完成读取数据时才会设置该事件。生产者然后写入一些数据，并通知消费者的事件说一些数据已准备好。消费者读取数据，然后向生产者发送事件信号，以便循环继续。

只要您只有一个生产者和一个消费者*，*并将整个数据视为一起控制的单个“块”数据，这就足够了。但是，这*可能*会导致问题。例如，让我们考虑一个 Web 服务器前端作为生产者，后端作为消费者（以及一些将结果传递回 Web 服务器的单独机制）。如果缓冲区小到只能容纳一个请求，则生产者可能必须在消费者处理一个请求时缓冲几个传入的请求。每次消费者准备好处理请求时，生产者必须停止它正在做的事情，将请求复制到缓冲区，并让消费者知道它可以继续。

The basic point of separate processes, however, is to let each proceed on its own schedule as much as possible. To allow that, we might make room in our shared buffer for a number of requests. At any given time, some number of those slots will full (or, looking at it from the other direction, some number will be free). For this case, we just about need a counted semaphore to track those slots. The producer can write something any time at least one slot is free. The consumer can read something anytime at least one slot is filled.

Bottom line: the choice isn't about speed. It's about how your use/structure the data and the processes' access to it. Assuming it's really as simple as you describe, the pair of events is probably the simplest mechanism that will work.

# c++ - K-最近邻 C/C++ 实现

> ID：13488497
> 
> 赞同：9
> 
> 时间：2012-11-21T07:45:04.330
> 
> 标签：c++, c, parallel-processing, nearest-neighbor, knn

在哪里可以找到 k-最近邻算法的串行 C/C++ 实现？
你知道任何有这个的图书馆吗？
我找到了 openCV，但实现已经是并行的。
我想从串行实现开始，并使用 pthreads openMP 和 MPI 将其并行化。

谢谢，
亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:03:41.903

安呢？[http://www.cs.umd.edu/~mount/ANN/](http://www.cs.umd.edu/~mount/ANN/)。我曾经使用过 kdtree 实现，但还有其他选择。

从网站上引用：“ANN 是一个用 C++ 编写的库，它支持数据结构和算法，用于在任意高维度上进行精确和近似最近邻搜索。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:37:47.133

我为最近邻搜索的 KD 树编写了[C++ 实现。](https://github.com/gvd/kdtree)您可以通过添加优先级队列轻松地将其扩展到 K 近邻。

**更新：**我添加了对 N 维中 k-最近邻搜索的支持

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:47:36.957

实现这一点的最简单方法是遍历所有元素并将 K 存储在最近的位置。（只是比较）。复杂性`O(n)`不是很好，但不需要预处理。所以现在真的取决于你的应用程序。您应该使用一些空间索引来划分您搜索 knn 的区域。对于某些应用程序基于网格的空间结构就可以了（只需将您的世界划分为固定块并仅在关闭块内搜索）。当您的实体均匀分布时，这很好。更好的方法是使用像 kd-tree 这样的层次结构......这真的完全取决于你需要什么

有关包括伪代码在内的更多信息，请查看这些演示文稿：

[http://www.ulozto.net/xCTidts/dpg06-pdf](http://www.ulozto.net/xCTidts/dpg06-pdf)

[http://www.ulozto.net/xoh6TSD/dpg07-pdf](http://www.ulozto.net/xoh6TSD/dpg07-pdf)

# node.js - NodeJS readdir 并需要相对路径

> ID：13488501
> 
> 赞同：7
> 
> 时间：2012-11-21T07:45:13.200
> 
> 标签：node.js, module

假设我有这个目录结构

```
/Project
   /node_modules
      /SomeModule
         bar.js
   /config
      /file.json
   foo.js 
```

-

```
foo.js:
require('bar'); 
```

-

```
bar.js:
fs.readdir('./config'); // returns ['file.json']
var file = require('../../../config/file.json'); 
```

readdir 从被包含的文件中工作（foo.js）并要求从它被调用的文件（bar.js）中工作是否正确？

还是我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T16:05:49.163

正如[Dan D.](https://stackoverflow.com/users/388787/dan-d)所说，fs.readdir`process.cwd()`用作起点，而`require()`使用`__dirname`. 如果您愿意，您始终可以从一条路径解析到另一条路径，获得一条绝对路径两者的解释方式相同，如下所示：

```
var path = require('path');
route = path.resolve(process.cwd(), route); 
```

这样，如果`__dirname`用作起点，它将忽略`process.cwd()`，否则它将使用它来生成完整路径。

例如，假设`process.cwd()`是`/home/usr/node/`：

*   如果`route`是`./directory`，它会变成`/home/usr/node/directory`
*   如果`route`是`/home/usr/node/directory`，它将保持原样

我希望它对你有用：D

# opengl - 阴影贴图中的尾随阴影

> ID：13488502
> 
> 赞同：1
> 
> 时间：2012-11-21T07:45:13.473
> 
> 标签：opengl, glsl

我已经创建了阴影贴图。但是它有两个问题： 1\. 只有当我改变模型矩阵时，阴影才会出现。即最初没有阴影，但是当我按一个键移动图形时，即模型矩阵发生了变化，阴影出现了。2\. 帧缓冲区上的纹理上有一条旧渲染的痕迹，导致拖尾很长。

任何人都可以对此有所了解吗？

这是问题的截图 ![在此处输入图像描述](../Images/6a27f553e358700e17588e5642fa185f.png)

在此处编辑代码：

```
void generateShadowTex()
{
        //Calculate final ligting properties
    glm::vec4 a_f=light_ambient*mat_ambient;
    glm::vec4 d_f=light_diffuse*mat_diffuse;
    glm::vec4 s_f=light_specular*mat_specular;
    int counter=0;
    glClear(GL_DEPTH_BUFFER_BIT); 
    glEnable(GL_DEPTH_TEST);    // need depth test to correctly draw 3D objects 
    glClearColor(0,0,0,1); 
    //glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT); 
    if(wframe)
        glPolygonMode(GL_FRONT_AND_BACK,GL_LINE); 
    else
        glPolygonMode(GL_FRONT_AND_BACK,GL_FILL); 

    glActiveTexture(GL_TEXTURE3);
    glBindTexture(GL_TEXTURE_2D,depthTex);

        // MAths here for mvp manupulation 
        //Draw Elements
        if(a<17 || a==18)
            glDrawElements(GL_QUADS, masterNumberIndices[a], GL_UNSIGNED_INT, (char*) NULL+0);
        else
            glDrawElements(GL_TRIANGLES, masterNumberIndices[a], GL_UNSIGNED_INT, (char*) NULL+0);

        glBindVertexArrayAPPLE(0);

    }
    glUseProgram(0);  

}

void Init_FBO() 
{ 
    GLfloat border[] = {1.0f, 0.0f, 0.0f, 0.0f};  

    //glActiveTexture(GL_TEXTURE3);
    glGenTextures(1, &depthTex);  
    glBindTexture(GL_TEXTURE_2D, depthTex);  
    glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT24,900,900, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);  
    glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, border);  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE, GL_COMPARE_REF_TO_TEXTURE);  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LESS);
    glBindTexture(GL_TEXTURE_2D,0); 

    glGenFramebuffers(1, &shadowFBO);  
    glBindFramebuffer(GL_FRAMEBUFFER, shadowFBO);  
    glDrawBuffer(GL_NONE);  
    glReadBuffer(GL_NONE);  
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, depthTex, 0);  
    glBindFramebuffer(GL_FRAMEBUFFER, 0); // go back to the default framebuffer  
    // check FBO status 
    GLenum FBOstatus = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER); 
    if(FBOstatus != GL_FRAMEBUFFER_COMPLETE) 
    {
        printf("GL_FRAMEBUFFER_COMPLETE failed, CANNOT use FBO\n");
    }
    else
    {
        printf("Frame Buffer Done Succesfully\n");
    } 
}

void display() 
{
    glBindFramebuffer(GL_FRAMEBUFFER, shadowFBO); 
    generateShadowTex(); 
    glBindFramebuffer(GL_FRAMEBUFFER, 0); 
    generateScene(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:08:10.510

您需要在清除深度缓冲区之前启用它。来自 OpenGL 规范：

> 如果缓冲区不存在，则指向该缓冲区的 glClear 无效。[1](http://www.opengl.org/sdk/docs/man/xhtml/glClear.xml)

和：

> **GL_DEPTH_TEST**
> 
> 如果启用，进行深度比较并更新深度缓冲区。请注意，即使深度缓冲区存在且深度掩码不为零，如果禁用深度测试，深度缓冲区也不会更新。[2](http://www.opengl.org/sdk/docs/man/xhtml/glEnable.xml)

至于你问题的第一部分，我只能猜测问题可能是什么，但你可能没有正确初始化模型矩阵。

# javascript - 如何使用 phonegap 构建捕获“暂停”或重新启动“事件”？

> ID：13488506
> 
> 赞同：0
> 
> 时间：2012-11-21T07:45:38.423
> 
> 标签：javascript, android, cordova

嗨，我正在制作 JQM 和 PhoneGap 应用程序。我想捕捉诸如“暂停”、“重启”或恢复之类的事件。你知道怎么做吗？我阅读了文档，但没有线索如何在 javascript 代码中进行 phonegap 构建。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:55:24.430

在[events 的文档中](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#pause)，他们给出了一个完整的例子和一个简短的例子，我将在这里复制：

```
document.addEventListener("pause", onPause, false);

function onPause() {
  // Handle the pause event
} 
```

就像在普通 JavaScript 中一样，您可以使用`addEventListener`任何节点上的方法附加到事件。在 PhoneGap 的情况下，它们的设备事件在`document`对象上触发。

如果我理解正确并且 JQM 表示 jQuery Mobile：在 jQuery 中，可以使用以下方法为任意事件添加处理程序：

```
$(document).on('pause', onPause); 
```

（这使用 jQuery 1.7 语法，但我相信这是 jQuery Mobile 的要求）。

# http - 网络浏览器是否将 css/js/img 与文本区别对待

> ID：13488507
> 
> 赞同：0
> 
> 时间：2012-11-21T07:45:43.320
> 
> 标签：http, google-chrome, caching, browser

我有一个网页，里面有一些图片等。我清除了缓存并点击了 URL。页面请求具有以下响应标头：

```
Cache-Control:public, max-age=600
Connection:keep-alive
Content-Encoding:gzip
Content-Language:en
Content-Type:text/html; charset=utf-8
Date:Wed, 21 Nov 2012 07:14:35 GMT
Etag:"1353481170-1"
Expires:Sun, 19 Nov 1978 05:00:00 GMT
Last-Modified:Wed, 21 Nov 2012 06:59:30 +0000
Server:Apache/2.2.3 (CentOS)
Vary:Cookie,Accept-Encoding 
```

其中一张图像具有以下响应标头：

```
Accept-Ranges:none
Cache-Control:max-age=1209600
Connection:keep-alive
Content-Encoding:gzip
Content-Length:2206
Content-Type:text/css
Date:Wed, 21 Nov 2012 07:14:36 GMT
ETag:"6c4f9-89e-4cee5893ab000"
Expires:Wed, 05 Dec 2012 07:14:36 GMT
Last-Modified:Tue, 20 Nov 2012 04:19:12 GMT
Server:Apache/2.2.3 (CentOS)
Vary:Accept-Encoding 
```

当我再次点击相同的 URL 并在 chrome 中看到控制台时，我看到对于主请求，我的浏览器发送了一个 If-modified-since 并从服务器获得提示 304，而对于图像，浏览器没有发送请求和从缓存中提供。

我的问题如下：

1.  如果您看到资源的第一个响应具有 max-age 和 last-modified 标头，尽管秒数不同，浏览器是否将 css/JS/img 与 text coz 区别对待。那么为什么它仍然发送请求而不是另一个。

2.  万一我们有 max-age 和 last-modified 标头优先？max-age (AFAIK) 的目的是我们保存到服务器的往返行程，并且根据 HTTP，如果缓存获得 last-modified 标头，它将始终在后续请求中发送 if-modified-since。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:29:49.640

1.  不，浏览器不应该区别对待文件。它应该只服从标题所说的内容。浏览器不会发送对图像的新请求，因为它收到的文件尚未过期。max-age 和 Expires 标头都指定 2 周内不会过期。

2.  我不认为`Last-Modified`标题是相关的；年龄计算为自发送对象以来的时间（如`Date`标头中指定的），而不是修改时间。

`max-age`一个更好的问题是缓存控制指令和标头之间哪个优先`Expires`。RFC 2616 第 14.9.3 节说：

> 如果响应包含 Expires 标头和 max-age 指令，则 max-age 指令将覆盖 Expires 标头，即使 Expires 标头更具限制性。

一旦对象过期，`Last-Modified`时间将在`If-Modified-Since` 请求的标头中使用。

# r - 如何将函数作为 R 中另一个函数的参数传递？

> ID：13488514
> 
> 赞同：4
> 
> 时间：2012-11-21T07:46:17.293
> 
> 标签：r

考虑以下示例：

```
q1.func <- function(x) {
  num <- (cos(30.2 * x^(1/2)))^2 
  denom <- (x^0.7) * exp(0.9*x)

  num / denom
}

method1 <- function(n) {
  x <- runif(n,min = 0, max = 1.7)
  f <- q1.func(x)  

  (1.7) * sum((1/n) * f)
} 

draw.graph <- function() {
  n <- seq(1,1000,1)
  x <- c()
  for(i in 1:length(n)) {
    x <- append(x, method1(n[i]))
  }
  plot(n, x, type = "p", xlab = "N",ylab = "value" ,main = "method1 plot",col = "black")
} 
```

我的观点是我希望能够执行：***draw.graph(method1(n))***。但是 R 不允许我这样做。我不明白为什么会这样？？？我的最终目标是我能够将 method2 / method3 /.... 作为 draw.graph() 函数的参数传递。但是怎么办？？？现在，我只对允许我将 method1 作为 draw.graph 函数的参数传递的解决方案感兴趣。请不要让我在 draw.graph 函数中编写 method1，因为我已经知道它有效。但我更感兴趣的是传递 method1 作为 draw.graph 函数的参数。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:07:57.080

我将举一个更简单的例子来说明要点（您提出的代码还有其他问题）。

```
fun1 = function(x) cos(x)
fun2 = function(x) sin(x)

# function where one argument is a function
wrapper = function(a = 2, fun = fun1){

  x = 1:10
  return(data.frame(x = x, y = a*fun(x)))
}

# testing behaviour
wrapper()
wrapper(fun = fun2) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T08:08:45.220

您的`draw.graph`函数缺少参数。为什么不简单地将函数的返回值用作下一个函数的参数呢？

```
draw.graph <- function(y) {
  plot(seq_along(y), y)
}

method1 <- function(n) {
  return(runif(n, min=0, max=1.7))
}

draw.graph(method1(100)) 
```

如果你真的需要一个函数作为参数，你可以尝试以下方法（请阅读`?match.fun`）：

```
## stupid example
calc <- function(x, fun) {
  fun <- match.fun(fun)
  return(fun(x))
}

calc(1:10, sum) 
```

*编辑：* 为了完成 OP 问题/评论，我添加了这个具体示例：

```
q1.func <- function(x) {
  num <- cos(30.2 * sqrt(x))^2
  denom <- x^0.7 * exp(0.9*x)
  return(num/denom)
}

method1 <- function(n) {
  x <- runif(n, min=0, max=1.7)
  return(1.7*sum(1/n*q1.func(x)))
}

draw.graph <- function(n, fun) {
  fun <- match.fun(fun)
  y <- unlist(lapply(n, fun))
  plot(n, y)
}

draw.graph(1:1000, method1) 
```

![在此处输入图像描述](../Images/f7520b69879f6e27c7e6d9b17b2cace1.png)

# iphone - UITableViewController 上未显示 tabBarItem 图像和文本

> ID：13488516
> 
> 赞同：0
> 
> 时间：2012-11-21T07:46:21.407
> 
> 标签：iphone, objective-c, uitabbar

我刚刚使用 xcode 项目模板创建了一个新的 iPhone 选项卡式应用程序，没有情节提要。我删除了项目模板生成的 FirstViewController 和 SecondViewController。

后来，我创建了名为 MyFirstViewController（UITableViewController 的子类）和 MySecondViewController（UIViewController 的子类）的新控制器，并将它们放在 UINavigationControllers 下

我稍微更改了代码，所以现在看起来如下所示：

appdelegate.m：

```
#import "MyFirstViewController.h"
#import "MySecondViewController.h"

....

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    //create view controllers
    UITableViewController * vc1 = [[MyFirstViewController alloc] initWithNibName:nil bundle:nil];
    UIViewController * vc2 = [[MySecondViewController alloc] initWithNibName:nil bundle:nil];

    //create navigation controllers
    UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:vc1];
    UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:vc2];

    //add nav controllers to tab bar controller
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[nav1, nav2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

tabBarItem 未在第一个选项卡上**显示**

MyFirstViewController.m ：

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Setting tabbar item and image here is not showing. It just show empty tab, no title and no image. why o why?
        self.tabBarItem.image = [UIImage imageNamed:@"someImage"];
        self.tabBarItem.title = @"someName";        
    }
    return self;
} 
```

但第二个标签工作得很好

MySecondViewController.m ：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // This is showing just fine
        self.tabBarItem.image = [UIImage imageNamed:@"someImage"];
        self.tabBarItem.title = @"someName";
    }
    return self;
} 
```

知道为什么 UITableViewController 的子类不能显示 tabBarItem 吗？同时 UIViewController 可以很好地显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:30:31.470

在你的`didFinishLaunchin`方法中，你有

```
UITableViewController * vc1 = [[MyFirstViewController alloc] initWithNibName:nil bundle:nil]; 
```

但在你的`MyFirstViewController`你

```
- (id)initWithStyle:(UITableViewStyle)style; 
```

您需要在 上调用此方法`initWithNibName`，因为此方法不存在，您的 tabBarItem 没有显示。

# xaml - 如何在 Windows8 应用程序 C# 中将视频作为 Web UI 嵌入磁贴中

> ID：13488523
> 
> 赞同：3
> 
> 时间：2012-11-21T07:46:45.207
> 
> 标签：xaml, c#-4.0, windows-8, microsoft-metro

我目前正在使用 C# 和 XAML 开发 Windows 8 应用程序。在分组项目页面中，我需要启动一个托管在 youtube 上的视频。

视频需要在磁贴中播放，作为一个项目。

有没有办法做到这一点？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:52:12.817

不，没有办法在磁贴中播放视频。磁贴更新必须通过[预定义的磁贴模板](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761491.aspx)，并且只能在这些模板中显示文本和图像。

我最近发表了[一篇关于使用动态磁贴](http://blogs.msdn.com/b/jennifer/archive/2012/11/20/real-world-live-tiles-working-with-live-tiles-in-windows-8-apps.aspx)的博文，这也可能会有所帮助。

# math - 这种无向图的名称是什么？

> ID：13488524
> 
> 赞同：0
> 
> 时间：2012-11-21T07:46:45.380
> 
> 标签：math, graph, computer-science, graph-theory, discrete-mathematics

无向图 G 可以划分为多个顶点组，如果“u”和“v”在不同的组中，则每个顶点对 (u,v) 都有一条边；没有优势，否则。直观地说，如果我们用一个顶点“g”来表示一个组，如果两个组之间有边，我们添加一条边(gi,gj)，那么图G就是一个团。现在，我们有几个这样的类型图 G1...Gn，一些 Gi 中的每个顶点可能与一些 Gj 中的顶点具有相同的 id。

如果我们组合图 G1...Gn 得到图 G'，如下例所示，这种无向图的名称是什么？

例子：![图 G3 将具有哪些属性？](../Images/870581d85bdd3ca52b610c00413de719.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:06:21.147

也许您所说的组是独立集。然而，正如 Henrik 所指出的，坍缩成独立的集合（即使它们被选择为最大包含），并不一定会产生一个派系。

# google-maps-api-3 - 使用javascript google map api 3从FusionTables图层中删除阴影

> ID：13488530
> 
> 赞同：2
> 
> 时间：2012-11-21T07:47:10.237
> 
> 标签：google-maps-api-3, kml, google-fusion-tables, dropshadow, leaflet

嗨，我有使用融合表的多边形地标，当我尝试配置我可以隐藏阴影的样式时，可以使用 google map js api 来做到这一点。

看这里的例子

[https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col0+from+13fHuXHIQB55s_C7tpQQFArYMHORjmmThqK9jarQ&h=false&lat=56.168558817410656&lng=2.1851482391250556&z=7&t=1&l=col0](https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col0+from+13fHuXHIQB55s_C7tpQQFArYMHORjmmThqK9jarQ&h=false&lat=56.168558817410656&lng=2.1851482391250556&z=7&t=1&l=col0)

您是否还认为可以使用 KML 在leafletjs 中显示如此庞大的数据。让我有更多的控制权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:33:47.340

您是否知道您可以将融合表用作标准 Google Maps API 上的一个层，而不是使用 /embedviz ？

[https://developers.google.com/maps/documentation/javascript/layers#FusionTables](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)

这应该让您更好地控制它的渲染方式。在单独的说明中，我不确定这是否相关，但我遇到了它：

[https://developers.google.com/fusiontables/docs/articles/fusiontables_styling](https://developers.google.com/fusiontables/docs/articles/fusiontables_styling)

# javascript - .html() 添加的输入框值不带警报值

> ID：13488532
> 
> 赞同：1
> 
> 时间：2012-11-21T07:47:13.753
> 
> 标签：javascript, jquery

> **可能重复：**
> [在由 jQuery .html() 函数插入的元素上绑定事件处理程序](https://stackoverflow.com/questions/5003747/bind-an-event-handler-on-a-element-whos-inserted-by-the-jquery-html-function)

下面是一个简单的 jquery 脚本。当用户点击#FAC 时，会出现一个文本框，输入该值。单击#cs 时，在#NC 中输入的值应显示为警报。但它没有，任何想法为什么？

```
$('#FAC').click(function() {
        $('#FAC').html('<input type="text" name="NC" id="NC"><input type="button" value="Ok" id="CS">');
    });

    $('#NC').click(function() {
        alert($('#NC').val());

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:50:55.067

如果我很好地理解了您的问题，请尝试以下操作：

[JSFIDDLE](http://jsfiddle.net/GXJDS/2/)

```
$('#FAC').bind("click",function() {
    $('#FAC').unbind("click");
    $(this).html('<input type="text" name="NC" id="NC"><input type="button" value="Ok" id="CS">');
})

$(document).on('click', '#CS', function() {
    alert($('#NC').val());

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:55:57.367

仅当单击具有 ID 的元素时，才会将`<input id="NC" />`文本框添加到文档中`FAC`，因此`$('#NC')`立即使用不会找到任何要附加单击处理程序的元素。

有两个选项，或者在文档中添加点击处理程序：

```
$('#FAC').click(function() {
    $('#FAC').html('<input type="text" name="NC" id="NC"><input type="button" value="Ok" id="CS">');
    $('#NC').click(function() { /* alert here */ });
}); 
```

`NC`或在按id过滤点击的元素上添加委托处理程序：

```
$('#FAC').click(function() {
    $('#FAC').html('<input type="text" name="NC" id="NC"><input type="button" value="Ok" id="CS">');
});
$(document).on('click', '#NC', function() { /* alert here */ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:57:18.157

这应该有效：

```
$('#FAC').click(function() {
   $('#FAC').html('<input type="text" name="NC" id="NC"><input type="button" value="Ok" id="CS">');
   $('#FAC').unbind('click'); // to stop events bubbling up to the parent
});

$('#CS').on('click',function() {
    alert($('#NC').val());
}); 
```

请注意，您希望在`#CS`单击时显示警报值，但一直在尝试`#NC`单击事件。

此外，由于`#NC`and`#CS`是动态创建的，因此您不能使用直接`.click()`方法。相反，您需要一个`.on()`方法

# ios6 - 不响应 willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration

> ID：13488533
> 
> 赞同：1
> 
> 时间：2012-11-21T07:47:14.230
> 
> 标签：ios6

我有代码

```
-(BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willAnimateRotationToInterfaceOrientation: toInterfaceOrientation duration: duration];
    deviceOrientation = toInterfaceOrientation;
    if(deviceOrientation == UIInterfaceOrientationPortrait)
    {
        curPageSize = CGSizeMake([UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height-STATUS_BAR_HEIGHT);      
    }
    else if(deviceOrientation == UIInterfaceOrientationLandscapeLeft || deviceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        curPageSize = CGSizeMake([UIScreen mainScreen].bounds.size.height, [UIScreen mainScreen].bounds.size.width-STATUS_BAR_HEIGHT);
    }
    [self correctViews:curPageSize];
} 
```

此方法在 ModalViewController 中定义...当我旋转设备时，程序不响应 willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration...

我应该怎么办？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:47:33.127

尝试将您的代码调整为类似的内容...我已在许多应用程序中成功使用此方法。快乐编码！

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        //Landscape
        self.ViewL.frame = CGRectMake(0, 0, 1024, 728);
        self.ViewL.hidden=NO;
        self.ViewP.hidden=YES;

    }
    else
    {
        //Portrait
        self.ViewP.frame = CGRectMake(0, 0, 768, 955);
        self.ViewP.hidden=NO;
        self.ViewL.hidden=YES;

    }
} 
```

# php - Opencart 在产品特色页面中显示折扣价

> ID：13488536
> 
> 赞同：3
> 
> 时间：2012-11-21T07:47:25.087
> 
> 标签：php, opencart

我是新来的`opencart`。我在我的主页上设置了特色产品。因此，当一个人访问时，他可以看到所有特色产品及其描述。现在，在这个特色页面中，我使用 显示了产品价格`<?php echo $product['price']; ?>`。它显示产品价格没有任何问题。现在我想在特色页面中显示产品折扣。那么该怎么做呢？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:22:00.693

未经测试，但理论上应该有效。

**首先，在`catalog/language/english/module/featured.php`添加以下行：**

```
$_['text_discount']     = '%s or more %s'; 
```

**接下来，`catalog/controller/module/featured.php`执行以下操作：**

添加后`$this->data['button_cart'] = $this->language->get('button_cart');`：

```
$this->data['text_discount'] = $this->language->get('text_discount'); 
```

添加后`$product_info = $this->model_catalog_product->getProduct($product_id);`：

```
$discounts = $this->model_catalog_product->getProductDiscounts($product_id);
$product_discounts[] = array(); 

foreach ($discounts as $discount) {
    $product_discounts[] = array(
        'quantity' => $discount['quantity'],
        'price'    => $this->currency->format($this->tax->calculate($discount['price'], $product_info['tax_class_id'], $this->config->get('config_tax')))
    );
} 
```

添加后`'href' => $this->url->link('product/product', 'product_id=' . $product_info['product_id']),`：

```
'discounts'  => $product_discounts 
```

**最后，在`catalog/view/theme/<theme>/template/module/featured.tpl`您希望它显示的任何地方添加它：**

```
<?php foreach ($product['discounts'] as $discount) { ?>
<?php echo sprintf($text_discount, $discount['quantity'], $discount['price']); ?><br />
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-21T09:15:22.327

最后，在 catalog/view/theme//template/module/featured.tpl 中添加这个你想要它显示的地方：

[在此处输入图像描述](https://i.stack.imgur.com/IlXDM.jpg)

# javascript - 关闭 iframe 后如何关闭父 p 标签？

> ID：13488538
> 
> 赞同：4
> 
> 时间：2012-11-21T07:47:35.843
> 
> 标签：javascript, jquery, jsp

我有一个 iframe，它作为弹出窗口出现。正上方是由关闭按钮组成的 ap 标签。

现在，在单击框架上的一个链接时，我将像这样关闭它：

```
 window.parent.document.getElementById('myIframeId').
 parentNode.removeChild(window.parent.document.getElementById('myIframeId')); 
```

但是，p 标签仍然存在并且没有关闭。这是代码：

```
<p class="close"><a href="#"><img src="buttonClose.jpeg" alt="Close"/></a></p>
<iframe id="myIframeId" style="display:none;" height="430" width="675" src="myjsp.jsp" ></iframe> 
```

当我在 firebug 中看到时，我可以看到 iframe 标签不再存在，但 p 标签仍然存在并且它不会关闭，如果没有通过单击关闭图标手动关闭。

编辑：根据大卫的建议，我将机器人标签包装在 div 中：

```
<div id = "closeModal">
<p class="close"><a href="#"><img src="buttonClose.jpeg" alt="Close"/></a></p>
<iframe id="myIframeId" style="display:none;" height="430" width="675" src="myjsp.jsp" ></iframe>
</div> 
```

但是，现在每次我使用大卫的建议关闭 iframe 时，都会像这样添加另一个动态 div：

```
<div id="myContainerModal" class="" style="z-index: 9999; width: 675px; position: absolute; top: 75px; left: 290px; opacity: 0.999999;">
<div id = "closeModal">
<p class="close"><a href="#"><img src="buttonClose.jpeg" alt="Close"/></a></p>
<iframe id="myIframeId" style="display:none;" height="430" width="675" src="myjsp.jsp" ></iframe>
</div>
</div> 
```

现在我怎样才能摆脱动态 div ： myContainerModal ，它不会走出屏幕？

关闭 iframe 后如何关闭此 p 标签？请帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T07:52:19.343

您可以访问`#myIframeId`'s `previousElementSibling`，这将是`p`.

```
var iframe = window.parent.document.getElementById('myIframeId');
iframe.parentNode.removeChild(iframe.previousElementSibling);
iframe.parentNode.removeChild(iframe); 
```

`div`但是，将两个元素包装在 a中并通过 ID 而不是 iframe 将其删除会更简单，并且可以说更整洁。

HTML：

```
<div id="iframe-container">
   <p class="close">...</p>
   <iframe>...</iframe>
</div> 
```

JS：

```
var iframe = window.parent.document.getElementById('iframe-container');
iframe.parentNode.removeChild(iframe); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T07:52:56.080

你可以使用这个：

```
var p = document.getElementsByClassName("close")[0]
p.parentNode.removeChild(p); 
```

不过，最好将 a 添加`id="someName"`到 p 中，如下所示：

```
<p class="close" id="close"><a href="#"><img src="buttonClose.jpeg" alt="Close"/></a></p>
<iframe id="myIframeId" style="display:none;" height="430" width="675" src="myjsp.jsp" ></iframe>​ 
```

然后你可以按如下方式删除它：

```
var p = document.getElementById("close")
p.parentNode.removeChild(p); 
```

这将防止您将索引 ( `[0]`) 硬编码到您的 js 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:51:49.103

您可以通过类名找到 P 标签，然后您也可以尝试将其删除。

# android - 在运行 ICS 的平板电脑上隐藏状态栏

> ID：13488542
> 
> 赞同：0
> 
> 时间：2012-11-21T07:47:44.160
> 
> 标签：android

当我包含此代码时，我想在我的应用程序中隐藏平板电脑 ics 中的状态栏。`

> `getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);`

然后应用程序崩溃了，

有什么方法可以禁用状态栏..或者请给我一个隐藏主页按钮的建议

有没有人对这个主题有想法，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:02:06.623

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:53:36.670

首先，与我们分享您的代码。但我认为原因是你把这条线放在后面`setContentView(..)`，你需要把它放在前面

# git - 裸存储库上的 Git 子树更新

> ID：13488543
> 
> 赞同：4
> 
> 时间：2012-11-21T07:47:47.450
> 
> 标签：git

我正在尝试将 repo B 作为子树镜像到 repo A。通过 cron 作业更新它会很棒。因此，我试图在托管裸存储库的服务器上执行此操作。

详细信息：我有作为裸存储库创建的裸存储库 repo/A 和 repo/B。现在我想用 B 作为 A 的子树；像这样：repo_A/sub_B -> repo/B/master

由于 repo_A/sub_B 应该是只读的，我想通过 cron 作业定期更新 sub_B。如果不将其克隆到临时文件夹，我只是无法弄清楚如何在裸存储库上执行此操作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T21:56:14.897

你看过`git help submodule`或[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)吗？

子模块解决了 repo-in-another-repo 问题；您只需完成创建 cron 作业的任务，以定期提交（在 repo/A 中）repo/B 中的任何上游更改。但是请注意，repo/A 的消费者（即克隆它的人）仍然需要运行`git submodule update`但是请注意，即使在更新 repo/A 时

希望这可以帮助。

# java - 尽管组件验证失败，但 JSF 表单仍提交

> ID：13488544
> 
> 赞同：1
> 
> 时间：2012-11-21T07:47:48.690
> 
> 标签：java, jsf, jakarta-ee, primefaces

我正在使用 Mojarra、Primefaces 3.4 和 JSF 2.1 以及 JPA/Hibernate 来实现持久性。

最好将问题描述为具有一个 bean 和一个视图以及一个自定义验证器，我在其中将一个数字输入到一个具有验证器的字段中。验证器通过后端检查数据库中的字段值，并防止创建重复的对象。

在所有情况下，验证都可以防止在第一次提交时提交重复的对象。但是，有几次它只允许后续（第二次）提交通过并被持久化（尽管对于具有验证器的这个特定字段具有空值），即使第一次提交时出现失效失败。

我无法理解为什么会发生这种情况，但怀疑与范围有关。我已经尝试过 CDI 的 @ConversationScoped 和 @RequestScoped，以及 MyFaces CODI @ViewAccessScoped。

@RequestScoped 似乎“解决”了这个问题，但还有一些其他问题，即它在第一次失效后根本无法持久，因为（可能）在第一次提交后没有保留值。此外，标识符上有一个 AJAX 调用，它将尝试从另一个系统检索客户数据。如果成功，所有其他字段都应该是只读的，这在客户数据检索过程中通过布尔集进行处理。@RequestScoped 无法处理此问题，因为该值在第一次提交后“丢失”。

整个代码非常广泛，如果您想查看其中的任何特定部分以回答此问题，请告诉我。

分步说明：

1.  导航到页面。
2.  尝试使用现有的唯一标识符和提交来创建重复对象。
3.  显示表单以及自定义验证器错误。
4.  第二次尝试提交相同的页面（不重新加载页面）。
5.  页面已成功提交并持久化，但唯一标识符未提交并且在数据库中具有空值。

这不会每次都发生，这是令人困惑的部分。然而，它发生在大约 50% 的情况下，没有我可以检测到的模式。

# iphone - CATransition 动画有时会崩溃

> ID：13488548
> 
> 赞同：0
> 
> 时间：2012-11-21T07:48:18.057
> 
> 标签：iphone, ios, animation, uitableview, catransition

我在我的应用程序中使用 CATransition 动画，它工作正常，但有时会崩溃。

这是我的代码：

```
-(void)_close_btn_click:(UIButton*)button
{

  NSLog(@"update Button %ld clicked.",(long int)[button tag]);    
  NSInteger intvalue=[[NSString stringWithFormat:@"%ld",(long int)[button tag]]intValue];    
  NSLog(@"delete_index:%d",intvalue);    
  CATransition* transition = [CATransition animation];    
  [transition setDuration:1.0];    
  transition.type = @"rippleEffect";    
  transition.subtype = kCATransitionFromLeft;    
  transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];    

  [cell._slide_view.layer addAnimation:transition forKey:@"push-transition"];    
  CATransition* transition1 = [CATransition animation];    
  [transition1 setDuration:1.0];    
  transition1.type = @"rippleEffect";    
  transition1.subtype = kCATransitionFromLeft;    
  [cell._en_cell_close_btn.layer addAnimation:transition forKey:@"push-transition"];
  cell._slide_view.hidden=YES;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:13:48.703

我想在你调用这个方法之前你的`cell`or`_slide_view`已经被释放了

# regex - 需要帮助重写规则以使 url 干净和 seo 友好？

> ID：13488558
> 
> 赞同：0
> 
> 时间：2012-11-21T07:49:06.557
> 
> 标签：regex, .htaccess, url-rewriting, seo

当前模式是`http://example.com/questions.php?qcid=25&name=java` ，我想将其`http://example.com/25/java`设置为**qcid**必须为**[0-9]**并且**名称**必须是**可读和编码**的。如果它包含超过 1 个单词，则它们之间必须有**“-”连字符。**例如**面向对象的**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:54:56.507

这将采用任何以数字开头的 url，然后是斜杠，然后是任何内容，然后将它们转换为如上所示。但是，如果您需要某种 url 编码/解码，则必须在 questions.php 脚本中处理该位

```
RewriteRule ^(\d+)/(.+) /questions.php?qcid=$1&name=$2 [NC,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:58:50.080

在 .htaccess

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^([0-9]+)/([a-z0-9\-]+)(?!(.css)|(.js))$ questions.php?qcid=$1&name=$2 [NC] 
```

在 php 中，您需要捕获名称并去除连字符并在需要时修复大写字母。例如，假设我们希望名称为小驼峰式：

```
$_GET['name'] = "this-is-a-test-name";

$name = '';
$exploded = explode('-',$_GET['name']);
foreach($exploded as $piece) {
    $name .= ucfirst($piece);
}
// If you have PHP >= 5.3
// $name = lcfirst($name);
// Otherwise
$name{0} = strtolower($name{0});

echo $name; 
```

# javascript - moz-nullprincipal 是什么意思？

> ID：13488564
> 
> 赞同：3
> 
> 时间：2012-11-21T07:49:28.990
> 
> 标签：javascript, firefox

这是一个小的Javascript。（这是一个“最小的例子”。）

```
<script>
    var now = new Date();
    var minute = now.getMinutes();
    if (minute < 10) minute = "0" + minute;
    document.write(now.getHours() + ":" + minute);
</script> 
```

这会在 Firefox (16.0.2) 中引发以下错误：

```
nicht wohlgeformt
moz-nullprincipal:{356ab095-a1ae-4ba6-a22c-1df0f260f702}
 if (minute < 10) minute = "0" + minute;
------------- ⬏ 
```

（“nicht wohlgeformt”：德语，意思是“不规范”。）

“moz-nullprincipal”是什么意思。我没有找到有关该错误的任何信息。那条线有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:57:15.190

我用谷歌搜索了关键字“moz-nullprincipal”，然后谷歌工具栏出现错误。

> （日语） [http://st777.seesaa.net/article/139189718.html](http://st777.seesaa.net/article/139189718.html)

该页面说您应该重新安装新版本的 Google 工具栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:07:39.340

代码有效，应该可以。moz-nullprincipal 是 firefox 在某些 json / ajax 跨脚本安全性中触发的错误。请参见此处：[跨域 Ajax 调用未找到元素位置：moz-nullprincipal](https://stackoverflow.com/questions/7053995/cross-domain-ajax-call-gets-no-element-found-location-moz-nullprincipal)

您确定错误“格式不正确”和“moz-nullprincipal：{356ab095-a1ae-4ba6-a22c-1df0f260f702}”相关吗？

你可以试试这个方法吗？

```
now = new Date();
var minute = now.getMinutes();
if (minute < 10) minute = "0" + minute.toString();
document.write(now.getHours() + ":" + minute); 
```

你用的是哪个版本的火狐？你在使用 JQuery 吗？

# asp.net - 在 sql (MS-Access) 中编写分组查询

> ID：13488567
> 
> 赞同：2
> 
> 时间：2012-11-21T07:49:42.233
> 
> 标签：asp.net, sql, ms-access

我有两个表项目和发票。数据库是 MS Access ( mdb )

项目表有字段

1.  项目 ID
2.  项目名
3.  项目状态

发票表有字段

1.  发票编号
2.  项目ID（外键）
3.  发票类型（已付款和已收到）
4.  InvoiceChannel（编码、设计和咨询）
5.  发票金额

Projects 表与 Invoices 表存在一对多关系，项目 ID 作为外键。

我想要一个通过像这样查询 Invoices 表创建的表

![MS Access 中的分组问题](../Images/0e0e2448817f4426d860b8421198f2a3.png)

如何使用 SQL 查询来实现这一点？
或者我是否必须使用服务器端编码（我使用 C# 和 ASP.NET）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:39:54.280

您发布的表架构没有包含总计金额的字段。我将其称为`Amount`.

首先，创建一个交叉表查询，并将其保存在数据库中（我称之为`ct`）：

```
TRANSFORM Sum(Amount) AS SumOfAmount
SELECT ProjectID, InvoiceType
FROM Invoices
GROUP BY ProjectID, InvoiceType
PIVOT InvoiceChannel In ("Coding","Designing","Consulting"); 
```

这将为您提供 the`ProjectID`和 the`InvoiceType`作为前两列，另外还有一列用于“编码”、“设计”和“咨询”。

要获得总数，您需要另一个查询：

```
SELECT ct.*, Coding + Designing + Consulting AS Total
FROM ct; 
```

请记住，如果特定`ProjectID`//没有`InvoiceType`记录`InvoiceChannel`，则查询将返回`NULL`该组合，这将导致`Total`存在`NULL`。如果此查询将在 Access 下运行（例如 via `Access.Application`），您可以使用该`Nz`函数，其工作方式类似于`??`C# 中的运算符：

```
SELECT ct.*, Nz(Coding,0) + Nz(Designing,0) + Nz(Consulting,0) AS Total
FROM ct; 
```

如果您使用 OleDbProvider 从 ADO.NET`.mdb`或`.accdb`通过 ADO.NET 访问数据，您可能无法使用`Nz`，并且必须使用更复杂的东西：

```
SELECT ct.*, 
    Iif(IsNull(Coding), 0, Coding) +
    Iif(IsNull(Designing), 0, Designing) + 
    Iif(IsNull(Consulting), 0, Consulting) AS Total
FROM ct; 
```

# c# - jQuery文本（）与 我有一个下拉列表，如下所示： <select id="example" name="example" runat="server">填充在后面的代码中，如下所示：example.DataSource = new CampControl().GetCountries(); example.DataTextField = "CountryDesc"; example.DataValueField = "ID"; example.DataBind(); ex ID：13488568 赞同：0 时间：2012-11-21T07:49:43.310 标签：c#, jquery, asp.net 回答 #1 赞同：3 时间：2012-11-21T07:51:22.177 您正在寻找:selected属性，而不是:checked 回答 #2 赞同：0 时间：2012-11-21T08:42:28.790 我用这个得到了价值： $inputs = this.inputs, $checked = $inputs.filter(':checked'), $checked.each(function () { alert(($(this)[$(this).index()].title)); 回答 #3 赞同：0 时间：2012-11-21T08:18:24.640 试试这个 $inputs = this.inputs; $checked = $inputs.val(); $checked.each(function (index) { alert($(this).text()); }); 回答 #4 赞同：0 时间：2012-11-21T08:10:59.717 尝试这个： $inputs = this.inputs, $checked = $inputs.filter.is(':checked'), $checked.each(function (index) { alert($(this).text()); }); 回答 #5 赞同：0 时间：2014-09-29T18:08:13.143 在下拉列表中，我们需要在选择选项后填充 n'of 选项以进行选择。我们可以使用以下查询获取选定的文本... var exampleValue = $("#example option:selected").text();</select>

# c# - c#，从站点获取信息

> ID：13488569
> 
> 赞同：0
> 
> 时间：2012-11-21T07:49:46.070
> 
> 标签：c#, html, windows-phone-7.1

我正在尝试解析以下 HTML 文件，我想要获取键的值。这是在 Silverlight for Windows phone 上完成的。

```
</tr>
<tr><td width="26"><div style="width: 26px; height: 1px;"><spacer type="block" width="26" height="1" /></div></td><td width="60" id="tbtime">10:00</td><td width="70%" id="tbcol"><a href="/repertoir/filminfo.php?id=596">Ральф</a></td><td width="30%" id="tbcol" align="center">100 руб.</td></tr><tr><td width="26" height="4"><div style="width: 26px; height: 4px;"><spacer type="block" width="26" height="4" /></div></td><td width="60"></td><td width="100%" colspan="2"></td></tr><tr><td width="26"><div style="width: 26px; height: 1px;"><spacer type="block" width="26" height="1" /></div></td><td width="60" id="tbtime">12:00</td><td width="70%" id="tbcol"><a href="/repertoir/filminfo.php?id=595"> Сумерки. Сага. Рассвет: Часть 2</a></td><td width="30%" id="tbcol" align="center">100 - 120 руб.</td></tr><tr><td width="26" height="4"><div style="width: 26px; height: 4px;"><spacer type="block" width="26" height="4" /></div></td><td width="60"></td><td width="100%" colspan="2"></td></tr><tr><td width="26"><div style="width: 26px; height: 1px;"><spacer type="block" width="26" height="1" /></div></td><td width="60" id="tbtime">14:20</td><td width="70%" id="tbcol"><a href="/repertoir/filminfo.php?id=595"> Сумерки. Сага. Рассвет: Часть 2</a></td><td width="30%" id="tbcol" align="center">120 - 150 руб.</td></tr><tr><td width="26" height="4"><div style="width: 26px; height: 4px;"><spacer type="block" width="26" height="4" /></div></td><td width="60"></td><td width="100%" colspan="2"></td></tr><tr><td width="26"><div style="width: 26px; height: 1px;"><spacer type="block" width="26" height="1" /></div></td><td width="60" id="tbtime">16:40</td><td width="70%" id="tbcol"><a href="/repertoir/filminfo.php?id=607">Бункер</a></td><td width="30%" id="tbcol" align="center">150 руб.</td></tr><tr><td width="26" height="4"><div style="width: 26px; height: 4px;"><spacer type="block" width="26" height="4" /></div></td><td width="60"></td><td width="100%" colspan="2"></td></tr><tr><td width="26"><div style="width: 26px; height: 1px;"><spacer type="block" width="26" height="1" /></div></td><td width="60" id="tbtime">18:40</td><td width="70%" id="tbcol"><a href="/repertoir/filminfo.php?id=595"> Сумерки. Сага. Рассвет: Часть 2</a></td><td width="30%" id="tbcol" align="center">150 - 180 руб.</td></tr><tr><td width="26" height="4"><div style="width: 26px; height: 4px;"><spacer type="block" width="26" height="4" /></div></td><td width="60"></td><td width="100%" colspan="2"></td></tr><tr><td width="26"><div style="width: 26px; height: 1px;"><spacer type="block" width="26" height="1" /></div></td><td width="60" id="tbtime">21:00</td><td width="70%" id="tbcol"><a href="/repertoir/filminfo.php?id=595"> Сумерки. Сага. Рассвет: Часть 2</a></td><td width="30%" id="tbcol" align="center">150 - 180 руб.</td></tr><tr><td width="26" height="4"><div style="width: 26px; height: 4px;"><spacer type="block" width="26" height="4" /></div></td><td width="60"></td><td width="100%" colspan="2"></td></tr></table>
<br /><br />
<br /><br />

 public void myparsing()
    {          
       HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
        WebClient webClient = new WebClient();
        document.LoadHtml(webClient.DownloadString("http://udokan.chita.ru/"));
        var node = document.DocumentNode.SelectSingleNode("//body/table/tr/td[4]/table");
        if (node != null)
        {
            var innerText = node.InnerText;              
            richTextBox1.AppendText(innerText);
        }       

    } 
```

我想获得有关曲目的信息，但我不能。我有 HttpAgilityPack 的问题。方法 SelectNodes 不起作用。请帮助我，我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:17:46.170

我不是 100% 确定，但从我的脑海中我有一个想法：

请记住，WebClient 和 Silverlight 是异步工作的。因此，在将 Html 传递给 LoadHtml 方法之前，请确保已下载 Html。因此最好使用 DownloadStringAsync 并将文档加载到完整的回调中。

我将从作为字符串的 html 源代码的副本开始，并检查 XPath 查询是否正确。

查看您的 html 网站和源代码没有“//body/table/tr/td[4]/table”

//body/table 中有 1 个表，它有 4 个 TD 元素，但请记住，这是一个基于零的索引数组......所以 td[3] 将是第四个元素......

所以这些只是一些想法，我希望它有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:18:31.837

你可以这样做：

```
 public void MyParsing()
    {
        const string baseUrl = "http://udokan.chita.ru/";
        var htmlDoc = new HtmlDocument();
        var webClient = new WebClient();
        htmlDoc.LoadHtml(webClient.DownloadString(baseUrl));
        var htmlNodeCollection = htmlDoc.DocumentNode.SelectNodes("//a[@href]");
        if (htmlNodeCollection != null)
        {
            foreach (var link in htmlNodeCollection)
            {
                try
                {
                    if(link.Attributes["href"].Value.Contain("repert"))
                    {
                    var newUrl = new Uri(new Uri(baseUrl), link.Attributes["href"].Value).AbsoluteUri;
                    var queries = HttpUtility.ParseQueryString(string.Join(string.Empty, newUrl.Split('?').Skip(1)));
                    var id = queries["id"];
                    richTextBox1.AppendText(id);
                    }
                }
                catch (Exception)
                {
                }
            }
        }

    } 
```

# python - 如何匹配 iframe 标签的一部分？

> ID：13488570
> 
> 赞同：1
> 
> 时间：2012-11-21T07:49:49.033
> 
> 标签：python, regex

我有http代理项目。我使用一些重写规则将所有操作和 href 更改为 this `/follow/+URL`。我还将所有 src 的 URL 更改为 this `/proxy/+URL`，它可以帮助我在链接和例如图像之间分配 URL。虽然它适用于`<img>`标签。我遇到的问题在于`<iframe src=...>`标签。在我应用我的代码后，它会将 src 更改为 '/proxy/+URL' 但我想将其更改为`/follow/+URL`，但我不确定我该怎么做。

这是我的代码

```
from urlparse import urlparse, urlunparse
import re, urllib

REWRITE_LINKS = re.compile(r'((?P<attr>action|href|src)=["\'](?P<uri>\S+?)["\'])', re.IGNORECASE)

def rewrite_links(content, mimetype = '', uri = ''):
    uri = str(uri)
    urip = urlparse(uri)
    server_root = str(urlunparse((urip[0], urip[1], '/', '', '', '')))

    working_dir = str(urlunparse((urip[0], urip[1], urip[2], '/', '', '')))
    working_dir = '/'.join(working_dir.split('/')[:-1])

    def repl_html(match):
        attr, value = match.groupdict()['attr'], match.groupdict()['uri']

        if value in ('',) or value.startswith('javascript:') or value.startswith('#'):
            pass
        else:
            if value.find('://') == -1:
                if value.startswith('./'):
                    value = working_dir + value[2:]
                elif value.startswith('../'):
                    value = '/'.join(working_dir.split('/')[:-1]) + value[3:]
                elif value.startswith('/'):
                    value = server_root + value[1:]
                else:
                    value = server_root + value
            #value = value.replace('/','|')
            if attr.lower() == 'src':
                value = '/proxy/' + value
            else:
                value = '/follow/' + value

        return ' %s="%s" ' % (attr, value)

    if mimetype.startswith('text/html'):
        content = REWRITE_LINKS.sub(repl_html, content)
    elif mimetype.startswith('text/css'):
        pass
    elif mimetype.startswith('application/x-javascript'):
        pass
    else:
        pass

    return content 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:16:58.047

您可以尝试添加一个额外的命名组：

```
<(?P<tagname>[^\s]+)\s[^>]* 
```

到这样的`REWRITE_LINKS`行：

```
REWRITE_LINKS = re.compile(r'(<(?P<tagname>[^\s]+)\s[^>]*(?P<attr>action|href|src)=["\'](?P<uri>\S+?)["\'])', re.IGNORECASE) 
```

`if attr.lower() == 'src':`那么你可以在条件语句中查询这个匹配

# c++ - 将字符串转换为 char 指针可以指向的 char 数组/值的最有效方法是什么

> ID：13488577
> 
> 赞同：0
> 
> 时间：2012-11-21T07:50:19.117
> 
> 标签：c++, arrays, string, char, memcpy

如果我有一个字符串：

```
std::string Pooptacular = "Pooptacular" 
```

我想将它转换为 char 数组，我有一些选择：

```
char* poopCArr = Pooptacular.c_str(); 
```

或者我可以用 memcpy 或 strcpy 等做一些事情。

我想知道的是，这些方法中哪种方法最快或最有效。换句话说，如果我要在一个程序运行中执行数十万次，我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:55:51.457

如果您只需要指向数据的只读指针，请使用`c_str`. 它不会转换任何东西。它只是让您访问`string`已经分配的缓冲区。当然，如果你想改变它，你必须把它复制到一个新的缓冲区，如果你这样做了，不要期望你的改变会反映在你的原始`string`对象中。

# php - 当用户在访问使用 codeigniter 构建的站点时，仅在浏览器的地址栏中键入域名和/或端口号时会发生什么？

> ID：13488578
> 
> 赞同：0
> 
> 时间：2012-11-21T07:50:19.973
> 
> 标签：php, codeigniter, codeigniter-url

我知道在 Codeigniter 中，如果未在 url 中指定控制器，则始终调用默认控制器。此外，如果 url 中没有指定函数，则默认调用控制器的 index 函数。但是，当我在浏览器地址栏中输入以下网址时，每个网址都会得到不同的结果：

```
http://localhost/appfolder/ 
```

和

```
http://localhost/appfolder/index.php/defaultController 
```

对于第一个 url，即使用户确实已登录，似乎用户也没有登录。第二个 url 工作正常，并且无论用户是否登录都做正确的事情，即它执行索引功能的默认控制器。在我看来，第一个 url 并没有执行默认控制器的索引功能。我绞尽脑汁想弄清楚为什么输入两个网址会产生不同的结果，因为据我所知，它们应该有相同的结果；即它们都应该调用默认控制器的索引函数。我是使用 codeigniter 的新手（现在已经使用了大约 2 个半月），所以任何帮助都将不胜感激。

**这是一个编辑：** 我知道这里的大多数评论都是关于使用 htaccess 文件，但它是否应该以同样的方式工作 index.php 是否在 url 中？有没有人对我可以做些什么来查明问题有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:48:13.113

如果您想通过 url`http://localhost/appfolder`而不是通过 url 访问该站点，`http://localhost/appfolder/index.php/defaultController`则需要在您的站点 webroot 文件夹（包含 index.php 的文件夹）中设置一个 .htaccess 文件。这几乎是我在我的网站上使用的（为您的设置定制）：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /appfolder/index.php/$1 [L] 
```

**选择**

```
RewriteEngine On
RewriteBase /appfolder

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

有大量讨论和其他方法的类似问题： [How to remove "index.php" in codeigniter's path](https://stackoverflow.com/questions/1445385/how-to-remove-index-php-in-codeigniters-path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:59:09.457

嘿，在你的 htaccess 文件中使用这个，我认为它会起作用............

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:13:17.147

在路由配置文件中设置默认控制器：

```
$route['default_controller'] = 'Blog'; 
```

从[文档](http://codeigniter.com/user_guide/general/controllers.html#default)：

> 当 URI 不存在时，可以告诉 CodeIgniter 加载默认控制器，当只请求您的站点根 URL 时就是这种情况。要指定默认控制器，请打开您的 application/config/routes.php 文件并设置此变量。

# objective-c - Xcode中指针和整数（id和int）的比较

> ID：13488581
> 
> 赞同：0
> 
> 时间：2012-11-21T07:50:34.567
> 
> 标签：objective-c, xcode

在运行这个

```
if([SUPApplication ConnectionStatus]==[SUPConnectionStatus_DISCONNECTED])
{......

 ......} 
```

我们收到类似“指针和整数（id 和 int）之间的比较”之类的警告。为什么这样。是否有任何函数可以将两者解析为相同的数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:22:47.630

尝试投射它们：

```
if((int)[SUPApplication ConnectionStatus]== (int)SUPConnectionStatus_DISCONNECTED) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:07:44.467

尝试将它们都放入`NSNumbers`然后比较那里的值

```
if ([[NSNumber numberWithInt:[SUPApplication ConnectionStatus]] isEqualToNumber:[NSNumber numberWithInt:SUPConnectionStatus_DISCONNECTED]])
{
  .... 
} 
```

# mysql - Ajax 请求、长轮询或 IRC

> ID：13488586
> 
> 赞同：1
> 
> 时间：2012-11-21T07:50:55.220
> 
> 标签：mysql, ajax, irc, long-polling

我需要做一个实时聊天系统（具有多个用户频道，用户权限，并且必须包含在一个站点中并使用该数据库中的帐户）所以我想到了这个解决方案：在预定义的时间（如 1 秒）进行 ajax 请求，长轮询或irc。

优点和缺点将是：

AJAX 优势：

*   易于实施
*   East 检查站点用户的权限，授予权限，设置频道，从数据库中访问我需要的一切

缺点：

*   默认插入滞后
*   杀死可怜的服务器
*   只能在指定页面使用（不存在外站客户端）

长轮询：

*   不会杀死服务器
*   更少的延迟

*   只能在指定页面使用（不存在外站客户端）

*   更难实施

国税局：

*   不会淹没服务器
*   没有滞后
*   用户可以设置客户端并从外部站点访问聊天

*   不知道如何与我的数据库通信，因此我可以根据我的数据创建通道并授予权限

由于多个 ajax 请求淹没了服务器，我无法使用它。那么在长轮询和 IRC 之间，你认为应该使用什么更好？

如果是长轮询，您能否指出一个好的参考（我过去使用过 ape - ape-project.org，但我对其稳定性感到失望）？

如果是 IRC，您能否指出一个参考，该参考显示如何创建与我的数据库（mysql）的连接并将新登录的用户放入所需的频道？例如，如果在我的数据库中有一个类似名称的条目：Gogu，职业：杀手；当 Gogu 连接时，我需要将他放入“杀手”频道。

# batch-file - 在 DOS 中如何使用以空格开头的字符串 SET /P

> ID：13488592
> 
> 赞同：3
> 
> 时间：2012-11-21T07:51:07.313
> 
> 标签：batch-file, set, newline

我想在 DOS 批处理中得到这种结果：

```
==> Please enter your filename, formatted as
    [user][PC_id] : 
```

允许用户在“：”之后输入文件名

我尝试了很多组合，但我能得到最好的

```
ECHO --^> Please enter your filename, formatted as
Set /P FILE=[user][PC_id] : 
```

（“[”前的空格不显示）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:10:39.993

您对 Vista/Win7 中引入的功能有疑问。
使用时，它会去除字符串前面的所有空白字符`set/p`。

但是在您的情况下，这很容易，因为您想回显两行。

```
@echo off
setlocal EnableDelayedExpansion
set LF=^

set /p "file=--> Please enter your filename, formatted as!LF!    [user][PC_id]" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:31:24.140

当您打印 2 行时，jeb 的解决方案工作正常。但是，当您只想打印带有前导空格的单行时，有一个通用的解决方案。您只需要一个退格字符。

```
@echo off
setlocal
:: Define BS to contain a backspace
for /f %%A in ('"prompt $H&for %%B in (1) do rem"') do set "BS=%%A"

::Only need %BS% if you know prompt starts at line beginning
Set /P "FILE=%BS%    [user][PC_id] : "

::If prompt is not at line beginning then need an extra char before %BS%
<nul set /p "=Part1"
<nul set /p "=.%BS%    Part2" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T06:44:43.240

另一种变体：

```
exit | cmd /k prompt -$G Please enter your filename, formatted as$_$s$s$s[user][PC_id]$s
set /p FILE=

echo %FILE% 
```

# ruby - SQLite 检查一行是否存在

> ID：13488593
> 
> 赞同：2
> 
> 时间：2012-11-21T07:51:09.280
> 
> 标签：ruby, sqlite

我正在尝试检查我的 sqlite 数据库中名为“Products”的表中是否存在特定 ID。

```
def existsCheck( db, id )
    temp = db.execute( "select exists(
        select 1
        from Products
        where promoID = ?
    ) ", [id] )
end 
```

这是我当前的代码，但它返回一个数组，这意味着我必须先处理转换，然后才能将其用作布尔值。有什么想法可以更改它以使其返回值为 1 的 int 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:45:34.367

无需使用子查询：

```
def existsCheck( db, id )
    db.execute( "select 1
                 from Products
                 where promoID = ?",
                [id] ).length > 0
end 
```

这将返回一个布尔结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:53:04.567

将其更改为：

```
def existsCheck( db, id )
    temp = db.execute( "select 1 where exists(
        select 1
        from Products
        where promoID = ?
    ) ", [id] ).any?
end 
```

SQL 查询`1`在满足条件时返回，否则返回空结果集。整个函数根据结果集返回布尔值。

# compilation - 编译源代码时出错：没有这样的文件或目录

> ID：13488602
> 
> 赞同：0
> 
> 时间：2012-11-21T07:51:24.197
> 
> 标签：compilation, kernel

我在编译源代码时遇到错误。我搜索了它，但找不到解决问题的包的名称。

> 错误
> 
> ls：无法访问/lib/modules/3.5.0-17-generic/source：没有这样的文件或目录

**make文件的源代码**

```
# Makefile for bcm_wimax module
# Customized for ZTE AX226
# Makefile recreated be Minhazul Haq Shawon

KERNEL_VER  := $(shell uname -r)
KDIR        := /lib/modules/$(KERNEL_VER)/build
KSRC        := /lib/modules/$(KERNEL_VER)/source
INSTALL_DIR :=  /lib/modules/$(KERNEL_VER)/kernel/drivers/staging/bcm/
TARGET_DRV  := bcm_wimax
EXTRAFLAGS  := -Wall O=$(KDIR)
PWD:= $(shell pwd)

obj-m = $(TARGET_DRV).o

$(TARGET_DRV)-objs :=InterfaceDld.o InterfaceIdleMode.o         InterfaceInit.o InterfaceRx.o \
        InterfaceIsr.o InterfaceMisc.o InterfaceTx.o \
        CmHost.o IPv6Protocol.o Qos.o Transmit.o\
        Bcmnet.o DDRInit.o HandleControlPacket.o\
        LeakyBucket.o Misc.o sort.o Bcmchar.o hostmibs.o            PHSModule.o\
        led_control.o nvm.o vendorspecificextn.o

default:
    $(MAKE) $(EXTRAFLAGS) -C $(KSRC) SUBDIRS=$(PWD) modules

    rm -f *.o *.mod.* .*.cmd
install:
    cp $(TARGET_DRV).ko $(INSTALL_DIR)
clean:
    find . -name \*.o -exec rm -rf '{}' ';'
    find . -name .\*.o.cmd -exec rm -rf '{}' ';'
    find . -name \*.*~ -exec rm -rf '{}' ';'
    find . -name \*.*.bak -exec rm -rf '{}' ';'
    rm -f *.ko *.o *.mod.* .*.cmd
    rm -fr .tmp_versions
    rm -rf Module.symvers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:52:32.227

您必须先编译内核源代码。

# sql - 在sql中添加重复值

> ID：13488605
> 
> 赞同：0
> 
> 时间：2012-11-21T07:51:36.187
> 
> 标签：sql

我只是编程的新手，我遇到了这个问题（见下表）。

```
 DocNum  DocDate   Quantity  ItemGroupCode   ItemGroupName
    89226   7-Nov-12    10     103            Fish-Fillet
    88768   8-Nov-12    1      104            Fish-Regular
    88856   6-Nov-12    2      104            Fish-Regular
    88678   20-Nov-12   12     109            Value Added
    89415   5-Nov-12    12     109            Value Added
    88642   5-Nov-12    1      112          Other Charges
    88646   5-Nov-12    20     112          Other Charges 
    88729   7-Nov-12    5.64   112          Other Charges 
    88804   12-Nov-12   10     112           Other Charges 
    88992   12-Nov-12   1      112             Other Charges 
```

我想组合 ItemGroupCode 列的类似代码，然后添加其数量。前任。

```
Quantity    ItemGroupCode   ItemGroupName
10              103          Fish-Fillet
3               104          Fish-Regular
24              109          Value Added 
38.64           112          Other Charges 
```

谢谢... Pipay

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:57:28.597

尝试这个：

```
select sum(quantity) quantity, itemgroupcode, itemgroupname
from table_name
group by itemgroupcode, itemgroupname 
```

对于您的问题，如果我理解正确，您需要从您在评论中提供的选择中获得第一个问题的输出。如果是这种情况，请尝试以下操作：

```
SELECT SUM(quantity), ItemGroupCode, ItemClass
FROM 
(SELECT A.DocNum, A.DocDate, B.Quantity,B.Price,B.Linetotal, A.Doctotal, C.ItemName, C.ItmsGrpCod as ItemGroupCode, 
       D.ItmsGrpnam as ItemClass 
FROM OINV as A LEFT outer JOIN INV1 As B ON A.DocEntry = B.DocEntry 
               LEFT OUTER JOIN OITM As C ON B.ItemCode = C.ItemCode 
               LEFT OUTER JOIN OITB As D ON C.ItmsGrpCod = D.ItmsGrpCod 
WHERE A.DocDate >= '11/01/2012' 
group by A.DocNum, A.DocDate, B.Quantity,B.Price,B.Linetotal, A.Doctotal, C.ItemName, C.ItmsGrpCod, D.ItmsGrpnam 
order by C.ItmsGrpCod ASC) X
GROUP BY X.ItemGroupCode, X.ItemClass 
```

# ruby-on-rails-3 - 数据库中的方法或字段？

> ID：13488607
> 
> 赞同：0
> 
> 时间：2012-11-21T07:51:46.937
> 
> 标签：ruby-on-rails-3

我的模型中有很多这样的方法：

```
def calc
    self.c = self.child.a * self.child.b
end 
```

我可以很容易地使用@object.calc 来获得结果并在其他计算中使用它。

我的问题是最好的方法是什么。保留它或将其存储在我的数据库中并为每个子更新上传它。如果计算使用更复杂的函数（平方根等......）或者如果我有计算计算，那么存储它可能会更快，或者在我的数据库请求中计算它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:59:21.873

取决于你需要它做什么。如果它是简单的使用而不是动态计算它可能是可以接受的费用，购买所需的程序员时间更少（真正的好处！）。

如果您想做任何类型的过滤或排序，那么您可能希望将其存储在 db 列中并使用某种`before_save`钩子来更新值。

如果这不是一个非常昂贵的操作，例如矩阵乘法，那么无论您采用哪种方式，您都可能永远不会注意到性能差异。

# java - 休眠中左外连接的标准

> ID：13488610
> 
> 赞同：0
> 
> 时间：2012-11-21T07:52:06.113
> 
> 标签：java, hibernate

我有两个名为“A”和“B”的表。表“B”主键映射为“A”表中的外键“b_id”（列名）。在表“A”中，“B”（b_id）的主键可能为空。即在'B'表记录不存在。表“B”将有列“del_flag”

现在我需要从“A”表中选择**所有行**（包括将“b_id”设为空的行）。如果表'A'中的**b_id**不为空，那么我需要检查表'B'的**'del_flag'**是否为'0'（是否为零）。**即**如果存在“B”记录，我只需要显示“del_flag”为 0 的记录。

如何写出上述**条件**的标准。

我正在尝试以下前两个条件。根据我的要求，它应该可以工作。

```
 criteria.createAlias("b", "m");  -----> (1)
   criteria.add(Restrictions.or(Restrictions.isNull("b"),Restrictions.eq("m.del_flag", "0"))); --->(2)

   //criteria.add(Restrictions.isNull("b"));  ----->(3) 
```

**让我们来解决我面临的问题。**

问题出在“ **creatAlias** ”上。我将要求更改为仅选择具有**'b_id'**为**null**的要求。我只执行了**（1）（3）个** 条件（**2被评论**）。我得到了**空记录**。

在挣扎了一段时间后，我也**评论**了条件**（1）**。现在我**得到**了结果集。

如果我执行**(1)**和**(3)**我没有得到结果集。只有**(3)**给出了结果集。

我想 **这可能是**我 **实际要求**的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:07:07.643

尝试这个：

```
session.createCriteria(A.class)
            .createAlias("b", "bClass")
            .setFetchMode("bClass", FetchMode.JOIN)
            .add(Restrictions.or(Restrictions.isNull("bClass"),
                    Restrictions.eq("bClass.delFlag", 0))); 
```

# android - 如何从另一个类设置 TextView（不扩展到 Activity.class）

> ID：13488613
> 
> 赞同：0
> 
> 时间：2012-11-21T07:52:10.507
> 
> 标签：android

我有一个关于从不是 Activity 子类的类中设置 TextView 的问题。该类主要用于处理与 3rd 方服务器的注册和 REST 请求。

从第 3 方服务器获取文本字段信息后，在 Main Activity 中设置 TextView 为时已晚。

*   我不能使用 SharedPreferences 来设置这个信息，因为 MainActivity 已经开始了。
*   我无法通过 Bundle 传递此信息，因为我的 java 类不是活动类。

如何传递此信息并在 MainActivity 中设置 TextView？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:08:42.617

这样做的正确方法是创建一个侦听器。

创建接口：

```
public interface OperationCompletedListener{
void onOperationCompleted(String resultValue);
} 
```

然后在调用 Rest 服务的类中，为此侦听器创建一个变量并设置它的方法。

```
private OperationCompletedListener mListener;

public void setOperationCompletedListener(OperationCompletedListener listener){
mListener=listener;
} 
```

然后，当您的休息服务完成呼叫时，如下所示：

```
if(mListener!=null){
mListener.onOperationCompleted("your value to be passed");
} 
```

然后在包含 TextView 的活动类中，创建一个 OperationCompletedListener 对象，并使用我们之前创建的 set 方法将其设置为另一个类。然后在 onOperationCompleted 方法中，用你的值设置文本视图，你就完成了。

```
private OperationCompletedListener mOperationCompletedListener=new OperationCompletedListener() {

    @Override
    public void onOperationCompleted(String resultValue) {
        yourTextView.setText(resultValue);
    }
};

restServiceClassObject.setOperationCompletedListener(mOperationCompletedListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:57:31.653

您可以创建一个静态方法来更新您的活动类中的文本视图。然后随时从您的其他班级调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:15:21.000

实例化时尝试将其传递`Activity`给非。`Activity class`例如：

```
public class NonActivityClass {
    private Activity parentActivity;
    public NonActivity(Activity parentActivity) {
        this.parentActivity = parentActivity;
    }
} 
```

或者，如果您不想实例化它（它是） ，您可以将它传递`Activity`给您的静态方法。然后，您可以从父级充气或执行 a并设置文本。`NonActivityClass``abstract``TextView``findViewById`

根据我的经验，您永远不应该使用静态**非最终**变量来维护跨活动的引用。当您重新启动应用程序或手机时，或者当 Android 杀死您的应用程序的进程时，变量的引用和状态会丢失，并可能导致您的应用程序崩溃。

# .net - AssemblyNameReference 类不存在，替换是什么？

> ID：13488615
> 
> 赞同：4
> 
> 时间：2012-11-21T07:52:19.763
> 
> 标签：.net, roslyn

我正在使用“入门：语义分析”演练检查 Roslyn API。其中有一部分试图添加对编译的引用：

```
var compilation = Compilation.Create("HelloWorld")
                         .AddReferences(new AssemblyNameReference("mscorlib"))
                         .AddSyntaxTrees(tree); 
```

但似乎 API 已更改，并且“AssemblyNameReference”不再存在。或者文档可能是错误的，因为“AddReferences”的命名表明它需要某种 IEnumerable。

顺便说一句，我正在寻找正确的实现，所以我可以测试它！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T05:39:05.920

2012 年 9 月版的语义分析 (CSharp) 演练包含以下代码：

```
var compilation = Compilation.Create("HelloWorld")
                         .AddReferences(MetadataReference.CreateAssemblyReference("mscorlib"))
                         .AddSyntaxTrees(tree); 
```

您可能正在查看早期 CTP 的演练版本。尝试在 MetadataReference 上使用静态工厂方法。

# compilation - 是否有任何标准方法来存储抽象语法树文件？

> ID：13488617
> 
> 赞同：5
> 
> 时间：2012-11-21T07:52:21.820
> 
> 标签：compilation, abstract-syntax-tree

我正在寻找一种将抽象语法树“转储”到文件中的方法，以便可以使用编译器解析代码，然后以独立于语言和编译器的方式存储代码。然而，我找不到任何被广泛认可的方法来做到这一点。这种方式存在吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T10:17:56.697

没有存储 AST 的标准，或者更重要的是，从您的角度来看，在工具之间*共享它们。*原因是 AST 依赖于语法（不同；C 有“很多”，取决于具体的编译器和版本）和解析技术。

已经有很多尝试跨多种语言定义通用 AST 形式，但没有一个真正奏效；运算符的语义变化太大。（仅考虑“+”：它的真正含义是什么？在 Fortran 中，您可以添加数组，在 Java 中，您可以“添加”字符串）。

但是，可以很容易地写出特定的 AST。一种简单的方法是使用某种符号，其中使用某种嵌套的“括号”标识节点及其递归子节点。

Lisp S 表达式是执行此操作的常用方法。您可以[看到我们的工具生成的 S 表达式样式示例](https://stackoverflow.com/a/6378997/120163)。

人们也为此使用了 XML，但它相当庞大。您可以[在此处查看 XML 输出示例](https://stackoverflow.com/a/5466414/120163)。

# android - 致命例外：主/摄像头

> ID：13488618
> 
> 赞同：1
> 
> 时间：2012-11-21T07:52:38.843
> 
> 标签：android, exception

这是我收到的日志猫

[http://pastebin.com/0qXeHwBq](http://pastebin.com/0qXeHwBq)

相机应用程序的代码位于此处 [https://github.com/CyanogenMod/android_packages_apps_Camera/tree/ics](https://github.com/CyanogenMod/android_packages_apps_Camera/tree/ics)

一旦我启动相机，它会使整个设备崩溃。由于底部附近有一些 pmem 错误，这可能是内核的一个更深层次的问题，但不确定，所以我想我会在这里发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:10:50.210

它在线失败：

```
469.11-20 21:15:22.659: E/AndroidRuntime(1259): Caused by: java.lang.NullPointerException
470.11-20 21:15:22.659: E/AndroidRuntime(1259):     at com.android.camera.ui.CameraPicker.initialize(CameraPicker.java:60) 
```

这是`if (mCameras[CameraInfo.CAMERA_FACING_FRONT].equals(cameraId)) {`

所以我猜你是在没有前置摄像头的手机上运行，​​因为`mCameras[CameraInfo.CAMERA_FACING_FRONT]`它给出了 null。我建议将其更改为：

```
if (mCameras.lenght > 1 && mCameras[CameraInfo.CAMERA_FACING_FRONT].equals(cameraId)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:14:13.797

我想你应该试试我的代码。它如下

```
public class PhotoActivity extends Activity {

    /** The Constant PICK_IMAGE. */
    private static final int PICK_IMAGE = 0;

    /** The Constant PICK_IMAGE_FROM_GALLERY. */
    private static final int PICK_IMAGE_FROM_GALLERY = 1;

    /** The btn cancel. */
    private Button btnPhotoCamera,btnPhotoGallery,btnCancel;

    /** The img view. */
    private ImageView imgView;

    /** The u. */
    private Uri u;

    /* (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_photo_options);

        imgView=(ImageView)findViewById(R.id.imgDisplayImage);
        btnPhotoCamera=(Button)findViewById(R.id.btnPhotoCamera);
        btnPhotoGallery=(Button)findViewById(R.id.btnPhotoGallery);
        btnCancel=(Button)findViewById(R.id.btnCancel);

        btnPhotoCamera.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent camera=new Intent();
                camera.setAction(MediaStore.ACTION_IMAGE_CAPTURE);
                camera.putExtra("crop", "true");

                File f=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);

                u = Uri.fromFile(new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"myFile.jpg"));
                camera.putExtra(MediaStore.EXTRA_OUTPUT, u);
                startActivityForResult(camera, PICK_IMAGE);
            }
        });

        btnPhotoGallery.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(Intent.ACTION_PICK);
                intent.setType("image/*");
                startActivityForResult(intent, PICK_IMAGE_FROM_GALLERY);
            }
        });

        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent goStartUp=new Intent(PhotoActivity.this, StartUpActivity.class);
                goStartUp.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(goStartUp);
                finish();
            }
        });
    }

    /* (non-Javadoc)
     * @see android.app.Activity#onActivityResult(int, int, android.content.Intent)
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if (resultCode==RESULT_OK )
        {
            if(requestCode == PICK_IMAGE) {

                InputStream is=null;
                try {
                    is = this.getContentResolver().openInputStream(u);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
                Bitmap bmp=BitmapFactory.decodeStream(is);
                imgView.setImageBitmap(bmp);
                Log.i("Inside", "PICK_IMAGE");
            }

            if (requestCode == PICK_IMAGE_FROM_GALLERY) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };
                Log.d("data",filePathColumn[0]);
                Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
                cursor.moveToFirst();
                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                cursor.close();
                imgView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
                Log.i("Inside", "PICK_IMAGE_FROM_GALLERY");
            }
        }
    }
} 
```

XML 文件：-

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#f0f0f0" >
    <TextView
        android:id="@+id/lblSelectOptions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="20dp"
        android:text="@string/two_options"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#ff0000" />
    <Button
        android:id="@+id/btnPhotoCamera"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lblSelectOptions"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/camera" />
    <Button
        android:id="@+id/btnPhotoGallery"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnPhotoCamera"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/gallery" />
    <Button
        android:id="@+id/btnCancel"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnPhotoGallery"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="19dp"
        android:text="@string/cancel" />
    <TextView
        android:id="@+id/lblDisplayImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnCancel"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/below_this_text_image_will_be_displayed"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#000000"
        android:textSize="13dp" />
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@+id/lblDisplayImage"
        android:layout_centerInParent="true"
        android:layout_marginTop="10dp"
        android:gravity="bottom" >
        <!--
             <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        -->
        <ImageView
            android:id="@+id/imgDisplayImage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@+id/lblDisplayImage"
            android:layout_centerInParent="true"
            android:contentDescription="@string/area_where_image_is_to_be_displayed" />
        <!-- </ScrollView> -->
    </RelativeLayout>
</RelativeLayout> 
```

还可以根据您的使用修改 Android Manifest 文件：-

```
<manifest....
  <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="21" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
<application....
..........
</application>
</manifest> 
```

# matlab - 函数[n, xout] = hist(Y)中的xout是什么意思？

> ID：13488619
> 
> 赞同：1
> 
> 时间：2012-11-21T07:52:40.370
> 
> 标签：matlab

在 Matlab 函数 [n, xout] = hist(Y) 中，文档并不清楚 xout 的含义。这些是箱的中心值、下限还是上限？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:50:44.857

经过一些测试，xout 似乎是直方图中每个 bin 的**中心值**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:07:30.467

**xout**是直方图中每个 bin 的中心值。这很有用，如果您为**nbins**指定一个值，它会有所不同。

引用的作品：http: [//www.mathworks.com/help/matlab/ref/hist.html](http://www.mathworks.com/help/matlab/ref/hist.html)

# windows - Windows Phone 8 上的 ARM NEON 组件不起作用

> ID：13488620
> 
> 赞同：5
> 
> 时间：2012-11-21T07:52:47.697
> 
> 标签：windows, visual-studio, arm, windows-phone-8, neon

我正在尝试在 .s 文件中调用在 ARM NEON 程序集中编码的函数，如下所示：

```
 AREA myfunction, code, readonly, ARM
  global fun
  align 4
fun
  push  {r4, r5, r6, r7, lr}
  add r7, sp, #12
  push  {r8, r10, r11}
  sub r4, sp, #64
  bic r4, r4, #15
  mov sp, r4
  vst1.64 {d8, d9, d10, d11}, [r4]!
  vst1.64 {d12, d13, d14, d15}, [r4]
  [....] 
```

我正在组装它：

```
armasm.exe -32 func.s func.obj 
```

不幸的是，这不起作用，当我尝试调用该函数时，我遇到了非法指令异常。当我使用 dumpbin.exe 反汇编 .obj 时，它似乎正在反汇编，就好像它是 Thumb 代码一样，尽管程序集中有 ARM 指令（参见上面的代码）。

我怀疑该函数是在 Thumb 模式下调用的，并且默认情况下，所有函数在 Windows 上都假定为 Thumb 模式。虽然看不到有关此的任何信息。

有谁知道这里发生了什么？

编辑：这也发生在 Microsoft Surface 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:32:17.710

VS 2012 默认为 Windows RT 和 Windows Phone 8 生成拇指代码，所以你得到的错误可能是由拇指代码调用 arm 代码引起的。您有两个选择：
1\. 在调用您的函数之前从拇指模式切换到手臂模式（您可以使用 BX asm 指令），或
2\. 您可以尝试使用 ARM/NEON 内在函数在 C++ 中重写您的 NEON 代码 - 它们是受 VS 2012 支持。只需包含“arm_neon.h”即可。
对于 ARM 内在函数参考，请查看以下链接：http: [//msdn.microsoft.com/en-us/library/hh875058.aspx](http://msdn.microsoft.com/en-us/library/hh875058.aspx)
对于 NEON 内在函数参考，请查看以下链接：http: [//infocenter.arm.com/help /topic/com.arm.doc.dui0491c/DUI0491C_arm_compiler_reference.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.dui0491c/DUI0491C_arm_compiler_reference.pdf)

上面链接中的这些 NEON 内在函数通常受 VS 2012 支持，但可能存在一些小的差异 - 如果不确定，请检查“arm_neon.h”包含以找出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T04:02:02.320

您可以在 Thumb 模式下使用 bx 指令开始您的汇编代码，然后简单地分支到同一源文件中的 ARM 部分。

而且您不必在最后切换回 Thumb 模式，因为您将在 bx 或 pop {pc} 中完成 ARM 功能，它会自动进行切换。

我的回答是 WAAAAAAY 晚了，但我真的很好奇它是否适用于 WP。（我没有）

# python - 3D 阵列上的快速插值

> ID：13488631
> 
> 赞同：12
> 
> 时间：2012-11-21T07:53:21.083
> 
> 标签：python, numpy, scipy, interpolation

我有一个 3D 数组，我需要在一个轴（最后一个维度）上进行插值。比方说`y.shape = (nx, ny, nz)`，我想`nz`对每个进行插值`(nx, ny)`。但是，我想在每个`[i, j]`.

这是一些示例代码。如果我想插入单个值，比如说`new_z`，我会这样`scipy.interpolate.interp1d`使用

```
# y is a 3D ndarray
# x is a 1D ndarray with the abcissa values
# new_z is a number
f = scipy.interpolate.interp1d(x, y, axis=-1, kind='linear')
result = f(new_z) 
```

但是，对于这个问题，我真正想要的是`new_z`为每个`y[i, j]`. 所以我这样做：

```
# y is a 3D ndarray
# x is a 1D ndarray with the abcissa values
# new_z is a 2D array
result = numpy.empty(y.shape[:-1])
for i in range(nx):
    for j in range(ny):
        f = scipy.interpolate.interp1d(x, y[i, j], axis=-1, kind='linear')
        result[i, j] = f(new_z[i, j]) 
```

不幸的是，对于多个循环，这变得低效且缓慢。有没有更好的方法来做这种插值？线性插值就足够了。一种可能性是在 Cython 中实现这一点，但我试图避免这种情况，因为我希望能够灵活地更改为三次插值并且不想在 Cython 中手动完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T01:41:33.277

为了加快高阶插值，您可以`interp1d()`只调用一次，然后使用模块中的`_spline`属性和低级函数。这是代码：`_bspleval()``_fitpack`

```
from scipy.interpolate import interp1d
import numpy as np

nx, ny, nz = 30, 40, 50
x = np.arange(0, nz, 1.0)
y = np.random.randn(nx, ny, nz)
new_x = np.random.random_integers(1, (nz-1)*10, size=(nx, ny))/10.0

def original_interpolation(x, y, new_x):
    result = np.empty(y.shape[:-1])
    for i in xrange(nx):
        for j in xrange(ny):
            f = interp1d(x, y[i, j], axis=-1, kind=3)
            result[i, j] = f(new_x[i, j])
    return result

def fast_interpolation(x, y, new_x):
    from scipy.interpolate._fitpack import _bspleval
    f = interp1d(x, y, axis=-1, kind=3)
    xj,cvals,k = f._spline
    result = np.empty_like(new_x)
    for (i, j), value in np.ndenumerate(new_x):
        result[i, j] = _bspleval(value, x, cvals[:, i, j], k, 0)
    return result

r1 = original_interpolation(x, y, new_x)
r2 = fast_interpolation(x, y, new_x)

>>> np.allclose(r1, r2)
True

%timeit original_interpolation(x, y, new_x)
%timeit fast_interpolation(x, y, new_x)
1 loops, best of 3: 3.78 s per loop
100 loops, best of 3: 15.4 ms per loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T13:10:20.433

我不认为`interp1d`有一种方法可以快速做到这一点，所以你不能避免这里的循环。

您可能仍然可以通过使用 编码线性插值来避免 Cython `np.searchsorted`，如下所示（未测试）：

```
def interp3d(x, y, new_x):
    assert x.ndim == 1 and y.ndim == 3 and new_x.ndim == 2
    assert y.shape[:2] == new_x.shape and x.shape == y.shape[2:]

    nx, ny = y.shape[:2]
    new_x = new_x.ravel()
    j = np.arange(len(new_x))
    k = np.searchsorted(x, new_x).clip(1, len(x) - 1)
    y = y.reshape(-1, x.shape[0])
    p = (new_x - x[k-1]) / (x[k] - x[k-1])
    result = (1 - p) * y[j,k-1] + p * y[j,k]
    return result.reshape(nx, ny) 
```

但是，对三次插值没有帮助。

**编辑**：使它成为一个功能并修复了一个错误。一些时间与 Cython（500x500x500 网格）：

```
In [58]: %timeit interp3d(x, y, new_x)
10 loops, best of 3: 82.7 ms per loop

In [59]: %timeit cyfile.interp3d(x, y, new_x)
10 loops, best of 3: 86.3 ms per loop

In [60]: abs(interp3d(x, y, new_x) - cyfile.interp3d(x, y, new_x)).max()
Out[60]: 2.2204460492503131e-16 
```

不过，有人可能会争辩说 Cython 代码更容易阅读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T13:51:28.620

由于上面的 numpy 建议花费了太长时间，我可以等待，所以这里是 cython 版本以供将来参考。从一些松散的基准来看，它的速度大约快了 3000 倍（当然，它只是线性插值，并没有那么多，`interp1d`但可以用于此目的）。

```
import numpy as N
cimport numpy as N
cimport cython

DTYPEf = N.float64
ctypedef N.float64_t DTYPEf_t

@cython.boundscheck(False) # turn of bounds-checking for entire function
@cython.wraparound(False)  # turn of bounds-checking for entire function
cpdef interp3d(N.ndarray[DTYPEf_t, ndim=1] x, N.ndarray[DTYPEf_t, ndim=3] y,
               N.ndarray[DTYPEf_t, ndim=2] new_x):
    """
    interp3d(x, y, new_x)

    Performs linear interpolation over the last dimension of a 3D array,
    according to new values from a 2D array new_x. Thus, interpolate
    y[i, j, :] for new_x[i, j].

    Parameters
    ----------
    x : 1-D ndarray (double type)
        Array containg the x (abcissa) values. Must be monotonically
        increasing.
    y : 3-D ndarray (double type)
        Array containing the y values to interpolate.
    x_new: 2-D ndarray (double type)
        Array with new abcissas to interpolate.

    Returns
    -------
    new_y : 3-D ndarray
        Interpolated values.
    """
    cdef int nx = y.shape[0]
    cdef int ny = y.shape[1]
    cdef int nz = y.shape[2]
    cdef int i, j, k
    cdef N.ndarray[DTYPEf_t, ndim=2] new_y = N.zeros((nx, ny), dtype=DTYPEf)

    for i in range(nx):
        for j in range(ny):
            for k in range(1, nz):
                 if x[k] > new_x[i, j]:
                     new_y[i, j] = (y[i, j, k] - y[i, j, k - 1]) * \
                  (new_x[i, j] - x[k-1]) / (x[k] - x[k - 1]) + y[i, j, k - 1]
                     break
    return new_y 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T14:37:21.967

以[@pv. 的回答](https://stackoverflow.com/a/13494026/709852)为基础，并对内部循环进行矢量化，以下给出了显着的加速（编辑：将昂贵的更改`numpy.tile`为 using `numpy.lib.stride_tricks.as_strided`）：

```
import numpy
from scipy import interpolate

nx = 30
ny = 40
nz = 50

y = numpy.random.randn(nx, ny, nz)
x = numpy.float64(numpy.arange(0, nz))

# We select some locations in the range [0.1, nz-0.1]
new_z = numpy.random.random_integers(1, (nz-1)*10, size=(nx, ny))/10.0

# y is a 3D ndarray
# x is a 1D ndarray with the abcissa values
# new_z is a 2D array

def original_interpolation():
    result = numpy.empty(y.shape[:-1])
    for i in range(nx):
        for j in range(ny):
            f = interpolate.interp1d(x, y[i, j], axis=-1, kind='linear')
            result[i, j] = f(new_z[i, j])

    return result

grid_x, grid_y = numpy.mgrid[0:nx, 0:ny]
def faster_interpolation():
    flat_new_z = new_z.ravel()
    k = numpy.searchsorted(x, flat_new_z)
    k = k.reshape(nx, ny)

    lower_index = [grid_x, grid_y, k-1]
    upper_index = [grid_x, grid_y, k]

    tiled_x = numpy.lib.stride_tricks.as_strided(x, shape=(nx, ny, nz), 
        strides=(0, 0, x.itemsize))

    z_upper = tiled_x[upper_index]
    z_lower = tiled_x[lower_index]

    z_step = z_upper - z_lower
    z_delta = new_z - z_lower

    y_lower = y[lower_index]
    result = y_lower + z_delta * (y[upper_index] - y_lower)/z_step

    return result

# both should be the same (giving a small difference)
print numpy.max(
        numpy.abs(original_interpolation() - faster_interpolation())) 
```

这在我的机器上给出了以下时间：

```
In [8]: timeit foo.original_interpolation()
10 loops, best of 3: 102 ms per loop

In [9]: timeit foo.faster_interpolation()
1000 loops, best of 3: 564 us per loop 
```

转到和`nx = 300`，可以得到 130 倍的加速：`ny = 300``nz = 500`

```
In [2]: timeit original_interpolation()
1 loops, best of 3: 8.27 s per loop

In [3]: timeit faster_interpolation()
10 loops, best of 3: 60.1 ms per loop 
```

您需要编写自己的三次插值算法，但这不应该那么难。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T17:43:59.813

尽管有几个不错的答案，但他们仍然在一个固定的 500 长数组中进行 250k 插值：

```
j250k = np.searchsorted( X500, X250k )  # indices in [0, 500) 
```

这可以通过 LUT、查找表（例如 5k 个插槽）来加速：

```
lut = np.interp( np.arange(5000), X500, np.arange(500) ).round().astype(int)
xscale = (X - X.min()) * (5000 - 1) \
        / (X.max() - X.min()) 
j = lut.take( xscale.astype(int), mode="clip" )  # take(floats) in numpy 1.7 ?

#---------------------------------------------------------------------------
# X     |    |       | |             |
# j     0    1       2 3             4 ...
# LUT   |....|.......|.|.............|....  -> int j (+ offset in [0, 1) )
#--------------------------------------------------------------------------- 
```

`searchsorted`相当快，时间〜ln2 500，所以这可能不会快多少。
但是 LUT 在 C 中*非常*快，这是一个简单的速度/内存权衡。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-21T13:52:49.293

您可以为此使用[map_coordinates](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html)：

```
from numpy import random, meshgrid, arange
from scipy.ndimage import map_coordinates

(nx, ny, nz) = (4, 5, 6)
# some random array
A = random.rand(nx, ny, nz)

# random floating-point indices in [0, nz-1]
Z = random.rand(nx, ny)*(nz-1)

# regular integer indices of shape (nx,ny)
X, Y = meshgrid(arange(nx), arange(ny), indexing='ij')

coords = (X, Y, Z) # X, Y, and Z are of shape (nx, ny)

print map_coordinates(A, coords, order=1, cval=-999.) 
```

# perl - 带有Perl的excel文件中的列标题

> ID：13488633
> 
> 赞同：1
> 
> 时间：2012-11-21T07:53:30.850
> 
> 标签：perl, excel

我有一个包含许多列的 Excel 文件，但我只需要对其中的 3 列进行一些计算。

我`SpreadSheet::ParseExcel`用来遍历我的 Excel 文件。如何使用 perl 指定我想要的列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:49:18.330

```
#!/usr/bin/perl -w

use strict;
use Spreadsheet::ParseExcel;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse('Book1.xls');

if ( !defined $workbook ) {
    die $parser->error(), ".\n";
}

for my $worksheet ( $workbook->worksheets() ) {

    my ( $row_min, $row_max ) = $worksheet->row_range();
    my @columns = (1,5,6) # enter your 3 columns here

    for my $row ( $row_min .. $row_max ) {
        for my $col (@columns) {

            my $cell = $worksheet->get_cell( $row, $col );
            next unless $cell;

            # do the calculations here
            print "Row, Col    = ($row, $col)\n";
            print "Value       = ", $cell->value(),       "\n";
            print "Unformatted = ", $cell->unformatted(), "\n";
            print "\n";
            # operations done
        }
    }
} 
```

[来源： Spreadsheet::ParseExcel](https://metacpan.org/module/Spreadsheet%3a%3aParseExcel)模块的文档。

# android - 无需编辑文本即可收听虚拟键盘按键

> ID：13488638
> 
> 赞同：2
> 
> 时间：2012-11-21T07:53:43.677
> 
> 标签：android, android-layout, android-virtual-keyboard

在 Fragment onCreateView 方法中以这种方式强制键盘时，是否有办法获取关键事件：

```
 getActivity().getWindow().setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

还需要键盘处于数字模式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:29:15.693

如果您在活动中覆盖 onKeyDown 方法，则可以收听键盘按下

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            ...
            return true;
            ...
        default:
            return super.onKeyDown(keyCode, event);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:24:26.250

即使您没有任何要关注的编辑文本，也有两种方法可以显示软键盘，

**第一的-**

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInputFromWindow(viewToAnchorTo.getWindowToken(), 0); 
```

**第二-**

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

# javascript - jquery .css() 出现问题并获得样式属性的 css

> ID：13488639
> 
> 赞同：0
> 
> 时间：2012-11-21T07:53:47.607
> 
> 标签：javascript, jquery, html, css

我想使用 css() 为元素添加样式并保存它第一步工作正常但是当我想保存它时 jquery 给我的代码太详细了例如

```
<div id="d"></div>

$('#d').css("border-radius","55px"); 
```

和

```
alert($('#d').attr('style')); 
```

给

```
border-top-left-radius: 55px;
border-top-right-radius:55px;
border-bottom-right-radius:55px;
border-bottom-left-radius:55px; 
```

反正有没有得到不太详细的代码，比如

```
border-radius:55px 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:36:06.673

通过捕获我设置属性值的所有输入[type = text]，我最终得到了不同的方法，在那里我可以完全控制输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:56:26.143

尝试这个

```
alert($('#d').attr('style')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:56:53.523

我认为您可以通过以下方式看到它：

```
 $('#d').css("border-radius"); 
```

或者可能

```
 $('#d').attr("style"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:59:41.573

尝试这样的事情

```
alert($('#d').css(border-radius')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:35:34.573

我在 Firefox 中对此进行了测试，我得到了：

```
border-radius: 55px 55px 55px 55px; 
```

在测试的其他浏览器中，我得到了您所写的内容。输出似乎是特定于浏览器的 - 如果您检查 DOM 中的元素，即使在那里，它在 Firefox 中的编写方式也与我测试的其他浏览器不同（Safari、Chrome、Opera 都编写了明确的扩展定义）。

也发现了这一点，尽管在不同的背景下：

> 不同的浏览器可能会返回逻辑上但文本上不相等的 CSS 颜色值，例如 #FFF、#ffffff 和 rgb(255,255,255)。 [http://api.jquery.com/css/](http://api.jquery.com/css/)

总之，如果您想要特定格式的样式定义，则必须对`attr('style')`返回的字符串执行正则表达式替换之类的操作。希望这可以帮助。

# ruby - 基于其他音频流创建音频流

> ID：13488643
> 
> 赞同：0
> 
> 时间：2012-11-21T07:54:18.163
> 
> 标签：ruby, proxy, streaming, audio-streaming, shoutcast

是否可以基于其他音频流创建实时音频流？我正在考虑一个代理，它可以获取两个音频流（例如广播流），并根据时间切换到其中一个。而且，如果可能的话，为了有一些时间进行分析，我将实现某种缓存，以便我可以流式传输新创建的流时移。

我已经查看了 Shoutcast 服务器，但不知道如何将输入源配置为另一个流。也许还有其他项目可以通过接口处理这个问题。

编程语言并不重要，但首选 Ruby。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:22:53.807

我用基于nodejs的javascript制作了自己的解决方案。[您可以在https://github.com/23tux/personal_node_radio](https://github.com/23tux/personal_node_radio)克隆 repo（个人广播应用程序）。

# asp-classic - oledb 错误 '80040e14' whit [Microsoft] [ODBC SQL Server Driver] [SQL Server] 第 1 行：'=' 附近的语法不正确

> ID：13488644
> 
> 赞同：0
> 
> 时间：2012-11-21T07:54:18.147
> 
> 标签：asp-classic

在我的经典 asp 应用程序中，我试图生成一个 Web 报告并收到以下错误消息：

用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误“80040e14”[Microsoft][ODBC SQL Server Driver][SQL Server]第 1 行：“=”附近的语法不正确。/rpts/displayreporthtml.asp，第 13 行

上述错误消息仅在某些情况下出现，例如当记录数超过 5000 并且记录数不固定时，我的意思是我收到 5432、5442 等记录数的此错误。

**在 Global.asa**

* * *

```
Dim LTConn
set LTConn=Server.CreateObject("adodb.connection")
LTConn.CommandTimeout=5000
LTConn.ConnectionTimeout=5000
LTConn.Open "DSN=xx;uid=sa;pwd=password" 
```

* * *

## **在各自的页面**

```
myquery = "select   k.* from ("&myquery&")k where " & request("filterText") 
set rs=DBConn.execute (myquery) 
```

* * *

请指导我解决问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:55:10.337

在您的 global.asa 中，您创建一个名为的连接字符串`LTConn` 。在您的检索页面中，您似乎调用了一个名为 name 的连接`DBConn`。您的查询不应该调用`LTConn`而不是`BDConn`吗？

# jquery - .sortable() 删除我页面的 css

> ID：13488656
> 
> 赞同：0
> 
> 时间：2012-11-21T07:55:02.550
> 
> 标签：jquery, css, jquery-ui-sortable

我在我的页面上使用 .sortable 功能。问题是它还从我的页面中删除了一个特定的 .css 类。any1 对如何防止 .sortable() 删除css有任何想法吗？

以下是将可排序应用到我的内容的代码部分

```
function makeSortable() {

    $('.column').sortable();
    $(".column").sortable("option", "connectWith", ".column");
    $(".column").sortable("option", "handle", ".moveHeader");
} 
```

如果我在调用此函数之前在 Jquery 中放置了一个断点，则会显示应用于我的内容的特定 css。控制通过的那一刻

```
$('.column').sortable(); 
```

CSS似乎消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:02:07.523

sortable 函数很可能会覆盖您在 google.js.css 文件中定义的 css 值。检查一下。

# iphone - 创建一个传递一些值的饼图

> ID：13488657
> 
> 赞同：2
> 
> 时间：2012-11-21T07:55:07.223
> 
> 标签：iphone, objective-c, ios, pie-chart

我正在 iPad 上制作一个应用程序，该应用程序基于在检测到 400 分中的 280 分之后创建饼图。我必须根据显示总分并获得分数的标记创建饼图。

如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:10:56.933

看看[CorePlot 的](https://code.google.com/p/core-plot/) [CPTPieChart](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_pie_chart.html)类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:21:12.343

参考[MIMChart-Library](https://github.com/ReetuRaj/MIMChart-Library)，每个类别都有不同的样式。

# java - 通过 SFTP 连接时出现 JSchException

> ID：13488661
> 
> 赞同：3
> 
> 时间：2012-11-21T07:55:21.263
> 
> 标签：java, sftp

第一次尝试连接时出现以下异常。此异常仅在第一次发生，当我第二次循环相同时，没有收到异常并且连接成功。谁可以帮我这个事？

```
SftpConnect::init Exception: 
com.jcraft.jsch.JSchException: connection is closed by foreign host
com.jcraft.jsch.JSchException: connection is closed by foreign host
at com.jcraft.jsch.Session.connect(Session.java:240)
at com.jcraft.jsch.Session.connect(Session.java:154)
at com.alcatel.muse.common.sftp.SftpConnect.init(Unknown Source)
at com.alcatel.muse.common.sftp.SftpConnect.<init>(Unknown Source) 
```

# package - 错误在 BiodiversityR 包中使用 box cox 转换时，“0x00000001”处的指令引用了“0x00000001”处的内存

> ID：13488664
> 
> 赞同：2
> 
> 时间：2012-11-21T07:55:32.200
> 
> 标签：package, rstudio, cox-regression, r-commander

我正在尝试使用该`BiodiversityR`包，`Rcommander`因为我需要对一些数据进行 box-cox 转换。但是，即使在尝试使用示例文件时，在菜单中选择 box cox 转换后，我也会收到此错误，然后`Rcommander`关闭 `Rstudio`。它是什么？

```
The instruction at "0x00000001" referenced memory at "0x00000001". The memory could not be "read" 
```

我能做什么？

# objective-c - 如何避免不同的类扩展定义相同的方法

> ID：13488672
> 
> 赞同：0
> 
> 时间：2012-11-21T07:56:14.980
> 
> 标签：objective-c, cocoa, polymorphism, categories

Objective-c 类可以按类别进行扩展。
但是通过过度定义相同的方法在同一类上进行多类别扩展，结果未定义-如下​​情况：

```
@implementation someClass (category1)

- (void)foo {}

@end

@implementation someClass (category2)

- (void)foo {}

@end 
```

在这种情况下，编译器甚至不会显示任何警告消息。在一些大项目中，有不同的人进行维护，这种情况是很难解决的。

所以我的问题是：是否有任何复杂的模式或解决方案可以避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:00:16.517

对于大型项目，一个好的做法是在您的方法名称中添加一个前缀，例如：

```
- (void)nd_foo;
- (void)sp_foo; 
```

# linux - Shell 脚本无法正常运行

> ID：13488676
> 
> 赞同：0
> 
> 时间：2012-11-21T07:56:26.160
> 
> 标签：linux, shell, crontab

我有一个 linux shell 脚本，当从命令行运行时可以完美运行，但是当计划通过 crontab 运行时，它不会给出预期的结果。

该脚本非常简单，它通过使用 pidof 命令检查它的 pid 来检查 mysql-proxy 是否正在运行。如果发现关闭，它会尝试启动代理。

```
# Check if mysql proxy is off
# if found off, attempt to start it

if pidof mysql-proxy 
then
    echo "Proxy running."
else
    echo "Proxy off ... attempting to restart"
    /usr/local/mysql-proxy/bin/mysql-proxy -P 172.20.10.196:3306 --daemon --proxy-backend-addresses=172.20.10.194 --proxy-backend-addresses=172.20.10.195

    if pidof mysql-proxy
    then
        echo "Proxy started"
    else
        echo "Proxy restar failed"
    fi
fi
echo "===============================================" 
```

该脚本保存在文件**check-sql-proxy.sh**中，权限设置为**777**。当我从命令行（sh check-sql-proxy.sh）运行脚本时，它会给出所需的输出。

```
4066
Proxy running.
=============================================== 
```

该脚本还计划在 crontab 中每 5 分钟运行一次

```
*/5 * * * * bash /root/auto-restart-mysql-proxy.sh > /dev/sql-proxy-restart-log.log 
```

但是，当我看到 sql-proxy-restart-log.log 文件时，它包含输出：

```
Proxy off ... attempting to restart
Proxy restar failed
=============================================== 
```

似乎**pidof**命令无法返回正在运行的应用程序的 pid，这使脚本流处于 else 状态。

我无法弄清楚如何解决这个问题，因为当我手动运行脚本时，它工作正常。

任何人都可以帮助我在权限或设置方面缺少什么吗？

提前致谢。穆达瑟

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:59:17.453

检查 shell 是否与您认为的一样（通常是 /bin/sh，而不是 bash）

还要检查 PATH 环境变量。通常，对于 cron 作业，完全限定二进制文件的所有路径是一个好习惯，例如

```
#!/bin/bash
# Check if mysql proxy is off
# if found off, attempt to start it

if /bin/pidof mysql-proxy 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:03:46.573

尝试 pidof /usr/local/mysql-proxy/bin/mysql-proxy （可执行文件的完整路径）

通常，尝试使用与启动 mysql-proxy 实例相同的命令名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:16:05.870

问题似乎`crontab`环境与您的环境不同。

您有 2 个简单而正确的解决方案：

在第一行`crontab`：

```
PATH=/foo:/bar:/qux
SHELL=/bin/bash 
```

或者

```
source ~/.bashrc 
```

在你的脚本中。

# android - 如何以编程方式在 android 的安装/卸载 APK 屏幕上按下按钮

> ID：13488677
> 
> 赞同：0
> 
> 时间：2012-11-21T07:56:36.257
> 
> 标签：android

基本上我想从远程服务器在我的 android 设备上安装/卸载一个应用程序。

我从远程服务器向我的设备发送特定消息（例如安装或卸载）。

但是当设备启动该过程时，系统生成的 Intent 将启动并显示以下消息。

![在此处输入图像描述](../Images/16059f19d234c01c728f6c48e0c1ee09.png) 必须按下 OK 按钮才能继续该过程。

如何以编程方式从远程服务器按下此按钮并继续该过程？

希望你明白我要解释的内容。

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:51:30.727

我正在寻找通过从服务器发送短信来卸载任何应用程序的相同解决方案。贝娄我提供了一些示例代码，它可能会对您有所帮助。但是您需要您的设备作为根设备。要为您的设备生根，请从以下链接下载 s/w [http://forum.xda-developers.com/showthread.php?t=803682](http://forum.xda-developers.com/showthread.php?t=803682)

代码是

```
public class MainActivity extends Activity {

    Context context;

    // boolean isEnabled;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Uninstall();
    }

    private void Uninstall() {
        Process process;
        try {

            process = Runtime.getRuntime().exec("su");
            DataOutputStream os = new DataOutputStream(process.getOutputStream());
            os.writeBytes("mount -o remount,rw -t rfs /dev/stl5 /system; \n");
            os.writeBytes("rm -r /system/app/ActionsContentViewExample.apk; \n");
            os.writeBytes("mount -o remount,ro -t rfs /dev/stl5 /system; \n");
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:36:19.457

恐怕这只能从[游戏商店](https://play.google.com/apps)中实现。单击回收站，但不适用于外部应用程序。

您只能要求系统卸载应用程序。[这是参考](https://stackoverflow.com/a/9622867/418903)。

此外，正如评论中指出的那样：

*   当您打开一个对话框时，选择是用户驱动的。
*   这违反了安全准则。

# visual-studio - 带有 ARM NEON 的 Windows Phone 8 模拟器

> ID：13488679
> 
> 赞同：0
> 
> 时间：2012-11-21T07:56:44.163
> 
> 标签：visual-studio, arm, windows-phone, windows-phone-8, neon

在 ARM 上为 Windows Phone 8 开发应用程序时，如果应用程序具有 ARM NEON 程序集，是否可以模拟或模拟该应用程序？即，代码是为 x86 编译并本机运行，还是有办法实际模拟 ARM NEON 机器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T15:26:07.543

没有模拟器，但有免费的远程设备访问服务，由诺基亚提供，网址为[http://rda.cellulardata.com/devices](http://rda.cellulardata.com/devices)。你不能调试，但你可以看它运行。将一些可见的报告写入您的应用程序，将其发布为测试版，下载到设备并享受。

由于它是测试版，因此无法通过商店搜索获得；你必须输入一个 URL。您自己的网络空间上的链接缩短服务或转发页面将在这里派上用场。

您必须将自己的 Live ID 明确指定为 beta 项目的 beta 测试员帐户。应用商店无法识别“我正在下载我自己的应用程序”的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:37:20.003

Windows Phone 8 模拟器是 x86 环境，因此 ARM 代码无法运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:55:26.057

...让我补充一下，电话设备仍然是 ARM，所以如果你想在设备和模拟器上运行，你需要为 ARM 和 x86 编译你的本机代码。

# iphone - 对视图应用混合模式而不指定颜色

> ID：13488680
> 
> 赞同：1
> 
> 时间：2012-11-21T07:56:49.420
> 
> 标签：iphone, objective-c, drawing, core-graphics, alphablending

我正在创建一个绘图应用程序，我需要在我的应用程序中添加混合模式功能。我正在做的是通过核心图形绘制我的圆圈并绘制许多其他形状。我想在应用程序中添加混合效果，如图所示：-

![在此处输入图像描述](../Images/ee3598e7606287b972a5d9c7ad28415d.png)

我对形状清晰的背景视图和绘制圆圈的代码如下：-

```
CGContextSetFillColorWithColor(context, [ [UIColor colorWithRed:244.0/255.0 green:19.0/255.0 blue:33.0/255.0 alpha:1] CGColor]);
CGContextSetBlendMode(context, kCGBlendModeDifference);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 40, 40);
CGContextAddLineToPoint(context, 0, 40);
CGContextClosePath(context);
CGContextFillPath(context); 
```

但是当添加多个圆形视图时，它们没有显示如上图所示的效果。

我查看了具有混合选项的石英演示代码，在该代码中，它们是通过为源和背景设置颜色来实现的。

但就我而言，我不想提供任何颜色选项，而且我的背景更多是清晰的颜色。

请告诉我我的想法是否可行。

请提供有关如何实现此目标的任何建议。

任何建议将不胜感激。提前致谢。

# android - Nexus 7 错误“SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度”

> ID：13488695
> 
> 赞同：0
> 
> 时间：2012-11-21T07:57:35.660
> 
> 标签：android, android-layout

我从 Juno 4.21 和 SDK 21 Api 17 创建了标准的“hello world”应用程序。接受 Eclipse 的所有默认值

我使用拖放图形界面添加了一个编辑文本字段名称。我没有为活动添加任何逻辑

使用 Nexus 7 设备 Android 4.2 运行我反复收到以下错误

```
E/SpannableStringBuilder(6610): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

当我在模拟器上运行但包括 Nexus 7 模拟器时，我没有收到任何错误，在我的华为 ICS 4.0.3 设备上也可以正常工作。这让我相信这是我的 Nexus 7 的问题。

请问有人可以在 Nexus 7 或其他 4.2 设备上对此进行测试。

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:ems="10"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:06:36.103

所以我无法很好地解释为什么会发生这种情况，但它似乎与自动完成有关。我有一个显示用户名和密码字段的标准登录对话框。我让它表现的唯一方法是：

```
this.username.setInputType( InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS );
this.password.setInputType( InputTypeTYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS ); 
```

这也可以使用相应的标签在 XML 中完成。

# rest - RESTful 设计：何时使用子资源？

> ID：13488697
> 
> 赞同：63
> 
> 时间：2012-11-21T07:57:46.310
> 
> 标签：rest, api-design

在设计资源层次结构时，什么时候应该使用子资源？

我曾经相信，当一个资源没有另一个资源就无法存在时，它应该被表示为它的子资源。我最近遇到了这个反例：

*   员工在所有公司中都是唯一可识别的。
*   员工的访问控制和生命周期取决于公司。

我将其建模为：`/companies/{companyName}/employee/{employeeId}`

请注意，我不需要查找公司来查找员工，我应该这样做吗？如果我这样做了，我就要付出代价来查找我不需要的信息。如果我不这样做，此 URL 会错误地返回 HTTP 200：

`/companies/{nonExistingName}/employee/{existingId}`

1.  我应该如何表示一个资源*属于*另一个的事实？
2.  *我应该如何表示没有另一个资源就无法识别*的事实？
3.  子资源意味着什么关系而不意味着建模？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-10T02:03:42.470

一年后，我以以下妥协结束（对于包含唯一标识符的数据库行）：

1.  在根处为所有资源分配一个规范的 URI（例如`/companies/{id}`和`/employees/{id}`）。
2.  如果一个资源不能没有另一个资源就存在，它应该被表示为它的子资源；但是，将该操作视为搜索引擎查询。这意味着，不是立即执行操作，而是简单地返回`HTTP 307 ("Temporary redirect")`指向规范的 URI。这将导致客户端对规范 URI 重复操作。
3.  您的规范文档应该只公开与您的概念模型匹配的根资源（不依赖于实现细节）。实现细节可能会改变（您的行可能不再是唯一可识别的），但您的概念模型将保持不变。在上面的例子中，你会告诉客户`/companies`但不是`/employees`.

这种方法有以下好处：

1.  它消除了进行不必要的数据库查找的需要。
2.  它将每个请求的健全性检查次数减少到一个。顶多，我要检查一个员工是否属于一家公司，但我不再需要对`/companies/{companyId}/employees/{employeeId}/computers/{computerId}`.
3.  它对数据库的可伸缩性有不同的影响。一方面，您通过在较短的时间内锁定较少的表来减少锁定争用。但另一方面，您会增加死锁的可能性，因为每个根资源必须使用不同的锁定顺序。我不知道这是净收益还是损失，但我感到欣慰的是，无论如何[都无法防止数据库死锁](https://stackoverflow.com/a/16553083/14731)，并且由此产生的锁定规则更易于理解和实施。如有疑问，请选择简单。
4.  我们的概念模型保持不变。通过确保规范文档只公开我们的概念模型，我们可以在将来自由删除包含实现细节的 URI，而不会破坏现有的客户端。请记住，只要您的规范将它们的结构声明为未定义，就没有什么能阻止您在中间 URI 中公开实现细节。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-21T18:29:33.710

> 这是有问题的，因为用户属于特定公司不再明显。

有时这可能会突出您的域模型的问题。为什么用户属于公司？如果我换公司，我是一个全新的人吗？如果我在两家公司工作怎么办？我是两个不同的人吗？

如果答案是肯定的，那么为什么不使用一些公司唯一标识符来访问用户呢？

例如用户名：

`company/foo/user/bar`

（`bar`我的用户名在该特定公司名称空间中是唯一的）

如果答案是否定的，那为什么我自己不是用户（人），`company/users`集合只是指向我：（`<link rel="user" uri="/user/1" />`注：员工似乎更合适）

现在在您的具体示例之外，我认为资源-子资源关系在*使用*而不是*所有权*方面更合适（这就是为什么您正在努力为隐含识别公司的用户识别公司的冗余）。

我的意思是，`users`其实是一个公司资源的子资源，因为*用途*是定义一个公司和它的员工之间的关系——换一种说法就是：你必须先定义一个公司，然后才能开始雇用员工。同样，必须先定义（出生）用户（人），然后才能招募他们。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-22T09:03:12.717

您决定是否应将资源建模为子资源的规则是有效的。您的问题不是由错误的概念模型引起的，而是您将数据库模型泄漏到 REST 模型中。

从概念上看，`employee`如果它只能存在于`company`关系中，则被建模为[组合](http://en.wikipedia.org/wiki/Class_diagram#Composition)。因此`employee`只能通过`company`. 现在数据库开始发挥作用，所有`employee`行都有一个唯一的标识符。

我的建议是不要让数据库模型在您的概念模型中泄漏，因为您将基础设施问题暴露给您的 API。例如，当您决定切换到像 MongoDB 这样的面向文档的数据库时会发生什么，您可以在其中将您的员工建模为公司文档的一部分并且不再具有这个人为的唯一 ID？你想改变你的API吗？

回答您的额外问题

> 我应该如何表示一个资源属于另一个的事实？

通过子资源组合，通过 URL 链接进行其他关联。

> 我应该如何表示没有另一个资源就无法识别的事实？

在您的资源 URL 中使用这两个 id 值，并通过检查“组合”是否存在来确保不要让您的数据库泄漏到您的 API 中。

> 子资源意味着什么关系而不意味着建模？

子资源非常适合组合，但更普遍地说，资源不能在没有父资源的情况下存在并且始终属于一个父资源的模型。你的规则`when a resource could not exist without another, it should be represented as its sub-resource`是这个决定的一个很好的指导。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-18T21:56:32.090

如果子资源在没有其拥有实体的情况下是唯一可识别的，则它不是子资源并且应该有自己的命名空间（即 /users/{user} 而不是 /companies/{*}/users/{user}）。最重要的是：永远不会使用实体的数据库主键作为资源标识符。这是实现细节泄露给外界的最常见错误。您应该始终拥有一个自然的业务密钥（例如用户名或公司编号，而不是用户 ID 或公司 ID）。如果您愿意，可以通过唯一约束来强制执行此类键的唯一性，但是实体的主键永远不应该离开应用程序的持久层，或者至少它不应该成为任何服务的参数方法。如果你遵守这条规则，你应该'

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-02T12:25:36.800

这是解决这种情况的一种方法：

> /companies/{companyName}/employee/{employeeId} -> 返回有关员工的数据，还应包括该人的数据
> 
> /person/{peopleId} -> 返回有关此人的数据

谈论员工而不谈论公司是没有意义的，但是即使没有公司，即使他被多家公司雇用，谈论这个人也确实有意义。一个人的存在与他是否被任何公司雇用无关，但就业的存在确实取决于公司。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-13T17:42:54.033

问题似乎是没有**特定**的公司，但员工在技术上属于某个公司或组织，否则他们可能被称为流浪汉或政客。成为一名员工意味着在某处存在公司/组织关系，但不是特定的关系。员工也可以为多个公司/组织工作。当需要特定的公司背景时，您的原创作品`/companies/{companyName}/users/{id}`

假设您想知道`EmployerContribution`您将使用的 ira/rsp/pension： `/companies/enron/users/fred/EmployerContribution` 您将获得 enron 贡献的特定金额（或 0 美元）。

如果您想要`EmployerContribution`来自任何或所有公司的 s，fred 工作（ed）怎么办？
你不需要一个具体的公司来让它有意义。`/companies/any/employee/fred/EmployerContribution`

当员工的公司无关紧要但作为员工重要时，“任何”显然是一个抽象或占位符。您需要拦截“公司”处理程序以防止数据库查找（尽管不确定为什么公司不会被缓存？可以有多少？）

您甚至可以更改抽象以表示像 Fred 在过去 10 年中受雇的所有公司。 `/companies/last10years/employee/fred/EmployerContribution`

# c++ - 神经网络输出始终为 1

> ID：13488699
> 
> 赞同：-7
> 
> 时间：2012-11-21T07:57:51.163
> 
> 标签：c++, neural-network, artificial-intelligence

我正在开发一个神经网络应用程序，但是当我尝试打印前馈的输出时出现问题：控制台显示此值：

![](../Images/34bc9b8143be58583d70348646fab697.png)

输出总是`1 1 1 1 1`

我使用 3 层，包括 2500 个输入节点、1800 个隐藏节点和 5 个输出节点。我使用 sigmoid 二进制作为激活函数，测试权重固定为 0.5。

当我尝试使用一个非常简单的架构（2 个输入，3 个隐藏，1 个输出）时，它工作得很好，但是现在有这么多节点，我无法手动计算输出，所以我不知道结果是否是对或错。

我的代码是错误的，还是我不能给出固定的重量？我只想做一个前馈，而不是反向传播，输入是从 0 到 1 的随机。

这是network.cpp：

```
#include <stdio.h>
#include <iostream>
#include "network.h"
#include "neuron.h"

using namespace std;

layer::layer(int numberOfNeuron,int numberOfInput,int numberOfOutput):
neuron_layer(numberOfNeuron)
{
    for(int i=0;i<numberOfNeuron;i++)
    {
        neuron_layer[i] = new neuron(numberOfInput,numberOfOutput);
    }
}
layer::~layer()
{

}

int layer::get_number_of_neuron()
{
    return neuron_layer.size();
}

network::network(int layerNumber,int hiddenNeuronNumber):
    layer_network(layerNumber)
{
    this->layer_numbers = layerNumber;
    for(int i=0;i<layerNumber;i++)
    {
        if(i==0)
        {
            layer_network[i] = new layer(2500,5,hiddenNeuronNumber);
        }
        else if(i==1)
        {
            layer_network[i] = new layer(hiddenNeuronNumber,2500,5);
        }
        else if(i==2)
        {
            layer_network[i] = new layer(5,hiddenNeuronNumber,1);
        }
    }
    cout<<endl<<"Input layer : "<<layer_network[0]->get_number_of_neuron()<<endl;
    cout<<"Hidden layer : "<<layer_network[1]->get_number_of_neuron()<<endl;
    cout<<"Output layer : "<<layer_network[2]->get_number_of_neuron()<<endl;
}

network::~network()
{
}

void network::init_input_layer(int inputNeuronNumber,int hiddenNeuronNumber)
{
    for(int i=0;i<inputNeuronNumber;i++)
    {
        for(int j=0;j<hiddenNeuronNumber;j++)
        {
            layer_network[0]->neuron_layer[i]->outputs[j]->weights = 0.5f;
        }
    }
}

void network::init_hidden_layer(int inputNeuronNumber,int hiddenNeuronNumber,int outputNeuronNumber)
{
    for(int i=0;i<hiddenNeuronNumber;i++)
    {
        for(int j=0;j<inputNeuronNumber;j++)
        {
            layer_network[1]->neuron_layer[i]->inputs[j]->weights = layer_network[0]->neuron_layer[j]->outputs[i]->weights;
        }
    }
    for(int k=0;k<hiddenNeuronNumber;k++)
    {
        for(int l=0;l<outputNeuronNumber;l++)
        {
            layer_network[1]->neuron_layer[k]->outputs[l]->weights = 0.5f;
        }
    }
}

void network::init_ouput_layer(int hiddenNeuronNumber,int outputNeuronNumber)
{
    for(int i=0;i<outputNeuronNumber;i++)
    {
        for(int j=0;j<hiddenNeuronNumber;j++)
        {
            layer_network[2]->neuron_layer[i]->inputs[j]->weights = layer_network[1]->neuron_layer[j]->inputs[i]->weights;
        }
    }
} 
```

这是神经元.cpp：

```
#include "neuron.h"
#include <stdio.h>
#include <iostream>

using namespace std;

synapse::synapse()
{

}
synapse::~synapse()
{
}

neuron::neuron(int numberOfInput,int numberOfOutput):
inputs(numberOfInput),outputs(numberOfOutput)
{
    for(int i=0;i<numberOfInput;i++)
    {
        inputs[i] = new synapse();
    }
    for(int i=0;i<numberOfOutput;i++)
    {
        outputs[i] = new synapse();
    }
}
neuron::~neuron()
{
}

int neuron::get_input_size()
{
    int input_length;
    input_length=(int) inputs.size();
    return input_length;
}

int neuron::get_output_size()
{
    int output_length;
    output_length=(int) outputs.size();
    return output_length;
}

void neuron::input_fire()
{
    output_value = inputs[0]->activation_values;
    for(int i=0;i<get_output_size();i++)
    {
        outputs[i]->activation_values = output_value;
    }
}

void neuron::fire()
{
    output_value = 0.0f;
    for(int i=0;i<get_input_size();i++)
    {
        output_value+=(inputs[i]->activation_values)*(inputs[i]->weights);
    }
    //cout<<endl<<"Before Sigmoid"<<output_value;
    output_value = 1.0f / (1.0f+ exp(-output_value));
    //cout<<" After Sigmoid"<<output_value;
    for(int i=0;i<get_output_size();i++)
    {
        outputs[i]->activation_values = output_value;
    }

} 
```

我想我不需要发布 neuron.h 和 network.h 因为它们都只包含声明。我在.cpp 中定义函数。这就是我创建对象的方式：

```
srand (time(NULL));
float inputTest[2500];
network test(3,1800);
test.init_network(1800);
for(int i=0;i<2500;i++)
{
    inputTest[i]=(float)rand()/(float)RAND_MAX;
}
test.feedforward(inputTest); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:30:42.047

我没有检查你的代码，但是......不，你不能像那样使用固定重量。随着输入量的增加，隐藏层中的每个节点都会获得越来越大的值。Sigmoid 会将较大的值缩放为 1。

想一想：假设您有 100 个输入，每个输入的“随机”输入值为 0.1。为简单起见，让我们忘记其他一切。由于您的权重是恒定的 0.5，因此隐藏层中的所有节点将获得相同的值，该值由每个输入*权重的“sigmoided”总和组成，即 sigm(0.1*0.5*100) = sigm(5) -> ~ 1

因此，具有恒定正权重的正输入越多，所有隐藏层的输出就越接近 1。

# c# - iOS，在一个应用程序中运行两个 SDK（插件）包

> ID：13488700
> 
> 赞同：0
> 
> 时间：2012-11-21T07:57:54.630
> 
> 标签：c#, android, ios

我只需要知道，我们正在构建一个应用程序，并且它具有我们需要的所有功能，它必须运行两个第三方 SDK（插件/内核）包。我们遇到了错误，我只想知道，这可能与 iOS 相关吗，它在 Android 中完美运行。

以下是我收到重复符号 _OBJC_CLASS_$_SBJSON 的一些错误：

```
 /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-    dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-   iphoneos/AKTest.build/Objects-normal/armv7/SBJSON.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-   iphoneos/libWikitudeSDK.a(SBJSON.o)
    duplicate symbol _OBJC_IVAR_$_SBJSON.jsonParser in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJSON.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJSON.o)
    duplicate symbol _OBJC_IVAR_$_SBJSON.jsonWriter in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJSON.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJSON.o)
    duplicate symbol _OBJC_METACLASS_$_SBJSON in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJSON.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJSON.o)
    duplicate symbol _OBJC_CLASS_$_SBJsonBase in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonBase.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonBase.o)
    duplicate symbol _OBJC_IVAR_$_SBJsonBase.depth in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonBase.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonBase.o)
    duplicate symbol _OBJC_IVAR_$_SBJsonBase.errorTrace in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonBase.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonBase.o)
    duplicate symbol _OBJC_IVAR_$_SBJsonBase.maxDepth in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonBase.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonBase.o)
     duplicate symbol _OBJC_METACLASS_$_SBJsonBase in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonBase.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonBase.o)
     duplicate symbol _SBJSONErrorDomain in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonBase.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonBase.o)
    duplicate symbol _OBJC_CLASS_$_SBJsonParser in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonParser.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonParser.o)
    duplicate symbol _OBJC_IVAR_$_SBJsonParser.c in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonParser.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonParser.o)
    [11:13:03 AM] Rakesh Kiron: duplicate symbol _OBJC_METACLASS_$_SBJsonParser in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonParser.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonParser.o)
    duplicate symbol _OBJC_CLASS_$_SBJsonWriter in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonWriter.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonWriter.o)
    duplicate symbol _OBJC_IVAR_$_SBJsonWriter.humanReadable in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonWriter.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonWriter.o)
    symbol _OBJC_IVAR_$_SBJsonWriter.sortKeys in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonWriter.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonWriter.o)
    duplicate symbol _OBJC_METACLASS_$_SBJsonWriter in:
    /Users/rakeshkiron/Library/Developer/Xcode/DerivedData/AKTest-dyqvtearxdsehagqgoqznsbcegfu/Build/Intermediates/AKTest.build/Debug-iphoneos/AKTest.build/Objects-normal/armv7/SBJsonWriter.o
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(SBJsonWriter.o)
    duplicate symbol _OBJC_CLASS_$_WTARObjectInterface in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(WTARObjectInterface-EAE25FBA022FD861.o)
    duplicate symbol _OBJC_METACLASS_$_WTARObjectInterface in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(WTARObjectInterface-EAE25FBA022FD861.o)
    duplicate symbol _OBJC_CLASS_$_WTTrackerInterface in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(WTTrackerInterface-C7F3C07848048053.o)
    duplicate symbol _OBJC_METACLASS_$_WTTrackerInterface in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(WTTrackerInterface-C7F3C07848048053.o)
    duplicate symbol _OBJC_CLASS_$_WTTrackable2dObjectInterface in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(WTTrackable2dObjectInterface-E5FBF6EFA7F12643.o)
    duplicate symbol _OBJC_METACLASS_$_WTTrackable2dObjectInterface in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(WTTrackable2dObjectInterface-E5FBF6EFA7F12643.o)
    duplicate symbol __ZN26iOSPlatformServiceProvider11stopServiceESs in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
    duplicate symbol __ZN26iOSPlatformServiceProvider12startServiceESs in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
     duplicate symbol __ZN26iOSPlatformServiceProvider26getPlatformServiceProviderEv in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
    duplicate symbol __ZN26iOSPlatformServiceProviderC1EP6UIViewP7CALayer in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
    duplicate symbol __ZN26iOSPlatformServiceProviderC2EP6UIViewP7CALayer in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
    duplicate symbol __ZTI26iOSPlatformServiceProvider in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
    duplicate symbol __ZTS26iOSPlatformServiceProvider in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
     duplicate symbol __ZTV26iOSPlatformServiceProvider in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(iOSPlatformServiceProvider-576A05213373E338.o)
     duplicate symbol _OPENSSL_showfatal in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(cryptlib.o
    [11:13:20 AM] Rakesh Kiron:     /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(cryptlib.o)
    duplicate symbol _OpenSSLDie in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(cryptlib.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(cryptlib.o)
    duplicate symbol _CRYPTO_free_locked in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    duplicate symbol _CRYPTO_malloc in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    d uplicate symbol _CRYPTO_realloc in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    duplicate symbol _CRYPTO_free in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    duplicate symbol _CRYPTO_push_info_ in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem_dbg.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    duplicate symbol _CRYPTO_pop_info in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem_dbg.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    duplicate symbol _CRYPTO_realloc_clean in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem.o)
    duplicate symbol _OPENSSL_cleanse in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem_clr.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem_clr.o)
    duplicate symbol _cleanse_ctr in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem_clr.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem_clr.o)
    duplicate symbol _CRYPTO_is_mem_check_on in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem_dbg.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem_dbg.o)
    duplicate symbol _CRYPTO_mem_ctrl in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(mem_dbg.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(mem_dbg.o)
    duplicate symbol _CRYPTO_get_ex_data in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(ex_data.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(ex_data.o)
    duplicate symbol _CRYPTO_set_ex_data in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(ex_data.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(ex_data.o)
    duplicate symbol _CRYPTO_free_ex_data in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(ex_data.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(ex_data.o)
    duplicate symbol _CRYPTO_new_ex_data in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(ex_data.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(ex_data.o)
    duplicate symbol _OBJ_NAME_init in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(o_names.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(o_names.o)
   duplicate symbol _OBJ_NAME_get in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(o_names.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(o_names.o)
    duplicate symbol _OBJ_obj2nid in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(obj_dat.o)
       /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(obj_dat.o)
    duplicate symbol _OBJ_nid2sn in:
    /Users/rakeshkiron/Desktop/trunk_1_1_1/iOS/SDK/SDK/lib/Release-iphoneos/libWikitudeSDK.a(obj_dat.o)
    /Users/rakeshkiron/Desktop/apple image recognition/AurasmaKit-1.4.26 (1)/AurasmaKit/libAurasmaKit.a(obj_dat.o) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:30:11.313

有两个地方你有同样的东西。删除其中一个，错误就会消失...例如，您有两个定义 SBJsonWriter 的地方...在搜索栏中键入 SBJsonWriter 以找到这两个地方..

# jquery - 支持滴管的Jquery Color Picker

> ID：13488702
> 
> 赞同：5
> 
> 时间：2012-11-21T07:57:56.647
> 
> 标签：jquery, color-picker

我在 jQuery 中寻找一个颜色选择器，它也支持滴管功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T21:52:36.177

我认为这就是你需要的 [https://github.com/sstrudeau/jquery-dropper](https://github.com/sstrudeau/jquery-dropper)

# jquery - 如何使用 Twitter Bootstrap 切换模式窗口？

> ID：13488706
> 
> 赞同：2
> 
> 时间：2012-11-21T07:58:07.417
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我有两个模式窗口（“注册”和“登录”），我使用 Twitter Bootstrap 显示它们。

现在我需要这些行为：窗口“登录”是可见的，它有按钮“注册”，它必须关闭窗口“登录”并显示窗口“注册”。

a) 没有手动 Javascript 代码是否可行？

b）如何手动关闭窗口？

```
$('login').modal('hide'); 
```

不管用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T14:25:45.943

像这样[http://jsfiddle.net/bbAsC/](http://jsfiddle.net/bbAsC/) ??

两个按钮，注册和登录 - 分别是两个模式，如果您在登录模式中单击“注册”，它将关闭登录并显示注册。

标记

```
<a href="#login" role="button" class="btn" data-toggle="modal">Login</a>
<a href="#register" role="button" class="btn" data-toggle="modal">Register</a>

<!-- Modals -->
<div id="login" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3>Login</h3>
  </div>
  <div class="modal-body">
    <p>body</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">OK</button>
    <button class="btn btn-primary" id="login-register">Register</button>
  </div>
</div>

<div id="register" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3>Register</h3>
  </div>
  <div class="modal-body">
    <p>body</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">OK</button>
    <button class="btn btn-primary">Cancel</button>
  </div>
</div> 
```

脚本

```
$("#login-register").click(function() {
    $("#login").modal('hide');
    $("#register").modal('show');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T14:15:37.530

a）您想要完成的工作需要一些（简单的）javascript/jquery。

```
$("#next").click(function(){
    $('#firstModal').modal('hide');
    $('#secondModal').modal('show');
});​ 
```

有关完整标记，请参阅[工作小提琴](http://jsfiddle.net/technotarek/QgNK8/)。更高级的版本可能希望在 #firstModal 隐藏步骤上使用回调（可能通过使用[.on 技术](https://stackoverflow.com/questions/11821865/twitter-bootstrap-modal-how-to-pass-data-to-callback-function)）。

b）如果您的模式的 ID 是“登录”，如您的问题所示，那么它不起作用，因为您遗漏了哈希：

```
$('#login').modal('hide'); 
```

# jakarta-ee - struts2 使用日期标签

> ID：13488708
> 
> 赞同：0
> 
> 时间：2012-11-21T07:58:36.283
> 
> 标签：jakarta-ee, struts2

我使用的日期标签如下：

```
<s:date name="datePosted"   nice="true" /> 
```

如果日期设置为 2012-11-21 13:03:20，则显示为 13 小时 25 分钟前。我需要它来比较当前时间并显示它们之间的差异。就像 2 分 30 秒前一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:51:34.753

对不起。这是我在后端的错误。我从中检索的日期实际上来自 mysql Timestamp 字段。我正在使用`recordSet.getDate()`而不是`recordSet.getTimestamp()`. 我的解决方案是使用类似的东西：

```
Date datePosted=new Date(rs.getTimestamp().getTime()); 
```

这会将时间（长）值从时间戳对象复制到日期对象。

# iphone - 如何在导航栏中以编程方式设置图片？

> ID：13488710
> 
> 赞同：0
> 
> 时间：2012-11-21T07:58:39.863
> 
> 标签：iphone, xcode, icons, navbar, detailview

我有一个带有后退按钮和视图名称的导航栏的详细视图。导航栏以编程方式设置。显示的名称是这样设置的。

`self.title = NSLocalizedString(name, @"");`

名称取决于呈现的视图。

现在我还想在导航栏上显示一个小图标，这也取决于视图。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:03:28.553

您可以**将背景图像设置为导航栏**使用此

投放`didFinishLaunchingWithOptions`

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"title_bar.png"] forBarMetrics:UIBarMetricsDefault]; 
```

或者您可以使用在任何视图中 **设置导航栏图像**

```
UINavigationBar *navBar = [[self navigationController] navigationBar];
    UIImage *image = [UIImage imageNamed:@"TopBar.png"];
    [navBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

或者您可以**在 NavigationBar** [Link上设置视图](https://stackoverflow.com/questions/13890062/set-titleview-for-all-navigationcontroller-and-navigationitem/13890354#13890354)

```
[[UINavigationBar appearance] addSubview:yourView]; 
```

或者

```
self.navigationItem.titleView = YourView; 
```

并使用 h**设置标题**

```
self.navigationItem.title = @"Your Title"; 
```

你可以使用这个来获取 navigationBarButton

```
-(void)getRightBarBtn
{
    UIButton *Btn =[UIButton buttonWithType:UIButtonTypeCustom];

    [Btn setFrame:CGRectMake(0.0f,0.0f,68.0f,30.0f)];
    [Btn setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"yourImage.png"]]  forState:UIControlStateNormal];
    //[Btn setTitle:@"OK" forState:UIControlStateNormal];
    //Btn.titleLabel.font = [UIFont fontWithName:@"Georgia" size:14];
    [Btn addTarget:self action:@selector(yourBtnPress:) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithCustomView:Btn];
    [self.navigationItem setRightBarButtonItem:addButton];
} 
```

**并在导航栏上设置简单的 imageView**

```
UIImageView *image = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"star.png"]];
UIBarButtonItem *backBarButton = [[UIBarButtonItem alloc] initWithCustomView:image];
self.navigationItem.rightBarButtonItem = backBarButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:01:22.223

将此代码添加到`viewDidLoad`您的 ViewController 中：

```
UIImage *image = [UIImage imageNamed: @"myIcon.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageView.frame = CGRectMake(5, 2, 100, 39);
[self.navigationController.navigationBar addSubview:imageView]; 
```

imageView 也可以声明为实例变量，因此您可以在添加后访问它（例如，如果您想在某个时候从导航栏中删除图标）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:36:04.750

您需要继承 UINavigationBar。然后在 drawRect 中执行以下操作：

```
[[UIImage imageNamed...] drawInRect:...] 
```

并调用超级方法当然

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T06:06:50.990

```
UIButton *homeBtn=[[UIButton alloc] initWithFrame:CGRectMake(0, 0, 46, 28)];
[homeBtn setBackgroundImage:[UIImage imageNamed:@"homeBtn.png"] forState:UIControlStateNormal];    
[homeBtn addTarget:self action:@selector(homeBtnPressed) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *navHomeBtn=[[[UIBarButtonItem alloc] initWithCustomView:homeBtn] autorelease];    
self.navigationItem.rightBarButtonItem=navHomeBtn;   
[homeBtn release]; 
```

# opencv - 基于校正图像的点云立体重建

> ID：13488711
> 
> 赞同：0
> 
> 时间：2012-11-21T07:58:41.750
> 
> 标签：opencv, stereo-3d

我有一对从校正立体图像中提取的匹配二维特征。在 OpenCV 中使用 cvPerspectiveTransform 函数，我尝试在 3D 中重建这些特征。结果与现实世界中的实际对象尺寸不一致。我意识到 Matlab 校准工具箱中有一个功能可以将 2D 立体特征转换为 3D 点云。然而，这些特征是从原始图像中提取的。

如果我想使用校正后的图像，是否可以根据 2D 特征位置和视差信息重建 3D 位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:11:02.007

**如果您知道校正立体图像对中**的焦距（f）和基线宽度（b，两个相机的投影轴的距离）以及视差（d），您可以计算距离（Z）以下公式：

```
Z = f*(b/d); 
```

这由以下等式得出：

```
x_l = f*(X/Z);  // projecting a 3D point onto the left image
x_r = f*((X+b)/Z);  // projecting the same 3D point onto the right image
d = x_r - x_l = f * (b/Z); // calculating the disparity 
```

解决最后一个方程`Z`应该导致上面给出的公式。

# javascript - .slideToggle 类分别基于 .click

> ID：13488714
> 
> 赞同：0
> 
> 时间：2012-11-21T07:58:53.303
> 
> 标签：javascript, jquery

基本上试图写这样的东西。单击 .button 和它 .slideToggle(s) 它是关联的 .box Div。将它们嵌套在容器 div 中以尝试不同的方法。

我觉得很愚蠢，这个问题已经被问过很多次了。我已经尝试了至少十几个我可以开始工作的。

代码在这里。

[http://jsfiddle.net/BurRQ/25/](http://jsfiddle.net/BurRQ/25/)

```
<div class="container">
    <div class="header">
        <a href="#" class="toggle">TOGGLE</a>
    </div>
    <div class="box">
        <p>Content</p>
    </div>
</div>​ 
```

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:00:32.087

`.parent`在尝试使用`.next`.

[http://jsfiddle.net/BurRQ/26/](http://jsfiddle.net/BurRQ/26/)

# 前

```
$('.toggle').click(function(){
    $(this).next('.box').slideToggle("slow");
}); // .click 
```

# 后

```
$('.toggle').click(function(){
    $(this).parent().next('.box').slideToggle("slow");
}); // .click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:27:07.743

有很多方法可以做到这一点，这里有三种（因为我可以给他们一个名字）

家庭方法：`$(this).parent().siblings('.box').slideToggle();`

最接近的查找方法：`$(this).closest('.container').find('.box').slideToggle();`

下一个父方法：`$(this).parent().next().slideToggle();`

# jquery - 使用 jQuery 创建一个简单的菜单？

> ID：13488715
> 
> 赞同：0
> 
> 时间：2012-11-21T07:58:58.430
> 
> 标签：jquery, menu

我希望用 jQuery 创建一个这样的菜单：

1.  单击一个按钮，该按钮显示一个包含菜单选项的 div。
2.  如果有其他内容，则在打开菜单时单击菜单隐藏。

我可以很容易地完成第 1 部分，但第 2 部分是我遇到的问题。我正在使用以下代码：

```
$("html").click(function(){
    menu.hide();
}); 
```

但是，一旦我单击按钮，这将关闭菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:08:35.953

我不太确定你的问题，但你可以试试这个：

```
$('body').not('menuelement').click(function() {
    menu.hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:13:55.927

像这样的东西应该工作：

```
$("html").click(function(e){
    if(!$(e.target).is('#menu_options_div') && $(e.target).parents("#menu_options_div").length == 0)
        menu.hide();
}); 
```

`e.target`- 原始点击元素。只需测试它是否不是带有选项/菜单的 div 以及它的父母之一是否不是那个选项/菜单 div

# c# - 向用户显示格式化的内容？

> ID：13488716
> 
> 赞同：0
> 
> 时间：2012-11-21T07:59:01.523
> 
> 标签：c#, .net, winforms

我正在开发一个测试应用程序，用于测试我们的一些产品。测试过程涉及向测试人员（可能不是受过专业培训的 IT 专家）显示说明。这些说明涉及格式化，也可能包含图片。显示这些的好方法是什么？

我曾考虑过使用 WebBrowser 控件并将其指向静态一些 HTML，但是在遇到一些问题之后（webbrowser 控件使用的是不同版本的渲染引擎，然后是本地安装的 IE，等等...）我感觉这可能不是最好的选择。

使用 HTML 的一个论点是，我可以使用许多模板引擎中的一个来轻松创建指令内容，而无需使用过多的格式。

您对在这里使用什么有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:02:24.953

如果 winform 不是严格要求，您可以尝试在 WPF 应用程序中使用[XAML 。](http://msdn.microsoft.com/en-us/library/ms752059.aspx)

它应该允许您获得所需的所有布局，并且您还可以找到一些工具来转换为 HTML 或从 HTML 转换（当然有一些限制）。

# ios6 - ios 6 呈现视图控制器

> ID：13488717
> 
> 赞同：1
> 
> 时间：2012-11-21T07:59:10.513
> 
> 标签：ios6

方向在 presentViewController 中不起作用。甚至正在使用 UINavigationController 的类别。调用了supportedInterfaceOrientations 方法，但没有更改。在基本视图控制器中，shouldAutorotate 方法返回 YES。哪里有以下代码。

**我正在使用此代码。**

```
ViewControllerOne *viewOne = [[ViewControllerOne alloc]init];

UINavigationController *navCtrl = [[UINavigationController alloc] initWithRootViewController:viewOne];
navCtrl.modalPresentationStyle = UIModalPresentationFormSheet;

[self presentViewController:navCtrl animated:YES completion:nil]; 
```

请帮我。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:06:31.130

您使用的是哪个模拟器 ios 5 或 ios 6？再贴一些代码。另请参阅此[链接。](https://stackoverflow.com/questions/12537541/supportedinterfaceorientations-method-not-working-on-ios-6-uiviewcontroller/12623916#12623916)

替换了 appDelegate 中的这一行代码：

```
[window addSubview:viewController.view]; 
```

通过这一行：

```
[window setRootViewController:viewController]; 
```

检查 iOS 5 和 6

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)])
        {
            [self presentViewController:navigationControllerCustom animated:YES completion:nil];
        }
        else
        {
            [self presentModalViewController:navigationControllerCustom animated:YES];
        } 
```

尝试使用旋转

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

# video - 如何使用Hadoop处理视频数据

> ID：13488722
> 
> 赞同：0
> 
> 时间：2012-11-21T07:59:22.323
> 
> 标签：video, hadoop

现在我有一些大视频数据。我想在`hadoop`using中解码视频数据`Map/Reduce`。
我想使用的解码库是`ffmpeg`. 但该功能`av_open_input_file`只能读取本地文件，不能读取`HDFS`.
所以如果我想解码视频数据，我应该初始化`struct AVFormatContext`. 现在我无法得到这个`struct`。如何读取视频文件的标题并初始化`AVFormatContext`. 并逐字节读取视频数据并最终解码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:32:11.360

我试图分布式解码。但是ffmpeg只能解码本地视频。所以我尝试加载文件头来启动解码器。最后，我失败了。然后我找到了另一个解决方案：fuse_dfs。它可以将 HDFS 挂载到本地文件系统，同时数据也存储在分布式文件系统中。您可以在此站点中找到一些帮助： [如何将 hdfs 挂载到本地文件系统](http://wiki.apache.org/hadoop/MountableHDFS)

# php - 如何向现有的 joomla 2.5 组件添加新视图（以及新的菜单项类型）？

> ID：13488723
> 
> 赞同：4
> 
> 时间：2012-11-21T07:59:24.630
> 
> 标签：php, view, joomla, joomla2.5

也许我想添加一个新`view`的，也是一个新`Menu Item Type`的内容组件。

请问步骤是什么？

**更新**

问题（作者`@ValentinDespa`）：

> 您想要扩展 com_content 功能，或者您想要覆盖视图或构建一个新的组件来做某事？

正如我所说，我想扩展`com_content`并添加一个新视图。现在有一些视图，如`Single Article`、`Category Blog`和`Category List`。

我想添加另一个名为 的菜单项`Article Titles`，因此只会显示标题，但会显示一些参数（如列数）。

这是当前功能无法满足的需求。

**笔记**

伙计们，我的新视图应该是什么样的并不重要，请告诉我如何创建新视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:10:07.383

是的 您可以创建一个新视图。

它很简单，只需从您的 com_content 复制任何视图（类别、博客）。

文件结构应该像文件夹内一样。

```
Step 1

view.html.php
tmpl
   your layout names(default.php)
xml file.
Also remember to change the class name of the view.html.php

Step 2

Add a controller file (just make a copy of existing one category or blog)
Controller name must be your new view folder name.
Also remember to change the class name of the controller

step 3 

add a model file for your new view (same make copy of any existing)
remember to change the class name and file name should be view folder name. 
```

然后，您可以通过提供正确的 url 来访问此视图。例如：www.example.com/index.php?option=com_content&view=yourviewname&layout=yourlayoutnames。

这里我提到的视图文件夹名称必须是控制器和模型文件名，我们也可以用其他名称来实现，但是当你不擅长 joomla 时，它会给你带来问题。

注意：要添加视图，您不需要安装组件，这根本不是一个好主意。

此外，您可以在 tmpl 文件夹内的视图中添加多个布局，只需创建新文件。也不要错过将控制器和模型放入 com_contents/controller 和 com_contents/model 文件夹

如需更多帮助[，请查看此](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction)

# jquery - 如何使用 jquery on function 选择选择器？

> ID：13488724
> 
> 赞同：-1
> 
> 时间：2012-11-21T07:59:24.903
> 
> 标签：jquery

例如我有这个事件

```
$('body').on('click','.class', function() {
    //something
}); 
```

如何获取我单击的 .class 类的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:02:15.573

您可以使用`this`获取 javascript 对象或`$(this)`获取 jquery 对象。

```
$('body').on('click','.class', function() {
   alert(this.id);  //with this, javascript provided properties or methods.
   alert($(this).attr('id')); // with $(this) jquery provided properties or methods.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:02:37.680

尝试这个：

```
$('body').on('click','.class', function() {
    $(this).<some property here>;
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:01:06.523

您仍然可以通过 访问它`$(this)`，就像在`.click`.

[演示](http://jsfiddle.net/EEMjt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:01:32.283

您可以`$(this)`在处理程序内部访问它

```
$('body').on('click','.class', function() {
    $(this)  or this  // This points to the element with .class
             // which you just clicked
    alert($(this).attr('class') ); // Gets the class name
}); 
```

# javascript - 如何在 Windows 8 中解析 JSON

> ID：13488729
> 
> 赞同：4
> 
> 时间：2012-11-21T07:59:43.870
> 
> 标签：javascript, windows, json, windows-8, winjs

我正在做这样的 winJS.xhr：

```
var jsonResult;
WinJS.xhr(
{
    url: urlGoogle,
    responseType: 'json'
}
).done(function complete(response) {
    jsonResult = response.responseText;

    console.log(jsonResult);
}, 
//Error and Progress functions
); 
```

控制台日志向我显示：

```
{lhs: "32 Japanese yen",rhs: "0.30613818 Euros",error: "",icc: true} 
```

我想获取 rhs 信息。所以我试着做

```
console.log(jsonResult.rhs); 
```

和

```
console.log(jsonResult['rhs']); 
```

它只显示“未定义”。然后我意识到，当我执行 jsonResult[0] 时，它会向我显示第一个字符（即 { ），依此类推，并带有索引括号。

我试图做一个 JSON.parse(jsonResult); 但它会产生错误

```
json parse unexpected character 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:18:03.533

您看到的字符串实际上不是有效的 JSON，因为它的属性名称没有被引用。这就是`JSON.parse`抛出错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:19:02.793

刚刚在 Chrome 开发工具上尝试过：

```
JSON.parse("{lhs: \"32 Japanese yen\",rhs: \"0.30613818 Euros\",error: \"\",icc: true}")
SyntaxError: Unexpected token l
JSON.parse('{lhs: "32 Japanese yen",rhs: "0.30613818 Euros",error: "",icc: true}')
SyntaxError: Unexpected token l
JSON.parse('{lhs: "32 Japanese yen",rhs: "0.30613818 Euros",error: "",icc: 1}')
SyntaxError: Unexpected token l
JSON.parse('{"lhs": "32 Japanese yen","rhs": "0.30613818 Euros","error": "","icc": true}')
Object
    error: ""
    icc: true
    lhs: "32 Japanese yen"
    rhs: "0.30613818 Euros"
    __proto__: Object 
```

所以看起来一个“有效”的 JSON*字符串*应该使用双引号`"`来包围每个可能的地方。

其实这也发生在`PHP`'s上`json_decode`。

我不了解Win8JS开发，所以不确定你是否可以使用`response.responeJSON`或类似的东西，但直接解析`response.responseText`似乎可能会失败。

如果您确实需要使用`responseText`，请考虑@Cerbrus 的危险`eval`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:06:51.357

```
var test = {lhs: "32 Japanese yen",rhs: "0.30613818 Euros",error: "",icc: true}
//test.lhs returns "32 Japanese yen" 
```

我不太确定为什么这对你不起作用。尝试记录`console.log(typeof jsonResult)`jsonResult 是 a`string`还是 a `object`。（如果它是一个字符串，我会说`JSON.parse`应该可以工作）
然后记录`jsonResult`它自己，看看你是否可以遍历它的属性。（谷歌浏览器控制台就像一个魅力）

如果它是一个字符串，这是一种（有点hacky，不安全）的方法：

```
var result = eval('({lhs: "32 Japanese yen",rhs: "0.30613818 Euros",error: "",icc: true})')
var result = eval('(' + jsonResult + ')') 
```

^(（感谢@ThiefMaster♦ 更恰当地使用（-ish）`eval`代替我自己滥用它。）)
然后您应该能够访问`result`
通常，您*不想*使用`eval`，但如果所有其他方法都失败了......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T06:25:25.393

在您的情况下，请检查以下内容

```
WinJS.xhr({ url: urlGoogle }).then(
           function completed(response) {
                var jsonString = JSON.parse(response.responseText);
                console.log(jsonString .rhs);
           },
           function error(error) { console.log(error) },
           function progress(progress) { }
);

OR

WinJS.xhr({ url: urlGoogle }).then(
           function completed(response) {
                var jsonString = JSON.parse(response.responseText);
                 console.log(jsonString .rhs); 
           },
           function error(error) { console.log(error) },
           function progress(progress) { }
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T01:32:03.967

首先做：

```
jsonResult = JSON.parse(response.responseText); 
```

然后你可以使用：

```
var rhs = jsonResult.rhs; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-04T03:41:17.483

我过去曾在博客上写过这个。下面的代码调用返回 JSON 的 Web 服务。

这里解释：http: [//blogs.msdn.com/b/brunoterkaly/archive/2012/11/06/step-4-augmented-reality-windows-8-and-cloud-computing-how-to-implement -with-real-code-implementing-the-windows-8-client.aspx#](http://blogs.msdn.com/b/brunoterkaly/archive/2012/11/06/step-4-augmented-reality-windows-8-and-cloud-computing-how-to-implement-with-real-code-implementing-the-windows-8-client.aspx#)

此代码的有用之处在于您“尝试”获取值。它们可能不存在。

请参阅 parsedResults.TryGetValue()。

```
 private async System.Threading.Tasks.Task CallLocationWebService(string gps)
    {
        // Call into the emulator. This assumes you are running the
        // cloud project from the last post in the backgruond
        string _location = "http://127.0.0.1:81/api/values?location={0}";

        // You can use the line below once you deploy your cloud
        // application to the cloud (a MS data center)
        //string _location = "http://locationwebservice.cloudapp.net/api/values?location={0}";

        // Now make the aynchronous call. We need to pass the GPS
        // parameters here to the _location string mentioned above.
        using (HttpClient clientlocation = new HttpClient())
        using (var response = await clientlocation.GetAsync(string.Format(_location, gps)))
        {
            if (response.IsSuccessStatusCode)
            {
                string webresponse = await response.Content.ReadAsStringAsync();

                // Parse the string into a JSONObject
                var parsedResults = JsonObject.Parse(webresponse);

                IJsonValue val;

                // Extract data embedded in JSONObject.
                // Assign to controls in user interface
                if (parsedResults.TryGetValue("latitude", out val))
                    loc_info.latitude = val.GetString();
                if (parsedResults.TryGetValue("longitude", out val))
                    loc_info.longitude = val.GetString();
                if (parsedResults.TryGetValue("bus_and_neighborhood", out val))
                    loc_info.bus_and_neighborhood = val.GetString();
                if (parsedResults.TryGetValue("elevation", out val))
                    loc_info.elevation = val.GetString();
                if (parsedResults.TryGetValue("bus_and_neighborhood", out val))
                    loc_info.bus_and_neighborhood = val.GetString();
                if (parsedResults.TryGetValue("max_temp", out val))
                    loc_info.max_temp = val.GetString();
                if (parsedResults.TryGetValue("min_temp", out val))
                    loc_info.min_temp = val.GetString();

                this.bus_and_neighborhood.Text = loc_info.bus_and_neighborhood;
                this.elevation.Text = loc_info.elevation;
                this.latlong.Text = loc_info.latitude + "/" + loc_info.longitude;
                this.max_temp.Text = loc_info.max_temp;
                this.min_temp.Text = loc_info.min_temp;
            }
        }

    } 
```

# mysql - 在两个日期范围之间更新表内的列时，组函数的使用无效

> ID：13488730
> 
> 赞同：0
> 
> 时间：2012-11-21T07:59:47.620
> 
> 标签：mysql, cumulative-sum

我有一个表 a_daily 有像这样的列

```
1.date
2.FromDate
3.Target
4.Cumulative_Target 
```

我将每天添加行，因此每天参考 fromdate 和 date Cumulative_Target 列将更新，如表中所示

这是我需要做的：

```
 date                Fromdate      Target          Cumulative_Target
    2012-04-16    2012-04-16    500              500                  '(cycle1-started)
    2012-04-17    2012-04-16    500              1000    
    2012-04-18    2012-04-16    800              1800 
    '
    '
    '
    2012-05-15   2012-04-16     200             xxxxxx                 '(cycle1-completed)
    2012-05-16   2012-05-16     150             150                     '(cycle2-started)
    2012-05-17   2012-05-16     100             250
    2012-05-18   2012-05-16     700             950
    '
    '
    '
    '
    2012-06-15  2012-06-15      200             xxxxx                    '(Cycle2-completed) 
```

所以表中的起始日期将在每个周期内变化

我用于更新的查询是：

```
UPDATE a_daily 
SET a_daily.Cumulative_Generation = sum(a_daily.Target) 
    between a_daily.Date and a_daily.From_Date 
```

我不知道如何化妆计算列请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:16:48.073

试试这个查询 -

```
SET @count = 0;
UPDATE a_daily
  SET Cumulative_Target = @count:= target + @count
ORDER BY date 
```

...如果需要，请指定您的订单条款

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:09:56.757

```
UPDATE TableName a
       INNER JOIN 
        (
            SELECT  DATE(a.date) date, 
                    date(a.Fromdate) fromdate,
                    a.target,
                     @accum:=@accum + a.runningTotal AS TOTAL
            FROM 
                (  
                  SELECT  DATE(date) date, 
                          date(Fromdate)Fromdate , 
                          target,
                          SUM(`Target`) AS runningTotal
                  FROM TableName
                  GROUP BY DATE(date), date(Fromdate),target
                  ORDER BY Fromdate
                ) a , (SELECT @accum := 0) s

        ) b ON DATE(a.Date) = b.date AND
               DATE(a.FROMDATE) = b.fromdate AND
              a.target = b.target
SET a.Cumulative_Target = b.total 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/a8931/1)

# svn - NetBeans 的 svn 提交问题

> ID：13488733
> 
> 赞同：2
> 
> 时间：2012-11-21T07:59:52.267
> 
> 标签：svn, netbeans-7, rapidsvn

我的 svn 客户端是 rapidsvn，ide 是 NetBeans。我要提交更新时突然出错。我已授予 777 许可并更改项目所有者，但我仍然无法解决该问题。

当我在 NetBeans 中提交文件时，会出现以下错误：

```
org.apache.subversion.javahl.ClientException: E175002: Commit failed (details follow):
E175002: Broken pipe
E175002: PROPFIND request failed on '/team/proporta3/branches/3.1.2/application/views/layouts' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:01:15.930

将 NetBeans 从 7.2 升级到 7.2.1 后，我遇到了同样的问题。我不得不**工具**/**选项**/**杂项**/**版本控制**。然后在“**首选客户端**”下选择 Subversion 和**CLI**。之后我就可以像往常一样svn了。希望这可以帮助某人。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:05:08.257

谢谢大家。最后我得到了这个问题。我已经为系统范围设置并应用了本地代理（用于 Jmeter 性能测试）。停止后运行良好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-21T16:55:19.413

对我来说这是一个代理问题，我在禁用代理后再次重新启动它工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T20:32:54.780

我已经发布了一些您可以在这里查看的步骤：[Netbeans RapidSVN 和资源库](https://stackoverflow.com/questions/14431304/netbeans-rapidsvn-and-respositories/14446718#14446718)。

请也尝试其他客户端 - 也许这是 rapidsvn 的问题。**

# html - CSS3 翻转效果：z-index 在 3D 变换后被搞砸了

> ID：13488740
> 
> 赞同：1
> 
> 时间：2012-11-21T08:00:32.257
> 
> 标签：html, css

我正在尝试按照[本教程](http://davidwalsh.name/css-flip)实现翻牌效果。基本上，它将两个窗格放在一个容器中，并应用 a`transform: rotateY(180deg)`使其中一个页面朝后。翻转效果是通过将容器变换 180 度来实现的。这是基本的html：

```
<div class="flip-container" ontouchstart="this.classList.toggle('hover');">
<div class="flipper">
    <div class="front">
        <!-- front content -->
    </div>
    <div class="back">
        <!-- back content -->
    </div>
</div>
</div> 
```

翻转效果很好，但是在 safari 中，当我尝试在后窗格上捕捉任何触摸/单击事件时，它在一些翻转后根本不会触发（参见这个[jsfiddle](http://jsfiddle.net/blurrcat/g6M9d/)）。后窗格似乎位于前窗格的顶部。

此[博客](http://daneden.me/2012/04/css-transforms-and-z-index/)指出，当您应用转换时，z-index 会搞砸。我该如何解决这个问题，或者有什么方法可以避免使用 z-index？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:02:10.793

我用你的例子做了一个不同的方法。这是[小提琴的例子](http://jsfiddle.net/wandarkaf/g6M9d/24/)

我所做的只是创建翻转或交换 z-index 以及过渡效果的 click 事件（当然，可以优化此功能）：

```
      var 旋转 = 180;

```
 $(".front").click(function () {
   $("div.flipper").css("transform", "rotateY(" + rotation + "deg)");
   rotation += 180; // flip the card only one way
   $(".front").css("z-index","1");
   $(".back").css("z-index","2");
  });

  $(".back").click(function () {
    $("div.flipper").css("transform", "rotateY(" + rotation + "deg)");
    rotation += 180; // flip the card only one way
    $(".back").css("z-index","1");
    $(".front").css("z-index","2");
  }); 
```

​​​

```

希望这可以帮助。

# python - 解析大文件时出现内存错误 - Python

> ID：13488746
> 
> 赞同：0
> 
> 时间：2012-11-21T08:00:55.447
> 
> 标签：python, list, memory

有人问过关于 Python 中的内存错误的问题，但我想问一个更具体的问题。我是编程和 Python 的新手。

解析大型文本文件（~8GB）时，该行

```
mylist = [line.strip('\n').split('|') for line in f] 
```

导致“内存错误”。

我在具有 12GB RAM 的 Windows XP 64 位上运行 64 位 Python [MSC v.1500 64 位 (AMD64)]。除了安装更多 RAM 之外，我该如何处理此内存错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:03:19.757

内存错误即将到来，因为您试图将整个文件存储在一个列表中（在内存中）。因此，尝试处理每一行而不是存储它：

```
for line in f:
   data = line.strip('\n').split('|')
   #do something here with data 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T08:06:34.833

这取决于你想用你的列表做什么。

如果您想逐行工作，您可能可以使用列表生成器而不是列表推导来完成工作，如下所示：

```
myiterator = (line.strip('\n').split('|') for line in f) 
```

（不是我改变`[...]`了`(...)`）。这将返回一个迭代器而不是一个列表，并且由于`for line in f`也不会创建一个列表，因此您将一次加载一行。

如果您想同时处理所有行，您可能必须将其与另一种技术结合使用，以免占用所有内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:07:22.523

您绝对应该使用惰性生成器一次解析如此大的文件一行，或者将文件分成更小的块。

一种可能：

```
def lazy_reader(path):
    """reads a file one line at a time."""
    try:
        file = open(path, 'r')
        while True:
            line = file.readline()
            if not line: break
            yield line             # "outputs" the line from the generator
    except IOError:
        sys.stderr.write("error while opening file at %s\n" % path)
        sys.exit(2)
    finally:
        file.close() 
```

然后你可以像这样使用你的生成器

```
for line in lazy_reader("path/to/your/file"):
    do_something_with(line) 
```

编辑：您还可以以简洁的“流水线”方式组合生成器：

```
def parse(generator):
    for line in generator: yield line.strip('\n').split('|')

for data in parse( lazy_reader("path/to/your/file") ):
    do_something_with_splitted_array(data) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T08:27:14.340

我对它的看法是使用它`with`来简化错误，一个生成器来定义`lines`应该是什么样子，然后对其进行迭代：

```
with open('somefile') as fin:
    lines = (line.strip('\n').split('|') for line in fin)
    for line in lines:
        pass # do something with line 
```

# javascript - 为什么在 javascript 中 for-in 很慢？

> ID：13488751
> 
> 赞同：7
> 
> 时间：2012-11-21T08:01:22.757
> 
> 标签：javascript

我在几个地方读到 for-in 循环比遍历数组要慢......虽然我知道与在幕后发生的任何事情相比，在 sizeof (type) 块中前进实际上是毫不费力的，以迭代对象的键，我还是很好奇，到底是什么原因，这么慢……

是否必须执行反向哈希函数来获取密钥，而这个过程很慢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:07:36.660

在任何特定引擎的情况下，对此的真正答案可能取决于该引擎的实现。（如果有的话，差异的大小也是如此。）

但是，有不变量。例如，考虑：

```
var obj = {a: "alpha", b: "beta"};
var name;
for (name in obj) {
    console.log(obj[name]);
}

var arr = ["alpha", "beta"];
var index;
for (index = 0; index < arr.length; ++index) {
    console.log(arr[index]);
} 
```

在 的情况下`obj`，引擎必须使用一种机制来跟踪您已经迭代过哪些属性以及尚未迭代过哪些属性，并过滤掉不可枚举的属性。例如，在幕后有某种迭代器对象（以及规范的定义方式，很可能是一个临时数组）。

在 的情况下`arr`，它不会；您正在以一种非常简单、有效的方式在代码中处理它。

每个循环块的内容都是一样的：对象的属性查找。（在后一种情况下，理论上，还有数字到字符串的转换。）

所以我希望对此的唯一非特定于实现的答案是：额外的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:42:47.027

`for..each`循环使用[**迭代器**和**生成器**](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Iterators_and_Generators)。

迭代器是一个有`next()`方法的对象。生成器是一个包含`yield()`表达式的工厂函数。这两种结构都比整数索引变量更复杂。

在一个典型的`for(var i = 0; i < arr.length; i++)`循环中，几乎在所有迭代中执行的两个命令是`i++`和`i < arr`。这可以说比进行函数调用（`next()`或`yield()`）要快得多。

而且，循环初始化（`var i = 0`）也比使用`next()`方法创建迭代器对象或调用生成器创建迭代器要快。但是，它高度依赖于实现，Javascript 引擎的创建者尽最大努力加速这些常用的语言特性。

我会说差异是如此微不足道，以至于我可能想花时间优化代码的其他部分。语法的选择应该比性能更考虑代码的可读性和可维护性，因为性能增益对​​于增加复杂性来说是如此之小。话虽如此，请使用对您和其他在您变得富有和成名后维护您的代码的开发人员更有意义的语法！;)

# image - 主要压缩算法的伪代码（或代码）

> ID：13488752
> 
> 赞同：0
> 
> 时间：2012-11-21T08:01:26.467
> 
> 标签：image, video, compression

我对图像和视频压缩真的很感兴趣，但是我很难找到一个主要的资源来开始实现主要算法。

我想要的只是开始实施我自己的编解码器的信息来源。我想从头实现它（例如，对于 jpeg，实现我自己的霍夫曼，余弦转换......）。我所需要的只是一个分步指南，向我展示每个算法涉及哪些步骤。

我主要对图像压缩算法（到目前为止，JPEG）和视频压缩算法（MPEG-4、M-JPEG，也许还有 AVI 和 MP4）感兴趣。

谁能给我推荐一个在线资源，比维基百科更多的信息？（我查过了，但信息不是很全面）

太感谢了 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T02:12:38.820

[ImpulseAdventure 网站](http://www.impulseadventure.com/photo/)有一系列关于[JPEG 编码基础的](http://www.impulseadventure.com/photo/jpeg-quantization.html)精彩文章。

我正在开发一个[实验性的 JPEG 编码器](https://github.com/pornel/jpeg-compressor)，该编码器部分设计为可读且易于更改（而不是被性能优化混淆）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:18:21.013

从JPEG开始。您将需要[JPEG 标准](http://www.jpeg.org/jpeg/index.html)。这需要一段时间才能完成，但这是尝试编写兼容的东西的唯一方法。即便如此，该标准对于决定量化系数的方式和程度也无济于事，这需要对图像进行实验。

一旦你得到它的工作，然后得到[H.264 标准](http://www.itu.int/rec/T-REC-H.264-201201-I/en)并阅读它。

# c++ - 为什么这两个版本的快速排序会在比较次数上产生巨大差异？

> ID：13488755
> 
> 赞同：0
> 
> 时间：2012-11-21T08:01:33.640
> 
> 标签：c++, algorithm, sorting, quicksort

我在下面有两种不同的快速排序实现。我已经验证了这些版本的快速排序中的其他版本都可以正常工作，因为它们可以对我给出的任何数组进行正确排序。如果您注意到（至少在我看来），当数组大小大于 8 时，版本 #2 与版本 #1 完全相同`n`。因此，我希望当我给这两个函数一个相同的数组时大小大于 8 时，它们应该平均进行大约相同数量的组件明智比较，但事实并非如此。

对于`n > 8`，函数都使用`sort3()`和`partition()`函数。我也在下面列出了这些，以向您展示我如何计算组件明智比较的数量。

我知道，`W(n)`这些快速排序实现的理论最坏情况比较数是 (n(n+2)/4)+8。因此，对于数组大小`n = 500`，`W(n) = 62758`。对于 size 数组的测试运行`n = 500`，版本 #1 平均进行大约 5000 次比较，这是合理的。但是，版本 #2 平均进行 80000 次比较。显然这不可能是正确的 - 版本 #2 进行的比较比理论上的要多，`W(n)`并且它与版本 #1 完全相同（至少在我看来）相同的算法。

您是否看到我在第 2 版中犯的错误？

版本 #1：

```
void Quicksort_M3(int S[], int low, int hi)
{
    if(low < hi)
    {
        if((low+1) == hi)
        {
            comparisons++;
            if(S[low] > S[hi])
                swap(S[low],S[hi]);
        }
        else
        {
            Sort3(S,low,hi);
            if((low+2)<hi)
            {
                swap(S[low+1],S[(low+hi)/2]);
                int q = partition(S, low+1, hi-1);
                Quicksort_M3(S, low, q-1);
                Quicksort_M3(S, q+1, hi);
            }
        }
    }
} 
```

版本 #2：

```
void Quicksort_Insert_M3(int S[], int n, int low, int hi)
{
    if((hi-low)<=8)
        Insertionsort(S,n);
    else 
    {
        if(low < hi)
        {
            if((low+1) == hi)
            {
                comparisons++;
                if(S[low] > S[hi])
                    swap(S[low],S[hi]);
            }
            else
            {
                Sort3(S,low,hi);
                if((low+2)<hi)
                {
                    swap(S[low+1],S[(low+hi)/2]);
                    int q = partition(S, low+1, hi-1);
                    Quicksort_Insert_M3(S, n, low, q-1);
                    Quicksort_Insert_M3(S, n, q+1, hi);
                }
            }
        }
    }
} 
```

分割：

```
int partition(int *S,int l, int u)
{
    int x = S[l];
    int j = l;
    for(int i=l+1; i<=u; i++)
    {
        comparisons++;
        if(S[i] < x)
        {   
            j++;
            swap(S[i],S[j]);
        }

    }
    int p = j;
    swap(S[l],S[p]);
    return p;
} 
```

排序3：

```
int Sort3(int list[], int p, int r)
{
    int median = (p + r) / 2;
    comparisons++;
    if(list[p] <= list[median])
    {
        comparisons++;
        if(list[median]>list[r])
        {
            comparisons++;
            if(list[p]<list[r])
            {
                int temp = list[p];
                list[p] = list[r];
                list[r] = list[median];
                list[median] = temp;
            }
            else
            {
                exchange(list,median,r);
            }
        }
        else
            ;

    }
    else
    {
        comparisons++;
        if(list[p] > list[r])
        {
            comparisons++;
            if(list[median] < list[r])
            {
                int temp = list[p];
                list[p] = list[median];
                list[median] = list[r];
                list[r] = temp;
            }
            else
            {
                exchange(list,p,r);
            }
        }
        else
        {
            exchange(list,p,median);
        }

    }

    return list[r];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:05:51.173

我认为您的错误是，当您进行插入排序时，您仍在使用数组的原始大小。因此，您最终会对整个数组进行插入排序。

# google-maps - 是否可以使用 google maps api 或 bing maps api 获取地址的邻居？

> ID：13488759
> 
> 赞同：4
> 
> 时间：2012-11-21T08:01:55.360
> 
> 标签：google-maps, google-maps-api-3, bing-maps

是否可以使用 Google Maps API 或 Bing Maps API 获取社区？例如，是否有可能获得“金融区”社区的值来搜索旧金山该社区的地址？如果没有，网上还有其他资源吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-09-08T18:58:32.860

是的，邻域`address_components[]`作为地理编码 API 的一部分在数组中返回。

谷歌有一个展示地理编码 API的[现场演示应用程序。](https://developers-dot-devsite-v2-prod.appspot.com/maps/documentation/utils/geocoder#q%3DGoogle%2520HQ)该`neighborhood`字段可用于出现在具有社区的城市中的地点。

下面是一个使用 Python 客户端获取邻域数据的简单示例，[用于 Google 地图](https://github.com/googlemaps/google-maps-services-python)：

```
import googlemaps

API_KEY = "YOUR_API_KEY"
gmaps = googlemaps.Client(key=API_KEY)
print gmaps.geocode('3027 16th St, San Francisco, CA 94103, United States') 
```

这将打印以下内容：

```
[{'address_components': [{'long_name': '3027',
                          'short_name': '3027',
                          'types': ['street_number']},
                         {'long_name': '16th Street',
                          'short_name': '16th St',
                          'types': ['route']},
                         {'long_name': 'Mission District',
                          'short_name': 'Mission District',
                          'types': ['neighborhood', 'political']},
                         {'long_name': 'San Francisco',
                          'short_name': 'SF',
                          'types': ['locality', 'political']},
                         {'long_name': 'San Francisco County',
                          'short_name': 'San Francisco County',
                          'types': ['administrative_area_level_2',
                                    'political']},
                         {'long_name': 'California',
                          'short_name': 'CA',
                          'types': ['administrative_area_level_1',
                                    'political']},
                         {'long_name': 'United States',
                          'short_name': 'US',
                          'types': ['country', 'political']},
                         {'long_name': '94110',
                          'short_name': '94110',
                          'types': ['postal_code']},
                         {'long_name': '3402',
                          'short_name': '3402',
                          'types': ['postal_code_suffix']}],
  'formatted_address': '3027 16th St, San Francisco, CA 94110, USA',
  'geometry': {'bounds': {'northeast': {'lat': 37.764927, 'lng': -122.4201635},
                          'southwest': {'lat': 37.7646504,
                                        'lng': -122.4203792}},
               'location': {'lat': 37.7647804, 'lng': -122.4202906},
               'location_type': 'ROOFTOP',
               'viewport': {'northeast': {'lat': 37.7661376802915,
                                          'lng': -122.4189223697085},
                            'southwest': {'lat': 37.76343971970851,
                                          'lng': -122.4216203302915}}},
  'place_id': 'ChIJxT0SpyN-j4ART07xF7G8NGE',
  'types': ['premise']}] 
```

有关更多信息，请参阅官方[地理编码 API 指南](https://developers.google.com/maps/documentation/geocoding/overview)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T05:08:33.797

您可以在 Google [https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform上下载此示例](https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform)

```
var componentForm = {
  ...,
  neighborhood: 'short_name',
  ...,
}; 
```

在 HTML 表格中添加

```
 <tr>
    <td class="label">Neighbourhood</td>
    <td class="wideField" colspan="3"><input class="field"
          id="neighborhood" disabled="true"></input></td>
 </tr> 
```

输入地址后可以看到邻里信息

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-21T08:24:50.320

Google Places API 使您能够获取社区信息。但是从 API 获得的信息必须用于谷歌地图。

[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

# architecture - GPU架构定制？

> ID：13488763
> 
> 赞同：1
> 
> 时间：2012-11-21T08:02:16.383
> 
> 标签：architecture, cuda, gpu, nvidia

我正在做一个关于 GPU 上的一些 CUDA 加速的项目，并完成了一些软件级别的优化我的计算，而且我发现 GPU 架构的一些变化可能有助于进一步优化项目。

现在我的问题是，是否有一种有效的方法或现有的模拟器可以让我更改 GPU 架构中的某些功能或部分，然后我可以在该定制架构上对 CUDA PTX 代码进行基准测试以获得性能结果（最好是周期准确） ? CPU的架构模拟器有几种，所以我想知道其中一些是否支持GPU？或者我可能必须自己编写一个 GPU 模拟器^_^？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:55:28.203

您正在寻找[GPGPU-sim](http://www.gpgpu-sim.org/)。该模拟器可以准确地模拟 NVIDIA GPU 并执行 OpenCL 和 CUDA 工作负载***，而无需修改代码***。我想也可以选择对 PTX 工作负载进行建模。从[手册](http://gpgpu-sim.org/manual/index.php5/GPGPU-Sim_3.x_Manual)：

> GPGPU-Sim 3.x 运行由 CPU 部分和 GPU 部分组成的程序二进制文件。然而，GPGPU-Sim 3.x 中的微架构（时序）模型报告了 GPU 繁忙的周期——它既不建模 CPU 时序也不建模 PCI Express 时序（即 CPU 和 GPU 之间的内存传输时间）。

GPGPU-sim 具有广泛的可配置性，可让您对不同的微架构进行建模。例如，您可以调整 SM 的数量、warp 调度程序、SIMD 组、每个 SM 的线程、共享内存大小、寄存器文件大小以及手册中解释的许多其他参数。在模拟结束时，模拟器转储执行持续时间（以 GPU 时钟周期为单位）和许多其他性能计数器。

***更多的信息：***

[GPU Ocelot](https://code.google.com/p/gpuocelot/)是一款 PTX 分析器。在以前的版本中，您可以模拟工作负载。但是，最近的版本侧重于 PTX 代码的编译器优化。

[MacSim](https://code.google.com/p/macsim/)是另一个复杂而强大的工具，模拟 CPU 和 GPU 的异构系统。

# objective-c - 如何使用 indexpath 进行 xml 解析

> ID：13488765
> 
> 赞同：1
> 
> 时间：2012-11-21T08:02:18.103
> 
> 标签：objective-c, ios5, nsxmlparser, nsindexpath

我正在使用 xml 解析器将数据从一个视图传递到另一个视图。当我单击任何行时（在视图上加载 xml 之后），它应该相应地显示整个详细信息。- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath {

```
 static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UILabel *titleLabel = nil;
    UILabel *priceLabel = nil;

    UILabel *titleValueLabel = nil;
    UILabel *priceValueLabel = nil;

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 20)];
        titleLabel.text = @"Model:";

        priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 50, 20)];
        priceLabel.text = @"Price:";

        priceValueLabel = [[UILabel alloc] initWithFrame:CGRectMake(120, 20, 50, 20)];
        titleValueLabel = [[UILabel alloc]initWithFrame:CGRectMake(120, 1, 320, 20)];

        [cell.contentView addSubview:titleLabel];
        [cell.contentView addSubview:priceLabel];

        [cell.contentView addSubview:titleValueLabel];
        [cell.contentView addSubview:priceValueLabel];

    }

    NSDictionary *tempProduct = [self.listData objectAtIndex:indexPath.row];
    NSDictionary *productTitle = [tempProduct valueForKey:TITLE];
    NSString *titleValue = [productTitle valueForKey:TEXT];
    titleValue = [titleValue stringByTrimmingCharactersInSet:
              [NSCharacterSet whitespaceAndNewlineCharacterSet]];
    titleValueLabel.text = titleValue;
    [cell.contentView addSubview:titleValueLabel];

    NSDictionary *productPrice = [tempProduct valueForKey:PRICE];
    NSString *priceValue = [productPrice valueForKey:TEXT];
    priceValue = [priceValue stringByTrimmingCharactersInSet:
              [NSCharacterSet whitespaceAndNewlineCharacterSet]];
    priceValueLabel.text = priceValue;
    [cell.contentView addSubview:priceValueLabel];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
} 
```

我的示例 xml 数据是

```
<?xml version="1.0" encoding="UTF-8"?>
<scan>
    <products>
        <title>samsung galaxy</title>
        <desc>smart phone</desc>
        <price>250$</price>
    </products>
    <products>
        <title>samsung galaxy1</title>
        <desc>smart phone1</desc>
        <price>251$</price>
     </products>
    <products>
        <title>samsung galaxy2</title>
        <desc>smart phone2</desc>
        <price>252$</price>
    </products>
    <products>
        <title>samsung galaxy3</title>
        <desc>smart phone3</desc>
        <price>350$</price>
    </products>
    </scan> 
```

当我单击第一行时，它应该显示相同的数据。但它按选择的顺序显示。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:20:23.700

你可以像这样传递索引

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        NSDictionary *tempProduct = [self.listData objectAtIndex:indexPath.row];
        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 20)];
       [Name setText:[tempProduct valueForKey:@"TITLE"]];

        priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 50, 20)];
        [Name setText:[tempProduct valueForKey:@"Price"]];

        priceValueLabel = [[UILabel alloc] initWithFrame:CGRectMake(120, 20, 50, 20)];
        titleValueLabel = [[UILabel alloc]initWithFrame:CGRectMake(120, 1, 320, 20)];

        [cell.contentView addSubview:titleLabel];
        [cell.contentView addSubview:priceLabel];

        //[cell.contentView addSubview:titleValueLabel];
       // [cell.contentView addSubview:priceValueLabel];

    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
} 
```

**编辑**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

            NSDictionary *tempProduct = [self.listData objectAtIndex:indexPath.row];

          objAppDelegate.strCatagoryTitle=[tempProduct valueForKey:@"TITLE"];
          objAppDelegate.strCatagoryPrice=[tempProduct valueForKey:@"Price"];

//hear  objAppDelegate.strCatagoryTitle or objAppDelegate.strCatagoryPrice globle string.
//we can use it at our cntrSecondViewController class using this Delegate object 
//objAppDelegate = (cntrAppDelegate1 *) [[UIApplication sharedApplication]delegate];

 cntrSecondViewController *cntrinnerService = [[cntrSecondViewController alloc] initWithNibName:@"cntrSecondViewController" bundle:nil];
        [self.navigationController pushViewController:cntrinnerService animated:YES];

} 
```

# ruby-on-rails - Rails：在模型中找到正确的项目

> ID：13488766
> 
> 赞同：0
> 
> 时间：2012-11-21T08:02:20.103
> 
> 标签：ruby-on-rails, hash, social-media-like

**问题：寻找属于帖子的正确评论**

我正在尝试为特定帖子的评论实现“喜欢”功能（就像在 facebook 上一样）。我已经为我的帖子实现了相同的功能，但是“指向正确的评论”让我很难过。澄清一下，我的“like”函数会导致以下 GET 调用：

```
http://localhost:3000/posts/11/comments/4/like 
```

但它实际上应该调用

```
/posts/4/comments/11/like 
```

我检查了我的路线，这对我来说似乎是正确的

```
like_post_comment GET    /posts/:post_id/comments/:id/like(.:format) 
```

所以我想问题出在控制器上。

在**comments_controller**中的点赞操作开始时，我有

```
def like
    @post = Post.find(params[:post_id])
    @comment = @post.comments.find(params[:comment]) 
```

我认为这一定是错误的，但我不确定为什么或如何解决它。 其他操作以类似的方式设置局部变量*@post*和*@comment ，但它们正确地完成了工作。*

```
def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])

def destroy
    @post = Post.find(params[:post_id])
    @comment = @post.comments.find(params[:comment]) 
```

我如何呈现我的评论链接

```
<td><b><%= link_to 'like', like_post_comment_path(comment) %></b></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:26:01.677

像这样称呼它

`<%= link_to 'like', like_post_comment_path(@post, comment) %>`

其中@post 是当前的帖子对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:44:54.897

替换您的链接

```
<td><b><%= link_to 'like', like_post_comment_path(comment) %></b></td> 
```

至

```
<td><b><%= link_to 'like', like_post_comment_path(@post, comment) %></b></td> 
```

并将控制器中的类似操作替换为

```
def like
  @post = Post.find(params[:post_id])
  @comment = @post.comments.find(params[:id])
  # ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:07:11.287

这个：

```
/posts/:post_id/comments/:id/like(.:format) 
```

告诉我您的帖子由 post_id 参数标识，您的评论由 id 参数标识。因此，您的 like 方法应如下所示：

```
def like
  @post = Post.find(params[:post_id])
  @comment = @post.comments.find(params[:id]) 
```

# c# - 许多函数采用相同的参数？

> ID：13488771
> 
> 赞同：2
> 
> 时间：2012-11-21T08:02:58.633
> 
> 标签：c#, design-patterns, facade

如果问题有点不清楚，我很抱歉。请随时清理/概括这个问题。我英语不够好，不能自己做

我需要使用 Web 服务 Web 服务的所有方法都将身份验证对象作为第一个参数

```
class webservice{
    e_webservice_return_value method1(object authentication,object param1,object param2,object param32)
    e_webservice_return_value method2(object authentication,object param1,object param2)
    .....
} 
```

有数百种方法。

我想创建一个提供所有方法的提供程序类现在我可以创建一个名为提供程序的类并为每个方法编写

```
class provider{
    object _auth;
    e_webservice_return_value method1(object param1,object param2,object param3)
    {
        var res= method1(_auth,param1,param2,param3);
        if(res=bad auth)
        {
            ReAuth(auth);
        }
        return res;
    }

    e_webservice_return_value method2(object param1,object param2)
    {
        var res =return e_webservice_return_value method2(_auth,param1,param2);
        if(res=bad auth)
        {
            ReAuth(auth);
        }
        return res;
    }
} 
```

对于所有数百种方法，我都需要这种模式。

有没有一种技术可以创建这样一个外观对象，而无需实际编写 100 个具有相同功能的函数？（只有第一个参数相同）其他可能不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:10:59.873

你可能想和`Reflection.Emit`. 可以在[此站点](http://www.drdobbs.com/generating-code-at-run-time-with-reflect/184416570)上找到一个不错但可能有点过时的教程。也看看 MSDN - 他们有**很棒的**文档！

您通常想要做的是用属性标记每个方法（或整个类），并为每个具有属性的方法/类创建一个包装方法，并替换代码。您可以让它在应用程序初始化或第一次调用此类/方法时运行，设计取决于您。

这不是一件容易的事，但实际上我们的项目中也有同样的案例，事实证明这是一个很好的解决方案。这是因为每个具有给定属性的方法都需要类似的处理。

请记住，有一些替代方法可以发出代码，但我不太了解它们，所以我无法提供任何建议 - 但它很容易谷歌搜索。

`Reflection.Emit`单独使用 IL 本身就很麻烦，但它确实可以让您更多地了解 C# 代码中发生的事情。

# content-management-system - silverstripe 上传 tiff 并转换为 jpeg

> ID：13488774
> 
> 赞同：0
> 
> 时间：2012-11-21T08:03:04.767
> 
> 标签：content-management-system, silverstripe

我正在使用 silverstripe 框架构建图像数据库。它需要能够上传大的 tiff 文件，并且应该将它们转换为 jpeg。是否有内置功能可以做到这一点，还是我必须为此使用库？问候，弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:59:14.570

SilverStripe 没有内置的图像转换实用程序，只是一个[GD](http://api.silverstripe.org/3.0/framework/filesystem/GD.html)类，主要处理现有图像（在 gif/jpg/png 中）的大小调整。

ImageMagick 支持 TIFF 的转换（请参阅[支持的格式](http://www.imagemagick.org/script/formats.php)）。我相信您可以找到它的 PHP 包装器库（不必特定于 SilverStripe），或者直接通过`exec()`.

除此之外，我们还有`UploadField`处理上传的类。它使用[jQuery](http://blueimp.github.com/jQuery-File-Upload/)文件上传插件，该插件支持更大的文件（尽管服务器超时和 PHP 配置在这里也起作用）。您可能想查看[分块上传](https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads)。

# python - 如何从字符串中提取某些元素？

> ID：13488775
> 
> 赞同：0
> 
> 时间：2012-11-21T08:03:07.417
> 
> 标签：python, python-2.7

我有很多文件，我已将所有文件名保存到`filelists.txt`. 这是一个示例文件：

```
cpu_H1_M1_S1.out  
cpu_H1_M1_S2.out  
cpu_H2_M1_S1.out  
cpu_H2_M1_S2.out 
```

当程序在文件名中检测到`_H`,`_M`时。`_S`我需要输出之后出现的数字。例如：

```
_H     _M     _S  
1       1      1  
1       1      2  
2       1      1  
2       1      2 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:10:56.200

您可以使用正则表达式：

```
>>> s = 'cpu_H2_M1_S2.out'
>>> re.findall(r'cpu_H(\d+)_M(\d+)_S(\d+)', s)
[('2', '1', '2')] 
```

如果它与格式不完全匹配，您将得到一个空列表作为结果，可用于忽略结果。如果您愿意，可以调整它以将 str 转换为 int：

```
[int(i) for i in re.findall(...)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:09:58.057

像这样使用`regex`：

```
In [13]: with open("filelists.txt") as f:
    for line in f:
        data=re.findall(r"_H\d+_M\d+_S\d+",line)
        if data:
            print [x.strip("HMS") for x in data[0].split("_")[1:]]
   ....:             
['1', '1', '1']
['1', '1', '2']
['2', '1', '1']
['2', '1', '2'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:21:38.290

尽管我对正则表达式本身没有任何反对意见，但我认为这对于这个问题来说太过分了。这是一个更轻的解决方案：

```
five = operator.itemgetter(5)
seven = operator.itemgetter(7)
nine = operator.itemgetter(9)
with open("filelists.txt") as f:
    for line in f:
        return [(int(five(line)), int(seven(line)), int(nine(nine))) for line in f] 
```

希望有帮助

# spring - SpringMVC3 与 Hibernate4 集成

> ID：13488778
> 
> 赞同：0
> 
> 时间：2012-11-21T08:03:19.927
> 
> 标签：spring, hibernate

**描述：**

1.  建立一个基于 SpringMVC 的 Java EE 项目。
2.  运行项目，运行良好
3.  添加 Hibernate4 框架库支持。

**问题，异常**

1）在我将'dataSource' bean添加到SpringMVC配置文件后，它总是在启动时抛出。

> 来自 ServletContext 资源 [/WEB-INF/dispatcher-servlet.xml] 的 XML 文档中的第 45 行无效；嵌套异常是 org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: 匹配通配符是严格的，但找不到元素“tx:annotation-driven”的声明。

2）我提到了[匹配的通配符是严格的，但是找不到元素'tx：annotation-driven'的声明](https://stackoverflow.com/questions/6058037/the-matching-wildcard-is-strict-but-no-declaration-can-be-found-for-element-tx)

仍然是同样的错误。

**SpringMVC 配置 XML 文件**

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
    <property name="url" value="jdbc:sqlserver://localhost:1433;DatabaseName=test" />
    <property name="username" value="root" />
    <property name="password" value="123edkx" />
</bean>

<mvc:resources mapping="/resources/**" location="/resources/" />
<!--HandlerMapping-->
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"/>

<!--HandlerAdapter-->
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"/>

<!--ViewResolver -->
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/Views/" />
    <property name="suffix" value=".jsp" />
</bean>

<!--Controller -->
<bean class="com.annotation.controllers.Test" />
<bean class="com.annotation.controllers.LogicController" /> 
```

**问题：**

有谁知道如何解决这个问题？或者建议一些关于 SpringMVC3.x 与 Hibernate 4 的集成教程？

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                       http://www.springframework.org/schema/mvc
                       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                       http://www.springframework.org/schema/tx
                       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">
   <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
    <property name="url" value="jdbc:sqlserver://localhost:1443;DatabaseName=beta_nl" />
    <property name="username" value="root" />
    <property name="password" value="12rekasQL" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <!--<property name="packagesToScan" value="com.vo" />-->
    <property name="dataSource" ref="dataSource"/>
    <property name="mappingLocations" value="classpath:com/vo/*.hbm.xml"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.SQLServer2008Dialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="transactionManager"
      class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<mvc:resources mapping="/resources/**" location="/resources/" />
<!--HandlerMapping-->
<!--<bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />-->
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"/>

<!--HandlerAdapter-->
<!--<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />-->
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"/>

<!--ViewResolver -->
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/Views/" />
    <property name="suffix" value=".jsp" />
</bean>

<!--Controller -->
<bean class="com.annotation.controllers.Test" />
<bean class="com.annotation.controllers.LogicController" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:17:13.767

我最近使用了[http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)，它的配置工作得很好。

请发布完整的配置，以及命名空间声明等。

**更新**：请检查是否存在 xsi 命名空间声明

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:12:37.833

我认为这是您没有将 xsd 添加到配置文件的开头。下面是您将使用的 xsd 和定义。xmlns:tx="http://www.springframework.org/schema/tx" [http://www.springframework.org/schema/tx](http://www.springframework.org/schema/tx) [http://www.springframework.org/schema/tx/spring-tx- 3.0.xsd](http://www.springframework.org/schema/tx/spring-tx-3.0.xsd) ". 如果你想使用 tx 注释，你还应该配置一个事务管理器。

# sql - 如何显示每个部门每天访问系统的员工数量？

> ID：13488789
> 
> 赞同：0
> 
> 时间：2012-11-21T08:03:56.713
> 
> 标签：sql, sql-server-2008-r2

我是 ASP.NET 中使用 C# 的新开发人员。我为其中一家公司开发了一个基于 Web 的应用程序，现在我需要开发一个日志来显示访问该系统的唯一人员的数量。例如，AA 部门的员工 A 和 B 今天访问了该系统。员工 A 在同一天两次访问系统。日志应该显示今天有两名来自 AA 部门的员工访问了系统，而不是三名。

我有以下数据库设计：

```
Employee Table: Username, Name, DivisionCode (DivisionCode is a foreign key to SapCode)
Divisions Table: SapCode DivisionShortcut   
Log Table: ID, Username, DateTimeAccessing 
```

我编写了以下查询，显示了用户名、员工姓名、部门和 DateTimeAccessing：

```
SELECT     dbo.[Log].Username, dbo.employee.Name, dbo.Divisions.DivisionShortcut, dbo.[Log].DateTimeAccessing
FROM         dbo.employee INNER JOIN
                      dbo.[Log] ON dbo.employee.Username = dbo.[Log].Username INNER JOIN
                      dbo.Divisions ON dbo.employee.DivisionCode = dbo.Divisions.SapCode 
```

查询应显示每天根据部门和日期访问系统的员工数量，例如：

```
At Nove 21, Division AA = 2    
   Nove 21, Division BB = 7    
   Nove 20, Division AA = 12 and so on 
```

**那么该怎么做呢？**

****更新：* *** 我现在正在使用以下查询：

```
SELECT     CONVERT(varchar(10), l.DateTimeAccessing, 120) AS Date, d.DivisionShortcut, COUNT(DISTINCT l.Username) AS Cnt
FROM         dbo.employee AS e INNER JOIN
                      dbo.[Log] AS l ON e.Username = l.Username RIGHT OUTER JOIN
                      dbo.Divisions AS d ON e.DivisionCode = d.SapCode
GROUP BY CONVERT(varchar(10), l.DateTimeAccessing, 120), d.DivisionShortcut 
```

现在的问题是，例如，如果我想查看所有部门的今天或 11 月 10 日的统计信息，日期列将显示该部门在该日期没有员工访问系统的 NULL 值。**为什么？以及如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:12:02.787

用于`count(distinct)`统计用户数量，并将`group by`结果按分区和日期分组。

您可以使用`convert`从日期时间获取日期作为字符串，但请注意它会稍微减慢查询速度。

```
select d.DivisionShortcut, convert(varchar(10),l.DateTimeAccessing,120), count(distinct l.Username) as Cnt
from dbo.employee e
inner join dbo.[Log] l on e.Username = l.Username
inner join dbo.Divisions d on e.DivisionCode = d.SapCode
group by d.DivisionShortcut, convert(varchar(10),l.DateTimeAccessing,120) 
```

### 更新：

以下是参加日期的方法：

```
select d.DivisionShortcut, t.DateAccessing, count(distinct l.Username) as Cnt
from dbo.employee e
inner join dbo.[Log] l on e.Username = l.Username
inner join dbo.Divisions d on e.DivisionCode = d.SapCode
inner join (
  select distinct convert(varchar(10),DateTimeAccessing,120) as DateAccessing
  from dbo.Divisions
) t on t.DateAccessing = convert(varchar(10),l.DateTimeAccessing,120)
group by d.DivisionShortcut, t.DateAccessing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:44:32.373

尝试这个

```
SELECT  cast(L.DateTimeAccessing as DATE) DateTimeAccessing
    ,D.DivisionShortcut
    ,count(distinct L.Username) as Cnt
    FROM dbo.employee E
    INNER JOIN dbo.[Log] L on E.Username = L.Username
    INNER JOIN dbo.Divisions D on E.DivisionCode = D.SapCode
    GROUP BY cast(L.DateTimeAccessing as DATE),D.DivisionShortcut 
```

# piecewise - 绘制分段回归

> ID：13488790
> 
> 赞同：1
> 
> 时间：2012-11-21T08:04:06.573
> 
> 标签：piecewise

有人可以帮我绘制分段线性回归吗？

```
data = sales_ID
I have a plot with a sales-curve:
x-axis: time
y-axix: sales 
```

现在我想为销售曲线上的三个部分创建独特的回归线。断点应该是`sales=100000`和`sales=250000`。
我试过`abline(lm(sales_ID$sales~sales_ID$time))`了，但我怎样才能把这个回归线分成所需的部分？

非常感谢你的帮助！塔尼亚

# ruby-on-rails - 每当 gem 用于 cron 作业时如何使用？

> ID：13488791
> 
> 赞同：0
> 
> 时间：2012-11-21T08:04:13.307
> 
> 标签：ruby-on-rails, actionmailer, whenever

我正在制作一个应用程序，用户每分钟都会收到一封邮件，但问题是它没有收到任何邮件。我已经安装了whengegem并运行了bundle install命令。之后我运行了everytimeize。生成并在下面给出的命令和 schedule.rb 文件是文件。

用户控制器

```
class UsersController < ApplicationController
# GET /users
# GET /users.json

def index 
@users = User.all

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @users }
end
end

# GET /users/1
# GET /users/1.json
def show
@user = User.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @user }
end
end

# GET /users/new
# GET /users/new.json
def new
@user = User.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @user }
end
end

# GET /users/1/edit
def edit
@user = User.find(params[:id])
end

# POST /users
# POST /users.json
def create
@user = User.new(params[:user])

respond_to do |format|
  if @user.save

    format.html { redirect_to(@user, :notice => 'User was successfully created.') }
    format.json { render :json => @user, :status => :created, :location => @user }
  else
    format.html { render :action => "new" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
  end
end
end

# PUT /users/1
# PUT /users/1.json
def update
@user = User.find(params[:id])

respond_to do |format|

    format.html { redirect_to @user, notice: 'User was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end
end

# DELETE /users/1
# DELETE /users/1.json
def destroy
@user = User.find(params[:id])
respond_to do |format|
  if @user.destroy
    # Tell the UserMailer to send a welcome Email after save

    format.html { redirect_to(@user, :notice => 'User was successfully created.') }
    format.json { render :json => @user, :status => :created, :location => @user }
  else
    format.html { render :action => "new" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
  end
end
end

end 
```

时间表.rb

```
every 1.minute do
runner "User.send_email_to_user"
end 
```

这是模型 user.rb

```
class User < ActiveRecord::Base
attr_accessible :email, :login, :name, :Notification

def self.send_email_to_user
UserMailer.welcome_email(@user).deliver
end
end 
```

这是 User_mailer.rb

```
class UserMailer < ActionMailer::Base
default from: "anasjmh@gmail.com"

def welcome_email(user)
@user = user
@url  = "http://gmail.com/login"
mail(:to => user.email, :subject => "Welcome to My Awesome Site")
end
end 
```

谁能告诉我问题出在哪里？？？？？？任何帮助，将不胜感激...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:10:38.717

UserMailer 本身是否有效？我有一个想法，你需要在邮件方法之后调用传递方法，邮件方法只准备消息：

```
mail(:to => user.email, :subject => "Welcome to My Awesome Site").deliver 
```

您是否正确配置了 action_mailer？您可以将其配置为显示错误，例如在 development.rb 中：

```
config.action_mailer.default_url_options = { :host => 'yourdomain.com' }
config.action_mailer.raise_delivery_errors = true
config.action_mailer.perform_deliveries = true 
```

# iphone - 如何在iphone上下载音频并同时播放？

> ID：13488792
> 
> 赞同：1
> 
> 时间：2012-11-21T08:04:29.837
> 
> 标签：iphone, audio

我的意思是我想将音频作为流播放，同时将其保存到 iPhone 上的本地文件中。

有人知道怎么做吗？

特别感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:47:01.353

Matt Gallagher 的 AudioStreamer 可以做到这一点：

[https://github.com/mattgallagher/AudioStreamer](https://github.com/mattgallagher/AudioStreamer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:48:38.737

请按照以下步骤解决：

1.  首先下载音频

2.  播放下载的音频

3.  将下载的音频保存在本地目录中

请参阅[从 URI 获取音频流并在 iPhone](https://stackoverflow.com/a/6856828/1106035)链接上播放。

# iphone - 钥匙串中存储的字符串是否有长度限制？

> ID：13488793
> 
> 赞同：35
> 
> 时间：2012-11-21T08:05:08.053
> 
> 标签：iphone, ios, keychain

我想将一些用户信息作为字符串存储在 iOS 的 Keychain 中，那么 Keychain 中的字符串有长度限制吗？

谢谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-06-11T14:32:05.993

我拼凑了一个 iOS 应用程序，该应用程序将使用[该库](https://github.com/kishikawakatsumi/UICKeyChainStore)进行二进制搜索以与钥匙串交互，并确定我最多可以存储一个长度为 16,777,110 的 NS(Mutable)String。因此明显小于其他答案中建议的 NSString 的最大长度或 SQLITE_MAX_LENGTH 的默认值。

编辑：如果您想快速验证此答案，我建议您尝试在钥匙串中存储长度为 16,777,110 的字符串，然后尝试长度为 16,777,111 的字符串。如果第一个有效而第二个无效，则此答案是正确的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-21T08:14:20.817

很难回答 :) 它应该支持[NSString的最大长度](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CB0QFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FCocoa%2FReference%2FFoundation%2FClasses%2FNSString_Class%2F&ei=RjNKVY7TB4LT7QbQ2oGYDw&usg=AFQjCNHcA5tu5wwE2Gg5Ms0OoEEDWSdRNg&bvm=bv.92291466,d.ZGU)

所以 Keychain 字符串可以容纳超过**42 亿个字符，与**[NSString](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CB0QFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FCocoa%2FReference%2FFoundation%2FClasses%2FNSString_Class%2F&ei=RjNKVY7TB4LT7QbQ2oGYDw&usg=AFQjCNHcA5tu5wwE2Gg5Ms0OoEEDWSdRNg&bvm=bv.92291466,d.ZGU)相同

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-10T18:47:14.617

iOS 的钥匙串被实现为 SQLite-database（参见[这里](http://resources.infosecinstitute.com/iphone-penetration-testing-3/)的例子）。因此，存储在 SQLite 数据库中的字符串的最大长度可能是钥匙串中字符串的最大长度的上限。

根据*sqlite.org上的*[这个页面](http://www.sqlite.org/limits.html)，字符串或 BLOB 的最大字节数受预处理器宏*SQLITE_MAX_LENGTH*的限制，其默认值为*10^9*。因此，假设字符串为 16 位编码，则字符串的最大长度将是该值的一半。但是，Apple 可能对*SQLITE_MAX_LENGTH*使用了较低的值。

# android - 如何集成 youtube android 播放器

> ID：13488794
> 
> 赞同：0
> 
> 时间：2012-11-21T08:05:10.120
> 
> 标签：android, youtube, media-player, youtube-api

我想专门为你集成视频播放器。我找到了[youtube android 播放器工具](http://yt-android-api.appspot.com/#16)，但我没有找到实现。

我已经实现了[android-youtube-player](http://code.google.com/p/android-youtube-player/)。但它不工作。

如果有人已经集成，则需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:32:31.790

YouTube Andoid Player 演示文稿是在 Google I/O 2012 上进行的，Android Player API 尚未公开（截至 2012 年 11 月 21 日）。该演示文稿是我所知道的唯一公开信息。

（更新：现已公开宣布，并作为实验性 API 发布： http: [//apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html](http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html)）

android-youtube-player 库是非官方的。我建议您阅读 YouTube API 服务条款：

[https://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

特别是，您不得使用官方 YouTube 播放器以外的任何播放器。

我听说过 iframe API 通过将其嵌入到嵌入式 Web 视图中来工作的报告 - 但我无法亲自验证这些报告，或者如何处理诸如跨域消息传递和 java 和 dom javascript 之间的跨语言绑定等问题绑定。

从 Android 应用加载 YouTube 视频的最简单方法是调用操作系统使用意图加载 YouTube 视频。

鉴于 YouTube 正在开发一个 Android 库（来自您的链接），我建议使用目前可用的最快和最简单的方法，并可能在以后的更新中使用该 API。

这里有更多关于在 YouTube 应用中调用视频开始的讨论： [Android YouTube 应用播放视频意图](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:58:07.417

现在，我成功的唯一可行方法是使用 html5 将内容嵌入到 webview 中。不幸的是，这将 API 级别限制为 13 左右。您不会离开应用程序，但播放和暂停控件位于 web 视图中，我无法弄清楚如何确定视频何时完成。

通过意图让用户“离开”您的应用以使用 YouTube 播放器本身的概念是可笑的。如果你做的不仅仅是播放视频（比如我们需要一个只播放一个视频的应用），那么你需要他们回来让应用变得有价值和新颖。使用带有 rstp 流的本机播放器是一种选择，但通常视频分辨率为 172x90 左右，可能是不可接受的。

我已经使用 webview 实现了，但我推迟发布应用程序，等待 Tim 提到的 Android 播放器 API。至于发布日期，我只有这个： [YouTubePlayerAPI Schedule for Distribution？](https://stackoverflow.com/questions/12479365/youtubeplayerapi-schedule-for-distribution)

似乎不太适合在 7 月份突出我们需要 Android 所需的这些好东西，然后几个月都没有，尤其是当 IOS 中有更直接、更强大的方法时。我花了时间和资源开发一个应用程序，期望在合理的未来使用这个 api，考虑到缺乏跟进和关于这个 api 的整体沟通不畅，我感到失望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:01:28.113

```
Intent i = new Intent ( Intent . ACTION_VIEW , Uri . parse ( "vnd.youtube:" + videoID )); 
List < ResolveInfo > list = getPackageManager (). queryIntentActivities ( i , PackageManager . MATCH_DEFAULT_ONLY ); 
        if ( list . size () == 0 ) {
            //write you own activity to display the video, if default youtube video display class is not available or else use the default class it self
            }

        System.out.println("Intent Actin :"+i.getAction());
        startActivity ( i ); 
```

# c++ - 尝试调用 main 中的函数时出错。

> ID：13488798
> 
> 赞同：0
> 
> 时间：2012-11-21T08:05:28.237
> 
> 标签：c++, function

我试图在我试图从 C 转换为 C++ 的程序中调用我的 main 中的函数。我在其他函数中的所有函数调用都编译没有错误，但是当它到达主函数中的一个函数调用时，我得到 `no matching function for call to contacts::menu(contacts*[5], int*, int&, char[50])'`

这是主要的：

```
int main() {

 contacts *friends[5];
 char buffer[BUFFSIZE];
 int counter=0;
 int i=0;

 contacts::menu(friends, &counter,i,buffer);

 getch();
 return 0;
} 
```

这是带有函数声明的类：

```
class contacts
{
  private:
          char *First_Name;
          char *Last_Name;
          char *home;
          char *cell;
  public:
  //constructor
         contacts()
         {
         }       

//Function declarations 
static void menu(contacts*friends ,int* counter,int i,char buffer[]);
}; 
```

这是菜单功能的开始部分，以便您了解它的标签：

```
void contacts::menu(contacts*friends,int* counter, int i,char buffer[]) 
{
  int user_entry=0;
  int user_entry1=0;
  int user_entry2=0;
  char user_entry3[50]={'\0'};
  FILE *read;
  printf("Welcome! Would you like to import a file? (1)Yes or (2) No");
  scanf("%d",&user_entry1);
  if(user_entry1==1)
    {
     printf("Please enter a file name");
     scanf("%s",user_entry3); 
     read=fopen(user_entry3,"r+"); 
```

就像我说的，我程序中的其他函数没有收到任何错误，但是这个有。我是 C++ 新手，所以我不确定是否需要添加一些特殊的东西来调用 main 中的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T08:08:48.467

这是问题

```
 contacts *friends[5]; 
```

你传递给

```
void contacts::menu(contacts*friends,int* counter, int i,char buffer[]) 
```

**您已经声明了一个指针**数组，当`contacts`您将它传递给它衰减到的函数时`contacts**`

要使用具有当前签名的函数，您需要将`friends`数组声明为

```
contacts* friends = new contacts[5]; 
```

或者

```
contacts friends[5]; 
```

在后一种情况下，将数组传递给函数将起作用，因为这将衰减到`contacts*`您的函数所期望的值。后一种情况更可取，因为您不必担心释放您在第一种情况下使用创建的内存`new`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T08:14:09.670

不要使用指针

```
int main()
{
    contacts friends[5]; 
```

你的代码将被编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:09:38.613

`contacts*`当您尝试传递时，菜单函数需要作为第一个参数`contacts*[]`

# tfs - 在 TFS 中使用命令标记工作区

> ID：13488801
> 
> 赞同：0
> 
> 时间：2012-11-21T08:05:36.063
> 
> 标签：tfs

```
C:\Users\mif\.jenkins\jobs\Trunk_-_Nightly_Build\workspace>tf label /owner:tfs.service Samplelabelname

Error message: Please specify a label name. 
```

我究竟做错了什么？我想标记整个工作区

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:36:35.450

尝试这个：

```
 C:\Users\mif\.jenkins\jobs\Trunk_-_Nightly_Build\workspace>tf label Samplelabelname /owner:tfs.service . /recursive 
```

查看帮助（tf label /?），您将看到信息的顺序，并且需要在 itemspec 之前指定 labelname，这是强制性的！在这种情况下，我将 itemspec 设置为 . 这应该是实际的文件夹并添加了递归标志，以包括所有子文件夹。

# reflection - F# 动态评估、反射、IL

> ID：13488805
> 
> 赞同：2
> 
> 时间：2012-11-21T08:05:50.157
> 
> 标签：reflection, f#, cil

由于我似乎将 95% 的编码时间实际上花在了 F# 的 FSI 上，因此我绕道（参见：Distracted）并想编写一些实用函数。

我感兴趣的特定实用程序是一个“反汇编”（http://www.cons.org/cmucl/doc/reading-disassembly.html）函数，它可以为给定函数转储IL，稍后可能会计算指令，基本的静态分析等，通常这只是分散注意力的天堂。我已经编写了将 byteArrayIL 映射到 MSIL 名称的代码（几乎）。

这是用于从当前模块获取函数名称的代码段：

```
let dec_c = MethodBase.GetCurrentMethod().DeclaringType

System.Reflection.Assembly.GetAssembly(dec_c).GetTypes() 
|> Seq.map (fun x -> x.FullName) //, get_function_instructions x) 
```

这几乎可以正常工作，因为 x.FullName 反映了实际的函数名称：

```
FSI_0001
<StartupCode$FSI_0001>.$FSI_0001
FSI_0002
FSI_0002+instructions_of_bytes@24
FSI_0002+remove_null_function_body_bytes@32
FSI_0002+remove_null_function_body_bytes@31-1
FSI_0002+resolve_IL_from_bytes@38
FSI_0002+resolve_IL_from_bytes@36-1
FSI_0002+it@49
FSI_0002+it@50-1
<StartupCode$FSI_0002>.$FSI_0002
FSI_0003
FSI_0003+it@49-2
FSI_0003+it@50-3
<StartupCode$FSI_0003>.$FSI_0003 
```

所以我们可以很容易地编写一个函数来根据我们的函数名进行过滤。

不幸的是（可能由于我的误解），似乎并非所有函数都以这种方式可用，例如，如果我们定义以下简单函数然后重新运行转储：

```
(* reload FSI *)
let simple_add x = x + 1
(* rerun the function name dumping *)

FSI_0001
<StartupCode$FSI_0001>.$FSI_0001
FSI_0002
FSI_0002+instructions_of_bytes@24
FSI_0002+remove_null_function_body_bytes@32
FSI_0002+remove_null_function_body_bytes@31-1
FSI_0002+resolve_IL_from_bytes@38
FSI_0002+resolve_IL_from_bytes@36-1
FSI_0002+it@50
FSI_0002+it@51-1
<StartupCode$FSI_0002>.$FSI_0002 
```

奇怪的是，结果文本中不存在“simple_add”函数。

思考： 1\. 可能simple_add这个函数不是通过反射实现的，直到看到被使用？听起来很奇怪。2\. 可能是那些“FSI_0002+it”字符串之一实际上是我们的函数。

问题： 1\. 为什么输出没有反映所有的函数名？2.有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:27:12.680

我想我在答案上睡了（半睡），我做错了，没有必要列出每个函数字符串名称......

```
let get_function_instructions (mb : System.Type) = 
  mb.GetMethods() 
  |> Seq.map ...

let find_func_print_instructions f =
  f.GetType()
  |> get_function_instructions 
  |> print_instruction_text 
```

# android - Android NFC 标签（通用阅读器）

> ID：13488808
> 
> 赞同：1
> 
> 时间：2012-11-21T08:06:01.123
> 
> 标签：android, tags, nfc, read-write

我有一些三星 TecTiles NFC 标签。我使用 Google Play 的 TecTiles 应用程序写入标签。

当我把标签给朋友时，他看不懂。经过一番调查，我发现他无法读取标签，因为他没有安装 TecTiles 应用程序。

我尝试使用其他几个应用程序写入标签，但似乎当我想读取标签时，我必须拥有用于写入标签的相同应用程序。

我可以以某种方式编写标签并使其可以被任何 NFC 阅读器应用程序读取吗？我必须有一个阅读器应用程序还是手机应该自己阅读标签？

谢谢。铅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:56:58.893

如果您将发送 NDEF 消息的标签编写为“绝对 URI”类型或其他常见类型，则使用这些类型处理 NDEF_DISCOVERED 意图的任何应用程序应用程序都将读取您写入的数据。不必使用相同的应用程序进行写入和读取。

检查此信息：

[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#creating-records](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#creating-records)

# c# - 图片拼图：网格行之间的空间/间隙

> ID：13488809
> 
> 赞同：1
> 
> 时间：2012-11-21T08:06:09.293
> 
> 标签：c#, wpf, image, grid

几周后，我尝试为家庭聚会编写一个小图片拼图。

拼图应该如下所示：[http](http://www.welt.de/spiele/online-spiele/article2128160/Bilderraetsel.html) ://www.welt.de/spiele/online-spiele/article2128160/Bilderraetsel.html （只需按“Spiel starten”即可查看演示）

我知道我现在的解决方案非常缓慢且丑陋..但作为第一步，它正在发挥作用。

我根据图像的大小动态创建了很多矩形（这很重要，因为我将拼图用于不同的图像）。

然后，每隔 X 秒，一个矩形将变得不可见（不透明度步长变为 0）。

问题是，在应用程序中，矩形行之间存在空格。

我用 StackPanel、WrapPanel 和 UniformGrid 进行了尝试。使用 UniformGrid，我得到了最好的结果。

最好的办法是，我会在内存中的整个图片大小上生成一个灰色图像，并在我的计时器中从这个内存图像中剪掉一些矩形。但我喜欢不透明效果，所以这是不可能的，不是吗？

这是我的 XAML：

```
<Window x:Class="PicturePuzzle.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="525"
        Height="420"
        Loaded="WindowLoaded">
  <Grid>
    <Grid Height="300" VerticalAlignment="Top">
      <Image x:Name="imgPicture"
             Source="/PicturePuzzle;component/Images/Koala.jpg"
             Stretch="Uniform" />
      <UniformGrid x:Name="ugMask"
                   Width="{Binding ElementName=imgPicture,
                                   Path=ActualWidth}"
                   Height="{Binding ElementName=imgPicture,
                                    Path=ActualHeight}" />

    </Grid>

    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Bottom">
      <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
        <Button x:Name="btnStart"
                Width="60"
                Margin="0,0,5,0"
                Click="BtnStartClick"
                Content="Start" />
        <Button x:Name="btnStop"
                Width="60"
                Click="BtnStopClick"
                Content="Stop"
                IsEnabled="False" />
        <Button x:Name="btnSolution"
                Margin="5,0,0,0"
                Click="BtnSolutionClick"
                Content="Lösung anzeigen" />
      </StackPanel>
      <Slider x:Name="slSpeed"
              IsDirectionReversed="True"
              Maximum="10"
              Minimum="1"
              ValueChanged="SlSpeedValueChanged"
              Value="3" />
    </StackPanel>
  </Grid>
</Window> 
```

我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Media;
using System.Windows.Shapes;
using System.Windows.Threading;

namespace PicturePuzzle
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow
  {
    public MainWindow()
    {
      _rectangles = new List<Rectangle>();

      InitializeComponent();

      _timer = new DispatcherTimer();
      _generated = new List<int>();
      _random = new Random();
    }

    private readonly List<Rectangle> _rectangles;
    private readonly List<int> _generated;
    private readonly DispatcherTimer _timer;
    private readonly Random _random;

    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
      var size = imgPicture.RenderSize;

      var columns = Convert.ToInt32(Math.Ceiling(size.Width/20));
      var rows = Convert.ToInt32(Math.Ceiling(size.Height/20));

      ugMask.Columns = columns;
      ugMask.Rows = rows;

      for (int y = 0; y < rows; y++)
      {
        for (int x = 0; x < columns; x++)
        {
          var rectangle = new Rectangle {Width = 20, Height = 20, Fill = Brushes.Gray};

          _rectangles.Add(rectangle);

          ugMask.Children.Add(rectangle);
        }
      }
    }

    private void BtnStartClick(object sender, RoutedEventArgs e)
    {
      btnStart.IsEnabled = false;
      btnStop.IsEnabled = true;

      _generated.Clear();
      _rectangles.ForEach(a => a.Opacity = 1);

      _timer.Interval = TimeSpan.FromSeconds(slSpeed.Value);
      _timer.Tick += TimerTick;
      _timer.Start();
    }

    private void TimerTick(object sender, EventArgs e)
    {
      if (_generated.Count >= _rectangles.Count)
      {
        _timer.Stop();
        return;
      }

      var random = GetNext();

      var alphaTimer = new DispatcherTimer {Interval = TimeSpan.FromSeconds(0.1)};

      alphaTimer.Tick += (o, args) =>
        {
          var rec = _rectangles[random];

          if (rec.Opacity <= 0)
          {
            alphaTimer.Stop();
            return;
          }

          rec.Opacity -= 0.1;
        };

      alphaTimer.Start();
    }

    private int GetNext()
    {
      int r;

      do
      {
        r = _random.Next(0, _rectangles.Count);
      } while (_generated.Contains(r));

      _generated.Add(r);

      return r;
    }

    private void BtnStopClick(object sender, RoutedEventArgs e)
    {
      btnStart.IsEnabled = true;
      btnStop.IsEnabled = false;

      _timer.Stop();
    }

    private void SlSpeedValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
      if (_timer != null)
      {
        _timer.Interval = TimeSpan.FromSeconds((slSpeed.Value / 10));
      }
    }

    private void BtnSolutionClick(object sender, RoutedEventArgs e)
    {
      btnStop.IsEnabled = false;
      btnStart.IsEnabled = true;

      _timer.Stop();

      _rectangles.ForEach(a => a.Opacity = 0);
    }
  }
} 
```

在这里你可以看到产生的结果：

![图片拼图](../Images/794376c86d8183171e3b7198211e5485.png)

欢迎每一个提示！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:16:15.440

我做了一些测试，你实际上有两个问题。

首先，矩形被抗锯齿。（这是 WPF 的默认设置。）您需要关闭矩形的抗锯齿以使边缘对齐。在创建矩形后添加以下行：

`rectangle.SetValue(RenderOptions.EdgeModeProperty, EdgeMode.Aliased);`

其次，如果 koala.jpg 的宽度在均匀拉伸到 300 的高度后，不是 20 的倍数，那么 20 x 20 的矩形，均匀分布，其间必须有间隙。结果中的差距是由于行被舍入并转换为 int32 时的舍入错误。

你有两个选择：

如果您不介意稍微挤压图像，可以将 Grid 元素的宽度设置为 20 的倍数。然后将 Image 标签的 Stretch 属性设置为“Fill”。这将使您的矩形完全正方形。

您还可以将矩形的宽度设置为`size.Width / columns` 这会稍微拉伸它们以使其完全适合。为了更好地衡量，您还可以将它们的高度设置为`size.Height / rows`。因为`size.Width`和`size.Height`是浮点数，所以在计算行和列时，这个除法将纠正舍入误差。这将允许任意大小的图像，但您的矩形不会完全是正方形。

# process - 使用 SSIS 包在 SSAS 中执行 2 个多维数据集

> ID：13488811
> 
> 赞同：1
> 
> 时间：2012-11-21T08:06:17.870
> 
> 标签：process, ssis, package, cubes

我在 SSAS 中有 2 个单独的多维数据集，我想用 SSIS 包处理这些多维数据集，但我想单独处理我的多维数据集，这意味着我不想使用完整的过程，我的目标是单独处理多维数据集。当我使用“分析服务处理任务”时，有时会出现错误。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:16:53.833

您可以创建 Analysis Services 的探查器跟踪。执行您的操作（即流程更新）并查看分析服务命令，该命令看起来像

```
<Batch xmlns="...">
  <Parallel>
    <Process xmlns:xsd="...">
      <Object>
        <DatabaseID>Database</DatabaseID>
        <DimensionID>DimensionName</DimensionID>
      </Object>
      <Type>ProcessUpdate</Type>
      <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
    </Process>
  </Parallel>
</Batch> 
```

然后，您可以创建一个 SQL 作业作为 SQL Server Analysis Services 命令类型，以相应地安排每个多维数据集。

# google-app-engine - 使用实例和模型属性检索 NDB 实体属性值

> ID：13488812
> 
> 赞同：0
> 
> 时间：2012-11-21T08:06:20.450
> 
> 标签：google-app-engine, google-cloud-datastore

我有许多不同的模型（ModelA、ModelB），其中包括一个引用通用模型（ModelC）实体的 KeyProperty。我有一个方法需要使用 ModelA 和 ModelB 的多个实例引用的实体进行一些处理，但是每个模型的 KeyProperty 命名不同，并且应该因为它们在 ModelA 和 ModelB 中扮演根本不同的角色。我需要使用引用 ModelC 的 KeyProperty 进行的处理是 ModelA 和 ModelB 的相同实体列表，所以我应该能够定义一个可以在两者上调用的通用方法，但是我如何告诉该方法使用哪个属性？

我可以使用模型的 property 属性从实体中检索该属性的值吗？

我已经广泛阅读了 NDB 上的 App Engine 文档，但我无法弄清楚如何做到这一点。要么它非常微不足道，要么我错过了文档中的某些内容，但我无法解决这个问题。

我将在下面提供一个简单的示例：

**楷模：**

```
class ModelA(ndb.Model):
    name = ndb.StringProperty()
    last_model_c = ndb.KeyProperty(kind='ModelC')
    ...

class ModelB(ndb.Model):
    sku = ndb.StringProperty()
    first_use_model_c = ndb.KeyProperty(kind='ModelC')
    ...

class ModelC(ndb.Model):
    ... 
```

**调用处理：**

```
...
    q = ModelA.query()
    ...
    self.model_c_scan(q.fetch(), ModelA.last_model_c)

...

    q = ModelB.query()
    ...
    self.model_c_scan(q.fetch(), ModelB.first_use_model_c) 
```

**加工：**

```
...
    def model_c_scan(entity_list, property)
        ...
        for entity in entity_list:
            model_c_key = <get the entity's value for the property>
            model_c = model_c_key.get()
            ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:20:43.187

我找到的解决方案是使用字符串指定属性的名称，并简单地使用 python 的`getattr()`.

也兼容 ndb 模型的纯 python 方法`getattr()`的工作原理如下：

```
getattr(ModelName,'propertyName') 
```

# jquery - Highcharts 饼图数据标签内外

> ID：13488813
> 
> 赞同：7
> 
> 时间：2012-11-21T08:06:25.287
> 
> 标签：jquery, highcharts, pie-chart

我想要一个饼图，里面和外面都有数据标签。我知道，负距离显示馅饼内的标签。但我想要它在里面和外面。外面我想显示百分比和点的总和。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-28T07:06:14.427

有一个简单的工作围绕它

那就是你用不同的数据标签覆盖 2 个饼图

[http://jsfiddle.net/4RKF4/29/](http://jsfiddle.net/4RKF4/29/)

```
 $(function () {

        // Create the chart
        $('#container').highcharts({
            chart: {
                type: 'pie',
                backgroundColor: 'rgba(0,0,0,0)',
                y:100

            },
            title: {
                text: 'sfs '
            },
            yAxis: {
                title: {
                    text: ' '
                }
            },
            plotOptions: {
                pie: {
//                   y:1,
                    shadow: false,
//                  center: ['50%', '50%'],
                    borderWidth: 0,
                    showInLegend: false,
                    size: '80%',
                    innerSize: '60%'
                  ,

                    data: [
                        ['allo', 18],
                        ['asdad', 14],
                        ['asdad', 11],
                        ['asdasd', 10],
                        ['adad', 8],
                        ['asdada', 7],
                        ['adada ada', 7],
                        ['adad', 5],
                        ['asdas',7],
                        ['ada', 3]

                    ]
                }
            },
            tooltip: {
                valueSuffix: '%'
            },
            series: [
                {
                    type: 'pie',
                    name: 'Browser share',

                    dataLabels: {
                        color:'white',
                        distance: -20,
                        formatter: function () {
                            if(this.percentage!=0)  return Math.round(this.percentage)  + '%';

                        }
                    }
                },
                {
                    type: 'pie',
                    name: 'Browser share',

                    dataLabels: {
                        connectorColor: 'grey',
                        color:'black',
 //                            y:-10,
                        softConnector: false,
                        connectorWidth:1,
                        verticalAlign:'top',
                        distance: 20,
                        formatter: function () {
                            if(this.percentage!=0)  return this.point.name;

                        }
                    }
                }
            ]
        });
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T08:56:11.733

您无法设置双数据标签，但您可以使用解决方法，这并不完美，但可能会有所帮助。所以你可以设置 useHTML，然后在格式化程序中返回两个 div，第一个是适当的数据标签（外部），第二个是内部。然后用计数器设置 id，将每个 div 的 id 定义为唯一的，然后只需要设置适当的 CSS。此处提供位置一数据标签的示例：http: [//jsfiddle.net/4RKF4/](http://jsfiddle.net/4RKF4/)

```
$(function () {
var chart,
    counter = 0;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    useHTML:true,
                    formatter: function() {
                        counter++;
                        return '<div class="datalabel"><b>'+ this.point.name +'</b>: '+ this.percentage +' %</div><div class="datalabelInside" id="datalabelInside'+counter+'"><b>'+ this.point.name +'</b>: '+ this.percentage +' %</div>';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }]
    });
});

}); 
```

CSS 样式：

```
.datalabelInside {
position:absolute;
}

 #datalabelInside1 {
color:#fff;
left:-150px;
} 
```

# mysql - MySQL 子查询 select 语句在 Update 查询中用于扣除股票

> ID：13488815
> 
> 赞同：1
> 
> 时间：2012-11-21T08:06:26.427
> 
> 标签：mysql

我有两张桌子

表库存：

```
item_no
item_name
item_qty 
```

表位置：

```
orderno
qty 
```

我想将购买的物品（数量）扣除到库存物品（物品数量）中。所以我可以直接更新 table_inventory

```
UPDATE table_inventory 
SET item_qty = (item_qty - (SELECT qty FROM tblpos WHERE qty='" & txtqty.Text & "'))
WHERE item_no='" & txtitemno.Text & "' 
```

我似乎猜对了，但每当我两次尝试相同的项目时。我会得到“子查询返回超过 1 行”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:08:47.083

关于什么？：

```
UPDATE table_inventory 
SET 
    item_qty = (item_qty - (SELECT qty FROM tblpos WHERE qty='" & txtqty.Text & "' LIMIT 0,1)) 
WHERE item_no='" & txtitemno.Text & "' 
```

您真的应该制作一个[sqlfiddle](http://sqlfiddle.com/)，以便人们可以更好地帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:12:56.147

首先，该查询看起来很可疑——从用户指定 qty 值的表中选择 qty。

为什么不直接在 txtqty.Text 中使用用户输入？

其次，如错误所示，SELECT 返回具有相同数量值的多行。如果这就是您要查询的内容，您可以简单地添加`DISTINCT`子句以仅获取一行一列。

```
UPDATE table_inventory 
SET 
    item_qty = 
        (item_qty - (
                     SELECT DISTINCT qty 
                     FROM tblpos 
                     WHERE qty='" & txtqty.Text & "'
                     )
        )
WHERE item_no='" & txtitemno.Text & "' 
```

或者简单地说，只使用用户输入本身。

此外，您的查询构造容易受到 SQL 注入的影响，因为您只是在读取用户输入并将其附加到您的查询中而没有对其进行清理。你也应该注意这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:24:20.463

我认为你`sum`在扣除之前需要数量，所以我的建议如下，

```
UPDATE table_inventory 
SET item_qty = 
(item_qty - (SELECT sum(qty) FROM tblpos WHERE qty='" & txtqty.Text & "' group by qty))
WHERE item_no='" & txtitemno.Text & "' 
```

# statistics - 文本的逐点互信息

> ID：13488817
> 
> 赞同：28
> 
> 时间：2012-11-21T08:06:34.813
> 
> 标签：statistics, machine-learning, nlp

我想知道如何计算文本分类的逐点互信息。更准确地说，我想对推文进行分类。我有一个推文数据集（带注释），并且每个属于该类别的单词类别都有一个字典。鉴于此信息，如何计算每条推文的每个类别的 PMI，以将推文分类为这些类别之一。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-21T12:02:04.220

PMI 是衡量特征（在您的情况下是单词）和类（类别）之间的关联，而不是文档（推文）和类别之间的关联。该公式可在[Wikipedia](http://en.wikipedia.org/wiki/Pointwise_mutual_information)上找到：

```
 P(x, y)
pmi(x ,y) = log ------------ 
                  P(x)P(y) 
```

在该公式中，`X`是对单词的出现进行建模的随机变量，并对`Y`类别的出现进行建模。对于给定的单词`x`和给定的类`y`，您可以使用 PMI 来确定特征是否具有信息性，并且您可以在此基础上进行特征选择。拥有更少的特征通常可以提高分类算法的性能并大大加快它的速度。然而，分类步骤是分开的——PMI 仅帮助您选择更好的特征来输入您的学习算法。

* * *

编辑：我在原帖中没有提到的一件事是 PMI 对词频很敏感。让我们将公式重写为

```
 P(x, y)             P(x|y)
pmi(x ,y) = log ------------ = log ------------ 
                  P(x)P(y)             P(x) 
```

当`x`和`y`完全相关时，`P(x|y) = P(y|x) = 1`，所以`pmi(x,y) = 1/P(x)`。不太频繁`x`的 -es（单词）将比频繁的`x`-es 具有更高的 PMI 分数，即使两者都与`y`.

# c# - ReflectionOnlyGetType 与 GetType

> ID：13488818
> 
> 赞同：5
> 
> 时间：2012-11-21T08:06:46.577
> 
> 标签：c#, .net

我从 api 文档中了解到 ReflectionOnlyGetType 返回一个类型，很像 GetType。不同之处在于，使用 ReflectionOnlyGetType，加载类型仅用于反射，而不是用于执行。

那么为什么会这样：

```
 Type t = Type.ReflectionOnlyGetType("System.Collections.Generic.List`1[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089", false, false);
    ConstructorInfo[] cis = t.GetConstructors();
    foreach (ConstructorInfo ci in cis)
    {
        if (ci.GetParameters().Length == 0)
        {
            // ! no arg constructor found! let's call it!
            Object o = ci.Invoke(new Object[]{});
            Console.WriteLine("But wait, it was supposed to be reflection only??");
            Console.WriteLine(o.GetType().Name);
            List<String> lli = (List<String>)o;
            lli.Add("but how can this be?");
            Console.WriteLine(lli.Count);
            Console.WriteLine("I am doing a lot more than reflection here!");
        }
    } 
```

我的问题是：我似乎能够做的不仅仅是反思这种类型的成员。当他们说加载类型“仅用于反射，不用于执行”时，我是否误解了“执行”？或者，如果类型已经“加载”并且这里是由于在 mscorlib 中而加载的，那么 ReflectionOnlyGetType 是否会返回不同的（非仅反射）类型？还是完全不同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:32:24.483

您正在加载一个类型，`mscorlib`该类型已经被加载以供运行时执行。您可以检查`ReflectionOnly`程序集上的属性以查看它是否已加载到 ReflectionOnly 上下文中。在您的样本中，

```
Type t = Type.ReflectionOnlyGetType("System.Collections.Generic.List`1[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089", false, false);
Console.WriteLine(t.Assembly.ReflectionOnly); // prints False. 
```

似乎对 mscorlib 的反映有些受限。来自[MSDN](http://msdn.microsoft.com/en-us/library/ms172331.aspx)：

> 您不能使用仅反射上下文从执行上下文中的版本以外的 .NET Framework 版本加载 mscorlib.dll 版本。

我猜这扩展到将当前执行上下文中的一个加载到仅反射上下文中。

它似乎适用于其他 BCL 程序集：

```
Console.WriteLine(Assembly.ReflectionOnlyLoad("System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089").ReflectionOnly); // prints True 
```

# sql - 使用另一个表中的数据创建计算列

> ID：13488822
> 
> 赞同：16
> 
> 时间：2012-11-21T08:06:58.377
> 
> 标签：sql, sql-server, sql-server-2008, tsql, calculated-columns

我有一个 SQL Server 2008 R2 数据库。该数据库有两个表，分别称为 Pictures 和 PictureUse。

图片表有以下列：

```
Id (int)   
PictureName (nvarchar(max)) 
CreateDate (datetime ) 
```

PictureUse 表有以下列：

```
Id (int) 
Pictureid (int) 
CreateDate (datetime ) 
```

我需要在`Picture`表格中创建一个计算列，告诉我这张图片被点击了多少次。有什么帮助吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T08:11:05.590

您可以为此创建一个用户定义的函数：

```
CREATE FUNCTION dbo.CountUses(@pictureId INT)
RETURNS INT
AS
  BEGIN
      RETURN
        (SELECT Count(id)
         FROM   PictureUse
         WHERE  PictureId = @PictureId)
  END 
```

然后可以像这样添加计算列：

```
ALTER TABLE dbo.Picture
ADD NofUses AS dbo.CountUses(Id) 
```

但是，我宁愿对此发表看法：

```
CREATE VIEW PictureView
AS
  SELECT Picture.Id,
         PictureName,
         Picture.CreateDate,
         Count(PictureUse.Id) NofUses
  FROM   Picture
         JOIN PictureUse
           ON Picture.Id = PictureUse.PictureId
  GROUP  BY Picture.Id,
            PictureName,
            Picture.CreateDate 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-21T08:13:30.233

计算列只能引用同一个表中的其他列。您可以（根据 jeroenh 的[回答](https://stackoverflow.com/a/13488881/15498)）使用 UDF，但该列不会被存储或不可索引，因此每次访问该行时都必须重新计算它。

您可以创建一个包含此信息的*索引视图*`PictureUse`（如果我怀疑它只是来自 的行数）：

```
CREATE VIEW dbo.PictureStats
WITH SCHEMABINDING
AS
    SELECT PictureID,COUNT_BIG(*) as Cnt from dbo.PictureUse
GO
CREATE UNIQUE CLUSTERED INDEX IC_PictureStats on dbo.PictureStats (PictureID) 
```

在幕后，SQL Server 将有效地创建一个包含此视图结果的表，并且每次插入、更新或删除`PictureUse`都会自动为您维护此结果表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:15:55.720

您不必将计算列添加到表中，因为在更新后，如果原始表数据发生更改，则数据变得不一致，您始终可以使用此 select 语句来获取列数，或将其创建为视图

```
select p.id,count(*) as count 
from Picture P
join PictureUse  U
on p.id=u.Pictureid 
group by p.id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T08:26:13.367

这将起作用

```
SELECT  P.id
        ,P.PictureName 
        ,COUNT(P.id) as [Count] 
        FROM Picture P
        INNER JOIN PictureUse PU 
        ON P.id=PU.Pictureid 
        GROUP BY P.id,P.PictureName 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-21T08:12:49.880

试试这个

```
select count(distict pictureid) from pictureuse 
 inner join picture on picture.id=pictureuse.pictureid 
```

# php - 在 index.php 的子文件中包含函数的问题

> ID：13488824
> 
> 赞同：0
> 
> 时间：2012-11-21T08:07:04.350
> 
> 标签：php, arrays, function, null, include

为了将 php 处理与 HTML 代码分开，我决定将所有处理 php 放在一个主文件中。我在这个文件中将它命名为 library.php 我显示了我的所有函数。

我遇到的麻烦是该文件包含在主页 index.php 中

页面 index.php 确实包含许多其他文件。

当我在 GEt 上调用文件时，它就像 index.php?page=name_of_page

问题是当我在 index.php 中包含的子文件中调用此函数时

```
function affichMenuStat($paramStats){
    foreach ($paramStats as $stat){
        echo '<img src="'.$stat['image'].'"> <a href="'.$stat['lien'].'"> '.$stat['libelle'].'</a> | ';
    }
} 
```

它说数组是 NULL，但是当我在最后一行的主页 index.php 上使用 var_dump 显示数组时，

它说，它存在。

任何帮助将不胜感激。

# google-docs-api - 使用电子表格 API 的修订更改摘要

> ID：13488827
> 
> 赞同：2
> 
> 时间：2012-11-21T08:07:08.063
> 
> 标签：google-docs-api, google-spreadsheet-api

有没有办法使用电子表格 API 比较电子表格的两个修订版并找到更改摘要？

问候普拉文 B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:40:32.727

您可以使用 Drive API 检索任何文档（包括电子表格）的修订列表并获取每个修订的内容：

[https://developers.google.com/drive/manage-revisions](https://developers.google.com/drive/manage-revisions)

# java - JSF 2：直接调用托管 bean

> ID：13488832
> 
> 赞同：4
> 
> 时间：2012-11-21T08:07:29.747
> 
> 标签：java, jsf, jsf-2

我是 JSF 的新手 (2)。

在 Struts 中，我们可以从像`app.action`. 这会调用一个动作并返回一个结果页面，比如一个 JSP（最初没有 JSP/HTML）。

如何在 JSF 中完成同样的事情？（我知道如何从 .xhtml 调用操作）即直接从 URL 调用托管 bean 并获取结果页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:26:35.947

如果它正在为初始 GET 请求准备数据，只需在请求的 (post) 构造函数中完成这项工作，或者查看与页面关联的作用域托管 bean。

```
@ManagedBean
@RequestScoped
public class Bean {

    public Bean() {
        // Here.
    }

    @PostConstruct
    public void init(){ 
        // Or here, certainly if you rely on injected dependencies like @EJB.
    }

} 
```

如果它正在控制请求/响应并且可能重定向/导航到另一个页面，那么在`preRenderView`.

```
<f:event type="preRenderView" listener="#{bean.listener}" /> 
```

和

```
public void listener() {
    // ...

    // You want to redirect?
    externalContext.redirect(newURL);

    // Or you want to navigate?
    navigationHandler.handleNavigation(context, null, "newOutcome");
} 
```

或者，如果您想挂接*所有*请求，请使用[过滤器](https://stackoverflow.com/tags/servlet-filters/info)：

```
@WebFilter("/*")
public class MyFilter implements Filter {

    // ...

} 
```

### 也可以看看：

*   [有没有简单的方法来预处理和重定向 GET 请求？](https://stackoverflow.com/questions/7294651/is-there-any-easy-way-to-preprocess-and-redirect-get-requests)
*   [如何在 JSF 中进行重定向](https://stackoverflow.com/questions/4032825/how-to-make-a-redirection-in-jsf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T13:28:50.240

您所询问的模式并不是 JSF 工作方式的真正原生模式。

[像 Struts 和Spring MVC](http://en.wikipedia.org/wiki/Spring_Framework#Model-view-controller_framework)这样的基于请求的框架，以及旧的基于 Model-2 Servlet/JSP 的方法确实像这样工作。

在 JSF 中，首先是自动映射到请求 URL 的页面（视图）。没有直接映射到 URL 的 bean 的概念，也没有框架强制执行与视图 1:1 关系的 bean 的概念。虽然有支持 bean 的概念，但这是惯例。对于 JSF，所有 bean 都是仅由视图引用的“辅助 bean”。

BalusC 在他的回答中概述了当今可以用来从 JSF 中基于请求的框架中获取一些行为的流行方法。JSF 2.2 将通过引入[视图操作](http://jdevelopment.nl/jsf-22/#758)稍微扩展这种支持，这将`preRenderViewEvent`.

也就是说，JSF 是一个非常灵活的框架，很少有事情是一成不变的。许多 JSF 的行为可以通过精心设计的插件和装饰器系统来替换或添加。

对于这个用例，JSF 将 URL 绑定到（Facelets）视图这一事实可以被覆盖，实际上您可以让 bean 直接响应请求。尽管出于稍微不同的目的，这实际上是我为[JavaVDL 所做](http://jdevelopment.nl/single-class-pure-java-jsf-application)的，通过覆盖所谓的视图处理程序。

您必须问自己这是否真的是您想要做的，如果您想以这种方式工作，JSF 是否是您的最佳选择。但是通过 JavaVDL（[此处](http://code.google.com/p/javavdl)为源代码）中概述的方法，您应该能够做到这一点。请注意，最后一种方法不适合初学者，如果您想自己完成此操作，则需要相当多的 JSF 经验。*（如果您或其他任何人希望拥有此功能，请考虑在[OmniFaces 问题列表](https://github.com/omnifaces/omnifaces/issues)中为其创建问题）*。

# sharepoint - Sharepoint 启动显示 IIS 未安装错误

> ID：13488833
> 
> 赞同：0
> 
> 时间：2012-11-21T08:07:29.293
> 
> 标签：sharepoint, iis, sharepoint-2007

我已经在我的 Windows 服务器上安装了 sharepoint 2007。当我尝试通过配置向导启动它时，它会给出以下警报错误：

```
Internet information services not installed 
```

我已经安装了 IIS。那么，为什么会出现这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-17T09:22:41.340

1.  转到开始->打开或关闭 Windows 功能
2.  选择以下选项：
    1.  Internet 信息服务->Web 管理工具->IIS 6 管理兼容性
    2.  勾选以下：
        *   IIS 6 管理控制台
        *   IIS 元数据库和 IIS 配置兼容性
        *   IIS 管理控制台
        *   国际空间站管理服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:23:46.753

您使用的是哪个版本的 IIS？

如果您使用的是 Windows Server 2008 服务器管理器**或**IIS7.0，那么您需要提供 IIS6 管理功能角色才能与 Moss2007 一起使用。

请按照以下步骤解决此问题。

*   打开服务器管理器，转到角色并右键单击 Web 服务器
*   在出现的窗口中，启用显示 IIS 6 Metabase Compatibility (Installed) 的选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T10:46:01.497

我有同样的问题，这些是解决它的步骤：

=> 检查您是否已经安装了 IIS 6.0 兼容性，如果没有，请勾选该框以安装并再次运行配置向导。=>假设第一步对您不起作用，转到可选功能并取消选择整个互联网信息服务分支，这将卸载它。重新启动 PC => 再次转到可选功能并勾选框以安装整个互联网信息服务分支。

这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T12:04:10.630

对我来说，它是通过重新启用“IIS Admin Service”来解决的——由于某种原因它被禁用了

# java - 如何在 Java 中定义配置参数？

> ID：13488841
> 
> 赞同：1
> 
> 时间：2012-11-21T08:07:59.863
> 
> 标签：java

我的主要功能使用示例代码中给出的一组硬编码参数。目标：我想要一个更简洁的代码，而不是在 main 中硬编码这些值。问题：有没有办法在一个单独的文件（如配置文件）中定义所有这些参数并启用对 main 的访问？任何想要更改值的人都只需要修改参数文件。如果有更好的处理目标的方法，请提出建议。

```
 public class Sample {

    public static void main(String[] arg) throws Exception {
    BufferedReader File = new BufferedReader(new FileReader("myfile.txt"));
            // parameter list
            String Parameter_1 = "Value_1";
            String Parameter_2 = "Value_2";
            .......
            //Function code
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:10:07.487

查看 Java 属性文件；您可以使用类轻松加载（和保存）它们`java.util.Properties`。

属性文件是包含键值对的文本文件，例如：

```
Parameter_1=Value_1
Parameter_2=Value_2 
```

加载属性文件非常简单：

```
Properties props = new Properties();
InputStream in = new FileInputStream("config.properties");
props.load(in);
in.close(); 
```

然后你可以得到值：

```
String Parameter_1 = props.get("Parameter_1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:10:59.110

使用[属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)对象：

```
Properties prop = new Properties();

        try {
               //load a properties file
            prop.load(new FileInputStream("config.properties"));

               //get the property value and print it out
                System.out.println(prop.getProperty("Value_1"));
            System.out.println(prop.getProperty("Value_2"));
            System.out.println(prop.getProperty("Value_3"));

        } catch (IOException ex) {
            ex.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:33:32.273

至少从 Java 1.4 开始，Preferences API 是优于 Properties 的首选方式[。](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)实际上有其他方法和偏好之间的[比较。](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html#prefs-other)

# validation - kohana ORM 用户模型无法验证其他用户行，例如姓名、姓氏等

> ID：13488844
> 
> 赞同：2
> 
> 时间：2012-11-21T08:08:26.517
> 
> 标签：validation, kohana, admin, add

在哪些方面做改变所以检查了？我不想检查兼容性重复字段的密码字段。

我在 Kohana 用户控制器中的添加功能

```
public function action_add() {
        $title = 'Add User';
        $this->template->title = $title;
        $this->template->content = View::factory('action/users/add')
                ->bind('title', $title)
                ->bind('message', $message)
                ->bind('errors', $errors);

        if (HTTP_Request::POST == $this->request->method()) {
            try {

                // Create the user using form values
                $user = ORM::factory('user')->create_user($this->request->post(), array(
                    'username',
                    'password',
                    'email',
                    'last_name',
                    'first_name',
                    'middle_name'
                        ));

                // Grant user login role
                $user->add('roles', ORM::factory('role', array('name' => 'login')));

                // Reset values so form is not sticky
                $_POST = array();

                Session::instance()->set('message', "You have added user '{$user->username}' to the database");
                Request::current()->redirect('/admin/' . $this->request->param('lang') . '/action/users' );
            } catch (ORM_Validation_Exception $e) {

                // Set failure message
                $message = 'There were errors, please see form below.';

                // Set errors using custom messages
                $errors = $e->errors('models');
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:40:07.953

我认为您可以直接使用 ORM::create() 方法，

[http://kohanaframework.org/3.3/guide-api/Model_Auth_User#create_user](http://kohanaframework.org/3.3/guide-api/Model_Auth_User#create_user)

ORM::create_user() 所做的是验证密码，这正是你想要跳过的

[http://kohanaframework.org/3.3/guide-api/Model_Auth_User#create_user](http://kohanaframework.org/3.3/guide-api/Model_Auth_User#create_user)

所以你应该使用类似的东西

```
 $user = ORM::factory('user')->values($this->request->post(), array(
                'username',
                'password',
                'email',
                'last_name',
                'first_name',
                'middle_name'
                    ))->create(); 
```

避免调用 create_user，您也将避免密码长度验证，因此通常您将在模型中添加此规则，但由于密码获取哈希，您应该在控制器处理它，我看到您没有使用任何验证或过滤器对于 $POST 数据，我建议您使用 Validator 对象

[http://kohanaframework.org/3.3/guide-api/Validation](http://kohanaframework.org/3.3/guide-api/Validation)

有了它，您可以限制密码长度

# iphone - iPod touch/iPhone 应用程序在 iOS 6 中卡在启动画面上，但在 iOS 5 中运行良好

> ID：13488847
> 
> 赞同：1
> 
> 时间：2012-11-21T08:08:40.837
> 
> 标签：iphone, ios6, xcode4.5, ipod

我的应用程序是为第 4 代 iPod touch 开发的，可与自定义基座一起进行音频分析。该应用程序也可以在不连接到扩展坞的情况下运行。因此，对于 iOS 5 和 4.3，无论设备（iPod touch）是否连接到扩展坞都可以正常工作。现在使用 iOS 6，如果设备未连接到扩展坞，它可以正常工作，但是如果我将设备连接到扩展坞并运行应用程序，应用程序有时会卡在启动屏幕上并在几秒钟后终止（有时一秒钟后，有时超过 10 秒后）。

您将如何调试此类问题？

我知道的一件事是，当应用程序在启动时尝试加载数据并且加载数据的时间过长时，系统会终止该应用程序。我不相信这里会发生这种情况，因为无论设备是否插入扩展坞，相同的应用程序都可以在 iOS 5 上正常运行。

开发环境：xcode 4.5.2、Mountain Lion 10.8.2、第四代iPod touch

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:01:20.817

应用程序崩溃后，您应该能够使用 XCode 查看崩溃转储。这些故障转储应该为您指明第一个方向。

当您使用扩展坞时，如有必要，您可以通过 WiFi 对其进行调试。

# mysql - 将 mysql 与 peewee 连接以及访问表的一些问题

> ID：13488857
> 
> 赞同：2
> 
> 时间：2012-11-21T08:09:33.350
> 
> 标签：mysql, sqlite, orm, python-2.7, peewee

我一生中第一次在 linux 中进行 Web 开发，一旦它在 linux 机器上运行，它将被移植到嵌入式系统上。我在 mydb 数据库中有一个名为 Login 的表，带有密码。我使用 peewee 作为 ORM 进行连接。这是我正在运行的脚本

```
from peewee import *
mysql_db = MySQLDatabase('mydb', user='root',passwd='rakesh')
class Login(Model):
    usr_name = CharField()
    passwd = TextField()

mysql_db.connect()
usr = Login(usr_name="me", passwd='Peewee is cool')
usr.save()
for user in usr.filter(usr_name="me"):
    print usr.title 
```

我在 mydb 数据库（mysql）中创建了一个名为 Login 的简单表，当我查询并查看时似乎没问题

现在，当我运行此代码时，出现异常

```
Traceback (most recent call last):
  File "/home/rakesh/Ubuntu One/PDNFlywheels/PDB/access_ex.py", line 53, in <module>
    usr.save()
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1949, in save
    new_pk = insert.execute()
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1355, in execute
    result = self.database.execute(self)
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1446, in execute
    return self.execute_sql(sql, params, commit)
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1449, in execute_sql
    cursor = self.get_cursor()
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1420, in get_cursor
    return self.get_conn().cursor()
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1413, in get_conn
    self.connect()
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1401, in connect
    self.__local.conn = self._connect(self.database, **self.connect_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/peewee.py", line 1541, in _connect
    return sqlite3.connect(database, **kwargs)
OperationalError: unable to open database file 
```

正如您在最后一行中看到的那样，它试图使用 sqllite3 查找数据库，但我使用的是 mysql。我不明白为什么会这样。大多数 peewee 烹饪书籍、示例和其他解释都使用 sqllite 我从未发现任何直接的 mysql hack。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:53:59.847

您缺少要使用哪个数据库的指令。请阅读文档。

[http://peewee.readthedocs.org/en/latest/peewee/cookbook.html#using-with-mysql](http://peewee.readthedocs.org/en/latest/peewee/cookbook.html#using-with-mysql)

```
mysql_db = MySQLDatabase('mydb', user='root',passwd='rakesh')

class Login(Model):
    usr_name = CharField()
    passwd = TextField()

    class Meta:
        database = mysql_db 
```

# facebook - Facebook API 显示的最近更新/帖子数量不正确

> ID：13488858
> 
> 赞同：1
> 
> 时间：2012-11-21T08:09:34.527
> 
> 标签：facebook

我们正在使用 Facebook API 来显示应用程序中最近的 15 次更新。但最近的 15 次更新显示为少数 ID（Facebook ID），有些则显示为 3 或 4。它因 ID 而异。

我已经通过使用 Facebook ID 更新了大约 15 个帖子、喜欢等来测试这一点，但显示的最近更新只有 3 个。我从“FEEDS”获得这些更新。

# c# - IQueryable where 子句在继承的类中被覆盖

> ID：13488861
> 
> 赞同：0
> 
> 时间：2012-11-21T08:09:46.497
> 
> 标签：c#, linq, entity-framework

我想让继承的类有机会为我的查询提供 where 子句。这可能吗？

```
 protected IQueryable<EntityResult> GetEntities(ETBDataContext pContext)
    {
        return from e in pContext.Entities
               where e.StatusCode == "Published"

               //is there a way to add a dynamic where clause here?
               //I would like to ask the inherited class for it's input:

               && e.OtherColumn == "OtherValue" // <-- like GetWhere(e)?

               //without having to select the column

               orderby e.PublishDate descending

               select new EntityResult
               {
                   Name = e.Name,
                   Link = e.Link
               };
    } 
```

提前致谢！！！！！！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:13:30.833

由于您返回 IQueryable，因此仅在使用资源时才会执行查询。因此，只要它保持 IQueryable 状态，它就会只保留查询。

有了这些知识，您可以简单地在返回 IQueryable 的函数上应用 where

像这样：

```
myObject.GetEntities(myContextObject).Where(x => x.id == 5); 
```

由于您提到的 OtherCOlumn 不存在，您可以将默认查询更改为：

```
 protected IQueryable<EntityResult> GetEntities(ETBDataContext pContext)
{
    return (from e in pContext.Entities
           where e.StatusCode == "Published"

           //is there a way to add a dynamic where clause here?
           //I would like to ask the inherited class for it's input:

           && e.OtherColumn == "OtherValue" // <-- like GetWhere(e)?

           //without having to select the column

           orderby e.PublishDate descending

           select e).FirstOrDefault();
} 
```

然后在您的扩展位置中进行选择。因为只要返回类型保持 IQueryable 它就保持查询，这不会使其变慢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:13:19.700

Where 子句是一种扩展方法，因此您不能覆盖它，但您可以将动态构造的表达式树传递给 where 子句并产生所需的结果。看看这篇 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/bb882637.aspx](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:22:24.857

我不知道如何用 Linq 表示法写这个，因为我总是喜欢使用 Linq 扩展方法，但它看起来像这样：

```
protected IQueryable<EntityResult> GetEntities(ETBDataContext pContext)
{
    var q = pContext.Entities
        .Where(e => e.StatusCode == "Published");
    q = q.AddWhereCondition(q)
        .OrderByDescending(e => e.PublishDate)
        .Select(e => new EntityResult
           {
               Name = e.Name,
               Link = e.Link
           });
}

protected virtual IQueryable<Entity> AddWhereCondition(IQueryable<Entity> query)
{
    return query.Where(e => e.OtherColumn == "OtherValue");
} 
```

或者，通过将 Where() 条件提取为 Linq 表达式：

```
protected IQueryable<EntityResult> GetEntities(ETBDataContext pContext)
{
    var q = pContext.Entities
        .Where(e => e.StatusCode == "Published")
        .Where(e => GetWhereCondition(e))
        .OrderByDescending(e => e.PublishDate)
        .Select(e => new EntityResult
           {
               Name = e.Name,
               Link = e.Link
           });
}

protected virtual Expression<Func<Entity, bool>> GetWhereCondition(Entity e)
{
    return e => e.OtherColumn == "OtherValue";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:24:29.400

您可以定义一个可以应用额外 where 条件的虚拟方法：

```
protected IQueryable<EntityResult> GetEntities(ETBDataContext pContext)
{
    IQueryable<Entity> query = pContext.Entities
       .Where(e => e.StatusCode == "Published");

    query = ApplyWhereClause(query);

    return from e in query
           orderby e.PublishDate descending
           select new EntityResult
               {
                   Name = e.Name,
                   Link = e.Link
               };
    }

protected virtual IQueryable<Entity> ApplyWhereClause(IQueryable<Entity> entities)
{

} 
```

在您的派生类中，您将执行以下操作：

```
protected override IQueryable<Entity> ApplyWhereClause(IQueryable<Entity> entities)
{
    return entities.Where(/* insert your extra where clause here */);
} 
```

# d3.js - D3.js 中的边界框

> ID：13488862
> 
> 赞同：13
> 
> 时间：2012-11-21T08:09:49.743
> 
> 标签：d3.js, bounding-box

我想你们中的许多人，与 D3.js 一起工作过，已经经历过同样的事情：如果你的网络或任何你采取的可移动元素被推得很紧，它们就会不断地飞出 svg 元素。如果我的网络太大，外部节点会消失，它们有点像“世界边缘的堕落”。

我很确定有一种方法可以使 svg 的边框成为坚固的“墙”，因此元素不能离开它并在空间中不可见:)

你对这个问题做了什么？你是怎么解决的？

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T14:02:06.027

最后，如果您在网络上找到合适的网站，这很容易。 [http://bl.ocks.org/1129492](http://bl.ocks.org/1129492)完全符合我的要求 - 对象不能从 svg 中滑出。所以他只是在更新节点位置时添加了一些约束。我的“滴答”功能最终像

```
node.attr("cx", function(d) { return d.x = Math.max(15, Math.min(width - 15, d.x)); })
    .attr("cy", function(d) { return d.y = Math.max(15, Math.min(height - 15, d.y)); });

link.attr("x1", function(d) { return d.source.x; })
    .attr("y1", function(d) { return d.source.y; })
    .attr("x2", function(d) { return d.target.x; })
    .attr("y2", function(d) { return d.target.y; });

node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; }); 
```

每当可能发生重要事情时都会调用它，“tick”-事物是在 D3.js 深处构建的东西，所以不要问我这个问题。:)

给定代码中的前两行和最后一行检查坐标是否超出框框。

希望这可以帮助那里的人比我更快地完成这项工作；）

玩得开心，戴夫

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:33:46.863

要使边界在力导向图中成为实心“墙”，您需要对边界框的边缘实施一些自定义碰撞检测。[这是自定义碰撞检测的示例](http://bl.ocks.org/1804919)。

christopher 的方法适用于较小的图形，但对于比视口大得多的图形，它们将缩放到难以阅读的小尺寸。我上面给出的方法也将在小视口中的大图上失败，因为在某些时候无法解决冲突。

对于非常大的图表，我建议改为简单地允许用户平移和缩小。 [这篇 SO 帖子提供了一些有关缩放的提示](https://stackoverflow.com/questions/7871425/is-there-a-way-to-zoom-into-a-graph-layout-done-using-d3/7907043#7907043)。您还需要创建一个`rect`与图形大小相同的对象作为接收鼠标事件的目标。`tick`您可以在事件处理程序中动态调整它的大小，例如，强制有向图的大小。

希望这些是一些有用的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:54:50.917

修复图形可视化远离您的一般方法是获取边界框，然后在 SVG 上创建一个转换，将边界框准确地映射到视口（将纵横比限制在某个模糊合理的值）。

如果用户放大，那么您就会忘记这个过程。

结果将是，如果“东西”飞走，您实际上会看到它缩小。用户可以随意缩放。

让它运作良好的关键是写下状态图。当某些事情触发重新计算时，您将进入“修复边界框”模式，并且当图形大部分停止移动时，您切换到“用户控制缩放”模式。使其正常工作意味着正确地在状态之间进行转换（始终为高级用户提供覆盖）。

# batch-file - 如何使用文本文件中返回的值设置环境变量？

> ID：13488884
> 
> 赞同：1
> 
> 时间：2012-11-21T08:11:38.367
> 
> 标签：batch-file

文本文件将只有一个单词（“1234”或“密码”），现在我正在寻找一种将文本文件的内容提供给环境变量的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:12:53.173

如果您只想阅读一行，也可以使用`set /p`.

```
<myFile.txt set /p var=
echo %var% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:19:14.577

使用下面的 for 循环语法。用您的文件名或环境变量替换文件名。如果此代码应该放在批处理文件中，请将 % 替换为 %%，如 %%t。

```
for /F %t in (filename) Do (
    echo %t
    :: Do whatever else you want to do with %t
) 
```

# java - 石英多次执行后Java Excel POI停止

> ID：13488893
> 
> 赞同：6
> 
> 时间：2012-11-21T08:12:31.970
> 
> 标签：java, profiling, apache-poi, quartz-scheduler

我想对此有一些见解。

我有一个从数据库读取和写入 excel 文件的程序。它的执行基于使用 Quartz api 的计时器，并在每周的每个星期二触发。问题是，当我通过安排它每小时执行一次作业来测试它时，程序在编写 excel 文件的过程中执行了几次后突然停止。这是我写的excel代码。

```
try {
        FileInputStream file = new FileInputStream(excelFile);
        POIFSFileSystem myFileSystem = new POIFSFileSystem(file);
        HSSFWorkbook workbook = new HSSFWorkbook(myFileSystem);
        HSSFSheet worksheet = workbook.getSheetAt(0);
        this.cellStyle00 = workbook.createCellStyle();
        HSSFDataFormat df = workbook.createDataFormat();
        this.cellStyle00.setDataFormat(df.getFormat("00"));

for(int i = 0;i<Access.size();i++){
         AccessorMethods SetGet = (AccessorMethods)
                    InstlibAccessor.get(i);

    HSSFRow row = worksheet.createRow(worksheet.getPhysicalNumberOfRows());
    HSSFCell cell = row.createCell(0);

    cell.setCellValue(new Double(SetGet.getOne()));
    cell.setCellStyle(cellStyle00);

  //other set value codes....

}
FileOutputStream fileOut = new FileOutputStream(fileName + ".xls");
workbook.write(fileOut);
 fileOut.flush();
 fileOut.close(); 

 //catch statements follow
 //end 
```

命令行输出和netbeans输出不表示任何错误，如内存不足等。程序没有结束..它只是，停止..就像jvm正在无限循环中工作......为了阐明更多信息关于这个主题，这是我的程序的简要流程。

1.  用户执行调度程序
2.  在调度程序执行程序所需的时间（调度程序和“程序”是两个不同的程序/jar文件。调度程序只是调用jar）
3.  该程序首先创建 excel 文件
4.  然后读取数据库1。数据库包含80K行
5.  对于每一行，如果满足某个条件，则读取数据库 2 和 3
6.  然后它一次将它存储在一个arraylist对象1000中（我试图避免任何内存问题，所以我批量存储它）
7.  然后我分批写，一次 1000 以 excel （这是它停止的部分）
8.  完成读写后，它会等到调度程序再次调用它......如果它到达这一步我是一个快乐的程序员=）

以下是我发现的一些观察结果；

1.  程序通常在程序的第 4 到第 6 次执行时停止（即在不间断运行调度程序程序 4 或 6 小时后）
2.  它停在 excel 中的随机写入点，例如第 34 千行或第 24 或第 15 行等...
3.  当我在没有调度程序的情况下执行程序时不会发生此错误。我可以整天手动执行它（我做到了，这不是很有趣），没有任何错误。
4.  输出 excel 文件显示 0bytes 作为大小
5.  例如，如果我安排它每小时运行一次，并且在这个小时内它停止了。它仍会在接下来的几个小时内运行，但会停止，并在与上一次运行相比不同的点停止。

是什么导致了这个问题。也许是内存泄漏或更简单的东西？

**附加信息**

我通过导入其他程序的类来实现 Quartz 调度程序并将其作为作业运行。这是触发器的代码

```
JobDetail job = newJob(ExtractorSchedulerJobUtilTester.class)
            .withIdentity("job1", "group1")
            .build();

    CronTrigger trigger = newTrigger()
            .withIdentity("trigger1", "group1")
            .withSchedule(cronSchedule("0 0/2 * 1/1 * ? *"))
            .build();

    Date ft = sched.scheduleJob(job, trigger);
        sched.start(); 
```

和工作

```
public class ExtractorSchedulerJobUtilTester implements Job {
    public void execute(JobExecutionContext context)
        throws JobExecutionException {
    theProgram program= new theProgram();

    program.main();

    JobKey jobKey = context.getJobDetail().getKey();
    }
} 
```

有没有可能；

1.  该应用程序正在耗尽我的内存并崩溃
2.  我只在我的 Quartz 作业中使用了一个“程序”实例，该实例在作业的第一次运行时被初始化，并且该作业的所有后续执行都是从该实例引用的，从而最大化内存。
3.  它与数据库（AS400）相关（我怀疑是因为它在编写 excel 时停止了）。
4.  电脑太累了，决定休息一下。

**更新 - 2012 年 12 月 28 日**

**新年快乐伙计们/姑娘们！**

抱歉，我花了一些时间才重新开始……（既然世界将在 21 日结束，为什么还要浪费时间在这上面。如果没有，那真是苦乐参半）

我用 netbeans 分析器分析了我的程序，并用内存分析器得到了以下数字

![内存转储](../Images/0411fbbaae4ace7dd72d362ad8d9499b.png)

我注意到在第一张图中，我的程序每次迭代消耗了大约 75MB 的堆大小（如粉红色阴影所示）。这是否意味着程序每次迭代消耗的内存增加了 75mb？在几次迭代之后，这将消耗大量内存，从而影响程序的执行。我目前正在尝试进行堆转储。一旦我设法让它运行，我就会发布它。

附加信息：我尝试使用仅运行 Quartz 的分析器（不触发任何东西）并且系统使用率相对较低，并且每次迭代的大小都不会增加。

我终于设法得到一个堆转储。我进行了 2 次转储，第一次是第一次迭代发生时，第二次是下一次迭代。我注意到我的两个类的实例之间存在很大差异，如下所示

![哈希转储](../Images/9a0e440395e68b37e0b110e1b208cce2.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:25:37.713

经过大量的诅咒、祈祷和搜索，我想我已经找到了一个可能的解决方案。我所做的是`System.gc();`在我的 Quartz 作业课程的末尾添加。因此，每次程序完成工作时都会调用垃圾收集。这只是一个可能的解决方案，而不是一个具体的答案，因为我仍然在消耗大量的堆内存（我相信在我的代码混乱的某个地方仍然存在一些内存泄漏）。但是，随着`System.gc();`我的消耗量大大减少。我只是不确定这是怎么发生的。从逻辑上讲，我认为 GC 只会影响内存分配而不影响程序的内存性能。见下图；上图是有 GC 的图，而下图是没有 GC 的图。

![在此处输入图像描述](../Images/5d475d672f2bea297afe62c51a1dd84d.png)

正如您所见，带有 GC 的内存消耗的堆内存比没有垃圾的内存少。我假设内存使用量与 GC 相同，但是一旦调用 GC，使用的堆空间就会下降。我将暂时使用此解决方案，直到出现更好的答案。

# .net - 从 Windows Mobile 6.5 连接到 Oracle 11g

> ID：13488894
> 
> 赞同：1
> 
> 时间：2012-11-21T08:12:34.767
> 
> 标签：.net, visual-studio, windows-mobile, oracle11g

我正在开发智能设备项目，然后我遇到了这些错误：

> 错误 1 ​​类型“System.Data.Common.DbConnection”在未引用的程序集中定义。您必须添加对程序集“System.Data，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。C:\Users\king.a\Documents\Visual Studio 2008\Projects\SmartDeviceProject4\SmartDeviceProject4\Form1.cs 46 13 SmartDeviceProject4
> 
> 错误 2 在未引用的程序集中定义了类型“System.Data.Common.DbCommand”。您必须添加对程序集“System.Data，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。C:\Users\king.a\Documents\Visual Studio 2008\Projects\SmartDeviceProject4\SmartDeviceProject4\Form1.cs 49 13 SmartDeviceProject4
> 
> 错误 3 类型“System.Data.Common.DbDataReader”在未引用的程序集中定义。您必须添加对程序集“System.Data，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。C:\Users\king.a\Documents\Visual Studio 2008\Projects\SmartDeviceProject4\SmartDeviceProject4\Form1.cs 52 13 SmartDeviceProject4

我一直在寻找 app.config 来添加对程序集的引用，但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:33:23.533

此过程应该可以帮助您添加参考

在 Visual Studio 中查找**解决方案资源管理器**窗口。

*   右键单击**引用**
*   选择**添加参考**
*   移至**.Net**选项卡
*   查找*Componente Name* System.Data，选择并按确定

# c++ - C++ STL-like Bidirectional Multimap

> ID：13488901
> 
> 赞同：1
> 
> 时间：2012-11-21T08:13:12.810
> 
> 标签：c++, stl

在开源项目中搜索（无提升），我在`bimap` [这里](http://www.codeproject.com/Articles/3016/An-STL-like-bidirectional-map)找到了一个类似 STL 的容器，其中实现了双向映射。并且`multimap`在标准 C++ 库中有。

*   但我想知道，是否有任何努力实现“类似 STL 的双向多图”？
*   或者，我们如何组合现有的容器来构建数据结构？

*注意：一个简单的解决方案是`multimap`双向使用两个 s。但它的性能并不好。因为，对于每个`insert`//操作我们应该执行两次。此外，它分配了更多的内存。`remove``find`*

*注二：这`boost.bimap`是HostileFork和KerrekSB的一个很好的建议，如果没有办法我会使用它。但在此之前我需要找到一个非增强型和小型类库。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:21:05.210

[Boost.bimap](http://www.boost.org/doc/libs/1_52_0/libs/bimap/doc/html/boost_bimap/the_tutorial/controlling_collection_types.html)允许您自定义两个值的集合类型；两者都可以是非唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:21:11.630

为什么在 boost 中有 bimap 时使用随机的“CodeProject”代码？

[http://www.boost.org/doc/libs/1_42_0/libs/bimap/doc/html/index.html](http://www.boost.org/doc/libs/1_42_0/libs/bimap/doc/html/index.html)

Boost 代码试图接近标准库的可接受的方法，并且有一个审查过程，通过这个过程最终会被接受。也许在下一个标准中，谁知道呢？

# c++ - Vera++ 规则实现

> ID：13488903
> 
> 赞同：1
> 
> 时间：2012-11-21T08:13:18.457
> 
> 标签：c++, static-analysis, clang-static-analyzer, vera++

如果有人了解 Vera++ 或静态分析器，请通过。

如何将复杂的 C++ 规则验证机实现为静态分析器？我想实现复杂的规则，如基类中的虚函数，识别用户定义的变量，如类、结构等。变量范围如全局、本地、静态等。我非常了解 Vera++，根据我的理解，它只做令牌解析，语言的上下文需要通过脚本实现（如果语言像C++，实现的上下文可能太复杂）；因为区分 a *b; （可能是类类型 a 的指针 b）或 a *b；（可能只是两个变量之间的乘法）；

我什至觉得复杂规则的实现可能需要一些像状态机这样的编译器，这样脚本才能理解语言的上下文。

我的问题只是问：

1.  我对静态分析器规则实施的理解是否正确。

2.  你能否请指导我如何才能完成这项任务。

3.  这些任务可以通过 tcl 的 REGEXP 来简化吗？

4.  您是否可以建议任何特定的设计方法来实现 Solid C++ 代码分析器的良好实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:07:27.680

我建议改用成熟的 c++ 解析器。

[Clang](http://clang.llvm.org/)是一套完全理解 C++ 的库，因为可用于分析的库正是编译器使用的库（谈论狗食）。您可以访问几个“层”：抽象语法树、控制流图。并且已经有一个静态分析器框架，您可以为其实施通行证。

最后，也许是最有趣的事情，您可以从 C++ 或 C 进行交互，甚至在 C 接口之上还有 Python 绑定（尽管很不完整）。

老实说，鉴于 C++ 语法的复杂性令人敬畏，如今，受虐狂会使用任何没有真正语义解析器的东西。

其他解析器（由[Ira Baxter](https://stackoverflow.com/users/120163/ira-baxter)提供）包括：

*   [艾尔莎](http://scottmcpeak.com/elkhound/sources/elsa/)（开源）
*   [DMS](http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html)（商业）
*   [EDG](http://www.edg.com/index.php?location=c_frontend)（用于实现编译器的商业、C++ 前端）

# api - Foursquare 场地/探索返回空数据集

> ID：13488905
> 
> 赞同：0
> 
> 时间：2012-11-21T08:13:21.770
> 
> 标签：api, foursquare

Foursquare 的场所/探索端点整天都在为我返回一个空数据集。它之前一直在工作。有任何想法吗？我还没有看到其他用户关于任何类似问题的任何报告。两者都是纽约/旧金山的流行坐标。

要求：

```
https://api.foursquare.com/v2/venues/explore?ll=40.7,-74&oauth_token=XXXX&v=20121121

https://api.foursquare.com/v2/venues/explore?ll=37%2E785834,-122%2E406417&oauth_token=XXXX&v=20121121 
```

当前返回片段：

```
There aren't a lot of results near you. Try something more general, reset your filters, or expand the search area.

There aren't a lot of check-ins here (yet!). All the more reason to go explore! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T22:07:28.963

此错误已修复，所有查询现在应该可以正常工作。

# printing - 如何从多个外部 SWF 中获取一个 MovieClip。AS2

> ID：13488906
> 
> 赞同：1
> 
> 时间：2012-11-21T08:13:21.250
> 
> 标签：printing, flash, actionscript-2, movieclip, bitmapdata

那是我的问题。我有很多带有 AS2 的 swf 文件，我知道它们都有名为“viewport”的 MovieClip。所以，我需要打印这些影片剪辑中的所有帧。

我尝试使用 printjob 类来执行此操作，但函数 my_pj.addPage(...) 总是返回 false，我不知道为什么。

所以我决定使用简单的 print(mc,"bframes") 函数。这就是为什么我只需要一个包含所有视口 MovieClip 的所有帧的 MovieClip。

请告诉如何从许多 swf 的 MovieClip 中获取一个 MovieClip，它是由 MovieClipLoader.loadClip 加载的。

如果可以使用 BitmapData 类，请注意如何将 MC 的所有帧复制到新帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T19:27:12.633

使用以下过程：

*   [影片剪辑加载器](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/00000410.html)将许多 swf 放入一个父 swf
*   [下一帧](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/00000582.html)在帧之间分页
*   [打印位图](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/00000595.html)打印每一帧
*   [swapDepths](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/00001358.html)切换影片剪辑

# redis - 如何将任何redis命令的结果存储在kay中以及如何将表数据存储在redis结构中？

> ID：13488907
> 
> 赞同：3
> 
> 时间：2012-11-21T08:13:23.817
> 
> 标签：redis

大家好，我是 redis 新手，我想在我们的应用程序中使用 redis 进行频繁的数据库插入/更新和删除。

我在 postgres 中有一张这样的表。

```
 testtbl                                                   

 unixtime   |   code    | flag1 |count1     |   count2  |   flag2
_________________________________________________________________
1353475056  |   1234    |  A    |60         |   8955    |     N   
1353475060  |   5248    |  B    |131        |   22500   |     F   
1353475056  |   7267    |  C    |36         |   10130   |     X   
1353475056  |   1908    |  B    |0          |       0   |     N   
1353475060  |   9290    |  E    |90         |   11905   |     X   
1353475056  |   6123    |  F    |1          |   702     |     F   
1353475060  |   4145    |  G    |117        |   47920   |     X   
1353475099  |   7000    |  L    |43         |   21720   |     F   
1353475099  |   3256    |  D    |40         |   3915    |     N 
```

我尝试使用 redis 哈希存储这些记录，如下所示

```
hmset testtbl:1 unixtime 1353475056 code 1234 flag1 A count1  60 count2  8955 flag2 N
hmset testtbl:2 unixtime 1353475060 code 5248 flag1 B count1 131 count2 22500 flag2 F
hmset testtbl:3 unixtime 1353475056 code 7267 flag1 C count1  36 count2 10130 flag2 X
hmset testtbl:4 unixtime 1353475056 code 1908 flag1 B count1   0 count2     0 flag2 N
hmset testtbl:5 unixtime 1353475060 code 9290 flag1 E count1  90 count2 11905 flag2 X
hmset testtbl:6 unixtime 1353475056 code 6123 flag1 F count1   1 count2   702 flag2 F
hmset testtbl:7 unixtime 1353475060 code 4145 flag1 G count1 117 count2 47920 flag2 X
hmset testtbl:8 unixtime 1353475099 code 7000 flag1 L count1  43 count2 21720 flag2 F
hmset testtbl:9 unixtime 1353475099 code 3256 flag1 D count1  40 count2  3915 flag2 N 
```

要首先获取任何记录，我需要找到该记录的密钥，然后使用该密钥特定记录需要像这样获取

```
redis 127.0.0.1:6379> hgetall testtbl:3
 1) "unixtime"
 2) "1353475056"
 3) "code"
 4) "7267"
 5) "flag1"
 6) "C"
 7) "count1"
 8) "36"
 9) "count2"
10) "10130"
11) "flag2"
12) "X" 
```

现在的问题是
1）如何将任何键的值分配给另一个键或将任何命令的结果存储在 kay 中？
例如。如果我想在 redis 中将“TIME”命令的结果存储到 key testtbl: unixtime 在这种情况下
2) 有没有其他有效的方法来存储这些数据？
3) 如何获取 unixtime = 1353475056 或 flag2 = "N" 的所有记录
4) redis 中是否有批量获取实用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:02:48.087

1）您只能在客户端实现它。

2, 3) 这取决于场景。对于第三个问题，您可以使用排序集来存储 unixtime：

```
ZADD testtbl.unixtime 1353475056 testtbl:1 1353475060 testtbl:2 1353475056 testtbl:3 ... 
```

获取所有 unixtime = 1353475056 的记录：

```
ZRANGEBYSCORE testtbl.unixtime 1353475056 1353475056
1) "testtbl:1"
2) "testtbl:3" 
```

使用一个集合来存储 flag2：

```
SADD testtbl.flag2:N testtbl:1 testtbl:4 testtbl:9 
```

获取 flag2 = "N" 的所有记录

```
SMEMBERS testtbl.flag2:N
1) "testtbl:1"
2) "testtbl:4"
3) "testtbl:9" 
```

# wpf - WPF 绑定到已安装的打印机列表

> ID：13488910
> 
> 赞同：16
> 
> 时间：2012-11-21T08:13:33.667
> 
> 标签：wpf, list, xaml, printing, bind

如何在 WPF XAML 中绑定到 System.Drawing.Printing.PrinterSettings.InstalledPrinters 列表，这是一个静态 StringCollection。例如，要在 ComboBox 中使用它，以便用户可以选择要使用的打印机。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-21T08:13:33.667

将 System.Drawing.Print 的命名空间添加到您的 XAML 代码中：

```
xmlns:Printing="clr-namespace:System.Drawing.Printing;assembly=System.Drawing" 
```

然后添加组合框以显示系统上安装的打印机列表：

```
<ComboBox Name="cmbPrinterSelection" Width="300" ItemsSource="{x:Static Printing:PrinterSettings.InstalledPrinters}" SelectionChanged="cmbPrinterSelection_SelectionChanged" /> 
```

希望这可以节省一些时间。

# android - Android 浏览器中的 HTML5 音频/视频加载问题

> ID：13488921
> 
> 赞同：1
> 
> 时间：2012-11-21T08:14:07.567
> 
> 标签：android, html, caching, audio, html5-video

我正在用**HTML** 5 做一个项目，目标是**android tablet**。有一些使用音频时间更新委托触发的 jquery**动画**。

它工作正常，但在浏览页面时显示一些加载问题。它有时不会加载。**我在$(document).ready();**中添加了一个加载器；方法，并将在**canplaythrough**委托中删除。

有时加载程序不会消失，因为没有调用**canplaythrough 。**

经常找不到问题。**为什么每次都没有正确加载音频？**这是因为**浏览器缓存**吗？

我正在 Android 默认和 chrome 浏览器中对其进行测试。

谁能告诉我为什么会这样。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:17:16.677

我发现在“错误加载”情况下调用了“**中止**”方法，而不是“**错误**”方法。然后我检查了“ **readyState** ”值。它显示“0”（**HAVE_NOTHING**）值。在这种情况下，我尝试**刷新页面。**它似乎**有效，但这**是一个**不好的做法**，因为用户可以看到浏览器正在尝试多次**刷新页面。**是否可以**重新加载音频对象**。

# vb6 - Winsock 的 Listen() 函数

> ID：13488925
> 
> 赞同：2
> 
> 时间：2012-11-21T08:14:13.687
> 
> 标签：vb6, winsock

我正在使用**VB6**，我想创建一个可以在 LAN 上运行的聊天应用程序。我使用了**WinSock**控件，但是当我运行该`Listen()`函数时，我的套接字只侦听 127.0.0.1 而不是我计算机在 LAN 上的 IP。

为什么？有什么办法可以在局域网上监听我的 IP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:53:21.953

通常，您会调用该`Bind`方法来设置本地端口，并可选择指定要使用的适配器的本地 IP 地址。它应该默认为您系统的主适配器。然后你`Listen`在没有参数的情况下调用。

您可以跳过然后`Bind`设置，但除非在简单的单连接服务器场景中，否则不建议这样做。`LocalPort``Listen`

但是，这些都不能解释为什么默认选择您的环回地址。听起来像是盒子上的某种网络配置问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:09:48.297

您需要设置 localport 属性（并且客户端需要连接到该端口）

```
'1 form with :
'  1 textbox : name=Text1
'  1 winsock control : name=Winsock1

Option Explicit

Private Sub Form_Load()
  Text1.Move 0, 0, ScaleWidth, ScaleHeight 'position the textbox
  With Winsock1
    .LocalPort = 5001                      'set the port to listen on
    .Listen                                'start listening
  End With 'Winsock1
End Sub

Private Sub Winsock1_ConnectionRequest(ByVal requestID As Long)
  With Winsock1
    If .State <> sckClosed Then .Close     'close the port when not closed (you could also use another winsock control to accept the connection)
    .Accept requestID                      'accept the connection request
  End With 'Winsock1
End Sub

Private Sub Winsock1_DataArrival(ByVal bytesTotal As Long)
  Dim strData As String
  Winsock1.GetData strData                 'get the data
  ProcessData strData                      'process the data
End Sub

Private Sub Winsock1_Error(ByVal Number As Integer, Description As String, ByVal Scode As Long, ByVal Source As String, ByVal HelpFile As String, ByVal HelpContext As Long, CancelDisplay As Boolean)
  MsgBox Description, vbCritical, "Error " & CStr(Number)
End Sub

Private Sub ProcessData(strData As String)
  Text1.SelText = strData                  'show the data
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:21:43.977

相信你可以`RemoteHost`在监听的时候设置控件上的属性来确定服务器会监听哪个网络地址。要侦听所有网络接口，您可以使用：

```
WinSock1.RemoteHost = "0.0.0.0"
WinSock1.Lsten() 
```

# android - 如何在android程序中关闭/完成通话结束屏幕

> ID：13488929
> 
> 赞同：0
> 
> 时间：2012-11-21T08:14:46.510
> 
> 标签：android, android-intent

我建立了一个应用程序来自动重拨电话号码。用户挂断电话后，我需要提示显示我的活动，以便用户处理某些情况。我遇到的问题是，当我在三星 S3 中拨一个电话号码，然后挂断电话。通话结束画面会停留 3-5 秒（比其他手机长），然后自动回到我的 APP 活动。3-5 秒对我来说太长了，那么有什么方法可以强制关闭/完成通话结束屏幕吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:37:12.673

没有。如果这些应用程序不支持此类解决方法，则您无法从您的应用程序中更改其他应用程序的行为。你将不得不忍受这一点。

此外，即使您能够为 1 个模型修复它，您也无法为所有其他模型修复它。所以，我建议，尝试考虑另一种解决方案。

# android - android.widget.Gallery 中的 ImageView 可以用包含下面图片标题的 View 框起来吗？

> ID：13488931
> 
> 赞同：0
> 
> 时间：2012-11-21T08:15:17.007
> 
> 标签：android, android-layout

我对使用 Horizo​​ntal Gallery 小部件感兴趣。我知道如何在 ImageView 周围放置一个选定的框架，但我可以将 ImageView 放在一个更大的视图中，并在上面和下面说一个 TextView 吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:19:40.673

使用自定义适配器并扩展包含 imageView 和 textview 的自定义视图参考：[http ://www.javacodegeeks.com/2011/09/android-gallery-view-without-pictures.html](http://www.javacodegeeks.com/2011/09/android-gallery-view-without-pictures.html)

# javascript - 如果 Internet Explorer 自动关闭弹出窗口阻止程序

> ID：13488932
> 
> 赞同：-3
> 
> 时间：2012-11-21T08:15:18.833
> 
> 标签：javascript, internet-explorer, vbscript

有什么方法可以自动关闭 Internet Explorer 的弹出窗口阻止程序使用 javascript 或 vbscript？我不想使用 activeX 对象，因为它对我的应用程序构成安全威胁，因此我不能使用 GetObject。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:20:38.603

正如 mplungjan 指出的那样，显然你不能这样做。

相反，*使用*弹出窗口阻止程序。仅尝试打开新窗口以*直接*响应用户操作，例如单击。弹出窗口拦截器足够聪明，可以让你做到这一点。

更好的是，根本不要使用弹出窗口。在现代 Web 编程中很少需要它们。相反，将元素定位在 z 顺序中的其他元素之上。可以直接响应用户事件来处理适合实际单独窗口的少数用例。

# bash - shell 脚本源行为

> ID：13488937
> 
> 赞同：0
> 
> 时间：2012-11-21T08:15:58.727
> 
> 标签：bash, shell, unix

我是 shell 脚本的新手。我有一个 shell 脚本，它获取另一个文件。另一个文件只是一个具有名称值对的文件。我在这里有一个困惑。

```
test.dat
TEST_VARIABLE_PATH=/usr/project/workspace 
```

脚本文件 (test_script.sh)

```
TEST_VARIABLE_PATH=
source test.dat
echo ${TEST_VARIABLE_PATH} 
```

上面的 echo 语句打印出不同的值，这让我很困惑。在第 1 行，如果我让

```
TEST_VARIABLE_PATH=/somepath/ 
```

，即使我已经找到了已经设置了 TEST_VARIABLE_PATH 变量的 test.dat，echo 只打印

```
TEST_VARIABLE_PATH=/somepath/ 
```

获取文件的位置没有覆盖变量。

假设如果我将第 1 行设为

```
TEST_VARIABLE_PATH=\`dirname $0\`/../ 
```

，源命令覆盖和回显打印

```
TEST_VARIABLE_PATH=/usr/project/workspace 
```

为什么这个来源的行为不同？请帮我理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:18:48.260

看来您实际上不是`source`该文件。

要正确执行此操作，请输入文件的*完整路径*，例如：

```
source '/full/path/to/file' 
```

# excel - 从excel表开始向所有行添加一些东西

> ID：13488944
> 
> 赞同：1
> 
> 时间：2012-11-21T08:16:19.320
> 
> 标签：excel

我有一个包含 >2000 条记录的 Excel 表，其中包含两列。我想添加

```
{"<first_col_data>", 
```

和

```
"<sec_col_data>"}, 
```

到所有行，并保存到文本文件中。我的意思是添加大括号、双引号和逗号。例如 data.xls =>

```
 A    |   B 
----------------------------------
title_add  | ADDING SOMETHING
title_list | LISTING SOMETHING 
```

输出文本文件 data.txt =>

```
{"title_add","ADDING SOMETHING"},
{"title_list","LISTING SOMETHING"}, 
```

我怎么做？我不知道宏或函数。

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:50:38.647

在第二张表上只需使用此公式，然后保存表：

```
 Sheet2!A1=CONCATENATE("{""",Sheet1!A1,""",""",Sheet1!B1,"""}") 
```

这应该导致：

```
 {"title_add","ADDING SOMETHING"} 
```

这是我的原始公式，它创建了上面的结果：

```
 =VERKETTEN("{""";A1;""",""";B1;"""}") 
```

我的另一个解决方案（作为一次性快速）将在将*xls*保存为*csv*或*txt*后使用 Notepad++ 查找/替换/插入。或者 AWK，如果这是一个常规的事情。

您当然可以使用宏来做到这一点，也许其他人很乐意为您提供一个，但由于您对宏一无所知，我什至不推荐它，直到您有一些想法;）

# symbols - 摩托罗拉 MC9596 信息亭模式

> ID：13488948
> 
> 赞同：1
> 
> 时间：2012-11-21T08:16:42.490
> 
> 标签：symbols, windows-mobile-6.5, motorola, kiosk-mode

我正在为**MC9596 移动设备**（操作系统：Windows Mobile 6.5）开发我的第一个应用程序。**目标是在“信息亭模式**”下创建应用程序，这意味着用户只能在移动设备上使用此应用程序，仅此而已。不允许运行其他应用程序或更改 Windows 设置。我能够隐藏 Windows 按钮和上部状态栏（如果有人感兴趣，我会发布它），当然在顶部运行应用程序最大化也不是问题。让我彻夜难眠的是扫描仪上的**硬件按钮**。显示屏下方的侧面有一个绿色和红色按钮。无论我做什么，在按下绿色后，一部手机会与 Windows 按钮一起显示。按下 Windows 按钮后，您就可以访问任何地方。

我在谷歌搜索时尝试了以下解决方案：Changing registry under **HKEY_LOCAL_MACHINE\Software\Symbol\ProgrammableKeys** or **HKEY_LOCAL_MACHINE\Software\Microsoft\Shell\Keys**

并尝试**在 coredll.dll 中使用 UnregisterFunc1。**

不幸的是，两者都没有帮助。

我对更改注册表设置或使用外部 dll-s 没有任何问题，只需要找到解决方案。我已经逾期完成这项任务，只花了 3 天时间试图找到解决这个问题的方法。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:04:55.117

好吧，我的同事不小心帮我解决了这个问题，所以最后的解决方案是：

```
[DllImport("coredll.dll", SetLastError = true)] static extern bool
AllKeys(bool bAllKeys); 
```

不仅仅是打电话：

```
AllKeys(true); 
```

根据 blogs.windows.com：

> 此功能允许您的程序请求将所有按键直接发送到请求的应用程序。通常操作系统会截取某些按钮供其使用，但游戏和输入密集型应用程序可能希望访问这些按钮供自己使用。

# javascript - 如何使用jquery从两个复选框列表中获取选中复选框的数量？

> ID：13488952
> 
> 赞同：1
> 
> 时间：2012-11-21T08:16:55.190
> 
> 标签：javascript, jquery, asp.net, checkbox

我有两个复选框列表，我想获取其中选中元素的数量。下面是我的代码：

```
<div id="divAreaListingByLocation">
  <asp:CheckBoxList ID="chklstArea" CssClass="chkarea" RepeatColumns="6" RepeatDirection="Vertical"
        runat="server" OnSelectedIndexChanged="chklstArea_SelectedIndexChanged" AutoPostBack="true">
  </asp:CheckBoxList>
</div>
<asp:Repeater ID="repRooms" runat="server" OnItemDataBound="repRooms_ItemDataBound">
    <ItemTemplate>
        <div style="height: 100%; float: none;">
            <asp:Panel ID="pnlRoomheader" runat="server" Style="width: 98%; background-color: #86ADD6;
                color: #4A4A4A; height: 20px; margin-top: 10px; text-align: left; padding: 5px;
                font-size: 15px; font-weight: bold;">
                <asp:Label ID="lblAreaName" runat="server"></asp:Label>
                <asp:Label ID="lblAreaId" Style="display: none;" runat="server"></asp:Label>
            </asp:Panel>
            <div id="divRoomListingByLocation" style="padding-bottom: 10px; padding-top: 10px;">
                <asp:CheckBoxList ID="chkRoomList" CssClass="chkRooms" RepeatColumns="6" RepeatDirection="Vertical"
                    runat="server">
                </asp:CheckBoxList>
                <asp:Label ID="lblRoomMessage" Text="This Area does not have any room." ForeColor="Red"
                    runat="server"></asp:Label>
            </div>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

我想要做的是：如果用户没有选中这两个复选框中的任何一个，那么它会提示一个警报，说在单击一个按钮时从两个列表中选中一个复选框。

我已经尝试过使用类，但该类被附加到复选框列表的 html 中的表渲染中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:20:04.340

[使用 jQuery](http://api.jquery.com/checked-selector/)：

```
var n = $("input:checked").length; 
```

假设asp页面返回一堆`<input>`元素。

[有关示例，请参见此小提琴。](http://jsfiddle.net/9na5Q/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T09:15:14.790

由于您使用的是复选框列表，因此它将指定的类应用于表而不是复选框。在那里你将不得不使用

```
$(".chkarea").find("input:checked").length; 
```

这将返回为“chkarea”类的复选框列表选中的所有复选框的计数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:29:47.323

您可以将通配符用于复选框列表 id，因为复选框列表生成的 id 将以此 id 开头。

```
count = $("[id^=chklstArea] , [id^=chkRoomList]").filter(function(){
            if($(this).is(':checked')) 
                  return $(this);
         }).length; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T08:33:07.840

```
 <script type="text/javascript">
function fnc()
{
    x=document.getElementById("chkdiv").elements;

    for(i=0;i<x.length;++i)
    {if(x[i].type=='checkbox' && x[i].checked)
    alert("checked");

    }
}
</script>
    <form id="chkdiv">
<input type="checkbox" id="chk1">
<input type="checkbox" id="chk2">
<button id="button" onClick="fnc()">click</button>
</form> 
```

# css - Grails：如何使用资源插件将 CSS“链接”标签添加到头部？

> ID：13488953
> 
> 赞同：1
> 
> 时间：2012-11-21T08:17:05.793
> 
> 标签：css, grails, layout, plugins, resources

我有一个使用大量包含文件的页面。它动态选择要使用的正确包含文件。我希望（在包含文件中）能够向 grails 指定我希望它在运行中将特定`<link rel="stylesheet"/>`标签包含到头部中。

像这样的*输出*..

```
<html>
  <head>
    <title>My Life :: My Pets</title>
    <link rel="stylesheet" href="style.css" type="text/css"> <!-- Normal Site Style -->
    <link rel="stylesheet" href="include-my-pets" type="text/css"> <!-- Dynamic Style for Include -->
  </head>
  <body>
    <h1>My Pets</h1>
    <!-- This is the include file start -->
       In the GSP here I said something like:
       <r:require disposition="head">
         <link rel="stylesheet" href="include-my-pets" type="text/css"> <!-- Dynamic Style -->
       </r:require>
       to get the CSS link tag pushed into the head.
    <!-- This is the include file end -->
  </body>
</html> 
```

这对我使用`<r:script/>`标签非常有效。我可以在任何包含文件中指定任何位置：

```
<r:script disposition="head">
  alert ('hello')
</r:script> 
```

我的布局会自动将警报 hello 卡在`<script/>`页面头部的标签内。它也从身体中移除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:24:03.547

资源插件不支持此功能。如果您查看 ResourcesPlugin 中的 r.script 实现：

```
def script = { attrs, body ->
    def dispos = attrs.remove('disposition') ?: 'defer'
    storePageFragment('script', dispos, body())
} 
```

为“r.stylesheet”标签做类似的事情似乎很容易，但 storePageFragment 和其他辅助方法是私有的，所以如果不复制很多东西，你就不能从外面做。

我建议你[分叉资源插件](https://github.com/grails-plugins/grails-resources)，沿着脚本标签的行实现样式表标签并发送拉取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:39:10.180

资源插件的优点是，您可以创建资源的逻辑组（css 和 js）并在需要的地方使用它们。Alo 不要忘记`<r:layoutResources />`在`head`sectioc 结束时和`body`部分结束时调用。否则，资源将无法正确生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:03:37.190

这不是“grails”做事的方式，但这就是我实现它的方式。我这样做的部分原因是因为我觉得在 ApplicationResources.groovy 中定义资源对于不熟悉资源插件的非 grails 开发人员来说可能并不明显。我更喜欢在包含文件中有明确的资源链接的想法，这是显而易见的。

我现在的做法就是这样。

*Kitty 和 Doggy 需要自定义 CSS 和 JavaScript（它们都是 pets 的一部分），但其他链接（例如 MyLife）不需要它们。*

**在 URLMappings.groovy**

```
"/mypets/kitty" {
    controller="pets",
    subpage="kitty.gsp"
    action="index"
    css="kitty.css",
    js="kitty.js",
}
"/mypets/doggy" {
    controller="pets",
    subpage="doggy.gsp"
    action="index"
    css="doggy.css",
    js="doggy.js",
}
"/mylife" {
    controller="life",
    action="index"
} 
```

**布局.gsp**

```
...contains all the usual site-wide resources... 
```

**在 pets.gsp 中**

```
<html>
  <head>
    <title>${title}</title>
    <link rel="stylesheet" type="text/css" href="${resource(dir: 'resources/modules/css', file: css)}"/>
    <script src="${resource(dir: 'resources/modules/js', file: js)}"></script>
  </head>
  <body>
    Select your pet: <select.../>
    <!-- It's kitty.gsp and doggy.gsp (below) that need access to their own kitty and doggy js and css files -->
    <g:include view="$page"/>
  </body>
</html> 
```

# c++ - 从一种颜色插入到另一种颜色

> ID：13488957
> 
> 赞同：21
> 
> 时间：2012-11-21T08:17:33.133
> 
> 标签：c++, openframeworks

我正在尝试将一种颜色插值到相同颜色的另一种阴影。（例如：天蓝色到深蓝色，然后返回）。

如果范围是 0-255 或 0-1，我偶然发现了[一些](https://stackoverflow.com/questions/5860100/how-to-interpolate-a-color-sequence)可以使用的代码。但是，就我而言，我有 Color1 和 Color2 的 RGB 代码，并希望发生旋转。

颜色 1：151,206,255
颜色 2：114,127,157

任何想法如何去做？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-01-09T02:05:38.057

我知道这有点旧，但如果有人正在寻找它，这是值得的。

首先，您可以在任何颜色空间中进行插值，包括 RGB，在我看来，这是最简单的一种。

假设变化将由 0 和 1 之间的小数值（例如 0.3）控制，其中 0 表示全彩 1，1 表示全彩 2。

理论：

```
Result = (color2 - color1) * fraction + color1 
```

申请：

由于 RGB 有 3 个通道（红色、绿色和蓝色），我们必须对每个通道执行此数学运算。

使用您的示例颜色：

```
fraction: 0.3
color1: 151,206,255
color2: 114,127,157

R =  (114-151) * fraction + 151
G =  (127-206) * fraction + 206
B =  (157-255) * fraction + 255 
```

C/C++ 中的代码示例：

```
/**
 * interpolate 2 RGB colors
 * @param color1    integer containing color as 0x00RRGGBB
 * @param color2    integer containing color as 0x00RRGGBB
 * @param fraction  how much interpolation (0..1)
 * - 0: full color 1
 * - 1: full color 2
 * @return the new color after interpolation
 */
int interpolate(int color1, int color2, float fraction)
{
        unsigned char   r1 = (color1 >> 16) & 0xff;
        unsigned char   r2 = (color2 >> 16) & 0xff;
        unsigned char   g1 = (color1 >> 8) & 0xff;
        unsigned char   g2 = (color2 >> 8) & 0xff;
        unsigned char   b1 = color1 & 0xff;
        unsigned char   b2 = color2 & 0xff;

        return (int) ((r2 - r1) * fraction + r1) << 16 |
                (int) ((g2 - g1) * fraction + g1) << 8 |
                (int) ((b2 - b1) * fraction + b1);
}

/* 
 * 0x0097ceff == RGB(151,206,255)
 * 0x00727f9d == RGB(114,127,157)
 */
int new_color = interpolate(0x0097ceff, 0x00727f9d, 0.3f); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-21T08:24:03.977

我建议您将 RGB 转换为 HSV，然后调整其组件，然后再转换回 RGB。

维基百科有[一篇](http://en.wikipedia.org/wiki/HSL_and_HSV)关于它的文章，之前在这里讨论过：

[HSL 到 RGB 颜色转换](https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion)

[在 0-255 范围内将 RGB 转换为 HSV 和 HSV 到 RGB 的算法](https://stackoverflow.com/questions/3018313/algorithm-to-convert-rgb-to-hsv-and-hsv-to-rgb)

许多框架也有转换功能，例如 Qt 有[QColor 类](http://qt-project.org/doc/qt-5.0/qtgui/qcolor.html)。

* * *

但问题是关于实际插值......这是一个微不足道的插值函数：

```
// 0 <= stepNumber <= lastStepNumber
int interpolate(int startValue, int endValue, int stepNumber, int lastStepNumber)
{
    return (endValue - startValue) * stepNumber / lastStepNumber + startValue;
} 
```

因此，在循环中为您要插值的所有颜色分量调用它。使用 RBG 插值，您需要对每个分量进行插值，在其他颜色空间中，您可能只需要插值一个。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-21T08:22:51.750

[将您的 RGB 颜色转换为 HSV，](https://stackoverflow.com/questions/3018313/algorithm-to-convert-rgb-to-hsv-and-hsv-to-rgb)然后插入每个组件（不仅是颜色，请参见答案末尾），然后您可以转换回 RGB。

您可以进行 RGB 插值，但使用 HSV 的结果更好，因为在这个空间中，颜色与亮度和饱和度是分开的（[关于 HSV 的维基百科文章](http://en.wikipedia.org/wiki/HSL_and_HSV)）。HSV 插值比 RGB 插值更“合乎逻辑”，因为使用后者你可以在插值时获得额外的颜色。

一些插值代码：

```
template<typename F>
ColorRGB interpolate(ColorRGB a, ColorRGB b, float t, F interpolator)
{
    // 0.0 <= t <= 1.0
    ColorHSV ca = convertRGB2HSV(a);
    ColorHSV cb = convertRGB2HSV(b);
    ColorHSV final;

    final.h = interpolator(ca.h, cb.h, t);
    final.s = interpolator(ca.s, cb.s, t);
    final.v = interpolator(ca.v, cb.v, t);

    return convertHSV2RGB(final);
}

int linear(int a, int b, float t)
{
    return a * (1 - t) + b * t;
}

// use: result = interpolate(color1,color2,ratio,&linear); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-06T11:40:34.900

用于视觉效果的最佳色彩空间是[HCL](https://en.wikipedia.org/wiki/HCL_color_space)。这是一个专门为在穿越其维度时看起来不错而创建的空间，其中“看起来不错”与光或墨水的任何物理属性无关，例如分别为 RGB 和 CMYK。

使用 HCL 是昂贵的，所以最好的办法是在这个空间中创建一些中间值，然后在原生的 RGB 中进行插值。这就是我在[动画引擎](https://github.com/mmick66/kinieta)中所做的。

这是它的一个片段，在 Swift 4.0 中

```
extension UIColor {
    typealias Components = (CGFloat, CGFloat, CGFloat, CGFloat)
    enum Space: String {
        case RGB = "RGB"
        case HSB = "HSB"
        case HCL = "HCL"
    }
    func components(in space: UIColor.Space) -> Components {
        switch space {
        case .RGB: return self.rgba // var defined in HandyUIKit's extension
        case .HSB: return self.hsba // var defined in HandyUIKit's extension
        case .HCL: return self.hlca // var defined in HandyUIKit's extension
        }
    }
    func spectrum(to tcol: UIColor, for space: UIColor.Space) -> [UIColor] {
        var spectrum = [UIColor]()
        spectrum.append(self)
        let fcomps  = self.components(in: space)
        let tcomps  = tcol.components(in: space)
        for i in 0 ... 5 {
            let factor  = CGFloat(i) / 5.0
            let comps   = (1.0 - factor) * fcomps + factor * tcomps
            let color   = UIColor(with: comps, in: space)
            spectrum.append(color)
        }
        spectrum.append(tcol)
        return spectrum
    }
    convenience init(with components: Components, in space: Space) {
        switch space {
        case .RGB: self.init(red: components.0, green: components.1, blue: components.2, alpha: components.3)
        case .HSB: self.init(hue: components.0, saturation: components.1, brightness: components.2, alpha: components.3)
        case .HCL: self.init(hue: components.0, luminance: components.1, chroma: components.2, alpha: components.3)
        }
    }
}
func *(lhs:CGFloat, rhs:UIColor.Components) -> UIColor.Components {
    return (lhs * rhs.0, lhs * rhs.1, lhs * rhs.2, lhs * rhs.3)
}
func +(lhs:UIColor.Components, rhs:UIColor.Components) -> UIColor.Components {
    return (lhs.0 + rhs.0, lhs.1 + rhs.1, lhs.2 + rhs.2, lhs.3 + rhs.3)
} 
```

引擎和上面的示例都使用[HandyUIKit](https://github.com/Flinesoft/HandyUIKit)进行空间之间的转换，因此请将此项目添加到您正在构建的任何内容中，以使上面的代码正常工作。

我写了[一篇](https://medium.com/@michael.m/true-color-interpolation-a1a17352ebf0)关于它的文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T23:29:47.547

我看到你已经在“openframeworks”标签下标记了这个问题。所以您需要做的就是使用该方法`ofColor::getLerped`或`ofColor::lerp`

`getLerped`返回新值，同时`lerp`修改颜色。

例如：

```
ofColor c1(151,206,255);
ofColor c2(114,127,157);

float p = 0.2f;
ofColor c3 = c1.getLerped(c2, p); 
```

或者

```
c1.lerp(c2, 0.3f); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-24T15:42:25.953

我已将[Synxis 的 C 示例](https://stackoverflow.com/a/13489029/1762224)（上图）改编成可执行的 JavaScript 程序。

该程序从*红色*和*绿色*中插入*黄色*。输入和输出在*RGB-space*中，但插值在*HSV-space*中处理。我还添加了一个 RGB 插值示例。如下所示，如果在*RGB-space中插入**红色*和*绿色，则会产生**深黄色*。

 ***```
/** Main */
var red        = { r : 255, g : 0,   b : 0 };
var green      = { r : 0,   g : 255, b : 0 };
var yellow     = interpolateHsv(red, green, 0.5, linear);
var darkYellow = interpolateRgb(red, green, 0.5, linear);

document.body.innerHTML =
  'Yellow: '      + JSON.stringify(yellow,     null, '  ') + '<br />' +
  'Dark Yellow: ' + JSON.stringify(darkYellow, null, '  ');

/**
 * Returns an HSV interpolated value between two rgb values. 
 *
 * @param {Object} rgbA - rgb() tuple
 * @param {Object} rgbB - rgb() tuple
 * @param {Number} threshold - float between [0.0, 1.0]
 * @param {function} interpolatorFn - interpolator function
 * @return {Object} rbg
 */
function interpolateHsv(rgbA, rgbB, threshold, interpolatorFn) {
  var hsvA = rgbToHsv(rgbA);
  var hsvB = rgbToHsv(rgbB);
  threshold = toArray(threshold, 3);
  return hsvToRgb({
    h : interpolatorFn(hsvA.h, hsvB.h, threshold[0]),
    s : interpolatorFn(hsvA.s, hsvB.s, threshold[1]),
    v : interpolatorFn(hsvA.v, hsvB.v, threshold[2])
  });
}

/**
 * Returns an RGB interpolated value between two rgb values. 
 *
 * @param {Object} rgbA - rgb() tuple
 * @param {Object} rgbB - rgb() tuple
 * @param {Number} threshold - float between [0.0, 1.0]
 * @param {function} interpolatorFn - interpolator function
 * @return {Object} rbg
 */
function interpolateRgb(rgbA, rgbB, threshold, interpolatorFn) {        
  threshold = toArray(threshold, 3);
  return {
    r : ~~interpolatorFn(rgbA.r, rgbB.r, threshold[0]),
    g : ~~interpolatorFn(rgbA.g, rgbB.g, threshold[1]),
    b : ~~interpolatorFn(rgbA.b, rgbB.b, threshold[2])
  };
}

/**
 * Returns an interpolated value between two values. 
 *
 * @param {Number} valueA - color channel int value
 * @param {Number} valueB - color channel int value
 * @param {Number} threshold - float between [0.0, 1.0]
 * @param {function} interpolatorFn - interpolator function
 * @return {int}
 */
function linear(valueA, valueB, threshold) {
  return valueA * (1 - threshold) + valueB * threshold;
}

/**
 * Converts an RGB color value to HSV. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSV_color_space.
 * Assumes r, g, and b are contained in the set [0, 255] and
 * returns h, s, and v in the set [0, 1].
 *
 * @param {Object} rgb - Color in rgb mode
 * @return {Object} - Color in hsv mode
 */
function rgbToHsv(rgb) {
  var r = rgb.r / 255,
      g = rgb.g / 255,
      b = rgb.b / 255;
  var max = Math.max(r, g, b), min = Math.min(r, g, b);
  var h, s, v = max;
  var d = max - min;
  s = max === 0 ? 0 : d / max;
  if (max == min) {
    h = 0; // achromatic
  } else {
    switch(max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break;
      case g: h = (b - r) / d + 2; break;
      case b: h = (r - g) / d + 4; break;
    }
    h /= 6;
  }
  return {
    h : h,
    s : s,
    v : v
  };
}

/**
 * Converts an HSV color value to RGB. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSV_color_space.
 * Assumes h, s, and v are contained in the set [0, 1] and
 * returns r, g, and b in the set [0, 255].
 *
 * @param {Object} hsv - Color in hsv mode
 * @return {Object} - Color in rgb mode
 */
function hsvToRgb(hsv){
  var r, g, b, i, f, p, q, t,
      h = hsv.h,
      s = hsv.s,
      v = hsv.v;
  i = Math.floor(h * 6);
  f = h * 6 - i;
  p = v * (1 - s);
  q = v * (1 - f * s);
  t = v * (1 - (1 - f) * s);
  switch(i % 6){
    case 0: r = v, g = t, b = p; break;
    case 1: r = q, g = v, b = p; break;
    case 2: r = p, g = v, b = t; break;
    case 3: r = p, g = q, b = v; break;
    case 4: r = t, g = p, b = v; break;
    case 5: r = v, g = p, b = q; break;
  }
  return {
    r : r * 255,
    g : g * 255,
    b : b * 255
  };
}

function isNumeric(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

function toArray(arr, size) {
  var isNum = isNumeric(arr);
  arr = !Array.isArray(arr) ? [arr] : arr;
  for (var i = 1; i < size; i++) {
    if (arr.length < size) {
      arr.push(isNum ? arr[0] : 0);
    }
  }
  return arr;
}
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-26T00:56:06.363

这是基于@hyde 回答的 Swift 2 版本：

```
import UIKit

func interpolate(start start: CGFloat, end: CGFloat, progress: CGFloat) -> CGFloat {
  return (end - start) * progress + start
}

extension UIColor {
  func interpolateTo(color end: UIColor, progress: CGFloat) -> UIColor {
    var r1: CGFloat = 0
    var g1: CGFloat = 0
    var b1: CGFloat = 0
    var a1: CGFloat = 0
    getRed(&r1, green: &g1, blue: &b1, alpha: &a1)

    var r2: CGFloat = 0
    var g2: CGFloat = 0
    var b2: CGFloat = 0
    var a2: CGFloat = 0
    end.getRed(&r2, green: &g2, blue: &b2, alpha: &a2)

    return UIColor(
      red: interpolate(start: r1, end: r2, progress: progress),
      green: interpolate(start: g1, end: g2, progress: progress),
      blue: interpolate(start: b1, end: b2, progress: progress),
      alpha: interpolate(start: a1, end: a2, progress: progress)
    )
  }
} 
```

你可以像这样使用它：

```
color1.interpolateTo(color: color2, progress: t) 
```

`t`插值的百分比（0-1）在哪里。***

# java - Android Facebook-Connect 按钮需要点击两次

> ID：13488958
> 
> 赞同：1
> 
> 时间：2012-11-21T08:17:34.380
> 
> 标签：java, android

几个小时以来，我一直在试图弄清楚为什么我的 facebook-connect 无法正常工作。我总是要单击它两次.. 第一次单击它时，我看到 facbeook 对话框正在打开，但它没有调用任何类型的回调，所以我的 Login-Activity 只是“恢复”。

```
public void onClick_fbIcon(View v) {
    if(!buttonsEnabled)
        return;

    buttonsEnabled = false;
    tryFacebookConnect();
}

@SuppressWarnings("deprecation")
private void tryFacebookConnect() {
    Log.d("debug", "start fbc");
    doingFacebooklogin = true;
    facebook.authorize(this, new DialogListener() {
        public void onComplete(Bundle values) {
            end();
            toast("Complete");
            Log.d("debug", "#0");   
            // .. continue with main code
        }

        public void onFacebookError(FacebookError error) {
            end();
            Log.d("debug", "#1");           
        }

        public void onError(DialogError e) {
            end();
            Log.d("debug", "#2");
        } 

        public void onCancel() {
            end();
            Log.d("debug", "#3");
        }

        private void end() {
            Log.d("debug", "fbc complete");
            doingFacebooklogin = false;
        }
    });
} 
```

第一次点击我只得到“start fbc”但之后什么都没有，所以我猜没有调用回调方法。

我发现当 facebook-connect 第一次不工作时，“onResume 被调用”。下一次 onActivityResult 被调用。

```
@SuppressWarnings("deprecation")
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d("debug", "Main: onActivityResult");
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

我的登录活动是由我的主要活动启动的一个意图，它指定是否需要登录：

```
 Intent intent = new Intent(this, Login.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    startActivity(intent); 
```

有时我会看到以下错误：

```
11-22 10:23:39.684: D/Facebook-publish(7317): Can NOT get FbInjector instance! Probably because this method was called in ContentProvider's onCreate. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:07:31.120

我不知道为什么，但问题显然是 facebook-sdk 的一部分。我发现如果我的设备上没有安装 facebook-app，则不会出现此问题。所以我像这样更改了我的代码：

```
facebook.authorize(a, new String[] { }, **Facebook.FORCE_DIALOG_AUTH**, new DialogListener() {
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:46:06.237

请看一下本教程。我只是遵循这个，我让一切都完美无缺。

希望它也能帮助你。

[http://www.youtube.com/watch?v=xndi6s9Tn_U](http://www.youtube.com/watch?v=xndi6s9Tn_U)

# sql - SQL Join 和关节中的整数条件以使它们相对

> ID：13488965
> 
> 赞同：1
> 
> 时间：2012-11-21T08:18:18.083
> 
> 标签：sql, join, where

我已经提交了我的问题，但没有例子，它不够清楚，所以这里是表格：

```
Users
id_user / key_user
1       / 123FDADA21312QD
2       / 994GFCS4595433D

Companies
id_company / key_company
1          / 3123123123
2          / 5435345454

Products
id_product / id_company_product / code_product
1          /     1              / iphone
2          /     1              / iBook
3          /     1              / macbook

Tyds
id_tyd  / user_tyd / product_tyd
1       /   1      /   1        -- mean that the id_user = 1 made a line for the iphone 
                                   sold by the company 1
2       /   1      /   2        -- same : user 1 for the ibook of company 1 
```

这是我的要求：

```
SELECT 
products.id_product,
users.id_user,
COALESCE(id_tyd, 'NONE') AS id_tyd 
FROM tyds
INNER JOIN users
ON tyds.user_tyd = users.id_user
INNER JOIN products
ON tyds.product_tyd = products.id_product
INNER JOIN companies
ON products.id_company_product = companies.id_company 
WHERE users.key_user = '123FDADA21312QD'
AND companies.module_key_company = '3123123123'
AND products.cancelled_product >= 0
AND products.code_product = 'iphone' 
```

那会回来的

```
products.id_product = 1
users.id_user = 1 
tyds.id_tyd = 1 
```

完美的。但我想做的是获取 users.id_user ，即使 tyds 中没有该用户的记录。喜欢 ：

```
SELECT 
products.id_product,
users.id_user,
COALESCE(id_tyd, 'NONE') AS id_tyd 
FROM tyds
INNER JOIN users
ON tyds.user_tyd = users.id_user
INNER JOIN products
ON tyds.product_tyd = products.id_product
INNER JOIN companies
ON products.id_company_product = companies.id_company 
WHERE users.key_user = '123FDADA21312QD'
AND companies.module_key_company = '3123123123'
AND products.cancelled_product >= 0
AND products.code_product = 'macbook' 
```

我想得到：

*   products.id_product = 3
*   users.id_user = 1
*   tyds.id_tyd = 无

因为在这一步，我确定我问的产品存在并且user_key存在。但我不确定 tyds 中是否有匹配的记录，这就是我想要测试的。

当然，所有的表格都是简化的，我需要更多的数据，但我认为这会说明我的观点。

我的第一步是将 WHERE 条件放在 JOIN 匹配中，但是，不知道为什么，如果我将 products.code_product 放在产品连接中，即使对于不同的 id_product，它也会给我 tyds 记录......

非常感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:21:42.687

如果是这种情况，请将联接从 更改`INNER JOIN`为`LEFT JOIN`。`INNER JOIN`, 基本上返回所有正在连接的表上存在的行（*至少一个匹配*），同时`LEFT JOIN`返回*左侧*的行，即使其他表上没有匹配的记录。

询问，

```
SELECT c.*, d.id_tyd
FROM
    (
      SELECT  a.id_user, b.id_product
      FROM    users a CROSS JOIN products b
    ) c
    LEFT JOIN tyds d
      ON d.user_tyd = c.id_user AND
         d.product_tyd = c.id_product
    LEFT JOIN products e
      ON e.id_product = c.id_product
    LEFT JOIN companies f
      ON e.id_company_product = f.id_company
    LEFT JOIN users g
      ON c.id_user = g.id_user
WHERE e.code_product = 'macbook' AND
      f.key_company = '3123123123' AND
      g.key_user = '123FDADA21312QD' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/57666/14)

# php - 在 if 语句中添加“或”

> ID：13488966
> 
> 赞同：0
> 
> 时间：2012-11-21T08:18:20.777
> 
> 标签：php, sql, session

我正在尝试创建一个系统，该系统取决于 a) 登录的用户或 b) 如果在数组中找到用户名。

如果您已登录并在此人的friend_array 中，您应该会看到“取消好友”按钮。如果您在属于您自己的个人资料的页面上，则所有内容都将被隐藏 如果您不在您的页面上且不在数组中，则“添加朋友”。

Unfriend 似乎正在工作，但它似乎只是在我的个人资料中默认“添加朋友”：

```
$cool = $_GET['id'];
$evan = mysql_query("SELECT * FROM users WHERE username='{$_SESSION['user_login']}'");
$joe1 = mysql_fetch_assoc($evan);

$cookie = mysql_query("SELECT * FROM users WHERE id='{$_GET['id']}'");
$joe = mysql_fetch_assoc($cookie);

$i = 0;
$berbs = $joe['username'];
error_reporting(E_ERROR | E_PARSE);

if (in_array($_SESSION['user_login'], $friendArray)) {
$addAsFriend = '<input type="submit" name="removefriend" value="UnFriend">';
echo $addAsFriend;

}
error_reporting(E_ERROR | E_PARSE);

if ($_GET['id'] == $joe1['id']) {
$addAsFriend = '<input style="display:none;" type="submit" name="addfriend" value="Add Frimm1end">';
echo $addAsFriend;

}
error_reporting(E_ERROR | E_PARSE);

if (!in_array($joe1['username'], $friendArray) || !$_GET['id'] == $joe1['id']) {
$addAsFriend = '<input type="submit" name="addfriend" value="Add Friend">';
echo $addAsFriend;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:23:50.017

`!$_GET['id']`很可能总是评估为 TRUE。以下行：

```
if (!in_array($joe1['username'], $friendArray) || !$_GET['id'] == $joe1['id']) 
```

可以读取

```
if (!in_array($joe1['username'], $friendArray) || TRUE == $joe1['id']) 
```

你可能想要

```
if (!in_array($joe1['username'], $friendArray) || $_GET['id'] != $joe1['id']) 
```

**说明** PHP 的动态类型转换将采用任何正整数或非空字符串，如果您尝试使用诸如`!$_GET['id']`. 您有另一个布尔表达式测试 if ，除非为空`TRUE == $joe1['id']`，否则它将始终为真。`$joe1['id']`

作为旁注，您可以通过使用 Identical 和 Not Identical 运算符（=== 和 !==）来防止发生这种类型转换。

```
if (false == 0) {
    echo "This will be true";
}

if (true == 1) {
    echo "This will also be true";
}

if (false === 0) {
    echo "This will never echo";
}

if (true === 1) {
    echo "This will also never echo";
} 
```

# objective-c - 将 NSMutableArray 设置为新的 NSMutableArray

> ID：13488969
> 
> 赞同：0
> 
> 时间：2012-11-21T08:18:29.990
> 
> 标签：objective-c

```
@implementation RightViewController{
    NSMutableArray * tableArray;
}

@synthesize tableView;

- (void)viewDidLoad {
    [super viewDidLoad];
    tableArray = [[NSMutableArray alloc] init];
}

- (void)refreshTable: (NSMutableArray*)resultsArray{
    [tableArray setArray:resultsArray];    
    NSLog(@"resultsArray : %d : %d", [tableArray count] , [resultsArray count]);

    [self.tableView reloadData];
} 
```

它告诉我：结果数组：0：78

为什么我不能为这个数组设置信息？我确实从另一个控制器调用 refreshTable，如下所示：

```
[[[RightViewController alloc] init] refreshTable:resultsArray]; 
```

**更新：**

```
tableArray = [NSMutableArray arrayWithArray:resultsArray]; 
```

为我工作。

在那之后我做

```
- (IBAction)reloadTableButton:(id)sender {
    [self refreshTable:tableArray];
} 
```

它向我展示了：resultsArray：0：0

为什么 tableArray 数组为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:22:32.420

尝试`tableArray`像这样设置变量：

```
tableArray = [NSMutableArray arrayWithArray:resultsArray]; 
```

您可能不会保留您的可变数组，我建议`@property`您为您的 tableArray 创建一个。把它放在你的前面`@synthesize`

```
@property (retain, nonatomic) NSMutableArray *tableArray; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:18:43.370

选项1：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    //don't do anything with the array here! 
    //refreshTable may well be called before the view is loaded
}

- (void)refreshTable: (NSMutableArray*)resultsArray{

    if (!self.tableArray) // if it does not exist, then create it on the fly. 
        self.tableArray = [[NSMutableArray alloc] init];
    [tableArray setArray:resultsArray];    
    [self.tableView reloadData];
} 
```

选项 2：

```
- (MyClass*) init {
  self = [super init];
  if (self) {
     self.tableArray = [[NSMutableArray alloc] init];
  }
}

- (void)viewDidLoad {
    [super viewDidLoad];
    //don't do anything with the array here! 
}

- (void)refreshTable: (NSMutableArray*)resultsArray{
    [tableArray setArray:resultsArray]; // you can be sure that init was invoked earlier.    
    [self.tableView reloadData];
} 
```

选项 3：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    //don't do anything with the array here! 
}

- (void)refreshTable: (NSMutableArray*)resultsArray{
    self.tableArray = [NSMutalbeArray arrayWithArray:resultsArray];   //This creates a new array as a copy of resultsArray and assigns it to tableArray. No need to initialize anything. 
    [self.tableView reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:56:19.120

```
@implementation RightViewController{
    NSMutableArray * tableArray;
}
@property (strong, nonatomic) NSMutableArray *tableArray; //use the keyword "retain" instead of "strong" in below iOS 5

@synthesize tableView;
@synthesize tableArray;

- (void)viewDidLoad {

    [super viewDidLoad];
    self.tableArray = [[NSMutableArray alloc] init];
}

- (void)refreshTable: (NSMutableArray*)resultsArray{

     self.tableArray = resultsArray;

    NSLog(@"resultsArray : %d : %d", [tableArray count] , [resultsArray count]);

    [self.tableView reloadData];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T08:30:28.280

我相信它应该工作

```
RightViewController *controller = [[RightViewController alloc] init];
[controller refreshTable:resultsArray]; 
```

# .net - 无法打开数据库 - 用户登录失败 - VB.NET 2012 MVC 4

> ID：13488974
> 
> 赞同：0
> 
> 时间：2012-11-21T08:18:55.860
> 
> 标签：.net, vb.net, asp.net-mvc-4

**编辑：** *SQL 连接已更新。*

**控制器：**

```
Imports System.Data.SqlClient   

Function SQLSelect() As ActionResult

    Dim theconnection As New SqlConnection("Data Source=MSSQLSERVER;server=(localdb)\Projects;Database=test_drive_database;User Id=xxxx_user-PC\xxxx_user;password=;Trusted_Connection=True;Integrated Security=True;")
    theconnection.Open()

    Dim queryString As String = "SELECT * FROM ColorTable"
    Dim command As New SqlCommand(queryString)
    command.BeginExecuteNonQuery()

    command.CommandTimeout = 15
    command.CommandType = CommandType.Text

    'Printing Out the SQL Result

    Return ViewData("command")

End Function 
```

**错误消息：**

```
Cannot open database "test_drive_database" requested by the login. The login failed.

Login failed for user 'xxxx_user-PC\xxxx_user'. 
```

如何找出登录失败的确切原因？

**注意：** *不使用密码。*

**附录：**

```
 Dim theconnection As New SqlConnection("Data Source=MSSQLSERVER;server=(localdb)\Projects;Database=ColorTable_database.sdf;Integrated Security=sspi;")
    theconnection.Open() 
```

这也是我尝试过的一种变体，尽管我收到了相同的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:22:50.887

参考[SQL Server](http://www.connectionstrings.com/sql-server-2005#sqlconnection) 的连接字符串 按以下方式更改连接字符串：

```
Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword; 
```

如果您想使用默认登录名（窗口登录名）登录，请使用以下受信任连接：

```
Server=myServerAddress;Database=myDataBase;Trusted_Connection=True; 
```

所以你的连接对象应该是：

```
Dim theconnection As New SqlConnection("server=(localdb)\Projects; _
                          Database=test_drive_database;Trusted_Connection=True;") 
```

如果这不能解决问题，则可能是用户的权限问题。检查参考链接：

[SQL Server Asp.Net - “登录失败”](https://stackoverflow.com/questions/8804543/sql-server-asp-net-login-failed)
[SQL Server 用户通过 asp.net 页面](https://stackoverflow.com/questions/8502763/login-failed-for-sql-server-user-through-asp-net-page)
[登录失败 SQL Server：用户](http://forums.asp.net/t/1053234.aspx/1)
[登录失败 用户登录失败](http://msdn.microsoft.com/en-us/library/ab4e6cky%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:24:45.070

尝试添加“Trusted_Connection = true;” 在连接字符串上。

# database - 如果控制文件在 oracle 数据库中丢失，则检索数据

> ID：13488975
> 
> 赞同：0
> 
> 时间：2012-11-21T08:18:58.727
> 
> 标签：database, oracle

假设数据库控制文件是否永久丢失（无备份）。我们可以从 Oracle 数据库中的数据文件中检索数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:11:17.330

一般来说 - “是”。但情况很重要。如果您知道控制文件中应该包含什么，那么您可以重新创建它（或者更确切地说，*它们*应该被多路复用） - 例如，请参见[这篇文章](http://myracle.wordpress.com/2008/01/11/recover-database-without-control-files-and-redo-log-files/)。That uses the [`create controlfile`command](http://docs.oracle.com/cd/E14072_01/server.112/e10592/statements_5003.htm) with appropriate options and parameters to recreate the control file matching your existing data files. 真正确保你了解它在做什么以及它可能产生的影响——你不想让事情变得比现在更糟。

或[谷歌搜索“oracle 恢复控制文件”](http://www.google.com/search?client=safari&rls=en&q=oracle+recover+control+file&ie=UTF-8&oe=UTF-8)。

但不要依赖这种可能性——它不能替代真正的备份和恢复策略。

# mysql - 在 ASP.Net 中连接 mySQL 数据库总是失败

> ID：13488981
> 
> 赞同：3
> 
> 时间：2012-11-21T08:19:26.373
> 
> 标签：mysql, ado.net, mysql-connector

环境：Windows 2008 R2 & ASP.Net 4.0

连接器/网络 6.6.4 从[这里](http://dev.mysql.com/downloads/connector/net/#downloads)

**注意**：我选择了“.Net / Mono”平台并下载了独立于架构的版本。 [Enable-32-bit-application-in-IIS](https://stackoverflow.com/questions/10563450/iis-7-5-using-32-bit-driver-instead-of-64-bit)不适合我。

我尝试通过以下连接字符串连接 mySQL 数据库。

```
Server=192.168.1.200;Port=3306;Database=gm_log;Uid=cf2;Pwd=123456;Charset=utf8;AllowUserVariables=True;Allow Zero Datetime=false;PersistSecurityInfo=false;Pooling=true;ConnectionLifeTime=0;Max Pool Size=100;Min Pool Size=1; 
```

并且 MySqlConnection.Open 抛出一个 OverflowException。**算术运算导致溢出**

这是堆栈跟踪。

```
at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.HandleAuthChange(MySqlPacket packet)
at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.Authenticate(Boolean reset)
at MySql.Data.MySqlClient.NativeDriver.Open()
at MySql.Data.MySqlClient.Driver.Open()
at MySql.Data.MySqlClient.Driver.Create(MySqlConnectionStringBuilder settings)
at MySql.Data.MySqlClient.MySqlPool.CreateNewPooledConnection()
at MySql.Data.MySqlClient.MySqlPool..ctor(MySqlConnectionStringBuilder settings)
at MySql.Data.MySqlClient.MySqlPoolManager.GetPool(MySqlConnectionStringBuilder settings)
at MySql.Data.MySqlClient.MySqlConnection.Open() 
```

还有其他人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T16:16:36.397

从这里降级到以前的版本：

[http://dev.mysql.com/downloads/connector/net/6.5.html#downloads](http://dev.mysql.com/downloads/connector/net/6.5.html#downloads)

它现在对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T11:59:04.933

我不得不遇到同样的问题。但是我使用 Nuget 来安装 MySql.Data 包。如果您使用的是 Nuget，则可以在库包管理器控制台中使用以下命令降级版本。

```
Install-Package MySql.Data -Version x.x.x.x 
```

其中 xxxx 是旧版本。就我而言，我尽可能返回并使用 5.1.7.0。您可以检查 nuget 站点以查看可用的版本，也可以使用以下命令再次使用控制台。

```
PM> Get-Package -ListAvailable -AllVersions -Filter MySql.Data

Id                             Version              Description/Release Notes                                                                                                                      
--                             -------              -------------------------                                                                                                                      
Ming.MySql.Data                6.5.4.0              ADO.Net driver for MySQL                                                                                                                       
MySql.Data                     5.1.7.0              Connector/Net is a fully-managed ADO.NET driver for MySQL.                                                                                     
MySql.Data                     6.2.5                Connector/Net is a fully-managed ADO.NET driver for MySQL.                                                                                     
MySql.Data                     6.3.7                Connector/Net is a fully-managed ADO.NET driver for MySQL.                                                                                     
MySql.Data                     6.4.4                Connector/Net is a fully-managed ADO.NET driver for MySQL.                                                                                     
MySql.Data                     6.5.4                Connector/Net is a fully-managed ADO.NET driver for MySQL.                                                                                     
MySql.Data                     6.6.4                Connector/Net is a fully-managed ADO.NET driver for MySQL.                                                                                     
MySQL.Data.Entities            6.4.4.0              Connector/Net is a fully-managed ADO.NET driver for MySQL.  Entity Framework support package (Mysql.Data.Entities).                            
MySQL.Data.Entities            6.5.4.0              Connector/Net is a fully-managed ADO.NET driver for MySQL.  Entity Framework support package (Mysql.Data.Entities). 
```

编辑：经过更多的实验，我确定我只需要回到 6.4.4 而不是 5.1.7.0。回溯到那么远还有其他问题。

# transactions - CQRS：存储事件并发布它们 - 我如何以安全的方式执行此操作？

> ID：13488982
> 
> 赞同：26
> 
> 时间：2012-11-21T08:19:30.957
> 
> 标签：transactions, cqrs, event-sourcing, neventstore

正如我在[为什么 CQRS 存储库发布事件而不是事件存储中所学到的那样？](https://stackoverflow.com/questions/12677926/why-is-the-cqrs-repository-publishing-events-not-the-event-store)发布事件是 CQRS 存储库的任务。到现在为止还挺好。

当然，存储事件和发布它们应该在一个事务中。从技术上讲，这意味着将一个（或多个）记录写入存储，并将一个（或多个）事件发布到消息总线。因此，一个简单的数据库事务是不够的，它应该是一个分布式的。

现在，不幸的是，许多 NoSQL 数据库（例如 MongoDB）不支持符合 ACID 的事务，更不用说在分布式事务中发生的可能性了。此外，还有不支持分布式事务的消息队列。

所以问题是：我该如何处理？

有推荐使用的模式吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-21T09:44:42.220

您的存储库*可以*发布事件，它不必这样做。这种情况下的解决方案是将事件存储用作队列。您将有一个后台进程来监视事件存储中的新事件，将它们发布到（例如）总线，然后将它们标记为已调度。

与往常一样，需要权衡取舍。您可能必须处理至少一次的消息传递和幂等处理。它比使用简单的分布式事务更复杂。

乔纳森奥利弗写了几篇关于这个主题的文章，可能会对你有所帮助：[删除 2PC](http://blog.jonathanoliver.com/removing-2pc-two-phase-commit/)，[我如何避免两阶段提交](http://blog.jonathanoliver.com/how-i-avoid-two-phase-commit/)，[幂等模式](http://blog.jonathanoliver.com/idempotency-patterns/)

# c++ - 意外的数学除法输出 - C++

> ID：13488985
> 
> 赞同：2
> 
> 时间：2012-11-21T08:19:52.453
> 
> 标签：c++, math, types, division

我有这段测试代码（还有很多其他材料；但是，它非常密集，可能与这个问题无关），它一直在产生一些莫名其妙的输出。编译时，此块：

```
cout << team1[m].rating << endl;
cout << team2[n].rating << endl;
cout << team1.size() << endl;
cout << team2.size() << endl;
cout << (team2[n].rating - team1[m].rating) / team2.size() << endl;
cout << (team1[m].rating - team2[n].rating) / team1.size() << endl; 
```

产生输出：

```
10 
30 
2 
2 
10 
2147483638 
```

'team1' 和 'team2' 都是类型`vector<player>`（没有反斜杠），并且 'player' 结构如下所示：

```
struct player {
string name;
int rating;
player(string Name, int Rating) :
    name(Name), rating(Rating) {}
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T08:21:54.553

`team1.size()`并且`team2.size()`是无符号 ( `size_t`) - 将您的代码更改为：

```
cout << (team2[n].rating - team1[m].rating) / static_cast<int>(team2.size()) << endl;
cout << (team1[m].rating - team2[n].rating) / static_cast<int>(team1.size()) << endl; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T08:26:28.407

`(team1[m].rating - team2[n].rating)`等于`-20`。这个表达式结果正在`unsigned int`根据混合表达式的规则被提升并除以`team1.size()`，产生`2147483638`相当于`unsigned int`的`signed int` `-10`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T08:32:43.707

发生这种情况是因为`size()`函数`std::vector`返回 a `size_t`，它是无符号的。当将 an `int`（例如评级）除以 a`size_t`时，将`int`提升为 a `unsigned int`。

将负数转换为无符号值将导致该值下溢，变得大于原始有符号类型可以表示的最大正值。

为了防止这种情况，您需要明确声明 size() 参数应`int`在除法之前转换为。

```
cout << (team2[n].rating - team1[m].rating) / static_cast<int>(team2.size()) << endl;
cout << (team1[m].rating - team2[n].rating) / static_cast<int>(team1.size()) << endl; 
```

# android - 提取 UTC 时间并将其转换为 Unix 时间格式

> ID：13488986
> 
> 赞同：0
> 
> 时间：2012-11-21T08:19:53.793
> 
> 标签：android, datetime, time, formatting, utc

我有两个问题：

1- 从 Android 设备获取 UTC 时间 2- 将其转换为 UNIX 时间格式（毫秒）

我感谢任何反馈可以提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:36:01.017

我相信这应该有效：

```
Date now = Calendar.getInstance().getTime(); // this gets you current time as a Date
long milis = now.getTime(); // this gets you current time in UNIX format 
```

# android - LayoutParams.addRule 是如何工作的？

> ID：13488987
> 
> 赞同：1
> 
> 时间：2012-11-21T08:19:55.307
> 
> 标签：android, android-relativelayout, layoutparams

我正在构建一个应用程序，它将视图添加到相对布局直到停止。我的问题是 RelativeLayout.LayoutParams.addRule 是如何工作的？如果我继续调用 addRule 这会创建一个不断增长的列表还是 addRule 检查规则是否已经存在？下面的代码真的有必要吗？我可以只使用 addRule 并且如果已经存在这不会创建重复条目吗？

谢谢

```
 int[] rules = this.position[0].params.getRules();
    boolean rule = false;

    switch(index){
    case 0:

        for(int i = 0; i < rules.length; i++){
            if(rules[i]==RelativeLayout.RIGHT_OF)
                rule = true;
        }

        if(!rule){
            this.position[0].params.addRule(RelativeLayout.RIGHT_OF);
        }

        break;
    case 1:

        for(int i = 0; i < rules.length; i++){
            if(rules[i]==RelativeLayout.LEFT_OF)
                rule = true;
        }

        if(!rule){
            this.position[1].params.addRule(RelativeLayout.LEFT_OF);
        }

        break;
    case 2:

        for(int i = 0; i < rules.length; i++){
            if(rules[i]==RelativeLayout.ABOVE)
                rule = true;
        }

        if(!rule){
            this.position[2].params.addRule(RelativeLayout.ABOVE);
        }

        break;
    case 3:

        for(int i = 0; i < rules.length; i++){
            if(rules[i]==RelativeLayout.BELOW)
                rule = true;
        }

        if(!rule){
            this.position[3].params.addRule(RelativeLayout.BELOW);
        }

        break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:31:30.120

通过查看[`RelativeLayout.LayoutParams`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/widget/RelativeLayout.java#RelativeLayout.LayoutParams)类的代码，您可以看到规则存储在一个`int`数组中，其中规则是索引，因此无论您调用多少次，规则都只会添加一次`addRule`（最后一次调用将计算在内）。

# stl - STL队列函数：空和大小

> ID：13488988
> 
> 赞同：2
> 
> 时间：2012-11-21T08:19:57.147
> 
> 标签：stl, queue

我们大程序中使用的是stl queue，一行一行

```
if( q_block.empty() ) 
```

它返回 true 而它不应该返回。我将此代码更改为

```
if( q_block.size() == 0 ) 
```

它按预期返回 false 。看了STL源码，发现这两个功能完全一样。但我不知道为什么它在这种情况下表现不同。

谁能给我一些想法？

# asp.net - 在网格中换行

> ID：13488989
> 
> 赞同：0
> 
> 时间：2012-11-21T08:20:00.817
> 
> 标签：asp.net, gridview

我有一个带有绑定字段的网格。我已经设置了`Item_style-wrap=true`。但它仍然没有为我包装数据。可能是什么问题？

网格代码：

```
<asp:BoundField DataField="Reason" 
                HeaderText="Reason For Request" 
                ItemStyle-Wrap="true" 
                ItemStyle-Width="10%" 
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:26:41.330

尝试这个：

```
<asp:BoundField>
        <HeaderStyle Wrap="true" />
        <ItemStyle Wrap="true" />
</asp:BoundField> 
```

# c++ - bgl 中的 edge_descriptor 映射

> ID：13488994
> 
> 赞同：3
> 
> 时间：2012-11-21T08:20:30.600
> 
> 标签：c++, boost, graph, map, boost-graph

我是 BGL 新手，我在制作自己的属性映射时遇到问题，关键是 edge_property

你能告诉我我做错了什么，以下代码打印不： (0,1) == (0,1) 吗？1 但 (0,1) == (0,1) ？0

这是代码

```
#include <boost/graph/adjacency_list.hpp>
#include <iostream>
#include <map>

using namespace std;

class A {};
class B {};

typedef boost::adjacency_list<boost::listS, boost::vecS, boost::bidirectionalS,
                                    A, B > Graph;

typedef boost::graph_traits<Graph>::vertex_descriptor vertex_descriptor;
typedef boost::graph_traits<Graph>::edge_descriptor edge_descriptor;
typedef boost::graph_traits<Graph>::edge_iterator edge_iterator;
typedef boost::graph_traits<Graph>::in_edge_iterator in_edge_iterator;
typedef boost::graph_traits<Graph>::out_edge_iterator out_edge_iterator;

map<edge_descriptor, int>  fun(Graph g){

    map<edge_descriptor, int> m;
    m[*(edges(g).first)] = 5;
    return m;
}

int main(){
    Graph g;

    vertex_descriptor a = add_vertex(g);
    vertex_descriptor b = add_vertex(g);

    add_edge(a, b, g);

    map<edge_descriptor, int> m = fun(g);

    edge_iterator ei, ei_end;
    for(tie(ei, ei_end) = edges(g) ; ei !=ei_end ; ++ei){
        cout << m.begin()->first << " == " << *ei << " ? " << (m.begin()->first == *ei) << endl;
    }
} 
```

非常感谢！

编辑：也许有比 edge_property 值更好的方法来映射边缘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:47:32.477

您的边缘描述符有 3 个成员：源节点、目标节点和指向 B 属性的指针。在您`fun`的图表中，您制作了图表的副本，并且新图表中的复制边指向不同的 B。如果您将自己声明`fun`为`map<edge_descriptor, int> fun(const Graph& g)`（并且您可能应该这样做，因为更大图表的副本可能很昂贵）您将获得您的结果预计。

# .net - Microsoft .NET 3.5 完整下载

> ID：13488996
> 
> 赞同：16
> 
> 时间：2012-11-21T08:20:41.113
> 
> 标签：.net, download, frameworks

虽然不是与编程直接相关的问题。有时确实需要在您的项目中使用某些框架。

我正在考虑在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=21)下载 .NET 3.5 框架，但你最终会下载一些 2MB 的安装程序，一旦你运行它就会将框架的其余部分下载到你的硬盘上。

我在哪里可以下载整个框架？我下载它的机器没有连接到网络，所以我想在其他地方下载框架并安装在离线机器上。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-11-13T23:48:49.550

直接链接到**.Net-3.5** -Full-Setup

> [http://download.microsoft.com/download/6/0/f/60fc5854-3cb8-4892-b6db-bd4f42510f28/dotnetfx35.exe](http://download.microsoft.com/download/6/0/f/60fc5854-3cb8-4892-b6db-bd4f42510f28/dotnetfx35.exe)

直接链接到**.Net-3.5-SP1** -Full-Setup

> [http://download.microsoft.com/download/2/0/e/20e90413-712f-438c-988e-fdaa79a8ac3d/dotnetfx35.exe](http://download.microsoft.com/download/2/0/e/20e90413-712f-438c-988e-fdaa79a8ac3d/dotnetfx35.exe)

感谢 Dzmitry Lahoda！

# jquery - jQuery 验证器和 bootstrap.js - 通知/错误

> ID：13488997
> 
> 赞同：0
> 
> 时间：2012-11-21T08:20:47.557
> 
> 标签：jquery, html, css, twitter-bootstrap

我正在为单页网站探索 jQuery 和 bootstrap.js。如果不擅长复杂的 CSS 和 jQuery，这可能会有点麻烦。我的目标是在他们的 hero-box 示例上进行简单构建，该示例在右上角有一个登录表单，如下所示：http: [//twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

我有一个用于创建用户的工作表单，我使用了这个例子：[http ://alittlecode.com/files/jQuery-Validate-Demo/](http://alittlecode.com/files/jQuery-Validate-Demo/)

目标是将其与这些通知/警报之类的东西结合起来：http: [//www.w3resource.com/twitter-bootstrap/alerts-and-errors-tutorial.php](http://www.w3resource.com/twitter-bootstrap/alerts-and-errors-tutorial.php)

我拥有的相关部分是：

```
$(document).ready(function(){
$.validator.addMethod('validChars', function (value) {

    var iChars = "!#$%^&*()+=-[]\\\';,/{}|\":<>?";

    for (var i = 0; i < value.length; i++) {
        if (iChars.indexOf(value.charAt(i)) != -1) {
         return false;
      }
    }

    return true;

    });

$('#login_form').validate(
        {
        rules: {
            login_email: {
            required: true,
            validChars:true,
            maxlength:50
            },
            login_password: {
            validChars:true,
            required: true
            }
        },
        highlight: function(input) {
            $(input).closest('.control-group').addClass('error');
        },
        unhighlight: function(input) {
            $(input).closest('.control-group').addClass('success');
        }
        });

}); 
```

我的表格如下所示：

```
 <form id="login_form" name="login_form"; class="navbar-form pull-right control-group" action="">

                        <input  class="span2 control-group"  placeholder="Email" name="login_email" id="login_email">

                        <input  class="span2 control-group"  placeholder="Password" name="login_password" id="login_password">

                        <button class="btn login" type="button" onclick="login();">Sign in</button>
                        <button class="btn requestor" type="button" onclick="createForm();" >Create new account</button>
                    </form> 
```

什么都没有发生，我真的没有想法。

通知或事件的野心是说明性的，我主要关心的是让验证连接到表单。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:19:18.490

问题是你没有给出`<input>`'sa 类型。当它们没有类型时，验证无法处理输入。

Validate 像这样评估输入字段

```
 .validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, " +
                "[type='number'], [type='search'] ,[type='tel'], [type='url'], " +
                "[type='email'], [type='datetime'], [type='date'], [type='month'], " +
                "[type='week'], [type='time'], [type='datetime-local'], " +
                "[type='range'], [type='color'] ",
                "focusin focusout keyup", delegate) 
```

不包括没有类型的输入。所以

```
<input type="text" class="span2 control-group"  placeholder="Email" name="login_email" id="login_email">

<input type="text" class="span2 control-group"  placeholder="Password" name="login_password" id="login_password"> 
```

会成功的！