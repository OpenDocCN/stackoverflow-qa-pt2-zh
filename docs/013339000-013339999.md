# StackOverflow 问答 13339000-13339999

# java - 我在使用 LibGDX TileMaps 时遇到了困难

> ID：13339006
> 
> 赞同：3
> 
> 时间：2012-11-12T05:57:05.187
> 
> 标签：java, xml, libgdx

我正在尝试重制第一个超级马里奥关卡。除了平铺外，我几乎在所有方面都取得了成功。如果有人可以快速查看我的代码并解释我做错了什么，那就太好了！我已经解决了几天了。谢谢！另外，在我的声誉更高之前，我不能发布图片，所以这里有一个链接。

[http://dl.dropbox.com/u/88813088/upload.html](http://dl.dropbox.com/u/88813088/upload.html)

首先，这是我的图像图集。它被命名为“world.png”：

（链接网站上的第一张图片）

其次，这是我想要制作的：

（网站上的第二张图片）

保存 tmx 文件并使用 TexturePacker 后，我得到以下结果：

（网站上的最后一张图片）

似乎瓷砖图集没有被切成 32x32 位。相反，每 32 个像素，整个图像就会一次又一次地重叠显示。这是我的其余代码。我希望你们中的一个可以帮助我解决它。那将是壮观的。

这是我的主要 Java 代码。它被命名为“MainGame.java”：

```
package com.chanceleachman.marioExample.Screens;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.g2d.tiled.TileAtlas;
import com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer;
import com.badlogic.gdx.graphics.g2d.tiled.TiledLoader;
import com.badlogic.gdx.graphics.g2d.tiled.TiledMap;
import com.chanceleachman.marioExample.MarioExample;

public class MainGame implements Screen {

OrthographicCamera camera;
TileMapRenderer tileMapRenderer;
TiledMap map;
TileAtlas atlas;

private MarioExample game;

public MainGame(MarioExample game) {
    this.game = game;
}

@Override
public void render(float delta) {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); // #14
    Gdx.gl.glClearColor(0, 0, 1, 1);
    tileMapRenderer.render(0, 0, 800, 480);
    camera.zoom = 10;
}

@Override
public void resize(int width, int height) {
}

@Override
public void show() {
    camera = new OrthographicCamera(Gdx.graphics.getWidth(),
            Gdx.graphics.getHeight());

    map = TiledLoader.createMap(Gdx.files.internal("map/map.tmx"));

    atlas = new TileAtlas(map, Gdx.files.internal("map/"));

    tileMapRenderer = new TileMapRenderer(map, atlas, 32, 32);

}
} 
```

这是我的 Tiled 程序中的 Tmx 文件。它被命名为“map.tmx”：

```
<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="25" height="15" tilewidth="32" tileheight="32">
<tileset firstgid="1" name="world" tilewidth="32" tileheight="32">
<image source="level.png" width="512" height="32"/>
</tileset>
<layer name="Tile Layer 1" width="25" height="15">
<data encoding="base64" compression="zlib">
eJxjZGBgYBzFo3gUj+JRPKwwAFOoAXg=
</data>
</layer>
</map> 
```

这是我的地图包文件代码。它被命名为“地图包文件”：

```
level.png
format: RGBA8888
filter: Nearest,Nearest
repeat: none
level
  rotate: false
  xy: 0, 0
  size: 480, 32
  orig: 480, 32
  offset: 0, 0
  index: 0 
```

我认为这几乎可以概括。对于任何对此作出回应的人，非常感谢！哦，还有，这是我遵循的原始教程：

1.  [http://code.google.com/p/libgdx/wiki/GraphicsTileMaps](http://code.google.com/p/libgdx/wiki/GraphicsTileMaps)

再次感谢您！如果我遗漏了任何重要的事情，请告诉我！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:04:40.937

`TexturePacker`似乎被窃听了，我一直无法让它正常工作，然后使用 LibGDX 中的文件。尝试使用其他工具创建`.png file`& ，请[在此处](https://stackoverflow.com/questions/11737426/libgdx-application-crashes-when-call-tiledmaprenderer-render/11747244#11747244)`packfile`查看我的答案。

# python - 具有递归的 Python C API - 段错误

> ID：13339007
> 
> 赞同：1
> 
> 时间：2012-11-12T05:57:07.967
> 
> 标签：python, recursion, segmentation-fault, c-api

我在 C++ 中使用 python 的 C API (2.7) 将 python 树结构转换为 C++ 树。代码如下：

*   python 树被递归地实现为具有子列表的类。叶节点只是原始整数（不是类实例）

*   我加载一个模块并从 C++ 调用一个 python 方法，使用来自[here](http://www.codeproject.com/Articles/14192/Embedding-Python-In-Your-C-Application)的代码，它返回树的一个实例，python_tree，作为 C++ 中的 PyObject。

*   递归遍历得到的PyObject。要获得孩子的名单，我这样做：

    ```
    PyObject* attr = PyString_FromString("children");
    PyObject* list = PyObject_GetAttr(python_tree,attr);
    for (int i=0; i<PyList_Size(list); i++) {
        PyObject* child = PyList_GetItem(list,i); 
        ... 
    ```

非常简单，它可以工作，直到我最终在调用 PyObject_GetAttr 时遇到分段错误（Objects/object.c:1193，但我看不到 API 代码）。它似乎发生在访问树的*最后一个叶子节点时。*

我很难确定问题所在。使用 C API 进行递归是否有任何特殊注意事项？我不确定我是否需要使用 Py_INCREF/Py_DECREF，或者使用[这些](http://docs.python.org/2/c-api/allocation.html)函数或其他东西。老实说，我并不完全理解 API 的工作原理。任何帮助深表感谢！

编辑：一些最小的代码：

```
void VisitTree(PyObject* py_tree) throw (Python_exception)
{
    PyObject* attr = PyString_FromString("children");
    if (PyObject_HasAttr(py_tree, attr)) // segfault on last visit
    {
        PyObject* list = PyObject_GetAttr(py_tree,attr);
        if (list)
        {
            int size = PyList_Size(list);
            for (int i=0; i<size; i++)
            {
                PyObject* py_child = PyList_GetItem(list,i);
                PyObject *cls = PyString_FromString("ExpressionTree");
                // check if child is class instance or number (terminal)
                if (PyInt_Check(py_child) || PyLong_Check(py_child) || PyString_Check(py_child)) 
                    ;// terminal - do nothing for now
                else if (PyObject_IsInstance(py_child, cls))
                    VisitTree(py_child);
                else
                    throw Python_exception("unrecognized object from python");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T20:30:46.907

可以识别您的 Python/C 代码的几个问题：

*   `PyObject_IsInstance`接受一个类，而不是一个字符串，作为它的第二个参数。

*   没有专门用于[引用计数](http://docs.python.org/2.7/extending/extending.html#reference-counts)的代码。新的引用，例如那些返回的`PyObject_GetAttr`引用永远不会被释放，而借用的引用在使用之前`PyList_GetItem`永远不会[被获取](http://docs.python.org/2.7/extending/extending.html#thin-ice)。将 C++ 异常与其他纯 Python/C 混合会加剧问题，使得实现正确的引用计数变得更加困难。

*   缺少重要的错误检查。`PyString_FromString`内存不足时可能会失败；`PyList_GetItem`如果列表同时缩小，可能会失败；`PyObject_GetAttr`即使`PyObject_HasAttr`成功后，在某些情况下也可能失败。

这是代码的重写（但未经测试）版本，具有以下更改：

*   实用程序函数从定义它的模块中`GetExpressionTreeClass`获取类。`ExpressionTree`（填写正确的模块名称`my_module`。）

*   `Guard`是一个[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)风格的守卫类，它在离开作用域时释放 Python 对象。这个小而简单的类使引用计数异常安全，它的构造函数自己处理 NULL 对象。[`boost::python`](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/)以这种风格定义了功能层，我建议看看它。

*   现在，所有`Python_exception`抛出都伴随着设置 Python 异常信息。因此，捕手`Python_exception`可以使用`PyErr_PrintExc`或`PyErr_Fetch`打印异常或以其他方式找出问题所在。

编码：

```
class Guard {
  PyObject *obj;
public:
  Guard(PyObject *obj_): obj(obj_) {
    if (!obj)
      throw Python_exception("NULL object");
  }
  ~Guard() {
    Py_DECREF(obj);
  }
};

PyObject *GetExpressionTreeClass()
{
  PyObject *module = PyImport_ImportModule("my_module");
  Guard module_guard(module);
  return PyObject_GetAttrString(module, "ExpressionTree");
}

void VisitTree(PyObject* py_tree) throw (Python_exception)
{
  PyObject *cls = GetExpressionTreeClass();
  Guard cls_guard(cls);

  PyObject* list = PyObject_GetAttrString(py_tree, "children");
  if (!list && PyErr_ExceptionMatches(PyExc_AttributeError)) {
    PyErr_Clear();  // hasattr does this exact check
    return;
  }
  Guard list_guard(list);

  Py_ssize_t size = PyList_Size(list);
  for (Py_ssize_t i = 0; i < size; i++) {
    PyObject* child = PyList_GetItem(list, i);
    Py_XINCREF(child);
    Guard child_guard(child);

    // check if child is class instance or number (terminal)
    if (PyInt_Check(child) || PyLong_Check(child) || PyString_Check(child)) 
      ; // terminal - do nothing for now
    else if (PyObject_IsInstance(child, cls))
      VisitTree(child);
    else {
      PyErr_Format(PyExc_TypeError, "unrecognized %s object", Py_TYPE(child)->tp_name);
      throw Python_exception("unrecognized object from python");
    }
  }
} 
```

# java - 联系人列表 API 雅虎

> ID：13339009
> 
> 赞同：0
> 
> 时间：2012-11-12T05:57:15.133
> 
> 标签：java, yahoo

> **可能重复：**
> [在 java 中从 hotmail gmail yahoo 获取联系人列表？](https://stackoverflow.com/questions/397933/taking-contact-list-from-hotmail-gmail-yahoo-in-java)

有没有人使用Java实现**导入雅虎联系人列表？**如果是的话，请有人可以帮助我吗？

比如喜欢在FB找朋友。我可以提供我的电子邮件 ID 并导入我拥有的所有联系人，特别是电子邮件 ID。

# java - 我的网络服务抛出异常：javax.xml.bind.JAXBException: class [Ljava.lang.String; 在此上下文中也不知道它的任何超类

> ID：13339011
> 
> 赞同：1
> 
> 时间：2012-11-12T05:57:22.080
> 
> 标签：java, web-services, jax-ws

> **可能重复：**
> [带有 java.lang.Object 字段的 JAXB 编组对象](https://stackoverflow.com/questions/2269494/jaxb-marshalling-objects-with-java-lang-object-field)

我是**Web 服务**的新手。我正在尝试使用**JAX-WS**开发服务。我的**服务签名**是这样的。

```
@WebService
@MTOM
@SOAPBinding(style = SOAPBinding.Style.RPC)
public interface DocumentOperationService {
    @WebMethod
    Object[] getDocumentById(String strDocumentId);
} 
```

但是在运行时，在运行时它会抛出**异常：**

```
javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class [Ljava.lang.String; nor any of its super class is known to this context.] 
```

我无法确定问题。任何人都可以提出问题所在。

# asp.net - 管理员模板 asp.net 表格准备就绪

> ID：13339012
> 
> 赞同：2
> 
> 时间：2012-11-12T05:57:26.853
> 
> 标签：asp.net, templates

在 vs 2010 中创建新网站时，它提供了一个模板，其中包含母版页、登录页、注册... 有没有可以购买/下载 asp.net 就绪模板的地方？

我知道 themeforest 有一些很棒的管理模板，但是将它们转换为母版页等需要做很多工作。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:02:25.310

这个问题确实是题外话，但简短的回答是“是”——尽管我不知道人们通常会购买它们。

例如：

*   [http://visualstudiogallery.msdn.microsoft.com/](http://visualstudiogallery.msdn.microsoft.com/)

*   [http://www.templatemonster.com/](http://www.templatemonster.com/)

*   [http://www.wix.com/sample/website](http://www.wix.com/sample/website)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-12-13T07:01:05.163

在这里，我分享一篇文章，其中包含一组现成的 asp.net 模板。如果需要，您还可以进行更改，因为在现成的模板上进行更改很容易。[在这里](https://themeselection.com/10-best-mvc5-asp-net-core-bootstrap-admin-template)检查。

# android - Unity3D 调用 Android Activity

> ID：13339014
> 
> 赞同：2
> 
> 时间：2012-11-12T05:57:46.677
> 
> 标签：android, unity3d

我有一个关于将活动从 Unity 调用到 Android 的问题。我在这里尝试过教程：[http ://www.youtube.com/watch?v=uEKnQgAZnR0&feature=relmfu](http://www.youtube.com/watch?v=uEKnQgAZnR0&feature=relmfu)

但我不知何故无法启动统一游戏。

这个过程步骤是否有替代方案？最好有我可以遵循的分步指南或视频。

谢谢。

# xmpp - 我可以向 MultiUserChat RoomInfo 添加额外的属性吗？

> ID：13339015
> 
> 赞同：4
> 
> 时间：2012-11-12T05:58:33.143
> 
> 标签：xmpp, openfire, smack

在 Smack 中，我们可以通过 RoomInfo 获取房间的信息。现在我有一个房间的额外信息（比如房间所属的位置），我怎么能通过smack来做到这一点？

例如，在当前的 smack 中：

*   管理员可以通过以下方式设置房间信息（如房间描述） `MultiUserChat.sendConfigurationForm(...);`
*   会员可以通过以下方式获取信息（如房间描述） `MultiUserChat.getRoomInfo(...);`

# python - 在谷歌应用引擎上运行的瓶子请求中的国家代码

> ID：13339016
> 
> 赞同：0
> 
> 时间：2012-11-12T05:58:41.323
> 
> 标签：python, google-app-engine, bottle

我在谷歌应用引擎上运行瓶子，并想在[这里使用 X-AppEngine-Country 标题文档](https://developers.google.com/appengine/docs/python/runtime#Request_Headers)...... 但是在瓶子请求中看不到这个标题。获得此标头的任何替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:23:52.717

`request`您可以使用全局对象通过瓶子访问位置 HTTP 标头。

```
from bottle import Bottle, request

app = Bottle()

@app.route('/country')
def hello():
  return request.headers.get('X-AppEngine-Country') 
```

[在这里](http://bottleae.proppy-samples.appspot.com/country)试试

请注意，这些基于位置的标头仅在生产环境中可用，在开发环境中不可用。

# logging - 为什么我应该使用 Jboss as-7 的 Logging 框架而不是 log4j 第三方 api 进行日志记录？

> ID：13339019
> 
> 赞同：6
> 
> 时间：2012-11-12T05:59:05.443
> 
> 标签：logging, jboss

我正在尝试将我的代码从 Jboss 5.1 更新到 Jboss 7，我发现 jboss-as-7.1 有自己的日志框架。我想知道在 log4j 上使用 jboss 自己的日志框架的主要区别和优势。我还需要一个如何在这个框架中使用 appender 的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T08:36:19.503

JBoss 7 的内置日志模块基于[Java Util Logging](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/package-summary.html)。使用它的主要（唯一？）原因是它已经集成，并且它不像人们希望推出自己的解决方案那样微不足道。如果您不想使用 JUL API，可以使用提供的 SLF API。

您可以在实例配置文件中配置附加程序，例如`standalone.xml`. 查找日志记录子系统配置：

```
<profile>
    <subsystem xmlns="urn:jboss:domain:logging:1.1"> 
```

它带有一个工作示例配置。请注意，通常所说的在配置中`appender`都有标题，例如或。`*handler``console-handler``periodic-rotating-file-handler`

[在这里](https://community.jboss.org/wiki/JBossAS7Logging)，您可以找到有关日志记录配置的一些建议。

编辑：一些澄清。

换一种说法——**没有真正的理由**为什么你应该更喜欢使用内置的 jboss 日志而不是你选择的框架。唯一的问题是配置自己的框架需要额外的努力并且可能仍然失败（我花了一些时间弄清楚如何配置我的 JBoss 以使用 logback - 最后放弃了）。所以我没有资格告诉你如何保持你的 log4j 实现:)

您可以通过“本机”JUL API 或 SLF4J 桥使用 jboss 日志记录。两者都包含在`/modules`目录中，因此您不需要在运行时包含任何其他库。只需在您的代码中请求您的首选`Logger`，您就可以开始了：

单频：`LoggerFactory.getLogger(...);`

七月：`Logger.getLogger(...);`

为了从 JUL 切换到 SLF，我唯一要做的就是为要编译的代码提供 SLF API - 这是 maven 配置：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.6.1</version>
  <scope>provided</scope>
</dependency> 
```

# r - devtools roxygen 包创建和 rd 文档

> ID：13339021
> 
> 赞同：9
> 
> 时间：2012-11-12T05:59:33.727
> 
> 标签：r, devtools, roxygen, roxygen2, rd

我是 roxygen 的新手，正在努力了解如何使用它来快速创建新的/自定义包。

即我想知道最低要求是制作一个名为`package1`using的包`devtools`，`roxygen2/3`以便我可以运行命令

```
require(package1)
fun1(20)
fun2(20) 
```

分别生成 2000 和 4000 个随机法线

所以让我们举个最简单的例子。

如果我有两个功能`fun1`和`fun2`

```
fun1 <- function(x){
    rnorm(100*x)
} 
```

和

```
fun2 <- function(y){
    rnorm(200*y)
} 
```

参数是数字，返回值是数字。我很确定这不是 S3 方法，让我们称其为 fun1 和 fun2....我不太确定我还需要提供哪些其他信息。我可以将 fun1 和 fun2 放在单独`.R`的文件中并添加一点，`#'`但我不确定是否包含所有与 roxygen 相关的要求，也不确定要包含哪些相关要求以及如何使用它来创建与包一起使用的 rd 文档。我认为命名空间只有名称 fun1 和 fun2？并且包装描述只是一些与我有关的通用信息......以及包装的功能？

任何分步指南都会很高兴收到。

编辑：以下是我开始的距离......

我可以做到以下几点来创建一个 pacakge ......但不能使用 roxygen 来制作文档......

```
package.skeleton(list = c("fun1","fun2"), name = "package1") 
```

在这里我不确定我是否错过了一堆步骤......

```
roxygenise("package1") 
```

所以在尝试安装时我收到以下错误消息

```
system("R CMD INSTALL package1")
* installing to library ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library’
* installing *source* package ‘package1’ ...
** R
** preparing package for lazy loading
** help
Warning: /path.to.package/package1/man/package1-package.Rd:32: All text must be in a section
*** installing help indices
Error in Rd_info(db[[i]]) : 
  missing/empty \title field in '/path.to.package/package1/man/fun1.Rd'
Rd files must have a non-empty \title.
See chapter 'Writing R documentation' in manual 'Writing R Extensions'.
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/package1’ 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-12T17:56:31.673

我很惊讶[@hadley在他的](https://stackoverflow.com/users/16632/hadley)[评论](https://stackoverflow.com/questions/13339021/devtools-roxygen-package-creation-and-rd-documentation#comment18211749_13339021)中说不要使用 package.skeleton 。我会使用`package.skeleton`，添加 roxygen 注释块，然后删除“man”目录中的所有文件并运行`roxygenize`. 但是，由于 Hadley 说“Nooooooooooo”，这是您构建通过 R CMD 检查并导出函数所需的*最低要求。*

创建名为“package1”的目录。在该目录下，创建一个名为 DESCRIPTION 的文件并将其放入其中（如果您愿意，可以适当地编辑它）：

## 描述

```
Package: package1
Type: Package
Title: What the package does (short line)
Version: 0.0.1
Date: 2012-11-12
Author: Who wrote it
Maintainer: Who to complain to <yourfault@somewhere.net>
Description: More about what it does (maybe more than one line)
License: GPL 
```

现在创建一个名为“R”的目录并为每个函数添加一个文件（或者，如果需要，您可以将两个函数放在同一个文件中）。我创建了 2 个文件：fun1.R 和 fun2.R

## 乐趣1.R

```
#' fun1
#' @param x numeric
#' @export
fun1 <- function(x){
    rnorm(100*x)
} 
```

## 乐趣2.R

```
#' fun2
#' @param y numeric
#' @export
fun2 <- function(y){
    rnorm(200*y)
} 
```

现在你可以`roxygenize`你的包裹

```
R> library(roxygen2)
Loading required package: digest
R> list.files()
[1] "package1"
R> roxygenize("package1")
Updating collate directive in  /home/garrett/tmp/package1/DESCRIPTION 
Updating namespace directives
Writing fun1.Rd
Writing fun2.Rd 
```

由于您在 Q 的标题中提到了**devtools**，您可以使用 devtools 中的`build`and`install`函数

```
build('package1')
install('package1') 
```

或者您可以退出 R 并使用 R 附带的工具来构建/检查/安装。

```
$ R CMD build package1
$ R CMD check package1_0.0.1.tar.gz
$ R CMD INSTALL package1_0.0.1.tar.gz 
```

现在，再次启动 R 以使用您的新包。

```
$ R --vanilla -q

library(package1)
fun1(20)
fun2(20) 
```

但是，确定最低要求不太可能对您（或您的软件包的用户）有太大帮助。**研究使用roxgen2**的众多软件包之一会更好。

这是 fun1.R 文件的更好版本，它仍然没有使用它可以使用的所有 roxygen 标签，但比最低限度要好得多

## 修改后的fun1.R

```
#' fun1
#'
#' This is the Description section
#'
#' This is the Details section
#'
#' @param x numeric. this is multiplied by 100 to determine the length of the returned vector
#' @return a numeric vector of random deviates of length \code{100 * x}
#' @author your name
#' @seealso \code{\link{fun2}}
#' @examples
#' fun1(2)
#' length(fun1(20))
#' @export
fun1 <- function(x){
    rnorm(100*x)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-28T14:39:27.937

*很久以后*- 您可以让[**RoxygenReady**](http://roxygenready.github.io/)使用最小的 Roxygen 注释框架来准备您的函数。它基本上将您从您的 2 个输入函数带到 GSee 的答案，即 Roxygen2 的**输入**。

# python - GAE users.get_current_user() 返回无

> ID：13339022
> 
> 赞同：2
> 
> 时间：2012-11-12T05:59:36.913
> 
> 标签：python, google-app-engine, python-2.7, webapp2

我正在尝试在 Google App Engine 应用程序中获取当前用户对象，但它似乎没有返回任何内容。

[我使用https://github.com/takatama/gae-webapp2-auth/blob/master/handlers.py](https://github.com/takatama/gae-webapp2-auth/blob/master/handlers.py)上的示例代码来编写用户处理程序。

我的应用程序成功登录，但是 get_current_user() 返回 NoneType。这个函数调用是否在 AJAX POST 中并且会话未初始化？我必须在某处添加装饰器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:28:23.793

如果用户当前未登录，则该函数`get_current_user`返回。处理此问题的一种正常方法是首先调用然后使用块来确定他们是否已登录（此示例取自[docs](https://developers.google.com/appengine/docs/python/users/overview)）：`None``user = users.get_current_user()``if`

```
user = users.get_current_user()
if user:
    greeting = ("Welcome, %s! (<a href=\"%s\">sign out</a>)" %
                (user.nickname(), users.create_logout_url("/")))
else:
    greeting = ("<a href=\"%s\">Sign in or register</a>." %
                users.create_login_url("/"))

self.response.out.write("<html><body>%s</body></html>" % greeting) 
```

如果`get_current_user()`返回`None`，我们知道用户没有登录，所以我们使用`users.create_login_url()`创建一个链接，允许用户进行身份验证，之后`get_current_user()`将返回该`User`用户的对象（我说的“用户”够吗？:)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T09:14:39.610

问题是你注册的时间已经结束了，所以如果你用不同的 gmail 登录到谷歌应用引擎，它会正常工作:)

# git - git am 应该忽略提交消息中以“[]”开头的内容吗？

> ID：13339027
> 
> 赞同：9
> 
> 时间：2012-11-12T06:00:10.683
> 
> 标签：git, git-am

我有一个提交消息，例如`[Hello World]Something.`
然后我使用 git format-patch HEAD~1 来创建一个补丁。
补丁内容如下：

```
Subject: [PATCH 1/7] [Hello World] Something. 
```

但是在我使用 git am 应用补丁后，提交消息变成了“Something”，[Hello World] 似乎丢失了。
应用补丁后如何将内容保留在“[]”中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T06:22:38.053

`git am -k`会阻止它删除`[]`主题开头括号中的内容，但这也会保留该`[PATCH 1/7]`部分。 `git format-patch`还有一个`-k`选项可以阻止它添加那种类型的内容，从而允许主题在一个`git format-patch | git am`循环中被保留。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-11T08:26:16.407

我有同样的担忧，并在下面的链接中找到了解决方案：

[http://git.661346.n2.nabble.com/Bug-Incorrect-stripping-of-the-PATCH-prefix-in-git-am-td7643405.html](http://git.661346.n2.nabble.com/Bug-Incorrect-stripping-of-the-PATCH-prefix-in-git-am-td7643405.html)

我们必须使用带有“--keep-non-patch”选项的“am”命令。手册页描述如下：

$ man git am

```
 --keep-non-patch
       Pass -b flag to git mailinfo (see git-mailinfo(1)). 
```

$ 人 git 邮件信息

```
 -b
       When -k is not in effect, all leading strings bracketed with [ and ] pairs
       are stripped.  This option limits the stripping to only the pairs whose
       bracketed string contains the word "PATCH". 
```

# .htaccess - 动态 URL 的 Mod 重写规则 - 这可能吗？

> ID：13339029
> 
> 赞同：1
> 
> 时间：2012-11-12T06:00:28.247
> 
> 标签：.htaccess, mod-rewrite

我让自己头疼，试图弄清楚这是否可以做到。我有一个最近迁移的论坛，留下了数千个断开的动态链接。

典型的 URL 如下所示：

`http://domain.com/Forum_Name/b10001/25/`
（“b10001”是指论坛ID号，最后一个数字是指页码。）

新 URL 的格式如下：

`http://domain.com/forums/Forum_Name.10001/`
（没有页码。另外，请注意“b”不再在 ID 号前面。）

是否有可以实现此目的的重写规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:15:54.513

我不是重写者，但按照我在[这里](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/ "初学者的 URL 重写-AddedBytes")读到的内容，这样的东西应该可以工作：

```
RewriteRule    ^([A-Za-z0-9-]+)/b([0-9])+(/[0-9]+)?/?.*$    forums/$1.$2/   [NC,L] 
```

`^([A-Za-z0-9-]+)`表示“以字母数字字符串开头”，然后是`/b`常量，后跟`[0-9]+`（一位或多位数字），然后是带有一位或多位数字（页码，`(/[0-9]+)?`）的可选 /，最后以可选斜杠 ( `/?$`）。

如果 URL 与该模式匹配，则将其重写为`forums/$1\.$2/`. `\.`转义点（它是通配符），`$1`是模式的第一个匹配项（第一个字母数字字符串是论坛名称），并且`$2`是第二个匹配项，即 . 后面的数字`b`。

最后，`NC`意味着模式不区分大小写，并且`L`是“最后一个” - 所以你不处理任何其他规则。我认为这取决于您，只需阅读链接的文章并选择您需要的标志 :)

**编辑：使用**[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)更正了模式检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:21:35.237

我想你要找的是

```
RewriteRule ^([a-zA-Z0-9_]+)/b([0-9]+)/.*$ forums/$1/$2/ 
```

确保 [] 部分的内容与您用于论坛名称和 ID 的格式相匹配。

对于参数，您可能希望`R=301`强制进行永久重定向。

# objective-c - UIImageWriteToSavedPhotosAlbum 和 ALAssetsLibrary 没有保存图像，也没有错误

> ID：13339043
> 
> 赞同：1
> 
> 时间：2012-11-12T06:02:28.910
> 
> 标签：objective-c, ios

我正在尝试将图像保存到相机胶卷。这实际上工作得很好，但我不得不处理其他东西，现在我要返回项目为 iOS 6 更新它，并且这个功能在*iOS6*上不再有效。

我尝试了两种方法，没有 NSError 对象，两种方法都静默失败。一、UIImageWriteToSavedPhotosAlbum：

```
UIImageWriteToSavedPhotosAlbum(img, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

// Callback
-(void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    // error == nil
} 
```

...和 ​​ALAssetsLibrary 方法：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library writeImageToSavedPhotosAlbum:[img CGImage]
                          orientation:(ALAssetOrientation)[img imageOrientation]
                      completionBlock:^(NSURL *assetURL, NSError *error)
{
    // assetURL == nil
    // error == nil
} 
```

此外，`[ALAssetsLibrary authorizationStatus] == ALAuthorizationStatusAuthorized`评估为真

在模拟器上，该应用程序从未出现在“设置”>“隐私”>“照片”部分，但在实际的 iPad 上，它们确实显示该应用程序有权访问照片。（另外，补充一点：上面的第一种方法是我以前使用的——它适用于真实设备和模拟器，没问题）。

我也尝试在主线程上运行它，看看是否改变了任何东西 - 没有区别。我之前在后台运行它，它曾经可以正常工作（在模拟器和设备上）。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:06:47.553

想通了...我在做一些愚蠢的事情。UIImage 无法获取原始像素数据，您必须先将其处理成它可以接受的形式，并使用适当的元数据。

部分问题是我使用 Cocos2D 从 CCRenderTexture (getUIImageFromBuffer()) 获取 UIImage，当我切换到 Cocos2D-x 时，该功能不再可用，我只是不知道 UIImage 对象不能用原始像素数据构建，我认为它会自动处理标题信息和格式。

这个答案有帮助：[iPhone - UIImage imageWithData 返回 nil](https://stackoverflow.com/questions/5135199/iphone-uiimage-imagewithdata-returning-nil)

这个例子也很有帮助： [http ://www.wmdeveloper.com/2010/09/create-bitmap-graphics-context-on.html?m=1](http://www.wmdeveloper.com/2010/09/create-bitmap-graphics-context-on.html?m=1)

# php - 动态更改 div 内容，而页面的某些部分保持静态，并且还允许直接访问任何内容（想想书签）？

> ID：13339044
> 
> 赞同：2
> 
> 时间：2012-11-12T06:02:32.307
> 
> 标签：php, jquery, ajax, web

首先，这个网站在一些学校项目中帮助了我很多，我希望我的问题足够具体，可以得到一些答案。

我想做的是更改页面上 div 的内容（我们称之为“#content”），同时还允许以某种方式直接访问通过更改 div 的内容创建的各种“页面”。

例如，假设“foo.com/home”是主页。'#content' div 需要填充主页的代码，而它周围的其他元素保持静态（例如页眉、页脚和导航 div）。同样，“foo.com/forum”会用论坛的代码填充“#content”，其他页面也会这样做。

目前，我只是检查 URL 末尾的哈希，然后使用 jQuery 的 load() 方法将我的各种代码加载到“#content”中。然而，除了在移动浏览器上使用散列进行导航似乎很挑剔之外，我也*觉得*它是错误的。

我正在考虑使用 PHP，然后仅使用 PHP 包含来更改基于 URL 加载到“#content”中的代码。例如，“foo.com/page=forum”将获取与主页（页眉/页脚、导航等）相同（布局明智）的页面，但只会包含一个不同的文件用于 '#content 。但是，这将重新加载整个页面，而不仅仅是“#content”，对吗？

理想情况下，我想使用某种 AJAX 调用来仅重新加载“#content”div，但是，除了编辑 URL 哈希之外，我不确定如何在允许书签等的同时执行此操作。我希望用户能够访问“foo.com/home”或“foo.com/forum”并最终得到填有正确内容的“模板页面”（页眉/页脚、导航）。

再次抱歉，如果这是一个措辞不当的问题。我做了一些研究，但似乎无法找到完成这项工作的最佳方法。在此先感谢 - 任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:11:39.117

检查此示例代码：

```
 var xmlhttp;
         if (window.XMLHttpRequest)
            {
           xmlhttp=new XMLHttpRequest();
            }
         else
            {
           xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
         xmlhttp.onreadystatechange=function()
            {
           if (xmlhttp.readyState==4 && xmlhttp.status==200)
              {
             document.getElementById("content").innerHTML=xmlhttp.responseText;

          }
          } 
           var usernm = document.getElementById("username").value;
           var pwd = document.getElementById("password").value; 
           var params = "username=" + usernm + "&password=" + pwd; 
           xmlhttp.open("POST","phpfile.php",true);
           xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
           xmlhttp.send(params); 
          //xmlhttp.send(); without parameters 
```

# python - Heroku 上的 Python-Tornado

> ID：13339049
> 
> 赞同：4
> 
> 时间：2012-11-12T06:02:58.927
> 
> 标签：python, heroku, tornado

我正在尝试在 Heroku 上部署 Tornado。我可以使用这种方法运行一个简单的“hello world”应用程序：http: [//kzk9.net/deploying-tornado-on-heroku-mac-os-x](http://kzk9.net/deploying-tornado-on-heroku-mac-os-x)

但是在尝试 Tornado 演示应用程序“chatdemo”时，服务器崩溃并显示以下日志：

```
11:22:45 web.1  | 2012-11-12 11:22:45 [18442] [ERROR] Exception in worker process:
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | 2012-11-12 11:22:45 [18442] [INFO] Worker exiting (pid: 18442)
11:22:45 web.1  | 2012-11-12 11:22:45 [18443] [ERROR] Exception in worker process:
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | 2012-11-12 11:22:45 [18443] [INFO] Worker exiting (pid: 18443)
11:22:45 web.1  | 2012-11-12 11:22:45 [18444] [ERROR] Exception in worker process:
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | 2012-11-12 11:22:45 [18444] [INFO] Worker exiting (pid: 18444)
11:22:45 web.1  | 2012-11-12 11:22:45 [18445] [ERROR] Exception in worker process:
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 461, in spawn_worker
11:22:45 web.1  |     worker.init_process()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/workers/base.py", line 101, in init_process
11:22:45 web.1  |     self.wsgi = self.app.wsgi()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 101, in wsgi
11:22:45 web.1  |     self.callable = self.load()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 24, in load
11:22:45 web.1  |     return util.import_app(self.app_uri)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/util.py", line 292, in import_app
11:22:45 web.1  |     app = eval(obj, mod.__dict__)
11:22:45 web.1  |   File "<string>", line 1, in <module>
11:22:45 web.1  | NameError: name 'application' is not defined
11:22:45 web.1  | 2012-11-12 11:22:45 [18445] [INFO] Worker exiting (pid: 18445)
11:22:45 web.1  | Traceback (most recent call last):
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/bin/gunicorn", line 8, in <module>
11:22:45 web.1  |     load_entry_point('gunicorn==0.15.0', 'console_scripts', 'gunicorn')()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 32, in run
11:22:45 web.1  |     WSGIApplication("%prog [OPTIONS] APP_MODULE").run()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/app/base.py", line 124, in run
11:22:45 web.1  |     Arbiter(self).run()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 185, in run
11:22:45 web.1  |     self.halt(reason=inst.reason, exit_status=inst.exit_status)
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 280, in halt
11:22:45 web.1  |     self.stop()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 328, in stop
11:22:45 web.1  |     self.reap_workers()
11:22:45 web.1  |   File "/Users/princekumar/Downloads/tornado-2.4/demos/ChatOnHeroku/lib/python2.7/site-packages/gunicorn/arbiter.py", line 421, in reap_workers
11:22:45 web.1  |     raise HaltServer(reason, self.WORKER_BOOT_ERROR)
11:22:45 web.1  | gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3>
11:22:45 web.1  | exited with code 1
11:22:45 system | sending SIGTERM to all processes
SIGTERM received 
```

有人知道怎么了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-12T09:31:06.123

检查你的`procfile`和`requirements.txt`。如果有人在看，[这里](https://github.com/avinassh/talkwithme)是部署在 Heroku 上的相同官方聊天演示的一个工作示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T13:07:43.510

您的 Procfile 应包含以下内容：

```
 web: python app.py 
```

（将 app.py 替换为“chatdemo.py”或您的应用名称）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-22T23:20:03.507

截至 2021 年 7 月，@avi 和 @apoclyps 提供的答案在 Tornado 6.1 上仍然可以正常工作。

我的 Tornado 网络应用程序的 Procfile 出现在下面。它也适用于 AWS：

`web: python application.py --port=$port --logging=error`

# php - Cookie 多个值

> ID：13339054
> 
> 赞同：2
> 
> 时间：2012-11-12T06:03:20.640
> 
> 标签：php, cookies, multiple-value

在“cookies”部分下的 php 手册中，它指出您可以通过简单地将 '[]' 添加到 cookie 名称来向单个 cookie 添加多个值。

起初我对此的理解是做到以下几点：

```
<?php
setcookie("[user1]", "bill");
setcookie("[user2]", "tom");

print_r($_COOKIE);
?> 
```

输出是：'Array ()' 显然，在看到一个空数组后，我知道有些地方不对劲，但是，我遵循了手册中的说明。所以我在浏览器中进入开发者模式，查看浏览器和服务器的所有头信息。

浏览器和服务器都具有以下内容： [user1]=bill [user2]=tom

然而 $_COOKIE 关联数组是空的，即'Array()'

因此，我在 PHP 手册中研究并发现了多个值存储在“来自外部源的变量”部分下的单个 cookie 中的方式。

这里给出了一个如何正确完成的详细示例。代替上面的，它是按如下方式完成的：

```
<?php
setcookie("Cookie[user1]", "bill");
setcookie("Cookie[user2]", "tom");

print_r($_COOKIE);
?> 
```

上述脚本的输出是：'Array ([Cookie] => Array ([user1] => bill [user2] => tom))'

我的问题是为什么在第一个示例中 cookie 注册但不打印出来，但在第二个（正确）示例中它们确实在 $_COOKIE 变量中打印出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:24:40.260

你做的有点不对

```
 setcookie("Cookie[user1]", "bill");
 setcookie("Cookie[user2]", "tom"); 
```

这将存储值'bill; 和 'tom' 作为一个数组，在一个名为 'Cookie' 的 cookie 中，通过 $_COOKIE 超级全局访问。你需要像这样访问它：

```
print_r($_COOKIE['Cookie']); // Cookie is the name you used above 
```

另一个例子：

```
setcookie("bob[user1]", "bill"); // cookie name is bob
print_r($_COOKIE['bob']); // Notice the cookie name is the key here 
```

如果要将数组存储在单个 cookie 中，还可以序列化内容。这会将数组转换为要存储在 cookie 中的字符串，然后您可以在需要数据时将其转换回来。

```
$myArray = array(1,2,3,4);
setCookie('my_cookie', serialize($myArray)); // Store the array as a string
$myArray = unserialize($_COOKIE['my_cookie]); // get our array back from the cookie 
```

# ios - Facebook XMPP 聊天连接

> ID：13339055
> 
> 赞同：0
> 
> 时间：2012-11-12T06:03:20.720
> 
> 标签：ios, connection, xmpp, chat, facebook-chat

我正在构建一个 iOS 应用程序以使用 XMPP 与 Facebook Chat 集成（我正在使用 XMPPFramework 库）。当我用 2 部 iPhone 测试自己时，它运行良好，但是当我要求我的 beta 用户（总共大约 5 个）同时测试它时，我遇到了两个连接问题：

1.  当我的应用尝试打开与 chat.facebook.com 的连接时，它偶尔会收到“连接被拒绝”错误。
2.  即使成功建立连接，它也会在短时间（不到一分钟）后断开，并出现错误“远程对等方关闭套接字”。

正如我所说，当我只是用 2 部 iPhone 自己测试它时它工作正常，所以所有权限设置都应该是正确的。我想知道 Facebook 是否对应用程序的聊天连接数量设置了任何同时限制，或者我是否遗漏了任何内容。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:40:32.977

由于您使用的是 XMPPFramework，XMPPReconnect 模块应该这样做：它只是在服务器断开连接时恢复连接（就像 Facebook 聊天服务器似乎做的那样）。

```
#import "XMPPReconnect.h"

// [...]

XMPPReconnect *reconnect = [[XMPPReconnect alloc] initWithDispatchQueue:dispatch_get_main_queue()];
[reconnect activate:yourXMPPStream]; 
```

请务必将重新连接对象存储在某处以避免解除分配。

# asp.net-mvc - 当我在树视图中选择父级时如何获取子级名称

> ID：13339057
> 
> 赞同：1
> 
> 时间：2012-11-12T06:03:31.233
> 
> 标签：asp.net-mvc, visual-studio, kendo-ui

我正在使用带有复选框实现的 kendoUI 树视图。当我选择父复选框时，我可以检查所有子复选框。现在，当我选择父复选框时，我想获取所有孩子的文本值。我在树视图中使用模板进行复选框操作

```
$("#ProjectUsersTreeView [type=checkbox]").live('change', function (e) {                       var chkbox = $(this);
                        var parent = chkbox.parent();                            
    var pBox = $(parent).closest('.k-item').find(":checkbox");                               

                       if (this.checked || pBox.length>0) {
                           $(pBox).prop('checked',this.checked ? "checked": "")      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:05:48.177

我建议不要使用您的代码来检查孩子，而是使用 KendoUI 配置选项 checkChildren。

```
tree = $("#ProjectUsersTreeView").kendoTreeView({
            checkboxes:{
                checkChildren: true
            },
            ...
        }).data("kendoTreeView"); 
```

然后获取所有选定的文本使用：

```
$("#ProjectUsersTreeView [type=checkbox]").live('change', function (e) {
            var checked = $("input:checked", tree);
            $.each(checked, function(idx, elem) {
                console.log("text", tree.text(elem));
            })
        }); 
```

在`checked`我`input`从树中获取所有实际存在的元素`checked`并通过使用`text`方法获取它在控制台上显示其文本。

*注意*：意识到我已经定义`tree`为`$("#ProjectUsersTreeView").data("kendoTreeView")`然后在`change`处理程序中使用它。

# c# - C# 中的文件路径问题（主页

> ID：13339058
> 
> 赞同：1
> 
> 时间：2012-11-12T06:03:46.510
> 
> 标签：c#

我正在尝试使用我的 Documents 文件夹中的 test.txt 文件来测试这个程序。我很难找到正确的路径。有人可以给我一些想法吗？这是一项家庭作业，我几乎完成了！

```
using System;
using System.IO;

class Program

{
    // declare constants to use in wind chill factor equation - no magic numbers
    const double EQUATION_NUMBER_ONE = 35.74;
    const double EQUATION_NUMBER_TWO = 0.6215;
    const double EQUATION_NUMBER_THREE = 35.75;
    const double EQUATION_NUMBER_FOUR = 0.4275;
    const double EQUATION_EXPONENT = 0.16;
    const int DEGREE_SYMBOL = 176;

    static void Main()
    {       

        // declare some variables for the main method
        string fileName = "";
        string line = "";
        double t = 0.0;
        double v = 0.0;
        double wchillf = 0.0;
        char degreeSymbol = (char)DEGREE_SYMBOL;

        string environment = System.Environment.GetFolderPath
       (System.Environment.SpecialFolder.Personal) + "c:\\";

        // Give student Info and ask user for a file name.
        // we will read this file and use the info for our input.
        Console.WriteLine("Wind Chill Calculator Braught to you by Teancum");
        Console.WriteLine("for CS 1400 01X");
        Console.WriteLine("11/11/2012");
        Console.WriteLine("Project 8");
        Console.Write("Please enter the file name in your My Documents folder: ");
        fileName = Console.ReadLine();

        string path = environment + fileName;
        //we will create a new instance of the StreamReader class
        //as well find the file in the documents folder
        //this will read the Info and orginise it.
        StreamReader windChillinfo = new StreamReader(path);

        // start the do loop to keep readding the file untill there is no more information
        do
        {
            // read in a line and save it as a string variable
            line = windChillinfo.ReadLine();

            //this if is to make sure there is no invalid info for example if the file is empty.
            if (line != null)
            {
                string[] values = line.Split();
                t = double.Parse(values[0]);
                v = double.Parse(values[1]);

                //here we call the windchillmagic Method
                wchillf = WindChillMagic(t, v);

                //here will be the Results of the windchillmagic method 
                Console.WriteLine("\nFor a temperature {0:f2} F{1}", t, degreeSymbol);
                Console.WriteLine("\nand a wind speed of {0:f2}mph", v);
                Console.WriteLine("\nThe wind chill factor would be = {0:f2}{1}\n", wchillf, degreeSymbol);
            }
        } while (line != null);

        windChillinfo.Close();

        Console.WriteLine("\nThank you for and keep Warm! Press enter to EXIT");

        Console.ReadLine();
    }//End Main()

    static double WindChillMagic(double t, double v)
    {
        double wci = 0.0;
        wci = EQUATION_NUMBER_ONE + (EQUATION_NUMBER_TWO * t) - (EQUATION_NUMBER_THREE * (Math.Pow(v, EQUATION_EXPONENT))) + (EQUATION_NUMBER_FOUR * t * (Math.Pow(v, EQUATION_EXPONENT)));
        return wci;
    }
}//End class Program 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:10:59.113

您如何按照以下方式做一些事情：

```
String path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Personal), "filename.txt");

using (StreamWriter sw = new StreamWriter(path, false))
{
    sw.WriteLine("Hello, file.");
} 
```

这对我有用 - 现在我的 Documents 文件夹中有文件“filename.txt”，文本为“Hello，file”。里面。

* * *

当您这样做时，您的版本不起作用：

```
string environment = System.Environment.GetFolderPath
   (System.Environment.SpecialFolder.Personal) + "c:\\"; 
```

这意味着，如果您的个人文件夹是“C:\Users\Username\Documents”，则该`environment`字符串现在将包含值“C:\Users\Username\Documentsc:\”，并且在将其与

```
fileName = Console.ReadLine();
string path = environment + fileName; 
```

如果您输入“test.txt”，`path`现在将包含`C:\Users\Username\Documentsc:\test.txt`. 您应该**使用调试器**来查找这些类型的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:13:05.000

这看起来向后：

```
System.Environment.GetFolderPath
       (System.Environment.SpecialFolder.Personal) + "c:\\"; 
```

如果 GetFolderPath 返回“SomeFolder\SomeOtherFolder”，那么您生成的是“SomeFolder\SomeOtherFolderc:\”

如果您在此处放置断点并逐步通过该行，然后将鼠标悬停在`environment`变量上，您会看到这个问题。

1) 倒退。
2）您可能应该使用 Path.Combine 代替。

`string path = environment + fileName;`

应该可能使用 Path.Combine 代替，因此在它们之间添加一个斜杠。如果`environment`不是以斜线结尾怎么办？然后你会得到“C:\SomeFolder\SomeOtherFoldersomeUsersFilename”

# c# - 如何延迟发送电子邮件？

> ID：13339059
> 
> 赞同：2
> 
> 时间：2012-11-12T06:03:47.513
> 
> 标签：c#, asp.net-mvc-3, email

我有 ASP.NET MVC 应用程序，我需要在用户离开页面后在“X”分钟内（每个用户时间不同）向用户发送电子邮件。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:07:23.573

Http 是无状态的，发送响应的时间页面执行完毕。即使某个机构在很长一段时间内没有访问网站，您也需要一个能够发送邮件的应用程序。您可以将需要在一段时间后发送的邮件放入数据库中。另一个应用程序可能是 Windows 服务，它将在固定时间间隔（例如 30 秒）后汇集数据库，并发送已达到发送时间的邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:26:51.943

我选择的解决方案取决于您正在构建的系统所需的规模和可靠性。

如果它是一个小规模的（即 1 台同时没有太多用户的服务器）、非关键任务系统（即，如果不时实际发送一些电子邮件也没关系，例如，如果您的服务器崩溃），那么该解决方案可以像管理内存中的队列一样简单，该线程会定期唤醒以向最近离开页面的用户发送电子邮件。

如果您需要构建非常可靠的东西，并且可能需要在短时间内发送大量电子邮件，并且如果您的系统必须扩展到很多机器，那么您需要构建一个基于一些存储中的队列，根据需要将尽可能多的机器挑选并处理它们。如果您需要非常高的规模和可靠性，那么诸如 Windows Azure 队列服务之类的 API 可能非常适合。

# node.js - 无法使用 mongoskin 正确返回字符串

> ID：13339061
> 
> 赞同：0
> 
> 时间：2012-11-12T06:03:55.290
> 
> 标签：node.js, mongodb, bson, mongoskin

所以我有这个脚本：

```
var db = require('mongoskin').db('localhost:27017/titles', {safe:true});
var titles = db.collection('titles');

title = titles.findOne(function(err, result){
if (err) throw err;
return result.title;
});

console.log(title) 
```

集合中的这个 BSON 对象：

```
{"title": "Hello World", "postNumber": 0, "_id": ObjectId("509eeffbf8f11e8813000001")} 
```

我的目标是让字符串“Hello World”输出到控制台，但我得到了这个：

```
{ emitter: { _events: { open: [Object] }, _maxListeners: 50 },
  state: 1,
  options: undefined,
  skinDb:
   { emitter: { _events: [Object], _maxListeners: 100 },
     state: 1,
     _dbconn:
      { databaseName: 'titles',
    serverConfig: [Object],
    options: [Object],
    _applicationClosed: false,
    native_parser: true,
    bsonLib: [Object],
    bson: {},
    bson_deserializer: [Object],
    bson_serializer: [Object],
    _state: 'connecting',
    pkFactory: [Object],
    forceServerObjectId: false,
    safe: true,
    notReplied: {},
    isInitializing: true,
    auths: [],
    openCalled: true,
    commands: [],
    _callBackStore: [Object],
    logger: [Object],
    slaveOk: false,
    tag: 1352682584657,
    eventHandlers: [Object],
    serializeFunctions: false,
    raw: false,
    recordQueryStats: false,
    reaperEnabled: false,
    _lastReaperTimestamp: 1352682584657,
    retryMiliSeconds: 1000,
    numberOfRetries: 60,
    reaperInterval: 10000,
    reaperTimeout: 30000,
    readPreference: undefined },
 db: null,
 username: '',
 password: undefined,
 admin: { emitter: {}, state: 0, skinDb: [Circular], admin: null },
 _collections: { titles: [Circular] },
 bson_serializer:
  { BSON: [Object],
    Long: [Object],
    ObjectID: [Object],
    DBRef: [Function: DBRef],
    Code: [Function: Code],
    Timestamp: [Object],
    Binary: [Object],
    Double: [Function: Double],
    MaxKey: [Function: MaxKey],
    MinKey: [Function: MinKey],
    Symbol: [Function: Symbol] },
 ObjectID:
  { [Function: ObjectID]
    index: 0,
    createPk: [Function: createPk],
    createFromTime: [Function: createFromTime],
    createFromHexString: [Function: createFromHexString] } },
  ObjectID:
   { [Function: ObjectID]
 index: 0,
 createPk: [Function: createPk],
 createFromTime: [Function: createFromTime],
 createFromHexString: [Function: createFromHexString] },
  collectionName: 'titles',
  collection: null,
  internalHint: null,
  hint: [Getter/Setter] } 
```

当我将 console.log() 放在函数中时它工作得很好，但由于某种原因我无法返回字符串。

解决了：

```
read = function(callback){
    titles.findOne(function(err, result){
        if (err) throw err;
        callback(result.title);
    });
};

read(function(title){
console.log(title);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:17:44.313

你需要了解javascript回调。

1 - findOne 将返回一个 db 对象，而不是您的字符串的结果。我从未读过 mongoskin doco，但我认为它将是一个数据库集合或某种你在 console.log 打印输出中看到的东西。2 - 在回调中你确实返回 result.title; 永远不会像您期望的那样返回标题。所以这就是为什么我建议阅读一下回调是如何工作的。

正如您提到的，打印标题的正确方法是将 console.log 放在回调函数中。

# android - 将文本和应用名称发送到 Facebook

> ID：13339063
> 
> 赞同：2
> 
> 时间：2012-11-12T06:04:04.950
> 
> 标签：android, android-intent, facebook-android-sdk

它在电子邮件和 Twitter 中共享图像和文本，但在 facebook 文本中未显示。`Is it possible to share text to facebook using intent?.`

请为此提供帮助。

```
private void share(String nameApp, String imagePath) 
{
    try
    {
        List<Intent> targetedShareIntents = new ArrayList<Intent>();
        Intent share = new Intent(android.content.Intent.ACTION_SEND);
        share.setType("image/jpeg");
        List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
        if (!resInfo.isEmpty()){
            for (ResolveInfo info : resInfo) {
                Intent targetedShare = new Intent(android.content.Intent.ACTION_SEND);
                targetedShare.setType("image/jpeg"); // put here your mime type
                if (info.activityInfo.packageName.toLowerCase().contains(nameApp) || info.activityInfo.name.toLowerCase().contains(nameApp)) {
                    targetedShare.putExtra(Intent.EXTRA_SUBJECT, "Virtual Mirror Photo");
                    targetedShare.putExtra(Intent.EXTRA_TEXT,"This photo is created by Virtual Mirror App.\n\nInfoshore Team");
                    targetedShare.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)) );
                    targetedShare.setPackage(info.activityInfo.packageName);
                    targetedShareIntents.add(targetedShare);
                }
            }
            Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Select app to share");
            chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
            startActivity(chooserIntent);
        }
    }
    catch(Exception e){
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:04:20.593

根据 Facebook 的平台政策，我们无法使用 Intent.EXTRA_TEXT 预先填写分享对话框。它通常被认为是一个错误，但根据此处提交的错误报告[以及](https://developers.facebook.com/bugs/332619626816423/)此处[，](https://developers.facebook.com/bugs/363863587019268) Facebook 明确提到情况并非如此（这不是错误）。

我发现我们无法为使用 Intents 上传的照片添加标题。我们能做到这一点的唯一方法是将**Facebook SDK**集成到您的应用程序中，然后带有文本标题的照片将在 Facebook 墙上共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:11:13.530

是的，可以使用 Facebook 共享文本

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("text/plain");
shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Content to share");
PackageManager pm = v.getContext().getPackageManager();
List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
for (final ResolveInfo app : activityList) {
    if ((app.activityInfo.name).contains("facebook")) {
        final ActivityInfo activity = app.activityInfo;
        final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
        shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        shareIntent.setComponent(name);
        v.getContext().startActivity(shareIntent);
        break;
   }
} 
```

参考[StackOverflow](https://stackoverflow.com/questions/3515198/share-text-on-facebook-from-android-app-via-action-send)

# c - 找出C中的地址

> ID：13339065
> 
> 赞同：3
> 
> 时间：2012-11-12T06:04:20.093
> 
> 标签：c, multidimensional-array, memory-address

我正在尝试学习如何在 C 中找出地址。对于下面的代码，假设它是在 32 位小端机器上编译的。

```
struct {
    int n;
    char c;
} A[10][10]; 
```

假设 A[0][0] 的地址是 1000（十进制），那么 A[3][7] 的地址是多少？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T06:10:29.033

C 是*row-major ordered*，这意味着首先计算最左边的索引。因此：

```
&A[3] == 1000 + (3 * 10 * sizeof(your_struct)) 
```

要找到该列，我们只需添加剩余的索引：

```
&A[3][7] == 1000 + (3 * 10 * sizeof(your_struct)) + (7 * sizeof(your_struct)) 
```

* * *

请注意，这与大端与小端架构无关。这只是一个单词中字节的位置，而您想要数组中结构的位置。

此外，`sizeof(your_struct)`不能保证是`sizeof(n) + sizeof(c)`因为编译器可以填充您的结构。

最后，机器的*32 位*特性意味着内存地址寄存器的大小是 32 位。（或者换一种说法，`sizeof(void*)==32`）。它表明您的处理器实际上可以分配地址到多少内存。这是与 C 中数据类型的大小不同的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T06:09:24.870

这不取决于 C 语言标准，而是取决于您正在使用/定位的编译器、编译器版本和操作系统。

获得特定案例结果的唯一方法是手动测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:09:31.697

数组表示法只是计算元素地址并取消引用它的简写，如下所示：

```
int a[5][15];
Address of a[3][7]: &a + 3 * 15 * sizeof(int) + 7 * sizeof(int) 
```

这就是为什么你不能在不知道除最后一个维度之外的所有维度的情况下使用 n 维数组的原因——编译器不知道要添加什么偏移量来计算地址。

在这种情况下，由于您使用的是结构，事情变得复杂了。存在对齐问题，编译器填充结构以对齐字边界。在这种情况下，由于结构本身占用 5 个字节，而下一个字边界将是 8 个字节，因此编译器可能会在结构中添加 3 个未使用的字节以弥补差异。（这样做有性能优势。）当然，这根本无法保证，您可以手动指定编译器应如何处理此类情况。

**注意：**正如其他人所说，这非常依赖于系统和编译器，所以不要把这当作福音——自己尝试一下，以绝对确定你的情况会产生什么结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T06:17:01.997

这肯定取决于编译器和系统。但无需猜测。您可以简单地编译并尝试

```
#include <stdio.h>

int main()
{
    struct {
        int n;
        char c;
    } A[10][10];

    printf("%08x\n", &A[0][0]);
    printf("%08x\n", &A[0][1]);
    printf("%08x\n", &A[1][0]);
    ...
    printf("%08x\n", &A[3][7]);

    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T06:20:16.647

它完全依赖于系统而不是语言。

此外，所有 2-D 、 3-D 等数组实际上都是按顺序分配的，因为内存是顺序`(0X00000000 to 0xFFFFFFFF)`的，所以没有这样的 2-D 内存左右。

它完全取决于系统如何分配内存，无论是`row`主要还是`column`主要

行专业的公式：

```
&A[3][7] == &A[0][0] + (3 * 10 * sizeof(struct s)) + (7 * sizeof(struct s)) 
```

对于专栏专业：

```
&A[3][7] == &A[0][0] + (7 * 10 * sizeof(struct s)) + (3 * sizeof(struct s)) 
```

编译器还通过结构填充对其进行优化，以加快 CPU 的访问速度。

因此，对于结构大小的一个对象，`8`而不是`5`（如果 int 大小为 4 个字节）

# silverlight - 如何从 silverlight 中的 observablecollection 中删除客户项目

> ID：13339068
> 
> 赞同：0
> 
> 时间：2012-11-12T06:04:47.003
> 
> 标签：silverlight, mvvm

我将一个可观察的集合绑定到silverlight中的一个列表框。当我单击列表框中的一项并单击删除按钮时，如何使用mvvm在不使用linq的情况下从列表框中删除该特定项目。我传递的按钮的命令参数是列表框itemid。

```
 <ListBox   ItemsSource="{Binding School1,Mode=TwoWay}" DisplayMemberPath="SchoolName"  Name="listBox1"  >
<Button Content="Delete" Command="{Binding deletecommand}" CommandParameter="{Binding Path=SelectedItem.ID,ElementName=listBox1}"   Name="button2" /> 
```

那么从可观察集合中删除特定项目的代码是什么

```
public void delete(object parameter)
{
School1.Remove(...)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:11:27.220

将 ListBox 的[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem%28v=vs.95%29.aspx)绑定到一个属性并在您的 Remove() 中使用它：

```
 <ListBox ItemsSource="{Binding School1, Mode=TwoWay}" 
          DisplayMemberPath="SchoolName"  
          SelectedItem={Binding SelectedSchool}
          Name="listBox1"  
          />

public void delete(object parameter)
{
    if (SelectedSchool != null)
        School1.Remove(SelectedSchool);
} 
```

另请注意，您的问题有些重复：[Clearing selecteditem of listbox (which is bound to collection of objects) with MVVM](https://stackoverflow.com/questions/4653388/clearing-selecteditem-of-listbox-which-is-bound-to-collection-of-objects-with)

# php - MySQL 缓存，直到 10 分钟前才刷新更新

> ID：13339073
> 
> 赞同：1
> 
> 时间：2012-11-12T06:05:51.067
> 
> 标签：php, mysql, caching

是否有可能使 MySQL 在表更新时不刷新缓存，并在刷新缓存之前保持缓存至少 10 分钟？

基本上，我正在缓存一个分析大约 200k+ 记录并返回 10 行数据的查询。查询大约需要 1.5 - 3 秒。我正在使用 SQL_CACHE 来缓存该查询，第一次之后需要 0.007(+-) 秒。表更新非常频繁（不到一分钟内多次）。所以我想让 MySQL 在刷新缓存查询以重新计算之前将缓存保留至少 10 分钟。

顺便说一句，查询数据对于网站上的每个用户都是唯一的。

我正在使用 Codeigniter 框架，我知道他们有一个内置的查询缓存功能，但是它是基于文件系统的。这就是为什么我更喜欢 MySQL 的缓存功能...

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:16:56.200

三件事会导致从 MySQL 缓存中删除内容：

1.  没有足够的空位
2.  查询背后的数据发生了变化
3.  MySQL进程重新启动

您对#1 有相当程度的控制，因为您可以更改缓存大小。但是，其他查询仍然会占用缓存空间。我不知道控制 #2 有多重要。您可能希望使用它`SELECT SQL_NO_CACHE`来阻止那些进入缓存。

从事物的声音来看，MySQL 并没有为您提供以您想要的方式缓存事物所需的东西。

您是否考虑过优化查询？在那张纸条上，你能发布实际的查询吗？

# iphone - 在录制过程中按下主页按钮时，红色横幅突然出现并消失

> ID：13339078
> 
> 赞同：2
> 
> 时间：2012-11-12T06:06:55.227
> 
> 标签：iphone, ios

我在录制过程中遇到一个问题，如果我按下主页按钮，我注意到“**红色横幅突然出现并消失**”并且 AVAudioRecorder 无法正确创建文件。请帮忙**看看这是什么？**. 是否与网络连接相关？

![在录制过程中按下主页按钮时，红色横幅突然出现并消失](../Images/21278f3644210c1dd97ab9d268a44cd4.png)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:22:51.087

“红色横幅”表示您的应用程序当前正在使用麦克风硬件。它由对主录制上下文具有主动控制的应用程序显示，并在您的应用程序释放它对录制上下文的保留时隐藏（例如按下主页按钮时）。因为您无法预测何时按下主页按钮退出您的应用程序，您将需要支持后台录制以保留横幅（然后在一两秒后优雅地释放您的上下文以使状态栏动画回黑色），或者在应用程序关闭之前以某种方式终止您的上下文。

# gmail - 在 Flask 中实现 Gmail 身份验证

> ID：13339083
> 
> 赞同：0
> 
> 时间：2012-11-12T06:08:05.740
> 
> 标签：gmail, openid, flask

我正在努力在 Flask 应用程序中设置 Gmail 身份验证。Flask有[这个](http://packages.python.org/Flask-OpenID/)扩展 - 但我找不到一个清晰的想法，我将如何使用它来让人们使用他们的 Gmail 帐户登录应用程序。任何指针？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:31:27.753

这可能会给你一个想法

[https://developers.google.com/gdata/faq#GmailAtomFeed](https://developers.google.com/gdata/faq#GmailAtomFeed)

它说

“Gmail 有数据 API 吗？没有，但您可以使用[http://gmail.google.com/support/bin/answer.py?answer=13465](http://gmail.google.com/support/bin/answer.py?answer=13465) Gmail 的 Atom 提要和 AuthSub 或 OAuth 1 请求只读访问用户的未读消息。范围应设置为[https://mail.google.com/mail/feed/atom/](https://mail.google.com/mail/feed/atom/)。示例查询为：

获取[https://mail.google.com/mail/feed/atom/](https://mail.google.com/mail/feed/atom/) "

# php - PHP时间戳日期到用户时区

> ID：13339086
> 
> 赞同：8
> 
> 时间：2012-11-12T06:08:23.960
> 
> 标签：php, date, datetime, timestamp

我从数据库中提取 $item_date 的原始生成 mysql 时间戳信息作为 php 日期格式：

```
if (($timestamp = strtotime($item_date)) === false) {
    echo "The timestamp string is bogus";
} else {
    echo date('j M Y h:i:sA', $timestamp);
} 
```

服务器区域 (UTC) 之后的输出：

> 2012 年 11 月 12 日下午 5:54:11

但我希望它根据用户时区进行转换

示例：假设用户的时间是**2012 年 11 月 13 日上午 7:00:00（格林威治标准时间 +0800）**，服务器时间是**2012 年 11 月 12 日晚上 11:00:00（UTC）**，$item_date 的时间戳是**2012 年 11 月 12 日晚上 10:30:00 (UTC)**所以

使用**(UTC)**的用户将看到 $item_date 为：

> 2012 年 11 月 12 日晚上 10:30:00

(+0800 GMT) 的用户将看到 $item_date 为：

> 2012 年 11 月 13 日下午 06:30:00

我该如何完成？谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-12T07:06:57.813

**这篇文章已更新为包含一个完整的示例**

```
<?php
    session_start();

    if (isset($_POST['timezone']))
    {
        $_SESSION['tz'] = $_POST['timezone'];
        exit;
    }

    if (isset($_SESSION['tz']))
    {
        //at this point, you have the users timezone in your session
        $item_date = 1371278212;

        $dt = new DateTime();
        $dt->setTimestamp($item_date);

        //just for the fun: what would it be in UTC?
        $dt->setTimezone(new DateTimeZone("UTC"));
        $would_be = $dt->format('Y-m-d H:i:sP');

        $dt->setTimezone(new DateTimeZone($_SESSION['tz']));
        $is = $dt->format('Y-m-d H:i:sP');

        echo "Timestamp " . $item_date . " is date " . $is . 
             " in users timezone " . $dt->getTimezone()->getName() .
             " and would be " . $would_be . " in UTC<br />";
    }
?>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jstimezonedetect/1.0.4/jstz.min.js"></script>
<script language="javascript">
  $(document).ready(function() {
        <?php if (!isset($_SESSION['tz'])) { ?>
            $.ajax({
                type: "POST",
                url: "tz.php",
                data: 'timezone=' + jstz.determine().name(),
                success: function(data){
                    location.reload();
                }
            });

        <?php } ?>        
    });
</script> 
```

我希望这现在已经足够清楚了；）。

# rest - 开始使用 Rally REST Web 服务 API

> ID：13339089
> 
> 赞同：5
> 
> 时间：2012-11-12T06:08:50.867
> 
> 标签：rest, rally

在开始从 .NET MVC Web 客户端调用 Rally REST Web 服务方面获得了一些帮助。

我在这里得到了网络服务信息：

[https://rally1.rallydev.com/slm/doc/webservice/](https://rally1.rallydev.com/slm/doc/webservice/)

所以我可以看到我可以使用 URL 来访问来自 Rally 的信息 - 类似于：

```
https://rally1.rallydev.com/slm/webservice/1.39/task?query=((Owner.Name
= owner@blah.com.au) and (State != Completed))&order=Rank&fetch=true&stylesheet=/slm/doc/webservice/browser.xsl 
```

但是我不清楚的是如何在提出请求之前进行身份验证？

我是 REST Web 服务的新手（不久前已经完成了 SOAP/WSDL） - 所以对于 REST，您似乎不应该添加对某些东西的引用来创建客户端类？这个对吗？您只需使用 URI 创建一个 HTTPRequest - 并进行调用，返回一个 HTTPResponse（我希望可以用它做一些事情）。

很多示例似乎都有特定的服务/api 类，它们正在调用方法或访问属性——所以我不确定这是因为它们使用的是 SOAP 而不是 REST——还是它们自己创建了它们。

也许我正在查看错误的文档，因为它似乎假设您知道如何进行身份验证。还是我缺少参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T21:27:46.457

我知道这个问题很老，但这可能对其他人有帮助。作为请求的一部分，您需要使用 base64 编码的用户名和密码传递基本身份验证标头`get()`。[我在Atlassian 文档页面](https://developer.atlassian.com/stash/docs/latest/how-tos/example-basic-authentication.html#Supplying_Basic_Auth_headers)上找到了此信息，并成功地将其应用于 Rally API 3.0（也应与 2.0 一起使用）。因此，在您的`get()`请求中，请包含类似于以下内容的标头：

`auth_header = 'Authorization : Basic ' + base64_encode('username:password')`

# asp.net-mvc - MVC.net与同域Web API站点共享表单认证登录的方法

> ID：13339091
> 
> 赞同：1
> 
> 时间：2012-11-12T06:08:58.413
> 
> 标签：asp.net-mvc, forms-authentication, asp.net-web-api, single-sign-on

我将在同一个域上运行一个 ASP.net MVC 网站 (example.com) 和一个 Web API 站点 (api.example.com)。使用表单身份验证允许用户登录到 MVC 站点并让`[Authorize]`API 站点中的过滤器接受该登录的最佳和最安全的方法是什么？此外，两个站点都可能托管在多台服务器上（每个服务器都可能有自己的子域），因此允许单点登录方法在集群中的所有服务器之间工作的解决方案将是首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:54:33.467

看看这个链接[http://www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms](http://www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms)这涵盖了详细的答案。

您需要确保站点上的所有机器和单独的应用程序共享一个通用（但对生产来说是唯一的）机器密钥，以允许所有机器/应用程序信任身份验证 cookie。

如果您只是在同一个子域下使用虚拟目录，那么简单地协调 web.conig Forms Auth 设置和机器密钥应该可以让您快速启动并运行。

如果您希望它在二级域之间工作，那么您需要更改表单的 Auth cookie 上的“域”设置。有关详细信息，请参阅文章。

# iphone - 在 iPad 中观看 PDF 中的视频

> ID：13339094
> 
> 赞同：1
> 
> 时间：2012-11-12T06:09:26.170
> 
> 标签：iphone, objective-c, ios, ipad, pdf-reader

我有一个嵌入视频的 PDF 文件，我需要在 iPad 应用程序中打开它。但现在的问题是 PDF 文件在 iPad 应用程序中是可读的，而视频文件只是显示为图像。我可以在我的代码中做一些事情来显示视频吗，我的意思是我的应用程序中的媒体播放器框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:15:11.417

它不起作用。您将无法播放 pdf 格式的视频。我认为嵌入式媒体是 Adob​​e 尚未公开的当前 PDF 规范的一部分。Adobe 保留最新最先进的版本，为其 Acrobat Pro 系列制作商业案例。

话虽如此，您可以尝试将其转换`.pdf`为`.html`，然后手动插入视频代码。

# php - 优化 PHP cURL 并爆炸

> ID：13339096
> 
> 赞同：0
> 
> 时间：2012-11-12T06:09:31.353
> 
> 标签：php, optimization, curl, explode

我正在使用 PHP 的 cURL 和 explode 方法从 Reddit 帖子页面远程提取赞成票。

这很慢，从按钮单击到数据返回之间需要几秒钟，我的问题是，我怎样才能加快速度？我在哪里可以优化这个？cURL 获取 URL 的速度是慢还是爆炸页面的速度慢？

以下是我如何定位 upvote div 并获取其内容：

```
function between($src, $start, $end){
    $txt = explode($start, $src);
    $txt2 = explode($end, $txt[1]);
    return trim($txt2[0]);
}

$title = between($data, '<div class="score unvoted">','</div>'); 
```

这是我用来从 Reddit 获取页面数据的函数。

```
function get_data($url) {
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T15:41:51.267

可能值得研究像[WebGrind](https://github.com/jokkedk/webgrind/)这样的分析工具，以查看慢速直接发生在哪里。

很可能是 cURL 减慢了您的页面速度，但如果没有分析，您无法确定。

# c++ - 什么时候有太多的动态数组是危险的？

> ID：13339098
> 
> 赞同：3
> 
> 时间：2012-11-12T06:09:43.530
> 
> 标签：c++, arrays, dynamic, disjoint-sets

我目前正在为处理城市和桥梁的任务编写代码。我必须在他们受人尊敬的地区打印城市和桥梁，例如：

```
//unorganized inputs from user given the # of "paths" we need
4       // the # of paths
1 2 5  // 1 = city , 2 = city, 5 = bridge length
6 7 5  // 6 = city , 7 = city, 5 = bridge length
2 3 7  // 2 = city , 3 = city, 7 = bridge length
6 9 7  // 6 = city , 9 = city, 7 = bridge length 
```

运行程序后，排序为：

```
first district
1 2 5
2 3 7

2nd district
6 7 5
6 9 7 
```

现在，我将通过 cin 读取这些输入。我想将所有可能的路径（例如 1 2 5）存储到一个数组中，然后通过程序对其进行排序和组织。问题是我可能有超过 500,000 条来自用户的路径。我想创建 500k 动态数组。这会导致内存方面的严重问题吗？

我已经研究了解决这个问题的其他可能方法，例如 kruskal 算法和不相交集（我认为是最有用的）。我很难理解不相交集的编码，我想我尝试一种我更熟悉的方式。

任何关于在哪里存储值以及比较和组织它们的帮助都会很棒。链接到我阅读这方面信息的地方会有所帮助。在过去的几天里，我读了很多书。没有多大帮助。

总结一下，我的问题是：

*   500k 的动态数组会不会在内存方面造成严重的问题？
*   在给定路径的情况下，在哪里存储值并比较和组织它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:26:24.347

> 500k 的动态数组会不会在内存方面造成严重的问题？

没问题，假设每个只是一个 3 个整数的数组。通常，您会避免将其作为单独的分配进行，因为它过多——它会有点慢，并且所需的簿记也会消耗相当多的内存。有一个更好的方法：

> 在给定路径的情况下，在哪里存储值并比较和组织它们？

我将从一个包含这 3 个字段的结构/类开始，然后使用其中的一个`std::vector`。这会将您的所有值存储为一个连续的分配。相比之下，创建、搜索和分配速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:27:35.823

一般来说，假设您的应用程序有 2 gigs 的内存，那么 12 字节的 500K 记录（假设您的值使用 32 位）不会有问题。
如果您希望减少数据集大小，例如，您可以使用如下数据格式：

```
struct {
   unsigned short city_a;
   unsigned short city_b; 
   char length;
} 
```

查看城市集的大小（城市数量），以及两个城市之间的最大长度。
此外，索引城市对（AB 变为 Pair_ID）之类的东西也可以减少数据集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:57:11.987

这可能与您的问题没有直接关系，但我认为您要完成的是 - [http://en.wikipedia.org/wiki/Connected_component_(graph_theory](http://en.wikipedia.org/wiki/Connected_component_(graph_theory) )。如果您将图形建模为邻接矩阵，则无需分配 500k 动态数组。考虑以下格式来存储您的数据：

```
int city_map [MAX_NO_OF_CITIES][MAX_NO_OF_CITIES];

city_map[i][j] = length_of_brigde_connecting_city_i_to_j; 
```

这种方式存储 500,000 个条目只需要 1MB 多一点的内存。

# c# - 带有消息队列的发布订阅者模型库

> ID：13339099
> 
> 赞同：3
> 
> 时间：2012-11-12T06:09:47.577
> 
> 标签：c#, mqtt, data-distribution-service

我有一个 C# 桌面插件应用程序，我需要 dds 实现插件通信，我尝试了 openslicdds、opendds 和 MQTT 消息传递协议。

我找不到轻量级的解决方案，主要是因为需要与我的应用程序一起安装的轻量级 C# 服务器不可用，或者它们中的大多数都依赖于 cygwin。

我们也希望这必须用 mono 编译才能在 linux 中运行。

我也尝试过使用 MSMQ，但默认情况下未启用它，也不支持发布订阅模式。

如果有的话，请向我推荐一个轻量级的免费解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:39:48.060

RSMB（“真正的小型消息代理”）是一个免费、小巧且非常简单的 MQTT 服务器。我们在 IBM 的大量演示以及小型传感器和移动项目中使用它（上限为 1024 个并发连接）。您可以在此处下载适用于 windows (160KB) 和其他操作系统的二进制文件 [https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=d5bedadd-e46f-4c97-af89-22d65ffee070](https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=d5bedadd-e46f-4c97-af89-22d65ffee070)

RSMB 还可以在 Mac OSX、linux/x86、linux/arm 和其他操作系统上运行。

对于客户端，我建议使用 Eclipse Paho C 客户端，它在 Visual Studio / C# [http://eclipse.org/paho中构建得很好](http://eclipse.org/paho)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:27:58.257

我发现 Mosquito 项目（http://mosquitto.org/）是实现 MQTT（http://mqtt.org/）的轻量级项目，包括服务器在内的总安装量仅在 windows.got C# 客户端解决方案中为 747 KB。[http://sourceforge.net/projects/mqttdotnet/](http://sourceforge.net/projects/mqttdotnet/)

# xml - cvc-complex-type.2.4.a：发现无效内容

> ID：13339103
> 
> 赞同：0
> 
> 时间：2012-11-12T06:10:06.710
> 
> 标签：xml, xsd

我的架构是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"     attributeFormDefault="unqualified">
<xs:element name="Details">
<xs:complexType>
  <xs:sequence>
   <xs:element name="create_Date" type="xs:date" maxOccurs="1" />
  </xs:sequence>
</xs:complexType> 
```

XML 文档：

```
<Details xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<create_date>2009-06-04</create_date>
</Details> 
```

我收到异常，因为 XML 文档有错误：true cvc-complex-type.2.4.a：发现以元素“create_date”开头的无效内容。应为“{create_Date}”之一。

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:12:41.943

XML 区分大小写。

你需要`create_Date`像你定义的那样使用它。

# jquery - 如何制作一系列元素来检查它之前的元素是否处于活动状态？

> ID：13339105
> 
> 赞同：0
> 
> 时间：2012-11-12T06:10:14.020
> 
> 标签：jquery, web, element

用文字解释这非常复杂，但我正在尝试创建一个系统，其中我有一个元素（图像中的数字 1）源于另一个元素。在某些情况下，例如元素二，它可能源于两个方向。我希望能够激活这些元素，但前提是链接到它的元素被激活。

![珠子示例](../Images/74bbbb4217c1f2b40eef4480e9eb0f83.png)

例子：

现在可以激活元素二右侧的元素，但如果元素二未激活，我必须先激活元素一。

我想过使用数据属性并给他们一个数字并检查之前的数字是否处于活动状态，但问题是有时它会分成两个、三个或更多。有什么办法可以做到这一点？任何建议都会很棒，我只是想不出一种检测这种情况的方法，在此先感谢！

附加信息：

基本思想是，在您激活该元素之前，必须有一个激活的触摸元素（深蓝色）。在下图中，您可以看到到达元素 A 的两种不同方式，同时查看深蓝色线条，您可以看到现在可以激活哪些其他元素。

![在此处输入图像描述](../Images/2f6e3e35d0dd633e6ef5c3375f144050.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:17:45.897

我建议在页面加载时构建一个图表，然后在页面的整个生命周期中使用该图表来跟踪已激活的内容等。

图表的基本节点如下所示：

```
var node = {
   adjacent : [], // list of adjacent nodes (depending on your use case, you might not need this
   previous : prevNode, // previous node (for node2, it is node1)
   isActive : false,
   activate : function(){ 
       // code that checks previous and activates the current node
       // if previous is not active, it can call previous.activate()
       // which will then activate prevNode and its dependencies
   }
} 
```

# iphone - ios Sharpoint 集成 [sharpoint 作为后端]

> ID：13339107
> 
> 赞同：0
> 
> 时间：2012-11-12T06:10:29.667
> 
> 标签：iphone, ios, web-services, sharepoint

我的后端有**sharpoint 服务，我**想在我的 IOS 应用程序中使用它。

在哪个术语中，我会响应以**XML 或 JSON**支持 IOS ？

我是Sharpont集成的newbei。

任何人都可以在这个问题上支持我吗？

需要一些**步骤 如何在 IOS 中使用我的网站 Sharepoint**响应它支持哪个响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T18:48:00.957

看看这个项目，它支持 SharePoint 2013 RestAPI，但是它使用更适合 MS SharePoint Online 的声明协议进行身份验证。 [https://github.com/jimmywim/SPRESTAPI](https://github.com/jimmywim/SPRestAPI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T05:25:06.703

上述答案的附加信息：

默认情况下，SPRESTQuery 类提供 XML 格式的响应。如果你想得到 JSON 格式的响应，那么在 executeQuery 方法中写下这一行

需要添加的行：

[apiRequest setValue:@"application/json;odata=verbose" forHTTPHeaderField:@"Accept"];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:10:10.307

如果您有 SharePoint 2010，那么您很幸运，因为您可以使用 Sharepoint 的“Restful API”——发送 HTTP 请求并接收 JSON 或 XML 数据作为响应。你会在这里的文档中找到很多答案：http: [//msdn.microsoft.com/en-us/library/ff798339.aspx](http://msdn.microsoft.com/en-us/library/ff798339.aspx)

# matlab - imagesc 将背景颜色更改为白色 matlab

> ID：13339122
> 
> 赞同：2
> 
> 时间：2012-11-12T06:12:59.767
> 
> 标签：matlab

我有一个大小为 150 x 150 的过滤器使用 imagesc 绘制过滤器时，背景为绿色

最小值 = -1.5；最大值 = +1.5；

图像中零的 RGB 索引（绿色）为 0.5,1,0.5

我想将图像中的所有索引“0”/背景颜色更改为白色，同时尽可能保留其余部分。

尺寸（颜色图）：64 3

我尝试了以下方法，但它似乎不适用于我的图像： [matlab's imagesc background color](https://stackoverflow.com/questions/7773796/matlabs-imagesc-background-color)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:46:43.677

这是我的解决方案。直方图图像强度，找到最接近零的那些，然后将其设置为白色。例如：

```
 m=peaks(100); % generate data
 imagesc(m);   

 colormap_range=64; % default colormap_range is 64, but change it to your needs
 [n,xout] =hist(m(:),colormap_range);   % hist intensities according to the colormap range
 [val ind]=sort(abs(xout)); % sort according to values closest to zero
 j = jet;
 j(ind(1),:) = [ 1 1 1 ]; % also see comment below
 % you can also use instead something like j(ind(1:whatever),:)=ones(whatever,3); 
 colormap(j); 
```

而不是`sort`你可以使用`min`，但我认为通过排序你还可以编辑更多的内容，而不是使用额外的行，例如，`j(ind(1:3),:)=ones(3);`。下图是用这个完成的......

![在此处输入图像描述](../Images/8905c7db072347304a285ba26752f279.png)

# ios - 读取从应用内购买服务器下载的文件

> ID：13339125
> 
> 赞同：2
> 
> 时间：2012-11-12T06:13:09.080
> 
> 标签：ios, path, download, in-app-purchase

我想为 ipad 构建一个看起来像 ibook 的应用程序，但现在我不知道我的用户是否从我的应用内购买服务器下载了一本书，我在哪里可以在我的程序中找到该书的文件。换句话说，需要我为将要下载的文件设置路径，或者操作系统会帮助我将它保存在某个地方吗？？？

如果你知道编程的细节或者别的什么，请给我看看，谢谢！！！</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T01:39:18.280

iOS 不会帮助您跟踪用户是否下载了文件——您需要在您的应用程序中跟踪这一点。您可以允许用户“恢复购买”，但这只会检查是否进行了应用内购买 - 它不会检查用户是否已经下载了文件。

查看本指南，了解整个过程是如何工作的，通过下载进行应用内购买：

[http://xinsight.ca/blog/iap-content-download-in-ios6/](http://xinsight.ca/blog/iap-content-download-in-ios6/)

另外一点：Apple 的指导方针规定，如果你有一本书，你应该在 iBookstore 上发布它，而不是作为一个应用程序。

# java - 既作为文本字段又作为组合框的字段

> ID：13339129
> 
> 赞同：0
> 
> 时间：2012-11-12T06:13:54.490
> 
> 标签：java, swing, user-interface, jcombobox, jtextfield

基本上我需要一个字段（用于 Swing），如果指定的数据不在`Combo-box`. 如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T06:18:10.283

查看[挥杆教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)中的“可编辑组合框” 。

基本上，您需要`setEditable(true)`为您的组合框使用。从 API 文档：

> 确定 JComboBox 字段是否可编辑。可编辑的 JComboBox 允许用户在字段中键入或从列表中选择一个项目来初始化字段，之后可以对其进行编辑。（编辑只影响字段，列表项保持不变。）不可编辑的 JComboBox 在字段中显示所选项目，但无法修改选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T06:21:45.263

您可以使用可编辑组合框：

片段表单[如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)：

```
JComboBox patternList = new JComboBox(patternExamples);
patternList.setEditable(true);
patternList.addActionListener(this); 
```

看看简单的[例子](http://www.java2s.com/Code/Java/Swing-JFC/EditableComboBox.htm)

# ruby - Ruby Zip #glob 方法似乎正在选择一个目录。为什么？

> ID：13339130
> 
> 赞同：0
> 
> 时间：2012-11-12T06:14:14.383
> 
> 标签：ruby, rubyzip

我正在使用 RubyZip 访问 Zip 目录中的文件。

```
Zip::ZipFile.open(self.package.to_s) do |zipfile|
    zipfile.glob("**/*.*").each {|file| update_or_save(file)}
end 
```

RubyZip 具有与 Ruby Dir#glob 类似的#glob 方法。根据[我对](http://ruby.about.com/od/beginningruby/a/dir2.htm)这种方法的理解，

```
.glob("**/*.*") 
```

应该在 Zip 文件夹的子目录中创建一个包含所有文件的数组。这对 mot 部分很有用，但我现在遇到了一个错误，其中一个目录似乎包含在数组中。

```
test dvd/02 Vision Seminars and TOTs/1 TOT I/TOT I Handouts/Hungary Dr. Anna handouts/ 
```

为什么这里包含一个目录？如果需要，我可能会在此处添加救援，但我对为什么首先添加此目录感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:17:45.480

该目录名称与您提供给该`#glob`方法的模式相匹配。`.`该模式仅在 zip 文件的任何级别查找包含字符的文件或目录名称。

# objective-c - NSArray 的 @[object] 注释

> ID：13339131
> 
> 赞同：0
> 
> 时间：2012-11-12T06:14:32.820
> 
> 标签：objective-c, cocoa, xcode4.5, xcode4.4

我碰巧看到一个特定的代码，

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

注释的名称是什么`@[indexPath]`，我从来没有见过这种。并且自从它在objective-C中引入以来。我知道它取代了`[NSArray arrayWithObjects:indexPath,nil]`，还有其他功能吗？使用它的功能是什么（嗯，除了更短）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:20:06.060

这是对带有 LLVM 的 Objective-C 中可用的“文字”的扩展。我不相信除了创建一个数组之外它不会做任何其他事情。它们随 Apple LLVM 4.0 一起提供。

如果您想查看所有可用的文字，请查看[http://clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html) - 它们非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:21:23.490

这是在 Xcode 4.4 中使用文字的新方法我猜没有其他好处，但它的新编码风格

很少有参考资料，我希望这能消除您的一些疑虑。

```
int a = 2;
int b = 5;
NSNumber *n = @(a*b); 
```

`@blah`被称为“文字”语法。您可以使用它来制作包装文字的对象，例如 char、BOOL、int 等，这意味着：

*   `@42`是一个装箱的 int
*   `@'c'`是一个盒装字符
*   `@"foo"`是一个盒装字符*
*   `@42ull`是一个盒装的 unsigned long long
*   `@YES`是一个盒装的 BOOL

at 符号后面的所有内容都是原始值。`MyEnumValue`不是文字。这是一个象征。为了适应这一点，引入了通用装箱语法：

`@(MyEnumValue)`

你可以在括号内放一堆东西；在大多数情况下，任何类型的变量或表达式都应该起作用。

# django - Django 1.4 部署问题

> ID：13339140
> 
> 赞同：1
> 
> 时间：2012-11-12T06:16:24.500
> 
> 标签：django, apache

我为我的项目 muvidb_backup 做了一个构建。

在 bin 文件夹中有 django.wsgi 文件

这个文件看起来像：

```
import sys
sys.path[0:0] = [
  '/home/abhilash/Documents/muvidb_backup/eggs/ipython-0.13.1-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/django_grappelli-2.4.3-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/django_markitup-0.5.2-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/django_robots-0.7.0-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/django_filebrowser-3.5.1-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/BeautifulSoup-3.2.0-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/Markdown-2.2.1-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/djangorecipe-1.3-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/Django-1.4-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/zc.recipe.egg-1.3.2-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/zc.buildout-1.6.3-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup/eggs/setuptools-0.6c12dev_r88846-py2.7.egg',
    '/home/abhilash/Documents/muvidb_backup',
  ]

import djangorecipe.wsgi

application = djangorecipe.wsgi.main('muvidb_backup.development', logfile='') 
```

我的 Apache 配置文件是：

```
<VirtualHost *:8080>
DocumentRoot "/home/abhilash/Documents/muvidb_backup"
<Directory "/home/abhilash/Documents/muvidb_backup">
    allow from all

    Options +Indexes
</Directory>

Alias /static/admin/ "/home/abhilash/Documents/muvidb_backup/muvidb_backup/static/admin"

WSGIScriptAlias / /home/abhilash/Documents/muvidb_backup/bin/django.wsgi
</VirtualHost> 
```

我的 Seetings.py 文件

```
STATIC_ROOT = os.path.join(os.path.dirname(__file__), 'static')

STATIC_URL = '/static/'

ADMIN_MEDIA_PREFIX = '/static/admin/' 
```

为什么 Localhost:8080/admin/ 没有加载管理 css 和 js 文件？

在静态文件夹中，我有 admin/css 和 js 文件夹。

更多在 url.py 我有一个快速代码来获取静态文件

```
if settings.DEBUG:
    urlpatterns += patterns('',
    (r'^media/(?P<path>.*)$', 'django.views.static.serve',
     {'document_root': settings.MEDIA_ROOT}),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve',
     {'document_root': settings.STATIC_ROOT}),
) 
```

谁能帮我 ？？？

# codeigniter - 正确的是在 codeigniter 中使用 set_flashdata

> ID：13339148
> 
> 赞同：0
> 
> 时间：2012-11-12T06:17:05.803
> 
> 标签：codeigniter

当我尝试在重定向后不存在的方法中设置闪存数据时。这是一个例子：

```
function logout()
{
   $this->session->set_flashdata('auth_msg', 'you have been logged out');
   redirect('admin/login');
} 
```

问题是当我在 flashdata 中检查 auth_msg 的值时，它不存在并且用户指南并没有真正显示在使用它时使用什么方法。与我正在尝试做的事情一起使用的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:49:03.927

原因是因为闪存数据使用会话。

您刚刚破坏了您的`logout()`功能上的会话（我猜）。

因此，这是您不能在应用程序中使用 flashdata的*一个地方。*

在其他地方尝试它，它应该像你编码的那样工作。

# r - 传递字符参数并评估

> ID：13339157
> 
> 赞同：6
> 
> 时间：2012-11-12T06:18:07.507
> 
> 标签：r

我有一个逻辑运算符和一个数值，我想将其作为单个元素传递给函数中的语句（我听到数百名 R 用户在抱怨；我从不这样做，但有一种情况我觉得可以）。

```
DF <- mtcars
overlap = "> 2"
as.numeric(rowSums(DF[, 1:6]) overlap) 
```

我怎样才能使第三行像这样工作：

```
as.numeric(rowSums(DF[, 1:6]) > 2) 
```

我知道这很可能`eval`，`parse`但从不使用它们，所以不太了解如何在这里使用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T06:27:44.000

就像是

```
Olap <- unlist(strsplit( overlap, " "))
Thresh <- as.numeric(Olap[2])
Comp <- match.fun(Olap[1])
Comp(rowSums(DF[,1:6]), Thresh) 
```

另一种方法是 eval 并按照您的建议进行解析

```
What <- rowSums( DF[,1:6])

 textcall <- sprintf(" What %s", overlap)

 exprcall <- parse(text = textcall)

 eval( exprcall) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T09:02:45.927

您必须将整个表达式转换为字符串，然后将解析后的文本转换为表达式。最后，在表达式上调用 eval()。

例如：

```
overlap <- "> 2"

# Convert to string
exprAsString <- paste0("as.numeric(rowSums(DF[, 1:6]) ", overlap, ")")

# Convert to expression, using parse
expr <- as.expression(parse(text=exprAsString))

# Then call eval()
eval(expr) 
```

**确认它有效：**

```
identical(eval(expr), as.numeric(rowSums(DF[, 1:6]) > 2))
# [1] TRUE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:12:42.317

令我震惊的是，虽然 @mnel 的解决方案很好，但这种情况可以通过在主函数中创建一个虚拟函数并使用输入字符串 ( `overlap`) 作为 modify 的参数来解决`body(dummy_function)`。那可能会干净得多。

# c# - 错误代码 40162 是什么意思？

> ID：13339167
> 
> 赞同：2
> 
> 时间：2012-11-12T06:19:17.897
> 
> 标签：c#, .net, entity-framework, linq-to-entities

我从我们的日志中看到了这一点，我在各种搜索引擎中搜索了这个错误，但我一无所获。这里是：

> 执行命令定义时发生错误。有关详细信息，请参阅内部异常。服务在处理您的请求时遇到错误。请再试一次。错误代码 40162。当前命令出现严重错误。结果，如果有的话，应该丢弃。

我认为这发生在执行一个 LINQ 语句，我们正在根据堆栈跟踪从数据库中检索项目。

# iphone - 为 iPhone 和 iPad 设置 Unity

> ID：13339170
> 
> 赞同：3
> 
> 时间：2012-11-12T06:19:28.840
> 
> 标签：iphone, ipad, monodevelop, unity3d

我是团结的新蜜蜂，正在开发一个可用于 iPhone 和 iPad 的应用程序。我构建了这个并默认安装在 iPhone 上的设备上，我不知道如何以及在哪里为 iPad 启用它，就像在 xcode 设置中我们更改为通用应用程序一样。很抱歉这个愚蠢的问题，但我在团结方面是盲目的，请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:01:05.697

在顶部（工具栏）单击文件，然后单击构建设置。完成后，转到新窗口的按钮并单击播放器设置。然后，如果检查器窗口发生更改并向您显示可以更改的不同内容，那么您已经完成了，在配置选项卡下有一个目标目标设备设置。将其设置为 Ipad/Iphone。

# java - Spring JDBC中如何组合多个参数源？

> ID：13339171
> 
> 赞同：14
> 
> 时间：2012-11-12T06:19:33.573
> 
> 标签：java, spring, spring-jdbc

Spring JDBC 中的数据库方法接受单个参数源。例如 -

```
int org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.update(String sql, SqlParameterSource paramSource) throws DataAccessException 
```

是否可以将多个参数源组合在一起？例如，假设我有一个豆子`Order`——

```
class Order {
int id;
float price;
int customerId;
Date date;
//Lots of other fields
} 
```

我想用一些额外的字段来保存这个 bean，比如`recordModificationTime`和`accessLevel`。

如果我使用`MapSqlParameterSource`这些存在于 bean 之外的额外字段，我将无法使用`BeanPropertySqlParameterSource`，因为该方法只接受一个参数源。必须使用`MapSqlParameterSource`我的所有数据意味着我必须手动提取所有 bean 属性，这是很多工作。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-12T09:37:44.320

您可以扩展`AbstractSqlParameterSource`和聚合 BeanProperty 和 Map 版本：

```
public class CombinedSqlParameterSource extends AbstractSqlParameterSource {
  private MapSqlParameterSource mapSqlParameterSource = new MapSqlParameterSource();
  private BeanPropertySqlParameterSource beanPropertySqlParameterSource;

  public CombinedSqlParameterSource(Object object) {
    this.beanPropertySqlParameterSource = new BeanPropertySqlParameterSource(object);
  }

  public void addValue(String paramName, Object value) {
    mapSqlParameterSource.addValue(paramName, value);
  }

  @Override
  public boolean hasValue(String paramName) {
    return beanPropertySqlParameterSource.hasValue(paramName) || mapSqlParameterSource.hasValue(paramName);
  }

  @Override
  public Object getValue(String paramName) {
    return beanPropertySqlParameterSource.hasValue(paramName) ? beanPropertySqlParameterSource.getValue(paramName) : mapSqlParameterSource.getValue(paramName);
  }

  @Override
  public int getSqlType(String paramName) {
    return beanPropertySqlParameterSource.hasValue(paramName) ? beanPropertySqlParameterSource.getSqlType(paramName) : mapSqlParameterSource.getSqlType(paramName);
  }
} 
```

现在像这样使用它：

```
CombinedSqlParameterSource mySource = new CombinedSqlParameterSource(myOrder);
mySource.addValue("recordModificationTime", time);
mySource.addValue("accessLevel", level);

jdbcTemplate.update(sql, mySource); 
```

# c++ - 如何限制对基类的一部分的访问？

> ID：13339176
> 
> 赞同：0
> 
> 时间：2012-11-12T06:20:10.310
> 
> 标签：c++, inheritance

我试图只使用基类的特定部分，而隐藏其他部分。考虑以下代码：

```
struct IX
{
    // ...
};

struct IY
{
    // ...
};

class Base :
    public IX,
    public IY
{
    // Implements IX and IY.
    // ...
};

// Reuse IX implementation, but don't expose IY.
//
class X : protected Base
{
public:
    using Base::IX; // <-- Doesn't exist in C++.
}; 
```

我可以享受由`IX`提供的实现`Base`，但不暴露`IY`接口吗？

当然，我可以输入`using Base::IX::xxx`所有存在于`IX`. 或者，我可以像这样将所有调用转发到实现：

```
//
class X : public IX
{
public:
    // Forward all calls to IX methods to m_p.
    // ...

protected:
    Base* m_p;
}; 
```

但同样，我必须键入所有可用的方法`IX`才能转发它们。而且每次`IX`更改，我都必须更新`X`.

谢谢。

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:33:38.653

好吧，基本上实现`IX`并`IY`在您的`class X`. 您可以在类中将访问器和修饰符公开为公共方法。

另一种方法是从 Base 公开 IX：

```
class Base : public IX, protected IY
{
    // Implements IX and IY.
    // ...
    // Expose access to IY through base for the class 
    // inheriting from Base
};

class X : public Base 
```

另一种可能性是不继承`IX`，`IY`而是将它们保留为您的公共成员`Base`：

```
class Base
{
public:
    IX member1;
    IY member2;
}; 
```

这样，您可以从 Base 受保护地继承，并且可以从您的`class X`for公开单个访问器和修饰符方法`member1`。

# python - 我如何将 PDFKt 与 django python 一起使用

> ID：13339177
> 
> 赞同：-1
> 
> 时间：2012-11-12T06:20:11.277
> 
> 标签：python, django, pdf

我需要处理上传的 PDF 空白表格，然后提取字段，然后将其保存在数据库中。

我可以使用命令行

`pdfkt myform.pdf dump_data_fields`但我不知道我在 django 能做什么

任何死亡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:30:08.200

它更像是一个 Python 的东西。您可以使用 Python`subprocess`包。它允许您使用它的标准输入、标准输出和标准错误启动子进程并与之交互。以下是如何在 Python（或 Django）中调用命令的示例：

```
from subprocess import check_output

command = 'pdfkt %s dump_data_fields' % path
output = check_output(command, shell=True)
# do some processing here on output 
```

# xaml - 如何设置控件托管 WinRT WebAuthenticationBroker.AuthenticateAsync 的 OAuth 登录对话框的样式？

> ID：13339178
> 
> 赞同：0
> 
> 时间：2012-11-12T06:20:14.003
> 
> 标签：xaml, oauth, windows-runtime, winrt-xaml

我正在使用 OAuth 在我的 WinRT 应用程序 (C#/XAML) 中对用户进行身份验证。一切正常，除了登录对话框显示在我似乎无法提供任何样式选项的控件中。

这是我的（伪）代码：

```
var requestUri = new Uri("my oauth request uri"), UriKind.RelativeOrAbsolute);
var callbackUri = new Uri("my oauth redirect uri", UriKind.RelativeOrAbsolute);
var authenticationResult = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, requestUri, callbackUri); 
```

对 AuthenticateAsync 的调用确保显示登录表单，但它显示在控件的中心，同时显示水平和垂直滚动条，看起来不太好。我想**为这个 Web 表单的这个宿主容器控件设置样式**。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:45:29.007

你不能改变`AuthenticationDialog`. 其他内置对话框（如`CredentialPicker`等）也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:09:24.530

您是连接到第三方服务还是拥有 oAuth 的服务器端？oAuth 提供者可以遵循指南使对话更漂亮。 [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj856911](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj856911)

# ios - UITextField clearButtonMode

> ID：13339180
> 
> 赞同：0
> 
> 时间：2012-11-12T06:20:53.970
> 
> 标签：ios, uitextfield

对于我以编程方式创建的三个文本字段，我将 UITextField 的 clearButtonMode 设置为 UITextFieldViewModeWhileEditing。它在前两个文本字段上运行良好。但不适用于最后一个领域。当我单击清除按钮而不是清除文本时，它正在隐藏键盘。谁能建议我在这里做错了什么？这是我的代码：

```
 UILabel *caption1 = [[UILabel alloc ]initWithFrame:CGRectMake(0,0,320.0, 50)];
    caption1.textAlignment =  UITextAlignmentCenter;
    caption1.textColor = [UIColor whiteColor];
    caption1.backgroundColor = [UIColor clearColor];
    caption1.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(14.0)];
    caption1.text = @"By Specialty";
    caption1.center=CGPointMake(160.0, 150.0);
    [self addSubview:caption1];

    SpecialtyBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [SpecialtyBtn addTarget:myController action:@selector(specialtyBtnPress) forControlEvents:UIControlEventTouchUpInside];
    SpecialtyBtn.frame = CGRectMake(0, 0, 300, 40);
    [SpecialtyBtn setTitle:@"(none)" forState:UIControlStateNormal];
    SpecialtyBtn.center=CGPointMake(160.0,185.0);
    [self addSubview:SpecialtyBtn];

    UILabel *caption2 = [[UILabel alloc ]initWithFrame:CGRectMake(0,0,320.0, 50)];
    caption2.textAlignment =  UITextAlignmentCenter;
    caption2.textColor = [UIColor whiteColor];
    caption2.backgroundColor = [UIColor clearColor];
    caption2.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(14.0)];
    caption2.text = @"Select Location (e.g. NN16 8XF)";
    caption2.center=CGPointMake(160.0, 240.0);
    [self addSubview:caption2];

    locationTF = [[UITextField alloc] initWithFrame:CGRectMake(0, 200, 300, 40)];
    locationTF.placeholder = @"(Current Location)";
    locationTF.textAlignment = UITextAlignmentCenter;
    locationTF.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    locationTF.backgroundColor=[UIColor whiteColor];
    locationTF.layer.cornerRadius = 10;
    locationTF.clipsToBounds = YES;
    locationTF.delegate = self;
    locationTF.clearButtonMode = UITextFieldViewModeWhileEditing;
    locationTF.center=CGPointMake(160.0,275.0);
    [self addSubview:locationTF];

    UILabel *caption3 = [[UILabel alloc ]initWithFrame:CGRectMake(0,0,320.0, 50)];
    caption3.textAlignment =  UITextAlignmentCenter;
    caption3.textColor = [UIColor whiteColor];
    caption3.backgroundColor = [UIColor clearColor];
    caption3.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(14.0)];
    caption3.text = @"Advanced Search (Consultant Name)";
    caption3.center=CGPointMake(160.0, 325.0);
    [self addSubview:caption3];

    interestsTF = [[UITextField alloc] initWithFrame:CGRectMake(0, 300, 300, 40)];
    interestsTF.placeholder = @"(none)";
    interestsTF.textAlignment = UITextAlignmentCenter;
    interestsTF.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    interestsTF.backgroundColor=[UIColor whiteColor];
    interestsTF.layer.cornerRadius = 10;
    interestsTF.clipsToBounds = YES;
    interestsTF.delegate = self;
    interestsTF.clearButtonMode = UITextFieldViewModeWhileEditing;
    interestsTF.center=CGPointMake(160.0,360.0);
    [self addSubview:interestsTF];

    UIButton *searchBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage* btnImg=[UIImage imageNamed:@"searchBtn.png"];
    [searchBtn setBackgroundImage:btnImg forState:UIControlStateNormal];
    [searchBtn addTarget:myController action:@selector(searchBtnPress) forControlEvents:UIControlEventTouchUpInside];
    searchBtn.frame = CGRectMake(0, 0, btnImg.size.width/2,btnImg.size.height/2);
    searchBtn.center=CGPointMake(160.0,420.0);

    [self addSubview:searchBtn]; 
```

# appfabric - AppFabric 缓存依赖

> ID：13339181
> 
> 赞同：0
> 
> 时间：2012-11-12T06:21:10.693
> 
> 标签：appfabric, appfabric-cache

有什么方法可以将对象放入具有依赖项的缓存中？

例如，如果我将 ObjectB 放入依赖于 ObjectA 的缓存中，那么当 ObjectA 过期或我删除它时，ObjectB 也会自动被删除？

我知道我可以创建区域和标记项目以创建我的依赖项，但我真的不想这样做，因为区域仅存在于集群中的一个缓存服务器上，这违背了分布式和可扩展缓存解决方案的要点.

如果我不能直接添加依赖项，我想我可以通过添加具有某种键命名约定的对象来创建依赖项来解决它。

例如。使用键“ObjectA ”
添加 ObjectA 使用键“ObjectA_ObjectB”添加 ObjectB

但是当我想使依赖于 ObjectA 的所有对象过期时，我需要根据密钥的通配符搜索来获取。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:08:37.343

不，目前 AppFabric API 不支持依赖项。不幸的是，也没有办法按照您建议的方式搜索密钥:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T06:56:13.453

虽然 AppFabric 是免费的，但如果您想构建可扩展的应用程序，这种初始成本优势并不是很有成效，因为 App Fabric 没有很多功能，例如数据库依赖功能。

正如您所提到的，基于键的依赖项将一个缓存项与缓存中的另一项相关联。当特定项目更改时，它会使相关项目无效。每当从缓存中删除或更新该项目时，关联的对象将过期。基于键的依赖是级联的。例如，如果 key1 依赖于 key2，key2 依赖于 key3，key3 依赖于 key4，那么移除 key4 将导致 key1、key2 和 key3 过期。

除了基于键的依赖项之外，您还可以使用其他依赖项，例如基于文件的（使您的缓存对象依赖于外部文件，如果文件被更新或删除，则缓存中的依赖对象被删除），数据库依赖关系（将缓存项目与数据库同步，因此数据库中的任何更改都会从缓存中删除依赖的缓存对象），自定义依赖关系（您可以根据应用程序逻辑使对象过期）。

[NCache 是一种分布式缓存软件](http://www.alachisoft.com/resources/articles/managing-data-relationships.html)，它就是这样一种产品，它可以根据您的应用程序需求提供一整套依赖项功能。

# php - 标签 ul 中的错误

> ID：13339183
> 
> 赞同：-1
> 
> 时间：2012-11-12T06:21:15.923
> 
> 标签：php, magento

我正在尝试执行如下代码

但在**ul**中显示错误 为

**语法错误：预期：exit、if、标识符、变量、echo、do、while、for、foreach、endforeach、declare、switch、break、continue、function、return、try、throw、use、global、unset、isset、empty , 类, 接口, 数组, {, include, include_once, eval, require, require_once, print, ';', +, -, !, ~, ++, --, @, new, static, abstract, final, ( , $**

我的代码是

```
<div class="footer">
    <div class="footer_top">
        <?php $helper = $this->helper('catalog/category') ?>
        <?php $counts=$helper->getStoreCategories()->count(); ?>
        <?php $cnt=0; $row=0; foreach ($helper->getStoreCategories() as $_category): ?>
             <?php if(($i==0)&&($cnt<$count)) ?>
                <?php $row++; ?>
                    <div class="footer_part">
                        <?php if($row==1):$no=4; ?>
                            <h2>Navigation</h2>
                        <?php else : $no=3; ?>
                            <h2></h2>
                        <?php endif ?>
                     <ul>
            <?php endif; ?>
            <li><a href="<?php echo Mage::getModel('catalog/category')->setData($_category->getData())->getUrl(); ?>" title="<?php echo $_category->getName() ?>"><?php echo $_category->getName() ?></a></li>
                <?php  $i++; if($i==$no):?>
                    <?php $i=0;?>
                    </ul>
                </div>
               <?php endif; ?>
       <?php endforeach ?>

       </div>
</div> 
```

任何人请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:09:52.123

我不是 100% 确定您要做什么，因为 $cnt 将始终等于 0，因此您实际上不需要检查`$cnt<$count`，因为 foreach 仅在数组/对象计数大于 0 时才会循环

```
<div class="footer">
    <div class="footer_top">
        <?php $helper = Mage::helper('catalog/category'); ?>
        <?php //$counts = $helper->getStoreCategories()->count(); ?>

        <?php $cnt = 0;
        $row = 0;
        $i == 0;
        foreach ($helper->getStoreCategories() as $_category): ?>
             <?php if (($i == 0)):  $row++; ?>
                <div class="footer_part">
                    <?php if ($row == 1): $no = 4; ?>
                        <h2>Navigation</h2>
                    <?php else : $no = 3; ?>
                        <h2></h2>
                    <?php endif; ?>
                    <ul>
             <?php endif; ?>
                        <li><a href="<?php echo $_category->getUrl(); ?>" title="<?php echo $_category->getName() ?>"><?php echo $_category->getName() ?></a></li>
            <?php $i++; ?>  
            <?php if ($i == $no):  $i = 0; ?>
                    </ul>
                </div>
           <?php endif; ?>
       <?php endforeach ?>

    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:29:24.603

也许 ：

```
<?php endforeach ;?> 
```

你错过`;`了倒数第三行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:30:39.897

我想你还有额外的

```
<?php end if ?> 
```

之后`<ul>`。

请检查...这是代码...

```
 <?php $helper = $this->helper('catalog/category') ?>
    <?php $counts=$helper->getStoreCategories()->count(); ?>
    <?php $cnt=0; $row=0; foreach ($helper->getStoreCategories() as $_category): ?>
         <?php if(($i==0)&&($cnt<$count)) ?>
            <?php $row++; ?>
                <div class="footer_part">
                    <?php if($row==1):$no=4; ?>
                        <h2>Navigation</h2>
                    <?php else : $no=3; ?>
                        <h2></h2>
                    <?php endif ?>
                 <ul>
        //(deleted one endif here)
        <li><a href="<?php echo Mage::getModel('catalog/category')->setData($_category->getData())->getUrl(); ?>" title="<?php echo $_category->getName() ?>"><?php echo $_category->getName() ?></a></li>
            <?php  $i++; if($i==$no):?>
                <?php $i=0;?>
                </ul>
            </div>
           <?php endif; ?>
   <?php endforeach ?> 
```

# c# - 用c#裁剪矩形

> ID：13339186
> 
> 赞同：5
> 
> 时间：2012-11-12T06:21:26.747
> 
> 标签：c#, graphics, rectangles, clip

我有一些代码可以生成带有随机角度的矩形：

![在此处输入图像描述](../Images/4ecc57f7944ed860ed1b591a11f068e0.png)

但我需要通过父边框切割子矩形，例如

![在此处输入图像描述](../Images/e99ef86ba411b2316b906ce4a21a6fc3.png)

我的代码： http: [//pastebin.com/b6ry8j68](http://pastebin.com/b6ry8j68)

任何人都可以帮我解决算法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:08:53.407

[使用SetClip](http://msdn.microsoft.com/en-us/library/661tzs47.aspx)属性非常容易。

基本上你需要添加这个代码：

```
 if (!pre_defined)
            {
                g.SetClip(new Rectangle(x, y, 600, 300));
            } 
```

就在绘制线命令之前。其中 x 和 y 是父矩形的坐标。这很容易从您的功能中获得。

这是有效的完整功能：

```
 public void drawRectangle(double Width, double Height, int A, bool pre_defined)
    {
        Graphics g = pictureBox1.CreateGraphics();
        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
        g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;

        System.Drawing.Brush brush = new System.Drawing.SolidBrush(Color.FromArgb(r.Next(0, 251), r.Next(0, 251), r.Next(0, 251)));
        Pen myPen = new Pen(brush, 2);
        myPen.Width = 2;
        int x = center.X;
        int y = center.Y;
        //top left
        P[0] = new PointF((float)Math.Round(x + (Width / 2) * Math.Cos(A) + (Height / 2) * Math.Sin(A)), (float)Math.Round(y - (Height / 2) * Math.Cos(A) + (Width / 2) * Math.Sin(A)));
        //top right
        P[1] = new PointF((float)Math.Round(x - (Width / 2) * Math.Cos(A) + (Height / 2) * Math.Sin(A)), (float)Math.Round(y - (Height / 2) * Math.Cos(A) - (Width / 2) * Math.Sin(A)));
        //bottom left
        P[2] = new PointF((float)Math.Round(x + (Width / 2) * Math.Cos(A) - (Height / 2) * Math.Sin(A)), (float)Math.Round(y + (Height / 2) * Math.Cos(A) + (Width / 2) * Math.Sin(A)));
        //bottom right
        P[3] = new PointF((float)Math.Round(x - (Width / 2) * Math.Cos(A) - (Height / 2) * Math.Sin(A)), (float)Math.Round(y + (Height / 2) * Math.Cos(A) - (Width / 2) * Math.Sin(A)));
        if (!pre_defined)
        {
            g.SetClip(new Rectangle(50, 50, 600, 300));
        }
        g.DrawLine(myPen, P[0], P[1]);
        g.DrawLine(myPen, P[1], P[3]);
        g.DrawLine(myPen, P[3], P[2]);
        g.DrawLine(myPen, P[2], P[0]);
    } 
```

**编辑：**
这不是一个完整的例子，因为这个只会将 Clip 设置为父宽度和高度。您需要修改函数以提供每个元素的宽度和高度。但是现在我正在查看您提供的图片，它看起来比我想象的要复杂。
您最终可能会存储所有随机值的数组，然后按大小对其进行排序，然后绘制所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T03:51:06.437

这是一个老问题，但有人可能仍然需要一个简单的解决方法。

最简单的解决方案是在定义尺寸的图形表面上绘制这些矩形，这样任何超出该尺寸或其边框的绘图路径都会被自动剪裁。从已定义大小的位图创建图形对象会将任何内容限制为该大小。之后可以将位图绘制到您的屏幕图形对象上，以便直接绘制到屏幕上。

请注意，此过程也用作双缓冲技术，有助于减少直接在屏幕上绘制时的闪烁效果。

以下示例显示了如何设置大小的图形对象。

请参阅：[有关 PaintEventArgs 覆盖的信息](https://docs.microsoft.com/en-us/dotnet/framework/winforms/controls/overriding-the-onpaint-method)

```
 ///<summary>
    ///  Most common method for painting to the screen. 
    ///  Available on all control class objects by overriding 
    ///  the OnPaint method of the base class.
    ///</summary>
    protected virtual new void OnPaint(PaintEventArgs e)
    {
        // We assume here that your control's screen graphics 
        // area is at least 500x400 to see the full results 
        // otherwise please resize your form or control to accommodate

        // Define your parent border size
        Size ParentBorder = new Size(400, 300);

        // Initialize a new bitmap having a size of ParentBorder and set 
        // it to the screen's pixel format. Setting the bitmap to the 
        // screens pixel format can save many milliseconds in processing 
        // due to pixel size conversions otherwise required 
        Bitmap Bmp = new Bitmap(ParentBorder.Width, ParentBorder.Height, Graphics.FromHwnd(IntPtr.Zero));

        // Next we create a graphics object tied to our bitmap for 
        // drawing our rectangles within a defined border
        Graphics BmpGfx = Graphics.FromImage(Bmp);

        //
        // Draw your rectangles here! A sample is below includes painting 
        // to the screen to illustrate this process
        //
        //
        // Rotate first rectangle 20 or transform as needed :)
        BmpGfx.RotateTransform(20);
        //
        // Sample 1: This one just shows a red rectangle near the center 
        // of the ParentBorder graphics object
        BmpGfx.DrawRectangle(new Pen(Color.Red), new Rectangle(new Point(100, -20), new Size(200, 200)));
        //
        // Reset back to normal transform
        BmpGfx.ResetTransform();
        //
        // Rotate second rectangle 60
        BmpGfx.RotateTransform(60);
        //
        // Sample 2: This one just shows a cropped blue rectangle at 
        // the borders
        BmpGfx.DrawRectangle(new Pen(Color.Blue), new Rectangle(new Point(145, -200), new Size(300, 300)));
        //
        // Reset back to normal transform for drawing a nice ParentBorder
        BmpGfx.ResetTransform();
        //
        // Border: This one just draws an Orange border around the ParaentBorder 
        // of the Bmp graphics object
        BmpGfx.DrawRectangle(new Pen(Color.Orange), new Rectangle(Point.Empty, new Size(Bmp.Width - 1, Bmp.Height - 1)));

        // Finally put your drawing to the screen. 50 points left and top so 
        // you can see the border and that nothing exceeds that ParaentBorder
        e.Graphics.DrawImage(Bmp, new Point(50,50));

        // Save your BMP to a file if you prefer or to "preserve the graphics" 
        // place the bmp in global scope (a global variable just don't forget 
        // to dispose when no longer needed)

        // Please dispose of your goods as variable objects not inline like 
        // done above to keep the GC happy of course. The below method ensures
        // resources are fully released for immediate cleanup by the GC. 
        Bmp.Dispose();
        Bmp = null;
        BmpGfx.Dispose();
        BmpGfx = null;
    } 
```

# css - style.css 是否覆盖其他 CSS 文件类和 id

> ID：13339193
> 
> 赞同：0
> 
> 时间：2012-11-12T06:22:45.320
> 
> 标签：css, html

我的现有网页有一个 style.css 文件。然后我创建了一些带有内部样式表的新网页。但是新页面并没有按照内部样式表显示。当我将这些页面移动到新的 Web 应用程序时，它们可以正常工作。

我还尝试使用 style.css 为新页面创建外部样式表并将其包含在内。然而，新页面仍然没有相应地显示。

谁能告诉我可能是什么问题？style.css 是否覆盖内部样式表或其他 css？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:27:02.223

No`style.css`不会覆盖其他样式。CSS 根据特定性决定将哪些样式应用于元素。

CSS 特殊性是一个有点大但很重要的话题。在这里阅读：

[CSS 特异性：你应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

**编辑**

为了相同的特异性，使用最后定义的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:26:38.033

它取决于优先级以及您使用表单示例 style.css 的方式是所有 css 的最后一个，而不是它将覆盖或您已使用`!important`

**好读**

1.  [CSS 优先级](https://stackoverflow.com/questions/667223/css-precedence)
2.  [6 分配属性值、级联和继承](http://www.w3.org/TR/CSS2/cascade.html)
3.  [理解 CSS 中的样式优先级：特异性、继承和 CascadeCSS 优先级](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)
4.  [CSS 特殊性的细节](http://css-tricks.com/specifics-on-css-specificity/)

# .net - asp .net中的用户注册和身份验证

> ID：13339198
> 
> 赞同：0
> 
> 时间：2012-11-12T06:23:53.430
> 
> 标签：.net, authentication

我在数据库中创建了表“用户”。我必须注册用户并验证他。我想使用 asp .net 创建向导和登录控件，但我不知道如何使用这些控件在我自己的数据库中注册用户。我不想创建 ASPNETDB.MDF。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:23:49.270

您可以使用自定义成员资格提供程序来实现此目的。

类似问题：[.NET 4.0 中的自定义 MembershipProvider](https://stackoverflow.com/questions/5701673/custom-membershipprovider-in-net-4-0)

另一个示例： http: [//www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

关于会员提供者的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/f1kyba5e (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx)

希望这可以帮助！

# java - 从 Java 调用时，powershell/powerCLI 性能缓慢

> ID：13339201
> 
> 赞同：1
> 
> 时间：2012-11-12T06:24:10.497
> 
> 标签：java, performance, powershell, vmware, powercli

我有一个查询 VmWare 主机信息的 powerCLI 脚本。我可以通过这样做从java运行脚本：

```
Runtime runtime = Runtime.getRuntime();
String cmd = "powershell -ExecutionPolicy RemoteSigned -noprofile -noninteractive -file \"" + scriptPath + "\"";
Process proc = runtime.exec(cmd); 
```

我已经验证该脚本在从 Powershell 命令行或通过 Java 运行时的工作方式相同。但是，我反复注意到，当从 Java 调用时，大约需要 45 秒才能完成（相比之下，从命令行大约需要 20 秒）。

知道为什么性能差异吗？谢谢

编辑：为了澄清：在我的 powerCLI 脚本中，我捕获开始和结束时间，然后从脚本中打印出持续时间。从 Powershell 脚本打印输出中观察到提到的 45 与 20 秒。所以这个时间不包括与调用和返回相关的开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:33:09.150

好吧，还有很多事情要做，你必须得到一个运行时的实例，运行 powershell 并传递一个脚本，然后回调到运行时，说程序已经运行完毕。

它只是 Java 开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:31:53.297

如何加载 PowerCLI 管理单元？Windows InternetSettings 中有一些验证管理单元来源的优化。您可以将其关闭。我不确定Java（或根本）如何考虑这些设置。阅读这篇文章[http://goo.gl/PGUqa](http://goo.gl/PGUqa)并尝试那里的解释。

# javascript - 如何在运行时在 innerHTML 中设置 id？

> ID：13339202
> 
> 赞同：1
> 
> 时间：2012-11-12T06:24:16.990
> 
> 标签：javascript, html, javascript-events

我是 JavaScript 和 HTML 的新手。我可能会问一个简单的问题，但这也是事实，我很困惑找不到解决方案。

我有警报框。在`onload()`，它要求将行数显示为列表。一次

输入数字，然后根据用户的需求在警报框中填充行。

**我的问题是：**如何在里面设置id `innerHTML`，这样我就可以查看这里选择了哪些项目。

如果提供与此相关的任何教程，它也会很有用。

这是我的代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="stylesheet" type="text/css" href="scrollbar.css">

<script type="application/javascript" src="iscroll.js?v4"></script>
<script type="text/javascript">

var myScroll;
function loaded() {
    myScroll = new iScroll('wrapper', { scrollbarClass: 'myScrollbar' });
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

document.addEventListener('DOMContentLoaded', loaded, false);

</script>
        <!--    html,body {
                height: 50%
            }

            #left {
                float: left;
                width: 25%;
                height: 90%
            }
            #lst {
                width: 75%;
                height: 90%
            } -->
<style type="text/css" media="all">
body,ul,li {
    padding:0;
    margin:0;
    border:0;
}

body {
    font-size:12px;
    -webkit-user-select:none;
    -webkit-text-size-adjust:none;
    font-family:helvetica;
}

#wrapper {
    position:absolute; z-index:1;
    top:45px; bottom:48px; left:0;
    width:100%;
    background:#aaa;
    overflow:auto;
}

#scroller {
    position:relative;
/*  -webkit-touch-callout:none;*/
    -webkit-tap-highlight-color:rgba(0,0,0,0);

    float:left;
    width:100%;
    padding:0;
}

#scroller ul {
    position:relative;
    list-style:none;
    padding:0;
    margin:0;
    width:100%;
    text-align:left;
}

#scroller li {
    padding:0 10px;
    height:40px;
    line-height:40px;
    border-bottom:1px solid #ccc;
    border-top:1px solid #fff;
    background-color:#fafafa;
    font-size:14px;
}

#scroller li > a {
    display:block;
}

        </style>
<script type = "text/javascript">

function listClicked(id)
    {
        var listid = id;
        //alert("click called  "+ listid);
        if(listid == 'l1')
        {
            //alert("inside l1");
             window.document.location.href = 'l1.html';         
        }
        else if(listid == 'l2')
        {
            window.document.location.href = 'l2.html';  
        }
        else if(listid =='l3')
        {
            alert("Current date is:  "+new Date());
        }
        else if(listid == 'l4')
        {
            window.document.location.href = 'login.html';           
        }
        else if(listid == 'l5')
        {
            window.document.location.href = 'customList.html'
        }

    }

    function callAlert()
    {
        listRows = prompt("how many list row you want??");
        var ids = 0;
        var listText = "List Number";
                for(var i = 0;i < listRows; i++)
                {
                    if(i%2==0)
                    {
                    ids++;
                        listText = listText + "<p style ='background-color:#EEEEEE'>";
                    }

                    else
                    {
                    ids++;
                        listText = listText + "<p>";
                    }                                   
                    listText = listText + i;

                    document.getElementById("lst").innerHTML = listText+i;                  
                }
                //document.getElementById("lst").innerHTML = listText+i;
    }
            /*  if you name your html files lise so:

            htmlfile1.html
            htmlfile2.html
            htmlfile3.html

            then you can create a script that creates the filepath according to the value of the variable.

            <script type=text/javascript>
            var yourvar='???';
            window.location="htmlfile"+yourvar+".html"; */
            //-->
</script>
<body onload = callAlert();loaded()>
<ul style="list-style: none; margin-top:100px;">
<li id = "l1" onclick = listClicked(id);>list item 1</li>
<li id = "l2" onclick = listClicked(id);>list item 2</li>
<li id = "l3" onclick = listClicked(id);>Show current date alert</li>
<li id = "l4" onclick = listClicked(id);>Login</li>
<li id = "l5" onclick = listClicked(id);>list item 5</li>

    <div id="wrapper">
    <div id="scroller">
    <ul id="thelist">
    <div id = "lst" ></div>         
        </ul>
    </div>
    </div>
</ul>

</body>
</head>
</html> 
```

请帮我找出解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:27:12.677

要设置 ID，只需使用 DOM 元素的 ID 属性：

```
MyElement.id = "whatever"; 
```

但看起来你想获取 ID，就像在这一行：

```
onclick = listClicked(id); 
```

在这种情况下，您可以只传递`this`，它将传递该元素的引用，并使用其中的 ID 属性。

```
onclick = listClicked(this); 
```

Javascript：

```
function listClicked (someElement) {
    alert(someElement.id);
} 
```

* * *

`listClicked`您代码中的函数也可以使用更多改进，例如：

```
function listClicked(element) {
    var listid = element.id;

    switch (listid) {
        case 'l1':
            alert("Foo");
            break;
        case 'l2':
            alert("Bar");
            break;
        default:
            alert("Default");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:41:49.653

我想你想要这样的东西：

```
listText = listText + '<p style="background-color:#EEEEEE" id="foo' + i + '">'; 
```

这样每个段落都有一个唯一的ID。我更喜欢对脚本字符串使用单引号，对 HTML 属性值使用双引号。

# qt - 如何构建 Qt App，它可以显示自己的属性，如“版本”、“公司名称”、“产品名称”等？

> ID：13339204
> 
> 赞同：0
> 
> 时间：2012-11-12T06:24:32.383
> 
> 标签：qt, properties, resources, version, exe

> **可能重复：**
> [在 Qt 中设置应用程序信息](https://stackoverflow.com/questions/2784697/setting-application-info-in-qt)

我创建了一个 rc 文件。它是为使用正确的内容而构建的。但最终的 exe 文件的属性中没有选项卡版本。我应该怎么做才能使这个标签可见？

# c - c - 将 char 传递给 strtok？

> ID：13339208
> 
> 赞同：1
> 
> 时间：2012-11-12T06:25:53.773
> 
> 标签：c, strtok

在下面的代码行中，我尝试将键字符串替换为在字符串中找到的变量字符串。例如，如果我有一个字符串“hello VARIABLE world”，则 KEY 值将代替 VARIABLE 值，使字符串“hello KEY world”而不是原始字符串。我的理论是将字符串标记为变量的第一个字符（在字符串中）（newfirst），标记变量字符（newtrash），然后标记字符串的其余部分（newsecond）。然后连接newfirst + key + newsecond。问题是，myVariables[i].variable[0] 和 myVariables[i].variable[varlength - 1] 在前两行中作为字符读入 strtok 函数，编译器要求 const char*。

更简单的表达方式：如何将 char 数组中的单个字符（用户输入，因此不能硬编码）作为 strtok 函数中的分隔符字符传递？

**要明确这不是整个程序，只是问题的关注点

```
 strcpy(newfirst, strtok(testString, myVariables[i].variable[0]));
   strcpy(newtrash, strtok( NULL, myVariables[i].variable[varlength - 1]));
   strcpy(newsecond, strtok(NULL, "\n"));
   strcat(newfirst, myVariables[i].key);
   strcat(newfirst, newsecond);

  struct variablePairs {
     char variable[20];                 
     char key[20];                  
 }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:00:51.880

你没有。Strtok 可能不是您尝试做的事情的正确解决方案，而且您似乎误解了它的作用。to的`delim`参数`strtok`实际上是一组字符，表示为字符串。 `strtok`扫描输入字符串，直到找到分隔符字符串中的任何单个字符并认为是分隔符的开始。然后它会查找分隔符字符串中任何位置的其他字符，并将它们也视为分隔符。

现在根本不清楚您要做什么，但看起来您正在搜索子字符串`VARIABLE`并将其替换为其他字符串。 `strstr`可能是你想要的。就像是：

```
if ((p = strstr(input, myVariables[i].variable))) {
    strncpy(output, input, p-input);
    strcat(output, myVariables[i].key);
    strcat(output, p+strlen(myVariables[i].variable));
} else {
    /* variable not found */
    strcpy(output, input);
} 
```

这将找到变量字符串，即使它嵌入在另一个单词中——如果你想避免这种情况，你还需要检查确保匹配被空格包围或在字符串的末尾：

```
len = strlen(myVariables[i].variable);
if ((p = strstr(input, myVariables[i].variable)) &&
    (p == input || isspace(p[-1])) &&
    (isspace(p[len]) || p[len] == 0)) 
```

根据您希望如何处理数字和标点符号，您可能希望将`isspace`呼叫替换为`!isalpha`或`!isalnum`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:44:04.903

这不是解决您的问题的最佳方法：

1.声明一个指针并将你的第一个或最后一个字符传递给它。

2.记得用'\0'结束它，使它可以解析为一个const char。

3\. 在你的 strtok 中使用 (const char *)p 形式。

```
char x[256]={0};
char *p;

p = malloc(2);
strcpy(x,"abcd");
*p = x[0];
memset(p+1,'\0',1);

printf("\n point p is %s\n",(const char *)p); 
```

输出：

```
point p is a 
```

# c++ - Cpp 中的注册表处理

> ID：13339209
> 
> 赞同：2
> 
> 时间：2012-11-12T06:25:56.693
> 
> 标签：c++, winapi

我正在处理代码，我必须在特定的注册表路径下获取数据。为此，我使用函数打开键和子键 `RegOpenKeyEx (HKEY_LOCAL_MACHINE, sk, NULL, KEY_READ, &hKey);` ，在调试时为我提供了我需要访问的路径的未使用值句柄。这里出了什么问题？谁能告诉我？

```
void GetAlgorithmList()
{
    HKEY hKey=0;

    LPCTSTR sk = TEXT("SOFTWARE\\ALGORITHM");

    LONG openRes=RegOpenKeyEx (HKEY_LOCAL_MACHINE,sk,NULL,KEY_READ   ,&hKey);

    long lret;
    PVALENT val_list=0;

    unsigned long totalsize = 1000;
    lret = 0;

    LPWSTR szValueBuf=NULL;

    lret = RegQueryMultipleValues(hKey,val_list,totalsize,szValueBuf,&totalsize);
    if (lret == ERROR_SUCCESS)
    {
        printf("Success 1");
    }
     FILE* pFile = fopen("D:\\HinalH\\logFile.txt", "a+");
    fopen("D:\\logFile.txt", "a+");
    fprintf(pFile, "%d\n",szValueBuf);
    fclose(pFile);

    RegCloseKey(hKey);

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:46:11.100

**首先：**您应该检查`RegOpenKeyEx`. 请更仔细地阅读文档。如果错误发生在运行时，则确实有必要处理它们。

**第二：**请查看函数[RegQueryMultipleValues](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724905%28v=vs.85%29.aspx)的文档。只需注意`val_list`参数和`lpValueBuf`参数都是 out 参数。我看不到您在代码中以正确的方式处理它们。

**第三：**我在网上找不到任何使用[RegQueryMultipleValues的示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724905%28v=vs.85%29.aspx)我玩了一点，并创建了一个工作示例。

这是我做的样本。

```
#include <Windows.h>
#include <string>
#include <stdlib.h>

#define MY_KEY TEXT("SYSTEM\\CurrentControlSet\\services\\BITS")

int _tmain(int argc, _TCHAR* argv[])
{
    HKEY hKey;
    LONG lResult;

    lResult = RegOpenKeyEx(HKEY_LOCAL_MACHINE, MY_KEY, 0, KEY_READ, &hKey);

    if(lResult == ERROR_SUCCESS)
    {
        VALENT val_list[4];
        memset(val_list, 0, sizeof(val_list));

        val_list[0].ve_valuename = TEXT("ImagePath");
        val_list[1].ve_valuename = TEXT("Start");
        val_list[2].ve_valuename = TEXT("DisplayName");
        val_list[3].ve_valuename = TEXT("FailureActions");

        DWORD totalsize = 0;

        RegQueryMultipleValues(hKey, val_list, sizeof(val_list)/sizeof(VALENT), NULL, &totalsize);

        LPWSTR lpBuffer = (LPWSTR)malloc(totalsize);
        if (lpBuffer == NULL)
        {
            // TODO: Error handling
        }

        lResult = RegQueryMultipleValues(hKey, val_list, sizeof(val_list)/sizeof(VALENT), lpBuffer, &totalsize);
        if (lResult == ERROR_SUCCESS)
        {
            for (int i = 0; i < sizeof(val_list)/sizeof(VALENT); i++)
            {
                DWORD len = val_list[i].ve_valuelen;
                DWORD *ptr = (DWORD *)val_list[i].ve_valueptr;

                if (val_list[i].ve_type == REG_SZ || val_list[i].ve_type == REG_EXPAND_SZ)
                {
                    printf("len:%d content:\"%S\"\n", len, ptr);
                }
                else if (val_list[i].ve_type == REG_DWORD)
                {
                    printf("len:%d content:\"%08x\"\n", len, *ptr);
                }
                else if (val_list[i].ve_type == REG_BINARY)
                {
                    printf("len:%d\n", len);
                    for (unsigned k = 0; k < len; k++) printf("%02x ", ((BYTE *)ptr)[k]);
                }
                else
                {
                    // TODO: implement more
                }
            }
        }

        free(lpBuffer);
        RegCloseKey(hKey);
    }
    else
    {
        // TODO: Error handling
    }

    return 0;
} 
```

老实说，这个功能似乎不是访问注册表中信息的最佳选择。最好使用[RegQueryValueEx 之](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx)类的函数。

# apache - 登录页面的 http 到 https 重定向

> ID：13339210
> 
> 赞同：0
> 
> 时间：2012-11-12T06:26:10.697
> 
> 标签：apache, mod-rewrite, redirect

我想在我的应用程序用户访问登录页面时将他们重定向到 HTTPS 协议。网址是这样的：

```
http://localhost/default/Login 
```

我在我的 apache conf 文件中写了下面的重写规则（**请注意**，我只想从 conf 文件而不是从 .htaccess 中执行此操作）

```
RewriteEngine on
RewriteCond %{HTTPS} !=on
RewriteRule ^/Login$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

此重定向不起作用，我无法找出原因。也尝试过打印**重写日志**，但也无法从中进行调试。

请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:02:32.127

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} Login [NC]
RewriteRule $ https://%{HTTP_HOST}%{REQUEST_URI} [L,R] 
```

这条规则解决了我的问题。发现那`^`是 URL 的开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T06:41:00.897

尝试将以下代码添加到您的 httpd.conf 文件中。

```
Redirect permanent / https://localhost/default/Login 
```

完整描述见[链接](http://www.cyberciti.biz/tips/howto-apache-force-https-secure-connections.html)

# .htaccess - .htaccess：使用特定的文件和目录

> ID：13339215
> 
> 赞同：0
> 
> 时间：2012-11-12T06:26:39.610
> 
> 标签：.htaccess

我有一个像下面这样的文件树...

```
.htaccess
index.php
includes
   css
   js
   xml
   images
      apple.jpg
      orange.jpg
      date.jpg
      berry.jpg
      .
      .
      .
      waterlemon.jpg
      banana.jpg
   file
      001.txt
      002.txt
      003.txt
      .
      .
      .
      100.txt 
```

我正在使用下面的代码`.htaccess`来***阻止***除目录`index.php`中的每个文件和`root`目录...

```
Order Deny,Allow 
Deny from All

<Files "index.php">
    Order Deny,Allow
    allow from all
</Files> 
```

现在我只需要允许文件夹中的`apple.jpg`, `date.jpg`, `berry.jpg`& ......此外，我还需要允许文件夹中的所有内容......这样任何人都可以直接访问任何文件......我该怎么做。 ..??`banana.jpg``images``file``001.txt``100.txt`

***我不想使用多个 .htaccess 文件***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:33:57.040

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/index\.php$
RewriteCond %{REQUEST_URI} !^/file/(.+)
RewriteCond %{REQUEST_URI} !^/includes/images/(apple|date|berry|banana)\.jpg$
RewriteRule (.*) - [F] 
```

此代码仅允许访问：

*   （apple.jpg、date.jpg、berry.jpg、banana.jpg）从您的 `/includes/images/`文件夹中。
*   你的`index.php`档案。
*   您`/file/`目录中的任何文件。

否则它将禁止访问任何其他文件并提供*403 Forbidden*错误。

**PS：您的 .htaccess 文件中不再需要以下代码。**

```
Order Deny,Allow 
Deny from All

<Files "index.php">
    Order Deny,Allow
    allow from all
</Files> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:20:56.870

我认为您可以像在我的网站中那样阻止类型文件。

```
RewriteEngine on
Rewritecond %{HTTP_HOST} !^www\.mydomain\.com
RewriteRule (.*) //www.mydomain.com/$1 [R=301,L]
RewriteRule \.(sql)$ - [F]
RewriteRule \.(txt)$ - [F]
RewriteRule \.(zip)$ - [F]
RewriteRule \.(rar)$ - [F] 
```

将此行添加到您的 htaccess 更改域名并更改类型文件，如您在代码中所见，这将对您有所帮助:-)

# android - 添加箭头图像以告诉用户另一个图像可用。安卓画廊

> ID：13339216
> 
> 赞同：0
> 
> 时间：2012-11-12T06:26:47.387
> 
> 标签：android, gallery, image-gallery

我想在画廊项目图像的右侧添加箭头图像以显示更多图像可用。有没有办法做到这一点。你们能帮帮我吗？希望我的问题很清楚。

问候！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:36:57.490

请通过以下示例。这对我解决问题有很大帮助。

[http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/](http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/)

希望这会帮助你 。

谢谢，拉杰什K

# php - 检索条件中的错误数据

> ID：13339220
> 
> 赞同：0
> 
> 时间：2012-11-12T06:26:52.083
> 
> 标签：php, javascript

我有一个日期功能，条件是如果用户选择今天的日期，将收取 RM 10.00，如果用户选择明天的日期，则费用为 5.00，否则将收取 0.00。对于每种情况，我都必须创建一个会话，以便可以将其传递给其他模块。但是，当用户选择日期并单击下一步时，会话的数据也会返回最后一个条件的最后一个值，其中值为 0.00。下面是代码：

```
window.onload = function(){
var d = new Date();
d.setDate(new Date().getDate());

var time = d.toTimeString().substr(0, d.toTimeString().lastIndexOf(" "));

if(d.toTimeString() > "17.00")
{   
    $(document).ready(function() {
        $('#datepicker-example2').Zebra_DatePicker({
            direction:1,
            onSelect: function(view, elements) {

                var month = d.getMonth()+1;
                var day = d.getDate();
                var next_day = 1;
                var tomoro = new Date();
                var res = tomoro.setTime(tomoro.getTime() + (next_day * 24 * 60 * 60 * 1000));
                tomoro = new Date(res);
                var tom_month = tomoro.getMonth()+1;
                var tom_day = tomoro.getDate();

                var currDate = d.getFullYear() + '-' +
                    ((''+month).length<2 ? '0' : '') + month + '-' +
                    ((''+day).length<2 ? '0' : '') + day;

                var tomDate = tomoro.getFullYear() + '-' +
                    ((''+tom_month).length<2 ? '0' : '') + tom_month + '-' +
                    ((''+tom_day).length<2 ? '0' : '') + tom_day;   

                if($('#datepicker-example2').val() == currDate)
                {
                    $('#charge').val('RM10.00');
                    setSession('10.00');

                }else
                if($('#datepicker-example2').val() == tomDate)
                {
                    $('#charge').val('RM5.00');

                    setSession('5.00');
                }else
                {
                    $('#charge').val('RM0.00');
                    setSession('0.00');
                }
            }
        });
    }); 
}
}

function setSession(str)
{
$.ajax({url: "set_session.php", type: "post", data: {"ses": str}})
} 
```

set_session.php 页面

```
<?php session_start();
$ses = $_POST['ses'];
$_SESSION['charge'] = $ses; ?> 
```

主文件保存在 .tpl

***更新：** 现在我可以获取值，但似乎事件有问题。例如：起初我选择今天的日期，所以费用假设为 10 rm。但它显示0。然后我回到上一页，选择明天的日期，费用假设是5rm，但它显示10rm，这是上一个记录会话。如果我回去，然后选择另一个日期，它将显示 5rm，n 等。

我使用了错误的事件吗？或者那会发生什么？我该怎么解决？

# windows-8 - 从 VS2012 远程调试 Win8 Surface App

> ID：13339222
> 
> 赞同：5
> 
> 时间：2012-11-12T06:27:09.303
> 
> 标签：windows-8, visual-studio-2012

我正在尝试从 Microsoft Surface RT 平板电脑上的 VS2012 中调试 Windows Store 应用程序。桌面开发系统和 Surface 平板电脑都在同一个子网 (191.168.1.x) 上。我已经在平板电脑上安装了用于 ARM 的远程调试工具，并且可以在其上启动远程调试监视器。

当我尝试从 VS2012 项目的 Debug 属性页面中查找平板电脑时，什么也找不到（即，查找过程找不到平板电脑）。通过在平板电脑上运行 ipconfig，我知道它的 IP 地址是 192.168.1.140。桌面系统的 IP 地址为 192.168.1.2。

我的桌面系统是域的一部分，我知道这会带来复杂性。我已经使两个系统上的用户帐户在用户名和密码方面相同（桌面用户 ID 是 mark，在“example.com”域中，而平板电脑的用户 ID 是“mark@example.com”） .

我尝试将平板电脑上的远程调试器配置为忽略身份验证（即，将其设置为允许任何用户进行调试，而不是强制执行安全性）。问题仍然存在。

这感觉像是“端口未打开”或“端口被防火墙阻止”的问题。但是我找不到任何关于 VS2012 需要哪些端口进行远程调试的文档。

FWIW，我确实注意到了一件事：从桌面ping平板电脑，或者从平板电脑ping桌面，失败了。一样`tracert`。然而两台机器都通过我的 Linux 防火墙/路由器连接到互联网，并且 Linux 系统可以 ping 桌面和平板电脑。

# c++ - 如果更多重复键，则快速排序算法改进

> ID：13339227
> 
> 赞同：9
> 
> 时间：2012-11-12T06:27:27.670
> 
> 标签：c++, algorithm, quicksort

我正在阅读 Robert Sedwick 算法和数据结构第 1-4 部分的书中的快速排序算法。

```
template <class item>

static void quicksort(item [] a, int l, int r)
{
    if(r <= l) return;
    int i = partition(a,l,r);
    quicksort(a, l, i-1);
    quicksort(a, i+1, r);
}

template <class item>
int partition(item a[], int l, int r)
{
    int i = l-1; j = r; item v = a[r];

    for(;;) {
        while( a[++i] < v );
        while( v < a[--j] ) 
            if( j == l ) 
                break;
        if( i >= j) 
            break;  // pointer crossing.
        exch(a[i], a[j]);
    }

    exch(a[i], a[r]);
    return i;
} 
```

书中有关于上述算法的以下文字。

> 当文件中存在重复键时，指针交叉很微妙。我们可以通过在 i < j 时终止扫描，然后使用 j 而不是 i-1 来为第一次递归调用分隔左子文件的右端来稍微改进分区过程。在这种情况下让循环再迭代一次是一种改进，因为当扫描循环以 j 终止并且 i 指代同一个元素时，我们最终会在它们的最终位置有两个元素：停止两次扫描的元素，因此，它必须等于分隔元素和分隔元素本身。这种改变可能是值得做的，因为在这种特殊情况下，程序留下的记录的键等于 a[r] 中的分区键，

我的问题是

1.  我们如何修改上面的程序，下面有描述？我很难修改它以理解文本。
2.  如果存在更多重复键，为什么上述快速排序算法无法有效工作。
3.  如果存在更多重复键，上述修改将如何改进？
4.  作者的意思是“他在调用快速排序（a，i + 1，r）中的第一个分区退化，因为它最右边的键是它的最小键。” ? 作者这里的退化是什么意思？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T09:25:14.813

**>>如果存在更多重复键，为什么上述快速排序算法无法有效工作？**

它变得低效，因为您的中断条件是：因此，当您使用and`if(i >= j) break;`
从两侧扫描时，很有可能您在**i == j**时中断而不是让超过。*当我们在存在许多重复键*时中断可能会发生 什么*坏事*？`i``j`**`i``j`

*`i==j`***

 ****当您`i==j;`从第一个 while 循环中中断 for 时，您必须`a[i] >= v`从第二个 while 循环`a[j] <=v` 中中断，但由于我们正在考虑“中断”：`i==j`所以，`a[i] = a[j] = v`即`a[i]`与`v`您的**枢轴元素**相同。

在这种情况下，您的最外层`exch(a[i], a[r]);`将简单地将枢轴值交换给自己。
因此，在您对数组右半部分的下一次递归调用`quicksort(a, i+1, r);`中，您将有最小元素位于最右端。（您的枢轴选择策略很简单，`item v = a[r];`）并且我们都知道快速排序选择一个枢轴元素是不好的等于数组的最小值或最大值。因此，您随后对 right-half 的递归调用将是*退化的*。
这就是为什么作者建议不要因为**i==j**而中断，而是在发生之前抓住它们。

**>>作者这里的退化是什么意思？**

这里的退化意味着递归树变得倾斜，即后续的问题没有产生几乎相等的大小。您正在将大小问题划分为大小`N`问题，`N-1` 而`1`不是更平衡的问题，例如将其划分为大小问题`N/2`和`N/2`.

**>>我们如何修改上面的程序，描述如下？**

我们可以像下面这样实现它：

```
int partition(int A[], int l, int r){
        int i=l-1, j=r, v = A[r];
        for(;;){
                while(A[++i] < v);
                while(A[--j] > v)
                        if(j == l)
                                break;
                if(i>=j)
                        break;
                swap(A[i], A[j]);
        }
        if(i == j){// case when we stopped at the pivot element.
                j = j+1;//backtrack j 1 step.
                if(j <= r)
                    swap(A[j], A[r]);
                return j;// partition the subsequent problems around j now.
        }
        swap(A[i], A[r]);
        return i;
} 
```

**>>如果存在更多重复键，上述修改如何改进？**
它通过让您不生成退化案例的明显场景来提高性能。****

# iphone - Wepopover 控件中的 Uibutton

> ID：13339232
> 
> 赞同：2
> 
> 时间：2012-11-12T06:28:01.633
> 
> 标签：iphone, ios

如何在 WEpopover 控制器中包含 uibutton，我想要 WEpopover 中的一组 3 个按钮，单击导航到其他视图。我应该在哪里更改 WEpopover 控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:39:08.013

在底层，WEPopover 的工作原理是向 中添加一个子视图，一个“容器”，`mainWindow`它是位于`UIView`视图层次结构[1] 的最根部的子类。向该容器添加`view`给定视图控制器的属性。要知道如何调整该视图的大小，它会向视图控制器询问其`contentSizeForViewInPopover`.

因此，设置 3 个按钮的方式与为任何其他视图控制器设置 3 个按钮的方式相同。唯一的区别是在`UIViewController`处理 3 个按钮的子类中，您需要设置`contentSizeForViewInPopover`.

`init`您可以在或中设置此属性`viewDidLoad`。（请记住将其添加到正确的`init`方法中——例如，如果您在情节提要中制作此视图控制器，`init`则不会被调用，而是会被调用`initWithCoder:`）。

要实际添加按钮，您可能需要以下代码`viewDidLoad`：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button]; 
```

[1] 如果你向一个视图询问它的超级视图，然后向那个视图询问它的超级视图，依此类推，你最终会到达`mainWindow`.

# zip - Gradle - 从依赖的 jar 中提取文件

> ID：13339237
> 
> 赞同：11
> 
> 时间：2012-11-12T06:28:44.450
> 
> 标签：zip, extract, distribution, gradle

我想从依赖的 jasperreports.jar 中提取文件“default.jasperreports.properties”并将其放入新名称“jasperreports.properties”的 zip 分发中

示例 gradle 构建：

```
apply plugin: 'java'

task zip(type: Zip) {
    from 'src/dist'
  //  from configurations.runtime
    from extractFileFromJar("default.jasperreports.properties");
    rename 'default.jasperreports.properties', 'jasperreports.properties'

}

def extractFileFromJar(String fileName) {
    //    configurations.runtime.files.each { file -> println file} //it's not work 
    // not finished part of build file
    FileTree tree = zipTree('someFile.zip')
    FileTree filtered = tree.matching {
        include fileName
    }

}

repositories {
    mavenCentral()
}

dependencies {
    runtime 'jasperreports:jasperreports:2.0.5'
} 
```

如何从依赖项 jasperreports-2.0.5.jar 中获取 extractFileFromJar() 中的 FileTree？

在上面的脚本中我使用

```
FileTree tree = zipTree('someFile.zip') 
```

但想使用 somethink like（错误，但人类可读）

```
FileTree tree = configurations.runtime.filter("jasperreports").singleFile.zipTree 
```

* * *

PS：试着打电话

```
def extractFileFromJar(String fileName) {
    configurations.runtime.files.each { file -> println file} //it's not work 
... 
```

但它不适用于异常

> 您不能更改未处于未解决状态的配置！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T16:05:38.040

这是一个可能的解决方案（有时代码会说一千多个单词）：

```
apply plugin: "java"

repositories {
    mavenCentral()
}

configurations {
    jasper
}

dependencies {
    jasper('jasperreports:jasperreports:2.0.5') { 
        transitive = false
    }
}

task zip(type: Zip) {
    from 'src/dist'
    // note that zipTree call is wrapped in closure so that configuration
    // is only resolved at execution time
    from({ zipTree(configurations.jasper.singleFile) }) {
        include 'default.jasperreports.properties'
        rename 'default.jasperreports.properties', 'jasperreports.properties'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-06T15:34:45.553

替代解决方案：

```
configurations {
    batch
}

dependencies {
    batch 'org.springframework.batch:spring-batch-core:3.0.8.RELEASE' { 
        transitive = false
    }
}

def extractBatchSql(path) {
    def zipFile = configurations.batch.find { it =~ /spring-batch-core/ }
    def zip = new java.util.zip.ZipFile(zipFile)
    def entry = zip.getEntry(path)
    return zip.getInputStream(entry).text
}

task tmp() {
    dependsOn configurations.batch

    doLast {
        def delSql = extractBatchSql("org/springframework/batch/core/schema-drop-oracle10g.sql")
        println delSql
    }
} 
```

# c - 在 C 中执行以下操作的方法是什么？

> ID：13339239
> 
> 赞同：0
> 
> 时间：2012-11-12T06:29:07.323
> 
> 标签：c, file, pointers

我想在文件中保存一个位置，然后将文件指针恢复到保存的位置。

```
 FILE *save = fp;

//perform operations on file fp...  

..
..

//restore to previously saved location

fp = save; 
```

我尝试了上述方法，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T06:31:39.990

有关和功能的信息，请参阅[此页面。](http://www.gnu.org/software/libc/manual/html_node/File-Positioning.html)这些将允许您分别检索和设置文件指针的位置。`ftell``fseek`

```
long int originalPos = ftell(fp);
// do stuff with file
fseek(fp, originalPos, SEEK_SET); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:31:20.817

创建 2 个 fp 变量？使用您没有执行操作的那个来恢复？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:35:09.913

我认为您正在寻找的是`fseek`and `ftell`。 `long int pos = ftell(fp);`获取当前位置，然后`fseek(fp, pos, SEEK_SET);`返回该点。

相关手册页： http: [//linux.die.net/man/3/ftell](http://linux.die.net/man/3/ftell)

# php - HTTP 将 NSString 发布到服务器上的 php 文件中

> ID：13339247
> 
> 赞同：0
> 
> 时间：2012-11-12T06:30:33.043
> 
> 标签：php, objective-c, ios, http-post

我需要将 NSString 发布到我网站上的文件中。我在[http://www.mysite.herokuapp.com/newFile.php](http://www.mysite.herokuapp.com/newFile.php)创建了一个文件，需要将数据发布到 newFile.php 中。

我[在 iOS 中找到了这个 Send String to webserver？](https://stackoverflow.com/questions/3553402/send-string-to-webserver-in-ios)早些时候，我认为这是完美的，但很快意识到是从 2009/2010 年开始的，并且代码无法正常工作。在摆弄了一下之后，我得到了下面的代码，但它不起作用。

所以这有两个部分：

首先，我是否应该首先发布到 .php 文件中？.txt 会更容易吗？

二、网站端和iOS端怎么做？

这是我在 iOS 中整理的代码：

```
// Post data onto external server
             NSString *post = @"IsThisWorking?";
             NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

             NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

             NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
             [request setURL:[NSURL URLWithString:@"https://mysite.herokuapp.com/getLikes.php"]];
             [request setHTTPMethod:@"POST"];
             [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
             [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
             [request setHTTPBody:postData]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:36:19.000

你必须在你的服务器上处理这个。

接收`NSString`- 在您的示例中`getLikes.php`- 应该将字符串保存到服务器上的文件的方法。

我不熟悉 PHP，但这个链接可能会有所帮助

[php - 文件写入](http://www.tizag.com/phpT/filewrite.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:44:17.663

## iOS端

获取 ASIHttpRequest 或 AFNetworking。

我使用 ASIHttpRequest 及其 ASIFormData 因为我发现 AFNetworking 有一些 POST 变量错误：

```
-(void)postDataToServer
{
    NSURl url = [NSURL urlWithString:@"http://www.myserver.com/api/submitdata"];

    __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:myString forKey:@"data"];

    [request setCompletionBlock:^{
        NSLog(@"Server response = %@", [request responseString]);
    }];

    [request setFailedBlock:^{
        NSLog(@"Server error: %@", [[request error] localizedDescription];
    }];

    [request startAsynchronous];
} 
```

## PHP服务器端

我会使用像 Symfony 这样的 web 框架来构建 web 服务，但是为了快速而肮脏的解决方案，您可以执行以下操作来快速测试：

```
class API
{
    public function saveData()
    {
        if(isset($_REQUEST['data']))
        {
            // google some php code to write to file
        }
    }
}

// when the page loads, we call the saveData and in there
// we check if data is passed in
$api = new API();
$api->saveData(); 
```

# wpf - 使用 Prism WPF 在 Datagrid 中绑定命令

> ID：13339249
> 
> 赞同：4
> 
> 时间：2012-11-12T06:30:39.583
> 
> 标签：wpf, mvvm, datagrid, command, prism

我在谷歌上搜索了我的问题，但找不到任何可以解决我问题的答案。我试图从 WPF 中我的数据网格内的按钮绑定命令。我使用 Prism 来处理 MVVM。这是我绑定命令的代码：

```
<DataGrid AutoGenerateColumns="False" 
              ...
              SelectedItem="{Binding OrderDetail}"
              ItemsSource="{Binding ListOrderDetail}">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Deliver Order" 
                                Command="{Binding Path=DataContext.DeliverOrderCommand}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这是我的视图模型，其中包含命令功能：

```
public ICommand DeliverOrderCommand
    {
        get 
        {
            if (deliverOrderCommand == null)
                deliverOrderCommand = new DelegateCommand(DeliverOrderFunc);
            return deliverOrderCommand; 
        }
        set { deliverOrderCommand = value; }
    } 
```

当我尝试调试时，它没有进入ICommand。那么如何将数据网格内的按钮绑定到我的视图模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T06:58:55.953

您的问题是因为 DataColumns 不是可视树的一部分，因此不继承 DataGrid 的 DataContext。

一种可能克服此问题的方法是使用绑定指定祖先：

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <Button Content="Deliver Order" 
                Command="{Binding  Path=DataContext.DeliverPesananCommand
                                  ,RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" 
                />
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

另一种（有点笨拙）的方法是声明一个帮助器类，它为 DataGridColumn 类创建一个附加属性，然后在网格的数据上下文更改时填充该属性（它通过处理在 FrameworkElement 级别更改的事件并检查是否负责事件的依赖对象是一个DataGrid）：

```
public class DataGridContextHelper
{

    static DataGridContextHelper()
    {
        DependencyProperty dp = FrameworkElement.DataContextProperty.AddOwner(typeof(DataGridColumn));
        FrameworkElement.DataContextProperty.OverrideMetadata( typeof(DataGrid)
                                                              ,new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.Inherits, OnDataContextChanged)
                                                             );
    }

    public static void OnDataContextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var grid = d as DataGrid;
        if (grid == null) return;

        foreach (var col in grid.Columns)
        {
            col.SetValue(FrameworkElement.DataContextProperty, e.NewValue);
        }
    }
} 
```

[您可以在此处](http://blogs.msdn.com/b/jaimer/archive/2008/11/22/forwarding-the-datagrid-s-datacontext-to-its-columns.aspx)找到有关此方法的更多详细信息。

# ios - Mach-o 链接错误

> ID：13339256
> 
> 赞同：0
> 
> 时间：2012-11-12T06:31:19.550
> 
> 标签：ios, xcode

我在我的 iOS 应用程序中使用了一些第三方库（库是 flurry、chartboost 和 burstly）。所有这些第三方库都有静态库，我通过将它们添加到“Link Binary with libraries”中将它们包含在我的项目中。

但是，当我尝试运行我的应用程序时，xcode 显示了很多形式的链接器错误

```
Undefined symbols for architecture i386:
  "_ADBannerContentSizeIdentifier320x50", referenced from:
    +[Burstly_iad_Adaptor initializeContentSizeIdentifiers] in    
libBurstly_AllNetworks_Latest.a(Burstly_iad_Adaptor.o) 
```

似乎我错过了一些东西，包括那些静态库。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:35:23.070

您必须将该子项目链接到[iAd.Framework](http://developer.apple.com/library/ios/documentation/userexperience/Reference/iAd_ReferenceCollection/_index.html#//apple_ref/doc/uid/TP40009705)才能成功编译。添加子项目时，它们通常没有正确设置依赖项。

# c++ - 如何修复 C++ 编译器错误“无法将 'Type' 转换为 'const Type*'”？

> ID：13339260
> 
> 赞同：5
> 
> 时间：2012-11-12T06:31:31.347
> 
> 标签：c++, pointers, constructor, compiler-errors

这是完整的错误信息：

> 错误：无法将参数 '1' 的 'MyTime' 转换为 'const MyTime*' 到 'int determineElapsedTime(const MyTime*, const MyTime*)'|

这是我的代码：

```
#include <iostream>
#include<cstdlib>
#include<cstring>

using namespace std;
struct MyTime { int hours, minutes, seconds; };
int DetermineElapsedTime(const MyTime *t1, const MyTime *t2);
const int hourSeconds = 3600;
const int minSeconds = 60;

int DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{
    long timeDiff = ((((t2->hours * hourSeconds) + (t2->minutes * minSeconds) + t2->seconds) -
                   ((t1->hours * hourSeconds) + (t1->minutes * minSeconds) + t1->seconds)));
    return(timeDiff);
}

int main(void)
{
    char delim1, delim2;
    MyTime tm, tm2;
    cout << "Input two formats for the time. Separate each with a space. Ex: hr:min:sec\n";
    cin >> tm.hours >> delim1 >> tm.minutes >> delim2 >> tm.seconds;
    cin >> tm2.hours >> delim1 >> tm2.minutes >> delim2 >> tm2.seconds;

    DetermineElapsedTime(tm, tm2);

    return 0;

} 
```

有什么办法可以解决吗？请随时指出您看到的任何其他错误。我确实知道修复确定时间以正确输出 hr:min:sec 格式。但现在我需要克服这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T06:35:14.987

错误应该在下面一行：

```
DetermineElapsedTime(tm, tm2); 
```

您正在将`MyTime`对象传递给上面的函数`const MyTime*`。

通过传递对象地址来修复它：

```
DetermineElapsedTime(&tm, &tm2); 
```

**或更好的 C++ 方式**：通过更改函数原型以接受对象引用：

```
int DetermineElapsedTime(const MyTime &t1, const MyTime &t2); 
```

身体也会随之改变；eg`->`将被`.`操作员替换，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T06:33:57.940

该函数需要一个指向 2 个变量的指针，但您正在传递变量本身，这就是问题所在。您可以通过使用运算符传递指向变量的指针来解决此问题`&`，如下所示

```
DetermineElapsedTime(&tm, &tm2); 
```

或者，您可以更改函数以接收对变量的引用，如@iammilind 建议的那样，这意味着您可以保留上面的行。这将是一种更安全、更清洁、更“C++”的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:36:04.983

您的函数`DetermineElapsedTime`需要指向`MyTime`.

将您的代码更改为：

```
DetermineElapsedTime(&tm, &tm2); 
```

在这种情况下，`&`运算符的意思是“获取地址”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T06:37:28.370

您的功能需要采用两个 const 指针：

```
int DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
                         \_____one______/  \______two_____/ 
```

现在，您是这样称呼它的：

```
MyTime tm, tm2;
DetermineElapsedTime(tm, tm2); 
```

如您所见，您是按值传递变量，而不是像函数所期望的那样通过指针传递变量。您可以通过以下几种方式修复它：

*   更改函数以期望 const 引用：

    ```
    int DetermineElapsedTime(const MyTime &t1, const MyTime &t2) 
    ```

*   获取正在传递的变量的地址：

    ```
    MyTime tm, tm2;
    DetermineElapsedTime(&tm, &tm2); 
    ```

*   动态分配东西并传递指针：

    ```
    MyTime *tm = new MyTime();
    MyTime *tm2 = new MyTime();
    DetermineElapsedTime(tm, tm2); 
    ```

# sql - 如何将存储为字符串的 IST 时间转换为 Sql Server DateTime 数据类型

> ID：13339262
> 
> 赞同：0
> 
> 时间：2012-11-12T06:31:33.290
> 
> 标签：sql, sql-server

我的 Sql Server 表中有一个 Varchar 数据类型。它用于将 IST 中的日期和时间保存为字符串。

```
For e.g Sat Sep 01 2012 09:00:00 GMT+0530 (India Standard Time) 
```

任何人都可以帮助我使用 sql 查询将此字符串转换为 Sql Server 日期时间类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:38:06.750

试试这个：

```
declare @dt varchar(50)='Sat Sep 01 2012 09:00:00 GMT+0530'
select CONVERT(datetime,substring(@dt,5,20)) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6063)

# http - nginx 日志 http 状态 404 187 是什么

> ID：13339265
> 
> 赞同：2
> 
> 时间：2012-11-12T06:31:43.220
> 
> 标签：http, logging, nginx

嗨，我得到了 nginx 访问日志文件，如下所示：

```
192.168.1.1 - - [06/Nov/2012:22:13:46 +1100] "GET /?i=a HTTP/1.1" 404 187 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1"
192.168.1.2 - - [06/Nov/2012:22:13:50 +1100] "GET /?i=b HTTP/1.1" 200 0 "http://abc.com/545512565475443/" "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" 
```

这样`404`在第一行中应该找不到，而`200`在第二行中则意味着成功。没关系，但是第一行的后面和第二行的`187`后面是什么？`404``0``200`

谢谢，绿

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T06:35:43.700

根据[这个](http://wiki.nginx.org/HttpLogModule) 默认的日志格式是：

```
log_format 组合'$remote_addr - $remote_user [$time_local]'
                    '"$request" $status $body_bytes_sent '
                    '"$http_referer" "$http_user_agent"';

```

所以响应代码后的 187 或 0 是发送到客户端的字节数

# android - Android 开发 - 允许任何主机连接到 MySQL

> ID：13339269
> 
> 赞同：1
> 
> 时间：2012-11-12T06:32:21.283
> 
> 标签：android, mysql, connect, mamp, host

我正在尝试从基本的 android 应用程序远程连接到我的 MySQL 服务器。我可以使用'localhost'很好地连接到服务器，但我也希望任何主机连接到服务器（为了简单起见，现在）。

我的 phpMyAdmin 中有以下两个用户：

```
User    Host       Password  Global privileges  Grant
root    %           Yes      ALL PRIVILEGES      Yes    
root    localhost   Yes      ALL PRIVILEGES      Yes 
```

我连接到数据库的变量是：

```
/*
* All database connection variables
*/

define('DB_USER', "root"); // db user
define('DB_PASSWORD', "myPass"); // db password (mention your db password here)
define('DB_DATABASE', "mainData"); // database name
define('DB_SERVER', ''); // db server
?> 
```

我还编辑了 my.cnf，我正在使用 MAMP PRO。我修改了这一行：

```
bind-address = 0.0.0.0 
```

我还取消选中了 MAMP PRO 中的“仅允许本地访问”选项。

我重新启动了服务器，但仍然无法从非 localhost 的主机连接。我在几部手机上安装了 android 应用程序，但我只能连接到 localhost 上的数据库。

我环顾了论坛，找不到不同的解决方案。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:49:19.820

调用 PHP 并让该脚本访问 MySQL 而不是客户端访问端口 3306 怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:07:23.857

最简单的检查防火墙是否阻止与数据库服务器的连接是。使用工作站并尝试使用 telnet 到端口 3306。这至少会告诉您问题存在于哪里，在应用程序或网络中。

在 MAMP 服务器上检查的另一件事是端口是否实际上在 0.0.0.0:3306 或 127.0.0.1:3306 上打开

尝试`netstat -an | find "3306"`

# git - 用更少的文件更新 GitHub 存储库

> ID：13339279
> 
> 赞同：0
> 
> 时间：2012-11-12T06:33:10.653
> 
> 标签：git, github, repository

我使用终端命令提交了我的 github 存储库：

```
git add .
git commit -m
git push raytracer master 
```

大约 15-20 次提交进展顺利，直到我重组代码并删除了大约 2-3 个头文件并将它们合并为一个。现在，当我执行相同的命令时，它对我大喊大叫，我猜是因为它期待我在重组后删除的文件。

我有哪些正确的命令可以成功地将我的本地仓库提交到 github？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:49:35.097

如果您手动删除了一些文件（不使用`git rm`），git 不会很高兴。但是，不要害怕，它很容易修复。

使用`git status`并查看 git 缺少哪些文件。如果你真的想让它们消失，你需要使用`git rm <files_or_dirs_to_remove>`. 您可能需要键入已删除文件的完整文件名（不使用 * 等通配符），并且可能需要添加`-f`开关以强制 git 将其从索引中删除（实际上，将删除意图添加到索引）。

之后，您应该能够进行`git commit`更改。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:40:18.160

听起来您需要使用该`git remove`命令从跟踪中删除这些文件。git 不会自动意识到您打算删除该文件；您需要告诉它您不再希望这些文件成为存储库的一部分。有关更多信息，请参见[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:40:47.940

我认为`git`可能`svn`还有一个特殊`rm`的方法可以从存储库中删除文件。您可以尝试恢复文件的删除并运行`git rm`而不是简单`rm`地删除文件

# php - PHP动态调用函数

> ID：13339281
> 
> 赞同：-2
> 
> 时间：2012-11-12T06:33:27.090
> 
> 标签：php

我正在用 PHP 编写一个程序来为变量分配一个函数名并动态调用它。我有下面的代码，当我运行添加代码时，它显示了所有人的答案。

```
function multiply($val1, $val2)
{
  $mul = $val1 * $val2;
  echo $mul;
}

function divide($val1, $val2)
{
  $div = $val1 / $val2;
  echo $div;
 }

$func = plus($_POST['val1'], $_POST['val2']);
$func = minus($_POST['val1'],$_POST['val2']);
$func = multiply($_POST['val1'],$_POST['val2']);
$func = divide($_POST['val1'],$_POST['val2']); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:55:30.990

您还可以将函数实现为[闭包](http://ch1.php.net/manual/en/functions.anonymous.php)并传递该闭包。如果传递一个函数是你想要的。

```
$divide = function($val1, $val2) {
    $div = $val1 / $val2;
    echo $div;
};

$divide($_POST['val1'], $_POST['val2']);
other_function($divide, $param, $otherParam); // you could use the closure $divide inside this function. 
```

但请不要忘记转义您用于脚本的用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:41:03.470

使用您建议的代码，您不会创建要动态调用的 4 个变量，而是调用 4 个函数加、减、乘和除。这些函数生成输出，就像您实现它们一样。`$func`总是被这些函数的返回值替换。

相反，如果你真的必须使用动态函数调用，你应该尝试这样的事情：

```
call_user_func($_POST['operation'],$_POST['val1'],$_POST['val2']); 
```

请注意，对于生产，您确实应该验证后变量值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:41:11.850

[请在此处](http://php.net/manual/en/functions.variable-functions.php)查看如何使用变量函数，并查看您尝试过的完整代码。

也许你正在尝试这样的事情：

```
function add($one, $two)
{
   return $one + $two;
}

$funcname = "foo";
echo $funcname(1, 4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:07:17.197

这是您可以尝试并使其适合您的需求的方法。

```
function user_selection($operation,$op1,$op2){
   switch ($operation){
    case '+':
        return $op1 + $op2;
        break;
    case '-':
        return $op1 - $op2;
        break;
    case '*':
        return $op1 * $op2;
        break;          
    case '/':
        return $op1 / $op2;
        break;  
    } 
```

}

并调用上面的函数，你可以把

```
 $functionName = 'user_selection';
  echo $functionName('+',1,2); 
```

您可以通过更改参数、操作等来做不同的事情。为了更好地理解这件事是如何工作的，请查看[变量函数的 php 手册](http://php.net/manual/en/functions.variable-functions.php)

# c# - 如何在 C# 中使用 CreateObject 打开 word 文档？

> ID：13339282
> 
> 赞同：1
> 
> 时间：2012-11-12T06:33:29.290
> 
> 标签：c#, ms-word

我使用以下代码进行了尝试，但它引发了异常。`"Exception has been thrown by the target of an invocation."`

```
System.Type wordType = System.Type.GetTypeFromProgID("Word.Application");
        Object word = System.Activator.CreateInstance(wordType);
        wordType.InvokeMember("Visible", BindingFlags.SetProperty, null, word, new Object[] { true });
        Object documents = wordType.InvokeMember("Documents", BindingFlags.GetProperty, null, word, null);
        object nullobj = Missing.Value;
        string fileName=System.AppDomain.CurrentDomain.BaseDirectory + "assets\\sample_doc.docx";
        object[] args = new object[15] { fileName, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj, nullobj};
        Object document = documents.GetType().InvokeMember("Open", BindingFlags.InvokeMethod, null, documents,args);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:30:16.987

```
using (FileStream stream = new FileStream(FileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
 Document Doc = new Document(stream);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:48:20.513

```
public void openWordDocument(string filePath)
{
    object missing = System.Reflection.Missing.Value;

    //create a document in this path  
    object fileName = filePath;

    object wordApp = Activator.CreateInstance(Type.GetTypeFromProgID("Word.Application"));
    //Setup our Word.Document  
    object wordDoc = wordApp.GetType().InvokeMember("Documents", System.Reflection.BindingFlags.GetProperty, null, wordApp, null);
    //Set Word to be not visible  
    wordApp.GetType().InvokeMember("Visible", System.Reflection.BindingFlags.SetProperty, null, wordApp, new object[] { true });

    //Open the word document fileName  
    object activeDoc = wordDoc.GetType().InvokeMember("Open", System.Reflection.BindingFlags.InvokeMethod, null, wordDoc, new Object[] { fileName });
} 
```

# grails - 将 grails 从 1.3.x 升级到 2.0.4 后出现错误“无法解析 org.jfree.util.Log grails”

> ID：13339285
> 
> 赞同：0
> 
> 时间：2012-11-12T06:33:42.180
> 
> 标签：grails, log4j, grails-2.0

我有在 grails 1.3.x 版本中开发的应用程序，我升级到 2.0.4，我有一个`Log.debug()` 声明和导入`import org.jfree.util.Log`包，当我运行应用程序时，它给了我错误。

```
unable to resolve class org.jfree.util.Log grails 
```

升级后log4j的配置是什么，如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:12:17.273

这是登录grails 2.0的方式

```
package org.other

import org.apache.commons.logging.LogFactory

class MyClass { private static final log = LogFactory.getLog(this) … } 
```

然后使用 log.debug( ... )

见[日志指南](http://www.grails.org/doc/latest/guide/conf.html#logging)

# html - HTML5 音频元素在 IE10 中不起作用，但在 Chrome 中起作用。为什么？

> ID：13339291
> 
> 赞同：8
> 
> 时间：2012-11-12T06:34:28.087
> 
> 标签：html, audio, internet-explorer-10

HTML5 音频在 IE10 中不起作用，但在 Chrome 中起作用。任何想法？

![HTML5 音频 IE10 问题](../Images/ab0e594bdccad29ac055a7ea710316cd.png)

使用的 HTML 如下，

![在此处输入图像描述](../Images/ca5e91a87c72cec52a9184060f738974.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:57:40.870

Win8 或 RT 上的 IE10 不支持 wav，但 IE10 Mobile 支持！我附上屏幕截图，以便您查看两种 IE10 都支持哪些格式。

最上面的是 Windows 8 RT 上的 IE10 (Metro)，下面是 WP8 / Lumia 920 上的 IE10 Mobile。

![Windows Phone 8 上的 IE10 移动版](../Images/de7617cbc4d87f777a2bc0a5bd7ca9fc.png) ![Windows 8 RT 上的 IE10（地铁）](../Images/4defb7c9759f53f75e077e8a8f5e4291.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:46:17.770

IE10 不支持 wav。您始终可以使用[此页面](http://textopia.org/androidsoundformats.html)在不同的浏览器上测试音频格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T19:57:17.030

检查您的服务器（或本地计算机）以正确关联文件类型。在 unix 系统上，您可以添加：

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/mp4 .m4v
AddType video/webm .webm 
```

到 .htaccess 文件。您可以从托管视频文件的同一目录中提供它。虽然大多数浏览器都能正确解释文件的 MIME 类型，但 IE（和一些较旧的浏览器）却不能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T04:47:01.063

谷歌浏览器，我认为会同时查看 .mp3 文件的标题和文件长度。无论对错，它默认为文件长度。IE，仅正确使用文件头。如果您使用的是评估软件，那么在购买之前，头文件的长度通常会受到限制，即使它在评估软件中显示并播放您的完整 .mp3 文件。

# c# - BitmapImage 在 NUnit 中抛出 System.DividByZeroException 用于 Windows Phone 单元测试

> ID：13339293
> 
> 赞同：1
> 
> 时间：2012-11-12T06:34:50.340
> 
> 标签：c#, windows-phone-7, nunit

我在 Windows Phone 7 上有一个照片应用程序，现在尝试用 NUnit 编写一些单元测试。我正在尝试从嵌入式资源中加载一些图像，我尝试了两种不同的方法，但它们都不适合我......

1.  这在实例化 BitmapImage 对象时给了我 System.DivideByZero 异常

    ```
    BitmapImage image = new BitmapImage(new Uri("data/data000.jpg"));
    WriteableBitmap testData = new WriteableBitmap(image); 
    ```

2.  这给了我“无法确定调用者的应用程序身份”。调用 PictureDecoder.DecodeJpeg() 时。

    ```
    using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("MyApp.Test.data.data000.jpg")) {
      WriteableBitmap testData = PictureDecoder.DecodeJpeg(stream);
    } 
    ```

知道我还应该做什么或尝试什么吗？我尝试了 NUnit（来自 NuGet）和 NUnit-WindowsPhone（也来自 NuGet）。

非常感谢！

编辑：我需要补充的一件事是我正在通过 Resharper 运行测试用例，我不确定这是否重要......

问候，凯恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:32:15.627

如果我没记错的话，您必须在单元测试类库中除 mscorlib 之外的所有引用上将“复制本地”设置为 true。

编辑：我相信您最好的选择是重写代码，因此您的视图模型中只有图像名称（如果您使用的是 MVVM？）。然后你可以测试你自己的逻辑，你正在选择正确的图像等。无论如何测试 BitmapImage/WriteableBitmap 是没有意义的。

在非 Silverlight 运行时运行 Silverlight 代码的痛苦……

# java - log4j.properties 配置

> ID：13339294
> 
> 赞同：4
> 
> 时间：2012-11-12T06:34:52.157
> 
> 标签：java, log4j

我有 2 个课程，LogonPolicyServer 和 SCE。我需要从 LogonPolicyServer 到第一个文件 (firstFile.log) 的日志信息、从 SCE 到第一个文件的日志信息、从 SCE 到第二个文件 (secondFile.log) 的日志错误以及从 SCE 类到控制台的打印信息和错误，但是当我尝试这样做，来自 LogonPolicyServer 的信息也会打印到控制台。我的 log4j.properties：

```
    log4j.rootLogger=INFO，控制台

    log4j.appender.console = org.apache.log4j.ConsoleAppender
    log4j.appender.console.target=System.out
    log4j.appender.console.layout = org.apache.log4j.PatternLayout
    log4j.appender.console.layout.ConversionPattern = %d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

    log4j.logger.infoNTS=调试，文件
    log4j.appender.file=org.apache.log4j.RollingFileAppender
    log4j.appender.file.file=log/spider.cisco.log
    log4j.appender.file.MaxFileSize=1GB
    log4j.appender.file.MaxBackupIndex=10
    log4j.appender.file.layout=org.apache.log4j.PatternLayout
    log4j.appender.file.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

    log4j.logger.errorlog=错误，错误文件
    log4j.appender.errorFile=org.apache.log4j.RollingFileAppender
    log4j.appender.errorFile.file=log/error.spider.cisco.log
    log4j.appender.errorFile.MaxFileSize=1GB
    log4j.appender.errorFile.MaxBackupIndex=10
    log4j.appender.errorFile.layout=org.apache.log4j.PatternLayout
    log4j.appender.errorFile.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n
    log4j.appender.errorFile.Threshold=错误

```

在 LogonPolicyServer 我会尝试：

```
    private static final Logger log = Logger.getLogger("infoNTS");

    //连接记录器

```

然后打印信息：

```

    log.debug("记录 "+i+":"+record.name+" "+res.getString(3)+" "+res.getString(4));

```

SCE：

```
    private static final Logger log = Logger.getLogger("infoNTS");
    private static final Logger errorLog = Logger.getLogger("errorlog");

```

然后打印：

```
    尝试{
     api.synchronizePushStart(resultHandler);
     log.info("SCE启动同步："+sceIP+"启动成功");
    }catch（异常 e）{
     errorLog.error("SCE启动同步："+sceIP+"失败！", e);
    }

```

怎么了？UPD：最新的 log4j.properties

```
    log4j.rootLogger=致命，控制台

    log4j.appender.console = org.apache.log4j.ConsoleAppender
    log4j.appender.console.target=System.out
    log4j.appender.console.layout = org.apache.log4j.PatternLayout
    log4j.appender.console.layout.ConversionPattern = %d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

    log4j.logger.infoNTS=调试，文件
    log4j.appender.file=org.apache.log4j.RollingFileAppender
    log4j.appender.file.file=log/spider.cisco.log
    log4j.appender.file.MaxFileSize=1GB
    log4j.appender.file.MaxBackupIndex=10
    log4j.appender.file.layout=org.apache.log4j.PatternLayout
    log4j.appender.file.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

    log4j.logger.errorlog=错误，错误文件
    log4j.appender.errorFile=org.apache.log4j.RollingFileAppender
    log4j.appender.errorFile.file=log/error.spider.cisco.log
    log4j.appender.errorFile.MaxFileSize=1GB
    log4j.appender.errorFile.MaxBackupIndex=10
    log4j.appender.errorFile.layout=org.apache.log4j.PatternLayout
    log4j.appender.errorFile.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n
    log4j.appender.errorFile.Threshold=错误

```

UPD2：这有助于：

```

    log4j.rootLogger=OFF, 致命文件
    log4j.appender.fatalFile=org.apache.log4j.RollingFileAppender
    log4j.appender.fatalFile.file=log/fatal.log
    log4j.appender.fatalFile.MaxFileSize=10MB
    log4j.appender.fatalFile.MaxBackupIndex=10
    log4j.appender.fatalFile.layout=org.apache.log4j.PatternLayout
    log4j.appender.fatalFile.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

    log4j.logger.infoNTScopy=调试，文件
    log4j.logger.infoNTS=调试、文件、控制台
    log4j.appender.file=org.apache.log4j.RollingFileAppender
    log4j.appender.file.file=log/spider.cisco.log
    log4j.appender.file.MaxFileSize=1GB
    log4j.appender.file.MaxBackupIndex=10
    log4j.appender.file.layout=org.apache.log4j.PatternLayout
    log4j.appender.file.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

    log4j.logger.errorlog=错误、错误文件、控制台
    log4j.appender.errorFile=org.apache.log4j.RollingFileAppender
    log4j.appender.errorFile.file=log/error.spider.cisco.log
    log4j.appender.errorFile.MaxFileSize=1GB
    log4j.appender.errorFile.MaxBackupIndex=10
    log4j.appender.errorFile.layout=org.apache.log4j.PatternLayout
    log4j.appender.errorFile.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n
    log4j.appender.errorFile.Threshold=错误

    log4j.appender.console = org.apache.log4j.ConsoleAppender
    log4j.appender.console.target=System.out
    log4j.appender.console.layout = org.apache.log4j.PatternLayout
    log4j.appender.console.layout.ConversionPattern = %d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

```

在 LogonPolicyServer 中：

```
    private static final Logger log = Logger.getLogger("infoNTScopy");

```

但现在我需要禁用/删除根记录器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:00:32.227

尝试将根记录器分配为`FATAL`并将日志转移到一个虚拟文件：

```
 log4j.rootLogger=FATAL, fatalFile
    log4j.appender.fatalFile=org.apache.log4j.RollingFileAppender
    log4j.appender.fatalFile.file=log/fatal.log
    log4j.appender.fatalFile.MaxFileSize=10MB
    log4j.appender.fatalFile.MaxBackupIndex=10
    log4j.appender.fatalFile.layout=org.apache.log4j.PatternLayout
    log4j.appender.fatalFile.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n 
```

并添加`console appender`为`log4j.logger.infoNTS`：

```
log4j.logger.infoNTS=DEBUG, file, nConsole
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.file=log/spider.cisco.log
log4j.appender.file.MaxFileSize=1GB
log4j.appender.file.MaxBackupIndex=10
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.conversionPattern=%d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n

log4j.appender.nConsole= org.apache.log4j.ConsoleAppender
log4j.appender.nConsole.target=System.out
log4j.appender.nConsole.layout = org.apache.log4j.PatternLayout
log4j.appender.nConsole.layout.ConversionPattern = %d{[dd.MM.yyyy] [HH:mm:ss]} %p [%t] %c (%F:%L) - %m%n 
```

# core-graphics - 在哪里可以找到 CATransformLayer 示例和文档

> ID：13339302
> 
> 赞同：0
> 
> 时间：2012-11-12T06:36:16.700
> 
> 标签：core-graphics, catransformlayer

有什么地方可以阅读关于 CATransformLayer 的好教程吗？
Apple 的文档似乎对此非常简短。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:23:31.377

[您可以在http://markpospesel.wordpress.com/2012/05/10/anatomy-of-a-folding-animation/](http://markpospesel.wordpress.com/2012/05/10/anatomy-of-a-folding-animation/)找到 Mark Pospesel 的精彩作品

# c# - 将自定义类添加到列表时遇到问题（C#）

> ID：13339312
> 
> 赞同：6
> 
> 时间：2012-11-12T06:37:35.900
> 
> 标签：c#, list, class

我希望我的术语在这里是正确的，仍然学习所有正确的术语。

我使用以下代码创建了一个自定义类：

```
 public class inputData
{
    public string type;
    public int time;
    public int score;
    public int height;
} 
```

我想创建一个包含该类的列表，就像我在这里所做的那样：

```
List<inputData> inputList = new List<inputData>(); 
```

我现在正在尝试添加到该列表中，但遇到了麻烦。我已经尝试了以下两种方法，但仍然没有运气。有人可以在这里指出我正确的方向吗？

```
inputList.Add(new inputData("1", 2, 3, 4));

inputList.type.Add("1"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T06:39:03.980

你需要[**对象初始化器**](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

**改变**

```
inputList.Add(new inputData("1", 2, 3, 4)); 
```

**到**

```
inputList.Add(new inputData{type="1", time=2, score=3, height=4}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T06:44:54.513

问题不在于列表，而在于 inputData 类 - 您正在尝试使用未定义的构造函数。将构造函数添加到 inputData 类中：

```
public inputData(string type, int time, int score, int height)
{
  this.type=type; this.time=time, this.score=score, this.height=height
} 
```

其次，遵循 C# 约定 - 类名应以大写开头，公共字段替换为 C# 属性。但这不是您的代码不起作用的问题。

# rake - Rake 资产错误：预编译

> ID：13339314
> 
> 赞同：0
> 
> 时间：2012-11-12T06:37:42.883
> 
> 标签：rake, ruby-on-rails-3.2, capistrano, asset-pipeline

我正在尝试使用 Capistrano 在服务器上部署我的应用程序。我运行了 deploy:setup 和 deploy:check 成功。

deploy:update 的一些任务成功通过，但**deploy:asset:precompile**任务似乎使 ruby​​ 崩溃。

我试图了解错误的原因：问题似乎与**Rails Asset Pipeline**和**postgresql_adapter**有关。

我有点迷茫，因为我对资产管道不太了解。我至少知道资产管道与 javascript 和 CSS 样式表有关，所以我不明白 postgresql_adapter 在这里做什么？

这些是我的（服务器和工作站）版本：

*   导轨 3.2.8
*   RVM 1.16.17
*   宝石 1.8.24
*   捆绑器 1.2.1
*   pg 宝石 0.14.1

我还尝试在服务器上运行 commande **bundle exec rake assets:precompile**，结果是一样的。所以问题与这个命令有关。

这是我得到的错误的摘要：

```
 * 2012-11-09 16:54:21 executing `deploy:assets:precompile'
  * executing "cd /var/www/opf/releases/20121109155419 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["192.168.5.200"]
    [192.168.5.200] executing command
 ** [out :: 192.168.5.200] /var/www/opf/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213: [BUG] Segmentation fault
 ** [out :: 192.168.5.200] ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

无论如何，这是我的 config/deploy.rb ：

```
require 'bundler/capistrano'
require File.join(File.dirname(__FILE__), 'deploy') + '/capistrano_database'

set :rvm_type, :system

set :rvm_ruby_string, 'ruby-1.9.3-p194@rail3dev20120606'
require 'rvm/capistrano'

set :application, 'opf'
set :deploy_to, '/var/www/opf'
set :rails_env, 'production'
set :user, 'the_user'
set :use_sudo, false

set :group_writable, false
set :scm, :git
set :repository,  'git@github.com:user/opf.git'
set :branch, 'master'

default_run_options[:pty] = true

set :deploy_via, :remote_cache

server '192.168.5.200', :web, :app, :db, :primary => true

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

非常欢迎帮助，因为我不知道在哪里看。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:54:28.023

我终于找到了解决方案！

首先知道 PhusionPassenger 显示的错误消息：

```
Passenger encountered the following error:
The application spawner server exited unexpectedly: Unexpected end-of-file detected.

Exception class:
    PhusionPassenger::Rack::ApplicationSpawner::Error 
```

与宝石无关，但通常情况下可能如此处[所述](https://makandracards.com/makandra/8049-how-to-fix-passenger-unexpected-end-of-file-detected-error)。

[你可以在这里](https://stackoverflow.com/a/15656949/1640771)找到我的解决方案。

# sonarqube - 声纳抛出错误 BadDatabaseVersion

> ID：13339315
> 
> 赞同：3
> 
> 时间：2012-11-12T06:37:45.650
> 
> 标签：sonarqube

我已经在服务器 A 和服务器 B 上安装了声纳和 mysql 数据库。我正在尝试使用 sonar-runner 运行声纳分析，但每次我收到以下错误：

```
Caused by: java.lang.RuntimeException: wrapper
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.monitorAndThrowReflectionLifecycleException(ReflectionLifecycleStrategy.java:130)
    ... 22 more
Caused by: org.sonar.core.persistence.BadDatabaseVersion: The current batch process and the configured remote server do not share the same DB configuration.
    - Batch side: jdbc:mysql://xx.xx.xx.xx:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true (sonar / *****)
    - Server side: check the configuration at http://xx.xx.xx.xx:9000/system 
```

服务器 B 正在从服务器 A 访问数据库。我已经检查了批处理和服务器端的所有配置，一切似乎都正常。

我也用谷歌搜索并找到了[以下链接](https://jira.codehaus.org/browse/SONAR-3685)，但我不明白如何解决这个问题。

任何指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:40:54.343

**如果您有2 个 Sonar 实例指向同一个数据库，**也会发生此错误。每个数据库只能有一个 Sonar 实例。

Sonar每次启动时都会更新`properties`表中的一行，然后在执行分析时将缓存值与数据库中的值进行比较。`prop_key = 'sonar.core.id'`如果两者不匹配，则会出现错误。

要修复它，请关闭两个实例，然后仅重新启动您要保留的实例。Sonar 将重置 sonar.core.id 值，并且一切应该会再次正常工作。

您可以通过 REST 获取服务器的缓存 id： `http://server:port/sonar/api/server`

它必须与数据库中的那个相匹配，Sonar 才能工作。 `select * from properties where prop_key = 'sonar.core.id'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:59:17.473

您确定 Sonar 服务器使用的数据库设置：

*   [http://xx.xx.xx.xx:9000/system](http://xx.xx.xx.xx:9000/system)

匹配您的构建使用的数据库凭据？

错误消息表明他们没有。JIRA 问题[SONAR-3685](https://jira.codehaus.org/browse/SONAR-3685)以“不是错误”解决代码关闭。

# ruby-on-rails - 如何在控制器中使视图“缓存执行”模拟？

> ID：13339317
> 
> 赞同：1
> 
> 时间：2012-11-12T06:38:02.527
> 
> 标签：ruby-on-rails, caching

我想总结`cache`一下：

```
- cache_wrap(cache_key, cache_options) do
  %div cached block 
```

使用 cache_wrap 就像：

```
helper_method :cache_wrap
def cache_wrap(key, options)
  if key.empty?
    yield
  else
    Rails.cache.fetch(key, options) do
      yield
    end
  end

  nil
end 
```

而且我想在控制器中使用cache_wrap，而不是在助手中。我可以这样做吗？我想在控制器中处理 cache_wrap 逻辑，因为这个逻辑与控制器中的另一个代码有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:19:23.980

您的示例应该按预期工作。

但是可能，您应该使用相同的钩子`cache_wrap`将控制器逻辑暴露给视图层，而不是放入控制器。`helper_method`

通过这种方式，您可以保持控制器更清洁，同时仍具有计划中的功能。

# javascript - 在 CSS 文件中使用 JavaScript

> ID：13339321
> 
> 赞同：0
> 
> 时间：2012-11-12T06:38:31.060
> 
> 标签：javascript, css

> **可能重复：**
> [在 CSS 中使用 Javascript](https://stackoverflow.com/questions/476276/using-javascript-in-css)

我正在从 Phonegap 开发一个 android 应用程序。我需要相对设置一个容器的宽度：找到一个容器的宽度，并按比例设置所需容器的宽度。我可以在 JavaScript 中轻松做到这一点。但我需要在 CSS 代码中执行此操作，有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:46:54.657

尝试 LESS 动态样式表语言： http: [//lesscss.org/](http://lesscss.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:27:41.023

正如建议的那样，less 可以做到这一点，但我认为这不是一个选择，因为它需要重新考虑你的整个造型方法。

评论中有一个链接，但我对你的建议是 - 它太复杂了，无法按照你的意愿完成。您可能应该重新考虑直接使用 javascript 更改属性的方法。

IT 将是最干净的解决方案。

# bash - Bash grep/echo 用空格替换 n

> ID：13339323
> 
> 赞同：0
> 
> 时间：2012-11-12T06:38:56.640
> 
> 标签：bash

我正在编写一个小脚本来每小时 cron 检查我们的 Ironport 日志，以了解内部员工是否发送垃圾邮件。这个片段导致了一些奇怪的行为，其中 n 个字符（不是换行符）被替换为空格，例如

> Nov 12 17:17:27 [sanitized] 1 textmail-[sanitized]: I fo: MID 2417158 i terim verdict usi ge gi e: CASE spam positive

代码：

```
VAR=`egrep $line /var/spam_checker/log_temp`
# extract email address from that variable
echo -e $VAR >> /var/spam_checker/debug 
```

注意。这是一段代码 - 将其存储在变量中而不是写入文件是有原因的

我错过了 egrep/echo 的开关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T07:48:51.680

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

还要加上双引号`$VAR`，以防它包含特殊的 shell 字符。– 巴尔马尔

```
echo -e "$VAR" >> /var/spam_checker/debug 
```

# css - css 中的 100% 宽度在较低的屏幕分辨率下不起作用

> ID：13339329
> 
> 赞同：0
> 
> 时间：2012-11-12T06:39:25.037
> 
> 标签：css

我正在做一个项目[http://damiracle.com/clientdemos/site_ibfa/](http://damiracle.com/clientdemos/site_ibfa/) 我正在使用标题面板宽度 100%。

```
 #header
{

    width:100%;
    height:829px;
    /*background:url(../images/head2.png) repeat-x;*/
    background:#000;
    /*overflow:hidden;*/
    margin-bottom:10px; 

    } 
```

当它是大屏幕分辨率时一切正常，但当它是较小的屏幕分辨率时，它在右侧显示一个空白。我已经尝试了一切。我写了一个全局css

```
html,body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td {margin:0;padding:0; border:0;font-size:100%; font:inherit; vertical-align:baseline;} 
```

但它也不起作用。如果有人帮我解决这个问题，我将不胜感激。在此先感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:48:35.337

添加`min-width:1200px;`到您的`#header`

```
#header {
    width:100%;
    height:829px;
    background:#000;
    margin-bottom:10px; 
    min-width: 1200px;
} 
```

PS：您可以为所有块使用一张背景图片！优化您的网站。对于块中的标题，使用`img`with `alt`（对于 SEO 和禁用图像的用户来说这是一个很好的路径），如下所示：

```
<img src="/images/destination-egypt.png" alt="Destination Egypt"/> 
```

或者为了更优化使用[CSS-sprites](http://css-tricks.com/css-sprites/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:19:51.363

这是因为你`#headerTOP`有一个`width: 1200px`. 因此，您`#header`只需获得屏幕尺寸的 100% 尺寸。但是`#headerTOP`如果屏幕宽度低于`1200px`.

# php - ajax 只更新一次

> ID：13339333
> 
> 赞同：0
> 
> 时间：2012-11-12T06:40:15.220
> 
> 标签：php, javascript, jquery, ajax

我有一个列表显示数据库中的一些信息，当您向数据库添加项目时，我希望更新列表。

```
function getList(id) {
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("list").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "tool/getlist.php?q=" + id);
    xmlhttp.send();
}

function addItem() {

    $.post('tool/addListItem.php', $("#addItem").serialize());
    var listID = $("#addItem").serializeArray()[0].value;
    getList(listID);
}​ 
```

信息很好，问题是当我从 addItem() 调用 getList 函数时，如果我再次调用它会更新，第一次没有任何反应，但第三次没有任何反应，然后它会更新。

我在更新前运行了一些带有警报的调试。

```
var listID = $("#addItem").serializeArray()[0].value;
alert(listID);
getList(listID); 
```

如果我这样做，它会在我单击确定后更新。

一般来说，我对 javascript 和 ajax 还是很陌生，所以这可能是一个简单的错误，但在过去的几个小时里，它一直让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:53:15.383

您正在调用 post 并且 get 是在 post 完成工作之前调用的，即将数据放入数据库中。`You need to call the getList in success of post`以便您从数据库中获取数据。[**在此处**](http://api.jquery.com/jQuery.post/)阅读有关帖子的更多信息。

```
 $.post('tool/addListItem.php', $("#addItem").serialize()).success(function() {           
          getList(listID); 
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:52:13.310

试试这个

```
xmlhttp.open("GET", "tool/getlist.php?q=" + id,true); 
```

# c# - 当用户更新我的应用程序时，本地存储是否会被删除？

> ID：13339334
> 
> 赞同：5
> 
> 时间：2012-11-12T06:40:16.683
> 
> 标签：c#, windows-8, microsoft-metro, local-storage

我在 windows 8 应用商店中有一个 windows 8 应用程序（数字床头柜）。该应用程序将用户偏好存储在用户机器上的 XML 文件中，也称为本地存储。我想知道的是，如果我为我的应用发布更新并且用户接受更新，是否会清除现有存储的设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T07:06:42.167

答案是不！

当用户更新应用程序时不要担心，本地和漫游文件夹/设置不会被清除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T20:56:46.610

数据不会被删除。但是如果你发布了一个更新并且你已经改变了数据存储的版本，那么你需要有一种机制来将数据从版本 0 复制到版本 1。

您可以选择为您的应用程序版本化应用程序数据。这将使您能够创建应用程序的未来版本，以更改其应用程序数据的格式，而不会导致与应用程序的先前版本的兼容性问题。应用程序检查数据存储中应用程序数据的版本，如果版本低于应用程序期望的版本，应用程序应将应用程序数据更新为新格式并更新版本。有关详细信息，请参阅 Application.Version 属性和 ApplicationData.SetVersionAsync 方法。

应用程序数据示例[http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)包含对您有帮助的版本代码。

**版本控制：** 应用程序数据可以利用应用程序数据的版本控制从一种数据结构升级到另一种数据结构。版本号与应用版本不同，可以随意设置。虽然没有强制执行，但强烈建议仅使用增加的版本号，因为在转换到代表较新数据的较低数据版本号时可能会发生不希望的情况，包括数据丢失。请注意，应用程序数据仅在具有相同版本号的应用程序之间漫游。例如，版本 2 上的设备将在彼此之间转换数据，版本 3 上的设备也会这样做，但版本 2 和版本 3 设备之间不会自动转换。这是版本号更新时应用程序的责任。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T07:26:45.277

没有数据在更新后仍然存在。我知道当您在 Visual Studio 中更改清单文件时会发生这种情况，但不会在通过市场更新应用程序时发生。

# xml - 如何在 Dynamics CRM 中制作按相关实体的属性分组的图表？

> ID：13339336
> 
> 赞同：1
> 
> 时间：2012-11-12T06:40:17.183
> 
> 标签：xml, charts, dynamics-crm-2011

如何在 xml 图表中对另一个实体的属性进行分组？我想要 CRM 用户（x 轴）的数字约会图表（y 轴），约会按帐户的 accountcategorycode 分组。我正在使用仅显示有关帐户的约会的视图。

我有一个按帐户对约会进行分组的图表，效果很好：

```
 <visualization>
      <visualizationid>{8CC67476-302B-E211-86B2-005056BD0001}</visualizationid>
      <name>Appointment by User Stacked by Rating</name>
      <primaryentitytypecode>appointment</primaryentitytypecode>
      <datadescription>
        <datadefinition>
          <fetchcollection>
            <fetch mapping="logical" aggregate="true">
              <entity name="appointment">
                <attribute groupby="true" alias="ownerid" name="ownerid" />
                <attribute groupby="true" alias="gp" name="regardingobjectid" />
                <attribute alias="accountref" name="regardingobjectid"          aggregate="count" />
                <link-entity name="account" from="accountid" to="regardingobjectid" alias="aa">
                    <attribute name="accountcategorycode" alias="code" aggregate="count" />
                </link-entity>
                 <filter type="and">
                    <condition attribute="activitytypecode" operator="eq" value="4201" />
                </filter>
              </entity>
            </fetch>
          </fetchcollection>
          <categorycollection>
            <category alias="ownerid">
              <measurecollection>
                <measure alias="accountref" />
              </measurecollection>
            </category>
          </categorycollection>
        </datadefinition>
      </datadescription>
      <presentationdescription>
        <Chart Palette="None" PaletteCustomColors="55,118,193; 197,56,52; 149,189,66; 117,82,160; 49,171,204; 255,136,35; 97,142,206; 209,98,96; 168,203,104; 142,116,178; 93,186,215; 255,155,83">
          <Series>
            <Series ChartType="StackedColumn" IsValueShownAsLabel="False" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PointWidth=0.75, MaxPixelPointWidth=40"></Series>
          </Series>
          <ChartAreas>
            <ChartArea BorderColor="White" BorderDashStyle="Solid">
              <AxisY LabelAutoFitMinFontSize="8" TitleForeColor="59, 59, 59" TitleFont="{0}, 10.5px" LineColor="165, 172, 181" IntervalAutoMode="VariableCount">
                <MajorGrid LineColor="239, 242, 246" />
                <MajorTickMark LineColor="165, 172, 181" />
                <LabelStyle Font="{0}, 10.5px" ForeColor="59, 59, 59" />
              </AxisY>
              <AxisX LabelAutoFitMinFontSize="8" TitleForeColor="59, 59, 59" TitleFont="{0}, 10.5px" LineColor="165, 172, 181" IntervalAutoMode="VariableCount">
                <MajorTickMark LineColor="165, 172, 181" />
                <MajorGrid LineColor="Transparent" />
                <LabelStyle Font="{0}, 10.5px" ForeColor="59, 59, 59" />
              </AxisX>
            </ChartArea>
          </ChartAreas>
          <Titles>
            <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="59, 59, 59"></Title>
          </Titles>
        </Chart>
      </presentationdescription>
      <isdefault>false</isdefault>
    </visualization></visualization> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:51:13.620

您是否尝试过导出图表（您似乎已经这样做了）并使用链接的 group by 修改 fetchXML？我经常参考这个 fetchXML 帮助页面中关于聚合语法的示例：http: [//msdn.microsoft.com/en-us/library/gg309565.aspx#groupby_linked](http://msdn.microsoft.com/en-us/library/gg309565.aspx#groupby_linked)

请注意链接跳转到的示例是 groupby_linked 并且可以按预期工作。（将 groupby 向下移动到链接实体的字段中）

FetchXML 可能不允许跨实体的多个分组依据，试一试，如果是这种情况，您会很快发现。

# iphone - 使用 UIPopoverController 和 UIImagePickerController 连接到 Ipad 照片库

> ID：13339337
> 
> 赞同：1
> 
> 时间：2012-11-12T06:40:31.217
> 
> 标签：iphone, xcode, ipad, uiimagepickercontroller, uipopovercontroller

我创建了一个应用程序并有“图库”按钮，我想在按下该按钮时可以看到 Ipad 照片库中的所有图像。我的代码在这里：

```
- (IBAction)btGallery:(id)sender {
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    picker.delegate = self;
    if(popoverController == nil)
    {
        popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
    }
    popoverController.delegate = self;
    [popoverController presentPopoverFromRect:self.view.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
} 
```

但是当我按下那个按钮时，我什么都看不到……请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:37:22.733

我以编程方式完成了它，它为我工作。在您的按钮方法中添加此代码

确保更改 ivars 的名称

```
self.picker = [[UIImagePickerController alloc] init];
self.picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
self.picker.delegate = self;

self.popOver = [[UIPopoverController alloc] initWithContentViewController:self.picker];

[self.popOver presentPopoverFromRect:CGRectMake(10, 30, 200, 350)
                                   inView:self.view
                                permittedArrowDirections:UIPopoverArrowDirectionUp
                                 animated:YES];} 
```

这应该对你有用，如果你不能，请通知。

# png - JPG实际上比PNG有什么优势吗？

> ID：13339341
> 
> 赞同：3
> 
> 时间：2012-11-12T06:41:00.447
> 
> 标签：png, jpeg

我最近无意中听到一个对话片段，其中一个人无休止地宣扬 JPG 优于所有其他格式的优势。以我的经验，PNG 可以做更多的事情（透明度，更好的文本显示），同时使用相同数量的空间，如果不是更少的话，比使用相同源 PSD、AI 或原始捕获图像制作的 JPG。

这让我思考；JPG实际上比PNG有*什么*优势吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T06:46:22.213

您正在将苹果与桃子进行比较，或者正确的成语是什么。

PNG是无损的，jpg默认是有损的。PNG 支持调色图像（例如 256 种单独的颜色作为 GIF）和可变位深度图像，而 JPG 支持真彩色、每通道 8 位和 16 位图像。

这些图像的来源不同。其他用于矢量图或人工图形，其他用于照片等。

格式的用途不同：一个选择 PNG 来存储位图字体或公司徽标，而选择 JPG 来存储桌面壁纸图像、向朋友发送假日图片以及在网页上显示（非矢量）图形。优点是有机会将质量换成文件大小。JPEG 格式的高质量照片每像素占用 2 位，高分辨率 (1920x1280) 为 600kb。使用 PNG 无损压缩的相同图像可能需要 3-6 Mb。一些电子邮件提供商会拒绝发送或接收大附件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:29:20.957

> PNGs can do much more (transparency, better text display), while using up the same amount of space

Besides the "better text display" remark (which makes little sense), the end of the statement is tipically false, specially when dealing with photographic images: in this sceneario (very common) JPEG uses much less space, it compresses much better, by using a lossy encoding. This is the main advantage of JPEG.

See for example here: [http://en.wikipedia.org/wiki/Portable_Network_Graphics#Comparison_to_JPEG](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Comparison_to_JPEG)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:45:31.510

对于典型的应用程序，jpeg 压缩格式的文件大小比 png 变体小。确切的大小取决于各个方面，原始图像的大小及其内容。Jpeg 压缩是可变的，通常用于照片等图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:12:50.100

PNG 大小取决于图片中的信息量 - 颜色、alpha 通道等。 JPEG 大小取决于压缩率（或图像质量），如前所述。例如 - 在 PNG 格式中每个像素具有唯一颜色（RGBA 值）的小分辨率图像将占用更大的尺寸，然后在 JPEG 格式中具有大约 70% 压缩率的相同图像。

# windows - 何时设置 Windows VERSIONINFO PrivateBuild？

> ID：13339347
> 
> 赞同：2
> 
> 时间：2012-11-12T06:41:24.817
> 
> 标签：windows, resources, versioninfo

我应该什么时候在 Windows资源中设置`PrivateBuild`标志？[Microsoft 文档说](http://msdn.microsoft.com/en-us/library/aa381058%28v=vs8.5%29)我需要在以下情况下使用它`VERSIONINFO`：

> “文件不是使用标准发布过程构建的。如果给出了这个值，则 StringFileInfo 块必须包含 PrivateBuild 字符串。”

例如，我发布了一个定制的 Python 版本，并进行了一些修改，但文件名仍然是`python27.dll`. 我应该将其标记为私有构建吗？

# mysql-connector - Drizzle JDBC 中没有这样的列

> ID：13339351
> 
> 赞同：0
> 
> 时间：2012-11-12T06:42:39.260
> 
> 标签：mysql-connector, drizzle

现在我使用 Drizzle`drizzle-jdbc-1.1`而不是`mysql-connector-java-5.1.12`. 但是当从我的表中读取数据时，它会显示这样的错误。但是这个问题只有在使用`drizzle-jdbc`并且查询成功地使用`mysql-jdbc`. 为什么？

```
SQLException information
Error msg: No such column: sampletable.DataUpdated
SQLSTATE: null
Error code: 0
java.sql.SQLException: No such column: sampletable.DataUpdated
    at org.drizzle.jdbc.internal.SQLExceptionMapper.getSQLException(SQLExceptionMapper.java:116)
    at org.drizzle.jdbc.DrizzleResultSet.getValueObject(DrizzleResultSet.java:145)
    at org.drizzle.jdbc.DrizzleResultSet.getLong(DrizzleResultSet.java:164)
    at com.samples.service.TestService.fetchData(TestService.java:327)
    at com.samples.views.TestDataView$3.run(TestDataView.java:401)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.drizzle.jdbc.internal.common.queryresults.NoSuchColumnException: No such column: sampletable.DataUpdated
    at org.drizzle.jdbc.internal.common.queryresults.DrizzleQueryResult.getValueObject(DrizzleQueryResult.java:97)
    at org.drizzle.jdbc.DrizzleResultSet.getValueObject(DrizzleResultSet.java:143)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:19:19.593

（drizzle-jdbc 作者在这里）

你应该试试 drizzle-jdbc 的最新快照版本，之前有一个你不能使用 <database>.<table> 的错误：[https ://github.com/krummas/DrizzleJDBC/issues/6](https://github.com/krummas/DrizzleJDBC/issues/6)

最新版本在这里： [https ://repository.sonatype.org/service/local/artifact/maven/redirect?r=ossrh-snapshot&g=org.drizzle.jdbc&a=drizzle-jdbc&v=1.2-SNAPSHOT&e=jar](https://repository.sonatype.org/service/local/artifact/maven/redirect?r=ossrh-snapshot&g=org.drizzle.jdbc&a=drizzle-jdbc&v=1.2-SNAPSHOT&e=jar)

生病很快构建 1.2，其中包含此修复和更多修复。

# sap - SAP 中的 ALE 配置

> ID：13339352
> 
> 赞同：-1
> 
> 时间：2012-11-12T06:42:42.537
> 
> 标签：sap, idoc

我想知道是否可以使用保存客户端为 IDoc 配置 ALE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:56:01.683

是的，可以使用相同的客户端来发送和接收 IDoc。（提示：LSMW 可以使用 Idocs 进行数据转换）

# asp.net-mvc-3 - 无法获取 kendo 下拉列表的下拉列表选定值上的值

> ID：13339353
> 
> 赞同：2
> 
> 时间：2012-11-12T06:42:46.647
> 
> 标签：asp.net-mvc-3, kendo-ui

基本上我想要实现的是我有一个名为 New 的按钮和一个名为 const 的下拉列表。目前下拉列表从数据库中正确填充。我现在遇到的问题是当我选择下拉列表值并单击新按钮时，它当前没有选择所选值。

//看法

```
 <input id="btnNewOpt" type="button" value="New" style="width:50px"/>

     @(Html.Kendo().DropDownList()
          .HtmlAttributes(new { @Style = "font-size:12px; width:255px" })
          .Name("const")
          .DataTextField("OptName")
          .DataValueField("OptID")
          .OptionLabel("Select option name")
          .DataSource(source =>
          {
              source.Read(read =>
              {
                  read.Action("GetTypeStatus", "Index");
              });
          })

       )

    $(document).ready(function () {

          $('#btnNewOpt').click(function (e)
          {
              var dropdownlist = $("#const").data("kendoDropDownList");

          }

        });

//controller:
  public JsonResult GetTypeStatus()
        {
            var consumerStatus = new HEntities();

            return Json(consumerStatus.vwCStatus.Select(c => new { OptID = c.OptID, OptName = c.OptName, OptiTypeID = c.OptiTypeID })
                .OrderBy(c => c.OptName), JsonRequestBehavior.AllowGet);

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:43:47.700

在全局范围内定义您的剑道下拉菜单，然后在您的点击句柄中通过调用 value() 访问选定的值。

```
 // create your kendo dropdown and reference to it
var mydropdown = $("#const").data("kendoDropDownList");   

// onclick ... get the value from kendo dropdown
$('#btnNewOpt').click(function (e){
 var selectedValue = mydropdown.value();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T06:35:49.353

试试这些选项。

1)

```
$(document).ready(function () {

          $('#btnNewOpt').click(function (e)
          {
              var dropdownlist = $("#const").data("kendoDropDownList").value.toString();

          }

        }); 
```

2)

```
$(document).ready(function () {

                  $('#btnNewOpt').click(function (e)
                  {

                   var dropdownlist = $("#const").data("kendoDropDownList")[0].form.const.value;

                  }

                }); 
```

3)

```
$(document).ready(function () {

                      $('#btnNewOpt').click(function (e)
                      {
                        var dropdownlist = $("#const").val();            
                      }

                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:12:47.903

添加 select() 添加它现在工作

// 创建你的剑道下拉菜单并引用它

```
var mydropdown = $("#const").data("kendoDropDownList").select();   

// onclick ... get the value from kendo dropdown
$('#btnNewOpt').click(function (e){
 var selectedValue = mydropdown.value();
} 
```

# emacs - 为什么`top`会立即在eshell中返回？

> ID：13339356
> 
> 赞同：0
> 
> 时间：2012-11-12T06:43:21.007
> 
> 标签：emacs, eshell

eshell 可以像其他 shell 那样交互地运行 top 命令吗？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:59:47.937

你可能不走运。见[这里](http://www.masteringemacs.org/articles/2010/12/13/complete-guide-mastering-eshell/)。

> 尽管 Eshell 提供了所有优势，但我想说的一些观点似乎让一些人感到困惑：
> 
> 1.  Eshell 不直接支持交互式（或 Eshell 用语中的“视觉”）程序，例如`top`，您必须告诉 Eshell 在单独的`ansi-term`实例中启动它们。

# .net - 如果仅为参数创建对象以发挥作用，何时会处置对象？

> ID：13339358
> 
> 赞同：2
> 
> 时间：2012-11-12T06:43:28.767
> 
> 标签：.net, vb.net, garbage-collection, dispose, idisposable

相比：

```
Using Response As WebResponse = Request.GetResponse
    Using reader As StreamReader = New StreamReader(Response.GetResponseStream)
        strWebResponse = reader.ReadToEnd
    End Using
End Using 
```

和：

```
Dim xmldoc As XmlDocument = new XmlDocument
xmldoc.Load(Request.GetResponse().GetResponseStream) 
```

在第一个例子中，`Response`显然是设置在第二个`End Using`语句处。

在第二个例子中，`WebResponse`创建的对象什么时候`Request.GetResponse()`被释放？

是否应该将第二个示例重写如下以确保`WebResponse`正确处理？

```
Dim xmldoc As XmlDocument = new XmlDocument
Using Response As WebResponse = Request.GetResponse
    xmldoc.Load(Response.GetResponseStream)
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:55:05.993

> 在第二个例子中，Request.GetResponse() 创建的 WebResponse 对象什么时候被释放？

不，您没有`Dispose`显式调用，并且它不是`Using`语句中的资源，因此不会被处置。

它最终会被垃圾收集，但你不应该依赖它的时间 - 你应该直接处理它。特别是，`WebResponse`有一个连接池，每个目标的最大数量 - 因此，如果您尝试从同一服务器获取多个页面而不处理响应，您可能会在等待较早的响应完成时挂起.

# php - 避免在页面重新加载和表单操作与同一页面时发送数据

> ID：13339359
> 
> 赞同：0
> 
> 时间：2012-11-12T06:43:42.883
> 
> 标签：php

我想从我的页面发送一个名为 index.php 的数据，该操作与同一页面相同，所以我可以进入`$_POST['submitted']`index.php，当我提交数据时成功保存到我的数据库，但是当我重新加载页面数据时仍然保存到我的数据库。我的问题是当我重新加载数据时如何避免发送数据但操作是在同一页面（`<?php echo $_SERVER['PHP_SELF'];?>`）..？

谢谢..

```
//page index.php
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
    <input type="hidden" name="submitted" value="1" />
    <input type="text" name="email_address"/>
    <input type="submit" value="submit"/>
</form>

//still in index.php
if(isset($_POST['submitted']) && $_POST['submitted']==1)
{
    //send data
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:50:06.877

利用

```
if(isset($_POST['submit'])){ //send data} 
```

因为您将 value=1 赋予隐藏字段，这就是条件始终为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:51:06.550

最可靠的做法是使用两个稍微不同的 url。重新加载页面时出现问题的原因是浏览器识别出它是完全相同的 url 调用，因此执行完全相同的请求（包括 post 变量）。不同的网址不会发生这种情况。将查询参数添加到表单目标 url 就足够了，这样 url 会有所不同，但您仍然可以调用相同的脚本。您可以简单地忽略该虚拟参数。在处理完 post 变量（将它们存储在您的数据库中）之后，您向浏览器发送一个重定向标头，该标头指向没有查询参数的正常 url。这样浏览器会重新加载页面而不发送 post 变量。您可以使用 phps`header()`函数进行重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:07:46.103

向提交输入添加名称应该可以解决问题，如下所示：

```
...    
<input type="submit" name="submit" value="submit"/>
if(isset($_POST['submit']) {
... 
```

另一方面，我认为应该是：

```
action="<?php $_SERVER[ 'PHP_SELF' ]; ?>" 
```

没有“回声”。

希望这可以帮助。

# c# - 将excel导入数据库时 如何添加额外的列？

> ID：13339362
> 
> 赞同：1
> 
> 时间：2012-11-12T06:43:55.347
> 
> 标签：c#, asp.net, sql, sql-server

我正在将一个 excelsheet 导入到 sql server 数据库中，在 excel 中有一个名为 FlightNumber 的列，格式为 AI-2000、AI-2564 等航班号（通过删除前 3 个字符） 例如：如果 excel 有 FlightNumber: AI-2032，则 db 中的 FlightId 值应该是 2032。我应该怎么做？我是初学者，所以你可能需要解释一些代码。

这就是我阅读 excel 的方式：

```
DataTable dt7 = new DataTable();
dt7.Load(dr);
DataRow[] ExcelRows = new DataRow[dt7.Rows.Count];
DataColumn[] ExcelColumn = new DataColumn[dt7.Columns.Count];

DataRow[] ExcelRows = new DataRow[dt7.Rows.Count];
//=================================================
for (int i1 = 0; i1 < dt7.Rows.Count; i1++)
 {
   if (dt7.Rows[i1]["PP NO"] == null)
      dt7.Rows[i1]["PP NO"] = 0;
 } 
```

我也使用 SqlBulkCopy 与列映射一起导入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:56:10.810

尝试这个

```
DataTable dtone = new DataTable();
dtone.Columns.Add("idNumber");
dtone.Columns.Add("idOnly", typeof(string), " substring(idNumber, 4, 100)");

dtone.Rows.Add("AI-2000");
dtone.Rows.Add("AE-2001");
dtone.Rows.Add("AF-2002");
dtone.Rows.Add("AH-2003"); 
```

这里的第三个参数是`DataColumn.Expression`根据您现有的列值指定默认值，了解更多关于这次[访问here](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.71%29.aspx)

# java - jQuery 选择列表

> ID：13339363
> 
> 赞同：1
> 
> 时间：2012-11-12T06:43:59.280
> 
> 标签：java, javascript, jquery, jsf

我使用了这个[jQuery 选择列表](http://code.google.com/p/jquery-ui-picklist/)

```
$(function()
{
    $("#selectUsers").pickList();
}); 
```

并在 jsf 页面中

```
<h:selectManyMenu id="selectUsers">
      <f:selectItems value="#{someBean.selectItems}" />
</h:selectManyMenu> 
```

在爪哇

```
private List<SelectItem> selectItems; 
```

如何获取我在 Java 类的选择列表中选择的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:50:51.493

添加`value=#{someBean.myValue}`并`h:selectManyMenu`定义`myValue`为列表`List<String> myValue`

代码如下。

## JSF

```
 vvvvvvvvvvvvvvvvvvvvvvvvvvv
<h:selectManyMenu id="selectUsers" value="#{someBean.myValue}"> 
    <f:selectItems value="#{someBean.selectItems}" />
</h:selectManyMenu> 
```

## 爪哇

```
List<String> myValue;
// setter and getter 
```

## 编辑 1

我注意到您希望将列表作为双重列表。为此，我建议您使用[**Primefaces picklist**](http://www.primefaces.org/showcase/ui/picklist.jsf)。您不需要编写太多代码。看到第二个选项，它太棒了。

# java - Project Euler 1 不会打印出所有数字？

> ID：13339366
> 
> 赞同：0
> 
> 时间：2012-11-12T06:44:32.127
> 
> 标签：java

> 求 1000 以下所有 3 或 5 的倍数之和。

我的程序用于抽取所有 3 和 5 的倍数，但是当我将它运行到 1000 时，它只打印出从 363 开始的 3 和 5 的倍数。

我的问题是，为什么？这是我的代码：

```
class threeAndFive {
    public static void main(String[] args) {
        for(int i = 1; i < 1000; i++) {
            if (i % 3 == 0) {
                System.out.println(i);
            } else if (i % 5 == 0) {
                System.out.println(i);
            } else if (i % 3 == 0 && i % 5 == 0) {
                System.out.println(i);
            }
        }
    }
} 
```

输出样本：

前 7 行输出是

```
363
365
366
369
370
372
375 
```

最后7行输出是

```
985
987
990
993
995
996
999 
```

那么，如果从我的 for 循环来看，它应该从 3 一直迭代到 999，那么它的输出是从 363 开始的呢？

编辑

我发现我的本意是要找到 SUM，而不是打印出数字。无论哪种方式，我的问题仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:46:43.480

代码运行良好。您的 IDE（可能是 Eclipse）只是显示空间不足，不会向您显示前面的行。可以配置将存储在输出控制台中的行数。你也可以打印出数字，它们之间只有空格，这样可以绕过限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:46:58.203

if 语句的顺序在逻辑上也是错误的。

```
if (i % 3 == 0 && i % 5 == 0) 
{
       System.out.println(i);
}
else if (i % 3 == 0) 
{
       System.out.println(i);
} 
else if (i % 5 == 0) 
{
    System.out.println(i);
} 
```

# c# - 将类型绑定到泛型方法或构造函数

> ID：13339369
> 
> 赞同：0
> 
> 时间：2012-11-12T06:45:03.597
> 
> 标签：c#, generics, types, ninject, bind

我有一个特定的工厂，它创建（在它自己的程序集中）一些接口实现：

```
public static IDataSource<T> CreateDataSource<T>(DataContext dataContext) { ... } 
```

我需要在我的[`nInject`](http://www.ninject.org/)内核绑定器中使用它。所需的绑定看起来像`IDataSource<T> -> Factory.CreateDataSource<T>(dataContext)`.

但问题是以下内容无法编译：-

```
kernel.Bind(typeof(IDataSource<>))
    .ToConstructor(ctx =>(Action<DataContext,>)Factory.CreateDataSource) 
```

我尝试了其他类似的东西，但也无法让它们编译。无论如何（我的猜测）我需要这个`T`泛型类型来指定。

```
kernel.Bind(typeof(IDataSource<>))
    .ToConstructor(ctx  => Factory.CreateDataSource(ctx.Inject<DataContext>())) 
```

这仍然无法编译，因为该`T`类型需要它。

我怎样才能绑定到那种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:35:34.880

你不能。`ToConstructor`期望一个构造函数，例如`GenericDataSource<MyData>()`它不能与开放泛型一起使用。改为使用`WithConstructorArgument`。

# delphi - MS Word 自动更正条目自动化与来自 msaccess 存储数据的 delphi

> ID：13339370
> 
> 赞同：2
> 
> 时间：2012-11-12T06:45:05.657
> 
> 标签：delphi

帮助！我正在尝试自动更正以富文本格式存储在访问数据库中的条目。如果我使用 autocorrect.entries.Add 但使用 autocorrect.entries.AddRichText 失败，它可以正常工作。看看下面的代码。我会很感激你的帮助！

```
procedure TfrmdxForm.acBtnClick(Sender: TObject);
var
DXRANGE, DXWORD: oleVariant;
DXSTR: STRING;

begin
DXWORD := CreateOleObject('Word.Application');
DXWORD.Visible := FALSE;
MyADODataSet.First;
while NOT MyADODataSet.Eof do
begin
DXRANGE:= MyADODataSet.FieldByName('DX').Text; 
// here is where it fails … I don't know how to change this to a range
DXSTR := MyADODataSet.FieldByName('DXCODE').Text;
DXWORD.Autocorrect.Entries.AddRichText(DXSTR, DXRANGE);
// here it works if I use Add but it fails with AddRichText
MyADODataSet.Next;
end;
DXWORD.QUIT;

end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:59:52.147

您是否仔细阅读了 MSDN 上有关 Add 和 AddRichText 的文档？

添加有两个参数

1.  名称 - 这些条目的名称
2.  值 - 自动替换文本

AddRichText 也有两个参数

1.  名称 - 同上
2.  Range - 文档内带有所需替换文本的选择范围

因此，您必须在文档中放置所需的文本，然后选择它（或尝试将其放在某个范围内，例如段落），然后您可以使用 AddRichText 方法

# c++ - 是否设置了 set-user-id 位？

> ID：13339373
> 
> 赞同：3
> 
> 时间：2012-11-12T06:45:41.320
> 
> 标签：c++, c, unix, suid

我将编写一个广泛执行其他程序的代码。如果有人设置了 set-user-id 位（并且 root 是所有者），我不希望它具有 root 权限。所以我要在启动时放弃特权。

我的问题是：如何从程序中了解它是否在`set-user-id`模式下运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T07:02:24.480

您可以比较`getuid()`和`geteuid()` [库调用](http://manpages.ubuntu.com/manpages/precise/en/man2/getuid.2.html)的结果。

如果`geteuid()`返回 0（root），但`getuid()`返回非 0，则可以说 suid 处于活动状态。

# c - BST 空指针赋值错误

> ID：13339374
> 
> 赞同：2
> 
> 时间：2012-11-12T06:45:49.883
> 
> 标签：c, runtime-error, binary-search-tree, null-pointer

我尝试实现 BST 程序，但由于运行时错误，执行失败。请告诉我如何纠正它。我创建树的代码是：

```
struct node *createBinTree()
{ int val,size;
   struct node *bintree, *newnode;
   bintree= NULL;
   printf("Enter the values of nodes terminated by a negetive no.\n");
   val=0;
   while(val>=0)
   {
     printf("\nEnter value");
     scanf("%d",&val);
     if(val>=0)
     { newnode = (struct node*)sizeof(struct node);
    newnode->val=val;
    newnode->lchild= NULL;
    newnode->rchild= NULL;
    bintree=attach(bintree,newnode);
     }
   }
   return bintree;
   }
   struct node *attach(struct node *tree,struct node* tnode)
   {if(tree==NULL)
     tree=tnode;
     else{
     if(tnode->val<tree->val)
      tree->lchild= attach(tree->lchild,tnode);
      else
      tree->rchild= attach(tree->rchild,tnode);

   }
   return tree;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:02:41.710

```
newnode = (struct node*)sizeof(struct node); 
```

您`malloc()`在 while 循环的上述行中缺少

用这个 ：

```
newnode = (struct node*)malloc(sizeof(struct node)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:56:25.467

```
newnode = (struct node*)sizeof(struct node); 
```

这不是您创建节点的方式。您没有使用`malloc`或忘记将其包含在您的代码中。相反，您直接为其分配一个地址，这是不推荐的。将其更改为使用`malloc`，您应该没问题。

# php - 致命错误：在 C:\Program Files\ 中找不到类“COM”

> ID：13339375
> 
> 赞同：0
> 
> 时间：2012-11-12T06:45:54.567
> 
> 标签：php

我有一个大问题。我有这个错误

```
"Fatal error: Class 'COM' not found in C:\Program Files\EasyPHP-12.1\www\eu\include\general.php on line 2768" 
```

当我走到那条线时，我看到了：

```
" if (PHP_OS=='WINNT')
{
$filesystem=new COM('Scripting.FileSystemObject');
$file=$filesystem->GetFile($path);
return $file->Size();........" 
```

谁能帮我这个？

谢谢！阿迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:48:31.750

在`php.ini`取消注释行：（`;extension=php_com_dotnet.dll`删除`;`）并重新启动服务器。因为它是 php 的扩展。

顺便说一句，在您的版本中，这条线可能会丢失。有一个[错误](https://bugs.php.net/bug.php?id=62623)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T09:44:40.217

在 php.ini 上添加
extension=php_com_dotnet.dll

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T01:41:15.473

使用便笺编辑器 (ctrl+F) 打开 php.ini 搜索，`Dynamic Extensions`然后添加`extension=com_dotnet`

# asp.net-mvc-3 - 在 asp.net mvc 3 的详细信息视图中再显示一个模型

> ID：13339379
> 
> 赞同：0
> 
> 时间：2012-11-12T06:46:16.123
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0

我有三个表，我从中创建了一个实体模型。下面是模型。 ![在此处输入图像描述](../Images/49050b44cdc3c3a1dbbedab33b1ce26f.png)

我需要帮助将所有三个模型组合在一个视图中。例如，我想在一个视图中显示姓氏、cpd_recipines 形式的缩写和 cpd_quiz 中的 TestNo，并在 cpd_certificates 中支付。

当我点击编辑时，我这个项目也可用于编辑。尽管这些表似乎不相关，但实际上可以引用尽管存在孤立值。下面是详细视图的代码：

```
 @model Test.Models.cpd_recipients

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>cpd_recipients</legend>

    <div class="display-label">OpNo</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.OpNo)
    </div>

    <div class="display-label">LastName</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.LastName)
    </div>

    <div class="display-label">Initials</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Initials)
    </div>

    <div class="display-label">Title</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Title)
    </div>

    <div class="display-label">cpd_password</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.cpd_password)
    </div>
</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { id=Model.ID }) |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:53:47.737

一种方法是创建一个`ViewModel`类，该类仅包含您查看所需的数据，来自数据模型中的各种不同模型。

因此，您的详细视图模型将包含（姓氏、姓名首字母、TestNo、已付款）。

请参阅[http://en.wikipedia.org/wiki/Model_View_ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)

# php - (Mac OS X, XAMPP) + memcache -> 找不到合适的图像

> ID：13339388
> 
> 赞同：3
> 
> 时间：2012-11-12T06:46:49.917
> 
> 标签：php, macos, memcached, xampp

我在装有 OS X 10.8 的 MacBook 上安装 memcache 时遇到问题。我已经安装了内存缓存。当我运行 memcache -h 它得到答案。但是当我调用 php -mi 时找不到它。当我执行 phpinfo() 并随后检查日志时，我得到以下日志条目。任何想法？

PHP 警告：PHP 启动：无法加载动态库 '/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/memcache.so' - dlopen(/Applications /XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/memcache.so, 9)：找不到合适的图像。确实找到了：\n\t/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/memcache.so：mach-o，但在 Unknown on 架构错误第 0 行

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:52:44.137

您的 xampp 是 64 位软件，而 memcache.so 是 32 位，反之亦然！无论如何，这个版本的 memcache.so 根本不匹配您使用的 xampp。Xampp 提供 32 位的旧版本和 64 位的较新版本。您可以尝试一下或找到不同版本的库。

如果源代码可用，您可以在系统上编译库，这也会有所帮助。

# c++ - 我还应该使用#include 警卫和#pragma 一次吗？

> ID：13339392
> 
> 赞同：35
> 
> 时间：2012-11-12T06:46:59.297
> 
> 标签：c++, compiler-construction, pragma, include-guards

![在此处输入图像描述](../Images/8f3dd71a817287a706a0a17a8373cd7d.png)

[http://en.wikipedia.org/wiki/Pragma_once](http://en.wikipedia.org/wiki/Pragma_once)
当所有这些编译器都支持时，我还应该使用包含防护`#pragma once`吗？
很多关于堆栈溢出的响应都说要同时使用两者以实现兼容性，但我不确定这是否仍然正确。今天的编译器不支持`#pragma once`什么？

我不确定使用这两种方法是否只是在被广泛采用之前的建议，或者是否仍然有很好的理由使用这两种方法。
仅在何时使用`#pragma once`会导致问题的任何示例？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T07:04:23.490

这取决于您的程序的可移植性。

只要您正在编写一个应该与您知道肯定支持的编译器一起工作的程序`#prama once`，只需使用`#pragma once`就足够了。但是这样做会将您的程序限制为支持实现定义功能的编译器集。

如果您需要您的程序在**所有编译器**上工作，那么您应该同时使用`#pragma once`并包含防护。

如果编译器不支持`#pragma once`它，它将简单地忽略它^([Ref#1])，在这种情况下，标头保护将为您服务，因此当您不知道目标编译器支持的功能时，使用它们并没有错.

因此，如果您希望您的程序在不同的编译器上 100% 可移植，理想的方法仍然是仅使用包含防护。正如@CharlesBailey 正确指出的那样，由于 for 的行为`#pragma once`是实现定义的，因此未知编译器上的行为可能会对您的程序产生不利影响。

* * *

^([Ref#1])
**标准 C++03：16.6 Pragma 指令**

> 形式的预处理指令
> 
> `# pragma pp-tokensopt new-line`
> 
> 导致实现以实现定义的方式运行。**任何未被实现识别的编译指示都会被忽略。**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T07:04:12.797

它是非标准的，因此如果您想安全使用包含防护装置

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-08T09:52:32.980

如您的表所示，现在很少遇到不支持的主流使用编译器`#pragma once`。为了保持代码库的清洁和维护成本低廉，需要不断地进行重构。每次重命名类或移动一些代码时都必须更新包含守卫，这给这项工作增加了很大的负担。

所以我想说，除了一些小众角落案例或损坏的构建系统`#pragma once`在实践中是可以安全依赖的。如果您关心生产力和代码质量，则使用 only`#pragma once`似乎是显而易见的选择。

例外情况是，如果您正在编写一个库，该库需要支持阳光下的每个编译器，或者不幸不得不使用这些不具备此功能的罕见编译器之一。

# android - Android中的Facebook注销错误

> ID：13339393
> 
> 赞同：0
> 
> 时间：2012-11-12T06:47:39.113
> 
> 标签：android, facebook

我的 Android 应用程序中有一个登录按钮。当我登录时它工作正常。但是当我尝试注销时出现此错误。我无法弄清楚是什么导致了错误。

```
11-12 14:44:12.358: E/AndroidRuntime(2334): FATAL EXCEPTION: main
11-12 14:44:12.358: E/AndroidRuntime(2334): android.os.NetworkOnMainThreadException
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.facebook.android.Util.openUrl(Util.java:215)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.facebook.android.Facebook.request(Facebook.java:775)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.facebook.android.Facebook.request(Facebook.java:691)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.facebook.android.Facebook.logout(Facebook.java:650)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.example.facebook.MainActivity.onClick(MainActivity.java:57)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.view.View.performClick(View.java:4084)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.view.View$PerformClick.run(View.java:16966)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.os.Handler.handleCallback(Handler.java:615)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.os.Looper.loop(Looper.java:137)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at java.lang.reflect.Method.invoke(Method.java:511)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-12 14:44:12.358: E/AndroidRuntime(2334):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的注销代码

```
private void updateButtonImage() {
        // TODO Auto-generated method stub
        if(fb.isSessionValid()){
            button.setImageResource(R.drawable.logout_button);
        }else{
            button.setImageResource(R.drawable.login_button);
        }
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        if(fb.isSessionValid()){
            try {
                fb.logout(getApplicationContext());
                updateButtonImage();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }else{
            fb.authorize(MainActivity.this,new String[] {"email", "publish_stream"}, new DialogListener() {

                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Facebook error", Toast.LENGTH_SHORT).show();       
                }

                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Error", Toast.LENGTH_SHORT).show();        
                }

                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    updateButtonImage();
                }

                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Cancel", Toast.LENGTH_SHORT).show();   
                }
            });
        }
    } 
```

谁能指出导致错误的原因？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T06:49:02.310

当应用程序尝试在其主线程上执行网络操作时，将引发此异常。在 AsyncTask 或 Thread 中运行您的代码。

`onCreate()`或在方法中添加以下代码。

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# ruby-on-rails - 如何更改 simple_form 以使用引导程序前置输入

> ID：13339394
> 
> 赞同：1
> 
> 时间：2012-11-12T06:47:41.590
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

我使用的是 Rails 3.2，simple_form，它是默认的引导生成器。

我想在我的布局中使用 Bootstrap“附加和前置”表单元素之一。如何修改简单的表单输入以生成所需的代码？

**使用的代码**：
`<%= f.input :price, :label => 'Price:' %>`

**生成的代码**：

```
<div class="control-group string optional">
    <label class="string optional" for="price">Price:</label>
    <div class="controls">
        <input class="string optional" id="price" type="text">
    </div>
</div> 
```

**所需代码**：

```
<div class="control-group string optional">
    <label class="string optional control-label" for="price">Price:</label>
    <div class="input-prepend">
        <span class="add-on">$</span>
        <input class="string optional" id="price" type="text">
    </div>
</div> 
```

请注意“输入前置”类更改和“附加”跨度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T07:06:53.553

您需要添加一个包装器。

对于预附加代码是这样的：

```
 <%= f.input :price, :wrapper => :prepend, :label => false do %>
    <%= content_tag :span, "$", :class => "add-on" %>
    <%= f.input_field :price %>
  <% end %> 
```

有关更多信息，请查看使用 simple_form 和 bootstrap 的[实时示例](http://simple-form-bootstrap.plataformatec.com.br/articles/new)。[你可以在这里](https://github.com/rafaelfranca/simple_form-bootstrap/blob/master/app/views/articles/_form.html.erb)找到代码。

希望它有所帮助。

# html - 使用内容拉伸相对定位的 DIV

> ID：13339395
> 
> 赞同：0
> 
> 时间：2012-11-12T06:47:42.900
> 
> 标签：html, css

我有以下 CSS 使我能够将页面居中

```
#mainholder {
    position:relative;
    margin-left:auto;
    margin-right:auto;
    width:1000px;
    background-color:#FFFFFF;
    min-height:1100px;
    z-index:1;
    clear:both;
} 
```

在#mainholder div 内，我有另一个 DIV，其中包含我的数据，这些数据将根据内容增加或减少高度。CSS如下

```
#maincontentdiv {
    position:absolute;
    width:955px;
    min-height:795px;       
    border-style:solid;
    border-width:thin;
    border-collapse:collapse;
    left:10px;
    top: 135px;     

} 
```

我遇到的问题是，虽然#maincontentdiv 按预期伸展，但#mainholder 不会随着#maincontentdiv 的内容而伸展。我想知道如何解决这个问题或者还有什么其他的选择。

所有帮助将不胜感激谢谢

**编辑**

根据要求，这是 HTML 代码

```
<div id="mainholder">
  <div id="topnavbar">
    <div id="navlinks">

    </div>

  </div>
  <div id="messagediv">

  </div>
  <div id="maincontentdiv">
    <table width="100%" border="0">
      <tr bgcolor="#507CD1">
        <td width="19%">Grant ID</td>
        <td width="61%">Grant Description</td>
        <td width="20%">Manage</td>
      </tr>
      <?php 
      $select = " SELECT QUERY THAT WILL CHANGE THE LENGTH OF THE DIV DEPENDING ON RESULTS

";
     $query = sqlsrv_query($conn,$select,array(),array("Scrollable"=>SQLSRV_CURSOR_STATIC))or die(print_r(sqlsrv_errors()));
     while($row=sqlsrv_fetch_array($query))
     {
        //variables
       ?>
      <tr>
        <td><?php echo $variable ?></td>
        <td><?php echo $variable ?></td>
        <td>&nbsp;</td>
      </tr>
      <?php }?>
    </table>
  </div>
  <br style="clear:both"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:56:25.387

你有`position:absolute`你的内在 div。所以它的位置不会影响父div。

```
#maincontentdiv {
    position:absolute;
    width:955px;
    min-height:795px;       
    border-style:solid;
    border-width:thin;
    border-collapse:collapse;
    left:10px;
    top: 135px;     

} 
```

将其更改为

```
#maincontentdiv {
    position:relative;
    width:955px;
    min-height:795px;       
    border-style:solid;
    border-width:thin;
    border-collapse:collapse;
    margin-left:10px;
    margin-top: 135px;     
} 
```

如果您仍然有问题，请告诉我。

# git - Git添加不添加文件

> ID：13339397
> 
> 赞同：11
> 
> 时间：2012-11-12T06:48:04.650
> 
> 标签：git, git-commit, git-add

当我尝试 git 添加我的文件时，我输入了

```
git add <insert file names here> 
```

这工作正常。但是，当我尝试做

```
git commit -a 
```

我的 git 存储库告诉我它是空的。输出的是：

```
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed) 
#
<insert name of files here>

nothing added to commit but untracked files present (use "git add" to track) 
```

可能有人知道这个问题的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-23T14:09:28.773

而且您可能还想确保您位于项目的根目录中。不久前，我在 Rails 项目中遇到了这个问题，然后意识到我在`/config`目录中。哎呀！#noobmistake

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T07:02:15.820

覆盖暂存区的`-a`标志（“索引”）。`git commit`看看手册页是怎么说的：

```
 -a, --all
       Tell the command to automatically stage files that have been modified
       and deleted, but new files you have not told git about are not
       affected. 
```

一个经验法则是`git commit`在你用过`git add`. 该命令`git commit -a`适用于当您想要提交存储库中的每个更改但不能打扰`git add`它们时。

PS。`git add -A`很有用：它在您的工作树中添加所有未忽略的新文件

# objective-c - 在常规 UIView 中使用 UICollectionView

> ID：13339398
> 
> 赞同：1
> 
> 时间：2012-11-12T06:48:05.100
> 
> 标签：objective-c, xcode, uicollectionview, collectionview, uicollectionviewcell

我创建了一个常规视图，我想使用其中的一半 with `UICollectionView`。我将其`UICollectionView`拖到视图上并调整其大小。我拖了一个`UICollectionViewCell`新的视图并设计了它（全部在 XCode 的布局构建器中）。

该类`UICollectionViewCell`被调用`ImageCell`，所以我在我的`viewDidLoad`活动中将单元类注册到`UICollectionView`：

```
[self.imagesCollectionView registerClass:[ImageCell class] forCellWithReuseIdentifier:@"ImagePhotoCell"]; 
```

这就是我尝试将图像加载到集合视图单元格的方式：

```
- (UICollectionViewCell*)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
ImageCell *imageCell = [imagesCollectionView dequeueReusableCellWithReuseIdentifier:@"ImagePhotoCell" forIndexPath:indexPath];
imageCell.CellImageView.image = [UIImage imageNamed:@"IMG_2284.JPG"];
return imageCell; 
```

}

`CellImageView`是`IBOutlet`一个_`UIImageView`。我知道我正在尝试加载相同的图像 - 这仅用于测试。图像存储在 Supporting Files 文件夹中。

问题是我得到的只是黑屏。没有显示图像。我知道我正在正确加载图像，因为我尝试对常规 ImageView 执行相同的操作并且它有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:26:06.017

我遇到了类似的问题，这似乎是未加载 NIB 的结果。尝试用以下内容替换 viewDidLoad 注册调用：

```
UINib *cellNib = [UINib nibWithNibName:@"nibFileName" bundle:nil];
[self.imagesCollectionView registerNib:cellNib forCellWithReuseIdentifier:@"ImagePhotoCell"]; 
```

# winapi - Free Pascal Lazarus 1.0.2 (FPC 2.6.0) 中的 WinAPI 函数

> ID：13339399
> 
> 赞同：2
> 
> 时间：2012-11-12T06:48:12.717
> 
> 标签：winapi, freepascal, lazarus

我正在尝试在[Free Pascal](http://en.wikipedia.org/wiki/Free_Pascal) [Lazarus](http://en.wikipedia.org/wiki/Lazarus_%28IDE%29)中编译 Delphi 项目并得到编译器错误，因为找不到几个 WinAPI 函数（`CreateNamedPipe`, `GetLastError`, ）。`OutputDebugString`

有问题的文件的`uses`子句如下所示：

```
uses
  SysUtils,
  LCLIntf, LCLType, LMessages; 
```

`uses`为了修复上述编译器错误，我应该在子句中添加哪些单元？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:41:00.083

您需要 WinAPI 的 Unit **Windows**。

```
uses SysUtils, LCLIntf, LCLType, LMessages, Windows; 
```

# mysql - MySQL SELECT 其中布尔字段为 NULL 或 false

> ID：13339400
> 
> 赞同：6
> 
> 时间：2012-11-12T06:48:26.643
> 
> 标签：mysql, cakephp, cakephp-2.0, cakephp-2.1

好的，我必须在这里遗漏一些非常简单的东西。我只想从 user_id 匹配的表中返回所有记录（简单！）并且“付费”字段为 NULL 或 0。我的“付费”字段是 TinyInt (1)。

我的 CakePHP 模型代码是：

```
$workingRecord = $this->find('first',array(
    'conditions'=>array(
        'Subscription.user_id'=>$userId,
        array('not' => array('Subscription.paid' => true)) // Not True, to catch both false or NULL values
    )
)); 
```

CakePHP 生成的 SQL 是这样的：

```
SELECT `Subscription`.`id`, `Subscription`.`paid` FROM `subscriptions` AS `Subscription` WHERE `Subscription`.`user_id` = 3 AND NOT (`Subscription`.`paid` = '1') LIMIT 1 
```

常识会说这应该有效。问题是 SQL 将在“付费”列中返回包含 0 的行，但永远不会返回 NULL。

有没有办法在不使用“或”的情况下一次性返回零和空值？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-08T12:45:33.743

当您使用布尔字段离开联接表时，即使联接表的架构不允许，结果集也可能包含 NULL 值。

因此，作为一般情况，我建议：

```
where `Subscription`.`paid` = 0 or `Subscription`.`paid` IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T07:24:45.790

**如果您的字段是 TINYINT(1)，则不应有任何 NULL 值。** 如果这样做，请运行快速查询以将任何 NULL 替换为默认值，并将数据库字段设置为默认值 1 或 0。

然后，您的代码应该是：

```
$workingRecord = $this->find('first',array(
    'conditions'=>array(
        'Subscription.user_id'=>$userId,
        'Subscription.paid' => 0
    )
)); 
```

**它没有像你想象的那样工作的原因：**

根据[MySQL 关于 'NOT' 的文档](http://dev.mysql.com/doc/refman/5.0/en/logical-operators.html#operator_not)：

> 逻辑非。如果操作数为 0，则计算为 1，如果操作数为非零，则计算为 0，并且 NOT NULL 返回 NULL。

所以 - 在你的情况下，你说`"NOT 1"`的是 MySQL 翻译成`" = 0"`.

# macos - Vim 不显示字母 'l'

> ID：13339410
> 
> 赞同：1
> 
> 时间：2012-11-12T06:49:42.063
> 
> 标签：macos, vim

```
PATH="/usr/loca /bin:/usr/loca /sbin:~/bin:/Applications/XAMPP/xamppfiles/bin:/Applications/Preview.app/Contents/MacOS:$PATH"
PATH=$PATH:~/bin:/usr/loca /mysq /bin 
```

当我在 vim 中打开文本文件时，所有字母`l`都没有显示出来。当我从那里复制和粘贴时，它确实出现了，所以我不知道这是怎么发生的。任何想法从哪里开始寻找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:10:09.770

今天在 OSX Mountain Lion 中发生了类似的事情。我安装了 ProFont 2.2 字体包并将我的终端设置为使用它，突然之间，打印在我的终端上的任何 l/ 实例变得不可见。这会导致欢闹，例如我路径中的 /usr/loca bin/ 目录；人物还在那里，只是隐藏起来。我不得不切换回默认字体来修复它。

# java - 将 JLabel 大小/间隙设置为 JCheckBox

> ID：13339411
> 
> 赞同：1
> 
> 时间：2012-11-12T06:50:01.670
> 
> 标签：java, swing, jlabel, jcheckbox

请看下面的代码

```
import java.awt.GridLayout;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class TestSend extends JFrame 
    {
        private Box names, emails;
        private JButton ok;
        private Map mMap;
        private JLabel nameLabel, emailLabel;
        private JPanel mainPanel;
        private JScrollPane scroll;

        public TestSend()
        {
            names = new Box(BoxLayout.Y_AXIS);
            emails = new Box(BoxLayout.Y_AXIS);

            nameLabel = new JLabel("Names");
            emailLabel = new JLabel("Email");

            mainPanel = new JPanel();
            mainPanel.setLayout(new GridLayout(2,2));

            scroll = new JScrollPane(mainPanel);

            mainPanel.add(nameLabel);
            mainPanel.add(emailLabel);
            mainPanel.add(names);
            mainPanel.add(emails);

            mMap = new HashMap();

            mMap.put("yohan", "yy@yahoo.com");
            mMap.put("Gihan", "gihan@yahoo.com");
            mMap.put("Sumi", "sumi@yahoo.com");
            mMap.put("mac", "mac@yahoo.com");
            mMap.put("Jay", "jay@yahoo.com");
            mMap.put("Rom", "rom@yahoo.com");
            mMap.put("shane", "shane@yahoo.com");
            mMap.put("Mafe", "mafe@yahoo.com");
            mMap.put("willi", "willi@yahoo.com");

            Iterator iter = mMap.entrySet().iterator();

            while(iter.hasNext())
            {
                Map.Entry mEntry = (Map.Entry)iter.next();

                JCheckBox cBox = new JCheckBox((String)mEntry.getKey());

                names.add(cBox);

                if((String)mEntry.getValue() != null && ((String)mEntry.getValue()).length() != 0  && !((String)mEntry.getValue()).equals(""))
                {
                    JLabel lLabel = new JLabel((String)mEntry.getValue());
                   // lLabel.setPreferredSize(new Dimension(cBox.getPreferredSize().width,cBox.getPreferredSize().height));
                    emails.add(lLabel);
                    emails.add(new JPanel());

                }
                else
                {
                    JLabel lLabel = new JLabel();
                    //lLabel.setPreferredSize(new Dimension(cBox.getPreferredSize().width,cBox.getPreferredSize().height));
                    emails.add(lLabel);
                    emails.add(new JPanel());
                }

            }

            this.add(scroll);
            this.pack();
            this.setVisible(true);

        }

        public static void main(String[]args)
        {
            new TestSend();
        }
    } 
```

当您执行它时，您可以看到与 JCheckBox 相比，JLabel 包含的垂直间隙更少。因此，“电子邮件地址”(JLabel) 不会显示在显示“名称”(JCheckBox) 的同一行中。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:47:58.003

`GridLayout`有一个很好的功能，可以让你`0`用来表示任意数量的行或列（但不能同时表示两者）。还，

*   指定您的`Map`参数：`Map<String, String>`.

*   `Set`implements `Iterable`，它允许一个 for-each 循环`Map.Entry`。

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

![图片](../Images/8fcc933ddb1f97897a4af93d27031361.png)

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.util.HashMap;
import java.util.Map;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class TestSend extends JFrame {

    private JPanel names = new JPanel(new GridLayout(0, 1));
    private Map<String, String> mMap = new HashMap<String, String>();

    public TestSend() {
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);

        JPanel top = new JPanel(new GridLayout(1, 0));
        top.add(new JLabel("Names"));
        top.add(new JLabel("Email"));
        names.add(top);

        mMap.put("yohan", "yy@yahoo.com");
        mMap.put("Gihan", "gihan@yahoo.com");
        mMap.put("Sumi", "sumi@yahoo.com");
        mMap.put("mac", "mac@yahoo.com");
        mMap.put("Jay", "jay@yahoo.com");
        mMap.put("Rom", "rom@yahoo.com");
        mMap.put("shane", "shane@yahoo.com");
        mMap.put("Mafe", "mafe@yahoo.com");
        mMap.put("willi", "willi@yahoo.com");
        for (Map.Entry<String, String> e : mMap.entrySet()) {
            names.add(createPanel(e.getKey(), e.getValue()));
        }

        this.add(new JScrollPane(names));
        this.pack();
        this.setVisible(true);
    }

    private static JPanel createPanel(String s1, String s2) {
        JPanel panel = new JPanel(new GridLayout(1, 0));
        panel.add(new JCheckBox(s1));
        panel.add(new JLabel(s2));
        return panel;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestSend();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:47:56.207

您有一个包含四个大单元格的 GridLayout，并且您将复选框和电子邮件分别添加到不同的单元格。它们彼此不认识，仅根据它们的大小对齐，这是不同的。

要将每个复选框与每封电子邮件对齐，请根据它们的关系将它们添加到布局中。最简单的方法是使 GridLayout 不是 2x2 而是 (N+1)x2，然后将每个复选框和每个电子邮件添加到单独的单元格中。您也可以使用 GridBagLayout，它不需要提前知道单元格的数量。

# ios - 如何使用 Objective C 查看 PDF 文件中的数字签名

> ID：13339412
> 
> 赞同：6
> 
> 时间：2012-11-12T06:50:02.530
> 
> 标签：ios, pdf, uiwebview, digital-signature

我的应用程序中有一个 PDF 查看器。我只是将 PDF 文件加载到 UIWebView 中。但是当 PDF 包含数字签名时，它不会显示在 WebView 中。显示 PDF 的所有其他内容。只有签名区域是空白的。我检查了预览，也检查了 OSX 中的 Safari，结果是一样的。

然后我下载了 Mac 版 Adob​​e Reader 应用程序，并尝试打开 PDF。它正确显示了签名！

谁能告诉我目标C中是否有任何机制来显示PDF文件的签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:41:21.137

Adobe 记录了如何在 PDF 文件中使用数字签名。[请参阅Adob​​e PDF 1.7 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 466 页第 12.8 节。

但是，正如您所发现的，许多 pdf 文件查看器，包括 Google Chrome 内置的 pdf 查看器会忽略数字签名。这是相当不幸的，因为数字签名变得越来越流行。

如果您还没有这样做，请针对 UIWebView 提交错误报告。或功能增强请求。添加完整的数字签名支持并非易事，但它是一个很棒的功能。

**添加数字签名支持**

作为支持的第一步，您可以考虑仅显示有关文档数字签名的信息并进行验证。-- 不仅要显示数字签名很重要，您还需要[验证](https://security.stackexchange.com/questions/8034/how-digital-signature-verification-process-works)它们。

恕我直言，验证的最重要部分是验证文件自签署以来没有更改。验证您是否信任签名者证书的根证书是件好事，但在实践中，它不如文档完整性重要。另一方面，这一切都取决于您的应用程序及其环境。

作为第二步，您可以在文档页面的正确位置显示通常包含在数字签名中的图形签名。

pdf 包含多个数字签名是很常见的。pdf 包含多个“电子签名”以及验证数字签名也很常见。

“电子签名”只是显示在 pdf 页面上的图形签名。它不涉及任何加密功能，不保证文档完整性，也不保证签名者不可否认性（不涉及签名者证书）。

因为数字签名需要实时验证，所以 pdf 有时会包含多个电子签名，例如作为每页上的首字母缩写。然后是一个单一的数字签名来覆盖整个文档。

# java - 从 REST 服务器解析 JSON

> ID：13339413
> 
> 赞同：0
> 
> 时间：2012-11-12T06:50:05.063
> 
> 标签：java, javascript, json, rest, jersey

我想要实现的是使用 Google 的图形 API 绘制表格，当页面加载时，它会向我的 REST 服务器查询 JSON 数据。这是我的 Javascript 函数。

JavaScript 控制台不显示任何错误。

```
 $(document).ready(function() { 
        $.ajax({
                      url: 'http://localhost:8004/project5',
                      dataType: "json",
                      async:false,
                      error: function(error){
                             console.debug(error);
                         },
                      success:  function(data)
                        {
                                alert("YESSSSS");   
                                var data = data.results;    
                                for(var i=0; i<data.length; i++) {

                                    mytable[arraysize] = new terms(data[i].term1, data[i].term2, (data[i].contains)/((data[i].contains)+ (data[i].notcontains)));
                                    arraysize +=1;

                                }

                                    drawTable();

                        }

                    });
    }); 
```

[这是我在浏览器中使用“ http://localhost:8004/project5](http://localhost:8004/project5) ”查询服务器时返回的 JSON

```
{
  "results":[
  {
     "term1":"test",
     "term2":"hard",
     "contains":"32",
     "notcontains":"55"
  },
  {
     "term1":"test",
     "term2":"easy",
     "contains":"32",
     "notcontains":"55"
  },
  {
     "term1":"pizza",
     "term2":"hut",
     "contains":"32",
     "notcontains":"55"
  }
   ]
} 
```

内容的 html 内容未设置为“YESSSS”，我用它来测试该功能是否成功。当页面加载时，其余服务器识别它被查询并成功返回 JSON，所以我认为问题在于从返回的 JSON 中获取数据。这就是我卡住的地方。

编辑：似乎我的成功函数没有被调用。这是在 java REST 服务器 JAX-RS 中调用的函数。生成 JSON。

```
 @GET
  @Produces(MediaType.APPLICATION_JSON)
  public String getStudentByid(@QueryParam("id") String id) {

      System.out.println("Queried");
      if (id == null)
          return Terms.stringTerms(container);
      return Terms.getTermsByFirst(container, id);
 } 
```

我现在收到 `XMLHttpRequest cannot load http://localhost:8004/project5/terms.json. Origin null is not allowed by Access-Control-Allow-Origin.` 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:22:04.793

阅读您上次的编辑，您似乎遇到了跨站点脚本问题。您正在向与您的 HTML 页面所在域不同的站点发出 ajax 请求。

也许你只是在开发中遇到这个问题，而在生产中，HTML 页面将来自与 ajax 请求相同的站点。然后，您应该着眼于使您的开发环境类似于实际部署。

例如，使用“真正的”Web 服务器来传递您的 HTML 页面，而不仅仅是从本地驱动器打开 HTML 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:37:29.677

你应该简单地把 console.log("step1")

或 2 或 3，到代码的各个部分，看看它在哪里停止记录。那就是你的问题所在。

您还可以记录任何其他可能为您提供线索的内容。

# php - xampp localhost phpmyadmin 用户'root'@'localhost'的访问被拒绝（使用密码：是）

> ID：13339416
> 
> 赞同：10
> 
> 时间：2012-11-12T06:50:34.817
> 
> 标签：php, phpmyadmin, xampp, localhost

当我尝试访问我的 phpmyadmin localhost 时出现两个错误

```
Access denied for user 'root'@'localhost' (using password: YES)

phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection. You should check the host, username and password in your configuration and make sure that they correspond to the information given by the administrator of the MySQL server. 
```

我不知道我做错了什么......这是我的配置代码......

```
$cfg['blowfish_secret'] = ''; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */

/* 
 * Servers configuration
 */
$i = 0;

/* 
 * First server
 */
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'config';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'password';
$cfg['Servers'][$i]['connect_type'] = 'socket'; 
$cfg['Servers'][$i]['compress'] = false;
$cfg['Servers'][$i]['AllowNoPassword'] = false;
/* Select mysqli if your server has it */
$cfg['Servers'][$i]['extension'] = 'mysql';
/* User for advanced features */
//$cfg['Servers'][$i]['controluser'] = 'pmauser';
//$cfg['Servers'][$i]['controlpass'] = 'pmapass';
/* Advanced phpMyAdmin features */
//$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
//$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
//$cfg['Servers'][$i]['relation'] = 'pma_relation';
//$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
//$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
//$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
//$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
//$cfg['Servers'][$i]['history'] = 'pma_history';

/* 
 * End of servers configuration
 */

/*
 * Directories for saving/loading files from server
 */
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

?> 
```

我注意到很多代码被注释掉了，我应该取消注释吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T06:53:52.007

试试这些步骤

1.  打开 phpmyadmin 目录下的 config.inc.php 文件

2.  找到第 21 行：`$cfg['Servers'][$i]['password'] = ''`

3.  将其更改为：`$cfg['Servers'][$i]['password'] = 'your_password';`

4.  重启 XAMPP

[这是带有图像的完整描述](http://www.ostraining.com/blog/coding/error-1045-phpmyadmin/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-21T17:27:31.560

在花了这么多时间之后，我才知道。

只需使用此设置-> 在 phpmyadmin 目录中打开 config.inc.php 文件

```
/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = true;  
$cfg['Lang'] = ''; 
```

您应该有一个具有@localhost 主机名的用户。现在 phpmyadmin 会要求你输入密码。如果您提供正确的密码，您将能够登录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-12T05:55:12.857

不要改变任何东西，原样放在那里，只需打开你的xampp并尝试从shell **cd c：//xampp/mysql/bin**访问mysql，然后写 **mysql** 并点击进入它会打开你的数据库

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-17T14:01:24.870

如果 XAMPP->MySQL 端口已更改，（默认端口为 3306）必须将新端口添加到 phpMyAdmin 文件中：

[xampp phpmyadmin 访问被拒绝错误(#2002)](https://stackoverflow.com/questions/22971248/xampp-phpmyadmin-access-denied-error2002)

`C:\xampp\phpMyAdmin\config.inc.php`

从：
`$cfg['Servers'][$i]['host'] = '127.0.0.1';`
到：
`$cfg['Servers'][$i]['host'] = '127.0.0.1:3308';`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T07:57:41.077

将您的配置代码下的以下行从

```
$cfg['Servers'][$i]['password'] = 'password'; 
```

到

```
$cfg['Servers'][$i]['password'] = ''; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T06:54:27.477

尝试使用相同的身份验证凭据从命令行登录数据库。通过这种方式，您可以验证您是否确实使用了正确的身份验证凭据，例如用户名和密码。如果您在命令行上失败，则问题不在于 phpmyadmin，而在于您的数据库引擎设置。

# android - 有错误的列表视图

> ID：13339418
> 
> 赞同：-1
> 
> 时间：2012-11-12T06:50:53.700
> 
> 标签：android, listview

我正在开发声音播放器应用程序，何时在模拟器上运行它可以工作，但它不能在物理设备上工作。单击图标启动时的错误，我收到错误并异常终止。有人可以看看这段代码吗？这是代码。

声音播放列表活动@

```
public class SoundPlayList extends Activity {
public final static int PLAY_MUSIC = 0;
private ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.soundplayerlist);

    mListView = (ListView)findViewById(R.id.listView1);

    SoundPlayerAdapter adapter = new SoundPlayerAdapter(this);
    mListView.setAdapter(adapter);

    mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent,View view,int position,long id){
        ListView listView = (ListView)parent;

        String item = (String)listView.getItemAtPosition(position);
        Intent intent = new Intent(SoundPlayList.this, SoundPlayerActivity.class);
        intent.putExtra("id",parent.getItemIdAtPosition(position));
        intent.putExtra("name",item);
        startActivityForResult(intent,PLAY_MUSIC);

    }
    });

} 
```

声音播放器适配器@

```
public class SoundPlayerAdapter extends ArrayAdapter<String>{
    private ArrayList<Long> mMusicIds = new ArrayList<Long>();
    public SoundPlayerAdapter(Context context) {
        super(context, android.R.layout.simple_list_item_1);
        ContentResolver resolver = context.getContentResolver();
        Cursor cursor = resolver.query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,null,null,null,null);
    while(cursor.moveToNext()){
        String name = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.TITLE));
        long id = cursor.getLong(cursor.getColumnIndex(MediaStore.Audio.Media._ID));

        mMusicIds.add(id);

        this.add(name);

    }
    }
    public long getItemId(int position){
        return mMusicIds.get(position);

    }
}

} 
```

日志跟踪@

```
11-12 15:45:04.985: D/AndroidRuntime(5288): Shutting down VM
11-12 15:45:04.985: W/dalvikvm(5288): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
11-12 15:45:04.985: E/AndroidRuntime(5288): FATAL EXCEPTION: main
11-12 15:45:04.985: E/AndroidRuntime(5288): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.soundplayer/com.example.soundplayer.SoundPlayList}: java.lang.NullPointerException
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.os.Looper.loop(Looper.java:130)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.ActivityThread.main(ActivityThread.java:3701)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at java.lang.reflect.Method.invoke(Method.java:507)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at dalvik.system.NativeStart.main(Native Method)
11-12 15:45:04.985: E/AndroidRuntime(5288): Caused by: java.lang.NullPointerException
11-12 15:45:04.985: E/AndroidRuntime(5288):     at com.example.soundplayer.SoundPlayList$SoundPlayerAdapter.<init>(SoundPlayList.java:52)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at com.example.soundplayer.SoundPlayList.onCreate(SoundPlayList.java:29)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-12 15:45:04.985: E/AndroidRuntime(5288):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
11-12 15:45:04.985: E/AndroidRuntime(5288):     ... 11 more
11-12 15:45:10.105: I/Process(5288): Sending signal. PID: 5288 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:58:27.443

```
11-12 15:45:04.985: E/AndroidRuntime(5288): Caused by: java.lang.NullPointerException
11-12 15:45:04.985: E/AndroidRuntime(5288): at com.example.soundplayer.SoundPlayList$SoundPlayerAdapter.(SoundPlayList.java:52)
11-12 15:45:04.985: E/AndroidRuntime(5288): at com.example.soundplayer.SoundPlayList.onCreate(SoundPlayList.java:29)
11-12 15:45:04.985: E/AndroidRuntime(5288): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-12 15:45:04.985: E/AndroidRuntime(5288): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
11-12 15:45:04.985: E/AndroidRuntime(5288): ... 11 more
11-12 15:45:10.105: I/Process(5288): Sending signal. PID: 5288 SIG: 9 
```

根据日志信息，请查看 SoundPlayList.java:29 文件。

**编辑**：

[ContentResolver.query](http://developer.android.com/reference/android/content/ContentResolver.html#query%28android.net.Uri,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String%29)方法可能返回 null。所以你需要 NullPoint 检查。

# java - Java：从谷歌翻译下载文本到语音

> ID：13339421
> 
> 赞同：5
> 
> 时间：2012-11-12T06:51:09.887
> 
> 标签：java, text-to-speech

我正在尝试使用 Java 从 Google 翻译下载文本到语音。它适用于英语，但日语并不成功。以下是我的代码：

```
try{
            String word="〜のそばに";
            word=java.net.URLEncoder.encode(word, "UTF-8");
            URL url = new URL("http://translate.google.com/translate_tts?tl=ja&q="+word);
            HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
            urlConn.addRequestProperty("User-Agent", "Mozilla/4.76");
            InputStream audioSrc = urlConn.getInputStream();
            DataInputStream read = new DataInputStream(audioSrc);
            OutputStream outstream = new FileOutputStream(new File("mysound.mp3"));
            byte[] buffer = new byte[1024];
            int len;
            while ((len = read.read(buffer)) > 0) {
                    outstream.write(buffer, 0, len);                    
            }
            outstream.close();              
}catch(IOException e){
           System.out.println(e.getMessage());
} 
```

你有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T09:13:14.047

看来您需要告诉 Google 搜索词包含 UTF-8 编码字符。

更改您的 URL 以`http://translate.google.com/translate_tts?ie=UTF-8&tl=ja&q=`解决我的问题。`.mp3`与谷歌翻译网站的音频翻译相比，我下载的内容相同。

# ruby-on-rails - 宝石未加载到 cPanel

> ID：13339423
> 
> 赞同：0
> 
> 时间：2012-11-12T06:51:20.890
> 
> 标签：ruby-on-rails, ruby, gem, cpanel

我有一个托管在共享主机上的应用程序。应用程序在本地机器上运行良好，但是当我部署它时，它会抛出错误。

```
NoMethodError in Polls#new

Showing /home/applogic/public_html/Impression_Logic/app/views/polls/_form.html.erb where line #24 raised:

undefined method `model_name' for NilClass:Class
Extracted source (around line #24):

21:         </div>
22: 
23:     
24:         <%=form_for @poll, :html => {:multipart => true, :class => "form-horizontal", :id => "new_poll"}  do |f|%>
25: 
26:             <legend>Create a New Image Test</legend>
27: 
```

我添加了两个宝石 Bitly 和 Gibbon（用于 mailchimp）。我确实在本地机器上进行了捆绑安装，但在 cPanel 中，他们有一个通过 Gemfile 并加载所有的应用程序。

它们被加载到我的共享主机上的特定目录中。如果我注释掉使用 Gem 类的代码，应用程序在服务器上也可以正常工作。

我尝试将 gem 文件夹从本地应用程序（vendors/ruby/1.9.1/gems/）复制到服务器，但没有成功。

这一定很愚蠢，但我对 Rails 很陌生。我在谷歌上搜索过，但没有帮助。

它看起来像 Gem 问题，但抛出的错误是应用程序停止的地方。

这是堆栈跟踪[http://pastie.org/5364251](http://pastie.org/5364251)

提前致谢。

# java - BufferedReader.readLine() 不读取并挂起系统（等待）

> ID：13339424
> 
> 赞同：0
> 
> 时间：2012-11-12T06:51:28.943
> 
> 标签：java, jakarta-ee, stream, filestream, bufferedreader

`BufferedReader.readLine()`不看书就挂了`system(wait)`。

```
InputStream istrm = runtimeProcess.getInputStream();
InputStreamReader istrmrdr = new InputStreamReader(istrm);
BufferedReader buffrdr = new BufferedReader(istrmrdr);
System.out.println("4");
String data;
String st;
System.out.println("4a");
while (!(st=buffrdr.readLine()).isEmpty()) {
    System.out.println("5 in loop");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:55:54.437

您需要不断地从进程输入流中读取，以确保它不会阻塞。

阅读：[http ://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:11:38.260

重点是这条线

```
while (!(st=buffrdr.readLine()).isEmpty()) 
```

您的代码将等待该行终止。也就是说，直到找到“\n”字符；它将继续缓冲，因此不会脱离循环。所以要么在输入流中设法拥有快速的线条。或通过字节读取。您可能应该阅读字节并继续工作。

```
int i=0;
char[] buf = new char[10000]
while((i=buffrdr.read(buf,i,100))!= -1)
{
 String h = new String(buf);
 //use h o print accordingly. 
```

# ruby-on-rails-3 - Rails 应用程序中的 belongs_to/has_many 关联上的 SQLite 错误

> ID：13339425
> 
> 赞同：2
> 
> 时间：2012-11-12T06:51:30.243
> 
> 标签：ruby-on-rails-3, sqlite, associations

我有两个具有以下关联的模型：

*   一个用户有很多项目。
*   一个项目属于一个用户。

用户模型（user.rb）：

```
 class User < ActiveRecord::Base
   has_many :projects
   attr_accessible :available, :department, :name, :skills, :title, :photo
 end 
```

项目模型（project.rb）：

```
class Project < ActiveRecord::Base
  belongs_to :user, :foreign_key => :user_id
  attr_accessible :project_name
end 
```

外键迁移文件：

```
class AddForeignKeyToUsers < ActiveRecord::Migration
  def change
    add_column :users, :user_id, :integer
  end
end 
```

当我打电话时，`<%= @user.projects %>`我收到此错误消息：

```
SQLite3::SQLException: no such column: projects.user_id: SELECT "projects".* FROM "projects"  WHERE "projects"."user_id" = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:02:19.220

您将外键添加到错误的表中。它应该在`projects`，而不是在`users`：

```
class AddForeignKeyToProjects < ActiveRecord::Migration
  def change
    add_column :projects, :user_id, :integer
  end
end 
```

由于您遵守约定，因此您不必在`Project`模型中指定外键。这应该足够了：

```
belongs_to :user 
```

# performance - OpenGL DisplayList 较慢

> ID：13339427
> 
> 赞同：1
> 
> 时间：2012-11-12T06:51:44.767
> 
> 标签：performance, opengl, displaylist

我有一个奇怪的问题：
我必须输出一个 15x15 元素的游戏地板。
到目前为止，我在游戏循环中调用了我的函数“printFloor()”。

此函数遍历所有 225 个元素，并根据它们的值显示纹理文件的不同部分。因此 CPU 必须在每个循环周期中渲染相同的 225 个纹理。游戏循环每个周期需要大约 16-32ms，所以我现在把这个输出放在一个显示列表中：

```
if(!gamefloorPrepared)  //no Display list created -> this is the first time the floor nees to
                        //be printed
{   gamefloor = glGenLists(1);

    glNewList(gamefloor,GL_COMPILE);
        for(int y=0;y<size.y;y++)
        {   for(int x=0;x<size.x;x++)
            {   printFloorElement(spielfeld[y][x],{x,y});     //see below
            }
        }
    glEndList();
    gamefloorPrepared=1;
}else
{   glCallList(gamefloor);
} 
```

函数 printFloorElement 计算位置，将图形模式更改为“switchGraphicMode(TEXTURES);”，绑定纹理并绘制纹理：

```
glBegin(GL_QUADS);
    glTexCoord2f(spriteSize.x* spritePos.x   +halfTexelSize.x,spriteSize.y*(spritePos.y+1)-halfTexelSize.y);   glVertex2f(display.a.x,display.a.y);
    glTexCoord2f(spriteSize.x* spritePos.x   +halfTexelSize.x,spriteSize.y* spritePos.y   +halfTexelSize.y);   glVertex2f(display.a.x,display.b.y);
    glTexCoord2f(spriteSize.x*(spritePos.x+1)-halfTexelSize.x,spriteSize.y* spritePos.y   +halfTexelSize.y);   glVertex2f(display.b.x,display.b.y);
    glTexCoord2f(spriteSize.x*(spritePos.x+1)-halfTexelSize.x,spriteSize.y*(spritePos.y+1)-halfTexelSize.y);   glVertex2f(display.b.x,display.a.y);
glEnd(); 
```

问题：一个游戏循环周期现在需要 60-80 毫秒，所以它相当慢。显示列表只生成一次，我已经检查过了。

“switchGraphicMode()”-函数：

```
void switchGraphicMode(GRAPHICMODES target)//can be "TEXTURES" or "DRAWING"
{   if(target != graphicMode)//"gaphicMode" = global Variable which shows if GL_TEXTURE_2D is currently enabled
    {   if(target==DRAWING)
        {   glDisable(GL_TEXTURE_2D);
            graphicMode=DRAWING;
        }else
        {   glEnable(GL_TEXTURE_2D);
            graphicMode=TEXTURES;
        }
    }
} 
```

有人知道原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:47:41.163

glBegin()/glEnd() 和显示列表是已弃用的“立即模式”管道的一部分。

现在首选的方法是使用顶点缓冲区对象。

这两种方法的区别在于，在立即模式下，每次通过渲染循环，您都将顶点数据从主机内存传输到 GPU，即使您使用的是显示列表（显示列表维护在主机上而不是显示器上）卡片）。

顶点缓冲区对象是在显示卡内存中维护的内存缓冲区。您设置一次，然后在开始渲染之前一次性传输所有顶点数据。然后每次通过渲染循环，您调用专门的绘图函数，告诉显卡使用该缓冲区中的数据进行绘图，从而避免执行昂贵的主机到显卡数据传输的需要。

使用顶点缓冲区对象需要比立即模式渲染更多的设置，但加速是非常值得的。谷歌 opengl 顶点缓冲对象。应该有大量的教程和示例代码来帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:18:49.070

很难用这些代码片段来判断，但对于第一步，我建议您在填充 DisplayList 时利用批处理，您似乎错过了：

```
glEnable(GL_TEXTURE_2D);

if(!gamefloorPrepared)
{   gamefloor = glGenLists(1);

    glNewList(gamefloor,GL_COMPILE);
    glBegin(GL_QUADS);
        for(int y=0;y<size.y;y++)
        {   for(int x=0;x<size.x;x++)
            {   
                glTexCoord2f(spriteSize.x* spritePos.x   +halfTexelSize.x,spriteSize.y*(spritePos.y+1)-halfTexelSize.y);   glVertex2f(display.a.x,display.a.y);
                glTexCoord2f(spriteSize.x* spritePos.x   +halfTexelSize.x,spriteSize.y* spritePos.y   +halfTexelSize.y);   glVertex2f(display.a.x,display.b.y);
                glTexCoord2f(spriteSize.x*(spritePos.x+1)-halfTexelSize.x,spriteSize.y* spritePos.y   +halfTexelSize.y);   glVertex2f(display.b.x,display.b.y);
                glTexCoord2f(spriteSize.x*(spritePos.x+1)-halfTexelSize.x,spriteSize.y*(spritePos.y+1)-halfTexelSize.y);   glVertex2f(display.b.x,display.a.y);
            }
        }
    glEnd();
    glEndList();
    gamefloorPrepared=1;
}else
{  
 glCallList(gamefloor);    
}
glDisable(GL_TEXTURE_2D); 
```

这样，显示列表中的所有顶点都在一个`GL_QUADS`子句中，并且没有不必要的 texture_2d 状态更改。

PS有人应该添加关于已弃用功能的评论；）

# android - 将新项目导入eclipse时出错

> ID：13339428
> 
> 赞同：0
> 
> 时间：2012-11-12T06:51:47.297
> 
> 标签：android, eclipse, sdk

当我将一个新项目导入到我的 Eclipse 中时，我的 Eclipse 在项目文件夹上显示错误。我无法找到原因。请参阅所附错误图片。

![在此处输入图像描述](../Images/54fe13eb423b385dca1d9c04a7f3bbcb.png)

```
[2012-11-12 12:11:32 - ProfilePictureSample] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - BooleanOGSample] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - Hackbook] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - Scrumptious] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - PlacePickerSample] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - SessionLoginSample] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - FriendPickerSample] Unable to resolve target 'android-8'
[2012-11-12 12:11:32 - HelloFacebookSample] Unable to resolve target 'android-8' 
```

这些是控制台中显示的错误消息。我的 Eclipse 中有 sdk 版本的 4.1（API 级别 16）和 4.0.3（API 级别 15）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T06:57:10.310

只需右键单击项目并转到属性 -> Android -> 并单击 Project Build Target as Any one of version (Android 2.2 or api level 8)

希望这会帮助你 。

如果您没有安装所需的版本，请使用 SDK 管理器进行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:56:09.080

您需要安装 SDK 8 (Android 2.2)。

# c# - 从Mysql检索数据到excel宏，Asp.net c#

> ID：13339433
> 
> 赞同：-1
> 
> 时间：2012-11-12T06:52:42.577
> 
> 标签：c#, mysql, excel

我不知道excel宏。我需要从 MySQL 获取数据并将其显示在 excel 中。我可以为此获得任何链接或代码示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:37:53.683

```
Sub ADOExcelSQLServer() 
  Dim Cn As ADODB.Connection 
  Dim Server_Name As String 
  Dim Database_Name As String 
  Dim User_ID As String 
  Dim Password As String 
  Dim SQLStr As String 
  Dim rs As ADODB.Recordset 
  Set rs = New ADODB.Recordset 

Server_Name = "" ' Enter your server name here
Database_Name = "" ' Enter your database name here
User_ID = "" ' enter your user ID here
Password = "" ' Enter your password here
SQLStr = "select Period, Secured, Unsecured from cmisa.credit_facts" 

Set Cn = New ADODB.Connection 
Cn.Open "Driver={SQL Server};Server=" & Server_Name & ";Database=" & Database_Name & _ 
";Uid=" & User_ID & ";Pwd=" & Password & ";" 

rs.Open SQLStr, Cn, adOpenStatic 
 ' Dump to spreadsheet
With Worksheets("1.Overview").Range("AI7:AK19") ' Enter your sheet name and range here
    .ClearContents 
    .CopyFromRecordset rs 
End With 
 ' Tidy up
rs.Close 
Set rs = Nothing 
Cn.Close 
Set Cn = Nothing 
```

结束子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T07:29:58.387

如果要查看数据，可以使用myODBC连接exel，阅读[http://searchenterpriselinux.techtarget.com/tip/Using-Excel-to-analyze-MySQL-data](http://searchenterpriselinux.techtarget.com/tip/Using-Excel-to-analyze-MySQL-data)

在完整阅读之前注册成员

# svn - 使用 Jenkins、Maven 和 SVN 创建带标签的构建

> ID：13339436
> 
> 赞同：1
> 
> 时间：2012-11-12T06:53:25.483
> 
> 标签：svn, maven, jenkins

我在 Jenkins 中创建了一个参数化作业：

*   根据标签“V_x_y_z”获取源（Jenkins-SVN 集成）
*   执行 Maven 传递标签
*   POM 使用 build-helper-maven-plugin 计算版本 xyz

生成的工件是正确的，但版本错误。

除了将命令行中的版本传递给versions-maven-plugin之外，我看不到任何方法可以更改生成的POM版本。但是 Jenkins 无法解析标签并将其转换为版本。

所以似乎只有“坏”的选择：

1.  要求用户同时输入构建和标签 -**容易出错**
2.  在 Maven 中执行结帐，而不是 jenkins - 这**打破了关注点分离**，因为 POM 本身是一个版本化的项目。
3.  用脚本（比如 python）包装 maven - 但是我**失去了 Jenkins-Maven 集成的好处**

我会认为这是一个平庸的用例，并且很容易得到支持——我错过了一些关键要素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:21:13.060

我认为实现这一目标的最佳方法是运行 2 个预构建步骤：

1.  调用一个 shell 脚本，该脚本创建一个带有操纵版本的 java 属性文件

    回声“MYVERSION=$LABEL”| sed -e 's/_/./g' > new_property_file.properties

2.  调用读取该属性文件并注入新创建的 env var 的 EnvInject 插件步骤

之后，您可以使用新的 env var 作为 maven 命令的输入来调用 maven 插件。

# iphone - iPhone：如何将图像从 ios 4 及更高版本发布到 flickr

> ID：13339437
> 
> 赞同：0
> 
> 时间：2012-11-12T06:53:41.567
> 
> 标签：iphone, objective-c, flickr

我想从我的应用程序中将图像发送到 flickr

我做了很多搜索和谷歌，但我找不到解决方案

因此，如果您有任何想法，请分享

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:13:18.907

看这个。如果你想要别的东西，请告诉我\

[http://macapper.com/2007/07/28/tutorial-how-to-make-a-flickr-uploader-plug-in-part-1/](http://macapper.com/2007/07/28/tutorial-how-to-make-a-flickr-uploader-plug-in-part-1/)

或这个：

[http://objective-c.wonderhowto.com/how-to/upload-image-website-from-apple-ios-application-333979/](http://objective-c.wonderhowto.com/how-to/upload-image-website-from-apple-ios-application-333979/)

# r - DEoptim 并行选项

> ID：13339438
> 
> 赞同：3
> 
> 时间：2012-11-12T06:53:49.123
> 
> 标签：r, optimization

您好我正在尝试了解如何让 DEoptim 使用并行处理来工作，但我正在努力将正确的参数放入函数中以使其工作......下面是一个可重复的示例（它具有财务背景）但它是为创建 7 个资产的随机投资组合而设计的，以针对 ES 进行优化。它的灵感来自[http://mpra.ub.uni-muenchen.de/28187/1/RJwrapper.pdf](http://mpra.ub.uni-muenchen.de/28187/1/RJwrapper.pdf) 和[http://files.meetup.com/1772780/20120201_Ulrich_Parallel_DEoptim.pdf](http://files.meetup.com/1772780/20120201_Ulrich_Parallel_DEoptim.pdf)

其中第二个确实包含并行选项，但希望使用 unix 分叉而不是 SOCK 集群。

```
require(quantmod)
require(PerformanceAnalytics)
require(DEoptim)

tickers <- c("^GSPC","^IXIC","^TNX", "DIA","USO","GLD","SLV","UNG","^VIX","F","^FTSE","GS","MS","MSFT","MCD","COKE","AAPL","GOOG","T","C","BHP","RIO","CMG")
getSymbols(tickers)
tickers <- gsub("\\^","",tickers)

x <- lapply(tickers, function(x){ClCl(get(x))})
comb <- na.omit(do.call(merge,x))
colnames(comb) <- paste0(tickers,".cc")

obj <- function(w) {
 if (sum(w) == 0) { w <- w + 1e-2 }
 w <- w / sum(w)
 CVaR <- ES(weights = w,
 method = "gaussian",
 portfolio_method = "component",
 mu = mu,
 sigma = sigma)
 tmp1 <- CVaR$ES
 tmp2 <- max(CVaR$pct_contrib_ES - 0.225, 0)
 out <- tmp1 + 1e3 * tmp2
}

comb1 <- comb[,sample(1:ncol(comb),7)]
no.of.assets <- ncol(comb1)
mu <- colMeans(comb1)
sigma <- cov(comb1)

## The non-parallel version
output <- DEoptim(fn = obj,lower = rep(0, no.of.assets), upper = rep(1, no.of.assets))

## The parallel version that doesn't seem to work...
output <- DEoptim(fn = obj,lower = rep(0, no.of.assets), upper = rep(1, no.of.assets), DEoptim.control(itermax=10000, trace=250, parallelType="parallel", packages=c("PerformanceAnalytics"), parVar=c("mu","sigma"))) 
```

我收到以下错误消息

```
Error in missing(packages) : 'missing' can only be used for arguments 
```

# regex - PhpStorm：有 4 个烦人问题的解决方案吗？

> ID：13339440
> 
> 赞同：5
> 
> 时间：2012-11-12T06:53:54.703
> 
> 标签：regex, editor, phpstorm, indentation, ergonomics

我是一个相当快乐的 PhpStorm 用户，但有几件事让我很恼火，但我不是设置专家，希望有一个解决方案（*编辑 PHP 文件*）：

*   **导航**

通常在编辑器中，一个人想回到光标上方 100 行的位置等......而在 PhpStorm Back `Alt-Shift-Left`and Forward`Alt-Shift-Right`中这样做 - 但他们遵循一种超出我的算法：它肯定会错过“步骤”（例如从第 500 行使用箭头之类的键转到第 300 行，或者更糟糕的是，向上/向下翻页，然后`Alt-Shift-Left`不会带您回到第 500 行）

=> 有没有办法细化驱动 Back 和 Forward 行为的条件？

*   **缩进**

有没有办法改进*indentor*行为？例如

```
 $a = array('X' => 'Something',
             'Y' => 'Something else',[RETURN]
  ^          ^
 now       there 
```

就像在*Emacs*中一样，光标会*在*空格后的第一个引号下方（而不是*现在*PS 所在的位置）？

=> 正则*表达式*（或其他东西）是否能够改进 indentor 的行为*，*不仅适用于这种非常具体的情况，而且适用于一般行为？（当缩进通常不可靠时，
不提另一个问题）`Shift-Insert`

*   **报价**（自动）

我不想禁用自动引用功能，因为它有时很方便，但似乎该算法无法正确解析`"`或`'`插入的环境（现在没有示例，但有时很烦人，就像`"`在只需要一个时意外插入 2 一样，删除一个实际上会删除 2 （正常，因为它们是自动插入的......但我只需要 1 ！）所以在这种情况下必须欺骗 PhpStorm 强制一个 1 `"`）。

=> 是否有正则*表达式*或类似的控制引用行为？

*   **选择通过** `Shift-Arrow`（例如，删除...）

差点忘了：PhpStorm 会记住上下导航时光标所在的列。美好的。但是，当人们想从行首选择（使用`Shift`和 Up/Down `Arrows`）时，通常是选择行。不是一条线到光标之前的位置。一个例子会更好地解释：`*`光标在哪里[第 3 行的开头]，光标*在*`%`哪里[第 2 行中间]

 *```
 1\.   $x = 'string';
 2\.   $y = %'string';
 3.* 
```

做`Shift-Up`将选择（所有*s*）

```
 1\.   $x = 'string';
 2\.   $y = *sssssssss
 3. 
```

*而在selection*的特定情况下，它应该选择：

```
 1\.   $x = 'string';
 2.*sssssssssssssssss
 3. 
```

不知道有没有办法配置它 - 以防万一？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:10:05.583

那好吧...

**1)** *有没有办法细化驱动 Back 和 Forward 行为的条件？*

不。也许（只是也许）它会考虑到你在那个位置所做的事情（即使你什么都没做，那么也许停顿多长时间）。但主要是查看编辑活动、导航事件（跳转到声明/实现等）。

* * *

**2）** *正则表达式（或其他东西）是否能够改进缩进器的行为，不仅适用于这种非常具体的情况，而且适用于一般行为？*

正则表达式——绝对没有。无论如何，这个问题对我来说并不清楚——你是在谈论格式还是导航？如果首先 -- 那么所有当前存在的设置都在“设置|代码样式”中。如果是第二个——然后检查“设置|编辑器|智能键”——也许它们会有所帮助。

否则 - 请记录一些截屏视频/一堆当前和所需行为的屏幕截图，并将其作为新票提交给问题跟踪器：http: [//youtrack.jetbrains.com/issues/WI](http://youtrack.jetbrains.com/issues/WI)

* * *

**3）** *是否有正则表达式或类似的控制引用行为？*

不，你的解释不够清楚。我建议与 #2 相同——获取代码示例并将其作为新票证提交给问题跟踪器：http: [//youtrack.jetbrains.com/issues/WI](http://youtrack.jetbrains.com/issues/WI)。这样它可能会在下一个版本中实现/修复

* * *

**4）** *不确定有没有办法配置它 - 以防万一？*

不知道。我也面临这个可用性问题，想知道解决方法。我使用它的方式 - 在进行选择之前（或期间/之后）按“Home”（不是理想的“解决方案”，因为这样做仍然很烦人，但有效）。或者，您可以使用鼠标选择行（在编辑器装订线区域使用它 - 行号所在的位置）。

如果选择只是删除/复制该行-那么就有专门的快捷方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T16:16:50.020

关于引号，如果您只想要一个引号，请在键入后点击`del`而不是。`backspace``"`

我对缩进（以及一般的代码（重新）格式化）也有一些疑虑，但它是随着版本的变化而变化的，虽然你无能为力......

回复：选择 - 在您的情况下，您可以`Home`在按住 shift 的同时点击。它甚至从未向我注册为意外行为。*

# jquery - jquery .ajax 将多个图像和文本发布到 php --> mysql

> ID：13339441
> 
> 赞同：0
> 
> 时间：2012-11-12T06:54:09.647
> 
> 标签：jquery

所以我有一个使用 jquery $.ajax 调用 php 脚本的表单。我的问题是我还没有找到任何方法来发送文本输入和文件输入或图像。我可以发送文本，只是不能发送图像。

这是我得到的：

Javascript：

别的 {

```
 $.ajax({
            type: 'POST',
            url: 'test1.php',
            cache: false,
            data: $(".contact_form").serializeArray(),
            success: function (data) {
                if (data == "error") {
                    $('.success_box').hide();
                    $('.error_box').show();
                }
                else {
                    $('#sname').val('');
                    $('#email').val('');
                    $('#title').val('');
                    $('#message').val('');
                    $('#photo1').val('');
                    $('#photo2').val('');
                    $('.error_box').hide();
                    $('.success_box').show();
                }
            }
        });
    } 
```

PHP：

```
 <?php
$sname=$_POST['sname'];
$email=$_POST['email'];
$title=$_POST['title'];
$description=$_POST['message'];
$photo1=$_FILES['photo1']['tmp_name'];
$photo2=$_FILES['photo2']['tmp_name'];

$link = mysql_connect("localhost","root","root");

if (!$link) {
    die(mysql_error());
    echo('link stop');  
}
$db = mysql_select_db("test");

if (!$db) {
    die(mysql_error()); 
    echo('braaahh');
}   
    $imge1 = addslashes(file_get_contents($_FILES['photo1']['tmp_name']));
    $imge2 = addslashes(file_get_contents($_FILES['photo2']['tmp_name']));

if (!mysql_query("INSERT INTO forSale VALUES ('', '$sname', '$email', '$title',         '$description', '$imge1', '$imge2')")) {
    die(mysql_error());
    echo("help");
}   

mysql_close();
    ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:07:19.873

我个人为此使用了[jquery 表单插件](http://www.malsup.com/jquery/form/)。另外，请查看这篇文章：[使用 AJAX 上传文件](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)

# c++ - 错误 LNK2019：未解析的外部符号

> ID：13339444
> 
> 赞同：12
> 
> 时间：2012-11-12T06:54:32.680
> 
> 标签：c++, c, visual-studio-2010, opengl, compiler-errors

当我想编译我的opengl代码时，我收到以下错误：

```
Error   1   error LNK2019: unresolved external symbol __imp__glewInit@0 
Error   2   error LNK2019: unresolved external symbol __imp__glewGetErrorString@4 
Error   3   error LNK2001: unresolved external symbol __imp____glewAttachShader     
Error   4   error LNK2001: unresolved external symbol __imp____glewCompileShader    
Error   5   error LNK2001: unresolved external symbol __imp____glewCreateProgram    
Error   6   error LNK2001: unresolved external symbol __imp____glewCreateShader 
Error   7   error LNK2001: unresolved external symbol __imp____glewDeleteProgram    
Error   8   error LNK2001: unresolved external symbol __imp____glewDisableVertexAttribArray 
Error   9   error LNK2001: unresolved external symbol __imp____glewEnableVertexAttribArray  
Error   10  error LNK2001: unresolved external symbol __imp____glewGetAttribLocation    
Error   11  error LNK2001: unresolved external symbol __imp____glewGetProgramiv 
Error   12  error LNK2001: unresolved external symbol __imp____glewGetShaderiv  
Error   13  error LNK2001: unresolved external symbol __imp____glewLinkProgram  
Error   16  error LNK2001: unresolved external symbol __imp____glewVertexAttribPointer  
Error   17  error LNK1120: 16 unresolved externals 
```

我的代码是：

```
#include <Windows.h>
#include <iostream>
#include <glew.h>
#include <gl\GL.h>
#include <freeglut.h>

using namespace std;

GLuint program;
GLint attribute_coord2d;

int init_resources(void)
{
  GLint compile_ok = GL_FALSE, link_ok = GL_FALSE;

  GLuint vs = glCreateShader(GL_VERTEX_SHADER);
  const char *vs_source = 
#ifdef GL_ES_VERSION_2_0
    "#version 100\n"  // OpenGL ES 2.0
#else 
    "#version 120\n"  // OpenGL 2.1
#endif
    "attribute vec2 coord2d;                  "
    "void main(void) {                        "
    "  gl_Position = vec4(coord2d, 0.0, 1.0); "
    "}";
  glShaderSource(vs, 1, &vs_source, NULL);
  glCompileShader(vs);
  glGetShaderiv(vs, GL_COMPILE_STATUS, &compile_ok);
  if (0 == compile_ok)
  {
    fprintf(stderr, "Error in vertex shader\n");
    return 0;
  }

   GLuint fs = glCreateShader(GL_FRAGMENT_SHADER);
  const char *fs_source =
    "#version 120           \n"
    "void main(void) {        "
    "  gl_FragColor[0] = 0.0; "
    "  gl_FragColor[1] = 0.0; "
    "  gl_FragColor[2] = 1.0; "
    "}";
  glShaderSource(fs, 1, &fs_source, NULL);
  glCompileShader(fs);
  glGetShaderiv(fs, GL_COMPILE_STATUS, &compile_ok);
  if (!compile_ok) {
    fprintf(stderr, "Error in fragment shader\n");
    return 0;
  }

   program = glCreateProgram();
  glAttachShader(program, vs);
  glAttachShader(program, fs);
  glLinkProgram(program);
  glGetProgramiv(program, GL_LINK_STATUS, &link_ok);
  if (!link_ok) {
    fprintf(stderr, "glLinkProgram:");
    return 0;
  }

    const char* attribute_name = "coord2d";
  attribute_coord2d = glGetAttribLocation(program, attribute_name);
  if (attribute_coord2d == -1) {
    fprintf(stderr, "Could not bind attribute %s\n", attribute_name);
    return 0;
  }

  return 1;
}

void onDisplay()
{
  /* Clear the background as white */
  glClearColor(1.0, 1.0, 1.0, 1.0);
  glClear(GL_COLOR_BUFFER_BIT);

  glUseProgram(program);
  glEnableVertexAttribArray(attribute_coord2d);
  GLfloat triangle_vertices[] = {
     0.0,  0.8,
    -0.8, -0.8,
     0.8, -0.8,
  };
  /* Describe our vertices array to OpenGL (it can't guess its format automatically) */
  glVertexAttribPointer(
    attribute_coord2d, // attribute
    2,                 // number of elements per vertex, here (x,y)
    GL_FLOAT,          // the type of each element
    GL_FALSE,          // take our values as-is
    0,                 // no extra data between each position
    triangle_vertices  // pointer to the C array
  );

  /* Push each element in buffer_vertices to the vertex shader */
  glDrawArrays(GL_TRIANGLES, 0, 3);
  glDisableVertexAttribArray(attribute_coord2d);

  /* Display the result */
  glutSwapBuffers();
}

void free_resources()
{
  glDeleteProgram(program);
}

int main(int argc, char* argv[])
{
  /* Glut-related initialising functions */
  glutInit(&argc, argv);
  glutInitDisplayMode(GLUT_RGBA|GLUT_DOUBLE|GLUT_DEPTH);
  glutInitWindowSize(640, 480);
  glutCreateWindow("My First Triangle");

  /* Extension wrangler initialising */
  GLenum glew_status = glewInit();
  if (glew_status != GLEW_OK)
  {
    fprintf(stderr, "Error: %s\n", glewGetErrorString(glew_status));
    return EXIT_FAILURE;
  }

  /* When all init functions runs without errors,
  the program can initialise the resources */
  if (1 == init_resources())
  {
    /* We can display it if everything goes OK */
    glutDisplayFunc(onDisplay);
    glutMainLoop();
  }

  /* If the program exits in the usual way,
  free resources and exit with a success */
  free_resources();
  return EXIT_SUCCESS;
} 
```

我尝试了所有方法，包括显式调整链接器选项，包括 .lib 文件，指定包含路径，阅读与这些错误相关的论坛等等，但都没有帮助，你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T07:24:31.663

我从[http://glew.sourceforge.net/index.html](http://glew.sourceforge.net/index.html) ( [https://sourceforge.net/projects/glew/files/glew/1.9.0/glew-1.9.0-win32.zip/下载](https://sourceforge.net/projects/glew/files/glew/1.9.0/glew-1.9.0-win32.zip/download)）和freeglut 2.8.0 MSVC 包，[来自](http://files.transmissionzero.co.uk/software/development/GLUT/freeglut-MSVC.zip)[http://www.transmissionzero.co.uk/software/freeglut-devel/（http://files.transmissionzero.co.uk/software/development/GLUT/freeglut-MSVC](http://www.transmissionzero.co.uk/software/freeglut-devel/) [.zip](http://files.transmissionzero.co.uk/software/development/GLUT/freeglut-MSVC.zip) )

我将包含路径设置为`glew-1.9.0\include\`，将`freeglut\include\`库路径设置为`freeglut\lib\`, `glew-1.9.0\lib\`。

我将您文件的标题更正为

```
#include <Windows.h>
#include <iostream>
#include <gl/glew.h>
#include <gl/GL.h>
#include <gl/freeglut.h>

#pragma comment(lib, "glew32.lib") 
```

链接成功，并且成功了。

**UPD**

使用第三方库时，通常：

*   您必须将包含路径设置为`<3rdPartyDir>\include`，但不能设置为`<3rdPartyDir>\include\lib_name`。声明其包含在源代码中的应该是：

正确的：`#include <lib_name/header_name.h>`

错误：`#include <header_name.h>`，因为在库中可以是内部依赖，例如`#include <lib_name/other_header_name.h>`

*   将库路径设置为`<3rdPartyDir>\lib`. 然后，您必须指定所需的库，以下方法之一：

对于 MSVC，添加

```
#ifdef _MSC_VER
#pragma comment(lib, "lib1_name.lib")
#pragma comment(lib, "lib2_name.lib")
/// etc
#endif 
```

或者，将所需的库添加到链接器选项。

一些库支持自动链接机制（例如freeglut），即头文件包含类似`#pragma comment(lib, "lib1_name.lib")`

*   将所需的 dll 从复制`<3rdPartyDir>\bin`到 `<MyExePath>\`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-09T20:21:26.327

I was having the same problem. Finally found useful instructions [in this Visual Studio and OpenGL tutorial](https://www.badprog.com/c-opengl-setting-up-visual-studio). The issue was correctly including the .dll files for the right configuration (Win32 or x64).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:12:05.197

这绝对是链接器设置的问题，特别是与`glew`库有关。为什么你之前的修复尝试没有奏效，我不太清楚。

你能得到任何`glew`提供编译的教程程序吗？

* * *

### 编辑

从您的评论看来，您遇到的问题包括您的 lib 文件。
- 您能否验证它是否在您认为的位置（安装是否正确）？
- Visual Studio 是否知道它应该在哪里（是否提供了正确的 lib 路径）？

在 Visual Studio 中是否`Project ->Right click + properties -> Configuration Properties -> Linker -> General -> Additional Linker directories`有包含的文件夹的路径`glew32.lib`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-12T12:08:03.153

It seems as you used not correct glew.lib. when using config win32 to build you must use glew.lib(win32) or opposite. You can try by replace glew.lib in your project.

# java - Feemarker 将图像写入 html

> ID：13339445
> 
> 赞同：9
> 
> 时间：2012-11-12T06:54:46.903
> 
> 标签：java, freemarker

无论如何要在freemarker中写入图像而不是提供链接作为

`<img src="${pathToPortalImage}`

注意：我们不能在 freemarker 中使用 otputstream 或其他东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T07:24:53.410

您可以将图像作为 base64 直接嵌入到 html`img`标记中。

要将图像转换为 base 64，您可以使用[Apache Commons (codec)](http://commons.apache.org/codec/)。

这是使用 Apache Commons IO + Codec 的解决方案（但如果您愿意，也可以不使用）：

```
File img = new File("file.png");
byte[] imgBytes = IOUtils.toByteArray(new FileInputStream(img));
byte[] imgBytesAsBase64 = Base64.encodeBase64(imgBytes);
String imgDataAsBase64 = new String(imgBytesAsBase64);
String imgAsBase64 = "data:image/png;base64," + imgDataAsBase64; 
```

然后将变量传递`imgAsBase64`到 Freemarker 上下文中，并像这样使用它：

```
<img alt="My image" src="${imgAsBase64}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-13T18:17:41.180

上面的一个很好的例子。但是使用 JAVA 8，我们可以这样做：

```
Path path = Paths.get("image.png");
byte[] data = Files.readAllBytes(path);
byte[] encoded = Base64.getEncoder().encode(data);
String imgDataAsBase64 = new String(encoded);
String imgAsBase64 = "data:image/png;base64," + imgDataAsBase64; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-27T04:42:40.213

```
private String encodeImage(byte[] imageByteArray, String fileType) {
        return "data:" + fileType + ";base64," + Base64.getEncoder().encodeToString(imageByteArray);
    } 
```

在下面的标签中使用输出

```
<img src="[OUTPUT_OF_ABOVE_METHOD]"> 
```

# android - 如何在服务器上存储/查看来自 Android/iOS 应用程序的 GPS 轨迹

> ID：13339450
> 
> 赞同：0
> 
> 时间：2012-11-12T06:55:59.127
> 
> 标签：android, mongodb, gps, latitude-longitude, gpx

我正在寻找一种无需将 GPS 轨迹导出到 GPX 的方式来存储它们。GPS 轨迹只能在 iOS/Android 应用程序中使用。

应用程序：该应用程序允许用户记录 GPS 轨迹并将其同步到服务器。用户可以为每个录制的曲目添加信息和注释。每个 GPS 点也有一个时间戳，因此可以实时“播放”曲目（因此使用 GPX）。GPS 轨迹同步后，其他用户可以通过查询 MongoDB 轨迹集合来浏览上传的轨迹。当用户查看详细信息时，他们会看到 Mongo 文档内容以及绘制了 GPX 轨迹的 Google 地图。

当前解决方案：我当前的解决方案是将记录的 GPS 轨迹导出到 GPX 文件并使用 Cloudfront 将其存储在 Amazon S3 上。轨道集合中的 MongoDB 文档包含用户 ID、注释、日期/时间、评论以及指向 GPX 轨道和照片的链接。

有没有**更好**的方法来存储这些 GPS 轨迹而不是将它们导出/导入到 GPX？这是一个繁琐的过程并且没有必要，因为用户永远不会与应用程序之外的曲目进行交互。GPX 文件也占用大量空间。但是，由于该应用程序是跨平台的，因此我无法想出存储跟踪数据的方法。

我将 Amazon EC2 与 php、Apache 和 MongoDB 一起用于后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:58:55.223

PHP + SQL

在应用程序中向服务器发送请求，通过 POST、GET 或上传文件发送数据。在处理 PHP 脚本时，打开与 SQL 数据库的连接，并将您的信息存储在那里。

# php - 基于先前选择的动态下拉

> ID：13339452
> 
> 赞同：-2
> 
> 时间：2012-11-12T06:56:09.050
> 
> 标签：php, javascript, ajax, postgresql

我正在使用 postgres 数据库.. 并且我的两个下拉列表都必须从数据库中提取值.. 使用第一个选择的值...第二个下拉列表中的 optins 必须更改.. 螺母选项必须从数据库中提取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:03:10.580

你试过把你的标题输入谷歌吗？

```
http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html 
```

# java - InvocationHandler 抛出异常

> ID：13339455
> 
> 赞同：4
> 
> 时间：2012-11-12T06:56:23.697
> 
> 标签：java, try-catch, invocation

我有一个锁管理器作为实现的代理类`InvocationHandler`，

我希望这个锁管理器向`DeadLockException`调用这个代理对象的对象抛出异常（例如），并且我希望调用者能够捕获这个异常，

这在 Java 中可能吗？如果这不是让它以某种方式工作的最佳方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:12:45.747

如果您实现[InvocationHandler](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/InvocationHandler.html)，则覆盖以下方法：

```
@Override
Object invoke(
   Object   proxy,
   Method   method,
   Object[] args ) throws Throwable {
   throw new DeadLockException();
} 
```

如您所见，此方法的签名表明可能会抛出 Throwable Exception。调用者中的一个简单的 try-catch 就足够了。

在死锁检测中需要什么逻辑？

死锁指的是资源分配，那么它们在哪里呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T16:46:37.140

听起来您没有在代理实现的接口上的相关方法上声明 DeadLockException。你的调用者不知道它将被赋予的接口实现将是一个代理，它只是在接口中进行。

# c# - Model 应该如何让 ViewModel 知道其状态的变化？

> ID：13339459
> 
> 赞同：4
> 
> 时间：2012-11-12T06:56:25.310
> 
> 标签：c#, mvvm

我正在构建和 MVVM 应用程序，其中我的一些模型包含他们正在建模的真实世界对象的状态。状态因外部事件而改变，例如，我的模型通过 TCP/IP 获取有关股票变化的信息，并更新其状态以反映该变化。

现在我希望将更改传播到我的视图，而这样做的方法是让我的 ViewModel 知道更改。我可以想到两种方法来做到这一点。

**一**，我让Model实现INotifyPropertyChanged，当属性改变时触发事件。但是，由于某种原因，这似乎[不受欢迎。](https://stackoverflow.com/questions/4453352/what-goes-in-model-in-mvvm)
**第二**，我为模型中可以更改的每个属性实现一个事件，ViewModel 可以显式绑定到的事件。

首选方式是什么？还有其他方法（更好的方法）吗？

**编辑：**
我现在已经在[slugster](https://stackoverflow.com/a/13339553/721768)和[here](https://stackoverflow.com/questions/4453352/what-goes-in-model-in-mvvm)的评论中读到，让模型具有状态不是模型的目的。
然而，在 John Gossman 的原始[MVVM 帖子](http://blogs.msdn.com/b/johngossman/archive/2005/10/08/478683.aspx)中，我们发现：*“模型在 MVC 中定义；它是完全独立于 UI 的数据或业务逻辑，用于**存储状态**并处理问题域。”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:18:22.157

我会选择option1。在视图模型中保留对模型的引用，但不要直接使用任何属性。相反，从模型中填充视图模型自己的属性。您的视图模型可以从模型中监听相关属性的属性更改通知，并从模型中重新填充它自己的属性。该模型仍然独立于 UI，它只是通知属性更改。

在我看来，除了 inotifypropertychanged 之外，做你自己的发布者 - 订阅者逻辑可能只是一种矫枉过正，因为这样做可能没有任何好处。但是，这取决于您是否有能力在视图模型中拥有模型引用，而**我的回答是基于您可以在视图模型中拥有模型引用的假设**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:43:12.227

> **模型类通常通过INotifyPropertyChanged**和 **INotifyCollectionChanged**接口提供属性和集合更改通知事件。这使它们可以轻松地在视图中绑定数据。表示对象集合的模型类通常派生自**ObservableCollection**类。

[MSDN](http://msdn.microsoft.com/en-us/library/gg405484%28PandP.40%29.aspx)

我不会说模型*通常*实现 INotifyPropertyChanged，但我不会断然拒绝这样做。在更简单的 - 非 PRISM - 环境中，我认为这完全没问题。

**接着？**

澄清一下：**INotifyPropertyChanged**是一个在属性更改时通知的接口，正如其名称和大多数人所知道的那样。但是，仅此而已，尤其是它*不是 WPF 特定*的！此外，根据 MVVM 原则，*模型*应该与*ViewModel*无关。因此，很明显，您应该使用发布者（*模型*）-订阅者（*视图模型*）-模式（事件）。就这样。因此，作为对您问题的回答：如何设置模型/视图模型之间的通信取决于您的风格和具体任务：

如果您只想对更改的属性做出反应，只需使用**INotifyPropertyChanged**，因为这就是它的用途。在*ViewModel*中，只需订阅*Model的***PropertyChanged**事件并处理更改，这基本上只是“将它们向前映射”，即为 ViewModel 属性引发PropertChanged *，***这**受*模型*属性更改的影响。

 *****或者，如果您需要将模型更改包装在更具体的事件中，比如“ **MyDataUpdated** ”，那么我也没有看到任何问题。只需在 ViewModel 中侦听此事件，并根据需要进行处理。这完全没问题。

我希望这有帮助。

**编辑**：作为旁注：我建议使用*PropertyWeaver*扩展，这样你就不会用所有的 PropertyChanged 东西弄乱你的模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:06:41.377

选项 2 是可行的，尽管很脏。您可以通过接口公开公共事件和函数来稍微减轻脏污，并且视图模型仅通过该接口使用模型。

话虽如此，模型应该被视为信息的管道，而不是信息的容器。这意味着理想情况下，您的模型不应包含任何状态信息。如果您的模型中有一个持续打开的通道，需要在收到某些内容时通知其他组件，那么我建议您使用 Prism 中的[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx) - 这是一个弱事件发布/订阅系统，您的视图模型可以订阅您选择的事件，并且您的模型可以在需要时发布该事件（以及适当的有效负载）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T07:05:22.497

对于数据绑定，您可以使用****Binding****

[数据绑定概述](http://msdn.microsoft.com/en-us/library/ms752347.aspx)*****

# asp.net-mvc - 我们可以在一个视图中为不同的操作设置多个提交按钮吗？

> ID：13339460
> 
> 赞同：0
> 
> 时间：2012-11-12T06:56:29.037
> 
> 标签：asp.net-mvc, razor

我有 4 个提交按钮来执行不同的操作操作。对于一次提交，我这样写

```
@using (Html.BeginForm("Edit", "Seller", FormMethod.Post)){ 

} 
```

我们如何处理多个提交按钮？我们需要为每个提交按钮写相同的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:09:56.490

[以下](http://yassershaikh.com/how-to-handle-two-submit-buttons-in-html-beginform-in-mvc-3-razor/)是您如何为两个提交按钮执行此操作，类似地您可以为“n”提交按钮执行此操作。

下面是一个带有两个提交按钮的表单。请注意，这两个提交按钮具有相同的名称，即“submitButton”</p>

```
@Html.BeginForm("MyAction", "MyController"); %>
<input type="submit" name="submitButton" value="Button1" />
<input type="submit" name="submitButton" value="Button2" />
} 
```

现在转到控制器，Action 接受一个名为 string stringButton 的输入参数，其余的非常不言自明。

```
public ActionResult MyAction(string submitButton) {
        switch(submitButton) {
            case "Button1":
               // do something here
            case "Button2":
               // do some other thing here
            default:
                // add some other behaviour here
        }
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:48:35.200

我在这个用例中使用 MultiButtonAttribute。很好很清楚。您可以将逻辑分成不同的操作方法。

**多按钮属性**

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class MultiButtonAttribute : ActionNameSelectorAttribute
{
    public MultiButtonAttribute(string matchFormKey) : this(matchFormKey, null) {
    }

    public MultiButtonAttribute(string matchFormKey, string matchFormValue) {
        this.MatchFormKey = matchFormKey;
        this.MatchFormValue = matchFormValue;
    }

    public string MatchFormKey { get; set; }
    public string MatchFormValue { get; set; }

    public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo)
    {
        string value = controllerContext.HttpContext.Request[MatchFormKey];
        return value != null && (value == MatchFormValue || MatchFormValue == null);
    }
} 
```

**在控制器中**

```
[HttpPost]
[MultiButton("buttonPreviousPage")]
public ActionResult NavigateToPreviousPage(int currentPageIndex)
{
// .. action logic
} 
```

**在视图中**

```
@using (Html.BeginForm("SomeDefaultAction", "MyController", FormMethod.Post)){ 
    <input type="submit" id="buttonPreviousPage" name="buttonPreviousPage" value="Previous" />
    <input type="submit" id="buttonNextPage" name="buttonNextPage" value="Next" />
} 
```

**这个怎么运作**

`MultiButtonAttribute`扩展很重要`ActionNameSelectorAttribute`。当 MVC 选择正确的方法来匹配路由时，它会在方法上找到这样的属性，它会调用属性上的方法，`IsValidName`传递`ControllerContext`. 它正在查看键（按钮名称）是否在 POSTed 表单中，没有空值（或者最终您可以定义键（按钮）的预期值，但这不是必需的）。

在 MVC 2 中运行良好（但我希望它适用于以后的版本）。另一个优点是您可以本地化按钮的值。

# groovy - 如果条目丢失，则使用 groovy 查找并添加内部级别子节点

> ID：13339461
> 
> 赞同：1
> 
> 时间：2012-11-12T06:57:03.833
> 
> 标签：groovy, xmlnode

使用 groovy，我正在尝试读取 tomcat server.xml 并在`<Resource name="jdbc/testDS" auth="Container" ..... >`缺少节点时插入新的节点资源标记。

Server.xml 的层次结构为 Server -> GlobalNamingResources -> Resource

尝试了 2 种方式：- 1) 读取 server.xml

```
 groovy.util.XmlParser parser = new groovy.util.XmlParser();
  println "tomcat.directory.path for server.xml >> " + "C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server.xml"

  def root = parser.parse( "C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server.xml" )
  datasourceToAdd = parser.parseText("<Resource name=\"jdbc/testDS\" auth=\"Container\" type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.OracleDriver\" url=\"jdbc:oracle:thin:@localhost:1521:ORA\" username=\"ORA_TEST\" password=\"*****\" factory=\"org.apache.commons.dbcp.BasicDataSourceFactory\" defaultAutoCommit=\"false\" maxActive=\"10\" maxIdle=\"5\" maxWait=\"30000\" whenExhaustedAction=\"1\" driver=\"oracle.jdbc.OracleDriver\"/>");

  def nodeName = root.'**'.findAll { it.name()== 'jdbc/testDS' };
  println "nodeName >>>>>>> " + nodeName;
  if(!root.'**'.findAll { it.name()== 'jdbc/testDS' })  
  {
    root.find { it.name() == 'GlobalNamingResources' }.children().add( 0, fragmentToAdd )

    String outxml = groovy.xml.XmlUtil.serialize( root )
    println outxml
  } 
```

这里的问题是无法将数据写回 server.xml 并且条件也不正确。如果条件正确，则需要将 xml 写回文件，但没有找到如何执行此操作。

2) 逐行读取 server.xml 并开始写入文件，如果找不到条目，​​则插入标签。这里也放置条件似乎有问题。

```
 String cr = System.getProperty( "line.separator" );
  File webXML = new File(  "C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server2.xml"  )

  try
  {
    FileInputStream fstream = new FileInputStream( "C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server.xml" );
    DataInputStream dataInputStream = new DataInputStream( fstream );
    BufferedReader bufferedReader = new BufferedReader( new InputStreamReader( dataInputStream ) );
    String strLine;

    //Read File Line By Line
    while ( ( strLine = bufferedReader.readLine() ) != null )
    {
    println ">>>>>" + strLine;
    if(!strLine.contains("jdbc/testDS"))
    {
      webXML.append( strLine + cr );
    }
  }
  dataInputStream.close();
  AntBuilder ant = new AntBuilder()
  ant.move(file:  "C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server2.xml" , tofile:  "C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server.xml" );
  }
  catch ( Exception e )
  {//Catch exception if any
    println( "Error: " + e.getMessage() );
  } 
```

我尝试的两种方法都不会给出预期的结果。知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:04:14.063

不应该`findAll`是：

```
root.'**'.findAll { it.name() == 'Resource' && it.@name == 'jdbc/testDS' } 
```

因此，要使您的第一个片段更加“时髦”，您最终会得到：

```
new XmlParser().with { parser ->
  def root = parser.parse( 'C:/Program Files/Apache Software Foundation/Tomcat 5.5/conf/server.xml' )
  String frag = '''<Resource name="jdbc/testDS"
                  |          auth="Container"
                  |          type="javax.sql.DataSource"
                  |          driverClassName="oracle.jdbc.OracleDriver"
                  |          url="jdbc:oracle:thin:@localhost:1521:ORA"
                  |          username="ORA_TEST"
                  |          password="*****"
                  |          factory="org.apache.commons.dbcp.BasicDataSourceFactory"
                  |          defaultAutoCommit="false"
                  |          maxActive="10"
                  |          maxIdle="5"
                  |          maxWait="30000"
                  |          whenExhaustedAction="1"
                  |          driver="oracle.jdbc.OracleDriver"/>'''.stripMargin()
  def fragment = parser.parseText( frag );

  if( !root.'**'.Resource.@name.find { it == 'jdbc/testDS' } ) {
    root.find { it.name() == 'GlobalNamingResources' }.children() << fragment
    String outxml = groovy.xml.XmlUtil.serialize( root )
    println outxml
  }
} 
```

# c++ - 线程在while循环中间随机停止

> ID：13339462
> 
> 赞同：3
> 
> 时间：2012-11-12T06:57:08.693
> 
> 标签：c++, multithreading, qnx

我有一个程序正在做一些非常有趣的事情。基本上我有三个主线程，所有线程都很忙，问题线程基本上有一个看起来像这样的 while 循环：

```
while(variable which is always true) {
    get some data;
    process data;
    print message;
}
print end message; 
```

现在打印消息在前 400 轮中被打印，但在此之后线程停止运行。我已经尝试将此线程设为高优先级。我试过降低其他线程的优先级。最奇怪的是，这是以前工作的，而在调试另一个问题（仅使用 print 语句完成）时，它开始间歇性地发生。现在它已经成为永久性的，因为它每次都会发生。

暂时解决它的事情（然后它似乎再次停止工作）是：

1.  降低其他线程中打印语句的级别。

2.  降低其他线程的优先级。

3.  在不同的时间运行。

作为免责声明，我正在使用一个名为 QNX 的实时操作系统，这可能会直接导致问题。我希望不是这样，否则我们有一个大核心 i7 并且无法使用线程。

不幸的是，代码很长而且是为了工作，所以我真的不应该发布它。我希望得到帮助，这将指向我自己解决问题的正确方向。有谁知道可能导致这些症状的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:51:44.947

This very much sounds like a race condition.
Make sure, that there are no circumstances where a locked mutex is not properly unlocked, because that could lead to a deadlock.
Unfortunately debugging threading issues is very complex, so you're pretty much on your own here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:21:19.333

线程编程：同步 - [http://www.cs.cf.ac.uk/Dave/C/node31.html](http://www.cs.cf.ac.uk/Dave/C/node31.html)

阅读本文，向下阅读同步 - [http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/sys_arch/kernel.html](http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/sys_arch/kernel.html)

[http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/sys_arch/kernel.html#SCHEDULING](http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/sys_arch/kernel.html#SCHEDULING)

如果所有线程正在读取相同的数据，则使用锁。

```
pthread_mutex_lock( &m );
. . .
while (!arbitrary_condition) {
    pthread_cond_wait( &cv, &m );
    }
. . .
pthread_mutex_unlock( &m ); 
```

# android - TextView 文本打印在自身之上

> ID：13339468
> 
> 赞同：0
> 
> 时间：2012-11-12T06:58:02.927
> 
> 标签：android

我目前有一个标准的文本视图

```
<TextView
    android:id="@+id/tvTaskDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvTaskName"
    android:text="Date"
    android:layout_marginRight="30dp"
    android:paddingLeft="30dp"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我正在以编程方式设置视图的字体、文本大小和文本。

```
font = Typeface.createFromAsset(getAssets(), "fonts/Helvetica LT 75 Bold.ttf");
TextView tv = (TextView)(findViewById(R.id.tvTaskDate));
tv.setTypeface(font);
tv.setTextSize(20.0f);
tv.setText(getIntent().getExtras().getString("name")); 
```

问题是它是这样出来的：

![在此处输入图像描述](../Images/f6925f99c800e162cb28b10ffdc39dc6.png)

如果我注释掉设置字体的行，textView 会向下移动到下一行并按预期处理文本。我尝试设置该`MaxLine()`属性，但它仍然以相同的方式运行。

设置 textView 的字体时是否必须设置其他属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:58:27.873

根据上面 Lokesh 的评论，使用

```
tv.setLineSpacing(21.0f, 1); 
```

解决了这个问题。由于我使用了不同于 textviews 标准字体的新字体，因此我必须定义行之间的间距。

# bash - 如何在 bash curl 语句中包含“&”字符

> ID：13339469
> 
> 赞同：122
> 
> 时间：2012-11-12T06:58:03.437
> 
> 标签：bash, curl

我正在尝试在 bash 中使用 curl 来下载网页，但`&`URL 中的符号没有被解释为我想要的字符。关于如何让 bash 相信该符号`&`只是一个无聊的角色并且没有什么特别之处的任何想法？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-11-12T07:00:19.360

将整个 URL 放在双引号内应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-12T07:00:52.033

```
curl "http://www.example.com?m=method&args=1" 
```

您是否使用 & 作为 GET URL 的分隔符？还是在一条数据中？

如果它在数据中，则必须将其编码为 HTML 字符，如果不是，则用引号括起来。

的编码`&`应该`%26`在 URL 中。

```
curl "http://www.example.com?m=this%26that 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-11-12T15:28:12.333

在符号周围加上单引号`&`似乎有效。也就是说，使用`http://www.example.com/page.asp?arg1=${i}'&'arg2=${j}`curl 之类的 URL 会返回请求的网页。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-08-05T15:58:12.933

您可以使用 -d 参数在 POST 请求中指定 http url 参数，而不是尝试转义“&”字符，如下所示：

```
curl -X POST http://www.example.com \
-d arg1=this \
-d arg2=that 
```

如果请求是 GET，那么您还应该添加 -G 选项，它告诉 curl 使用 GET 请求发送数据。

```
curl -X GET -G http://www.example.com \
-d arg1=this \
-d arg2=that 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-25T18:33:17.623

您可以`%26`改用`&`. 实体代码将正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-11T02:57:07.410

使用`--url`带双引号的参数对我有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-18T09:48:26.633

最简单的方法：

```
curl -X GET -G http://example.com -d var1=$1 -d var2=$2 
```

# javascript - 通过 NodeJS 加载带有 HTML 文件的 JS 文件的正确方法

> ID：13339472
> 
> 赞同：6
> 
> 时间：2012-11-12T06:58:29.547
> 
> 标签：javascript, node.js, readfile, static-html

我无法让所服务的 defualt.htm 页面头部中包含的内容“工作”。html 在 dom 中加载，只是 CSS 和 JS 文件失败。有更好的选择吗？我希望将解决方案保留在 NodeJS 中，但也可以对 socket.io 和 express 开放。

谢谢，下面是我使用的。

**NodeJS 服务页面**

```
var http = require('http'),
fs = require('fs');

fs.readFile(__dirname+'/default.htm', function (err, html) {
    if (err) {
        throw err; 
    }       
    http.createServer(function(request, response) {  
        response.writeHeader(200, {"Content-Type": "text/html"});  
        response.write(html);  
        response.end();  
    }).listen(port.number);
}); 
```

**Default.html 页面**

```
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="objects/css/site.css" type="text/css" />
    <script src="objects/js/jquery.min.js" type="text/javascript"></script>
    <script src="objects/js/site.min.js" type="text/javascript"></script>
</head>

<body></body>    

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:20:39.197

您的 Javascript 和样式失败，因为它们不存在。您当前的网络服务器只发送一个路由，即根路由。相反，您需要允许使用多条路线。ExpressJS 以一种更简单的方式为您做到这一点，但没有它仍然很有可能。

```
 var http = require('http');
    var fs   = require('fs');

    var server = http.createServer(function(request, response){
       var header_type = "";
       var data        = "";
       var get = function (uri, callback) {
           // match `request.url` with uri with a regex or something.
           var regex = uri;
           if (request.url.match(regex)) {
               callback();
           }
       };    

       var render = function (resource) {
           // resource = name of resource (i.e. index, site.min, jquery.min)
           fs.readFile( __dirname + "/" + resource, function(err, file) {
              if (err) return false; // Do something with the error....
              header_type = ""; // Do some checking to find out what header type you must send.
              data = file;
           }
       };

       get('/', function(req, res, next) {
           // Send out the index.html
           render('index.html');
           next();
       });

       get('/javascript.min', function(req, res, next) {
          render('javascript.js');
          next();
       });

    });

    server.listen(8080); 
```

这可能会让你开始，但你必须像`next()`你自己一样实现一些东西。一个非常简单的解决方案，但一个有效的解决方案。

响应静态文件的另一种解决方案是在`http.createServer`回调中创建一个捕获器。在该`get`方法中，如果 uri 不匹配，那么您将在`public`将完整 uri 与文件系统结构匹配的文件夹中查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-14T08:34:18.380

试试这个怎么样：

```
var http = require('http');
var fs = require('fs');
var path = require('path');

http.createServer(function (request, response) {
console.log('request starting...');

var filePath = '.' + request.url;
if (filePath == './')
    filePath = './index.html';

var extname = path.extname(filePath);
var contentType = 'text/html';
switch (extname) {
    case '.js':
        contentType = 'text/javascript';
        break;
    case '.css':
        contentType = 'text/css';
        break;
    case '.json':
        contentType = 'application/json';
        break;
    case '.png':
        contentType = 'image/png';
        break;      
    case '.jpg':
        contentType = 'image/jpg';
        break;
    case '.wav':
        contentType = 'audio/wav';
        break;
}

fs.readFile(filePath, function(error, content) {
    if (error) {
        if(error.code == 'ENOENT'){
            fs.readFile('./404.html', function(error, content) {
                response.writeHead(200, { 'Content-Type': contentType });
                response.end(content, 'utf-8');
            });
        }
        else {
            response.writeHead(500);
            response.end('Sorry, check with the site admin for error: '+error.code+' ..\n');
            response.end(); 
        }
    }
    else {
        response.writeHead(200, { 'Content-Type': contentType });
        response.end(content, 'utf-8');
    }
});

}).listen(8125);
console.log('Server running at http://127.0.0.1:8125/'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T07:18:56.257

好吧，您正在为`default.htm`所有请求提供文件。因此，当浏览器请求时`objects/js/jquery.min.js`，您的服务器会返回`default.htm`.

你真的应该考虑使用**express**或其他一些框架。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-12T07:35:54.460

我也要把我的两分钱扔在这里。

我解决与提供静态文件相同的问题的方法是我开始使用 Paperboy 模块，现在该模块已被弃用，取而代之的是 Send 模块。

Anyhoo，我解决它的方法是在请求进入我的 GET 方法之前“劫持”请求并检查它的路径。

我“劫持”的方式如下

```
self.preProcess(self, request, response); 
```

和

```
preProcess: function onRequest(app, request, response){ //DO STUFF } 
```

如果路径包含 STATICFILES 目录，我会提供不同的文件服务，否则我会使用“html”路径。下面是`//DO STUFF`函数`preProcess()`的

```
var path = urllib.parse(request.url).pathname;
if(path.indexOf(settings.STATICFILES_DIR) != -1) {
    path = settings.STATICFILES_DIR;
    requestedFile = request.url.substring(request.url.lastIndexOf('/') + 1, request.url.length);
    return resolver.resolveResourceOr404(requestedFile, request, response);
} 
```

可能有更好的方法可以做到这一点，但这对于我需要它做的事情来说就像一种魅力。

然后使用 Paperboy 模块，使用`resolver.resolveResourceOr404();`函数像这样传递文件

```
resolveResourceOr404 : function (filename, httpRequest, httpResponse) {
    var root = path.join(path.dirname(__filename), '');

    paperboy.deliver(root, httpRequest, httpResponse)
    .error(function(e){
        this.raise500(httpResponse);
    })
    .otherwise(function(){
        this.raise404(httpResponse);
    });
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T07:19:27.307

你最好使用 Express 来处理这类事情。

像这样的东西可以完成这项工作。

应用程序.js

```
var express = require('express')
  , http = require('http')
  , path = require('path');

var app = express();

//Configure Your App and Static Stuff Like Scripts Css
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views'); // Your view folder
  app.set('view engine', 'jade');  //Use jade as view template engine
  // app.set("view options", {layout: false});  
  // app.engine('html', require('ejs').renderFile); //Use ejs as view template engine
  app.use(express.logger('dev'));

  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(app.router); 
  app.use(require('stylus').middleware(__dirname + '/public')); //Use Stylus as the CSS template engine
  app.use(express.static(path.join(__dirname, 'public'))); //This is the place for your static stuff
});

app.get('/',function(req,res){
  res.render('index.jade',{
    title:"Index Page 
    }
}); 
```

index是一个jade模板页面。它呈现为静态html，与express配合得很好。

对于所有页面的全局静态标题，您可以制作这样的模板并将其包含在任何页面中。

static_header.jade

```
 doctype 5
html
  head
    title= title
    script(src='/javascripts/jquery-1.8.2.min.js')   
    block header 
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    block content 
```

最后是你的 index.jade，它使用 static_header 和自己的带有自己脚本的动态头。

```
extends static_header

block header
  script(src='/javascripts/jquery-ui-1.9.1.custom.js')
  script(src='http://jquery-ui.googlecode.com/svn/trunk/ui/i18n/jquery.ui.datepicker-tr.js')
  link(rel='stylesheet',href='/stylesheets/jquery-ui-1.9.1.custom.min.css')
block content
  h1= title 
```

将这两个文件放在您的视图文件夹中并准备好滚动。

# php - wamp 的禁止问题

> ID：13339473
> 
> 赞同：0
> 
> 时间：2012-11-12T06:58:30.793
> 
> 标签：php, apache, wamp, require-once

我的 wamp 工作得很好。localhost、phpmyadmin 和所有其他 php、html 等文件都可以通过 localhost url 访问。但是，当我尝试访问`require_once("config.php");` 引用任何其他 php 文件的 php 文件时，它会给出以下错误：

> 您无权访问此服务器上的 /myfolder/myfile.php/" . $requests_url ." 。

例如

```
<?php
    /* Works fine*/
    echo "Test";
 ?> 
```

```
<?php
   /* Give forbidden error*/
   require_once("config.php");
   echo "Test";
?> 
```

我已经允许所有必须在 http.confiq apachi 设置文件中完成的权限和设置。现在是这个样子

```
<Directory "c:/wamp/www/">

    Options Indexes FollowSymLinks Includes  ExecCGI 
    AllowOverride all
    Order allow,deny
    Allow from all

</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:16:21.550

您可能 - 好吧 - 权限设置错误:) 我认为 apache 配置与它没有任何关系。也许您应该可以选择以超级用户身份启动 wamp（我认为它应该在可执行文件上右键单击，当然，前提是您检查并重新检查了该文件的权限十次）

# tsql - 通过比较目标表中的最后一行来插入不重复的触发器

> ID：13339474
> 
> 赞同：0
> 
> 时间：2012-11-12T06:58:35.593
> 
> 标签：tsql, triggers, compare, record

嗨，我读了两天，但找不到解决方案，这就是为什么我很高兴我正在尝试触发从最后一条记录中插入数据最高的插入表，而没有重复。我有目标表：

```
CREATE TABLE [dbo].[exported] ([Repair_Date] [datetime] NULL,
[idKards] [int] NULL,   [Position] [nvarchar](32) NULL,
[error] [int] NULL) 
```

并触发：

```
Create TRIGGER [dbo].[tr2] ON [dbo].[mes] AFTER INSERT 
AS
INSERT INTO  dbo.[exported]    
    ([idKard],[Repair_Date],[Position],[Error],[name],[model_name],[parent_number]) 
    SELECT c.idKards,i.[Repair_Date],i.[Position],i.error,s.name, mo.Model_Name,  pn.Parent_Number FROM inserted i
          left outer join dbo.test t on i.idTest=t.idTest
          left outer join dbo.Kards k on t.idKards=k.idKards
    where [Repair_Error] in (300,400) 
    and K.idKards > (select max(idKards) from dbo.exported) 
```

dbo.exported 中的示例数据 - 在此表中，所有值都被删除，除了最后一个：

```
Repair_Date            idKards  Position    error    
2012-10-10 00:03:25    91996    IC4303          4 
```

当数据从另一个表（下面的示例数据）插入到表 dbo.mes（触发器打开）时：

```
Repair_Date         idTest  Position error  
2012-10-10 00:00:58 91996   C524     1  
2012-10-10 00:00:56 91996   C522     1  
2012-10-10 00:00:54 91996   C537     1  
2012-10-10 04:34:31 95694   P1104    1  
2012-10-10 06:48:33 97405   P1104    1  
2012-10-10 01:31:17 93088   P1104    1  
2012-10-10 01:34:04 92747   P1104    1  
2012-10-10 12:49:22 102773  P1104    1  
2012-10-10 14:19:03 102773  P1104    4  
2012-10-15 16:27:24 149693  P1104    1 
```

触发器应将 dbo.exported 上的最后一个 idTest 与插入的数据进行比较，并将不重复的数据添加到表 dbo.exported。但它添加了所有：

```
Repair_Date idTest 位置错误  
2012-10-10 00:03:25 91996 IC4303 4
2012-10-10 00:00:58 91996 C524 1  
2012-10-10 00:00:56 91996 C522 1  
2012-10-10 00:00:54 91996 C537 1  
2012-10-10 04:34:31 95694 P1104 1  
2012-10-10 06:48:33 97405 P1104 1  
2012-10-10 01:31:17 93088 P1104 1  
2012-10-10 01:34:04 92747 P1104 1  
2012-10-10 12:49:22 102773 P1104 1  
2012-10-10 14:19:03 102773 P1104 4  
2012-10-15 16:27:24 149693 P1104 1

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:17:51.247

您正在对插入的表使用左连接，因此您的查询将始终返回行

# zebra-printers - 哪些不应包含在此 ZPL 代码中？

> ID：13339475
> 
> 赞同：1
> 
> 时间：2012-11-12T06:58:41.453
> 
> 标签：zebra-printers, zpl, zpl-ii

我正在开发一个需要打印到 Zebra 打印机的 Windows Mobile 应用程序。问题是，由于客户没有提供任何打印机，因此我在我的国家没有打印机。

我的方法是先在 ZebraDesigner2 中设计标签，然后将标签打印到文本文件中。将标签打印到文本文件而不是打印机会发送 ZPL 代码以生成我尝试打印的标签。因此，我可以通过先设计标签然后查看 ZPL 代码来更快地生成 ZPL 代码。有点像具有背景 XML 的拖放 GUI。

假设我有一个包含以下文本的简单标签： **Hello World！** 如果我在 ZebraDesigner2 中打印它，它将被写入我的文本文件：

```
CT~~CD,~CC^~CT~
^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ
^XA
^MMT
^PW609
^LL0406
^LS0
^FT1,29^A0N,28,28^FH\^FDHello World!^FS
^PQ1,0,1,Y^XZ 
```

我的主要问题是，如果我要通过我的 Windows Mobile C# 应用程序将此代码发送到打印机，我应该在我的 C# 代码中包含哪一个？我是否在 ^XZ 之前包含 ^XA 的部分？如果我没记错的话，我相信 CT~~CD,~CC^~CT~ 不应该包含在我的代码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:18:10.740

迟到的答案，但是由于正在查看...

CT 线和第一组 XA..XZ 序列设置模式、标签长度、可打印区域等。

如果您删除它们，它将从标签/打印机设置中获取这些设置，这通常是您想要的。打印机可以感应标签的长度和宽度。

将它们留在里面可能会导致很大的问题，因为如果您在标签中定义了可打印区域，然后提交的下一个标签类型没有，它将使用您定义的设置 - 这可能会导致标签中出现空白区域，例如。截止在 Zebra Designer 自定义标签之后打印的 USPS 标签条码。

发现这一点很困难 - 将它们排除在外，并且您应该将 MMT、PW609、LL0406 和 LS0 排除在剩余的 XA..XZ 序列之外 - 您的 Hello World 不会受到影响。

If you really want to limit the area printed to, set up margins inside the printable area, etc, refer to the manual.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:54:39.630

在删除任何代码之前，您必须查看程序员指南。例如，CT~ 命令更改控制前缀。

在 Internet 或 zebra.com 站点上搜索“ZPL 编程指南”。

因此，请保持文本文件不变，然后将其包含到您的 Windows 移动应用程序中。

PS：zebra 为标签/收据打印机提供 SDK：[http ://www.zebra.com/gb/en/products-services/software/adapt-software.html](http://www.zebra.com/gb/en/products-services/software/adapt-software.html)

PS2：如果没有测试打印机，您可能会得到糟糕的最终结果。

# vim - 用于在 gVim 中显示缩进指南的插件名称

> ID：13339476
> 
> 赞同：1
> 
> 时间：2012-11-12T06:58:42.307
> 
> 标签：vim, vim-plugin

任何人，任何想法？

哪个插件在下图中显示了缩进指南。从[http://leetless.de/images/vim/pyte.png下载](http://leetless.de/images/vim/pyte.png)

![在此处输入图像描述](../Images/5148b133fd0ec225644a050841049aaf.png)

![用黑线标记的垂直缩进指南](../Images/3a8ff4c4ea1ac67169efbc0e5582904a.png).png

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:36:33.113

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:41:03.240

这是一个不错的 vim 插件：[https ://github.com/Yggdroot/indentLine](https://github.com/Yggdroot/indentLine)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:37:17.117

还有一个插件，[vim-indent-guides](https://github.com/nathanaelkane/vim-indent-guides)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:17:39.190

不确定“缩进指南”是什么意思，但我认为不涉及任何插件。

我看到您可能指的第一件事是行首的字符，指示哪里有制表符。这可以通过将`listchars`选项设置为适当的值、打开选项并为突出显示组`list`选择颜色来完成。`SpecialKey`

您可能指的另一件事是突出显示当前包含光标的列。这可以通过打开该`cursorcolumn`选项来完成。`CursorColumn`可以使用高亮组设置用于此的颜色。

# xml - 找不到元素“xs:schema”的声明

> ID：13339477
> 
> 赞同：0
> 
> 时间：2012-11-12T06:58:42.053
> 
> 标签：xml, xsd

我的 XML（第一条语句）：

```
<ReportConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

…………

我的 XSD（前几行）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified">
<xs:element name="ReportConfig"> 
```

...........

但是，我收到以下错误 XML Document has Error:true cvc-elt.1: Cannot find the declaration of element 'xs:schema'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:18:20.790

这是我的错。

我正在验证 XSD 而不是 XML。我改变了这个，它工作得很好。

谢谢！

# iphone - MapView 以用户坐标为中心缩放

> ID：13339480
> 
> 赞同：1
> 
> 时间：2012-11-12T06:58:58.313
> 
> 标签：iphone, ios, ios5, ios4, ios6

我有一个显示用户位置的地图视图。用户位置显示为地图视图的中心。但是当地图视图被缩放时，我必须将用户位置显示为中心。但目前它并没有显示出来。用户位置远离中心。即使地图被缩放，如何在中心位置显示用户位置。我使用了 KVO 通知，但是在缩放功能时会缩小地图并将用户位置绘制在中心。但我不想缩小它。任何帮助表示赞赏。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:04:48.040

我不太确定我是否理解您要执行的操作，但您可以尝试使用

`- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated`MKMapView 的委托方法。

在那里，您可以使用跨度值并检查地图是否已缩放。然后，您可以将地图居中到用户的当前位置。

或者你可以使用

`- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated`

在更改区域之前将地图居中的委托方法。

# pentaho - 在分析器中重命名目录和多维数据集名称

> ID：13339482
> 
> 赞同：0
> 
> 时间：2012-11-12T06:59:29.370
> 
> 标签：pentaho, olap-cube

我有一个关于 pentaho cube 的疑问：

让我们假设一个多维数据集（比如 sample ），其**架构名称为 schema1**，**多维数据集名称为 cube1**。我 将该模式和多维数据集分别**重命名为模式****2 和多维数据集 2**，并在模式工作台上发布。

由于我的分析器之前指向 schema1 和 cube1.. 所以为了使其正常工作，我还将**目录条目**更新为 schema2并将**多维数据集条目更新为 cube2**。

现在，当我尝试运行分析器时，它在日志中显示以下错误：

com.pentaho.analyzer.service.e：无法找到目录：com.pentaho.analyzer.service.impl.OlapConnectionManagerImpl.createConnection(SourceFile:79) 中的示例 com.pentaho.analyzer.service.impl.c.getConnection( SourceFile:31) 在 com.pentaho.analyzer.service.impl.OlapMetaDataManager.getConnection(SourceFile:49)

**注意：好吧，我还检查了 olap 文件夹下 datasource.xml 中相应目录标签的条目。**

所以我的问题是我还需要配置什么才能使分析器正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:53:36.543

我已经重复了同样的练习..现在它工作了..我只是刷新了 pentaho..可能是早些时候我忘了刷新 pentaho。

# c# - 动态文本框验证

> ID：13339489
> 
> 赞同：-4
> 
> 时间：2012-11-12T06:59:58.403
> 
> 标签：c#, winforms

这是我的表结构 2 列率图表和数量：

```
rate   chart   qty
1      -5       1
6     -10       2
11    -20       3 
```

我在 Windows 窗体上有 3 个字段

*   1 个组合框
*   1 个文本框
*   1 个按钮

我通过组合框获取 ratechart 列值，我有该代码，但我的要求是如果用户从组合框中选择 1-5，那么文本框他不能在文本框中输入超过 6 个。

如果用户从组合框中选择 6-10 相同，那么他不能在文本框中输入超过 12

当他点击保存按钮时，他收到一个错误，即数量更多..

提前谢谢。请帮助我获取此代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:12:57.487

假设`cmbRateChart.SelectedValue`包含相对于 RangeChart 的 qty 值。

```
private void textBox_Validating(object sender, CancelEventArgs e)
{
    bool cancel = false;
    int number = -1;

    if (int.TryParse(this.textBox.Text, out number))
    {
        var validRange = Convert.ToInt32(cmbRateChart.SelectedValue) * 6;
        if (number <= validRange)
            cancel = false; //passed validation.
        else
            cancel = true; //failed validation, number is not in valid range

    }
    else
        cancel = true;//failed validation: text box is not a number
    e.Cancel = cancel;
} 
```

用法：调用此函数来检查验证。

```
this.ValidateChildren(ValidationConstraints.Enabled); 
```

参考：[Windows 窗体中的验证](http://blog.scosby.com/post/2010/02/11/Validation-in-Windows-Forms.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:30:02.600

```
 private void saveButton_Click(object sender, EventArgs e)
    {
        // Get value from textBox
        int number = Int32.Parse(textBox1.Text);

        // Get value from combobox
        int selcetedComboValue = Int32.Parse(comboBox1.SelectedItem.ToString());

        // Validate Values
        if (selcetedComboValue <= 5)
        {
            if (number <= 6)
            {
                // Valid Number 
            }
            else
            {
                // Invalid Number
            }
        }
        else if (selcetedComboValue <= 10)
        {
            if (number <= 12)
            {
                // Valid Number
            }
            else
            {
                // Invalid Number
            }
        }
    } 
```

# ubuntu - 如何防止 kdevelop 为不存在的项目显示“无法加载项目文件 ....”

> ID：13339490
> 
> 赞同：0
> 
> 时间：2012-11-12T07:00:06.837
> 
> 标签：ubuntu, kdevelop

当我在 Ubuntu (12.04) 上启动 kdevelop (4.3.1) 时，它总是显示两次消息

```
Unable to load the project file ... 
```

我曾经创建了一个项目 kdevelop 试图找到，但是我移动了文件，现在项目的位置已经改变。由于这个项目根本不重要，我希望 kdevelop 防止在不存在的位置寻找这个项目。我可以相应地配置 kdevelop 以从“查找”列表中“删除”项目吗？或者我可以编辑一个 kdevelop 配置文件来完成项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:05:00.937

这听起来像一个错误。请在[bugs.kde.org](http://bugs.kde.org)上报告。

作为一种解决方法，您可以创建一个不包含任何打开文件的新会话。（并删除旧的）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-14T14:29:58.827

只需更改要在其中创建配置文件的项目目录的权限即可。

```
chmod -R 777 source_directory_path 
```

# php - 使用codeigniter更新mysql中的行

> ID：13339491
> 
> 赞同：0
> 
> 时间：2012-11-12T07:00:10.840
> 
> 标签：php, mysql, codeigniter

所以。我一直在尝试更新密码。随机生成。但。如果我刷新数据库，没有任何反应。我的代码有什么问题？

这是我的控制器：

```
function create_password()
{
    $this->load->model('members_model');

    $newRow = array(
        'name' => $this->input->post($a);
        'value' => 
    );
    $this->membership_model->passchange($newRow);
} 
```

这是我的模型：

```
function passchange()
{
$this->db->select();
$this->db->from('membership');
$this->db->where('security_answer',$this->session->userdata('security_answer'));

$q=$this->db->get();

if($q->num_rows() > 0) {
$data = array();
foreach($q->result() as $row) {

    $data['result']=$row;

    $this->db->where('email_address', $this->session->userdata('email_address'));
    $this->db->update('membership', 'password');
}

return $data;
}

} 
```

这是我的观点：

```
<?php echo form_open('login/create_password')?>
<?php $this->load->view('includes/header');
$CI =& get_instance();
$CI->load->model('membership_model');
$result = $CI->membership_model->passchange();
foreach($result as $row) {

    }
?>

Your Email Address is: &nbsp; <?php echo $row->email_address;?> <br/>
<?php
$a = random_string('alnum', 6);
?> 

Your password is: &nbsp; <?php echo $a; "<br/>"?>

<p align="right"><?php echo anchor('login/signin', 'Back to Login Page'); ?></p> 
```

我数据库中的密码为空。它没有更新。请帮忙。先感谢您！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:04:02.300

错误就在这里

```
$this->db->update('membership', 'password'); 
```

此方法获取数组作为第二个参数

```
$data['password'] = $newpassword;
$this->db->update('membership',  $data); 
```

也用这个方法

```
echo $this->db->last_query(); 
```

查看最近运行了哪些查询。并且不要忘记将 where 指令与 update 指令一起使用。再次阅读用户指南，非常有帮助

[https://www.codeigniter.com/userguide2/database/active_record.html](https://www.codeigniter.com/userguide2/database/active_record.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:58:32.113

Marishka 在继续这个过程之前，你真的真的需要看我给你的那些教程。您将达到应用程序严重混乱以至于几乎不可能修复的地步。

您在那里所做的几乎所有事情都显示了不好的做法，其中最重要的是停止加载 CI 实例并从视图中的模型获取数据。

以下是您的代码存在的问题。

1.  您正在创建一个 $newRow 数组，使用您没有获得的 post 值，因为您没有发布任何内容。在视图中创建变量并不会自动将其回传，要将数据发布到控制器，它需要在表单中，并且该表单需要有一个动作来调用控制器函数。

2.  $a 不会等于任何东西，因为我所知道的 random_string 不是一个 php 函数，它看起来就像你刚刚从教程中间拉出来的东西，没有阅读它是如何创建的，所以 $a 将是null，即使它被发送回控制器，它仍然没有任何值可以插入到数据库中。

3.  在您将 $newRow 传递给您的模型中，您实际上从未真正将 $newRow 放入函数中。

4.  这与它不起作用无关，但您是根据安全答案更新哪个记录？许多用户有相同答案的可能性使这是一个可怕的想法。

5.  如前所述，活动记录更新函数中的第二个参数应该是一个数组。因此，要了解该功能在做什么，它会像这样分解。

    $this->db->update ($tableToUpdate, $arrayOfValuesToUpdate);

值数组是键对，因此对于密码，您将拥有一个如下所示的数组：

```
$arrayOfValuesToUpdate = array(
    'nameOfPasswordFieldInYourDB' => 'value you want to set the password to'
); 
```

我真的感觉到您正在尝试从各种示例和教程中学习 CI，您确实需要停下来看看我之前从第一步开始链接的 nettuts 教程。您的做法很糟糕，而且您对自己实际所做的事情的理解程度很低，以至于您只是在复制和粘贴，而没有得到应该实际发生的事情。Nettuts 教程将为您提供正确执行这些操作所需的基本理解。

# c++ - Builder 2010“不可访问”错误

> ID：13339494
> 
> 赞同：0
> 
> 时间：2012-11-12T07:00:25.013
> 
> 标签：c++, c++builder, c++builder-2010, c++builder-6

我正在尝试将我的项目从 C++ Builder 6 迁移到 C++ Builder 2010。项目中有一个 TChart。当我在 BCB 2010 中编译它时，我收到了很多错误，例如`E2247 '_fastcall TSeriesPointer::ChangeStyle(TSeriesPointerStyle)' is not accessible`. 会是什么？

存在代码失败的字符串：

```
Series8->Pointer->ChangeStyle(InpStr.ToInt()); 
```

Series8——它是一个 TSeries 类型的对象。InpStr -- 是一个 UnicodeString 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:26:45.687

我找到了答案。在 Builder C++ 2010 中，名称开头`Change`的函数更改为没有“更改”的属性。IE：

```
Series13->Pointer->ChangeStyle(4); 
```

到：

```
Series13->Pointer->Style = psCross; 
```

# content-management-system - Modx getResources：在X和X之间获取资源的方法？

> ID：13339502
> 
> 赞同：0
> 
> 时间：2012-11-12T07:00:52.030
> 
> 标签：content-management-system, modx, modx-revolution, getresource

我想知道是否有人知道一种检索方法，例如使用一个 getResource 行的父级的前 5 个（例如：1 -5）资源，然后使用另一个 getResources 行检索下一个 5（6 - 10）个资源？有点像分页。

我无法在文档中找到执行此操作的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:51:03.643

您想使用`offset`和`limit`属性。偏移量用于跳过查询条件返回的指定数量的资源：

```
[[!getResources? &parents=`[[*id]]` &tpl=`myRowTpl` &limit=`5`]]

[[!getResources? &parents=`[[*id]]` &tpl=`myRowTpl` &limit=`5` &offset=`5`]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:30:19.460

您可能想考虑将 getPage 和 getResources 结合起来，因为这将为您进行分页...

[http://rtfm.modx.com/display/ADDON/getResources#getResources-UsinggetPageforPagination](http://rtfm.modx.com/display/ADDON/getResources#getResources-UsinggetPageforPagination)

[http://rtfm.modx.com/display/ADDON/getPage](http://rtfm.modx.com/display/ADDON/getPage)

# iphone - 在两个 CA 层之间动态创建一个 CA 层

> ID：13339504
> 
> 赞同：0
> 
> 时间：2012-11-12T07:00:55.387
> 
> 标签：iphone, xcode, ios5, core-animation, calayer

我的视图有多个像 UITableView 单元格一样排列的 CA 层。我以自上而下的顺序一个接一个地动态创建了图层。但是我想在两层之间创建一个层，当我在两层之间捏出来时，我想在两层之间创建一个层。我怎样才能做到这一点。我是新手，所以任何更接近的帮助或方向都会很棒。...

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:06:09.307

您可以使用其中一种*CALayer*方法

```
- (void)insertSublayer:(CALayer *)aLayer atIndex:(unsigned)index
- (void)insertSublayer:(CALayer *)aLayer below:(CALayer *)sublayer
- (void)insertSublayer:(CALayer *)aLayer above:(CALayer *)sublayer 
```

在子层数组中的特定点插入一个新层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:52:09.213

不知道我是否明白了.. 但是当您创建图层时，请确保它们位于同一图层树中（同一图层的子图层（或子子图层））

所以 l1 有 l2 有 l3

那么zorder就已经在那里了

* * *

现在你有 l_parent 有 {l1 and l2 and l3 and l4} ... lx 是兄弟姐妹

TODO： **设置图层的 zindex**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:51:35.307

在这里和那里挖掘了很多之后，我从[这里](https://github.com/MassiveHealth/Opaque)的示例中得到了答案。它不仅给了我我的答案，我实际上学到了一些关于 CALayer 和核心动画的新东西，它的一些细节在[这里](http://blog.massivehealth.com/post/18563684407/clear)

# android - 在图像 Android 上创建签名？

> ID：13339505
> 
> 赞同：4
> 
> 时间：2012-11-12T07:01:07.173
> 
> 标签：android

我正在制作一个应用程序来在文件图像上创建签名。在这里，我将图像文件从存储卡加载到应用程序中，并使用 Canvas Paint 可以通过绘图手动创建签名。

这里的问题是客户在特定位置登录的应用程序要求。我的代码允许客户可以在客户想要的任何地方登录，例如在窗户上油漆。现在，我只想在特定区域签名...帮帮我...

这是我的代码

主.java

```
public class Longvan extends Activity implements OnClickListener, OnTouchListener {
  ImageView choosenImageView;
  Button choosePicture;
  Button savePicture;
  Bitmap bmp;
  Bitmap alteredBitmap;
  Canvas canvas;
  Paint paint;
  Matrix matrix;
  float downx = 0;
  float downy = 0;
  float upx = 0;
  float upy = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_longvan);
    int currentOrientation = getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
       setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    }
    else {
       setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    }

    choosenImageView = (ImageView) this.findViewById(R.id.ChoosenImageView);
    choosePicture = (Button) this.findViewById(R.id.ChoosePictureButton);
    savePicture = (Button) this.findViewById(R.id.SavePictureButton);
    savePicture.setOnClickListener(this);
    choosePicture.setOnClickListener(this);
    choosenImageView.setOnTouchListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_longvan, menu);
    return true;
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
     int action = event.getAction();
        switch (action) {
        case MotionEvent.ACTION_DOWN:
          downx = event.getX();
          downy = event.getY();
          break;
        case MotionEvent.ACTION_MOVE:
          upx = event.getX();
          upy = event.getY();
          canvas.drawLine(downx, downy, upx, upy, paint);
          choosenImageView.invalidate();
          downx = upx;
          downy = upy;
          break;
        case MotionEvent.ACTION_UP:
          upx = event.getX();
          upy = event.getY();
          canvas.drawLine(downx, downy, upx, upy, paint);
          choosenImageView.invalidate();
          break;
        case MotionEvent.ACTION_CANCEL:
          break;
        default:
          break;
        }
        return true;      
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v == choosePicture) {
          Intent choosePictureIntent = new Intent(
              Intent.ACTION_PICK,
              android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
          startActivityForResult(choosePictureIntent, 0);
        } else if (v == savePicture) {
          if (alteredBitmap != null) {
            ContentValues contentValues = new ContentValues(3);
            contentValues.put(Media.DISPLAY_NAME, "Draw On Me");
            Uri imageFileUri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, contentValues);
            try {
              OutputStream imageFileOS = getContentResolver().openOutputStream(imageFileUri);
              alteredBitmap.compress(CompressFormat.JPEG, 90, imageFileOS);
              Toast t = Toast.makeText(this, "Thank you! Image Saved!", Toast.LENGTH_LONG);
              t.show();
            } catch (Exception e) {
              Log.v("EXCEPTION", e.getMessage());
            }
          }
        }
}

 protected void onActivityResult(int requestCode, int resultCode,
          Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);

        if (resultCode == RESULT_OK) {
          Uri imageFileUri = intent.getData();
          try {
            BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
            bmpFactoryOptions.inJustDecodeBounds = true;
            bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(
                    imageFileUri), null, bmpFactoryOptions);
            bmpFactoryOptions.inJustDecodeBounds = false;
            bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(
                    imageFileUri), null, bmpFactoryOptions);
            alteredBitmap = Bitmap.createBitmap(bmp.getWidth(),bmp.getHeight(),bmp.getConfig());
            canvas = new Canvas(alteredBitmap);
            paint = new Paint();
            paint.setColor(Color.BLUE);
            paint.setStrokeWidth(2);
            matrix = new Matrix();
            canvas.drawBitmap(bmp, matrix, paint);
            choosenImageView.setImageBitmap(alteredBitmap);
            choosenImageView.setOnTouchListener(this);
          } catch (Exception e) {
            Log.v("ERROR", e.toString());
          }
        }
      }
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T07:59:48.223

输入签名的特定视图怎么样？像这样的东西：[https ://github.com/CoatedMoose/CustomViews/tree/master/library/src/com/coatmoose/customviews](https://github.com/CoatedMoose/CustomViews/tree/master/library/src/com/coatedmoose/customviews)

然后，为 Bitmap 添加这个设置器：

```
public void setImage(Bitmap bitmap) {
    this.mBitmap = bitmap;
    this.invalidate();
} 
```

或者，如果您不想将应用的位图作为签名视图的一部分（将其用作背景，而不是画布），请将 onDraw 方法替换为：

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.TRANSPARENT);
    canvas.drawBitmap(mBitmap, 0, 0, mPaint);
    canvas.drawPath(mPath, mPaint);
} 
```

然后就用`mSignatureView.setBackgroundResource(R.drawable.background);`

编辑：

只需使用来自 coatingMoose 的代码创建一个类，并在您的布局 XML 中使用它：

```
<com.example.myapp.gui.views.SignatureView
  android:id="@+id/signature"
  android:layout_width="match_parent"
  android:layout_height="80dp"/> 
```

在代码中的某个地方，甚至作为 XML 属性，您都可以设置背景。

编辑：签名视图类：

```
 package me.other;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.SystemClock;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

/**
 * A simple view to capture a path traced onto the screen. Initially intended to be used to captures signatures.
 * 
 * @author Andrew Crichton
 * @version 0.1
 */
public class SignatureView extends View {
    @SuppressWarnings("unused")
    private Path mPath;
    private Paint mPaint; 
    private Paint bgPaint = new Paint(Color.TRANSPARENT);

    private Bitmap mBitmap;
    private Canvas mCanvas;

    private float curX, curY;

    private static final int TOUCH_TOLERANCE = 4;
    private static final int STROKE_WIDTH = 4;

    public SignatureView(Context context) {
        super(context);
        init();
    }
    public SignatureView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
    public SignatureView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }
    private void init() {
        setFocusable(true);
        mPath = new Path();
        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mPaint.setColor(Color.WHITE);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeWidth(STROKE_WIDTH);
    }
    public void setSigColor(int color) {
        mPaint.setColor(color);
    }
    public void setSigColor(int a, int red, int green, int blue) {
        mPaint.setARGB(a, red, green, blue);
    }
    public boolean clearSignature() {
        if (mBitmap != null)
            createFakeMotionEvents();
        if (mCanvas != null) {
            mCanvas.drawColor(Color.TRANSPARENT);
            mCanvas.drawPaint(bgPaint);
            mPath.reset();
            invalidate();
        }
        else {
            return false;
        }
        return true;
    }
    public Bitmap getImage() {
        return this.mBitmap;
    }
    public void setImage(Bitmap bitmap) {
        this.mBitmap = bitmap;
        this.invalidate();
    }
    @Override
    protected void onSizeChanged(int width, int height, int oldWidth, int oldHeight) {
        int bitmapWidth = mBitmap != null ? mBitmap.getWidth() : 0;
        int bitmapHeight = mBitmap != null ? mBitmap.getWidth() : 0;
        if (bitmapWidth >= width && bitmapHeight >= height) 
            return;
        if (bitmapWidth < width) 
            bitmapWidth = width;
        if (bitmapHeight < height) 
            bitmapHeight = height;
        Bitmap newBitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
        Canvas newCanvas = new Canvas();
        newCanvas.setBitmap(newBitmap);
        if (mBitmap != null) 
            newCanvas.drawBitmap(mBitmap, 0, 0, null);
        mBitmap = newBitmap;
        mCanvas = newCanvas;
    }
    private void createFakeMotionEvents() {
        MotionEvent downEvent = MotionEvent.obtain(SystemClock.uptimeMillis(),SystemClock.uptimeMillis()+100, MotionEvent.ACTION_DOWN, 1f, 1f ,0);
        MotionEvent upEvent = MotionEvent.obtain(SystemClock.uptimeMillis(),SystemClock.uptimeMillis()+100, MotionEvent.ACTION_UP, 1f, 1f ,0);
        onTouchEvent(downEvent);
        onTouchEvent(upEvent);
    }
    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.TRANSPARENT);
        canvas.drawBitmap(mBitmap, 0, 0, mPaint);
        canvas.drawPath(mPath, mPaint);
    }
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touchDown(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            touchMove(x, y);
            break;
        case MotionEvent.ACTION_UP:
            touchUp();
            break;
        }
        invalidate();
        return true;
    }
    /**----------------------------------------------------------
     * Private methods
     **---------------------------------------------------------*/

    private void touchDown(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        curX = x;
        curY = y;
    }

    private void touchMove(float x, float y) {
        float dx = Math.abs(x - curX);
        float dy = Math.abs(y - curY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(curX, curY, (x + curX)/2, (y + curY)/2);
            curX = x;
            curY = y;
        }
    }

    private void touchUp() {
        mPath.lineTo(curX, curY);
        if (mCanvas == null) {
            mCanvas = new Canvas();
            mCanvas.setBitmap(mBitmap);
        }
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
    }
} 
```

一些随机布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <com.example.mysignatureviewapp.views.SignatureView 
        android:id="@+id/sign"
        android:layout_width="match_parent"
        android:layout_height="204dp">
    </com.example.mysignatureviewapp.views.SignatureView>
</RelativeLayout> 
```

在`onCreate()`方法中：

```
private SignatureView sign;
//
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mysignatureviewlayout);
    sign = (SignatureView) findViewById(R.id.sign);
    sign.setBackgroundResource(R.drawable.mybackgrounddrawable);
}

//get your signature when you press, say, the back button
@Override
public void onBackPressed() {
    Bitmap mySignature = sign.getImage();
    //do something with bitmap
} 
```

获取背景和签名：

```
BitmapDrawable mySignature = new BitmapDrawable(sign.getImage());
Drawable background = sign.getBackground();
LayerDrawable ld = new LayerDrawable(new Drawable[] { mySignature, background}); 
```

# git - 谁能告诉我在哪里可以为所有人发布或托管我的 chrome 扩展代码？

> ID：13339506
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:01:10.260
> 
> 标签：git, google-chrome-extension, hosting

是否有可用于上传谷歌浏览器扩展的选项。我不想使用谷歌应用商店，因为现在我不想支付 5 美元。我希望所有人都可以免费下载此扩展程序。那么在其他地方上传chrome扩展的步骤和要求是什么。我知道 git 但不确定是否可以在那里上传 chrome 扩展？如果是的话，我想知道怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:03:56.690

为您的扩展程序创建一个自托管网页或为您的扩展程序创建一个谷歌代码页面。如果您希望获得大量用户，我建议您选择 5 美元的选项，因为您会看到更多用户。

# c - malloc 可以分配的最大大小？

> ID：13339509
> 
> 赞同：7
> 
> 时间：2012-11-12T07:01:39.533
> 
> 标签：c, linux-kernel

我的操作系统是arch linux 64位。

free -m 结果如下

```
             缓存的已用空闲共享缓冲区总数
电话：32172 31909 262 0 119 13054
-/+ 缓冲区/缓存：18735 13436
交换：258 258 0

```

```
ulimit -a
核心文件大小（块，-c）无限制
数据段大小 (kbytes, -d) 无限制
调度优先级 (-e) 20
文件大小（块，-f）无限制
待处理信号 (-i) 257329
最大锁定内存 (kbytes, -l) 64
最大内存大小 (kbytes, -m) 无限制
打开文件 (-n) 1024
管道大小（512 字节，-p）8
POSIX 消息队列（字节，-q）819200
实时优先级 (-r) 0
堆栈大小（千字节，-s）8192
cpu时间（秒，-t）无限制
最大用户进程 (-u) 257329
虚拟内存 (kbytes, -v) 无限制
文件锁 (-x) 无限制

```

内核选项 overcommit_memroy 为 0

但是当我尝试使用 malloc 分配 2G 字节时，我失败了，原因是：无法分配内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:57:43.453

实际上，它可以是任何东西。它以前可能工作过，因为空闲内存都是连续的，而现在空闲内存不是，或者可能是您的内存请求未能使用正在使用的启发式方法。

在此处查看此链接 - [http://linuxtoolkit.blogspot.com/2011/08/tweaking-linux-kernel-overcommit.html](http://linuxtoolkit.blogspot.com/2011/08/tweaking-linux-kernel-overcommit.html) - 了解有关过度使用的更多信息。

基本上：

*   0 = 系统试探性地确定是否允许过量使用
*   1 = 总是过度使用（即使超出地址范围，如果你问我，这很愚蠢）
*   2 = 永远不要过度使用过去的某些约束

# r - 为什么有些数据集需要我们先做 `data(somedataset)` 才能使用它们？

> ID：13339510
> 
> 赞同：3
> 
> 时间：2012-11-12T07:01:45.183
> 
> 标签：r, dataset, lazy-loading, packages

为什么我们必须使用它`data(spam)`才能运行`lda`它？`spam`是`ElemsStatLearn`包中的一个数据集。

```
library(ElemStatLearn)
library(MASS) # for lda
spam[5] # is ok
spam.lda = lda(spam ~ . , data = spam) # not ok
data(spam)
spam.lda = lda(spam ~ . , data = spam) # ok 
```

我们`spam[5]`甚至可以在运行之前访问`data(spam)`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T08:11:41.297

这两个电话`lda`对我来说都很好。`ElemStatLearn`使用[延迟加载](http://cran.r-project.org/doc/manuals/R-ints.html#Lazy-loading)数据，因此您无需调用`data`

```
> packageDescription("ElemStatLearn")[["LazyData"]]
# [1] "yes" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T07:32:01.400

R 包含一系列数据集，主要用于示例。其中一些数据集是直接可用的（例如`iris`或`cars`），在某些包中它们不是自动可用的，需要调用以`data`将它们附加到当前工作空间，例如`meuse`从`gstat`包中。所以你的体验`ElemStatLearn`是有效的，`spam`是自动可用的。

# restkit - 如何使用 Restkit 映射

> ID：13339512
> 
> 赞同：2
> 
> 时间：2012-11-12T07:01:52.187
> 
> 标签：restkit

我正在使用开发分支来避免从旧的开始，因为新的正在推出。不幸的是，我无法弄清楚如何做基础知识（我是 RestKit 的新手）。

我正在尝试完成的基本步骤是从使用 2 个参数调用“/auth/login/”开始并检索 json 文档。任何帮助将不胜感激！

更新1：我问错问题了吗？我错过了什么？人们只是不将 Restkit 用于项目吗？

更新 2：收到此错误时我应该寻找什么？我有一个类映射和一个路径模式，但我真的不明白我应该做什么。

```
Code=1001 "Unable to find any mappings for the given content" 
```

[我刚刚在https://github.com/RestKit/RestKit/blob/development/README.md](https://github.com/RestKit/RestKit/blob/development/README.md)找到了这个更新的自述文件

更新 3：我尝试了多种方法来进行简单的呼叫/响应/成功呼叫，但没有。我可以在输出中看到调用成功，但 RestKit 总是抱怨它无法映射内容。我真的不明白。生成的json大多如下：

```
{
      "email" : "me@here.com",
      "fullname" : "Full Name"
} 
```

无论我尝试什么，我都无法让 RestKit 弄清楚这一点。帮助？任何人？

更新 4：我将有效负载更改为以下内容，另外我更改了描述符语句，但结果没有变化。调用成功，RestKit 因错误 1001 而失败。它仍然显示我的 keyPath=null。我错过了什么？

```
{
    "whoami" : {
      "email" : "me@here.com",
      "fullname" : "Full Name"
    }
} 

[manager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:mymap
                                               pathPattern:@"/auth/login/"
                                                   keyPath:@"whoami"
                                               statusCodes:statusCodes]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:04:39.703

也许这可以帮助..请求可能如下所示：

```
NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
[params setObject:email forKey:@"email"];
[params setObject:fullname forKey:@"fullname"];

NSMutableURLRequest *rq = [manager requestWithObject:[User new] method:RKRequestMethodPOST path:@"http://url" parameters:params];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:[User mapping] pathPattern:nil keyPath:nil statusCodes:nil];

RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:rq responseDescriptors:@[responseDescriptor]];

[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *result) {

     //success

} failure:^(RKObjectRequestOperation *operation, NSError *error) {

     //error

}];
[operation start]; 
```

和映射：

```
+ (RKObjectMapping *)mapping
{
    RKObjectMapping *requestMapping = [RKObjectMapping mappingForClass:[self class]];
    [requestMapping addAttributeMappingsFromDictionary:@{
     @"ContactDetail":     @"contactDetail",
     @"IdUser":            @"idUser",
     @"Name":              @"name",
     @"Address":           @"address",
     @"UserSettings":      @"userSettings"
     }];

    // if the obj have relationship
    RKRelationshipMapping *rl = [RKRelationshipMapping relationshipMappingFromKeyPath:@"someKey" toKeyPath:@"toKey" withMapping:[Obj mapping]];
    [requestMapping addPropertyMappingsFromArray:@[rl]];

    return requestMapping;
} 
```

# qt - 使用 Jenkins xUnit 插件显示 QTestlib 的结果

> ID：13339513
> 
> 赞同：10
> 
> 时间：2012-11-12T07:01:59.227
> 
> 标签：qt, jenkins, jenkins-plugins, qtestlib

我正在尝试将 Jenkins xUnit 插件用于我的 Qt 单元测试项目，但我无法使其工作......

这是我到目前为止所做的：

首先，我使用 qmakebuilder 插件构建我的单元测试项目（向 qmakebuilder 插件提供 .pro），然后我添加一个`Execute Shell`构建部分，首先`rm -f`是 testResult xml 文件，然后运行测试带有标志的二进制`-xunitxml`文件让它为我生成 xml 文件我命名 xml 文件`testResult.xml`，换句话说：

```
rm -f /home/guest/QT/unitTest/testResult.xml
cd /home/guest/QT/unitTest
./tst_unittesttest -xunitxml > testResult.xml 
```

最后在 Post Build Action 中，我选择`Publish xUnit test result`并将模式指定为`*.xml`.

但是，构建作业会失败，这是我在使用 Jenkins 构建作业时得到的输出：

```
[xUnit] [INFO] - Starting to record.
[xUnit] [INFO] - Processing QTestlib-Version N/A
[xUnit] [INFO] - [QTestlib-Version N/A] - 1 test report file(s) were found with
the pattern '*.xml' relative to '/home/guest/QT/unitTest' for the testing framework
'QTestlib-Version N/A'.
[xUnit] [ERROR] - The converted file for the result file '/home/guest/QT/unitTest
/testResult.xml' (during conversion process for the metric 'QTestlib') is not
valid.
The report file has been skipped.
[xUnit] [ERROR] - The plugin hasn't been performed correctly: hudson.util.IOException2:
Failed to read /home/guest/QT/unitTest/generatedJUnitFiles/QTestlib/TEST--735044756.xml
Build step 'Publish xUnit test result report' changed build result to FAILURE
Build step 'Publish xUnit test result report' marked build as failure
Finished: FAILURE 
```

如您所见，将我的测试结果 xml 文件转换为 xUnit 插件可以读取的文件时出现问题。我的 testResult.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<testsuite errors="2" failures="0" tests="4" name="UnitTestTest">
  <properties>
    <property value="4.7.4" name="QTestVersion"/>
    <property value="4.7.4" name="QtVersion"/>
  </properties>
  <testcase result="pass" name="initTestCase">
    <!-- message="called before everything else" type="qdebug" -->
  </testcase>
  <testcase result="pass" name="myFirstTest"/>
  <testcase result="pass" name="mySecondTest"/>
  <testcase result="pass" name="cleanupTestCase">
    <!-- message="called after myFirstTest and mySecondTest" type="qdebug" -->
  </testcase>
  <system-err>
<![CDATA[called before everything else]]>
<![CDATA[called after myFirstTest and mySecondTest]]>
  </system-err>
</testsuite> 
```

但是`TEST--735044756.xml`是一个单行 xml 文件：`<?xml version="1.0" encoding="UTF-8"?>`

任何人都知道我在哪里做错了什么？生成输出xml文件应该有问题。

另一方面，我在系统日志Jenkins菜单中添加了日志thingi，但这似乎不是这个问题的原因......至少IMO

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T08:34:21.877

使用标志执行测试二进制文件`-xml`就可以了。奇怪地使用`-xunitxml`会创建损坏的 xml 文件，它`<testcase>`没有`time`属性。仅运行测试二进制文件并`-xml`成功构建作业。

# php - 在 div 中显示 php 结果

> ID：13339522
> 
> 赞同：0
> 
> 时间：2012-11-12T07:02:45.980
> 
> 标签：php, jquery, html, ajax

让我详细解释一下我想要实现的目标。我有 3 页：index.html、form.html 和 result.php。当我单击 index.html 中的按钮时使用 jquery，它将在 index.html 的 div 中加载 form.html。form.html 在提交调用 result.php。我想要实现的是，当我单击 form.html 中的提交按钮（在 index.html 中加载）时，result.php 的结果将显示在我加载 form.html 的 index.html 的 div 中。以下是所有 3 个页面的代码。任何帮助都会很棒。

index.html 内容：

```
<html>
   <head>
       <title>index.html</title>
       <script type="text/javascript" src="/scripts/jquery-1.8.2.min.js"></script>
   </head>
   <body>
   <script type="text/javascript">
   $(document).ready(function () {
   var theme = getTheme();
   $("#loadformbutton").jqxButton({ width: '120', height: '30', theme: theme });
   $("#loadformbutton").bind('click',function()
   {
        $('#div_for_form').load('form.html', function() {});
   });
   });
   </script>
   <div id="buttons">
      <input type="button" value="loadform" id='loadformbutton' />
   </div>
   <div id="div_for_form">
      Here loads form.html
   </div>
   </body>
</html> 
```

form.html的内容：

```
<html>
   <head>
      <title>form.html</title>
   </head>
   <body>
      <form method="POST" action="result.php">
         <input type="password" name="pass" id="pass"/>
         <input type="submit" value="Ok" id="changepass"/>
      </form>
   </body>
</html> 
```

result.php 的内容：

```
<?php
   $received=$_POST['pass'];
   echo 'Received: '.$received;
?> 
```

此时它可以正常工作，但 result.php 的结果会显示在新页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:31:06.413

```
$('#changepass').click(function(){
var id = $('input#pass').val();
$.post( 'http://domain.com/result.php' { id : id },
        function(response){
            $('div#div_for_form').html(response);
        });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:07:10.603

不要以正常方式提交表单，而是考虑使用 Ajax 调用 result.php（例如 jQuery.post()）。然后您可以使用成功回调来注入返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:11:24.070

你可以通过 jquery 来做到这一点，下面的 ajax 是简单的方法

result.php 的内容：

```
<?php
   $received=$_POST['pass'];
   echo 'Received: '.$received;
?> 
```

发出一个 ajax 请求，像 id="from_one" 这样的表单 id

```
$("#from_one").submit(function(){
$.ajax({
  url: 'result.php',
  type: "POST",
  data:{pass:$('input[type=pass]')}
  success: function(data) {
     //here append the result to the div you want 
     // in data you will get the result 
  }
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:16:45.810

如果您打算做一个更大的项目（不仅仅是这两个站点），我建议您创建一个**网站模板**（为您的 index.html）

[你可以在这里](http://www.1stwebdesigner.com/css/how-to-create-php-website-template/)找到一个好方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T07:05:21.030

将您的 results.php 包含在 div 中以将其放在正确的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T07:12:24.073

试试下面的一个：

在 form.html 更改表单标签：

```
<form method="POST" action="" onsubmit="return callphp()"> 
```

在 index.html 添加函数 callphp() ：

```
function callphp()
{
  var xmlhttp;
     if (window.XMLHttpRequest)
        {
       xmlhttp=new XMLHttpRequest();
        }
     else
        {
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
     xmlhttp.onreadystatechange=function()
        {
       if (xmlhttp.readyState==4 && xmlhttp.status==200)
          {
         document.getElementById("div_for_form").innerHTML=xmlhttp.responseText;

      }
      }  
       xmlhttp.open("POST","result.php",true);
       xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
       xmlhttp.send();
} 
```

# java - 如何将 Ajax 和 Struts2 结合在一起？

> ID：13339528
> 
> 赞同：1
> 
> 时间：2012-11-12T07:03:52.337
> 
> 标签：java, ajax, spring, struts2

我是新手，这是我的第一篇文章，我正在做一个结合 ajax 和 struts 的简单项目。我的代码如下，我的问题是：从jsp页面上的Action获得正确的值（部门）后，正确的结果将因为“返回查询”而被刷新；但是，在 QueryAction.java 中，如果我必须使用“返回查询；” 获取 query.jsp 的价值......我该如何解决？

查询.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>

    <head>
    <s:head />
      <title>Query Page</title>
      <h1 align="center" id="h1"></h1>
    </head>
<body>
    <p id="demo"></p>

       <s:include value="/msg.jsp" />
       <s:form action="query" id="form">  
            <s:textfield name="name" id="name" label="Search the Department" />          
                    <s:submit value="Search" onclick="return myFunction()" id="submitRowAdd" />                    
       </s:form>

       <table border="1" id="depTable">
        <tr> 
            <td>Department ID</td>
            <td>Department Name</td>
            <td>Manager ID</td>
            <td>Repeal</td>
        </tr>           
       </table>
       <br>
       <script type="text/javascript">
    var btnAdd = document.getElementById("form");
    btnAdd.onsubmit = function(){
        var txtTd = document.createTextNode("<s:property value="did"/>");
        var eleTd = document.createElement("td");
        eleTd.appendChild(txtTd);  

        var txtTd1 = document.createTextNode("<s:property value="dname"/>");
        var eleTd1 = document.createElement("td");
        eleTd1.appendChild(txtTd1);  

        var txtTd2 = document.createTextNode("<s:property value="mid"/>");
        var eleTd2 = document.createElement("td");
        eleTd2.appendChild(txtTd2);  

        var txtTd3 = document.createTextNode("<s:property value="rep"/>");
        var eleTd3 = document.createElement("td");
        eleTd3.appendChild(txtTd3);  

        var eleTr = document.createElement("tr");
        eleTr.appendChild(eleTd); 
        eleTr.appendChild(eleTd1); 
        eleTr.appendChild(eleTd2); 
        eleTr.appendChild(eleTd3);

        var theTable = document.getElementById("depTable");
        theTable.appendChild(eleTr);                        
    }
</script> 
```

查询操作.java

```
package actions;
import com.Department;
import com.opensymphony.xwork2.ActionSupport;
import service.DepartmentService;

import net.sf.json.JSONObject;

public class QueryAction extends ActionSupport {

private String name;
DepartmentService ds;
long did;
String dname;
String mid;
char rep;
    private String result; 

public String execute() {   

    if(name != null && !"".equals(name)) {
        Long lname = Long.valueOf(name.trim());
        Department ppp = ds.findById(lname);
        if(ppp==null) {
            return "sss";
        }
        //did = ppp.getDepartmentId();
        //dname = ppp.getDepartmentName();
        //mid = ppp.getManagerId();
        //rep = ppp.getRepeal();

        JSONObject json=JSONObject.fromObject(ppp); //I run debug it fail on here !
                  result=json.toString();
                  System.out.println(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>" +  result);
    } //return "result";
    return SUCCESS;                          
     }

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public DepartmentService getDs() {
    return ds;
}
public void setDs(DepartmentService ds) {
    this.ds = ds;
}
public long getDid() {
    return did;
}
public void setDid(long did) {
    this.did = did;
}
public String getDname() {
    return dname;
}
public void setDname(String dname) {
    this.dname = dname;
}
public String getMid() {
    return mid;
}
public void setMid(String mid) {
    this.mid = mid;
}
public char getRep() {
    return rep;
}
public void setRep(char rep) {
    this.rep = rep;
}
    public String getResult() {
    return result;
}

public void setResult(String result) {
    this.result = result;
}

} 
```

# java - 为什么jasper报告不能导出到jar文件中？

> ID：13339530
> 
> 赞同：0
> 
> 时间：2012-11-12T07:03:56.673
> 
> 标签：java, jar, jasper-reports, noclassdeffounderror

在我的应用程序中，我使用 jasper 报告来创建报告，但是当我将应用程序构建到 jar 文件中时，jar 文件无法读取 jasper 文件，我已经包含了 jasper 库和他们需要的所有库，我已经放置了库文件夹中的jrxml文件，但它仍然无法工作，，，

当我在命令提示符下运行它时出现错误：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: net/sf/ja
     sperreports/engine/JasperManager

    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Sour
    ce)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
    ce)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
    ce)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
    ce)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
    Caused by: java.lang.ClassNotFoundException: net.sf.jasperreports.engine.JasperM
    anager
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:12:35.010

`java.lang.NoClassDefFoundError:` 类不在 CLASSPATH 中。
该 menas`et/sf/jasperreports/engine/JasperManager`类不在您的类路径中。
检查您的类路径是否存在所需的 jars..？

# shell - Linux Mint 上的 Hadoop HBase 脚本给出了奇怪的错误

> ID：13339537
> 
> 赞同：0
> 
> 时间：2012-11-12T07:04:36.837
> 
> 标签：shell, ubuntu, hadoop, hbase, linux-mint

我已经在我的 Mint（类 Ubuntu）虚拟机上安装了 Hadoop 和 Pig。运行脚本时，我不断收到奇怪的错误消息。事实上，当我运行 hadoop 命令时，我也会遇到错误，但至少它可以工作，但是使用 HBase 它只是失败了。

例如，运行`sh hadoop -rmr /home/myoutput`我得到：

```
hadoop：102：[：fs：意外运算符
删除 hdfs://localhost/home/myoutput

```

当我运行`start-hbase`它开始正常。

当我跑步时，`sh hbase shell`我得到：

```
hbase：163：hbase：[[：未找到

hbase：163：hbase：[[：未找到

hbase：197：hbase：语法错误：“（”意外

hbase 脚本中的这些行是：

163：如果 [[ $f = *sources.jar ]]

197：函数追加路径（）{

```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:12:14.400

Mint 不仅类似于 ubuntu，它实际上是基于 ubuntu 构建的，因此您应该能够很容易地找到答案。另外，我给你的建议是用 ubuntu 标记这个问题，而不是 mint。

# php - 天回VIP会员

> ID：13339538
> 
> 赞同：1
> 
> 时间：2012-11-12T07:04:41.077
> 
> 标签：php, cron

我的表“用户”有一个列“vip”和“vipudlob”。

vipudlob =“vip 会员资格”过期的时间戳。

当剩下 7 天时，我会做一些向用户发送“提醒”的 cronjob。并在“vipudlob”过期时更新用户为 vip=0, vipudlob=0

有哪位好心人能帮帮我吗？

我试过这样的东西，但不能正常工作

```
if ( time() >= $row['udlob']):
    echo "Your membership expired"
else: //still working
   if ( date("d", $row['udlob']) <= 7):
         echo "7 days back!"
   endif
endif; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:20:33.740

首先使用时间函数获取 Currant 时间戳，然后检查它是否已过期

例如

$currunt_timestamp = 时间（）；$membership_expire = "";

```
if (($currunt_timestamp - $membership_expire) < 600) // (600 = 60*10 seconds = 10 minutes) 
{
       echo "No Expired";
} else {

echo "expired";

} 
```

# c# - 跳过 Aero 窗口动画

> ID：13339540
> 
> 赞同：3
> 
> 时间：2012-11-12T07:04:50.883
> 
> 标签：c#, windows, winforms, animation

如何以编程方式禁用 Aero 下窗口的“打开”动画？

当打开一个新表单时，它会“弹出”（淡入 + 轻微的缩放转换）。我想停止这个动画并立即显示窗口。

我已经尝试将 Form 的 Location 属性设置为屏幕外的某个位置，然后调用 Show()，然后将其移动到正确的位置。但这无济于事，动画将继续。

也许我可以设置一些隐藏的属性？

我不想全局禁用打开/关闭/最小化/最大化动画！我只想跳过窗口的“窗口打开”动画。

我已经在 Form.Show() 之后直接玩过单个和多个调用 ShowWindow(...)。但无论我传递什么参数，都不会中止开场动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:28:20.760

我懂了！在尝试了 ShowWindow, BorderStyles 之后，我找到了我的确切解决方案：

1.  将表单的初始“FormBorderStyle”属性更改为以下属性之一：
    *   没有任何
    *   固定工具窗口
    *   大小工具窗口
2.  将事件处理程序添加到表单“显示”事件。
3.  在事件处理程序中，将 FormBorderStyle 更改为“Sizeable”（或任何其他）。

现在的诀窍是“none”和“*toolwindow”边框样式将抑制该表单的打开/弹出动画。然后，一旦显示表单，边框样式就会更改，赋予其原始功能（控制栏中的图标，最小化/最大化按钮等......）

**编辑**：对于每个可能也想尝试这个的人，我必须指出这个~~能够~~使用 PInvoke 命令完成后，将与窗口的实际大小有关。如果您依赖正确的窗口大小，请务必在完成此操作后将窗口大小调整为预期大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:17:25.540

这是 Windows 视觉效果的一部分，可以使用[SystemParametersInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)方法进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:31:52.787

我发现动画仅在第一次显示表单时发生。

所以这里是诀窍：

```
var form = new Form();
form.Show();
form.Hide();
form.Show(); 
```

我只在 Windows 8 中测试过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T19:41:31.093

您可以像这样在前后更改样式，这将防止淡出动画。

```
 this.FormBorderStyle = FormBorderStyle.Sizable;
        this.Show();

        // Do whatever

        this.FormBorderStyle = FormBorderStyle.Sizable;
        this.Show(); 
```

# javascript - Application.PageControlNavigator 不适用于extendedSplash Screen Demo

> ID：13339541
> 
> 赞同：0
> 
> 时间：2012-11-12T07:04:52.870
> 
> 标签：javascript, windows-8, navigation, splash-screen, pagecontrol

演示：ttp://code.msdn.microsoft.com/windowsapps/Splash-screen-sample-89c1dc78/view/SourceCode

如何将 data-win-control="WinJS.UI.HtmlControl" 更改为 data-win-control="Application.PageControlNavigator"？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:04:38.810

所以，我知道这有点晚了，但是当我遇到同样的问题时，这是我在我的应用程序中所做的。

**先说一点背景：**

导航模板的工作方式依赖于在 default.html 页面中定义的 PageControlNavigator 控件。

由于一旦应用程序加载并删除了初始屏幕，控件就会定义“主页”页面，因此它会在 default.js 文件中的以下代码之后导航到主页或最后一个 url：

```
args.setPromise(WinJS.UI.processAll().then(function () {
    if (nav.location) {
        nav.history.current.initialPlaceholder = true;
        return nav.navigate(nav.location, nav.state);
    } else {                    
        return nav.navigate(Application.navigator.home);
    }
})); 
```

Windows 商店应用程序的合同要求应用程序在 5 秒内加载（或在 5 秒内显示内容），因此启动屏幕不会等到您异步加载您拥有的所有数据或您在显示之前等待加载的任何数据主页，您必须扩展启动画面，让应用程序有时间加载它需要的所有内容。

所以，我这样做的方式，我不知道这是否是正确的方式，但它对我有用，是创建一个函数来检查数据是否已加载，如果没有则等待，一旦加载，我将删除启动屏幕并导航到主屏幕。

```
function countDown() {
    if (Data.isReady > 0) {
        ExtendedSplash.remove();

        return nav.navigate("/pages/home/home.html");
    }
    else {
        setTimeout(countDown, 5000);
    }
} 
```

在您从模板中获得的承诺中，我将其更改为：

```
// Use setPromise to indicate to the system that the splash screen must not be torn down
// until after processAll and navigate complete asynchronously.
args.setPromise(WinJS.UI.processAll().then(function () {
    if (nav.location) {
        nav.history.current.initialPlaceholder = true;
            return nav.navigate(nav.location, nav.state);
    }
})); 
```

这样，当应用程序加载时，它没有位置可去，countDown 函数负责在加载数据后重定向到主页。

同样，如果它是“正确”的解决方案，我现在不知道，但你不会失去单页导航控制，一切都像魅力一样工作。

希望能帮助到你。

# android - 无法在 Android 中获取蓝牙适配器

> ID：13339542
> 
> 赞同：1
> 
> 时间：2012-11-12T07:04:58.310
> 
> 标签：android, bluetooth, forceclose

我试图实现 android 示例中给出的蓝牙聊天示例。我在运行 Android 4.1 版本的果冻豆设备上运行它。

应用程序只是强制关闭。启动器活动的一部分启动器活动代码是这样的。

**当我评论“mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();”这一行时 该应用程序不会强制关闭。并且所有的吐司消息也会显示出来，这些消息不是未注释的行**

```
 private BluetoothAdapter mBluetoothAdapter = null;
// Member object for the chat services
private BluetoothChatService mChatService = null;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

     Toast.makeText(getApplicationContext(),"BluetothChat oncreate()", Toast.LENGTH_LONG).show();
    if(D) Log.e(TAG, "+++ ON CREATE +++");

    // Set up the window layout
    setContentView(R.layout.main);

    // Get local Bluetooth adapter
  try {     

    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

   //}
    // If the adapter is null, then Bluetooth is not supported
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
        finish();
        return;
    }     
 } catch (Exception e) {
       Toast.makeText(this,e.toString(), Toast.LENGTH_LONG).show(); 

 }
}

@Override
public void onStart() {

    Toast.makeText(getApplicationContext(),"BluetothChat onstart()", Toast.LENGTH_LONG).show();
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");

    // If BT is not on, request that it be enabled.
    // setupChat() will then be called during onActivityResult
    try {
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
            // Otherwise, setup the chat session
        } else {
            if (mChatService == null) {
                setupChat();
            }
        }
    } catch (Exception e) {
     Toast.makeText(this,e.toString(), Toast.LENGTH_LONG).show(); 
    }

} 
```

# javascript - 访问同一域上的 iframe 内容

> ID：13339543
> 
> 赞同：2
> 
> 时间：2012-11-12T07:05:00.457
> 
> 标签：javascript, iframe, cross-domain

我正在尝试创建一个简单的测试来从其父容器修改 iframe 的内容，并从 iframe 修改父容器的内容。这是我到目前为止所拥有的：

第一个.html：

```
<!doctype html>
<html>
  <head>
    <title>First</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="shared.js"></script>
    <script type="text/javascript" src="first.js"></script>
  </head>
  <body>
    <h1>First</h1>
    <iframe src="http://localhost:3000/second.html"></iframe>
  </body>
</html> 
```

第二个.html：

```
<!doctype html>
<html>
  <head>
    <title>Second</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="shared.js"></script>
    <script type="text/javascript" src="second.js"></script>
  </head>
  <body>
    <h1>Second</h1>
  </body>
</html> 
```

shared.js：

```
function modifyContent(targetContainerElement, targetSelector, sourceString) {
  $(targetContainerElement).find(targetSelector).html("Modified by " + sourceString + "!");
} 
```

第一个.js：

```
$(document).ready(function() {

  var iframe = $("iframe");
  modifyContent(iframe.contents(), "h1", "First");
}); 
```

第二个.js：

```
$(document).ready(function() {

  if (!top.document)
    return;

  modifyContent(top.document.body, "h1", "Second");
}); 
```

为了运行代码，我使用`python -m SimpleHTTPServer 3000`并导航到`localhost:3000/first.html`. 第一个标题被修改并显示“第二个修改！” 但第二个标题只是说“第二”。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:06:50.730

尝试在 iframe 完全加载后更改 h1 标记：

```
$(document).ready(function() {

  var iframe = $("iframe");
  iframe.load(function ()
  {
    modifyContent(iframe.contents(), "h1", "First");
  });
}); 
```

另外我认为你应该重写`modifyContent`：

```
function modifyContent(isJquery, targetContainerElement, targetSelector, sourceString) 
{
  if ( isJquery )
    targetContainerElement.find(targetSelector).html("Modified by " + sourceString + "!");
  else
    $(targetContainerElement).find(targetSelector).html("Modified by " + sourceString + "!");
} 
```

只是`targetContainerElement`会起作用，因为您实际上不需要将其包装在 $() 中，因为它已经是一个 jquery 对象

# algorithm - Ocaml 作业需要一些建议

> ID：13339544
> 
> 赞同：0
> 
> 时间：2012-11-12T07:05:03.963
> 
> 标签：algorithm, ocaml, set

> 我们有 N 组整数 A1, A2, A3 ... An。找到一种算法，该算法返回一个列表，该列表包含每个集合中的一个元素，其属性是列表中最大元素和最小元素之间的差异最小

**例子：**

```
IN: A1 = [0,4,9], A2 = [2,6,11], A3 = [3,8,13], A4 = [7,12]
OUT: [9,6,8,7] 
```

我对这个练习有一个想法，首先我们需要对一个列表中的所有元素进行排序（每个元素都需要分配给它的集合），所以有了这个输入，我们得到了：

```
[[0,1],[2,2],[3,3],[4,1],[6,2],[7,4],[8,3],[9,1],[11,2],[12,4],[13,3]] 
```

稍后我们创建所有可能的列表并找到具有最小和最大元素之间差异的这个列表，并像这样返回正确：`[9,6,8,7]`

我是 ocaml 的新手，所以我对编码这些东西有一些疑问：

1.  我可以创建一个带有 N（无限数量）参数的函数吗？
2.  我应该创建一个新类型，比如对列表来实现假设吗？

对不起我的英语不好，希望你能理解我想表达的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:51:57.113

这个答案是关于算法部分，而不是 OCaml 代码。

您可能希望首先实施您提出的解决方案，拥有一个可行的解决方案，并将其结果与改进的解决方案进行比较，我现在写一下。

这是关于如何改进算法部分的提示。考虑对所有集合进行排序，而不仅仅是第一个。现在，来自所有集合的所有最小元素的列表是输出的候选者。要考虑其他候选输出，您如何从那里移动？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:14:08.810

您的方法听起来不是很有效，有`n`许多集合，每个集合都有元素，`x_i`您的排序列表将包含`(n * x_i)`元素，您可以从中生成的子列表的数量为：（`(n * x_i)!`阶乘）

我想提出一种不同的方法，但你必须弄清楚细节：

1.  使用设置的标识符标记（索引）每个元素（就像您所做的那样）。

2.  分别对每组进行排序。

3.  构建与您想要的结果完全相反的结果！

4.  优化！

我希望你能自己弄清楚第 3、4 步... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:16:09.057

我只是要回答你的问题，而不是评论你提出的解决方案。（但我认为你必须在完成之前再做一些工作。）

1.  您可以编写一个接受列表列表的函数。这与允许任意数量的参数几乎相同。但实际上它只有一个参数（就像 OCaml 中的所有函数一样）。

2.  您可以只使用列表和元组等内置类型，而无需显式创建或声明它们。

这是一个示例函数，它采用列表列表并将它们组合成一个大长列表：

```
let rec concat lists =
  match lists with
  | [] -> []
  | head :: tail -> head @ concat tail 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:20:11.237

这是您在问题中描述的帮助您入门的例程。请注意，我没有注意效率。为了清楚起见，还添加了反向应用（管道）运算符。

```
let test_set = [[0;4;9];[2;6;11];[3;8;13]; [7;12]] 

let (|>) g f = f g

let linearize sets = 
  let open List in sets 
    |> mapi (fun i e -> e |> map (fun x -> (x, i+1) )) 
    |> flatten |> sort (fun (e1,_) (e2, _) -> compare e1 e2)

let sorted = linearize test_set 
```

# android - 哪些信息可自动用于所有 iOS 5+ 和 Android 应用程序？

> ID：13339548
> 
> 赞同：1
> 
> 时间：2012-11-12T07:06:01.713
> 
> 标签：android, ios, twitter, twitter-oauth

我正在尝试为我正在设计的 Twitter 应用程序制作详细的蓝图：我的第一个本地应用程序和我第一次使用 Twitter 的 API。我很好奇**当用户已通过设备本身进行身份验证但尚未授予我的应用程序读写访问权限时，所有应用程序都可以使用哪些信息**。iOS 和 Android 在要求他们进行身份验证之前是否会放弃用户的 ID？与 iOS 4 支持有什么关系 - 是否必须有一个具有用户名：密码形式的后备？而且由于我从未使用过超过 5 分钟的 Android 设备：那里的 Twitter 支持是否类似？

此外，有没有人看到对登录过程的重新想象？现在我们在设备中内置了 Twitter 支持，难道不应该有一些简洁的登录布局吗？丑陋的文本字段消失了，让用户的注意力和精力转移到整个屏幕；这应该为时尚的动画让路……不是吗？

一如既往，TIA！

# mysql - select语句中的MYSQL Case用于检查null

> ID：13339551
> 
> 赞同：35
> 
> 时间：2012-11-12T07:06:16.590
> 
> 标签：mysql, sql

如果我通过，在 MySQL 查询中：

```
 case guides.Gud_Publish_Date 
     when null then "Unscheduled" 
     else "Forth Coming Titles" 
  end 
```

那么它正在考虑一切都是空的，即使 Gud_Publish_Date 也有价值。完整的 SQL 语句是

```
SELECT guides.Gud_Id
    , guides.Gud_Image
    , guides.Gud_SubEditor
    , guides.Gud_Reprint_Status
    , guides.Gud_Publish_Date
    , guides.Gud_Img_Chk
    , guides.Gud_Published
    , guides.Gud_View
    , (
        CASE guides.Gud_Publish_Date
            WHEN NULL
                THEN "Unscheduled"
            ELSE "Forth Coming Titles"
            END
        ) AS Schedules
FROM guides 
```

有谁能够帮我？提前致谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-12T07:08:53.277

尝试使用`IF`

```
SELECT guides.Gud_Id
    , guides.Gud_Image
    , guides.Gud_SubEditor
    , guides.Gud_Reprint_Status
    , guides.Gud_Publish_Date
    , guides.Gud_Img_Chk
    , guides.Gud_Published
    , guides.Gud_View
    , IF(guides.Gud_Publish_Date IS NULL,'Unscheduled','Forth Coming Titles') 
             AS Schedules
FROM guides 
```

或者如果你真的想要`CASE`

```
SELECT guides.Gud_Id
    , guides.Gud_Image
    , guides.Gud_SubEditor
    , guides.Gud_Reprint_Status
    , guides.Gud_Publish_Date
    , guides.Gud_Img_Chk
    , guides.Gud_Published
    , guides.Gud_View
    , (
        CASE 
            WHEN guides.Gud_Publish_Date IS NULL
            THEN 'Unscheduled'
            ELSE 'Forth Coming Titles'
        END
      ) AS Schedules
FROM guides 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-08T17:05:23.167

我发现了这个 - 几个月前的帖子。使用`COALESCE`Rajan 预期的选项，您可以这样做，

```
SELECT guides.Gud_Id
    , guides.Gud_Image
    , guides.Gud_SubEditor
    , guides.Gud_Reprint_Status
    , guides.Gud_Publish_Date
    , guides.Gud_Img_Chk
    , guides.Gud_Published
    , guides.Gud_View
    , CASE COALESCE(guides.Gud_Publish_Date, 0)
          WHEN 0 THEN 'Unscheduled'
                 ELSE 'Forth Coming Titles'
          END  AS Schedules
FROM guides 
```

上面的代码假设`guides.Gud_Publish_Date`不能取值 0，我可以这样做，因为它是一个日期。如果不是这种情况，您可以将 0 更改为另一个无法采用的值；也许你最喜欢`3.1415`的 float like 或 null identifier `'null'`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T07:10:26.663

```
SELECT guides.Gud_Id
    , guides.Gud_Image
    , guides.Gud_SubEditor
    , guides.Gud_Reprint_Status
    , guides.Gud_Publish_Date
    , guides.Gud_Img_Chk
    , guides.Gud_Published
    , guides.Gud_View
    , (
        CASE WHEN guides.Gud_Publish_Date IS NULL
            THEN "Unscheduled"
            ELSE "Forth Coming Titles"
            END
        ) AS Schedules
FROM guides 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-12T04:36:14.767

尝试这个

```
SELECT guides.Gud_Id
    , guides.Gud_Image
    , guides.Gud_SubEditor
    , guides.Gud_Reprint_Status
    , guides.Gud_Publish_Date
    , guides.Gud_Img_Chk
    , guides.Gud_Published
    , guides.Gud_View
    , coalesce((
        CASE guides.Gud_Publish_Date
            WHEN NULL
                THEN 'Unscheduled'
            ELSE 'Forth Coming Titles'
            END
        ), 'Unscheduled') AS Schedules
FROM guides 
```

# ios - 如何在 ios 的条形图应用程序中集成滑块控件

> ID：13339566
> 
> 赞同：0
> 
> 时间：2012-11-12T07:07:27.163
> 
> 标签：ios, charts, slider, bar-chart

嗨朋友们，我正在使用核心绘图标题创建条形图应用程序，并且我希望条形图使用滑块控件更改它们的值。所以我创建了滑块。滑块值已更改，但我的条形图未更改。我不知道如何在条形图中整合滑块值。如果有人知道请分享我。我对此更新鲜。我的代码如下所示：我的滑块代码：

```
-(void)updateSliderValueTo:(CGFloat)_value {

[sliderValue setText:[NSString stringWithFormat:@"%f", _value]];  } 
```

我的条形图代码是：

```
 - (id)init
{

self = [super init];

if(sliderValue == 0)
{

if (self) 
{
     //NSLog(@"sliderval :%d", sliderValue);
    // Setting up sample data here.
    sampleData = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:0],
                                                  [NSNumber numberWithInt:500], 
                                                  [NSNumber numberWithInt:1500], 
                                                  [NSNumber numberWithInt:2500], 
                                                  [NSNumber numberWithInt:3500], 
                                                  [NSNumber numberWithInt:4500], 
                                                  [NSNumber numberWithInt:5500],
                                                  [NSNumber numberWithInt:6500],
                                                  nil];

    sampleProduct = [[NSArray alloc] initWithObjects:@"", @"A", @"B", @"C", @"D", @"E",@"F",@"G",nil];

    // Initialize the currency formatter to support negative with the default currency style.
    currencyFormatter = [[NSNumberFormatter alloc] init];
    [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [currencyFormatter setNegativePrefix:@"-"];
    [currencyFormatter setNegativeSuffix:@""];
}
}

else if(sliderValue != 0)
 {
   if(self)
   {
 sampleData = sliderValue; 
sampleProduct = [[NSArray alloc] initWithObjects:@"", @"A", @"B", @"C", @"D", @"E",@"F",@"G",nil];

    // Initialize the currency formatter to support negative with the default currency style.
    currencyFormatter = [[NSNumberFormatter alloc] init];
    [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [currencyFormatter setNegativePrefix:@"-"];
    [currencyFormatter setNegativeSuffix:@""];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:30:18.050

将该初始化代码移动到 buildGraph 方法中，然后您可以从 iinit 和您需要的新 IBAction 调用该方法（连接到 Slider 的那个）

所以

```
- (IBAction)onSliderChange {
     [self buildGraphData:self.slider.doubleValue]; //make the array with the new values
     [self.graph reloadData]; //you need this so CorePlot updates the specified graph view];
} 
```

# android - BaseAdapter 类中的位置重置

> ID：13339568
> 
> 赞同：2
> 
> 时间：2012-11-12T07:07:38.283
> 
> 标签：android, baseadapter

嗨，我是这个机器人的新手。我只是对基本适配器感到困惑。我的问题是考虑在一个数组中我有 10 个项目（从 0 到 9）。在`getview()`baseadapter 的选项中，我在 textview 中显示它。但是在再次正确执行 5 次后，位置将重置为 0。因此项目重复了两次。

这是我的适配器类：

```
public class ListViewwithimageAdapter extends BaseAdapter
{
    private static Context contxt;
    final String URL = "http://xxxx.in/SSDAA.xml";

    final String[] kickerimage = new String[150];

    ListViewwithimageAdapter(Context conxt)
    {
//      System.out.println("inside cons");
        this.contxt=conxt;
    }
    {

    }
    public String[] getelement()
    {
//      System.out.println("Insid getelement");
         ArrayList<String> menuItems = new ArrayList<String>();
          TaplistingParser parser = new TaplistingParser();
          String xml= parser.getXmlFromUrl(URL);
          Document doc=parser.getDomElement(xml);        
//        System.out.println("sssss="+doc);
          NodeList nl=doc.getElementsByTagName("article");
          final String[] url= new String[nl.getLength()];

//        String headings = null;
          for(int i=0; i < nl.getLength(); i++ )
          {
//            System.out.println("i="+i);
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
//          map.put("Title", parser.getValue(e, "title"));
//          map.put("Date", parser.getValue(e, "create_date"));         
            url[i]=parser.getValue(e, "url");
//          System.out.println("b4 kick");
//          System.out.println("value="+parser.getValue(e, "title"));
            kickerimage[i]=parser.getValue(e, "kickerimage");
//          System.out.println("after kick");
//          System.out.println("kick="+kickerimage[i]);
            menuItems.add(parser.getValue(e, "title"));          
          }  
//         System.out.println("b4 items array");
           String[] itemsarray = new String[menuItems.size()];
//         System.out.println("subbu");
           itemsarray=menuItems.toArray(itemsarray);
//         System.out.println("subbu1");
//         System.out.println("in last");
           return itemsarray;
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return getelement().length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return getelement()[position];
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
//      System.out.println("pos in id="+position);
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        // TODO Auto-generated method stub
        System.out.println("pos in id="+position);                     ------------------->This soutline gives output as(0,1,2,3,4,5,0).
         Bitmap bitmap = DownloadImage(
                 kickerimage[position] );
        LayoutInflater inflater = (LayoutInflater) contxt
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View listView;
        if (convertView == null) 
        {
            listView = new View(contxt);             

            listView = inflater.inflate(R.layout.homelistrow, null); 
            System.out.println("pos="+position);
            System.out.println("item="+getItem(position));

            TextView textView = (TextView) listView
                    .findViewById(R.id.name_label);
            textView.setText(getelement()[position]);

            ImageView imageView = (ImageView) listView
                    .findViewById(R.id.icon);
            imageView.setImageBitmap(bitmap);
        }
        else        
        {
            listView = (View) convertView;
        } 
        return listView;

    }

    private Bitmap DownloadImage(String URL)
    {        
//      System.out.println("image inside="+URL);
        Bitmap bitmap = null;
        InputStream in = null;        
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
//        System.out.println("image last");
        return bitmap;                
    }
    private InputStream OpenHttpConnection(String urlString)
            throws IOException
            {
                InputStream in = null;
                int response = -1;

                URL url = new URL(urlString);
                URLConnection conn = url.openConnection();

                if (!(conn instanceof HttpURLConnection))                    
                    throw new IOException("Not an HTTP connection");

                try{
                    HttpURLConnection httpConn = (HttpURLConnection) conn;
                    httpConn.setAllowUserInteraction(false);
                    httpConn.setInstanceFollowRedirects(true);
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();

                    response = httpConn.getResponseCode();                
                    if (response == HttpURLConnection.HTTP_OK) {
                        in = httpConn.getInputStream();                                
                    }                    
                }
                catch (Exception ex)
                {
                    throw new IOException("Error connecting");            
                }
                return in;    
    }

} 
```

我的家庭清单：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <ImageView
        android:id="@+id/icon"
        android:layout_width="80dp"
        android:layout_height="80dp"        
        android:paddingLeft="10dp"
        android:paddingRight="10dp" />

    <TextView
        android:id="@+id/name_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/icon"
        android:paddingBottom="10dp"
        android:textColor="#ffffff"
        android:textSize="16dp" />

</RelativeLayout> 
```

在我的活动设置适配器中：

```
 ListView l2= (ListView)findViewById(R.id.list);
          ListViewwithimageAdapter adapter = new ListViewwithimageAdapter(this);
          l2.setAdapter(adapter); 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:09:19.200

我认为您没有完全掌握在适配器中完成的视图重用的概念。适配器与列表视图一起做的是，首先它为您可以看到的每个列表项创建一个视图。当您开始向下滚动时，最上面的视图不再可见，并且列表视图需要一个新的视图来显示新项目。现在，适配器不是释放消失的视图并分配一个全新的视图，而是为您提供消失的视图（as `convertView`），因此您不必分配一个新的视图（这相对耗时），您只需*转换*此视图以使其适合给定位置的项目。所以在你的情况下，当你得到一个非空值`convertView` **时，不要原封不动地返回它**（因为那样它看起来与刚刚消失在顶部的那个相同），而是调整它以在给定位置显示项目，即相应地设置它的图像和文本。

顺便提一句。`getelement()`你不应该经常打电话给昂贵的。相反，只需在适配器的构造函数中调用它并存储返回的数组以供以后访问`getCount()`等`getView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:27:37.850

将任何类型的适配器与 ListView 一起使用是一件棘手的事情。您的问题本质上源于 ListView 重用了您膨胀的 View 或至少其中一些的事实。所以它会变成 7 或其他什么，然后当你滚动时重用一个现在不在屏幕上的视图。这就是您应该检查是否`convertView`为空的原因。我看到了一些东西，所以我会告诉你要移动什么。

您遇到的主要问题是删除您从中获得的 View 中的所有内容`convertView`。

```
public View getView(int position, View convertView, ViewGroup parent) 
{
    // TODO Auto-generated method stub
    System.out.println("pos in id="+position);                     
     Bitmap bitmap = DownloadImage(
             kickerimage[position] );

    if (convertView == null) 
    {
        //this should only ever run if you do not get a view back            
        LayoutInflater inflater = (LayoutInflater) contxt
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.homelistrow, null); 

    }
    TextView textView = (TextView) convertView
                .findViewById(R.id.name_label);
        textView.setText(getelement()[position]);

        ImageView imageView = (ImageView) convertView
                .findViewById(R.id.icon);
        imageView.setImageBitmap(bitmap);

    return convertView;

} 
```

所以你在哪里看到`holder.removeAllViews();`，那是关键。ListView 不保证调用了多少次`getView()`（这就是为什么您会看到位置变化很大甚至重复的原因）。它可以被你之前已经调用过的东西调用，因此重复的条目。请记住，**视图被回收**。就像想象一整行被重用一样。因此，之前的内容仍然存在，这就是为什么您必须删除所有内容并每次都重新开始的原因。你可能已经注意到我也移动了一些东西。仔细查看以了解原因。当您可以使用正确时，没有理由创建新视图`convertView`，只有当它为空时。`removeAllView`另请注意，只有在 convertView 不为空时，您才会去's。无论如何，其他一切都应该始终运行。

**编辑**

好的，所以您不需要删除 RelativeLayout 中的所有视图，因为每次运行时，您都会替换它。试试我刚刚更改的内容。它应该工作。

在创建 ListView 框架的人的视频中查看此链接：[ListView 世界](http://www.youtube.com/watch?v=wDBM6wVEO70)

# c# - 移动应用开发 SDK

> ID：13339575
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:08:50.317
> 
> 标签：c#, java, eclipse, mobile, sdk

我正在为苹果和安卓构建一个本机应用程序我有一个用 c# mvc4 构建的网络系统，所以这是我的主要语言。我一直在寻找开发两者的最快方法，但不知道从哪里开始。关于任何 SDK 的任何建议。我需要将推送警报合并到设备并下载服务器内容。

我无法使用 Mac，理想情况下我一直在寻找一站式 SDK。我见过phone gap和雨伞sdk。手机差距需要苹果mac和伞SDK在其API中的功能有限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:03:31.290

您将无法通过一体化解决方案实现原生应用的关键目标。Apple 的 iOS 需要在 Objective-C 中进行本地开发，并通过 XCode 进行编译和测试。您还需要 Apple Developers 许可证（每年 99 美元）才能测试您的应用程序。这只是任何 iOS 应用程序开发过程的简单要求。

更好的问题是，你真的需要原生代码吗？如果您采用打包的网络应用程序方法，您可以通过 Cordova/PhoneGap 环境在所有主要平台上获得通知。您可以[通过 PhoneGap 模板设置一站式开发环境](http://devgirl.org/2012/10/04/cross-platform-phonegap-aka-cordova-project-templates-in-a-jiffy/)。是的，您仍然需要 Mac 进行测试和部署 (iOS) 以及 Eclipse 进行 Android 测试和部署，但您将获得所需的一站式开发环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:12:12.780

对于 Android，您将使用 C++ 或 Java 进行编程，而对于 iOS，您将需要使用 ObjectiveC（Apple 特有的一种语言）进行编程。

主要开发 IDE：适用于 Android 的 Eclipse -> 适用于 iOS 的 XCODE

[安卓开发者](http://developer.android.com/sdk/index.html)

[苹果开发者](https://developer.apple.com/)

# asp.net - 在 asp.net 中通过 http post 发送的敏感数据

> ID：13339578
> 
> 赞同：2
> 
> 时间：2012-11-12T07:08:53.107
> 
> 标签：asp.net, authentication, passwords

我正在为一个 ASP.NET 网站编写一个基本的登录页面，我看到的所有教程基本上都解释了以下步骤：
1\. 创建一个带有用户名和密码文本框以及一个登录按钮的表单。
2\. 将登录按钮连接到将调用验证函数的事件，从这两个文本框中传递数据。
3\. 以某种安全方式将这些文本框中的数据与数据库或其他地方的登录信息进行比较。
4.返回给客户端一些结果，或者根据#3重定向。

我能找到的所有安全信息都是指#3 中发生的事情。我担心的是从#1 到#2 的转变。数据不会以明文形式通过 http 帖子发送吗？难道不能有人只运行 tcp 跟踪或 wireshark（ethereal），检查数据包，然后看到用户名和密码清晰吗？我必须购买 SSL 证书来防止这种情况吗？如果没有加密，.net 中是否已经有一些东西会以某种方式传递这些信息？

谢谢，rj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:26:26.307

```
Must I buy an SSL cert to prevent this? 
```

是的，为了确保安全，您需要注意两件事。

1.  页面必须通过 ssl，因此必须安全地传输名称和密码。
2.  凭据 cookie 也必须仅通过 ssl，并且当然是加密的。

更多阅读内容：
[一些黑客可以从用户那里窃取 cookie 并在网站上使用该名称登录吗？](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s)
[不同的用户在 .ASPXANONYMOUS 中获得相同的 cookie 值](https://stackoverflow.com/questions/2448720/different-users-get-the-same-cookie-value-in-aspxanonymous)
[这个新的 ASP.NET 安全漏洞有多严重，我该如何解决？](https://stackoverflow.com/questions/3720720/how-serious-is-this-new-asp-net-security-vulnerability-and-how-can-i-workaround)

# racket - 在某些 Z3 绑定中是否有不支持声明排序的解决方法？

> ID：13339581
> 
> 赞同：4
> 
> 时间：2012-11-12T07:09:13.220
> 
> 标签：racket, z3

我对Z3不太熟悉，但必须用它来做一些项目。

我使用的是[Z3球拍绑定](https://github.com/sid0/z3.rkt)，它有像SMT-LIB v2一样的文本界面，可以消除通用量词，但它还不支持`declare-sort`，而我的模型需要某种自定义类型定义（我想不出如何只`Int`在我的模型中使用..)

在这种情况下，如果我想使用绑定，我该如何解决`declare-sort` 在我的模型中获取的功能？Z3有类似的东西吗？

或者在 Z3 不支持的某些类型上工作的常用技巧是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:03:40.293

我相信你最好的办法是直接给 Siddharth Agarwal 发邮件。

# c - 为什么 Linux memmove() 是这样实现的？

> ID：13339582
> 
> 赞同：18
> 
> 时间：2012-11-12T07:09:25.917
> 
> 标签：c, implementation, memmove

[来自memmove(3)](http://linux.die.net/man/3/memmove)的 Linux 手册页

> memmove() 函数将 n 个字节从内存区域 src 复制到内存区域 dest。内存区域可能会重叠：复制就像首先将 src 中的字节复制到不与 src 或 dest 重叠的临时数组中一样，然后将字节从临时数组复制到 dest。

我们可以执行以下操作，而不是分配一个临时数组并复制两次值：

```
void *my_memmove(void *dest, const void *src, size_t n) {
  signed char operation;
  size_t end;
  size_t current;

  if(dest != src) {
    if(dest < src) {
      operation = 1;
      current = 0;
      end = n;
    } else {
      operation = -1;
      current = n - 1;
      end = -1;
    }

    for( ; current != end; current += operation) {
      *(((unsigned char*)dest) + current) = *(((unsigned char*)src) + current);
    }
  }
  return dest;
} 
```

在这个实现中，我们只需要处理我们开始复制的位置。

我的实施有缺点吗？

*注意：我实际上不会使用我的实现。我只是好奇。*

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-12T07:39:30.507

您可以在[此处](http://www.opensource.apple.com/source/BerkeleyDB/BerkeleyDB-6/db/clib/memmove.c)、[此处](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/doxygen/html/memmove_8c_source.html)、[此处](http://sourceware.org/git/?p=glibc.git;a=blob;f=string/memmove.c;h=bf7dcc162770503ed62a262f627bfa526fc5a0d7;hb=HEAD)和[此处](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/memmove.S;h=9e693f2a9806fa8f6ce7e26f37b1808e952396d3;hb=HEAD)查看 memmove 的一些源代码。

你会注意到他们*实际上*并没有创建一个临时数组。编写手册页是为了帮助您理解它在*逻辑上*而不是*实际上*在做什么。因此，他们说“好像”。

memmove() 实际上所做的是将字节从`src`to复制`dest`，并且它向前复制 if `dest < src`（这与 memcpy 基本相同），否则向后复制。

`memcpy`和之间的区别在于`memmove`盲目`memcpy`地向前复制——这就是为什么`dest`也不`src`应该重叠。但`memmove`要注意确保重叠不会搞砸最终结果。

# javascript - CKEditor对焦时如何关闭烦人的屏幕跳转

> ID：13339587
> 
> 赞同：1
> 
> 时间：2012-11-12T07:10:42.747
> 
> 标签：javascript, ckeditor

我在 Opera 浏览器中遇到问题：当我尝试将光标设置在最后存在的元素下方的位置时 - 浏览器跳转到底部的某个位置。在其他浏览器中 - 它滚动到光标。

如何克服它？还是根本不跳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:48:00.443

你确定你使用的是最新的 CKEditor 3.6.5 吗？我无法重现此问题。

顺便提一句。[您应该在https://dev.ckeditor.com/](https://dev.ckeditor.com/)上报告此问题。然后我们就可以调查这个案子了。

# sql - Oracle SQL 中的自定义顺序

> ID：13339589
> 
> 赞同：64
> 
> 时间：2012-11-12T07:10:55.300
> 
> 标签：sql, oracle, sql-order-by

我需要根据货币订购交易。但是我需要实现一个自定义的 order by，这使得 USD 总是排在最前面，其余的应该按 asc 排序。

例如 ：

*   BHT
*   美元
*   马币
*   JYP

应该像这样排序：

*   美元
*   BHT
*   日元
*   马币

有没有简单的方法来处理这个？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-11-12T07:14:44.823

不知道这是否有资格这么简单：

```
order by 
    case 
       when currency = 'USD' then 1 
       when currency = 'BHT' then 2
       when currency = 'JPY' then 3
       when currency = 'MYR' then 4
       else 5
    end 
```

或者更紧凑但特定于 Oracle：

```
order by decode(currency, 'USD', 1, 'BHT', 2, 'JPY', 3, 'MYR', 4, 5) 
```

上述使用数字定义排序顺序的解决方案不会自动对 case/decode 表达式中未提及的货币进行正确排序。

为了简单地将美元放在前面而不关心其余的，“生成”的订单标准也必须是一个字符值。在这种情况下，您可以使用以下内容：

```
order by 
    case 
       when currency = 'USD' then '001' 
       else currency
    end 
```

它使用“字母”排序。这是有效的，因为字符是在数字之后排序的。（使用`'AAA'`代替`'001'`也可以）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-12T07:18:43.457

为了确保您的排序是“灵活的”并且适用于所有货币，请执行以下操作：

```
SELECT <columns>
FROM <tableName>
ORDER BY DECODE(currencyColumn,'USD', 1, 2), currencyColumn 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-10T20:53:51.110

一种更详细的方法，如果您对将某些值排序到开头或结尾感兴趣，但将它们排序在他们的组中：

```
order by
  case when currency in ('USD', 'CAD') 
    then '000'||currency
  when currency in ('ZWD', 'HTG')
    then 'ZZZ'||currency
  else currency 
  end 
```

这将把美元和加元放在列表的顶部（排序），ZWD 和 HTG 放在底部，其余的在它们之间排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T07:18:47.530

也许这会帮助你：

```
order by decode(currency, 'USD', 1, 2) 
```

或使用`case`

```
 order by 
      case 
        when currency = 'USD' then 1 
        else 2
      end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-18T14:08:01.610

`FIELD()`MySQL 中的另一种类似正则表达式的变体：

```
select
meas_code,
to_number(regexp_replace(meas_code, replace('(meas1,meas2,meas3)', ',', '|'), instr(replace('(meas1,meas2,meas3)', ',', '|'), meas_code))) ordr
from (select cast(column_value as varchar2(10)) as meas_code from xmltable('''meas1'',''meas2'',''meas3'''))
order by 2 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-12T14:01:46.820

您可以执行以下操作：

```
SELECT 
  * 
FROM
  yourtable
ORDER BY
  REPLACE(FIND_IN_SET(currency,'USD,BHT,JPY,MYR'),0,'Z') 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-05-19T04:14:09.737

我需要做同样的事情，但有多个列，并发现 Grzegorz W 的回答对此最好，并添加以下简单内容：

```
SELECT <columns>
FROM <tableName>
ORDER BY DECODE(currencyColumn,'USD', 1, 2), currencyColumn, anotherColumn; 
```

# jquery - 异步加载完整 div 的内容

> ID：13339590
> 
> 赞同：2
> 
> 时间：2012-11-12T07:10:59.240
> 
> 标签：jquery

我正在寻找一种异步加载整个 div 内容的方法。到目前为止，我正在预加载 div .orbit-wrapper，但只有背景图像会异步加载。我想延迟加载该 div 中的所有内容，直到页面完全加载。理想情况下，使用 ajax-loader.gif 作为背景[http://d.pr/DvKV](http://d.pr/DvKV)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:46:20.510

jQuery [Ajax.load](http://api.jquery.com/load/)是你的朋友。我直接从 jQuery 文档中复制了示例。见下文：

```
$('#result').load('ajax/test.html #container'); 
```

这会将 test.html 中的#container 放入当前页面的#result 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-10T06:03:37.993

在这里，我向您发送异步加载整个 div 内容的示例，它对于页面中的所有 div 也很有用，只需为每个 div 设置“data-url”并给出类名“partialContents”

```
<div class="partialContents" data-url="Your-URL">
</div>
<script>
$(document).ready(function() {

            var baseUrl = window.location.origin;//Load base URL

            $(".partialContents").each(function (index, item) {
                var url = baseUrl + $(item).data("url");
                if (url && url.length > 0) {
                    $(item).load(url);
                }
            });
        });
</script> 
```

# c# - 将数据从应用程序数据库保存到用户的存储驱动器

> ID：13339594
> 
> 赞同：0
> 
> 时间：2012-11-12T07:11:20.003
> 
> 标签：c#, windows-8, visual-studio-2012

我正在 Visual Studio 2012 中为 Windows 8 C# 制作应用程序。现在，任何人都可以帮助我如何将数据从应用程序数据库保存到用户的存储驱动器。例如，如果我们想将“Assets/logo.png”从应用程序数据库存储到用户存储，那么我们该如何存储呢？提前谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:00:19.640

为了做这样的事情，你可以试试下面的代码..

```
 var file = await Windows.Storage.StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///assets/filename.png"));
     await file.CopyAsync(Windows.Storage.KnownFolders.PicturesLibrary, file.Name, Windows.Storage.NameCollisionOption.GenerateUniqueName); 
```

让我知道这个是否奏效。:)

# struts2 - 比较struts 2中的属性值

> ID：13339598
> 
> 赞同：0
> 
> 时间：2012-11-12T07:11:28.987
> 
> 标签：struts2

我想将会话变量与 struts 的测试方法中的属性值进行比较 if 条件。

```
<s:property value="band"/>
<s:if test="#session.bandname == property value">
    <s:form action="BandPost">
        <s:textarea key="post" accesskey="post">Write a post</s:textarea>
        <s:submit/>
    </s:form> 
</s:if> 
```

我想将 if 条件下的上述属性值与 #session.bandname 值进行比较。我尝试了很多东西，但它们不起作用。有人可以给我答案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:31:23.243

您可以简单地引用该属性。您只需要在 Action 中使用**public String getBand()**方法。

```
<s:property value="band"/>
<s:if test="%{#session.bandname == band}">
    <s:form action="BandPost">
        <s:textarea key="post" accesskey="post">Write a post</s:textarea>
        <s:submit/>
    </s:form> 
</s:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:43:34.160

我认为[核心 JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html)可以轻松解决这个问题。

```
<c:set var="varForComparison" value="ABC" scope="page"></c:set>

<c:if test="${ sessionScope.varInSession eq pageScope.varForComparison }">
 // DO WHAT YOU HAVE TO
</c:if> 
```

你甚至可以像这样直接比较请求中的bean

```
<c:if test="${ sessionScope.varInSession eq requestScope.beanInRequest.propertyToCompare }">
 // DO WHAT YOU HAVE TO
</c:if> 
```

此外，如果您想要多个条件，例如 if-else 阶梯，您可以使用它

```
<c:choose>
  <c:when test=""></c:when>
  <c:otherwise></c:otherwise>
</c:choose> 
```

在 c:choose 中，您可以根据需要使用尽可能多的 c:when。核心 JSTL + 表达式语言有很大帮助。希望能帮助到你。

# c - 字符串反转C中的逻辑错误

> ID：13339603
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:12:11.740
> 
> 标签：c, string, loops

`Input: Hello there boy(any 80 character string)`

`Expected output: boy there Hello`

`Current output: (nothing - does compile though) \`

我的硬件提示：

编写一个程序，提示用户输入由一个或多个空格分隔的单词序列，其中每个单词都是字母数字字符序列。您可以假设输入的文本字符串不超过 80 个字符，每个单词不超过 20 个字符。使用 fgets() 命令读取输入文本字符串。例如，我们可以声明一个 char 数组 char sentence[81]; 然后使用 fgets(sentence,81,stdin); 从标准输入 stdin（即键盘输入）中读取最多 80 个字符到字符数组 sentence[] 中，这还将在数组末尾插入一个空字符（字符串终止字符）；这就是为什么数组需要比输入的文本长一个字节的原因。您的程序应该以相反的顺序打印出单词，与输入的完全相同，每个单词之间只有一个空格。您可以假设没有输入标点符号或控制字符。您的程序应命名为 reverse_words.c，并且您的输出应与以下示例中显示的输出完全匹配。

我已经查看了其他示例，只是尝试使用我所知道的来制作这个程序。对我来说，它似乎工作，但它没有。有人可以帮我找到我的逻辑在哪里吗？

```
#include <stdio.h>

int main()
{
   char sentence[81];
   char space[81];
   int i , h = 0, j, start;

   printf("Enter a sentance (up to 80 characters): ");
   fgets(sentence,81,stdin);

   //starting backwards go from element 80 to find first non space
   //make array to store element numbers of sentence in new array
   for(i = 80; i >= 0; i--)
   {
     if(sentence[i] != ' ' || sentence[i] != '\0')
     { start = i;
       //printf("%i", start);
     }
    if(i < start && i == ' ')
   {
     space[h] = i;
     h++;
  }
}

h = 0;

  //start at first space and print characters till next space, repeat till all words printed
  for( j = space[h]; j < space[h + 1]; h++)
  {
     printf("%c", sentence[j]);
     if (j == space[h + 1])
        printf(" ");
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:26:01.160

粗略一瞥

```
if(i < start && i == ' ') 
```

改成

```
 if(i < start && sentence[i] == ' ') 
```

您可以改进的其他方面：

不要从 80 开始循环，而是找到输入的字符串的长度，然后倒退。利用`strlen`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:19:24.387

尝试这个：

```
 #include <stdio.h>
  #include <conio.h>

void main()
{
   int x=0,y=0,t,i=0,j=1,k=0,p[10];
   char a[80],b[80];
   clrscr();
   printf(" enter a string ");
   gets(a);
   p[0]=0;
   //count char in string
   while(a[i]!= '\0')
   {
      i++;
      //array p[] note the space position in string
      if(a[i]==' ')
      {
         p[j]=i;
         j++;
      }
   }
   k=i;
   t=0;
   //loop till space to next space
   for(j=j-1;j>=0;j--)
   {    
      x=p[j];
      y=x;
      //reposition the words
      while(x<k)
      {
         // put space when it come to first position
         // because at the beginning there is no space
         if (x==0)
         {
            b[t]= ' ';
            t++;
         }
         b[t]=a[x];
         t++;
         x++;
      }
      k=y;
   }
   puts(b);
   getch();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:04:33.613

正如我在评论中所说，这是一个完美的递归问题。这就是为什么我想分享这个解决方案。当然，除非您完全了解正在发生的事情，否则不要使用它:)

```
#include <stdio.h>

void PrintWordsInReverseOrder(char* sentence)
{
    // Search beginning of word (skipping non-readable characters <= ' ')
    char* start = sentence;
    while ((*start != '\0') && (*start <= ' ')) start++;
    if (*start == '\0') return; // this is the end my friend
    // Search end of word (skipping readable characters > ' ')
    char* end = start;
    while (*end > ' ') end++; // will also stop at '\0'
    if (*end != '\0')
    {   // We are not at the end of the string, so there might be a next word available.
        // Print the next word using recursion (this causes to print out the last word first)
        PrintWordsInReverseOrder(end + 1);
    }
    char endBackup = *end;
    *end = '\0'; // temporary terminate the word so we can print it out (don't be affraid, we have a backup in endBackup)
    printf(start);
    printf(" ");
    *end = endBackup; // restore word termination char
}

int main()
{
    char sentence[81];
    printf("Enter a sentance (up to 80 characters): ");
    fgets(sentence, sizeof(sentence), stdin);
    PrintWordsInReverseOrder(sentence);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:30:25.150

这部分代码可以稍微清理一下：

```
//starting backwards go from element 80 to find first non space
//make array to store element numbers of sentence in new array 
```

而不是从 80 个字符返回，只需使用`strlen()`of `sentence`：

```
printf("Enter a sentence (up to 80 characters): ");
fgets(sentence, 81, stdin);
start = (int) strlen(sentence) - 1; /* subtract one to account for null character */ 
```

然后从该值返回：

```
for (i = start; i >= 0; i--) {
    /* ... */
} 
```

您还可以通过定义和使用常量来表示句子的最大长度来提高代码的总体质量：

```
#define MAX_SENTENCE_LENGTH 80
...
char sentence[MAX_SENTENCE_LENGTH + 1];
char space[MAX_SENTENCE_LENGTH + 1];
...
printf("Enter a sentence (up to %d characters): ", MAX_SENTENCE_LENGTH);
fgets(sentence, MAX_SENTENCE_LENGTH + 1, stdin); 
```

然后，如果您想使用不同的限制，您只需在一处更改代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T07:34:48.963

这是尝试运行的代码：

```
int len=strlen(sentence);
for(i=0;i<len;i++)
   space[i]=sentence[len-1-i];
space[i]='\0'
int start=0,end;
for(i=0;i<=len;i++)
{     
   if(space[i]!=' ' || space[i]!='\0')  //edited in place of && it should be ||
   {}
   else 
   {
      end=i-1;
      str_rev(&space[start],&space[end]);
      start=i+1;
   }
}

void str_rev(char *s,char*e)
{
   while(s>e)
   {
      char tmp=*s;
      *s=*e;
      *e=tmp;
      s++;
      e--;
   }
} 
```

# google-analytics - 检查哪个子域是经常查看的

> ID：13339606
> 
> 赞同：0
> 
> 时间：2012-11-12T07:12:20.340
> 
> 标签：google-analytics

我有一个网站，其中每个用户都有一个子域。虽然它是每个用户的相同页面，但数据会根据子域（即每个特定用户）而变化。目前我有谷歌分析代码为我提供子域页面访问次数的数据（不适用于任何特定用户）。有没有办法可以获取每个特定用户的子域页面访问的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:07:05.647

技术上是的 - 使用用户名设置自定义变量并创建细分（或使用过滤器），或使用包含用户名的虚拟 url。

从法律上讲，没有。使用个人身份数据违反了 Google 的服务条款，并且在许多国家/地区也违反了隐私法。您可能会为每个用户选择一个编码的 id，但即使这样看起来也很不稳定（因为可以将 id 映射到用户）。

# jquery - 需要改变jqgrid的位置

> ID：13339610
> 
> 赞同：0
> 
> 时间：2012-11-12T07:12:35.850
> 
> 标签：jquery, asp.net, css, jqgrid

我必须将 jqgrid 放置在不同的位置，而不是默认的左上角位置。我尝试了一些方法，但它不起作用。我在这里包含了我的代码..请检查一下并给我一个解决方案..

这是html代码：

```
<div>
    <table id="table" style="border-spacing: 7px 7px; margin-left: 5px">
        <tr>
            <td>
                <input style="margin-left: 10px;" type="button" value="Add" id="btn_addusers" />
            </td>
        </tr>
    </table>
    <table id="users_grid" style="left: 300px">
    </table>
</div> 
```

这是我的 js 代码：

```
$(document).ready(function() {
    $("#btn_addusers").click(function() {
        $("#users_grid").clearGridData(true).trigger("reloadGrid");
        $("#users_grid").jqGrid({
            datatype: "local",
            height: 'auto',
            width: 'auto',
            colNames: ['User ID', 'User Name'],
            colModel: [
        { name: 'userid', width: 60 },
        { name: 'username', width: 120 }

    ],

            caption: "Users in Private space"
        });
        var mydata = [
        { userid: "312171", username: "D, Gnana Xavier" },
        { userid: "311763", username: "Sangeetha" },
        { userid: "312185", username: "Amrutha" },
        { userid: "312186", username: "Ramesh" }
        ];
        for (var i = 0; i <= mydata.length; i++)
            $("#users_grid").jqGrid('addRowData', i + 1, mydata[i]);

    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:22:37.033

jqGrid在表格元素上创建了许多*额外的外部div。*所以你应该把`<table>`元素放在里面，`<div>`你可以使用外部 div 的样式来改变表格的位置。例如

```
<div style="margin-left: 300px">
    <table id="users_grid"></table>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:28:20.130

好的，正如@aristos 建议的那样。我试图解释我的答案。
div中的用户位置=relative如下

```
<div style="position:relative;">
    <table id="table" style="border-spacing: 7px 7px; margin-left: 5px">
       <tr>
          <td>
            <input style="margin-left: 10px;" type="button" value="Add" id="btn_addusers" />
          </td>
       </tr>
     </table>
    <table id="users_grid" style="left: 300px;position:absolute!important;">
    </table>
</div> 
```

注意

如果父容器的位置是相对**位置：相对**
并且内容的位置是**绝对**的，那么它可以在容器中移动。
现在您可以使用**left**和**top**属性来移动表格。
但它不会超出 div。

# javascript - 将不同大小的圆圈打包成矩形 - d3.js

> ID：13339615
> 
> 赞同：33
> 
> 时间：2012-11-12T07:13:01.633
> 
> 标签：javascript, algorithm, geometry, d3.js, packing

我试图将**不同大小的圆圈包装到一个矩形容器中**，而不是包装在`d3.js`捆绑在一起的圆形容器中，在`d3.layout.pack`.

这是我想要实现的布局：

![](../Images/03829ad4f958eaf375261c816c00d3a1.png)

我找到[了这篇](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.99.5620&rep=rep1&type=pdf)关于这个问题的论文，但我不是一个数学家，无法彻底理解这篇文章并将它们转换为代码......</p>

任何人都可以建议我应该从哪里开始将其转换为 d3.js 布局插件，或者如果您已经可视化了类似于此布局的气泡，请建议您解决该问题的任何方向。

谢谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-06T20:05:16.600

这是您算法的实现。

我对其进行了相当多的调整，但我认为它的作用基本相同。

### 包围圈

我使用了一个技巧来使计算更规律。

我没有使用定义边界框的线段，而是使用具有“无限”半径的圆，这可以被认为是线条的良好近似：

![包围圈](../Images/9979324bc869f5c56b531e57a6e54f67.png)

图片显示了当半径减小时 4 个边界圆的样子。它们被计算为通过边界框的角并在半径增加时向实际边收敛。

“角”圆（如算法所称）都被计算为一对圆的切线，从而消除了特殊的圆+线段或线段+线段的情况。

这也大大简化了启动条件。
该算法简单地从四个边界圆开始，一次添加一个圆，使用贪婪启发式 lambda 参数来选择“最佳”位置。

### 最佳匹配策略

原始算法不会产生最小的矩形来容纳所有的圆圈
（它只是试图将一堆圆圈放入给定的矩形中）。

我在它上面添加了一个简单的二分搜索来猜测最小表面（对于给定的纵横比，它会产生最小的边界矩形）。

### 编码

这是[一个小提琴](http://jsfiddle.net/TDzVE/)

```
var Packer = function (circles, ratio)
{
    this.circles = circles;
    this.ratio   = ratio || 1;
    this.list = this.solve();
}

Packer.prototype = {
    // try to fit all circles into a rectangle of a given surface
    compute: function (surface)
    {
        // check if a circle is inside our rectangle
        function in_rect (radius, center)
        {
            if (center.x - radius < - w/2) return false;
            if (center.x + radius >   w/2) return false;
            if (center.y - radius < - h/2) return false;
            if (center.y + radius >   h/2) return false;
            return true;
        }

        // approximate a segment with an "infinite" radius circle
        function bounding_circle (x0, y0, x1, y1)
        {
            var xm = Math.abs ((x1-x0)*w);
            var ym = Math.abs ((y1-y0)*h);
            var m = xm > ym ? xm : ym;
            var theta = Math.asin(m/4/bounding_r);
            var r = bounding_r * Math.cos (theta);
            return new Circle (bounding_r, 
                new Point (r*(y0-y1)/2+(x0+x1)*w/4, 
                           r*(x1-x0)/2+(y0+y1)*h/4));
        }

        // return the corner placements for two circles
        function corner (radius, c1, c2)
        {
            var u = c1.c.vect(c2.c); // c1 to c2 vector
            var A = u.norm();
            if (A == 0) return [] // same centers
            u = u.mult(1/A); // c1 to c2 unary vector
            // compute c1 and c2 intersection coordinates in (u,v) base
            var B = c1.r+radius;
            var C = c2.r+radius;
            if (A > (B + C)) return []; // too far apart
            var x = (A + (B*B-C*C)/A)/2;
            var y = Math.sqrt (B*B - x*x);
            var base = c1.c.add (u.mult(x));

            var res = [];
            var p1 = new Point (base.x -u.y * y, base.y + u.x * y);
            var p2 = new Point (base.x +u.y * y, base.y - u.x * y);
            if (in_rect(radius, p1)) res.push(new Circle (radius, p1));
            if (in_rect(radius, p2)) res.push(new Circle (radius, p2));
            return res;
        }

        /////////////////////////////////////////////////////////////////

        // deduce starting dimensions from surface
        var bounding_r = Math.sqrt(surface) * 100; // "infinite" radius
        var w = this.w = Math.sqrt (surface * this.ratio);
        var h = this.h = this.w/this.ratio;

        // place our bounding circles
        var placed=[
            bounding_circle ( 1,  1,  1, -1),
            bounding_circle ( 1, -1, -1, -1),
            bounding_circle (-1, -1, -1,  1),
            bounding_circle (-1,  1,  1,  1)];

        // Initialize our rectangles list
        var unplaced = this.circles.slice(0); // clones the array
        while (unplaced.length > 0)
        {
            // compute all possible placements of the unplaced circles
            var lambda = {};
            var circle = {};
            for (var i = 0 ; i != unplaced.length ; i++)
            {
                var lambda_min = 1e10;
                lambda[i] = -1e10;
                // match current circle against all possible pairs of placed circles
                for (var j = 0   ; j < placed.length ; j++)
                for (var k = j+1 ; k < placed.length ; k++)
                {
                    // find corner placement
                    var corners = corner (unplaced[i], placed[j], placed[k]);

                    // check each placement
                    for (var c = 0 ; c != corners.length ; c++)
                    {
                        // check for overlap and compute min distance
                        var d_min = 1e10;
                        for (var l = 0 ; l != placed.length ; l++)
                        {
                            // skip the two circles used for the placement
                            if (l==j || l==k) continue;

                            // compute distance from current circle
                            var d = placed[l].distance (corners[c]);
                            if (d < 0) break; // circles overlap

                            if (d < d_min) d_min = d;
                        }
                        if (l == placed.length) // no overlap
                        {
                            if (d_min < lambda_min)
                            {
                                lambda_min = d_min;
                                lambda[i] = 1- d_min/unplaced[i];
                                circle[i] = corners[c];
                            }
                        }
                    }
                }
            }

            // select the circle with maximal gain
            var lambda_max = -1e10;
            var i_max = -1;
            for (var i = 0 ; i != unplaced.length ; i++)
            {
                if (lambda[i] > lambda_max)
                {
                    lambda_max = lambda[i];
                    i_max = i;
                }
            }

            // failure if no circle fits
            if (i_max == -1) break;

            // place the selected circle
            unplaced.splice(i_max,1);
            placed.push (circle[i_max]);
        }

        // return all placed circles except the four bounding circles
        this.tmp_bounds = placed.splice (0, 4);
        return placed;
    },

    // find the smallest rectangle to fit all circles
    solve: function ()
    {
        // compute total surface of the circles
        var surface = 0;
        for (var i = 0 ; i != this.circles.length ; i++)
        {
            surface += Math.PI * Math.pow(this.circles[i],2);
        }

        // set a suitable precision
        var limit = surface/1000;

        var step = surface/2;
        var res = [];
        while (step > limit)
        {
            var placement = this.compute.call (this, surface);
console.log ("placed",placement.length,"out of",this.circles.length,"for surface", surface);
            if (placement.length != this.circles.length)
            {
                surface += step;
            }
            else
            {
                res = placement;
                this.bounds = this.tmp_bounds;
                surface -= step;
            }
            step /= 2;
        }
        return res; 
    }
}; 
```

### 表现

代码没有优化，有利于可读性（或者我希望:)）。

计算时间急剧增加。
您可以安全地放置大约 20 个圆圈，但任何超过 100 个的圆圈都会让您的浏览器爬行。

出于某种原因，在 FireFox 上它比在 IE11 上快得多。

### 包装效率

该算法在相同大小的圆上效果很差（它无法在一个正方形中找到著名的 20 个圆的蜂窝图案），但在广泛的随机半径分布上效果很好。

### 美学

对于相同大小的圆圈，结果非常笨拙。
没有尝试将圆圈捆绑在一起，因此如果算法认为两种可能性相等，则只是随机挑选一种。

我怀疑 lambda 参数可以稍微改进一下，以便在值相等的情况下进行更美观的选择。

### 可能的演变

使用“无限半径”技巧，可以定义任意边界多边形。

如果您提供一个函数来检查一个圆是否适合所述多边形，那么该算法没有理由不产生结果。

这个结果是否有效是另一个问题:)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-07T02:12:59.983

完全不同的方法...

正如我在评论中提到的，可以将[d3 集群力布局](http://bl.ocks.org/mbostock/7882658)调整为一种启发式方法，通过逐渐改变比例直到你有一个紧密的配合来将圆圈安装到盒子中。

到目前为止的结果并不完美，所以我提出了几个版本：

选项 1，在调整圆重叠*之前*将框压缩到圆所占据的空间。结果非常紧凑，但是在盒子的墙壁和彼此之间夹住的圆圈之间有轻微的重叠，如果没有冲突就无法移动：
[https ://jsfiddle.net/LeGfW/2/](https://jsfiddle.net/LeGfW/2/)

![圆形包装结果，选项 1](../Images/bc31cebe16278a7495a1f0c979265097.png)

选项 2，在分离重叠的圆圈*后*挤入框内。这避免了重叠，但包装并不是最佳的，因为我们不会将圆圈相互推入以迫使它们展开以填充矩形的长尺寸：
[https ://jsfiddle.net/LeGfW/3/](https://jsfiddle.net/LeGfW/3/)

![圆形包装结果，选项 2](../Images/030ded2575fbd4d5b2e97b46239fc9e2.png)

选项 3，快乐的媒体，在调整重叠后再次挤压，但挤压因子是基于房间宽度和高度尺寸的平均值，而不是最小房间，所以它会一直挤压直到宽度和高度都被填满：
[https://jsfiddle.net/LeGfW/5/](https://jsfiddle.net/LeGfW/5/)

![圆形包装结果，选项 3](../Images/48051e862e08f6b9170428a19b581403.png)

关键代码由`updateBubbles`force tick 调用的方法和`collide`第一行调用的方法组成`updateBubbles`。这是“选项 3”版本：

```
// Create a function for this tick round,
// with a new quadtree to detect collisions 
// between a given data element and all
// others in the layout, or the walls of the box.

//keep track of max and min positions from the quadtree
var bubbleExtent;
function collide(alpha) {
  var quadtree = d3.geom.quadtree(data);
  var maxRadius = Math.sqrt(dataMax);
  var scaledPadding = padding/scaleFactor;
  var boxWidth = width/scaleFactor;
  var boxHeight = height/scaleFactor;

    //re-set max/min values to min=+infinity, max=-infinity:
  bubbleExtent = [[Infinity, Infinity],[-Infinity, -Infinity]];

  return function(d) {

      //check if it is pushing out of box:
    var r = Math.sqrt(d.size) + scaledPadding,
        nx1 = d.x - r,
        nx2 = d.x + r,
        ny1 = d.y - r,
        ny2 = d.y + r;

      if (nx1 < 0) {
           d.x = r;
      }
      if (nx2 > boxWidth) {
           d.x = boxWidth - r;
      }
      if (ny1 < 0) {
           d.y = r;
      }
      if (ny2 > boxHeight) {
           d.y = boxHeight - r;
      }

    //check for collisions
    r = r + maxRadius, 
        //radius to center of any possible conflicting nodes
        nx1 = d.x - r,
        nx2 = d.x + r,
        ny1 = d.y - r,
        ny2 = d.y + r;

    quadtree.visit(function(quad, x1, y1, x2, y2) {
      if (quad.point && (quad.point !== d)) {
        var x = d.x - quad.point.x,
            y = d.y - quad.point.y,
            l = Math.sqrt(x * x + y * y),
            r = Math.sqrt(d.size) + Math.sqrt(quad.point.size)
                    + scaledPadding;
        if (l < r) {
          l = (l - r) / l * alpha;
          d.x -= x *= l;
          d.y -= y *= l;
          quad.point.x += x;
          quad.point.y += y;
        }
      }
      return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
    });

    //update max and min
    r = r-maxRadius; //return to radius for just this node
    bubbleExtent[0][0] = Math.min(bubbleExtent[0][0], 
                                  d.x - r);
    bubbleExtent[0][1] = Math.min(bubbleExtent[0][1], 
                                  d.y - r);
    bubbleExtent[1][0] = Math.max(bubbleExtent[1][0], 
                                  d.x + r);
    bubbleExtent[1][1] = Math.max(bubbleExtent[1][1], 
                                  d.y + r);

  };
}  

function updateBubbles() {

    bubbles
        .each( collide(0.5) ); //check for collisions   

    //update the scale to squeeze in the box 
    //to match the current extent of the bubbles
    var bubbleWidth = bubbleExtent[1][0] - bubbleExtent[0][0];
    var bubbleHeight = bubbleExtent[1][1] - bubbleExtent[0][1];

    scaleFactor = (height/bubbleHeight +
                           width/bubbleWidth)/2; //average
    /*
    console.log("Box dimensions:", [height, width]);
    console.log("Bubble dimensions:", [bubbleHeight, bubbleWidth]);
    console.log("ScaledBubble:", [scaleFactor*bubbleHeight,
                                 scaleFactor*bubbleWidth]);
    //*/

    rScale
        .range([0,  Math.sqrt(dataMax)*scaleFactor]);

    //shift the bubble cluster to the top left of the box
    bubbles
        .each( function(d){
            d.x -= bubbleExtent[0][0];
            d.y -= bubbleExtent[0][1];
        });

    //update positions and size according to current scale:
    bubbles
        .attr("r", function(d){return rScale(d.size);} )
        .attr("cx", function(d){return scaleFactor*d.x;})
        .attr("cy", function(d){return scaleFactor*d.y;})
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-02T04:29:17.793

好吧，这远非最佳包装，但其他人可以尝试击败它。

*更新了，但还是不太好*

[https://jsfiddle.net/LF9Yp/6/](https://jsfiddle.net/LF9Yp/6/)

关键代码，比如：

```
var points = [[]]; //positioned circles, by row
function assignNextPosition(d,index) {
    console.log("fitting circle ", index, d.size);
    var i, j, n;
    var radiusPlus = rScale(d.size) + padding;
    if (!points[0].length) { //this is first object
       d.x = d.y = radiusPlus; 
       points[0].push(d);
       points[0].width = points[0].height = 2*radiusPlus;
       points[0].base = 0;
       return;
    }
    i = 0; n = points.length - 1; 
    var tooTight, lastRow, left, rp2, hyp;
    while ((tooTight = (width - points[i].width < 2*radiusPlus)
            ||( points[i+1]? 
                points[i+1].base - points[i].base < 2*radiusPlus 
                : false) ) 
          &&(i < n) ) i++;
           //skim through rows to see if any can fit this circle

    if (!tooTight) { console.log("fit on row ", i);
        //one of the rows had room
        lastRow = points[i];
        j=lastRow.length;

        if (i == 0) {
          //top row, position tight to last circle and wall
            d.y = radiusPlus;
            rp2 = (rScale(lastRow[j-1].size) + padding);
            d.x = lastRow[j-1].x + Math.sqrt(
                Math.pow( (radiusPlus + rp2), 2)
                - Math.pow( (radiusPlus - rp2),2) );
        }
        else {
           //position tight to three closest circles/wall
           //(left, top left and top right)
            //or (left, top left and right wall)
           var left = lastRow[j-1];
           d.x = left.x + rScale(left.size) + padding + radiusPlus;
           var prevRow = points[i - 1];       
           j = prevRow.length;
           while ((j--) && (prevRow[j].x > d.x));
           j = Math.max(j,0);
           if (j + 1 < prevRow.length) {
               console.log("fit between", prevRow[j], prevRow[j+1]);
               d.y = prevRow[j].y 
               + (Math.sqrt(Math.pow((radiusPlus + 
                           rScale(prevRow[j].size) +padding), 2) 
                           - Math.pow( (d.x - prevRow[j].x),2)
                       )||0);
              j++;
              d.y = Math.max(d.y, prevRow[j].y 
               + (Math.sqrt(Math.pow((radiusPlus + 
                           rScale(prevRow[j].size) +padding), 2) 
                           - Math.pow( (d.x - prevRow[j].x),2)
                       )||0)  );
           }
           else { //tuck tight against wall
               console.log("fit between", prevRow[j], "wall");
            d.x = width - radiusPlus;
            rp2 = (rScale(prevRow[j].size) + padding);
            d.y = prevRow[j].y + (Math.sqrt(
                Math.pow( (radiusPlus + rp2), 2)
                - Math.pow( (d.x - prevRow[j].x),2) )||0);
            if (i > 1)
                d.y = Math.max(d.y, points[i-2].height + radiusPlus);
           }
        }

        lastRow.push(d); 
        lastRow.width = d.x + radiusPlus;
        lastRow.height = Math.max(lastRow.height, 
                                  d.y + radiusPlus);
        lastRow.base = Math.min(lastRow.base,
                                d.y - radiusPlus);

    } else { console.log("new row ", points.length)
        prevRow = points[points.length -1];
        j=prevRow.length;
        while(j--) {
            var testY = prevRow[j].y + rScale(prevRow[j].size) + padding
                  + radiusPlus;
            if (testY + radiusPlus < prevRow.height) {
                //tuck row in gap
                d.x = prevRow[j].x;
                d.y = testY;
            }
        }
        if (!d.x) {//start row at left
          d.x = radiusPlus;
          d.y = prevRow.height + radiusPlus;
        }
        var newRow = [d];
        newRow.width = d.x + radiusPlus;
        newRow.height = Math.max(d.y + radiusPlus, prevRow.height);
        newRow.base = d.y - radiusPlus;
        points.push(newRow); 
    } 
            if (!d.y) console.log("error",d);
    if (d.y + radiusPlus > height) {
      //change rScale by the ratio this exceeds the height
      var scaleFactor = height/(d.y + radiusPlus);
      rScale.range([0, rScale.range()[1]*scaleFactor]);

      //recalculate all positions
      points.forEach(function(row, j){
            row.forEach(function(d, i) {
               d.x = (d.x - i*2*padding)*scaleFactor + i*2*padding;
               d.y = (d.y - i*2*padding)*scaleFactor + i*2*padding;
            });
            row.width *= scaleFactor;
      });

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T20:02:19.347

如果您主要关心的是在矩形内找到*紧密*排列的不同大小的圆圈，那么不幸的是，您将不得不实现新的 d3 布局。我不知道已经编写的插件可以做到这一点。

但是，如果您要寻找的是*任何*旧的包装成一个矩形，那么您可以使用 d3 提供的现有圆形包装算法`d3.layout.pack`。当您指定此布局的边界时，您正在指定矩形的尺寸。然后 d3 确定边界矩形将外接的圆，并使用该圆来可视化分层数据的根。因此，您可以做的是提供一个您实际上不渲染的“虚拟”根节点，并让您想要可视化的真实数据成为该节点的子节点。

下面的代码示例，我也[将它放在 bl.ocks.org 上，](http://bl.ocks.org/4127259)以便您可以看到它的运行情况。

```
var w = 640,
    h = 480;

var data = {
  name : "root",
  children : [
    { name: '1', size: 100 }, { name: '2', size: 85 },
    { name: '3', size: 70 } , { name: '4', size: 55 },
    { name: '5', size: 40 } , { name: '6', size: 25 },
    { name: '7', size: 10 } ,
  ]
}

var canvas = d3.select("#canvas")
  .append("svg:svg")
  .attr('width', w)
  .attr('height', h);

var nodes = d3.layout.pack()
  .value(function(d) { return d.size; })
  .size([w, h])
  .nodes(data);

// Get rid of root node
nodes.shift();

canvas.selectAll('circles')
    .data(nodes)
  .enter().append('svg:circle')
    .attr('cx', function(d) { return d.x; })
    .attr('cy', function(d) { return d.y; })
    .attr('r', function(d) { return d.r; })
    .attr('fill', 'white')
    .attr('stroke', 'grey'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-08T21:57:05.607

有一种更好的方法可以做到这一点——使用 Mitchell 的最佳拟合算法。

这是一般模式：

```
function drawCircles() { 
  var w = (parseInt(d3.select(".circles-div").style('width'), 10)) * 0.34,
    h = 350;

  d3.csv('dataset.csv', function(error, data) {

    var maxRadius = 8, // maximum radius of circle
      padding = 3, // padding between circles; also minimum radius
      margin = {top: maxRadius, right: maxRadius, bottom: maxRadius, left: maxRadius},
      width = w - margin.left - margin.right,
      height = h - margin.top - margin.bottom;

     var color = d3.scale.linear()
      .domain([50,10])
      .range(['#666','#efefef'])
      .interpolate(d3.interpolateHcl);

    var logscale = d3.scale.linear()
        .range([0,8]);

    logscale.domain([0,500])

    var k = 1, // initial number of candidates to consider per circle
        m = 100, // initial number of circles to add per frame
        n = data.length, // remaining number of circles to add
        newCircle = bestCircleGenerator(maxRadius, padding);

    var svg = d3.select(".circles-div").append("svg")
        .attr("width", w)
        .attr("height", h)
      .append("g")
        .attr('class','bubbles')
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.timer(function() {
      for (var i = 0; i < m && --n >= 0; ++i) {

        var maxR = logscale(data[n]['Radius_value'])

        var circle = newCircle(k);

        svg.append("circle")
            .attr("cx", circle[0])
            .attr("cy", circle[1])
            .attr("r", 0)
            .style('fill', color(data[n]['Color_value']))
          .transition()
            .attr("r", logscale(data[n]['Radius_value']));

        if (k < 500) k *= 1.01, m *= .998;
      }
      return !n;
    });

    function bestCircleGenerator(maxRadius, padding) {

      var quadtree = d3.geom.quadtree().extent([[0, 0], [width, height]])([]),
      searchRadius = maxRadius * 2,
      maxRadius2 = maxRadius * maxRadius;

      return function(k) {

        var bestX, bestY, bestDistance = 0;

        for (var i = 0; i < k || bestDistance < padding; ++i) {
          var x = Math.random() * width,
              y = Math.random() * height,
              rx1 = x - searchRadius,
              rx2 = x + searchRadius,
              ry1 = y - searchRadius,
              ry2 = y + searchRadius,
              minDistance = maxRadius; // minimum distance for this candidate

          quadtree.visit(function(quad, x1, y1, x2, y2) {
            if (p = quad.point) {
              var p,
                  dx = x - p[0],
                  dy = y - p[1],
                  d2 = dx * dx + dy * dy,
                  r2 = p[2] * p[2];
              if (d2 < r2) return minDistance = 0, true; // within a circle
              var d = Math.sqrt(d2) - p[2];
              if (d < minDistance) minDistance = d;
            }
            return !minDistance || x1 > rx2 || x2 < rx1 || y1 > ry2 || y2 < ry1; // or outside search radius
          });

          if (minDistance > bestDistance) bestX = x, bestY = y, bestDistance = minDistance;
        }

        var best = [bestX, bestY, bestDistance - padding];
        quadtree.add(best);
        return best;
      };
    }

    });

  } 
```

[参见](http://bl.ocks.org/mbostock/1893974)例如随机数据。

# grep - 返回仅包含破折号和空格的字符串的 Grep

> ID：13339618
> 
> 赞同：0
> 
> 时间：2012-11-12T07:14:01.353
> 
> 标签：grep

我正在尝试编写返回仅包含破折号和空格的字符串的 grep。

例如我有这样一段文字：

```
 instanceName                                                            comPort
 ----------------------------------------------------------------------- --------------------
 MS-E2E003-COM14                                                         COM14
 MS-E2E003-COM15                                                         COM15
 MS-E2E003-COM16                                                         COM16
 MS-E2E003-COM19                                                         COM19

(4 rows affected) 
```

在此示例中，grep 返回第二个字符串： `----------------------------------------------------------------------- --------------------`

"^[- ]+$" 仅返回带有破折号的字符串或仅带有空格的字符串或两者兼而有之。

我使用的命令：

```
foreach rw(exec_res) { # the list contains a text
    print(grep("^[- ]+$", rw));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:00:05.510

如果我理解正确，您想 grep 查找同时包含破折号和空格的字符串*吗*？

在这种情况下，您需要两个 grep，一个用于挑选可能正确的字符串，一个用于删除仅包含破折号或空格的字符串：

```
grep -E '^[- ]+$' | grep -Ev '^([-]+|[ ]+)$' 
```

### 编辑 - 如何用 perl 做同样的事情

如果您尝试在 perl 中执行此操作，则可以完成类似的操作：

```
perl -ne 'print if /^([- ]+)$/m && $1 !~ /^([ ]+|[-]+)$/' 
```

# c - c-不能打印成本

> ID：13339619
> 
> 赞同：0
> 
> 时间：2012-11-12T07:14:08.810
> 
> 标签：c, printf, scanf

```
#include <stdio.h>
#include <conio.h>

int main()
{
 float L=0; //L is litre
 float gallon;
 gallon = 3.785*L;
 char input;
 float cost;

 printf("Hello, welcome to PetrolUpHere!!\n");
 printf("Would u like unleaded or diesel fuel?");
 scanf("%c", &input);
 printf("Enter the litre you want to fuel:");
 scanf("%f", &L);

 switch (input) {
 case 'u' :
 cost = 1.98*gallon;
 printf("The cost is :%f ",&cost);
 break;

 case 'd' :
 cost = 1.29*gallon;
 printf("The cost is :%f ",&cost);
 break;
 }

 getch();
 return 0;
 } 
```

该程序无法显示成本结果，仅在我完成输入 scanf 语句和 L 值后才显示成本 = 0.0000。我是c程序的新手，希望能得到帮助。感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:17:55.240

您已经将 L 乘以计算加仑

```
float L=0; //L is litre
 float gallon;
 gallon = 3.785*L;  //here gallon is zero already 
```

所以你会得到

```
printf("The cost is :%f ",&cost); 
```

输出`he cost is :address`

所以试试

```
 gallon = 3.785*L; // try this here 
 switch (input) { 
```

和

```
printf("The cost is :%f ", cost); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:17:55.533

我认为这是问题所在，加仑为 0：

```
 float L=0; //L is litre
 gallon = 3.785*L; 
```

阅读升数后，您应该多次：

```
float L=0; //L is litre
float gallon=3.785f;
...
//read liters
scanf("%f", &L);
...
cost = 1.98f*gallon*L; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:28:17.730

使用这行代码：

```
float my_var;
printf("Hi %f", &my_var); 
```

您将把地址打印到 my_var，即：它存储在内存中的位置。不是变量的值。我认为您对此感到困惑，因为您的 scanf 需要一个指向您要更新的值的存储位置的指针。对指针做一些阅读，它会更清楚一些。现在的解决方法是将您的`printf`陈述更改为：

```
float my_var;
printf("Hi %f", my_var); 
```

此外，您的加仑线需要在用户输入所有内容后移动，否则您只需在程序开始时将其乘以 0，它将保持为零而不是预期结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:20:26.080

您需要 2 处更改

```
 gallon = 3.785*L; 
```

需要移到所有的下方`scanfs`

第二个变化是打印`cost`而不是`&cost`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T08:06:22.553

你应该写下语句“gallon = 3.785*L;” 在从用户那里读取 L 之后，其他明智的加仑将变为零，因为 L 被初始化为零。因此，成本的值也变为零。

并从 printf 语句中删除“&”。这次肯定会奏效。

# java - 如何使用 API PdfReader？

> ID：13339622
> 
> 赞同：0
> 
> 时间：2012-11-12T07:14:34.687
> 
> 标签：java, pdf

我正在尝试使用 java 展平 pdf 表单文件。我正在使用 PdfReader api。但是，我看到了这些特定的错误：

```
PdfReader cannot be resolved to a type
PdfStamper cannot be resolved to  a type
AcroFields cannot be resolved to a type . 
```

谁能告诉我，我错过了什么罐子或发生这种情况的任何其他可能原因？

这是代码：

```
 import java.io.FileOutputStream;

        public class FormFillAndMakeItFlattenPDF {
            public static void main(String[] args) {
                try {
                    PdfReader reader = new PdfReader("SimpleRegistrationForm.pdf");
                    PdfStamper stamp2 = new PdfStamper(reader, new FileOutputStream("FormFillAndMakeItFlattenPDF.pdf"));
                    AcroFields form2 = stamp2.getAcroFields();
                    form2.setField("name", "your name");
                    form2.setField("address", "address");
                    form2.setField("postal_code", "code");
                    form2.setField("email", "youremail");
                    stamp2.setFormFlattening(true);
                    stamp2.close();
                }
                catch (Exception de) {
                    de.printStackTrace();
                }
            }
        } 
```

# java - 用于 if-else 语句的 cplex

> ID：13339623
> 
> 赞同：2
> 
> 时间：2012-11-12T07:14:36.330
> 
> 标签：java, cplex

我是 cplex 的新手。在我的 ilp 中，我有几个 if-else 语句。我想使用 cplex 使用 java API 解决我的问题。我不知道如何在 cplex 中制定 if-else。例子：

```
if x>0 then a=1
else if x=0 then a=0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:06:39.850

我不认为 Java API 支持 if/then/else 结构，但是可以执行 if/then

```
IloCplex cplex = new IloCplex();
IloNumVar x = cplex.numVar(-100, 100);
IloNumVar a = cplex.intVar(0, 1);

cplex.ifThen(cplex.ge(x, 100), cplex.eq(a, 1));
cplex.ifThen(cplex.eq(x, 0), cplex.eq(a, 0)); 
```

# asp.net-mvc-3 - .asmx webservice 与 asp.net mvc 3 应用程序并从 phonegap android 调用 webservice？

> ID：13339624
> 
> 赞同：0
> 
> 时间：2012-11-12T07:14:43.657
> 
> 标签：asp.net-mvc-3, web-services

我正在创建一个android phonegap 应用程序，为此我需要通过asp.net mvc3 应用程序中的web 服务从数据库中获取数据。我知道如何从 android phonegap 调用 web 服务，但在 asp.net mvc3 中创建 web 服务让我感到困惑。如何在 asp.net mvc3 中创建 web 服务并从 android phonegap 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:31:30.743

最简单、最快并且可能是最好的方法是[http://www.servicestack.net/](http://www.servicestack.net/)

您可以立即启动并运行 Web 服务

# java - BufferedReader.readLine() 不读取并挂起系统

> ID：13339630
> 
> 赞同：2
> 
> 时间：2012-11-12T07:15:42.287
> 
> 标签：java, jakarta-ee, streaming, buffer, bufferedreader

> **可能重复：**
> [BufferedReader.readLine() 不读取并挂起系统（等待）](https://stackoverflow.com/questions/13339424/bufferedreader-readline-do-not-read-and-hang-the-systemwait)

尝试导入 MYSQL 数据库，但在 BufferedReader.readLine() 方法中遇到问题，它使系统等待某些东西。代码在一段时间后导入数据库备份，但系统总是运行并且readLine方法不允许系统前进，并且在这段代码中输出来了。1 2 3 4 4a 和系统开始等待某事。任何解决方案提前致谢

```
public static boolean restoreDB(String dbName, String dbUserName, String dbPassword, String source) {
    String[] executeCmd = new String[]{"C:\\Program Files\\MySQL\\MySQL Server 5.5\\bin\\mysql", "--user=" + dbUserName, "--password=" + dbPassword, "-e", "source \"D:/khokher/medmax.sql\""};

    System.out.println("1 Processing Start");
    Process runtimeProcess = null;
    try {
        String line = "";
        System.out.println("2");

        runtimeProcess = new ProcessBuilder(executeCmd).start();
        System.out.println("3");

        InputStream istrm = runtimeProcess.getInputStream();
        InputStreamReader istrmrdr = new InputStreamReader(istrm);
        BufferedReader buffrdr = new BufferedReader(istrmrdr);
        System.out.println("4");
        String data;
        String st;
        System.out.println("4a");
        while (!(st=buffrdr.readLine()).isEmpty()) { // actual problem is in readLine Method it block system
        System.out.println("5 in loop");
        }

        int ev = 0 ;
        System.out.println("7 .waitFor()");
        if (runtimeProcess.waitFor() != 0) {
        ev = runtimeProcess.exitValue();
        System.out.println("8 process exitValue()");
        }else{
            System.out.println("9 Backup restored successfully");
            return true;
        }

    } catch(InterruptedException e){
        e.printStackTrace();
        System.out.println("10");
         Thread.currentThread().interrupt();
        return false;
    } catch (Exception ex) {
        ex.printStackTrace();
        System.out.println("11");
        Thread.currentThread().interrupt();
        return false;
    } finally { 
        System.out.println("processing stoped");
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:18:45.950

[`buffrdr.readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)EOF 时返回 null

`while (!(st=buffrdr.readLine()).isEmpty())`将抛出一个 NPE

如果你想在第一个空行之后停止阅读，你必须这样做：

```
while ((( st = buffrdr.readLine()) != null)  && ( ! st.trim().isEmpty())) 
```

如果没有抛出异常，则程序永远不会停止，因为进程`runtimeProcess`永远不会终止并且永远不会输出空行。

您应该阅读 的错误流`runtimeProcess`，因为它可能会使流饱和，挂起进程（如 EJP 所示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:24:03.700

@Aubin 指出 NPE 是完全正确的，但如果 readLine() 阻塞，则没有可用数据；换句话说，发件人没有发送。那可能是因为您没有关闭正在执行的进程的标准输入。也可能是因为您没有读取错误流。中断自己的线程也毫无意义。

# couchbase - Couchbase 工作流程

> ID：13339631
> 
> 赞同：4
> 
> 时间：2012-11-12T07:15:43.780
> 
> 标签：couchbase

我是使用 Couchbase 的新手，我想问一个有关 Couchbase 工作流程的问题。

我将许多项目放入 Couchbase（不是 memcached 数据桶）数据桶中。我对这些项目将在数据桶中直到到期时间吗？当它到达时，Couchbase 不会自动删除它们。只有当客户要求该项目时，才会实际删除该项目。在这种情况下，Couchbase 知道该项目已过期，返回 null 并从内存中删除项目。

这对我来说很重要，因为这会极大地影响我的解决方案如何理解缓存中丢失的项目。如果一切正常，那么只有当它尚未放入缓存或已过期或它在内存中并且服务器已重新启动时，它才会丢失。即使没有可用的 RAM，Couchbase 也会始终将项目放入缓存：它只会将其放入 HDD，对吗？

如果服务器重新启动，由于 RAM 不足而存储在 HDD 上的项目会发生什么情况？他们也会被抹去吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:35:41.327

正如您所说，数据将保留在 Couchbase 中，直到达到到期时间：-如果到期时间设置为 0：数据将一直保留到应用程序调用 delete() 操作-如果到期时间设置为 X：数据将留在 Couchbase 中，直到达到 X（以秒为单位），Couchbase 服务器将自动失效并删除该值。

我不明白你为什么说“当它到达时，Couchbase 不会自动删除它们”，Couchbase 确实会自动删除过期项目：无论是当您尝试访问过期项目还是使用其自己的内部流程时，看看[http://www.couchbase.com/docs/couchbase-devguide-2.0/about-ttl-values.html](http://www.couchbase.com/docs/couchbase-devguide-2.0/about-ttl-values.html)

因此，当您说仅当密钥不存在时（从未创建或自动从 Couchbase 中删除或使用显式 delete() 删除）时，您是正确的

Couchbase 会将项目首先放在 RAM 中，然后将其写入磁盘。Couchbase 负责管理内存，并尽最大努力将最常用的项目保存在内存中。因此，您显然可以管理比 RAM 容量更多的数据，您只需保持良好的平衡即可获得良好的性能并避免 I/O。

当服务器重新启动时，Couchbase 将所有数据保存在磁盘上，并在启动期间使用密钥和元数据填充内存。所以你不会失去任何东西。

我邀请您阅读这些关于 Couchbase 架构的有趣文章/文档： - [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-introduction-architecture.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-introduction-architecture.html) - [http://horicky.blogspot.fr /2012/07/couchbase-architecture.html](http://horicky.blogspot.fr/2012/07/couchbase-architecture.html)

如果您需要更多信息，请与我们联系。

拖船

# php - 通过 subject_id 获取讲师姓名

> ID：13339634
> 
> 赞同：1
> 
> 时间：2012-11-12T07:16:13.273
> 
> 标签：php, mysql

大家好，我的 mySQL 查询有问题。请查看我的表格和当前查询。

表“教员”

```
---------------------------------------------
id |firstname |     lastname    | subject_id|
---------------------------------------------
1    Juan         Dela Cruz            1
2    Antonio      Brigada              2
-------------------------------------------- 
```

表“主题”

```
---------------
id |   name   |
---------------
1    English
2    Math
3    Science
-------------- 
```

我当前的查询

```
public function instructor(){
global $database;

$sql = "SELECT instructors.firstname as firstname, instructors.lastname as lastname ";
$sql .= "FROM subjects ";
$sql .= "JOIN instructors ";
$sql .= "WHERE subjects.id = instructors.subject_id";

$result = $database->query($sql);

while($instructor = $database->fetch_array($result)){
    if (isset($instructor['firstname']) && isset($instructor['lastname'])){
            return $instructor['lastname'] . " " . $instructor['firstname'];
    } else {
        return "N/A";
    }

    }
} 
```

结果：

```
English    Juan Dela Cruz
Math       Juan Dela Cruz
Science    Juan Dela Cruz 
```

**编辑**

当前的sql：

```
public function instructor(){
global $database;

$sql = "SELECT  a.name, ";
$sql .= "COALESCE(CONCAT(b.firstname, ' ',b.lastname), 'N/A') as ins_name ";
$sql .= "FROM subjects a ";
$sql .= "LEFT JOIN instructors b ";
$sql .= "ON a.id = b.subject_id";

$result = $database->query($sql);

   while($instructor = $database->fetch_array($result)){
      return $instructor['ins_name'];
   }
} 
```

结果

```
English    Juan Dela Cruz
Math       Juan Dela Cruz
Science    Juan Dela Cruz 
```

它应该是什么：

```
English    Juan Dela Cruz
Math       Antonio Brigada
Science    N/A 
```

调用讲师（）函数

```
<?php foreach($subjects as $subject): ;?>
  <tr class="subject_list">
    <td><?php echo $subject->name; ?></td> // This will show all subjects
    <td><?php echo $subject->instructor(); ?></td> // This will show instructor foreach subjects
  </tr>
<?php endforeach; ?> 
```

我希望任何人都可以帮助我看到上面的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:17:43.083

`LEFT JOIN`是你需要的

```
SELECT  a.name, 
        COALESCE(CONCAT(b.firstName, ' ',b.LastName), 'N/A')
FROM    subjects a
        LEFT JOIN instructors b
            ON a.ID = b.Subject_ID 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/3f7a9/1)

# intellij-idea - 从 intellij Idea 11 运行 Tomcat 7 时出错

> ID：13339640
> 
> 赞同：1
> 
> 时间：2012-11-12T07:16:52.827
> 
> 标签：intellij-idea

我正在使用带有 IDE Intellij Idea 11 的 Java 7 和 Tomcat 7。我正在使用窗口 7。我的应用程序已从 Intellij Idea 11 成功编译，但是当我尝试从 Intellij Idea 以运行或调试模式运行它时，我得到了以下错误：

运行 Tomcat 7 时出错：无法加载 C:\Users\USERNAME.intellijIdea11\system\tomcat\Unnamed_ohm\conf\web.xml

结果，它没有启动我的应用程序。我检查了上面指定的路径中确实存在 web.xml。

你能帮我解决我所缺少的以及应该做些什么来解决这个问题。

提前致谢

# perl - Perl在文本文件中查找和替换反斜杠

> ID：13339641
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:17:00.580
> 
> 标签：perl, file, edit, backslash

我有一个要输入 MySQL 表的文件。遗憾的是，该文件包含双引号 (") 和反斜杠 ()。我在 Perl 中找到了一种查找和替换双引号的方法（或者我认为），但似乎无法弄清楚如何删除所有愚蠢的反斜杠。

有没有人有任何想法？这是片段的样子......对不起，我是个菜鸟，我还在学习！

```
open(FILE,$fileName) || die("Cannot Open File");
my(@fcont) = <FILE>;
close FILE;

my $searchStr1=qq{"};
my $replaceStr1=qq{ };

open(FOUT,">$fileName") || die("Cannot Open File");
foreach $line (@fcont) {
    $line =~ s/$searchStr1/$replaceStr1/g;
    print FOUT $line;
}

#not sure if searching for backslash will work
my $searchStr2="\\";
my $replaceStr2=qq{ };

open(FOUT,">$fileName") || die("Cannot Open File");
foreach $line (@fcont) {
    $line =~ s/$searchStr2/$replaceStr2/g;
    print FOUT $line;
}

close FOUT; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:38:01.163

当用一个文字字符串替换另一个字符串时，使用[`tr///`](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)而不是更有效`s///g`：

```
$line =~ tr{"\\}{' }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:55:38.833

将 " 或 \ 替换为空白

```
$line =~ s/"|\\/ /g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:32:34.993

如果将搜索模式放在双引号变量中，则需要在反斜杠上加倍：

```
my $searchStr2="\\\\"; 
```

然后变量将包含`\\`，因此正则表达式仍然有两个反斜杠，第一个转义第二个，以便它匹配文字反斜杠。

# javascript - 禁用 Javascript 按钮

> ID：13339649
> 
> 赞同：0
> 
> 时间：2012-11-12T07:18:16.600
> 
> 标签：javascript

提供的以下代码用于在我的网站上购买包裹。有关我的问题的示例，请访问[http://www.gldesert.com/donate/packages/ranks/?checkbox1=on&checkbox2=on&checkbox3=on&submit=PROCEED+%3AD](http://www.gldesert.com/donate/packages/ranks/?checkbox1=on&checkbox2=on&checkbox3=on&submit=PROCEED+%3AD)。单击“添加到购物车”按钮时，它会打开 Buycraft 的弹出窗口，这是一个 Minecraft 购物车。但是，如果您将另一个项目添加到购物车，它会关闭弹出窗口。如何保持打开状态？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<html class="no-js" lang="pt-BR" dir="ltr" xml:lang="pt-BR">
<meta name="google" value="notranslate">    
    <link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/css/ranksstyle.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/css/grid.css" type="text/css" media="screen">    
    <script src="/js/jquery-1.6.2.min.js" type="text/javascript"></script> 
    <script src="/js/jquery.easing.1.3.js" type="text/javascript"></script>
    <script src="/js/tms-0.3.js" type="text/javascript"></script>
    <script src="/js/tms_presets.js" type="text/javascript"></script>
    <script src="/js/cufon-yui.js" type="text/javascript"></script>
    <script src="/js/cufon-replace.js" type="text/javascript"></script>
    <script src="/js/FF-cache.js" type="text/javascript"></script>
    <script src="/js/Kozuka_Gothic_Pro_OpenType_700.font.js" type="text/javascript"></script>        
    <script src="/js/Kozuka_Gothic_Pro_OpenType_500.font.js" type="text/javascript"></script>            
    <script src="/js/tabs.js" type="text/javascript"></script>      
    <script src="/js/superfish.js" type="text/javascript"></script>         
    <script src="/js/jquery.mousewheel.js" type="text/javascript"></script>              
    <script src="/js/jScrollPane.js" type="text/javascript"></script>         
    <script src="/js/script.js" type="text/javascript"></script> 
    <script src="/js/jquery.iframe.js"></script>   
    <script src="/js/jquery.collapse.js"></script> 

<style type="text/css"> 
.menutitle{ 
cursor:pointer; 
margin-bottom: 5px; 
background-color:#ECECFF; 
color:#000000; 
width:140px; 
padding:2px; 
text-align:center; 
font-weight:bold; 
/*/*/border:1px solid #000000;/* */ 
} 

.submenu{ 
margin-bottom: 0.5em; 
} 
</style>   
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30249399-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30249399-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript"> 

var persistmenu="no" //"yes" or "no". Make sure each SPAN content contains an incrementing ID starting at 1 (id="sub1", id="sub2", etc) 
var persisttype="sitewide" //enter "sitewide" for menu to persist across site, "local" for this page only 

if (document.getElementById){ //DynamicDrive.com change 
document.write('<style type="text/css">\n') 
document.write('.submenu{display: none;}\n') 
document.write('</style>\n') 
} 

function SwitchMenu(obj){ 
if(document.getElementById){ 
var el = document.getElementById(obj); 
var ar = document.getElementById("masterdiv").getElementsByTagName("span"); //DynamicDrive.com change 
if(el.style.display != "block"){ //DynamicDrive.com change 
for (var i=0; i<ar.length; i++){ 
if (ar[i].className=="submenu") //DynamicDrive.com change 
ar[i].style.display = "none"; 
} 
el.style.display = "block"; 
}else{ 
el.style.display = "none"; 
} 
} 
} 

function get_cookie(Name) { 
var search = Name + "=" 
var returnvalue = ""; 
if (document.cookie.length > 0) { 
offset = document.cookie.indexOf(search) 
if (offset != -1) { 
offset += search.length 
end = document.cookie.indexOf(";", offset); 
if (end == -1) end = document.cookie.length; 
returnvalue=unescape(document.cookie.substring(offset, end)) 
} 
} 
return returnvalue; 
} 

function onloadfunction(){ 
if (persistmenu=="yes"){ 
var cookiename=(persisttype=="sitewide")? "switchmenu" : window.location.pathname 
var cookievalue=get_cookie(cookiename) 
if (cookievalue!="") 
document.getElementById(cookievalue).style.display="block" 
} 
} 

function savemenustate(){ 
var inc=1, blockid="" 
while (document.getElementById("sub"+inc)){ 
if (document.getElementById("sub"+inc).style.display=="block"){ 
blockid="sub"+inc 
break 
} 
inc++ 
} 
var cookiename=(persisttype=="sitewide")? "switchmenu" : window.location.pathname 
var cookievalue=(persisttype=="sitewide")? blockid+";path=/" : blockid 
document.cookie=cookiename+"="+cookievalue 
} 

if (window.addEventListener) 
window.addEventListener("load", onloadfunction, false) 
else if (window.attachEvent) 
window.attachEvent("onload", onloadfunction) 
else if (document.getElementById) 
window.onload=onloadfunction 

if (persistmenu=="yes" && document.getElementById) 
window.onunload=savemenustate 

</script> 
<body>
<center>
<div class="main">
  <header>
        <div class="inner">
            <div class="container">
                <h1><a href="/">GLD</a></h1>
                <ul class="login_panel">
                    <li></li>
                    <li></li>
                </ul>
                <ul class="links">
                <img style="width: 360px; height: 75px;" src="http://cache.multiplayuk.com/b/1-218175-560x95-2173-FFD117-FFFFFF.png" alt="" />
                </ul>
            </div>
        </div>        <div class="menu_block">
            <div class="container">
                <nav>
                    <ul class="sf-menu">
                        <li class="active"><a href="/donate">Donate</a>
                        <li><a href="/donate/packages/special">Special Packages!</a></li>
                        <li><a href="/donate/packages/upgrades">Rank Upgrades</a></li>
                        <li><a href="/donate/packages/mcmmo">McMMO Points</a></li>
                        <li><a href="/donate/packages/lightstones">Lightstones</a></li>
    <p>&nbsp;</p>
                    </ul>
                    <div class="clear"></div>
                </nav>
            </div>
        </div>
</a>
</b>
</ul>
<div id="main"></li>
<center>
<div id="main"></li>
    <center>
    <p>&nbsp;</p>
    <p>&nbsp;</p> 
<div class="block small left" style="width:99%;">               
        <table cellpadding="0" cellspacing="0" width="99%">
<div id="masterdiv"> 

<div onclick="SwitchMenu('sub1')"></div> 
<span class="submenu" id="sub1"> 
<h2>
<script>
$("iframe").src(url, optionalCallback, options); $("iframe").squirt(html, optionalCallback, options);
</script>
<script>
$("<iframe name='ajaxForm' />").src("http://gldesert.com/donate/transfer.php").attr('scrolling','no').width("1000").height("620").appendTo("h2");

$("iframe").src("http://gldesert.com/donate/transfer.php", function(iframe, duration) {;
}, {
  timeout: function() { alert("Oh no! The donation page is having an issue :( It will surely get fixed soon! Check back later and tell Joan!"); },
  timeoutDuration: 10000
});
</script>
</h2>
            <tbody>

                        <tr>
                            <td style="text-align:left;"><strong>Sand Traveler</strong></td>
                            <td style="text-align:right;"><strong>4.99 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2511" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>                                   
                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #7FF07F;">VIP</span></strong></td>
                            <td style="text-align:right;"><strong>14.99 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2489" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>               
                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #00BF00;">Premium</span></strong></td>
                            <td style="text-align:right;"><strong>29.99 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2517" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>                       
                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #5252FA;">Exiled</span></strong></td>
                            <td style="text-align:right;"><strong>39.99 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2520" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>

                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #B500B5;">Captain [Most Popular!]</span></strong></td>
                            <td style="text-align:right;"><strong>69.99 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2521" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #00AAAA;">Veteran! [NEW!]</span></strong></td>
                            <td style="text-align:right;"><strong>99.00 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/70786" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #E3C100;">1337</span></strong></td>
                            <td style="text-align:right;"><strong>133.70 USD</strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2522" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>

                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #FF5757;">Desert Sage</span></strong></td>
                            <td style="text-align:right;"><strong>79.99! <del>159.99 USD</del></strong></td>            
sale                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/2524" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;"><strong><span style="color: #0000E3;">Dark King</span></strong></td>
                            <td style="text-align:right;"><strong>99.99! <del>199.99 USD</del></strong></td>            
                            <td style="text-align:right;">
                                <form method="POST" action="https://buycraft.net/redirect/addcart/2031/3100" target="ajaxForm">
                                    <input type="submit" value="Add to Cart" class="submit" class="menutitle" onclick="SwitchMenu('sub1')">
                                </form>
                            </td>
                        </tr>

</center>
</body>
      </li>
      </ul>
    </blockquote>
    </div>
<h3><p style="color:#FF0000">IMPORTANT!: Please Do NOT Use Internet Explorer! It will not work...!  CHROME, FIREFOX, ETC WILL WORK!</p></h3>
<h3><p style="color:#FF0000">IF YOU REALLY MUST, GO TO THIS PAGE:<a href="http://gldesert.buycraft.net/">CLICK HERE</a></p></h3>
<h3><a><p style="color:#FF0000">50% OFF DESERT SAGE & DARK KING!</a></p></h3>
<br> 

</span> 

</div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:21:48.073

我的朋友，你应该从根本上减少你的 JavaScript 堆栈。首先，从 font-face 而不是 cufon 开始。然后，使用较新版本的 jquery。然后，看看会发生什么。

你那里的脚本太多了。错误和冲突是意料之中的。另外，我注意到您在代码中使用了“getElementById”。您的页面中有 jquery。用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:26:58.230

即使你保持它以这种方式启用整个系统功能，它也会给你一个错误：

> 该包裹已经存在于篮子中。

一旦他/她进行结帐，用户应该可以选择更改商品数量。我相信，如果您仍想启用“按钮”，则还需要调整服务器端脚本，因为它会返回错误...

# ruby-on-rails - has_many ：通过现有对象

> ID：13339654
> 
> 赞同：1
> 
> 时间：2012-11-12T07:18:32.243
> 
> 标签：ruby-on-rails, activerecord, associations, has-many-through

[与这个](https://stackoverflow.com/questions/13170183/has-many-through-association-with-existing-object-activerecord)问题非常相似，但并不完全相同。

我有音乐家和乐器模型：

```
# musician.rb
class Musician < ActiveRecord::Base
  attr_accessible :instrument_attributes
  has_many :instrument_choices
  has_many :instruments, through: instrument_choices
  accepts_nested_attributes_for :instruments # with some other stuff
end

# instrument.rb
class Instrument < ActiveRecord::Base
  has_many :inverse_instrument_choices, class_name: "InstrumentChoice"
  has_many :musicians, through: :inverse_instrument_choices
  validates_uniqueness_of :name

# instrument_choice.rb
class InstrumentChoice < ActiveRecord::Base
  belongs_to :musician
  belongs_to :instrument
  validates_uniqueness_of :musician_id, scope: :instrument_id 
```

我有一个可能的工具的静态列表，用户在新视图和编辑视图中的选择表单中从该列表中进行选择。假设所有这些工具都有现有记录。我如何处理在音乐家和乐器之间添加新的关联？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:32:33.117

您可以`InstrumentChoice`通过关联或直接创建记录来创建：

```
musician.instrument_choices.create(instrument: an_instrument)
# or
InstrumentChoice.create(musician: a_musician, instrument: an_instrument) 
```

由于您实际上并没有在其中存储任何其他信息，`InstrumentChoice`因此可以使用不需要自己的模型的简单连接表：

```
class Musician < ActiveRecord::Base
  has_and_belongs_to_many :instruments
end

class Instrument < ActiveRecord::Base
  has_and_belongs_to_many :musicians
end

musician.instruments << an_instrument 
```

为了确保唯一性，您可以向连接表添加唯一约束。

# redhat - rhev 使用什么许可证？

> ID：13339655
> 
> 赞同：0
> 
> 时间：2012-11-12T07:18:33.090
> 
> 标签：redhat

rhev 是 redhat 的虚拟化产品，它不是免费使用的。我找到了踪迹 ISO，但我没有找到源代码。

1.  那么 rhev 使用的许可证是什么？
2.  它是开源的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:19:30.007

ovirt.org 的上游版本是完全开源的

# java - Jrxml 无法通过 Jar 文件读取

> ID：13339663
> 
> 赞同：1
> 
> 时间：2012-11-12T07:19:17.530
> 
> 标签：java, filesystems, jasper-reports, embedded-resource

我想使用 Jasper 制作报告，所以我将 .jrmxl 文件作为资源。我用这段代码来阅读 .jrxml ：

```
JasperDesign jasperDesign = JasperManager.loadXmlDesign(new File(".").getAbsolutePath()+ "\\report\\reportPdf.jrxml"); 
```

该代码运行良好，报告也出现了。

我的问题是当我将程序导出到 .jar 文件时，出现错误，并且在上面的行代码中显示“未知资源”。所以我很担心为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:28:15.923

该报告现在将是一个嵌入式资源，不能由`File`.

您需要获得一个`URL`，获得一个`InputStream`并调用[`loadXmlDesign(InputStream)`](http://www.javadocexamples.com/net/sf/jasperreports/engine/net.sf.jasperreports.engine.JasperManager.html#loadXmlDesign%3aInputStream)（或非弃用的变体 - 请参阅文档）。

# php - PHP - 计算两个日期之间的天数 - 在 2013 年 3 月和 4 月不工作

> ID：13339664
> 
> 赞同：2
> 
> 时间：2012-11-12T07:19:17.840
> 
> 标签：php, date

我的 PHP 函数有问题。它一直工作到现在，当我需要计算日期 2013-03-28 和 2013-04-01 之间的天数（或更准确地说是夜数）时。结果应该是 4（03/28 到 03/29、03/29 到 03/30、03/30 到 03/31 和 03/31 到 04/01）并且我的函数返回 3。（当我使用 2012- 03-28 和 2012-04-01 而不是 2013 年的相同日期，它可以正常工作）。你能帮我吗？

```
function termLength($dateFrom, $dateTo) {
  $dateFrom = (($dateFrom instanceof DateTime) ? $dateFrom : new DateTime($dateFrom));
  $dateTo = (($dateTo instanceof DateTime) ? $dateTo : new DateTime($dateTo));

  $difference = $dateTo->format('U') - $dateFrom->format('U');
  return floor($difference / (60 * 60 * 24));
}

echo termLength('2013-03-28', '2013-04-01');

// output: 3
// it should be: 4 
```

你能帮我吗？谢谢，J。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:23:01.407

如果您仍然使用`DateTime`，请使用以下`DateInterval`机制：

```
$diff = $dateFrom->diff($dateTo);
echo $diff->format('%a'); 
```

[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:23:12.280

试试这个：

```
$start = strtotime('2013-03-28');
$end = strtotime('2013-04-01');

$days_between = ceil(abs($end - $start) / 86400); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:33:26.847

我建议您将其转换为时间戳，计算差异然后将其转换回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:33:57.040

```
round(($end_date - $start_date), 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T07:36:47.503

**功能体：**

```
function dateDifference($startDate = '', $endDate = '') {
  $startDateConverted = strtotime($startDate);
  $endDateConverted = strtotime($endDate);
  $substractedDate = $endDateConverted - $startDateConverted;
  $substractedDate = max(intval($substractedDate), 0);
  $dateDifference = round(abs($substractedDate) / 86400);
  return $dateDifference;
} 
```

**称呼 ：**

```
echo dateDifference('2013-03-28', '2013-04-01'); 
```

**输出 ：**

```
4 
```

# r - 如何用R中的第5个和第95个百分位值替换异常值

> ID：13339685
> 
> 赞同：9
> 
> 时间：2012-11-12T07:21:21.190
> 
> 标签：r, dataset, outliers, quantile

我想分别用这些百分位值替换我相对较大的**R数据集中的所有值，这些值的值高于第 95 个百分位和低于第 5 个百分位。**我的目标是避免简单地从数据中完全裁剪这些异常值。

任何建议将不胜感激，我在其他任何地方都找不到有关如何执行此操作的任何信息。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-12T07:32:47.910

这样就可以了。

```
fun <- function(x){
    quantiles <- quantile( x, c(.05, .95 ) )
    x[ x < quantiles[1] ] <- quantiles[1]
    x[ x > quantiles[2] ] <- quantiles[2]
    x
}
fun( yourdata ) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-12T08:01:18.647

您可以使用以下代码在一行代码中完成`squish()`：

```
d2 <- squish(d, quantile(d, c(.05, .95))) 
```

* * *

在 scales 库中，查看`?squish`和`?discard`

```
#--------------------------------
library(scales)

pr <- .95
q  <- quantile(d, c(1-pr, pr))
d2 <- squish(d, q)
#---------------------------------

# Note: depending on your needs, you may want to round off the quantile, ie:
q <- round(quantile(d, c(1-pr, pr))) 
```

例子：

```
d <- 1:20
d
# [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

d2 <- squish(d, round(quantile(d, c(.05, .95))))
d2
# [1]  2  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 19 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T07:34:22.627

我用这段代码来得到你需要的东西：

```
qn = quantile(df$value, c(0.05, 0.95), na.rm = TRUE)
df = within(df, { value = ifelse(value < qn[1], qn[1], value)
                  value = ifelse(value > qn[2], qn[2], value)}) 
```

`df`您的 data.frame 和`value`包含您的数据的列在哪里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-26T03:50:24.337

有更好的方法来解决这个问题。离群值不是超过 95% 或低于 5% 的任何点。相反，如果离群值低于第一个四分位数 – 1.5·IQR 或高于第三个四分位数 + 1.5·IQR，则视为异常值。
[本网站将详细解释](http://www.mathwords.com/o/outlier.htm)

[要了解有关异常值处理的更多信息，请参阅此处](http://r-statistics.co/Outlier-Treatment-With-R.html)

```
capOutlier <- function(x){
   qnt <- quantile(x, probs=c(.25, .75), na.rm = T)
   caps <- quantile(x, probs=c(.05, .95), na.rm = T)
   H <- 1.5 * IQR(x, na.rm = T)
   x[x < (qnt[1] - H)] <- caps[1]
   x[x > (qnt[2] + H)] <- caps[2]
   return(x)
}
df$colName=capOutlier(df$colName)
Do the above line over and over for all of the columns in your data frame 
```

# iphone - iOS6中IAD打开位置奇怪

> ID：13339690
> 
> 赞同：1
> 
> 时间：2012-11-12T07:21:36.017
> 
> 标签：iphone, ios, iad

我在我的应用程序中添加了一个 ADBannerView。当将屏幕旋转为横向时，我将 ADBannerView 更改为水平框架，如下所示： ![在此处输入图像描述](../Images/ea99b33ee796f7ed2660c6c266d0c0ac.png)

但是在iOS6中点击它时，iad会在一个奇怪的位置打开： ![在此处输入图像描述](../Images/3d28c40d5f93ab41e9bfb34f35228607.png)

在 iOS4/5 中没有这个问题。

为什么以及如何解决？我将我的代码上传到[https://github.com/OpenFibers/GPSAlarm](https://github.com/OpenFibers/GPSAlarm)

特别感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:48:45.450

正如在 iOS6 中，Apple 改变了管理设备方向的方式。在 iOS6 中，您应该使用新方法来管理 iOS6 中引入的方向。问题背后的原因是您的代码`WillAnimate`可能不会在设备旋转时调用。

因此，您应该使用以下 iOS6 版本中引入的方法。

```
 - (BOOL)shouldAutorotate
  {
    return  YES;
   }

 - (NSUInteger)supportedInterfaceOrientations
  {
   return  UIInterfaceOrientationMaskAll;
  } 
```

**如果您希望整个应用程序旋转，那么您应该将 Info.plist 设置为支持所有方向。在您支持整个方向的情况下，您可以通过编辑`.Plist`应用程序文件来允许，正如我在下面的快照中所做的那样。**

![在此处输入图像描述](../Images/f64a2d3c2925451ad2c6e48541b7ff45.png)

**现在，如果您只想更改特定视图所需的方向，则必须执行某种子类并覆盖自动旋转方法以仅返回所需的方向。**

[这是示例如何做同样的事情..](https://stackoverflow.com/questions/13023936/orientation-issue-in-ios-6/13024015#13024015)

有关更多信息，您应该对此进行查看。

[这里是..！！！](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

**编辑：正如您解释的那样，在横向模式下单击 iAD，广告屏幕突然发生尴尬的事情。因为苹果在 iPhone 和 iPad 上的测试广告都是纵向的。真正的广告可能会支持横向模式。这里有太多与同一问题相关的线程。所以你不用担心。**

[这里是..！！！](https://stackoverflow.com/questions/4280124/iad-on-ipad-landscape-iad-not-oriented-correctly).

[另一个相同。](https://stackoverflow.com/questions/5785147/iad-landscape-strange-view-behavior).

[另一个重要的链接](https://stackoverflow.com/questions/3166977/iad-left-white-blank-screen-after-closed)

我希望以上解决方案可以帮助你.!!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:37:18.170

在 IOS 6 中，您的应用程序委托中的 UIKIT 框架发生了变化，请使用这些代码来设置您的 rootviewcontroller

```
if ( [[UIDevice currentDevice].systemVersion floatValue] < 6.0)
{
    //  addSubView doesn't work on iOS6
    self.window.rootViewController = navigationContoller;
}
else{
    // use this mehod on ios6
    [self.window setRootViewController:navigation];
} 
```

# java - Java 日历日期检查

> ID：13339691
> 
> 赞同：0
> 
> 时间：2012-11-12T07:21:45.337
> 
> 标签：java

最近我收到一封邮件，说 2012 年 12 月是一个特殊的月份。这个月有五个星期六、五个星期天和五个星期一。它还说这只会在大约 700 年中发生一次。所以，我需要检查在 2000 到 2100 之间分别有多少个月有五个星期六、星期日和星期一。

这可以通过java（特别是使用Calander API）来实现吗？

任何带有示例代码的想法都将是可观的。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T07:28:25.010

对于任何一个月有 5 个（星期六、星期日、星期一），它必须：

*   有 31 天（4 整周和额外的 3 天）
*   周六开始（最后三天必须是第五个周六、周日、周一）

`java.util.Calendar`即使在根本上被破坏的API中，这两项检查也应该相当容易。（无论您有什么选择，都喜欢[Joda Time](http://joda-time.sf.net)。）如果您在实施其中一个时遇到困难，您应该发布一个*特定*的问题，向我们展示到目前为止您已经走了多远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:50:21.760

请检查以下代码：

```
/**
 * Print all the months which has five Mondays, Saturdays and Sundays
 * @param from year from
 * @param to year to
 */
public void printMonths(int from, int to) {
    List<String> monthList = new ArrayList<String>();
    for (int year =from; year<=to;year++) {
        monthList.addAll(getMonth(year));
    }

    for (String s : monthList) {
        System.out.println(s);
    }
}

/**
 * Get month with five sundays, saturdays and mondays
 * @param year
 * @return
 */
private List<String> getMonth(int year) {
    List<String> monthList = new ArrayList<String>();
    for (int month = 0; month < 12; month++) {
        if (check(year, month)) {
            monthList.add("" + year + "-" + (month+1));
        }
    }
    return monthList;       
}

private boolean check(int year, int month) {
    return checkFiveDays(year, month, 1) && checkFiveDays(year, month, 2) 
    && checkFiveDays(year, month, 7);

}

private boolean checkFiveDays(int year, int month, int dayOfWeek) {
    Calendar c = Calendar.getInstance();
    c.set(year, month, 0, 0, 0, 0);
    int times = 0;
    do {
        if (c.get(Calendar.DAY_OF_WEEK) == dayOfWeek) {
            times++;
        }
        c.add(Calendar.DAY_OF_MONTH, 1);
    } while (c.get(Calendar.MONTH)== month);

    return times == 5;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T09:49:05.283

实际上一个月有 5 个（星期六、星期日或星期一）没有必要有 31 天，请参阅 2012 年 9 月（即使是 2020 年等某些闰年的 2 月也可以有 5 个星期六）。甚至没有从那天开始的月份，请参阅：2013 年 3 月，周六案例。
使用 Joda 可以很容易地计算 2000 到 2100 之间的所有此类情况，例如：

```
DateTimeFormatter dateParser = DateTimeFormat.forPattern("yyyy");                                                            
DateTime startDate = dateParser.parseDateTime("2000");                                                                       
DateTime stopDate = dateParser.parseDateTime("2100");                                                                        
DateTime date = startDate;                                                                                                   
DateTime lastInMonth;                                                                                                        
if (date.getDayOfWeek() != DateTimeConstants.SATURDAY)                                                                       
    date = date.plusWeeks(1).withDayOfWeek(DateTimeConstants.SATURDAY);                                                      
int count = 0;                                                                                                               
while (date.isBefore(stopDate)) {                                                                                            
    if (date.getDayOfWeek() != DateTimeConstants.SATURDAY) //if it's not starting on Saturday                                
        date = date.plusWeeks(1).withDayOfWeek(DateTimeConstants.SATURDAY); //jump to the first Saturday                     
    lastInMonth = date.plusWeeks(4); //jump 4 weeks                                                                          
    if (date.getMonthOfYear() == lastInMonth.plusDays(2).getMonthOfYear()) { //check if we are still on the same month       
        count++;                                                                                                             
        // System.out.println("date = " + date); //uncomment to see each such month                                             
    }                                                                                                                        
    date = date.plusMonths(1); //advance a month                                                                             
    date = date.withDayOfMonth(1); //start on the first day                                                                  
}                                                                                                                            
System.out.println("Between " + startDate + " and " + stopDate + " there are " + count + " months that have five Saturdays"); 
```

`once in some 700 years only`这并不完全正确，即使我们只计算 12 月份。

# node.js - NodeJS w/Express 错误：无法获取 /

> ID：13339695
> 
> 赞同：73
> 
> 时间：2012-11-12T07:22:42.387
> 
> 标签：node.js, get, express

这就是我所拥有的，文件名“default.htm”实际上存在并在使用 NodeJS 执行 readFile 时加载。

```
var express = require('express');
var app = express();

app.use(express.static(__dirname + '/default.htm'));

app.listen(process.env.PORT); 
```

错误（在浏览器中）：

```
Cannot GET / 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-12T07:31:54.367

您通常希望像这样呈现模板：

```
app.get('/', function(req, res){
  res.render('index.ejs');
}); 
```

但是，您也可以提供静态内容 - 为此使用：

```
app.use(express.static(__dirname + '/public')); 
```

现在`/public`，您项目目录中的所有内容都将作为静态内容交付到您网站的根目录，例如，如果您放置`default.htm`在公共文件夹中，是否可以通过访问`/default.htm`

查看[express API](http://expressjs.com/api.html)和[Connect Static 中间件](http://www.senchalabs.org/connect/static.html)文档以获取更多信息。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-12T07:28:03.110

您需要定义根路由。

```
app.get('/', function(req, res) {
  // do something here.
}); 
```

哦，你不能在`express.static`. 它必须是一个目录。将`app.get('/'....`负责相应地呈现该文件。您可以使用 express 的渲染方法，但您必须添加一些配置选项来告诉您的视图在哪里，通常在`app/views/`文件夹中。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-06-06T21:15:46.687

我注意到我忘记了路线开头的“斜线”，如下所示，我得到了同样的错误：

错误的 ：

```
app.get('api/courses',  (req, res) => { ... }
) 
```

正确的 ：

```
 app.get('/api/courses',  (req, res) => { ... }
    ) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-05-21T19:52:10.390

我有同样的问题，所以这就是我想出的。这是我运行时的文件夹结构`node server.js`

```
app/
  index.html
  server.js 
```

打印出`__dirname`路径后，我意识到该`__dirname`路径是我的服务器运行的位置（`app/`）。

所以，你的问题的答案是这样的：

如果您的`server.js`文件与您尝试渲染的文件位于同一文件夹中，则

```
app.use(express.static(__dirname + '/default.htm')); 
```

实际上应该是

```
app.use(express.static(__dirname)); 
```

* * *

如果您有这样的文件夹树，您唯一想要使用原始语法的情况是：

```
app/
  index.html
server.js 
```

where`index.html`是在`app/`目录中，而`server.js`是在根目录中（即与目录同级`app/`）。

总体而言，您的代码**可能**如下所示：

```
var express = require('express');

var app = express();

app.use(express.static(__dirname));

app.listen(process.env.PORT); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-09-24T14:57:49.587

我发现自己在此页面上，因为我也收到了`Cannot GET/`消息。我的情况有所不同，因为我`express.static()`用来定位文件夹，正如以前的答案中所提供的那样，而不是像 OP 那样的文件。

[在对 Express 的文档](http://expressjs.com/en/api.html)进行一些挖掘之后，我发现`express.static()`将其索引文件定义为`index.html`，而我的文件名为`index.htm`.

要将其与 OP 的问题联系起来，有两种选择：

1：使用其他答案中建议的代码

```
app.use(express.static(__dirname)); 
```

然后将`default.htm`文件重命名为`index.html`

或者

2：`index`调用时添加属性，将`express.static()`其定向到所需的索引文件：

```
app.use(express.static(__dirname, { index: 'default.htm' })); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-12T07:32:04.267

“/”的获取方法在哪里？

您也不能直接在 Express 中提供静态 html。首先您需要对其进行配置。

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);  
  app.set("view options", {layout: false});  //This one does the trick for rendering static html
  app.engine('html', require('ejs').renderFile); 
  app.use(app.router);

}); 
```

现在添加您的 get 方法。

```
app.get('/', function(req, res) {
  res.render('default.htm');
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-15T14:49:47.897

我遇到过同样的问题。通过像下面这样的小改动解决了它。

```
var express = require('express');
var app = express();
app.use(express.static(path.join(__dirname, 'public'))); 
```

从[这里获得帮助（ExpressJS 文档 - 提供静态文件）。](https://expressjs.com/en/starter/static-files.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-06T02:46:15.137

在我的例子中，静态内容已经被提供：

```
app.use('/*', express.static(path.join(__dirname, '../pub/index.html'))); 
```

...应用程序中的所有内容似乎都以某种方式依赖于此。( `path`dep 是`require('path')`)

所以，a）是的，它可以是一个文件；b）您可以[进行重定向](https://expressjs.com/en/4x/api.html#res.redirect)！

```
app.get('/', function (req, res) { res.redirect('/index.html') }); 
```

现在任何人点击`/`get`/index.html`都是从`../pub/index.html`.

希望这对其他人有帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-26T11:00:28.097

```
var path = require('path'); 
```

更改 `app.use(express.static(__dirname + '/default.htm'));`为 `app.use(express.static(path.join(__dirname + '/default.htm')));`。

此外，请确保将其指向 default.html 的正确路径。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-01T10:22:23.967

`app.get`如果不工作，您需要重新启动该过程。按`ctl+c`，然后按`restart`节点应用程序。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-10T11:30:46.787

您需要在 index.html 文件中添加一个返回值。

`app.use(express.static(path.join(__dirname, 'build')));`

`app.get('*', function(req, res) {res.sendFile(path.join(__dirname + '/build/index.html')); });`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-07-07T06:08:54.227

提供完整路径，例如我在[https://ugoods.in/nodeapp上运行我的应用程序](https://ugoods.in/nodeapp)

```
app.get('/nodeapp', (req, res) => {
  res.send('Hello World!')
}) 
```

如果您将直接在[http://ugoods.in](http://ugoods.in)或 http://localhost上运行

```
app.get('/', (req, res) => {
  res.send('Hello World!')
}) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-22T14:01:46.877

我面临着与问题中提到的相同的问题。以下步骤解决了我的问题。

我通过以下步骤升级了 nodejs 包链接

1.  清除 NPM 的缓存：

    ```
    npm cache clean -f 
    ```

2.  安装一个名为'n'的小助手

    ```
    npm install -g n 
    ```

然后我去node.js网站，下载了最新的node js包，安装了，我的问题就解决了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-11T13:27:09.517

我有这个确切的问题，我的错误来源可能与您的错误来源不同。

但是，就我而言，这是因为我在子文件夹内的 CPanel 上运行应用程序实例：

```
app.get("/", (request, response) => {
       response.status(200).send("Hello there");
}) 
```

结果：

```
Can not GET / 
```

所以，我意识到我设置了错误的参数，我所做的是：

```
app.get("/foldername/", (request, response) => {
       response.status(200).send("Hello there, it works!");
 }) 
```

结果：

```
Hello there, it works! 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-04-18T16:20:26.423

另一种解决方案是检查您的`.static()`参数是否引用了其他网站文件（.html、.css、..）的正确文件夹。此文件夹应位于 server.js 文件的同一目录中。不知道为什么，我尝试将它放在不同的目录中并传递 ./website 例如，但它没有用。：/

# xaml - 找不到具有名称/密钥 PhoneProgressBarBackgroundBrush 的资源

> ID：13339697
> 
> 赞同：2
> 
> 时间：2012-11-12T07:23:00.517
> 
> 标签：xaml, visual-studio-2012, windows-phone-8

我在过去 2 天尝试调试此问题，我尝试了 SO 和 Microsoft connect 上可用的所有解决方案，但似乎找不到任何解决方案。

我下载了 Windows Phone 8 sdk，安装并创建了一个新项目，但是当我尝试编辑 App.xaml 时，我得到了

`XamlParseException: Cannot find a Resource with the Name/Key PhoneProgressBarBackgroundBrush [Line: 729 Position: 39] at at MS.Internal.XcpImports.CreateFromXaml(String xamlString, Boolean createNamescope, Boolean requireDefaultNamespace, Boolean allowEventHandlers, Boolean expandTemplatesDuringParse, Boolean trimDeclaredEncoding) at System.Windows.Controls.Control.GetBuiltInStyle(IntPtr nativeTarget, IntPtr& nativeStyle)`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:38:41.560

有同样的问题，重新安装 WP8 SDK 也没有帮助。

该问题可以通过将 ThemeResources.xaml 添加到项目资源中来解决，如下所示：

**Blend：** 在项目视图中，右键单击资源文件夹并选择“链接到现有项目...”。在那里添加*C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Design\ThemeResources.xaml*，它应该可以工作。

**VS2012：** 在解决方案资源管理器中，右键单击文件夹“资源”并选择“添加”->“现有项目...”。导航到*C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Design\ThemeResources.xaml*并选择“添加为链接”。

我不知道根本原因，即为什么 ThemeResources.xaml 不包含在新项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:30:11.953

您是否搜索过 PhoneProgressBarBackgroundBrush？它应该出现在资源字典中。如果您找到它，我会确保在您的 app.xaml 中将 Resource Dictionary 声明为 MergedDictionary，如果您找不到它，那么您会问下一个故障排除问题，是否只需要添加它。

您可以尝试将这样的内容放入资源字典中；

```
<SolidColorBrush x:Key="PhoneProgressBarBackgroundBrush"
                 x:Name="PhoneProgressBarBackgroundBrush"
                 Color="Black" /> 
```

如果您不确定哪个文件包含您的其他画笔，快速搜索类似的`"<solidcolorbrush"`内容应该会显示其他画笔。希望这可以帮助。

# mysql - Xampp 无法使用我的 IP 访问 mySQL/Apache

> ID：13339702
> 
> 赞同：0
> 
> 时间：2012-11-12T07:23:14.147
> 
> 标签：mysql, xampp

最近我打电话时无法访问我的 xampp mySQL/apache 服务器，`127.0.0.1(or my Network IP)\phpmyadmin`但是当我打电话时`localhost\phpmyadmin`它可以工作......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:40:20.603

您需要检查包含 IP 地址到主机名映射的*主机文件。*

它需要像这样的输入：

```
127.0.0.1 localhost
::1 localhost 
```

为了将您的 ip 解析为*localhost* ..

它在 *inx 和 windows 中都可用。

# java - 如何在单击菜单项时获得具有正确布局的窗口

> ID：13339707
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:24:18.090
> 
> 标签：java, swing, layout, awt, layout-manager

我正在开发我的第一个 java 桌面应用程序。我在框架上创建了如下所示：

![主页](../Images/59ac58572c0af3d9d110d5ec40b64c16.png)

在点击“文件”菜单项时，我想要这样一个视图，询问用户他的姓名、联系号码和电子邮件地址，还可以存储图像。我可以在单击文件时创建框架，如下所示：

![添加新联系人](../Images/4f718e11654bd61d50d1a4f6d2ab2cfd.png)

请帮助我获得我搜索过的不同布局的正确布局，这里使用的是`BoxLayout`第二个屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:37:21.767

> 请帮助我获得正确的布局..

[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)是您要在不同的“视图”之间切换的内容。

您可以在`loginPanel`其中输入登录详细信息，对于该面板，我可能会使用[`GroupLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html). 但也考虑在 modal 中显示登录`JDialog`。对我来说，在主 GUI 中嵌入登录看起来很奇怪。

# c++ - 安装 OpenGL AUX 库

> ID：13339708
> 
> 赞同：0
> 
> 时间：2012-11-12T07:24:24.697
> 
> 标签：c++, c, opengl, ubuntu, ubuntu-12.04

我正在使用 Ubuntu 12.04。我想将 AUX 库用于 OpenGL。谁能告诉我为我的系统获取 AUX 库涉及哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:43:43.893

> 我想将 AUX 库用于 OpenGL。

不，你没有！Glux 是无人维护的，也是最烦人的 PITA。

您想使用 GLFW、SDL、SMFL 或 FreeGLUT。

# jsfiddle - 将图像添加到 jsfiddle

> ID：13339711
> 
> 赞同：4
> 
> 时间：2012-11-12T07:24:33.333
> 
> 标签：jsfiddle

我想在 jsfiddle 中使用一个小图像/图标。

我该怎么做？我在某处上传图片吗？或者是否有可以从中提取的 URL？文档并没有说得很清楚（至少对我来说）。我也找到[了 this](https://stackoverflow.com/questions/11404545/adding-background-image-to-button-using-css-jsfiddle)和[this](https://stackoverflow.com/questions/5262068/getting-the-image-resources-from-jsfiddle)，但随附的小提琴没有显示图像。

我只想要一个 20px x 20px 的东西附加到一个`<a>`演示一些 CSS 上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:10:15.653

重新发布为答案-您无法将任何内容上传到 jsFiddle。请将其上传到公共保管箱文件夹或任何其他允许的服务。如果图像的内容不重要，您也可以使用图像占位符 - placekitten.com

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:54:49.333

您的另一个选择是将图像嵌入为 base64 编码的内容。有关执行此操作的详细信息，请参阅[https://en.wikipedia.org/wiki/Data_URI_scheme](https://en.wikipedia.org/wiki/Data_URI_scheme)。

# android - Html.fromHtml(string) 没有在 android 中解析 P 标签

> ID：13339712
> 
> 赞同：2
> 
> 时间：2012-11-12T07:24:35.313
> 
> 标签：android, html

我需要从以下文件中获取正文。当我使用`Html.fromHtml(string)`时，我得到了`body + some unformatted data`as

```
P {
    MARGIN-TOP: 0px;
    MARGIN-BOTTOM: 0px 
} 
```

`<P/>`标签不适用于`Html.fromHtml(string )`. 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-24T11:59:48.947

只需转换两次给定示例希望对您有所帮助

```
String des=Html.fromHtml(item.getVoucher_Description()).toString();
txtdes.setText(Html.fromHtml(des)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T08:10:48.190

这里 commonsware 说支持 P 标签。[HTML.fromHtml() 支持的标签 - 博客](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

例如，您应该在这样的字符串中使用它

```
<string name="htmlFormattedText">
          <![CDATA[
          <p>Text with markup for <strong>bold</strong>
          and <em>italic</em> text.</p>
          <p>There is also support for a
          <tt>teletype-style</tt> font.
          But no use for the <code>code</code>
          tag!</p>
          ]]></string> 
```

来源从[这里](http://www.grokkingandroid.com/android-quick-tip-formatting-text-with-html-fromhtml/)

# ruby-on-rails - 如何从 YAML 文件访问密钥的子密钥？

> ID：13339713
> 
> 赞同：1
> 
> 时间：2012-11-12T07:24:36.350
> 
> 标签：ruby-on-rails, ruby, hash

如果我们有一个 .yml 文件，如下所示：

```
foo:
  key1: someValue1
  key2: someValue2 
```

我们可以通过以下方式访问其内容：

```
conf = YAML.load_file("config.yml") 
```

和一个哈希值，如：

```
conf.fetch('foo')['key1'] #=> "someValue1" 
```

我们如何访问值为 的键`'someValue1'`？

或者

最好问：如何访问`'foo'`（key1和key2）的密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:17:01.480

你有没有尝试过

```
conf.fetch('foo').keys 
```

# html - html内容不是一条直线

> ID：13339718
> 
> 赞同：0
> 
> 时间：2012-11-12T07:25:38.317
> 
> 标签：html, css

![在此处输入图像描述](../Images/5cfc289b8e32a54ce0e4ec25752aec37.png)

我正在设计一个网页。在其中我有嵌套的 div。在中心有一个图像和一个链接。在内部 div 上，我添加了 onclick 事件。我从中调用 javascript 函数，然后导航到该位置。

我的问题是链接不是直线。它们被转移了。我希望它们成一条直线。在图像中只有两个链接，但实际上大约有 16-17 个链接。我希望它在 IE-6 及更高版本上运行，但主要它应该在 IE6 上运行。

我的代码片段是

```
<div id="dashboardOuterDiv"> <div id="dashboardInnerDiv"><div class="dashboardMainInnerDiv" onclick="checkKeyPress1(1)">
     <table width="100%">
    <tr onclick="checkKeyPress1(1)">
    <td class="box">
            <a class="achortable">1</a>
    </td>
    <td >
        <a class="achortable">  
                <span>This is my first link </span>
        </a>
    </td>
    </tr>
      </table>
    </div>
     <div class="dashboardMainInnerDiv" onclick="checkKeyPress1(2)">
     <table width="100%">
        <tr onclick="checkKeyPress1(2)">
        <td class="box">
                    <a class="achortable">2</a>
        </td>
        <td>
            <a class="achortable">
                        <span>This is my second link</span>
            </a>
        </td>
    </tr>
</table>
     </div>
</div>
</div> 
```

CSS代码是

```
#dashboardOuterDiv {width: 100%;
text-align:center;
background-color: #C0C0C0;
position:absolute;
}
#dashboardInnerDiv {
height:90%;
width:90%;
margin-top:0px;
margin-bottom:15px;
background-color:#F2F2F2;
display: inline-block;
text-align: center;
}
.dashboardMainInnerDiv
{
width:90%;
margin-top:15px;
margin-bottom:15px;
background-color:white;
display: inline-block;
text-align: left;
}
.dashboardMainInnerDiv a span
{
padding-left:10%;
display:inline-block;
vertical-align:middle;
}
.dashboardMainInnerDiv a img
{
border:0;
vertical-align:middle;
width:20%;
height:12%;
}
.box{
background: url("../images/box.gif") no-repeat scroll 0 0       transparent; /*#008DFF ;*/
font-family:Arial, Helvetica, sans-serif;
font-size: 20px;
font-weight: bold;
height: 20px;
padding: 14px 0;
text-align: center;
width: 49px;
float:left;
color:#34BEF5;

 } 
```

图片是 ![在此处输入图像描述](../Images/8a4d3d0f06ff844301f0b962aac7b2a6.png) 我希望它是这样的 ![在此处输入图像描述](../Images/62d743a2c4b1be512ff634ab07fc5eb5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:38:30.037

您是否关闭了这两个 div : ？

你为什么要首先嵌套那些 div ？并使用这么多表？表格是为了呈现大量数据，而不是做你的页面布局。

在您的情况下，我将使用单个“ul”标签（http://www.w3schools.com/tags/tag_ul.asp）和一个“li”标签，并在“span”和“a”上使用css来实现相同的设计，代码少得多。

请注意，您可以在任何元素上拥有“id”属性，而不仅仅是“div”。这可以为您节省大量嵌套元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:46:53.747

尝试将第一个**td**的宽度设置为 10% 或其他任何值，并将类添加到第二个**td**并将其宽度设置为 90% 或剩余百分比 100% 。**还设置第二个td**的文本对齐方式

# php - 为什么 65.6*100%10 等于 9，而不是 PHP 中的 0？

> ID：13339725
> 
> 赞同：3
> 
> 时间：2012-11-12T07:26:40.533
> 
> 标签：php, math

```
回声 65.7 * 100 % 10 // 0

回声 65.6 * 100 % 10 // 9 <---

回声 6560 % 10 // 0

回声 65.5 * 100 % 10 // 0

```

有人可以解释为什么吗？

**编辑：**

对于人类或非程序员，结果 9 显然是错误的。

`"error"`编程时如何防止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:30:23.723

因为`65.6`浮点数实际上是 的近似值`65.6`。它实际上略小于`65.6`，即`65.5999`或类似。

假设我对实际值的疯狂猜测是正确的，你有`6559.9`，它被模运算符[剥离`6599`](http://php.net/manual/en/language.operators.arithmetic.php)，然后除以 10 得到余数 9。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T07:30:45.543

因为 65.6 * 100 是 6559.9999999999。

这对你来说是[浮点数](https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T07:41:36.040

如前所述，这与浮点运算有关。我推荐阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T07:39:32.927

因为：

```
<?php

echo (65.7 * 100 == 6570) ? "Equal" : "Not equal";  // Equal
echo (65.6 * 100 == 6560) ? "Equal" : "Not equal";  // NOT EQUAL !!
echo (65.5 * 100 == 6550) ? "Equal" : "Not equal";  // Equal

?> 
```

65.6 * 100**不是**6560。这里的[大红色警告框](http://php.net/manual/en/language.types.float.php)解释了原因。

# c++ - 网络上两台机器之间的消息传递

> ID：13339729
> 
> 赞同：0
> 
> 时间：2012-11-12T07:26:52.537
> 
> 标签：c++, boost, mpi, distributed-computing

**问题描述：**有两个进程在网络中的两台不同的 Unix 机器上运行。将简单消息（例如“嗨！！”）从一台机器传递到另一台机器的最简单方法是什么？我知道 IPC 的方法有很多，但最简单且开销最小的方法是什么？

Boost MPI 在我的场景中有用吗？我正在使用 C++ 来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:27:48.447

使用套接字（我建议提升套接字）或查看[ZeroMQ](http://zguide2.zeromq.org/cpp%3ahwclient)。ZeroMQ 实际上可能更容易，因为它保证始终接收完整的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T07:54:31.367

插座。这是一个套接字[教程](http://beej.us/guide/bgnet/)。一旦掌握了插座，您还可以使用[升压插座](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial.html#boost_asio.tutorial.introduction_to_sockets)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:03:55.483

这足够简单吗？（使用纯 MPI 标准调用，没有任何 3rd 方库，如`Boost.MPI`）

```
#include <string>
#include <iostream>
#include <mpi.h>

using namespace std;

int main (int argc, char **argv) {
   // Initialise the MPI library
   MPI_Init(&argc, &argv);

   int rank, size;
   MPI_Comm_size(MPI_COMM_WORLD, &size);
   MPI_Comm_rank(MPI_COMM_WORLD, &rank);

   if (size != 2) {
      if (rank == 0)
         cout << "ERROR: You must run this program with 2 processes" << endl;
      MPI_Abort(MPI_COMM_WORLD, 0);
   }

   if (rank == 0) {
      // Rank 0 sends the message
      string hi = "Hi!";
      MPI_Send((void*)hi.c_str(), hi.length()+1, MPI_CHAR,
               1, 0, MPI_COMM_WORLD);
   }
   else {
      // Rank 1 receives the message
      // Probe for a message and get its actual size
      MPI_Status status;
      MPI_Probe(0, 0, MPI_COMM_WORLD, &status);
      int len;
      MPI_Get_count(&status, MPI_CHAR, &len);
      // Allocate buffer space for the message and receive it
      char *message = new char[len];
      MPI_Recv(message, len, MPI_CHAR,
               0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
      cout << "Rank 1 received: " << message << endl;
      delete [] message;
   }

   MPI_Finalize();

   return 0;
} 
```

编译`mpic++ -o mpihi.exe mpihi.cc`并执行：

```
$ mpiexec -np 2 ./mpihi.exe
Rank 1 received: Hi! 
```

如果消息的长度预先固定，则可以简化代码。使用它可以进一步简化它，`Boost.MPI`但我从未使用过它，所以我无法为您提供示例。

MPI 的优点在于它有保证的消息传递以及它抽象互连细节的方式。您可以通过提供适当的选项来更改两个 MPI 进程的位置`mpiexec`。如果两个进程都放在同一个物理节点上，则共享内存将用于传递消息。如果放在不同的节点上，就会使用一些网络机制。

当然，这一切都取决于您的需求。MPI 库是具有许多支持基础设施的复杂代码，例如，您需要通过专用的启动程序（在大多数情况下）运行代码，`mpiexec`并且`mpirun`您不能使用 MPI 简单地连接两个随机进程（即您确实*必须*启动他们都通过`mpiexec`/ `mpirun`）。

# jquery - 在三星智能电视中弹出

> ID：13339732
> 
> 赞同：1
> 
> 时间：2012-11-12T07:27:00.010
> 
> 标签：jquery, html, jquery-ui, samsung-smart-tv

我在这里需要帮助 我在 js 中使用它

```
$('#popup').sfPopup({
        text: 'Would You like to close this popup?',
        buttons: ['Yes', 'No'],
        defaultFocus: 1,    // index of default focused button. this indicates array index of 'buttons' option (zero-based)
        callback: function (selectedIndex) {
            alert('selected button index: ' + selectedIndex);
        }
    });
    $('#popup').sfPopup('show'); 
```

};

这在 html 中

```
<div id='popup'></div> 
```

我在这里找到了这个例子

[http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/appsframework_apis/ui_components_api/uiapi_popup_sfpopup.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/appsframework_apis/ui_components_api/uiapi_popup_sfpopup.html)

但它不起作用我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T08:53:14.027

您需要在项目的 index.html 中包含 AppFramework 脚本

`<script type="text/javascript" src="$MANAGER_WIDGET/Common/af/2.0.0/loader.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:29:40.270

z-index 可能存在一些问题。在 sfPopup 之后试试这个：

```
$('#popup').css('z-index','10000'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T09:00:18.950

也许你需要

```
$('#popup').sfPopup('focus'); 
```

之后 `$('#popup').sfPopup('show');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:05:24.653

你在使用应用框架吗？还可以尝试在页眉中包含 2 个脚本：

```
<script type='text/javascript' language='javascript' src='$MANAGER_WIDGET/Common/core.js'></script>
<script type='text/javascript' language='javascript' src='$MANAGER_WIDGET/Common/ui.js'></script> 
```

我认为如果您使用 App Framework，它应该可以工作。在我的情况下，我得到了错误“ `sfLang undefined`”，但那是因为我没有使用 App Framework。

# sql - 通过从同一个表中的另一列派生的值将值插入一列？

> ID：13339734
> 
> 赞同：1
> 
> 时间：2012-11-12T07:27:07.477
> 
> 标签：sql, sql-server, sql-server-2008

我在一个表中有两列：

*   FlightNumber（具有 AI-1234、AI-3242 等值）和
*   FlightId（根据 FlightNumber 应该是 1234、3242）

我可以选择每条记录的最后 4 个字符的 FlightNumber 列。

```
 SELECT RIGHT(flightnumber, 4) FROM pnrdetails 
```

但我不确定如何将其插入 FlightId 列。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:35:25.220

我想，你不需要插入。你应该考虑更新。我假设`FlightId`数据类型是`int`.

```
 update pnrdetails set FlightId = convert(int,RIGHT(flightnumber, 4)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:34:10.017

你可以更新表格

```
update pnrdetails
set FlightId =RIGHT(flightnumber, 4) 
```

# unix - 在 ed 文本编辑器 unix 中将字符串作为变量传递

> ID：13339735
> 
> 赞同：0
> 
> 时间：2012-11-12T07:27:12.000
> 
> 标签：unix, ed

作为我要求的一部分，我需要在 unix 中的现有文件中添加标头。为此，我使用了从这个讨论中得到的 ed 文本编辑器

[如何在 shell 脚本中向文件中添加一行？](https://stackoverflow.com/questions/487894/how-can-i-add-a-line-to-a-file-in-a-shell-script)

这是我使用的代码

```
printf '0a\n%s\n.\nw\n',$header, | ed "./runtime/"$outputFileName 
```

我从另一个文件中获得了 $header 的值

```
"header 1","header 2","header 3" 
```

执行脚本后，当我检查输出文件的第一行时，只包含这一行

```
1","header 
```

如何使整行添加到输出文件中？请帮忙。提前致谢。

PS：我使用的是 Sun Solaris

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:39:21.353

请务必正确使用 printf。(1) 引用标题 (2) 用空格分隔参数

```
echo '"header 1","header 2","header 3"' > test.txt
header="$(cat header.txt)"
printf '0a\n%s\n.\nw\n' "$header" 
```

结果是

```
0a
"header 1","header 2","header 3"
.
w 
```

# javascript - 如何设置 Google Analytics 以跟踪出站链接？官方例子不行

> ID：13339736
> 
> 赞同：0
> 
> 时间：2012-11-12T07:27:14.040
> 
> 标签：javascript, google-analytics

> **可能重复：**
> [如何跟踪出站链接的点击次数](https://stackoverflow.com/questions/13211120/how-to-track-clicks-on-outbound-links)

如[官方文档](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)中所述，我在我的`<head>`部分中包含了这段代码：

```
<script type="text/javascript">
  function recordOutboundLink(link, category, action) {
    try {
      var myTracker=_gat._getTrackerByName();
      _gaq.push(['myTracker._trackEvent', category , action ]);
      setTimeout('document.location = "' + link.href + '"', 100)
    }catch(err){}
  }
</script> 
```

并将链接更改为：

```
<a href="http://www.example.com" onClick="recordOutboundLink(this, 'Outbound Links', 'example.com');return false;"> 
```

但是，报告中仍然没有显示任何事件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:27:14.040

Google Analytics 文档中的代码不正确。该`<head>`部分中的代码应该是

```
<script type="text/javascript">
  function recordOutboundLink(link, category, action) {
    try {
      _gaq.push(['_trackEvent', category , action ]);
      setTimeout('document.location = "' + link.href + '"', 100)
    }catch(err){}
  }
</script> 
```

# sql - 提示输入的 Sql Agent 作业？

> ID：13339749
> 
> 赞同：0
> 
> 时间：2012-11-12T07:28:57.130
> 
> 标签：sql, sql-server, database, database-administration

我想编写一个在执行时提示输入的 sql 代理作业。在sql server中可以吗？该输入将用作 sql 代理脚本中的变量。

请帮我解决这个问题。

谢谢

尼特什·库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:42:39.517

不，这在 SQL Server 中是不可能的。如果您想为作业提供一些手动输入，您可以在作业中创建一个步骤（第一步），该步骤从某些文件/数据库表等读取输入，然后第二步用户将第一步的输出作为输入。在作业开始执行之前，您必须创建替代方法来手动输入数据库表/文件。

但是有一个问题 - 作业应该按照某个时间表运行，您的工作不是按照某个时间表运行吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:58:11.380

可以使用 xp_cmdshell 运行提示输入并将数据写回函数的 VB 脚本或 .bat 文件。

问题是 xp_cmdshell 通常出于安全原因被关闭，因为它允许 SQL 中的某人在托管服务器上执行程序。

这个例子使用了一个powerscript来获取一些数据，然后将数据写入一个表，但是这都是从xp_cmdshell执行的

声明@CertFilePath varchar(500) 声明@SQL varchar(1000) 设置@ScriptFilePath ='c:\myscripts\SomeScript.vbs'

CREATE TABLE #DataTable (line varchar(255))

插入 #DataTable EXEC xp_cmdshell @SQL

从 #DataTable 中选择 *

此代码启用 xp_CmdShell

EXEC sp_configure 'show advanced options', 1 GO -- 更新当前配置的高级选项值。RECONFIGURE GO——启用该功能。EXEC sp_configure 'xp_cmdshell', 1 GO -- 更新此功能的当前配置值。重新配置

此代码禁用 xp_cmdshell

-- 在这个 EXEC 结束时将 xp_cmdshell enabled=false /reset 设置为禁用 sp_configure 'show advanced options', 0 GO -- 更新高级选项的当前配置值。RECONFIGURE GO——启用该功能。EXEC sp_configure 'xp_cmdshell', 0 GO -- 更新此功能的当前配置值。重新配置

# java - 在内存数据库中从 MySQL 切换到 Hypersonic 时出现 SQL 语法异常

> ID：13339752
> 
> 赞同：2
> 
> 时间：2012-11-12T07:29:16.407
> 
> 标签：java, sql, spring, hibernate, maven

我正在尝试为我的应用程序运行测试，但不使用生产数据库，而是使用内存中的 Hypersonic。

我遇到的问题是，在最终让它使用我希望它使用的 applicationContext.xml 和 persistence.xml 文件之后，我收到了与 CatalogItem 类相关的测试的以下错误。

问题是我被明确告知我不需要修改类本身的任何内容，因为它们在 MySQL 上运行得很好。我希望问题出在我的 .xml 文件上。

测试持久性.xml

```
<!-- Classes declaration omitted -->
<provider>org.hibernate.ejb.HibernatePersistence</provider>

<properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="create"/>
</properties> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd         http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <!-- FOR UNIT TESTING ONLY -->

    <context:property-placeholder location="classpath*:META-INF/spring/test-database.properties"/>

    <bean id="externalProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
       <property name="ignoreResourceNotFound"><value>true</value></property>
       <property name="locations">
          <list>
            <value>classpath*:META-INF/conf/configuration.properties</value>
          </list>
       </property>
    </bean>

    <context:spring-configured/>

    <context:component-scan base-package="com.mms.pone.portal">
        <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>

     <bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="false"/>
        <property name="testOnReturn" value="false"/>
        <property name="testWhileIdle" value="false"/>
        <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
        <property name="numTestsPerEvictionRun" value="3"/>
        <property name="maxActive" value="1" />

        <property name="minEvictableIdleTimeMillis" value="1800000"/>
    </bean>

    <bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property name="persistenceUnitName" value="persistenceUnit"/>
        <property name="dataSource" ref="dataSource"/>

        <property name="persistenceXmlLocation" value="classpath*:META-INF/test-persistence.xml" />
    </bean>    
</beans> 
```

数据库属性：

```
########################################################
#                                                      #
#  This configuration is used for unit-testing only.   #
#                                                      #
########################################################
# Hypersonic
database.driverClassName=org.hsqldb.jdbcDriver

database.url=jdbc\:hsqldb\:file\:c\:/Project

database.username=sa
database.password= 
```

还有我在运行 mvn 时得到的堆栈跟踪

```
Tests in error:
  testDeleteAsset(com.mms.pone.portal.domain.AssetIntegrationTest): org.hibernate.exception.SQLGrammarException: could not load an entity: [com.mms.pone.portal.domain.Asset#64]; nested exception is ja
vax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not load an entity: [com.mms.pone.portal.domain.Asset#64]
  testFindCatalogItem(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceExc
eption: org.hibernate.exception.SQLGrammarException: could not execute query
  testCountAllCatalogItems(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.Persisten
ceException: org.hibernate.exception.SQLGrammarException: could not execute query
  testFindAllCatalogItems(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.Persistenc
eException: org.hibernate.exception.SQLGrammarException: could not execute query
  testFindCatalogItemEntries(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.Persist
enceException: org.hibernate.exception.SQLGrammarException: could not execute query
  testUpdateCatalogItemUpdate(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.Persis
tenceException: org.hibernate.exception.SQLGrammarException: could not execute query
  testSaveCatalogItem(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceExc
eption: org.hibernate.exception.SQLGrammarException: could not execute query
  testDeleteCatalogItem(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceE
xception: org.hibernate.exception.SQLGrammarException: could not execute query
  testFlush(com.mms.pone.portal.domain.CatalogItemIntegrationTest): org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceException: or
g.hibernate.exception.SQLGrammarException: could not execute query 
```

CatalogItemIntegrationTest 的日志输出：

```
-------------------------------------------------------------------------------
Test set: com.mms.pone.portal.domain.CatalogItemIntegrationTest
-------------------------------------------------------------------------------
Tests run: 9, Failures: 0, Errors: 8, Skipped: 0, Time elapsed: 0.024 sec <<< FAILURE!
testFlush(com.mms.pone.portal.domain.CatalogItemIntegrationTest)  Time elapsed: 0.015 sec  <<< ERROR!
org.springframework.orm.jpa.JpaSystemException: org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:326)
    at org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect.ajc$afterThrowing$org_springframework_orm_jpa_aspectj_JpaExceptionTranslatorAspect$1$18a1ac9(JpaExceptionTranslatorAspect.aj:15)
    at com.mms.pone.portal.domain.CatalogItem_Roo_Jpa_ActiveRecord.findCatalogItemEntries_aroundBody6(CatalogItem_Roo_Jpa_ActiveRecord.aj:31)
    at com.mms.pone.portal.domain.CatalogItem_Roo_Jpa_ActiveRecord.ajc$interMethod$com_mms_pone_portal_domain_CatalogItem_Roo_Jpa_ActiveRecord$com_mms_pone_portal_domain_CatalogItem$findCatalogItemEntries(CatalogItem_Roo_Jpa_ActiveRecord.aj:1)
    at com.mms.pone.portal.domain.CatalogItem.findCatalogItemEntries(CatalogItem.java:1)
    at com.mms.pone.portal.domain.CatalogItem_Roo_Jpa_ActiveRecord.ajc$interMethodDispatch1$com_mms_pone_portal_domain_CatalogItem_Roo_Jpa_ActiveRecord$com_mms_pone_portal_domain_CatalogItem$findCatalogItemEntries(CatalogItem_Roo_Jpa_ActiveRecord.aj)
    at com.mms.pone.portal.service.CatalogItemServiceImpl_Roo_Service.ajc$interMethod$com_mms_pone_portal_service_CatalogItemServiceImpl_Roo_Service$com_mms_pone_portal_service_CatalogItemServiceImpl$findCatalogItemEntries(CatalogItemServiceImpl_Roo_Service.aj:35)
    at com.mms.pone.portal.service.CatalogItemServiceImpl.findCatalogItemEntries(CatalogItemServiceImpl.java:1)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethod$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$init(CatalogItemDataOnDemand_Roo_DataOnDemand.aj:159)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand.init(CatalogItemDataOnDemand.java:1)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethodDispatch1$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$init(CatalogItemDataOnDemand_Roo_DataOnDemand.aj)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethod$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$getRandomCatalogItem(CatalogItemDataOnDemand_Roo_DataOnDemand.aj:146)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand.getRandomCatalogItem(CatalogItemDataOnDemand.java:1)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethodDispatch1$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$getRandomCatalogItem(CatalogItemDataOnDemand_Roo_DataOnDemand.aj)
    at com.mms.pone.portal.domain.CatalogItemIntegrationTest_Roo_IntegrationTest.ajc$interMethod$com_mms_pone_portal_domain_CatalogItemIntegrationTest_Roo_IntegrationTest$com_mms_pone_portal_domain_CatalogItemIntegrationTest$testFlush(CatalogItemIntegrationTest_Roo_IntegrationTest.aj:74)
    at com.mms.pone.portal.domain.CatalogItemIntegrationTest.testFlush(CatalogItemIntegrationTest.java:1)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:172)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:104)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:70)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1387)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1315)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:255)
    ... 48 more
Caused by: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2545)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:459)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:365)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:246)
    ... 48 more
Caused by: java.sql.SQLException: Table not found in statement [select top ? catalogite0_.id as id6_, catalogite0_.active as active6_, catalogite0_.category_id as category14_6_, catalogite0_.deliveryTime as delivery3_6_, catalogite0_.descriptionLong as descript4_6_, catalogite0_.descriptionShort as descript5_6_, catalogite0_.ean as ean6_, catalogite0_.externalFormId as external7_6_, catalogite0_.manufacturer_id as manufac15_6_, catalogite0_.name as name6_, catalogite0_.remarks as remarks6_, catalogite0_.sapMatNr as sapMatNr6_, catalogite0_.supplierAid as supplie11_6_, catalogite0_.supplier_catalog_id as supplier16_6_, catalogite0_.type as type6_, catalogite0_.version as version6_ from CatalogItem catalogite0_]
    at org.hsqldb.jdbc.Util.throwError(Unknown Source)
    at org.hsqldb.jdbc.jdbcPreparedStatement.<init>(Unknown Source)
    at org.hsqldb.jdbc.jdbcConnection.prepareStatement(Unknown Source)
    at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:281)
    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.prepareStatement(PoolingDataSource.java:313)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
    at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1700)
    at org.hibernate.loader.Loader.doQuery(Loader.java:801)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2542)
    ... 56 more
testFindCatalogItem(com.mms.pone.portal.domain.CatalogItemIntegrationTest)  Time elapsed: 0 sec  <<< ERROR!
org.springframework.orm.jpa.JpaSystemException: org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:326)
    at org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect.ajc$afterThrowing$org_springframework_orm_jpa_aspectj_JpaExceptionTranslatorAspect$1$18a1ac9(JpaExceptionTranslatorAspect.aj:15)
    at com.mms.pone.portal.domain.CatalogItem_Roo_Jpa_ActiveRecord.findCatalogItemEntries_aroundBody6(CatalogItem_Roo_Jpa_ActiveRecord.aj:31)
    at com.mms.pone.portal.domain.CatalogItem_Roo_Jpa_ActiveRecord.ajc$interMethod$com_mms_pone_portal_domain_CatalogItem_Roo_Jpa_ActiveRecord$com_mms_pone_portal_domain_CatalogItem$findCatalogItemEntries(CatalogItem_Roo_Jpa_ActiveRecord.aj:1)
    at com.mms.pone.portal.domain.CatalogItem.findCatalogItemEntries(CatalogItem.java:1)
    at com.mms.pone.portal.domain.CatalogItem_Roo_Jpa_ActiveRecord.ajc$interMethodDispatch1$com_mms_pone_portal_domain_CatalogItem_Roo_Jpa_ActiveRecord$com_mms_pone_portal_domain_CatalogItem$findCatalogItemEntries(CatalogItem_Roo_Jpa_ActiveRecord.aj)
    at com.mms.pone.portal.service.CatalogItemServiceImpl_Roo_Service.ajc$interMethod$com_mms_pone_portal_service_CatalogItemServiceImpl_Roo_Service$com_mms_pone_portal_service_CatalogItemServiceImpl$findCatalogItemEntries(CatalogItemServiceImpl_Roo_Service.aj:35)
    at com.mms.pone.portal.service.CatalogItemServiceImpl.findCatalogItemEntries(CatalogItemServiceImpl.java:1)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethod$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$init(CatalogItemDataOnDemand_Roo_DataOnDemand.aj:159)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand.init(CatalogItemDataOnDemand.java:1)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethodDispatch1$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$init(CatalogItemDataOnDemand_Roo_DataOnDemand.aj)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethod$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$getRandomCatalogItem(CatalogItemDataOnDemand_Roo_DataOnDemand.aj:146)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand.getRandomCatalogItem(CatalogItemDataOnDemand.java:1)
    at com.mms.pone.portal.domain.CatalogItemDataOnDemand_Roo_DataOnDemand.ajc$interMethodDispatch1$com_mms_pone_portal_domain_CatalogItemDataOnDemand_Roo_DataOnDemand$com_mms_pone_portal_domain_CatalogItemDataOnDemand$getRandomCatalogItem(CatalogItemDataOnDemand_Roo_DataOnDemand.aj) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:15:40.667

未找到表“CatalogItem”：

```
Table not found in statement [select top ? [...] from CatalogItem catalogite0_] 
```

所以也许你对属性“hibernate.hbm2ddl.auto”的设置不正确。你可以试试“hibernate.hbm2ddl.auto=update”，也许有帮助。或者您可以使用 dbmaintain - [http://dbmaintain.org/overview.html](http://dbmaintain.org/overview.html) - 而不是“hibernate.hbm2ddl.auto”。无论如何，它更安全，更灵活。

如果这没有帮助，请尝试启用 SQL 日志记录并查看生成的 SQL 语句。将以下属性添加到您的 persistence.xml：

```
<property name="hibernate.show_sql" value="true"/> 
<property name="hibernate.format_sql" value="true"/> <property name="use_sql_comments" value="true"/> 
```

**编辑**如果您使用 Squirrel 之类的工具检查 HSQL 数据库，它也可能会有所帮助：http: [//squirrel-sql.sourceforge.net/](http://squirrel-sql.sourceforge.net/)您可以使用它检查所有表是否正确创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:54:05.217

虽然不是我最初想要的，但在切换到 H2-IN-MEMORY 后测试运行完美......

# java - 使用名称方法查找类型异常

> ID：13339758
> 
> 赞同：0
> 
> 时间：2012-11-12T07:29:48.517
> 
> 标签：java, exception, try-catch

是否有任何方法可以找出名称方法出现的异常类型。例如，我使用 Hbase 表的“删除”功能删除了一些列，我想知道会出现哪些异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:37:32.607

据我了解，如果您使用 Eclipse，请选择您的功能（例如删除），按 F2 并查看当前方法的文档。

失败时应该提供异常类型。

此外，您可以使用 try/catch 选项（有时 Eclipse 会创建正确的异常类型）

右键单击方法-> 环绕

![在此处输入图像描述](../Images/745c7f62ff99cc792eec1be3c2caee25.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:34:41.410

看一下api

[http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable.html#delete(org.apache.hadoop.hbase.client.Delete](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable.html#delete(org.apache.hadoop.hbase.client.Delete) )

删除抛出 IOException

# c# - Windows 窗体中使用 Cambria Math 字体的文本垂直移动

> ID：13339759
> 
> 赞同：0
> 
> 时间：2012-11-12T07:29:56.363
> 
> 标签：c#, winforms

> **可能重复：**
> [Cambria Math 大顶部和底部边距](https://stackoverflow.com/questions/8624229/cambria-math-big-top-and-bottom-margin)

我试图在 Windows 窗体的位置 0,0 处绘制文本（字体为“Cambria Math”）。但它垂直向下移动到某个位置。有没有办法在位置 0,0 处正确绘制它？

```
 ![enter image description here][1]string st = ((char)4574).ToString();
        Font f = new System.Drawing.Font("Cambria Math", 12f);
        Graphics gr = this.CreateGraphics();
        gr.DrawString(st, f, Brushes.Black, new PointF(0, 0)); 
```

# java - 休眠。检查日期范围是否在另一个日期范围内

> ID：13339760
> 
> 赞同：1
> 
> 时间：2012-11-12T07:29:58.057
> 
> 标签：java, hibernate

这听起来很简单，但我就是想不通。

我的数据库中有两个字段。availableFromDate 和 availableToDate。

用户正在搜索以查找给定范围内的所有可用实体。所以我的行动收到两个日期：

searchFromDate 和 searchToDate。

我需要做的就是返回用户指定的整个期间可用的所有实体。

最好使用标准。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:45:11.973

如果我正确理解您的问题 - 也就是说，事件可用性应该完全在搜索日期范围内 - 那么它应该归结为：

如果您确保“availableFromDate.before(availableToDate)”和“searchFromDate.before(searchToDate)”——在这种情况下无论如何你都应该这样做——那么你的availableFromDate和你的availableToDate都必须在搜索日期范围内。

您可以使用此答案中的解决方案来确保两个日期都在范围内：[How to compare dates in hibernate](https://stackoverflow.com/questions/10073893/how-to-compare-dates-in-hibernate)

```
criteria.add(Restrictions.between("availableFromDate", searchFromDate, searchToDate));
criteria.add(Restrictions.between("availableToDate", searchFromDate, searchToDate)); 
```

# linq - 如何将网格数据复制到对象

> ID：13339767
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:30:25.673
> 
> 标签：linq, casting, grid

我正在尝试将网格数据复制到一个对象。

代码 ：

```
object obj = GrdReport.ItemsSource;    
PrepareDataForStackedChart1(obj); 
```

函数定义为

```
private void PrepareDataForStackedChart1(object categoies)           
{              
    var Salespersons = (from cat in categoies    
                    select cat.Salesperson);    
} 
```

我收到错误：

> 无法从“lambda 表达式”转换为“System.Linq.Expressions.LambdaExpression”

谁能告诉我如何在 linq 查询中访问该对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:28:58.997

**编辑：**刚巧得知您正在使用第三方控件（[来自您的重复问题](https://stackoverflow.com/questions/13340283/how-to-copy-the-itemsource-data-to-any-collecion-type?lq=1)），其`ItemSource`属性采用`System.Object`而不是`IEnumerable`。在这种情况下，要么将您的对象 ( `ItemSource`) 转换回原始类型，要么保留您用于在某处绑定控件并将该集合传递给您的`PrepareDataForStackedChart1`方法的原始集合。

一些猜测工作：

1)**任一个**

```
object obj = GrdReport.ItemsSource;    
PrepareDataForStackedChart1((IEnumerable<Category>)obj);

private void PrepareDataForStackedChart1(IEnumerable<Category> categories)           
{              
    var Salespersons = (from cat in categories    
                    select cat.Salesperson);    
} 
```

2）**或者**当你这样做时

```
GrdReport.ItemsSource = GetCategories(); 
```

像这样复制备份：

```
categories = GetCategories(); //categories is defined in proper scope.
GrdReport.ItemsSource = categories; 
```

后来你做;

```
PrepareDataForStackedChart1(categories);

private void PrepareDataForStackedChart1(IEnumerable<Category> categories)           
{              
    var Salespersons = (from cat in categories    
                    select cat.Salesperson);    
} 
```

3）**或者****您可能会从您的 GridView 上定义的属性（可能）`Items``Rows`**获取集合。祝你好运..

* * *

**预编辑**：

该错误是因为您无法枚举普通对象。它必须是可枚举的。为什么要将对象值传递给您的`PrepareDataForStackedChart1`方法？相反，您不能通过`IEnumerable`自身吗？尝试

```
var categories = GrdReport.ItemsSource.OfType<Category>();    
PrepareDataForStackedChart1(categories);

private void PrepareDataForStackedChart1(IEnumerable<Category> categories)           
{              
    var Salespersons = (from cat in categories    
                        select cat.Salesperson);    
} 
```

我假设你有父类`Category`

# java - 获取数据库行锁失败：表 QRTZ_LOCKS 中不存在名为 TRIGGER_ACCESS 的锁的行

> ID：13339771
> 
> 赞同：6
> 
> 时间：2012-11-12T07:30:38.700
> 
> 标签：java, spring, quartz-scheduler

我是 Quartz 调度程序的新手，我正在将它与 spring 一起使用......当我尝试运行包含 Quartz 配置的 XML 文件时，我得到一个异常说明：

```
Failure obtaining db row lock: No row exists in table QRTZ_LOCKS for lock named: 
TRIGGER_ACCESS 
```

我发现表 QRTZ_LOCKS 包含两个字段：SCHED_NAME 和 LOCK_NAME，我应该在我的数据库中运行以下语句：

```
INSERT INTO QRTZ_LOCKS values('my sched_name', 'TRIGGER_ACCESS'); 
INSERT INTO QRTZ_LOCKS values('my sched_name','JOB_ACCESS'); 
INSERT INTO QRTZ_LOCKS values('my sched_name','CALENDAR_ACCESS'); 
INSERT INTO QRTZ_LOCKS values('my sched_name','STATE_ACCESS'); 
INSERT INTO QRTZ_LOCKS values('my sched_name','MISFIRE_ACCESS'); 
```

但我不知道我的 sched_name 是什么？

任何想法 ？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:47:40.950

你只需要运行

```
 INSERT INTO QRTZ_LOCKS values('TRIGGER_ACCESS');
      INSERT INTO QRTZ_LOCKS values('JOB_ACCESS');
      INSERT INTO QRTZ_LOCKS values('CALENDAR_ACCESS');
      INSERT INTO QRTZ_LOCKS values('STATE_ACCESS');
      INSERT INTO QRTZ_LOCKS values('MISFIRE_ACCESS'); 
```

这实际上对我有用。至少停止了错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:08:13.947

这很可能是因为您从较新版本的 Quartz 获得了表格脚本，然后您将其应用于您的应用程序。

如果你使用的是 Spring，那么你必须有 Quartz 1.8.x。

[在这里您可以找到版本 1.8.6](http://www.terracotta.org/download/reflector.jsp?b=tcdistributions&i=quartz-1.8.6.tar.gz)

**注意：在该 tar.gz 文件中还有另一个没有扩展名的文件。它是一个 zip 文件，其中包含一个名为 doc 的文件夹。在那里你可以找到几个数据库引擎的脚本。**

不需要对数据进行手动修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:03:30.403

*my_sched_name* 可以从表`qrtz_job_details`(sched_name) 中检索。您的石英配置/部署一定有问题，因为通常您不必手动插入/更新这些表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T05:17:37.307

通常，当您的数据库中没有与石英相关的数据库表时，您会收到这些错误。

有时即使您有 db 表，您也可能会在迁移中遇到这些错误。请检查石英 1.8 和 quart 2.x 的 db_schema 有一些变化。

下面是 2.x db 脚本的链接，这应该可以正常工作。

2.x：[https ://github.com/elventear/quartz-scheduler/blob/master/distribution/src/main/assembly/root/docs/dbTables/tables_mysql.sql](https://github.com/elventear/quartz-scheduler/blob/master/distribution/src/main/assembly/root/docs/dbTables/tables_mysql.sql)

你也可以检查这个： [https ://github.com/quartznet/quartznet/blob/master/database/tables/tables_oracle.sql](https://github.com/quartznet/quartznet/blob/master/database/tables/tables_oracle.sql)

# svn - SVN同步问题：当前正在复制的修订版（237266）、最后合并的修订版（237265）和目标HEAD（237264）不一致；

> ID：13339777
> 
> 赞同：2
> 
> 时间：2012-11-12T07:31:18.507
> 
> 标签：svn, synchronization

我们曾经将代码从一台服务器同步到另一台服务器。昨天我发现了一个问题。

属性 'svn:sync-lock' 从存储库修订版 0 中删除 svnsync 同步[https://slc-svn.accela.com/svn/projects](https://slc-svn.accela.com/svn/projects) --non-interactive svnsync：当前正在复制修订版 (237266)，最后合并的修订版 (237265 ) 和目标 HEAD (237264) 不一致；您是否在不使用 svnsync 的情况下承诺了目的地？

如何从修订版 237265 而不是 237266 开始同步？存储库非常大（至少 100G），我不想再次导出转储或同步存储库...您能帮忙提供一个解决方案吗？谢谢！

# ruby - 有条件的数组的第一个元素

> ID：13339778
> 
> 赞同：62
> 
> 时间：2012-11-12T07:31:18.847
> 
> 标签：ruby, arrays

有没有比这更短的方法来找到满足某些条件的数组中的第一个元素：

```
my_array[ my_array.index {|x| x.some_test} ] 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-11-12T07:32:59.640

试试这个：

```
my_array.find{|x| x.some_test } 
```

或者这是一个捷径（感谢@LarsHaugseth 提醒）

```
my_array.find(&:some_test) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T08:02:33.617

至于我觉得听起来很混乱。正如我所期望的那样，这样的请求会收到不止一个对象。

我更喜欢用它`detect`来获得不同的东西。

并`select`找到所有这些。

这里 ruby​​ 文档讲述了它们：

```
detect(ifnone = nil) {| obj | block } → obj or nil click to toggle source 
find(ifnone = nil) {| obj | block } → obj or nil 
detect(ifnone = nil) → an_enumerator 
find(ifnone = nil) → an_enumerator 
```

将枚举中的每个条目传递给阻塞。返回第一个不为假的块。如果没有对象匹配，则调用 ifnone 并在指定时返回其结果，否则返回 nil。

```
find_all {| obj | block } → array click to toggle source
select {| obj | block } → array
find_all → an_enumerator
select → an_enumerator 
```

返回一个数组，其中包含块不为假的枚举的所有元素

# eclipse - eclipse插件开发中Scala的eval

> ID：13339782
> 
> 赞同：2
> 
> 时间：2012-11-12T07:31:58.393
> 
> 标签：eclipse, scala, plugins, eval

现在，我使用 scala 开发了一个 eclipse 插件。

在这个插件中，我想使用由 twitter 创建的 util-eval 库。

（https://github.com/twitter/util/tree/master/util-eval）

我尝试使用 'sbteclipse' 构建这个库，得到了 jars（例如 util-core-5.3.13.jar 和 util-eval-5.3.13），并添加了以下构建路径：

```
<classpathentry exported="true" kind="lib" path="jars/util-core-5.3.13.jar"/>
<classpathentry exported="true" kind="lib" path="jars/util-eval-5.3.13.jar"/> 
```

这是一个示例测试代码：

```
class SampleTest {
@Test
def evalTest(): Unit = {
    val ret = (new com.twitter.util.Eval).apply[(Int => Int)]("{(x:Int) => x*2}")
    println(ret(4))
} 
```

}

当以 Run -> JUnit Test 运行时，它可以工作（显示“8”）

但是，当作为 Run -> EclipseApplication -> (execute plugin) 运行时，它不起作用并且我遇到了一些错误。这是一个插件（处理程序）代码：

```
class SampleHandler extends AbstractHandler{
def execute(event: ExecutionEvent): Object = {
    val ret = (new com.twitter.util.Eval).apply[(Int => Int)]("{(x:Int) => x*2}")
    println(ret(4))
            return null:
}
 } 
```

这是一条错误消息：

```
java.lang.RuntimeException: Unable lo load scala interpreter from classpath (scala-compiler jar is missing?)
at com.twitter.util.Eval.liftedTree1$1(Eval.scala:77)
at com.twitter.util.Eval.com$twitter$util$Eval$$compilerPath(Eval.scala:73)
at com.twitter.util.Eval$StringCompiler.<init>(Eval.scala:429)
at com.twitter.util.Eval.compiler(Eval.scala:110)
at com.twitter.util.Eval.compile(Eval.scala:219)
at evaltest.handlers.SampleHandler.execute(SampleHandler.scala:25) 
```

我收到了其他一些以“红色”字体显示的错误消息：

```
when processing type mungers evaltest.handlers.SampleHandler
when processing type mungers 
when weaving 
[Xlint:cantFindType]
[eval_test_plugin] error can't determine modifiers of missing type    
org.eclipse.jdt.ui.SharedASTProvider$WAIT_FLAG
when processing type mungers evaltest.handlers.SampleHandler
when processing type mungers 
when weaving 
... 
```

简单地说，我想创建一个插件来解释从插件用户输入的 scala 脚本并执行该脚本。为了实现这一点，“评估”功能是必不可少的。

所以，请让我知道一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:52:58.017

检查您的文件中是否依赖于`org.scala-ide.scala.compiler`under 。`Require-Bundle``MANIFEST.MF`

# javascript - JavaScript 中的正则表达式，如果使用后跟问号的分组，则始终为“未定义”

> ID：13339785
> 
> 赞同：3
> 
> 时间：2012-11-12T07:32:07.677
> 
> 标签：javascript, regex, node.js

我要做的是提取匹配模式，但其中一种模式可能是可选的。我们直接上例子。

我要匹配的目标文本是，

```
<foo>\n<bar>\n#####<foo>\n#####<bar> 
```

我的正则表达式是，

```
/(#{5})?/ 
```

（*我在这里使用 ? 的原因是因为特定的模式可能是可选的。例如，我不希望匹配完全错过，而不仅仅是这个模式的“未定义”。*）

我期望 str.match() 返回的是，

```
[ '#####',
  '#####',
  index: 12,
  input: '<foo>\n<bar>\n#####<foo>\n#####<bar>' ] 
```

但实际上是，

```
[ '',
  undefined,
  index: 0,
  input: '<foo>\n<bar>\n#####<foo>\n#####<bar>' ] 
```

如果我改用以下模式，它会正常工作。

```
/(#{5})+/ 
```

为什么？

我在 nodejs/chrome 和 IE 中都试过这个，但都没有工作，这意味着这种行为在 JS 引擎中是一致的。但它的行为方式与我尝试过的许多工具之一[regexpal 不同](http://regexpal.com/)。我不确定这是工具本身的问题还是只是不同的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:11:27.140

```
var re = /(#{5})/;
console.log ("<foo>\n<bar>\n#####<foo>\n#####<bar>".match (re));
console.log ("<foo>\n<bar>\nfoo>\n<bar>".match (re)); 
```

输出：

```
[ '#####',
  '#####',
  index: 12,
  input: '<foo>\n<bar>\n#####<foo>\n#####<bar>' ]
null 
```

如果它是可选的，则正则表达式在没有匹配项时失败，如果失败则返回 null。

```
> /a/.exec("a")
[ 'a', index: 0, input: 'a' ]
> /a/.exec("b")
null
> "a".match(/a/)
[ 'a', index: 0, input: 'a' ]
> "b".match(/a/)
null 
```

另外，不要使用 String#match()，它比 RegExp#exec() 慢，并且返回相同：

[匹配（）与执行（）](http://jsperf.com/string-match-vs-regexp-test/3)

# javascript - 建立在其他对象构造函数之上的对象构造函数

> ID：13339786
> 
> 赞同：0
> 
> 时间：2012-11-12T07:32:08.910
> 
> 标签：javascript, node.js, object

我目前正在将一个相当大的 actionscript 库转换为在我的 nodejs 项目中工作。在这样做的时候，我偶然发现了一些可能是个问题的东西：从类中构建类。

有没有办法使用一个对象作为另一个对象的基础（IE：从基础对象继承所有成员，然后从扩展对象覆盖同名成员）？

现在这就是我正在做的事情，虽然现在管理起来有点困难，因为有 3 个以上的类构建在另一个之上：

```
// The base object which others may extend
function A() {
    this.a = "pie";
}
A.prototype.yum = function() {
    return this.a + " is AWESOME!";
}

// The "extends A" object.
// Instead of creating an instance of "B", I current just create an instance of "A",
// then adding the members from "B" to it at which point I return the "A" instance.
function B() {
    var a = new A();
    a.b = "pie";
    // Notice how I have to declare the overwriting function here instead of being able 
    // to drop it into B's prototype. The reason this bothers me is instead of just
    // having one copy of the function(s) stored, each time a "new B" is created the
    // function is duplicated... for 100s of "B" objects created, that seems like poor
    // memory management
    a.yum = function () {
        return "I like " + this.a + " and " + this.b;
    };
    return a;
}
console.log((B()).yum()); 
```

是否可以按照以下方式做一些事情？
*我知道这是无效的，但它给出了这个想法。*

```
function A(){
    this.a = "pie"
}
A.prototype.yum = function () {
    return this.a + " is AWESOME!";
}
function B(){
    // Throws an "illegal left hand assignment" Exception due to overwriting `this`;
    this = new A();
    this.b = "cake"
}
B.prototype.yum = function () {
    return "I like "+this.a+" and "+this.b;
}
console.log((new B()).yum()); 
```

注意：
1：我知道 javascript 没有类；它使用对象和原型。不然我也不会问。
2：这不是要转换的实际代码（尝试）；这是一个普遍的例子
3：请不要推荐图书馆。我知道有时它们很有价值，但我宁愿不必为项目维护、依赖和包含整个库。

**回答**： 我知道改变原生成员原型是不好的形式，但我认为这是值得的，因为它缺乏可能的功能，而且它的大小。

```
Object.prototype.extendsUpon = function (p) {
    var h = Object.prototype.hasOwnProperty;
    for(var k in p)if(h.call(p,k))this[k]=p[k];

    function c(c){this.constructor=c;}
    c.prototype = p.prototype;
    this.prototype = new c(this);
    this.__base__ = p.prototype;
}

function object_Constructor_built_ontop_of_another_constructor() {
    this.extendsUpon(base_Object_to_built_atop_off);
    this.__base__.constructor.apply(this, arguments);

    // From here proceed as usual

    /* To access members from the base object that have been over written,
    * use "this.__base__.MEMBER.apply(this, arguments)" */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:40:49.243

很有可能。您可以通过多种方式进行操作，coffeescript 中使用的更完整：

```
 var ClassBase, ClassTop,
      __hasProp = {}.hasOwnProperty,
      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

    ClassBase = (function() {

      function ClassBase() {}

      return ClassBase;

    })();

    ClassTop = (function(_super) {

      __extends(ClassTop, _super);

      function ClassTop() {
        return ClassTop.__super__.constructor.apply(this, arguments);
      }

      return ClassTop;

    })(ClassBase); 
```

会有一些样板代码。`ClassTop`继承了一切`ClassBase`。`__extend`除了a ， a和一些构造函数样板之外，这些类内部没有太多内容，`(function(_super...`但它相当简单。

继承主要由具有`__extends`魔力的样板管理。完整的`__extends`方法在这里美化：

```
 __extends = function (child, parent) {
        for (var key in parent) {
            if (__hasProp.call(parent, key)) child[key] = parent[key];
        }
        function ctor() {
            this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
    }; 
```

再一次，没有以前那么可怕了。您基本上是在检查父级拥有的属性并将它们应用于子级。更多信息可以在这里找到：[http ://www.jimmycuadra.com/posts/coffeescript-classes-under-the-hood](http://www.jimmycuadra.com/posts/coffeescript-classes-under-the-hood)

# perl - 正则表达式匹配perl中的文件路径

> ID：13339787
> 
> 赞同：-2
> 
> 时间：2012-11-12T07:32:21.597
> 
> 标签：perl

我是 Perl 的新手，我正在尝试提取文件的路径。请帮助我使用合适的正则表达式，这是我的代码：

```
$string = "D:/EZ-VPN/NKEMSL0-V02.txt------vpnclient server 156.37.253.97"; 
```

我想提取`"D:/EZ-VPN/NKEMSL0-V02.txt"`并将`"156.37.253.97"`其存储在 2 个标量变量中。请建议一个正则表达式来提取这些。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:51:07.107

```
#!/usr/bin/perl

use strict;

my $string = "D:/EZ-VPN/NKEMSL0-V02.txt------vpnclient server 156.37.253.97"; 

$string =~ m/(.*?)--+.* (\d+\.\d+\.\d+\.\d+)/;

print $1."\n";
print $2."\n"; 
```

这应该适合你。

Perl 从变量中正则表达式的括号（所谓的捕获组）收集结果`$1, $2 ... $n`。

文件名在`$1`，IP地址在`$2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T07:53:55.890

使用 6 个连续破折号的字符串来标记路径的结尾：

```
my($path, $ipaddress) = ($string =~ m/(.*?)------.* (\d+\.\d+\.\d+\.\d+)/); 
```

测试脚本：

```
#!/usr/bin/env perl
use strict;
use warnings;
my $string = "D:/EZ-VPN/NKEMSL0-V02.txt------vpnclient server 156.37.253.97"; 
my($path, $ipaddress) = ($string =~ m/(.*?)------.* (\d+\.\d+\.\d+\.\d+)/);
print "path = $path; IP = $ipaddress\n"; 
```

输出：

```
path = D:/EZ-VPN/NKEMSL0-V02.txt; IP = 156.37.253.97 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T08:16:25.410

```
my ($x, $y) = split /------/, $string;
my ($z) = $y =~ /(\S+)\z/; 
```

# asp.net - GridView 未触发 SelectedIndexChanged

> ID：13339788
> 
> 赞同：0
> 
> 时间：2012-11-12T07:32:23.303
> 
> 标签：asp.net, vb.net, gridview, extension-methods

嗨，我已经在 GridView 上编写了这个扩展方法。更改所选索引后，我希望触发 SelectedIndexChanged 事件。但是，这并没有发生。有什么特别的原因吗？我怎样才能解决这个问题？

```
<Extension()>
       Public Sub SelectRowByCallId(ByVal gridviewObj As GridView, ByVal callId As String)
        Dim selectedIndex As Int32 = 0
        Dim pageIndex As Int32 = 0
        Dim gridViewPages As Int32 = gridviewObj.PageCount

        For index = 0 To gridViewPages
            gridviewObj.PageIndex = index
            gridviewObj.DataBind()

            For i = 0 To gridviewObj.DataKeys.Count - 1
                If (Convert.ToString(gridviewObj.DataKeys(i).Value) = callId) Then
                    selectedIndex = i
                    pageIndex = index
                    Exit For
                End If

            Next i

        Next index

        gridviewObj.PageIndex = pageIndex
        gridviewObj.SelectedIndex = selectedIndex
        gridviewObj.DataBind()

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:07:17.947

如果 Aristos 是对的，则将 AutoPostBack 设置为 True

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:12:01.037

设置`SelectedIndex`属性不会触发事件，但调用`SelectRow`方法会。

# sql - 从 3 个不同的表中更新字段

> ID：13339790
> 
> 赞同：2
> 
> 时间：2012-11-12T07:32:25.923
> 
> 标签：sql

我有一个使用以下 3 个表格的问题：

```
1\. Company (table)
CONAME
COPOINTS

2\. Group_Member (table)
CONAME
NAME

3\. Member (table)
NAME
MPOINTS 
```

我想有一个正确的查询，条件如下：

```
Update Member
Set MPOINTS=MPOINTS+5
Where Company.CONAME=Group_Member.CONAME
And
Group_Member.NAME=Member.NAME 
```

你能更正上面的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:38:34.390

在 T-SQL（MS-SQL Server 方言）中，这将是

```
Update Member
   set MPOINTS = MPOINTS + 5
  from Group_Member 
       join Company on Company.CONAME = Group_Member.CONAME
 where Group_Member.NAME = Member.NAME 
```

我想提醒您，名称对于主键和外键关系都不是一个好的选择。如果不违反主键约束，您将永远无法更改名称。请改用（数字、自动增量）ID 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:38:37.137

尝试这个：

```
Update M
Set    MPOINTS=MPOINTS+5
from   Member M 
join   Group_Member GM
on     GM.NAME=M.NAME
join   Company C
on     C.CONAME=GM.CONAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:44:12.230

SQL Server 2005+

```
UPDATE x
SET x.MPOINTS += 5
FROM (SELECT m.MPOINTS FROM Company c JOIN Group_Member g ON c.CONAME = g.CONAME
                                      JOIN Member m ON g.NAME = m.NAME) x 
```

# jsf-2 - Primefaces p:remotecommand 在 IE 8 中不起作用

> ID：13339791
> 
> 赞同：5
> 
> 时间：2012-11-12T07:32:27.623
> 
> 标签：jsf-2, primefaces

我在我的 JSF 应用程序中使用 p:remoteCommand。我有 7 个不同的 p:remoteCommand 声明在 bean 中调用不同的操作。点击按钮，同时调用这 7 个远程命令。调用了 JS 函数，但有时没有执行对服务器的请求，这仅在 IE 上发生。我只在 IE 8 上测试过。

我试图检查在 AJAX 中返回的错误是什么，但我得到的只是 xhr=error、status=Unknown 和 error=undefined。

我的功能和 p:remoteCommand 如下：

```
function loadResult() {
    loadSmry();
    load1();
    load2();
    load3();
    load4();
    load5();
    load6();
}

<p:remoteCommand id="loadId" 
                 name="loadSmry"  
                 async="true"
                 action="#{designBean.saveSmry}"
                 process="@this"
                 onsuccess="summaryCount=0;"
                 onerror="handleXhrError(xhr, status, error)"
                 update="logId"/>   

<p:remoteCommand id="loadId1" 
                 name="load1"  
                 async="true"
                 action="#{designBean.showChrt1}"
                 onstart="showAjaxLoader('begin',1)" 
                 oncomplete="showAjaxLoader('success',1)"
                 onerror="handleXhrError(xhr, status, error)"
                 process="@this"                     
                 update="chart1" />

<p:remoteCommand id="loadId2" 
                 name="load2"  
                 async="true"
                 action="#{designBean.showChrt2}"
                 onstart="showAjaxLoaderForSummary('begin',2)" 
                 oncomplete="showAjaxLoader('success',2)"
                 onerror="handleXhrError(xhr, status, error)"
                 process="@this"                     
                 update="chart2" />

<p:remoteCommand id="loadId3" 
                 name="load3"  
                 async="true"
                 action="#{designBean.showChrt3}"
                 onstart="showAjaxLoader('begin',3)" 
                 oncomplete="showAjaxLoader('success',3)"
                 onerror="handleXhrError(xhr, status, error)"
                 process="@this"                     
                 update="chart3" />

<p:remoteCommand id="loadId4" 
                 name="load4"  
                 async="true"
                 action="#{designBean.showChrt4}"
                 onstart="showAjaxLoader('begin',4)" 
                 oncomplete="showAjaxLoader('success',4)"
                 onerror="handleXhrError(xhr, status, error)"
                 process="@this"                     
                 update="chart4" />

<p:remoteCommand id="loadId5" 
                 name="load5"  
                 async="true"
                 action="#{designBean.showChrt5}"
                 onstart="showAjaxLoader('begin',5)" 
                 oncomplete="showAjaxLoader('success',5)"
                 onerror="handleXhrError(xhr, status, error)"
                 process="@this"                     
                 update="chart5a chart5b" />

<p:remoteCommand id="loadId6" 
                 name="load6"  
                 async="true"
                 action="#{designBean.showChrt6}"
                 onstart="showAjaxLoader('begin',6)" 
                 oncomplete="showAjaxLoader('success',6)"
                 onerror="handleXhrError(xhr, status, error)"
                 process="@this"                     
                 update="chart6" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:37:42.520

我可以看到您正在使用`async="true"`所有远程命令。根据 bean 的类型，这可能是有问题的。您正在尝试以异步方式执行这些命令。如果这是绝对必要的，可能回答可能无济于事，但请更改`async="true"`为`async="false"`. 这很可能会解决您的问题。

[primefaces论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=13580)上也报告了这个问题，这也有帮助。

# jquery - 带有 jquery 和 php 的 ajax 错误：错误 {“readyState”:0,“responseText”:“”,“status”:0,“statusText”:“error”}

> ID：13339795
> 
> 赞同：1
> 
> 时间：2012-11-12T07:32:36.770
> 
> 标签：jquery

这是我的 html/jquery 的（一部分）：

```
<script type="text/javascript">
        $(document).ready(function(){
                $("form").submit(function(){
                    var_form_data = $(this).serialize();

                    $.ajax({
                        url: "/userHandler.php",
                        data: var_form_data,
                        datatype:"json",
                        type:"POST",
                        success: function(status){
                            console.log("made it");
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                            console.log("failed");
                        }       
                    }); 
                });
        }); 
```

这是整个 php 文件：

```
<?php
echo json_encode("got to php file!!!"); 
```

?>

错误代码总是运行并显示我在标题中输入的内容，这对我没有多大帮助。显然不是跨域错误。有谁知道怎么了？

谢谢。

# forms - 如何为表单验证创建唯一约束对象？

> ID：13339797
> 
> 赞同：0
> 
> 时间：2012-11-12T07:32:45.857
> 
> 标签：forms, mongodb, symfony, validation, symfony-2.1

我需要在控制器动作中动态添加约束，所以我这样做：

```
use Doctrine\Bundle\MongoDBBundle\Validator\Constraints\Unique;

// ...

    $form = $this->createFormBuilder($user)
        ->add('email', 'email', array(
            'constraints' => array(
                new NotBlank(),
                new MinLength(8),
                new MaxLength(100),
                new Email(),
                new Unique(),
            ),
        ))
        ->getForm(); 
```

但我得到这个错误：

`The options "fields" must be set for constraint Doctrine\Bundle\MongoDBBundle\Validator\Constraints\Unique`

我尝试将`array('fields' => 'email')`and传递`array('fields' => array('email'))`给构造函数，但没有奏效：`Warning: get_class() expects parameter 1 to be object, string given in /home/www/dev/public/pixfeed/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/Validator/Constraints/UniqueEntityValidator.php line 63`

那么如何使用这个类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:19:21.750

Doctrine\Bundle\MongoDBBundle\Validator\Constraints\Unique 类通常用于整个 Document。例如

```
/**
 * @MongoDB\Document(collection="users")
 * @MongoDBUnique(fields="email")
 */
class User 
```

在我看来，这在 ORM/ODM 级别上更有意义，而不仅仅是检查用户输入是否是唯一的。但是，如果您被迫在 Form 中执行此操作，则可以编写[自定义约束](http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html)。

# android - 字母跟踪 - 动态支持多个屏幕和方向？

> ID：13339800
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:32:52.633
> 
> 标签：android, animation

![我正在开发一个应用程序，用户可以在其中跟踪字母的路径。

1.  有一个动画（移动蝴蝶）显示要跟踪的字母的路径。
2.  应用程序的动画运行良好，但蝴蝶动画位置的坐标是硬编码的。
3.  但是当我尝试在更大的屏幕上运行相同的应用程序时，蝴蝶的动画与字母不同步。
4.  可以看到在大屏幕上拍摄的应用程序屏幕截图（动画与字母不同步）。

现在我的问题是， **无论屏幕大小和方向如何，如何确定字母的位置并动态调整蝴蝶动画。**

[http://i.imgur.com/1BrIJ.png](http://i.imgur.com/1BrIJ.png)

上图是蝴蝶动画的正确路径

[http://i.imgur.com/94dbI.png](http://i.imgur.com/94dbI.png)

上图是蝴蝶动画的错误路径

请帮助我并提前感谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:43:35.397

您的问题的整个描述有点不清楚，但我猜您必须在绘制的路径/字母路径中添加一些缩放因子以反映不同的屏幕尺寸。从构建屏幕的代码中应该已经知道缩放因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:43:41.133

Google 在他们的开发控制台中有一个新功能，它允许您为不同的屏幕尺寸发布不同的 .apk。但是因为您不想更改图片大小，所以您似乎不太可能想要这样做。

*   这是谷歌页面的链接 - [http://developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

您可以尝试使用它，或者您可以根据屏幕大小更改蝴蝶的路径

```
if ((getResources().getConfiguration().screenLayout & 
Configuration.SCREENLAYOUT_SIZE_MASK) ==  Configuration.SCREENLAYOUT_SIZE_XLARGE) {
// set the path of the butterfly for tablets
}else{
//set path of the butterfly for phones
} 
```

获取安卓设备的屏幕尺寸

*   [如何使用代码确定设备屏幕尺寸类别（小、正常、大、xlarge）？](https://stackoverflow.com/questions/5015094/determine-device-screen-category-small-normal-large-xlarge-using-code)

如果您想更具体并根据确切的屏幕尺寸设置蝴蝶的路径，那么这可能会有所帮助 -

*   [以像素为单位获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:08:32.530

您是否正在让蝴蝶穿过由字母位置的像素值定义的路径？

# c# - C#中Datagridview处理启动报错，如何解决？

> ID：13339806
> 
> 赞同：0
> 
> 时间：2012-11-12T07:33:50.727
> 
> 标签：c#, .net-4.0, datagridview

我在 C# .net 4 中使用 datagridview 来开发我的应用程序。有时在我的应用程序启动时，我的 datagridview 没有完全处理，它使应用程序崩溃或者我必须重新启动应用程序。

摆脱它所需的建议。我使用“for”循环在数据网格内创建数据网格的列和行。这可能是延迟处理的原因之一......

![Datagridview 未完全处理](../Images/2f1347c0df6a1f66b6386ccd1518a506.png)

```
 private void Create_Datatables()
       {
        ////////////////////  Create data tables, row and Columns in the Datagrids ////////////////////////////////

        DataTable[] Panel_tables = new DataTable[28];

        for (int i = 0; i <= 27; i++)
        {
            Panel_tables[i] = new DataTable();
        }

        int length_col = 16;

        for (int i = 1; i <= length_col; i++)
        {
            Panel_tables[0].Columns.Add(i.ToString());
        }

        int length_row = 2;
        for (int i = 1; i <= length_row; i++)
        {
            Panel_tables[0].Rows.Add("", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "");
        }

        int dg_main = 23;
        for (int i = 0; i < dg_main; i++)
        {
            Panel_tables[i + 1] = Panel_tables[i].Copy();
        }

        dataGridView1.DataSource = Panel_tables[0];
        dataGridView2.DataSource = Panel_tables[1];
        dataGridView3.DataSource = Panel_tables[2];
        dataGridView4.DataSource = Panel_tables[3];
        dataGridView5.DataSource = Panel_tables[4];
        dataGridView6.DataSource = Panel_tables[5];
        dataGridView7.DataSource = Panel_tables[6];
        dataGridView8.DataSource = Panel_tables[7];
        dataGridView9.DataSource = Panel_tables[8];
        dataGridView10.DataSource = Panel_tables[9];
        dataGridView11.DataSource = Panel_tables[10];
        dataGridView12.DataSource = Panel_tables[11];
        dataGridView13.DataSource = Panel_tables[12];
        dataGridView14.DataSource = Panel_tables[13];
        dataGridView15.DataSource = Panel_tables[14];
        dataGridView16.DataSource = Panel_tables[15];
        dataGridView17.DataSource = Panel_tables[16];
        dataGridView18.DataSource = Panel_tables[17];
        dataGridView19.DataSource = Panel_tables[18];
        dataGridView20.DataSource = Panel_tables[19];
        dataGridView21.DataSource = Panel_tables[20];
        dataGridView22.DataSource = Panel_tables[21];
        dataGridView23.DataSource = Panel_tables[22];
        dataGridView24.DataSource = Panel_tables[23];

        for (int i = 0; i < length_col; i++)
        {
            Panel_tables[24].Columns.Add(i.ToString());
        }

        length_row = 3;

        for (int i = 0; i < length_row; i++)
        {
            Panel_tables[24].Rows.Add("", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "");
        }

        int dg_xio = 27;

        for (int i = 24; i < dg_xio; i++)
        {
            Panel_tables[i + 1] = Panel_tables[i].Copy();
        }

        dataGridView25.DataSource = Panel_tables[24];
        dataGridView26.DataSource = Panel_tables[25];
        dataGridView27.DataSource = Panel_tables[26];
        dataGridView28.DataSource = Panel_tables[27];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:49:24.473

尝试使用本地变量的值登录文件，并查看是否有任何网格因变量而引发异常。

您可以在此配置中使用 log4net

```
<log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
      <param name="File" value="C:\Try\log.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>

  </log4net> 
```

# c# - HTMLElement 的 GetAttribute("html") 或 GetAttribute("text") 不返回值

> ID：13339808
> 
> 赞同：0
> 
> 时间：2012-11-12T07:33:57.083
> 
> 标签：c#, getelementsbytagname, getattribute, getelementsbyname

使用此示例，我如何使用 C# HTMLElement 的 Get 属性在此行上获取“GOOGLE CLICK”。假设这个元素是使用 getElementByTagName 吸收的。我不确定要使用哪种属性我已经尝试过在 java 上工作的“ **html** ”和“ **text** ”（例如**element.GetAttribute("html")**）属性，但遗憾的是不在 c# 上。

```
<a href="www.google.com">GOOGLE CLICK</a> 
```

供参考的是我正在尝试运行的 c# 示例代码。

```
//web is the current page i am at.
        HtmlElementCollection links = web.Document.GetElementsByTagName("a");
        foreach (HtmlElement link in links)
        {
            if (link.GetAttribute("text") == "GoogleClick")
                MessageBox.Show(this, "Hooray I got it!");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:38:02.223

“Google Click”不是属性，而是内部文本。

```
HtmlElementCollection links = web.Document.GetElementsByTagName("a");
foreach (HtmlElement link in links)
{
    if (link.InnerText == "GoogleClick")
        MessageBox.Show(this, "Hooray I got it!");
} 
```

# javascript - 如何防止输入框中出现数字而只显示文字？

> ID：13339809
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:34:02.100
> 
> 标签：javascript

我找到了一个有效的脚本，但我不知道它是如何工作的。

这个`split()`例子使用的方法让我很头疼。有谁知道这个`split()`方法在这个例子中是如何工作的？我们可以将数字作为第一个参数传递给`split()`方法吗？那是一个分隔符，如果它是为什么它没有用引号括起来？

**脚本**

```
function noNumbers(field) {
   for ( var i = 0; i < 10; i++ ) {
      field.value = field.value.split(i).join("");
    }
} 
```

**HTML**

```
 <form>
   Type some text (numbers not allowed):
    <input type="text" onkeyup="noNumbers(this);" />
   </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:40:34.283

基本上`noNumbers`采用字符串并将其拆分为给定标记处的数组，在这种情况下，数字存储在`i`. 之后，通过在各部分之间使用空字符串再次加入数组。

由于您对所有数字执行此操作，因此您的结果不包含任何数字。

### 例子

```
"1213Test".split(0).join("")
  == ["1213Test"].join("")
  == "1213Test"

"1213Test".split(1).join("")
  == ["","2","3Test"].join("")
  == "23Test"

"23Test".split(2).join("")
  == ["","3Test"].join("")
  == "3Test"

"3Test".split(3).join("")
  == ["","Test"].join("")
  == "Test" 
```

如果您感到困惑，因为`i`is an integer:`split`将字符串作为参数，因此`split(i)`与`split(i.toString())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:42:55.767

在这种情况下，脚本循环十进制数字`0, 1, 2...9`，并为每个数字生成一个`split(digit).join()`. split 方法返回一个没有数字的字符数组。喜欢：

```
"This 1s an example".split(1)
["This ", "s an example"] 
```

并用`join("")`它将数组连接回字符串：

```
["This ", "s an example"].join("")
"This s an example" 
```

# haskell - Haskell“库”

> ID：13339813
> 
> 赞同：9
> 
> 时间：2012-11-12T07:34:22.420
> 
> 标签：haskell, compilation, shared-libraries

在 C 中，可以将代码拆分为“头文件”和实现，编译实现，然后仅分发编译后的版本和头文件（不是完整的源代码）。

这在 Haskell 中可行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T07:41:43.213

GHC 允许这样做，但当然您的代码将绑定到特定的二进制平台。

在这里检查：

[http://www.haskell.org/ghc/docs/2.10/users_guide/user_174.html](http://www.haskell.org/ghc/docs/2.10/users_guide/user_174.html)

或更多更新的解释：

[http://www.haskell.org/ghc/docs/7.0.3/html/users_guide/separate-compilation.html](http://www.haskell.org/ghc/docs/7.0.3/html/users_guide/separate-compilation.html)

特别是，查找 .hi 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:42:19.717

这样做是很有可能的。当 GHC 编译一个 Haskell 模块（即一个`*.hs`文件）时，它会在一个目标文件中生成可执行代码`*.o`，同时也是一个`*.hi`“接口文件”。您只需要目标文件和接口文件即可使用编译后的代码。

然而，与 C 不同的是，Haskell 的运行时细节并没有正式标准化。因此，您不能将使用不同 Haskell 编译器编译的代码链接在一起；结果行不通。事实上，通常你甚至无法将使用不同版本的 GHC 编译的代码链接在一起。并不是说这样做有什么“不可能”，只是还没有人标准化这些东西，所以目前它不起作用。

最近，还可以将 Haskell 代码编译成“动态库”（Windows 上的 DLL，`*.so`Unix 上的文件）。同样，您仍然需要`*.hi`针对这些文件进行编译，但在运行时您只需要库文件本身。

请注意，GHC 倾向于进行*大量*跨模块优化，这在一定程度上降低了动态链接的实用性。（这有点像试图“编译”一个 C++ 模板库......）

如果您只是对人们看不到您的源代码或不必向最终用户提供 Haskell 编译器感兴趣，那么这些当然都不重要。

# mysql - 是在 mysql 中为所有博客文章评论创建一个大表，还是为每个文章创建多个表更好？

> ID：13339814
> 
> 赞同：1
> 
> 时间：2012-11-12T07:34:23.223
> 
> 标签：mysql, database, comments, blogs

我正在我的网站上创建一个类似于博客的功能。该博客用于发布翻译后的歌词，将达到约 200 篇文章。
我正在为这个博客在 mysql 中创建一个评论数据库。为每个博客文章创建一个表来存储评论，或者一个表来存储所有博客评论，并且只有一个标签来标识评论所在的博客文章，会更好吗？后者是否有任何性能影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:42:03.767

为“帖子”创建一个表，为“评论”创建一个表。

在您的“评论”表中，有一个名为“post_id”（或类似名称）的字段，因此您知道评论属于哪个帖子。

没有必要比这更多的桌子，任何超出的东西都是多余的。

至于速度 - 如果你真的想说你只会达到 200 个帖子，那么你现在真的不需要太担心速度。当您计划达到 200 万条帖子和评论时，可能需要考虑更多，但现在，只需设计好数据库（如上所述），确保它的索引正确，然后您就可以开始了.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:39:48.450

正常的设计原则会规定一张桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:39:58.230

一张桌子。

任何涉及无限数量的表（例如，每个帖子一个表）的数据库模式都是错误的。除了一些非常特殊的情况（分片和分区）之外，你永远不应该有多个表代表同一种数据。

# android - Android：从队列中更新 UI

> ID：13339815
> 
> 赞同：1
> 
> 时间：2012-11-12T07:34:38.240
> 
> 标签：android, networking, user-interface, queue

我正在[为我当地的电影院建立一个粉丝应用程序](https://stackoverflow.com/questions/13329537/android-http-requests-in-asynctask-are-not-concurrent)。该应用程序检索筛选计划，该计划存储为具有基本数据`List`的`Film`对象 - 名称和筛选时间。

对于每部电影，我对cinematheque 站点中的电影页面进行异步HTTP 调用，以检索完整数据——描述、年份、长度。结果被解析，转换为`FilmData`对象，并插入到`BlockingQueue`.

我希望 UI 线程在 HTTP 调用返回数据时更新电影描述。我不能使用`take()`or `poll()`，因为它们冻结了 UI 线程。

我想到了两个策略：

*   `BlockingQueue`从外部线程轮询，并使用[`runOnUiThread`](https://stackoverflow.com/questions/10801804/android-update-ui-from-thread).
*   用于以[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)非阻塞方式轮询队列。

当任何网络调用完成时更新 UI 是 Android 应用程序中非常常见的场景。正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:21:13.573

使用`Handler`. 例如，一旦 HTTP 调用完成并且您创建了 FilmData 对象，将处理程序消息发布到`Activity`. 在 的`handleMessage`方法中`Handler`，更新 UI。

# c# - 如何在 silverlight 中与 Combobox 绑定

> ID：13339817
> 
> 赞同：1
> 
> 时间：2012-11-12T07:34:42.653
> 
> 标签：c#, silverlight, xaml

我想将我的国家集合绑定到一个组合框。

我的 XAML 页面如下所示：

```
<pmControls:pmComboBox 
    Margin="3" Grid.Row="5" Grid.Column="1"  
    ItemsSource="{Binding Path=Countries}" 
    SelectedValue="{Binding Title,Mode=TwoWay}" >
</pmControls:pmComboBox> 
```

我想将标题显示为 DataTextField。

目前它在我的组合框列表中显示国家类的命名空间。我也尝试添加 DisplayMemberPath 但它也不起作用。

如何设置组合框的显示字段以使用绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:41:51.013

我认为你需要做

```
DisplayMemberPath="Title"
SelectedValuePath="Title"
SelectedValue="{Binding Path=Country,Mode=TwoWay}" 
```

# excel - 移动 Excel 图表，使其保持在视图中

> ID：13339820
> 
> 赞同：0
> 
> 时间：2012-11-12T07:34:57.387
> 
> 标签：excel, vba

我想在 excel 中移动一个图表，以便它始终可见。如果用户单击某个单元格，则图形必须移动以使其再次可见。我知道如何移动图表，但是如何获得最顶部可见单元格的 y（或顶部）值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:48:52.670

您可以使用它来获取对屏幕上当前可见范围的引用

```
Set rngVisible = ActiveWindow.ActivePane.VisibleRange 
```

当用户更改选择时，这个小演示将保持位于可见屏幕左上角的特定形状（在相关工作表模块中编码）

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    Dim shp As Shape
    Dim rngVisible As Range

    Set rngVisible = ActiveWindow.ActivePane.VisibleRange
    Set shp = Me.Shapes("MyShape")

    shp.Top = rngVisible.Top
    shp.Left = rngVisible.Left
End Sub 
```

# google-cloud-messaging - 当应用程序被强制关闭时，GCM 不起作用，为什么 facebook 应用程序仍然有效？

> ID：13339823
> 
> 赞同：2
> 
> 时间：2012-11-12T07:35:15.430
> 
> 标签：google-cloud-messaging, forceclose

好的，我最近一直在玩 GCM，似乎当您强制关闭您的应用程序时，无法再收到 GCM 消息。

所以问题是FB应用程序是如何工作的？即使我强制关闭它，它仍然会发送 GCM 通知？！！！任何想法？

# qt - Qt Embedded 和 Qt for Desktop 的区别

> ID：13339824
> 
> 赞同：1
> 
> 时间：2012-11-12T07:35:20.500
> 
> 标签：qt

我看过很多关于 Qt Embedded 和 Qt for Desktop 的文档。但不清楚区别。有人可以解释一下差异吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:53:35.840

Qt for DEsktop LInuxQt/X11 构建在 x11 窗口系统之上，但 Qt for Embedded Linux 提供了自己的窗口系统，因此对 RAM 和 ROM 的要求较低。使用 Qt for Embedded Linux，应用程序将直接访问显示器以获得最佳图形性能。尽管如此，用于开发应用程序的 API 对于 Qt/X11 和 Qt for Embedded Linux 是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:39:33.383

正如内核狂人所说，Qt for Linux 构建在 X11 服务器之上。Qt for Embedded Linux 提供了自己的窗口系统名称 QWS。相对于 X11，它的内存更小，直接绘制到帧缓冲区，或者可能利用其他库来编写，如 DirectFB。

相对于 X11，它远没有那么先进，而且很难为其添加硬件加速。我想这是他们在 Qt 5.0 的嵌入式 Linux 上完全放弃 Qt 的主要原因之一。所以考虑它不再可用。它被使用 QPA 实现的驱动程序所取代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:45:43.547

QT Embedded 旨在为嵌入式系统构建应用程序。

如果你不知道那是什么，你可以点击[这里](http://en.wikipedia.org/wiki/Embedded_system)。

Qt for Desktop 用于将应用程序部署到 Linux、Windows 等流行的操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T23:40:09.933

目前（Qt 4.8.3）Linux/X11 和嵌入式 Linux 的两个链接指向同一个文件：[http ://releases.qt-project.org/qt4/source/qt-everywhere-opensource-src-4.8.3 .tar.gz](http://releases.qt-project.org/qt4/source/qt-everywhere-opensource-src-4.8.3.tar.gz)

我怀疑曾经存在差异（也许从 Digia 负责为某些平台创建修补 Qt 的时候开始？），但现在情况不再如此。查看 Qt 存档 (ftp://ftp.qt.nokia.com/qt/source/)，似乎 Qt 的一个不同的、特定的“嵌入式”发行版在 4.5.x 之后结束。

# javascript - 如何将 javascript 验证添加到选择字段并检查有效选项？

> ID：13339827
> 
> 赞同：1
> 
> 时间：2012-11-12T07:35:31.607
> 
> 标签：javascript, sharepoint, sharepoint-2010, choice, choicefield

我在 SharePoint 2010 列表中有一个选择字段，它的第一选择是请选择。现在我想要我们可以验证用户是否选择了除请选择之外的任何选项的功能，即用户不应该选择“请选择”作为选项。发生这种情况时应该显示错误。如果我能得到 javascript，这将是一个很大的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:15:43.647

您可以检查所选值文本是否等于“请选择”，如果是，则向用户显示警报，告诉他们使用以下代码选择一个值：

```
function validateForm() { 
    var elem = document.getElementById("yourElementID");
    var selectedText = elem.options[elem.selectedIndex].text;
    if (selectedText == "please select") {
        alert("Please select a value");
        return false;
    }
} 
```

`return false;`如果您将此代码附加到表单提交以进行验证，这一点很重要，因为它会阻止表单被提交。

`onSubmit`您可以通过执行以下操作将此功能附加到您的表单事件：

```
<form action="..." method="..." onsubmit="return validateForm()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:37:27.753

其很好的解决方案在 answer.but 中进行了解释。但是如果您想像保存项目之前`MitchS`一样在 ListItem 表单上实施。`NewForm, EditForm`比你应该使用[PreSaveAction()](http://spandps.com/2011/01/25/useful-javascript-function-presaveaction-sp2010-sharepoint-ps2010-projectserver-in/)

```
 function PreSaveAction()   
   {
     if($("select[title='My Choice'] option:selected").val() == '')
     {
        alert("Please select.")
        return false;
     }
    else
    {
    return true;
    }

  } 
```

打击脚本根据他的标题属性找到您选择的下拉列表控件。

啤酒花它的帮助！

# ios - 无法链接到应用商店评论页面

> ID：13339835
> 
> 赞同：1
> 
> 时间：2012-11-12T07:36:58.077
> 
> 标签：ios

我试图从我的应用程序中创建指向应用程序商店的链接。我发现很多帖子告诉我这样做：

```
 NSString* appID = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleIdentifier"];\

 NSString* url = [NSString stringWithFormat: @"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=%@", appID];

[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

当我单击链接到此代码的按钮时，我会被重定向到应用商店，但随后会弹出一个窗口并告诉我“无法连接到应用商店”

我错过了什么？这种方法是否已弃用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:59:02.937

发现问题所在：

```
NSString* appID = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleIdentifier"]; 
```

不检索应用程序 ID；为此你必须去iTunes连接

# javascript - javascript onload - 我可以在现有的 onload 之上添加另一个 onload

> ID：13339844
> 
> 赞同：0
> 
> 时间：2012-11-12T07:37:33.560
> 
> 标签：javascript, html, dom, onload, document-ready

> **可能重复：**
> [添加多个 onload 处理程序](https://stackoverflow.com/questions/4558325/adding-multiple-onload-handlers)

我可以在现有的 onload 上添加另一个 onload 回调吗？

我已经在网站上实现了 bigpipe，并且资源（javascript）按需加载，并且在正确加载 javascript 后，然后执行 javascript 代码。

这是我有的javascript代码

```
var code = document.createElement('script');
 code.setAttribute("type", "text/javascript");
 code.setAttribute("src", this.file);
 code.onload = this.onComplete.bind(this);
 code.onreadystatechange = code.onload; // ie fix 
```

执行此代码后，我可以在此之上添加另一个 onload 回调，因此一旦此资源完成加载，它们都会被触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:57:54.243

```
function onDone ()
{
    alert('im done');
}

function onComplete ()
{
    alert('im completed');
}

var code = document.createElement('script');
code.setAttribute("type", "text/javascript");
code.setAttribute("src", '/js/jquery.js');
code.setAttribute("id", 'jquery');
code.onload = onComplete.bind(this);
document.getElementsByTagName("head")[0].appendChild(code);

resource = document.getElementById('jquery');
onloadPrevious = resource.onload;
resource.onload = function () {

     if (typeof onloadPrevious == "function")
         onloadPrevious();
     onDone();

} 
```

# javascript - javascript：属性名的数据类型

> ID：13339846
> 
> 赞同：2
> 
> 时间：2012-11-12T07:37:35.447
> 
> 标签：javascript, properties

只是出于好奇，当我通过 for(var p in object) 遍历一个对象时，是 pa 字符串还是其他什么？我总是只用一个语句来初始化变量，所以我想确保类型在 for 循环中使用之前是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:01:51.373

的值`p`是关键。如果您的对象的所有键都是字符串，那么`p`将始终是一个字符串。如果您遍历[Map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Map)，则键将是对象。这一切都取决于你的对象。但是，是的，大多数时候它将是一个字符串。（很有可能，如果您使用的是地图，则不需要问这个问题。）

确保属性是可枚举属性的旧方法如下：

```
for (var p in myObject) {
    if (myObject.hasOwnProperty(p)) {
        // 'p' is a key for an enumerable property of myObject
    }
} 
```

使用 ES5 的新方法是使用[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)：

```
Object.keys(myObject).forEach(function(p) {
    // 'p' is a key for an enumerable property of myObject
}); 
```

不过，此代码需要 IE9 或旧版浏览器的 shim。简单地说，`Object.keys(myObject)`返回对象键的数组（仅适用于可枚举属性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T07:41:38.833

是的，p in 的类型`for(var p in object)`是 a `string`。

使用此控制结构将对象视为*关联数组*（实际上它们是相同的）。每个属性的键都分配给`p`。

请注意，循环遍历这样的对象将为您提供*所有可枚举的属性*，不仅是您添加到对象的属性，还包括从原型链上继承的任何属性。

您可以将属性限制为您添加的属性，如下所示：

```
for(var p in myObject) {
  if(myObject.hasOwnProperty(p)) {
  }
} 
```

# android - 退出时应用程序意外停止

> ID：13339848
> 
> 赞同：0
> 
> 时间：2012-11-12T07:37:36.700
> 
> 标签：android, forceclose

当我按下后退按钮并需要强制关闭时，我的应用程序意外停止。这是错误日志：

```
11-16 14:57:34.595: E/AndroidRuntime(4899): FATAL EXCEPTION: main
11-16 14:57:34.595: E/AndroidRuntime(4899): java.lang.IllegalStateException
11-16 14:57:34.595: E/AndroidRuntime(4899):     at android.media.MediaPlayer.getDuration(Native Method)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at com.example.musicshare.AndroidBuildingMusicPlayerActivity$1.run(AndroidBuildingMusicPlayerActivity.java:337)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at android.os.Handler.handleCallback(Handler.java:587)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at android.os.Looper.loop(Looper.java:123)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at android.app.ActivityThread.main(ActivityThread.java:3691)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at java.lang.reflect.Method.invoke(Method.java:507)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
11-16 14:57:34.595: E/AndroidRuntime(4899):     at dalvik.system.NativeStart.main(Native Method) 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:40:13.763

查看您的日志：

```
11-12 14:21:20.080: E/AndroidRuntime(8843): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.musicshare/com.example.musicshare.ZoneActivity}; have you declared this activity in your AndroidManifest.xml? 
```

您尚未在 Android 清单上声明 ZoneActivity .. 打开您的 Android 清单并添加：

```
<activity android:name=".ZoneActivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:40:15.000

这就是您感兴趣的信息：

`Unable to find explicit activity class com.example.musicshare/com.example.musicshare.ZoneActivity}; have you declared this activity in your AndroidManifest.xml?`

您的清单中定义的活动似乎在您的代码中不存在。

# windows - Apache 2.4.3（带有 XAMPP 1.8.1）未在 Windows 8 中启动

> ID：13339850
> 
> 赞同：27
> 
> 时间：2012-11-12T07:37:53.307
> 
> 标签：windows, apache, xampp, port

刚刚在我的 Windows 8 PC 上安装了 XAMPP 1.8.1，这个版本包括下面提到的包：

```
Apache 2.4.3
MySQL 5.5.27
PHP 5.4.7
phpMyAdmin 3.5.2.2
FileZilla FTP Server 0.9.41
Tomcat 7.0.30 (with mod_proxy_ajp as connector)
Strawberry Perl 5.16.1.1 Portable
XAMPP Control Panel 3.1.0 (from hackattack142) 
```

当我启动并尝试启动 Apache 时，它​​给出了以下错误：

```
12:04:41 PM  [Apache]   Attempting to start Apache app...
12:04:41 PM  [Apache]   Status change detected: running
12:04:42 PM  [Apache]   Status change detected: stopped
12:04:42 PM  [Apache]   Error: Apache shutdown unexpectedly.
12:04:42 PM  [Apache]   This may be due to a blocked port, missing dependencies, 
12:04:42 PM  [Apache]   improper privileges, a crash, or a shutdown by another method.
12:04:42 PM  [Apache]   Check the "/xampp/apache/logs/error.log" file
12:04:42 PM  [Apache]   and the Windows Event Viewer for more clues 
```

之后我检查了error.log，它是空的，所以没有帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-12T07:37:53.307

所以这是解决方案：

我检查`80`了 Skype 使用的端口，之后我将端口更改为`81`以及在某个地方我读到此错误可能是由于 SSL 端口，然后我将 SSL 端口更改为`444`. 然而，这很容易解决。

这里要注意的最重要的一件事是，所有端口更改都应在配置文件中完成，对于 http 端口更改：**httpd.conf** for SSL **httpd-ssl.conf**。否则更改不会复制到 Apache，有时还需要重新启动 PC。

**编辑：使 Apache 使用端口 80 并使 Skype 在其他端口上通信**

对于那些在 Skype 上苦苦挣扎的人，想改变它的端口并让 Apache 使用端口 80。

**无需重新安装，这里只是如何更改 Skype 端口**

```
Goto: Tools > Options > Advanced > Connection 
```

在那里，您需要`uncheck` **使用端口 80 和 443 作为传入连接的替代。**

就是这样，这是它的屏幕截图。

![更改 Skype 端口](../Images/e958ecd8673a9a3c19c41ac4d2e78c8d.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-26T19:26:52.917

我有完全相同的错误。

这是因为我没有运行 setup_xampp.bat

这是一个比通过配置文件和更改端口更好的解决方案。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-19T04:58:23.563

由于 apache 没有获得所需的端口（默认为`80`），可能会出现此问题。

该端口可能正被其他服务使用。

例如：Skype 也有默认端口`80`。

在同一台机器上安装 Skype 和 Apache 会导致冲突，因此 Apache 将无法启动。

您可以按照以下步骤更改 Skype 端口或更改 Apache 端口：

更改 Apache 的端口，它将为您工作。转到 httpd.conf

**如何更改 Apache 的端口：**

搜索：

> 服务器名称本地主机：80

将其更改为：

> 服务器名称本地主机：81

还搜索：

> 听 80

将其更改为：

> 听 81

如果您创建了任何虚拟主机，也请更改那里的端口。然后重启你的apache。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-09T06:15:32.007

我有同样的问题，但我知道**VMware 服务**是问题所在。VMware 主机服务和 Apache 服务一起冲突。

**解决它**»运行您的任务管理器»在服务选项卡中找到 VMwareHostd»然后右键单击并停止它»所有事情都已解决。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-18T17:49:01.350

输入 services.msc 并关闭您正在运行的任何 SQL。SQL 服务器可能正在接管该端口。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-23T14:30:17.797

我遇到了同样的问题和错误，我尝试将 http 端口的端口从 80 更改为 81，将 ssl 端口从 443 更改为 444，但仍然收到相同的错误，因此我将端口恢复为默认值并**运行 setup_xampp.bat**解决了问题秒。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-25T20:43:40.900

Skype 通常是罪魁祸首，因为它默认使用端口 80。只需将其关闭或取消选中工具>选项...>高级>连接下的“使用端口80和443作为传入连接的替代方案”，然后重新启动Skype。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-04T11:56:38.833

我必须使用 Config 按钮手动编辑 2 个文本文件（httpd.conf 和 httpd-ssl.conf），以便 Apache 运行并在记事本中从 80 > 81 和 443 > 444 更改

使用 Xampp UI 配置管理器不会将更改保存到 Apache。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-28T21:09:21.227

通过单击配置按钮并编辑 httpd.conf 和 httpd-ssl.congf，将 80 更改为 81 并将 443 更改为 444。现在您可以从 127.0.0.1:81 访问 XAMPP

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-01T20:49:43.877

您的 httpd.conf 或其他 Apache 配置文件中的错误将导致此问题。将httpd.conf*等*恢复为原始的安装程序版本，并查看 Apache 是否再次运行。

（我在这里尝试了 Skype 和其他建议，但没有运气，但日志 [XAMPP > Apache > Logs button] 显示它在第一次安装时运行了一次。那是赠品。）

可能的错误：

*   您是否使用将行尾更改为非 Unix 的 Windows 文本编辑器进行编辑？（解决方案[在这里](https://stackoverflow.com/questions/1886185/eclipse-and-windows-newlines)。）
*   丢失或无效的 DSO 文件 (.so)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-12T00:55:09.070

我遇到了这个问题，然后我运行了“apache_start.bat”，德语中的错误告诉我 httpd-ssl.conf 中的第 51 行有问题，即

```
SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5 
```

我所做的是在 httpd.conf 中注释第 163 行（ssl 模块）和 522（httpd-ssl.conf 包括）；我不需要 ssl 进行开发，所以它为我解决了。

# php - 相关下拉列表

> ID：13339858
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:39:08.357
> 
> 标签：php

我是 PHP 新手.. 我需要你的帮助..

我有 2 个相关的下拉列表：

下拉菜单 1：手动插入值

下拉 2：附加数据库中的值（值基于下拉 1 中选择的条件）

然后，被选中的两个值都将以另一种形式显示在文本框中。

我的问题是：

1）无法显示第二个下拉列表中的值。

2）第一个下拉列表中的值可以传递给其他形式，但第二个不能。

请指导我。

我不知道如何在这里分享我的代码。

form1.php

//第一个下拉菜单

```
<select name="fruit_name" id="fruit_name" style="font-family: Calibri;font-size: 10pt;" onchange="loadXMLDoc(this.value); ">
   <option value="0">-- please choose --</option>
   <option value="Pineapple">Pineapple</option>
   <option value="Apple">Apple</option> 
```

//第二个下拉菜单

```
 $fruit_name = $_POST['fruit_name'];
#Connect to MySQL
#Connect to database

$result = mysql_query("SELECT colour FROM fruit WHERE fruit_name = '$fruit_name'");

echo "<select name='colour' id='colour' style='font-family: Calibri;font-size: 10pt;'>";

while($row = mysql_fetch_assoc($result))
{
echo "<option value = ''>" . $row['colour'] . "</option>";
}
echo "</select>";

mysql_free_result($result);

//Closes specified connection
?> 
```

form2.php

```
 <?php
//connection

        $fruit_name = $_POST['fruit_name'];
        $colour = $_POST['colour'];
?>
  <label>
  <input type="text" name="fruit_name" id="fruit_name" value = "<?php echo $fruit_name;?>" readonly>
  </label>
  <p>
    <label>
    <input type="text" name="colour" id="colour" value="<?php echo $colour;?>" readonly>
    </label>
  </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:08:20.700

我通常不这样做，但由于我现在手头有一些空闲时间，我将给出你可以遵循的一般方法：

`<head>`在您的标签之间包含以下内容。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

在其下方，粘贴此代码

```
<script type="text/javascript">
    $(function(){
        $('select#fruit_name').change(function(){
                var selectedVal = $(this).val(); // get the selected value

                $.ajax({    // send ajax request to the php file to process data
                    type:'post',
                    url:'php-page-name.php',
                    data:{'value':selectedVal},
                    success:function(ret)   // display the result from php-page-name.php page
                    {
                        $('div#result').html(ret);
                    }
                });

        });
    });
</script> 
```

现在让我们继续您的**HTML**

```
 <select name="fruit_name" id="fruit_name" style="font-family: Calibri;font-size: 10pt;">
   <option value="0">-- please choose --</option>
   <option value="Pineapple">Pineapple</option>
   <option value="Apple">Apple</option> 
   </select>

<div id="result">
    <select>
        <option>Select One</option>
    </select>
</div> 
```

**php-page-name.php**页面（不要忘记创建此页面并将其放在与 form1.php 相同的文件夹中）

```
 <?php
    // put the code to connect to your database here

    $fruit_name = $_POST['value'];  // this will contain the value selected from first dropdown

    $result = mysql_query("SELECT colour FROM fruit WHERE fruit_name = '$fruit_name'");

echo "<select name='colour' id='colour' style='font-family: Calibri;font-size: 10pt;'>";

    while($row = mysql_fetch_assoc($result))
    {
        echo "<option value = '".$row['colour']."'>" . $row['colour'] . "</option>";
    }
    echo "</select>";

mysql_free_result($result);
    ?> 
```

PS：我正在使用`mysql_*`此示例中的功能，因为我假设您也是。但不建议这样做，因为它们很快就会被弃用。您可能想切换到`mysqli`或`PDO`

# javascript - 使用 mouseover div 显示消息时出错

> ID：13339859
> 
> 赞同：0
> 
> 时间：2012-11-12T07:39:16.020
> 
> 标签：javascript

```
var hello = document.createElement('<div>HELLO</div>');
var wrapper = document.getElementById('wrapper');

document.getElementsByTagName('span')[0].appendChild(hello);

wrapper.addEventListener('mouseover', mouseMove, false);
setTimeout(function(){
   document.getElementsByTagName('span')[0].removeChild(hello);
   wrapper .removeEventListener('mouseover', mouseMove, false);
}, 10000);

<div id="wrapper">
</div> 
```

当我继续前进时 `<div id="wrapper"></div>` 结果为空

当我移动时如何在 10 秒`<div id="wrapper"></div>`内显示结果`HELLO`，如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:55:01.037

这应该有效：

```
var wrapper = document.getElementById('wrapper');

function createHelloDiv() {
    var hello = document.createElement('div');
    var helloContents = document.createTextNode('hello');
    hello.appendChild(helloContents);
    return hello;
}

function onMouseOver() {
    setTimeout(function() {
        wrapper.appendChild(createHelloDiv());
        wrapper.removeEventListener('mouseover', onMouseOver, false);
    }, 10000);
}

wrapper.addEventListener('mouseover', onMouseOver, false); 
```

有关工作示例，请参[见此小提琴。](http://jsfiddle.net/htz3j/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:44:47.450

你想达到什么目的？

这部分代码

```
wrapper.addEventListener('mouseover', mouseMove, false); 
```

将鼠标 overevent 绑定到函数 mouseMove ，这在您的上下文中不存在。

添加

```
function mouseMove()
{
  alert();
} 
```

这不会给你空...

在第二种情况下，请说明您想要实现什么？

# iphone - 在第一个 UITextField 完成编辑并按 Done 后，使第二个 UITextField firstresponder

> ID：13339868
> 
> 赞同：0
> 
> 时间：2012-11-12T07:40:10.097
> 
> 标签：iphone, objective-c, ios, uitextfield, xcode4.5

当点击某个 CA 层时，我动态创建了两个 UITextField。我已将第一个文本字段设为第一响应者，我想要的是，当我在第一个文本字段中输入文本并按完成时，我希望第二个文本字段成为第一响应者。这就是我在 textFieldShouldReturn 中为此所做的。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if (titleField.returnKeyType== UIReturnKeyDone) {

        NSString *title = [textField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        if (title.length>0 )
        {
            [self changeLayersTitle:title];
        }

        [dateField becomeFirstResponder];

    if (dateField.returnKeyType==UIReturnKeyDone)
    {
        NSString *date = [dateField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        if (date.length>0)
        {
            [self changeLayersDate:date];
        }
    }

        [dateField resignFirstResponder];
        [bgLayer removeFromSuperlayer];
        [titleField removeFromSuperview];
        [dateField removeFromSuperview];

    }
    return NO;
} 
```

现在，当我在第一个输入文本后按 Done 输入时，它关闭了两个文本字段，bt 向我显示了键盘。那么，我错过了什么或做错了什么，或者我必须把它放在其他地方。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:58:27.993

我不确定您为什么要比较`returnKeyType`文本字段的属性。您应该比较文本字段是否相等，如果在第一个文本字段上按下返回键，则将第二个文本字段设置为新的响应者。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if (textField == titleField) {
        [dateField becomeFirstResponder];
    }
    else if (textField == dateField) {
        // Return button pressed on 2nd field. Do something
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:54:46.047

在您的完成按钮回调方法中，您不能将第二个文本字段设置为第一响应者吗？

您不需要在第一个文本字段上 resignFirstResponder。

# javascript - ipad文件上传问题

> ID：13339873
> 
> 赞同：0
> 
> 时间：2012-11-12T07:40:32.843
> 
> 标签：javascript, html, ipad, css

我将 [http://uniformjs.com/](http://uniformjs.com/)用于表单元素，它在所有浏览器以及不同的设备上都可以正常工作，但我注意到的唯一一件事是“文件上传”功能在 iPad 中不起作用。

任何人都可以指导如何解决此问题，而无需下载任何其他受支持的应用程序，例如 picupapp.com

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:53:57.810

在 iOS（iPhone 和 iPad）中，*无法*通过浏览器上传文件。

您需要为此创建一个*应用程序*。在此处查看有关文件上传 Cocoa 的一些信息：[如何使用 iPhone 将照片上传到服务器？](https://stackoverflow.com/questions/125306/how-can-i-upload-a-photo-to-a-server-with-the-iphone)

或者，如果您有能力忽略所有 iOS6 之前的设备，它们似乎`<input type="file">`在其最新版本中增加了对这些设备的支持。

# java - 使用 java、hibernate 和 mysql（任何开源，如 H2、JavaDB）和自动数据库配置的客户端架构的可行解决方案

> ID：13339876
> 
> 赞同：1
> 
> 时间：2012-11-12T07:40:47.133
> 
> 标签：java, mysql, database, hibernate, open-source

您好，我正在开发一种软​​件产品（**即商店购买和销售录音软件的类型**），特别是为`client base`，**我的意思是`front end application`并且`database`应该保留在客户端机器**中。我需要一个可行的解决方案来打包提供这些软件包。我使用`javafx`前端、`hibernate`关系映射和`mysql` **（基本上像 H2、JavaDB 等开源）**作为数据库。

### Q1.这种解决方案可行吗？

如果没有，你能建议我一种替代方法吗？

如果是，我需要将这些包放在一个包中，我的意思是客户端不需要配置数据库密码或其他配置。我们是否可以提供一个`script`或任何一种`batch installation`可以安装`jre`或`jdk`，并自动配置它（`mysql or any opensouce db`即**设置root密码**）。我知道可以完成捆绑，但我需要.`our software`**`Install4j``automated database configuration`**

 **### Q2。我怎样才能做到这一点？

我需要某种专家意见。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:05:05.227

如果您使用 mysql，您和您的客户可能需要为您的客户端进行安装，因为您可能需要将 mysql 安装包与您的应用程序一起打包，并让您的安装程序调用 mysql 安装程序。

我建议使用比完全用 Java 编写的 mysql 更轻的数据库。例如您的问题中提到的[h2或](http://www.h2database.com/html/main.html)[hsqldb](http://hsqldb.org/)，两者都只是一个没有本机部分的 jar - 这将使分发和配置更容易。使用[自包含应用程序打包](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm#BCGIBBCI)，[javafx 部署工具](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)可以将您的应用程序与它的支持库、hsqldb 引擎和 jre 安装打包在一起。Hibernate 提供了您需要的所有[数据库配置](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html)机制。**

# highcharts - 更改 yAxis 上的第一个刻度标签

> ID：13339881
> 
> 赞同：0
> 
> 时间：2012-11-12T07:41:27.810
> 
> 标签：highcharts

我需要更改 yAxis 上的第一个刻度标签。我更改了 yAxis 上的最小值：

```
yAxis: [{
    title : {
        text : 'Position'
    },
    gridLineWidth: 1,
    startOnTick: false, 
    min: 1, //changed min value
    reversed: true,
}] 
```

但该值未显示在前面的 yAxis 中。如何签署 yAxis 中的第一个值？

这是我的[图表](http://test.shtalber.ru/charts/chart2.php)。

如果我写：

```
yAxis: [{
    title : {
    text : 'Позиция'
    },
    startOnTick: false, 
    showFirstLabel: true,
    min: 1,
    reversed: true, 
    tickInterval: 1,
    labels: {
          formatter: function() {
            if (this.value < 1)
                return null;
            else if (this.value == 1)
                return this.value;
            else if (this.value % 2 == 0)
                    return this.value;
        }
    } 
```

}] 然后缩放 yAxis 对我的数据不利:([图表](http://test.shtalber.ru/charts/chart.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:33:12.597

您可以定义自己的[yAxis.tickPositioner](http://api.highcharts.com/highstock#yAxis.tickPositioner)来定义您希望放置刻度的所有位置。

由于在您的情况下您不想覆盖整个行为，而只是在 min 位置放置一个刻度，您可以利用该`axis.getLinearTickPositions(interval, min, max)`方法获取将生成的默认位置数组，然后将您的额外刻度附加到这个数组。

下面的代码在 y 轴的最小值和最大值上都添加了刻度

```
yAxis: {
    showFirstLabel: true,
    showLastLabel: true,
    tickPositioner: function(min, max) {
        // specify an interval for ticks or use max and min to get the interval
        var interval = Math.round((max - min) / 5);
        var dataMin = this.dataMin;
        var dataMax = this.dataMax;
        // push the min value at beginning of array
        var positions = [dataMin];
        var defaultPositions = this.getLinearTickPositions(interval, dataMin, max);
        //push all other values that fall between min and max
        for (var i = 0; i < defaultPositions.length; i++) {
            if (defaultPositions[i] > dataMin && defaultPositions[i] < dataMax) {
                positions.push(defaultPositions[i]);
            }
        }
        // push the max value at the end of the array
        positions.push(dataMax);
        return positions;
    }
} 
```

[在 y 轴的最小值和最大值上显示刻度 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/cNgrJ/)
[您的图表演示 @ jsFiddle](http://jsfiddle.net/jugal/cNgrJ/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:59:09.053

对我来说，似乎一切正常。反转图表的最小值是 1，它位于 y 轴的正上方。但是，如果您想在轴上显示此值，请查看[此帖子](https://stackoverflow.com/questions/8189921/how-to-set-a-static-minimum-value-for-axes-in-highcharts)以获取说明。

# extjs - Extjs 窗口默认关闭按钮

> ID：13339888
> 
> 赞同：1
> 
> 时间：2012-11-12T07:42:12.873
> 
> 标签：extjs, extjs4, window, extjs4.1, extjs4.2

我在面板中有一个按钮，一旦点击它就会调出一个子窗口。我已经创建了它，并且里面已经有项目。打开子窗口后，父面板将被禁用。

在子窗口内，我有一个 Button 关闭窗口，然后将启用父面板。

```
 childWindow.close();
  parent.enable(); 
```

我的问题是窗口右上角的窗口上的默认关闭按钮。如果我单击它，我将无法启用父面板。它保持禁用状态，因为我当然禁用了它。

使用默认关闭按钮关闭父面板后，如何启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:08:28.647

将侦听器放置在“主”窗口内的“子”窗口的[关闭事件中。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-event-close)侦听器将工作，即使它被禁用。在下面的示例中，我假设 win ref 是您的“主”窗口的引用，而“child”是您的孩子之一。

```
openWin: function(child) {
    child.on('close', reactivate, this);
    child.show();
    this.disable();
},
reactivate: function() {
    this.enable();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:41:47.630

如果要禁用窗口后面的所有内容，请使用**Ext.window.Window的****模态**配置

 **> 模态：布尔值
> 
> True 使窗口模式化并在显示时掩盖其后面的所有内容，false 以显示它而不限制对其他 UI 元素的访问。
> 
> 默认为：假**

# c# - 如何将“页面设置”和“打印机设置”显示为无模式表单？

> ID：13339889
> 
> 赞同：-1
> 
> 时间：2012-11-12T07:42:15.977
> 
> 标签：c#, winforms, modeless

是否可以将“页面设置”和“打印机设置”显示为无模式表单？我使用的代码如下，但表单显示为模态表单：

```
 // page setup
    private void btnPageSetup_Click(object sender, EventArgs e)
    {
        this.pageSetupDialog1.PageSettings = new PageSettings();
        this.pageSetupDialog1.PrinterSettings = this.printDocument1.PrinterSettings;
        this.pageSetupDialog1.ShowDialog();
        if (this.pageSetupDialog1.PageSettings != null)
        {
            this.printDocument1.DefaultPageSettings = this.pageSetupDialog1.PageSettings;
        }
    }

    // print setup
    private void btnPrintSetup_Click(object sender, EventArgs e)
    {
        this.pageSetupDialog1.Document = this.printDocument1;
        if (this.pageSetupDialog1.ShowDialog() == DialogResult.OK)
        {
            this.printDocument1.Print();
        }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T10:58:55.070

您可以通过调用`Show`而不是`ShowDialog`.

但是，您还必须重新调整代码，因为您的主窗体将不再等待子窗体之一关闭以检查用户所做的事情。

例如，您必须更改打印设置代码，以便在用户单击时`PageSetupDialog` 打印文档*本身*`OK`，而不是依赖主表单在用户单击时执行操作`OK`。

同样，您需要更改页面设置代码，以便您自己*设置*`PageSetupDialog`，而不是“返回”属性中的设置并依赖处理它们的主表单。`Document.DefaultPageSettings` *`PageSettings`*

# excel - 2 根据excel中的可变日期查找表格

> ID：13339891
> 
> 赞同：0
> 
> 时间：2012-11-12T07:42:48.710
> 
> 标签：excel

我试图让一个单元格根据日期从 2 个表中查找数据，例如，如果在 2012 年 6 月 30 日之前查找表 A，如果在 2012 年 7 月 1 日之后查找表 B

我进行了以下计算无济于事

`=IF(G49<AH175,,VLOOKUP(Y49,$AI$178:$AU$181,AK$176,0)),IF(G49>AH214,,VLOOKUP(Y49,$AI$217:$AU$220,AK$176,0))`

*   所以 Y49 是单元格
*   AH175 是日期 31/7/2012
*   AH214 是日期 1/7/2012
*   $AI$178:$AU$181,AK$176 是表 A -$AI$217:$AU$220,AK$176 是表 B 有人能告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:01:03.233

`VLOOKUP`函数格式为

> VLOOKUP(lookup_value, table_array, col_index_num, [range_lookup])

您可以`IF`在参数周围放置一个`table_array`以根据条件选择不同的范围

像这样的东西（假设你想从指定的列号返回`AK$176`）

```
=VLOOKUP(Y49,IF(Y49<AH214,$AI$178:$AU$181,$AI$217:$AU$220),AK$176,0) 
```

# asp.net-mvc - MVC序列化对象，对象列表，Json中的集合

> ID：13339894
> 
> 赞同：0
> 
> 时间：2012-11-12T07:43:12.857
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, jquery, getjson

解析控制器返回的 json。出于某种原因，在返回字典时，我需要对关键元素执行“ToString()”，否则会出错。为什么？。下面的示例是序列化 json 的正确方法/最佳方法吗？谢谢

控制器：

```
 // JSON
    public ActionResult GizmosJsonObject()
    {
        var gizmo = new Gizmo
        {
            Id = 2343,
            Name = "Some awesome name",
            Quantity = 32,
            IntroducedDate = DateTime.Now
        };

        return this.Json(gizmo);
    }

    public ActionResult GizmosJsonObjectCollection()
    {
        var gizmos = new List<Gizmo>();
        gizmos.Add(new Gizmo
        {
            Id = 102,
            Name = "some name1",
            Quantity = 535,
            IntroducedDate = DateTime.Now
        });

        gizmos.Add(new Gizmo
        {
            Id = 122,
            Name = "some name1",
            Quantity = 135,
            IntroducedDate = DateTime.Now
        });

        gizmos.Add(new Gizmo
        {
            Id = 562,
            Name = "some name1",
            Quantity = 2,
            IntroducedDate = DateTime.Now
        });

        return this.Json(gizmos);
    }

    public ActionResult GizmosJsonListInts()
    {
        var gizmos = new List<int>();
        gizmos.Add(2);
        gizmos.Add(56);
        gizmos.Add(32);

        return this.Json(gizmos);
    }

    public ActionResult GizmosJsonDictionaryInts()
    {
        var gizmos = new Dictionary<int, int>();
        gizmos.Add(23, 123);
        gizmos.Add(26, 227);
        gizmos.Add(54, 94323);

        return this.Json(gizmos.ToDictionary(x => x.Key.ToString(), y => y.Value));
    }

    public ActionResult GizmosJsonDictionaryStrings()
    {
        var gizmos = new Dictionary<string, string>();
        gizmos.Add("key1", "value1");
        gizmos.Add("Key2", "value2");
        gizmos.Add("key3", "value3");

        return this.Json(gizmos);
    } 
```

看法：

```
<script type="text/javascript">
/*<![CDATA[*/
    $(function () {

        // json object
        $("a.Object").click(function (e) {
            e.preventDefault();
            $.ajax({
                url: '@Url.Action("GizmosJsonObject", "Home")',
                contentType: 'application/json',
                type: 'POST',
                success: function (json) {
                    console.log(json.Id);
                    console.log(json.Name);
                    console.log(json.IntroducedDate);

                    // format date
                    var date = new Date(parseInt(json.IntroducedDate.substr(6)));
                    console.log(date);
                }
            });
        });

        // json object collection
        $("a.ObjectCollection").click(function (e) {
            e.preventDefault();
            $.ajax({
                url: '@Url.Action("GizmosJsonObjectCollection", "Home")',
                contentType: 'application/json',
                type: 'POST',
                success: function (json) {
                    $(json).each(function () {
                        console.log(this.Id);
                        console.log(this.Name);
                        console.log(this.IntroducedDate);

                        // format date
                        var date = new Date(parseInt(this.IntroducedDate.substr(6)));
                        console.log(date);
                    });
                }
            });
        });

        // json list of ints
        $("a.ListInts").click(function (e) {
            e.preventDefault();
            $.ajax({
                url: '@Url.Action("GizmosJsonListInts", "Home")',
                contentType: 'application/json',
                type: 'POST',
                success: function (json) {
                    $(json).each(function (i, e) {
                        console.log(json[i]);
                    });
                }
            });
        });

        // json dictionary of ints
        $("a.DictionaryInts").click(function (e) {
            e.preventDefault();
            $.ajax({
                url: '@Url.Action("GizmosJsonDictionaryInts", "Home")',
                contentType: 'application/json',
                type: 'POST',
                success: function (json) {
                    for (var key in json) {
                        if (json.hasOwnProperty(key)) {
                            var value = json[key];
                            console.log(key);
                            console.log(value);
                        }
                    }
                }
            });
        });

        // json dictionary of strings
        $("a.DictionaryStrings").click(function (e) {
            e.preventDefault();
            $.ajax({
                url: '@Url.Action("GizmosJsonDictionaryStrings", "Home")',
                contentType: 'application/json',
                type: 'POST',
                success: function (json) {
                    for (var key in json) {
                        if (json.hasOwnProperty(key)) {
                            var value = json[key];
                            console.log(key);
                            console.log(value);
                        }
                    }
                }
            });
        });
    });
/*]]>*/
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:52:53.320

JSON 键的类型必须是`string`。[请参阅此处http://www.json.org/](http://www.json.org/)的右侧边栏，其中指出一对必须采用字符串的形式：值。

* * *

只是为了佐证，这里的文档[http://www.ietf.org/rfc/rfc4627.txt](http://www.ietf.org/rfc/rfc4627.txt)声明如下：

> 2.2\. Objects An object structure is represented as a pair of curly brackets surrounding zero or more name/value pairs (or members). A name is a string. A single colon comes after each name, separating the name from the value. A single comma separates a value from a following name. The names within an object SHOULD be unique.

# php - 使用 phpexcel 复制整个列

> ID：13339896
> 
> 赞同：0
> 
> 时间：2012-11-12T07:43:26.207
> 
> 标签：php, excel

我正在尝试复制整个列或将值复制到另一列。我的脚本可以确定需要复制的列，然后是最高行值。有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-09T04:48:03.120

我遇到了同样的问题，经过几天的搜索，到目前为止我得到的只是这个主题[[在 PHPExcel 中复制样式和数据](https://stackoverflow.com/questions/34590622/copy-style-and-data-in-phpexcel)]。代码完美而清晰地理解，但就像你一样，我需要从列复制到列，而不是行到行。然后，我发现复制一列基本上只是“将一个单元格连续复制到另一个单元格索引”。所以这是代码，经过测试，它对我有用。希望这能有所帮助。

```
/**
 * Copy excel column to column
 * @param $sheet:current active sheet
 * @param $srcRow: source row
 * @param $dstRow: destination row
 * @param $height: rows number want to copy
 * @param $width: column number want to copy
 **/
private function selfCopyRow(\PHPExcel_Worksheet $sheet, $srcRow, $dstRow, $height, $width)
{
    for ($row = 0; $row < $height; $row++) {
        for ($col = 0; $col < $width; $col++) {
            $cell = $sheet->getCellByColumnAndRow($col, $srcRow + $row);
            $style = $sheet->getStyleByColumnAndRow($col, $srcRow + $row);
            $dstCell = \PHPExcel_Cell::stringFromColumnIndex(($width + $col)) . (string)($dstRow + $row);
            $sheet->setCellValue($dstCell, $cell->getValue());
            $sheet->duplicateStyle($style, $dstCell);
        }

        $h = $sheet->getRowDimension($srcRow + $row)->getRowHeight();
        $sheet->getRowDimension($dstRow + $row)->setRowHeight($h);
    }

    // EN : Copy format
    foreach ($sheet->getMergeCells() as $mergeCell) {
        $mc = explode(":", $mergeCell);
        $col_s = preg_replace("/[0-9]*/", "", $mc[0]);
        $col_e = preg_replace("/[0-9]*/", "", $mc[1]);
        $row_s = ((int)preg_replace("/[A-Z]*/", "", $mc[0])) - $srcRow;
        $row_e = ((int)preg_replace("/[A-Z]*/", "", $mc[1])) - $srcRow;

        if (0 <= $row_s && $row_s < $height) {
            $merge = $col_s . (string)($dstRow + $row_s) . ":" . $col_e . (string)($dstRow + $row_e);
            $sheet->mergeCells($merge);
        }
    }

} 
```

# sql - 调用 Oracle 过程时如何访问它的 OUT 参数？

> ID：13339899
> 
> 赞同：1
> 
> 时间：2012-11-12T07:43:38.030
> 
> 标签：sql, oracle, plsql, oracle10g

如果我写一个简单的函数`doSomething`，我可以通过执行得到它的结果：

```
select doSomething() from dual; 
```

但是，如果我希望调用一个将`OUT`游标传递给它的过程（以及另一个 int 参数），我如何在查询中调用该过程并访问游标的结果？

在查询中调用它不是强制性的。它只是我想访问该过程的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:07:25.880

您可以创建一个像

```
 CREATE OR REPLACE PROCEDURE your_procedure(out_cursor OUT sys_refcursor)
    IS
    BEGIN
        OPEN out_cursor FOR
            SELECT  employee_name
              FROM  employees;

    END;
    / 
```

创建过程后，将过程包装在一个返回光标的函数中，如下所示

```
CREATE OR REPLACE FUNCTION your_function
    RETURN sys_refcursor
AS
    o_param  sys_refcursor;
BEGIN
    o_param := NULL;
    your_procedure(o_param);
    RETURN o_param;
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        -- raise                                  

    WHEN OTHERS
    THEN
        -- raise
END your_function;
/ 
```

要查看 sql 的结果，请执行以下操作

```
select your_function from dual; 
```

更新 1

在 SQL Developer 中查看结果

第1步

在 SQL Developer 中双击结果

[结果][1]

第 2 步单击带点的按钮。这将弹出值

[网格][2]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:47:06.617

你可以做这样的事情

```
select doSomething(cursor (select int_col from your_table)) colname from dual 
```

希望这个帮助

# django - django模型从管理面板设置字段默认值

> ID：13339903
> 
> 赞同：0
> 
> 时间：2012-11-12T07:44:06.373
> 
> 标签：django, django-models, django-admin

### 模型.py

```
class MyModel(models.Model):
maximum_limit = models.PositiveIntegerField(default=5) 
```

这里我设置 maximum_limit 默认值为 5。

但我想设置一个也可以从管理员编辑的值，并在此处用作默认值。（模型 MyModel 的可编辑默认值）

我最初的方法是（不工作）。我想要这样的东西。

```
class MySettings(models.Model):
mx_limit = models.PositiveIntegerField(default=5)

class MyModel(models.Model):
maximum_limit = models.PositiveIntegerField(default=MySettings.mx_limit) 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:56:16.963

您的方法是错误的，应使用适当的属性设置 db 值的最大值，即[max_value](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.IntegerField.max_value)。

但是，每次您想要更改它时，都需要进行架构迁移。因此，您真正应该做的是动态表单验证，其中您的表单检查设置（可能应该保存在您的数据库中，而不是静态存储在设置之类的模块中，这需要重新启动服务器）。

有很多示例[如何](https://stackoverflow.com/search?q=django%20dynamic%20form%20validation)在 stackoverflow 上更动态地进行表单验证

# c# - 添加在多个文本框中输入的值并显示总数

> ID：13339905
> 
> 赞同：0
> 
> 时间：2012-11-12T07:44:09.697
> 
> 标签：c#

我创建了一个 Windows 窗体。在该窗体中有 6 个文本框，我需要添加在该 5 个文本框中输入的值并显示在 C#.net 的第 6 个文本框中。

我试过以下代码：

```
txtbox6.Text = (Decimal.Parse(txtbox1.Text) + Decimal.Parse(txtbox2.Text)+
                (Decimal.Parse(txtbox3.Text)+(Decimal.Parse(txtbox4.Text)+   
                 (Decimal.Parse(txtbox5.Text)).ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:54:04.533

如果其中一个文本框中的文本不是数字怎么办？你可以尝试这样的事情：

```
private Decimal GetNumberFromTextBox(TextBox txtbox)
{
    Decimal d;
    if (!Decimal.TryParse(txtbox.Text, out d))
    {
        throw new ArgumentException("Invalid number in " + txtbox.Name);
        // Instead you could return 0 here if that's what you want.
    }
    return d;
}

    textBox6.Text = Convert.ToString(
            GetNumberFromTextBox(textBox1) +
            GetNumberFromTextBox(textBox2) +
            GetNumberFromTextBox(textBox3) +
            GetNumberFromTextBox(textBox4) +
            GetNumberFromTextBox(textBox5)
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:00:07.483

你放错了括号。试试下面的代码片段。

```
 txtbox6.Text = (Decimal.Parse(txtbox1.Text) + Decimal.Parse(txtbox2.Text)+
        Decimal.Parse(txtbox3.Text)+Decimal.Parse(txtbox4.Text)+ 
        Decimal.Parse(txtbox5.Text)).ToString(); 
```

# c# - 使用 lambda 表达式通过某些属性拆分对象组的列表

> ID：13339907
> 
> 赞同：3
> 
> 时间：2012-11-12T07:44:14.550
> 
> 标签：c#, linq, list, lambda, .net-4.5

这是我的类型：

```
public class MyObj {
    public long Number { get; set; }
    public string Name { get; set; }
    public string Message { get; set; }
    public DateTime RegisterDate { get; set; }
} 
```

所以我有一个列表，`Myobj`我需要将列表拆分为一些列表，其中对象的对象`Name`和`Number`对象的对象相等，例如按`Name`and分组`Number`：

假设这个样本：

```
List<MyObj> MyObjects = new List<MyObj>{
                new MyObj() { Number = 1, Name = "BMW", Message = "msg1", RegisterDate = DateTime.Now },
                new MyObj() { Number = 1, Name = "BMW", Message = "msg2", RegisterDate = DateTime.Now },
                new MyObj() { Number = 1, Name = "BMW", Message = "msg3", RegisterDate = DateTime.Now },
                new MyObj() { Number = 1, Name = "Honda", Message = "msg11", RegisterDate = DateTime.Now },
                new MyObj() { Number = 1, Name = "Honda", Message = "msg12", RegisterDate = DateTime.Now },
                new MyObj() { Number = 2, Name = "BMW", Message = "msg22", RegisterDate = DateTime.Now },
                new MyObj() { Number = 2, Name = "BMW", Message = "msg23", RegisterDate = DateTime.Now },
                new MyObj() { Number = 2, Name = "BMW", Message = "msg24", RegisterDate = DateTime.Now },
                new MyObj() { Number = 2, Name = "Honda", Message = "msg30", RegisterDate = DateTime.Now },
                new MyObj() { Number = 3, Name = "BMW", Message = "msg41", RegisterDate = DateTime.Now },
                new MyObj() { Number = 3, Name = "BMW", Message = "msg42", RegisterDate = DateTime.Now },
                new MyObj() { Number = 3, Name = "Ford", Message = "msg51", RegisterDate = DateTime.Now },
                new MyObj() { Number = 3, Name = "Ford", Message = "msg52", RegisterDate = DateTime.Now },
                new MyObj() { Number = 3, Name = "Ford", Message = "msg53", RegisterDate = DateTime.Now }
            }; 
```

所以我需要一个`List<List<MyObj>>`：

```
 List<MyObj> MyObjectwith1AndBMW = new List<MyObj> {
            new MyObj() { Number = 1, Name = "BMW", Message = "msg1", RegisterDate = DateTime.Now },
            new MyObj() { Number = 1, Name = "BMW", Message = "msg2", RegisterDate = DateTime.Now },
            new MyObj() { Number = 1, Name = "BMW", Message = "msg3", RegisterDate = DateTime.Now }
        };

        List<MyObj> MyObjectWith1AndHonda = new List<MyObj> {
            new MyObj() { Number = 1, Name = "Honda", Message = "msg11", RegisterDate = DateTime.Now },
            new MyObj() { Number = 1, Name = "Honda", Message = "msg12", RegisterDate = DateTime.Now }
        };

        List<MyObj> MyObjectWith2AndBMW = new List<MyObj> {
            new MyObj() { Number = 2, Name = "BMW", Message = "msg22", RegisterDate = DateTime.Now },
            new MyObj() { Number = 2, Name = "BMW", Message = "msg23", RegisterDate = DateTime.Now },
            new MyObj() { Number = 2, Name = "BMW", Message = "msg24", RegisterDate = DateTime.Now }
        };

        List<MyObj> MyObjectWith2AndHonda = new List<MyObj> {
            new MyObj() { Number = 2, Name = "Honda", Message = "msg30", RegisterDate = DateTime.Now }
        };

        List<MyObj> MyObjectwith3AndBMW = new List<MyObj> {
            new MyObj() { Number = 3, Name = "BMW", Message = "msg41", RegisterDate = DateTime.Now },
            new MyObj() { Number = 3, Name = "BMW", Message = "msg42", RegisterDate = DateTime.Now }
        };

        List<MyObj> MyObjectWith3AndFord = new List<MyObj> {
            new MyObj() { Number = 3, Name = "Ford", Message = "msg51", RegisterDate = DateTime.Now },
            new MyObj() { Number = 3, Name = "Ford", Message = "msg52", RegisterDate = DateTime.Now },
            new MyObj() { Number = 3, Name = "Ford", Message = "msg53", RegisterDate = DateTime.Now }
        }; 
```

结果是：

```
List<List<MyObj>> result = new List<List<MyObj>> {
            MyObjectwith1AndBMW,
            MyObjectWith1AndHonda,
            MyObjectWith2AndBMW,
            MyObjectWith2AndHonda,
            MyObjectwith3AndBMW,
            MyObjectWith3AndFord
 }; 
```

那么你的建议是什么？如何找到`MyObj`具有相同名称和相同数字的列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T07:49:59.477

```
 List<List<MyObj>> result = MyObjects.GroupBy(m => new { m.Name, m.Number })
                            .Select(g => g.ToList())
                            .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:50:23.067

```
var groups = (from row in MyObjects
              group row by new { row.Number, row.Name } into grp
              select grp.ToList()).ToList(); 
```

这是由和（一起）`List<List<MyObj>>`分组的。`.Number``.Name`

# crystal-reports - Crystal 报表中的动态参数

> ID：13339911
> 
> 赞同：0
> 
> 时间：2012-11-12T07:44:42.030
> 
> 标签：crystal-reports, crystal-reports-2008

我有一个`LINETYPE`具有以下值的参数：

```
 INV_DEVICE
    INV_SIM
    TAX
    OTHER_ITEMS 
```

如果用户从`LINETYPE`参数中选择任何以“ `INV_*`”开头的内容，是否可以动态填充另一个参数字段？

例如，用户选择`INV_DEVICE`. 将出现另一个名为 的参数字段`GOODSTYPE`。的值`GOODSTYPE`取自数据库。例子：

```
 PAGER
    GSMPHONE
    SMARTPHONE
    TABLET 
```

但是当用户选择`TAX`或`OTHER_ITEMS`用户不需要从中选择任何值时`GOODSTYPE`，或参数字段根本不显示。

报告的输出与用户输入的条件相匹配。请注意，对于`LINETYPE`和`GOODSTYPE`，用户可以选择多个值。LINETYPE 是必填字段，但`GOODSTYPE`会因用户在`LINETYPE`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:35:58.873

你真正想要的是调用级联参数。第一个选择导致第二个选择的精炼列表导致另一个精炼列表，等等。例如国家 -> 州/省 -> 城市。

我不使用它，但根据我收集的信息，您的选择需要存储在表格中。要创建级联参数：

1.  创建一个新参数
2.  在值列表下，选择动态
3.  选择您的值、描述和参数
4.  设置允许多个值的选项
5.  如果您有更多参数，请重复步骤 3-4。

# maven - 为 Maven 下载最新的 Junit

> ID：13339913
> 
> 赞同：2
> 
> 时间：2012-11-12T07:44:43.863
> 
> 标签：maven, repository, nexus

我在我的项目中配置了 Maven 和 Nexus，现在我需要将最新版本的 JUnit 安装到我的 Nexus 中。

如果我搜索 Nexus，它会显示 Maven Central 上可用的最新版本，但我该如何下载呢？

我什至不知道现有 JUnit 位于哪个存储库中。我在 Nexus 中有大约 15 个存储库，但我无法真正找到它。

所以，简而言之：

1.  我在哪里可以在 Nexus 本地找到我现有的 JUnit 版本以及如何找到？
2.  当我找到它并想​​升级到最新版本时，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:46:08.673

1.  只需使用搜索功能。为了使其正常工作，您必须配置远程索引下载。找到它后，结果将显示它在哪个存储库中。

2.  您使用的 JUnit 版本取决于构建系统中声明的依赖项。例如，如果您使用 Maven，它可能看起来像这样

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit-dep</artifactId>
    <version>4.11</version>
    <scope>test</scope>
</dependency> 
```

一般来说，我建议阅读免费书籍[Repository Management with Nexus](http://www.sonatype.com/Support/Books/Repository-Management-with-Nexus)中的 Nexus 使用和存储库管理器基础知识，也可以阅读您的构建系统。如果是 Maven，一个好的开始是[http://www.sonatype.com/Support/Books](http://www.sonatype.com/Support/Books)上的 Maven 书籍。

**免责声明：**我是 Nexus 书的合著者。

# python - os.path.join 给出不正确的结果

> ID：13339915
> 
> 赞同：0
> 
> 时间：2012-11-12T07:44:46.357
> 
> 标签：python

我正在尝试使用以下代码加入 plf 路径以构建位置，但我注意到 plf 名称正在构建位置上被覆盖，请参阅下面的详细信息，我在这里缺少什么？

```
rPlf = os.path.join(buildLocation,'au_connect_build.plf')
    print rPlf
    print rPlf 
```

实际输出：-

```
rPlf
\au_connect_build.plfNTEGRATION\M1234BAAAANAA120080.1 
```

预期输出：-

```
 \\Location\builds435\INTEGRATION\M1234BAAAANAA120080.1\au_connect_build.plf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:47:36.350

`buildLocation`包含一个`\r`字符 - 运行`print repr(rPlf)`，你会看到发生了什么。您可以通过以下方式解决此问题：

```
buildLocation = buildLocation.strip('\r') 
```

# java - 原始类型和包装类之间的主要区别是什么？

> ID：13339918
> 
> 赞同：7
> 
> 时间：2012-11-12T07:45:10.957
> 
> 标签：java, object, wrapper, primitive-types

这两条线有什么区别？

```
 int pInt = 500; 
```

和

```
 Integer wInt = new Integer(pInt); 
```

或者

```
 Integer wInt = new Integer(500); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T07:46:13.070

没有任何。

那是完全相同的事情。在第一种情况下，您只有一个补充变量。

请注意，使用[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，您很少需要同时拥有 an`int`和 an`Integer`变量。所以对于大多数情况，这已经足够了：

```
int pInt = 500; 
```

Integer 有用的主要情况是区分变量未知的情况（即`null`）：

```
Integer i = null; // possible
int i = null; // not possible because only Object variables can be null 
```

但是不要保留两个变量，一个就足够了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T11:17:14.523

在 Java 中，原始类的实例保存实例的实际值，但包装类的实例保存对对象的引用。即可以找到对象的位置的地址。

当您使用这一行编写程序时：

```
Integer integer = 500; 
```

编译器将其更改为：

```
Integer integer = new Integer(500); 
```

这个过程称为*自动装箱*。这会自动将原始实例放入整数的“盒子”中。因此，以下程序的输出：

```
public class PrimitiveToObject {
    public static void main(String[] args) {
        printClassName(1);
        printClassName(1L);
        printClassName((char)1);
    }
    public static void printClassName(Object object){
        System.out.println(object.getClass());
    }
} 
```

这是：

```
class java.lang.Integer
class java.lang.Long
class java.lang.Character 
```

还有这个：

```
int i = integer; 
```

变成这样：

```
int i = integer.intValue(); 
```

这称为*拆箱*。

正如您在上面看到的，*点运算符*( `.`) 用于名为的变量`integer`，但不是 on `i`。也就是说：包装器的对象可以被*取消引用*，但不能是原始实例。

装箱和拆箱可能会稍微减慢程序的速度。因此，对于新手来说，包装器可能看起来像是增加了负担，但事实并非如此。包装器用于对象需要是引用类型的地方。eg:`Map<Integer,String>map=new HashMap<Integer,String>();`是一个有效的陈述，但`Map<int,String>map=new HashMap<int,String>();`不是一个有效的陈述。

包装器非常有用的另一个典型情况：
在 MySQL 中，`NULL`它是`INT`类型列的有效条目。但是在Java中，`int`不能有`null`值，`Integer`可以。这是因为在 SQL 中`NULL`表示*Not Available*。因此，如果您使用 JDBC 在 MySQL 表中插入整数值，`null`您的 java 程序中的 a 将有助于在`NULL`MySQL 表中插入。

包装类在与此类似或类似的情况下也很有用：

```
Boolean decision; // Using wrapper for boolean.
if("YES".equalsIgnoreCase(consent))
    decision = Boolean.TRUE; // In favour
else if("NO".equalsIgnoreCase(consent))
    decision = Boolean.FALSE; // Not in favour
else if("CAN'T SAY".equalsIgnoreCase(consent))
    decision = null; // Undecided 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-12T07:47:43.800

对于初学者

`int pInt = 500;`, 这里`pInt`不是一个对象，而在

`Integer wInt = new Integer(500);` `wInt`是参考

这也是java不是纯面向对象语言的一个原因。因为一切都不是java的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T07:52:12.980

除非您需要对象，否则您应该使用原始类型。
包装类可以是`null`原始类型，例如：`Integer`可以`null`，`int`不能。

这是[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)初始化：

```
int pInt = 500; 
```

这是为相同的原始数据类型创建包装类：

```
Integer wInt = new Integer(pInt); 
```

**Java API 中的[包装类有两个主要用途：](http://en.wikipedia.org/wiki/Primitive_wrapper_class)**

*   提供一种在对象中“包装”原始值的机制，以便可以将原始值包含在为对象保留的活动中，例如添加到集合中，或从具有对象返回值的方法返回。
*   为原语提供各种实用功能。这些函数中的大多数都与各种转换有关：将基元与字符串对象相互转换，以及将基元和字符串对象与不同的基数（或基数）相互转换，例如二进制、八进制和十六进制。

在**Java 1.5**中有一个称为[Autoboxing](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)的概念。它具有在对象包装器与其原始类型之间进行转换或转换的能力。

所以这意味着：

```
Integer wInt = 500;
int pInt = new Integer(500); 
```

由于自动装箱，这可能是可能的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-08T14:29:56.470

Wrapper 类将在该框中有一个框，它将覆盖原始数据类型，有 8 种原始数据类型，即 byte、int、long、double、float、short、Boolean 和 char，这些都包含在 wrapper 类中。

使用我们使用的原始数据类型，例如 int a；

但是要使用包装类，我们需要使用 like`Integer a = new Integer(i);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-30T14:48:55.853

数据的类型是相同的，但在某些情况下，对象的操作比原始类型（如数据结构）更方便，您需要对数据类型进行更多控制。
例如，对象可以为空，而原始类型不能。
您也不能调用原始类型（.compareTo()、.equals()、...）的方法，但可以在包装类中调用。

以下信息描述了原始类和包装类中的类型：

**原始类型 | 包装类（超类 = 对象）**

*   boolean - 布尔值
*   char - 字符

**原始类型 | 包装类（超类=数字）**

*   字节 - 字节
*   短 - 短
*   int - 整数
*   长 - 长
*   浮动 - 浮动
*   双 - 双

要了解 wapper 类的工作原理，请考虑以下示例：

```
public final class IntWrapper { 
    private final int intVal;
    IntWrapper(int intVal) {
            this.intVal = intVal;
    }
    public int getInt() {
           return intVal;
   }
} 
```

现在我们可以从我们的新 IntWrapper 类中创建一个对象，并“装箱”原始 int 值 41：

```
int i = 41;
IntWrapper iw = new IntWrapper( i ); // box the primitive int type value into the object
i = iw.getInt(); // unbox the value from the wrapper object 
```

我的示例 IntWrapper 类是不可变的，不可变意味着一旦它的状态被初始化，它的状态就不能改变。当 final 关键字应用于类时，不能扩展 final 类。换句话说，最终类永远不可能是子类的超类。最终类可以是超类的子类，这不是问题。当一个类被标记为 final 时，它的所有方法也隐式地是 final 的。

重要的是要注意，当 final 应用于引用变量时，它不会阻止对象实例的成员更改值。

这个例子是为了更好地理解包装类是如何在里面工作的。

接下来，要创建 Integer、Double 和其他包装类，您可以编写：

```
Integer i = new Integer(4);
Double d = new Double(9.62);
Boolean b = new Boolean("true");
Character c = new Character('M'); 
```

要将封装的数字放入包装器对象中，您可以编写：

```
long l = i.longValue();
double e = i.doubleValue();
float f = d.floatValue();
short s = d.shortValue(); 
```

每个包装器类都包含在原始类型和包装器对象之间进行转换的特殊方法，它们不代表数字值：

```
boolean bo = b.booleanValue();
char ch = c.charValue(); 
```

直到 Java 5 版本，从包装类创建对象必须采用上述语法，但为了简化这些操作，主要涉及在 Java 集合（仅接受对象）中提供的数据结构中插入值，现在存在自动装箱或装箱和自动拆箱或拆箱选项。

自动装箱或装箱允许您插入原始值以引用等效的包装器类型或对象类型：

```
// Same result of Double d = new Double(-2.75);
Double objD = -2.75;
// Same result of Object objI = new Integer(13);
Object objI = 13; 
```

自动拆箱或拆箱允许您将包装器对象插入原始类型的变量中，在等效类型之间自动转换：

```
// Same result of double vd = objD.doubleValue();
double vd = objD;
// Same result of int vi = objI.intValue();
int vi = objI; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-27T14:04:59.933

我见过的最重要的实际区别`Integer`是初始化和计算的速度比`int`. `Integer`除非必要，否则我会避免。

```
int x = 20_000_000;// 20 millions
for (int i = 0; i < x; i++) {
    ix += 23;
    } 
```

当 ix 是 Integer 时完成循环需要 138 ms（平均超过 50 次试验），但当 ix 是 int 时只需要 10 ms

# html - 如何在 uiWebVIew 内的表中加载 uibutton

> ID：13339921
> 
> 赞同：0
> 
> 时间：2012-11-12T07:45:23.710
> 
> 标签：html, xcode, uiwebview

使用 uiwebview，我需要有一个表格，在该表格中，我在左侧 td 中创建一个文本字段，在右侧创建一个 uibutton。
现在这个按钮已经静态创建了，现在我需要根据这个新表的右 td 设置它的位置。
所以我的问题基本上是如何将 uibutton 的位置设置在表格的右侧 td
任何想法都将受到高度赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:44:50.733

如果您知道网页中元素的确切位置，您可以创建一个覆盖视图并将按钮放在那里，将所有其他事件传递给 UIWebView，但这确实是一个肮脏的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:35:53.850

我必须使用具有一定比例的字符计数方法来将按钮放在单词旁边……这不是最好的解决方案……但它完成了工作！

# oracle - Oracle SQL*Loader 时间戳错误

> ID：13339926
> 
> 赞同：1
> 
> 时间：2012-11-12T07:45:47.850
> 
> 标签：oracle, sql-loader

我的控制文件是

```
ACCESS_TIME TERMINATED BY "" "TO_TIMESTAMP_TZ(:ACCESS_TIME,'YYYY/MM/DD HH24:MI:SS:FF TZR')" 
```

数据文件是

```
2012/11/12 15:18:00:765 CST 
```

但是当我运行 SQL*Loader 提交数据时，数据库中的 ACCESS_TIME 与数据文件不匹配。

```
2012/11/13 05:18:00:765000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:59:21.773

做一个：

```
select SESSIONTIMEZONE from dual; 
```

您在中央标准时间插入数据。当您选择数据时，它可能会显示在您的会话（本地）时区中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:27:45.020

如果您看到这种行为，那么表格列必须是带有本地时区的时间戳，并且您在新加坡等地（gmt +8），例如：

```
SQL> alter session set time_zone='+08:00';

Session altered.

SQL> create table test (access_time timestamp with local time zone);

Table created.

SQL> host sqlldr test/test control=/tmp/load.ctl log=/tmp/load.log

SQL*Loader: Release 11.2.0.1.0 - Production on Mon Nov 12 13:26:14 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

Commit point reached - logical record count 2

SQL> select * from test;

ACCESS_TIME
---------------------------------------------------------------------------
13-NOV-12 05.18.00.765000

SQL> alter session set time_zone='-06:00';

Session altered.

SQL> select * from test;

ACCESS_TIME
---------------------------------------------------------------------------
12-NOV-12 15.18.00.765000

SQL> host cat /tmp/load.ctl
load data
 infile *
 replace
 into table test
 (  ACCESS_TIME terminated by "" "TO_TIMESTAMP_TZ(:ACCESS_TIME,'YYYY/MM/DD HH24:MI:SS:FF TZR')"
 )
begindata
2012/11/12 15:18:00:765 CST 
```

如果您想保留 CST 部分而不转换它，则将您的表定义为 TIMESTAMP WITH TIME ZONE。

```
SQL> create table test (access_time timestamp with time zone);

Table created.

SQL> host sqlldr test/test control=/tmp/load.ctl log=/tmp/load.log

SQL*Loader: Release 11.2.0.1.0 - Production on Mon Nov 12 13:27:56 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

Commit point reached - logical record count 2

SQL> select * from test;

ACCESS_TIME

---------------------------------------------------------------------------
12-NOV-12 15.18.00.765000 CST 
```

# c# - 通过使用数据行，插入一个字符串值

> ID：13339927
> 
> 赞同：0
> 
> 时间：2012-11-12T07:45:50.520
> 
> 标签：c#

```
DataRow drEmpty = dsResult.Tables[1].NewRow();

dsResult.Tables[1].Rows.InsertAt(drEmpty, 0);

DataRow drBranch = dsResult.Tables[1].Rows[1];

drBranch[1] = "Branch"; <--error

dsResult.Tables[1].Rows.InsertAt(drBranch, 1); 
```

我对这几行代码的预期输出是通过在其中添加“分支”将第一个空行数据添加到我的下拉列表框中和第二行，但我没有这样做

给出错误消息 - 输入字符串的格式不正确。无法存储在 ows_ID 列中。预期类型是 Int64。

之后我尝试更改为

```
drBranch[1] = int64.Parse("Branch"); 
```

我得到另一个错误

第二个错误消息——输入字符串的格式不正确。

我已经得到了我想要的答案，我会在 7 小时后发布答案，谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:51:36.813

在您的示例`drBranch[1]`中表示`ows_ID`列，它只接受 type 的值`integer`。这意味着只允许没有小数点的数字。

您可以使用 将包含数字的字符串转换`"55"`为整数`Int64.Parse("55")`，但不能将字符串转换`"Branch"`为整数。您正在尝试在`ows_ID`列中存储一个字符串。也许您正在尝试访问错误的索引？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:58:32.120

问题是它`"Branch"`不是整数。

要将值转换为整数，您需要一个整数值作为字符串，如`"526"`, `"100"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:58:39.210

我假设您认为[**列序数**](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.ordinal.aspx)是从一开始的，但它是从零开始的，因此`drBranch[1]`是第二列。

在我看来，最好使用列的名称：

```
drBranch.SetField<String>("Branch", newBranch); 
```

（我正在使用[`SetField`扩展](http://msdn.microsoft.com/en-us/library/bb353039%28v=vs.90%29.aspx)方法，因为它是强类型并支持可空值）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T12:24:38.373

我建议在使用 DataRow 之前使用 DataTable：

```
DataTabel dtResult = dsResult.Tables[1].Clone();

dtResult.Columns[1].DataType = Type.GetType("System.String");

DataRow drEmpty = dtResult.NewRow();

dsResult.Tables[1].Rows.InsertAt(drEmpty, 0);

DataRow drBranch = dsResult.Tables[1].Rows[1];

drBranch[1] = "Branch";

dsResult.Tables[1].Rows.InsertAt(drBranch, 1); 
```

# jquery - 尝试使用 GET 请求调用方法 \u0027GetNextImage\u0027，这是不允许的

> ID：13339929
> 
> 赞同：3
> 
> 时间：2012-11-12T07:46:09.240
> 
> 标签：jquery

我的客户端脚本中有一个 Web 方法 GetNextImage。在 ASPX 页面中，我有以下代码。

```
function slideshow() {
  $.ajax({
    type: "GET",
    contentType: "application/json; charset=utf-8",
    url: "/RollingScreen.aspx/sample",
    dataType: "json",
    data: "{}",
    success: function (data) {
      //this changes the image on the web page
      $('#imgSlideShow').attr("src","~/Images/1.png");

      //fires another sleep/image cycle
      setTimeout(slideshow(), 5000);
    },
    error: function (result) {
      alert(result.message);
    }
  });
}

$(document).ready(function () {
  //Kicks the slideshow
  slideshow();
}); 
```

我收到如下错误。

```
{"Message":"An attempt was made to call the method \u0027GetNextImage\u0027 using a GET request, which is not allowed.","StackTrace":" at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"} 
```

请任何人都可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-05T11:30:58.390

向您的 WebMethod 添加属性以指示使用 HTTP GET。

```
[WebMethod(EnableSession = true)]
[System.Web.Script.Services.ScriptMethod(UseHttpGet = true, ResponseFormat = System.Web.Script.Services.ResponseFormat.Json)]
public static string sample()
{
   //Your Code Which Gets Next Image 
} 
```

您不应该使用 POST 而不是 GET。

“POST 请求不能添加书签、发送电子邮件或以其他方式重复使用。它们使用浏览器的后退/前进按钮搞砸了正确的导航。只能在一个独特的操作中使用它们将数据发送到服务器，并且（通常）有服务器通过重定向回答。” - deceze（[使用 POST 而不是 GET 有什么不好的地方吗？](https://stackoverflow.com/questions/4755071/is-there-anything-not-good-using-post-instead-of-get)）

# android - 如何避免安卓黑屏？

> ID：13339937
> 
> 赞同：0
> 
> 时间：2012-11-12T07:47:39.767
> 
> 标签：android, screen

我开发了一个视频播放器应用程序。该应用程序将继续播放视频（并重复播放）。我想在播放时处理它，所以我需要一直播放视频，但是 android 系统会自动使屏幕变黑，锁定屏幕或使系统进入睡眠状态。我想知道如何避免这种情况发生，即我的程序应该继续播放视频并且屏幕不应该变黑。我在网上找到了一些解决方案，但仍然无法正常工作，谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:49:12.743

尝试使用：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

要不就：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

编辑：根据此链接：[如何防止 Android 设备以编程方式进入睡眠状态？](https://stackoverflow.com/questions/3723634/how-do-i-prevent-an-android-device-from-going-to-sleep-programmatically). 你应该使用：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My Tag");
wl.acquire();

..screen will stay on during this section..

wl.release(); 
```

您还需要确保在 Manifest 中设置了 WAKE_LOCK 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:15:38.857

可以`PowerManager`用来避免系统休眠

[如何使用电源管理器](http://developer.android.com/reference/android/os/PowerManager.html)

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag"); 
```

// 当应用程序恢复或启动时

```
protected void onResume()
{
     wl.acquire();
     super.onResume();
} 
```

在`onPause()`你应该释放唤醒锁，以避免消耗更多的电池

```
protected void onPause()
{
   wl.release();
   super.onPause();
} 
```

最后，不要忘记许可

```
<uses-permission  android:name="android.permission.WAKE_LOCK"/> 
```

# php - 使用 PHP GET 变量限制人员

> ID：13339939
> 
> 赞同：5
> 
> 时间：2012-11-12T07:47:43.810
> 
> 标签：php, get

在一个面试问题中，我得到以下问题

> “如何在自定义构建框架中限制开发人员使用`$_GET`变量。”

我们有自己的自定义构建框架，但在我们的框架中，我们不能限制人们使用`$_GET`or`$_POST`代替`$this->request->get`or `$this->request->post`。

我们有访问这个变量的方法，但人们大多数时候使用`$_GET`or`$_POST`代替我们的方法。

你能给我答案吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T07:51:47.197

在 php.ini 中，从选项中删除`G`和`P`字符。`variables_order`

或者，如果您希望他们永远恨您，您可以复制超全局的内容，然后将其设置为一个类的实例，该实例在您尝试与之交互时抛出异常：

```
class supaglobal implements arrayaccess
{
    public function _construct(){}

    function offsetExists($offset) {
        throw new Exception("Don't use GET, bro");
    }
    function offsetSet($property, $value){
        throw new Exception("Don't use GET, bro");
    }
    function offsetUnset($property) {
        throw new Exception("Don't use GET, bro");
    }
    function offsetGet($property){
        throw new Exception("Don't use GET, bro");
    }
}

$approvedget = $_GET;
$_GET = new supaglobal();
$abcd = $_GET["abcd"]; // throws exception
$abcd = $approvedget["abcd"]; // A - OK 
```

# file - 如何将yuv422图像数据写入bmp文件？

> ID：13339943
> 
> 赞同：0
> 
> 时间：2012-11-12T07:48:31.600
> 
> 标签：file, bmp, yuv

我使用 at91sam9260 使用图像传感器接口 (ISI) 在 EEPROM 中有 yuv422 格式的图像数据。我想以 .bmp 格式将其写入 SD 卡？或者我必须先将 yuv422 图像转换为 RGB，然后我必须处理数据以写入 BMP 文件？我必须用 C 来做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:55:00.317

你需要转换它。BMP 文件格式仅支持 RGB 图像数据。

如果您不想在微处理器上进行转换（提示：您可能不想），您可以将 YUV 数据写入 SD 卡上的一个`.yuv`文件——如果你愿意，可以称之为文件——并在您的 PC 上进行转换。那可能会容易得多。

# modularity - 纽曼模块化

> ID：13339945
> 
> 赞同：1
> 
> 时间：2012-11-12T07:48:35.613
> 
> 标签：modularity

我已经为 Q = 0.67 的图计算了 Newman 模块化，但我不知道这个值说明了什么？谁能解释从 [0;1] 开始的 Q 的范围？换句话说：Q = 0.67 具体是什么意思？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:42:45.260

Q 范围从 -1 到 1，其中 1 表示最佳模块化。但是，给定图的最大可实现模块化不一定为 1，但可能更低，具体取决于其特定结构，因此严格来说，这些值仅相对于同一图上其他分配的 Q 值才有意义。不太严格地说，Q 值高于 0.3 的分配通常被认为是成功识别的集群结构，尽管这更像是一种启发式，我什至不确定我在哪里读到的。

# iphone - 如何将 Salesforce 集成到 iPhone 应用程序中？

> ID：13339956
> 
> 赞同：4
> 
> 时间：2012-11-12T07:49:38.113
> 
> 标签：iphone, objective-c, ipad, ios5

任何人都可以帮助我在我的应用程序中集成销售人员吗？我已经在销售人员中创建了帐户，还创建了远程访问密钥。任何人都可以告诉我如何在 iPhone 应用程序中广告对象、仪表板等。我也想知道如何访问 salesforce 上的数据。例如，我想获取 salesforce 中的所有自定义对象，并且还想从 iPhone 应用程序创建自定义对象。任何人都可以在这方面指导我。感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:56:44.193

有很多方法可以做到这一点。我建议您仔细阅读并选择最好的方法。

以下是一些阅读链接：

[让 Salesforce 和 PayPal 协同工作](http://www3.formassembly.com/blog/doc/connectors/salesforce/advanced-integration/making-salesforce-and-paypal-work-together/)

[SDK项目](https://github.com/forcedotcom/SalesforceMobileSDK-iOS)

[良好的文档和代码](http://wiki.developerforce.com/page/Developing_Hybrid_Apps_with_the_Salesforce_Mobile_SDK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:58:09.483

Salesforce 为 iPhone、Android 和混合平台提供移动 SDK。这个 SDK 有关于如何开始的示例。有很多可用的文档。

基本上，SDK 帮助使用 oAuth 与 Salesforce 进行身份验证，使用 RestKit 与对象通信。

请参阅以下 URL 以开始..

从以下 URL 下载移动 SDK。 [https://github.com/forcedotcom/SalesforceMobileSDK-iOS](https://github.com/forcedotcom/SalesforceMobileSDK-iOS)

有一个论坛 [http://boards.developerforce.com/t5/Mobile/bd-p/mobile](http://boards.developerforce.com/t5/Mobile/bd-p/mobile)

API 文档 [http://forcedotcom.github.com/SalesforceMobileSDK-iOS/Documentation/SalesforceSDK/index.html](http://forcedotcom.github.com/SalesforceMobileSDK-iOS/Documentation/SalesforceSDK/index.html)

参考： [http ://wiki.developerforce.com/page/Mobile_SDK](http://wiki.developerforce.com/page/Mobile_SDK)

# c# - 使用 Linq to Sql 自动序列化

> ID：13339957
> 
> 赞同：7
> 
> 时间：2012-11-12T07:49:40.230
> 
> 标签：c#, linq-to-sql, serialization, xml-serialization

有没有办法将数据存储在这样的表中：

[![](../Images/2f2d6b543bc70331a87fac717e73c72f.png)](https://i.stack.imgur.com/iwC1U.png)

内部`SettingsModel`列，其定义`Linq-to-Sql`如下：

[![](../Images/90a55c6bbb2c94dad4b8da7c135940a6.png)](https://i.stack.imgur.com/FOJem.png)

并且还可以`DataContext`选择：

[![](../Images/3a0e897eca81055936a10db6a45899ba.png)](https://i.stack.imgur.com/oPBne.png)

使用类 SettingsModel 定义如下：

```
namespace ElQueue.DataClasses
{
    [DataContract]
    public sealed class SettingsModel
    {
        [DataMember(IsRequired = true)]
        public int[] VideoMediaData { get; set; }
    }
} 
```

这边走？...

```
using (SomeDataContext dataContext = new SomeDataContext())
{
    SettingsModel m = new SettingsModel();
    m.VideoMediaData = new int[] { 1, 2, 3 };
    dataContext.MainTableSettings.InsertOnSubmit(new MainTableSetting() { SettingsModel = m });
    dataContext.SubmitChanges();
}

using (SomeDataContext dataContext = new SomeDataContext())
{
    var r = dataContext.MainTableSettings.Single();
} 
```

你看，上面的代码不能正常工作，它抛出异常，说它不能将字符串转换为`MainTableSetting`这意味着它不能保存所有的序列化数据，或者加上不能反序列化它。

当我访问数据库时，我需要一些建议如何将其指向`Linq-to-Sql`实际进行序列化（反之亦然）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:08:12.677

> 尽管您可以将 XElement 和 XDocument 映射到 SQL Server，如类型映射运行时行为矩阵中所示，但 System.Data.Linq.DataContext.CreateDatabase 方法**没有这些类型的默认 SQL Server 类型映射**。
> 
> 如果一个类实现**Parse()**和**ToString()**，您可以将对象映射到任何 SQL 文本类型（CHAR、NCHAR、VARCHAR、NVARCHAR、TEXT、NTEXT、XML）。**通过将ToString()**返回的值发送到映射的数据库列，对象被存储在数据库中。通过在数据库返回的字符串上调用**Parse()来重建对象。**
> 
> [http://msdn.microsoft.com/en-us/library/bb386947.aspx#TextMapping](http://msdn.microsoft.com/en-us/library/bb386947.aspx#TextMapping)

```
public sealed class SettingsModel
{
    // ...

    public static SettingsModel Parse(string source)
    {
        SettingsModel res;

        // Deserialise the object

        return res;
    }
} 
```

# maple - 尝试使用初始条件时出错

> ID：13339958
> 
> 赞同：0
> 
> 时间：2012-11-12T07:49:42.427
> 
> 标签：maple

我在 Maple 中用微分方程和一些初始条件做一个快速的问题，但我收到一条错误消息，鉴于上下文，我似乎无法理解。谁能快速详细说明这里发生了什么？我该如何解决这个问题？

```
> KVLl2 := -4*(i2(t)-2)-12*(i2(t)-i3(t)) = 0;
              -16 i2(t) + 8 + 12 i3(t) = 0
> KVLl3 := -12*(i3(t)-i2(t))-4*i3(t)-3.5*(diff(i3(t), t)) = 0;
                                  / d       \    
       -16 i3(t) + 12 i2(t) - 3.5 |--- i3(t)| = 0
                                  \ dt      /    
> mySoln := dsolve({KVLl2, KVLl3, i2(0) = 1, i3(0) = 1}, i2, i3);

Error, (in dsolve) found the following equations not depending 
on the unknowns of the input system: {1 = 1} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:31:16.450

Maple 不知道如何处理您作为目标函数提供的 i2 和 i3。如果您查看 dsolve (?dsolve) 的帮助，您会发现它需要根据变量（在本例中为 t）和列表来指定其目标函数。尝试使用这个

```
dsolve({KVLl2, KVLl3, i2(0) = 1, i3(0) = 1}, {i2(t), i3(t)}); 
```

这里没有错误，但也没有解决方案（这可能与您的方程式有关）

# django - 指定模型中的选项，ModelForm 中的 RadioButton 呈现未选择的值“------”

> ID：13339959
> 
> 赞同：3
> 
> 时间：2012-11-12T07:49:43.723
> 
> 标签：django, django-models, django-forms

我的目标是能够使用 get_FOO_display()，据我所知，我必须在模型字段中指定选择。同时，我想使用 ModelForm 作为 RadioButton 来呈现表单。

我遇到的问题是，将在下拉选择中使用的默认值“------”显示为我的 RadioButton 选项之一。

**模型.py**

```
class Medication(models.Model):
    YESNO_CHOICES = [(0, 'No'), (1, 'Yes')]
    Allergies = models.BigIntegerField(verbose_name='Allergies:', choices=YESNO_CHOICES) 
```

**表格.py**

我试过在 ModelForm 中指定一个 RadioButton 小部件。

```
class mfMedication(ModelForm):
    class Meta:
        model = Medication
        widgets = {
        'Allergies': RadioSelect(),
        } 
```

并且还使用 CHOICES 指定 RadioButton。

```
class mfMedication(ModelForm):
    class Meta:
        model = Medication
        widgets = {
        'Allergies': RadioSelect(choices=Medication.YESNO_CHOICES),
        } 
```

在这两种情况下，我都会得到三个单选按钮：

```
"": -------
0 : No
1 : Yes 
```

我没有得到“-------”的唯一方法是从我的模型字段中删除选项=YESNO_CHOICES，但这会阻止 get_FOO_display() 工作。

您用来完成这项工作的任何方法都将不胜感激。

谢谢。京东。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T08:28:44.567

如果您想阻止显示`-------`选项，则应[`empty_label=None`](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField.empty_label)在表单字段中指定。

另外，我建议您将[BooleanField](https://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield)用于模型，[将 TypedChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#typedchoicefield)用于表单：

**模型.py：**

```
class Medication(models.Model):
    Allergies = models.BooleanField('Allergies:') 
```

**表格.py：**

```
class MedicationForm(forms.ModelForm):
    YESNO_CHOICES = ((0, 'No'), (1, 'Yes'))
    Allergies = forms.TypedChoiceField(
                     choices=YESNO_CHOICES, widget=forms.RadioSelect, coerce=int
                ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T15:20:04.550

使用 BigIntegerField，您还可以设置 default=0 或任何您想要的选择。

# mysql - MySQL 例程 INSERT 语句与 CASE

> ID：13339960
> 
> 赞同：4
> 
> 时间：2012-11-12T07:49:45.380
> 
> 标签：mysql, insert

MySQL 例程：

```
DELIMITER $$

CREATE DEFINER=`root`@`%` PROCEDURE `INSERT_Employee_Info`(
IN lname varchar(64),
IN fname varchar(64),
IN mname varchar(64)
)
BEGIN
INSERT INTO tbl_employee_info(lname, fname, mname)
VALUES(lname, fname, mname);
END 
```

有时，值 lname、fname 和 mname 可能不包含任何内容但不包含 null，我希望插入语句插入`NULL`而不是`''`值。

我有以下想法，但我非常怀疑它会起作用：

```
INSERT INTO tbl_employee_info(lname, fname, mname)
VALUES(CASE lname WHEN '' THEN NULL ELSE lname END,
CASE fname WHEN '' THEN NULL ELSE fname END,
CASE mname WHEN '' THEN NULL ELSE mname END); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T07:53:52.607

它会起作用，但你需要加上括号`case`

```
INSERT INTO tbl_employee_info(lname, fname, mname)
VALUES
(
   (CASE lname WHEN '' THEN NULL ELSE lname END),
   (CASE fname WHEN '' THEN NULL ELSE fname END),
   (CASE mname WHEN '' THEN NULL ELSE mname END)
); 
```

*   [**SQLFiddle 演示**（*添加`IF`替代*）](http://sqlfiddle.com/#!2/a0741/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T07:54:52.183

您可以使用[IF()](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)函数 -

```
CREATE DEFINER=`root`@`%` PROCEDURE `INSERT_Employee_Info`(
  IN p_lname varchar(64),
  IN p_fname varchar(64),
  IN p_mname varchar(64)
)
BEGIN    
  INSERT INTO tbl_employee_info(lname, fname, mname)
  VALUES(
    IF(p_lname = '', NULL, p_lname),
    IF(p_fname = '', NULL, p_fname),
    IF(p_mname = '', NULL, p_mname));
END 
```

另一项建议 - 不要为字段名称和参数使用相同的名称。

# qt - 透明的 Qt-widget 和 Ogre

> ID：13339963
> 
> 赞同：1
> 
> 时间：2012-11-12T07:50:02.023
> 
> 标签：qt, opengl, direct3d, ogre

我们一直在研究使用透明小部件作为 Ogre 的覆盖。虽然 Qwidgets 默认是透明的，但将它们覆盖在 Ogre 小部件上是不同的，并且会出现黑屏。在食人魔论坛（[http://www.ogre3d.org/forums/viewtopic.php?f=2&t=42733](http://www.ogre3d.org/forums/viewtopic.php?f=2&t=42733)）我发现以下内容：

“好的，为了弄清楚我的想法，我将总结一下我发现的将 Ogre 和 Qt 结合起来的各种方法：

1.  使用 Qt 创建一个窗口（不一定是 QGLWidget）并使用“externalWindowHandle”标志将其窗口句柄传递给 Ogre。Ogre 然后创建一个上下文并对其负全部责任。这基本上是我为我制作的第一个演示所做的。它的优点是它应该支持 OpenGL 和 Direct3D，并且应该可以在所有平台上工作。最大的缺点是 Qt 小部件只能被覆盖（而不是集成），因此您无法获得良好的透明度。

2.  一种类似于 (1) 的方法，但不同之处在于帧缓冲区是从 Ogre 显式读回并用作小部件背景。这将再次适用于所有渲染系统和平台，现在 Qt 可以从透明度执行适当的合成。但是，读取每一帧并将其复制到 Qt 的需要可能会很慢。但这可能是一个很好的“后备”方法。我还没有尝试实现它。

3.  这是我们在这个线程中真正考虑的“正确”方法。它涉及 Ogre 和 Qt 都拥有 OpenGL 上下文，并且都渲染到同一个小部件中。此小部件设置为 QGraphicsView/QGraphicsScene 的背景，其他小部件可以叠加适当的透明效果。它仅适用于 OpenGL，并且（理论上）是跨平台的。有两种变体：

    *   允许 Ogre 创建它自己的 OpenGL 上下文（传递标志 'externalGLControl'），然后在 createRenderWindow() 完成后重新获取上下文。在 windows 下有 wglGetCurrentDC() 和 wglGetCurrentContext() ——其他平台应该有类似的东西。

    *   让 Qt 代表 Ogre 创建一个上下文，并使用“externalGLContext”标志将其传递给 Ogre。在这种情况下，Ogre 基本上什么都不做，除了渲染到它提供的上下文中——所有的控制都在 Qt 中。因为我在 Qt 和 Ogre 中都遇到了崩溃，所以我还没有完全让这个工作。”

方法 1 是我们在项目中采用的方法，如上所述，我们在透明度方面遇到了同样的问题。方法 3 是可能的，但我们会限制自己使用 openGL。该代码可在论坛链接的第 3 页找到。

我们还找到了一个演示视频，但我找不到它是如何实现的，但它看起来真的很酷：http: [//youtu.be/b_3xfFuwGOQ](http://youtu.be/b_3xfFuwGOQ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:54:10.460

您现在可以在[https://github.com/advancingu/QmlOgre](https://github.com/advancingu/QmlOgre)的更新 QmlOgre 示例中找到您的第三个建议方法的第二个变体的实现。原始示例有一些问题已在此处修复。

希望在您提出问题几个月后这仍然有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:41:27.397

*这是该视频的代码 (http://youtu.be/b_3xfFuwGOQ)。（需要Qt5） [http://qt.gitorious.org/qt-labs/qmlogre](http://qt.gitorious.org/qt-labs/qmlogre)

还有Cutexture（需要Qt4） [https://github.com/advancingu/Cutexture](https://github.com/advancingu/Cutexture) http://i56.tinypic.com/b6xb83.jpg

这是一个 Qt4 Ogre Widget 示例。（需要 Qt4） [http://zester.googlecode.com/files/QtCreatorOgre2.zip](http://zester.googlecode.com/files/QtCreatorOgre2.zip) *

# iphone - EGOTextView 中的 LineHeight

> ID：13339970
> 
> 赞同：0
> 
> 时间：2012-11-12T07:50:54.933
> 
> 标签：iphone, ios, uitextview, core-text, css

我使用[EGOTextView](https://github.com/enormego/EGOTextView)进行富文本编辑。但是 的`lineHeight`看起来`EGOTextView`比 中的要小一些`UITextView`，它们都设置了相同的字体。我尝试在默认属性中设置`kCTParagraphStyleSpecifierMinimumLineHeight`and `kCTParagraphStyleSpecifierMaximumLineHeight`，但这不是一个好的解决方案，因为我需要插入必须修改`lineHeight`. 任何帮助将不胜感激：）

![在此处输入图像描述](../Images/9c0947a88cd159a908294fc6072c495a.png)![在此处输入图像描述](../Images/e61a7ac6822de1211a93d775fe06257e.png)

**EGOTextView.m**

```
- (void)viewDidLoad {
[super viewDidLoad];
UISegmentedControl *segment = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"UITextView", @"EGOTextView", nil]];
segment.segmentedControlStyle = UISegmentedControlStyleBar;
[segment addTarget:self action:@selector(segmentChanged:) forControlEvents:UIControlEventValueChanged];
self.navigationItem.titleView = segment;
[segment release];

if (_textView==nil) {
    UITextView *textView = [[UITextView alloc] initWithFrame:self.view.bounds];
    textView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    textView.font = [UIFont systemFontOfSize:14];
    [self.view addSubview:textView];
    self.textView = textView;
    [textView release];
}

if (_egoTextView==nil) {
    EGOTextView *view = [[EGOTextView alloc] initWithFrame:self.view.bounds];
    view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    view.delegate = (id<EGOTextViewDelegate>)self;
    [self.view addSubview:view];
    self.egoTextView = view;
    self.egoTextView.delegate = self;
    [view release];  
    [self.egoTextView setFont:[UIFont systemFontOfSize:14]];
}
[segment setSelectedSegmentIndex:1];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:04:30.070

您可以将 设置`kCTParagraphStyleSpecifierLineSpacing`为您想要分隔线的点数`CTParagraphStyleSetting`。`NSAttributedString`或者，您也可以使用`kCTParagraphStyleSpecifierLineHeightMultiple`, 指定行高倍数，以将行高增加一个因子。

这是一个简单的例子：

```
CGFloat lineSpacing = 0.f; // spacing, in points
CGFloat lineHeightMultiple = 0.f; // line height multiple

CTParagraphStyleSetting paragraphStyles[2] = {
    {.spec = kCTParagraphStyleSpecifierLineSpacing, .valueSize = sizeof(CGFloat), .value = (const void *)&lineSpacing},
    {.spec = kCTParagraphStyleSpecifierLineHeightMultiple, .valueSize = sizeof(CGFloat), .value = (const void *)&lineHeightMultiple}
};

CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphStyles, 10);
[NSDictionary dictionaryWithObject:(__bridge id)paragraphStyle
                            forKey:(NSString *)kCTParagraphStyleAttributeName];
CFRelease(paragraphStyle); 
```

# java - HashSet 和 HashMap 上 contains 方法的一致性

> ID：13339973
> 
> 赞同：0
> 
> 时间：2012-11-12T07:51:17.393
> 
> 标签：java, hashmap, hashset

为什么在 Set 上调用 remove 时，HashSet 上的 containsAll 方法不能保持一致，而 HashMap 上的 containsValue 方法在删除值后保持一致 从 HashSet 中删除值后，即使所有值都存在，但 containsAll 返回 false在 HashMap 的情况下， containsValue 方法返回正确的值

```
public static void main(String[] args)
    {

    HashSet<String> lookup=new HashSet<String>();
    HashMap<Integer,String> findup=new HashMap<Integer,String>();

    String[] Alltokens={"This","is","a","programming","test","This","is","a","any","language"};
    for(String s:Alltokens)
        lookup.add(s);

    String[] tokens={"This","is","a"};
    Collection<String> tok=Arrays.asList(tokens);

    lookup.remove(Alltokens[5]); 
     if(lookup.containsAll(tok))
       System.out.print("found");
    else    
        System.out.print("NOT found");

    Integer i=0;
    for(String s:Alltokens)
        findup.put(i++,s);
    boolean found=true;
    findup.remove(Alltokens[0]);
        findup.remove(5);               //Edit : trying to remove value whose key is 5
    for(String s:tokens)
        if(!findup.containsValue(s))
            found=false;
    System.out.print("\nIn map " + found);
} 
```

在地图中未找到输出 true

如果在 HashSet 上调用 remove 方法，是否有办法保持 containsAll 一致？此外，如果将集合中不存在的值传递给 remove method.ContainsAll 保持一致

```
 lookup.remove("Alltokens[5]");
    if(lookup.containsAll(tok)) 
```

//如果已经存在的值被删除，这将是真的，因为它是假的

可能它必须与 HashMaps 中的键和 HashSet 中的键无关。你能解释一下它们是如何工作的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:55:55.113

[`Map.remove(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#remove%28java.lang.Object%29)删除*基于**key***的映射。

由于您使用`Integer`对象作为键 ( )，因此您在调用时`put(i++, s)`不会删除*任何内容*`findup.remove(Alltokens[0])`！检查它的返回值，看看它是否会返回`false`。

# php - 增量字母数字主键

> ID：13339975
> 
> 赞同：0
> 
> 时间：2012-11-12T07:51:25.117
> 
> 标签：php, sql, key, auto-generate, alphanumeric

您好，我想在我的一张表中有一个增量字母数字键（主键）。我希望它是 BR10000、BR10001、BR10002 等等。有任何想法吗？我在google上做了一些研究，但我发现对于像我这样的初学者来说很难理解。因此，任何可以帮助入门的建议或任何事情都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:32:26.047

将记录存储在数据库中，该记录的主键（通常是 ID 列）成为数字部分。当您将其显示给用户时，您只需根据需要对其进行格式化，例如：

```
$a = sprintf('BR%06d', 135);

var_dump($a); //string(8) "BR000135" 
```

当您想从用户输入中查找记录时，您只需在进行查询之前去掉“BR”，例如：

```
sscanf($a, 'BR%06d', $id);

var_dump($id); //int(135) 
```

# php - 如何在导出 xml 中添加 DOCTYPE？

> ID：13339976
> 
> 赞同：5
> 
> 时间：2012-11-12T07:51:25.973
> 
> 标签：php, xml, domdocument, doctype

我使用以下方法在 PHP 中导出了一个 xml 文件：

```
$xmldoc = new DOMDocument();        
$xmldoc->formatOutput = true;
$xmldoc->encoding="Shift_JIS";

// create root nodes
$root = $xmldoc->createElement("TableData");
$xmldoc->appendChild( $root );
$xmldoc->save($filename); 
```

结果：

```
<?xml version="1.0" encoding="Shift_JIS"?>
<TableData> </TableData> 
```

现在，我想添加如下行 `<!DOCTYPE TableDef SYSTEM "TableData.dtd">`：

```
 <?xml version="1.0" encoding="Shift_JIS"?>
    <!DOCTYPE TableDef SYSTEM "TableData.dtd">
   <TableData> </TableData> 
```

如何添加`DOCTYPE`导出的xml？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:58:36.113

请参阅[PHP DOM：更改现有 DOMDocument 的文档类型](https://stackoverflow.com/questions/3090835/php-dom-change-doctype-of-existing-domdocument)

> [使用DOMImplementation::createDocument()](http://www.php.net/manual/en/domimplementation.createdocument.php)创建 DOMDocument 时，您可以将 doctype 指定为构造函数中的第三个参数。然后这个 doctype 被“绑定”到文档，你可以稍后使用 $document->doctype 来检索它。

# php - 动态下拉列表填写文本框

> ID：13339983
> 
> 赞同：1
> 
> 时间：2012-11-12T07:52:06.023
> 
> 标签：php, javascript, mysql, drop-down-menu, onchange

我一直在寻找这个公共汽车的解决方案，但无法解决。当我想要一个动态下拉菜单来调整第二个下拉菜单中的值并在文本框中填写文本值时，我设法让它工作。

现在我想删掉第二步：即。我实际上想摆脱第二个下拉菜单，只需在文本框中输入一个值。我已经尝试了一切来删除第二步，但是一旦我这样做了，一切都停止了。

目前该函数查看第二个下拉菜单并为其设置选项，我添加了该行

document.getElementById('fld_ClientID').value =""

让它在文本框中输入数据。如何完全摆脱对 tblPromotions 的引用并使其仅获取文本框的数据。

```
<script language="javascript">  
function setOptions(chosen) {  
  var selbox = document.myform.selectpromotion; 

  selbox.options.length = 0;  
  if (chosen == "0") {  
    selbox.options[selbox.options.length] = new Option('First select a client','0');  

  }  
  <?php  
  $client_result = mysql_query("SELECT * FROM tblClients ORDER BY ClientName") or die(mysql_error());  
  while(@($c=mysql_fetch_array($client_result)))  
  {  
  ?>  
    if (chosen == "<?=$c['ClientID'];?>") {  

    <?php  
    $c_id = $c['ClientID'];  
    $promo_result = mysql_query("SELECT * FROM tblPromotions WHERE ClientID='$c_id'") or die(mysql_error());  
    while(@($m=mysql_fetch_array($promo_result)))  
    {  
    ?>  
      selbox.options[selbox.options.length] = new  
      Option('<?=$m['PromotionName'];?>','<?=$m['ClientID'];?>'); 
      document.getElementById('fld_ClientID').value ="<?=$m['ClientID'];?>"; 
    <?php  
    }  
    ?>  
    }  
  <?php  
  }  
  ?>  
}  
</script>  
</head>  
<body>  
<form name="myform"  method="POST" action="processaddpromotionNEW.php"> ><div align="center">  
  <p> 
     <select name="selectclient" size="1"  
    onchange="setOptions(document.myform.selectclient.options  
    [document.myform.selectclient.selectedIndex].value);">  
    <option value="0" selected>Select a client</option>  
    <?php  
    $result = mysql_query("SELECT * FROM tblClients ORDER BY ClientName") or die(mysql_error());  
        while(@($r=mysql_fetch_array($result)))  
    {  
    ?>  
    <option value="<?=$r['ClientID'];?>"> 
      <?=$r['ClientName'];?> 
      </option>  
    <?php  
    }  
    ?>  
  </select> 
  <br><br>  
  <select name="selectpromotion" size="1">  
    <option value=" " selected>First select a client</option>  
  </select> 
  </p> 
  <p> 
<input name="fld_ClientID" type="text" class="Arial" id="fld_ClientID" tabindex="11" size="10" /> 
  <br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:45:58.083

也许，您不应该在 javascript 函数中执行 mysql 查询。您应该：使用 ajax 获取可能的选项或查询所有可能的选项，然后将其保存在全局变量中

就像是：

```
<script>
var secondOptions = {};
<?php  
    $promo_result = mysql_query("SELECT * FROM tblPromotions") or die(mysql_error());  
    while(@($m=mysql_fetch_array($promo_result))){  
    ?>  
        if(secondOptions['<?=$m['ClientID'];?>'] == undefined)
            secondOptions['<?=$m['ClientID'];?>'] = {};
        secondOptions['<?=$m['ClientID'];?>']['<?=$m['PromotionId'];?>'] = '<?=$m['PromotionName'];?>'; 
    <?php  
    }  
    ?>  

    setOptions(clientId){
        jQuery("select[name=selectpromotion]").empty();
        options = "";
        jQuery.each(secondOptions[clientID],function(a,b){
            options += "<option value='"+a+"'>"+b+"</options>";
            });
        jQuery("select[name=selectpromotion]").append(options);
    }

    <select name="selectclient" size="1" onchange="setOptions(jQuery(this).val());">  

    ... 
```

# python - 如何从展平列表创建嵌套列表？

> ID：13339986
> 
> 赞同：4
> 
> 时间：2012-11-12T07:52:15.847
> 
> 标签：python, python-3.x

我写了一个函数来创建一个嵌套列表。

例如：

```
input= ['a','b','c','','d','e','f','g','','d','s','d','a',''] 
```

我想在之前创建一个子列表`''`

作为回报，我想要一个嵌套列表，例如：

```
[['a','b','c'],['d','e','f','g'],['d','s','d','a']] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:59:12.583

尝试以下实现

```
>>> def foo(inlist, delim = ''):
    start = 0
    try:
        while True:
            stop = inlist.index(delim, start)
            yield inlist[start:stop]
            start = stop + 1
    except ValueError:
            # if '' may not be the end delimiter 
            if start < len(inlist):
                yield inlist[start:]
        return

>>> list(foo(inlist))
[['a', 'b', 'c'], ['d', 'e', 'f', 'g'], ['d', 's', 'd', 'a']] 
```

另一种可能的实现可能是[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)。但是你必须过滤结果以删除 ['']。但是，尽管它可能看起来是单行的，但上面的实现更加 Pythonic，因为它直观且易读

```
>>> from itertools import ifilter, groupby
>>> list(ifilter(lambda e: '' not in e,
             (list(v) for k,v in groupby(inlist, key = lambda e:e == ''))))
[['a', 'b', 'c'], ['d', 'e', 'f', 'g'], ['d', 's', 'd', 'a']] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T09:15:46.887

我会使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
l = ['a','b','c','','d','e','f','g','','d','s','d','a','']
from itertools import groupby
[list(g) for k, g in groupby(l, bool) if k] 
```

给

```
[['a', 'b', 'c'], ['d', 'e', 'f', 'g'], ['d', 's', 'd', 'a']] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T08:02:12.433

```
def nester(nput):
   out = [[]]
      for n in nput:
         if n == '':
            out.append([])
         else:
            out[-1].append(n)
    if out[-1] == []:
       out = out[:-1]
    return out 
```

编辑以在末尾添加对空列表的检查

# matlab - MATLAB：如何求解线性系统模 m

> ID：13339989
> 
> 赞同：4
> 
> 时间：2012-11-12T07:52:27.557
> 
> 标签：matlab, linear-algebra

当方程实际上是同余 mod 时，有谁知道哪些函数可用于求解线性系统`m`？希望求解一个线性系统 (A *x = b) 的值 x，其中“A* x 与 b 一致”

关于如何在这种情况下执行高斯消除的讨论[可以在这里找到](https://math.stackexchange.com/questions/211955/how-can-i-use-gauss-elimination-to-solve-equations-with-modular-arithmetics)，但我希望使用 MATLAB 而不是尝试手动完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:24:30.260

看看这里的 lincon() 方法：http: [//www.mathworks.com/matlabcentral/fileexchange/32856-system-of-linear-congruences/content/lincon.m](http://www.mathworks.com/matlabcentral/fileexchange/32856-system-of-linear-congruences/content/lincon.m)

# c - 链表删除是删除错误的节点

> ID：13339991
> 
> 赞同：0
> 
> 时间：2012-11-12T07:52:32.343
> 
> 标签：c, linked-list

请我需要有人帮助。我的家庭作业有问题。

这个作业很简单。创建一个 list(1,2,3) 并通过创建一个函数来删除中间的数字`delnode`。但它必须使用函数`free()`。

现在，我已经`(1,2,3)`使用链表方法创建了列表。我想删除数字 2 但它不起作用。它应该出来，`(1,3)`但它出来了`(2,3)`。

```
#include <stdio.h>
#include <stdlib.h>

struct node{
    int number;
    struct node* next;
};

typedef struct node node;

//prototype function
node* allocateMemory(void);
node* insertNode(node*);
void delnode(node*);

int main(){
    int i,num;
    node* entr = allocateMemory();
    node* p = NULL;

    entr->number = 1;
    entr->next = NULL;

    num = 3;

    for(i=1;i<num;i++){
        if(!p){
            p=insertNode(entr);
        }else{
            p=insertNode(p);
        }

        p->number = i+1;
    }

    while(entr){
        if(entr->number == 2){
            entr->number == NULL;
            break;
        }
        entr=entr->next;
    }

    while(entr){
        printf("%d\n",entr->number);
        entr=entr->next;
    }

    return 0;
}

node* insertNode(node* current){
    node* newNode = allocateMemory();
    current->next = newNode;
    newNode->next = NULL;
    return newNode;
}

void delnode(node* current){
    node* temp = allocateMemory();
    temp = current->next->next;
    free(current->next);
    current = temp;
    free(temp);
    return ;
}

node* allocateMemory(void){
    return (node*)malloc(sizeof(node));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:59:53.940

一些问题：

(1) 您正在创建的原始列表是 [2,3]，而不是 [1,2,3] - 您的循环迭代 i=1,i=2 - 并且每次插入 i+1 - 导致 [ 2,3]
（2）您的删除没有做任何事情：

```
while(entr){
   if(entr->number == 2){
       entr->number == NULL;
       break;
   }
   entr=entr->next;
} 
```

请注意，这`entr->number == NULL`只是布尔评估，而不是赋值 - 因为您使用`operator==`

（请注意，它也会失败`operator=`，因为您不想分配`NULL`该值 - 您真正想要做的是分配前一个节点`next`字段。）

PS
这个数据结构的术语是[Linked List](http://en.wikipedia.org/wiki/Linked_list)，而不是“Linear List”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T08:03:10.763

好吧，这个功能`delnode`是各种乱七八糟的。尝试删除节点时无需分配更多内存。您需要将***上一个链接到下一个，并删除当前的***.

```
| prev |      | current |      | next |
|------|      |---------|      |------|
   /\              X               /\
   ||              X               ||
   |================================| 
```

它应该看起来更像这样。

```
void delnode(node* current)
{
  node* next = current->next;
  // Now we need to find the node previous to this.
  node* prev = entr; // From the start.
  while(prev->next != current) { prev = prev->next; };
  free(current); // delete the current node.
  prev->next = next; // Link the previous node to the next in the list.
} 
```

如果您尝试添加三个节点，则需要更改循环。

```
node* current = entr;
for(i=0;i<3;i++)
{
  int newCount = current->number++; // Increment count.
  current = insertNode(current); // Returns the new node.
  current->number = newCount; // Assign new count.
} 
```

如果要使用`number`of删除节点`2`：

```
node* idx = entr;
while(idx)
{
  if(idx->number == 2) { delnode(idx); break; } // Delete node and break.
  idx = idx->next; // Else, go to next node.
} 
```

# git - 如何使用过去的日期创建 git commit？

> ID：13339992
> 
> 赞同：2
> 
> 时间：2012-11-12T07:52:32.283
> 
> 标签：git

我想知道您过去如何创建提交？

我已经搜索过了，据我了解可以使用`git commit --date""`

如果有人能澄清这一点并举例说明日期格式，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:56:51.813

例如`--date="Wed Feb 16 14:00 2011 +0100"`

来自 kernel.org：

> 日期格式
> 
> GIT_AUTHOR_DATE、GIT_COMMITTER_DATE 环境变量和 `--date`选项支持以下日期格式：
> 
> Git 内部格式是 ，其中是自 UNIX 纪元以来的秒数。是与 UTC 的正偏移或负偏移。例如 CET（比 UTC 提前 2 小时）是 +0200。
> 
> RFC 2822 RFC 2822 描述的标准电子邮件格式，例如 Thu, 07 Apr 2005 22:13:13 +0200。
> 
> ISO 8601 ISO 8601 标准指定的时间和日期，例如 2005-04-07T22:13:13。解析器也接受空格而不是 T 字符。

来源：[http ://www.kernel.org/pub/software/scm/git/docs/git-commit.html](http://www.kernel.org/pub/software/scm/git/docs/git-commit.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T21:33:55.610

请注意 git 2.0.X/2.1 (Q3 2014) 将接受更多的日期格式。

这意味着`git commit --date=2.days.ago`将工作！过去很容易设置一个提交。

请参阅[Jeff King的](https://github.com/peff)[提交 14ac286](https://github.com/git/git/commit/14ac2864dcd566a025e449ab9db6b5dc57744a32) ( [)](https://github.com/peff)[`peff`](https://github.com/peff)

### `commit`: 接受更多“ `--date`”的日期格式

> 现在我们将通过 " `--date`" 找到的字符串直接传递给`fmt_ident`函数，该函数将使用我们的 strict`parse_date`对其进行规范化。然而，这意味着像 " `--date=now`" 或 " `--date=2.days.ago`" 这样的明显的东西将不起作用。
> 
> 相反，让我们回退到近似函数来为我们处理这个问题。请注意，我们必须先尝试`parse_date`自己，即使 approxidate 会尝试严格解析自己。原因是 approxidate 丢弃了它从严格解析中看到的任何时区信息，我们希望保留它。所以要求：

```
git commit --date="@1234567890 -0700" 
```

> 继续在 -0700 中设置日期，无论本地时区是什么。

# ruby - 实例化水豚浏览器并设置代理

> ID：13339993
> 
> 赞同：1
> 
> 时间：2012-11-12T07:52:38.377
> 
> 标签：ruby, capybara, capybara-webkit

按照[本文档](http://rubydoc.info/gems/capybara-webkit/0.12.1/Capybara/Driver/Webkit/Browser#initialize-instance_method)，我正在尝试实例化水豚浏览器并设置代理

```
b = Capybara::Driver::Webkit::Browser.new
b.set_proxy :host => 'localhost', :port => 8888 
```

不幸的是，文档已经过时，我找不到新的正确方法。我得到：

```
NameError: uninitialized constant Capybara::Driver::Webkit::Browser 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:50:15.077

```
page.driver.browser.set_proxy :host => 'localhost', :port => 8888 
```

# jquery - 删除列表中的项目并使用 jquery 追加新项目

> ID：13339995
> 
> 赞同：0
> 
> 时间：2012-11-12T07:52:43.037
> 
> 标签：jquery, replace, append

我有以下输出：

```
<ul id="blogs">

  <li>
      <a href="/blogs/news/6875583-hurricane-sandy">
      <div class="video-container">...</div>
     </a>
 </li>

   <a href="/blogs/news/6875583-hurricane-sandy">
   <strong id="title">Hurricane Sandy</strong>
   <p id="newsp">loremi ispum lor ismi smodi</p>
   </a>
 <a id="readp" class="rmore" href="/blogs/news/6875583-hurricane-sandy">Read More</a>

 <li>
   <a href="/blogs/news/6572743-floyd"></a>
   <div class="video-container">...</div>
   </a>
</li>

  <a href="/blogs/news/6572743-floyd"></a>
  <strong id="title">Hurricane Floyd</strong>
  <p id="newsp">loremi ispum lor ismi smodi</p>
  </a>
   <a id="readp" class="rmore" href="/blogs/news/6572743-floyd">Read More</a>

  <li>
  <a href="/blogs/news/6557987-fiji">
   <img li="" ...<="" src="//mydomain/A21E1A04F48C9B7F42333F72EB5A57D9.jpg?932">
    <strong id="title">Fiji.</strong>
   <p id="newsp">loremi ispum lor ismi smodi</p>
  </a>
   <a id="readp" class="rmore" href="/blogs/news/6557987-fiji">Read More</a>
  </li>

   </ul> 
```

我想用 jQuery 编辑上面的输出，如下所示：

```
<ul id="blogs">
  <li>
     <a href="/blogs/news/6875583-hurricane-sandy">
      <img src="http://mydomain/video_icons.jpg?1212">
     </a>
     <strong id="title">Hurricane Sandy</strong>
     <p id="newsp">loremi ispum lor ismi smodi</p>
     <a id="readp" class="rmore" href="/blogs/news/6875583-hurricane-sandy">Read More</a>
  </li>

  <li>
      <a href="/blogs/news/6572743-floyd"></a>
      <img src="http://mydomain/video_icons.jpg?1212">
     </a>
     <strong id="title">Hurricane Floyd</strong>
     <p id="newsp">loremi ispum lor ismi smodi</p>
     <a id="readp" class="rmore" href="/blogs/news/6572743-floyd">Read More</a>
  </li>

  <li>
     <a href="/blogs/news/6557987-fiji">
      <img src="//mydomain/A21E1A04F48C9B7F42333F72EB5A57D9.jpg?932">
     </a>
    <strong id="title">Fiji.</strong>
    <p id="newsp">loremi ispum lor ismi smodi</p>
    <a id="readp" class="rmore" href="/blogs/news/6557987-fiji">Read More</a> 
```

这是我的 jQuery，但我遗漏了一些东西或没有正确编写它，所以我没有得到想要的输出：

jQuery：

```
 $("#blogs li").each(function(i) {
    if ($(".video-container").length > 0  && $(this).children('img').length == 0){
      var vidindex = $('#readp').attr('href')
      $(this).find('a').replaceWith(function(){return '';});
      $(".video-container").remove();
      $(this).append('<a href=""><img src="{{ 'video_icons.jpg' | asset_url }}"/></a>');
      $(this).append($("#title"));
      $(this).append($('#newsp'));
      $(this).append($('#readp'))
      $(this).find('a').attr("href", vidindex)
  }
     $("#blogs li img").replaceWith(function(){
     return '<img src="'+this.src+'"/>';
   });
}); 
```

# javascript - 使用javascript为输入元素设置动态不同的id属性

> ID：13339996
> 
> 赞同：5
> 
> 时间：2012-11-12T07:52:51.490
> 
> 标签：javascript, html

我在为表中动态添加的输入框设置不同的 id 时遇到问题。问题是：

当用户单击“添加新行”时，我正在插入新行。现在我必须为输入框设置不同的 id。每次用户单击添加新行按钮时，我都会采用一个静态变量并增加其值。然后我将它的值附加到 id 值让我们说 temp（即 ids 将是`temp1`，`temp2`等等）。我将变量 xyz 作为 `var xyz = "temp" + i`（其中 i 是计数器），现在我必须`xyz`使用`setattribute`. 但是由于值`setattribute`只能是文字，我如何使用变量代替值？

如果您有其他方法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:21:38.367

它也可以是一个包含字符串的变量。

```
var fooId = "foo";
for (var i = 0; i <= 2; i++) {
    document.getElementsByTagName('div')[i].setAttribute('id', fooId + (i + 1));
} 
```

​<strong>[现场演示](http://jsfiddle.net/4NHsU/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T08:22:46.973

`setAttribute`允许将变量用作值参数。

例如：

```
var ele = document.createElement('div')
var id = 'temp1'
ele.setAttribute('id', id) 
```

会导致：

```
<div id="temp1"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T08:23:02.937

`element.setAttribute("id", xyz);`element 是你的输入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T08:57:26.840

首先`setattribute`是元素的未定义属性，因为它区分大小写`setAttribute`，当然 是可用的。

其次，您根本不需要使用`setAttribute`。你可以简单地修改`id`属性来达到同样的效果：

```
var el = document.createElement('div'), // your element
    staticPart = 'myUniqId', // your static part of a unique id
    i = 0; // your uniqueness

el.id = staticPart + i; // assign unique id to the element
// el.setAttribute('id', staticPart + i); // does the same, but more verbose

// Let's check if it worked:
el.getAttribute('id'); // "myUniqId0"
el.id; // "myUniqId0" 
```

三、你在哪里看到的

> setattribute 中的值只能是文字

规范说`setAttribute`接受两个参数，`name`类型`value`为[DOMstring](http://www.w3.org/TR/DOM-Level-2-Core/core.html#DOMString)。你可以传递任何你想要的值。请注意，它将被转换为字符串：

```
el.id = {a: 'b'};
el.id; // "[object Object]" 
```

请参阅[http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-F68F082](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-F68F082)和[https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-24T06:24:17.290

```
for(;i<7;i++)
          {document.getElementById("test").innerHTML +='<form  id="form'+f+++'" method="get"><input type="text" id="in'+i+++'" size="12%"><input type="text" id="in'+i+++'" size="12%" ><input type="text" id="in'+i+++'"size="12%"><input type="text" id="in'+i+++'"size="10%" ><input type="text" id="in'+i+++'"size="10%"><input type="text" id="in'+i+++'" size="10%"><input type="text" id="in'+i+++'"size="12%"></form>'      
          } 
```

# c# - 使用 XSLT 转换序列化的 .net 对象

> ID：13339999
> 
> 赞同：3
> 
> 时间：2012-11-12T07:53:14.060
> 
> 标签：c#, xml, xslt, serialization, datacontractserializer

我有一个很大的 .net 类和一些 xslt 文件。我正在序列化我的对象以使用我的 xslt 文件进行转换。

我的班级名称是 Application，它有一个包含应用程序集合的申请人属性。

```
public class Application
{
    public Person Applicant { get; set; }
}

public class Person
{
    public List<Application> Applications { get; set; }
} 
```

当我序列化我的类的实例时，通常我获得的 Xml 包含**z:Ref="i18"**属性，以防止无限创建 Xml 来描述现有的引用属性。但是这种情况改变了我必须在我的 Xslt 文件中编写的所需 Xpath 表达式。

我是否有机会序列化包含真实实体值而不是指定深度的**z:Ref标记的对象？**

这是我的序列化代码：

```
public string Serialize(object input)
{
    XmlDocument XmlDoc = new XmlDocument();
    DataContractSerializer xmlDataContractSerializer = 
        new DataContractSerializer(input.GetType());
    MemoryStream MemStream = new MemoryStream();
    try
    {
        xmlDataContractSerializer.WriteObject(MemStream, input);
        MemStream.Position = 0;
        XmlDoc.Load(MemStream);
        return XmlDoc.InnerXml;
    }
    finally
    {
        MemStream.Close();
    }
} 
```

提前致谢，

阿尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:02:45.207

不，基本上。但是，您应该能够使用以下内容：

```
<xsl:key name="ids" match="*[@z:Id]" use="@z:Id"/> 
```

然后使用`key`传递`@z:Ref`当前节点的 xsl 函数，其中`z`是`xmlns`别名`http://schemas.microsoft.com/2003/10/Serialization/`- 这至少将始终保持使用相同。

* * *

完整示例 - 首先是 xslt（“my.xslt”）：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/"
  xmlns:dcs="http://schemas.datacontract.org/2004/07/"
>
  <xsl:key name="ids" match="*[@z:Id]" use="@z:Id"/>
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="*[@z:Ref]">
    <xsl:param name="depth" select="5"/>
    <xsl:apply-templates select="key('ids', @z:Ref)">
      <xsl:with-param name="depth" select="$depth"/>
    </xsl:apply-templates>
  </xsl:template>
  <xsl:template match="*[@z:Id]">
    <xsl:param name="depth" select="5"/>    
    <xsl:value-of select="$depth"/>: <xsl:value-of select="name()"/><xsl:text xml:space="preserve">
</xsl:text>
    <xsl:if test="$depth > 0">
      <xsl:apply-templates select="dcs:*">
        <xsl:with-param name="depth" select="($depth)-1"/>
      </xsl:apply-templates>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

请注意，这通过`$depth`参数（递减）走了 5 个级别；关键部分是`match`任何元素上的初始值`*[@z:Ref]`，然后用于`key`将相同的请求代理到原始元素，如通过`@z:Id`. 这意味着当我们移动到子元素时，我们只需要使用类似的东西：

```
<xsl:apply-templates select="dcs:*"/> 
```

虽然我们显然可以更细化，例如：

```
<xsl:apply-templates select="dcs:Foo"/> 
```

另请注意，要添加`Foo`-specific `match`，您将添加：

```
<xsl:template match="dcs:Foo[@z:Id]"><!-- --></xsl:template> 
```

以确保我们的`*[@z:Ref]`匹配继续处理引用转发。

和 C#：

```
using System;
using System.IO;
using System.Runtime.Serialization;
using System.Text;
using System.Xml;
using System.Xml.Xsl;
[DataContract]
public class Foo
{
    [DataMember]
    public Bar Bar { get; set; }
}
[DataContract]
public class Bar
{
    [DataMember]
    public Foo Foo { get; set; }
}
static class Program
{
    static void Main()
    {
        var foo = new Foo();
        var bar = new Bar();
        foo.Bar = bar;
        bar.Foo = foo;
        using (var ms = new MemoryStream())
        {
            var ser = new DataContractSerializer(typeof(Foo), new DataContractSerializerSettings {
                PreserveObjectReferences = true
            });
            ser.WriteObject(ms, foo);
            Console.WriteLine(Encoding.UTF8.GetString(ms.GetBuffer(), 0, (int)ms.Length));
            Console.WriteLine();
            ms.Position = 0;
            var xslt = new XslCompiledTransform();
            xslt.Load("my.xslt");
            using (var reader = XmlReader.Create(ms))
            {
                xslt.Transform(reader, null, Console.Out);
            }
        }
        Console.WriteLine();
        Console.WriteLine("press any key");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:16:05.567

尝试使用`XmlSerializer`

```
TestClass TestObj = new TestClass();
XmlSerializer SerializerObj = new XmlSerializer(typeof(TestClass));
TextWriter WriteFileStream = new StreamWriter(@"C:\test.xml");
SerializerObj.Serialize(WriteFileStream, TestObj);
WriteFileStream.Close(); 
```

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)