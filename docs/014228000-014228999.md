# StackOverflow 问答 14228000-14228999

# php - 使用 codeigniter 将 IPv6 插入数据库

> ID：14228002
> 
> 赞同：0
> 
> 时间：2013-01-09T03:49:24.603
> 
> 标签：php, mysql, codeigniter, ipv6

我在 mysql 数据库中的 ip 字段是`VARBINARY(16)`

```
 // Insert into website table
    $ip = inet_pton('::1'); // Local ip
    $data_rec = array(
            'ip_address' => $ip,
            );  
    $this->db->insert('visitors', $data_rec); 
```

ip没有被插入。这是一个空白字段。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:26:12.490

`inet_pton()`返回不可打印的字符。
您是否尝试从数据库中读取它并执行`echo inet_topn()`？

鉴于我有一张桌子

```
CREATE TABLE `ip` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `ip` varbinary(16) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

并使用这个简单的脚本（为简单起见，有意省略了所有检查）

```
<?php
$in6_addr = inet_pton('::1');

$db = new mysqli('localhost', '******', '******', 'test');

$qry = "INSERT INTO ip (ip) VALUES('$in6_addr')";
$db->query($qry));

$qry = "SELECT * FROM ip WHERE id=1";
$result = $db->query($qry);
if ($row = $result->fetch_array(MYSQL_ASSOC)) {
    echo inet_ntop($row['ip']);
}    
?> 
```

你得到输出

```
::1 
```

但是在 phpAdmin 或 Sequel Pro 中看不到值

# database - Zend 2 数据库事务？

> ID：14228003
> 
> 赞同：7
> 
> 时间：2013-01-09T03:49:43.607
> 
> 标签：database, transactions, pdo, zend-framework2

我们如何在 Zend 2 中使用事务？我在 API 中没有找到任何东西，Zend 1 的几个问题涉及常规 PDO 函数，但我在 Zend 2 中没有看到类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T13:40:47.657

ZF2的这个部门缺少一些文档：

开始交易：

```
$this->adapter->getDriver()->getConnection()->beginTransaction(); 
```

提交交易：

```
$this->adapter->getDriver()->getConnection()->commit(); 
```

回滚事务：

```
$this->adapter->getDriver()->getConnection()->rollback(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T04:04:14.097

尝试这个：

```
$adapter = new Zend\Db\Adapter\Adapter(array(
    'driver' => 'pdo',
    'dsn' => 'mysql:dbname=db;hostname=localhost',
    'username' => 'root',
    'password' => 'password',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
));

$adapter->getDriver()->getConnection()->beginTransaction(); 
```

数据库将运行命令：

```
START TRANSACTION 
```

# javascript - 为什么 IF 语句不起作用？

> ID：14228004
> 
> 赞同：0
> 
> 时间：2013-01-09T03:50:05.240
> 
> 标签：javascript, if-statement

我有这段代码基本上得到了一些表单的检查单，然后发送到一个 php 文件中，代码很好，但我只对条件部分有疑问：

**html代码：**

```
<div id="content0">
<h1>Paso 1)</h1>
<p align="left"></p>
<h2>¿Cuantos procesos desea Ingresar/Consultar?</h2>
<br>
<!-- <label>Escoge un número</label> -->
<form name="form_data" id="form_data">  
    1 <input name="ciudad" value="1" type="radio">  
    2 <input name="ciudad" value="2" type="radio"> 
    3 <input name="ciudad" value="3"  type="radio"> 
    4 <input name="ciudad" value="4" type="radio"> <br>
    5 <input name="ciudad" value="5" type="radio">
    6 <input name="ciudad" value="6" type="radio">
    7 <input name="ciudad" value="7" type="radio">
    8 <input name="ciudad" value="8" type="radio"> <br>
    9 <input name="ciudad" value="9" type="radio">
    10 <input name="ciudad" value="10" type="radio"> <br>
    <input value="Enviar" id="btn_enviar0" href="javascript:toggle() </input> <br /> <br />      
    <label id=" mensaje="" type="button"> </form>
    <div id="resultado"></div>
</div>

<div id="content4" style="display:none;">
    <h1>Paso 5)</h1>
</div> 
```

**js代码：**

```
function getRadioValue() 
{
    for (index=0; index < document.form_data.ciudad.length; index++) 
    {
        if (document.form_data.ciudad[index].checked) 
        {
            var radioValue =form_data.ciudad[index].value;
            var num2=parseInt(radioValue);
            break;
        }
    }
}

$(document).ready(function()
{
    $('#btn_enviar').click(function()
    {
        if( validaText( 'name1','Nombre' ) == false) 
            return false;
        if( validaText( 'name2','Nombre' ) == false) 
            return false;
        if( validaSelect( 'select_especialidad','Especialidad' ) == false) 
            return false;

        $.ajax({
            type:'POST',
            url :'upload4.php',
            data: $('#form_data4').serialize(),
            beforeSend : function()
            {
                $('#mensaje4').html('Enviando datos...');
            },
            success: function (data)
            {
                $('#mensaje4').html('Datos enviados correctamente.');
                $('#resultado4').html(data);    
            },
            complete: function()
            {
                $('#form_data4').slideUp();
                $('#resultado4').slideDown();
                $('#flecha4').show();
                getRadioValue();
                if (num2>=3)
                    $('#content4').show();
            }
        });
    }); 

    $('#regresar').click(function()
    {
        $('#form_data')[0].reset();
        $('#form_data').slideDown();
        $('#resultado').slideUp();
        $('#mensaje').html('');
    });
});

function validaText(texto,salida)
{
    if($('#'+texto).val()=="")
    {
        alert('Em campo '+salida+' es requerido.');
        $('#'+texto).focus();
        return false;
    }
}

function validaSelect(select,salida)
{
    if($('#'+select).val()==0)
    {
        alert('Seleccione '+salida);
        return false;
    }   
} 
```

我对javascript不太了解（我用php编写代码但我正在学习），但是..为什么这部分代码不起作用？

```
if (num2>=3)
{
    $('#content4').show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T03:57:53.627

尝试这个

```
function getRadioValue() {
        for (index=0; index < document.form_data.ciudad.length; index++) {
            if (document.form_data.ciudad[index].checked) {
                var radioValue =form_data.ciudad[index].value;
                 return parseInt(radioValue); //<--- Change1
            }
        }
    } 
```

...

```
 complete: function(){
         $('#form_data4').slideUp();
         $('#resultado4').slideDown();
          $('#flecha4').show();
            var num2 = getRadioValue();  //<-- Change 2
          if (num2>=3) 
```

在您的代码中，变量**num2的****范围**在函数**getRadioValue**内，正如您在其中声明的那样

# clojure - 从循环中返回一个值

> ID：14228007
> 
> 赞同：2
> 
> 时间：2013-01-09T03:50:36.373
> 
> 标签：clojure

无论如何我可以从循环中返回一个值，因为递归必须在尾部

```
(ns for)

    (defn abc [y]
    (loop [x 10]
      (when (> x 2)
        (if (= 2 3) (do (println "test") (recur (- x 2)))
        (do (let [x (+ 1 x)
                  y 2] (println y) (recur (- x 2))))))))

    (abc 1) 
```

无论如何我可以通过将y作为参数并更新y的新值来返回函数的值。但是，重复部分必须位于代码的最后一行，因此我无法将 y 作为代码的最后一行。

例子

```
(ns for)

    (defn abc [y]
    (loop [x 10]
      (when (> x 2)
        (if (= 2 3) (do (println "test") (recur (- x 2)))
        (do (let [x (+ 1 x)
                  y 2] (println y) (recur (- x 2)))))))
    y)

    (abc 1) 
```

这会给我一个错误，因为 recur 必须是最后一行代码。我看过类似的问题，它说将返回值放在我尝试但失败的 if 循环的末尾，这给了我一个例外，即递归只能在尾部发生

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T04:02:21.023

我猜你的意思是：

```
(defn abc [y]
    (loop [x 10
           y nil]
      (if (> x 2)
        (if (= 2 3)
          (do (println "test") 
              (recur (- x 2) nil))
          (do (let [x (+ 1 x)
                    y 2] 
                (println y) 
                (recur (- x 2) y))))
        y))) 
```

**更新**。如果没有不必要的部分，它将是

```
(defn abc [y]
    (loop [x 10]
      (if (> x 2)
        (do (println 2) 
            (recur (- x 1)))
        2))) 
```

这与

```
(defn abc [_]
  (dotimes [_ 8] (println 2))
  2) 
```

# php - FB.login redirect_uri

> ID：14228008
> 
> 赞同：0
> 
> 时间：2013-01-09T03:50:37.303
> 
> 标签：php, javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我使用 Fb.Login 在我的 facebook 应用程序中登录用户。是否存在 redirect_uri 参数的可能性？成功登录后，我想将用户重定向到：[https://www.facebook.com/page/app_33229693355?app_data=code](https://www.facebook.com/page/app_33229693355?app_data=code)，在经典登录时，我使用 redirect_uri 参数在登录后重定向，但是在这里？

```
FB.login(function(response) {
}, {scope: \'publish_stream, photo_upload, user_birthday\'}); 
```

我需要这个，因为下一步是在 php 中写一张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:14:42.740

```
 FB.Event.subscribe('auth.login', function () {
      window.location = "http://example.com";
  }); 
```

当身份验证状态更改为已连接时，将触发重定向。查看此[FB.Event.subscribe](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)链接以获取更多信息。

如果你想要用户数据，

```
 FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
         // make an ajax call to your php code and pass the name etc ...
         // on success of the ajax call, use window.location to redirect 
        console.log('Good to see you, ' + response.name + '.');
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 }); 
```

# ios - 摆脱 UITableView 上方的行

> ID：14228010
> 
> 赞同：2
> 
> 时间：2013-01-09T03:50:46.683
> 
> 标签：ios, uitableview, border, line, uisearchbar

我有一个`UITableView`（恰好有一个`UISearchBar`）并且似乎无法弄清楚如何摆脱它上面的白色/灰色边框。我需要在`UISearchBar`它上面的黑色和黑色之间有无缝的黑色。

我试图隐藏它`UISearchBar`，看看这是否与它有关，但这条线仍然出现。

有任何想法吗？

![线](../Images/d228484a85fc6bd9330c98b21eafa1aa.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T14:08:48.763

In my case it helped to set:

```
 searchBar.clipsToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:14:25.967

这与我正在使用的 pullToRefresh 视图有关（使用 SensibleTableView）——它在 drawRect 中有一些代码来画线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T04:07:50.067

您必须根据您的要求自定义 UISearchBar 背景以匹配。[看看这个教程。](http://caydenliew.com/2012/01/customize-uisearchbar-background-image/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T05:08:25.617

您应该试试这个，通过它您可以设置单元格边框的颜色，如果您想更改特定单元格边框的颜色，请将其设置为： if (indexPath.row == yourcell):

```
tableView.separatorColor = [UIColor blackColor]; 
```

此外，您必须将上述方法放入表格视图数据源的 CellForRowAtIndexPath 方法中。

请通知它是否有效..

# c++ - GCC 构建。预期错误

> ID：14228011
> 
> 赞同：1
> 
> 时间：2013-01-09T03:51:11.480
> 
> 标签：c++, gcc

我不是任何语言或 GCC 的专家。所以我的问题可能低于标准。

我正在使用 GCC 构建一个包含数千个 CPP 文件的代码库。在一个文件中说`A.cpp`我正在调用`B.cpp`[`B.cpp`包含定义的类的类方法定义`B.h`]中的一些函数。构建没问题。`B.o`但是后来我从makefile中排除了。所以现在`B.o`没有创建目标文件。但在这种情况下，我预计在编译或链接阶段会出错，因为`A.cpp`是从`B.cpp`. 但是没有，代码仍然没有错误地构建。但是当我将 fn 调用从`A.cpp`另一个文件移到另一个文件`C.cpp`时，它给了我一个链接器错误，这是我认为的预期行为。

这是预期的行为吗？我还检查了在构建期间创建的映射文件，其中列出了所有函数名称，并且`B.cpp`即使没有创建 B.cpp 的目标文件，映射中的函数也存在。所以我的问题是为什么当我从不属于构建的文件中调用函数时没有错误。我尝试从以前的版本中删除所有目标文件和二进制文件以清理可能存在的任何残留物，但无济于事。我没有任何线索。任何人都可以提供一些帮助吗？

在我的地图文件中，普通功能如下所示

`80010820 T __gccmain`

`80010828 t __gccmain_end`ETC

但是来自 B.cpp 的 fns 被列为

`U CNvThread::ProcMsgReq(unsigned, void*)`

`U CNvDbMgrThread::Singleton(unsigned long)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:55:16.593

如果`B.o`之前的版本仍然存在，它将链接到旧副本就好了（除非发生重大变化）。如果您没有构建最终的可执行文件，并且只有`A.o`，那么这仍然没有问题，因为`A.o`引用了来自 的函数`B`，但直到最终的输出文件链接才与它们链接。

同样，如果`B.o`之前的构建中仍然存在，它将被使用，这就是它出现在地图文件中的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:56:21.553

听起来你有一个“makefile”：很好。

默认情况下，“make”（通常）会尝试构建您的项目。无论如何，这是标准约定。

通常，make 还会有其他“目标”。例如，您可以键入“make clean”或“make cleanall”。如果这些目标存在，它们会*删除*您的二进制文件，因此您可以从头开始重建。

我怀疑当您重新运行“make”时，它会从您上次构建中获取旧的二进制文件。你检查它是否存在？

否则，我猜你的项目从一开始就不需要它 :)

运行“ld -M”来生成地图（应该包括交叉引用）是确认这一点的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:51:19.153

链接器忽略了预期的错误，因为创建的行`A.o`由于`#if`.

`#if (OBJ_A_SUPPORTED)`

`A* a = new A();`

`#endif`

移动了 OBJ_A_SUPPORTED 定义的头文件。

这导致链接器从 A.cpp 中排除 fns，进而删除了对 fns in 的调用`B.cpp`。所以没有链接器错误。在我完全错过的这种情况下，仔细查看地图文件可能会产生一些线索。

# c - 如何在生成的解析器中捕获语法错误的行号

> ID：14228012
> 
> 赞同：0
> 
> 时间：2013-01-09T03:51:18.753
> 
> 标签：c, parsing, syntax-error, parser-generator, lemon

我传递给 Lemon 的所有标记都是附加了行号信息的结构。

查看下面的 syntax_error 定义

```
%name SinkParser
%token_prefix SINKPARSER_TOKEN_

%token_type {SinkParserNode*}

%extra_argument { SinkParserContext *parser_context }
%syntax_error {
  SinkParser_SyntaxError(parser_context);
}
%token_destructor { SinkParserNode_Destruct($$); } 
```

但是我看不到如何报告错误是什么文件和行。我有所有令牌的信息，但是如何在 syntax_error 处理程序中访问适当的令牌？

我是否需要单独跟踪我在标记器中的位置并在语法错误中查看它？我意识到标记器在遇到语法错误时可能会领先于解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:29:42.990

LALR(1) 解析器从不消耗（转移）无法匹配产生式的标记，尽管它们可能会执行错误的归约。因此，您提供给解析器的最后一个标记是触发语法错误的标记（最后一个标记是前瞻标记；如果它不能移动，那就是语法错误）。知道前一个标记的位置可能也很有用，因为这两个标记可能被任意数量的空格和注释隔开。（例如，如果一个命令缺少终止符并且后面跟着一个长注释，则错误标记可能会向前走一段距离。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:30:46.120

是的，您需要在标记器中跟踪。作为“全局”变量，或作为令牌的属性。

# excel - 选择电子表格中的非空白行

> ID：14228014
> 
> 赞同：4
> 
> 时间：2013-01-09T03:51:52.213
> 
> 标签：excel, range, vba

我将尽量保持简短，并且仍然充分解释，这里是:)

我搜索了论坛、我的 VBA 文献，但找不到一种方法来做我正在尝试的事情。

我有一个 rowTotal >= 60 行的电子表格。这些行在每列的单元格中都有文本数据，或者这些行是空白的，带有图案和颜色索引集。

*我需要一个宏来选择所有非空行。*

我首先尝试遍历 A 列的单元格（如果 A 列中的单元格有文本数据，则应选择其行），检查`activecell.value`<> 是否为空。

这是 jist（伪代码和代码的混合）：

```
Range("A1").Select
loop to end
  if activeCell.value <> empty then 
    stringVar = stringVar + cstr(activeCell.row) + ":" + cstr(activeCell.row) + ","
  end if 
end loop

stringVar = Left(stringVar, (Len(stringVar) - 1))
Range(stringVar).Select 
```

1.  如果我总共有 10 行，第 2 行和第 8 行有数据，`stringVar`会解决这个问题：`"2:2, 8:8"`.
    `Range(stringVar).Select`将具有与 write 相同的结果`Range("2:2, 8:8").Select`。

2.  如果要在该范围内的行数 <= 45，则这没有问题。但是，只要其中包含数据的行数超过 45，代码就会在`Range(stringVar).Select`.

我尝试了宏记录器，它通过使用该`Union`方法解决了这个问题。所以我想，“你自己，你可以用 Union() 完成这个。万岁 MacroRecorder。” 但可惜，我的快乐是疏忽。
我在想我可以把一根大弦分成1根或多根；这些较小的字符串中的每一个都将低于上述 45 个限制。然后我可以使用 Union() 将所有范围（这些较小的字符串）组合到一个所需的范围中。

*但是，在我知道我拥有这45> 个字符串*中有多少之后，我必须在代码执行期间实时“构建”我的 Union() 代码。

任何人都知道如何获取工作表并仅选择包含数据的行；这相当于有一系列不连续的行，其中选择了超过 45 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T06:32:14.917

不需要循环 - 使用`SpecialCells`

仅对于 A 列使用：

```
Set rng1 = Columns("A").SpecialCells(xlCellTypeConstants).EntireRow 
```

反而。

```
Sub QuickSet()

  Dim rng1 As Range

  On Error Resume Next
  Set rng1 = Cells.SpecialCells(xlCellTypeConstants).EntireRow
  On Error GoTo 0

  If Not rng1 Is Nothing Then
    MsgBox "Your working range is " & rng1.Address(0, 0)
  Else
    MsgBox "No constants found"
  End If

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T04:24:59.417

我首先建议您尝试使用 Autofilter。如果您使用的是 Excel 2010（和 prob 2007，但我无法检查），这就像选择您的数据，选择“数据”选项卡，然后单击过滤器一样简单。使用第一列中的下拉框，取消选择“空白”。

Excel 2003 中的数据/过滤器菜单选项下存在完全相同的功能。不过，我真的记不太清了。你必须进行实验，或者谷歌它。

如果这不起作用：

```
Sub it()

    Dim cell As Range
    Dim selectRange As Range

    For Each cell In ActiveSheet.Range("A:A")
        If (cell.Value <> "") Then
            If selectRange Is Nothing Then
                Set selectRange = cell
            Else
                Set selectRange = Union(cell, selectRange)
            End If
        End If
    Next cell

    selectRange.Select
    ' selectRange.EntireRow.Select 'If you want to select entire rows

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T09:40:16.250

刚刚使用了这段代码，它奏效了——一直在跟踪所有其他 excel 论坛，但找不到任何被简化的东西。

我还补充说，如果有人觉得这很有用，选定的行将被复制并粘贴到另一张工作表中的下一个空白行。

```
Sub copypaste1()

    'Find rows that contain any value in column A and copy them
    Dim cell As Range
    Dim selectRange As Range

    For Each cell In ActiveSheet.Range("A:A")
        If (cell.Value <> "") Then
            If selectRange Is Nothing Then
                Set selectRange = cell
            Else
                Set selectRange = Union(cell, selectRange)
            End If
        End If
    Next cell

    selectRange.EntireRow.Select
    selectRange.EntireRow.Copy

    'Paste copied selection to the worksheet 'mega' on the next blank row
    Sheets("mega").Range("A65536").End(xlUp).Offset(1, 0).PasteSpecial _
         Paste:=xlPasteValues

End Sub 
```

# c# - MongoDB 连接导致 System.Net.Sockets.SocketException

> ID：14228016
> 
> 赞同：4
> 
> 时间：2013-01-09T03:52:15.063
> 
> 标签：c#, mongodb

我有几台 Web 服务器运行相同的 asp.net mvc Web 应用程序，连接到一个 mongodb 服务器。一台 Web 服务器不断抛出 SocketException，即使我重新启动 IIS。其他工作正常。这不是第一次出现异常。几周前，另一台 Web 服务器遇到了同样的问题，而当时其他服务器正在工作。错误消息：

> 由于系统缺少足够的缓冲区空间或队列已满，因此无法对套接字执行操作。

现在我只能重新启动服务器以暂时解决问题。我通过修改`HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Tcpip\Parameters\MaxUserPort`为 65534 来确保正确设置了 Web 服务器的动态端口范围。现在我怀疑这是否是 C# mongodb 驱动程序的错误。我查看了驱动程序的源代码，尤其是[MongoCursorEnumerator.cs](https://github.com/mongodb/mongo-csharp-driver/blob/master/MongoDB.Driver/MongoCursorEnumerator.cs)，其中释放了连接。该类`MongoCursorEnumerator<TDocument>`实现`IDisposable`并正确释放其`Dispose`方法中的连接。但它没有析构函数（终结器），这保证了`Dispose`在 GC 中的调用。

现在我确保所有与连接相关的代码都正确包装在`using`项目的块中。在这种情况下，缺少析构函数/终结器会导致 SocketException 吗？如果不是，那么这个异常的可能原因是什么？

更多信息：ASP.NET MVC 3、Windows Server 2008 R2、Mongo DB 2.0、Mongo Db Driver for C# 1.5

**更新**

最新版本的 mongo db C# 驱动程序解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T22:15:16.253

此错误（直接来自 Windows 操作系统）的一个原因是 TCP/IP 连接快速打开和关闭时。

您是否在代码中的任何位置调用 Disconnect ？这将导致所有套接字都关闭，然后会导致打开新的套接字来替换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T13:51:38.750

将 mongodb 驱动程序升级到 2.12 或更高版本将允许您捕获此异常。

# sql - 无效字符错误 (ADO/ASP)

> ID：14228020
> 
> 赞同：1
> 
> 时间：2013-01-09T03:52:56.647
> 
> 标签：sql, asp-classic, ado

我正在尝试使用变量作为 SQL 中的列字段。但是，当我运行代码时，出现以下错误：

* * *

```
Microsoft VBScript compilation error '800a0408'

Invalid character

/junk/dbresults.htm, line 25

DECLARE @cat char(20)
--------^ 
```

* * *

代码如下：

```
<%
    Dim connectString, connect, conDB, con
    connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
          src_abn = Request.QueryString("abn")
          src_cat = Request.QueryString("cat")
    set connect = Server.CreateObject("ADODB.connection")
    connect.open connectString

    DECLARE @cat char(20)
    DECLARE @dynamicsql char(1000)

    SET @cat = src_cat;
    SET @dynamicsql = "SELECT * FROM cont.csv WHERE @cat='Yes'"

    if src_abn = "all" then
    conDB = EXEC (@DynamicSQL)  
    else
    conDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+src_abn+"%')"   
    end if

    set con = connect.execute(conDB)
%> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:55:27.223

我不确定您要做什么，但是您不能使用经典 ASP 运行 SQL 语法（即 DECLARE @cat...）。你想做这样的事情吗？

```
<%
    //Request your variables
    src_abn = Request.QueryString("abn")
    src_cat = Request.QueryString("cat")

    Dim connectionString, dbConn, rsResults, strSQL

    //Setup your connection
    connectionString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
    set dbConn= Server.CreateObject("ADODB.Connection")
    dbConn.open connectionString

    //Create your sql statement
    if src_abn = "all" then
        strSQL = "SELECT * FROM cont.csv WHERE " & src_cat & "='Yes'"
    else
        strSQL = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%" & src_abn & "%')"   
    end if

    //Create your results
    set rsResults = Server.CreateObject("ADODB.Recordset")
    rsResults.open strSQL, dbConn

    //Loop through your results
    While Not rsResults.EOF

        rsResults.MoveNext
    Wend

    //Closes results and connection
    rsResults.Close
    dbConn.Close
%> 
```

# asp.net - 使 Gridview 中的整行可点击

> ID：14228021
> 
> 赞同：1
> 
> 时间：2013-01-09T03:52:59.567
> 
> 标签：asp.net, gridview

我一直在尝试遵循这个答案：[如何在没有选择按钮的情况下在 GridView 中实现全行选择？](https://stackoverflow.com/questions/6250545/how-to-implement-full-row-selecting-in-gridview-without-select-button)

但我还是有点困惑。在关注了那个问题之后，我的行现在可以点击了。但是我如何在被点击后实现它来做某事呢？目前，我使用一个按钮来对每行数据库执行我需要的操作：

这是 .aspx 代码：

```
<Columns>
<asp:ButtonField Text = "Click Me" CommandName = "Clicked" ButtonType = "Button" />
...other columns stuff
</Columns> 
```

后面的 C# 代码：

```
 protected void RowCommand(object sender, GridViewCommandEventArgs e)
    {
        //if button is clicked
        if (e.CommandName == "Clicked")
        {
            //go find the index on the gridview
            int selectedIndex = MsgInbox.SelectedIndex;
            if (int.TryParse(e.CommandArgument.ToString(), out selectedIndex))
            {
                //do something with database
            } 
```

现在效果很好。但是，我不希望按钮可以点击，我希望整行都可以点击。我知道这目前是错误的，但这是我到目前为止的代码：

.aspx 代码

```
 <Columns>
    <asp:TemplateField>
                <ItemTemplate>
                    <asp:LinkButton ID="SelectRow" runat="server" ForeColor="red" CommandName="Clicked"></asp:LinkButton>
                </ItemTemplate>
    </asp:TemplateField> 
```

C#代码：

```
 protected void Gridview_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
            e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
            var selectButton = e.Row.FindControl("SelectRow") as Button;
            e.Row.Attributes["onclick"] = ClientScript.GetPostBackEventReference(selectButton, ""); 
```

当我这样做时，我得到一个简单的空指针异常，但我对 e.Row.Attributes 不是很熟悉，所以我真的不知道这在哪里失败以及我需要做什么来添加数据库逻辑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:21:11.333

所以我想通了，我确信有更好的方法可以通过 jquery 或 javascript 来实现它，但我还不太擅长。

对于我的 .aspx 文件，对于 gridview，我只是添加了：

```
AutoGenerateSelectButton ="true" 
```

在我的 C# 中，在 MsgInbox_SelectedIndexChanged 下，我放置了所有 RowCommand 逻辑。

最后，在 C# 中，在我的 Gridview_RowCreated 下，我添加了这一行来隐藏 Select 链接：

```
e.Row.Cells[0].Style["display"] = "none"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T05:05:25.313

如果你准备好使用 jquery 会简单很多。例如，

```
<asp:GridView rowStyle-CssClass="row" ...
...
<asp:TemplateField>
  <ItemTemplate>
    <asp:LinkButton ID="SelectRow" runat="server" CommandName="Clicked" CssClass="selButton" />   
  </ItemTemplate>
</asp:TemplateField> 
```

请注意，每个数据行都将具有 css 类`row`，并且选择按钮将具有`selButton`

CSS会像

```
tr.row { }   /* normal row styling */
tr.row-highlight { background-color: blue; }   /* highlighted row styling */
tr.row .selButton { display:none; visibility:hidden; }   /* select button styling, I am using hidden button */ 
```

最后是java脚本

```
$(document).ready(function() {
   $('tr.row').click(
      function() {
        // simulate click of select button
        $(this).find('.selButton').click();
      }).hover(
      // add/remove css class to highlight on mouse over/out
      function() { $(this).addClass('row-highlight'); },
      function() { $(this).removeClass('row-highlight'); });
}); 
```

# android - Android手势生成器不工作

> ID：14228024
> 
> 赞同：0
> 
> 时间：2013-01-09T03:53:20.760
> 
> 标签：android, user-interface, gestures

我正在尝试使用 GestureBuilder 向应用程序添加一些手势支持。我已经阅读了一些教程并认为我的代码是正确的，但该应用程序仍然没有响应通过 GestureBuilder 创建和导入的手势。它确实响应了我也设置的双击手势。

我认为错误可能是设置的`GestureOverlayView`所以这里是我的视图的代码，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/scrollviewtexture" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="53dp"
            android:text="@string/app_name"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="9pt"
            android:typeface="sans" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:layout_centerHorizontal="true"
            android:text="@string/swipe"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#FFFFFF"
            android:textSize="6pt" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:height="40dp"
            android:text="@string/app_name"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="7pt" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/textView4"
            android:layout_centerHorizontal="true"
            android:height="40dp"
            android:text="@string/type"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="8pt" />

  <android.gesture.GestureOverlayView
    android:id="@+id/gestures"
    android:layout_width="fill_parent"
    android:layout_height="0dip" />

    </RelativeLayout>

</LinearLayout> 
```

主要活动代码如下，

```
import java.io.IOException;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Typeface;
import android.os.Bundle;
import android.text.ClipboardManager;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.MotionEvent;
import android.view.Window;
import android.widget.TextView;
import android.widget.Toast;
import com.mystraldesign.memorable.PassGen;
import android.gesture.Gesture;
import android.gesture.GestureLibraries;
import android.gesture.GestureLibrary;
import android.gesture.GestureOverlayView;
import android.gesture.GestureOverlayView.OnGesturePerformedListener;
import android.gesture.Prediction;
import android.util.Log;

public class MemorableActivity extends Activity implements android.view.GestureDetector.OnGestureListener,OnDoubleTapListener,OnGesturePerformedListener  
{
    //Define text views
    private TextView textView1;
    private TextView textView2;
    private TextView textView3;
    private TextView textView4;

    private GestureLibrary mLibrary;

    //Previous password holder
    private String prevPass;

    //Gesture Detectors
    private GestureDetector gTap; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        gTap  = new GestureDetector(this,(android.view.GestureDetector.OnGestureListener) this);

        //Remove title bar
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        mLibrary = GestureLibraries.fromRawResource(this, R.raw.gest);
        if (!mLibrary.load()){
            finish();
        }

        GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures);
        gestures.addOnGesturePerformedListener(this);

        //Define textView
        textView1 = (TextView) findViewById(R.id.textView1);
        textView2 = (TextView) findViewById(R.id.textView2);
        textView3 = (TextView) findViewById(R.id.textView3);
        textView4 = (TextView) findViewById(R.id.textView4);

        //Load font file
        Typeface type = Typeface.createFromAsset(getAssets(),"fonts/optima.ttf"); 

        //Set various textViews to font
        textView1.setTypeface(type);
        textView2.setTypeface(type);
        textView3.setTypeface(type);
        textView4.setTypeface(type);

        prevPass = "Memorable";

    }

public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture){
    ArrayList<Prediction> predictions = mLibrary.recognize(gesture);

    if (predictions.size() > 0 && predictions.get(0).score > 1.0) {
        String result = predictions.get(0).name;

        if ("left".equalsIgnoreCase(result)){
            Context context = getApplicationContext();
            CharSequence text = "left";
            int duration = Toast.LENGTH_SHORT;

            //Display message
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

        }else if ("right".equalsIgnoreCase(result)){
            Context context = getApplicationContext();
            CharSequence text = "right";
            int duration = Toast.LENGTH_SHORT;

            //Display message
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

        }else if ("up".equalsIgnoreCase(result)){
            Context context = getApplicationContext();
            CharSequence text = "up";
            int duration = Toast.LENGTH_SHORT;

            //Display message
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

        }else if ("down".equalsIgnoreCase(result)){
            Context context = getApplicationContext();
            CharSequence text = "down";
            int duration = Toast.LENGTH_SHORT;

            //Display message
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

        }
    }

}

    public boolean onTouchEvent(MotionEvent me)
    { 
        this.gTap.onTouchEvent(me);
       return super.onTouchEvent(me); 
    }

    public boolean onDown(MotionEvent e) {

      return false;
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
          float velocityY) 
    {

    return false;
  }

    public void onLongPress(MotionEvent e) 
    {

    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
      float distanceY) 
    {

        return false;
    }

    public void onShowPress(MotionEvent e) {

    }

    public boolean onSingleTapUp(MotionEvent e) 
    {

     return false;
    }

    //Method to copy password - Depreciated
    public boolean onDoubleTap(MotionEvent e) {

     return false;
    }

    //Method to copy password
    public boolean onDoubleTapEvent(MotionEvent e) {

        //clipboard shite
        ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
        clipboard.setText(textView1.getText());

        //Message about coping
        Context context = getApplicationContext();
        CharSequence text = "Password has been copied to clipboard.";
        int duration = Toast.LENGTH_SHORT;

        //Display message
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

      return false;
    }

    public boolean onSingleTapConfirmed(MotionEvent e) {

     return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:16:44.800

像这样在您的代码中进行一些编辑。将您
更改`gestures.addOnGesturePerformedListener(this);`为`gestures.addOnGesturePerformedListener(handleGestureListener);`
然后编写其余代码，例如..

```
private OnGesturePerformedListener handleGestureListener = new OnGesturePerformedListener() {
    @Override
    public void onGesturePerformed(GestureOverlayView gestureView,Gesture gesture) 
    {
      .
      .
      .
      .
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:00:32.037

答案在于视图的布局。GestureOverlay 应该是具有RelativeView 的主人，然后是TextBox 的主人。线性视图被删除。

# python - Flask 配置中的 Python @property？

> ID：14228030
> 
> 赞同：2
> 
> 时间：2013-01-09T03:54:00.420
> 
> 标签：python, properties, flask

我目前正在学习 Flask，我只是设置了一个加载到应用程序中的配置文件：

```
app.config.from_object('myconfigmodule') 
```

config 模块中有两个类，Config 和 DebugConfig，DebugConfig 继承了 Config。我想使用@property getter 来获取配置变量，而不是使用它们来访问它们，`app.config['myvar']`因为它可以使代码更简洁。我设置了这个并且 app.config 没有看到属性，但我仍然可以访问 config 类成员`app.config['myvar']`

这是我启动应用程序时遇到的错误：

```
Traceback (most recent call last):
File "runserver.py", line 3, in <module>
app.run(host=app.config['_APP_HOST'], debug=app.config.Debug)
AttributeError: 'Config' object has no attribute 'Debug' 
```

在配置类中，Debug 属性如下：

```
class Config (object):
    _APP_DEBUG = False

    @property
    def Debug (self):
        return self._APP_DEBUG 
```

我在这里做错了什么还是 Flask 出于某种原因不喜欢配置中的属性？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:50:34.157

Flask 有它自己的`Config`类（一个 dict 子类），它会挑选出给定对象的属性`from_object`，而不是按原样使用给定对象，如[源代码](https://github.com/mitsuhiko/flask/blob/master/flask/config.py#L163)所示：

```
# class Config(dict):
# ...
    for key in dir(obj):
        if key.isupper():
            self[key] = getattr(obj, key) 
```

如您所见，它只会使用*大写*属性。

这是一个*手动*示例：

```
>>> from flask import config
>>> class X(object):
...     REGULAR = True
...     ignored = "not uppercase"
...     def __init__(self):
...         self.not_used = "because lowercase"
...         self.OK = True
...     
...     @property
...     def UPPER_PROP(self):
...         return True
...     
...     @property
...     def MIXED_case(self):
...         return "wont work"
... 
>>> x = X()
>>> c = config.Config(None)
>>> c.from_object(x)
>>> c
<Config {'REGULAR': True, 'OK': True, 'UPPER_PROP': True}> 
```

也就是说，如果您想实现类似[dot-dict'd](http://parand.com/say/index.php/2008/10/24/python-dot-notation-dictionary-access/) subclass of flasks'之类的东西，没有什么能阻止您`Config`。由非标准方法引起的潜在混淆是否超过代码可读性的收益，您可以根据项目的范围来决定。

# iphone - 如何在 iPhone 5 上保持 iPhone 4- 格式

> ID：14228032
> 
> 赞同：0
> 
> 时间：2013-01-09T03:54:14.287
> 
> 标签：iphone, objective-c, ios, cocoa-touch, screen

所以我正在为 iphone 4s 开发应用程序，但我希望 iPhone 5 用户也能够访问该应用程序。

我想这样做，如果用户有一部 iPhone 5，它的顶部和底部只有你在其他一些应用程序中看到的小黑条（我基本上想保留 3.5 英寸屏幕的格式。

有没有办法在模拟器上测试 iPhone 5？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T03:56:22.283

您应该尝试从应用程序摘要中删除 4" 显示器的默认启动屏幕。我认为应该这样做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T04:44:15.733

> 有没有办法在模拟器上测试 iPhone 5？因为我只能跑4

*iPhone（视网膜 4 英寸）*等于 iPhone 5

[![截屏](../Images/01febcb72a3ca4e7d6b15ebbcf9fdfad.png)](https://i.stack.imgur.com/ADqxP.png)

# javascript - 仅在 Android 上显示 html5 视频控件

> ID：14228035
> 
> 赞同：1
> 
> 时间：2013-01-09T03:54:45.250
> 
> 标签：javascript, android, ios, ios6, html5-video

我有这个带有 Flash 后备的视频标签：

```
<video id="myvideo" width="480" height="224" autoplay preload="auto" loop poster="intro6.jpg">
<source src="intro6.mp4" type="video/mp4">
<source src="intro6.webm" type="video/webm">
<source src="intro6.ogv" type="video/ogg">
<object width="480" height="224" type="application/x-shockwave-flash" data="player.swf">
<param name="movie" value="player.swf" />
<param name="flashvars" value="autostart=true&amp;controlbar=hide&amp;image=intro6.jpg&amp;file=intro6.mp4&amp;repeat=always" />
<img src="intro6.jpg" width="480" height="224" />
</object>
</video> 
```

正如你所看到的，我没有任何控件，它只是一个自动播放的循环视频。这在桌面浏览器上效果很好，但在 Android 和 iOS 上效果不佳。所以我需要控件在 Android 上可见，因为它不会自动播放或循环播放。在 iOS 上，我需要视频不要自动播放。

有没有办法用javascript来完成这个？请记住，我不太了解javascript。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T02:23:18.330

可能最简单和最实用的方法是检查用户代理以查看您是否在 Android 上。

```
if (navigator.userAgent.indexOf('Android') >=0) {
   document.getElementById('myvideo').controls = true;
} 
```

一般来说，用户代理嗅探是“不受欢迎的”。通常*最好*使用特征检测，因为一些遥远的未来版本的 Android 浏览器**可能**支持自动播放。但是当移动浏览器不支持视频/音频规范时，它们通常不会很好地告诉你。

另一种方法是检查事件。在 FF/Chrome/IE9+ 中，该事件会触发一系列事件，包括：`loadstart`、`progress`、`durationchange`等...直到`play`和`playing`。在 Android 浏览器（至少是我拥有的旧版本）中，视频将触发一个`stalled`事件。您可以查找`stalled`然后启用控件。当您收到“播放”事件时，您可以再次删除它们。

```
var video = document.getElementById('myvideo'), started = false;
if (video && video.addEventListener) { //in case of IE < 9
    video.addEventListener('stalled', function() {
        if (!started) video.controls = true;
    }, false);
    video.addEventListener('play', function() {
        started = true;
        video.controls = false;
    }, false);
} 
```

But there are other reasons why you might see that event, like a slow internet connection. So you'll still risk seeing the controls for a bit in a desktop browser until the video starts.

You don't need to worry about iOS. It won't autoplay, even if you want it to.

# twitter - 如何使用 twitter4j 和storm

> ID：14228039
> 
> 赞同：0
> 
> 时间：2013-01-09T03:55:06.033
> 
> 标签：twitter, twitter4j, twitter-streaming-api

我使用 twitter4j 查询接口来过滤推文[http://twitter4j.org/javadoc/twitter4j/Query.html](http://twitter4j.org/javadoc/twitter4j/Query.html)。但是[https://github.com/nathanmarz/storm-starter/blob/master/src/jvm/storm/starter/spout/TwitterSampleSpout.java:43](https://github.com/nathanmarz/storm-starter/blob/master/src/jvm/storm/starter/spout/TwitterSampleSpout.java:43)中的 twitter spout 使用 queue.offer(status)。我没有对 Status 的引用，如何集成这些 API 来处理实时推文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:16:31.807

这是我们成功用来过滤推文的方法：

```
public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) {
    queue = new LinkedBlockingQueue<Status>(1000);
    _collector = collector;
    StatusListener listener = new StatusListener() {

        public void onStatus(Status status) {
            queue.offer(status);
        }

        public void onDeletionNotice(StatusDeletionNotice sdn) {
        }

        public void onTrackLimitationNotice(int i) {
        }

        public void onScrubGeo(long l, long l1) {
        }

        public void onException(Exception e) {
        }

    };
    TwitterStreamFactory fact = new TwitterStreamFactory(new ConfigurationBuilder().setUser(_username).setPassword(_pwd).build());
    _twitterStream = fact.getInstance();
    _twitterStream.addListener(listener);
    _twitterStream.filter(new FilterQuery().track(TERMS_TO_TRACK).setIncludeEntities(true));
} 
```

# python - 安装 Visual Studio 2010 后如何使用 Visual Studio 2008 编译？

> ID：14228044
> 
> 赞同：1
> 
> 时间：2013-01-09T03:55:22.020
> 
> 标签：python, visual-studio-2008

我正在尝试为 Python 的 TA-Lib 构建 mrjbq7 的包装器。经过几次尝试，我很确定包装器不会构建，因为我有 Visual Studio 2010，但我的 Python 正在从 Visual Studio 2008 中寻找编译器。是否可以只获取编译器？我有一种感觉，我可能需要并排安装 Visual Studio 2008（看到另一个线程说这没有问题），但如果可能的话，我宁愿避免它。是否可以？
更多信息：
Visual Studio 2010 Express 安装了
Windows 7
Python 2.7.3
pythonxy27 也安装
了 怀疑它是编译器版本的原因：
a - 我得到的最后一个错误是对未知 _ftol2_sse_ 的引用，其他线程说这是由于使用了错误的编译器
b - MSC v. 的 sys.version 为 1500，适用于 MSVC 9.0（在解释器中使用 distutils\cygwincompiler.py 中的几行来查找此内容）

我希望这是所有必需的信息，如果需要，我会添加更多信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T04:19:34.063

您根本不需要安装 Visual Studio 来编译 Python 扩展。安装适当的 Windows SDK（对于 Python 2.7 将在[此处](http://www.microsoft.com/en-us/download/details.aspx?id=3138)）。然后，使用 Windows SDK 命令提示符，说服 distutils 使用 MSVC 2008：

```
set MSSdk=1
set DISTUTILS_USE_SDK=1 
setenv /Release 
```

然后您应该可以通过 setup.py 安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:39:48.377

谢谢你的帮助 Luis，从那里我找到了 link.exe 1120 错误的解决方案：
1 - 从 Luis 上面的帖子中获取 Windows SDK
2 - 转到 Visual Studio 9 bin 的文件夹（我的是：C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin) 3 - 打开 Visual Studio 2008 命令提示符
4 - 将目录更改为 mrjdb7 的文件夹
5 - 在命令提示符中输入“python setup.py install”

此时，您应该会收到错误消息：“找不到 vcvarsall.bat”

6 - 复制并粘贴 vcvar32.bat
7 - 重命名为 vcvarsall.bat

在这一点上，它仍然不起作用。这是 distutils python 文件中的问题

8 - 导航到 distutils 文件夹（我的：C:\Python27\Lib\distutils）
9 - 打开 msvc9compiler.py
10 - 查找函数“def find_vcvarsall(version):”（我的：第 219 行）
11 - 接近函数末尾，查找这一行：'vcvarsall = os.path.join(productdir, "vcvarsall.bat")'（我的：第 257 行）
12 - 替换为：vcvarsall = os.path.join(productdir, r"bin\vcvarsall 。蝙蝠”）

我发现的问题是 msvc9compiler.py 从 vcvarsall.bat 文件所在的位置向上查找一个文件夹，它应该在 \bin 文件夹中查找。

# java - Servlet 抛出 load() 异常

> ID：14228046
> 
> 赞同：0
> 
> 时间：2013-01-09T03:55:39.350
> 
> 标签：java, jsp, servlets

我知道这个错误之前已经发布过，但我无法理解堆栈跟踪，希望有人帮助。

基本上当我进入应用程序时`getValue("client")`为空：

```
HttpSession validuser = request.getSession(); 

if (validuser.getValue("client") == null) {  
    response.sendRedirect("/profile/factfind/includes/session_timeout.jsp");
} 
```

我认为这与以下错误有关：

```
2013-01-09 13:14:35 NamingContextListener[/Tomcat-Standalone/localhost/profile]: Creating JNDI naming context
2013-01-09 13:14:35 StandardManager[/profile]: Seeding random number generator class java.security.SecureRandom
2013-01-09 13:14:35 StandardManager[/profile]: Seeding of random number generator has been completed
2013-01-09 13:14:35 StandardContext[/profile]: Posting standard context attributes
2013-01-09 13:14:35 StandardContext[/profile]: Configuring application event listeners
2013-01-09 13:14:35 StandardContext[/profile]: Sending application start events
2013-01-09 13:14:35 StandardContext[/profile]: Starting filters
2013-01-09 13:14:35 StandardContext[/profile]: Starting completed
2013-01-09 13:14:37 StandardContext[/profile]: Servlet /profile threw load() exception
org.apache.jasper.JasperException: Unable to compile class for JSP

An error occurred at line: -1 in the jsp file: null

Generated servlet error:
    [javac] Compiling 1 source file

    at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:85)
    at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:248)
    at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:343)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:356)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:427)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:142)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:240)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:187)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:720)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:888)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:768)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3484)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3710)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:777)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:760)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:538)
    at org.apache.catalina.core.StandardHostDeployer.addChild(StandardHostDeployer.java:667)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.commons.beanutils.MethodUtils.invokeMethod(MethodUtils.java:216)
    at org.apache.commons.digester.SetNextRule.end(SetNextRule.java:217)
    at org.apache.commons.digester.Rule.end(Rule.java:253)
    at org.apache.commons.digester.Digester.endElement(Digester.java:1222)
    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.commons.digester.Digester.parse(Digester.java:1765)
    at org.apache.catalina.core.StandardHostDeployer.install(StandardHostDeployer.java:343)
    at org.apache.catalina.core.StandardHost.install(StandardHost.java:762)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:443)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:377)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:808)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:335)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1156)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:697)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1148)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:311)
    at org.apache.catalina.core.StandardService.start(StandardService.java:450)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:2213)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:484)
    at org.apache.catalina.startup.Catalina.execute(Catalina.java:371)
    at org.apache.catalina.startup.Catalina.process(Catalina.java:134)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:151) 
```

该会话存在于另一个应用程序中，然后加载“配置文件”，所以我不太确定当一个启动另一个时会发生什么。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:18:12.877

原来对我的修复与一些论坛建议的相同。我在一个没有空格的目录中创建了一个新的 Tomcat 安装（即`C:\Tomcat4.1`），并且工作正常。

不知道为什么或如何，但确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:13:07.623

我认为这是个问题

```
org.apache.jasper.JasperException: Unable to compile class for JSP

An error occurred at line: -1 in the jsp file: null 
```

清理您的项目（或手动删除所有 .class 文件）然后尝试从头开始编译。如果错误消失 - 检查它应该工作。如果不是 - 您显然应该消除第一个错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T04:03:35.130

似乎`getValue(String)`方法已被弃用。所以试试下面的代码`null == validuser.getAttribute(String)`

# r - 多个列标签或名称

> ID：14228056
> 
> 赞同：2
> 
> 时间：2013-01-09T03:33:26.793
> 
> 标签：r, dataset, matrix

我想放置两行标签或列名（到数据框或矩阵），如下所示：

```
 Big Big Medium Medium Low Low
  Wet Dry    Wet    Dry Wet Dry
1   6   4      1      3   2   5
2   4   4      1      3   1   6
3   4   3      1      3   1   6
4   5   2      1      2   1   4
5   3   4      1      2   3   5 
```

并且能够通过使用两个标签来引用给定的列，例如列“Medium”、“Dry”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T04:24:08.297

你所要求的不存在。名称始终是字符向量，因此它们始终是一维的。因此，您要么使用简单的名称，如`"Big Wet"`数据框/矩阵中的名称，要么必须使用其他数据结构，例如具有维度*size*、*wet/dry*、*row*的 3 维数组，您可以在其中分别命名它们：

```
> array(c(6,4,4,5,3,4,4,3,2,4,1,1,1,1,1,3,3,3,2,2,2,1,1,1,3,5,6,6,4,5),
        c(5,2,3), list(1:5, c("Wet", "Dry"), c("Big", "Medium", "Low")))
, , Big

  Wet Dry
1   6   4
2   4   4
3   4   3
4   5   2
5   3   4

, , Medium

  Wet Dry
1   1   3
2   1   3
3   1   3
4   1   2
5   1   2

, , Low

  Wet Dry
1   2   5
2   1   6
3   1   6
4   1   4
5   3   5

> a[, "Wet",]
  Big Medium Low
1   6      1   2
2   4      1   1
3   4      1   1
4   5      1   1
5   3      1   3

> a[, "Dry", "Medium"]
1 2 3 4 5 
3 3 3 2 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:18:32.247

```
text <- "  Big Big Medium Medium Low Low
  Wet Dry    Wet    Dry Wet Dry
1   6   4      1      3   2   5
2   4   4      1      3   1   6
3   4   3      1      3   1   6
4   5   2      1      2   1   4
5   3   4      1      2   3   5" 
```

您可能会从文件中读取，并使用`file`参数而不是`text`我在下面使用的参数：

```
labs <- read.table(header=FALSE, text=text, nrows=2)  # This will be used to construct the headers.
data <- read.table(header=TRUE, text=text, skip=1)    # Consume a header line so that the row IDs are not interpreted as data.
names(data) <- apply(labs, 2, paste, collapse=',')    # Overwrite the header read above.

> data

  Big,Wet Big,Dry Medium,Wet Medium,Dry Low,Wet Low,Dry
1       6       4          1          3       2       5
2       4       4          1          3       1       6
3       4       3          1          3       1       6
4       5       2          1          2       1       4
5       3       4          1          2       3       5

> data['Big,Wet']
  Big,Wet
1       6
2       4
3       4
4       5
5       3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T04:41:08.937

这为您提供了您所要求的东西，但除了可视化之外，对任何东西都毫无价值：

```
dat <- read.table(text="1   6   4      1      3   2   5
2   4   4      1      3   1   6
3   4   3      1      3   1   6
4   5   2      1      2   1   4
5   3   4      1      2   3   5", header=FALSE)[, -1]

nms1 <- unlist(strsplit(gsub("\\s+", " ", "Wet Dry    Wet    Dry Wet Dry"), " "))
nms2 <- unlist(strsplit("Big Big Medium Medium Low Low", " "))

dat2 <- rbind(nms1, dat)
colnames(dat2) <- nms2

rownames(dat2) <- c(" ", 1:(nrow(dat2) - 1))
dat2 
```

产量：

```
 Big Big Medium Medium Low Low
  Wet Dry    Wet    Dry Wet Dry
1   6   4      1      3   2   5
2   4   4      1      3   1   6
3   4   3      1      3   1   6
4   5   2      1      2   1   4
5   3   4      1      2   3   5 
```

和索引：

```
indexer <- function(x, y) as.numeric(dat2[-1, colnames(dat2) == x & dat2[1, ] == y])
indexer("Big", "Dry") 
```

这很笨重，我不会走这条路。如果您想要功能性，请使用其他出色的响应。

# symfony - Symfony 2 控制台中偶尔出现无效类型错误

> ID：14228057
> 
> 赞同：0
> 
> 时间：2013-01-09T03:56:58.563
> 
> 标签：symfony, doctrine-odm, custom-type, doctrine-mongodb

我有一个 Symfony 2 环境，在其中我使用自定义数据类型和 Doctrine 的 MongoDB ODM 映射。这一切都有效，除了偶尔；当我去清除缓存或安装资产时，有时会收到以下错误：

```
[InvalidArgumentException]
Invalid type specified "..." 
```

这似乎总是发生在我清除缓存后向控制台发出的下一个命令中，以后的操作都成功了。Doctrine 似乎间歇性地发现它有问题，我怀疑这与我在哪里注册类型以及何时发生与 Doctrine 处理映射的时间有关。

该类型作为`boot()`方法的一部分添加到另一个包中，可能并不总是包含在内。

*   这里发生了什么？
*   我能否以某种方式确保该类型较早加载，或者在配置文件中提供它？据我所知，目前还没有办法使用 MongoDB 配置在文件中指定自定义类型，如此[处](http://symfony.com/doc/master/cookbook/doctrine/dbal.html)`.yml`的 ORM 所述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:47:59.450

为了回答上面两个问题中的第二个，我似乎找到了解决方法，但我不太喜欢它。感觉更像是一个 hack，而不是一个适当的解决方案。

在`app/autoload.php`我注册注解注册表和驱动程序之后，我调用：

```
\Doctrine\ODM\MongoDB\Mapping\Types\Type::addType('mytype', 'My\Type\Class'); 
```

...这似乎是为了确保在调用控制台命令时注册类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:10:31.903

[我在这篇文章中](http://php-and-symfony.matthiasnoback.nl/2012/09/symfony2-mongodb-odm-creating-custom-types-with-dependencies)找到了一个很好的解决方案。

简短的回答是添加

```
\Doctrine\ODM\MongoDB\Mapping\Types\Type::registeredType('mytype', 'My\Type\Class'); 
```

在`MyBundleClass::__consruct()`. 这将在缓存发生任何预热之前注册类型。

使用`Type::registeredType()`代替`Type::addType()`将避免检查该类型是否已注册。在`Type::addType()`已经添加的情况下会抛出异常。

# c++ - C ++中带有const的指针和与号位置

> ID：14228058
> 
> 赞同：8
> 
> 时间：2013-01-09T03:57:01.167
> 
> 标签：c++, pointers, constants

> **可能重复：**
> [声明指针；类型和名称之间空格的左侧或右侧的星号？](https://stackoverflow.com/questions/2660633/declaring-pointers-asterisk-on-the-left-or-right-of-the-space-between-the-type)

我一直想知道放置`*`and的确切正确位置是什么`&`。似乎 C++ 对放置这些标记的位置非常宽容。例如，我似乎将指针和 & 号放在关键字的左右两侧或两个关键字的中间，但令人困惑的是，有时它们似乎意味着相同的东西，尤其是与`const`

```
void f1(structure_type const& parameter)
void f2(structure_type const &parameter)

void f2(structure_type  const *sptr);
void f2(structure_type  const* sptr);
void f2(structure_type  const * sptr); 
```

这些例子并不详尽。在声明或传递给函数时，我到处都能看到它们。他们甚至是同一个意思吗？但是我也看到 put`*`会影响哪个对象被称为指针的情况（可能`*`是在两个关键字之间的情况）。

编辑：

```
int const *Constant
int const * Constant // this above two seem the same to me, both as pointer to a constant value
int const* Constant //  EDIT: this one seems the same as above. instead of a constant pointer

const int * Constant // this is also a pointer to a constant value, but the word order changed while the pointer position stays the same, rather confusing.

int* const Constant
int * const Constant // instead, these two are constant pointers 
```

所以我得出了这样的结论：

```
T const* p; // pointer to const T
const T* p  // seems same from above
T* const p; // const pointer to T 
```

尽管如此，这还是把我弄糊涂了。编译器不关心它们所需的位置和间距吗？

编辑：我想大致了解职位的重要性。如果是，在什么情况下。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T04:09:33.673

空白仅在它阻止令牌一起运行和（例如）创建单个令牌的程度上很重要，因此（例如）`int x`明显不同于`intx`.

当您处理类似:`int const*x;`的内容时，任何大小的空格对`*`编译器都没有任何影响。

`pointer to const int`a和之间的区别`const pointer to int`取决于`*`const 在哪一侧。

```
int const *x;    // pointer to const int
int *const x;    // const pointer to int 
```

主要区别是当/如果您在同一声明中定义/声明多个对象时的可读性。

```
int* x, y;
int *x, y; 
```

首先，有人可能认为 x 和 y 是指向 int 的指针——但实际上，x 是指向 int 的指针，而 y 是 int。在一些人看来，第二个更准确地反映了这一事实。

防止任何误解的一种方法是一次只定义一个对象：

```
int *x;
int y; 
```

对于其中任何一个，如果您完全忽略空格（除了告诉您一个令牌在哪里结束而另一个在哪里开始，所以您知道“const int”是两个令牌）并从右到左阅读，阅读`*`为“指针” ，正确的解释是相当容易的到”。例如：`int volatile * const x;`读作“x 是指向 volatile int 的 const 指针”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T04:06:18.027

```
int const *Constant
int const * Constant 
int const* Constant 
```

以上所有内容都打算声明一个指向常量整数的非常量指针。

简单的规则：

**如果`const`紧随其后，`*`则适用于指针，否则适用于指向的对象。间距无所谓。**

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-09T04:08:46.510

变量声明中的 & 和 * 位置都是可接受的，仅取决于您自己的风格。它们严格意义上的意思是一样的，分别创建一个指针和一个引用。

但是，const 关键字的放置是原始的，因为 a`int const* variable`声明了一个指向**非常量int 的****常量**指针，并且是一个指向**常量int 的****非常量**指针。**`const int* variable`**

# c++ - "=!" 是什么意思 运营商呢？

> ID：14228060
> 
> 赞同：7
> 
> 时间：2013-01-09T03:57:33.587
> 
> 标签：c++, c, operators

我不小心打字`=!`而不是打字`!=`导致了系统中的一个巨大错误，该错误有一段时间未被检测到；从那以后我已经修复了它，但我很好奇它是做什么`=!`的。

我有这样的事情

```
void foo(int param)
{
    int a = 0;

    ... 

    if (a =! param)
    {
        // never got here even when `a` was not equal to `param`  
    }
    ...
} 
```

有人可以解释上述`if`陈述的评价吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-09T03:58:38.987

这个表达式：

```
a =! param 
```

将值分配`!param`给`a`。`!param`是在布尔上下文中求值的 param 的否定版本。

赋值运算符返回右侧的值，因此，如果为真，`if (a = !param)`也执行`if`主体。`!param`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-09T03:58:55.057

它不是一个单一的`=!`运营商。它是`=`and `!`，赋值和否定。

它相当于`if (a = !param)`, 或

```
a = !param;

if (a) {

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T03:58:50.770

`=!`不是运算符。它是`=`（赋值）运算符和`!`（布尔非）运算符。

所以你有`if (a = !param)`. 赋值返回赋值的值，所以你基本上有：

```
a = !param;
if (a) {
   ... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-09T03:59:02.730

如果您认为它可以是多个标记，则效果应该很简单：

```
if (a = !param) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-12T16:54:12.250

重要： `'=!' != '!='`:)

但： `'=!' == 'assignment of the negation of a value'`

例如在伪：

```
bool a= true;
bool b=!a; 
```

所以 b 是假的！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-03T07:39:06.360

=！不是运算符。你可以这样理解。假设有一条语句`a=!b`，它是 a 中操作数 b 的赋值，但这里的扭曲是在将 b 分配给 a 之前，我们通过在操作数 b 前加上 ! 来反转 b 的状态 这基本上是逻辑非运算符。

# asp.net - ASP 4.5 中的 App_Start 文件夹仅在 WebApplications 项目中？

> ID：14228072
> 
> 赞同：29
> 
> 时间：2013-01-09T03:58:44.750
> 
> 标签：asp.net, .net-4.5, app-startup

我有一个已转换为**.NET 4.5**的网站项目。我想使用添加到**App_Start**目录中的**AuthConfig 。**几个问题。

**App_Start**目录是否仅可用于 Web 应用程序项目？，当我尝试添加现有的 asp.net 文件夹时，我没有将其视为要添加的选项。

其次，如果是这样的话，我可以在我的网站项目中的任何地方只使用一个**AuthConfig文件吗？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T04:51:07.573

App_Start 没有什么特别之处，它只是一个文件夹。特殊之处在于它的使用方式，它特定于 WebActivator 框架，它是一个可以安装的 NuGet 包。App_Start 和 WebActivator 并非特定于 .NET 4.5，但它们确实需要 .net 4（这意味着 VS 2010 或 2012）

见[http://blog.davidebbo.com/2011/02/appstart-folder-convention-for-nuget.html](http://blog.davidebbo.com/2011/02/appstart-folder-convention-for-nuget.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-26T21:22:03.453

App_Start 文件夹是作为 MVC4 模板的一部分引入的。它没有什么特别之处，可以按照约定在其中执行代码。例如，HotTowel SPA 模板在 App_Start 文件夹中创建以下内容：

![待办事项图](../Images/5d8ef03dc8c5a66971f2b66d4fc761e6.png)

App_Start 中的代码由 global.asax.cs 执行，如下所示。

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-07T10:40:12.683

虽然[App_Start 没有什么特别之处](https://stackoverflow.com/questions/14228072/app-start-folder-in-asp-4-5-only-in-webapplications-projects#answer-14228455)，但是你可以让这个文件夹中的文件在应用程序启动时像`Application_Start`里面一样执行`Global.asax`。我在有文件夹的项目中使用[Ninject](http://www.ninject.org/)依赖注入器。`App_Start`我的项目中**没有 Global.asax**文件：

![在此处输入图像描述](../Images/b95f9e85676fe62b39fd1a93fd9ef05d.png)

但是我在文件中设置的所有配置都`NinjectWebCommon`将在启动应用程序时执行。`NinjectWebCommon`有以下内容：

```
using WebFormNinject.Models;

[assembly: WebActivator.PreApplicationStartMethod(typeof(WebFormNinject.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(WebFormNinject.App_Start.NinjectWebCommon), "Stop")]

namespace WebFormNinject.App_Start
{
    using System;
    using System.Web;

    using Microsoft.Web.Infrastructure.DynamicModuleHelper;

    using Ninject;
    using Ninject.Web.Common;

    public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<IDisplay>().To<MockDisplay>();
        }        
    }
} 
```

我很好奇`RegisterServices`函数将在哪里执行！然后我注意到这段代码：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(WebFormNinject.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(WebFormNinject.App_Start.NinjectWebCommon), "Stop")] 
```

这些属性使`Start`方法在应用程序启动时执行。有关更多信息，请查看[WebActivator / PreApplicationStartMethod](http://ilearnable.net/2010/11/22/webactivator-preapplicationstartmethod/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T04:11:03.240

**简而言之：**要更深入地了解 ASP.NET 4.5 网站中的配置更改，请查看以下官方来源 - [ASP.NET 4.5 网站模板中的配置更改](http://www.asp.net/vnext/overview/aspnet/whats-new#Configuration_Changes_In_ASPNET45_Website_Templates)。

它将指导您在 ASP.NET 网站的较新版本上发生的每项更改，即 4.5

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-17T16:38:45.237

如果您希望它在新的 MVC 5 模板上配置您的路由映射，您可以在 Configure 方法中的 Startup.cs 文件中设置您的路由

# javascript - 使用 JavaScript window.open() 时启用 IE 最大按钮

> ID：14228073
> 
> 赞同：3
> 
> 时间：2013-01-09T03:58:44.400
> 
> 标签：javascript, internet-explorer, cross-browser

当我在 IE 中使用 JavaScript`window.open()`时，最大按钮总是被禁用。

如何启用按钮？我使用 Chrome 和 Firefox 没有问题。

![在此处输入图像描述](../Images/e7bb16474592dea160f569530af6aedd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T04:10:18.583

需要设置参数值[`resizable=yes`](https://developer.mozilla.org/en-US/docs/DOM/window.open#Window_functionality_features)

试试这个代码：

```
 var url = "www.google.com" // set your url.
 window.open(url, "popUp", "resizable=yes"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-31T11:16:34.403

`resizable=yes`添加到该`window.open`功能时，它在 iE 中运行良好。

我的代码：

```
kana = window.open('','kana','menubar=0,location=0,resizable=yes,status=1,width=1,height=1,visible=false,alwaysLowered=yes'); 
```

# objective-c - 跳跃扭曲的光标

> ID：14228078
> 
> 赞同：1
> 
> 时间：2013-01-09T03:59:00.143
> 
> 标签：objective-c, macos

我正在尝试使用 Objective-C 沿着任何 UI 元素之外的路径移动 Mac 光标的位置（不仅仅是在某个窗口上，而是在整个屏幕上，与鼠标悬停的内容无关）。我不想直接将鼠标扭曲到某个位置，而是逐步将其移动到那里（即遍历一个循环，并在每次迭代中将光标向右移动 1 个像素）。

问题是光标不断在屏幕的水平中心线上来回跳动（如果我从 y=289 开始光标，它会跳到 y=511，然后又跳回 y=289，依此类推，如我的屏幕是 800 像素高），即使我实际上并没有将它移动到任何地方。

```
NSPoint mPoint = [NSEvent mouseLocation];
NSPoint mouseWarpLocation = NSMakePoint(mPoint.x, mPoint.y);
CGWarpMouseCursorPosition(mouseWarpLocation); 
```

上面的代码有效地将鼠标扭曲到其当前位置，但由于某种原因，光标在水平中心线上来回跳跃。关于为什么或我能做些什么来解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:31:27.567

问题是 AppKit（提供`NSEvent`类）和 Quartz 显示服务（提供`CGWarpMouseCursorPosition`）使用不同的屏幕坐标系。

在 Quartz 中，屏幕坐标系的原点在“主”屏幕的**左上角**，主屏幕是包含菜单栏的屏幕，Y 坐标随着屏幕**向下**移动而增加。

在 AppKit 中，屏幕坐标系的原点在主屏幕的**左下角**，Y 坐标随着屏幕**向上**移动而增加。

因此，如果您向 AppKit 询问鼠标位置（在屏幕坐标中），则需要将 Y 坐标转换为 Quartz 坐标系，然后再将其传递给 Quartz 函数。

要转换 Y 坐标，您只需从主屏幕的高度中减去它：

```
NSPoint point = [NSEvent mouseLocation];
point.y = [NSScreen mainScreen].frame.size.height - point.y;
CGWarpMouseCursorPosition(point); 
```

# javascript - 如何在 Jquery AutoComplete 中定义最大结果和解析？

> ID：14228083
> 
> 赞同：0
> 
> 时间：2013-01-09T03:59:53.977
> 
> 标签：javascript, jquery, autocomplete

这是我的脚本。你们能告诉我如何以及在哪里定义最大结果代码以及如何从头开始搜索吗？它得到了 minLength: 2。所以现在如果我输入 01，它会
显示类似的结果 - 02301, 20165, 01674 .......... 等等..我希望搜索结果类似于 01001, 01002,01003 。 .....等等。就像按 Acc 顺序一样。

我也想知道如何使用 xml 文件来提取数据。

```
 <script>
  $(document).ready(function() {
    $("input#autocomplete").autocomplete({
    source: [ 

    "(BWI)BALTMORE-WASHINGTON ARPT ,MARYLAND",  
"11-MILE CANYON RES ,COLORADO",  
"4 BEARS LODGE ,NORTH DAKOTA", 
"Aaron ,KENTUCKY",  
"AASU ,AMERICAN",  
"ABANAKA ,OHIO",  
"ABARR ,COLORADO",  
"ABBA ,GEORGIA",  

], minLength: 2,
});
  });
  </script> 
```

我希望你能帮助我。请我真的需要你的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:34:05.420

如果你想让搜索结果像 01001, 01002,01003 ......你应该使用'startWith'函数

# javascript - Jquery：无法发送到窗口：错误：语法错误，无法识别的表达式：

> ID：14228084
> 
> 赞同：0
> 
> 时间：2013-01-09T04:00:24.267
> 
> 标签：javascript, jquery

所以我有这段代码，例如：

```
function image() {
    var debug = true;
    try{
        var win = window.dialogArguments || opener || parent || top;
        win.send_to_editor('[button size="" color="" link=""]place title here[/button]');
    }catch(e){
        console.log("Could not send to window: " + e);
    }

} 
```

使用时会将一些文本从弹出窗口发送到我的编辑器，我的所见即所得。它如何不断抛出错误：

**无法发送到窗口：错误：语法错误，无法识别的表达式：[button size="" color="" link=""]在此处放置标题[/button]**

这应该只是发送给编辑，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:18:09.767

尝试更改`[`to`<`和`]`to `>`。或者，如果您确实需要方括号，请使用一些标签将其包裹起来，例如`span`. 例如`<span>[button size="" color="" link=""]place title here[/button]</span>`。

由于 OP 没有显示函数的来源`send_to_editor`，我只能猜测它 `win.send_to_editor`可能会调用类似的东西`jQuery('img',html)`，他传入的字符串在哪里`html`。它应该是一个有效的 HTML 片段，因为 jQuery 会即时解析它并返回元素在这种情况下。否则，可能会导致解析错误（例如`Sizzle.error`）。

**更新** 根据 OP 的要求，这里是一个简单的例子：

`jQuery("img","<div id='whatever'><img url='a.png'/></div>").attr('url')`将返回字符串`a.png`。这里 jQuery 将第二个参数解析为 HTML 片段，检索 img 部分并最终返回其 url。

# ruby-on-rails-3 - Devise 的 current_user 仅适用于管理员

> ID：14228090
> 
> 赞同：0
> 
> 时间：2013-01-09T04:01:47.110
> 
> 标签：ruby-on-rails-3, devise, cancan

我有一个标准`User`模型，里面有一个`admin`布尔值。对于将其设置为 true 的用户来说一切都很好，但对于普通用户，我会收到此错误：

```
undefined local variable or method `current_user'
app/models/doc.rb:18:in `mine'
app/controllers/docs_controller.rb:9:in `index' 
```

第`Doc`18 行的模型如下所示：

```
def self.mine
  where(:user_id => current_user.name, :retired => "active").order('created_at DESC')
end 
```

我的`User`模型如下所示：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable
  attr_accessor :current_password
  attr_accessible :name, :password, :password_confirmation, :current_password, :email, :remember_me, :admin
end

class Ability
  include CanCan::Ability
  def initialize(user)
    can :manage, :all if user.admin
  end
end 
```

在我的应用程序控制器中，我有以下内容：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  after_filter :user_activity

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path
  end

  def admin?
    self.admin == true
  end

  def authenticate_admin
    redirect_to :new_user_session_path unless current_user && current_user.admin?
  end

  private

  def user_activity
    current_user.try :touch
  end

end 
```

我认为这一切都是相关的。我这辈子都想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:18:18.320

helper是`current_user`一个控制器方法，不能从模型中访问。您应该将当前用户作为参数从控制器传递给模型。

```
def self.mine(current_user)
  where(:user_id => current_user.name, :retired => "active").order('created_at DESC')
end 
```

编辑：旁注

它看起来像是`user_id`你逻辑中的一个字符串。如果这是你正在做的事情，你应该重新考虑。使用数据库中的标识符设置一个belongs_to 和一个has_many 更易于维护。使用字符串 id 是非常规的，它是一个以非常糟糕的地方结束的兔子洞。

# macos - Objective-C++中有没有类似_stprintf_s的函数？

> ID：14228091
> 
> 赞同：0
> 
> 时间：2013-01-09T04:01:49.527
> 
> 标签：macos, porting, objective-c++

我正在将一些 lib 从 win32 平台移植到 Mac OS。有一些函数使用 _stprintf_s 来安全地初始化字符串。

Objective-C++中有没有类似_stprintf_s的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:55:15.627

最后我发现`swprintf`哪个可以作为一个很好的替代品。

```
int swprintf(wchar_t *restrict ws, size_t n, const wchar_t *restrict format, ...); 
```

# html - Soundcloud HTML5 播放器未在 Firefox 中加载

> ID：14228093
> 
> 赞同：1
> 
> 时间：2013-01-09T04:02:19.077
> 
> 标签：html, flash, soundcloud

我在运行 Firefox 18 的 Mac OS X 10.8.2 上，我无法让 HTML5 Soundcloud 播放器工作。我在应有的地方出现空白，并且“需要其他插件才能在此页面上显示所有媒体”显示在页面顶部。如果我单击它，它会提示 Macromedia Flash。

我在本地工作，但这里也是如此：

[http://blog.soundcloud.com/2011/11/03/html5/](http://blog.soundcloud.com/2011/11/03/html5/)

我没有任何扩展，所以我不确定问题可能是什么？

根据一些建议，我添加了一个带有以下内容的 htaccess 文件，但它不起作用：

```
AddType audio/ogg oga ogg
AddType video/ogg ogv
AddType video/webm .webm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:04:37.140

不幸的是，由于 Firefox 还没有 mp3 支持，我们必须依靠 Flash 插件才能在那里播放音乐。这就是小部件不为您初始化的原因。

# performance - 数字猜谜游戏

> ID：14228096
> 
> 赞同：0
> 
> 时间：2013-01-09T04:02:48.607
> 
> 标签：performance, algorithm, random, numbers

通常，给定一些秘密数字的数字猜谜游戏算法只是对二分搜索算法的修改，如果知道猜测是大于还是小于秘密数字。假设秘密数字是 13。算法会尝试 1（小于 13）、2（小于 13）、4（小于 13）、8（小于 13）、16（大于 13，回溯）、10（小于 13), 13(等于秘密，停止。)

但是，如果不知道猜测是小于还是大于秘密数字，并且唯一的状态是相等或不相等怎么办？什么算法最有效？当然不是暴力破解...

编辑：对于这两种情况，数字可能有一个上限和下限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:44:47.673

我不确定您对此类问题所期望的性能提升。正如大多数人所建议的那样，没有重要的方法可以改善 O(n) 的最坏情况。您还可以坚持使用二分搜索方法，其中每个不相等的猜测最初都被视为小于操作“<”，一旦此列表用尽，您可以将每个不相等的猜测视为大于操作 >。在玩“猜数字游戏”的实际场景中，我相信这“可能”比顺序暴力更好。

一般来说，如果我们能找到一种算法来准确地猜测最小猜测中的数字，我相信世界各地的许多游戏很快就会变得多余:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:08:30.723

好吧，您所拥有的信息是答案不正确。由于它是唯一可用的信息，我认为蛮力将是唯一的方法。你也可以从零开始然后上升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:26:06.007

如果你想象一个对手直到他们不得不决定这个数字时才真正决定这个数字，那么你可以看到你可能不得不依次询问每个数字。他们可以简单地说“错误答案”，直到您猜出所有可能的数字，并且他们的答案*可能*是真实的，基于您猜到的最后一个数字的初始选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T04:14:01.863

如果相等/不相等是您获得的唯一信息，那么没有任何算法可以比蛮力（即从下限开始到上限）为您提供更好的平均情况或更好的最坏情况性能。

为了获得更好的平均案例性能，您需要一些额外的信息。至少有一些统计数据，比如“只有 10% 的秘密数字低于 20”等，然后可以用来获得更好的平均案例性能（在这个例子中，可能是从 21 开始搜索）。

即便如此，最坏情况下的性能仍然不会比蛮力好。

# python - 重命名访问 MDB 表中的列/字段名称

> ID：14228098
> 
> 赞同：0
> 
> 时间：2013-01-09T04:02:59.433
> 
> 标签：python, ms-access

是否可以使用 python 重命名 Access MDB 表中的现有字段/列名称？我在系统上安装了访问权限，并且正在使用 python 2.6。其他选择和想法很乐意接受。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:05:28.770

这很接近：

[使用python添加新字段以访问表](https://stackoverflow.com/questions/4370274/add-new-field-to-access-table-using-python)

检查自己是否可以在 SQL 级别重命名列。

# arrays - AS3 操作多维数组

> ID：14228106
> 
> 赞同：0
> 
> 时间：2013-01-09T04:04:01.460
> 
> 标签：arrays, actionscript-3, flash, multidimensional-array

再会 ：）

为什么当我编辑时`hold:Array`，`array:Array`也会被编辑？

举个例子：

```
function func(2, 2) { //x, y COORDINATE
   var hold = array[2]; //GET COLUMN OF ARRAY
   hold[2] = 2;         //SET hold[x] to 2
   trace(array[2][2])   //SAME AS hold[x] *but i didn't change array[x]'s value!*
} 
```

**逐步分析**

*array[] 看起来像这样（例如）：*

```
1,1,1,1
1,1,1,1
1,1,1,1
1,1,1,1 
```

*因此，`var hold = array[y]`：（*其中 y=2）

```
1,1,1,1 
```

*和`hold[x] = 2`*（其中 x=2）

```
1,2,1,1 
```

*现在，跟踪`array[y][x]`*（其中 y=2，x=2）

```
1,2,1,1 
```

*但`array[2][2]`应该是`1,1,1,1`，因为我们没有编辑它的值！*

**问题**当我只编辑时 为什么会`array[]`被编辑`hold[]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:16:36.173

这是因为数组（typeof 将给出 Object）是通过引用传递的。要复制其值，您需要[**在 ActionScript 中克隆一个数组**](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ee7.html)。

[这是](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000049.html)ActionScript 2.0 的解释（这也适用于 ActionScript 3.0，但我找不到后者的本文版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:19:06.920

是的，数组作为*参考*存储在变量中。这意味着，当您创建数组`array`然后将其存储`hold`以创建 2D 数组时，您只是存储了对`array`within的引用`hold`。

例如，您会期望如果您将 Sprite 存储在一个数组中，然后编辑该 Sprite 的值，您会从引用该 Sprite 的其他任何地方看到这些更改。这对于数组也是一样的。

```
var array:Array = [];
var another:Array = [];
var sprite:Sprite = new Sprite();

array.push(sprite);
another.push(sprite);

array[0].x = 10;
trace(another[0].x); // Also 10. 
```

如果您不想要这种行为，您可以使用`.slice()`或`.concat()`对数组进行浅层克隆：

```
array.push(hold.slice()); // or
array.push(hold.concat()); 
```

# c# - 在 winform 应用程序中使用谷歌翻译器获取翻译语言

> ID：14228113
> 
> 赞同：0
> 
> 时间：2013-01-09T04:05:27.870
> 
> 标签：c#, winforms

我正在尝试在我的 WinForms 应用程序中将字符串从“英语到孟加拉语”翻译。我试过这段代码：

```
string input = "i eat rice";
string languagePair = "en|bn";

string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair={1}", input, languagePair);
WebClient webClient = new WebClient();
webClient.Encoding = System.Text.Encoding.UTF8;
string result = webClient.DownloadString(url);
result = result.Substring(result.IndexOf("<span title=\"") + "<span title=\"".Length);
result = result.Substring(result.IndexOf(">") + 1);
result = result.Substring(0, result.IndexOf("</span>"));
MessageBox.Show(result.Trim()); 
```

但我得到的是：
`&#2438 &#2478 &#2495 &#2477 &#2494 &#2468 &#2454 &#2494 &#2439`
但如果我把它放在谷歌的搜索框中，那么它会在搜索框中显示我翻译的语言。如何让翻译后的语言显示在我的 WinForm 中？注意：我不想使用谷歌翻译 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:34:11.040

您得到的结果是`&#...`每个 UTF-16 字符的 HTML 实体编码。您可以使用`HttpUtility.HtmlDecode`or`WebUtility.HtmlDecode`来获取实际的 unicode 字符串。

```
result = HttpUtitlityDecode(result.Trim());
MessageBox.Show(result); 
```

有关更多详细信息，请参阅[解码所有 HTML 实体](https://stackoverflow.com/questions/8348879/decoding-all-html-entities)。

# ruby-on-rails - 使用 Rails 3 的嵌套资源正确关联模型

> ID：14228116
> 
> 赞同：1
> 
> 时间：2013-01-09T04:05:35.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我试图更好地处理 Rail 的嵌套资源，并使用模型**School**和**Class**制作了一个测试应用程序。在我的`routes.rb`文件中，我有：

```
resources :schools do
   resources :classes
end 
```

**School**和**Class**具有以下模型关系：

```
class School < ActiveRecord::Base
  attr_accessible: name
  has_many :classes
end 
```

和

```
class Class < ActiveRecord::Base
  attr_accessible: name, school_id
  belongs_to :school
end 
```

我很难获得`school_id`与在诸如`/schools/1/posts/new`. 更准确地说，我想定义一个这样的辅助方法`current_school`，它可以使用它包含的 URI 的前半部分`school_id`，以允许我在控制器中编写函数，这样`current_school.posts.all`会自动拉取与`school_id`=相关联的所有帖子网址。谢谢！

***编辑**

这是我所拥有的`ClassController`：

```
class ClassesController < ApplicationController

  def index
    @classes = current_school.classes.all
  end

  def new
    @class = current_school.classes.build
  end

  def create
    @class = current_school.classes.build(params[:post])
    if @class.save
      redirect_to root_path #this will be further modified once I figure out what to do
    else
      redirect_to 'new'
    end
  end

  private

  def current_school
    @current_school ||= School.find(params[:school_id])
  end

end 
```

在`new.html.erb`文件中：

```
 <div class="span6 offset3">
    <%= form_for([@school, @class]) do |f| %>

      <%= f.label :name, "class title" %>
      <%= f.text_field :name %>

      <%= f.submit "Create class", class: "btn btn-large btn-primary" %>
    <% end %>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:10:07.163

当您嵌套资源时，您可以免费获得几个帮助方法，如此[处](http://guides.rubyonrails.org/routing.html#nested-resources)所述。您正在寻找的方法将被写为以下之一：

```
new_school_class_path(@school)
new_school_class_path(@school_id) 
```

虽然您的课程索引页面将是：

```
school_classes_path(@school)
school_classes_path(@school_id) 
```

在您的 ClassesController 中，您将执行以下操作：

```
def index
  @classes = current_school.classes
end

def new
  @class = current_school.classes.build
end

private
def current_school
  @current_school ||= School.find(params[:school_id])
end 
```

# unix - 在已经有 gcc 3.4.3 的 solaris 10 上编译/安装 gcc 4.1.2

> ID：14228117
> 
> 赞同：0
> 
> 时间：2013-01-09T04:06:14.333
> 
> 标签：unix, gcc, posix, solaris, solaris-10

我在solaris 10上编译gcc时遇到了一些问题。

我从“ftp://ftp.gwdg.de/pub/misc/gcc/releases/gcc-4.1.2/”下载了源代码，并尝试使用configure然后make编译它。但是 make 在下面提到的行停止。

> perl ../.././fastjar/../contrib/texi2pod.pl -D fastjar > fastjar.pod

我已经检查过 perl 已经安装，但它已经卡在这一点上超过 12 小时。

已安装的 gcc 版本是 3.4.3 perl 版本是 5.8.4

* * *

上述问题已解决，因为我使用 ksh shell 构建/配置它，但我遇到了另一个问题，即我在此构建后得到的 gcc 说

> 警告：此配置不支持可见性属性；忽略

此可见性功能是必需的，因为我不想在我的共享库中导出我的所有功能。根据[此链接](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46713)，警告是由于 objdump 造成的，它说我的 $PATH 中不存在。但我检查它是否在 $PATH 变量中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:05:02.183

这是我解决这个问题的方法：

1.  使用 gcc 3.4.3 安装了 gnu binutils 2.18 版（默认情况下在 solaris 中可用）。
2.  cd gcc_source_dir
3.  mkdir objdir && cd objdir
4.  ../configure --with-gnu-as --with-as=/binutils_2_18/bin/as --with-gnu-ld --with-ld=/binutils_2_18/bin/ld --prefix=$PREFIX -- enable-threads=posix --enable-checking=release --with-system-zlib --enable-shared --disable-symvers --enable-languages=c,c++
5.  制作
6.  安装

# python - 如何删除所有特殊字符

> ID：14228118
> 
> 赞同：0
> 
> 时间：2013-01-09T04:06:14.593
> 
> 标签：python

> **可能重复：**
> [从python中的字符串中删除特定字符](https://stackoverflow.com/questions/3939361/remove-specific-characters-from-a-string-in-python)

有一个文本：“abc\r egf”，我需要过滤'\r'，但是，我认为还有一些其他特殊字符需要过滤其他文本，可能是'\n'，所以我想知道是否有图书馆可以做这个工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:21:10.983

正如[CRUSADER](https://stackoverflow.com/questions/14228118/how-to-remove-all-special-character#comment19737794_14228118)所提到的，只要您知道要删除哪些字符，标准的字符串替换操作就可以完成您想要的操作。

```
text = 'foo\nbar\t\tbaz\r'
new_text = text.replace('\n', '').replace('\t', '').replace('\r', '')
print(new_text)
>>> foobarbaz 
```

有关该功能的工作原理，请参阅[文档](http://docs.python.org/3.3/library/stdtypes.html#str.replace)。

但是，使用[`re.sub`](http://docs.python.org/3.3/library/re.html#re.sub)也可以做到这一点，甚至可能更容易替换一长串字符。

```
import re
text = 'foo\nbar\t\tbaz\r'
chars = '[\n\t\r]'
new_text = re.sub(chars, '', text)
print(new_text)
>>> foobarbaz 
```

# android - 在 ActionBar 主页单击时返回到第一个 Activity，但只有在它已被破坏时才重新创建它：我应该使用哪些标志？

> ID：14228120
> 
> 赞同：1
> 
> 时间：2013-01-09T04:06:24.277
> 
> 标签：android

我已设置`setDisplayHomeAsUpEnabled`为 true ，当按下 home 时，我希望用户回到第一个`Activity`.

但如果`FirstActivity`已经创建，我不想重新创建它。我目前正在添加`FLAG_ACTIVITY_CLEAR_TOP`到开始的意图`FirstActivity`。我是否需要添加其他标志（或完全使用另一个标志）才能获得仅在`Activity`不存在时创建所需的行为，或者我有足够的标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:39:12.057

您可以使用 singleTop 启动模式并覆盖 onNewIntent 方法（如果重新启动活动而不是新的活动，则会调用此方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:25:25.957

您不能假设根活动仍然存在，在 Android 4.0 和更高版本的设备中，如果在您从一个活动转移到另一个活动时启用了开发人员选项，则称为不保留活动，则父活动会自动被系统杀死。

# json - 如何将 JSON 数据从 REST API 导入 BIRT？

> ID：14228131
> 
> 赞同：14
> 
> 时间：2013-01-09T04:08:52.947
> 
> 标签：json, rest, birt

我想使用 BIRT 针对来自基于 JSON 的 REST API 的数据生成报告。如何导入这些数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T04:08:52.947

[http://developer.actuate.com/community/forum/?app=blog&blogid=45&showentry=471](http://developer.actuate.com/community/forum/?app=blog&blogid=45&showentry=471)描述了执行此操作的过程，但事实证明缺少一些重要步骤。我将在这里填写一些空白。

最初的说明描述了创建一个脚本数据源，其中包含一个使用`com.actuate.json.JSONParser`该类的“开放”脚本。首先，重要的是要认识到这个类不是 BIRT 的一部分，需要手动添加（以及任何依赖项）。

原始说明提供的下载提供了`com.actuate.json.JSONParser`该类，但由您决定获取依赖项。为了让事情变得更简单，我在 Maven 中重新实现了 JSONParser 库，然后它将为您下载并打包依赖项。它还包括一些错误修复和增强功能，例如 GZIP 压缩支持。您可以从[https://github.com/mcasperson/birt-jsonparser](https://github.com/mcasperson/birt-jsonparser)获取 Maven 项目，并构建`JSONParser`库和打包依赖项，运行命令

```
mvn clean package dependency:copy-dependencies 
```

这将导致在**target**目录中创建**birt-jsonparser-0.0.1-SNAPSHOT.jar**文件，并将所有依赖项复制到**target\dependency**目录中。将所有这些 JAR 文件复制到**{BIRT_INSTALL}/plugins/org.eclipse.birt.report.viewer_{BIRT_VIEWER_VERSION}/birt/scriptlib**目录中，以允许从 BIRT 报告中访问该类。******`JSONParser`******

 ******如果您想调试您的报告，这些 JAR 文件也必须在调试配置文件中被引用。

![在此处输入图像描述](../Images/9066c52846bd6b0d1f1c80d5c040336a.png)******

# html - CSS 不适用于 Django

> ID：14228133
> 
> 赞同：0
> 
> 时间：2013-01-09T04:08:58.700
> 
> 标签：html, css, django, web

我的 HTML 显示，但 CSS 没有。我处于开发模式并运行 django dev runserver。

```
 STATICFILES_DIRS = ("C:/Users/user/site/sitemain/static",)
 STATIC_ROOT= '' STATIC_URL = '/static/'
 MEDIA_ROOT= '' MEDIA_URL='' 
```

HTML 中的链接是：`<link rel="stylesheet" type="text/css href="{{ STATIC_URL}}/base.css" />`Tenplate is base.html 我不知道为什么我的 CSS 不会显示！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:48:52.980

`type="text/css`需要一个右引号，像这样：`type="text/css"`

# javascript - 使用多个 jquery (document).ready() 事件统一单独的 js 文件的正确方法

> ID：14228134
> 
> 赞同：2
> 
> 时间：2013-01-09T04:09:00.803
> 
> 标签：javascript, jquery

我有一个非常大的项目，它有几个外部 javascript 文件，我想将它们统一在一个大文件中以优化服务器负载。

问题是这些脚本中的许多都有它们自己的 (document).ready() 事件，这些事件以仅在该页面上可用的元素为目标。

统一一切会将很多（不同的） (document).ready() 放在一个文件中，其中大多数将针对不在页面上的元素，这是一个问题吗？

解决这个问题的正确方法是什么？

编辑：澄清：我的意思是将数百个包含在他们自己标签中的javascript文件统一在一个文件中，这样我就可以缩小它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:12:01.947

我不太清楚这个问题（某些元素不在页面上），但 jQuery 专门设计用于在页面中有多个`$(function () {})`（文档准备好的快捷方式）调用，并让它们在正确的时间运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T04:21:46.893

在我看来，您在每个页面上都包含不同的 javascript 文件，并且您想将它们合并在一起。

如果这是您要尝试做的，那么最简单的方法是将所有 javascript 连接到一个文件中。在同一个文件中有多个就绪调用很好​​。如果页面上不存在元素，jQuery 也不应该出错，只要您使用 jQuery 方法来做事（例如`$('.element').show()`，这很好，但`$('.element')[0].style.display = 'block';`如果元素不存在于该页面上，则会出错。

将它们放在一起可能会产生意想不到的后果，但如果您有只想应用于特定页面的东西。处理此问题的一种方法是在附加特定事件之前检查您所在的页面。您可以通过检查页面上的特定元素来做到这一点，例如

```
// check if element is present and visible
if ($('.element').is(':visible')) {
    // now we are on this specific page so let's do everything 
    // specific to this page here
} 
```

或者

```
// checks for presence of element
if ($('.element').length) {
} 
```

或者您可以使用 id 或其他方式来区分。

您现在可以`$(document).ready(init);`在 javascript 的底部进行一次调用，init 函数可以决定需要为该页面初始化什么。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:38:54.630

在我开始使用之前，我倾向于添加一个检查以查看我希望 jQuery 与之交互的元素是否确实存在。

话虽如此，许多标准的 jQuery 东西如果它所操作的元素不存在，就会默默地失败，这通常是所需的行为。虽然有一些插件在失败时会向控制台输出警告。在现代浏览器上这不是问题，但在没有安装调试栏的 IE 上，它会导致完全错误，这显然是根本不需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T04:24:16.400

您不需要有多个`(document).ready()`块，您应该能够将所有代码保存在一个`(document).ready()`块中。该代码将仅针对与选择器对应的项目，因此您应该没问题。

附带说明一下，您需要确保不会有来自不同页面的具有相同 id、class 或其他属性的不同对象 - 如果单个 JS 文件对应于所有这些页面并且不同页面上有多个元素具有您的 JS 选择器匹配的属性，您将有不希望的（如果项目太复杂，难以识别）的副作用。

# c# - 如何让我的菜单控件居中？

> ID：14228136
> 
> 赞同：1
> 
> 时间：2013-01-09T04:09:31.553
> 
> 标签：c#, asp.net

我正在使用 ASP.Net 的菜单控件[http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=vs.80%29.aspx)，我正在尝试定位。

菜单的标记是这个

```
<asp:Menu ID="SiteMenu" runat="server" Orientation="Horizontal" BorderColor="Blue" Font-Size="XX-Large" StaticMenuItemStyle-BackColor = "Pink" StaticMenuItemStyle-HorizontalPadding = "11">
    <Items>
        <asp:MenuItem Text="Articles" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Wiki" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Forums" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Links" Value="New Item"></asp:MenuItem>
    </Items>
</asp:Menu> 
```

所以我只是想我会在它周围添加标签，

```
<div horizontal-align:center>
<asp:Menu ID="SiteMenu" runat="server" Orientation="Horizontal" BorderColor="Blue" Font-Size="XX-Large" StaticMenuItemStyle-BackColor = "Pink" StaticMenuItemStyle-HorizontalPadding = "11">
    <Items>
        <asp:MenuItem Text="Articles" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Wiki" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Forums" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Links" Value="New Item"></asp:MenuItem>
    </Items>
</asp:Menu>
</div> 
```

但那没有用。那么我的下一步行动是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T04:13:52.527

哎呀，你应该使用边距和宽度：

```
<div style="margin:0 auto 0 auto; width:750px;">
<asp:Menu ID="SiteMenu" runat="server" Orientation="Horizontal" BorderColor="Blue" Font-Size="XX-Large" StaticMenuItemStyle-BackColor = "Pink" StaticMenuItemStyle-HorizontalPadding = "11">
    <Items>
        <asp:MenuItem Text="Articles" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Wiki" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Forums" Value="New Item"></asp:MenuItem>
        <asp:MenuItem Text="Links" Value="New Item"></asp:MenuItem>
    </Items>
</asp:Menu>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:11:05.650

使用边距，如：

```
margin:0 auto; 
```

这可以帮助您使其自动居中于其父元素。

# neo4j - neography / neo4j 将关系端点更改为另一个节点

> ID：14228145
> 
> 赞同：1
> 
> 时间：2013-01-09T04:10:15.653
> 
> 标签：neo4j, neography

我使用neography 作为Neo4j 图形数据库的REST api 的包装器。我经常需要更改关系的结束节点，但我无法使用neography 来做到这一点。

当然，我可以删除关系然后用新的端点节点重新创建它，但它没有优化。

有人遇到这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:31:48.547

Neo4j 不允许替换关系的节点（参见[javadoc](http://api.neo4j.org/1.8.1/org/neo4j/graphdb/Relationship.html)）。因此，您只能创建与新端节点的新关系并删除其他关系。

# php - INSERT INTO ... ON DUPLICATE KEY UPDATE sprintf 混淆

> ID：14228147
> 
> 赞同：0
> 
> 时间：2013-01-09T04:10:29.440
> 
> 标签：php, mysql

我有一个页面，其中有多个简单的输入供用户选择信息更新选项。用户可能尚未定义更新配置文件，因此我尝试使用“INSERT INTO ... ON DUPLICATE KEY UPDATE”语句。我也在尝试使用 sprintf 来避免可能的 SQL 注入问题。我的问题是我无法开始弄清楚如何编写 SQL 语句。这是代码的相关部分。

```
$updateSQL = sprintf("INSERT INTO reminders_cfg 
                    (id, day_of, day_of_advance, day_prior, default_time, week_prior, 2_week_prior, 3_week_prior, 4_week_prior, 5_week_prior, day_after, 2_week_after, 50_day_after) 
                    VALUES %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s
                    ON DUPLICATE KEY UPDATE ",
                   GetSQLValueString($jeweler, "text"),
                   GetSQLValueString($_POST['DayOf'], "text"),
                   GetSQLValueString($_POST['Advance'], "text"),
                   GetSQLValueString($_POST['DayPrior'], "text"),
                   GetSQLValueString($_POST['Time'], "text"),
                   GetSQLValueString($_POST['WeekPrior'], "text"),
                   GetSQLValueString($_POST['2WeeksPrior'], "text"),
                   GetSQLValueString($_POST['3WeeksPrior'], "text"),
                   GetSQLValueString($_POST['4WeeksPrior'], "text"),
                   GetSQLValueString($_POST['5WeeksPrior'], "text"),
                   GetSQLValueString($_POST['DayAfter'], "text"),
                   GetSQLValueString($_POST['2WeeksAfter'], "text"),
                   GetSQLValueString($_POST['50DaysAfter'], "text")); 
```

这是在 Dreamweaver 中完成的 PHP 页面。这就是 GetSQLValueString 函数的用武之地。我真的不知道在实际的“ON DUPLICATE KEY UPDATE”部分之后要做什么，以便不必再次复制所有变量和占位符。我希望这是有道理的。

更新：好的。这是我最新的尝试，但仍然无法正常工作。

```
if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
    $stmt = $mysqli->prepare("INSERT INTO reminders_cfg 
                    (id, day_of, day_of_advance, day_prior, default_time, week_prior, 2_week_prior, 3_week_prior, 4_week_prior, 5_week_prior, day_after, 2_week_after, 50_day_after) 
                    VALUES :id, :day_of, :day_of_advance, :day_prior, :default_time, :week_prior, :2_week_prior, :3_week_prior, :4_week_prior, :5_week_prior, :day_after, :2_week_after, :50_day_after
                    ON DUPLICATE KEY UPDATE day_of = :day_of, day_of_advance = :day_of_advance, day_prior = :day_prior, default_time = :default_time, week_prior = :Week_prior, 2_week_prior = :2_week_prior, 3_week_prior = :3_week_prior, 4_week_prior = :4_week_prior, 5_week_prior = :5_week_prior, day_after = :day_after, 2_week_after = :2_week_after, 50_day_after = :50_day_after")
                    or die($mysqli->error);
    $stmt->bindParam(':id', $jeweler, PDO::PARAM_INT);      
    $stmt->bindParam(':day_of', $_POST['DayOf'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':day_of_advance', $_POST['Advance'], PDO::PARAM_INT);
    $stmt->bindParam(':day_prior', $_POST['DayPrior'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':default_time', $_POST['Time'], PDO::PARAM_STR, 9);
    $stmt->bindParam(':week_prior', $_POST['WeekPrior'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':2_week_prior', $_POST['2WeeksPrior'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':3_week_prior', $_POST['3WeeksPrior'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':4_week_prior', $_POST['4WeeksPrior'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':5_week_prior', $_POST['5WeeksPrior'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':day_after', $_POST['DayAfter'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':2_week_after', $_POST['2WeeksAfter'], PDO::PARAM_STR, 6);
    $stmt->bindParam(':50_day_after', $_POST['50DaysAfter'], PDO::PARAM_STR, 6);

    $stmt->execute() or die("Insert query error: " . mysql_error());
    $stmt->close(); 
} 
```

这会产生一个 SQL 语法错误，因为我对这个“插入到......在重复密钥更新”上是新手，所以我有点卡住了。这是错误...

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 ':id, :day_of, :day_of_advance, :day_prior, :default_time, :week_prior, :2_week_p' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:21:52.883

在`ON DUPLICATE KEY UPDATE`您只放置要更新的值并保留应该保持不变的值之后。例如

**纯mysql示例**

```
insert into my_table(name, lastSeen, salary)
              values("Some Name", now(), 25334)
on duplicate key update salary = 25334, lastSeen = now() 
```

`name`仅`primary key`针对此示例，现在假设数据库中已经存在同名的记录，则该条目将通过更改薪水和 lastSeen 来更新。如果不是，则将使用提供的值创建条目。在声明的第一部分

`insert into my_table(name, lastSeen, salary) values("Some Name", now(), 25334)`

希望有帮助。

**另外，如果您在问题中添加了要在重复键上更新的字段，那就太好了，这样我们就可以使用您的代码来回答您的问题**。****

 ****编辑** 好的，我知道这不是有史以来最好的格式化代码，但这可能有帮助吗？（也许那里有语法错误，但如果这是你想要的，你可能明白了）

```
 $updateSQL = sprintf("INSERT INTO reminders_cfg 
                (id, day_of, day_of_advance, day_prior, default_time, 
                 week_prior, 2_week_prior, 3_week_prior, 4_week_prior,
                 5_week_prior, day_after, 2_week_after, 50_day_after) 
                VALUES %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s
                ON DUPLICATE KEY UPDATE id = %s, day_of = %s, day_of_advance = %s, 
                     day_prior = %s, default_time = %s, week_prior = %s,
                     2_week_prior = %s, 3_week_prior = %s, 4_week_prior = %s,
                     5_week_prior = %s, day_after = %s, 2_week_after = %s, 
                     50_day_after = %s ",
               GetSQLValueString($jeweler, "text"),
               GetSQLValueString($_POST['DayOf'], "text"),
               GetSQLValueString($_POST['Advance'], "text"),
               GetSQLValueString($_POST['DayPrior'], "text"),
               GetSQLValueString($_POST['Time'], "text"),
               GetSQLValueString($_POST['WeekPrior'], "text"),
               GetSQLValueString($_POST['2WeeksPrior'], "text"),
               GetSQLValueString($_POST['3WeeksPrior'], "text"),
               GetSQLValueString($_POST['4WeeksPrior'], "text"),
               GetSQLValueString($_POST['5WeeksPrior'], "text"),
               GetSQLValueString($_POST['DayAfter'], "text"),
               GetSQLValueString($_POST['2WeeksAfter'], "text"),
               GetSQLValueString($_POST['50DaysAfter'], "text"),
               GetSQLValueString($jeweler, "text"),
               GetSQLValueString($_POST['DayOf'], "text"),
               GetSQLValueString($_POST['Advance'], "text"),
               GetSQLValueString($_POST['DayPrior'], "text"),
               GetSQLValueString($_POST['Time'], "text"),
               GetSQLValueString($_POST['WeekPrior'], "text"),
               GetSQLValueString($_POST['2WeeksPrior'], "text"),
               GetSQLValueString($_POST['3WeeksPrior'], "text"),
               GetSQLValueString($_POST['4WeeksPrior'], "text"),
               GetSQLValueString($_POST['5WeeksPrior'], "text"),
               GetSQLValueString($_POST['DayAfter'], "text"),
               GetSQLValueString($_POST['2WeeksAfter'], "text"),
               GetSQLValueString($_POST['50DaysAfter'], "text")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T04:16:32.927

仅`ON DUPLICATE KEY UPDATE`当存在一个可能的冲突键时才应使用。在这种情况下，我猜是ID。

您最好定义一个触发器。像这样的东西：

```
CREATE TRIGGER `reminders_cfg_duplicates` BEFORE INSERT ON `reminders_cfg` FOR EACH ROW
  DELETE FROM `reminders_cfg` WHERE `id`=new.`id`; 
```

运行一次，例如从 phpMyAdmin 的控制面板。然后，数据库将自动删除任何导致重复的行，允许插入新行而不必在更新中复制所有值。**

# ruby-on-rails - 获取到 gzip xml 资产的 Rails 管道

> ID：14228148
> 
> 赞同：3
> 
> 时间：2013-01-09T04:10:35.110
> 
> 标签：ruby-on-rails, gzip, asset-pipeline

我正在为我的 rails 站点使用 rails 资产管道。assets:precompile 任务正确处理并自动创建我的 css 和 js 文件的 gzip 版本。

我现在添加了一些 xml 资产。资产管道让我可以引用文件，就像我对图像等二进制文件所做的那样。但是，即使我明确地将它们放在“config.assets.precompile”中，预编译任务也不会创建 xml 文件的 gzip 版本。我的 xml 文件是大型资产，使用 gzip 会快 3 倍，所以这是我网站的重要优化。有没有办法将管道配置为带有“.xml”等附加扩展名的 gzip 文件？

**笔记：**

*   我正在使用asset_sync gem 将我的所有静态资产移动到CloudFront CDN，所以我不能依赖我的网络服务器（NGINX）来自动为我压缩文件。[如果资产管道创建了一个文件的压缩版本， asset_sync](https://github.com/rumblelabs/asset_sync)将上传文件的压缩版本，但它不会为您创建压缩版本。理论上，我可以分叉asset_sync并在上传之前将其破解为gzip xml文件，或者在预编译和同步任务之间插入一个额外的任务，但我更愿意避免维护gem的一个分支。

*   我还考虑过使用 .js 扩展名而不是 .xml 来欺骗资产管道，但我更喜欢不那么老套的解决方案。

*   如果没有干净的方法来仅在其他文件类型上配置 gzip，有没有办法在我可以手动添加 gzip 的文件上添加自定义“后处理”过滤器？我已经看到了有关如何在最终散列资产文件上添加自定义预处理器而不是后处理器的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T10:06:51.377

此选项已添加到 Rails 4。XML 会自动压缩，Rails 公开了一个配置选项 zip_files，用于指定要压缩的文件类型。

[https://github.com/rails/rails/commit/7cfd1bd76a41bea528c945d821a9fbc3902af479](https://github.com/rails/rails/commit/7cfd1bd76a41bea528c945d821a9fbc3902af479)

# jquery - 出生日期文本框的 Datepicker 插件

> ID：14228151
> 
> 赞同：14
> 
> 时间：2013-01-09T04:11:29.243
> 
> 标签：jquery, jquery-plugins, datepicker

我发现了一个非常易于使用的 datepicker，名为 jquery datepicker。但问题是当我想用它作为出生日期时。例如：我的出生年份是1986年，当前年份是2013年，那么我需要多次点击左箭头来减少月份，直到找到1986年。如果我的出生年份是1960年或以下会更麻烦。

有人知道适合这个的日期选择器插件吗？也许是一个日期选择器，可以从 Dropbox 中选择哪个年份或月份？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T04:15:25.367

**简而言之：您可以通过**[演示页面](http://jqueryui.com/datepicker/#dropdown-month-year)中的限制日期选择器部分来执行此操作。

如果您稍微向下看一下[演示页面](http://jqueryui.com/datepicker/#dropdown-month-year) ，您会看到“限制日期选择器”部分。使用下拉菜单指定“ `Year dropdown shows last 20 years`”演示，然后点击查看源代码：

```
$("#restricting").datepicker({ 
    yearRange: "-20:+0", // this is the option you're looking for
    showOn: "both", 
    buttonImage: "templates/images/calendar.gif", 
    buttonImageOnly: true 
}); 
```

你会想要做同样的事情（显然改变`-20`或`-100`什么）。

**选项#2：**使用 api 的`changeMonth`and`changeYear`选项。

尝试在当前年份使用“yy”，例如：

```
$('.datepicker').datepicker({changeYear: true, yearRange : 'yy-50:yy+1'}); 
```

有关更多信息，请查看[http://api.jqueryui.com/datepicker/#option-yearRange](http://api.jqueryui.com/datepicker/#option-yearRange)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-19T17:44:12.080

我遇到了同样的问题，所以如果其他人遇到同样的问题，我想我会发布解决方案。它在上面的答案中，但是您必须阅读评论才能获得所有信息。

在头上：

```
<script src="~/Scripts/jquery-1.10.2.js"></script>

<script>
    $(function () {
        $("#datepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: '-100:+0'
        });
    });
</script> 
```

在 HTML 中：

```
<input type="text" class="form-control" id="datepicker"> 
```

这将为您提供一个日期选择器，其中月份是它自己的下拉列表，年份是它自己的下拉列表，并且年份从今天开始并追溯到 100 年。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T07:21:17.150

在 datepicker 调用中添加以下行以获取要在下拉列表中显示的范围

```
yearRange: "1930:2025" 
```

像这样，

```
$( function() {
    $( "#celeb_dob" ).datepicker({
      changeMonth: true,
      changeYear: true,
      yearRange: "1930:2025"
    });
  } ); 
```

# c# - 从共享主机切换到 vps 并获得“路径中的非法字符”

> ID：14228167
> 
> 赞同：1
> 
> 时间：2013-01-09T04:13:25.620
> 
> 标签：c#, asp.net, shared-hosting, vps, illegal-characters

好吧，我在这里扯掉我的头发。我从以前的开发人员那里接手了一些代码，我做了很多工作，至少可以说非常深入。无论如何，我已经与这个问题斗争了几天，无法弄清楚。

我已经从运行良好的共享虚拟主机（aspwebhosting）复制了确切的代码，并将其复制到我们的 vps，现在我得到了这个错误，我无法弄清楚它来自哪里或问题是什么。请有人帮助我。

```
 System.ArgumentException: Illegal characters in path.
   at System.IO.Path.CheckInvalidPathChars(String path)
   at System.Security.Permissions.FileIOPermission.HasIllegalCharacters(String[] str)
   at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
   at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
   at System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, String path)
   at System.Web.HttpRequest.get_PhysicalPath()
   at WebsitePanel.IIsModules.SecureFolders.context_OnEnter(Object sender, EventArgs e)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

# sql - 区分多个字段但显示所有字段 SQL Server

> ID：14228168
> 
> 赞同：0
> 
> 时间：2013-01-09T04:13:49.597
> 
> 标签：sql, sql-server, distinct

我有一个这样的结果查询

```
No    date           No.PO     product    type       div         price
1\.      01-10-2012   |    AAA1  |     X1   |    1   |     SBS   |      100
2\.      09-10-2012   |    ABA1  |     X1   |    2   |     SBS   |      150
3\.      11-10-2012   |    ACC1  |     X1   |    1   |     SBS   |      110
4\.      15-10-2012   |    ACD1  |     X1   |    1   |     DBS   |      115
5\.      20-10-2012   |    ADA1  |     X1   |    1   |     SBS   |      112
6\.      23-10-2012   |    AFA1  |     X1   |    2   |     SBS   |      160
7\.      27-10-2012   |    AHA1  |     X1   |    1   |     SBS   |      120 
```

还有几千条记录。. .

结果应该是这样的

```
No        date           No.PO     product    type        div         price
1\.      27-10-2012   |    AHA1  |     X1   |    1   |     SBS   |       120
2\.      23-10-2012   |    AFA1  |     X1   |    2   |     SBS   |       160
3\.      15-10-2012   |    ACD1  |     X1   |    1   |     DBS   |       115 
```

这是规则

1.  区分产品类型和 div
2.  只有我想显示的最后一笔交易（这意味着重复的产品、类型和 div 数据中的最大日期）
3.  必须显示所有字段（日期、No.PO、产品、类型、div 和价格）

希望我的描述现在很清楚。.

任何人都可以帮助我进行正确的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:36:38.630

请尝试查询并检查结果，只是猜测。

```
SELECT * FROM(
    SELECT
        ROW_NUMBER() OVER (Partition by [Type], [Div] ORDER BY [Date] DESC) RowNum,
        [Date], 
        [No.PO], 
        [Product], 
        [Type], 
        [Div], 
        [Price] 
    FROM TABLE_Name
)x WHERE RowNum=1 
ORDER BY [Date] DESC 
```

# php - 从 Facebook 页面获取最近的评论以及相关的用户数据

> ID：14228176
> 
> 赞同：1
> 
> 时间：2013-01-09T04:15:05.337
> 
> 标签：php, facebook-graph-api, fql.multiquery

正如主题所说，我正在尝试从 Facebook 页面获取最新评论以及相关的用户数据。我正在使用 Open Graph 和 PHP SDK。

这适用于帖子：

```
$fql_query = "
    SELECT fromid, id, post_id, time, text  
    FROM comment  
    WHERE post_id IN (SELECT post_id FROM stream WHERE source_id = '" . $fb_id . "') 
    ORDER BY time DESC LIMIT 1000";

$feed = $facebook->api(array(
    'method' => 'fql.query',
    'query' => $fql_query
    )); 
```

这是获取我需要的用户详细信息的方法：

```
$fql_query = "
    SELECT pic_square, name  
    FROM user 
    WHERE uid = '" . $user_id . "'
    "; 
```

而且，根据我能找到的一切，这应该使用 fql.multiquery 将两者结合起来：

```
$fql_queries = "{
    \"query1\" : \"
    SELECT fromid, id, post_id, time, text 
    FROM comment 
    WHERE post_id IN (SELECT post_id FROM stream WHERE source_id = '" . $fb_id . "') 
    ORDER BY time DESC LIMIT 1000
    \", 
    \"query2\" : \"SELECT pic_square, name FROM user WHERE uid IN (SELECT fromid FROM #query1)\"
    }";

$feed = $facebook->api(array(
    'method' => 'fql.multiquery',
    'queries' => $fql_queries
    )); 
```

但它只返回一个空数组。有谁知道我哪里出错了或者有更好的方法来做我需要的事情？TIA，一如既往。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:36:14.880

我在我的一个页面上的 Graph API 资源管理器中对此进行了测试，它运行良好。

此多查询是否适用于您在 Graph API 资源管理器中的页面？如果是，那么这是一个权限问题。

也许您的问题在于您对 json 进行硬编码的方式。我在我的网站上使用这样的语法。（它也更具可读性）：

```
$fql_queries = array(
   'query1' => "SELECT fromid, id, post_id, time, text...",
   'query2' => "SELECT pic_square, name FROM user..."
);

...
    'queries' => json_encode($fql_queries) 
```

# sql - SQL Server - 在所有行的一列中返回最大值

> ID：14228177
> 
> 赞同：1
> 
> 时间：2013-01-09T04:15:17.650
> 
> 标签：sql, sql-server-2008, max

我可以使用一些 SQL 帮助来解决以下问题。

我有一个包含以下列和数据的表。

```
CUSTOMER PAYMENT_YEAR BILLS_PER_YEAR BILL_NUMBER
Chris    2010         1              1
Chris    2010         2              2
Chris    2010         3              3 
```

我想返回所有三行，但所有 3 行中的最大 bills_per_year 值。它会像这样。

```
CUSTOMER  PAYMENT_YEAR  BILLS_PER_YEAR  BILL_NUMBER
Chris     2010          3               1
Chris     2010          3               2
Chris     2010          3               3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:21:58.783

它对你有用吗？

```
SELECT CUSTOMER, PAYMENT_YEAR, BILLS_PER_YEAR, BILL_NUMBER,
MAX(BILLS_PER_YEAR) OVER (PARTITION BY CUSTOMER,PAYMENT_YEAR) as max_per_year
FROM table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:22:00.720

这是你的意思吗？

```
SELECT 
    CUSTOMER, 
    PAYMENT_YEAR, 
    MAX(BILLS_PER_YEAR) OVER(PARTITION BY CUSTOMER, PAYMENT_YEAR) BILLS_PER_YEAR,
    BILL_NUMBER
FROM TableName 
```

# iphone - 使用 App Store 向测试人员分发游戏？

> ID：14228180
> 
> 赞同：1
> 
> 时间：2013-01-09T04:15:43.777
> 
> 标签：iphone, ios, testing, app-store, game-center

我正在开发一款 iPhone 游戏，并且刚刚添加了一些 Game Center 功能。测试人员发现 Game Center 测试起来很烦人，因为他们必须使用真实帐户退出 GC，然后使用沙盒帐户登录。

我一直在考虑将其提交到 App Store，但将发布日期设置在很远的将来，以便我可以使用促销代码分发给我的测试人员。这将允许他们使用他们的实时游戏中心帐户来测试我的游戏。

除了由于审核过程，新的 beta 版本需要一周时间才能到达测试人员，使用 Live App Store 分发给测试人员还有其他问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:43:35.593

在我看来，与依赖 Apple 的审批流程来动态测试功能相比，必须从常规游戏中心帐户注销到沙盒帐户的小不便是微不足道的。伴随着这样一个事实，即如果发现任何错误，该应用程序将不会被彻底批准，这使得这是一个非常不可行的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:56:55.103

1.  您的游戏必须看起来不像 beta 测试或演示，但要看起来功能齐全，才能获得 Apple 的批准。因此，您必须删除（隐藏）所有尚未工作或尚未完成的游戏元素和 UI，包括游戏说明中的任何内容。

2.  您不能阻止任何人在它被批准并发布出售后下载或购买它。因此，您的应用可能会从随机下载者那里获得 1 星评级。（也许您可以通过将价格设置得非常高来限制您的曝光率，从午夜开始让该应用程序仅在 1 个国家/地区发售，并在您的测试人员使用兑换代码下载它后立即将其下架。）

# jquery - jquery - 简单的手风琴

> ID：14228181
> 
> 赞同：2
> 
> 时间：2013-01-09T04:15:46.433
> 
> 标签：jquery

[它是一个简单的手风琴，这](http://jsfiddle.net/tq5Y8/)就是我想要的，但我需要编辑 HTML 代码以通过验证。而且我不知道如何自定义jquery。我的示例代码在[这里](http://jsfiddle.net/jhunlio/8kp3D/)

原始代码：

```
<ul id="accordion">
    <li>Sports</li>
    <ul>
      <li><a href="#">Golf</a></li>
      <li><a href="#">Cricket</a></li>
      <li><a href="#">Football</a></li>
    </ul>
<li>Latest</li>
        <ul>
          <li><a href="#">Golf</a></li>
          <li><a href="#">Cricket</a></li>
          <li><a href="#">Football</a></li>
        </ul>
</ul> 
```

到这段代码：

```
<ul id="accordion">
    <li>Sports
    <ul>
      <li><a href="#">Golf</a></li>
      <li><a href="#">Cricket</a></li>
      <li><a href="#">Football</a></li>
    </ul>
  </li>
<li>Latest
        <ul>
          <li><a href="#">Golf</a></li>
          <li><a href="#">Cricket</a></li>
          <li><a href="#">Football</a></li>
        </ul> 
 </li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:45:00.027

将您的 javascript 从 jsfiddle 修改为：

```
$("#accordion > li").click(function(){
  $('.active').removeClass('active');

  $(this).addClass('active');
    if(false == $(this).find('ul').is(':visible')) {
        $('#accordion > ul').slideUp(300);
    }
    $(this).find('ul').slideToggle(300);
});

var animationIsOff = $.fx.off;
$.fx.off = true;
$('#accordion > li:eq(0)').click()
$.fx.off = animationIsOff; 
```

# android - TabPageIndicator 文本字体

> ID：14228186
> 
> 赞同：2
> 
> 时间：2013-01-09T04:16:00.623
> 
> 标签：android, viewpagerindicator

我正在使用 ViewPagerIndicator，并且没有任何运气，所以我会在这里问。有没有办法更改 TabPageIndicator 中选项卡的字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:22:02.593

您不需要使用其他第三方库来执行此操作，您可以像这样修改[TabView 类（在 TabPageIndicator 中）](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/library/src/com/viewpagerindicator/TabPageIndicator.java)（假设您希望在整个应用程序中使用相同的字体）：

```
private class TabView extends TextView {
    private int mIndex;

    public TabView(Context context) {
        super(context, null, R.attr.vpiTabPageIndicatorStyle);
    }

    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        // Re-measure if we went beyond our maximum size.
        if (mMaxTabWidth > 0 && getMeasuredWidth() > mMaxTabWidth) {
            super.onMeasure(MeasureSpec.makeMeasureSpec(mMaxTabWidth, MeasureSpec.EXACTLY), heightMeasureSpec);
        }
    }

    public int getIndex() {
        return mIndex;
    }

    public TabView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public TabView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public TabView(Context context) {
        super(context);
        init();
    }

    private void init() {

        Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/myFont.ttf"); // setting a custom TypeFace
        setTypeface(tf);

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-14T18:01:40.367

无需使用第三方库，也无需更改`ViewPagerIndicator`库。

`TabPageIndicator`有一个`ViewGroup`包含 tab`View`的子项，因此您可以使用此代码更改字体：

```
ViewGroup vg = (ViewGroup) indicator.getChildAt(0);
int vgChildCount = vg.getChildCount();
for (int j = 0; j < vgChildCount; j++) {
    View vgChild = vg.getChildAt(j);
    if (vgChild instanceof TextView) {
        ((TextView) vgChild).setTypeface(YOUR_FONT);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:34:59.390

所以我有点粗暴地强迫我让它工作，使用一个名为 Oak 的库（TextViewWithFont 所在的位置），并将 PagerIndicator 传递给这个方法：

```
private static void changeFonts(ViewGroup root, Activity a, String typeface) {
    Typeface tf = TextViewWithFont.getStaticTypeFace(a, typeface);

    for (int i = 0; i < root.getChildCount(); i++) {
        View v = root.getChildAt(i);
        if (v instanceof TextView) {
            ((TextView) v).setTypeface(tf);
        } else if (v instanceof ViewGroup) {
            changeFonts((ViewGroup) v, a, typeface);
        }
    }
}
public static void setTabPageIndicatorFont(ViewGroup root, Activity a) {
    changeFonts(root, a, "DINCondBold.otf");
} 
```

橡树如果有人感兴趣：[http ://willowtreeapps.github.com/OAK/](http://willowtreeapps.github.com/OAK/)

如果有人有更好的解决方法，我很想得到第二个意见。

# c# - 在 C# 中模拟方法级联

> ID：14228187
> 
> 赞同：6
> 
> 时间：2013-01-09T04:16:11.427
> 
> 标签：c#, dart, method-cascades

Dart 编程语言支持[方法级联](http://news.dartlang.org/2012/02/method-cascades-in-dart-posted-by-gilad.html)。方法级联将允许以下 Silverlight/WPF C# 代码：

```
var listBox = new ListBox();

listBox.Width = 200;
listBox.MouseEnter += (s, e) => Console.WriteLine("MouseEnter");

var button1 = new Button() { Content = "abc" };
button1.Click += (s, e) => Console.WriteLine("button1.Click");

listBox.Items.Add(button1);

var button2 = new Button() { Content = "def" };
button2.Click += (s, e) => Console.WriteLine("button2.Click");

listBox.Items.Add(button2);

ContentPanel.Children.Add(listBox); 
```

改为：

```
ContentPanel.Children.Add(
    new ListBox()
        ..Width = 200
        ..MouseEnter += ((s, e) => Console.WriteLine("MouseEnter"))
        ..Items.Add(
            new Button()
                ..Content = "abc";
                ..Click += ((s, e) => Console.WriteLine("button 1 Click")))
        ..Items.Add(
            new Button()
                ..Content = "def";
                ..Click += (s, e) => (Console.WriteLine("button 2 Click")))); 
```

我的问题是，有没有办法在 C# 中模拟或近似方法级联？

这是我想出的一种方法。鉴于此扩展方法：

```
public static T Call<T>(this T obj, Action<T> proc)
{
    proc(obj);

    return obj;
} 
```

上面的例子可以写成如下：

```
ContentPanel.Children.Add(
    new ListBox().Call(o => {
            o.Width = 200;
            o.MouseEnter += (s, e) => Console.WriteLine("MouseEnter");
            o.Items.Add(
                new Button().Call(b => {
                        b.Content = "abc";
                        b.Click += (s, e) => Console.WriteLine("button 1 Click"); }));
            o.Items.Add(
                new Button().Call(b => {
                    b.Content = "def";
                    b.Click += (s, e) => Console.WriteLine("button 2 Click"); })); })); 
```

我不会说那很漂亮。:-) 但它确实能够应用流畅的风格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T04:27:01.393

我认为您可以通过使用流畅的界面来接近您想要实现的目标。它将允许您链接方法以在一个语句中创建和初始化对象。

你可以得到类似的东西：

```
Fluent fluent = new Fluent();
var panel = fluent.CreateControlPanel().Children()
                .AddListBox().SetWidth(200).AddMouseEnterEvent((s, e) => { }).Create()
                .AddTextBox().SetText("Foo").Create()
                .GetControlPanel(); 
```

这个想法是一个方法返回一个允许初始化另一个对象的对象。初始化器链可以在任何项目上调用“终结器”方法（上图`Create`），该方法返回原始对象（上图`Children`）以继续添加其他对象或配置初始对象。

所以例如 in`AddListBox`返回一个类型的对象，`ListBoxSetup`它有一堆方法，比如`SetWidth`or `AddMouseEnterEvent`。在这种情况下`Children`，也将是一个特殊对象（例如 type `ChildSetup`），它具有一堆方法，例如`AddListBox`or `AddTextBox`。每个方法都负责创建类型对象`ListBox`或`TextBox`设置要创建的底层对象的属性。`Fluent`将有一个方法可以正确设置返回整个对象结构。

看看这个链接： [http ://blog.raffaeu.com/archive/2010/06/26/how-to-write-fluent-interface-with-c-and-lambda.aspx](http://blog.raffaeu.com/archive/2010/06/26/how-to-write-fluent-interface-with-c-and-lambda.aspx)

这是创建以上述方式结束的基础代码的示例。当然，代码的架构可以大大改进，但这里只是为了示例。

```
public class Fluent
{
    public ControlPanelCreator CreateControlPanel()
    {
        return new ControlPanelCreator(new StackPanel(), this);
    }
}

public class ControlPanelCreator
{
    #region Fields
    private Fluent fluent;
    private Panel panel;
    #endregion

    #region Constructors
    internal ControlPanelCreator(Panel panel, Fluent fluent)
    {
        this.fluent = fluent;
        this.panel = panel;
    }
    #endregion

    #region Methods
    public ControlPanelChildrenCreator Children()
    {
        return new ControlPanelChildrenCreator(this.panel, this);
    }
    #endregion
}

public class ControlPanelChildrenCreator
{
    #region Fields
    private ControlPanelCreator panelCreator;
    private Panel panel;
    #endregion

    #region Constructors
    internal ControlPanelChildrenCreator(Panel panel, ControlPanelCreator panelCreator)
    {
        this.panel = panel;
        this.panelCreator = panelCreator;
    }
    #endregion

    #region Methods
    public ListBoxCreator AddListBox()
    {
        ListBox listBox = new ListBox();
        this.panel.Children.Add(listBox);
        return new ListBoxCreator(listBox, this);
    }

    public TextBoxCreator AddTextBox()
    {
        TextBox textBox = new TextBox();
        this.panel.Children.Add(textBox);
        return new TextBoxCreator(textBox, this);
    }

    public Panel GetControlPanel()
    {
        return this.panel;
    }
    #endregion
}

public class ListBoxCreator
{
    #region Fields
    private ListBox listbox;
    private ControlPanelChildrenCreator parentCreator;
    #endregion

    #region Constructors
    internal ListBoxCreator(ListBox listBox, ControlPanelChildrenCreator parentCreator)
    {
        this.listbox = listBox;
        this.parentCreator = parentCreator;
    }
    #endregion

    #region Methods
    public ListBoxCreator SetWidth(int width)
    {
        this.listbox.Width = width;
        return this;
    }

    public ListBoxCreator AddMouseEnterEvent(Action<object, MouseEventArgs> action)
    {
        this.listbox.MouseEnter += new MouseEventHandler(action);
        return this;
    }

    public ControlPanelChildrenCreator Create()
    {
        return this.parentCreator;
    }
    #endregion
}

public class TextBoxCreator
{
    #region Fields
    private TextBox textBox;
    private ControlPanelChildrenCreator parentCreator;
    #endregion

    #region Constructors
    internal TextBoxCreator(TextBox textBox, ControlPanelChildrenCreator parentCreator)
    {
        this.textBox = textBox;
        this.parentCreator = parentCreator;
    }
    #endregion

    #region Methods
    public TextBoxCreator SetText(string defaultText)
    {
        this.textBox.Text = defaultText;
        return this;
    }

    public ControlPanelChildrenCreator Create()
    {
        return this.parentCreator;
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:57:28.403

我支持以前的答案。我喜欢添加的东西很少，因为我已经创建了类似类型的东西。

有两件事，要么你有一个班级做事。表示表单，有 addcolor、addData 等，可能是表单有按钮，而按钮有颜色

现在在这种情况下，您需要使用接口进行链接，这意味着方法返回类型将是接口，并且所有接口都由该类实现，并且该方法仅返回“this”。

当您创建接口对象时，这将起到作用。然后把它串起来。这里很难举例，但如果你仍然想我可以提供例子。

让我知道是否需要任何进一步的细节

# python - 创建一个表示查询集联合的查询集

> ID：14228188
> 
> 赞同：1
> 
> 时间：2013-01-09T04:16:20.993
> 
> 标签：python, django, django-orm

假设我有以下模型：

```
class House(models.Model):
    address = models.CharField(max_length=255)

class Person(models.Model):
    name = models.CharField(max_length=50)
    home = models.ForeignKey(House, null=True, related_name='tenants')

class Car(models.Model):
    make = models.CharField(max_length=50)
    owner = models.ForeignKey(Person) 
```

假设我需要（尽管很奇怪）得到：

*   住在房子里或被命名为“约翰”的人的名单
*   上述人员的汽车清单

我想要两个功能：

*   `get_tenants_or_johns(house)`
*   `get_cars_of_tenants_or_johns(house)`

我可以将它们定义为：

```
from django.db.models.query_utils import Q

def get_cars_of_tenants_or_johns(house):
    is_john = Q(owner__in=Person.objects.filter(name='John'))
    is_tenant = Q(owner__in=house.tenants.all())
    return Car.filter(is_john | is_tenant)

def get_tenants_or_johns(house):
    johns = Person.objects.filter(name='John')
    tenants = house.tenants.all()
    return set(johns) | set(tenants) 
```

问题是在上面的例子中重复了这个逻辑。如果我可以`get_tenants_or_johns(house)`返回 a`queryset`我可以定义`get_cars_of_tenants_or_johns(house)`为：

```
def get_cars_of_tenants_or_johns(house):
    return Car.objects.filter(owner__in=get_tenants_or_johns(house)) 
```

为了做到这一点，`get_tenants_or_johns(house)`需要返回一个查询集的联合，而不是将它们变成其他集合。

我无法弄清楚如何实现`get_tenants_or_johns(house)`，以便它返回一个包含 SQL 的查询集`UNION`。有没有办法做到这一点？如果没有，是否有另一种方法来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:12:26.993

两个查询集上的`|`运算符将返回一个表示联合的新查询集。

该功能将需要更改为（摆脱`set()`包装器）：

```
def get_tenants_or_johns(house):
    johns = Person.objects.filter(name='John')
    tenants = house.tenants.all()
    return johns | tenants 
```

一切都将完全按照需要进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:12:27.627

你提到住在房子里的用户，但没有提到你的用户模型。

我认为你真的需要仔细看看你的应用程序的结构——可能有更简单的方法来实现你的目标。

但要回答您的问题，让我们设置三个辅助函数。因为，正如我上面提到的，你还没有概述你想对 User 类做什么 - 我假设`house`将传递给这些函数的是一个地址：

助手.py

```
def get_johns(house):
    is_john = Person.objects.filter(name='John')
    return is_john

def get_cars_of_tenants(house):
    cars = Car.objects.filter(owner__home__address=house)
    return cars

def get_tenants(house):
    tenants = Person.objects.filter(home__address=house)
    return tenants 
```

现在您可以为每个组合查询创建一个视图：

视图.py：

```
import helpers.py
from itertools import chain

def get_cars_of_tenants_or_johns(request, house):
    results = list(chain(get_cars_of_tenants(house), get_johns(house)))
    return render_to_response('cars_or_johns.html', {"results": results,})

def get_tenants_or_johns(request, house):
    results = list(chain(get_tenants(house), get_johns(house)))
    return render_to_response('tenants_or_johns.html', {"results": results,}) 
```

这可以适用于所有各种组合。返回的是`results`您可以迭代的所有匹配项的列表。

# debugging - VS2012 Javascript 调试不起作用

> ID：14228189
> 
> 赞同：2
> 
> 时间：2013-01-09T04:16:27.783
> 
> 标签：debugging, visual-studio-2012, remote-debugging, javascript-debugger

在过去的两天里，我遇到了一个我无法解决的问题。

每当我尝试在笔记本电脑上使用 VS2012 调试 Windows 8 商店 JavaScript 应用程序时，都会收到以下错误：

```
>Unable to start debugging 'C:\Windows\system32\wwahost.exe'.
>
>Microsoft Visual Studio Debugging Monitor (MSCVMON.EXE) failed to
>start. If this problem persists, please repair your Visual Studio
>installation vis 'Add or Remove Programs' in control panel. 
```

当我尝试在本地和模拟器中调试时会发生这种情况。

这仅适用于 javascript 项目，所有其他类型的项目都可以正常工作。

到目前为止，我采取的步骤是：

1.  修复安装
2.  已安装更新 1
3.  将所有应用程序包添加到安全选项卡上的程序文件 (x86)\Common Files\Microsoft Shared\VS7Debug。
4.  卸载并重新安装

没有任何效果。

有趣的是，这个错误是关于我不想做的远程调试，我没有为 2012 年安装远程调试，但它已安装在我的 VS2008 系统上。

我为 VS2012 安装了它，并在尝试调试时打开了监视器，但日志中没有显示任何内容。

我在全新的 win8 桌面安装上使用相同的 VS2012 DVD 进行了安装，它没有任何问题，尽管它在第一次运行时确实要求我设置权限（我不记得它是否在我的笔记本电脑上这样做）。

我认为在我的笔记本电脑上安装时出现了问题，它问我是否想从以前版本的 Visual Studio 导入设置，我说是。

最近两天我一直在网上搜索这个主题，有些人说这个问题是由 VS2012 试图打开一些 VS2008 文件引起的，但如何解决这个问题尚不清楚。

当我卸载 VS2012 并重新安装时，它并没有问我是否要导入设置，所以我认为我没有完全卸载它（重新安装后它仍然有我最近访问的项目的列表）。

很抱歉发了这么长的帖子，但这让我发疯了，我想不出下一步该尝试什么。有人可以帮忙吗？

# objective-c - 在 prepareForSegue 中传递对 ViewController 的引用

> ID：14228191
> 
> 赞同：1
> 
> 时间：2013-01-09T04:16:33.693
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller, uistoryboardsegue

我有 2 个视图控制器，分别称为 ViewController1 和 ViewController2。当我想加载 ViewController2 时，从 ViewController1 调用模态序列。我在 ViewController1 中有一个方法，需要在 ViewController2 显示时调用。我的想法是在 ViewController2 中有一个属性是对 ViewController1 的引用，以便我可以访问该方法。

```
@property (strong, nonatomic) ViewController1 *vc1Reference;
```

此属性将在 prepareForSegue 方法中设置，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender { // 1
    if ([[segue identifier] isEqualToString:@"sequeToVC2"]) { // 2
        ViewController2 *vc2 = segue.destinationViewController; // 3
        vc2.vc1Reference = (ViewController1*)segue.sourceViewController; // 4
    }
}

```

但是第 4 行给了我这个错误： ARC 不允许将 Objective-C 指针隐式转换为“int *”。

我应该如何设置参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:29:52.033

您走在正确的轨道上，但正确的方法是使用委托。

您在 vc2 中声明了一个委托属性`@interface`：

```
@property (nonatomic, weak) id <vc2delegate> delegate   //[1] (in vc2.h) 
```

并且您将委托设置在您的`prepareForSegue`：

```
vc2.delegate = self;    //[2] (in vc1.m) 
```

（'self' 是 vc1 的正确参考，来自 vc1）

在 vc2 中定义一个协议，这是您期望 vc1 从 vc2 响应的方法。把它放在 vc2.h 中，在你的上面`@interface`

```
@protocol vc2delegate           //[3] (in vc2.h)
- (void) delegateMethod;
@end 
```

然后你必须确保你在vc1中实现了那个方法。您还需要让 vc1 知道遵守委托。将 vc2 导入 vc1.h，然后在 vc1 的`@interface`行中，在尖括号中添加协议名称：

```
#import vc2.h

@interface vc1 <vc2delegate>     //[4] (in vc1.h) 
```

这种安排允许 vc2 将方法传递给 vc1，而无需`#include`vc1 或知道任何关于它的信息。

*更多详情...*

1.  这是你的正确形式

    ```
    @property (strong, nonatomic) ViewController1 *vc1Reference; 
    ```

    注意`weak`引用的使用。您不想进行`strong`引用，因为您真的不想与委托有任何关系，除非知道它可以处理您在协议中指定的方法。委托通常是创建委托者的对象，`strong`在另一个方向创建引用会导致内存泄漏，因为这两个对象都不会消失。

2.  这是您的行的正确形式：

    ```
    vc2.vc1Reference = (ViewController1*)segue.sourceViewController; 
    ```

    请注意，我们没有在 1 或 2 中使用类型/强制转换。为了最大程度地重用代码/解耦，我们不想对 segue 两端的对象类型做出任何假设。我假设您的“prepareForSegue”在 vc1 中。如果不是，那么该行将如下所示：

    ```
    vc2.delegate = segue.sourceViewController 
    ```

3.  这是协议声明。它位于 vc2 的头文件中。vc2 正在发布它对选择成为其委托的任何对象的期望。vc2 将根据此协议发送消息，因此任何委托都需要以正确的方式响应。您可以通过使用这种消息传递来防止 vc2 中的故障

    ```
    if (self.delegate respondsToSelector:@selector('delegateMethod')
    {
        [self.delegate delegateMethod];
    } 
    ```

    （这是您将在 vc2 中用于与 vc1 通信的那种消息传递的示例。您显然可以传递参数并在需要时返回返回的结果）

4.  这是编译器的助手，如果您未能实现协议，它会向您发出警告。

    最后，在您的对象定义中的某个地方，您需要实现该方法：

    ```
    - (void) delegateMethod 
    {
        // someaction;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:25:07.227

前几天我遇到了类似的事情。我最终为 vc2 创建了一个委托，并使用

```
vc2.delegate = self; 
```

而是在 segue 中。这会解决你的问题吗？如果您在设置代理时需要帮助，请告诉我，我会尽力提供帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T20:55:53.137

只需将一个委托添加到您正在访问委托的 ViewController，XCode/Obj-C 之后似乎做了正确的事情。

前：

```
@interface ViewController2 : UIViewController

@end 
```

后：

```
@interface ViewController2 : UIViewController
  @property (nonatomic, weak) id <UIPageViewControllerDelegate> delegate;
@end 
```

# django - Django：如何向后跟随ManyToMany（'self'）

> ID：14228193
> 
> 赞同：4
> 
> 时间：2013-01-09T04:17:25.363
> 
> 标签：django, django-models, many-to-many

> ```
> class c(models.Model):
>     f = models.ManyToManyField(
>         'self', 
>         blank=True, 
>         null=True, 
>         related_name='child_set'
>     ) 
> ```

我可以 ：

```
 c.objects.get(pk="1").f 
```

但是我如何得到'_set'？

```
 c.objects.get(pk="1").child_set 
```

不工作

我需要这个：

```
{name:A,parent:[]}
{name:B,parent:[A]}
{name:C,parent:[A,B]}

C.parent.all() == [A,B]
A.parent_set.all() == [B,C] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-19T14:09:57.640

Django 的 ManyToManyField 默认是对称的。这意味着将通过两种方式创建直通模型。如果你指向自我，这意味着没有反向关系，因为主要的关系包括两者。

可以通过禁用对称来更改此行为。有一个关键字参数来做那个调用`symmetrical`。在您的示例中：

```
class c(models.Model):
f = models.ManyToManyField(
    'self', 
    blank=True, 
    null=True, 
    related_name='child_set',
    symmetrical=False
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:01:09.970

对于`ManyToManyField`引用的 s，`self`不创建反向关系。这是因为它没有用处——它将包含所有引用自身的关系——这就是前向关系所做的。

无论您说什么，您都会发现`related_name`应该将其设置为`%(field)s_rel_+`（尾随`+`阻止创建关系）。

所以答案是没有`child_set`，因为你可以使用`f`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T14:20:03.477

一个很好的解决方案是将 C 模型分成两个模型并创建一个 OneToOneField 到另一个。这样，结构就变成了树而不是网。下面的代码说明了我的观点：

```
class Boo(models.Model):
    name = models.CharField(max_length=20)

class Coo(models.Model):
    boo = models.OneToOneField(Boo)
    foo = models.ManyToManyField(
          Boo, 
          blank=True, 
          null=True, 
          related_name='child_set'
    ) 
```

现在你可以这样做：

```
Coo.objects.get(pk=1).foo 
```

然后你可以通过'_set'获得：

```
Coo.objects.get(pk=1).boo.child_set 
```

# android - getSupportActionBar() 中未显示徽标

> ID：14228194
> 
> 赞同：0
> 
> 时间：2013-01-09T04:17:28.717
> 
> 标签：android, android-actionbar

如何使用 getSupportActionBar() 在标题栏中显示徽标/图标。我只得到显示文本标题。

在清单中我添加了以下内容：

```
<application
        android:allowBackup="true"
        android:hardwareAccelerated="true"
        android:icon="@drawable/icon"
        android:killAfterRestore="false"
        android:label="@string/app_name"
        android:logo="@drawable/icon"
        android:theme="@style/mainStyle" >
        <activity
            android:name=".MainActivity"
            android:logo="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
</application> 
```

在 style.xml

```
<style name="mainStyle" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="background">@drawable/actionbar_background</item>
    <item name="android:background">@drawable/actionbar_background</item>

    <item name="displayOptions">showTitle|homeAsUp|useLogo</item>
    <item name="android:displayOptions">showTitle|homeAsUp|useLogo</item>
</style> 
```

但不显示图标/徽标。只显示文本应用程序名称。我的代码有什么问题？我想在左侧应用程序名称旁边显示徽标/图标，如果单击它返回或返回主页，例如 Google Play 应用程序。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:38:06.773

在 displayOption 和 android:displayOptions 添加 showHome 它将起作用

更新 ：

只需避免在样式中使用 displayOption 并添加 getSupportactionBar().setDisplayHomeAsUpEnabled(true); 在活动中。它也将解决您的问题。

# css - 水平和垂直居中 DIV 到 100% 高度和宽度的父 DIV

> ID：14228200
> 
> 赞同：2
> 
> 时间：2013-01-09T04:18:58.277
> 
> 标签：css, html

我已经堆叠了高度和宽度为浏览器窗口 100% 的父 DIV，并且似乎无法让辅助 DIV 在其各自的 div 内居中。

这是我堆叠的父母：

```
#parent1 {
    min-height:100%;
    height: auto;
    height: 100%;
}

#parent2 {
    min-height:100%;
    height: auto;
    height: 100%;
} 
```

我想设置它，以便我的内容在这些堆叠的 DIV 中居中浮动：

```
<div id="parent1">    <-- fits entire browser window --/
   <div id="content1"></div>  <-- centred horz. and vert. in parent1 --/
</div>
<div id="parent2">    <-- fits entire browser window but under parent1 --/
   <div id="content2"></div>  <-- centred horz. and vert. in parent2 --/
</div> 
```

...等等。就目前而言，我的内容 CSS 看起来像这样，但它不起作用：

```
#content1 {
    width:1000px;
    height:500px;
    left:50%;
    right:50%;
    margin:-250px 0 0 -500px;
} 
```

我也没有绝对或相对定位的运气......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:23:25.163

您需要按如下方式添加位置属性：

```
#parent1 {
    min-height:100%;
    height: auto;
    height: 100%;
    position: relative;
}

#parent2 {
    min-height:100%;
    height: auto;
    height: 100%;
    position: relative;
}

#content1 {
    width:1000px;
    height:500px;
    left:50%;
    right:50%;
    margin:-250px 0 0 -500px;
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:38:33.607

```
#parent1 {
    height:1000px;
    background-color:#CCFF00;

}

#parent2 {
    height:1000px;
    background-color:#66CCFF;

}
#content1 {
    width:500px;
    background-color:#9900CC;
    height:500px;
    margin:350px;
    float:left;

} 
```

给出颜色以了解确切位置..尝试`float:left`在子 div中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:39:56.223

我不确定你想要水平居中对齐什么。内容 div 或父 div。就给他们这门课

```
.middle{
    margin: 0px auto;
    width: 80%;
} 
```

# java - 从 ArrayList 过滤非重复项

> ID：14228205
> 
> 赞同：-1
> 
> 时间：2013-01-09T04:19:22.390
> 
> 标签：java

> **可能重复：**
> [Java ArrayList 删除重复项](https://stackoverflow.com/questions/5741038/java-arraylist-remove-duplicates)

从以下课程和列表中，我需要一个列表，其中名称和日期相同，其他应该被删除。

从下面的列表中，我只需要前两条记录，因为名称和日期相同，第三条应该被删除。有人能帮帮我吗。

```
public class TestBean {

    public String name;
    public Date birthDate;
    public String city;
}

List<TestBean> list = new ArrayList<TestBean>();

TestBean testBean=new TestBean();
testBean.setName("test");
testBean.setBirthDate(new SimpleDateFormat("mm/dd/yyyy").parse("01/01/1981"));
testBean.setCity("chicago");

TestBean testBean1=new TestBean();
testBean.setName("test");
testBean.setBirthDate(new SimpleDateFormat("mm/dd/yyyy").parse("01/01/1981"));
testBean.setCity("newyork");

TestBean testBean2=new TestBean();

testBean.setName("test");
testBean.setBirthDate(new SimpleDateFormat("mm/dd/yyyy").parse("01/01/1982"));
testBean.setCity("chicago");
list.add(testBean);
list.add(testBean1);
list.add(testBean2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:31:36.707

覆盖 TestBean 类的 equals()（基于姓名和出生日期）和 hashCode()，然后将所有对象添加到[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)数据结构。如果您正确覆盖了 equals()，则设置过滤器重复对象。

# css - 在 div 中居中固定图像

> ID：14228208
> 
> 赞同：1
> 
> 时间：2013-01-09T04:20:03.983
> 
> 标签：css, html, css-position, alignment

我在这里创建了一个 JSFiddle：http: [//jsfiddle.net/AsHW6/](http://jsfiddle.net/AsHW6/)

我正在尝试做的是让 down_arrow.png 以它们包含的 div 为中心。我能够使用自动边距使 up_arrow.png 居中。我使用 fixed 属性将它们用作页脚，因为我希望它们位于 div 的底部，而不管分辨率如何。

我的问题是将底部固定图像居中在其包含 div 的宽度内的最佳方法是什么？

小提琴中的一些代码（我在使用 StackOverflow 格式时遇到问题）：

```
 .scroll-arrow-down {
        position: fixed;
        bottom:0;
    } 
```

我应该补充一点，我根本不关心 IE hacks/workarounds，这个应用程序不会以任何方式针对 IE。任何意见和答案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:51:20.793

您可以将向下箭头的图像包装在与底部对齐的 div 中。然后可以将 div 设置为使其内容居中。

用 HTML 包装：

```
<div id="list1">
  <img src="image/up_arrow.png" class="scroll-arrow-up">
  <p class="list-title" id="list-title1">Autonomous Behaviors</p>
  <div class=".scroll-arrow-down">
    <img src="image/down_arrow.png">
  </div>
</div> 
```

和CSS：

```
.scroll-arrow-down {
  position: absolute;
  bottom: 0;
  background-color: red;
  width: 100%;
  text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:03:33.960

如果您使用固定位置，它将固定到视口（我认为您不需要）。使用绝对定位将参考包含它们的项目定位图像。

我加了一个left:45%; 这几乎使事情居中，但取决于可能需要更新的箭头的宽度。

```
.scroll-arrow-down {
    position: absolute;
    bottom:0;
    left: 45%;
} 
```

[http://jsfiddle.net/AsHW6/1/](http://jsfiddle.net/AsHW6/1/)

# ruby-on-rails - 在每个语句中传递对象属性

> ID：14228209
> 
> 赞同：0
> 
> 时间：2013-01-09T04:20:14.267
> 
> 标签：ruby-on-rails, erb

我正在尝试在 a 中使用对象的参数，`link_to`如下所示：

```
<% @step.images.each do |pic| %>
     <script>
        alert(<%=pic.id%>);
     </script>

     <li class = "span2" id="picture_<%=pic.id %>">
         <div class="thumbnail">
             <%=image_tag(pic.url.to_s, :width => "100%") %>
                  <p style="text-align: center;">
              <!-- ERROR ON LINE BELOW FOR LINK_TO PATH -->
              <%= link_to edit_step_image_path("<%=pic.id%>"), :class=> "btn btn-mini" do %>
                   <i class="icon-edit"></i>
              <% end %>

              <a href="#" class="btn btn-mini btn-delete" confirm="Are you sure you want to delete this photo?" data-method="delete">
                <i class="icon-trash"></i>
             </a>
        </div>
    </li>
<% end %> 
```

我检查了我的警报确实传递了正确的 id，但是当我尝试`pic.id`在我的 中使用时`link_to`，我得到一个语法错误。删除括号`<%=pic.id%>`可以消除错误，但会给我错误的 ID。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:24:13.227

您正在尝试在 ERB 内插入 ERB，但这是行不通的。您已经在编写 Ruby 代码，所以只需编写 Ruby！而是使用这个：

```
<%= link_to edit_step_image_path(pic.id), :class=> "btn btn-mini" do %> 
```

# javascript - Jquery 拖拽选项卡

> ID：14228211
> 
> 赞同：0
> 
> 时间：2013-01-09T04:21:00.677
> 
> 标签：javascript, jquery

下面是一个不错的拖动选项卡，我想在我的项目中实现它。有没有为此的任何 jquery 插件。

[http://www.blitzagency.com/our-people/#meet-the-blitizens](http://www.blitzagency.com/our-people/#meet-the-blitizens)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:37:11.990

下面的教程对你很有用，它使用了 Jquery 和 JqueryUI

[http://jqueryfordesigners.com/slider-gallery/](http://jqueryfordesigners.com/slider-gallery/)

# c# - 原语的序列化

> ID：14228221
> 
> 赞同：2
> 
> 时间：2013-01-09T04:22:03.537
> 
> 标签：c#, serialization

我经常遇到这个问题，但我还没有找到令人满意的解决方案。

我正在实现一个用于保存游戏的阅读器（但它也可以应用于其他类型的文件）。根据版本，有一些添加的条目，但顺序始终保持不变。因此我创建了一个类：

```
public class Entry<T> {
    public T Value;
    public readonly FileVersion MinVersion;
    public Entry(T v = default(T), ScenarioVersion m = FileVersion.V115) {
        Value = v;
        MinVersion = m;
    }
} 
```

现在，你猜，我想用尽可能少的代码编写这些条目。我只想写一行`if (version >= MinVersion) { /* write data */ }`。条目可以是原始类型或对象，这是问题所在......

应该为每个需要的原始类型定义一个接口并实现它作为包装器吗？还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:11:01.993

（查看评论以了解具体问题。）

> 某些值仅在满足特定条件时才写入。

这些条件在读取/写入文件时是否已知，或者在读取时是否基于文件中的其他数据？如果是前者（已经知道），则传入一个[`Func<bool>`](http://msdn.microsoft.com/en-us/library/bb534960.aspx)必须评估为真才能发生读取或写入操作的值。调用者可以提供适当的委托或 lambda 方法来做出决定。您在问题中提到了最低版本。我认为这是一个例子。

如果是后者（根据文件中的其他数据读取/写入值），这是一个更广泛的问题。如果可以对文件中较早的数据或已知位置的数据做出决定，则加载它并将适当的参数传递给 Func。否则，您可能需要查看更复杂的解析机制，但我认为这不是您要问的。

> 它不是静态结构，包含一些东西，比如 struct { int len; 字符[len]; }。

.Net 提供了多种序列化对象的方法，但我怀疑您希望以定义的格式读取/写入，例如将字符串存储为长度后跟 8 位字符的格式。如果 .Net 机制不能满足您的需求，您可能必须自己编写。有关这方面的更多信息，包括使用来获取基元的底层字节，请参阅[Byte 以了解 C# 中结构的字节序列化。](https://stackoverflow.com/questions/628843/byte-for-byte-serialization-of-a-struct-in-c-sharp)[`Marshal`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal%28v=vs.110%29.aspx)

另外，更多参考，如果你想避免写出原始类型，你可以使用`public class Entry<T> where T: class`.

# iphone - 为什么 NSDecimalNumber 10^-65 的平方会导致 10^126 而不是导致下溢异常？

> ID：14228222
> 
> 赞同：4
> 
> 时间：2013-01-09T04:22:05.867
> 
> 标签：iphone, objective-c, floating-point, nsdecimalnumber, underflow

所以这里是代码：

```
NSDecimalNumber *test=[[NSDecimalNumber alloc] initWithInt:65];
number3=[[NSDecimalNumber one] decimalNumberByDividingBy:[[[NSDecimalNumber alloc] initWithInt:10] decimalNumberByRaisingToPower:test.integerValue]];
number3=[number3 decimalNumberByMultiplyingBy:number3]; 
```

我希望程序以下溢异常终止，但事实并非如此。此外，取一个 NSLog 会给 number3 一个巨大的数字。如果我将“test”更改为低于 64 的任何值，它会给出正确的输出（即 10^(-2*test)）。有谁知道这里发生了什么？我的意思是，这很容易解决，但除非我遗漏了某些东西（这很有可能），否则这似乎是 NSDecimalNumber 类中的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:58:21.493

这看起来像一个错误。

`NSDecimalNumber`被[记录为支持从 -128 到 +127 的指数](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDecimalNumber)。显然，(10 ^(-65) ) ²的指数为-130，超出范围。但是，它没有引发异常，而是将 -130 包装到 +126。

记录在案的[默认行为](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html#//apple_ref/doc/uid/20000179-defaultBehavior)是`NSDecimalNumber`“这些方法假定您对精度的需求不超过 38 位有效数字，并在它们尝试除以 0 或产生太大或太小而无法表示的数字时引发异常。”</p>

由于它没有引发异常，我会说你发现了一个错误。您可以在[http://bugreport.apple.com/](http://bugreport.apple.com/)上报告它。

# jquery - 为什么 jquery 不允许 ascii 字符在 html 中显示？

> ID：14228225
> 
> 赞同：0
> 
> 时间：2013-01-09T04:22:36.647
> 
> 标签：jquery, html, ascii

我正在使用 jquery 字符计数器并将其与 Codeigniter 中的表单助手集成。我已经让一切正常工作，但是当我使用这个脚本时，括号没有出现。我输入了它们并使用了 ascii 代码，它们只有在我取下脚本时才会出现。

知道这可能是什么吗？

提前致谢。

javascript:

```
<script>
    function updateCountdown_mylife() {
        var remaining = 1340 - jQuery('.message_mylife').val().length;
        jQuery('#mylife').text(remaining + ' characters remaining.');
    }

    jQuery(document).ready(function($) {
        updateCountdown_mylife();
        $('.message_mylife').change(updateCountdown_mylife);
        $('.message_mylife').keyup(updateCountdown_mylife);
    });

    function updateCountdown_occupation() {
        var remaining = 200 - jQuery('.message_occupation').val().length;
        jQuery('#occupation').text(remaining + ' characters remaining.');
    }

    jQuery(document).ready(function($) {
        updateCountdown_occupation();
        $('.message_occupation').change(updateCountdown_occupation);
        $('.message_occupation').keyup(updateCountdown_occupation);
    });
    </script> 
```

html:

```
My Life <br /><span class="title_sub_text">Tell us a about yourself</span> <span class="edit_sub_text" id="mylife">&#40;1350 character limit&#41;</span> 
```

文本区域：

```
<div class="edit_text_area">        
            <?php 

            if(empty($user['mylife']))
            {
                $data = array('name' => 'mylife', 'class' => 'message_mylife');
                echo form_textarea($data);
            }
            else
            {
                $data = array('name' => 'mylife', 'class' => 'message_mylife');
                echo form_textarea($data, $user['mylife']);
            }

            ?>
        </div> 
```

提前比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:23:13.197

如果我明白您在说什么，那么括号不会出现，因为您正在覆盖跨度文本并且在覆盖时没有将括号放在那里。例如，不应该将相关代码`updateCountdown_mylife`修改为

```
jQuery('#mylife').text('(' + remaining + ' characters remaining)'); 
```

请注意其中包含的括号。同样要在启动时显示，只需在启动代码中`(1350 character limit)`注释掉调用，即`updateCountdown_mylife`

```
jQuery(document).ready(function($) {
        // updateCountdown_mylife(); // this line would modify span text at start-up
        $('.message_mylife').change(updateCountdown_mylife); 
```

我已经用这些更改修改了 JS fiddle - 在[这里查看](http://jsfiddle.net/GjRYL/1/)：http : [//jsfiddle.net/GjRYL/1/](http://jsfiddle.net/GjRYL/1/) - 希望这就是你所追求的。

# cloudbees - 正在运行的应用程序中 cloudbees 上的 MongoHQ 连接错误

> ID：14228227
> 
> 赞同：0
> 
> 时间：2013-01-09T04:22:40.063
> 
> 标签：cloudbees, mongohq

我的应用程序在 cloudbees 上完美运行。突然我得到 MongoHQ 连接错误。当我重新启动我的应用程序而不对应用程序进行任何更改时，它再次完美运行。

原因：java.io.IOException: 无法连接到 [sawyer.mongohq.com/ *** ] bc:java.net.NoRouteToHostException: No route to host at com.mongodb.DBPort._open(DBPort.java:228)在 com.mongodb.DBPort.go(DBPort.java:112) 在 com.mongodb.DBPort.go(DBPort.java:93)

cloudbees mongohq 在正在运行的应用程序中停止连接有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:18:10.183

听起来 Mongo 连接存在问题 - 很可能在 Mongo 端，因为我相信它们与 CloudBees 应用程序服务器一样位于 AWS 上。

*   检查您是否使用了 sawyer mongo 实例
*   检查问题是否围绕此中断开始 - [http://status.mongohq.com/services/sawyer/2013/1/8](http://status.mongohq.com/services/sawyer/2013/1/8)

# connection - 如何连接到 DNN 数据库？

> ID：14228228
> 
> 赞同：1
> 
> 时间：2013-01-09T04:22:40.327
> 
> 标签：connection, dotnetnuke, dotnetnuke-5

我有一个 Windows 窗体应用程序，它与 Web 服务通信，它仅使用 dotnetnuke dll .. Web 服务不是 DNN 站点，它只是引用了 DNN dll ..

使用该网络服务，我需要访问此 dotnetnuke dll 并使用 dnn 命令连接到数据库（使用该 dotnetnuke dll）

请帮助如何执行此操作..使用此 dotnetnuke dll 连接到该数据库的代码是什么。

# ios - CVOpenGL[ES]TextureCaches 与浮点格式不兼容吗？

> ID：14228230
> 
> 赞同：1
> 
> 时间：2013-01-09T04:22:55.647
> 
> 标签：ios, macos, opengl, opengl-es-2.0, core-video

在 OSX10.4/iOS5 及更高版本上，您可以使用 `CVOpenGL[ES]TextureCaches`.

您可以使用 a将您的纹理/FBO 操作翻译成 CoreVideo 的语言，而不是使用 上传纹理`glTexImage2D`并从帧缓冲区读取。`glReadPixels``CVOpenGL[ES]TextureCache``CVPixelBuffers`

这适用于字节（可能是短）大小的整数格式，但是，除了花哨的 YUV 像素格式之外，浮点数在[Core Video 的像素格式](http://developer.apple.com/library/mac/#qa/qa1501/_index.html)中的代表性明显不足。

这是否意味着我不能使用`GL_FLOAT`纹理和渲染目标`CVOpenGL[ES]TextureCaches`？

# concurrency - 以一致的顺序看到的并发商店

> ID：14228235
> 
> 赞同：2
> 
> 时间：2013-01-09T04:23:25.943
> 
> 标签：concurrency, x86, cpu-cache, smp, memory-barriers

英特尔[*架构软件开发人员手册，*](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html) 2012 年 8 月，第一卷。3A 节。8.2.2：

> 除了那些执行存储的处理器之外，任何两个存储都以一致的顺序被处理。

但可以这样吗？

我问的原因是：考虑一个具有超线程的双核 Intel i7 处理器。根据*手册的*卷。如图 1 所示，图 2-8，i7 的逻辑处理器 0 和 1 共享一个 L1/L2 缓存，但其逻辑处理器 2 和 3 共享一个不同的 L1/L2 缓存——而所有逻辑处理器共享一个 L3 缓存。假设逻辑处理器 0 和 2（不共享 L1/L2 高速缓存）几乎在同一时间写入相同的内存位置，并且目前写入的深度不超过 L2。逻辑处理器 1 和 3（它们是“执行存储的处理器以外的处理器”）不能看到“两个存储顺序不一致”吗？

为了实现一致性，逻辑处理器 0 和 2 是否必须发出 SFENCE 指令，而逻辑处理器 1 和 3 是否必须发出 LFENCE 指令？尽管如此，该*手册*似乎不这么认为，它对此事的看法并不仅仅是印刷错误。看起来是故意的。我很困惑。

**更新**

根据@Benoit 的回答，提出以下问题：因此，L1 和 L2 的唯一目的是加速负载。加速存储的是 L3。是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-06-26T00:16:53.747

英特尔 CPU（与所有普通 SMP 系统一样）使用[MESI](https://en.wikipedia.org/wiki/MESI_protocol) （一种变体）来确保缓存加载/存储的缓存一致性。即所有内核通过它们的缓存看到相同的内存视图。

核心只能在执行读取所有权 (RFO) 后写入缓存行，使该行处于独占状态（没有其他缓存具有可以满足负载的行的有效副本）。[相关：原子 RMW 操作通过在操作期间将其锁定在已修改状态来](https://stackoverflow.com/questions/39393850/can-num-be-atomic-for-int-num)防止其他内核对目标缓存行执行任何操作。

要测试这种重新排序，您需要另外两个线程，它们都读取*两个*存储（[以相反的顺序](https://stackoverflow.com/a/27846917/224132)）。 ***您提出的方案有一个核心（reader2）在*****另一个核心（reader1）读取 writer1 存储的同一行的新值之后****从内存（或 L3，或其自己的私有 L2/L1）读取旧值。这是不可能***的：要让 reader1 看到 writer1 的存储，writer1 必须已经完成了一个 RFO，该 RFO 使任何地方的缓存行的所有其他副本都无效。并且不允许直接从 DRAM 读取而不（有效地）窥探任何回写缓存。（[维基百科的 MESI 文章](https://en.wikipedia.org/wiki/MESI_protocol)有图表。）*

 ***当存储提交（从内核内部的存储缓冲区）到 L1d 缓存时，它同时对所有其他内核全局可见。** 在此之前，只有本地核心才能“看到”它（通过存储缓冲区的存储-> 加载转发）。

在数据从一个核心传播到另一个核心的唯一方法是通过全局缓存一致性域的系统上，MESI 缓存一致性单独保证存在单个全局存储顺序，所有线程都可以达成一致。x86 强大的内存排序规则使这种全局存储顺序成为程序顺序的某种交错，我们称之为 Total Store Order 内存模型。

x86 的强内存模型不允许 LoadLoad 重新排序，因此加载按程序顺序从缓存中获取数据，而读取线程中没有任何屏障指令。¹

在从相干缓存中获取数据之前，负载实际上会窥探本地存储缓冲区。 **这就是您引用的*一致顺序*规则排除了任一存储由执行负载的同一核心完成的情况的原因。**有关加载数据真正来自何处的更多信息， 请参阅[全局不可见加载说明。](https://stackoverflow.com/questions/50609934/globally-invisible-load-instructions)但是当加载地址不与任何最近的存储重叠时，我上面所说的适用：加载顺序是从共享的全局一致缓存域中采样的顺序。

* * *

一致的*顺序*规则是一个非常薄弱的​​要求。许多非 x86 ISA 并不能在纸面上保证这一点，但很少有实际的（非 x86）CPU 设计具有一种机制，通过该机制，一个内核可以在所有内核*全局*可见之前查看来自另一个内核的存储数据。IBM POWER with SMT 就是这样一个例子：[在不同线程中对不同位置的两次原子写入是否总是以相同的顺序被其他线程看到？](https://stackoverflow.com/questions/27807118/will-two-atomic-writes-to-different-locations-in-different-threads-always-be-see/50679223#50679223)解释了一个物理核心内的逻辑核心之间的转发如何导致它。（这与您提出的类似，但在存储缓冲区而不是 L2 中）。

具有超线程（或 AMD 在 Ryzen 中的 SMT）的 x86 微架构通过在一个物理内核上的逻辑内核之间静态分区存储缓冲区来满足这一要求。 [在一个带有 HT 的 Core 上执行的线程之间的数据交换将使用什么？](https://stackoverflow.com/questions/32979067/what-will-be-used-for-data-exchange-between-threads-are-executing-on-one-core-wi) **因此，即使在一个物理核心中，存储也必须提交到 L1d（并成为*全局*可见），然后另一个逻辑核心才能加载新数据。**

*不将一个逻辑核心中的已退休但未*提交的存储转发到同一物理核心上的其他逻辑核心可能更简单。

（x86 的 TSO 内存模型的其他要求，例如按程序顺序出现的加载和存储，更难。现代 x86 CPU 执行乱序，但使用内存顺序缓冲区来维持错觉，并将存储按程序顺序提交给 L1d。负载可以推测性地取值早于“应该”，然后再检查。这就是英特尔 CPU 具有“内存顺序错误推测”管道核弹的原因： [生产者-消费者共享的延迟和吞吐量成本是多少超兄弟姐妹与非超兄弟姐妹之间的记忆位置？](https://stackoverflow.com/questions/45602699/what-are-the-latency-and-throughput-costs-of-producer-consumer-sharing-of-a-memo#comment78210324_45610386)。）

**正如@BeeOnRope 指出的那样，HT 和保持没有 LoadLoad 重新排序的错觉之间存在*交互*：**通常，CPU 可以检测到另一个内核何时在负载实际读取缓存行之后但在架构上允许读取缓存行之前检测到它：加载端口可以跟踪该缓存行的失效。但是对于 HT，加载端口还必须窥探其他超线程提交到 L1d 缓存的存储，因为它们不会使行无效。（其他机制是可能的，但如果 CPU 设计人员想要“正常”负载的高性能，这是他们必须解决的问题。）

* * *

**脚注 1**：在弱排序 ISA 上，您将使用加载排序障碍来控制每个读取器中的 2 个加载从全局一致的缓存域中获取数据的顺序。

编写器线程每个只做一个存储，所以栅栏是没有意义的。因为所有核心共享一个一致的缓存域，所以栅栏只需要控制核心内的*本地*重新排序。每个核心中的存储缓冲区已经尝试尽快使存储在全局范围内可见（同时尊重 ISA 的排序规则），因此屏障只会让 CPU 在执行后续操作之前等待。

x86`lfence`基本上没有内存排序用例，`sfence`仅对 NT 存储有用。只有`mfence`当一个线程正在写东西然后读取另一个位置时，才对“正常”的东西有用。 [http://preshing.com/20120515/memory-reordering-caught-in-the-act/](http://preshing.com/20120515/memory-reordering-caught-in-the-act/)。因此它会阻止 StoreLoad 重新排序和跨屏障存储转发。

* * *

> 根据@Benoit 的回答，提出以下问题：因此，L1 和 L2 的唯一目的是加速负载。加速存储的是 L3。是对的吗？

不，L1d 和 L2 是回写式缓存： [英特尔酷睿 i7 处理器中使用了哪种缓存映射技术？](https://stackoverflow.com/questions/49092541/which-cache-mapping-technique-is-used-in-intel-core-i7-processor). 重复存储到同一行可以被 L1d 吸收。

但是 Intel 使用的是包容性的 L3 缓存，那么一个内核中的 L1d 怎么会有唯一的副本呢？L3 实际上是包含*标签*的，这就是 L3 标签作为窥探过滤器所需的全部内容（而不是向每个核心广播 RFO 请求）。脏行中的实际数据对于每个内核的内部缓存是私有的，但是 L3 知道哪个内核具有该行的当前数据（因此当另一个内核想要读取另一个内核在 Modified 中具有的行时，该向哪里发送请求状态）。干净的高速缓存行（处于共享状态）包含 L3 的数据，但写入高速缓存行不会直写到 L3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:00:45.510

我相信英特尔文档所说的是 x86 芯片的机制将确保其他处理器始终以一致的顺序看到写入。

因此，其他处理器在读取该内存位置时只会看到以下结果之一：

*   写入之前的值（即读取先于两次写入）

*   处理器 0 写入后的值（即好像处理器 2 先写入，然后处理器 0 覆盖）

*   处理器 2 写入后的值（即好像处理器 0 先写入然后处理器 2 覆盖）

处理器 1 无法看到处理器 0 写入后的值，但同时让处理器 3 看到处理器 2 写入后的值（反之亦然）。

请记住，由于允许处理器内重新排序（请参阅第 8.2.3.5 节），处理器的 0 和 2 可能会看到不同的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:45:53.893

哎呀，这是一个棘手的问题！但我会尝试...

> 写入不超过 L2

基本上这是不可能的，因为英特尔使用的是包容性缓存。写入 L1 的任何数据也将发生在 L2 和 L3 中，除非您通过 CR0/MTRR 禁用它们来防止缓存。

话虽如此，我猜有仲裁机制：处理器发出写入数据的请求，仲裁器从每个请求队列的未决请求中选择*授予哪个请求。*选择的请求被广播到窥探者，然后被缓存。我想它会防止竞争，强制执行除了执行请求的处理器之外的处理器看到的一致顺序。*

# .net - 打印对话框打印一张空纸

> ID：14228236
> 
> 赞同：0
> 
> 时间：2013-01-09T04:23:34.167
> 
> 标签：.net, vb.net, visual-studio-2010, printing

我正在使用`PrintDialog`和`PrintDocument`控件来打印表单。但是当我单击按钮时，它总是打印一张空纸。我正在使用以下代码：

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    PrintDialog1.Document = PrintDocument1
    Dim result As DialogResult = PrintDialog1.ShowDialog
    If (result = DialogResult.OK) Then
        PrintDocument1.Print()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:08:29.167

实际打印发生在 printdocument1.printpage 事件处理程序中。为此，您可以输出到 PrintPage 处理程序中参数 PrintPageEventArgs 的图形对象。

```
AddHandler PrintDocument1.PrintPage, AddressOf printaPage
PrintDocument1.Print()

...

Sub printaPage(ByVal sender As Object, ByVal e As PrintPageEventArgs)
' output to e.Graphics here
... 
```

# forms - Scala Play 2.1RC——表单和bindFromRequest

> ID：14228243
> 
> 赞同：-2
> 
> 时间：2013-01-09T04:24:56.413
> 
> 标签：forms, scala, authentication, playframework-2.1

我现在有一个方法可以验证用户名和密码并为会话返回一个唯一的 Ticket Option[String]：User.authenticate(username, password)。

我正在尝试从 zentask 示例开始工作。我希望能够验证用户名和密码，然后将票证放入一个名为 sessiontoken 的会话参数中。通过我现在正在做的事情，我最终得到了会话变量 sessiontoken 中的用户名而不是票证值。

```
val loginForm = Form(
    tuple(
      "username" -> text,
      "password" -> text
    ) verifying ("Invalid username or password", result => result match {
      case (username, password) => 
         User.authenticate(username, password).isDefined
    })
  )

def authenticate = Action { implicit request =>
    loginForm.bindFromRequest.fold(
      formWithErrors => BadRequest(html.login(formWithErrors)),
      token => Redirect(routes.Application.index).withSession("sessiontoken" -> token._1)
    )
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:56:25.477

您的问题是`loginForm`您拥有的是返回一个带有用户/密码的元组。您正在执行身份验证以进行验证，但您没有映射到令牌。

如果您希望表单返回令牌，您可能希望使用`mapping`而不是。`tuple`

# php - 来自 php jquery 的带有 html 的灯箱

> ID：14228244
> 
> 赞同：0
> 
> 时间：2013-01-09T04:24:56.910
> 
> 标签：php, jquery, html, lightbox

我正在使用 jQuery 制作一个返回 html 的 POST，我如何在我的灯箱中使用这个 html？现在我正在使用这个：[http](http://buckwilson.me/lightboxme/) ://buckwilson.me/lightboxme/但我可以使用任何一个。

php:

```
 $string = "<p> Number:".$num."</p>";
    $string .= "<p>Date:2012  Number: 123</p>";
    $string .= "<table>";
    $string .= "<thead><tr><th>Category</th><th>Status</th><th></th></tr></thead>";
    $string .= "<tbody>";

    foreach ($categories as $cat){
        $string .= "<tr>";
        $string .=      "<td>$cat[C]</td>";
        $string .=      "<td>$cat[S]</td>";
        $string .=      "<td><a href='#'><img src='/images/1.png' /></a></td>";
        $string .= "</tr>";
    }

    $string .= "</tbody>";
    $string .= "</table>";
echo json_encode($string); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:14:00.410

1.  首先，您应该验证相同的 html 是否可以很好地与 buckwilsons lightbox me
2.  然后确保从您的 ajax 帖子返回的数据是相同的
3.  将数据放在您想要的页面上，例如“
4.  $('#my_new_html').html(数据); //ajax post返回的html数据
5.  在您的成功函数中调用 $('#my_new_html').lightbox_me(); 在新元素上调用 buckwilsons 灯箱

希望有帮助！否则将需要从您那里查看更多代码

# php - PHP 错误，意外结束。函数.php 文件

> ID：14228247
> 
> 赞同：0
> 
> 时间：2013-01-09T04:25:11.590
> 
> 标签：php, html, function

我不断收到某种语法错误。它说：

> [2013 年 1 月 9 日 04:17:17 UTC] PHP 解析错误：第 730 行的 functions.php 中的语法错误，意外“，”

我已经删除了“，”，但随后我收到另一个错误，上面写着意外的“）”，然后是意外的“;）”，最后是意外的“$end”

有人知道我没有做什么吗？

```
/*----------------------------------------/
            POST LIST THUMBS
/----------------------------------------*/
if ( !function_exists('fb_AddThumbColumn') && function_exists('add_theme_support') ) {

    function fb_AddThumbColumn($cols) {
        $cols['thumbnail'] = __('Thumbnail');
        return $cols;
    }
    function fb_AddThumbValue($column_name, $post_id) {
        $width = (int) 45;
        $height = (int) 45;
        if ( 'thumbnail' == $column_name ) {
            // thumbnail of WP 2.9
            $thumbnail_id = get_post_meta( $post_id, '_thumbnail_id', true );
            // image from gallery
            $attachments = get_children( array('post_parent' => $post_id, 'post_type' => 'attachment', 'post_mime_type' => 'image') );
            if ($thumbnail_id)
                $thumb = wp_get_attachment_image( $thumbnail_id, array($width, $height), true );
            elseif ($attachments) {
                foreach ( $attachments as $attachment_id => $attachment ) {
                    $thumb = wp_get_attachment_image( $attachment_id, array($width, $height), true );
                }
            }
            if ( isset($thumb) && $thumb ) {
                echo $thumb;
            } else {
                echo __('None');
            }
        }
    }
    // for posts
    add_filter( 'manage_posts_columns', 'fb_AddThumbColumn' );
    add_action( 'manage_posts_custom_column', 'fb_AddThumbValue', 10, 2 );
    // for pages
    //add_filter( 'manage_pages_columns', 'fb_AddThumbColumn' );
    //add_action( 'manage_pages_custom_column', 'fb_AddThumbValue', 10, 2 );
}, get_stylesheet_directory_uri() . );

//------ SIDEBARS ------//
//require_once(LN_FRAMEWORK . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:16:56.847

您的问题出在这一行：

```
}, get_stylesheet_directory_uri() . ); 
```

整条线都是错误的。在几个方面。看起来这是一段不小心粘贴到错误位置的代码。

你知道它应该做什么吗？如果没有，请放下整条线，然后离开`}`那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:27:51.220

你可能错过了`}`某个地方。确保您使用的是带有语法高亮和括号匹配的代码编辑器，并使用它来检查您的括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:01:28.610

//-------- 侧边栏 ------//

`require_once(LN_FRAMEWORK)`在您的代码中您缺少`)`。( 和 ) <-- 他们需要匹配

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T05:02:38.533

```
require_once(LN_FRAMEWORK . 
```

应该

```
require_once(LN_FRAMEWORK); 
```

# c++ - CURL 在 /usr/include 但仍然不会被 g++ 自动找到

> ID：14228248
> 
> 赞同：0
> 
> 时间：2013-01-09T04:25:20.877
> 
> 标签：c++, curl, g++

每次我想在我的一个 C++ 程序中使用 CURL 时，我都必须将标志`-lcurl`作为标志添加到`g++`. 这在使用 Eclipse 时尤其令人讨厌。如果`/usr/include/curl/curl.h`存在，我需要做什么才能让 CURL 始终位于包含路径中`g++`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:28:00.117

**tl;博士**：你必须添加标志。

* * *

链接器需要 libcurl，而不是编译器。编译器需要头文件；链接器需要库。

为了简化一些事情，头文件告诉编译器声明将在稍后定义。libcurl 是真正定义它们的东西。

链接器不会猜测并检查要链接的内容（这样做是一个可怕的想法）。您必须明确告诉它要链接的内容（默认库除外）。特别是，链接器必须知道如何使用 libcurl 来查找 curl.h 布局的声明。如果没有 libcurl，链接器会缺少函数，因此无法生成完整的二进制文件。

我不熟悉 Eclipse，但我几乎肯定它有一个选项，您可以在其中指定其他库。是的，您必须在每个项目中执行一次，但这不应该是主要开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:31:32.027

尝试添加卷曲路径

> 属性 -> C/C++ 常规 -> 路径和符号：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T04:33:34.133

这就是链接在 C 和 C++ 中的工作方式。

1.  *编译*程序时，包含头文件`/usr/include/curl/curl.h`. 编译器完成这部分工作。头文件包含库接口的所有定义。

2.  当您*链接*程序时，您将链接到 library`/usr/lib/libcurl.so`或任何它的名字。链接器完成这部分工作。该库包含可加载（用于动态库）或可链接（用于静态库）格式的实现。

C 和 C++ 语言无法指定应该链接哪些库，因此您必须将其传递`-lcurl`给链接器。这就是它的方式。

有一些 C 和 C++ 扩展允许您在源代码中编码库依赖项，例如，`#pragma comment`使用 MSC，但据我所知，您的典型 ELF 工具链不支持它们。

**注意：**实际上，该`-lcurl`标志不是用于`g++`，而是用于链接器，`ld`。当您传递`-lcurl`到 时`g++`，`g++`将其传递给链接器。

# actionscript-3 - 如何在文本字段中添加影片剪辑

> ID：14228250
> 
> 赞同：1
> 
> 时间：2013-01-09T04:25:29.313
> 
> 标签：actionscript-3, apache-flex, textfield, movieclip, addchild

我想将影片剪辑添加到文本字段。目标是能够滚动影片剪辑，因为 uiscrollbar 仅适用于文本字段，我认为滚动影片剪辑的解决方案是将其放在文本字段中。

我试过类似的东西：

```
myText.addChild(myClip); 
```

但失败并出现错误：1061：通过静态类型 flash.text:TextField 的引用调用可能未定义的方法 addChild。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:44:07.523

问题是 a`TextField`不是 a `DisplayObjectContainer`，所以你不能添加孩子。

（好消息是您可以通过 Google 找到许多替代解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:51:23.257

您将无法将其添加到文本字段中，而且我不确定您所说的“滚动影片剪辑”是什么意思，但假设您有一个大于您要显示的区域的影片剪辑，有些东西像这样可能有效：

```
<s:Group>
    <s:Scroller>
        <mx:SWFLoader source="@Embed(source='movieclip.swf')"/>
    </s:Scroller>
</s:Group> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T19:27:53.727

对不起，如果这有点像线程插孔，但我最近遇到了需要这种功能的情况。虽然我确信你不再需要这个问题的答案，但我希望我提出的解决方案能对其他人有所帮助。

**天哪，为什么会有人这样做？！**

在我的特殊情况下，我有一个*非常长的*文本字段需要滚动。根据我的经验，在处理*极长*的文本字段时，通过垂直移动影片剪辑进行滚动是不可靠的，这需要我使用 Adob​​e/Flash `uiscrollbar`-esk 方法来调整`scrollV`文本字段的大小。

由于需要从库中提取的内嵌图像（而不是外部源）以及围绕文本部分的黑框边框，这两者都需要与文本。

*简而言之，对于一个完全独立的 swf 和在情有可原的情况下（如制药横幅），可能只需要做这样的事情。*

**从库中插入图像：**

为此，您需要从库中的图像创建一个影片剪辑并将该影片剪辑导出到 Actionscript。然后，在您的代码中，添加如下内容：

```
//This is a string from your textfield that you will replace with an image
var matchForImageSplit:String = 'IMAGE 1 GOES HERE';

//This is the code to replace the above string
//Here, "Image1" is the class name of the exported MovieClip
var imageToAdd:String = '<img src="Image1" />';
my_text.htmlText = my_text.htmlText.split(matchForImageSplit).join(imageToAdd); 
```

**在 text 周围添加黑框边框**：

这有点棘手。我需要做的是创建一个带有我需要大小的边框的 MovieClip 并为其命名。然后我把它放在它应该去的文本后面，并将所有这些都包含在一个`parent_mc`电影剪辑中。

然后我必须对框进行编码以随滚动一起移动。以下是我的项目的具体内容，但这是它的要点：

```
//THIS CODE IS NON-FUNCTIONAL AND SHOULD ONLY BE USED AS A REFERENCE

//Redundant - just making the example more clear.
var my_text:TextField = parent_mc.my_text; 
var borderBox:Sprite = parent_mc.borderBox;

//Vars for calculating position and movement
var borderBoxStartY:Number = borderBox.y;
var incrementRate:Number = my_text.textHeight/my_text.numLines;
var sPos:Number;
var top:Number = dragger.y;
var bottom:Number = (dragger.y + track.height) - dragger.height;
var range:Number = bottom - top;
var ctrl:Number = parent_mc.y; //"parent_mc" is the parent MC that contains the textField and borderBox

function dragScroll():void {
  ratio = my_text.maxScrollV/range;
  sPos = (dragger.y * ratio) - ctrl;  

  my_text.scrollV = Math.ceil(sPos);
  borderBox.y = ((borderBoxStartY + incrementRate) - (my_text.scrollV * incrementRate));
} 
```

**在尝试所有这些之前需要注意的一个警告是，当使用 时`scrollV`，文本会逐行移动，因此不会平滑滚动（就像基于位置的滚动一样）。这可能导致滚动看起来“生涩”。**

**编辑：** 我还应该注意，这都是自定义编程的，实际上并没有使用`scrollPane`/`uiscrollbar`组件，但行为方式相同。

# javascript - 使用 Socket.IO 在现场使用 Greasemonkey 添加警报

> ID：14228251
> 
> 赞同：1
> 
> 时间：2013-01-09T04:25:36.193
> 
> 标签：javascript, socket.io, greasemonkey

我想创建一个 Greasemonkey 脚本，当通过其 Socket.IO 数据传输从站点接收到特定消息时，该脚本将弹出警报。有问题的网站是[bittrivia.com](http://bittrivia.com/)并使用 Firefox Web 控制台玩弄我找到了我需要调整的对象，但我没有得到预期的结果。我想让它在问题更新时提醒它（并且因为免费游戏有限制，一个简单的计时器是不够的），所以我可以在问题之间做一些工作。这是我到目前为止所拥有的，但我从未看到任何打印到控制台的消息。

```
// ==UserScript==
// @name    BitTrivia Question Alerts
// @include https://www.bittrivia.com/*
// @require http://userscripts.org/scripts/source/100842.user.js
// @run-at  window-load
// ==/UserScript==

contentEval(function() {
    // Not sure if it's a timing issue, so try waiting for it to become available.
    function whenAvailable(callback) {
        window.setTimeout(function() {
            if (undefined === io.sockets)
                whenAvailable(callback);
            else  callback();
        }, 100);
    }
    whenAvailable(main);

    function main() {
        var socket = io.sockets['https://s1.bittrivia.com:80'];
        console.log(socket);
        socket.on('message', onMessage);
    }

    function onMessage (packet) {
        console.log(packet);
        var c = BISON.decode(packet);
        console.log(JSON.stringify(c));
    }
}); 
```

# c# - 如何在 Windows 8 的 xaml 应用程序中添加动态控件

> ID：14228254
> 
> 赞同：0
> 
> 时间：2013-01-09T04:25:58.720
> 
> 标签：c#, xaml, grid

我正在制作一个网格应用程序，并在 ItemsDetaiPage.xaml

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="App6.ItemDetailPage"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
IsTabStop="false"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App6"
xmlns:data="using:App6.Data"
xmlns:common="using:App6.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Page.Resources>

    <!-- Collection of items displayed by this page -->
    <CollectionViewSource
        x:Name="itemsViewSource"
        Source="{Binding Items}"
        d:Source="{Binding AllGroups[0].Items, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/>
</Page.Resources>

<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout
-->
<Grid
    Style="{StaticResource LayoutRootStyle}"
    DataContext="{Binding Group}"
    d:DataContext="{Binding AllGroups[0], Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}">

    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Back button and page title -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock x:Name="pageTitle" Text="{Binding Title}" Style="{StaticResource PageHeaderTextStyle}" Grid.Column="1"/>
    </Grid>

    <!--
        The remainder of the page is one large FlipView that displays details for
        one item at a time, allowing the user to flip through all items in the chosen
        group
    -->
    <FlipView
        x:Name="flipView"
        AutomationProperties.AutomationId="ItemsFlipView"
        AutomationProperties.Name="Item Details"
        TabIndex="1"
        Grid.Row="1"
        Margin="0,-3,0,0"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}">

        <FlipView.ItemTemplate>
            <DataTemplate>

                <!--
                    UserControl chosen as the templated item because it supports visual state management
                    Loaded/unloaded events explicitly subscribe to view state updates from the page
                -->
                <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                    <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">

                        <!-- Content is allowed to flow across as many columns as needed -->
                        <Grid Margin="120,0,20,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="800"></ColumnDefinition>
                                <ColumnDefinition Width="40"></ColumnDefinition>
                                <ColumnDefinition Width="400"></ColumnDefinition>
                                <ColumnDefinition Width="40"></ColumnDefinition>
                                <ColumnDefinition Width="200"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Vertical" Grid.Column="0">
                                <TextBlock FontSize="26.667" FontWeight="Light" Text="{Binding Title}" TextWrapping="Wrap"/>
                                <TextBlock FontSize="26.667" FontWeight="Light" Text="{Binding Date}" TextWrapping="Wrap"/>
                                <WebView x:Name="webView" Width="800" Height="500"/>
                                <StackPanel x:Name="spButton" Orientation="Horizontal">

                                </StackPanel>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Grid.Column="2">
                                <TextBlock FontSize="26.667" FontWeight="Light" Text="{Binding Description}" TextWrapping="Wrap"/>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Grid.Column="4">
                                <TextBlock FontSize="26.667" FontWeight="Light" Text="{Binding Tag}" TextWrapping="Wrap"/>
                            </StackPanel>
                        </Grid>
                        <VisualStateManager.VisualStateGroups>

                            <!-- Visual states reflect the application's view state inside the FlipView -->
                            <VisualStateGroup x:Name="ApplicationViewStates">
                                <VisualState x:Name="FullScreenLandscape"/>
                                <VisualState x:Name="Filled"/>

                                <!-- Respect the narrower 100-pixel margin convention for portrait -->
                                <VisualState x:Name="FullScreenPortrait">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="richTextColumns" Storyboard.TargetProperty="Margin">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="97,0,87,57"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="image" Storyboard.TargetProperty="MaxHeight">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="400"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <!-- When snapped, the content is reformatted and scrolls vertically -->
                                <VisualState x:Name="Snapped">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="richTextColumns" Storyboard.TargetProperty="Margin">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="17,0,17,57"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="scrollViewer" Storyboard.TargetProperty="Style">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource VerticalScrollViewerStyle}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="richTextBlock" Storyboard.TargetProperty="Width">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="280"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="image" Storyboard.TargetProperty="MaxHeight">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="160"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ScrollViewer>
                </UserControl>
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView>

    <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The back button respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <!-- The back button and title have different styles when snapped -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

我的应用程序合成剪辑，每个项目都是一个游戏，每个游戏都有视图，在 StackPanel spButton 我想添加按钮作为播放视频的链接。如何在文件 .cs 中添加动态按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:42:50.963

这是通过 调用控件方法的典型案例`View Model`。

为此，您需要执行以下步骤：
1\. 定义`INavigatable`公开`Navigate`事件
的接口 2\. 在`ViewModel`.
3.在后面的View Code中，查看DataContext是否实现了INavigatable接口。
4.如果第3步为真，在后面的视图代码中订阅`View Model`事件。

例子。

步骤1：

```
class NavigateEventArgs:EventArgs
{
    public string Target {get;set;}
}

public delegate void NavigateEventHandler (object sender, NavigateEventArgs nargs);

public interface INavigatable
{
    event NavigateEventHandler Navigate;
} 
```

第2步：

```
class MyViewModel : INavigatable
{
    public event NavigateEventHandler Navigate;

    MyViewModel()
    {
        NavigateCommand = new DelegateCommand(() => 
        {
            RaiseNavigateEvent();
        }) ;
    }

    void RaiseNavigateEvent()
    {
        var temp = Navigate;
        if (temp != null)
        {
            temp(new NavigateEventArgs{Target = Link});
        }
    }

    public string Link {get;set;} // this should be bound to Button.Content (preferably in XAML)
    public ICommand NavigateCommand{ get;set;}
} 
```

步骤 3/4：

```
public class MyView : Window
{
    public MyView()
    {
        ...
        Load += (s,e)=> 
        {
            if (this.DataContext is INavigatable)
            {
                ((INavigatable)(this.DataContext)).Navigate += (s1,e1) => webView.Navigate(e1.Target);
            }
        }

    }
} 
```

作为一项改进，订阅/取消订阅事件中的导航事件`DataContextChanged`而不是`Load`事件

# java - 打印 n 对括号的所有有效组合

> ID：14228255
> 
> 赞同：1
> 
> 时间：2013-01-09T04:26:11.857
> 
> 标签：java

Left：只要我们没有用完所有的左括号，我们总是可以插入一个左括号。右：只要不会导致语法错误，我们可以插入右括号。我们什么时候会收到语法错误

```
public class parentheses {

    public static void printPar(int l, int r, char[] str, int count){  //Use recursion method to 
                                                                       // print the parentheses
        if(l == 0 && r == 0){     //if there are no parentheses available, print them out  
            System.out.println(str); //Print out the parentheses
        }

        else{
            if(l > 0){    // try a left paren, if there are some available
                str[count] = '(';
                printPar(l - 1, r, str, count + 1); //Recursion
            }
            if(r > 0){   // try a right paren, if there are some available
                str[count] = ')';
                printPar(l, r - 1, str, count + 1);  //Recursion
            }
        }
    }

    public static void printPar(int count){
        char[] str = new char[count*2];   // Create a char array to store the parentheses
        printPar(count,count,str,0);      //call the printPar method, the parameters are the left,
                                            //the right parentheses, the array to store the 
                                            //parenthese, and the counter
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        printPar(2);  //

    }

} 
```

结果应该是：

```
(())
()() 
```

但我得到的是：

```
(())
()()
())(
)(()
)()(
))(( 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T10:17:50.767

```
import java.util.ArrayList;
import java.util.List;

public class parentheses {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.println(prent(2));
    }

    public static List<String> prent(int n) {
        List<String> l = new ArrayList<String>();
        if(n==1) {
            l.add("()");
            return l;
        }
        for(String st : prent(n-1)) {
            l.add(st+"()");
            l.add("("+st+")");
            if(!(st+"()").equals("()"+st)) {
                l.add("()"+st);
            }
        }
        return l;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:53:12.433

试试这个代码。测试和工作正常。

```
 public class ParanthesisCombination {
     public static void main(String[] args) {
          printParenthesis(3);
     }
     static void printParenthesis(int n){
        printParenthesis("",n,n);       
     }

     static void printParenthesis(String s,int open,int close){
         if(open>close)
            return;
         if(open == 0 && close == 0){
             System.out.println(s);
             return;
         }
         if(open < 0 || close<0)
             return;

         printParenthesis(s + '{',open-1,close);
         printParenthesis(s + '}',open,close-1);
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T04:55:28.063

```
 private static void printA(int open, int close, int max, String out) {
        if(open==close && close==max){
            st.add(out);
            System.out.println(out);
        } else {
            if(open+1<=max){
                printA(open+1, close, max, out+"(");
            }
            if(open>close && close+1<=max){
                printA(open, close+1, max, out+")");
            }
        }
    }
    public static  ArrayList<String>st = new ArrayList<String>();
    public static void main(String[] args) {
        //2 is maximum open/close parenthese
        //i save the output in st(arraylist), 
        printA(0,0,2,"");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T00:19:16.983

```
public class parentheses {
    public static void printPar(int l, int r, char[] str, int count){  //Use recursion method to 
                                                               // print the parentheses

    if(l == 0 && r == 0){     //if there are no parentheses available, print them out  
        System.out.println(str); //Print out the parentheses
    }

    else{
        if(l > 0){    // try a left paren, if there are some available
            str[count] = '(';
            printPar(l - 1, r, str, count + 1); //Recursion
        }
        // Add constraint that a parenthesis is open before inserting a closing paranthesis
        // hence, add l < r - meaning one 'l' is printed before going for an 'r'
        if(r > 0 && l < r){   // try a right paren, if there are some available
            str[count] = ')';
            printPar(l, r - 1, str, count + 1);  //Recursion
        }
    }
}

    public static void printPar(int count){
        char[] str = new char[count*2];   // Create a char array to store the parentheses
        printPar(count,count,str,0);      //call the printPar method, the parameters are the left,
                                    //the right parentheses, the array to store the 
                                    //parenthese, and the counter
    }
    public static void main(String[] args) {
        printPar(2);  //
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T04:53:44.647

我认为问题在于，在您的代码的任何部分中，您都没有强制执行“*无 sintax 错误*”部分。

您应该更改`if(r > 0){...}`for`if(r > l){...}`以执行该规则；如果没有至少 1 个左括号仍然“打开”，则不应打印右括号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-03T02:25:57.043

让我们假设给定的总对 - 3 保持有效，您只需要在开始时使用左大括号，在结束时需要一个右大括号，这意味着（2 对的组合）。

所以2对中的总有效+无效组合= 3 * 2 = 6..这些没有重复..认为'（'是0，'）'是1。

0000 1000 0100 **1100** 0010 **1010 0110** 1110 0001 **1001 0101** 1101 **0011** 1011 0111 1111

只能有 6 种可能的组合具有 2 个 0 和 2 个 1 .. 因此 2 对总组合 = 6 因此 3 对总有效组合 = 6

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-29T15:55:01.590

```
public class parentheses {
    public static void printPar(int l, int r, char[] str, int count){
          if(i<0 || r<l) return;
          ...
    }
} 
```

你只是失去了结束条件。希望这能有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-30T07:27:00.227

```
public class ValidParenthesisCombi {
    public static void main(String[] args) {
        final int noOfBraces = 3;
        print(noOfBraces);
    }

    public static void print(int n){
        print("",n,n);
    }
    public static void print( String s, int open, int close){           
        if(open > close){
            return;
        }
        if((open==0)&&(close==0)){
            System.out.println(s);
        }else{
            if(open > 0){
                print(s+"{",open-1, close);
            }if(close > 0){
                print(s+"}",open, close-1);
            }
        }
    }
} 
```

# mysql - MYSQL 查询忽略删除查询中的空值

> ID：14228271
> 
> 赞同：1
> 
> 时间：2013-01-09T04:27:39.290
> 
> 标签：mysql

我有两张桌子

**带有列的文章**下载轨道 - id、articleid、createdtime、modifiedtime

**带有列的文章**- id、articlename、articleURL、createdtime、modifiedtime

articlesdownloadtrack 中的某些条目，即**articlesdownloadtrack.articleid**在文章中不可用（迁移过程中丢失）。我想删除这些记录。

我正在使用查询

```
delete from articlesdownloadtrack where articleid not in(select id from articles); 
```

但是我必须添加一个约束，只删除那些articleid不为null的记录，因为在articlesdownloadtrack中，有一些articleid为NULL的记录，执行此查询时不应该删除这些记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:34:31.647

正如提到的@njk，试试这个：

```
 delete 
     from articlesdownloadtrack 
 where 
    (
     articleid IS NOT NULL AND articleid not in(select id from articles)
    ) 
```

# c++ - 使用指向类的指针调用成员函数时获取 System.AccessViolationException

> ID：14228278
> 
> 赞同：0
> 
> 时间：2013-01-09T04:28:12.817
> 
> 标签：c++, design-patterns, inheritance, protocols, dereference

```
using namespace std;

class Layer
{
protected:
    Layer *lower;
    Layer *upper;
public:
    Layer(Layer *lo,Layer *up):lower(lo),upper(up)
    {}
    virtual void send()=0;
    virtual void receive()=0;
};
class Physical_Layer:public Layer
{
public:
    Physical_Layer(Layer *p):Layer(NULL,p)
    {
        cout<<"Physical_Layer constructed"<<endl;
    }
    virtual void send()
    {
        cout<<"Data send from Physical_Layer"<<endl;
        receive();
    }
    virtual void receive()
    {
        cout<<"Physical_Layer calling receive of DataLink_Layer"<<endl;
        upper->receive();
    }
};
class DataLink_Layer:public Layer
{
public:
    DataLink_Layer(Layer *p):Layer(new Physical_Layer(this),p)
    {
        cout<<"DataLink_Layer Constructed"<<endl;
        lower->send();
    }
    virtual void send()
    {
        cout<<"Data send from DataLink_Layer"<<endl;
        lower->send();
    }
    virtual void receive()
    {
        cout<<"DataLink_Layer calling receive of Application_Layer"<<endl;
        cout<<typeid(upper).name()<<endl;

        upper->receive();

    }
};
class Application_Layer:public Layer
{
public:
    Application_Layer():Layer(new DataLink_Layer(this),NULL)
    {
        cout<<"Application_Layer Constructed"<<endl;
        send();
    }
    virtual void send()
    {
        cout<<"Sending data from Application_Layer"<<endl;
        lower->send();
    }
    virtual void receive()
    {
        cout<<"Receiving data at Application_Layer"<<endl;
    }
};

int main()
{
    Layer *l=new Application_Layer();
} 
```

我试图使用协议设计模式来模拟三层协议栈。但是，在取消引用 DataLink_Layer 接收中的上层->接收时，我得到了一个运行时异常：System.AccessViolationException。为什么我会得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:51:09.397

的构造函数试图在构建基类之前`DataLink_Layer`回调到`Application_Layer`via a （此时您仍在评估）。`Layer*``Layer``Application_Layer``new DataLink_Layer(this)`

通过简单地调用构造函数`upper->receive()`，您可以更清楚地看到这一点。`DataLink_Layer`

此[常见问题解答](http://www.parashift.com/c++-faq/using-this-in-ctors.html)解释了有关`this`在构造函数中使用的更多信息。

这个更简单的例子可能更清楚地说明了这个问题：

```
struct C;
struct A
{
    A(C* c) {};
    virtual void Foo() = 0;
};

struct C
{
    C(A* a)
    {
        a->Foo();
    }
};

struct B : public A
{
    B() : A(new C(this)) {}
    void Foo() {}
};

int main()
{
    B b;
} 
```

通常，您不应该使用构造函数对部分构造的对象执行复杂的调用堆栈。只需在构造后显式调用`send()`or`receive()`函数即可。

# php - 在服务器中的 php 错误中重新调整图像大小

> ID：14228279
> 
> 赞同：0
> 
> 时间：2013-01-09T04:28:23.623
> 
> 标签：php, cakephp

我有一个用于在 php 中重新调整图像大小的代码......它在本地机器上运行良好并正确分割......图像在所有 4 种尺寸中都是可见的......但是，当我在服务器中使用它时......图像大小是重新调整大小......原始图像可见......调整大小的图像不可见......带有黑色......解决方案是什么......这是我使用的代码......

主文件

```
<?php
if(isset($_POST['submit']))
{
$uploaddir = 'uploads/';
$file = basename($_FILES['uploadedfile']['name']);
$uploadfile = $uploaddir . $file;
move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $uploadfile);
include ("thumb.php");
$target=$_FILES['uploadedfile']['name'];
$new='uploads/'."thumb_".$target;
$type=$_FILES['uploadedfile']['type'];
$w=90;
$h=90;
resize($target,$new,$w,$h,$type);
include ("medium.php");
$new1='uploads/'."middle_".$target;
$type1=$_FILES['uploadedfile']['type'];
$w1=400;
$h1=400;
resizee($target,$new1,$w1,$h1,$type1);
include ("big.php");
$new2='uploads/'."big_".$target;
$type2=$_FILES['uploadedfile']['type'];
$w2=900;
$h2=900;
resizeee($target,$new2,$w2,$h2,$type2);
echo "thumb_".$target."<br>";
echo "middle_".$target."<br>";
echo "big_".$target."<br>";
}
?>

<html>
<body>
<form action="" method="post" enctype="multipart/form-data">
<input type="file" name="uploadedfile">
<input type="submit" name="submit">
</form>
</body>
</html> 
```

拇指.php

```
<?php
function resize($target,$new,$w,$h,$type)
{
    echo $target;
    list($wo,$ho)=getimagesize('uploads/'.$target);
    if($type=="image/jpeg")
    {
        $m=imagecreatefromjpeg('uploads/'.$target);
    }
    elseif($type=="image/gif")
    {
        $m=imagecreatefromgif('uploads/'.$target);
    }
    elseif($type=="image/png")
    {
        $m=imagecreatefrompng('uploads/'.$target);
    }
    $change=imagecreatetruecolor($w,$h);
    imagecopyresampled($change,$m,0,0,0,0,$w,$h,$wo,$ho); 
    imagejpeg($change,$new,90);
}
?> 
```

中.php

```
<?php
function resizee($target,$new1,$w1,$h1,$type)
{
    list($wo1,$ho1)=getimagesize('uploads/'.$target);
    if($type=="image/jpeg")
    {
        $m1=imagecreatefromjpeg('uploads/'.$target);
    }
    elseif($type=="image/gif")
    {
        $m1=imagecreatefromgif('uploads/'.$target);
    }
    elseif($type=="image/png")
    {
        $m1=imagecreatefrompng('uploads/'.$target);
    }
    $change1=imagecreatetruecolor($w1,$h1);
    imagecopyresampled($change1,$m1,0,0,0,0,$w1,$h1,$wo1,$ho1); 
    imagejpeg($change1,$new1,500);
}
?> 
```

大的.php

```
<?php
function resizeee($target,$new2,$w2,$h2,$type)
{
    list($wo2,$ho2)=getimagesize('uploads/'.$target);
    if($type=="image/jpeg")
    {
        $m2=imagecreatefromjpeg('uploads/'.$target);
    }
    elseif($type=="image/gif")
    {
        $m2=imagecreatefromgif('uploads/'.$target);
    }
    elseif($type=="image/png")
    {
        $m2=imagecreatefrompng('uploads/'.$target);
    }
    $change2=imagecreatetruecolor($w2,$h2);
    imagecopyresampled($change2,$m2,0,0,0,0,$w2,$h2,$wo2,$ho2); 
    imagejpeg($change2,$new2,900);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:32:33.227

您可能需要检查文件/目录的权限，以确保它们可以被您的 PHP 脚本读写。

# matlab - 使用 linkprop 旋转两个图像

> ID：14228280
> 
> 赞同：1
> 
> 时间：2013-01-09T04:28:25.650
> 
> 标签：matlab, rotation

我想通过使用 linkprop 链接它们来旋转两个图像（handles.axes6 和handles.axes7）。但我不想使用“CameraPosition”属性来链接它们。有没有其他方法可以链接它们？

# c - 指向 C 中的数组赋值的指针

> ID：14228281
> 
> 赞同：1
> 
> 时间：2013-01-09T04:28:33.183
> 
> 标签：c, pointers

我在尝试将一个指向数组的指针分配给另一个指向数组的指针时遇到问题，请你告诉我下面代码中的问题在哪里：

```
void sort_strlen(char (*pt)[81]){

  char (*temp)[81];
  int i, j;

  for(i = 0; i < 10 && *(pt + i) != NULL; i++)
    for(j = i + 1; j < 10 && *(pt + j) != NULL; j++)
     if(strlen(*(pt + i)) < strlen(*(pt + j))){
       temp = *(pt + i);
       *(pt + i) = *(pt + j);
       *(pt + j) = temp;
     }

  for(i = 0; i < 10 && *(pt + i) != NULL; i++)
    puts(*(pt + i)); 

} 
```

编译到此函数时，GCC 返回“分配不兼容的类型”错误。问题一定很明显，但我只是一个新手，我自己找不到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:34:39.670

这是导致错误的行吗？看起来像。（你应该在你的问题中指出。）

```
*(pt + j) = temp; 
```

`pt`是类型`char (*pt)[81]`并且`temp`是相同类型。`pt`但是当你这样做时你取消引用`*(pt + j)`。（`*`取消引用指针，而是引用指针指向的变量。）

结果，`*(pt + j)`是类型`char[81]`。这就是为什么分配`temp`给它是错误的。

如果您知道自己在做什么，则可以通过类型转换来解决这个问题。但看起来这不是你所期望的，所以我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:23:39.177

如果我们使用下标符号而不是`*(pt+i)`.

```
void sort_strlen(char (*pt)[81]){

  char (*temp)[81];
  int i, j;

  for(i = 0; i < 10 && pt[i] != NULL; i++)
    for(j = i + 1; j < 10 && pt[j] != NULL; j++)
     if(strlen(pt[i]) < strlen(pt[j])){
       temp = pt[i];
       pt[i] = pt[j];
       pt[j] = temp;
     }

  for(i = 0; i < 10 && pt[i] != NULL; i++)
    puts(pt[i]); 

} 
```

因此，当您尝试交换`pt[i]`and`pt[j]`时，首先尝试将 a `char*`（在`char[81]` `pt[i]`此处自动转换为）分配给行`char(*)[81]`中的a `temp = pt[i];`。

类型不兼容在这里应该很清楚。但通常，这只是一个警告并且“按预期工作”，因为`pt[i]`它被转换为该字符串中第一个字节的地址，这也是数组的地址`pt[i]`。`&pt[i]`如果通过分配或调整右侧的类型，警告将消失`pt + i`。

错误在下一行。在该`pt[i] = pt[j];`行中，您尝试将 a 分配`char*`给 a `char[81]`，在该`pt[j] = temp;`行中，您尝试将 a 分配`char(*)[81]`给 a `char[81]`。

数组是不可赋值的，所以写

```
pt[i] = ... 
```

总是一个错误。不幸的是，gcc 报告为

```
sort_strlen.c:13:18: error: incompatible types when assigning to type ‘char[81]’ from type ‘char *’
sort_strlen.c:14:18: error: incompatible types when assigning to type ‘char[81]’ from type ‘char (*)[81]’ 
```

而不是更直接地指出根本原因

```
sort_strlen.c:13:18: error: array type 'char [81]' is not assignable
       *(pt + i) = *(pt + j);
       ~~~~~~~~~ ^
sort_strlen.c:14:18: error: array type 'char [81]' is not assignable            
       *(pt + j) = temp;
       ~~~~~~~~~ ^ 
```

那铿锵的声音。gcc 报告的“不兼容类型”主要是无法修复的，因为右侧*没有*类型与赋值左侧的数组类型兼容。

> 我通过创建一个指针数组解决了这个问题。我想通过更改数组内的地址来直接对字符串进行排序。有谁知道这是否可能？最好的方法是什么？

这取决于你想做什么。您不能在不移动字符串本身的情况下更改字符串的地址，例如，您可以这样做

```
char temp[81];
...
    strcpy(temp, pt[i]);
    strcpy(pt[i], pt[j]);
    strcpy(pt[j], temp); 
```

如果您不想移动字符串，您确实最好创建一个指针数组

```
char *strings[10];
for(int i = 0; i < 10; ++i) {
    strings[i] = pt[i];  // make it &pt[i][0] if you don't like the implicit conversion
} 
```

`strings`并按字符串长度对数组进行排序：

```
char *temp;
...
    if (strlen(strings[i]) < strlen(strings[j])) {
        temp = strings[i];
        strings[i] = strings[j];
        strings[j] = temp;
    } 
```

# java - 如何使用 JCA 读取 BouncyCastle 私钥 PEM 文件？

> ID：14228282
> 
> 赞同：2
> 
> 时间：2013-01-09T04:28:37.977
> 
> 标签：java, openssl, bouncycastle, pem, jca

在我们的一个应用程序中，私钥是使用 BouncyCastle 的 PEMWriter 存储的。目前我正在调查我们是否可以摆脱 BouncyCastle 依赖，因为 Java 7 似乎拥有我们需要的一切。唯一的问题是我无法将存储在数据库中的私钥作为 PEM 编码的字符串读取（证书/公钥很好）。

如果我将 PEM 编码的私钥字符串从数据库保存到文件中，我可以运行 OpenSSL 将密钥转换为 PKCS#8 格式，如下所示：

```
openssl pkcs8 -topk8 -inform PEM -outform DER \
              -in private_key.pem -out private_key.der -nocrypt 
```

我可以对生成的输出进行 base64 编码，然后使用这段 Java/JCA 代码读取：

```
byte[] privateKeyBytes = 
           DatatypeConverter.parseBase64Binary(privateKeyDERcontents);
PrivateKey prKey = 
           KeyFactory.getInstance("RSA").
               generatePrivate(new PKCS8EncodedKeySpec(privateKeyBytes)); 
```

此私钥与按预期存储的公钥匹配，即我可以从明文到密文来回往返。

我的问题是：我可以以某种方式直接读取原始 PEM 编码吗？

**编辑**

下面是一段使用 BouncyCastle 读取相关字符串的代码：

```
if (Security.getProvider("BC") == null) {
    Security.addProvider(new BouncyCastleProvider());
}
PEMReader pemReader = new PEMReader(new StringReader(privateKeyPEM));
KeyPair keyPair = (KeyPair) pemReader.readObject();
PrivateKey key = keyPair.getPrivate(); 
```

“privateKeyPEM”是数据库中PEM编码的字符串，否则这个例子是自包含的。有趣的是，它已经使用 JCA KeyPair 对象作为输出。重新表述我最初的问题：我可以在不依赖 PEMReader 的情况下执行与上面代码等效的操作（以及其他相当多的 BouncyCastle 类）吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-09T10:17:17.800

PEM 文件中的密钥已经以 PKCS#8 格式存储，因此如果未使用密码加密，您只需删除标题（-----BEGIN RSA PRIVATE KEY-----）、Base64-decode 输入和获取所需的字节。

# css - 菜单之间的 CSS 空白

> ID：14228283
> 
> 赞同：0
> 
> 时间：2013-01-09T04:28:45.293
> 
> 标签：css

我对菜单栏单词之间的 CSS 空白有疑问。我尝试了很多方法，但仍然无法解决。有人可以在这里帮助我吗？

菜单问题的图片如下：http: [//imageshack.us/photo/my-images/201/44262065.jpg/](http://imageshack.us/photo/my-images/201/44262065.jpg/)

我希望结果是这样的，每个菜单之间的空间更小：http: [//i47.tinypic.com/2vvwcnn.jpg](http://i47.tinypic.com/2vvwcnn.jpg)

这是我的CSS：

```
 #cssmenu{
     border:none;
     border:0px;
     margin:0px;
     padding:0px;
     font-family:verdana,geneva,arial,helvetica,sans-serif;
     font-size:14px;
     font-weight:bold;
     color:8e8e8e;
}
  #cssmenu ul{
     background:url(img/menu-bg.gif) top left repeat-x;

     height:43px;
     list-style:none;
     margin:0;
     padding:0;

}
#cssmenu li{
    float:left;
    padding:0px 0px 0px 132px;
    display: inline-block;
    }
#cssmenu li a{
    color:#666666;
    display:block;
    font-weight:bold;
    line-height:43px;
    padding:0px 0px;
    text-align:left;
    text-decoration:none;
    }
    #cssmenu li a:hover{
        color:#000000;
        text-decoration:none;
        }
#cssmenu li ul{
    background:#e0e0e0;
    border-left:2px solid #f68618;
    border-right:2px solid #f68618;
    border-bottom:2px solid #f68618;
    display:none;
    height:auto;
    filter:alpha(opacity=95);
    opacity:0.95;
    position:absolute;
    width:180px;
    z-index:200;
    /*top:1em;
    /*left:0;*/
    }
#cssmenu li:hover ul{
    display:block;
    }
#cssmenu li li {
    display:block;
    float:none;
    padding:0px;
    width:180px;
    }
#cssmenu li ul a{
    display:block;
    font-size:12px;
    font-style:normal;
    padding:0px 10px 0px 15px;
    text-align:left;
    }
    #cssmenu li ul a:hover{
        background:#949494;
        color:#000000;
        opacity:1.0;
        filter:alpha(opacity=100);
        }
#cssmenu p{
    clear:left;
    }   
#cssmenu .active > a:hover {
    color:#ffffff;
    } 
```

这是我的html代码：

```
<div id='cssmenu'>

<ul>
   <li><a href='index.php'><span>Home</span></a></li>
   <li><a href='promotions.php'><span>Promotions</span></a></li>
   <li><a href='outlets.php'><span>Outlets</span></a></li>
   <li><a href='feedback.php'><span>Feedback</span></a></li>
   <li class='has-sub '><a href='#'><span>Career</span></a>
      <ul>
         <li><a href='stall.php'><span>Stall Leasing</span></a></li>
         <li><a href='career.php'><span>Career Opportunity</span></a></li>
      </ul>
   </li>
   <li><a href='contactUs.php'><span>Contact Us</span></a></li>
</ul>

                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:32:15.207

尝试从蓝色 round.css 文件中的 .border 类第 311 行删除填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:50:36.637

使用它来减少你的 li 和 line-height 的填充

```
#cssmenu li{
    float:left;
    padding:30px;
    display: inline-block;
    } 
```

# testing - Kafka 0.8 生产者吞吐量测试

> ID：14228286
> 
> 赞同：1
> 
> 时间：2013-01-09T04:29:39.827
> 
> 标签：testing, producer-consumer, throughput, apache-kafka

根据 Kafka 官方文档，生产者吞吐量约为 50MB/S。但是我做了一些测试，整个生产者只有2MB/S左右。测试环境和文档说的一样。一个生产者，一个经纪人，一个动物园管理员在一台独立的机器上。消息大小为 100 字节，批量大小为 200，刷新间隔为 600 条消息。测试环境相同，配置相同。那为什么我的测试结果和文件说的差距这么大？

# android - Android + 以编程方式通过蓝牙配对设备

> ID：14228289
> 
> 赞同：50
> 
> 时间：2013-01-09T04:30:05.303
> 
> 标签：android, bluetooth

我想在`bluetooth`点击时发现范围内的设备，列出并配对它们。我使用了以下代码，但是当我单击要配对的设备名称时，它只是关闭了应用程序。

我想知道我的代码中的错误或任何其他方式来做我需要的事情。

```
package com.marakana;

    import java.util.Set;

    import android.app.Activity;
    import android.bluetooth.BluetoothAdapter;
    import android.bluetooth.BluetoothDevice;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.IntentFilter;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.Window;
    import android.view.View.OnClickListener;
    import android.widget.AdapterView;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.ListView;
    import android.widget.TextView;
    import android.widget.AdapterView.OnItemClickListener;

    public class BluetoothDemo extends Activity {
    // Debugging
    private static final String TAG = "DeviceListActivity";
    private static final boolean D = true;

    // Return Intent extra
    public static String EXTRA_DEVICE_ADDRESS = "device_address";

    // Member fields
    private BluetoothAdapter mBtAdapter;
    private ArrayAdapter<String> mPairedDevicesArrayAdapter;
    private ArrayAdapter<String> mNewDevicesArrayAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Setup the window
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.device_list);

        // Set result CANCELED incase the user backs out
        setResult(Activity.RESULT_CANCELED);

        // Initialize the button to perform device discovery
        Button scanButton = (Button) findViewById(R.id.button_scan);
        scanButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                doDiscovery();
                v.setVisibility(View.GONE);
            }
        });

        // Initialize array adapters. One for already paired devices and
        // one for newly discovered devices
        mPairedDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);
        mNewDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);

        // Find and set up the ListView for paired devices
        ListView pairedListView = (ListView) findViewById(R.id.paired_devices);
        pairedListView.setAdapter(mPairedDevicesArrayAdapter);
        pairedListView.setOnItemClickListener(mDeviceClickListener);

        // Find and set up the ListView for newly discovered devices
        ListView newDevicesListView = (ListView) findViewById(R.id.new_devices);
        newDevicesListView.setAdapter(mNewDevicesArrayAdapter);
        newDevicesListView.setOnItemClickListener(mDeviceClickListener);

        // Register for broadcasts when a device is discovered
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        this.registerReceiver(mReceiver, filter);

        // Register for broadcasts when discovery has finished
        filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
        this.registerReceiver(mReceiver, filter);

        // Get the local Bluetooth adapter
        mBtAdapter = BluetoothAdapter.getDefaultAdapter();

        // Get a set of currently paired devices
        Set<BluetoothDevice> pairedDevices = mBtAdapter.getBondedDevices();

        // If there are paired devices, add each one to the ArrayAdapter
        if (pairedDevices.size() > 0) {
            findViewById(R.id.title_paired_devices).setVisibility(View.VISIBLE);
            for (BluetoothDevice device : pairedDevices) {
                mPairedDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
            }
        } else {
            String noDevices = getResources().getText(R.string.none_paired).toString();
            mPairedDevicesArrayAdapter.add(noDevices);
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        // Make sure we're not doing discovery anymore
        if (mBtAdapter != null) {
            mBtAdapter.cancelDiscovery();
        }

        // Unregister broadcast listeners
        this.unregisterReceiver(mReceiver);
    }

    /**
     * Start device discover with the BluetoothAdapter
     */
    private void doDiscovery() {
        if (D) Log.d(TAG, "doDiscovery()");

        // Indicate scanning in the title
        setProgressBarIndeterminateVisibility(true);
        setTitle(R.string.scanning);

        // Turn on sub-title for new devices
        findViewById(R.id.title_new_devices).setVisibility(View.VISIBLE);

        // If we're already discovering, stop it
        if (mBtAdapter.isDiscovering()) {
            mBtAdapter.cancelDiscovery();
        }

        // Request discover from BluetoothAdapter
        mBtAdapter.startDiscovery();
    }

    // The on-click listener for all devices in the ListViews
    private OnItemClickListener mDeviceClickListener = new OnItemClickListener() {
        public void onItemClick(AdapterView<?> av, View v, int arg2, long arg3) {
            // Cancel discovery because it's costly and we're about to connect
            mBtAdapter.cancelDiscovery();

            // Get the device MAC address, which is the last 17 chars in the View
            String info = ((TextView) v).getText().toString();
            String address = info.substring(info.length() - 17);

            // Create the result Intent and include the MAC address
            Intent intent = new Intent();
            intent.putExtra(EXTRA_DEVICE_ADDRESS, address);

            // Set result and finish this Activity
            setResult(Activity.RESULT_OK, intent);
            finish();
        }
    };

    // The BroadcastReceiver that listens for discovered devices and
    // changes the title when discovery is finished
    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                // If it's already paired, skip it, because it's been listed already
                if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                    mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                }
            // When discovery is finished, change the Activity title
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                setProgressBarIndeterminateVisibility(false);
                setTitle(R.string.select_device);
                if (mNewDevicesArrayAdapter.getCount() == 0) {
                    String noDevices = getResources().getText(R.string.none_found).toString();
                    mNewDevicesArrayAdapter.add(noDevices);
                }
            }
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-10T09:08:23.490

在我的第一个答案中，逻辑是为那些只想使用逻辑的人显示的。

我想我无法向@chalukya3545 说清楚，这就是为什么我要添加整个代码以让他知道代码的确切流程。

**蓝牙Demo.java**

```
public class BluetoothDemo extends Activity {

    ListView listViewPaired;
    ListView listViewDetected;
    ArrayList<String> arrayListpaired;
    Button buttonSearch,buttonOn,buttonDesc,buttonOff;
    ArrayAdapter<String> adapter,detectedAdapter;
    static HandleSeacrh handleSeacrh;
    BluetoothDevice bdDevice;
    BluetoothClass bdClass;
    ArrayList<BluetoothDevice> arrayListPairedBluetoothDevices;
    private ButtonClicked clicked;
    ListItemClickedonPaired listItemClickedonPaired;
    BluetoothAdapter bluetoothAdapter = null;
    ArrayList<BluetoothDevice> arrayListBluetoothDevices = null;
    ListItemClicked listItemClicked;

    @Override 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        listViewDetected = (ListView) findViewById(R.id.listViewDetected);
        listViewPaired = (ListView) findViewById(R.id.listViewPaired);
        buttonSearch = (Button) findViewById(R.id.buttonSearch);
        buttonOn = (Button) findViewById(R.id.buttonOn);
        buttonDesc = (Button) findViewById(R.id.buttonDesc);
        buttonOff = (Button) findViewById(R.id.buttonOff); 
        arrayListpaired = new ArrayList<String>();
        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        clicked = new ButtonClicked();
        handleSeacrh = new HandleSeacrh();
        arrayListPairedBluetoothDevices = new ArrayList<BluetoothDevice>();
        /*
         * the above declaration is just for getting the paired bluetooth devices;
         * this helps in the removing the bond between paired devices.
         */
        listItemClickedonPaired = new ListItemClickedonPaired();
        arrayListBluetoothDevices = new ArrayList<BluetoothDevice>();
        adapter= new ArrayAdapter<String>(BluetoothDemo.this, android.R.layout.simple_list_item_1, arrayListpaired);
        detectedAdapter = new ArrayAdapter<String>(BluetoothDemo.this, android.R.layout.simple_list_item_single_choice);
        listViewDetected.setAdapter(detectedAdapter);
        listItemClicked = new ListItemClicked();
        detectedAdapter.notifyDataSetChanged();
        listViewPaired.setAdapter(adapter);
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        getPairedDevices();
        buttonOn.setOnClickListener(clicked);
        buttonSearch.setOnClickListener(clicked);
        buttonDesc.setOnClickListener(clicked);
        buttonOff.setOnClickListener(clicked);
        listViewDetected.setOnItemClickListener(listItemClicked);
        listViewPaired.setOnItemClickListener(listItemClickedonPaired);
    }
    private void getPairedDevices() {
        Set<BluetoothDevice> pairedDevice = bluetoothAdapter.getBondedDevices();            
        if(pairedDevice.size()>0)
        {
            for(BluetoothDevice device : pairedDevice)
            {
                arrayListpaired.add(device.getName()+"\n"+device.getAddress());
                arrayListPairedBluetoothDevices.add(device);
            }
        }
        adapter.notifyDataSetChanged();
    }
    class ListItemClicked implements OnItemClickListener
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // TODO Auto-generated method stub
            bdDevice = arrayListBluetoothDevices.get(position);
            //bdClass = arrayListBluetoothDevices.get(position);
            Log.i("Log", "The dvice : "+bdDevice.toString());
            /*
             * here below we can do pairing without calling the callthread(), we can directly call the
             * connect(). but for the safer side we must usethe threading object.
             */
            //callThread();
            //connect(bdDevice);
            Boolean isBonded = false;
            try {
                isBonded = createBond(bdDevice);
                if(isBonded)
                {
                    //arrayListpaired.add(bdDevice.getName()+"\n"+bdDevice.getAddress());
                    //adapter.notifyDataSetChanged();
                    getPairedDevices();
                    adapter.notifyDataSetChanged();
                }
            } catch (Exception e) {
                e.printStackTrace(); 
            }//connect(bdDevice);
            Log.i("Log", "The bond is created: "+isBonded);
        }       
    }
    class ListItemClickedonPaired implements OnItemClickListener
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
            bdDevice = arrayListPairedBluetoothDevices.get(position);
            try {
                Boolean removeBonding = removeBond(bdDevice);
                if(removeBonding)
                {
                    arrayListpaired.remove(position);
                    adapter.notifyDataSetChanged();
                }

                Log.i("Log", "Removed"+removeBonding);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    /*private void callThread() {
        new Thread(){
            public void run() {
                Boolean isBonded = false;
                try {
                    isBonded = createBond(bdDevice);
                    if(isBonded)
                    {
                        arrayListpaired.add(bdDevice.getName()+"\n"+bdDevice.getAddress());
                        adapter.notifyDataSetChanged();
                    }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace(); 
                }//connect(bdDevice);
                Log.i("Log", "The bond is created: "+isBonded);
            }           
        }.start();
    }*/
    private Boolean connect(BluetoothDevice bdDevice) { 
        Boolean bool = false;
        try {
            Log.i("Log", "service method is called ");
            Class cl = Class.forName("android.bluetooth.BluetoothDevice");
            Class[] par = {};
            Method method = cl.getMethod("createBond", par);
            Object[] args = {};
            bool = (Boolean) method.invoke(bdDevice);//, args);// this invoke creates the detected devices paired.
            //Log.i("Log", "This is: "+bool.booleanValue());
            //Log.i("Log", "devicesss: "+bdDevice.getName());
        } catch (Exception e) {
            Log.i("Log", "Inside catch of serviceFromDevice Method");
            e.printStackTrace();
        }
        return bool.booleanValue();
    };

    public boolean removeBond(BluetoothDevice btDevice)  
    throws Exception  
    {  
        Class btClass = Class.forName("android.bluetooth.BluetoothDevice");
        Method removeBondMethod = btClass.getMethod("removeBond");  
        Boolean returnValue = (Boolean) removeBondMethod.invoke(btDevice);  
        return returnValue.booleanValue();  
    }

    public boolean createBond(BluetoothDevice btDevice)  
    throws Exception  
    { 
        Class class1 = Class.forName("android.bluetooth.BluetoothDevice");
        Method createBondMethod = class1.getMethod("createBond");  
        Boolean returnValue = (Boolean) createBondMethod.invoke(btDevice);  
        return returnValue.booleanValue();  
    }  

    class ButtonClicked implements OnClickListener
    {
        @Override
        public void onClick(View view) {
            switch (view.getId()) {
            case R.id.buttonOn:
                onBluetooth();
                break;
            case R.id.buttonSearch:
                arrayListBluetoothDevices.clear();
                startSearching();
                break;
            case R.id.buttonDesc:
                makeDiscoverable();
                break;
            case R.id.buttonOff:
                offBluetooth();
                break;
            default:
                break;
            }
        }
    }
    private BroadcastReceiver myReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            Message msg = Message.obtain();
            String action = intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action)){
                Toast.makeText(context, "ACTION_FOUND", Toast.LENGTH_SHORT).show();

                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                try
                {
                    //device.getClass().getMethod("setPairingConfirmation", boolean.class).invoke(device, true);
                    //device.getClass().getMethod("cancelPairingUserInput", boolean.class).invoke(device);
                }
                catch (Exception e) {
                    Log.i("Log", "Inside the exception: ");
                    e.printStackTrace();
                }

                if(arrayListBluetoothDevices.size()<1) // this checks if the size of bluetooth device is 0,then add the
                {                                           // device to the arraylist.
                    detectedAdapter.add(device.getName()+"\n"+device.getAddress());
                    arrayListBluetoothDevices.add(device);
                    detectedAdapter.notifyDataSetChanged();
                }
                else
                {
                    boolean flag = true;    // flag to indicate that particular device is already in the arlist or not
                    for(int i = 0; i<arrayListBluetoothDevices.size();i++)
                    {
                        if(device.getAddress().equals(arrayListBluetoothDevices.get(i).getAddress()))
                        {
                            flag = false;
                        }
                    }
                    if(flag == true)
                    {
                        detectedAdapter.add(device.getName()+"\n"+device.getAddress());
                        arrayListBluetoothDevices.add(device);
                        detectedAdapter.notifyDataSetChanged();
                    }
                }
            }           
        }
    };
    private void startSearching() {
        Log.i("Log", "in the start searching method");
        IntentFilter intentFilter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        BluetoothDemo.this.registerReceiver(myReceiver, intentFilter);
        bluetoothAdapter.startDiscovery();
    }
    private void onBluetooth() {
        if(!bluetoothAdapter.isEnabled())
        {
            bluetoothAdapter.enable();
            Log.i("Log", "Bluetooth is Enabled");
        }
    }
    private void offBluetooth() {
        if(bluetoothAdapter.isEnabled())
        {
            bluetoothAdapter.disable();
        }
    }
    private void makeDiscoverable() {
        Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
        startActivity(discoverableIntent);
        Log.i("Log", "Discoverable ");
    }
    class HandleSeacrh extends Handler
    {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 111:

                break;

            default:
                break;
            }
        }
    }
} 
```

这是**main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button 
        android:id="@+id/buttonOn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="On"/>
    <Button 
        android:id="@+id/buttonDesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Make Discoverable"/>
   <Button 
       android:id="@+id/buttonSearch"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="Search"/>
   <Button 
       android:id="@+id/buttonOff"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="Bluetooth Off"/>

   <ListView 
       android:id="@+id/listViewPaired"
       android:layout_width="match_parent"
       android:layout_height="120dp">

   </ListView>

   <ListView 
       android:id="@+id/listViewDetected"
       android:layout_width="match_parent"
       android:layout_height="match_parent">

   </ListView>
</LinearLayout> 
```

将此权限添加到您的**AndroidManifest.xml**文件中：

```
 <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
 <uses-permission android:name="android.permission.BLUETOOTH" />  
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

此代码的输出将如下所示。 [![蓝牙演示](../Images/28e792e780abea393f1099a20aa9dcc5.png)](https://i.stack.imgur.com/tp2tV.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-18T10:29:41.270

**最好的方法是不要使用任何配对码**。而不是`onClick`转到您使用 UUID 创建套接字的其他函数或其他类。
如果尚未配对，Android 会自动弹出配对。

或查看此[**链接**](https://stackoverflow.com/questions/2660968/how-to-prevent-android-bluetooth-rfcomm-connection-from-dying-immediately-after)以获得更好的理解

以下是相同的代码：

```
private OnItemClickListener mDeviceClickListener = new OnItemClickListener() {
    public void onItemClick(AdapterView<?> av, View v, int arg2, long arg3) {
        // Cancel discovery because it's costly and we're about to connect
        mBtAdapter.cancelDiscovery();

        // Get the device MAC address, which is the last 17 chars in the View
        String info = ((TextView) v).getText().toString();
        String address = info.substring(info.length() - 17);

        // Create the result Intent and include the MAC address
        Intent intent = new Intent();
        intent.putExtra(EXTRA_DEVICE_ADDRESS, address);

        // Set result and finish this Activity
        setResult(Activity.RESULT_OK, intent);

      // **add this 2 line code** 
       Intent myIntent = new Intent(view.getContext(), Connect.class);
        startActivityForResult(myIntent, 0);

        finish();
    }
}; 
```

Connect.java 文件是：

```
public class Connect extends Activity {
private static final String TAG = "zeoconnect";
private ByteBuffer localByteBuffer;
 private InputStream in;
 byte[] arrayOfByte = new byte[4096];
 int bytes;

  public BluetoothDevice mDevice;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.connect);

              try {
                setup();
            } catch (ZeoMessageException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ZeoMessageParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }

 private void setup() throws ZeoMessageException, ZeoMessageParseException  {
    // TODO Auto-generated method stub

        getApplicationContext().registerReceiver(receiver,
                    new IntentFilter(BluetoothDevice.ACTION_ACL_CONNECTED));
        getApplicationContext().registerReceiver(receiver,
                    new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED));

            BluetoothDevice zee = BluetoothAdapter.getDefaultAdapter().
                    getRemoteDevice("**:**:**:**:**:**");// add device mac adress

            try {
                sock = zee.createRfcommSocketToServiceRecord(
                         UUID.fromString("*******************")); // use unique UUID
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            Log.d(TAG, "++++ Connecting");
            try {
                sock.connect();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            Log.d(TAG, "++++ Connected");

            try {
                in = sock.getInputStream();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

              Log.d(TAG, "++++ Listening...");

              while (true) {

                  try {
                      bytes = in.read(arrayOfByte);
                      Log.d(TAG, "++++ Read "+ bytes +" bytes");  
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                }
                        Log.d(TAG, "++++ Done: test()"); 

                        }} 

 private static final LogBroadcastReceiver receiver = new LogBroadcastReceiver();
    public static class LogBroadcastReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context paramAnonymousContext, Intent paramAnonymousIntent) {
            Log.d("ZeoReceiver", paramAnonymousIntent.toString());
            Bundle extras = paramAnonymousIntent.getExtras();
            for (String k : extras.keySet()) {
                Log.d("ZeoReceiver", "    Extra: "+ extras.get(k).toString());
            }
        }

    };

    private BluetoothSocket sock;
    @Override
    public void onDestroy() {
        getApplicationContext().unregisterReceiver(receiver);
        if (sock != null) {
            try {
                sock.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        super.onDestroy();
    }
 } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-30T10:04:59.050

如果您有 BluetoothDevice 对象，则可以使用`bluetoothDevice.createBond()`方法从 api 19 开始创建绑定（对）。

**编辑**

对于回调，如果请求被接受或拒绝，您将必须创建一个带有`BluetoothDevice.ACTION_BOND_STATE_CHANGED`操作的 BroadcastReceiver

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:01:01.913

**编辑：**我刚刚解释了在这里配对的逻辑。如果有人想使用完整的代码，请查看我的另一个答案。我在这里只回答了逻辑，但我无法正确解释，所以我在同一个线程中添加了另一个答案。

试试这个做配对：

如果您能够搜索设备，那么这将是您的下一步

```
ArrayList<BluetoothDevice> arrayListBluetoothDevices = NEW ArrayList<BluetoothDevice>; 
```

我假设您在以下位置添加了蓝牙设备列表`arrayListBluetoothDevices`：

```
BluetoothDevice bdDevice;
bdDevice = arrayListBluetoothDevices.get(PASS_THE_POSITION_TO_GET_THE_BLUETOOTH_DEVICE);

Boolean isBonded = false;
try {
isBonded = createBond(bdDevice);
if(isBonded)
{
    Log.i("Log","Paired");
}
} catch (Exception e) 
{
    e.printStackTrace(); 
} 
```

`createBond()`方法：

```
public boolean createBond(BluetoothDevice btDevice)  
    throws Exception  
    { 
        Class class1 = Class.forName("android.bluetooth.BluetoothDevice");
        Method createBondMethod = class1.getMethod("createBond");  
        Boolean returnValue = (Boolean) createBondMethod.invoke(btDevice);  
        return returnValue.booleanValue();  
    } 
```

**将此行添加到 ACTION_FOUND 中的 Receiver**

```
if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                    mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                    arrayListBluetoothDevices.add(device);
                } 
```

# java - 无法在 Android AVD 上运行我的项目

> ID：14228292
> 
> 赞同：0
> 
> 时间：2013-01-09T04:30:22.817
> 
> 标签：java, android, eclipse

我尝试在 android 上测试数据库。我想在 sumsung GALAXY TAB 中运行我的项目。所以，我设置 AVD 是 Galaxy Nexus ，RAM = 512，VM Heap = 64，SD Card = 1024 MiB 。我创建的 android 项目名称是 SQLiteDatabase 。当我在 AVD 上运行 SQLiteDatabase 时，它​​会显示此错误。

**不幸的是，SQLite 数据库已经停止。**

我不知道为什么我不能运行 SQLiteDatabase 项目，这是来自 logcat 的错误。

```
01-09 04:17:27.347: I/Process(6519): Sending signal. PID: 6519 SIG:9
     01-09 04:17:33.517: W/Trace(6848): Unexpected value from nativeGetEnabledTags: 0
     01-09 04:17:33.517: W/Trace(6848): Unexpected value from nativeGetEnabledTags: 0
     01-09 04:17:33.562: W/Trace(6848): Unexpected value from nativeGetEnabledTags: 0
     01-09 04:17:33.562: W/Trace(6848): Unexpected value from nativeGetEnabledTags: 0
     01-09 04:17:34.917: D/dalvikvm(6848): GC_CONCURRENT freed 75K, 7% free 2744K/2948K, paused 12ms+6ms, total 122ms
     01-09 04:17:34.917: D/dalvikvm(6848): WAIT_FOR_CONCURRENT_GC blocked 71ms
     01-09 04:17:34.937: I/dalvikvm-heap(6848): Grow heap (frag case) to 3.868MB for 1127536-byte allocation
     01-09 04:17:35.027: D/dalvikvm(6848): GC_FOR_ALLOC freed 2K, 6% free 3843K/4052K, paused 84ms, total 85ms
     01-09 04:17:35.227: D/dalvikvm(6848): GC_CONCURRENT freed <1K, 6% free 3847K/4052K, paused 10ms+4ms, total 199ms
     01-09 04:17:35.347: E/SQLiteLog(6848): (1) near "tabletool": syntax error
     01-09 04:17:35.359: D/AndroidRuntime(6848): Shutting down VM
     01-09 04:17:35.359: W/dalvikvm(6848): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
     01-09 04:17:35.417: E/AndroidRuntime(6848): FATAL EXCEPTION: main
     01-09 04:17:35.417: E/AndroidRuntime(6848): java.lang.RuntimeException: Unable to start activity
 ComponentInfo{com.example.sqlitedatabase/com.example.sqlitedatabase.MainActivity}:
 android.database.sqlite.SQLiteException: near "tabletool": syntax
 error (code 1): , while compiling: create tabletool(idinteger primary
 key autoincrement ,nametext ,amountnumericunitunit
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.os.Handler.dispatchMessage(Handler.java:99)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.os.Looper.loop(Looper.java:137)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.ActivityThread.main(ActivityThread.java:5039)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at java.lang.reflect.Method.invokeNative(Native Method)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at java.lang.reflect.Method.invoke(Method.java:511)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at dalvik.system.NativeStart.main(Native Method)
     01-09 04:17:35.417: E/AndroidRuntime(6848): Caused by: android.database.sqlite.SQLiteException: near "tabletool": syntax
 error (code 1): , while compiling: create tabletool(idinteger primary
 key autoincrement ,nametext ,amountnumericunitunit
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native
 Method)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1663)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at com.example.sqlitedatabase.SimpleSQLiteHelper.onCreate(SimpleSQLiteHelper.java:43)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at com.example.sqlitedatabase.ToolDataSource.open(ToolDataSource.java:28)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at com.example.sqlitedatabase.MainActivity.onCreate(MainActivity.java:36)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.Activity.performCreate(Activity.java:5104)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
     01-09 04:17:35.417: E/AndroidRuntime(6848):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:32:26.483

```
ComponentInfo{com.example.sqlitedatabase/com.example.sqlitedatabase.MainActivity}: android.database.sqlite.SQLiteException: near "tabletool": syntax error (code 1): , while compiling: create tabletool(idinteger primary key autoincrement ,nametext ,amountnumericunitunit 01-09 04:17:35.417: E/AndroidRuntime(6848): at 
```

没有可用的代码，但根据上面的异常堆栈，您在创建表“tabletool”时似乎有一些语法错误

确保创建表语法有效（空格、冒号等，在需要的地方有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:38:24.240

嘿嘿在日志里发现你的表查询有误。

像这样更改此查询

```
create tabletool(id integer primary key autoincrement ,name text 
```

我只能在日志中看到您忘记维护空格的两个参数。在参数和数据类型之间放置空格并尝试一下。它对你有用。

检查你写的查询，应该是`idinteger`和`nametext``id integer``name text`

# javascript - 显示“正在加载...”文本 - 文档中的所有 div 只有一个 jquey.ajaxSend()

> ID：14228293
> 
> 赞同：1
> 
> 时间：2013-01-09T04:30:26.617
> 
> 标签：javascript, ajax, jquery

如何仅在调用 jquery.load() 的 div 中显示“正在加载...”文本。

```
$(document).ready(function()
{
    //only one ajaxSend for all divs
    $(document).ajaxSend(function()
    {
        $(this).html('LOADING...'); //'this' doesn't works
    });

    //...

    $("#ranking-content").load("content/ranking.php");
    $("#empleados-content").load("content/empleados.php");
    //... more and more

}); 
```

在 ajaxSend 回调中，如何获取发出该 ajax 请求的 div 的 ID？

我确信有比每个 div 执行一个 ajaxSend 更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:33:51.947

要自定义特定 div 的行为，请使用[ajax](http://api.jquery.com/jQuery.ajax/)函数：

定义`beforeSend`（在 ajax 调用之前运行的脚本）和`context`（HTML 元素）：

```
$.ajax({
  context: $('#ranking-content'),
  url: 'content/ranking.php',
  beforeSend: function (xhr) {
    $(this).html('Loading');
  }
}).done(function (data) {
  $(this).html(data);
}); 
```

`ajaxSend`不需要使用它。您可以通过将参数与调用者提供的设置合并到 ajax 来重新使用此代码。

# c# - 无法将类型“System.Linq.IQueryable<>”隐式转换为“System.Linq.IOrderedQueryable<>”

> ID：14228303
> 
> 赞同：10
> 
> 时间：2013-01-09T04:31:42.393
> 
> 标签：c#

> **可能重复：**
> [LINQ2SQL：无法将 IQueryable<> 转换为 IOrderedQueryable 错误](https://stackoverflow.com/questions/1732236/linq2sql-cannot-convert-iqueryable-to-iorderedqueryable-error)

我在控制器的 searchString 中有这个错误..

这是我的代码：

```
if (!String.IsNullOrEmpty(searchString))
{ 
    posts = posts.Where(post => post.Body == searchString);
} 
```

我正在使用此代码在我的索引中进行搜索。我在这里声明有什么问题吗？我已经尝试过谷歌搜索，但没有找到明确的答案。提前感谢任何可以帮助我的人..

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-09T04:34:21.177

最可能的原因是您`var`在`posts`具有`OrderBy`. 如果您将其替换为

```
IQueryable<Post> posts = someSource.Where(cond).OrderBy(/*the culprit*/); 
```

错误应该消失。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T04:36:15.097

您的`posts`变量似乎是类型`IOrderedQueryable<Post>`，但您正在为其分配 `IQueryable<Post>`. 我看到 2 种方法来解决这个问题，要么修改你的变量类型，要么`IQueryable<Post>`像这样对你的查询进行排序：

```
posts = posts.Where(post => post.Body == searchString)
    .OrderBy(post => post.Date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:34:49.387

`posts`is`IOrderedQueryable`并且对 where 的调用返回一个`IQueryable`. 为什么不显式声明变量并查看它是否解决了问题。

# regex - 如何使用 Perl 中的模式匹配获取相似标签的多个值？

> ID：14228307
> 
> 赞同：0
> 
> 时间：2013-01-09T04:32:16.860
> 
> 标签：regex, perl

例如，

说字符串是“-u xyz -p 1234 -z ask -p secure -o all -p demo”

我想匹配所有出现的 -p 并获取它的值，

我试过了，但它只在第一场比赛中停止，

```
$command =~ /(.*)\-p\s+(.*?)\s+(.*)/g;
打印 $2

```

这将导致

`1234`

任何想法，我怎样才能重现它并获得所有值：1234，安全，演示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:35:37.497

看起来您正在尝试解析命令行选项。如果是这样，请使用 Perl 附带的标准 Getopt::Long 模块。

[http://perldoc.perl.org/Getopt/Long.html](http://perldoc.perl.org/Getopt/Long.html)

无需重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:57:10.470

这将适用于示例：

```
$command = "-u xyz -p 1234 -z ask -p secure -o all -p demo";

while($command =~ /\-p ([^ ]+)/g) {
  print "$1\n";
} 
```

结果：

```
1234
secure
demo 
```

# android - Android：如何判断一个触摸事件是否在一个圆圈中？

> ID：14228313
> 
> 赞同：10
> 
> 时间：2013-01-09T04:32:59.807
> 
> 标签：android, touch, geometry

我想在触摸圆形区域时播放媒体，但是如何确定我的触摸位置在圆形中？

到目前为止，我扩展了 a`view`并实现了`onTouchEvent`，并且我需要确定位置是在圆内还是圆外的算法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T04:50:24.467

您应该使用[View.getX()](http://developer.android.com/reference/android/view/View.html#getX%28%29)和[View.getY()](http://developer.android.com/reference/android/view/View.html#getY%28%29)获取视图的位置以获取左上角的位置，并假设您知道半径（或能够获得视图的宽度/高度以确定半径）`x`。`y`之后，获取`xTouch`并`yTouch`使用[MotionEvent.getX()](http://developer.android.com/reference/android/view/MotionEvent.html#getX%28%29)和[MotionEvent.getY()](http://developer.android.com/reference/android/view/MotionEvent.html#getY%28%29)并检查是否：

```
double centerX = x + radius;
double centerY = y + radius;
double distanceX = xTouch - centerX;
double distanceY = yTouch - centerY;

boolean isInside() {
    return (distanceX * distanceX) + (distanceY * distanceY) <= radius * radius;
} 
```

该公式只是对学校几何形状的解释，用于确定点是否在圆形区域内。有关更多详细信息，请参阅[笛卡尔坐标的圆方程。](https://en.wikipedia.org/wiki/Circle#Equations)

价值观解释是：

`(x + radius)`并且`(y + radius)`是圆的中心。

`(xTouch - (x + radius))`是从触摸点到中心的距离 X。

`(yTouch - (y + radius))`是从触摸点到中心的距离 Y。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-18T13:52:28.540

另一种方法，我认为更简单一点，是使用两点之间的距离公式并将该距离与您的半径进行比较。如果计算出的距离小于半径，则触摸在您的圆圈内。

**这里的代码**

```
// Distance between two points formula
float touchRadius = (float) Math.sqrt(Math.pow(touchX - mViewCenterPoint.x, 2) + Math.pow(touchY - mViewCenterPoint.y, 2));

if (touchRadius < mCircleRadius)
{
    // TOUCH INSIDE THE CIRCLE!
} 
```

# cocoa-touch - Cocoa：IBAction 回调是同步的还是异步的？

> ID：14228315
> 
> 赞同：0
> 
> 时间：2013-01-09T04:33:30.960
> 
> 标签：cocoa-touch, cocoa

假设我将 IBAction 与 xib 文件中的按钮连接起来。当应用程序运行时，我点击按钮，该操作是否会被同步调用，或者这会在 runloop 上放置一个 performSelector 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:06:17.923

是同步的。

在 iOS 应用程序中，回溯如下所示：

```
frame #0: 0x000025d2 MyApp`-[ViewController myAction:] + 34 at ViewController.m:31
frame #1: 0x010e2705 libobjc.A.dylib`-[NSObject performSelector:withObject:withObject:] + 77
frame #2: 0x00019920 UIKit`-[UIApplication sendAction:to:from:forEvent:] + 96
frame #3: 0x000198b8 UIKit`-[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
frame #4: 0x000da671 UIKit`-[UIControl sendAction:to:forEvent:] + 66
frame #5: 0x000dabcf UIKit`-[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
frame #6: 0x000d9d38 UIKit`-[UIControl touchesEnded:withEvent:] + 546
frame #7: 0x0004933f UIKit`-[UIWindow _sendTouchesForEvent:] + 846
frame #8: 0x00049552 UIKit`-[UIWindow sendEvent:] + 273
frame #9: 0x000273aa UIKit`-[UIApplication sendEvent:] + 436
frame #10: 0x00018cf8 UIKit`_UIApplicationHandleEvent + 9874
frame #11: 0x01becdf9 GraphicsServices`_PurpleEventCallback + 339
frame #12: 0x01becad0 GraphicsServices`PurpleEventCallback + 46
frame #13: 0x01c06bf5 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
frame #14: 0x01c06962 CoreFoundation`__CFRunLoopDoSource1 + 146
frame #15: 0x01c37bb6 CoreFoundation`__CFRunLoopRun + 2118
frame #16: 0x01c36f44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #17: 0x01c36e1b CoreFoundation`CFRunLoopRunInMode + 123
frame #18: 0x01beb7e3 GraphicsServices`GSEventRunModal + 88
frame #19: 0x01beb668 GraphicsServices`GSEventRun + 104
frame #20: 0x0001665c UIKit`UIApplicationMain + 1211
frame #21: 0x00001f62 MyApp`main + 130 at main.m:16
frame #22: 0x00001e95 MyApp`start + 53 
```

这是直接同步代码。应用程序接收到一个触摸结束事件，确定将其发送到哪里（按钮），并向按钮的目标发送一条消息。

相比之下，异步调用的方法 via`-[NSObject performSelector:withObject:afterDelay:]`具有如下回溯：

```
frame #0: 0x00002628 MyApp`-[ViewController myAsyncAction:] + 24 at ViewController.m:37
frame #1: 0x00acce83 Foundation`__NSFireDelayedPerform + 380
frame #2: 0x01c50376 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
frame #3: 0x01c4fe06 CoreFoundation`__CFRunLoopDoTimer + 534
frame #4: 0x01c37a82 CoreFoundation`__CFRunLoopRun + 1810
frame #5: 0x01c36f44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #6: 0x01c36e1b CoreFoundation`CFRunLoopRunInMode + 123
frame #7: 0x01beb7e3 GraphicsServices`GSEventRunModal + 88
frame #8: 0x01beb668 GraphicsServices`GSEventRun + 104
frame #9: 0x0001665c UIKit`UIApplicationMain + 1211
frame #10: 0x00001f62 MyApp`main + 130 at main.m:16
frame #11: 0x00001e95 MyApp`start + 53 
```

您可以清楚地看到计时器触发并调用其回调，并触发了建立在此之上的“延迟执行”。

# magento - 如何使用 magento API 按 sku 和其他自定义字段更新库存？

> ID：14228317
> 
> 赞同：1
> 
> 时间：2013-01-09T04:33:37.673
> 
> 标签：magento

是否可以使用 magento API 按 SKU 和其他自定义字段更新库存？

我正在使用magento API的cataloginventory_stock_item方法更新库存，它只提供按SKU更新库存的工具，其中我在magento中有两个另一个自定义字段，定义为ISBN和商店ID。所以我想通过 ISBN 和 Store ID 更新库存水平。我正在使用 magento API 和 SOAP V1 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:59:02.957

您可以使用 Magento 的 SOAP API 来做到这一点。以下是显示如何连接到 Magento 和更新产品的链接：

[http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.update.html](http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.update.html)

阿布纳布

> 嗨尼尔，
> 
> 你想做什么是有道理的。如果我是你，我会这样做
> 
> 只需从 catalog_product_entity_varchar 中找到您的 attribute_id（在此表中搜索您的自定义值的简单方法
> 
> 例如：如果您的 ISBN 之一是 S123，我会从 catalog_product_entity_varchar 中选择属性 ID，其中 value='S123'；这为您提供了您的客户属性 ID）
> 
> 然后将该表与catalog_product_entity 连接起来，您可以在其中找到产品SKU（为attribute_id 添加where 条件）
> 
> 然后您可以使用 catalog_product.update 更新您的产品
> 
> 希望这可以帮助
> 
> 阿布

# regex - 正则表达式提取指定行

> ID：14228324
> 
> 赞同：-4
> 
> 时间：2013-01-09T04:34:20.943
> 
> 标签：regex

我有来自工作流软件的以下评论行。需要从第一行和其余评论中提取一些部分。

## 这是示例

```
Nelly Thomas (Approve) 12/27/2012 8:50 PM - 12/27/2012 8:52 PM
(Nelly Thomas) LazyApproval by nelly.thomas@joshworld.local Approved

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
when an unknown printer took a galley of type and scrambled it to make a type specimen book 
```

现在需要像这样提取它。

```
Nelly Thomas 12/27/2012 8:50 PM

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book 
```

我需要一个正则表达式来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:51:19.747

好吧，给你：

```
var s = "Nelly Thomas (Approve) 12/27/2012 8:50 PM - 12/27/2012 8:52 PM\n\
(Nelly Thomas) LazyApproval by nelly.thomas@joshworld.local Approved\n\
\n\
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, \n\
when an unknown printer took a galley of type and scrambled it to make a type specimen book";
s.replace(/(.+)\(.+\)\s((\d\d\/){2}\d{4}\s\d{1,2}:\d\d\s\w\w)\s-\s.+[\n|\r].+[\n|\r]{2}([^]+)/gi, '$1$2\n\n$4');

//Result: 
"Nelly Thomas 12/27/2012 8:50 PM

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
when an unknown printer took a galley of type and scrambled it to make a type specimen book" 
```

这是一个有效的正则表达式，但它不是特别漂亮：

```
# /                   --> Regex start:
# (.+)                --> a word (group #1)
# \(.+\)\s            --> followed by a word in () and a space.
# ((\d\d\/){2}\d{4}\s --> followed by a date and
# \d{1,2}:\d\d\s\w\w) --> time (group #2)
# \s-\s               --> followed by ` - `
# .+                  --> followed by any number of letters or spaces. (The 2nd date)
# [\n|\r]             --> followed by a newline.
# .+                  --> followed by any number of letters or spaces. (The 2nd line)
# [\n|\r]{2}          --> followed by 2 newlines.
# ([^]+)              --> followed by _any_ character, including newlines (group 4)
# /gi                 --> Regex end, (g)lobal flag, case (i)nsensitive flag. 
```

然后，输出组和`1`，在和之间使用双换行符。`2``4``2``4`

所以，它很丑，但它可以工作，只要文本遵循这种格式：

> W (W) DD\DD\DDDD D(?D):DD LL - W
> W
> 
> W

其中`D`是单个数字，`L`是字母，`W`是任意数量的单词和空格，不包括换行符，`D(?D)`表示一位或两位数字。

# uiwebview - 在 UIWebView 中保存带有用户输入的 HTML 文件

> ID：14228326
> 
> 赞同：3
> 
> 时间：2013-01-09T04:34:25.533
> 
> 标签：uiwebview

如何在 UIWebview 中保存带有用户输入的完整 HTML 文件。我想按原样保存 HTML 文件并在后面填充它

# mdx - 如何编写 MDX 查询以返回具有 ID 和名称的成员？

> ID：14228329
> 
> 赞同：1
> 
> 时间：2013-01-09T04:34:41.463
> 
> 标签：mdx, mondrian

我正在尝试编写一个 MDX 查询，该查询返回一个包含成员列表、他们的 ID 和度量值的结果。在这个例子中，我有一个事实表，它是来自调查的评级值。每个评分值都有一个外键到 Question 维度，它具有 Id 和 Name 列。我想要的信息是每个问题的 Id 和 Name 以及总平均评分。到目前为止，我可以获得 Id 和 Rating，或 Name 和 Rating，但我不确定如何同时获得两者。

这是我尝试过的查询：

```
SELECT
NON EMPTY {[Measures].[Rating]} ON COLUMNS,
NON EMPTY {[Question].[Question Id].Members, 
           [Question].[Question Caption].Members} ON ROWS
FROM [Ratings] 
```

它几乎可以工作，除了我得到重复的值，这是一个示例结果：

```
[Question].[10]                             3.5
[Question].[11]                             4.2
[Question].[12]                             4.9
[Question].[13]                             4.0
[Question].[10].[blar abc]                  3.5
[Question].[11].[blar def]                  4.2
[Question].[12].[blarrr]                    4.9
[Question].[13].[something else]            4.2 
```

您可以看到问题 10 出现两次，评分为 3.5，一次没有名字，一次有名字。

我想用 MDX 做些什么吗？我错过了什么？这是由蒙德里安执行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:01:50.283

这取决于问题维度的层次结构是如何设置的。我将在这里假设层次结构是

```
All Questions
    > Id 
        > Name 
```

（这可能不是设置此层次结构的最佳方式，因为 Caption 只是给定 Question 成员的属性，而不是级别，但我离题了）。

您做错的是您正在创建一个包含两个级别（Id 和 Caption）的所有成员的集合。通常，较高级别的成员（例如 [Question].[13]）会有汇总的度量值，但因为每个 Id 只有一个 Caption，所以两个级别的平均评分相同。

一种解决方案是不使用 Id 级别，并从 Caption 成员的 UniqueName 中提取 Id。

```
SELECT
NON EMPTY {[Measures].[Rating]} ON COLUMNS,
NON EMPTY {[Question].[Question Caption].Members} ON ROWS
FROM [Ratings] 
```

如果您真的希望 Id 作为结果中的单元格，您也可以使用计算成员来保存该值：

```
WITH MEMBER [Measures].[QuestionId] AS Iif(
        Not IsEmpty([Measures].[Rating]), 
        [Question].CurrentMember.Parent.Name, 
        NULL
    )
SELECT
NON EMPTY {[Measures].[QuestionId], [Measures].[Rating]} ON COLUMNS,
NON EMPTY {[Question].[Question Caption].Members} ON ROWS
FROM [Ratings] 
```

Iif 函数确保当我们没有评分时我们有一个 NULL 成员，否则无论如何你都会为每个问题得到一行。

* * *

编辑：您可以使用单级层次结构`All Questions > Question`（如果您有任何其他对分析有用的问题分类，您可以在其间添加其他级别）。

问题级别代表一个问题实例，因此您可以做很多事情：

1.  将此级别的“唯一标识符”（成员键，由`column`架构中的值给出）设为问题 ID。
2.  将“用户标识符”（由`nameColumn`架构中的值给出）作为问题标题。
3.  您可以将其他在层次结构中没有意义的有用属性添加到此级别（通过架构中的属性标记）。

然后您可以通过 Caption as 选择一个问题`[Question].[the caption here]`，您可以通过 Id as 选择它`[Question].&[Id here]`。如果要检索属性，可以这样做：

```
SELECT
NON EMPTY {[Measures].[Rating]} ON COLUMNS,
NON EMPTY {[Question].[Question].Members} 
    DIMENSION PROPERTIES [Question].Key, [Question].[other property name] ON ROWS
FROM [Ratings] 
```

属性作为元数据添加到生成的 CellSet 中。

# java - Java播放错误的声音频率

> ID：14228331
> 
> 赞同：1
> 
> 时间：2013-01-09T04:35:11.800
> 
> 标签：java, audio, frequency, javasound, waveform

我正在编写一个从一个频率线性转换到另一个频率的 java 声音应用程序。

当我输入一个恒定频率（也就是第一个和最后一个频率相同）时，会播放正确的频率。

但是，只要两个频率之间的差异大于零，播放的频率就会从正确的值开始，但**会以两倍的速率递增，并以差异的两倍结束。**（例如，我输入 500 和 1000；频率从 500 开始，到 1500 结束）。

我最初认为我只是错误地增加了频率，但是当我打印频率值时，它会打印出我想要的值（例如我输入 500 和 1000；打印输出从 500 开始到 1000 结束）。

我通过记录输出声音并在频谱图上查看其频率来检查可听频率的值。这是我的代码的相关简化部分：

```
import java.lang.Math;
import javax.sound.sampled.*;

public class MainSpeech {

    public static void main(String[] args) throws LineUnavailableException {

        double freq; //  frequency in Hz
        int volume = 30;
        int time = 1; // in seconds
        float sampleRate = 8000.0f; // in Hz
        int numSamples = (int)(sampleRate * time); // # of samples within given time
        byte stream[] = new byte[(int)(sampleRate*1)]; // waveform values

        freq = 700;
        for (int i = 0; i < numSamples; i++) {
            freq += 0.1;
            stream[i] = (byte) (Math.sin(2*Math.PI*i*freq/sampleRate)*volume);
        }

        AudioFormat af = new AudioFormat(sampleRate, 8, 1, true, false);
        SourceDataLine sdl = AudioSystem.getSourceDataLine(af);
        sdl.open(af);
        sdl.start();
        sdl.write(stream, 0, stream.length); // play sound
        sdl.drain();
        sdl.close();
    }
} 
```

在这个简化的片段中，频率应该从 700 开始，然后增加 8000 倍 0.1，以 1500 的频率结束，打印输出正确显示。然而，可听频率实际上在 2300 处结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:42:31.457

你在这里有一个错误：

```
2*Math.PI*i*freq/sampleRate 
```

在这里使用 i 或 freq，但不能**同时**使用它们。你所拥有的不是频率的线性变化，而是二次的。如果您希望它的行为如下所述，请使用

```
2*Math.PI*freq/sampleRate 
```

# iphone - 如何在 iPhone 中播放原生 m3u8

> ID：14228333
> 
> 赞同：0
> 
> 时间：2013-01-09T04:35:34.140
> 
> 标签：iphone, m3u8

播放m3u8 palylist时，必须是远程url。我的问题是：如果m3u8索引文件和ts媒体文件在iPhone设备中，那么如何通过http播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T06:31:59.507

使用加载 htmlString 使用 WebView 播放 m3u8 文件

```
<html>

<head>

    <title>HTTP Live Streaming Example</title>

</head>

<body>

    <video

        src="http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"

        height="300" width="400"

    >

    </video>

</body>

</html> 
```

或者

像其他文件一样从 mpmoviplayer 播放

# sharepoint - SharePoint 2010 Web 应用程序 Web.config 是如何生成的？

> ID：14228337
> 
> 赞同：1
> 
> 时间：2013-01-09T04:36:00.810
> 
> 标签：sharepoint, web-config, telerik

不知何故，我有一个额外的“Telerik.Web.UI.WebResource.axd_*”处理程序被自动添加到我农场中的每个 SharePoint 应用程序 web.config 中，每次我创建一个新的 Web 应用程序时。我需要摆脱这种修改，因为每次创建新的 Web 应用程序时它都会破坏场中的所有站点。我还没有弄清楚如何做到这一点。卸载 Telerik 产品 (RadControls for SharePoint) 并没有解决问题。（实际上，卸载过程莫名其妙地在我们手动删除的那些 web.configs 中重新添加了处理程序。）

做了一些研究，显然新 Web 应用程序的 web.config 是按以下页面所述的 3 个步骤生成的（向下滚动到“web.config 文件从何而来”）：

[http://www.charleslee.co.uk/blog/2010/10/28/webconfig/](http://www.charleslee.co.uk/blog/2010/10/28/webconfig/)

脚步：

1.  根 web.config 被应用...在我的情况下，这个文件没有被修改。
2.  应用了补充的 web.configs...我看不到最近创建的或与 Telerik 有任何关系的。
3.  应用了 Config DB mods...我编写了一个应用程序，它列举了场上每个 Web 应用程序的所有 SPWebConfigModification 修改，并且没有返回任何与 Telerik 相关的内容。

所以我的问题是，关于如何为新的 Web 应用程序生成 web.configs，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:06:51.950

没关系，我解决了这个问题。我在原始帖子中的问题的答案是，我没有错过任何关于如何生成配置的内容。问题是我迭代所有 SPWebConfigModification 模块的过程显然是错误的（这些东西有记录吗？）。我没有获取农场实例并遍历 SPWebService Web 应用程序，而是将其更改为遍历 SPWebService.ContentService 返回的模块。这揭示了 Telerik 所做的更改。

```
SPWebService spService = SPWebService.ContentService;
if (spService != null)
{
    Collection<SPWebConfigModification> modifications = spService.WebConfigModifications;
    if (modifications != null)
    {
        for (int i = modifications.Count - 1; i >= 0; i--)
        {
          ...
        }
    }
} 
```

解决了这个问题，现在我可以处理代码以删除不需要的模块。

# php - 从 pecl 源文件创建 php DLL

> ID：14228341
> 
> 赞同：1
> 
> 时间：2013-01-09T04:36:29.577
> 
> 标签：php, pecl

如何从 PECL 源文件构建 DLL 文件。

我需要从 PECL 源 (http://pecl.php.net/package/APC) 为 APC 扩展构建 DLL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:40:26.920

如果您在 Linux 上，生活很容易 :) 该`pecl`命令为您完成工作。它将下载源代码，编译它们并安装扩展。

在 Linux 上，以 root 身份在终端中输入：

```
pecl install apc 
```

安装后，您应该确保您的 php.ini 包含该行

```
extension=apc.so 
```

但是在阅读您的帖子时（您讲述了 dll），我不得不假设您使用的是 Windows。我从来没有在 Windows 上编译过 PHP 扩展。但是你可以从[这里](http://php.net/manual/de/install.windows.building.php)开始调查。

在尝试为自己编译之前，**我会尝试**为您的 PHP 版本找到一个预编译的 windows apc.dll。你可以在[这里](http://downloads.php.net/pierre/)找到一些。您只需下载扩展并将其放在您的 PHP 扩展文件夹中。然后您必须将以下行添加到您的 php.ini 中：

```
extension=apc.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:37:08.470

1.  [从http://www.mediafire.com/php-win64-extensions](http://www.mediafire.com/php-win64-extensions)下载 php_apc-3.1.9-svn20110915-5.3-VC9-x64-win7-2008.zip

2.  在 PHP.INI 文件中启用 APC 扩展。编辑 php.ini 文件并在扩展部分添加以下行：extension = php_apc.dll

3.  重启apache/iis，查看phpinfo的输出。

# python - 如何获得一致地绘制kivy线

> ID：14228342
> 
> 赞同：5
> 
> 时间：2013-01-09T04:36:29.833
> 
> 标签：python, opengl, kivy

我试图在按钮中间画一个简单的“X”。我已经输入了以下绘图代码：

```
 width, height = self.size
    x, y = self.pos
    x1, x2 = x + int(width*0.3), x + int(width*0.7)
    y1, y2 = y + int(height*0.3), y + int(height*0.7)
    with self.canvas:
        Line(points=[x1, y1, x2, y2], width=1, cap='none')
        Line(points=[x2, y1, x1, y2], width=1, cap='none')
    self.canvas.ask_update() 
```

两条对角线，即使它们使用完全相同的整数坐标，绘制的也不相同。左上角到右下角是别名绘制的，而另一个则不是。我怎样才能使它们保持一致？

![在此处输入图像描述](../Images/7e7dae9c892c81944e8128c404d51eed.png)

我应该提到我正在使用 Windows 版本的 kivy 进行测试，但我还没有在任何其他平台上尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:30:14.340

Add 0.5 or 0.375 to your x/y coordinates.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:25:56.170

宽度为 1.0 的 Line 指令使用 GL_LINE，然后根据显卡能力和多重采样数进行混叠。我用 ATI 和 NVIDIA 卡得到了不同的结果。

如果您使用宽度！= 1.0（假设宽度 = 0.75），我们将使用三角形构建网格。结果似乎更加一致。你能试试吗？

# ruby-on-rails - Rails 中的唯一性验证器出错

> ID：14228345
> 
> 赞同：1
> 
> 时间：2013-01-09T04:36:55.897
> 
> 标签：ruby-on-rails

我在验证模型时遇到问题。我想确保对于特定网站，每个库存名称都将保持唯一。

当我将它添加到我的模型时：

```
validates :name, :uniqueness => { :scope => :website } 
```

我收到此错误：

`TypeError - Cannot visit Account::Website:`

关系是这样设置的：

```
class Inventory < ActiveRecord::Base
  belongs_to :website, :class_name => 'Account::Website' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:03:59.570

我不知道，但改用这个：

```
validates :name, :uniqueness => { :scope => :website_id } 
```

修复它。

任何人都可以分享为什么？

# css - css3 word-wrap:break-word / break-all，没有连字符

> ID：14228351
> 
> 赞同：1
> 
> 时间：2013-01-09T04:37:44.040
> 
> 标签：css, google-chrome, text-align, hyphenation, word-break

`word-wrap:break-word;`CSS3 规范说在 Chrome 中必须使用部分支持，`word-wrap:break-all;`但没有连字符。我正在使用`text-align:justify;`有没有想出一个解决方案，在 chrome 中出现断字时有一个连字符？

我已经多次看到这个问题，但还没有找到完整的解决方案。

这是我当前如何使用它的代码示例。

```
 .threecolumn {
      -moz-column-width: auto;
      -moz-column-count: 3;
      -moz-column-gap: 20px;
      -moz-column-rule-color: none;
      -moz-column-rule-style: none;
      -moz-column-rule-width: 0;
      -webkit-column-width: auto;
      -webkit-column-count: 3;
      -webkit-column-gap: 20px;
      -webkit-column-rule-color: none;
      -webkit-column-rule-style: none;
      -webkit-column-rule-width: 0;
      column-width: auto;
      column-count: 3;
      column-gap: 20px;
      column-rule-color: none;
      column-rule-style: none;
      column-rule-width: 0;
      text-align: justify;
      -webkit-hyphens: auto;
      -moz-hyphens: auto;
      -ms-hyphens: auto;
      hyphens: auto;
      word-wrap: break-word;
      word-break:break-all; /* chrome, no hyphens :( */
    } 
```

[jsFiddle](http://jsfiddle.net/2CCkN/3/)

作品在 FF 和 Safari 中找到。

使用：Firefox：17 Chrome：23 Safari：6.0.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:22:27.220

谷歌浏览器不支持 CSS4“连字符”功能： http: [//generatedcontent.org/post/44751461516/finer-grained-control-of-hyphenation-with-css4-text](http://generatedcontent.org/post/44751461516/finer-grained-control-of-hyphenation-with-css4-text)

我刚刚询问了支持他们是否可以为该属性添加功能/支持。希望他们添加它............

# css - 一个项目如何使用屏幕全宽减去 60 像素？

> ID：14228359
> 
> 赞同：0
> 
> 时间：2013-01-09T04:38:26.960
> 
> 标签：css, width

[这里的例子](http://jsfiddle.net/Y7PhV/)

我在屏幕左侧有一些导航，所以我将正文宽度设置为 100%。

导航宽度为 60px。额外的 div 我想从屏幕左侧的 60px 到屏幕右侧的末端。

我的问题是它总是以相同的身体宽度加上 60px 并且我在屏幕底部有一个 x-scroll。

//这是在左侧，宽度为 60px

```
left:0;
position:fixed;
width:60px;
height:100%; 
```

//这是在导航和屏幕右侧之间，但应该占据整个宽度。

```
background:black;
width:100%;
height:100px;
margin-left:60px; 
```

如何在屏幕左侧显示 60px 宽的内容，然后有一个 div 将其连接到屏幕右侧而不会过度扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:06:29.770

看来您需要一个已被广泛记录的固定流体布局。固定部分的宽度应为 60 像素，流体部分应占其余宽度。看看[动态驱动器](http://www.dynamicdrive.com/style/layouts/category/C13/)以获得一些灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:43:50.653

根据您的需要，您可能希望将其添加到您`body`的 css:`overflow-x:hidden`中，这将切断右侧多余的 60px 并防止滚动条出现。但是，div 中的内容也可能会被截断。这实际上取决于您在 div 中放置的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:26:51.363

看，我们总是有一种解决方案可`table`用于这些场景，但我的假设是您不想使用该表。在`divs`我们的设计中，我们可以将 div 的 display 属性设置为 table 以使其工作。请在[此处](http://jsfiddle.net/Y7PhV/86/)找到解决方案。

这可以按您的意愿工作，并且也不会将水平滚动带到右侧的主要内容部分。希望这可以帮助。

# android - Android 从 listView onClick 获取正确的信息

> ID：14228361
> 
> 赞同：1
> 
> 时间：2013-01-09T04:38:45.380
> 
> 标签：android, listview, onitemclick

所以我有一个 ListView 是从一个 web 服务的 xml 文件中填充的。该列表填充良好。好吧，它使用了一种糟糕的填充方法，我知道它应该使用 AsyncTask 但它会填充在 UI 线程上。我尝试过使用 AsyncTask，但我输了！我知道我知道！！如果您对此有解决方案，我很乐意听到它！无论如何，当单击列表项时，我会开始一个新活动并使用 intent.putExtra 传递信息这有效，但它始终显示列表中第一项的信息。例子：

一种

乙

C

D

乙

是列表中的项目。在以下活动中按下其中任何一个都会给我与 A 相关的所有信息我该如何解决这个问题？？？

列表视图活动：

```
 public class ColorPacksMain extends Activity {
// All static variables
static final String URL = "https://dl.dropbox.com/u/43058382/BeanPickerColorToolUpdates/ColorPacksList.xml";
// XML node keys
static final String KEY_COLORPACK = "ColorPack"; // parent node
static final String KEY_ID = "id";
static final String KEY_USER = "user";
static final String KEY_THEME = "theme";
static final String KEY_THEMECOLOR = "themeColor";
static final String KEY_TEXTCOLORPRIMARY = "primaryTextColor";
static final String KEY_TEXTCOLORSECONDARY = "secondaryTextColor";
static final String KEY_THUMB_URL = "thumb_url";
static final String KEY_DL_URL_GSM = "dl_url_gsm";
static final String KEY_DL_URL_LTE = "dl_url_lte";
static final String KEY_SCREEN1 = "screen1";
static final String KEY_SCREEN2 = "screen2";
static final String KEY_SCREEN3 = "screen3";
static final String KEY_SCREEN4 = "screen4";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.color_packs_activity);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy);

    ArrayList<HashMap<String, String>> colorPacksList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_COLORPACK);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_USER, parser.getValue(e, KEY_USER));
        map.put(KEY_THEME, parser.getValue(e, KEY_THEME));
        map.put(KEY_THEMECOLOR, parser.getValue(e, KEY_THEMECOLOR));
        map.put(KEY_TEXTCOLORPRIMARY, parser.getValue(e, KEY_TEXTCOLORPRIMARY));
        map.put(KEY_TEXTCOLORSECONDARY, parser.getValue(e, KEY_TEXTCOLORSECONDARY));
        map.put(KEY_DL_URL_GSM, parser.getValue(e, KEY_DL_URL_GSM));
        map.put(KEY_DL_URL_LTE, parser.getValue(e, KEY_DL_URL_LTE));
        map.put(KEY_SCREEN1, parser.getValue(e, KEY_SCREEN1));
        map.put(KEY_SCREEN2, parser.getValue(e, KEY_SCREEN2));
        map.put(KEY_SCREEN3, parser.getValue(e, KEY_SCREEN3));
        map.put(KEY_SCREEN4, parser.getValue(e, KEY_SCREEN4));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        colorPacksList.add(map);
    }

    list = (ListView) findViewById(R.id.colorPacksList);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, colorPacksList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
              // Launching new Activity on selecting single List Item
              Intent i = new Intent(getApplicationContext(), ListClickedItem.class);
              // sending data to new activity
              String user = ((TextView) findViewById(R.id.user)).getText().toString();
              String theme = ((TextView) findViewById(R.id.theme)).getText().toString();
              String themeColor = ((TextView) findViewById(R.id.themeColor)).getText().toString();
              String tcP = ((TextView) findViewById(R.id.primaryTextColor)).getText().toString();
              String tcS = ((TextView) findViewById(R.id.secondaryTextColor)).getText().toString();
              String dlGSM = ((TextView) findViewById(R.id.GSMurl)).getText().toString();
              String dlLTE = ((TextView) findViewById(R.id.LTEurl)).getText().toString();
              String screen1 = ((TextView) findViewById(R.id.screen1url)).getText().toString();
              String screen2 = ((TextView) findViewById(R.id.screen2url)).getText().toString();
              String screen3 = ((TextView) findViewById(R.id.screen3url)).getText().toString();
              String screen4 = ((TextView) findViewById(R.id.screen4url)).getText().toString();
              i.putExtra("UserName", user);
              i.putExtra("ThemeName", theme);
              i.putExtra("ThemeColor", themeColor);
              i.putExtra("TextColorPrimary", tcP);
              i.putExtra("TextColorSecondary", tcS);
              i.putExtra("GSM", dlGSM);
              i.putExtra("LTE", dlLTE);
              i.putExtra("Screenshot 1", screen1);
              i.putExtra("Screenshot 2", screen2);
              i.putExtra("Screenshot 3", screen3);
              i.putExtra("Screenshot 4", screen4);
              startActivity(i);

        }
    });     
} 
```

点击某项后显示的Activity：

```
 public class ListClickedItem extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.list_clicked_activity);

    TextView txtUser = (TextView) findViewById(R.id.userName);
    TextView txtTheme = (TextView) findViewById(R.id.themeName);
    TextView txtThemeColor = (TextView) findViewById(R.id.themeColor);
    TextView txtColor1 = (TextView) findViewById(R.id.textColor1);
    TextView txtColor2 = (TextView) findViewById(R.id.textColor2);
    TextView txtLTEurl = (TextView) findViewById(R.id.lteUrl);
    TextView txtGSMurl = (TextView) findViewById(R.id.gsmUrl);

    ImageView screenShot1 = (ImageView) findViewById(R.id.screen1);
    ImageView screenShot2 = (ImageView) findViewById(R.id.screen2);
    ImageView screenShot3 = (ImageView) findViewById(R.id.screen3);
    ImageView screenShot4 = (ImageView) findViewById(R.id.screen4);

    Bundle extras = getIntent().getExtras();
    if(extras!=null){
        String user=extras.getString("UserName");
        String themeName=extras.getString("ThemeName");
        String themeColor=extras.getString("ThemeColor");
        String tcPrimary=extras.getString("TextColorPrimary");
        String tcSecondary=extras.getString("TextColorSecondary");
        String linkGsm=extras.getString("GSM");
        String linkLte=extras.getString("LTE");
        String screen1=extras.getString("Screenshot 1");
        String screen2=extras.getString("Screenshot 2");
        String screen3=extras.getString("Screenshot 3");
        String screen4=extras.getString("Screenshot 4");

        txtUser.setText("User Name: " + user);
        txtTheme.setText("Theme Name: " + themeName);
        txtThemeColor.setText("Theme Color: " + themeColor);
        txtColor1.setText("Primary Text Color: " + tcPrimary);
        txtColor2.setText("Secondary Text Color: " + tcSecondary);
        txtLTEurl.setText(linkLte);
        txtGSMurl.setText(linkGsm);

        Drawable s1;
        try {
            InputStream is = (InputStream) new URL(screen1).getContent();
            s1 = Drawable.createFromStream(is, "src name");
            screenShot1.setBackgroundDrawable(s1);
        } catch (Exception e) {

        }

        Drawable s2;
        try {
            InputStream is = (InputStream) new URL(screen2).getContent();
            s2 = Drawable.createFromStream(is, "src name");
            screenShot2.setBackgroundDrawable(s2);
        } catch (Exception e) {

        }

        Drawable s3;
        try {
            InputStream is = (InputStream) new URL(screen3).getContent();
            s3 = Drawable.createFromStream(is, "src name");
            screenShot3.setBackgroundDrawable(s3);
        } catch (Exception e) {

        }

        Drawable s4;
        try {
            InputStream is = (InputStream) new URL(screen4).getContent();
            s4 = Drawable.createFromStream(is, "src name");
            screenShot4.setBackgroundDrawable(s4);
        } catch (Exception e) {

        }

    }

} 
```

而且，我的 Adapter 类，因为我知道它会被要求：

```
 public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView user = (TextView)vi.findViewById(R.id.user); // username
    TextView theme = (TextView)vi.findViewById(R.id.theme); // theme name
    TextView themeColor = (TextView)vi.findViewById(R.id.themeColor); // theme color
    TextView primaryTextColor = (TextView)vi.findViewById(R.id.primaryTextColor); // main text color
    TextView secondaryTextColor = (TextView)vi.findViewById(R.id.secondaryTextColor); // secondary text color
    TextView gsmURL = (TextView)vi.findViewById(R.id.GSMurl); // Maguro URL
    TextView lteURL = (TextView)vi.findViewById(R.id.LTEurl); // Toro/ToroPlus URL
    TextView screenShot1 = (TextView)vi.findViewById(R.id.screen1url); // Screenshot url
    TextView screenShot2 = (TextView)vi.findViewById(R.id.screen2url); // Screenshot url
    TextView screenShot3 = (TextView)vi.findViewById(R.id.screen3url); // Screenshot url
    TextView screenShot4 = (TextView)vi.findViewById(R.id.screen4url); // Screenshot url
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> colorPack = new HashMap<String, String>();
    colorPack = data.get(position);

    // Setting all values in listview
    user.setText(colorPack.get(ColorPacksMain.KEY_USER));
    theme.setText(colorPack.get(ColorPacksMain.KEY_THEME));
    themeColor.setText(colorPack.get(ColorPacksMain.KEY_THEMECOLOR));
    primaryTextColor.setText(colorPack.get(ColorPacksMain.KEY_TEXTCOLORPRIMARY));
    secondaryTextColor.setText(colorPack.get(ColorPacksMain.KEY_TEXTCOLORSECONDARY));
    gsmURL.setText(colorPack.get(ColorPacksMain.KEY_DL_URL_GSM));
    lteURL.setText(colorPack.get(ColorPacksMain.KEY_DL_URL_LTE));
    screenShot1.setText(colorPack.get(ColorPacksMain.KEY_SCREEN1));
    screenShot2.setText(colorPack.get(ColorPacksMain.KEY_SCREEN2));
    screenShot3.setText(colorPack.get(ColorPacksMain.KEY_SCREEN3));
    screenShot4.setText(colorPack.get(ColorPacksMain.KEY_SCREEN4));
    imageLoader.DisplayImage(colorPack.get(ColorPacksMain.KEY_THUMB_URL), thumb_image);
    return vi;
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:45:35.010

在每一行写 view.findViewById。就像下面一样。

```
 public void onItemClick(AdapterView<?> arg0, View view, int arg2,
            long arg3) {
          // Launching new Activity on selecting single List Item
          Intent i = new Intent(getApplicationContext(), ListClickedItem.class);

          // sending data to new activity

          String user = ((TextView) view.findViewById(R.id.user)).getText().toString();
          String theme = ((TextView) view.findViewById(R.id.theme)).getText().toString();

          startActivity(i);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T04:45:33.680

您正在填充数据以通过意图， `i.putExtra("UserName", user);`但您正在通过诸如`extras.getString("UserName");`

相反，您会在`ListClickedItem`活动中获得如下值。

```
String user = getIntent().getStringExtra("UserName"); 
```

**当您使用 Bundle 填充数据并在其他活动中获取数据时，最有可能使用**getExtras() 。**希望这可以帮助。**

 ****注意：**除了上面的更正，正如你所说，你知道你应该使用异步任务，我可以建议你再做一件事——当你使用异步任务时，在你的`doInBackground()`方法中从 web 服务获取所需的数据后，你应该将数据填充到`onPostExecute()`方法中的列表视图。您可以使用`runOnUIThread()`在 onPostExecute() 方法中填充数据，甚至`onClickListener`在此方法本身中将其设置为列表视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:22:23.093

```
use an AsyncTask but instead it populates on the UI thread. I tried and tried with an AsyncTask, but I lost the fight! 
```

使用 Arraylists 而不是 hashmap。我已经使用了 Arraylist 并在 asyncTask 中添加了元素。

```
public class Home extends Activity {
/** Called when the activity is first created. */
static final String URL = "https://dl.dropbox.com/u/43058382/BeanPickerColorToolUpdates/ColorPacksList.xml";

static final String KEY_ITEM = "Book"; // parent node
static final String KEY_BOOKAUTHOR = "book_author";
static final String KEY_BOOKRATING = "BookRating";
static final String KEY_BOOKID = "BookID";
static final String KEY_BOOKDESC = "BookDescription";
static final String KEY_BOOKDATEPUBLISHED = "DatePublished";
static final String KEY_BOOKTITLE = "BookTitle";
static final String KEY_BOOKCODE = "BookCode";

    static ArrayList<String> BookTitle = null;
static ArrayList<Integer> BookRating = null;
static ArrayList<String> BookDescription = null;
static ArrayList<String> BookCoverPhotos = null;
static ArrayList<String> BookAuther = null;

    ConnectivityManager cm;

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    // First Check the Internet Connectivity
    if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            // Avoid to reload the page again and again
            if (BookTitle == null) {
                BookTitle = new ArrayList<String>();
                BookRating = new ArrayList<Integer>();
                BookDescription = new ArrayList<String>();
                BookIDs = new ArrayList<String>();
                BookCode = new ArrayList<String>();
                BookCoverPhotos = new ArrayList<String>();
                BookAuther = new ArrayList<String>();

                                    // Execute the AsyncTask
                new myBackGroundTask().execute(URL);
            } else {

                ImageAdapter adapter2 = new ImageAdapter(getBaseContext(),
                        act);
                adapter2.notifyDataSetChanged();
                gridView.setAdapter(adapter2);
                             } 
```

这是 asyncTask 展示我们如何在后台解析 XML

```
private class myAsyncTask extends AsyncTask<String, Integer, String> {

    ProgressDialog progressDialog;
    ImageAdapter adapter = new ImageAdapter(getBaseContext(), act);

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = ProgressDialog.show(getParent(),
                "Your Title ...",
                "This may Take a few seconds.\nPlease Wait...");

    }

    @Override
    protected String doInBackground(String... params) {

        String URL = params[0];
        XMLParser parser = new XMLParser();
        String XMLString = null;
        XMLString = parser.getXmlFromUrl_FeaturedBooks(URL, lIndex);

        if (XMLString != null) {

            Document doc = parser.getDomElement(XMLString);
            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            // looping through all item nodes <item>

            for (int i = 0; i < nl.getLength(); i++) {

                Element e = (Element) nl.item(i);

                try {
                    BookRating.add(Integer.valueOf(parser.getValue(e,
                            KEY_BOOKRATING)));

                } catch (Exception e2) {
                    BookRating.add(0);
                }

                BookDescription.add(parser.getValue(e, KEY_BOOKDESC));
                BookTitle.add(parser.getValue(e, KEY_BOOKTITLE));
                BookCoverPhotos
                        .add("http://shiaislamicbooks.com/books_Snaps/"
                                + parser.getValue(e, KEY_BOOKCODE)
                                + "/1_thumb.jpg");
                int tempCount = BookCoverPhotos.size() - 1;
                BookAuther.add(parser.getValue(e, KEY_BOOKAUTHOR));

                publishProgress(i + 1);
            }

        } else {
                            // Request Time
            publishProgress(5000);
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        progressDialog.setMessage(values[0]
                + " Book(s) found \nPlease wait...");
        adapter.notifyDataSetChanged();
        if (values[0] == 5000) {
            Toast.makeText(context,
                    "Rrequest Time out!\nNo or Slow Internet Connection!",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
        adapter.notifyDataSetChanged();
        gridView.setAdapter(adapter);

    }
} 
```

### 编辑

这是扩展 BaseAdapter 类的 imageAdapter

```
public class ImageAdapter extends BaseAdapter {

    public ImageAdapter(Context c) {
        context = c;

    }

    // ---returns the number of images---
    public int getCount() {

        return BookTitle.size();

    }

    public ImageAdapter(Context ctx, Activity act) {

        inflater = (LayoutInflater) act
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    // ---returns the ID of an item---
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    // ---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) {

        // ImageView bmImage;

        final ViewHolder holder;
        View vi = convertView;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.grid_style, parent, false);
            holder = new ViewHolder();
            holder.txt_BooksTitle = (TextView) vi
                    .findViewById(R.id.txt_BookTitle);

            holder.img_BookCoverPhoto = (ImageView) vi
                    .findViewById(R.id.imgBookCover);
            vi.setTag(holder);
        } else {

            holder = (ViewHolder) vi.getTag();
        }
        holder.txt_BooksTitle.setText(BookTitle.get(position) + "");
        holder.img_BookCoverPhoto.setImageBitmap(bitmapArray.get(position));
        return vi;
    }
}

class ViewHolder {
    TextView txt_BooksTitle;
    ImageView img_BookCoverPhoto;
} 
```**

# build - TFS 2010 构建超时

> ID：14228362
> 
> 赞同：1
> 
> 时间：2013-01-09T04:39:00.910
> 
> 标签：build, tfs

在过去的两周里，我正在处理以下 TFS 2010 构建问题，此时完全没有选择可以尝试。

以下是问题描述： - 在构建的各个阶段构建失败并出现“操作超时”错误 - 大部分时间是在 GET 操作期间（不同的文件） - 其他时候它发生在实际构建期间

构建定义是正确的，因为我们之前已经正常运行构建，问题仅在我们将 TFS VM 移动到新的 WIN2012 Hyper-v 服务器后才发生 - 没有对 TFS 或其 VM 进行其他更改。

我已经检查了所有路径和帐户权限，一切似乎都已检查 - 确实需要对此进行一些输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:59:45.347

更新：

经过数周的故障排除后，我们终于举手并决定做一件不可思议的事情 - 致电 MS 支持 :)

原来罪魁祸首是 ESET Antivirus。当我们重新启动必须启动它的 VM 时，它已在 TFS VM 上安装但已禁用。

根据 MS Support 的说法，这是一个常见问题，推荐的方法是保持 VM 运行干净且不使用防病毒软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:21:13.247

我也面临同样的问题，经过数小时的研究，罪魁祸首是构建代理

# c - 为什么我不能将我在 C 中的输入与常规文本进行比较？

> ID：14228365
> 
> 赞同：1
> 
> 时间：2013-01-09T04:39:21.587
> 
> 标签：c

我正在尝试将常规文本与我的输入进行比较，如果发生这种特定情况，我想打印一些东西，如果没有，就继续运行。

这是代码：

```
int main()

{
    int c;
    c = getchar();

    while (c != EOF)

    {
        putchar(c);

        if (c == 'nir')
        {
            printf ("you typed nir");
        }

        c = getchar();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:53:51.280

您正在尝试将字符串与字符进行比较。而不是使用 getchar 尝试获取字符串。

```
char str[100], line[500]; 
```

1) 使用 fgets 读取一行。

```
fgets(line,100, stdin) 
```

2) 使用 sscanf 获取字符串。

```
sscanf(line,"%s", str); 
```

3) 使用 strcmp 比较字符串。

```
if(strcmp(str,"nir") == 0) 
    printf("You entered nir "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:55:47.083

这个问题有点太困惑了，我无法一次回答，所以让我们从头开始。首先，`'nir'`（如果它可以编译的话）是一种非常奇怪的方式来编写一个整数，而我认为你的意思`"nir"`是一串文本。但是，`(c == "nir")`不编译，不是吗？[这大概就是您尝试`(c == 'nir')`随机拍摄的原因，不是吗，尽管这在 C 中没有任何意义。]

在您使用它的上下文中，`"nir"`是一个*地址。* 现在，您可能还不知道这意味着什么——在您获得几周的 C 语言经验之前，您也不会知道。您今天可以使用的是标准库的`strcmp()`函数，由*string.h 提供。* 我建议您查看并从那里开始。

顺便说一句，不要再打字`'nir'`了！这在 C 中没有任何意义。单引号表示单个字符，例如`'n'`，代表字符的整数 ASCII 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:49:15.723

```
main()
{
char c;

int i = 0;
do
{
     c = getchar();
     switch(i)
     {
         case 0: 
               if(c == 'n')
               {
                 i++;
               }
                break;
         case 1: 
               if(c == 'i')
               {
                 i++;
               }
               else
               {
                  i = 0; 
                }
                break;
         case 2: 
               if(c == 'r')
               {
                 printf ("you typed nir");
               }
               i = 0; 
               break;
      }
 }while (c != EOF);
 } 
```

试试这个代码

# ajax - Rails 中使用 AJAX 的多步表单

> ID：14228368
> 
> 赞同：1
> 
> 时间：2013-01-09T04:39:51.167
> 
> 标签：ajax, ruby-on-rails-3

我正在关注 Railscast #217，它展示了如何从部分构建多步表单。我按照 Ryan 的指示让我的代码工作，但想知道如何转换它以便 Rails 使用 AJAX 加载部分？

**users_controller.rb**

```
class UsersController < ApplicationController
  ...
  def new
    session[:user_params] ||= {}
    @user = User.new
  end

  def create
    session[:user_params].deep_merge!(params[:user]) if params[:user]

    params.each do |key,value|
      session.deep_merge!(key=>value) if params[:user]
    end

    @user = User.new(session[:user_params])
    @user.current_step = session[:user_step]
    if params[:prev_button]
      @user.previous_step
    elsif @user.last_step?
      @user.save
    else
      @user.next_step
    end

    session[:user_step] = @user.current_step

    if @user.new_record?
      render :new
    else
      session[:user_step] = session[:user_params] = nil
      flash[:success] = "Welcome to Friends First!"
      redirect_to @user
    end
    ...
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  attr_writer :current_step

  def current_step
    @current_step || steps.first
  end

  def steps
    %w[step1 step2 step3]
  end

  def next_step
    self.current_step = steps[steps.index(current_step) + 1]
  end

  def previous_step
    self.current_step = steps[steps.index(current_step) - 1]
  end

  def first_step?
    current_step == steps.first
  end

  def last_step?
    current_step == steps.last
  end
end 
```

**新的.html.erb**

```
<%= simple_form_for(@user) do |f| %>
  <%= render 'shared/error_messages' %>

  <%# render @user.current_step, :f => f %>

  <div id="form"></div>

  <div class="center">
    <%= f.submit "Previous", class: "btn btn-primary", :name => "prev_button" unless @user.first_step?  %>
    <%= f.submit "Next", class: "btn btn-primary", :name => "next_button" unless @user.last_step? %>
    <%= f.submit "Submit", class: "btn btn-primary", :name => "submit_button" if @user.last_step? %>
  </div>

<% end %> 
```

**编辑** 我将发布我的部分内容。注意`f`变量——我不知道如何使用 AJAX 将它从表单传递到我的部分。

**_step1.html.erb**

```
<div class="offset1">
  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.input :email %>
  <%= f.input :password %>
  <%= f.input :password_confirmation %>  
</div> 
```

**创建.js.erb**

```
$('#form').html('<%= escape_javascript(render(@user.current_step)) %>'); 
```

这不起作用，我需要以`f`某种方式通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:35:32.257

似乎在您的 rails 操作中，您没有处理 AJAX 请求，也没有在您的视图中启动它们..

使用 AJAX，您需要按顺序执行以下操作：

1.  来自客户端的适当请求。
2.  在服务器端正确处理。
3.  在客户端正确处理服务器响应。

这是一个[简单的 ajax 示例](https://github.com/kschlarman/ajax)，这是一个使用 AJAX的[分页示例](https://github.com/ronalchn/ajax_pagination)

祝你好运 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:01:58.447

让它感觉更 ajaxy 的一个非常简单的方法是使用[pjax-rails](https://github.com/rails/pjax_rails)。

您几乎不需要更改任何内容，只需定义`pjax-container`将重新加载的 div。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-17T11:57:00.007

@mikglaz 我也遇到了同样的问题。我找到的解决方案是在您的“.js.erb”文件中重新创建表单。我从[这里](https://railsforum.com/topic/839-retrieve-form-builder-object-on-ajax-callback/)找到的。

# perl - 使用 Perl 和 Google Maps API 进行反向地理编码

> ID：14228371
> 
> 赞同：1
> 
> 时间：2013-01-09T04:40:28.560
> 
> 标签：perl, google-maps, cpan, reverse-geocoding

为了与 Google Maps API 交互，存在一个 Perl 模块。代码如下：

```
 use Geo::Coder::Google;
 $geocoder = Geo::Coder::Google->new();
 @location = $geocoder->geocode(location => '1600 Pennsylvania Ave. Washington DC USA'); 
```

网站来源：[http ://search.cpan.org/~arcanez/Geo-Coder-Google-0.11/lib/Geo/Coder/Google/V2.pm](http://search.cpan.org/~arcanez/Geo-Coder-Google-0.11/lib/Geo/Coder/Google/V2.pm)

但是我需要从坐标到地址。即使这意味着在 PERL 中使用不同的方法，那又是如何完成的呢？请注意，我尝试了 OpenMaps API，但它不准确。谷歌地图似乎要好得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T22:27:02.270

Geo::Coder::Google 的维护者接受了我的补丁，因此该模块现在支持反向地理编码（从 0.12 版开始）。

示例使用：

```
use Geo::Coder::Google;
$geocoder = Geo::Coder::Google->new(apiver => 3);
$location = $geocoder->reverse_geocode(latlng => '37.778907,-122.39732'); 
```

参见文档：[http ://metacpan.org/pod/Geo::Coder::Google::V3](http://metacpan.org/pod/Geo%3a%3aCoder%3a%3aGoogle%3a%3aV3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:21:52.690

答案是 Geo::Coder::Google 没有为反向查找实现*latlng*参数。所以你不能用它来做这件事。

但是，添加反向查找功能将非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:22:41.413

回答：

1.  下载 CPAN`Geo::Coder::Google`对象。
2.  导航到 V3.pm 对象。
3.  将此模块放入代码中。

`sub reverseGeocode {my $self = shift;`

```
my %param;
if (@_ % 2 == 0) {
    %param = @_;
} else {
    $param{location} = shift;
}

my $location = $param{location} 
    or Carp::croak("Usage: reverseGeocode(location => \$location)");

if (Encode::is_utf8($location)) {
    $location = Encode::encode_utf8($location);
}

my $uri = URI->new("http://$self->{host}/maps/api/geocode/json");
my %query_parameters = (latlng => $location);
$query_parameters{language} = $self->{language} if defined $self->{language};
$query_parameters{region} = $self->{region} if defined $self->{region};
$query_parameters{oe} = $self->{oe};
$query_parameters{sensor} = $self->{sensor} ? 'true' : 'false';
$uri->query_form(%query_parameters);
my $url = $uri->as_string;

if ($self->{client} and $self->{key}) {
    $query_parameters{client} = $self->{client};
    $uri->query_form(%query_parameters);

    my $signature = $self->make_signature($uri);
    # signature must be last parameter in query string or you get 403's
    $url = $uri->as_string;
    $url .= '&signature='.$signature if $signature;
} 
```

然后像这样使用它：

```
 my $location = $geocoder->reverseGeocode(location => '40.7837366863403,-73.9882784482727'); 
```

然后你可以像这样访问返回的对象：

```
 print $location->{formatted_address}; 
```

要查看地址的详细部分，请参阅以下链接作为指南： [https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# jquery - 选中复选框时调用的函数

> ID：14228372
> 
> 赞同：0
> 
> 时间：2013-01-09T04:40:40.503
> 
> 标签：jquery, checkbox

我有一个 Wordpress 选项，它是一个复选框，id="is_custom_colour"。

选中此复选框时，我希望显示一个隐藏选项。

我有在单击复选框时有效的代码，但如果选项“is_custom_colour”已被选中，则会失败。您必须单击它（取消选中它）才能显示隐藏的选项。

这是可以正常工作但功能不理想的原始代码（custom_colour 是隐藏选项的 id）：

```
<script type="text/javascript">
jQuery(document).ready(function($) {

    $('#is_custom_colour').click(function() {
        $('#section-custom_colour').fadeToggle(400);
    });

    if ($('#is_custom_colour:checked').val() !== undefined) {
        $('#section-custom_colour_hidden').show();
    }

});
</script> 
```

如果我将其更改为

```
<script type="text/javascript">
jQuery(document).ready(function($) {

    if ($('#is_custom_colour:checked').val() !== undefined) {
        $('#section-custom_colour').fadeToggle(400);
    });

    if ($('#is_custom_colour:checked').val() !== undefined) {
        $('#section-custom_colour_hidden').show();
    }

});
</script> 
```

它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:53:22.083

尝试使用,`.is(':checked')`来检查复选框是否被选中

```
jQuery(document).ready(function($){
   if($('#is_custom_colour').is(':checked')){
      $('#section-custom_colour_hidden').show();
    }
});

<form id="form1" name="form1" method="post" action="">
    <label>
      <input name="checkbox" type="checkbox" id="is_custom_colour" value="checkbox" checked="checked" />
      Checkbox</label>   
</form>
<div id="section-custom_colour_hidden" style="display:none">HIDDEN AREA</div> 
```

# java - 我怎样才能对这个进行冒泡排序？

> ID：14228380
> 
> 赞同：1
> 
> 时间：2013-01-09T04:41:16.793
> 
> 标签：java, algorithm, sorting, bubble-sort, array-algorithms

在这个程序中，我只想对`ArrayList` `words`. 到目前为止，我使用了`Collections.sort`它，它已按字母顺序将所有行放在文本文件中。但是，我想为这个程序实现一个二进制搜索算法，*但是*，我认为如果不对数据进行排序（例如合并排序、冒泡排序）就不可能这样做。我可能错了，但这就是我来这里寻求指导和知识的原因。

其次，当我创建一个排序方法时，这是 a `words`is a `String`not an `String[]`。然后如何使用这种数据类型进行冒泡排序？

```
public static void main(String[]args) throws IOException{
    Scanner scan = new Scanner(System.in);
    String stringSearch = scan.nextLine();

    ArrayList<String> words = new ArrayList<String>();
    BufferedReader reader = new BufferedReader(new FileReader("File1.txt"));

    String line;

    while ((line = reader.readLine()) != null) {                
        words.add(line);
    }reader.close();

    Collections.sort(words);
    for(String str:words)
        System.out.println(str); 

    for(String sLine : words) 
    {
        if (sLine.contains(stringSearch)) 
        {
            int index = words.indexOf(sLine);
            System.out.println("Got a match at line " + index);

        }
     }

    System.out.println(words.size());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:49:41.290

**首先**，您可以使用 Collections.sort(Collection) 对列表进行排序。

**其次**，您可以使用 ArrayList 实现的 List.get(int) 来实现 O(1) 索引访问。

**第三**， Object.compareTo(Object) 将完成指导您的二进制搜索循环的工作。

对不起，如果我误解了什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T07:50:33.300

冒泡排序是一种简单的排序算法，它反复遍历应该排序的列表，比较每对相邻的项目，如果它们的顺序错误则交换它们。重复通过列表，直到不需要交换，这表明列表已排序。你知道为什么它被称为冒泡排序，因为较小的值会冒泡到列表的顶部，而较大的值会下沉到底部。

请从我的技术博客中找到完整的源代码 - [http://www.algonuts.info/java---how-to-create-a-bubble-sort.html](http://www.algonuts.info/java---how-to-create-a-bubble-sort.html)

```
package info.algonuts;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

class BubbleSortCompute {
    static List <Integer> intList = new ArrayList <Integer>();

    public static void add(List <Integer> temp) {
        intList.clear();
        Iterator<Integer> ptr  = temp.iterator();
        while(ptr.hasNext()) {
            intList.add(ptr.next());
        }
    }

    public static void sort() {
        System.out.println("Before Bubble Sort:");
        Iterator<Integer> ptr  = intList.iterator();
        while(ptr.hasNext()) {
            System.out.print(ptr.next()+" ");
        }
        System.out.println("\n\nAfter Bubble Sort:");
        compute();
        ptr  = intList.iterator();
        while(ptr.hasNext()) {
            System.out.print(ptr.next()+" ");
        }
    }

    private static void compute() {
        int temp;
        int intListSize = intList.size();
        for(int outerCounter = 0;outerCounter < intListSize; outerCounter++) {
            for(int interCounter = 0;interCounter < intListSize - outerCounter - 1; interCounter++) {
                if(intList.get(interCounter) >= intList.get(interCounter+1)) {
                    temp  = intList.get(interCounter+1);
                    intList.set(interCounter+1, intList.get(interCounter));
                    intList.set(interCounter, temp);
                }
            }
        }   
    }
}

public class BubbleSort {
    //Entry Point
    public static void main(String[] args) {
        List <Integer> intList = new ArrayList <Integer>(Arrays.asList(50,2,5,78,90,20,4,6,98,1));
        BubbleSortCompute.add(intList);
        BubbleSortCompute.sort();
    }
} 
```

# arrays - 如何为矩阵乘法创建 Seq[Array[Double]]？

> ID：14228381
> 
> 赞同：0
> 
> 时间：2013-01-09T04:41:22.963
> 
> 标签：arrays, algorithm, scala, matrix

```
class MatrixMultiplication {
  def singleThreadedMultiplication(m1:Seq[Array[Double]], m2:Array[Array[Double]] ) ={
    val res =  Array.fill(m1.length, m2(0).length)(0.0)

    for(row <- 0 until m1.length;
        col <- 0 until m2(0).length;
        i   <- 0 until m1(0).length){
      res(row)(col) += m1(row)(i) * m2(i)(col)
    }

    res
  }
} 
```

__

```
object multiplication {
  def main(args : Seq[Array[Double]], args2 : Array[Double]) : Unit = {
    val matrixmult = new MatrixMultiplication
    var b = new Array[Double](4)
    b = Array(2,1,2,1)
    seq: Seq[Double] = WrappedArray(1, 0, 2, 0)
    matrixmult.singleThreadedMultiplication(Seq[Double],b)
  }
} 
```

我只需要知道如何运行单线程乘法方法，因为它的第一个参数是`Seq[Array[Double]]`，我不知道，我也没有设法找到如何在第二类中创建 seq double 数组的任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:48:33.417

`Seq`是一个特征，并且有许多子类实现它。`List`例如`ArrayBuffer`。因此，您可以创建一个`Array[Array[Double]]`并将其传递给`singleThreadedMultiplication`. 例如，可以创建适当的类型并将`val array = Array(Array(1.0,2.0,3.0))`其传递给`m1`或传入。`m2``singleThreadedMultiplication`

```
object multiplication {
  def main(args : Seq[Array[Double]], args2 : Array[Double]) : Unit = {
    val matrixmult = new MatrixMultiplication
    matrixmult.singleThreadedMultiplication(args, Array(args2)
  }
} 
```

要运行它并使用传入的参数，请删除这些行，因为它们没有被使用。

```
var b = new Array[Double](4)
b = Array(2,1,2,1)
seq: Seq[Double] = WrappedArray(1, 0, 2, 0) 
```

然后更改调用以使用传入的参数。

```
matrixmult.singleThreadedMultiplication(args, Array(args2)) 
```

这会运行，但你有一个`java.lang.ArrayIndexOutOfBoundsException`函数`singleThreadedMultiplication`。

```
scala> val a = Array(2.0,1.0,2.0,1.0)
b: Array[Double] = Array(2.0, 1.0, 2.0, 1.0)

scala> val b = Array(Array(1.0,0.0,2.0,0.0))
c: Array[Array[Double]] = Array(Array(1.0, 0.0, 2.0, 0.0))

scala> multiplication.main(b, a)
java.lang.ArrayIndexOutOfBoundsException: 1
at MatrixMultiplication$$anonfun$singleThreadedMultiplication$1$$anonfun$apply$mcVI$sp$1$$anonfun$apply$mcVI$sp$2.apply$mcVI$sp
... 
```

# oracle - BI Publisher 多选中的 AND 条件

> ID：14228382
> 
> 赞同：0
> 
> 时间：2013-01-09T04:41:32.257
> 
> 标签：oracle, bi-publisher

有什么办法，我们可以在多选下拉菜单中使用 AND 条件吗？我的意思是，如果下拉列表包含 3 个值，例如

*   第一个选项
*   第二个选项
*   第三个选项

我必须做一个 AND 条件。我们使用的查询是

`select some_column from table where option in :p_option`哪个是逻辑 OR，如何将其更改为 AND 条件？就像是

`select some_column from table where option =first_option and second_option and so on`?? 由于参数来自报告，因此可以有任意数量的选择。那么，我如何动态地做到这一点？

# regex - mod-rewrite 正则表达式问题

> ID：14228384
> 
> 赞同：0
> 
> 时间：2013-01-09T04:41:38.363
> 
> 标签：regex, mod-rewrite

为什么这个重写不正确？在我看来它应该按预期工作

> RewriteRule ^/series/([^/]*)$ index.php?name=$1

所以 localhost/series/xxxx 应该重定向到 localhost/index.php?name=xxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:33:46.630

您正在附加到查询字符串。这意味着您必须将`QSA`标志附加到您的规则（查询字符串附加）：

```
RewriteRule ^/series/([^/]*)$ index.php?name=$1 [QSA] 
```

此外，正如@FelipeAlamedaA 所提到的，如果这是在`.htaccess`你应该删除初始的`/`.

# django - 无法使用 boto 通过 Heroku 将静态收集到 s3 - s3 存储桶返回 NoneType

> ID：14228386
> 
> 赞同：4
> 
> 时间：2013-01-09T04:41:48.677
> 
> 标签：django, heroku, amazon-s3, amazon-cloudfront, boto

这个问题与使用 Heroku、django-storages（w/boto for s3）和 CloudFront 来提供静态内容的设置有关。

在过去的几个小时里，我一直在尝试将我的静态文件成功加载到我的 Heroku 应用程序中。我已成功将 Cloudfront 连接到我的 s3 存储桶，似乎存储桶设置正确，但无论出于何种原因，我的价值`AWS_STORAGE_BUCKET_NAME`似乎没有正确注册。

如果有人对如何调试有任何线索或想法，我将不胜感激。我已经黔驴技穷了。谢谢阅读。

settings.py（重要的东西）：

```
try:
  from settings_local import *
except:
  import s3utils
DEBUG = False
#s3 stuff
DEFAULT_FILE_STORAGE = 's3utils.MediaRootS3BotoStorage'
STATICFILES_STORAGE = 's3utils.StaticRootS3BotoStorage'  
STATIC_URL = 'https://[domain].cloudfront.net/'
#use heroku postgres database
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

s3utils.py

```
from storages.backends.s3boto import S3BotoStorage
from django.utils.functional import SimpleLazyObject
import os

AWS_ACCESS_KEY_ID = os.environ['AWS_ACCESS_KEY_ID']
AWS_SECRET_ACCESS_KEY = os.environ['AWS_SECRET_ACCESS_KEY']
AWS_STORAGE_BUCKET_NAME = 'static.[website].org'

StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')
MediaRootS3BotoStorage  = lambda: S3BotoStorage(location='media') 
```

这是我在尝试收集静态时得到的回溯，无论是通过“heroku run”还是在 Procfile 中：

```
 Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 163, in handle_noargs
    collected = self.collect()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 113, in collect
    handler(path, prefixed_path, storage)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 287, in copy_file
    if not self.delete_file(path, prefixed_path, source_storage):
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 215, in delete_file
    if self.storage.exists(prefixed_path):
  File "/app/.heroku/python/lib/python2.7/site-packages/storages/backends/s3boto.py", line 284, in exists
    return k.exists()
  File "/app/.heroku/python/lib/python2.7/site-packages/boto/s3/key.py", line 399, in exists
    return bool(self.bucket.lookup(self.name))
  File "/app/.heroku/python/lib/python2.7/site-packages/boto/s3/bucket.py", line 148, in lookup
    return self.get_key(key_name, headers=headers)
  File "/app/.heroku/python/lib/python2.7/site-packages/boto/s3/bucket.py", line 181, in get_key
    query_args=query_args)
  File "/app/.heroku/python/lib/python2.7/site-packages/boto/s3/connection.py", line 458, in make_request
    auth_path = self.calling_format.build_auth_path(bucket, key)
  File "/app/.heroku/python/lib/python2.7/site-packages/boto/s3/connection.py", line 92, in build_auth_path
    path = '/' + bucket
TypeError: cannot concatenate 'str' and 'NoneType' objects 
```

请注意，我省略了域名等，我实际上在代码中没有 [domain] 或 [website]。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T21:24:27.920

你不是说`from s3utils import *`，所以`AWS_STORAGE_BUCKET_NAME`永远不会导入到设置模块中。

`S3BotoStorage`将从环境变量中提取`AWS_ACCESS_KEY_ID`和提取，但必须在. 这似乎是一个奇怪的不一致，但我认为这是因为and实际上是参数而不是（将从环境变量中提取凭据）。*`AWS_SECRET_ACCESS_KEY``AWS_STORAGE_BUCKET_NAME``settings.py``AWS_ACCESS_KEY_ID``AWS_SECRET_ACCESS_KEY``boto``AWS_STORAGE_BUCKET_NAME``boto`

对 s3utils 的其他引用是明确的：

```
DEFAULT_FILE_STORAGE = 's3utils.MediaRootS3BotoStorage'
STATICFILES_STORAGE = 's3utils.StaticRootS3BotoStorage' 
```

因此，唯一没有处理的设置是`AWS_STORAGE_BUCKET_NAME`，这会导致您的错误。

*我希望 django-storages 接受来自 env vars 的其他设置（[12-Factor App，有人吗？](http://www.12factor.net/config)），并且正在考虑打开一个问题/提交一个拉取请求。

# r - R CMD 检查 R CUDA 包不成功

> ID：14228387
> 
> 赞同：0
> 
> 时间：2013-01-09T04:41:56.737
> 
> 标签：r, package, shared

我正在尝试制作一个 R CUDA 包。我使用 package.skeleton 创建了一个 R 包。然后我在 package 文件夹中写了一个 configure.ac 文件，并用 CUDA 代码和 Makefile.in 文件创建了一个 src 目录。我在`NAMESPACE : useDynLib(cFunction)`.

.so 文件正在包文件夹中创建。当我做 R CMD check 时，我收到以下错误：

```
** 测试是否可以加载已安装的包
library.dynam(lib, package, package.lib) 中的错误：
  找不到共享对象“cFunction.so”
错误：加载失败
执行停止
错误：加载失败

```

我无法弄清楚我在这里做错了什么。我尝试将 .so 文件放在我的包文件夹中的 libs 文件夹中，在我的包文件夹的 src 文件夹中，但没有成功。我还将包文件夹的路径放在 LD_LIBRARY_PATH 中，但它仍然不起作用。

另外，如果我使用包名称是 useDynLib 那么它也不起作用。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:59:46.047

我*强烈*建议查看现有的使用 CUDA 的包，例如[gputools](http://cran.r-project.org/package=gputools)或[WideLM](http://cran.r-project.org/package=WideLM)。

# mobile - 网站不会“缩小”以适应移动设备

> ID：14228389
> 
> 赞同：1
> 
> 时间：2013-01-09T04:41:57.693
> 
> 标签：mobile, joomla2.5

我建立了很多网站，它们都在移动设备上做同样的事情。他们像他们应该的那样缩小了所有的小。

我使用 Joomla 2.5 和 Wright 框架构建的这个网站不会调整大小。（是的，我知道 Wright 是响应式设计的引导框架，但客户在项目结束时要求网站不响应，他们不喜欢它）

我已经尝试了所有我能找到的。有没有人有什么建议？

这是网站。在您的移动设备上查看它，您就会明白我的意思。

```
http://174.122.19.188/~rockwall/ 
```

我尝试过的一些元名称：

```
 <meta name = "viewport" content = "width = device-width">
    <meta name = "viewport" content = "initial-scale = 1.0">
    <meta name = "viewport" content = "initial-scale = 2.3, user-scalable = no">
    <meta name = "viewport" content = "width = 320, initial-scale = 2.3, user-scalable = no">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T04:46:11.690

如果您希望将页面“缩小”到屏幕宽度，请将视口宽度设置为等于最宽容器的宽度。

```
<meta name = "viewport" content = "width = 940"> 
```

如果要允许用户放大，请添加 user-scalabel 并设置最大比例。

```
<meta name = "viewport" content = "width=940, maximum-scale=1.0, user-scalable=yes"> 
```

[这里的](https://create.passkit.com)例子

# jquery - Jquery在过滤时隐藏标题标签

> ID：14228392
> 
> 赞同：0
> 
> 时间：2013-01-09T04:42:39.190
> 
> 标签：jquery, filter, hide, heading

我正在使用下面的 jscript 代码来过滤无序列表。我正在尝试`<h3>`在搜索时删除结果的标签。例如，如果搜索**蝙蝠侠**我当前的输出是

```
Action    
   Batman

Adventure 
```

我需要删除标题**冒险**因为在这个类别下没有结果。

```
 <script type="text/javascript"> 
(function ($) {
  jQuery.expr[':'].Contains = function(a,i,m){
      return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
  };  
  function listFilter(header, list) {
    var form = $("<form>").attr({"class":"filterform","action":"#"}),
        input = $("<input>").attr({"class":"filterinput","type":"text"});
    $(form).append(input).appendTo(header); 
    $(input)
      .change( function () {
        var filter = $(this).val();
        if(filter) {
          $(list).find("a:not(:Contains(" + filter + "))").parent().slideUp();    
          $(list).find("a:Contains(" + filter + ")").parent().slideDown();          
        } else {
          $(list).find("li").slideDown();
        }
      })
    .keyup( function () {
        $(this).change();
    });
  } 
  $(function () {
    listFilter($("#header"), $("#list"));
  });
}(jQuery)); 
  </script> 
```

我的html是

```
<div id="wrap"> 
    <h1 id="header">DVD Collection<form class="filterform" action=""><input class="filterinput" type="text"></form></h1> 
    <h3>Action</h3>
    <ul id="list"> 
        <li><a href="#">Batman</a></li>
        <li style="display: list-item;"><a href="#">Star Trek (2009)</a></li> 
        <li style="display: list-item;"><a href="#">Tremors</a></li> 
    </ul> 
    <h3>Adventure</h3>
    <ul id="list">  
        <li style="display: list-item;"><a href="#">Ice Age</a></li> 
        <li style="display: list-item;"><a href="#">Avathar</a></li> 
    </ul> 

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:58:40.180

她的代码已修改。完美运行。我也更改了 HTML。

HTML：

```
<div id="wrap"> 
<h1 id="header">DVD Collection</h1> 
<ul id="list">   
  <li>
<h3>Action</h3>
<ul>
    <li><a href="#">Batman</a></li>
    <li style="display: list-item;"><a href="#">Star Trek (2009)</a></li> 
    <li style="display: list-item;"><a href="#">Tremors</a></li> 
  <li style="display: list-item;"><a href="#">Amnts</a></li> 
  </ul>
  </li>
  <li>
<h3>Adventure</h3>
<ul>
    <li style="display: list-item;"><a href="#">Ice Age</a></li> 
    <li style="display: list-item;"><a href="#">Avathar</a></li> 
</ul> 
  </li>
  </ul>
</div> 
```

Javascript：

```
(function ($) {
  jQuery.expr[':'].Contains = function(a,i,m){
      return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
  };  
  function listFilter(header, list) {
    var form = $("<form>").attr({"class":"filterform","action":"#"}),
        input = $("<input>").attr({"class":"filterinput","type":"text"});
    $(form).append(input).appendTo(header); 
    $(input)
      .change( function () {
        var filter = $(this).val();
        if(filter) {
          $(list).find("a:not(:Contains(" + filter + "))").parent().slideUp(function(){$(list).find("ul").each(function(){
            console.log($(this).children("li:visible").length); if($(this).children("li:visible").length===0)$(this).parent().slideUp();
          });});    
          $(list).find("a:Contains(" + filter + ")").parent().slideDown();  

        } else {
          $(list).find("ul, li").slideDown();
        }
      })
    .keyup( function () {
        $(this).change();
    });
  } 
  $(function () {
    listFilter($("#header"), $("#list"));
  });
}(jQuery)); 
```

这是演示 [http://jsbin.com/welcome/71807/](http://jsbin.com/welcome/71807/)

更新代码

添加`li`到列表

```
<li class="noresult">No Result Found</li> 
```

CSS：

```
.noresult {
  display: none;
} 
```

JS：slideUp 的另一个链式函数

```
function(){
              if($(list).find("ul:visible").length === 0)
                $(".noresult").show();
              else
                $(".noresult").hide();
            }); 
```

演示和完整代码在这里 [http://jsbin.com/welcome/71862/](http://jsbin.com/welcome/71862/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:36:52.493

我在你的脚本中添加了一些东西。下面是整个脚本：

```
<script>
(function ($) {
  jQuery.expr[':'].Contains = function(a,i,m){
  return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
};

function listFilter(header, list) {
   var form = $("<form>").attr({"class":"filterform","action":"#"}),
   input = $("<input>").attr({"class":"filterinput","type":"text"});
   $(form).append(input).appendTo(header);

   $(input).change( function () {
    var filter = $(this).val();
    if(filter) {
      $(list).find("a:not(:Contains(" + filter + "))").parent().slideUp(function(){
          jQuery.each($(list).find('ul'),function(){
              if(!$(this).find('li:visible').length){
                 $(this).parent().slideUp();
              }
           });
      });
      $(list).find("a:Contains(" + filter + ")").parent().slideDown();
    } else {
      $(list).find("li").slideDown();
    }
    return false;
  })
.keyup( function () {
    $(this).change();
  });
  }

$(function () {
    listFilter($("#header"), $("#list"));
});
}(jQuery)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:01:54.087

尝试将您的收藏放在 a 中`<ul>`，如下所示：

```
<div id="wrap"> 
<h1 id="header">DVD Collection<form class="filterform" action=""><input class="filterinput" type="text"></form></h1> 
<ul id="dvd-collections">
    <li>
        <h3>Action</h3>
        <ul id="list"> 
            <li><a href="#">Batman</a></li>
            <li style="display: list-item;"><a href="#">Star Trek (2009)</a></li> 
            <li style="display: list-item;"><a href="#">Tremors</a></li> 
        </ul>
    </li> 
    <li>
        <h3>Adventure</h3>
        <ul id="list">  
            <li style="display: list-item;"><a href="#">Ice Age</a></li> 
            <li style="display: list-item;"><a href="#">Avathar</a></li> 
        </ul> 
    </li>
</ul> 
```

如果在你的脚本中没有结果`ul[id=list]`，`slideUp`它的`parent` `li`.

希望能帮助到你。

# excel - 我应该使用什么样的代码来循环 DMS 坐标并将它们转换为 Excel VBA 中的十进制度？

> ID：14228398
> 
> 赞同：0
> 
> 时间：2013-01-09T04:43:31.367
> 
> 标签：excel, vba, loops

我在 DMS 中列出了 excel 中的大量坐标数据，格式如下：

```
893952N1001233.1
882222N0991244.4
... 
... 
```

等等等等。

该数据在我的 A 列中。

我将该列视为文本，并且两个坐标都由“N”分隔，这样我就可以在 B 列和 C 列的单独列中获得两个坐标部分。（例如：B1：893952，C1：1001233.1；B2：882222 C2 : 991244.4)

由于这些数字在 DMS 中，它们是 DDMMSS.S，当然取决于它们是否有小数，有些有，有些没有。我可以使用什么代码来读取 B 和 C 列中的 DMS 坐标，然后通过取值的“SS.S”部分并将其除以 3600 将它们转换为十进制度数，取值的 MM 部分并除以到 60，然后将其添加到 DD（当然有时是 DDD）？

我希望将结果坐标发布在 D 和 E 列中。

所以基本上，我希望它读取坐标，使用 DD+(MM/60)+(SS.S/3600) 的方法从 DMS 转换为十进制度，然后循环遍历剩余的大量坐标。

我希望我说得足够清楚，如果不够清楚，请告诉我我解释得不好的地方，我会尽力解释！非常感谢本网站上好人的智慧！

（如果 Excel 上有一个简单的函数可以为我转换我丢失的这个函数，我会提前为丢失道歉，但我检查过但找不到）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:57:53.720

在第 1 列中输入以下内容（每个新行都是一个新行）：

```
893952N1001233.1
=LEFT(A1,FIND("N",A1)-1)
=RIGHT(A1,LEN(A1)-FIND("N",A1))
=IF(OR(LEN(A2)=7,LEN(A2)=9),LEFT(A2,3)+MID(A2,4,2)/60+RIGHT(A2,LEN(A2)-5)/3600,LEFT(A2,2)+MID(A2,3,2)/60+RIGHT(A2,LEN(A2)-4)/3600)
=IF(OR(LEN(A3)=7,LEN(A3)=9),LEFT(A3,3)+MID(A3,4,2)/60+RIGHT(A3,LEN(A3)-5)/3600,LEFT(A3,2)+MID(A3,3,2)/60+RIGHT(A3,LEN(A3)-4)/3600) 
```

那是你要找的吗？如果没有，请评论。

当然，您必须为数据布局适当地设置公式，这只是一个示例。

# testing - jmeter 在 Listener 中的工作顺序是什么？

> ID：14228402
> 
> 赞同：1
> 
> 时间：2013-01-09T04:43:51.500
> 
> 标签：testing, jmeter

我的 jmeter 中有 10 个 Http Request 采样器。我已将线程数指定为 2。因此请求总数为 20。

如果我以以下一种方式运行 Jmeter，它应该运行：

1.  首先为所有 10 个 Http 请求完成运行 Thread1 请求并运行 Thread2 请求；
2.  或者随机运行两个线程的http请求。

jmeter 将遵循哪个顺序？
如果想知道 jmeter 的运行顺序，我还需要使用哪个 Listener？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:22:34.137

这取决于加速时间：

*   如果设置为0，那么2个线程会同时运行，20个请求的顺序你就分不清了

*   如果您将斜率设置为一个非常大的值，您可以让线程 1 请求结束，然后线程 2 请求开始，但这不是您想要的负载测试

最后，您可以在树或表中使用查看结果，但只能在脚本调试期间使用。

# javascript - 去除字符串的某些元素

> ID：14228413
> 
> 赞同：-1
> 
> 时间：2013-01-09T04:45:03.203
> 
> 标签：javascript, jquery, string, parsing

我需要去掉字符串的某些元素。

字符串看起来有点像这样：

```
var htmlelement = '<b>Frame</b>: KHAKI TORT / MATTE BLACK<br>
<b>Lens</b>: <span class="titlecaps">SMOKE MONO</span><br>
<b>Protection</b>:  Category 3 lens - Maximum UV protection
<div><b>Hardware</b>: Initial temple badge<br>
<b>Packaging</b>: Le Specs protective pouch included<br>
<b>Gender</b>: Men

  <div><b>Model</b>: 1202055<br>
<b>Warranty</b>: Le Specs are warranted for one year against manufacturing faults from the date of purchase.<br>
<br>
<hr style="border:dotted #DDD; border-width:1px 0 0 0; height:0;line-height:0px;font-size:0;margin:0;padding:10px;">
<span style="font-family:times new roman;"><span style="font-weight:bold">DESIGNER NOTES</span><br>
<br>
This oversize and tough wayfarer style in khaki tortoiseshell features a contrast black top bar.
</span>
</div>
</div>' 
```

因为我已经从 HTML 元素转换它们。

我需要去掉的是镜头和框架，所以对于上面的字符串，我需要返回这个：

```
Frame: KHAKI TORT / MATTE BLACK
Lens: SMOKE MONO 
```

* * *

为了解决问题，字符串可能并不总是与呈现的完全相同，例如初始字符串可能如下所示（以不同的顺序）：

```
<b>Model</b>: 1202080<br>
<b>Protection</b>:  Category 3 lens - Maximum UV protection
<div><b>Hardware</b><span>:</span><b>&nbsp;</b><span>Silver logo temple badge</span><br>
<b>Packaging</b>: Le Specs protective pouch included<br>
<b>Gender</b>: Women<br>
<b>Warranty</b>: Le Specs are warranted for one year against manufacturing faults from the date of purchase.<br>
<br>
<b>Frame</b>: <span style="titlecaps">BLACK PRINT</span><br>
<hr style="border:dotted #DDD; border-width:1px 0 0 0; height:0;line-height:0px;font-size:0;margin:0;padding:10px;">
<b>Lens</b>: <span class="titlecaps">SMOKE GRAD</span><br>
<span style="font-family:times new roman;"><span style="font-weight:bold">DESIGNER NOTES</span><br>
<br>
Bold and glamorous, this oversize square style features soft curves featuring signature Le Specs Aztec print.
</span>
</div> 
```

我仍然需要简单地返回这个：

```
Frame: BLACK PRINT
Lens: SMOKE GRAD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:49:48.437

我将采取的步骤如下：

1.  查找子字符串的索引`<b>Frame</b>:`
2.  查找下一个索引`<br>`
3.  从第一个索引到第二个索引加上4（的长度`<br>`）切出一个子串
4.  使用正则表达式去除 html 标签
5.  重复第二行（镜头）的过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:45:42.943

我最终使用了 Wes C 的建议，

这是我完成后的样子：

```
$.each($(".descholder"), function(){
      var originalVal = $(this).html();
      var firstVal = originalVal.indexOf("Frame");
      var secondVal = originalVal.indexOf("<br>");
      var lensResult = originalVal.substring(firstVal, secondVal);
      var regex = /(<([^>]+)>)/ig;
      var body = lensResult;
      var result = body.replace(regex, "");
      result = result.replace("Frame: ", '');
      $(this).parent('.descresult').html(result);
}); 
```

# xml - PowerShell $xml.NameTable 为空

> ID：14228418
> 
> 赞同：0
> 
> 时间：2013-01-09T04:45:35.053
> 
> 标签：xml, powershell

我有一个 xml 文件，其中包含我希望使用 PowerShell 读取的带有命名空间的元素。

示例 XML：

```
 <ns0:Members xmlns:ns0="http://my.domain.com/subsite">
        <Member>
            <MemberDetails>
                <Name>Blah de Blah Blah</Name>
                <Email>blah@lost.com</Email>
            </MemberDetails>
        </Member>
    </Members> 
```

从我在网上找到的一些示例中，我编写了以下 PowerShell 来读取 XML：

```
 function Get-ScriptDirectory
    {
        return Split-Path $script:MyInvocation.MyCommand.Path
    }

    $xmlFile = Join-Path (Get-ScriptDirectory) "MyXmlFile.xml"
    [xml]$xmlDoc = Get-Content $xmlFile         
    $ns = new-object Xml.XmlNamespaceManager $xml.NameTable
    $ns.AddNamespace("ns0", "http://my.domain.com/subsite")
    $node = $xmlDoc.SelectNodes("ns0:Members") 
```

但是，我收到以下错误：

```
 New-Object : Constructor not found. Cannot find an appropriate constructor for type Xml.XmlNamespaceManager. 
```

我在网上搜索了错误，但我发现的唯一帖子建议仔细检查 PowerShell 的版本是版本 2。

我跑了`$Host.Version`，这给了我：

```
 Major  Minor  Build  Revision
    -----  -----  -----  --------
    2      0      -1     -1 
```

当我使用 PowerGui Editor 单步执行脚本时，我发现它`$xml.NameTable`是空的。

谁能解释为什么以及我能做些什么来解决它？

另一方面，我尝试选择`Members`元素的方法都没有奏效，包括`Select-Xml`and `$xmlDoc.SelectNodes`。我能得到它的唯一方法是使用：

```
 $xmlDoc.Members 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:58:46.413

尝试`Select-Xml`像这样使用：

```
$ns = @{ns0='http://my.domain.com/subsite'}
$xml | Select-Xml -XPath '//ns0:Members' -Namespace $ns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:10:11.967

尝试：

```
function Get-ScriptDirectory
    {
        return Split-Path $script:MyInvocation.MyCommand.Path
    }

    $xmlFile = Join-Path (Get-ScriptDirectory) "MyXmlFile.xml"
    [xml]$xmlDoc = Get-Content $xmlFile         
    $ns = new-object Xml.XmlNamespaceManager $xmlDoc.NameTable
    $ns.AddNamespace("ns0", "http://my.domain.com/subsite")
    $node = $xmlDoc.SelectNodes("ns0:Members") 
```

修正错字。

# xsd - XSD - 以不同属性重复的元素

> ID：14228419
> 
> 赞同：0
> 
> 时间：2013-01-09T04:45:37.977
> 
> 标签：xsd

这就是我现在所拥有的

```
<main>
<col name="name1">test1</col>
<col name="name2">test2</col>
<col name="name3">test3</col>
<col name="name4">test4</col>
<col name="num1">true</col>
</main> 
```

我想要上面的xsd，我试过了

```
<xs:element name="main" minOccurs="0" maxOccurs="unbounded">
<xs:complexType>
<xs:sequence>
<xs:element name="col" minOccurs="0" maxOccurs="unbounded" >
            <xs:attribute name="name1" type="xs:string" />
            <xs:attribute name="name2" type="xs:string" />
            <xs:attribute name="name2" type="xs:string" />
            <xs:attribute name="num1" type="xs:boolean" />
        </xs:element>
    </xs:sequence>
</xs:complexType>
</xs:element> 
```

这向我显示了一个错误。如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:07:37.010

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="main">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" name="col">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# java - 在 AndEngine 中，在哪里调用实体更新方法？

> ID：14228423
> 
> 赞同：0
> 
> 时间：2013-01-09T04:46:14.807
> 
> 标签：java, android, andengine, updates

我正在使用 AndEngine 并采用组件实体模型来开发我的游戏。我的问题是在 AndEngine 设置中，我应该在哪里以及如何调用我的实体（及其组件）的更新方法？

两天前我才开始使用AndEngine，所以请原谅我的任何菜鸟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:58:13.247

在**AndEngine**中，为了让您的*Entity*有一个在每一帧都被调用的更新方法，它的类必须实现该`IUpdateHandler`接口。

这将迫使您覆盖`public void onUpdate(float pSecondsElapsed)`and`public void reset()`方法。

然后，您将“更新代码”放在`onUpdate(float pSecondsElapsed)`.

然后，实现接口的实例化对象`IUpdateHandler`必须`Scene`通过`registerUpdateHandler(IUpdateHandler updateHandler)`.

这是一个示例代码：

**具有更新方法的**实体类。****

 **```
public class Entity implements IUpdateHandler
{
    // Lorem ipsum dolor sit amet...
    @Override
    public void onUpdate(float pSecondsElapsed) 
    {
            // Update code here
    }

    @Override
    public void reset() {
            // Reset code here
    }     
} 
```

然后在您的初始化块中`SimpleBaseGameActivity`，您将主场景声明为

```
Scene mainScene; 
```

您像这样注册实体：

```
Entity entity = new Entity();

this.mainScene.registerUpdateHandler(entity); 
```**

# asp.net-mvc-4 - MVC 4.0 WebApi 应用和混合认证

> ID：14228425
> 
> 赞同：4
> 
> 时间：2013-01-09T04:46:35.180
> 
> 标签：asp.net-mvc-4, asp.net-web-api, windows-authentication, basic-authentication

我正在询问是否可以为我的 WebApi 控制器服务同时提供 AD 身份验证和 Basic。我的目的是让所有内部（公司）用户使用 AD 凭据（Windows）进行身份验证以实现无缝登录，但对移动和外部（非公司）用户进行基本身份验证。我正在查找有关使用其中任何一种但不一定是同时使用这两种方法的最佳方法的信息。我不感兴趣的是在 AD 中添加外部用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:09:17.587

您可以采取的一种方法是创建一个自定义操作过滤器并在全局范围内注册它。

类似的东西

```
public class MixedAuthenticationAttribute : System.Web.Http.Filters.ActionFilterAttribute
{ 
    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext     actionContext)
    {
           //basic auth header check
           if (actionContext.Request.Headers.Authorization == null)
           {
                 //no auth header run AD authentication process.
           } else {
                 //basic auth authentication
           }

    }
} 
```

# c++ - 将结构从 C 转换为 C++ (POD)

> ID：14228430
> 
> 赞同：1
> 
> 时间：2013-01-09T04:47:51.963
> 
> 标签：c++, c

我有一组`structs`来自我正在转换为 C++ 的一些 C 代码，根据我的理解，它们应该是 POD 类型。这里有些例子：

```
struct Data {
  u16 type : 12;
  u8 variant : 3;
  bool isTop : 1;
};

struct DData {
  u16 type : 12;
  u8 variant : 3;
  u8 layer : 1;
};

struct TData {
  struct Data data1, data2;
  struct DData ddata[MAX];
  u16 x;
  u8 y;
  u8 s : 4;
  u8 l : 4;
  u8 wl : 3;
  u8 wr : 3;
  u8 lt : 2;
}; 
```

到目前为止，我有许多方法将这些结构的指针作为参数，我打算将它们直接移动到结构声明中以节省大量输入，例如。

```
struct Data {
  u16 type : 12;
  u8 variant : 3;
  bool isTop : 1;

  inline bool hasFlag(u64 flag) { return Types::specs[type].flags & flag; }
 }; 
```

我想知道我可以以这种方式添加的每种方法是否对此都是安全的`struct`，这些结构通过网络序列化并转换为二进制文件，因此我需要确保这不会破坏任何东西。如果我是对的，它们应该保持 POD 类型，因此不会出现特别的问题或开销。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T04:57:42.113

那应该仍然是一个 POD。

您可以通过使用`std::is_pod`trait 来确定：

```
std::is_pod<Data>::value; 
```

`true`如果是`Data`POD，则为假，否则为假。

无论如何，我不会费心将函数移动到结构体中。除了不同的调用语法之外，您并没有真正获得任何东西。

# javascript - JavaScript正则表达式匹配一些特殊字符

> ID：14228431
> 
> 赞同：1
> 
> 时间：2013-01-09T04:48:01.047
> 
> 标签：javascript, regex

我使用这个正则表达式来匹配任何只包含英文字母的字符串`/^[a-zA-Z\s]+$/`

现在我需要编辑它以匹配破折号'-'和点'。连同英文字母。字符串可能包含破折号或点或非（只是字母）。

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:49:47.513

只需像这样在字符类中添加`-`和：`.`

```
/^[-.a-zA-Z\s]+$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:02:00.017

对于`-`和`.`和*空间*：

```
/^[-a-z\s.]+$/i
// "Foo-bar" OK
// "Foo.bar" OK
// "Foo bar" OK
// "Foo - bar" OK
// "Foo.bar-zaz" OK
// "Foo.bar-zaz TROZ" OK 
```

对于`-`或`.`或*空格*：

```
/^[a-z\s]+$|^[-a-z]+$|^[a-z.]+$/i
// "Foo-bar" OK
// "Foo.bar" OK
// "Foo bar" OK
// "Foo - bar" FAIL
// "Foo.bar-zaz" FAIL
// "Foo.bar-zaz TROZ" FAIL 
```

让我解释：

`/i`忽略大小写，所以你不需要`A-Z`

`|`（管）为你做或。

`^`在你的字符串的开头

`$`直到最后

现在只是在字符限制内`[...]`：

将`-`char 限制放在开头是一种很好的做法，因为它以多种方式表示范围，所以放在开头可以避免错误。

`\s`空格（不能在 JS 中范围）

`.`inside`[.]`只是一个点，但 outside 表示任何字符（甚至是不可见的字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:50:21.100

正则表达式`/^[a-zA-Z\s\-\.]+$/`将匹配您需要的内容。

# caching - 压缩内存中缓存的对象

> ID：14228432
> 
> 赞同：0
> 
> 时间：2013-01-09T04:48:01.533
> 
> 标签：caching, enterprise-library, data-compression

我正在构建一个企业级 MVC ASP.NET 应用程序，它使用企业库 4.1 将大型对象存储到内存缓存中。

每个用户的对象大小范围为 18-22MB。任何时候都可能有 530 个并发用户。我有点担心内存中对象的大小。谁能建议我可以用来压缩内存中的对象的任何模式？我还没有看到任何文章提到 Ent Lib 4.1 是否支持开箱即用的压缩内存缓存。

减少缓存对象的数据大小不是一种选择，因为我们必须将 3 年的数据存储到内存中，以避免对 Web 服务的往返调用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:28:12.960

Entlib 缓存块不支持内存（或磁盘，就此而言）压缩。

# java - 如何将 JLabel.getIcon() 转换为 BufferedImage

> ID：14228433
> 
> 赞同：2
> 
> 时间：2013-01-09T04:48:17.123
> 
> 标签：java, swing, user-interface, jlabel, bufferedimage

我有一个只包含一个图标的 JLabel，我可以使用 label1.getIcon() 获取该图标，但我不知道如何将该图标转换为 BufferedImage。仅供参考，我不是在谈论 ImageIcon，只是在谈论 Icon。另外，我在[如何将图标从 JLabel 转换为 BufferedImage？](https://stackoverflow.com/questions/6368160/how-to-convert-icon-from-jlabel-into-bufferedimage)，但我似乎无法弄清楚。

与往常一样，非常感谢任何示例或解释。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:55:19.843

你可以试试这个。

```
// Get the icon
Icon ico = label1.getIcon();
// Create a buffered image
BufferedImage bimg = new BufferedImage(ico.getIconWidth(), ico.getIconHeight(),
                                       BufferedImage.TYPE_INT_RGB);
// Create the graphics context
Graphics g = bimg.createGraphics();
// Now paint the icon
ico.paintIcon(null, g, 0, 0);
g.dispose(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T04:58:45.793

作为`JLabel.getIcon()`返回一个*图标*，所以你想将图标转换为缓冲图像。我认为你需要[查看这个问题](https://stackoverflow.com/questions/5830533/how-can-i-convert-an-icon-to-an-image)。在这里你可以获得将图标转换为*缓冲图像的方法*

# php - 如何使用 PHP 删除数组中第一次出现的重复值

> ID：14228434
> 
> 赞同：2
> 
> 时间：2013-01-09T04:48:24.223
> 
> 标签：php, arrays, duplicates

我有一组数组

```
Array ( 
[0] => 0
[1] => 1
[2] => 1 
[3] => -1 
[4] => 3 
[5] => 0 
[6] => 2 
[7] => 3
[8] => -2 
[9] => 2 
[10] => 0 
[11] => 1
[12] => 1 
[13] => 2 
[14] => 5 
[15] => 0 ) 
```

我想删除这个数组的值：

```
Array ( 
[0] => 3 
[1] => 1 
[2] => 2 
[3] => -1 
) 
```

但我想保留一些重复的数据..我只想删除第二个数组的一个出现..

结果将是这样的： 预期结果

```
Array ( 
[0] => 0
[2] => 1 
[4] => 3 
[5] => 0 
[6] => 2 
[8] => -2 
[10] => 0 
[11] => 1
[12] => 1 
[13] => 2 
[14] => 5 
[15] => 0 ) 
```

我该怎么做？.. array_unique 和 array_diff 正在删除第一个数组中所有出现的值..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:59:36.293

好吧，试试下面的（你的脚本应该定义 $first_array 和 $second_array 变量）：

```
foreach ($second_array as $to_delete) {
      $key = array_search($to_delete, $first_array);
      if ($key !== FALSE) {
          unset($first_array[$key]);
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:15:05.167

另一个

```
<?php
$source = array(0, 1, 1, -1, 3, 0, 2, 3, -2, 2, 0, 1, 1, 2, 5, 0); 
$items_to_filter = array(3, 1, 2, -1);
$result = array_filter($source, function ($var) {
                global $items_to_filter;
                $index = array_search($var, $items_to_filter);
                if($index !== FALSE)
                {   
                        unset($items_to_filter[$index]);
                        return false;
                }   
                return true;
          }); 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:11:43.100

```
$array = array(0,1,1,-1,3,0,2,3,-2,2,0,1,1,2,5,0);
$delete = array(3,1,2,-1);
$result = array();
foreach ($array as $val) {
    if (in_array($val, $delete) && in_array($val, $result)) {
        unset($delete[$val]);
    } else {
        $result[] = $val;
    }
} 
```

结果：

```
Array
(
    [0] => 0
    [1] => 1
    [2] => -1
    [3] => 3
    [4] => 0
    [5] => 2
    [6] => -2
    [7] => 0
    [8] => 1
    [9] => 1
    [10] => 2
    [11] => 5
    [12] => 0
) 
```

PS：如果你想删除 $delete 数组的一个元素，即使它只有 1 次出现，然后替换

```
if (in_array($val, $delete) && in_array($val, $result)) { 
```

和

```
if (in_array($val, $delete)) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T04:56:55.133

怎么样的东西，

```
for($i = 0; $i < count($a1); $i++)
{
  if(in_array($a1[$i], $a2)) {
    for($j=0; $j<count($a2); $j++)
      if($a2[$j] == $a1[$i])
        unset($a2[$j]);

    unset($a1[$i]);
  }
} 
```

我没有对此进行测试，因此可能存在错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T05:23:47.040

这种方法应该比`array_search()`or`in_array()`方法运行得更快，因为它避免了在每次迭代时对数组进行线性搜索：

```
function del_first_found($array, $todel) {
    $todel = array_fill_keys($todel, true);
    $newarray = array();
    foreach ($array as $key => $value) {
        if (isset($todel[$value])) {
            unset($todel[$value]);
        } else {
            $newarray[$key] = $value;
        }
    }
    return $newarray;
}

$input = array(0,1,1,-1,3,0,2,3,-2,2,0,1,1,2,5,0);
$to_delete = array(3,1,2,-1);
$result = del_first_found($input, $to_delete);
var_export($result); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-21T22:22:13.110

一种更通用的方法 - 不使用 lame unset 函数 - 将是：

```
foreach($values as $v)
{
    array_splice($array, array_search($v, $array), 1);
} 
```

这会`$values`从您的`$array`.

PHP中的示例代码：

```
$array = array("a","a","b","c","b","c","d","d","e","d");
$values = array("b","c","f");

array_walk($values, function(&$v,$k) use(&$array){array_splice($array, array_search($v, $array), 1);});

echo implode(",", $array); 
```

将输出：

```
a,b,c,d,d,e,d 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-09T05:04:55.860

array2[i] 是要删除的 array2 中的值

```
$value = array_search($array2[i],$array1);
if($value)
{
    unset($value);
} 
```

# javascript - Javascript读取html输入值

> ID：14228437
> 
> 赞同：0
> 
> 时间：2013-01-09T04:49:06.993
> 
> 标签：javascript, html

我正在尝试制作一个 Javascript 脚本，要求用户输入有关一本书的详细信息，然后为它生成一个 MLA 风格的引文。以下是我的 HTML 代码。

```
<input type="text" value="Author last name" id="lname"/><br />

<input type="text" value="Title of book" id="booktitle"/><br />

<input type="text" value="City of Publication" id="pubcity"/><br />

<input type="text" value="Publisher" id="pub"/><br />

<input type="text" value="Year of Publication" id="pubyear"/><br />
<input type="text" value="Number of footnote" id="footnote"/>
<br />('Number of footnote' only applicable if you plan to generate a footnote citation.)<br />

<button type="button" onclick="generateBookFootnote()">Generate Footnote</button>
<button type="button" onclick="generateBookEndnote()">Generate Endnote</button> 
</form>
<p id="cite"></p> 
```

我的Javascript如下。

```
function generateBookFootnote()
{
    //I was just trying to do this, which I got from another StackOverflow question. Result below.
    var fname = document.getElementById('fname');
    var lname = document.getElementById('lname');
    var booktitle = document.getElementById('bookititle');
    var pubcity = document.getElementById('pubcity');
    var pubyear = document.getElementById('pubyear');
    var pub = document.getElementById('pub');
    var footnote = document.getElementById('footnote');

    document.getElementById("cite").innerHTML=document.getElementById( fname ); 

}; 
```

所以我尝试了互联网上的许多方法，试图让它打印出文本框的内容`fname`。`var fname = document.getElementById('fname');`打印出`[object HTMLInputElement]`的不是实际值。运行该`document.getElementById("cite").innerHTML=document.getElementById( fname );`功能时，不打印任何内容。到目前为止，这是我在 Internet 上找到的仅有的两个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T04:53:15.680

这是因为`document.getElementById`返回一个 HTMLElement 类型的对象，它是具有指定 ID 的元素。要访问它的值，请改用它：

```
var fname = document.getElementById('fname').value; 
```

我建议你看看[HTMLElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLElement)和[getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) MDN 文档

这个问题也适用于[getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)、[getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)和[getElementsByName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)方法，尽管它们都返回一个包含匹配元素的数组。

因此，您的功能应该是：

```
function generateBookFootnote()
{
    var fname = document.getElementById('fname').value;
    var lname = document.getElementById('lname').value;
    var booktitle = document.getElementById('bookititle').value;
    var pubcity = document.getElementById('pubcity').value;
    var pubyear = document.getElementById('pubyear').value;
    var pub = document.getElementById('pub').value;
    var footnote = document.getElementById('footnote').value;

    document.getElementById("cite").innerHTML = document.getElementById( fname ).value; 

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:54:12.790

在您通过 id 选择一个输入元素后，例如：

```
var fname = document.getElementById('fname'); 
```

`value`您可以通过该属性查看其当前值。例如：

```
console.log(fname.value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T04:54:58.123

正确检查您的代码。您使用了对象而不是 id。

```
var fname = document.getElementById('fname');

document.getElementById("cite").innerHTML=document.getElementById( fname ); 
```

改用这个

```
document.getElementById("cite").innerHTML=document.getElementById('fname'); 
```

# amazon-ec2 - EC2 安全组与 VPC for PCI

> ID：14228454
> 
> 赞同：2
> 
> 时间：2013-01-09T04:51:05.303
> 
> 标签：amazon-ec2, pci-dss

**平台级别**的 PCI 是否需要使用 VPC ？还是只能由安全组来实现 PCI？

我之所以问这个问题，是因为我从亚马逊那里得到了不同的回答，销售代表表示 VPC 必须符合 PCI 标准，但是一些工程师声称 VPC 不是必需的，标准安全组就足够了。

我分解了一些 PCI-DSS 要求，我希望我们可以作为一个社区来解决这个问题。

## 有疑问的事情：

1.3.5 不允许从持卡人数据环境到互联网的未经授权的出站流量。-*我应该能够在软件级别执行此操作，因为标准安全组不允许这样做。*

## 应该没问题的事情：

1.1.3 每个 Internet 连接以及任何非军事区 (DMZ) 和内部网络区域之间的防火墙要求。-*两者都允许这样做。*

1.2 构建防火墙和路由器配置，限制不受信任的网络与持卡人数据环境中的任何系统组件之间的连接。-*我可以轻松地为应用服务器和数据库创建一个安全组，然后只允许应用程序访问数据库组。*

1.3 禁止互联网与持卡人数据环境中的任何系统组件之间的直接公共访问。-*我可以通过安全组禁止所有公共访问。*

1.3.1 实施 DMZ 以将入站流量限制为仅提供经授权的可公开访问的服务、协议和端口的系统组件。-*我将使用负载均衡器来完成这项任务。*

1.3.2 将入站 Internet 流量限制到 DMZ 内的 IP 地址。-*负载均衡器将是唯一可公开访问的服务器。*

1.3.6 实现状态检测，也称为动态包过滤。（即，仅允许“已建立”的连接进入网络。） -*标准安全组执行状态检查。*

**基于该列表，我认为没有什么能阻止我仅通过安全组实现 PCI 合规性。如果您同意/不同意，请告诉我。**

**另外，我没有存储任何 PAN，这是一个干净的通道。

我很感激反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:45:55.543

> 1.3.5 不允许从持卡人数据环境到互联网的未经授权的出站流量。- 我应该能够在软件级别执行此操作，因为标准安全组不允许这样做。

只能使用 VPC 安全组过滤出口流量。您不想依赖您的应用程序来执行此操作；它必须在网络级别完成（当攻击者包含您的应用程序或只是安装另一个应用程序来窃取您的数据时会发生什么？）。使用 VPC，您还可以使用网络 ACL 实施多层方法来过滤那里的出口流量——“深度安全就是安全做得好”。

确实，仅此标准就足以使 VPC 成为显而易见的选择。为什么不情愿？VPC 不会增加任何成本，大大提高了安全性，并提供了一些 EC2 所没有的附加功能（弹性网络接口、每个实例多个 IP、IPSec VPN 等）。

# android - 重新安装APP后谷歌应用内购买请求

> ID：14228460
> 
> 赞同：1
> 
> 时间：2013-01-09T04:51:59.613
> 
> 标签：android, in-app-purchase

我在 App 中实现了 Google。发布应用程序后它工作正常。但我面临一个问题。当用户安装应用程序然后购买项目然后卸载应用程序并重新安装并转到购买的项目然后应用程序再次锁定购买的项目并询问购买请求。OnRestoreTransaction 有什么问题吗？我使用了来自 Google In app Purchse 网站的代码。这是代码：

```
 private class DungeonsPurchaseObserver extends PurchaseObserver {
        public DungeonsPurchaseObserver(Handler handler) {
            super(in_app.this, handler);
        }

        @Override
        public void onBillingSupported(boolean supported) {
            if (Consts.DEBUG) {
                Log.i(TAG, "supported: " + supported);
            }
            if (supported) {
                restoreDatabase();  

            } else {
                showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
            }
        }

        @Override
        public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
                int quantity, long purchaseTime, String developerPayload) {
            if (Consts.DEBUG) {
                Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " " + purchaseState);
            }

            if (purchaseState == PurchaseState.PURCHASED ) {
                finish();
            }
        }

        @Override
        public void onRequestPurchaseResponse(RequestPurchase request,
                ResponseCode responseCode) {
            if (Consts.DEBUG) {
                Log.d(TAG, request.mProductId + ": " + responseCode);
            }
            if (responseCode == ResponseCode.RESULT_OK) {
                if (Consts.DEBUG) {
                    Log.i(TAG, "purchase was successfully sent to server");
                }
            } else if (responseCode == ResponseCode.RESULT_USER_CANCELED) {
                if (Consts.DEBUG) {
                    Log.i(TAG, "user canceled purchase");
                }
            } else {
                if (Consts.DEBUG) {
                    Log.i(TAG, "purchase failed");
                }
            }
        }

        @Override
        public void onRestoreTransactionsResponse(RestoreTransactions request,
                ResponseCode responseCode) {
            if (responseCode == ResponseCode.RESULT_OK) {
                if (Consts.DEBUG) {
                    Log.d(TAG, "completed RestoreTransactions request");
                }
                // Update the shared preferences so that we don't perform
                // a RestoreTransactions again.
                SharedPreferences prefs = getPreferences(Context.MODE_PRIVATE);
                SharedPreferences.Editor edit = prefs.edit();
                edit.putBoolean(DB_INITIALIZED, true);
                edit.commit();
            } else {
                if (Consts.DEBUG) {
                    Log.d(TAG, "RestoreTransactions error: " + responseCode);
                }
            }
        }
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.in_app);

        mHandler = new Handler();
        mDungeonsPurchaseObserver = new DungeonsPurchaseObserver(mHandler);
        mBillingService = new BillingService();
        mBillingService.setContext(this);

        mPurchaseDatabase = new PurchaseDatabase(this);
        //setupWidgets();

        // Check if billing is supported.
        ResponseHandler.register(mDungeonsPurchaseObserver);
        if (!mBillingService.checkBillingSupported()) {
            showDialog(DIALOG_CANNOT_CONNECT_ID);
        }

        purchase=(Button) findViewById(R.id.purchase);
        cancel=(Button) findViewById(R.id.cancel);

        purchase.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(!ownedItems.contains("android.test.refunded")){      
                    if (Consts.DEBUG) {
                        Log.d(TAG, "buying: " + "  product" + " Product Name: " + "Product");
                    }

                    if (!mBillingService.requestPurchase("android.test.refunded", mPayloadContents)) {
                        showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
                    }
            }
            }
        }); 
```

**编辑：**

我在应用内 java 文件的 onCrearte 中调用它：首先检查当前用户是否购买了他要求的商品，如果没有，则发起购买请求。在 onPurchsestateChanged 我只检查状态是否已购买。

public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); requestWindowFeature(Window.FEATURE_NO_TITLE); getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); setContentView(R.layout.in_app);

```
 mHandler = new Handler();
    mDungeonsPurchaseObserver = new DungeonsPurchaseObserver(mHandler);
    mBillingService = new BillingService();
    mBillingService.setContext(this);

    mPurchaseDatabase = new PurchaseDatabase(this);
    //setupWidgets();

    // Check if billing is supported.
    ResponseHandler.register(mDungeonsPurchaseObserver);
    if (!mBillingService.checkBillingSupported()) {
        showDialog(DIALOG_CANNOT_CONNECT_ID);
    }
    System.out.println("for check"+getPreferences(Context.MODE_PRIVATE).getBoolean(DB_INITIALIZED, false));

    if (getPreferences(Context.MODE_PRIVATE).getBoolean(DB_INITIALIZED, false)) {
        System.out.println(mBillingService.restoreTransactions());
    }
    else{
    purchase=(Button) findViewById(R.id.purchase);
    cancel=(Button) findViewById(R.id.cancel);

    purchase.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(!ownedItems.contains("android.test.refunded")){      
                if (Consts.DEBUG) {
                    Log.d(TAG, "buying: " + " product" + " Product Name: " + "i");
                }

                if (!mBillingService.requestPurchase("android.test.refunded", mPayloadContents)) {
                    showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
                }
        }
        }
    });

    cancel.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
            startActivity(new Intent(in_app.this, Main.class));
            overridePendingTransition(R.anim.slide_in_right,R.anim.slide_out_right);
        }
    });
    }
} 
```

**OnPurchaseStateChanged：**

```
 public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
            int quantity, long purchaseTime, String developerPayload) {

        if (Consts.DEBUG) {
            Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " " + purchaseState);
        }
        System.out.println("here for new fun");
        if (purchaseState == PurchaseState.PURCHASED ) {

            finish();
            Intent intent1 = new Intent(context,BodyParts1.class);
            context.startActivity(intent1);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:14:32.223

为了恢复所有购买的物品，您必须明确调用`mBillingService.restoreTransactions()`. 然后，您将收到`onPurchaseStateChange`每个先前购买的物品的回电。

将此代码放入`onCreate`方法中，它应该可以正常工作：

```
if (!getPreferences(Context.MODE_PRIVATE).getBoolean(DB_INITIALIZED, false)) {
    mBillingService.restoreTransactions();
} 
```

# android - 如何为标签标签设置与背景颜色无关的不同颜色？

> ID：14228461
> 
> 赞同：0
> 
> 时间：2013-01-09T04:52:13.613
> 
> 标签：android, android-layout, tabs

如何为标签标签设置单独的颜色？如果我改变背景颜色，整个颜色都会改变。

我的代码

```
<TabHost android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabhost"
xmlns:android="http://schemas.android.com/apk/res/android">
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TabWidget
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
android:layout_alignParentBottom="true"/>

 <FrameLayout
 android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent">

 </FrameLayout>
 </RelativeLayout>
</TabHost> 
```

![在此处输入图像描述](../Images/ff54940c0b60544003d8e9f5afef5740.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:12:46.723

你可以按照这个来做这样的事情

```
String TAG_AddData="TAB LABEL";
        /*add Tab in Tabgroup*/
        TabHost host = getTabHost();
                host.addTab(host
                        .newTabSpec(TAG_AddData)
                        .setIndicator(TAG_AddData,
                                getResources().getDrawable(R.drawable.tab_add))
                        .setContent(
                                new Intent(this, AddData_ActivityGroups.class)
                                        .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))); 
```

/* 现在你可以遍历所有选项卡并更改其标签属性*/

```
 for (int i = 0; i < host.getTabWidget().getChildCount(); i++) {

    TextView tv = (TextView) host.getTabWidget().getChildAt(i)
                        .findViewById(android.R.id.title);
    tv.setTextColor(Color.parseColor("#ffffff"));
    }

    TextView tv = (TextView) host.getCurrentTabView().findViewById(
    android.R.id.title); // for Selected Tab
    tv.setTextColor(Color.parseColor("#000000")); 
```

您可以在 tabGroup 的 onTabChanged 方法中应用同样的**东西**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:21:08.773

`res/drawable/tabselector.xml`

```
<selector
android:id="@+id/myselector"
xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Non focused states -->
<item
    android:state_focused="false"
    android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@drawable/darklogo" />
<item
    android:state_focused="false"
    android:state_selected="true"
    android:state_pressed="false"
    android:drawable="@drawable/lightlogo" />

<!-- Focused states -->
<item
    android:state_focused="true"
    android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@drawable/lightlogo" />
<item
    android:state_focused="true"
    android:state_selected="true"
    android:state_pressed="false"
    android:drawable="@drawable/lightlogo" />

<!-- Pressed -->
<item
    android:state_pressed="true"
    android:drawable="@drawable/lightlogo" />
</selector> 
```

您在此处包含的 XML 是一种定义可绘制对象的方法，可让您嵌入 case 语句。它根据分配给它的视图的状态呈现不同的可绘制对象。作为可绘制对象，您应该将其保存为`res/drawable`项目文件夹中的 xml 文件（例如`tabselector.xml`）。

要将它用于 Tabhost，您需要像往常一样构造 TabActivity（如本[教程示例](http://developer.android.com/guide/tutorials/views/hello-tabwidget.html)所示）。

然后，当您将每个选项卡添加到主机时，您将`tabselector`可绘制对象指定为指示器，如下面的“TAB 1”所示。

```
Drawable mySelector = getResources().getDrawable(R.drawable.tabselector);

mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1", mySelector).setContent(R.id.textview1));
mTabHost.addTab(mTabHost.newTabSpec("tab_test2").setIndicator("TAB 2").setContent(R.id.textview2)); 
```

# xml - 为什么“>”可以在 XML 文件的值中，但“<”不是？

> ID：14228463
> 
> 赞同：3
> 
> 时间：2013-01-09T04:52:16.010
> 
> 标签：xml, validation

以下是 XML 文件的示例：

```
<tag value=">this is well formatted xml"/> 
```

这可以在 MSXML 和 Apache Xerces 中成功加载。

```
<tag value="<this is not"/> 
```

这将失败。

我认为大于号和小于号在 XML 文件中都是非法的，当它们不被用作标签分隔符时。但是上面的例子显示大于号是可以的。

任何人都可以解释或提供有关此文件的链接吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:57:19.003

**只有字符“<”和“&”在 XML 中是严格非法的。**大于字符是合法的，但替换它是一个好习惯。

```
 Entity References

    Some characters have a special meaning in XML.

    If you place a character like "<" inside an XML element, it will generate an error because the parser interprets it as the start of a new element.

    This will generate an XML error:
    <message>if salary < 1000 then</message>

    To avoid this error, replace the "<" character with an entity reference:
    <message>if salary &lt; 1000 then</message>

    There are 5 predefined entity references in XML:
    &lt;    <   less than
    &gt;    >   greater than
    &amp;   &   ampersand 
    &apos;  '   apostrophe
    &quot;  "   quotation mark

    Note: Only the characters "<" and "&" are strictly illegal in XML. The greater than character is legal, but it is a good habit to replace it. 
```

编辑1：

源链接[http://www.w3schools.com/xml/xml_syntax.asp](http://www.w3schools.com/xml/xml_syntax.asp)

您可以获得更多与 XML 相关的信息

**例子：**

下面是变量在 XML 文件中编码不当的样子：

```
<mail id="a1" to="&<manager>@mycompany.com" … 
```

这是变量在 XML 文件中正确编码的样子：

```
<mail id="a1" to="&amp;&lt;manager&gt;@mycompany.com" …&gt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:10:47.853

你问“为什么”一个是非法的，另一个不是。关于 XML 语法的“为什么”问题的答案通常植根于它的 SGML 历史——XML 的设计者希望确保它是 SGML 的严格子集，并且可以被 SGML 解析器解析。SGML 在 XML 不允许的领域允许自由，例如省略属性值周围的引号，这解释了 XML 继承的一些限制。

# .net - 我可以捕获传递给 Printf.ksprintf 的延续的结果吗？

> ID：14228465
> 
> 赞同：1
> 
> 时间：2013-01-09T04:52:31.463
> 
> 标签：.net, f#

I am trying to do something like:

```
let execute command =
    System.Diagnostics.Process.Start (command)
    sprintf "%s (command output!)" command

let shell fmt = Printf.ksprintf execute fmt

printfn "%s" (shell "ls -a %s" "/Users/david") 
```

Where the intended output would be:

```
ls -a /Users/david (command output!) 
```

But I can't see any way for the result type of `execute` to "escape" `ksprintf`. Is there any way for me to capture the output of `execute`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:19:10.963

您需要捕获进程的输出 - 默认情况下，它只使用与包含应用程序相同的终端。类似的东西（取自[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)）

```
let execute command =
    let p = new System.Diagnostics.Process(command)
    p.UseShellExecute <- false;
    p.RedirectStandardOutput<-true //you might want to do stderr as well
    p.Start()
    let output = p.StandardOutput.ReadToEnd()
    p.WaitForExit()
    sprintf "%s %s" command output 
```

# php - 如何解决刷新页面后 jQuery 才运行的问题？

> ID：14228466
> 
> 赞同：0
> 
> 时间：2013-01-09T04:52:35.010
> 
> 标签：php, javascript, jquery, ajax, jquery-mobile

我正在使用 jQuery mobile、javascript 和 php 开发登录系统。在我刷新页面之前，以下代码似乎不会运行。我该如何解决这个问题？

```
$(document).ready(function(){ alert('hello')}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:56:48.140

您并没有真正付出足够的努力，但准备好的功能不会在页面上运行的唯一原因是页面没有完全加载，因此没有“准备好”。真的，我们需要查看更多页面代码来帮助您。

此外，您缺少一个肯定会导致问题的右括号。

```
$(document).ready(function(){ 
    alert('hello');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:11:14.140

jQuery Mobile 相当基础，但您不能使用它`$(document).read();`：

```
$(document).bind("pageinit", function() {
    alert('hello');
}); 
```

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# r - Error: bad 'S3method' directive: S3method(plot) in R

> ID：14228468
> 
> 赞同：0
> 
> 时间：2013-01-09T04:52:57.253
> 
> 标签：r, package, devtools

I am writing a R package using `devtools`. Now I have a generic function `plot` that can take different classes (e.g. `plot.fact`, `plot.numer`, etc.). In the `.R` file of `plot.fact`, I use `#'` comment for documentations in a roxygen way. Besides other items, I specify the following comments:

```
#' @rdname plot
#' @method plot fact
#' @S3method plot fact
#' @export 
```

However, when I run `check('pkg')` the following error message appear: `Error: bad 'S3method' directive: S3method(plot)`. Is there anything wrong with how I write the comments? Or do I have to write a `plot <- function(x,...) UseMethod("plot")` before the function `plot.fact`? Thanks!

**UPDATE**

更准确地说，我的`plot.fact`函数没有一个参数`x`；相反，它有许多额外的参数来自定义绘图。论据是

`plot.fact <- function(x, conf.env=0.95, data.note="", leg.cex=1, ...)`

根据哈德利的建议，我使用

```
#' @rdname plot
#' @method plot fact
#' @export 
```

但是报错还是`bad 'S3method' directive`……我需要写下来吗

```
plot <- function(x, conf.env=0.95, data.note="", leg.cex=1, ...) {
  UseMethod("plot")
} 
```

在定义之前`plot.fact`？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:43:05.873

*   如果要记录该方法，请使用`@method plot fact`+ `@export`。
*   如果您不想记录它，请使用`@s3method plot fact`.

你不应该有`@method`和`@s3method`在同一个街区。

# django - *_set Django 模型的属性

> ID：14228477
> 
> 赞同：19
> 
> 时间：2013-01-09T04:53:50.700
> 
> 标签：django, django-models

我有一个非常基本的问题`django.db.models`。

在这个[官方的 django 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)中，如果你搜索单词 " `choice_set`"，你会看到变量 " `choice_set`" 没有在任何地方声明，虽然神奇的是，我们可以开始在代码中使用它。

我想知道，`django.db.models.Model`这神奇地创建了 *_set 变量是做什么的，它还创建了哪些其他变量？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-09T05:31:01.500

您可以使用该函数获取类属性的完整列表，包括您定义的和为其定义的属性`dir`，只需执行

```
 dir(Poll) 
```

你最终会得到一些看起来有点像的东西（虽然不完全是 - 我正在以一种迂回的方式构建它）：

```
['DoesNotExist', 'MultipleObjectsReturned', '__class__', '__delattr__',
'__dict__', '__doc__', '__eq__', '__format__', '__getattribute__', '__hash__',
'__init__', '__metaclass__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', 
'__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__unicode__',
 '__weakref__', '_base_manager', '_default_manager', '_deferred', '_get_FIELD_display', 
'_get_next_or_previous_by_FIELD', '_get_next_or_previous_in_order', '_get_pk_val', 
'_get_unique_checks', '_meta', '_perform_date_checks', '_perform_unique_checks', '_set_pk_val', 
'clean', 'clean_fields', 'curve_set', 'date_error_message', 'delete', 'full_clean', 'objects', 
'pk', 'prepare_database_save', 'save', 'save_base', 'choice_set',
'serializable_value', 'unique_error_message', 'validate_unique'] 
```

这是很多价值！我们可以看到像`DoesNotExist`和这样的例外`MultipleObjectsReturned`，以及最重要的例外，`objects`。但是其中一些属性不是由 Django 添加的。如果你这样做`dir(object())`，你会发现*所有*对象的属性列表：

```
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__'] 
```

大多数情况下，您可以忽略以 2 开头和结尾的那些`__`。其他大多数是由 Django 添加的。

* * *

至于实际设置这些的方式和位置：Django 使用`models.Model`元类动态设置每个新模型的大多数属性。首先要知道的是，您可以使用以下`setattr`函数动态地将成员或方法添加到类中：

```
class X:
    pass
setattr(X, "q", 12)
print X.q  # prints 12 
```

这就是它如何仅根据您的属性名称创建新属性的方式。

在本教程中，允许它开始定义这些额外属性的重要行是：

```
class Poll(models.Model): 
```

这意味着`Poll`该类继承了`models.Model`该类（属于 Django）。继承有许多有用的属性——基本上，`Poll`类继承了类已经设置的一些行为`models.Model`——但它定义大多数这些新属性的地方是在模型[元类](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)中。元类是一个棘手的概念，但基本上它们是创建新类的秘诀，通过定义一个类，Django 可以在`models.py`定义元类时介入，并定义任何新的 .

模型元类的代码可以在[这里](https://github.com/django/django/blob/master/django/db/models/base.py)找到（从第 55 行开始）——它实际上是从头开始逐步创建类的一组代码。尽管看起来很复杂，但您只需查看变量名就可以从中受益匪浅。例如，看看有希望命名的`add_to_class`方法：

```
def add_to_class(cls, name, value):
    if hasattr(value, 'contribute_to_class'):
        value.contribute_to_class(cls, name)
    else:
        setattr(cls, name, value) 
```

除了（对您的兴趣而言并不重要）的一个特殊情况之外`'contribute_to_class`，这是一种向类添加新属性（例如方法或成员）的方法。它被称为的地方向我们暗示了它正在添加的内容：

```
 class.add_to_class('DoesNotExist', subclass_exception(str('DoesNotExist') ...<truncated>... 
```

在这里它添加了`DoesNotExist`异常，如果您要求`Poll`不存在的异常，则返回该异常。（通过运行自行查看`Poll.objects.get(pk=1337)`，或直接输入`Poll.DoesNotExist`）。

但 Django 实际上比这更复杂。您询问的*特定* 属性不是为每个模型构建的 - 它是在一个字段通过 a 与另一个字段相关时创建的（就像您的and一样）。它被分配的各个地方都非常复杂，但基本上都回到了[related.py](https://github.com/django/django/blob/master/django/db/models/fields/related.py)中的这个函数`_set``ForeignKey``Poll``Choice``get_accessor_name`

```
def get_accessor_name(self):
    # This method encapsulates the logic that decides what name to give an
    # accessor descriptor that retrieves related many-to-one or
    # many-to-many objects. It uses the lower-cased object_name + "_set",
    # but this can be overridden with the "related_name" option.
    if self.field.rel.multiple:
        # If this is a symmetrical m2m relation on self, there is no reverse accessor.
        if getattr(self.field.rel, 'symmetrical', False) and self.model == self.parent_model:
            return None
        return self.field.rel.related_name or (self.opts.object_name.lower() + '_set')
    else:
        return self.field.rel.related_name or (self.opts.object_name.lower()) 
```

这只是想出名字——追溯它以弄清楚它是如何被添加到类中的，这可不是一件小事。但我希望你能从中看到，Django 有很多机会添加这样的属性。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T05:29:06.707

这是一些`ForeignKey`魔法:)

该`Choice`模型具有属性`poll`，它是`ForeignKey`一个`Poll`对象。Django`choice_set`为`Poll`对象添加了便捷方法，这将给出一个`QuerySet`包含所有`Choice`引用该对象的`Poll`对象。

所以，给定这个（伪）代码

```
myPoll = Poll(question='Is Django awesome?')
option_yes = Choice(poll=myPoll, choice='Yes')
option_no = Choice(poll=myPoll, choice='No') 
```

你可以稍后运行

```
poll = Poll.objects.get(question='Is Django awesome?')
options = poll.choice_set.all() 
```

和选项将包括相关的`Choice`对象。

您可以`related_name`在定义`ForeignKey`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T09:26:41.063

在文档中，您指的是[https://docs.djangoproject.com/en/1.2/intro/tutorial01/#intro-tutorial01](https://docs.djangoproject.com/en/1.2/intro/tutorial01/#intro-tutorial01)

'_set' 指的是与 Poll 对象相关的所有选项，因为 Choice 模型具有 poll ，它是 ID 的 Poll 的外键。

例如：

考虑投票表行（1，'你好吗？'，'2014 7 3'）

和选择表

当你说

```
p = Poll.objects.get(id=1) 
```

//现在 p 是一个投票对象，它包含 <1,'How are you?','2014 7 3'> p.choice_set.create(choice="1st",votes=8) // 在 Choice 表中它创建一个引用投票 ID 1 的行，即选择表行 (1,1,'1st',8)

基本上 _set 指的是 Choice 表（poll）的元组，指的是 Poll 表（ID）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-27T09:55:32.710

Choice 有一个用于 Poll 的 ForeignKey，Django 自动生成便捷方法 Poll.choice_set() 来访问所有引用该投票的选项。

有一篇很棒的文章涵盖了 Django 文档中的向后关系的主题：

[https://docs.djangoproject.com/en/1.11/topics/db/queries/#following-relationships-backward](https://docs.djangoproject.com/en/1.11/topics/db/queries/#following-relationships-backward)

# ios - 计算正弦扫描频率响应的问题

> ID：14228480
> 
> 赞同：4
> 
> 时间：2013-01-09T04:54:19.977
> 
> 标签：ios, audio, fft, accelerate-framework, vdsp

我目前正在尝试计算 iphone 扬声器/麦克风往返的频率响应。我在扬声器上播放正弦扫描，通过麦克风录制并尝试从中获得频率响应。最终目标是能够将 FR 乘以任何给定的声音，使其听起来像 iphone 的扬声器/麦克风。

**到目前为止我的代码：**

```
//apply window function
vDSP_vmul(sineSweepMic,1,hammingWindow,1,sineSweepMic,1,n);
vDSP_vmul(sineSweepFile,1,hammingWindow,1,sineSweepFile,1,n);

//put both signals in complex arrays
vDSP_ctoz((DSPComplex *)sineSweepMic, 2, &fftSineSweepMic, 1, nOver2);
vDSP_ctoz((DSPComplex *)sineSweepFile, 2, &fftSineSweepFile, 1, nOver2);

//fft of both file and mic sweeps
vDSP_fft_zrip(fftSetup, &fftSineSweepFile, 1, log2n, FFT_FORWARD);
vDSP_fft_zrip(fftSetup, &fftSineSweepMic, 1, log2n, FFT_FORWARD);

//back to interleaved
vDSP_ztoc(&fftSineSweepFile, 1, (COMPLEX *)sineSweepFile, 2, nOver2);
vDSP_ztoc(&fftSineSweepMic, 1, (COMPLEX *)sineSweepMic, 2, nOver2);

//divide mic-sweep by file-sweep to create frequency response
vDSP_vdiv(sineSweepFile, 1, sineSweepMic, 1, frequencyResponse, 1, n); 
```

到目前为止，这有效，当我将 FR 与初始文件扫描相乘时，它听起来像麦克风扫描。

**我的问题：** 这仅适用于生成 FR 的确切文件（扫描）。一旦我使用 FR 修改其他声音，例如音乐，只会出现噪音。

我像这样使用FR（在频域中，交错的，不复杂的，甚至相同的长度）：

```
 vDSP_vmul(soundToModify, 1, frequencyResponse, 1, soundToModify, 1, n); 
```

我在扬声器上播放的文件的正弦扫描： ![在此处输入图像描述](../Images/8fa98dc5d5bfab44ce3170afb667c3ac.png)

我记录的正弦扫描（可见衰减的低频）： ![在此处输入图像描述](../Images/ab944f2d2478e160163ad2e3d1f1df7d.png)

我的文件正弦扫描在频域中与在代码中生成的 FR 相乘： ![在此处输入图像描述](../Images/f10c840529728870d65329c6cc2438b8.png)

**我的目标：** 在我的理解中，频率响应是关于每个频率的信息，它被系统衰减或放大了多少（在我的示例中，它无法再现低频）。为了获得这种信息，我生成了一个包含每个所需频率（正弦扫描）的声音，播放它并通过划分记录扫描/文件扫描（代码中的划分）来分析每个频率是如何被修改的。

通过将此频域中的 FR 乘以任何声音，应该修改频率幅度以模仿我系统上的播放，对吗？

谢谢！

* * *

**更新：** 最后，故障是缺少复杂的算术，正弦扫描和粉红噪声作为恢复脉冲响应的脉冲效果很好。

要获得工作代码，只需将记录的扫描 fft 数据除以初始扫描 fft 数据即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:09:20.697

如果您想重现 iPhone 扬声器/麦克风的声音，理想情况下您需要找到系统的脉冲响应。

你做错了什么：找到正弦扫描的 FFT 是没有意义的，因为输入频率是开始变化的（线性或指数或其他），然后系统将其自身的频率响应强加于其之上。正如上面 Paul R 所建议的，找到白噪声的 FFT 更有意义，因为对许多统计上平坦的输入频率进行平均将为您提供系统的实际频率响应。

但是，如果您的目标是重新创建系统的声音，您还需要注意相位，这在上述任何一种方法中都没有完成。做到这一点的“理想”方法是在完全安静和干燥（无反射）的环境中捕捉 iPhone 扬声器/麦克风系统对“脉冲”的响应。有 3 种方法可以做到这一点： 1\. 使用气球弹出声音，或合成创建的脉冲声音来做到这一点。2\. 使用 Golay 码，这是一种对许多脉冲响应测量进行平均的更简单方法 3\. 使用正弦扫描，然后使用相关性来查找脉冲响应。

参考：[https ://ccrma.stanford.edu/realsimple/imp_meas/imp_meas.pdf](https://ccrma.stanford.edu/realsimple/imp_meas/imp_meas.pdf)

获得脉冲响应测量值后，要么将其与您尝试“着色”的信号进行卷积，要么对两个信号进行 FFT，在频域中相乘，然后进行逆 FFT 以获得彩色信号。

说明：我将尽我所能解释它： - 当您获取脉冲响应的 FR 时，您获取其 FFT 的幅度，丢弃相位数据。因此，有许多具有相同幅度 FR 的滤波器（系统）将为您提供完全不同的输出。典型的例子是全通滤波器——它们都有一个平坦的 FR，但如果你通过它们施加一个脉冲，你可以得到一个正弦扫描，具体取决于滤波器参数。显然，这应该指出这样一个事实，即尽管您总是可以从 IR 转到 FR，但从相反的方向返回意味着您正在做出任意选择。因此，即使粗略估计，您也不能丢弃相位。我们听不到相位的事实意味着我们可以查看 FR 以获取有关系统的信息，但不允许我们在建模系统时忽略相位。我希望这是有道理的？要使用正弦扫描，请执行以下操作 - 如果 s(t) = sin(A(t)) 且 A(t) = integral[0 to t] (w(t)dt)，则关联信号 e(t) = corr(v(t),sin(A(t)) 其中 v(t) = 2 * abs(dw/dt) 将产生脉冲。因此，如果用测量信号替换该相关性中的正弦扫描，你应该得到它的脉冲响应。希望对你有帮助！抱歉它太数学了。如果用测量信号替换该相关性中的正弦扫描，则应该获得其脉冲响应。希望有帮助！抱歉，它是如此数学化。如果用测量信号替换该相关性中的正弦扫描，则应该获得其脉冲响应。希望有帮助！抱歉，它是如此数学化。

# c++ - Netbeans 中是否有任何 R 插件？

> ID：14228491
> 
> 赞同：1
> 
> 时间：2013-01-09T04:55:38.503
> 
> 标签：c++, r, netbeans

我正在做一个需要用 R 和 C++ 编写代码的项目。我发现以下帖子对于在 C++ 中调用 R 非常有用。

[从 C++ 调用 R 函数](https://stackoverflow.com/questions/7457635/calling-r-function-from-c)

为了使其井井有条，我使用 Netbeans IDE，但我无法在 netbeans 中编写 R 代码。netbeans 中是否有任何插件，以便我可以从同一项目中的 C++ 程序调用 R 函数。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:20:01.620

这些天我有一个类似的问题，并且找不到比这个解决方法更好的方法：

1.  为 C/C++安装 Eclipse 和[CDT 插件](http://www.eclipse.org/cdt/)，为 R安装[StatET 插件。](http://www.walware.de/goto/statet)
2.  在您的主文件夹中，创建一个 C/C++ 项目 - 比如说“mypackage_Cpp”——C/C++ 源代码所在的位置（通常是 src/），*然后*是一个 R 项目——比如说“mypackage_R”——你有 R 文件的位置（通常是 R/ 文件夹）。勾选“参考 mypackage_Cpp”框。

然后 C/C++ 代码导航/格式化和重构选项（我使用的 99%）是功能性的。此外，您可以使用 StatET 功能（一些重构、对象浏览器、运行 R 代码......）。

RStudio 非常适合 R，但缺少上面引用的 C/C++ 功能（格式/重构/导航）。最后，我更喜欢 netbeans 解决方案，但现在没有时间编写模块。

注意：[devtools](http://www.rstudio.com/projects/devtools/)似乎也很有趣，可能以更简洁的方式实现了我[在这里](https://stackoverflow.com/questions/13979405/r-package-use-a-custom-file-directories-structure-in-pkg-r-and-pkg-src-folders)尝试的内容。

# php - Magento 相关产品控制器 - 即使 Collection = 0 也显示相关

> ID：14228494
> 
> 赞同：0
> 
> 时间：2013-01-09T04:55:51.187
> 
> 标签：php, magento, magento-1.5

我正在寻找显示相关产品子 html 的控制器/功能。

在产品视图页面上，它只是通过调用`<?php echo $this->getChildHtml('related'); ?>`

我已修改此 phtml 文件以计算相关项目，并使用以下命令显示随机选择产品的备用回退：

```
(Within /catalog/product/list/related.phtml)
<?php if($this->getItems()->getSize() > 1): ?>
Show the products
<?php else: echo $this->getLayout()->createBlock('cms/block')->setBlockId('related-products-fallback')->toHtml(); 
endif;
 ?> 
```

这在测试包含 1 个或多个相关产品的页面时非常有效，但如果没有相关产品，则永远不会调用 Child 'related.phtml'。

我已经在 magento 文件结构中搜索了任何“相关”的东西，但在任何地方都找不到魔法文件。我想这将是一个相对简单的 if 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:04:16.517

控制器在，`app/code/core/Mage/Catalog/Block/Product/List`但你真的应该避免直接编辑核心。检查您的块 ID 并确保**清空缓存**！刷新所有缓存类型并再次检查！

# assembly - GDB 实模式到保护模式，动态分解

> ID：14228495
> 
> 赞同：4
> 
> 时间：2013-01-09T04:55:55.877
> 
> 标签：assembly, x86, gdb, x86-16, protected-mode

我正在尝试调试一段 MBR 代码，其中包含一些上下文切换。我的 asm 布局默认设置为 16 位分解指令。

当我将上下文设置为保护模式时出现了我的问题，在这种情况下，asm 窗口中的指令将变得疯狂/毫无意义（处理器仍将运行正确的 c 指令）。

我知道`set architecture i8086/i386`命令。但它们仅在我连接到虚拟机之前工作。我不能“即时”改变架构。

注意：我想来回切换上下文，所以我需要查看正确的说明。

总而言之，是否可以切换架构并刷新 asm 窗口中的指令？（有一些奇怪的命令？奇怪的工作方法？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:18:45.507

好吧，最后想通了。

不需要魔法...

首先需要设置架构：

```
set arch i8086 / set arch i386 (...) 
```

那么该`disassemble`命令应该用于特定的功能/地址范围：

```
disassemble 0x7c00, +100 
```

# c# - 如何从 Windows Phone 应用程序中的代码动态实例化 App.xaml.cs 中的集合对象？

> ID：14228496
> 
> 赞同：0
> 
> 时间：2013-01-09T04:55:57.100
> 
> 标签：c#, windows-phone-7

我想在需要时从 MainPage.xaml.cs 动态实例化 App.xaml.cs 中的集合对象，以便我可以在整个应用程序页面中使用该对象。我可以手动实例化并保留当前需求，但是在我的应用程序发布并且需求增加之后，我不知道如何获得它。有人可以给我任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:11:40.323

在您的 App.xaml.cs 中，声明您的 Collection

```
public ObservableCollection<Person> personsList = new ObservableCollection<Person>(); 
```

然后在您的 MainPage.xaml.cs 中，将集合值分配给集合对象

```
(Application.Current as App).personsList = mypersonsList; 
```

在此之后，您可以从应用程序中的任何页面访问值

```
 ObservableCollection<Person> mypersonsList = (Application.Current as App).personsList; 
```

# eclipse - 如果与 TESTNG 调试选项一起使用，Eclipse 将变得无响应

> ID：14228501
> 
> 赞同：0
> 
> 时间：2013-01-09T04:56:43.130
> 
> 标签：eclipse, testng

如果与 TEST NG 调试选项一起使用，Eclipse 将变得无响应。因此无法使用调试选项我正在使用以下版本：Selenium webdriver - 2.24.1 Testng - 6.02

有什么建议吗？

谢谢，法宁德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:00:57.893

只是为了更新大家......这个问题已经解决了。

做了以下三件事来解决这个问题：

```
 Remove all existing breakpoints
   Removing other versions of testing jars..Keeping only latest one i.e. 6.8 testng jar
   Put the debug value as 

   -Xms1024m

   -Xmx2048m

  In eclipse configuration settings file. 
```

# c++ - 如何编写模板类来存储不同的模板类

> ID：14228503
> 
> 赞同：1
> 
> 时间：2013-01-09T04:56:51.470
> 
> 标签：c++, templates

我有一个名为 Data 的模板类

```
template<class T> 
class Data
{
   vector<T> Data_Container;
...
}; 
```

我想定义一个能够拥有多种数据类型的新类。

```
class Multi_Data
{
vector< Data<???> > Different_Datas;
} 
```

如果我将 Multi_Data 定义为模板，我一次只会有一种类型。 **我如何编写一个能够添加不同模板的类，如下所示**：

```
Data< Type_A > DataA;
Data< Type_B > DataB;
Multi_Data Container;
Container->Add(DataA);
Container->Add(DataB); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:03:40.730

您所描述的看起来像是[Boost.Any](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html)库的完美用例，它提供了一种类型安全、统一的方式来存储多种不同类型的对象。我相信你可以`boost::any`在这里使用你的`MultiData`类型存储对象类型`vector<boost::any>`，然后使用这样的函数来访问它：

```
template <typename T> void MultiData::add(const Data<T>& data) {
    Different_Datas.push_back(data);
} 
```

在这里，`boost::any`存储一个任意值，而模板包装器阻止您插入不是`Data`.

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T05:07:21.830

您可以通过一个小的解决方法来解决这个问题。

```
class DataA { };
class DataB { };
class DataContainer { };
class DataAContainer : public DataContainer
{
public:
    DataA dataA;
};
class DataBContainer : public DataContainer
{
public:
    DataB dataB;
};

class MultiData
{
private:
    std::vector<DataContainer *> vec;
}; 
```

但是，如前所述，将不同类型的数据保存在一个列表中是一个坏主意。估计是设计有问题，再看一遍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:24:39.453

如果您要存储的类型数量有限（且固定），则应该查看[Boost.Variant](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html)：

```
std::vector<boost::variant<Data<Type_A>,Data<Type_B> > > Container; 
```

它使您能够在不使用强制转换或虚函数的情况下使用访问机制。

# android - Android ActionBar 选项卡 - 这是一般的好方法吗？

> ID：14228506
> 
> 赞同：0
> 
> 时间：2013-01-09T04:57:01.850
> 
> 标签：android, android-fragments, android-actionbar

在过去的几天里，我实现了一个带有选项卡和片段的 ActionBar。

**在进一步开发之前，我想问一下我的代码到目前为止是否是最优的？还是有任何失败或“不是最佳解决方案”？**

代码来了，首先是 MainActivity：

```
public class MainActivity extends FragmentActivity 

public static int currentPos;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    ActionBar actionBar = getActionBar();

    Tab tabDashBoard = actionBar.newTab();
    tabDashBoard.setText("Dashboard");
    TabListener<DashBoardFragment> tabListenerDashBoard = new TabListener<DashBoardFragment>(this,"Dashboard", DashBoardFragment.class);
    tabDashBoard.setTabListener(tabListenerDashBoard);
    actionBar.addTab(tabDashBoard);

    Tab tabSuche = actionBar.newTab();
    tabSuche.setText("Suche");
    TabListener<SucheFragment> tabListenerSuche = new TabListener<SucheFragment>(this,"Suche",SucheFragment.class);
    tabSuche.setTabListener(tabListenerSuche);
    actionBar.addTab(tabSuche);

    Tab tabMap = actionBar.newTab();
    tabMap.setText("Map");
    TabListener<MapFragment> tabListenerMap = new TabListener<MapFragment>(this,"Map",MapFragment.class);
    tabMap.setTabListener(tabListenerMap);
    actionBar.addTab(tabMap);

    Tab tabProfil = actionBar.newTab();
    tabProfil.setText("Profil");
    TabListener<ProfilFragment> tabListenerProfil = new TabListener<ProfilFragment>(this,"Profil",ProfilFragment.class);
    tabProfil.setTabListener(tabListenerProfil);
    actionBar.addTab(tabProfil);

    Tab tabNachrichten = actionBar.newTab();
    tabNachrichten.setText("Nachrichten");
    TabListener<NachrichtenFragment> tabListenerNachrichten = new TabListener<NachrichtenFragment>(this,"Nachrichten",NachrichtenFragment.class);
    tabNachrichten.setTabListener(tabListenerNachrichten);
    actionBar.addTab(tabNachrichten);

    //actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);  
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);    
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowCustomEnabled(false);

     if( savedInstanceState != null ){
         actionBar.setSelectedNavigationItem(savedInstanceState.getInt("tabState"));
     }
}

private class TabListener<T extends Fragment> implements ActionBar.TabListener
{
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(Activity activity,String tag,Class<T> clz) {
         mActivity = activity;
         mTag = tag;
         mClass = clz; 
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) 
    {
        currentPos = tab.getPosition();
        Fragment prevFragment;
        FragmentManager fm = mActivity.getFragmentManager();
        prevFragment = fm.findFragmentByTag(mTag); 
        if (prevFragment != null) { 
            mFragment = prevFragment; 
        } // previous Fragment management

        // Check if the fragment is already initialized
        if(mFragment == null){
            // If not, instantiate and add it to the activity:
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment,mTag);
        }else{
            // If it exists, simply attach it in order to show it:
            ft.attach(mFragment);
        }   
     }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) 
    {
        currentPos = tab.getPosition();
        if(mFragment != null){
             // Detach the fragment, because another one is being attached:
             ft.detach(mFragment);
        }else{
            // If not, instantiate and add it to the activity:
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment,mTag);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) 
    {
         // User selected the already selected tab. Usually do nothing. 
    }   
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tabState", currentPos);
} 
```

现在例如 SucheFragment 类：

```
public class SucheFragment extends Fragment {

Activity currentActivity = getActivity();
ListView listView;
LayoutInflater inflaterT;

// ArrayList of type "Person". We are making not a list of string, sondern eine list of persons
ArrayList<Person> arrayOfWebData = new ArrayList<Person>();

class Person{
    public String person_id;
    public String name;
    public String birthday;
    public String favorite_color;
    public String profilbild;
}

// This is our new Adapter:
FancyAdapter aa = null;

// For each row we returned until we use the array to create our person obj
static ArrayList<String> resultRow;

@Override

public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.suche, container, false);
        inflaterT = inflater;
        listView = (ListView) view.findViewById(R.id.listView1);
        new getJson().execute("String");    
        return view;    
}

// JSON Response Example
private class getJson extends AsyncTask<String, String, JSONArray>
{
    @Override
    protected JSONArray doInBackground(String... params) 
    {
        String result = "";
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("xxxxxxxxxxx");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream webs = entity.getContent();
            // Convert Response to String:
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(webs,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;

                while((line = reader.readLine()) != null){
                    sb.append(line+ "\n");  
                }
                webs.close();
                result = sb.toString(); 
            }catch(Exception e){
                e.printStackTrace();
            }
        }catch(Exception e){
            e.printStackTrace();
        }
        try{
            JSONArray jArray = new JSONArray(result);
            for(int i = 0;i < jArray.length();i++)
            {
                // Get our object, this is on persons data:
                JSONObject json_data = jArray.getJSONObject(i);
                // Create a new person:
                Person resultRow = new Person();
                // Set thats persons attributes:
                resultRow.person_id = json_data.getString("id");
                resultRow.name = json_data.getString("name");
                resultRow.favorite_color = json_data.getString("favorite_color");
                resultRow.birthday = json_data.getString("birthday");
                resultRow.profilbild = json_data.getString("profilbild");
                arrayOfWebData.add(resultRow);
            }   
        }catch(Exception e){
            e.printStackTrace();
        }
        return null;
    }
    protected void onPreExecute() {
         super.onPreExecute();

         Context context = getActivity();
         CharSequence text = "Lade Mitglieder";
         int duration = 5000;

         Toast toast = Toast.makeText(context, text, duration);
         toast.show();
    }
    @Override
    protected void onPostExecute(JSONArray result) {
        super.onPostExecute(result);
        populateListView(result);

    }       
}

public void populateListView(JSONArray result)
{
    final ListView myListView = (ListView) listView;
    // Initialize FancyAdapter object:
    aa = new FancyAdapter();
    myListView.setAdapter(aa);  

    myListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) 
        {
            // Get Person "behind" the clicked item
            Person p = (Person) myListView.getItemAtPosition(position);

            // Log the fields to check if we got the info we want
            Log.i("SomeTag", "Persons name: " + p.name);
            Log.i("SomeTag", "Persons id : " + p.person_id);

           Intent i = new Intent(getActivity(),ProfilAnsehenActivity.class);
           i.putExtra("mitglied_id", p.person_id);
           i.putExtra("mitglied_benutzername", p.name);
           i.putExtra("profilbild", p.profilbild);
           startActivity(i);
        }
    });
}

class FancyAdapter extends ArrayAdapter<Person>
{
    FancyAdapter(){
        super(getActivity(),android.R.layout.simple_list_item_1,arrayOfWebData);
        //imageLoader = new ImageLoader(MainActivity.this);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if(convertView == null){
            LayoutInflater inflater = inflaterT;
            convertView = inflater.inflate(R.layout.row3, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder); 
        }else{
            holder = (ViewHolder)convertView.getTag();
        }
        holder.populateFrom(arrayOfWebData.get(position));
        return convertView; 
    }
}

class ViewHolder
{
    public TextView name = null;
    public TextView birthday = null;
    public TextView favorite_color = null;
    public ImageView profilbild = null;
    //public ImageLoader imageLoader;
    ImageLoader imageLoader = new ImageLoader(getActivity());

    ViewHolder(View row){
        name = (TextView)row.findViewById(R.id.name);
        birthday = (TextView)row.findViewById(R.id.birthday);
        favorite_color = (TextView)row.findViewById(R.id.favorite_color);
        profilbild = (ImageView)row.findViewById(R.id.imageView1);  
    }
    // Notice we have to change our populateFrom() to take an argument of type "Person"
    void populateFrom(Person r){
        name.setText(r.name);
        birthday.setText(r.birthday);
        favorite_color.setText(r.favorite_color);
        imageLoader.DisplayImage(r.profilbild, profilbild); 
    }   
} 
```

可以从上面的“SucheFragment”中启动一个活动吗？最后是 ProfilAnsehenActivity: （在单击 ListView 项目时调用）：

```
public class ProfilAnsehenActivity extends Activity implements ActionBar.TabListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_profil_ansehen);

    ActionBar actionBar = getActionBar();

    /*Tab tabDashBoard = actionBar.newTab();
    tabDashBoard.setText("Profil");
    tabDashBoard.setTabListener(this);
    actionBar.addTab(tabDashBoard);

    Tab tabDashBoard2 = actionBar.newTab();
    tabDashBoard2.setText("Fotos");
    tabDashBoard2.setTabListener(this);
    actionBar.addTab(tabDashBoard2);

    Tab tabDashBoard3 = actionBar.newTab();
    tabDashBoard3.setText("Nachricht senden");
    tabDashBoard3.setTabListener(this);
    actionBar.addTab(tabDashBoard3);*/

    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);    
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowCustomEnabled(false);

    Intent intent = getIntent();
    String mitglied_benutzername = intent.getStringExtra("mitglied_benutzername");
    String mitglied_id = intent.getStringExtra("mitglied_id");
    String profilbild = intent.getStringExtra("profilbild");

    TextView benutzername = (TextView)findViewById(R.id.textViewBenutzername);
    benutzername.setText(mitglied_benutzername);

    TextView mitglied_idV = (TextView)findViewById(R.id.textViewMitgliedId);
    mitglied_idV.setText("Mitglied-ID:" +mitglied_id);

    ImageView imageV = (ImageView)findViewById(R.id.imageView2);

    ImageLoader imageLoader = new ImageLoader(ProfilAnsehenActivity.this);
    imageLoader.DisplayImage(profilbild, imageV);       
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_profil_ansehen, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

} 
```

你怎么看 ？我有什么“误解”吗？顺便说一下：

当我将方向从纵向更改为横向时，再次调用 getJson 方法并再次加载来自互联网的 json 数据......如何防止“SucheFragment”再次下载 json 数据？我想显示与方向更改之前相同的数据...

问候，朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:19:10.753

至少，您必须创建`Activity`as的所有内部类`static`，因为非静态内部类会在设备旋转时引起内存喜欢。

`AsyncTask`此外，用于网络的东西也不是一个最好的主意，最好使用`IntentService`+`SQLite`方法。例如，您可以查看来自 Google I/O 的有关 REST 最佳实践的[视频](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

> 我想显示与方向更改之前相同的数据...

您可以在片段中保存标志，并且`new getJson().execute("String");`只调用一次。但是记住`AsyncTask`不是网络东西的最佳场所。

标记代码示例（在您的片段中）：

```
....
private boolean isAlreadyRunned = fasle;

.... (onCreateView())
if (!isAlreadyRunned){
    new getJson().execute("String");
}

...(getJson)
 arrayOfWebData.add(resultRow);
 isAlreadyRunned = true; 
```

类似的东西）））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:58:05.553

**我现在添加了标志“private boolean jsonDataLoaded = false;”**

当应用程序首次加载数据时，我将其设置为 true。然后在 onCreateView() 我检查标志是否为假，- 如果是，- 不要跳入 geJson()：

**当调用 getJson() 时，我将 jsonDataLoaded 设置为 TRUE。**

它的行为类似于expexted：1）加载jsonData并将flag设置为TRUE 2）切换到其他选项卡并返回SucheFragment后，flag为TRUE，并且没有加载数据：

但是：数据没有加载（正确的行为）， **但是 ListView 没有填充之前收到的数据。**

这里是SucheFragment的代码：

```
public class SucheFragment extends Fragment {

Activity currentActivity = getActivity();
ListView listView;
LayoutInflater inflaterT;

// ArrayList of type "Person". We are making not a list of string, sondern eine list of persons
ArrayList<Person> arrayOfWebData = new ArrayList<Person>();

class Person{
    public String person_id;
    public String name;
    public String birthday;
    public String favorite_color;
    public String profilbild;
}

// This is our new Adapter:
FancyAdapter aa = null;

// For each row we returned until we use the array to create our person obj
static ArrayList<String> resultRow;

// If true,- the JSON data has been loaded:
private boolean jsonDataLoaded = false;

@Override
// Create and return the view hierarchy associated with the fragment
// The System invokes this method when its time for the fragment to create its layout
// This method must return a View that is the ROOT of your fragments layout
// Parameter "container": Is the parent of the View (e.g LinearLayout etc)
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        // Parameter: 
        //      1) RESOURCE:        ID for an XML Layout Resource
        //      2) ROOT:            An object that provides a set of LayoutParams values for root of the returned hierarchy (if 3.Parameter is false)
        //      3) attachToRoot:    Whether the inflated hierarchy should be attached to the root parameter
        //                          If ROOT, root is only used to create the correct subclass of LayoutParams for the root view in the XML.
        //                          Wenn FALSE,- prevents the inflater from automatically attaching the inflated view hierarchy to the parent container
        View view = inflater.inflate(R.layout.suche, container, false);
        inflaterT = inflater;
        listView = (ListView) view.findViewById(R.id.listView1);

        Log.i("TEST","LOADED "+jsonDataLoaded);

        if(!jsonDataLoaded){
            new getJson().execute("String");    
        }

        return view;    
}

// JSON Response Example
private class getJson extends AsyncTask<String, String, JSONArray>
{
    @Override
    protected JSONArray doInBackground(String... params) 
    {
        String result = "";
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("xxx");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream webs = entity.getContent();
            // Convert Response to String:
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(webs,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;

                while((line = reader.readLine()) != null){
                    sb.append(line+ "\n");  
                }
                webs.close();
                result = sb.toString(); 
            }catch(Exception e){
                e.printStackTrace();
            }
        }catch(Exception e){
            e.printStackTrace();
        }
        try{
            JSONArray jArray = new JSONArray(result);
            for(int i = 0;i < jArray.length();i++)
            {
                // Get our object, this is on persons data:
                JSONObject json_data = jArray.getJSONObject(i);
                // Create a new person:
                Person resultRow = new Person();
                // Set thats persons attributes:
                resultRow.person_id = json_data.getString("id");
                resultRow.name = json_data.getString("name");
                resultRow.favorite_color = json_data.getString("favorite_color");
                resultRow.birthday = json_data.getString("birthday");
                resultRow.profilbild = json_data.getString("profilbild");
                arrayOfWebData.add(resultRow);

            }   
        }catch(Exception e){
            e.printStackTrace();
        }
        return null;
    }
    protected void onPreExecute() {
         super.onPreExecute();

         Context context = getActivity();
         CharSequence text = "Lade Mitglieder";
         int duration = 5000;

         Toast toast = Toast.makeText(context, text, duration);
         toast.show();
    }
    @Override
    protected void onPostExecute(JSONArray result) {
        super.onPostExecute(result);
        populateListView(result);
        jsonDataLoaded = true;

    }       
}

public void populateListView(JSONArray result)
{
    final ListView myListView = (ListView) listView;
    // Initialize FancyAdapter object:
    aa = new FancyAdapter();
    myListView.setAdapter(aa);  

    myListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) 
        {
            // Get Person "behind" the clicked item
            Person p = (Person) myListView.getItemAtPosition(position);

            // Log the fields to check if we got the info we want
            Log.i("SomeTag", "Persons name: " + p.name);
            Log.i("SomeTag", "Persons id : " + p.person_id);

           Intent i = new Intent(getActivity(),ProfilAnsehenActivity.class);
           i.putExtra("mitglied_id", p.person_id);
           i.putExtra("mitglied_benutzername", p.name);
           i.putExtra("profilbild", p.profilbild);
           startActivity(i);
        }
    });
}

class FancyAdapter extends ArrayAdapter<Person>
{
    FancyAdapter(){
        super(getActivity(),android.R.layout.simple_list_item_1,arrayOfWebData);
        //imageLoader = new ImageLoader(MainActivity.this);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if(convertView == null){
            LayoutInflater inflater = inflaterT;
            convertView = inflater.inflate(R.layout.row3, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder); 
        }else{
            holder = (ViewHolder)convertView.getTag();
        }
        holder.populateFrom(arrayOfWebData.get(position));
        return convertView; 
    }
}

class ViewHolder
{
    public TextView name = null;
    public TextView birthday = null;
    public TextView favorite_color = null;
    public ImageView profilbild = null;
    //public ImageLoader imageLoader;
    ImageLoader imageLoader = new ImageLoader(getActivity());

    ViewHolder(View row){
        name = (TextView)row.findViewById(R.id.name);
        birthday = (TextView)row.findViewById(R.id.birthday);
        favorite_color = (TextView)row.findViewById(R.id.favorite_color);
        profilbild = (ImageView)row.findViewById(R.id.imageView1);  
    }
    // Notice we have to change our populateFrom() to take an argument of type "Person"
    void populateFrom(Person r){
        name.setText(r.name);
        birthday.setText(r.birthday);
        favorite_color.setText(r.favorite_color);
        imageLoader.DisplayImage(r.profilbild, profilbild); 
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:09:44.433

你可以加

```
android:configChanges="orientation" 
```

在您的活动清单中，以防止再次下载 json 数据。

通过添加此行，您的 onCreate() 方法不会在方向更改时调用，因此它会显示与方向更改之前相同的数据。

但是您必须处理 UI 更改。

希望对你有帮助..

# ruby-on-rails - 在rails中使用check_box_tag仅选择选定的check_boxes？

> ID：14228507
> 
> 赞同：1
> 
> 时间：2013-01-09T04:57:02.680
> 
> 标签：ruby-on-rails

我有一个`each`循环，它创建一组复选框。

控制器代码是

```
 def new
    @foo = Foo.new
    @books = Book.all
  end

  def edit
    @foo = Foo.find(params[:id])
    @books = Book.all
  end 
```

Erb 文件如下所示：

```
<div>
  <% @books.each do |book| %>
    <%= check_box_tag 'books[]', book.id, (checked = true if @books.collect{|b| b.id}.include?(book.id)) %>
    <%= book.name %><br />
  <% end %>
</div> 
```

当我编辑我的页面时，这里试图只显示选定的复选框值。但在我的情况下，它选择所有值，即使某些复选框未选中。那么如何在rails中使用check_box_tag只选择一个选中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:15:49.450

```
... @books.each do |book|
... if @books.collect{|b| b.id}.include?(book.id)) 
```

这个条件总是成立的。`@books`将始终包含`book`及其`id`.

次要更正：您不需要`checked`那里的本地变量。而不是`map`/ `include`，你应该使用`any?`。

```
<%= check_box_tag 'books[]', book.id, @books.any?{|b| b.id == book.id} %> 
```

**注意**：条件仍然始终为真。也许您在准备问题时过度简化了代码，并省略了重要部分。

# javascript - javascript 在 Mozilla Firefox 中不起作用

> ID：14228509
> 
> 赞同：0
> 
> 时间：2013-01-09T04:57:18.210
> 
> 标签：javascript, firefox

```
<script type ="text/jscript" >
         $(function(){
             $('.slide-out-div').tabSlideOut({
                 tabHandle: '.handle1',                              //class of the element that will be your tab
                 pathToTabImage: 'images/todolist.png',          //path to the image for the tab (optionaly can be set using css)

                 imageHeight: '135px',                               //height of tab image
                 imageWidth: '40px',                               //width of tab image    
                 tabLocation: 'right',                               //side of screen where tab lives, top, right, bottom, or left
                 speed: 300,                                        //speed of animation
                 action: 'click',                                   //options: 'click' or 'hover', action to trigger animation
                 topPos: '200px',                                   //position from the top
                 fixedPosition: true                               //options: true makes it stick(fixed position) on scroll
             });
         });

         </script> 
```

我在 vs2010 开发的 Web 应用程序的母版页中有上述代码。它在 chrome、IE 中运行良好。但在 Mozilla Firefox 中根本不起作用。什么可能导致这个问题？我已经在 Firefox 的设置选项卡中启用了 javascript。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:02:19.023

您的问题是 text/jscript 与 text/javascript 不同。你想要后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:22:12.330

我认为你应该使用 type="text/javascript" 而不是 type ="text/jscript"

# node.js - 在属于另一个模块的模块中使用代码

> ID：14228514
> 
> 赞同：2
> 
> 时间：2013-01-09T04:58:18.593
> 
> 标签：node.js

我想在模块“B”的模块“A”中使用一些代码，但我不知道该怎么做。

我想要做：

一个.js

```
module.exports = {
  hello : function(){
    alert('helo world');
  }
}; 
```

b.js

```
module.exports = {
  start : function(){
    alert(A.hello());
  }
}; 
```

main.js

```
A = require("a");
B = require("b");
B.start(); 
```

但我得到“A 未定义”。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T05:08:31.807

Node 模块都有自己的作用域，所以你也需要`require` `A`加入`b.js`。

```
var A = require('a');
module.exports = {
  start : function(){
    alert(A.hello());
  }
}; 
```

# objective-c - 应用程序因未捕获的异常“类问题”而终止

> ID：14228518
> 
> 赞同：-1
> 
> 时间：2013-01-09T04:58:56.653
> 
> 标签：objective-c, xcode

我正在学习对象 C，但我无法弄清楚为什么会出现以下错误：

```
2013-01-08 21:46:12.984 ObjectiveCDemo[38355:c07] -[Calculator subtractFromTotal:]: unrecognized selector sent to instance 0x7568c90
2013-01-08 21:46:12.985 ObjectiveCDemo[38355:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Calculator subtractFromTotal:]: unrecognized selector sent to instance 0x7568c90' 
```

我正在创建一个具有计算器功能的简单应用程序。我正在使用的代码是：

```
 calculator = [[Calculator alloc] init];
    double sum = [calculator addToTotal:10];
    double difference = [calculator subtractFromTotal:6];
    double results = [calculator multiplyTimesTotal:3];
    double quotient = [calculator divideFromTotal:4];
    [calculator clear];

    NSLog(@"Sum: %f", sum);
    NSLog(@"Difference: %f", difference);
    NSLog(@"Results: %f", results);
    NSLog(@"Quotient: %f", quotient); 
```

错误发生在双差线上。我可以注释掉该行和引用它的 NSlog 行，程序运行良好。计算器类的示例是：

```
- (double) addToTotal:(double)value{total += value;
return total;}

- (double) subtractfromTotal:(double)value{total -= value;
return total;}

- (double) multiplyTimesTotal:(double)value{total *= value;
return total;}

- (double) divideFromTotal:(double)value{total /= value;
return total;} 
```

虽然之前已经提到过这个错误，但我看不出其他解决方案是如何应用的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:02:54.880

您的方法名称与您调用它的方式不匹配。

调用代码：

```
double difference = [calculator subtractFromTotal:6]; 
```

执行：

```
- (double) subtractfromTotal:(double)value 
```

应该：

```
- (double) subtractFromTotal:(double)value 
```

编译器毫无疑问地警告过你。您应该注意编译器警告！他们通常会告诉你一些重要的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:12:32.193

仔细查看错误日志，你可以看到这一行

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Calculator subtractFromTotal:]: unrecognized selector sent to instance 0x7568c90' 
```

`subtractFromTotal:(double)value`它清楚地告诉您，当您使用 实现它时，您正试图发送一条消息`subtractfromTotal:(double)value`。注意错误日志。

# unix - C中的execvp（）系统调用

> ID：14228519
> 
> 赞同：0
> 
> 时间：2013-01-09T04:59:01.753
> 
> 标签：unix, operating-system, system-calls

执行 execvp() 系统调用时，如果调用成功，则不会返回。这是否意味着该过程永远不会终止？如果是这样，它是否始终处于运行状态？我知道这是一个基本问题，但我认为当手册页中说“exec() 函数仅在发生错误时返回。返回值为 -1，并且errno 设置为指示错误。”

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:01:26.567

execve 成功后，将当前正在执行的进程映像完全*替换为另一个可执行文件。*所以函数永远不会返回，因为原始过程已经消失了。这几乎就像您在第一个过程中调用了 exit() 一样。

如果它*确实*返回，那么这显然意味着当前进程映像没有被替换，因为出现了问题。errno 告诉你出了什么问题。

# java - 为什么java中需要方法重载和覆盖？

> ID：14228520
> 
> 赞同：19
> 
> 时间：2013-01-09T04:59:03.407
> 
> 标签：java

> **可能的重复：**
> [多态性 vs 覆盖 vs 重载](https://stackoverflow.com/questions/154577/polymorphism-vs-overriding-vs-overloading)

我很想知道为什么java中 **需要方法重载和覆盖？**

我已经阅读了一些关于此的文章，但无法理解为什么实际上需要它？

我还在stackoverflow中访问了以下网址，但我还不清楚这个话题。

[Java重载和覆盖](https://stackoverflow.com/questions/2469767/java-overloading-and-overriding)

任何实际示例将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-09T05:10:01.720

来自[doc](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)
**Method Overloading：**假设您有一个类可以使用书法来绘制各种类型的数据（字符串、整数等），并且包含用于绘制每种数据类型的方法。为每个方法使用新名称很麻烦，例如 drawString、drawInteger、drawFloat 等。在 Java 编程语言中，您可以对所有绘图方法使用相同的名称，但将不同的参数列表传递给每个方法。因此，数据绘图类可能会声明四个名为 draw 的方法，每个方法都有不同的参数列表。

```
public class DataArtist {
    ...
    public void draw(String s) {
        ...
    }
    public void draw(int i) {
        ...
    }
    public void draw(double f) {
        ...
    }
    public void draw(int i, double f) {
        ...
    }
} 
```

重载的方法通过传递给方法的参数的数量和类型来区分。在代码示例中，`draw(String s)`和`draw(int i)`是不同且独特的方法，因为它们需要不同的参数类型。

您不能声明多个具有相同名称和相同数量和类型的参数的方法，因为编译器无法区分它们。

编译器在区分方法时不考虑返回类型，因此即使它们具有不同的返回类型，也不能声明具有相同签名的两个方法。

**在面向对象的编程中，方法覆盖**是一种语言特性，它允许子类或子类提供已由其超类或父类之一提供的方法的特定实现。子类中的实现通过提供与父类中的方法具有相同名称、相同参数或签名以及相同返回类型的方法来覆盖（替换）超类中的实现。执行的方法的版本将由用于调用它的对象确定。如果使用父类的对象调用方法，则执行父类中的版本，如果使用子类的对象调用方法，则执行子类中的版本。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-09T05:21:09.510

**覆盖**

[Java 文档](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)说：

> 子类中具有相同签名（名称，加上其参数的编号和类型）和返回类型作为超类中的实例方法的实例方法会覆盖超类的方法。
> 
> 子类重写方法的能力允许类从行为“足够接近”的超类继承，然后根据需要修改行为。

覆盖是使用继承时可用的功能。

**当从另一个类扩展的类想要使用父类的大部分功能并希望在某些情况下实现特定功能时使用它。**

在这种情况下，我们可以创建与父类具有相同名称和签名的方法。这样，新方法会屏蔽父方法，默认情况下会被调用。

```
class Thought {
    public void message() {
        System.out.println("I feel like I am diagonally parked in a parallel universe.");
    }
}

public class Advice extends Thought {
    @Override  // @Override annotation in Java 5 is optional but helpful.
    public void message() {
        System.out.println("Warning: Dates in calendar are closer than they appear.");
    }
} 
```

**[重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)**

Java 中的重载是创建多个同名但参数不同的方法的能力。

**这样做的主要优点是代码的简洁性。**

让我们采取`String.valueOf`方法。此方法的重载版本定义为：

```
static String valueOf(boolean b) 
static String valueOf(char c) 
static String valueOf(char[] data) 
static String valueOf(char[] data, int offset, int count) 
static String valueOf(double d) 
static String valueOf(float f) 
static String valueOf(int i) 
static String valueOf(long l) 
static String valueOf(Object obj) 
```

这意味着如果我们有任何类型的变量，我们可以使用`String.valueOf(variable)`.

如果不允许重载，我们将拥有如下所示的方法......

```
static String valueOfBoolean(boolean b) 
static String valueOfChar(char c) 
static String valueOfCharArray(char[] data) 
static String valueOfCharArrayWithOffset(char[] data, int offset, int count) 
static String valueOfDouble(double d) 
static String valueOfFloat(float f) 
static String valueOfInt(int i) 
static String valueOfLong(long l) 
static String valueOfObject(Object obj) 
```

...这比重载的解决方案非常丑陋且难以阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T05:13:32.003

答案主要集中在`interface`s 和`abstract class`es 的使用上。

假设您有一段代码：

```
abstract class testAbstract {
    int a; int b; int c;
    public String testFunction() {
        System.out.println("Override me!");
        return "default";
    }

    public void setValuesByFormula(double a, double b) {
        System.out.println("No formula set!");
    }
} 
```

这不是打赌的例子，但假设这是为了允许用户从公式中设置`a`、`b`和。`c`用户想创建一个新的实例：

```
class testClass extends testAbstract {
} 
```

该课程`testClass`目前包含...什么都没有。但它扩展`testAbstract`，因此具有功能`setValuesByFormula`。但是，当用户尝试调用它时，系统会输出消息：`No formula set!`

用户此时必须做的是`@Override`原始功能。因此，新类变为：

```
class testClass extends testInterface {
    public void setValuesByFormula(double a, double b) {
        //A not really relevant formula goes here.
    }
} 
```

`No formula set!`这会在用户创建自己的公式时停止消息。这主要有几个原因：

1.  如果一个函数是从一个超类继承的，通常孩子会想要覆盖那个函数。但是，超类可能具有其类的默认代码。因此，如果用户希望使用自己的代码，则必须覆盖此函数。
2.  通常，超类希望使用默认代码确保某个函数将无错误地返回。在其他情况下，默认代码也很有帮助。因此，这提供了另一种选择：如果用户不需要默认代码，他们可以覆盖它。

# php - 在 FOR 循环中更改特定值的除法背景

> ID：14228522
> 
> 赞同：-1
> 
> 时间：2013-01-09T04:59:10.857
> 
> 标签：php, javascript, jquery, html, css

这是我的代码，

```
<style type="text/css">
    .sample 
    {
        background:yellow;
        width:50%;
        border:1px solid #000;
        padding:5px;
        margin:2px;
        color:#fff;
        margin: 5px auto 0;
    }
</style>
<?php 
    for($i=0;$i<=5;$i++)
    {
        if($i == "2") { ?>
            <style type="text/css">
                .sample 
                {
                    background:red;
                    width:50%;
                    border:1px solid #000;
                    padding:5px;
                    margin:2px;
                    color:#fff;
                    margin: 5px auto 0;
                }
            </style>
        <?php } ?>
        <div class="sample">
            <?php echo $i; ?> Sample Testing
        </div>
<?php } ?> 
```

在上面的 for 循环中`( sample )`，当增量值时，我必须将除法背景颜色更改为红色`($i) is "2"`。

**笔记：**

1.  无需更改分区的类名。
2.  为此推荐使用 JQuery。
3.  不要使用内联样式。

实际上我已经在其中一个项目中实现了一个 Jquery 日历。在该日历中，用户可以预订他们的时段（天数）。所以我需要用一些不同的颜色显示预订的时段（天）。但是我们无法在 Jquery 中编辑该默认类名。所以这是我生成的示例代码。

请帮助我，如果有任何有用的答案将不胜感激..

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:03:26.277

您可以使用 php 为像您这样的特定条件提供内联样式，或者您可以在不同的类之间切换

*1）使用php*

```
<?php 
    for($i=0;$i<=5;$i++)
    {
        ?>
        <div class="sample" <?php if($i == 2){ echo "style='background:red;'"}?>>
            <?php echo $i; ?> Sample Testing
        </div>
<?php } ?> 
```

既然你这么坚持使用jquery，你也可以试试这个方法

*2）使用jQuery*

```
$(document).ready(function(){
   $("div.sample:nth-child(2)").css('background', 'red');

}); 
```

检查此[演示](http://jsfiddle.net/hkZKb/1/)

# ruby-on-rails - 使用 Rails 引擎共享没有命名空间的模型

> ID：14228523
> 
> 赞同：3
> 
> 时间：2013-01-09T04:59:19.950
> 
> 标签：ruby-on-rails, rails-engines

我试图通过使用 Rails 引擎来分离我的应用程序模型以使其更可重用。

我创建了一个**通用**引擎，其中包含我想要在网站和 API 项目之间共享的应用程序的所有模型。

由于 Rails 引擎默认情况下所有模型的命名空间的性质，我想知道是否有一种方法可以简化引擎包含的任何模型的命名空间。

我希望简化我的模型，而不必重写我的应用程序来为我的所有模型添加命名空间前缀，并且只需将引擎作为全局模型共享给我的其他应用程序。

我尝试从引擎中删除“isolate_namespace”，但我的视图中的路由仍然存在问题。例如。

```
<%= link_to user.name, user %> 
```

在 common 的命名空间中查找 url 时产生错误

```
undefined method common_user_path 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:00:59.720

我通过使用命令行创建一个新引擎解决了这个问题

> rails插件新论坛--full

这将在没有命名空间的情况下共享模型、控制器等。

# javascript - JQuery下拉：定位子菜单

> ID：14228524
> 
> 赞同：-1
> 
> 时间：2013-01-09T04:59:26.680
> 
> 标签：javascript, jquery, css, submenu

我有一个水平菜单和传统的垂直子`<ul>`菜单`<ul>`。

我创建了一个简单的 JQuery 代码，以便在父级悬停`<ul>`时出现子菜单（第二个） ：`<li>`

```
$('#menulist li').hover(
function() {
  $(this).find('ul').stop().fadeIn(200);
},
function () {
    $(this).find('ul').stop().fadeOut(200);
  }
); 
```

这很好用，但有一件事：所有子菜单都在主菜单的最左边淡入淡出，这样它们就不会与各自的 parent 内联`<li>`。

我相信这可能与使用`position: absolute;`.

有谁知道可能修改我的 jQuery 以便每个子菜单出现在其主菜单父级下方的方法？

谢谢！

编辑：添加CSS

```
#menulist ul li {
  display: inline;
  list-style-type: none;
  padding-right: 10px; 
}

#menulist ul li ul{
        display:none;
        background-color:#FFF;
        padding: 10px;
        position: absolute;
        z-index: 100;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:07:50.223

尝试

```
$('#menulist li').hover(function() {
     $(this).children('ul').stop().fadeIn(200);
},
function () {
    $(this).children('ul').stop().fadeOut(200);
  }); 
```

[演示小提琴](http://jsfiddle.net/S8smw/)

# mysql - 属性中是否可以有两个外键？

> ID：14228527
> 
> 赞同：1
> 
> 时间：2013-01-09T04:59:49.567
> 
> 标签：mysql

例子：

# 学生

```
studentId
name 
```

# 职员

```
staffId
name 
```

# 帐户

```
accountId
foreignKeyId(studentId or staffId)
username
password
usertype 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:06:50.300

恕我直言奇怪的设计选择。你最好一路走来：

```
Account
-------
accountid
username
password
usertype
...

Student
-------
studentid
accountid
name
...

Staff
-----
staffid
accountid
name
... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T05:05:32.133

两个表都应该是 InnoDB。InnoDB 详细信息 - [http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

以下堆栈溢出答案可能会有所帮助。

[MySQL中的多列外键？](https://stackoverflow.com/questions/953035/multiple-column-foreign-key-in-mysql)

# binding - EmberJS - 手动绑定控制器以查看

> ID：14228528
> 
> 赞同：2
> 
> 时间：2013-01-09T04:59:54.553
> 
> 标签：binding, ember.js, requirejs

最近 EmberJS 发生了很大变化（路由器，...），我不到一个月前开始编写的代码现在已经损坏。我现在遇到的问题之一是我无法手动将控制器绑定到视图。

顺便说一句，我正在使用requireJS...

所以我以前能够做这样的事情（在这里定义我的菜单和菜单项的视图），以实际获取控制器内容和选定的属性。

```
define
(
    'app/common/views/menu',
    [
        'text!app/common/templates/menu.hbs',
        'ember'
    ],
    /**
     * Menu view
     *
     * @param template
     * @returns Class
     */
    function( template )
    {
        return Ember.View.extend
        ({
            controllerBinding : 'controller.controllers.menuController',
            selectedBinding: 'controller.selected',
            template: Ember.Handlebars.compile( template ),
            NavItemView: Ember.View.extend
            ({
                tagName: 'li',
                classNameBindings: 'isActive:active'.w(),
                isActive: function()
                {
                    return this.get('item') === this.get('parentView.selected');
                }.property('item', 'parentView.selected').cacheable()
            })
        })
    }
); 
```

看起来“controller.controllers.menuController”已经不存在了。我已经能够在容器缓存“container.cache.contoller:menu”中找到该类，但我的视图控制器仍然为空。我也尝试`App.MenuController`过在`Application.create({})`

任何想法？

附带说明一下，如果有人有使用最新（github）EmberJS 和 requireJS 的工作示例，我会非常感兴趣:)

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:38:48.170

这是最新的 TODOMVC Ember/require.js！:D 我会回来更明确地回答你的问题：

[https://github.com/sh4n3d4v15/ember-todos](https://github.com/sh4n3d4v15/ember-todos)

# javascript - 使用 Ajax 加载器加载 Facebook 评论

> ID：14228536
> 
> 赞同：1
> 
> 时间：2013-01-09T05:01:07.447
> 
> 标签：javascript, jquery, ajax, facebook, comments

如果我的术语不准确，请原谅（并纠正）我。

这是我正在处理的链接： [http ://www.haemerd.com/index2.html](http://www.haemerd.com/index2.html)

这是我尝试使用 ajax 加载的页面：[http ://www.haemerd.com/glob/glob1.html](http://www.haemerd.com/glob/glob1.html)

我正在使用以下 .js 将 html 页面加载到 div 中：

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #content';
        $('#content').load(toLoad)
    }                                           
});

$('#nav li a').live('click', function(){

    var toLoad = $(this).attr('href')+' #content';
    $('#content').hide('fast',loadContent);
    $('#load').remove();
    $('#wrapper').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn('normal');
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#content').show('normal',hideLoader());
    }
    function hideLoader() {
        $('#load').fadeOut('normal');
    }
    return false;

}); 
```

});

正在加载的页面是：

```
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- end -->  

<div id="wrapper">
<h1>test</h1>
<ul id="nav">
    <li><a href="index2.html">welcome</a></li>
    <li><a href="glob/glob1.html">glob1</a></li>
    <li><a href="glob/glob2.html">glob2</a></li>
    <li>contact</li>
    <li>terms</li>
</ul>
<div id="content"> 

<img src="https://developer.mozilla.org/files/4261/js.png">
<p>This is a test of Glob #1.</p>

<div class="fb-comments" data-href="http://haemerd.com/glob1.html" data-width="420" data-num-posts="2"></div>

</div>

</div>

 <script>FB.XFBML.parse();</script>

</body> 
```

*除了*Facebook 评论没有加载外，一切似乎都运行良好。有一次我有它，所以如果我刷新页面它会加载，但现在我已经打破了它。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:27:24.250

看到这个 - [http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

我去了[http://www.haemerd.com/index2.html](http://www.haemerd.com/index2.html)在源代码中我没有看到任何 facebook 评论代码

# vb.net - 在 Visual Basic 中将 NULL 或未知类型值强制为整数

> ID：14228538
> 
> 赞同：2
> 
> 时间：2013-01-09T05:01:15.473
> 
> 标签：vb.net, integer, vb.net-2010

我想要一种强制执行 int 的故障安全方法，在我目前的情况下，我提前宣布为零，但它一直在困扰我。我喜欢直接、快速、干净。我已经可以假设一些响应，但是在 javascript 中使用此方法后，我发现当我需要一个整数值时它非常有效。我知道 javascript 非常宽容，我希望最终为任何行业编写安全的信号处理代码，如此快速的方法将安全地四舍五入，并将空值和空值归零规则。

再次澄清，我需要一个有效的替代品

`Y = ~~(X)`

我在 JavaScript 中很开心地使用了它，但我不能`~`在 Visual basic 中做 Character。如果没有我只是想知道，那很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:02:06.783

`int(x)`会起作用，而且打字（双关语）比使用 cType 少。

# iphone - 主页按钮事件

> ID：14228542
> 
> 赞同：-3
> 
> 时间：2013-01-09T05:01:46.397
> 
> 标签：iphone, objective-c

当用户按下主页按钮时，我不想关闭我的应用程序。相反，我需要在重新打开应用程序后返回到我离开的同一页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:42:38.000

如果您使用的是其他视图控制器，而不是将此功能用于关闭按钮。

对于旧版本：

```
-(IBAction)Close:(id)sender{
    [self dismissModalViewControllerAnimated:YES];
} 
```

对于 iOS6：

```
-(IBAction)closebtn:(id)sender{
{
    [self dismissViewControllerAnimated:YES completion:Nil];
} 
```

它会自动将您重定向到视图控制器，从它导航到当前视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:34:37.430

我假设您正在谈论物理主页按钮。Apple 将所有应用程序沙箱化，除了他们自己的应用程序，因此您无法访问 iDevices 的某些方面，包括所有硬件按钮。如果您希望应用程序在进入后台后返回用户离开的位置，您将使用委托文件中的方法，即

```
- (void)applicationDidEnterBackground:(UIApplication *)application {// your code} 
```

如果您的问题仅涉及以不同的方式返回用户停止的位置（以及物理主页按钮）......

就像 Zen 说的那样，如果您想在下次用户填写某个文本字段时填写某个文本字段，您可以使用用户默认值。IE

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if (!defaults) {
    [self setDefaults]; // where setDefaults is just a method that set some random values
}

int apples = [[NSUserDefaults standardUserDefaults] integerForKey:@"apples"];
if (apples == 0) {
    apples = 2;
}

// fill in the interface values for xibApples, a UITextField outlet
[xibApples setText:[NSString stringWithFormat:@"%d", apples]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:18:38.570

我认为您正在尝试在应用程序进入后台时保存应用程序的状态，然后在前台进行检索。尝试阅读有关`NSUserDefaults`. 这是文档[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T05:19:42.643

这些是您的选择

在您的应用委托中：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
} 
```

当用户按下 Home 按钮时，这些方法会按特定顺序调用。您的应用程序不会停止。它在后台运行。您可以在这些函数中编写逻辑，以确保您的应用程序在它停止的同一个类中打开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T05:24:35.230

iPhone/iPad 主页按钮始终关闭当前应用程序并返回主屏幕。此行为不能被应用程序覆盖。

# jquery - jQuery在div中附加溢出？

> ID：14228544
> 
> 赞同：0
> 
> 时间：2013-01-09T05:01:53.407
> 
> 标签：jquery

所以我正在尝试创建一个聊天系统，但目前我专注于用户而不是实际的交互，但基本上[就在这里](http://s1527.mtchs.org/chat.html)。

一些问题包括：

1.  如果你输入一个值，你可以反复点击提交，它会在你做的时候切断动画
2.  提交值后仍保留在 textarea 中（我希望将其清除）
3.  当您向 div 提交太多内容时，内容会忽略 div 并破坏定位。

请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:31:35.127

对于问题 1：为什么不能像这样为 TypeWriting 效果创建插件：

```
$.fn.teletype = function(opts){
var $this = this,
    defaults = {
        animDelay: 50,
    text:''
    },
    settings = $.extend(defaults, opts);

$.each(settings.text, function(i, letter){
    setTimeout(function(){
        $this.html($this.html() + letter);
    }, settings.animDelay * i);
});
} 
```

这样您就可以创建多个实例，并且不会影响前一个实例。完成后，您可以销毁该实例。

对于 Ex，您可以调用上述插件，例如，

```
$('#container').teletype({
animDelay: 50,  
text: 'Text to be typed here.'
}); 
```

# python - 有没有办法将 Django-pagination 传递给一个整数

> ID：14228546
> 
> 赞同：0
> 
> 时间：2013-01-09T05:02:02.730
> 
> 标签：python, django, pagination

使用`django-pagination`lib，我喜欢使用`autopaginate`标签，然后`{% paginate %}`在我的模板中使用，因为它会自动很好地格式化页码。

但是，它需要的形式是

```
{% autopaginate object_list %} 
```

但我想知道我是否可以传递一个整数，即。命中数。在这种情况下，命中数非常大，将其转换为整数列表（例如：5 -> [0,1,2,3,4]）会使我的应用程序崩溃，因为它有数十万个项目长在某些情况下。

那么有人知道它是否可以接受整数吗？

# android - 使用 Shape Drawable 或自定义视图？

> ID：14228548
> 
> 赞同：2
> 
> 时间：2013-01-09T05:02:09.000
> 
> 标签：android, view, shapedrawable

`onDraw`我们可以使用 customview 的方法在画布中绘制几乎所有东西。文档还说：

> 当您想动态绘制一些二维图形时，ShapeDrawable 对象可能会满足您的需要。

我的问题很简单，什么时候我们必须使用自定义视图，什么时候使用 ShapeDrawable？或者我们最好将它们结合起来？如果是真的，**这些选项的优缺点是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:06:36.163

好吧，我认为`ShapeDrawable`它更易于使用，`Selector`例如，您可以在 中使用它，并创建具有自定义背景的按钮并单击动画，而无需编写任何代码（仅使用 XML）。另一方面，这个drawables非常有限，如果你需要自己的控制和非标准的tuch拦截，你必须创建自己的自定义`View`。

所以我认为最好将它们结合起来，因为有时你需要一些简单的东西，并且`ShapeDrawables`是真正快速和好的解决方案，但是如果你想要一些真正特殊的东西或者你可以使用形状存档的东西，在这里你必须编写你自己的`View`。

# javascript - 未捕获的类型错误：对象 1 没有方法“indexOf”

> ID：14228550
> 
> 赞同：2
> 
> 时间：2013-01-09T05:02:20.367
> 
> 标签：javascript

我目前在一个 javascript 函数中有这一行，该函数通过 realtime.co 向通道 1 发布消息

```
xRTML.ConnectionManager.sendMessage({connections: ['myConnection'], channel: '1',
                                    content:xrtmlMessage}); 
```

这工作正常。
我的问题是使用一个变量，比如说'x'，而不是明确说明 - 通道：'1'。
本质上，我希望能够通过编写 - ... channel: x, ... 来发布到不同的频道，
但是写这个会给出错误：
Uncaught TypeError: Object 1 has no method 'indexOf'
'x' has been declared as x =1;
所以我尝试声明 y='1'; （用单个标记而不是无标记）并写入通道：y - 这有效。所以我尝试将其构建为字符串（标记 1 标记）

```
y = "'" + x + "'"; 
```

这给出了通道包含无效字符的错误，因此没有双引号或用反斜杠转义单个标记，尝试过。我也试过 parseInt(x); 确保 x 是一个整数，但无济于事。
有没有人有任何其他建议，甚至尝试过使用 xRTML 做同样的事情？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:05:22.303

你试过toString（）吗？

```
xRTML.ConnectionManager.sendMessage({connections: ['myConnection'], channel: x.toString(), content:xrtmlMessage}); 
```

# mysql - Mysql查看工作方法？

> ID：14228555
> 
> 赞同：1
> 
> 时间：2013-01-09T05:02:44.677
> 
> 标签：mysql

Mysql View 如何在**内部**工作？

```
create view testView  as select * from employee; 
```

如果运行这个会在**内部**发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:15:33.687

通常，在调用它之前，创建一个视图并不会真正做太多事情。它几乎只是在使用之前得到验证。

视图通常使用`MERGE`将视图的查询与调用它的查询合并的方法。视图的另一种方法是`TEMP TABLE`在需要时创建一个临时表，但这不太常见。

使用该`MERGE`方法的视图的基本示例：

查看查询：

```
SELECT t1.col1, t2.col2, t2.col3 FROM t1 JOIN t2 USING(id) WHERE x = 1 
```

来电查询：

```
SELECT col1, col3 FROM view WHERE y = 2 
```

MySQL 基本上将这个查询执行为：

```
SELECT col1, col3 FROM (SELECT t1.col1, t2.col2, t2.col3 FROM t1 JOIN t2 USING(id) WHERE x = 1) WHERE y = 2 
```

但是，由于查询被合并和优化，它将被优化为更简单的形式，如下所示：

```
SELECT col1, col3 FROM t1 JOIN t2 USING(id) WHERE x = 1 AND y = 2 
```

# c# - 数据表还是 IList？哪个更好？

> ID：14228557
> 
> 赞同：2
> 
> 时间：2013-01-09T05:02:56.887
> 
> 标签：c#, asp.net, linq, list, linq-to-entities

我有以下服务方法 -

```
public static DataTable GetBookDetails(BookEntities context)
    {
        DataTable dtBooks= new DataTable();
        dtBooks.TableName = "BookDetails";
        dtBooks.Columns.Add(new DataColumn("Name",typeof(string)));
        dtBooks.Columns.Add(new DataColumn("ISBN",typeof(string)));
        dtBooks.Columns.Add(new DataColumn("Price",typeof(int)));
        dtBooks.Columns.Add(new DataColumn("Author",typeof(string)));
        IQueryable<Book> query = from b in context.Books.Include("Authors")
                                                                      .Include("Details/Price")
                                                                      .Include("Activity")
                                     where b.Activity.IsActive
                                     select b;
        if (query != null)
        {
            var sorted = query.ToArray().OrderByDescending(b => b.Activity.DateCreated);
            foreach (Book bb in sorted)
            {
                DataRow row = dtBooks.NewRow();
                row["Name"] = bb.Name;
                row["ISBN"] = bb.ISBN;
                row["Price"] = bb.Details.Price.CostOfBook;
                row["Author"] = bb.Authors.Name;
                dtBooks.Rows.Add(row);
            }
        }
        else
            dtBooks= null;
        return dtBooks;
    } 
```

我的问题是 -

1.  这是获取详细信息的有效方法还是我可以改进此方法？
2.  有人建议我使用 IList 而不是 DataTable。我应该使用这个吗？如果有，有什么好处？
3.  使用 DataTable 有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T05:13:56.203

[数据表](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)与[IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)

`IList`表示可以通过索引访问的集合。而已。

`DataTable`也具有类似的功能，但它提供了更多功能（如更多[事件](http://msdn.microsoft.com/en-us/library/system.data.datatable_events.aspx)、[更多功能](http://msdn.microsoft.com/en-us/library/system.data.datatable_methods.aspx)），并且适用于需要这些功能的地方，例如具有高级功能（绑定、自定义排序、分组、行更改的事件、添加的单元格等）表示表格数据）。所有这些额外的功能都需要额外的开销（更多的内存需求）。

> 这是获取详细信息的有效方法还是我可以改进此方法？

您可以使用`IList`. 改进不是更快的数据访问，而是不使用`DataTable`提供的额外功能。如果您不需要通过索引访问，您可以通过使用进一步改进[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)。
您可以通过使用泛型版本进一步改进。`IList<T>`，或`IEnumerable<T>`节省装箱/拆箱开销。

> 有人建议我使用 IList 而不是 DataTable。我应该使用这个吗？如果有，有什么好处？

`DataTable`除了按索引访问之外，IList 没有过多的功能开销。

> 使用 DataTable 有什么问题？

没有什么不对。`DataTable`更适合需要高级数据访问功能的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:39:57.843

如果您想对数据库或数据库表进行建模，那么我建议您选择作为**类**的数据表。**IList**是一个接口，没有数据表的特性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:37:05.223

> 这是获取详细信息的有效方法还是我可以改进此方法？

您可以使用扩展方法而不是直接调用静态方法。我觉得它看起来更干净。

变量`query`不能为空。

> 有人建议我使用 IList 而不是 DataTable。我应该使用这个吗？如果有，有什么好处？

`IList<T>`与(or `IEnumerable<T>`)不同，使用 IList 代替 DataTable 并没有太大的优势。`T`是另一个具有域对象含义的类`Book`。

Using`IList<T>`提供了对类型 T 的硬控制，并分别减少了错误，但设计起来更加困难。

> 使用 DataTable 有什么问题？

你应该明白，你的方法的调用者对你`Rows`的`DataTable`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-03T07:52:00.153

通常，我们在使用服务时尝试保持通用性，如果您从这方面来看，请使用 IList。但是，正如@Tilak 提到的，datatable 提供了更多功能。

# expect - 如何登录到使用 EXPECT 脚本保存到文件中的多个 IP 地址，而我在登录前设置了用户名和密码？

> ID：14228560
> 
> 赞同：0
> 
> 时间：2013-01-09T05:03:37.407
> 
> 标签：expect

如何登录多台 UNIX 机器，这些机器的 IP 地址用 EXPECT 脚本保存到一个文件中，而我在登录前设置了用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:15:21.087

大致：

```
set fh [open ip_file.txt r]
while {[gets $fh ip] != -1} {
    spawn ssh $user@$ip
    expect "assword:"
    send -- $pass\r
    # do stuff
    send -- exit\r
    expect eof
}
close $fh 
```

在这种情况下，您最好为每台机器设置密钥（[ssh-keygen](http://man.cx/ssh-keygen)、[ssh-copy-id](http://man.cx/ssh-copy-id)、[ssh-agent](http://man.cx/ssh-agent)、[ssh-add](http://man.cx/ssh-add)）。然后你可以使用一个简单的shell脚本

```
while read ip; do

ssh $user@$ip << END_SSH
# don't need the password
# do stuff
END_SSH

done < ip_file.txt 
```

# javascript - 响应式字体大小 nowrap

> ID：14228566
> 
> 赞同：2
> 
> 时间：2013-01-09T05:04:17.250
> 
> 标签：javascript, jquery, html, css

我想在屏幕上显示一行文本，以便：

1.  `Width:`100%
2.  `Fonts-size`最大可能基于浏览器宽度
3.  仅一行 ( `nowrap`)
4.  给定`font-family`

我的想法是启动一个隐藏`div`和随机的`font-size`，然后运行**​​jQuery**来“蛮力”增加或减少`font-size`，使其宽度接近浏览器宽度。

有没有最好的方法来做到这一点？如果我能看到一些例子，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T03:00:57.313

这是解决方案

[http://simplefocus.com/flowtype/](http://simplefocus.com/flowtype/)

```
$('body').flowtype({
   minimum : 500,
   maximum : 1200
}); 
```

下载[https://github.com/simplefocus/FlowType.JS](https://github.com/simplefocus/FlowType.JS)

最好的网页排版：基于元素宽度的字体大小和行高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:20:47.310

我会弄清楚文本的宽度与字体高度的比率，然后执行类似的操作

`var w = [parentElement].clientWidth; [textElement].style.fontSize = w*ratio;`

# php - FILE 在服务器中上传 PHP mysql

> ID：14228567
> 
> 赞同：0
> 
> 时间：2013-01-09T05:04:20.547
> 
> 标签：php, mysql, upload

我正在尝试通过 PHP mySQL 上传文件。我的脚本在 localhost 上完美运行，但在服务器中却无法运行。它没有将文件上传到服务器。这是我的动作脚本。

```
//This is the directory where images will be saved 
$target1 = "notice/";
$target2 = "notice/"; 
$target3 = "notice/"; 
$target4 = "notice/";  

$target1 = $target1 . basename( $_FILES['photo1']['name']); 
$target2 = $target2 . basename( $_FILES['photo2']['name']);
$target3 = $target3 . basename( $_FILES['photo3']['name']);
$target4 = $target4 . basename( $_FILES['photo4']['name']);

 //This gets all the other information from the form 
$day=$_POST['day']; 
$month=$_POST['month']; 
$year=$_POST['year']; 
$title=$_POST['title'];
$dis=$_POST['dis'];
$pic1=($_FILES['photo1']['name']);
$pic2=($_FILES['photo2']['name']); 
$pic3=($_FILES['photo3']['name']); 
$pic4=($_FILES['photo4']['name']);  

// Connects to your Database 
mysql_connect("localhost", "root", "") or die(mysql_error()) ; 
mysql_select_db("trustcol") or die(mysql_error()) ; 

//Writes the information to the database 
mysql_query("INSERT INTO notice VALUES (NULL, '$day', '$month', '$year', '$title',          '$dis', '$pic1', '$pic2', '$pic3', '$pic4')") ; 

move_uploaded_file($_FILES['photo1']['tmp_name'], $target1);
move_uploaded_file($_FILES['photo2']['tmp_name'], $target2);
move_uploaded_file($_FILES['photo3']['tmp_name'], $target3);
move_uploaded_file($_FILES['photo4']['tmp_name'], $target4);
include('adminbanner.php'); 
include('adminmenu2.php');
?> 
```

这在我的 PC/localhost 上完美运行，但在服务器中它没有上传文件，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:11:06.003

1.  您是否在 php.ini 中启用了 file_uploads（或使用 ini_set）？

2.  文件大小是否大于php.ini 中的[upload_max_filesize配置选项？](http://php.net/manual/en/ini.core.php#ini.upload-max-filesize)

3.  也看看其他的：PHP.ini

    [max_input_time](http://php.net/manual/en/info.configuration.php)、 [memory_limit](http://php.net/manual/en/ini.core.php#ini.memory-limit)、 [max_execution_time](http://php.net/manual/en/info.configuration.php#ini.max-execution-time)和 [post_max_size](http://php.net/manual/en/ini.core.php#ini.post-max-size)

4.  查找上传文件夹的权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:12:31.720

这是否在终端中工作但不是通过 HTML？如果是这样，我有类似的问题。我一直盯着我的 php，但事实证明我的表单 html 有问题。我忘记为`enctype="multipart/form-data"`我的标签添加属性`<form>`以适应文件上传。

# grails - 使用自定义 RoleVoter 可能会误解 IS_AUTHENTICATED_REMEMBERED

> ID：14228568
> 
> 赞同：0
> 
> 时间：2013-01-09T05:04:21.137
> 
> 标签：grails, spring-security

我们的系统需要允许用户成为多个组织的成员，并且每个组织具有不同的角色。我的 UserRole 类已修改为以下内容：

```
class UserRole implements Serializable {
   User user
   Role role
   Organization organization
} 
```

为了使它工作，我必须创建一个自定义投票器，如下所示：

```
class OrganizationRoleVoter extends RoleVoter {

  @Override
  public int vote(Authentication authentication, Object object, Collection<ConfigAttribute> attributes) {
    int result = ACCESS_ABSTAIN
    Collection<? extends GrantedAuthority> authorities = extractAuthorities(authentication)
    GrailsWebRequest request = RequestContextHolder.currentRequestAttributes()
    Organization selectedOrganization = (Organization) request.session.getAttribute("selectedOrganizationSession")

    attributes.each {ConfigAttribute attribute ->
      if (this.supports(attribute)) {
        result = ACCESS_DENIED
        for (GrantedAuthority authority : authorities) {
          if (attribute.attribute.equals(authority.authority)) {
            def user = User.findByUsername(authentication.name)
            def role = Role.findByAuthority(authority.authority)
            if (UserRole.findByUserAndOrganizationAndRole(user, selectedOrganization, role)) {
              result = ACCESS_GRANTED
              break
            }
          }
        }
      }
    }
    return result
  }

  Collection<? extends GrantedAuthority> extractAuthorities(Authentication authentication) {
    return authentication.getAuthorities();
  }

} 
```

我们遇到的问题是Remember Me cookie。如果在某些请求期间（不是全部）使用它，应用程序将强制进行完整身份验证。我只看到 ajax 请求会发生这种情况，但我们的应用程序是 90% 的 ajax，所以我不能肯定地说就是这种情况。但是，我将所有用户级控制器都注释如下：

```
@Secured(['ROLE_USER', 'IS_AUTHENTICATED_REMEMBERED']) 
```

（每次使用都需要 ROLE_USER 角色，必要时可以有其他角色）。

这是配置：

```
grails.plugins.springsecurity.voterNames = [
    'organizationRoleVoter', 'authenticatedVoter'
]

grails.plugins.springsecurity.logout.handlerNames =
  ['rememberMeServices',
      'securityContextLogoutHandler',
      'securityEventListener'] 
```

所以我现在不确定如果我告诉它允许记住我的 cookie 身份验证，为什么应用程序需要完整的身份验证。我误读了文档吗？还是我错误地执行了选民？

# excel - Excel中的VBA函数

> ID：14228569
> 
> 赞同：0
> 
> 时间：2013-01-09T05:04:31.353
> 
> 标签：excel, vba

我是 Excel VBA 的新手。我正在尝试做一个非常简单的函数，该函数的工作方式类似于如果特定单元格（例如 D）包含一些分类字符串，那么它将在另一个单元格中返回特定值。

例如，如果 D 列的任何单元格在其单元格的任何位置包含“Books”、“Food”、“Fruits”字符串，那么它将分别在 E 列中返回 01、02、03。当然，这将是一项非常简单的任务，可能早先提出的问题，但由于我是新手，请通过简短或任何链接让我知道以获取解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:41:44.833

简单修复下面的答案

```
For Counter = 1 To 2000
    Set curCell = Worksheets("Sheet1").Cells(Counter, 4)
    '  'Books', 'Food', 'Fruits
    If curCell.Value = "Books" Then
        Worksheets("Sheet1").Cells(Counter, 5) = 1
    ElseIf curCell.Value = "Food" Then
        Worksheets("Sheet1").Cells(Counter, 5) = 2
    ElseIf curCell.Value = "Fruits" Then
        Worksheets("Sheet1").Cells(Counter, 5) = 3
    End If
Next Counter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:53:36.227

你不需要宏。
您可以使用`Vlookup`on 第二列来搜索表中第一列的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:24:29.450

```
For Counter = 1 To 2000
    Set curCell = Worksheets("Sheet1").Cells(Counter, 4)
    '  'Books', 'Food', 'Fruits
    If curCell.Value = "Books" Then Worksheets("Sheet1").Cells(Counter, 5) = 01
    elseIf curCell.Value = "Food" Then Worksheets("Sheet1").Cells(Counter, 5) = 02 
    elseIf curCell.Value = "Fruits" Then Worksheets("Sheet1").Cells(Counter, 5) = 03
    end if
Next Counter 
```

# asp.net-mvc - 调用 Create() 时配置文件提供程序 MVC4 始终返回 null

> ID：14228571
> 
> 赞同：0
> 
> 时间：2013-01-09T05:04:36.843
> 
> 标签：asp.net-mvc, asp.net-membership

网络配置：

```
<profile enabled="true" defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" inherits="XCSN.Models.WebProfile" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile> 
```

创建用户，尝试在配置文件中分配名字和姓氏属性：

```
 [Authorize(Roles = "Manager")]
    [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;

            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                Roles.AddUserToRole(model.UserName, model.Role);

                //add profile information
                var profile = WebProfile.GetProfile(model.UserName);
                profile.FirstName = model.FirstName;
                profile.LastName = model.LastName;
                profile.Save();

                return RedirectToAction("Index", "Account");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        ViewBag.RolesList = Roles.GetAllRoles().Select(x => new SelectListItem { Text = x, Value = x });
        // If we got this far, something failed, redisplay form
        return View(model);
    }

public class WebProfile : ProfileBase
{
    [Display(Name = "First Name")]
    public virtual string FirstName
    {
        get
        {
            return (this.GetPropertyValue("FirstName").ToString());
        }
        set
        {
            this.SetPropertyValue("FirstName", value);
        }
    }

    [Display(Name = "Last Name")]
    public virtual string LastName
    {
        get
        {
            return (this.GetPropertyValue("LastName").ToString());
        }
        set
        {
            this.SetPropertyValue("LastName", value);
        }
    }

    public static WebProfile GetProfile(string username)
    {
        return Create(username) as WebProfile;
    }
} 
```

它在这一行失败：profile.FirstName = model.FirstName; WebProfile.GetProfile(model.UserName); 返回null，我不明白为什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:40:45.850

inherits="XCSN.Models.WebProfile" 应该在标签中，而不是标签中。

像这样：

```
<profile inherits="XCSN.Models.WebProfile" enabled="true" defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile> 
```

# python - Python - 正确使用 OR 函数

> ID：14228572
> 
> 赞同：2
> 
> 时间：2013-01-09T05:04:44.610
> 
> 标签：python

> **可能重复：**
> [或python中的行为：](https://stackoverflow.com/questions/10460963/or-behaviour-in-python)

可能非常基本，但是在四处搜索后我有点卡住了。对我来说，这行代码应该会导致它打印“ELSE”，因为字符串不包含任何一个单词。显然这不是那么简单，似乎无法弄清楚为什么。我确保将字符串拆分为一个列表，以便于搜索。我究竟做错了什么？

```
string = "Johnny Was Here Yesterday"
string = string.split()

if "Bob" or "Hello" in string:
    print "IF"
else:
    print "ELSE" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T05:06:48.380

正确的方法是这样做：

```
if 'Bob' in text or 'Hello' in text:
    print 'IF'
else:
    print 'ELSE' 
```

您的代码不起作用的原因是因为 Python 将其评估为：

```
if ('Bob') or ('Hello' in text): 
```

因为`'Bob'`总是计算为`True`，所以你的函数总是打印`'IF'`

顺便说一句，使用`str`or`string`作为变量名并不好，因为它会覆盖*非常有用*的内置方法`str()`或库`string`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T05:07:59.133

在 Python 中，非空字符串的计算结果为 True。

您的`if`陈述解释如下：

```
if ("Bob") or ("Hello" in string"): 
```

由于`"Bob"`是非空字符串，因此该语句的计算结果始终为`True`.

你应该使用类似的东西

```
if "Bob" in string or "Hello" in string: 
```

或者

```
if any(map(lambda x: x in string, ["Bob", "Hello"])) 
```

如其他答案所述，您可能希望重新考虑使用变量名称`string`，因为它与 pythons[标准库](http://docs.python.org/2/library/string.html)之一发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:10:35.427

它的编写方式将有两个测试；第一个测试是`if "Bob"`，第二个测试是`"Hello" in string`。`if str`对于任何非空字符串始终为真，因此`if "Bob"`始终计算为真。

您可以使用`if ("Bob" in string) or ("Hello" in string):`或使用来解决此问题`if any((x in string for x in ["Hello", "Bob"]):`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T05:18:44.083

"Bob" 是一个 3 长度的字符串，它是`True`当它出现在原因中时。

```
>>> bool("Bob")
True
>>> bool("")
False 
```

您应该修改为：

```
if "Bob" in string or "Hello" in string:
    print "IF"
else:
    print "ELSE" 
```

# twitter-bootstrap - 是否可以使用 Twitter Bootstrap 的响应式布局并在缩小时继续显示 2 列？

> ID：14228576
> 
> 赞同：0
> 
> 时间：2013-01-09T05:05:25.360
> 
> 标签：twitter-bootstrap, responsive-design

**现在的情况**

我有一个`<div class="span3">`用于左列和`<div class="span9">`右列的，当它被调整为更小的尺寸（在移动设备或平板电脑上）时，左侧的 span3 类将位于 span9 类的顶部。

**期望的情况**

我不希望它只折叠成 1 列，因为我想继续拥有 2 列，即使它正在调整大小。如果我可以在较小的屏幕尺寸（例如手机/平板电脑）上将其显示为 1:11 的比例，并在较大的屏幕尺寸（例如笔记本电脑/显示器）上继续显示为 3:9，那就太好了

*我可以知道 Twitter Bootstrap 的响应式设计布局是否可以实现所需的情况？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:56:30.860

不，使用 Twitter Bookstrap 的响应式布局可以实现所需的情况。

但是，这并不是一件很难解决的事情。

如果您希望发生这种情况，您将需要在元素上添加另一组类。默认情况下，所有元素都堆叠在移动设备上，因为线性版本是我们所期望的。如果您查看[http://foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)，您会看到 Zurb 还创建了另一组基于 4 列移动网格的样式。通过添加这些额外的类，它可以让你控制你的列占据 1/3 1/2 2/3 全宽。

如果您忽略填充和边距，您将有一些类似的东西

```
.mobile-one {width: 25%;}
.mobile-two {width: 50%;}
.mobile-three {width: 75%;}
/* We've left this one off because it's the same style that is already applied 
.mobile-one {width: 100%;} */ 
```

然后到您现有的 HTML，您可以添加

```
 <div class="span3 mobile-one">...</div>
 <div class="span9 mobile-three">...</div> 
```

或者

```
 <div class="span3 mobile-two">...</div>
 <div class="span9 mobile-two">...</div> 
```

**编辑**

我编写了一个基本示例供您使用-> [http://playground.responsivedesign.is/twitter-bootstrap/](http://playground.responsivedesign.is/twitter-bootstrap/)

# flash - 如何在 flex 循环中读取 line 的值

> ID：14228577
> 
> 赞同：0
> 
> 时间：2013-01-09T05:05:29.043
> 
> 标签：flash, apache-flex, adobe

我是弹性开发的新手。我正在尝试在我的背景所在的 php 中完成它似乎非常基本。我想要做的是获取我正在从 textarea 读取的行的值。我阅读这些行没有问题，但是当我运行循环时我无法获得它的值。代码如下。如果有人可以提供帮助，我将不胜感激

```
var composer:StandardFlowComposer = txtSource.textFlow.flowComposer as StandardFlowComposer;
            for each (var line:TextFlowLine in composer.lines){ 
                trace(line); 
                     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:31:34.127

据我从文档中得知，“行”不是 StandardFlowComposer 的属性。您需要使用 getLineAt(int) 来读取一行。所以，像这样：

```
var composer:StandardFlowComposer = txtSource.textFlow.flowComposer as StandardFlowComposer;
for (var i:int = 0; i < composer.numLines; i++){ 
    trace(composer.getLineAt(i)); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:59:17.653

```
var composer:StandardFlowComposer = txtSource.textFlow.flowComposer as StandardFlowComposer;

 var dlim:int=0;
for each (var line:TextFlowLine in composer.lines)
{ 
        var text:String = txtSource.text.slice(dlim,dlim+line.textLength);
        dlim=dlim+line.textLength;
        trace(text);
} 
```

# magento-1.7 - Magento 配置产品正常价格在销售价格发生时设置为零

> ID：14228584
> 
> 赞同：2
> 
> 时间：2013-01-09T05:06:23.630
> 
> 标签：magento-1.7, php

我今天注意到我的配置产品存在问题。希望大家能帮我解决这个问题。我在网站上运行 magento CE 1.7.0。

这是问题链接 [http://fishermandepot.com/best-deals/yo-zuri-surface-bull-gt-popper.html#.UOyhGKz5VHA](http://fishermandepot.com/best-deals/yo-zuri-surface-bull-gt-popper.html#.UOyhGKz5VHA)

问题的发生就像您选择销售项目的下拉选项一样，它在该页面上显示为

Reg:0 Sale:28.99 而不是 Reg:33.99Sale:28.99

如果您没有点击下拉选项，价格显示正确。

我检查了后端，所有子产品的原价和销售价格都是正确的。添加到购物车功能仍然具有正确的销售价格。

我试图检查代码。但不知道为什么会出错。因为如果没有选择下拉菜单。一旦涉及下拉菜单，它将正确显示，但无法正常工作。

希望你们能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:14:38.977

听起来这可能是您的主题的问题。

尝试此解决方案，但首先备份原始文件。只需将其重命名为**optionsBK.phtml**

代替

**app/design/frontend/[YOURTEMPLATE]/catalog/products/view/options.phtml**

相同的文件位于：

**app/design/frontend/base/default/template/catalog/product/view/options.phtml**

在这里找到这个：http: [//www.magentocommerce.com/boards/viewthread/284168/#t393566](http://www.magentocommerce.com/boards/viewthread/284168/#t393566)

# jquery - 切换高度类

> ID：14228592
> 
> 赞同：0
> 
> 时间：2013-01-09T05:07:21.183
> 
> 标签：jquery, css

在我的项目中，每当用户单击标题栏时，我都会尝试`toggle`通过提供以下属性以使仅出现标题栏（就像 FB Chat 一样）来调整 div 的高度。

**css**

```
.minimize{min-height:10px;max-height:50px;height:auto;} 
```

**jQuery**

```
$('#chat-outline').toggleClass('minimize'); 
```

但我认为由于该 div 已经存在的 CSS 属性，没有分配 jQuery。

```
#chat-outline
{
    background-color: gray;
    width: 16%;
    height: 45%;
    min-height: 300px;
    min-width: 200px;
    max-height: 450px;
    max-width: 300px;
    position: fixed;
    bottom: 20px;
    right: 10px;
    padding: 2px;
} 
```

jQuery 函数适用于所有属性（显示、背景色、颜色、边框），但它不能只分配`height`.

这是**[小提琴](http://jsbin.com/uyanix/1/)**

**编辑**：在 Sam3k 解决方案的帮助下，我非常接近结果

[http://jsbin.com/uyanix/19/edit](http://jsbin.com/uyanix/19/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:11:16.830

尝试在课堂`!important`上为您的身高添加声明。`minimize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:15:28.747

`#chat-outline`, 它可能优先于`.minimize`. 如果不支持像 IE6 这样的旧浏览器，您可能会这样做：

```
#chat-outline.minimize{min-height:10px;max-height:50px;height:auto;} 
```

我不会`!important`像上面建议的那样使用它，因为它只针对某些浏览器而且它更 hacky。试试我的建议，因为它可能是一种更清洁的方法。

**更新**：

[jsbin.com/uyanix/27](http://jsbin.com/uyanix/27)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:37:06.933

这是以下修复的示例：http: [//jsbin.com/uyanix/14](http://jsbin.com/uyanix/14)

您创建的切换是按预期切换类，但这是一种确保标题栏高度并提供更明确的方式在小尺寸和大尺寸之间切换的方法

CSS 更改

将标题设为固定高度，然后在最小和最大高度之间切换。

```
 #chat-title
    {
        height: 20px;
        width: 100%;
        background-color: #4B6C9E;
    }

    #chat-outline.minimize{height:5px;}    
    #chat-outline.maximize{height:100%;}

#chat-outline
{
    background-color: gray;
    width: 16%;
    height: 45%;

    min-height: 25px;  
    min-width: 200px;
    max-height: 450px;
    max-width: 300px;

    position: fixed;
    bottom: 20px;
    right: 10px;
    padding: 2px;
} 
```

使用 Jquery 将最大高度添加到切换 2 类

```
$('#chat-title-name').on('click', function () {
               $('#chat-outline').toggleClass('minimize');
                 $('#chat-outline').toggleClass('maximize'); 

    }); 
```

将 DOM div 初始化为最大化，这将在以后变得不最大化

```
<div id="chat-outline" class='maximize'> 
```

这是一个例子：http: [//jsbin.com/uyanix/14](http://jsbin.com/uyanix/14)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-01T23:10:57.300

如果您想将 .toggleClass() 与 CSS 过渡一起使用，请使用 MAX-HEIGHT 并完全删除 height 属性。在您打算附加的课程上，只需将 max-height 设置为您知道永远无法达到的高度。通过这样做，容器高度将由内容（在某种程度上是动态的）控制。

```
.container {
    display: block;
    background: #ff0000;
    max-height: 40px;
    -moz-transition: max-height 500ms ease-in-out;
    -webkit-transition: max-height 500ms ease-in-out;
    transition: max-height 500ms ease-in-out;
}

.appended-for-height {
    max-height: 600px;
} 
```

这是一个使用 .toggleClass() [http://codepen.io/ChadR/pen/gpvWGE的 CSS 转换的示例](http://codepen.io/ChadR/pen/gpvWGE)

# asp.net-web-api - 如何使用visual fox pro提供的宁静服务？

> ID：14228596
> 
> 赞同：4
> 
> 时间：2013-01-09T05:07:40.560
> 
> 标签：asp.net-web-api, visual-foxpro, restful-architecture

我使用 mvc4 asp.net web api 创建了一个 RestFUL api，我的一个客户需要从他的 visual fox pro 系统中使用一些服务。

他告诉我不能使用我的 RestFUL 服务，因为没有办法。我对 Visual FoxPro 一无所知。

有什么方法可以使用 Visual Fox Pro 的 RestFUL 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T16:31:45.607

你真的在这里问了两个问题。

## 1：“在 Visual FoxPro 中是否有读取 RESTful Web 服务的本机功能？”

没有。在 Web 服务从古怪的浏览器转向中心技术之前，Visual FoxPro 的有意义的开发就停止了，因此这个遗留的 xBase 系统从未调整为能够与它们通信。

## 2：“有没有办法将数据从 RESTful Web 服务获取到 Visual FoxPro 中？”

是的。VFP 可以充当 COM 或 ODBC 客户端，并且可以利用从这些方法中的任何一种中继的数据。如果您没有遇到安全墙并且有足够的技能手动指定 HTTP 标头，那么标准 (1) MSXML.XMLhttpRequest 对象是您的最佳选择。

请注意，尽管至少有一个库可以将 JSON 转换为 VFP 可用的对象，但您将无法在 FoxPro 中本地使用 JSON。如果您有选择，XML 是更可取的，因为您可以利用在 Visual FoxPro 的最后一个版本中引入的 XMLAdapter 类。

（1：“标准”在这里的意思是“Windows 平台上的标准。”任何允许运行 Visual FoxPro 并且应该允许在 Internet 附近的任何地方都已经安装了 MSXML。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-02T18:55:10.983

虽然没有从 VFP 调用 REST 服务的“本机”方式，但是您可以轻松地创建一个 MSXML2.ServerXMLHTTP 对象，它是 Windows 自带的。我只使用 MSSoap.SoapClient30 进行 SOAP 调用（您必须安装它），但我更喜欢 MSXML2.ServerXMLHTTP 对象进行 REST 调用。

下面是一个如何通过 VFP 调用 REST 服务的示例。

**调用 REST GET 方法的示例**

```
xmlHttp = CREATEOBJECT("MSXML2.ServerXMLHTTP")
xmlHttp.open("GET", "put url with parameters here", null)
xmlHttp.setRequestHeader("Content-Type", "text/xml")
xmlHttp.send("")
result = xmlHttp.responseText
? result 
```

**调用 REST POST 方法的示例**

```
xmlHttp = CREATEOBJECT("MSXML2.ServerXMLHTTP")

xmlHttp.open("POST", "put URL here", null)
xmlHttp.setRequestHeader("Content-Type", "text/xml")
xmlHttp.send("put string to send in body")
result = xmlHttp.responseText
? result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T11:47:28.707

是的，

FoxPro 可以使用 Mircrsoft Soap SDK 软件连接到任何 WebServervice，这个最好是返回一个 XML。

这是我在安装免费软件“soapsdk.exe”后使用的

```
local loWS, loP

loWS=createobject("mssoap.soapclient30")    

loWS.mssoapinit("http://nn.nn.nnn.nn:80/Default.asmx?WSDL")

loP=loWS.name_public_method(html_param_1,html_param_2...) 
```

loP 包含可以包含 XML 格式的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-30T22:03:20.027

现在是 2021 年，没有本地方法可以做到这一点。但是，调用 REST 服务所需的只是：

*   HTTP 客户端
*   JSON 序列化器

您可以使用 FoxPro 代码（或此线程中其他答案中显示的一些 XmlHttp 代码）创建一个非常简单的 WinHttp HTTP 客户端：

```
FUNCTION WinHttp(lcUrl, lcVerb, lcPostData, lcContentType)
LOCAL lcResult

*** FOR DEMOS ONLY!
IF EMPTY(lcUrl)    
   RETURN null
ENDIF
IF EMPTY(lcVerb)
   lcVerb = "GET"
   IF !EMPTY(lcPostData)
      lcVerb = "POST"
   ENDIF
ENDIF   

*** Example of using simplistic WinHttp client to retreive HTTP content
LOCAL loHttp as WinHttp.WinHttpRequest.5.1, lcResult
loHTTP = CREATEOBJECT("WinHttp.WinHttpRequest.5.1")    

loHTTP.Open(lcVerb, lcUrl,.F.)

IF !EMPTY(lcContentType) AND lcVerb = "POST" OR lcVerb = "PUT" 
    loHttp.SetRequestHeader("Content-Type",lcContentType)
ENDIF   

*** If using POST you can post content as a parameter
IF !EMPTY(lcPostData)
    loHTTP.Send(lcPostData)
ELSE
   loHttp.Send()    
ENDIF

lcResult = loHttp.ResponseText

loHttp = NULL 

RETURN lcResult 
```

这是没有纠错的非常基本的代码，但你可以从那里开始。

```
lcResult = WinHttp("https://albumviewer.west-wind.com/api/artist/1")
? lcResult && JSON response

*** Create some JSON to post manually
TEXT TO lcJson NOSHOW
{
  "username": "test",
  "password": "test"
}
ENDTEXT
lcResult = WinHttp("https://albumviewer.west-wind.com/api/authenticate","POST",lcJson,"application/json")
? lcResult    && JSON 
```

对于 JSON 序列化和解析，您需要使用某种库。下面是几个仍在维护的 FoxPro JSON 库：

*   [nfJson](https://github.com/VFPX/nfJson)（在 GitHub 上）
*   [wwJsonSerializer](https://webconnection.west-wind.com/docs/_1wu18owba.htm)（西风客户端工具的一部分）

组装`wwHttp`并`wwJsonSerializer`手动看起来像这样以发出`POST`请求并接收 JSON 结果作为对象：

```
LOCAL loHttp as wwHttp, loSer as wwJsonSerializer
loHttp = CREATEOBJECT("wwHttp")
loSer = CREATEOBJECT("wwJsonSerializer")

loUser = CREATEOBJECT("EMPTY")
ADDPROPERTY(loUser,"Username", "test")
ADDPROPERTY(loUser, "Password", "test")
lcJson = loSer.Serialize(loUser)

loHttp.cContentType = "application/json"
lcJson = loHttp.Post("https://albumviewer.west-wind.com/api/authenticate", lcJson)

IF loHttp.nError # 0
   ? "Failed: " + loHttp.cErrorMsg
ENDIF
IF loHttp.cResultCode = "401"
   ? "Login failed. Invalid credentials"
   RETURN
ENDIF   
IF loHttp.cResultCode # "200"
   ? "Failed: " + loHttp.cResultCode + "  " + loHttp.cResultCodeMessage
   RETURN
ENDIF   

loAuth = loSer.Deserialize(lcJson)

lcToken = loAuth.Token   && JSON Object contains token
IF EMPTY(lcToken)
   ? "Authentication failed. Invalid token."
   RETURN
ENDIF 
```

如果您需要更多详细信息和背景信息，您可以在此处查看详细的白皮书，其中讨论了 FoxPro 特定场景的客户端和服务器端：

*   [使用 FoxPro 构建和使用 REST API 服务](https://west-wind.com/wconnect/weblog/ShowEntry.blog?id=9169)

# netbeans - 无法在我的 J2ME 模拟器中使用安全通道编译我的应用程序

> ID：14228598
> 
> 赞同：0
> 
> 时间：2013-01-09T05:07:50.207
> 
> 标签：netbeans, java-me, lwuit

在我的 lwit 项目中，我使用安全通道，因为我使用安全通道，所以我的 j2me 模拟器打开我的应用程序，该应用程序与安全通道连接并抛出错误说明`Sorry. Your phone does not have appropriate certificate to make connection with the server.`

如何在我的 j2me 模拟器中使用安全通道进行编译有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:35:02.270

一些较新的证书在旧手机上不可用。例如，facebook/twitter 使用旧设备上不可用的新证书。

# php - 联系我们表格在 Zend 框架下不起作用

> ID：14228607
> 
> 赞同：0
> 
> 时间：2013-01-09T05:08:37.253
> 
> 标签：php, zend-framework, zend-form, zend-controller

我开始学习 Zend，所以这是我关注的联系我们页面的链接 -

我的 Zend 版本 - Zend Framework **v1.11.11**

[http://www.tutorial-portal.com/tutorial/show/id/27](http://www.tutorial-portal.com/tutorial/show/id/27)

我使用命令行创建了表单 -`zf create form Contact`它成功创建了 File.File`forms`下的`Contact.php`文件夹。中的代码`Contact.php`如下 -

```
<?php

class Application_Form_Contact extends Zend_Form
{

    public function init()
    {
        /* Form Elements & Other Definitions Here ... */
        $this->setmethod('post');
        $this->setName('contact-form');

        $this->addElement('text', 'name', array(
                            'label' => 'Please enter your name',
                            'required' => true,
                         ));

        $this->addElement('text', 'email', array(
                            'label' => 'Please enter email address',
                            'required' => true,
                            'validators' => array('EmailAddress'),
                         ));

        $this->addElement('textarea', 'message', array(
                            'label' => 'Please enter your message',
                            'required' => true,
                            'validators' => array( array('validator' => 'StringLength', 'options' => array(0, 20) )
                         ));

        $this->addElement('captcha', 'captcha', array(
                            'label'      => 'Please enter the 5 letters displayed below:',
                            'required'   => true,
                            'captcha'    => array('captcha' => 'Figlet','wordLen' => 5,'timeout' => 300 )
                        ));                                      

        $this->addElement('submit', 'submit', array(
                            'ignore'   => true,
                            'label'    => 'Send Message',
                        ));

        $this->addElement('hash', 'csrf', array(
                            'ignore' => true,
                        ));
    }               
} 
```

现在我`ContactController.php`在`C:\xampp\htdocs\projectone\application\controllers`. 此控制器中的代码如下所示 -

```
<?php

class ContactController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
        //$form  = new Application_Form_Contact();
        //$this->view->form = $form;

    }

    public function indexAction()
    {
        // action body
        // Create form instance
        $form = new Application_Form_Contact();

        /**
         * Get request
         */
        $request = $this->getRequest();
        $post = $request->getPost(); // This contains the POST params

        /**
         * Check if form was sent
         */
        if ($request->isPost()) {
            /**
             * Check if form is valid
             */
            if ($form->isValid($post)) {
                // build message
                $message = 'From: ' . $post['name'] . chr(10) . 'Email: ' . $post['email'] . chr(10) . 'Message: ' . $post['message'];
                // send mail
                mail('contact@yourwebsite.com', 'contact: ' . $post['subject'], $message);
            }
        }

        // give form to view (needed in index.phtml file)
        $this->view->form = $form;

    }

} 
```

`index.phtml`文件夹结构下的 代码`C:\xampp\htdocs\projectone\application\views\scripts\contact`是这样的 - 在 php 标签中回显代码 -`echo $this->form`

但这根本不起作用:(真的无法找到我做错了什么。

它只显示一个空白页面，甚至没有简单的 html 内容。

这是我使用的 URL，尽管其余控制器工作正常 -

```
http://localhost/projectone/public/contact 
```

**PS** - 由于我是 Zend 的初学者，我不知道在哪里以及如何查找 Zend 错误，也请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:50:53.360

在执行各种启发式方法并检查各个级别的代码后，我就可以调试我的代码了。问题实际上出在这个 LOC 中 -

**错误**-

```
 $this->addElement('textarea', 'message', array(
                        'label' => 'Please enter your message',
                        'required' => true,
                        'validators' => array( array('validator' => 'StringLength', 'options' => array(0, 20) )
                     )); 
```

**消除**

```
'validators' => array( array('validator' => 'StringLength', 'options' => array(0, 20) ) 
```

一切都像魅力一样顺利。

# c# - 如何在 c# 中使用 LINQ 从 sql 数据库中查找重复项

> ID：14228608
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:08:39.583
> 
> 标签：c#, windows, linq, duplicates

我有一个方法可以使用 sql 命令从数据库中返回重复记录。代码是：

```
 public bool RecordExists(string name)
   {
       OleDbCommand cmd = new OleDbCommand("select count(*) from Demographics where thal_Id = '" + txtPtntSmpl.Text + "'", con);
       int recordCount = Convert.ToInt32(cmd.ExecuteScalar());
       cn.Close();
       return recordCount > 0;
   } 
```

据此，如果我在文本框离开事件中调用此方法，我将在数据库中出现重复记录时引发错误。现在我想要**使用 linq 进行相同的操作**。请任何人帮助我。感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:16:40.927

假设您有一个 Demographic 列表，并且您想查看有多少与某个文本值匹配，请尝试以下操作：

```
 public bool RecordExists(string name)
   {
       List<Demographic> demographics = PopulateList();

       return demographics.Count(d => d.thal_Id == name) > 0;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:17:37.650

如果你使用 Linq to SQL，`dc`作为你的数据上下文，它应该看起来像这样：

```
public bool RecordExists(string id)
{
    return dc.Demographics.Any(d => d.thal_Id == id);
} 
```

# ios - Revmob 在 iphone os 6.0 中添加不接收

> ID：14228610
> 
> 赞同：3
> 
> 时间：2013-01-09T05:08:43.060
> 
> 标签：ios, revmob

当我`RevMob`在我的应用程序中集成`RevMob_ios-sdk-4`. 我收到一条控制台消息`"No Ads available for this device/country at this moment, or your App ID is paused. (204)"`。但是`RevMob`在测试模式下做得很好。以前它工作正常。正在显示添加，但从几天开始，我的应用程序出现问题，并且正在显示控制台消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:38:47.437

`RevMob 5.2.7`最近发布了一个新版本的 RevMob 。升级到此版本可能会解决您的问题。

***编辑：-*** RevMob 在测试模式下工作得非常好，但在生产模式下给出了与上面提到的相同的错误。我已经在设备和模拟器上对其进行了测试。

**EDIT2：我就这些问题联系了 RevMob 团队并得到了以下答复：**

这个消息是正常的。不用担心。

这要么意味着您的设备中当前没有要推广的应用程序，要么您目前已经下载了所有可用的应用程序。

如果您想确保集成正确完成，您可以使用我们的测试模式 (http://sdk.revmob.com/)。但请确保在提交应用程序之前将其关闭；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:36:08.823

测试模式的理念就是测试，所以当开始测试模式时，不管怎样，它都会展示广告。

此消息通常反映了它所说的内容，或者您​​的应用在[RevMob 控制台](http://console.revmob.com)上已暂停，或者目前您的设备没有可用的广告。

如果您的应用没有暂停，您可以在其他设备上尝试。他们也可能在您所在的国家/地区没有为您的设备投放广告。

**编辑**：这通常是一个临时问题，如果出现这种情况，您无能为力，这也不意味着您的应用不会在美国等高端市场上展示广告。

# java - java ServerSocket绑定到同一个端口时不会抛出IOException

> ID：14228615
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:09:19.153
> 
> 标签：java, sockets

我的代码有如下问题。代码：

```
int port = 14205; // begin port
// Try to bind socket on any port<br>

while(true){

try {
     InetSocketAddress isa = new InetSocketAddress(port);
    Log.logFile("bind port = " + port);

        // ss is a ServerSocket object
    ss.bind( isa );

    break;
} catch (IOException e) {
    Log.logFile("exception");
    port++;
}
 } 
```

我在同一台机器（win7x64）上同时在 JVM 1.7 和 JVM 1.6 上运行此代码。使用 CurrPorts 工具来调查我们正在监听的端口。结果：我们在同一个端口 14207 上进行监听。我认为 JVM 在运行此代码的第二个实例时必须抛出一个 IOException，但它没有。

我的代码有什么问题？请帮忙。注意：我必须在这个 senario（2 个 JVM）中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:14:33.663

`break;`将打破你的 while 循环并退出 while 循环，并且没有关于 catch 的问题`exception`。但是，当您尝试捕获异常时，您需要将异常消息打印到日志文件。

替换这个

```
Log.logFile("exception"); 
```

有了这个

```
Log.logFile("exception"+ e.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:17:22.360

您的循环在第一次绑定后中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:32:44.077

好的！我会回答我的问题。这是 JVM 错误。更多信息请参考 Oracle 漏洞库：http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=71f70e71266a551ce53dcda4a050c?bug_id= [7174699](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=71f70e71266a551ce53dcda4a050c?bug_id=7174699)

# php - 如何通过检测 URL 在 php 中隐藏 HTML 页面源

> ID：14228619
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:09:53.167
> 
> 标签：php, html

我不关心人们查看我的源代码，但是，我希望机器人避免进入我的网站并通过我的安全性。我希望禁用页面源查看。为此，我正在使用以下代码：

```
$url= $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
$needle = "view-source:";
if (strpos($url,$needle)) { echo "You can not see me";}
else {
//The rest of my index page
} 
```

这里的目标是，如果有人试图查看我的页面源，或者如果机器人试图查看，而不是能够看到它，代码将检测到页面 URL 是 view-source:www.yoururl.com 并显示源而不是页面源中的“不错的尝试”消息。上面的代码理论上应该可以工作，但没有。还有其他想法可以尝试使这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:23:22.063

这是无法做到的，HTML 源代码被传递给任何请求它的人。您可能应该重新设计您的验证码，因为从您的描述来看它并不安全。使用会话变量来存储数据并检查表单处理器脚本上提交的值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-09T05:24:14.950

如果这是您唯一关心的问题，您可以在 .htaccess 中使用`mod_rewrite`永久 301 重定向来隐藏`?captcha=xxxx`您的 url 部分。

# php - 无法在 Mysqli [Undefined offset] 中获取结果

> ID：14228622
> 
> 赞同：2
> 
> 时间：2013-01-09T05:10:02.540
> 
> 标签：php, loops, binding, mysqli, fetch

这是我的简单查询，即使它没有执行，我的 $total 是 3;

```
$pnc = array();

$pnc[] = ('318','259','789');

$total = count($pnc);

for($p=0;$p<$total;$p++)
{
   echo $query = "select `id` from `patents` where `number`=?";
   $stmt = $mysqli->prepare($query) or $mysqli->error ;
   $stmt->bind_param("s",$pnc[$p]);
   $stmt->execute();
   $stmt->bind_result($id);
   $stmt->fetch();
   echo $id;
} 
```

当我回显查询时，我得到了

```
select `id` from `patents` where `number`='318' 
```

当我在 phpmyadmin 中运行此查询时，它会获取 'id' 值，但在这里它无法获取 id，

这是由于未定义的偏移量而出现的问题，`bind_param("s",$pnc[$p]);`即使我正在获取数组每个元素的值。

请为此提供解决方案谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:17:02.003

`Change`-

```
$pnc = array();
$pnc[] = ('318','259','789');
$total = count($pnc); 
```

**至**

```
$pnc = array('318', '259', '789');
echo $total = count($pnc); 
```

**代码中的错误** -->[错误](http://codepad.org/HXlvF9O3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:18:00.280

我的猜测被关闭`error_reporting`了，因为

```
 $pnc[] = ('318','259','789');
 $total = count($pnc); 
```

给我一个语法错误（PHP 5.4.7）。

尝试将这两行更改为：

```
$pnc = array('318','259','789');
$total = count($pnc); 
```

# android - 在选择值之前，我想在 Spinner 中显示为“请选择”。选择一个值后它应该消失

> ID：14228623
> 
> 赞同：3
> 
> 时间：2013-01-09T05:10:24.823
> 
> 标签：android, spinner

我正在使用 Spinner 从下拉菜单中选择一个值。我希望最初显示为“请选择”，在选择一个值后它应该消失。我正在使用以下代码，

```
UPanelID = (Spinner) findViewById(R.id.spinner1);
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, data);
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
UPanelID.setAdapter(dataAdapter);
UPanelID.setOnItemSelectedListener(typeSelectedListener); 
```

> 数据是一个字符串数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T05:14:21.077

您可以通过 在 xml 文件中设置`android:prompt="Please Select"`属性来执行此操作。`Spinner`

或者，您可以查看以下示例来制作 Spinner 中的第一项`"Please Select"`：

[http://b2creativedesigns.comuv.com/Spinner.html](http://b2creativedesigns.comuv.com/Spinner.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:16:59.533

在这里，我只是将 Please Select 添加到新数组中。这可能对你有帮助

```
 String[] newarr= new String[data.length+1];
    newarr[0] = "Please select";
    for(int i=1;i<newarr.length;i++)
    {
        newarr[i] = data[i-1];
    }
    UPanelID = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, newarr);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    UPanelID.setAdapter(dataAdapter);
    UPanelID.setOnItemSelectedListener(typeSelectedListener); 
```

# android - 在 android 应用程序中阻止特定网站而不从设备上卸载它

> ID：14228624
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:10:24.260
> 
> 标签：android

如何在android中开发一个应用程序来阻止设备中的特定网站而不从设备上卸载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:17:08.353

如果手机上的 Android 操作系统未植根，您将无法阻止其他应用程序。Os 没有授予这样做的权利。Android 运行在 Linux 上，Linux 提供沙盒系统调用 API 并规定规则。

[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

基本上你可以做允许做的事情。拦截呼叫，通过设备管理器阻止摄像头，读取其他应用程序的数据（如果他们共享该数据并且仅共享他们共享的数据），使用一些公共资源，但仅此而已。要做你想做的事，你的应用程序必须是 root，但标准的第三方应用程序没有 root 权限。您的解决方案是更改固件，使用 root 权限将您的应用程序绑定到其中。

尽管某些应用程序提供了相同的功能。这些应用程序显然是使用 Android 固件预先构建的。制造商在固件销往世界其他地方之前获得固件。进行必要的更改以赋予其应用更多权限并将其与 Android ROM 绑定。您无法卸载这些应用程序。

唯一可能更喜欢的解决方案是拥有 root 权限来阻止其他应用程序。而且您只能在有根设备上获取它们。

# android - Android 如何在速度变化时旋转针？

> ID：14228627
> 
> 赞同：7
> 
> 时间：2013-01-09T05:10:41.483
> 
> 标签：android, gauge

我已经编写了一个应用程序，其中我有`speedometer`a `needle`，并且我试图`center`随着速度的变化围绕它旋转针。

我从那个角度计算来自互联网的下载速度的速度值也测量，

我的问题是如何将指针一端固定在车速表的中心？

如何随着角度值的变化旋转针？

我被期望这样

![在此处输入图像描述](../Images/28daad8836bf599d943b092d64d1b9bf.png)

这里的针不固定中心位置如何像第一个图像中心一样固定图像的针中心

![在此处输入图像描述](../Images/4ba691becf78859ff07a7160987e1ec9.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T06:03:11.787

这是我写的自定义 GaugeView：GaugeView.java

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.RotateAnimation;
import android.view.animation.Transformation;
import android.widget.AbsoluteLayout;
import android.widget.LinearLayout;
@SuppressWarnings("deprecation")

public class GaugeView extends LinearLayout{

private int gaugeDiameter;      //Gauge radius
private int gaugeBackground;    //Gauge background resource
private int needleBackground;   //Needle background resource
private int needleWidth;        //Needle width
private int needleHeight;       //Needle height
private int needleX;            //Needle X position
private int needleY;            //Needle Y position
private int needleDeltaX;       //Needle's X position from the centre of gauge
private int needleDeltaY;       //Needle's Y position from the centre of gauge
private int deflectTime;        //Animation time when needle deflects to a higher angle
private int releaseTime;        //Animation time when needle deflects to a lower angle
private int pivotX;             //Needles X Axis of rotation
private int pivotY;             //Needles Y Axis of rotation
private int deltaXAxis;         //Needles new X Axis of rotation
private int deltaYAxis;         //Needles new Y Axis of rotation
private float currentValue;     //Current needle value
private float minValue;         //Minimum needle value
private float maxValue;         //Maximum needle value
private float currentAngle;     //Current angular position of needle(Used in rotate animation)
private float previousAngle;    //To store last known angular position of needle(Used in rotate animation)
private float minAngle;         //Minimum angle of needle
private float maxAngle;         //Maximum angle of needle
private float currentDegrees;   //Current angular position of needle

private boolean animateDeflect; //Enable/Disable rotate animation

NeedleDeflectListener NDL;
public interface NeedleDeflectListener { 
    /**Called when needle value or angle is changed*/
    public void onDeflect(float angle,float value);

    }

/**Register a callback to be invoked when the needle value/angle is changed.*/
public void setOnNeedleDeflectListener(NeedleDeflectListener eventListener) {
    NDL=eventListener;
    }

private AbsoluteLayout guageBack;
private LinearLayout gaugeNeedle;

/**Custom view used for creating analog gauges like speedometer*/
public GaugeView(Context context, AttributeSet attrs) {
    super(context, attrs);
    if(!isInEditMode()){
        LayoutInflater layoutInflater = (LayoutInflater)context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layoutInflater.inflate(R.layout.gauge_layout,this);
        initView(); 
    }

}

private void initView() // Initializes the view
 {
    this.gaugeBackground=R.drawable.gauge_gradient;
    this.needleBackground=R.drawable.needle_gradient;
    this.gaugeDiameter=0;
    this.needleWidth=0;
    this.needleHeight=0;
    this.needleX=0;
    this.needleY=0;
    this.needleDeltaX=0;
    this.needleDeltaY=0;
    this.currentValue=0;
    this.minValue=0;
    this.maxValue=100;
    this.currentAngle=0;
    this.minAngle=0;
    this.maxAngle=360;
    this.deflectTime=0;
    this.releaseTime=0;
    this.pivotX=0;
    this.pivotY=0;
    this.previousAngle=0;
    this.deltaXAxis=0;
    this.deltaYAxis=0;
    this.currentDegrees=0;
    this.animateDeflect=true;
    this.gaugeNeedle=(LinearLayout)findViewById(R.id.gaugeNeedleLay);
    this.guageBack=(AbsoluteLayout) findViewById(R.id.gaugeFrame);
    this.guageBack.setBackgroundResource(gaugeBackground);
    this.gaugeNeedle.setBackgroundResource(needleBackground);
    this.gaugeNeedle.bringToFront();
 }

/**Sets a background resource for the gauge*/
public void setGaugeBackgroundResource(int resID)
 {
    gaugeBackground=resID;
    guageBack.setBackgroundResource(0);
    guageBack.setBackgroundResource(gaugeBackground);
    guageBack.refreshDrawableState();
 }

/**Sets the Diameter of the gauge*/
public void setDiameter(int diameter)
 {
     gaugeDiameter=diameter;
     guageBack.setLayoutParams(new android.widget.LinearLayout.LayoutParams(gaugeDiameter,gaugeDiameter));  
 }

/**Sets a background resource for the needle*/
public void setNeedleBackgroundResource(int resID)
{
    needleBackground=resID;
    gaugeNeedle.setBackgroundResource(needleBackground);
}

/**Creates a needle at the centre of the gauge.
<br> <b>deltaX</b>: Adjusts needle's X position from the centre of gauge
<br> <b>deltaY</b>: Adjusts needle's Y position from the centre of gauge*/
public void createNeedle(int width,int height,int deltaX,int deltaY)
{
    this.needleWidth=width;
    this.needleHeight=height;
    this.needleDeltaX=deltaX;
    this.needleDeltaY=deltaY;

    this.needleX=guageBack.getLeft()+(gaugeDiameter/2)+needleDeltaX-needleWidth/2;
    this.needleY=guageBack.getTop()+(gaugeDiameter/2)+needleDeltaY;

    this.pivotX=needleWidth/2;
    this.pivotY=Math.abs(needleDeltaY);

    AbsoluteLayout.LayoutParams params = new AbsoluteLayout.LayoutParams(this.needleWidth,this.needleHeight,this.needleX,this.needleY);
    gaugeNeedle.setLayoutParams(params);
}

/**Sets a reference background for the gauge*/
public void setReferenceBackground()
{
    guageBack.setBackgroundResource(R.drawable.degrees);
}

/**Removes the reference background of the gauge*/
public void removeReferenceBackground()
{
    guageBack.setBackgroundResource(this.gaugeBackground);
}

/**Sets the current needle value*/
public void setCurrentValue(float value)
{

    if(value>maxValue)
        this.currentValue=maxValue;
    else if(value<minValue)
        this.currentValue=minValue;
    else
        this.currentValue=value;

    this.currentAngle=(((this.currentValue-this.minValue)*(this.maxAngle-this.minAngle))
                                            /(this.maxValue-this.minValue))+this.minAngle;
    setCurrentAngle(this.currentAngle);

}

/**Sets the needle value range*/
public void setValueRange(float min_Value,float max_Value)
{
    this.minValue=min_Value;
    this.maxValue=max_Value;

}

/**Sets the needle angle range (0-360)*/
public void setAngleRange(float min_Angle,float max_Angle)
{
    if(min_Angle<0)
        min_Angle=0;
    if(max_Angle>360)
        max_Angle=360;
    this.minAngle=min_Angle;
    this.maxAngle=max_Angle;
}

/**Sets the current needle angle*/
public void setCurrentAngle(float angle)
{
    if(angle>maxAngle)
        this.currentAngle=maxAngle;
    else if(angle<minAngle)
        this.currentAngle=minAngle;
    else
        this.currentAngle=angle;

    RotateAnimation needleDeflection=new RotateAnimation(this.previousAngle, this.currentAngle,this.pivotX,this.pivotY){
         protected void applyTransformation(float interpolatedTime,Transformation t) {
             currentDegrees=previousAngle+(currentAngle-previousAngle)*interpolatedTime;
             currentValue=(((currentDegrees-minAngle)*(maxValue-minValue))/(maxAngle-minAngle))+minValue;
             if(NDL!=null) 
                 NDL.onDeflect(currentDegrees,currentValue);
             super.applyTransformation(interpolatedTime, t);
         }

    };

    needleDeflection.setAnimationListener(new AnimationListener() {@Override
        public void onAnimationStart(Animation arg0) {}@Override
        public void onAnimationRepeat(Animation arg0) {}@Override
        public void onAnimationEnd(Animation arg0) {previousAngle=currentAngle;}});

    if(currentAngle>this.previousAngle)
        needleDeflection.setDuration(this.deflectTime); 
    else
        needleDeflection.setDuration(this.releaseTime);

    if(!animateDeflect)
        needleDeflection.setDuration(0);

    needleDeflection.setFillAfter(true);
    this.gaugeNeedle.startAnimation(needleDeflection);
    this.gaugeNeedle.refreshDrawableState();
}

/**Sets the needle's animation time
<br> <b>deflectTime</b>: Time taken by the needle to deflect to a higher value/angle
<br> <b>releaseTime</b>: Time taken by the needle to deflect to a lower value/angle*/
public void setAnimationTime(int deflectTime,int releaseTime)
{
    this.releaseTime=releaseTime;
    this.deflectTime=deflectTime;
}

/**Sets the axis of needle rotation with respect to the centre of gauge*/
public void setDeltaAxis(int deltaX,int deltaY)
{
    this.deltaXAxis=deltaX;
    this.deltaYAxis=deltaY;
    this.pivotX=(needleWidth/2)+deltaXAxis;
    this.pivotY=deltaYAxis;
}

/**Returns the current needle angle*/
public float getCurrentAngle()
{
    return this.currentDegrees;
}

/**Returns the Background resource ID of the gauge*/
public int getGaugeBackgroundResource()
{
    return this.gaugeBackground;
}

/**Returns the Diameter of the gauge*/
public int getDiameter()
{
    return this.gaugeDiameter;
}

/**Returns the Background resource ID of the needle*/
public int getNeedleBackgroundResource()
{
    return this.needleBackground;
}

/**Returns the current needle value*/
public float getCurrentValue()
{
    return this.currentValue;
}

/**Returns the needle width*/
public int getNeedleWidth()
{
    return this.needleWidth;
}

/**Returns the needle height*/
public int getNeedleHeight()
{
    return this.needleHeight;
}

/**Returns the X position of needle*/
public int getNeedlePositionX()
{
    return this.needleX;
}

/**Returns the Y position of needle*/
public int getNeedlePositionY()
{
    return this.needleY;
}

/**Returns the X axis of rotation of needle*/
public int getNeedleAxisX()
{
    return this.pivotX;
}

/**Returns the X axis of rotation of needle*/
public int getNeedleAxisY()
{
    return this.pivotY;
}

/**Returns the minimum needle value*/
public float getMinValue()
{
    return this.minValue;
}

/**Returns the maximum needle value*/
public float getMaxValue()
{
    return this.maxValue;
}

/**Returns the minimum needle angle*/
public float getMinAngle()
{
    return this.minAngle;
}

/**Returns the maximum needle angle*/
public float getMaxAngle()
{
    return this.maxAngle;
}

/**Returns the needle deflect time*/
public int getDeflectTime()
{
    return this.deflectTime;
}

/**Returns the needle release time*/
public int getReleaseTime()
{
    return this.releaseTime;
}

/**Enable/disable needle animation*/
public void setNeedleAnimation(boolean EnableAnimation)
{
    this.animateDeflect=EnableAnimation;

}

/**Returns needle animation state*/
public boolean getNeedletAnimation()
{
    return this.animateDeflect;

}

} 
```

和`gauge_layout.xml`布局xml文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<AbsoluteLayout
    android:id="@+id/gaugeFrame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:scaleType="fitXY" >
    <LinearLayout
        android:id="@+id/gaugeNeedleLay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical"
        android:scaleType="fitXY" >
    </LinearLayout>
</AbsoluteLayout></LinearLayout> 
```

实现示例：

```
final GaugeView gv=(GaugeView)findViewById(R.id.gaugeView1);
gv.setBackgroundResource(R.drawable.gaugeback_image);
gv.setNeedleBackgroundResource(R.drawable.needle_image);
gv.setDiameter(460);
gv.createNeedle(50,230,0,-20);
gv.setAngleRange(45,315); 
```

**更新：**

`AbsoluteLayout`已弃用。您可以将其替换为`RelativeLayout`和一些代码更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T05:34:20.387

有很多方法可以做到这一点。一些可能对您有帮助的线程：

[Android：将imageview中的图像旋转一个角度](https://stackoverflow.com/questions/8981845/androidrotate-image-in-imageview-by-an-angle)

[安卓车速表（针规）](https://stackoverflow.com/questions/7450374/android-speedometer-needle-gauge)

[Android仪表动画问题](https://stackoverflow.com/questions/6156674/android-gauge-animation-question)

这是我发现的一个很好的教程，它使用类似的动画制作老式温度计：

[http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

# python - 使用 BeautifulSoup 填充 Django 模型

> ID：14228628
> 
> 赞同：0
> 
> 时间：2013-01-09T05:10:41.917
> 
> 标签：python, django, django-models, beautifulsoup

我正在建立一个允许用户提交链接的网站。我想使用 BeautifulSoup（或其他东西，如果它更适合该任务）从提交的 URL 中提取标题标签，并将其显示在列出用户提交的链接的页面上。

我在此页面上尝试了第二个答案：[如何使用 Python 检索网页的页面标题？](https://stackoverflow.com/questions/51233/how-can-i-retrieve-the-page-title-of-a-webpage-using-python)

它在 shell 中工作，但我不确定在哪里/如何使用 soup.title.string 来填充模型。

如果您需要我迄今为止尝试过的代码示例，请询问。我没有发布它，因为我尝试过一些不同的事情。

查看代码：

```
 def page_save(request):
  if request.method == 'POST':
    form = PageSaveForm(request.POST)
    if form.is_valid():
      # Create or get link.
      link, dummy = Link.objects.get_or_create(
        url=form.cleaned_data['url']
      )
      # Create or get bookmark.
      page, created = Page.objects.get_or_create(
        user=request.user,
        link=link
        soup=BeautifulSoup.BeautifulSoup(urllib.urlopen(link))
        title=soup.title.string 
```

显然，间距是关闭的。

如果用户可以只保存链接，然后我让模板从每个链接中提取标题并将其显示给最终用户，我会很高兴。

甚至当我粘贴 URL 时，SO 在预览中所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:12:42.827

编辑：误解了这个问题......

看看你的模型会很有帮助。创建页面的代码看起来很可疑。汤是您模型中的一个字段吗？也许这就是你想要做的？

```
page, created = Page.objects.get_or_create(
    user=request.user,
    link=link,
    title=BeautifulSoup.BeautifulSoup(urllib.urlopen(link)).title.string
  ) 
```

给你一些更大的问题。当您的用户提交恶意或无效链接时会发生什么？当 url 超时时会发生什么？在此视图之外，是否还有其他时候您可能希望从页面实例中获取链接并创建标题？

# jsf - 布局需要手动刷新。貌似不能加载外部js

> ID：14228632
> 
> 赞同：0
> 
> 时间：2013-01-09T05:11:07.703
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 JSF2 和 Primefaces3.4.2 我在 layoutComplex.xhtml 中创建了一个布局，如下所示：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
            <title>PrimeFaces - ShowCase</title>
        </f:facet>
        <h:outputScript library="js" name="jscolor.js" target="head" />
        <script type="text/javascript">  
    function handleValidateRequest(xhr, status, args) {  
        //alert("");
        //jscolor.addEvent(window, 'load', jscolor.init);
    }  
</script>
    </h:head>
    <h:body>
        <p:layout fullPage="true">
            <p:layoutUnit id="left" position="west" size="300" resizable="true"
                closable="true" collapsible="true" header="Options" minSize="200">
                <h:form>
                    <p:slideMenu style="width:235px;margin-left:-3px;margin-top:-6px;"
                        id="tree">
                        <p:submenu label="Product" icon="ui-icon-play">
                            <p:menuitem value="test color picker"
                                update=":centerContentPanel " action="#{navigationBean.doNav}"
                                oncomplete="handleValidateRequest(xhr, status, args)"
                                icon="ui-icon-arrow-4-diag">
                                <f:param name="urlParam" value="colorPicker" />
                            </p:menuitem>
                        </p:submenu>
                    </p:slideMenu>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit id="center" position="center">

                <p:panel header="Colors">
                    <h:panelGrid columns="2" cellpadding="10">
                        <h:inputText class="color">
                            <p:ajax event="change" update="osssutcolor" />
                        </h:inputText>
                        <h:outputText style="display: none" id="osssutcolor" />
                    </h:panelGrid>
                </p:panel>

                <h:form id="centerContentPanel">
                    <ui:include src="#{navigationBean.pageName}.xhtml" />
                </h:form>
            </p:layoutUnit>
        </p:layout>

    </h:body>
</f:view>
</html> 
```

是的，我可以在不刷新整个页面的情况下动态更改 centerContentPanel 的来源，而只需单击 centerContentPanel，即单击 layoutComplex.xhtml 中存在的 menuitem，然后 colorPicker 页面的内容将显示在 centerContentPanel 中。但问题是：我在 layoutComplex.xhtml 头中添加了一个 colorpicker.js 并希望它在更新 centerContent 时可以工作，但实际上，它不起作用..但是按 F5 刷新所有页面后，它可以正常工作。为什么？我怎样才能解决这个问题？以下是 colorPicker.xhtml：

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

        <h:outputScript library="js" name="jscolor.js" target="head" />
        <p:panel header="Colors">
            <h:panelGrid columns="2" cellpadding="10">
                <h:inputText class="color">
                    <p:ajax event="change" update="osssutcolor" />
                </h:inputText>
                <h:outputText style="display: none" id="osssutcolor" />
            </h:panelGrid>
        </p:panel>

</ui:composition> 
```

和 NavigationBean.java

```
package com.singtel.eshop.control;
import java.io.IOException;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;

@SessionScoped
@ManagedBean
public class NavigationBean {
    private String pageName = "blank";
    public NavigationBean() {
    }
    public void doNav() {
        String urlStr = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("urlParam");
        this.pageName = urlStr;
    }
    public String getPageName() {
        return pageName;
    }
    public void setPageName(String pageName) {
        this.pageName = pageName;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:47:55.080

You should call the jscolor.init after ajax call too. Seems like it is being called right after page load and needs to be called after your ajax call or inside your component. You can achieve this by calling jscolor.init in your colorPicker.xhtml file like this.

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

        <h:outputScript library="js" name="jscolor.js" target="head" />
<script>
            jscolor.init;
        </script>
        <p:panel header="Colors">
            <h:panelGrid columns="2" cellpadding="10">
                <h:inputText class="color">
                    <p:ajax event="change" update="osssutcolor" />
                </h:inputText>
                <h:outputText style="display: none" id="osssutcolor" />
            </h:panelGrid>
        </p:panel>

</ui:composition> 
```

# java - 为什么 instanceof 不适用于 Generic？

> ID：14228637
> 
> 赞同：22
> 
> 时间：2013-01-09T05:11:31.650
> 
> 标签：java, generics, typeerror, instanceof

> **可能重复：**
> [Java：Instanceof 和泛型](https://stackoverflow.com/questions/1570073/java-instanceof-and-generics)

我正在尝试编写一个将通用列表转换为特定类型列表的函数。找到下面的代码

```
public <T>List<T> castCollection(List srcList, Class<T> clas){
    List<T> list =new ArrayList<T>();
    for (Object obj : srcList) {
       if(obj instanceof T){
            ...
       }
    }
    return list;
} 
```

但`obj instanceof T`显示编译错误 -

> 无法对类型参数 T 执行 instanceof 检查。请改用其擦除 Object >，因为更多的泛型类型信息将在运行时被擦除。

任何澄清或方法来获得预期的结果？

提前致谢。:)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-09T05:14:57.167

你不能这样做。幸运的是，你已经有一个`Class<T>`论点，所以改为

```
myClass.isAssignableFrom(obj.getClass()) 
```

如果`obj`是类`myClass`或子类，这将返回 true。

正如@ILMTitan 指出的那样（谢谢），您需要检查`obj == null`以避免潜在的 NullPointerException，或者`myClass.isInstance(obj)`改用它。要么做你需要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T05:15:52.103

简短的回答：因为 Java 中的类型参数只是被编译器用来授予类型安全性的东西。

在运行时，有关泛型类型的类型信息会因为类型擦除而被丢弃，但这`instanceof`是需要具体类型（不是类型变量）才能工作的运行时检查。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T05:13:52.600

`T`是参数化类型，存在用于编译目的。由于类型擦除，它在运行时不存在。

因此，`obj instanceof T`是不合法的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T05:14:38.743

因为 java 使用擦除，所以不能使用泛型类型进行检查。

要获得所需的结果，请使用`Class.isInstance()`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T05:13:38.100

泛型类型将在编译后被[擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)（泛型用于编译时类型安全），并在编译后替换为最适用的类型。

如果要编译，请将 T 替换为具体类型，例如

```
obj instance String 
```

# perl - 如何在 Perl 中获取 POSIX 组成员的列表

> ID：14228638
> 
> 赞同：1
> 
> 时间：2013-01-09T05:11:36.557
> 
> 标签：perl, posix

`POSIX`有没有办法在 Perl中获取一个组的所有成员的列表？

我不能使用[`getgrent()`](http://perldoc.perl.org/5.14.2/functions/getgrent.html)和类似的，因为它将列表作为空格分隔的字符串返回，并且某些用户名中可以有空格。

我必须处理用户名和组名中的空格，因为我在 AD 环境中工作，其他组织可以在其中创建用户和组，所以我试图考虑可能的边缘情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:42:43.940

我会说只是使用`getgrent()`，不要担心空间。

可以通过手动编辑创建一个包含一个或多个空格的用户名`/etc/passwd`，但它也会导致其他问题。例如，`~foo`is`foo`的主目录，但`~foo bar`is not`foo bar`的主目录。

在 Linux 上，`useradd`and`adduser`命令甚至不允许文件名中有空格。在 Linux Mint 14（基于 Ubuntu 12.10）上：

```
$ sudo adduser 'foo bar'
adduser: To avoid problems, the username should consist only of
letters, digits, underscores, periods, at signs and dashes, and not start with
a dash (as defined by IEEE Std 1003.1-2001). For compatibility with Samba
machine accounts $ is also supported at the end of the username
$ sudo useradd !$
sudo useradd 'foo bar'
useradd: invalid user name 'foo bar'
$ 
```

你的系统上真的有带空格的用户名吗？

**更新：**我发现实际上可以使用空格创建用户名。`useradd`并且`adduser`不允许它（并且您*应该*使用其中一个命令或类似的命令来创建新帐户）。`/etc/passwd`但是如果我使用手动编辑`sudo vipw`，我可以创建一个名为 的用户`foo bar`，我可以这样做：

*   su - '富吧'
*   ssh 'foo bar@localhost'

等等，但这是一个*非常糟糕的主意*。Perl`getgr*()`无法判断一个组是否包含一个用于和的条目或`foo bar`两个条目（这是您要问的），而且我不能使用 shell 的语法来引用帐户的主目录。我可以使用其他方法来获取这两条信息，但首先避免创建这样的帐户要容易得多。`foo``bar``~name`

*如果*您非常担心某些管理员愚蠢地创建了这样的帐户，那么您可以使用一些已经讨论过的替代方法。但正如我所说，我认为这不值得付出努力。

（Perl 可以通过用字符而不是空格分隔列表来避免这个问题`:`，因为这些实际上与系统所依赖的`/etc/passwd`and的格式不兼容`/etc/group`。但现在改变它为时已晚。）

**更新 2：**

正如您在评论中所说（我已将其编辑到您的问题中）：

> 我必须处理用户名和组名中的空格，因为我在 AD 环境中工作，其他组织可以在其中创建用户和组，所以我试图考虑可能的边缘情况。

您来自同一评论的解决方案：

```
map((getgrgrid($_))[0], split(/ /, `id -G $username`)) 
```

可能是最好的解决方法。（`id -G`打印数字组 ID；显然不能包含空格。）

可能还值得检查您是否真的有用户名或组名，其中包含空格（当然，这并不能防止将来添加此类名称）。我想知道您的 POSIX 系统实际上是如何处理这些名称的。如果它们以某种方式自动翻译它们，我不会感到惊讶。即便如此，您的`id -G`解决方案仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:02:41.810

如果我有`/etc/group`：

```
...
postgres:x:26:
fsniper:x:481:
clamupdate:x:480:
some spacey group:x:482:saml, some spacey user 
```

我可以使用以下命令查看该组的成员：

```
% getent group
...
postgres:x:26:
fsniper:x:481:
clamupdate:x:480:
some spacey group:x:482:saml,some spacey user 
```

或者，如果您知道您感兴趣的特定群体：

```
% getent group "some spacey group"
some spacey group:x:482:saml,some spacey user 
```

这些可以像这样包装在 Perl 脚本中：

```
#!/usr/bin/perl

use feature qw(say);
chomp (my $getent = `getent group "some spacey group" | sed 's/.*://'`);
my @users = split(/,/, $getent);
foreach my $i (@users) { say $i; } 
```

运行它：

```
% ./b.pl 
saml
some spacey user 
```

### 资源

*   [如何列出 Linux 组中的所有用户？](https://stackoverflow.com/questions/2835368/how-to-list-all-users-in-a-linux-group)

# python - PySide如何判断一个按钮是否被点击？

> ID：14228650
> 
> 赞同：1
> 
> 时间：2013-01-09T05:13:04.140
> 
> 标签：python, qt, pyside

我有一个带有 5 个按钮的布局，我充当“菜单”，因此您单击一个按钮会显示一个视图，单击另一个按钮会显示另一个视图。我需要找出点击了哪个按钮，以便我可以根据按下的按钮做一些事情。就像是

```
if button1_is_clicked:
    do_something()
else:
    do_something_else() 
```

解决这个问题的最佳方法是什么？这是我的代码：我希望能够更改按钮的样式表，因此是活动状态和非活动状态

```
from PySide import QtCore
from PySide import QtGui
import VulcanGui

#--------------------------------------------------------------------------
class Program(QtGui.QMainWindow, VulcanGui.Ui_MainWindow):
    def __init__(self, parent=None):
        """ Initialize and setup the User Interface """
        super(Program, self).__init__(parent)
        self.setupUi(self)

        """ Populate the Main Area """
        self.mainArea.setHtml(self.intro_text())

        """ Button Signal/Slots """
        self.introButton.toggled.connect(self.intro_area)
        self.runVulcanButton.clicked.connect(self.vulcan_run_area)
        self.vulcanLogButton.clicked.connect(self.vulcan_log_area)
        self.hostFileButton.clicked.connect(self.edit_host_area)
        self.configEditButton.clicked.connect(self.edit_config_area)            

    def intro_text(self):
        content_file = open("../content/intro_text.html").read()
        return content_file

    '''
    Get the content to print
    '''
    def intro_area(self):
        content_file = open("../content/intro_text.html").read()
        self.mainArea.setHtml(content_file)

    '''
    Function that will display the data when the 'Run Vulcan' button is pressed
    '''
    def vulcan_run_area(self):
        self.mainArea.setPlainText("Button Two ")

    '''
    Function that will display the data when the 'Vulcan Log' button is pressed
    '''
    def vulcan_log_area(self):
        self.mainArea.setPlainText("Button Three")

    '''
    Function that will display the data when the 'Edit Host File' button is pressed
    '''
    def edit_host_area(self):
        self.mainArea.setPlainText("Button Four")

    '''
    Function that will display the data when the 'Edit Config File' button is pressed
    '''
    def edit_config_area(self):
        self.mainArea.setPlainText("Button Five")

#--------------------------------------------------------------------------

if __name__ == "__main__":

    import sys

    program = QtGui.QApplication(sys.argv)
    mWindow = Program()
    mWindow.show()
    sys.exit(program.exec_()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:14:32.613

我建议您学习 Qt 的基础知识以熟悉信号和插槽。

您需要使最初可见`QPushButton`的 s 可检查（否则“显示”按钮只会在按住按钮时出现），并将`toggled(bool)`信号连接到`setVisible(bool)`要“显示”的按钮的插槽。显然，对于最初不可见的按钮，您必须调用`setVisible(false)`实例化。

还有其他更可重用的方法来实现相同的效果——但这会让你开始。

# c# - 通过随机数设置颜色asp.net

> ID：14228651
> 
> 赞同：1
> 
> 时间：2013-01-09T05:13:09.583
> 
> 标签：c#, asp.net, html

我有一种获得随机颜色的方法：

```
 private System.Drawing.Color GetRandColor()
    {
        Random r = new Random(DateTime.Now.Millisecond);

        System.Drawing.Color[] colours = 
        {
            System.Drawing.Color.Yellow, 
            System.Drawing.Color.LightGreen, 
            System.Drawing.Color.LightCyan,
            System.Drawing.Color.LightSalmon,  
            System.Drawing.Color.LightSkyBlue
        };

        int i = r.Next(0, colours.Length - 1);

        System.Drawing.Color c = colours[i];

        return c; 
    } 
```

所以我想要做的是在页面加载时将这种随机颜色传递到我的 html 中。所以它会以某种方式放在 Page_Load 中：

```
 protected void Page_Load(object sender, EventArgs e)
    {
              // code to set button color 
    } 

<asp:Button ID="Button1" runat="server" Text="Button" BackColor=GetRandColor()/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:18:08.280

您可以在 C# 代码本身中更改按钮的背景颜色。请检查方法。

```
private void GetRandColor()
    {
        Random r = new Random(DateTime.Now.Millisecond);

        System.Drawing.Color[] colours = 
        {
            System.Drawing.Color.Yellow, 
            System.Drawing.Color.LightGreen, 
            System.Drawing.Color.LightCyan,
            System.Drawing.Color.LightSalmon,  
            System.Drawing.Color.LightSkyBlue
        };

        int i = r.Next(0, colours.Length - 1);

        System.Drawing.Color c = colours[i];

        Button1.BackColor = c;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:34:39.793

你可以把你的方法当作普通的方法

```
private void GetRandColor(object sender)
{
    Random r = new Random(DateTime.Now.Millisecond);

    System.Drawing.Color[] colours = 
    {
        System.Drawing.Color.Yellow, 
        System.Drawing.Color.LightGreen, 
        System.Drawing.Color.LightCyan,
        System.Drawing.Color.LightSalmon,  
        System.Drawing.Color.LightSkyBlue
    };

    int i = r.Next(0, colours.Length - 1);

    System.Drawing.Color c = colours[i];

    Button btn = (Button)sender; 
    btn.BackColor = c;
} 
```

# android - 如何以毫秒为单位转换当前日期和时间格式（仅 10 位）？

> ID：14228657
> 
> 赞同：0
> 
> 时间：2013-01-09T05:13:54.857
> 
> 标签：android, date-format, moodle, milliseconds, android-date

我已将日期格式`milliseconds`和时间格式转换为`milliseconds`. 我得到的当前时间超过`13` `digits`. `CurrentTime= 1357755780000`, `StartingTime=1357602840`,`EndingTime=1357756140`

但是当我在下面的代码中进行比较时，`if`部分没有被执行，只有`else`部分被执行。

我的代码有什么错误吗？我想将 currentTime 设为 10 位数字。所以我认为，将日期格式转换为毫秒是错误的。

```
 String toParse = getDateorTime(1) + " " + getDateorTime(2);
 long currentTime=0,startingTime=0,endingTime=0,milliseconds=0;
 try 
 {
    dateFormater = new SimpleDateFormat("yyyy/MMM/dd hh:mm"); 
    Date date = null;
    try {
       date = dateFormater.parse(toParse);
       date.setTime(milliseconds);
    }catch (Exception e) {
       System.out.println("\n Error in date parsing"+e.toString());
    }
    currentTime = (date.getTime());
    start=Long.parseLong((cursor.getString(5).trim()));
    end=Long.parseLong((cursor.getString(6).trim()));
 }catch (ParseException pe) {
    pe.printStackTrace();
 }

 if((currentTime>=startingTime)&&(currentTime<=endingTime))
 {
   //
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:20:12.547

根据您的示例，您实际上拥有`startingTime`和`endingTime`在 SECONDS 中，而您将其与`currentTime`MILLISECONDS 进行比较。只需将第二次乘以 1,000，如下所示：

```
if((currentTime>=startingTime*1000L)&&(currentTime<=endingTime*1000L)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:21:07.417

只需除以`1000`

```
Calendar cal = Calendar.getInstance();

System.out.println(cal.getTimeInMillis()/1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:33:51.413

将 long 值转换为字符串，如果长度>10，只需将值 (0,10) 子字符串化，然后您也可以使用 string .equals 或将它们转换回 long 进行比较。

# python - 在 python 中添加新的 XML 节点和漂亮的打印 XML

> ID：14228659
> 
> 赞同：1
> 
> 时间：2013-01-09T05:14:03.500
> 
> 标签：python, xml, elementtree

我可以使用 ElementTree 添加 XML 节点，但是当我以文本格式打开 xml 文件时，这会在一行中返回输出，而不是树结构。我也尝试使用 minidom.toprettyxml 但我不知道如何将输出添加到原始 XML。由于我希望脚本在其他环境中可重现，因此我不喜欢使用 lxml 等外部库。有人可以帮助我如何漂亮地打印输出吗？- 蟒蛇2.7

示例 XML。这就是它在文本格式和资源管理器中的外观。

```
<?xml version="1.0" encoding="utf-8"?>
<default_locators >
  <locator_ref>
    <name>cherry</name>
    <display_name>cherrycherry</display_name>
    <workspace_properties>
      <factory_progid>Workspace</factory_progid>
      <path>InstallDir</path>
    </workspace_properties>
  </locator_ref>
</default_locators> 
```

文本格式和资源管理器的预期输出。

```
<?xml version="1.0" encoding="utf-8"?>
<default_locators >
  <locator_ref>
    <name>cherry</name>
    <display_name>cherrycherry</display_name>
    <workspace_properties>
      <factory_progid>Workspace</factory_progid>
      <path>InstallDir</path>
    </workspace_properties>
  </locator_ref>
  <locator_ref>
    <name>berry</name>
    <display_name>berryberry</display_name>
    <workspace_properties>
      <factory_progid>Workspace</factory_progid>
      <path>C:\temp\temp</path>
    </workspace_properties>
  </locator_ref>
</default_locators> 
```

我的剧本

```
#coding: cp932

import xml.etree.ElementTree as ET

tree = ET.parse(r"C:\DefaultLocators.xml")
root = tree.getroot()

locator_ref = ET.SubElement(root, "locator_ref")
name = ET.SubElement(locator_ref, "name")
name.text = " berry"
display_name = ET.SubElement(locator_ref, "display_name")
display_name.text = "berryberry"
workspace_properties = ET.SubElement(locator_ref, "workspace_properties")
factory_progid = ET.SubElement(workspace_properties,"factory_progid")
factory_progid.text = "Workspace"
path = ET.SubElement(workspace_properties, "path")
path.text = r"c:\temp\temp"

tree.write(r"C:\DefaultLocators.xml", encoding='utf-8') 
```

返回的输出。运行我的脚本后，新节点被添加到我的 sample.xml 文件中，但它在一行中返回输出，所有换行符和缩进都从原始 sample.xml 文件中删除。至少当我以文本格式打开 sample.xml 文件时它是这样的。但是，当我在资源管理器中打开 sample.xml 文件时，它看起来很好。我仍然像以前一样看到换行符和缩进。即使在运行脚本后，如何将原始树结构保持为文本格式？

```
<default_locators>
  <locator_ref>
    <name>cherry</name>
    <display_name>cherrycherry</display_name>
    <workspace_properties>
      <factory_progid>Workspace</factory_progid>
      <path>InstallDir</path>
    </workspace_properties>
  </locator_ref>
<locator_ref><name> berry</name><display_name>berryberry</display_name><workspace_properties><factory_progid>Workspace</factory_progid><path>c:\temp\temp</path></workspace_properties></locator_ref></default_locators> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-10T07:19:32.773

在处理元素时，你可以这样做： `element.tail = '\n'` 然后，它将被写成单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:18:40.410

将您的 xml 在 elementTree 中写为：

```
import xml.etree.ElementTree as ET

def serialize_xml(write, elem, encoding, qnames, namespaces):
    tag = elem.tag
    text = elem.text
    if tag is ET.Comment:
        write("<!--%s-->" % _encode(text, encoding))
    elif tag is ET.ProcessingInstruction:
        write("<?%s?>" % _encode(text, encoding))
    else:
        tag = qnames[tag]
        if tag is None:
            if text:
                write(_escape_cdata(text, encoding))
            for e in elem:
                serialize_xml(write, e, encoding, qnames, None)
        else:
            write("\n<" + tag) ## '\n' added by namit
            items = elem.items()
            if items or namespaces:
                if namespaces:
                    for v, k in sorted(namespaces.items(),
                                       key=lambda x: x[1]):  # sort on prefix
                        if k:
                            k = ":" + k
                        write(" xmlns%s=\"%s\"" % (
                            k.encode(encoding),
                            _escape_attrib(v, encoding)
                            ))
                for k, v in sorted(items):  # lexical order
                    if isinstance(k, QName):
                        k = k.text
                    if isinstance(v, QName):
                        v = qnames[v.text]
                    else:
                        v = _escape_attrib(v, encoding)
                    write(" %s=\"%s\"" % (qnames[k], v))
            if text or len(elem):
                write(">")
                if text:
                    write(ET._escape_cdata(text, encoding))
                for e in elem:
                    serialize_xml(write, e, encoding, qnames, None)
                write("</" + tag + ">")
            else:
                write(" />")
    if elem.tail:
        write(ET._escape_cdata(elem.tail, encoding))

ET._serialize_xml=serialize_xml

tree = ET.parse(r"samplexml.xml")
root = tree.getroot()

locator_ref = ET.SubElement(root, "locator_ref")
name = ET.SubElement(locator_ref, "name")
name.text = " berry"
display_name = ET.SubElement(locator_ref, "display_name")
display_name.text = "berryberry"
workspace_properties = ET.SubElement(locator_ref, "workspace_properties")
factory_progid = ET.SubElement(workspace_properties,"factory_progid")
factory_progid.text = "WorkspaceFactory"
path = ET.SubElement(workspace_properties, "path")

ins_out=open("samplexml_1.xml",'wb',1000)
ET.ElementTree(locator_ref).write(ins_out,encoding="ASCII")
ins_out.close() 
```

这将在单行中写入完整的文件；没有在 xml 尾部添加空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:31:00.363

我认为您必须尝试[lxml 库](http://lxml.de/tutorial.html)。这是在 Python 中解析 XML 的最佳方式。对于这些事情，它有神奇的参数 *pretty_print*。这是一个例子：

```
import lxml.etree as etree

root = etree.Element("root")
for rn in range(10):
    etree.SubElement(root, "column_%s" % str(rn)).text = str(rn*rn)
pretty_data = etree.tostring(root, pretty_print=True, encoding = 'utf-8')
print final_data 
```

结果： http: [//pastebin.com/y0rkQ78G](http://pastebin.com/y0rkQ78G)

# python - 单线程 C 程序中 Py_Finalize (python 2.5) 的段错误

> ID：14228662
> 
> 赞同：2
> 
> 时间：2013-01-09T05:14:10.803
> 
> 标签：python, c, segmentation-fault, cpython

在下面这个 hello world C 程序中，我既扩展又嵌入了 Python。

**垃圾邮件.c**：

```
#include <Python.h>

static PyObject *
spam_echo(PyObject *self, PyObject *args) {
    const char *command;
    int sts;

    if (!PyArg_ParseTuple(args, "s", &command))
        return NULL;
    sts = printf("%s\n", command);
    return Py_BuildValue("i", sts);
}

static PyMethodDef SpamMethods[] = {
    {"echo", spam_echo, METH_VARARGS, "Prints passed argument"},
    {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC
initspam(void) {
    (void) Py_InitModule("spam", SpamMethods);
}

int main(int argc, char *argv[]) {
    PyObject *args;
    PyObject *arg;
    PyObject *result;
    PyObject *moduleName;
    PyObject *module;
    PyObject *func;

    Py_SetProgramName(argv[0]);
    Py_Initialize();
    initspam();

    PyRun_SimpleFile(fopen("foo.py", "r"), "foo.py");

    moduleName = PyString_FromString("__main__");
    module = PyImport_Import(moduleName);
    Py_DECREF(moduleName);
    if (!module) {
        return 1;
    }

    func = PyObject_GetAttrString(module, "foo");
    Py_DECREF(module);
    if (!func || !PyCallable_Check(func)) {
        return 1;
    }

    args = PyTuple_New(1);
    arg = Py_BuildValue("s", "hello world");
    PyTuple_SetItem(args, 0, arg);

    result = PyObject_CallObject(func, args);
    Py_DECREF(arg);
    Py_DECREF(args);
    Py_DECREF(func);

    printf("== before\n");
    Py_Finalize();
    printf("== after\n");
} 
```

这是调用的 Python 程序：

**foo.py**：

```
#!/usr/bin/python

import spam

def foo(cmd):
    spam.echo(cmd) 
```

我编译

```
gcc spam.c -I/usr/include/python2.5/ -lpython2.5 
```

使用 GCC 4.2.4-1ubuntu4，我在 Ubuntu Hardy 上使用 python2.5-dev 包。

基本上，我在 Py_Finalize 有一个段错误，如输出所示：

```
hello world
== before
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:52:26.303

交换线路`Py_DECREF(args);`并`Py_DECREF(arg);`解决问题。段错误是在它已经被释放之后访问的结果`arg`。`Py_DECREF(args)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-25T15:33:23.070

也许换行修复了 Python2 的问题，但它不应该，而且对于 Python 3 肯定不会。再看一下代码片段：

```
args = PyTuple_New(1);
arg = Py_BuildValue("s", "hello world");
PyTuple_SetItem(args, 0, arg); 
```

`PyTuple_New`创建一个新对象，`Py_BuildValue`. 如果你停在那里，是的，你应该 DECREF 两者。

但是，`PyTuple_SetItem(args, 0, arg)`窃取了`arg`. 这意味着`arg`现在由 tuple “拥有” `args`。您不再对此负责`arg`，因此**不应**DECREF 它。

当`args`是 DECREF 时，它将 DECREF 它的每个项目，这将照顾`arg`. （使用`Py_REFCNT()`）进行验证，如果您愿意。

这意味着，例如，如果您想放入`arg`两个列表，则需要 INCREF 一次：

```
args1 = PyTuple_New(1);
args2 = PyTyple_New(1);
arg = Py_BuildValue("s", "hello world");
PyTuple_SetItem(args1, 0, arg);
PyTyple_SetItem(args2, 0, arg);
Py_INCREF(arg); 
```

所以当`args1`被移除时，它可以 DECREF arg 一次，而不会导致 args2 出现问题。

请注意，您可以在创建后的任何位置 INCREF(arg) ，即使在 SetItem 之后 - 它仍在范围内。

# jmeter - Jmeter-访问日志采样器：将原始日志的负载增加多达 5 倍

> ID：14228666
> 
> 赞同：1
> 
> 时间：2013-01-09T05:14:31.927
> 
> 标签：jmeter, load-testing, performance-testing, access-log

出于开发目的，我是我的应用程序的唯一用户。所以我通常使用我的应用程序一个小时，然后通过 tomcat 获取它的访问日志。现在我根据[本教程](http://jakarta.apache.org/jmeter/usermanual/jmeter_accesslog_sampler_step_by_step.pdf "访问日志采样器教程")使用 Jmeter 来测试这些日志。

当我在 Thread Group 中定义 Number of Threads=1 时，Jmeter 仅处理来自日志的 Ist 请求。当我在 Thread Group 中定义 Number of Threads=2 时，Jmeter 仅处理来自日志的 Ist 2 请求。当我在 Thread Group 中定义 Number of Threads=3 时，Jmeter 仅处理来自日志的 Ist 3 请求。... ... 等等。

我的动机是将实际负载的负载加倍（2x）或三倍（3x）或nx并对其进行测试。我如何定义我的测试计划才能做到这一点。

我需要为一个用户做的事情（我猜是线程），Jmeter 一次处理所有日志。对于 n 个用户 Jmeter，创建 n 个线程，这些线程同时单独处理整个日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:24:49.470

检查迭代次数值，使其成为足够的值并添加 Cookie 管理器。

但是访问日志采样器并不是负载测试应用程序的最佳方式。

为什么不使用 jmeter 代理：

*   jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf

# air - 参考错误找不到变量 TinyMCE

> ID：14228673
> 
> 赞同：1
> 
> 时间：2013-01-09T05:14:49.030
> 
> 标签：air, tinymce, src, referenceerror

我正在尝试从本地主机运行我的 tinyMCE.js

```
<script type="text/javascript" src="http://localhost/tinymce/jscripts/tiny_mce/tiny_mce.js"></script> 
```

我收到错误 ReferenceError: Can't find variable: tinyMCE

当我尝试运行 tinyMCE.js 从

```
<script type="text/javascript" src="tiny_mce/tiny_mce.js"></script>
where tiny_mce is my root folder that contain tiny_mce.js 
```

我不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-04T15:40:33.027

如果您使用的是 npm，请尝试`npm install tinymce`

# erlang - 用erlang转换数据

> ID：14228679
> 
> 赞同：-2
> 
> 时间：2013-01-09T05:15:16.670
> 
> 标签：erlang

我现在的问题是：

我有变量 M，其中包含：37.5（如您所见是整数）

我想将 M 转换为字符串“37.5”

所以 37.5 应该变成“37.5”

我尝试使用功能：

```
 M2=integer_to_list(M) 
```

但是当我执行这个函数时，它会显示这个错误：

```
** exception error: bad argument
     in function  integer_to_list/1
        called as integer_to_list(37.5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:43:56.243

@chops 有一个很好的答案，IMO（使用 mochinum:digits/1），但你也可能从 io_lib 模块中得到一些东西。例如：

```
8> io_lib:format("~.2f",[37.5]).
 ["37.50"]

9> io_lib:format("~.1f",[37.5]).
 ["37.5"] 
```

我意识到这可能不是您正在寻找的东西，在这种情况下，我认为查看/使用 mochinum 模块是一种有效的方法，但 io_lib 经常被忽视，并提供了一组非常有用的格式化列表/字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:53:41.063

integer_to_list 在这种情况下不起作用，因为 37.5 是浮点数而不是整数。Erlang 确实有 float_to_list，但输出通常非常不可用。

相反，我建议查看 mochiweb 项目，以便将浮点数转换为列表。特别是[mochinum](https://github.com/basho/mochiweb/blob/master/src/mochinum.erl)模块：

```
> M = 37.5,
> mochinum:digits(M).
"37.5" 
```

# javascript - 如何在three.js中检测粒子系统中的粒子悬停？

> ID：14228684
> 
> 赞同：3
> 
> 时间：2013-01-09T05:15:35.760
> 
> 标签：javascript, canvas, 3d, three.js

我试图检测鼠标何时悬停在我的粒子系统中的粒子上。我正在做的检测是这样的，并且在每一帧上运行：

```
function check_intersections() {
    var vect = new THREE.Vector3(
         mouse.x,
         mouse.y,
        0.5
    );
    projectr.unprojectVector( vect, camera );

     var raycaster = new THREE.Ray( camera.position, vect.subSelf( camera.position ).normalize() );
     var intersects = raycaster.intersectObjects( particleSystem ); 

    if ( intersects.length > 0 ) {

        //intersects[ 0 ].object.materials[ 0 ].color.setHex( Math.random() * 0xffffff );
        noticeDiv.text('Intersection');

    }
}` 
```

varparticleSystem 是我的粒子系统，其中包含数千个粒子，鼠标在移动时定义为：

```
function onDocumentMouseMove( event ) {  
    // update the mouse variable
    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
    mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
} 
```

我看过几个例子，但似乎无法正确理解这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:51:15.643

`Raycaster.intersectObjects( objects )`适用于 s 的数组`THREE.Particle`，但不适用于 a `particleSystem`。

有关它在 中的使用示例`CanvasRenderer`，请参见此[示例](http://mrdoob.github.com/three.js/examples/canvas_interactive_particles.html)。

`WebGLRenderer`不支持`THREE.Particle。

另外，请看一下，`Raycaster.js`以便您了解它是如何工作的。

三.js r.54

# jquery - 如何在 jquery html 方法中重新定位元素？

> ID：14228687
> 
> 赞同：-2
> 
> 时间：2013-01-09T05:15:53.513
> 
> 标签：jquery

例如，我在下面有以下 jquery 代码：

```
$("#AddToList").html(<p>Testing Internals</p>); 
```

如何`html(<p>Testing Internals</p>)`使用以下属性和值重新定位上面的元素：

```
margin-left = 20px 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:18:33.820

只需使用一点内联 CSS 魔法！[演示](http://jsfiddle.net/yAhjZ/)

```
$('p').html('<p style="padding: 10px;">bar</p>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:21:34.127

CSS

```
#AddToList p {
margin-left : 20px;
} 
```

排队

```
html(<p style="margin-left:20px;">Testing Internals</p>); 
```

# iphone - 如何在 UILabel 中添加 UILabel？

> ID：14228688
> 
> 赞同：0
> 
> 时间：2013-01-09T05:15:54.530
> 
> 标签：iphone, ios, cocoa-touch, uilabel

这个问题看起来很常见..但我昨天遇到了一个问题，我在 xib 中添加了一个标签并为其创建了出口，我想在该标签内有多行、按钮，所以我决定在其中添加新的子标签...

```
UILabel *label;
label = [[UILabel alloc] initWithFrame:initial_rect];
label.font = [UIFont systemFontOfSize:[UIFont smallSystemFontSize]];
label.text = sel_obj->start_time;
label.backgroundColor = [UIColor whiteColor];
[xib_label addSubview:label] 
```

当我这样尝试时，它不起作用，然后我在 self.view 添加了相同的标签，它工作正常。所以当我想在使用 xib 添加的标签中添加标签时，我需要做什么。我在这里有什么遗漏吗……谢谢……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:22:27.673

我很久以前就遇到过这种情况。

仅供参考：

我认为问题在于`initial_rect`，它在视图的框架中但在 xib_label 的框架之外。label 的 frame 是相对于 xib_label，而不是 self.view。

你可以试试这个：

```
UILabel *label;
CGRect rect = (CGRect){0, 0, 10, 10};
label = [[UILabel alloc] initWithFrame:rect];
label.font = [UIFont systemFontOfSize:[UIFont smallSystemFontSize]];
label.text = sel_obj->start_time;
label.backgroundColor = [UIColor redColor];
[xib_label addSubview:label]; 
```

将 backgroundColor 更改为红色以清楚地看到标签。

如果你想在一个标签中显示多行，你可以 : `label.numberOfLines = 0;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:10:03.977

您也可以在上述评论之后尝试将子视图放在前面`[xib_lable bringSubViewToFront:label];`

# mysql - 在同一个 sql 语句中使用 mysql 别名

> ID：14228690
> 
> 赞同：0
> 
> 时间：2013-01-09T05:16:11.140
> 
> 标签：mysql, sql, select, subquery

如何在同一语句中使用别名？请参阅`body`下面语句中的别名。当我在 sum(length(body) 中使用它时，我得到`unknown column`.

```
SELECT substring_index(userBody, ' ', 60) as body, SUM(LENGTH(body)-LENGTH(REPLACE(body,' ',''))+1) as wordCount 
from articles where artcId = 10; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:22:04.000

您不能`body`在下一个选择列中使用别名，最好在以下部分中使用相同的“别名”块。有关更多说明，请参阅以下查询。

```
SELECT 
  substring_index(userBody, ' ', 60) AS body,
  SUM(
    LENGTH(substring_index(userBody, ' ', 60)) - LENGTH(REPLACE(substring_index(userBody, ' ', 60),' ',''))+1
  ) AS wordCount
FROM articles
WHERE artcId = 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:32:40.900

您不能使用别名列名来提取另一列的数据。

您可以使用**子查询**或对另一列**使用相同的函数**，如下所述：

**使用子查询**

```
SELECT body, SUM(LENGTH(body)-LENGTH(REPLACE(body,' ',''))+1) AS wordCount 
FROM (SELECT SUBSTRING_INDEX(userBody, ' ', 60) AS body 
      FROM articles WHERE artcId = 10) AS A 
```

**或使用相同的功能**

```
SELECT SUBSTRING_INDEX(userBody, ' ', 60) AS body, 
       SUM(LENGTH(SUBSTRING_INDEX(userBody, ' ', 60))-LENGTH(REPLACE(SUBSTRING_INDEX(userBody, ' ', 60),' ',''))+1) AS wordCount 
FROM articles WHERE artcId = 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:32:54.610

你不能。或者，您可以使用子查询，例如。

```
SELECT  body,
        SUM(LENGTH(body)-LENGTH(REPLACE(body,' ',''))+1) as wordCount 
FROM
    (
        SELECT substring_index(userBody, ' ', 60) as body
        from articles 
        where artcId = 10
    ) s 
```

# spring - BeanCreationException：创建名为“EmpInfo”的 bean 时出错

> ID：14228693
> 
> 赞同：1
> 
> 时间：2013-01-09T05:16:48.350
> 
> 标签：spring, cxf

```
[HTTP:101216]Servlet: "cxf" failed to preload on startup in Web application: "TestSpring-0.0.1-SNAPSHOT.war". org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'EmpInfo': Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service. at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1403) at 
```

我的 cxf.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '
   xmlns:jaxws="http://cxf.apache.org/jaxws"
   xsi:schemaLocation="http://www.springframework.org/schema/beans  
   http://www.springframework.org/schema/beans/spring-beans.xsd 
   http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
  <import resource="classpath:META-INF/cxf/cxf.xml" />
  <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/>
  <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
   <!--  <jaxws:endpoint id="EmpInfo"
          implementor="#EmpInfoImpl"
          address="/EmpInfo"/> -->

           <jaxws:endpoint id="EmpInfo"
          implementor="com.test.example.impl.EmpInfoImpl"
          address="/EmpInfo"/>
    <!--  <bean id="EmpInfoImpl" class="com.test.example.impl.EmpInfoImpl" >
     <property name="emplist" ref="EmpList" />

 </bean>

 <bean id="EmpList" class="com.test.example.impl.EmployeeList" /> -->
      </beans> 
```

* * *

```
@WebService(serviceName="EmpInfo",endpointInterface="com.test.example.EmpInfo",
portName="EmpInfoPortType", wsdlLocation="classpath:wsdl/EmpInfo.wsdl")
public class EmpInfoImpl implements EmpInfo{

private EmployeeList emplist;
public EmployeeList getEmplist() {
return emplist;
}

public void setEmplist(EmployeeList emplist) {
this.emplist = emplist;
 }

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

}

public Employee getInfo(String id) {
    // TODO Auto-generated method stub
    return new Employee("Test","Test","888");
    //return emplist.getEmp(Integer.valueOf(id));
}

     } 
```

我对 CXF 很陌生，所以任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:39:40.293

此问题已解决，我的代码中存在问题。

# ios - 如何在 MapView 注释中将右访问器的框架调整到右上角？

> ID：14228701
> 
> 赞同：1
> 
> 时间：2013-01-09T05:17:50.077
> 
> 标签：ios, xcode, map, mkmapview, mkpinannotationview

我想将正确的访问器图像（交叉图像）添加到右上角，如下图所示，但我无法获取它的代码：我正在使用以下代码，但它没有给我我需要的东西.我需要下图所示位置的十字按钮。

```
annView.leftCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeContactAdd];

       UIImage *listImage = [UIImage imageNamed:@"Close_normal.png"];
       UIButton *listButton = [UIButton buttonWithType:UIButtonTypeCustom];

       // get the image size and apply it to the button frame
      // listButton.frame = CGRectMake(0,0,56,68);

       CGRect listButtonFrame = listButton.frame;

    listButtonFrame.size = listImage.size;
       listButton.frame = listButtonFrame;

       [listButton setImage:listImage forState:UIControlStateNormal];

   annView.rightCalloutAccessoryView = listButton; 
```

![在此处输入图像描述](../Images/73bbac19b827ff90b73a6e19825f9812.png)

然后我还要做的是，当我单击十字按钮时，它应该关闭信息弹出窗口并删除注释

```
- (void) mapView:(MKMapView *)mv annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
 {
if( // left accessor is clicked then execute this code)  // what should i write here
 {
 SiteAnnotation *site = (SiteAnnotation *)view.annotation;
  if(site.category == -1) {
   if(addressAnnotation) {
       [mapView removeAnnotation:addressAnnotation];
AddViewController *vc = [[[AddViewController alloc]        initWithCoordinate:addressAnnotation.coordinate] autorelease];

   [self.delegate pushViewController:vc animated:YES];

   }
 }
        else {
             [self showSiteDetails:site.identifier];
             }
}
 else if (// if right accessor cross image is clicked)
{
  // Then here the code to dismiss the pop up and annotation pin on map

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T07:15:32.633

您可以检查此代码：

使用上述方法中的标签和控制标签来使该标签在下面工作..

```
 annView.leftCalloutAccessoryView.tag=1;
        annView.rightCalloutAccessoryView.tag=2;

- (void) mapView:(MKMapView *)mv annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    SiteAnnotation *site = (SiteAnnotation *)view.annotation;

    // Left Accessory Button Tapped

    if(site.category == -1) {

        if ([control tag] == 1) {

            if(addressAnnotation) {

so on...
} 
```

下次尝试

```
else if ([control tag] == 2) {

            // "Right Accessory Button Tapped

            UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"" message:@"Touch and hold the pin icon to drag it around." delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Done", nil];
            [alert1 show];
            [alert1 release];
        } 
```

然后在方法中

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

{

 UIAlertView *alert_pin = [[UIAlertView alloc] initWithTitle:@"" message:@"cancel button click it " delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Done", nil];

                [alert_pin show];
                [alert_pin release];

                [mapView removeAnnotation:addressAnnotation];
                [addressAnnotation release];
                addressAnnotation = nil;

            } 
```

使用警报并要求用户关闭它，而不是仅在标注上使用直接关闭按钮。

# javascript - 在 html5 网页中的电子邮件中附加文件

> ID：14228703
> 
> 赞同：5
> 
> 时间：2013-01-09T05:18:02.307
> 
> 标签：javascript, html, email

我正在使用以下代码在 html Web 应用程序中附加文件，但它不起作用

```
 <div class="email_pot">

<a href="mailto:eptt@att.com?subject=Enhanced Push-to-Talk&attachments=["js/data.js","js/data.js"]"></a>

</div> 
```

对于附加文件，我使用以下程序，如下所示

```
 {
      "toEmail": "ToAddressEmail"
      ,"toName": "ToAddressName"
      ,"subject": "SubjectLine"
      ,"body":"BodyText"
      ,"bodyHtml":"HTML Body Text"
      ,"attachments":["AttachmentPath","
      AttachmentPath"],"titleColour":"Hex Colour (i.e.FF0000)"
      } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T07:44:47.503

那么，**你的问题是什么？**我假设您在尝试发送电子邮件时遇到了一些错误。我之前回答过一个非常[相似的问题](https://stackoverflow.com/q/13683183/670377)：

根据[RFC 2368](http://www.faqs.org/rfcs/rfc2368.html) ，由于安全原因**，您不能使用 mailto: URL 方案将附件添加到邮件中：**

> 如果任何标题被认为是危险的，解释 mailto URL 的用户代理应该选择不创建消息（...）只有主题、关键字和正文标题被认为是安全和有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:13:14.737

是否可以将文件附加到电子邮件取决于邮件程序。（但许多邮件无法从 maito:protocol 添加附件文件）

我想我可能可以将附件放入某些版本的 Outlook 中。

# jquery - 如何将嵌入式 iframe 的行号传递给函数？

> ID：14228708
> 
> 赞同：0
> 
> 时间：2013-01-09T05:18:19.517
> 
> 标签：jquery, select, iframe, row, parent

我有一张桌子，每一行都有一个隐藏的 iframe。当 iframe 完成加载时，它应该调用位于父页面上的函数（这有效）。但是，当调用父函数时，我需要传递行值......但由于是 iframe 进行调用，所以我不知道如何获取行。

```
function myRowCallback(rowIndex){
    alert('row ' + rowIndex + ' is done loading');
}

<table>
   <tr>
       <td><iframe id='frame1' onload='myRowCallback($(this).closest('tr').prevAll().length)' style='display: none;'></td>
       <td><iframe id='frame2' onload='myRowCallback($(this).closest('tr').prevAll().length)' style='display: none;'></td>
       <td><iframe id='frame3' onload='myRowCallback($(this).closest('tr').prevAll().length)' style='display: none;'></td>
   </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:48:26.677

你需要这样做

```
<td>
  <iframe id='frame1' onload='parent.myRowCallback($(this).closest("tr").prevAll().length);' ></iframe>
</td> 
```

用于`parent.`调用父函数

# navigation - 编写jquery函数时？如何在函数内部添加：nth- child 到 $(this) ？

> ID：14228713
> 
> 赞同：0
> 
> 时间：2013-01-09T05:18:55.277
> 
> 标签：navigation, html-lists, siblings, jquery

我需要通过获取当前年份使其成为第一个导航元素来使用 jQuery 构建导航。然后构建其他列表项以显示随后的年份...我的问题是针对我希望能够执行的 jQuery 函数内的列表项的兄弟姐妹，以便我可以轻松地在多个页面上运行该函数...这里是我到目前为止所拥有的......如果它有助于请求它，我可以设置一个小提琴。

这是成功/工作的代码，但没有包含在 jQuery 函数中：

```
$currentYear = (new Date).getFullYear();
$navListEl = $("#yearNav li").length; // = 7
$lastYear=0;
for (var i=1;i<$navListEl+1;i++)
{  
    $("#yearNav li"+":nth-child("+i+")").append($currentYear-$lastYear);
    $lastYear++;
} 
```

第一次尝试：

```
jQuery.fn.createNav = function(){
    $currentYear = (new Date).getFullYear();
    $navListEl = $(this).length; // = 7
    alert('hey');
    $lastYear=0;
    for (var i=1;i<$navListEl+1;i++)
    {  
        $(this+":nth-child("+i+")").append($currentYear-$lastYear);
        $lastYear++;
    }
}

$("#yearNav li").createNav(); 
```

第二次尝试：（这个有点工作，但在每个 li 项目上复制了 nmbers，而不是在每个项目上复制一次）

```
jQuery.fn.createNav = function(){
    $currentYear = (new Date).getFullYear();
    $navListEl = $(this).length; // = 7
    $lastYear = 0;
    for (var i=1;i<$navListEl+1;i++)
    {  
        $(this).append($currentYear-$lastYear);
        $lastYear++;
    }
}

$("#yearNav li").siblings().createNav(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:52:51.173

作为 Musa 答案的替代方案，如果您想避免为每个元素重新运行选择器，那么您可以使用以下两种方法中的任何一种对选定元素的列表进行一次迭代：

1.  使用`eq()`for 循环中的方法按索引访问列表中的每个元素：

    ```
    jQuery.fn.createNav = function(){
        $currentYear = (new Date).getFullYear();
        $navListEl = $(this).length; // = 7
        $lastYear = 0;

        for (var i = 0; i < $navListEl; i++)
        {
            $(this).eq(i).append($currentYear - $lastYear);
            $lastYear++;
        }
    } 
    ```

2.  使用该`each()`方法依次迭代每个元素：

    ```
    jQuery.fn.createNav = function(){
        $currentYear = (new Date).getFullYear();
        $navListEl = $(this).length; // = 7
        $lastYear = 0;

        $(this).each(function(){
            $(this).append($currentYear - $lastYear);
            $lastYear++;
        });
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:31:54.090

尝试

```
$(this.selector+":nth-child("+i+")").append($currentYear-$lastYear); 
```

# google-app-engine - 将日历添加到基于谷歌应用引擎的网站

> ID：14228715
> 
> 赞同：0
> 
> 时间：2013-01-09T05:18:59.407
> 
> 标签：google-app-engine, calendar

我需要在我的基于 GAE 的网站上添加一个日历，以便用户可以选择日期和时间。它不需要是谷歌日历。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:39:54.767

我希望[这个](http://trentrichardson.com/examples/timepicker/)jquery 插件能满足你的需求。

# sql - SQL 仅对一列使用 group by 函数（但选择多于一列）

> ID：14228717
> 
> 赞同：1
> 
> 时间：2013-01-09T05:19:07.813
> 
> 标签：sql, sql-server

好的，我有以下代码

```
SELECT PO_NUMBER, MIN(PO_QUANTITY) AS PO_QUANTITY, SUM(COALESCE(SHIPPED_WT, 0)) AS SHIPPED_WT  
FROM VW_TRAFFIC_PO_SIDE
WHERE SYSDATE > PO_SHIPMENT_TO
GROUP BY PO_NUMBER
HAVING MIN(PO_QUANTITY) > SUM(COALESCE(SHIPPED_WT, 0)) 
```

这在获取正确的数据方面做了我想要的一切，但是我想要更多的列，类似于

```
SELECT PO_NUMBER, SO_ORIGIN, SO_PRODUCT, SUPPLIER, MIN(PO_QUANTITY) AS PO_QUANTITY, SUM(COALESCE(SHIPPED_WT, 0)) AS SHIPPED_WT, PO_SHIPMENT_FROM, PO_SHIPMENT_TO  
FROM VW_TRAFFIC_PO_SIDE
WHERE SYSDATE > PO_SHIPMENT_TO
GROUP BY PO_NUMBER
HAVING MIN(PO_QUANTITY) > SUM(COALESCE(SHIPPED_WT, 0)) 
```

但是我不能按其他列分组，因为它会抓取我不想要的数据。

有任何想法吗？

我意识到可以使用 Distinct，但是我希望我的数据显示的方式，它会消除我不想消除的记录

PS，我使用 SQL 服务器，我无法创建/修改表，我使用的所有数据都基于视图，我也无法更改它

**编辑：我提供了一个答案，但不优雅**

```
PO          PO Qty                  Tracking No        Shipped Qty

PO 1       100                         1                              60            
PO 1       100                         1                              60
PO 1       100                         1                              60
PO 1       100                         2                              15
PO 1       100                         2                              15

PO 2       50                          2                              20    
PO 2       50                          2                              20    
PO 2       50                          3                              30 
PO 2       50                          3                              30

IN the above scenario, totals are

                                PO 1       PO 2

PO Qty                          100         50

Shipped                         75          50          

Unshipped                       25           0         

-          In each PO record, the PO qty is stated in full on each line and therefore is repeated each time the same PO is listed as a record

-          Within a tracking no for the PO, the shipped quantity is stated in full and therefore is repeated each time the same tracking no (for the same PO #) is listed as a record

-          So a tracking number can exist on two different PO’s (as in Tracking no 2 above) in which case the value is counted once for each PO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:23:04.513

A JOIN 怎么样？

```
SELECT DISTINCT X.PO_NUMBER, X.PO_QUANTITY, X.SHIPPED_WT,
Y.SO_ORIGIN, Y.SO_PRODUCT, Y.SUPPLIER, 
Y.PO_SHIPMENT_FROM, Y.PO_SHIPMENT_TO  
FROM (
     SELECT PO_NUMBER, MIN(PO_QUANTITY) AS PO_QUANTITY, 
     SUM(COALESCE(SHIPPED_WT, 0)) AS SHIPPED_WT 
     FROM VW_TRAFFIC_PO_SIDE
     WHERE SYSDATE > PO_SHIPMENT_TO
     GROUP BY PO_NUMBER
     HAVING MIN(PO_QUANTITY) > SUM(COALESCE(SHIPPED_WT, 0))) X
     LEFT JOIN VW_TRAFFIC_PO_SIDE Y
     ON X.PO_NUMBER = Y.PO_NUMBER
     ; 
```

以下是基于旧数据的演示......它没有您需要的所有行，但它也应该通过添加其他行来工作。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/03662/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:23:26.323

请回答：当你时`GROUP BY PO_NUMBER`，一组中的所有项目都相同`SO_ORIGIN, SO_PRODUCT, SUPPLIER, PO_SHIPMENT_FROM, PO_SHIPMENT_TO`吗？如果您的回答是肯定的，那么您可以将查询更改为：

```
 GROUP BY PO_NUMBER, SO_ORIGIN, SO_PRODUCT, SUPPLIER, PO_SHIPMENT_FROM, PO_SHIPMENT_TO 
```

如果您的答案是否定的，那么您的查询在逻辑上是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:11:25.967

```
 SELECT PO_NUMBER, PO_QUANTITY, SHIPPED_WT, PO_SHIPMENT_TO, SO_ORIGIN, SO_PRODUCT, SUPPLIER, PO_QUANTITY-SHIPPED_WT UNSHIPPED 
    FROM (
    SELECT DISTINCT PO_NUMBER, PO_QUANTITY, PO_SHIPMENT_TO, SO_ORIGIN, SO_PRODUCT, SUPPLIER,  SUM(NVL(SHIPPED_WT,0)) OVER (PARTITION BY PO_NUMBER) AS SHIPPED_WT 
    FROM(
    SELECT DISTINCT PO_NUMBER,  PO_TRACKING_NO, PO_QUANTITY, SHIPPED_WT, PO_SHIPMENT_TO, SO_PRODUCT, SO_ORIGIN, SUPPLIER FROM VW_TRAFFIC_PO_SIDE)) 

WHERE PO_QUANTITY > SHIPPED_WT AND SYSDATE > PO_SHIPMENT_TO 
```

经过很多时间和辛勤工作，我的公司终于可以分配第二个人来帮助我（他比我更了解 sql）来让这件事正常工作..但是添加修饰符会很棘手而且很烦人..它有点低效

# c++ - 带有 std::malloc 的奇怪段错误

> ID：14228718
> 
> 赞同：0
> 
> 时间：2013-01-09T05:19:09.217
> 
> 标签：c++, segmentation-fault, malloc

我收到以下代码行的段错误：

```
char* addr = (char*)std::malloc(bytes); 
```

运行 GDB 时，我看到它`bytes`的值为`851984`. 据我所知，这应该没什么大不了的。在我的一生中，我看不出它有什么问题。有人有什么建议吗？

实际的段错误是：

```
Program received signal SIGSEGV, Segmentation fault. 
0x00007ffff674dd75 in malloc_consolidate (av=0x7ffff6a87720) at malloc.c:4254 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T05:26:28.667

在您的代码中较早的某个地方（很可能）存在一个问题，该问题正在破坏堆结构，导致`malloc`分配失败。你应该尝试使用像[valgrind](http://valgrind.org/)这样的内存错误检测工具来调试这个问题。

# c# - Sitecore 调试任务调度器

> ID：14228737
> 
> 赞同：1
> 
> 时间：2013-01-09T05:21:23.123
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

我将 sitecore 任务调度程序配置为自动发布站点，并且我想在本地计算机上对其进行调试。我附加到 w3wp.exe 进程，但没有命中。我应该附加什么流程？它不是在同一个线程中运行吗？我的机器上只有一个网站，没有其他应用程序池在运行...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:53:26.267

正如 patrickmjones 评论的那样，一个简单的页面就足以测试这一点。只要它位于网站文件夹下，您甚至不需要为页面设置 Sitecore 项目，它仍然具有有效的 Sitecore 上下文。

创建一个带有 runat 服务器脚本块（不需要代码隐藏）的 aspx 页面，您可以在其中创建计划任务类的实例并调用它的“运行”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:17:17.547

默认情况下，Visual Studio 无法将调试器附加到 Sitecore，`Sitecore.Tasks.PublishAgent`因为它已编译到 Sitecore 程序集中。您仍然可以使用其他软件执行此操作：

您可以使用与 Visual Studio 配合使用的反汇编程序，例如[.NET Reflector](http://www.reflector.net/) ($95) 来反编译程序集并生成必要的***.pdb**文件以对其进行调试。然后，您可以将调试器附加到`Sitecore.Tasks.PublishAgent`'s`Run()`方法以查看会发生什么。

# cassandra - 将网络驱动器表示为 Cassandra 数据目录

> ID：14228738
> 
> 赞同：0
> 
> 时间：2013-01-09T05:21:29.123
> 
> 标签：cassandra

我是卡桑德拉的新手。在 cassandra 中，为了存储内核，我们使用 Cassandra.yalm 配置文件中的属性 data_file_directories 指定安装了 cassandra 的机器的本地目录。我需要将 data_file_directories 定义为**网络目录**（类似于 192..xxx/data/files/）。我只使用单节点集群进行快速数据写入（用于记录活动）。因为我不依赖复制，所以我的复制因子是 1。任何一个帮助定义 cassandra 数据目录的网络目录....

提前谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:59:18.263

1）我已经将 cassandra 的数据存储在亚马逊 EBS 卷（网络卷）上，但在 EC2 的情况下，它很简单，因为我们可以将 EBS 卷安装在一台机器上，就好像它是本地的一样。

2) 在其他情况下，您将不得不使用 NFS 来配置网络目录。我从未这样做过，但它看起来很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:48:47.533

Cassandra 是围绕使用本地存储而不是 EBS 或其他网络安装数据而设计的。这为您提供了更好的性能、更好的可靠性和更好的成本效益。

# delphi - Delphi：使用 System.New() 代替局部变量，除了节省少量内存之外，还有哪些优点？

> ID：14228746
> 
> 赞同：10
> 
> 时间：2013-01-09T05:22:20.427
> 
> 标签：delphi, pascal, fpc

让我们回到基础。坦率地说，我以前从未使用过`New`和`Dispose`函数。然而，在我阅读了[Embarcadero Technologies](http://en.wikipedia.org/wiki/Embarcadero_Technologies)网站上[的 New() 文档和包含的示例以及](http://docwiki.embarcadero.com/Libraries/XE3/en/System.New)[Delphi Basics 对 New()](http://www.delphibasics.co.uk/RTL.asp?Name=New)的解释之后，我的脑海中留下了一些问题：

*除了节省少量*内存之外，使用`System.New()`而不是局部变量有什么好处？

 *常见的代码示例`New()`或多或少如下：

```
 var
      pCustRec : ^TCustomer;
  begin
      New(pCustRec);
      pCustRec^.Name := 'Her indoors';
      pCustRec^.Age  := 55;
      Dispose(pCustRec);
  end; 
```

在什么情况下上面的代码比下面的代码更合适？

```
 var
      CustRec : TCustomer;
  begin
      CustRec.Name := 'Her indoors';
      CustRec.Age  := 55;
  end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T08:08:40.333

如果您可以使用局部变量，请这样做。这是一个几乎没有例外的规则。这会产生最干净和最有效的代码。

如果需要在堆上分配，请使用动态数组、GetMem 或 New。分配记录时使用新建。

无法使用堆栈的示例包括在编译时大小未知的结构或非常大的结构。但是对于作为 New 主要用例的记录，这些问题很少适用。

因此，如果您面临选择堆栈还是堆作为记录，那么堆栈总是正确的选择。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T07:31:58.323

从另一个角度来看：

两者都可能遭受[缓冲区溢出并且可以被利用](http://en.wikipedia.org/wiki/Buffer_overflow#Exploitation)。

如果局部变量溢出，你会得到[stack corruption](http://en.wikipedia.org/wiki/Stack_buffer_overflow#Exploiting_stack_buffer_overflows)。

如果堆变量溢出，你会得到[堆损坏](http://en.wikipedia.org/wiki/Heap_overflow)。

有人说堆栈损坏比堆损坏更容易利用，但[通常情况并非如此](https://docs.google.com/viewer?a=v&q=cache%3aztjUpBXPKk8J%3awww.blackhat.com/presentations/win-usa-04/bh-win-04-litchfield/bh-win-04-litchfield.ppt%20&hl=en&pid=bl&srcid=ADGEESj6693FUu5llQjbPOn7TZvxJ-ZZffksnZ4rsPv9Kd2aizvLevK6CqhkK_g2eMUoODhffHLOrEB-lJrLn6kITlC4Ytm7RQ0jqRM1EYoApyuDnjkGVBnrxNTBQIYqHirjwxR4uIQK&sig=AHIEtbQwktx7__5KUAGXQrVNx5NnGtGtMQ)。

请注意，操作系统、处理器架构、库和语言中有各种机制试图帮助防止此类攻击。

例如[，维基百科提到了DEP（](http://en.wikipedia.org/wiki/Buffer_overflow#Protective_countermeasures)[数据执行保护](http://en.wikipedia.org/wiki/Data_Execution_Prevention)）、ASLR（[地址空间布局随机化](http://en.wikipedia.org/wiki/Address_space_layout_randomization)）等。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T06:32:32.087

局部静态变量在有限堆栈上保留空间。分配的内存位于堆上，基本上是所有可用的内存。

如前所述，堆栈空间是有限的，因此您应该避免使用大型局部变量以及按值传递的大型参数（参数声明中缺少`var`/ `const`）。

关于内存使用的一句话：
1\. 简单类型（`integer`、`char`、`string`等`double`）直接位于堆栈上。使用的字节数可以由`sizeof(variable)`函数确定。
2\. 同样适用于记录变量和数组。3\. 指针和对象需要 4/8 字节。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T07:10:36.687

每个对象（即类实例）总是在堆上分配。

值结构（简单的数字类型，仅包含这些类型的记录）可以在堆上分配。

动态数组和字符串内容总是在堆上分配。只有引用指针可以分配在堆栈上。如果你写：

```
 function MyFunc;
  var s: string;
  ... 
```

这里，4/8 字节分配在堆栈上，但字符串内容（文本字符）将始终分配在堆上。

所以使用`New()`/`Dispose()`没有什么好处。如果它不包含引用计数类型，则可以使用`GetMem()`/`FreeMem()`代替，因为没有内部指针可以设置为零。

`New()`or的主要缺点`Dispose()`是，如果发生异常，则**需要**使用`try`...`finally`块：

```
 var
    pCustRec : ^TCustomer;
  begin
    New(pCustRec);
    try
      pCustRec^.Name := 'Her indoors';
      pCustRec^.Age  := 55;
    finally
      Dispose(pCustRec);
    end;
  end; 
```

而在堆栈上分配让编译器以隐藏的方式为您完成：

```
 var
    CustRec : TCustomer;
  begin // here a try... is generated
    CustRec.Name := 'Her indoors';
    CustRec.Age  := 55;
  end;  // here a finally + CustRec cleaning is generated 
```

这就是为什么我几乎从不使用`New()`/ `Dispose()`，而是在堆栈上分配，甚至在一个类中更好。2

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T11:59:01.320

堆分配的常见情况是对象必须比创建它的函数寿命长：

1.  它作为函数结果或通过`var`/`out`参数直接或通过返回某个容器返回。

2.  它被存储在某个对象、结构或集合中，这些对象、结构或集合在过程中被传递或以其他方式可访问（这包括向另一个线程发出信号/排队）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T06:28:14.733

在堆栈空间有限的情况下，您可能更喜欢从堆中分配。
[参考。](http://delphi.about.com/od/windowsshellapi/a/heap-stack-explained-for-delphi-developers.htm)*

# ruby-on-rails - Heroku上的应用程序错误rails应用程序

> ID：14228750
> 
> 赞同：0
> 
> 时间：2013-01-09T05:22:58.940
> 
> 标签：ruby-on-rails, heroku

我已将我的应用程序上传到 heroku，它是一个用于测试登录的简单应用程序，它使用一个名为 sorcery 的 gem，但是当我在 heroku 上测试它时，我收到应用程序错误

要上传到 heroku，我只需执行以下操作：

```
git init
git add .
git commit -m "init"
heroku create
heroku push heroku master
heroku rake db:migrate 
```

我收到此错误：

```
rake aborted!
undefined method `sorcery' for 
#<Rails::Application::Configuration:0x0000000266e660>
) 
```

请帮助我，我认为宝石巫术导致了这个问题，但我不知道该怎么办。

你可以在[这里查看网站](http://powerful-reaches-4543.herokuapp.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:58:33.697

这对你的本地主机有用吗？

我从你的命令列表中看到

```
bundle install 
```

不在这里。

确保你有

```
gem "sorcery" 
```

在你的 gem 文件中

然后做

```
heroku login 
```

和

```
bundle install 
```

您可能会遇到其他错误。转到[Heroku 上的 Rails 3.x 入门](https://devcenter.heroku.com/articles/rails3)并按照说明进行操作。

# php - 显示来自外部文件夹/ URL 的文件夹中的图像（幻灯片）

> ID：14228752
> 
> 赞同：0
> 
> 时间：2013-01-09T05:23:13.403
> 
> 标签：php

**我有下面的代码**

```
<?php
$directory = 'images/slideshow';    
try {       
    // Styling for images   
    echo '<div id="myslides">'; 
    foreach ( new DirectoryIterator($directory) as $item ) {            
        if ($item->isFile()) {
            $path = $directory . '/' . $item;   
            echo '<img src="' . $path . '"/>';  
        }
    }   
    echo '</div>';
}   
catch(Exception $e) {
    echo 'No images found for this slideshow.<br />';   
}
?> 
```

复制自此主题： [显示文件夹中的图像（幻灯片）](https://stackoverflow.com/questions/9484018/display-images-from-a-folder-slideshow)

我想知道是否可以从外部加载图像，或者从 URL 的特定目录加载图像？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:57:41.657

这是可能的，但您需要知道每张照片的网址。虽然如果您可以让它们遵循某种模式（即 www.example.com/dir/photo1、www.example.com/dir/photo2），这将很容易。

您指向的外部服务器也必须允许远程链接。

然后只需制作链接即可：

```
for ($i = 1; $i < NUMBER_OF_PHOTOS; ++$i) {
    echo '<img src="http://www.example.com/dir/photo'.$i.'"/>';
} 
```

# ruby-on-rails-3 - Rails 3：在提交按钮中：disable_with 不起作用

> ID：14228753
> 
> 赞同：2
> 
> 时间：2013-01-09T05:23:14.807
> 
> 标签：ruby-on-rails-3

在以下代码中：disable_with 在 rails 3 中不起作用。但它在 rails 2.2 中完美运行

这段代码有什么问题？

```
<%= submit_tag "Save", :class => "buttons",
                       :disable_with => "Processing",
                       :id => 'save_btn' %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T05:39:29.860

从 3.2.5 版开始，您不应该使用 :disable_with。

```
<%= submit_tag "Save", 'data-disable-with' => "Processing", :class => "buttons", :id => 'save_btn' %> 
```

或者

```
<%= submit_tag "Save", data: { disable_with: "Processing" }, :class => "buttons", :id => 'save_btn' %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T03:04:28.597

在原始 html 中检查以下内容：

*   提交按钮具有 data-disable-with 属性
*   您的页面包含 jQuery js。对我来说，我有：
    *   [https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)
*   您的页面包含 jquery_ujs js。对我来说，我有：
    *   /javascripts/jquery_ujs.js

[您可以在https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)上阅读更多内容。不同导轨版本的不同安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T10:33:24.133

我在 Safari 8.0.6 和最新的 rails-ujs 上遇到了类似的问题。这是我解决此问题的方法：

```
%button{ class: 'btn btn-action js-submit', data: { method: :put, 'href' => '...', disable_with: "<i class='icon icon-spinner icon-spin'></i>".html_safe }} Submit 
```

```
$('.js-select-plan').click(function(event) {
  event.preventDefault();
  var $target     = $(this),
      href        = $target.data('href'),
      method      = $target.data('method'),
      formTarget  = $target.attr('target'),
      csrfToken   = $('meta[name=csrf-token]').attr('content'),
      csrfParam   = $('meta[name=csrf-param]').attr('content'),
      form        = $('<form method="post" action="' + href + '"></form>'),
      metaData    = '<input name="_method" value="' + method + '" type="hidden" />';

  if (csrfParam !== undefined && csrfToken !== undefined) {
    metaData += '<input name="' + csrfParam + '" value="' + csrfToken + '" type="hidden" />';
  }

  if (formTarget) {
    form.attr('target', formTarget);
  }

  // disable button/link element
  var contentMethod = $target.is('button') ? 'html' : 'val';
  var replacement   = $target.data('disable-with');
  $target.data('ujs:enable-with', $target[contentMethod]());
  if (replacement !== undefined) {
    $target[contentMethod](replacement);
  }
  $target.prop('disabled', true);

  form.hide().append(metaData).appendTo('body');
  setTimeout(function(){
    form.submit();
  }, 50);
}); 
```

这在所有浏览器中都像一个魅力。为了获得更好的灵活性，您可能希望将其包装在帮助程序中。

# mysql - 使用行值作为列

> ID：14228756
> 
> 赞同：0
> 
> 时间：2013-01-09T05:23:25.120
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL 将行转换为动态列数](https://stackoverflow.com/questions/12004603/mysql-pivot-row-into-dynamic-number-of-columns)

我有一个查询显示每天的项目数

```
$query = "SELECT uploadedby, count(item) as item, date_format(uploaddate, '%m-%d-%y') as date FROM `imsexport` GROUP BY uploadedby,date";
$result = mysql_query($query); 
```

结果表如下所示

```
 Name        item    date
Abel Antonio    10   01-02-12
Abel Antonio    5    01-03-12
Abel Antonio    6    01-04-12
Abel Antonio    2    01-05-12
Abel Antonio    1    01-09-12
Abel Antonio    15   01-12-12
Abel Antonio    22   01-16-12
Abel Antonio    15   01-17-12
Abel Antonio    7    01-19-12
Abel Antonio    45   02-15-12
Abel Antonio    31   02-16-12
...other names 
```

我想将日期作为列以使查询看起来像这样

```
Name          01-02-12  01-03-12   01-04-12   01-05-12    01-09-12 ....
Abel Antonio    10         5          6          2           1     ..... 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:14:19.390

所以我认为你想使用动态列数来做一个 Pivot。这取决于您使用的数据库，但我通过 date_format 语句猜测它是 MYSQL。这是一个答案的链接，可以满足您的要求 - 享受吧！

[https://stackoverflow.com/a/12005676/345659](https://stackoverflow.com/a/12005676/345659)

您的代码应如下所示：

```
$query = "
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT('count(case when date_format(uploaddate, ''%m-%d-%y'') = ''',
      date_format(uploaddate, '%m-%d-%y'),
      ''' then 1 end) AS `',
      date_format(uploaddate, '%m-%d-%y'), '`'
    )
  ) INTO @sql
from imsexport;

SET @sql = CONCAT('SELECT uploadedby AS Name, ', 
                  @sql, 
                  ' FROM imsexport 
                    GROUP BY Name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;";

$result = mysql_query($query); 
```

我在链接问题中由 bluefeet 提供的小提琴中使用了这些数据：

```
create table imsexport
(
  uniqueID int,
  item varchar(10),
  uploadedby varchar(50),
  uploaddate datetime
);
insert into imsexport values (1, 'Product A', 'Abel Antonio', '2013-01-01');
insert into imsexport values (2, 'Product B', 'Abel Antonio', '2013-01-01');
insert into imsexport values (3, 'Product C', 'Abel Antonio', '2013-01-01');
insert into imsexport values (4, 'Product A', 'Abel Antonio', '2013-01-01');
insert into imsexport values (5, 'Product A', 'Abel Antonio', '2012-01-01');
insert into imsexport values (6, 'Product A', 'Abel Antonio', '2012-01-01');
insert into imsexport values (7, 'Product A', 'Abel Antonio', '2012-01-01'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:49:57.820

在应用程序级别处理显示逻辑。

# r - 关于使用r代码绘制轮廓图

> ID：14228761
> 
> 赞同：1
> 
> 时间：2013-01-09T05:23:55.260
> 
> 标签：r, contour

我是 R 代码的新手。现在我在使用 R 代码绘制等高线图时遇到了一些麻烦。

我检查了 help(filled.contour) ，它告诉如果你想绘制轮廓，x,y 应该都是升序的。实际上，我随机收到数据，例如：

```
latitude, longitude, value
37.651098 140.725082 9519
37.650765 140.725248 9519
37.692738 140.749118 23600
37.692737 140.749118 9911
37.692695 140.749107 16591
37.692462 140.74902 6350
37.692442 140.749052 5507
37.692413 140.749148 5476
37.692383 140.74929 7069
37.692357 140.749398 6152
37.692377 140.749445 6170
37.692355 140.749587 7163
37.692298 140.749672 6831
37.692292 140.749787 6194
37.692283 140.749903 6696
37.692342 140.750007 8204
37.692585 140.750037 2872
37.692648 140.749948 3907
37.692655 140.749827 4891
37.692667 140.749687 4899 
```

我怎样才能绘制轮廓图！？这是我的代码：

```
args <- commandArgs(trailingOnly = TRUE) 
data1 <- args[1]
outputDir <- args[2]
outputFig = paste(outputDir, "Cs13x.jpeg",sep="");
jpeg(file = outputFig, width = 800,height=600, pointsize=20)
pinkcol <- rgb(1,0.7,0.7)

gpsdata <- read.table(file=data1,sep=" ");
lat <- as.vector(gpsdata[,1]);
lon <- as.vector(gpsdata[,2]);
datas <- as.vector(gpsdata[,3]);
datas <- abs(datas)
#---Convert gpsdata into x,y coordinate---#
# Convert degree into value
lat_pi <- lat*pi/180;
lon_pi <- lon*pi/180;
# calculate the value into corresponding x,y coordinate
x = cos(lat_pi) * cos(lon_pi);
y = cos(lat_pi) * sin(lon_pi);
#----------#
dataMatrix = matrix(datas, nrow = length(datas), ncol=length(datas));
plot.new()
filled.contour(sort(x),sort(y, decreasing = TRUE),dataMatrix, col = rainbow(100),     main="Contour Figure of Cs13x"); (**WRONG HERE!!!**)
dev.off() 
```

<--------------- 终点线------------>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T07:30:15.247

'akima' 包会做到这一点。它旨在处理不规则间隔的 z 值。前两点与其他点相距甚远，这使得整个数据集的结果看起来相当粗略，所以我省略了它们。

```
 require(akima)
 gps.interp <- with( gpsdata[-(1:2), ], interp(x=latitude, y=longitude, z=value))
 contour(gps.interp) 
```

![在此处输入图像描述](../Images/02e8557dd2e9a40f3d2bdbbb72ddfd94.png)

# iphone - NSString 上的 NSRegularExpression 不起作用

> ID：14228765
> 
> 赞同：1
> 
> 时间：2013-01-09T05:24:28.993
> 
> 标签：iphone, ios, regex, nsregularexpression

在`UITextBoxfield`中，我插入了一些值，并且我想使用正则表达式匹配字符串..现在我希望文本框文本应该只匹配最多 3 位的数字，当我按下按钮时它应该可以工作......我正在尝试的是这不起作用::-

```
-(IBAction)ButtonPress{

NSString *string =activity.text;
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^[0-9]{1,3}$" options:NSRegularExpressionCaseInsensitive error:&error];
NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@""];

 if ([activity.text isEqualToString:modifiedString ])
{ // work only if this matches numeric value from the text box text
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:33:46.583

您的代码将所有匹配项替换为一个空字符串，因此如果有匹配项，它将被一个空字符串替换，并且您的检查将永远不会起作用。相反，只需向正则表达式询问第一个匹配的范围：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^[0-9]{1,3}$" options:NSRegularExpressionCaseInsensitive error:NULL];
NSRange range = [regex rangeOfFirstMatchInString:string options:0 range:NSMakeRange(0, [string length])];

if(range.location != NSNotFound)
{
    // The regex matches the whole string, so if a match is found, the string is valid
    // Also, your code here 
} 
```

您也可以只询问匹配的数量，如果它不为零，则字符串包含介于`0`和之间的数字，`999`因为您的正则表达式匹配整个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T05:33:58.253

```
- (BOOL)NumberValidation:(NSString *)string  {
    NSUInteger newLength = [string length];
    NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:@"1234567890"] invertedSet];
    NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
    return (([string isEqualToString:filtered])&&(newLength <= 3));
} 
```

在您的按钮操作事件中，只需像下面这样使用...

```
-(IBAction)ButtonPress{

 if ([self NumberValidation:activity.text]) {
        NSLog(@"Macth here");
    }
    else {
        NSLog(@"Not Match here");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:28:58.413

请尝试以下代码。

```
- (BOOL) validate: (NSString *) candidate {
     NSString *digitRegex = @"^[0-9]{1,3}$";
    NSPredicate *regTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", digitRegex];
    return [regTest evaluateWithObject:candidate];
}

-(IBAction)btnTapped:(id)sender{

    if([self validate:[txtEmail text]] ==1)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"You Enter Correct id." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [alert show];
        [alert release];

    }
    else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"You Enter Incoorect id." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [alert show];
        [alert release];
    }
} 
```

# sql - 如何在 SQL Server 2008 r2 中添加列值？

> ID：14228770
> 
> 赞同：3
> 
> 时间：2013-01-09T05:25:08.227
> 
> 标签：sql, sql-server-2008-r2

我创建了一个名为`Dummy`4 列的表：`Date, Year, Student_Names, Subject`.

几天后，我需要再添加一个名为`Marks`.

我知道如何`Marks`使用 SQL 查询添加列，我正在使用以下查询：

```
Alter Table Dummy 
add Mark varchar(30) 
```

添加列后，所有值都是 NULL，我需要一些值来代替 NULL。

如何添加这些值？Excel 文件中提到了值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:38:57.237

尝试，

```
Alter Table Dummy ADD Mark varchar(30) DEFAULT '' 
```

或者

```
UPDATE Dummy
SET [MArk] = 'new value' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:35:42.210

您可以更新 NULL 值：

```
UPDATE Dummy
  SET Mark = "none"
WHERE Mark is NULL 
```

将所有标记设置为“无”。

此外，在添加列时，您可以指定默认值：

```
ADD Mark varchar(30) NOT NULL DEFAULT 'none' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:33:23.350

你的代码是`update Dummy set Marks = 10 where Student_Names = name you want to add marks to`

像这样你可以给所有学生加分

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T17:10:19.827

要更新 Excel 表中存在的值，您需要在 Excel 文件中编写查询（使用 CONCATENATE 函数）并在表上运行它。

# javascript - Bootstrap 2 - 设置对话框/模态位置

> ID：14228772
> 
> 赞同：11
> 
> 时间：2013-01-09T05:26:02.643
> 
> 标签：javascript, html, css, twitter-bootstrap

我找到了一种方法来做到这一点：

使用边距来控制对话框位置`margin: -335px 0 0 -280px`；

设置宽度，您必须重置边距`width: 900px; margin: -250px 0 0 -450px;`

设置高度使用 max-height `max-height: 800px;` 基于

[http://www.revillwebdesign.com/change-the-height-width-and-position-of-a-modal-in-twitter-bootstrap/](http://www.revillwebdesign.com/change-the-height-width-and-position-of-a-modal-in-twitter-bootstrap/)

有一个更好的方法吗？使用这种或另一种方法，有没有办法只让对话框向下滑动`top:0px`并停留在那里直到被解雇？

使用我提到的第一个边距设置可以做到这一点，但很明显，一旦浏览器调整大小，它就会被推到视野之外。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T05:57:40.517

只需覆盖 CSS 位置，例如

```
.modal, .modal.fade.in {
    top: 0; /* was 10% */
} 
```

请注意，这是使用[Bootstrap 2.2.2](http://twitter.github.com/bootstrap/javascript.html#modals)。唯一的边距是负左边距，它是模态宽度的一半（水平居中模态）。不需要上边距。

这里的 jsFiddle 示例 - [http://jsfiddle.net/uuwAn/1/](http://jsfiddle.net/uuwAn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T10:03:19.833

您可以`CSS`在最后修改 以存档此行为。

```
.modal-body {
    max-height: 350px;
    -webkit-overflow-scrolling: touch;
}

@media screen and (max-height: 450px), (max-height: 450px) {
    .modal-body {
        max-height: 130px;
    }

} 
```

现在它将在移动设备上运行良好。注意：通过使用媒体查询完成`CSS`。

# iphone - 如何以编程方式将多个标签添加到视图而不担心其 Y 位置？

> ID：14228774
> 
> 赞同：1
> 
> 时间：2013-01-09T05:26:15.367
> 
> 标签：iphone, ios, cocoa-touch, uiview, uilabel

我这里有一种情况，我想在视图中添加带有复选按钮的用户名，看起来很简单:)...

问题是我可能有一个或多个用户，所以我只需要通过代码添加它，我想添加所有名称，如带有相应检查按钮的梯子。

最好的方法是什么？

我尝试为每个用户添加标签。添加时我想一一设置其顶部位置以使其正确对齐。我必须像这样计算顶部吗？任何最简单的方法都在那里......就像他们在 Android 中所做的一样（相对布局）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:41:22.263

您可以创建`array`和`usernames`使用以下代码。这是供您参考的测试代码。

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
[arr addObject:@"1"];
[arr addObject:@"2"];
[arr addObject:@"3"];
[arr addObject:@"4"];
[arr addObject:@"15"]; 
```

现在循环：

```
for (int i = 0; i<[arr count]; i++) {

  UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(20, 10*10*i, 100, 40)];
  label.text = [arr objectAtIndex:i]; //usernames from array
  [self.view addSubview:label];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:38:54.880

在 Objective-C 中对应的 relativelayout 是[Cocoa Auto Layout](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:40:15.753

我会使用带有自定义单元格的 UItableView。该单元格包含您的输入字段。这样，您可以拥有任意数量的输入，并且它们将始终以相同的方式按顺序排列，并且您不需要编写任何时髦的代码。您还可以免费获得滚动和内存管理。

# c# - 合并 Gridview 中的标题

> ID：14228780
> 
> 赞同：0
> 
> 时间：2013-01-09T05:26:53.750
> 
> 标签：c#, gridview

我在 Gridview 中遇到问题，如果 Gridview 没有记录，我无法合并标题，但如果 Gridview 包含记录，则标题正在合并。

这是我用来合并 Gridview 中的标题的代码

```
protected void grdWorkExperience_RowCreated(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.Header)
        {
            GridView oGridView = (GridView)sender;
            GridViewRow oGridViewRow = new GridViewRow(0, 0, DataControlRowType.Header, DataControlRowState.Insert);
            TableCell oTableCell = new TableCell();

            oTableCell.Text = string.Empty;
            oTableCell.ColumnSpan = 2;
            oTableCell.BorderColor = System.Drawing.Color.White;
            oGridViewRow.Cells.Add(oTableCell);

            oTableCell = new TableCell();
            oTableCell.Text = "Inclusive Dates(mm/dd/yyyy)";
            oTableCell.ColumnSpan = 2;
            oTableCell.Font.Bold = true;
            oTableCell.Font.Size = 9;
            oTableCell.Font.Name = "Verdana";
            oTableCell.HorizontalAlign = HorizontalAlign.Center;
            oTableCell.BackColor = System.Drawing.Color.FromArgb(0x33, 0x66, 0xCC);
            oTableCell.ForeColor = System.Drawing.Color.White;
            oTableCell.BorderColor = System.Drawing.Color.Gray;
            oGridViewRow.Cells.Add(oTableCell);

            oTableCell = new TableCell();
            oTableCell.BorderColor = System.Drawing.Color.White;
            oTableCell.ColumnSpan = 13;
            oGridViewRow.Cells.Add(oTableCell);

            oGridView.Controls[0].Controls.AddAt(0, oGridViewRow);

        }
    } 
```

我将该函数放在Gridview 的**onRowCreated**事件中

即使 Gridview 没有记录，我应该怎么做才能合并标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:34:36.580

将代码从`OnRowCreated`事件移动到`Load`事件`Window/Control/Page`

# php - 使用 Simple Pie 获取特定的 Blogpost 数据

> ID：14228781
> 
> 赞同：1
> 
> 时间：2013-01-09T05:26:54.233
> 
> 标签：php, simplepie

我想使用 Simple Pie 获取特定的博客文章 URL 数据。例如。 [http://abc.com/2012/06/testing.html](http://abc.com/2012/06/testing.html)

我已经尝试过，但它正在获取原始提要数据。

# c# - PPCore.dll 在使用 C# 在 webbrowser 中播放 powerpoint 时崩溃

> ID：14228783
> 
> 赞同：1
> 
> 时间：2013-01-09T05:27:17.350
> 
> 标签：c#, .net, webbrowser-control, powerpoint

我有一个 C# 应用程序，我在其中使用 C# 中的 Web 浏览器控件播放 PowerPoint 文件（pptx、ppt、ppxs、pps 扩展名）。多个 powerpoint 背靠背排列以供播放。但是，有时它播放得很好，有时它会弹出错误“PowerPoint 停止工作”错误模块 ppcore.dll 的弹出框。我已经在 Microsoft Office 2007 和 2010 上对此进行了测试，并且都出现了这个问题。有时此弹出窗口会在应用程序启动后几分钟内出现，有时会在几个小时后出现。

有谁知道会是什么问题以及如何解决这个问题。

# java - 基于时间间隔的节流

> ID：14228786
> 
> 赞同：0
> 
> 时间：2013-01-09T05:27:27.083
> 
> 标签：java, activemq, apache-camel

我在 ActiveMQ 中有 4 个队列，每个队列的消息都应该发送到外部服务，以便从队列中提取消息，我正在使用 Apache Camel，并且我正在限制消息。
但我的问题是对于不同的队列，我有不同的社交时间。例如，
队列 1 消息应该只在上午 6 点到下午 5 点之间发送，
队列 2 消息应该只在上午 10 点到晚上 10 点之间发送。

所以我想知道我们如何使用 Apache 骆驼节流来处理这个问题。或者请给我一些解决方案。

如果有人没有解决我的问题，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:14:34.033

Camel 允许您将路由与路由策略相关联。我们有一个开箱即用的策略，它基于骆驼石英并且是基于计划的。这允许您设置路线*开放时间的政策。*

文档从这里开始：[http](http://camel.apache.org/routepolicy) ://camel.apache.org/routepolicy 。并且有从该页面到基于调度程序的策略的链接。

请注意，有一张票 - [http://issues.apache.org/jira/browse/CAMEL-5929](http://issues.apache.org/jira/browse/CAMEL-5929) - 如果您重新启动应用服务器，那么如果您在开放时间内开始，则不会启动路线。例如你有 12pm-6pm。然后您在下午 3 点重新启动应用程序（例如中间）。然后我第二天开始的路线。如果在打开的窗口内启动，票可以让您配置强制启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:17:51.047

1.  每个队列/间隔设置一条路线。
2.  使用在应该开始/停止路线的时间触发的[石英计时器。](http://camel.apache.org/quartz.html)
3.  您可以让 Quartz 路由使用[控制总线](http://camel.apache.org/controlbus.html)模式来启动/停止队列路由。

# python - 通过过滤生成不同（遥远，按编辑距离）单词的列表

> ID：14228787
> 
> 赞同：4
> 
> 时间：2013-01-09T05:27:30.657
> 
> 标签：python, algorithm, duplicate-removal, similarity, edit-distance

我有一个很长（> 1000 项）的单词列表，我想从中删除与其他单词“太相似”的单词，直到其余单词都“显着不同”。例如，没有两个词在编辑距离 D 内。

我不需要一个独特的解决方案，它不必是完全最优的，但它应该相当快（在 Python 中）并且不会丢弃太多条目。

我怎样才能做到这一点？谢谢。

编辑：要清楚，我可以用谷歌搜索一个测量编辑距离的python例程。问题是如何有效地做到这一点，并且也许以某种方式找到 D 的“自然”值。也许通过从所有单词中构造某种 trie 然后修剪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:36:18.757

您可以使用`bk-tree`, 并在添加每个项目之前检查它是否不在任何其他项目的距离 D 内（感谢@DietrichEpp 在此想法的评论中。

您可以[将此配方](http://code.activestate.com/recipes/572156-bk-tree/)用于 bk-tree（尽管任何类似的配方都可以轻松修改）。只需进行两项更改：更改行：

```
def __init__(self, items, distance, usegc=False): 
```

到

```
def __init__(self, items, distance, threshold=0, usegc=False): 
```

并换行

```
 if el not in self.nodes: # do not add duplicates 
```

到

```
 if (el not in self.nodes and
            (threshold == None or len(self.find(el, threshold)) == 0)): 
```

这样可以确保添加项目时没有重复项。然后，从列表中删除重复项的代码很简单：

```
from Levenshtein import distance
from bktree import BKtree
def remove_duplicates(lst, threshold):
    tr = BKtree(iter(lst), distance, threshold)
    return tr.nodes.keys() 
```

*请注意*，它的距离函数依赖于[python-Levenshtein](http://pypi.python.org/pypi/python-Levenshtein/)包，这比 bk-tree 提供的要快得多。python-Levenshtein 有 C 编译的组件，但值得安装。

* * *

最后，我使用越来越多的单词（从 中随机抓取）设置了一个性能测试，`/usr/share/dict/words`并绘制了每个单词的运行时间：

```
import random
import time
from Levenshtein import distance
from bktree import BKtree

with open("/usr/share/dict/words") as inf:
    word_list = [l[:-1] for l in inf]

def remove_duplicates(lst, threshold):
    tr = BKtree(iter(lst), distance, threshold)
    return tr.nodes.keys()

def time_remove_duplicates(n, threshold):
    """Test using n words"""
    nwords = random.sample(word_list, n)
    t = time.time()
    newlst = remove_duplicates(nwords, threshold)
    return len(newlst), time.time() - t

ns = range(1000, 16000, 2000)
results = [time_remove_duplicates(n, 3) for n in ns]
lengths, timings = zip(*results)

from matplotlib import pyplot as plt

plt.plot(ns, timings)
plt.xlabel("Number of strings")
plt.ylabel("Time (s)")
plt.savefig("number_vs_time.pdf") 
```

![在此处输入图像描述](../Images/57e4c84aa2cd33f62791c745a2985e7d.png)

如果没有在数学上确认它，我认为它不是二次的，而且我认为它实际上可能是`n log n`，如果插入 bk-tree 是对数时间操作，这将是有意义的。最值得注意的是，它在 5000 个字符串以下运行得非常快，这有望成为 OP 的目标（ 15000 个字符串是*合理*的，而传统的 for 循环解决方案则不会）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:23:07.190

尝试不会有帮助，哈希映射也不会。它们对于像这样的空间、高维问题根本没有用。

但这里真正的问题是对“高效”的不明确要求。“高效”有多快？

```
import Levenshtein

def simple(corpus, distance):
    words = []
    while corpus:
        center = corpus[0]
        words.append(center)
        corpus = [word for word in corpus
                  if Levenshtein.distance(center, word) >= distance]
    return words 
```

我从硬盘驱动器上的“美国英语”词典中统一选择了 10,000 个单词，寻找距离为 5 的集合，产生了大约 2,000 个条目。

```
实际0m2.558s
用户 0m2.404s
系统 0m0.012s

```

所以，问题是，“效率如何才足够有效”？由于您没有指定您的要求，因此我很难知道该算法是否适合您。

## 兔子洞

如果你想要更快的东西，我会这样做。

创建 VP 树、BK 树或其他合适的空间索引。对于语料库中的每个单词，如果它与索引中的每个单词有合适的最小距离，则将该单词插入树中。空间索引是专门为支持这种查询而设计的。

最后，您将拥有一棵树，其中包含具有所需最小距离的节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:43:09.607

你的想法绝对是有趣的。[这个页面](http://stevehanov.ca/blog/index.php?id=114)有一个很好的设置，可以在 trie 中快速计算编辑距离，如果你需要将你的单词列表扩展到数百万而不是一千，这在语料库语言学业务中是相当小的，这肯定会很有效。

祝你好运，这听起来很有趣！

# wpf - Windows phone 数据验证 Mvvm-light

> ID：14228788
> 
> 赞同：1
> 
> 时间：2013-01-09T05:27:36.227
> 
> 标签：wpf, windows-phone-7, mvvm-light, windows-phone-8

我正在使用 MVVM 灯开发 Windows phone 8 应用程序，我在验证来自用户的数据输入和显示消息框指示来自用户的空/不正确输入时遇到问题，我似乎有桌面应用程序的示例，但似乎没有类似的对于电话。以下是我对问题的描述。

为简单起见，我没有包括“get”“set”

```
`[Model Class]   
  public class Friend : ObservableObject  
  {  
   public string  FriendName;  
   public string  Email;  
  }   `

 [MainViewModel]    

 public class MainViewModel : ViewModelBase  
 {
   Friend Friend;    
 }

 [View]
    <TextBox Text="{Binding Friend.FriendName}" ------------ />    
    <TextBox Text="{Binding Friend.Email}" ------------ /> 
    <Button  Name="Save"----------------------------------/> 
```

> 现在我如何验证来自视图的输入数据并显示
> 使用 MVVM Light 指示空/不正确输入的消息框感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:55:36.880

首先，您可以在单击保存按钮时从 ViewModel 执行命令：

[如何将 RelayCommand 与 MVVM Light 框架一起使用](https://stackoverflow.com/a/6754757/1565574)

在你的命令调用的方法中，你可以检查你想要的。

然后显示消息框，你有不同的解决方案。

这是其中的一个：

[在 MVVM 中显示来自 ViewModel 的消息框](http://awkwardcoder.blogspot.be/2012/03/showing-message-box-from-viewmodel-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:24:09.377

您可以从保存按钮向 ViewModel 发送一条消息以检查输入值。然后，您的 ViewModel 可以将消息发送回您的视图并让您显示消息框。请参阅[本教程](http://jesseliberty.com/2011/01/05/windows-phone-from-scratch-mvvm-light-toolkit-soup-to-nuts-part-2/)，了解如何发送消息以及如何响应消息（将在[第 3 部分](http://jesseliberty.com/2011/01/06/windows-phone-from-scratch%E2%80%93mvvm-light-toolkit-soup-to-nuts-3/)中显示）。

# iphone - 滚动视图图像是否在向左滚动后从内存中删除？

> ID：14228790
> 
> 赞同：0
> 
> 时间：2013-01-09T05:27:43.137
> 
> 标签：iphone, objective-c, ios, uiscrollview

我有一个不断滚动的滚动视图。滚动视图的图像全尺寸为屏幕 320 * 480。因此一次只能在屏幕上看到一张图像。当我的应用程序处于运行状态时，滚动视图会不断滚动。在分析应用程序时，我发现添加到滚动视图的而不是图像我的内存没有增加。我的问题是图像从滚动视图中滚动出来后是从内存中删除还是我需要明确地这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:40:52.323

它不会自动从内存中删除。

有2种方法来处理它。

第一种方法是：您只能在 scrollView 上保留 3 个 imageView。并通过scrollView的委托在scrollView中添加或删除其他imageView，例如

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

第二种方式是：保留一个3页的scrollView，并在滚动时更改图像。你可以看到demo：[https ://github.com/smallqiang/cycleScrollerView](https://github.com/smallqiang/cycleScrollerView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:46:18.107

另一种方法是使用 UITableView，旋转 90，单元格旋转 -90。在这种情况下，只有可见的图片才会存在于内存中。

# c# - RavenDB SelectMany 替代方案

> ID：14228793
> 
> 赞同：2
> 
> 时间：2013-01-09T05:28:02.093
> 
> 标签：c#, ravendb, linq

我正在使用 Nancy 和 RavenDB 构建照片库我的模型类如下：

```
[JsonObject(IsReference=true)]
public class Album
{
    public Album()
    {
        this.Photos = new List<Photo>();
        this.Tags = new List<String>();
    }

    public String Id {get; set;}
    public String Name {get; set;}
    public String Path {get; set;}
    public DateTime ModifiedDate{get; set;}
    public IList<String> Tags {get; set;}
    public IList<Photo> Photos {get; set;}

}

    public class Photo
{
    public String Id {get; set;}
    public String Name {get; set;}
    public String Path {get; set;}
    public IList<String> Tags {get; set;}
    public Album Album {get; set;}
    public DateTime ModifiedDate{get; set;}
    public bool IsPrivate{get; set;}
} 
```

我尝试在照片->标签上减少地图索引：

```
 public class TaggedPhotosIndex:AbstractIndexCreationTask<Album, TaggedPhotos>
    {
        public TaggedPhotosIndex()
        {
            Map = albums =>
                from a in albums
                from p in a.Photos
                from t in p.Tags
                select new TaggedPhotos
                {
                    Tag = t,
                    PhotoIds = new List<String> {p.Id}
                };
            Reduce = results => 
                from result in results
                group result by result.Tag into agg
                select new TaggedPhotos
                {
                    Tag = agg.Key,
                    PhotoIds = agg.SelectMany(a => a.PhotoIds).ToList()
                };
        }
    }

    public class TaggedPhotos
    {
        public String Tag {get; set;}
        public IList<String> PhotoIds {get; set;}
    } 
```

这是我想要实现的目标：

给定一组标签，我想获取所有具有至少一个匹配标签的 Photo 对象。

RavenDB 不允许在查询中使用 SelectMany 并且我没有想法。

找到了一个解决方案（使用[客户端 api 在 ravendb 中使用 LuceneQuery @ Workaround for selectmany](https://stackoverflow.com/questions/5973637/workaround-for-selectmany-in-ravendb-using-client-api)），但期待任何其他替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T05:42:20.397

您的文档结构存在一些问题，这将使您的查询变得困难。

*   查询*旨在*返回整个文档。您要求从文档中获取部分结果。可以这样做，但前提是您将所有字段存储在索引中并从那里投影结果。您放弃了文档存储的 ACID 保证，这是 RavenDB 最强大的功能之一。

*   您有一个通常会嵌入的来自`Photo`后面的引用，从而导致循环引用，除非您设置为避免这种情况。这可能适用于单个文档中的基本序列化，但在从预计的索引值引用整个文档时，它是没有意义的。您已经设置了自己的“鸡和蛋”问题。`Album``[JsonObject(IsReference=true)]`

*   您仍然缺少人们期望从这个问题域中获得的基本功能。具体来说，您应该能够加载单张照片而无需加载整个相册。

我***强烈***建议你把照片放在自己的文件中。然后你可以有更简单的索引并避免循环引用。在[DDD](http://en.wikipedia.org/wiki/Domain-driven_design)术语中，两者`Photo`和`Album`都是聚合。还有一个 DDD 聚合 == 一个 RavenDB 文档。您当前正在将照片建模为不是聚合的实体，但随后您要求进行仅对聚合执行的操作 - 例如搜索。

如果您只问“给我所有包含带有这些标签之一的照片的*相册”，那么您就可以了。*但你不是要专辑，你要的是*照片*。

假设您确实以这种方式建模，布雷特的答案很接近 - 但有一些无关紧要的东西。这是一个显示完整实现的单元测试。在 gist 上发布，因为它没有直接解决原始问题。 [https://gist.github.com/4499724](https://gist.github.com/4499724)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:51:24.883

这花了我一段时间，但我验证了下面的解决方案是有效的。

首先，修改您的索引和索引结果，如下所示。

```
 public class TaggedPhotosIndex:AbstractIndexCreationTask<Photo, TaggedPhotos>
    {
        public TaggedPhotosIndex()
        {
            Map = photos =>                
                from p in Photos
                from t in p.Tags
                select new TaggedPhotos
                {
                    Tag = t,
                    PhotoId = p.Id
                };
        }
    }

    public class TaggedPhotos
    {
        public string Tag {get; set;}
        public string PhotoId {get; set;}
    } 
```

现在创建了索引，下面是您查询它以获取照片的方法。

```
var tagsToSearch = new List<string>(){"test1", "test2", "test3"};

var photoIds = documentSession.Query<TaggedPhotos, TaggedPhotoIndex>()
                               .Customize(x => x.Include<Photo>(p => p.Id))
                               .Where(x => x.Tag.In(tagsToSearch))
                               .Select(x => x.PhotoId)
                               .Distinct()
                               .ToArray();

// This doesn't actually make a second call as the photos are already loaded
// in the document session
var photos = documentSession.Load<Photo>(photoIds); 
```

根据要求

> 这是我想要实现的目标：
> 
> 给定一组标签，我想获取至少有一个匹配标签的所有照片对象。

我没有看到专辑是如何与这一切联系在一起的

# c# - 如何解决这个问题`OpenCV：比例因子必须> 1 ...`？在 OpenCV 中总结？

> ID：14228794
> 
> 赞同：0
> 
> 时间：2013-01-09T05:28:08.707
> 
> 标签：c#, image-processing, opencv

嗨，我正在写一个`Application`来计算一个中的`faces`数量`images`。我正在使用`Haar_caash_code`xml 来计算人脸。

C#代码：

```
 private void btnStart_Click(object sender, EventArgs e)
    {
        OpenFileDialog opndlg = new OpenFileDialog();

        if (opndlg.ShowDialog().Equals(DialogResult.OK))
        {
            try
            {
                Image img = Image.FromFile(opndlg.FileName);
                Image<Bgr, byte> BgrImg = new Image<Bgr, byte>(new Bitmap(img));
                GrayImage = BgrImg.Convert<Gray, byte>();
                var faces = GrayImage.DetectHaarCascade(haar, 1, 4, HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, new Size(25, 25))[0]; //here Exception
                MessageBox.Show(faces.Length.ToString());
            }
            catch (Exception ex)
            {

            }
        } 
```

和 dll 包括：

```
 cudart64_32_16.dll
 cufft64_32_16.dll
 cvextern.dll
 npp64_32_16.dll
 opencv_calib3d220.dll
 opencv_contrib220.dll
 opencv_core220.dll
 opencv_features2d220.dll
 opencv_flann220.dll
 opencv_gpu220.dll
 opencv_highgui220.dll
 opencv_imgproc220.dll
 opencv_legacy220.dll
 opencv_ml220.dll
 opencv_objdetect220.dll
 opencv_video220.dll 
```

运行程序时出现以下错误：

```
 `OpenCV: scale factor must be > 1...` 
```

请帮助解决相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:55:21.153

第二个参数`scale factor`to`DetectHaarCascade`必须严格大于 1。
为了确保这一点，请尝试将其设置为 1.1 并查看程序是否可以正常运行。

```
var faces = GrayImage.DetectHaarCascade(haar, 1.1, // change this value
     4, HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, new Size(25, 25))[0]; 
```

阅读[这篇](http://fewtutorials.bravesites.com/entries/emgu-cv-c/level-3c---how-to-improve-face-detection)文章以获取更多信息。

# java - 如何设置 log4j 配置文件

> ID：14228799
> 
> 赞同：0
> 
> 时间：2013-01-09T05:29:08.203
> 
> 标签：java, apache, logging

如果我有以下 log4j 属性文件，我刚刚开始使用 log4j，我应该在下面的代码中修改什么来为 apache tomcat 7.0 中部署的应用程序“test-war”创建一个文件 log.out。

```
# Define the root logger with appender file
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=${catalina-base}/logs/log.out

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:00:47.180

你的配置文件很好，我认为问题是你的jsp，你导入了使用的类，我建议你使用log4j的xml配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:14:50.750

此 log4j 属性片段将在 tomcat 日志目录中生成日志文件并以 log.out.xxx-yy-mm 格式保存日志文件，这将帮助您轻松操作日志文件。

```
log4j.appender.FILE=org.apache.log4j.DailyRollingFileAppender
log4j.appender.FILE=${catalina.base}/logs/log.out
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.ConversionPattern=%d{ISO8601} %-5p %c %x - %m%n
log4j.appender.FILE.ImmediateFlush=true
log4j.appender.FILE.DatePattern='.'yyyy-MM-dd 
```

# php - strpos 的正确返回类型是什么？搜索“@”字符

> ID：14228801
> 
> 赞同：0
> 
> 时间：2013-01-09T05:29:16.720
> 
> 标签：php

例如我有一个字符串`I am @ the penthouse.`

我需要知道如何在 php 字符串中找到字符“@”以及字符的位置。

我尝试了 strpos 但它不起作用。

我在这里先向您的帮助表示感谢。

编辑：

我一直在使用它来获取角色：

```
$text = "I am @ the penthouse";

$pos = strrpos($text, '@');

if($pos == true)
{
    echo "yes";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T05:34:01.017

我会这样做

**请注意，**我使用的是[`strpos`](http://php.net/manual/en/function.strpos.php)，而不是反向对应物，[`strrpos`](http://php.net/manual/en/function.strrpos.php)

```
if (($pos = strpos('I am @ the penthouse.', '@') !== false) {
  echo "pos found: {$pos}";
}
else {
  echo "no @ found";
} 
```

* * *

**注意：**因为`@`可能是字符串中的第一个字符，[`strpos`](http://php.net/manual/en/function.strpos.php)所以可以返回一个`0`. 考虑以下：

```
// check twitter name for @
if (strpos('@twitter', '@')) { ... }

// resolves to
if (0) {
  // this will never run!
} 
```

因此，将在未找到匹配项时[`strpos`](http://php.net/manual/en/function.strpos.php)显式返回。`false`这是正确检查子字符串位置的方法：

```
// check twitter name for @
if (strpos('@twitter', '@') !== false) {
  // valid twitter name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:30:17.697

您也可以`strpos()`为此目的使用该功能。就像`strrpos()`它在字符串中搜索子字符串（或至少是字符）一样，但如果未找到子字符串，则返回该子字符串的**第一个**位置**或 boolean(false) 。**所以片段看起来像：

```
$position = strpos('I am @ the penthouse', '@');
if($position === FALSE) {
    echo 'The @ was not found';
} else {
    echo 'The @ was found at position ' . $position;
} 
```

**请注意**`strpos()`，在 php.ini和php.ini 中都有一些常见的陷阱`strrpos()`。

1\. **检查返回值的类型！**

想象以下示例：

```
if(!strpos('@stackoverflow', '@')) {
    echo 'the string contains no @';
} 
```

尽管字符串包含“@”，但将输出“@”未找到。那是因为 PHP 中的弱数据类型。前面的 strpos() 调用将返回 int(0) 因为它是字符串中的第一个字符。但是，除非您使用 '===' 运算符强制执行严格的类型检查，否则此 int(0) 将作为 FALSE 处理。这是正确的方法：

```
if(strpos('@stackoverflow', '@') === FALSE) {
    echo 'the string contains no @';
} 
```

2\. **使用正确的参数顺序！**

strpos 的签名是：

```
strpos($haystack, $needle [, $start]); 
```

这**与**PHP 中的其他 str* 函数不同，其中 $needle 是第一个参数。

请记住这一点！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:32:21.200

这似乎在 PHP 5.4.7 中对我有用：

`$pos = strpos('I am @ the penthouse', '@');`

你到底`strpos`是什么意思不工作？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T05:31:50.070

看这对我有用，它也对你有用

```
$string = "hello i am @ your home";
 echo strpos($string,"@"); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-09T05:40:10.293

我希望这个能帮上忙 -

```
<?php
$string = "I am @ the penthouse";
$desired_char = "@";

// checking whether @ present or not
if(strstr($string, $desired_char)){

   // the position of the character
   $position = strpos('I am @ the penthouse', $desired_char);
   echo $position;
}
else echo $desired_char." Not found!";
?> 
```

# jquery - 使用 jQuery jsonp 跨域请求到远程 ASP.NET Web 服务

> ID：14228806
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:30:18.963
> 
> 标签：jquery, web-services, jsonp

在这里我以 json 格式提供输入。但我没有得到输出。任何人都可以解决这个问题。

我对 jsonp 有一些疑问：

1）我有一个疑问，为了使用jsonp调用远程Web服务，我们是否必须以json格式或查询字符串格式发送数据。

2）在这里，如果我们访问 url 并提供输入，那么我们将获得 xml 格式的 o/p。所以我只想知道 jsonp 是否不适用于将 xml 作为输出的 web 服务。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
<title></title>
<script src="Scripts/jquery-1.7.min.js" type="text/javascript"></script>
<script type="text/javascript">
function myQuerySuggestions() {
    var searchText = document.getElementById('txtsearch').value;
                searchText = "'" + searchText + "'";
                var jasonData = "{" + 'Celsius:' + searchText + "}";
    $.ajax({
        url: "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit",
        dataType: "jsonp",
        crossDomain: true,            
        data:jasonData,
        jsonpCallback: blah,
        contentType: "application/json; charset=utf-8",
        success: function (data, status) {
            alert(status+" status");
        },
        error: function () { alert("error"); }
    });

}
function blah(data) {
   alert("called");
   alert(data);
   // var result = (typeof data.d) == 'string' ? eval('(' + data.d + ')') : data.d;
   // $('#summary').html('<p>All new content. <em>You bet!</em></p>');
   // $('#summary').html(result);
}

</script>
</head>
<body>
<form id="form1" runat="server">
 <div>
<label for="txtsearch">
    Enter country:
</label>
<input type="text" id="txtsearch" size="43" style="font-size: 12px; font-weight: bold;" />
<br />
<asp:Button ID="btn" runat="server" Text="Submit" OnClientClick="myQuerySuggestions();return false;" />
<div id="summary" runat="server"></div>
</div>
 </form>
</body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:49:05.990

无论您调用什么服务，都应该返回 JSONP 以供 Ajax 调用使用`dataType: "jsonp"`。

XML 响应不是 JSONP 响应 - 没有从一个到另一个的神奇转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:04:42.073

编辑了程序代码..此代码工作正常。但我正在调用的服务不会为 Ajax 调用返回 JSONP。因此此代码的输出将是未定义的。

# android - 用于显示 RSS 提要的标题和描述的 Android 应用程序

> ID：14228810
> 
> 赞同：1
> 
> 时间：2013-01-09T05:30:45.590
> 
> 标签：android, rss

我是 Android 新手，我正在尝试制作一个应用程序来从显示“标题”和“描述”的网站获取 RSS 提要。但在这里，我只得到标题而不是描述。在 XML 部分中，我有一个列表视图，可以在其中获取标题但没有描述。

```
public class abcreaderextends ListActivity  {
    List<String> headlines;
    List<String> links;
    List<String> description;

public InputStream getInputStream(URL url) {
   try {
       return url.openConnection().getInputStream();
   } catch (IOException e) {
       return null;
     }
}

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_awsreader);

        // Initializing instance variables
        headlines = new ArrayList<String>();
        links = new ArrayList<String>();
        description= new ArrayList<String>();

        try {
            URL url = new URL("http://xxx.xxx.xxx/abc");

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

                // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

               int i=0;
              boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {

                i++;

                //Log.i("Tag : ",xpp.getName().toString());
                //Log.i("Text : ",xpp.nextText().toString());

                if (eventType == XmlPullParser.START_TAG)
                {

                    Log.i("Tag : ",xpp.getName().toString());

                    //Log.i("Text : ",xpp.nextText().toString());

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } 

                    else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                        {   
                            String var=xpp.nextText().toString();

                        headlines.add(var); //extract the description of article
                        Log.i("Title : ",var);      
                        //Log.i("Count : ",i+"");
                        }
                    } 

                    else if (xpp.getName().equalsIgnoreCase("description")) {
                        if (insideItem)
                        {   
                            String desc=xpp.nextText().toString();

                        description.add(desc); //extract the description of article
                        Log.i("Desc : ",desc);      
                        //Log.i("Count : ",i+"");
                        }
                    } 

                    else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                    insideItem=false;

                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Binding data
    ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, description);

        setListAdapter(adapter);

        ArrayAdapter adaptr = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, headlines);

        setListAdapter(adaptr);

    }
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
       Uri uri = Uri.parse((String) links.get(position));
       Intent intent = new Intent(Intent.ACTION_VIEW, uri);
       startActivity(intent);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:42:15.750

您将描述和标题绑定到同一个参考，**android.R.layout.simple_list_item_1**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:45:27.037

首先创建一个类

```
 class myData
    {
    String title;
    String desc;

    } 
```

声明title和description的setter和getter方法现在在你的解析中你可以创建

```
ArrayList<myData> arrData=new ArrayList<MyData>();

And save your parsing data 
with arraData.add(new MyData(title,desc));
so finally you got arrayList of Your Data 
```

现在创建listView的自定义适配器

```
public class MyDataAdapter extends ArrayAdapter<myData> {
    private int resource;
    private List<myData> items;
    private Context c1;

    //In resource parameter you have to pass you cutom row xml layout likr row.xml

    public MyDataAdapter(Context context, int resorce,
            List<myData> items) {
        super(context, resorce, items);
        this.c1 = context;
        this.resource = resorce;
        this.items = items;

    }

    public class ViewHolder {
        private TextView title;
        private TextView description;

    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
            if (convertView == null) {
            LayoutInflater layoutInflater = LayoutInflater.from(getContext());
            convertView = layoutInflater.inflate(resource, parent, false);
            holder = new ViewHolder();
            holder.title = (TextView) convertView
                    .findViewById(R.id.title);
            holder.description = (TextView) convertView.findViewById(R.id.desc);

        holder.title.setText(items.get(position)
                .getTitle());
        holder.description.setText(items.get(position)
                .getDesc());

        return convertView;
    }

} 
```

# angularjs - Angularjs指令：如何通过动态id查找元素，并修改模板

> ID：14228812
> 
> 赞同：3
> 
> 时间：2013-01-09T05:31:04.630
> 
> 标签：angularjs

我正在尝试基于模板动态生成表单，该模板又具有一些动态属性。

我快接近了，但在检索容器元素时遇到了麻烦。

这是指令：

```
myApp.directive('myDirective', function () {
    return {
    template: "<div> <label>{{Field.Name}} <div id='{{Field.Name}}_Container'></div> </label></div>",
    replace: true,
    restrict: 'AE',
    scope: {
        Field: "=fieldInfo",
        FieldData:"="
    },
    link: function (scope, element, attr) {
        var input = "<input type='" + scope.Field.Type + "' data-ng-model='FieldData[" + scope.Field.Name + "]' />";
        var inputEl = angular.element(input);
        var container = angular.element("#" + scope.Field.Name + "_Container"); // Doesn't work
        container.append(inputEl);
    }
}

}); 
```

控制器：

```
function MyCtrl($scope) {
    $scope.Fields = [
      { Name: "field1", Type: "text", Data:null },
      { Name: "field2", Type: "number", Data:null }
    ];

     $scope.FieldData = {}; //{fieldname: fielddata}
} 
```

html:

```
<div ng-controller="MyCtrl">
      <my-directive data-ng-repeat="field in Fields" data-field-info="field">
    </my-directive>
</div> 
```

基本上我有字段描述符对象，并且需要基于它生成一个表单。我不太确定如何引用容器对象 - 在以某种方式链接之前必须编译模板吗？

另外，如果这很重要，我实际上正在使用 templateUrl。

这是一个[小提琴](http://jsfiddle.net/eugenelt/EAW4F/2/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T05:48:55.793

您需要使用[$compile](http://docs.angularjs.org/api/ng.%24compile)编译为 html 模板。此外，您可以`element`在`link`函数中使用来访问`div`模板中的外部。

```
var myApp = angular.module('myApp', []);

myApp.directive('myDirective', function ($compile) {
    return {
        template: "<div> <label>{{Field.Name}} <div id='{{Field.Name}}_Container'></div> </label></div>",
        replace: true,
        restrict: 'AE',
        scope: {
            Field: "=fieldInfo",
            FieldData:"="
        },
        link: function (scope, element, attr) {
            var input = "<input type='" + scope.Field.Type + "' data-ng-model='FieldData[" + scope.Field.Name + "]' />";
            var html = $compile(input)(scope);
            element.find('div').append(html);
        }
    }
}); 
```

见[jsfiddle](http://jsfiddle.net/asgoth/5LqUL/)。

# linux-kernel - 在“fork”之后立即调用“exec”的目的是什么？

> ID：14228816
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:31:24.450
> 
> 标签：linux-kernel, exec, fork

任何人都可以在 fork() 之后立即解释 exec() 调用的使用吗？是否避免为孩子制作单独的副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:51:55.313

`man exec`说：

> exec() 系列函数用新的进程映像替换当前进程映像。

虽然`man fork`说：

> fork() 通过复制调用进程来创建一个新进程。

因此，`fork-exec`链意味着父进程`forking`通过自我复制来处理一个子进程，然后将当前（子进程）进程映像替换为新进程映像。

请注意，不必`exec`在`fork`. 在许多情况下，一个过程映像可以满足父母和孩子的需求。

# python - Python转换计算器循环/代码效率

> ID：14228824
> 
> 赞同：0
> 
> 时间：2013-01-09T05:31:47.507
> 
> 标签：python, if-statement, switch-statement, performance, program-flow

以下是我在 Python 2.7 中构建的一个简单的密耳到度数转换计算器的（半）成品版本，作为学习练习。我是 Python 新手，仍在解决问题。前提是，用户选择将密耳转换为度数，反之亦然。用户输入所选单位的方位角并将其转换为另一个。如果用户选择了无效的菜单选项，他会收到这样的通知。如果他进入范围之外的方位角（度数为 1-360，密耳为 1-6400），他会收到通知并且必须重新开始。问题是如果用户输入了一个无效的方位角，比如 365 度，他会被踢回菜单。**有没有办法返回到 if/else 循环中的上一步？**我搜索了论坛和文档，但似乎不可能。另外，由于我是 Python 新手，如何使这段代码更高效？**我是否需要在函数定义中包含*if*和*elif*语句，或者我可以将它们组合起来而不会产生错误或冗余输出？**我这样做并不成功。欢迎和赞赏所有意见。

```
#Mil-Deg.py
#Simple Mils / Degrees Conversion Calculator
#6 JAN 2013

#Note: 6400 mils / 360 degrees in a circle. 17.78 mils to one degree.

import sys
import math
import winsound

#Define menu function
def menu():                     

    print 
    print " Mils / Degrees Conversion Calculator"
    print "-" * 38
    print 
    print "Options: "
    print "1\. Degrees to Mils"
    print 
    print "2\. Mils to Degrees"
    print 
    print "3\. Quit"
    print "-" * 20
    print 
    return input ("Choose your option: ")
    print 

#Define mils to degrees function    
def m2d(a):
    if a <= 6400 and a >= 1:    #get user input within given range      
        b = 17.78
        c = round((a / b),0)    #convert and round to nearest degree  
        if c > 359 or c < 1:    #change 0 degrees to 360               
            c = 360
            #Output
            print
            print a, "mils =", int (c), "degrees"    
        else:
            print
            print a, "mils =", int (c), "degrees"
    elif a > -1 and a < 1:      #change 0 mils to 6400
        a = 6400
        b = 17.78
        c = round((a / b), 0)   #math, same as above
        if c > 359 or c < 1:    #0 to 360, same as above              
            c = 360
            #Output
            print
            print 6400, "mils =", int (c), "degrees"   
        else:
            print
            print a, "mils =", int (c), "degrees"
    else:
        #warning, mulligan
        winsound.Beep(440, 500)
        print 
        print "*** There are only 6400 mils in a circle. Try again. ***"
    print
    print "-" * 38
    print

#define degrees to mils function        
def d2m(b):
    if b <= 360 and b > 0:          #get user input within given range
        a = 17.78
        c = round((b * a),0)        #convert and round to nearest mil
        if c >= 6400:               #set limit to 6400 mils
            c = 6400
            #Output
            print
            print b, "degrees =", int (c), "mils"
        else:
            print
            print b, "degrees =", int (c), "mils"
    elif b > -1 and b < 1:          #change 0 to 360 degrees
        b = 360
        a = 17.78
        c = round((b * a),0)        #math, same as above
        if c >= 6400:
            c = 6400
            #Output
            print
            print 360, "degrees =", int (c), "mils"
        else:
            print
            print b, "degrees =", int (c), "mils"
    else:
        #warning
        winsound.Beep(440, 500)
        print 
        print "*** There are only 360 degrees in a circle. Try again. ***"
    print
    print "-" * 38
    print

#Begin program
loop = 1
choice = 0
while loop == 1:
    choice = menu()                 #Menu function call
    if choice == 1:                 #If user chooses degrees to mils:
        #Output
        print
        print "Enter your azimuth in degrees (1 - 360)"
        print 
        d2m(input("Degrees: "))     #function call

    elif choice == 2:               #If user chooses mils to degrees:
        #Output
        print
        print "Enter your azimuth in mils (1 - 6400)"
        print 
        m2d(input("Mils: "))        #function call

    elif choice == 3:               #If user chooses quit, exit program
        loop = 0

    elif choice != 1 and choice != 2 and choice != 3:   #if user makes invalid menu choice:
        #warning
        winsound.Beep(440, 500)
        print
        print
        print
        print choice, "is not a valid choice."
        print
        print "Please choose from the available options."
        print
        print

print 
print "-" * 38
print 
print "Thank you for using Mil-Deg.py"
print
print 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:03:49.543

正如 Ashwini 在评论中提到的那样，您的`if-else`条件块实际上并不是一个循环，因此使用 while 循环应该回答您问题的程序流程部分。

就 elif 和一般优雅而言，考虑[这种使用函数字典处理多个选项的方法](http://bytebaker.com/2008/11/03/switch-case-statement-in-python/)；在这里你的少数选项当然没有必要，但它可能会给你一些关于 Python 如何将字典和函数作为类处理的练习。

从风格上讲，我建议使用换行符转义序列`\n`，而不是所有这些无关的打印语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:19:09.850

我稍微清理了您的代码并进行了以下更改：

1.  修复了您的打印报表
2.  修复了您的方法名称。方法名称应该是描述性的。字符可以自由输入，所以不要吝啬输入完整的单词。
3.  你的方法是打印输出和复制逻辑，所以我清理它们只返回值。这样，您以后可以在其他程序中使用这些方法。
4.  添加了一个辅助方法来检查用户的输入（再次停止重复/复制粘贴相同的代码）。
5.  我使用`format`字符串的功能来轻松打印计算。

结果如下：

```
import sys
import math
import winsound

#Define menu function
def menu():                     
    '''This function prints the main menu''' # this is a docstring for your method
    print "\nMils / Degrees Conversion Calculator"
    print "-" * 38
    print "\nOptions: "
    print "1\. Degrees to Mils\n"
    print "2\. Mils to Degrees\n"
    print "3\. Quit\n"
    print "-" * 20
    print "\n"

#Define mils to degrees function    
def mils_to_degrees(a): # use method names that make sense
    '''This function takes mils and converts them into degrees'''
    b = 17.78
    c = round((a / b),0)    #convert and round to nearest degree  
    if c > 359 or c < 1:    #change 0 degrees to 360               
        c = 360
    return (a,int(c))

#define degrees to mils function        
def degrees_to_mils(b):
    '''This method converts degrees to mils'''
    a = 17.78
    if b == 0:
        b = 360
    c = round((b * a),0)        #math, same as above
    if c > 6400:               #set limit to 6400 mils
        c = 6400
    return (b,c)

def check_input(user_input):
    '''Checks if the input is a number'''
    try:
        converted_number = int(user_input)
    except ValueError:
        return -1
    return converted_number

#Begin program
loop = True
while loop:
    menu()
    choice = int(raw_input("Choose your option: "))
    if choice not in [1,2,3]:
        winsound.Beep(440, 500)
        print choice, "is not a valid choice.\n"
        print "Please choose from the available options.\n"
        menu()
        choice = int(raw_input('Choose your option: '))

    if choice == 1:
        print "\nEnter your azimuth in degrees (0 - 360)\n"
        degrees = check_input(raw_input('Degrees: '))
        if degrees > 360 or degrees < 0:
            print 'Please enter a value between 0 and 360'
        else:
            result = degrees_to_mils(degrees) # function call
            print '{} degrees = {} mils'.format(*result)
            print "-" * 38

    elif choice == 2:               #If user chooses mils to degrees:
        print "\nEnter your azimuth in mils (1 - 6400)\n"
        mils = check_input(raw_input('Mils: '))
        if mils > 6400 or mils < 1:
            print 'Please enter a value between 1 and 6400'
        else:
            result = mils_to_degrees(mils)        #function call
            print '{} mils = {} degrees'.format(*result)
            print "-" * 38

    elif choice == 3: 
        loop = False

print "\n"
print "-" * 38
print "\nThank you for using Mil-Deg.py\n\n" 
```

# css - 菜单显示块未正确定位

> ID：14228828
> 
> 赞同：0
> 
> 时间：2013-01-09T05:32:04.830
> 
> 标签：css, css-float, displaytag, css-position

帮助！谁能告诉我这个菜单我做错了什么？我无法让它与其他菜单（向上滑动）保持一致，并且下拉菜单不会停留并且位于所有内容的后面。请帮助 :) 是我的网站。谢谢！！

[这是我的网站](http://joshuatrent.com)

（我也知道使用绝对定位不好，有没有人可以告诉我如何使该菜单在没有绝对定位的位置？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:38:15.903

我的网站也有类似的问题。对我有用的是我将控件的相关 css 的显示属性更改为继承，该属性以前是内联的。

```
#menu li
{
//      display:inline;
    display:inherit;
    margin-left: 10px;
    background-color: #FF3737;

} 
```

希望这可以帮助。

# ejb - 按类定位 LocalBean

> ID：14228830
> 
> 赞同：1
> 
> 时间：2013-01-09T05:32:28.903
> 
> 标签：ejb, ejb-3.1, openejb

我正在使用 JAX-WS 开发一个项目。

我需要这样做。（我什至不确定这是否可能）

假设有三个这样的 EJB。

```
public abstract class AbstractEjb<T extends A>

@Stateless
@LocalBean
public class ConcreteEjbB extends AbstractEjb<B>

@Stateless
@LocalBean
public class ConcreteEjbC extends AbstractEjb<C> 
```

目前我的端点看起来像这样

```
@WebService
public class ConcretEndpointB {

    @Ejb private ConcretEjbB;
}

@WebService
public class ConcretEndpointC {

    @Ejb private ConcretEjbC;
} 
```

我可以这样做吗？

```
public class AbstractEndpoint<T extends A> {

    public AbstractEndpoint(final Class<T> ejbType) {
        super();
        this.ejbType = ejbType;
    }

    @WebMethod
    public String echo(@WebParam final String message) {

        //return ejb.echo(message); // :(

        // now can I look up the actual ejb instance with 'ejbType'?

        lookup(ejbType).echo(message);
    }

    private final Class<T> ejbType;

    @EJB protected AbstractEjb<T> ejb; // I don't think this gonna work.
}

@WebService
public class ConcretEndpointB extends AbstractEndpoint<B> {

    public ConcreteEndpointB() {
        super(ConcreteEjbB.class);
    }

    //public String echo(final String message) {
    //    return ejbB.echo(message);
    //}

    //@Ejb private ConcretEjbB ejbB;
}

@WebService
public class ConcretEndpointC extends AbstractEndpoint<C> {

    public ConcreteEndpointC() {
        super(ConcreteEjbC.class);
    }

    //public String echo(final String message) {
    //    return ejbC.echo(message);
    //}

    //@Ejb private ConcretEjbC ejbC;
} 
```

我认为这行不通。

我真正的问题是；是否有任何便携式和标准的方法来定位指定的实际混凝土豆`ejbClass`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:33:20.610

注入点“@EJB protected AbstractEjb ejb”不会像您期望的那样工作。您必须记住会发生类型擦除，因此您不能确定注入的 EJB 是否属于预期类型。在这种情况下，将抛出 ClassCastException。您可能希望重构代码以避免实际 EJB 实现上的泛型，并使用 Local 接口来扩展泛型抽象。可以在[http://blog.diabol.se/?p=353](http://blog.diabol.se/?p=353)找到对 EJB 和泛型的更详尽解释。

# javascript - 我所有的浏览器都没有发送原始标头

> ID：14228839
> 
> 赞同：21
> 
> 时间：2013-01-09T05:33:29.447
> 
> 标签：javascript, jquery, canvas, xmlhttprequest, cors

我正在尝试将图像加载到画布元素中，然后在 toDataURL() 中提取数据。

我的网站使用 Ruby on Rails 2.3 运行

我从 aws s3 提供图像。我有设置cors：

```
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
  <CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedMethod>HEAD</AllowedMethod>
    <MaxAgeSeconds>3000</MaxAgeSeconds>
    <AllowedHeader>*</AllowedHeader>
  </CORSRule>
</CORSConfiguration> 
```

我有一个画布元素：

```
<canvas id="explain_canvas"></canvas> 
```

好的，那么一些背景。我最初是用这样的代码尝试这个，其中drawing_image只是图像的url。

```
var outlineImage = new Image();
outlineImage.crossOrigin = '';
outlineImage.src = drawing_image;
outlineImage.onload = function() {
  var canvas = document.getElementById('explain_canvas');
  var context = canvas.getContext("2d");
  context.drawImage(outlineImage, 10, 10, 600, 150);
} 
```

但这不是发送原始标头。所以我想我会尝试通过 jquery 进行 ajax 调用

```
var outlineImage = new Image();
$(outlineImage).attr('crossOrigin', '');
$.ajax({
    type: 'get',
    url : drawing_image,
    contentType: 'image/png',
    crossDomain: 'true',
    success: function() {
        $(outlineImage).attr("src", drawing_image);
    },
    error: function() {
        console.log('ah crap');
    }
});

outlineImage.onload = function() {
 var canvas = document.getElementById('explain_canvas');
 var context = canvas.getContext("2d");

 context.drawImage(outlineImage, 10, 10, 600, 150);
} 
```

但仍然没有运气。我弄错了吗？该 jquery ajax 是否应该发送原始标头？

我查看了请求标头，这就是我在图像上得到的：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Host:em2-images.s3.amazonaws.com
Referer:http://localhost:3000/courses/18/quizzes/22/take
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11 
```

并且 jquery 错误与此：

```
XMLHttpRequest cannot load http://em2-images.s3.amazonaws.com/EM2_LF_A_5_item6.png. Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin.
ah crap 
```

对我来说奇怪的是 jquery 说明了来源，但它不在请求标头中。

这个 stackoverflow 问题[在这里](https://stackoverflow.com/questions/10324924/getting-image-with-ajax-access-control-request-headers)表明他想删除源头。好吧，他正在做与 jquery ajax 相同的调用并得到它。任何想法为什么我不是？

如果我重新加载页面，它会抓取缓存的图像并正常加载（请注意原始标头）并调用 toDataURL() 就好了。在我清除缓存后，在图像被缓存之前，它在第一次加载时将无法正常工作。

我开始怀疑 Rails 是否对它做了什么，但我不知道它会如何，因为这是一个 ajax 调用。但是谁知道呢，有人知道 Rails 是否可以做到这一点吗？

我已经在不同平台上的几个浏览器中尝试过这个。Chrome、Firefox、Safari、IE 9 和 10。在我的 Mac、PC 和 iPhone 上。他们中的任何一个都没有骰子。

-谢谢-

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-09T15:12:13.697

经过一番脑筋急转弯，我弄清楚了为什么我的浏览器没有发送原始标头。

首先是一点背景。这是针对 LMS 的，是测验的一部分。当老师编写测验时，他们将问题文本和图像添加到绘图画布中，让学生用绘图解释他们的答案。

您可以猜到，该图像首先被加载。它从学生视图中隐藏，我从该图像中获取 src url，并尝试使用 javascript 将其放入 canvas 元素中。

那么问题是第一次加载图像时，它没有加载 crossorigin 属性。因此没有原始标题。并且当画布元素尝试加载图像时，它被缓存而没有原始标头。当它试图让 cors 运行时，它会呕吐。在我看来，这可能是所有浏览器都需要修复的错误。但也许不是。

因此，简而言之，在进行 cors 时，请确保图像的第一次加载带有 crossorigin 属性以包含原始标头。当我...

是的，是时候重构了……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-22T03:24:25.100

我收到了这个 CORS 错误，并且在服务器端没有发送原始标头。

我的问题是我`crossOrigin = Anonymous`在我的图像标签中设置了。删除它为我解决了问题，并且 CORS 错误消失了。

# php - 如何在 elgg 中添加顶部栏菜单项？

> ID：14228840
> 
> 赞同：0
> 
> 时间：2013-01-09T05:33:40.460
> 
> 标签：php, elgg

我只是想在 elgg 的顶部栏默认菜单中添加一个项目。我只是在学习 PHP，我似乎无法弄清楚为什么这不起作用。当我用 chrome 检查元素时，我被告知它的类是`elgg-menu elgg-menu-topbar elgg-menu-topbar-default`：

```
elgg_register_menu_item('topbar', array(
    'name'  => 'qanda',
    'href'  => '/answers/',
    'title' => 'Questions and Answers'),
)); 
```

我正在使用 elggzone 的深色主题。

在解释了所有这些之后，我的问题很简单。如何在 elgg 中向此菜单添加项目？我想使用图像，例如`elgg-icon elgg-icon-mail`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:26:11.287

将以下内容添加到您的 start.php

```
elgg_register_menu_item('topbar', array(
   'name'  => 'manu_name',
   'href'  => 'menu_link',
   'title' => 'menu_title',
   'text'  => elgg_view_icon('menuMail'),
 )
); 
```

现在需要为类添加相应的css属性

```
.elgg-icon-menuMail{
   background: transparent url('path/to/an/image') no-repeat left;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:07:52.627

```
elgg_register_menu_item('topbar', array(
    'name'  => 'qanda',
    'href'  => '/answers/',
    'title' => 'Questions and Answers'),
    'item_class' => array('elgg-icon', 'elgg-icon-mail')
)); 
```

# ruby-on-rails - 在 Ruby 中比较时间的正确方法是什么？

> ID：14228846
> 
> 赞同：0
> 
> 时间：2013-01-09T05:34:02.707
> 
> 标签：ruby-on-rails, ruby, datetime

下面的例子让我很困惑。为什么比较返回false？

```
require 'active_support/time'

time1 = Time.new.utc.end_of_day  # 2013-01-09 23:59:59 UTC
time2 = Time.parse(time1.to_s)   # 2013-01-09 23:59:59 UTC

time1 == time2                   # false
time1.eql?(time2)                # false 
time1.equal?(time2)              # false 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:37:52.370

`time2`是从`time1`缺少信息的字符串表示生成的。即，微秒。

```
require 'active_support/time'

time1 = Time.new.utc.end_of_day  # => 2013-01-09 23:59:59 UTC
time2 = Time.parse(time1.to_s)   # => 2013-01-09 23:59:59 UTC

time1.usec # => 999999
time2.usec # => 0 
```

## 解决方法：

如果您不需要微秒精度，则可以将两个时间戳都舍入到秒。

```
time1.to_i == time2.to_i # => true 
```

# c# - 如何在 MVC4 中进行 ajax 调用

> ID：14228849
> 
> 赞同：5
> 
> 时间：2013-01-09T05:34:24.910
> 
> 标签：c#, jquery, asp.net-mvc-4

我是 MVC4 的新手。我必须创建一个登录名验证。写入字符串后，当我们退出文本框时，它应该显示它是否可用。

查看代码是：

```
@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            @Html.TextBox("textbox1")
            @Html.TextBox("txtTest")
        </div>
    </section>
}
@section scripts{
    <script type="text/javascript">
        $(document).ready(function(){
            $('#textbox1').blur(function(){
                alert("a");
            });
        });
    </script>
} 
```

现在代替`alert("a")`，我将不得不采取行动。该操作将包含数据库检查。

控制器代码：

```
public class HomeController : Controller
    {
        public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

        return View();
    }
        public ActionResult SearchUser()
        {
            string ExistsCheck;
            SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["conn"].ToString());
            SqlDataAdapter da = new SqlDataAdapter();
            SqlCommand cmd = new SqlCommand();
            DataTable dt = new DataTable();
            cmd = new SqlCommand("sp_UserName_Exist_tbl_UserDetails", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@UserName", Request.Form["textbox1"]);
            da.SelectCommand = cmd;
            da.Fill(dt);
            if (dt != null && dt.Rows.Count > 0 && dt.Rows[0][0].ToString().ToLower() == "exists")
            {
                ExistsCheck = "Exists";
            }
            else
            {
                ExistsCheck = "Available";
            }
            return View();
        }
    } 
```

`SearchUser()`现在我的问题是当我们从 textbox1 出去时如何调用这个动作并将其显示到同一个页面中。

请有任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:11:37.287

**JavaScript**

```
@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <table>
                <tr>
                    <td>
                        @Html.TextBox("textbox1")
                    </td>
                    <td>
                        <div id="regTitle"></div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        @Html.TextBox("txtTest")
                    </td>
                </tr>
            </table>
        </div>

    </section>
}
@section scripts{
<script type="text/javascript">
    $(document).ready(function () {
        $('#textbox1').blur(function () {
            var params = { userName: $(this).val() };
            $.ajax({
                url: "Home/SearchUser",
                type: "get",
                data: { userName: $("#textbox1").val() },
                success: function (response, textStatus, jqXHR) {
                    if (response.IsExisting) {
                        // User name is existing already, you can display a message to the user
                        $("#regTitle").html("Already Exists")
                    }
                    else {
                        // User name is not existing
                        $("#regTitle").html("Available")
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("error");
                },
                // callback handler that will be called on completion
                // which means, either on success or error
                complete: function () {
                    }
            });
        });
    });
</script>
} 
```

**控制器方法**

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Mvc4_Ajax.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

            return View();
        }

        public ActionResult About()
        {
            ViewBag.Message = "Your app description page.";

            return View();
        }

        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }
        [HttpGet]
        public ActionResult SearchUser(string userName)
        {
            SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["conn"].ToString());
            SqlDataAdapter da = new SqlDataAdapter();
            SqlCommand cmd = new SqlCommand();
            DataTable dt = new DataTable();
            cmd = new SqlCommand("sp_UserName_Exist_tbl_UserDetails", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@UserName", userName);
            da.SelectCommand = cmd;
            da.Fill(dt);
            var isExisting = dt != null && dt.Rows.Count > 0 && dt.Rows[0][0].ToString().ToLower() == "exists";
            return Json(new { IsExisting = isExisting }, JsonRequestBehavior.AllowGet);            
        }
    }
} 
```

*   我建议使用 ORM（实体框架或 Nhibernate）
*   即使您使用的是存储过程，也要小心 SQL 注入： [http ://www.troyhunt.com/2012/12/stored-procedures-and-orms-wont-save.html](http://www.troyhunt.com/2012/12/stored-procedures-and-orms-wont-save.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:32:04.870

你正在重新发明轮子。MVC 提供了一个接口[——IClientValidatable——](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable%28v=VS.98%29.aspx)来完成这个。几乎所有的 MVC 表单验证都可以通过属性属性的组合来完成（即 [必需的] 服务器端和具有非侵入式验证的客户端）、IClientValidatable（客户端）和 IValidatable（服务器端）。这是一个完整的验证示例 - [MVC3 - Custom Client-Side Validation with Unobtrusive Ajax - a Complete Example](http://www.falconwebtech.com/post/2012/04/21/MVC3-Custom-Client-Side-Validation-with-Unobtrusive-Ajax.aspx)

# c# - 用根深蒂固的数据列表填充树视图

> ID：14228850
> 
> 赞同：0
> 
> 时间：2013-01-09T05:34:31.650
> 
> 标签：c#, .net, treeview, sql-server-2008-r2

我有一个名为 Department 的表，其中包含 3 列 [DepartmentID、ParentDepID、DepartmentName]。每个部门可能有一个父部门（ParentDepID），它可以有一个父级，依此类推。我想将此数据加载`sql-server`到`treeview`.

这是一个虚构的数据示例

DepID ------ ParentID -------- 名称

1----------------空------------医院
A 2-----------------1 --------------外科
3科----------------癌症科
4 ------------------1-------------心脏病
5---------------- -2--------------脑外科
6-----------------2-------------- ChildBirth
7-----------------5--------------UpperBrainSurgery
8-------------- ---5--------------下脑外科

这可以更深入（n）次，我想将这些数据加载到我的树视图中。
***到目前为止我尝试了什么？***不幸的是，我不知道该怎么做，所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:47:33.230

```
 // Manage Tree View Nodes in RunTime
            // In order to manage a node you should set a key for each node
            // in your case records id's could be fine
            treeView1.Nodes.Add("RootNode1Key","Root Node1");
            treeView1.Nodes.Add("RootNode2Key", "Root Node2");
            // adds a node in runtime with title Root Node
            //Now add a Child to "Root Node 2"
            // first find the node and make a pointer to it :^)
            TreeNode FoundedNode;
            FoundedNode = treeView1.Nodes.Find("RootNode2Key", true)[0];
            // if you create a unique key for each node the find function returns
            // a tree node array with only one node and you access it like above 
            // else you retrieve many records of TreeNode
            FoundedNode.Nodes.Add("RootNode2Childe1", "Root Node2 Child 1");
            // hey now you added a child node to RootNode2
            // you want to add a child for it in depth 
            // 2 ways :
            // 1: yous find method  treeView1.Nodes.Find("RootNode2Childe1", true)[0];
            // 2: Following
            FoundedNode.Nodes["RootNode2Childe1"].Nodes.Add("RootNode2Childe1Child1", "my parent is RootNode2Childe1"); 
```

现在，如果您想删除一个，很容易，如下所示

```
private void button2_Click(object sender, EventArgs e)
        {
            // i am sure you know how to add nodes now remove a node
            TreeNode FoundedNode;
            FoundedNode = treeView1.Nodes.Find("RootNode2Childe1Child1", true)[0];
            FoundedNode.Remove();
        } 
```

但我建议您在网上搜索有一些方法和更好的解决方案，您可以使用数据源，然后当一条记录添加到您的表中并删除一条记录时，您的树视图会更新，反之亦然

**向其他伊朗人和程序员提供该社区的会员资格 **

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:17:53.407

首先，您需要添加根节点（没有父节点的最基本的节点），然后添加子节点。此链接将帮助您：[Populate TreeView from DataBase](https://stackoverflow.com/questions/361661/populate-treeview-from-database)

# ruby-on-rails - 在不加载 ActiveRecord 的情况下测试 Rails 模块

> ID：14228851
> 
> 赞同：2
> 
> 时间：2013-01-09T05:34:34.333
> 
> 标签：ruby-on-rails, testing, rspec, rails-activerecord

我正在开发一个使用 RSpec 测试的 Rails 应用程序。在等待测试完成后，我遵循了[Gary Bernhardt 的建议](https://www.destroyallsoftware.com/screencasts/catalog/fast-tests-with-and-without-rails)和[Paul Annesley 的这篇内容丰富的帖子，](http://paul.annesley.cc/2012/03/fast-rspec-slash-rails-tiered-spec-helper-dot-rb/)并设置了一个分层的 spec_helper，我只加载我绝对需要的 Rails 部分，以缩短测试时间并提取功能到我单独测试的单独模块中。

这在一定程度上是可行的。问题是我有一个模块（`ActiveSupport::Concern`扩展`find_and_create_by_`. 到目前为止，我已经能够创建一个包含模块的虚拟类并对其进行测试，但现在我想将更多逻辑从我的 ActiveRecord 模型移动到模块中。

具体的例子是回调、验证器和方法委托之类的东西，所有这些都与我正在访问的 API 相关。

我现在被困在我的测试中有两个选择：

1.  存根和/或模拟我在模块中调用的每个 ActiveRecord 方法，这将使测试保持快速但可能使测试代码非常复杂，或者
2.  在测试中需要activerecord，让我的虚拟类继承`ActiveRecord::Base`并测试模块，就像我测试任何其他rails模型一样，这会更慢但保持测试代码干净。

后一个选项对我并不真正有吸引力，因为我在模块中隔离代码的全部原因是我想将它与 Rails 分开。我不是在这里寻找黑色或白色的答案，但有人会对这种情况的最佳实践有任何建议或指示吗？首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:57:00.917

对我来说加快测试过程的解决方案是结合 spork 和 guard，guard 实际上是监视和运行测试，但它会使你的过程加快。

我没有合适的文章，但你可以参考这个 gist on setting up the [spork with guard](https://gist.github.com/4304166)

这些是我使用的资源

[警卫](http://railscasts.com/episodes/264-guard?autoplay=true)

[叉子](http://railscasts.com/episodes/285-spork?autoplay=true)

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:03:46.587

选项 1 似乎很诱人，但恕我直言，它充满了危险。您需要做的嘲笑和存根的范围很像拉姆斯菲尔德谚语中的[“未知未知数”](http://en.wikipedia.org/wiki/There_are_known_knowns)之一。你最终会放弃所有的 ActiveRecord 吗？

即使你*可以*让它工作，它会容忍 ActiveRecord 未来的变化吗？您是否必须更新您的模拟/存根以跟上新版本？

我很想看到一个可以替代 ActiveModel/ActiveRecord 的模拟库来实现这个目的。我想说的是，除非你能够容忍花费大量时间来构建这样的东西，否则你最好选择选项 2。

# android - 三星 GT-I9300 中的传感器列表

> ID：14228852
> 
> 赞同：0
> 
> 时间：2013-01-09T05:34:35.283
> 
> 标签：android, android-sensors

请帮助。我正在尝试获取 android 设备的所有可用传感器。但是当我尝试从“GT_19300”获取时，它显示了下面给出的列表

```
 "LSM330DLC 3-axis Accelerometer
      AK8975C 3-axis Magnetic field sensor
      iNemoEngine Orientation sensor
      CM36651 Light sensor
      CM36651 Proximity sensor
      LSM330DLC Gyroscope sensor
      iNemoEngine Gravity sensor
      iNemoEngine Linear Acceleration sensor
      iNemoEngine Rotation_Vector sensor
      LPS331AP Pressure Sensor
      Rotation Vector Sensor
      Gravity Sensor
      Linear Acceleration Sensor
      Orientation Sensor
      Corrected Gyroscope Sensor" 
```

我觉得这个列表有一些重复的名字。我想知道这是 GT_19300 中可用的所有传感器还是重复。如果我使用的是陀螺仪传感器，我想使用哪个。请分享您的有效答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:27:35.957

'iNemoEngine xxx'应该是一种'虚拟传感器'，就像谷歌在ICS中实现的'rotation_vector sensor'。

加速度计、磁性、光、接近、陀螺仪、压力、重力， **这些都是硬件传感器。**

其他像线性加速度计，旋转矢量，方向， **这些是使用传感器融合算法实现的软件。**

您不需要关心这些名称，但请尝试：

```
public void onSensorChanged(SensorEvent event) {
    switch(event.sensor.getType()) {

             case Sensor.TYPE_GYROSCOPE:
             // 
             // your processing
             break;
            }
     } 
```

对于 S3 上的陀螺仪，我相信您会收到来自“LSM330DLC 陀螺仪传感器”的数据。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:43:11.920

不知道它是否有帮助，但您可以安装一个名为“Elixir”的应用程序，其中列出了设备上的传感器。您可以在 Play 商店中搜索它。

# c++ - 如何在 Mac 终端中使用 C++11 支持编译 C++

> ID：14228856
> 
> 赞同：74
> 
> 时间：2013-01-09T05:34:49.563
> 
> 标签：c++, macos, c++11, terminal, g++

我想在 Mac Terminal 中编译 C++11 源代码但失败了。我试过了，`g++ -std=c++11`但没有任何效果。终端始终读取. 但是，类似的事情运行良好（当然 C++11 源代码无法通过）。`g++ -std=c++0x``g++ -std=gnu++11``g++ -std=gnu++0x``unrecognized command line option``g++ -std=gnu`

我应该使用哪个选项来打开 C++11 支持？

顺便说一句，我使用的命令行工具安装在 Xcode 中，我很确定它们是最新的。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-09T05:52:39.457

正如其他人指出的那样，您应该使用`clang++`而不是`g++`. 此外，您应该使用 libc++ 库而不是默认的 libstdc++；包含的 libstdc++ 版本相当旧，因此不包含 C++11 库功能。

```
clang++ -std=c++11 -stdlib=libc++ -Weverything main.cpp 
```

如果您尚未安装 Xcode 的命令行工具，则可以使用该`xcrun`工具运行编译器和其他工具，而无需执行此操作。

```
xcrun clang++ -std=c++11 -stdlib=libc++ -Weverything main.cpp 
```

此外，如果您想要禁用特定警告，您可以将其他标志传递给编译器以执行此操作。在警告消息的末尾，它会向您显示可以启用警告的最具体的标志。要禁用该警告，请`no-`在警告名称前添加。

例如，您可能不想要 c++98 兼容性警告。在这些警告结束时，它会显示标志`-Wc++98-compat`并禁用它们你 pass `-Wno-c++98-compat`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-09T05:47:28.693

XCode在编译时使用`clang`and ，而不是（假设您没有自定义东西）。相反，请尝试：`clang++``g++`

```
$ cat t.cpp
#include <iostream>

int main()
{
    int* p = nullptr;
    std::cout << p << std::endl;
}
$ clang++ -std=c++11 -stdlib=libc++ t.cpp
$ ./a.out 
0x0 
```

感谢 bames53 的回答指出我遗漏了`-stdlib=libc++`。

如果你想使用一些 GNU 扩展（也使用 C++11），你可以使用`-std=gnu++11`而不是`-std=c++11`，这将打开 C++11 模式并保持 GNU 扩展启用。

# oracle - GROUP BY CASE 语句输出

> ID：14228859
> 
> 赞同：0
> 
> 时间：2013-01-09T05:35:09.007
> 
> 标签：oracle, plsql, group-by

如何更改下面的脚本，以便我可以对 QTR_PCT 给出的值进行 GROUP BY YR、QTR、CODE 以获得所需的输出？

```
CREATE VIEW REPORTS.MY_VIEW
(YR, QTR, QTR_PCT, CODE)
AS 
SELECT YR, QTR
, CASE WHEN PCTPERF>=85 THEN ROUND(AVG(PCTPERF)) 
  ELSE NULL
  END QTR_PCT
, CODE
FROM ANOTHER_VIEW
GROUP BY YR, QTR, PCTPERF, CODE
ORDER BY CODE ASC; 
```

实际输出：（我没有包括 QTR_PCT 列）

```
+------+-----+------+
|   YR | QTR | CODE |
+------+-----+------+
| 2012 |   1 | 1039 | 
| 2012 |   1 | 1039 | 
| 2012 |   1 | 1039 |
| 2012 |   2 | 1039 | 
| 2012 |   2 | 1039 | 
| 2012 |   2 | 1039 |  
+------+-----+------+ 
```

期望的输出：（我没有包括列 QTR_PCT）

```
+------+-----+------+
|   YR | QTR | CODE |
+------+-----+------+
| 2012 |   1 | 1039 | 
| 2012 |   2 | 1039 | 
+------+-----+------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:11:35.840

我不确定我是否理解您的问题，但也许这会有所帮助，请尝试：

```
SELECT YR, qtr, code,max(qtr_pct)  aa
FROM (
SELECT YR, qtr, code, pctref,  CASE WHEN pctref >= 85 THEN round(avg(pctref) over (partition BY YEAR, qtr, code))
  ELSE NULL END qtr_pct
FROM ANOTHER_VIEW) t
GROUP BY YR, qtr, code; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/f3066/16)

# android - 从 Android 中的 youtube 视频中抓取帧？

> ID：14228860
> 
> 赞同：3
> 
> 时间：2013-01-09T05:35:19.057
> 
> 标签：android, android-mediaplayer, android-youtube-api

我正在使用 videoview 显示以下 youtube 视频

[http://www.youtube.com/watch?v=FovFG3N_RSU](http://www.youtube.com/watch?v=FovFG3N_RSU)

我不想看到黑屏，但想显示视频的中间帧作为视频的封面。

在 IOS 中，有

[https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetImageGenerator_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetImageGenerator_Class/Reference/Reference.html)这有帮助。

如何在android中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:37:43.923

这取决于设备的 android 版本和 flash 支持功能。除非您在设备上安装了 Flash，否则您无法使用 VideoView setVideoUri 方法播放视频（在将 http 链接解析为 uri 之后）。

下面的代码对我有用，但这对你来说是一种黑客行为。
将此代码用于未安装闪存的设备。

```
 public Uri getYoutubeUriForVideoId()
 {
        String YOUTUBE_VIDEO_INFORMATION_URL = "http://m.youtube.com/watch?ajax=1&layout=mobile&tsp=1&utcoffset=330&v="; 

        String USER_AGENT ="Mozilla/5.0 (Linux; U; Android 2.2.1; en-gb; GT-I9003 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1";

        HttpClient lClient = new DefaultHttpClient();
        HttpGet lGetMethod = new HttpGet(YOUTUBE_VIDEO_INFORMATION_URL + videoId);
        // setting the header as to get the high quality video url 
        lGetMethod.setHeader("User-Agent",UrlConstants.USER_AGENT);
        HttpResponse lResp = lClient.execute(lGetMethod);

        if(lResp == null)
            return null;
        String lInfoStr = EntityUtils.toString(lResp.getEntity(), "UTF-8");

        JSONObject videoInfoJson = new JSONObject(lInfoStr.substring(4,lInfoStr.length()));
        JSONObject content = (JSONObject) videoInfoJson.get("content");
        JSONObject video = (JSONObject) content.get("video");
        JSONArray fmt_stream_map = video.getJSONArray("fmt_stream_map"); 
        String url = fmt_stream_map.getJSONObject(0).getString("url");

        return Uri.parse(url); 
} 
```

# c++ - C++中前缀表达式的递归求值

> ID：14228868
> 
> 赞同：0
> 
> 时间：2013-01-09T05:36:14.310
> 
> 标签：c++, recursion, expression, prefix, evaluation

我正在尝试在 C++ 中编写一个递归算法，该算法评估以下类型的表达式：“运算符”“变量”“变量”并返回操作（例如：输入 = + 3 4；输出 = 7）。运算符只是基本的（+、-、*、/），变量是1到9之间的整数。问题是我不知道如何开始，使用什么方法。我不能使用堆栈或列表。

编辑：我正在学习 C++ 入门考试，所以我不允许使用任何复杂的方法来解决问题，我只能使用过程、循环、递归以及搜索和线程方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:47:16.667

由于您（显然）只处理二元运算符，因此这非常简单（有一个警告：尽管它不会显式使用堆栈，但几乎所有合理的递归实现都会隐式使用堆栈）。

基本模式如下所示：

```
int apply(char op, int a, int b) {
    switch (op) { 
       case '+': return a + b;
       case '-': return a - b;
       case '/': return a / b;
       case '*': return a * b;
       default: throw bad_operator(op);
    }
}   

int expression(char *&input) {
    char op = *input++;

    if (isdigit(op)) 
       return op - '0';

    int a = expression(input);
    int b = expression(input);
    return apply(op, a, b);
} 
```

快速测试程序：

```
#include <ctype.h>
#include <iostream>
#include <exception>
#include <string>

struct bad_operator : public std::logic_error { 
    bad_operator(char ch)  : 
        std::logic_error(std::string("Bad operator: ") + ch) 
    {}
};

int main() {
    char *input="+/42-43";
    std::cout << expression(input);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:52:11.193

这是一个使用递归的解决方案（表达式中不允许有空格）：

```
#include <cstdio>

int eval(const char *s, const char **outptr)
{
    int a, b, y;
    const char *out;

    switch (*s) {
    case '+':
        a = eval(s + 1, &out);
        b = eval(out, &out);
        y = a + b;
        *outptr = out;
        break;
    case '-':
        a = eval(s + 1, &out);
        b = eval(out, &out);
        y = a - b;
        *outptr = out;
        break;
    case '*':
        a = eval(s + 1, &out);
        b = eval(out, &out);
        y = a * b;
        *outptr = out;
        break;
    case '/':
        a = eval(s + 1, &out);
        b = eval(out, &out);
        y = a / b;
        *outptr = out;
        break;
    default: /* '0'...'9'assumed */
        y = *s - '0';
        *outptr = s + 1;
        break;
    }

    return y;
}

int main(int argc, char *argv[])
{
    const char *end;
    int x;

    x = eval(argv[1], &end);
    printf("%d\n", x);

    return 0;
} 
```

例子：

```
./eval +3+*45/62
26 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:44:54.180

试试这个方法。伪代码：

```
double Process(Parser & parser)
{
    Token token = parser.GetToken();

    if (token.Type == number)
        return (NumberToken)token.value;
    else if (token.Type == operator)
    {
        double left = Process(parser);
        double right = Process(parser);

        switch (OperatorToken)token.op:
        {
        case '+' :
            {
                return left + right;
            }
        // ...
        }
    }
} 
```

不过，使用堆栈更容易解决这类问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T05:48:17.143

假设您有一个输入迭代器（例如，指向输入字符串或向量迭代器的指针），您可以使用如下内容：

```
compute (input.iterator it) {
  if (it != input.end() and is_operator(*it)) {
     operator op = *it;
     int v1, v2;
     it++;
     v1 = is_operator(*it) ? compute(it) : *it;
     it++;
     v2 = is_operator(*it) ? compute(it) : *it;
     return operator_exec(op, v1, v2) 
  }
  return *it;
} 
```

# asp.net-mvc - 使用角色上的“授权”属性进行文件过滤器用户访问时我必须怎么做

> ID：14228871
> 
> 赞同：1
> 
> 时间：2013-01-09T05:36:21.057
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authorization

我在 asp.net MVC 3 上工作

```
[Authorize(Roles = "Admin,SubAdmin")]
public ActionResult AdminProfile()
{
    return View();
} 
```

asp.net MVC 如何理解上面的代码并按照 Role 正确过滤？角色没有从数据库中获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:39:58.547

如果要使用自己的模式，则必须使用 asp.net 提供的默认角色提供程序或实现自己的角色提供程序。您可以在此处阅读更多关于实现您自己的角色提供程序[http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)的信息。

另一种选择也可以是实现您自己的授权过滤器，它可能比实现一个完整的角色提供者更容易。

# ios - AdMob + 内容显示缓慢 + Google DFP

> ID：14228872
> 
> 赞同：2
> 
> 时间：2013-01-09T05:36:33.523
> 
> 标签：ios, admob

我在使用我的 iOS 应用实施 AdMob 时遇到了一点问题。

我有一个带有 UITableView 的 UIViewController 和底部的广告。

在 viewDidLoad 方法中，我请求加载广告。

当广告加载时，UITableView 会填满整个视图。广告加载时，会调用委托方法 adViewDidReceiveAd:(DFPBannerView *)bannerView。这是我调整广告和 UITableView 的框架的地方。

这一切都很好，除了一个小问题。

当调用 adViewDidReceiveAd:(DFPBannerView *)bannerView 时，我设置了框架，但广告仍然没有显示长达 5 秒。这在视觉上并不令人愉悦，因为一两秒钟 - 屏幕底部只有一个空白区域。

就好像 adViewDidReceiveAd:(DFPBannerView *)bannerView 在广告数据已加载但不是实际的“广告视图”时被调用。即在调用该方法后，它正在加载广告的 UIWebView。

这对任何人都有意义吗？任何人都可以帮忙吗？

谢谢。

更新：

**我应该提到我正在使用 Google DFP，然后连接到 AdMob 来查找广告。** 此后，我直接从 AdMob 使用 publisherID 测试了相同的代码。这解决了显示问题。

所以，我认为这将问题缩小到 Google DFP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T03:34:15.570

尝试在`init()`not 中添加广告`viewDidLoad`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:58:53.683

嗯，在某些情况下，设置请求`frame`的`GADBannerView`另一个广告，因此您可能会陷入发生这种情况的陷阱（当您设置的框架与请求的广告尺寸不同时）。执行此操作时，您能否检查是否有另一个请求发出？

您可以尝试隐藏`GADBannerView`并显示它以查看是否看到相同的延迟吗？

# java - 仅用于控制台应用程序 mac 的 Java jar 启动器

> ID：14228873
> 
> 赞同：0
> 
> 时间：2013-01-09T05:36:34.210
> 
> 标签：java, macos, launcher

我想捆绑我的 .jar 应用程序以在 mac os 上自动运行打开。它没有 GUI，因此需要从终端运行才能工作，但我需要将其提供给不想使用终端的其他人。我该怎么做呢？[我尝试了这里](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)看到的应用程序生成器，但它只在活动监视器上显示了几分之一秒，然后就消失了。有关我的 jar 文件的更多信息：它是在 netbeans 中构建的，因此它确实具有通过 ant 构建 jar 所需的所有文件夹/xml。它需要在 netbeans 构建项目时将一些额外的库复制到 lib 文件夹中。第三，它需要将临时文件存储在一个名为 assets 的文件夹中，该文件夹与 jar 文件位于同一文件夹中。如果需要，我可以更改数字 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:51:37.960

您的问题与在 Mac 上运行并没有太大关系 - 问题是您试图在没有控制台的情况下运行控制台应用程序。

[这](http://www.codeproject.com/Articles/328417/Java-Console-apps-made-easy)是在 GUI 窗口中提供控制台的一种方法示例，而不是在 shell（终端）中运行应用程序。

一旦你有了这个工作，你可以考虑将它包装在你指向的 Mac 特定的部署中。

为了便携性，您可能还需要考虑：

*   将你的类和你的 jar 依赖项中的所有类重新打包到一个大的“uber-jar”中——有几个工具可以做到这一点，包括 Maven 程序集插件

*   将临时文件存储在系统的默认临时文件位置（使用 File.createTempFile），而不是准确指定它们应该写入的位置。

# php - URL 重写在 IIS 7 上不起作用

> ID：14228875
> 
> 赞同：0
> 
> 时间：2013-01-09T05:36:53.573
> 
> 标签：php, iis-7, url-rewriting

我在 IIS 7 上部署了一个 PHP 站点并使用 URL 重写模块，但我的重写规则不起作用。以下是我想在浏览器中显示的实际网址和网址：

浏览器 URL： http: [//mydomain.com/myfolder](http://mydomain.com/myfolder)或[http://mydomain.com/myfolder/anytext](http://mydomain.com/myfolder/anytext)

实际网址： http: [//mydomain.com/myfolder/myfile.html](http://mydomain.com/myfolder/myfile.html)

以前我在 Wamp 服务器上使用带有 .htaccess 的 mod rewrite，下面是在 .htaccess 文件中定义的工作规则

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_URI} ^(.+)/$

RewriteRule ^(.+)/$  /$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^.*$ myfile.html [L] 
```

以下是我的 web.config 文件不起作用，请提出建议并帮助解决我的问题

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="Rewrite to myfile.html1">
                <match url="^(.+)/$" />
                <action type="Rewrite" url="/$1" />
            </rule>
        </rules>
        <rules>
            <rule name="Rewrite to myfile.html2">
                <match url="^.*$" />
                <action type="Rewrite" url="myfile.html" />
            </rule>
        </rules>
    </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:01:52.697

`.htaccess`规则实际上是在做两件不同的事情。首先，它确保以`/`（斜杠）结尾的请求被重定向到没有斜杠结尾的 URL。第二条规则将对不存在文件的所有请求重写为`myfile.html`.

这应该有效（未经测试）：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="Removing trailing slash" stopProcessing="true">
                <match url="^(.+)/$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Redirect" url="/{R:1}" />
            </rule>
        </rules>
        <rules>
            <rule name="Rewrite to myfile.html" stopProcessing="true">
                <match url="^.*$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                </conditions>
                <action type="Rewrite" url="/myfile.html" />
            </rule>
        </rules>
    </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:09:57.577

经过一番点击并尝试后，这个 web.config 对我有用

```
<?xml version="1.0" encoding="UTF-8"?>
   <configuration>
      <system.webServer>
         <directoryBrowse enabled="true" />
         <rewrite>
            <rules>
               <rule name="Rule1" stopProcessing="true">
                  <match url="^(.+)/$" />
                  <conditions>
                     <add input="{URI}" pattern="^(.+)/$" />
                     <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                  </conditions>
                  <action type="Rewrite" url="/$1" />
               </rule>
               <rule name="Rule2" stopProcessing="true">
                  <match url="^myfolder/.*$" />
                  <conditions>
                     <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                  </conditions>
                 <action type="Rewrite" url="myfolder/myfile.html" />
              </rule>
           </rules>
        </rewrite>
     </system.webServer>
  </configuration> 
```

# javascript - 需要从父Div获取数组中的所有标签内容

> ID：14228877
> 
> 赞同：1
> 
> 时间：2013-01-09T05:37:37.853
> 
> 标签：javascript, jquery, html

这是以下示例[http://jsfiddle.net/coderslay/FBcKP/](http://jsfiddle.net/coderslay/FBcKP/)

我有一个`div`这样的

```
<div id="test">
  <label>aaaaaaaaaaaa</label>
  <label>bbbbbbbbbbbb</label>
  <label>cccccccccccc</label>
  <label>dddddddddddd</label>
</div> 
```

我为获取内容而编写的 jquery 在这里

```
var values = $('#test').find('label').text() 
```

我需要得到`values`一个包含 aaaaaaaaaaa,bbbbbbbbb,ccccccccc,dddddddddd 的数组 如何使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T05:39:08.943

你可以使用`map`方法。

```
var arr = $('#test label').map(function(){
   return $(this).text();
   // return this.textContent || this.innerText
}).get(); 
```

[http://jsfiddle.net/ekAB5/](http://jsfiddle.net/ekAB5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:41:46.473

您可以使用它`append`来执行此操作

```
var values = $('#test').find('label').append(",").text() 
```

[http://jsfiddle.net/FBcKP/1/](http://jsfiddle.net/FBcKP/1/)

# javascript - 猫鼬的继承

> ID：14228882
> 
> 赞同：16
> 
> 时间：2013-01-09T05:38:15.240
> 
> 标签：javascript, node.js, inheritance, express, mongoose

您好，我需要在 mongoose 库中继承我的模式。有完整的插件吗？或者我自己应该怎么做？

我还需要从 Base 模式继承所有 pre、post、init 中间件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-17T21:53:11.210

对于其他寻求此功能的人，Mongoose 3.8 现在具有通过鉴别器功能的模式继承：

[https://github.com/LearnBoost/mongoose/pull/1647](https://github.com/LearnBoost/mongoose/pull/1647)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-09T05:41:26.320

您可能想看看使用 Mongoose 插件：

*   [http://mongoosejs.com/docs/plugins.html](http://mongoosejs.com/docs/plugins.html)

一个可以“开箱即用”的插件在这里：

*   [https://github.com/briankircho/mongoose-schema-extend](https://github.com/briankircho/mongoose-schema-extend)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-17T03:35:16.350

我知道这是一个老歌，但我来到这里寻找同一个问题的答案，最终做了一些不同的事情。我不想使用鉴别器，因为所有文档都存储在同一个集合中。

模型库.js

```
var db = require('mongoose');

module.exports = function(paths) {
    var schema = new db.Schema({ 
        field1: { type: String, required: false, index: false },
        field2: { type: String, required: false, index: false } 
    }, { 
        timestamps: { 
            createdAt: 'CreatedOn', 
            updatedAt: 'ModifiedOn' 
        } 
    });

    schema.add(paths);

    return schema;
}; 
```

新模型.js

```
var db = require('mongoose');
var base = require('./ModelBase');
var schema = new base({
    field3: { type: String, required: false, index: false },
    field4: { type: String, required: false, index: false }
});

db.model('NewModelItem', schema, 'NewModelItems'); 
```

所有 4 个字段都将在 NewModelItem 中。将 ModelBase 用于要使用相同字段/选项/等的其他模型。在我的项目中，我把时间戳放在那里。

Schema.add 在 Schema 构造函数中被调用，因此模型应该像在原始构造函数调用中发送所有字段一样进行组装。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-28T18:47:52.723

如果你想使用**不同的集合**：

```
function extendSchema (Schema, definition, options) {
  return new mongoose.Schema(
    Object.assign({}, Schema.obj, definition),
    options
  );
} 
```

用法：

```
const UserSchema = new mongoose.Schema({
  firstname: {type: String},
  lastname: {type: String}
});

const ClientSchema = extendSchema(UserSchema, {
  phone: {type: String, required: true}
}); 
```

[https://www.npmjs.com/package/mongoose-extend-schema](https://www.npmjs.com/package/mongoose-extend-schema)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T17:37:10.917

检查此框架的模型是否适用于 Mongoose：

[https://github.com/marian2js/rode#models-with-mongoose](https://github.com/marian2js/rode#models-with-mongoose)

这是使用此框架扩展 shemas 的示例：

首先在一个新的“rode model”中定义你的模式：

```
var rode = require('rode');

var User = rode.Model.extend({
  name: 'User',
  schema: {
    name: {
      type: 'String',
      unique: true
    },
    email: String,
    password: String
  }
}); 
```

现在你应该调用extend方法：

```
var Admin = User.extend({
  name: 'Admin',
  // The schema for admins is the schema for users + their own schema
  schema: {
    lastAccess: Date
  }
}); 
```

但是请记住从框架 github 中提取的此注释：“两个模型将在 MongoDB 上共享相同的集合。扩展模型的文档将具有一个属性 _type 来区分。”

# python - 显示字符串对齐

> ID：14228884
> 
> 赞同：3
> 
> 时间：2013-01-09T05:38:26.617
> 
> 标签：python

我有一个程序可以告诉我两个字符串之间的距离，它工作得很好。

例如

```
word 1 = hello
word 2 = hi 
```

从一个到另一个的成本为 5（用*e替换**i*是 2，并且有 3 个插入）。

 *基本上，插入成本为 1，删除成本为 1，替换成本为 2。单词也可以在字符串中打乱以降低成本。

我需要一种方法来记住在什么时候发生了什么操作，以便我可以显示对齐方式。

例如

```
wax
S M S(substitute move substitute, cost of 4)
and 
```

有什么想法或提示吗？

```
import sys
from sys import stdout

def  minEditDist(target, source):

    # Length of the target strings set to variables
    n = len(target)
    m = len(source)

    distance = [[0 for i in range(m+1)] for j in range(n+1)]

    for i in range(1,n+1):
        distance[i][0] = distance[i-1][0] + insertCost(target[i-1])

    for j in range(1,m+1):
        distance[0][j] = distance[0][j-1] + deleteCost(source[j-1])

    for i in range(1,n+1):
        for j in range(1,m+1):
           distance[i][j] = min(distance[i-1][j]+1,
                                distance[i][j-1]+1,
                                distance[i-1][j-1]+subCost(source[j-1],target[i-1]))

    # Return the minimum distance using all the table cells
    return distance[i][j]

def subCost(x,y):
    if x == y:
        return 0
    else:
        return 2

def insertCost(x):
    return 1

def deleteCost(x):
    return 1

# User inputs the strings for comparison
# Commented out here because cloud9 won't take input like this
# word1 = raw_input("Enter A Word: ")
# word2 = raw_input("Enter The Second Word: ")
word1 = "wax"
word2 = "and"
word1x = word1
word2x = word2
# Reassign variables to words with stripped right side whitespace
word1x = word1x.strip()
word2x = word2x.strip()

if(len(word1) > len(word2)):
    range_num = len(word1)
else:
    range_num = len(word2)

# Display the minimum distance between the two specified strings
print "The minimum edit distance between S1 and S2 is: ", minEditDist(word1x,word2x), "!"
print (word1x)
print (word2x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:58:12.200

你可以从这样的事情开始。

我已经为“S”添加了正确的数据。

```
path = []

def  minEditDist(target, source):

    # Length of the target strings set to variables
    n = len(target)
    m = len(source)

    distance = [[0 for i in range(m+1)] for j in range(n+1)]

    for i in range(1,n+1):
        distance[i][0] = distance[i-1][0] + insertCost(target[i-1])

    for j in range(1,m+1):
        distance[0][j] = distance[0][j-1] + deleteCost(source[j-1])

    for i in range(1,n+1):
        for j in range(1,m+1):
           sc = subCost(source[j-1],target[i-1])
           distance[i][j] = min(distance[i-1][j]+1,
                                distance[i][j-1]+1,
                                distance[i-1][j-1]+sc)
           if distance[i-1][j]+1 > distance[i-1][j-1]+sc and distance[i][j-1]+1 > distance[i-1][j-1]+sc:
               path.append("S");

    print path

    # Return the minimum distance using all the table cells
    return distance[i][j]

def subCost(x,y):
    if x == y:
        return 0
    else:
        return 2

def insertCost(x):
    path.append("I")
    return 1

def deleteCost(x):
    path.append("D")
    return 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:54:22.243

您正在计算[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)（或者更好的是*加权 Levenshtein 距离*，因为您的操作成本不同：`I`/ `D`=> 1，`M`=> 2）。

要获得操作的顺序，一种常见的方法是进行某种回溯。

考虑以下方法`backtrace`*：

```
...
# Return the minimum distance using all the table cells
def backtrace(i, j):
    if i>0 and j>0 and distance[i-1][j-1] + 2 == distance[i][j]:
        return backtrace(i-1, j-1) + "S"
    if i>0 and j>0 and distance[i-1][j-1] == distance[i][j]:
        return backtrace(i-1, j-1) + "M"
    if i>0 and distance[i-1][j] + 1 == distance[i][j]:
        return backtrace(i-1, j) + "D"
    if j>0 and distance[i][j-1] + 1 == distance[i][j]:
        return backtrace(i, j-1) + "I"
    return ""

return distance[i][j], backtrace(i, j) 
```

我将它作为嵌套方法添加到您的方法中，因此我不必将您的距离矩阵`distance`作为参数传递给它。

现在你的脚本输出

> S1 和 S2 之间的最小编辑距离为：(4, 'SMS') !

* * *

另请注意，如果您想在 python 中使用 Levenshtein 距离，[谷歌代码上有一个名为 pylevenshtein的快速实现](http://code.google.com/p/pylevenshtein/)

* * *

* 可能不是 100% 准确 :-)*

# magento - 按颜色对类别产品进行排序会在 Magento 中引发异常

> ID：14228886
> 
> 赞同：0
> 
> 时间：2013-01-09T05:38:28.660
> 
> 标签：magento

我们具有按类别、价格和颜色对类别中的产品进行排序的功能 -[屏幕截图](http://cl.ly/image/330N3M1t3s0v)。类别和价格排序工作完美，但是，颜色抛出错误：

```
You cannot define a correlation name 'color_range_idx' more than once 
```

我能够追踪堆栈跟踪，但它看起来像 jibbersih，因为我是 Magento 开发的新手。堆栈跟踪可以在这里找到：[https ://gist.github.com/4490917](https://gist.github.com/4490917)

如果有帮助，颜色是自定义产品属性，我正在使用 Magento Enterprise v1.12.0.2

[我在这里](https://stackoverflow.com/questions/10524017/magento-layered-navigation-you-cannot-define-a-correlation-name-mycustomattrib)遇到了类似的问题，但我不确定它是否是正确的修复，或者我将如何使用提供的方法修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:04:18.400

**app/Mage/Catalog/Model/Resource/Layer/Filter/Attribute.php**有问题

 **用以下替换你的类，它的问题应该得到解决。

```
class Mage_Catalog_Model_Resource_Layer_Filter_Attribute extends Mage_Core_Model_Resource_Db_Abstract
{
/**
 * Initialize connection and define main table name
 *
 */
protected function _construct()
{
    $this->_init('catalog/product_index_eav', 'entity_id');
}

/**
 * Apply attribute filter to product collection
 *
 * @param Mage_Catalog_Model_Layer_Filter_Attribute $filter
 * @param int $value
 * @return Mage_Catalog_Model_Resource_Layer_Filter_Attribute
 */
public function applyFilterToCollection($filter, $value)
{

    $filterSingleton = FilterSingleton::singleton();

    if (!isset($filterSingleton->return)) {

        $collection = $filter->getLayer()->getProductCollection();
        $attribute  = $filter->getAttributeModel();
        $connection = $this->_getReadAdapter();
        $tableAlias = $attribute->getAttributeCode() . '_idx';
        $conditions = array(
            "{$tableAlias}.entity_id = e.entity_id",
            $connection->quoteInto("{$tableAlias}.attribute_id = ?", $attribute->getAttributeId()),
            $connection->quoteInto("{$tableAlias}.store_id = ?", $collection->getStoreId()),
            $connection->quoteInto("{$tableAlias}.value = ?", $value)
        );

        $collection->getSelect()->join(
            array($tableAlias => $this->getMainTable()),
            join(' AND ', $conditions),
            array()
        );

        $filterSingleton->return = $this;

        return $this;

    } else {
        return $filterSingleton->return;
    }
}

/**
 * Retrieve array with products counts per attribute option
 *
 * @param Mage_Catalog_Model_Layer_Filter_Attribute $filter
 * @return array
 */
public function getCount($filter)
{
    // clone select from collection with filters
    $select = clone $filter->getLayer()->getProductCollection()->getSelect();
    // reset columns, order and limitation conditions
    $select->reset(Zend_Db_Select::COLUMNS);
    $select->reset(Zend_Db_Select::ORDER);
    $select->reset(Zend_Db_Select::LIMIT_COUNT);
    $select->reset(Zend_Db_Select::LIMIT_OFFSET);

    $connection = $this->_getReadAdapter();
    $attribute  = $filter->getAttributeModel();
    $tableAlias = sprintf('%s_idx', $attribute->getAttributeCode());
    $conditions = array(
        "{$tableAlias}.entity_id = e.entity_id",
        $connection->quoteInto("{$tableAlias}.attribute_id = ?", $attribute->getAttributeId()),
        $connection->quoteInto("{$tableAlias}.store_id = ?", $filter->getStoreId()),
    );

    $select
        ->join(
            array($tableAlias => $this->getMainTable()),
            join(' AND ', $conditions),
            array('value', 'count' => new Zend_Db_Expr("COUNT({$tableAlias}.entity_id)")))
        ->group("{$tableAlias}.value");

    return $connection->fetchPairs($select);
    }
}
class FilterSingleton {

static private $instance;

public $return = null;

    private function __construct() {

}

static public function singleton() {
     if (!isset(self::$instance)) {
        $c = __CLASS__;
        self::$instance = new $c;
    }

    return self::$instance;
}
} 
```

[http://aceph.tumblr.com/post/21851233473/magento-you-cannot-define-a-correlation-name](http://aceph.tumblr.com/post/21851233473/magento-you-cannot-define-a-correlation-name)**

# java - 使用 Apache POI 的空白列和行的空指针

> ID：14228887
> 
> 赞同：2
> 
> 时间：2013-01-09T05:38:47.173
> 
> 标签：java, apache-poi

我需要有关反复出现的问题的帮助。早些时候我问了一个类似的问题，但得到了部分答案。[这里](https://stackoverflow.com/questions/14227108/getting-null-pointer-exception-in-creating-cell-in-apache-poi)的问题 问题是，每次我想在没有任何数据或空白的行上写入时，我总是会遇到空指针错误问题。我的临时解决方案是用数据填充这些行，这样我就可以在每一列上写一些东西。一位帮助我的志愿者给出的解决方案也只是暂时的。我对我的代码做了一些改动（如下）。空指针错误指向带有双星号的行。

```
public void writeSomething(XSSFWorkbook wb){
        for (String elem: listOfSheetNames){
            if (elem.equals("Sheet2")){

                sheet = wb.getSheet(elem);
                XSSFRow row = sheet.getRow(2);
                **XSSFCell cell = row.getCell(3, Row.CREATE_NULL_AS_BLANK );

                if (cell.getCellType() == Cell.CELL_TYPE_BLANK){
                    cell = row.createCell(3);
                    cell.setCellType(Cell.CELL_TYPE_STRING);
                    cell.setCellValue("this was blank");
                }
            }
        }
    } 
```

我继续研究这个问题，我看到他们正在使用这里指出的 MissingCellPolicy[我](https://stackoverflow.com/questions/4929646/how-to-get-an-excel-blank-cell-value-in-apache-poi)继续尝试该代码但它不起作用所以我检查了 Apache Docs 并且他们有 Row.Create_Null_as_Blank 但不确定它是否是与 MissingCellPolicy.Create_Null_as_Blank 相同，或者后者只是在以前的 poi 版本中使用。尽管这应该解决了有关空白列或行的问题。我仍然收到空指针异常错误。如果这有帮助，我正在使用 Apache poi 3.9 版。非常感谢任何帮助。谢谢

## 更新 1

我使用 jims 解决方案更新了我的代码。我添加了一个方法来检查一行是否存在。但我仍然有两个星号的相同错误显示。这是我的代码：

```
public void writeSomething(XSSFWorkbook wb){
        for (String elem: listOfSheetNames){
            if (elem.equals("Sheet2")){
                int y=1;
                sheet = wb.getSheet(elem); 
                XSSFRow row = null; //create row variable outside if scope

                if (isRowEmpty(sheet.getRow(4))== false){
                    row = sheet.createRow(4);
                }   

                **XSSFCell cell = row.getCell(y, Row.CREATE_NULL_AS_BLANK );

                if (cell.getCellType() == Cell.CELL_TYPE_BLANK){
                    cell = row.createCell(y);
                    cell.setCellType(Cell.CELL_TYPE_STRING);
                    cell.setCellValue("Hooooy this was blank");
                }

            }
        }
    } 
```

## isRowEmpty

```
public boolean isRowEmpty(Row row){

        if (row == null){
            return true;
        }
        else {
            return false;
        }
    } 
```

## 更新 2

我为我的代码找到了一种解决方法，以防万一有人发现它有用。我没有使用 row.getCell 因为我总是遇到 NUll 指针错误。请参阅下面的代码

```
public void writeSomething(XSSFWorkbook wb){
        for (String elem: listOfSheetNames){
            if (elem.equals("Sheet2")){
                int y=1; //sets column number
                sheet = wb.getSheet(elem); 
                XSSFRow row = null; //create row variable outside if scope

                if (isRowEmpty(sheet.getRow(19))== false){
                    row = sheet.createRow(19);
                    XSSFCell cell = row.createCell(y);
                    cell.setCellType(Cell.CELL_TYPE_STRING);
                    cell.setCellValue("Hooooy this was blank");
                }   

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:04:39.663

如果您需要的单元格不存在，则必须*使用*

```
HSSFRow.createCell(int columnIndex, int type) 
```

同样，如果该行不存在，您可以使用

```
HSSFSheet.createRow(int rownum) 
```

XSSF 也有相同的方法。

# c# - 将 Drawing.Color 转换为 HTML 颜色值

> ID：14228894
> 
> 赞同：7
> 
> 时间：2013-01-09T05:39:07.297
> 
> 标签：c#, asp.net, html

我已经问过这个问题了，但是我用错了措辞。

我`GetRandColor()`在服务器上有一个返回`System.Drawing.Color`对象的方法。

我想要的是能够在页面加载时使用它来设置 html 属性。举个例子，

```
<html>
<body bgcolor="#GetRandColor()">
<h1>Hello world!</h1>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T05:50:00.237

您不能`System.Drawing.Color`从函数中返回对象，因为浏览器只能理解文本。因此，您应该返回颜色的字符串表示形式，以 RGB、HEX 格式或您拥有的格式。

您的方法应如下所示：

```
 protected string GetRandColor()
 {
     return ColorTranslator.ToHtml(Color.Red);
 } 
```

您可以这样设置表单的背景：

```
<body style="background-color:<%=GetRandColor()%>;"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T05:43:38.100

如果 GetRandColor() 在静态类中，这应该有效：

```
<body bgcolor="<%= System.Drawing.ColorTranslator.ToHtml(ClassName.GetRandColor()) %>"> 
```

您可能需要在类名之前添加类的命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T05:51:20.587

您可以借助内联表达式来做到这一点：**[.NET Framework 中的内联表达式](http://support.microsoft.com/kb/976112)**

**显示表达式** `(<%= ... %>)`

```
bgcolor="<%= System.Drawing.ColorTranslator.ToHtml(GetRandColor()) %>" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T06:03:09.970

您可以使用**ColorTranslator**将 Drawing.Color 转换为 HTML 颜色值。例如，

```
System.Drawing.Color c = System.Drawing.ColorTranslator.FromHtml("#F5F7F8"); 

String strHtmlColor = System.Drawing.ColorTranslator.ToHtml(c); 
```

此链接也会对您有所帮助：msdn.microsoft.com/en-us/library/system.drawing.colortranslator.fromhtml.aspx

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T05:41:35.753

```
public string GetRandHtmlColor(){

    System.Drawing.Color c = GetRandColor();
    return System.Drawing.ColorTranslator.ToHtml(c);
} 
```

# php - 如何在 PHP 和 RegEX 中获取某个字符后的值？

> ID：14228902
> 
> 赞同：0
> 
> 时间：2013-01-09T05:39:43.117
> 
> 标签：php, regex

如何获取字符串中某个字符（在我的情况下为“@”）之后的值？我有这个代码，但它不起作用；将只有字母数字字符和/或空格。

```
$data = 'Someone @Will Be There';

preg_match ("/@([a-zA-Z0-9 ]*)/", $data, $match);
return $match [0]; 
```

如果字符串中存在@，我只想得到“将在那里”。
谢谢

**编辑：**非常抱歉我的错误。我不想删除那个'@'，我需要在那***之后***得到什么。再次对不起，人们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:48:50.263

更改了我的代码以反映您的更改...

```
$data = 'Someone @Will Be There';
$character = '@';

if ($string = stringAfterCharacter($data, $character)){
    echo $string;
}else{
    echo "Character: '$character' not found.";
}

function stringAfterCharacter($data, $character='@'){
    if (($pos = strpos($data, $character)) !== false){
        return substr($data, $pos + 1);
    }else{
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:42:50.860

您可以`strpos()`为此目的使用该功能。它在字符串中搜索子字符串 - 或至少是一个字符 - 并返回该子字符串的第一个位置。

```
$position = strpos('I am @ the penthouse', '@'); 
```

当在字符串中找不到子字符串时，该方法返回 false。

`strpos()`php 中存在一些常见的陷阱。检查以下示例：

```
if(!strpos('@stackoverflow', '@')) {
  echo 'the string contains no @';
 } 
```

尽管字符串包含 at ，但将输出“@”未找到。那是因为 PHP 中的弱数据类型。上一个`strpos()`调用将返回 int(0)，因为它是字符串中的第一个字符。但这将使 if 失败，除非您这样做：

```
if(strpos('@stackoverflow', '@') === FALSE) {
   echo 'the string contains no @';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:43:52.940

最好可以使用简单的字符串替换方法试试这个，

```
$data = 'Someone @Will Be There';
$result = str_replace('@','',$data); // result is: Someone Will Be There 
```

不要使用这个：

```
//preg_match ("/@([a-zA-Z0-9]*)/", $data, $match);
//return $match [0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T05:45:07.053

您不需要使用通常很慢的正则表达式来执行此操作。只需这样做： return str_replace('@', '', $data);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T06:01:22.093

这将从字符串中删除任何符号

```
$data = 'Someone @Will Be There';
echo preg_replace("/([^A-Za-z0-9 ]*)/", '', $data); //Add character in the pattern if not to be filtered 
```

**输出：**

```
Someone Will Be There 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T06:26:12.420

你的问题似乎模棱两可，如果你想从字符串中删除'@'，那么你可以使用 str_replace 的答案。如果您想要 '@' 之后的值，您应该在自己的代码中检查 $match[1]。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T09:40:03.387

第一组在`$match[1]`，不在`$match[0]`

将您的代码更改为：

```
$data = 'Someone @Will Be There';
preg_match ("/@([a-zA-Z0-9 ]*)/", $data, $match);
return $match[1]; 
```

# java - 如何优雅地终止小程序？

> ID：14228904
> 
> 赞同：0
> 
> 时间：2013-01-09T05:39:49.963
> 
> 标签：java, browser, applet, exit

我的小程序应该从可能动态生成的 html 文件中获取外部参数。

```
<param name="type1" value="value1">
<param name="type2" value="value2"> 
```

必须检查这些参数的有效性`Applet.init()`

```
String type1 = getParameter("type1");
String type2 = getParameter("type2");
if (type1 == null || type2 == null) .... 
```

他们错了我该怎么办？**可以手动****调用吗？`Applet.destroy()`**

据我所知`stop`，`destroy`应该由浏览器调用，而不是小程序本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:47:55.723

`Applet.destroy()`只能由 JVM 调用。

这里最好的策略是重定向到一个显示参数以及它们有什么问题的页面。为此，请使用以下内容：

```
URL brokenParams = new URL(this.getDocumentBase(), 
    "badparams.html?type1=" + type1 + "&type2=" + type2);
this.getAppletContext().showDocument(brokenParams); 
```

这将产生以下效果：

*   小程序页面将消失，取而代之的是..
*   `badparam.html`它显示了参数并描述了问题。然后..
*   当 JVM 浏览器组合。确定是正确的时间，`Applet.destroy()`将调用该方法。（根据我的估计，“正确的时间”通常是 30-60 秒后。）

# android - Android：条形图可点击

> ID：14228908
> 
> 赞同：2
> 
> 时间：2013-01-09T05:39:58.813
> 
> 标签：android, graph, achartengine

我正在使用`aChartEngine`Library ，我能够绘制可点击的条形图。但是`(getCurrentSeriesAndPoints)` 当我单击条形图的负值时，库提供的方法返回 NULL。正值是可点击的，但负值不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:23:29.073

我刚刚在 SVN 中解决了这个问题。您可以根据[此](http://code.google.com/p/achartengine/source/checkout)页面签出代码并运行`ant dist`以构建包含此修复程序的最新 achartengine.jar 文件。

[或者，您可以在此处](http://www.achartengine.org/download/)下载中间版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:42:39.463

我可以在这里向您推荐不错的教程。

[`Bar Chart in Android With out any Built in jars`](http://rakhi577.wordpress.com/2012/10/11/bar-chart-in-android-with-out-any-built-in-jars/).

这里不需要任何内置的 jar 文件。你可以只实现条形图custom.try这个。我想它可以帮助你

# java - 如何在 Java 中将 List 转换为 Json

> ID：14228912
> 
> 赞同：61
> 
> 时间：2013-01-09T05:40:32.373
> 
> 标签：java, json

如何在Java中将通用列表转换为json。我有这样的类..

```
public class Output
{
    public int Keyname { get; set; }
    public Object  outputvalue{ get; set; }  //outvalue may be even a object collection
}

List<Output> outputList = new List<Output>(); 
```

我想在 Java 中将 outputList 转换为 json。转换后我会将它发送给客户端。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-01-09T05:50:30.873

为此使用 GSON 库。这是示例代码

```
List<String> foo = new ArrayList<String>();
foo.add("A");
foo.add("B");
foo.add("C");

String json = new Gson().toJson(foo ); 
```

这是 Gson 的 Maven 依赖项

```
<dependencies>
    <!--  Gson: Java to Json conversion -->
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.2.2</version>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

或者你可以直接从这里下载jar并放到你的类路径中

[http://code.google.com/p/google-gson/downloads/detail?name=gson-1.0.jar&can=4&q=](http://code.google.com/p/google-gson/downloads/detail?name=gson-1.0.jar&can=4&q=)

要将 Json 发送到客户端，您可以使用 spring 或在简单的 servlet 中添加此代码

> response.getWriter().write(json);

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-09T05:43:50.383

为此，您需要一个外部库。

```
JSONArray jsonA = JSONArray.fromObject(mybeanList);
System.out.println(jsonA); 
```

[Google GSON](http://code.google.com/p/google-gson/)就是这样的库之一

您还可以在[此处](http://www.kodejava.org/browse/59.html)查看有关将 Java 对象集合转换为 JSON 字符串的示例。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-10T14:58:09.200

jackson 提供了非常有用且轻量级的 API 来将 Object 转换为 JSON，反之亦然。请找到下面的示例代码来执行操作

```
List<Output> outputList = new ArrayList<Output>();
public static void main(String[] args) {
    try {
        Output output = new Output(1,"2342");
        ObjectMapper objectMapper = new ObjectMapper();
        String jsonString = objectMapper.writeValueAsString(output);
        System.out.println(jsonString);
    } catch (JsonProcessingException e) {
        e.printStackTrace();
    }
} 
```

Jackson API 还有许多其他功能和不错的文档。您可以参考以下链接：[https](https://www.journaldev.com/2324/jackson-json-java-parser-api-example-tutorial) ://www.journaldev.com/2324/jackson-json-java-parser-api-example-tutorial ..

要包含在项目中的依赖项是

```
 <!-- Jackson -->
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.5.1</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>2.5.1</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-annotations</artifactId>
        <version>2.5.1</version>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T07:34:26.087

试试这个：

```
public void test(){
// net.sf.json.JSONObject, net.sf.json.JSONArray    

List objList = new ArrayList();
objList.add("obj1");
objList.add("obj2");
objList.add("obj3");
HashMap objMap = new HashMap();
objMap.put("key1", "value1");
objMap.put("key2", "value2");
objMap.put("key3", "value3");
System.out.println("JSONArray :: "+(JSONArray)JSONSerializer.toJSON(objList));
System.out.println("JSONObject :: "+(JSONObject)JSONSerializer.toJSON(objMap));
} 
```

[你可以在这里](http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONObject.html)找到 API 。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-09T05:45:42.713

查看[谷歌 gson](http://code.google.com/p/google-gson/)库。它提供了丰富的 api 来处理这个问题，并且使用起来非常简单。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-10T14:39:41.983

从 Java2s 下载 java-json.jar 然后使用 JSONArray 构造函数

```
List myList = new ArrayList<>();    
JSONArray jsonArray = new JSONArray(myList);
System.out.println(jsonArray); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-28T15:23:27.617

为了简单和结构良好，请使用 SpringMVC。就是这么简单。

```
@RequestMapping("/carlist.json")
public @ResponseBody List<String> getCarList() {
    return carService.getAllCars();
} 
```

参考和信用：[https ://github.com/xvitcoder/spring-mvc-angularjs](https://github.com/xvitcoder/spring-mvc-angularjs)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-13T00:52:00.073

使用带有 setPrettyPrinting 和 disableHtml 的 GSONBuilder 以获得良好的输出。

```
String json = new GsonBuilder().setPrettyPrinting().disableHtmlEscaping().
                            create().toJson(outputList  );
                    fileOut.println(json); 
```

# python - 格式化 PyYAML dump() 输出

> ID：14228915
> 
> 赞同：23
> 
> 时间：2013-01-09T05:40:51.290
> 
> 标签：python, yaml, pyyaml

我有一个字典列表，我想对其进行序列化：

```
list_of_dicts = [ { 'key_1': 'value_a', 'key_2': 'value_b'},
                  { 'key_1': 'value_c', 'key_2': 'value_d'},
                  ...
                  { 'key_1': 'value_x', 'key_2': 'value_y'}  ]

yaml.dump(list_of_dicts, file, default_flow_style = False) 
```

产生以下内容：

```
- key_1: value_a
  key_2: value_b
- key_1: value_c
  key_2: value_d
(...)
- key_1: value_x
  key_2: value_y 
```

但我想得到这个：

```
- key_1: value_a
  key_2: value_b
                     <-|
- key_1: value_c       | 
  key_2: value_d       |  empty lines between blocks
(...)                  |
                     <-|
- key_1: value_x
  key_2: value_y 
```

PyYAML[文档](http://pyyaml.org/wiki/PyYAMLDocumentation)非常简短地讨论了`dump()`参数，并且似乎没有关于这个特定主题的任何内容。

手动编辑文件以添加换行符大大提高了可读性，之后结构仍然加载得很好，但我不知道如何让转储方法生成它。

一般来说，除了简单的缩进之外，有没有办法更好地控制输出格式？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-15T09:16:54.767

使用库没有简单的方法来做到这一点（yaml dumper 语法树中的节点对象是被动的，不能发出这个信息），所以我最终得到了

```
stream = yaml.dump(list_of_dicts, default_flow_style = False)
file.write(stream.replace('\n- ', '\n\n- ')) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-15T14:16:41.810

PyYAML 文档只简单地谈论`dump()`论点，因为没有太多要说的。PyYAML 不提供这种控制。

为了允许在加载的 YAML 中保留这些空（和注释）行，我开始开发[`ruamel.yaml`](https://pypi.python.org/pypi/ruamel.yaml)库，它是停滞的 PyYAML 的超集，具有 YAML 1.2 兼容性，添加了许多功能并修复了错误。与`ruamel.yaml`您一起可以：

```
import sys
import ruamel.yaml

yaml_str = """\
- key_1: value_a
  key_2: value_b

- key_1: value_c
  key_2: value_d

- key_1: value_x  # a few before this were ellipsed
  key_2: value_y
"""

yaml = ruamel.yaml.YAML()
data = yaml.load(yaml_str)
yaml.dump(data, sys.stdout) 
```

并获得与输入字符串完全相同的输出（包括注释）。

您还可以从头开始构建所需的输出：

```
import sys
import ruamel.yaml

yaml = ruamel.yaml.YAML()
list_of_dicts = yaml.seq([ { 'key_1': 'value_a', 'key_2': 'value_b'},
                           { 'key_1': 'value_c', 'key_2': 'value_d'},
                           { 'key_1': 'value_x', 'key_2': 'value_y'}  ])

for idx in range(1, len(list_of_dicts)):
    list_of_dicts.yaml_set_comment_before_after_key(idx, before='\n')

ruamel.yaml.comments.dump_comments(list_of_dicts)
yaml.dump(list_of_dicts, sys.stdout) 
```

使用转换`yaml.seq()`是创建一个允许通过特殊属性附加空行的对象所必需的。

The library also allows preservation/easy-setting of quotes and literal style on strings, format of int (hex, octal, binary) and floats. As well as separate indent specification for mappings and sequences (although not for individual mappings or sequences).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-31T12:28:04.843

虽然有点笨拙，但我的目标与 OP 相同。我通过子类化 yaml.Dumper 解决了它

```
from yaml import Dumper

class MyDumper(Dumper):

  def write_indent(self):
    indent = self.indent or 0
    if not self.indention or self.column > indent \
        or (self.column == indent and not self.whitespace):
      self.write_line_break()

    ##########$#######################################
    # On the first level of indentation, add an extra
    # newline

    if indent == 2:
      self.write_line_break()

    ##################################################

    if self.column < indent:
      self.whitespace = True
      data = u' '*(indent-self.column)
      self.column = indent
      if self.encoding:
        data = data.encode(self.encoding)
      self.stream.write(data) 
```

**你这样称呼它：**

```
print dump(python_dict, default_flow_style=False, width=79, Dumper=MyDumper) 
```

# php - 选择查询时格式化日期列

> ID：14228920
> 
> 赞同：4
> 
> 时间：2013-01-09T05:41:23.043
> 
> 标签：php, mysql, select, date-format

这是我的日期数据；从 : 09-01-2013 到 : 22-01-2013 (*格式固定*)

如何将列日期格式化为`send_date_time`..`d-m-Y`以下是我的查询：

```
$filter = "and DATE_FORMAT(send_date_time,'%d-%m-%Y') BETWEEN '08-01-2012 12:00:00' and '22-01-2013 12:00:00' "; 
```

但是当我尝试使用这个（*下面*）查询时，上面的查询失败了，是的可以工作：

```
$filter = "and send_date_time BETWEEN '2013-01-08 12:00:00' and '2013-01-22 12:00:00' "; 
```

完整查询

```
$get_transaction_history  = ("select * from `sms_sendlog` where store_id='".$store."' ".$filter." order by id desc"); 
```

柱子：

```
Colum Name : send_date_time
e.g  value : 2012-10-22 10:19:36 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T05:45:41.830

它应该像

```
$filter = "and send_date_time BETWEEN DATE_FORMAT('08-01-2012 12:00:00','%d-%m-%Y') AND DATE_FORMAT('22-01-2013 12:00:00','%d-%m-%Y') "; 
```

[阅读更多](http://www.w3schools.com/sql/func_date_format.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:05:51.193

使用**STR_TO_DATE**函数而不是使用**DATE_FORMAT**函数。

试试这个：

```
$filter = "and send_date_time BETWEEN STR_TO_DATE('08-01-2012 12:00:00','%d-%m-%Y') AND STR_TO_DATE('22-01-2013 12:00:00','%d-%m-%Y') "; 
```

检查此链接[**MySQL 日期时间函数：STR_TO_DATE**](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

# python - Python - 两个数据集的所有成对组合有效

> ID：14228926
> 
> 赞同：1
> 
> 时间：2013-01-09T05:41:50.197
> 
> 标签：python, merge, dataset

我想创建一个由两个 csv 列的所有成对组合组成的数据集。我正在使用 Stata，但它只允许有 2,147,483,647 个观察值。我对python不是很了解。我可以用 Python 做到这一点，而且最好是有效的吗？我可以做一些循环，但我想这将需要很长时间。

这是一个示例：我有这样的 a.csv（作为一列：）：1 2 3 我有这样的 b.csv（作为一列：） a b c 我希望将其作为输出：1，a 1，b 1,c 2,a 2,b 2,c ... a.csv 和 b.csv 每个都有大约 700 万条记录。有什么帮助吗？谢谢！

编辑：如果我可以成对地做一个“组内”，那也将非常有用。想象一下 a.csv 和 b.csv 都有另一列，比如性别。我想做所有成对的男性和所有成对的女性（当然要复杂得多。属性数据有100多个类别）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:36:40.653

Python 擅长这些事情。如果两个 csv 文件非常大并且 python 为其提供迭代。

```
for line1 in open('really_big_file.csv'):
    for line2 in open('really_big_file.csv'):
        combine(line1, line2) 
```

Python会迭代每一行数据并释放它，它是自动的。

# android - 在android中使用RTSP的视频流

> ID：14228928
> 
> 赞同：1
> 
> 时间：2013-01-09T05:41:56.050
> 
> 标签：android, rtsp

我已使用以下代码在 videoview 中运行 rtsp 链接

```
 videoView.setMediaController(null);
    str = "rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov";
    uri = Uri.parse(str);
    videoView.setVideoURI(uri);
    videoView.requestFocus();
    videoView.start(); 
```

它在 Android2.3.3 中运行良好，但在 Android 4.0 中抛出异常

```
java.io.IOException: setDataSource failed.: status=0x80000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:21:44.790

我使用了在 4.1 上运行良好的 VideoView，我使用了 MediaController。这是我的代码：

```
webView.setVideoURI(Uri.parse(videoUrl));

        // media control 
        webView.requestFocus();  
        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(webView); 
        webView.setMediaController(mediaController);  

        webView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
                // TODO Auto-generated method stub
                Log.d("VideoActivity","onPrepareListener");
                try {
                    progressDialog.dismiss();
                    webView.start();
                }
                catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }
            }
        }); 
```

# c# - 通过代码将几个可用类之一设置为 Json DeserializeObject

> ID：14228931
> 
> 赞同：0
> 
> 时间：2013-01-09T05:42:09.110
> 
> 标签：c#, json, windows-phone-7

我有几节课

```
public class JsonWorldRanking
{
    public int no { get; set; }
    public string deviceid { get; set; }
    public string name { get; set; }
    public int clicks { get; set; }
    public int country { get; set; }
}

public class JsonNationalRanking
{
    public int no { get; set; }
    public string deviceid { get; set; }
    public string name { get; set; }
    public int clicks { get; set; }
}

public class JsonCountryRanking
{
    public int no { get; set; }
    public int countryIndexRanking { get; set; }
    public int clicks { get; set; }
} 
```

我想根据特定条件选择这三个类中的任何一个进行 Json 反序列化操作。因此，例如，如果使用 switch case，我如何使下面的 WHICHLASS 代表正确的类？就像是

```
switch value

{
  case 0:
  WHICHCLASS = JsonWorldRanking;
  break;

  case 1:
  WHICHCLASS = JsonNationalRanking;
  break;

  case 2:
  WHICHCLASS = JsonCountryRanking
  break;
}

...

var deserialized = JsonConvert.DeserializeObject<List<WHICHCLASS>>(r.EventArgs.Result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:16:01.580

我认为创建 T 的通用方法会更好。但这也可以

```
Type destinationType = null;

switch value

{
  case 0:
  destinationType  = typeof(JsonWorldRanking);
  break;

  case 1:
  destinationType  = typeof(JsonNationalRanking);
  break;

  case 2:
  destinationType  = typeof(JsonCountryRanking);
  break;
}

...

Type listType = typeof(List<>);
Type[] typeArgs = {destinationType};
type requiredGenericListType = listType.MakeGenericType(typeArgs);

var deserialized = JsonConvert.Deserialize(r.EventArgs.Result, requiredGenericListType ); 
```

# android - 错误从 .apk 文件解码 xml 文件

> ID：14228940
> 
> 赞同：1
> 
> 时间：2013-01-09T05:43:07.750
> 
> 标签：android, xml, apk

```
Exception in thread "main" brut.androlib.AndrolibException: Multiple resources:
spec=0x7f030010 layout/abs__screen_action_bar, config=[DEFAULT] 
```

`xml`从`apk file`. _ 请在下面查看我的 Cmd 屏幕

![命令屏幕](../Images/1c4ab22d49909937c6b389cd23d83c27.png)

帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:36:36.110

对我来说它的解码正确。

我已经添加了参考图像。![在此处输入图像描述](../Images/df472f62f719c42e0b1d8829b8c8220e.png)

# css - 设置溢出：高度为 100% 的自动

> ID：14228944
> 
> 赞同：7
> 
> 时间：2013-01-09T05:43:36.437
> 
> 标签：css

在我的页面中，我有一个基于其父级的高度为 100% 的元素；但是，我希望这个元素在必要时自动垂直滚动。这是[我的例子](http://jsfiddle.net/qng67/)。

我做不到。

我添加了以下CSS：

```
height:100%;
max-height:100%; 
```

事实上，我想要的是确保`.content`始终在`.container`. 像这样：

![图。](../Images/94a9d6a63f578a49d1a7a95519cc6a0f.png)

（顺便说一句，在上图中，我使用`max-height:400px`应该避免的，因为它的最大高度应该基于 的高度`.container`）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:57:00.313

这接近您正在寻找的解决方案，尽管您可能需要调整填充等以获得更美观的外观：http: [//jsfiddle.net/GJ5yM/](http://jsfiddle.net/GJ5yM/)

新的 CSS：

```
 .content{
        height:100%;
        position: absolute;
    }
    .windowcontent{
        background-color: white;
        padding: 10px;
        max-height:100%;
        position:relative;
        overflow-y:auto;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:27:58.127

看看这个小提琴。[http://jsfiddle.net/siyakunde/qng67/1/](http://jsfiddle.net/siyakunde/qng67/1/) 这是你想要的吗？

我给了

```
max-height:100%;
overflow:scroll; 
```

到内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:54:20.303

希望这是您正在寻找的：

[http://jsfiddle.net/CjV6k/1/](http://jsfiddle.net/CjV6k/1/)

CSS：

```
#scrollFrameWrap { 
  width: 400px;
  margin: 20px auto;
  background: #000; 
  border-radius: 8px; 
  box-shadow: 0px 1px 15px 0 #fff inset;
  padding: 3px 10px 10px;
}
.title {
  text-align: center;
  font-size: 12px;
  color: #aaa;
}
#parentElement {
  height: 150px;
  padding-bottom: 10px;
  margin-bottom:10px;
}
#scrollFrame {
  width: 380px;
  height: 100%;
  overflow: scroll;
  overflow-x: hidden;
  background: #fff;
  border-radius: 4px;
  padding: 10px;
} 
```

的HTML：

```
<div id="scrollFrameWrap">
  <p class="title">Title</p>
  <div id="parentElement">
    <div id="scrollFrame">
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
      <p>This is a sentence, hope you like it.</p>
    </div>
  </div>
</div> 
```

看看有没有帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T07:16:22.907

只设置

```
 overflow-y: scroll; 
```

并设置任何你想要的高度。

# oracle - 错误的日期插入数据块

> ID：14228949
> 
> 赞同：0
> 
> 时间：2013-01-09T05:44:00.383
> 
> 标签：oracle, oracle9i, oracleforms

我的问题与日期类型有关，当我想为列分配日期时，我使用下面的代码。D_REPORT := to_date(sysdate,'DD/MM/YYYY HH:MI:SS AM');

但有时我会收到像 31/01/0013 12:24:36 这样的日期！

我不知道为什么有时年份会显示为 0013，并且仅适用于少数系统，即使我使用 sysdate，也会出现同样的问题。

我想和你确认一下，其他人也有同样的问题吗？我该如何解决？因为即使我使用 to_date 或只是简单地编写 sysdate 也会发生同样的问题，我不知道问题的根本原因是什么。

我正在使用 oracle form 6i，我的数据库是 oracle 9i。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:35:59.673

您不应该`to_date`在日期上使用（并且`sysdate`是日期）。

TO_DATE 将 a`varchar2`作为参数，因此 oracle 会根据 NLS_DATE_FORMAT 将您的日期（sysdate）隐式转换为 varchar2，这可能并非`'DD/MM/YYYY HH:MI:SS AM'`在每个环境中都存在。

如果 NLS_DATE_FORMAT 是 'DD/MM/YY HH:MI:SS AM' 那么你会得到 year=0013，因为真正发生的事情是这样的：

```
SELECT  to_date(TO_CHAR(sysdate, 'DD/MM/YY HH:MI:SS AM'),'DD/MM/YYYY HH:MI:SS AM')
FROM dual; 
```

因此，您只需要插入`sysdate`并在显示时（将其转换为字符串）使用`to_char(sysdate,'DD/MM/YYYY HH:MI:SS AM')`

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/5806)

# css - 如何编码 .css 文件？

> ID：14228951
> 
> 赞同：0
> 
> 时间：2013-01-09T05:44:23.327
> 
> 标签：css, encoding

我创建了一个网站。我想把文件交给我的客户。客户还可以查看和更改样式。我想对该文件进行编码，以便没有人可以替换它。您能给我一个更好的解决方案，以便只有我可以更改样式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:06:12.380

CSS 是一种纯文本格式，浏览器需要将其作为 CSS 读取。您无法限制对它的访问并使其仍然可用。如果浏览器可以下载和使用该文件，那么其他人也可以。你可以通过去除所有不需要的空白和类似的东西来稍微混淆内容，但这很容易用 CSS 漂亮的打印机来逆转。即使实际上加密文件并使用 Javascript 对其进行后处理也无济于事，因为无论您的解密脚本做什么，最终结果仍然需要是纯 CSS。

所以：不，不是。您可能可以通过混淆来阻止真正愚蠢的客户，但您实际上无法保密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:48:23.617

我不认为你可以对 CSS 文件进行编码并让它仍然被浏览器读取——但我可能错了。您应该将 CSS 文件托管在单独的服务器上，这样会更容易。例如。如果您的客户站点是 example.com，而您的站点是 awesome.com，那么在 awesome.com 上托管 CSS 文件，只有您可以进行编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:01:11.750

您可以做的是对您的 .css 脚本进行 base64 编码

```
<html><head>
<title>Hello World!</title>

<link rel="stylesheet" href="data:text/css;base64,Ym9keSB7IHdpZHRoOiA5NjBweDsgbWFyZ2luOiBhdXRvO30gcCB7IGZvbnQtZmFtaWx5OiBWZXJkYW5hO30" type="text/css">

</head><body>
<p>Hello World!</p>
</body></html> 
```

使用类似[http://www.base64encode.org/的网站](http://www.base64encode.org/)

# vb.net - 相同的变量被传递给多个线程

> ID：14228955
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:44:50.550
> 
> 标签：vb.net, multithreading, threadpool, datarow

嗨，请检查此代码

```
For icnt As Integer = 1 To 100
        Me.SetText(icnt)
        Dim gd As String = ""
        Dim gl As String = ""
        Dim cr As String = ""
        Dim lr As String = ""
        Dim tbs As String = ""
        Dim srt As String = ""
        Dim fp As String = ""
        Dim ky As String = ""
        Dim prx As String = ""

        Dim rnd As New Random
        Dim scrpurl As String = ""
        Dim bldstr As New List(Of String)

        scrpurl = GlobalVariables.domain(rnd.Next(0, GlobalVariables.googledomain.Count - 1)) & "/search?q="
        scrpurl = scrpurl & GlobalVariables.prints(rnd.Next(0, GlobalVariables.footprints.Count - 1))
        scrpurl = scrpurl & GlobalVariables.words(rnd.Next(0, GlobalVariables.keywords.Count - 1))
        scrpurl = scrpurl & GlobalVariables.gl(rnd.Next(0, GlobalVariables.googlegl.Count - 1))
        scrpurl = scrpurl & GlobalVariables.cr(rnd.Next(0, GlobalVariables.googlecr.Count - 1))
        scrpurl = scrpurl & GlobalVariables.lr(rnd.Next(0, GlobalVariables.googlelr.Count - 1))
        scrpurl = scrpurl & GlobalVariables.tbs(rnd.Next(0, GlobalVariables.googletbs.Count - 1))
        scrpurl = scrpurl & GlobalVariables.start(rnd.Next(0, GlobalVariables.googlestart.Count - 1))

        MsgBox(scrpurl)

        bldstr.Clear()
        bldstr.Add(scrpurl)

        Dim dr3 As DataRow() = dtse.Select("seurl ='" & scrpurl & "'", "se")
        If (dr3.Count = 0) Then
            Dim w1 As WaitCallback = New WaitCallback(AddressOf setdata)
            ThreadPool.QueueUserWorkItem(w1, bldstr)
        End If

    Next 
```

谁能告诉我，当我显示消息框时，我看到 scrpurl 和 setdata 的不同值添加了正确的 100 个唯一行。

当我不显示它时，setdata 会添加 100 行相同的 scrpurl。我知道应该做一些事情，以便每个 setdata 获得不同的 scrpurl，但我在这里遗漏了一些东西。谁能帮帮我？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:17:14.687

`Random`每次迭代循环时，您都在创建一个新对象。如果将`Dim rnd As New Random`行向上移动到 for 循环之前，它将正常工作。

这是因为计算机生成的随机数并不是真正随机的——它们只是*看起来*是随机的。它的工作方式是首先确定一个“种子”值。然后，它使用一个数学公式，输入种子值加上一个附加序列值，就可以得到下一个（看似）随机数。因此，只要种子值相同，它生成的随机数序列将始终相同。`Random`类生成它的种子值的方式是基于创建对象的当前时间。因此，如果您同时创建一堆`Random`对象，它们都会生成完全相同的随机数序列。

因此，最佳实践通常是`Random`在应用程序启动时创建一个对象，然后在任何地方重复使用同一个对象，而不是每次需要时都创建一个新对象。

# jsp - 为什么在jsp中将字符串放在花括号中

> ID：14228959
> 
> 赞同：0
> 
> 时间：2013-01-09T05:44:58.930
> 
> 标签：jsp

在编辑现有的 JSP 页面时，我发现了一些与此类似的代码：

```
<script type="text/javascript" src="<mytaglib:url 
                 p1="blah" p2="${'/some/path/file.js'}" />">
</script> 
```

`mytaglib:url`生成一个以 p2 结尾的 URL。

为什么路径字符串放在花括号内？我还看到了不使用大括号的相同代码，而且它似乎工作正常。这是一些在这里没有用的习惯吗？我很确定我可以在这里删除大括号，但是在其他情况下是否会发生将表达式语言用于纯字符串有用的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:15:00.090

`${}`是 JSP 表达式语言的表达式。JSP 表达式语言 (EL) 可以轻松访问存储在 JavaBeans 组件中的应用程序数据。

[在此处](http://www.oracle.com/technetwork/java/unifiedel-139263.html#Expression_Language_Beginnings_)了解有关 JSP 表达式语言的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:16:25.467

它是jsp表达式语言。当 JSP 编译器`${}`在属性中看到表单时，它会生成代码来评估表达式并替换表达式的值。它类似于`<%=%>`在jsp中。

你会从[这里得到一个想法](http://www.tutorialspoint.com/jsp/jsp_expression_language.htm)

在这种情况下，${} 接受一个不需要计算任何内容的字符串，因此返回相同的字符串。相反，您可以指定一个变量名，在这种情况下，它会评估变量的值并返回相同的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:41:38.530

我终于能够询问我正在修改的应用程序的一些初始作者。他们都不能告诉我，这似乎实际上是无用的（更糟糕的是：它有一点性能开销），最初是错误地完成的，并且以某种方式在代码库的许多地方复制......

# iphone - ios在另一个视图的tableview中导航和显示数据

> ID：14228960
> 
> 赞同：1
> 
> 时间：2013-01-09T05:45:01.043
> 
> 标签：iphone, ios, uinavigationcontroller

我有一个带有`textbox`,`pickerview`和`UIButton`（用作单选按钮）的视图。单击提交`UIButton`后，用户应在另一个视图中显示他输入的详细信息，该视图具有`tableView`. 我正在使用`navigationController`导航到另一个视图`tableview`。导航工作正常，但我如何在表格视图中显示输入的`view1`数据`view2`？以下是我的代码：.m

```
- (void) goToViewTwo
{
   tableViewController *viewTwo = [[tableViewController alloc] initWithNibName:@"tableViewController" bundle:[NSBundle mainBundle]];

   self.tabView = viewTwo;

   [self.navigationController pushViewController:self.tabView animated:YES]; 
} 
```

如何将数据分配给 tabView？

**编辑以包含 tableViwController 的 .h**

```
 #import <UIKit/UIKit.h>

@interface tableViewController : UIViewController
@property(nonatomic,retain)NSString *name;
@property(nonatomic,retain)UILabel *lbl;
@property (strong, nonatomic) IBOutlet UILabel *textLabal;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:51:32.633

您可以使用属性@property 功能。

就像在 view2.h

```
@property(nonatomic,retain)NSString *name; 
```

在 view2.m

```
@synthesize name; 
```

在你看来1.m

```
 - (void) goToViewTwo
{

    tableViewController *viewTwo = [[tableViewController alloc]  initWithNibName:@"tableViewController" bundle:[NSBundle mainBundle]];

    self.tabView = viewTwo;
    viewTwo.name=textbox.text;
[self.navigationController pushViewController:self.tabView animated:YES];

} 
```

希望这可以帮助....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T05:56:09.240

就像你正在做的那样，除了在推送下一个视图控制器之前，在它上面设置一个属性。例如，要在 viewTwo 上显示来自 viewOne 的文本，viewTwo 将需要一个名为（类似于）textFromViewOne 的字符串属性。

```
tableViewController *viewTwo = [[tableViewController alloc] initWithNibName:@"tableViewController" bundle:[NSBundle mainBundle]];

// assume this vc has an outlet to it's text field called viewOneTextField
viewTwo.textFromViewOne = viewOneTextField.text;

// not sure why you're saving a ref to this new vc, when do you use it?
self.tabView = viewTwo;

// you don't need it here    
[self.navigationController pushViewController:viewTwo animated:YES]; 
```

现在，在第二个 VC 中，它可以包含 UIControls 来呈现存储在其属性中的数据。继续文本示例...

```
// assume you know how to create properties on the "tableViewController" class (not a great name, btw)

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    // assume you have a label called label
    label.text = self.textFromViewOne;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:50:07.533

您需要在 tableViewController 上设置一些属性。因此，如果您要传递一个字符串。tableViewController 将在 .h 文件中包含以下内容。

```
 @property (nonatomic, retain) NSString *mystring; 
```

您也可以在 .m 文件中合成此字符串。

```
@synthesize mystring; 
```

然后就可以在上面的代码中调用

```
viewTwo.mystring = @"some value to pass through"; 
```

然后，您可以通过调用 self.mystring 访问您在 tableViewController 中传递的值。希望对一些人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:06:46.810

在 tabView.h 类中创建接收器方法

-(init) GetData:(NSString *)textboxString 选择器:(NSString *)pickerValue;

创建 Intance 变量以接收数据

NSString *str1 NSString *str2

在 tabView.m

```
-(init) GetData:(NSString *)textboxString picker:(NSString *)pickerValue
{
     str1 = [textboxString copy];
     str2 = [pickerValue copy];

     return self;
} 
```

现在在 -(void) goToViewTwo 方法中

调用您在 tabtwo 类中创建的方法

```
[viewTwo init:textboxString picker:pickerValue]; 
```

# windows-7 - git bash shell 找不到 /etc

> ID：14228962
> 
> 赞同：1
> 
> 时间：2013-01-09T05:45:25.323
> 
> 标签：windows-7, msysgit, git-bash

在我的新 Win7 笔记本电脑上安装 MSysGit 后，我​​将用户目录 (C:\Users) 移动到我的 D: 磁盘并创建了一个从 C:\Users 到 D:\Users 的硬链接。这似乎适用于大多数程序，但是 git bash shell 似乎无法再找到位于

```
 \Users\<user-name>\AppData\Local\VirtualStore\Program Files (x86)\Git\etc 
```

一个类似的问题是shell 可以再找到写入\Users\.bash_history 的.bash_history。

我可以从 shell 中读取 bash_profile

```
 cd d:  
 source /users/David/AppData/Local/VirtualStore/Program Files (x86)/Git\etc\bash_profile 
```

但这很讨厌。关于如何让 shell 找到 /etc 目录的任何建议？或者任何其他可以读取 bash_profile 的方法？（很抱歉在 / 和 之间切换。我试图保持直接使用是 Windows 与 *nix shell）

奇怪的是，ssh 似乎是 find \users\.ssh\known_hosts 因为它没有抱怨找到存储在那里的密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:41:08.460

我建议修改`HOME`中定义的[`git-cmd.bat`](https://github.com/msysgit/msysgit/blob/master/git-cmd.bat)，如中所述：

*   “ [MSysGit 和 ssh 配置。缺失](https://stackoverflow.com/questions/10122439/msysgit-and-ssh-config-missing/10122865#10122865)”
*   "[在 git shell 中运行批处理文件](https://stackoverflow.com/questions/11229619/running-a-batch-file-in-git-shell/11273633#11273633)"

设置`HOME`为实际的新路径。
对 windows 硬链接和 msys 会话的支持不是一个确定的事情。

# eclipse - 如何设置eclipse 4 APP的左上角图标

> ID：14228964
> 
> 赞同：0
> 
> 时间：2013-01-09T05:45:31.420
> 
> 标签：eclipse, rcp, e4

我试图在外壳的左上角为一个 eclipse 4.2 APP 设置一个图标。我已经设置了品牌形象，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:30:58.583

*.product 文件中的品牌图像不被 e4 拾取。

有两种方法可以将图标放入窗口的角落。

1) 在 *.e4xmi 中设置 Window 的“Icon URI”属性

2) 使用 JFace Window Singleton API 设置默认图标

```
Window.setDefaultImages(new Image[] {...}); 
```

PS 上个回答中提到的bug已经修复： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=280825](https://bugs.eclipse.org/bugs/show_bug.cgi?id=280825)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:54:57.500

我猜有已经报告的错误。您只能设置左上角的图标，但要获取活动外壳并执行 setimage 方法。

# sqlalchemy - SQLAlchemy中的复杂过滤器 - 如何？

> ID：14228967
> 
> 赞同：1
> 
> 时间：2013-01-09T05:45:46.990
> 
> 标签：sqlalchemy

Attribute 和 AttributeValue 是一对多的，Attribute/AttributeValue 对和 Item 是多对多的。这种设计是为了让一个Item可以附加几个Attributes。现在我们要选择所有具有选定 Attribute-AttributeValue 的项目。

我们要选择具有特殊 AttributeName/Value 对的所有项目。无论如何要在 SQLAlchemy 中做到这一点？

```
class AttributeSchema(Base, DBBase):
    __tablename__ = 'attributeschemas'

    id = Column(Integer, primary_key=True)
    name = Column(String(length=255))
    type = Column(Enum('Boolean', 'Integer', 'String'), default='String')
    is_index = Column(Boolean, default=False)

class AttributeValueSchema(Base, DBBase):
    __tablename__ = 'attributevalueschemas'
    id = Column(Integer, primary_key=True)
    value = Column(String(length=255))
    attributeschema_id = Column(Integer, ForeignKey('attributeschemas.id'), nullable=True)
    attributeschema = relationship('AttributeSchema', backref='attributeschemavalues')

class ItemType(Base, DBBase):
    __tablename__ = 'itemtypes'

    id = Column(Integer, primary_key=True)
    name = Column(String(length=255))

    market_price = Column(Float)
    attributes = relationship('AttributeSchema')

class ItemTypeAttribute(Base, DBBase):
    __tablename__ = 'itemtype_attribute'
    itemtype_id = Column(Integer, ForeignKey('itemtypes.id'), primary_key=True)
    attribute_id = Column(Integer, ForeignKey('attributeschemas.id'), primary_key=True)
    attributevalue_id = Column(Integer, ForeignKey('attributevalueschemas.id'), primary_key=True)
    itemtype = relationship('ItemType')
    attribute = relationship('AttributeSchema')
    attributevalue = relationship('AttributeValueSchema') 
```

# jquery - jQuery在隐藏文件输入上附加更改事件

> ID：14228969
> 
> 赞同：0
> 
> 时间：2013-01-09T05:45:54.763
> 
> 标签：jquery, file-io

我正在尝试创建/自定义默认文件类型输入，以便它们在所有常见浏览器中看起来都相同。我正在做的是隐藏默认输入并显示我的自定义文件类型输入。然后我使用触发方法触发隐藏输入的原生点击事件。然后我触发本机更改事件以使用更改事件获取选择/选定的文件名。一切正常。所有这些我都是从我创建的插件中完成的。

但由于可以有超过 1（一个）文件类型输入，我的解决方案无法正常工作。更改事件仅附加到最后一个输入。

这是我的 js 代码： $.widget("jQuery.jFile", { options: {

```
 wrapperClass:'custom-file',
    buttonClass:'custom-file-button',
    hideClass:'hidden',
    inputClass:'custom-file-input',
    disabledClass:'custom-file-disable',

    disabled:false,
    validation:false,

    inputValue:'No file choosen'
},

_init: function(option) {
    var settings    = $.extend({}, this.options, option); 
    var element     = this.element;

    $(element).wrapAll('<span/>').before('<span/>').prev('span').addClass(settings.buttonClass).html('Choose File').next('input').addClass(settings.hideClass).after('<span/>').next('span').addClass(settings.inputClass).text(settings.inputValue).parent().addClass(settings.wrapperClass);

    if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1) $('.'+settings.wrapperClass).addClass('ff');
    //Bind events
    $('.'+settings.buttonClass).bind('click',this.openFileDialog).bind('mouseover',this.fileDialogMouseover).bind('mouseout',this.fileDialogMouseout).bind('keypress, mousedown', this.fileDialogKeypress).next('input').bind('change',this.fileDialogChange);

},

disable: function() {
    this.options.disabled = true;
},

enable: function() {
    this.options.disabled = false;
},

openFileDialog: function(){
    $(this).next('input').trigger('click'); 
},

fileDialogChange: function(){

    file_value=$(this).val();
    file=file_value.split('\\');
    filename=file[file.length-1];
    if(filename.length>32) filename=filename.substring(0, 29) + '...';

    $(this).next('span').text(filename);

},

fileDialogMouseover: function(){
    $(this).addClass('hover').removeClass('active');
},

fileDialogMouseout: function(){
    $(this).removeClass('hover').removeClass('active');
},

fileDialogKeypress: function(){
    $(this).addClass('active').removeClass('hover');
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:47:51.157

I got the answer. I have to unbind the click event before binding the same so that the trigger event is called once.

Thanks anyways :)

# android - 如何更改动作栏夏洛克中子菜单项的背景

> ID：14228972
> 
> 赞同：0
> 
> 时间：2013-01-09T05:45:56.990
> 
> 标签：android, actionbarsherlock, submenu

我添加了带有以下代码的子菜单

```
 public boolean onCreateOptionsMenu(Menu menu) {

                SubMenu subMenu1 = menu.addSubMenu("user");

                subMenu1.add(0, 3 , 0, "Log out");

                MenuItem subMenu1Item = subMenu1.getItem();

                subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return true;
    } 
```

我一直在尝试更改子菜单的背景，但没有成功，我几乎涵盖了所有帖子，但没有用。问题是当用户点击时`usermenu`，他会得到**注销** 选项，这是上面代码中的子菜单。当子菜单下拉在屏幕上可见时，它看起来类似于我几乎不可见的活动的背景颜色。我无法更改活动的背景颜色。它应该是雪白的，甚至子菜单下拉的背景颜色默认也是雪白的。那么有人可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:51:07.093

您是否尝试在 ActionBarSherlock 库项目中编辑和更改下拉菜单的样式 (abs_style.xml)？

主题 Theme.Sherlock 使用了 abs_style.xml 中存在的所有样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T03:29:32.813

```
 <style name="Theme.Sherlock.lionbench" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.Sherlock.lionbench.actionbar</item>
    <item name="popupMenuStyle">@style/Widget.Sherlock.PopupMenu.lionbench</item>
    <!-- Internal -->
    <item name="listPopupWindowStyle">@style/Widget.Sherlock.PopupMenu.lionbench</item>
</style>

<style name="Widget.Sherlock.listPopupMenu.lionbench" parent="Widget.Sherlock.ListPopupWindow">
    <item name="android:dropDownSelector">@drawable/selector_actionbar_background</item>
    <item name="android:popupBackground">@drawable/selector_actionbar_background</item>
    <item name="android:dropDownVerticalOffset">0dip</item>
    <item name="android:dropDownHorizontalOffset">0dip</item>
    <item name="android:dropDownWidth">wrap_content</item>
</style>

<style name="Widget.Sherlock.PopupMenu.lionbench" parent="Widget.Sherlock.ListPopupWindow">
    <item name="android:dropDownSelector">@drawable/selector_actionbar_background</item>
    <item name="android:popupBackground">@drawable/shape_actionbar_popupmenu_bacground_darker_light</item>
    <item name="android:dropDownVerticalOffset">0dip</item>
    <item name="android:dropDownHorizontalOffset">0dip</item>
    <item name="android:dropDownWidth">wrap_content</item>
</style> 
```

# java - 项目文件夹已存在且不为空-netbeans 中的错误

> ID：14228973
> 
> 赞同：3
> 
> 时间：2013-01-09T05:45:57.197
> 
> 标签：java, netbeans, netbeans-7

我正在使用 NetBeans 7.0.1，当我尝试创建 JAVA 应用程序时，我收到一个错误，即“**项目文件夹已经存在并且不是空的**”。

但事实是项目文件夹不存在，它们在目录中没有同名文件夹。任何建议都会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:37:10.053

当您尝试创建它时，问题是否会出现，还是什么？

请不要说您的版本有点旧。

1.  确保它始终位于与以前相同的目录中。

2.  我会重新启动计算机并重试。

3.  如果情况仍然存在，我将升级到最新版本 (7.2.1) 并检查问题是否仍然存在或联系 NetBeans。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-22T08:04:46.120

我的情况（Windows 7 x64 上的 NetBeans 8.1）的原因是主 java 类（`C:\Users\_my_user_name_\AppData\Roaming\NetBeans\8.1\config\Templates\Classes\Main.java`）的模板文件不正确。你看，当我调整那个文件时，我把它填满了无效代码；准确地说，缺少一个结束标签。一旦我意识到我的错误并纠正它，一切都恢复正常并且从那时起一直运行良好。

**这就是我的建议：**
**第 1 步**：查看是否可以在尚不存在的文件夹中创建新项目。假设 IDE 确实为您创建了这个新文件夹，开始用文件填充它，然后意外停止并说“项目文件夹已经存在，等等”。
**第 2 步**：查看文件夹内部并尝试找到您的应用程序的主类（例如，`C:\My_Amazing_NetBeans_Projects\MyNiftyJavaApp\src\myniftyjavaapp\MyNiftyJavaApp.java`）
**第 3 步**：如果主类文件确实存在但完全为空（长度为 0 字节），则可能意味着某些东西阻止了 IDE 用自动生成的代码填充它（就像我发生的那样，因为无效的主类模板）。

简而言之，尝试定位 IDE 失去理智的确切点。作为最后的手段，请考虑重新安装 NetBeans。诚然，这个解决方案是粗鲁和不优雅的，但世界各地的人都报告说它通常会有所帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T22:49:34.250

```
<#if package?? && package != ""> 
package ${package}; 
</#if> 

/** @author ${user}  */

public class ${name} { 

    public static void main(String[] args) { 

    } 
} 
```

It seems that the first three lines of code above are key to this problem. I changed my `JAVA MAIN CLASS` template and removed unwanted comments, but I also removed these first three lines of code. The first project created was ok, package was "default package".

When I tried to create the next project I got an error about a Project folder that already exists. I did uninstall/install NetBeans 8.2, changed template again in the same manner, and again second project fails to create.

Then I decided to change template line by line to see what is going on and guess what: the first three lines are necessary - new projects are created well and package is not default anymore!

# java - 何时使用 ConcurrentHashMap

> ID：14228974
> 
> 赞同：6
> 
> 时间：2013-01-09T05:45:58.440
> 
> 标签：java, concurrent-collections

> **可能重复：**
> [ConcurrentHashMap 和 Collections.synchronizedMap(Map) 有什么区别？](https://stackoverflow.com/questions/510632/whats-the-difference-between-concurrenthashmap-and-collections-synchronizedmap)

我正在阅读 HashMap、Collenctions.synchonizedMap 和 ConcurrentHashMap 之间的差异。我的理解是 Collections.synchronizedMap 对整个集合应用了锁，因此会产生性能开销。但是 ConcurrentHashMap 不使用同步。它使用段来实现结果，因此它提供了与 HashMap 相似的性能。

请提出我的理解是否正确。此外，如果是这种情况，即使可能没有多个线程访问它，我是否可以在任何地方使用 ConcurrentHashMap ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T05:52:54.920

> ConcurrentHashMap 不使用同步。它使用段来实现结果

ConcurrentHashMap 在段级别同步，允许原子操作，如 putIfAbsent 或用新值替换旧值。这种优势来自一种称为锁条带化的技术。

> 即使可能没有多个线程访问它，我可以在任何地方使用 ConcurrentHashMap 吗？

不，我没有理由这样做。撇开性能不谈，数据结构的选择还可以作为有关如何使用代码的文档（HashMap--> 单线程）。仅当使用它的类是线程安全的时才使用 ConcurrentHashMap；否则，在非线程安全类中使用线程安全数据结构会增加下一个查看代码的人的困惑。

# python - pyodbc 返回® as？

> ID：14228976
> 
> 赞同：1
> 
> 时间：2013-01-09T05:46:25.210
> 
> 标签：python, unicode, windows-xp, pyodbc

在 oracle db 表上，我有一个带有一些数据的 ® 字符

pyodbc 从 WinXP 32 位和 Win7 64 位执行相同的查询给出不同的结果

将数据转储到文件中会产生如下输出：

Winxp：数据与？# ® 替换为 ?

Win7 : data with ® # 正确的数据

任何想法，WinXP有什么问题，

查询代码如下：

```
def dbquery(dbipaddr,dbname,pwd,sid,port,querystr):
    try:
        import cx_Oracle
        conn_str=dbname+"/"+pwd+"@"+dbipaddr+":"+port+"/"+sid
        conn = cx_Oracle.connect(conn_str)
        cur=conn.cursor()
        cur.execute(querystr)
        queryRes = cur.fetchone()
        tmp = []
        res = []

        while queryRes:
            for res in queryRes: 
                try:
                    tmp = res.read()
                except:
                   tmp = res
                tmp.append(tmp)  
            res.append(tuple(tmp))
            queryRes = cur.fetchone()
            tmp = []
        conn.close()

    except Exception, ex:
        print ex.message
        return []

    return res 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:54:59.467

所以这里有两个可能的故障点，数据库连接编码和转储到文件时的文件编码。两者都需要指定，否则您将受到默认编码的支配，这些默认编码会因平台而异，并且可能不是您想要使用的。

要指定数据库的连接编码，请执行

```
os.environ['NLS_LANG'] = 'AMERICAN_AMERICA.UTF8' 
```

要指定文件编码，请执行

```
file = codecs.open("lol", "w", "utf-8") 
```

正如你已经做过的那样，即使一开始它不起作用，它也是正确的做法

# windows-8 - 如何将 xml 文件放在 localhost 中？

> ID：14228977
> 
> 赞同：0
> 
> 时间：2013-01-09T05:46:44.307
> 
> 标签：windows-8

我正在尝试 Windows 8 实时磁贴程序。在这个应用程序中，我想将 xml 文件放在本地主机上。像`var urls = new Windows.Foundation.Uri("http://localhost/tile1.xml")`，

但我不知道如何放置在本地主机中，请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:53:44.010

只需将 XML 文件放在监听 localhost 的 80 端口的网站的根目录中即可。如果是 IIS，则该目录可能是`C:\InetPub\wwwroot`.

# android - 无法在我的 android 应用中替换

> ID：14228978
> 
> 赞同：0
> 
> 时间：2013-01-09T05:46:54.603
> 
> 标签：android, json

android 版本：4.2 我的示例代码是：

```
 try {
   //HttpResponse response = httpClient.execute(httpGet, localContext);
   HttpResponse response = httpClient.execute(httpGet, localContext);
   HttpEntity entity = response.getEntity();
   text = getASCIIContentFromEntity(entity);

   text=text.replaceAll("&lt;", "<").replace("&gt;", ">").replace("&nbsp;", " ");

   int start=text.indexOf("<message>");
   start=start+9;
   int end=text.indexOf("</message>");
   text=text.substring(start, end);

   JSONArray ja = new JSONArray(text) ;
       // ITERATE THROUGH AND RETRIEVE CLUB FIELDS
    int n = ja.length();
    for (int i = 0; i < 1; i++) {
        // GET INDIVIDUAL JSON OBJECT FROM JSON ARRAY
     JSONObject jo = ja.getJSONObject(i);

     title+= jo.getString("Title")+",";
     url= jo.getString("URL");
     desc= jo.getString("Description");                             
    }
 } catch (Exception e) {
         return e.getLocalizedMessage();
} 
```

问题：变量 desc（即，我的 json 中的描述）包含`**&nbsp;**`在其内容中。我已使用以下代码将 HTML 转换为 android 中的字符串：

```
Spanned marked_up = Html.fromHtml(results);
tv2.setText(marked_up.toString(),BufferType.SPANNABLE); 
```

它仍然没有取代`**&nbsp;**`. 请帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:49:02.217

```
marked_up.toString().replaceAll("&nbsp",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:51:29.107

使用`tv2.setText(marked_up)`代替`tv2.setText(marked_up.toString(),BufferType.SPANNABLE);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:16:40.140

```
public static final String unescapeHTML(String s, int f){
        String [][] escape = {{  "&nbsp;"   , " " }};
        int i, j, k;

        i = s.indexOf("&", f);
        if (i > -1) {
            j = s.indexOf(";" ,i);
            f = i + 1;
                if (j > i) {
                  String temp = s.substring(i , j + 1);
                  k = 0;
                  while (k < escape.length) {
                    if (escape[k][0].equals(temp)) break;
                    else k++;
                  }
                  if (k < escape.length) {
                    s = s.substring(0 , i) + escape[k][1] + s.substring(j + 1);
                    return unescapeHTML(s, f); 
                  }
               }
         }   
         return s;
    } 
```

将此功能用作`text = unescapeHTML(text,0);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:46:39.670

使用这种方法，

```
Html.fromHtml(text);
title+= Html.fromHtml(jo.getString("Title"))+","; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T05:43:39.940

尝试将以下行更改`desc= jo.getString("Description");`为：

```
desc= Html.fromHtml(jo.getString("Description")); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-09T05:58:09.080

我认为你应该从服务器端删除** ,<,>**因为你必须每次检查不同的节点......所以改变服务器端的 webservice 代码......这对你来说是最好的......

# php - 我的 ZF 应用程序是否会导致“请求超出 10 个内部重定向的限制”错误？

> ID：14228979
> 
> 赞同：0
> 
> 时间：2013-01-09T05:46:54.683
> 
> 标签：php, apache, zend-framework, http-redirect, redirect-loop

我们有一个使用 ZendFrameWork v1.10 开发的电子商务网站。有时网站加载非常缓慢，许多页面根本没有加载并且正在超时。主页加载时间超过 15 秒，许多产品页面根本无法加载，只是超时。

在这种情况下，我们经常重新启动我们的 apache 服务器并正常启动站点。然后我们询问服务器提供商，他们说我们的服务器健康状况良好，他们会像这样生成我们的服务器健康状况

```
(~) # uptime
 12:00:17 up 655 days, 10:51,  2 users,  load average: 0.87, 0.65, 0.58

(~) # uptime
 12:00:29 up 177 days,  6:46,  1 user,  load average: 0.64, 0.53, 0.47 
```

他们还建议我们检查我们的服务器 error_log，因为他们发现许多 php 错误正在加载到它。当我们检查服务器 erro_log 和它的旧文件时。我们在所有日志文件中发现了许多以下错误。

```
[Sun Dec 30 02:35:32 2012] [error] [client 66.249.76.16] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

如果我在 error_log 文件中检查了特定 IP 的上述错误，`eg : 66.249.76.16`我发现了 6 个结果，如果我检查了从其中剥离最后两位数字的 IP，`(66.249.76)`我可以在我们的 error_log 文件中看到每天超过 20 个错误，就像上面一样。

我认为，我应该解决的第一个问题是上述“由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，请使用 'LimitInternalRecursion' 增加限制。使用 'LogLevel debug' 获取回溯”Apache 日志问题。

我们已经查看了日志，并且如上所述每天都会发生这种情况，所以我需要找出实际上是什么代码导致了这个错误。我们要求我们的服务器支持启用“Loglevel debug”（我对此不太熟悉），但启用此功能后我仍然看不到任何有用或错误日志中的任何差异。

我的问题是 - 我该怎么做才能找出在我们网站的哪个位置产生了这个错误？知道哪个 PHP 脚本（我们有 100 个）实际上使“请求超出了 10 个内部重定向的限制”重定向发生，这将非常有帮助。

关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:04:07.680

我们也遇到了一些这样的问题。我们在 index.php 中记录了日志，这让我们非常清楚是哪个请求导致了问题。您可以执行相同的操作并检查哪些请求占用了最多的执行时间。

```
<?php

define('EXECUTION_START',  microtime(true));

.
.
.
// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH .DS. 'configs'.DS.'application.ini'
);
$application->bootstrap()
            ->run();

$endTime = microtime(true);
$executionTime = $endTime-EXECUTION_START;
$ipaddress = $_SERVER['REMOTE_ADDR'];
$url = $_SERVER['REQUEST_URI'];

$logString="$ipaddress|$url|$startTime|$endTime|$executionTime\n";
$file = 'executiontime.txt';
file_put_contents($file, $logString, FILE_APPEND | LOCK_EX); 
```

# c# - C# EF Deep Lambda Distinct Count 查询

> ID：14228980
> 
> 赞同：4
> 
> 时间：2013-01-09T05:46:59.750
> 
> 标签：c#, asp.net, entity-framework, lambda

这是我想要做的查询。

```
var commentActivity = project.ProjectDoc
        .Select(c => c.Comment.Select(i => i.UserID))
        .Distinct()
        .Count(); 
```

我想要的是来自不同用户对特定项目的评论数量，但任何 ProjectDoc。这个查询“有效”结果是错误的。模型是这样的，一般是草图。

```
 Project
      ProjectDoc
           Comment 
```

更新：我必须更深一层，根据下面的答案，我尝试了一些不起作用的方法，所以我将其发布为参考。请注意两个 SelectMany 方法。

```
 var replyActivity = project.ProjectDoc
      .SelectMany(c => c.Comment.SelectMany(r => r.CommentReply.Select(u => u.UserID)))
      .Distinct()
      .Count(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T05:52:47.083

使用 SelectMany 而不是 Select

```
project.ProjectDoc
        .SelectMany(c => c.Comment.Select(i => i.UserID))
        .Distinct()
        .Count() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:01:51.157

```
 var data =   (from con in project.ProjectDoc
               select new 
              {
                 CommentCount=project.Comment.Count(x=>x.UserID==con.UserID)

              }).ToList(); 
```

我想这会对你有所帮助。

# python - `key_prefix` 对烧瓶缓存有什么作用？

> ID：14228985
> 
> 赞同：9
> 
> 时间：2013-01-09T05:47:33.077
> 
> 标签：python, caching, flask, flask-extensions

比如像这样，有必要用`key_prefix`吗？

```
@cache.cached(timeout=50, key_prefix='all_comments')
def get_all_comments():
    comments = do_serious_dbio()
    return [x.author for x in comments]

cached_comments = get_all_comments() 
```

在[文档](http://packages.python.org/Flask-Cache/#caching-other-functions)中，它说`key_prefix`的默认值为`request.path cache_key.:`，是什么`cache_key`意思，我该如何使用它？做什么`key_prefix`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T11:43:20.313

首先[`request.path`](http://flask.pocoo.org/docs/api/#flask.Request.path "http://flask.pocoo.org/docs/api/#flask.Request.path")是 . 之后的所有内容（参数除外）`script_root`。例如：

1.  对于类似的 url `http://127.0.0.1:5000/users/login/`，请求数据是：

    ```
    request.path is: /users/login/ 
    ```

2.  对于上面链接示例中的 url `http://www.example.com/myapplication/page.html?x=y`，请求数据为：

    ```
    request.path is: /page.html 
    ```

* * *

> Q. cache_key 是什么意思，如何使用？

`cache_key`是用于访问特定缓存值的键。如您所知，缓存是键值存储。

在 Flask-Cache 中，`cache_key`它是由扩展生成的，我们不应该自己使用它。

* * *

> 问：key_prefix 有什么作用？

`key_prefix`用于生成`cache_key`缓存值。查看[`make_cache_key`源代码](https://github.com/thadeusb/flask-cache/blob/master/flask_cache/__init__.py#L217 "https://github.com/thadeusb/flask-cache/blob/master/flask_cache/__init__.py#L217")以了解它是如何完成的。

* * *

> Q. 有必要使用key_prefix吗？

假设您`get_all_comments`从 2 个不同的视图函数调用，例如`manage()`和`view()`。而且您没有指定`key_prefix`, 缓存`get_all_comments`时使用`@cached`.

第一次通过输出*查看帖子*`view`时，会使用[默认键](http://packages.python.org/Flask-Cache/#flask.ext.cache.Cache.cached "http://packages.python.org/Flask-Cache/#flask.ext.cache.Cache.cached")缓存，例如：or ，或任何值， where is 。`get_all_comments``view/view``view/module/view``view/%s``%s``request.path`

接下来，当您通过*管理帖子*`manage`时，`get_all_comments`不会从缓存中读取输出，因为从缓存`cache_key`中获取数据的应用程序已更改为`view/manage`并且不是旧的`view/view`，因为 request.path 现在已更改。

这里缓存的全部目的`get_all_comments`是尽可能从缓存中获取数据，而不是从数据库中获取数据，但是由于视图函数之间的键已经更改，因此实际上两次都从数据库本身检索数据。

但是，如果您指定了`key_prefix`like `all_comments`，那么第一次从 db 中检索数据，下一次`cache_key`仍然`all_comments`找到值，并且从缓存而不是 db 访问数据。

因此，当您遇到上述情况时，使用 a 显然更好`key_prefix`，在其他情况下，当始终从单个路径/视图函数调用该函数时，可以使用默认值。

* * *

注意：cache_key 是为每个请求生成/计算的，请参阅[源代码](https://github.com/thadeusb/flask-cache/blob/master/flask_cache/__init__.py#L208 "https://github.com/thadeusb/flask-cache/blob/master/flask_cache/__init__.py#L208")：

```
cache_key = decorated_function.make_cache_key(*args, **kwargs) 
```

# ios - 如何取消以前的执行选择器？

> ID：14228987
> 
> 赞同：1
> 
> 时间：2013-01-09T05:47:39.580
> 
> 标签：ios, objective-c, nsobject, performselector

我在用

```
[self performSelector:@selector(someMethod) withObject:nil afterDelay:1]; 
```

在一段时间延迟后一次又一次地调用一个方法。它工作正常，但我的问题是，即使我导航到下一堂课，执行选择器也在上一堂课中运行后台。

所以我尝试使用以下方法取消它

```
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(someMethod) object:nil]; 
```

但它不起作用。我在`viewDidDisappear`. 谁能告诉我如何取消执行选择器？

这是我的代码

```
-(void)textCalling
{

    NSString *str2=@"Something";
    UILabel *lbl =(UILabel*)[arrObj objectAtIndex:count2];
    [lbl setAlpha:0];
    lbl.numberOfLines=0;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
    lbl.text=str2;
    [UIView setAnimationDuration:0.0];
    [lbl setAlpha:0];
    [UIView commitAnimations];

}
-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context
{

    UILabel *lbl =(UILabel*)[arrObj objectAtIndex:count2];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.0];
    [lbl setAlpha:1];
    [UIView commitAnimations];
    count2++;
    if (count2<[arrCourse count]) {
        [self performSelector:@selector(textCalling) withObject:nil afterDelay:1];
    }else{
        count2=0;

        [self performSelector:@selector(imageCallingCourse) withObject:nil afterDelay:1];
    }
}
-(void)imageCallingCourse
{

    imgViewObj.image=[UIImage imageNamed:@"Objective.png"];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(animationDidStopImageCourse:finished:context:)];
    [UIView setAnimationDuration:0.0];
    [imgViewObj setAlpha:0];
    [UIView commitAnimations];
}

-(void)animationDidStopImageCourse:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context
{
    NSLog(@"animationDidStopImage1");
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.0];
    [imgViewObj setAlpha:1];
    [UIView commitAnimations];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:20:06.840

你“在一段时间延迟后一次又一次地调用一个方法”你最好使用

```
timer = [NSTimer scheduledTimerWithTimeInterval:1
                                               target:self
                                             selector:@selector(someMethod)
                                             userInfo:nil repeats:YES]; 
```

并在 viewllDidDisappear 中，用于`[timer invalidate]`停止它。

你的“某种方法”是这样写的吗？

```
- (void)somemethod
{
//your code
[self performSelector:@selector(someMethod) withObject:nil afterDelay:1];
} 
```

也许您应该添加一个测试按钮，它会`[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(someMethod) object:nil];`在单击时调用。检查它是否有效。

您可以编写代码来解决问题。

```
- (void)somemethod { 
    if (needStop) {
        return; 
    } //your code [self performSelector:@selector(someMethod) withObject:nil 
afterDelay:1]; 
} 
```

在 viewDidDisappear 中设置 needStop = YES;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:28:13.760

在.h中，

```
BOOL checkMethodCall; 
```

在 .m viewWillAppear 中，

```
checkMethodCall = NO; 
```

在视图中将消失，

```
checkMethodCall = YES; 
```

然后，

```
-(void)textCalling
{
  if(checkMethodCall)
  {
    return;
  }
  // Your code
} 
```

因此，在更改视图后，方法中返回后的代码将不会执行..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T06:57:28.373

您只需使用 NSoperation 添加您的操作，如果您要执行多个操作，您可以在其中取消任何操作并启动任何操作，然后将其添加到 nsoperationqueue...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T07:02:39.173

尝试这个..

[[self class] cancelPreviousPerformRequestsWithTarget:self selector:@selector(someMethod) object:nil];

# ruby-on-rails - to_json 适用于单个模型的“显示”操作，但不适用于来自 has_many 的该模型的数组

> ID：14228990
> 
> 赞同：0
> 
> 时间：2013-01-09T05:47:54.743
> 
> 标签：ruby-on-rails, ruby, json

我已经超越了我的

```
 to_json(options) 
```

在我的动物模型中。

在我的表演动作中，我有

```
respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @animal }
end 
```

我在这个控制器上有另一个动作来获取特定用户拥有的所有动物。

```
 def owned_animals
    @animals = User.find(params[:user_id]).animals

    respond_to do |format|
      format.json { render json: @animals }
    end
  end 
```

当我打电话

```
/owned_animals.1.json 
```

我得到了旧的 json 格式，而不是使用我的 to_json 覆盖。

我猜我需要覆盖用户模型中的 to_json 才能使用 over_ridden 的动物 json？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:12:58.867

尝试覆盖`as_json`。

[更多细节。](http://www.tonyamoyal.com/2011/03/25/recursive-custom-to_json-in-ruby-for-arrays-of-objects-or-nested-objects/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:13:06.903

`format.json { render json: @animals }`正在调用 as_json，而不是 to_json。尝试覆盖 as_json。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:50:55.180

或者做

```
Animal.find_by_user(User.find(params[:id])) 
```

# jquery - jQuery循环不起作用

> ID：14228991
> 
> 赞同：-2
> 
> 时间：2013-01-09T05:47:59.847
> 
> 标签：jquery, cycle

我的结构：

```
<div class="main">
<div class="main-contents">
<img>...</img>
<img>...</img>
<img>...</img>
<img>...</img>
<img>...</img>
</div>
</div> 
```

还有我的js代码：

```
jQuery(document).ready(function() {
    jQuery('.main .maincontents').cycle({
        fx: 'fade'
    });
}); 
```

但是循环不起作用。当我通过 Firebug 检查时，没有看到错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:49:02.083

更改`jQuery('.main .maincontent')`为：

```
 jQuery(document).ready(function() {
           jQuery('.main .main-contents').cycle({ fx: 'fade' });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:50:33.070

你的班级名称在 JQUERY 中是错误的

你提到了.maincontent。尝试这个，

```
jQuery(document).ready(function() {
    jQuery('.main .main-contents').cycle({
        fx: 'fade'
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:58:04.737

您的代码中有一个问题：

```
 jQuery(document).ready(function() {
        jQuery('.main .main-contents').cycle({
        //-------------^^^^^^^^^^^^^-------------change it like this
            fx: 'fade'
        });
    }); 
```

尽管如果您关心性能，您可以这样做：

```
jQuery(document).ready(function() {
        jQuery('.main').find('.main-contents').cycle({
        //-------------^^^^^^^^^^^^^-------------change it like this
            fx: 'fade'
        });
    }); 
```

您没有提到在此脚本之前包含 jQuery，因此请尝试使用该`CDN hosted`脚本以获得更好的 pageLoad 性能：

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script> 
```

然后在此之后将所有循环脚本放在它下面。

试试这个，看看这是否对你有帮助。

# magento - Magento - 从模板获取愿望清单分享链接

> ID：14228994
> 
> 赞同：1
> 
> 时间：2013-01-09T05:48:22.027
> 
> 标签：magento

是否可以直接从模板中获取电子邮件、IE 之前的愿望清单共享链接（通常在与朋友共享时通过电子邮件生成）？我想通过 Facebook 分享这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:07:14.080

这可以通过以下代码实现`.../template/wishlist/view.phtml`

```
Mage::getUrl('*/shared/index', array('code' => $this->getWishlistInstance()->getSharingCode())) 
```

# mysql - 为用户组建模的正确方法

> ID：14228999
> 
> 赞同：3
> 
> 时间：2013-01-09T05:48:30.733
> 
> 标签：mysql, database, database-design, model

所以我有这个我正在起草的应用程序，我开始考虑我的用户。好吧，我最初的想法是为每个组类型创建一个表。我一直在考虑这个问题，但我不确定这是最好的方法。

**例子：**

```
// Users

Users [id, name, email, age, etc]

// User Groups

Player [id, years playing, etc]

Ref [id, certified, etc]

Manufacturer Rep [id, years employed, etc] 
```

所以每个人都会创建一个帐户，但每个用户会有一个不同的组。他们也可以在多个不同的组中。每个组都有自己的不同列列表。那么最好的方法是什么？假设我有 5 个组。我需要 8 个表 + 一个将每个表连接到用户表的关系表吗？

我只是想确定这是在构建它之前组织它的最佳方式。

编辑：玩家会有关于他们用来玩的装备、他们一起玩过的球队、他们参加过的赛事的专栏。

裁判将获得有关他们拥有的认证和他们所裁判的事件的信息。

制造商代表将获得有关他们在其代表的公司中的职位的信息。

父母将获得有关他们参与这项运动多长时间的信息，也许是与他们作为父母的用户的关系。

举个例子。

编辑2：

```
**Player Table
    id
    user id
    started date
    stopped date
    rank
**Ref Table
    id
    user id
    started date
    stopped date
    is certified
    certified by
    verified

**Photographer / Videographer / News Reporter Table
    id
    user id
    started date
    stopped date
    worked under name
    website / channel link
    about
    verified

**Tournament / Big Game Rep Table
    id
    user id
    started date
    stopped date
    position
    tourney id
    verified

**Store / Field / Manufacturer Rep Table
    id
    user id
    started date
    stopped date
    position
    store / field / man. id
    verified 
```

这是我到目前为止的计划。我还是新手，所以我可能做错了。而且只有五组。直到我把它浓缩了一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:00:03.153

虽然我觉得有这么多彼此不同的实体很奇怪，但我会忽略这一点并提出问题。

这取决于您需要的组标准，在您描述每个组都有自己的列和信息的情况下，我猜您的设计是一个好的设计，特别是如果您需要数据库中可读形式的信息。如果您需要单个表中的所有组，则必须将组相关信息保存在一种对象中，可以是 blob、XML 字符串或任何其他形式，但是您将无法使用数据库过滤这些条件.

在关系数据库中，我会使用您描述的设计来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:05:07.497

表格的设计很大程度上取决于软件的要求。

例如，您对用户的描述将我引向了错误的方向，我起初考虑的是软件的“普通”用户。基本上是名称、登录信息和类似的东西。我永远不会拆分不同的表，因为它确实使登录、会话处理等任务变得非常复杂。

让我感到惊讶的另一点是，您希望将设备存储在这些用户表的列中。通常一个人和他的设备之间的关系不是一对一的，在大多数情况下，不同设备的数量是不同的。因此，您通常在用户和他们的设备之间存在关系 (1:n)。因此，您将设计一个设备表并在其中引用所有者的用户 ID。

但是，在您了解了应用程序中有哪些数据以及数据之间存在哪些关系之后，表格等的设计就相当严格了。

好消息是，您的数据模型和数据库设计将随着时间的推移而发展。尝试从涵盖大多数用例的基本模型开始。然后慢慢添加更多用例/方面。只要您处于规划和早期实施阶段，更改您的数据库设计是相当容易的。