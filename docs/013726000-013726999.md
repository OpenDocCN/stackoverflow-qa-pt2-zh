# StackOverflow 问答 13726000-13726999

# javascript - 单击在 IE9 ruby webdriver 上不起作用

> ID：13726003
> 
> 赞同：0
> 
> 时间：2012-12-05T14:57:56.997
> 
> 标签：javascript, ruby, selenium, internet-explorer-9, selenium-webdriver

我正在使用此代码单击一个元素：@driver.find_element(:id, "test").click，当我使用 Selenium Ruby Webdriver (selenium-webdriver-2.26.0.gem) 在 FF16 上运行脚本时，它运行良好）。

但是，当尝试在IE9浏览器中运行脚本时（使用IE驱动：IEDriverServer.exe），没有出现错误，但是Click事件不起作用，Selenium似乎忽略了这行代码并转到下一行代码。

请注意，当我尝试单击应用程序上的许多其他元素（例如：按钮、链接）时，不会发生此问题，它只会发生在我想要单击的某些元素上。

请帮助指导我如何解决 Selenium 在 IE9 浏览器中触发 Click 的问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:06:35.857

在移动到元素后尝试使用 JavaScriptExecutor 或单击单击。请参阅下面的 C# 代码

```
((IJavaScriptExecutor)driver).ExecuteScript("arguments[0].fireEvent('onclick');", element); 
```

或者

```
Actions action = new Actions(driver);
action.MoveToElement(element).Click().Build().Perform(); 
```

其中 element 是要单击的元素的 IWebElement 实例

# android - Android：如何通知其他活动完成（）的活动

> ID：13726004
> 
> 赞同：1
> 
> 时间：2012-12-05T14:58:05.830
> 
> 标签：android, events, android-activity, activity-finish

我确实有一项活动，但我无法访问（我们在 AIR ANE 工作）。从这个活动中，我们正在处理的活动被触发，但我们不能使用 onActivityResult，因为我们无权访问调用活动。我该如何解决这个问题？如果我通过finish() 关闭第二个活动，则发送事件为时已晚。据我所知，如果我之前发送过，底层活动仍然暂停。我考虑过使用带有 postDelayed 的处理程序，但我认为，时间安排会使这种方法变得混乱。是否有类似 didFinish() 的东西，一旦下一个活动已经恢复就会被调用？

任何想法表示赞赏！谢谢，马库斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:06:24.817

最简单的方法是在调用之前[发送一个广播](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29)`finish()` 并注册一个[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)你想要被通知的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T06:16:43.127

你可以在调用finish()之前使用toast、alert甚至广播接收器；

# google-apps-script - Google 电子表格脚本 - 获取单个引用单元格的 getColumn

> ID：13726006
> 
> 赞同：4
> 
> 时间：2012-12-05T14:58:10.617
> 
> 标签：google-apps-script

我想要一个函数，在其中我传递一个引用的单元格，而不是一个范围，它返回该单元格的列号。

```
function lastRealDate(v) {
  var thisColumn = v.getColumn();
  return thisColumn;
}​ 
```

但显然我不能那样做。谁能告诉我正确的方法？电子表格脚本非常新。

```
error: TypeError: Cannot find function getColumn in object 
```

* * *

好的，也许我应该提供更多细节。我有一个工作列表，每个工作都有以下列..

项目名称 | 状态 | 完成日期 | 工作剩余天数
#1 | 准备好了 2012 年 12 月 5 日 | 0.14 工作 #2 | 持有 | 2012 年 12 月 5 日 | 0.25 工作 #3 | 准备好了 2012 年 12 月 6 日 | 1.0

完成日期由...计算

if(Days Left > 0, WORKDAY(Previous Project's Completion Date, Days Left) 字面意思是： =if(J5>0,WORKDAY(G4,J5,vars!$A$2:$A$27),"")

这一切都很好。但现在我想检查状态列。如果上一个工作的状态处于搁置状态，那么我想跳过那个工作并检查下一个工作。

所以基本上我需要遍历单元格，直到找到下一个不在 HOLD 的工作并抓住那个完成日期。

我在想这样的事情：

=if(J5>0,WORKDAY(custom_function(G4),J5,vars!$A$2:$A$27),"")

对这种情况有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:35:53.717

不幸的是，这是不可能的。您不能编写“元”自定义函数。传递给您的函数的参数`v`，无论它只是一个单元格、一行或一列还是整个工作表，始终是单元格的值，而不是它们的“引用”或范围对象。

好消息是您已经有内置函数来执行此操作，例如`=COLUMN(C1)`. 每当您有一个内置函数替代自定义函数时，您都应该使用内置函数。好吧，我会更进一步说：永远不要使用自定义函数。如果您确实需要脚本来进行计算，请使用另一种调用方式，即自定义菜单、图像“按钮”、`onEdit`触发器等。特别是现在您正在学习，完全避免自定义功能。他们不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:08:25.447

+Henrique 已回答您关于将哪些信息传递给自定义函数的一般问题。

* * *

为了回答您编辑中的特定用例，具有本机函数的公式可能是（假设 G 列中的日期按升序排列，状态为 F 列）：

`=IF(J5>0;WORKDAY(MAX(FILTER(G$2:G4;F$2:F4<>"HOLD"));J5;vars!$A$2:$A$27);"")`

# javascript - 表单不使用 javascript 重置

> ID：13726008
> 
> 赞同：1
> 
> 时间：2012-12-05T14:58:13.757
> 
> 标签：javascript, jquery, html, forms

我正在尝试重置表单，但它并没有清除之前的选择。因此，当我刷新页面并提交时，它会记住旧值并提交它们。即使我没有在表格上做出任何选择。这是代码：

```
<script>
 $(function(){ 
   $("#eventForm")[0].reset();
   });
</script> 
```

谢谢

编辑：表格

```
<form id="eventForm">            
     <select name="eventer" id="abc">
        <option value="" disabled="disabled" selected="selected">Select  Event</option>
        <option value="USA">US</option>
        <option value="UK">UK/option>
        <option value="Fr">France</option>
     </select>

    <input type="submit" id="open" onclick="heading()" value="Start" />
    <input type="button" id="close" onclick="closeAnalysis()" value="Stop"/> 
```

我尝试像这样清除它们，但没有成功：

```
$(document).ready(
   function(){
   $("#close").click(
    function(){
     var values = [];
     var selected = $("select").each(
      function(){
      values.push( $(this).val());
      });
    this.form.reset();
    for (i=0;i<selected.length;i++)
    $(selected[i]).val(values[i]);
  });
  }
 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:24:07.273

[reset()](https://developer.mozilla.org/en-US/docs/DOM/form.reset)将字段返回到加载页面时设置的初始值。它不会删除文本。如果要删除文本，则必须遍历元素并清除它们。

# java - 将输入写入二进制文件并将其作为 int 读回（取回十进制值）

> ID：13726010
> 
> 赞同：3
> 
> 时间：2012-12-05T14:58:16.013
> 
> 标签：java

像这样写入二进制文件时：

```
byte[] content = {1,2,3};
FileOutputStream  output =   new FileOutputStream("data.bin");
DataOutputStream fileName = new DataOutputStream(output);
fileName.writeInt(content.length);
for (int i = 0; i < content.length; i++)
{
fileName.writeInt(content[i]);
System.out.println(content[i]);
}
fileName.close(); 
```

使用 FileInputStream/DataInputStream 和 .readInt() 读取它时，一切正常。（如果我使用 .skip(4); 因为第一个似乎包含一个值，即写入的位数）

但是，如果使用扫描仪将 byte[] 内容替换为输入。

```
java.util.Scanner in = new java.util.Scanner(System.in);
String inputAsString = in.nextLine();
byte[] content = inputAsString.getBytes(); 
```

我注意到它以十进制写入二进制文件。1 变成 49，2 是 50，3 是 51 ...我的问题是我如何将它读回 1、2、3，就像使用硬编码字节数组的第一个示例一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:03:51.633

当您从输入中读取数据时，它是一个字符串。所以你得到了 ascii/utf-x 字节。所以你写的值是字节。你想把你读到的输入变成一个 int：

```
int toWrite = parseInt(inputAsString);
fileName.writeInt(toWrite); 
```

请注意，51 是分配给字符 '3' 的 ascii 值

如果您将其写为 int，您也应该能够将其读入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:01:39.690

在循环中使用`in.nextByte()`以将条目读取为字节。

```
 byte[] bytes = new byte[SIZE];
     int indx = 0;
     while(in.hasNextByte()){
        bytes[indx++] = in.nextByte();
     } 
```

**编辑：**如果您不知道尺寸，那么：

```
 List<Byte> byteList = new ArrayList<Byte>();
    while(in.hasNextByte()){
       byteList.add(in.nextByte());
    }
    Byte[] bytes = byteList.toArray(new Byte[]{}); 
```

# java - 线程安全地将数据从服务传递到活动 - Android

> ID：13726011
> 
> 赞同：1
> 
> 时间：2012-12-05T14:58:18.650
> 
> 标签：java, android, singleton, android-service, asmack

我正在开发和 XMPP 聊天应用程序，并且正在使用 aSmack。我有一个服务来保存 XMPP 连接、注册名册和数据包侦听器等。

目前，我的服务登录然后调用 connection.getRoster() 并在 Singleton 类中存储/更新所有 RosterEntrys（及其状态）。然后在主要活动中，我通过调用 Singleton.getInstance().getRosterEntrys() 获取所有这些 RosterEntrys 并填充一个 listView。

毫不奇怪，我得到了各种各样的竞争条件，这不是线程安全的。我正在考虑完全放弃 Singleton 的想法，但我不确定最好的方法。

以线程安全的方式将 Set 从服务传输到 Activity 的最佳方法是什么？我看到提到将 Singleton 与 SynchronizedSet 一起使用。这值得研究吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:49:02.377

我通过在 Service 和 Activity 上注册 BroadcastListener 解决了这个问题。然后我在意图之间来回传递 ArrayList。这已被证明是在活动或服务之间传输信息集合的一种非常干净和有效的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:14:26.073

从服务到 UI，我会使用 runOnUI 方法。

“最佳”是主观的，出于某种原因，有人会说方法 1，而不是其他原因方法 2。

您可以开发一种同步方法。

我正在使用 AsyncTask-s 从网络获取消息到 UI，您可以执行`onPostExecute`在 UI 线程上运行的各种操作，例如调用同步方法。

我希望它有帮助！

# android - 另一个Linearlayout里面的Android LinearLayout

> ID：13726013
> 
> 赞同：0
> 
> 时间：2012-12-05T14:58:22.413
> 
> 标签：android, styles, android-linearlayout, padding

我有两个带圆角的线性布局，如下面的代码所示；

我试图实现的是线性布局内的线性布局，但顶部的外部布局边距会产生间隙，以便我可以输入文本。在里面看起来内部布局有一个黑色边框。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/loginbackground" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="62dp"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_margin="5dip"
            android:background="@drawable/rounded_rectangle_dark"
            android:orientation="vertical"
             >

           <!--  TextView goes here -->

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="10dip"
            android:background="@drawable/rounded_rectangle_white"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_gravity="center"
                    android:scaleType="fitCenter"
                    android:src="@drawable/icon_contact" />

                <EditText
                    android:id="@+id/login_username_edittext"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="15dp"
                    android:layout_weight="1"
                    android:hint="@string/login_username_hint"
                    android:inputType="textEmailAddress"
                    android:text="pandulce@email.com" >

                    <!--  <requestFocus />-->
                </EditText>
            </LinearLayout>
        </LinearLayout>
        </LinearLayout>

        <!-- End of Inner Layout -->

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="40dp"
            android:layout_marginRight="40dp"
            android:layout_marginTop="10dp"
            android:orientation="vertical" >

            <Button
                android:id="@+id/login_btn"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/red_button"
                android:textStyle="bold"
                android:textSize="25sp"
                android:text="@string/login_login_btn"
                android:textColor="@color/solid_white" />
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

这是颜色样式；

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle"> 
    <solid android:color="#ffffff"/>    
    <stroke android:width="1dp"
            android:color="#2B3856"/>
    <corners android:radius="20dp"/> 

</shape> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:59:46.210

我不清楚你真正想要什么。任何机会都在寻找这样的
[东西](http://i47.tinypic.com/2nl4ks8.png)？

编辑：

这是 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="62dp"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="5dip"
        android:background="@drawable/rounded_rectangle_dark"
        android:orientation="vertical" >

        <!-- TextView goes here -->

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:text="TextView"
            android:textColor="#FFFFFF" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="5dip"
            android:background="@drawable/rounded_rectangle_white"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_gravity="center"
                    android:scaleType="fitCenter" />

                <EditText
                    android:id="@+id/login_username_edittext"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="15dp"
                    android:layout_weight="1"
                    android:inputType="textEmailAddress"
                    android:text="pandulce@email.com" >

                    <!-- <requestFocus /> -->
                </EditText>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

    <!-- End of Inner Layout -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dp"
        android:layout_marginTop="10dp"
        android:orientation="vertical" >

        <Button
            android:id="@+id/login_btn"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/red_button"
            android:textSize="25sp"
            android:textStyle="bold"
            android:text="Log in"
            android:textColor="#FFFFFF" />
    </LinearLayout>
</LinearLayout> 
```

# entity-framework - 在多对多链接表上选择性禁用级联删除

> ID：13726014
> 
> 赞同：7
> 
> 时间：2012-12-05T14:58:26.033
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

是否可以在 Entity Framework 5 Code First 中自动生成的多对多链接表上选择性地删除级联删除选项？这是一个需要它的简单示例：

```
public class Parent
{
    public int Id { get; set; }

    public virtual IList<ChildA> As { get; set; }
    public virtual IList<ChildB> Bs { get; set; }
}

public class ChildA
{
    public int Id { get; set; }
    [Required]
    public virtual Parent Parent { get; set; }

    public virtual IList<ChildB> ChildBJoins { get; set; }
}

public class ChildB
{
    public int Id { get; set; }
    [Required]
    public virtual Parent Parent { get; set; }

    public virtual IList<ChildA> ChildAJoins { get; set; }
}

public class TestContext : DbContext
{
    public DbSet<Parent> Parents { get; set; }
    public DbSet<ChildA> As { get; set; }
    public DbSet<ChildB> Bs { get; set; }
} 
```

由于链接表上引入了级联删除选项，因此当前形式的此上下文将不适用于数据库。如果我要创建手动链接表，我可以使用 Fluent API 将其一侧配置为不级联，但该选项在多对多关系中不可用。

`ManyToManyCascadeDeleteConvention`我知道我可以通过删除as per [this question](https://stackoverflow.com/questions/13705441/how-to-disable-cascade-delete-for-link-tables-in-ef-code-first)来禁用所有多对多连接上的级联删除，但这不是我所追求的 - 我只是希望能够为一种关系做到这一点，或者理想情况下关系的一侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T15:19:04.187

我怀疑在 EntityTypeConfiguration 映射类中没有办法做到这一点，但我通过更改 DbMigration 类的 Up() 方法中的代码来做到这一点。

为链接表生成的代码是：

```
CreateTable(
    "dbo.ChildBChildAs",
    c => new
        {
            ChildB_Id = c.Int(nullable: false),
            ChildA_Id = c.Int(nullable: false),
        })
    .PrimaryKey(t => new { t.ChildB_Id, t.ChildA_Id })
    .ForeignKey("dbo.ChildBs", t => t.ChildB_Id, cascadeDelete: true)
    .ForeignKey("dbo.ChildAs", t => t.ChildA_Id, cascadeDelete: true)
    .Index(t => t.ChildB_Id)
    .Index(t => t.ChildA_Id); 
```

您应该能够通过将不想级联的一侧更改为 false 来使其工作：

```
 .ForeignKey("dbo.ChildAs", t => t.ChildA_Id, cascadeDelete: false) 
```

如果您可以像使用一对多一样使用 FluentAPI 来做到这一点，那就太好了，但我还没有找到一种方法来做到这一点

# c# - Windows 服务使用 Topshelf 启动然后停止

> ID：13726017
> 
> 赞同：6
> 
> 时间：2012-12-05T14:58:29.857
> 
> 标签：c#, windows-services, quartz.net, topshelf

我正在使用 Quartz.net，并且试图让 Quartz 服务器在 Windows 服务中启动。我创建了一个 Windows 服务项目并包含 Quartz.net 库。在我的服务课程中，我有：

```
protected override void OnStart(string[] args)
{
    try
    {
        Host host = HostFactory.New(x =>
        {
            x.Service<IQuartzServer>(s =>
            {
                s.SetServiceName("quartz.server");
                s.ConstructUsing(builder =>
                {
                    QuartzServer server = new QuartzServer();
                    server.Initialize();
                    return server;
                });
                s.WhenStarted(server => server.Start());
                s.WhenPaused(server => server.Pause());
                s.WhenContinued(server => server.Resume());
                s.WhenStopped(server => server.Stop());
            });

            x.RunAsLocalService();
            //x.RunAs(@"mydomain\mysusername", "mypassword");

            x.SetDescription(Configuration.ServiceDescription);
            x.SetDisplayName(Configuration.ServiceDisplayName);
            x.SetServiceName(Configuration.ServiceName);
        });

        host.Run();
    }
    catch (Exception ex)
    {
        Log.Error(ex.Message);
        Log.Error(ex.InnerException.Message);
    }

} 
```

我还创建了一个 Windows 服务安装程序，并使用以下命令在 Visual Studio 的命令提示符下成功安装了 Windows 服务：

> installutil MyWindowsService.exe

当我在 Windows 服务列表中查看我的服务并尝试启动该服务时 - 我收到一个消息对话框：

```
The MyWindowsService service on Local Computer started and the
stopped. Some Services stop automatically if they are not in use by
other services or programs. 
```

这是我记录到事件查看器（log4net）的输出：

## 窗口事件

1

```
Information 05/12/2012 14:52    MyWindowsService.exe    "2012-12-05
14:52:24,044 [11528] INFO 
Common.Logging.Factory.AbstractLogger.Info(:0) - Finished Starting
MyProject Windows Service." 
```

2

```
Error   05/12/2012 14:52    Service1    "Service cannot be started.
System.NullReferenceException: Object reference not set to an instance
of an object.    at MyWindowsService.MyProject.OnStart(String[] args)
in c:\My Projects\MyProject
v40\CO40\MyWindowsService\MyProject.cs:line 58    at
System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback(Object
state)" 
```

3

```
Error   05/12/2012 14:52    MyWindowsService.exe    "2012-12-05 14:52:24,042
[6048] ERROR Common.Logging.Factory.AbstractLogger.Error(:0) - The
Topshelf.HostConfigurators.WindowsServiceDescription service has not
been installed yet. Please run 'MyWindowsService, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=null install'. " 
```

4

```
Error   05/12/2012 14:52    MyWindowsService.exe    "2012-12-05 14:52:24,041
[6048] FATAL Topshelf.Windows.WindowsServiceHost.Run(:0) - The
Topshelf.HostConfigurators.WindowsServiceDescription service has not
been installed yet. Please run 'MyWindowsService, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=null install'. " 
```

5

```
Information 05/12/2012 14:52    MyWindowsService.exe    "2012-12-05
14:52:24,039 [6048] INFO  Topshelf.Windows.WindowsServiceHost.Run(:0)
- Starting up as a winservice application " 
```

6

```
Information 05/12/2012 14:52    MyWindowsService.exe    "2012-12-05
14:52:24,038 [6048] DEBUG Topshelf.Builders.RunBuilder.CreateHost(:0)
- Running as a Windows service, using the service host " 
```

7

```
Information 05/12/2012 14:52    MyWindowsService.exe    "2012-12-05
14:52:24,027 [6048] INFO  Topshelf.OS.OsDetector.DetectOs(:0) -
Detected the operating system: 'win' " 
```

8

```
Information 05/12/2012 14:52    MyWindowsService.exe    "2012-12-05
14:52:23,895 [6048] INFO 
Topshelf.HostConfigurators.HostConfiguratorImpl.CreateHost(:0) -
Topshelf v2.2.2.0, .NET Framework v4.0.30319.17929 " 
```

9

```
Information 05/12/2012 14:52    MyWindowsService.exe    "2012-12-05
14:52:23,829 [11528] INFO 
Common.Logging.Factory.AbstractLogger.Info(:0) - Starting MyProject
Windows Service.. " 
```

有谁知道如何在不引发此错误的情况下启动此服务？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T20:45:14.970

*我创建了一个 Windows 服务项目...我还创建了一个 Windows 服务安装程序，并使用以下命令在 Visual Studio 的命令提示符下成功安装了 Windows 服务： installutil MyWindowsService.exe*

Topshelf 服务**已经基于 ServiceBase**并进行自己的安装 - 您有一个控制台应用程序，您可以在开发中与您的应用程序一起运行以查看它是否正常工作，然后当您想将其作为服务安装时，您可以转到命令提示符管理员并致电`MyWindowsService.exe install`- 请参阅所有选项[的文档](http://docs.topshelf-project.com/en/latest/overview/commandline.html)。它可能包含在另一个服务中，但我不明白你为什么要这样做。

[文档](http://docs.topshelf-project.com/en/latest/configuration/quickstart.html)中有一个功能服务的基本示例。

如果您确实需要安装程序，可以在[http://www.bjoernrochel.de/2010/01/09/how-to-integrate-a-topshelf-based-service-with-vs-setup-projects/ 找到](http://www.bjoernrochel.de/2010/01/09/how-to-integrate-a-topshelf-based-service-with-vs-setup-projects/)一个（但是自编写以来，Topshelf 的命令行语法发生了变化，需要更新。）

（编辑：我刚刚注意到事件编号 3 和 4 包含文本“请运行 'MyWindowsService .. install'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:17:00.550

当我使用的值不仅仅是 az 字符时，请尝试`.`从我遇到麻烦中删除。`s.SetServiceName("quartz.server");``SetServiceName`

这就是服务在 Windows 服务中注册的名称（您将使用的名称`sc start quartzserver`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T11:17:29.843

当我有不同的服务名称和显示名称值时，我收到了这个错误。我有“Auditing.Service”和“Auditing Service”，我将它们都更改为“Auditing.Service”并启动了 Windows 服务。

所以我的建议是：使服务和显示名称匹配。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T15:06:33.277

如果我正确读取日志，则该服务似乎`Topshelf.HostConfigurators.WindowsServiceDescription`未安装或未运行。

您在第 58 行也有一个 NRE `c:\My Projects\MyWindowsService\Service1.cs`。这可能与之前的错误有关。

您的下一个选择是直接向 TopShelf 社区寻求帮助：http: [//topshelf-project.com/contact/](http://topshelf-project.com/contact/)

# android - 使用 HoloEverywhere 将 Holo 主题添加到 2.3.6/Error

> ID：13726018
> 
> 赞同：1
> 
> 时间：2012-12-05T14:58:33.397
> 
> 标签：android

我如何在我的应用程序中使用 holoeverywhere？

将库添加到我的项目时出现以下错误，指南如下：

[导入 HoloEverywhere 时出错](https://stackoverflow.com/questions/10608539/error-importing-holoeverywhere)

```
`[2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__styles.xml:214: error: Error: No resource found that matches the given name: attr 'android:spinnerMode'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:63: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Spinner'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:65: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.Spinner'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:68: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ListView.DropDown'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:70: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ListView.DropDown'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:73: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.PopupWindow'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:75: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.PopupWindow'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__styles.xml:258: error: Error: No resource found that matches the given name: attr 'android:animationResolution'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:78: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ProgressBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:80: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ProgressBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:83: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ProgressBar.Horizontal'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:85: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ProgressBar.Horizontal'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:88: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.AutoCompleteTextView'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:90: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.AutoCompleteTextView'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__styles.xml:328: error: Error: No resource found that matches the given name: attr 'android:textAllCaps'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:93: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Menu'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:96: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Title'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:98: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Title.Inverse'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:100: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Subtitle'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:102: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Subtitle.Inverse'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:104: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Title'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:106: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Title.Inverse'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:108: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Subtitle'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:110: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Subtitle.Inverse'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:113: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:115: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Large'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:117: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Large'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:119: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Small'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__styles.xml:121: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Small'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v11\abs__themes.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v11\abs__themes.xml:6: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v11\abs__themes.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v11\abs__themes.xml:10: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:14: error: Error: No resource found that matches the given name: attr 'android:actionBarWidgetTheme'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:22: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:26: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__themes.xml:196: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__themes.xml:197: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__themes.xml:198: error: Error: No resource found that matches the given name: attr 'android:windowCloseOnTouchOutside'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:30: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Dialog'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__themes.xml:222: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__themes.xml:223: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values\abs__themes.xml:224: error: Error: No resource found that matches the given name: attr 'android:windowCloseOnTouchOutside'.
 [2012-12-05 20:23:11 - com.sditya.quadratic.equation.Quadratic] C:\Users\aditya\workspace\ActionBarSherlock\library\res\values-v14\abs__themes.xml:32: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.Dialog'.` 
```

* * *

## 或者告诉我是否有另一种简单的方法可以将 Holo 深色主题添加到在 2.3.6 上运行的应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T19:47:21.757

如果你还没有解决你的问题，我已经找到了解决方案。我已经在 HoloEverywhere 提供的 DemoActivity 应用程序上完成了它，但我认为在你的应用程序中使用它也不会有问题。

最重要的是**导入所有库项目**，顺序不重要：

*   库文件夹中的 HoloEverywhere 库
*   滑动菜单文件夹中的滑动菜单
*   来自 contrib/ActionBarSherlock 库的 ActionBarSherlock 库

首先关闭所有不相关的项目，因为它们的错误/警告将从问题控制台中消失，因此更容易找到连接到 HoloEverywhere 的项目。

之后，请确保您在所有清单文件中都有

`<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16" />`

您甚至可以将 16 更改为 17，因为它是最新的 SDK。这条线的最短解释意味着，这个应用程序可以在任何具有高于 7 和低于 16 的 SDK 的 Android 设备上运行。

然后，对于所有添加的库，将**项目构建目标**更改为尽可能高（我放了 4.2）。我认为至少它必须是 SDK14 (4.0)。您将看到目标已更改，因为在项目树中您将拥有包含正确 android 目标库的文件夹。我必须警告您，更改此文件夹可能需要一两分钟 - 请继续关注进度条。

如何更改项目构建目标：

项目名称上的鼠标右键 -> 属性 [在列表的几乎底部]（或当项目名称在菜单栏项目 -> 属性上突出显示时）在打开的窗口左面板 -> Android -> 右面板中选择正确的目标。然后应用并确定。

最后一件事是**清理每个项目**（同样可能需要一段时间，特别是如果你有，因为我有自动构建选项）：菜单栏->项目->清理->选择与此相关的所有项目（如果你关闭了所有没有相关的，而不是您应该只看到此应用程序的项目），然后确定。

多亏了这一点，您将使用更高版本的 SDK 中添加的内容重建您的 R 文件，因此您可以在代码中引用它们。

现在你不应该有更多的错误，只有警告。

如果您仍然有一些问题，请在下面评论，也许我可以帮助您。

为了表明它在那里工作，您可以从运行 Android 2.3.4 的实际设备上截取屏幕截图

![2.3.4 HoloEverywhere DemoActivity](../Images/ec7b44256772f8065d5135905f2bd33f.png) ![2.3.4 HoloEverywhere DemoActivity](../Images/b816815ca99274c532dc16840f63f602.png)

如果这有帮助，或者是您问题的答案，请不要忘记正确标记。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T15:08:41.457

1.  从您的工作区中删除所有项目；
2.  导入 ActionBarSherlock；
3.  导入 HoloEverywhere；
4.  导入您的项目；
5.  确保 HoloEverywhere 引用 ActionBarSherlock 而你的引用 HoloEverywhere（你可以通过访问*项目属性*-> *Android* -> *Library* -> *Add*来做到这一点）；
6.  禁用*项目*->*自动构建*；
7.  清理所有项目（记得取消勾选*立即开始构建*）；
8.  右键单击 ActionBarSherlock 项目，然后单击*Build project*；
9.  分别对 HoloEverywhere 和您的 HoloEverywhere 执行相同操作。

您必须根据它们的依赖顺序分别构建每个项目。

# vbscript - 替换文本添加文本，但保留文件名

> ID：13726026
> 
> 赞同：-1
> 
> 时间：2012-12-05T14:58:53.757
> 
> 标签：vbscript, batch-file, rename

我现在有 2 周时间忙于寻找一个好的剧本。当我以为我找到了我的剧本时，这里的事情发生了变化。我需要这个脚本，它对我很重要。我希望有人能帮助我。

每天都会下载一个带有日期的变量文件名。

昨天的示例文件：*currency1.20121205*

现在我运行一个bat文件：`ren C:\blp\bbdl\_csv\* *?.csv`

文件名现在是*currency1.20121204.csv*

2件事必须发生：

1.  更改文件内的文本：EUR to USD
2.  在末尾添加文本（我已经找到了一个脚本，但一开始就不能使用 EUR）

要添加的文本：*EUR CMPN 货币|0|4|EUR||复合（纽约）|1.00000|*

我在互联网上看到的是大多数脚本都会更改文件名，但这必须保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:27:52.897

批量你可以尝试这样的事情：

```
setlocal EnableDelayedExpansion

cd C:\blp\bbdl\_csv

for %%f in (*) do (
  set file=%%f
  for /f %%l in (!file!) do (
    set line=%%l
    echo !line:EUR=USD! >> "!file!.csv"
  )
  echo EUR CMPN Curncy^|0^|4^|EUR^|^|Composite(NY)^|1.00000^| >> "!file!.csv"
)

endlocal 
```

不过，用 VBScript 做起来会更容易：

```
Set fso = CreateObject("Scripting.FileSystemObject")

For Each f In fso.GetFolder("C:\blp\bbdl\_csv").Files
  text = f.OpenAsTextStream().ReadAll
  Set f2 = fso.OpenTextFile(f.Path & ".csv", 2, True)
  f2.WriteLine Replace(text, "EUR", "USD")
  f2.WriteLine "EUR CMPN Curncy|0|4|EUR||Composite(NY)|1.00000|"
  f2.Close
Next 
```

这两个代码片段都在我的脑海中，所以没有经过测试。

# android - 同步 BlueStack 和 Eclipse

> ID：13726028
> 
> 赞同：2
> 
> 时间：2012-12-05T11:32:03.623
> 
> 标签：android, eclipse, bluestacks

在我的开发中，我使用 Bluestack 应用程序来测试我的 android 应用程序，所以我的大问题是每次构建代码并对其进行测试时，Bluestack 都会再次重新安装我的 .apk，这阻止了我的 Eclipse ......所以我想找到我们如何在不重新启动 Eclipse 的情况下同步 Eclipse 和 Bluestack ！

谢谢 ;）

# cordova - PhoneGap 中的相对媒体源

> ID：13726030
> 
> 赞同：3
> 
> 时间：2012-12-05T14:59:11.367
> 
> 标签：cordova, audio, cross-platform

我想开发一种带有PhoneGap（Cordova 2.2.0）的媒体播放器，并将Adobe的[Phonegap Build](http://build.phonegap.com)用于其他平台。这意味着几乎所有东西都必须是相对的；）我的应用程序的开发是在 Android 2.3 上（最小目标）。

这是我的问题：

当文件的路径来自网络时`http://...`（`/android_asset/www/media/song.mp3`但是，当尝试相对（`media/song.mp3`）执行此操作时，歌曲不会开始播放，给我一个错误代码：

> 媒体播放器：错误（1，-2147483648）

如果我再次按播放，我会收到更多错误：

> MediaPlayer: start call in state 0 //表示没有文件
> MediaPlayer: error (-38, 0)
> MediaPlayer: Error (-38,0)

有没有办法让它相对工作，而不需要：

```
if(Android){
  src=...
}
if(iOS){
  src=...;
}... 
```

上述选项非常耗时，并且如果其中一个平台的路径发生更改，则容易出错。

这是缩小的 Javascript 代码：

```
var song;
var app = {
  initialize : function() {
    this.bindEvents();
  },
  bindEvents : function() {
    document.addEventListener('deviceready', this.onDeviceReady, false);
  },
  onDeviceReady : function() {
    app.receivedEvent('deviceready');
    song = new Media("/android_asset/www/media/song.mp3");
    console.log("The song is: " + (song.mediaStatus!=0?"okay":"none"));
    $('#play').click(function() {
      song.play();
      console.log("Song started");
    });
    $('#pause').click(function() {
      song.pause();
      console.log("Song paused");
    });
    $('#stop').click(function() {
      song.stop();
      console.log("Song stopped");
    });
  },
  receivedEvent : function(id) {
    console.log('Received Event: ' + id);
  }
}; 
```

如果还有什么需要说的，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:43:13.673

媒体 API 未在 PhoneGap 运行的所有操作系统上正确规范化。如果您想在 Android 上播放 assets 文件夹中的内容，则需要指定完整路径。您最好使用[device.name](http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#device.name)属性来检测您是否在 Android 上并预先添加*/android_asset/www/*路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T13:17:38.280

```
var media = {
basePath: '',
sounds: [],
init: function(){
    if(device != undefined && device.platform == 'Android')
    {
            this.basePath = '/android_asset/www';
    }
    this.sounds['eggTap'] = new Media(this.basePath+'/sounds/click.mp3')
},
play: function(target){
    this.sounds[target].stop()
    this.sounds[target].play()
} 
```

}

# facebook - Facebook 群组页面：添加投票选项和照片

> ID：13726037
> 
> 赞同：1
> 
> 时间：2012-12-05T14:59:35.567
> 
> 标签：facebook, facebook-graph-api

通过 Facebook 图形 API：

我可以在 Facebook 群组中提问（例如，“你喜欢德文风格的烤饼还是康沃尔风格的烤饼？”）并附上一张照片（例如，一堆烤饼，一些加奶油然后果酱，一些加果酱然后奶油）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:28:51.487

目前这是不可能的。

[https://developers.facebook.com/docs/reference/api/question/](https://developers.facebook.com/docs/reference/api/question/)

# java - 俱乐部会员系统数据库需要哪些表？

> ID：13726039
> 
> 赞同：0
> 
> 时间：2012-12-05T14:59:40.400
> 
> 标签：java, mysql, database-design, system, system-analysis

这个俱乐部会员系统是用java制作的。我已经做的是一个数据库，其中包含 1 个名为 accounts 的表，其中存储了注册成员和管理员，该表的字段是用户名、名字、姓氏、密码、date_join、角色等......

到目前为止，我们的程序所做的是，如果该人注册，那么他将自动成为会员，直到管理员也将他提升为管理员，会员在系统中具有有限的权限，这与具有完全权限的管理员不同。

我们的教授说我们需要修改我们的计划，并为任何想加入我们俱乐部的人增加付款要求，并且会员资格应在一定时间内到期。

由于我们缺乏在俱乐部方面的经验，我们不知道应该如何实现该附加功能。我们是否需要为付款创建另一个表并将其链接到帐户表？而在程序中，注册用户是否需要先支付一定的俱乐部费用才能注册成功？还是他现在可以注册然后再付款？当他的帐户到期时，如果他不更新他的会员资格，他是否会从数据库中删除？

任何人对这种系统有想法，并可以提出一个好的实施方案？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:42:36.030

从简单的开始，命名您希望管理的所有名词。这些是你的表名。

然后考虑与您可能要跟踪的每个名词有关的所有形容词。如果一组形容词适合某个类别，则在关联表中创建一列。如果形容词总是适用于所有可能的名词，那么就忽略它。数据库旨在跟踪随时间变化的数据，最好不要存储常量。

然后想想不能缺少的形容词。如果您允许选择退出生日提醒，则可能会丢失某人的出生日期。也许您的俱乐部是一个以生日为导向的俱乐部，而缺少名字将无异于混乱。

然后查看所需的形容词。找到一些单独或组合**识别**表格中的条目的条目。对于某些人来说，一个人可能通过他们的名字来识别，这意味着每个不相同的名字都会导致访问不同的人，而每个相同的名字都会导致访问同一个人。如果您曾经遇到过两个 John Smith，或者曾经因结婚而改名，您会立即发现，仅使用姓名列并不是确定身份的理想方式。标识字段的集合称为主键。

然后想想名词是如何相关的。如果 Membership 与 Person 不同，则需要将两者结合在一起。连接表有三种基本技术，还有更高级的技术，以后可能最好应用。

1.  一个 X（Person）只能与一个 Y（Membership）关联，那么 X 和 Y 表可能是合并为一个表的候选者。这称为 1:1 关系。

2.  一个 X（Person）关联了多个 Y（Memberships），那么 Y（Membership）表应该包含一个外键引用，指向与之关联的 X（Person）的主键。这称为 1:N 关系。

3.  许多 X（Persons）与一个 Y（Membership）相关联，那么 X（Person）表应该包含一个外键引用，指向与之关联的 Y（Membership）的主键。这称为 N:1 关系

4.  许多 X（人员）与许多 Y（成员）相关联。简而言之，一个人可能具有特定的会员资格，是团体会员资格的一部分，可能已经购买了多会员资格套餐，和/或可能只有一个会员资格。在这种情况下，您需要使用构造的“关系”表来管理关系，该表包含两个外键引用，一个指向 X 和 Y 的每个主键。最后，这两个外键引用可能应该（组合）是关系 XY (PersonMembership) 表的主键。

还有其他连接表的方法，但基本上它们是最后一种技术的扩展，您可以增加连接表的数量。

这将为您提供一个良好的开端，并且您很快就会发现您做出的选择与其他任何人都会做出的选择不同，这就是标准数据库表集很少的原因。一旦你建立并运行了一个基本框架，你会发现你可能总是同时提取两组相关数据，然后（如果你走那么远）你可能会考虑打破一些性能规则. 只是不要试图从一开始就打破规则；您必须遵守规则才能知道何时违反规则。这样，您就会知道在实现目标时会失去什么，并且确实避免了在实际使用中引入的陷阱。

# c# - 在 WP7 中存储 LiveConnectSession

> ID：13726042
> 
> 赞同：4
> 
> 时间：2012-12-05T14:59:55.800
> 
> 标签：c#, windows-phone-7

我想在我的 Windows Phone 7 应用程序上使用 Hotmail API。因此，我必须授予对我的移动应用程序的访问权限。我使用[Microsoft Live Connect API](http://msdn.microsoft.com/en-US/library/live/ff621314)来做到这一点，它在开始时确实非常有用。我使用以下代码进行身份验证：

```
string[] requiredScope = { "wl.signin", "wl.calendars_update", "wl.offline_access" };
LiveAuthClient auth = new LiveAuthClient(Configuration.ClientID);
auth.LoginCompleted += new EventHandler<LoginCompletedEventArgs>(authInitializeCompletedHandler);
auth.LoginAsync(requiredScope); 
```

ClientID 是我从 MS 获得的用于注册我的应用程序的 ID。我的回调看起来（很简单）是这样的：

```
private void authInitializeCompletedHandler(object sender, LoginCompletedEventArgs e)
{
    if (e.Status == LiveConnectSessionStatus.Connected)
    {
        this._session = e.Session; // Session hat AccessToken und RefreshToken
        this._isAuthorized = true;
        callDelegates();
    }
} 
```

如果该调用成功（并且它当前成功了，所以它有效），我存储检索到的 Session。此会话可在 LiveConnectClient 构造函数中使用，以启用与 MS API 的通信，在我的应用程序中为 Hotmail API。

```
LiveConnectClient client = new LiveConnectClient(_session); 
```

我的问题是我想以某种方式保存该会话，以便当应用程序被墓碑化并重新获得焦点时，我不希望用户再次请求许可 - 他已经给了我。我自己发现返回的会话包含 AccessToken、RefreshToken 和 Expires 属性（我知道那是什么，这不是问题）。我如何在以后的通话中使用该信息？Microsoft 的相关文档到此结束，我找不到任何有用的信息。

我发现了 2 个解决方法：

*   [Live Connect Button](https://stackoverflow.com/questions/10946629/wp7-how-to-store-liveconnectsession-during-tombstoning)：不应该是要走的路，因为我不想显示 Live Button 只是因为我得到了我的会话变量。
*   [RESTful API](http://msdn.microsoft.com/en-us/library/live/hh243649.aspx)：这需要我完全重写到目前为止所做的一切，因为一切都依赖于 LiveConnectClient（这使得通信非常容易）。

但我真的不想使用这种解决方法。我相信/希望有更好的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T00:18:18.413

看起来这个问题的答案如下

> 1.  确保您的应用程序同时包含 wl.signin 和 wl.offline_access 范围。
>     
>     
> 2.  如果您未使用 SDK 中提供的登录控件，则应始终在应用启动时调用 LiveAuthClient.InitializeAsync。如果 InitializeAsync 未返回有效会话，则仅调用 LiveAuthClient.LoginAsync。
>     
>     
> 
> 这些步骤将确保您收到刷新令牌，因此无需在第一次后提示登录或同意。

From: [http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/6df1f31d-a22c-469c-b9f4-5c79e0882701](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/6df1f31d-a22c-469c-b9f4-5c79e0882701)

# javascript - Jquery计时器只运行一次？

> ID：13726043
> 
> 赞同：1
> 
> 时间：2012-12-05T15:00:04.830
> 
> 标签：javascript, jquery, jquery-plugins

我正在研究一些 js/jQuery，但我遇到了一个问题。

有一个计时器应该每 x 秒执行一次功能。然而，问题在于计时器似乎只执行一次。我问了一些朋友，但他们也不知道出了什么问题。

所以，如果有人有线索，请！

```
<script type="text/javascript">

    var id = 0;
    var count = 0;
    var obj;

    console.log(id);

    function getTweetsWithQuery(q) {
        console.log('getTweetsWithQuery did run');
        $.ajax({
            type: "GET",
            url: "ajax.php",
            data: "q=" + q,
            success: function(msg){

                obj = jQuery.parseJSON(msg);
                start();
            }
        });
        console.log('getTweetsWithQuery finished');
    }

    function updateTweets(obj) {

       var count = 0;

       $('#tweet' + id).animate({opacity: 0}, 1).delay(500);
       $('#tweet' + id).text(obj[count].text);
       $('#tweet' + id).delay(500).animate({opacity: 1}, 500);

       console.log(obj[count].text);
       console.log('updateTweets did run');

       if(id == 9){
        id = 0;
       }else {
        id++;
       }

       if(count == obj.length){
        count = 0;
       }else {
        count++;
       }

       console.log('Next id: ' + id);
       console.log('Next count: ' + count);

   }

   function start() {

    console.log('start did run')

    var timer = $.timer( updateTweets(obj) );

    timer.set( { time : 500, autostart : true } );

   }
 </script> 
```

从 html 中调用 getTweetsWithQuery() 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:02:43.750

您正在调用该函数，而不是为其分配引用。

```
var timer = $.timer( function(){ updateTweets(obj); } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:14:51.553

好的，这并不理想，但我认为这可能有效：

```
function start() {

    console.log('start did run')

    var timer = $.timer( function(){
        ar count = 0;

        $('#tweet' + id).animate({opacity: 0}, 1).delay(500);
        $('#tweet' + id).text(obj[count].text);
        $('#tweet' + id).delay(500).animate({opacity: 1}, 500);

        console.log(obj[count].text);
        console.log('updateTweets did run');

        if(id == 9){
           id = 0;
        }else {
           id++;
        }

        if(count == obj.length){
           count = 0;
        }else {
           count++;
        }

        console.log('Next id: ' + id);
        console.log('Next count: ' + count);
    });

    timer.set( { time : 500, autostart : true } );

   } 
```

从我在该插件的源代码中看到的，它似乎有函数对象的问题。我不知道为什么，我也不够熟练来消化源代码并弄清楚发生了什么，但如果你传入一个函数定义，它似乎确实有效。

这是一个小提琴，展示了您拥有的东西以及我如何让它发挥作用。

# java - 在 ArrayList 中搜索特定对象

> ID：13726046
> 
> 赞同：3
> 
> 时间：2012-12-05T15:00:10.247
> 
> 标签：java, class, object, arraylist

我有一堂课叫`Person`. 它有以下内容`attributes`；它有 2 个属性`ID`， 和`Telephone`。1个人可以有很多电话，所以你可能会在下面看到有多个ID的人。

```
public ArrayList<Person> all(){

    p = new ArrayList<Person>();
    p.add(new Person(1,266763));
    p.add(new Person(1, 358643));
    p.add(new Person(2, 4667763));

    return p; 
} 
```

还有一个类叫做`PersonDB`. 它将有一个名为 的方法`findPersonWithTheTelephoneNumber(int telephone)`。

```
public void findPersonWithTheTelephoneNumber(int telephone) {
   Person pp = new Person();
   ArrayList<Person> personList = pp.all();

   // Now i want to find the Person object that will match the telephone number of these list of personList.

} 
```

personList 有 3-4 个 Person 对象。我需要搜索 PersonArrayList 并找到与 Person 对象匹配的对象。我怎样才能做到这一点？

注意：我试过了`personList.contains()`。但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:02:40.217

```
//...
Person foundPerson = null;
for (Person p : personList){
    if (p.getTelephone() == telephone){
         foundPerson = p; //or simply return it from there
         break;
    }
} 
```

对于实施`hashCode`，`equals`您可以观察[本教程](http://www.java-samples.com/showtutorial.php?tutorialid=586)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:04:08.960

首先，为什么你没有一个为特定的人`List<Integer>`存储你所有的东西。`telephoneNumbers`这样，您就不必`Person`为每个`telephoneNumber`相同的实例创建一个单独的实例`personId`，这根本没有意义。

您可以将 Person 类的属性更改为： -

```
private int id;
private List<Integer> telephoneNumbers = new ArrayList<Integer>(); 
```

然后有一个人员列表，就像你拥有的那样。

要查找`Person`具有特定电话号码的电话号码，您需要遍历您的`List<Person>`.

```
for (Person person: personList) {
    if (person.getTelephoneNumbers().contains(telephone)) {
        return person;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:02:32.413

> 我试过 personList.contains()

确保覆盖`Object.equals()`和`Object.hashCode()`Person 类。但是假设电话号码是唯一的，您必须对电话号码进行平等检查。这不是一个解决方案，而是一种解决方法。使用bellum的答案。将其标记为正确答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:15:48.893

许多解决方案通过电话号码将两个人定义为相等，但是如果将住在同一所房子和/或具有相同电话号码的两个人添加到列表中怎么办？哪一个是正确的？。

在急于寻找此人之前，您必须定义一种方法来确定两个人是否确实相等，而不会产生模棱两可的结果。除非您通过使其唯一来限制基于该电话号码的人员的创建（您没有在您的问题中澄清这一点，所以我认为没有这样的限制），搜索的结果是未定义的。

您正在使用，`ArrayList`因此您甚至无法保证插入订单的结果。

我建议您将平等测试建立在一个人的`ID`而不是电话上。为了防止`id`' 的修改，只需为其定义一个 getter，根本不定义`setId`方法。然后，您`equals`可以`hashcode`基于`id`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T15:02:14.743

您需要迭代数组，一一检查电话号码的人，当您到达需要的人时，只需将其分配给一个变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T15:02:40.360

使用`for`循环遍历列表。在循环的正文中，检查列表中人员的电话号码是否是您要查找的电话号码。如果是，则返回该人。

请参阅Oracle 的 Java 教程中[的`for`声明](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)。

# android - Android解析字符串引用的xml

> ID：13726047
> 
> 赞同：0
> 
> 时间：2012-12-05T15:00:10.383
> 
> 标签：android

是否可以通过将文件名引用为 res/values 中的字符串来解析位于资产中的 xml 文件？

```
 Document doc = db.parse(assetManager.open("questions.xml")); 
```

而不是 questions.xml 之类的 @string/questions.xml？我很难让这个工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:30:32.970

您可以使用以下代码执行此操作：

```
Resources res = getApplicationContext().getResources();
String filename = res.getString(R.string.questions);
Document doc = db.parse(assetManager.open(filename)); 
```

或者在一个简单的行中：

```
Document doc = db.parse(assetManager.open(getApplicationContext().getResources().getString(R.string.questions)); 
```

希望有帮助。

# vb.net - 从对象内的数组中解析 json 值

> ID：13726049
> 
> 赞同：0
> 
> 时间：2012-12-05T15:00:15.083
> 
> 标签：vb.net, json, json.net

我在 .net 中使用 Newtonsoft 来解析 json 内容，并希望我实际上已经更好地研究了这一点。我创建了一个 obj 来解析字符串文本，方法是将所有子项列出到 JTOken 列表中，然后从每个 JProperty 中获取各个值。但现在我需要捕获一个值列表，但不知道该怎么做。

```
 Dim jobj As JObject = JObject.Parse(msg.Body.ToString())
 Dim results As List(Of JToken) = jobj.Children().ToList
 For Each item As JProperty In results
            item.CreateReader()
            If item.Name = "id" Then
                statid = item.Value
            End If
 etc... 
```

但现在我在对象中找到以下项目并且需要所有“值”和“标签”

```
{"results":
 {
 {
   "language": {
   "value": "ja"
},
"matching_results": [
{
  "value": "iPhone5",
  "tag": "JOE"
},
{
  "value": "iPhone5",
  "tag": "BOB"
}
],} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:07:53.723

我在处理 JSON 时遇到了同样的问题，我找到了这个解决方案：-

```
function jsonParse(data)
{
  if(typeof data=='object')
  {
    for(var obj in data)
    {
      if(obj=='value')
      {
        console.log('value---',data[obj])
      }
      else if(obj=='tag')
      {
        console.log('tag---',data[obj])
      }
      jsonParse(data[obj])
    }
  }      
} 
```

请使用您的变量删除所有控制台，我希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:32:52.720

这只是将对象分解为标记并将值读入列表的问题。

```
 Dim tags As List(Of JToken) = 
 item.Last.SelectToken("matching_results").Children()("tag").ToList 
```

# objective-c - 从情节提要加载后调整 UIView

> ID：13726051
> 
> 赞同：5
> 
> 时间：2012-12-05T15:00:21.447
> 
> 标签：objective-c, ios, uiview, uistoryboard

我有一个`UIView`名为的自定义类，它与通过情节提要配置的`MyView`一起使用。`UIViewController`大多数视图属性是通过 Interface Builder 配置的；但是，在将它们设置为按钮的背景之前，我需要以编程方式调整几个图像，如下所示：

```
-(void)setupVisuals {
    UIImage *image = [[UIImage imageNamed:@"myButton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];
    // _myButton is an IBOutlet property set through the storyboard:
    [_myButton setBackgroundImage:image forState:UIControlStateNormal];
} 
```

问题是我不能`[self setupVisuals]`从初始化程序^*调用，因为当时是`_myButton`。`nil`

`MyViewController`我通过将此行添加到`viewDidLoad:`

```
[(MyView*)self.view setupVisuals]; 
```

有了这个电话，一切正常。然而，这感觉像是一种变通方法，而不是一个可能是相对常见问题的解决方案。

是否有`UIView`覆盖方法或任何其他机制来完成`MyView`视觉效果的初始化而不利用该`viewDidLoad:`机制？

* * *

^*在这种情况下，初始化器是`initWithCoder:`因为视图是从情节提要中加载的。我验证了初始化程序被正确调用，但视觉效果还没有准备好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:11:57.870

听起来您使用`viewDidLoad:`正确。根据 Apple 的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 您通常覆盖此方法以对从 nib 文件加载的视图执行额外的初始化。

如果您的目标是在`UIView`级别封装此功能，请尝试[`layoutSubviews`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/layoutSubviews).

# login - 登录弹出窗口中的未知错误

> ID：13726053
> 
> 赞同：1
> 
> 时间：2012-12-05T15:00:30.263
> 
> 标签：login, facebook-login

我是名为 Qubit 的 Facebook 应用程序的管理员。我们使用 facebook 登录按钮 (fb:login-button )，并且从 22/11 aprox 开始。我们有一个奇怪的行为。当用户单击按钮时，facebook 弹出窗口会打开，但它会给出一个通用错误，说“稍后再试”，没有代码或知道什么是错误的。我需要知道哪里出了问题，或者是否存在某种调试工具来查看错误代码，或者我的应用程序中有什么问题，以便我可以修复它。弹窗的网址是：

[https://www.facebook.com/dialog/plugin.perms?display=popup&app_id=151168321675896&perms=email&secure=true&social_plugin=login_button&return_params=%7B%22scope%22%3A%22email%22%2C%22size%22%3A%22large %22%2C%22login_text%22%3A%22Conectate%20con%20Facebook!%22%2C%22app_id%22%3A%22151168321675896%22%2C%22locale%22%3A%22es_LA%22%2C%22sdk%22% 3A%22joey%22%2C%22channel%22%3A%22https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Df32cdf8178%26origin%3Dhttps%253A% 252F%252Fsecure.qubit.tv%252Ff7f7b014%26domain%3Dsecure.qubit.tv%26relation%3Dparent.parent%22%2C%22ret%22%3A%22perms%22%7D&login_params=%7B%7D](https://www.facebook.com/dialog/plugin.perms?display=popup&app_id=151168321675896&perms=email&secure=true&social_plugin=login_button&return_params=%7B%22scope%22%3A%22email%22%2C%22size%22%3A%22large%22%2C%22login_text%22%3A%22Conectate%20con%20Facebook!%22%2C%22app_id%22%3A%22151168321675896%22%2C%22locale%22%3A%22es_LA%22%2C%22sdk%22%3A%22joey%22%2C%22channel%22%3A%22https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Df32cdf8178%26origin%3Dhttps%253A%252F%252Fsecure.qubit.tv%252Ff7f7b014%26domain%3Dsecure.qubit.tv%26relation%3Dparent.parent%22%2C%22ret%22%3A%22perms%22%7D&login_params=%7B%7D)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:42:56.157

添加`show_error=1`到 URL 参数显示，

```
API Error Code: 1
API Error Description: An unknown error occurred
Error Message: kError 1349040: Invalid Application ID: The provided Application
                               ID is invalid. 
```

（假设您提供的 URL 中的应用程序 ID 是实际的。）

# android - Ant-Android 应用程序 - 我如何包含非 android 项目？

> ID：13726057
> 
> 赞同：0
> 
> 时间：2012-12-05T15:00:46.330
> 
> 标签：android, ant, jenkins, continuous-integration, build-automation

我在 ant`jenkins`和 android 上遇到了一些麻烦。我已按照本[教程](https://wiki.jenkins-ci.org/display/JENKINS/Building+an+Android+app+and+test+project)进行操作 ，效果很好！但现在我有一个小问题......我的 android-project 需要导入另一个项目，这不是一个 android 项目，所以没有`Androidmanifest.xml`

当我尝试在控制台中编写以下行时：

```
android update project -p othernonandroidproject 
```

我收到错误消息：`othernonandroidproject`不是一个有效的项目<AndroidManifest.xml not found>。

有人能帮我吗？这很重要 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:22:30.320

您是否尝试过将您的第三方项目制作一个 jar 并将其放在`lib`您的 android 项目的目录中？

*更新：*

您的命令示例错误，您可能的意思是

`android update project -p ./ -l relative_path/to_an/android_lib_project`

但是，它不适合您的需要，因为您需要导入第三方/非 android 特定的 java 支持库。

要在您的 ant 构建过程中使用这种支持包，您只需将库 jar 放到 lib 目录中，构建过程会自动将其考虑在内。从您的评论中，我推断出真正的问题是：如何双重管理 WIP 第三方库以持续集成 android 项目？对？然后你应该更新你的问题以反映这一点。不要忘记答案的质量将与问题的质量直接相关（因此我承认我的答案质量低下）。

现在，我从未使用过 jenkins，但我的理解是它在构建过程中依赖 ant ⇛ 去寻找 ant 目标。如果你将 CI 应用到你的 android 包和你的支持包，你可以在你的项目上创建推/拉目标：支持包上的 ant 推送目标，以提供支持包的最新成功构建结果 jar 和 ant -pre - 在你的 android 项目上编译 pull 目标。

如果您不在支持包上执行 CI，那么只需将标记版本推送到您的 android 项目的 vcs 或将其作为 -pre-compile 目标即时编译……</p>

您可以使用 -pre-compile ant 目标（复制文件）注入裸 .java 文件，但我不确定这是否是一个好的解决方案。

# c++ - 有什么方法可以使 SHFileOperation 模态化？

> ID：13726058
> 
> 赞同：2
> 
> 时间：2012-12-05T15:00:48.733
> 
> 标签：c++, windows, winapi, mfc

我有一个基于 MDI 的框架应用程序，它正在调用 SHFileOperation，如下所示：

```
SHFILEOPSTRUCT opDelFiles = {0};
opDelFiles.hwnd = AfxGetMainWnd()->GetSafeHwnd();
opDelFiles.wFunc = FO_DELETE;
opDelFiles.pFrom = (LPCTSTR)fileData;
opDelFiles.fFlags = FOF_ALLOWUNDO; 

SHFileOperation( &opDelFiles ); 
```

如果 SHFileOperation 向用户显示一个对话框（例如“你确定吗？”），尽管对话框仍然在框架的顶部，但用户仍然可以与框架交互，即外壳对话框正在将窗口消息传递给框架。有没有办法阻止这种情况并使 shell 对话框表现得像模态对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:14:58.560

您是否尝试过简单地禁用窗口直到`SHFileOperation()`退出？

# windows-8 - Windows 8 中的 DATEPICKER 控件

> ID：13726059
> 
> 赞同：0
> 
> 时间：2012-12-05T15:00:56.593
> 
> 标签：windows-8

> **可能重复：**
> [WinRT XAML 中的日期选择器在哪里？](https://stackoverflow.com/questions/10965877/where-is-the-date-picker-in-winrt-xaml)

我的 Metro App 需要一个 DATEPICKER 控件。我检查了工具箱，但找不到。我在 Google 上搜索过，但有 Telerik 的付费版本，我不能使用试用控制，因为它会在市场上被拒绝。需要帮忙

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T18:26:09.480

对不起，这将是一个你不喜欢的答案，但它就是答案。

在 Windows Phone 中，有一个 Windows Phone 工具包，其中包含比 SDK 附带的更多的 XAML 控件。Windows 8 没有这样的工具包。

通过简单的 Internet 搜索，您可能会找到[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)。这是一个很好的资源，不是来自 Microsoft，但也不包括日期选择器。

您可能还会偶然发现[WinRT XAML 日历](http://winrtxamlcalendar.codeplex.com/)。这是 Silverlight 日历中的一个端口。而且，很好。但不是拣货员。

另一个优秀的免费资源是 Microsoft 的 Tim Heuer 的[Callisto Toolkit](http://timheuer.github.com/callisto/)。这解决了许多问题（如设置和弹出窗口），但不能解决日期选择器。

在最近与 Tim Heuer 的 DevRadio 播客采访中（我们还没有发布那一集），我问他日期选择器是否在 Callisto 的路上，他说*也许*。原因是，将日期选择器本地化是一件非常痛苦的事情，因为世界各地的日期处理方式并不完全相同。爱好者构建自定义日期选择器的这个障碍是显着的。这就是为什么你还没有找到免费的。

我想很快就会出现一个免费的日期选择器。而且，老实说，我很惊讶我还没有看到一个。它只是说明了任务的复杂性。您不是第一个提出这个问题[的人，WinRT XAML 中的日期选择器在哪里？](https://stackoverflow.com/questions/10965877/where-is-the-date-picker-in-winrt-xaml)（ ：） 我曾是！)

说了这么多，我认为这证明了那些付费的第三方组件可以正确、完整和（通常）漂亮地完成工作。让我们看看我们的选择是什么：

1.  组件一（[这里](http://www.componentone.com/SuperProducts/DateTimeEditorsXAML/)）$ 395
2.  Telerik（[这里](http://www.telerik.com/products/windows-8/controls/date-picker.aspx)）199 美元
3.  Infragistics ([这里](http://www.infragistics.com/products/windows-ui/)) 测试版
4.  永动机（[这里](http://www.perpetuumsoft.com/Product.aspx?lang=en&pid=150&tid=overview)）99美元
5.  DevExpress ([这里](http://www.devexpress.com/Products/NET/Controls/WinRT/Editors/)) $499
6.  组件艺术（无）

因此，它仍然可能会诱使您编写自己的代码。那也没关系。如果您的受支持文化列表有限，那么您可以做到。而且，回顾一下上面列表中的一些人的样子——这会让你走得更远。如果你做得很好，分享财富并将其放在 CodePlex 上。

# nuget - JQuery + Nuget 包管理默认安装位置

> ID：13726061
> 
> 赞同：9
> 
> 时间：2012-12-05T15:01:01.073
> 
> 标签：nuget

所以我只是通过 Nuget 将 JQuery 安装到我的项目中。但根据我公司的编码标准，所有脚本必须存在于：

/资产/脚本

Nuget 通过 /Scripts 安装它

无论如何我可以更改此默认设置吗？那么当我执行更新时，它会在正确的位置更新吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:48:32.867

是的，这还不支持，这里有一个 nuget codeplex 问题[http://nuget.codeplex.com/workitem/1914](http://nuget.codeplex.com/workitem/1914)用于评论/投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:38:32.627

这可能无关，但我的 C# NuGet DLL 也有类似的问题。有人告诉我将它们放在 3rd 方库中，而不是放在我的解决方案路径中，所以这就是我必须做的。

1.  在我的 Visual Studio 解决方案的根目录中创建一个名为“nuget.config”的文本文件
2.  修改该文件以指向存储库位置

    <?xml version="1.0" encoding="utf-8"?>
    <settings>
    <repositoryPath>C:...\3rdPartyLibs\packages
    </settings>

这是官方的[NuGet 配置设置](http://docs.nuget.org/docs/reference/nuget-config-settings)页面。尽管 NuGet 为您提供了一种特定的 XML 格式供您使用，但该格式对我不起作用，并且感谢我找不到的另一篇文章，上面的 xml 文件有效。

# c# - 拆分后保留空值

> ID：13726067
> 
> 赞同：1
> 
> 时间：2012-12-05T15:01:13.527
> 
> 标签：c#, split

我需要拆分`high/low`可能以三种不同形式出现的输入值：`120/50`, `120/`, `/50`, `120`.

我想把它分成两个不同的变量并检查我得到的值。

```
var high = input.Split('/').First();
var low = input.Split('/').Last();

if (high.Length > 0) //Do this
if (low.Length > 0) //Do that 
```

问题是，对于最后两个输入，我在`high`和中得到相同的值`low`。这意味着我无法判断我的价值是高还是低。

我开始怀疑我不能在这里使用拆分？

**编辑**
似乎根本没有值`/`。这些值应该被解释为`high`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:10:57.520

您可以使用哪个更安全`Nullables`：`TryParse`

```
string[] parts = input.Split('/');
int? high = null;
int? low = null;
int hightest, lowtest;
if(int.TryParse(parts[0], out hightest))
    high = hightest;
if(int.TryParse(parts[1], out lowtest))
    low = lowtest; 
```

现在您可以检查它们是否设置了该[`HasValue`](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)属性，例如：

```
if(high.HasValue)
{
    int val = high.Value;
    // do something with it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:07:18.543

```
string[] values = input.Split('/');
if(values[0] != string.Empty)
 //do this
if(values[1] != string.Empty)
 //do that 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:23:04.540

尝试

```
var values = input.Split(new []{'/'}, StringSplitOptions.None); 
```

为了确保它不会删除空条目，尽管我认为 None 是默认值。

**编辑**

如果缺少分隔符，您可以执行以下操作

```
string high;
string low;
var values = input.Split('/');
high = values[0];
if(input.Length == 2)
{
    low = values[1];
} 
```

您可能还想检查 split 返回的超过 2 个项目，以捕获其中包含超过 1 个的任何输入`/`。

# php - 在其父（类别）之后列出产品

> ID：13726068
> 
> 赞同：1
> 
> 时间：2012-12-05T15:01:25.097
> 
> 标签：php, mysql, loops, join, parent-child

我对 php 比较陌生，我正在使用 oscommerce 在报告中创建类别、子类别和子类别中可用产品的列表。我已经设法创建了类别列表，然后是子类别（子类别）。我在尝试在子类别之后列出产品时遇到了死胡同。这是编码的片段：

```
function category_list( $category_parent_id = 0 )
{
$sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
$res  = tep_db_query( $sql );
$cats = array();
 while ( $cat = tep_db_fetch_array( $res ) )
  {
    $cats[] = $cat;
  }
 if (count($cats) == 0)
    {
  return '';
  }
 $list_items = array();
foreach ( $cats as $cat )
 {
$list_items[] = '<tr class="dataTableRow"><td class="dataTableContent">'; 
if($category_parent_id != 0)$list_items[] = '&nbsp;&nbsp;&nbsp;';
if($category_parent_id == 0)$list_items[] = '<b>';
$list_items[] = $cat['categories_name'];

if($category_parent_id == 0)$list_items[] = '</b>';
$list_items[] = '</td><td class="dataTableContent">'; 
$list_items[] = category_list( $cat['categories_id'] );
$list_items[] = '</td></tr>'; 
}
$list_items[] = '';
return implode( '', $list_items );

}  
echo category_list(); 
```

对于列出产品，我有两个需要使用的表`product_to_cat`， 和`prod_descrip`，通过使用该`product_id`字段连接。为了将其列在正确的父级中，`product_to_cat`and`cat`表与. 连接`category_id`。我将如何在正确的类别中打印正确的产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:53:33.993

假设表看起来像这个[SQL Fiddle](http://www.sqlfiddle.com/#!2/b4de3/1/0)，那么这只是所有表之间的简单连接

```
select c.parent_id, c.categories_id, cd.categories_name,
       p.product_id, pd.description
from categories c
join categories_description cd on cd.categories_id = c.categories_id
left join product_to_cat p on p.category_id = c.categories_id
left join prod_descrip pd on pd.product_id = p.product_id
order by c.parent_id, c.categories_id, p.product_id 
```

我不知道 sort_order 如何适合这张图片。

如果您只想要一个类别的产品，请在循环中执行以下选择

```
select p.product_id, pd.description
from product_to_cat p
left join prod_descrip pd on pd.product_id = p.product_id
where p.category_id = $cat['categories_id'] 
```

# javascript - 如何处理 DOM 更改覆盖某些变量的情况？

> ID：13726070
> 
> 赞同：0
> 
> 时间：2012-12-05T15:01:29.577
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, rendering

我正在使用 Ruby on Rails、jQuery v1.8.3 和 jQuery UI v1.9.2。在视图文件中，我以这种方式呈现部分模板：

```
<%= render :partial => 'template_name', :locals => { :div_id => 'div_id1' } %> 
```

相关`template_name`文件包含以下内容：

```
<script type="text/javascript">
  var item = $('#<%= div_id %>')

  alert(item.selector) // Display #div_id1
</script> 
```

在同一页面上，通过 AJAX 请求，我检索并添加到 DOM 相同的部分模板，但具有`:locals => { :div_id => 'div_id2' }`：

```
<script type="text/javascript">
  var item = $('#<%= div_id %>')

  alert(item.selector) // Display #div_id2
</script> 
```

进行上述操作后，*在*AJAX 请求之后，我“丢失”了对`#div_id1`since的引用`item`与`#div_id2`.

我应该如何处理这种情况以避免“覆盖”变量？我如何“隔离”（可能是命名空间或使用一些 jQuery 功能）这些变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:13:13.637

如果代码片段是自包含的，您应该能够将代码移动到私有范围内。

```
<script type="text/javascript">
    (function(){
        var item = $('#<%= div_id %>');
        alert(item.selector); // Display #div_id2
    })();
</script> 
```

*虽然我不同意让服务器端代码生成基于 javascript 的 ui 小部件。*

# mysql - mySQL触发器防止从一个表中删除另一个条件

> ID：13726073
> 
> 赞同：1
> 
> 时间：2012-12-05T15:01:30.623
> 
> 标签：mysql, triggers

我有 2 张桌子（客户和约会）

客户包含具有主键 cust_id 的客户详细信息列表

Appointments 包含约会的详细信息，包含字段：appt_date、start_time 和 customer（来自 table1 的外键 cust_id）

我想编写一个触发器，如果​​它是 Appointments 中具有特定 appt_date 和 start_time 的唯一记录（特定 appt_date 和 start_time 可以有多个客户），则可以防止您从客户中删除记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:06:41.877

您可以使用 ActiveRecord 的回调来防止。

检查此[页面](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

在您的情况下，您应该使用 before_destroy，并引发一些验证异常。

# exception - 无法生成 ExtJS 应用程序

> ID：13726075
> 
> 赞同：1
> 
> 时间：2012-12-05T15:01:39.633
> 
> 标签：exception, extjs

伙计们！

我在尝试`sencha -d -s /data/html/blablabal/ext-4.0 generate app Skeleton /data/html/Skeleton`为我现有的应用程序使用和生成骨架时遇到了麻烦，这是过去以非常不幸的方式创建的:-(

当我调用上述命令行时，我总是得到这个：

```
`

> sencha -d -s /data/html/hdbdesktop/ext-4.0 generate app Skeleton /data/html/Skeleton 
[DBG]       found sencha.cfg at /home/akosenkov/bin/Sencha/Cmd/3.0.0.250
[DBG]       Checking for framework config overrides
Sencha Cmd v3.0.0.250
[DBG]       found sencha.cfg at /home/akosenkov/bin/Sencha/Cmd/3.0.0.250
[DBG]       Checking for framework config overrides
[DBG]       creating workspace at '/data/html/Skeleton'
[ERR]       Failed to determine framework name.  Please ensure this command was issued from either a framework or application directory

com.sencha.exceptions.ExState: Failed to determine framework name.  Please ensure this command was issued from either a framework or application directory
    at com.sencha.command.BaseConfigCommands.mustGetFrameworkName(BaseConfigCommands.java:143)
    at com.sencha.command.generator.GeneratorCommands$WorkspaceCommand.execute(GeneratorCommands.java:60)
    at com.sencha.command.generator.GeneratorCommands$AppCommand.execute(GeneratorCommands.java:175)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at com.sencha.cli.Command.dispatch(Command.java:78)
    at com.sencha.cli.Commands.dispatch(Commands.java:49)
    at com.sencha.cli.Commands.dispatch(Commands.java:49)
    at com.sencha.command.Sencha.main(Sencha.java:71) 
```

`

我正在使用“普通”的 ExtJS（即这不是 Sencha Touch）。

怎么了？

真诚感谢任何提示！:-)

注意：我对[http://docs.sencha.com/ext-js/4-1/#/guide/command_app](http://docs.sencha.com/ext-js/4-1/#/guide/command_app)和所有内容进行了深入研究，甚至与主题有一点关系......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:31:07.057

这是文档所说的：

**当前目录**

在许多情况下，Sencha Cmd 要求您有一个特定的当前目录。或者它可能只需要了解相关 SDK 的详细信息。当 Sencha Cmd 从提取的 SDK 文件夹或从生成的应用程序运行时，可以轻松确定这一点。

以下是按要求和具有该要求的命令组织的这些需求的摘要。

```
Require knowledge of which SDK is in use
    sencha generate app
    sencha compile
A generated application root folder
    sencha generate ... (all commands other than app and workspace)
    sencha app ... 
```

要求当前目录是生成的应用程序根文件夹的命令如果不从这样的文件夹运行，将会失败。

当命令需要 SDK 知识但您当前不在提取的 SDK 文件夹或应用程序根文件夹中时，您需要使用 -sdk 开关，如下所示：

sencha -sdk /path/to/sdk ...

**当前目录错误**

一个常见的错误是执行一个命令，该命令要求当前目录是提取的 SDK 目录或应用程序目录，但又不在这样的目录中。如果不满足此要求，Sencha Cmd 将显示错误并退出。

请注意，有效的应用程序目录是由 Sencha Cmd 生成的目录，或者完全遵循该结构的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:25:22.187

遇到完全相同的问题，事实证明`sencha`需要 SDK 文件夹与提取的 zip 文件夹相同。

因此，虽然文件夹名称`ext-4.0`or`ext`不起作用，`ext-4.1.1a`但确实如此。

# java - 在 SQL 中计算百分比

> ID：13726077
> 
> 赞同：0
> 
> 时间：2012-12-05T15:01:41.057
> 
> 标签：java, mysql, sql, oracle

我有一个表，其中包含两种类型的信息，一种称为`Number_Of_Calls`，另一种称为`Number_Of_Answered`。

现在在我的应用程序中，我想获得百分比的百分比，`Number_of_answered`并且`Number_of_calls`我认为在数据库中计算将是最好的方法。

但是我不知道如何在 SQL 中计算

到目前为止，我有：

```
Select Number_Of_Calls,
       Number_of_answered 
  from table 
 Where Date BETWEEN '2012-09-10' AND '2012-09-11' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:03:34.020

```
select 
Number_of_Calls,
Number_of_Answered,
((Number_of_answered/Number_Of_Calls)*100) as answer_percent,
Date
from table Where Date BETWEEN '2012-09-10' AND '2012-09-11' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:04:48.150

```
select 
Number_Of_Calls,
Number_of_answered
((Number_of_answered/Number_Of_Calls)*100.00) as percent
from table_name Where Date BETWEEN '2012-09-10' AND '2012-09-11' 
```

# objective-c - xcode编码自定义对象

> ID：13726078
> 
> 赞同：0
> 
> 时间：2012-12-05T15:01:41.867
> 
> 标签：objective-c

我有一个需要编码的自定义对象类。我已经实现了编码协议，并且我已经设法对除了类中的 NSMutableDictionary 对象之外的每个对象进行编码。当我尝试对其进行编码时，出现此错误

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Only support RGBA or the White color space, this method is a hack.' 
```

现在，这个字典类包含我设置的许多不同的自定义对象。当我在网上搜索时，我发现了这个

[使用 NSKeyedArchiver 将 [UIColor colorWithPatternImage:image] UIColor 保存到核心数据](https://stackoverflow.com/questions/7456835/saving-uicolor-colorwithpatternimageimage-uicolor-to-core-data-using-nskeyeda)

但并不真正适用于我的情况。其中一个自定义类是我设置的自定义颜色类，它从 RGB 值创建一个十六进制 dex 字符串，我去添加了编码，我测试了在添加编码协议后保存颜色对象，它工作正常。但是当我尝试对字典进行编码时仍然会出现同样的错误。我是否必须遍历该字典包含的每个自定义对象并将编码协议添加到每个对象？我有大量的自定义对象，所以这将是一项非常耗时的任务。我也不明白为什么我在尝试存档字典时会出现颜色错误。

有没有更好的方法来保存自定义对象？我发现编码方法是保存自定义对象的相当烦人的方式。有没有更好或更快的方法来实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:15:10.300

> 我是否必须遍历该字典包含的每个自定义对象并将编码协议添加到每个对象？

最肯定的是，是的！

# php - preg_match_all() - 使用括号内的文本，但不显示空格

> ID：13726083
> 
> 赞同：0
> 
> 时间：2012-12-05T15:01:57.397
> 
> 标签：php, regex, preg-match-all

我想从一个包含括号的字符串创建一个数组，例如 {! ！}。但是，不应显示封装字符串开头和结尾的空格。

```
$string = "{! This should be in the output !} this should not be in the output {!show_in_output!} don't show {!   show   !}";
preg_match_all("/{!(.*)!}/Us", $string , $output); 
```

结果数组如下所示：

```
Array
(
    [0] => Array
        (
            [0] => {! This should be in the output !}
            [1] => {!show_in_output!}
            [2] => {!   show   !}
        )

    [1] => Array
        (
            [0] =>  This should be in the output 
            [1] => show_in_output
            [2] =>    show   
        )

) 
```

但它应该看起来像这样：

```
Array
(
    [0] => Array
        (
...
        )

    [1] => Array
        (
            [0] => This should be in the output 
            [1] => show_in_output
            [2] => show   
        )

) 
```

有没有办法通过修改后的正则表达式来实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:06:59.250

中间`(.*)`的`/{!(.*)!}/`匹配你`{!`和之间的任何字符`!}`。如果您不想在此之前和之后捕获空格，则必须匹配空格并且不将空格包含在您的组中，因此在您的情况下： `/{!\s*(.*?)\s*!}/`. `?`说要进行最小匹配，以便`.*`它不包括您希望与 second 匹配的空格`\s*`。

# php - 正则表达式帮助：如何仅匹配包含“或”运算符的正则表达式中的任一模式？

> ID：13726089
> 
> 赞同：4
> 
> 时间：2012-12-05T15:02:22.960
> 
> 标签：php, regex, preg-replace

我正在使用 php 的`preg_replace()`.

基本上我有 2 种可能的字符串来匹配：

1.  你好现实世界
2.  问候

这是我希望完成的事情：

1.  `Hello </span>Real World`
2.  `Gree</span>tings`

**规则**说明：如果字符串包含空格，`</span>`则在第一个空格字符之后插入。如果字符串不包含空格（单词），`</span>`则在字符串的中间插入（如果为奇数字符，则插入+/-）。

到目前为止，我想出了一个长期有效的解决方案：

```
<?php 
$str = "Hello Real World";
echo preg_match("/ /", $str) ? preg_replace("/ /", " </span>", $str, 1) : preg_replace("/.{" . round(strlen($str)/2) . "}/", "$0</span>", $str, 1);
?> 
```

但是，我相信它可以通过一个更短、更优雅的正则表达式来完成，只需一次`preg_replace()`调用。

知道如何只用一个 preg_replace() 调用来做到这一点吗？例如：

```
preg_replace("/ |.{" . round(strlen($str)/2) . "}/", "$0</span>", $str, 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:12:40.083

正则表达式引擎不会提前知道字符串中是否有空格。尽管您确实需要多个函数，但您根本不需要正则表达式来执行此操作：

```
$pos = strpos($str, ' ');
if ($pos === false) {
   //No space found
   $pos = intval(strlen($str) / 2);
}
else {
   //we want to insert *after* the space
   $pos++;
}
$str = substr_replace($str, '</span>', $pos, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:14:23.467

不，没有一种更短更优雅的方式来做你在想的事情。正则表达式不是可以在字符串上执行无限功能的神奇工具。

我建议的一件事是你不要在任何地方使用正则表达式，因为你不需要正则表达式来查找空间。

```
echo strpos( ' ', $str ) === FALSE
    ? str_replace ( ' ', '</span>', $str, 1 ) /* Only replace 1 occurrence */
    : preg_replace("/.{" . round(strlen($str)/2) . "}/", "$0</span>", $str, 1); 
```

就像[文档`str_replace`说](http://php.net/manual/en/function.str-replace.php)的那样，“如果你不需要花哨的替换规则（比如正则表达式），你应该总是使用这个函数而不是 preg_replace()。”

# ios - 如何在 iOS 上检测指南针校准开关状态

> ID：13726092
> 
> 赞同：10
> 
> 时间：2012-12-05T15:02:35.287
> 
> 标签：ios, core-location, cllocationmanager, heading

我目前正在使用`CLLocationManager`并希望了解设备的当前标题。到目前为止一切正常，功能已实现，现在我尝试完善我的应用程序。

有一个极端情况，如果用户关闭`compass calibration`用户设置中的标志，标题更新将不再发送到我的应用程序。在这种情况下，我想给用户一些反馈，他必须再次打开指南针校准，否则我的应用程序将无法运行。

我发现如果用户关闭`location services`我的应用程序，我仍然会收到磁航向。但是，如果用户关闭“指南针校准”设置，我将不再收到任何航向更新。但是我如何通过`CoreLocation`框架识别“指南针校准”已关闭？

“ `CLLocationManagerDelegate`”通过

```
- (void)locationManager:(CLLocationManager*)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status 
```

方法。但状态仅指示“位置服务”是否对我的应用程序处于非活动状态/活动状态。

我还尝试通过

```
- (void)locationManager:(CLLocationManager*)manager didFailWithError:(NSError*)error 
```

`delegate`方法，没有成功。

框架中有什么东西`CoreLocation`可以告诉我“指南针校准”标志是否打开/关闭。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-04T17:52:09.790

根据我的发现，如果指南针校准已关闭`newHeading.trueHeading`，则`locationManager:didUpdateHeading:`应该是。`-1`这应该这样做：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    if(newHeading.trueHeading == -1)
        //Compass calibration is off provided location services are on for the app
} 
```

# neo4j - 如何始终显示节点上的第一个属性？

> ID：13726098
> 
> 赞同：0
> 
> 时间：2012-12-05T15:02:41.573
> 
> 标签：neo4j

我正在试验 neo4j [webadmin](http://docs.neo4j.org/chunked/stable/tools-webadmin.html)。我发现[在线演示控制台](http://www.neo4j.org/learn/try)有一个[权力的游戏](http://gameofthrones.wikia.com/wiki/Game_of_Thrones_Wiki)图表结构..（真的，应该是冰与火之歌..但是哦，好吧）

我想进行一些更改并使用图表，所以我从演示控制台获取代码并将其添加到我的本地 neo4j 服务器。我想在我的 webadmin 的数据浏览器中可视化结构，所有节点都有各自的命名属性它们而不仅仅是一个节点号。

我添加了一个带有 for 标签的新样式（由于某种原因，每次关闭浏览器时它都会消失）`{name}`，但显然，房屋节点具有属性`house`，而不是`names`房屋节点上具有 N/A。

如果我可以`{id}`贴上标签并查看节点 id 的.. 必须有一些东西可以显示第一个属性.. 不是吗？

* * *

这是自定义样式：

![自定义样式](../Images/d28bf226bf013ba304e1046ef07e1fae.png)

它产生的图表：

![图形](../Images/b328c0a4e90321d3df5f21504a373f7d.png)

最后，控制台上的节点：
![控制台上的节点](../Images/14ff416360d061e981f4102cb3c37343.png)

^(（忽略60以上的节点，与GOT无关）)

如您所见，有些节点有`names`，有些有`house`- 有没有办法显示节点上的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-16T07:19:13.113

单击节点，它会在底部显示更改颜色、大小和标题的选项。对于标题显示，带有名为 id 的两个选项和您的第一个属性名称。所以你可以根据你的意愿改变。

# c# - 如果方法在 Dot Net 4 中有阻塞调用，则强制编译错误

> ID：13726101
> 
> 赞同：0
> 
> 时间：2012-12-05T15:02:47.047
> 
> 标签：c#, .net

这个问题是针对 .NET Framework 4

是否有人知道在给定实例方法进行任何阻塞线程的调用时强制编译器生成错误的方法。我正在编写一段代码，并且想要一种机械方式来确保执行链中的任何内容都不会阻塞线程。

我一直在尝试找到可以添加到方法声明中的属性，但找不到任何东西。

当我使用块这个词时，我并不是指任何可能挂起的代码。具体来说，一些 Microsoft api 调用，如 SMTP.Send() 和 NetworkStream.Read() 将停止执行，直到达到特定事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:10:17.760

Joshua 很抱歉，但我认为您不了解阻塞呼叫的概念...查看所有呼叫都是阻塞的，唯一的区别是某些阻塞比其他阻塞持续时间更长！当“长阻塞”部分发生在不同的线程中时，我们通常说调用是“非阻塞调用”...

更直接的答案是：不，编译器不知道调用会导致阻塞，所以他无法弄清楚！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:12:12.173

使用 FxCop SDK 编写您自己的代码分析规则，将消息级别设置为错误，这样每当违反规则时就会显示为“编译错误”，请查看此博客以获取更多信息[自定义代码分析规则](http://blog.tatham.oddie.com.au/2010/01/06/custom-code-analysis-rules-in-vs2010-and-how-to-make-them-run-in-fxcop-and-vs2008-too/)

# windows - 在 Java 中使用 Scanner 进行字符编码

> ID：13726102
> 
> 赞同：2
> 
> 时间：2012-12-05T15:02:50.023
> 
> 标签：windows, encoding, polish

我正在尝试使用 Java 读取包含波兰语字符的文件，然后在 Windows 的命令行中打印它（英文版）。

这是我要阅读的文字：

Ziobropolecił Prokuraturze Okręgowej w Płocku wszczęcie odrębnego śledztwa w sprawie o zabójstwo 部长。

这是输出：

Ziobropoleci 部长│Prokuraturze OkrÛgowej w P│ocku wszczÛcie odrÛbnego £ledztwa w sprawie o zab¾jstwo。

我正在使用 UTF-8 编码：

字符串编码 = "UTF-8"; Scanner 扫描仪 = new Scanner(new FileInputStream(fFileName), encoding);

我将“区域和语言选项”中的所有设置都更改为抛光，但它不起作用。当我将此文本加载到 gedit 中时，所有字符都会正确显示。

# c# - MVC3 中的自定义路由

> ID：13726103
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:02:53.513
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

> **可能重复：**
> [带有数据库查找的 URL 路由？](https://stackoverflow.com/questions/912427/url-routing-with-database-lookup)

我正在寻找构建一个 CMS，这意味着用户可以向系统添加页面，这将涉及在富文本编辑器中输入 URL，然后将内容作为 HTML。

MVC3 路由将如何处理这个问题？据我了解，该`Controller/Action`方法会触发一个操作并返回一个`View()`但如果此 URL`Controller/Action`存在于数据库中并指向数据库中的内容

基本上我需要系统检查路由是否存在，如果没有从数据库中获取 html 并显示`View()`

例如 /Account/EditUser

在我的控制器中，我有

```
public ActionResult EditUser(){

    return View();
}

public ActionResult LoadCMS(String URL){
    // check URL exists in DB
    // get the html from db
    // return the Html as a View to the user
    // if not exists then return error page
} 
```

但是当我请求一个 CMS 页面时我该怎么办：

例如 /Account/DisplayUser

在我的控制器中没有 DisplayUser 操作，所以转到 LoadCMS 抱歉，我不知道从哪里开始，所以我没有代码可以提供。

任何帮助或方向将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:58:54.250

> 在我的控制器中没有 DisplayUser 操作，所以转到 LoadCMS 抱歉，我不知道从哪里开始，所以我没有代码可以提供。

据我了解，您需要使用操作显示用户信息`DisplayUser`。因此，您可以创建如下所示的操作。

```
 public ActionResult DisplayUser(string username){
    var userDetails = GetDataFromDatabase(userId);
    return View("User", userDetails);
 } 
```

`www.website.com/Users/DisplayUser/yrshaikh`因此，假设此操作在`UsersController`控制器内部并且`yrshaikh`是用户名，现在可以使用 url 来访问此操作。

为了进一步了解，您可以尝试了解每个用户在 stackoverflow 上的配置文件链接，例如我的是[https://stackoverflow.com/users/1182982](https://stackoverflow.com/users/1182982)这里 userId 是`1182982`控制器名称`users`（如果自定义路由，这可能会有所不同已经完成了。）

所以，我希望有了这些信息，你可以开始......

# google-fusion-tables - 将 Fusion Tables API v1.0 与 Google 可视化查询对象一起使用：请澄清

> ID：13726107
> 
> 赞同：1
> 
> 时间：2012-12-05T15:03:01.963
> 
> 标签：google-fusion-tables, google-visualization

随着 Fusion Tables SQL API 在 1 月份即将被弃用，我想确保我的应用程序继续按预期运行。

我使用 Google Visualization api 来查询 Fusion 表，如下所示：

```
...
var queryText = encodeURIComponent(querySelect + " FROM " + FT_MarkerTableID + queryWhere);               
var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + queryText); 

query.send(getData);
... 
```

Visualization API 文档仍然引用旧的 Fusion Tables SQL API，而不是 Fusion Tables API v1.0。

我的问题是我可以简单地使用新的 URL 端点[https://www.googleapis.com/fusiontables/](https://www.googleapis.com/fusiontables/)并期望相同的功能。似乎这个新端点在其根路径中没有“gvizdata”... [http://www.google.com/fusiontables/gvizdata](http://www.google.com/fusiontables/gvizdata)在 2013 年 1 月 14 日关闭后是否继续可用？只是“api/query”不可用。

我将不胜感激有关此主题的一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:25:50.023

[http://www.google.com/fusiontables/gvizdata](http://www.google.com/fusiontables/gvizdata)端点与 SQL API 是分开的，不会被 SQL API 关闭。

如果您使用 gvizdata API 进行可视化，那么您可以让您的应用程序保持原样。但是，如果您仅将其用于访问数据，我们强烈建议您迁移到 v1.0 API。

# php - 类结构

> ID：13726108
> 
> 赞同：0
> 
> 时间：2012-12-05T15:03:03.930
> 
> 标签：php, oop

我对这个主题很困惑，假设我有一个身份验证类（登录、注销、检查是否登录）

用户类（包含用户、getter、setter、save 等）

我应该把创建用户和验证用户名之类的东西放在哪里？一个新的类，比如“UserManager”之类的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:07:38.547

这更像是一个设计问题，这使得它有点难以回答，因为可能没有客观正确的方法来做到这一点。相反，有几个人创建了几种不同的解决方案，它们都同样有效。

一个建议是创建一个`Users`（复数）类，该类具有公共方法，如`addNew`（返回`User`对象）和`userExists`（返回`Bool`），以及`validateUsername`（也返回`Bool`）。

此类`Users`可能包含用于管理整个用户群的附加逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:10:14.553

我喜欢做的是在用户类中包含 create/validate/etc.. 方法

```
class user{
       function __construct($iduser){ 
            $this->id=$iduser;

       }

       function getHref(){
         return "/profile/".$this->id;
       }

       function create($username){
           //insert your user in db
           //retrieve the id of the created user
           $iduser=mysql_insert_id();

           $newuser=new user($iduser);
           return $newuser;
       }

       function validate($username){

          mysql_query("your code to validate");

          return true or false;
       }
}

$name="john";
if(user::validate("$name")){
    $mynewuser=user::create("john");

    $href=$mynewuser->getHref();
    header("Location: $href"); //let s redirect him to its home page
    //or use any other method...
} 
```

# mysql - 是否可以对 MyISAM 表进行非阻塞读取？

> ID：13726109
> 
> 赞同：0
> 
> 时间：2012-12-05T15:03:04.330
> 
> 标签：mysql, concurrency, nonblocking, myisam

我有一个包含大量写入操作的日志表：这就是选择 MyISAM 的原因。

现在我需要执行一个复杂的 SELECT 查询，这会花费大量时间并阻塞表：那时没有人可以写入它。

*   该表具有较高的“写入”负载
*   我不在乎我是否没有最新的记录
*   数据永远不会被删除

在不阻塞表的情况下读取数据的选项有哪些？

*   LIMIT 在查询完成后应用，因此不是一个选项
*   修改所有 INSERT 语句以使它们 DELAYED 不是一种选择
*   InnoDB 也不是一个选项
*   HANDLER 查询不是一个选项：我需要复杂的 WHERE 条件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:14:39.783

一些建议，也许其中一个适合你

1.  选项：奴隶

    配置用于 SELECT 查询的从站。这不会阻止插入。但是，这需要第二台服务器、一些配置和存储空间，所以这不是一个好的解决方案，只是为了获取您的数据。

2.  选项：使用低优先级更新：[http ://dev.mysql.com/doc/refman/5.0/en/table-locking.html](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)

    这可以在服务器级别或连接级别完成，因此您不必修改每个插入语句。

3.  工作进程

    *   像往常一样制作插入物。
    *   创建一个工作进程，将您的日志条目（对于表 A 中的每一行，在表 B 中插入，在表 A 中删除行）“移动”到另一个表。
    *   现在您可以查询表 B

# linq-to-sql - 日志文件究竟何时关闭（Linq to SQL）

> ID：13726110
> 
> 赞同：0
> 
> 时间：2012-12-05T15:03:11.677
> 
> 标签：linq-to-sql

我将所有生成的 sql 记录如下。现在我想将任何异常记录到同一个文件中。

```
StreamWriter mLogFile = new StreamWriter(LogFilePath,true){AutoFlush=true};

try
{
MyDataContext mdc = new MyDataContext();
mLogFile.WriteLine(CurrentDateString);
mdc.Log = mLogFile;
BLAH BLAH DB STUFF
mdc.SubmitChanges();
}
catch(Exception x)
{

} 
```

我想要的只是当出现异常时，我想将异常信息添加到日志文件中。不确定是否可以只将 writeLine 写入 catch 块中的文件。datacontext 究竟何时释放日志文件？当 submitchanges 返回时？出现异常时会发生什么？任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:53:33.663

数据上下文不获取日志的所有权。您有责任发布它。因此，我建议将其包装`StreamWriter`在一个`using`块中。因此，要回答您的问题：是的，您可以写入`catch`块中的日志（假设那时您还没有处理掉`StreamWriter`）。

# java - Java，线程示例，使其更好地同步

> ID：13726115
> 
> 赞同：0
> 
> 时间：2012-12-05T15:03:17.733
> 
> 标签：java, multithreading

我一直在学习 Java（Oracle Press Books），我正在学习线程。这些示例与书中的内容有些不同。到目前为止，这是可以理解的。然而这个最新的似乎有点奇怪。这是代码： http: [//pastebin.com/tu0qajMF](http://pastebin.com/tu0qajMF)

这些程序演示了线程之间使用 wait() 和 notify() 的通信。它有一个对象，有两个同步方法tick 和tock。它们只是显示滴答和滴答。运行示例时，它应该运行“Tick Tock Tick Tock ...”，它通常会这样做。然而有时它会变成“Tock Tick Tock Tick”。

为什么要这样做？

我怎样才能改变代码，所以它不会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:08:26.180

在线程启动之前您没有进行任何预同步，因此这是一场关于谁先运行的竞赛。在第一次加入之前，您不会到达同步点，因此两个线程中的任何一个都可能在该点启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:32:29.627

我通过添加一些预同步解决了这个问题，我在潜意识中留下了大约 15 分钟后发现了一种方法，在 Facebook 上发了一些帖子，然后我有了一个想法。解决起来比我想象的要简单得多。

在 TickTock 类中，我添加了一个成员“boolean virginity=true”，如果纯真为真，则让 Tock 等待，并在运行时将纯纯设置为假。所以当 MyThread 运行时，Tick 总是首先运行——因为两个线程共享的对象有一个变量，它确保 Tock 等待 Tick 并且没有竞争。

代码在这里： http: [//pastebin.com/AHCvcNa8](http://pastebin.com/AHCvcNa8)

如果没有第一个问题的答案，我将无法解决这个问题，所以谢谢第一个问题回答者。

# jquery - jquery var objUl = $('ul', $dcDrilldownObj) 是什么意思

> ID：13726126
> 
> 赞同：0
> 
> 时间：2012-12-05T15:04:09.090
> 
> 标签：jquery

```
<ul id="menu">
  <li><a href="#">menu 1</a>
    <ul>
      <li><a href="#">menu 1i</a>
        <ul>
            <li><a href="#">menu 1i i</a></li>
            <li><a href="#">menu 1i ii</a></li>
        </ul>
      </li>
      <li><a href="#">menu 1ii</a>
        <ul>
            <li><a href="#">menu 1ii i</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#">menu 2</a>
    <ul>
      <li><a href="#">menu 1i</a>
        <ul>
            <li><a href="#">menu 1i i</a></li>
            <li><a href="#">menu 1i ii</a></li>
        </ul>
      </li>
      <li><a href="#">menu 1ii</a>
        <ul>
            <li><a href="#">menu 1i i</a></li>
            <li><a href="#">menu 1i ii</a></li>
        </ul>
      </li>
    </ul>
  </li>    
  <li><a href="#">menu 3</a>
    <ul>
      <li><a href="#">menu 1i</a>
        <ul>
          <li><a href="#">menu 1i i</a></li>
        </ul>
      </li>
      <li><a href="#">menu 1ii</a>
        <ul>
            <li><a href="#">menu 1i i</a></li>
        </ul>
      </li>
    </ul>      
  </li>
</ul>

$(document).ready(function($){
    $('#menu').mobileMenu({
            saveState       : true,
            easing          : 'easeOutCirc'
    }); 
});

//  inside the plugin
return this.each(function (options) {
    var $dcDrilldownObj = this;
...

// Get height of largest sub menu
var objUl = $('ul', $dcDrilldownObj);
var maxItems = methods.findMaxHeight(objUl); 
```

上面的代码是属于jquery菜单插件的，HTML，并启动插件，然后里面获取对象到veriable。

在这里我有一个疑问是什么意思

**var objUl = $('ul', $dcDrilldownObj);**

能否请人简要介绍一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:06:18.423

第二个参数是上下文，在你的情况下是`$('#menu')`

```
var objUl = $('ul', $dcDrilldownObj); 
```

以上将返回`ul`里面的所有元素`#menu`并将其设置为`objUl`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:06:40.657

jQuery`$()`函数中的第二个参数表示“*上下文*”部分（即*在哪里搜索*）。`<ul>`在您的示例中，您选择`$dcDrilldownObj`.

您可以轻松地将其替换为：

```
var objUl = $($dcDrilldownObj).find("ul"); 
```

您可以在此处阅读有关`jQuery()`函数的信息：http: [//api.jquery.com/jQuery/#jQuery1](http://api.jquery.com/jQuery/#jQuery1)。

# asp.net-mvc - MVC 下拉列表用于添加空值

> ID：13726127
> 
> 赞同：0
> 
> 时间：2012-12-05T15:04:13.443
> 
> 标签：asp.net-mvc, razor, html.dropdownlistfor

我在 MVC 中工作，因此我在 DropDownListFor 中添加了“全选”选项

```
<tr><td valign="top">@Html.DropDownListFor(model => model.fk_Type, Model.ListType, "- Select All -", new { style = "width:210px" })</td></tr> 
```

在我的控制器代码中，全选选项给出的值为“”。我假设是一个空字符串。上面的 html 中有没有办法将“全选”的值设置为 null。这将使模型中被调用的 stor proc 完美处理.. 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:23:06.190

不，“null”对于下拉列表具有特殊含义，即“未选中”。在您的情况下，选择了一个值，但它是默认值，因此它不能为空。

# delphi - Delphi - 引用在运行时创建的组件

> ID：13726129
> 
> 赞同：5
> 
> 时间：2012-12-05T15:04:20.043
> 
> 标签：delphi, reference, runtime, components

我正在使用 Delphi 5，我在运行时创建了许多面板，然后在面板上创建按钮，显然在运行时再次创建。我需要这样做，因为将来我可能需要动态创建更多面板/按钮组合。

我可以做到所有这些，但我不知道如何引用我创建的面板，因为我找不到访问面板组件名称的方法。在互联网上搜索我发现我可以使用 FindComponent 按名称查找面板组件，但我仍然不知道如何使用该名称，因为我无法使用字符串变量来引用它 - 例如 StringVar := Panel.Name。我得到类型不匹配，TComponentName 与 String。

我在创建面板时为每个面板创建了按钮。简化后，它看起来像这样：

```
 With TypeQuery do begin // Create Panels
   First;
   While (not eof) do begin        // create the actual panel
      panelno := FieldByName('Product_type_id').AsInteger;
      pnl := Tpanel.Create(Self);
      pnl.name := FieldByName('PanelName').AsString;
      pnl.color := clInactiveCaption;
      pnl.parent := MainForm;
      pnl.width := 365;
      pnl.Height := 551;
      pnl.left := 434
      pnl.top := 122;
      pnl.caption := '';
      With ButtonQuery do begin
         Close;
         Parameters.parambyname('PanelID').Value := PanelNo;
         Open;
         First;
         While (not eof) and (FieldByName('Product_type_id').AsInteger = PanelNo) do begin    //put the buttons on it.
            btnName := FieldByName('ButtonName').AsString;
            BtnText := FieldByName('ButtonText').AsString;
            BtnGroup := FieldByName('Product_Group_ID').AsString;
            GrpColour := FieldByName('ButtonColour').AsString;
            btn := TColorButton.Create(Self);
            btn.Parent := pnl;
            btn.Name := BtnName;
            Btn.backcolor := HexToTColor(GrpColour);
            btn.Font.Name := 'Arial Narrow';
            btn.Font.Style := [fsBold];
            btn.Font.Size := 10;
            . . .
        end;
        . . .
     end; 
  end; 
```

我在几个论坛（包括这个论坛）上读到，无法直接按名称引用面板。我尝试使用组件数组，但遇到了同样的问题 - 我需要通过分配的组件名称来引用组件。

好吧，我不是枪程序员——多年来我一直使用 Delphi 创建简单的程序，但这个程序要复杂得多。我以前从未使用过运行时组件创建。

我可以使用 FindComponent 使面板可见或不可见吗？如果是这样，鉴于我在上面向您展示的内容，您能告诉我我应该采取的步骤吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T16:38:48.963

我不确定您的意思是：“*我不能使用字符串变量来引用它 - 例如 StringVar := Panel.Name。* ”

尝试这个：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  p: TPanel;
begin
  p := TPanel.Create(Self); // create a TPanel at run-time
  p.Name := 'MyPanel'; // set a unique name
  p.Parent := Self;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  p: TPanel;
  StringVar: string;
begin
  p := FindComponent('MyPanel') as TPanel;
  if Assigned(p) then // p has reference to MyPanel
  begin
    // use that reference
    p.Caption := 'Foo';
    StringVar := p.Name;
    ShowMessage(StringVar);
  end;
end; 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T15:20:02.577

您将*组件名称*与*变量名称*混为一谈。对于 IDE 创建的组件，Delphi IDE 努力保持这两者相同，但它们不一定相等。您没有*变量名*，因为您正在动态创建组件，并且您不知道需要多少变量。但是，您仍然可以控制组件名称：只需分配`Name`组件的属性，然后您可以像使用任何其他组件名称一样使用它，方法是调用`FindComponent`. 只需确保每个面板实例的名称都是唯一的。

还要记住，当您在编译时不知道需要多少变量时，处理变量的方法是使用*数组*或*列表*。您可以使用普通的旧数组，也可以使用更复杂的数据结构，例如`TComponentList`or `TDictionary`。

最后，为了更容易引用您正在创建的面板*上*的控件，您可以放弃面板而使用*框架*。您可以在 IDE 中直观地设计一个`TFrame`并为按钮命名，并且在运行时，您可以实例化框架类，它会自动为您创建所有按钮，就像您实例化表单或数据模块时一样。您只需为新框架对象命名，但该对象已经具有引用按钮的命名字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:49:40.453

不需要创建您创建的项目的辅助列表以显示在 tForm 实例上。

AFAIK，每当您创建一个使用 Form 或其他 Container 代替 self 的新面板时

```
 pnl := Tpanel.Create(Self); 
```

您不需要处理销毁新的 pnl，因为它由包含“self”组件处理。

这意味着应该有任何构造来保存父组件的子组件。

我希望您会在父对象中找到 ComponentCount 或 Components 列表或 FindComponent 方法。假设“Self”引用的对象是一个 Tform。

```
 for i := 0 to tForm(self).ComponentCount -1 do 
   if tForm(self).Components[i] is tPanel then 
      tPanel(tForm(self).Components[i]).Caption := intToStr(i) ; 
```

将更改应用程序中 tPanel 的所有标题。为了区分由代码和设计器创建的面板，您可以使用每个创建的 tPanel 的 TAG 属性并在上面的示例中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:22:03.127

您可以将需要引用的组件添加到 TList|Container... 然后使用您的 list|container 访问它们

```
var
  slPanels: TStringList;
...

 With TypeQuery do begin // Create Panels
   First;
   While (not eof) do begin        // create the actual panel
      panelno := FieldByName('Product_type_id').AsInteger;
      pnl := Tpanel.Create(Self);
      pnl.name := FieldByName('PanelName').AsString;
      slPanels.AddObject(FieldByName('PanelName').AsString, pnl); 
```

当你需要它时：

```
TPanel(slPanels.Objects[slPanels.IndexOf(FieldByName('PanelName').AsString)]) ... 
```

我不喜欢上面的代码（有更好的容器......但这应该可以完成工作：o））

# jquery - MVC3 .valid() 始终为真

> ID：13726132
> 
> 赞同：6
> 
> 时间：2012-12-05T15:04:33.630
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

我在元素上调用 JQuery .valid() 方法时遇到了一些问题。我有以下代码。有人用 ASP.net MVC 和不显眼的 javascript 管理这个吗？

Javascript代码

```
$(function() {
    $('#anchor').click(function () {
        if ($('#myform').valid()) {
            alert("it's valid");     
        } 
    });
}); 
```

HTML 视图输出

```
<div class="editor-label">
    <label for="FirstName">First name</label>
</div>
<div class="editor-field">
    <input data-val="true" data-val-required="The First name field is required." id="FirstName" name="FirstName" type="text" value="" />
    <span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span>
</div> 
```

我已经尝试了各种方法，但看不到任何问题。当点击提交按钮时，表单本身正在正确验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:08:28.963

如果您使用的是有效插件 ( [http://docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid) )，则必须在表单上使用 validate。

```
$("#myform").validate();
$("a.check").click(function() {
     alert("Valid: " + $("#myform").valid());
     return false;
}); 
```

# android-layout - ImageView 中的后退和前进按钮更改图像

> ID：13726140
> 
> 赞同：0
> 
> 时间：2012-12-05T15:04:57.223
> 
> 标签：android-layout, android-imageview

我想在用户单击下一个时更改图像视图中的图像，我还想在用户单击返回时返回上一个图像。有人有这方面的例子吗？或代码使这成为可能？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:06:41.103

你得到了[http://developer.android.com/reference/android/widget/ImageView.html#setImageResource(int](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource(int) ) 方法，使用它。

# android - Android，阅读 pdf 文件？

> ID：13726141
> 
> 赞同：0
> 
> 时间：2012-12-05T15:05:03.313
> 
> 标签：android

> **可能重复：**
> [Android 的 PDF 解析库？](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android)
> [如何在我的 android 应用程序中阅读 pdf？](https://stackoverflow.com/questions/10299839/how-to-read-pdf-in-my-android-application)

我正在开发一个安卓应用程序。我能够在我的应用程序中使用 adobe reader 应用程序打开 pdf 文件。但我想“阅读”pdf文件，我想处理它包含的字符串。

反正有这样做吗？

提前致谢，

# c++ - 应用程序建模。什么时候使用哪个图表？

> ID：13726150
> 
> 赞同：1
> 
> 时间：2012-12-05T15:05:45.467
> 
> 标签：c++, modeling, uml

我的项目同时变得越来越大。现在，我发现自己迷失在我的代码中，甚至改变了我脑海中已经固定的概念。这太可怕了，因为随着我的代码行数增加，我的工作效率就会下降。我只想实现我的生产力保持不变。现在我想把我的申请写在纸上，以便在我再次迷路的情况下找回概述，并拥有一些我可以坚持的东西。但我不知道如何正确建模。我试图在状态图中对其进行完整建模，但是例如，如果代码只是逐行执行没有状态的事情，则不适用。在这种情况下，流程图会很好。但我不知道如何混合它，以便整体有意义。

我应该如何开始在纸上写东西？为更大的应用程序建模的常见做法是什么？我什么时候使用哪个图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:19:35.893

要了解程序的流程，您可以使用活动图。要了解对象之间的交互，您可以使用序列图。要了解这些模块，您可以使用类图，也可以将相关的类放入一个包中。然后，您可以在模块之间绘制高级依赖关系。这将为您提供有关您的项目的高级和详细级别的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:43:20.853

为了解决一大堆混乱，我首先要确定应用程序的不同主题是什么。例如，在无人驾驶汽车中，您可能有图像处理、异物检测与避让、道路获取与跟踪、速度调节、导航等。如果您在同一个模块中混合您的主题，您就有麻烦了。这些主题中的每一个都可以是一个名称空间。然后，将您的类/模块划分为适当的名称空间。弄清楚您的类如何处理各种用例，并根据需要添加/删除类。然后遵循“清洁代码”一书的规则并保持您的方法简单。

架构中的 4+1 视图表明没有描述整个系统的单一视图。4+1 讨论使用逻辑、开发、过程、物理和场景视图。所有这些都有 UML 对应物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:33:31.797

模型驱动开发允许您为您的软件带来质量保证。首先，无论多么昂贵或耗时，都应该针对所有项目进行，尤其是在项目规模扩大时。我对我们自己的项目也有同样的问题，该项目首先在没有任何模型的情况下开发。所以要有耐心。

实现系统实现的第一步，就是描述系统应该做什么，什么是可观察的，如何与用户和其他系统交互。用例图是您回答这些问题的方法。

然后你可能会考虑你可能需要多少个课程。在您的情况下，由于您已经编写了某些部分，因此考虑如何将主要功能解耦为许多小类并建立它们之间的关系。那里你需要类图。

这两个是最常见的符号，您至少必须对您的整体结构有一个概述。

如果你现在有很多类，那么系统的行为如何？数据和工作流程的顺序或顺序如何？在您最重要的场景中，应该按哪个顺序执行什么样的调用才能完成任务？这就是您需要序列图或协作图的原因。

我会说从这些开始，然后继续使用[更多模型](http://edn.embarcadero.com/article/31863)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:50:51.850

作为对评论“但是你将如何向某人说明应用程序整体如何工作？”的回答：对于大型应用程序，你不能。MsWord 总体上是如何工作的？

为了展示应用程序中的各个部分是如何工作的，您可以使用[用例](http://en.wikipedia.org/wiki/Use_case)。从那时起，您可以根据需要使用[类图](http://en.wikipedia.org/wiki/Class_diagram)（结构）、[序列图](http://en.wikipedia.org/wiki/Sequence_diagram)（程序流）和[状态图](http://en.wikipedia.org/wiki/State_diagram_%28UML%29)（状态）来展示每个用例的设计。您的代码应反映这些图表

# selenium - 是否可以使用 WebDriver 捕获 XHR 响应数据

> ID：13726152
> 
> 赞同：16
> 
> 时间：2012-12-05T15:05:50.810
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用 Selenium WebDriver 编写小型机器人。是否可以使用 browsermob-proxy 或任何其他方式从 XmlHttpRequests 的响应中捕获数据？我需要检查从 POST/GET 查询接收到的数据。实际上问题与browsermob-proxy的功能更相关，我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-22T21:01:46.147

我相信答案是否定的，但是您可以让 Selenium 执行 javascript 来发送 post/get 并检索响应标头...我使用类似这样的东西来显示错误（jqXHR 是 jQuery 的响应 XML 对象：[http://api. jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)）

```
$.post(destURL, formresult, function (data) {

//... process return data

}).fail(function (jqXHR, textStatus, error) {
    DisplayError(jqXHR, textStatus, error);

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-17T13:50:46.770

我只能想象用 Javascript 或 GreaseMonkey 拦截 AJAX 调用的常用方法。我用这个解决方案得到了很好的结果：[https](https://stackoverflow.com/a/6805461/3034120) ://stackoverflow.com/a/6805461/3034120 例如，您可以将输出替换为日志以创建一个 div 并用响应填充它。然后你可以用 Selenium 读出来。

# silverlight - 从基于浏览器的 Silverlight 5 应用程序调用本地 API

> ID：13726153
> 
> 赞同：0
> 
> 时间：2012-12-05T15:05:51.233
> 
> 标签：silverlight

我正在寻找有关如何实现基于 Silverlight 5 浏览器的应用程序的指导，该应用程序将能够调用将从智能卡读取数据的第 3 方 API（通过读卡器 API）。

所以你去网站，点击 Silverlight 应用程序页面，然后一旦它被加载到你的本地 PC 上，它将能够访问该 API 并读取数据。

我看过一些关于使用 COM 的说明，但不确定这是否可行，是否是正确的方法等等。

此外，如果我确实必须通过 COM 连接，Silverlight 是否能够安装该 COM 组件，还是必须单独安装？尽量避免在本地 PC 上安装我们必须处理远程发布/更新的软件。

谢谢，达诺

# ios - 使用 OTA 的 iOS MDM 注册

> ID：13726154
> 
> 赞同：2
> 
> 时间：2012-12-05T15:05:51.757
> 
> 标签：ios, mdm, ota

我遵循 Apple 的创建 MDM 服务器的指南，并且我想在 OTA 中分发 MDM 配置文件。Apple 的 OTA 指南包括 3 个步骤：

1.  验证
2.  SCEP
3.  设备配置

总共可以向设备提供三个配置文件 - 第一个在身份验证后获取设备信息，第二个用于 SCEP 注册，最后一个是实际的 MDM 配置文件。MDM 有效负载中的 IdentityCertificate 密钥是强制性的，因此我假设我需要将最后两个配置文件组合到一个具有 SCEP 和 MDM 有效负载的配置文件（我将此密钥称为 SCEP 有效负载）。我假设设备将首先处理 SCEP 有效负载 - 这是正确的吗？

此外，我希望用户被要求接受 MDM 配置文件，但从 Apple 的规格来看，似乎只要求用户批准第一个配置文件（要求提供设备信息的配置文件），而 OTA 的其余部分没有用户干预。

是这样吗？我想将所有配置文件合并为一个吗？如何分发 MDM 配置文件并要求用户接受它并让用户知道此 MDM 配置文件将能够控制什么？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:54:05.250

实际上，仅将第 2 步和第 3 步结合起来并不适合我。我宁愿重复第 2 步，并在第 3 步的配置文件中包含额外的 SCEP 有效负载。我不确定这背后的原因是什么，但这种方法也得到[了](https://stackoverflow.com/questions/11161082/error-when-combining-scep-and-mdm-payloads-enrollment-server-did-not-provision/11317124#comment18970428_11317124)证实。

至于接受 MDM 配置文件的用户，iOS 在安装 MDM 配置文件之前会询问用户。

# python - “*_”是在 Python 中忽略参数的可接受方式吗？

> ID：13726155
> 
> 赞同：39
> 
> 时间：2012-12-05T15:06:04.773
> 
> 标签：python

如果我有一个函数/方法是某个框架的回调的实现，并且不关心任何进一步的参数，它似乎在语法上是正确的，并且没有 pylint/IDE 投诉可用于`*_`表达对任何内容不感兴趣进一步的论点。我认为的重点是向工具和其他开发人员表达这些论点目前不相关的意图。

为了澄清我的意思：

```
def my_callbacK_handler(a, b, *_):
    ... 
```

我还没有看到这个成语在野外使用 - 它是否常见，是否有示例，是否存在已知问题？

对于那些不熟悉的人：`_`表达我对该符号不感兴趣的意图 - 它是 IDE 和 linter 识别的 Python“虚拟”。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-05T15:19:02.383

`_`与其他变量一样，它只是一个变量，但按照惯例，这意味着您不打算使用该值，只需声明并忘记它。

```
[OrderedSet() for _ in xrange(n)] 
```

构建一个`n`空有序集的列表。`_`是索引，但未使用；`_`通常根据需要使用，但未使用的变量名（不仅在 Python 中）。这只是一个棘手的 Python 习惯用法，因为没有内置语法来执行此操作。

在其他语言中看到这种情况并不少见（`_`有效标识符在哪里）。`_`通常意味着变量的值不感兴趣，但出于句法原因需要。

请注意，`_(...)`宏调用具有另一种传统含义，它来自 gettext，`_("string literal")`用于指示需要本地化的字符串。

从[ActivesState中读取的线程](http://code.activestate.com/lists/python-list/404846/)

我不能说任何问题，Python内部没有使用它，它只是一个变量，是我们要小心。

* * *

关于[* 和 ** 的语法](http://docs.python.org/2/tutorial/controlflow.html#arbitrary-argument-lists)：名称`*args`和`**kwargs`只是约定俗成的，但没有必要不使用它们。

```
def my_callbacK_handler(a, b, *_):
    ... 
```

因此，如果我通过`_`成语在您的代码中看到此函数，我的理解是，该函数仅在其工作中使用`a`和`b`参数，而将忽略其他函数。

正如您所说：*“`*_`表示对任何进一步的论点不感兴趣”*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-04-07T15:42:40.517

`*_`表示多个占位符，就像您编写的那样`def my_callbacK_handler(a, b, _,_,_....,_):`，并将创建一个名为的变量，该变量`_`是额外参数的列表

它有两个优点：

1.  它可以处理没有额外参数的情况

```
def f(): 
   return 1,2,3 

def g(): 
   return 1,2

def h(): 
   return 1,2,3,4 
```

`_`作为占位符**只能**处理一个值

```
x,y,_ = g() # ValueError: not enough values to unpack (expected 3, got 2)

x,y,_ = h() # ValueError: too many values to unpack (expected 3) 
```

而`*_`可以处理任意数量的值

```
x,y,*_ = g()                                                                                                                  

print(_)                                                                                                                      
[]

x,y,*_ = h()                                                                                                                  

print(_)                                                                                                                      
[3, 4] 
```

一句话：更喜欢`*_`更**健壮**的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T21:20:48.337

让我简单地添加一个例子：

```
>>> *_, a = [1,2,3]
>>> _, a
([1, 2], 3)

>>> _, a = [1,2,3]
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ValueError: too many values to unpack (expected 2) 
```

# ruby - Ruby“===”运算符在 Ranges 上的含义

> ID：13726162
> 
> 赞同：10
> 
> 时间：2012-12-05T15:06:29.673
> 
> 标签：ruby, operators, range

我最近开始学习 Ruby，我正在阅读以下[Ruby 手册](http://www.ruby-doc.org/docs/ProgrammingRuby/)。

在本手册中，他们说以下（关于范围）：

> 通用范围的最终用途是作为区间测试：查看某个值是否落在范围所代表的区间内。这是使用 ===（大小写相等运算符）完成的。

用这些例子：

*   (1..10) === 5 » 真
*   (1..10) === 15 » 假
*   (1..10) === 3.14159 » 真
*   ('a'..'j') === 'c' » 真
*   ('a'..'j') === 'z' » 假

在阅读了[此处](https://stackoverflow.com/questions/3154876/ruby-comparison-operators-vs)的 Ruby "===" 运算符后，我发现这适用于范围，因为 Ruby 将其转换为 case 语句。

> 因此，您可能希望能够将范围放在您的案例陈述中，并选择它。另外，请注意，case 语句在 case a when b then true end 等语句中转换为 b===a。

但是我有以下问题：为什么以下命令返回 true？

(1..10) === 3.14159 » 真

由于 (1..10) 表示 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]，我预计结果会是错误的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T15:20:15.277

`1..10`表示[`Range`](http://www.ruby-doc.org/core-1.9.3/Range.html)数学意义上从 0 到 10 的 a，因此包含`3.14259`

它*不*一样`[1,2,3,4,5,6,7,8,9,10]`。

这个数组是方法的结果[`Range#each`](http://www.ruby-doc.org/core-1.9.3/Range.html#method-i-each)，用于[`Enumerable#to_a`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-to_a)构造对象的数组表示，只产生包含在 Range 中的整数值，因为产生所有实数值意味着遍历无限数量的元素。

# sockets - 路由器如何处理端口？

> ID：13726170
> 
> 赞同：0
> 
> 时间：2012-12-05T15:06:40.087
> 
> 标签：sockets, ip, port, router

很短的问题。假设 user1 和 user2 连接到路由器。

User1 在端口 12000 上打开 mozilla firefox。User2 在端口 12001 上打开 mozilla firefox。

假设两个用户都加载了页面 www.google.com

当路由器向谷歌发送数据包时，谷歌会从user1和user2看到什么样的地址？对于两个用户来说是 123.123.123.123:7777 还是对于 user1 是 123.123.123.123:12000 对于 user2 是像 123.123.123.123:12001 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:11:02.303

> User1 在端口 12000 上打开 mozilla firefox。

这不是它的工作方式。

任何**连接**到任何服务器的客户端都将获得由其操作系统分配的[临时端口。](http://en.wikipedia.org/wiki/Ephemeral_port)所以连接从 192.168.0.5:12000（12000 是临时端口，即随机）到 123.123.123.123:7777。

第二个客户端，从不同的 IP 连接，将使用 192.168.0.6:12001（或者实际上，任何其他端口，甚至可以是 12000）到 123.123.123.123:7777 的组合。

路由器保存这些 IP 和端口组合以执行[NAT](http://en.wikipedia.org/wiki/Network_address_translation)。在执行 NAT 时，路由器将使用外部地址，甚至可能使用不同的临时（源）端口来连接到目标。

# jsf - 如何右对齐 h：panelGrid？

> ID：13726172
> 
> 赞同：1
> 
> 时间：2012-12-05T15:06:52.263
> 
> 标签：jsf

我在 jsf 中为网页设计了一个导航栏。

我希望一些链接在栏的右侧，一些在左侧。它似乎不起作用。

有任何想法吗？

```
<h:panelGrid columnus="2">
<h:panelGroup styleClass="alignmentLeft">
    <h:panelGrid columns = "2" columnsClasses = "alignmentLeft">
        <h:outputLink>... </h:outputLink>
            <h:outputText/>
        <h:outputLink>... </h:outputLink>
        <h:outputText/>
    </h:panelGrid>
</h:panelGroup>
<h:panelGroup styleClass="alignmentRight">
    <h:panelGrid columns = "2" columnsClasses = "alignmentRight">
        <h:outputLink>... </h:outputLink>
            <h:outputText/>
        <h:outputLink>... </h:outputLink>
            <h:outputText/>
    </h:panelGrid>
</h:panelGroup>
</h:panelGrid>

.alignmentRight {
 text-align : right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:38:44.927

试试这个，你的编码中也有一个输入错误，它是你输入的第一个 h:panelGrid 的列“columnus”

`<h:head>`必须在样式表里面声明。

```
<h:head>
<h:outputStylesheet name="styles.css"
        library="css" />
</h:head> 
```

然后在`<h:body>`

```
<h:body> 
<h:panelGrid columns="2" width="600">
        <h:panelGroup>
            <h:panelGrid columns="2" columnClasses="alignmentLeft" width="200">
                <h:outputLink>...1 </h:outputLink>
                <h:outputLink>...2 </h:outputLink>
            </h:panelGrid>
        </h:panelGroup>
        <h:panelGroup>
            <h:panelGrid columns="2" columnClasses="alignmentRight" width="200">
                <h:outputLink>...3 </h:outputLink>
                <h:outputLink>...4 </h:outputLink>
            </h:panelGrid>
        </h:panelGroup>
    </h:panelGrid>
</h:body> 
```

在样式表（styles.css）中，样式是，

```
.alignmentLeft {
 text-align : left;
 border: 1px solid black;
 background-color: orange;
}
.alignmentRight {
 text-align : right;
 border: 1px solid black;
 background-color: lime;
} 
```

# ruby - 在方法调用上替换变量值

> ID：13726179
> 
> 赞同：0
> 
> 时间：2012-12-05T15:07:17.437
> 
> 标签：ruby, variables, methods

假设我有以下课程：

```
class MyClass

  @@instances = []
  def initialize
    @@instances << self
  end#def

  def delete
    @@instances.delete(self)
    #what now??
    self.replace nil #doesn't do the trick
  end#def

end#class 
```

我想做以下事情：

```
o = MyClass.new
o.delete 
```

并将执行. `o`_ 有任何想法吗？`nil``delete`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:47:47.153

如果您想获取 的所有实例的数组`MyClass`，您需要做的就是

```
ObjectSpace.each_object(MyClass).to_a 
```

如果您想销毁未在其他任何地方引用`o`的`MyClass`给定实例`o`，那么`o`请引用其他内容

```
o = nil 
```

稍后，该对象将被垃圾回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:24:03.183

正如上面的尤里卡指出的那样，这是不可能的。但是，您可以实现类似的语义：

```
class MyClass
  def delete
    ....
    is_deleted
  end

  def is_deleted
     check_some_conditions
  end
end 
```

然后，您的语法将是：

```
o = MyClass.new
if o.delete.is_deleted
  ...
end 
```

您也可以覆盖`nil?`，但我不建议这样做，因为它可能会使使用您的代码的人感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:54:27.863

一种可能是：

```
vars = Kernel.global_variables + Kernel.local_variables
vars.map{|var| var=nil if var == self} 
```

但是，我不认为这是一个聪明的...

编辑：不，一点也不聪明

# hibernate - 在 JBoss 6.1 中针对 SQLServer 使用 Hibernate 4.1.8 时出错

> ID：13726181
> 
> 赞同：0
> 
> 时间：2012-12-05T15:07:22.553
> 
> 标签：hibernate, jpa-2.0, jboss6.x

由于[这个问题](https://stackoverflow.com/questions/13682837/cannot-use-an-idclass-attribute-for-a-manytoone-relationship)，我在 Hibernate 3.6.x 中发现了一个在 4.1.8 中解决的错误。我通过从 common/lib 中删除休眠库并替换为新库来“升级”了我的 JBoss 6.1。

更具体地说，我确实删除了：

*   hibernate-commons-annotations.jar（替换为 hibernate-commons-annotations-4.0.1.Final.jar）

*   hibernate-core.jar（由 hibernate-core-4.1.8.Final.jar 替换）

*   hibernate-entitymanager.jar（替换为 hibernate-entitymanager-4.1.8.Final.jar）

*   hibernate-jpa-2.0-api.jar（替换为 hibernate-jpa-2.0-api-1.0.1.Final.jar）

我确实保留了`hibernate-validator.jar`，`hibernate-validator-legacy.jar`因为我没有找到可能的替代品。

现在，服务器启动时没有抱怨，但是当它尝试使用属性映射实体时，它试图在 SQLServer 2008`boolean`中创建一个字段（它使用 type ），导致这些表没有创建。不过，没有属性的表确实可以正常工作。`boolean``bit``boolean`

我做错了什么？我`persistence.xml`在升级之前运行良好的那个没有改变，我没有找到对新 SQLServer 方言的引用，所以我假设我的升级过程很糟糕，我遗漏了一些东西。有什么建议么？

仅作记录，我在 Hibernate 和 SQL Server Express 2008 之上使用 JBoss6.1、JPA2.0。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:11:00.520

在布尔字段的注释中，尝试指定一个`columnDefinition`.

```
@Column(name="IS_APPROVED", columnDefinition="bit")
private boolean isApproved; 
```

# android - Android - Google Maps API v2 - SupportMapFragment 错误

> ID：13726189
> 
> 赞同：13
> 
> 时间：2012-12-05T15:07:54.993
> 
> 标签：android, google-maps, maps, android-fragments, google-api

我正在尝试第一次使用 Google Maps API v2 备份和运行我的一个应用程序。我在我的密钥库中为我的应用程序创建了一个密钥，提取了 SHA1 哈希，获取了一个 API 密钥，然后在应用程序中执行了以下操作......我包括：

> google-play-services.jar

以及导入 GooglePlayServices 库并将其添加为项目的引用。在我的 Java 代码中，我只是加载布局资源。

```
public class Times extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);
    }
} 
```

在我试图实例化的布局（res/layout/map.xml）中，我有：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

我的清单中还声明了以下内容：

```
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="tinyTech.us.ua.busschedule.permission.MAPS_RECEIVE" />

<permission
    android:name="tinyTech.us.ua.busschedule.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" /> 
```

并在清单的 Application 标签中声明：

```
<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="My_API_Key" /> 
```

加载活动时，它会在 LogCat 中崩溃并出现以下错误：

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source) 
```

我试图研究这个问题，但是我一直找不到我要找的东西。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T20:52:43.073

如果您`FragmentActivity`使用`SupportMapFragment`. 如果您使用的是，`MapFragment`您可以扩展`Activity`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-10T13:13:43.737

在您的布局中，使用

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/map"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              class="com.google.android.gms.maps.SupportMapFragment"/> 
```

代替

```
...    
android:name="com.google.android.gms.maps.SupportMapFragment"
... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-18T19:04:44.343

你必须这样做：

```
public class MainActivity extends android.support.v4.app.FragmentActivity{

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-11T13:31:12.677

这对我有用：[https ://stackoverflow.com/a/13744765/1215098](https://stackoverflow.com/a/13744765/1215098)

似乎您必须将 Google Play 服务添加为模块，而不仅仅是 .jar

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-19T18:00:58.333

我通过在导入 Google Play 服务库时选中“**将项目复制到工作区”解决了这个错误。**
更多信息在这里：http: [//developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-21T13:47:15.607

我在使用 Google Play 服务和所有内容时遇到了同样的问题.. 我作为一个库和所有内容都包含在内，但问题仍然存在（“**找不到 com.google.android.gms.maps.suportmapfragment** ”）..

我能够通过以下方式修复它：转到项目属性。然后选择**Java Build Path**。然后选择**订单和导出**选项卡。然后，确保检查**Android Dependencies**和**Android Private Libraries**

希望这可以帮助 ：）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-03T08:18:21.343

我想我有同样的问题，似乎较新的版本你必须在清单中添加这一行

```
<meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-13T09:40:27.390

我已经`<uses-library android:name="com.google.android.maps" />`在清单文件中添加了。这对我有用！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-04T16:14:34.853

我的情况，我补充说：

文件 -> 新建 -> Google -> Google 地图活动

我按照本[教程](https://www.youtube.com/watch?v=mdCRxEn540U)进行操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-24T10:24:22.677

我尝试了上面显示的所有内容，但仍然出现错误。因此，从以下版本降级`17.1.0`：

```
implementation 'com.google.android.gms:play-services-maps:17.1.0' 
```

到`16.1.0`

```
implementation 'com.google.android.gms:play-services-maps:16.1.0' 
```

为我工作！

# action - 创建动作聚合。按错误分组

> ID：13726190
> 
> 赞同：3
> 
> 时间：2012-12-05T15:07:55.897
> 
> 标签：action, facebook-opengraph, aggregation

我正在尝试使用 Facebook 的 Open Graph 为操作创建聚合。类似于他们在 Open Graph 教程中为“Cook”操作聚合的方式。当我设置聚合并保存更改时，出现错误：

“未包含路径 聚合的分组依据选项必须至少包含一个提供的到所选对象类型的路径。”

但它在高级选项卡下告诉我“无法为显示操作的聚合配置分组”。

所以，知道为什么我不能进行动作聚合，即使完全按照他们的教程进行操作？

谢谢， 加兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:00:58.380

只是为了让你知道，我昨天打开了一个关于他的问题的错误。 [https://developers.facebook.com/bugs/182435155230238?browse=search_50c0c0f757ac57630521765](https://developers.facebook.com/bugs/182435155230238?browse=search_50c0c0f757ac57630521765)

当/如果错误得到解决，我会更新这篇文章。

# r - 填写data.frame中缺失的行

> ID：13726191
> 
> 赞同：2
> 
> 时间：2012-12-05T15:08:01.747
> 
> 标签：r

我有两个`data.frame`s`df`和`wf`.

`df`每个时间点都有一行`id`。`tpoint`每个 都缺少一些时间点 ( ) `id`。

我的第二个`data.frame`,分别对每个ie和`wf`end 都有适当的开头和结尾。`tpoint``id``spoint``epoint`

所以我想`df`为缺失的`tpoints`. 以下是`data.frames`

```
df <- read.table(text= "id Gid tpoint dat1 dat2 dat3
                     1   a    1     x     x  55
                     1   a    3     x     x  44
                     1   a    4     x     x  33
                     2   a    2     x     x  66
                     2   a    3     x     x  43
                     3   b    4     x     x  42
                     3   b    5     x     x  36
                     4   b    4     x     x  33
                     4   b    5     x     x  65
                     4   b    6     x     x  77
                     5   b    4     x     x  72
                     5   b    5     x     x  25
                     5   b    6     x     x  12
                     5   b    7     x     x  09",header=TRUE)

 wf <- read.table(text= "id Gid spoint epoint
                     1   a    1     5
                     2   a    1     4
                     3   b    4     6
                     4   b    4     7
                     5   b    4     7",header=TRUE) 
```

我想出了一种方法来做到这一点：

```
library(plyr)

seqlist  <- apply(wf, 1, function(x) data.frame( id=x[1], 
                                                 Gid=x[2],
                                                 tpoint = seq(x[3], x[4])))
# bunch of warnings but I get the result

seqdf    <- ldply(seqlist, data.frame)
finaldf  <- merge(seqdf, df, by=c("Gid", "id", "tpoint"), all=TRUE) 
```

尽管我到达了我想去的地方，但我收到了一堆丑陋的警告。但我想*所有的警告都应该被压制*。有无数种方法可以给猫剥皮`R`。有没有更好的方法来做到这一点我错过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:48:30.803

发生错误是因为：

1.  在对`apply()`数据框的调用被强制转换为一个数组，在这种情况下是一个字符数组）
2.  这意味着每一行现在都是一个命名的字符向量
3.  当将命名向量强制为数据框时，R 让您知道它正在丢弃所有名称。

要删除警告，请尝试以下操作：

```
seqlist  <- apply(wf, 1, function(x){
  n <- as.numeric(x[4])-as.numeric(x[3])+1
  data.frame( id=rep(x[1], n), Gid=rep(x[2], n), tpoint = x[3]:x[4])
})

seqlist
[[1]]
  id Gid tpoint
1  1   a      1
2  1   a      2
3  1   a      3
4  1   a      4
5  1   a      5

[[2]]
  id Gid tpoint
1  2   a      1
2  2   a      2
3  2   a      3
4  2   a      4

[[3]]
  id Gid tpoint
1  3   b      4
2  3   b      5
3  3   b      6

[[4]]
  id Gid tpoint
1  4   b      4
2  4   b      5
3  4   b      6
4  4   b      7

[[5]]
  id Gid tpoint
1  5   b      4
2  5   b      5
3  5   b      6
4  5   b      7 
```

# java - 使用 Spring Data JPA/MongoDB Cross Store，查询可以跨两个数据库吗？

> ID：13726194
> 
> 赞同：4
> 
> 时间：2012-12-05T15:08:10.413
> 
> 标签：java, mongodb, jpa, spring-data

我正在使用 mongodb-customer-service-data 示例（可在[https://github.com/SpringSource/spring-data-document-examples](https://github.com/SpringSource/spring-data-document-examples)获得）。

该示例使用 @RelatedDocument 跨数据库关联域对象。它允许存储和更新对象足够好。

但是，我想做一个对 JPA 数据库（在示例 HSQLDB 中）和 MongoDB 都有条件的查询。

这甚至可能吗？有没有任何例子可以证明这是可能的？

* * *

与问题没有直接关系的评论：

我的用例是我们的应用程序是一个 Oracle DB，但我们现在开始接收半结构化数据。JPA 实体可由用户在某些限制内过滤，但我们希望将此功能扩展到半结构化数据。

似乎还有相互竞争的技术 QueryDSL 和 EclipseLink，但我找不到任何关于跨数据库进行查询的信息。

在 JPA 中，似乎不可能进行跨数据库查询，因为有不同的 PersistanceUnits 与每个数据库相关联。但是，mongodb cross-store 似乎否定了这个特殊问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:52:50.403

我从未使用过 Spring Data JPA，但如果 JPA 无法做到这一点，我怀疑 Spring Data 是否会提供这样的功能。
不知道你对mongodb cross-store 的理解是什么。所以我会简短地解释一下 mongodb 能做什么和不能做什么。

使用 mongodb，您无法跨多个集合（表）进行查询，因此您无法使用普通的 mongodb 进行连接。所以@RelatedDocument 是 Spring Data 提供的一个特性。相关文档可能是嵌入的（不知道 Spring Data 是否支持这一点），也可能是不同集合（和数据库）中文档的一些简单 DBRef。使用 DBRef，您只能查询 @RelatedDocument 字段，如 _id、集合和数据库，但不能查询实际引用的文档属性。

这表示 mongodb 不允许在单个查询中搜索跨数据库，因为您不能跨集合进行查询，因此您也不能对数据库执行此操作。您拥有的唯一跨商店功能是用于分片集合。有了这个，您可以通过一个 shardkey 将集合分布在多个节点上。MongoDB 可能需要查询所有集合分片以完成您的查询。但除此之外，我不会称之为跨数据库函数，你没有这样的能力。

如果这没有帮助，请更详细地解释您想要做什么。

# javascript - 如何在一个 jQuery 移动页面中的多个 DIV 之间滑动？

> ID：13726196
> 
> 赞同：1
> 
> 时间：2012-12-05T15:08:13.710
> 
> 标签：javascript, html, jquery-mobile, user-interface, swipe

如何在一个 jQuery 移动页面中的多个 DIV 之间滑动？

```
 <div data-role="page">
      <div data-role="content">
         <div> Content1 </div>
         <div> Content1 </div>
         <div> Content1 </div>
      </div>
    </div> 
```

我在 jQuery mobile 中使用`swipeleft`和`swiperight`事件，但它仅适用于页面`(data-role="page")`

谁能说如何实现 DIV 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:13:18.977

我写了一些用于爆炸滑动的代码，它可能对你有帮助

```
$(function () {
var ftch, // first touch cache
lck = Math.sin(Math.PI / 4); //lock value, sine of 45 deg configurable

var defSwipeDir = function (el, tchs) { // need define swaping direction, for better UX
    if (typeof (tchs) !== 'object') return 0; // check if there was any movements since   first touch, if no return 0
    var ltch = tchs[tchs.length - 1], // last touch object
        dx = ltch.pageX - ftch.pageX,
        dy = ltch.pageY - ftch.pageY,
        hyp = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2)),
        sin = dy / hyp,
        cos = dx / hyp,
        dir;

    if (Math.abs(cos) >= lck) { // left or right swape
        dir = cos > 0 ? 'r' : 'l';
    } else { // up or down
        dir = sin < 0 ? 'u' : 'd';
    }
    el.trigger('swipe', dir); // trigger custom swipe event
    return dir; // and return direction too
}

$('.myelementTouchDetection').on('touchstart touchmove swipe', function (ev, d) {
    var oev = ev.originalEvent,
        myelementTouchDetection = $(this),
        dir; // you may know swipes on move event too

    switch (ev.type) {
        case 'touchstart':
            ftch = oev;
            break;
        case 'touchmove':
            dir = defSwipeDir(myelementTouchDetection, oev.touches);
            return false // cancel default behaiviour
            break;
        case 'swipe':
            switch (d) {
                case 'r': // swipe right
                    console.log('swipe right');
                    break;
                case 'l': // swipe left
                    console.log('swipe left');
                    break;
                case 'u': // swipe up
                    console.log('swipe up');
                    break;
                case 'd': // swipe down
                    console.log('swipe down');
                    break;
            }
            break;
    }
})
}); 
```

# c# - 把一个参数传给下一个参数的时候叫什么

> ID：13726201
> 
> 赞同：0
> 
> 时间：2012-12-05T15:08:31.290
> 
> 标签：c#, javascript

我注意到很多代码，人们在其中执行以下操作：

```
myClass.someMethod(something here, $1); 
```

1 美元正在从“这里的东西”中获得价值？

这被称为什么？我好像到处都找不到？但是这一步，过程在正则表达式的情况下使用了很多..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:10:17.157

您经常会在正则表达式中看到这一点，其中`$1`表示您要转移到新值中的*捕获组。*

例如，假设我们正在为我们的网站构建一个推文解析器。我们想在推文中找到@references，并将它们转换为指向这些特定帐户的链接：

```
// Our Tweet
$t = "I am @jonathansampson, and I work with @appendTo.";

// Find every occurence of @something, capture 'something'
echo preg_replace("/@([a-z]+)/i", "<a href='http://twitter.com/$1'>$0</a>", $t); 
```

请注意，我们正在匹配每个出现的@something，但我们将用户名部分包装在其中`(`，`)`以便我们可以在替换文本中单独处理它。整个模式由 表示`$0`，它将完整地保存从`@`用户名中的最后一个字符到最后一个字符的值。

JavaScript 也是如此：

```
var tweet = "I am @jonathansampson, and I work with @appendTo.",
    patrn = /@([a-z]+)/gi,
    links = tweet.replace(patrn, "<a href='http://twitter.com/$1'>$&</a>"); 
```

变量`links`现在包含值：

```
console.log(links);
/*
    "I am <a href='http://twitter.com/jonathansampson'>@jonathansampson</a>, and 
     I work with <a href='http://twitter.com/appendTo'>@appendTo</a>."
*/ 
```

您可能会注意到，我`$&`在 JavaScript 中使用 PHP 来获取整个匹配模式`$0`- 我们必须处理生活中的这些差异。我很抱歉 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:18:33.810

如果你在谈论 javascript，$ 可以在声明中使用，所以它可能是一些东西。

例如，您可以将变量声明为

```
var $1 = 1; 
```

然后在您的通话中使用它

```
myClass.someMethod(something here, $1); 
```

同样，它可以是对函数的引用。

# ios - 成功运行后，通过 SimplePost 请求发送的无法识别的选择器崩溃。

> ID：13726202
> 
> 赞同：0
> 
> 时间：2012-12-05T15:08:33.207
> 
> 标签：ios, xcode, automatic-ref-counting, analyzer

我已经使用 SimplePost 类好几个星期了，没有遇到任何问题。现在，在请求在连接中返回正确数据后，我崩溃了。我没有（故意）接触过 SimplePost 类文件。但是当我运行分析器时，它现在（以前从未这样做过）指出了以下方法：

```
+ (NSMutableURLRequest *) urlencodedRequestWithURL:(NSURL *)url andDataDictionary:(NSDictionary *) dictionary {
   //  Create POST request
   NSMutableURLRequest *urlencodedPostRequest = [NSMutableURLRequest requestWithURL:url];
   [urlencodedPostRequest setHTTPMethod:@"POST"];
   //  Add HTTP header info
   [urlencodedPostRequest addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField: @"Content-Type"];
   //  Add POST body
   NSMutableData *POSTBody = [NSMutableData data];
   //  Add k/v to the body
   NSArray *keyArray = [dictionary allKeys];
   for( int i = 0; i < [keyArray count]; ++i ) {
       // Core Foundation function used to transform @ ==> %40 , etc
       NSString *escapedString = (__bridge NSString *) CFURLCreateStringByAddingPercentEscapes(NULL, (__bridge CFStringRef)([dictionary objectForKey:[keyArray objectAtIndex:i]]),NULL, (CFStringRef)@"!*'();:@&=+$,/?%#[]", kCFStringEncodingUTF8);
       [POSTBody appendData:[[NSString stringWithFormat:@"%@=%@", [keyArray objectAtIndex:i], escapedString] dataUsingEncoding:NSUTF8StringEncoding]];
       if( i < ([keyArray count] - 1) ) {
            [POSTBody appendData:[[NSString stringWithFormat:@"&"] dataUsingEncoding:NSUTF8StringEncoding]];
       }
   }
   [urlencodedPostRequest setHTTPBody:POSTBody];
   return urlencodedPostRequest;
} 
```

运行分析器向我显示：

![错误 prt1](../Images/ad7192733cb97e71def48e99c9bab227.png)
这些行继续为： ![错误 prt2](../Images/adffb1e6ea26d9e4b36ecaecd441c660.png)

我很难理解发生了什么。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:23:27.987

你试过`__bridge_transfer`for`escapedString`吗？

```
 NSString *escapedString = (__bridge_transfer NSString *) CFURLCreateStringByAddingPercentEscapes(NULL, (__bridge CFStringRef)([dictionary objectForKey:[keyArray objectAtIndex:i]]),NULL, (CFStringRef)@"!*'();:@&=+$,/?%#[]", kCFStringEncodingUTF8); 
```

参看。[ARC的正确桥接？](https://stackoverflow.com/questions/6822473/correct-bridging-for-arc)

# objective-c - RestKit - 水合外键数组

> ID：13726203
> 
> 赞同：2
> 
> 时间：2012-12-05T15:08:41.183
> 
> 标签：objective-c, ios, cocoa-touch, core-data, restkit

我有以下 JSON：

```
{
    "users": [
        {"id": "1", "name": "John Doe"},
        {"id": "2", "name": "Bill Nye"}
    ],
    "groups": [
        {"id": "1", "name": "Group1", "users": ["1", "2"]},
        {"id": "2", "name": "Group2", "users": ["1"]}
    ]
} 
```

...以及带有用户和组对象的核心数据模型。组对象与用户具有一对多关系 (NSSet)。

我发现以下线程似乎表明这是可能的，但没有解释如何执行这种映射：

[https://github.com/RestKit/RestKit/issues/284](https://github.com/RestKit/RestKit/issues/284)

如何执行此映射以正确连接每个组的“用户”关系？

**注意：**我已经设置了正确地将 JSON 用户和组映射到其各自的核心数据对象的映射。但是，每个组的“用户”NSSet 是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:22:44.563

因此，我使用 RestKit 0.20(pre2) 解决了这个问题。

JSON 需要更改为以下内容（注意组的 users 数组中的属性名称）：

```
{
    "users": [
        {"id": "1", "name": "John Doe"},
        {"id": "2", "name": "Bill Nye"}
    ],
    "groups": [
        {"id": "1", "name": "Group1", "users": [{"id" : "1"}, {"id" : "2"}]},
        {"id": "2", "name": "Group2", "users": [{"id" : "1"}]}
    ]
} 
```

然后，以下映射：

```
RKEntityMapping *userMapping = [RKEntityMapping mappingForEntityForName:@"User" inManagedObjectStore:managedObjectStore];
userMapping.identificationAttributes = @[@"id"];
[userMapping addAttributeMappingsFromArray:@[@"id", @"name"]];
RKEntityMapping *groupMapping = [RKEntityMapping mappingForEntityForName:@"Group" inManagedObjectStore:managedObjectStore];
groupMapping.identificationAttributes = @[@"id"];
[groupMapping addAttributeMappingsFromArray:@[@"id", @"name"]];
[groupMapping addRelationshipMappingWithSourceKeyPath:@"users" mapping:userMapping]; 
```

最后，以下 responseDescriptors：

```
RKResponseDescriptor *userResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:classMapping pathPattern:@"/api/allthejson" keyPath:@"users" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
RKResponseDescriptor *groupResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:classMapping pathPattern:@"/api/allthejson" keyPath:@"groups" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptorsArray:@[userResponseDescriptor, groupResponseDescriptor]]; 
```

然后使用 RKObjectManager 的 getObjectsAtPath:parameters:success:failure 方法获取您的对象，您就完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:58:34.527

RestKit 有很多问题，尤其是在建模关系方面。调试映射可能令人生畏。

这是一些处理您在没有 RestKit 的情况下描述的代码。

```
NSArray *userArray; 
// an array populated with NSManagedObjects 
// correctly converted from JSON to the User entity

NSArray *groups = [jsonObject objectForKey:@"groups"];

for (NSDictionary *d in groups) {
   Group *g = [NSEntityDescription insertNewObjectForEntityForName:@"Group"
                  inManagedObjectContext:_managedObjectContext];
   g.id = @([d[@"id"] intValue]);
   g.name = d[@"name"];
   NSArray *users = d[@"users"];
   for (NSString *s in users) {
      User *u = [[userArray filteredArrayUsingPredicate:
        [NSPredicate predicateWithFormat:@"id = %@", @([s intValue])]]
          objectAtIndex:0];
      [g addUsersObject:u];
   }
}
// save 
```

# java - Spring-DM OSGI 服务和@Autowired 的问题

> ID：13726205
> 
> 赞同：1
> 
> 时间：2012-12-05T15:08:45.503
> 
> 标签：java, spring, osgi, autowired, spring-dm

我正面临 Spring-DM 和 @Autowired 与 Osgi 服务的问题。我已经定义了一个 Spring bean + OSGI 服务如下：

```
<bean id="my.sessionFactoryBean"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource">
            <ref local="my.dataSource" />
        </property>
            ...
</bean>
<osgi:service ref="my.sessionFactoryBean"
                id="my.sessionFactory" interface="org.hibernate.SessionFactory" /> 
```

我可以从另一个包中引用此服务，而在 xml bean 定义中没有任何问题，如下所示：

```
<beans>
...
    <osgi:reference id="my.sessionFactory"
        interface="org.hibernate.SessionFactory" />
..
    <bean id="my.databaseItemReader"
        class="my.MyReader">
        <property name="sessionFactory" ref="my.sessionFactory" />
...
</beans> 
```

我的问题依赖于使用 @Autowired 注释，如下所示：

```
public abstract class AbstractHibernateDao {

    @Autowired
    @Qualifier(value="my.sessionFactory")
    private SessionFactory sessionFactory;
    ... 
```

我收到了经典错误：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.Sess
ionFactory my.AbstractHibernateDao.sessionFactory; nested exception is org.springfr
amework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for d
ependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {
@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qu
alifier(value=my.sessionFactory)} 
```

如果我删除 @Qualifier，我会收到此错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.hibernate.SessionFactory] is defined: expected single matching bean but found 2: [my.sessionFactoryBean, my.sessionFactory] 
```

这让我觉得我在 Spring bean 注册表中确实有我的 OSGI 服务......知道我做错了什么吗？

仅供参考，我也尝试在 setter 上使用 @ServiceReference 注入 OSGI 服务，但 Spring-DM 从不注入它（有一些 nullpointerexception）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:49:03.840

只是一个猜测，但是当您使用@Autowire 时，您必须执行“context:component-scan”，而这反过来可能会找到正在显示的附加 bean (my.sessionFactoryBean)。使用 XML 注入时，可能未启用组件扫描，因此 OSGi 服务已正确解析。

# asset-pipeline - 无法将 Stylus @import 与 Rake 管道一起使用

> ID：13726209
> 
> 赞同：0
> 
> 时间：2012-12-05T15:08:50.963
> 
> 标签：asset-pipeline, stylus

我有一个简单的 Rake Pipeline 设置，它只使用 rake-pipeline-web-filters gem 在我的 .styl 文件上运行“stylus”。（原始管道做得更多，但我已将其精简为这个问题的基本要素。

```
=== Assetfile ===
require "rake-pipeline-web-filters"

output "build"

input "app/style" do
  # Compile Stylus to CSS
  match "*.styl" do
    stylus
  end
end 
```

这适用于将单个 .styl 文件转换为单个 .css 文件。

但是，我无法使用 Stylus @import 命令将一个文件导入另一个文件（对于 mixins 等是必需的。相反，我得到了错误

```
ExecJS::ProgramError: Error: stylus:1
 > 1| @import "appmixins"
   2| 

failed to locate @import file appmixins.styl 
```

所有 styl 文件都在同一个文件夹中，当我使用 npm 版本在命令行上执行 stylus 时，导入工作正常，因此没有语法错误。

这只是 rake-pipeline-web-filters 中的 Stylus 过滤器中缺少的东西，还是我可以做些什么来使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:13:12.537

好的，看起来当我在 Rake Pipeline 中运行时，假设所有路径都从我正在运行管道的目录开始，因此所有 @imports 都必须与该目录相关。将我的导入更改为`@import "app/style/appmixins"`有效。这与 Stylus 的 NPM 版本不同，因为它期望（并且文档指定）所有路径都相对于单个样式表。不确定我是否可以在 Assetfile 中以不同的方式指定块以使其按预期工作，但无论如何，现在一切都对我有用。

# java - 当 form1 处于活动状态时，所有表单都必须 setVisible

> ID：13726211
> 
> 赞同：0
> 
> 时间：2012-12-05T15:08:57.597
> 
> 标签：java, jframe

我有 form1、form2 和 form3 三种形式。我希望当 Form1 打开时，所有表单都必须关闭（`setVisible (false)`），除了 Form1。所以，当 Form1 处于活动状态时，只打开 Form1

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:17:16.727

也许只需检查 form1是否存在`isVisible(form1)`，如果是，则`setVisible(false)`. 这是你想要的吗？

我想到了另一件事。取决于你想做什么，也许使用`dispose()`而不是`setVisible()`.

希望我能帮上忙。

# java - 如果您只有一种方法，最好在初始化期间或之后使用对象方法？

> ID：13726212
> 
> 赞同：1
> 
> 时间：2012-12-05T15:09:02.743
> 
> 标签：java, performance, class, runtime

这个问题肯定会尖叫糟糕的编程实践，但是，我很好奇这里是否涉及任何性能风险。

想象一下，你有一个只附加了一个方法（不包括构造函数）的类，为了简单起见，我们会说：

```
public class TestClass{

public TestClass(){

    // Set values or whatever you want in the constructor

}
public String printString(){

    System.out.println("print");
}
} 
```

现在考虑到只有一种方法，显然任何时候您使用该类都可能想要调用该方法`printString`。`printString`那么在构造函数中调用是否有任何负面影响（除了理智之外） ？而不是做`testClass test = new testClass()`然后打电话`test.printString()`？

同样，这个问题是关于性能的——而不是编程实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:14:41.470

您可以放入`printString`enum Utility 类或 Singleton 之类的

```
public enum TestClass {;
    public static void printString(){
        System.out.println("print");
    }
} 
```

但是，从性能的角度来看，与向控制台写入一行的成本相比，每次创建一个新对象的成本非常小。不同的是名义上的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:14:49.057

**意见上没有性能差异**，因为编译器有相同的语句要编译（无论你把语句放在调用类还是构造函数中），而 JVM 有确切的语句要执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:14:03.353

你可以做的是使用枚举

```
public enum TestEnum {
    TestEnum;
    public String printString() {
        System.out.println("print");
        return null;
    }
} 
```

从性能的角度来看不会有太大差异，但从编码的角度来看，您无需每次都创建对象。您也可以将静态实用程序类作为枚举。

# android - 透明操作栏：自定义标签颜色

> ID：13726214
> 
> 赞同：62
> 
> 时间：2012-12-05T15:09:09.143
> 
> 标签：android, actionbarsherlock

我想创建一个带有透明标签的 ActionBar，带有`#3b000000`. 像这样，但在 ActionBar 下方有选项卡：

![在此处输入图像描述](../Images/0f29be78ba1136dd2ad80fa06a03f680.png)

这是我在 styles.xml 中使用的代码：

```
<style name="Theme.MyTheme" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/ActionBar</item>
    <item name="windowActionBarOverlay">true</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="actionBarStyle">@style/ActionBar</item>
</style>

<style name="ActionBar" parent="@style/Widget.Sherlock.Light.ActionBar">
    <item name="android:background">@color/actionbar</item>
    <item name="background">@color/actionbar</item>
    <item name="android:actionBarTabStyle">@style/ActionBarTabStyle</item>
    <item name="actionBarTabStyle">@style/ActionBarTabStyle</item>
</style>

<style name="ActionBarTabStyle" parent="@style/Widget.Sherlock.ActionBar.TabView">
    <item name="background">@color/actionbar_tabs</item>
    <item name="android:background">@color/actionbar_tabs</item>
</style> 
```

发生的情况是，ActionBar 本身*确实*显示了透明背景色，但选项卡是完全透明的（没有颜色可见）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-12-13T07:14:30.273

致电`setStackedBackgroundDrawable()`您的`ActionBar`：

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
ActionBar actionBar = getActionBar();
actionBar.setBackgroundDrawable(new ColorDrawable(Color.parseColor("#330000ff")));
actionBar.setStackedBackgroundDrawable(new ColorDrawable(Color.parseColor("#550000ff"))); 
```

这会产生（例如，带有一些随机图标和选项卡，以及两种不同的蓝色背景颜色以突出显示效果）：

![在此处输入图像描述](../Images/08df4730358ed600d56778af628564c8.png)

（刷新图标是默认的，带有一点透明度，其他图标是自定义的测试图标，颜色为#FFFFFFFF，即不透明）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-11T13:12:59.530

我在一个项目上做过这个，风格是这样的：

```
<style name="AppTheme" parent="android:Theme.Holo">
    <item name="android:windowActionBarOverlay">true</item>
    <item name="android:actionBarStyle">@style/action_bar_theme</item>
    <item name="android:actionMenuTextColor">#fff</item>
</style>

<style name="action_bar_theme" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">#b3000000</item>
    <item name="android:titleTextStyle">@style/action_bar_text</item>
</style> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-25T13:43:10.687

如[本文所述](https://developer.android.com/training/basics/actionbar/overlaying.html)，使用以下自定义主题完美无缺。

```
<resources>
    <!-- the theme applied to the application or activity -->
    <style name="CustomActionBarTheme"
           parent="@android:style/Theme.Holo">
        <item name="android:windowActionBarOverlay">true</item>
    </style>
</resources> 
```

为了应用一些颜色，Gunnar 的回答显示了如何。

```
ActionBar actionBar = getActionBar();
actionBar.setBackgroundDrawable(new ColorDrawable(Color.parseColor("#330000ff")));
actionBar.setStackedBackgroundDrawable(new ColorDrawable(Color.parseColor("#550000ff"))); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-28T06:45:42.880

这是我完全透明的操作栏的代码

```
<!-- Base application theme. -->
<style name="TransparentTheme" parent="android:Theme.Holo.Light">
    <!-- Customize your theme here. -->
    <item name="android:windowBackground">@null</item>
    <item name="android:actionBarStyle">@style/ActionBarStyle.Transparent</item>
    <item name="android:windowActionBarOverlay">true</item>
</style>

<style name="ActionBarStyle.Transparent" parent="android:Widget.ActionBar">
    <item name="android:background">@null</item>
    <item name="android:displayOptions">showHome|showTitle</item>
    <item name="android:titleTextStyle">@style/ActionBarStyle.Transparent.TitleTextStyle</item>
</style>

<style name="ActionBarStyle.Transparent.TitleTextStyle" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

![在此处输入图像描述](../Images/22d28c08bf520627dac88c581366563b.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-09T14:47:25.747

```
 getWindow().requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY);//or add in style.xml
             ActionBar actionBar = getActionBar();

             ColorDrawable newColor = new ColorDrawable(getResources().getColor(R.color.action_bar_color));//your color from res
             newColor.setAlpha(128);//from 0(0%) to 256(100%)
             getActionBar().setBackgroundDrawable(newColor); 
```

在**style.xml中**

```
<resources>
    <!-- the theme applied to the application or activity -->
    <style name="CustomActionBarTheme"
           parent="@android:style/Theme.Holo">
        <item name="android:windowActionBarOverlay">true</item>
    </style>
</resources> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-14T16:11:01.107

To set any theme action bar transparent as background image or color should be shown the best best and easy way to implement it.

```
 actionBar.setBackgroundDrawable(new ColorDrawable(ContextCompat.getColor(activity, android.R.color.transparent)));

    ImageView image = new ImageView(this);
    image.setTag(R.string.decore_view);
    image.setAdjustViewBounds(true);
    image.setScaleType(ImageView.ScaleType.CENTER_CROP);
    image.setLayoutParams(new ViewGroup.LayoutParams(-1, -1));
    image.setImageResource(R.drawable.home_bg);
    ((ViewGroup)((ViewGroup)getWindow().getDecorView())).addView(image, 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-18T02:49:28.280

```
ActionBar actionBar = getSupportActionBar();
actionBar.setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

对我来说效果很好

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-07T11:06:35.230

这在我的`ActionBar`透明案例中效果很好。

```
getSupportActionBar().setBackgroundDrawable(new ColorDrawable(Color.parseColor("#330000ff")));
getSupportActionBar().setStackedBackgroundDrawable(new ColorDrawable(Color.parseColor("#550000ff"))); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-08-13T23:05:31.747

```
<!-- Base application theme. -->
<style name="AppTheme" parent="android:Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarTabBarStyle">@style/MyActionBarTabBar</item>
    <item name="android:windowActionBarOverlay">true</item>
</style>

<style name="MyActionBar"
    parent="@android:style/Widget.Holo.Light.ActionBar.Solid.Inverse">
    <item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
    <item name="android:background">@color/actionbar</item>
    <item name="android:backgroundStacked">@color/tabbar</item>

</style> 
```

颜色/操作栏和颜色/标签栏颜色值是透明的

# java - 具有动态数字列和行的Android tableview

> ID：13726216
> 
> 赞同：0
> 
> 时间：2012-12-05T15:09:17.317
> 
> 标签：java, android, xml, tableview

这实际上是一个记忆训练应用程序，正方形矩阵翻转到它们的另一侧而不是返回到第一侧。用户需要点击翻转的方块。你知道我的意思？ ![在此处输入图像描述](../Images/230c2350e2c910c50c7b7cdbc847613f.png)

类似的东西。

我需要的是矩阵的大小会动态变化。如果用户已经通过了一级复杂度（例如矩阵大小为 4x4），那么矩阵大小会增长（例如 5x5），如果没有，那么矩阵大小会变小（例如 3x3）。我希望这很清楚，如果不是 - 抱歉，英语不是我的母语 =)

因此，如果我从代码中做到这一点，这将不是问题。我会将 ViewFlipper 与一些过渡动画一起使用，并使用充气机或类似的东西（或直接从代码中完全不使用 xml）创建具有我想要的尺寸的 TableView。然后从代码中将其添加到 ViewFlipper。

但不知何故，我不喜欢这个主意。

然后下一个想法进入我的脑海。用所有可能的表格视图来做 ViewFlipper，然后只需 showNext(); 或 showPrevious(); 取决于用户做了什么。但在这种情况下，XML 会非常大。

所以也许有人知道另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:29:49.780

我建议您查看[view-pager-example](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)，

使用 viewflipper showNext(); 或 showPrevious(); 您必须同时下载所有数据，但使用 Fragmen，您只能加载与 Fragment 关联的特定数据。

您可以更改每个片段的视图，如下所示

```
 @Override
        public Fragment getItem(int position) {
            switch (position) {
            case 0:
                return new DetailFragment();
            case 1:
                return new ImageFragment(R.drawable.ic_launcher);
            case 2:
                return new ImageFragment(R.drawable.thumb);

            default:
                return null;
            }
        } 
```

[编辑-用于检查侦听器中的视图]

公共类 LoginExampleImplements 扩展 Activity 实现 OnClickListener {

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    btn1.setOnClickListener(this);
    btn2.setOnClickListener(this);
    btn3.setOnClickListener(this);
    btn4.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    if(v==btn1) {

    } else if(v==btn2) {

    } else if(v==btn3) {

    }  else if(v==btn4) {

    }
} 
```

}

[编辑 2]

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

        LinearLayout1 = (LinearLayout) findViewById(R.id.LinearLayout1);

        for (int i = 0; i < 30; i++) {
            button = new Button(getApplicationContext());
            button.setId(i);
            button.setOnClickListener(this);
            LinearLayout1.addView(button);
        }

    }

    @Override
    public void onClick(View v) {
        Button b = (Button)v;
        b.getId()
        // check clikedId   
    } 
```

[编辑 3]

```
public class MainActivity extends Activity implements OnClickListener{  
    ImageView img;
    LinearLayout LinearLayout1;
    LinearLayout.LayoutParams layoutParams; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        LinearLayout1 = (LinearLayout) findViewById(R.id.ln1);
         layoutParams = new LinearLayout.LayoutParams(100, 100);
        for (int i = 0; i < 30; i++) {
            img = new ImageView(getApplicationContext());
            img.setId(i);
            img.setTag(i);           
            layoutParams.setMargins(10, 10, 10, 10);
            img.setLayoutParams(layoutParams);          
            img.setBackgroundColor(Color.RED);
            img.setPadding(10, 10, 10, 10);
            img.setOnClickListener(this);

            LinearLayout1.addView(img);            
        }
    }

    @Override
    public void onClick(View v) {
        ImageView b = (ImageView)v;     
        b.setBackgroundColor(Color.BLUE);
        b.setImageLevel(Integer.valueOf(String.valueOf(b.getTag())));
    }

} 
```

# actionscript-3 - 如何控制 Flex Mobile 的 TabbedViewNavigator 选项卡中的图标

> ID：13726223
> 
> 赞同：1
> 
> 时间：2012-12-05T15:09:37.580
> 
> 标签：actionscript-3, apache-flex, air, flash-builder, flex4.5

由于目前正在使用 Flex Mobile 开发移动应用程序，因此需要完成一些事情并进行一些精细的视觉布局调整。由于我的应用程序是使用**TabbedViewNavigatorApplication**在部分中构建的，因此我想添加和微调出现在**TabbedViewNavigator** #tabBar 选项卡中的图标。嗯，这是那些似乎需要几分钟的任务之一，最后是搜索 Adob​​e api 文档并在谷歌上搜索了几个小时，最终在几天内找到了解决方案。说所以我想发布我的解决方案，希望有人需要它并在他们自己的特定情况下使用它。

这里首先要提到的是，Adobe 在默认情况下，有一个广泛的帮助库，用于对 spark 组件进行蒙皮，但最终 - 这些示例通常只触及特定情况和/或实施所需的表面。

首先我想说我避免使用**mxml皮肤，并且总是使用****ClassReference**在 AS3 类中做我的火花皮肤工作。在我看来，这种方法比 mxml 中的过度垃圾邮件更加灵活、优雅和干净。虽然有时更难实施。

因此，您典型的最小 TabbedViewNavigator 应用程序如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160" applicationComplete="onApplicationComplete(event)">

<fx:Style source="MyStyles.css" />

    <fx:Script>
        <![CDATA[
            import spark.components.ViewNavigator;

            private function onApplicationComplete(e:Event):void {
                for each(var vn : ViewNavigator in this.navigators){
                   /// do something with your VN's ...
                   vn.icon = "./assets/myFaboulousIcon.png";
                }
            }           

        ]]>
    </fx:Script>

    <s:ViewNavigator label="one" width="100%" height="100%" firstView="views.oneView"/>
    <s:ViewNavigator label="two" width="100%" height="100%" firstView="views.twoView"/>
    <s:ViewNavigator label="three" width="100%" height="100%" firstView="views.threeView"/>

</s:TabbedViewNavigatorApplication> 
```

在这个典型配置中，您可以访问**ViewNavigator**图标属性并在您的 mxml 或 AS3 中设置它（例如在上面的 for 循环中），最终添加一个 switch 语句来为每个选项卡选择不同的图标......但这就是您的故事结束。**当某个ViewNavigator**由可视组件表示时，使用 ViewNavigator 图标属性。这意味着在您的#tabBar 中，**ViewNavigator**在视觉上表示为导航器堆栈的一部分，并且是合乎逻辑的 - 在这种情况下，它使用指定的图标。

现在让我们假设现在您想以编程方式更改 alpha 或为您的图标着色，这意味着您总是使用一组图标但在不同的情况下——你给它们不同的视觉属性，其中一种情况可能是——它们在应用程序中的视觉吸引力#标签栏。

图标属性是图标图像文件的**路径**，并且作为类型是通用对象。所以你不能改变 alpha 或用它做任何其他事情。这两个图标属性都不会为您提供对包含图标本身的显示对象的任何引用，也不会为您提供多汁的 AS3 jonglery pokery 所需的任何其他内容...

对于这样的任务，我们必须做一些漂亮的火花蒙皮（在 AS3 中）；）所以请阅读下面的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:09:37.580

第一步是从上面的**MyStyles.css**示例中添加您的 css 文件（我总是在 css 中进行皮肤类引用，发现它很容易在需要时进行管理和更改）......

```
/* MyStyle.css example */

.
.

s|TabbedViewNavigator #tabBar {
    skinClass: ClassReference("com.myapp.skins.TabBarSkin");
}

.
. 
```

您现在必须定义您的自定义**TabBarSkin**类，它看起来像这样：

```
/* TabBarSkin Class */
package com.myapp.skins
{
    import spark.skins.mobile.TabbedViewNavigatorTabBarSkin;
    import spark.skins.mobile.supportClasses.ButtonBarButtonClassFactory;
    import spark.components.ButtonBarButton;

    public class TabBarSkin extends TabbedViewNavigatorTabBarSkin
    {
        public function TabBarSkin() {
            super();
        }

        override protected function createChildren():void
        {
            if (!firstButton) {
                firstButton = new ButtonBarButtonClassFactory(ButtonBarButton);
                firstButton.skinClass = TabBarFirstTabSkin;
            }

            if (!lastButton) {
                lastButton = new ButtonBarButtonClassFactory(ButtonBarButton);
                lastButton.skinClass = TabBarLastTabSkin;
            }

            if (!middleButton) {
                middleButton = new ButtonBarButtonClassFactory(ButtonBarButton);
                middleButton.skinClass = TabBarLastTabSkin;
            }

            super.createChildren();
        }
    }
} 
```

没有得到太多细节，你必须知道这个自定义类**TabBarSkin**继承自**TabbedViewNavigatorTabBarSkin**，它为你的#tabBar 中的每个重要选项卡位置/第一个/中间/最后一个/有 3 个皮肤类。在最简单的情况下我们必须实现（扩展）其中两个 /first/ 和 /last -> 因为 /mid/ 位置也使用 /last/ 皮肤，在这种情况下我们不需要单独实现它。

```
/* TabBarFirstTabSkin Class */
package com.myapp.skins
{
    import spark.components.Group;
    import spark.skins.mobile.TabbedViewNavigatorTabBarFirstTabSkin;

    public class TabBarFirstTabSkin extends TabbedViewNavigatorTabBarFirstTabSkin
    {   
        private var __iconGroup : Group = null;

        public function TabBarFirstTabSkin() {
            super();
        }

        override protected function layoutContents(unscaledWidth : Number, unscaledHeight : Number) : void {
            super.layoutContents(unscaledWidth, unscaledHeight);    
            if(!__iconGroup) {
                __iconGroup = getIconDisplay() as Group;
            }
        }
    }
} 
```

与 / last / one 相同：

```
/* TabBarLastTabSkin Class */
package com.myapp.skins
{

    import spark.components.Group;
    import spark.skins.mobile.TabbedViewNavigatorTabBarLastTabSkin;

    public class TabBarLastTabSkin extends TabbedViewNavigatorTabBarLastTabSkin
    {

         private var __iconGroup : Group = null;

         public function TabBarLastTabSkin() {
              super();
         }

        override protected function layoutContents(unscaledWidth : Number, unscaledHeight : Number) : void {
            super.layoutContents(unscaledWidth, unscaledHeight);    
            if(!__iconGroup) {
                __iconGroup = getIconDisplay() as Group;                
            }
        }
    }
} 
```

最后，**__iconGroup**成员现在将引用包含您的图标的 Group 视觉组件！-> 并且您在 ViewNavigator 实例中通过 mxml / 或在 AS3 代码中定义。现在我们可以变脏了；）并做这样的事情，例如：

```
.
.
.

var colorTransform : ColorTransform = new ColorTransform();
colorTransform.color = 0xFF3300;
colorTransform.alphaMultiplier = 0.85;
__iconGroup.transform.colorTransform = colorTransform;

.
.
. 
```

这会将您的图标着色为红色并提供 alpha 0.85。等等...这确实是您可以在 Flex Mobile 中使用 spark #tabBar 蒙皮的基础知识。希望能帮助某人。干杯。

# java - Java MVC - 我在这里遗漏了什么吗？

> ID：13726226
> 
> 赞同：4
> 
> 时间：2012-12-05T15:09:42.363
> 
> 标签：java, swing, model-view-controller, mvvm

马上我需要为一篇冗长的帖子道歉，但这已经困扰了我很长一段时间了。我最近阅读了很多关于 MVC 的内容，以及它如何在 Java 的 Swing 世界中占有一席之地，但我仍然无法理解为什么它在任何比教程提供的简单玩具示例稍微复杂一点的应用程序中都非常有用。但是让我从头开始...

我在 C#/.Net 4.0 中完成了我所有的 GUI 编程，这并不广泛，但足够广泛，可以很好地理解[MVVM——](http://en.wikipedia.org/wiki/Model_View_ViewModel)这是 MVC 的新版本。这是一个非常简单的概念：您使用 XAML（类似 XML 的组件描述）定义您的 GUI，指定例如表与其模型之间的绑定，文本字段的字符串值。这些绑定对应于您完全单独定义的对象属性。这样，您就可以在视图和世界其他地方之间完全脱钩。最重要的是，模型中的所有更改都“几乎”自动返回到相应的控件，事件驱动设计更加集中等等。

现在，回到 Java，我们需要使用老式的 MVC。让我从一个非常简单的例子开始：我想要一个有两个组合框和一个按钮的面板。在第一个组合中选择值将驱动第二个组合框的值，在第二个组合框中选择一个值将根据两个组合框中的值调用外部服务，并且按钮将使用外部服务重置第一个组合中的值也是。如果我要使用“我的”方法来做到这一点，我将按照以下方式进行：

```
public class TestGUI {
    private JComboBox<String> firstCombo;
    private JComboBox<String> secondCombo;
    private JButton button;

    private ExternalReloadService reloadService;
    private ExternalProcessingService processingService;

    public TestGUI(ExternalReloadService reloadService, ExternalProcessingService processingService) {
        initialise();
        this.reloadService = reloadService;
        this.processingService = processingService;
    }

    private void initialise() {
        firstCombo = new JComboBox<>();
        secondCombo = new JComboBox<>();
        button = new JButton("Refresh");

        firstCombo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String value = (String) ((JComboBox) e.getSource()).getSelectedItem();
                reloadSecondCombo(value);
            }
        });

        secondCombo.addPropertyChangeListener(new PropertyChangeListener() {
            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                if (evt.getPropertyName().equals("model")) {
                    ComboBoxModel model = (ComboBoxModel) evt.getNewValue();
                    if (model.getSize() == 0) {
                        String value = (String) model.getSelectedItem();
                        processValues((String) firstCombo.getSelectedItem(), value);
                    }
                }
            }
        });

        secondCombo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                processValues((String) firstCombo.getSelectedItem(), (String) secondCombo.getSelectedItem());
            }
        });

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                resetValues()
            }

        });
    }

    private void processValues(String selectedItem, String value) {
        processingService.process(selectedItem, value);
        //possibly do sth with result and update ui
    }

    private void reloadSecondCombo(String value) {
        secondCombo.setModel(new CustomModel(reloadService.reload(value)));
    }

    private void resetValues() {
        //Call other external service to pull default data, possibly from DB
    }
} 
```

很明显，这不是一段简单的代码，虽然很短。现在，如果我们要使用 MVC 来做，我的第一步是使用某种控制器，它会完成所有工作，例如

```
public class TestGUI {
    private JComboBox<String> firstCombo;
    private JComboBox<String> secondCombo;
    private JButton button;

    private Constroller controller;

    public TestGUI(Controller controller) {
        this.controller = controller;
        initialise();
    }

    private void initialise() {
        firstCombo = new JComboBox<>();
        secondCombo = new JComboBox<>();
        button = new JButton("Refresh");

        firstCombo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String value = (String) ((JComboBox) e.getSource()).getSelectedItem();
               Data d = controller.getReloadedData(value);
               //assiign to combobox
            }
        }); 
```

**问题 1：**视图不应该知道任何关于控制器的信息，而是应该响应模型的更新。

为了克服上述问题，我们可以作为模型。模型只会有两个列表，每个组合框一个。所以我们有一个模型**（完全无用）**、一个视图和控制器......

**问题 2**我们应该如何接线？至少有两种独立的技术：直接与观察者模式

**问题 3**直接连线 - 这不只是将初始设置中的所有内容重写为三个单独的类吗？在这种方法中，View 注册了一个模型，而 Controller 拥有视图和模型。它看起来像：

```
public class TestGUI {
    private JComboBox<String> firstCombo;
    private JComboBox<String> secondCombo;
    private JButton button;

    private Model model;

    public TestGUI(Model m) {
        model = m;
    }

   public void updateSecondValues(){
       model.getSecondValues();
       //do sth
   }
}

public class Controller {

    private TestGUI view;
    private Model model;

    public reloadSecondValues(){
        firstValues = ...//reload using external service
        model.setSecondValues(firstValues);
        view.updateSecondValues();
    }

}

public class Model {

    private Set<String> firstValues;
    private Set<String> secondValues;

    public Set<String> getFirstValues() {
        return firstValues;
    }

    public void setFirstValues(Set<String> firstValues) {
        this.firstValues = firstValues;
    }

    public Set<String> getSecondValues() {
        return secondValues;
    }

    public void setSecondValues(Set<String> secondValues) {
        this.secondValues = secondValues;
    }
} 
```

这比它需要的要复杂得多，恕我直言，让模型和控制器一直相互调用：视图->（做某事）控制器->（更新自己）视图

**问题 4**观察者模式——在我看来这甚至更糟，尽管它允许我们解耦视图和模型。View 将被注册为模型上的**监听**器，它将通知视图任何更改。所以现在，我们需要一个类似的方法：

```
public void addListener(ViewListener listener); 
```

我们需要一个 ViewListener。现在，我们可能有一种方法和一些事件参数，但我们不能用一种方法来满足所有场景。例如，View 怎么知道我们只是在更新第二个组合框而不是重置所有值，或者没有禁用某些东西，或者没有从表中删除一个项目？因此，我们需要为每个更新使用单独的方法，（几乎将我们在 gui 上的方法复制并粘贴到侦听器中）使侦听器变得巨大。

**主要问题**

由于我在这里提出了一些问题，所以我想稍微总结一下。

**主要问题 1 将 loginc**拆分为多个对象：如果您想象您有多个面板，带有许多控件，那么您将拥有一个视图、模型和所有视图，通过允许做 UI 类的工作。

**主要问题 2**无论您使用哪种接线技术，最终都会在所有对象上添加方法以允许通信，如果您只是将所有内容都放在 UI 中，这将是多余的。

由于“将所有内容都放在 UI 中”**不是**解决方案，因此我正试图获得您的帮助和对此的评论。非常感谢您的想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:24:12.407

我个人使用了观察者模式。我认为您夸大了方法的复杂性。

您的模型**应该**是“无用的”，因为它只包含数据并向感兴趣的听众触发事件。这就是全部优势。您可以将任何业务逻辑和需求封装在一个类中，并完全独立于任何特定视图对其进行单元测试。根据您希望如何显示数据，您甚至可以使用不同的视图重用相同的模型。

控制器负责改变模型。视图从模型接收事件，但要根据用户输入进行更改，它会通过控制器。这里的优势再次是解耦和可测试性。控制器完全独立于任何 GUI 组件；它不知道特定的视图。

你的视图代表了一个特定的数据接口，并提供了对它的某些操作。构建视图需要模型和控制器是非常合适的。View 将在 Model 上注册其侦听器。在这些侦听器内部，它将更新自己的表示。如果您有一个不错的 UI 测试框架，您可以模拟这些事件并断言视图已成功更新，而无需使用真实模型，这可能需要一些外部服务，如数据库或 Web 服务。当 View 中的 UI 组件接收到自己的事件时，它们可以调用 Controller —— 同样，使用良好的测试框架，您可以断言模拟的 Controller 接收这些事件，而无需实际调用任何实际操作，例如网络调用。

As for your objections -- number of classes is a red herring. That's a much lower priority metric than *decoupling*. If you really wanted to optomize number of classes, put all your logic in a class named `Main`. Adding methods for communication -- again, you're decoupling things. That's one of the advantages to OOP.

# php - Zend 调试器与 Zend Server 5.6.0 和 PhpStorm 5.0

> ID：13726227
> 
> 赞同：2
> 
> 时间：2012-12-05T15:09:53.740
> 
> 标签：php, phpstorm, zend-server, zend-debugger, zend-server-ce

我正在运行 Zend Server 5.6.0，它是 PHP 5.4，我正在使用 PhpStorm 5.0。我希望进行一些分析和调试。

我已经配置了在 PhpStorm 中可以看到的所有内容，当我从 IDE 运行调试时，它会运行脚本，然后显示`Connection with 'Zend Debugger' was not established. Validate Installation`.

我已经安装了工具栏，但是每当我尝试在 Firefox 中调试页面时，它实际上会弹出一个下载窗口并下载文件，当打开它时会显示服务器错误。

网上所有的帮助指南似乎都不起作用，还有其他人有这些问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:14:26.123

我最终使用了 Xdebug：

# 安装 Xdebug：

1.  转到[网页](http://www.xdebug.org/wizard.php)。
2.  将您的内容粘贴`phpinfo()`到框中
3.  按照向导页面上的说明进行操作，除了告诉您添加`zend_extension = C:\Zend\ZendServer\lib\phpext\php_xdebug-2.2.1-5.4-vc9-nts.dll`到顶部的位置！，将其放在`iOnCube`加载程序下方（如果已安装）
4.  添加以下内容以`php.ini`重新启动 PHP 和 Apache。

php.ini

```
[XDebug] 
xdebug.remote_enable=1 
xdebug.remote_port=9000 
xdebug.profiler_enable=0 
xdebug.profiler_output_dir="C:\Zend\ZendServer\tmp\xdebug-profiler" 
```

# PhpStorm 中的 Xdebug

1.  [在此处](http://www.jetbrains.com/phpstorm/marklets/)生成小书签并将其添加到您的浏览器（注意 IDE 密钥##PHPSTORM##）
2.  打开文件 -> 设置 -> PHP
3.  选择您的口译员
4.  单击`[..]`并选择`Debugger`：`Xdebug`
5.  单击“配置”，然后单击“**编辑配置...** ”项（下拉到工具栏上的调试按钮旁边）
6.  按`[+]`添加配置并选择`PHP Remote Debug`
7.  调用它`Xdebug`并使用 IDE 密钥`PHPSTORM`
8.  您现在可以启动调试器( `Alt`++ `Shift`)`F9`
9.  使用小书签启动调试器

您现在可以通过 PhpStorm 中的代码停止，希望这对某人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T14:47:44.960

发生这种情况是因为 PHPStorm 正在使用 /usr/bin 下的 php 二进制文件，这与 Zend Server 在 /usr/local/zend/bin 下使用的二进制文件不同。在某些系统上，例如 Mac，PHP 已经默认安装在 /usr/bin 下，但它不会与 Zend Server/Debugger 交互。

要解决这个问题，您只需进入 PHPStorm 首选项并告诉它使用正确的解释器。单击 Interpreter 下拉列表旁边的 ... 按钮，并为其指定 zend 的 bin 目录 /usr/local/zend/bin 的路径

这解决了使用 Zend 调试器进行 PHPStorm 调试的问题。

# sql - SQL 查询连接表

> ID：13726230
> 
> 赞同：0
> 
> 时间：2012-12-05T15:10:11.117
> 
> 标签：sql, join

我有三张桌子：

**产品许可**

*   ID
*   产品编号
*   权限名称

**订阅许可**

*   ID
*   产品权限 ID
*   的确
*   订阅 ID

**订阅**

*   ID
*   产品编号
*   订阅名称

关键是给定一个指定的 SubscriptionId，我需要为每个 ProductPermission 显示。我的意思是，假设一个产品有 30 种权限类型，并且该产品的订阅分配了 20 个权限，我想要显示 30 个权限，授予的列可以是 0、1 或 NULL。

这是我需要的信息：

```
+----------------+---------------------+---------+
| 订阅号 | 产品权限 ID | 授予 |
+----------------+---------------------+---------+

```

请问你能帮帮我吗？

PS：如果你能改进标题，请做。我真的不知道怎么问这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:18:20.780

您需要一个包含所有组合的驱动程序表来连接您拥有的数据：

```
select allcombos.subscriptionId, allcombos.ProductPermissionId,
       sp.granted
from (select SubscriptionId, ProductPermissionId
      from subscription s cross join ProductPermission pp
     ) allcombos left outer join
     SubscriptoinPermission sp
     on sp.subscriptionId = allcombos.subscriptionId and
        sp.ProductionPermissionId = allcombos.ProductPermissionId 
```

您可以添加一个`where`子句来指定订阅 ID，但您需要在其前面加上 allcombos：

```
where allcombos.SubscriptionId = <whatever> 
```

如果您只希望它用于订阅产品，则更改 allcombos 子查询：

```
select allcombos.subscriptionId, allcombos.ProductPermissionId,
       sp.granted
from (select distinct SubscriptionId, pp2.ProductPermission
      from subscriptionProduct sp join
           ProductPermission pp
           on sp.ProductPermissionId = pp.ProductPermissionId left outer join
           ProductionPermission pp2
           on pp.ProductId = pp2.ProductId
     ) allcombos left outer join
     SubscriptionPermission sp
     on sp.subscriptionId = allcombos.subscriptionId and
        sp.ProductionPermissionId = allcombos.ProductPermissionId 
```

这可能不是获得订阅中产品的所有权限的最干净的更改。如果您有一个 SubscriptionProduct 表，那就太好了。但是，这样的事情应该有效。

# javascript - 迭代咖啡脚本中的字符串而无需创建数组

> ID：13726237
> 
> 赞同：7
> 
> 时间：2012-12-05T15:10:30.803
> 
> 标签：javascript, coffeescript

我的代码中有几个地方需要遍历字符串并逐个字符地执行操作。我的 node.js 应用程序需要为每个请求执行数十次，而且字符串的长度通常会相当长。

我见过的将像下面这样的javascript转换为coffeescript的唯一方法是根据字符串的长度创建一个数组。我遇到的问题是它在硬件方面是一件额外的事情，占用额外的内存，而且似乎没有必要（我的节点应用程序处理 dgram - 每秒高达数千 - 所以所有这些额外的工作加起来）。

**JavaScript 方式：**

```
for(var i = 0; i < str.length; i++) { /* Do stuff with str here */ } 
```

**建议的 CoffeeScript 方式**

```
for i in [0..str.length]
  # Do stuff here 
```

同样，我认为当传统的 for 循环不必从硬件角度搞乱该步骤时，强制创建数组对象是愚蠢的。

我发现的唯一解决方法是使用 while 循环，例如：

```
i = 0
while i < str.length
  # Do stuff
  i++ 
```

虽然这样可行，但它甚至比直接使用简单 for 循环的 JavaScript 方式要冗长得多。

有没有办法在 CoffeeScript 中使用 for 循环，而不必生成多余的数组来执行基本迭代？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T15:20:12.763

如果不需要，它实际上不会创建数组。查看编译好的 JS。这个咖啡脚本：

```
str = "hello"
for i in [0..(str.length-1)]
  alert(i) 
```

生成以下 JavaScript：

```
var i, str, _i, _ref;

str = "hello";

for (i = _i = 0, _ref = str.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
  alert(i);
} 
```

实际上没有创建数组。

（将 1 减去 .length 以避免未定义）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T16:01:10.200

您还可以遍历字符串本身：

```
for ch, i in str
  # Do stuff here. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:17:24.933

在 JavaScript（因此，CoffeeScript）中，`strings`可以像访问一样访问`arrays`：

```
console.log("Hello world".length);       // returns "11"
console.log("Hello world"[6]);           // returns "o"
console.log("Hello world".indexOf("w")); // returns "6" 
```

我没有看到您在任何这些循环中初始化数组。

不过，如果这样可以解决问题，您应该能够在 CoffeeScript 文件中使用纯 JavaScript。

# javascript - 如何为构造对象添加索引？

> ID：13726241
> 
> 赞同：2
> 
> 时间：2012-12-05T15:10:46.110
> 
> 标签：javascript

On (document).ready 我想在某个父元素内动态生成元素。让我们称它们为“蜡烛”。

每个“蜡烛”需要不同的背景图像和颜色属性，具体取决于它们的 index()。

创建页面后，需要通过界面更改这些属性。因此，将“蜡烛”的属性彼此独立保存很重要。

这就是为什么我认为为每个“蜡烛”生成一个对象以保存它们各自的属性并使它们可编辑可能很有用。

```
 var candleAmount = 3;
for (var i=1; i <= candleAmount; i++) {
    $("#container #candles").append("<li><img src=''></img></li>");
    var Candle+i = [ "background":"+i+", "color":" - random - (ignore)" ]
    }; 
```

（请不要介意代码中除了“Candle+i”之外的任何故障，我会弄清楚的。）

**编辑：**好的，到目前为止谢谢。我可能不够清楚。这是一个更简化的示例：

```
$("ul#candles li").each( function(i) {
  candle+i = i+" Anything";
  });

alert(candle4); 
```

我很想根据子对象的数量创建大量变量。什么是正确的语法，或者没有？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:12:56.807

只需将它们放在一个数组中并通过索引访问它们。结果对您来说很可能是相同的，并且比让它们在您的范围内浮动要好得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:23:59.360

> 那么有什么方法可以生成带有索引的对象名称吗？

是的，在 JavaScript 中，全局变量被定义为全局对象的属性。（在函数内部，变量被定义为 Activation 对象的属性。）您可以通过`window`（对于浏览器应用程序）或仅通过引用全局对象`this`。

而且因为所有对象都是关联的，所以您可以只为属性指定您想要的名称。所以，设置一个全局变量就等于给全局对象设置一个属性。

```
var foo = "bar"; === this["foo"] = "bar"; 
```

现在，在名称中添加动态部分只是一小步：

```
for(var i=0;i<10;i++) {
 this['candle' + i] = i;  
}

alert(candle7); 
```

**对于您的特定代码：**

```
$("ul#candles li").each( function(i) {
  window["candle" + i] = i+" Anything";
  });

alert(candle4); 
```

# c# - 如何判断路径是否是显式的（即与隐式驱动器或目录无关）？

> ID：13726242
> 
> 赞同：1
> 
> 时间：2012-12-05T15:10:46.853
> 
> 标签：c#, .net

我想检查给定路径是否是明确指定特定位置的显式路径。所以，我想排除如下路径：

```
file
directory
directory\file
C:file
\directory\file 
```

我想允许：

```
C:\file
C:\directory
C:\directory\file
\\server\share\file
\\server\share\directory\file 
```

该`Path.IsRooted`方法几乎可以满足我的需要，但是对于上面的最后两个示例（`C:file`和`\directory\file`），它返回 true，它们分别表示当前目录和当前驱动器。

我可以使用另一种方法吗？请注意，我不在乎文件/目录是否实际存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:16:21.360

使用`Path.GetFullPath()`并将结果与​​原始字符串进行比较：

```
bool IsPathAbsolute(string path)
{
    return Path.GetFullPath(path) == path;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:27:19.030

深入研究源代码可以发现实际实现`Path.IsPathRooted`是这样的：

```
public static bool IsPathRooted(string path)
{
    if (path != null)
    {
        Path.CheckInvalidPathChars(path);
        int length = path.Length;
        if ((length >= 1 && (path[0] == Path.DirectorySeparatorChar || path[0] == Path.AltDirectorySeparatorChar))
            || (length >= 2 && path[1] == Path.VolumeSeparatorChar))
        {
            return true;
        }
    }
    return false;
} 
```

Now it becomes evident how to adjust it to suit your needs - you can define a new method and slightly change the conditions (and maybe refactor them a little - they do not look very good):

```
if ((length >= 1 && ((path[0] == Path.DirectorySeparatorChar && path[1] == Path.DirectorySeparatorChar) || path[0] == Path.AltDirectorySeparatorChar))
    || (length >= 3 && path[1] == Path.VolumeSeparatorChar && path[2] == Path.DirectorySeparatorChar)) 
```

# eventbrite - Eventbrite API search_event 方法从昨天开始没有返回数据

> ID：13726244
> 
> 赞同：3
> 
> 时间：2012-12-05T15:10:51.227
> 
> 标签：eventbrite

我只是想知道 Eventbrite API search_event 方法有什么变化吗？

因为它没有返回从昨天开始的任何数据。

之前没有问题。这是示例 url 回调

[https://www.eventbrite.com/json/event_search?app_key=#####&within=1&latitude=45.5&longitude=-73.58&max=100](https://www.eventbrite.com/json/event_search?app_key=#####&within=1&latitude=45.5&longitude=-73.58&max=100)

请帮忙！

谢谢你，祝你有美好的一天

# logging - 使用绝对路径配置 SLING Logger

> ID：13726245
> 
> 赞同：1
> 
> 时间：2012-12-05T15:10:52.410
> 
> 标签：logging, sling

我想用绝对路径配置吊索记录器。目前我有以下配置（截图）。

![在此处输入图像描述](../Images/95c9d308e763956031eb083ff53f78d9.png)

有没有像 ${rootdir} 之类的变量或其他变量？

谢谢，帕特里克

PS：日志文件应该写到 Z:\home\daycq\logs\launchpad\pacerror.log

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:37:39.697

Windows 使用驱动器号设置绝对路径（不仅是正斜杠）。所以 Z:\home\daycq\logs 解决了这个问题。

# java - 从 webapp 执行外部 Java 程序

> ID：13726253
> 
> 赞同：0
> 
> 时间：2012-12-05T15:11:08.707
> 
> 标签：java, tomcat, exec, external, processbuilder

我正在尝试从在 Tomcat 6、Windows 7、64bit 上运行的 servlet 调用外部 Java 类文件。已经有一些关于这个主题的主题，但没有一个真正帮助我。

仅供参考，如果我直接从 shell 运行它，我已经成功地做到了这一点。

我使用 a`ProcessBuilder`来执行这样的命令

```
 ProcessBuilder bp = new ProcessBuilder("cmd.exe","/C","java", "TheExternalClass", "ParameterA" }); 
```

我还在使用创建的 Process 中的 errorStream 和 inputStream。

当我从 servlet 运行它时，它只会停止。

例如，如果我将 java 命令切换到 dir 它确实按预期工作，这让我相信它与内存有关，或者从 Tomcat 启动新的 Java 进程或类似的问题。

任何人都有关于如何解决这个问题的指针或好主意？

关于该主题的其他一些帖子：

[http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=1](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=1)

[从tomcat服务器中的webapp调用java程序-java程序在tomcat服务器之外](https://stackoverflow.com/questions/12181432/call-a-java-program-from-a-webapp-in-tomcat-server-the-java-program-is-out-sid)

[Tomcat 无法执行外部 java 程序](https://stackoverflow.com/questions/11270291/tomcat-fails-to-execute-external-java-program)

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:16:59.603

上面的代码有效，它不会停止你的 servlet。我的猜测是您`p.waitFor()`稍后调用或类似方法，或者您在 JSP 线程中读取进程的输出流 -*这*将阻塞。

如果您不想阻止，您有两种选择：

*   使用 AJAX 在后台轮询 JSP。JSP 仍将阻塞，但浏览器将可用。
*   创建一个读取输出流的后台线程。这将使 JSP 立即返回，但您必须找到一种方法将处理结果发送到浏览器，因为它不知道服务器上发生了什么。

# postgresql - Postgres - 创建表但名称是当前月份

> ID：13726255
> 
> 赞同：0
> 
> 时间：2012-12-05T15:11:12.847
> 
> 标签：postgresql

我希望能够创建一个包含当前月份的新表。

基本上，我将创建一个 python 脚本，每个月都会自动加载大量犯罪数据，这个 python 脚本将创建一个名为 crime_data 的新表（这很简单）。然后，我想运行第二个脚本，该脚本将创建一个新表，其名称带有系统日期月份的日期戳，并过滤掉原始犯罪数据的元素。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:31:09.980

有可能的。尝试像这样创建 PL/pgSQL 函数：

```
BEGIN

EXECUTE 'CREATE TABLE crime_data_'||to_char(CURRENT_DATE, 'Month')||' AS
SELECT *
FROM crime_data cd
WHERE date_part(''month'', cd.date) = date_part(''month'', CURRENT_DATE)';

END; 
```

您需要根据需要对其进行调整，但想法是将查询形成为字符串和`EXECUTE`它。

详情在这里：[`CREATE TABLE AS`](http://www.postgresql.org/docs/current/static/sql-createtableas.html) [`to_char()`](http://www.postgresql.org/docs/current/static/functions-formatting.html) [`date_part`](http://www.postgresql.org/docs/current/static/functions-datetime.html)

`VIEW`UPD使用您需要的数据而不是表创建一个可能会更好：

```
EXECUTE 'CREATE VIEW crime_data_'||to_char(CURRENT_DATE, 'Month')||' AS
SELECT *
FROM crime_data cd
WHERE date_part(''month'', cd.date) = date_part(''month'', CURRENT_DATE)'; 
```

您将能够`SELECT`从这个`VIEW`表格中获得，并且您不需要保留重复的数据。详情在这里：[`CREATE VIEW`](http://www.postgresql.org/docs/current/static/sql-createview.html)。

UPD2 测试这个东西：

1）做：

```
SELECT 'CREATE TABLE crime_data_'||to_char(CURRENT_DATE, 'Month')||' AS
        SELECT *
        FROM crime_data cd
        WHERE date_part(''month'', cd.date) = date_part(''month'', CURRENT_DATE)' 
```

2）获取结果`SELECT`并将其作为常规语句运行。

PL/pgSQL`EXECUTE`语句正是做这两件事。1 - 形成字符串。2 - 将其作为语句执行。

# mysql - MySQL - 从一列中创建一条记录

> ID：13726256
> 
> 赞同：0
> 
> 时间：2012-12-05T15:11:13.363
> 
> 标签：mysql, sql, pivot

我想不通这个。

我有这张桌子：

```
id    component_id     data
1     1                tests@dsaasd.com
1     2                firstname1
1     3                lastname1
1     4                phone1
2     1                email2
2     2                firstname2
2     3                lastname2
2     4                phone2 
```

现在我想要一个查询，它将根据 id 提取所有数据。我想要这些记录：

```
1  tests@dsaasd.com  firstname1  lastname1  phone1
2  email2  firstname2  lastname2  phone2 
```

我希望我被理解......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:34:14.990

您所要求的基本上是 a`PIVOT`但 MySQL 没有数据透视函数，因此您可以使用`CASE`带有聚合函数的语句来复制它。

如果您知道这些值，那么您可以对类似于以下的解决方案进行硬编码：

```
select id,
  max(case when component_id = 1 then data end) Email,
  max(case when component_id = 2 then data end) Firstname,
  max(case when component_id = 3 then data end) Lastname,
  max(case when component_id = 4 then data end) Phone
from yourtable
group by id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b3ec9/1)

结果是：

```
| ID |            EMAIL |  FIRSTNAME |  LASTNAME |  PHONE |
-----------------------------------------------------------
|  1 | tests@dsaasd.com | firstname1 | lastname1 | phone1 |
|  2 |           email2 | firstname2 | lastname2 | phone2 | 
```

我猜你有一个表将 component_id 与名称相关联，所以你的查询也可能是：

```
select t1.id,
  max(case when t2.name = 'email' then data end) Email,
  max(case when t2.name= 'FirstName' then data end) Firstname,
  max(case when t2.name= 'LastName' then data end) Lastname,
  max(case when t2.name= 'phone' then data end) Phone
from yourtable t1
inner join component t2
  on t1.component_id = t2.id 
group by t1.id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d02fd/4)

如果您有未知数量的值，则可以使用准备好的语句动态生成此查询：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when name = ''',
      name,
      ''' then data end) AS ',
      name
    )
  ) INTO @sql
FROM component;

SET @sql = CONCAT('SELECT t1.id, ', @sql, ' 
                  from yourtable t1
                  inner join component t2
                    on t1.component_id = t2.id 
                  group by t1.id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d02fd/7)

所有版本都会给你相同的结果。

# junit4 - 如何防止测试在 SuiteTest 之外运行

> ID：13726261
> 
> 赞同：0
> 
> 时间：2012-12-05T15:11:35.223
> 
> 标签：junit4, spring-test

我有一组测试必须仅从 TestSuite 运行，而不能直接运行，因为它们需要在套件设置级别实例化的资源

所以我的测试套件是

```
@RunWith(Suite.class)
@Suite.SuiteClasses({IT_LiquidBaseTest.class})
@ContextConfiguration(locations = {"classpath:spring-config-test.xml"})
public class DBTestSuite {
    private static MysqldResource mysqldResource;
    .... 
```

我的测试是这样的

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:spring-config-test.xml"})
public class IT_LiquidBaseTest {
    @Autowired
    private DataSource dataSource; 
```

因此，当我启动套件时一切都很好，但是当我调用 maven 时，它尝试直接运行 IT_LiquidBaseTest 并失败。我仍然需要依赖注入来获取数据源

您是否知道如何防止 maven surefire 插件进行此操作但启用测试套件的运行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:14:02.503

您可以`org.junit.Assume`用来测试套件的状况。

```
@Before
public void beforeMethod() {
     org.junit.Assume.assumeTrue(DBTestSuite.someCondition());
     // rest of setup.
} 
```

如果假设失败，则不运行测试。

请参阅问题的最高投票答案：[有条件地忽略 JUnit 4 中的测试](https://stackoverflow.com/questions/1689242/conditionally-ignoring-tests-in-junit-4)

# objective-c - 使用音频单元（混音器主机）从 iPod 库而不是预先选择的声音文件中播放。

> ID：13726267
> 
> 赞同：3
> 
> 时间：2012-12-05T15:11:48.470
> 
> 标签：objective-c, ios, ipod, mixing

对于一个大学项目，我正在开发一个 DJ 混音应用程序。我基本上是从“通过谷歌搜索所有内容并分析现有源代码从头开始自学”类型的方式来解决这个项目，所以很容易。

我查看了来自苹果的 Mixer Host 示例项目：http: [//developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210)

我不知道如何用从媒体选择器中选择的 iPod 库中的歌曲 URL 替换预先选择的音频文件（吉他 + 节拍），或者，在这种情况下 - 2 个媒体选择器。

是抓取所选 iPod 库歌曲的 URL 并代替预选音频文件的 URL 的情况吗？

如果有人能指出我正确的方向，告诉我我是如何完全以错误的方式进行的，或者甚至为我进行编码（笑话），我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:43:02.470

您实际上不能简单地从 ipod 库中流式传输；您需要将文件复制到应用程序的文档目录中。

试试这个：[http ://www.subfurther.com/blog/2010/12/13/from-ipod-library-to-pcm-samples-in-far-fewer-steps-than-were-previously-necessary/](http://www.subfurther.com/blog/2010/12/13/from-ipod-library-to-pcm-samples-in-far-fewer-steps-than-were-previously-necessary/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T05:53:15.833

您可以使用第三方库来使用 AudioUnit 播放 iPod 库中的歌曲。以下链接对您有用

点击[这里](http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html)！

# facebook - 私下给多个朋友发消息

> ID：13726270
> 
> 赞同：0
> 
> 时间：2012-12-05T15:11:53.717
> 
> 标签：facebook, messaging

由于 facebook 关闭了多个到：在发送弹出窗口（js sdk）中，我正在寻找替代方法（完全合法，FB 批准）一次向多个朋友发送消息。

有没有人有什么建议？

到目前为止，我发现的只是 XMPP。

# android - 搜索按钮不起作用 Flash builder 移动

> ID：13726273
> 
> 赞同：1
> 
> 时间：2012-12-05T15:12:00.577
> 
> 标签：android, actionscript-3, flash, search, flash-builder

我正在尝试使用 Flash builder 4.6 为手机（android）开发字典程序

问题是搜索按钮不起作用我尝试了不同的代码但没有任何成功，对闪存编程也很陌生

请注意，这个 xml 文件更长，但我不得不减少它以使其更好地阅读

这是我的 xml 文件：

* * *

```
<list>
    <Dictionary>
              <id>1</id>
              <term>ok</term>
              <defin>Advanced Audio Coding</defin>
</Dictionary>
<Dictionary>
<id>6</id>
<term>absolute address</term>
<defin>a fixed location in the computer's memory.</defin>
</Dictionary>
<Dictionary>
<id>7</id>
<term>absolute URL</term>
<defin>a URL that contains </defin>
</Dictionary> 
```

主页查看代码：

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark" title="Home"
                    creationComplete="srv.send()">

          <fx:Declarations>

                    <s:HTTPService id="srv" url="assets/Dictionary.xml"
                    result="data=srv.lastResult.list.Dictionary"/>                                         
          </fx:Declarations>
          <s:titleContent>
                    <s:TextInput id="key" width="100%"/>
          </s:titleContent>

          <s:actionContent>
                    <s:Button icon="@Embed('assets/search.png')" click="srv.send()"/>
          </s:actionContent>
          <s:List id="list" top="0" bottom="0" left="0" right="0"
                              dataProvider="{srv.lastResult.list.Dictionary}"
                              labelField="term"
                              change="navigator.pushView(Details, list.selectedItem)">
          </s:List>
</s:View> 
```

* * *

详细视图 ：

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
                    xmlns:s="library://ns.adobe.com/flex/spark"
                    title=" {data.term}">
          <fx:Declarations>
                    <!-- Place non-visual elements (e.g., services, value objects) here         -->
          </fx:Declarations>
          <s:actionContent>
                    <s:Button label="BACK" click="navigator.popToFirstView()"/>
          </s:actionContent>
          <s:TextAreatext="{data.defin}"  />
</s:View> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:36:33.910

首先，您正在等待两次结果（列表中的数据绑定，加上结果事件）。删除结果事件。并且不要忘记使用标签关闭您的 XML 文件。

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:HTTPService id="srv" url="myData.xml"/>
</fx:Declarations>
<s:titleContent>
    <s:TextInput id="key" width="100%"/>
</s:titleContent>

<s:actionContent>
    <s:Button  label="search" click="srv.send()"/>
</s:actionContent>
<s:List id="list" top="0" bottom="0" left="0" right="0"
        dataProvider="{srv.lastResult.list.Dictionary}"
        labelField="term"
        change="navigator.pushView(Details, list.selectedItem)">
</s:List>

</s:View> 
```

还有一个有效的详细信息视图：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="Details">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:actionContent>
    <s:Button label="BACK" click="navigator.popToFirstView()"/>
</s:actionContent>
<s:TextArea text="{data.defin}"/>
</s:View> 
```

# php - 在 WordPress 中为自定义帖子添加第二个标题？

> ID：13726274
> 
> 赞同：3
> 
> 时间：2012-12-05T15:12:09.757
> 
> 标签：php, wordpress

目前我只是在学习自定义帖子类型，所以我不确定如何从这里开始。

我为事件创建了一个自定义帖子，它与普通帖子几乎相同，只是措辞略有不同。但我之所以制作一个，是因为我想在初始标题之后添加第二个标题。

为了让用户尽可能容易地做到这一点，我希望这个文本字段位于主编辑器上方的第一个下方。只是想知道如何在这里添加它？

```
register_post_type('events',
    array(  
        'label' => 'Events',
        'description' => 'Events section',
        'public' => true,'show_ui' => true,
        'show_in_menu' => true,
        'capability_type' => 'post',
        'hierarchical' => false,
        'rewrite' => array('slug' => ''),
        'query_var' => true,
        'exclude_from_search' => false,
        'supports' => array('title','editor','thumbnail','author','page-attributes',),
        'taxonomies' => array('category',),
        'labels' => array (
            'name' => 'Events',
            'singular_name' => 'Event',
            'menu_name' => 'Events',
            'add_new' => 'Add Event',
            'add_new_item' => 'Add New Event',
            'edit' => 'Edit',
            'edit_item' => 'Edit Event',
            'new_item' => 'New Event',
            'view' => 'View Event',
            'view_item' => 'View Event',
            'search_items' => 'Search Events',
            'not_found' => 'No Events Found',
            'not_found_in_trash' => 'No Events Found in Trash',
            'parent' => 'Parent Event',
        ),
    ) 
); 
```

**`'title'`**似乎是标准的，所以我想知道是否可以创建另一个实例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T00:33:19.377

*更新：有[一种简单的方法可以使用一些钩子](https://stackoverflow.com/questions/22950010/how-to-go-about-modifying-the-wordpress-pages-add-new-screen/23036236#23036236)并`save_post`像常规元框一样管理它。*

* * *

不，只能有一个标题。

您必须创建一个[自定义字段](http://codex.wordpress.org/Custom_Fields)来记录*Second Title*的值。

而且，问题是它不能放在标题和内容框之间。

我建议插件[Advanced Custom Fields](http://wordpress.org/extend/plugins/advanced-custom-fields/)。它已被积极开发，对于生成各种 CF 非常方便。

* * *

我就是这样做的，点击图片放大：

## 配置一个高级自定义字段

> [![acf 配置](../Images/e5b4607f293e6af6d4fd6b7252dd2068.png)](https://i.stack.imgur.com/DNg2v.png)

* * *

## 结果自定义帖子类型屏幕

> [![在此处输入图像描述](../Images/f474bacd025ea645d7e258b7d4c8b30e.png)](https://i.stack.imgur.com/xDgPh.png)

* * *

## 使用 jQuery 帮助移动字段

```
add_action( 'admin_head', 'so_13726274_move_field' );

function so_13726274_move_field()
{
    ?>
    <script type="text/javascript">
        jQuery(document).ready(function($)
        {     
            $('#acf-text').prependTo('#postdivrich');
            $('#acf-field_50baa73272855').css('width','100%');
        });
    </script>
    <?php
} 
```

### 结果是

> [![在此处输入图像描述](../Images/3b79f8358146fe3cf00c6c212d445aac.png)](https://i.stack.imgur.com/hNctI.png)

### jQuery 笔记

*   `$('#acf-text')`是*容器 div*，对应“#acf-FIELD_NAME”
*   `$('#acf-field_50baa73272855')`是*文本字段*本身，我们需要这个命令，因为当我们移动*容器 div时宽度会变短*
*   必须在您自己的安装中检测到文本字段#ID，因为它不会相同，请使用 Chrome Inspector 或 FireBug

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:39:30.307

您可以通过更改自定义帖子类型的编辑器布局来做到这一点。该网站将向您展示如何做到这一点。您可以在编辑器中为副标题行创建一个框。

[http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-content-editor/](http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-content-editor/)

# sql - 将 SQL 列空值转换为 0

> ID：13726276
> 
> 赞同：4
> 
> 时间：2012-12-05T15:12:13.807
> 
> 标签：sql, sql-server, database

我是 SQL Server 的新手，我有一个问题。

我有这种观点，其中允许公式中的某些列为空。

我如何将这些空值转换为 0，因为如果它们为空，则公式的结果也将为空。

谢谢！

```
CREATE VIEW vwAchizitii
AS
    SELECT
            ac_id
           ,[Company]
           ,No
           ,[ContractID]
           ,[Seller]
           ,[AcquistionDate]
           ,[Village]
           ,[Commune]
           ,[Area]
           ,[PlotArea]
           ,[FieldNo]
           ,[Topo1]
           ,[Topo2]
           ,[Topo3]
           ,[Topo4]
           ,[Topo5]
           ,[TotalAreaSqm]
           ,[OwnershipTitle]
           ,[CadastralNO]
           ,[Type]
           ,[Price]
           ,[NotaryCosts]
           ,[LandTax]
           ,[OtherTaxes]
           ,[AgentFee]
           ,[CadastralFee]
           ,[TabulationFee]
           ,[CertSarcini]
           ,[ProcuraNO]
           ,(price+notarycosts+landtax+othertaxes+agentfee+cadastralfee+tabulationfee+certsarcini) as TotalCosts
           ,(price+notarycosts+landtax+othertaxes+agentfee+cadastralfee+tabulationfee+certsarcini)/(TotalAreaSqm/10000) as RonPerHa
           ,(price+notarycosts+landtax+othertaxes+agentfee+cadastralfee+tabulationfee+certsarcini)/(TotalAreaSqm/10000*FixHist) as EurPerHa
           ,[DeclImpunere]
           ,[FixHist]
           ,(price+notarycosts+landtax+othertaxes+agentfee+cadastralfee+tabulationfee+certsarcini)/FixHist as EurHist
           ,[LandStatus]
FROM      
   nbAchizitii 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T15:27:39.440

好吧，有人应该为 ANSI 标准写一句话：

```
coalesce(<column>, 0) 
```

`isNULL`特定于数据库（甚至在某些数据库中做不同的事情）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T15:23:41.810

您可以使用[ISNULL (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

例如

```
(isnull(price,0)+isnull(notarycosts,0)) as Total 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T15:15:06.073

试试这个：

```
ISNULL([nullable field], 0) 
```

# sql - 在 PostgreSQL 中将一列数据从一个表复制到另一个表

> ID：13726278
> 
> 赞同：1
> 
> 时间：2012-12-05T15:12:18.647
> 
> 标签：sql, sql-update

我有以下设置：

表格1：

```
latdouble
3
4
5
1
6
2
6
9 
```

表2：

```
time    latdouble(type double)    latvarchar(type varchar)   
2:00                              3
3:00                              4
4:00                              5
5:00                              1
6:00                              6
7:00                              2
8:00                              6
9:00                              9 
```

基本上 Table1 中的 latdouble 顺序正确，我想将这些值原样复制到 Table2 中，结果应该是：

表2：

```
time    latdouble(type double)    latvarchar(type varchar)   
2:00    3                         3
3:00    4                         4
4:00    5                         5
5:00    1                         1
6:00    6                         6
7:00    2                         2
8:00    6                         6
9:00    9                         9 
```

据我所知，我需要使用类似于以下的命令：

```
update Table2 set latdouble = (select latdouble from Table1) 
```

但是我收到以下错误：

```
ERROR: more than one row returned by a subquery used as an expression 
```

我确定有一个简单的解决方法，但我无法弄清楚，

谢谢，詹姆斯

更新：让我解释一下这是怎么发生的。表 2 最初看起来像：

表2：

```
time    latvarchar(type varchar)   
2:00    3                         
3:00    4                         
4:00    5                         
5:00    1                         
6:00    6                         
7:00    2                         
8:00    6                         
9:00    9 
```

我将 latdouble(type double) 列添加到 Table2。

然后我创建了一个名为 Table1 的新表，其中包含一个名为 latdouble(type double) 的列。我使用以下命令从 Table2 转换 latvarchar 并将其复制到 Table1 中：

```
insert into Table1 (latdouble) select cast(latvarchar as double precision) from Table2 
```

现在我想将值从 Table1 latdouble 复制回 Table2 latdouble。我这样做的原因是将 latvarchar 中的值转换为 double 并将它们保存在 latdouble 中，而不必创建整个 Table2 的临时副本，因为它是一个带有几个索引的非常大的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:37:35.387

如果我理解正确，则根本不需要使用 Table1。您可以`latdouble`使用 UPDATE 简单地设置每一行的值：

```
UPDATE Table2 SET latdouble = cast(latvarchar as double precision); 
```

**更新**

要逐步做到这一点，我可以想到 2 个选项。

**选项 1.**（又快又脏）

```
UPDATE Table2 
SET latdouble = cast(latvarchar as double precision)
WHERE tKey IN (SELECT tKey FROM Table2 WHERE latdouble IS NULL LIMIT 10000); 
```

运行多次，直到不再更新任何行（这意味着没有`latdouble`字段为 NULL）

**选项 2.**（使用游标并逐步提交）

按照[本文](http://www.kennygorman.com/wordpress/?p=245)中的方法，你可以运行这个python脚本：

```
#!/home/postgres/python/bin/python
#
# incremental commits
# 2008 kcg

import psycopg2
import time

# vars
incremental_commit_size=10000   # number of rows
throttle_time=0         # seconds

connectstr="host=localhost dbname=postgres user=postgres port=5432"
handle=psycopg2.connect(connectstr)
cursor=handle.cursor()
cursor2=handle.cursor()
sql="select tKey from table2"
cursor.execute(sql)

while 1:

 output = cursor.fetchmany(incremental_commit_size)

 if not output:
  break
 for row in output:

   # update table
   sql="update table2 set latdouble = cast(latvarchar as double precision) where tKey = %s"
   cursor2.execute(sql,([row[0]]))

 #commit, invoked every incremental commit size
 handle.commit()
 time.sleep(throttle_time)

handle.commit() 
```

# ios - 如何为 iOS TCP/IP 通信测试打开端口 7？

> ID：13726279
> 
> 赞同：1
> 
> 时间：2012-12-05T15:12:23.750
> 
> 标签：ios, tcp-ip

我正在尝试编写一个使用 TCP/IP 与 iPhone 进行通信的应用程序。为了测试基本调用，我试图打开端口 7（据说它被设置为将任何输入回显到接收器），写入它并读取结果。

我的代码很流行。例如，我可以使用“www.xxx.com”作为主机名和端口 80 打开一个站点，写入一个 http 地址，然后返回一个响应。

问题是我在尝试访问端口 7 时收到错误“无法完成操作。连接被拒绝”错误，并且可能是 Apple 未出于特定目的打开的任何其他端口。我已经使用 AirPort Utility 应用程序打开了 AirPort WiFi 路由器上的端口 7，并尝试在我的 Mac 和 iPad 上使用它们各自的 iOS IP 地址打开和写入端口 7，但总是得到相同的错误。

需要做什么才能打开端口，以便我可以使用 TCP/IP 通过 iOS 与其他 iOS 设备或台式计算机进行通信？或者使用端口 7 作为测试根本不是要走的路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:20:27.290

Apple Developer 表单上的一些好心人回答了这个问题。总结一下：

在 iOS 上不支持使用回显服务的方式。事实证明，测试 TCP/IP 的唯一方法是创建与实际服务器的连接。开发 Mac 可用于使用例如 netcat。

# c# - Winform 和 WPF 窗体/窗口边框

> ID：13726281
> 
> 赞同：2
> 
> 时间：2012-12-05T15:12:30.553
> 
> 标签：c#, wpf, winforms, forms, border

我一直在处理这个问题，我不知道如何继续。

我有一个包含 Windows 窗体和 WPF 窗体的项目。

我希望每个表单都像这样显示（它是 WPF 表单）：

WPF = [http://imageshack.us/photo/my-images/545/wpfk.png/](http://imageshack.us/photo/my-images/545/wpfk.png/)

我实现了这个 windows style = none 和 canresize = yes。我实际上不希望它被调整大小。我只想要表格周围的细边框。但是如果我把 canresize = false 我失去了边界。我还希望能够在屏幕中移动窗口，而不是在那个地方保持静止。

我的winforms也需要所有这些。

Winforms：WINFORM = [http://imageshack.us/photo/my-images/836/winforms.png/](http://imageshack.us/photo/my-images/836/winforms.png/)

我希望你们明白我需要什么。从图形上看，它必须像第一个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:19:05.857

我不确定它是否有帮助，但您可以为此创建 Forms 集合。（一个）

[http://support.microsoft.com/kb/815707/en-us](http://support.microsoft.com/kb/815707/en-us)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:19:38.443

您只需将`FormBorderStyle`设计器中的 WinForms 属性设置为`Sizable`、`FixedDialog`等`Fixed3D`。其中之一必然会为您提供所需的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:07:44.180

解决方案：将此代码粘贴到您的表单或基本表单中。

```
private const int WS_SYSMENU = 0x80000;
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        cp.Style &= ~WS_SYSMENU;
        return cp;
    }
} 
```

感谢 Killercam 的帮助！

WPF窗口的解决方案：

```
public MainWindow()
    {
        SourceInitialized += Window_SourceInitialized;
        InitializeComponent();
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }

    private void button3_Click(object sender, RoutedEventArgs e)
    {
        this.WindowState = WindowState.Minimized;
    }

    private void Window_SourceInitialized(object sender, EventArgs e)
    {
        WindowInteropHelper wih = new WindowInteropHelper(this);
        int style = GetWindowLong(wih.Handle, GWL_STYLE);
        SetWindowLong(wih.Handle, GWL_STYLE, style & ~WS_SYSMENU);
    }

    private const int GWL_STYLE = -16;
    private const int WS_SYSMENU = 0x00080000;

    [DllImport("user32.dll")]
    private extern static int SetWindowLong(IntPtr hwnd, int index, int value);
    [DllImport("user32.dll")]
    private extern static int GetWindowLong(IntPtr hwnd, int index); 
```

# audio - AAC RTP 时间戳和同步

> ID：13726282
> 
> 赞同：0
> 
> 时间：2012-12-05T15:12:35.570
> 
> 标签：audio, synchronization, streaming, rtp, aac

我目前正在使用 RTP 流式传输音频（8kHz 的 AAC-HBR）和视频（H264）。两个提要单独工作都很好，但是当它们放在一起时，它们很快就会不同步（不到 15 秒）。

我不确定如何增加音频 RTP 标头上的时间戳，我认为它应该是两个 RTP 数据包之间的时间差（大约 127 毫秒）或 1/8000（0.125 毫秒）的恒定增量。但两者都不起作用，相反，我设法找到了一个甜蜜点。当我为每个数据包将时间戳增加 935 时，它会保持同步大约一分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:49:28.290

AAC 帧大小为 1024 个样本。尝试增加 (1/8000) * 1024 = 128 毫秒。如果您的数据包有多个 AAC 帧，则为该倍数。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:48:34.410

恕我直言，Android 中的视频和音频不同步如果取自不同的媒体记录器，则很难与之抗争。他们只是捕获不同的起始帧，并且没有办法（看起来）找出不同步的大小并在飞行中使用音频或视频时间戳对其进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-22T09:43:18.483

有点晚了，但想到提出我的答案。

音频 RTP 数据包的时间戳 == RTP 数据包中包含的音频样本数。

对于 AAC，每帧由 1024 个样本组成，因此 RTP 数据包上的时间戳应增加 1024。

2个RTP包的时钟时间差= (1/8000)*1024 = 128ms，即发送者发送的rtp包应该相差128ms。

来自其他采样率的更多信息：

现在以 44100hz 采样的 AAC 意味着 1 秒内有 44100 个信号样本。所以 1024 个样本意味着 (1000ms/44100)*1024 = 23.21995 ms 所以 2 个 RTP 数据包之间的时间戳 = 1024，但是 rtp 会话中 2 个 RTP 数据包之间的时钟时间差应该是 23.21995ms。

尝试与其他示例相关联：

例如对于 G711 系列（PCM、PCMU、PCMA），采样频率 = 8k。所以20ms的数据包应该有样本== 8000/50 == 160。因此RTP时间戳增加160。2个RTP数据包之间的时钟时间差应该是20ms。

# java - 使用 java 对 hex 文件执行字符串操作

> ID：13726283
> 
> 赞同：3
> 
> 时间：2012-12-05T15:12:35.620
> 
> 标签：java, io, hex

我有一个包含很多字节的十六进制文件，我需要根据特定字节拆分这些字节，例如

```
f0 1 5 0 0 0 0 0 0 b7 7a 7a e5 db 40 2 0 c0 0 0 9 18 16 0 e3 1 40 0 0 3f 20 f0 1 5 0 0 0 0 0 0 41 bc 7a e5 db 40 2 0 c0 1 0 9 18 16 0 e3 1 40 0 0 3f 20 f0 1 5 0 0 0 0 0 0 53 3f 7b e5 db 40 2 0 c0 3 0 9 2 19 24 3d 0 22 68 1 db 9 
```

当我看到“f0”时，我想拆分字节并存储它们，就像这些

```
f0 1 5 0 0 0 0 0 0 b7 7a 7a e5 db 40 2 0 c0 0 0 9 18 16 0 e3 1 40 0 0 3f 20
f0 1 5 0 0 0 0 0 0 41 bc 7a e5 db 40 2 0 c0 1 0 9 18 16 0 e3 1 40 0 0 3f 20
f0 1 5 0 0 0 0 0 0 53 3f 7b e5 db 40 2 0 c0 3 0 9 2 19 24 3d 0 22 68 1 db 9 
```

对于其中的每一个，我都希望将其视为一个字符数组来执行一些字符串操作。

我如何存储这些模式以及如何将其视为字符来执行操作。

这是我试图做的

```
 String filename = "C:\\tm09888.123";
    FileInputStream in = null;
    int readHexFile = 0; 
    char hexToChar = ' ';
    String[] bytes = new String[10];

    try
    {            
        in = new FileInputStream(filename); 

        while((readHexFile = in.read()) != -1)
        {       
            if (Integer.toHexString(readHexFile).equals("f0"))
            {
                System.out.print("\n\n\n");
            }
            System.out.print(Integer.toHexString(readHexFile) + " ");
        }
    }
    catch (IOException ex)
    {
        Logger.getLogger(NARSSTest.class.getName()).log(Level.SEVERE, null, ex);
    }  

} 
```

我成功拆分了模式，但是如何存储它并对它们中的每一个进行字符串操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:20:13.577

如果文件是二进制文件，您可以将其打印为一系列十六进制数字，您可以这样做

```
BufferedInputStream in = new BufferedInputStream(new FileInputStream());
try {
    boolean first = true;
    for(int b; (b = in.read()) >= 0;) {
        if (b == 0xF0 && !first)
            System.out.println();
        first = false;
        System.out.printf("%x ", b);
    }
} finally {
    in.close();
    System.out.println();
} 
```

如果文件是十六进制的文本，你可以做

```
String text = FileUtils.readFileAsString(file, "iso-8859-1");
text = text.replaceAll(" f0", "\nf0");
FileUtils.writeStringToFile(file2, text); 
```

或者把它分成几行你可以做

```
String text = FileUtils.readFileAsString(file, "iso-8859-1");
BufferedReader br = new BufferedReader(new StringReader(text.replaceAll(" f0", "\nf0")));
for(String line; (line = br.readLine()) != null;) {
   // process one line
} 
```

使用[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)或您自己的方法来做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:21:09.260

```
List<String> list = new ArrayList<>();
StringBuilder strb = new StringBuilder();
while((readHexFile = in.read()) != -1) {
    String str = Integer.toHexString(readHexFile);
    if (str.equals("f0")) {
         String string = strb.toString();
         if (!string.isEmpty()) {
              list.add(new String("f0" + string)); // here
         }
         strb = new StringBuilder();
    } else {
         strb.append(str);
    }
}
String string = strb.toString();
if (!string.isEmpty()) {
    list.add(new String("f0" + string)); // here
}
// now you have all the strings in the list. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:22:21.600

为什么不直接将十六进制文件转换成字符串并进行字符串操作呢？

使用 FileReader 并将文件作为一个大字符串读入内存（如果文件大小合理）。在底层 InputStringReader 中，您必须指定 US-ASCII，才能不使用默认 UTF-16。然后用ASCII中f0值对应的字符做string.split()，也就是冰岛语ð：

```
char f0 = 'ð';

BufferedReader reader = new BufferedReader(new FileReader(new InputStreamReader(new FileInputStream(file), "US-ASCII")));

//read reader into string, trivial...

String[] split = readString.split(f0);
for(String s : split){
    s = 'ð' + s;
    //do your work on the string here
} 
```

# events - Kendo UI Child Grid -> Destroy Confirmation Firing on Cancel

> ID：13726288
> 
> 赞同：1
> 
> 时间：2012-12-05T15:12:59.860
> 
> 标签：events, kendo-ui

我有一个有子/子网格的网格。它工作正常，我可以添加和删除。但是，当我尝试运行 command.destroy 时，如果我在确认时按取消，它会再次触发（所以我必须再次按取消）。如果我选择确认，它不会再次弹出并在第一次尝试时将其删除。

我不确定是什么原因造成的，我不认为这是我的 CSHTML，但只需要第二个意见。

```
@(Html.Kendo().Grid<ModelA>()
.Name("Grid")

.Columns(columns => 
{
    columns.Bound(o => o.ID).Width(50);
    columns.Bound(o => o.Name).Width(300);
    columns.Bound(o => o.UpdateUser).Width(100);
    columns.Bound(o => o.UpdateDate).Format("{0:d}").Width(100);
    columns.Command(command => { command.Edit(); command.Destroy(); });

})
.ToolBar(toolbar => toolbar.Create())
.ClientDetailTemplateId("adTemplate")
.Pageable()
.Editable(editable => editable.Mode(GridEditMode.PopUp).TemplateName("RoleTemplate"))
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(read => read.Action("RoleRead", "Role"))
    .Update(update => update.Action("RoleUpdate", "Role"))
    .Create(create => create.Action("RoleCreate", "Role"))
    .Destroy(destroy => destroy.Action("RoleRemove", "Role"))
    .PageSize(10)
    .Model(model => 
    {
        model.Id(c => c.ID);
        model.Field(c => c.UpdateUser).Editable(false).DefaultValue(Context.User.Identity.Name);
        model.Field(c => c.UpdateDate).Editable(false).DefaultValue(DateTime.Now);
    })   
    )
.Sortable()
.Filterable()
)  

<script id="adTemplate" type="text/kendo-tmpl">
    @(Html.Kendo().Grid<ModelAChild>()
            .Name("Roles_#=ID#")
            .Columns(columns =>
            {
                columns.Bound(s => s.ActiveDirectoryGroup).Width(500);
                columns.Command(command => { command.Destroy(); });
            })
            .ToolBar(toolbar => toolbar.Create())
            .Editable(editable => editable.Mode(GridEditMode.PopUp).TemplateName("RoleSecurityTemplate"))
            .DataSource(dataSource => dataSource
                .Ajax()
                .Read(read => read.Action("RoleReadSecurity", "Role", new { roleID = "#=ID#" }))
                .Create(create => create.Action("RoleAddSecurity", "Role", new { roleID = "#=ID#" }))
                .Destroy(destroy => destroy.Action("RoleRemoveSecurity", "Role", new { roleID = "#=ID#" }))
                .Model(model => 
                    {
                        model.Id(s => s.ID);
                        model.Field(s => s.UpdateUser).Editable(false).DefaultValue(Context.User.Identity.Name);
                        model.Field(s => s.UpdateDate).Editable(false).DefaultValue(DateTime.Now);
                    })    
                    )
            .Pageable()
            .Sortable()
            .ToClientTemplate())
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:28:03.477

将您的版本更新到最新版本。这在某些版本之前已修复。

# ios - 如何从条形码编号中查找有关食物的数据？

> ID：13726290
> 
> 赞同：4
> 
> 时间：2012-12-05T15:13:05.263
> 
> 标签：ios, cordova, barcode-scanner

我目前正在设计一个 iOS 应用程序来帮助糖尿病患者管理他们的病情。

我正在研究的一个功能是条码扫描仪，用户可以在其中拍摄条码的照片（在他们购物时）并根据条码获取有关产品的信息。

有了这些信息，我将为糖尿病患者创建一个 1-10 的营养评分。

我的问题是，有没有办法可以使用扫描的条形码来获取特定食品的信息？我意识到条形码只是一个数字，而在超市条形码信息存储在超市数据库中。无论如何我可以访问食品的在线数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:39:35.750

使用[条形码扫描仪](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner)插件，然后查询[labelcalc](http://www.labelcalc.com/home.aspx)以获取您需要的信息。

# unix - 跨多个 korn (ksh93) shell 脚本 (getter-setter) 使用的环境变量

> ID：13726293
> 
> 赞同：2
> 
> 时间：2012-12-05T15:13:12.980
> 
> 标签：unix, environment-variables, solaris, ksh, getter-setter

我有一组脚本，它们共享一些用作状态标志的环境变量。

考虑：

`./script1.sh; ./script2.sh; # I execute 2 scripts within the same shell.`

现在，这些脚本中的每一个都会定期执行以下脚本，以设置（刷新）环境变量：

`. ./setEnvVariables.sh #This executes it in the context of the current shell and thus making the environment variables accessible across both scripts.`

*   setEnvVariables.sh 包含我想在同一 shell 中执行的其他脚本中使用的变量。
*   其中一些变量充当标志，可以在`script1.sh,script2.sh,..`脚本执行过程中在文件中手动更改。

另一种方法是将标志保存在文件中并创建典型的 get/set 函数来读取文件并返回/设置标志值。这些标志由我设置以简化对脚本功能的控制。

有没有更好的方法来处理这个？这有点属于getter-setter设计模式......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:43:34.863

如果您使用的是 ksh93，而不是 ksh88，则更优雅的方法是使用学科函数来实现这一点。

它们允许为 shell 变量实现 getter et setter 函数。然后，您可以创建一个从共享存储区域（文件、ldap 目录、数据库等）中选择变量值的 getter，以及一个更新同一后端的 setter。

这是一个简单的例子：

a.ksh

```
function shared.get
{
    .sh.value=$(</tmp/shared)
}
function shared.set
{
    echo ${.sh.value}>/tmp/shared.new
    mv /tmp/shared.new /tmp/shared
}

set -x
echo $shared
shared=22
echo $shared
./b.ksh
echo $shared 
```

b.ksh

```
function shared.get
{
    .sh.value=$(</tmp/shared)
}
function shared.set
{
    echo ${.sh.value}>/tmp/shared.new
    mv /tmp/shared.new /tmp/shared
}

set -x
echo $shared
shared=11
echo $shared 
```

b.ksh 作为子 shell 运行会修改父进程 (a.ksh) 中共享变量的值。

```
$ ./a.ksh
+ echo 11
11
+ shared=22
+ echo 22
22
+ ./b.ksh
+ echo 22
22
+ shared=11
+ echo 11
11
+ echo 11
11 
```

# xml - SWF Action Script 2.0 中的自动刷新 XML 数据

> ID：13726295
> 
> 赞同：1
> 
> 时间：2012-12-05T15:13:13.907
> 
> 标签：xml, flash, actionscript-2, flash-cs4, flashlite

所以我正在使用 AS 2.0 开发 SWF。它需要从 XML 文件访问汇率。我已经有一个遍历 XML 子节点的 setInterval。所以我已经在我的代码中运行了一个计时器。我需要设置另一个计时器以重新加载 XML，以便每隔 20 秒不断更新对 XML 的更改。当我尝试这样做时，计时器会重叠。大家能帮忙吗？？谢谢

**这是我当前的代码：**

```
 var index:Number = 0;
    var myxml:XML = new XML();
    myxml.ignoreWhite = true;
    myxml.onLoad = function(success:Boolean):Void{
loadData();
setInterval(loadData, 3000);
};

function loadData(){
var messages:XMLNode = myxml.firstChild;
if(index >= messages.childNodes.length)
    index = 0;
var my_message:XMLNode = messages.childNodes[index];

_root.status_1.htmlText = my_message.childNodes[0].firstChild.nodeValue; 
_root.status_2.htmlText = my_message.childNodes[1].firstChild.nodeValue; 
_root.status_3.htmlText = my_message.childNodes[2].firstChild.nodeValue; 
_root.status_4.htmlText = my_message.childNodes[3].firstChild.nodeValue;
_root.status_5.htmlText = my_message.childNodes[4].firstChild.nodeValue;
_root.status_6.htmlText = my_message.childNodes[5].firstChild.nodeValue;        

index++;

       }
myxml.load("data.xml"); 
```

**我的 XML 文件如下所示：**

```
<?xml version="1.0" encoding="utf-8"?>
   <messages>
 <message>
            <item>1.38329</item>
    <item>1.58344</item>
    <item>1.06960</item>
    <item>93.7300</item>
    <item>0.9864</item>
    <item></item>
</message>

<message >
    <item>1.36789</item>
    <item>1.56734</item>
    <item>1.03752</item>
    <item>93.7267</item>
    <item>0.97836</item>
    <item></item>
</message>

<message >
    <item>1.38126</item>
    <item>1.59104</item>
    <item>1.05380</item>
    <item>93.5755</item>
    <item>0.9923</item>
    <item></item>
</message>

<message >
    <item>1.38126</item>
    <item>1.29789</item>
    <item>1.5423</item>
    <item>1.07123</item>
    <item>93.7268</item>
    <item>0.9867</item>
    <item></item>
</message>

<message >  
    <item>1.38329</item>
    <item>1.514762</item>
    <item>1.07451</item>
    <item>93.7277</item>
    <item>0.9975</item>
      <item></item> 
</message>

</messages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:14:56.763

我建议以下代码：

```
var iCurrentNodeLoading:Number;
var intervalNextNode:Number;
var intervalReloadXML:Number;

var myxml:XML = new XML();
myxml.ignoreWhite = true;
myxml.onLoad = mx.utils.Delegate.create(this, onXMLLoadedEvent);

function onXMLLoadedEvent(success:Boolean):Void{
  if (success) {
    iCurrentNodeLoading = 0;
    loadNextNode();
  }
};

function loadNextNode() {
  if (intervalNextNode != undefined) clearInterval(intervalNextNode);
  var messages:XMLNode = myxml.firstChild;
  if (iCurrentNodeLoading >= messages.childNodes.length) iCurrentNodeLoading = 0;

  var my_message:XMLNode = messages.childNodes[iCurrentNodeLoading];

  _root.status_1.htmlText = my_message.childNodes[0].firstChild.nodeValue; 
  _root.status_2.htmlText = my_message.childNodes[1].firstChild.nodeValue; 
  _root.status_3.htmlText = my_message.childNodes[2].firstChild.nodeValue; 
  _root.status_4.htmlText = my_message.childNodes[3].firstChild.nodeValue;
  _root.status_5.htmlText = my_message.childNodes[4].firstChild.nodeValue;
  _root.status_6.htmlText = my_message.childNodes[5].firstChild.nodeValue;        

  iCurrentNodeLoading++;
  intervalNextNode = setInterval(loadNextNode, 3000);
}

function reloadXML(){
  if (intervalReloadXML != undefined) clearInterval(intervalReloadXML);
  myxml.load("data.xml");
  intervalNextNode = setInterval(reloadXML, 20000);
}

reloadXML(); 
```

# magento - Magento - 获取分配类别的网站的详细信息

> ID：13726298
> 
> 赞同：1
> 
> 时间：2012-12-05T15:13:24.510
> 
> 标签：magento, categories

我有一个多商店设置，我正在尝试确定分配类别的网站。我有以下内容：

```
Mage::getModel('catalog/category')->load($catId)->getStoreId(); 
```

但这似乎没有显示正确的信息（即使我将猫 ID 更改为来自另一个网站的 ID，也始终显示 ID 为 1）。

我还尝试了以下方法：

```
Mage::getModel('catalog/category')->load($catId)->getStore()->getName();
Mage::getModel('catalog/category')->load($catId)->getStore()->getRootCategoryId();
Mage::getModel('catalog/category')->load($catId)->getWebsite(); 
```

如何确定该类别分配到的网站？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:32:15.127

商店还是网站？

**商店ID** ...

```
$categoryId = 10;
$category = Mage::getModel('catalog/category')->load($categoryId);
$storeIds = $category->getStoreIds(); 
```

**网站ID** ...

```
$categoryId = 10;
$category = Mage::getModel('catalog/category')->load($categoryId);
$categoryIds = $category->getPathIds();

$stores = Mage::getModel('core/store')->getCollection()
    ->loadByCategoryIds($categoryIds);

$websiteIds = array_unique($stores->getColumnValues('website_id')); 
```

# php - 分页返回错误的页数

> ID：13726300
> 
> 赞同：0
> 
> 时间：2012-12-05T15:13:27.133
> 
> 标签：php, pagination

我已经基于这个网站[http://tuts.wtfdiary.com/2012/06/simple-pagination-using-php-with-css.html构建了一个分页脚本](http://tuts.wtfdiary.com/2012/06/simple-pagination-using-php-with-css.html)

我已经稍微改变了它，但这给我带来了一些麻烦。如果结果分布在 40 多个条目上，则应该是每页 10 个，所以理论上它应该显示 5 页，对吗？但很多时候它会显示出更多的东西。

有人会介意直接指出我吗？我的代码在下面......

多谢你们 ：）

```
<?php

//include ("db.php");
include_once 'header.php';

$ddoption='';

if (isset($_GET['searchid'])){
$searchid = $_GET['searchid'];
}
//$result=mysql_query("select count(*) from product");
$result=mysql_query("select count(*) from product WHERE (title OR description LIKE '%".$searchid."%')OR(title ='".$searchid."' ) OR(description='".$searchid."')");
$row=mysql_fetch_row($result);
$tr=$row[0];
$rpp=10;
$pn=1;
$searchid = '';

if (isset($_GET['searchid'])){
$searchid = $_GET['searchid'];
}

if(isset($_GET['pn']))
{
  $pn=$_GET['pn'];
}

$oldtp=($tr/$rpp);

$tp=round($oldtp);

if($tr%$rpp>0)
{
    $tp++;
}
$from=(($pn-1)*$rpp)/*+1*/;
$to=($pn)*($rpp)-1;
//$result=mysql_query("SELECT * from product WHERE productid between $from AND $to");

//$result=mysql_query("SELECT * FROM product WHERE productid between $from AND $to AND  title OR description LIKE '%".$id."%'" );
echo "<h1> Results from ". $from." to ".$to. "</h1>";

if(isset($_GET['option'])){
$ddoption = $_GET['option'];
if($ddoption=="both"){
$result=mysql_query("SELECT * FROM product WHERE (title LIKE '%".$searchid."%')OR (description LIKE '%".$searchid."%') OR(title ='".$searchid."' ) OR(description='".$searchid."') ORDER BY productid DESC LIMIT $from,10");
}
else if($ddoption=="title"){
$result=mysql_query("SELECT * FROM product WHERE (title LIKE '%".$searchid."%')OR(title ='".$searchid."' ) ORDER BY productid DESC LIMIT $from,10");
}
else{
$result=mysql_query("SELECT * FROM product WHERE (description LIKE '%".$searchid."%')OR(description='".$searchid."') ORDER BY productid DESC LIMIT $from,10");
}
}
echo "<table>";

while($row=mysql_fetch_array($result))
{

 echo '<tr><td><a href="item.php?id='. $row['productid'].'">'.'<img src="'.$row['image1'].'" alt="'.$row['title'].'" height="100" width="100"/></a></td>';
      echo '<td><a href="item.php?id='. $row['productid'].'">'.$row['title'].'</a></td></tr>';

}

echo "</table>";
echo "<ul id='pages'>";
for($i=1;$i<=$tp;$i++)
{
echo "<li><a href='search.php?pn=$i&searchid=$searchid&amp;option=$ddoption'>Page $i</a></li>";
}
echo "</ul>";

echo <<<_END

</body>
</html>

_END;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:25:23.663

您可以在一行中计算您的页面数：

```
$tp = ceil($tr/$rpp); 
```

代替

```
$oldtp=($tr/$rpp);

$tp=round($oldtp);

if($tr%$rpp>0)
{
    $tp++;
} 
```

行数不同的可能原因是您在计算行数和显示行数时查询不同。

# iphone - 杂志样版面是如何制作的？

> ID：13726304
> 
> 赞同：0
> 
> 时间：2012-12-05T15:13:37.880
> 
> 标签：iphone, ios, ipad, cocoa-touch

像这样的布局实际上是如何完成的： ![在此处输入图像描述](../Images/b95f332d50f7a1be7ff78821b6bcbcb9.png)

这里究竟使用了什么，这些布局的动态流程非常有趣。

我的问题是 - 我如何使用现有的 Cocoa 触控技术创建这样的一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:42:35.037

您可以通过基于网格的布局来实现这一点。

对于 iOS Grid Based Layouts 可以使用 UICollectionView > UICollectionView 类为 iOS SDK 带来本地创建基于网格的布局的能力。这是一个非常有用的类，尤其是在显示视图行和列的 iPad 上很常见。

网格适用于流体页面布局。 [进一步阅读](http://www.subtraction.com/pics/0703/grids_are_good.pdf)

实际上我不知道 Cocoa 中的 Auto Layout System 是如何工作的，但是必须有一种方法可以通过简单的方法来实现它。

# javascript - Javascript 在动态创建的 DOM 对象上动态设置 DOM 对象事件

> ID：13726308
> 
> 赞同：0
> 
> 时间：2012-12-05T15:13:51.470
> 
> 标签：javascript, javascript-events

以下脚本：

```
var containerDIV = document.getElementById("sampleContainer");

for(var i = 0; i < 5; i++)
{
    var dynamicDIV = document.createElement("div");
    containerDIV.appendChild(dynamicDIV);   
    dynamicDIV.onclick = function() { alert(i); };
    dynamicDIV.innerHTML = "Row: " + i;
} 
```

单击动态行时，警报框中的输出将始终为“5”而不是 0、1、..

有谁知道分配 onclick 事件的正确方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:15:07.740

您应该使用[关闭电源](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)：

```
for (var i = 0; i < 5; i++) {
    (function(i) {
        dynamicDIV.onclick = function() {
            alert(i);
        };
    })(i);
} 
```

**演示：http:** [//jsfiddle.net/zvPfZ/](http://jsfiddle.net/zvPfZ/)

# c++ - STL / Boost中的函子从指针中提取值

> ID：13726312
> 
> 赞同：0
> 
> 时间：2012-12-05T15:13:58.290
> 
> 标签：c++, pointers, boost, stl, functor

我需要一个函子，它做一件非常简单的事情，基本上是这样的：

```
template<typename T>
struct Extract
{
    T & operator()(T *t)
    {
        return *t;
    }
}; 
```

我不想复制代码，而且我相信这样一个简单方便的代码应该已经存在于某个地方。我试过寻找它，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:41:12.603

我想您想遍历某个容器并在其中使用指针做某事？甚至基于现有（如 std::plus & 等）构建一个更高阶的函数......

为此，boost库几乎没有解决方案：

*   [来自boost::iterator](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/indirect_iterator.html)的间接迭代器
*   [boost::range](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/adaptors/reference/indirected.html)的间接适配器

两者都不仅能够使用原始指针工作，而且还包括对一些智能指针的支持......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:36:23.403

首先，您的示例中存在语法错误，我认为您正试图重载函数调用运算符：

```
template<typename T>
struct Extract
{
    T& operator()(T *t)
    {
        return *t;
    }
}; 
```

接下来，这似乎是将指针转换为引用。您可以使用[`std::ref`](http://en.cppreference.com/w/cpp/utility/functional/ref)和[`std::cref`](http://en.cppreference.com/w/cpp/utility/functional/ref)在标准库中执行此操作。他们从一个值创建一个[`std::reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)，因此您可以在将指针参数发送到`std::ref`.

你的如何使用：

```
Extract<int> ex;
int n = 1;
int* n_ptr = &n;
int& n2 = ex(n_ptr); 
```

将如何`std::ref`使用：

```
int n = 1;
int* n_ptr = &n;
int& n2 = std::ref(*n_ptr); 
```

# ios - 应用程序在审查中崩溃，但在临时分发中没有崩溃

> ID：13726313
> 
> 赞同：3
> 
> 时间：2012-12-05T15:14:00.787
> 
> 标签：ios, crash-reports

我已经在 iOS 5、5.1 和 6.0.1 的各种设备上测试了我的应用程序，没有崩溃。我还使用 Xcode 调试器以及通过在同一设备上的临时分发成功地对其进行了测试。

然而，它被苹果拒绝了：

> 我们发现您的应用无法在运行 iOS 6.0.1 的 iPad 上启动，无论是在 Wi-Fi 还是蜂窝网络上。
> 
> 我们在主屏幕上选择应用程序时遇到了问题 - 应用程序显示启动图像然后意外退出。这可能是因为 iOS 6 对应用程序使用了看门狗定时器；如果应用程序完成其初始启动的时间过长，操作系统将终止该应用程序。
> 
> 有关看门狗定时器的信息，请参阅技术问答：应用程序在从调试器启动时不会崩溃，但在用户启动时会崩溃。
> 
> 另一种可能性可能是缺少权利。有关详细信息，请参阅技术说明：解决“0x800003A”、应用程序无法启动和“缺少权利”。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
>     
>     
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
>     
>     
> 
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。
> 
> 如果您在重现此问题时遇到困难，请尝试按照[https://developer.apple.com/library/ios/qa/qa1764/Testing](https://developer.apple.com/library/ios/qa/qa1764/) Workflow with Xcode's Archive feature 中所述测试工作流程”。

我无法重现此问题。这是崩溃报告：

```
    事件标识符：49209743-0352-4073-B20A-FD81F5CE14D0
    CrashReporter 密钥：b0da4d2be342a13b58b877b8096c6853088208c2
    硬件型号：iPad3,3
    过程：可折叠D [490]
    路径：/var/mobile/Applications/1812EF83-875B-49CD-9B97-46878ED60F8E/collapsibleD.app/collapsibleD
    标识符：collapsibleD
    版本： ？？？（？？？）
    代码类型：ARM（本机）
    父进程：launchd [1]

    日期/时间：2012-12-05 10:33:56.020 -0800
    操作系统版本：iOS 6.0.1 (10A523)
    报告版本：104

    异常类型：EXC_CRASH (SIGTRAP)
    异常代码：0x0000000000000000, 0x0000000000000000
    崩溃的线程：0

    最后异常回溯：
    (0x33e2429e 0x3ab0697a 0x33e241c0 0x3a402c10 0x3a402ba6 0xee80c 0xe59ac 0x76a40 0xe3462 0xed374 0x9613e 0x96442 0x97364 0x39b475ec 0x39b347fc 0x39b34116 0x372b059e 0x372b01ce 0x33df916e 0x33df9112 0x33df7f94 0x33d6aeb8 0x33d6ad44 0x372af2e6 0x39b882f4 0xa9506 0x5d58c)

    线程 0 名称：调度队列：com.apple.main-thread
    线程 0 崩溃：
    0 libsystem_kernel.dylib 0x32d4d838 0x32d3d000 + 67640
    1 可折叠 D 0x000f5b6e 0x5c000 + 629614
    2 核心基础 0x33e2457c 0x33d62000 + 796028
    3 libobjc.A.dylib 0x3ab06a62 0x3aafe000 + 35426
    4 libc++abi.dylib 0x38cac078 0x38cab000 + 4216
    5 libc++abi.dylib 0x38cac110 0x38cab000 + 4368
    6 libc++abi.dylib 0x38cad594 0x38cab000 + 9620
    7 libobjc.A.dylib 0x3ab069cc 0x3aafe000 + 35276
    8 核心基础 0x33d6af1c 0x33d62000 + 36636
    9 核心基础 0x33d6ad44 0x33d62000 + 36164
    10 图形服务 0x372af2e6 0x372aa000 + 21222
    11 UIKit 0x39b882f4 0x39b31000 + 357108
    12 可折叠 D 0x000a9506 0x5c000 + 316678
    13 可折叠D 0x0005d58c 0x5c000 + 5516

    线程 1：
    0 libsystem_kernel.dylib 0x32d4ed98 0x32d3d000 + 73112
    1 libsystem_c.dylib 0x3aa7ccf6 0x3aa76000 + 27894
    2 libsystem_c.dylib 0x3aa7ca12 0x3aa76000 + 27154
    3 libsystem_c.dylib 0x3aa7c8a0 0x3aa76000 + 26784

    线程 2 名称：调度队列：com.apple.libdispatch-manager
    线程 2：
    0 libsystem_kernel.dylib 0x32d3e648 0x32d3d000 + 5704
    1 libdispatch.dylib 0x3be5a974 0x3be52000 + 35188
    2 libdispatch.dylib 0x3be5a654 0x3be52000 + 34388

    线程 3：
    0 libsystem_kernel.dylib 0x32d4ed98 0x32d3d000 + 73112
    1 libsystem_c.dylib 0x3aa7ccf6 0x3aa76000 + 27894
    2 libsystem_c.dylib 0x3aa7ca12 0x3aa76000 + 27154
    3 libsystem_c.dylib 0x3aa7c8a0 0x3aa76000 + 26784

    线程 4 名称：WebThread
    线程 4：
    0 libsystem_kernel.dylib 0x32d4e0fc 0x32d3d000 + 69884
    1 libsystem_c.dylib 0x3aa77124 0x3aa76000 + 4388
    2 网络核心 0x34cc9958 0x34cbd000 + 51544
    3 网络核心 0x34cc988a 0x34cbd000 + 51338
    4 核心基础 0x33df96ca 0x33d62000 + 620234
    5 核心基础 0x33df79bc 0x33d62000 + 612796
    6 核心基础 0x33df7de8 0x33d62000 + 613864
    7 核心基础 0x33d6aeb8 0x33d62000 + 36536
    8 核心基础 0x33d6ad44 0x33d62000 + 36164
    9 网络核心 0x34cc7a40 0x34cbd000 + 43584
    10 libsystem_c.dylib 0x3aa8730e 0x3aa76000 + 70414
    11 libsystem_c.dylib 0x3aa871d4 0x3aa76000 + 70100

    线程 5 名称：com.apple.NSURLConnectionLoader
    线程 5：
    0 libsystem_kernel.dylib 0x32d3deb4 0x32d3d000 + 3764
    1 libsystem_kernel.dylib 0x32d3e048 0x32d3d000 + 4168
    2 核心基础 0x33df9040 0x33d62000 + 618560
    3 核心基础 0x33df7d9e 0x33d62000 + 613790
    4 核心基础 0x33d6aeb8 0x33d62000 + 36536
    5 核心基础 0x33d6ad44 0x33d62000 + 36164
    6 基础 0x3a3f4bc8 0x3a3c7000 + 187336
    7 基础 0x3a478678 0x3a3c7000 + 726648
    8 libsystem_c.dylib 0x3aa8730e 0x3aa76000 + 70414
    9 libsystem_c.dylib 0x3aa871d4 0x3aa76000 + 70100

    线程 6：
    0 libsystem_kernel.dylib 0x32d4ed98 0x32d3d000 + 73112
    1 libsystem_c.dylib 0x3aa7ccf6 0x3aa76000 + 27894
    2 libsystem_c.dylib 0x3aa7ca12 0x3aa76000 + 27154
    3 libsystem_c.dylib 0x3aa7c8a0 0x3aa76000 + 26784

    线程 7：
    0 libsystem_kernel.dylib 0x32d3deb4 0x32d3d000 + 3764
    1 libsystem_kernel.dylib 0x32d3e048 0x32d3d000 + 4168
    2 核心基础 0x33df9040 0x33d62000 + 618560
    3 核心基础 0x33df7d9e 0x33d62000 + 613790
    4 核心基础 0x33d6aeb8 0x33d62000 + 36536
    5 核心基础 0x33d6ad44 0x33d62000 + 36164
    6 基础 0x3a3cb78a 0x3a3c7000 + 18314
    7 基础 0x3a46f058 0x3a3c7000 + 688216
    8 可折叠 D 0x0010b010 0x5c000 + 716816
    9 基础 0x3a478678 0x3a3c7000 + 726648
    10 libsystem_c.dylib 0x3aa8730e 0x3aa76000 + 70414
    11 libsystem_c.dylib 0x3aa871d4 0x3aa76000 + 70100

    线程 8：
    0 libsystem_kernel.dylib 0x32d4ed98 0x32d3d000 + 73112
    1 libsystem_c.dylib 0x3aa7ccf6 0x3aa76000 + 27894
    2 libsystem_c.dylib 0x3aa7ca12 0x3aa76000 + 27154
    3 libsystem_c.dylib 0x3aa7c8a0 0x3aa76000 + 26784

    线程 9 名称：com.apple.CFSocket.private
    线程 9：
    0 libsystem_kernel.dylib 0x32d4e594 0x32d3d000 + 71060
    1 核心基础 0x33dfd1f2 0x33d62000 + 635378
    2 libsystem_c.dylib 0x3aa8730e 0x3aa76000 + 70414
    3 libsystem_c.dylib 0x3aa871d4 0x3aa76000 + 70100

    线程 10 名称：AURemoteIO::IOThread
    线程 10：
    0 libsystem_kernel.dylib 0x32d3deb4 0x32d3d000 + 3764
    1 libsystem_kernel.dylib 0x32d3e048 0x32d3d000 + 4168
    2 音频工具箱 0x3b66e624 0x3b571000 + 1037860
    3 音频工具箱 0x3b67098c 0x3b571000 + 1046924
    4 音频工具箱 0x3b5ae8a2 0x3b571000 + 252066
    5 libsystem_c.dylib 0x3aa8730e 0x3aa76000 + 70414
    6 libsystem_c.dylib 0x3aa871d4 0x3aa76000 + 70100

    线程 11 名称：AQClient
    线程 11：
    0 libsystem_kernel.dylib 0x32d3deb4 0x32d3d000 + 3764
    1 libsystem_kernel.dylib 0x32d3e048 0x32d3d000 + 4168
    2 核心基础 0x33df9040 0x33d62000 + 618560
    3 核心基础 0x33df7d9e 0x33d62000 + 613790
    4 核心基础 0x33d6aeb8 0x33d62000 + 36536
    5 核心基础 0x33d6ad44 0x33d62000 + 36164
    6 音频工具箱 0x3b5cd5b6 0x3b571000 + 378294
    7 音频工具箱 0x3b5ae8a2 0x3b571000 + 252066
    8 libsystem_c.dylib 0x3aa8730e 0x3aa76000 + 70414
    9 libsystem_c.dylib 0x3aa871d4 0x3aa76000 + 70100

    线程 0 因 ARM 线程状态（32 位）而崩溃：
        r0：0x00000000 r1：0x00000000 r2：0x00000001 r3：0x3c097fc8
        r4：0xffffffff r5：0x0000001a r6：0x2fda4304 r7：0x2fda49e0
        r8：0x2fda4310 r9：0x3d8f28a8 r10：0x2fda4554 r11：0x0000001a
        ip: 0x00000025 sp: 0x2fda42e0 lr: 0x000f5b73 pc: 0x32d4d838
      cpsr: 0x000f0010

    二进制图像：
       0x5c000 - 0x193fff +collapsibleD armv7 /var/mobile/Applications/1812EF83-875B-49CD-9B97-46878ED60F8E/collapsibleD.app/collapsibleD
    0x2fee0000 - 0x2ff00fff dyld armv7 /usr/lib/dyld
    0x32c7d000 - 0x32c81fff libGFXShared.dylib armv7 /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
    0x32c83000 - 0x32c8ffff libbsm.0.dylib armv7 /usr/lib/libbsm.0.dylib
    0x32d3d000 - 0x32d53fff libsystem_kernel.dylib armv7 /usr/lib/system/libsystem_kernel.dylib
    0x32fbd000 - 0x32fc3fff libsystem_dnssd.dylib armv7 /usr/lib/system/libsystem_dnssd.dylib
    0x32fc4000 - 0x32fecfff PrintKit armv7 /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
    0x3300d000 - 0x3300efff IOAccelerator armv7 /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
    0x33088000 - 0x330d3fff libstdc++.6.dylib armv7 /usr/lib/libstdc++.6.dylib
    0x330dc000 - 0x3318ffff EventKit armv7 /System/Library/Frameworks/EventKit.framework/EventKit
    0x331aa000 - 0x332e4fff AudioCodecs armv7 /System/Library/Frameworks/AudioToolbox.framework/AudioCodecs
    0x332e5000 - 0x332effff MailServices armv7 /System/Library/PrivateFrameworks/MailServices.framework/MailServices
    0x332f0000 - 0x332f7fff OpenGLES armv7 /System/Library/Frameworks/OpenGLES.framework/OpenGLES
    0x33358000 - 0x33367fff CoreVideo armv7 /System/Library/Frameworks/CoreVideo.framework/CoreVideo
    0x33368000 - 0x3336cfff FTClientServices armv7 /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
    0x3336d000 - 0x333f2fff MessageUI armv7 /System/Library/Frameworks/MessageUI.framework/MessageUI
    0x333f3000 - 0x33467fff GameKitServices armv7 /System/Library/PrivateFrameworks/GameKitServices.framework/GameKitServices
    0x33566000 - 0x33596fff ContentIndex armv7 /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
    0x33597000 - 0x335b0fff DictionaryServices armv7 /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
    0x335b1000 - 0x336a0fff AVConference armv7 /System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/AVConference.framework/AVConference
    0x336bf000 - 0x336c2fff libmacho.dylib armv7 /usr/lib/system/libmacho.dylib
    0x336c3000 - 0x336ccfff AssetsLibraryServices armv7 /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
    0x336cd000 - 0x336defff libvMisc.dylib armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
    0x336df000 - 0x3375cfff HomeSharing armv7 /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
    0x33790000 - 0x33790fff LegacyHandle armv7 /System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/LegacyHandle.framework/LegacyHandle
    0x33995000 - 0x33995fff libSystem.B.dylib armv7 /usr/lib/libSystem.B.dylib
    0x33a39000 - 0x33b77fff vImage armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
    0x33b78000 - 0x33b84fff AccountSettings armv7 /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
    0x33b85000 - 0x33cd5fff MusicLibrary armv7 /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
    0x33cf8000 - 0x33d18fff libxslt.1.dylib armv7 /usr/lib/libxslt.1.dylib
    0x33d36000 - 0x33d37fff libsystem_sandbox.dylib armv7 /usr/lib/system/libsystem_sandbox.dylib
    0x33d38000 - 0x33d4dfff libmis.dylib armv7 /usr/lib/libmis.dylib
    0x33d62000 - 0x33e94fff CoreFoundation armv7 /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
    0x33e95000 - 0x3411afff MediaToolbox armv7 /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
    0x34130000 - 0x34192fff CoreText armv7 /System/Library/Frameworks/CoreText.framework/CoreText
    0x341bc000 - 0x341c8fff libz.1.dylib armv7 /usr/lib/libz.1.dylib
    0x341c9000 - 0x341cafff CoreSurface armv7 /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
    0x341d0000 - 0x341d3fff ActorKit armv7 /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
    0x342e5000 - 0x342eefff MediaRemote armv7 /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
    0x34301000 - 0x3431cfff libRIP.A.dylib armv7 /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
    0x34347000 - 0x3447ffff CoreGraphics armv7 /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
    0x346d5000 - 0x34710fff iCalendar armv7 /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
    0x34711000 - 0x34746fff libcorecrypto.dylib armv7 /usr/lib/system/libcorecrypto.dylib
    0x34747000 - 0x3479ffff ManagedConfiguration armv7 /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
    0x347b3000 - 0x347b3fff libsystem_blocks.dylib armv7 /usr/lib/system/libsystem_blocks.dylib
    0x347b4000 - 0x34819fff CoreMedia armv7 /System/Library/Frameworks/CoreMedia.framework/CoreMedia
    0x34868000 - 0x3489bfff AppleAccount armv7 /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
    0x348f2000 - 0x34acafff ImageIO armv7 /System/Library/Frameworks/ImageIO.framework/ImageIO
    0x34acb000 - 0x34ae7fff libsystem_m.dylib armv7 /usr/lib/system/libsystem_m.dylib
    0x34af9000 - 0x34b00fff CaptiveNetwork armv7 /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
    0x34b0d000 - 0x34b47fff iTunesStore armv7 /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
    0x34bc9000 - 0x34bd0fff MobileIcons armv7 /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
    0x34be5000 - 0x34be9fff IOSurface armv7 /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
    0x34c82000 - 0x34ca6fff Bom armv7 /System/Library/PrivateFrameworks/Bom.framework/Bom
    0x34cbd000 - 0x355ecfff WebCore armv7 /System/Library/PrivateFrameworks/WebCore.framework/WebCore
    0x355ed000 - 0x355f0fff libcache.dylib armv7 /usr/lib/system/libcache.dylib
    0x35791000 - 0x357e7fff CoreAudio armv7 /System/Library/Frameworks/CoreAudio.framework/CoreAudio
    0x3580c000 - 0x35824fff libsystem_info.dylib armv7 /usr/lib/system/libsystem_info.dylib
    0x35825000 - 0x35863fff VideoToolbox armv7 /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
    0x358b2000 - 0x358effff FTServices armv7 /System/Library/PrivateFrameworks/FTServices.framework/FTServices
    0x358f0000 - 0x359f9fff IMGSGX543GLDriver armv7 /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
    0x35bfe000 - 0x35c2bfff MobileAsset armv7 /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
    0x35db9000 - 0x35dbefff CommonUtilities armv7 /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
    0x35dc3000 - 0x35dcafff liblockdown.dylib armv7 /usr/lib/liblockdown.dylib
    0x35ec9000 - 0x35edbfff DataAccessExpress armv7   

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:32:58.633

1.  尝试在模拟器上运行。
2.  尝试在各种真实设备上运行（包括不同版本的 iPad1、iPad2...）
3.  从 applicationDidFinishLaunch 移​​动初始化代码。
4.  查看您的实体 :)

# r - R中的引导覆盖

> ID：13726315
> 
> 赞同：2
> 
> 时间：2012-12-05T11:29:04.743
> 
> 标签：r, statistics-bootstrap

我会估计引导区间的覆盖率，因为知道真实平均值是`895.0385`. 我有我的向量`b<-c(300,300,200,250,600...)`，我做了引导和输出间隔：

```
mean.fun <- function(dat, idx) mean(dat[idx], na.rm = TRUE)
boot.out <- boot(b, mean.fun, R=999)
boot.ci(boot.out) 
```

但是我如何复制它以获得覆盖概率（它包含真实平均值的多少次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:09:10.427

不久前，我试图做一些类似的事情。我没有使用引导命令，而是使用了示例命令，但这可能会有所帮助。我也可能 100% 错了，我对 R 还不是很好。

```
mean.fun <- function(dat, idx) mean(dat[idx], na.rm = TRUE)
bootoutput <- data.frame(
  bootoutput = replicate(10000, boot.ci(boot(b, mean.fun, R=999)))
) 
```

# java - JFreeChart在动态图表中丢失数据

> ID：13726318
> 
> 赞同：1
> 
> 时间：2012-12-05T15:14:17.497
> 
> 标签：java, jfreechart

我有用于测量 CPU 性能的动态图表，我需要我的 Java 程序长时间生成图表（例如：24 小时）。问题是随着新数据的出现，旧数据会消失在图表中。我不想丢失这些数据。我可以以某种方式固定 x 轴吗？是否可以在图表上实现自动滚动或压缩图表？

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:21:14.187

没有示例代码，因此我们不知道如何以及何时生成图表。但总的来说：如果您不想丢失图表中的信息，则需要保存新数据而不丢弃旧数据（例如，在数据库中，只是在类变量 ArrayList 等中，无论您需要什么）。如果您生成图表，请使用该数据，并期望值的动态大小/数量。（它必须根据要求生成，或者使用计时器生成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:56:58.430

[如此处](https://stackoverflow.com/a/6517440/230513)所示，您可以使用`setMaximumItemAge()`a`TimeSeries`来决定要保留多少数据。您也可以使用`setMaximumItemCount()`.

# ruby-on-rails - 为什么控制器需要多种格式渲染？

> ID：13726322
> 
> 赞同：0
> 
> 时间：2012-12-05T15:14:27.007
> 
> 标签：ruby-on-rails

请解释为什么我们需要在控制器中使用此代码？这段代码有什么意义？

```
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @users }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:17:34.693

它允许您根据用户/调用者请求的格式设置不同的输出格式。如果您要访问`http://yourhost/controller/index.html`，控制器将使用 ERB 模板`index.html.erb`（或 HAML 或其他）进行响应。如果您要访问`http://yourhost/controller/index.json`，它将以 JSON 模板响应`index.json.erb`。

这允许您拥有一个可以准备数据的控制器操作，然后根据请求的格式选择要呈现的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:18:57.787

定义调用 respond_with 时默认呈现的 mime 类型。所以基本上，这意味着您的控制器操作可以以不同的格式（在您的情况下为 html、json）被击中，并且仍然将数据提供回调用它的任何内容。这有助于 API 开发和许多其他事情。例如：您想要获取所有用户的 json 列表以使用 javascript 执行某些操作。您将调用 /users.json ，这将转到您的 user_controller#index 操作并知道呈现所有用户的 json 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:24:01.807

上面的代码是脚手架生成的，它为你的控制器提供了一种渲染`*.html`和`*.json`视图的方法，使得访问数据以实现 API 或 Web 应用程序的普通视图变得容易。

您还可以创建 XML 输出：

```
format.xml  { render xml: @users } 
```

以及其他格式，如 PDF 或 DOC，具体取决于您使用的 gem。

有关详细信息，请参阅[Rails 指南动作控制器概述](http://guides.rubyonrails.org/action_controller_overview.html#rendering-xml-and-json-data)。

# linux-kernel - kmalloc 的内存很慢

> ID：13726323
> 
> 赞同：5
> 
> 时间：2012-12-05T15:14:29.893
> 
> 标签：linux-kernel, arm

我们有一个应用程序需要大约 1MB 的缓冲区来填充硬件设备，因此我们编写了一个内核模块，使用 kmalloc() 分配缓冲区。我们没有使用 dma_alloc_coherent() 因为我们需要操纵缓冲区，因此希望它们被缓存（我们在需要时刷新缓存）。完成的操作之一是内核模块将一个缓冲区复制到另一个缓冲区。在计时这些副本时，我们看到复制缓冲区大约需要 2 毫秒。该时间不包括任何缓存刷新。

由于这看起来很慢，我们编写了一个标准的用户空间测试应用程序，它使用 malloc() 创建 1MB 缓冲区并复制它们。用户空间副本大约需要 0.5 毫秒，这大约是在我们正在使用的处理器/内存配置上移动这么多内存的正确时间。

我们尝试过的想法：为了确保它在内核空间和用户空间中不是不同的 memcpy()，我们编写了自己的 NEON 优化副本，但没有任何区别。将缓冲区大小从 100KB 更改为 10MB，没有任何区别。所有时间都超过 10 份，但总是非常非常一致。时间例程在用户空间中使用 gettimeofday()。

我们唯一能想到的是，kmalloc()'ed 内存和 malloc()'ed 内存的数据缓存设置不同？？？

我们正在研究 iMX6 ARM、Linaro 内核。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:06:36.720

`kmalloc()`内存在物理空间中是连续的。用户空间肯定不会（`mlock()`可能导致更接近连续）。如果您有多个 SDRAM 芯片，则您的内存控制器可能允许 同时对不同芯片进行*流水线操作*或*多个问题*读/写。使用多家银行甚至可能更快。 `vmalloc()`不会使用连续页面。^([参考](https://stackoverflow.com/questions/116343/what-is-the-difference-between-vmalloc-and-kmalloc)) 您应该能够编写一个测试来交换`kmalloc()`. `vmalloc()`如果较新的 ARM 发生了某些变化并且缓存不是[VIVT](http://en.wikipedia.org/wiki/CPU_cache)，则物理地址的差异可能会导致缓存（混叠？）对某些处理器产生影响。

我不认为内核内存和用户内存的缓存设置不同。至少有 2.6.34 个变体；但它们可能来自不同的池。此外，`memcpy()`不需要大缓存；你只需要足够的东西来确保 SDRAM 会爆裂。

另一个问题是外围设备。例如，一个芯片上的大型图形缓冲区可能会通过 DMA 窃取周期。如果您可以更改您的*机器文件*或*设备表*以禁用尽可能多的驱动程序，则可以消除这种情况。这与*流水线*相结合可以解释观察到的减速类型。

我相信这是一个*平台*问题。如果是严格意义上的 Linux，我认为数百万用户中的一个可能已经遇到过它。但是，您还没有给出特定版本的 Linux。这可能是基于 ARM 的问题；所以我把它标记为这样。我认为这是您的平台/ARM 组合；仅仅因为其他人会观察到这一点。您是否还可以提供您的设计所基于的特定*机器文件*或*设备表以及 Linux 版本。*

# php - 认证后设置服务参数

> ID：13726328
> 
> 赞同：0
> 
> 时间：2012-12-05T15:14:41.483
> 
> 标签：php, symfony

我的捆绑包中的一项服务取决于来自用户成功登录后调用的外部 api 的数据。有没有办法在用户身份验证后将参数值注入服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:21:34.830

如果您想要在身份验证成功上设置一些东西，没有什么比制作 AuthenticationSuccessHandler 更好的了。每次用户成功登录并执行任何操作时都会处理它...

教程：[http ://blog.alterphp.com/2011/10/set-up-authenticationsuccesshandler.html](http://blog.alterphp.com/2011/10/set-up-authenticationsuccesshandler.html)

# windows-7 - 如何在 Windows 7 上使用 VBScript 添加本地打印机？

> ID：13726337
> 
> 赞同：0
> 
> 时间：2012-12-05T15:14:57.990
> 
> 标签：windows-7, vbscript, batch-file, zebra-printers, printers

我有一台 Windows 7 64 位电脑，我正在尝试添加一个本地打印机，它会自动安装驱动程序并在完成后共享打印机。该端口是环回 IP 地址 (127.0.0.1)，它使用 Zebra (ZDesigner LP 2844) 驱动程序。（您可以在这里获得：[http](http://www.zebra.com/us/en/support-downloads/desktop/lp-2844.html) ://www.zebra.com/us/en/support-downloads/desktop/lp-2844.html ）

我当前的脚本在 XP 上运行良好，但在 Windows 7 上不太好。它出现错误“Microsoft VBScript 运行时错误：ActiveX 组件无法为我的脚本 AddPort.vbs 创建对象：'Port.Port.1'

以下脚本称为 AddPort.vbs

```
'ADDING:

dim oPort
dim oMaster
set oPort = CreateObject("Port.Port.1")
set oMaster = CreateObject("PrintMaster.PrintMaster.1")

wscript.echo "Adding port to local machine...."

'Indicate where to add the port. Double quotes ("" ) stand for the local computer, which is the default, or put "\\servername"
oPort.ServerName = ""

'The name of the port cannot be omitted.
oPort.PortName = "CustomPortName"

'The type of the port can be 1 (TCP RAW), 2 (TCP LPR), or 3 (standard local).
oPort.PortType = 3

'For TCP RAW ports. Default is 9100.
oPort.PortNumber = 9101

'Try adding the port.
oMaster.PortAdd oPort

'Test for the status.
If Err <> 0 then
wscript.echo "Error " & Err & " occurred while adding port"
End If 
```

以下脚本称为 AddPrinter.vbs 此脚本显示错误“Microsoft VBScript 运行时错误：ActiveX 组件无法创建对象：PrintMaster.PrintMaster.1

```
' Adding a Printer
' The sample code in this section creates any required objects, adds a printer to a remote server, and configures some driver and port information. 

dim oMaster
dim oPrinter

wscript.echo "Adding VirtualPrinter printer to local machine...."

'The following code creates the required PrintMaster and Printer objects.
set oMaster = CreateObject("PrintMaster.PrintMaster.1")
set oPrinter = CreateObject("Printer.Printer.1")

'The following code specifies the name of the computer where the printer will be added. To specify the local
'computer, either use empty quotes (“”) for the computer name, or do not use the following line of code. If
'ServerName is not set, the local computer is used. Always precede the name of a remote computer with two backslashes (\\). 
oPrinter.ServerName = ""

'The following code assigns a name to the printer. The string is required and cannot be empty. 
oPrinter.PrinterName = "VirtualPrinter"

'The following code specifies the printer driver to use. The string is required and cannot be empty. 
oPrinter.DriverName  = "ZDesigner LP 2844"

'The following code specifies the printer port to use. The string is required and cannot be empty. 
oPrinter.PortName    = "LoopBack"

'The following code specifies the location of the printer driver. This setting is optional, because by default
'the drivers are picked up from the driver cache directory.
'oPrinter.DriverPath  = "c:\drivers"

'The following code specifies the location of the INF file. This setting is optional, because by default the INF
'file is picked up from the %windir%\inf\ntprint.inf directory.
'oPrinter.InfFile     = "c:\winnt\inf\ntprint.inf"

oPrinter.PrintProcessor = "winprint"

'The following code adds the printer.
oMaster.PrinterAdd oPrinter

'The following code uses the Err object to determine whether the printer was added successfully.
if Err <> 0 then
    wscript.echo "Error " & Err & " occurred while adding VirtualPrinter"
else
    wscript.echo "Printer added successfully"
end if

' To configure other printer settings, such as comments, create a Printer object and then call PrintMaster's method PrinterSet.

wscript.echo "Configuring printer...."

oPrinter.Comment = "Virtual printer to capture labels"
oPrinter.ShareName = "VirtualPrinter"
oPrinter.Shared = true
oPrinter.Local = true

oMaster.PrinterSet oPrinter
if Err <> 0 then
    wscript.echo "Error " & Err & " occurred while changing settings for VirtualPrinter"
end if 
```

有没有其他方法可以在 Windows 7 中使用 vbscript 创建本地打印机、设置驱动程序、端口号和端口名称以及共享名称和打印处理器？？？

提前谢谢您，最好的回应将获得积分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T15:10:34.473

对于 Windows 7，这正是您所需要的：

稍后显示的七个打印机实用程序位于该`C:\Windows\System32\Printing_Admin_Scripts\en-US`文件夹中，该文件夹未在路径中列出。因此，您必须实际更改到此文件夹才能运行实用程序。而且，由于这些实用程序设计为从命令行运行，因此您需要从命令提示符窗口启动它们并使用 Windows Script Host 的基于命令行的脚本主机 ( `Cscript.exe`) 运行它们。

Windows 7 的 VBScript 打印实用程序

```
VBScript 文件 | 它能做什么
---------------------------------------------
prncnfg.vbs | 打印机配置
prndrvr.vbs | 打印机驱动程序配置
Prnjobs.vbs | 打印作业监控
prmngr.vbs | 打印机管理
Prnport.vbs | 打印机端口管理
prnqctl.vbs | 打印机队列管理
发布.vbs | 将打印机发布到 Active Directory

```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:26:21.210

我找到了另一种自动添加打印机的方法，首先我创建了一个批处理文件，然后我使用 Windows 7 附带的 prnmngr.vbs 为我自动添加打印机。为此，我已经在机器上安装了 Zebra 驱动程序（但对于任何其他类型的打印机，这个概念都是相同的）。然后我运行批处理文件。

下面显示了我是如何做到的，我在此处添加了批处理文件文本： 文件名称：AddPrinter.bat

```
rem first change the directory to the script location
cd %WINDIR%\System32\Printing_Admin_Scripts\en-US\
rem vbs script path: %WINDIR%\System32\Printing_Admin_Scripts\en-US\Prnmngr.vbs 

rem first add the port, specify name of port, assign it an IP Address, specify the type and the Port.
cscript prnport.vbs -a -r "LoopBack" -h 127.0.0.1 -o raw -n 9100
cscript prnport.vbs -a -r "LoopBack_2" -h 127.0.0.1 -o raw -n 9101
pause

rem specify the name of the new printer, specify the driver, specify the port it will use.
cscript prnmngr.vbs -a -p "VirtualPrinter" -m "ZDesigner LP 2844" -r "LoopBack"
pause

cscript prnmngr.vbs -a -p "Zebra  LP2844" -m "ZDesigner LP 2844" -r "USB0001"
rem cscript prnmngr.vbs -a -p "Zebra  GK420d" -m "ZDesigner GK420d" -r "LPT1:"
rem cscript prnmngr.vbs -a -p "Zebra  GC420d" -m "ZDesigner GC420d" -r "COM1:"
pause

NET STOP SPOOLER
NET START SPOOLER
pause 
```

要对此进行自定义，您可以使用这些网站作为参考；

[http://technet.microsoft.com/en-us/library/cc725868(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725868(v=ws.10).aspx)

[http://technet.microsoft.com/en-us/library/bb490974.aspx](http://technet.microsoft.com/en-us/library/bb490974.aspx)

[http://blog.ogwatermelon.com/?p=3489](http://blog.ogwatermelon.com/?p=3489)

[http://winadminnotes.wordpress.com/2010/02/19/how-to-manage-printers-and-printer-drivers-remotely-from-command-line/](http://winadminnotes.wordpress.com/2010/02/19/how-to-manage-printers-and-printer-drivers-remotely-from-command-line/)

[http://technet.microsoft.com/en-us/library/cc754352(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754352(v=ws.10).aspx)

# backbone.js - 使用 websockets 和主干来更新网页的内容

> ID：13726339
> 
> 赞同：3
> 
> 时间：2012-12-05T15:15:04.263
> 
> 标签：backbone.js, websocket, asp.net-web-api

是否可以使用网络套接字来更新网页的内容？

我想要实现的是创建一个动态注册列表。因此，使用骨干网和 mvc Web API，我通过查询数据库从服务器获取 json，然后将此 json 应用于模板。

当有人新注册时，我希望这触发连接到服务器的所有客户端的更新，发送新注册 ee 的 json 表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:46:41.970

我不确定您在服务器端使用的是什么，但本质上您想覆盖默认使用`backbone.sync`哪个使用`$.ajax`您选择的套接字框架。

这里有几篇文章可能会有所帮助：

[信号R](http://srtsolutions.github.com/backbone.signalr/)

[套接字 IO](http://developer.teradata.com/blog/jasonstrimpel/2011/11/backbone-js-and-socket-io)

希望这会有所帮助（ps 我们这样做了，它产生了一个非常性感的应用程序）。祝你好运

# php - 使用 php、mysql 和 js 获取通知的简单方法

> ID：13726348
> 
> 赞同：1
> 
> 时间：2012-12-05T15:15:36.150
> 
> 标签：php, javascript, mysql

我正在使用 php、mysql 和 js 进行餐厅应用程序，但我有一个小问题。

当客户订购某物（使用平板电脑）时，我需要在另一个终端中出现通知，但使用“简单方式”。

餐桌订单：

```
id  |   id_place   |  id_meal   |   id_waiter  |   status
1   |   3          |  20        |   4          |   0
2   |   4          |  17        |   4          |   0
3   |   2          |  13        |   2          |   0 
4   |   1          |  13        |   5          |   1  <-- All these are ordes 
```

我正在考虑做update.php：

```
$que = mysql_query("SELECT id, id_waiter, status FROM ordes WHERE status = 0");
$notifi = mysql_fetch_array($que); 
```

我的所有订单都处于待机状态（状态 = 0），现在我可以显示结果，计算每个服务员的行数：

```
Waiter2 [1]   //waiter2 has 1 notification
Waiter4 [2]   //waiter4 has 2 notifications 
```

但这些结果必须每 5 或 10 秒不断更新。我怎样才能做到这一点？我不想使用 jnode、套接字或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:17:27.517

使用该方法`setTimeout()`每隔 X 秒调用一个函数，该函数将刷新待机状态的订单列表更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

如果您不想重新加载整个页面，则必须在此处使用 AJAX 更多信息：[https ://developer.mozilla.org/en/docs/AJAX](https://developer.mozilla.org/en/docs/AJAX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:18:31.457

在 PHP 页面中，您可以使用 while 循环并在底部休眠：

```
<?php

while (someCondition) {
    //Get Data and show.
    sleep(5);
}

?> 
```

您也可以在需要时写入一些内容以设置`someCondition`为 false 以停止该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:19:52.653

使用阿贾克斯。在这种情况下，我使用了 mootools。

```
var that = this;
var req = new Request.HTML({
        method: that.ajax.method,
        url: that.ajax.url,
        data: {'action' : 'update', 'waiterID': x},
        onRequest: function(){ /* do something */},
        onComplete: function(){ /* do something */}
        }).send(); 
```

# android - 更新Android App后如何通知用户用户数据是否会被删除？

> ID：13726355
> 
> 赞同：2
> 
> 时间：2012-12-05T15:15:52.047
> 
> 标签：android, user-data

我目前正在开发一个 Android 更新版本，但是每次我用新版本覆盖之前的版本时，都会提示“您正在安装的应用程序将替换另一个应用程序。所有以前的用户数据都将被保存。” 但问题是我需要的是在更新到新用户数据时删除以前的用户数据。有没有办法将警告文本替换为一些告诉用户他的用户数据将被删除的文本？或者，如果发布设置中有一个选项可以使用删除/安装方法而不是覆盖它？

# c++ - Visual Studio + CMake 的 GLOB_RECURSE

> ID：13726358
> 
> 赞同：1
> 
> 时间：2012-12-05T15:16:02.727
> 
> 标签：c++, visual-studio-2010, include, cmake

我正在浏览一个项目，它的 src 目录类似于：

```
src/
|-- A.cpp
|-- dir/
|-- |-- B.h
|-- |-- B.cpp 
```

在 A.cpp 中，它们包括 Bh：

```
// In A.cpp:
#include "B.h" 
```

在使用 CMake 生成的 Visual Studio 2010 解决方案中，它编译得很好，并且不存在冲突。但是，如果我创建一个新项目（不是来自 CMake，而是手动）并按上述方式进行包含，VS 将找不到 BhIe：

```
// In A.cpp (non-CMake project version)
#include "B.h" // Error: File not found (VS does not search the
               //sub-directory when name is surrounded by "").
#include "dir/B.h" // Works: sub-directory specified. 
```

CMake 文件使用 GLOB_RECURSE （我认为这是上述工作的原因，如果我错了，请纠正我），并简化它看起来像这样：

```
cmake_minimum_required (VERSION 2.6)

project (cmake_test)

file(GLOB_RECURSE lib_SRCS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} *.cpp *.h)

include_directories(
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}/dir
)

add_library(lib STATIC
  ${lib_SRCS}
)

target_link_libraries(lib) 
```

我一直在研究 CMake 生成的解决方案与我手动创建的解决方案的区别，但我似乎找不到它。

换句话说，我的问题是，我如何在不使用 CMake 显示生成的解决方案中包含的相对路径的情况下让 VS 找到我的 Bh，而无需实际使用 CMake（例如通过我的 Visual Studio 项目中的某些选项或配置）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:21:22.630

使它工作的部分是

```
include_directories(
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}/dir
) 
```

您的`dir/`目录被添加到包含目录中。在 Visual Studio 中，您需要转到项目属性`C/C++->General->Additional Include Directories`并添加`dir/`.

# php - 函数 isLogged() 中的 PrestaShop 致命错误

> ID：13726363
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:16:18.163
> 
> 标签：php, html, mysql, cookies, prestashop

好吧，我正在开发一个带有复制中心系统的基于 CMS 的表单（[这是表单](http://www.papelariaveloso.com/content/8-C%C3%B3pias)），但我需要 $cookie->id_customer。但我得到一个错误：

致命错误：在第 13 行的 /home/papelari/public_html/modules/mymodule/submit.php 中的非对象上调用成员函数 isLogged()

```
<?php 
/*
 $con = mysql_connect("localhost","papelari","509494218");
 if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

 mysql_select_db("papelari_Veloso", $con); */

 global $cookie;

if(!$cookie->isLogged())
{
 echo 'Please login';
 exit;
}
else
{
 echo 'Hi, ' . $cookie->customer_firstname. ' ' .$cookie->customer_lastname . '<br/>';
 echo 'We contact to you: '. $cookie->email;
}

/* $sql="INSERT INTO ps_copias (id_customer, file, cor, copias, pags, papel, gramagem,       flag) VALUES('$cookie-            >id_customer','$_POST[file]','$_POST[cor]','$_POST[copias]','$_POST[pags]','$_POST[papel]','$_POST[gramagem]', 0)";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "Enviado com sucesso!"; 

mysql_close($con); */
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:31:55.083

你的问题是`$cookie`没有定义。将此粘贴到脚本的开头：

```
<?php
include("../config/config.inc.php");
$cookie = new Cookie("ps");

if ($cookie->isLogged()) {
    // your code
} 
```

您可能必须`config.inc.php`根据自己的脚本调整包含路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:20:49.350

我不确定那`global $cookie`是为了。

确保它`$cookie`是通过使用`var_dump($cookie);`来定义的，以确保变量是您认为的（并包含正确的函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:54:07.563

对于 prestashop 1.5，检查用户是否登录：

```
Context::getContext()>customer>isLogged() 
```

# git - 如何通过给定 SHA1 获取 git 父分支名称

> ID：13726367
> 
> 赞同：0
> 
> 时间：2012-12-05T15:16:32.823
> 
> 标签：git

作为标题，例如：合并的提交“M”
我可以得到两个父级的分支名称`'M'`吗？了解“M”来自`master`和`debug`分支是很有用的。

```
A->B->C->M->E(master)
 \>X->Y/     (debug) 
```

谢谢彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:23:51.587

这就是你要找的吗？

```
git branch --contains=abcd 
```

# mysql - 如何更改 mysql 中表的排序规则？

> ID：13726368
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:16:36.003
> 
> 标签：mysql, phpmyadmin

我有一个问题，我从数据库中导出了表，有两个表名`el_gAnnouncement`和另一个表`el_gannouncement`

当我尝试将表导入数据库时​​，phpmyadmin 出现错误

> SQL查询：
> 
> -- -- 转储表数据`el_gAnnouncement`-- INSERT INTO `el_gAnnouncement`( `gAnn_id`, `gAnn_text`, `gAnn_order`, `gAnn_status`, `gAnn_date`,`gAnn_expiration`) VALUES (4, 0x4575726f4c696e676f2070617274696369706174657320696e204c6f63616c697a6174696f6e20576f726c6420436f6e666572656e636520323031302e, 1, 'Yes', '2011-04-04 09:51:42', '0000-00-00'), (5, 0x4575726f4c696e676f5c277320526570726573656e74617469766520696e2054656b6f6d20323031303a205c2254656b6f6d2032303130207761732061207375636365737366756c20657870657269656e636520666f72204575726f4c696e676f5c22, 1, 'Yes', '2010-12 -29 02:36:42', '0000-00-00'), (6, 0x4575726f4c696e676f20657870616e6473206974732072616e6b73206f662050726f6a656374204d616e61676572732c206163636f7264696e6720746f20746865206f6e676f696e6720657870616e73696f6e20706c616e2e, 2, 'Yes', '2010-12-29 02:37:09', '0000-00-00') , (7,0x4575726f4c696e676f20696e74726f6475636573206d6f7265206c616e677561676520706169727320746f20697473206c697374206f66206c616e67756167652070616972732e, 3, 'Ye[...]
> 
> MySQL 说：
> 
> # 1062 - 键 'PRIMARY' 的重复条目 '4'

我该如何解决这个问题..我认为可能是我的本地主机中的表排序规则的问题......这两个表在服务器上，排序规则没有问题`latin1_swedish_ci`

导入表格的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:31:38.130

这不是错误所说的。这是说您的主键中已经有一个值“4”。我不知道使用错误的字符代码会如何导致这种情况。如果事实上我没有看到任何实际上会受到不正确字符代码影响的数据。问题是您试图将值 4 插入 gAnn_id 但该值已经存在。您需要检查 mysql 转储中是否存在重复的 gAnn_ids 甚至重复的插入行。您在 phpmyadmin 中使用了哪些选项进行导出？您要插入的表是空的吗？如果没有，那可能是你的问题。修复它在没有 gAnn_id 列的情况下导出，并让新数据库根据自动增量分配一个新数据库。如果您需要保持 id 相同，则目标数据库上的当前 id 必须更改或新 id 必须更改。任你选。

如果您仍然想了解更改排序规则。查看 Mysql 手册。

[http://dev.mysql.com/doc/refman/5.1/en/charset-table.html](http://dev.mysql.com/doc/refman/5.1/en/charset-table.html)

# c# - ASP.NET 网站上的错误。连接超时

> ID：13726369
> 
> 赞同：1
> 
> 时间：2012-12-05T15:16:35.573
> 
> 标签：c#, asp.net, networking, connection, database-connection

我的几个网站突然出现了这个错误，我不确定问题是什么。这些网站已经运行 2 年多了，这是我第一次看到这个错误。

“连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应 XX.XX.XXX.XXX:80”

堆栈跟踪如下。

```
[SocketException (0x274c): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond XX.XX.XXX.XXX:80]
   System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) +239
   System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) +35
   System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) +224

[WebException: Unable to connect to the remote server]
   System.Net.HttpWebRequest.GetRequestStream(TransportContext& context) +1867457
   System.Net.HttpWebRequest.GetRequestStream() +13
   Controls_IpConfigInner.stripConfig(String strClientIp) +136
   Controls_IpConfigInner.Page_Load(Object sender, EventArgs e) +86
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

跟踪告诉我它与套接字有关，但没有套接字编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:22:11.177

您没有直接使用套接字，而是发出了一个在内部使用套接字的远程 Web 请求，因为这是在大多数平台上进行网络连接的方式。由于存在网络问题，您最终会看到套接字异常。

该错误转换为“我无法打开与远程服务器的连接。请检查地址，确保它正在侦听适当的端口并确保我们没有防火墙。”

# jqgrid - Jquery Grid Multigrouping中多级标题的复选框

> ID：13726370
> 
> 赞同：0
> 
> 时间：2012-12-05T15:16:36.993
> 
> 标签：jqgrid, checkbox, grouping

我正在使用 jquery 网格版本 4.4.1 。我使用了**multiselect: true**选项来启用所有行的复选框。我还使用 2 级分组，即按 2 个字段分组。但我没有得到那些分组标题的复选框。只有我的实际记录得到复选框。请帮助我知道是否有任何方法可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:22:45.253

```
<code> grouping: true,
 groupingView : { groupField : ['moduleName', 'subModuleName'],
 groupColumnShow : [false, false], 
 groupText : ["<b>{0} </b>","<b>{0} </b>"],
 groupCollapse : true, 
 groupOrder: ['asc', 'asc'], 
 The groupText : field 
</code> 
```

# api - 用于矢量化数值计算的最佳 Scala 集合类型

> ID：13726378
> 
> 赞同：5
> 
> 时间：2012-12-05T15:17:01.813
> 
> 标签：api, scala, scala-collections, numerical-computing

`IndexedSeq[Double]`在设计特定领域的数值计算库时寻找要使用的正确数据类型（例如）。对于这个问题，我将范围限制为使用`Double`. 该库将定义一个数字函数，这些函数通常应用于一维数组中的每个元素。

**注意事项：**

*   首选不可变数据类型，例如`Vector`或`IndexedSeq`
*   想要最小化数据转换
*   在空间和时间上合理高效
*   对使用图书馆的其他人友好
*   优雅干净的 API

我应该使用集合层次结构更高的东西，例如`Seq`？

还是只定义单元素函数并将映射/迭代留给最终用户更好？

这似乎效率较低（因为每组调用一次可以完成一些计算），但同时是一个更灵活的 API，因为它适用于任何类型的集合。

有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T16:24:17.460

如果您的计算要执行任何远程计算密集型的操作，请使用`Array`raw 或包装在您自己的类中。您可以提供与集合兼容的包装器，但将其作为显式包装器仅用于互操作性。除此以外的所有东西`Array`都是通用的，因此是盒装的，因此相对缓慢和笨重。

如果您不使用`Array`，人们将被迫放弃您拥有的任何东西，而只`Array`在性能很重要时使用。也许没关系；也许您希望计算在那里是为了方便而不是为了提高效率。在这种情况下，我建议使用`IndexedSeq`for 接口，假设您想让人们知道索引不是非常慢（例如 is not `List`），并`Vector`在后台使用。对于大多数省力的操作（例如乘法），您将使用大约 4 倍的内存`Array[Double]`，并且速度会慢 3-10 倍。

例如，这个：

```
val u = v.map(1.0 / _)   //  v is Vector[Double] 
```

比这慢大约三倍：

```
val u = new Array[Double](v.length)
var j = 0
while (j<u.length) {
  u(j) = 1.0/v(j)      // v is Array[Double]
  j += 1
} 
```

如果你使用`map`方法 on `Array`，它和方法一样慢`Vector[Double]`；上的操作`Array`是通用的，因此被装箱。（这就是大部分惩罚的来源。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:31:10.590

当我处理数值时，我一直在使用向量，因为它提供了非常有效的随机访问以及附加/前置。

另请注意，不可变索引序列的当前默认集合是 Vector，因此如果您编写类似 的代码`for (i <- 0 until n) yield {...}`，它会返回，`IndexedSeq[...]`但运行时类型是 Vector。因此，始终使用向量可能是一个好主意，因为一些将两个序列作为输入的二元运算符可能会受益于两个参数具有相同实现类型的事实。（现在情况并非如此，但有人指出向量连接可能在 log(N) 时间内，而不是当前的线性时间，因为第二个参数被简单地视为一般序列。）

尽管如此，我相信`Seq[Double]`应该已经提供了你需要的大部分功能接口。而且由于 Range 的映射结果不会`Vector`直接产生，所以我通常将`Seq[Double]`参数类型作为我的输入，以便它具有一些通用性。我希望在底层实现中优化效率。

希望有帮助。

# magento-1.7 - 为 Newsletter Subscriber 添加 'subscription_date' 和 'user_ip_address' 字段并在 Magento 的管理面板中显示

> ID：13726381
> 
> 赞同：1
> 
> 时间：2012-12-05T15:17:17.850
> 
> 标签：magento-1.7

我想为客户订阅的日期及其 IP 地址添加两个自定义字段：1）我在“newsletter_subscriber”表中添加了两列。如何做到这一点？

在文件 app/code/core/Mage/Newsletter/Model/Subscriber.php 我找到了如下函数：

```
$this->setSubscriberEmail($email);
$this->setStoreId(Mage::app()->getStore()->getId());
$this->setCustomerId(0); 
```

但我没有找到它的代码。我想我也可以这样保存数据，但怎么可能呢？我必须为 $this->seSubscriptionDate(); 之类的函数定义和声明代码；

以及如何在 Newsletter->Newsletter Subscriber 下的管理面板中显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T14:19:17.660

我没有找到任何人的解决方案或帮助。我敲了敲脑袋，发现解决方案非常简单，希望将来可以通过这篇文章节省一些人的时间：1）在“newsletter_subscriber”表中添加列，在我的例子中是“subscription_date”和“sub_ip_address”2）添加以下两行在文件@两个地方 app\code\core\Mage\Newsletter\Model\Subscriber.php

```
**$this->setSubscriptionDate(date("d-m-Y"));
**$this->setSubIpAddress($_SERVER['REMOTE_ADDR']); 
```

一处：在函数中：public function subscribe($email) 之前：$this->save(); 第二名：在函数中：public function subscribeCustomer($customer) 之前：$this->save(); 现在数据将添加到表中 现在显示在管理面板中 1) 打开文件 app\code\core\Mage\Adminhtml\Block\Newsletter\Subscriber\Grid.php 只需在其中添加两个必需的列

```
$this->addColumn('subscription_date', array(
            'header'    => Mage::helper('newsletter')->__('Subscription Date'),
            'index'     => 'subscription_date',
            'default'   =>    '----'
        ));

        $this->addColumn('sub_ip_address', array(
            'header'    => Mage::helper('newsletter')->__('IP Address'),
            'index'     => 'sub_ip_address',
            'default'   =>    '----'
        )); 
```

现在完成。** 这是我花时间的地方，最后我在命中和试用的基础上添加了这个功能，但它确实有效。来自 Core magento 团队的人请解释为什么这个 {setSubscriptionDate()} 函数有效？我没有宣布任何人的这个功能。似乎它显示了智能感知来检测表字段？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T10:14:37.670

我也有类似的问题。但是，就我而言，我应该在时事通讯表格中添加“国家”和“性别”字段。所以，在深入挖掘核心几个小时后，我发现了这一点。下面是解释：

在**app/design/frontend//default/template/newsletter/subscribe.phtml**中，表单的操作字段中有 getFormActionUrl() ?>。这是指 app/code/core/Mage/Newsletter/Block/Subscribe.php

subscirbe.phtml 文件中使用的$this 对象引用了这个类（即Mage_Newsletter_Block_Subscribe），因此subscribe.phtml 文件中的**$this->getFormActionUrl()**引用了这个类的函数**getFormActionUrl()**。

现在，这个 getFormActionUrl() 正在返回一个方法 $this->getUrl('newsletter/subscriber/new', array('_secure' => true))，它属于它的父 Mage_Core_Block_Template（我的意思是方法 getURL()）。这部分对我们来说并不重要。

查看传递给 getURL() 函数的参数是**newsletter/subscriber/new** 第一部分“newsletter”是模块名称（app/code/code/Mage/newsletter），第二部分“subscriber”是控制器名称（ app/code/code/Mage/newsletter/controllers/SubscriberController），第三部分“new”是控制器SubscriberController中的newAction方法。

控制器名称以**Controller**为后缀，函数名称以**Action**为后缀。（感谢 Phalcon 框架帮助理解这一点）

现在在 newAction() 方法中，您可以看到默认情况下，只有电子邮件被发布为
$email = (string) $this->getRequest()->getPost('email');

我所做的是，我克隆了名为 custom-newsletter.phtml 的 subscribe.phtml 模板，并添加了两个名为“country”和“gender”的字段。然后在 newAction() 中添加以下行：

```
 $country            = (string) $this->getRequest()->getPost('country');
        $gender             = (string) $this->getRequest()->getPost('gender'); 
```

现在在 SubscriberController 的第 67 行（在 newAction() 方法内）有一段代码：

```
$status = Mage::getModel('newsletter/subscriber')->subscribe($email); 
```

这一行正在调用 app/code/code/Mage/newsletter/Model/Subscriber.php 的**subscribe**方法，并将从时事通讯表单中发布的 $email 传递给它。我将这一行修改为：

$status = Mage::getModel('newsletter/subscriber')->subscribe($email,$country,$gender);

现在，我必须编辑 app/code/code/Mage/newsletter/Model/Subscriber.php

当我们谈论模型时，我们谈论的是模型所引用的数据库表。模型名称为 Subscriber，属于模块 Newsletter，因此该模型影响的数据库表为**newsletter_subscriber**

**从这部分@Hassan Ali Sshahzad 的问题将得到回答。**

我在那里添加了两个新列，名称为：subscriber_country 和subscriber_gender。现在，Magento 的系统自动为这些列提供了一个 getter 和一个 setter 函数，名称如下：

函数 getSubscriberCountry(){} 函数 setSubscriberCountry($country_name){}

所以，我在模型中要做的就是：

1.  将方法 subscribe($email) 编辑为 subscribe($email,$country,$gender)
2.  在 try 语句之前的 subscribe($email,$country,$gender) 函数中添加以下代码，如下所示：

    ```
    $this->setSubscriberCountry($country);
    $this->setSubscriberGender($gender); 
    ```

尝试{ $this->save()

* * *

Hassan 的方法在我理解 Magento 的 MVC 方面发挥了关键作用，因此它从我身边回归。

# list - Prolog：获取两个元素的列表，当且仅当第一个元素与第二个元素相同时返回true

> ID：13726382
> 
> 赞同：0
> 
> 时间：2012-12-05T15:17:18.507
> 
> 标签：list, prolog, duplicates

我是一个新手 prolog 程序员，对于一个任务，我必须有一个基本程序，当且仅当列表 X 是两个元素的列表时成功，第一个元素与第二个元素相同。

从我的序言来看，程序似乎很小，所以我输入了这个：

```
firstPair(x,x). 
```

当我在 swipl 下运行它时，我得到这个作为输出：

```
Syntax error: Operator expected 
```

还有什么需要做的吗？我想如果我执行这个，比如 firstPair(1,2)。这就是它需要知道它是假的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:20:09.243

首先，小写字母`x`不是一个变量，它是一个*原子*。大写`x`以解决问题：

```
firstPair(X,X). 
```

其次，您不要将其输入到解释器中。相反，您将它写入一个文件`firstPair.pl`，然后将该文件读入 Prolog。

在命令提示符下，键入：

```
['firstPair.pl']. 
```

按回车。现在你可以使用你的`firstPair/2`规则了。

最后，由于作业谈到列表，我认为导师希望你写`firstPair/1`，而不是`firstPair/2`：

```
firstPair([X,X]). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:15:49.710

你的程序/事实

```
firstPair(X,X). 
```

如果给定的两个参数可以*统一*，则将成功，无论它们是列表、原子、变量等。为了满足您的规范，a

> 程序成功当且仅当列表 X 是两个元素的列表，第一个元素与第二个元素相同。

你需要这样的东西：

```
list_of_two_elements( [X,X] ). 
```

如果传递的单个*术语*是（或可以统一的）两个元素的列表，这将成功，这两个元素是相同的，或者可以通过统一形成。例如，以下所有操作都会成功：

*   `list_of_two_elements( X ).`

    成功后，该变量`X`将与包含相同未绑定变量的两个元素的列表统一，例如`[V1,V1]`.

*   `list_of_two_elements( [1,1] ).`

*   `list_of-two_elements( [1,X] ).`（成功时，`X`这里将与整数统一`1`。）

# database-design - 基于项目可用性的多对多树的最佳数据库数据结构

> ID：13726383
> 
> 赞同：1
> 
> 时间：2012-12-05T15:17:20.597
> 
> 标签：database-design, tree, hierarchical-data

我目前正在开发一个基于 MySQL 的网站，但如果需要（如 CTE 左右）切换到另一个数据库不是问题。

我正在寻找最好的数据库数据结构（如果可能的话，还有一些 SQL 片段）来处理我当前的项目，如下所示：

*   一个产品可以由其他产品组成（递归地），因此产品必须以面向树的架构设计。
*   一个产品可以用于制造许多产品。这就是像嵌套集架构这样的东西不起作用的地方，因为一个节点可以是许多节点的子节点和父节点，这似乎使用 NestedSet 是不可能的。
*   一种产品每天都有可用的数量，但前提是它是“叶子”（它不是由其他产品制成的）。否则，它的数量将取决于其直接子代的数量（依此类推，直到递归到达叶子）。所以产品可以链接到一个表“availability”，其中包含“product_id”、“date”和“quantity”。

产品的“树”结构相当稳定，因此更新/插入/删除查询的速度并不重要。

最终目标是能够在 SELECT 查询中尽可能快地检索指定的两个日期之间可用的所有产品的列表。

这意味着：

*   1) 如果产品不是由其他产品制成，则在两个日期之间的每一天数量 > 0 时可用。
*   2) 如果产品是由其他产品制成的，则只有当 (1) 对其所有子产品都成立时，它才可用。如果直接子节点不是“叶子”，则它们将没有数量，因此（2）的递归将发生，直到它到达最后的叶子。

顺便说一句，在真实案例中，我的产品的深度永远不会超过 5 级。将所有父 ID 存储在单独的列中可能是一个好（但非常丑陋）的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T18:35:33.147

您描述的数据结构*不是*一[棵树](http://en.wikipedia.org/wiki/Tree_(data_structure))（它要求每个节点都只有一个父节点，除了没有父节点的根节点）：相反，它是一个更一般的[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)：

![有向无环图](../Images/d0b9669d679c30356dbfd375583091eb.png)

其他 RDBMS 原生支持分层数据和递归查询，而 MySQL 没有；相反，在 MySQL 中存储此类数据的一个很好的通用关系模型是创建一个图的[传递闭包](http://en.wikipedia.org/wiki/Transitive_closure)表。用作`//`语句分隔符：

```
CREATE TABLE Products (
  SKU         SERIAL                COMMENT 'Stock-Keeping Unit code',
  Name        VARCHAR(15)           COMMENT 'Product name',
  Description VARCHAR(255)          COMMENT 'Descriptive text',
  Price       DECIMAL(6,2)          COMMENT 'Selling price',
  isAtomic    BOOLEAN DEFAULT FALSE COMMENT 'Flag indicating atomicity'
)
  ENGINE  = InnoDB,
  COMMENT = 'Properties relating to each product'
//

CREATE TABLE ProductComponents (
  SKU          BIGINT UNSIGNED NOT NULL COMMENT 'Stock-Keeping Unit Code',
  ComponentSKU BIGINT UNSIGNED NOT NULL COMMENT 'SKU of comprised component',
  PRIMARY KEY (SKU, ComponentSKU),
  INDEX       (ComponentSKU, SKU),
  FOREIGN KEY (         SKU) REFERENCES Products (SKU),
  FOREIGN KEY (ComponentSKU) REFERENCES Products (SKU)
)
  ENGINE  = InnoDB,
  COMMENT = 'Transitive closure of the product DAG'
// 
```

可以使用[触发器](http://dev.mysql.com/doc/en/triggers.html)在后一个表中强制执行原子性：

```
CREATE TRIGGER ins_atomic BEFORE INSERT ON ProductComponents
FOR EACH ROW IF
  NEW.SKU <> NEW.ComponentSKU
  AND (SELECT isAtomic FROM Products WHERE SKU = NEW.SKU)
THEN
  SIGNAL SQLSTATE '45000' SET
    MESSAGE_TEXT = 'Atomic product cannot have a component'
  ;
END IF//

CREATE TRIGGER upd_atomic BEFORE UPDATE ON ProductComponents
FOR EACH ROW IF
  NEW.SKU <> NEW.ComponentSKU
  AND (SELECT isAtomic FROM Products WHERE SKU = NEW.SKU)
THEN
  SIGNAL SQLSTATE '45000' SET
    MESSAGE_TEXT = 'Atomic product cannot have a component'
  ;
END IF// 
```

您可能还需要一个类似的触发器来防止错误更新`Products.isAtomic`：

```
CREATE TRIGGER upd_prod BEFORE UPDATE ON Products
FOR EACH ROW IF NEW.isAtomic AND EXISTS (
  SELECT * FROM ProductComponents WHERE SKU <> ComponentSKU AND SKU = NEW.SKU
) THEN
  SIGNAL SQLSTATE '45000' SET
    MESSAGE_TEXT = 'Atomic product cannot have a component'
  ;
END IF// 
```

对于上面描述的图表，您的数据将如下所示：

```
INSERT INTO Products
  (SKU, isAtomic)
VALUES
  (  2, TRUE    ),
  (  3, FALSE   ),
  (  5, FALSE   ),
  (  7, FALSE   ),
  (  8, FALSE   ),
  (  9, TRUE    ),
  ( 10, TRUE    ),
  ( 11, FALSE   )
//

INSERT INTO ProductComponents
  (SKU, ComponentSKU)
VALUES
  (2,2),
  (3,3),   (3,8),   (3,9),   (3,10),
  (5,5),   (5,11),  (5,2),   (5,9),   (5,10),
  (7,7),   (7,8),   (7,9),   (7,11),  (7,2),   (7,10),
  (8,8),   (8,9),
  (9,9),
  (10,10),
  (11,11), (11,2),  (11,9),  (11,10)
// 
```

然后您可以按如下方式存储可用性：

```
CREATE TABLE ProductAvailability (
  SKU      BIGINT UNSIGNED NOT NULL COMMENT 'Stock-Keeping Unit Code',
  Date     DATE                     COMMENT 'Availability date',
  Quantity INT                      COMMENT 'Available quantity',
  PRIMARY KEY (SKU, Date),
  FOREIGN KEY (SKU) REFERENCES Products (SKU)
)
  ENGINE  = InnoDB,
  COMMENT = 'Available quantities'
// 
```

以上的一些测试数据可能是：

```
INSERT INTO ProductAvailability
  (SKU, Date        , Quantity)
VALUES
  (  2, '2012-12-13',     NULL),
  (  2, '2012-12-15',       15),
  (  9, '2012-12-13',      234),
  (  9, '2012-12-14',       46),
  (  9, '2012-12-15',        0),
  ( 10, '2012-12-13',        4),
  ( 10, '2012-12-14',        7),
  ( 10, '2012-12-15',        5)
// 
```

您的查询将是：

```
SELECT   p.*
FROM     Products p
    JOIN ProductComponents c USING (SKU)
    JOIN (
           SELECT   p.SKU AS ComponentSKU,
                    COUNT(*) = DATEDIFF(@end_date, @start_date) + 1 AS available
           FROM     Products p LEFT JOIN ProductAvailability a
                 ON a.SKU = p.SKU
                AND a.Quantity > 0
                AND a.Date BETWEEN @start_date AND @end_date
           WHERE    p.isAtomic
           GROUP BY p.SKU
         ) q USING (ComponentSKU)
GROUP BY p.SKU
HAVING   NOT SUM(q.available = 0) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/35852/1)上查看。

# java - 在 2dArray 中组合重复的行，同时保持那些没有任何重复的行

> ID：13726384
> 
> 赞同：0
> 
> 时间：2012-12-05T15:17:21.033
> 
> 标签：java, null, multidimensional-array

我在 s 的二维数组中有数据`Object`。我正在寻找一种结合重复数据的算法，但我的算法丢失了重复数据。此外，它将所有行保留在顶部，因此，我的数据是：

> ECE 201 电气和计算机工程 I 2.6666666666666665
> 
> 生物 101 生物学 I 2.0
> 
> CS 101 计算机科学 I 3.5
> 
> AE 101 航空航天工程 I 2.5
> 
> BE 101 生物医学工程 I 2.0
> 
> CS 101 计算机科学 I 2.0
> 
> CS 102 计算机科学 II 3.0
> 
> BE 100 介绍生物医学工程 3.6
> 
> ECE 200 介绍电气和计算机工程 3.5
> 
> BIO 100 介绍生物学 2.2
> 
> CS 101 计算机科学 I 3.75
> 
> AE 101 航空航天工程 I 1.6666666666666667
> 
> BE 100 介绍生物医学工程 1.2

但它充满了`null`s。我使用以下算法：

```
for (int i = 0; i< finalData.length; i++)
{
  if (finalData[i][1] != null)
  {
    String first = (String)finalData[i][1];
    for (int j = i; j< finalData.length; j++)
    {
      if (finalData[j][1]!= null)
      {
        String second = (String)finalData[j][1];
        if (first.equals(second))
        {
          double one = (double)finalData[i][6];
          double two = (double)finalData[i][6];
          finalData[i][7] = (one + two)/2;
          System.out.println("found!\t" + first + "\t" + second + "\t" +  finalData[i][7]);
        }
      }
    }
  }
} 
```

我的数据变成：

> 成立！欧洲经委会 201 欧洲经委会 201 2.6666666666666665
> 
> 成立！生物 101 生物 101 2.0
> 
> 成立！CS 101 CS 101 3.5
> 
> 成立！CS 101 CS 101 3.5
> 
> 成立！CS 101 CS 101 3.5
> 
> 成立！自动曝光 101 自动曝光 101 2.5
> 
> 成立！自动曝光 101 自动曝光 101 2.5
> 
> 成立！BE 101 BE 101 2.0
> 
> 成立！CS 101 CS 101 2.0
> 
> 成立！CS 101 CS 101 2.0
> 
> 成立！CS 102 CS 102 3.0
> 
> 成立！BE 100 BE 100 3.6
> 
> 成立！BE 100 BE 100 3.6
> 
> 成立！欧洲经委会 200 欧洲经委会 200 3.5
> 
> 成立！生物 100 生物 100 2.2
> 
> 成立！CS 101 CS 101 3.75
> 
> 成立！AE 101 AE 101 1.6666666666666667
> 
> 成立！BE 100 BE 100 1.2

//找到了！只是为了确保它是正确的输出。

如何改进此算法以产生所需的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:21:14.577

您可以使用集合或哈希表，而不是编写算法。

套装是您更好的选择；他们不允许重复。您可以在此处阅读有关它们的更多信息：http: [//docs.oracle.com/javase/tutorial/collections/interfaces/set.html](http://docs.oracle.com/javase/tutorial/collections/interfaces/set.html)

哈希表是一种实现集合的方式。要使用这些，您需要编写一个散列函数将您的数据转换为散列键​​，然后您将使用该键对表进行索引并将未散列的值存储在那里。

# macos - 如何将配置指向 icu 的正确路径

> ID：13726386
> 
> 赞同：0
> 
> 时间：2012-12-05T15:17:20.783
> 
> 标签：macos, configuration, terminal, icu

我特别是 mac 和终端的新手，所以这可能是一个愚蠢的问题。我正在尝试在 mysrc/myfreeling 中运行 ./configure 以便我可以安装 freeling 但我收到此错误：

检查 -licuuc 中的 main ... 否

未找到 Unicode ICU 库。
确保 libicu 已
安装并且可以在标准路径中找到。
您可能需要设置 LDFLAGS 来指定搜索路径。

现在，当我执行“端口安装”时，它显示：

icu @49.1.2_0 (active)

所以我知道我有 icu。所以我尝试了 env LDFLAGS="-L/opt/local/lib" 和 env LDFLAGS="-L/opt/local/lib/icu" 这是 icu 文件夹所在的位置，但我仍然得到同样的错误。如何告诉配置如何访问 icu？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:40:42.357

好的，我得到它的工作。我已经用 MacPorts 安装了 icu。我刚去手动安装，现在可以正常工作了。我不确定为什么/如何解决这个问题，并且很想知道是否有人有任何见解。

# windows - 无法再访问 Windows 2000 UNC 路径

> ID：13726392
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:17:38.147
> 
> 标签：windows, unc

很长一段时间以来，我们都可以使用这种方法访问我们的 Windows 2000 服务器：

\10.0.0.18\d$（在 winexplorer 中输入）...在这里我们输入一个管理员用户名/密码并获得访问权限..

但是突然之间，我们无法再访问它。我检查了服务器上的用户，他们没有被锁定或任何东西。我已经尝试重新启动服务器，但它没有帮助。

服务器上的事件查看器给出 2 eventid 529s：登录失败：原因：未知用户名或密码错误

和登录帐户：管理员：MICROSOFT_AUTHENTICATION_PACKAGE_V1_0 从工作站：blabla 失败。错误代码是：3221225578

*   我检查了错误代码，这意味着用户不存在..奇怪！:-(

...我不明白为什么会这样说——即使我为这个场合创建了一个新用户，它就是这样说的。就像服务器找不到任何用户一样。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:09:05.787

似乎是因为服务器上的时钟......这篇文章帮助了我：

[https://serverfault.com/questions/249434/access-denied-error-3221225578-with-file-sharing-to-windows-server](https://serverfault.com/questions/249434/access-denied-error-3221225578-with-file-sharing-to-windows-server)

# python - Python 和协议缓冲区：如何从重复的消息字段中删除元素

> ID：13726394
> 
> 赞同：2
> 
> 时间：2012-12-05T15:17:39.937
> 
> 标签：python, protocol-buffers

根据协议缓冲区[python 生成的代码文档](https://developers.google.com/protocol-buffers/docs/reference/python-generated)，我可以通过这种方式将对象添加到重复的消息字段中：

```
foo = Foo()
bar = foo.bars.add()        # Adds a Bar then modify
bar.i = 15
foo.bars.add().i = 32       # Adds and modify at the same time 
```

但：

1.  我怎样才能从中`bar`删除`bars`？

2.  如何从中删除`n-th`bar 元素`bars`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:34:28.010

我花了几分钟才正确安装了 proto buffer 编译器，所以这可能足以忽略这一点:)

虽然它不在文档中，但您实际上可以像对待普通列表一样对待重复字段。除了它的私有方法之外，它还支持`add`,和`extend`,并且是您在第一种情况下要寻找的：`remove``sort``remove`

```
foo.bars.remove(bar) 
```

`foo`这是在上述行之前（由上面的代码定义）和之后打印时的输出：

> ```
> Original foo:
> bars {
>   i: 15
> }
> bars {
>   i: 32
> }
> 
> foo without bar:
> bars {
>   i: 32
> } 
> ```

至于删除`nth`元素，可以使用`del`和要删除的索引位置：

```
# Delete the second element
del foo.bars[1] 
```

和输出：

> ```
> Original foo:
> bars {
>   i: 15
> }
> bars {
>   i: 32
> }
> 
> Removing index position 1:
> bars {
>   i: 15
> } 
> ```

希望有帮助！

# disqus - Disqus 评论字数限制

> ID：13726398
> 
> 赞同：0
> 
> 时间：2012-12-05T15:17:52.360
> 
> 标签：disqus

有没有办法限制使用 Disqus 的评论的字符数？

我想将评论字符限制限制为 500 个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:42:55.407

目前没有办法限制 Disqus 评论中的字符。您可以查看我们的[博客](http://blog.disqus.com/)以领先于新功能（我们是否应该引入此功能），并在评论中留下经过深思熟虑的建议。

# javascript - 在 D3 中添加 SVG 元素

> ID：13726399
> 
> 赞同：1
> 
> 时间：2012-12-05T15:18:08.250
> 
> 标签：javascript, d3.js

浏览 D3.js 教程，我看到了两种不同的约定，我不确定有什么区别，因为它们都产生相同的代码：

1)

```
var chart = d3.select("body")
              .append("svg:svg")  
              .attr("class", "chart")
              .attr("width", w * data.length - 1)
              .attr("height", h);

    chart.selectAll("rect")
        .data(data)
        .enter().append("svg:rect") 
```

2)

```
var chart = d3.select("body")
              .append("svg")  
              .attr("class", "chart")
              .attr("width", w * data.length - 1)
              .attr("height", h);

    chart.selectAll("rect")
        .data(data)
        .enter().append("rect") 
```

有人可以解释 append("svg") 和 append("svg:svg") 之间的区别以及为什么我会使用其中一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:38:21.350

该`svg:`部分指定它之后的元素的名称空间，即名称空间中的`svg`元素`svg`。建议在旧版本的 d3 中指定这一点，否则可能会被错误地解释，但在最近的版本中没有必要这样做。

# android-ndk - 通过回调使用 Android NDK 进行磁力计采样

> ID：13726403
> 
> 赞同：1
> 
> 时间：2012-12-05T15:18:14.333
> 
> 标签：android-ndk

我一直在使用 NDK API 通过回调函数从磁力计​​获取样本。根据文档，即头文件`sensor.h`和`looper.h`，我只需要创建一个事件队列并将回调函数作为参数传递。

```
 /*
     * Creates a new sensor event queue and associate it with a looper.
     */
    ASensorEventQueue* ASensorManager_createEventQueue(ASensorManager* manager,
            ALooper* looper, int ident, ALooper_callbackFunc callback, void* data); 
```

创建队列并启用传感器后，会发生回调，并且我可以在触发事件时检索样本。到现在为止还挺好。问题是，当我从 Java 调用进行正确初始化的本机函数时，我想从初始化函数中访问检索到的样本（考虑 N 个样本）。同样，根据 API，如果返回 1 并且返回 0 以停止回调，则回调总是发生。

```
 /**
     * For callback-based event loops, this is the prototype of the function
     * that is called.  It is given the file descriptor it is associated with,
     * a bitmask of the poll events that were triggered (typically ALOOPER_EVENT_INPUT),
     * and the data pointer that was originally supplied.
     *
     * Implementations should return 1 to continue receiving callbacks, or 0
     * to have this file descriptor and callback unregistered from the looper.
     */
    typedef int (*ALooper_callbackFunc)(int fd, int events, void* data); 
```

问题是我无法弄清楚这些回调是如何工作的。我的意思是，在初始化事件队列之后，回调以正确的方式发生，似乎没有办法在返回 0 后从回调函数外部访问检索到的样本。事实上，回调函数显然循环到 0被退回。有没有办法做到这一点？这个回调函数究竟是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:52:11.570

这是我提出的一个愚蠢的问题。显然，声明一个静态数组（无论是否为全局数组）来保存数据确实是诀窍。然后，收集N个样本后，只需将数组通过回调函数内部的JNI传递给Java即可。

# jquery - 如何在图像点击时调用jquery函数

> ID：13726404
> 
> 赞同：1
> 
> 时间：2012-12-05T15:18:16.067
> 
> 标签：jquery

我的 JSP 页面中有一张图片。我需要在单击该图像时调用 jquery 函数。请帮我 ！！

JSP 页面的样子，

```
<html>
    <body>
        <input type="image" id="closeAuction" value="Close Auction" align="right" src="images/close_auction.png" onclick="return endAuction();" disabled / > 
    </body>
</html> 
```

我在脚本标签中的 jquery 函数看起来像，

```
<script src="JS/jquery-1.3.2.min.js">
    $(document).ready(function() {     
        $('#closeAuction').click(function() {
            location.reload();     
        });    
    });
</script> 
```

但是剧本不行！！任何人都可以帮助在图像点击上调用函数..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:19:07.197

你错过了一个报价..`$('#closeAuction')`

更改`$('#closeAuction)`为`$('#closeAuction')`

您还需要将其放入新脚本中

```
<script src="JS/jquery-1.3.2.min.js"></script>
<script type="text/javascript"> //Added new `<script>` tag
   $(document).ready(function() {
     //added missing-v quotes 
     $('#closeAuction').click(function() {
        location.reload();     
     });    
   });    
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:19:01.510

您缺少结束引号，您还需要将代码放在它自己的脚本块中。尝试这个：

```
<script src="JS/jquery-1.3.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {     
        $('#closeAuction').click(function() { // <-- note closing quote on selector.
            location.reload();     
        });    
    });
</script> 
```

您使用这种过时版本的 jQuery 是否有特定原因？您应该尝试升级到 1.8.3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:20:41.593

替换`$('#closeAuction)`为`$('#closeAuction')`

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:22:38.303

您不能将代码放在`script`用于加载外部资源的标签内。

```
<script src="JS/jquery-1.3.2.min.js"></script>
<script>
$(document).ready(function() {     
    $('#closeAuction').click(function() {
        location.reload();     
    });    
});
</script> 
```

# javascript - 关闭所有打开的谷歌地图信息框

> ID：13726409
> 
> 赞同：0
> 
> 时间：2012-12-05T15:18:30.740
> 
> 标签：javascript, google-maps, google-maps-api-3, infobox

我已经尝试了一些我在 StackOverflow 上找到的东西，但我对此没有任何运气。我对我的 Javascript 很生疏，所以如果让这项工作变得超级简单，我不会感到惊讶。

我正在为一个网站构建一个谷歌地图系统，并且我正在使用 infoBox 系统，以便我可以更好地控制弹出窗口的视觉风格。我的问题是我只想在任何给定时刻打开一个信息框。因此，只要单击 1 个标记，之前的 infoBox 就会关闭。我知道最好的方法是跟踪要打开的最后一个是什么，但是使用循环来构建所有内容，我不确定如何获取特定 infoBox 的实例名称以使用 close() 函数。

这是我的 Javascript：

```
 var map;
    var markers = new Array();

    // This function builds out the Google Map
    function initialize() {

        // Set the center point of the map to be create
        var mapCenter = new google.maps.LatLng(40.0378755, -76.3055144);

        // Create a map object, and include the MapTypeId to add to the map type control.
        // This is where we specify the UI settings for the map.
        var mapOptions = {
            center: mapCenter,
            zoom: 8,
            disableDefaultUI: false,
            panControl: false,
            zoomControl: true,
            mapTypeControl: true,
            scaleControl: true,
            scaleControlOptions: {position: google.maps.ControlPosition.RIGHT_BOTTOM},
            streetViewControl: false,
            overviewMapControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
        };

        // Draw the map on-screen.
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    };

    // This function creates pins for the map.
    var descriptionBox;
    (function () {

      google.maps.Map.prototype.markers = new Array();

      google.maps.Map.prototype.addMarker = function(marker) {
        this.markers[this.markers.length] = marker;
      };

    })();

    //This function builds the locations and information for the markers and infoboxes
    function showOverlays() {

        //Set data for individual marker
        var a = new Array();
            var t =  new Object();
        t.name = "Alert at this Location"
        t.desc = "Here's a brief description."
        t.lat =  40.3178755
        t.lng =  -75.9155144
        t.icon = "low"
        a[0] = t;

//Set data for individual marker
var t =  new Object();
t.name = "Moderate priority Issue Here."
t.desc = "Read this text."
t.lat =  40.4178755
t.lng =  -75.8155144
t.icon = "mid"
a[1] = t;

//Set data for individual marker
var t =  new Object();
t.name = "HIGH PRIORITY!"
t.desc = "This is some text"
t.lat =  40.5178755
t.lng =  -75.4155144
t.icon = "high"
a[2] = t;

//Set data for individual marker
var t =  new Object();
t.name = "Another Mid Alert"
t.desc = "Description would go here. This is a longer description to show how it would be handled."
t.lat =  39.4178755
t.lng =  -77.4155144
t.icon = "mid"
a[3] = t;

//Set data for individual marker
var t =  new Object();
t.name = "ALERT!!! READ ME!"
t.desc = "More Text Here"
t.lat =  40.3178755
t.lng =  -76.3155144
t.icon = "high"
a[4] = t;

//Gather the data for each individual marker, and put the data in a usable format.  
for (var i = 0; i < a.length; i++) {
    var latlng = new google.maps.LatLng(a[i].lat, a[i].lng);
    var markerIcon = a[i].icon;
    var heading = a[i].name;
    var description = a[i].desc;
    var infoContent = "<h1>"+heading+"</h1><p>"+description+"</p>";
    map.addMarker(createMarker(a[i].name,latlng,markerIcon,infoContent));
 }

//Builds and places the markers on the map.     
function createMarker(name, latlng, icon, infoContent) {
var marker = new google.maps.Marker({position: latlng, map: map, icon: "images/"+markerIcon+"_icon.png"});
//Create event listener to know when a marker is clicked on.
google.maps.event.addListener(marker, "click", function() {
  var descriptionBox
  descriptionBox = new InfoBox();
  //Settings for the infoBox
  var myOptions = {
            content: infoContent
            ,boxClass: "myInfoBoxStyle"
            ,disableAutoPan: false
            ,maxWidth: 0
            ,pixelOffset: new google.maps.Size(0, 0)
            ,zIndex: null
            ,closeBoxMargin: "2px 2px 2px 2px"
            ,closeBoxURL: "images/close.gif"
            ,infoBoxClearance: new google.maps.Size(1, 1)
            ,isHidden: false
            ,pane: "floatPane"
            ,enableEventPropagation: false
            };
          //Close any open boxes
          descriptionBox.close();
          //Create new infoBox instance
          descriptionBox = new InfoBox(myOptions);
          //Draw infoBox on the map.
          descriptionBox.open(map, marker);
        });
        return marker;
      };
    }; 
```

有一个被点击的按钮调用 showOverlays(); 功能在地图上显示标记。

那么我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T04:53:24.080

试试这个代码...

```
var infowindows = new Array();
var popup = new InfoBox({
  // size: new google.maps.Size(420,130),
    content:content_info
   ,pixelOffset: new google.maps.Size(-200, -241)
   ,disableAutoPan: false
   ,closeBoxMargin: "5px 5px 2px 2px"
   ,boxStyle: {opacity: 0.95
              }

});
infowindows.push(popup); //push all infoboxes to an array

google.maps.event.addListener(marker, 'click', function() {
    close_popups();    //close any infobox open
    map.panTo(mycenter1);
    popup.open(map, marker);

    // currentPopup = null;
  });

function close_popups(){
  for(var i = 0; i<infowindows.length; i++){
    infowindows[i].close();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:49:36.903

我没有使用过信息框。我对 InfoWindow 更熟悉，但我相信它们非常相似。

看起来您正在每个标记单击侦听器中创建一个新的 InfoBox：

```
var descriptionBox;
descriptionBox = new InfoBox(); 
```

相反，在单击侦听器之外声明 InfoBox：

```
var infoBox= new google.maps.InfoBox({ content: 'hello world' }); 
```

并在点击监听器中引用它：

```
google.maps.event.addListener(marker, "click", function() {
    infoBox.open(map, this);
    ... 
```

请参阅[此处](https://stackoverflow.com/questions/7338349/infobox-with-infowindow-behaviours)了解更多信息...

# android - DownloadManager 在下载后运行 MediaScanner 但不应该

> ID：13726412
> 
> 赞同：2
> 
> 时间：2012-12-05T15:18:37.660
> 
> 标签：android, android-mediascanner, android-download-manager

似乎 MediaScanner 想要扫描我告诉它不要的文件。现在我想知道为什么。

* * *

我的应用程序从我的服务器下载了几个媒体文件，并在稍后通过播放列表显示它们。

为此，该应用程序使用 Android 系统的[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)获取媒体文件。

使用[Request.setDestinationUri()](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationUri%28android.net.Uri%29)，下载将被保存到名为“pending”的[getExternalCacheDir()的子目录中。](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29)

下载完成后，Android DownloadManager 会发送[ACTION_DOWNLOAD_COMPLETE](http://developer.android.com/reference/android/app/DownloadManager.html#ACTION_DOWNLOAD_COMPLETE)广播。然后，我的应用程序的广播侦听器将完成下载并将其从“待处理”文件夹移动到另一个名为“媒体”的文件夹。

所有这些都按预期工作。

但是，系统日志中充满了如下消息：

```
E/BitmapFactory(23779): Unable to decode stream: java.io.FileNotFoundException: /path/to/pending/image.jpg: open failed: ENOENT (No such file or directory)
E/JHEAD (23779): can't open '/path/to/pending/image.jpg'

E/StagefrightMetadataRetriever(25911): Unable to create data source for '/path/to/pending/video.mp4'.
E/MediaScannerJNI(23779): An error occurred while scanning file '/path/to/pending/video.mp4'. 
```

显然，我的应用程序告诉 DownloadManager 将图像/视频下载到“待处理”目录。它按照它的指示执行并发送“我完成下载”广播。我的应用程序接收广播并将完整文件移动到“媒体”目录。片刻之后，MediaScanner（或其他东西）尝试扫描“待处理”文件夹中的已完成文件，并输入系统日志。

现在我想知道：**为什么 MediaScanner 仍然试图读取这些文件？**

* * *

根据 setDestinationUri 的 Android API 文档： “ [MediaScanner](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationUri%28android.net.Uri%29)*不会扫描下载的文件。但可以通过调用 allowScanningByMediaScanner() 使其可扫描。”* 我不调用该方法，因此不应扫描下载的文件。

接下来，我尝试在应用程序的[缓存目录中放置一个空的](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29)[.ignore ，并通过](http://developer.android.com/reference/android/provider/MediaStore.html#MEDIA_IGNORE_FILENAME)[ACTION_MEDIA_SCANNER_SCAN_FILE](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_SCANNER_SCAN_FILE)提醒 MediaScanner .ignore-file 的存在，但错误消息仍然存在。

为了增加神秘感，这些文件不会出现在系统的图库或视频应用程序中，所以是的，媒体扫描仪会忽略它们。但仍然：为什么它在不需要的时候尝试读取它们？是 MediaScanner 还是其他系统服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:15:20.177

> > 接下来，我尝试在应用程序的缓存目录中放置一个空的.ignore，并通过ACTION_MEDIA_SCANNER_SCAN_FILE 提醒MediaScanner .ignore-file 的存在，但错误消息仍然存在。

停止 Mediascanner 的魔法文件不是“.ignore”而是“.nomedia”。
来自 MediaScanner.java：

```
File file = new File(path.substring(0, slashIndex) + ".nomedia");
if (file.exists()) {
   // we have a .nomedia in one of the parent directories
   return true;
} 
```

它没有出现在系统的图库或视频应用程序中的原因可能是因为扫描崩溃（如日志中所示）。

但是，我对媒体扫描仪也有不好的感觉。例如，为什么它不以更直接的方式停止扫描。例如，在 MediaScanner.java 中，而不是

```
public void scanDirectories(String[] directories, String volumeName) {
        [...]
        for (int i = 0; i < directories.length; i++) {
            processDirectory(directories[i], mClient);
        } 
```

它可能是

```
public void scanDirectories(String[] directories, String volumeName) {
        [...]
        for (int i = 0; i < directories.length; i++) {
            if (! isNoMediaPath(directories[i]))
                processDirectory(directories[i], mClient);
        } 
```

但相反，它一次又一次地在 java 代码和 cpp 代码之间来回走动。这是什么原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:47:11.620

看起来“.nomedia”确实不会产生某些人预期的效果的一半。在 MediaScanner.java 中进一步调查后，我会说，这个文件根本不会阻止 MediaScanner 扫描整个树。它仍然为每个文件添加条目到 MediaStore，不管 noMedia 是否设置。

它只是将 MediaStore 中的那些条目标记为“不得显示”。在每个文件上，它都有一个“beginFile”和一个“endFile”。在 endFile 中，它总是以一种或另一种方式执行 mMediaInserter.insert。

令我非常困扰的是这样一个事实，它扫描了所有文件，例如一个已安装的棒，因此冒着陷入病毒的风险（专门为该扫描过程设计）并且没有 .nomedia 文件可以阻止它这样做。

# c# - 将 Excel 工作表插入 SQL Server 数据库

> ID：13726414
> 
> 赞同：0
> 
> 时间：2012-12-05T15:18:44.290
> 
> 标签：c#, sql-server, excel, data-import

我正在尝试使用 OleDb 从 datagridview 将 Excel 工作表插入 SQL Server 数据库。

我使用的代码：

```
namespace importfromexcel
{
  public partial class Form1 : Form
  {
     SqlConnection conn = new SqlConnection("Data Source=HAMNDOSH-PC\\SQLEXPRESS;Initial    Catalog=mohammed;Integrated Security=True");
  //  SqlCommand cmd;

     public Form1()
     {
        InitializeComponent();
     }

     OpenFileDialog ofd = new OpenFileDialog();

     private void button2_Click(object sender, EventArgs e)
     {
        if (ofd.ShowDialog() == DialogResult.OK)
        {
            textBox1.Text = ofd.FileName;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string excelConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;data source=" + ofd.FileName + @";Extended Properties=Excel 8.0;";
        // Create Connection to Excel Workbook

        //We can Import excel to sql server like this
        using (OleDbConnection connection = new OleDbConnection(excelConnectionString))
        {
            OleDbCommand command = new OleDbCommand("Select fname,lname FROM [sheet1$]", connection);

            connection.Open();

            // Create DbDataReader to Data Worksheet 
            using (DbDataReader dr = command.ExecuteReader())
            {
                // SQL Server Connection String 
                string sqlConnectionString = "Data Source=HAMNDOSH-PC\\SQLEXPRESS;Initial Catalog=mohammed;Integrated Security=True";
                //  SqlCommand cmd;

                // Bulk Copy to SQL Server 
                using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
                {
                    bulkCopy.DestinationTableName = "test";
                    bulkCopy.WriteToServer(dr);
                }
            }
        }
    }
  }
} 
```

我的数据库名称是：`mohammed`表名`test`有两列`firstname`，`lastname`Excel工作表的列是`fname`和`lname`..

问题是，当我执行代码并在单击 button1 时从 button2 插入 Excel 工作表后出现窗口错误

> *vshot32-clr2.exe 已停止工作*

请问有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:09:53.993

在 excel 连接字符串的扩展属性中，您可能希望设置 HDR=YES 和 IMEX=1。HDR=YES 将读取您的 Excel 工作表中的第一行，并读取存储在每个单元格中的数据作为列名。IMEX=1 告诉 JET 插入数据，而不管每个单元格的数据类型如何。

看看我自己写的这段代码，它可能会对你有所帮助。

```
 //ExcelDA Class
        public ExcelDA()
    {
        connString = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + ofd.FileName + "; Extended Properties=" + '"' + "Excel 8.0; HDR=Yes; IMEX=1" + '"';
    }

    /// <summary>
    /// Method used to retrieve a datatable from excel sheet
    /// </summary>
    public DataTable GetProductsExcel()
    {
        StringBuilder excBuilder = new StringBuilder();
        excBuilder.Append("SELECT * FROM [Sheet1$];");
        //
        try
        {
            return ExecuteSqlStatement(excBuilder.ToString());
        }
        catch (Exception) 
        { 
            MessageBox.Show("Error retreiving data");
            return null;
        }
    }
    private DataTable ExecuteSqlStatement(string command)
    {
        using (OleDbConnection conn = new OleDbConnection(connString))
        {
            try
            {
                conn.Open();
                using (OleDbDataAdapter adaptor = new OleDbDataAdapter(command, conn))
                {
                    DataTable table = new DataTable();
                    adaptor.Fill(table);
                    return table;
                }
            }
            catch (SqlException e)
            {
                throw e;
            }
        }
    }
    //SqlDA class
    public void ExecuteSQLCommand(string comm)
    {
        try
        {
            using (SqlConnection conn = new SqlConnection(_connectionString))
            {
                conn.Open();

                using (SqlCommand command = new SqlCommand(comm, conn))
                {
                    command.ExecuteNonQuery();
                }
            }
        }
        catch (ArgumentOutOfRangeException ex)
        {
            throw ex;
        }

        catch (ArgumentException ex)
        {
            throw ex;
        }
        catch (SqlException ex) { throw ex; }
    }
    public void AddNames(string fName, string sName)
    {
          StringBuilder sqlQuery = new StringBuilder();
          //build sql insert statement here
          ExecuteSQLCommand(sqlBuilder.ToString());
    }

    //Program class
    ExcelDA reader = new ExcelDA();
    DataTable names = reader.GetSuppliersExcel();
    //string array to store excel row data for names
    string[] arr2 = new string[2] { "", ""};
        //recursive loop to retrieve each row and values from each rows columns
        foreach (DataRow row in suppliers.Rows)
        {
            for (int i = 0; i < names.Columns.Count; i++)
            {
                if (i == (names.Columns.Count - 1))
                {
                    arr2[i] = (row[i].ToString());
                }
                else
                {
                    arr2[i] = (row[i].ToString());
                }
            }
        }

            try
            {
                sql.AddNames(arr2[0], arr2[1]);
                Console.WriteLine("Added Data to SQL");
            }
            catch (Exception) { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:46:38.960

我不知道这是否是根本原因，但是当不能保证对话框选择了有效文件时，您会`ofd.FileName`在事件中引用。`Click`由于您将该值存储在文本框中，因此我将其更改为：

```
string excelConnectionString = 
    @"Provider=Microsoft.Jet.OLEDB.4.0;data source=" 
          + textBox1.Text 
          + @";Extended Properties=Excel 8.0;"; 
```

我还将验证您是否能够在尝试实现批量复制之前*查询*数据（例如，通过写入文本文件）作为测试。另请注意，源数据必须具有完全相同的结构（包括列顺序），除非您提供[`ColumnMapping`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.columnmappings.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:54:25.117

Sql server 有一个名为 Sql Server Data Tools 的导入工具...在那里您可以找到从 excel 文件导入的活动...非常“最终用户”交易，我的意思是您可以通过拖放配置所有内容基础...

# jquery - 为什么我提交表单时复选框会自动取消选中？

> ID：13726423
> 
> 赞同：1
> 
> 时间：2012-12-05T15:19:08.787
> 
> 标签：jquery, html, checkbox

我有一个表格，在那个表格中我有很多复选框，复选框被归类为 2 个类别，当我选择一个类别时，它的所有子类别复选框都会自动选中，我使用 On submit 按钮作为过滤器，根据选择的复选框过滤选项.

例如：-我有复选框

```
 1]Alcoholic Drinks
                               2]--Beer 
                               3]--Rum
                               4]--Whiskey
                               5]Non Alcoholic Drinks
                               6]--Coffee
                               7]--Tea
                               8]--Juice 
```

我正在使用 jquery 来自动选中复选框。假设用户勾选了Alcoholic，然后它的子复选框自动被选中。

我的代码：-

```
 $('#Alcoholic').click(function() 
             {                                    

                  if( $(this).attr("checked"))
                 {  

                   $(this).parents('.min-form').find('label.Beer').removeClass('checked'); 
                   $(this).parents('.min-form').find('label.Wine').removeClass('checked'); 
                   $(this).parents('.min-form').find('label.Spirits').removeClass('checked'); 

                 }
                    else 
                 { 

                    $(this).parents('.min-form').find('label.Beer').addClass('checked');
                    $(this).parents('.min-form').find('label.Wine').addClass('checked');                   
                    $(this).parents('.min-form').find('label.Spirits').addClass('checked'); 
                 }                
                  return false; 
             }); 
```

当我检查酒精时，它的子复选框会自动被选中。我的问题是，当我提交没有任何操作的表单时，复选框会自动取消选中。我不知道这是怎么发生的？？为什么当我提交表单标签中没有任何操作的表单时复选框会自动取消选中？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:46:32.840

当您在表单中没有任何操作时，它只会重新加载页面 - 因此是空复选框。如果你添加

```
return false; 
```

单击提交按钮时对您的编码进行编码，它将阻止表单提交（什么都不提交），因此页面不会刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:25:42.207

好吧，从您的代码看来，您是 jQuery 开发的初学者。我建议遵循以下流程。
将类添加到您的顶级类别 chechboxes`class="top"`
和 subCategory 复选框添加`class="sub"`

```
$(".top").click(function(){
    if($(this).is(':checked'))
    {
        $(this).find('.sub').attr('checked',true);
    }
    else
    {
        $(this).find('.sub').attr('checked',false);
    }
}); 
```

您需要确保如果未选中任何子类别复选框，则还必须取消选中父类别。
为此，您需要处理具有`class="sub"`br/> 的复选框的单击事件希望这有效！:) 是的，请确保拥有`return false;`

# asp.net-web-api - 来自测试程序集的 Web API 自托管

> ID：13726426
> 
> 赞同：2
> 
> 时间：2012-12-05T15:19:13.950
> 
> 标签：asp.net-web-api, self-hosting

我目前正在为即将开始的新项目评估 WebAPI 和 NancyFx。我已经设法让 Nancy 从一个测试程序集中进行自我托管（它本身使用 asp.net 托管）。

有没有办法对 Web API 做同样的事情？我想将 web api 项目托管在 IIS 上，但我想从我的测试程序集中启动它，这样我就可以针对它运行测试。

我发现了一些关于如何使用 Autofac 扫描来自另一个程序集的控制器的博客文章（似乎有点倒退只是为了让另一个程序集的托管工作，但如果可以做到，我想这将是一个选择），但我会喜欢在这个项目中继续使用 Structuremap ioc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:13:17.593

[在Mark Jones](https://stackoverflow.com/users/1440706/mark-jones) [链接](http://forums.asp.net/post/4846132.aspx)的帮助下设法让它工作。这就是我在测试程序集中得到的结果。

```
 private static HttpSelfHostServer _server;

    [BeforeTestRun]
    public static void Setup()
    {
        var config = new HttpSelfHostConfiguration(Settings.TestUri);
        WebApiConfig.Register(config); //map routes
        IocConfig.Bootstrap(config); //configure dependency injection
        _server = new HttpSelfHostServer(config);
        _server.OpenAsync().Wait();
    }

    [AfterTestRun]
    public static void TearDown()
    {
        _server.CloseAsync().Wait();
    } 
```

# c# - 如何使用 MemoryStream 将 Xml 附加到 .net 邮件附件？

> ID：13726427
> 
> 赞同：2
> 
> 时间：2012-12-05T15:19:15.107
> 
> 标签：c#, xml, asp.net-mvc-3, asp.net-mail

我在 mvc 中有一个 cshtml 视图，里面充满了 xml，例如：

```
@model myproject.net.Models.mymodel
@{
    Layout = null;
    Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("Content-Disposition", "attachment; " + "filename=" + 
        Model.myusername.ToString()  + "(" + 
        Model.mydate.Date.ToShortDateString() + ").xls");
}

<?xml version="1.0" encoding="utf-8"?>
<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
    <Styles>
        <Style ss:ID="s25">
            <Alignment ss:Horizontal="Center" ss:Vertical="Bottom"/>
            <Borders>
                <Border ss:Position="Bottom" ss:LineStyle="Continuous" ss:Weight="1"/>
            </Borders>
            <Interior ss:Color="#FFA500" ss:Pattern="Solid"/>
        </Style>
    </Styles>
    <ss:Worksheet ss:Name="Sheet1">
        <ss:Table>
        @if (Model.someNumerableContent.Count > 0)
        {
            <!-- MyContent -->
            <ss:Row>
                <ss:Cell><ss:Data ss:Type="String">Content Header</ss:Data></ss:Cell>
            </ss:Row>
            <ss:Row>
                <ss:Cell><ss:Data ss:Type="String">SubHeader 1</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">SubHeader 2</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">SubHeader 3</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">SubHeader 4</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">SubHeader 5</ss:Data></ss:Cell>
            </ss:Row>
            foreach (var subContent in Model.someNumerableContent)
            {
            <ss:Row>
                <ss:Cell><ss:Data ss:Type="String">@subContent.mydate.Date.ToShortDateString()</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">@subContent.number</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">@subContent.name</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">@subContent.surname</ss:Data></ss:Cell>
                <ss:Cell><ss:Data ss:Type="String">@subContent.issue</ss:Data></ss:Cell>
            </ss:Row>
            }
            <ss:Row> </ss:Row>
        }
        </ss:Table>
    </ss:Worksheet>
</ss:Workbook> 
```

我想将其转换为 .xls 文件并附加到邮件而不将其保存在任何地方。但无法弄清楚我怎么能做到这一点。我不能使用 office.interop 来解决我在服务器中遇到的一些限制，所以它不是我的选择。我只想通过 Xml 创建一个 .xls 文件并使用 .net 邮件发送它。到目前为止，我已经这样做了：

```
// Memory stream for the xml file
using (MemoryStream memoryStream = new MemoryStream())
{
    //                                                 Can i use something like this?
    byte[] contentAsBytes = Encoding.Default.GetBytes( View("ExportToExcel").ToString() );
    memoryStream.Write(contentAsBytes, 0, contentAsBytes.Length);
    // Set the position to the beginning of the stream.
    memoryStream.Seek(0, SeekOrigin.Begin);
    // Create attachment
    ContentType contentType = new ContentType();
    contentType.MediaType = MediaTypeNames.Text.Xml;
    contentType.Name = UserName + "(" + FileDate + ").xls";
    // Attach
    mail.Attachment = new Attachment(memoryStream, contentType);
} 
```

那么我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:23:02.797

我无法成功实现剃刀视图，但在工作了 30 小时后。我找到了另一种方法..

首先，我创建了一个 XmlString，如下所示：

```
public String XmlToImplement(int id)
{
    // Add values from db to model
    MyModel model = new MyModel();
    model.contents = db.contents.Where(c => c.MyData.id == id).ToList();
    // XmlString
    String XmlString = @"<?xml version='1.0' encoding='utf-8'?>
    <ss:Workbook xmlns='urn:schemas-microsoft-com:office:spreadsheet'
                xmlns:o='urn:schemas-microsoft-com:office:office'
                xmlns:x='urn:schemas-microsoft-com:office:excel'
                xmlns:ss='urn:schemas-microsoft-com:office:spreadsheet'
                xmlns:html='http://www.w3.org/TR/REC-html40'>
        <Styles>
            <Style ss:ID='s25'>
                <Alignment ss:Horizontal='Center' ss:Vertical='Bottom'/>
                <Borders>
                    <Border ss:Position='Bottom' ss:LineStyle='Continuous' ss:Weight='1'/>
                </Borders>
                <Interior ss:Color='#FFA500' ss:Pattern='Solid'/>
            </Style>
        </Styles>
        <ss:Worksheet ss:Name='Sheet1'>
            <ss:Table>";
            if (model.contents.Count > 0)
            {
                XmlString = XmlString + @"<!-- MyModelData -->
                <ss:Row>
                    <ss:Cell><ss:Data ss:Type='String'> MyModelData </ss:Data></ss:Cell>
                </ss:Row>
                <ss:Row>
                    <ss:Cell><ss:Data ss:Type='String'>Date</ss:Data></ss:Cell>
                    <ss:Cell><ss:Data ss:Type='String'>Number</ss:Data></ss:Cell>
                    <ss:Cell><ss:Data ss:Type='String'>Name/Surname</ss:Data></ss:Cell>
                </ss:Row>"; 
                foreach (var content in model.contents)
                {
                    XmlString = XmlString + @"<ss:Row>";
                    XmlString = XmlString + @"<ss:Cell><ss:Data ss:Type='String'>" + content.thedate.Date.ToShortDateString() + "</ss:Data></ss:Cell>";
                    XmlString = XmlString + @"<ss:Cell><ss:Data ss:Type='String'>" + content.number + "</ss:Data></ss:Cell>";
                    XmlString = XmlString + @"<ss:Cell><ss:Data ss:Type='String'>" + content.namesurname+ "</ss:Data></ss:Cell>";
                    XmlString = XmlString + @"</ss:Row>";
                }
                // An empty row for next value set
                XmlString = XmlString + "<ss:Row> </ss:Row>"; 
            }
            XmlString = XmlString + @"</ss:Table>
        </ss:Worksheet>
    </ss:Workbook>";
    return XmlString;
} 
```

然后我`MemoryStream`用`UTF8`编码保存它..

```
// Create attachment
// Add XML to MemoryStream                                          /* MyXmlString */
MemoryStream memoryStream = new MemoryStream(Encoding.UTF8.GetBytes(XmlToImplement(id))); 
```

然后定义`ContentType`为`Excel`

```
// Content Type
ContentType contentType = new ContentType("application/vnd.ms-excel");
contentType.Name = UserName + "(" + FileDate + ").xls"; 
```

最后我将它附加到 .net 邮件

```
// Attach
mail.Attachment = new Attachment(memoryStream, contentType);
mail.Attachment.NameEncoding = UTF8Encoding.UTF8;
mail.Attachment.TransferEncoding = TransferEncoding.Base64;
mail.Attachment.ContentDisposition.DispositionType = DispositionTypeNames.Attachment; 
```

它工作得很好。我可能无法将 xml 视图转换为邮件附件，但我可以轻松地将 xml 字符串转换为邮件附件，我希望这对解决此问题的其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:36:47.490

取决于什么版本的 excel，或者你需要什么功能。[Carlos Ag 的 Excel Writer](http://www.carlosag.net/tools/excelxmlwriter/)可能就足够了。它有点过时，但适用于简单的 Excel 工作簿。

如果您需要自己滚动模板，请查看[Razor Generator 模板](http://nuget.org/packages/RazorGenerator.Templating)以将模型呈现为字符串。将字符串传递给 a`Stream`并附加到电子邮件中。

**更新**

要首先使用剃须刀模板，您需要一个视图

```
@* Generator: Template *@
@inherits The.NameSpace.RazorTemplateBase<dynamic>

@functions  {
    public object Model { get; set; }
}

<your typical markup goes here...> 
```

那么你需要基类

```
public abstract class RazorTemplateBase<dynamic>
{
    public static string RootAddress { get; set; }

    public virtual RazorTemplateBase<dynamic> Layout { get; set; }

    private readonly StringBuilder generatingEnvironment = new StringBuilder();

    public abstract void Execute();

    public void WriteLiteral(string textToAppend)
    {
        if (string.IsNullOrEmpty(textToAppend))
        {
            return;
        }
        generatingEnvironment.Append(textToAppend);
    }

    public void Write(object value)
    {
        if ((value == null))
        {
            return;
        }
        string stringValue;
        var t = value.GetType();
        var method = t.GetMethod("ToString", new [] { typeof(IFormatProvider) });
        if ((method == null))
        {
            stringValue = value.ToString();
        }
        else
        {
            stringValue = ((string)(method.Invoke(value, new object[] { CultureInfo.InvariantCulture })));
        }
        WriteLiteral(stringValue);
    }

    string content;

    public string RenderBody()
    {
        return content;
    }

    public string TransformText()
    {
        Execute();
        if (Layout != null)
        {
            Layout.content = generatingEnvironment.ToString();
            return Layout.TransformText();
        }
        else
        {
            return generatingEnvironment.ToString();
        }
    }
} 
```

按照项目[主页](http://razorgenerator.codeplex.com/)上的说明设置`custom tool`（查看属性窗口）`RazorGenerator`。

那么你可以这样做

```
string excelXml = new NameOfMyView { Model = theData }.TransformText();
//write string to memmory stream, attach to MailMessage 
```

# jsf-2 - Primefaces 3.4 p:panelMenu：无法控制 p:submenu 和 p:menuitem 的状态

> ID：13726428
> 
> 赞同：0
> 
> 时间：2012-12-05T15:19:16.297
> 
> 标签：jsf-2, primefaces, jboss7.x

给定以下折叠菜单 (p:panelMenu)：

```
<p:panelMenu style="width:200px">
            <p:submenu label="#{uimsg.clm_title}" styleClass="pageFont">
                <!--                <p:menuitem value="Delete" actionListener="#{buttonBean.delete}"  ajax="true" icon="ui-icon-close"/>   -->
            </p:submenu>
            <p:separator />

            <!-- Sub-menu master Data  -->
            <p:submenu label="#{uimsg.trsf_title}" styleClass="pageFont">
                <p:menuitem value="#{uimsg.trsf_create}" ajax="true"
                    icon="ui-icon-arrow-1-e" url="/transfers/editTransfer.xhtml" />
            </p:submenu>
            <p:separator />

            <!-- Sub-menu master Data  -->
            <p:submenu label="#{uimsg.mst_data_title}" styleClass="pageFont">

                <!--  Clubs -->
                <p:submenu label="#{uimsg.mst_data_club_title}">
                    <p:menuitem value="#{uimsg.mst_data_show_club_title}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/clubs/showClubs.xhtml" />

                    <p:menuitem value="#{uimsg.mst_data_edit_club_title}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/clubs/editClub.xhtml" />
                </p:submenu>

                <!--  Associations -->
                <p:submenu label="#{uimsg.mst_data_assocation_title}">
                    <p:menuitem value="#{uimsg.mst_data_show_association_title}"
                        ajax="true" icon="ui-icon-arrow-1-e"
                        url="/associations/showAssociations.xhtml" />

                    <p:menuitem value="#{uimsg.mst_data_edit_association_title}"
                        ajax="true" icon="ui-icon-arrow-1-e"
                        url="/associations/editAssociation.xhtml" />
                </p:submenu>

                <!-- leagues -->
                <p:submenu label="#{uimsg.mst_data_league_title}">

                    <p:menuitem value="#{uimsg.mst_data_show_league_title}"
                        icon="ui-icon-arrow-1-e" url="/league/showLeagues.xhtml" ajax="true"/>

                    <p:menuitem value="#{uimsg.mst_data_edit_league_title}"
                        icon="ui-icon-arrow-1-e" url="/league/editLeague.xhtml" ajax="true"/>
                </p:submenu>

                <!-- Players -->
                <p:submenu label="#{uimsg.mst_data_player_title}">

                    <p:menuitem value="#{uimsg.player_menu_show}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/player/showPlayers.xhtml" />

                    <p:menuitem value="#{uimsg.player_menu_edit}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/player/editPlayer.xhtml" />

                </p:submenu>

                <!-- Confederation -->
                <p:submenu label="#{uimsg.mst_data_confed_title}">

                    <p:menuitem value="#{uimsg.mst_data_edit_confed_title}"
                        icon="ui-icon-arrow-1-e"
                        url="/confederations/showConfederations.xhtml" ajax="true" />

                    <p:menuitem value="#{uimsg.mst_data_show_confed_title}"
                        icon="ui-icon-arrow-1-e"
                        url="/confederations/editConfederation.xhtml" ajax="true" />

                </p:submenu>

            </p:submenu>

            <p:separator />

            <!-- Sub-menu Administration -->

            <p:submenu label="#{uimsg.admin_title}"
                rendered="#{auth.showAdministration() == true ? true : false }"
                id="adminDivId" styleClass="pageFont">
                <!-- User menu -->
                <p:submenu label="#{uimsg.users_admin_title}">
                    <p:menuitem value="#{uimsg.admin_show_users_title}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/users/showUsers.xhtml" />
                    <p:menuitem value="#{uimsg.admin_edit_users_title}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/users/editUser.xhtml"
                        disabled="#{auth.editUsers() == true ? false : true }" />
                </p:submenu>

                <!-- Role menu -->
                <p:submenu label="#{uimsg.roles_admin_title}">
                    <p:menuitem value="#{uimsg.admin_show_role_title}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/roles/showRoles.xhtml" />
                    <p:menuitem value="#{uimsg.admin_edit_role_title}" ajax="true"
                        icon="ui-icon-arrow-1-e" url="/roles/editRole.xhtml"
                        disabled="#{auth.editUsers() ne true}" />
                </p:submenu>
            </p:submenu>

            <p:separator />
            <!-- Sub-menu Version -->
            <p:submenu label="#{uimsg.abt_software_title}" styleClass="pageFont">
                <p:menuitem value="#{uimsg.abt_software_show_informations}"
                    icon="ui-icon-arrow-1-e" url="/version/showVersion.xhtml" ajax="true"/>
            </p:submenu>
</p:panelMenu> 
```

每次单击 menuItem 时，PanelMenu 的行为都非常奇怪且不可预测：一些 subMenu 折叠，而另一些则没有。这个“jabbi-jabba”似乎没有固定的规则。

我不知道这是什么原因。我主要在所有视图中使用重定向（“faces-redirect=true”），一些视图包含复合元素

有人有提示吗？

环境：

*   AS：JBoss 7.1.1 最终版
*   JSF 版本：2.1.13
*   素面：3.4.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:24:04.190

primeFaces 的 panelMenu 需要保存其状态，以便始终向用户显示之前打开/关闭了哪些子菜单。PanelMenu 将其状态保存在客户端，使用名称为 panelmenu 本身 id 的 cookie。cookie 由客户端使用 javascript 设置/创建（请参阅[js for panelmenu](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/menu/menu.js?r=7846#910)）并由 Primefaces 读取以更新其菜单。cookie 设置为保存用户已打开的子菜单项的 ID。

问题的解决方案是：

1.  确保只有用户给定 id 的 cookie
2.  确保菜单项中的所有请求都只发送到一个应用程序目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T17:48:02.257

你可以这样做，你需要把它放在组件上`stateful="true"` 并在 itemMenu 中设置`ajax=false` `async=false` `global=false` `partialSubmit=false` `resetValue=false` `immediate=true`.

而已。

# javascript - 正则表达式字符串替换

> ID：13726429
> 
> 赞同：29
> 
> 时间：2012-12-05T15:19:17.740
> 
> 标签：javascript, regex, string, replace

我正在尝试使用正则表达式进行基本的字符串替换，但我发现的答案似乎没有帮助 - 他们直接回答每个人的独特要求，很少或根本没有解释。

我`str = str.replace(/[^a-z0-9+]/g, '');`目前正在使用。但我想做的是允许所有字母数字字符（az 和 0-9）以及“-”字符。

您能否回答这个问题并解释您如何连接表达式。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-05T15:22:07.293

这应该工作：

```
str = str.replace(/[^a-z0-9-]/g, ''); 
```

之间的所有内容都表明您正在寻找什么

1.  `/`在这里划定你的模式，所以你有一个开始和一个结束
2.  `[]`表示您正在寻找一个特定字符的模式
3.  `^`表示您希望每个字符都与后面的内容不对应
4.  `a-z`匹配 'a' 和 'z' 之间的任何字符
5.  `0-9`匹配 '0' 和 '9' 之间的任何数字（表示任何数字）
6.  `-`性格
7.  `g`最后是一个特殊参数，表示您不希望正则表达式在与您的模式匹配的第一个字符上停止，而是在整个字符串上继续

然后您的表达式由`/`之前和之后分隔。所以在这里你说“每个不是字母、数字或'-'的字符都将从字符串中删除”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T15:20:36.733

只需更改`+`为`-`：

```
str = str.replace(/[^a-z0-9-]/g, ""); 
```

您可以将其解读为：

1.  `[^ ]`: 不匹配集合
2.  `[^a-z0-9-]`: 如果不匹配，则匹配`a-z`，`0-9`或`-`
3.  `/ /g`: 做全局匹配

**更多信息：**

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:21:42.283

您的字符类（方括号中的部分）表示您要匹配除 0-9 和 az 和 + 之外的任何内容。您没有明确说明要匹配多少个 az 或 0-9，但我认为 + 表示您要替换至少一个字母数字字符的字符串。它应该改为：

```
str = str.replace(/[^-a-z0-9]+/g, ""); 
```

此外，如果您需要匹配大写字母和小写字母，您应该使用：

```
str = str.replace(/[^-a-zA-Z0-9]+/g, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T21:42:45.287

```
str = str.replace(/\W/g, ""); 
```

这将是一个较短的形式

# javascript - 摆脱 Visual Studio 中的 [动态] JavaScript 视图

> ID：13726430
> 
> 赞同：49
> 
> 时间：2012-12-05T15:19:19.053
> 
> 标签：javascript, visual-studio-2010, debugging

由于我大约 2 个月前从头开始安装 Visual Studio 2010，因此在调试在 IE 中运行的 JavaScript 代码时，它的行为略有不同。

*   当我设置断点时，它会在标题中打开带有术语“[动态]”的视图副本，并在其中标记断点。
*   当 JavaScript 错误在执行期间发生时，它会在标记引发错误的代码行之前执行相同的操作。
*   此“动态”视图是可编辑的，但编辑无效 - 它们不会保存到文件中。

我觉得这种行为很不舒服。每次我在调试过程中发现代码中的错误时，我都会在动态视图中修复它。我点击保存。VS 没有抱怨。接下来我在 IE 中刷新页面，然后 - 砰 - 更改丢失了，它再次加载未触及的旧版本。

我一直无法找出如何关闭这些视图。在我重新安装 Visual Studio 之前，它并没有这样做。它只会为 HTML 文件的内联脚本标签中的脚本创建“动态”视图。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-17T21:43:47.700

试试这个 IE > Internet 选项 > 设置（在浏览历史下） > 检查存储页面的新版本：每次我访问该网页。

这在 IE10 中对我有用。

![在此处输入图像描述](../Images/ca50789b01c0f381aa15ec2c33a740d2.png)

其他选项是打开开发者工具并选择缓存选项*Always Refresh from Server*如下图所示

![在此处输入图像描述](../Images/685e09746022e8a9168d51b27ba80f98.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-01T05:16:56.157

尝试在网页上按 CTRL+F5。这对我有用。

问题是我在之前的调试会话中打开了其他 IE 窗口，因此动态 javascript 文件仍然被缓存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-15T23:13:45.107

打开开发人员工具 - `F12`- 还应该导致页面的缓存文件在每次刷新时被清除。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-06T11:18:37.287

将相关 JS 文件的编码从 Windows 代码页更改为 UTF-8，为我解决了这个问题。

缩小范围，文件中的 OEM 扩展 ASCII 字符（例如，我用于子弹的 ALT-254）似乎触发了 Windows 代码页文件的问题。

（Visual Studio 2013 更新 5，IE11）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-25T07:15:22.253

对于谷歌浏览器：

*   打开开发者工具(F12)
*   打开`Network Conditions`工具
*   选择`Disable Cache`

[![在此处输入图像描述](../Images/17e243b3ec1f59b8cb094646ce5e3ae0.png)](https://i.stack.imgur.com/ZzMAs.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-12T19:52:58.607

我遇到了同样的问题，即无法在新代码中打断点。并且在同一页面中的旧代码上的断点将调出 [动态] 版本。编辑的页面不会重新加载。这对我来说是一周前在 VS2012 和 VS2013 中开始的。使用刷新页面和/或 Ctl-F5 对我不起作用。但是，阅读这个帖子让我想到了使用 F12 打开开发者工具。保持该窗口打开，同时点击刷新就可以了。多谢你们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-20T16:37:16.740

> 1）不带调试运行页面（Debug-->Start without Debugging）
> 
> 2) 在 Internet Explorer 中打开网页时，按 Ctrl-F5 以清除 IE 缓存。确保 IE 具有焦点。
> 
> 3) 关闭 IE 并使用 Debugging 重新运行页面（Debug-->Start Debugging）。

这为我解决了这个问题。

# java - 使用 JDBC ResultSet 构建 XML 文档对象

> ID：13726431
> 
> 赞同：0
> 
> 时间：2012-12-05T15:19:22.653
> 
> 标签：java, xml, jdbc

我们在 JDBC ResultSet 对象中获取 Cursor。现在我必须使用 ResultSet 构建复杂的 XML 文档对象。目前我一直在以程序方式构建文档对象。

现在有任何面向对象的方法来简化 xml 文档构建逻辑。这样它也可以适应未来的变化。

我有以下xml文档的结构，

```
<Response>
    <BillingInformation>
        <BillingID>
            <Identifier>
            </Identifier>
        </BillingID>
        <BillInfo>
            <ID>
                <Identifier>
                </Identifier>
            </ID>
            <BillingCustomerName>
            </BillingCustomerName>
            <AlternateID>
                <Identifier>
                </Identifier>
                <Type>
                </Type>
            </AlternateID>
            <PostalAddress>
                <ID>
                    <Identifier>
                    </Identifier>
                    <Type>
                    </Type>
                </ID>
                <StreetAddress>
                    <AddressContent>
                    </AddressContent>
                    <AddressContent>
                    </AddressContent>
                </StreetAddress>
                <City>
                </City>
                <State>
                </State>
                <Country>
                </Country>
                <Zip>
                </Zip>
                <Status>
                </Status>
            </PostalAddress>
            <Contact>
                <ContactId>
                    <Identifier>
                    </Identifier>
                    <Type>
                    </Type>
                </ContactId>
                <AlternateContactId>
                    <Identifier>
                    </Identifier>
                    <Type>
                    </Type>
                </AlternateContactId>
                <ContactName>
                    <FirstLastName>
                        <FirstName>
                        </FirstName>
                        <LastName>
                        </LastName>
                    </FirstLastName>
                </ContactName>
            </Contact>
            <Status>
            </Status>
        </BillInfo>
    </BillingInformation>
</Response> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:22:59.337

我过去曾使用 WebRowSet 类来完成此任务。 [http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/WebRowSet.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/WebRowSet.html)

您可能会发现它是最简单的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:15:13.810

[XStream](http://x-stream.github.io/)允许将对象映射到 XML。您必须像 XML 一样创建对象层次结构并使用节点名称注释类。

适用于简单的 XML 结构，如下所示：http: [//x-stream.github.io/alias-tutorial.html](http://x-stream.github.io/alias-tutorial.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:45:20.020

使用 JPA 和 JAXB。使用 JPA，您可以将 DB 记录读入（映射）到 BillingInformation Java 对象中，然后使用 JAXB 将其编组为 XML。

# sql - 新手：缓存每个日期的事件更改表

> ID：13726432
> 
> 赞同：1
> 
> 时间：2012-12-05T15:19:26.197
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一张每几周更改一次状态的项目表。我想查看任意一天并弄清楚每个状态有多少项目。

例如：

tbl_ItemHistory

```
ItemID
StatusChangeDate
StatusID 
```

样本数据：

```
1001, 1/1/2010, 1
1001, 4/5/2010, 2
1001, 6/15/2010, 4
1002, 4/1/2010, 1
1002, 6/1/2010, 3
... 
```

所以我需要弄清楚给定日期每个状态有多少项目。因此，在 2010 年 5 月 1 日，状态 2 中有一项 (1001) 和状态 1 (1002) 中的一项。

我想每天晚上创建一个缓存表，其中每个项目和一年中的每一天都有一行，这样我就可以在图表中显示状态随时间的变化。我对SQL不太了解。我正在考虑使用 for 循环，但基于我在论坛上看到的一些创造性答案，我怀疑这是正确的方法。

我正在使用 SQL Server 2008R2

我环顾四周，我认为这类似于这个问题：[https](https://stackoverflow.com/questions/11183164/show-data-change-over-time-in-a-chart) ://stackoverflow.com/questions/11183164/show-data-change-over-time-in-a-chart 但没有回答。有没有办法做这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:08:08.947

一位同事向我展示了一种很酷的方法，所以我想我会把它贡献给社区：

```
declare @test table (ItemID int, StatusChangeDate datetime, StatusId tinyint);
insert @test values
(1001, '1/1/2010', 1),
(1001, '4/5/2010', 2),
(1001, '6/15/2010', 4),
(1002, '4/2/2010', 1),
(1002, '6/1/2010', 3);
with
itzik1(N) as (
    select 1 union all select 1 union all
    select 1 union all select 1), --4
itzik2(N) as (select 1 from itzik1 i cross join itzik1), --16
itzik3(N) as (select 1 from itzik2 i cross join itzik2), --256
itzik4(N) as (select 1 from itzik3 i cross join itzik3), --65536 (184 years)
tally(N) as (select row_number() over (order by (select null)) from itzik4)
select ItemID, StatusChangeDate, StatusId from(
    select
    test.ItemID,
    dates.StatusChangeDate,
    test.StatusId,
    row_number() over (
        partition by test.ItemId, dates.StatusChangeDate
        order by test.StatusChangeDate desc) as rnbr
    from @test test
    join (
        select dateadd(dd, N,
            (select min(StatusChangeDate) from @test) --First possible date
            ) as StatusChangeDate
        from tally) dates
    on test.StatusChangeDate <= dates.StatusChangeDate
    and dates.StatusChangeDate <= getdate()
) result
where rnbr = 1 
```

# c - 似乎无法让 sscanf() 以我想要的方式工作

> ID：13726435
> 
> 赞同：3
> 
> 时间：2012-12-05T15:19:26.470
> 
> 标签：c, scanf

我正在为我正在制作的程序使用 AT 命令，并且无法使用 sscanf() 函数解析它们。

例如，如果我接受这个命令：

```
"AT\r\r\nOK\r\n" 
```

我想： * 在第一次调用时，只获取“AT”部分，丢弃后面的“\r”字符并知道到目前为止已经读取了多少个字符。* 在第二次调用中，只获取“OK”部分，丢弃“OK”字符串之前和之后的“\r\n”字符，并知道到目前为止已经读取了多少个字符。

我编写了以下 sscanf 函数调用：

```
index = 0;
sscanf(buffer + index, "%*[\r\n]%[^\r]\r%*[\n]%n", new_buffer, &count);
index += count; 
```

为什么它不返回我请求的字符串？我究竟做错了什么？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:23:59.843

也许问题在于如何`sscanf`处理空格字符，例如回车和换行符，以及您的期望。`sscanf`需要*忽略*（跳过）前面的空白。

另一个问题可能是回车永远不会到达您的缓冲区。C 实现需要映射`\r\n`到`\n`输入（对于文本流）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:56:27.250

我们来分析一下格式：

```
sscanf(buffer + index, "%*[\r\n]%[^\r]\r%*[\n]%n", new_buffer, &count); 
```

首先，跳过`'\r'`​​或字符的初始序列（ ）。然后扫描以下字符直到下一个字符并存储到( ) 中。`'\n'``%*[\r\n]``'\r'``new_buffer``%[^\r]`

接下来，将跳过所有后续的空白字符 ( `\r`)。至 的部分`'O'`现已`"OK"`消耗。

然后，忽略下一个换行符之前的所有字符 ( `%*[^\n]`)。您现在只剩下最后一个未使用的换行符。然后将消耗的字符数存储在`count`.

您的问题是格式字符串中的任何空格（当然是字符集之外的）都会消耗出现在该位置的整个空格字符序列（可能是空的）。格式字符串中的`\r`不是“一个字符`'\r'`”，而是“这里的所有空格”。

您可以通过使其扫描（并忽略）任何字符来修复它（如果您的格式是严格的）（`'\r'`如果您的输入确实是您所期望的，那么在您的情况下保证是 a 。

```
sscanf(buffer + index, "%*[\r\n]%[^\r]%*c%*[\n]%n", new_buffer, &count); 
```

# javascript - 从 Graph API 中删除单个扩展权限

> ID：13726437
> 
> 赞同：0
> 
> 时间：2012-12-05T15:19:28.690
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-opengraph, facebook-apps

因此，似乎我可以通过对 /me/permissions 的 DELETE 请求完全破坏对应用程序的所有权限，但是我希望能够仅删除用户的 publish_stream，而不将它们链接到应用程序设置页面。

旧的 REST API[有这样做的方法，](http://developers.facebook.com/docs/reference/rest/auth.revokeExtendedPermission/)页面还指出：

“您可以使用特定权限作为参数向 /PROFILE_ID/permissions 发出 HTTP DELETE 请求，以撤销应用程序的扩展权限。”

我的两个问题是；指定单个权限的参数是什么（到目前为止，作为 DELETE 请求发送的任何内容都会破坏所有内容），它的文档到底在哪里？=\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:39:07.700

您可以通过发出 DELETE 请求来删除单个权限`/PROFILE_ID/permissions/PERMISSION_NAME`

这方面的文档`user`在 API 部分的描述中，[https://developers.facebook.com/docs/reference/api/user/#permissions](https://developers.facebook.com/docs/reference/api/user/#permissions)

# c++ - 从 QGraphicsView 向前按键

> ID：13726438
> 
> 赞同：0
> 
> 时间：2012-12-05T15:19:30.137
> 
> 标签：c++, qt, signals, qwidget, slot

我正在尝试将 QGraphicsView 中的所有按键事件转发到当前在现场的小部件。

我的 QGraphicsView 看起来像这样：

```
Character_controller::Character_controller(Game_state * game_state) : Game_base_controller(game_state) {

        this->character = new Character(this->game_state);

        this->scene->addWidget(this->character);

        connect(this, SIGNAL(keyPress(QKeyEvent *)), this->character, SLOT(update()));

    } 
```

然后，我的角色是 QWidget 的子类，它应该接收所有按键事件

```
Character::Character(Game_state * game_state) : Base_object(game_state) {

}

Character::~Character() {

}

void Character::update() {

    cout << "HELLO FROM TIMER CONNECTED ITEM" << endl;

} 
```

出于某种原因，这不起作用。如何将视图中的所有按键事件转发给我的角色？

我得到的错误是这样的：

Object::connect: No such signal game::Character_controller::keyPress(QKeyEvent *) in implementation/game_controllers/character_controller.cpp:21

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:25:16.580

`keyPress(QKeyEvent*)`不作为信号存在，因此您收到的错误消息。因此，您不能这样做：

```
connect(this, SIGNAL(keyPress(QKeyEvent *)), this->character, SLOT(update())); 
```

为了在图形视图中捕获按键事件，您需要重写该`keyPressEvent`函数：

```
void Character_controller::keyPressEvent(QKeyEvent* event)
{
   // Call functions on your character here.
   switch (event->key())
   {
   case Qt::Key_A:
       character->moveLeft(); // For example
       break;
   case Qt::Key_D:
       character->moveRight(); // For example
       break;
   ...
   }

   // Otherwise pass to QGraphicsView.
   QGraphicsView::keyPressEvent(event);
} 
```

您可以将 传递`QKeyEvent`给角色以管理其自己的按键，但如果您不保留所有按键，您可能会发现很难确保场景中的不同项目不依赖相同的按键在一个地方处理代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T20:20:11.013

您必须覆盖 keyPressEvent 事件才能捕获按键事件

# c# - 从 MSTest Runner 或 Console App 的 Debugger 下使用 PortableClassLibrary 的类中的 ConfiguredTaskAwaitable 有什么问题？

> ID：13726444
> 
> 赞同：12
> 
> 时间：2012-12-05T15:19:45.103
> 
> 标签：c#, console-application, mstest, async-await, portable-class-library

*注意：这只是一个调试时错误，但非常奇怪。*

## 问题：

在附加调试器运行并调用方法时，在单独的可移植库中公开，返回`ConfiguredTaskAwaitable`，我们得到`InvalidProgramException`.

## 重现它：

有2个项目：

1.  PortableClassLibrary（支持 .Net 4.5；Windows Store；Windows Phone 8）有 1 个类：

    ```
    public class Weird
    {
        public static ConfiguredTaskAwaitable GetConfiguredTaskAwaitable()
        {
            return new ConfiguredTaskAwaitable();
        }
    } 
    ```

2.  带有代码的控制台应用程序：

    ```
    static void Main(string[] args)
    {
        Weird.GetConfiguredTaskAwaitable();
    } 
    ```

## 笔记：

1.  替换`ConfiguredTaskAwaitable`为`ConfiguredTaskAwaitable<T>`（通用版本）修复了这个奇怪的问题
2.  在 Debugger 下从 WP8 或 Win8 应用程序使用此方法可以正常工作。

目前它会导致问题，因为我无法在调试器下运行我的单元测试。我被迫更改我的“ObjectUnderTest”实现以返回 generic `ConfiguredTaskAwaitable<T>`，这对于实际项目来说很好，但仍然只是一种解决方法。

## 问题是：

有人知道这个错误的原因吗？它肯定与可移植类库的魔法有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:43:57.433

您是否使用启用了 IntelliTrace 的 Visual Studio Ultimate 2012？这看起来像是一个错误，应该在Visual Studio 2012的最新[CTP 、Update 2 和未来版本中修复。](http://www.microsoft.com/en-us/download/details.aspx?id=36833)

您可以通过转到工具/选项/IntelliTrace 并关闭“启用 IntelliTrace”来确认这是问题所在（并解决它直到您得到修复）。

# android - 合并适配器内存泄漏？

> ID：13726445
> 
> 赞同：2
> 
> 时间：2012-12-05T15:19:47.370
> 
> 标签：android, memory-leaks

我正在调查我们应用程序中的内存不足错误报告。

我们的应用程序显示了一个列表视图，其中应用程序图标作为列表视图项的一部分。

当使用标准 baseadapter 填充此列表视图时，可以观察到当包含它们的视图消失时，应用程序不会保留可绘制对象。

这也使用弱引用进行了测试：

```
 public Drawable getIcon() {
        Log.v("AppResult", "getIcon()");
        Drawable icon = appInfo.loadIcon(pm);       
        leakTester.add(new WeakReference<Drawable>(icon));
        ArrayList<WeakReference<Drawable>> copy = new ArrayList<WeakReference<Drawable>>(leakTester); 
        for (WeakReference<Drawable> oldIcon: leakTester)
        {
            if (oldIcon.get() == null)
            {
                Log.v("AppResult", "iconRecycled");
                copy.remove(oldIcon);
            }
        }
        leakTester = copy;
        return icon;
    } 
```

滚动浏览正常的 baseadapter 驱动的列表视图时记录：

```
12-05 16:17:57.450: V/AppResult(24890): getIcon()
12-05 16:17:57.450: V/AppResult(24890): iconRecycled
12-05 16:17:57.510: V/AppResult(24890): getIcon()
12-05 16:17:57.520: V/AppResult(24890): iconRecycled
12-05 16:17:57.580: V/AppResult(24890): getIcon()
12-05 16:17:57.590: V/AppResult(24890): iconRecycled
12-05 16:17:57.730: V/AppResult(24890): getIcon()
12-05 16:17:57.730: V/AppResult(24890): iconRecycled
12-05 16:17:58.510: V/AppResult(24890): getIcon()
12-05 16:17:58.510: V/AppResult(24890): iconRecycled
12-05 16:17:58.570: V/AppResult(24890): getIcon()
12-05 16:17:58.570: V/AppResult(24890): iconRecycled
12-05 16:17:58.650: V/AppResult(24890): getIcon() 
```

然而，当我使用一个合并适配器时，它充满了交替的标题文本视图和基础适配器，就像之前使用的那样，我收到的消息很少 `iconRecycled`。即使这些适配器在可用时确实使用了回收视图。（该应用程序的使用量达到 35MB！在滚动完整列表后，它在其他活动中保持在 12MB）。

```
12-05 16:15:04.800: V/AppResult(24890): getIcon()
12-05 16:15:04.860: D/dalvikvm(24890): GC_FOR_ALLOC freed 34K, 1% free 35857K/36167K, paused 26ms
12-05 16:15:04.860: V/AppResult(24890): getIcon()
12-05 16:15:04.910: V/AppResult(24890): getIcon()
12-05 16:15:04.910: V/AppResult(24890): getIcon()
12-05 16:15:04.910: V/AppResult(24890): iconRecycled
12-05 16:15:04.910: V/AppResult(24890): iconRecycled
12-05 16:15:04.950: V/AppResult(24890): getIcon()
12-05 16:15:04.950: V/AppResult(24890): getIcon()
12-05 16:15:04.950: V/AppResult(24890): getIcon()
12-05 16:15:13.260: V/AppResult(24890): getIcon()
12-05 16:15:13.430: V/AppResult(24890): getIcon()
12-05 16:15:13.590: V/AppResult(24890): getIcon()
12-05 16:15:14.300: V/AppResult(24890): getIcon()
12-05 16:15:14.370: V/AppResult(24890): getIcon()
12-05 16:15:14.440: V/AppResult(24890): getIcon() 
```

这是我的实施中的错误吗？看起来合并适配器以某种方式不再释放不再可见的视图。这个对吗？

编辑

我通过 MAT 运行它，结果如下：

```
java.util.ArrayList[32] @ 0x413beb88  144 19.833.288 
  \mScrapViews android.widget.AbsListView$RecycleBin @ 0x4129bd9040 19.833.496 
    .\mRecycler android.widget.ListView @ 0x412c5db8  896 23.635.384 
      ..+mFocusedView, mRealFocusedView android.view.ViewRootImpl @ 0x4133fae8 440 1.776 
        ..|+this$0 android.view.ViewRootImpl$2 @ 0x4136f540 Native Stack 16 16 
        ..|+[1] android.view.ViewRootImpl[2] @ 0x41340930 » 24 24 
        ..|+this$0 android.view.ViewRootImpl$AccessibilityInteractionConnectionManager @ 0x413157e8 » 16 16 
        ..|\Total: 3 entries       
      ..+mServedView, mNextServedView android.view.inputmethod.InputMethodManager @ 0x413511f8 » 104 368 
      ..+listview com.denper.addonsdetector.ui.InstallDateLister @ 0x412d8bd8 » 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:56:59.163

> 看起来合并适配器以某种方式不再释放不再可见的视图。这个对吗？

如果“视图”是指“交替的标题文本视图”，那么当然`MergeAdapter`“不会释放不再显示的视图” - 如果`MergeAdapter`释放它们，则`MergeAdapter`当用户向后滚动时无法显示它们，因为它一旦发布，就没有办法让那些`View`s再次回来。

如果您所说的“视图”是指“像之前使用的那样的基本适配器”的内容，那么从一开始就`MergeAdapter`永远不会持有这些`View`s，因此不能持有它们。但是，增加类似方法的值可能`getCount()`会导致`ListView`.

# notepad++ - 用记事本++中的相同+更改替换未知字符

> ID：13726448
> 
> 赞同：0
> 
> 时间：2012-12-05T15:19:57.460
> 
> 标签：notepad++, replace, programmers-notepad

这个有点啰嗦，请多多包涵！

尽管我无法解决一个问题，但我已经完成了我需要对一个巨大的（560,000 多行）十六进制捕获进行的大部分过滤。我需要过滤掉以逗号分隔的多个时间码的行...例如

```
00360A,735189.612255,A40A,735189.612255,0000F039003F0D,735189.612255,890763633D 
```

此行中的 735189.612255 是时间戳。每一行都需要 F0D 之后的印章，但其他的可以去掉。

另一个烦人的部分是时间码的初始部分是恒定的（6 位 735189），第二部分会发生变化，并且是 3、4,5 或 6 位。

我尝试了搜索和替换`[^F0D],735189.......,`，找到了 6 位数字，然后减少 . 对于 5、4、3 等以及在播放过程中的参考，我替换为文本`DELETE`- 搜索删除并删除了所有实例。然后我发现有些仍然存在，因为它们在第一个逗号之前有 x0D（x 是不是 F 的字母数字字符）

我尝试搜索`[^F]0D,735189.....,`与之前相同的等，仅替换为`0DDELETE`删除 x 字符。

有没有一种更简单的方法来做我正在做的事情以供将来参考，以及如何在替换时将 [^F] 字符替换为原始字符？我可以手动完成，但这需要几个小时！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:25:14.740

我找到了一种解决方案，即搜索 F0D,735189。并替换为 F0D,0735189。

然后搜索 ,735189......' 返回所有我希望通过进一步搜索删除的结果并替换返回的 ,0735189。返回 ,735189

尽管它似乎确实有效，但它并不是最好的方法。如果有人有更好的解决方案，仍然开放

# javascript - d3 自定义日期格式

> ID：13726449
> 
> 赞同：0
> 
> 时间：2012-12-05T15:19:58.457
> 
> 标签：javascript, d3.js

我收到了客户的请求，要求使用折线图制作项目燃尽图。问题是他们希望 x 轴上的日期以特定方式格式化 mmm dd-dd/yy（例如 Nov 18-24/12），其中 18-24 是一周（18 日到 24 日）。是否可以在 D3 中创建自定义日期格式，如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:56:16.770

是的，您可以创建自定义日期格式。

```
var xAxis = d3.svg.axis()
    .scale(x)
    .tickFormat(customDateFormat);

function customDateFormat(date) {
  // figure out what week the current date is in
  // and return the appropriate string
} 
```

如果你想更高级，你可以像 d3.js 实现内置格式化程序一样实现一个完整的格式化程序。有关示例，请参见[http://bl.ocks.org/4149176 。](http://bl.ocks.org/4149176)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:36:28.310

是的，这是可能的。请参阅[上的文档`d3.time.format`](https://github.com/mbostock/d3/wiki/Time-Formatting)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:39:37.550

过去，当涉及非常规格式时，我使用 javascript 对日期进行排序/格式化，然后将值发送到 D3。

我用过[date.js](http://www.mattkruse.com/javascript/date/source.html)。它是一个较旧的 js 库，但它可以完成工作并且提供多种格式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T16:15:09.783

我创建了自己的格式说明符“%o”

```
o: function(d) {
    var weekInSeconds = 6 * 86400000;
    var eowDate = new Date(d.getTime() + weekInSeconds);
    return d3_time_zfill2(eowDate.getDate());
}, 
```

在 d3.v2.js 文件中的第 6824 行附近。不是最干净的实现，但它有效。

# jquery - 用 svg 淡出 div

> ID：13726452
> 
> 赞同：1
> 
> 时间：2012-12-05T15:20:04.923
> 
> 标签：jquery

我有一个 div，我可以用 jQuery 淡出它。但是当我在那个 div 里面放一个 svg 时，我不能再这样做了。是否可以淡出带有 svg 的 div？

HTML：

```
<div id="interrogant">
<object data="interrogant.svg" width="80" height="150" type="image/svg+xml"></object>
</div> 
```

CSS：

```
#interrogant{cursor: pointer; background-color:blue; width:80px; height:150px;} 
```

查询：

```
$(function(){   
    $("#interrogant").click(function() {
        $("#interrogant").fadeOut("normal");
    });     
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:33:44.490

我认为当我将 svg 放入 div 中时，我无法使用它来淡出或用 jQuery 做任何事情。但我可以如果我在该 div 之外甚至在该 div 之上创建另一个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:23:08.590

尝试

```
$(function(){   
    $("div#interrogant object").click(function() {
        $(this).fadeOut("normal");
    });     
}); 
```

除非你需要使用 data 属性

```
$('object[data="interrogant.svg"]').click(function() { 
```

# java - 使默认阅读器打开所有固定扩展名的文件（例如 *.txt）

> ID：13726461
> 
> 赞同：0
> 
> 时间：2012-12-05T15:20:26.683
> 
> 标签：java, file, filereader, default-programs

我正在编写一个 JAVA 阅读器来读取 .txt 文件作为记事本的替代品。现在，问题是，我想将该程序设置为打开所有 .txt 文件的默认程序。现在，程序将如何区分我通过程序打开的文件？我不想制作一个首先打开 JFileChooser 并让用户通过 JFileChooser 打开该文件的程序。我只想在java中制作一个记事本，它将像记事本一样打开.txt文件。当我单击一个文件说***** .txt 时，它将使用我的程序打开该文件，我的程序将显示该文件的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:23:34.790

当然，这里的问题是让 Windows/OSX/Linux 将您的程序注册为默认值，这可能必须在您的程序范围之外发生？

您可以在 Windows/Mac 上执行“打开方式...”（在 Linux 上不确定），然后只使用您的程序。然后，您的程序可以将文件名作为命令行参数并按照您的意愿使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:24:11.680

我没有测试它，但我希望如果您从源创建一个 Jar 文件，并让您的操作系统指向该文件以打开 *.txt 文件，那么要打开的文件的绝对路径将在您的主要“字符串 [] 参数”。你能做一个快速测试吗？

# python - Python中与大指数一起使用的贝塞尔函数

> ID：13726464
> 
> 赞同：9
> 
> 时间：2012-12-05T15:20:39.783
> 
> 标签：python, scipy, bessel-functions

我有一些代码使用修改后的一阶和二阶（iv 和 kv）贝塞尔函数。令人讨厌的是，它们似乎有限制，它们是 iv(0,713) 和 kv(0,697)，每加一个，你分别得到无穷大和 0。这对我来说是个问题，因为我需要使用高于此的值，通常高达 2000 或更多。当我尝试除以这些时，我最终会除以 0 或无穷大，这意味着我要么得到错误，要么得到零，这两者都不是我想要的。

我正在使用[scipy bessel 函数](http://docs.scipy.org/doc/scipy/reference/special.html#bessel-functions)，有没有更好的函数可以处理更小和更大的数字，或者修改 Python 以处理这些大数字的方法。我不确定这里的真正问题是什么，为什么 Python 不能超过 700，是函数还是 Python？

我不知道 Python 是否已经在这样做，但我只需要前 5-10 个数字 *10^x 例如；也就是说，我不需要所有 1000 位数字，与 Wolfram Alpha 的工作方式相比，这可能是 Python 工作方式的问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:56:12.603

如果使用双精度机器浮点，Scipy 中的`iv`和`kv`函数或多或少与您可以获得的一样好。如上面的评论中所述，您正在工作的范围内结果从浮点范围溢出。

您可以使用`mpmath`可调整精度（软件）浮点的库来解决这个问题。（它类似于 MPFR，但在 Python 中）：

```
In [1]: import mpmath

In [2]: mpmath.besseli(0, 1714)
mpf('2.3156788070459683e+742')

In [3]: mpmath.besselk(0, 1714)
mpf('1.2597398974570405e-746') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-15T21:34:21.163

您可以使用指数缩放的修正贝塞尔函数直接执行此操作，该函数不会溢出。这些实现为`special.ive`和`special.kve`。例如，第一类修正贝塞尔函数`special.iv(0, 1714)`, 会溢出。但是，只要您不记录已经溢出的内容，它的对数将是完全明确的：

```
In [1]: import numpy as np

In [2]: from scipy import special

In [3]: np.log(special.iv(0, 1714))
Out[3]: inf

In [4]: np.log(special.kv(0, 1714))
Out[4]: -inf

In [5]: np.log(special.ive(0, 1714)) + 1714
Out[5]: 1709.3578418673253

In [6]: np.log(special.kve(0, 1714)) - 1714
Out[6]: -1717.4975741044941 
```

其他容易溢出的函数也可以作为日志或缩放版本使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T17:31:53.170

`mpmath`是一个*很棒*的库，是进行高精度计算的方法。值得注意的是，这些函数可以从它们更基本的成分中计算出来。因此，您不必遵守 scipy 的限制，您可以使用不同的高精度库。下面的最小示例：

```
import numpy as np
from scipy.special import *

X = np.random.random(3)

v = 2.000000000

print "Bessel Function J"
print jn(v,X)

print "Modified Bessel Function, Iv"
print ((1j**(-v))*jv(v,1j*X)).real
print iv(v,X)   

print "Modified Bessel Function of the second kind, Kv"
print (iv(-v,X)-iv(v,X)) * (np.pi/(2*sin(v*pi)))
print kv(v,X)

print "Modified spherical Bessel Function, in"
print np.sqrt(np.pi/(2*X))*iv(v+0.5,X)
print [sph_in(floor(v),x)[0][-1] for x in X]   

print "Modified spherical Bessel Function, kn"
print np.sqrt(np.pi/(2*X))*kv(v+0.5,X)
print [sph_kn(floor(v),x)[0][-1] for x in X]

print "Modified spherical Bessel Function, in"
print np.sqrt(np.pi/(2*X))*iv(v+0.5,X)
print [sph_in(floor(v),x)[0][-1] for x in X] 
```

这给出了：

```
Bessel Function J
[ 0.01887098  0.00184202  0.08399226]

Modified Bessel Function, Iv
[ 0.01935808  0.00184656  0.09459852]
[ 0.01935808  0.00184656  0.09459852]

Modified Bessel Function of the second kind, Kv
[  12.61494864  135.05883902    2.40495388]
[  12.61494865  135.05883903    2.40495388]

Modified spherical Bessel Function, in
[ 0.0103056   0.00098466  0.05003335]
[0.010305631072943869, 0.00098466280846548084, 0.050033450286650107]

Modified spherical Bessel Function, kn
[   76.86738631  2622.98228411     6.99803515]
[76.867205587011171, 2622.9730878542782, 6.998023749439338]

Modified spherical Bessel Function, in
[ 0.0103056   0.00098466  0.05003335]
[0.010305631072943869, 0.00098466280846548084, 0.050033450286650107] 
```

除非基础数据具有高精度，否则您正在寻找的大值将失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-20T09:58:20.753

可能问题出在功能上。对于大的正 x，任何 nu 都有渐近的 kv(nu,x) ~ e^{-x}/\sqrt{x}。因此，对于大 x，您最终会得到非常小的值。如果您能够改为使用 Bessel 函数的日志，问题就会消失。Scilab 利用了这种渐近性：它有一个参数 ice，默认为 0，但当设置为 1 时，将返回 exp(x)*kv(nu,x)，这样可以保持一切合理的大小。

实际上，在 scipy - scipy.special.kve 中也可以使用

# asp.net - Web Deploy 和 Parameters.xml：如何在多个项目之间共享参数

> ID：13726467
> 
> 赞同：4
> 
> 时间：2012-12-05T15:20:44.143
> 
> 标签：asp.net, xml, iis, parameters, msdeploy

我在一个套件中有许多网络应用程序。我使用 Web Deploy 发布使用 Visual Studio 构建的部署包。这些包附带了一个 SetParameters.xml 文件，可用于修改 web.config 中的值。有几个值是自动完成的，例如连接字符串，但可以将 parameters.xml 文件添加到项目中，以指定应该可参数化的值：

```
 <?xml version="1.0" encoding="utf-8" ?>
     <parameters>
         <parameter name="Sharepoint service principal name"
                    description="The principal name of the Sharepoint service."
                    defaultValue="host/108.125.111.137">
              <parameterEntry kind="XmlFile"
                              scope="\\Web\.config$"
                              match="/configuration/system.serviceModel/client/endpoint/identity/servicePrincipalName/@value"/>
         </parameter>
    </parameters> 
```

我的问题是：如果我所有的 Web 应用程序在 web.config 中都有一个应用程序设置，并且我想在部署时修改相同的键和值，我怎样才能避免在每个 parameters.xml 文件中重复特定参数？有没有办法将此标签放在一个位置并让每个 parameters.xml 引用该公共位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T03:13:27.897

如果您使用的是 VS2010 RTM Web Publishing，那么没有。

但是，如果您使用的是 VS2012（或 VS2010 + Azure SDK），您可以简单地定义参数文件`ParametersXMLFiles`，在项目文件 wpp.targets 或发布配置文件中声明一个附加项：

```
<ItemGroup>
  <ParametersXMLFiles Include="$(SolutionDir)\CommonParameters.xml" />
<ItemGroup> 
```

这些将与每个项目根目录中的 Parameters.xml 以及使用`MsDeployDeclareParameters`.

# jquery - jQuery requestAnimationFrame 在失去浏览器焦点时禁用暂停

> ID：13726469
> 
> 赞同：0
> 
> 时间：2012-12-05T15:20:49.273
> 
> 标签：jquery, html, requestanimationframe

我正在使用动画构建一个 jQuery 应用程序。

目前，`requestAnimationFrame`如果我最小化浏览器或更改浏览器选项卡，API 会暂停动画，然后当我回到我的应用程序时，它会再次启动。

是否可以避免这种暂停，以便在我离开当前选项卡时动画继续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:39:30.210

这正是 ; 的预期行为`requestAnimationFrame`。当浏览器专注于脚本正在运行的选项卡时请求一个帧。如果您需要动画不断运行，那么您将要使用它`setInterval`。

```
var FPS = 30;
setInterval(function()
{
  draw();
}, 1000/FPS); 
```

# java - Java 字体 Monospaced 和 DialogInput 之间的语义区别是什么？

> ID：13726470
> 
> 赞同：0
> 
> 时间：2012-12-05T15:20:52.190
> 
> 标签：java, fonts

我找不到 Java 文档解释它的地方。API 文档没有这样做：

*   [等宽](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#MONOSPACED)
*   [对话输入](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#DIALOG_INPUT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:05:21.760

我不确定您到底在问什么，但字体引用通常通过它们的使用位置来识别。例如：

*   等宽字体通常用于列应对齐的文本 - 例如用于代码。

*   我不熟悉`AWT`，但我认为这`DialogInput`是在对话框输入文本字段中使用的默认字体。我希望这与本机应用程序用于一致的视觉结果相匹配。

没有记录的差异，因为每个字体参考都有自己的目标用途。实际字体可能不同，也可能不同，具体取决于底层配置。

您在代码中使用的内容由您自行决定，尤其是当存在概念重叠或冲突时。例如，您可能应该为希望用户提交代码的文本框使用等宽字体，而不是默认的对话框输入字体。

PS：顺便说一句，令人惊讶的是有多少应用程序要求用户在没有等宽字体的文本框中编写代码（例如 CSS）。为什么我必须无缘无故地将代码来回粘贴到编辑器？做对真的那么难吗？

# matlab - 如何在 Matlab 中用字符串编写矩阵输出

> ID：13726471
> 
> 赞同：0
> 
> 时间：2012-12-05T15:20:53.377
> 
> 标签：matlab

我是 Matlab 的新手，我不确定如何搜索我想要实现的目标。

假设我有一个如下所示的矩阵：

```
x = [1;2;3]; 
```

我如何输出如下内容：

```
First row = 1
Second row  = 2
Third row = 3 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:31:41.767

好吧，你总是可以使用`fprintf`，但它不会计算英文的行号:)

```
fprintf('row value %d\n', x)

row value 1
row value 2
row value 3 
```

如果您坚持，您还可以添加单独的行文本：

```
% convert your x vector to a cell matrix
Cx = mat2cell(x, ones(size(x)));

% define individual row texts in a cell matrix
str = {'First  row'; 'Second row'; 'Third  row'};

% print both using cellfun
cellfun(@(s,v)fprintf('%s %d\n', s, v), str, Cx);

First  row 1
Second row 2
Third  row 3 
```

# php - 动态添加选项以使用 ajax 进行选择

> ID：13726472
> 
> 赞同：0
> 
> 时间：2012-12-05T15:20:54.203
> 
> 标签：php, ajax, jquery

我正在尝试使用 PHP、jQuery 和 AJAX 向框动态添加选项。

首先，当第一个控件（taglist）改变时调用 AJAX：

```
$('#taglist').change(function(){
    $.post('../includes/ajax.php', {   
      taglist:$(this).find("option:selected").attr('value')}, function(data) {
      $("#catlist").html(data.catlist);
    });
}); 
```

我编写的 PHP 函数 fillselecteditmultiple() 填充了以下格式的字符串：

```
$options = '<option value="1">Option 1</option><option value="2">Option 2</option><option value="3">Option 3</option>'; 
```

我使用 json_encode 将其返回到页面，如下所示：

```
if(isset($_POST['taglist'])){
    $catresult = mysql_query("select catid from category_tags where id='".$_POST['taglist']."'");
    $rowcat = mysql_fetch_array($catresult);

    $catlist = '<select name="cat_id[]" size="5" multiple id="cat_id[]">';
    $catlist .= fillselecteditmultiple(1, 0, $rowcat['catid']);
    $catlist .= '</select>';
    echo json_encode(array("status"=>"success", "catlist" => $catlist));
} 
```

我需要在 a 中相应地返回该字符串（$catlist）`<select id="mylist"></select>`，以便最终输出是这样的：

```
<select id="mylist">
  <option value="1">Option 1</option>
  <option value="2">Option 2</option>
  <option value="3">Option 3</option>
</select> 
```

在 Firebug 中，我正确地看到了响应，但页面中没有显示任何内容。

我该怎么做？如果您觉得我的问题不完整，请要求任何澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:25:31.123

如果您运行 jquery lib，请执行以下操作：

```
$.ajax({
  url: 'your_script_url.php',
  success: function(data) {
    $('#mylist').html(data);
  }
}); 
```

或者，如果您想添加额外的选项，您可以附加数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:25:46.007

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
   //Relevant code
    $('#mylist').html(data);
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:23:16.587

用于`.append`在元素内插入内容。见下文，

```
$('#mylist').append($options); 
```

# heroku - Neo4J-spatial 是否已经包含在 heroku 中？

> ID：13726473
> 
> 赞同：1
> 
> 时间：2012-12-05T15:21:03.577
> 
> 标签：heroku, geospatial, neo4j

我一直在阅读有关 Neo4J 的信息：[https ://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/TestSimplePointLayer.java](https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/TestSimplePointLayer.java)

但我不明白如何使用它们，实际上我什至不知道 Heroku 中 Neo4J 的 beta 版本是否支持这一点，有人可以告诉我这是否可行，如果可以，你有一些代码可以吗？指导我如何将纬度/经度添加到节点？如果可以的话，在 REST API 中，因为我使用的是 .Net，所以我不能在 java 中拥有完整的客户端库

提前致谢

# javascript - 如何翻译谷歌分析仪表板？

> ID：13726475
> 
> 赞同：0
> 
> 时间：2012-12-05T15:21:07.683
> 
> 标签：javascript, google-analytics, google-analytics-api, dashboard, google-visualization

我正在使用[gadash 库](http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html#reference)，但我不知道如何翻译图表图例标签。

在[这个示例演示](http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/demos/set-demo.html)中，我得到“访问者、访问量、浏览量”。我想要那些翻译的。

我的代码：

```
 <script>
    var dataOverTime = new gadash.Chart({
        'last-n-days': 30,
        'chartOptions': {
            width: 700
        },
        'divContainer': 'dataOverTimeConfig',
        'type': 'LineChart',
        'query': {
          'dimensions': 'ga:date',
          'sort': 'ga:date',
          'metrics': 'ga:visitors, ga:visits, ga:pageviews',
          'ids' : TABLE_ID    
        },
        'chartOptions': {
            height: 300,
            legend: {position: 'bottom'},
            hAxis: {title:'Data'},
            curveType: 'function'
        }
    }).render();
  </script> 
```

我可以将任何“语言环境”属性添加到查询中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:39:51.693

答案是自定义 onSuccess 函数：

```
 'onSuccess': function(resp) {              
            var dataTable = gadash.util.getDataTable(resp);
            // customized part
            dataTable.z[1].label = "First custom label";
            dataTable.z[2].label = "Second custom label";
            dataTable.z[3].label = "Third custom label";
            // end of customized part
            var chart = gadash.util.getChart(this.config.divContainer, this.config.type);
            gadash.util.draw(chart, dataTable, this.config.chartOptions);
            gadash.onSuccess();
        } 
```

# svn - 用于托管多个域的服务器的 DAV SVN 配置

> ID：13726482
> 
> 赞同：2
> 
> 时间：2012-12-05T15:21:24.233
> 
> 标签：svn, apache2, virtualhost, mod-dav-svn

我有一个配置为服务多个域的 apache2 网络服务器（我用虚拟主机做了）。

安装 Subversion 并启用 DAV SVN 后，可以通过配置的所有域访问存储库。如何只为一个域启用 svn 访问？

示例：在 dav_svn.conf 中，Location 指向 /svn，这意味着 www.domain1.com/svn/ 和 www.domain2.com/svn/ 都将授予对 Subversion 服务器的访问权限。我只想从 www.domain1.com/svn/ 访问它。

任何帮助将非常感激。

# haskell - 了解 cabal 依赖消息

> ID：13726483
> 
> 赞同：1
> 
> 时间：2012-12-05T15:21:26.367
> 
> 标签：haskell, dependencies, dependency-management, cabal

目前，当我尝试安装 GOA 时，我收到以下消息：

```
>sudo cabal install goa
Resolving dependencies...
In order, the following would be installed:
directory-1.1.0.2 (reinstall) changes: filepath-1.3.0.0 -> 1.2.0.1
process-1.0.1.5 (new version)
goa-3.1 (new package)
cabal: The following packages are likely to be broken by the reinstalls:
.... 
```

我的问题是这是否意味着我目前将“filepath-1.3.0.0”作为默认值，而 cabal（在 --force-reinstalls 之后）将覆盖它并将“filepath-1.2.0.1”作为默认值？我有点困惑的原因是当我查看位置时：

阴谋集团/packages/hackage.haskell.org/filepath

我发现 1.2.0.1 和 1.3.0.0 都存在。此外，命令“cabal list filepath”表示两个软件包都已安装（请参阅下面的“已安装版本：1.2.0.1、1.3.0.0”）：

```
>cabal list filepath
......
* filepath
    Synopsis: Library for manipulating FilePaths in a cross platform way.
    Default available version: 1.3.0.1
    Installed versions: 1.2.0.1, 1.3.0.0
    Homepage: http://www-users.cs.york.ac.uk/~ndm/filepath/
    License:  BSD3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:45:11.630

现在，您已经`directory-1.1.0.2`安装并构建了`filepath-1.3.0.0`.

这里的问题是您正在安装[`goa`](http://hackage.haskell.org/package/goa)需要`filepath (≥1.1 & <1.3)`,**和** `directory (≥1.0 & <1.2)`. 您已经安装了所有正确的软件包，但`directory`构建的`filepath`. Cabal-install 对这个冲突的解决方案是重建`directory`，以便它使用旧版本的`filepath`. 所有这一切都是因为你不应该在包的依赖项中拥有同一个包的多个版本（`goa`在这种情况下）。

# java - Java 的 Profiler [几乎] 不会减慢已分析的代码

> ID：13726487
> 
> 赞同：1
> 
> 时间：2012-12-05T15:21:33.110
> 
> 标签：java, tomcat, profiling, jprofiler

有必要查看大型遗留代码中的瓶颈在哪里，并且负载测试工具不太可能揭示真实的瓶颈，因此我们最终可能会在生产环境中这样做。是否有一个用于 java 代码的分析器，它可以将代码减慢 10%，而不是“几次”？此外，还必须能够轻松插入分析器并轻松拔下它以恢复原始性能。是否有接近这些要求的分析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:54:34.807

我已经使用[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)来检测我前段时间开发的 Web 应用程序中的问题。性能损失实际上取决于您要监视的资源（正如他的回答中已经提到的那样）。根据我的整体经验，将 JProfiler 插入/拔出我的应用程序很容易，此外还有预定义的资源监控选项，其中描述了它对将要被分析的应用程序性能的影响。

不幸的是，我无法说明它与其他现有工具相比有多好，而只是指出我使用该工具的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:09:47.843

我所知道的 Java最好的[性能监视器是](http://www.ensenadamexico.net/hector/mest/Art_Of_Computer_Systems_Performance_Analysis_Techniques_For_Experimental_Measurements_Simulation_And_Modeling-Raj_Jain.pdf)[Jamon](http://jamonapi.sourceforge.net/)。除了这些统计数据的查询引擎之外，您还将获得一个 Web 前端和非常好的统计数据。实际上是一个很棒的项目。

“监视器是用于观察系统活动的工具。通常，监视器会观察系统的性能，收集性能统计信息，分析数据并显示结果。有些还可以识别问题区域并提出补救措施。” [计算机系统性能分析的艺术](http://www.ensenadamexico.net/hector/mest/Art_Of_Computer_Systems_Performance_Analysis_Techniques_For_Experimental_Measurements_Simulation_And_Modeling-Raj_Jain.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:35:00.957

Profiler ...可能不会。但是您可以尝试使用[BTrace](http://kenai.com/projects/btrace)。

根据我的经验，BTrace 开销远没有任何分析器那么明显（当然，取决于活动 - 例如，如果您想跟踪所有方法的执行，无论如何这都会很昂贵）。

最重要的是，BTracing 不需要任何特殊的 JVM 启动参数。是的，您可以在需要时插入/拔出它。

# javascript - 获取tinyMCE的内容？

> ID：13726489
> 
> 赞同：2
> 
> 时间：2012-12-05T15:21:33.983
> 
> 标签：javascript, tinymce

我有一个 ID 为“文章”的文本区域。

这是我的js中的内容：

```
tinyMCE.init({
        theme : "advanced",
        mode : "textareas",
        plugins : "fullpage",
        theme_advanced_buttons3_add : "fullpage"
    }); 
```

并获取编辑器的内容：

```
var content = tinyMCE.get('article').getContent();
    alert(content); 
```

但它似乎不起作用，任何想法我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-23T21:50:14.207

```
tinyMCE.activeEditor.getContent() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:42:54.800

试着按照这个[小提琴](http://fiddle.tinymce.com/t0caab)它可能会帮助你弄清楚....

```
tinyMCE.init({
    theme : "advanced",
    mode : "textareas",
    plugins : "fullpage",
    theme_advanced_buttons3_add : "fullpage"
}); 
```

获取内容的函数

```
function get_content() {
var content = tinyMCE.get('article').getContent();
alert(content);
}

<textarea name="article">
  //content here
</textarea> 
```

单击按钮获取编辑器的内容...

```
<button onclick="get_content()">Get content</button> 
```

[演示](http://fiddle.tinymce.com/t0caab)

# ruby-on-rails - 生产环境错误

> ID：13726492
> 
> 赞同：14
> 
> 时间：2012-12-05T15:21:47.333
> 
> 标签：ruby-on-rails

首先，我是 Rails 的新手。我正在制作一个博客应用程序，当尝试在生产环境中运行它时，两种方式：

```
rails s -e production 
```

和

```
RAILS_ENV=production 
```

我犯了同样的错误：

> *=> 引导 WEBrick => Rails 3.2.8 应用程序在http://0.0.0.0:3000*上开始生产
> => 使用 -d 调用以分离
> => Ctrl-C 以关闭服务器
> 退出
> /home/loku/.rvm/gems /ruby-1.9.3-p286/gems/activerecord->resolve_hash_connection': 数据库配置未指定适配器 (ActiveRecord::AdapterNotSpecified)
> ...

我的设置：

```
ruby 1.9.3p286 (2012-10-12 revision 37165) [i686-linux]

Rails 3.2.8 
```

数据库.yml：

```
development:    
  adapter: mysql2    
  encoding: utf8    
  reconnect: false    
  database: blogg_development    
  pool: 5    
  timeout: 5000    
  username: root    
  password: *** 
  host: localhost    

production:    
  adapter: mysql2       
  encoding: utf8    
  reconnect: false    
  database: blogg_production    
  pool: 5    
  timeout: 5000    
  username: root    
  password: ***    
  host: localhost 
```

宝石文件：

```
source 'https://rubygems.org'
ruby '1.9.3'
gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'haml-rails'
  gem 'less-rails'
  gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-    rails.git'
  #gem 'actionpack', '~> 3.1.0'
end

gem 'jquery-rails'
gem 'haml'
gem 'devise'
gem 'cancan'

group :test, :development do
  gem 'guard-livereload'
  gem 'rb-fsevent'
  gem 'pry'
  gem 'pry-rails'
end

group :linux do
  gem 'libnotify'
end

group :darwin do
  gem 'rb-fsevent', require: false
  gem 'growl'
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-14T20:07:33.767

这些是要考虑的事情

1.  Gemfile中的mysql2（它是）
2.  config/database.yml 中定义的生产环境（它是） 2.2 从您的 database.yml 中删除任何其他环境并离开生产：仅
3.  确保它正确缩进（我认为是）
4.  捆绑安装（以确保您已安装宝石）
5.  bundle show mysql2 查看版本并确保已安装
6.  bundle exec rails s -e production（确保使用 bundle exec）

7.  如果这不起作用，我会查看 config/environments/production.rb 并确保那里没有任何罕见的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-15T16:20:48.407

根据来源，您遇到的错误只有两种可能的解释。AdapterNotSpecified - 当连接上未指定适配器（或配置文件`config/database.yml`缺少适配器字段）时引发。

您是否复制并粘贴了 database.yml 文件？如果是这样，您可能需要删除它并从头开始重新键入它们。确保缩进一致。有时在复制和粘贴时，您还会复制一些隐藏字符，这些字符会被评估并导致代码出现问题。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T00:25:43.443

您可能需要`production`在 gemfile 中添加一个组...类似于以下内容：

```
group :production do
    gem 'mysql2'
end 
```

从终端运行`bundle install`并尝试再次启动它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-15T16:31:00.280

Please make doubly certain what Rumen Milushev suggested: YAML is very sensitive to indentation.

Try removing the `production:` part completely, rename `development:` to `production:` and try again.

If that works, validate your database.yml against a tool such as [yamllint.com](http://yamllint.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-18T04:21:45.953

1.  您的 Gemfile 需要指定 mysql gem。——没关系，我现在看到了。
2.  您需要指定数据库套接字。它并不总是在 /tmp/mysql.sock 中，有时它在 /var... 这取决于您安装的 mysql2

    **socket: /tmp/mysql.sock**需要是你的 database.yml 生产部分中的一行

例如

```
production:    
  adapter: mysql2       
  encoding: utf8    
  reconnect: false    
  database: blogg_production    
  pool: 5    
  timeout: 5000    
  username: root    
  password: ***
  socket: /tmp/mysql.sock    
  host: localhost 
```

1.  yml 对缩进很有趣。仔细检查它是否正确。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-06T13:06:39.943

您需要指定所有忘记测试的环境，这可能是错误发生的原因

# c - 如何使用 scanf() 扫描带有空格的字符串？

> ID：13726499
> 
> 赞同：6
> 
> 时间：2012-12-05T15:22:16.603
> 
> 标签：c, input, scanf

我想编写一个子程序，用户可以在其中输入他们的评论。我使用`scanf("%s", X)`并让他们输入注释，但它只能将单词存储在字符串中空格键之前。

我怎样才能解决这个问题，以便将整个句子存储到字符串或文件中？

我的代码如下所示：

```
FILE *fp;
char comment[100];
fp=fopen("comment.txt","a");
printf("You can input your comment to our system or give opinion to the musics :\n");
scanf("%s",comment);
fputs(comment,fp); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-05T17:00:23.823

而不是告诉您*不要*使用的答案`scanf()`，您可以只使用[Negated scanset](http://www.cplusplus.com/reference/cstdio/scanf/)选项`scanf()`：

```
scanf("%99[^\n]",comment); // This will read into the string: comment 
                           // everything from the next 99 characters up until 
                           // it gets a newline 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T15:28:01.493

[](http://man7.org/linux/man-pages/man3/scanf.3.html)**使用[**as 格式说明符的scanf()**](http://man7.org/linux/man-pages/man3/scanf.3.html)`%s`读取从第一个非空白字符开始的字符序列，直到 (1) 另一个空白字符或 (2) 如果指定了字段宽度（例如`scanf("%127s",str);`-- 读取 127 个字符并将空字节附加为第 128 个字符） ）， 以先到者为准。然后在末尾自动附加空字节。传递给我的指针大到足以容纳输入的字符序列。**

 **您可以使用**[fgets](http://www.kernel.org/doc/man-pages/online/pages/man3/gets.3.html)**读取整行：

```
fgets(comment, sizeof comment, stdin); 
```

请注意， fgets 也会读取换行符。您可能希望从`comment`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T15:28:38.513

而不是在标准输入上使用 scanf`fgets`以读取整行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T17:32:05.543

您可以使用`gets()`,`getline()`函数从`stdin`.**

# model - YUI，同步许多对象

> ID：13726500
> 
> 赞同：1
> 
> 时间：2012-12-05T15:22:17.463
> 
> 标签：model, synchronization, yui

我正在评估 YUI 的[模型同步框架](http://yuilibrary.com/yui/docs/model/#model-sync-layers)。如果我理解正确，它的设计是让每个模型自己与服务器同步。

不过，就我而言，我可能会有多达一百个不同类型的不同对象（这是一个复杂的 Web 应用程序）。我不想产生 100 个不同的请求来一个一个地检索它们的数据——我希望能够聚合请求并在一个请求中发送它们以节省时间和带宽。

我应该如何设计我的代码以使 YUI 模型成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:40:00.870

为 ModelList 而不是 Model 实现同步。

您可能想查看示例[“GitHub Contributors”应用程序](http://yuilibrary.com/yui/docs/app/app-contributors.html)，它可以在一次调用中加载表示多个 GitHub 存储库的数据。或者查看更通用的[ModelSync.REST](http://yuilibrary.com/yui/docs/api/modules/model-sync-rest.html)对象的代码，它可以使用来自 ModelList 的单个请求为多个模型加载数据。事实上，如果您正在使用 REST API，您可能能够按原样使用 ModelSync.REST。

# mysql - MySQL 两个 auto_increment 列

> ID：13726501
> 
> 赞同：0
> 
> 时间：2012-12-05T15:22:17.827
> 
> 标签：mysql, sql

> **可能重复：**
> [mysql中的多个自动增量](https://stackoverflow.com/questions/7085275/multiple-auto-increment-in-mysql)

我有一个名为的表`projects`，我想将两列都设为 auto_increment。我希望auto_increment`id`和`order`列都是唯一的。

我怎样才能在 MySQL 中做到这一点？

到目前为止，这是我的创建语法：

```
CREATE TABLE `projects` (
   `id` int(6) unsigned NOT NULL AUTO_INCREMENT,
   `title` varchar(100) NOT NULL DEFAULT '',
   `description` varchar(500) DEFAULT NULL,
   `order` int(6) NOT NULL,
   PRIMARY KEY (`id`),
   UNIQUE KEY `order` (`order`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

# objective-c - 计数行结果集数据

> ID：13726502
> 
> 赞同：0
> 
> 时间：2012-12-05T15:22:19.130
> 
> 标签：objective-c, sqlite

我有一个 SELECT 查询，我想知道行数。

我试过了：

```
sqlite3_data_count(statement); 
```

但它总是返回 0 作为值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:46:24.980

SQLite 即时计算结果行，因此在实际读取所有这些行之前，您不知道行数。

您可以执行单独的查询`SELECT COUNT(*) FROM (original query)`，但这意味着查询会执行两次。

相反，您应该使用动态增长的数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:32:01.143

`sqlite3_data_count`不是计算行而是计算列。

`sqlite3_data_count`返回当前执行语句的值（列）数。如果没有结果，它会返回 0。
[此处链接](https://stackoverflow.com/questions/2228159/what-is-the-benefit-of-using-sqlite3-data-count-over-sqlite3-column-count-in)
您可以在[sqlite3_data_count()](http://code.google.com/p/pldatabase/source/browse/trunk/Dependencies/SQLite/sqlite3.h?r=404)的 .h 文档中对其进行验证。

要计算行数，您可以使用以下方法：

`SELECT COUNT(*) FROM "mytable"`

# ios - 在 xcode 中制作聊天应用程序

> ID：13726506
> 
> 赞同：0
> 
> 时间：2012-12-05T15:22:24.913
> 
> 标签：ios, xcode

我正在尝试使用[http://www.parse.com](http://www.parse.com)在 xcode 中制作我的第一个应用程序。我几乎是在复制[这些人](http://attila.tumblr.com/post/21180235691/ios-tutorial-creating-a-chat-room-using-parse-com)的说明，当我开始输入此代码时出现错误

```
PFObject *testObject = [PFObject objectWithClassName:@"TestObject"];
[testObject setObject:@"bar" forKey:@"foo"];
[testObject save]; 
```

在 FirstViewController.m 文件中。

```
 #import "DMFirstViewController.h"
@interface DMFirstViewController ()
@end
@implementation DMFirstViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    PFObject *testObject = [PFObject objectWithClassName:@"TestObject"];
    [testObject setObject:@"bar" forKey:@"foo"];
    [testObject save];  
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
@end 
```

有人可以帮助我，我将在发布此错误后发布错误。让我知道您需要我发布哪些其他代码来提供帮助，谢谢。

![这是我的 FirstViewController.m 文件的图片，其中包含错误。](../Images/403dfc98160f53ead30f0efa6f9f8fed.png) ![近距离图片](../Images/70f2bec798ed7729a2cb2e5e98cefe91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:33:15.493

你错过了这一行

```
 #import <Parse/Parse.h> 
```

每次你使用像PFObject这样以“PF”开头的东西时，它都是解析框架使用的对象，所以你需要导入框架。

# ruby-on-rails - 国际计量单位和轨道模型

> ID：13726512
> 
> 赞同：1
> 
> 时间：2012-12-05T15:22:40.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我需要创建一个主要是度量形式的客户模型。

它将记录有关用户的一些一般信息（姓名、年龄、性别等）和许多测量值（身高、体重、颈围、腰围等）。

该应用程序面向国际用户，因此有些人更喜欢使用厘米/公斤，其他人更喜欢使用英寸/磅。

我认为最好的方法是将所有数据以一致的格式存储在数据库中（例如公制）并在控制器端转换所有数据。

是否有规范的方式（或现有的 gem）在 rails 中获得它？如果不是，我会在模型中创建一个 preferred_measure_type 字段，然后在用户首选项中呈现所有视图。

另外我听说避免浮点数和小数并将数据存储为整数（在我的场景中为毫米和克）是明智的，然后在应用程序端进行所有转换。这是个好建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:36:25.620

最好以规范单位存储数据，然后进行转换以供显示。使用最小的度量来捕获您需要的详细信息，而不会溢出列的容量。例如，毫米可能适合衬衫尺寸，但可能不足以测量高速公路。

至于浮点数，这些都是有问题的，主要是因为舍入问题。在处理货币时，即使是微小的差异也会引起问题。2.00 美元加上 2.00 美元应始终等于 4.00 美元，而不是 3.9999917237 美元，这可能会无意中四舍五入为 3.99 美元，从而“丢失”一分钱。

在不需要这种精度和一致性的地方，浮点数很好。要记住的是，浮点数始终是您给它的任何值的*近似值*，并且随着数字变大，精度会降低。也就是说，`float`十亿中的a无法准确反映千分之一的变化，没有足够的精度来表示它。

因此，在可能的情况下，使用固定位置系统，例如使用特定单元。必要时，使用浮点值，但始终确保将它们正确舍入以进行显示，并记住它们始终是近似值而不是精确值。

# postgresql - 在 PostgreSQL 中递增多列序列

> ID：13726515
> 
> 赞同：9
> 
> 时间：2012-12-05T15:22:46.323
> 
> 标签：postgresql, sequences, multiple-columns

是否有任何内置方式（我的意思是，不需要触发器和/或函数）为每个多列增加索引？

所以执行后：

```
INSERT INTO "table"
    ("month", "desc")
    VALUES
    (1, 'One thing')
,   (1, 'Another thing')
,   (1, 'Last task of the month')
,   (2, 'Last task of the month')
,   (2, 'Last task of the month')
,   (3, 'First of third month') 
```

我的表最终会是这样（注意“任务”列）：

```
month    task    desc
1        1       One thing
1        2       Another thing
1        3       Last task of the month
2        1       First of second month
2        2       Second and last of second month
3        1       First of third month 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T15:46:50.333

您可以将 simlpe`SERIAL`列添加到您的表中（它会给您订单），然后使用类似：

```
SELECT *, row_number() OVER (PARTITION BY month ORDER BY serial_column)
FROM table 
```

这会给你你想要的结果。

如果您不需要对行进行排序，您可以尝试：

```
SELECT *, row_number() OVER (PARTITION BY month)
FROM table 
```

详情在这里：[`row_number() OVER(...)`](http://www.postgresql.org/docs/current/static/functions-window.html)

UPD 工作原理：

具有类型的列`SERIAL`本质上是一个“自动增量”字段。它会自动从序列中获取一个值。当您向表中插入行时，它们将如下所示：

```
| MONTH | SERIAL_COLUMN |                     DESCRIPTION |
-----------------------------------------------------------
|     1 |             1 |                       One thing |
|     1 |             2 |                   Another thing |
|     1 |             3 |          Last task of the month |
|     2 |             4 |           First of second month |
|     2 |             5 | Second and last of second month |
|     3 |             6 |            First of third month | 
```

关键 - 每个下一个添加行的值都`SERIAL_COLUMN` **大于**所有先前的行。

下一个。这样`row_number() OVER (PARTITION BY month ORDER BY serial_column)`做：

1) 将所有行划分为具有相等`month`( `PARTITION BY month`)的组

`serial_column`2) 按( `ORDER BY serial_column`)的值对它们进行排序

``row_number() OVER`3) 在每个组中使用步骤 2 ( )中的排序分配一个行号

输出是：

```
| MONTH | SERIAL_COLUMN |                     DESCRIPTION | ROW_NUMBER |
------------------------------------------------------------------------
|     1 |             1 |                       One thing |          1 |
|     1 |             2 |                   Another thing |          2 |
|     1 |             3 |          Last task of the month |          3 |
|     2 |             4 |           First of second month |          1 |
|     2 |             5 | Second and last of second month |          2 |
|     3 |             6 |            First of third month |          1 | 
```

要更改 的输出，`row_number()`您需要更改 中的值`SERIAL_COLUMN`。例如，放置`Second and last of second month`在`First of second month`a 之前会改变`SERIAL_COLUMN`类似的值：

```
UPDATE Table1
SET serial_column = 5
WHERE description = 'First of second month';

UPDATE Table1
SET serial_column = 4
WHERE description = 'Second and last of second month'; 
```

它将改变查询的输出：

```
| MONTH | SERIAL_COLUMN |                     DESCRIPTION | ROW_NUMBER |
------------------------------------------------------------------------
|     1 |             1 |                       One thing |          1 |
|     1 |             2 |                   Another thing |          2 |
|     1 |             3 |          Last task of the month |          3 |
|     2 |             4 | Second and last of second month |          1 |
|     2 |             5 |           First of second month |          2 |
|     3 |             6 |            First of third month |          1 | 
```

中的确切值`SERIAL_COLUMN`无关紧要。**他们只在一个月内对任务进行排序。**

我的 SQLFiddle 示例在[这里](http://sqlfiddle.com/#!12/af875/3)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T16:35:45.467

如果您愿意在`INSERT`每次插入时将语句分成一行数据，那么您可以使用[PostgreSQL 规则](http://www.postgresql.org/docs/9.1/static/rules-update.html)。下面的示例有点令人费解，因为规则似乎不允许您将写入重定向到关系本身。这通常是通过触发器来完成的。但是我们正在看看这是否可能在没有触发器的情况下实现，所以这里是：

```
--drop table table_data cascade;
CREATE TABLE table_data (
  month integer not null,
  task integer not null,
  "desc" text
);
ALTER TABLE table_data add primary key (month, task);

CREATE VIEW "table" as 
 select month, task, "desc" from table_data;

CREATE OR REPLACE RULE calculate_task AS ON INSERT TO "table"
  DO INSTEAD
  INSERT into table_data (month, task, "desc") 
  VALUES (
  NEW.month, 
  (select coalesce(max(task),0) + 1 from table_data where month = NEW.month), 
  NEW."desc");

BEGIN;
INSERT INTO "table" ("month", "desc") VALUES (1, 'One thing');
INSERT INTO "table" ("month", "desc") VALUES (1, 'Another thing');
INSERT INTO "table" ("month", "desc") VALUES (1, 'Last task of the month');
INSERT INTO "table" ("month", "desc") VALUES (2, 'Last task of the month');
INSERT INTO "table" ("month", "desc") VALUES (2, 'Last task of the month');
INSERT INTO "table" ("month", "desc") VALUES (3, 'First of third month');
COMMIT;

select * from "table"; 
```

*笔记*

*   如果您需要在“表”上支持 DELETE/UPDATE，那么您也可以为每个操作添加规则。
*   上面的`BEGIN`and`COMMIT`块用于表明即使在同一个事务中，只要每一行都分成自己的`INSERT`.
*   您使用了一些[保留字](http://www.postgresql.org/docs/9.1/static/sql-keywords-appendix.html)，例如`table`and `desc`。一定要像你做的那样双引号，你不会有任何问题。

[这](http://sqlfiddle.com/#!12/98e10/2)是sqlfiddle中的上述代码

# c# - 检查 ASCII 是否在两个范围内

> ID：13726520
> 
> 赞同：3
> 
> 时间：2012-12-05T15:22:59.590
> 
> 标签：c#

```
byte[] ASCIIValues = Encoding.ASCII.GetBytes(myInput);    
while (I < ASCIIValues.Length)
{
    {
        if ((ASCIIValues[I] > 65 & ASCIIValues[I] < 90) || (ASCIIValues[I] > 97 & ASCIIValues[I] < 122))
        {

        }
        ASCIIValues[I] = 32;
    }
    Console.WriteLine(ASCIIValues[I]);
    I++;
} 
```

这就是我现在所拥有的，我正在尝试确保用户输入的字符串（我的输入）在仅作为字母的范围内。我正在尝试删除所有标点符号和特殊字符以及数字。I 等于 0，用于遍历数组。将所有不需要的字符更改为空格是因为在我的代码中，无论如何我都在删除空格。

运行代码时，每个返回的 ASCII 值都是`32`. 这是没有意义的，因为字母应该返回相应的 ASCII 值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:27:43.400

> 我正在尝试确保用户输入的字符串（我的输入）在仅作为字母的范围内

可能有更简单的方法可以做到这一点。

```
bool isAllLetter = yourString.All(char.IsLetter); 
```

> 我正在尝试删除所有标点符号和特殊字符以及数字

```
var cleanStr = String.Join("", str.Where(char.IsLetter)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T15:27:12.553

（正如 LB 所说，有更简单的方法可以做到这一点 - 但值得研究一下为什么您当前的代码也不起作用。）

> 运行代码时，每个返回的 ASCII 值都是 32

是的，会的。仔细看看你的循环：

```
while (I < ASCIIValues.Length)
{
    {
        if ((ASCIIValues[I] > 65 & ASCIIValues[I] < 90) || (ASCIIValues[I] > 97 & ASCIIValues[I] < 122))
        {

        }
        ASCIIValues[I] = 32;
    }
    Console.WriteLine(ASCIIValues[I]);
    I++;
} 
```

您在块内什么都不做，*而是*`if`无条件*地*设置`ASCIIValues[I]`为 32。

此外：

*   我会使用`for`循环而不是`while`循环。
*   您实际上并不需要在这里将字符转换为字节；无论如何，每个 ASCII 字符都具有相同的 Unicode 值。
*   使用字符文字（`'A'`等）指定字符将使代码更易于阅读
*   您应该采用 .NET 命名约定，以使您的代码更加地道
*   你应该使用`&&`而不是`&`这里

# c# - 在 C# 中检查硬盘是否为 SSD 而不在硬盘上写入任何文件的最简单方法是什么？

> ID：13726522
> 
> 赞同：17
> 
> 时间：2012-12-05T15:23:02.443
> 
> 标签：c#, .net, hardware, hard-drive

如果硬盘是 SSD（固态驱动器），我需要检查 C#，没有寻道惩罚？我用了：

```
 ManagementClass driveClass = new ManagementClass("Win32_DiskDrive");
    ManagementObjectCollection drives = driveClass.GetInstances(); 
```

但它只给出属性中包含 SSD 的字符串，我不能依赖它吗？

我需要直接的方法来检查吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T16:21:42.137

WMI 将无法轻松确定这一点。这里有一个解决方案，它基于 Windows 7 用来确定磁盘是否为 SSD 的相同算法（更多关于算法的信息：[Windows 7 Enhancements for Solid-State Drives](http://www.hwsetup.it/articoli/il_comando_trim_di_windows_7_per_l_ottimizzazione_dei_drive_SSD/docs/COR-T558_WH08.pptx)，第 8 页和此处：[Windows 7 磁盘碎片整理程序用户界面概述](http://blogs.technet.com/b/filecab/archive/2009/11/25/windows-7-disk-defragmenter-user-interface-overview.aspx)):[在 C# 中判断是否为 SSD](http://emoacht.wordpress.com/2012/11/06/csharp-ssd/)

引用 MSDN 博客的一段话：

> Disk Defragmenter 查看通过 ATA IDENTIFY DEVICE 命令直接查询设备的结果。碎片整理程序发出 IOCTL_ATA_PASS_THROUGH 请求并检查 IDENTIFY_DEVICE_DATA 结构。如果 NomimalMediaRotationRate 设置为 1，则此磁盘被视为 SSD。最新的 SSD 将通过设置字 217（用于将标称介质旋转速率报告为 1）来响应该命令。217 这个词是 2007 年在 ATA8-ACS 规范中引入的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-03-20T08:07:57.370

这将为您提供 Win10 上的结果

```
ManagementScope scope = new ManagementScope(@"\\.\root\microsoft\windows\storage");
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM MSFT_PhysicalDisk");
string type = "";
scope.Connect();
searcher.Scope = scope;

foreach (ManagementObject queryObj in searcher.Get())
{       
    switch (Convert.ToInt16(queryObj["MediaType"]))
    {
        case 1:
            type = "Unspecified";
            break;

        case 3:
            type = "HDD";
            break;

        case 4:
            type = "SSD";
            break;

        case 5:
            type = "SCM";
            break;

        default:
            type = "Unspecified";
            break;
    }
}
searcher.Dispose(); 
```

ps字符串类型是最后一个驱动器，改为数组获取所有驱动器

# iphone - 响应式 img 调整大小在 iPad 上不起作用

> ID：13726525
> 
> 赞同：0
> 
> 时间：2012-12-05T15:23:07.107
> 
> 标签：iphone, css, ipad, resize, image-resizing

我无法在 iPad 和 iPhone 上查看我的投资组合网站（iPhone - 我有一个单独的样式表，可以根据屏幕尺寸加载 - 但仍然不理想）

我为每个图像都有一个类，如下所示：

`<img src="6.jpg" class="resize" />`

这意味着它被调整到窗口的高度，这意味着任何观众屏幕上可能的最大图像：

`.resize {height: 100%; width:auto;}`

这工作正常，但在 iPad 和 iPhone 上，图像似乎以一个可笑的大版本显示，比如 1000% 或类似的东西。为什么这段代码不能在移动设备上正确显示？

谢谢

这是我的代码：

```
<div id="maincontainer" >

<p><i>A Working Title</i></p>

<div id="img_container">
<img src="6.jpg" class="resize" /></div>
<div id="img_text">Caption text</div>

</div> 
```

和CSS：

```
@charset "utf-8";
/* CSS Document */

#maincontainer {
height: 100%;
max-height:100%;
width:100%; max-width:100%;
}

#img_container {
height: 100%;
max-height:100%;
width:100%; max-width:100%;
}

.resize {
height: 100%; width:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:16:43.927

我只会针对#img_container 的图像而不是给图像一个类。就像是....

```
 #img_container img{
    max-width: 100%;
    height: auto;
} 
```

这似乎有效

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<style> 
@charset "utf-8";
/* CSS Document */

.container{
    width: 100%;
}

#img_container{
    width: 100%;
    height: auto;
}

#img_container img {
height: auto;
max-height:100%;

}

   </style>

</head>

<body>

                 <div class="container">

                    <div id="img_container">
                    <img src="6.jpg"/>
                    </div>

                 </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:27:48.503

它可能会达到其父容器的高度。而不是`height: 100%;`尝试使用`width:100%;`. 如果这不起作用，您可以粘贴您的代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:35:53.420

您只是不必添加`width:100%`到`.resize`类（如@JCBiggar 所说），也可以删除该`height:100%`属性，默认情况下是`height:auto;`：

### HTML：

```
<div id="maincontainer" >
   <p><i>A Working Title</i></p>
   <div id="img_container">
      <img src="6.jpg" class="resize" /></div>
   <div id="img_text">Caption text</div>
</div> 
```

### CSS：

```
#maincontainer {
   height: 100%;
   max-height:100%;
   width:100%;
}

#img_container {
}

.resize {
   width:100%;
}​ 
```

**工作示例**（小提琴）：http: [//jsfiddle.net/DLJrV/1/](http://jsfiddle.net/DLJrV/1/)

# php - PHP 文件上传 - 文件类型的最佳安全选项？

> ID：13726526
> 
> 赞同：0
> 
> 时间：2012-12-05T15:23:06.473
> 
> 标签：php, security, file-upload

需要允许用户上传几乎任何文件类型，但显然我不希望上传任何恶意文件。例如，上传表单需要允许 .js 和 .php 脚本之类的内容。

白名单可能是无穷无尽的，黑名单可能会阻止上传合法文件，而且我不确定这些选项甚至提供了多少（如果有的话）实际安全性。

我使用的是带有前端控制器的 CakePHP，因此您无法直接通过浏览器访问上传的文件。文件上传为`-rw-r--r--`.

我最好的选择是什么？服务器的保护程度如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:54:49.097

目前尚不清楚*“通过 CakePHP 路由，然后将文件提供给您”*是什么意思，但是，鉴于这个问题，我的印象是上传的文件会被放到公共目录下`webroot`，原始扩展名完好无损，并由Web 服务器就像您通过 FTP 上传的任何其他文件一样。

如果是这种情况，您就会遇到一个突出的安全问题，您需要解决根本问题，而不是试图通过弱解决方法来缓解其影响。

在处理用户上传的文件时，您需要确保它们始终作为数据处理，而不是作为脚本处理。您可以创建一个特殊目录，其中所有文件都作为数据处理，无论文件扩展名如何，但您需要调整 Web 服务器配置，并且您必须期望将来不会有任何问题。或者，更好的是，将您的上传目录**放在**文档根目录之外（或至少放在 Web 服务器无法访问的位置）并编写一个 PHP 包装器来读取文件并按原样提供它（即下载脚本） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:08:29.173

您最好的选择是将数据作为 BLOB 直接上传到数据库中，而不是允许用户上传到文件系统。

文件系统很复杂，允许用户直接上传给他们会引入大量潜在的安全漏洞；例如，如果有人上传了一个名为“foo.php\0.jpg”的文件（其中 \0 是字节值零，即 nul 字符），那么您的 PHP 可能会注意到该字符串以文本“.jpg”结尾因此是“安全的”。

但是当字符串 "foo.php\0.jpg" 进入PHP*下*的 fopen时，它将被视为以 null 结尾的字符串 "foo.php"，从而有效地允许您的用户将任意 PHP 上传到您的网站。

同样，很难阻止恶意用户上传到 /dev/hd0/ 或 htt*://1.2.3.4/ 或 \?\WEBDAV\1.2.3.4\ 或 CON.txt 或任何其他讨厌的文件系统边缘情况你几乎肯定没有想过。

为了安全起见，最好的方法是确保用户数据只存储在您的数据库中（这就是他们称之为的原因）。另外确保参数化您的 SQL，然后您将相当安全地免受恶意攻击。

您可以随时使用 PHP 脚本将数据从数据库中提取出来，以便提供给其他访问者，因此这样做可以大大提高安全性，而且几乎没有重大缺陷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:26:18.383

1.  检查扩展列表（不要使用爆炸来检查扩展，而是使用 pathinfo()）。
2.  还要检查文件的 mimetype。
3.  使用白名单而不是黑名单，即使它非常大，它始终是更安全的解决方案。

# java - libgdx box2d drawarc

> ID：13726531
> 
> 赞同：2
> 
> 时间：2012-12-05T15:23:17.077
> 
> 标签：java, libgdx, box2d, draw

我是 Libgdx 和 box2d 的新手。我需要画弧线。我搜索了一个功能，最后我想出了如下

```
public void drawarc (float centerx, float centery,float radius, float anglefrom, float anglediff, int steps)
{
    EdgeShape ps = new EdgeShape();

    FixtureDef psfd = new FixtureDef();
    psfd.shape = ps;

    BodyDef psbd = new BodyDef();
    psbd.allowSleep = true;
    psbd.awake = true;
    psbd.position.set(centerx, centery);
    psbd.gravityScale = 0;

    Vector2[] vertices = new Vector2[steps];

    for (int i = 0; i < steps; i++) {
        double angle=Math.toRadians(anglefrom+anglediff/steps*i);
        Vector2 sc = new Vector2((float)(radius * Math.cos(angle)), 
                (float)(radius * Math.sin(angle)));
        vertices[i] = sc;
    }

    Body psd = world.createBody(psbd);

    for (int i = 1; i < steps; i++) {
        ps.set(vertices[i-1], vertices[i]);
        psd.createFixture(psfd);
    }
} 
```

它工作正常，但我不确定它是否正确。请您检查并告诉我它是否有效/正确的方式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T13:52:46.793

看起来您正在使用 box2d 的调试渲染进行绘图。它可能有效，但通常不是一个好方法。您可以保留您的圆弧顶点创建代码，但以不同的方式呈现它。看`com.badlogic.gdx.graphics.glutils.ShapeRenderer.polyline`方法。这也不是最好的解决方案，但比您的方法更容易且更有效，因为您正在创建一个新的身体，而您不需要它。

请注意，您不应该将调试绘制用于游戏渲染，因为它是*调试*绘制并且不是很快。正确的方法可能是使用`Mesh`该类。

# java - 如何过滤以编程方式生成的事件？

> ID：13726533
> 
> 赞同：2
> 
> 时间：2012-12-05T15:23:19.193
> 
> 标签：java, swing, jcombobox, itemlistener

我想记录“用户活动”。我正在努力记录**用户触发的事件**，即组合框的选定值已更改（由用户更改，而不是由应用程序调用`combo.setSelectedItem()`或类似内容更改）。

这是我到目前为止所做的：我注册了`ItemListener`一个`JComboBox`

```
comboBox.addItemListener(new ItemListener() {
    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            log(USER_SELECTED_ITEM, e);
        }
    }
}); 
```

但是，`itemStateChanged(...)`即使组合框值由 以编程方式选择，也会调用`comboBox.setSelectedItem(...)`。

我还发现了一个布尔字段 ，`AWTEvent.isSystemGenerated`我希望它`true`是通过显式调用`comboBox.setSelectedItem(...)`.

```
 @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            boolean sysGen = AWTAccessor.getAWTEventAccessor().isSystemGenerated(e);
            System.out.println("system generated: " + sysGen);
        }
    } 
```

不幸的是，`true`从来没有打印出来。

如何过滤掉以编程方式生成的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:08:22.427

使用以下方法`getItemSelectable()` *它返回事件的发起者。* [文档](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemEvent.html#getItemSelectable%28%29)

```
ItemSelectable itemOrginator = e.getItemSelectable() 
```

**itemOrginator**是事件的对象源。

并检查从类继承的`int userOriginType`和`int progOriginType`使用方法的两种情况。`getID``java.awt.AWTEvent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T05:15:25.797

这很简单。定义一个全局变量 fromSystem。

```
comboBox.addItemListener(new ItemListener() 
{
   @Override
   public void itemStateChanged(ItemEvent e) 
   {
      if (e.getStateChange() == ItemEvent.SELECTED) 
      {
           if(!fromSystem)
           {
               log(USER_SELECTED_ITEM, e);
           }
      }
   } 
```

});

现在，无论您在哪里编写过 comboBox.setSelectedItem(...) ，都将这一行替换为以下 3 行。

```
fromSystem = true;
comboBox.setSelectedItem(...);
fromSystem = false 
```

知道了？？

# jquery - JQuery：使用最接近和查找函数来显示隐藏的 div

> ID：13726539
> 
> 赞同：0
> 
> 时间：2012-12-05T15:23:30.633
> 
> 标签：jquery

最初，所有智能建议 div 都是隐藏的。我正在尝试显示属于用户单击的最近的“产品名称容器”div 的“智能建议”div。我尝试使用最接近（）和查找（），但它不起作用，我不确定它为什么不起作用。

标记

```
 for($i=0; $i < 20; $i++){
                    echo '
                    <div class="invoice-line">
                        <div class="index">'.($i+1).'</div>
                        <div class="prod-id"><input type="text" id="prod-id"></div>
                        <div class="prod-name-container">
                           <input onKeyPress="search(this.value)" type="text" class="prod-name"/>
                           <div class="smart-suggestions">
                                <!-- RESULT SUGGESTIONS WILL POPULATE HERE -->
                           </div>
                        </div>
                        <div class="qty">1</div>
                    </div>';
                } 
```

jQuery

```
 $('.smart-suggestions').hide();
   $('.prod-name').focus(function() {
        $last = $(this);
        $('.invoice-line').closest(".prod-name-container").find('.smart-suggestions').show();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:26:17.260

您可以使用该`next`方法。

```
$(function(){ // when the DOM is ready
    $('.smart-suggestions').hide();
    $('.prod-name').focus(function() {
        var $this = $(this);
        $this.next('.smart-suggestions').show();
    });

    //  or: 
    //  $('.prod-name').on('focus blur, 'function(e) {
    //       var $this = $(this);
    //       $this.next('.smart-suggestions').toggle(e.type === 'focus');
    //  })

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:26:56.503

只需这样做 - .smart-suggestions 是 .prod-name 的兄弟

```
$('.smart-suggestions').hide();
$('.prod-name').focus(function() {
    $last = $(this);
    $last.next('.smart-suggestions').show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:26:33.853

```
$('.smart-suggestions').hide();
$('.prod-name').focus(function() {
    $last = $(this);
    $('.invoice-line', $(this)).closest(".prod-name-container").find('.smart-suggestions').show();
}); 
```

虽然如果你想让它点击，我会把它改成`$('.prod-name').focus`.click

# r - 使用具有多个参数的应用变体计算带有向量的矩阵行

> ID：13726540
> 
> 赞同：-2
> 
> 时间：2012-12-05T15:23:31.077
> 
> 标签：r, vector, matrix, apply

我正在使用 R 语言来查找从每个矩阵行值到每行的指定向量的[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)*平方，* 并且向量是用于比较两个点的点我创建了这个函数

```
euclDist <- function(p1, p2){
   sum((p1 - p2)^2)
} 
```

现在我想创建一个函数，在矩阵中找到到指定点的欧几里得距离最小的行

```
 minDist<- function(points, p){
    dist = c()
    for(i in seq(1:length(points[,1])))
      dist[i] = euclDist2(points[i,], p)
    which.min(dist)
 } 
```

例如

```
points = matrix(c(1:24), ncol=4)
p = c(1,2,1,2)
print(minDist(points, p)) 
```

结果为**1**，因为第一行到点 p 的距离最小

[这很好用，但我想通过使用其中一种应用](http://nsaunders.wordpress.com/2010/08/20/a-brief-introduction-to-apply-in-r/)变体来摆脱 for 循环，但我找不到一个可以逐行处理矩阵并支持多个参数的循环。

编辑：这个问题被修改，因为第一个代码有括号和括号的问题:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:56:13.983

它应该是

```
minDist <- function(points, p) which.min(apply(points, 1, euclDist, p2 = p)) 
```

但总的来说，`apply`并不比普通`for`循环快很多。我可以看到两种编写更高效代码的方法：

第一个使用 R 向量化和循环：

```
minDist <- function(points, p) which.min(colSums((t(points) - p)^2)) 
```

第二个使用包中的`rdist`函数`fields`，它可以计算两组点之间的欧几里德距离：

```
minDist <- function(points, p) {
    require(fields)
    which.min(rdist(points, t(matrix(p))))
} 
```

任何一种解决方案都应该比使用`apply`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:04:58.833

由于问题是如何使用 apply 而不是你的 for 循环，以下将做到这一点。

**要取回向量：**

```
 dist <- sapply(points, euclDist, p)   # no need for the dist <- c() 
```

**要取回列表：**

```
 dist <- lapply(points, euclDist, p)   # no need for the dist <- c() 
```

但是，请注意您的代码还有一些其他问题。最值得注意的是，我不确定您是否在计算欧几里得距离

# c# - 根据我的 DropDownListFor 的内容更改标签的内容

> ID：13726544
> 
> 赞同：0
> 
> 时间：2012-12-05T15:23:44.467
> 
> 标签：c#, asp.net-mvc-3, razor

我读了这篇文章：

[在更改 DropDownListFor 值时更改标签](https://stackoverflow.com/questions/11826336/change-label-on-change-dropdownlistfor-value)

而且我不知道如何在我的布局中实现这一点。我在带有剃须刀的 aps.net 上使用 mvc。

这是我的 _Layout.cshtml：

```
<!DOCTYPE html>

<html>
<head>
  <title>@ViewBag.Title</title>

  <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
  <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/Views/main.js")" type="text/javascript"></script>

  <script>
    $(function () {
      $('.focus :input').focus();
    });
  </script>

</head>
<body>
    <div class="page">
        <div id="header">

            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
            <div id="menucontainer">
              <ul id="menu">

                @if (User.Identity.IsAuthenticated)
                {
                  <li>@Html.ActionLink("Order Gas", "OrderGas", "Customer")</li>
                  <li>@Html.ActionLink("Make Payment", "PrePayment", "Payment")</li>
                  <li>@Html.ActionLink("Update Account", "UpdateAccount", "Account")</li>
                  @*<li>@Html.ActionLink("Change Password", "ChangePassword", "Account")</li>*@
                  <li>@Html.ActionLink("Accounts", "CustomerSummary", "Customer")</li>
                }
                else
                { 
                  <li>@Html.ActionLink("Logon", "Logon", "Account")</li>
                  <li>@Html.ActionLink("Register", "Register", "Account")</li>                  
                }

                  <li>@Html.ActionLink("ContactUs", "ContactUs", "Home")</li>
              </ul>
            </div>
        </div>
        <div id="main">
            @RenderBody()
            <div style="clear: both;"></div>
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

以及显示 DropDowListFor 我要更改值的页面：

```
@model SuburbanCustPortal.Models.PaymentModel.SendToGateway

@{
    ViewBag.Title = "Make a payment!";
}

<script src="@Url.Content("~/Scripts/Views/prepayment.js")" type="text/javascript"></script>

<h2>Make a Payment</h2>

  @using (Html.BeginForm("SendPayment", "Payment", FormMethod.Post))
  {
    @Html.ValidationSummary(true, "Please correct the errors and try again.")
    <div>
      <fieldset>
        <legend>Please enter the amount of the payment below:</legend>

        <div class="editor-label">
          Please select an account.
        </div>
          @Html.DropDownListFor(x => x.AccountId, (IEnumerable<SelectListItem>)ViewBag.Accounts)

        <div class="editor-label">
          @Html.LabelFor(m => m.AccountBalance)
        </div>
        <div class="editor-field">
          <label class="sizedCustomerDataLeftLabel">$@Html.DisplayFor(model => model.AccountBalance)&nbsp;</label>
        </div>      

        <div class="editor-label">
          @Html.LabelFor(m => m.Amount)
        </div>
        <div class="editor-field focus">
          @Html.TextBoxFor(m => m.Amount, new { @class = "makePaymentText" })
          @Html.ValidationMessageFor(m => m.Amount)
        </div>

            @Html.HiddenFor(model => model.AccountId)
            @Html.HiddenFor(model => model.Branch)
            @Html.HiddenFor(model => model.AccountNumber)

        <p>
          <input id="btn" class="makePaymentInput" type="submit" value="Pay Now"  onclick="DisableSubmitButton()"/>  
        </p>
      </fieldset>
    </div>
  } 
```

我想要发生的是当 DropDownListFor 更改时，它会使用适当的值填充金额和帐户余额字段。

这是调用 PrePayment 视图的控制器：

```
[Authorize]
public ActionResult PrePayment(PaymentModel.SendToGateway model)
{
  var custid = GetCookieInfo.CurrentAccountGuid;
  // var cust = _client.GetCustomerByCustomerId(Guid.Parse(custid));

  var list = new List<SelectListItem>();
  var custs = _client.RequestCustomersForAccount(User.Identity.Name);
  foreach (var customerData in custs)
  {
    var acctno = customerData.Branch + customerData.AccountNumber;
    var acctnoname = string.Format(" {0} - {1} ", acctno, customerData.Name);
    list.Add(new SelectListItem() { Text = acctnoname, Value = acctno });
  }

  ViewBag.Accounts = list;

  //model.AccountId = custid;
  //model.AccountNumber = cust.AccountNumber;
  //model.Amount = decimal.Parse(cust.TotalBalance).ToString("0.00");
  //model.AccountBalance = decimal.Parse(cust.TotalBalance).ToString("0.00");
  //model.Branch = cust.Branch;
  return View(model);
} 
```

我不知道如何实现 jquery 来做他们发布的建议。我把它放在 _Layout.cshtml 中吗？另外，如何从控制器填充值？

有人可以推动我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:42:23.040

将**id**添加到**标签**和**ddl**，如下所示。和，

您可以在与 ddl 和标签相同的页面中使用 jquery。

```
<script> 
    $(document).ready(function(){
        $("#DropDownID").change(function () {
            $("#LabelID").text("Your text here");
        });
    });
<script>

<div class="editor-label">
     Please select an account.
</div>
     //added id
     @Html.DropDownListFor(x => x.AccountId, (IEnumerable<SelectListItem>)ViewBag.Accounts,new { id = "DropDownID" })

<div class="editor-label">
     @Html.LabelFor(m => m.AccountBalance)
</div>
<div class="editor-field">
     //added id
     <label class="sizedCustomerDataLeftLabel" id="LabelID">$@Html.DisplayFor(model => model.AccountBalance)&nbsp;</label>
</div> 
```

**评论后**

```
<script> 
    $(document).ready(function(){
        $("#DropDownID").change(function () {
            $.ajax({
                url: '/Controller/SomeAction',
                type: 'POST',
                data: { SomeData:"SomeData" }, // for example your ddl selected value...
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                   $("#LabelID").text(data);
                },
                error: function () {
                   alert("error");
                 }
            });
        });
    });
<script> 
```

**控制器**

```
public ActionResult SomeAction(string SomeData)
{
    var result = data from your db;

    Json(result, JsonRequestBehavior.AllowGet);
} 
```

# asp.net-mvc - 使用 asp.net mvc4 从北风数据库返回 json

> ID：13726546
> 
> 赞同：0
> 
> 时间：2012-12-05T15:23:46.777
> 
> 标签：asp.net-mvc, json, entity-framework, asp.net-mvc-4

我正在尝试将 json 对象从我的控制器返回到我的视图。我正在使用北风数据库进行测试，并使用使用过的 dbfirst 来创建模型。据我了解，我必须对 json 使用匿名类型。但是它不起作用。而且我不知道最好的调试方法是什么。

（使用手动生成的列表，我注释掉了它的工作原理......）

**控制器：**

```
public JsonResult GetData()
    {
        ////List<int> result = new List<int>() { 1, 4, 5 };
        ////return Json(result);   

        using (var db = new NorthwindEntities())
        {
            var results = from Cust in db.Customers
                          select new
                          {
                              CustomerAddress = Cust.Address,
                              CustomerCity = Cust.City,
                              CustomerCompanyName = Cust.CompanyName
                          };

            return Json(results);

            Console.Write(results);
        }
    } 
```

**看法：**

```
<input id="btn" type="button" />

<script type="text/javascript">
$("#btn").click(function () {
    $.post("/Northwind/GetData", null, function (data) {
        alert(data);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:07:20.893

您的上下文已被处理，请使用：

```
public JsonResult GetData()
{
    var db = new NorthwindEntities()

    var results = from Cust in db.Customers
                      select new
                      {
                          CustomerAddress = Cust.Address,
                          CustomerCity = Cust.City,
                          CustomerCompanyName = Cust.CompanyName
                      };

    return Json(results.ToList());
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T13:04:40.903

在发回之前先尝试实现表达式（只需调用 toArray）

# ios - IOS - PickerView 保持已经打开的键盘。最后响应者不工作

> ID：13726550
> 
> 赞同：1
> 
> 时间：2012-12-05T15:23:58.227
> 
> 标签：ios

我在使用附加到文本视图的选取器视图时遇到问题，我有一个带有 3 个文本视图的视图，一个显示一个选取器视图，两个显示纯文本。对于所有这些，我在编辑开始之前阻止键盘弹出但是我的问题是当我从一个 TextView 转到打开 PickerView 的 TextView 时。我最终会出现 PickerView 并保留之前的键盘。我已经尝试了所有与 lastresponder 相关的东西，但我就是无法让那个键盘消失。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:28:54.307

Explicitly call " `resignFirstResponder`" on all three text views when the picker appears.

一旦选择器消失，您可以选择显示选择器的文本视图，键盘将恢复。

# html - Webkit 浏览器中的意外边距

> ID：13726563
> 
> 赞同：1
> 
> 时间：2012-12-05T15:24:13.443
> 
> 标签：html, css, margin, fluid-layout, multiple-columns

我在使用 2 列、流畅的布局时遇到问题。两列都在 div ( `.dp_stage_sizer`) 内，其中`overflow: auto`; `.spl_aside`浮动到左边，`spl_main`只是普通的`position: relative`，带有`margin-left`.

只要我使用像素值作为宽度和边距，这就可以正常工作，但是因为这个站点是流动的（无论如何低于某个窗口宽度），除了宽度之外的所有内容`.dp_stage_sizer`都是百分比。这会导致`spl_main`在其右侧产生额外的边距，因此它不会与其父元素对齐，但*仅*在 Webkit 浏览器中（尽管 Safari 中的边距比 Chrome 大得多）。

以下是我可以管理的精简版本中的代码：

HTML：

```
<div class="dp_stage_sizer">
    <div class = "spl_aside">
        aside
    </div>
    <div class = "spl_main">
        main
    </div>
</div> 
```

CSS：

```
div.dp_stage_sizer
{
    position: relative;
    max-width: 1080px;
    margin: 0px auto;
    overflow: auto;

    background-color: silver;
}

.spl_main
{
    position: relative;
    margin: 0% 0% 0% 30%;
    overflow: hidden;

    background-color: green;
    height: 400px;
}

.spl_aside
{
    position: relative;
    float: left;
    width: 20%;
    overflow: hidden;

    background-color: red;
    height: 300px;
} 
```

最后是一个[JSFiddle](http://jsfiddle.net/PacmanBits/AZFVU/1/)供任何想要尝试的人使用。

* * *

下面是使用 Chrome 的网络检查器拍摄的图像，显​​示了三个 div 中的每一个的边距：

`dp_stage_sizer`： ![<code>dp_stage_sizer</code> 的边距](../Images/9a72704a0d91b4d6ccd6fa04caf46bc6.png)

`spl_aside`： ![<code>spl_aside</code> 的边距](../Images/d142ed159dd6871b9166f17c5b72bb60.png)

`spl_main`： ![<code>spl_main</code> 的边距](../Images/07b358276916aea64d2bb559d889acd0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:01:07.393

`position: absolute`您可以通过设置而`.spl_aside`不是浮动来解决此问题。请注意，这意味着如果`clear:float`您希望在某些时候将内容放在它下方，您将失去使用的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:11:58.323

另一种解决方案可能是使用`inline-blocks`. 你如何实现这取决于你需要什么样的浏览器支持。把我的[建议搁置一旁](http://jsfiddle.net/helmers/EZVUY/1/)。

# jquery - 在服务器端停止 ajax 请求

> ID：13726565
> 
> 赞同：1
> 
> 时间：2012-12-05T15:24:19.480
> 
> 标签：jquery, ajax, jsf

我一直在做一些关于取消 ajax 请求的研究，并且我在这里阅读了几个关于这个主题的线程。我发现了这个非常有用的主题：

[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

根据它，当您使用 abort() 方法时，请求在客户端被取消，但不一定在服务器端。事情是我的请求需要一些繁重的计算，如果它开始花费太长时间，我希望能够在客户端和服务器端停止。有什么办法可以做到吗？

ps：请求的超时在这里对我没有帮助。我正在使用 JSF 调用一个调用优化算法的 bean，如果可能的话，我想按需停止该算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:43:28.603

为了可靠地实现这一点，您需要使计算量大的代码像在后台处理的长时间运行的任务一样。然后，您的请求将发出与该用户会话相关联的任务以运行。那么，要取消执行，就需要一个不同的请求。这可以在发起请求返回后使用客户端上的计时器来完成，如果它要在设定的时间段后发生，或者它可以由用户通过按钮或其他方式启动。

另一种选择是让任务本身跟踪它的时间，并在一段时间后自行中止它。您可以将所需的时间作为参数传递或任何最有效的方法，如果经过更多时间，则抛出异常。然后，您的服务器端代码将尝试/捕获该例程并相应地响应每个场景。

# git - git pull 从远程不工作

> ID：13726566
> 
> 赞同：0
> 
> 时间：2012-12-05T15:24:27.467
> 
> 标签：git, netbeans

我是一个新的 git 用户。我通常从多个位置进行开发，然后将更改推送到网站和中央存储库。我刚开始使用 git 作为我的版本管理器。

昨天我对我的网站进行了一些重大更改，然后将更改推送到我的网站和存储库，在那里我可以看到它们已经到位。

今天，我从不同的站点尝试将这些更改拉到不同的本地开发环境中。但是，我的本地版本没有发生任何变化。我正在使用 netbeans git 支持。这是输出：

```
==[IDE]== Dec 5, 2012 9:46:47 AM Pulling...
git pull git@bitbucket.org:****/**.git +refs/heads/master:refs/remotes/origin/master
==[IDE]== Dec 5, 2012 9:46:59 AM Pulling... finished. 
```

完成此操作后，我检查了最新的代码更改不在我当前的开发副本中，尽管它们存在于远程存储库和网站中（我仔细检查了）

我的本地副本不是新的克隆。我曾希望将远程更改合并到我的本地副本中。我今天早上做的第一个想法是尝试执行拉动。

谁能告诉我下一步该怎么做才能获得最新的副本？

谢谢你，

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:18:32.710

好的，我找到了答案。我在本地副本上执行了提交（我想我可能上次做了一些更改，但我没有提交），然后是拉，这一次它给了我合并 2 个提交的选项，我能够下载最新的更改。

谢谢你的帮助，

账单

# forms - 对齐标签的右侧文本（内联块）

> ID：13726572
> 
> 赞同：1
> 
> 时间：2012-12-05T15:24:38.817
> 
> 标签：forms, size, alignment, css

在此示例中：http: [//jsfiddle.net/6L6ZL是否可以在](http://jsfiddle.net/6L6ZL)**不指定 WIDTH**大小的情况下 右对齐标签文本？

```
<html>
<head>
<style>
fieldset {
display: inline-block;
}

fieldset input{
float: right;
}
</style>
</head>
<body>

<form>
<fieldset>
    <p><label>First Name</label><input type="text" /></p>
    <p><label>Second Name</label><input type="text" /></p>
    <p><label>Address</label><input type="text" /></p>
    <p><label>Age</label><input type="text" /></p>
</fieldset>
</form>

</body>
</html> 
```

![图片](../Images/9e872529c94c72992462246a50025f06.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:28:10.280

添加`text-align:right;`到`<p>`元素。

# python - 在 pandas 中创建一个 24 小时 1 分钟分辨率的数据集

> ID：13726573
> 
> 赞同：1
> 
> 时间：2012-12-05T15:24:42.387
> 
> 标签：python, pandas, time-series

我有一个包含在`pandas`数据框中的 1 分钟分辨率时间序列。对我来说，填充这些时间序列的最简单（也是最有效）的方法是什么，即在数据框中存在的每个日期上，我对所有 1 分钟间隔都有 1 分钟的时间步长（因此日期将有 24 小时的价值1 分钟数据步骤）？如果给定时间点没有数据，它应该有一个 NA 而不是一个值。例如，如果我有 2012 年 11 月 11 日凌晨 2 点到下午 6 点的数据和 2012 年 11 月 16 日下午 3 点到晚上 11 点的数据，我想要两个日期的 24 小时 1 分钟数据点，其中 NA 附加到时间戳没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:27:55.927

如果您有时间序列（如果时间用作索引），则可以使用该`resample`方法（[http://pandas.pydata.org/pandas-docs/dev/timeseries.html#up-and-downsampling ）：](http://pandas.pydata.org/pandas-docs/dev/timeseries.html#up-and-downsampling)

```
df.resample('1min') 
```

编辑：

就像是：

```
rng1 = date_range('2012-11-11', '2012-11-12', freq='1min')
rng2 = date_range('2012-11-16', '2012-11-17', freq='1min')
rng = rng1 + rng2

df.reindex(rng) 
```

# security - 保护 SWF+PHP

> ID：13726575
> 
> 赞同：4
> 
> 时间：2012-12-05T15:24:54.070
> 
> 标签：security, flash

我开发了一些 Flash + PHP 游戏，游戏逻辑在 PHP 文件中。Flash 仅用于动画和 UI。现在我有一个客户对我的游戏感兴趣，但我们有某种协议，他可以使用这些游戏仅 2 个月，之后，如果他不支付费用，游戏将停止运行。

我想保护我的游戏，这样他就不能永远使用它们。我在想，当游戏开始时，它会向我的服务器发送一个请求，如果我的服务器响应 PASS=123456，那么游戏就会运行，否则会显示一条消息“游戏已禁用”。

另一种方法是将部分 PHP 逻辑移动到我的服务器，但这可能会导致游戏运行速度比预期慢。

我也试过 Kindisoft 的secureSWF，但他们的软件改变了一些游戏的功能。

有人对如何保护它有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:35:12.950

使用公钥认证 - 认证他的 php 服务器。使您的服务器证书颁发机构，在他的服务器上保留公共时间有效的密钥，在您的 CA 服务器上保留它们的私有密钥。每次 Flash 游戏开始时 - 向您的 CA 验证他的服务器。
此解决方案不是很复杂，您可以使用标准工具来执行此操作。另外 - 如果不*真正*破解 Flash 应用程序，他将无法克服此检查。它还具有防窃听功能。
最大的可能问题是他在没有您的 Flash 应用程序的情况下使用您的 php API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:35:36.507

如果客户是一位熟练的编码员（甚至是狂热的谷歌用户），他将不难绕过初始密码测试。

唯一安全的事情（imo）是将php托管在您自己控制的服务器上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T00:07:46.440

只要逻辑不在您的服务器上，您就必须确保尽可能最好地保护闪存文件，然后您可以从游戏到您的服务器进行任何类型的检查（只要闪存文件没有被破解不管你做什么检查）。

[http://active.tutsplus.com/tutorials/workflow/protect-your-flash-files-from-decompilers-by-using-encryption/](http://active.tutsplus.com/tutorials/workflow/protect-your-flash-files-from-decompilers-by-using-encryption/)

这是一篇关于 swf 保护的好文章，但最后 swf 仍然是开放格式，只要文件不在您的服务器上并且逻辑在 php 文件中，无论您做什么，它仍然可能被破解。

话虽这么说，控制游戏的最佳方式是在您的服务器上拥有逻辑。

# android - 绕过android usb主机权限确认对话框

> ID：13726583
> 
> 赞同：35
> 
> 时间：2012-12-05T15:25:23.680
> 
> 标签：android, permissions, usb, root, usbserial

我想在工业中使用android，

我可以使用 slickdevlabs.com 库毫无问题地连接到 Profilic 和 Ftdi USB 到串行芯片。

该应用程序有一个服务，它在启动时启动，连接到 USB 串行端口并做其他事情。

我的问题是主机设备与用户没有任何交互，

所以当安卓问

```
Allow the app "MyAPP" to access the USB device ?
[checkmark]Use by default for this USB device
Cancel            OK 
```

没有人点击ok。

即使我检查了默认使用...复选框，如果我重新插入 USB 或重新启动主机设备，它会在下次启动时再次询问。

我以超级用户模式运行服务和应用程序，但没有区别，它再次询问。

我添加了意图过滤器，但没有区别，它每次都会问我。

```
 <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
            <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
        </intent-filter>

        <meta-data
            android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
            android:resource="@xml/device_filter" />
        <meta-data
            android:name="android.hardware.usb.action.USB_DEVICE_DETACHED"
            android:resource="@xml/device_filter" /> 
```

任何意见如何绕过或禁用它？

我有 root 和 SU 访问权限。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T06:00:43.487

我知道这有点晚了，但仍然...

我有同样的问题，我想我已经设法解决了。Android 内部使用了一项服务，可以管理 USB 设备和配件。此服务对第三方开发人员是隐藏的，并且没有记录在案。如果您检查 UsbPermissionActivity 的源代码，您将能够弄清楚该服务是如何被调用的。为了调用服务 IUsbManager 接口和 ServiceManager 类被使用。这些都是隐藏的，所以你不能直接使用它们。但是您可以做的是在相应的名称空间（包）中创建具有完全相同名称的存根。然后您将能够编译该代码，而运行时环境将使用真实的东西。

唯一的**要求**是**您的应用程序必须是系统应用程序**- 即它必须位于 /system/app/ 目录中。由于您的设备已植根，这应该不是问题。

所以你必须在你的项目中添加一个包：“ **android.hardware.usb** ”并在其中放入一个名为“ **IUsbManager.java** ”的文件，内容如下：

```
package android.hardware.usb;

public interface IUsbManager extends android.os.IInterface
{
    /** Local-side IPC implementation stub class. */
    public static abstract class Stub extends android.os.Binder implements android.hardware.usb.IUsbManager
    {
        /** Construct the stub at attach it to the interface. */
        public Stub()
        {
            throw new RuntimeException( "Stub!" );
        }
        /**
         * Cast an IBinder object into an android.hardware.usb.IUsbManager interface,
         * generating a proxy if needed.
         */
        public static android.hardware.usb.IUsbManager asInterface( android.os.IBinder obj )
        {
            throw new RuntimeException( "Stub!" );
        }

        public android.os.IBinder asBinder()
        {
            throw new RuntimeException( "Stub!" );
        }

        public boolean onTransact( int code, android.os.Parcel data, android.os.Parcel reply, int flags ) throws android.os.RemoteException
        {
            throw new RuntimeException( "Stub!" );
        }

        static final int TRANSACTION_getDeviceList = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
        static final int TRANSACTION_openDevice = (android.os.IBinder.FIRST_CALL_TRANSACTION + 1);
        static final int TRANSACTION_getCurrentAccessory = (android.os.IBinder.FIRST_CALL_TRANSACTION + 2);
        static final int TRANSACTION_openAccessory = (android.os.IBinder.FIRST_CALL_TRANSACTION + 3);
        static final int TRANSACTION_setDevicePackage = (android.os.IBinder.FIRST_CALL_TRANSACTION + 4);
        static final int TRANSACTION_setAccessoryPackage = (android.os.IBinder.FIRST_CALL_TRANSACTION + 5);
        static final int TRANSACTION_hasDevicePermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 6);
        static final int TRANSACTION_hasAccessoryPermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 7);
        static final int TRANSACTION_requestDevicePermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 8);
        static final int TRANSACTION_requestAccessoryPermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 9);
        static final int TRANSACTION_grantDevicePermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 10);
        static final int TRANSACTION_grantAccessoryPermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 11);
        static final int TRANSACTION_hasDefaults = (android.os.IBinder.FIRST_CALL_TRANSACTION + 12);
        static final int TRANSACTION_clearDefaults = (android.os.IBinder.FIRST_CALL_TRANSACTION + 13);
        static final int TRANSACTION_setCurrentFunction = (android.os.IBinder.FIRST_CALL_TRANSACTION + 14);
        static final int TRANSACTION_setMassStorageBackingFile = (android.os.IBinder.FIRST_CALL_TRANSACTION + 15);
    }

    /* Returns a list of all currently attached USB devices */
    public void getDeviceList( android.os.Bundle devices ) throws android.os.RemoteException;
    /* Returns a file descriptor for communicating with the USB device.
         * The native fd can be passed to usb_device_new() in libusbhost.
         */
    public android.os.ParcelFileDescriptor openDevice( java.lang.String deviceName ) throws android.os.RemoteException;
    /* Returns the currently attached USB accessory */
    public android.hardware.usb.UsbAccessory getCurrentAccessory() throws android.os.RemoteException;
    /* Returns a file descriptor for communicating with the USB accessory.
         * This file descriptor can be used with standard Java file operations.
         */
    public android.os.ParcelFileDescriptor openAccessory( android.hardware.usb.UsbAccessory accessory ) throws android.os.RemoteException;
    /* Sets the default package for a USB device
         * (or clears it if the package name is null)
         */
    public void setDevicePackage( android.hardware.usb.UsbDevice device, java.lang.String packageName ) throws android.os.RemoteException;
    /* Sets the default package for a USB accessory
         * (or clears it if the package name is null)
         */
    public void setAccessoryPackage( android.hardware.usb.UsbAccessory accessory, java.lang.String packageName ) throws android.os.RemoteException;
    /* Returns true if the caller has permission to access the device. */
    public boolean hasDevicePermission(android.hardware.usb.UsbDevice device) throws android.os.RemoteException;
    /* Returns true if the caller has permission to access the accessory. */
    public boolean hasAccessoryPermission( android.hardware.usb.UsbAccessory accessory ) throws android.os.RemoteException;
    /* Requests permission for the given package to access the device.
         * Will display a system dialog to query the user if permission
         * had not already been given.
         */
    public void requestDevicePermission( android.hardware.usb.UsbDevice device, java.lang.String packageName, android.app.PendingIntent pi ) throws android.os.RemoteException;
    /* Requests permission for the given package to access the accessory.
         * Will display a system dialog to query the user if permission
         * had not already been given. Result is returned via pi.
         */
    public void requestAccessoryPermission( android.hardware.usb.UsbAccessory accessory, java.lang.String packageName, android.app.PendingIntent pi ) throws android.os.RemoteException;
    /* Grants permission for the given UID to access the device */
    public void grantDevicePermission( android.hardware.usb.UsbDevice device, int uid ) throws android.os.RemoteException;
    /* Grants permission for the given UID to access the accessory */
    public void grantAccessoryPermission( android.hardware.usb.UsbAccessory accessory, int uid ) throws android.os.RemoteException;
    /* Returns true if the USB manager has default preferences or permissions for the package */
    public boolean hasDefaults( java.lang.String packageName ) throws android.os.RemoteException;
    /* Clears default preferences and permissions for the package */
    public void clearDefaults( java.lang.String packageName ) throws android.os.RemoteException;
    /* Sets the current USB function. */
    public void setCurrentFunction( java.lang.String function, boolean makeDefault ) throws android.os.RemoteException;
    /* Sets the file path for USB mass storage backing file. */
    public void setMassStorageBackingFile( java.lang.String path ) throws android.os.RemoteException;
} 
```

然后是另一个包：“ **android.os** ”和“ **ServiceManager.java** ”：

```
package android.os;

import java.util.Map;

public final class ServiceManager
{
    public static IBinder getService( String name )
    {
        throw new RuntimeException( "Stub!" );
    }

    /**
     * Place a new @a service called @a name into the service
     * manager.
     * 
     * @param name the name of the new service
     * @param service the service object
     */
    public static void addService( String name, IBinder service )
    {
        throw new RuntimeException( "Stub!" );
    }

    /**
     * Retrieve an existing service called @a name from the
     * service manager.  Non-blocking.
     */
    public static IBinder checkService( String name )
    {
        throw new RuntimeException( "Stub!" );
    }

    public static String[] listServices() throws RemoteException
    {
        throw new RuntimeException( "Stub!" );
    }

    /**
     * This is only intended to be called when the process is first being brought
     * up and bound by the activity manager. There is only one thread in the process
     * at that time, so no locking is done.
     * 
     * @param cache the cache of service references
     * @hide
     */
    public static void initServiceCache( Map<String, IBinder> cache )
    {
        throw new RuntimeException( "Stub!" );
    }
} 
```

请注意，这些类的接口可能会根据 Android 的版本而变化。在我的情况下，版本是**4.0.3**。因此，如果您有另一个版本的 Android 并且此代码不起作用，您将必须检查您的特定操作系统版本的源代码。

以下是使用该服务向所有 FTDI 设备授予权限的示例：

```
import java.util.HashMap;
import java.util.Iterator;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.hardware.usb.IUsbManager;
import android.hardware.usb.UsbDevice;
import android.hardware.usb.UsbManager;
import android.os.IBinder;
import android.os.ServiceManager;

public class LaunchReceiver extends BroadcastReceiver
{
    public void onReceive( Context context, Intent intent )
    {
        String action = intent.getAction();
        if( action != null && action.equals( Intent.ACTION_BOOT_COMPLETED ) )
        {
            try
            {
                PackageManager pm = context.getPackageManager();
                ApplicationInfo ai = pm.getApplicationInfo( YOUR_APP_PACKAGE_NAMESPACE, 0 );
                if( ai != null )
                {
                    UsbManager manager = (UsbManager) context.getSystemService( Context.USB_SERVICE );
                    IBinder b = ServiceManager.getService( Context.USB_SERVICE );
                    IUsbManager service = IUsbManager.Stub.asInterface( b );

                    HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
                    Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
                    while( deviceIterator.hasNext() )
                    {
                            UsbDevice device = deviceIterator.next();
                            if( device.getVendorId() == 0x0403 )
                            {
                                service.grantDevicePermission( device, ai.uid );
                                service.setDevicePackage( device, YOUR_APP_PACKAGE_NAMESPACE );
                            }
                    }
                }
            }
            catch( Exception e )
            {
                trace( e.toString() );
            }
        }
    }
} 
```

还有一件事 - 您必须在清单中添加以下权限（Lint 可能不喜欢它，但您始终可以在项目属性中更改严重级别）：

```
<uses-permission android:name="android.permission.MANAGE_USB" /> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-30T12:09:13.663

@d_d_t aswer is great, but it dosen't work on Android > 4.2.2\. Use this interface:

```
public interface IUsbManager extends android.os.IInterface
{
/** Local-side IPC implementation stub class. */
public static abstract class Stub extends android.os.Binder implements android.hardware.usb.IUsbManager {
    private static final java.lang.String DESCRIPTOR = "android.hardware.usb.IUsbManager";

    /** Construct the stub at attach it to the interface. */
    public Stub()         {
        throw new RuntimeException( "Stub!" );
    }

    /**
     * Cast an IBinder object into an android.hardware.usb.IUsbManager
     * interface, generating a proxy if needed.
     */
    public static android.hardware.usb.IUsbManager asInterface( android.os.IBinder obj) {
        throw new RuntimeException( "Stub!" );
    }

    @Override
    public android.os.IBinder asBinder() {
        throw new RuntimeException( "Stub!" );
    }

    @Override
    public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException {
        throw new RuntimeException( "Stub!" );
    }

    static final int TRANSACTION_getDeviceList = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
    static final int TRANSACTION_openDevice = (android.os.IBinder.FIRST_CALL_TRANSACTION + 1);
    static final int TRANSACTION_getCurrentAccessory = (android.os.IBinder.FIRST_CALL_TRANSACTION + 2);
    static final int TRANSACTION_openAccessory = (android.os.IBinder.FIRST_CALL_TRANSACTION + 3);
    static final int TRANSACTION_setDevicePackage = (android.os.IBinder.FIRST_CALL_TRANSACTION + 4);
    static final int TRANSACTION_setAccessoryPackage = (android.os.IBinder.FIRST_CALL_TRANSACTION + 5);
    static final int TRANSACTION_hasDevicePermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 6);
    static final int TRANSACTION_hasAccessoryPermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 7);
    static final int TRANSACTION_requestDevicePermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 8);
    static final int TRANSACTION_requestAccessoryPermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 9);
    static final int TRANSACTION_grantDevicePermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 10);
    static final int TRANSACTION_grantAccessoryPermission = (android.os.IBinder.FIRST_CALL_TRANSACTION + 11);
    static final int TRANSACTION_hasDefaults = (android.os.IBinder.FIRST_CALL_TRANSACTION + 12);
    static final int TRANSACTION_clearDefaults = (android.os.IBinder.FIRST_CALL_TRANSACTION + 13);
    static final int TRANSACTION_setCurrentFunction = (android.os.IBinder.FIRST_CALL_TRANSACTION + 14);
    static final int TRANSACTION_setMassStorageBackingFile = (android.os.IBinder.FIRST_CALL_TRANSACTION + 15);
    static final int TRANSACTION_allowUsbDebugging = (android.os.IBinder.FIRST_CALL_TRANSACTION + 16);
    static final int TRANSACTION_denyUsbDebugging = (android.os.IBinder.FIRST_CALL_TRANSACTION + 17);
}

/* Returns a list of all currently attached USB devices */
public void getDeviceList(android.os.Bundle devices)
        throws android.os.RemoteException;

/*
 * Returns a file descriptor for communicating with the USB device. The
 * native fd can be passed to usb_device_new() in libusbhost.
 */
public android.os.ParcelFileDescriptor openDevice(
        java.lang.String deviceName) throws android.os.RemoteException;

/* Returns the currently attached USB accessory */
public android.hardware.usb.UsbAccessory getCurrentAccessory()
        throws android.os.RemoteException;

/*
 * Returns a file descriptor for communicating with the USB accessory. This
 * file descriptor can be used with standard Java file operations.
 */
public android.os.ParcelFileDescriptor openAccessory(
        android.hardware.usb.UsbAccessory accessory)
        throws android.os.RemoteException;

/*
 * Sets the default package for a USB device (or clears it if the package
 * name is null)
 */
public void setDevicePackage(android.hardware.usb.UsbDevice device,
        java.lang.String packageName, int userId)
        throws android.os.RemoteException;

/*
 * Sets the default package for a USB accessory (or clears it if the package
 * name is null)
 */
public void setAccessoryPackage(
        android.hardware.usb.UsbAccessory accessory,
        java.lang.String packageName, int userId)
        throws android.os.RemoteException;

/* Returns true if the caller has permission to access the device. */
public boolean hasDevicePermission(android.hardware.usb.UsbDevice device)
        throws android.os.RemoteException;

/* Returns true if the caller has permission to access the accessory. */
public boolean hasAccessoryPermission(
        android.hardware.usb.UsbAccessory accessory)
        throws android.os.RemoteException;

/*
 * Requests permission for the given package to access the device. Will
 * display a system dialog to query the user if permission had not already
 * been given.
 */
public void requestDevicePermission(android.hardware.usb.UsbDevice device,
        java.lang.String packageName, android.app.PendingIntent pi)
        throws android.os.RemoteException;

/*
 * Requests permission for the given package to access the accessory. Will
 * display a system dialog to query the user if permission had not already
 * been given. Result is returned via pi.
 */
public void requestAccessoryPermission(
        android.hardware.usb.UsbAccessory accessory,
        java.lang.String packageName, android.app.PendingIntent pi)
        throws android.os.RemoteException;

/* Grants permission for the given UID to access the device */
public void grantDevicePermission(android.hardware.usb.UsbDevice device,
        int uid) throws android.os.RemoteException;

/* Grants permission for the given UID to access the accessory */
public void grantAccessoryPermission(
        android.hardware.usb.UsbAccessory accessory, int uid)
        throws android.os.RemoteException;

/*
 * Returns true if the USB manager has default preferences or permissions
 * for the package
 */
public boolean hasDefaults(java.lang.String packageName, int userId)
        throws android.os.RemoteException;

/* Clears default preferences and permissions for the package */
public void clearDefaults(java.lang.String packageName, int userId)
        throws android.os.RemoteException;

/* Sets the current USB function. */
public void setCurrentFunction(java.lang.String function,
        boolean makeDefault) throws android.os.RemoteException;

/* Sets the file path for USB mass storage backing file. */
public void setMassStorageBackingFile(java.lang.String path)
        throws android.os.RemoteException;

/*
 * Allow USB debugging from the attached host. If alwaysAllow is true, add
 * the the public key to list of host keys that the user has approved.
 */
public void allowUsbDebugging(boolean alwaysAllow,
        java.lang.String publicKey) throws android.os.RemoteException;

/* Deny USB debugging from the attached host */
public void denyUsbDebugging() throws android.os.RemoteException;
} 
```

And modify the code adding user id:

```
...
service.setDevicePackage( usbDevice, YOUR_APP_PACKAGE_NAMESPACE, ai.uid ); 
.... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-31T22:10:11.950

我对弹出窗口有同样的问题，没有人点击它。但我找到了一个不同的解决方案（针对有根设备）。弹出窗口由 android 在**UsbPermissionActivity**类中生成（并且 UsbPermissionActivity 由 UsbSettingsManager 启动）。查看 Android 源代码以了解发生了什么。这里的好处是，我们可以操纵 UsbPermissionActivity 的字节码来接受所有的 UsbDevices。您需要**Smali/Baksmali**工具来执行此操作。[https://code.google.com/p/smali/](https://code.google.com/p/smali/)

1.  在您的设备上找到文件**SystemUI.apk**
2.  将其复制到您的计算机`adb pull path/to/SystemUI.apk`
3.  解压apk
4.  反汇编 classes.dex 文件`java -jar baksmali.jar classes.dex`
5.  找到文件 UsbPermissionActivity 并在其中找到说

    `invoke-virtual {p0}, Lcom/android/systemui/usb/UsbPermissionActivity;->setupAlert()V`

6.  通过将其注释掉并添加两个新行来更改它

`#invoke-virtual {p0}, Lcom/android/systemui/usb/UsbPermissionActivity;->setupAlert()V const/4 v0, 0x1 iput-boolean v0, p0, Lcom/android/systemui/usb/UsbPermissionActivity;->mPermissionGranted:Z invoke-virtual {p0}, Lcom/android/systemui/usb/UsbPermissionActivity;->finish()V`

7.  组装它`java -jar smali.jar -o classes.dex out`
8.  替换原来的 classes.dex 并将所有内容再次压缩到 SystemUI.apk
9.  将您设备上的原始 SystemUI.apk 替换`adb push services.jar path/to/SystemUI.apk`为文件管理器 ap 或如果它不适用于文件管理器 ap

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-17T08:09:08.553

如果你有编译安卓系统的选项，那么没有什么是你做不到的。

你可以加

```
public void onStart() {
    super.onStart();
    mPermissionGranted = true;

    finish();
} 
```

到 frameworks/base/packages/SystemUI/src/com/android/systemui/usb/UsbPermissionActivity.java

绕过权限确认弹出窗口。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-19T22:31:54.093

解决方案是使用意图过滤器并将`android:directBootAware="true"`属性添加到关联的活动中，以便`USB_DEVICE_ATTACHED`在启动/重新启动后正确接收事件。重要的是不要`USB`在代码中请求设备权限，只使用意图过滤器，如下所示：

```
<manifest>
    <uses-feature android:name="android.hardware.usb.host" />
    <activity
        ...
        android:directBootAware="true">

        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        </intent-filter>

        <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
        android:resource="@xml/device_filter" />

    </activity>
</manifest> 
```

使用与*此类似的 device_filter* `XML`资源文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <usb-device vendor-id="1234" product-id="5678" />
</resources> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-05T15:56:26.183

Android 并不是为了支持这种开箱即用的使用而设计的。就个人而言，对于非交互式使用，我很想考虑在 linux 内核中使用 USB 串行驱动程序并跳过 android USB api。但是您必须能够认真修改 android 安装 - 更改内核配置和/或加载模块，创建设备文件并设置其权限或所有者，可能为允许的应用添加 unix 组和 android 权限访问它。

或者您可以查看android源并禁用用户确认；但是如果您没有为设备提供源代码 android 构建，这可能比 linux 级别的想法更棘手，因为调整开源 android 以在供应商设备上运行可能并非易事（除非有人已经提供了来自- 对相关设备具有足够功能的源构建）

顺便说一句，root/su 访问权限不适用于应用程序本身 - 它仅意味着知道如何运行您的 root hack 留下的任何工具的应用程序可以启动一个以 root 身份运行的帮助程序，但应用程序本身并不不能。使用 root 在系统分区上安装应用程序可能会获得一些非典型的 android 权限，但您必须检查是否有任何可以帮助您使用 USB 的权限。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-30T10:11:21.657

我认为提前将您正在使用的配件列入白名单将是最好的解决方案。为此，您需要在此位置 /data/system/users/0 添加文件 usb_device_manager.xml
// 请注意，0 是用户 ID，如果您没有在 Android 中添加更多用户，则它可能为 0，但如果您确实相应地更改了此 ID

这是文件的外观：

```
<settings>
<preference package="<PACKAGE NAME OF APP YOU WANT TO START ON CONNECTIONCTION>">
    <usb-accessory manufacturer="<NAME OF MANUFECTURER LIKE ONE REGISTERED IN meta-data in the manifest>" model="<MODEL NAME LIKE ONE REGISTERED IN meta-data in the manifest>" version="<VERSION LIKE ONE REGISTERED IN meta-data in the manifest>" />
</preference> 
```

对于像这样的板[http://www.embeddedartists.com/products/app/aoa_kit.php](http://www.embeddedartists.com/products/app/aoa_kit.php)它是：

```
 <?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<settings>
<preference package="com.embeddedartists.aoa">
    <usb-accessory manufacturer="Embedded Artists AB" model="AOA Board - Basic" version="1.0" />
</preference> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-05T08:43:24.337

根据 Android Developers 上的文档，当您的应用通过您的清单意图过滤器启动时，您已经拥有对连接的 USB 设备的权限。也许您应该尝试这种方法并编写一个过滤器以与您要使用的设备完全匹配，以防止其他应用程序也想与该设备通信。

请参阅[http://developer.android.com/guide/topics/connectivity/usb/host.html#permission-d上的“注释”](http://developer.android.com/guide/topics/connectivity/usb/host.html#permission-d)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-20T22:45:51.857

实现这一点的一种方法，请注意，这实际上并没有摆脱确认，而是精确定位 的位置`checkbox`并使用**[机器人](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)**类的 Android 等效项来选择它，然后选择`OK`。您可以编写一个在后台运行的应用程序，它甚至可以由您提到的启动服务调用，专门用于此目的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-11T04:53:02.790

如果您有权访问 Android 源代码，这里是您需要禁用权限对话框的代码

[https://gitlab.tubit.tu-berlin.de/justus.beyer/streamagame_platform_frameworks_base/commit/e97b62ed0d4050acacbf54781435686ea28edd73](https://gitlab.tubit.tu-berlin.de/justus.beyer/streamagame_platform_frameworks_base/commit/e97b62ed0d4050acacbf54781435686ea28edd73)

上面的代码更新创建了一个您可以使用的配置选项，或者您可以使用值 true 代替硬编码`mDisablePermissionDialogs`来禁用权限对话框。

在`services/usb/java/com/android/server/usb/UsbSettingsManager.java`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-01-30T18:48:56.393

我遇到了同样的问题，每次插入 USB 电缆时都会出现权限弹出窗口，为了解决这个问题，我只是在清单中添加了过滤器以及 VID 和 PID 的 xml 文件，只需确保您已按照建议设置 USB 设备过滤上面的 SO 链接或这里记录的，你把好的 VID 和 PID。这是我的问题，我没有将与我的设备匹配的 VID 和 PID

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-01-25T10:52:19.177

第一次需要确认的时候，可以选择“always”，这样即使Android设备掉电，再上电，你的app仍然有权限访问USB2Serial。只是说，只有一次确认！

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2013-01-15T08:19:57.840

我认为我们可以通过在`/etc/udev`. 我们可以将供应商 ID 和设备 ID 添加到`51-android.rules`文件中。

# asp.net - 从 ASP.NET 应用程序将“.xlsx”或“.docx”上传到 SharePoint 2007 导致文件“损坏”

> ID：13726584
> 
> 赞同：2
> 
> 时间：2012-12-05T15:25:27.237
> 
> 标签：asp.net, vb.net, sharepoint, file-upload

我有一个包装在 SharePoint 2007 网站中的 ASP.NET 应用程序。在这个应用程序中，我允许用户创建请求，他们还可以为请求上传支持文件。当用户上传 .docx 或 .xlsx 类型的支持文档（迄今为止我发现它们已损坏的唯一两个）时，它们正在“损坏”，从某种意义上说，当我尝试打开它们时，我会收到一个提示留言说：

“Excel 在 'Book1.xlsx' 中发现不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击是”

当我单击是时，它会修复文件并正确显示内容，但这对用户来说是不可接受的。我什至不希望他们有问题。

这是我的上传点击事件的代码（VB.NET）：

```
Private Sub Upload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnUpload.Click
Try
    Dim currentUser As SPUser = SPContext.Current.Web.AllUsers("SHAREPOINT\SYSTEM")
    Dim currentUserToken As SPUserToken = currentUser.UserToken
    Using currentSite As SPSite = New SPSite(SPContext.Current.Web.Url, currentUserToken)

        Using CurrentWeb As SPWeb = currentSite.OpenWeb
            CurrentWeb.AllowUnsafeUpdates = True

            Dim attachmentList As SPList = CurrentWeb.Lists("Requests")

            Dim item As SPListItem = attachmentList.GetItemById(CurrentRequestId)

            If FileUpload.PostedFile.ContentLength > Nothing And FileUpload.HasFile Then
                Dim fStream As Stream = FileUpload.PostedFile.InputStream
                Dim contents() As Byte = New Byte(fStream.Length) {}

                fStream.Read(contents, 0, CType(fStream.Length, Integer))
                fStream.Close()
                fStream.Dispose()

                Dim attachments As SPAttachmentCollection = item.Attachments
                Dim fileName As String = Path.GetFileName(FileUpload.PostedFile.FileName)
                attachments.Add(fileName, contents)
                item.Update()
            Else
                Page.ClientScript.RegisterStartupScript(Page.GetType(), "disp_msg", "<script type='text/javascript'>alert('The file contains 0 Bytes of data and will be deleted.'); </script>")
            End If
        End Using
    End Using
    DisplayAttachment(CurrentRequestId)
    btnSave.Focus()
Catch ex As Exception
    Page.ClientScript.RegisterStartupScript(Page.GetType(), "disp_msg", "<script type='text/javascript'>alert('Error Uploading File: " & ex.Message & "'); </script>")
End Try
End Sub 
```

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:10:04.583

您遇到的问题在这一行：

```
Dim contents() As Byte = New Byte(fStream.Length) {} 
```

它应该是

```
Dim contents() As Byte = New Byte(fStream.Length - 1) {} 
```

VB.NET 数组指定了上限 - 而不是长度 - 由于 VB.NET 是从零开始的 - 旧行在末尾创建了一个额外的字节。

这通常不是问题，但 docx 和 xlsx 文件对这个额外的字节更敏感。

# python - 在 python 中创建二维网格

> ID：13726587
> 
> 赞同：5
> 
> 时间：2012-12-05T15:25:40.263
> 
> 标签：python, grid, matplotlib, mesh

我对编程真的很陌生...

但这是我的问题：

我无法发布图像，但我希望拥有的情节是“皇冠”（我的意思是两个半径为 a 的同心圆，从数学上讲真的很容易定义，但我怎么能用 python 程序做到这一点？

我想到了这样的事情：

```
def Fm1(X, Y):
    r =r = sqrt(1.*X**2+1.*Y**2)
    cos = 1.*X/r
    sin = 1.*Y/r
    teta = where( sin >= 0\. , arccos(cos) , -arccos(cos) )
    teta = where(r == 0\. , 0., teta)
    return r, teta

def F(r,teta):                                                                  
    X = r*cos(teta)                                                             
    Y = r*sin(teta)                                                             
    return X,Y 
```

这些只是让您从笛卡尔坐标传递到极坐标的函数，然后：

```
r=sy.linspace(a,b,N+1) # radius division
t=sy.linspace(0,2.*pi,2**NN) #angle (theta) division
R,T=meshgrid(r,t) #creating a mesh

X,Y = F(R,T)#transform from polar to cartesian

#Plotting :
fig=plt.figure()
ax=fig.add_subplot(111)                                 
ax.plot(X, Y)
plt.show() 
```

但结果是：同心多边形。我希望我在半径 a 到半径 b 和 2**NN 线（原点中心和给定角度）等距离处有 N+1 个圆。

对不起，我知道这真的是一个微不足道的问题，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:56:40.613

在我的回答中，我将使用**两个库**：

```
import numpy as np
import pylab 
```

我相信这些是您设置中的**常量：**

```
r_a = 0.50
r_b = 0.75
circles = 6  
lines   = 50
origin = (0, 0) 
```

# 选项 1：直接绘图

首先，**画圆圈**：

```
for r in np.linspace(r_a, r_b, circles):
    pylab.gca().add_patch(pylab.Circle(origin, radius=r, 
                                       fill=False, color='black')) 
```

然后画**线**：

```
r_ab = np.array([r_a, r_b])
for theta in np.linspace(0, 2 * np.pi, lines):
    pylab.plot(np.cos(theta) * r_ab,
               np.sin(theta) * r_ab, color='red') 
```

最后，**显示**：

```
pylab.axis('scaled')
pylab.show() 
```

**结果**：_

![情节形象](../Images/fdc879b83606e6a373be252588b3be23.png)

# 选项 2：绘制段：

（在导入库并设置常量后，如上所述。）首先，计算**点位置**：

```
r,t   = np.meshgrid(np.linspace(r_a, r_b, circles),
                    np.linspace(0, 2 * np.pi, lines))
x = r * np.cos(t)
y = r * np.sin(t) 
```

然后**绘制圆圈**（就像你一样）并**绘制线条**

```
# Plot circles
pylab.plot(x, y)
# Plot lines (first and last x and y of each theta)
pylab.plot(np.vstack((x[:,0], x[:, -1])),
           np.vstack((y[:,0], y[:, -1]))) 
```

最后，**显示**：

```
pylab.axis('scaled')
pylab.show() 
```

**结果**：_

![第二个选项结果](../Images/4003db48e72001faf735d089e33ff532.png)

**注意**：毕竟，我认为您真正需要的只是选项 2 中关于绘制线条的最后一点。我会将所有其他答案的内容保留在这里以供任何未来的读者使用。

# java - GWT RPC。在两个模块之间共享 RPC 服务

> ID：13726590
> 
> 赞同：4
> 
> 时间：2012-12-05T15:25:45.100
> 
> 标签：java, gwt

我有一个带有 2 个 GWT 模块（`.gwt.xml`）的应用程序。我想在他们之间共享*一个*RPC 服务。但是模块有不同的名字，所以第一个模块调用 RPC 服务

`FIRSTModuleName/relativepath` （并且有效）

但第二个模块尝试从

`SECONDModuleName/relativepath`（它不起作用，因为路径不正确）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:31:12.653

您可以将您的 URL 映射`RemoteserviceServlet`到两个 URL（迄今为止最简单的解决方案），或者您可以更改客户端代码以使两个模块调用相同的 URL。

对于后者，不要使用`@RemoteServiceRelativePath`，而是将您的服务*异步*转换为[`ServiceDefTarget`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/ServiceDefTarget.html)并`setServiceEntryPoint`使用您要使用的 URL 进行调用（`@RemoteServiceRelativePath`只是`setServiceEntryPoint`自动调用的快捷方式`GWT.getModuleBaseURL() + relativePath`）。
我相信您也可以`../`在`@RemoteServiceRelativePath`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:35:15.150

对于生产，不要忘记向 web.xml 添加第二个 servlet 映射条目。您可以让 servlet 监听任意数量的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:00:56.913

另一种选择是将共享的 RPC 方法放入公共基类中。

# javascript - 如何将图像 src 设置为空？

> ID：13726593
> 
> 赞同：22
> 
> 时间：2012-12-05T15:25:49.110
> 
> 标签：javascript, jquery, image

> **可能重复：**
> [设置图像 src 属性在 Chrome 中不起作用](https://stackoverflow.com/questions/8425817/setting-image-src-attribute-not-working-in-chrome)

当用户单击“删除”链接时，我需要将`src`图像的属性设置为空。当我使用

```
$('#img').prop('src', null); 
```

`src`不为空，但指向当前 url

如果我删除`src`使用

```
$('#img').removeProp('src'); 
```

永远不要让我在将来重新分配它

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T15:26:40.700

尝试使用[**attr()**](http://api.jquery.com/attr/)，

**[现场演示](http://jsfiddle.net/rajaadil/Vnj53/)**

```
$('#img').attr('src', ''); 
```

因为你有 id 选择器。使用原生 javascript 方法 document.getElementById 将为您带来更多性能优势。此外，您可能需要设置`#`为`src`而不是`empty`字符串。

```
document.getElementById('img').src = "#"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T15:27:26.457

我只需访问底层`<img>`节点并将值设置`src`为*空字符串*。

```
$('#img')[ 0 ].src = '#'; 
```

小提琴：http: [//jsfiddle.net/P4pRu/](http://jsfiddle.net/P4pRu/)

* * *

*更新：当我们只传入一个空字符串时，* *Chrome*似乎并不满意。Firefox 仍然显示出预期的行为（我很确定这在几周前/版本之前也适用于 Chrome）。

 *`#`但是，例如，通过 a可以正常工作。

* * *

更新 2：

Even`imgNode.removeAttribute('src');`不再删除 Chrome 中图像的视觉表示（有趣...）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:32:56.050

属性 'src' 并不是真正的属性，它是一个属性。将属性视为可以使用布尔值或列表设置的事物，而属性则视为更具动态性的事物。

```
$('#img').attr('src', ''); 
```

> 从 jQuery 1.6 开始，.prop() 方法提供了一种显式检索属性值的方法，而 .attr() 检索属性 - [http://api.jquery.com/prop/](http://api.jquery.com/prop/)*

# asp.net - 如何使用 FindSiteMapNodeFromKey(string) Asp.net？不工作

> ID：13726601
> 
> 赞同：0
> 
> 时间：2012-12-05T15:26:18.220
> 
> 标签：asp.net, sitemap

我需要在很多不同的 web 文件的地方检索一些特定的 URL。所以我开始构建一个 XML 格式的站点地图。我不需要导航菜单或面包屑，只需通过资源键获取 URL。不幸的是，到目前为止所有的读物都只是解释了如何设置导航菜单。到目前为止，我所做的一切都让我犯了错误。

**我需要这样的东西**，（但抛出：对象引用未设置为对象的实例。而且*Mynode1*始终为*null*）：

```
SiteMapNode MyNode1 = new SiteMapNode(MyXmlSiteMapProvider, "Product1");
HyperLink1.NavigateUrl = MyNode1.Url; 
```

我也这样做：

```
 SiteMapNode MyNode1 = new SiteMapNode(MyXmlSiteMapProvider, "Product1");
    MyNode1= MyXmlSiteMapProvider.FindSiteMapNodeFromKey("Product1");
    HyperLink1.NavigateUrl = MyNode1.Url; 
```

我还尝试使用 NameValueCollection 和 providerAttributes 来初始化 MyXmlSiteMapProvider，然后是 BuildSiteMap()，但结果相同。（空白链接，或错误）

**我的站点地图看起来像这样** （文件名是*web.sitemap*）

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="~/default.aspx" title="Home"  description="Homepage" resourceKey="home">
    <siteMapNode url="~/products/mainlist.aspx" title="List of products"  description="" resourceKey="listOfProducts" >
        <siteMapNode url="~/products/catA/someproduct.aspx" title="Product tittle"  description="" resourceKey="Product1"/>
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

**我的 Web.Config 文件**，有这个

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
      <providers>
        <add name="XmlSiteMapProvider"
          description="SiteMap provider that reads in .sitemap files."
          type="System.Web.XmlSiteMapProvider"
          siteMapFile="web.sitemap" />
      </providers>
    </siteMap> 
```

提前感谢任何知道一种简单方法来完成这项工作的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:35:26.043

我和你一样有同样的问题。现在对我有意义。检查文档：http: [//msdn.microsoft.com/en-us/library/system.web.sitemapprovider.findsitemapnodefromkey.aspx](http://msdn.microsoft.com/en-us/library/system.web.sitemapprovider.findsitemapnodefromkey.aspx)

> Blockquote XmlSiteMapProvider 类是 ASP.NET 的默认站点地图提供程序，它使用 SiteMapNode 的 URL 作为类维护的各种集合中的键。因此，如果一个节点提供一个 URL，它在站点地图提供者的范围内必须是唯一的。如果没有提供 URL，则会生成一个唯一标识符来标识 SiteMapNode。

# math - 通过网线计算数据包的时间

> ID：13726605
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:26:36.347
> 
> 标签：math, networking, distance, data-transfer

我正在准备网络考试。

在之前的一次考试中，给出了这个问题：

```
Assume you're sending a packet of length 4000 bit
through a cable of length 1000 km.
The signal in the cable is moving at 200000 km/s.
The signal bandwidth is 10 Mbit/s.
Calculate how much time it would take for the packet to arrive. 
```

如果我用汽车来做这件事，考虑到道路长度和车速，可能需要 200 秒。虽然我不确定如何在计算中应用 mbit/s 和 bits。

这是正确的做法吗？

```
(10 mbit/s / 4000 bit) * (200000 km/s / 1000 km) = seconds packet needs to arrive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:32:22.237

传输时间等于`SEND_TIME + EXPANSION_TIME`

（为了简单起见，我使用 Mbit 作为 10^6 位而不是 2^20，原理保持不变）

```
SEND_TIME = #bits / #bits_per_sec = 4000 / 10*10^6 = 4*10^-4
EXPANSION_TIME = length / expansion_speed = 1000 / 200000 = 5 * 10^-3 
```

**总计然后是`0.0054`秒**

* * *

**奖金：**

一个好的做法是查看单位并确保最后得到正确的单位，所以上面实际上是：

```
SEND_TIME = #bits / #bits_per_sec = 4000[bit] / 10*10^6[bit/sec] = 4*10^-4 [bit/bit * sec] = 0.0004 [sec]
EXPANSION_TIME = length / speed = 1000 [km] / 200000 [km/sec] = 5 * 10^-3 [km / km * sec] = 0.005 [sec] 
```

# c# - 同一类型对象中的对象列表？

> ID：13726611
> 
> 赞同：3
> 
> 时间：2012-12-05T15:26:45.973
> 
> 标签：c#, asp.net, oop, object

我有一个具有零件属性的对象。但是有些部分是“父母”并且有子部分。这些子部件具有与父部件相同的所有属性（不是相同的属性值，只是具有它们自己的值的相同属性）。

所以对于每个 Part 对象，我想要一个子部件的列表属性。我想要做的是创建一个零件对象列表 - 如果它是父零件，则为零件对象中的每个子零件创建一个。

我的问题是......你能在一个对象中拥有一个相同对象类型的对象列表吗？（这甚至有意义吗？）

简单的例子：

```
public class Part
{
    private string _Part;
    private string _Description;
    private List<Part> _childParts = new List<Part>();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:30:56.830

是的，你可以，它是所有树结构的基石。

例如：

```
class Part {
   public List<Part> Children { get; set; }
   public Part Parent { get; set; }
} 
```

是完全有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:40:30.090

我认为您需要实现复合模式：[https ://en.wikipedia.org/wiki/Composite_pattern](https://en.wikipedia.org/wiki/Composite_pattern)

# objective-c - 带有类型 id 的 IBOutlet

> ID：13726616
> 
> 赞同：3
> 
> 时间：2012-12-05T15:26:56.410
> 
> 标签：objective-c, cocoa

我是 Objective-C 的新手，正在努力读一本书。当我遇到错误时，我正在遵循一个非常基本的教程。代码与书中的代码相同。

我有一堂课`MyController.h`和`MyController.m`。错误发生在声明期间。

`MyController.h`：

```
#import <Foundation/Foundation.h>
@interface MyController : NSObject
@property (assign) IBOutlet id *textLabel;

- (IBAction)clickMeButtonClicked:(id)sender;
- (IBAction)deleteMeButtonClicked:(id)sender;

@end 
```

第三行给了我一个警告和一个错误：

错误：

```
Pointer to non-const type 'id' with no explicit ownership 
```

警告：

```
Property with 'iboutlet' attribute must be an object type (invalid '__strong id *') 
```

正如我所说，我刚刚开始学习，我肯定在这里遗漏了一些非常明显的东西。好像和'id'类型有关系，但是按照书上的说法，没有错。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:32:17.887

`id`已经是一个指针：

```
typedef struct objc_object {
     Class isa;
} *id; 
```

因此，您不需要`*`在声明中。尝试：

```
@property (assign) IBOutlet id textLabel; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:28:30.207

`id`不需要声明为指针。声明它的正确方法如下：

```
@property (assign) IBOutlet id textLabel;//Don't need the * 
```

[你可以在这个问题](https://stackoverflow.com/questions/1304176/objective-c-difference-between-id-and-void)中找到更全面的`id`类型解释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:31:49.653

分配可能应该更改为强，并删除 textLabel 之前的 *。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:39:08.560

尝试将 ( `assign`) 更改为 ( `nonatomic, retain`)，因为这是 IBOutlet 而不是原语，因此您必须保留并释放它。将 nonatomic 放在那里也是一个好习惯，它与线程有关，但我不能给你确切的信息。此外，不要忘记将 [textLabel release] 放在 dealloc 方法中，因为您需要释放您保留、创建或复制的每个对象。

# sql - 如何在没有 IDENTITY 或 GUID 列的情况下从 DB 表中获取下一个 ID

> ID：13726626
> 
> 赞同：1
> 
> 时间：2012-12-05T15:27:40.077
> 
> 标签：sql, sql-server, transactions

我有一个带有`INT`主键列的表。我不想使用`GUID`or`IDENTITY`作为主键。

`IDENTITY`我想知道在不使用or`GUID`作为表中的主键列的情况下获取下一个 ID 的最佳方法是什么。我不介意在表中使用`GUID`or `IDENTITY`，除非它是主键列。

我必须找到下一个可用的`ID`（即获取 MAX ID 并将其增加 1），并使用它：

```
SELECT @id=ISNULL(max(AlbumId)+1,1) FROM Albums 
```

但是，当我这样做时，我想防止其他应用程序插入表中，这样我们就不会遇到任何问题。

注意：请不要将此问题标记为**DUPLICATE**。我已经完成了[这个答案](https://stackoverflow.com/questions/751270/best-way-to-get-the-next-id-number-without-identity)，但无法正确理解。有人愿意向我解释他们在做什么吗？我可以使用相同的技术吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:32:26.043

对于 SQL Server 2000 - 2008 R2，使用`INT IDENTITY`是**迄今为止**最**简单、最可靠**的方法。

尝试自己做这件事就像重新发明轮子一样，并且有**很多**可能出错的方式 - 那为什么还要麻烦呢？您需要 (a) 确保该机制是并发安全的（并且只是做`SELECT MAX(ID) + 1`是不安全的！），并且您 (b) 需要确保您的机制不会成为系统性能的主要**瓶颈****，**或者......

用`INT IDENTITY`作主键有什么问题？好像不太理性。。。

对于 SQL Server **2012**及更高版本，您还可以考虑使用 a `SEQUENCE`（基本上是一个`IDENTITY`没有专门耦合到单个表的）

**更新：您在帖子中提到的** [其他 SO 问题](https://stackoverflow.com/questions/751270/best-way-to-get-the-next-id-number-without-identity)基本上是对 a 进行“自己动手”模拟`SEQUENCE`：

*   一个表包含对 ( `sequencename, currentvalue`)
*   当您要求给定序列的新值时，新值仅通过使用**与**子句`UPDATE`相结合的语句来确定`OUTPUT`

为什么这么复杂？`IDENTITY`这是安全处理并发请求的最简单和最有效的方法（除了使用）。该`UPDATE`语句将始终为您要从中获取新的序列**专门**锁定“序列表”中的那一行`ID`- 从而防止任何其他事务获取相同的`ID`值并获取重复的值 - 并`ID`使用该`OUTPUT`子句将新的返回到呼叫者，召集者。

# php - 在 php 中循环输出结果

> ID：13726630
> 
> 赞同：0
> 
> 时间：2012-12-05T15:27:48.677
> 
> 标签：php

我想循环出 $tree 数组，如果它有子元素，则将 class='parent' 添加到 li，如果没有，则使用默认样式（li）。从所有子 li 中添加和 ul 标签。

`print_r($tree)`结果是

```
Array
(
[0] => stdClass Object
(
[tid] => 6
[vid] => 2
[name] => parent one
[depth] => 0
[parents] => Array
(
[0] => 0
)

)

[1] => stdClass Object
(
[tid] => 14
[vid] => 2
[name] => child one
[depth] => 1
[parents] => Array
(
[0] => 6
)

)

[2] => stdClass Object
(
[tid] => 13
[vid] => 2
[name] => child two
[depth] => 1
[parents] => Array
(
[0] => 6
)

[6] => stdClass Object
(
[tid] => 8
[vid] => 2
[name] =>parent three
[depth] => 0
[parents] => Array
(
[0] => 0
) 
```

我想这样输出结果：

```
<li class='parent'>
<a href="#">parent one</a><span></span>
<ul class='haschild'>
<li><a href="#">child one/a></li>
<li><a href="#">child two</a></li>
</ul>
</li>
<li><a href="">child three</a></li> 
```

我使用了以下代码，但它无法输出我想要的上述html

```
foreach($tree as $term){
    if($term->depth==0){
        echo "<li class='parent'><a href=''>$term->name</a><span></span>";
    }
    if($term->depth>0){
        echo "<ul><li><a href=''>$term->name</a><li></ul>";
    }
    echo "</li>";
} 
```

上面的输出很糟糕。我哪里出错了，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:15:34.887

尝试这个：

```
foreach ($tree as $term){
if ($term->depth == 0){
    $children = array();
    foreach ($tree as $term2){
        foreach ($term2->parents as $parent){
            if ($parent == $term->tid){
                $children[] = $term2;
            }
        }
    }

    if (count($children) > 0){
        echo '<li class="parent">';
        echo '<a href="#">' . $term->name . '</a><span></span>';
        echo '<ul class="haschild">';
        foreach ($children as $child){
            echo '<li><a href="#">' . $child->name . '</a></li>';
        }
        echo '</ul>';
        echo '</li>';
    }
    else{
        echo '<li><a href="#">' . $term->name . '</a></li>';
    }
} 
```

}

但是上面的代码仅适用于深度<= 1 ...对于更深的树，您需要进行递归或while循环...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:37:16.360

您的问题是您实际上在该数组中没有任何类似的父子关系。没有嵌入的子元素数组。

你会想让你的数组看起来像这样（JSON）：

```
{
   "parents":[
      {
         "name":"parent 1",
         "children":[
            {
               "name":"child 1"
            },
            {
               "name":"child 2"
            }
         ]
      }
   ]
} 
```

然后，您可以遍历第一级数组项（父项），并为每个项循环其子项：

```
foreach( $parents as $parent )
{
  echo 'parent: ' . $parent['name'] . '<br />';

  foreach( $parent['children'] as $child )
  {
    echo 'child: ' . $child['name'] . '<br />';
  }

} 
```

# c# - 如何使用 javascript 或 php 将文件作为字符串下载以进行速度测试？

> ID：13726631
> 
> 赞同：0
> 
> 时间：2012-12-05T15:27:50.087
> 
> 标签：c#, php, javascript, download

使用 c# 我使用 webclient 作为字符串下载文件以检查下载速度，如何使用 javascript 或 PHP 执行此操作？这是我的 c# 示例。

```
 Uri URL = new Uri("https://www.example.com/File512kb");
  WebClient wc = new WebClient();
  double starttime = Environment.TickCount;
  string file = wc.DownloadString(URL);     //download this file as string so I won't need to save it to local disk.
  stopWatch.Elapsed.Milliseconds;
  double endtime = Environment.TickCount;
  double milisecs = endtime - starttime; 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:33:23.350

它不会 100% 准确，但您可以在 PHP中使用`file_get_contents()`和。`microtime()`

[http://us3.php.net/file_get_contents](http://us3.php.net/file_get_contents) http://us1.php.net/manual/en/function.microtime.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:34:42.847

```
$fStart = microtime( true );

file_get_contents( 'http://www.example.com/File512kb' );

$fEnd = microtime( true );

echo $fEnd - $fStart; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:35:37.413

以下是我在 PHP 中的处理方式：

```
<?php

    set_time_limit(0);
    $start_time = microtime(true);
    $file = file_get_contents('http://somefileorother.com/file');
    $end_time = microtime(true) - $start_time;

    echo $end_time; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T15:36:02.613

JavaScript：

```
var start = new Date();
$.ajax({
    url: "https://www.example.com/File512kb"
}).done(function() {
    console.log(new Date() - start);
}); 
```

这将返回以毫秒为单位的时间。然而，该函数确实使用了 jQuery，因为这是进行 AJAX 调用的一种非常简单的方法。

# c# - 在 C# 中使用 await 内部属性

> ID：13726634
> 
> 赞同：15
> 
> 时间：2012-12-05T15:27:58.927
> 
> 标签：c#, .net, async-await, c#-5.0

> **可能重复：**
> [如何从 getter 或 setter 调用异步方法？](https://stackoverflow.com/questions/6602244/how-to-call-an-async-method-from-a-getter-or-setter)

我正在尝试实现一个将在其中使用 Sqlite 等待的属性：

```
public int ID {
        get
        {
            if (_id != null)
            {
                return _id;
            }
            if (string.IsNullOrEmpty(ImageName))
            {
                return -1;
            }
            var query = CurrentConnection.Table<Image>().Where(i => i.ImageName == ImageName);
            var result = await query.ToListAsync();
            ...other code 
```

但是，由于属性未设置为 await（尝试过，不起作用），我不能在属性内使用 await。

除了使用方法而不是属性之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T15:30:21.747

不 - 没有异步属性之类的东西。即使您*可以*声明一个异步属性，也必须将其声明为返回值`Task<int>`而不是... 否则当您点击一个表达式`int`时您想要返回什么？`await`

假设您肯定想要异步行为，我会在这里*强烈*建议一种方法。`GetIdAsync`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T15:40:54.473

C# 中不允许使用属性没有*技术*原因。`async`这是一个有目的的设计决策，因为“异步属性”是矛盾的。

属性应该返回当前值；他们不应该启动后台操作。

通常，当有人想要一个“异步属性”时，他们真正想要的是以下之一：

1.  返回值的异步方法。在这种情况下，将属性更改为`async`方法。
2.  可用于数据绑定但必须异步计算/检索的值。在这种情况下，要么使用`async`包含对象的工厂方法，要么使用`async InitAsync()`方法。数据绑定值将`default(T)`一直持续到该值被计算/检索。
3.  创建成本高，但应缓存以备将来使用的值。在这种情况下，请`AsyncLazy` [从我的博客](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)或[AsyncEx 库](http://nitoasyncex.codeplex.com/)中使用。这会给你一个`await`能干的财产。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T15:35:29.270

除了返回变量值之外，您不应该将属性 Getter 用于任何事情。

调用代码通常会对调用类时的期望做出性能方面的假设。

**经验法则：**

*   **属性**意味着值的**快速**返回
*   **方法**意味着或多或少**的冗长操作**

因此强烈建议不要将任何冗长的逻辑放入 getter。改用方法。

**微软的 Rico Mariany**在这里给出了一篇非常详细的文章：[Properties Guidelines for Properties](http://blogs.msdn.com/b/ricom/archive/2011/12/19/performance-guidelines-for-properties.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:31:19.153

如果使用 await，则将方法的其余部分转换为回调，这意味着您无法返回 int。您需要返回一个 Task<int>。目前也不支持在属性中使用 await，您需要将属性转换为返回 Task<int> 的“get”方法。

如果您想直接返回 int，而不是执行 await *awaitable*，请使用*awaitable .Result*。这将导致异步操作同步解决，允许您直接返回具体结果。

# ruby-on-rails-3 - 如果 404，Rails 处理加载外部图像

> ID：13726640
> 
> 赞同：0
> 
> 时间：2012-12-05T15:28:09.450
> 
> 标签：ruby-on-rails-3, event-handling, http-status-code-404, image

在我看来，我想加载存储在服务器外部的图像。可能会发生图像移动到另一个 url，然后我会收到 404。

在我看来，我该如何处理？例如，如果 img 返回 404，则加载本地标准图片？

例如这个简单的 HTML img 标签

```
<img src="<%=myExternalImageUrl%>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:00:05.847

我不认为你可以在 Rails 中做到这一点，但我认为你可以用 Javascript 做到这一点，我相信。您需要使用 Javascript 加载图像，测试响应以查看其加载是否正常，然后将其插入 DOM 或将其替换为您的默认图像。

# jquery - jquery Ajax Request SyntaxError: Unexpected token <

> ID：13726646
> 
> 赞同：2
> 
> 时间：2012-12-05T15:28:28.563
> 
> 标签：jquery, ajax, asmx

我正在尝试使用获取请求返回一系列产品。响应返回带有 200 请求的 XML。

网络服务：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public List<product> GetAllProducts()
{
    using (SchulteDesignYourOwnEntities db = new SchulteDesignYourOwnEntities())
    {
        return db.products.ToList();
    }
} 
```

这是我的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title></title>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {

                $.ajax({
                    url: 'http://www.organizeliving.com/designwebservice.asmx/GetAllProducts',
                    dataType: 'json',
                    success: function (result) {
                        alert("Result: " + result.length);
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        console.log("Status: " + xhr.status);
                        console.log("Message: " + thrownError);
                    }
                });

            });
        </script>
    </head>

    <body></body>

</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T15:32:25.933

你有`dataType`as `'json'`。jQuery 会自动尝试从响应中解析 JSON。如果不能，则认为这是一个错误。

XML 不是有效的 JSON（它真的很讨厌开头`<`）。您可以将其更改`dataType`为`'xml'`（或不更改）或实际从服务器发出纯 JSON。

# java - 您是否使用 Java 中的默认（包）可见性？

> ID：13726651
> 
> 赞同：5
> 
> 时间：2012-12-05T15:28:51.183
> 
> 标签：java, visibility

java中的默认可见性意味着只有同一个java包中的其他类可以访问它。我当然看到了它的用途，并且已经多次使用它。

另一方面，我遇到的 90% 的默认可见性只是来自忘记添加任何可见性关键字的开发人员。

因此，一方面，有合法用途，另一方面，它经常掩盖不良代码。您在开发团队中做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T15:38:25.547

我通常会尝试让每个人都从最有限的范围开始，只有在我们看到设计中有必要时才开始向外扩展。有时，从 to 迁移的决定`private`也是`package-private`由于我们需要编写测试而不必遵循使用模拟框架的路线（请参阅[Powermock](http://code.google.com/p/powermock/)）。

除此之外，我们在可变性上遵循相同的心态。一切都始于`final`且仅当我们看到需要修改状态时才将其删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T15:50:14.403

如果我特别想要包访问，我把**/* package */**放在方法/变量等的定义之前，以确保人们知道我实际上是这个意思，而不是偷懒。虽然我很少使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T15:31:08.677

我鼓励人们使用`private`我本来希望作为默认设置的。

有时，我会运行代码分析，将访问修饰符减少到只需要的部分。

# git - git clone 错误：无法更新 ref 'HEAD'

> ID：13726652
> 
> 赞同：0
> 
> 时间：2012-12-05T15:28:51.513
> 
> 标签：git, github

> **可能重复：**
> [摆脱旧 git 分支的“...不指向有效对象”](https://stackoverflow.com/questions/6265502/getting-rid-of-does-not-point-to-a-valid-object-for-an-old-git-branch)

当我尝试从 GitHub 克隆项目时，出现以下错误：

```
$ git clone https://github.com/lukaszkujawa/Beehive.git
Cloning into Beehive...
remote: Counting objects: 149, done.
remote: Compressing objects: 100% (114/114), done.
remote: Total 149 (delta 31), reused 132 (delta 15)
Receiving objects: 100% (149/149), 108.13 KiB | 131 KiB/s, done.
Resolving deltas: 100% (31/31), done.
error: refs/remotes/origin/master does not point to a valid object!
error: Trying to write ref refs/heads/master with nonexistant object 3985fe8fad9d1480fb76d849ba4dbbdebfee2efd
fatal: Cannot update the ref 'HEAD'. 
```

我预计这是一个常见问题，但令人惊讶的是，我在谷歌上找到的所有内容都假设 .git 目录存在。据我了解，.git 始终是项目的本地文件，在这种情况下，它无法下载它。我在另一台服务器上尝试过它，它可以工作。

奇怪的是，当我尝试克隆其他任何东西时都没有问题。

```
$ git clone https://github.com/lukaszkujawa/php-mp3info.git
Cloning into php-mp3info...
remote: Counting objects: 23, done.
remote: Compressing objects: 100% (19/19), done.
remote: Total 23 (delta 8), reused 19 (delta 4)
Unpacking objects: 100% (23/23), done. 
```

我想了解这个特定服务器上的这个特定项目有什么特别之处，它无法克隆它。

**编辑1：**

git clone 与 GIT_TRACE=2

```
$ GIT_TRACE=2 git clone https://github.com/lukaszkujawa/Beehive.git
trace: built-in: git 'clone' 'https://github.com/lukaszkujawa/Beehive.git'
Cloning into Beehive...
trace: run_command: 'git-remote-https' 'origin' 'https://github.com/lukaszkujawa/Beehive.git'
trace: run_command: 'fetch-pack' '--stateless-rpc' '--lock-pack' '--thin' 'https://github.com/lukaszkujawa/Beehive.git/' 'refs/heads/master'
trace: exec: 'git' 'fetch-pack' '--stateless-rpc' '--lock-pack' '--thin' 'https://github.com/lukaszkujawa/Beehive.git/' 'refs/heads/master'
trace: built-in: git 'fetch-pack' '--stateless-rpc' '--lock-pack' '--thin' 'https://github.com/lukaszkujawa/Beehive.git/' 'refs/heads/master'
remote: Counting objects: 149, done.
remote: Compressing objects: 100% (114/114), done.
trace: run_command: 'index-pack' '--stdin' '-v' '--fix-thin' '--keep=fetch-pack 9248 on vmserver01' '--pack_header=2,149'
trace: exec: 'git' 'index-pack' '--stdin' '-v' '--fix-thin' '--keep=fetch-pack 9248 on vmserver01' '--pack_header=2,149'
trace: built-in: git 'index-pack' '--stdin' '-v' '--fix-thin' '--keep=fetch-pack 9248 on vmserver01' '--pack_header=2,149'
remote: Total 149 (delta 31), reused 132 (delta 15)
Receiving objects: 100% (149/149), 108.13 KiB, done.
Resolving deltas: 100% (31/31), done.
error: refs/remotes/origin/master does not point to a valid object!
error: Trying to write ref refs/heads/master with nonexistant object 3985fe8fad9d1480fb76d849ba4dbbdebfee2efd
fatal: Cannot update the ref 'HEAD'. 
```

**编辑2：**

```
$ git --version
git version 1.7.9.1 
```

# list - 列表列表中的正面总和

> ID：13726656
> 
> 赞同：0
> 
> 时间：2012-12-05T15:29:15.757
> 
> 标签：list, haskell

我想要一个函数，它给我一个给定列表中所有列表的所有头部的总和。我正在尝试这个：

```
verticalParity :: [Int] -> [Int] -> Int
verticalParity (x:xs) (y:ys) = x + y 
```

为什么我不能这样做？

```
map verticalParity [[2,0,2,2,2,1], [5000,0,2,3,2,1], [26,1,2,3,44,4]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:40:23.867

这将做你所描述的

```
sum . map head 
```

您发布的功能不起作用，因为您要完成的不是地图，而是折叠（其中 sum 是一个示例）。

您还可以将您的 verticalParity 函数更改为此

```
verticalParity :: Int -> [Int] -> Int
verticalParity x (y:ys) = x + y 
```

并使用它

```
foldl verticalParity 0 [[2,0,2,2,2,1],[5000,0,2,3,2,1],[26,1,2,3,44,4]] 
```

# .net - 将参数传递给 .NET 定义的命令

> ID：13726660
> 
> 赞同：3
> 
> 时间：2012-12-05T15:29:38.753
> 
> 标签：.net, vb.net, command, autocad

我需要在 Autocad 2000i 的命令行上写一个命令，我希望 autocad 提示输入一个参数。然后我的 vb.net 程序将根据收到的参数进行操作。

基本上我想我的解决方案都在这里：[http ://through-the-interface.typepad.com/through_the_interface/2006/09/passing_argumen.html](http://through-the-interface.typepad.com/through_the_interface/2006/09/passing_argumen.html)

问题是，我找不到对其中使用的 Autodesk.AutoCAD.EditorInput 命名空间的引用。

我在这里想念什么？AutoCAD 2000i 中还没有 EditorInput 吗？

* * *

非常感谢您的回答。

我有一个 vb.net 项目，它向 autocad 添加了一个工具栏。我想让用户通过编写命令和参数来更改工具栏中组合的选定值。

我如何在我的项目中使用您的方法？我是否将 dvb 文件放入我的项目中？vba 文件可以集成到我的 vb.net 项目中吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:40:53.970

早在 2000 年，AutoCAD 就不存在 .Net API。事情是通过 LISP 或 VBA 或两者的组合来完成的。以下是要做的事情的简要说明。

**VBA-Only 方式：**

打开工具 > 宏 > Visual Basic 编辑器 (alt + F11)

输入您的代码：

```
Sub Test()

Dim str As String
str = InputBox("Enter radius:")

MsgBox str

End Sub 
```

输入`"-vbarun"`命令提示符（不带引号）

类型`"Thisdrawing.Test"`（模块名.函数名）

**VBA + Lisp 方式 -（我的首选方法）**

如上所述，在编辑器中键入您的代码。保存您的 vba 文件（.dvb 格式）..假设它位于`D:\Macros`名称为的文件夹中`MyDvb.dvb.`

创建一个新的 Lisp 文件（打开记事本并键入下面的代码并保存为 .lsp 扩展名）此 lisp 文件将用于调用所有 VBA 宏。

```
(defun c:testcommand()
  (command "vbarun" "D:/Macros/MyDvb.DVB!ThisDrawing.Test")
) 
```

`"ap"`现在通过在命令提示符下键入一次加载此 lisp 。这有助于我们保持会话可用的命令。

键入`"testcommand"`，您将看到您的代码已执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:13:22.207

这是使用 .NET C# 完成的方法

// 要求用户选择一个文件夹

```
 PromptResult res = ed.GetString("\nEnter the path of the folder: ");

        if (res.Status == PromptStatus.OK)
        {
            string[] filepaths = Directory.GetFiles(res.StringResult, "*.dwg", SearchOption.AllDirectories);
        } 
```

如果您有任何问题，请告诉我。

# javascript - 客户端缓存 Javascript / CSS 文件

> ID：13726662
> 
> 赞同：4
> 
> 时间：2012-12-05T15:29:43.087
> 
> 标签：javascript, css, performance, caching

我想知道为什么我们应该结合 Javascript 和 CSS 文件，因为它只是在第一页加载时的优势。在所有后续请求中，都会从客户端浏览器缓存中加载 JS/CSS。那么它应该没有性能差异，还是我完全错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:50:04.200

有几个原因：

1.  浏览器通常会限制它们可以同时向给定站点发出多少 HTTP 请求（出于礼貌，而不是出于任何真正的技术限制），并且您不一定希望 scriptC.js 和 Z.css 持有up scriptA.js 和 A.css；
2.  每个单独的 HTTP 请求都有延迟和带宽开销，即使它是一个“条件 GET”，会导致一个“304 - 未修改”响应；
3.  缓存确实会不时失效。在 HTTP 中，到期的确切时间通常由服务器在 HTTP 响应的标头中设置。问题是，服务器永远不知道更新发布之前的确切时间，所以它不断地对冲它的赌注并给出一个“足够短”的到期日期。（对 HTML 文件中包含的资源使用唯一生成的名称是避开此项目符号的一种方法……只需要检查封闭的 HTML 页面。

有两个脚本有一个小理由：

1.  您可以让一个脚本在加载大脚本时尽快开始执行。

但是，是的，这一切都与最终用户感知的速度有关……*尤其是*在第一页加载时，当您试图赢得他们的注意力时。

# visual-c++ - 不重复元素的数组

> ID：13726666
> 
> 赞同：0
> 
> 时间：2012-12-05T15:29:56.467
> 
> 标签：visual-c++

我需要有不重复的元素数组。这意味着如果元素在列表中，则将从数组中跳过新值。在这种情况下是否有任何可能有用的标准类型（矢量、地图等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:31:59.557

您可以使用[set](http://www.cplusplus.com/reference/set/set/)来避免重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:31:06.007

哈希表可以做到这一点。您有一些选择，包括标准的和特定于 MS 的。

首先看一下 std::map ：

[http://www.cplusplus.com/reference/map/map/](http://www.cplusplus.com/reference/map/map/)

# nhibernate - NHibernate 强制未找到忽略不执行额外的选择

> ID：13726668
> 
> 赞同：3
> 
> 时间：2012-12-05T15:30:00.623
> 
> 标签：nhibernate, many-to-many, nhibernate-mapping

我正在使用一个不总是使用 FK 的遗留数据库。例如，我有一个实体 Person 和一个实体 Country。一个人有一个 Country，它在 Person 映射中被映射为多对一。

```
<many-to-one name="Country" class="Country" foreign-key="none" lazy="false" not-found="ignore" fetch="join" outer-join="true" column="countryid"/> 
```

当人具有`null`列值（countryid）时，它不会执行额外的选择查询（因为它知道国家表中不会有引用），但是当人具有`0`列值时，NH 将执行另一个选择查询如果该国家/地区实际上不存在，请检查国家/地区表。但是因为我们做了一个左外连接，NH 应该已经知道它不存在。只是为了澄清一下，如果列的值为`1`并且它存在于国家表中，它将不会执行额外的选择。

反正有没有告诉 NHibernate 不要做额外的选择查询？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:22:23.390

不，没有办法通过配置来做到这一点。很好的帖子如何*改进*`not-found="ignore"`功能：

[http://nhforge.org/blogs/nhibernate/archive/2011/01/28/how-to-use-0-instead-of-null-for-foreign-keys.aspx](http://nhforge.org/blogs/nhibernate/archive/2011/01/28/how-to-use-0-instead-of-null-for-foreign-keys.aspx)

我们可以使用一些 NHibernate 扩展点，比如 custom `PocoEntityTuplizer`，但是没有简单的配置，没有设置...

**一些摘录**：来自上面的链接*（阅读以获取更多详细信息）*。在`Person`实体的构建过程中，集合也会`object[] values`包含`CountryProxy`. 假设 DB 中缺少的是 Id == 0 （根据需要使用您自己的逻辑）。此代理将被替换为`null`因此不会执行 SELECT...

```
public class NullableTuplizer : PocoEntityTuplizer
{
    public override void SetPropertyValues(object entity, object[] values)
    {
        for (int i = 0; i < values.Length; i++)
        {
            if (typeof (Country).IsAssignableFrom(getters[i ].ReturnType)
                && ((Country) values[i]).Id == 0) // missing id 
            {
                values[i] = null; // here change a Proxy to null
            }
        }
        base.SetPropertyValues(entity, values);
    }
... 
```

# python - 在 Django 中使用 Jython

> ID：13726670
> 
> 赞同：1
> 
> 时间：2012-12-05T15:30:07.773
> 
> 标签：python, django

*使用Jython*时如何设置我的 django 应用程序以连接到 mysql ？

# 设置.py

```
DATABASES = {
    'default': {
        'ENGINE': ''django.db.backends.mysql', # should this be: com.ziclix.python.sql?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:39:35.420

根据[Django 文档](https://docs.djangoproject.com/en/dev/howto/jython/)和[django-jython 文档](http://packages.python.org/django-jython/database-backends.html#mysql)，您可以[安装`django-jython`](http://packages.python.org/django-jython/quickstart.html#install)，然后`'doj.backends.zxjdbc.mysql'`用作数据库后端。

此外，请记住将 JDBC 驱动程序添加到您的类路径中：

```
jython -J-classpath path/to/driver.jar manage.py runserver 
```

或者

```
export CLASSPATH="$CLASSPATH:/path/to/driver.jar" 
```

# vps - 在 linode 中托管多个网站的最合适方式是什么？

> ID：13726675
> 
> 赞同：4
> 
> 时间：2012-12-05T15:30:27.253
> 
> 标签：vps, linode

我刚刚购买了基本的 linode 包，我想知道下一步该做什么。我有 5 个网站在多个提供商上托管，流量较少，我想将它们全部托管在 linode 中。问题是：

我应该将所有网站托管在 20Gb 主 linode 的单独文件夹中，并使用虚拟主机从不同域转发它们，还是为每个网站创建一个 linode？我可以理解，当您创建多个 linode 时会丢失很多空间，因为您一遍又一遍地复制 linux 系统文件（和交换空间）。另一方面，如果一个网站受到攻击或失败，其他网站将保持完整。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:53:02.733

我有同样的情况，简短的回答是我推荐一个 linode 并在网络服务器级别使用虚拟主机来处理流量。

我现在有 6 个网站在我的 Linode 上运行（过去 5 年有），4 个是 Ruby / Rack 应用程序，一个 PHP 应用程序和一个普通的静态 HTML 应用程序。因为机架应用程序每个运行不同的应用程序实例，如果一个失败，其他人仍然活着。

对我来说，更大的担忧是内存/交换，因为流量高于预期或内存泄漏。我建议安装[monit](http://mmonit.com/monit/)，并将其配置为在出现内存问题时重新启动进程。

# jquery - Jquery：使用事件停止递归

> ID：13726682
> 
> 赞同：2
> 
> 时间：2012-12-05T15:30:56.850
> 
> 标签：jquery, events, recursion

我正在递归地为 3 点设置动画。单击#myElement 后，我​​想停止递归。

这是我的代码：

```
 $(document).ready(function(){       
        var positions = {
            'pos1': {"X": $('#point_1').css('left'), "Y": $('#point_1').css('top')},
            'pos2': {"X": $('#point_2').css('left'), "Y": $('#point_2').css('top')},
            'pos3': {"X": $('#point_3').css('left'), "Y": $('#point_3').css('top')},
        };

        animate3Points(positions);
    }); 

    function animate3Points(p) {
        animatePoints('#point_3', p, p.pos1);
        animatePoints('#point_2', p, p.pos2);
        animatePoints('#point_1', p, p.pos3);
    }

    function animatePoints(selector, p, pos) {
        $(selector).animate({
            'left': pos.X , 
            'top':  pos.Y
        }, 2000, 'easeInOutQuad', function() {

            // while #myElement has not been clicked,
            // call again animate3points for recursivity :

            if (selector == '#point_1') { // just to be recalled one time
                p2 = changePosition(p);
                animate3Points(p2);
            }

            // end while

        });
    }

    function changePosition(obj) {
        firstEl = obj.pos1;
        obj.pos1 = obj.pos2;
        obj.pos2 = obj.pos3;
        obj.pos3 = firstEl;

        return obj;
    } 
```

动画有效，但可能需要以另一种方式实现以停止递归。

一个主意 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:37:42.927

您应该使用在函数外部实例化的全局变量，并将其用作递归调用何时停止的逻辑条件。例如：

```
var keepAnimating = true;

function animate3Points(p) {
    if(keepAnimating) {
        animatePoints('#point_3', p, p.pos1);
        animatePoints('#point_2', p, p.pos2);
        animatePoints('#point_1', p, p.pos3);
    }
} 
```

在您的点击事件中，您需要设置`keepAnimating = false;`. 这将停止递归，但您可能还需要停止动画。

但是，无限递归是一个非常糟糕的主意。您将导致浏览器使用大量内存。您应该优化代码以使用循环而不是递归。

# java - Java中非常长的间隔的有效方法

> ID：13726683
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:30:57.663
> 
> 标签：java, performance, wait, intervals

我正在为学校编写一个程序，如果学校时间表发生变化，它将发送一封电子邮件。程序必须每 5 分钟从学校网站读取更新信息，直到下午 4:00，并且必须等待接下来的 14 小时并重复相同的操作。

我的问题是：如何在 Java 中有效地实现这个短的 ~5 分钟和非常长的 ~14h 间隔？

只需使用 Thread.wait(millis)？

谢谢！

//编辑：感谢您的回答，我想我将使用一次执行的计时器，并在每次更新后计算新的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:35:10.827

即使在这种情况下性能并不重要，也只需在启动网站检查时`Calendar.getInstance()`或`new Date()`之前检查当前日期。如果不在你的时间范围内，什么也不做。要安排网站检查，只需使用`java.util.Timer`或类似的服务/框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:42:16.613

请看一下[石英](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/)。它满足大多数时间/调度需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:38:04.597

您可以使用 Java Timer 的 schedule 方法。每次执行任务后，您应该计算一个时间间隔（基于当前时间）并相应地安排任务到新的时间间隔。

# ios - IOS 警报框在屏幕后面

> ID：13726684
> 
> 赞同：1
> 
> 时间：2012-12-05T15:31:00.040
> 
> 标签：ios, uialertview

IOS 6.0.1 在多台设备上，有一种状态是警告框实际上是在屏幕/当前窗口的后面。我们看到警报框出现，然后“走开”。TextField 焦点在应用程序被背景化/前景化之前不起作用，然后出现警报框（模式）并被确定。然后 TextField 焦点工作正常，等等。

我以为这不可能与IOS有关？我将努力解决问题，但只是想问这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:04:39.973

这与电子邮件屏幕和电子邮件的结果有关。我在主线程上发出警报，但如果时间正确，警报会出现，然后主视图控制器会检查它。我以前见过这个，但警告框会回到顶部。在这里它没有。如果我将应用程序置于后台然后将其置于前台，则警报将位于顶部。

我稍微改变了时间，将警报框延迟了一点，然后它就会出现在最前面。

奇怪的...

# javascript - JQuery 附加到动态创建的元素

> ID：13726690
> 
> 赞同：5
> 
> 时间：2012-12-05T15:31:09.070
> 
> 标签：javascript, jquery

我动态地将一个`div`元素附加到现有的`div`. 但紧随其后，我需要将另一个附加`div`到`div`我刚刚动态创建的。但我似乎无法找到动态创建`div`的以便附加到它。我想也许 DOM 还没有意识到这一点，`div`因为我刚刚做到了。我该怎么做呢？

```
var serialModel = "Test Test";
$("#existingDiv").append("<div id = '" + serialModel + "'></div>");
$("#" + serialModel).append("<div>content here</div>") 
```

最后一行什么也没做。第二行产生了新的 div，但是我找不到它来追加它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T15:33:04.233

如果反之亦然怎么办：

```
$("<div />", { id : serialModel })     // create `<div>` with `serialModel` as ID
    .append("<div>content here</div>") // append new `<div>` to it
    .appendTo("#existingDiv");         // append all to `#existingDiv` 
```

# jquery-ui - 增加 jQueryUi 中 Droppable 的容差

> ID：13726696
> 
> 赞同：2
> 
> 时间：2012-12-05T15:31:18.993
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-ui-droppable

有什么方法可以增加 Droppable 的容差值吗？

目前它接受 4 个值：fit、intersect、pointer 和 touch。

但是我想要一个特定的情况，只要我的可拖动元素靠近可放置元素，它就应该接受它。

一个有效的选项可以是指定一个网格，比如 [3,3]，它接受任何可在此网格内或周围拖动的内容。

# objective-c - 如果字典为空，我如何使用 [NSMutableDictionary dictionaryWithDictionary]？

> ID：13726704
> 
> 赞同：2
> 
> 时间：2012-12-05T15:31:35.977
> 
> 标签：objective-c, ios, nsdictionary

我从服务器获取一些数据并将其保存到`NSDictionary` 然后我想`NSMutableDictionary`用它进行初始化`NSDictionary`。

```
NSDictionary  * const received = [self serverData];
NSMutableDictionary * const results = [NSMutableDictionary dictionaryWithDictionary:received]; 
```

如果我从服务器得到空的 JSON，因此我的`NSDictionary`将是空的，我该如何使用`dictionaryWithDictionary`一个空的 JSON？我用这个

```
NSDictionary * const received = [self serverData];
NSMutableDictionary * const results;
if (![received count]) {
    results = [NSMutableDictionary dictionary];
}
else
{
    results = [NSMutableDictionary dictionaryWithDictionary:received];
} 
```

但这似乎是一种代码气味。可能有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:02:24.413

你一开始就很好。

```
NSDictionary* received = [self serverData];
NSMutableDictionary* results = [NSMutableDictionary dictionaryWithDictionary:received]; 
```

会做你想做的。即使`received`是 nil 或空，`results`也只是一个空的 NSMutableDictionary。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:43:35.553

我会在上面创建一个类别，`NSDictionary`以提供这样一个安全的设置。

```
+ (NSMutableDictionary *)safeDictionaryWithDictionary:(NSDictionary *)dictionary
{
    return [NSMutableDictionary dictionaryWithDictionary:(dictionary ? dictionary : @{});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:39:24.673

您无法使用“无键”在字典中创建项目。as key 必须是非零字符串。

如果没有项目，则没有对象，也没有设置键，这会导致`setObject:nil forKey:nil`

# ios - 结合向下滑动和长按

> ID：13726705
> 
> 赞同：2
> 
> 时间：2012-12-05T15:31:37.870
> 
> 标签：ios, uigesturerecognizer

我试图在我的 ViewController（它有一个 tableView）中实现两个手势识别器，它们必须一个接一个地工作。第一个是向下滑动手势，第二个是长按手势。

这是我用@sergio 建议修改的代码

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        swipeDown = [[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeDownAction)] autorelease];

        longPress = [[[CustomLongPress alloc]initWithTarget:self action:@selector(longPressAction)] autorelease];

        longPress.minimumPressDuration = 2;

        swipeDown.numberOfTouchesRequired = 1;

        swipeDown.direction = UISwipeGestureRecognizerDirectionDown;

       swipeDown.delegate = self ;

        longPress.delegate = self ;

        [myTableView addGestureRecognizer:swipeDown];

        [myTableView addGestureRecognizer:longPress];

  }

    -(void)swipeDownAction {

        _methodHasBeenCalled = YES;    // bool @property declared in .h

        NSLog(@"Swipe down detected");

    }

    -(void)longPressAction {

        NSLog(@"long press detected");
    }

    - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
    {
        return YES;
    } 
```

还有我的 UILongPressGestureRecognizer 子类：

```
#import "CustomLongPress.h"
#import "ViewController.h"

@interface CustomLongPress()
{

    ViewController *vc;
}

@end

@implementation CustomLongPress
-(id)initWithTarget:(id)target action:(SEL)action controller:(ViewController *)viewCon
{
    self = [super initWithTarget:target action:action];

    if (self) {

        vc = viewCon;

    }

    return self;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
     NSLog(vc.methodHasBeenCalled ? @"Yes" : @"No");

    if (vc.methodHasBeenCalled) {

        [super touchesBegan:touches withEvent:event];
    }
} 
```

不幸的是，我仍然只从 swipeDown 获得日志，但在 longPress 方面没有日志

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:41:43.177

为此，您需要创建自己的自定义手势识别器。最好的方法是让您子类`UILongPressGestureRecognizer`化并使其仅在滑动结束后“接受”长按。例如，在`touchesBegan`方法中

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
   <if swipe recognizer action method has been called>
       [super touchesBegan:touches withEvent:event];
   }
} 
```

这样，两个手势识别器都会尝试识别手势：滑动识别器会立即这样做；而自定义识别器将“等待”滑动识别器触发。

实现条件的一种简单方法`<if swipe recognizer action method has been called>`是在您的滑动操作中设置一个全局标志（您在执行滑动操作时设置它；然后自定义识别器读取它的值）。这很*容易*，到目前为止还不是你能找到的最好的实现。

另一种方法是依赖`requiresGestureRecognizerToFail`链接 3 个标准手势识别器，我们称它们为 A、B 和 C，其中：

1.  A 是一个`UISwipeGestureRecognizer`；
2.  C是一个`UILongPressGestureRecognizer`；
3.  B 是任何手势识别器。

您可以像这样配置它们：

```
C --> B --> A 
```

借此`x --> y`表示`x`需要`y`失败。因此，您将拥有`C`（您的长按手势识别器）将要求`B`GR 失败并`B`要求`A`（您的滑动识别器）失败；`B`一旦`A`识别到滑动就会失败；一旦`B`失败，`C`将允许识别长按，如果有的话。

编辑：

阅读您的评论后，您是否介意尝试一下，看看是否有帮助：

1.  删除您的覆盖`touchesBegan`并将其替换为：

    ```
    - (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    } 
    ```

2.  然后定义：

    ```
    - (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {

      if (vc.methodHasBeenCalled) {
        [super touchesBegan:touches withEvent:event];
      } else {
         return;
      }
    } 
    ```

如果这不起作用，则让您的自定义手势识别器继承自通用手势识别器，并

1.  留`touchesBegan:`在原地并替换`touchesMoved`为：

    ```
    - (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {

      self.lastTouch = [touches anyObject];
      if (vc.methodHasBeenCalled && self.gestureNotBegunYet == YES) {
        self.gestureNotBegunYet = NO;
        [self performSelector:@selector(recognizeLongPress) withObject:nil afterDelay:1.0];

      } else {
         return;
      }
    } 
    ```

并添加：

```
- (float)travelledDistance {
  CGPoint currentLocation = [self.lastTouch locationInView:self.view.superview];
  return sqrt(pow((currentLocation.x - self.initialLocation.x), 2.0) +
            pow((currentLocation.y - self.initialLocation.y), 2.0));
}

- (void)fail {
  self.gestureNotBegunYet = YES;
  [NSObject cancelPreviousPerformRequestsWithTarget:self];

}

- (void)recognizeLongPress {

  if ([self travelledDistance] < kTapDragThreshold) {
    self.longPressed = YES;
    self.state = UIGestureRecognizerStateChanged;
  } else {
        [self fail];
        self.state = UIGestureRecognizerStateFailed;
  }
}

- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event {
  [self fail];
  [super touchesEnded:touches withEvent:event];
}

- (void)touchesCancelled:(NSSet*)touches withEvent:(UIEvent*)event {
  [self fail];
  [super touchesCancelled:touches withEvent:event];
} 
```

您将需要在`.h`

```
@property(nonatomic) CGPoint initialLocation;
@property(nonatomic, retain) UITouch* lastTouch;
@property(nonatomic) BOOL gestureNotBegunYet; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:40:09.713

如果我没记错的话，一旦系统检测到特定类型的手势（点击、滑动、平移、长按等），它就不能再为该触摸动作发送不同类型的手势。

这并不妨碍您实现您想要的结果。也许结合重载以下`UIResponder`方法：

```
– touchesBegan:withEvent:
– touchesMoved:withEvent:
– touchesEnded:withEvent:
– touchesCancelled:withEvent: 
```

并且使用手势识别器（不确定输入是否会被一个消耗而另一个忽略），您可以确定它是“长滑动”

# windows-8 - 如何在bottomAppBar中添加图像

> ID：13726706
> 
> 赞同：0
> 
> 时间：2012-12-05T15:31:38.587
> 
> 标签：windows-8

我想在 ApplicationBar 中添加一个 ImageBrush。图像来自 Web 服务器。如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:58:55.253

简单的

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
<AppBar ><AppBar.Background>
                <ImageBrush ImageSource="./Assets/bg.png"></ImageBrush>
            </AppBar.Background></AppBar>
    </Grid> 
```

至于从 Web 加载图像，请在代码中执行此操作，然后将 imagesource 属性绑定到 viewmodel 中的适当属性

# java - 将 HashMap 的创建迭代为另一个 HashMap 中的值

> ID：13726709
> 
> 赞同：0
> 
> 时间：2012-12-05T15:31:44.427
> 
> 标签：java, hashmap, loops

我有一个 HashMap，它的键是某个类的对象，值是另一个 HashMap，键是字符串，值是 Double：

```
HashMap<MyClass, HashMap<String, Double>> myHashMap; 
```

我需要一个循环，将键（对象）和值（HashMap）添加到这个 HashMap，但我不能在循环中创建一个新的 HashMap 变量作为它的“值”。本质上，每个 MyClass 对象都必须有带有对应双精度的字符串。

这可能吗？这还有什么意义吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:34:10.597

例子：

```
YourClass someObject = new YourClass();
//putting object to map with empty hashMap value
myHashMap.put(someObject, new HashMap<String,Double>());
//adding String,Double to created before hashMap value
myHashMap.get(someObject).put("PI", 3.14); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:45:58.817

你的意思是像：

```
 Object objectKey;
    String stringKey;
    Double value;
     .
     .
     .

    loop

    if(!myHashMap.containsKey(objectKey)){
        myHashMap.put(objectKey, new HashMap<String, Double>());
    }

    HashMap<String, Double> accordingHashMap = myHashMap.get(objectKey);

    accordingHashMap.put(stringKey, value)

    endloop 
```

# javascript - javascript执行顺序

> ID：13726711
> 
> 赞同：2
> 
> 时间：2012-12-05T15:31:50.923
> 
> 标签：javascript, function-pointers, execution

我读到了

> JavaScript 在任何其他变量之前缓存已声明的函数，在此之后，它会回到作用域的顶部并按照它们出现的顺序运行变量定义和函数调用

我不明白这个例子

```
//bob first initialization
function bob()
{
    alert('bob');
}

//set jan to bob via reference
var jan = bob;

//set bob to another function
function bob()
{
    alert('newbob');
}

jan(); //alerts 'bob'
bob(); //alerts 'newbob' 
```

这两个`bob()`函数都在执行前被声明和缓存。那么为什么会`jan()`提醒'bob'而不是'newbob'呢？当 jan 被初始化时， bob() 已经被重新声明了。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:44:25.540

因为`jan`指向`bob`（作为指针）的第一个声明，而不是`bob`你需要`jan = bob;`在第二个声明之后设置的新声明

不过不太确定。

# object - qTip2: redraw() 在 IE8 中导致错误

> ID：13726713
> 
> 赞同：1
> 
> 时间：2012-12-05T15:31:54.360
> 
> 标签：object, internet-explorer-8, redraw, qtip2

我正在使用 qTip2 将工具提示附加到我网站上的某些按钮上。单击其中一个按钮时，需要在其可见时更改其自己的工具提示中显示的内容。

我[在 SO 上发现了这个问题，](https://stackoverflow.com/questions/6824165/qtip2-refresh-tooltip-while-it-is-active)它解决了同样的问题并提供了一个工作[示例](http://jsfiddle.net/Mottie/EEwwg/418/)。该示例的相关部分是：

```
var qapi = $('#test').data('qtip'),
    newtip = 'new content';

qapi.options.content.text = newtip;
qapi.elements.content.text(newtip);
qapi.redraw(); 
```

基本上，您获得工具提示、定义新内容、交换新内容并调用`redraw()`工具提示，以便它使用新内容重新绘制自身。

然而，这个例子和我在我自己的站点中实现它都会在 IE8 中产生一个错误——即使它可以*正常工作*并且内容按预期发生了变化！它也适用于所有其他浏览器，但不会产生错误。

错误是：

```
Object doesn't support this property or method 
```

在`redraw()`被调用的行：

```
qapi.redraw(); 
```

有什么办法可以防止这个错误发生吗？即使该`redraw()`功能有效并且我看到工具提示内容发生了我想要的更改，但该错误会导致听到“叮”声并在 IE 的状态栏中放置一个警告图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:49:10.563

显然，有一个`reposition()`功能可以更新工具提示的内容并重新定位它，使其相对于触发它的元素保持居中（以防新内容的长度不同）。所以而不是：

```
qapi.redraw(); 
```

只需使用：

```
qapi.reposition(); 
```

这具有相同的效果，但消除了 IE8 中的错误。

# javascript - 如何使用 restify.js 处理深度和复杂的数据结构

> ID：13726718
> 
> 赞同：2
> 
> 时间：2012-12-05T15:32:08.850
> 
> 标签：javascript, node.js, rest, restify

我见过所有端点都位于根目录的 Restify 示例：/users、/data 等。我知道可以像这样实现嵌套：

```
server.get('/users/:user/data/:id', returnData); 
```

并且 req.params 变量将包含所有请求参数。例子：

```
{ user: '45', id: '80' } 
```

如果我的应用程序的端点很少，这似乎可以正常工作，但是如果我想通过 REST API 公开一个深度和分支的数据结构怎么办？就像是：

```
{
  stuff: {
    points: {
      colors: {
        shinyThings: {},
        dullThings: {}
      }
    },
    ships: {
      enterprises: {},
      starDestroyers: {}
    }
  },
  things: {},
} 
```

必须手动编写所有这些端点的路径似乎并不正确。我最终得到了很多路径定义和类似这样的东西：

```
server.put('/stuff/:stuff/points/:points/colors/:colors/shinyThings/:shinyThings', returnShinyThing); 
```

Restify 有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:17:49.003

我想出了一种方法来做到这一点，尽管我确信有更好的选择：

1) 创建模块来处理端点上的某些操作。这些模块将需要集成到中央路由器模块中。示例`stuff.js`：

```
exports.list = function(req, res, next) {
  // Code to handle a GET request to /stuff
};

exports.create = function(req, res, next) {
  // Code to handle a POST request to /stuff
};

exports.show = function(req, res, next) {
  // Code to handle a GET request to /stuff/:id
};

exports.update = function(req, res, next) {
  // Code to handle a PUT request to /stuff/:id
};

exports.destroy = function(req, res, next) {
  // Code to handle a DELETE request to /stuff/:id
}; 
```

2）在路由器模块中定义动作的映射-> http动词：

```
var actions = {
  list: 'get',
  create: 'post',
  show: 'get',
  update: 'put',
  destroy: 'del'
} 
```

3）创建一个表示数据结构的对象，如下所示：

```
var schema = {
  stuff: {
    _actions: require('./stuff'),
    points: {
      _actions: require('./points'),
      colors: {
        _actions: require('./colors'),
        shinyThings: {_actions: require('./shinyThings')},
        dullThings: {_actions: require('./dullThings')}
      }
    },
    ships: {
      _actions: require('./ships'),
      enterprises: {_actions: require('./enterprises')},
      starDestroyers: {_actions: require('./starDestroyers')}
    }
  },
  things: {_actions: require('./things')},
} 
```

4) 在路由器初始化期间，应用程序向它传递一个 Restify 服务器对象以附加路由。在初始化期间，递归函数遍历模式对象，当`_actions`找到键时，它调用第二个函数，将给定路径上的路由处理程序附加到给定服务器对象：

```
(function addPathHandlers(object, path) {
  for (var key in object) {
    if (key === '_actions') addActions(object, path);
    else if (typeof object[key] === 'object') {
      var single = en.singularize(path.split('/').pop());

      if (path.charAt(path.length - 1) !== '/') {
        path += ['/:', single, '_id/'].join('');
      }

      addPathHandlers(object[key], path + key);
    }
  }
})(schema, '/');

function addActions(object, path) {
  // Actions that require a specific resource id
  var individualActions = ['show', 'update', 'destroy']; 

  for (var action in object._actions) {
    var verb = actions[action];

    if (verb) {
      var reqPath = path;
      if (individualActions.indexOf(action) !== -1) reqPath += '/:id';

      server[verb](reqPath, object._actions[action]);
    }
  }
} 
```

**注意：**这使用了[lingo](http://visionmedia.github.com/lingo/)模块（即 en.singularize() 函数）。由于我删除了功能的非关键部分，因此它也有点简化，但它应该是功能齐全的。

对此的灵感来自于查看 express-resource 的操作方式，尽管它没有那么精致和简单易用。

# android - 使用 android 复制来自 fiddler 的 HttpPost 请求

> ID：13726720
> 
> 赞同：1
> 
> 时间：2012-12-05T15:32:12.690
> 
> 标签：android, json, wcf, http-post

我已经使用 json 构建了一个 wcf 服务。我认为它可以正常工作，因为我一直在用 fiddler 调试它。虽然我不能从 android 正确调用它。我想我在尝试传递参数时一定做错了什么.这是提琴手请求：

**请求标头：**

用户代理：提琴手主机：androidwcf.schoolportal.gr 内容类型：application/json 内容长度：73

**请求正文：**

{ "ID":2147483647, "description":"字符串内容", "enable":true }

我如何将这个 json 对象作为参数传递给 android？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:19:52.143

尝试作为 ti 将当前 json obejct 发布到您的服务器：

```
 StringBuilder sb = new StringBuilder();  

    String http = "YOUR_WEB_URL";  
    //System.out.println("-----------------" + http+"?"+param);  
    HttpURLConnection urlConnection=null;  
    try {  
        URL url = new URL(http);  
         urlConnection = (HttpURLConnection) url  
                .openConnection();
        urlConnection.setDoOutput(true);   
        urlConnection.setRequestProperty("User-Agent", "Fiddler");  
        urlConnection.setRequestMethod("POST");  
        urlConnection.setUseCaches(false);  
        urlConnection.setConnectTimeout(10000);  
        urlConnection.setReadTimeout(10000);  
        urlConnection.setRequestProperty("Content-Type","application/json");   
        urlConnection.setRequestProperty("Content-Length","73");
        urlConnection.setRequestProperty("Host", "androidwcf.schoolportal.gr");
        urlConnection.connect();  

         //Create JSONObject here
        JSONObject jsonParam = new JSONObject();
        jsonParam.put("ID", "25");
        jsonParam.put("description", "String content");
        jsonParam.put("enable", "true");
        OutputStreamWriter out = new   OutputStreamWriter(urlConnection.getOutputStream());
        out.write(jsonParam.toString());
        out.close();  

        int HttpResult =urlConnection.getResponseCode();  
        if(HttpResult ==HttpURLConnection.HTTP_OK){  
            BufferedReader br = new BufferedReader(new InputStreamReader(  
                    urlConnection.getInputStream(),"utf-8"));  
            String line = null;  
            while ((line = br.readLine()) != null) {  
                sb.append(line + "\n");  
            }  
            br.close();  

                System.out.println(""+sb.toString());  

        }else{  
            log.warn(urlConnection.getResponseMessage());  
        }  
    } catch (MalformedURLException e) {  

        e.printStackTrace();  
    }  
    catch (IOException e) {  

        e.printStackTrace();  
    }finally{  
        if(urlConnection!=null)  
           urlConnection.disconnect();  
    }  

} 
```

# java - 如果使用 CommonsMultipartResolver 上传多个文件，如何为每个文件设置 maxUploadSize？

> ID：13726723
> 
> 赞同：1
> 
> 时间：2012-12-05T15:32:15.870
> 
> 标签：java, spring

我需要在一个请求中支持多个文件上传。用户可以选择任意数量的文件并将它们上传到服务器。我想限制每个文件不超过 10MB。我写了下面的代码，但它限制所有文件的总大小组合为小于 10MB，但我想限制每个文件 10MB 并且总共可以有任意数量的文件。我正在使用 spring web mvc 3.0

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- 10 megs is 10485760 bytes.-->
    <property name="maxUploadSize" value="10486784"/>
</bean> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:09:59.180

`maxUploadSize`的参数`CommonsMultipartResolver`不会设置对文件大小的验证。它是关于限制多部分文件上传请求，以便没有恶意用户可以上传压倒您的资源来处理该请求的内容。在这种情况下，单个文件的大小实际上并不重要。需要关注的是总上传大小。这就是为什么`CommonsMultipartResolver`没有任何属性来限制单个文件的大小。

要限制单个文件的大小，您必须进行服务器端验证（在这两种情况下，单个文件上传或多个文件上传）。

感谢和快乐编码！

# zooming - 移动浏览器放大太多

> ID：13726724
> 
> 赞同：3
> 
> 时间：2012-12-05T15:32:18.467
> 
> 标签：zooming, mobile-browser

我正在建立我的第一个移动网站。

为确保该站点适当地填充屏幕，我已设置 `<meta name="viewport" content="width=device-width, initial-scale=1" />`

但是，在我的手机（Android 4.2.1）上，只有 Opera Mobile 放大并用“视口”-DIV 填充屏幕。Chrome、Dolphin、Firefox 和 Android 浏览器都放大了一点点，所以网站的一小部分在屏幕右侧被截断，迫使水平滚动。

我花了最后一个小时尝试不同的 CSS 设置和谷歌搜索“移动浏览器缩放”的各种组合，但我还没有找到解决方案，这让我发疯了。

澄清一下：我想让浏览器放大到足以使网站水平填充屏幕，而不是更多。

我很感激任何帮助！

# uiwebview - monotouch uiwebview 找不到本地 html

> ID：13726726
> 
> 赞同：5
> 
> 时间：2012-12-05T15:32:24.113
> 
> 标签：uiwebview, xamarin.ios

我正在 Monotouch 上构建一个 iPhone 应用程序。我的部分项目使用本地网站内容。我将网站使用的所有 html、js、css 和图像复制到一个文件夹中，并将其导入到我的 monotouch 项目中。我已将所有这些文件的构建选项设置为 Content。

我加载本地网页内容，如下所示：

> this.url = Path.Combine (NSBundle.MainBundle.BundlePath, "Content/index.html"); webView.LoadRequest(new NSUrlRequest(new NSUrl(this.url, false)));

问题是当我运行项目时，它找不到我的本地网站，当我尝试调试时收到以下消息：

> 在此服务器上找不到请求的 URL。
> 
> /Users/ ***** ****** /Library/Application Support/iPhone Simulator/4.3/Applications/092E0D85-92F4-4F4E-9CD2-3FBBCD797F76/Project.app/Content/index.html

有趣的是，当我将链接复制到 safari 时，网页显示没有任何问题

我曾尝试清除和重建项目几次，但没有任何改变。

谁能帮我这个？

我正在使用 OS X Moutain Lion 10.8.2、MonoDevelop 3.0.5、Monotouch 6.0.6、xcode 4.5.2

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:21:26.407

这很奇怪，对我来说效果很好。

试试这个：

```
var fileName = "Content/index.html";
webView.LoadHtmlString (File.ReadAllText (fileName),
                        NSUrl.FromFilename (fileName)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T14:04:50.477

您可以使用 NSURLComponent ，如下所示。参数可以在 NSURLComponent Query 属性中传递。

```
 string viewerPath = Path.Combine(NSBundle.MainBundle.BundlePath, string.Format("Content/pdfjs/web/{0}", _pdfViewerFileName));
        string queryString = string.Format("file={0}", _pdfFilePath);
        NSUrlComponents components = new NSUrlComponents(viewerPath);
        components.Query = queryString;
        Control.LoadRequest(new NSUrlRequest(components.Url)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:29:58.320

谢谢你的帮助。

我刚刚意识到我在链接中放入了参数，例如：index.html?p1=v1&p2=v2，它使链接不起作用。如果我删除这些参数，它的工作没有任何问题。

很抱歉错过了关于我的问题的信息。

现在，如果我不能像普通网站那样做，我如何将参数传递给我的本地网站？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:15:24.240

请务必将 htm 的 Build Action 设置为 BundleResource - 您使用此设置的代码对我有用！

# magento - 浏览器内容

> ID：13726730
> 
> 赞同：2
> 
> 时间：2012-12-05T15:32:34.177
> 
> 标签：magento, browser-detection

Magento 是否可以根据客户使用的浏览器显示内容（在主页上）？

我们得到了一个使用 css3 和 js 的精美主页。在所有浏览器中都可以正常工作（选中），但不能在最后一个浏览器上工作，我们的客户提到，Internet Explorer 8。

不幸的是，我们无法通过加载 ie.css 文件来解决问题。

我们的想法是，检测访问客户的浏览器并向他显示另一个主页或 cms 块。

这可能吗？条件注释还是在 phtml 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:53:26.143

我能为您想象的最优雅的解决方案是在您的包中专门为这些浏览器创建另一个主题。因此，如果默认情况下你有`app/design/frontend/your_package/default`结构，你必须创建类似的东西`app/design/frontend/your_package/special_theme`来继承`default`你的包的主题。然后在 Admin\General\Design 中，您可以添加一个异常，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/a9c2b6d3c3e144b7e8a61b57a1a1c674.png)

唯一的例外是，而不是`iPhone|iPod|Blackberry..`您放置浏览器代理字符串的匹配模式，而不是`iphone`您的`special_theme`姓名。

*截图取自 magebase.com*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:39:31.603

主页 CMS 条目根据其配置命中 1column.phtml、2columns-left.phtml 等。这些文件位于您的主题目录中。您可以完全控制在这些文件中显示的内容，即

```
<?php if( Mage::getSingleton('cms/page')->getIdentifier() == 'home' && preg_match('/(?i)msie 8/',$_SERVER['HTTP_USER_AGENT'])): ?> 
Your content goes here. 
<?php else: ?>
Display normal content
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:17:46.787

可以查看这个url来检测浏览器，条件可以放在需要的.phtml文件中。这个 URL 可以帮助 [我如何使用 PHP 或 JavaScript 检测浏览器？](https://stackoverflow.com/questions/1895727/how-can-i-detect-the-browser-with-php-or-javascript)

# android - Android 上的复杂图形布局

> ID：13726732
> 
> 赞同：0
> 
> 时间：2012-12-05T15:32:41.883
> 
> 标签：android, android-layout

首先，我真的是 Android 的初学者，如果我的问题是一个简单的 RTFM，我深表歉意。

我正在尝试做一个圆形图形布局（`ImageViews`现在围绕一个中心旋转多个，每个都有相同的可绘制对象），我想知道最有效的方法是什么。我已经研究过了，Android 中的文档非常稀少。

现在，我正在使用XML`rotation`中的 ImageViews`translationX`和，但是当您在不同的设备上测试它时，它不能很好地扩展。我*可以*为每个设备制作不同的布局文件，但老实说，这很痛苦。`translationY``FrameLayout`

 **   有没有办法让整个布局自动缩放？我的意思是，如果我为其中的每个元素定义正确的平移、旋转和缩放，整个`FrameLayout`屏幕能否“神奇地”填满？
*   我可以在布局中进行偏心旋转吗？比如说，通过圆的半径平移并围绕圆的中心旋转，*而不是*物体的中心？或者任何其他的转换链，就此而言？
*   如果使用 XML 布局是不可能的，并且如果我必须在代码中这样做（我想避免），那么最好的位置是什么？我会在`onCreate`方法中这样做，但也许有更好的方法？

请注意，我不想创建*动画*，我只想要一个*静态布局*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:03:33.197

您不会喜欢我的回答，但是，如果您正在执行使用默认视图组和小部件无法实现的复杂布局，并且*无法*很好地扩展它们，那么编写自己的视图组并扩展 ImageView 可能是要走的路。

然后，您可以完全控制图像视图的定位方式，同时考虑设备 DPI 和分辨率，以及图像视图本身的行为方式。前期工作量大，后期回报大。

您需要的主要覆盖是 onMeasure() 和 onDraw()，当然还有自定义构造函数中的初始化。

从您的问题看来，您有技能，但如果您需要有关规格的帮助，请回来。尤其是 onMeasure() 可能很难让你明白。

这当然是我的意见和 YMMV。

祝你好运。*

# c# - 运行时显示错误的字体

> ID：13726733
> 
> 赞同：10
> 
> 时间：2012-12-05T15:32:49.513
> 
> 标签：c#, winforms, fonts

我在一些标签（winforms）中使用了 Calibri 字体，当我运行我的程序时，这个标签以不同的字体显示。我在没有 Office 的计算机上测试时遇到过这个问题（因此没有安装 Calibri），但现在我到处都能看到它，即使在我安装了 Calibri 的计算机上也是如此（我在设计器中看到带有 Calibri 的标签；然后当我运行调试模式，我看到另一种字体）。

标签过去显示得很好，我今天才看到这个问题（但可能几天都没有注意到，我不确定，但不会太久，我敢肯定）。

昨天有一些 Windows 更新，其中一些是针对 Office 的，但我不确定它是否相关。底线是我有calibri，calibri显示在设计器中，并且在运行时显示了一些其他字体..我似乎对Segoe UI有同样的问题，但只有在使用SemiBold样式时..

这是结果的图像，左侧是运行时，右侧是 VS 设计器：

![左边是运行时，右边是设计器](../Images/73019a16705e41c502e8f0be1ee2e656.png)

当我尝试使用 Calibri bold 时，这一点更加明显；这次运行时在右侧，设计器视图在左侧：

![左为设计师，右为运行时](../Images/3d65272a45c1a2590cb00fbcad1c6039.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:31:54.790

每当您在 Visual Studio 中创建新的 Windows 窗体应用程序时，模板都会包含以下几行

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(/*new instance of your form*/); 
```

这一行尤其可能会影响应用程序中文本的呈现方式。

```
Application.SetCompatibleTextRenderingDefault(false); 
```

# c# - Linq-to-Sql 自动生成的代码错误：“类型名称 {1} 在类型 {2} 中不存在”

> ID：13726740
> 
> 赞同：1
> 
> 时间：2012-12-05T15:33:14.467
> 
> 标签：c#, visual-studio-2010, linq, sql-server-2008, linq-to-sql

当我尝试`LinqDataClasses`在 Visual Studio 中添加对象时，我遇到了一个特殊的错误。

我有一个 SQL Server 2008 数据库，已将其拉入 VS2010 的服务器资源管理器。当我创建时`LinqDataClasses`，一切都很好，但是每当我添加某些表时，我都会收到数百个错误。

大多数错误属于以下类型：

> *类型名称 {1} 在类型 {2} 中不存在*

例如：

> *“MyApplication”类型中不存在类型名称“Data”*

这些错误发生在`LinqDataClasses`设计器页面（文件的`designer.cs`页面`.dbml`）中。

`global::`我可以通过在每个系统库（例如）前面添加前缀来消除其中的一些错误`global::System.Data.Linq`，但是我以前使用`LinqDataClasses`过并且没有遇到这个问题。

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:53:16.143

您的任何类是否称为“系统”或“数据”或其他可能与系统类型别名的类？也许问题不在于有两个课程，而是您添加了第二个特定课程？！

解决这个 bug 的关键是把生成代码中的编译器错误和你自己的编译器错误一样对待。这导致了更深层次的原因（在您的情况下是重复名称）。

# php - 一定时间后自动更改数据库

> ID：13726742
> 
> 赞同：0
> 
> 时间：2012-12-05T15:33:16.260
> 
> 标签：php, mysql

好的，我想知道如何让我的数据库表在某个时间发生变化。

**例子 ：**

提交表单后1小时后自动更改为Prio 2 3小时后自动更改为Prio 3

这就是我需要的..

这是我用来读取表格的代码：

```
<?php
                                    include("db.php");

                                    $result=mysql_query("SELECT * FROM lijst where archief='0' ORDER BY FIND_IN_SET(prio, '#ffaeae,#fff5ae,#ffffff')");

                                    while($test = mysql_fetch_array($result))
                                    {
                                        $id = $test['ticketID'];
                                        echo"<tr style='background:". $test['prio'].";'>";
                                        echo"<td><font color='black'>".$test['aangemeld']."</font></td>";
                                        echo"<td>".$test['status']."</td>";
                                        echo"<td><font color='black'>" .$test['klant']."</font></td>";
                                        echo"<td><font color='black'>" .$test['naam']."</font></td>";
                                        echo"<td><font color='black'>". $test['achternaam']. "</font></td>";
                                        echo"<td><font color='black'>". $test['telefoon']. "</font></td>";
                                        echo"<td><font color='black'>". $test['onderwerp']. "</font></td>";
                                        echo"<td width='300px'><font color='black'>". $test['probleem']. "</font></td>";
                                        echo"<td><font color='black'>". $test['terugb']. "</font></td>";
                                        echo"<td><font color='black'>". $test['Tijd']. " door : ". $test['wijziging']. "</font></td>";
                                        echo"<td><a href ='view.php?ticketID=$id'><small class='icon pencil'></small><span>Wijzig</span></a><br /><a href ='move.php?ticketID=$id'>Afgehandeld</a></td>";
                                        echo "</tr>";
                                    }
                                    mysql_close($conn);
                                    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:52:10.110

您必须运行计划任务或 cron。您必须尽可能频繁地调用脚本来更新表中的数据。该脚本应检查自创建以来的时间是否大于一到两个...小时。如果是，那么它应该改变prio。假设您使用的是时间戳，代码应该是这样的：

```
if ( time() - (60 * 60) >= $myData['created'] )
  changePrio($myData['id'], 2); 
```

# c# - 在 C# 中为类的特定字段禁用/禁止警告 CS0649

> ID：13726743
> 
> 赞同：53
> 
> 时间：2012-12-05T15:33:20.643
> 
> 标签：c#, suppress-warnings

我在使用反射初始化的 C# 类中有一些字段。编译器为它们显示 CS0649 警告：

> 字段`foo' is never assigned to, and will always have its default value`null' (CS0649) (Assembly-CSharp)

我只想禁用这些特定字段的警告，并且仍然让警告显示给其他类和此类的其他字段。整个项目都可以禁用CS0649，还有更细粒度的吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-05T15:36:04.237

您可以使用[`#pragma warning`](http://msdn.microsoft.com/en-us/library/441722ys%28v=vs.110%29.aspx)禁用然后重新启用特定警告：

```
public class MyClass
{
    #pragma warning disable 0649

    // field declarations for which to disable warning
    private object foo;

    #pragma warning restore 0649

    // rest of class
} 
```

有关扩展答案，请参阅[在 C# 中抑制“从未使用”和“从未分配给”警告。](https://stackoverflow.com/a/3821035/1149773)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-28T18:23:24.737

我相信值得注意的是，警告也可以通过使用内联初始化来抑制。这使您的代码更加混乱。

```
public class MyClass
{
    // field declarations for which to disable warning
    private object foo = null;

    // rest of class
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-05T15:36:14.923

```
//disable warning here
#pragma warning disable 0649

 //foo field declaration

//restore warning to previous state after
#pragma warning restore 0649 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-05T15:39:15.123

```
public class YouClass
{
#pragma warning disable 649
    string foo;
#pragma warning restore 649
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-13T17:45:32.987

如果要**禁用**项目中的所有警告（而不是每个脚本），请执行以下操作：

在 YOUR_PROJECT_NAME/Assets 目录中创建一个名为 mcs.rsp（用于编辑器脚本）的文本文件，其中包含内容（例如）：

-警告：0649

（您可以更改数字以匹配您想要的任何警告）

[原始答案](http://answers.unity.com/answers/1106962/view.html)

注意：如果您使用 Unity，这不会禁用 Unity 控制台中的警告（我仍在研究如何删除这些警告）

这是一些包含更多信息的[Unity 文档](https://docs.unity3d.com/Manual/PlatformDependentCompilation.html)

# ios - iOS UIImageView在加载时不更新图像

> ID：13726746
> 
> 赞同：1
> 
> 时间：2012-12-05T15:33:41.003
> 
> 标签：ios, uiimageview, uiimage

我有一个使用`UINavigationController`. 在一个视图中，我有一系列将 ID 传递给另一个视图的按钮。然后，这个新视图会根据在前一个视图中选择的按钮显示数据库中的相关图像。但是，它第一次很好用，但是如果我单击导航上的“返回”按钮并返回到按钮列表视图并尝试单击另一个按钮，它仍然会显示以前的图像。它似乎是它的缓存或什么？

我希望这是有道理的，非常感谢任何帮助。

根据要求，一些代码与之配套：

产品视图.m

```
//Background Image
               UIImage *itemBgImage = [UIImage imageNamed: [row stringForColumn:@"bg_image_iphone"]];
            UIImageView *itemBgImageView = [[UIImageView alloc] init];
            itemBgImageView.image = itemBgImage;

itemBgImageView.frame = CGRectMake(0.0,0.0, self.view.bounds.size.width,  self.view.bounds.size.height);

[self.view addSubview:itemBgImageView];
[self.view sendSubviewToBack:itemBgImageView];

itemBgImage = nil;
[itemBgImage release];

itemBgImageView = nil;
[itemBgImageView release]; 
```

# unit-testing - 通过一系列 jasmine 测试运行子类

> ID：13726747
> 
> 赞同：0
> 
> 时间：2012-12-05T15:33:41.993
> 
> 标签：unit-testing, coffeescript, angularjs, jasmine

所以我正在构建一个有角度的项目......而且我有一个名为“条目”的类，其中包含“twitter 条目”、“Facebook 条目”等子类。

理想情况下，我想编写一个规范，并通过规范运行所有子类。我还没想好怎么做。

关于如何对茉莉花规格进行功能化的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:42:06.630

我会编写一个运行 Jasmine 期望的标准 JS 函数，并通过单独的规范传递每个子类。就像是：

```
describe("my multi-class spec suite", function(){
    //common specs for each child class
    var myExpectations = function(childClass) {
        expect(childClass).toBeDefined();
        expect(childClass.inheritedMethod()).toEqual("some common value");
        ...
    };

    //pass in your children classes
    it('should have twitter entries that behave', function(){
        myExpectations(new TwitterEntry());
    });

    it('should have facebook entries that behave', function(){
        myExpectations(new FacebookEntry());
    });
}); 
```

# php - jQuery 模板与 PHP 回显

> ID：13726748
> 
> 赞同：0
> 
> 时间：2012-12-05T15:33:42.797
> 
> 标签：php, jquery, ajax, jquery-templates

我正在编写一个搜索引擎，并试图找出显示结果的最佳方式（每页 5 个）。

我是动态 Web 开发的新手，所以请耐心等待。目前，处理是在 PHP 中的服务器端完成的，并且使用大量 HTML 代码将结果回显为正确的格式。虽然这工作得很好，但如果我决定更改 HTML，它并不是最容易维护的，而且坦率地说，它看起来很乱。像这样，但更多地涉及到 HTML：

```
while($rows)       
   echo "<div class='someClass'>".$rows['name']."[...]</div>" 
```

除了清理之外，如果有的话，切换到使用来自 AJAX 调用的数据的 jQuery 模板有什么好处？最好将内容保存在 PHP 中以对用户隐藏所有处理（并且不公开对 .php 文件的任何调用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:36:31.133

您可以使用 php `<<<EOF`( [heredoc](http://php.net/manual/en/language.types.string.php) )：

```
<?php

    $test = "something";

    $str = <<<EOF
    <p>Hello</p>
    <p>$test</p>
EOF;
    echo $str;
?> 
```

这将允许您在 PHP 中拥有一大块易于阅读的 HTML。我不会将 AJAX 调用与 JQuery 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:36:51.973

安全方面，如果您公开您的 ajax 调用，它不会产生太大的影响。性能方面，这完全取决于客户端（最终用户）是否呈现模板，这将是使用 jQuery 或服务器呈现模板的情况。这意味着最初用户在页面完全加载之前不会看到您的任何实际内容，并且您的 jQuery 有机会触发 ajax 请求并接收响应。而使用 PHP 执行此操作会随页面一起呈现，并在页面加载之前在技术上显示。

也就是说，我个人已经使用了这两种选择。

# google-apps-script - 通过 GAS 将用户添加到 Google 群组

> ID：13726749
> 
> 赞同：0
> 
> 时间：2012-12-05T15:33:43.140
> 
> 标签：google-apps-script

我玩过在 Google Apps 脚本的默认服务中实现的组类。但是，当一个用户是该组的经理时，无法将新用户添加到该组。另一方面，Google Apps Provisioning API 允许这样做。有没有办法从 GAS 连接该 API？关于如何做到这一点的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:20:20.767

要将用户添加到组中，您可以使用[域组](https://developers.google.com/apps-script/class_domaingroup)服务。这是文档中的一个示例：

```
var group = GroupsManager.getGroup("testgroup").addMember("nick@example.com"); 
```

**2016 年 8 月 18 日更新：** Google[于 2015 年 5 月 15 日宣布弃用 DomainService（包括 GroupsManager）](http://googleappsdeveloper.blogspot.com.au/2014/05/deprecating-scriptdb-and-domain-service.html)。您现在可以改用[Admin SDK Directory Service](https://developers.google.com/apps-script/advanced/admin-sdk-directory)。

此示例将用户添加到域中的现有组。它是直接从文档中复制的。

```
function addGroupMember() {
  var userEmail = 'liz@example.com';
  var groupEmail = 'bookclub@example.com';
  var member = {
    email: userEmail,
    role: 'MEMBER'
  };
  member = AdminDirectory.Members.insert(member, groupEmail);
  Logger.log('User %s added as a member of group %s.', userEmail, groupEmail);
} 
```

# rest - RESTful API - 控制对 API 的访问（没有登录页面）

> ID：13726750
> 
> 赞同：3
> 
> 时间：2012-12-05T15:33:47.170
> 
> 标签：rest, oauth, spring-security, jersey, reverse-engineering

我有一个通过 HTTPS 通信的 RESTful 网络服务。我想阻止其他开发人员调用 API。API 位于从多个来源提取数据的数据库前面，因此我想控制谁使用它。使用登录页面不是一种选择

我看过 Spring-security 和 OAuth，但它们都没有提供我需要的东西。我不想在 Web 服务前面放置登录页面，而只想在未知应用程序尝试调用我的服务时返回 400 或 401 http 代码。

谁能推荐我如何实现这个？

**结果**感谢您对此问题的反馈。最后，我使用了一个名为 mod_authz_host 的 Apache 模块，它允许您将 HTTP 模式限制到特定域。虽然可以欺骗域，但这是针对内部应用程序的，因此安全要求更加宽松。我在下面包含了一个片段，其中详细介绍了如何使用 Apache 模块

在虚拟主机中包含以下内容

```
<Location /yourProtectedServices/ws>
 Order deny,allow
 Deny from all
 Allow from trusteddomain.com
</Location> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:46:13.203

在您的内部系统中，您可以创建一个可以使用访问令牌访问的应用程序列表。只有拥有这些授权访问令牌的开发人员/客户端应用程序才能访问。问题在于，其他人是否可以查看客户端应用程序源代码。

例如，如果有人在代码中使用访问令牌创建了一个 Android 应用程序，那么当它在应用商店中分发时可能会被逆向工程。

更新：更深入地了解安全性。 [http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:56:33.683

举这个基本的例子：

服务器：

```
@Path("/your-path")
@RequestScoped
public class JSONService {

    private final static String  AUTH_TOKEN = "rxxkksdfnnchshs";        

    @GET
    @Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)
    public Response fetchData(@QueryParam("auth_token") String auth_token) {

        if(AUTH_TOKEN.equals(auth_token)){

            final String results = "result: the object what you want";               

            return Response.status(Response.Status.OK).entity(results).build();  
        }
        else{

            return Response.status(Response.Status.UNAUTHORIZED).build();   
        }
    }
} 
```

客户：

```
@ManagedBean(name="your-bean-name")
@RequestScoped
public class ResteasyClient {
    private static final String BASE_URI    = "http://localhost:8080/your-context/your-rest-path";       
    private final static String  AUTH_TOKEN = "rxxkksdfnnchshs";
    ClientRequest webResource;
    ClientResponse response; 
    private String data;  

    public DBOResteasyClient() {           

        final String Path = "/your-path";
        webResource = new ClientRequest(BASE_URI+Path);            

    }

   @Produces
   @Named
    public String getData(){
        return this.data;
    }

    @PostConstruct
    public void fetchData() {

        try{
            ClientRequest resource = webResource;      
            response = resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).queryParameter("auth_token",AUTH_TOKEN).get(ClientResponse.class); 
        }catch(Exception e ){
            //
        }

        if(response.getStatus() == 200 ){
            data = (String) response.getEntity(String.class);               
        }
    }  
} 
```

此示例在服务器中使用 @QueryParam("auth_token") String auth_token 获取名为 auth_token 和 resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).queryParameter("auth_token",AUTH_TOKEN) 的 http 请求参数添加一个名为auth_token的参数，关键是：服务器使用该参数并将其与自己的值“（AUTH_TOKEN.equals（auth_token）”进行比较，并用http代码响应rest是如何构建的，http 200 if acept access “（Response.Status .OK)" http 401 如果不是 "(Response.Status.UNAUTHORIZED)"

# windows-phone-7 - Windows 应用商店帐户和 Windows Phone 应用商店帐户

> ID：13726761
> 
> 赞同：0
> 
> 时间：2012-12-05T15:34:18.980
> 
> 标签：windows-phone-7, windows-store-apps

一周前，我购买了开发帐户来部署我的 Windows Phone 应用程序。但是在我的手机上进行测试时，我发现设备未注册。当我查看我的账单信息时，它显示 **项目开发人员服务 -** 已购买的 Windows 应用商店开发人员帐户年度注册..

这不是我应该购买的正确帐户吗？Windows 手机帐户与 Windows 商店帐户不同？我现在该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:58:36.010

Windows Store 帐户用于 Windows 8 (Tablet/PC) 应用程序开发。这与 Windows Phone 帐户不同。

查看[Windows 应用商店](http://msdn.microsoft.com/en-US/windows/apps/)和[Windows Phone 应用商店](http://dev.windowsphone.com/)了解更多详情

# bash - Bash 中的 While 循环子外壳困境

> ID：13726764
> 
> 赞同：30
> 
> 时间：2012-12-05T15:34:29.777
> 
> 标签：bash, shell

我想计算给定目录中的所有 *bin 文件。最初我使用的是`for-loop`：

```
var=0
for i in *ls *bin
do
   perform computations on $i ....
   var+=1
done
echo $var 
```

但是，在某些目录中，文件过多会导致错误：`Argument list too long`

因此，我正在尝试使用管道`while-loop`：

```
var=0
ls *.bin | while read i;
do
  perform computations on $i
  var+=1
done
echo $var 
```

现在的问题是使用管道创建了子壳。因此，`echo $var`返回`0`。
我该如何处理这个问题？
原代码：

```
#!/bin/bash

function entropyImpl {
    if [[ -n "$1" ]]
    then
        if [[ -e "$1" ]]
        then
            echo "scale = 4; $(gzip -c ${1} | wc -c) / $(cat ${1} | wc -c)" | bc
        else
            echo "file ($1) not found"
        fi
    else
        datafile="$(mktemp entropy.XXXXX)"
        cat - > "$datafile"
        entropy "$datafile"
        rm "$datafile"
    fi

    return 1
}
declare acc_entropy=0
declare count=0

ls *.bin | while read i ;
do  
    echo "Computing $i"  | tee -a entropy.txt
    curr_entropy=`entropyImpl $i`
    curr_entropy=`echo $curr_entropy | bc`  
    echo -e "\tEntropy: $curr_entropy"  | tee -a entropy.txt
    acc_entropy=`echo $acc_entropy + $curr_entropy | bc`
    let count+=1
done

echo "Out of function: $count | $acc_entropy"
acc_entropy=`echo "scale=4; $acc_entropy / $count" | bc`

echo -e "===================================================\n" | tee -a entropy.txt
echo -e "Accumulated Entropy:\t$acc_entropy ($count files processed)\n" | tee -a entropy.txt 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-05T15:51:21.880

问题是while循环是在子shell中执行的。在while循环终止后，子shell的副本`var`被丢弃，而`var`父（其值不变）的原始副本被回显。

解决此问题的一种方法是使用[流程替换](http://tldp.org/LDP/abs/html/process-sub.html)，如下所示：

```
var=0
while read i;
do
  # perform computations on $i
  ((var++))
done < <(find . -type f -name "*.bin" -maxdepth 1) 
```

查看[BashFAQ/024](http://mywiki.wooledge.org/BashFAQ/024)以了解其他解决方法。

请注意，我也已替换`ls`为，因为[parse](http://mywiki.wooledge.org/ParsingLs)`find`不是一个好习惯。[`ls`](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-09-18T15:45:29.837

符合 POSIX 的解决方案是使用管道（p 文件）。这个解决方案非常好，可移植，而且是 POSIX，但是在硬盘上写了一些东西。

```
mkfifo mypipe
find . -type f -name "*.bin" -maxdepth 1 > mypipe &
while read line
do
    # action
done < mypipe
rm mypipe 
```

您的管道是硬盘上的一个文件。如果您想避免拥有无用的文件，请不要忘记将其删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-21T18:25:26.820

因此，研究通用问题，将变量从子壳 while 循环传递给父级。我发现的一种解决方案是使用here-string。因为那是 bash-ish，而且我更喜欢 POSIX 解决方案，所以我发现 here-string 实际上只是 here-document 的快捷方式。有了这些知识，我想出了以下方法，避免使用子外壳；从而允许在循环中设置变量。

```
#!/bin/sh

set -eu

passwd="username,password,uid,gid
root,admin,0,0
john,appleseed,1,1
jane,doe,2,2"

main()
{
    while IFS="," read -r _user _pass _uid _gid; do
        if [ "${_user}" = "${1:-}" ]; then
            password="${_pass}"
        fi
    done <<-EOT
        ${passwd}
    EOT

    if [ -z "${password:-}" ]; then
        echo "No password found."
        exit 1
    fi

    echo "The password is '${password}'."
}

main "${@}"

exit 0 
```

所有复制粘贴的一个重要注意事项是，here-document 是使用连字符设置的，表示要忽略选项卡。这是为了保持布局有点好。重要的是要注意，因为 stackoverflow 不会在“代码”中呈现选项卡，而是用空格替换它们。Grmbl。所以，不要破坏我的代码，只是因为你们喜欢空格而不是制表符，在这种情况下无关紧要！

This probably breaks on different editor(settings) and what not. So the alternative would be to have it as:

```
 done <<-EOT
${passwd}
EOT 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-05-12T09:21:04.343

这也可以通过 for 循环来完成：

```
var=0;
for file in `find . -type f -name "*.bin" -maxdepth 1`; do 
    # perform computations on "$i"
    ((var++))
done 
echo $var 
```

# php - mysql 日期时间列操作

> ID：13726765
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:34:32.767
> 
> 标签：php, mysql, codeigniter, datetime

我正在为我的网站使用 phpmyadmin 3.5.2、codeigniter 2.1，

当我尝试加载在确切日期添加的帖子时，或者当我只想显示该帖子的日期/时间时，我的问题就出现了。

**表结构**

```
CREATE TABLE IF NOT EXISTS `posts` (
  `post_id` int(11) NOT NULL AUTO_INCREMENT,
  `patient_id` int(11) NOT NULL,
  `worker_id` int(11) NOT NULL,
  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `stats` varchar(20) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`post_id`),
  KEY `worker_id` (`worker_id`,`patient_id`),
  KEY `patient_id` (`patient_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=2 ; 
```

* * *

我的问题是操纵这个“时间”列，因为我需要显示例如

1) 显示今天帖子的表格（使用

```
Select * from posts where date(`time`) = date(NOW()) 
```

2）表格显示今天的帖子，但时间列仅返回（时间），这就是我的主要问题，好像我这样做了

```
select time from posts 
```

返回日期和时间，我只想从该列返回时间，但仍然可以使用

```
where date('time') =date(now()) condition !. 
```

那么有没有更好的方法来做到这一点？即使我可以在 php 中做到这一点，我仍然可以！

或者如果我将时间和日期分成 2 个不同的列会更好吗？

--------问题的第二部分是针对codeigniter的----------

模型

```
$this->db->select('patients.name,workers.dr_name,time(posts.time),posts.stats');
$this->db->from('posts');
$this->db->join('workers','posts.worker_id=workers.worker_id','left');
$this->db->join('patients','posts.patient_id=patients.patient_id','left');
$this->db->where('date(`time`) = date(NOW())');
return $this->db->get(); 
```

控制器

```
$this->load->model('Posts_model');
$q=$this->Visits_model->allvisits;
$this->load->library('table');
$this->load->view('welcome_message');
$qq=$q->result_array();
$qq=array('patient','Doctor','Time','Stats');   
$this->table->set_heading($qq);
$this->table->set_caption('Todays Posts');
echo $this->table->generate($q); 
```

* * *

如何删除模型中的最后一个条件（日期=现在）并使用 php 对此进行排序？我必须循环结果吗？或者有更清洁的方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:37:19.957

就像 MySQL 的[`DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_time)函数只返回`DATE`a 的一部分一样`TIMESTAMP`，它的[`TIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_time)函数也只返回`TIME`一部分：

```
SELECT TIME(time) FROM posts WHERE DATE(time) = CURRENT_DATE 
```

# android - jobject 到 jstring 或 char* 的转换

> ID：13726768
> 
> 赞同：1
> 
> 时间：2012-12-05T15:34:42.210
> 
> 标签：android, c++, android-ndk, java-native-interface

```
JNIEXPORT void JNICALL Java_com_ex_android_rt_addFriends(JNIEnv* env, jobject obj,
    jint size, jobjectArray nodes)
 {

jint count = (*env).GetArrayLength(nodes);
  for (int i=0; i < count; i++) { 
```

**// 这里我从 jobjectArray 获取对象**

```
jobject element = (*env).GetObjectArrayElement(nodes, i); 

  if((*env).ExceptionOccurred()) {
     break;
  }
//  jstring mStr = ?;
  const char *nativeString = (*env).GetStringUTFChars(mStr, NULL);

 // use your string

  CCLog(" - value - %s -  ", nativeString);

 (*env).ReleaseStringUTFChars(mStr, nativeString);

  (*env).DeleteLocalRef(element);
} 
```

我得到了 jobject，如何将其转换为 jstring？我努力了：

```
jstring string = (jstring) (*env).GetObjectArrayElement(nodes, 0); 
```

没有成功。

**编辑**

我试过了：

```
jstring mStr = (*env).GetStringUTFChars(element, 0); 
```

我得到

> 无法在初始化中将 'const char*' 转换为 '_jstring*'

# firefox - Firefox 不会缓存 PDF 文档

> ID：13726771
> 
> 赞同：1
> 
> 时间：2012-12-05T15:34:50.020
> 
> 标签：firefox, pdf, browser-cache, cache-control, content-disposition

我正在使用 Perl 在我的网站上提供动态创建的 GIF 和 PDF。例如：

```
<img src="file.pl?f=image.gif" />
<a href="file.pl?f=doc.pdf">Document</a> 
```

内容将在访问者的浏览器中缓存一段预定的时间，并在下载前提示访问者打开或保存 PDF。

为此，我发出以下 HTTP 响应标头。

对于 GIF：

```
HTTP/1.1 200 OK
Status: 200 OK
Content-Type: image/gif
Etag: "MD5 hash"
Expires: Wed, 05 Dec 2012 14:30:00 GMT
Last-Modified: Wed, 05 Dec 2012 14:00:00 GMT
Cache-Control: public, max-age=1800 
```

对于 PDF：

```
HTTP/1.1 200 OK
Status: 200 OK
Content-Type: application/octet-stream
Content-Disposition: attachment; filename="doc.pdf"
Etag: "MD5 hash"
Expires: Wed, 05 Dec 2012 14:30:00 GMT
Last-Modified: Wed, 05 Dec 2012 14:00:00 GMT
Cache-Control: public, max-age=1800
Content-Description: file transfer
Content-Transfer-Encoding: binary 
```

如果我`about:cache?device=disk`在 Firefox 中导航到，内容会正确缓存在**3.6.28**及更早版本（Windows 操作系统）中。但是，只有 GIF 被缓存在 Firefox **4+**中。

我尝试在安全模式下启动 Firefox 以查看是否是插件导致问题，但 PDF 仍未缓存。我也尝试将内容类型更改为`application/pdf`，但也没有运气。

有什么建议么？

谢谢。

# dynamics-crm-2011 - 在线和本地的通用解决方案？

> ID：13726775
> 
> 赞同：2
> 
> 时间：2012-12-05T15:35:09.450
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

我为 CRM 2011 开发了一个通用解决方案，其中包含插件、javascript 和实体等......但我面临的问题是，在将此解决方案导入任何在线实例时，我收到一个错误“插件必须是沙盒注册”。我想将此解决方案用于本地和在线。我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:45:16.297

在 Dynamics CRM Online 中 - 插件必须在沙盒模式下注册。如果您希望它在在线和本地环境中工作，您需要从一开始就这样设计它。

[插件隔离、信任和统计](http://msdn.microsoft.com/en-us/library/gg334752.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T16:14:33.980

假设您的代码没有违反沙盒（隔离）模式（即访问注册表、文件系统、线程、第三方程序集等）对其施加的任何限制，那么您的解决方案可能就像更改隔离一样简单在重新导出解决方案并尝试再次在线导入之前，将插件模式设置为“沙盒”。

先试试那个。如果它失败并且您不明白为什么，请在此处发布一些代码:)

# c# - 如何递归使用 XmlWriter？

> ID：13726778
> 
> 赞同：0
> 
> 时间：2012-12-05T15:35:20.430
> 
> 标签：c#, .net

我的代码在使用 XmlWriter 时崩溃，说它被另一个进程使用。

```
 private void generateXml(Control receivedControl)
    {
        foreach (Control subCtrl in receivedControl.Controls)
        {
            using (XmlWriter writer = XmlWriter.Create("C:\\ui.xml"))
            {
                writer.WriteStartElement(subCtrl.Name);
                generateXml(subCtrl);
                writer.WriteEndElement();
            }
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        foreach (Control c in this.Controls)
        {
            generateXml(c);
        }
    } 
```

这是我调试的错误：

> 附加信息：该进程无法访问文件“C:\ui.xml”，因为它正被另一个进程使用。

编辑：多亏了你，我设法让递归工作，但它只写了 xml 文件中的最后一个对象，有人知道为什么吗？这是更新的代码：

```
 private void generateXml(XmlWriter receivedWriter, Control receivedControl)
    {
        receivedWriter.WriteStartElement(receivedControl.Name);
        foreach (Control subCtrl in receivedControl.Controls)
        {
            generateXml(receivedWriter, subCtrl);
        }
        receivedWriter.WriteEndElement();
    }
    private void button2_Click(object sender, EventArgs e)
    {
        foreach (Control c in this.Controls)
        {
            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;

            using(XmlWriter writer = XmlWriter.Create("c:\\ui.xml", settings))
            {
                writer.WriteStartDocument();
                writer.WriteStartElement("Form");
                generateXml(writer, c);
                writer.WriteEndElement();
                writer.WriteEndDocument();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:38:36.437

XmlWriter 访问的文件将被锁定，因此后续尝试读取它会导致错误。

您可以更改函数以将编写器作为参数传递，从而拥有一份副本并希望避免该问题。

```
private void generateXml(XmlWriter writer, Control receivedControl)
{
    foreach (Control subCtrl in receivedControl.Controls)
    {
            writer.WriteStartElement(subCtrl.Name);
            generateXml(writer, subCtrl);
            writer.WriteEndElement();
    }
}

private void button2_Click(object sender, EventArgs e)
{
    using (XmlWriter writer = XmlWriter.Create("C:\\ui.xml"))
    {
        writer.WriteStartDocument();
        writer.WriteStartElement(this.Name); // This is the document element
        foreach (Control c in this.Controls)
        {
            generateXml(writer, c);
        }
        writer.WriteEndDocument(); // Close any open tags
    }
} 
```

以上是一个样本 - 未经测试。

编辑：更新以包括根元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:38:26.623

那是因为您`XmlWriter writer`一次打开了多个实例。

您应该做的是将您的`using`语句放在递归函数之外，然后将您`XmlWriter`的

```
using (XmlWriter writer = XmlWriter.Create("C:\\ui.xml"))
{
    generateXml(c, writer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:47:18.913

您还可以使用共享写访问权限的文件

```
 using (var f = new FileStream("C:\\ui.xml",      FileMode.Append,FileAccess.Write,FileShare.Write))
            {
                using (XmlWriter writer = XmlWriter.Create(f))                 
                {
                    writer.WriteStartElement(subCtrl.Name);
                    generateXml(subCtrl);
                    writer.WriteEndElement();
                }
            } 
```

# eclipse - “Maven->更新项目配置”菜单项在哪里？

> ID：13726781
> 
> 赞同：7
> 
> 时间：2012-12-05T15:35:33.100
> 
> 标签：eclipse, maven-2, m2eclipse, m2e

我在 Eclipse 项目中有一个 Missing Maven 依赖项，与[这个问题](https://stackoverflow.com/q/4262186/1864054)中描述的完全一样，我很想使用[找到的解决方案](https://stackoverflow.com/a/4264774/1864054)，但是当我在 Project Explorer 中右键单击我的项目时，我找不到任何这样的菜单项：

![在此处输入图像描述](../Images/8386b3f7d16a9b0fd4705d443e430caf.png)

如果我右键单击项目的`pom.xml`，我在 Maven 的菜单中看到的只是：

![在此处输入图像描述](../Images/b4ce0e0a84fb52a42f18ffc162a35063.png)

知道我应该做什么来启用该`Update project configuration`菜单选项吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-05T15:44:06.617

右键单击项目：>配置>转换为Maven项目

然后你可以更新项目配置

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T15:43:29.843

在 Eclipse 中尝试“团队”-“提交”，然后在 shell 中：

```
mvn dependecy:resolve 
```

# linq - 使用 LINQ 执行 IN 语句

> ID：13726782
> 
> 赞同：0
> 
> 时间：2012-12-05T15:35:35.857
> 
> 标签：linq, entity-framework

> **可能重复：**
> [在 linq 查询中使用字典](https://stackoverflow.com/questions/13513767/use-dictionary-inside-linq-query)

如何`IN`使用 LINQ 发表声明？

**是）我有的**

```
 var t = from i in emails
            where i.Credencials_Id == agenciaid
            select new
            {
                i.Alias,
                i.Name,
                i.Description,
                i.Comentas,
                i.DateHour,
                i.Imovel_Id,
                i.Email,
                i.EmailCaptador
            }; 
```

**我想要什么（像这样）**

```
 var t = from i in emails
            where i.Credencials_Id IN (agenciaid)
            select new
            {
                i.Alias,
                i.Name,
                i.Description,
                i.Comentas,
                i.DateHour,
                i.Imovel_Id,
                i.Email,
                i.EmailCaptador
            };

int imovel = Convert.ToInt32(t.First().Imovel_Id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:38:07.870

当您使用 LINQ to Objects 时，您可以使用：

```
from i in emails
where agenciaid.Contains(i.Credencials_Id)
select new
{
    i.Alias,
    i.Name,
    i.Description,
    i.Comentas,
    i.DateHour,
    i.Imovel_Id,
    i.Email,
    i.EmailCaptador
}; 
```

# windows-8 - Windows 8 中所需手势的性质是什么？

> ID：13726785
> 
> 赞同：1
> 
> 时间：2012-12-05T15:35:39.933
> 
> 标签：windows-8, hid

笔记本电脑上的大多数触摸板不处理多点触控，因此无法向操作系统发送滑动手势。

是否可以从已经可以模拟键盘和鼠标的外部设备（例如 Teensy 或最近的 Arduino）向 Windows 发送一些手势。我可以发送按钮 4 和 5（鼠标滚轮向上和向下），但我想发送一个真正的滑动手势（例如使用弹性传感器......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:38:36.663

您可以使用 arduino 和类似方法的一种方法是使用 Microsoft .NET Microframework，它是一个开源代码，可从以下网址免费获得：[Micro Framework](http://www.netmf.com/)

您可能想要使用其他可用于 Artuino 的框架。因此，如果您对如何利用传感器硬件有很好的了解，那么输出必须满足特定的规范。

为了能够连接到读取手势的硬件，您需要了解驱动程序是如何创建的，因此请查看：[驱动程序信息](http://msdn.microsoft.com/en-us/library/windows/hardware/gg581061.aspx)。

要找到那种类型的信息，您需要查看上面的链接，这是针对传感器的，这似乎不是您正在寻找的，您正在寻找使用“手势”，但首先您必须能够要连接到您的设备，本指南可能会有所帮助。我出于其他原因对其进行了审查。

有很多东西需要挖掘，但首先，imo 是了解如何让您的软件与 Windows 8 通信。如果您有任何其他问题，请告诉我。我不是最好的人，您可能想参考上面显示的 Micro Framework 链接上的社区。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:51:48.217

这是完全可能的。您的有效建议是您想要创建自己的输入外围设备，例如触控板并使用它来发送输入。只要 Windows 将此设备识别为输入源，它就会工作。

# android - 单击 TableRow 时将焦点设置为子 EditText

> ID：13726786
> 
> 赞同：1
> 
> 时间：2012-12-05T15:35:49.307
> 
> 标签：android, android-layout, android-tablelayout

我有以下布局：

```
<TableLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*">

    <TableRow
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:descendantFocusability="beforeDescendants">

        <TextView
            android:text="Login:"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <EditText
            android:id="@+id/password"
            android:background="@null"
            android:duplicateParentState="true"
            android:inputType="text"
            android:maxLines="1"
            android:singleLine="true"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>           
    </TableRow>
</TableLayout> 
```

我`EditText`占据屏幕宽度的一半，我希望它在`TableRow`点击时获得焦点。我该如何设置呢？有没有可能没有任何额外的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:11:16.947

我最终实现了一个监听器。我稍微改变了布局：

```
<TableRow
    android:onClick="focusChildEditText">
    ...

    <EditText
        ...
        android:tag="focusable"/>  

</TableRow> 
```

并使用了以下监听器：

```
public void focusChildEditText(View view) {
    try {
        EditText editText=((EditText) ((ViewGroup) view).findViewWithTag("focusable"));
        if (editText!=null) 
            editText.requestFocus();
    } catch (ClassCastException e) {}
} 
```

一切都按我的需要工作。

# reporting - 在开发环境中使用 Yammer Metrics 的最简单的报告工具是什么

> ID：13726787
> 
> 赞同：7
> 
> 时间：2012-12-05T15:35:50.287
> 
> 标签：reporting, metrics, yammer

我们开始在我们的应用程序中集成 yammer 指标。我想可视化这些指标。

Yammer-metrics 具有收集过程，可以将指标发送到 Ganglia 或 Graphite。但是在我的电脑上安装有点大。

您是否知道一些简单的报告工具，例如用于此用途的 ram 存储？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T22:02:15.017

有一个 javascript 库可以绘制 MetricsServlet 的输出：[https ://github.com/benbertola/metrics-watcher](https://github.com/benbertola/metrics-watcher)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:24:04.760

我正在查看 Metrics 项目（我假设是这样的：http: [//metrics.codahale.com/](http://metrics.codahale.com/)），发现它能够将指标导出到 CSV 文件，该文件可与许多报告工具一起使用，包括这个：[DBxtra](http://www.dbxtra.com/)，我推荐这个的原因是因为它非常特别，您可以在不到 10 分钟的时间内设计和查看报告，主要是通过拖放操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-18T21:12:46.197

如果您只想在控制台上定期报告，您可以使用：

```
com.yammer.metrics.reporting.ConsoleReporter.enable(5, TimeUnit.MINUTES) 
```

# c# - 如何限制 Sitecore 发布对话框中显示的语言？

> ID：13726790
> 
> 赞同：5
> 
> 时间：2012-12-05T15:35:52.933
> 
> 标签：c#, sitecore, publishing

为了简化我们的内容编辑者的体验，我想确保发布对话窗口中显示的语言仅限于编辑者具有语言写入权限的语言。我们已经为我们的各种编辑角色适当地设置了语言写入，但是系统>语言的整个选择仍然显示在发布对话框中（下面的屏幕截图——发布语言部分是我希望基于 lang write 简化的部分烫发）。我曾尝试拒绝使用非必要语言的 Language Read 来查看是否这样做，但事实并非如此。有没有办法做到这一点？

![在此处输入图像描述](../Images/ea414cb658c27945cee2872f79193aaa.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:14:33.710

发布对话框中是否显示语言不取决于`Language Read`访问权限。只是`Read`权利决定了这一点。

![在此处输入图像描述](../Images/8f09199a9dc7d4039de708f11da47b08.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:33:20.157

Have you broken inheritance on the languages? By default the everyone group has read access to the languages, so you need to specifically break inheritance for all other languages when selecting a English (Canada) role for example.

![Language Permissions](../Images/c2e72690a1d99cd48e9c5bd47661505a.png)

I've just tried this and removing Language Read on a particular role removes the language from the publish language list. Use the *Access Viewer (>Security Tools)* to make sure that *Language Read* is not inherited from another role.

Look at the method which builds the Publish dialog in dotPeek, this is the codebeside for *sitecore/shell/Applications/Dialogs/Publish/Publish.xml*

BuildLanguages() method in *Sitecore.Shell.Applications.Dialogs.Publish.PublishForm* class in Sitecore.Client.dll

Also, make sure that [CheckSecurityOnLanguages](http://sdn.sitecore.net/doc/api%205.0/Sitecore.Configuration.Settings.CheckSecurityOnLanguages.html) in Sitecore config is set to true.

Be aware, if you are running multi-site and have different permissions on different branches, make sure that you have **Publishing.CheckSecurity** and **Publishing.RequireTargetDeleteRightWhenCheckingSecurity** otherwise users will be able to cross publish items, which is not what you want.

[http://sitecorebasics.wordpress.com/2011/04/12/publishing-security-basics/](http://sitecorebasics.wordpress.com/2011/04/12/publishing-security-basics/)

[EDIT] @Ruud, you shouldn't specifically deny Role access to an item, instead you should break inheritance, that way if you compound roles (i.e. a user belongs to multiple Roles) the user will still have access to that item. If you deny access, no other permission will be able to override it.

[Sitecore Worst Practices Blog Series: Security](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/Sitecore-Worst-Practices-Blog-Series-Security.aspx)

> To prevent denial from overriding allowance, avoid denying access rights in favor of breaking inheritance and granting access rights.

Sorry, don't have enough rep to comment directly on your post.

# internet-explorer - XML/XSLT 条件注释 IE 样式表

> ID：13726792
> 
> 赞同：1
> 
> 时间：2012-12-05T15:35:59.247
> 
> 标签：internet-explorer, xslt, cross-browser, conditional-comments, symphony-cms

我有一个我似乎无法弄清楚的问题。我不久前用 HTML 建立了一个网站，最近集成了 Symphony CMS，不得不将所有内容都更改为 XML。

最初在我的脑海中，我有一个特定于 Internet Explorer 的样式表，头部看起来像这样：

```
<head>
       <link rel="stylesheet" href="../css/master.css" type="text/css" media="screen"></link>
       <!--[if IE]>
             <link rel="stylesheet" type="text/css" href="../css/ie.css"></link>
             <script src="../js/html5shiv.js"></script>
       <![endif]-->
</head> 
```

自从切换后，这个条件注释不再起作用，我把它改成了这个，但不幸的是，我的 master.css 被 Chrome/Firefox 等忽略了……它只是为所有浏览器加载 ie.css 样式表。

```
<head>
    <link rel="stylesheet" href="../css/master.css" type="text/css" media="screen"></link>                
    <xsl:comment>[if IE]<![CDATA[><!]]></xsl:comment>
          <link rel="stylesheet" type="text/css" href="../css/ie.css"></link>
          <script src="../js/html5shiv.js"></script>
    <xsl:comment><![CDATA[<!]]>[endif]</xsl:comment>    
</head> 
```

抱歉，我对此很陌生，我只是不确定我做错了什么，我猜我可能需要某种 xsl:if 评论，但只是不确定如何去做。我只需要一些能让 chrome/firefox/opera/safari 忽略 ie.css 样式表的东西。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:49:28.510

只需使用一个`xsl:comment`并将所有内容包装在`<![CDATA[]]>`...

```
 <head>
        <link rel="stylesheet" href="../css/master.css" type="text/css" media="screen"></link>
        <xsl:comment><![CDATA[[if IE 6]>
         <link rel="stylesheet" type="text/css" href="../css/ie.css"></link>
         <script src="../js/html5shiv.js"></script>
   <![endif]]]></xsl:comment>
    </head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T13:35:30.860

使用模板允许以编程方式定义条件注释：

```
<xsl:template name="conditionalComment">
    <xsl:param name="qualifier" select="'IE'"/>
    <xsl:param name="contentRTF" select="''" />

    <!--Use entity variables to allow invalid XML output from an XSLT processor-->
    <xsl:comment>[if <xsl:value-of select="$qualifier"/>]<![CDATA[>]]>
    <!--Use copy-of rather than value-of to preserve tag delimiters-->
        <xsl:copy-of select="$contentRTF" />
    <!--Use CDATA to output raw characters-->
        <![CDATA[<![endif]]]></xsl:comment>

</xsl:template> 
```

该模板有两个参数：

```
<xsl:call-template name="conditionalComment">
    <!--Conditional check parameter-->
    <xsl:with-param name="qualifier" select="'lte IE 6'"/>
    <!--Stylesheet parameter-->
    <xsl:with-param name="contentRTF">
        &lt;link rel="stylesheet" type="text/css" href="ie-win-fixup.css" /&gt;
    </xsl:with-param>
</xsl:call-template> 
```

**参考**

*   [XSLT 1.0 中的 IE 条件注释](http://www.nickfitz.co.uk/2005/10/27/ie-conditional-comments-in-xslt-10/)

*   [XSL 文档的仅 IE7 样式表](https://stackoverflow.com/questions/11802830/1113772)

*   [XSLT 实用程序：XSL​​T 中的 IE 条件注释](http://www.getsymphony.com/download/xslt-utilities/view/21798/)

# windows - 如何判断任务栏是否使用小图标

> ID：13726797
> 
> 赞同：4
> 
> 时间：2012-12-05T15:36:07.790
> 
> 标签：windows, winapi, visual-c++, mfc

我正在寻找一种方法来检测用户是否使用小图标： ![使用小任务栏按钮](../Images/f705f72efdbfec62d9ec311dfda02672.png)

我在 GetSystemMetrics\SystemParametersInfo 中找不到任何内容。
我尝试使用“正在运行的应用程序”窗口的大小： ![运行应用程序窗口](../Images/6fd44eb69b0bb253551c8f757ee9f2e4.png)

当任务栏的方向是底部\顶部时它工作正常，但是当它是左\右时，这个窗口会占用整个任务栏的宽度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T19:14:48.573

桌带在 Windows 上并没有完全消失，但它们是生命支持。首先确定您是否不想利用缩略图工具栏、ITaskbarList3::ThumbBarXxx() 函数。

我不知道有一个 api 可以读回按钮大小设置。您可以使用一个后门，这些配置设置始终保存到注册表中。运行 SysInternals 的 ProcMon 实用程序并更改设置。在我的机器（Windows 8）上，弹出了这个注册表项：

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced\TaskbarSmallIcons

这几乎肯定有效，当然，我不能保证 Windows 8 之外的任何内容。

# cocos2d-iphone - 降低帧率

> ID：13726798
> 
> 赞同：0
> 
> 时间：2012-12-05T15:36:10.383
> 
> 标签：cocos2d-iphone

有什么办法可以将游戏`framerate`从 30 帧降低到 25 帧`iPhone`吗？我正在移植一个以**25 fps**创建的 Flash 游戏并以该帧速率导出精灵，但动画未按应有的方式正确显示。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:37:55.563

试试这个，直接开箱即用：

```
animation = [CCAnimation animationWithSpriteFrames:frames delay:.04]; 
```

有 40 毫秒的延迟，这应该接近 25 fps（渲染动画），而游戏的其余部分以 60 fps 的速度运行（如果你在其他地方没有延迟问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:38:49.193

我认为您可以`App Delegate`在您的方法中使用以下代码段更改您的动画间隔`didFinishLaunching`：

```
CCDirector *director = [CCDirector sharedDirector];
[director setAnimationInterval:1.0/25]; 
```

希望这可以帮助！

**编辑 ：**

此链接能否为您提供有关如何处理的更多信息？

[http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:best_practices](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:best_practices)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-05T16:26:04.167

好吧，最终解决方案是通过另一种方式。

1.  将帧率保持在 1.0/60.0

最慢地为 spritesheet 设置动画所需要做的是将帧多次添加到动画数组中。

```
NSMutableArray *walkAnimFrames = [NSMutableArray array];
            for(int i =  _spriteMetadata.spriteInitFrame; i <= _spriteMetadata.spriteEndFrame; ++i) 
{
NSString *spriteFrameName = [NSString stringWithFormat:@"%@%@", _spriteMetadata.spriteBaseName, index];

                for (int i=0; i<2; i++)
                {
                    [walkAnimFrames addObject:
                     [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:spriteFrameName]];
                }
            } 
```

这不是很正统，但它有效！:)

感谢您的帮助安迪！

# android - 为什么这个嵌套的 TextView 不工作，而其他人在相同的代码中工作？

> ID：13726799
> 
> 赞同：0
> 
> 时间：2012-12-05T15:36:10.093
> 
> 标签：android, android-view

**考虑到这个 LinearLayout 包含..**

*   一个带有两个子视图的嵌套线性布局

    *   一个图像视图

    *   一个文本视图

*   一个文本视图

*   一键式

为什么我可以使用 findViewById 和 setText 在外部 TextView 上成功显示文本内容，而内部 Textview（嵌套线性视图内部）显示为空白？

这是 onCreate 的代码：

```
LayoutInflater inflater = LayoutInflater.from(Item.this);
LinearLayout itemLayout = (LinearLayout)inflater.inflate(R.layout.activity_item, null);            
Button proformaButton = (Button)itemLayout.getChildAt(2);

roformaButton.setOnClickListener(this);

setContentView(itemLayout);

TextView titleTitla = (TextView)findViewById(R.id.item_title);
TextView itemBody = (TextView)findViewById(R.id.item_body); 

titleTitla.setText("Tomatoes");
itemBody.setText("Potatoes"); 
```

在调试时，我可以看到视图是由 Id 找到的，并且我还可以看到 setText 是否可以正常工作（TextView 的 mText 字段），但活动没有显示 item_title 的任何内容。

我在问如何解决这个问题，但如果这不是一件微不足道的事情，我们将不胜感激。

如果有帮助，这里是xml：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:orientation="horizontal"
        android:layout_weight="1">

        <ImageView
            android:id="@+id/item_picture"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:contentDescription="@string/image_item">
        </ImageView>

        <TextView 
            android:id="@+id/item_title"
            android:layout_width="0dip"
            android:layout_height="fill_parent">
        </TextView>

    </LinearLayout>

    <TextView 
        android:id="@+id/item_body"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="2">
    </TextView>

    <Button
         android:id="@+id/btnOrderItem"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="@string/order_button"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:38:24.763

```
 <TextView 
        android:id="@+id/item_body"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="2">
    </TextView> 
```

这是`layout_height="0dp"`. 它适用于其他 LinearLayout 的原因是因为您有一个 weight 属性。将 0dp 更改为`wrap_content`.

# css - 显示时元素似乎正在占用空间：无

> ID：13726804
> 
> 赞同：4
> 
> 时间：2012-12-05T15:36:14.860
> 
> 标签：css

我有一个在 Chrome 中正确显示的页面，但不是 Firefox 或 IE。似乎具有 display:none 的元素正在占用空间并迫使一些文本向右。

[http://flybysouth.com/faqs/](http://flybysouth.com/faqs/)

这是一个 WordPress 网站，我正在使用我自己定制的高级主题。我已经应用了以下自定义 css，试图从页面中删除 header-wrapper。我知道这太过分了。我一定是追错了元素……

```
#header-wrapper,
#leader,
#leader .margin,
#leader .margin h1 { display:none; margin: 0; padding: 0; width: 0; height: 0; } 
```

任何想法是什么导致“是什么让它变白”前面的空间？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:56:07.947

看起来您可能在主要内容区域上方的某处有一个未清除的浮动，请尝试添加`clear:both;`到#main-col：

```
#main-col {
  clear: both;
  margin-top: 20px;
} 
```

# vb.net - 在 VB.NET 中动态创建变量

> ID：13726809
> 
> 赞同：5
> 
> 时间：2012-12-05T15:36:35.400
> 
> 标签：vb.net, dynamic

我一直试图弄清楚这个问题已经有一段时间了，但似乎无法找到答案。我不明白为什么这是不可能的。我在 VB.NET 中编码。

**这是我的问题：** 我需要动态创建变量并能够稍后在代码中引用它们。

**更多详细信息：** 变量的数量来自针对用户定义值的一些数学运算。在这种特定情况下，我只想创建整数，尽管我预见未来需要能够使用任何类型的变量来做到这一点。似乎我最大的问题是能够以独特的方式命名它们，以便以后可以引用它们。

**简单示例：** 假设我的值为 10，我需要为其创建变量。我想运行一个循环来创建这 10 个整数。稍后在代码中我将引用这 10 个整数。

这对我来说似乎很简单，但我无法弄清楚。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T15:42:53.947

做这样的事情的最好方法是在`Dictionary(T)`课堂上。它是通用的，因此您可以使用它来存储任何类型的对象。它允许您轻松存储和检索代码/值对。在您的情况下，“键”将是变量名，“值”将是变量值。例如：

```
Dim variables As New Dictionary(Of String, Integer)()
variables("MyDynamicVariable") = 10  ' Set the value of the "variable"
Dim value As Integer = variables("MyDynamicVariable")  ' Retrieve the value of the variable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:41:49.750

你想使用一个`List`

```
Dim Numbers As New List(Of Integer)

For i As Integer = 0 To 9 
    Numbers.Add(0)
Next 
```

在任何 VB.Net 程序中都不会看到动态创建一堆命名变量的想法。如果您有多个项目，您只需将它们存储在列表、数组或其他类型的集合中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:00:07.613

'Dim an Array Dim xCount as Integer Dim myVar(xCount) as String

添加按钮事件。. . xCount += 1 myVar(xCount) = "字符串值"

'您必须跟踪 xCount 值等于使用什么。'通常可以是 A DataTable 中的 ID，带有字符串含义

# c# - 一对多而不暴露模型中的子集合和/或外键

> ID：13726811
> 
> 赞同：1
> 
> 时间：2012-12-05T15:36:41.290
> 
> 标签：c#, orm, dapper

当我没有在 POCO 模型中公开我的外键和子集合时，我遇到了 Dapper 的问题。让我们用两个实体举一个简单的例子：

```
Bike (Id, ModelName)
Tire (Id, Tread) 
```

在数据库中，每个轮胎都有一个 Bike 的外键。但我的模型没有。从数据库中，我想将此结构具体化为`Dictionary<Bike, IEnumerable<Tire>>`. 每辆自行车（唯一）将有两个轮胎。

我可以使用以下查询选择这种一对多关系：

```
SELECT b.Id, b.ModelName, t.Id, t.Tread
FROM Bike b
JOIN Tire t ON b.Id = t.bike_id 
```

为了使用 Dapper 进行映射，我执行了以下操作：

```
var dbResult = connection.Query<Bike, Tire, KeyValuePair<Bike, Tire>>("sql-query-above",
(a, s) => new KeyValuePair<Bike, Tire>(a, s);
splitOn: "Id"); 
```

并使用 LINQ 将该结果转换为我的字典：

```
Dictionary<Bike, IEnumerable<Tire>> dict = dbResult.GroupBy(g => g.Key, g => g.Value).ToDictionary(g => g.Key, g => g.AsEnumerable()); 
```

它正确地返回数据结构：

```
Bike #1
 - Tire #1
 - Tire #2
Bike #2
 - Tire #3
 - Tire #4 
```

但这是实现这种数据结构的最有效方式吗？另一种方法是避免使用字典并创建其他暴露外键和关系的实体（例如 Bike 上的 Tyres 集合和 Tire 上的 FK），并使用[此处](https://stackoverflow.com/questions/6379155/help-with-multi-mapper-to-create-object-hierarchy#6380756)描述的映射方法。但我想在我的模型中避免这种情况，因为它会导致很多额外的类。但是性能呢？这是更糟还是一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:29:38.210

我不是使用 Dapper 的专家，但我遇到了它的限制，就像你正在经历的那样。我遇到过类似的情况，我的对象中的一个属性是一个像你一样的集合。我发现创建第二个查询来使用扩展方法填充那些内部类型的集合更简单。

所以你可以先抓取所有的自行车，然后调用你的扩展方法来抓取轮胎数据，比如：

```
dict.WithTires(); 
```

我知道这是对数据库的第二次调用，但权衡是您仍然可以骑自行车，而不必每次都获取轮胎信息。

此外，您可能会考虑将轮胎集合作为属性添加到您的自行车类中，恕我直言，这比使用字典更好。如果你有这样的事情：

```
public class Bike
{
    public int id { get; set; }
    public string modelName { get; set; }
    public IList<Tires> tires { get; set; }
}

public class Tires
{
    public int id { get; set; }
    public string tread { get; set; }
} 
```

您可以轻松地创建一个扩展方法来获取单个自行车或一组自行车的轮胎数据：

```
Bike myBike = new Bike();
List<Bike> bikeCollection = new List<Bike>();

myBike.WithTires();
bikeCollection.WithTires(); 
```

# ruby-on-rails - Rails 将页面路由/限制到基于子域的应用程序的子域

> ID：13726816
> 
> 赞同：0
> 
> 时间：2012-12-05T15:36:59.003
> 
> 标签：ruby-on-rails, devise, subdomain

我正在使用设计和子域构建一个 ruby​​ on rails 应用程序。

*   每个用户都有一个 username.myapp.ltd
*   每个用户都有页面

我希望能够仅显示该特定用户的页面并为其提供访问权限。

目前 /pages/id 无论该页面属于哪个用户都有效。

路由这些页面并将它们“锁定”在 user.username.ltd 下的最佳方法是什么，仅在它们属于该用户时显示？

我的路线是这样的：

```
 constraints(Subdomain) do
    match '/' => 'frontend#show'
    resources :pages, :only => [:index, :show]
  end 
```

# c# - 使用 LINQ-to-SQL 连接左外日历表

> ID：13726818
> 
> 赞同：0
> 
> 时间：2012-12-05T15:37:03.623
> 
> 标签：c#, sql, sql-server, linq, linq-to-sql

如何针对我的和表编写以下`LEFT OUTER JOIN`SQL 查询，以便在 LINQ 中按天、周或月对总销售额进行分组，以便它可以通过 LINQ-to-SQL 实现？`Calendar``Sales`

```
SELECT c.CalendarDate, c.FirstDayOfWeek, c.FirstDayOfMonth,
       ISNULL(s.Total, 0) as Total
FROM Calendar as c
LEFT OUTER JOIN Sales as s
 on s.SaleDate >= c.CalendarDateTime and
    s.SaleDate < c.NextDayDateTime
WHERE s.SaleDate BETWEEN @since and @until 
```

我设法让*内部联接*在 LINQ 中工作，但我需要外部联接来检索零销售额的天数。这是我用于内部连接的代码：

```
var sales = from s in db.Sales
            from c in db.Calendars
            where
                s.SaleDate >= c.CalendarDate && s.SaleDate < c.NextDayDateTime
                && s.SaleDate >= sinceDate && s.SaleDate < dateEnd
            select new
            {
                c.CalendarDate,
                c.FirstDateOfWeek,
                c.FirstDateOfMonth,
                s.Total
            }; 
```

然后我可以按如下方式打开日期间隔和分组销售：

日常的：

```
var groupedSales = sales.GroupBy(x => x.CalendarDate); 
```

每周：

```
var groupedSales = sales.GroupBy(x => x.FirstDateOfWeek); 
```

每月：

```
var groupedSales = sales.GroupBy(x => x.FirstDateOfMonth); 
```

最后：

```
var salesReport = from g in groupedSales
                  orderby g.Key
                  select new {
                      Date = g.Key,
                      Total = g.Sum(x => x.Total)
                  }; 
```

或者，它也可以在仅检索非零天的销售后将零销售记录注入我的报告中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:56:23.400

那这个呢？

```
var sales = from s in db.Sales
            from c in db.Calendars.DefaultIfEmpty()
            where
                s.SaleDate >= c.CalendarDate && s.SaleDate < c.NextDayDateTime
                && s.SaleDate >= sinceDate && s.SaleDate < dateEnd 
```

**编辑：** 您可以像这样创建辅助类：

```
class CalendarSealesHelper
{
   public DateTime CalendarDate {get; set;}
   public DateTime NextDayDateTime {get; set;}
}

class CalendarSealesHelperComparer : IEqualityComparer<CalendarSealesHelper>
{
    public bool Equals(CalendarSealesHelper c1, CalendarSealesHelper c2)
    {
        if (c2.CalendarDate >= c1.CalendarDate 
               && c2.NextDayDateTime < c1.NextDayDateTime)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public int GetHashCode(CalendarSealesHelper c)
    {
        int hCode = (int)c.CalendarDate.Ticks ^ (int)c.NextDayDateTime.Ticks;
        return hCode.GetHashCode();
    }
} 
```

然后试试这个：

```
var query = db.Calendars.GroupJoin(
         db.Sales,
         c => new CalendarSealesHelper{c.CalendarDate, c.NextDayDateTime},
         s => new CalendarSealesHelper{s.SaleDate, s.SaleDate},
         (c, s) => new {Calendars = c, Sales = s},
         new CalendarSealesHelperComparer())
    .SelectMany(s => s.Sales.DefaultIfEmpty(),
            (c, s) => new {
                            CalendarDate = c.CalendarDate,
                            FirstDayOfWeek = c.FirstDayOfWeek,
                            FirstDayOfMonth = c.FirstDayOfMonth,
                            Total = s.Total,
                            SaleDate = s.SaleDate
                          })
    .Where(r => r.SaleDate >= sinceDate && r.SaleDate <= dateEnd); 
```

# c# - 为什么我找不到 FileInfo？

> ID：13726820
> 
> 赞同：1
> 
> 时间：2012-12-05T15:37:16.883
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我已经添加了这两个：

```
using System;
using System.IO; 
```

在我的代码中但仍然找不到`FileInfo`类。当我构建我的项目时。错误如下：

> 找不到“FileInfo”（您是否缺少 using 指令或程序集引用？）

我尝试使用全名的类`System.IO.FileInfo`，也错误：

> 找不到“System.IO.FileInfo”（您是否缺少 using 指令或程序集引用？）

它也没有 System.IO 命名空间中的文件类

System.IO 包含类似`Path`, `BinaryReader/Writer`,`StreamReader/Writer`

我在 VS 2012 中使用 .Net 4.5 来开发一些 Win8 应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:54:55.920

正如 Hans Passant 正确所说，[`System.IO.FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)不适用于 Windows 应用商店应用程序。![商店图标](../Images/9962d214f8fc99bff30a94c6f3c4561d.png)您可以通过在[MSDN 库](http://msdn.microsoft.com/en-us/library/29kt2zfk.aspx)列表中查找商店图标来查看商店可用的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:54:44.513

正如 Hans Passant 所说，评论`FileInfo`类在 Windows 应用商店应用程序中不可用。

使用 C#/XAML 创建的应用确实使用 .NET 框架，但只有一个名为[.NET API for Windows Store Apps](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)的子集。您可以访问`System.IO`Windows 应用商店应用程序，但您没有 .Net Framework 上的所有类。

看看：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh454050.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh454050.aspx)

因此，您可以使用`StorageFile`该类。看看这个样本： http: [//metroapps.wikispaces.com/File+IO](http://metroapps.wikispaces.com/File+IO)

# c# - 是否可以使用 LINQ to Objects 在 C# 的嵌套类中找到（通常）具有 GUID 的对象？

> ID：13726821
> 
> 赞同：0
> 
> 时间：2012-12-05T15:37:17.840
> 
> 标签：c#, asp.net-mvc-3, linq-to-objects

我有一个嵌套的类层次结构

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Models
{
public class Document
{
public Document();
public Guid ID { get; set; }
public List<Order> Orders {get; set;}
}
public class Order
{
public Order();
public Guid ID { get; set; }
public List<OrderItem> OrderItems {get; set;}
}
public class OrderItem
{
public OrderItem();
public Guid ID { get; set; }
public String ProductName { get; set; }
public int Qty { get; set; }
}
} 
```

ID 是 GUID。我需要一般地搜索具有指定 GUID 的对象。我被告知一种方法是为此类指定一个接口（请参阅：[SO Question](https://stackoverflow.com/questions/13723426/is-it-possible-to-findgenerically-an-object-with-a-guid-in-a-nested-class-in-c)）。但是，由于我的类是生成的，我宁愿不改变类。所以我想研究一种使用 LINQ to Objects 的方法。我还发现了关于这种方法的优秀 SO 帖子：[LINQ to Objects SO post](https://stackoverflow.com/questions/8507532/using-linq-to-objects-to-get-to-an-object-deep-in-the-hierarchy)，但当然需要在查询中指定所有子类。

乐观地说，我希望“让我得到 GUID 为 x 的对象”。GUID 是独一无二的，所以我觉得我不需要指定路径。但是我想这对于 LINQ 是不可能的？？？

编辑：更新了上面的代码。道歉。我想提取一个带有 GUID= X 的 OrderItem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:10:30.323

对于修改后的问题，在文档列表中搜索所有匹配`OrderItem`对象的代码如下所示：

```
List<Document> data = ...;
Guid guidToSearch = ...;
var orderItems = data.SelectMany(o => o.Orders)
                     .SelectMany(o => o.OrderItems)
                     .Where(o => o.ID == guidToSearch)
                     .ToList(); 
```

如果您只有一个文档，而不是列表，则可以跳过第一个`SelectMany`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:07:57.353

假设您有一组不同的对象，如下所示：

```
List<object> data = new List<object>() { new Order { ID = ... }, new Document { ID = ... } }; 
```

然后你可以写这样的代码

```
var guidToSearch = ...;
var results = data.Where<dynamic>(o => o.ID == guidToSearch).ToList(); 
```

thre`results`集合现在将包含匹配的对象。

# api - 创建一个java库

> ID：13726822
> 
> 赞同：3
> 
> 时间：2012-12-05T15:37:18.863
> 
> 标签：api, netbeans, jar, java

在我从事 Java EE 项目时，我创建了一些实用程序类。我喜欢将它们打包到一个 Jar 中并与社区分享。我将所有类都放在一个单独的包中。我正在使用 Netbeans IDE。

1.  使该包成为 Jar lib 的最简单方法是什么？
    （NetBeans 可以为我处理这一切吗？）

2.  我应该考虑哪些重点？

3.  我在哪里可以分享它，然后其他有兴趣的人可以使用它并帮助我改进它？（GitHub？Google Code？SourceForge？还是其他地方？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:39:48.597

1.  NetBeans*可以*做到这一点，但 IMO 如果您要发布一个开源项目，您应该使用 Maven、Ant 或类似的构建脚本来发布它。

2.  让它起作用？有不烂的文档吗？有很好的测试和例子吗？确保它不仅仅是另一个已经存在的实用程序集合？不知道任何细节，很难知道你到底想要什么。我特别怀疑这部分是题外话。

3.  使其作为 Maven 工件可用。将源代码放在 GitHub 或其他地方；只要源的寿命相对较长且易于访问，谁会在意源的位置？

# javafx - 选中复选框时触发 JAVAFX 事件

> ID：13726824
> 
> 赞同：17
> 
> 时间：2012-12-05T15:37:23.763
> 
> 标签：javafx

我的 JavaFx FXML 应用程序有问题。

当我在表单上选择一个复选框时，我想根据单击的复选框执行一个方法。有什么方法可以将复选框的名称传递给方法，以便我可以对其执行一些有条件的工作？

我有两个复选框，只能选择一个。当我单击一个时，应取消选择另一个，反之亦然。显然下面的代码将不起作用，所以我希望传递被单击的对象的名称。

任何帮助将不胜感激，非常感谢。

```
@FXML private void updateRcs(){

    if (chkRcsuri.isSelected()){
        chkRcsuri2.setSelected(false);
    }

    if (chkRcsuri2.isSelected()){
        chkRcsuri.setSelected(false);
    }

} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-05T17:58:58.607

您可以使用更改跟踪或使用 JavaFX 的事件处理机制。
有了这样的复选框，

```
final CheckBox chk1 = new CheckBox("chk 1");
final CheckBox chk2 = new CheckBox("chk 2"); 
```

变更跟踪

```
chk1.selectedProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        chk2.setSelected(!newValue);
    }
});

chk2.selectedProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        chk1.setSelected(!newValue);
    }
}); 
```

使用事件处理

```
EventHandler eh = new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        if (event.getSource() instanceof CheckBox) {
            CheckBox chk = (CheckBox) event.getSource();
            System.out.println("Action performed on checkbox " + chk.getText());
            if ("chk 1".equals(chk.getText())) {
                chk2.setSelected(!chk1.isSelected());
            } else if ("chk 2".equals(chk.getText())) {
                chk1.setSelected(!chk2.isSelected());
            }
        }
    }
};

chk1.setOnAction(eh);
chk2.setOnAction(eh); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-15T20:49:40.470

单选按钮不会给你一个相互排斥的选择吗？只需确保您将组名设置为相同 - 选择一个然后会自动取消选择另一个，您可以在 Action 事件中添加额外的逻辑。

比尝试围绕复选框重写相同的功能更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-09T21:45:41.387

所以我试图做类似的事情，除了我有多个复选框，然后一个与其他复选框一起选择是荒谬的。我制作了两个单独的监听器，并将一个通用监听器设置为主框，一个专用监听器用于异常。

```
@FXML private CheckBox redCB = new CheckBox();
@FXML private CheckBox blueCB = new CheckBox();
@FXML private CheckBox greenCB = new CheckBox();
@FXML private CheckBox whiteCB = new CheckBox();
@FXML private CheckBox blackCB = new CheckBox();
@FXML private CheckBox colorlessCB = new CheckBox();

//assigning listeners
redCB.selectedProperty().addListener(colorCheckChange);
blueCB.selectedProperty().addListener(colorCheckChange);
greenCB.selectedProperty().addListener(colorCheckChange);
whiteCB.selectedProperty().addListener(colorCheckChange);
blackCB.selectedProperty().addListener(colorCheckChange);
colorlessCB.selectedProperty().addListener(colorlessCheckChange);
                       //note: this is the only different one^^^

//making listeners
ChangeListener colorCheckChange = new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> ov,
        Boolean old_val, Boolean new_val) {
        if (new_val)
            colorlessCB.setSelected(false);
    }};
ChangeListener colorlessCheckChange = new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> ov,
        Boolean old_val, Boolean new_val) {
        if (new_val)
        {
            redCB.setSelected(false);
            blueCB.setSelected(false);
            greenCB.setSelected(false);
            blackCB.setSelected(false);
            whiteCB.setSelected(false);
        }
    }
}; 
```

第一个基本上只是确保`colorlessCB`在尝试选择其他颜色时没有选择它，反之亦然。这样，您还可以避免取消选择一个而另一个自动重新选择自身的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-02T22:27:15.150

这是我的解决方案。但请确保`a`变量适合您

```
//First in FXML file 
<CheckBox fx:id="chkbxAuto" mnemonicParsing="false" onAction="#autoConfig" text="Auto" />

// in controler  
public class FXMLController implements Initializable {
    private static int a = 0;
    //references to lables
    ....
    @FXML
    private Label lblStateValue; 
    @FXML
    private Group grpSetting; // a group of elements which I want to be disabled and enabled 
    ... 
    @FXML
    private void autoConfig(ActionEvent event) {
            System.out.println("Configing automatically"); 
             a++;
             if(a%2==1){
                 lblStateValue.setText("Auto configuration enabled"); // it change a lable to show the state 
                 grpSetting.setDisable(true); // it disable a group of elements
             }
            else{
                 lblStateValue.setText("Auto configuration disabled");
                 grpSetting.setDisable(false);
             }
            a%=10;

        }
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-12T06:48:18.193

我知道这个问题已经很老了，但是我在寻找同样的问题时发现了。我找到了一个解决方案

**a)**对于阅读源代码和

**b)**在 checkBox 上定义 changeListener 给了我一些问题。

无论如何，我的解决方案是为复选框定义一个 onAction 函数。

```
yourCheckboxName.setOnAction(this::aFunctionName);
...
void aFunctionName() {

    if(yourCheckboxName.isSelected()) {            
        doThis()
    } else {
        doThat()
    }
} 
```

**注意**这需要Java8或更高版本。

# c - 遗传算法实现中的奇怪现象

> ID：13726828
> 
> 赞同：0
> 
> 时间：2012-12-05T15:37:30.820
> 
> 标签：c, algorithm, artificial-intelligence, genetic

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 8
#define POP 8

int answers[SIZE] = {5,3,1,7,4,6,0,2};

int getRand(int mod){
    if (mod==0) return 0;
    else return random()%mod;
}

void printArray(int array[]){
    int i;
    for(i=0; i<SIZE-1; i++) printf("(%i,%i),",i,array[i]);
    printf("(%i,%i)",SIZE-1,array[SIZE-1]);
    printf("\n");
}

int getWeight(int array[]){
    int weight = 28;
    int queen;
    for(queen=0;queen<SIZE;queen++){ //for each queen
        int nextqueen;
        for(nextqueen=queen+1;nextqueen<SIZE;nextqueen++){ //for each of the other queens (nextqueen = queen to avoid counting pairs twice)
            if(array[queen] == array[nextqueen] || abs(queen-nextqueen)==abs(array[queen]-array[nextqueen])){ //if conflict
                weight--;
            }
        }
    }
    return weight;
}

void geneticAlgorithm(){
    int population[POP][SIZE];
    int children[POP][SIZE];
    int weightProb[] = {};
    int wpl = 0; //weightProb[] length
    float mutProb = 0.05;
    int done = 0;
    int i;
    for(i=0;i<POP;i++) for(int j=0;j<SIZE;j++) population[i][j] = getRand(SIZE);
    while(done == 0){
        for(i=0;i<POP;i++){
            if(getWeight(children[i]) == 28){
                printf("solution: ");
                printArray(children[i]);
                done = 1;
            }
        }

        for(i=0;i<wpl;i++) weightProb[i] = (int)NULL; //clear weightprob
        wpl=0;

        //weighted probability distribution
        for(i=0;i<POP;i++){
            int w = getWeight(population[i]);
            for(int j=0;j<w;j++){
                weightProb[wpl] = i; //fill array with member number w times
                wpl++;
            }
        }

        //reproduce
        for(i=0;i<POP;i+=2){
            int par1 = weightProb[getRand(wpl)];
            int par2 = weightProb[getRand(wpl)];
            int split = getRand(SIZE);
            //crossover
            for(int j=0;j<split;j++){
                children[i][j] = population[par1][j];
                children[i+1][j] = population[par2][j];
            }
            for(int j=split;j<SIZE;j++){
                children[i][j] = population[par2][j];
                children[i+1][j] = population[par1][j];
            }
            //mutation
            if(getRand(1000000)<=mutProb*1000000){
                int child=getRand(2);
                if(child == 0) children[i][getRand(SIZE)] = getRand(SIZE);
                else children[i+1][getRand(SIZE)] = getRand(SIZE);
            }
        }
        for(i=0;i<POP;i++) for(int j=0;j<SIZE;j++) population[i][j] = children[i][j];
        wpl = 0;
    }
}

int main(int argc, const char * argv[]){
    srandom((unsigned int)time(NULL)); //seed random
    geneticAlgorithm();
    return 0;
} 
```

填充 weightProb[] 时，种群随机变化。我已经使用打印语句进行了调试，当`wpl++`被注释掉时它会停止，但这是必需的（wpl 是 weightProb 数组的长度）。这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:40:45.100

本声明：

```
int weightProb[] = {}; 
```

声明一个*空*数组。这意味着每次您写入一个元素时，您都会超出数组的范围，并且会发生不好的事情。

# javascript - 意外的标识符错误

> ID：13726834
> 
> 赞同：3
> 
> 时间：2012-12-05T15:37:57.387
> 
> 标签：javascript, jquery, xml, json, html

我不确定为什么我的代码无法运行。

**这是我的 JavaScript 代码：**

```
fuction update(id, value){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4 && xmlhttp.status == 200){
            document.getElementById("response").innerHTML=xmlhttp.responseText;
        }else{
            document.getElementById("response").innerHTML=
                                "AJAX Failed: " + xmlhttp.status;
        }
    }

    xmlhttp.open("GET","updatevis.php?id="+id+"&value="+value);
    document.getElementById("response").innerHTML="Sending Ajax Request";
    xmlhttp.send();
} 
```

**这是我的 HTML 表单代码：**

```
<input type="checkbox" name="visible" id="'.$id.'" checked="'.$checked.'" onchange="update('.$id.', '.$visible.')" /> 
```

`id`可以是 1-无论其自动增量如何，可见是 a ，`int`1 或 0 检查只是我的代码是否开始检查

我已经通过 chrome 和 Firefox 运行了这段代码，chrome 在第 5 行（我定义函数的行）上给了我的两个错误一个 Unexpected identifier `ReferenceError`，在第 30 行（复选框一个）上说函数未定义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:39:13.253

您`function`在第一行拼写错误为`fuction`. 改变这一点，一切都应该按预期工作。

# email - 使用 Outlook 而不是 gmail 发送邮件 vb.net 2010

> ID：13726843
> 
> 赞同：0
> 
> 时间：2012-12-05T15:38:24.297
> 
> 标签：email, vb.net-2010

我有一门课可以发送带有多个附件的电子邮件，它使用 gmail，但我如何使用 Outlook 发送电子邮件？

```
 Imports System.Net.Mail
    Imports System.Net.Mime

    Public Sub SendThis(ByVal SubjectText As String, _
                             ByVal BodyText As String, _
                             ByVal FromAddress As String, _
                             ByVal ToAddress As String, _
                             Optional ByVal FileName As Collection = Nothing _
                             )
            Try
                Dim email As New Net.Mail.MailMessage(FromAddress, ToAddress)
                email.Subject = SubjectText
                email.Body = BodyText
                If Not FileName Is Nothing Then
                    For Each Name As String In FileName
                        Dim attach As New Net.Mail.Attachment(Name) 'Includes Path
                        email.Attachments.Add(attach)
                    Next
                    For Each At As Attachment In email.Attachments
                        At.TransferEncoding() = Net.Mime.TransferEncoding.Base64
                    Next
                End If
                Dim TheSmtp As New SmtpClient(YourSmtpServerName, 587)
                TheSmtp.Credentials = New Net.NetworkCredential("abc@gmail.com","MYPASS")
                TheSmtp.DeliveryMethod = SmtpDeliveryMethod.Network
                TheSmtp.Send(email)
                email.Attachments.Clear()
                TheSmtp = Nothing
                email = Nothing    
            Catch ex As Exception
                MessageBox.Show("Error: " & ex.Message, "HFB", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
            End Try
        End Sub 
```

我将函数称为：

```
 Private Sub BtnSend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnSend.Click
            Dim BodyText As String
            Dim SubjectText As String
            Dim FromAddress As String
            Dim ToAddress As String
            Dim Filename As New Collection
            If Me.LstBxAttach.Items.Count > 0 Then
                For Each TheItem As String In LstBxAttach.Items
                    Filename.Add(TheItem)
                Next
            End If
            SubjectText = Me.TbSubject.Text
            BodyText = Me.TbBody.Text
            SendThis(SubjectText, _
                          BodyText, _
                          "from@example.com", _
                          "to@example.com", _
                          Filename _
                          )
            SubjectText = ""
            BodyText = ""
            FromAddress = ""
            ToAddress = ""
            MessageBox.Show("Sent!", "HFB", MessageBoxButtons.OK, MessageBoxIcon.Information)
        End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:00:41.820

您可以使用[Outlook 对象模型](http://msdn.microsoft.com/en-us/library/vstudio/ms268893.aspx)。[Application](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.office.interop.outlook.application.aspx)对象允许您连接到 Outlook ；要发送电子邮件，您需要创建一个[MailItem](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.office.interop.outlook.mailitem.aspx)对象、填充相关属性并调用其[Send](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.office.interop.outlook._mailitem.send.aspx)方法。

# javascript - CakePHP 开发人员试用 JavaScript MV*。感到困惑

> ID：13726848
> 
> 赞同：4
> 
> 时间：2012-12-05T15:38:30.647
> 
> 标签：javascript, model-view-controller, mvvm, mvp

我有几年使用 CakePHP 的服务器端 MVC 应用程序开发的背景，还有一些使用 vanilla PHP 的背景。遗憾的是，我不能对 JS 应用程序说同样的话，尽管我确实有使用 Mootools 为静态页面增添趣味的经验。

所以现在我正在尝试研究客户端应用程序构建，到目前为止我的成功并没有那么好。由于我接触过的唯一 MVC 是 CakePHP，每个 JS MV* 框架充其量似乎都难以理解。我已经习惯于编写整洁的 CakePHP 和 Mootools 类代码，以至于大块的 JS 代码感觉很杂乱，这完全没有帮助。

我什至尝试通过模仿 CakePHP 来编写我自己的简单的类似 MVC 的库，主要用于学术用途。我想不用说我还没有真正得到它。

我在学习和编写自己的 MVC 时意识到的一些事情：

*   Js是异步的。CakePHP 以它的方式工作，因为 PHP 是同步的。在 JS 中，需要以不同方式实现的事情是无穷无尽的，而由于异步，可以以不同方式完成的事情也有很多。服务器端 MVC（或它的 CakePHP 实现）和客户端 MV* 之间最重要的区别是什么？
*   我仍然不太了解客户端模型的概念。在 Cake 中，它们处理数据验证和数据库连接。另一方面，客户端是一个不安全的环境，所以客户端模型只能做基本的数据过滤、预验证和默认值。我在这里完全错了吗？
*   某些应用程序需要服务器对应。服务器也应该是 MVC 吗？
*   似乎在客户端 MV* 中您可以同时拥有多个控制器。虽然我有点理解它有它的用途，但我在这一点上的知识太少了，我什至想不出比“它有什么用？”更好的问题。

我还下载[了 TodoMVC](http://addyosmani.github.com/todomvc/ "TodoMVC")并尝试检查不同的框架，但收效甚微。它的主要问题是它只是单页（动作发生在不同的 url，但布局保持不变）并且实现是如此不同，以至于我什至很难理解基础知识，更不用说找到最适合的框架为了我。此外，它不以任何方式与服务器通信，这令人非常失望，因为我想看看不同的框架是如何做到这一点的。

因此，这个问题的最佳答案是指向一本名为**Client-side JavaScript MV* For Dummies (Who only have experience in server-side MVC)**的书的链接，除了常规的 StackOverflow 之外，它还能为您赢得大约 500 个互联网奖励。

我将非常感谢任何关于我写的漫无边际的问题主题的见解（完整链接）。您将获得标准的 +1 奖励，作为进一步的激励，我承诺将您的昵称写在便利贴上，并在下个月将其保留在我的显示器上。回答最有帮助的人当然会被*接受*，另外还可以提供一张图片，打印在他们的昵称旁边，以附加到我的显示器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:01:45.263

我很想知道你最后在哪里。PHP 是我的初恋，虽然我仍然喜欢这门语言的易用性，但当它明显被淘汰以寻求更快、更具可扩展性的技术时，我很难真正认真对待它。

javascript 的异步性使事情变得复杂，但它确实为提高性能打开了大门。有相当多的库（更多用于 node.js，而不是客户端工作）旨在使 javascript 编写得好像它是同步的 - 我再次认为它对您当前的问题没有帮助，但很高兴知道其他人分享您的痛苦.

我认为 javascript 中的 MVC 可以这样想：

M：模型只是对你的数据的解释。所以如果你有一个人，你可以说每个人都有一个字符串的名字，一个整数的年龄等等。现在，每当您创建一个新人时，您都可以进行验证。我发现，客户端模型往往非常简单。

V：观点是另一个有趣的东西。有些人喜欢拥有一大组包含 HTML (ew) 字符串的渲染函数。其他人喜欢让视图只是像handlebars.js这样的模板引擎的包装器（可能是更好的解决方案）。

C：功能与 PHP 中的控制器几乎相同。

我对您的建议是不要自己编写，而是采用 Backbone.js（很快成为行业标准），从内到外学习它，也许在它之上构建。

祝你好运！

# c# - Windsor ASP.NET WebAPI 序列化错误

> ID：13726849
> 
> 赞同：1
> 
> 时间：2012-12-05T15:38:33.690
> 
> 标签：c#, asp.net-web-api, castle-windsor

我有一个 Windsor ASP.NET MVC WebAPI 项目设置，例如：

[http://nikosbaxevanis.com/2012/07/16/using-the-web-api-dependency-resolver-with-castle-windsor-scoped-lifetime/](http://nikosbaxevanis.com/2012/07/16/using-the-web-api-dependency-resolver-with-castle-windsor-scoped-lifetime/)

当我的控制器返回 OK 状态时，一切正常。但是，如果我尝试发送错误状态，例如 not NotFound，则会收到以下错误：

Castle.MicroKernel.Lifestyle.Scoped.CallContextLifetimeScope+SerializationReference，Castle.Windsor，版本=3.1.0.0，文化=中性，PublicKeyToken=407dd0808d44fbdc

这是我的控制器方法：

```
 // GET api/values
    public IEnumerable<string> Get()
    {
        bool valid = ...;
        if (valid)
            return new[] {"valid"};

        HttpResponseMessage resp = new HttpResponseMessage(HttpStatusCode.NotFound);
        resp.Content = new StringContent("My custom message");
        throw new HttpResponseException(resp);
    } 
```

请注意，如果我用“resp.Content”注释掉该行，那么一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:42:51.213

```
throw Request.CreateErrorResponse(HttpStatusCode.NotFound, "My custom message"); 
```

# jquery - 如何将 [object Object] 的实际值传输到输入字段

> ID：13726851
> 
> 赞同：1
> 
> 时间：2012-12-05T15:38:41.280
> 
> 标签：jquery

一个页面在 php 包含的文件中有一个 playscript：（playscript 有数百行）

使用 php，我操纵了 playscript 以包含某些标签
`<lineNo1>, <charName1> and <dialogue1>`

使用`<?php echo $i;$i++;?>`，我增加了整个脚本，所以它有 25 节课，每节课有 10 行对话，每行对话正确显示这些参数，即：

```
<div id="dialogue">
<div id="1">
<Lesson1>Lesson 1</Lesson1>
<lineNo1>1</lineNo1>) <charName1>Sherry</charName1>
<dialogue1>Look at this, I'm shaking.</dialogue1></div></div> 
```

所有这些 php 都经过 250 次迭代后运行良好，但我的 jquery 技能还处于初级阶段，而且我的脚本是伪造的。

单击 时`<Insert>Insert</Insert>`，我需要传输文本值，即“1”、“Sherry”和“Look...shaking”。从标签内部形成文本输入字段，LIne、Speaker 和 LNeX：

```
<div id="LessonNumber1">
<div id="LineNumber1">
<input type="text" name="Line" id="Line" value="" />
<input type="text" name="Speaker" id="Speaker" value="" />
<input type="text" name="LineX" id="LineX" value="" />
</div></div> 
```

下面的我的 jquery 脚本部分工作。第一个输入文本字段“Line”正在接收 ( `<?php echo $LineItem;?>`).text；完美的价值，原因很明显。但其他字段正在接收 [object Object]；我对 [object Object] 的所有研究都让我绕了一圈，最终到了这里。有人能告诉我如何为#Speaker 和#LineX 重写最后两行，以便实际值将出现在表单字段中而不是[object Object] 中吗？

`<script type="text/javascript">`
`$(document).ready(function(){`
`$("Insert").click(function(){`
`$("#TheForm #LessonNumber<?php echo $LineItem;?> #LineNumber<?php echo $LineItem;#Line").val(<?php echo $LineItem;?>).text();`

最后两个是我的问题的例子。
`$("#TheForm #LessonNumber1 #LineNumber1 #Speaker").val("what goes here if not <charName1></charName1>").val();`
`$("#TheForm #LessonNumber1 #LineNumber1 #LineX").val("what goes here if not <dialogue1></dialogue1>").text();});});</script>`

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:23:31.280

**val**和**text**是函数，你必须添加 () 来调用它们并获取它们的结果。如果你只是写**val**或**text**，它是对函数本身的引用（在 js 中，函数是一个对象）。

```
myfield.val( mytext.text() ); 
```

这将使用元素“mytext”中的文本设置输入字段“myfield”的值

尝试在你的代码中做同样的事情

```
$("#TheForm #LessonNumber1 #LineNumber1 #Speaker").val( $('your_selector').text() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:30:07.597

我真的很想解决您的问题，但我无法理解 HTML 和 XML 的疯狂混合。为什么不使用基本的 HTML 标签？

我只能指出您代码中的一些语法问题。也许它会帮助你。

1.  第一个`val`参数没有引号。应该是：`.val("what goes here if not <charName1></charName1>")`。
2.  第二个 val 用作属性，但不用作函数。应该：`.val();`

# css - 移动 div 会留下原始位置的空间？

> ID：13726854
> 
> 赞同：1
> 
> 时间：2012-12-05T15:38:54.790
> 
> 标签：css, html

我有一个 div，我像这样移动它：

```
.x .y {
    position: relative;
    top: 163px;
} 
```

现在，它在最初放置的 div 大小处留下了一个空间。有没有办法摆脱那个空间？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:41:40.653

使用`position: absolute;`代替`position:relative;`...，然后改为`top:163px;`使用`margin-top: 163px;`

**更新**您也可以使用它，`top: 163px;`具体取决于您使用它的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T13:26:53.657

我想`position: absolute`在大多数情况下不是一个选择。

努力做到`float`！

# asp.net - 在gridview中编辑命令出错

> ID：13726856
> 
> 赞同：0
> 
> 时间：2012-12-05T15:38:58.353
> 
> 标签：asp.net

我无法确定导致编辑命令失败的问题

网格视图代码

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    AllowSorting="True" AutoGenerateColumns="False" CellPadding="4" 
    DataKeyNames="Requestid" DataSourceID="SqlDataSource1" ForeColor="#333333" 
    GridLines="None" Height="321px" Width="604px">
    <AlternatingRowStyle BackColor="White" />
    <Columns>
     <asp:CommandField ShowEditButton="True"  UpdateText="Submit" />
        <asp:BoundField DataField="Requestid" HeaderText="Requestid" ReadOnly="True" 
            SortExpression="Requestid" />
        <asp:BoundField DataField="Receiveddate" HeaderText="Receiveddate" 
            SortExpression="Receiveddate" />
        <asp:BoundField DataField="Ctname" HeaderText="Ctname" 
            SortExpression="Ctname" />
        <asp:TemplateField HeaderText="Requestor" SortExpression="Requestor">
            <EditItemTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" 
                    DataSourceID="SqlDataSource2" DataTextField="analystname" 
                    DataValueField="contact_id" SelectedValue='<%# Bind("Requestor") %>'>
                </asp:DropDownList>
                <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:Customers %>"         SelectCommand="SELECT [contact_id], [first_name]+ space(1)+ [last_name] as analystname FROM [contact]
order by contact_id"></asp:SqlDataSource>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("Requestor") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
    <EditRowStyle BackColor="#CC3300" />
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#CBB06D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#EFF3FB" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F5F7FB" />
    <SortedAscendingHeaderStyle BackColor="#6D95E1" />
    <SortedDescendingCellStyle BackColor="#E9EBEF" />
    <SortedDescendingHeaderStyle BackColor="#4870BE" />
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:Customers %>" SelectCommand="SELECT RR.Requestid,Convert(varchar(20),RR.Receiveddate,100) as Receiveddate,RR.Ctname,C.First_Name +Space(1) + C.Last_NAME as Requestor  from report_request_draft RR inner join Contact C on RR.requestor = C.contact_id
where clonedfromid is not null"

UpdateCommand="UPDATE [REPORT_REQUEST_DRAFT] SET  [REQUESTOR] = @Requestor  WHERE [requestid] = @requestid">

</asp:SqlDataSource> 
```

当我单击编辑命令按钮时，它给了我以下错误

**错误**

“DropDownList1”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：value 说明：当前web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentOutOfRangeException：“DropDownList1”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:17:23.093

考虑以下链接，它将帮助您解决问题，它还向您展示了如何在网格视图中完美地绑定**EditItemTemplet 。**我凝聚你使用[***这个***](http://www.codeproject.com/Articles/37207/Editable-Gridview-with-Textbox-CheckBox-Radio-Butt)链接更好地理解网格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:42:35.850

DropDownList 不能以这种方式绑定。通过使用现有的`SelectedValue`绑定，它要求在绑定 GridView 之前绑定 DropDownList，但这是一个逻辑上的不可能，因为在 GridView 完成绑定之前无法绑定 DropDownList。您应该将此逻辑放在`RowDataBound`事件后面的代码中。此时，您应该手动绑定 DropDownList，然后设置其`SelectedValue`属性。

# android - 如何在不丢失 Android 中的粗体、斜体等文本功能的情况下从 Edittext 中保存文本

> ID：13726857
> 
> 赞同：3
> 
> 时间：2012-12-05T15:38:57.360
> 
> 标签：android

我要做的就是从具有粗体和斜体等功能的 Edittext 中获取文本，并将其保存在文本文件中，但是当我读回并显示它时，这些功能会丢失，它们不会显示. 如何通过将文本保存在文本文件或任何文件中来维护丰富的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:48:40.707

您可以使用`Html.toHtml()`将`Editable`您从`getText()`an返回的内容转换`EditText`为 HTML 表示形式。然后，稍后，您可以使用`Html.fromHtml()`将 HTML 转换回可以在`EditText`. `toHtml()`并且`fromHtml()`不处理 使用的每个可能的跨度`EditText`，但它应该处理粗体和斜体等基础知识。

# php - 错误 99 - last.fm php API 调用中的权限被拒绝

> ID：13726859
> 
> 赞同：3
> 
> 时间：2012-12-05T15:39:02.960
> 
> 标签：php, api, last.fm

我正在调用使用 last.fm PHP api 库检索用户的最新曲目。当我在本地网络服务器（localhost）上运行它时，它可以完美运行，但是当我在远程服务器上运行它时，它会发回错误代码 99，表示权限已被拒绝。

这是我的代码：

```
static function readRecentTracks() {
    $authVars['apiKey'] = '#########';
    $auth = new lastfmApiAuth('setsession', $authVars);
    $apiClass = new lastfmApi();
    $packageClass = $apiClass->getPackage($auth, 'user');
    $method_vars = array(
        'user' => 'liquidus219',
        'limit' => 25
    );

    if ($tracks = $packageClass->getRecentTracks($method_vars)) {
        echo json_encode($tracks);
    } else {
        echo '<b>Error '.$packageClass->error['code'].' - </b><i>'.$packageClass->error['desc'].'</i>';
    }
} 
```

您可以在[http://liquidus219.freehostia.com/api/?q=readRecentTracks查看实际代码](http://liquidus219.freehostia.com/api/?q=readRecentTracks)

更新：我已检查/更改应用程序 URL 无效。

更新：我已经浏览了 last.fm PHP api 的代码，没有任何地方定义错误 99 的迹象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:26:49.443

最后我发现我的托管服务提供商阻止了通话。

# c# - 下载一个 XmlDocument

> ID：13726864
> 
> 赞同：0
> 
> 时间：2012-12-05T15:39:15.047
> 
> 标签：c#, asp.net, xml, vb.net

我只想能够按一个按钮并获取要下载的 xmldocument 文件。

我已经尝试了很多事情，例如：

```
XmlDocument doc As XmlDocument() = //Method that gets a xmldocument
Response.Clear()
this.Response.ContentType = "text/xml"
xmldoc.Save(this.Response.OutputStream) 
```

和

```
Dim xmldocument As XmlDocument = //Method that gets a xmldocument
Using stream As MemoryStream = New MemoryStream()
            Dim xmlWriter As XmlTextWriter = New XmlTextWriter(stream, System.Text.Encoding.ASCII)
            xmldocument.WriteTo(xmlWriter)
            xmlWriter.Flush()

            Dim byteArray As Byte() = stream.ToArray()
            Response.Clear()
            Response.AppendHeader("Content-Disposition", "filename=MyExportedFile.xml")
            Response.AppendHeader("Content-Length", byteArray.Length.ToString())
            Response.ContentType = "application/octet-stream"
            Response.BinaryWrite(byteArray)
            xmlWriter.Close()
        End Using 
```

没有任何效果，我是否忘记了一些明显的事情？因为没有任何效果，所以加载了 xmldocument 一切似乎都很好，但文件从不下载，“响应”完全没有任何作用！

Csharp 或 VB.NET 中的答案会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:10:21.990

尝试这样的事情

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(@"
<root name='rootAttribute'>
    <OrderRequest name='one' />
    <OrderRequest name='two' />
    <OrderRequest name='three' />
</root>
"); // Load some random xml - use function to load whatever you need

MemoryStream ms = new MemoryStream();
using (XmlWriter writer = XmlWriter.Create(ms))
{
    doc.WriteTo(writer); // Write to memorystream
}

byte[] data = ms.ToArray();
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.ContentType = "text/xml";
HttpContext.Current.Response.AddHeader("Content-Disposition:",
                    "attachment;filename=" + HttpUtility.UrlEncode("samplefile.xml")); // Replace with name here
HttpContext.Current.Response.BinaryWrite(data);
HttpContext.Current.Response.End();
ms.Flush(); // Probably not needed
ms.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:57:13.560

你有没有尝试过...

```
Response.ContentType = "text/xml"
Response.Write(MethodThatReturnsXMLDoc().innerXml) 
```

# vb.net - 从日期/时间 vb.net 中删除时间

> ID：13726865
> 
> 赞同：7
> 
> 时间：2012-12-05T15:39:14.417
> 
> 标签：vb.net, winforms, datetime, textbox

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Form2.Show()

    Form2.TextBox1.Text = dgv1.CurrentRow.Cells(0).Value.ToString
    Form2.TextBox2.Text = dgv1.CurrentRow.Cells(1).Value.ToString
    Form2.TextBox3.Text = dgv1.CurrentRow.Cells(2).Value.ToString
    Form2.TextBox4.Text = dgv1.CurrentRow.Cells(3).Value.ToString
    Form2.TextBox5.Text = dgv1.CurrentRow.Cells(4).Value.ToString
    Form2.TextBox6.Text = dgv1.CurrentRow.Cells(5).Value.ToString
    Form2.TextBox7.Text = dgv1.CurrentRow.Cells(6).Value.ToString 
```

textbox5 应该只显示日期，但是当我单击按钮时，文本框会显示日期和时间。例如：2012 年 12 月 1 日凌晨 12:00。

如何删除显示在文本框中的时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T05:46:54.373

由于 CurrentCells(4).Value 是一个对象，请尝试将其`DateTime`转换为然后使用[`ToShortDateString Method`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring%28v=vs.100%29.aspx)

```
Form2.TextBox5.Text = CType(dgv1.CurrentRow.Cells(4).Value, DateTime).ToShortDateString 
```

或者如果转换成功，您可以使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)which 将返回 true

```
Dim tempDate As Date
If DateTime.TryParse(CStr(dgv.CurrentRow.Cells(4).Value), tempDate) Then
    Form2.TextBox5.Text = tempDate.ToShortDateString
Else
    Form2.TextBox5.Text = "Invalid Date"
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:41:50.927

尝试...

```
If dgv1.CurrentRow.Cells(4).Value IsNot Nothing
    Form2.TextBox5.Text = String.Format("{0:dd/mm/YYYY}", dgv1.CurrentRow.Cells(4).Value)
Else
    Form2.TextBox5.Text = ""
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:11:44.427

我刚刚删除了这一行中的 .ToString ：

```
Form2.TextBox5.Text = dgv1.CurrentRow.Cells(4).Value.ToString 
```

当我删除 .ToString 时，它只在日期文本框中显示短日期

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T15:42:07.027

有一个日期时间格式功能。检查这个[http://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.71).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-17T02:11:30.820

尝试这个

```
declare MyTime as datetime
Mytime  =  dateadd(day, -datediff(day, 0, Date.now), Date.now) 
```

# iis - 在 Windows 2003 Server 上为 IIS 用户授予写入权限

> ID：13726866
> 
> 赞同：0
> 
> 时间：2012-12-05T15:39:14.490
> 
> 标签：iis, iis-7, iis-6, user-permissions, windows-2003-webserver

我在**Windows 2003 Server**和**IIS6**上运行一个网站，我在某些临时文件夹中写入或删除文件时遇到了问题，获得了这种变暖：

> 警告：取消链接（C:\Inetpub\wwwroot\cakephp\app\tmp\cache\persistent\myapp_cake_core_cake_）：第 254 行 C:\Inetpub\wwwroot\cakephp\lib\Cake\Cache\Engine\FileEngine.php 中的权限被拒绝

我转到`tmp`目录并在属性中为 IIS 用户提供了以下权限：

*   读取和执行
*   列出文件夹内容
*   读

它仍然显示相同的警告。

当我在属性窗口中时，如果单击`Advanced`IIS 用户名会出现两次。

一个具有**允许**类型和**读取和执行**权限，另一个具有**拒绝**类型和**特殊**权限。

我的问题是：我是否应该不仅给这个用户读取和执行权限，还要给这个权限？：

*   创建属性
*   创建文件/写入数据
*   创建文件夹/附加数据
*   删除子文件夹和文件
*   删除

如果我单击`edit`用户名上方的按钮，则可以选择它们。

如果我这样做，我不会打开一个安全漏洞吗？否则，我该如何读取和删除我的网站使用的文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:02:01.537

最后，我所做的是授予*Internet Guest Account*`app\tmp`文件夹的读/写/修改权限。

# jquery-ui - jQuery UI 对话框中的 Google 地图不随滚动而移动（仅限 Chrome）

> ID：13726870
> 
> 赞同：0
> 
> 时间：2012-12-05T15:39:26.467
> 
> 标签：jquery-ui, google-maps, google-chrome

我有一个包含谷歌地图的 jQuery UI 对话框。在 Chrome 中，当您在鼠标上移动滚轮时，地图不会随着对话框的其余部分向下移动，并且部分对话框开始消失。

如果我用谷歌地图删除 div 并滚动鼠标，对话框将保持在屏幕的中心，而背景只会移动。

这在 Firefox 或 IE 中不会发生。

有什么想法可以调试这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T12:33:26.177

它对我有帮助，我已将其添加到我的*Initialize*函数中：

```
var href = window.location.href;
    if (jQuery.browser.webkit && href.search("maps.google") > 0) {
    var childs = document.getElementById("map").childNodes;
    for (var i = 0, l = childs.length; i < l; i++) {
        childs[i].addEventListener("mousewheel", function () { return false; }, false);
    }
} 
```

我已经删除了 =) *google.maps.InfoWindow*

# jquery - 我想使用 jquery 延迟链接

> ID：13726876
> 
> 赞同：0
> 
> 时间：2012-12-05T15:39:36.233
> 
> 标签：jquery, html, scroll, delay

我在页面顶部有一个导航菜单，可在页面内重定向。但是，一些 div 最初是隐藏的，需要 1 秒钟才能显示，因此锚标记不会将浏览器窗口向下移动足够远。我想将链接延迟一秒钟以等待 div 在窗口向下滚动之前可见。

div使用打开

```
$.slideToggle(1000) 
```

导航菜单使用简单的

```
<a href='#divid'>link to divid</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:46:56.030

[http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/) - 根据文档，你有一个回调，它允许你在动画完成时做一些事情。

因此，您可以执行以下操作：

```
$('a').click(function(e){
    e.preventDefault(); //this will prevent immediate scrolling
    $(this.href).slideToggle(1000, function(){ 
                                    document.location.hash = $(this).attr("id")//now hash will be changed and window should be scrolled to according div.
                                  });
}); 
```

假设这会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:47:01.970

使用设置超时功能，并在触发下一个事件之前给它一个延迟。

```
$("#divid").bind("click", function() {
    setTimeout(function() {
        $("#divid").slideToggle(1000);
    },1000);
}); 
```

# jquery - 使用 jquery 定位 node-webkit 浏览器

> ID：13726877
> 
> 赞同：5
> 
> 时间：2012-12-05T15:39:40.773
> 
> 标签：jquery, function, webkit, target, node-webkit

我有一个 node-webkit 应用程序，想知道是否有办法专门针对 node-webkit？只有当客户端浏览器是 node-webkit 时，我才需要运行一些功能。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:00:48.743

我一直在这样做：

```
//detect node-webkit
var isNodeWebkit = (typeof process == "object");

if (isNodeWebkit)
{
    console.log( 'in node-webkit v' + process.versions['node-webkit']);
      //node webkit specific code
} 
```

即，检查“进程”是否是有效的对象引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:50:54.107

也许你可以通过测试告诉它`process.versions['node-webkit']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T21:19:35.310

对于“http://”协议应用程序，我提供了一个 hack 解决方案：0===navigator.plugins.length?!0:!1;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T08:08:56.357

以下逻辑是最精确的：

```
var isNode = (typeof process !== "undefined" && typeof require !== "undefined");
var isNodeWebkit = false;
if (isNode) {
  try {
    isNodeWebkit = (typeof require('nw.gui') !== "undefined");
  } catch(e) {
    isNodeWebkit = false;
  }
} 
```

引用自：[https](https://videlais.com/2014/08/23/lessons-learned-from-detecting-node-webkit/) ://videlais.com/2014/08/23/lessons-learned-from-detecting-node-webkit/ ，感谢作者：）

# asp.net-mvc - ASP.NET MVC 4 全球化

> ID：13726880
> 
> 赞同：0
> 
> 时间：2012-12-05T15:39:52.067
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, multilingual

我是 ASP.NET 的新手，我想设计一个多语言网站。
我想让用户从主页顶部的菜单栏中选择他们的语言，并让他们也可以在网络浏览器的地址栏上看到它。
为此，我将以下代码添加到`RouteConfig`Class ：

```
routes.MapRoute(
        name; "Default",
        url: "{lang}/{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ) 
```

首先我不能设置`CultureInfo`。`CurrentThread`我创建`CultureController`并在那里根据用户的选择设置语言。它不会在其他视图和控制器中改变。（我听说每个用户在进入网站时都会得到一个线程）

```
 public ActionResult ChangeLanguage ( string lang, String returnUrl = null )
        {
            if ( !new[] { "en", "fr", "ar" }.Contains( lang ) )
                throw new ArgumentException( "Language not supported." );

            Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo( lang );

            if ( returnUrl == null )
                return RedirectToAction( "Index", "Home" );

            return Redirect( returnUrl );
        } 
```

第二个问题：现在我也应该在我的链接中传递 lang 而我不想这样做。例如：

```
@Html.ActionLink("About", "About", "Home") 
```

不再起作用了。我希望根据`CultureInfo`存储在`CurrentThread`或会话中填充 lang 参数。（我目前使用 Session ）。（这甚至可能吗？？！！）
我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:03:45.663

1.  像您一样创建一个更改语言的操作
2.  从您的列表中选择一种语言或默认语言（不要抛出异常！）
3.  将其存储在 cookie 中
4.  重定向到引用站点（不需要通过参数传递）
5.  通过读取 cookie 在 Controller Initialize 方法中设置线程的语言（创建一个基本的 Controller 类来执行此操作）（如果不存在或无效设置默认值，再次发送 cookie）

# java - 如何知道服务器何时在 java 中更新我的 HashMap

> ID：13726881
> 
> 赞同：1
> 
> 时间：2012-12-05T15:39:52.393
> 
> 标签：java, wait

我有一个客户端（比如客户）向服务器端发送请求（RequestID 为 1）并接收已发送请求的确认。我的服务器端（比如 SomeStore）处理请求 1 并发送给客户并接收确认（或重新发送 3 次）。我有另一个线程在听客户。收到客户的侦听器线程后，应在键 1 处更新 HashMap。我所需要的只是等待并在键 1 处检索此更新后的值。

我有一个来自线程池的线程来发送请求并在两端接收确认。我看到两个线程都执行发送过程。我还有一个用于监听器的线程池。收到 ack 后，如果我让我的主线程在 while 循环中等待，我看不到侦听器的更新。（在这里我无法使用 wait()）。我不明白这种行为。两个线程不应该工作吗？

我尝试更改我的实现并在接收并与 myHashMap.get(key) 上的 this.wait() 和 myHashMap.set(key, value) 上的 this.notify() 同步时创建了一个单独的类。它工作了几次，但并非总是如此。我的理解是，这取决于哪个线程首先获得锁。

我怎么能同时等待和倾听？也许我正在监督一些明显的事情......很容易收到回复而不是确认，但我的请求在网络中丢失了。因此使用 ack。我已经在使用 Callable<> 进行确认。任何想法表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:45:17.280

我怀疑您没有使用线程安全访问地图。

如果它不是 ConcurrentHashMap 并且您没有使用同步，则无法保证您将看到 HashMap 中的更改。

我建议您不要使用等待/通知和您自己的线程，而是使用 ConcurrentHashMap 和[ExecutorService](http://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html)并添加任务来执行更新。这将确保您处理并查看每个更新。

# ruby - RestClient.send 在哪里定义？

> ID：13726883
> 
> 赞同：3
> 
> 时间：2012-12-05T15:39:58.947
> 
> 标签：ruby, rest, client

我试图了解 RestClient.send 的定义无济于事:-(

让我向你解释我的意思：

我一直在检查 iqengines.com ruby​​ api gem，他们使用 RestClient.send 调用他们的 api：

[https://github.com/iqengines/ruby-iqengines/blob/master/lib/iqengines.rb](https://github.com/iqengines/ruby-iqengines/blob/master/lib/iqengines.rb)

现在他们使用 RestClient gem 和这个调用来发送 http 请求：
response = RestClient.send(method, url, fields)

我查看了rest_client gem [https://github.com/archiloque/rest-client](https://github.com/archiloque/rest-client)，我无法理解rest-client gem 定义 RestClient.send(...) 方法的位置！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:00:55.350

`send`方法是 Ruby 的一部分。见这里：[http ://ruby-doc.org/core-1.9.3/Object.html#method-i-send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

# javascript - 在锚点处更改滚动方向

> ID：13726887
> 
> 赞同：2
> 
> 时间：2012-12-05T15:40:08.110
> 
> 标签：javascript, jquery

在我的网站上，我有 6 个 div，每个 div 与浏览器窗口的高度和宽度相同，所以 5 个不在视野范围内，3 个左对齐，然后 3 个在顶部，所以......

![在此处输入图像描述](../Images/c8e6f235b7310a919f92cb081ca0a4c2.png)

当我的访客滚动时，id 喜欢滚动到第 3 个 div，然后向上滚动到第 4 个，然后继续水平滚动。jQuery可以做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:50:28.347

看一下这个。它允许您向不同方向滚动并像上面一样设置“幻灯片”

[http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:44:33.383

简单（也许有帮助）但并不完美：

```
var win = $(window),
    doc = $(document),
    bodyH = doc.height() - win.height(),
    page4 = $('#page4');

win.scrollTop(bodyH);

$(document).on('DOMMouseScroll mousewheel', function(e, delta) {
    delta = delta || -e.originalEvent.detail / 3 || e.originalEvent.wheelDelta / 120;

    if(delta < 0) {
        if(win.scrollLeft() > page4.offset().left && win.scrollTop() !== 0) {
            win.scrollTop(win.scrollTop() + delta * 30);
        } else {
            win.scrollLeft(win.scrollLeft() - delta * 30);
        }
    } else {
        if(win.scrollLeft() < page4.offset().left && (win.scrollTop() > 0 || win.scrollTop() === 0) && win.scrollTop() !== bodyH) {
            win.scrollTop(win.scrollTop() + delta * 30);
        } else {
            win.scrollLeft(win.scrollLeft() - delta * 30);
        }
    }

    e.preventDefault();
}); 
```

**[演示](http://jsfiddle.net/ARTsinn/EaUeF/)**

# mysql - MySQL 查询使用 4 个表，LEFT JOINs 和 WHERE EXISTS

> ID：13726889
> 
> 赞同：0
> 
> 时间：2012-12-05T15:40:08.777
> 
> 标签：mysql, join, exists

我总共需要使用四 (4) 个表。本质上，一个从另一个拉取数据，从另一个拉取数据以获取以前的表数据，依此类推。

我无法获得将成功运行而不会超时的查询。我想显示商品的`SUM`of`VISITS`及其在给定时间段内的总`ORDER`销售额`MONTH`

**表结构**

```
table1 (WebVisits)
ID   DATE        WEBNUMBER  VISITS
1    2012-01-01  apw-rtr8   2
..   ...         ...        ..

table2 (Commodities)
ID      WEBNUMBER   TIER1
5791    apw-rtr8    Refrigeration
..      ...         ...

table3 (Attributes)
ITEM        WEB_NUM
APW-RTR-8   apw-rtr8
..          ...

table4 (SalesData)
ID     ITEM        QUANTITY  UNIT_PRICE  TRANS_DATE
31905  APW-RTR-8   1         1522.38     2012-02-05
..     ...         ...       ...         ...

SELECT 
    MONTH(t1.DATE) AS MONTH, 
    SUM(t1.VISITS) as Visits,
    t2.TIER1 as Category
FROM
    table1 t1
        LEFT JOIN
    table2 t2 ON t1.WEBNUMBER = t2.WEBNUMBER
        LEFT JOIN
    table3 t3 ON t2.WEBNUMBER = t3.WEB_NUM
WHERE
    t1.DATE BETWEEN '2012-01-01' AND '2012-05-31'
        AND t3.TIER1 = 'Cooking Equipment '
        AND EXISTS( SELECT 
            sum(t4.UNIT_PRICE * t4.QUANTITY) as total
        FROM
            table4 t4
        WHERE
            t4.ITEM = t3.ITEM
                AND t4.TRANS_DATE BETWEEN '2012-01-01' AND '2012-05-31')
GROUP BY MONTH
ORDER BY MONTH 
```

基本上类别 (TIER1) 将是已知的并且日期范围将是已知的。鉴于上面的查询，我希望它吐出与此类似的结果：

```
MONTH   Visits  Total     Category
1       4054    32058.08  Cooking Equipment 
2       3564    28116.17  Cooking Equipment 
3       4514    25819.66  Cooking Equipment 
4       3621    18732.96  Cooking Equipment 
5       6521    55378.11  Cooking Equipment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:50:52.350

我开始编写查询并意识到我编写的查询与您编写的几乎相同。

确保`indexes`存在以下内容：

```
table1.DATE
table1.WEBNUMBER
table2.WEBNUMBER
table3.WEB_NUM
table4.ITEM
table4.TRANS_DATE 
```

编辑：

试试这个：

```
SELECT 
    MONTH(table1.DATE) AS MONTH, 
    SUM(table1.VISITS) as Visits, 
    table2.TIER1 as Category, 
    SUM(table4.UNIT_PRICE * table4.QUANTITY) 
FROM table1 
LEFT JOIN table2 USING(WEBNUMBER) 
LEFT JOIN table3 table1.WEBNUMBER = table3.WEB_NUM 
LEFT JOIN table4 table1.WEBNUMBER = table4.ITEM 
WHERE table2.TIER1 = 'Cooking Equipment' 
AND table4.TRANS_DATE BETWEEN '2012-01-01' 
AND '2012-05-31' 
GROUP BY MONTH 
ORDER BY MONTH 
```

# python - Django联系表单邮件错误：协议请求不支持地址系列

> ID：13726890
> 
> 赞同：3
> 
> 时间：2012-12-05T15:40:10.777
> 
> 标签：python, django

我在我的网站中使用 Django 作为联系表。提交时出现问题

```
[Errno 97] Address family not supported by protocol
Request Method: POST
Request URL:    http://site.com/accept
Django Version: 1.3.1
Exception Type: error
Exception Value:    
[Errno 97] Address family not supported by protocol
Exception Location: /usr/lib64/python2.6/socket.py in create_connection, line 567
Python Executable:  /usr/local/bin/python
Python Version: 2.6.6 
```

这是我的设置：

```
EMAIL_HOST = 'smtp.gmail.com'

EMAIL_PORT = 587

EMAIL_HOST_USER = 'myemail@gmail.com'

EMAIL_HOST_PASSWORD = 'mypassword'

EMAIL_USE_TLS = True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T17:43:13.907

这似乎与您的设置无关，而与您的服务器配置有关。有些服务会与 IPv6 混淆（就像在[这个答案](https://stackoverflow.com/a/8549132/190887)中一样）。您应该尝试通过侦听 IPv4 地址来运行 Web 服务器和 SMTP 服务器。

2014 年，问题应该得到解决，因为库和框架已经更新，应该被用来操作 IPv6 地址。

# windows - 如何通过 cmd 运行 zip，但找不到它？

> ID：13726891
> 
> 赞同：3
> 
> 时间：2012-12-05T15:40:12.620
> 
> 标签：windows, zip, cmd, gzip

`zip is not recognized as an internal or external command`

我在哪里可以`zip`在我的机器上找到以便运行

'zip' cmd?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:05:00.370

您需要安装应用程序。稍后，将所在的文件夹添加到系统 PATH 环境变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-18T07:31:31.097

我必须运行一个 bat 文件，其中包含要执行的 zip 命令，我曾经得到“'zip' 不被识别为内部或外部命令、可运行程序或批处理文件”。

我去了[http://stahlworks.com/dev/index.php?tool=zipunzip](http://stahlworks.com/dev/index.php?tool=zipunzip)，下载了 zip.exe 并将其设置在环境变量中，它现在对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-31T11:02:53.867

下面的方法对我有用。

默认情况下，Windows 不支持 zip 命令。相反，安装第三方软件，如 7-zip。如果您使用的是 npm，则将“7z.exe”复制到安装 npm 的文件夹中。就我而言，npm 安装在“C:\Users\user-name\AppData\Roaming\npm”下

# php - 在 MySQL 中保存为 BLOB 后获取不同的图像

> ID：13726892
> 
> 赞同：0
> 
> 时间：2012-12-05T15:40:13.330
> 
> 标签：php, mysql, blob

我刚刚保存了一张图片（PNG，200x209）

```
$img = chunk_split(base64_encode(file_get_contents("image.png")));
$sql = "INSERT INTO table (img) VALUES ('$img') WHERE userid = 10";
mysql_query($sql); 
```

（img 有 MEDIUMBLOB 类型）

然后尝试获取它（show.php）：

```
header("Content-type: image/jpeg");

$sql = "SELECT img FROM table WHERE userid = 10 LIMIT 1";
$res = mysql_query($sql);
while ($row = mysql_fetch_assoc($res)) {
    $image = base64_decode($row['img']);
}

echo $image; 
```

请求**show.php**时，它给出了几乎相同的图像，但尺寸不同：136x94 =)

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:44:11.123

我建议您**按原样保存图像**。MySQL的**BLOB 数据类型专门用于二进制数据**。这个图像是一个二进制文件。并删除 base64 编码。它只是增加了数据大小。

在代码中，您正在保存 png 图像但输出 jpeg。两种内容类型应该相同。

所以插入代码会是这样的，

```
$img = file_get_contents("image.png");
$sql = "INSERT INTO table (img) VALUES ('$img') WHERE userid = 10";
mysql_query($sql); 
```

并将其显示为

```
header("Content-type: image/png");

$sql = "SELECT img FROM table WHERE userid = 10 LIMIT 1";
$res = mysql_query($sql);
echo mysql_result($res, 0); 
```

# jquery - 我使用 JQplot 绘制了一些图表。现在，当我将鼠标悬停在 JQplot 条形图中的各个条上时，应该显示一些值

> ID：13726893
> 
> 赞同：1
> 
> 时间：2012-12-05T15:40:13.783
> 
> 标签：jquery

我使用 JQplot 绘制了一些图表。现在当我将鼠标悬停在条形图中的各个条上时，应该显示一些值..请帮助

我的图表如下...

```
$(document).ready(function(){
  var line1 = [['Content Of The Training', 2.2], ['Relavance Of Training To The Work Place', 3.5], ['Phase Of The Training', 3.2], 
  ['Session Met The Objectives Stated', 3.4], [' The Session Met My Exceptations', 3], 
  ['Overall Ratining On the Training', 3.6]];

  var plot1 = $.jqplot('graph1', [line1], {
    title: 'Rating On Training',
    series:[{renderer:$.jqplot.BarRenderer}],
    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
        tickOptions: {
        fontFamily: 'Calibri',
          angle: -30,
          fontSize: '10pt'
        }
    },

    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer
      }
    },
        canvasOverlay: {
      show: true,
      objects: [
        {horizontalLine: {
          name: 'pebbles',
          y: 2.5,
          lineWidth: 2,
          color: 'rgb(255, 0, 0)',
          shadow: true,
          lineCap: 'butt',
          xOffset: 0
        }},

      ]
    }
  });
}); 
```

对于插件，从以下链接下载 jplot

[http://www.jqplot.com/tests/bar-charts.php](http://www.jqplot.com/tests/bar-charts.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:50:22.413

您可以使用`jqplotDataMouseOver`事件。

这里的文档：[http ://www.jqplot.com/deploy/dist/examples/barTest.html](http://www.jqplot.com/deploy/dist/examples/barTest.html)

`#info`此示例使用有关您单击的栏的信息填充容器。您应该能够从`ev`参数中获取鼠标坐标并使用它。

```
$('#graph1').bind('jqplotDataMouseOver', 
     function (ev, seriesIndex, pointIndex, data) {
                $('#info').html('series: ' + seriesIndex + ', point: ' + pointIndex + ', data: ' + data);
     }
); 
```

你也可以看看这个： [http ://www.jqplot.com/docs/files/plugins/jqplot-highlighter-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-highlighter-js.html)

它显示了如何启用工具提示。我不确定它是否适用于各种图表。

# r - strptime、as.POSIXct 和 as.Date 返回意外的 NA

> ID：13726894
> 
> 赞同：18
> 
> 时间：2012-12-05T15:40:17.300
> 
> 标签：r, macos, datetime, strptime, r-faq

当我尝试解析以下格式的时间戳时：“Thu Nov 8 15:41:45 2012”，仅`NA`返回。

我正在使用 Mac OS X、R 2.15.2 和 Rstudio 0.97.237。我的操作系统的语言是荷兰语：我认为这与它有关。

当我尝试`strptime`时，`NA`返回：

```
var <- "Thu Nov 8 15:41:45 2012"
strptime(var, "%a %b %d %H:%M:%S %Y")
# [1] NA 
```

两者都`as.POSIXct`不起作用：

```
as.POSIXct(var, "%a %b %d %H:%M:%S %Y")
# [1] NA 
```

我还尝试`as.Date`了上面的字符串，但没有`%H:%M:%S`组件：

```
as.Date("Thu Nov 8 2012", "%a %b %d %Y")
# [1] NA 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T15:48:13.030

我认为正如您所猜测的那样，`strptime`由于您的语言环境而无法解析您的日期时间字符串。您的字符串包含缩写的工作日 ( `%a`) 和缩写的月份名称 ( `%b`)。这些时间规范描述于`?strptime`：

> **细节**
> 
> `%a`*:此平台上当前语言环境中的*缩写工作日名称
> 
>  *`%b`*:此平台上当前语言环境中的*缩写月份名称。
> 
> “请注意，缩写名称是特定于平台的（尽管标准规定在`C`区域设置中它们必须是大写英文名称的前三个字母：”
> 
> “如果您希望使用或作为输入格式的一部分，了解缩写是必不可少的：请参阅示例以了解如何检查`%a`。” `%b``%h`
> 
> **也可以看看**
> 
> [...]`locales`查询或设置语言环境。*

 *的问题`locales`也与 和`as.POSIXct`相关。`as.POSIXlt``as.Date`

来自`?as.POSIXct`：

> **细节**
> 
> 如果`format`指定了，请记住某些格式规范是特定于语言环境的，您可能需要 `LC_TIME`通过`Sys.setlocale`. 这通常会影响`%b`, `%B`（月份名称）和`%p`(AM/PM) 的使用。

来自`?as.Date`：

> **细节**
> 
> 在适当和可用的情况下使用特定于区域设置的字符串与字符串之间的转换。这会影响日期和月份的名称。

* * *

因此，如果字符串中的工作日和月份名称与当前语言环境中的不同，`strptime`,`as.POSIXct`并且`as.Date`无法正确解析字符串并`NA`返回。

但是，您可以通过更改以下内容来解决此问题`locales`：

```
# First save your current locale
loc <- Sys.getlocale("LC_TIME")

# Set correct locale for the strings to be parsed
# (in this particular case: English)
# so that weekdays (e.g "Thu") and abbreviated month (e.g "Nov") are recognized
Sys.setlocale("LC_TIME", "en_GB.UTF-8")
# or
Sys.setlocale("LC_TIME", "C") 

#Then proceed as you intended
x <- "Thu Nov 8 15:41:45 2012" 
strptime(x, "%a %b %d %H:%M:%S %Y")
# [1] "2012-11-08 15:41:45"

# Then set back to your old locale
Sys.setlocale("LC_TIME", loc) 
```

使用我的个人语言环境，我可以重现您的错误：

```
Sys.setlocale("LC_TIME", loc)
# [1] "fr_FR.UTF-8"

strptime(var,"%a %b %d %H:%M:%S %Y")
# [1] NA 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-05T10:42:12.060

只是在解决同样的问题，发现这个解决方案更干净，因为不需要手动更改任何系统设置，因为包中有一个包装函数在做这项工作，`lubridate`你所要做的就是设置论点`locale`：

```
date <- c("23\. juni 2014", "1\. november 2014", "8\. marts 2014", "16\. juni 2014", "12\. december 2014", "13\. august 2014")
df$date <- dmy(df$Date, locale = "Danish")
[1] "2014-06-23" "2014-11-01" "2014-03-08" "2014-06-16" "2014-12-12" "2014-08-13" 
```*

# actionscript-3 - MouseEvent 在文档类中不起作用

> ID：13726899
> 
> 赞同：1
> 
> 时间：2012-12-05T15:40:34.593
> 
> 标签：actionscript-3, flash, air

是的，我在这里看到了一些关于类似问题的主题，但我的问题不同。我在 FlashDevelop 中建立了一个 AIR 项目并写了这个：

```
package {
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Main extends Sprite {     
        public function Main():void {
            graphics.beginFill(0)
            graphics.drawRect(0, 0, 100, 100)
            graphics.endFill()
            addEventListener(MouseEvent.CLICK, onEvt)
        }
        private function onEvt(e:MouseEvent):void {
            trace("yahoo")
        }
    }
} 
```

我编译了这个项目，点击黑色方块，什么也没发生。没有什么。然后我将所有这些代码移到另一个类 RealMain 并将其添加为子类：

```
public function Main():void {
    addChild(new RealMain())
} 
```

它奏效了。那么，如果类是文档类，为什么我的事件监听器不起作用？是的，我可以使用 stage.addEventListener()，但为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:00:47.237

尝试不使用 Sprite 的图形属性，而是制作一个 Shape，在其上绘制并将其 addChild() 添加到您的 Sprite。我希望具有零个子项的 Sprite 表现得像一个形状，而形状本身不能监听事件。

```
public class Main extends Sprite {     
    public function Main():void {
        var sh:Shape=new Shape();
        sh.graphics.beginFill(0);
        sh.graphics.drawRect(0, 0, 100, 100);
        sh.graphics.endFill();
        addChild(sh);
        addEventListener(MouseEvent.CLICK, onEvt);
    }
    private function onEvt(e:MouseEvent):void {
        trace("yahoo");
    }
} 
```

应该以这种方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:43:36.177

addEventListener 是 EventDispatcher 类的函数，需要调用 EventDispatcher 的实例。

Main 的行为有所不同，因为它以静态方式调用。为了有一个 Main 的实例，我们必须做一些像下面这样的工作（不是很优雅）

```
package {
    import flash.display.Stage;
    import flash.display.MovieClip;
    public class Main extends MovieClip {
        private static var _instance:Main = null;
        public function Main() {
            _instance = this;
        }
        public static function getInstance():Main { return _instance; }
        public static function getStage():Stage { return getInstance().stage; }
    }
} 
```

addchild 有助于创建一个普通的类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T00:47:32.677

文档类必须不`MovieClip`扩展`Sprite`

# javascript - 如果找到匹配项，则 Javascript 搜索并用新字符串替换

> ID：13726901
> 
> 赞同：1
> 
> 时间：2012-12-05T15:40:39.470
> 
> 标签：javascript

我想搜索地址字符串。

如果找到“ Southeast”，则将其替换为“ SE”；

如果找到“西南”，则将其替换为“西南”；

如果找到“东北”，则将其替换为“NE”；

如果找到“东北”，则将其替换为“西北”。

这是我到目前为止所做的：

```
 var searchStr = [" Southeast ", " Southwest ", " Northeast ", " Northwest "];
 var replaceStr = [" SE ", " SW ", " NE ", " NW "];
 var oldAddress = $("#address").text();

 for (i=0;i<searchStr.length;i++){
     var n = oldAddress.match(/this[i]/g);
         if(n != null){
            $("#address").text(replaceStr[i]);  
         }                        
 } 
```

它什么也没做，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:47:33.327

```
var newAddress = oldAddress
                    .replace("Southeast", "SE")
                    .replace("Southwest", "SW")
                    .replace("Northeast", "NE")
                    .replace("Northwest", "NW");
$("#address").text(newAddress); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:47:46.153

```
$("#address").text(function(i, text) {
    $.each({
        "Southeast": "SE",
        "Southwest": "SW",
        "Northeast": "NE",
        "Northwest": "NW"
    }, function(k, v) {
        var regex = new RegExp('" ' + k + ' "', "ig");
        text = text.replace(regex, '" ' + v + ' "');
    });
    return text;
});​ 
```

**演示：http:** [//jsfiddle.net/rKK89/1/](http://jsfiddle.net/rKK89/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:03:48.033

除了现有的答案，你也可以这样做： -

```
 var searchStr = [" Southeast ", " Southwest ", " Northeast ", " Northwest "];
 var replaceStr = [" SE ", " SW ", " NE ", " NW "];
 var oldAddress = $("#address").text();

 for (i=0;i<searchStr.length;i++){
     oldAddress = oldAddress.replace(searchStr[i], replaceStr[i]);
 }
 $("#replaced").text(oldAddress); 
```

## 示例 HTML：

```
<div id="address">First I went to Southeast , next to Northwest , next to Southwest and finally to Northeast </div>
<br/>
Updated content is here:
<br/>
<div id="replaced"></div> 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/hu9z4/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:04:44.697

```
 var r = {
   southeast: 'SE',
   southwest: 'SW',
   northeast: 'NE',
   northwest: 'NW'
 };

 $("#address").text ($("#address").text().replace (
   RegExp (Object.keys (r).join ('|'), 'ig'), 
   function (m) { return r[m.toLowerCase ()]; }));​ 
```

[请参阅http://jsfiddle.net/fJ7Vf/](http://jsfiddle.net/fJ7Vf/)上的小提琴

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T16:05:22.557

我不知道你想用 this[i] 做什么，但即使你在那个地方写 searchStr[i] 它也行不通。因为您正在那里创建一个字符串。为了使其工作，您需要创建一个正则表达式对象

试试这个代码

```
var searchStr = [" Southeast ", " Southwest ", " Northeast ", " Northwest "];
var replaceStr = [" SE ", " SW ", " NE ", " NW "];
var oldAddress = $("#address").text();

for (var i=0;i<searchStr.length;i++){
var pattern =new RegExp(searchStr[i]);
    var n = oldAddress.match(pattern);
       if(n != null){
            $("#address").text(replaceStr[i]);  
         }                         
} 
```

# android - Android - 带有 k9mail 的 OpenSSL 安全证书

> ID：13726902
> 
> 赞同：0
> 
> 时间：2012-12-05T15:40:43.523
> 
> 标签：android, openssl

我正在为我的电子邮件客户端应用程序使用 k9mail(Android) 开源。目标是，用户只能通过 SSL 安全访问我的电子邮件服务器。所以我需要在我的电子邮件客户端中安装 SSL 证书。我想在客户端安装 SSL 证书的最佳方式是什么？

（即）当客户端与服务器通信时从我的服务器安装它（或）当我开发应用程序时将它安装在我的客户端中。你能给出你的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:54:14.753

**简短回答**：开发时将其安装/包含在客户端应用程序中。当客户端与其通信时，您不应该从服务器安装它 - 这不是正确的方法（安全方面）。

**长答案**：服务器证书必须以安全的方式传输到客户端。那是为了避免攻击者用他自己的证书替换它，以便稍后它会假装他，攻击者，是邮件服务器（中间人攻击）。如果您只是在客户端与服务器通信时在客户端上下载证书，我们无法证明您认为是您的服务器的实体确实是您的服务器，除非您已经与它建立了一个安全（加密/认证）通道（在这种情况下如果您已经拥有该安全连接，则无论如何都不需要您的证书）。

因此，您必须事先生成服务器证书并将其包含在应用程序中。另一种方法是通过物理介质或其他安全通道传输它（这实际上没有意义..）

# c# - HTML 敏捷包替换链接

> ID：13726907
> 
> 赞同：3
> 
> 时间：2012-12-05T15:40:56.380
> 
> 标签：c#, .net, html-agility-pack

我有一些使用 HTML Agility Pack 的代码。我想要做的是，替换 html 内容中的所有链接。

例如：我将替换

```
http://oldserver/Documents/1.pdf 
```

到

```
http://newserver/Documents/2.pdf 
```

我可以枚举所有链接并获取它们的值，但是当我执行 doc.Save() 时，它会保存原始的 html 源代码。不是更新的html。如何从 HtmlDocument 获取更新的 html。

```
private string FixHyperlinks(string contentHtml, SPWeb web)
    {
        TextReader reader = new StringReader(contentHtml);

        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.Load(reader);

        List<string> hrefTags = new List<string>();

        foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
        {
            HtmlAttribute att = link.Attributes["href"];
            att.Value = RepairHyperlinkAddress(att.Value, web);
        }

        MemoryStream memoryStream = new MemoryStream();
        doc.Save(memoryStream);
        memoryStream.Seek(0, System.IO.SeekOrigin.Begin);
        StreamReader streamReader = new StreamReader(memoryStream);
        string result = streamReader.ReadToEnd();

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:26:10.803

这应该会更好：

```
foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
        {
            HtmlAttribute att = link.Attributes["href"];
            att.Value = RepairHyperlinkAddress(att.Value, web);
        }

foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//img[@src]"))
        {
            HtmlAttribute att = link.Attributes["src"];
            att.Value = RepairHyperlinkAddress(att.Value, web);
        } 
```

# sql - SQL：如何从一个表中为另一个表中的每一行获取随机数行

> ID：13726911
> 
> 赞同：4
> 
> 时间：2012-12-05T15:41:18.900
> 
> 标签：sql, sql-server-2008, random

我有两个数据不相关的表对于表 A 中的每一行我想要例如表 B 中的 3 个随机行

使用游标相当容易，但速度非常慢

那么如何在单个语句中表达这一点以避免 RBAR 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:44:11.607

要获得 0 和 (N-1) 之间的随机数，可以使用。

```
abs(checksum(newid())) % N 
```

这意味着要获得正值 1-N，您可以使用

```
1 + abs(checksum(newid())) % N 
```

*注意：`RAND()`不起作用 - 每个查询批次都会对其进行一次评估，并且对于 tableA 的所有行，您都会遇到相同的值。*

查询：

```
SELECT *
  FROM tableA A
  JOIN (select *, rn=row_number() over (order by newid())
          from tableB) B ON B.rn <= 1 + abs(checksum(newid())) % 9 
```

*（假设您想要每个 A 最多 9 个随机 B 行）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:49:34.857

假设 tableB 具有整数代理键，请尝试

```
 Declare @maxRecs integer = 11 -- Maximum number of b records per a record
 Select a.*, b.*
 From tableA a Join tableB b
     On b.PKColumn % (floor(Rand() * @maxRecs)) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:55:11.620

如果你有一个预先知道的固定数字（比如 3），那么：

```
select a.*, b.*
from a cross join
     (select top 3 * from b) b 
```

如果你想为“a”中的每一行从“b”随机数行，那么在 SQL Server 中问题会有点困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:09:41.693

这是一个如何做到这一点的示例，代码是自包含的，复制并按 F5 ;)

```
-- create two tables we can join 
DECLARE @datatable TABLE(ID INT)
DECLARE @randomtable TABLE(ID INT)

-- add some dummy data
DECLARE @i INT = 1
WHILE(@i < 3) BEGIN
    INSERT INTO @datatable (ID) VALUES (@i)
    SET @i = @i + 1
END 

SET @i = 1
WHILE(@i < 100) BEGIN
    INSERT INTO @randomtable (ID) VALUES (@i)
    SET @i = @i + 1
END 

--The key here being the ORDER BY newid() which makes sure that 
--the TOP 3 is different every time
SELECT 
    d.ID AS DataID
    ,rtable.ID RandomRow
FROM @datatable d
LEFT JOIN (SELECT TOP 3 * FROM @randomtable ORDER BY newid()) as rtable ON 1 = 1 
```

这是输出的示例

![随机行](../Images/0e1f2448eb48225af6a4a6b9e1f1c0b9.png)

# html - 如何修复 Wordpress 网站背景图片？

> ID：13726912
> 
> 赞同：0
> 
> 时间：2012-12-05T15:41:20.820
> 
> 标签：html, css, wordpress

我有一个需要像其他网站一样修复的网站。

请看我的网站。我想要固定的背景，但滚动显示不固定：

[http://mikekingusa.com/](http://mikekingusa.com/)

我想做这个网站背景：[http ://wikiwarnings.com/](http://wikiwarnings.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:45:01.843

将其添加到您的身体 css

`background-attachment: fixed;`

# javascript - 编译的 WebDriverJS 中的“assertEquals 未定义”

> ID：13726920
> 
> 赞同：0
> 
> 时间：2012-12-05T15:41:55.157
> 
> 标签：javascript, webdriver, selenium-webdriver

我的 webDriverJS 库有问题。

我已经下载了项目并构建了 js 文件“webdriver.js”，如[wiki](http://code.google.com/p/selenium/wiki/WebDriverJs#In_the_Browser)和这篇文章[Selenium WebDriverJS Using in Browser](https://stackoverflow.com/questions/12870004/selenium-webdriverjs-using-in-browser)

但我的问题是我不能使用函数“assertEquals”。我有错误

```
"assertEquals is not defined" 
```

您知道如何在构建文件中包含单元测试功能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T02:16:08.763

我相信 WebDriverJS 文档中引用的 assertEquals 函数只是用于演示目的。它不是 webdriverJS 库的一部分，您需要自己实现或替换为断言库。因此，它未定义的错误消息。

以下是您可以使用的非常详尽的断言库列表：[独立断言库？](https://stackoverflow.com/questions/10472152/standalone-assertion-libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:34:33.813

您可以从以下代码中获得灵感，该代码显示了带有 Jasmine 的 WebDriverJS 示例用于断言：[https ://github.com/ericminio/webdriverjs-with-jasmine](https://github.com/ericminio/webdriverjs-with-jasmine)

希望能帮助到你

# arrays - 对数组进行分组

> ID：13726922
> 
> 赞同：1
> 
> 时间：2012-12-05T15:41:56.737
> 
> 标签：arrays, pseudocode, mumps

请...帮我把这个数组中的值分组

我有一个这样的数组

```
 Arr(0) = 5
    Arr(1) = ATC^1
    Arr(2) = BTC^2
    Arr(3) = ATC^3
    Arr(4) = CTC^4
    Arr(5) = BTC^5 
```

我想要的最终结果是将 Arr(0) 更改为 3，这是组中唯一 TC 的数量。ATC、BTC 和 CTC。我希望 1,2 和 3 的每个项目都具有数组中的分组值。

```
 Arr(0) = 3
    Arr(1) = ATC:1,3
    Arr(2) = BTC:2,5
    Arr(3) = CTC:4 
```

我正在尝试在 MUMP 中执行此操作，因此我没有内置的排序/分组功能。

即使是伪代码也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:56:05.117

备用：

二维数组：

```
Temp("ATC",1)=""
Temp("ATC",3)=""
Temp("BTC",2)=""
Temp("BTC",5)=""
Temp("CTC",4)="" 
```

`$o`循环可以按排序顺序查看第一级的项目，然后嵌套遍历`$o`第二级。或者，如果您只想要排序列表，则只是第一个。如果您要有选择地从列表中删除元素并让您设置和删除数组中的音符，这将保存字符串逻辑。

排序逻辑并不常见`MUMPS`，数据通常被加载/存储到数组中，这样可以使它们保持排序顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T05:42:25.887

在 MUMPS 中，您不需要排序功能，因为数组下标会自动排序。

所以最简单的方法是创建另一个数组，排序维度是第一条数据和值 - 第二条数据：

```
for i=1:1:Arr(0) set piece1=$piece(Arr(i),"^",1), piece2=$piece(Arr(i),"^",2), Temp(piece1)=$get(Temp(piece1))_piece2_"," 
```

运行该代码后，您将获得以下数组

```
Temp("ATC")="1,3,"
Temp("BTC")="2,5,"
Temp("CTC")="4," 
```

然后您遍历该数组并构建您需要的数组：

```
set i="",Brr=0 for  set i=$o(Temp(i)) quit:i=""  set Brr=Brr+1,Brr(Brr)=i_":"_Temp(i) 
```

你会得到一个你需要的数组：

```
Brr(1)="ATC:1,3,"
Brr(2)="BTC:2,5,"
Brr(3)="CTC:4," 
```

# c++ - 在 ifstream 对象上调用 close 时出现分段错误

> ID：13726924
> 
> 赞同：0
> 
> 时间：2012-12-05T15:42:02.277
> 
> 标签：c++, file-io, ifstream

我正在尝试将文本文件读入二维字符数组。当我在提取数据后对 ifstream 对象调用 close 时，出现分段错误。

这有效：

```
problem::problem(obj *o1, obj* o2, char *state_file)
{
ifstream infile;
string line;
infile.open(state_file, ios::in);
getline(infile,line);
infile.close();
} 
```

这不是：

```
problem::problem(obj *o1, obj* o2, char *state_file)
{

ifstream infile;
string line;

//data is char data[6][7] and is declared in the header
//line is EXACTLY 7 characters lone

infile.open(state_file, ios::in);
for(int i = 5;i >= 0;i--)
{
    getline(infile,line);
    for(int j = 0;j < 7;j++)
        data[i][j] = line[j];
}
cerr << "PROGRAM OK" << endl;
infile.close();
cerr << "The program doesn't get here" << endl;
//Some more constructor code    

} 
```

为什么我在调用 infile.close() 时会出现分段错误？

使用相同输入文件的 SSCCE 版本：

```
#include <string>
#include <fstream>

using namespace std;

class func
{
    public:
        func(char *);   
    private:
        char data[6][7];

};

func::func(char *state_file)
{
    ifstream infile;
    string line;

    infile.open(state_file, ios::in);   
        for(int i = 5;i >= 0;i--)
    {
        getline(infile,line);
        for(int j = 0;j < 7;j++)
            data[i][j] = line[j];
    }

    infile.close();
}

int main(int argc, char *argv[])
{
    func *obj = new func(argv[1]);  
    delete obj;
    return 0;
} 
```

从主要：

```
obj *p1 = new obj(&something);
obj *p2 = new obj(&something);

problem *p;

if(argc == 3)
    p = new problem(p1, p2, argv[2]); //SEGFAULTS HERE
else
    p = new problem(p1, p2); 
```

从带有类声明的标题中：

```
public:
    problem(obj *, obj *);
    problem(obj *, obj *, char *);
private:
        char data[6][7]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:12:35.083

您确定您的文件始终包含至少六行吗？

在 ifstream 上“迭代”的常用方法是：

```
ifstream is("test.txt");
string line;
while(getline(is, line))
{
    cout<<line<<endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:26:49.960

我想到了。该问题与在构建过程中如何链接目标文件有关。删除所有 .o 文件并从头开始重建解决了这个问题。谢谢大家的意见。对于没有从一开始就进行干净的构建并浪费您的时间，我深表歉意。

# ios - 使用自动布局将自定义 UIView 垂直和水平居中

> ID：13726929
> 
> 赞同：31
> 
> 时间：2012-12-05T15:42:10.357
> 
> 标签：ios, cocoa-touch, uiview, calayer, autolayout

我正在尝试使用新推出的 iOS 6 的 Auto Layout API 构建一个相当简单的动画自定义 UI。我正在构建的自定义视图有一个我想要垂直和水平居中的圆圈。

不幸的是，我无法弄清楚为什么我的约束似乎对 UIButton 和 UILabel 元素运行良好，但是当我使用自定义视图和自定义 CALayer 时会产生奇怪的结果（在本例中是一个圆圈，最终将被动画化）。

需要明确的是，我不希望我的视图扩展以填充整个屏幕，而是具有动态“填充”，以便视图在 iPhone 4 和 5 上都垂直居中。我还应该注意，我非常Cocoa 和 UIKit 的新手。

RootViewController.m：

```
...
- (void)viewDidLoad {
    [super viewDidLoad];

    // Create Circle View
    CGRect circle_view_rect = CGRectMake(0, 0, 100, 100);
    UIView *circle_view = [[UIView alloc] initWithFrame:circle_view_rect];

    // Create Circle Layer
    CircleLayer *circle_layer = [[CircleLayer alloc] init];
    circle_layer.needsDisplayOnBoundsChange = YES;
    circle_layer.frame = circle_view.bounds;
    [circle_view.layer addSublayer:circle_layer];

    // Enable Auto Layout
    [circle_view setTranslatesAutoresizingMaskIntoConstraints:NO];

    [self.view addSubview:circle_view];

    // Center Vertically
    NSLayoutConstraint *centerYConstraint =
    [NSLayoutConstraint constraintWithItem:circle_view
                attribute:NSLayoutAttributeCenterY
                relatedBy:NSLayoutRelationEqual
                   toItem:self.view
                attribute:NSLayoutAttributeCenterY
               multiplier:1.0
                 constant:0.0];
    [self.view addConstraint:centerYConstraint];

    // Center Horizontally
    NSLayoutConstraint *centerXConstraint =
    [NSLayoutConstraint constraintWithItem:circle_view
                attribute:NSLayoutAttributeCenterX
                relatedBy:NSLayoutRelationEqual
                   toItem:self.view
                attribute:NSLayoutAttributeCenterX
               multiplier:1.0
                 constant:0.0];
    [self.view addConstraint:centerXConstraint];
}
... 
```

CircleLayer.m：

```
...
- (void)drawInContext:(CGContextRef)context {
    CGContextAddArc(context, 50, 50, 50, 0.0, 2*M_PI, 0);
    CGContextSetFillColorWithColor(context, [UIColor yellowColor].CGColor);
    CGContextFillPath(context);
}
... 
```

基本上我实施的约束是：

*   在父视图内垂直居中
*   在父视图内水平居中

这是我得到的结果：

![圆形不使用自动布局居中](../Images/d5f4503e7d1374b9db0d5de35712d2d2.png)

任何帮助将不胜感激，我已经思考了几天了。

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-05T17:10:25.347

尝试向您的 circle_view 添加高度和宽度约束。如果不添加这些内容（使用您的代码，减去图层内容），我什至无法只显示一个痛苦的正方形视图。

```
NSLayoutConstraint *heightConstraint =
    [NSLayoutConstraint constraintWithItem:circle_view
                                 attribute:NSLayoutAttributeHeight
                                 relatedBy:NSLayoutRelationEqual
                                    toItem:nil
                                 attribute:NSLayoutAttributeNotAnAttribute
                                multiplier:1.0
                                  constant:100.0];
    [circle_view addConstraint:heightConstraint];

    NSLayoutConstraint *widthConstraint =
    [NSLayoutConstraint constraintWithItem:circle_view
                                 attribute:NSLayoutAttributeWidth
                                 relatedBy:NSLayoutRelationEqual
                                    toItem:nil
                                 attribute:NSLayoutAttributeNotAnAttribute
                                multiplier:1.0
                                  constant:100.0];
    [circle_view addConstraint:widthConstraint]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-04T22:51:01.240

只是添加到rdelmar的答案：

核心问题是，一旦您走`NSLayoutConstraint`路线并指定`setTranslatesAutoresizingMaskIntoConstraints:NO`，您制作的框架就与`CGRectMake`AutoLayout 目的无关。这就是为什么它没有使用框架高度和宽度的信息。

# android - 想通过 WLAN 将我的 android 连接到 RS 232 串行适配器

> ID：13726932
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:42:14.157
> 
> 标签：android, serial-port, connect, send, wifi

首先非常感谢您在我过去的大力帮助。自从我开始 android 编程以来，我一直在寻找很多问题，但现在我遇到了一个问题，我找不到答案。

我写了一个小程序，其中有许多 CountDownTimers，它们是可纠正的（增加或减少秒和分钟），它们可以暂停并重置为我在 SharedPreferences 中设置的时间。

现在我的老板想扩大这个。

他希望这个应用程序通过 W-Lan（内联网，而不是互联网）连接到一个 wlan-to-rs232 转换器，将“暂停”和“结束”等状态设置为显示时间的机器。

现在我的问题：

我什至不知道如何开始^_^

我不知道，如何连接到转换器，

我不知道，如何将所需的位/数据/任何东西发送到转换器，

我，如果我可以随时管理它连接到转换器，不知道如何告诉转换器他必须发送哪些命令/位/任何内容到机器。

第二：

机器还向转换器发送位，我的应用程序必须接收这些位，与上述相同，但倒置。

也许有人在这里可以帮助我？

对此进行一些介绍会有所帮助，我通过“试错法”开始了编程，但要做到这一点，我需要一个可以开始的点。

非常感谢

米娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:14:34.877

没有人能真正帮助你，因为你没有提到你有哪个 RS-232 主机。没有标准......它们的工作方式都有点不同。

话虽如此，它们中的大多数将通过常规 TCP 连接发送/接收数据。

1.  使用 IP 地址配置转换器。
2.  将其连接到您正在使用的任何 RS-232 设备。
3.  通过其配置的 IP 地址和端口与您的转换器建立 TCP 连接。
4.  通过此 TCP 连接发送/接收数据，就像您通过 RS-232 发送/接收一样。

其他转换器实现自己的协议以促进模拟端口状态线，例如载波检测和清除发送。对于这些，您必须阅读制造商提供的协议文档。

# ios - 确定颜色是浅色还是深色？

> ID：13726935
> 
> 赞同：0
> 
> 时间：2012-12-05T15:42:17.423
> 
> 标签：ios, colors, label

> **可能重复：**
> [检查 UIColor 是暗还是亮？](https://stackoverflow.com/questions/2509443/check-if-uicolor-is-dark-or-bright)

有没有简单的方法来确定 UIColor 是暗还是亮？我想在动态背景上放置一个标签，如果背景很暗，则将其文本颜色更改为白色，如果背景为浅色，则将其文本颜色更改为黑色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:45:48.090

我没有测试过这个，但它可能对你有用......

```
-(BOOL) isLightColor:(UIColor*)clr {
    CGFloat white = 0;
    [clr getWhite:&white alpha:nil];
    return (white >= 0.5);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:46:33.147

计算标签和背景之间的颜色对比度，然后从那里决定颜色。通常，这将涉及获取相关颜色的成分。

如果您在没有引号的情况下搜索“计算颜色对比度”，您会找到一些链接。您可能找不到任何特定于 iOS 的内容，但您应该能够调整您找到的代码，特别是因为它们通常会涉及 RGB 的功能，这是直截了当的。

# python - 用于 Pong 克隆的 python 和 pygame 中的人工智能

> ID：13726938
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:42:31.020
> 
> 标签：python, artificial-intelligence, pygame

我正在制作一个基于教程克隆 pong 的程序，并且我已经将该程序用于与两个不同的人进行多人游戏的地方。我想在程序中添加一个 AI 而不是玩家 2。我已经坚持了很长一段时间，希望能提供任何帮助！这是当前的代码：

`import sys, os, math, random, pygame from pygame.locals import *`

`class paddle(pygame.sprite.Sprite):`

```
def __init__(self, xy):
    pygame.sprite.Sprite.__init__(self)
    self.image = pygame.image.load(os.path.join('assets', 'pong_paddle.gif'))
    self.rect = self.image.get_rect()

    self.rect.centerx, self.rect.centery = xy

    self.movementspeed = 5

    self.velocity = 0

def up(self):
    # increases vertical velocity
    self.velocity -= self.movementspeed

def down(self):
    # decreases vertical velocity
    self.velocity += self.movementspeed

def move(self, dy):
    # moves the paddle y, doesn't go out of top or bottom
    if self.rect.bottom + dy > 400:
        self.rect.bottom = 400
    elif self.rect.top + dy < 0:
        self.rect.top = 0
    else:
        self.rect.y += dy

def update(self):
    # makes the paddle move every frame
    self.move(self.velocity) 
```

`class aiplayer(object):`

```
def __init__(self):
    self.bias = random.random() - 0.5
    self.hit_count = 0

def update(self, paddle, game,):

    if (paddle.rect.centerx < game.bounds.centerx and game.ball.rect.centerx < game.bounds.centerx) or (paddle.rect.centerx > game.bounds.centerx and game.ball.rect.centerx > game.bounds.centerx):
        delta = (paddle.rect.centery + self.bias * paddle.rect.height) - game.ball.rect.centery 
        if abs(delta) > paddle.velocity:
            if delta > 0:
                paddle.direction = -1
            else:
                paddle.direction = 1
        else:
            paddle.direction = 0
    else:
        paddle.direction = 0

def hit(self):
    self.hit_count += 1
    if self.hit_count > 6:
        self.bias = random.random() - 0.5
        self.hit_count = 0

def lost(self):
    self.bias = random.random() - 0.5

    def won(self):
        pass

def render(self, surface):

    x, y = self.location
    w, h = self.image.get_size()
    surface.blitz(self.image, (x-w/2, y-h/2)) 
```

`class Ball(pygame.sprite.Sprite):`

```
def __init__(self, xy):
    pygame.sprite.Sprite.__init__(self)
    self.image = pygame.image.load(os.path.join('assets', 'pong_ball.gif'))
    self.rect = self.image.get_rect()

    self.rect.centerx, self.rect.centery = xy
    self.maxspeed = 10
    self.servespeed = 5
    self.velx = 0
    self.vely = 0

def reset(self):
    self.rect.centerx, self.rect.centery = 400, 200
    self.velx = 0
    self.vely = 0

def serve(self):
    angle = random.randint(-45, 45)

    if abs(angle) < 5 or abs(angle-180) < 5:
        angle = random.randint(10, 20)

    if random.random() > .5:
        angle += 180

    # this gets the velocity for the x and y coords
    x = math.cos(math.radians(angle))
    y = math.sin(math.radians(angle))

    self.velx = self.servespeed * x
    self.vely = self.servespeed * y 
```

`class Game(object):`

```
def __init__(self):

    pygame.init()

    # creates the window
    self.window = pygame.display.set_mode((800, 400))

    # makes a clock
    self.clock = pygame.time.Clock()

    # window title
    pygame.display.set_caption("Pong")

    # tells pygame to watch for these certain events so we can close window
    pygame.event.set_allowed([QUIT, KEYDOWN, KEYUP])

    self.background = pygame.Surface((800, 400))
    self.background.fill((55, 255, 85))
    pygame.draw.line(self.background, (0,0,0), (400, 0), (400, 400), 2)
    self.window.blit(self.background, (0,0))
    #lets the background show up
    pygame.display.flip()

    #renders the sprites so that they actually show up
    self.sprites = pygame.sprite.RenderUpdates()

    # makes the paddles, adds to sprite group
    self.leftpaddle = paddle((50, 200))
    self.sprites.add(self.leftpaddle)
    self.rightpaddle = paddle((750, 200))
    self.sprites.add(self.rightpaddle)

    # makes the ball
    self.ball = Ball((400, 200))
    self.sprites.add(self.ball)

def run(self):
    # this lets the game run using a loop so its always active and never closes
    running = True

    while running:
        self.clock.tick(60)

        # pygame event, if user closes the game, then stop running
        running = self.handleEvents()

        pygame.display.set_caption("Pong %d fps" % self.clock.get_fps())

        self.manageBall()

        # updates the sprites(paddles, ball)
        for sprite in self.sprites:
            sprite.update()

        # renders the sprites
        self.sprites.clear(self.window, self.background)
        dirty = self.sprites.draw(self.window)
        pygame.display.update(dirty)

def handleEvents(self):

    for event in pygame.event.get():
        if event.type == QUIT:
            return False

        elif event.type == KEYDOWN:
            if event.key == K_ESCAPE:
                return False

            # controls the right paddle
            if event.key == K_w:
                self.leftpaddle.up()
            if event.key == K_s:
                self.leftpaddle.down()
            if event.key == K_UP:
                self.rightpaddle.up()
            if event.key == K_DOWN:
                self.rightpaddle.down()

            # serves the ball
            if event.key == K_SPACE:
                if self.ball.velx == 0 and self.ball.vely == 0:
                    self.ball.serve()

        elif event.type == KEYUP:
            if event.key == K_w:
                self.leftpaddle.down()
            if event.key == K_s:
                self.leftpaddle.up()
            if event.key == K_UP:
                self.rightpaddle.down()
            if event.key == K_DOWN:
                self.rightpaddle.up()

        elif event.type == 

    return True

def manageBall(self):

    # this moves the ball
    self.ball.rect.x += self.ball.velx
    self.ball.rect.y += self.ball.vely

    if self.ball.rect.top < 0:
        self.ball.rect.top = 1

        # makes the ball bounce
        self.ball.vely *= -1

    elif self.ball.rect.bottom > 400:
        self.ball.rect.bottom = 399

        # makes ball bounce off bottom
        self.ball.vely *= -1

    # resets the ball if it hits the left or right screen
    if self.ball.rect.left < 0:
        self.ball.reset()
        return

    elif self.ball.rect.right > 800:
        self.ball.reset()
        return

    collision = pygame.sprite.spritecollide(self.ball, [self.leftpaddle, self.rightpaddle], dokill = False)

    if len(collision) > 0:
        hitpaddle = collision[0]

        # sends the ball back
        self.ball.velx *= -1

        # makes sure the ball doesn't get stuck in the paddle
        self.ball.rect.x += self.ball.velx 
```

`# makes the game and runs it` `if __name__ == '__main__':` `game = Game()` `game.run()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:54:49.250

在aiplayer中创建一个函数AI并让它向上或向下返回

```
int AI(self.position,ball.position):
       if self.y>ball.y:
            return -1
       elif self.y<ball.y:
             return 1 
```

然后，在 aiplayer 的 update() 代码中，执行与此类似的操作

```
self.y += movespeed*AI(self.position,ball.position) 
```

然后，它会根据球的位置向上或向下移动桨（如果您添加或减去移动速度以使桨朝正确的方向移动，您可能需要切换）。此外，使用桨的中心可能更有效，这样它就不会将桨的顶部或底部边缘放在球上。

# c - 打开LabVIEW后，总是需要为VI重新加载DLL才能执行LoadLibrary功能

> ID：13726944
> 
> 赞同：1
> 
> 时间：2012-12-05T15:42:43.917
> 
> 标签：c, dll, labview

目前，我在LabVIEW中遇到了一个问题。每次打开LabVIEW程序后，我都会尝试执行函数VI，该函数将通过执行LoadLibrary函数来加载I2C DLL来进行I2C初始化。然后它总是找不到函数VI旁边的I2C DLL。

但是，在我将 DLL 重新加载到这个函数 VI 之后，它就可以工作了。过程是我打开VI，然后再次选择DLL。

不知道大家有没有遇到过类似的问题？有没有人有很好的解决方案？

# snapshot - 强制 ZooKeeper 生成快照

> ID：13726951
> 
> 赞同：4
> 
> 时间：2012-12-05T15:43:06.343
> 
> 标签：snapshot, apache-zookeeper

是否可以强制 ZooKeeper 在特定时间或特定时间间隔拍摄快照，不仅通过 ZooKeeper 配置中的“snapCount”

我喜欢每天或每 24 小时安排一次快照。要么是在 ZooKeeper 中配置，要么是通过 cmdline 强制执行。

这是为了及时“回滚”我的 ZooKeeper 到已知状态，以防数据损坏或有人添加了不正确的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-02T12:45:53.793

我发现强制快照的唯一方法是重新启动 Zookeeper 节点，使其使用最新数据创建新快照。如果您使用合奏，这是一个很好的解决方案。至少，如果您同时拍摄快照和最新日志文件，您将获得一致性数据（快照是模糊的，强烈建议将其与事务日志一起使用）。 **但**考虑到这一点，我想强制快照并不是真正必要的（无论如何你都应该获取日志文件）。在活动的zookeeper上复制日志文件也不是一个好主意...... **所以**停止zookeeper节点并复制它的dataDir（如果它是分开的，则带有dataLogDir）以保证在您停止zk时具有一致数据的健康备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:20:33.687

我不相信 Zookeeper 内部支持这个功能。但是，您始终可以手动将最新的快照和日志文件（各一个）复制到某处以进行安全保存。回滚到那个时间是在需要时将文件复制回数据目录的问题。

# php - PHP类设计选择

> ID：13726955
> 
> 赞同：0
> 
> 时间：2012-12-05T15:43:17.377
> 
> 标签：php, oop

我有一个类，用于生成嵌套的无序 html 列表。

```
class cTree {    

function cTree(){
}

public function getTree($id = NULL ){
}

private function addSubNode($iParentId, $iLevel){
} 
```

其中 addSubnode 是一个递归函数来获得正确的嵌套。

现在，我想在我的网站上有两个导航菜单。两个无序列表，但标记不同。

在我看来，有 3 个选项：

1.  将一个额外的变量传递给 getTree() 和 addSubNode()，然后使用 if/else 结构。我不喜欢这样，因为它不可维护。

2.  向类中添加两个额外的函数，因此我将拥有例如 getTopTree()/getFooterTree 和 addTopSubNode()/addFooterSubNode()；

3.  创建两个新类（cTopMenu 类扩展 cTree / cFooterMenu 类扩展 cTree）并根据我的喜好编辑 getTree/addSubNode。

如前所述，我不喜欢第一个选项，但不确定第二个和第三个。最好的设计选择是什么？

额外的例子，使情况更清楚。它与上面的不一样，但绝对可以比较。我有一棵用于导航的树：

```
<ul>
  <li><a href="/x">Item 1 </a></li>
  <li><a href="/x">Item 2 </a></li>
  <li><a href="/x">Item 3 </a></li>
</ul> 
```

然后我有另一个，带有管理选项：

```
<form method="post">
 <ul>
   <li>
       <input type="text" value="Item 1" />
       <input type="checkbox" value="1" id="visible_1" name="visible[]"> 
       <label for="visible_1">&nbsp;visible</label>           
   </li>
   <li>
       <input type="text" value="Item 2" />
       <input type="checkbox" value="1" id="visible_2" name="visible[]"> 
       <label for="visible_2">&nbsp;visible</label>           
   </li>
   <li>
       <input type="text" value="Item 3" />
       <input type="checkbox" value="1" id="visible_3" name="visible[]"> 
       <label for="visible_3">&nbsp;visible</label>           
   </li>
 </ul>
</form> 
```

基本上是同一棵树。现在我扩展了基本的树类，替换了 getTree() 和 addSubNode() 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:45:01.297

如果您能告诉我们两个预期的标记是什么以便建议一种方法，那将非常有帮助。话虽如此，我可以尝试部分答案：

*   正如您所说，第一个选项似乎不是一个好方法，因为这将决定在客户端上做什么（即 if/then/else 部分）的责任。这导致在许多地方重复该声明，从而导致测试和可维护性问题。
*   我在第二种方法中看到的问题是，如果你这样做，cTree 的一个实例将不会代表一棵树，而是某种树形函数集合。因此，您将使用一些 OO 结构，但不会遵守 OO 范式。此外，请考虑如果您以后决定拥有一种新类型的树（例如侧边栏树），您应该添加新的函数集（`getSideTree()`/ `addSideSubNode()`），这也不会扩展。

恕我直言，问题是您是否应该通过为每种情况创建特定的子类来处理这种情况，或者它们是否只是`cTree`与另一个对象协作以获得所需输出的两个实例。正如我之前所说，如果不知道两个预期输出，就很难判断。

**编辑** 根据新信息，我猜这两种方法（子类化或组合）都是有效的：

*   子类化。我会有一个抽象类 ( `cTree`)，除了渲染节点之外，它可以做所有事情。执行此操作的方法将是抽象的，具体的子类 (`topTree`和`footerTree`) 将负责处理此问题。您可能想查看模板[方法模式](http://www.oodesign.com/template-method-pattern.html)。
*   作品。在这里，您将只有一个树类负责渲染树结构并将节点渲染委托给另一个对象。该其他对象将在单独的层次结构中建模（例如`treeNode`，带有`topNode`和的抽象类`footerNode`）。我喜欢这个，因为它清楚地表明树之间的不同不是它们的结构，而是节点。

如您所见，第二个选项是将子类中的重写方法实现转换为多态对象的层次结构。使用哪个选项取决于渲染过程的复杂性和个人喜好。

高温高压

# asp.net - 在 ASP.NET 4.5 WebForms 中通过 bundle.config 与 BundleConfig.cs 捆绑资源

> ID：13726956
> 
> 赞同：37
> 
> 时间：2012-12-05T15:43:17.937
> 
> 标签：asp.net, webforms, asp.net-4.5

关于 ASP.NET 4.5 的新 System.Web.Optimization / Microsoft.AspNet.Web.Optimization：

谁能解释使用**BundleConfig.cs**类文件与**bundle.config** xml 文件使用捆绑资源的区别？

我已经看到一些[文章](http://www.mikesdotnetting.com/Article/197/Optimising-ASP.NET-Web-Pages-Sites-Bundling-And-Minification)显示在 BundleConfig.cs 中捆绑 js 和 css，而[其他](http://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx)文章则在 BundleConfig.cs中捆绑 js 和在 bundle.config 中捆绑 css。

我想我不明白#1）为什么你不会为了简单起见而只用一种特定的方式来做它们 - 和#2）为什么有人更喜欢在类文件中硬编码这样的资源？将它们放在一个 xml 文件中似乎是一种更加动态的方法，如果需要，可以即时更改该文件。

似乎更多的文章实际上倾向于使用 BundleConfig.cs。是否有一些特别的赞成或反对鼓励这样做？

此外，如果有任何关于 System.Web.Optimization 的真实文档，我很想知道位置（因为我肯定找不到它）。

谢谢-

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-18T18:22:46.753

据我所知，接受的答案实际上根本没有回答这个问题。它讨论了捆绑框架的好处，但没有讨论使用 BundleConfig.cs 与使用 bundle.config 文件有何不同。

很大程度上取决于您是喜欢在代码中还是在标记中工作，但每个人都有一些特定于该方法的优点。

对于 bundle.config，实际上只有一个好处，但它是一个很大的好处。通过使用它，您可以管理捆绑包，而无需完全接触代码。这意味着您可以在不重新编译的情况下进行更改，从而更轻松地进行快速部署。此外，这意味着您的前端开发人员将最熟悉应该捆绑的文件，可以定义捆绑包，而无需使用任何后端代码。

但是，您可以在 Bundle.config 中指定的内容有很多限制。例如，您不能指定要应用于单个项目或捆绑包的任何自定义转换。您可以设置的唯一捆绑属性是`Path`、`CdnPath`和`CdnFallbackExpression`。您不能设置`Orderer`or`EnableFileExtensionReplacements`属性。您无法包含包含所有子目录的目录（就像您可以使用该`IncludeDirectory`方法一样）。基本上，有很多功能只能通过后端代码使用。当然，您可以通过使用后端代码检索在 bundle.config 中定义的捆绑包，然后进行操作来设置其中的很多内容。但是，如果您要这样做，您也可以在后端创建捆绑包。

我个人的理念是使用 bundle.config ，除非我需要对 bundle 做一些不可能的事情。但是，我确实同意将它们全部放在一个地方是理想的。如果我决定需要使用该类，那么我将把它用于该类型的**所有**包（不过，我有时确实将我的 JS 包放在类中，将我的 CSS 包放在 .config 文件中）。不过，我敢肯定，一些完全通情达理的人会不同意这个过程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T13:05:40.127

该文档比我以往任何时候都更好地解释了这一切

[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

最好的事情之一是：

> 捆绑框架遵循几个常见的约定，例如：
> 
> 当“FileX.min.js”和“FileX.js”存在时选择“.min”文件发布。
> 
> 选择非“.min”版本进行调试。忽略仅由 IntelliSense 使用的“-vsdoc”文件（例如 jquery-1.7.1-vsdoc.js）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-16T20:35:47.367

> 谁能解释使用 BundleConfig.cs 类文件与 bundle.config xml 文件使用捆绑资源的区别？

不同之处在于您必须在运行时读取、解析和加载 bundle.config 的内容。因此，使用 BundleConfig.cs 类文件可能会更简单。

> 1）为什么你不会为了简单起见只用一种特殊的方式来做它们

完全同意。

> 2）为什么有人更愿意在类文件中硬编码这样的资源？

简单地说：容易理解。

> 将它们放在一个 xml 文件中似乎是一种更加动态的方法，如果需要，可以即时更改该文件。

是的，但是您必须编写更多代码来检测何时发生更改，然后添加/删除/替换现有设置。如果做得不好，可能会导致运行时出现 UI 问题。

> 此外，如果有任何关于 System.Web.Optimization 的真实文档，我很想知道位置（因为我肯定找不到它）。

上面已经回答了，但我会重复：[http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

# php - 如何在 Eclipse Juno 4.2.1 中禁用 PHP 文件的 HTML 验证？

> ID：13726959
> 
> 赞同：6
> 
> 时间：2012-12-05T15:43:31.467
> 
> 标签：php, html, eclipse, validation

我使用 Eclipse 进行 PHP / MySQL / JS 网站开发。从 Eclipse 4.2.1 Classic 我安装了 Data Tools Platform、Subclipse 和 PDT。Eclipse 尝试对我的 PHP 文件进行 HTML 验证，但对我进出 PHP 的一些操作感到困惑，当然也不喜欢我的脚本输出非 HTML XML。

在旧版本的 Eclipse（可能是 Ganymede）中，我可以转到 Window > Preferences 并在 Validators 部分中关闭 HTML 验证，但我不再有该部分。我在项目属性中也没有它。

理想情况下，我只想为 PHP 关闭 HTML 验证，但由于我实际上没有任何纯 HTML 文件，所以我可以完全关闭它。我发现的唯一答案是在 Window > Preferences 下的 Validators 下将其关闭，但由于该部分不存在，这对我没有帮助。它是否已被重命名和移动，还是我需要安装其他东西才能将其取回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:33:00.110

从juno存储库安装“Eclipse Web Developer Tools”。

# java - 仅在必要时在特定位置添加换行符

> ID：13726962
> 
> 赞同：8
> 
> 时间：2012-12-05T15:43:43.443
> 
> 标签：java, android, android-layout, android-xml

在我的 Android 布局中，我有一个使用屏幕可用宽度一半的 TextView。在运行时，我将文本设置为（长）电子邮件地址。例如：

```
googleandroiddeveloper@gmail.com 
```

如果文本不适合一行，Android 会插入一个换行符，这是所需的行为。但是，换行符的位置在第一个不适合该行的字符之前。结果可能是这样的：

```
googleandroiddeveloper@gmai
l.com 
```

我认为，这有点丑陋，尤其是在电子邮件地址中。我希望换行符出现在`@`字符之前：

```
googleandroiddeveloper
@gmail.com 
```

当然，我可以`\n`在我的`strings.xml`. 但是，电子邮件地址在每种情况下都会使用两行，即使它适合一行。

我已经认为我找到了一个解决方案，将零宽度空格 ( `\u200B`) 添加到电子邮件地址。

```
<string name="email">googleandroiddeveloper\u200B@gmail.com</string> 
```

但除了使用标准空格外，Android 不会将特殊空格字符检测为可破坏空格，因此此时不会添加换行符。

当我在我的应用程序的多个位置处理大量电子邮件地址时，我正在寻找一种解决方案来在`@`字符之前添加一个易碎且不可见的空间，因此如果电子邮件地址不适合一行，Android 会包装电子邮件地址。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:51:07.027

@Luksprog 的解决方案非常好，在很多情况下都能解决问题。然而，我在几个方面修改了这个类，让它变得更好。这些是修改：

*   我使用`onSizeChanged`而不是`onMeasure`检查和操作文本，因为使用 with 时会出现`onMeasure`问题。`LinearLayout``layout_weight`
*   `getPaddingLeft()`我通过使用和考虑了文本的水平填充`getPaddingRight()`
*   在测量时`afterAt`我替换`position`为`position + 1`，否则生成的电子邮件地址包含两个`@`。

代码：

```
public class EmailTextView extends TextView {

    public EmailTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        // the width the text can use, that is the total width of the view minus
        // the padding
        int availableWidth = w - getPaddingLeft() - getPaddingRight();
        String text = getText().toString();
        if (text.contains("\n@")) {
            // the text already contains a line break before @
            return;
        }
        // get the position of @ in the string
        int position = -1;
        for (int i = 0; i < text.length(); i++) {
            if (text.charAt(i) == '@') {
                position = i;
                break;
            }
        }
        if (position > 0) {
            final Paint pnt = getPaint();
            // measure width before the @ and after the @
            String beforeAt = text.subSequence(0, position).toString();
            String afterAt = text.subSequence(position + 1, text.length())
                    .toString();
            final float beforeAtSize = pnt.measureText(beforeAt);
            final float afterAtSize = pnt.measureText(afterAt);
            final float atSize = pnt.measureText("@");
            if (beforeAtSize > availableWidth) {
                // the text before the @ is bigger than the width
                // so Android will break it
                return;
            } else {
                if ((beforeAtSize + afterAtSize + atSize) <= availableWidth) {
                // the entire text is smaller than the available width
                    return;
                } else {
                    // insert the line break before the @
                    setText(beforeAt + "\n@" + afterAt);
                }
            }
        }
    }
} 
```

这是`EmailTextView`与默认值相比的屏幕截图`TextView`：

![电子邮件文本视图](../Images/7e963f42c3f5131ce5e92426169ad60c.png)

对于所有电子邮件地址，它都按我的预期工作。最后一个地址没有改变，因为之前的文本`@`已经太宽了，所以系统在之前打破了它，因此电子邮件地址无论如何都搞砸了，所以没有必要包含另一个换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:56:35.403

您可以查看`TextView`下面的自定义类（尽管可能效率不高）在某些情况下应该插入（假设在很少的测试中）所需的换行符：

```
public static class NewLineText extends TextView {

    private static final String CHALLANGE_TEXT = "\n@";

    public NewLineText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        String text = getText().toString();
        if (text.contains(CHALLANGE_TEXT)) {
            return;
        }
        int position = -1;
        for (int i = 0; i < text.length(); i++) {
            if (text.charAt(i) == '@') {
                position = i;
                break;
            }
        }
        if (position > 0) {
            final Paint pnt = getPaint();
            String beforeAt = text.subSequence(0, position).toString();
            String afterAt = text.subSequence(position, text.length())
                    .toString();
            final float beforeAtSize = pnt.measureText(beforeAt);
            final float afterAtSize = pnt.measureText(afterAt);
            final float atSize = pnt.measureText("@");
            if (beforeAtSize > getMeasuredWidth()) {
                // return ?! the text before the @ is bigger than the width
                // so Android will break it
                return;
            } else {
                if ((beforeAtSize + afterAtSize + atSize) <= getMeasuredWidth()) {
                    return;
                } else {
                    setText(beforeAt + CHALLANGE_TEXT + afterAt);
                }
            }
        }
    }
} 
```

# c - 从计算机移动到计算机时程序崩溃

> ID：13726964
> 
> 赞同：2
> 
> 时间：2012-12-05T15:43:45.860
> 
> 标签：c, console, console-application

我正在制作的一个小 C 程序有问题。当我编译它并在我的 Mac（在 Windows 7 分区上）和我的工作电脑（也是 Windows 7）上运行它时它工作正常，但我需要它在运行 CNC 的 PC 上工作并且它在 Windows XP 上. 我可以更改两台计算机上的程序位置，但它在 windows XP pc 上的任何地方都无法运行当它必须写入文本文件但它能够覆盖一个文件时似乎崩溃了......是否有一些功能与 Windows XP 不兼容？我会再试一些，如果遇到什么我会告诉你的。

PS 无法在这台计算机上使用调试器，因为我无法安装程序...（工作计算机）。

这是导致问题的代码：

```
int WritePrograms(int vitesse, double hauteur, int longueur, int largeur, double localRabotage, double localGroove, int overdrive)
    {
        char nameOfFile[75];
        char nomProgramR[75];
        char nomProgramG[75];
        char cheminDaccesR[100];
        char cheminDaccesG[100];
        char cheminDaccesGen[] = "programmes/";
        char genR[] = "_Rabotage.nc";
        char genG[] = "_Groove.nc";
        char confirmation [3];
        int i = 0;
        int c = 0;

        char *nomProgram = NULL;
        char *caractere = NULL;

        FILE* fichierRabotage = NULL;
        FILE* fichierGroove = NULL;

        do
        {
            memset(nomProgramG,0,sizeof(nomProgramG));
            memset(nomProgramR,0,sizeof(nomProgramR));
            memset(nameOfFile,0,sizeof(nameOfFile));
            memset(cheminDaccesG,0,sizeof(cheminDaccesG));
            memset(cheminDaccesR,0,sizeof(cheminDaccesR));
            do
            {
            printf("\nVeuillez choisir un nom pour votre programme : ");
            nomProgram = Saisie(nameOfFile,60);
            }while (nomProgram == "0");

            if (strcmp(nomProgram,"exit") == 0)
            {
                printf("\nVous avez decider de ne pas creer le programme\n\n");
                Sleep(2000);
                exit(0);
            }
            else if (strcmp(nomProgram,"\0") == 0)
            {
                printf("\nVous n'avez pas rentrer de nom pour votre programme\n");
                sprintf(nomProgramR,"%dX%.0fX%dX%d_Rabotage.nc",vitesse,hauteur*10000,longueur,largeur);
                sprintf(nomProgramG,"%dX%.0fX%dX%d_Groove.nc",vitesse,hauteur*10000,longueur,largeur);
                printf("\nUn nom generique lui a ete attribuer\n");
                sprintf(nomProgram,"%dX%.0fX%dX%d",vitesse,hauteur*10000,longueur,largeur);
                printf("\n%s\n",nomProgram);
                strcpy(cheminDaccesR,cheminDaccesGen);
                strcpy(cheminDaccesG,cheminDaccesGen);
                strcat(cheminDaccesR,nomProgramR);
                strcat(cheminDaccesG,nomProgramG);
            }
            else
            {
                strcpy(nomProgramG,nomProgram);
                strcpy(nomProgramR,nomProgram);
                strcpy(cheminDaccesR,cheminDaccesGen);
                strcpy(cheminDaccesG,cheminDaccesGen);
                strcat(nomProgramR,genR);
                strcat(nomProgramG,genG);
                strcat(cheminDaccesR,nomProgramR);
                strcat(cheminDaccesG,nomProgramG);
            }

            fichierRabotage = fopen(cheminDaccesR,"r");
            fichierGroove = fopen(cheminDaccesG,"r");
            if (fichierRabotage != NULL || fichierGroove != NULL)
            {
                do
                {
                printf("\nLe fichier existe deja, voulez-vous le remplacez (O/N)?");
                caractere = Saisie(confirmation,3);
                }while (strcmp(caractere,"O") != 0 && strcmp(caractere,"o") != 0 && strcmp(caractere,"n") != 0 && strcmp(caractere,"N") != 0);
                if (strcmp(caractere,"O") == 0 || strcmp(caractere,"o") == 0)
                {
                    c = 1;
                }
            }
            else
            {
                c = 1;
            }
        }while (c != 1);
        fclose(fichierGroove);
        fclose(fichierRabotage);

        fichierRabotage = fopen(cheminDaccesR,"w+");
        fichierGroove = fopen(cheminDaccesG,"w+");
        if (fichierRabotage != NULL && fichierGroove != NULL)
        {

        }
        else
        {
            printf("\nLe programmme n'as pas pu etre creer\n");
            Sleep(2000);
            exit(0);
        }
        fprintf(fichierGroove, "[OUTIL 3-CARBIDE 1/8-TEMPS: 7MIN] \n");
        fprintf(fichierGroove, "[MATERIEL-MOUSSE RPM 200]\n");
        fprintf(fichierGroove, "G20\nG00\nG90\nT2\nG53 Z\nG53 XY\nG92 Z%.4f\nG4 [Changer l'outil]\nM03\n",localGroove);
        fprintf(fichierGroove, "G0 X2.5\nG0 Y2.5\nG0 Z%.4f\n",hauteur);

        return 0;
    } 
```

这是 headers.h 的问题：

```
#ifndef HEADERS_H_INCLUDED
#define HEADERS_H_INCLUDED

char *Saisie(char *str,int n);
void viderBuffer();
int SaisieNombre(char *chaine,int a);
double SaisieNombreDecimal(char *chaine,int a);
double LireValeurCorrespondante(double thick);
int GetLocals(double *groove, double *rabotage);
int WritePrograms(int vitesse, double hauteur, int longueur, int largeur, double localRabotage, double localGroove, int overdrive);

#endif // HEADERS_H_INCLUDED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:22:21.767

这里的问题是，通过打开两个文件来检查它们是否存在以及其中一个是否存在。程序会告诉我是否要覆盖它。然后，如果需要，我会关闭这两个文件并覆盖它们，但如果它们没有打开，它会尝试关闭一个 NULL 指针。所以解决方案是这样做：

```
if (fichierGroove != NULL)
    {
    fclose(fichierGroove);
    }
    if (fichierRabotage != NULL)
    {
    fclose(fichierRabotage);
    } 
```

这里的教训：您可以在 Windows 7 中关闭 NULL 指针，但在 XP 中不能

不确定所有其他操作系统。

# silverlight - 在 Silverlight 中从 UserControl 访问父级

> ID：13726966
> 
> 赞同：0
> 
> 时间：2012-12-05T15:44:00.547
> 
> 标签：silverlight, xaml

从 UserControl 内部，我试图在其父级上引用一个方法。

```
public partial class Tab3_2Data : UserControl
{   
    public Tab3_2Data()
    {
        InitializeComponent();

        //MainPage mp = this.Ancestors().OfType<MainPage>().FirstOrDefault();
        //var x = VisualTreeHelper.GetParent(this);
        //var z = this.Parent;
        //var parent = this.Ancestors().Take(1).FirstOrDefault();
        // None of the above work.. all come back as null

        // Trying to access this method on the parent
        //ShowMessage("test", OperationStatus.Green); 
```

试过[这个](http://geekswithblogs.net/codingbloke/archive/2010/12/19/visual-tree-enumeration.aspx)还没有

和

```
 // only available OOB
    //mainPage = System.Windows.Application.Current.RootVisual as MainPage; 
```

UserControl 被称为：

```
 <!-- Tab 3_2 -->
 <controls:TabItem Header="Groups and Roles">
     <UserControls:Tab3_2Data />
 </controls:TabItem> 
```

EDIT2：这就是我的工作方式：

在用户控件中：

```
UserControl x:Class="xyz.ClientApp.UserControls.Tab3_2Data" Loaded="Tab3_2Data_OnLoaded" 
```

然后在后面的代码中：

```
private void Tab3_2Data_OnLoaded(object sender, RoutedEventArgs e)
        {
            mp = this.Ancestors().OfType<MainPage>().FirstOrDefault();
            //mp.ShowMessage("test", OperationStatus.Green);
        } 
```

它使用上面链接中引用的 VisualTreeEnumeration 帮助器类。

```
 public static class VisualTreeEnumeration
    {
        public static IEnumerable<DependencyObject> Descendents(this DependencyObject root, int depth)
        {
            int count = VisualTreeHelper.GetChildrenCount(root);
            for (int i = 0; i < count; i++)
            {
                var child = VisualTreeHelper.GetChild(root, i);
                yield return child;
                if (depth > 0)
                {
                    foreach (var descendent in Descendents(child, --depth))
                        yield return descendent;
                }
            }
        }

        public static IEnumerable<DependencyObject> Descendents(this DependencyObject root)
        {
            return Descendents(root, Int32.MaxValue);
        }

        public static IEnumerable<DependencyObject> Ancestors(this DependencyObject root)
        {
            DependencyObject current = VisualTreeHelper.GetParent(root);
            while (current != null)
            {
                yield return current;
                current = VisualTreeHelper.GetParent(current);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:26:34.757

我相信只有在加载控件时父级才可用。您可以尝试在 UserControl.Loaded 事件的处理程序中运行此逻辑。此外，由于控件是 TabItem 的子控件，因此只有在 TabItem 可见时才会加载它。

# vb.net - mustInherit 类共享函数

> ID：13726967
> 
> 赞同：2
> 
> 时间：2012-12-05T15:44:02.463
> 
> 标签：vb.net, abstract-class, shared

嗨，有一个 MustInherit 类和许多实例。

我需要一个函数共享函数声明一次（通常在模板中）。但作为一个必须继承，我不能称之为。我需要使用我的类实例之一。还有其他方法吗？

```
Public MustInherit MyBaseClass

...

    public shared function UnknowBaseFunction () as object
    ....

x = InheritsClassByMyBaseClass.UnknowBaseFunction() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:57:45.000

无法继承共享成员，因此它也可以通过派生类名称使用。显然，通过删除`Shared`关键字，它将在所有派生类型中可用，但只能通过实例化对象，而不是作为共享方法。如果让所有东西都通过基类名称调用该方法没有意义，那么我建议将它完全分解为一个单独的类，该类既不在基类也不在派生类中。

# linux - Linux 设备驱动程序 - 关闭文件时如何解锁读取线程？

> ID：13726970
> 
> 赞同：2
> 
> 时间：2012-12-05T15:44:14.373
> 
> 标签：linux, io, driver, device, blocking

我正在尝试为 Linux 实现字符设备驱动程序并且遇到了麻烦。简而言之，写入设备的数据被缓冲以供读取。当没有数据可用时，通过“wait_event_interruptible”调用读取块。写入处理程序接收到的数据调用“wake_up_interruptible”。释放处理程序还调用“wake_up_interruptible”来解除对读取器的阻塞，但设置一个标志以指示驱动程序正在释放。

从用户空间我有一个可执行文件，它通过“打开”打开驱动程序，然后启动另一个线程。主线程继续调用“读取”。正如预期的那样，没有数据可供读取和调用阻塞。另一个线程休眠一秒钟（为主线程提供足够的时间来读取和阻塞），调用'close'，然后再次调用'close'。第一个调用返回“0”，而第二个调用返回“-1”（如预期的那样）。但是，我的驱动程序的释放处理程序从未被调用，我无法理解如何在不显式发送信号或将一些数据写入设备的情况下解除对读取线程的阻塞。我的理解是，当驱动程序的最后一个句柄关闭时，它的释放处理程序被调用。

我对用户空间文件级别的读取/关闭有正确的理解吗？我对设备驱动程序有正确的理解吗？我还缺少其他东西吗？我浏览了“Linux Device Drivers 3rd Edition”，并没有找到这个问题的答案。我也搜索了谷歌，但似乎也找不到答案。感谢您提供的任何帮助。我的内核版本是 3.0.15。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T20:09:02.353

不幸的是，读取系统调用保留了对文件本身的引用，而不是文件描述符。所以关闭文件描述符不会中止读取。

在所有情况下，您必须注意解除阻塞和关闭之间的竞争条件，您不希望线程（或另一个线程）重新进入之间的系统调用；）

# macos - 如何阻止 XCode 下载和安装 iOS 和 OSX 库？

> ID：13726971
> 
> 赞同：2
> 
> 时间：2012-12-05T15:44:16.803
> 
> 标签：macos, xcode4.3, updates

几个月来，我一直在我的 Macbook Air 上为 iOS 开发小应用程序。它实际上相当快。

Mac OS X 10.7.3 1.6 GHz Intel Core Duo 2 GB 667 MHz DDR2 SDRAM 80 GB ATA 磁盘 XCode 4.3.2

今天，这一切都陷入了停顿。XCode 表示它会下载并安装 iOS 5.1 和 OS X 10.7。

XCode 是我正在运行的唯一应用程序，所以我认为下载和安装是问题所在。

我无缘无故失去了一天的工作。我不想再失去了。

如何防止 XCode 再次下载和安装不需要的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:54:27.117

```
Xcode > Preferences > Downloads > Uncheck "Check for and install updates automatically 
```

# android - 在 flex mobile 4.5 的选项卡式视图导航器应用程序中，我如何才能拥有一个不属于主选项卡式应用程序的主页选项卡？

> ID：13726973
> 
> 赞同：0
> 
> 时间：2012-12-05T15:44:27.383
> 
> 标签：android, apache-flex, tabs, flash-builder, ria

我是 flex 新手，我正在为移动设备构建应用程序。

我有一个选项卡式视图导航器应用程序，底部有选项卡。

在顶部，我有一个带有返回的操作栏和一些尚未设置的其他按钮。

我创建了一个主页选项卡，因为我想在初始屏幕之后为第一个视图创建一个主页，然后使用指南说选择下面的特定选项卡，问题是我不想在底部有主页选项卡.

有没有办法将主页保留为第一个视图，但不将其作为底部选项卡的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:00:48.670

简单来说：

1.  将 IndexChangeEvent 侦听器添加到您的 TabbedViewNavigator 实例 [ [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/IndexChangeEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/IndexChangeEvent.html) ]

2.  当索引更改或正在更改时，检查 tabbedViewNavigatorInstance.navigators[newIndex] firstView 是否等于 Home。

3.  如果是主页，则隐藏主页选项卡，否则显示主页选项卡，对于此任务，请查看此帖子 [[在 Spark TabBar 中隐藏选项卡](https://stackoverflow.com/questions/9129909/hiding-a-tab-in-a-spark-tabbar/11518142#11518142)]

实现本身可以根据您当前的流程以多种方式完成。

这是一个有效的快速示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" 
                                  applicationDPI="160" applicationComplete="onAppComplete(event)">

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import spark.components.DataGroup;
            import spark.events.IndexChangeEvent;

            import views.HomeView;

            private function onAppComplete(e : Event) : void {
                this.tabbedNavigator.addEventListener(IndexChangeEvent.CHANGE, onIndexChange);

                showHomeTab(false);
            }

            private function onIndexChange(e : IndexChangeEvent) : void {
                var vn : ViewNavigator = this.navigators[e.newIndex] as ViewNavigator;

                if(vn.firstView === HomeView){
                    showHomeTab(false);
                } else {
                    showHomeTab(true);
                }
            }

            private function showHomeTab(state : Boolean) : void {
                var dg : DataGroup = this.tabbedNavigator.tabBar.dataGroup;

                ///if HomeView is at index 0
                dg.getElementAt(0).visible = state;
                dg.getElementAt(0).includeInLayout = state;
            }
        ]]>
    </fx:Script>

    <s:ViewNavigator label="Home" width="100%" height="100%" firstView="views.HomeView"/>
    <s:ViewNavigator label="Other" width="100%" height="100%" firstView="views.OtherView"/>

</s:TabbedViewNavigatorApplication> 
```

# c# - 从 Web 应用程序访问 SharePoint 文档库？

> ID：13726974
> 
> 赞同：1
> 
> 时间：2012-12-05T15:44:34.363
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepointdocumentlibrary

是否可以从 Web 应用程序访问 SharePoint 2010 文档库？如果是这样，那么你能指出我正确的方向吗？

我需要编写一个允许文档版本控制、签入/签出、下载/上传和搜索的应用程序。

到目前为止，我已经编写了一个基本的 Windows 窗体应用程序，它可以完成前面提到的所有功能，但现在我需要从 Web 应用程序访问它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:30:17.707

从 Windows 窗体应用程序中，您可以使用托管客户端对象模型访问 SharePoint 文档库等。有关详细信息，请参阅此链接：

[http://msdn.microsoft.com/en-us/library/ee857094(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ee857094%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T23:37:57.590

首先，您应该检查要向 Web 应用程序公开的内容。这个 Web 应用程序会是面向公众（通过 Internet）的应用程序吗？还是仅在内部使用。

当它只在内部使用时，我会确保 web 应用程序可以访问 SharePoint 的默认 web 服务，并可以在此服务的帮助下查询文档库。您可以在此处找到此方法的示例：[使用 SharePoint Web Services 浏览文档库](http://www.codeproject.com/Articles/19087/Using-SharePoint-Web-Services-to-Explore-Document)

如果它是面向公众的 Web 服务，您应该检查您需要多少功能。因为这意味着您还必须向 Internet 公开您的 SharePoint 服务。另一种选择可能是编写自己的服务来实现所需的功能，然后公开该服务。这将降低您的安全风险，也许您可​​以重用您在 Windows 窗体应用程序中使用的一些代码并将其移动到服务中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T17:43:55.700

首先，您需要添加对 Microsoft.SharePoint.dll 的引用。

以下是如何访问文档库中的项目的示例代码：

```
 using (SPSite site = new SPSite("SiteUrl"))
        {
            using (SPWeb web = site.OpenWeb())
            {
                web.AllowUnsafeUpdates = true;
                //documentCategories is list of doc library names on SPSite, so catName  could be something like "Invoices"
                foreach (string catName in documentCategories)
                {
                    SPFolder folder = GetFolder(web, catName, processInstanceId, false);
                    if (folder.Exists)
                    {
                        //handle specific document...
                        foreach (SPFile file in folder.Files)
                        {

                        }
                    }
                }
                web.Close();
            }
            site.Close();
        } 
```

好吧，这只是让您入门的基础。请注意，您必须在网页中启用 Windows 身份验证和模拟才能使用实际用户凭据访问 SPSite，或者您可以模拟特定用户，这不是一个好习惯。

更多技术细节请访问：

[网站](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsite.aspx)

[SPWeb](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.aspx)

[SP文件](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.aspx)

# macos - 为什么 OS X 允许在同一个 TCP 端口上监听两次？

> ID：13726975
> 
> 赞同：10
> 
> 时间：2012-12-05T15:44:35.920
> 
> 标签：macos, sockets, netcat

我试图通过使用 netcat 监听某些端口来调试 OS X 上的 Jenkins 中的端口分配问题，这导致了一些奇怪的结果。

* * *

在 OS X 10.8.2 的终端中：

```
$ uname -rs
Darwin 12.2.1

$ nc -l 54321 
```

然后在第二个终端：

`$ nc -l 54321`

在第三个终端中，`lsof`显示两个实例都绑定到同一个端口：

```
$ lsof -i | grep 54321
nc  70706 chris    3u  IPv4 0x55618c024692f4d1      0t0  TCP *:54321 (LISTEN)
nc  70769 chris    3u  IPv4 0x55618c0232cb8661      0t0  TCP *:54321 (LISTEN) 
```

* * *

在 Linux 上：

第一个终端：

```
$ uname -rs
Linux 3.2.0-34-generic

$ nc -l 54321 
```

第二终端：

```
$ nc -l 54321
nc: Address already in use 
```

* * *

为什么 OS X 也不报告该地址已被使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T01:57:33.250

OS X 上的二进制文件正在设置 SO_REUSEPORT 套接字选项，它允许完全重复的绑定（[OS X 上的 setsockopt](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/setsockopt.2.html)）。您可以在 OS X 上使用 dtrace 验证这一点。

Linux 上的 netcat 二进制文件不执行此操作，因此您会收到预期的绑定错误。同样，您可以使用 strace 进行验证。我相信 SO_REUSEPORT 已被弃用，甚至在较新的 Linux 内核上都不可用。

# ios - 视图控制器 URL 请求和连接正确完成后崩溃

> ID：13726976
> 
> 赞同：0
> 
> 时间：2012-12-05T15:44:42.423
> 
> 标签：ios, xcode, connection, request, unrecognized-selector

我的应用程序转到视图控制器，发出两个自动服务器请求，建立连接，检索数据并正确显示它，然后完成。用户单击“喜欢”按钮，又发出了两个服务器请求 - 成功。显示正确。需要被完成。然后它崩溃，并出现错误：

```
[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 
```

我正在使用非常方便的 SimplePost 类（由 Nicolas Goles 编写）。这是我的请求，它们都在 viewDidLoad 中调用：

```
- (void) setScore {
    Profile *newPf = [[Profile alloc] initID:thisUser profil:@"na" scor:score];
    NSMutableURLRequest *reqPost = [SimplePost urlencodedRequestWithURL:[NSURL URLWithString:kMyProfileURL] andDataDictionary:[newPf toDictPf]];
    (void) [[NSURLConnection alloc] initWithRequest:reqPost delegate:self];
}
- (void) saveHist {
    History *newH = [[History alloc] initHistID:thisUser hQid:thisQstn hPts:score hLiked:NO];
    NSMutableURLRequest *reqHpost = [SimplePost urlencodedRequestWithURL:[NSURL URLWithString:kMyHistURL] andDataDictionary:[newH toDictH]];
    (void) [[NSURLConnection alloc] initWithRequest:reqHpost delegate:self];
} 
```

我的自定义类（配置文件和历史记录）的唯一“新”事物是 hLiked 的 BOOL，但它正在“工作” - 数据库正在正确更新。
然后，用户可以单击“喜欢”按钮（+ 或 -）。以下是其他请求：

```
- (IBAction)likeClick:(id)sender {
    double stepperValue = _likeStepper.value;
    _likesLbl.text = [NSString stringWithFormat:@"%.f", stepperValue];
    [self updateLikes];
    [self updateHist];
}
- (void) updateLikes {
    //  update the question with the new "liked" score
    NSInteger likesN = [_likesLbl.text integerValue];
    Questn *qInfo = [[Questn alloc] initQwID:thisQstn askID:0 wCat:@"na" wSit:@"na" wAns1:@"na" wPts1:0 wAns2:@"na" wPts2:0 wAns3:@"na" wPts3:0 wAns4:@"na" wPts4:0 wJust:@"na" wLikes:likesN ];
    NSMutableURLRequest *reqPost = [SimplePost urlencodedRequestWithURL:[NSURL URLWithString:kLikesURL] andDataDictionary:[qInfo toDictQ]];
    (void) [[NSURLConnection alloc] initWithRequest:reqPost delegate:self];
}
- (void) updateHist {
    History *newH = [[History alloc] initHistID:thisUser hQid:thisQstn hPts:98989 hLiked:YES];
    NSMutableURLRequest *reqHpost = [SimplePost urlencodedRequestWithURL:[NSURL URLWithString:kHistURL] andDataDictionary:[newH toDictH]];
    (void) [[NSURLConnection alloc] initWithRequest:reqHpost delegate:self];
} 
```

很乱，对吧？这是我的连接代码：

```
//  connection to URL finished with Plist-formatted user data array returned from PHP
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSDictionary *array = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:data mutabilityOption:NSPropertyListImmutable format:0 errorDescription:nil];
    BOOL keyLikeExists = [array objectForKey:@"likes"] != nil;
    if( keyLikeExists ) {
        _likesLbl.text = [array objectForKey:@"likes"];
    }
}
- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Connection did fail." );
} 
```

这一切都做得很好，然后几秒钟后它因上面提到的“无法识别的选择器”错误而崩溃，就像仍然有一些 URL 活动发生一样。不应该有。

以前有人见过这种东西吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:26:31.477

在您的代码中某处调用了 method `isEqualToString:`。发送该消息的东西是`NSNumber`对象而不是字符串。要么存在与对象类型有关的逻辑问题，要么存在内存问题，其中字符串被过度释放并且其内存被重新用于保存数字。

如果没有看到调用的上下文，很难猜测。

如果你在异常上中断，堆栈跟踪应该告诉你它在代码中失败的地方。

# perl - Perl - 在文件中固定数量的字符后添加新行和制表符？

> ID：13726979
> 
> 赞同：1
> 
> 时间：2012-12-05T15:44:53.380
> 
> 标签：perl, data-manipulation

我有一个 Perl 问题。我有一个文件，该文件的每一行都包含不同数量的 As Ts Gs 和 Cs 该文件如下所示

```
ATCGCTGASTGATGCTG
GCCTAGCCCTTAGC
GTTCCATGCCCATAGCCAAATAAA 
```

我想为每一行添加行号然后每 6 个字符插入一个 \n，然后在创建的每个新行上每 3 个字符放置一个空白空间

输出示例应为

```
Line NO 1                   
ATC GCT
GAS TGA
TGC TG

Line NO 2
GCC TAG
CCC TTA
GC 
```

我想出了下面的代码：

```
my $count = 0;
     my $line;
     my $row;
     my $split;
     open(F, "Data.txt") or die "Can't read file: $!";
     open (FH, " > UpDatedData.txt") or die "Can't write new file: $!";
     while (my $line = <F>) {
      $count ++ ;
      $row = join ("\n",  ( $line =~ /.{1,6}/gs));
      $split = join ("\t",  ( $row =~ /.{3}/gs ));
      print FH "Line NO\t$count\n$split\n";
    }
    close F;
    close FH; 
```

然而

它给出了以下输出

```
Line NO 1                   
ATC GCT
GA  STG A
T   GCT G

Line NO 2
GCC TAG
CC  CTT A
G   C 
```

这必须有一些东西， \n 在这行代码中被算作一个字符

```
$split = join ("\t",  ( $row =~ /.{3}/gs )); 
```

有人知道如何解决这个问题吗？

任何帮助将不胜感激。

提前致谢

西奈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:35:40.760

这应该可以解决您的问题：

```
use strict;
use warnings;

while (<DATA>) {
  s/(.{3})(.{0,3})?/$1 $2 /g;
  s/(.{7}) /$1\n/g;

  printf "Line NO %d\n%s\n", $., $_;
}

__DATA__
ATCGCTGASTGATGCTG
GCCTAGCCCTTAGC
GTTCCATGCCCATAGCCAAATAAA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:54:25.533

这是一个单行：

```
perl -plwe 's/(.{3})(.{0,3})/$1 $2\n/g' data.txt 
```

正则表达式查找 3 个字符（不匹配换行符），后跟 0-3 个字符并捕获这两个字符，然后在它们之间插入一个空格并在其后插入一个换行符。

要跟踪行号，您可以添加

```
s/^/Line NO $.\n/; 
```

它将根据输入的行号进行枚举。如果您愿意，可以保留一个简单的计数器，例如`++$i`.

*   `-l`选项将为您处理换行符。

您也可以分两个阶段执行此操作，如下所示：

```
perl -plwe's/.{6}\K/\n/g; s/^.{3}\K/ /gm;' 
```

在这里使用`\K`(keep) 转义序列来保留字符串的匹配部分，然后在 6 个字符后简单地插入一个换行符，然后在“行开头”之后插入一个空格 3 个字符，它带有`/m`修饰符也包括换行符。

所以，简而言之：

```
perl -plwe 's/.{6}\K/\n/g; s/^.{3}\K/ /gm; s/^/Line NO $.\n/;' data.txt
perl -plwe 's/(.{3})(.{0,3})/$1 $2\n/g;    s/^/Line NO $.\n/;' data.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:16:03.673

另一种解决方案。请注意，它使用*词法文件**句柄* 和`open`.

```
#!/usr/bin/perl
use warnings;
use strict;

open my $IN,  '<', 'Data.txt'        or die "Can't read file: $!";
open my $OUT, '>', 'UpDatedData.txt' or die "Can't write new file: $!";
my $count = 0;
while (my $line = <$IN>) {
    chomp $line;
    $line =~ s/(...)(...)/$1 $2\n/g;         # Create pairs of triples
    $line =~ s/(\S\S\S)(\S{1,2})$/$1 $2\n/;  # A triple plus something at the end.
    $line .= "\n" if $line !~ /\n$/;         # A triple or less at the end.
    $count++;
    print $OUT "Line NO\t$count\n$line\n";
}
close $OUT; 
```

# css - 当其中一个在底部时，使两个 DIV 填充其父级

> ID：13726980
> 
> 赞同：0
> 
> 时间：2012-12-05T15:44:58.777
> 
> 标签：css, html, css-float

我在一个 DIV 中有两个 DIV。其中一个 DIV 向左浮动，因此另一个 div 用于填充外部窗口。如果我放大或缩小外部 DIV，我希望在 DIV 内部填充外部 DIV。
示例代码：

```
<div id="main_container">
    <div id="left_container"></div>
    <div id="right_container"></div>
</div>​ 
```

和 CSS 规则是

```
#main_container {
    border: 1px ridge blue;
    overflow: hidden;
    height: 93%;
}

#left_container{
    margin: 10px;
    height: 100px;
    border: 1px solid red;
    float: left;
    overflow: hidden;
    min-width: 200px;
}

#right_container{
    margin: 10px;
    height: 100px;
    border: 1px solid magenta;
    min-width: 200px;
    overflow: hidden;
} 
```

​</p>

这是[jsfiddle代码。](http://jsfiddle.net/zd6jL/4/)

重新调整 html 窗口，当另一个在底部时，您会看到*红色*的一个没有填充它。

编辑：为了澄清，我添加了图片

![还行吧](../Images/18ce3fa1dbcb4ff8b96ce1ca4a3ab749.png)

![这不行](../Images/49ee573505c3244a2c93459b3998263a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:59:18.350

```
@media screen and (max-width: 441px) {
    #left_container{
        float: none;
    }
} 
```

`441px`只是一个例子（两个块`min-width`+边`margins`+ `border`- 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:47:53.780

添加

```
width: 98%; 
```

（根据需要调整）

到#left_container 和#right_container

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:49:17.523

### 给`min-width`主 div。

```
#main_container {
    border: 1px ridge blue;
    overflow: hidden;
    height: 93%;
    min-width: 400px;
} 
```

# google-earth-plugin - 卫星图像平铺放置不正确

> ID：13726985
> 
> 赞同：0
> 
> 时间：2012-12-05T15:45:08.723
> 
> 标签：google-earth-plugin

最近，我开始在我的 Google 地球插件中看到以下关于卫星图像的废话：

![在此处输入图像描述](../Images/3bc6ef7b00d2956ac47bda08f26c43cf.png)

当我缩放时，不正确的图块会淡入淡出，在某些缩放级别上，一切看起来都很好。

这发生在浏览器（chrome、IE9、Firefox）上，但只发生在我的机器上。我试过重新安装插件，但这似乎没有帮助。

我正在使用插件版本 6.2.2.6613

有谁知道可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:01:11.227

我最近一次又一次地看到这个问题。我第一次被告知它可能与硬件加速器冲突，但问题就消失了。

直到最近，我在同一个桌面应用程序中运行了两个插件实例，没有任何问题。然后几天前我又开始看到这个问题，尽管今天没有发生。我不知道这是否会有所帮助，但我建议您重新启动计算机。

我也想知道谷歌是否正在更新插件或地图......

抱歉，我帮不上什么忙，但我怀疑它很快就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:59:22.220

对我来说，这看起来像是 DirectX 问题。一种解决方法是强制插件使用 OpenGL。

您可以通过更改注册表项来控制插件是使用 DirectX 还是使用 OpenGL：

```
HKLM\SOFTWARE\Google\GoogleEarthPlugin\Render\RenderingApi 
```

允许的值为：

```
0 (DirectX)
1 (OpenGL) 
```

尝试将值设置为使用 OpenGL 以查看它是否可以解决问题。

此外，如果这是 DirectX 问题，您可以尝试通过 dxdiag禁用`direct3D`（以及 和），正如其他人所建议的那样。`texture acceleration`

最后，您也可以尝试`write combing`在您的卡上禁用它（如果已启用）。这通常通过您正在使用的卡的显示属性来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:22:25.603

我发现只有当我有多个插件实例运行时才会出现这个问题。特别是如果我让它同时在两个不同的浏览器中运行。