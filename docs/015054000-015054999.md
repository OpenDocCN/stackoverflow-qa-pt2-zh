# StackOverflow 问答 15054000-15054999

# angularjs - AngularJS中这个事件的问题

> ID：15054001
> 
> 赞同：0
> 
> 时间：2013-02-24T16:46:42.953
> 
> 标签：angularjs

我在玩 AngularJS，现在当我想遵循这个[例子](http://jsfiddle.net/johnlindquist/U3c2Q/)时：

Everthings 一直有效，直到我想启动最后一个事件： clearCompleted(); 我的浏览器立即抱怨说：

```
$scope.clearCompleted = function(){

        $scope.todos = _.filter($scope.todos, function(todo){
                    return !todo.done;
                });

    }; 
```

> ReferenceError: _ 未在 Object.TodoCtrl.$scope.clearCompleted 中定义

我知道它只是这个事件......想知道为什么？我也不明白这种语法：_.filter（这是什么_.？）我感觉是这样的：** _.filter（....**

任何的想法？

非常感谢您的宝贵时间！是/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:58:44.753

似乎您尝试使用 Underscore.js 而不将其包含在脚本标记中。

# algorithm - TrueSkill 对接会实施

> ID：15054004
> 
> 赞同：4
> 
> 时间：2013-02-24T16:46:55.487
> 
> 标签：algorithm

**你好！**

我正在关注本指南，了解 Microsoft TrueSkill 算法的工作原理[http://www.moserware.com/2010/03/computing-your-skill.html](http://www.moserware.com/2010/03/computing-your-skill.html)信息非常好，但忽略了应该如何实际选择玩家（这很明显，因为我猜这对于每场比赛都是独一无二的）。

我的问题是我提出的所有算法似乎都非常复杂（高时间复杂度）。假设我有 2 支球队，每支球队应该有 4 名球员。如果我使用蛮力，我需要检查当前可用的所有组合的匹配质量（遵循 trueskill 算法）。如果有很多玩家需要考虑，这将导致大量的迭代。

所以我问你是否可以给我任何关于如何更聪明地做的提示。也许您已经了解了一些解决此问题的信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-02T02:06:53.103

[我还用Python 中的 TrueSkill 算法](http://trueskill.org/)实现了一个配对服务，我担心同样的问题。

我的匹配服务等待一段时间来收集匹配请求。然后它按用户的 TrueSkill μ 值对请求进行排序并对其进行划分。并再次等待。它无法找到最佳匹配，但速度很快。这是一个伪代码：

```
class Matchmaker(object):

    def matchmaking(self):
        sorted_pool = sorted(self.pool.itervalues(), key=by_rating)
        matches, self.pool = divide_uniformly(sorted_pool, expectation, minimum)
        return matches

    def run(self):
        while self.should_match():
            for match in self.matchmaking():
                if quality(match) < 0.5:
                    cancel(match)
                else:
                    succeed(match)
            time.sleep(self.interval) 
```

ps 你需要大量的用户和一个大的匹配池来获得评级系统和匹配服务的好处。

# windows - 由正常 Windows 提示启动的 Cygwin 中包含的排序命令不接受制表符的 $ 运算符

> ID：15054006
> 
> 赞同：3
> 
> 时间：2013-02-24T16:47:03.037
> 
> 标签：windows, cygwin, command-line-interface

我已经在我的机器上安装了 Cygwin，我想知道是否有一种方法可以在正常的 DOS 提示符下使用 sort 命令的全部功能。

我读过这个问题：[Unix Sort with Tab Delimiter](https://stackoverflow.com/questions/1037365/unix-sort-with-tab-delimiter) ，使用第二列对标签文件进行排序的命令是：

```
sort -t $'\t' -k 2 file.txt 
```

如果我在 Cygwin 环境中启动该命令，它会按预期工作，如果我从正常的 Windows 提示符启动它（我已将 sort.exe 重命名为 xsort.exe 以避免与本机 Windows 排序命令冲突）它不起作用，它无法识别 $ 运算符，它看到 \t 就像两个不同的字符并且操作失败。

是否可以从 DOS 提示符下使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T09:16:07.583

这是由`PATH`环境变量调节的。

在 DOS 提示符下运行以下命令：

```
echo %PATH% 
```

您将看到`C:\cygwin\bin`之后的路径`c:\Windows\system32`。

这意味着 Windows`sort.exe`将用于 command `sort`。

您需要`PATH`为 Windows 编辑环境变量以移动`c:\cygwin\bin`到`C:\Windows\system32`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T16:05:36.097

试试这个（在 Windows 中，选项卡是 '^t' 而不是 '\t'）：

```
sort -t'^t' -k2 file.txt 
```

# python - 我的 python 程序运行很慢

> ID：15054008
> 
> 赞同：4
> 
> 时间：2013-02-24T16:47:08.133
> 
> 标签：python, performance, oop, class

我正在制作一个（至少现在）从 TwitchTV（流媒体平台）检索流信息的程序。这个程序是为了自我教育，但是当我运行它时，只需要 2 分钟就可以打印出主播的名字。

如果这很重要，我在 Windows7 上使用 Python 2.7.3 64bit。

类.py：

```
#imports:
import urllib
import re

#classes:
class Streamer:

    #constructor:
    def __init__(self, name, mode, link):
        self.name = name
        self.mode = mode
        self.link = link

class Information:

    #constructor:
    def __init__(self, TWITCH_STREAMS, GAME, STREAMER_INFO):
        self.TWITCH_STREAMS = TWITCH_STREAMS
        self.GAME = GAME
        self.STREAMER_INFO = STREAMER_INFO

    def get_game_streamer_names(self):
        "Connects to Twitch.TV API, extracts and returns all streams for a spesific game."

        #start connection
        self.con = urllib2.urlopen(self.TWITCH_STREAMS + self.GAME)
        self.info = self.con.read()
        self.con.close()

        #regular expressions to get all the stream names
        self.info = re.sub(r'"teams":\[\{.+?"\}\]', '', self.info) #remove all team names (they have the same name: parameter as streamer names)
        self.streamers_names = re.findall('"name":"(.+?)"', self.info) #looks for the name of each streamer in the pile of info

        #run in a for to reduce all "live_user_NAME" values
        for name in self.streamers_names:
            if name.startswith("live_user_"):
                self.streamers_names.remove(name)

        #end method
        return self.streamers_names

    def get_streamer_mode(self, name):
        "Returns a streamers mode (on/off)"

        #start connection
        self.con = urllib2.urlopen(self.STREAMER_INFO + name)
        self.info = self.con.read()
        self.con.close()

    #check if stream is online or offline ("stream":null indicates offline stream)
    if self.info.count('"stream":null') > 0:
        return "offline"
    else:
        return "online" 
```

主要.py：

```
#imports:
from classes import *

#consts:
TWITCH_STREAMS = "https://api.twitch.tv/kraken/streams/?game=" #add the game name at the end of the link (space = "+", eg: Game+Name)
STREAMER_INFO  = "https://api.twitch.tv/kraken/streams/" #add streamer name at the end of the link
GAME = "League+of+Legends"

def main():
    #create an information object
    info = Information(TWITCH_STREAMS, GAME, STREAMER_INFO)

    streamer_list = [] #create a streamer list
    for name in info.get_game_streamer_names():
        #run for every streamer name, create a streamer object and place it in the list
        mode =  info.get_streamer_mode(name)
        streamer_name = Streamer(name, mode, 'http://twitch.tv/' + name)
        streamer_list.append(streamer_name)

    #this line is just to try and print something
    print streamer_list[0].name, streamer_list[0].mode

if __name__ == '__main__':
    main() 
```

该程序本身运行良好，只是真的很慢

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T17:09:43.700

程序效率通常属于 80/20 规则（或某些人所说的 90/10 规则，甚至是 95/5 规则）。也就是说，80% 的时间程序实际上是在 20% 的代码中运行的。换句话说，你的代码有一个“瓶颈”的好机会：一小部分代码运行缓慢，而其余代码运行得非常快。您的目标是识别瓶颈（或瓶颈），然后修复它（它们）以更快地运行。

最好的方法是分析您的代码。[这意味着您正在使用日志记录](http://docs.python.org/2/library/logging.html)模块记录特定操作发生的时间，像评论者建议的那样使用[timeit](http://docs.python.org/2/library/timeit.html)，使用一些内置的[分析器](http://docs.python.org/2/library/profile.html)，或者只是在程序的各个点打印出当前时间。最终，您会发现似乎花费最多时间的代码部分。

经验会告诉您，I/O（例如从磁盘读取或通过 Internet 访问资源）将比内存计算花费更长的时间。我对这个问题的猜测是，您使用 1 个 HTTP 连接来获取流媒体列表，然后使用一个 HTTP 连接来获取该流媒体的状态。假设有 10000 个流媒体：您的程序需要在完成之前建立 10001 个 HTTP 连接。

如果确实如此，将有几种方法可以解决此问题：

*   看看 Twitch.TV 在他们的 API 中是否有一些替代方案，允许您使用他们的流媒体模式检索用户列表，这样您就不需要为每个流媒体调用 API。
*   缓存结果。这实际上并不能帮助您的程序在第一次运行时运行得更快，但是您可能能够做到这一点，以便如果它在一分钟内第二次运行，它可以重用结果。
*   将您的应用程序限制为一次只处理几个流媒体。如果有 10000 个流媒体，您的应用程序究竟做了什么，它真正需要查看所有 10000 个流媒体的模式？也许最好只抓取前 20 个，此时用户可以按一个键来获取下一个 20，或者关闭应用程序。很多时候，编程不仅仅是编写代码，而是管理对用户想要什么的期望。这似乎是一个宠物项目，因此可能没有“用户”，这意味着您可以自由支配更改应用程序的功能。
*   使用多个连接。现在，您的应用程序与服务器建立一个连接，等待结果返回，解析结果，保存它，然后开始下一个连接。这个过程可能需要整整半秒。如果有 250 个主播，为每个主播运行这个过程总共需要两分钟多一点的时间。但是，如果您一次可以运行其中四个，则可能会将您的时间总共减少到不到 30 秒。查看[多处理](http://docs.python.org/2/library/multiprocessing.html)模块。请记住，某些 API 可能会限制您在特定时间可以建立的连接数，因此一次连接 50 个连接可能会激怒他们并导致他们禁止您访问他们的 API。在这里谨慎使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T16:58:23.037

您在这里使用了错误的工具来解析您的 URL 返回的 json 数据。您需要使用默认提供的[json](http://docs.python.org/2/library/json.html)库，而不是使用[regex](http://docs.python.org/2/library/re.html)解析数据。这将提高程序的性能

更改正则表达式解析器

```
#regular expressions to get all the stream names
        self.info = re.sub(r'"teams":\[\{.+?"\}\]', '', self.info) #remove all team names (they have the same name: parameter as streamer names)
        self.streamers_names = re.findall('"name":"(.+?)"', self.info) #looks for the name of each streamer in the pile of info 
```

到 json 解析器

```
self.info = json.loads(self.info) #This will parse the json data as a Python Object
#Parse the name and return a generator 
return (stream['name'] for stream in data[u'streams']) 
```

# ruby-on-rails - Mongoid embeds_many 和 has_many 到同一个模型

> ID：15054009
> 
> 赞同：4
> 
> 时间：2013-02-24T16:47:09.527
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有一个嵌入了许多“SuggestedPerson”的模型“Person”。SuggestedPerson 还引用另一个人（被建议的人）。所以 Person 需要 embed_many 和 has_many SuggestedPerson。问题是 Mongo 返回错误：

> 失败/错误：Mongoid::Errors::MixedRelations:
> 
> ```
>  Problem:
>      Referencing a(n) SuggestedPerson document from the Person document via a relational association is not allowed since the 
> ```
> 
> SuggestedPerson 被嵌入。

代码：

```
class Person
  embeds_many :suggested_persons, :class_name => "SuggestedPerson", :inverse_of => :person
  has_many :suggested_to_persons, :class_name => "SuggestedPerson", :inverse_of => :to_person
end

class SuggestedPerson
  embedded_in :person, :class_name => "Person", :inverse_of => :suggested_persons 
  belongs_to :to_person, :class_name => "Person", :inverse_of => :suggested_to_persons
end 
```

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T18:33:35.760

由于 Mongoid 只能做其中之一，因此需要一种解决方法。这是一个（未经测试的）示例，希望能让您朝着正确的方向前进。

如果您需要嵌入的 SuggestedPerson 对象来引用另一个 Person 对象（除了父对象），您可能需要在 SuggestedPerson 嵌入对象上创建一个字段，例如：

```
field :person_being_suggested_id, type: String 
```

该属性可以存储另一个 Person 对象的 ID。在您的 SuggestedPerson 表单上，假设我们在 SuggestedPerson 控制器 (@persons = Person.all) 中有一个包含所有 Persons 的实例变量，并且 Persons 有一个 name 属性，这样我们就可以使用这个不错的方法从下拉列表中进行选择帮手：

```
<%= f.collection_select(:person_being_suggested_id, @persons, :id, :name, {prompt: ""}) %> 
```

在您的 SuggestedPerson 模型中，您可以使用以下方法：

```
def suggested_persons_name
  Person.find_by(id: self.person_being_suggested_id).name
end 
```

这样，当您使用 Person 类的实例时，您可以调用如下内容：

```
@person.suggested_persons.each do |person|
  p person.suggested_persons_name
end 
```

或者说您正在使用 SuggestedPerson 类的实例：

```
@suggested_person.suggested_persons_name 
```

第一个示例将遍历 Person 对象中所有嵌入的 SuggestedPersons，在每个对象上调用方法Suggested_persons_name 并将返回所有名称的列表。第二个示例将仅返回为该特定嵌入文档建议的人的姓名。

# ios - 使用 UIImageJPEGRepresentation() 压缩的图像的 NSData 长度

> ID：15054016
> 
> 赞同：3
> 
> 时间：2013-02-24T16:48:48.943
> 
> 标签：ios, uiimage, nsdata

我们知道可以使用方法压缩图像，`UIImageJPEGRepresentation()`如下面的代码所示。

```
 NSData *imgData = UIImageJPEGRepresentation(imageResized, 0.5);
    NSLog(@"imgData.length :%d",imgData.length);

    imageResized = [UIImage imageWithData:imgData];
    NSData *imgData2 = UIImageJPEGRepresentation(imageResized, 1);

    NSLog(@"imgData2.length :%d",imgData2.length); 
```

日志是：

```
2013-02-25 00:33:14.756 MyApp[1119:440b] imgData.length :371155
2013-02-25 00:33:20.988 MyApp[1119:440b] imgData2.length :1308415 
```

我感到困惑的是，为什么`length`of`imgData`和`imgData2`是不同的。在我的应用程序中，图像应该上传到服务器。我应该上传`NSData`到服务器以节省存储空间吗？Android手机是否可以下载`NSData`并将其转换为图像？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T17:04:52.390

你从`UIImage`某个大小（比如 1024x768）开始。这需要 1024x768x4 字节的内存。然后将其压缩为 0.5 倍，得到 371,155 字节。

`UIImage`然后，您使用压缩数据创建一个新的。这仍然是 1024x768（或其他）`UIImage`，因此它现在占用与原始图像相同的内存量（1024x768x4）。然后将其转换为压缩较少的新 JPG，为您提供 1,308,415 字节。

即使您创建了压缩图像的未压缩版本，字节数也来自转换完整大小的`UIImage`. 第二张未压缩的图像虽然更大，但仍将具有与压缩图像相同的较低质量。

由于您的数据代表 JPG，因此下载数据的任何内容都可以将数据视为 JPG，包括 Android 手机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T16:56:19.260

第二个图像的字节数更大，因为您将更高的压缩质量值传递给`UIImageJPEGRepresentation`. 更高的质量需要更多的字节。

上传到服务器后的文件将是标准的 JPEG 文件，任何设备都可以查看，包括 Android。

# cocos2d-iphone - Cocos2d 内存泄漏：SimpleAudioEngine

> ID：15054017
> 
> 赞同：1
> 
> 时间：2013-02-24T16:48:49.623
> 
> 标签：cocos2d-iphone, simpleaudioengine

[在Cocos2D](http://www.cocos2d-iphone.org) iphone 游戏中出现大量内存泄漏。我用这些调用来播放音乐和效果。

![在此处输入图像描述](../Images/f39309722fec7087c53b9d7a22f06489.png)

![在此处输入图像描述](../Images/cb3a71b9f35fcb8a6b55eebe971b322e.png)

```
[[SimpleAudioEngine sharedEngine]  preloadEffect:kSoundTap];

[[SimpleAudioEngine sharedEngine] playBackgroundMusic:kMusic_LaunchScreen] ;

[[SimpleAudioEngine sharedEngine] playEffect:kSound_GettingPowerUp] ; 
```

有什么问题或需要释放什么吗？在 iPad3 中，如果我玩的时间更长，就会出现很多性能问题……在乐器中，只有这些泄漏被发现。我怎么解决这个问题 ？

这是另一个[类似的线程](https://stackoverflow.com/questions/5235123/simpleaudioengine-cocos2d-leaking-memory)，但没有公认的解决方案。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:05:45.527

不要保留或释放 AVAudioPlayer 对象。相反，您必须`end`参加会议。从我在突出显示行的第二个屏幕截图中可以看出，事件是“发布”，但根据文档 AVAudioPlayer 事件不应被发布（或保留）。

# prototypejs - 使用 Prototype 和 Scriptaculous 的幻灯片

> ID：15054023
> 
> 赞同：1
> 
> 时间：2013-02-24T16:49:14.040
> 
> 标签：prototypejs, slideshow, scriptaculous

我写了我的第一个 scriptaculous 脚本来创建一些 div 元素之间的幻灯片：

```
 var SlideShow = Class.create({
    initialize:function(element, delayStart){
        this.element = element;
        this.delayStart = delayStart;

        this.slides = this.element.childElements();

        this.numberOfSlides = this.slides.size();

        this.numberActiveSlide = 1;

        this.start_slideshow();
    },

    start_slideshow: function() 
    {
        this.switch_slides.delay(this.delayStart);
    },

    switch_slides: function() 
    {
        this.slides[this.numberActiveSlide].fade();

        if (this.numberActiveSlide == this.numberOfSlides) { this.numberActiveSlide = 1; } else { this.numberActiveSlide = this.numberActiveSlide + 1; }

        Effect.Appear.delay(this.slides[this.numberActiveSlide], 850);

        this.switch_slides.delay(this.delay + 850);
    }

});

document.observe("dom:loaded", function(){
var slideshows = $$('div.slideshow');
slideshows.each(
    function(slideshow) {
        s = new SlideShow(slideshow, 2);
    });
}); 
```

但我总是收到这个错误，而且我已经好几个小时了，我无法弄清楚我的问题出在哪里！

> Undefined 不是对象（评估 this.slides[this.numberActiveSlide]）；

谢谢 ！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:13:58.060

99% 确定这是一个上下文问题。确保[绑定](http://api.prototypejs.org/language/Function/prototype/bind/)函数调用，以便`this`在整个代码中保留。

调试`this`中的内容：它应该与中`switch_slides`的相同。如果不是，请将您的调用绑定到您的实例：`this``start_slideshow``switch_slides`

```
start_slideshow: function() 
{
    this.switch_slides.bind(this).delay(this.delayStart);
}, 
```

你可能必须`switch_slides`在它调用自己的地方做同样的事情。

# javascript - 如何在html输入中编写名称和id值相同属性的快捷方式？

> ID：15054024
> 
> 赞同：0
> 
> 时间：2013-02-24T16:49:17.900
> 
> 标签：javascript, jquery, html

```
<input type="text" id="motto" name="motto" value=""> 
```

与其写这么长，我可以有一些`nameid="motto"`吗？
如何在 javascript 中执行此操作？我以前一直在用 php 中的一个函数来做这个，只是好奇是否有可用的 javascript 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:53:40.833

`nameid`HTML 规范中没有定义这样的参数。因此，虽然您可以使用 javascript 实现这一点，但您首先会得到损坏的 HTML。我不建议你走那条路，但如果你决定违背我的建议并渲染损坏的标记，你可以用 jQuery 做：

```
$(function() {
    $('input').each(function() {
        var nameid = $(this).attr('nameid');
        $(this).attr('id', nameid).attr('name', nameid);
        $(this).removeAttr('nameid');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:54:45.993

你的意思是在*HTML中有一个**nameid*属性并在页面加载时用*JavaScript*修复它？

 **```
Array.prototype.forEach.call( // for each
    document.querySelectorAll(*[nameid]), // element with this attribute
    function (e) { // do
        var v = e.getAttribute('nameid'); // get the value
        e.setAttribute('id', v); // set id
        e.setAttribute('name', v); // set name
        e.removeAttribute('nameid'); // remove it
    }
); 
```

您应该知道任何具有此*nameid*属性的 HTML 都是**无效**的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:55:47.177

只需设置 ID，您可以将其放入您的 javascript 中以将名称设置为相同：

```
$('input[id]').each(function() { $(this).attr("name", this.id); }); 
```**

# warnings - 无法关闭严格标准警告、XAMMP、PHP 5.4.7

> ID：15054025
> 
> 赞同：0
> 
> 时间：2013-02-24T16:49:19.870
> 
> 标签：warnings, php, strict

我正在尝试让一些第三方 PHP 软件在 Windows 上运行（它在 Ubuntu 上运行）。

我将 XAMMP 与 Apache/2.4.3、PHP/5.4.7 一起使用

php.ini 文件 C:\xampp\php\php.ini 设置为不报告严格警告，如下所示：

```
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT 
```

我知道 PHP 正在读取它，它在 phpinfo() 中报告为已加载的配置文件，如果我故意将错误放入其中，则 apache 无法重新启动。

[这个问题](https://stackoverflow.com/questions/1248952/php-5-disable-strict-standards-error)有一个答案，建议修改根 .htaccess 如下：

```
php_value display_errors 0
php_value error_reporting 30719 
```

这也有一条评论说 .htaccess 是*唯一*适用于 PHP 5.4.7 的解决方案。

但是，仍然没有运气。除了切换到 WAMP，还有什么我应该尝试的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:29:11.593

我知道一些 WAMP 包会复制`php.ini`到`C:\Windows`. 运行`php -i`并确保 php 实际上正在使用`C:\xampp\php\php.ini`. 还要记住，从 PHP 5.4.0 开始，`E_STRICT`成为`E_ALL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:13:54.780

您提到的这个第三方软件可能会在您之后覆盖错误报告级别，因此“获胜”。检查这一点，如果发生这种情况，请适当配置它或确保最后覆盖设置。

# html - 当我从计算机打开它时，CSS 样式表不会影响我的 html 文件

> ID：15054027
> 
> 赞同：-3
> 
> 时间：2013-02-24T16:49:42.233
> 
> 标签：html, css, file

```
<!DOCTYPE html>

 <html>

 <head>
 <link rel="stylesheet" type="text/css" href="background.txt">

 </head>

 <body>

 </body>

  </html> 
```

内容`background.txt`：

```
 html { 
 background: url(desktop/dotcheese.jpeg) no-repeat center center fixed; 

 -webkit-background-size: cover;

 -moz-background-size: cover;

 -o-background-size: cover;

  background-size: cover;

  } 
```

这是我的代码。想象一下每个标签后面仍然有不等式符号。当我打开 html 文件时，它是空白的，并且不显示我在 css 文件中制作的背景。是因为我需要将两个文件都上传到互联网还是有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:55:31.027

如果我是你，我会尝试在 body 标签中包含一些内容，并将 CSS 背景属性设置为 body 标签或内部 div，而不是 html 标签。另外，为什么不将 CSS 文件重命名为 .css？例子：

```
<html>
  <head>
  <title>Test</title>
  <link rel="stylesheet" type="text/css" href="background.css">
  </head>
  <body>
    <p>Test</p>
  </body>
</html>

body {
  background: url(desktop/dotcheese.jpeg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

我认为这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:10:50.987

我认为背景图像的路径是错误的。您似乎正在尝试访问桌面上的文件，但相对路径很可能不正确。尝试移动文件夹中的所有 3 个文件并更改背景： url( **desktop** /dotcheese.jpeg) no-repeat center center fixed；到背景：url（*dotcheese.jpeg*）无重复中心中心固定；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:50:31.233

1.  检查 CSS 文件的路径是否正确。我会将 HTML 和 CSS 文件放在同一个文件夹中进行试用。如果可行，则可以将文件放在不同的文件夹下。另外，请记住提供 CSS 文件的相对路径。

2.  检查背景图像的路径是否正确。

# jquery - 使用 Jquery 拖入区域时播放视频

> ID：15054029
> 
> 赞同：0
> 
> 时间：2013-02-24T16:50:10.080
> 
> 标签：jquery, html, jquery-ui

我正在尝试找到一种使用 JQUery 将视频拖到可放置区域的方法。当此视频被放入该区域时，它会展开并开始播放。我还希望能够将视频拖回并让它停止，这允许用户将另一个视频拖入......关于如何完成的任何想法？

我现在只有

```
$function () 
{
    $("#drag").draggable();
    $("#drop").droppable(
    {
        drop: function (event, ui) 
        {
            $(this)
                .addClass ("ui-state-highlight")
                .find("p")
                .html("dropped!");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:33:34.760

这是一个例子：http: [//jsfiddle.net/UQTY2/26/](http://jsfiddle.net/UQTY2/26/)

```
<!DOCTYPE html>
<html>
<body>    
    <img class="drag" width="200px" videourl="http://www.w3schools.com/html/mov_bbb.mp4" id="image" src="http://www.bigbuckbunny.org/wp-content/themes/bunny/graphics/header1.jpg" />

    <video id="video" class="drop" width="320" height="240" controls style="background-color:grey">
      Your browser does not support the video tag.
    </video>
</body>
</html>

$(document).ready(function(){

    $(".drag").draggable();
    $(".drop").droppable(
    {
        drop: function (event, ui) 
        {
           var url = $(ui.draggable).hide().attr('videourl');
           var $video = $('#video')
           $video.empty().append('<source src="'+url+'" type="video/mp4" />'); 
           $video.get(0).play();
        }
    });
}); 
```

# apache - Linux 虚拟主机子目录不起作用

> ID：15054031
> 
> 赞同：0
> 
> 时间：2013-02-24T16:50:29.450
> 
> 标签：apache, virtualhost

我只能访问 1 个网站“/resume/”，子目录网站在外部不可见？站点“/resume2/”试图指向/resume/。所有子站点都试图指向 /resume/

```
<VirtualHost *:80>
  ServerName resume
 ServerAlias resume
  DocumentRoot "/var/www/html/resume/"
<Directory /var/www/html/resume/>
  DirectoryIndex index.php phpinfo.php index.html index.htm  
  Options Indexes MultiViews FollowSymLinks
            AllowOverride All
            Order allow,deny
            allow from all
</Directory>
</VirtualHost>

<VirtualHost *:80>
  ServerName resume2
 ServerAlias resume2
  DocumentRoot "/var/www/html/resume2/"
<Directory /var/www/html/resume2/>
  DirectoryIndex index.php phpinfo.php index.html index.htm  
  Options Indexes MultiViews FollowSymLinks
            AllowOverride All
            Order allow,deny
            allow from all
</Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:08:47.647

我很确定您应该在 VirtualHost 标记后面定义不同的主机名/IP 或端口，例如

```
<VirtualHost resume.mydomain.de:80>
 ServerAlias resume
 ServerName resume.mydomain.de
 DocumentRoot "/var/www/html/resume/"
 ...
</VirtualHost> 

<VirtualHost resume2.mydomain.de:80>
 ServerAlias resume
 ServerName resume.mydomain.de
 DocumentRoot "/var/www/html/resume2/"
 ...
</VirtualHost> 
```

... *resume.mydomain.de*和*resume2.mydomain.de*被解析为两个不同的 IP，这两个 IP 都在您的主机上配置。您也可以使用相同的 IP 和不同的端口。无论如何，请记住，您需要为每个 VirtualHost 的配置添加一个监听标签。

希望有帮助！干杯...

# java - 用于验证字符串的java正则表达式？

> ID：15054035
> 
> 赞同：1
> 
> 时间：2013-02-24T16:51:20.013
> 
> 标签：java, regex, numeric

大家好，我想编写一个正则表达式来检查一个值是否只有数字但 0 不在第一位。例如值 10 是正确的，但值 01 是错误的。

到目前为止我有这个`mystr.matches("[123456789]+")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:56:49.890

试试这个：

```
mystr.matches("^[1-9]\\d*$") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T16:53:38.767

我认为应该做的工作：`"([1-9]+[0-9]*)"`

干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T16:53:45.543

建议的解决方案：

```
mystr.matches("[1-9]\\d*") 
```

解释：

*   `[1-9]`首先检查第一个数字是否在 1 到 9 之间。
*   `\\d*`查找任何数字（从 0 到 9）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T17:19:25.060

这里的所有答案都将验证像 1, 2, 3, ..., 10, 11, ... 这样的数字，但如果您还想包括 simple `0`but not `00`，`01`等等，您可以使用

```
mystr.matches("0|[1-9][0-9]*") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T17:14:37.883

你也可以使用这个正则表达式

```
^(?!0)\d+$ 
```

# java - 如何在休眠中进行 OneToMany 注释

> ID：15054036
> 
> 赞同：0
> 
> 时间：2013-02-24T16:51:31.590
> 
> 标签：java, jpa, one-to-many

我有一个数据库，其中一些表之间存在关系，例如，我必须表 Person 和 Company，并且它们的 Id 之间存在一对多的关系，该关系构建在由 hibernate 生成的表名 Person_Company 中。当我在 java 中使用 @OnetoMany 和 @ManytoOne 注释时，它会在它们之间建立关系，但不是根据 Person_Company 表，我只使用表的 Id 什么是正确的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:57:46.483

您希望使用连接表映射关联。所以注释是 (drumroll...) [`@JoinTable`](http://docs.oracle.com/javaee/6/api/javax/persistence/JoinTable.html)。javadoc 有示例，[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-manytoone)也有。

# linux - 如何设计需要通过网络发送数据的守护程序服务？

> ID：15054043
> 
> 赞同：0
> 
> 时间：2013-02-24T16:52:16.727
> 
> 标签：linux, networking, service

我需要设计一个服务，该服务将提供有关它正在运行的主机的信息（例如可用磁盘空间、内存、进程等......）。这些数据将通过网络发送到中央存储库。该服务将作为 Linux 守护程序运行。

我的问题来了：我应该将服务设计为“中央存储库”连接并请求当前数据的服务器进程，还是连接到中央存储库并提供其当前数据的客户端进程。优点和缺点都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:57:00.373

您应该使用 snmp 从主机获取数据，因为它已经完成了您所说的操作。然后，您可以设置一个进程在中央存储库服务器上每 N 分钟运行一次，以保存当前数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:42:36.910

我认为这无关紧要，除非其中一台计算机负载过重，并且您不希望这种通信妨碍您。如果是这种情况，那么我会将其作为轻负载机器上的服务器，用于查询重负载机器上的守护进程（假设重负载机器是您想要从中获取信息的机器）。

# wpf - 接受参数的 WPF MainWindow

> ID：15054044
> 
> 赞同：2
> 
> 时间：2013-02-24T16:52:19.303
> 
> 标签：wpf

我需要使用在主窗口构造函数中注入的记录器来启动我的 WPF 应用程序。
使用参数启动 MainWindow() 的流程是否正常？
（我读了这个“[如何编辑..](https://stackoverflow.com/questions/10166531/how-do-i-edit-the-mainwindow-constructor-of-a-wpf-application) ”并且我没有像他们建议的那样做..）

```
public partial class App : Application
{
    private void Application_Startup(object sender, StartupEventArgs e)
    {
        ILoggingService logger = new NLogService(string.Format("testLogger"));
        MainWindow mainWindows = new MainWindow(logger);
        mainWindows.Show();
    }

public partial class MainWindow : Window
{
    public MainWindow(ILoggingService logger) 
    {
        InitializeComponent();
        this.logger = logger;
    }

<Application x:Class="Test.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Startup="Application_Startup"> 
```

# joomla - joomla 模块 - 文章之间还是文章内？什么是正确的？

> ID：15054048
> 
> 赞同：1
> 
> 时间：2013-02-24T16:52:46.210
> 
> 标签：joomla, joomla3.0

我想在我的页面上放置文章和模块。它应该看起来像我的抓捕：

![](../Images/d7a35a36d135380edd8278dfd10736b0.png)

我想知道我是否可以制作 4 篇文章和一个模块（信息框）并将其放在这些文章之间，或者我应该只创建一篇看起来像孔区域的文章（文章 1-4 + 信息框）？到目前为止，我已经尝试将 {loadposition infobox-pos} 写入第 2 条。但盒子宽度不是 100% 而是 50%。

如果我用文章 1-4 中的内容来写一篇大文章，那将不适合我的响应式布局。

我使用 T3 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T16:08:52.697

您还可以使用 {loadmodule YourCustomModuleTitle} 并将其`<div>`与自定义样式属性一起放入，例如 `<div style="width:100%;float:right">{loadmodule MyModule}</div>` 或 `<div class="something">{loadmodule MyModule}</div>`

注意：加载的模块必须分配给相同的菜单项或“全部”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:07:32.897

Joomla 本身不支持这一点，因为模块输出由模板控制，组件输出（在本例中为 com_content、view=category、layout=blog）在渲染模块之前处理。

您可以通过多种方式进行操作，我将它们按顺序列出：

1.  编写一个在浏览器中移动片段的 jquery 脚本。您也可以使用 mootools，它与 joomla 捆绑在一起，但很可能您已经加载了 jquery。

2.  为上述视图编写一个视图覆盖：因此将 /components/com_content/view/category/tmpl 复制到 /templates/your_template/html/com_content/category （复制所有文件）。然后编辑 blog.php 并在那里插入你的模块，使用类似 /plugins/content/loadmodule/loadmodule.php 的东西：

    ```
     $document   = JFactory::getDocument();
        $renderer   = $document->loadRenderer('module');
        $modules    = JModuleHelper::getModules($position);
        $params     = array('style' => $style);

        foreach ($modules as $module) {
            echo $renderer->render($module, $params);
        } 
    ```

3.  编写内容插件

# jquery - Jquery Ajax 保护

> ID：15054055
> 
> 赞同：0
> 
> 时间：2013-02-24T16:53:58.677
> 
> 标签：jquery, ajax, referrer

我想知道是否有办法将我的 ajax 结果限制在我的域中？为了防止一个人只是创建一个脚本并调用 ajax url。

大多数人都告诉我，推荐人不应该被信任。

# ios - UITabBarController 中 tabBarItems 的大小

> ID：15054056
> 
> 赞同：0
> 
> 时间：2013-02-24T16:54:00.457
> 
> 标签：ios, objective-c, ipad, uitabbarcontroller

我的 APP 中有 4 个标签`iPad`。问题是有时文本比按钮大，但我有更多空间可以使用。但是，`UITabBarController`并没有使用`tabBarItems`. 有选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:14:17.767

UITabBarController 会自动在两者之间插入空格。你可以做两件事

1.  覆盖 UITabButton 的 sizeThatFits 方法给它你自己的大小
2.  在中间插入负宽空格

对于选项 2，这是我用于 UINavigationBar 工具栏的一些示例代码（也应该适用于 UITabBarController）

```
UIBarButtonItem *space = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:self action:nil];
space.width = -10;

[self setToolbarItems:[[NSArray alloc] initWithObjects:tab_item1,space,tab_item2, nil] animated:NO]; 
```

我建议在左侧使用一个空格项，在右侧使用一个空格项，在每个选项卡按钮之间使用一个空格项。

# c++ - _get_timezone 是如何工作的？

> ID：15054072
> 
> 赞同：3
> 
> 时间：2013-02-24T16:55:59.127
> 
> 标签：c++, c, time

我正在尝试纠正一个表现得很奇怪的时间戳类。它所要做的是在构造时获取当前时间或作为字符串传递的时间。

我只想使用 UTC，因为这些日期并没有真正显示在任何地方，而是一个时间戳和另一个时间戳之间的差异。

无论如何，我调用`strptime(timestamp, m_format.c_str(), &time);`tm 从字符串中获取时间。这个字符串是 UTC 时间，所以如果我想调用`mktime`time_t 来获取时间，我必须用当前时区修改它，所以我这样做`time.tm_hour-=tz/3600`是`tz`通过调用`_get_timezone`. 问题是这个函数似乎返回 28800 这是默认值，但如果我稍后在代码中调用它，它会给我 -7200 这是正确的值。

我必须做任何事情来初始化这个值吗？我们有一个庞大的代码库，我不知道这之间发生的一切。

此外，如果有人有类似课程的链接，我会非常感激，因为我可能会注意到我的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-24T12:16:36.233

_get_timezone() 在调用 _tzset() 之前返回 Redmond 默认值 28800（太平洋标准时间）。_tzset() 将被许多基于时间的函数隐式调用（然而，localtime/mkttime 似乎没有调用它）。

我也遇到了一个问题，它没有被初始化，或者它被初始化，然后翻转回 28800，然后再次初始化。我决定完全避免它。

这是我用来在 Windows 上获取信息的机制。这不会在 _get_timezone 中遭受明显的初始化竞争：

```
TIME_ZONE_INFORMATION tz;
DWORD rc = ::GetTimeZoneInformation(&tz);
offset_minutes = tz.Bias + (TIME_ZONE_ID_DAYLIGHT != rc ?  tz.StandardBias : tz.DaylightBias);
offset_seconds = offset_minutes * 60; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T16:23:34.243

我将定义我自己的函数 time_offset 如下

```
#include <time.h>
double time_offset()
{
    time_t now = time(NULL);

    struct tm *gm = gmtime(&now);
    time_t gmt = mktime(gm);

    struct tm *loc = localtime(&now);
    time_t local = mktime(loc);

    return difftime(local, gmt);
} 
```

这是取自[这里](https://stackoverflow.com/questions/15911278/get-timezone-alternative) 希望这有帮助

# unit-testing - 单元测试与集成测试及其维护

> ID：15054075
> 
> 赞同：2
> 
> 时间：2013-02-24T16:56:22.983
> 
> 标签：unit-testing, integration-testing

我正在开发一个在并行开发环境中不断增强的 Web 应用程序（在两个不同的环境中开发两个需求，并在第一个需求发布到生产环境时将第一个代码库合并到第二个代码库）。

我的问题是关于应用程序及其维护的集成测试和单元测试。

带有模拟的单元测试使得难以在并行开发中维护测试，并行开发中的集成测试（使用 selenium）使得难以在数据库中维护所需的数据（这可能比修复失败的单元测试容易）

我倾向于集成测试，因为合并代码不会破坏用例，但单元测试用例可能会因预期而因合并代码而失败。该应用程序有点旧并且设计不正确对于单元测试和重构代码以及维护单元测试用例变得越来越困难。请提出更好的测试方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:11:10.153

单元测试和集成测试都有自己的位置。顾名思义，单元测试验证单元的行为是否符合预期。确实，集成测试涵盖了单元测试涵盖的相同代码。但是单元测试可以帮助您更轻松地查明问题。而不是调查失败以了解系统的哪个部分对问题负责 - 您有一个失败的单元测试可以帮助您找出问题。进行单元测试的另一个原因是速度。单元测试应该很快。它们不应依赖于各种系统依赖项（您应该为此使用模拟和存根）。如果您的单元测试覆盖率很高，那么您会在开始漫长的测试周期之前快速获得有关系统质量的反馈。

实际上，您通常会使用各种级别的自动化测试：

1.  烟雾测试。这是在最基本的场景中测试系统各个部分的单元测试。它们通常用作不签入错误代码的门控签入的一部分。你需要这个速度很快。
2.  回归 - 单元测试。通常是持续集成的一部分。同样，您需要尽可能快，以便构建不会花费太长时间。
3.  完整的回归 + 集成测试。这些是需要更长运行时间的更多系统测试。这些通常在夜间构建中每天运行一次，甚至更少（取决于长度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:36:40.177

W/关于单元测试问题：

我怀疑你经常需要重构的单元测试的水平有点太低了。通常，最好有一些更高级别的测试，通过改变输入来执行较低级别的代码。

假设没有不必要的代码，更高级别的测试仍然应该提供良好的代码覆盖率（如果他们无法访问代码，为什么代码在那里？）。

W /关于功能测试问题：

您可能需要考虑一个有代表性的数据样本（或几个）。这样你就可以有一个已知的输入，所以你应该得到可预测的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T01:09:51.017

如果您发现维护某些类型的测试的成本太高，考虑放弃它们是明智的。我认为集成测试对于 QA 来说更重要，如果我只能选择一种类型的测试（单元与集成），那就是我会选择的。

但是，首先您可能还想考虑是否有一种方法来考虑单元测试以避免这些维护问题。当我第一次开始使用模拟时，我花了一段时间才找到合适的平衡点。根据我的经验，我发现最好尽可能避免模拟（有期望）。不过，我确实使用了模拟库，主要是为了简单的存根而不是更复杂的模拟。如果您有兴趣，我不久前写了[一篇关于此的博客文章。](http://www.alittlemadness.com/2009/03/04/four-simple-rules-for-mocking/)

# c - 试图从文件中查找和替换字符串

> ID：15054077
> 
> 赞同：1
> 
> 时间：2013-02-24T16:56:39.490
> 
> 标签：c, file, replace

```
 void replaceString(char* file, char* str, char* replace)
    {
        FILE* fp = fopen(file,"rt");
        char buffer[BUFFER];
        while(fgets(buffer,BUFFER,fp)!=NULL)
        {
            char* s;
            s=strstr(buffer,str);
            if(s!=NULL)
            {
                strcpy(s,replace);
                printf("%s is replaced by %s\n",str,replace);
            }
        }
        fclose(fp);
    }

    int main(int argc, char **argv)
    {
        char* file= "text.txt";
        replaceString(file,"is","was");
        printFile(file);
        return 0;
    } 
```

伙计们，我是文件操作的新手，试图找到一个字符串并将其替换为另一个字符串。请帮忙！我正在尝试以“rt”模式打开文件。在一些示例代码中看到了这一点。不确定模式。我猜我需要使用 temp.txt 文件来做到这一点！可以在不使用任何其他文件的情况下在单个文件中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T07:30:00.147

此代码替换所有出现的“原始”文本。您可以根据需要进行修改：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static void
replaceAllString(char *buf, const char *orig, const char *replace)
{
    int olen, rlen;
    char *s, *d;
    char *tmpbuf;

    if (!buf || !*buf || !orig || !*orig || !replace)
        return;

    tmpbuf = malloc(strlen(buf) + 1);
    if (tmpbuf == NULL)
        return;

    olen = strlen(orig);
    rlen = strlen(replace);

    s = buf;
    d = tmpbuf;

    while (*s) {
        if (strncmp(s, orig, olen) == 0) {
            strcpy(d, replace);
            s += olen;
            d += rlen;
        }
        else
            *d++ = *s++;
    }

    *d = '\0';

    strcpy(buf, tmpbuf);
    free(tmpbuf);
}

int
main(int argc, char **argv)
{
    char str[] = "malatya istanbul madrid newyork";

    replaceString(str, "malatya", "ankara");
    printf("%s\n", str);
    replaceString(str, "madrid", "tokyo");
    printf("%s\n", str);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T05:57:32.870

以下是您的算法中的一些错误。

*   您一次阅读**并查看**一个 BUFFER 字符，没有重叠。如果`str`出现在缓冲区之间怎么办？（即第一部分`str`在缓冲区的末尾，第二部分在下一个缓冲区的开头）。

*   您尝试`str`使用`replace`直接在缓冲区中覆盖`strcpy`. 如果两个字符串的长度不同怎么办？如果`replace`比 短`str`，你仍然有结尾，`str`如果`replace`更长，它将覆盖下面的文本`str`

*   即使它们的长度相同，`strcpy`也要在副本末尾添加最后一个 0 字符（这就是他们告诉您字符串在哪里结束的方式）。你绝对不想要那个。也许`strncpy`在这里是一个更好的建议，尽管如果两个字符串的长度不同，它仍然不起作用。

*   您替换了缓冲区中的字符串，但对“更正”的缓冲区不做任何事情！缓冲区不是文件，文件的内容被复制到缓冲区中。所以你改变了副本，然后什么都没有。文件不会改变。您需要将更改写入文件，最好是另一个文件。

编写这样的替换并不像您想象的那么简单。我可能会尝试帮助您，但是如果您只是想学习使用文件并且仍然不完全熟悉字符串，那么这可能会让您有些头疼。

`BUFFER`如果您有足够的内存一次读取整个文件（如果大于文件大小），则在单个文件中进行替换很容易，但如果不是特别是在您的情况下，`replace`则非常棘手，其中`str`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T05:39:31.477

我会考虑使用缓冲区并解决这个问题。

```
#include <stdio.h>
#include <string.h>

int main ( ) {
    char buff[BUFSIZ];      // the input line
    char newbuff[BUFSIZ];   // the results of any editing
    char findme[] = "hello";
    char replacewith[] = "world";
    FILE *in, *out;

    in = fopen( "file.txt", "r" );
    out= fopen( "new.txt", "w" );

    while ( fgets( buff, BUFSIZ, in ) != NULL ) {
        if ( strstr( buff, findme ) != NULL ) {
            // do 1 or more replacements
            // the result should be placed in newbuff
            // just watch you dont overflow newbuff...
        } else {
            // nothing to do - the input line is the output line
            strcpy( newbuff, buff );
        }
        fputs( newbuff, out );
    }

    fclose( in );
    fclose( out );
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T05:30:33.077

`"rt"`模式是只读的。使用`"r+"`模式。这将打开文件进行读写。

# ant - 在 Eclipse Indigo 中使用 ANT 时出现 javah NullPointerException

> ID：15054079
> 
> 赞同：0
> 
> 时间：2013-02-24T16:56:55.273
> 
> 标签：ant, eclipse-indigo, javah

我正在使用这样的 ANT buildscript：

```
<project basedir="..">
<property name="src" location="src"/>
<property name="classes" location="classes" />
<property name="jnifiles" location="jnifiles" />

<target name="init">
    <mkdir dir="${classes}" />
    <mkdir dir="${jnifiles}" />
</target>

<target name="compile" 
    description="compile the source " >
    <javac srcdir="${src}" destdir="${classes}" includeantruntime="false" />
</target>

<target name="generate-jni">
    <javah destdir="${jnifiles}" >
        <class name="com.example.ExecJNI" />
    </javah>
</target>

<target name="clean"
    description="clean up" >
    <delete dir="${classes}"/>
    <delete dir="${jnifiles}"/>
</target> 
```

它通过 clean、init 和编译就好了，但是在 generate-jni 我收到以下错误：

```
generate-jni:
   [javah] Exception in thread "main" java.lang.NullPointerException
   [javah]  at com.sun.tools.javah.JavahTask.run(JavahTask.java:509)
   [javah]  at com.sun.tools.javah.JavahTask.run(JavahTask.java:335)
   [javah]  at com.sun.tools.javah.Main.main(Main.java:46) 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T03:25:42.840

您是否检查了已安装 JRE 的默认版本？

我也遇到了同样的问题，我在 Eclipse 首选项中检查了已安装的 JRE。默认版本是 jre7，虽然我确实安装了 jdk1.7。将默认版本改为jdk1.7后，问题解决。

希望这些信息对您有所帮助。

# java - java - 反射：如何覆盖私有静态抽象内部类方法？

> ID：15054085
> 
> 赞同：1
> 
> 时间：2013-02-24T16:57:31.933
> 
> 标签：java, reflection, abstract-class

我有以下课程：

```
class MyClass{

    private static final int VERSION_VALUE = 8;

    private static final String VERSION_KEY = "versionName";

    public boolean myPublicMethod(String str) {
        try { 
            return myPrivateMethod(str, VERSION_KEY, VERSION_VALUE,
                    new MyInnerClass() {

                    @Override
            public InputStream loadResource(String name) {
                            //do something important
                        }
                    });
        }
        catch (Exception e) {           
        }
        return false;
    }

private boolean myPrivateMethod(String str, String key, int version,
            ResourceLoader resourceLoader) throws Exception
    {
       //do something 
    }

    private static abstract class MyInnerClass {

        public abstract InputStream loadResource(String name);

    }
} 
```

我想为 myPrivateMethod 编写单元测试，我需要为其传递 resourceLoader 对象并覆盖它的 loadResource 方法。

这是我的测试方法：

```
@Test
public void testMyPrivateMethod() throws Exception {
    Class<?> cls = Class.forName("my.pack.MyClass$MyInnerClass");
    Method method = cls.getDeclaredMethod("loadResource", String.class);
    //create inner class instance and override method
    Whitebox.invokeMethod(myClassObject, "testValue1", "testValue2", "name1", 10, innerClassObject);
} 
```

请注意，我无法更改代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:24:29.513

好吧，你可以使用[Javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/) ...

看到[这个问题](https://stackoverflow.com/a/3292208/837703)。我还没有尝试过，但是您可以在需要覆盖时调用此方法：

```
public <T extends Object> T getOverride(Class<T> cls, MethodHandler handler) {
    ProxyFactory factory = new ProxyFactory();
    factory.setSuperclass(cls);
    factory.setFilter(
            new MethodFilter() {
                @Override
                public boolean isHandled(Method method) {
                    return Modifier.isAbstract(method.getModifiers());
                }
            }
        );

    return (T) factory.create(new Class<?>[0], new Object[0], handler);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:04:30.660

好吧，我在您的代码中看到的问题是您正在调用 myPublicMethod，并且您将第四个参数作为 new MyInnerClass() 提供。现在在您的私有方法中，第四个参数作为 ResourceLoader 给出，并且从您的代码中我看到 MyInnerClass 和 ResourceLoader 之间没有任何关系。所以你可以试试下面的代码。它可能会有所帮助。

尽管您警告您无法更改代码，但我已经更改了它，因为我试图运行您的代码。

```
class MyClass{

    private static final int VERSION_VALUE = 8;

    private static final String VERSION_KEY = "versionName";

    public boolean myPublicMethod(String str) {
        try { 
            return myPrivateMethod(str, VERSION_KEY, VERSION_VALUE,
                    new MyInnerClass() {

                    @Override
            public InputStream loadResource(String name) {
                return null;
                            //do something important
                        }
                    });
        }
        catch (Exception e) {           
        }
        return false;
    }

private boolean myPrivateMethod(String str, String key, int version,
            MyInnerClass resourceLoader) throws Exception
    {
        return false;
       //do something 
    }

    private static abstract class MyInnerClass {

        public abstract InputStream loadResource(String name);

    }
} 
```

希望能帮助到你。

# java - 编程中的“原子”是什么意思？

> ID：15054086
> 
> 赞同：321
> 
> 时间：2013-02-24T16:57:37.597
> 
> 标签：java, atomic

在 Effective Java 书中，它指出：

> 语言规范保证读取或写入变量是原子的，除非变量是类型`long`或`double`[JLS, 17.4.7]。

在 Java 编程或一般编程的上下文中，“原子”是什么意思？

* * *

## 回答 #1

> 赞同：422
> 
> 时间：2013-02-24T17:07:55.717

下面是一个例子：假设`foo`是一个 type 的变量`long`，那么下面的操作不是原子操作（*在 Java 中*）：

```
foo = 65465498L; 
```

实际上，变量是使用两个单独的操作写入的：一个写入前 32 位，第二个写入最后 32 位。这意味着另一个线程可能会读取 的值`foo`，并查看中间状态。

使操作原子化包括使用同步机制，以确保从任何其他线程将操作视为单个原子（即不可拆分为部分）操作。这意味着任何其他线程，一旦操作成为原子操作，将`foo`在分配之前或之后看到 的值。但绝不是中间值。

一个简单的方法是使[变量 volatile](https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)：

```
private volatile long foo; 
```

或者同步对变量的每次访问：

```
public synchronized void setFoo(long value) {
    this.foo = value;
}

public synchronized long getFoo() {
    return this.foo;
}
// no other use of foo outside of these two methods, unless also synchronized 
```

或将其替换为[`AtomicLong`](https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/atomic/AtomicLong.html)：

```
private AtomicLong foo; 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2014-06-25T13:25:19.903

“原子操作”是指从所有其他线程的角度来看似乎是瞬时的操作。当保证适用时，您无需担心部分完成的操作。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-02-24T17:00:30.057

它是“在系统的其余部分看来是瞬间发生的”，属于计算过程中的[线性化分类。](http://en.wikipedia.org/wiki/Linearizability)进一步引用该链接文章：

> 原子性是与并发进程隔离的保证。此外，原子操作通常有一个成功或失败的定义——它们要么成功地改变了系统的状态，要么没有明显的效果。

因此，例如，在数据库系统的上下文中，可以有“原子提交”，这意味着您可以将更新的变更集推送到关系数据库，这些变更要么全部提交，要么根本不提交发生故障时，数据不会损坏，并且锁和/或队列的后果，下一个操作将是不同的写入或读取，但仅*在*事实发生之后。在变量和线程的上下文中，这几乎是相同的，适用于内存。

您的引用强调，这*不一定*是所有情况下的预期行为。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-09-29T05:40:51.827

刚刚发现一篇文章[Atomic vs. Non-Atomic Operations](http://preshing.com/20130618/atomic-vs-non-atomic-operations/)对我很有帮助。

> “作用于共享内存的操作是原子的，如果它相对于其他线程在一个步骤中完成。
> 
> 当在共享内存上执行原子存储时，没有其他线程可以观察到修改半完成。
> 
> 当对共享变量执行原子加载时，它会读取在某个时刻出现的整个值。”

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-02-24T17:09:45.903

如果您有多个线程执行以下代码中的方法 m1 和 m2：

```
class SomeClass {
    private int i = 0;

    public void m1() { i = 5; }
    public int m2() { return i; }
} 
```

您可以保证任何线程调用`m2`都将读取 0 或 5。

另一方面，使用此代码（`i`长在哪里）：

```
class SomeClass {
    private long i = 0;

    public void m1() { i = 1234567890L; }
    public long m2() { return i; }
} 
```

线程调用`m2`可以读取 0、1234567890L 或其他一些随机值，因为`i = 1234567890L`不能保证语句对于 a 是原子的`long`（JVM 可以在两个操作中写入前 32 位和后 32 位，并且线程可能会`i`在两者之间观察） .

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-13T07:14:43.733

在 Java 中，除了 long 和 double 之外的所有类型的字段都是原子读写的，如果使用 volatile 修饰符声明该字段，即使 long 和 double 也是原子读写的。也就是说，我们得到 100% 的结果，或者那里发生了什么，变量中也不可能有任何中间结果。

# ruby-on-rails - 确定编写 RSpec 测试的计划

> ID：15054089
> 
> 赞同：1
> 
> 时间：2013-02-24T16:57:58.687
> 
> 标签：ruby-on-rails, rspec

我有一个控制器如下：

```
class ReportsController < ApplicationController
    respond_to :html
  def show
    client = ReportServices::Client.new(ServiceConfig['reports_service_uri'])
    @report = client.population_management(params[:id])
    if @report
      @kpis = @report[:key_performance_indicators]
      @populations = @report[:population_scores]
      @population_summaries = @report[:population_summaries]
      @providers = @report[:provider_networks]
    end
    respond_with (@report)   
  end
end 
```

我想为它写一个 RSpec 测试，但不知道从哪里开始，我猜是因为它里面有那个 URL，这让我更难，我对 Rails 和 RSpec 还很陌生，并且有一些基本知识为我的模型编写 RSpec 但这一个让我整个周末都感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:22:21.093

您可以存根客户端接口以编写控制器的隔离测试。

```
describe RerpotsController do
  it "assigns a new report as @report" do
    expected_id = '1234'
    expected_kpi = 'kpi'

    report = { key_performance_indicators: expected_kpi, ... }
    client = double(ReportServices::Client)
    client.should_receive(:population_management).with(expected_id) { report }
    ReportServices::Client.should_receive(:new) { client }

    get :show, id: expected_id

    assigns(:kpis).should eq(expected_kpi)
    # ...
  end
end 
```

您可能不需要在控制器中解压报表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:23:42.180

所以首先要解决的是模拟外部 API 请求。这里的总体思路是，您将从 new 返回一个模拟对象，该对象将响应 population_management 并返回您对 @report 的期望。

```
describe ReportsController do
  before do
    @report_data = {
      :key_performance_indicators => 'value',
      :population_scores => 'value',
      :population_summaries => 'value',
      :provider_networks => 'value'
    }
    # This will fake the call to new, return a mock object that when
    # population_management is called will return the hash above.
    @fake_client = double(:population_management => @report_data)
    ReportServices::Client.stub(:new => @fake_client)
  end

  describe '#show' do
    it 'assigns @report' do
      get :show, id: 1
      assigns(:report).should == @report
    end

    it 'assigns some shortcut vars' do
      [:kpis, :populations, :population_summaries, :providers].each do |var|
        assigns(var).should_not be_nil
      end
    end

    # and whatever else you'd like
  end
end 
```

# ios - 使用非零 contentOffset 为 UICollectionView 边界设置动画的问题

> ID：15054090
> 
> 赞同：1
> 
> 时间：2013-02-24T16:58:15.660
> 
> 标签：ios, uicollectionview

叹。两天后的第二个问题。我开始不太喜欢 UICollectionView 了。

好的。我有一个 UICollectionView 设置，运行良好，以及一个自定义布局对象管理......呃......布局。我会发布代码，但有很多代码，我不确定哪些部分是相关的。大多数情况下，我只是按照本教程进行操作： http: [//skeuo.com/uicollectionview-custom-layout-tutorial](http://skeuo.com/uicollectionview-custom-layout-tutorial)

现在问题就在这里。如果我将我的集合视图从 contentOffset 0,0 滚动开，然后使其边界设置动画，那么任何已经可见且仍然可见的单元格的起始位置都将有很长的路要走！它们到达了正确的位置，但开始时距离太左太远了大约 60 个像素并且太低了。无论我从 0,0 滚动多远，每次总是相同的数量。奇怪的是，只要我不离开 0,0，它就会完全按照我的意愿进行动画处理，没有任何问题。不知何故，contentOffset 似乎干扰了我的内容单元格的当前帧，并且以一种完全荒谬的方式。

这真的很奇怪，我不知道为什么会这样。有人有线索吗？

[编辑] 更多信息。作为一个实验，我改变了我的集合视图的布局样式，以便它在调整大小时只改变宽度而不是高度。现在看来，起始 Y 位置是正确的，因此很可能是涉及自动调整大小的不寻常错误。作为记录，我检查了我的各种单元格，它们都设置为顶部/左侧，固定宽度和高度，所以这不是问题。

[编辑] 和更多信息。似乎，当边界发生变化时，布局视图被询问是否应该失效。返回 YES 是动画边界变化的唯一方法。然而，然后发生的是 collectionView 第二次立即设置自己的边界，以将当前偏移量发送回零/零。问题可能是，如果我两者都做，它会感到困惑，但如果我只在第一次调用时无效，它会得到错误的信息，而如果我在第一次不无效时，我根本不会得到第二次。鸡蛋。

# diff - 将两个目录与 每个文件的单独差异输出进行比较

> ID：15054091
> 
> 赞同：0
> 
> 时间：2013-02-24T16:58:19.987
> 
> 标签：diff

我需要查看包含不同版本的软件源代码的两个目录之间发生了什么变化。虽然我找到了一种获取唯一 .diff 文件的方法，但如何为两个目录中的每个更改的文件获取不同的文件？我需要这个，因为“主要”大约是 6 MB，并且想要一些更方便的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T17:23:49.827

我也遇到了这个问题，所以我最终得到了一些 shell 脚本。它需要三个参数：用于输出的源和目标目录（用于 diff）和目标文件夹（应该存在）。

这有点hacky，但也许对某人有用。所以要小心使用，特别是如果你的路径有特殊字符。

```
#!/bin/sh

DIFFARGS="-wb"

LANG=C
TARGET=$3
SRC=`echo $1 | sed -e 's/\//\\\\\\//g'`
DST=`echo $2 | sed -e 's/\//\\\\\\//g'`

if [ ! -d "$TARGET" ]; then
  echo "'$TARGET' is not a directory." >&2
  exit 1
fi

diff -rqN $DIFFARGS "$1" "$2" | sed "s/Files $SRC\/\(.*\?\) and $DST\/\(.*\?\) differ/\1/" | \
while read file
do
  if [ ! -d "$TARGET/`dirname \"$file\"`" ]; then
    mkdir -p "$TARGET/`dirname \"$file\"`"
  fi
  diff $DIFFARGS -N "$1/$file" "$2/$file" > "$TARGET"/"$file.diff"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:02:15.920

if you want to compare source code it is better to commit it to a source vesioning program as "svn".

after you have done so. do a diff of your uploaded code and pipe it to file.diff

```
 svn diff --old svn:url1 --new svn:url2 > file.diff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T23:49:30.550

bash for 循环将为您工作。下面将使用 C 源代码对两个目录进行比较，并为每个文件生成一个单独的差异。

```
for FILE in $(find <FIRST_DIR> -name '*.[ch]'); do DIFF=<DIFF_DIR>/$(echo $FILE | grep -o '[-_a-zA-Z0-9.]*$').diff; diff -u $FILE <SECOND_DIR>/$FILE > $DIFF; done 
```

对以 +++ 开头的行使用正确的补丁级别

# python - 如何将函数应用于 Python pandas 中的分组数据帧？

> ID：15054095
> 
> 赞同：3
> 
> 时间：2013-02-24T16:58:37.583
> 
> 标签：python, numpy, pandas

我按以下列之一对我的数据框进行分组（以`iris`数据集为例）：

```
grouped_iris = iris.groupby(by="Name") 
```

我想为每个组应用一个函数，该函数对`grouped_iris`. 我如何应用一个函数来为每个组（每个值`Name`）求和`PetalLength`并将`PetalWidth`其放入一个名为 的新列中`SumLengthWidth`？我知道我可以这样总结每组的所有列`agg`：

```
grouped_iris.agg(sum) 
```

但我正在寻找的是对此的一个转折：`Name`我不想对每一列的特定条目的所有条目求和，而是只想`SepalWidth, SepalLength`对每个`Name`组的列的一个子集 ( ) 求和。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:46:46.293

这似乎有点不雅，但确实有效：

```
grouped_iris[['PetalLength', 'PetalWidth']].sum().sum(axis=1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:55:52.340

无法判断您是否想要汇总数字（在这种情况下，Andy 的解决方案就是您想要的），或者您是否想要将其转换回原始数据框。如果是后者，您可以使用`transform`

```
In [33]: cols = ['PetalLength', 'PetalWidth']

In [34]: transformed = grouped_iris[cols].transform(sum).sum(axis=1)

In [35]: iris['SumLengthWidth'] = transformed

In [36]: iris.head()
Out[36]: 
   SepalLength  SepalWidth  PetalLength  PetalWidth         Name  SumLengthWidth
0          5.1         3.5          1.4         0.2  Iris-setosa            85.4
1          4.9         3.0          1.4         0.2  Iris-setosa            85.4
2          4.7         3.2          1.3         0.2  Iris-setosa            85.4
3          4.6         3.1          1.5         0.2  Iris-setosa            85.4
4          5.0         3.6          1.4         0.2  Iris-setosa            85.4 
```

**编辑**：一般案例示例

一般来说，对于一个 dataframe `df`，聚合 groupby`sum`给你每个组的总和

```
In [47]: df
Out[47]: 
  Name  val1  val2
0  foo     6     3
1  bar    17     4
2  foo    16     6
3  bar     7     3
4  foo     6    13
5  bar     7     1

In [48]: grouped = df.groupby('Name')

In [49]: grouped.agg(sum)
Out[49]: 
      val1  val2
Name            
bar     31     8
foo     28    22 
```

在您的情况下，您有兴趣在各行中对这些求和：

```
In [50]: grouped.agg(sum).sum(axis=1)
Out[50]: 
Name
bar     39
foo     50 
```

但这只会给你2个数字；每组 1 个。通常，如果您希望将这两个数字投影回*原始*数据帧，您可以使用`transform`：

```
In [51]: grouped.transform(sum)
Out[51]: 
   val1  val2
0    28    22
1    31     8
2    28    22
3    31     8
4    28    22
5    31     8 
```

请注意这些值与 生成的值是如何完全相同的`agg`，*但*它与原始值具有相同的尺寸`df`。还要注意每个其他值是如何重复的，因为行 [0, 2, 4] 和 [1, 3, 5] 是相同的组。在您的情况下，您需要两个值的总和，因此您将在各行中求和。

```
In [52]: grouped.transform(sum).sum(axis=1)
Out[52]: 
0    50
1    39
2    50
3    39
4    50
5    39 
```

您现在有一个与原始数据框长度相同的系列，因此您可以将其分配回一列（或用它做您喜欢的事情）：

```
In [53]: df['val1 + val2 by Name'] = grouped.transform(sum).sum(axis=1)

In [54]: df
Out[54]: 
  Name  val1  val2  val1 + val2 by Name
0  foo     6     3                   50
1  bar    17     4                   39
2  foo    16     6                   50
3  bar     7     3                   39
4  foo     6    13                   50
5  bar     7     1                   39 
```

# c - OpenCL 原子什么都不做

> ID：15054098
> 
> 赞同：0
> 
> 时间：2013-02-24T16:58:49.990
> 
> 标签：c, opencl, gpgpu, atomic

我尝试使用 OpenCL 编写示例直方图工具。首先，我只是有兴趣以原子方式递增每个 bin。我想出了以下内核代码：

```
__kernel void Histogram(
    __global const int* input, 
    __global int* histogram, 
    int numElements) {
    // get index into global data array
    int iGID = get_global_id(0);

    // bound check, equivalent to the limit on a 'for' loop
    if (iGID >= numElements) {
        return;
    }

    if( iGID < 100 ) {
                // initialize histogram
        histogram[iGID] = 0;
    }

    barrier(CLK_GLOBAL_MEM_FENCE);

    int bin = input[iGID];

    atomic_inc(&histogram[bin]);
} 
```

但输出直方图在每个 bin 中都为零。这是为什么？此外，如果将 printf(" ") 放在最后一行，就会发生真正奇怪的事情。突然，它起作用了。我完全迷路了，有人知道为什么会这样吗？

PS我启用了所有扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:30:37.073

我自己解决了问题。

在没有解决问题之后，我尝试将 CLDevice 更改为 CPU。一切都按预期进行（不幸的是非常慢：D）。但这让我想到这可能不是代码问题，而是 OpenCL 基础架构问题。

**我更新了 AMD 的 OpenCL 平台，现在一切正常**。

谢谢，以防你想到我的问题。

# c# - 将音频流式传输到多个客户端

> ID：15054099
> 
> 赞同：1
> 
> 时间：2013-02-24T16:58:57.970
> 
> 标签：c#, asp.net, wcf, streaming, audio-streaming

我正在使用 ASP.NET 制作一个网站，并且我有一个使用 WCF 的 web 服务。

我需要弄清楚如何将音频（最有可能的 .mp3 文件）流式传输到多个客户端，以便所有客户端同时听到相同的声音。我知道这可以使用套接字来完成，但我需要很多不同的流（这对套接字来说不太好，因为据我所知，我需要一个新的端口连接到每个流）。这是一种在线广播。几个频道，然后用户可以收听他们想要的频道。

任何人都可以帮助我或为我指出正确的方向吗？不一定要通过 WCF，我只需要想办法做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:32:49.580

一个快速入门的方法是使用[SHOUTcast](http://www.shoutcast.com)或[Icecast](http://www.icecast.org/)。

它们的工作方式非常相似，都提供了流 MP3 的 HTTP 或类似 HTTP 的服务器。

# iis - 在不影响主页的情况下重写 url

> ID：15054100
> 
> 赞同：0
> 
> 时间：2013-02-24T16:59:14.957
> 
> 标签：iis, mod-rewrite, url-rewriting, url-rewrite-module

请求的 url(s)：*关于*页面和其他页面的实际位置：-
`http://domain.com/about`
`http://domain.com/contact`
`etc.`

*请求* 的 url 应重写为*实际位置*。 - 但模式**不应该**匹配：！ 否则它将取消主页的样式。 *`http://domain.com/folder/about.cshtml`
`http://domain.com/folder/contact.cshtml`

 ***`http://domain.com`**** 

 ***** * *

这是我的尝试：

```
<rule name="friendly_url">
    <match url="(.+)/([-a-z]+)" />
    <action type="Rewrite" url="http://{HTTP_HOST}/folder/{R:2}\.cshtml" />
</rule> 
```

显然这会影响主页。
更糟; 它根本不起作用。我无法让重写正常工作。

* * *

非常感谢对解决方案的任何贡献:)****

# c# - 使用两个 RFID 阅读器时出错

> ID：15054102
> 
> 赞同：0
> 
> 时间：2013-02-24T17:00:01.933
> 
> 标签：c#, rfid

我正在使用 C# 中这个站点的 RFID 开发一个应用程序

[在这里](http://www.d-logic.net/index.php/download) ，我是用一个 Reader 做的，它工作得很好，但是当我在同一台 PC 中使用两个 Reader 并且我使用 MultiReader.dll 而代码没有变化时，它会显示错误消息

> 调用 PInvoke 函数 'GetSerial!GetSerial.uFRCoder1x::ReaderOpen' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:16:10.853

在引用部分的解决方案资源管理器上，单击 multiReader.DLL，然后在属性窗口上按 f4 或 Get 属性并将副本更改为本地并嵌入 Introtype，然后构建您的项目，如果该方法有其他签名，您可以通过转到定义进行检查或查看对象资源管理器，也可以在调用时调用强制转换类型和“ref”字样

我想如果你可以重新发送和接收 COM 端口和串行，你可以使用 C# 组件或名为“SerialPort”的工具，这很有用

# google-app-engine - 没有 cookie 的 Java App Engine 会话

> ID：15054103
> 
> 赞同：1
> 
> 时间：2013-02-24T17:00:03.067
> 
> 标签：google-app-engine

在 App Engine（Java 运行时）上是否可以使用没有 JSESSIONID cookie 的会话？例如，如果 Tomcat 检测到不支持 cookie，它将在末尾使用 JSESSIONID 重写 URL。应用引擎 Java 运行时是否支持这种机制或类似机制？

谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:54:33.103

据我所知，没有内置支持将会话 ID 放入 URL，但我们所做的一切都不会阻止您自己这样做。

# ios - GCD，影响子 UIViewcontrollers 的队列，可重入

> ID：15054104
> 
> 赞同：1
> 
> 时间：2013-02-24T17:00:08.873
> 
> 标签：ios, uiview, grand-central-dispatch, uivewcontroller

假设我们有一个`UIViewController`，称之为 A，在`viewDidLoad`那个 VC 中我们添加两个`UIViewControllers`（B，C）。现在为了使`viewDidLoad`A 中的 UI 流畅，我们做了一些 GCD 工作

```
 dispatch_queue_t queue = dispatch_queue_create("myqueue", NULL);
  dispatch_async(queue, ^{
  // Create webviews, do some setup here, etc etc
  // Perform on main thread/queue
   dispatch_async(dispatch_get_main_queue(), ^{
  // this always has to happen on the main thread
    [self.view addSubview:webView];
   });
 }); 
```

所以`ParentViewController`在 UI 渲染方面要好一些。

我的问题是：这足够 GCD 工作吗？`viewDidLoad`还是我应该对孩子做同样的事情`viewcontrollers`？仅仅因为我在后台线程上创建了这些子 VC，这是否意味着我不需要对它们执行任何 GCD wokr？我正在尝试使我的 UI 尽可能地响应，但不要使代码混乱。我想另一种说法是 GCD 线程是可重入的吗？iOS中有重入的概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:15:12.007

我不认为添加子视图会对性能产生重大影响。此外，应该在主 UI 线程上使用视图（或一般的 UIKit）。据我所知，在后台做这些事情被认为是不好的做法。

尝试将 GCD/Async 内容保存到处理器密集型工作或持续时间未知的任务中，例如从 Internet 下载内容。

来源和更多信息：[警告：不应从辅助线程调用 UIKit](https://stackoverflow.com/questions/3201761/warning-uikit-should-not-be-called-from-a-secondary-thread)

# c# - 如何提取“SQL Server 2008 数据库嵌入式 CLR 程序集”并将其移植到 MySQL 5.5 数据库等效项？

> ID：15054106
> 
> 赞同：0
> 
> 时间：2013-02-24T17:00:22.010
> 
> 标签：c#, mysql, sql-server-2008, windows-services, sqlclr

## 我的目标：

提取嵌入在 SQL Server 2008 数据库中的 SQL Server CLR 程序集并将其移植到 MySQL 5.5 数据库支持的等效程序。

我有一个 SQL Server 2008 数据库，我正在尝试将其移植到 MySQL 5.5。该数据库是基于 ASP.NET 的网站的一部分，该网站需要使用 MySQL 而不是 SQL Server（请不要问为什么？）

该数据库还使用**了自定义构建的 SQL Server (CLR?) 程序集**，当我使用 SQL Server Management Studio 访问数据库的以下部分时，我可以看到该程序集。

```
[Database Name] > Programmability > Assemblies >Namespace.MyCustomSQLServerAssembly 
```

我无权访问该程序集的源代码，因为以前的编码器没有将它作为源代码包的一部分提供，但我相信如果我可以提取它，我是否可以反编译程序集。

我已经成功移植了所有存储过程和表，但是我不知道如何移植这个程序集。也许我没有使用正确的关键字，但我找不到任何关于“如何使用 Google 将此程序集移植到 MySQL”的教程。我知道这可能不是直接可能的。

在这一点上，我有以下问题：

1.  如何从 SQL Server 数据库中提取此程序集？

2.  这个程序集（如果成功提取）可以反编译为代码（SQL 或 C#）吗？

3.  我可以创建的 MySQL Server 中是否有任何等价物可以替代我想从 SQL Server 数据库中提取并随后移植的这个程序集（假设它只定义自定义数据类型）？

笔记：

这些程序集中的类型似乎在同一数据库中的用户定义函数中被引用。

上面的一些问题可能听起来有点菜鸟，但在此之前我还没有编写任何 CLR 程序集，可以作为 SQL Server 数据库的一部分在 SQL Server 中加载和运行。

这是将数据库移植到 mysql 的最后一步。所有存储过程和函数已经被移植，但我不知道如何提取/移植这个程序集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:28:22.290

我使用 Stackoverflow.com 上的这个问题从数据库中提取了 SQL Server 库。

[从 SQL Server 2005 中提取 .NET 程序集](https://stackoverflow.com/questions/4103406/extracting-a-net-assembly-from-sql-server-2005)

并使用 Red Gate .NET Reflector 反编译该库。现在我想我可以在 MySQL 中创建自定义函数或存储过程来模仿库中定义的相同函数。

# java - 为什么java在我使用float时强制我添加f？

> ID：15054110
> 
> 赞同：7
> 
> 时间：2013-02-24T17:00:36.977
> 
> 标签：java

我对编程很陌生。我有以下代码：

```
float f = 18.45f; 
```

这很好用。如果我将其更改为：

```
float f = 18.45; 
```

java说这是错误的：

```
error: possible loss of precision 
```

但它是可选的`double`。但`long`我再次面临同样的问题。

为什么 java 强迫我这样做，但不以防万一`double`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-24T17:01:34.283

在 Java 中，`18.45`是一种`double`保存 64 位的数据类型。`float`数据类型最多只能容纳 32 位。添加额外的`f`使其成为浮点数（浮点文字）。

有关更多详细信息，请参阅[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

# java - 在 JSP 中向同一个 servlet 提交两个或多个表单

> ID：15054112
> 
> 赞同：8
> 
> 时间：2013-02-24T17:00:47.127
> 
> 标签：java, jsp, servlets

我正在学习 JSP，我在其中创建了一个`login.jsp`和`register.jsp`. 提交注册页面中的表单后，我将提交所有值`RegisterUser.java (SERVLET)`并通过 dopost 获取，然后将其写入 DB。现在我需要向`login.jsp`同一个 servlet提交另一个表单`RegisterUser.java (SERVLET)`。如何`dopost`在 servlet 中创建多个。如果创建了 servlet 将如何识别。请给我详细的解释。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T17:10:23.797

看一个 servlet 只能有一个`doPost`方法。现在由您决定提交哪个表单。您可以有一个具有相同名称但不同形式的不同值的隐藏字段，并且`doPost`您可以使用该值找出方法。

```
String hiddenParam=request.getParameter("Parameter-Name")
if(hiddenParam.equals("value1"){
 //form 1 was posted
}else if(hiddenParam.equals("value2"){
  //form 2 was posted
} 
```

事实上，如果您正在使用，`Java 7`您可以缩短代码`switch``String`

```
switch(hiddenParam){
  case "value1":
    //form 1 was posted
    break;
  case "value2":
    //form 2 was posted
    break;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T17:05:21.353

```
create a field
in login form
<input type="hidden" name="pageName" values="login"/>
in register form
<input type="hidden" name="pageName" values="register"/>

now in your servlet dopost method
check
if(request.getParameter("pageName").equals("login"))
{
// do login code here
}
if(request.getParameter("pageName").equals("register"))
{
// do register code here
} 
```

# android - wifi信息类中的getRssi方法

> ID：15054113
> 
> 赞同：1
> 
> 时间：2013-02-24T17:00:48.193
> 
> 标签：android, android-wifi, android-wireless

在类 wifi 信息中，getRssi() 方法

```
getRssi()
   {
     Return RSSI; 
   } 
```

他们从哪里得到它？他们从哪里测量它？我知道 RSSI 是接入点和设备之间的信号强度，但我想了解他们如何在这里测量它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:19:10.950

数据在 WifiStateMachine 中计算和设置[`fetchRssiAndLinkSpeedNative()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/net/wifi/WifiStateMachine.java#WifiStateMachine.fetchRssiAndLinkSpeedNative%28%29)。
编译器通常具有“查找实现”或“查找用法”功能，在许多情况下会引导您找到源代码。（我在 grepcode.com 上使用了这个功能来找到上面的方法。）

# git - 如何检索以前由修改更改的 git 提交消息

> ID：15054116
> 
> 赞同：1
> 
> 时间：2013-02-24T17:01:04.337
> 
> 标签：git

这可能以前被问过，所以如果有，请指出我的解释。我正在使用 Visual Studio 的 Git 源代码控制插件，并且已经写了一半的提交消息。

有一个 Amend last commit 按钮，如果您没有为当前提交消息输入任何内容，它会检索上一个提交消息。如果您输入了某些内容，它会将先前的提交消息更改为您为当前提交消息输入的文本，并自动为您提交。不是我想要的。

**在 Amend 命令更改之前，我可以看到之前提交的提交消息是什么吗？**我只想反过来做同样的事情来翻转以前的提交消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:16:24.133

从命令行，您可以使用 git [reflog](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)查找提交的初始版本的 SHA（即带有原始提交消息的那个）。获得 SHA 后，您可以运行：

```
git show <SHA> 
```

这将向您显示提交的详细信息，其中包括提交消息。

# qt - 拖放时将 QGraphicsItems 与网格对齐

> ID：15054117
> 
> 赞同：6
> 
> 时间：2013-02-24T17:01:05.927
> 
> 标签：qt, grid, qgraphicsview, qt5, qgraphicsscene

例如，如果我想在游戏中使用 显示玩家的`QGraphicsView`物品栏，我该如何强制使用基于网格的视图，在该视图中拖放项目总是会导致它们与网格对齐？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T17:01:05.927

您可以在子类中处理适当的鼠标事件`QGraphicsScene`：

```
#include <QApplication>
#include <QGraphicsItem>
#include <QGraphicsScene>
#include <QGraphicsSceneMouseEvent>
#include <QGraphicsView>
#include <QMainWindow>

#include <math.h>

class GridScene : public QGraphicsScene
{
public:
    GridScene() :
        mCellSize(25, 25)
    {
    }
protected:
    // Efficiently draws a grid in the background.
    // For more information: http://www.qtcentre.org/threads/5609-Drawing-grids-efficiently-in-QGraphicsScene?p=28905#post28905
    void drawBackground(QPainter *painter, const QRectF &rect)
    {
        qreal left = int(rect.left()) - (int(rect.left()) % mCellSize.width());
        qreal top = int(rect.top()) - (int(rect.top()) % mCellSize.height());

        QVarLengthArray<QLineF, 100> lines;

        for (qreal x = left; x < rect.right(); x += mCellSize.width())
            lines.append(QLineF(x, rect.top(), x, rect.bottom()));
        for (qreal y = top; y < rect.bottom(); y += mCellSize.height())
            lines.append(QLineF(rect.left(), y, rect.right(), y));

        painter->drawLines(lines.data(), lines.size());
    }

    void mousePressEvent(QGraphicsSceneMouseEvent *mouseEvent)
    {
        mDragged = qgraphicsitem_cast<QGraphicsItem*>(itemAt(mouseEvent->scenePos(), QTransform()));
        if (mDragged) {
            mDragOffset = mouseEvent->scenePos() - mDragged->pos();
        } else
            QGraphicsScene::mousePressEvent(mouseEvent);
    }

    void mouseMoveEvent(QGraphicsSceneMouseEvent *mouseEvent)
    {
        if (mDragged) {
            // Ensure that the item's offset from the mouse cursor stays the same.
            mDragged->setPos(mouseEvent->scenePos() - mDragOffset);
        } else
            QGraphicsScene::mouseMoveEvent(mouseEvent);
    }

    void mouseReleaseEvent(QGraphicsSceneMouseEvent *mouseEvent)
    {
        if (mDragged) {
            int x = floor(mouseEvent->scenePos().x() / mCellSize.width()) * mCellSize.width();
            int y = floor(mouseEvent->scenePos().y() / mCellSize.height()) * mCellSize.height();
            mDragged->setPos(x, y);
            mDragged = 0;
        } else
            QGraphicsScene::mouseReleaseEvent(mouseEvent);
    }
private:
    // The size of the cells in the grid.
    const QSize mCellSize;
    // The item being dragged.
    QGraphicsItem *mDragged;
    // The distance from the top left of the item to the mouse position.
    QPointF mDragOffset;
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QMainWindow w;
    w.resize(400, 400);
    w.show();

    QGraphicsView view(&w);
    view.setScene(new GridScene());
    view.resize(w.size());
    view.setSceneRect(0, 0, view.size().width(), view.size().height());
    view.show();

    view.scene()->addRect(0, 0, 25, 25)->setBrush(QBrush(Qt::blue));

    return a.exec();
}

#include "main.moc" 
```

# c - 有没有像 Python Tutor 这样的 C 代码程序？

> ID：15054120
> 
> 赞同：4
> 
> 时间：2013-02-24T17:01:14.610
> 
> 标签：c

有这个站点 ( [http://pythontutor.com](http://pythontutor.com) )，您可以在其中输入 Python 代码，它会说明每行代码的作用。

我想知道，有没有像 Python Tutor 这样的程序，但对于 C 代码？

# javascript - 从手风琴的跨度中识别活动类

> ID：15054122
> 
> 赞同：0
> 
> 时间：2013-02-24T17:01:16.790
> 
> 标签：javascript, jquery, ajax, content-management-system, accordion

好吧，伙计们，

我在使用 Jquery 为我必须使用的 CMS 制作手风琴菜单时遇到了一些问题。这个旧的 CMS 在 span 标签中分配“活动”项目类，而不是 a 或 li 。我需要能够通过激活 span 标签的代码来设置活动选项卡，而不是像我已经拥有的 li 锚标签。下面是示例：

```
 <script type="text/javascript">
        $(document).ready(function () {
          $('#amenu > li > a').click(function(){
            if ($(this).attr('class') != 'active'){
              $('#amenu li ul').slideUp();
              $(this).next().slideToggle();
              $('#amenu li a').removeClass('active');
              $(this).addClass('active');
            }
          });
        });
    </script> 
```

CMS 的示例输出如下：

```
<ul id="amenu">
    <li><a href="#">Home</a></li><li><span class="currentbranch0">
        <a href="">Content</a></span>
        <ul class="multilevel-linkul-0" title="">
            <li><a href="">Content 2</a></li>
            <li><span class="currentbranch1"><a href="">Content 3</a></span></li>
        </ul>
    </li>
</ul> 
```

我将如何解决这个问题有人知道吗？我有不同的组合，但不断打破锚链接。此外，如果我在页面上手动设置锚活动类，手风琴将不会展开子项，因为我将使用 CMS，尽管这可能没什么大不了的。

任何帮助，将不胜感激

问候

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:05:01.530

您可以`.closest('span')`在代码中添加引用该类的位置`active`：

```
 $(document).ready(function () {
      $('#amenu > li > a').click(function(){
        if ($(this).closest('span').attr('class') != 'active'){
          $('#amenu li ul').slideUp();
          $(this).next().slideToggle();
          $('#amenu li a').closest('span').removeClass('active');
          $(this).closest('span').addClass('active');
        }
      });
    }); 
```

# php - 带有旋转和裁剪的 PHP 图像处理

> ID：15054123
> 
> 赞同：2
> 
> 时间：2013-02-24T17:01:18.633
> 
> 标签：php, image, rotation, crop

我在 php 中处理图像时遇到问题。正如他们所说，一张图片描绘了一千个单词，所以下面是一张帮助我解释我的情况的图片。

[![第1步](../Images/be600931e3da2503366196f375bb2596.png)](https://i.stack.imgur.com/JWHWS.png)

我有一个画布（汽车图片）和一个容器（红色矩形），上图是我的初始设置。以下是我了解的有关我的初始设置的详细信息：

1.  画布尺寸（宽度和高度）
2.  容器尺寸（宽度和高度）
3.  容器相对于画布左上角的位置 (x, y)

接下来，我在画布上以一定角度逆时针旋转。假设旋转的中心是画布本身的中心。

[![第2步](../Images/4340c1d005b1832face2085fd1b82bcb.png)](https://i.stack.imgur.com/NcKKh.png)

截至这一步，我知道 2 个额外的细节：

1.  旋转角度
2.  旋转方向（逆时针）

需要注意的事项：

1.  容器本身没有旋转，只是画布。
2.  画布的尺寸可能已更改。在这种情况下，画布的宽度和高度都增加了。

轮换后我不再知道的细节：

1.  画布尺寸
2.  容器相对于画布左上角的位置

然后，容器用于在其当前位置裁剪画布。下图是我尝试使用 php 实现的结果。

[![第 3 步](../Images/6e1a7510cf9e5937e0f574030cbf1f37.png)](https://i.stack.imgur.com/6lMbJ.png)

我以前从未在 php 中做过任何图像处理。非常感谢代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:35:58.633

我在这里找到了答案

[使用 JS 和 PHP 裁剪和旋转图像](https://stackoverflow.com/questions/7791763/crop-and-rotate-images-with-js-and-php)

不知道我们必须手动获取旋转后的画布尺寸，并根据新的画布尺寸重新计算容器的相对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:19:05.483

Andy Croxall 在 Smashing Magazine 上写了一篇关于 PHP 图像处理的非常好的概述：http: [//coding.smashingmagazine.com/2011/04/05/image-manipulation-with-jquery-and-php-gd/](http://coding.smashingmagazine.com/2011/04/05/image-manipulation-with-jquery-and-php-gd/)

但我不会费心在这里重新发明轮子——Cloudinary 几乎为你做了所有的工作。他们甚至有一个免费的 500MB 计划，您可以用它来测试它并比较结果。以下是他们的图像处理功能的概述： http: [//cloudinary.com/features#image_manipulation](http://cloudinary.com/features#image_manipulation)

祝你好运 ！奥哈德

# salesforce - 通过来自第三方站点的查询返回与客户关联的所有 Salesforce 联系人

> ID：15054132
> 
> 赞同：0
> 
> 时间：2013-02-24T17:02:30.500
> 
> 标签：salesforce, survey, soql

我正在使用调查小工具，我想提取与帐户关联的所有联系电子邮件。

这个查询有效，但它只吸引第一个联系人，我需要它们：

```
SELECT Id,Contact.Email FROM Contact WHERE AccountId = 'Insert_Account_Id_Here' 
```

如何拉入多个联系人？

如果这不可能，是否可以专门拉入联系人“N”？然后，问题 1 可以吸引联系人 1，问题 2 可以吸引联系人 2，依此类推。

谢谢...我是新手，所以如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:38:26.263

选择 id,(select Email from contacts) from Acount where id =:'acountLd for (contact con:acc.Contacts){ con.Email....}

# c++ - C++ if/else if 语句不起作用

> ID：15054137
> 
> 赞同：3
> 
> 时间：2013-02-24T17:02:51.473
> 
> 标签：c++, if-statement, pass-by-reference

我对 C++ 还很陌生，我必须制作一个 C++ 程序，使用按引用传递对 3 个数字（最小-最大）进行排序。一切正常，直到我的函数中的 if 语句。我尝试进行大量调试，似乎每当我使用“<”时，该语句都不会执行。如果我这样做，则无论如何都会执行`(n1 > n2)`该语句。如果有人可以提供帮助，那就太好了。这是我的代码：

```
#include <cstdlib>
#include <iostream>
#include <stdio.h>

using namespace std;

int sortNum(double &n1, double &n2, double &n3);

int main(int argc, char *argv[]) {
    double num1, num2, num3;

    printf("Welcome to Taylor's Sorting Program \n");
    printf("Enter 3 numbers and the program will sort them \n");
    printf("Number 1: \n");
    scanf("%d", &num1);
    printf("Number 2: \n");
    scanf("%d", &num2);
    printf("Number 3: \n");
    scanf("%d", &num3);

    sortNum(num1, num2, num3);

    printf("Sorted Values \n");
    printf("Number 1: %d ", num1);
    printf("\t Number 2: %d ", num2);
    printf("\t Number 3: %d \n", num3);

    system("PAUSE");
    return EXIT_SUCCESS;
}

int sortNum(double &num1, double &num2, double &num3) {
    double n1, n2, n3;
    n1 = num1;
    n2 = num2;
    n3 = num3;

    if (n1 < n2 && n1 > n3) {
        num1 = n2;
        num2 = n1;
        num3 = n3;
    } else if (n2 < n1 && n2 > n3) {
        num1 = n3;
        num2 = n2;
        num3 = n1;
    } else if (n3 < n2 && n3 > n1) {
        num1 = n2;
        num2 = n3;
        num3 = n1;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:06:22.677

您使用了错误的格式说明符`scanf()`。使用(Pointer to a )而不是`%d`(表示指向整数的指针)。或者，在您的代码中更改为。`%lf``double``double``int`

请注意，您的`printf()`语句遇到了类似的问题，应该使用`%f`, `%g`或`%e`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:10:01.470

三个不同数字有 6 种可能的顺序（排列）。

您的代码似乎只检查其中的 3 个，即按顺序，

   n3 < n1 < n2

和

   n3 < n2 < n1

和

   n1 < n3 < n2

在其他 3 种情况下，您就是`return 0`这样。

从我上面的系统列表中，您能猜出其他三个案例的共同点，它们的相似之处吗？

* * *

顺便说一句，没有被要求，但是通过使用 C++`cin`而`cout`不是低级 C 函数`scanf`和`printf`.

# xml - 元素已定义错误

> ID：15054139
> 
> 赞同：0
> 
> 时间：2013-02-24T17:03:12.770
> 
> 标签：xml, validation, dtd

我是 xml 写作的初学者，我有一个问题。我有一个名为 person 的基础 dtd，我将它用作培训师和公司的实体。我也有培训根元素，在这个根元素中我有培训师或公司。当我尝试验证 xml 文件时，我遇到了一个错误“元素‘人’已经被声明。” . 我怎样才能保持结构不变并验证我的 xml 文件。顺便说一句，我使用实体形式来重用我的 person.dtd。感谢您的帮助。

这是文件“person.dtd”：

```
<!ELEMENT person (id, name, lastname, 
                  telNo, adress, birthday, 
                  email)>
<!ELEMENT id (#PCDATA)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT lastname (#PCDATA)>
<!ELEMENT telNo (#PCDATA)>
<!ELEMENT adress (#PCDATA)>
<!ELEMENT birthday (#PCDATA)>
<!ELEMENT email (#PCDATA)> 
```

这是文件“trainer.dtd”：

```
<!ELEMENT trainer (trainerPerson,proficiency)> 
<!ENTITY % trainerPerson SYSTEM "person.dtd">
%trainerPerson;
<!ELEMENT proficiency (#PCDATA)> 
```

这是“公司.dtd”：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT company (companyId, companyName, 
                   companyAdress, telno, contactPerson)>
<!ELEMENT companyId (#PCDATA)>
<!ELEMENT companyName (#PCDATA)>
<!ELEMENT companyAdress (#PCDATA)>
<!ELEMENT telno (#PCDATA)>
<!ENTITY % contactPerson SYSTEM "person.dtd">
%contactPerson; 
```

这是训练信息的 DTD：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT trainning  (trainningId, cost, date, duration, 
                      trainningName, comment,
                      durationtype, (trainer|company) )>
<!ELEMENT trainningId (#PCDATA)>
<!ELEMENT cost (#PCDATA)>
<!ELEMENT date (#PCDATA)>
<!ELEMENT duration (#PCDATA)>
<!ELEMENT trainningName (#PCDATA)>
<!ELEMENT durationtype (#PCDATA)>
<!ENTITY % trainer SYSTEM "trainer.dtd">
%trainer;
<!ENTITY % company SYSTEM "company.dtd">
%company; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:39:12.097

我猜您显示的材料在您系统上的单独文件中，我已经编辑了您的问题以明确说明 - 如果我误解了您的问题，请更正更改！

这里有两点值得注意。

首先，DTD 文件不是 XML 文档，因此您不需要（也不应该使用）在 DTD 文件开头的 XML 声明。您应该删除 company.dtd 和 trainning.dtd 的第一行。

其次，对于任何给定的名称，XML DTD 最多只能包含一个元素声明。由于“person”元素在 person.dtd 中声明并包含在 trainer.dtd 和 company.dtd 中，因此当您将 trainer.dtd 和 company.dtd 都嵌入到 trainning.dtd 文件中时，您会导致解析器看到两个声明'人'。

如果你真的想在这里创建三个不同的 DTD，内容重叠，那么最简单的解决方案是创建一组*仅*包含元素声明的文件，以及第二组驱动程序文件，它们除了声明参数实体并引用它们之外什么都不做。因此 person.dtd、company.dtd、trainer.dtd 和 training.dtd 都将只有元素声明，并且您将拥有三个驱动程序文件，一个用于公司，一个用于培训师，一个用于培训，如下所示：

Companies.dtd 包含：

```
<!ENTITY % company SYSTEM "company.dtd">
%company;
<!ENTITY % person SYSTEM "person.dtd">
%person; 
```

Trainer.dtd 包含：

```
<!ENTITY % trainer SYSTEM "trainer.dtd">
%trainer;
<!ENTITY % person SYSTEM "person.dtd">
%person; 
```

Training.dtd 包含：

```
<!ENTITY % company SYSTEM "company.dtd">
%company;
<!ENTITY % person SYSTEM "person.dtd">
%person;
<!ENTITY % trainer SYSTEM "trainer.dtd">
%trainer; 
```

当然，更简单的方法是对所有内容使用单个文件。

# ios - 用一种方法代替多种方法

> ID：15054141
> 
> 赞同：0
> 
> 时间：2013-02-24T17:03:19.633
> 
> 标签：ios, objective-c, objectid, object-identity

我正在尝试为 iOS 学习 Objective-C。我已经尝试对此进行研究，但我一定没有使用正确的关键字。

我有几个简单命名的标签，Label1、Label2 等。除了 Label# 更改之外，我还有大量看起来基本相同的代码。我可以构建一种方法并将数字传递给它并显着缩小我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:07:43.517

您可能希望将这些对象放在 NSArray 或其他类型的集合中。然后您将能够遍历内容并对每个元素执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:32:09.177

考虑定义一个新类 CisonLabel，它抽象出这些标签的共享行为。CisonLabel 保存控件及其相关数据。所以你会说

```
 CisonLabel *label1=[CisonLabel for: self.labelControl1 withIdentifier: 1];
  CisonLabel *label2=[CisonLabel for: self.labelControl2 withIdentifier: 2]; 
```

CisonLabel 将具有以下方法：

```
 - (void) update;  // sets the label text, based on the identifier 
```

正如 DRiis 建议的那样，您可以将所有 CisonLabels 收集在一个集合中，也许是一个 NSArray。

```
 - (void) updateLabels: (NSArray*) theLabels
 {
     for(CisonLabel *label in theLabels) [label update]; 
 } 
```

你的直觉是正确的：将共享行为抽象到一个类中，并避免重复自己。

# emacs - emacs 24 的选项卡替代品

> ID：15054142
> 
> 赞同：4
> 
> 时间：2013-02-24T17:03:24.940
> 
> 标签：emacs, emacs24

不幸的是，tabbar-mode 使 emacs24 非常慢，尤其是在使用平滑滚动时。有没有人知道与 tabbar 效果相似的替代方法？

# java - 添加/删除 JPanel

> ID：15054145
> 
> 赞同：0
> 
> 时间：2013-02-24T17:03:51.183
> 
> 标签：java, swing

我管理一个普通对象列表，用于构建和显示 JPanel，显示这些对象中包含的信息。列表中的每个对象都有一个 JPanel。

每隔几秒钟，该对象列表就会使用一个新列表进行更新。从这个新列表中，我正在检查对象是否已被删除（不在新列表中）或添加，然后相应地更新 JPanels。

目前我正在做的是，如果从列表中删除或添加了至少一个对象，我将删除所有 JPanel 并再次添加它们。如果没有在列表中删除或添加对象，我只需更新现有 JPanel 的信息。我为此使用了 GridBagLayout。

我觉得这个解决方案不够好，我想要的是只删除/添加与删除或添加的对象相对应的 JPanel。

欢迎任何关于 Layout 使用或更优化的工作方式的建议，谢谢。

# algorithm - 给定 n 个正整数的多重集，将它们分成 17 个部分，使得这些部分的最大总和最小化

> ID：15054146
> 
> 赞同：1
> 
> 时间：2013-02-24T17:04:20.063
> 
> 标签：algorithm, dynamic-programming

给定一个包含 n 个正整数的多重集，将它们分成 17 个部分，以使这些部分的最大总和最小化。

我需要 n 和 M 中时间多项式中上述问题的算法，其中 M 是多重集中的最大元素。我已经尝试过 DP 并且很想知道是否有可以有效解决这个问题的 DP 算法

# ubuntu - Ubuntu 12.04 中的“音量控制小程序”更改源

> ID：15054150
> 
> 赞同：0
> 
> 时间：2013-02-24T17:04:38.013
> 
> 标签：ubuntu, ubuntu-12.04

我有一个小问题，找不到解决方案。

带有 Unity 的 Ubuntu 12.04 上的音量小程序控制混音器中的 4 个通道：

*   大师（增加或减少）
*   扬声器（2 种状态：如果我降低音量则为 min，如果我提高音量则为 max）
*   PCM（与扬声器相同）
*   前置（同喇叭）

我想改变这种行为，只允许调节主通道。

如何更改此设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:22:35.363

确实，AskUbuntu 应该是您的目标，但我认为[此链接](https://askubuntu.com/a/243572)包含您的问题的答案（尽管问题是另一个问题）

# asp.net - 当我在 MasterPage 上使用 ToolkitScriptManager 时页面回发不适用于部分页面

> ID：15054151
> 
> 赞同：1
> 
> 时间：2013-02-24T17:04:38.643
> 
> 标签：asp.net

在母版页中，我使用的是 ScriptManager，因此在内容页面中，根据下面的标记，我仅针对部分页面进行了回发。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
 <asp:DropDownList ID="ddlProjectDocument" runat="server" Height="16px" AppendDataBoundItems="True"  
     Width="212px" onselectedindexchanged="ddlProjectDocument_SelectedIndexChanged" 
    AutoPostBack="True" onload="ddlProjectDocument_Load" 
    style="font-family: 'Courier New', Courier, monospace" >

    <asp:ListItem Selected="True" Value="0">(select a value)</asp:ListItem>
</asp:DropDownList>
<br />

</ContentTemplate>
<Triggers>
<asp:PostBackTrigger ControlID="ddlProjectDocument"  />

</Triggers>
</asp:UpdatePanel> 
```

现在我已经在我的内容页面中添加了组合框，所以我删除了 ScriptManager 并将 ToolkitScriptManager 根据母版页的以下标记放置在母版页上，现在当我使用下拉列表控件回发时，整个页面会发生，而不仅仅是像以前那样，我是如何能解决这个问题吗？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Untitled Page</title>
<asp:ContentPlaceHolder id="head" runat="server">
</asp:ContentPlaceHolder>
<style type="text/css">
    .style1
    {
        width: 40%;
        font-size:large;
    }
</style>
<link href="StyleSheet.css" rel="stylesheet" type="text/css" />
 </head>
 <body>
<form id="form1" runat="server">

    <ajaxtoolkit:toolkitscriptmanager ID="ToolkitScriptManager1" runat="server">
    </ajaxtoolkit:toolkitscriptmanager> 
```

新内容页面的标记如下：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
 <asp:DropDownList ID="ddlProjectDocument" runat="server" Height="16px" AppendDataBoundItems="True"  
     Width="212px" onselectedindexchanged="ddlProjectDocument_SelectedIndexChanged" 
    AutoPostBack="True" onload="ddlProjectDocument_Load" 
    style="font-family: 'Courier New', Courier, monospace" >

    <asp:ListItem Selected="True" Value="0">(select a value)</asp:ListItem>
</asp:DropDownList>
<br />

<ajaxtoolkit:ComboBox ID="ComboBox1" runat="server" onload="ComboBox1_Load" 
     AutoCompleteMode="Suggest" 
     style="font-family: 'Courier New', Courier, monospace" >

</ajaxtoolkit:ComboBox>

</ContentTemplate>
<Triggers>
<asp:PostBackTrigger ControlID="ddlProjectDocument"  />

</Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:45:26.483

因为 AutoPostBack=true 是在面板里面，所以会导致回发。

我能够让你的例子工作使用：

`<asp:AsyncPostBackTrigger ControlID="ddlProjectDocument" />`

希望这可以帮助！

# django - django-webtest，用户认证和视图装饰器

> ID：15054154
> 
> 赞同：2
> 
> 时间：2013-02-24T17:04:47.513
> 
> 标签：django, decorator, webtest, django-webtest

我正在使用[django-](https://pypi.python.org/pypi/django-webtest) webtest (v1.5.6) 来测试装饰器是否限制了对经过身份验证的用户的视图访问。

我的看法很简单：

```
@active_account_required
def homepage(request):
    return render(request, 'accounts/account_homepage.html', {
        'user': request.user,
        }) 
```

`active_account_required`装饰器是：

```
def active_account_required(function = None):
    """ 
    Check the user is both logged in and has a valid, activated user account.

    If a user tries to access a view protected by this decorator, they will be
    redirected accordingly.

    See http://passingcuriosity.com/2009/writing-view-decorators-for-django/
    """

    def _dec(view_func):
        def _view(request, *args, **kwargs):
            if request.user.is_anonymous():
                return HttpResponseRedirect(reverse_lazy('auth_login'))
            if not request.user.get_profile().is_activated():
                return HttpResponseRedirect(reverse_lazy('registration_activation_incomplete'))
            return view_func(request, *args, **kwargs)

        _view.__name__ = view_func.__name__
        _view.__dict__ = view_func.__dict__
        _view.__doc__ = view_func.__doc__

        return _view

    if function is None:
        return _dec
    else:
        return _dec(function) 
```

我的测试方法是

```
class AccountViewsTests(WebTest):
    def test_activated_user_can_access_account_homepage(self):
        """ 
        Test an activated user can access the account homepage
        """
        user = G(User)
        user.get_profile().datetime_activated = timezone.now()
        res = self.app.get(reverse('account_homepage'), user = user)
        pdb.set_trace()
        self.assertTemplateUsed(res, 'accounts/account_homepage.html',
                'Activated account did not access account homepage correctly') 
```

（用户对象是使用`G`来自[django-dynamic-fixture](https://github.com/paulocheque/django-dynamic-fixture)的函数创建的）

运行测试时，装饰器阻止访问`homepage`视图。

你可以看到我`pdb`用来检查对象。User 是一个有效的用户对象，应该通过`active_account_required`装饰器中的所有测试：

```
(Pdb) user
<User: 2>
(Pdb) user.is_anonymous()
False
(Pdb) user.get_profile().is_activated()
True 
```

尽管用户是正确的，但根据装饰器代码，响应`self.app.get(reverse('account_homepage'), user = user)`是 302 重定向到URL：`registration_activation_incomplete`

```
(Pdb) res
<302 FOUND text/html location: http://localhost:80/accounts/registration/activate/incomplete/ no body> 
```

在 WebTest 请求中似乎未正确发送用户对象，但这与[django-webtest 文档](https://pypi.python.org/pypi/django-webtest)相匹配。我也尝试通过用户名传递用户，`user='2'`但得到相同的结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:51:57.817

糟糕 - 问题是我在设置激活时间戳后忘记保存我的用户配置文件！

将测试代码更改为：

```
user = G(User)
user.get_profile().datetime_activated = timezone.now()
user.get_profile().save()
res = self.app.get(reverse('account_homepage'), user = user) 
```

即添加`user.get_profile().save()`让它工作:)

对不起，噪音。

# opengl - 视口或投影在 wxWidgets 中调整窗口大小时未正确调整大小

> ID：15054155
> 
> 赞同：2
> 
> 时间：2013-02-24T17:04:49.180
> 
> 标签：opengl, wxwidgets

我有一个 wxWigets 应用程序，使用 contrib 包中的 wxGLCanvas 小部件。每次刷新小部件时，我都会在渲染场景之前重新创建投影矩阵和视口。问题是，在调整框架大小后，无论是通过拖动或最大化还是 w/e，小部件都正确调整了大小，但视口或投影（无法真正辨别哪个）没有调整大小，因此场景最终被裁剪.

现在来看一些代码。

我的 wxGLCanvas 小部件的构造函数如下所示：

```
int attrib_list[] = { WX_GL_RGBA, WX_GL_DOUBLEBUFFER };

RenderCanvas::RenderCanvas(wxFrame* parent) : wxGLCanvas(parent, idRender, wxPoint(200, -1), wxSize(800, 600), wxFULL_REPAINT_ON_RESIZE, wxT("GLCanvas"), attrib_list)
{
    Connect(idRender, wxEVT_PAINT, wxPaintEventHandler(RenderCanvas::PaintIt));
    Connect(idRender, wxEVT_SIZE, wxSizeEventHandler(RenderCanvas::Resize));

    Connect(idRender, wxEVT_LEFT_DOWN, wxMouseEventHandler(RenderCanvas::OnMouseLeftDown));
    Connect(idRender, wxEVT_LEFT_UP, wxMouseEventHandler(RenderCanvas::OnMouseLeftUp));
    Connect(idRender, wxEVT_MOTION, wxMouseEventHandler(RenderCanvas::OnMouseMotion));
} 
```

我像这样覆盖 PaintIt 方法：

```
void RenderCanvas::PaintIt(wxPaintEvent& event)
{
    SetCurrent();
    wxPaintDC(this);

    Render();
    Refresh(false);
} 
```

和调整大小方法：

```
void RenderCanvas::Resize(wxSizeEvent& event)
{
    Refresh();
} 
```

上面使用的 Render 方法如下所示：

```
void RenderCanvas::Render()
{
    Prepare2DViewport(0,GetClientSize().y,GetClientSize().x, 0);

    glClear(GL_COLOR_BUFFER_BIT);

    //Renders stuff...

    glFlush();
    SwapBuffers();
} 
```

最后，调用 glViewport 和 glOrtho 函数的 Prepare2DViewport 是：

```
void RenderCanvas::Prepare2DViewport(int x, int h, int w, int y)
{
    glClearColor(0.7f, 0.7f, 0.7f, 1.0f); // Grey Background
    glEnable(GL_TEXTURE_2D);   // textures

    glEnable(GL_BLEND);
    glEnable(GL_LINE_SMOOTH);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glViewport(x, y, w, -h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(x, (float)w, y, (float)h, -1.0f, 1.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
} 
```

还应该注意的是，我尝试使用 GetSize() 而不是 GetClientSize() 但效果是一样的。另外，我在 Ubuntu 12.04 上，而 wxWidgets 正在使用 GTK

**更新：**

还应该注意的是，我也实现了单击/拖动功能（未显示），每次单击或拖动鼠标时，都会刷新小部件。话虽如此，我尝试断开 wxEVT_SIZE 事件，但在调整大小然后单击并拖动后，相同的效果仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:14:02.890

快速浏览一下您的代码，我注意到您的 resize 事件处理程序除了要求再次刷新之外没有做任何事情。这对我来说似乎不正确。调整大小处理程序通常会进行一些计算，在请求刷新之前调用一个或多个子窗口的调整大小处理程序等等。所以，我认为你的问题是画布在重绘之前没有调整大小。这可以解释为什么你的场景被剪辑了。不知道修复是什么 - 希望这将是一个足够的提示，以便您可以朝着正确的方向寻找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:20:41.063

好的，结果证明这是我的一个非常非常愚蠢的错误。

在这一行

```
glViewport(x, y, w, -h); 
```

我不小心将高度设置为负值。删除负号解决了这个问题。我不知道为什么它会导致作物。我认为高度为负值会阻止我看到任何东西，但它有效，所以我猜我不能抱怨。再次感谢大家的帮助！

# opengl - Intel nvidia OpenGL 驱动差异 mod-function

> ID：15054159
> 
> 赞同：2
> 
> 时间：2013-02-24T17:05:06.697
> 
> 标签：opengl, glsl

我的问题是我的片段着色器在我的英特尔图形芯片上和在英伟达芯片上的执行方式非常不同。（两个驱动程序都是最新的）

问题似乎是以下代码中的 mod-call：

```
float opRep( vec3 p, vec3 c ){
  // gl_FragColor = vec4(max(0.0, sign(p.x)), max(sign(p.y), 0.0), max(sign(p.z), 0.0), 1);
  vec3 q = mod(p,c)-0.5*c;
  gl_FragColor = vec4(max(0.0, sign(q.x)), max(sign(q.y), 0.0), max(sign(q.z), 0.0), 1);
  return twistedColumn( q );
}

float distanceFromPoint(vec3 point) {
  return opRep(point, vec3(90.5, 0, 98));
} 
```

gl_FragColor 是我的“调试”语句。调试语句打印点的符号，因为我认为 mod 函数在 diffrenet 驱动程序上返回不同的符号。

如果我取消注释第一个调试输出，我会得到相同的视觉结果。但是在mod之后，intel图形驱动程序和nvidia版本之间的视觉效果不同，这非常令人困惑。

有人可以给我一个提示，为什么我会得到不同的结果......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:57:46.507

`mod`是一个不连续的阶跃函数——一个非常小的变化`p`会导致和`mod`之间的翻转。因此，任何使用都对舍入细节非常敏感，这可能因 GL 实现而异。OpenGL 没有规定任何特定的舍入方法用于插值或任何其他可能给出无法在实现的内部数字表示中精确表示的结果的操作。它只规定了计算的最低精度要求——如果愿意，任何实现都可以自由地使用更高的精度。`0``c``mod`

所以可能发生的事情是其中一个芯片在某些计算中使用比另一个更高的精度，或者一个正在向下舍入，而另一个舍入到最接近，或者其他一些变化或效果组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:22:27.083

```
vec4(max(0.0, sign(q.x)), max(sign(q.y), 0.0), max(sign(q.z), 0.0), 1);
...
vec3(90.5, 0, 98) 
```

注意那些整数常量。GLSL 不进行自动类型提升。试试这个：

```
vec4(max(0.0, sign(q.x)), max(sign(q.y), 0.0), max(sign(q.z), 0.0), 1.0);
...
vec3(90.5, 0.0, 98.0) 
```

令我惊讶的是，英特尔 GLSL 编译器让像该幻灯片这样的类型错误却没有任何警告。

此外，确保所有着色器都以适当的`#version`指令开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:26:56.773

您使用 0 参数调用您的 mod 函数。intel驱动和nvidia会产生不同的结果

# ruby-on-rails - 声明式授权：限制特定属性的模型操作

> ID：15054165
> 
> 赞同：0
> 
> 时间：2013-02-24T17:05:27.900
> 
> 标签：ruby-on-rails, authorization, declarative-authorization, strong-parameters

我对 Rails 很陌生，我正在尝试设置一个授权系统，该系统允许我控制用户可以修改模型的哪些属性。

我使用 declarative_authorization 进行基于角色的授权。这已经为我提供了很多功能：根据用户的角色限制用户在视图中可以看到的内容，他可以在控制器中执行哪些操作，基本上还允许他在模型上执行哪些操作。

但是，我只是找不到关于如何根据角色限制对模型特定属性的操作的答案。

示例：允许具有 :guest 角色的用户更新用户帐户的某些属性：当他尝试使用错误密码登录时，我想更新将创建此帐户的用户帐户的特定字段不活动。但是 :guest 角色永远不能更改此用户帐户的昵称。

因此，我在我的用户模型中使用“using_access_control”方法，但这要么为帐户提供所有属性的“更新”权限，要么根本没有“更新”权限，具体取决于角色。

我知道“strong_parameters”是一个基本上可以提供此类功能的宝石，但我不知道如何将“declarative_authorization”和“strong_parameters”结合在一起，或者如何简单地使用“declarative_authorization”。

有人可以指出我的解决方案吗？

非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-15T13:27:23.990

```
Authorization::Maintenance::without_access_control do
  # do something
end 
```

我希望这可以帮到你。

# objective-c - 为什么我不能将自定义 NSButtonCell 添加到 NSView？

> ID：15054166
> 
> 赞同：1
> 
> 时间：2013-02-24T17:05:43.613
> 
> 标签：objective-c, cocoa

我正在尝试创建一个包含播放/暂停按钮的自定义视图，并且我会将任意数量的这些按钮附加到 NSWindow。我首先创建自己的 NSView 并绘制出各个部分，然后将播放/暂停按钮子类化为 NSView（小步骤）。

这一切都很好，直到我决定我的按钮需要扩展 NSButtonCell 而不是 NSView。以下（来自TimeSlipView.m）惨遭失败，我似乎无法弄清楚原因：

```
playPauseButton = [[TimeSlipViewButton alloc] init];
[playPauseButton setButtonType:NSMomentaryPushInButton];
[self addSubview:playPauseButton]; 
```

我得到一个编译错误和最后一行的警告：“不兼容的指针类型将'TimeSlipViewButton *__strong'发送到'NSView *'类型的参数”。

我有一种感觉，我误解了一些非常基本的东西，并且由于某种原因，我不能只`addSubview:`从 NSView 中传递我的 NSButtonCell。

TimeSlipView.h

```
#import <Cocoa/Cocoa.h>
#import "TimeSlipViewButton.h"

@interface TimeSlipView : NSView {
    TimeSlipViewButton *playPauseButton;
    NSView *timerText;
    NSView *clientText;
    NSView *projectText;
    NSView *taskText;
}

@end 
```

TimeSlipViewButton.h

```
#import <Cocoa/Cocoa.h>

@interface TimeSlipViewButton : NSButtonCell

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:33:11.607

单元格不是视图，因此不能这样使用！*您所做的不起作用*
您在将其添加为子视图时完全尝试

单元格是一个（遗留）概念，其中视图过于昂贵。

某些控件（如 NSButton）使用这些/被处理来处理实际绘图。

* * *

Button CONTAINS a button cell
它不是一个按钮单元，它是一个 NSView

* * *

您可能想要做的是给股票 NSButton 一个具有自定义绘图选项的特定 ButtonCell 。对于给定的现有 NSButtons/NSSegmentedCells/NSTextFields 自定义 NSCells 有很好的教程

# php - 创造在 PHP 中按周列出日期，我不知道从哪里开始，所以我只举一个例子。如何创建一个 <select>字段，其中包含按周排列的日期选择。从星期日开始到星期六结束的那一周：//今天是 2 月 25 日</select> <option value="2013-02-24" selected="">2 月 24 日 - 3 月 2 日</option> <option value="2013-02- 17">2 月 17 日 - 2 月</option>

> ID：15054168
> 
> 赞同：2
> 
> 时间：2013-02-24T17:05:50.497
> 
> 标签：php, date

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:23:51.873

```
<select>
<?php
for ($i = 0; $i < 4; $i++) {
    echo '<option value="' . date("Y-m-d", strtotime("this sunday - $i week")) . '">' . date("M j", strtotime("this sunday - $i week")) . " - " . date("M j", strtotime("this saturday - $i week")) .'</option>';
}
?>
</select> 
```

# c - 检查点是否在线段上

> ID：15054171
> 
> 赞同：1
> 
> 时间：2013-02-24T17:06:07.897
> 
> 标签：c, geometry, computational-geometry, postgis

我很困惑，我想检查一个点是否位于线段上。我用谷歌搜索，但我基本上收到了两个不同的答案。

[http://en.wikipedia.org/wiki/Line_segment](http://en.wikipedia.org/wiki/Line_segment)

和

[http://www.softwareandfinance.com/Turbo_C/Check_Point_Lies_line_Segment.html](http://www.softwareandfinance.com/Turbo_C/Check_Point_Lies_line_Segment.html)

正确答案是什么？我希望这个算法（用 C 语言更好）用于几何应用程序，比如 postgis。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T17:13:06.647

浮点运算不能存储您想要的每个数字。在某些时候，它必须近似。现在，我猜，你从维基百科得到的算法告诉你：

```
y=mx+b 
```

你知道`m`，你知道`b`，现在插入并确保等式成立。非常适合数学。（2 的平方根）平方等于 4 的平方根。

但现在想象一下你在电脑上做这件事。4 的平方根将完全等于 2，因为计算机非常擅长保存小整数。但是，您的右手边，即 2 的平方根，会有点偏离。你必须剪掉它的一些数字，所以当你平方它时，它可能是 1.999998 或类似的东西。为了适应这一点，您需要检查`y is approx. mx+b`，所以：

```
tolerance = .01
x,y
rhs = m*x + b //right hand side
dif = abs(rhs - y)
if dif < tolerance //the point is approximately on the segment 
```

然后你必须检查它的边界框（找到最大 x，y，最小 x，y）

当然，这些方法并不完美（[http://xkcd.com/217/](http://xkcd.com/217/)），但对于大多数实际应用来说，它们已经足够正确了。如果您真的需要确切的数字，我建议您使用 Wolfram Alpha（我听说有一些 API 或其他东西）或者只是编写您自己的确切数字库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:18:50.583

Before proceeding it would be helpful to know if you just have a graphical representation of the line somehow or if you actually have the formula that created the line. Since you said "line" and not "plane" I presume we are talking about a 2D line.

If you have the formula for the line then the answer is simple, substitute the points x,y value into the formula and if the formula is valid then the point is on the line.

For example, if the line was y = 2x + 1.5 and your point is (1,1)

1 = 1(1) + 1.5 1 = 3.5 is false, so the point doesn't lie on the line

The same works for any line formula in 2D or 3D regardless of the number of variables or the form of the line..

x + 2y = 0 1.5x + 12y - 4z = 84

Just pop in the point you are working with and if both sides of the equation are equal then the point is on the line (or plane).

If you are looking for a graphical solution, such as having a bitmap of a road map or something like that and wanting to know if the place where someone clicked is "on the line of the road" then that's a completely different problem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T17:13:15.447

两者都是对的。

Only keep in mind that Turbo C is terribly old and now outside the standard. void main() for example should not be used (it is int main() instead)

Also don't use comparisons (==) in floating point in C, because floating point is imprecise, this is why the Turbo C code has < 0.001 %% > 0.001 style.

# java - 为什么这个java代码不起作用？！通用堆栈

> ID：15054179
> 
> 赞同：1
> 
> 时间：2013-02-24T17:06:41.963
> 
> 标签：java, generics, stack

我是java中的泛型新手，我真的需要这段代码的帮助，它没有编译我不知道为什么！
堆栈类是：

```
 public class GenericStack<Item>{
    public class Stack {

        private Node first=null;

        private class Node {
            Item item;
            Node next;
        }

        public boolean IsEmpty()
        {
            return first==null;
        }

        public void push (Item item)
        {
            Node oldfirst = first;
            first = new Node();
            first.item = item;
            first.next = oldfirst;
        }

        public Item pop ()
        {
            Item item=first.item;
            first=first.next;
            return item;
        }
    }
} 
```

这是主要的

```
public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    GenericStack<Integer> ob = new GenericStack<Integer>();
    ob.push(5);
    obpush(10);
    ob.push(15);
    while (!ob.IsEmpty())
    {
        int x=ob.pop();
        StdOut.print(x);
    }

  }
} 
```

现在错误是：

```
 The method push(int) isn't defined for the type GenericStack<Integer> 
```

我哪里做错了？！谁能给我解释一下

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:09:39.487

你的`GenericStack`类没有方法。摆脱嵌套类结构，`Stack`直接使用泛型类型参数：

```
public class Stack<Item> {

    private Node first=null;

    private class Node {
        Item item;
        Node next;
    }

    public boolean IsEmpty()
    {
        return first==null;
    }

    public void push (Item item)
    {
        Node oldfirst = first;
        first = new Node();
        first.item = item;
        first.next = oldfirst;
    }

    public Item pop ()
    {
        Item item=first.item;
        first=first.next;
        return item;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:14:18.820

因为方法`push`是在类中定义的`GenericStack.Stack`，而不是`GenericStack`. 为了使它工作更换

```
GenericStack<Integer> ob = new GenericStack<Integer> (); 
```

和

```
GenericStack<Integer>.Stack ob = new GenericStack.Stack (); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T17:14:34.973

您的代码的主要问题是您混合了 2 个公共类，只是更改了一些代码，玩得开心！

通用堆栈.java

```
public class GenericStack<Item> {

    private Node first = null;

    private class Node {
        Item item;
        Node next;
    }

    public boolean IsEmpty() {
        return first == null;
    }

    public void push(Item item) {
        Node oldfirst = first;
        first = new Node();
        first.item = item;
        first.next = oldfirst;
    }

    public Item pop() {
        Item item = first.item;
        first = first.next;
        return item;
    }

} 
```

TestGenericStack.java

```
public class TestGenericStack {

    public static void main(String[] args) {

        GenericStack<Integer> ob = new GenericStack<Integer>();
        ob.push(5);
        ob.push(10);
        ob.push(15);
        while (!ob.IsEmpty()) {
            int x = ob.pop();
            System.out.println(x);
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T17:22:45.033

```
class GenericStack<Item>{
    class Stack {

        private Node first=null;

        private class Node {
            Item item;
            Node next;
        }

        public boolean IsEmpty()
        {
            return first==null;
        }

        public void push (Item item)
        {
            Node oldfirst = first;
            first = new Node();
            first.item = item;
            first.next = oldfirst;
        }

        public Item pop ()
        {
            Item item=first.item;
            first=first.next;
            return item;
        }
    }
}

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    GenericStack<Integer> ob = new GenericStack<Integer>();
    GenericStack<Integer>.Stack st=ob.new Stack();
    st.push(5);
    st.push(10);
    st.push(15);
    while (!st.IsEmpty())
    {
        int x=st.pop();
//        StdOut.print(x);
        System.out.println(x);
    }

  }
} 
```

您正在调用内部类的方法。这样使用外部类的对象就不能直接调用内部类的方法。请参阅上面的代码。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T17:15:53.263

去掉类的额外`Stack`涂层`GenericStack`。

谢谢！

# javascript - javascript 检查文件是否存在

> ID：15054182
> 
> 赞同：0
> 
> 时间：2013-02-24T17:07:12.560
> 
> 标签：javascript, d3.js

我有以下代码使用 D3.js 加载 json 数据：

```
this.clickCountry = function(d) {
    "use strict"
    var time_for_remove = 500,
        time_for_zoom = 900
    d3.selectAll("svg g").transition().delay(time_for_remove + time_for_zoom - 200).remove()
    self.svg.append("g")
        .attr("id", "country")
    self.regionsGroup = self.svg.select("#country")
    var adm1_key = d.id+"_adm1"
    try {
        var adm1_path = "../topo/"+d.id+"_adm1.json"
    } catch (e) {
        console.log(e)    // "MyError"
    }
    var adm1_path = "../topo/"+d.id+"_adm1.json"
    d3.json(adm1_path, function(error, topology) {
        var regions = topology.objects
        for(var adm1_key in regions) { 
            var o = regions[adm1_key]
        }
        self.regionsGroup.selectAll("path")
        .data(topojson.object(topology, o).geometries)
        .enter().append("path")
        .attr("d", self.projection)
        .attr("id", function(d) {
            return d.properties.name
        })
        .classed("country", true)
        .attr("class", "country")
        .on("mouseover", function(d) {
            d3.select(this)
            .style("fill", "#6C0")
            .append("svg:title")
            .text(d.properties.name)
        })
        .on("mouseout", function(d) {
            d3.select(this)
            .style("fill", "#000000")
        })
        .on("click", function(d) {
            console.log('clicked on country')
            var p = d3.mouse(this)                                                                     
            console.log(p+" "+self.map.invert(p))                                                          
            self.map.center(self.map.invert(p))
        })
    })
} 
```

`adm1_path = "../topo/"+d.id+"_adm1.json"`在实际绘制地图之前检查文件是否存在的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:22:58.557

您可以包含这样的函数：

```
function fileExists(url)
{
    var http = new XMLHttpRequest();
    http.open('HEAD', url, false);
    http.send();
    return http.status!=404;
} 
```

然后像这样修改你的代码：

```
var adm1_path = "../topo/"+d.id+"_adm1.json"
if (!fileExists(adm1_path)) {
    alert('We couldn't find that country!') //or some other suitable error/display mechanism
    return;
}

d3.json(adm1_path, function(error, topology) { 
```

# c++ - waf 在构建时指定库，但在配置时获取全名

> ID：15054188
> 
> 赞同：0
> 
> 时间：2013-02-24T17:07:57.973
> 
> 标签：c++, boost, waf

使用添加了 extras/boost.py 的 waf 1.7.9，我发现您必须在配置时获取库，这使得使用不同的库集构建目标变得困难。例如，我有两个程序，一个只需要 boost 中的头文件（程序'a'），另一个使用一些库（程序'b'）。这是我的解决方案，但我的问题是：有没有更好/首选的方法来做到这一点？

```
#! /usr/bin/env python
# encoding: utf-8

def options(opt):
    opt.load('compiler_cxx boost')

def configure(conf):
    conf.load('compiler_cxx boost')

    conf.check_boost()
    conf.env.DEFINES_BOOST = ['NDEBUG']

    conf.env.LIB_BOOST_FILESYSTEM = conf.boost_get_libs('filesystem system')[-1]
    conf.env.LIB_BOOST_PROGRAM_OPTIONS = conf.boost_get_libs('program_options')[-1]

def build(bld):
    # program 'a' requires header-only part of boost
    bld.program(
        target = 'a',
        source = 'a.cpp',
        use = ['BOOST'] )

    # program 'b' requires link to some boost libraries
    bld.program(
        target = 'b',
        source = 'b.cpp',
        use = ['BOOST', 'BOOST_FILESYSTEM', 'BOOST_PROGRAM_OPTIONS'] ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:11:09.770

我不知道是否有首选方法，但有一种方法我认为它的魔力较小。基本上，不要使用额外的提升。您可以准确指定要包含哪些库而不包含它。

```
#!/usr/bin/env python
# encoding: utf-8

def options(opt):
    opt.load('compiler_cxx')

def configure(conf):
    conf.load('compiler_cxx')

    # NOTE: The uselib_store keyword argument is not necessary here, it is just added
    # So that it is clear what name is required to use it during building.
    conf.check(compiler='cxx',lib='boost_filesystem',uselib_store='BOOST_FILESYSTEM')
    conf.check(compiler='cxx',lib='boost_program_options',uselib_store='BOOST_PROGRAM_OPTIONS')

    # NOTE: I don't know what DEFINES_BOOST is used for
    # conf.env.DEFINES_BOOST = ['NDEBUG']
    # This will give you a command line define
    conf.define('NDEBUG,'',quote=False)

def build(bld):
    # NOTE: Specifying include directories is dependent on your platform. I think Waf
    # takes care of this for you, but I'm putting it here for effect.
    inc = ['/usr/include']

    # program 'a' requires header-only part of boost
    bld.program(
        target = 'a',
        source = 'a.cpp',
        use = []
        includes = inc )

    # program 'b' requires link to some boost libraries
    bld.program(
        target = 'b',
        source = 'b.cpp',
        use = ['BOOST_FILESYSTEM', 'BOOST_PROGRAM_OPTIONS'],
        includes = inc) 
```

# java - MediaPlayer 只播放一次

> ID：15054190
> 
> 赞同：2
> 
> 时间：2013-02-24T17:08:06.137
> 
> 标签：java, android, android-listview, android-mediaplayer

我使用 startActivityForResult 从我的列表视图中获取音乐文件的路径，然后为 MediaPlayer 设置该字符串，`MediaPlayer.setDataSource(STRING);`第一次使用按钮播放歌曲时，它可以正常播放，如果我在播放歌曲时单击按钮，它将重置并再次播放。

```
 if (mMediaPlayer.isPlaying()) {
                  mMediaPlayer.reset();
         } 
```

但是如果我点击按钮播放完成，它将不会再次播放。

开始活动结果

```
Intent i = new Intent(MainActivity.this, Activityone.class);
                    startActivityForResult(i, 0);
                    mMediaPlayer.reset(); 
```

在列表视图中：

```
 music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
String filename = musiccursor.getString(music_column_index);
Intent person = new Intent();
Bundle backpack = new Bundle();
backpack.putString("arnswer", filename);
person.putExtras(backpack);
setResult(RESULT_OK, person);
finish(); 
```

onActivityResult ：

```
 if (resultCode == RESULT_OK){
               if(requestCode == 0) {
                // handling code of startActivityForResult of first button
               Bundle basket = data.getExtras();
                 s = basket.getString("arnswer");
    } 
```

和按钮启动 MediaPlayer ：

```
public void pbutton1(View view) {
       try {
           if (mMediaPlayer.isPlaying()) {
                 mMediaPlayer.reset();
        }
         mMediaPlayer.setDataSource(s); //using string here
         mMediaPlayer.prepare();
        mMediaPlayer.start();
   } catch (Exception e) {

   } 
```

日志猫：

![在此处输入图像描述](../Images/6ad0e7ceb638c458f3a78d4035790cfc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:19:56.913

我认为你需要`mMediaPlayer.seekTo(0)`为了重播，因为它已经完成了。

[请参阅 android 文档页面](http://developer.android.com/reference/android/media/MediaPlayer.html)。

* * *

编辑：

查看<->![在此处输入图像描述](../Images/c5d621ee01e65e737f8e0cf48fe34881.png)之间的图表似乎只是为了重新启动播放器的一个动作......你不需要你拥有的:( ...`Started``PlaybackCompleted``prepare`

*我理解您想要`prepare`*的原因，所以我建议您`OnCompletetionListener`进入状态并为下一步做好`mMediaPlayer.stop()`准备！`Stopped``prepare()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-25T06:40:16.173

此代码完美运行。我希望能帮助你。

```
public class PianoActivity extends Activity {

private MediaPlayer mediaPlayer = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_piano);
    setupUI();
}

@Override
protected void onPause() {
    super.onPause();
    if (mediaPlayer != null) {
        mediaPlayer.release();
        mediaPlayer = null;
    }
}

private void setupUI() {
    findViewById(R.id.doo).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            managerOfSound();
        }
    });
}

private void managerOfSound() {
    mediaPlayer = MediaPlayer.create(this, R.raw.doo);
    if (!mediaPlayer.isPlaying()) {
        mediaPlayer.start();
    } else {
        mediaPlayer.stop();
    }
    mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.reset();
            mp.release();
        }
    });
} 
```

}

# .htaccess - 使用 htaccess 将 Joomla 文章中的 URL 重定向到 K2 文章

> ID：15054191
> 
> 赞同：4
> 
> 时间：2013-02-24T17:08:22.610
> 
> 标签：.htaccess, mod-rewrite, joomla, url-rewriting, joomla-k2

我已经从 Joomla 导入了我的文章！到 K2 保持 ID 相同。现在我想重写 Joomla！指向 K2 项目的 url。我正在使用带有 SEF 和 modrewrite 启用的 Joomla 2.5.9。此外，我从未使用过 modrewrite 规则，我认为这是最好的选择，因为我有成千上万的文章。

我要更改的网址如下：

`http://www.mysite.com/news/component/content/article/9-society/19771-the-alias-of-the-article`

而同一个K2项生成的url是

`http://www.mysite.com/news/society/19771-the-alias-of-the-article`

我创建了菜单项`society`以获取此 url。

因此，我编辑了 .htaccess 以创建如下规则

```
RewriteRule ^news/component/content/article/9-(.*)$ /news/$1 [R=301,L] 
```

但我得到一个 404 错误页面。请注意，此示例是尝试了解 modrewrite 是否正常工作。我没有考虑 id 类别（本例中为 9）。

问题是：重写规则我错过了什么？

此外，我尝试了我在 SO 中看到的其他规则，还尝试了谷歌搜索以了解它们的工作原理以及 404 错误页面。就我所知，这个问题中提供的规则是应该发挥作用的规则。

答案中建议修改的`htaccess`文件如下（我的网站在 news 文件夹中。如果我使用*RewriteBase*我需要*调整它*）：

```
##
# @package    Joomla
# ...
Options +FollowSymlinks -MultiViews

## Mod_rewrite in use.
RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*([^)]*) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.
## Begin - Custom redirects
# My site is in the news folder. If I use RewriteBase I need to adjust it
RewriteBase /news/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^news/component/content/article/9-([^/]+)/([^/]+)/? /news/$1/$2 [R=301,L]
## End - Custom redirects
##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##
# RewriteBase /
## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T01:27:36.980

您可以在根目录中的一个 .htaccess 文件中尝试此操作：

### 更新文件夹中的 .htaccess 文件`/news`：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /news
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^component/content/article/9-([^/]+)/([^/]+)/?  $1/$2 [R=301,L] 
```

重定向

`http://www.mysite.com/news/component/content/article/9-society/19771-the-alias-of-the-article`带或不带斜杠

到

`http://www.mysite.com/news/society/19771-the-alias-of-the-article`

假定所有字符串都是固定的，除了`society`和`19771-the-alias-of-the-article`。

对于静默映射，`R=301`从`[R=301,L]`

注意：两者`RewriteCond %{REQUEST_FILENAME}...`都是为了防止循环。他们检查文件或目录是否存在，以防万一跳过规则。

# java - 包含椭圆的组绕任意轴旋转，如何获得组上椭圆的 x 和 y 距离改变？

> ID：15054195
> 
> 赞同：0
> 
> 时间：2013-02-24T17:08:38.100
> 
> 标签：java, math, javafx-2

我有一个带有椭圆的组。Group 围绕任意点旋转（通过将 Rotate 实例添加到 Groups 变换）。如何找出椭圆（中心）改变的距离（x 和 y）？椭圆的中心属性不会改变，因为变换应用于组。

我猜这可以通过数学方式解决，也可以通过玩弄 Group/Ellipse 上的变换实例来解决，但是，在这两个领域我都没有太多的专业知识，似乎也没有得出正确的结果。

```
import javafx.animation.Transition;
import javafx.application.Application;
import javafx.beans.property.DoubleProperty;
import javafx.scene.Group;
import javafx.scene.GroupBuilder;
import javafx.scene.Scene;
import javafx.scene.SceneBuilder;
import javafx.scene.layout.Pane;
import javafx.scene.layout.PaneBuilder;
import javafx.scene.shape.Ellipse;
import javafx.scene.shape.EllipseBuilder;
import javafx.scene.shape.Rectangle;
import javafx.scene.shape.RectangleBuilder;
import javafx.scene.transform.Rotate;
import javafx.scene.transform.RotateBuilder;
import javafx.stage.Stage;
import javafx.util.Duration;

public class Main extends Application {

@Override
public void start(Stage stage) throws Exception {
    Ellipse e = EllipseBuilder.create().centerX(110).centerY(110).radiusX(5).radiusY(5).style("-fx-fill: green;").build();
    Rectangle r = RectangleBuilder.create().x(100).y(100).width(30).height(30).style("-fx-fill: red;").build();
    Group group = GroupBuilder.create().children(r, e).build();

    Ellipse pivot = EllipseBuilder.create().centerX(60).centerY(100).radiusX(2).radiusY(2).style("-fx-fill: purple;").build();

    Pane p = PaneBuilder.create().children(group, pivot).build();

    Scene scene = SceneBuilder.create().root(p).width(200).height(200).build();
    stage.setScene(scene);
    stage.show();

    final Rotate rotate = RotateBuilder.create().pivotX(pivot.getCenterX()).pivotY(pivot.getCenterY()).build();
    group.getTransforms().add(rotate);

    RotationTransition trans = new RotationTransition(rotate.angleProperty());
    trans.playFromStart();
}

class RotationTransition extends Transition {
    private final DoubleProperty angle;

    public RotationTransition(DoubleProperty angle) {
        this.angle = angle;
        setCycleDuration(Duration.seconds(5));
    }

    @Override
    protected void interpolate(double frac) {
        angle.setValue(frac * 60);
    }
}

public static void main(String[] args) {
    launch(args);
}
} 
```

上面的代码显示了一个旋转的动画。如何找出绿色椭圆在旋转后改变的 x 和 y 距离？或者，同样，我如何找出椭圆的新坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:33:22.957

虽然我仍然无法理解复杂场景中的各种 localToParent、parentToLocal 等方法（具有不同转换的多个嵌套组），但我通过一些实验发现在发布的代码示例中

```
group.localToParent(e.getCenterX(), e.getCenterY()) 
```

似乎工作。在我的实际应用中，我只对移动的距离感兴趣，而不是实际位置，所以同样的方法在那里有效。（尽管考虑到我复杂的组层次结构，它可能没有给出有意义的绝对数字）。

# asp.net - JSONP回调，响应数据为空

> ID：15054200
> 
> 赞同：1
> 
> 时间：2013-02-24T17:09:05.757
> 
> 标签：asp.net, jquery, asp.net-mvc-4, jsonp

继我最初的问题之后：[未收到 JSONP 回调](https://stackoverflow.com/questions/15053733/not-receiving-jsonp-callback)

我现在正在尝试处理 JSONP 回调中的信息，但我似乎无法获取任何要“加载”的数据，即`rsp`对象似乎为空/null。

**VenuOffersDAO（更新：不使用它来简化事情）**

这是在 MVC4 项目之外的一个单独的类库项目中。所以，我`controller`不使用`model`.

```
public static List<Offer> GetVenuesOffers(int venueId)
{
    using (var ctx = new MyDbEntities())
    {
        var venue = (...removed for brevity...).FirstOrDefault();

        return 
            venue != null 
            ? GetVenuesOffers(venue) 
            : null;
    }
}

public static List<Offer> GetVenuesOffers(Venue venue)
{
    using (var ctx = new MyDbEntities())
    {
        ...removed for brevity...
        return offers.ToList();
    }
} 
```

**控制器（更新：现在使用更简单的对象而不是生成的 EF 对象。）**

这是在 ASP.NET MVC4 项目中。

```
public class VenueOffersController : Controller
{
    [JsonpFilter]
    public JsonResult GetOffersForVenue(int venueId)
    {
        var offers = new List<VenueOffers>();

        using (var ctx = new BoonEntities())
        {
            offers = (from o in ctx.Offers
                      where o.VenueID == venueId
                      select new VenueOffers
                          {
                              Id = o.ID,
                              VenueId = venueId,
                              Title = o.Title
                          }).ToList();
        }

        return Json(offers.ToList(), JsonRequestBehavior.AllowGet);
    }
}

[Serializable]
public class VenueOffers
{
    public int Id { get; set; }
    public int VenueId { get; set; }
    public string Title { get; set; }
} 
```

**网页**

这是在 ASP.NET v4 Web-Forms 项目中作为纯 HTML 文件。

```
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
    <script type="text/javascript">
        var url = "http://localhost/MySite.ContentDelivery/VenueOffers/GetOffersForVenue/?";

        function getOffers() {
            // build the URL
            debugger;
            var call = url + "venueId=48&callback=?";

            // make the ajax call
            $.getJSON(call, function (rsp) {
                alert(rsp.offers);     //  'undefined'
                alert(rsp);            //  empty
                var html = "";
                $.each(rsp.offers.offer, function () {
                    var offer = this;
                    html += "<span" + offer.Title + "</span> <br />";
                });

                $("#offersDiv").append(html);
            });
        }

        // get the offers
        $(document).ready(function () {
            alert('go..');
            $(getOffers);
        });
    </script>
    <div id="offersDiv"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:12:46.367

您的控制器操作正在返回一个数组 ( `List<Offer>`)。您的 JSON 结果可能如下所示：

```
[{"Name":"some name 1"}, {"Name":"some name 2"}, ...] 
```

因此，在您的成功回调中，您可以遍历结果：

```
$.getJSON(call, function (rsp) {
    var html = "";
    $.each(rsp, function () {
        var offer = this;
        html += "<span>" + offer.Name + "</span><br />";
    });
    $("#offersDiv").append(html);
}); 
```

还要在控制器操作中放置一个断点，并确保`offers`您返回的变量实际上包含一些元素。

另请注意，您动态生成`>`的`span`元素缺少关闭。

我在您的代码中看到的另一个问题是您可以将 document.ready 处理程序替换为：

```
$(getOffers); 
```

# google-apps-script - 可以在 Google 电子表格的 onEdit 触发器中使用 jdbc 吗？

> ID：15054203
> 
> 赞同：0
> 
> 时间：2013-02-24T17:09:14.467
> 
> 标签：google-apps-script

我正在尝试在 onEdit 触发器中使用 jdbc？我尝试以下代码，但它永远不会到达最后一条语句......

```
function onEdit(e) {
  cadena = e.range.getValue();

  SpreadsheetApp.getActiveSpreadsheet().getRange('a2').setValue(new Date().toTimeString());  
  SpreadsheetApp.getActiveSpreadsheet().getRange('a1').setValue(cadena);  
  SpreadsheetApp.getActiveSpreadsheet().getRange('a3').setValue(new Date().toTimeString());  
  var conn = Jdbc.getConnection("jdbc:mysql://<host>:3306/<database>", "<user>", "<pwd>");
  SpreadsheetApp.getActiveSpreadsheet().getRange('a4').setValue(new Date().toTimeString());  
} 
```

我正在使用真实字符串进行数据库连接（此处未显示）。从脚本编辑器或自定义函数执行时，数据库连接工作正常。该数据库是一个公共数据库...

我无法调试，因为它是一个触发器。

为什么会这样？它是假设发生还是错误？

R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:27:53.887

出于安全原因，onEdit 触发器没有对服务的完全访问权限。有很多你不能用。

看看[这个其他答案](https://stackoverflow.com/a/13237783/2048063)。

# objective-c - 如何在 Objective-C 中将 BOOL 转换为字节？

> ID：15054204
> 
> 赞同：1
> 
> 时间：2013-02-24T17:09:21.517
> 
> 标签：objective-c, xcode, networking, nsdata

我有一系列最终可以表示为的数据`BOOLs`。我想将它们转换`BOOLs`成`bytes`这样我可以把它们放在一个`NSData`对象中并通过网络发送它们。我知道我可以将 8`BOOLs`放入 1`byte`中。我将如何打包这些数据？另外，一旦收到，我将如何将其解压缩回`BOOLs`？网络部分是通过 处理的`GameCenter`，所以我只需要担心打包和解包数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:22:12.133

第一：你真的想要或需要将 8 个布尔值打包成一个字节吗？打包节省了带宽，但增加了很多复杂性和麻烦；多年来，它一直是错误的强大来源。

如果您确实想这样做，请使用掩码和逻辑运算符。

```
 #define kMill 1
 #define kDrill 2
 #define kFill  4
 #define kALL   kMill|kDrill|kFill;

 unsigned char TheData;

- (BOOL) isMilled { return (theData&kMill)!=0; }
- (void) setMilled: (BOOL) flag { 
      if (flag) {theData |= kMill;} 
      else {theData = theData & (kAll^kMill;}} 
```

C 联合对此有一些支持，但最好避免使用该功能。

作为一项规则，避免过早优化。简单地表示您的数据，然后在出现性能问题时通过网络查看压缩表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T22:30:21.773

您可以将您的数据视为*位*的集合，并使用

*   `CFBitVector`及其可变对应物`CFMutableBitVector`，

这是一种 CoreFoundation 类型，用于管理位值的集合，或者在较低级别上，

*   位[串操作宏](http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/bit_alloc.3.html)。

这两种方法都提供函数/宏来设置大位向量中的各个位，并且您可以访问底层缓冲区以将位向量包装到`NSData`对象中并返回。

**示例`CFBitVector`：**

```
// Create a bit vector and set some bits:
CFIndex numBits = 256;
CFMutableBitVectorRef bitvec = CFBitVectorCreateMutable(NULL, 0);
CFBitVectorSetCount(bitvec, numBits);
CFBitVectorSetBitAtIndex(bitvec, 0, 1);
CFBitVectorSetBitAtIndex(bitvec, 5, 1);
CFBitVectorSetBitAtIndex(bitvec, 255, 1);

// Pack into NSData:
size_t nbytes = (CFBitVectorGetCount(bitvec) + 7)/8;
NSMutableData *data = [NSMutableData dataWithLength:nbytes];
CFBitVectorGetBits(bitvec, CFRangeMake(0, CFBitVectorGetCount(bitvec)), [data mutableBytes]); 

// And back to CFBitVector:
CFBitVectorRef bitvec2 = CFBitVectorCreate(NULL, [data bytes], [data length] * 8);
// Test a value:
BOOL bit5set = CFBitVectorGetBitAtIndex(bitvec2, 5) != 0; 
```

**位串示例：**

```
// Create bit-string and set some bits:
int numBits = 1024;
bitstr_t *mybits = bit_alloc(numBits);
bit_nclear(mybits, 0, numBits - 1);
bit_set(mybits, 5);
bit_set(mybits, 17);

// Pack into NSData:
NSData *data = [NSData dataWithBytes:mybits length:bitstr_size(numBits)*sizeof(bitstr_t)];

// And back to bit-string:
int bitcount = (int)[data length] * 8;
const bitstr_t *mybits2 = [data bytes];
// Test a value:
BOOL bit5set = bit_test(mybits2, 5) != 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T17:28:26.713

不，您不能将 8 个 BOOLS 作为 BOOL 放入 1 个字节！= 布尔值（1/0 = 1 位） BOOL 是短的，仅在 99% 的情况下 1/0

也就是说，如果你假设它只是 1/0 位移位的东西成一个字节！

```
 UInt8 b = 0;

    BOOL bool1 = YES, bool2 = NO, bool3 = YES;
    if(bool1) b = b | 1;
    if(bool2) b = b | 2;
    if(bool3) b = b | 4;

    // insert code here...
    NSLog(@"%@", [NSData dataWithBytes:&b length:1]);

    bool1 = b & 1;
    bool2 = b & 2;
    bool3 = b & 4;

    NSLog(@"%d%d%d", bool1, bool2, bool3); 
```

**但这不值得：D**

# java - For Loop - 变量无法识别；“不是声明”错误

> ID：15054206
> 
> 赞同：2
> 
> 时间：2013-02-24T17:09:31.313
> 
> 标签：java, loops, for-loop

我已经很多年没有用 Java 编码了，但最近我被要求在工作中实现一个基于 Java 的程序。长话短说，它做了我们需要的一切，除了将用户 ID 而不是电话号码放在报告中。我应该指出，我们是拥有该程序的公司的合作伙伴，我有权根据需要进行更改。但是，他们的网站不提供源代码。我已经要求了，但 3 周后没有运气。所以，我必须反编译代码，并进行所需的更改。我已经设法进行了更改，并删除了除三个之外的所有编译错误。它们在三个不同的 For 循环中都是相同的错误。当我尝试顶部编译时，我得到以下信息。

```
FraudDetectionTool.java:655: not a statement
        for ( str3 : arrayOfString2 ) {
              ^
FraudDetectionTool.java:655: ';' expected
        for ( str3 : arrayOfString2 ) {
                  ^
FraudDetectionTool.java:655: illegal start of expression
        for ( str3 : arrayOfString2 ) {
                   ^
FraudDetectionTool.java:655: ';' expected
        for ( str3 : arrayOfString2 ) {
                    ^
FraudDetectionTool.java:681: not a statement
      for (str3 : array3) {
           ^
FraudDetectionTool.java:681: ';' expected
      for (str3 : array3) {
               ^
FraudDetectionTool.java:681: illegal start of expression
      for (str3 : array3) {
                ^
FraudDetectionTool.java:681: ';' expected
      for (str3 : array3) {
                 ^
FraudDetectionTool.java:695: not a statement
      for (str3 : arrayOfString3) {
           ^
FraudDetectionTool.java:695: ';' expected
      for (str3 : arrayOfString3) {
               ^
FraudDetectionTool.java:695: illegal start of expression
      for (str3 : arrayOfString3) {
                ^
FraudDetectionTool.java:695: ';' expected
      for (str3 : arrayOfString3) { 
```

这是包含第一个 for 循环的代码部分。我省略了 Main 的剩余部分。如果需要，我可以发布整个课程（750 行）或方法（160 行）。我注意到的是 str3 已初始化，但在 For 循环内无法识别。但是，如果我保留原始初始化，并尝试在 For 循环内重新初始化。我的编译器警告我该变量已在 Method Main 中使用。

```
public static void main(String[] paramArrayOfString)
{
 initializeProperties();
 init();

 GenericInputChannel.initialize(true);

 for (String str1 : paramArrayOfString) {
  fileNames.add(str1);
 }

 try
 {
   String[] mail = EMAIL_ADDRS.split(",");
   for (String str2 : mail) {
     str2 = str2.replaceAll(" *", "");
     emailAddresses.add(str2);
     if (str2.length() > 0) {
      if (DEBUG) {
            System.out.println("Adding email " + str2);
      }
      sendEmail = true;
    }
  }
 } 
 catch (Exception localException1) {
   System.out.println("Error parsing email addrs " + EMAIL_ADDRS);
   emailAddresses.clear();
 }

 if (TEST_MODE) {
  System.out.println("Sending Test email");
  sendEmail(true);
  System.exit(0);
 }

 String[] arrayOfString2 = new String[1];
 String str3;

 if (fileNames.size() == 0)
 {
 File localfiler = new File(DEFAULT_BILLING_DIR);
  if (((File)localfiler).exists()) {
    arrayOfString2 = ((File)localfiler).list();
    for ( str3 : arrayOfString2 ) {
          fileNames.add(DEFAULT_BILLING_DIR + str3);

    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:18:29.047

使用增强的 for 循环时，必须在 for 语句中声明“循环变量”：

```
for (String s : list) 
```

另一方面，这个类似的代码不会编译：

```
String s;
for (s : list) 
```

这是[语言规范# 14.14.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)所要求的：

```
EnhancedForStatement:
    for ( FormalParameter : Expression ) Statement
FormalParameter:
    VariableModifiersopt Type VariableDeclaratorId 
```

（注意`Type`在参数的声明中是必需的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T17:14:39.077

改变

```
String str3;

 if (fileNames.size() == 0)
 {
 File localfiler = new File(DEFAULT_BILLING_DIR);
  if (((File)localfiler).exists()) {
    arrayOfString2 = ((File)localfiler).list();
    for ( str3 : arrayOfString2 ) {
          fileNames.add(DEFAULT_BILLING_DIR + str3);

    }
  }
 } 
```

至

```
 if (fileNames.size() == 0)
 {
 File localfiler = new File(DEFAULT_BILLING_DIR);
  if (((File)localfiler).exists()) {
    arrayOfString2 = ((File)localfiler).list();
    for (String str3 : arrayOfString2 ) {
          fileNames.add(DEFAULT_BILLING_DIR + str3);

    }
  }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T17:15:32.083

删除您的`String str3`并修改您的`for`：

```
 for (String str3 : arrayOfString2 ) {
          fileNames.add(DEFAULT_BILLING_DIR + str3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T17:18:37.977

您的问题是当您在 arrayOfString2 上循环 str3 时，因为您必须在循环内声明 str3 变量。

像这样修复您的代码应该可以解决您的问题。

```
 String[] arrayOfString2 = new String[1];

    if (fileNames.size() == 0)
    {
       File localfiler = new File(DEFAULT_BILLING_DIR);
       if (((File)localfiler).exists()) {
            arrayOfString2 = ((File)localfiler).list();
            for (String str3 : arrayOfString2 ) {
                  fileNames.add(DEFAULT_BILLING_DIR + str3);

            }
       }
    } 
```

有关更多详细信息，请查看[For 声明](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T17:14:36.097

```
for ( str3 : arrayOfString2 ) {
          fileNames.add(DEFAULT_BILLING_DIR + str3); 
```

必须改为

```
for (String str3 : arrayOfString2 ) {
          fileNames.add(DEFAULT_BILLING_DIR + str3); 
```

# css - css整页背景不显示

> ID：15054210
> 
> 赞同：1
> 
> 时间：2013-02-24T17:09:45.353
> 
> 标签：css, image, background

所以我按照 [http://css-tricks.com/perfect-full-page-background-image/][1] 上的教程进行操作，但没有任何显示！背景是白色的！

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Home</title>
    <style type="css/text">
html {
    background: url(images/black-carbon-sheet.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
    </style>
 </head>
 <body>
 </body>
 </html> 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:13:35.523

样式`type="css/text"`不正确

利用

样式`type="text/css"`或完全删除它。

还要确保您的图像路径正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:12:21.327

```
html, body { height: 100%; } 
```

另外，检查你的路径。

# django - 在管理界面中看不到扩展的用户模型字段

> ID：15054215
> 
> 赞同：0
> 
> 时间：2013-02-24T17:10:02.577
> 
> 标签：django, django-models, django-admin

我在我的用户模型中添加了一个名为 extra 的字段，如下所示：-

```
class ExtendedUser(models.Model):
user = models.OneToOneField(User)
extra = models.CharField(max_length=30, null=True)

# when a user is created, make sure an ExtendedUser is created too
def create_extended_user(sender, instance, created, *args, **kwargs):
    if created:
        extended_user = ExtendedUser(user=instance)
        extended_user.save()
post_save.connect(create_extended_user, sender=User) 
```

在我的 admin.py 中，我尝试确保在编辑用户时可以编辑这个额外的字段：-

```
class ExtendedUserInline(admin.TabularInline):
    model = ExtendedUser
    fk_name = 'user'
    max_num = 1

class ExtendedUserAdmin(UserAdmin):
    inlines = [ExtendedUserInline]

admin.site.unregister(User)
admin.site.register(User, ExtendedUserAdmin) 
```

但是，我在用户的管理页面中看不到额外的字段。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:20:21.790

编辑后您是否重新启动了开发服务器`admin.py`？

另请参阅[这个非常相似的线程](https://stackoverflow.com/questions/4565814/django-user-userprofile-and-admin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:35:42.383

您的第一个代码块对我来说看起来不错，尽管您可能希望使用装饰器来提高可读性。这是一个更新的示例。

```
class ExtendedUser(models.Model):
user = models.OneToOneField(User)
extra = models.CharField(max_length=30, null=True)

# when a user is created, make sure an ExtendedUser is created too
@receiver(post_save, sender=User)    
def create_extended_user(sender, instance, created, *args, **kwargs):
        if created:
            extended_user = ExtendedUser(user=instance)
            extended_user.save() 
```

更新答案：

您需要设置 AUTH_PROFILE_MODULE = 'app_name.ExtendedUser'

[这是一个](http://igorsobreira.com/2010/12/11/extending-user-model-in-django.html)与您几乎相同的帖子。下面的一些评论值得一读。

# java - Java中的复合生产者-消费者

> ID：15054227
> 
> 赞同：0
> 
> 时间：2013-02-24T17:11:30.213
> 
> 标签：java, producer-consumer

我的关系必须如下工作；线程 A 向线程 B 发布一些更改，线程 B 接受该更改并将其发布到线程 C。

问题是生产者-消费者，我没有问题使用 BlockingQueue 来实现它，只有两个实体。我怎样才能使线程 B 成为一种混合生产者和消费者来完成这项工作？例如，对于这种类型的问题，是否有一些特定的模型可以遵循？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:12:38.033

使用两个阻塞队列：一个在 A 和 B 之间；B和C之间的另一个。

# c++ - 具有用户定义的类成员的类的复制构造函数

> ID：15054232
> 
> 赞同：4
> 
> 时间：2013-02-24T17:11:53.710
> 
> 标签：c++, copy-constructor, composition, assignment-operator

我正在阅读 C++ 第 14 章中的思考：“不会自动继承的函数”

```
class GameBoard {
public:
  GameBoard() { cout << "GameBoard()\n"; }
  GameBoard(const GameBoard&) { 
    cout << "GameBoard(const GameBoard&)\n"; 
  }
  GameBoard& operator=(const GameBoard&) {
    cout << "GameBoard::operator=()\n";
    return *this;
  }
  ~GameBoard() { cout << "~GameBoard()\n"; }
};

class Game {
  GameBoard gb; // Composition
public:
  // Default GameBoard constructor called:
  Game() { cout << "Game()\n"; }
  // You must explicitly call the GameBoard
  // copy-constructor or the default constructor
  // is automatically called instead:
  Game(const Game& g) : gb(g.gb) { 
  //Game(const Game& g) {
    cout << "Game(const Game&)\n"; 
  }
  Game(int) { cout << "Game(int)\n"; }
  Game& operator=(const Game& g) {
    // You must explicitly call the GameBoard
    // assignment operator or no assignment at 
    // all happens for gb!
    gb = g.gb;
    cout << "Game::operator=()\n";
    return *this;
  }
  class Other {}; // Nested class
  // Automatic type conversion:
  operator Other() const {
    cout << "Game::operator Other()\n";
    return Other();
  }
  ~Game() { cout << "~Game()\n"; }
}; 
```

在上面的代码中，我对`Game`类的复制构造函数和赋值构造函数感到困惑：

```
 // You must explicitly call the GameBoard
      // copy-constructor or the default constructor
      // is automatically called instead:
      Game(const Game& g) : gb(g.gb) { 
      //Game(const Game& g) {
        cout << "Game(const Game&)\n"; 
      }

      Game& operator=(const Game& g) {
        // You must explicitly call the GameBoard
        // assignment operator or no assignment at 
        // all happens for gb!
        gb = g.gb;
        cout << "Game::operator=()\n";
        return *this;
      } 
```

作者给出了评论：“***您必须显式调用`GameBoard`复制构造函数，否则会自动调用默认构造函数：*** ”为什么如果我不显式调用`GameBoard`复制构造函数，则会调用默认构造函数？

对于赋值构造函数，***如果我没有显式调用`GameBoard`赋值运算符，则不会发生赋值。***为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:25:58.307

> 为什么如果我没有显式调用 GameBoard 复制构造函数，那么会调用默认构造函数？

如果您没有为 编写任何显式的复制构造函数`Game`，那么编译器将为您生成一个复制构造函数`gb`。另一方面，在您明确定义自己的复制构造函数的那一刻，编译器会认为*“好吧，这家伙真的知道他在做什么，所以让我们**完全控制**他吧”*。

通过获得完全控制权，您还有责任明确指定在复制构建期间要执行的所有操作。如果您不指定任何操作，则编译器必须假定应采用构造对象的默认机制。而构造对象的默认机制是调用*默认构造函数*。

由于您似乎知道自己在做什么，因此编译器不会对您的成员变量的正确构造过程做出任何假设。您想要完全控制，现在您拥有它：忘记了什么？您将获得默认构造。

> 如果我没有明确调用 GameBoard 赋值运算符，则不会发生赋值。为什么？

答案非常相似。通过显式定义自己的`operator =`，您是在告诉编译器您希望完全控制对象的分配方式。编译器不会通过做出可能不正确的假设来尝试继续前进。相反，它只会搁置一旁，留给你所有的决策权。

另一方面，假设编译器默默地生成了 assignment `gb = g.gb`，但是出于某些（希望是好的）原因，您*不*希望执行该分配：如果要生成默认行为，您将如何告诉编译器*不要*执行它这样的指令？

此外，除非*确实*需要，否则让编译器为您的类隐式生成复制/移动构造函数、析构函数和复制/移动赋值运算符是一种很好的编程习惯：有关更多信息，请参阅 R. Martinho 的这篇文章费尔南德斯关于所谓**[的零规则](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)。**

希望这有助于澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:34:51.007

当您自定义复制构造函数和/或赋值运算符时，您必须处理所有成员变量。

当您不对复制构造函数和/或赋值运算符进行编码时，编译器会生成默认值。请注意，默认值执行浅分配和复制。两者都只是遍历每个成员变量并使用它们的赋值运算符或复制构造函数。

```
// NOTE don't you strdup or free in c++ (see new, delete and the string class)
// this is for BAD example only
class Stuff {
public:
   char * thing;
   Stuff( void ) : thing(0) {}
   ~Stuff() { if( thing ) free thing; };
   void copyThing( char * other ) { thing = strdup(other); }

}

class Other {
public:
    Stuff   myStuff;
}

void BadExample() {
    Other oa;
    oa.copyThing( "Junk" );
    Other ob;
    ob = oa; // will work but oa and ob myStuff.thing will point to the same address
             // and you will attempt to free it twice during deconstruction
}

class BetterStuff {
public:
   char * thing;
   BetterStuff( void ) : thing(0) {}
   ~BetterStuff() { if( thing ) free thing; };
   void copyThing( char * other ) { thing = strdup(other); }
   BetterStuff & operator = ( const BetterStuff & rhs ) {
     if( rhs.thing ) thing = strdup( rhs.thing );
   }
}

class BetterOther {
public:
    BetterStuff   myStuff;
}

void Example() {
    BetterOther oa;
    oa.copyThing( "Junk" );
    BetterOther ob;

    ob = oa; // now ob has a private copy of the string and can free it.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:29:27.913

这些评论对我来说真的没有意义。

如果您将代码简化为以下内容：

```
#include <iostream>

using namespace std;

class GameBoard {
public:
  GameBoard() { cout << "GameBoard()\n"; }
  GameBoard(const GameBoard&) { 
    cout << "GameBoard(const GameBoard&)\n"; 
  }
  GameBoard& operator=(const GameBoard&) {
    cout << "GameBoard::operator=()\n";
    return *this;
  }
  ~GameBoard() { cout << "~GameBoard()\n"; }
};

class Game {
  GameBoard gb; // Composition
};

int main() { 
    cout << "Default Constructing Game object\n";
    Game g;

    cout << "\nCopy constructing Game object\n";
    Game h = g; // uses copy ctor

    cout << "\nDefault constructing another Game object\n";
    Game i;

    cout << "\nAssigning a Game object\n";
    i = g;  // uses assignment operator.
    return 0;
} 
```

您将（或无论如何应该）得到如下输出：

```
Default Constructing Game object
GameBoard()

Copy constructing Game object
GameBoard(const GameBoard&)

Default constructing another Game object
GameBoard()

Assigning a Game object
GameBoard::operator=()
~GameBoard()
~GameBoard()
~GameBoard() 
```

也许他在谈论这样一个事实，即当您定义自己的构造函数/赋值运算符时，默认情况下*不会发生默认情况。*如果是这样，那是真的（也许我们出于同样的原因感到困惑：因为这似乎是在为异常明显的事情而苦恼）。

# java - Java中的OOP：使用方法链的类继承

> ID：15054237
> 
> 赞同：16
> 
> 时间：2013-02-24T17:12:39.470
> 
> 标签：java, oop

我有一个父类，它定义了一系列链接器方法（返回“this”的方法）。我想定义多个包含它们自己的链接器方法但也“覆盖”父方法的子类，以便返回子类的实例而不是父类。

我不想在每个子类中重复相同的方法，这就是为什么我有一个包含所有子类共享的方法的父类。谢谢。

```
class Chain {
  public Chain foo(String s){
    ...
    return this;
  }
}

class ChainChild extends Chain {
  //I don't want to add a "foo" method to each child class
  /*
  public ChildChain foo(String s){
    ...
    return this;
  }
  */

  public ChainChild bar(boolean b){
    ...
    return this;
  }
}

ChainChild child = new ChainChild();
child.foo().bar(); //compile error: foo() returns a "Chain" object which does not define the bar() method. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T17:17:08.253

返回的父类中的方法`this`仍将返回对子类对象的引用。您只能将其视为父类的对象（除非您强制转换它），但它实际上是其原始类型。

您可以考虑使用这样的泛型：

```
// This seems a bit too contrived for my liking. Perhaps someone else will have a better idea.
public class Parent<T extends Parent<T>> {
    T foo () {
        return (T) this;
    }
}

public class Child extends Parent<Child> {
    public void bar () {
        Child c = foo();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-24T17:20:49.607

我已经根据您的需要使用泛型编写了这个示例。

```
class Parent {
    public <T extends Parent> T foo() {
        return (T)this;
    }
}

class Child extends Parent {

}

class AnotherChild extends Parent {

}

public class Test {
    public static void main(String[] args) {

        Parent p = new Child();
        System.out.println(p);
        Child c = p.foo();
        System.out.println(c);
        //throws ClassCastException here since Child is not AnotherChild
        AnotherChild ac = p.foo();
        System.out.println(ac);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-14T10:23:20.230

这是对 OldCurmudgeon 方法的改进：

```
public class Parent<This extends Parent<This>> {

    @SuppressWarnings("unchecked")
    private final This THIS = (This)this;

    public This foo() {
        //...
        return THIS;
    }

    public This bar() {
        //...
        return THIS;
    }    
}

public class Child extends Parent<Child> {

    // you can override super with covariant return type
    @Override
    public Child bar() {
        super.bar();

        return this;
    }
}

Child child = 
new Child()
.foo()
.bar(); 
```

改进之处在于只进行一次未经检查的强制转换并将其保存到常量 THIS 中，您可以将其重用为方法链接的返回值。

这消除了每个方法中未经检查的强制转换，并使代码更清晰。

您可以通过返回 Child 而不是 This（协变返回类型）来覆盖 Parent 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T17:18:58.137

你可以投它。

```
ChainChild child = new ChainChild();
((ChainChild) child.foo()).bar(); 
```

你可以试试：

```
public ? extends Chain foo() {
    return this;
} 
```

但我不确定这是否会有所帮助，即使它可以编译。

# c# - 如何在 mvc 中创建动态视图结构以在 CMS 中实现模块

> ID：15054238
> 
> 赞同：0
> 
> 时间：2013-02-24T17:12:41.887
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC 4 .NET 构建一个 CMS 系统

系统有以下对象：

**页面类型**

*   ID
*   姓名
*   布局 - 布局文件的 URL

**页面**

*   ID
*   父母ID
*   内容（等等……）

**模块**

*   ID
*   姓名
*   类型（模块的类型，如图片库、联系页面、常见问题解答等）

**问题**

目前我正在努力解决如何在每个页面中实现模块。我以实物形式构建了应用程序，每个页面都有一个内容和一个模块列表。

我的问题是页面布局必须提前知道。所以我会知道在**哪里**渲染视图中的每个模块。

**我想到了这个解决方案：（我现在正在使用的当前解决方案）**

为每个页面的类型创建一个布局页面，并将模块类型与每个页面布局相关联。

现在，当用户想要添加一个新页面时，他必须首先选择一个布局（页面类型）以及相关的模块数量。该解决方案中的问题是：

*   我需要为每种类型的页面构建一个布局。
*   用户只能添加与页面布局（类型）相关的模块。

**第二种解决方案：**

我想到的第二个解决方案是根据关联的模块动态创建布局。我想补充一点，我不知道如何实现它。

在该解决方案中，用户可以添加他喜欢的任意数量的模块。但我不知道如何用模块定义页面结构。

*   如果用户没有创建模块怎么办？它将如何影响布局？
*   如果模块不是一个接一个地出现，我如何创建一个结构？

**基本上，有一种方法可以将模块的位置存储在页面中，并在视图中将模块呈现在该位置。**

我知道它应该涉及在所需位置为每个模块渲染部分视图。

如果有办法模块对象应该是什么样子？

我的问题够清楚吗？

# wcf - wcf 抛出 ServiceModel.Security.MessageSecurityException 并且 api 操作完成

> ID：15054240
> 
> 赞同：1
> 
> 时间：2013-02-24T17:12:49.470
> 
> 标签：wcf, api, exception, clock, skew

我使用 WCF（在远程服务器上运行的 API）调用 API 方法：

```
try
{
  m_serviceClient.Deposit(account, balance);          
}
catch (Exception exception)
{
  m_log.Error(msg.ToString(), exception);
} 
```

我在远程服务器上运行 API 服务器，如果我将服务器上的时间调整为 7 分钟后，它会抛出异常：

System.ServiceModel.Security.MessageSecurityException：安全时间戳无效，因为它的创建时间（'2013-02-24T15:29:03.498Z'）在未来。当前时间为“2013-02-24T15:23:24.159Z”，允许的时钟偏差为“00:05:00”。

这很好，但由于某种原因，尽管出现了 WCF 异常，但“存款”功能仍然成功。知道这怎么会发生，如果发生 WCF 异常，如何防止“存款”功能成功？

# javascript - 我可以在没有超时的情况下使用 CSS3 和/或 javascript 隐藏/显示此菜单吗

> ID：15054259
> 
> 赞同：2
> 
> 时间：2013-02-24T17:14:18.273
> 
> 标签：javascript, html, css

[http://jsfiddle.net/blankasaurus/YPR4U/15/embedded/result/](http://jsfiddle.net/blankasaurus/YPR4U/15/embedded/result/)

我的布局按照我想要的方式运行。我不确定我是否喜欢在切换功能中设置宽度：

```
 $('.content').css('width', '100%');

 $('.content').css('width', '75%'); 
```

而且我也真的不喜欢在显示和隐藏菜单面板之前设置超时：

```
 setTimeout(function()
 {
     $('.sidebar').fadeIn();
 }, 1001); 
```

有没有更好的方法来解决这个问题？

这是一个小提琴：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:17:32.323

对于淡出，您可以只使用传入的回调函数`fadeOut`。

例如：

```
$('.sidebar').fadeOut( 400, function() {
    $('.content').css('width', '100%');
}); 
```

对于淡入，您可以尝试使用[过渡事件](http://www.w3.org/TR/css3-transitions/#transition-events-)。您只需为不同的浏览器编写特定的代码，毫不奇怪，不支持旧浏览器。更多细节可以在[这里找到。](https://stackoverflow.com/a/2794186/911140)

# logging - 将日志记录和跟踪与 AspectJ 相结合

> ID：15054269
> 
> 赞同：0
> 
> 时间：2013-02-24T17:14:57.423
> 
> 标签：logging, aop, aspectj

首先，我想定义跟踪和日志记录之间的区别，如“AspectJ in Action”一书第 257 页所述：

> 大多数开发人员（和本书）将**日志记录**称为***生成特定于一段代码所承载的逻辑的消息的行为***。
> 
> **跟踪**通常被认为是***为较低级别事件生成消息的行为***：方法进入和退出、对象构造、异常处理、状态修改等。

因此，使用 AspectJ 进行跟踪并不难。但是，*如何使日志记录与 AspectJ 跟踪保持一致*？

例如，我使用 sl4j 记录器进行方面的跟踪，我需要使用**相同的记录器**进行记录。

解决方案之一是编写如下所示的单独方面：

```
around(): catchCallToLogger(): *pointcut that intercepts calls like log(), debug(), info() etc from some logging toolkit* {
   *call logger from tracing aspect*
} 
```

所以，这个选项是可以接受的，但我想知道这个方法是否有替代方案，以及在现实世界中是否需要结合跟踪和日志记录。

# python - 我可以在 iPad 上开发 Python 代码（用于其他平台）吗？

> ID：15054272
> 
> 赞同：5
> 
> 时间：2013-02-24T17:15:47.687
> 
> 标签：python, ipad

我将在不久的将来进行一些轻量级的旅行。我在旅行期间不会有任何预定的开发工作，但可能会被要求调整一些 Python 应用程序。为方便起见，我正在考虑携带 iPad 而不是 Windows 电脑。

我最关心的库是 sqlite3、csv、xlrd、openpyxl、cherrypy。另外，pyodbc，虽然我认为这是不可能的（而且我也没有 SQL Server 实例可以与之交谈）。对于测试，我最好能够在 iPad 上运行 cherrypy 并让浏览器与 localhost 交互。我所有的开发工作都使用 Python 2.7。

我的问题是 iPad 上的 Python 堆栈和库支持是否足以让我合理地期望执行所描述的小规模编程。

**请注意，我*不想*开发将在 iPad 上运行和分发的程序（除了我自己在测试期间使用），目标系统都是 Windows 或 Ubuntu 系统。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:42:56.040

[Pythonista](http://omz-software.com/pythonista/)是一个不错的 iPad 的 Python 开发环境。它支持大部分 Python 标准库，以及一些其他常见的 Python 库。

但是，由于Apple的限制，无法安装其他库。因此，您不会拥有所需的所有库。也不支持版本控制系统。

# javascript - why does try / catch in javascript fail in IE

> ID：15054273
> 
> 赞同：0
> 
> 时间：2013-02-24T17:15:51.737
> 
> 标签：javascript, html5-video, try-catch

```
 Try
 {
myTextTrack = myPlayer.addTextTrack( 'subtitles','myLabel','en' );
  }  catch(err)
 {
alert('This browser does not support the comments on the video.');
return;
  } 
```

The above should trigger the alert in IE (not in Chrome). But it gives a script syntax error. The code is generated by asp.net and then inserted, so there are carriage return/linefeeds after every line. But that should not matter.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:17:25.687

If you're able, change the capital T in Try to t.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T17:18:48.187

JavaScript is case sensitive. `try` should be lower case

```
 try
 {
myTextTrack = myPlayer.addTextTrack( 'subtitles','myLabel','en' );
  }  catch(err)
 {
alert('This browser does not support the comments on the video.');
return;
  } 
```

# c++ - 来自包装接口的动态转换

> ID：15054275
> 
> 赞同：1
> 
> 时间：2013-02-24T17:16:10.640
> 
> 标签：c++, templates, casting

在 C++ 中，我希望能够执行以下操作：

```
struct IWrapper {
    template<typename U>
    U* dynamic_cast_to() { ??? } // what to do here?
};

template<typename T>
struct Wrapper : IWrapper {
    Wrapper(T* _p) :p(_p) {}    
    T* p;
}; 
```

有了这个我想能够做到

```
SomeDerived *a = new SomeDerived;
IWrapper *x = new Wrapper<SomeDerived>(a);
SomeBase *b = x->dynamic_cast_to<SomeBase>() 
```

`dynamic_cast_to()``SomeDerived`如果确实继承自`SomeBase`，则应返回一个指针，`NULL`如果不是，则与正常`dynamic_cast`工作方式相同。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:22:18.180

给出`IWrapper`一个虚拟析构函数并使用`dynamic_cast`.

我很惊讶这个问题被问到，如何实现一个`dynamic_cast_to`功能。

那么如何*避免*考虑标准`dynamic_cast`呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:14:42.057

我认为这不能用于任意类型 T 和 U。原因是编译器必须在编译时为特定类型对生成 dynamic_cast 代码，并且没有地方可以同时知道这两种类型编译时间。

如果您可以限制 IWrapper 仅适用于从具有虚拟成员函数的某个基派生的类型，那么它可以像这样工作：

```
struct IWrapper {
    template<typename U>
    U* dynamic_cast_to() { return dynamic_cast<U*>(commonBasePtr()); }

    virtual CommonBase* commonBasePtr() = 0;
};

template<typename T>
struct Wrapper : IWrapper {
    Wrapper(T* _p) :p(_p) {}    
    T* p;

    virtual CommonBase* commonBasePtr() { return p; }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:25:17.273

不可能这样，因为 IWrapper 对 T 一无所知，也无法访问指针。这应该有效：

```
template <typename T>
struct IWrapper {
    IWrapper(T* p) : p_(p) {}
    template<typename U>
    U* dynamic_cast_to() { return dynamic_cast<U*>(p_); }
private:
    T* p_;
};

template<typename T>
struct Wrapper : IWrapper<T> {
    Wrapper(T* _p) : IWrapper<T>(_p), p(_p) {}    
    T* p;
};

struct SomeBase {
    int a;
};

struct SomeDerived : public SomeBase {
    int b;
};

int main()
{
    SomeDerived *a = new SomeDerived;
    IWrapper<SomeDerived> *x = new Wrapper<SomeDerived>(a);
    SomeBase *b = x->dynamic_cast_to<SomeBase>();
    return b->a;
} 
```

# javascript - AngularJS：忽略 Content-Type 参数

> ID：15054277
> 
> 赞同：2
> 
> 时间：2013-02-24T17:16:16.227
> 
> 标签：javascript, rest, http-headers, angularjs

我目前正在努力解决我的 Chrome 开发人员工具控制台中出现的错误

```
GET http://localhost:8080/movie_db/search/movie?movieTitle=Machete 415 (Unsupported Media Type) 
```

当我尝试使用 Angular JS 连接到我的 REST 服务时。由于我在尝试通过 Chrome 中的简单 REST 插件访问 REST 服务之前遇到了这个问题，我认为很可能缺少 Content-Type 标头参数是原因（应该是 Content-Type: 'application/json '）。

Angular JS 网站说，可以按如下方式设置标头参数：`$httpProvider.defaults.headers.get['My-Header']='value'`. 遗憾的是这没有任何影响，问题仍然存在。

因此，我想知道如何使用发送到我的 REST 服务的 Angular JS 来操作标头参数。

目前，我的代码如下所示：

```
 function SearchMovieController($scope, $resource) {

  $scope.SearchMovie = $resource('http://localhost\\:8080/movie_db/search/:action',
            {action: 'movie', movieTitle: 'Machete'},
            {get: {method: 'JSONP', headers: [{'Content-Type': 'application/json'}, {'Accept' : 'application/json'}]}});

        $scope.SearchMovie.get()
    } 
```

服务器端如下所示（我使用 Spring MVC）：

**控制器：**

```
@Controller
@RequestMapping( "/search/movie" )
public class SearchController { // TODO rename?

private final TheMovieDBService theMovieDBService;

@Autowired
public SearchController( TheMovieDBService theMovieDBService ) {
    this.theMovieDBService = theMovieDBService;
}

@ResponseBody
@RequestMapping( method = RequestMethod.GET, produces = "application/json", consumes = "application/json" )
public Map<String, Object> search( @RequestParam String movieTitle ) {
    Map<String, Object> response = new HashMap<String, Object>();

    try {
        TheMovieDBSearchResult searchResult =  theMovieDBService.searchMovie( movieTitle );
        response.put( "result", searchResult );
        response.put( "success", "true" );
    } catch ( EncoderException e ) {
        response.put( "success", "false" );
    }
    return response;
}
} 
```

**web.xml**

```
 <servlet>
    <servlet-name>json</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

    <init-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </init-param>

    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.u6f6o.apps.movie_db.config.web.ServletConfig</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>json</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:01:13.750

我最近不得不逐步了解 Angular 的所有 $httpBackend 内容，而 JSONP 使用与其他请求不同的方法来加载数据。

**编辑：有问题的代码**

因此，如果您指定 jsonp 有您的方法，它会使用以下方法来加载您的数据。当然，这将完全忽略您自己设置的任何标题。

在 $httpBackend 中：

```
function jsonpReq(url, done) {
    // we can't use jQuery/jqLite here because jQuery does crazy shit with script elements, e.g.:
    // - fetches local scripts via XHR and evals them
    // - adds and immediately removes script elements from the document
    var script = rawDocument.createElement('script'),
        doneWrapper = function() {
          rawDocument.body.removeChild(script);
          if (done) done();
        };

    script.type = 'text/javascript';
    script.src = url;

    if (msie) {
      script.onreadystatechange = function() {
        if (/loaded|complete/.test(script.readyState)) doneWrapper();
      };
    } else {
      script.onload = script.onerror = doneWrapper;
    }

    rawDocument.body.appendChild(script);
  } 
```

# java - Java GUI - 将输入/计算存储到 txt 平铺

> ID：15054283
> 
> 赞同：0
> 
> 时间：2013-02-24T17:16:43.583
> 
> 标签：java, swing, file-io, jbutton, string-parsing

我有一个项目，我需要获取用户输入然后执行体积计算，所有这些我已经完成了几个不同的形状。但是，我需要能够将每个形状的输入和计算存储到一个文件中，如果选择该文件，我以后可以从中读取。我尝试了几种不同的方式来做到这一点，但无济于事。除了我最近的尝试外，所有这些都给了我一个语法错误。但是，此尝试似乎并未写入文件，并且仅在一行上返回 0.0。任何帮助，将不胜感激

```
public JButton getCalculateButton()
{
    JButton spa; 
    spa = new JButton("Calculate Volume");
    spa.setMnemonic('C');
    spa.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e)
        {               
            DecimalFormat num = new DecimalFormat(",###.##");
            double length, depth, volume;
            String instring;

            instring = lengthField.getText();
            if (instring.equals("")){
                instring = "0";
                lengthField.setText("0");
            }
            length = Double.parseDouble(instring);

            instring = depthField.getText();
            if (instring.equals("")){
                instring = "0";
                depthField.setText("0");
            }
            depth = Double.parseDouble(instring);

            volume = length * 8 * 4.8284 * depth;
            volumeField.setText(num.format(volume));

        }
    });
    return spa;
}

public JButton getSaveButton(){
    JButton save; 
    save = new JButton("Save Data");
    save.setMnemonic('C');
    save.addActionListener(new ActionListener(){

        public void actionPerformed(ActionEvent e) {

            PrintWriter writer;
            try {
                writer = new PrintWriter(new FileWriter("spaFile.txt"));
                writer.printf(String.valueOf(length), String.valueOf(depth), String.valueOf(volume));
                writer.close();

            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

        }           
    });

    return save;
} 
```

这是我的 GUI 的一部分，它进行计算并希望存储数据，但没有。

```
public JButton getSearchButton()
{
    JButton search; 
    search = new JButton("Search");
    search.setMnemonic('S');
    search.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e)
        {               
            FileInputStream fileStream;
            try {
                fileStream = new FileInputStream("spaFile.txt");
                 DataInputStream in = new DataInputStream(fileStream);
                    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
                    System.out.println(reader.readLine());
                    reader.close();
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

        }
    });
    return search;
} 
```

}

这是要阅读的部分，尽管我还没有将它完全作为 GUI 用于测试目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:22:07.510

我不确定你真的想要

```
writer.printf(String.valueOf(length), String.valueOf(depth),
    String.valueOf(volume)); 
```

在保存按钮的 ActionListener 中。该语句`String.valueOf(length)`用作将被格式化的字符串，其后的所有内容都用作格式化规范；你可能想要

```
writer.printf(String.valueOf(length) + ", " + String.valueOf(depth) +
    ", " + String.valueOf(volume)); 
```

* * *

另外：如果您访问`length`,`depth`和`volume`，请确保您处于可以实际看到这些变量的范围内。如果所有这些值都显示为 0.0，则意味着您没有在读取这些值的位置分配您希望它们具有的值。

* * *

这是我最近用来将一些信息保存在 .txt 文件中的一些代码：

```
try {
        FileWriter writer = new FileWriter(path);

        for (Movie movie : movies) {
            writer.write(movie.toString() + LINE_SEPARATOR);
        }

        writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

变量的名称希望能告诉你它们的目的是什么。注意：这将在您每次使用代码时覆盖文件的内容；要将内容附加到文件中，请使用`Writer#append(..)`; 请参阅相关[文档](http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html#append%28java.lang.CharSequence%29)（请注意，您可能需要一些特定`Writer`的子类，而不是通用的子类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:26:35.620

我相信问题就在这里

```
writer.printf(String.valueOf(length), String.valueOf(depth), String.valueOf(volume)); 
```

`printf`是打印格式。你可以在[这里](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)阅读。您可能希望使用其中一个`print`或`println`取决于您希望数据的保存方式。要将三个值保存在不同的行上，您可以使用

```
writer.println(String.valueOf(length));
writer.println(String.valueOf(depth));
writer.println(String.valueOf(volume)); 
```

或者，如果您希望它们位于同一行，用逗号分隔，您可以使用

```
writer.print(String.valueOf(length) + "," + String.valueOf(depth) + "," + String.valueOf(volume)); 
```

# android - Android 列出已安装应用程序相关数据库

> ID：15054284
> 
> 赞同：0
> 
> 时间：2013-02-24T17:16:58.010
> 
> 标签：android, database, list

我在 ListView 上列出已安装的应用程序。我想获取**尚未**插入数据库的应用程序。

例如：

所有安装的应用
程序 com.ab
com.cd
com.ef
com.gh
com.jk

数据库记录
com.cd
com.gh

我希望结果这样做：

结果：
com.ab
com.ef
com.jk

我的代码这里：

```
SQLiteDatabase db = vt2.getReadableDatabase();
Cursor c = db.rawQuery("SELECT uygulamaAdi FROM ivu WHERE kategori='" + kategori + "'", null);
c.moveToFirst();

uygList = new ArrayList<String>();
final PackageManager pm = getPackageManager();

final List<String> paketAdlari = new ArrayList<String>();
final List<String> islemTurleri = new ArrayList<String>();

List<ApplicationInfo> paketler = pm.getInstalledApplications(PackageManager.GET_META_DATA);
for (ApplicationInfo paketBilgi : paketler) {

    if (paketBilgi.packageName != c.getString(0)) {

        uygList.add("   ( + )     " + paketBilgi.loadLabel(pm).toString() + "     (Yükle)   ");
        paketAdlari.add(paketBilgi.packageName);
        islemTurleri.add("kaldir");

        if (sayi<c.getCount()-1) {
            sayi++;
            c.moveToNext();
        }

    }

} 
```

作为我的代码，它给出的结果如下：

com.ab
com.cd
com.ef
com.jk

它只删除最后一条记录。我想删除所有以前的记录...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:22:09.693

更好的方法是对每个安装的应用程序进行一次搜索，以查看其是否在数据库中，利用数据库的强大功能。或者，如果在获取数据库中的所有应用程序时表现不佳，请将它们添加到 HashSet，然后遍历已安装应用程序列表，如果它在哈希集中，则一一检查。

# java - Tomcat 6.0 中的 BASIC 身份验证和 SSL 配置失败

> ID：15054291
> 
> 赞同：3
> 
> 时间：2013-02-24T17:17:43.610
> 
> 标签：java, xml, ssl, tomcat6, basic-authentication

该应用程序是一个简单的 JSP/Servlet 应用程序。我想执行用户身份验证（使用 BASIC 身份验证），如果用户通过身份验证，那么我将使用 SSL（即 https）将他们重定向到主屏幕。**必须在单击按钮时执行基本身份验证。**

为了实现这一点；最初我在 web.xml 中配置了基本身份验证，如下所示：

```
<security-role>
  <role-name>Admin</role-name>      
</security-role>
<security-role>
  <role-name>Guest</role-name>
</security-role>
<security-constraint>      
  <web-resource-collection>
      <web-resource-name>BasicDemo</web-resource-name>
      <url-pattern>/*</url-pattern>
      <http-method>POST</http-method>
  </web-resource-collection>
  <auth-constraint>
      <role-name>Admin</role-name>
  </auth-constraint>
</security-constraint>
<login-config>
  <auth-method>BASIC</auth-method>      
</login-config> 
```

代码的用户 BASIC Authentcation 部分运行良好（弹出对话框要求输入用户名和密码，并且运行良好）

然后我按照以下步骤配置 SSL：

1) 使用 keytool 生成一个 Keystore

2) 在 server.xml 中添加以下条目：

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS" 
       keystoreFile="${user.home}/.keystore"
       keystorePass="password" /> 
```

3）在 web.xml 里面添加了这个

```
<user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
  </user-data-constraint> 
```

在运行应用程序时，以下是我遇到的问题：

1）点击按钮（必须执行基本认证），认证对话框没有出现（出现基本认证要求输入用户名和密码）

2）我被重定向到带有 GET 的 https 链接（是的 https 出现在 url 中），并且执行了 servlet 的 doGet() 方法，这是不正确的，因为提交按钮表单是这样的，因此 doPost 方法应该是执行而不是 doGet：

```
<form action="CentralController" method="post"> 
```

我这边的一个错误可能是使用 POST 而不是 GET 进行身份验证，但我仍然觉得这应该可行，我可能遗漏了一些东西，因此它不起作用。请让我知道问题出在哪里以及如何解决它以达到我的期望。

**编辑**

**web.xml**中的 Servlet 定义

 **```
 <servlet>
  <servlet-name>CentralController</servlet-name>
  <servlet-class>com.controller.CentralController</servlet-class>
  </servlet>
  <servlet-mapping>
  <servlet-name>CentralController</servlet-name>
  <url-pattern>/CentralController</url-pattern>
  </servlet-mapping> 
```

这是表格：

```
<form action="CentralController" method="post">
    <input type="submit" value="Submit" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:50:25.190

在获取/发布转换时，如果我正确理解了您的情况，您将遇到经典的 HTTP 重定向“问题”。

当使用非 SSL 请求达到 SSL 安全约束时，服务器会向客户端发送 HTTP 302 响应（也称为重定向）到 https URL。此重定向的实现在所有客户端 HTTP 堆栈上并不完全相同，但基本上大多数时候，重定向是通过发出 GET 来处理的，无论原始 HTTP 动词是什么（POST 或其他）。

您可以在 wikipedia 及其链接 [http://en.wikipedia.org/wiki/HTTP_302](http://en.wikipedia.org/wiki/HTTP_302)上找到许多关于此的讨论， 另请参阅[Response.Redirect with POST 而不是 Get？](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)和[HTTP：POST 请求收到 302，重定向请求应该是 GET 吗？](https://stackoverflow.com/questions/8138137/http-post-request-receives-a-302-should-the-redirect-request-be-a-get)进行讨论。或者通常在谷歌上，“HTTP 302 POST”。

可悲的结论是，当发送（在您的情况下为 HTTP 到 HTTPS）重定向时，您不能指望保留原始请求的 POST 性质，这将取决于浏览器，并且有许多浏览器会发出获取任何重定向状态代码（302、307 等）。

您可能仍想尝试上面第一个链接中描述的解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T11:17:47.163

我发现有两个主要问题，
1）基本身份验证没有出现在点击
2）点击 doGet 而不是 doPost

让我们一步一步地创建这个应用程序.....
1) 创建 2 个 jsp 和 1 个 servlet。

**index.jsp**
`<form action="RegisterServlet" method="post">`
`<input type="submit" name="submit">`
`</form>`
**RegisterServlet.java**
`doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {`
`RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/welcome.jsp");`
`dispatcher.forward(request,response);`
`}`

2) 应用基本认证
**web.xml**
`<security-constraint>`
`<web-resource-collection>`
`<web-resource-name>BasicAuth</web-resource-name>`
`<url-pattern>/RegisterServlet</url-pattern>`
`<http-method>POST</http-method>`
`<http-method>GET</http-method>`
`</web-resource-collection>`
`<auth-constraint>`
`<role-name>Admin</role-name>`
`</auth-constraint>`
`</security-constraint>`
`<login-config>`
`<auth-method>BASIC</auth-method>`
`<realm-name>Basic Authentication</realm-name>`
`</login-config>`
`<security-role>`
`<description>Admin Role</description>`
`<role-name>Admin</role-name>`
`</security-role>`

**我已经为 RegisterServlet 提供了基本身份验证。这将在 index.jsp 的表单提交上启用基本身份验证。`<http-method>GET</http-method>`也添加

**在tomcat-users.xml**中创建角色和用户 **`<role rolename="Admin"/>`
`<user username="Admin" password="password" roles="Admin"/>`**

 **3) web.xml 中的以下代码， `<user-data-constraint>`
`<transport-guarantee>CONFIDENTIAL</transport-guarantee>`
`</user-data-constraint>`
`user-data-constraint` 如果调用表单 http 到 https，它将调用 GET，因为它被认为是一种不好的做法，所以要调用 POST，在行动中，你可以提供一个完整的路径（url）....或从 https 资源访问 https。****

# c# - 在 asp.NET C# 中处理动态创建的 TextBox 控件

> ID：15054292
> 
> 赞同：1
> 
> 时间：2013-02-24T17:17:48.617
> 
> 标签：c#, asp.net

我正在尝试制作一个将未定义的行数加载到表中的页面，每行包含两列，一列是字符串，另一列是文本框。当我单击提交按钮时，我希望能够检索输入到每个 TextBox 中的值。

前半部分我可以做到，显然在实际代码中，这将在 foreach 循环中，并且文本框 ID 分配了一个唯一值，我可以稍后重现以调用它。

```
TableCell myCell = new TableCell();
myCell.Text = "StudentID";
TableCell nextCell = new TableCell();
TextBox mytext = new TextBox();
mytext.ID = "TxtBox1";
nextCell.Controls.Add(mytext);
TableRow myRow = new TableRow();
myRow.Cells.Add(myCell);
myRow.Cells.Add(nextCell);
TableStuUploads.Rows.Add(myRow); 
```

当我单击提交按钮时，我尝试运行此代码（只是临时代码 ATM，概念证明）：

```
TextBox tmptext = (TextBox)FindControl("TxtBox1");
Label1.Text = tmptext.Text; 
```

但这将 tmptext 设置为 null，并且我在下一行得到一个空指针异常。所以然后我尝试了

```
TextBox tmptext = (TextBox)TableStuUploads.FindControl("TxtBox1");
Label1.Text = tmptext.Text; 
```

同样的错误。然后我尝试了

```
foreach (Control x in TableStuUploads.Controls)
            {
                if (x.GetType().ToString().Equals("System.Web.UI.WebControls.TextBox"))
                {
                    Label1.Text = ((TextBox)x).Text;

                }
            } 
```

但是在调试时，我看到 TableStuUploads.Controls 的计数为零。

我应该如何处理这些动态创建的控件？我四处搜索，得到的答案引导我找到我已经尝试过的三个解决方案。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:26:07.413

您可能没有在回发时重新创建动态控件。这是查找每个控件和检索每个控件的值所必需的。

此外，最好使用中继器来创建这些控件，这样更易​​于维护和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:36:00.667

**编辑**

您需要像@ShaiCohen 在他的回答中所说的那样在每个回发（page_load）上重新创建表，然后您需要类似的东西：

```
foreach (TableRow item in TableStuUploads.Rows)
{               
     TextBox tmptext = (TextBox)item.FindControl("TxtBox1");
     Label1.Text = tmptext.Text;
} 
```

# css - 页面加载时的jquery ui工具提示自定义类

> ID：15054294
> 
> 赞同：5
> 
> 时间：2013-02-24T17:17:53.233
> 
> 标签：css, jquery-ui

我在我的文本框上使用 jquery ui 工具提示，我已经定义了一个这样的自定义类和

```
.ui-tooltip1 {
    padding: 8px;
    position: absolute;
    z-index: 9999;
    max-width: 300px;
    -webkit-box-shadow: 0 0 5px #aaa;
    box-shadow: 0 0 5px #aaa;
    background-color:white !important; 
    color: Red !important;
} 
```

我这样使用它：

```
 $(".phone").tooltip({
            tooltipClass: "ui-tooltip1"
        }); 
```

但是当我第一次加载页面时没有应用这个类。在页面加载时应用默认工具提示类。页面加载时如何在工具提示上应用此类？

请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T17:21:04.640

只需使用[`$(document).ready`](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

```
$(document).ready(function() {
    $(".phone").tooltip({
        tooltipClass:"ui-tooltip1"
    });
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T18:26:58.197

我有同样的问题。这对我有帮助：
jquery-ui 工具提示类和您自己的自定义类都分配给了工具提示元素![具有 ui 类和您的自定义类的 ui 工具提示](../Images/bae5fa369ffd766d9cdfaa92be80cd40.png)。
这个 SO 条目：[多个！重要的类声明和优先级](https://stackoverflow.com/questions/5473796/multiple-important-class-declarations-and-precedence)帮助了我：*“如果在两个规则中声明了相同的属性，则首先通过特异性解决冲突，然后根据 CSS 声明的顺序。类属性不相关。”* .

*所以我可以通过先*调用 ui-css*然后*我自己的 css来解决这个问题：

```
<link rel="stylesheet" href="../css/jquery_ui_1.10.1.css" type="text/css" />
<link rel="stylesheet" href="../css/myown.css" type="text/css" /> 
```

# c# - 更改此代码以进行线程同步排队会很简单吗？

> ID：15054297
> 
> 赞同：0
> 
> 时间：2013-02-24T17:18:10.307
> 
> 标签：c#, multithreading, generics, collections, synchronization

我正在尝试运行文章[线程同步队列中的代码](http://yacsharpblog.blogspot.ru/2008/07/thread-synchronized-queing.html)

但出现编译错误：

> 找不到类型或命名空间名称“T”（您是否缺少 using 指令或程序集引用？）

我的猜测是它使用的是泛型，虽然我没有太多经验，但改变应该是微不足道的。
我应该如何更改此代码？

我希望有一个非常简单的改变，否则就忘了它

那篇文章的代码：

```
using System;
using System.Collections;
using System.Collections.Generic;//per comment by  @jam40jeff to answer
using System.Threading;

namespace QueueExample
{
  public class SyncQueue// per answer --> public class SyncQueue<T>
  {
    private WaitHandle[] handles = {
       new AutoResetEvent(false),
       new ManualResetEvent(false),
                                       };
    private Queue _q = new Queue();
    ////per comment by  @jam40jeff to answer, the above line should be changed to
    // private Queue<T> _q = new Queue<T>();

public int Count
{
  get
  {
    lock (_q)
    {
      return _q.Count;
    }
  }
}
public T Peek() //******error************************

{
  lock (_q)
  {
    if (_q.Count > 0)
      return _q.Peek();
  }
  return default(T);//******error************************
}

public void Enqueue(T element) //******error************************
{
  lock (_q)
  {
    _q.Enqueue(element);
    ((AutoResetEvent)handles[0]).Set();
  }
}

public T Dequeue(int timeout_milliseconds)//******error************************
{
  T element;//******error************************
  try
  {
    while (true)
    {
      if (WaitHandle.WaitAny(handles, timeout_milliseconds, true) == 0)
      {
        lock (_q)
        {
          if (_q.Count > 0)
          {
            element = _q.Dequeue();
            if (_q.Count > 0)
              ((AutoResetEvent)handles[0]).Set();
            return element;
          }
        }
      }
      else
      {
        return default(T);//******error************************
      }
    }
  }
  catch (Exception e)
  {
    return default(T);//******error************************
  }
}

public T Dequeue() //******error************************
{
  return Dequeue(-1);
}

public void Interrupt()
{
  ((ManualResetEvent)handles[1]).Set();
}
public void Uninterrupt()
{
  // for completeness, lets the queue be used again
  ((ManualResetEvent)handles[1]).Reset();
} 
```

} }

**更新：**
更改为

```
public class SyncQueue<T> 
```

[根据回答，](https://stackoverflow.com/a/15054314/2031316)还需要从以下更改：

```
return _q.Peek(); 
```

到

```
return (T)_q.Peek(); 
```

并从

```
element = _q.Dequeue(); 
```

到

```
element = (T)_q.Dequeue(); 
```

**Update2：**
根据@jam40jeff 对答案的评论：

*   “更改`_q`为 type `Queue<T>`。然后您将需要 using 语句，但不需要强制转换为 T”

我上面的**更新**很糟糕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:19:30.877

也许这是作者的错误，类`SyncQueue`应该是通用的：

```
public class SyncQueue<T> 
```

要使用泛型，您还可以再添加一个`using`：

```
using System.Collections.Generic; 
```

那么上面的代码应该没问题。

# code-signing - 由于测试可执行文件被杀死，无法在 iOS 5.1.1 上运行配置 (9)

> ID：15054298
> 
> 赞同：0
> 
> 时间：2013-02-24T17:18:24.710
> 
> 标签：code-signing, configure, ios5.1

在 iOS 5.1.1 上，越狱时未应用代码签名的修复。这意味着当我启动 ./configure 时，它​​在第一步中失败，因为它运行的示例程序似乎无法运行。目前没有补丁可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:18:24.710

确保您的编译器实际上可以正常工作，您现在所能做的就是：

*   通过设置不同的 --build 和 --host 三元组来欺骗您正在交叉编译的 ./configure，例如 arm-apple-darwin9 和 arm-apple-darwin10；

*   编辑配置并添加 BEFORE (eval "$ac_try") 2>&5 this line (eval "ldid -S ./conftest") 根据我的经验，我只需要在前两次检查中这样做，其余的只是矫枉过正（因为配置将通过检查编译器结果而不是运行测试来检测库、头文件和函数）。无论如何，您应该注意到这可能不是 ./configure 尝试运行的唯一方法，并且您必须在使用它们之前在最终的可执行文件上运行 ldid（否则它们无论如何都会被杀死）并且您不会能够运行检查。信用：[http ://botsikas.blogspot.it/2012/06/ipad-ios-51-configure-error-connot-run.html](http://botsikas.blogspot.it/2012/06/ipad-ios-51-configure-error-connot-run.html)

*   等我创建一个自动运行 ldid 的 C 编译器（这是可能的）。我已经在弄乱 gcc 以使其在 iPhone 5 等最新设备上运行（它不再接受 arm 拱门，但只接受 armv7 和更新版本）。

*   找到一种方法来告诉 configure 到 ldid 事情（在这你自己）

# sql-server - 级联更新/删除如何在 SQL Server 内部工作？

> ID：15054303
> 
> 赞同：4
> 
> 时间：2013-02-24T17:18:37.107
> 
> 标签：sql-server, triggers

好的，我相信这个问题并不清楚。在这里，我以其他方式重写了这个。

假设我创建了两个表，

*   `table1(c1 int PRIMARY KEY)`

*   `table2(table1c11 int)`

和之间有关系`table1`，`table2` 即`table1.c1=table2.table1c11`

`table1`并且，我在and中执行以下语句`table2`

```
insert into table1(c1)
values('a'),('b'),('c'),('d'),('e')

insert into table2(table1c11)
values('a'),('a'),('b'),('d') 
```

现在我想要实现的是，一旦我更新了相应数据中`c1`的值，就会自动更改。为此，我需要在和关系中创建约束并应用.`table1``table2``table1``table2``CASCADE UPDATE`

`table1`所以，后来我在ie中应用了一个新的 SQL 更新语句

```
Update table1 set c1=c1+'updated' 
```

然后中的数据`table2`也会发生变化，但是如果我想通过 实现相同的功能`INSTEAD OF UPDATE TRIGGER`，那么我需要编写而不是更新触发器，并且在其中，我需要使用两个魔术表`INSERTED`和`DELETED`.

但要点是，在这种情况下，我只有一列存在`table1`并且我正在更新同一列，所以我如何映射插入和删除的行。如果我使用 CASCADing，SQL Server 也会做同样的事情。

那么问题来了，如果表中的主键数据发生变化，SQL Server 如何处理批量更新。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T10:52:18.183

> 那么问题来了，如果表中的主键数据发生变化，SQL Server 如何处理批量更新。

SQL Server 为更新两个表的更新语句构建查询计划。

创建表：

```
create table T1
(
  T1ID int primary key
);

create table T2
(
  T2ID int primary key, 
  T1ID int references T1(T1ID) on update cascade
) 
```

添加一些数据：

```
insert into T1 values(1), (2)
insert into T2 values(1, 1), (2, 1), (3, 2) 
```

更新主键`T1`：

```
update T1
set T1.T1ID = 3
where T1.T1ID = 1 
```

更新的查询计划如下所示：

![使用更新级联进行更新的查询计划](../Images/eb1adf1f62f5678b9ecba8aaba6d7c12.png)

该计划有两个聚集索引更新步骤，一个`T1`针对`T2`.

**更新1：**

当更新多个主键值时，SQL Server 如何跟踪要更新的行？

```
update T1
set T1.T1ID = T1.T1ID + 100 
```

![更新时级联超过一行的更新查询计划](../Images/89b8b0a5b0bafe4a0d0b81258b804b4a.png)

顶部分支中的[Eager Spool](http://msdn.microsoft.com/en-us/library/ms190435(v=sql.105).aspx)`T1` （更新）将旧`T1ID`的和新的计算保存`T1ID (Expr1013)`到较低分支使用的临时表（更新`T2`）。较低分支中的哈希匹配正在将 Table Spool 与`T2`旧的`T1ID`. 从哈希匹配到更新的输出来自`T2`聚集`T2ID`索引扫描和从表假脱机`T2`计算的新值。`T1ID (Expr1013)`

**更新 2：**

如果您需要`cascade update`用 a替换，`instead of trigger`您需要有一种方法来连接触发器中的`inserted`和`deleted`表。这可以通过 中的代理键来完成`T1`。

表：

```
create table T1
(
  T1ID int primary key,
  ID int identity unique
);

create table T2
(
  T2ID int primary key, 
  T1ID int references T1(T1ID)
); 
```

触发器可能看起来像这样。

```
create trigger tr_T1 on T1 instead of update as

insert into T1(T1ID)
select T1ID
from inserted;

update T2
set T1ID = I.T1ID
from inserted as I
  inner join deleted as D
    on I.ID = D.ID
where D.T1ID = T2.T1ID;

delete from T1
where T1ID in (
              select T1ID
              from deleted
              ); 
```

[SQL小提琴](http://sqlfiddle.com/#!3/54a62/1)

# c++ - 程序无法在 Linux 中运行

> ID：15054317
> 
> 赞同：0
> 
> 时间：2013-02-24T17:19:46.120
> 
> 标签：c++, linux

我写了一个 C++ 游戏。

它在我构建它的发行版（openSUSE）上完美运行，但在另一个（Lubuntu）上它无法运行。我使用这个启动器：

```
chmod +x Trigonium
export LD_LIBRARY_PATH=""
./Trigonium 
```

它说： ./Launcher.sh: line 3: ./Trigonium: cannot open binary file

当我尝试直接运行时，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T17:26:40.147

两个系统上的二进制文件是否相同？

一个系统是 32 位，另一个是 64 位吗？`uname -a`按照 Gwtham 的建议进行检查。

# variables - XText 数据类型定义和使用

> ID：15054321
> 
> 赞同：0
> 
> 时间：2013-02-24T17:20:07.167
> 
> 标签：variables, definition, xtext

我想为具有不同变量类型组的语言构建一个编辑器，但生成的内容助手有问题。

```
Type:
   'TYPE' ':' name=ID '(' type=[ANY] ')' ';'
;
ANY:
   ANY_NUM | Type
;
ANY_NUM:
   ANY_REAL | ANY_INT ...
;
ANY_REAL:
   'real' | 'float'
;
ANY_INT:
   'int' | 'sint' | 'lint'
; 
```

这个想法是，不允许在任何地方使用特定类型，所以我想在某些情况下使用 type=(ANY_REAL) 。生成的内容助手在这里没有显示任何内容，所以我想知道这是否是指定变量类型和组的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:36:02.903

好的。答案很简单。每个变量类型都必须在枚举（EnumRule）中定义，结构本身是一个简单的类型引用（ParserRule）：

```
TR_Any:
  TR_AnyDerived | TR_AnyElementary
;
TR_AnyDerived:
  ...
;
TR_AnyElementary:
  TR_AnyReal | TR_AnyInt |...
;
TR_AnyReal:
  type = E_AnyReal
;
TR_AnyInt:
  type = E_AnyInt
;
enum E_AnyReal:
  FLOAT = "float" |
  DOUBLE = "double" |
  ...
;
enum E_AnyInt:
  INT = "int"
; 
```

可以按照 xtext 文档中的说明引用这些类型：

```
MyRule:
  anyvar = [TR_Any]
  intvar = [TR_Int]
; 
```

# android - 如何找出服务（不在我的应用程序中）是由哪个意图启动的？

> ID：15054323
> 
> 赞同：8
> 
> 时间：2013-02-24T17:20:21.420
> 
> 标签：android, debugging, android-intent

我想知道谷歌地图服务是如何自动启动的。

当我转储主缓冲区或事件缓冲区的 logcat 时，我只能找出 Google Maps 的哪个组件启动了，但没有关于**“谁”**（包）启动它以及**“如何”**（意图）的线索？

有什么调试方法可以用来找出它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:32:45.850

我设法找到“如何”，但仍然找不到“谁”的线索。

## “如何”

运行`dumpsys activity services`，查看`intent`字段：

```
* ServiceRecord{41526f40 u0 com.google.android.apps.maps/com.google.android.location.internal.server.GoogleLocationService}

  intent={act=com.google.android.location.internal.GMM_NLP}

  packageName=com.google.android.apps.maps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:21:01.313

我希望这是您的问题的解决方案

```
String uri = "geo:" + 0 + "," + 0 + "?q=" + address;
                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                            .parse(uri));
                    startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:43:05.660

您可以使用 ActivityManager 作为 hack 来获取它。就像是：

```
ActivityManager aManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RecentTaskInfo> recentTaskList = aManager.getRecentTasks(1, 0);
Intent caller = recentTaskList.get(0).baseIntent; 
```

我在这里跳过验证，但这应该让你开始。

不要忘记`GET_TASKS`许可。

# linux - 如何使用 perl / shell 脚本轻松检查 POP3 或 SMTP 连接是否有效？

> ID：15054326
> 
> 赞同：0
> 
> 时间：2013-02-24T17:21:01.073
> 
> 标签：linux, perl, email, smtp, pop3

我已经为我的邮件服务器设置了一个 SSH 隧道，如下所示：

```
ssh -o ServerAliveInterval=60 -f me\@mydomain.com -L 63110:mail.mydomain.com:110 -N
ssh -o ServerAliveInterval=60 -f me\@mydomain.com -L 63325:mail.mydomain.com:25 -N 
```

我可以在一段时间内发送/接收邮件，但在一段时间不活动后，我的邮件客户端报告它没有从邮件服务器获得有效的问候语。

我有一个 perl 脚本，它每分钟检查一次以确保 ssh 隧道正在运行（通过 ps）并且端口已打开（使用 IO::Socket::PortState qw(check_ports)），但我想检查是否或者我也没有收到有效的问候。

在 perl 或 shell 脚本（运行 Ubuntu 12.04）中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-02-04T13:36:18.613

为了回答这个问题，尽管设置了 OP，但要使用的工具是`swaks`SMTP 的瑞士军刀。你可以从这里得到它：http: [//jetmore.org/john/code/swaks/](http://jetmore.org/john/code/swaks/)

通常要测试您的 smtp，您将使用如下命令：`swaks --server mail.example.com --from ben.holness@example.com --to ben.holness@somewhere.example.com`

然后它将向您显示 smtp 客户端和服务器之间的所有对话，从而非常容易查明可能问题的根源。

# haskell - 多次处理一个 XML 文档

> ID：15054329
> 
> 赞同：1
> 
> 时间：2013-02-24T17:21:24.120
> 
> 标签：haskell, hxt

Haskell 包 hxt 的用法对我来说还是有点奇怪。尤其是箭头符号和产生的类型是一种魔法。

到目前为止，我无法管理以下内容：我想处理一个主要包含两个部分的 XML 文件。一个保留对象的定义，第二个保留对象的用途/目的。首先，我想编写一些 hxt 处理以在第 1 部分上获取 Haskell 数据结构，然后在第 2 部分处理，最后结合在程序的真实逻辑中读取的两种数据结构。

[由于箭头教程](http://www.vex.net/~trebla/haskell/hxt-arrow/lesson-0.xhtml)，现在处理文件通常很好。但我希望现在有一个 do notation 执行三个步骤：读取文档（惰性），用第一个处理器处理一次结果结构，然后用第二个处理器再次处理相同的结构。我不希望像以下示例中那样调用“readDocument”两次。

```
import Text.XML.HXT.Core
import Data.Char(toUpper)
import Data.Tree.NTree.TypeDefs

play filename = do 
                  results <- runX (getAllAddresses filename) 
                  results2 <- runX (getAllAddressesUsages filename) 
                  print results 
                  print results2 

getAllAddresses :: FilePath -> IOSArrow XmlTree [(String,NTree XNode)]
getAllAddresses filename =
    readDocument [withValidate no] filename >>>
    getChildren >>>
    isElem >>> hasName "main" >>>
    getChildren >>>
    isElem >>> hasName "part1" >>>
    getChildren >>>
    isElem >>> hasName "address" >>>
    listA(getAddress)                 -- create a list for each variable, so use listA

getAddress :: IOSArrow XmlTree (String,NTree XNode)
getAddress =
    getChildren >>>
    isElem >>>
         (
          neg ( hasName "location") >>>   -- all elements being no "location"
          getName &&& (getChildren)       -- get the name and the value for each element
         ) 
    <+>     
    ( 
      hasName "location" >>>              -- work on all nodes within the  "location" subcontainer
      getChildren >>> 
      isElem >>>
      ( getName &&& (getChildren) )       -- get the name and the value for each element
     )

getAllAddressesUsages :: FilePath -> IOSArrow XmlTree [(String,NTree XNode)]
getAllAddressesUsages filename =
    readDocument [withValidate no] filename >>>
    getChildren >>>
    isElem >>> hasName "main" >>>
    getChildren >>>
    isElem >>> hasName "part2" >>>
    getChildren >>>
    listA(getAddressUsagePurpose2)                 -- create a list for each variable, so use listA

getAddressUsagePurpose2 :: IOSArrow XmlTree (String,NTree XNode)
getAddressUsagePurpose2 =
    hasName "use_obj-names_for_purpose_2" >>>            -- work on all nodes with usage 2
    ( getName &&& (getChildren) )                        -- get the name and the value for each element 
```

示例数据：

```
<main>
 <part1>
  <address>
    <obj-name>one</obj-name>
    <name>peter 1</name>
    <street>streetname 1</street>
    <location>
      <country>Germany</country>
      <state>Baden Wuerttemberg</state>
   </location>
   </address>
  <address>
    <obj-name>two</obj-name>
    <name>peter 2</name>
    <street>streetname 2</street>
    <location>
      <country>Germany</country>
      <state>Nordrhein Westfalen</state>
      </location>
   </address>
 </part1>
 <part2>
   <use_obj-names_for_purpose_1>
     <obj-name>two</obj-name>
   </use_obj-names_for_purpose_1>
   <use_obj-names_for_purpose_2>
     <obj-name>two</obj-name>
   </use_obj-names_for_purpose_2>
 </part2>
</main> 
```

所以正式的问题是：

为了得到这样的东西，monadic 在函数 play 中的表现如何：

```
readXmlDocument :: String -> IOSArrow XmlTree (NTree XNode)
readXmlDocument filename = readDocument [withValidate no] filename

play filename = do 
             document <- readXmlDocument filename
             allAddresses <- getAllAddresses document
             allPurposes <- getAllAddressesUsages document
             result <- processLogics allAddresses allPurposes 
             print result 
```

我如何从 Monads 到 Arrows，再回到 Monads，再到纯数据再回到 Monads。

我为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:02:36.137

该问题的一种解决方案如下：

使用 Arrow 语言扩展并使用“proc”表达式来处理在两个处理器路径中的一个函数中读取的文档。结果组合在一个元组中。这个元组仍然包含两个需要运行的箭头。这是由 runX 函数的两个应用程序完成的。

一旦机器人结果在以下计算中组合，我仍然不完全知道文件是否被此构造加载一两次。

```
{-# LANGUAGE Arrows #-}

import Text.XML.HXT.Core
import Data.Char(toUpper)
import Data.Tree.NTree.TypeDefs

play filename = (runX addresses, runX usages)
    where (addresses,usages)=(analyseXml (readXmlDocument filename))

analyseXml :: IOSArrow XmlTree (NTree XNode) -> (IOSArrow XmlTree [(String,NTree XNode)],IOSArrow XmlTree String)
analyseXml = proc document -> do 
               allAddresses <- getAllAddresses -< document
               allUsages <- getAllAddressesUsages -< document
               returnA -< (allAddresses,allUsages)

readXmlDocument :: String -> IOSArrow XmlTree (NTree XNode)
readXmlDocument filename = readDocument [withValidate no] filename

getAllAddresses :: IOSArrow XmlTree (NTree XNode) -> IOSArrow XmlTree [(String,NTree XNode)]
getAllAddresses document =
    document >>>
    getChildren >>>
    isElem >>> hasName "main" >>>
    getChildren >>>
    isElem >>> hasName "part1" >>>
    getChildren >>>
    isElem >>> hasName "address" >>>
    listA(getAddress)                 -- create a list for each variable, so use listA

getAddress :: IOSArrow XmlTree (String,NTree XNode)
getAddress =
    getChildren >>>
    isElem >>>
         (
          neg ( hasName "location") >>>   -- all elements being no "location"
          getName &&& (getChildren)       -- get the name and the value for each element
         ) 
    <+>     
    ( 
      hasName "location" >>>              -- work on all nodes within the  "location" subcontainer
      getChildren >>> 
      isElem >>>
      ( getName &&& (getChildren) )       -- get the name and the value for each element
     )

getAllAddressesUsages :: IOSArrow XmlTree (NTree XNode) -> IOSArrow XmlTree String
getAllAddressesUsages document =
    document >>>
    getChildren >>>
    isElem >>> hasName "main" >>>
    getChildren >>>
    isElem >>> hasName "part2" >>>
    getChildren >>>
    isElem >>> hasName "use_obj-names_for_purpose_2" >>>
    getChildren >>>
    isElem >>> hasName "obj-name" >>>
    getChildren >>>
    getText                 -- create a list with objects for each short-name. So use listA 
```

可以按如下方式执行：

```
*Main>  snd ( play  "../tmp/haskell/test.xml")
["two"]

*Main>  fst ( play  "../tmp/haskell/test.xml")
[[("obj-name",NTree (XText "one") []),("name",NTree (XText "peter 1") []),("street",NTree (XText "streetname 1") []),("country",NTree (XText "Germany") []),("state",NTree (XText "Baden Wuerttemberg") [])],[("obj-name",NTree (XText "two") []),("name",NTree (XText "peter 2") []),("street",NTree (XText "streetname 2") []),("country",NTree (XText "Germany") []),("state",NTree (XText "Nordrhein Westfalen") [])]]
*Main> 
```

# haskell - GHC 和 Haskell 平台有什么区别？

> ID：15054330
> 
> 赞同：20
> 
> 时间：2013-02-24T17:21:27.733
> 
> 标签：haskell, ghc, haskell-platform

我即将进入 Haskell，我有点困惑，为什么建议我通过 brew 同时安装 GHC 和 Haskell 平台。

GHC 不是 Haskell 实现/编译器吗？
什么时候需要平台？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-24T20:55:16.577

简短的回答：
Haskell 平台是一个集合。
GHC 是这些东西的一个特定组成部分。

更长的答案：
通常您想安装 Haskell 平台，因为这样您就可以一次性安装很多东西，而不必一次手动设置所有部分。
这就是 Haskell 平台的目的。

给出一些历史观点：在 Haskell 平台被发明之前，GHC 本身曾经带有一个随机抓取的库。
Haskell 平台的发明是为了让不那么过度工作的人可以决定哪些库应该和不应该开箱即用（即，GHC 人员可以停止考虑库并重新考虑 GHC）。
在这方面已经相当成功了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T17:42:35.803

Haskell 平台是 Haskell 的编译器、工具和库的集合。

它目前[指定](http://www.haskell.org/platform/changelog.html)GHC 包含在平台中。

兼容的 Haskell 平台软件包将安装 GHC，而无需用户进行额外的工作。

# css - Safari/Opera/Chrome/FF 从完全相同的文件位置提取不同的样式表

> ID：15054331
> 
> 赞同：0
> 
> 时间：2013-02-24T17:21:28.963
> 
> 标签：css, safari, opera

我正在网络主机上运行 Wordpress 构建。最新的样式表，标题为 style.css，位于 wp-content/themes/geisinger/style.css 下的子主题文件夹中需要放置的位置。

Chrome 和 Firefox 正在显示与更新的 CSS 文件相关的更新内容。Safari 和 Opera 不是。

有问题的网站是我客户的：[kurt4apa.org/campaign](http://kurt4apa.org/campaign)

我已经使用浏览器 Web 控制台来检查正在提取的文件。Chrome 和 Firefox 展示了最新的 CSS 文件已经存在并正在生效，但 Safari/Opera 显示的是当天早些时候的样式表。我想强调，据我所知，style.css 文件位于完全相同的**位置**；四个浏览器都在提取**同一个**文件，但只有前两个在使用更新版本。

我试过清除浏览器的缓存和 cookie。除此之外，我完全迷失了解决方案。感谢所有帮助；谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:30:14.887

[也许这是一个奇怪的服务器端缓存问题，为了测试它尝试更改来自' http://www.kurt4apa.org/campaign/wp-content/themes/geisinger/style.css?ver](http://www.kurt4apa.org/campaign/wp-content/themes/geisinger/style.css?ver=)的 html 代码末尾的数字[=](http://www.kurt4apa.org/campaign/wp-content/themes/geisinger/style.css?ver=) **3.5.1** ' 到 ' [http://www.kurt4apa.org/campaign/wp-content/themes/geisinger/style.css?ver=](http://www.kurt4apa.org/campaign/wp-content/themes/geisinger/style.css?ver=) **3.5.2** '

# c# - 如何从 Windows 服务运行 excel vba 代码

> ID：15054332
> 
> 赞同：1
> 
> 时间：2013-02-24T17:21:36.537
> 
> 标签：c#, windows, excel, windows-services, vba

我想从我的 Windows 服务运行一些 excel vba 代码。该服务正在使用 fileSystemWatcher 来监视要添加的 xml 文件的目录。添加文件后，xml 文件的内容将反序列化为对象属性。在这个阶段，我想打开一个 excel 文件并将这些值传递到某些单元格并从该工作簿运行 vba 代码。我可以在 Windows 窗体应用程序中完美运行它，但我无法从我的 Windows 服务应用程序中运行它。我将调试器附加到应用程序以尝试查看发生了什么，但没有抛出任何错误并且所有步骤都成功完成。我知道 Windows 服务不支持打开 MS Office 文件，因为与 UI 交互及其拥有的用户权限存在问题。但我正在寻找一种能够让这个 vba 代码从服务运行的方法。我使用的是 Windows 7 Home Premium 32 位，并且我的服务帐户设置为 LocalSystem。这是我正在使用的代码：

```
 private void FSWatcherTest_Created(object sender, System.IO.FileSystemEventArgs e)
    {
            Trade t;
            XmlSerializer serializer;
            XmlReader reader;
            XmlWriter writer;

            string filePath = @"C:\Inbox\TradeInfo.xml";

            serializer = new XmlSerializer(typeof(Trade));
            reader = XmlReader.Create(filePath);
            t = (Trade)serializer.Deserialize(reader);
            reader.Close();

            string path=@"C:\Windows\System32\config\systemprofile\Desktop\TwsDde.xls";

            oXL = new Microsoft.Office.Interop.Excel.Application();

            oXL.Visible = true;

            oXL.DisplayAlerts = false;

            mWorkBook = oXL.Workbooks.Open(path,2, false, 5, "", "", true,Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true, false, 0, true,false, false);

            //Get all the sheets in the workbook

            mWorkSheets = mWorkBook.Worksheets;

            //Get the allready exists sheet

            mWSheet1=(Microsoft.Office.Interop.Excel.Worksheet)mWorkSheets.get_Item("Basic Orders");

            // Microsoft.Office.Interop.Excel.Range range= mWSheet1.UsedRange;

            mWSheet1.Cells[12, 1] = "GE";
            mWSheet1.Cells[12, 2] = "STK";
            mWSheet1.Cells[12, 7] = "SMART";
            mWSheet1.Cells[12, 9] = "USD";
            mWSheet1.Cells[12, 12] = "Buy";
            mWSheet1.Cells[12, 13] = "100";
            mWSheet1.Cells[12, 14] = "MKT";

            Excel.Range range;
            Excel.Range row;

            range = mWSheet1.get_Range("A12", "O12");
            range.EntireRow.Select();

            oXL.Run("TwsDde.xls!Sheet2.placeOrder");
        } 
```

任何帮助将不胜感激。或者做同样事情的替代方法，即运行包含此代码的 Windows 窗体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T19:25:06.860

[不支持](http://support.microsoft.com/kb/257757)您尝试执行的操作：

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

如果该过程在交互式桌面中运行，您可以自动化 Excel。不支持从非交互式桌面（例如从会话）自动执行 Excel 的尝试并且失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:41:10.837

嗨，我设法让这个工作以某种方式进行。我基本上按照本教程和代码[从服务启动交互式进程](http://www.codeproject.com/Articles/35773/Subverting-Vista-UAC-in-Both-32-and-64-bit-Archite)以允许服务以 SYSTEM 用户身份运行，但采用第一个登录用户的会话 ID 并赋予用户管理权限以运行交互式进程，例如 GUI 应用程序. 为了打开 excel 并通过 Windows 服务运行宏，我首先在 Windows 窗体应用程序中编写了所有代码来执行此操作，并首先测试它在那里工作。然后我更改了可执行文件，它运行良好。我希望这可以帮助其他有同样问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:14:33.200

在没有启用“桌面交互”的情况下，Excel 在用户服务下运行良好。
**首先**，创建 Excel COM 的标准方法在服务下不起作用。您需要从您的程序中启动 Excel.exe 进程 - 使用 ShellExecuteEx（推荐方式）或 CreateProcess（不推荐）来执行此操作。
**第二**阶段：使用 GetActiveObject 附加到 Excel COM 应用程序对象。现在您可以正确访问所有 Excel COM 接口。
此外，在多个操作系统中，Excel 可能会在 LocalSystem 帐户下无法正常工作 - 要更正此问题，请手动创建 2 个文件夹：C:\Windows\system32\config\systemprofile\desktop
C:\Windows\SysWow64\config\systemprofile\desktop 在没有 desctop 的情况下第一次与 Excel 交互的服务下的其他错误询问用户凭据并冻结在内存中。您可以在注册表或界面中禁用它（请参阅 Excel 帮助）。[那里有](http://strongcpp.blogspot.ru/2013/04/blog-post_8.html)关于启动进程的其他信息。

# objective-c - 在 UIViewController 的代码中，[self.subViewGrid setNeedsDisplay] 没有调用 -drawRect

> ID：15054334
> 
> 赞同：0
> 
> 时间：2013-02-24T17:21:37.897
> 
> 标签：objective-c, uiview, cgcontext

我有一个应用程序，`iPad`使用和。我有一个包含. 在里面，我有一个，全部使用 IB 创建的。以编程方式，我创建了两 (2) 个（一个称为，另一个称为）并将它们添加到; 它们都在模拟器中正确显示。这是代码：`Storyboards``XCode 4.6``iOS 6.1``UIViewController``UIViewController``UIScrollController``viewDidLoad``UIViews``subViewGrid``subViewData``UIViewController`

```
- (void)viewDidLoad  {

[super viewDidLoad];

// notify me when calendar has been tapped and CFGregorianDate has been updated
[[NSNotificationCenter defaultCenter] removeObserver:self];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(calendarTapNotification:)
                                             name:@"calendarDateSelected" object:nil ];

//   UIScrollVIew settings
CGSize scrollableSize = CGSizeMake(760, 1379);  //  set size of scheduleView
[self.schedScrollView setContentSize:scrollableSize];
self.schedScrollView.contentInset = UIEdgeInsetsMake(0,0,44,44);  //  allow for scroll bar
self.schedScrollView.directionalLockEnabled = YES;  //  prevents diagonal scrolling

//  create a sub-view to hold the appointment GRID
CGRect frame = CGRectMake(0,0,760,1390);  //  110,48,760,1390
subViewGrid = [[UIView alloc] initWithFrame:frame];
subViewGrid.tag = 12;  //  use tag to get correct sub-view
subViewGrid.backgroundColor = [UIColor grayColor];
subViewGrid.alpha = 1.0;  //  make it opaque
[self.schedScrollView addSubview:subViewGrid];

//  create a sub-view to hold the appointment DATA
frame = CGRectMake(110,48,670,750); 
subViewData = [[UIView alloc] initWithFrame:frame];
subViewData.tag = 22;  //  use tag to get correct sub-view
subViewData.backgroundColor = [UIColor redColor];
subViewData.alpha = 0.2;  //  make it sort of transparent
[self.schedScrollView addSubview:subViewData];

[self.subViewGrid setNeedsDisplay];  //  ****  UPDATED **** 
```

}

以下是 的`.h`文件内容`UIViewController`：

```
 @interface CalendarViewController : UIViewController  {

    UIView *subViewGrid;
    UIView *subViewData;

}

@property (strong, nonatomic) IBOutlet UIScrollView *schedScrollView;

- (void) calendarTapNotification:(NSNotification *) notification;
-(NSDate *)beginningOfDay:(NSDate *)date;
-(NSDate *)endOfDay:(NSDate *)date;

@end 
```

在我的`drawRect`方法中，我有一些代码应该在 subViewGrid 上绘制一个“网格”。问题是`drawRect`永远不会被调用。`

I have read the `UIView` Programmer's Guide and looked in SO and did a Google search, but found nothing that addresses the issue, which is: why won't `[self.subViewGrid setNeedsDisplay]` call `drawRect` from where I have it placed?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:23:56.657

Your view controller needs to call `setNeedsDisplay` for the view it controls, not for itself. So, you want

```
 [self.subViewGrid setNeedsDisplay] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:29:24.080

This is just an error in your reading the documentation. Understanding the documentation is critical for objective-C programming so I'll try to help you get a grasp of it.

If you look at the documentation for `setNeedsDisplay` you will see that it is either a `CALayer` or `UIView` class method. If you then look at inheritance, you will see that `UIView` is `UIResponder:NSObject` and `CALayer` is `NSObject`. None of these inherit from `UIViewController` which is why you are getting the error. You need to call `[self.subViewGrid setNeedsDisplay]`

# c# - 关于在 mvc3 中验证

> ID：15054335
> 
> 赞同：1
> 
> 时间：2013-02-24T17:21:49.060
> 
> 标签：c#, asp.net, asp.net-mvc-3

这是我在控制器中的代码：

```
 EApproveEntities db = new EApproveEntities();
                DocumentDAO dataDocument = new DocumentDAO();
                DocumentTypeData dataTypeDocument = new DocumentTypeData();
                public void CreateDropDownListInDocument()
                {
                    dataTypeDocument.GetDocumentType();
                    IEnumerable<SelectListItem> listTypeDocument = new SelectList(dataTypeDocument.documentType, "Key", "Value");
                    IEnumerable<SelectListItem> listPriorityDocument = new SelectList(dataDocument.Priority, "Key", "Value");
                    IEnumerable<SelectListItem> listStatusDocument = new SelectList(dataDocument.Status, "Key", "Value");
                    ViewBag.dataTypeDocument = listTypeDocument;
                    ViewBag.dataPriorityDocument = listPriorityDocument;
                    ViewBag.dataStatusDocument = listStatusDocument;
                }
                public ActionResult Index()
                {
                    return View();
                }
                [HttpGet]
                public ActionResult CreateDocument()
                {
                    CreateDropDownListInDocument();
                    Document document = new Document();
                    return this.View(document);
                    //return this.View();
                }
                [ActionName("CreateDocument")]
                [AcceptVerbs(HttpVerbs.Post)]
                [Multiple_Button(Name = "Document", Value = "Cancel")]
                public ActionResult Cancel()
                {
                    return RedirectToAction("ListDocument");
                }

                //[ActionName("CreateDocument")]
                [AcceptVerbs(HttpVerbs.Post)]
                [Multiple_Button(Name = "Document", Value = "Create")]
                public ActionResult CreateDocument(Document model,FormCollection formCollection)
                {
                    CreateDropDownListInDocument();
                    return View(model);
                } 
```

这在视图中的代码中：

```
 <table class="tablestyle">  
            <tr>
                <td >
                    <div>
                        @Html.LabelFor(model => model.NameOfDocument)
                    </div>
                </td>
                <td>
                    @Html.TextBoxFor(model => model.NameOfDocument, new { @class = "input-textbox" })
                    @*@Html.ValidationMessageFor(model => model.NameOfDocument);*@
                </td>
            </tr>
            <tr>
                <td >
                    <div>
                        @Html.Label("Status")
                    </div>
                </td>
                <td>
                    @Html.DropDownListFor(model => model.Status,
                                          (IEnumerable<SelectListItem>)@ViewBag.dataStatusDocument, new { @class = "combobox_style" })
                </td>
            </tr>
            <tr>
                <td >
                    <div>
                        @Html.Label(" Priority")
                    </div>
                </td>
                <td>
                    @Html.DropDownListFor(model => model.Priority,
                                          (IEnumerable<SelectListItem>)@ViewBag.dataPriorityDocument, new { @class = "combobox_style" })
                </td>
            </tr>
            <tr>
                <td >
                    <div>
                        @Html.Label(" Type of Document")
                    </div>
                </td>
                <td>
                   @Html.DropDownListFor(model => model.DocumentType,
                                          (IEnumerable<SelectListItem>)@ViewBag.dataTypeDocument, new { @class = "combobox_style" })
                </td>
            </tr>
            <tr>
                <td >
                    <div>
                        @Html.Label("Path forder")
                    </div>
                </td>
                <td>
                        @Html.TextBoxFor(model => model.PathFolder,new {@Type="file"})
                       @* @Html.ValidationMessageFor(model => model.PathFolder)*@
                </td>
            </tr>
            <tr>
                <td>
                    @Html.Label("Note")
                </td>
                <td>
                    @Html.TextAreaFor(model => model.Note, new { @class = "textarea_style" })
                    @*@Html.ValidationMessageFor(model => model.Note)*@
                </td>
            </tr>
            <tr>
                <td>
                    <div class="style_button">
                        <input type="submit" class="t_button" value="Create" name="Document"/>
                    </div>
                </td>
                <td>
                    <div class="style_button">
                        <input type="submit" class="t_button" value="Cancel" name="Document"/>
                    </div>
                </td>
            </tr>
        </table> 
```

我很接近所有验证。我使用EntityFramwork的模型。没有任何验证。但这是结果： ![在此处输入图像描述](../Images/bdaebd667f20282521221a5192cbf702.png)

我不明白为什么当我什么都不做时它会检查验证。因为这让我犯了一些错误。谢谢！

# html - 我的网页溢出，为什么会这样？

> ID：15054341
> 
> 赞同：-1
> 
> 时间：2013-02-24T17:22:08.337
> 
> 标签：html, css, overflow

在我的网页上（我仍在编辑），出于某种原因，右侧出现溢出，我查看了代码，但看不到它来自哪里？css 目前作为一种样式存在于 index.html 文档中，因此您应该很容易查看它。

在这里：[www.thejonty.co.uk](http://www.thejonty.co.uk/) 如果在 chrome 上... 查看源代码：www.thejonty.co.uk

非常感谢您的帮助 - 我不是一个流利的编码器，但我知道我的方式。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:27:59.103

您的页脚有一个`width`of`100%`和一个`padding`of `20px`。这使得总共`40px`溢出。

您可以尝试使用`padding: 20px 0;`which 删除左右两侧不必要的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:28:00.953

它的`<footer>`-Element 具有 a`width: 100%;`和 a `padding: 20px;`。

您应该将您的版权说明包装在一个`<p>`元素中，并将其添加`padding: 20px;`到那些 p。

像这样的东西：

```
footer {

    width: 100%;
    height: auto;
    text-align: center;
    background-color: #fff;

}

footer p {
    padding: 20px;
} 
```

的HTML：

```
<footer>
    <p>&copy; ...</p>
</footer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:28:41.983

问题在于页脚。当我删除页脚时没有溢出。

只需从页脚样式中删除 Padding 或仅设置填充顶部和底部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T17:30:04.310

尝试删除`padding:20px`页脚，一切都很好

# java - 不同类型地图的地图

> ID：15054346
> 
> 赞同：1
> 
> 时间：2013-02-24T17:22:25.863
> 
> 标签：java, factory

我需要初始化几个从 XML 定义到 bean 的不同类型的对象。我有目录结构：

```
data \
|_ plant \
|  |_ pine.xml
|  |_ cucumber.xml
|_ animal \
|  |_dog.xml
|  |_cat.xml
|_ fungus \
... 
```

我想将它有序地存储在二级地图中：一级地图包含二级地图。每个二级地图都包含一种类型的对象（植物/动物/真菌类......）。每个类都扩展了具有一些公共字段和方法（name/getName()/setName()、desc/getDesc()/setDesc()、toString()、equals() 等的 Dict 类。

现在，为了方便创建所有这些对象，我想要工厂方法 Dict.fabricateAll()。这就是问题所在：如何创建二级映射，以便它们具有精确的类型参数。我不想要 HashMap<String, Dict> 但 HashMap<String, Plant>, HashMap<String, Animal> 等。

现在我有以下代码：

```
public static Map<String, Map<String, ? extends Dict>> fabricateAll() {
    File topDir = new File(Dict.defDir);
    File[] subDirs = topDir.listFiles();
    Map<String, Map<String, ? extends Dict>> dicts = new HashMap<>(subDirs.length);

    String type;
    String handle;
    Map<String, ? extends Dict> dict;

    for (File subDir : subDirs) {
        type = subDir.getName(); 
        File[] xmlFiles = subDir.listFiles(new FilenameFilter() {public boolean accept(File dir, String name) { return name.toLowerCase().endsWith(".xml"); }} );
        dict = new HashMap<>(xmlFiles.length);

        for (File defFile : xmlFiles) {
            handle = defFile.getName();
            handle = handle.substring(0, handle.lastIndexOf('.')-1);

            try {
                Class c = Class.forName(type);
                Constructor bob = c.getConstructor(Class.forName("java.lang.String"));
                dict.put(handle, bob.newInstance(handle));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        dicts.put(type, dict);
    }
    return dicts;
} 
```

但是行有问题： dict.put(handle, bob.newInstance(handle));

错误消息：“接口 Map<K,V> 中的方法不能应用于给定类型。必需：字符串，CAP#1 找到：字符串，对象

是的，那 newInstance() 生成对象，可能应该有一些演员，但什么？我不想在这里只使用“（Dict）”，我更喜欢“（植物）”，“（动物）”......视情况而定。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:35:02.367

将对象转换为字典。这就是多态的好处——你不必引用特定的子类。您可以编写仅引用单个基类 Dict 的代码。这给了你：

*   a) 松耦合——对特定子类没有编译时依赖
*   b) 可扩展性 - 您可以添加子类而无需修改此代码。

是的，有一些方法可以实现您的要求（想到一个大的 switch 语句），但我不推荐任何方法。

# jsf - 从具有数据库 JSF + PrimeFaces 3.5 的先前数据的 InputText 中捕获新值

> ID：15054347
> 
> 赞同：0
> 
> 时间：2013-02-24T17:22:39.757
> 
> 标签：jsf, primefaces

问题是在我从数据库中获取以前的值并覆盖它们之后获取新值，我想将新值保存在我的 bean“变量”中，并在这个组件中显示来自 de DB 的值，但是如果我把“Usuario. nombre”，它不显示来自数据库的值，如果我输入“datos.nombres”，它会显示来自数据库的值，请帮忙

这是我的 xhtml 文件

```
 <p:dataTable style="width:450px" value="#{DAOUsuario.Listar()}" var="datos">
            <p:column headerText="Datos Personales" style="background:#19708F ; color: white">
                <p:outputLabel value="Nombre"/>

                <h:inputText value="#{datos.nombre}"/>                                        
                <br/>
                <p:outputLabel value="Clave" />

                <h:inputText value="#{datos.clave}"/>                                        
                <br/>
                <h:commandButton value="Modificar" action="#{DAOUsuario.Modificar()}">                    
                </h:commandButton>                        
            </p:column> 

        </p:dataTable>

    </h:form>

</body> 
```

这是我的类，它具有连接到数据库的方法

```
public void Modificar() throws Exception {

    FacesContext context = FacesContext.getCurrentInstance();
    Usuario us = (Usuario) context.getApplication().evaluateExpressionGet(context, "#{Usuario}", Usuario.class);

    String sql = "UPDATE usuario SET nombre = '" + us.getNombre() + "', clave = '" + us.getClave() + "' "
            + "WHERE codigousuario = 2";

    try {
        this.Insert(sql);
    } catch (Exception ex) {
        throw ex;
    }
} 
```

这是我的 Bean Usuario：

```
public class Usuario {

    private int codigo;
    private String nombre;
    private String clave;

    public int getCodigo() {
        return codigo;
    }

    public void setCodigo(int codigo) {
        this.codigo = codigo;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getClave() {
        return clave;
    }

    public void setClave(String clave) {
        this.clave = clave;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:50:32.963

只需将`Usuario`对象作为参数发送到您的`Modificar`函数：

```
public void Modificar(Usuario us) throws Exception {
    //just to maintain compatibility with your current Usuario us local variable
    //FacesContext context = FacesContext.getCurrentInstance();
    //Usuario us = (Usuario) context.getApplication().evaluateExpressionGet(context, "#{Usuario}", Usuario.class);

    //code goes here...
} 
```

并修改 JSF 代码以将其发送到您的`<p:commandButton>`：

```
<p:dataTable style="width:450px" value="#{DAOUsuario.Listar()}" var="datos">
    <p:column headerText="Datos Personales" style="background:#19708F ; color: white">
        <p:outputLabel value="Nombre"/>
        <h:inputText value="#{datos.nombre}"/>
        <br/>
        <p:outputLabel value="Clave" />
        <h:inputText value="#{datos.clave}"/>
        <br/>
        <h:commandButton value="Modificar" action="#{DAOUsuario.Modificar(datos)}" />
    </p:column> 
</p:dataTable> 
```

在问题范围之外，作为建议，不要将您的`DAO`类用作托管 bean，最好通过至少具有以下逻辑层来利用应用程序中的耦合：

*   控制器层（用于 JSF/CDI 托管 bean）
*   业务/服务层（业务逻辑在这里）
*   数据访问层（这里是`DAO`类）

另一个建议：请遵循 JavaBeans 的类和函数命名约定，您可以在[此处](http://docstore.mik.ua/orelly/java-ent/jnut/ch06_02.htm)快速查看。例如，您的`DAOUsuario`函数应该是`listar`代替`Listar`和`modificar`代替`Modificar`.

# sql - 在 INNER JOIN SQL 查询上使用 GROUP BY 和 ORDER BY

> ID：15054349
> 
> 赞同：5
> 
> 时间：2013-02-24T17:22:46.517
> 
> 标签：sql, inner-join

我正在使用以下查询从三个表中对客户的工作时间和费用进行分组，一张用于客户，一张用于工作时间，一张用于费用：

```
SELECT  a.*,
        COALESCE(b.totalCount, 0) AS CountWork,
        COALESCE(b.totalAmount, 0) AS WorkTotal,
        COALESCE(c.totalCount, 0) AS CountExpense,
        COALESCE(c.totalAmount, 0) AS ExpenseTotal
FROM    clients A
        LEFT JOIN
        (
            SELECT  Client, 
                    COUNT(*) totalCount,
                    SUM(Amount) totalAmount
            FROM    work_times
            WHERE   DATE BETWEEN '2013-01-01' AND '2013-02-01'
            GROUP   BY Client
        ) b ON a.Client = b.Client
        LEFT JOIN
        (
            SELECT  Client, 
                    COUNT(*) totalCount,
                    SUM(Amount) totalAmount
            FROM    expenses
            WHERE   DATE BETWEEN '2013-01-01' AND '2013-02-01'
            GROUP   BY Client
        ) c ON a.Client = c.Client
WHERE   b.Client IS NOT NULL OR
        c.Client IS NOT NULL 
```

[您可以在此处](http://www.sqlfiddle.com/#!2/fd61b/5)看到查询正在发挥作用。

我正在尝试修改此查询，以便每个客户端每个月都有一行，按月排序，然后按客户端排序。我正在尝试使用以下修改后的查询来做到这一点：

```
SELECT  a.*,
        COALESCE(b.totalCount, 0) AS CountWork,
        COALESCE(b.totalAmount, 0) AS WorkTotal,
        COALESCE(c.totalCount, 0) AS CountExpense,
        COALESCE(c.totalAmount, 0) AS ExpenseTotal
FROM    clients A
        LEFT JOIN
        (
            SELECT  Client, 
                    COUNT(*) totalCount,
                    SUM(Amount) totalAmount,
                    SUBSTR(Date, 1, 7) as Month
            FROM    work_times
            GROUP   BY Month,Client
            ORDER BY Month
        ) b ON a.Client = b.Client
        LEFT JOIN
        (
            SELECT  Client, 
                    COUNT(*) totalCount,
                    SUM(Amount) totalAmount,
                    SUBSTR(Date, 1, 7) as Month
            FROM    expenses
            GROUP   BY Month,Client
            ORDER BY Month,Client
        ) c ON a.Client = c.Client
WHERE   b.Client IS NOT NULL OR
        c.Client IS NOT NULL 
```

[您可以在此处](http://www.sqlfiddle.com/#!2/fd61b/4)查看修改后的查询。

但它的工作并不完全正确。即使有 2013 年 1 月的工作时间和 2013 年 2 月的费用（因此应该有 2 行），客户 B 也只返回一行，并且看起来这些行是由客户而不是按月排序的。有人可以建议如何修改查询以获得所需的输出，例如第二个小提琴上的示例是：

```
╔════════╦═══════════╦═══════════╦══════════════╦══════════════╗
║ CLIENT ║ COUNTWORK ║ WORKTOTAL ║ COUNTEXPENSE ║ EXPENSETOTAL ║
╠════════╬═══════════╬═══════════╬══════════════╬══════════════╣
║ A      ║         1 ║        10 ║            1 ║           10 ║
║ B      ║         1 ║        20 ║            0 ║            0 ║
║ A      ║         1 ║        15 ║            0 ║            0 ║
║ B      ║         0 ║        0  ║            1 ║           10 ║
║ C      ║         1 ║        10 ║            0 ║            0 ║
╚════════╩═══════════╩═══════════╩══════════════╩══════════════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:30:54.717

除非我在要求中遗漏了某些内容，否则您需要做的是获取客户列表和日期，然后将其加入您的子查询。所以您的查询将是：

```
SELECT a.*,
  COALESCE(b.totalCount, 0) AS CountWork,
  COALESCE(b.totalAmount, 0) AS WorkTotal,
  COALESCE(c.totalCount, 0) AS CountExpense,
  COALESCE(c.totalAmount, 0) AS ExpenseTotal
FROM 
(
  select distinct c.Client, d.Month
  from clients c
  cross join
  (
    select SUBSTR(Date, 1, 7) as Month
    from work_times
    union 
    select SUBSTR(Date, 1, 7) as Month
    from expenses
  ) d
) A
LEFT JOIN
(
  SELECT  Client, 
    COUNT(*) totalCount,
    SUM(Amount) totalAmount,
    SUBSTR(Date, 1, 7) as Month
  FROM    work_times
  GROUP   BY Month,Client
  ORDER BY Month,Client
) b 
  ON a.Client = b.Client
  and a.month = b.month
LEFT JOIN
(
  SELECT  Client, 
    COUNT(*) totalCount,
    SUM(Amount) totalAmount,
    SUBSTR(Date, 1, 7) as Month
  FROM    expenses
  GROUP   BY Month,Client
  ORDER BY Month,Client
) c 
  ON a.Client = c.Client
  and a.month = c.month
WHERE   b.Client IS NOT NULL OR
        c.Client IS NOT NULL
order by a.month, a.client 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/fd61b/62)。

结果是：

```
| CLIENT |   MONTH | COUNTWORK | WORKTOTAL | COUNTEXPENSE | EXPENSETOTAL |
--------------------------------------------------------------------------
|      A | 2013-01 |         1 |        10 |            1 |           10 |
|      B | 2013-01 |         1 |        20 |            0 |            0 |
|      A | 2013-02 |         1 |        15 |            0 |            0 |
|      B | 2013-02 |         0 |         0 |            1 |           20 |
|      C | 2013-02 |         1 |        10 |            0 |            0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:54:40.883

如果您在子查询中进行排序，那没关系，因为外部查询可能（并且可能需要）重新排序结果。您想将 order by 添加到外部查询。

您的问题是您试图按 B 表的月份和客户排序，并且还按 C 表的月份和客户排序。您需要定义 B.month、B.client 和 C.month 的 order 并将其放入 order by 以供外部查询。

顺便说一句，如果您只在 C 表的子查询中按月分组，那么客户端是没有意义的。如果未聚合字段不在 group by 中，则某些数据库（如 DB2）不允许您将未聚合字段放在 select 中。

# asp.net - 如何将 C# razor 代码转换为 vb.net Razor 代码块

> ID：15054350
> 
> 赞同：1
> 
> 时间：2013-02-24T17:22:54.717
> 
> 标签：asp.net, asp.net-webpages, razor-2

我需要帮助将此 c# razor 代码转换为 VB.NET razor 代码。

```
 PageData["Colors"] = new[]{"LightCyan", "Gainsboro","Chocolate"}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:26:20.137

试试这样：

```
PageData("Colors") = { "LightCyan", "Gainsboro", "Chocolate" } 
```

# c - 将 select 与阻塞和非阻塞套接字一起使用的影响

> ID：15054351
> 
> 赞同：3
> 
> 时间：2013-02-24T17:22:55.943
> 
> 标签：c, network-programming, nonblocking, select-function

如果我使用带有 select() 调用的非阻塞套接字而不是使用带有 select() 调用的阻塞套接字，我的程序的行为会有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T17:26:18.480

轮询的`select`行为不会有所不同，只有阻塞/非阻塞套接字之间的接收/发送功能会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T23:30:49.773

`select()`不会有不同的行为。`read()`, `write()`,`accept()`和其他 I/O 函数将——它们永远不会在非阻塞套接字上阻塞，而*即使告诉它们不会阻塞，它们**也可能*阻塞，尽管这种情况很少见。*`select()`*

 *[https://stackoverflow.com/a/5352634/259543](https://stackoverflow.com/a/5352634/259543)

不过，不确定 POSIX 是否允许这种行为。*

# matlab - 如何将导入文本拆分为不同的变量

> ID：15054357
> 
> 赞同：0
> 
> 时间：2013-02-24T17:23:06.013
> 
> 标签：matlab

我有文本（可能是这样的 100K 行）

```
time,10 a b,20 c d 
```

（时间 = HH:mm:ss.ffff 以毫秒为单位）

我想将它导入 2 个数组

```
time,a,b
time,c,d 
```

最短的方法是什么？我也需要存储脚本/代码以供将来使用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:47:02.567

MATLAB 有几个文本输入选项。虽然基于正则表达式的选项（如 textscan）通常很有效，但听起来您有一个固定的格式，可以通过手动顺序读取行来更好地处理。我发现这种方法的性能比 textscan 或 import 更一致。如果 a、b、c、d 不是固定宽度，则需要执行其他操作。在这种情况下，我只需使用导入向导来设置输入，然后保存导入代码并根据需要进行修改以使其自动化。

```
array1 = NaN(<numberoflines>,6);
array2 = NaN(<numberoflines>,6);
fname = 'path_to_some_file';
fid = fopen(fname);
stop = 0;
jj = 1;
while ~stop
    cline = fgetl(fid);
    if ischar(cline)
        HH = str2double(cline(1:2));
        MM = str2double(cline(...));
        ...
        array1(jj,:) = [HH MM SS MS a b];
        array2(jj,:) = ...;
    else
        disp('End of file')
        stop = 1;
    end
end
fclose(fid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:30:23.840

尝试使用[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html). matlab中解析字符串的一个非常强大的工具。

# algorithm - 找到正象限中点的最大权重序列

> ID：15054359
> 
> 赞同：1
> 
> 时间：2013-02-24T17:23:24.293
> 
> 标签：algorithm, dynamic-programming

给定正象限中的加权点序列，我们必须找到点的最大权重序列，以便每个连续的点都包含在由前一个点和原点形成的矩形中。

我对这个问题的 DP 算法很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:07:38.367

这个问题实际上是要求最长的递增子序列。[维基百科页面](http://en.wikipedia.org/wiki/Longest_increasing_subsequence)上描述了用于解决此问题的 O(N log N) 算法。

## 更简单的 O(N²) 算法

我假设你有整数点。如果不这样做，您可以使用坐标压缩将您的点放置在 N x N 网格中。

因此，您有一个二维数字数组 W，其中每个数字都是分配给该坐标的权重。你现在有一个重复：

```
// T(w,h) = "Maximum weight of the point sequence in sub-grid (w,h)"
T(0,0) = W(0,0)
T(0,y) = W(0,y)+T(0,y-1)
T(x,0) = W(x,0)+T(x-1,0)
T(x,y) = W(x,y)+max(T(x-1,y),T(x,y-1)) 
```

您可以记住[递归](http://en.wikipedia.org/wiki/Memoization)T（O(N²) 空间）或一次计算一行（O(N) 空间）。两种算法都将使用 O(N²) 时间。

您可以尝试使用笔和纸计算此重复次数，看看它是如何工作的。

# ios - SplitViewController：在第一次加载/显示时将数据传递给 DetailVC

> ID：15054360
> 
> 赞同：0
> 
> 时间：2013-02-24T17:23:26.807
> 
> 标签：ios, ipad, uisplitviewcontroller

在当前的 SplitViewController 星座中，MasterVC 在`viewWillAppear`. DetailVC 中需要该操作的结果才能正确加载其视图（DetailVC 有一个表视图）。

我不知道 SplitViewController 中的加载/出现顺序如何（以及如果知道它可能有多可靠），但有可能

1.  在 MasterVC 上执行操作/计算`viewWillAppear`
2.  将信息传递给 DetailVC（使用 DetailVC 的属性或使用协议）
3.  DetailVC 将在所需信息可用时加载（例如 DetailVC 的 viewWillLoad/viewWillAppear）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:47:43.150

master 和 detail viewDidLoad 方法都是在启动时使用拆分视图控制器调用的。因此，您无法根据主视图控制器中发生的事情来控制何时加载详细信息控制器。**详细视图控制器的 viewWillAppear 在主视图控制器的 viewWillAppear之前**调用，因为您只能在启动时看到详细视图（纵向）。因此，如果您希望在主控制器进行计算之前出现某些内容，您可能需要在详细视图控制器中有一个占位符视图。

仅当应用程序启动时 iPad 处于纵向时，这才是正确的。如果您在启动应用程序时将其转为横向，则在详细调用这些方法中的任何一个**之前，您将获得 master 的 viewDidLoad 和 viewWillAppear。**

# objective-c - 在哪里存储数据以遵循 MVC 模式

> ID：15054365
> 
> 赞同：0
> 
> 时间：2013-02-24T17:23:51.823
> 
> 标签：objective-c, macos, model-view-controller, model

我终于完成了我的第一个小 osx 应用程序，我为自己感到骄傲！但是我仍然对我真正尝试遵循的 obj-c MVC 方法感到困惑。阅读所有不同的教程并没有给我最后的线索。我使用 Hillegass 的书“MAC OS X 的可可编程”。以下模式用于将用户输入与我的控制器类中的`tableview`via绑定：`NSArrayController`

```
- (IBAction)pushAdd:(id)sender {

    ToDoItem *newToDo = [[ToDoItem alloc] init];

    [newToDo setValue:[_inputName stringValue] forKey:@"name"];
    [newToDo setValue:[NSNumber numberWithDouble:[_inputNomValue doubleValue]] forKey:@"nomValue"];
    [newToDo setValue:[NSNumber numberWithDouble:[_inputTolerancePlus doubleValue]] forKey:@"tolerancePlus"];
    [newToDo setValue:[NSNumber numberWithDouble:[_inputToleranceMinus doubleValue]] forKey:@"toleranceMinus"];
    [newToDo setValue:[NSString stringWithFormat:@"%@",[_inputDistribution titleOfSelectedItem]] forKey:@"distribution"];
    [newToDo setValue:[NSString stringWithFormat:@"%@",[_inputDirection titleOfSelectedItem]] forKey:@"direction"];

    [toDoItemArrayController addObject:newToDo];

... 
```

我的问题：

由于我的模型类`ToDoItem`用作创建`ToDoItem`实体的蓝图，因此完整的信息存储在`toDoItemArrayController`控制器中（而不是模型中）。但是如果我需要在其他地方使用数组信息怎么办？我是否需要在我的`ToDoItem`模型类中定义一个额外的数组，其中包含来自的所有信息`toDoItemArrayController`？到目前为止，我对 MVC 的理解是模型应该包含稍后由控制器处理的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:48:17.473

您可以使用控制器之间的对象传递数组`ToDoItem`。但是在其中声明一个与您的数据模型无关的数组`ToDoItem`将不符合 MVC 模式。
要在其他地方访问数组，您可以将其传递给其他地方，例如，可能使用单例或通常可访问的对象，如 AppDelegate。

# javascript - 如何禁用播放 | 在 Jwplayer 上暂停显示？

> ID：15054367
> 
> 赞同：1
> 
> 时间：2013-02-24T17:24:13.477
> 
> 标签：javascript, xml, jwplayer, skinning

我知道已经有一个类似的问题，但[答案](https://stackoverflow.com/questions/8829328/disabling-play-pause-in-embedded-video-using-jw-player)对我来说还不够。问题如下：我有一个带皮肤的 jwplayer（我使用的是 jwplayer 5 而不是 6，因为使用 xml 的皮肤无法正常工作，但相同的配置与 5 完美配合）

这个玩家有一些需求

*   控制栏上唯一的一个按钮应该是全屏（它可以工作）
*   控制栏的位置应该在顶部（我无法找到执行此操作的 xml 配置，只能将其定位在左侧或右侧，始终位于底部）
*   应删除显示器上的播放/暂停操作（我无法找到执行此操作的 xml 配置）
*   在显示器上缓冲时旋转缓冲图标（有效）

我不复制 jwplayer 设置，因为它是基本设置

有一些解决方案吗？

# scheme - 从列表中选择一个元素

> ID：15054371
> 
> 赞同：2
> 
> 时间：2013-02-24T17:24:59.310
> 
> 标签：scheme, racket

您将如何设计一个函数`find`，该函数将接收符号列表和数字，并返回列表的第 n 个符号

我猜输出会是这个

```
(find (list 'a 'b 'c 'd) 3) 
```

> 会

```
(find (list 'a 'b 'c 'd 'e 'f) 4) 
```

> 'e

有没有一种简单的方法可以做到这一点，不会让我感到困惑并且使用初学者很容易理解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:42:28.853

该函数已经存在并且是[标准](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_idx_640)的，它被称为[`list-ref`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._%7E23%7E25kernel%29._list-ref%29%29)：

```
(list-ref (list 'a 'b 'c 'd 'e 'f) 4) 
=> 'e 
```

从文档中：

> `list-ref`返回位置 pos 的 lst 元素，其中列表的第一个元素是位置 0。如果列表具有 pos 或更少的元素，则引发 exn:fail:contract 异常。

# python - django 文件浏览器上传失败

> ID：15054372
> 
> 赞同：2
> 
> 时间：2013-02-24T17:25:12.623
> 
> 标签：python, django, apache, django-tinymce, django-filebrowser

我已经用 django-tinymce 和 django-filebrowser 安装了一个 django 应用程序。在我的机器上，一切正常。当我将应用程序部署到生产环境时，文件浏览器无法上传文件并显示错误消息`Failed`

这是我的设置

> MEDIA_ROOT = '/srv/www/staticFiles/APCC/'
> 
> MEDIA_URL = '/静态/APCC/'
> 
> STATIC_ROOT = '/srv/www/staticFiles'
> 
> STATIC_URL = '/静态/'

这是我的 apache 配置

> ```
> <Location "/">
>     SetHandler python-program
>     PythonHandler django.core.handlers.modpython
>     SetEnv DJANGO_SETTINGS_MODULE APCC.settings
>     PythonDebug Off
>     PythonOption django.root /srv/APCC
>     PythonPath "['/srv/APCC/'] + sys.path"
> </Location>
>     Alias "/static/" "/srv/www/staticFiles/"
>     <Location "/static">
>             SetHandler None
>             Order deny,allow
>             Allow from all
>     </Location>
> </VirtualHost> 
> ```

我确保`MEDIA_ROOT`创建了目录，并且文件浏览器所需的上传文件夹也在其下创建。

`MEDIA_ROOT`目录和上传目录也有写权限。

我相信问题出在我的 apache 配置或文件结构中。问题出在哪里？还有任何特定于 tinycme 或文件浏览器的日志要检查吗？

# iphone - 以编程方式编写 UIButton 操作

> ID：15054379
> 
> 赞同：7
> 
> 时间：2013-02-24T17:26:07.483
> 
> 标签：iphone, ios, objective-c, ipad, uibutton

我正在尝试创建一个按钮，一旦点击它将显示另一个 UIView 的弹出窗口。为了测试这一点，我在 viewDidLoad 部分中有以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.hard1 = [UIButton buttonWithType:UIButtonTypeCustom];
    [self.hard1 setFrame:CGRectMake(884, 524, 105, 60)]; // set the x,y,width and height based on your specs
    UIImage *buttonImage = [UIImage imageNamed:@"green.jpg"];
    hard1.layer.cornerRadius = 10;
    hard1.clipsToBounds = YES;
    [hard1 addTarget: self
              action: @selector(buttonClicked:)
    forControlEvents: UIControlEventTouchUpInside];
    [self.hard1 setImage:buttonImage forState:UIControlStateNormal];
    [self.view addSubview:self.hard1];
} 
```

再往下：

```
- (IBAction) buttonClicked: (id)sender
{
    NSLog(@"Tap");
} 
```

但是，当我按下按钮时，控制台不会记录“Tap”。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T17:34:29.993

看这三行代码：

```
hard1.layer.cornerRadius = 10;
hard1.clipsToBounds = YES;
[hard1 addTarget: self
          action: @selector(buttonClicked:)
forControlEvents: UIControlEventTouchUpInside]; 
```

你缺少自我。在所有三个。他们应该是：

```
self.hard1.layer.cornerRadius = 10;
self.hard1.clipsToBounds = YES;
[self.hard1 addTarget: self
          action: @selector(buttonClicked:)
forControlEvents: UIControlEventTouchUpInside]; 
```

此外，如果您以编程方式创建它，它不应该是 IBAction（IB 代表界面构建器，它不是在界面构建器中创建的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T17:44:59.807

```
 self.hard1 = [UIButton buttonWithType:UIButtonTypeCustom];

 [hard1 addTarget: self
              action: @selector(buttonClicked:)    forControlEvents: UIControlEventTouchUpInside]; 
```

将 hard1 替换为 self.hard1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:31:31.867

您已将事件响应者`buttonClicked`置于`IBAction`您已定义`buttonTap`的 . 这显然行不通……

它应该是

```
[hard1 addTarget: self
              action: @selector(buttonTap:)
    forControlEvents: UIControlEventTouchUpInside]; 
```

# c - MSP430 msp430-gbd 不调试精细值

> ID：15054383
> 
> 赞同：1
> 
> 时间：2013-02-24T17:26:34.420
> 
> 标签：c, msp430

我有一个关于 TI 的 MSP430 启动板（1.5 和 MSP430g2553）的问题。

如果我使用以下 hello 工作代码对 mcu 进行编程，则在调试模式下使用 gdb 读取精细值时会遇到一些问题。

```
#include <msp430g2553.h>
**const int titi = 3;//Global variable**

int main(){
    WDTCTL = WDTPW + WDTHOLD;                

    P1DIR = 0x41;
    **int tata = 0x1;//first local variable**

    while(1){
        P1OUT = 0x41;
        **int toto = 10;//Second local variable**
        __delay_cycles(99999);
        P1OUT=~0x41;
        int tyty = 20;
        __delay_cycles(99999);
    }
    return 0;
} 
```

1.  gcc 用于通过 mcu 下载代码：*$ make prog v=main.c*
2.  **$ mspdebug rf2500 gdb**和 *msp430-gdb main.elf*
3.  *目标远程本地主机：2000*

LED 正在闪烁。几个 tiem 后我停止执行并询问局部变量： (gdb) info locals toto = 1 tyty = 10 tata = -577

**关于全局变量titi**的信息没有问题。**toto**和**tyty**是出现在我的代码中的值，但这是**tata**的不同值。为什么 ？

不要认为这是gdb的错误......

此致，

通用汽车

# javascript - 正则表达式，只允许英文文本，没有特殊字符

> ID：15054384
> 
> 赞同：1
> 
> 时间：2013-02-24T17:26:34.433
> 
> 标签：javascript, html, regex, validation

我想使用 javascript 验证文本字段（名字）。这样它应该只包含文本。没有特殊字符和数字。因为它只是第一个名字，它应该只包含一个单词。（没有空间）

允许：

*   约翰
*   约翰

不允许

*   约翰肯尼迪。
*   约翰肯尼迪。
*   约翰123。
*   123约翰。

我试过这个，但它不工作。

```
if( !validateName($fname)) 
    {
     alert("name invalid");
    }   

function validateName($name) {
var nameReg = /^A-Za-z*/;
if( !nameReg.test( $name ) ) {
    return false;
 } else {
   return true;
  }
} 
```

**编辑：** 我试过

```
var nameReg = /^[A-Za-z]*/; 
```

但是当我输入 john123 或 123john 时，它仍然不显示警告框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:36:48.107

`nameReg`需要`/^[a-z]+$/i`（或一些变体）。`^`匹配字符串的开头并匹配`$`结尾。这是“从字符串开头到结尾的一个或多个 az 字符，不区分大小写”。您可以更改`+`为`*`，但字符串可能为空。

[http://jsfiddle.net/ExplosionPIlls/pwYV3/1/](http://jsfiddle.net/ExplosionPIlls/pwYV3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:29:24.297

使用字符类：

```
var nameReg = /^[A-Za-z]*/; 
```

如果没有包含`[]`（使其成为字符类），您将指定一个文字`A-Za-z`.

**更新：**

`$`在正则表达式的末尾添加一个。

```
var nameReg = /^[A-Za-z]*$/; 
```

否则，`john123`当正则表达式匹配时返回有效，`john`并且可以忽略`123`字符串的一部分。

工作演示：http: [//jsfiddle.net/GNVck/](http://jsfiddle.net/GNVck/)

# node.js - 全局节点模块未正确安装。找不到命令

> ID：15054388
> 
> 赞同：97
> 
> 时间：2013-02-24T17:26:42.630
> 
> 标签：node.js, terminal, installation, npm

我在安装全局节点模块时遇到问题，我在网上找到的所有内容都说解决方法只是添加 -g。这不是问题所在。我相信这是一个链接问题或错误的目录问题。

这是我所做的：

```
$ npm install -g express
npm http GET https://registry.npmjs.org/express
npm http 304 https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/range-parser/0.0.4
npm http GET https://registry.npmjs.org/mkdirp/0.3.3
...downloads correctly

$ express myapp
bash: express: command not found 
```

但是，当我运行直接链接位置来表达它时：

```
 $ /usr/local/share/npm/bin/express myapp

   create : myapp
   create : myapp/package.json
   create : myapp/app.js
... Builds app correctly 
```

模块在哪里：

```
$ which node
/usr/local/bin/node
$ node -pe process.execPath
/usr/local/Cellar/node/0.8.20/bin/node
$ npm link express
/Users/bentonrr/Development/Personal/node_modules/express -> /usr/local/share/npm/lib/node_modules/express 
```

在我的 .bash_profile 我有：

```
export PATH=/usr/local/bin:$PATH
export NODE_PATH=/usr/local/lib/node_modules:/usr/local/lib/node 
```

我是否需要更改我的 Node 环境才能下载到正确的文件夹？有什么链接不正确吗？我搞不清楚了..

谢谢！

其他规格：

```
$ node --version
v0.8.20
$ npm --version
1.2.11
$ brew --version
0.9.4
OSX Version 10.8.2 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2014-07-29T14:55:30.317

这可能意味着您的节点安装前缀不是您所期望的。

你可以这样设置：

`npm config set prefix /usr/local`

然后再次尝试运行`npm install -g`，它应该可以解决。在mac上为我工作，解决方案来自这个站点：

[http://webbb.be/blog/command-not-found-node-npm/](http://webbb.be/blog/command-not-found-node-npm/)

编辑：请注意，我刚刚在我正在设置的新 Mac 上再次遇到此问题，并且还必须[在 stackoverflow 上执行此处详述](https://stackoverflow.com/a/27475650/26510)的过程。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-03-25T19:59:09.387

添加`$(npm get prefix)/bin`到您的`PATH`（例如， in `.bashrc`），如下所示：

`echo "export PATH=$PATH:$(npm get prefix)/bin" >> ~/.bashrc`

有关更多信息，请参阅`npm help npm`：

> 全局模式：npm 将包安装到前缀/lib/node_modules 的安装前缀中，bin 安装在前缀/bin 中。

`npm get prefix`您可以使用或找到安装前缀`npm config list | grep prefix`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-02-09T16:30:25.770

我的 npm 也找不到全局包。我按照 Brad Parks 的建议做了：

```
npm config set prefix /usr/local 
```

然后我得到一个 EACCES 权限错误（不要使用`sudo npm install -g <package>`）并通过官方 npm 文档修复它：[https ://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally](https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally)

1.  在命令行的主目录中，为全局安装创建一个目录：

```
 mkdir ~/.npm-global 
```

2.  配置 npm 以使用新的目录路径：

```
 npm config set prefix '~/.npm-global' 
```

3.  在您首选的文本编辑器中，打开或创建一个 ~/.profile 文件并添加以下行：

```
 export PATH=~/.npm-global/bin:$PATH 
```

4.  在命令行上，更新您的系统变量：

```
 source ~/.profile 
```

5.  然后全局安装一个包并测试它！例如：

```
npm install -g awsmobile-cli
awsmobile configure 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-03-05T06:09:32.350

就我而言， NODE_PATH 环境变量为空。检查是否为空-

```
echo $NODE_PATH 
```

如果 NODE_PATH 为空。然后更改 ~/.bash_profile 并添加 NODE_PATH

```
nano ~/.bash_profile
export NODE_PATH=`npm root -g`
source ~/.bash_profile 
```

现在再次安装 npm 模块并检查是否安装在路径上`npm root -g`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-04T04:40:11.067

我**从来没有**通过 sudo 安装任何 npm 的东西！我有我自己的理由，但我只是尽量保持简单，并以用户为基础，因为这是一个用户开发世界，并不是每个人都有 root 访问权限，并且 root/sudo 安装这样的东西似乎只是把事情弄得一团糟和。毕竟，所有开发人员都应该能够遵循这些说明，而不仅仅是特权 sudo 用户。

这个特定的系统是一个通过 SSH 访问的 RHEL7：

经常需要各种版本的节点，所以我使用 NVM [https://github.com/creationix/nvm](https://github.com/creationix/nvm)

话虽如此，我可以向您展示一个`-g`全局安装的工作示例，使用 NVM、NPM 和不使用 root 的节点路径。

`.npm-packages`如果还没有，请设置您的前缀。（注意，那是连字符，不是下划线）

```
nvm config ls
prefix = "/home/<yourusername>/.npm-packages" 
```

然后调整您的 ~/.bash_profile 或 .bashrc 如果您更喜欢 [在这里阅读为什么和哪个](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)，请使用以下信息。

```
#PATH EXPORTS
NODE_MODULES=$HOME/.npm                                          
NPM_PACKAGES=$HOME/.npm-packages/bin                           
export PATH=$PATH:$HOME/bin:$NODE_MODULES:$NPM_PACKAGES         

#NVM ENABLE                                                 
export NVM_DIR="$HOME/.nvm"                                   
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh" # This loads nvm 
```

这几乎涵盖了所有路径。例如，如果您像这样安装 gulp，`npm install -g gulp`它会在其中添加符号链接`~/.npm-packages/bin`（请注意，这是一个连字符，而不是下划线）。（不需要`gulp-cli`, 或`gulp-cl`）

您几乎可以替换/注释掉所有其他节点路径导出。您可以安全地将此路径信息放在您已有的任何其他路径信息下方，而不会覆盖这些内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-28T15:53:31.237

对于 Windows 用户

**将此添加到您的路径：** “%AppData%\npm”

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-12T14:31:54.680

检查全局 Node 模块的二进制文件夹，并将其添加到 $PATH。

```
npm list -g | head -1 
```

如果使用 nodeenv，则无论何时安装全局节点版本，路径都会更改。添加这样的路径可以解决我的问题。

```
"$HOME/.nodenv/versions/$(nodenv global)/bin" 
```

添加zsh路径的快捷方式

```
$ echo 'export PATH="$HOME/.nodenv/versions/$(nodenv global)/bin"' >> ~/.zshrc 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-27T19:21:37.120

1.  将以下行添加到您的`~/.bash_profile`

    ```
    export PATH="$HOME/.npm/bin:$PATH" 
    ```

2.  加载 bash 配置文件

    ```
    bash -l 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-01T14:19:47.193

我遇到的问题是**缺少二进制文件**，因为我的主目录中用户特定的**.npmrc****`bin-links`**文件已设置为`false`，尽管`default is true`.

以防万一这是您的问题，请检查您的任何 .npmrc 文件是否都将其设置为 false。

然后重新安装所有模块将创建二进制文件，`prefix`以便您`PATH`可以看到它们。

# javascript - Clickon功能不包括一个div？

> ID：15054389
> 
> 赞同：0
> 
> 时间：2013-02-24T17:26:50.757
> 
> 标签：javascript, jquery, javascript-events

你点击那个 div 我想运行函数 generate_clicked()

这是我试图用于 tumblrgenerator.com 的代码

```
<script type="text/javascript">
    $('#pane').click(function(){
        generate_clicked();
    });
</script> 
```

但即使该代码也不起作用，我不确定为什么？仅在我使用窗口时有效

我想使用以下代码

```
<script type="text/javascript">
    $(window).click(function(){
        generate_clicked();
    });
</script> 
```

但排除文本区域 .preview 但我不知道如何:(

简而言之，如何在除 .preview 之外的所有内容上添加点击功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:32:35.960

> 简而言之，如何在除 .preview 之外的所有内容上添加点击功能

```
$('*').not('.preview').on('click', function () {
    generate_clicked();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:32:54.923

```
$(window).click(function(ev){
if (!$(ev.target).hasClass('preview')) generate_clicked();
}); 
```

# html - 标题层次结构网站或部分是否有范围？

> ID：15054390
> 
> 赞同：0
> 
> 时间：2013-02-24T17:27:11.000
> 
> 标签：html, header, semantics

我有兴趣看到一些意见，甚至是一些明确的答案，以下查询：

*什么范围决定了标题的级别？*

我想提出的两个极端如下：

*   网站范围
*   部分范围

以下是每个示例：

## 网站范围

```
<html>
  <body>
    <h1>Haunted fishbowls</h1>

    <div class="article">
      <h2>What does it do to my fish?</h2>
      <p>Fish ipsum</p>
      <h3>Toiletbowl hauntings?</h3>
      <p>Subheader fish ipsum</p>
    </div>

    <div class="article">
      <h2>Stones are sinking upwards</h2>
      <p>Weird stuff is happening in my fish bowl today</p>
    </div>
  </body>
</html> 
```

如您所见，标题级别是在“全局”范围内确定的。即使*它对我的鱼有什么影响？*显然是文章的第一级标题，它是网站的第二级标题，因此标记为**h2**。

## 部分范围

```
<html>
  <body>
    <h1>Haunted fishbowls</h1>

    <div class="article">
      <h1>What does it do to my fish?</h1>
      <p>Fish ipsum</p>
      <h2>Toiletbowl hauntings?</h2>
      <p>Subheader fish ipsum</p>
    </div>

    <div class="article">
      <h1>Stones are sinking upwards</h1>
      <p>Weird stuff is happening in my fish bowl today</p>
    </div>
  </body>
</html> 
```

现在，几乎相同的 HTML 的标记有所不同。注意文章里面**'s, 标头调平重置。这是为了表示文章内部的标题级别。所以**div class="article"**中的**h1**代表文章的主要标题，即标题。body中的**h1表示****正文**的主标题。**

 ******## 会有什么办法？

所以现在我问你，要走的路是什么？这有明确的标准吗？任何答案都非常受欢迎。我主要感兴趣的是大家对此的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:48:09.077

两者在内容大纲方面的工作方式完全相同......***如果***您使用正确的分段标签（您在第二个示例中没有）。更改`<div class="article">`为`<article>`，您的内容将被适当分割。 `<body>`也是它自己的切片标签，当然还有`<section>`.

您可以通过将示例插入[http://gsnedders.html5.org/outliner/](http://gsnedders.html5.org/outliner/)来查看此行为——第一个示例按您的意图工作（我相信）。第二个没有，但是如果您更改`<div>`为`<article>`或`<section>`在第二个中，它看起来就像第一个一样。

我认为网络更倾向于支持第二种方法，而不是选择适当的`<h*>`标签级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:32:48.883

普遍接受的标准是`H1`每页一个标签。您的开头标题用于描述页面。如果页面需要多个`H1`标签，那么您可能会错误地组织您的内容，并且应该将其分布在多个页面上。

不幸的是，W3C 没有为此提供指导，而是由开发人员自行决定。`H1`但是，使用多个标签不是一个好习惯，也绝对不是标准行为。**但为什么？**

1.  从可访问性的角度考虑这一点，在您的示例中，没有什么可以概括网页的总体目的，用户被迫查看每个单独的部分以确保他们了解该页面的内容。

2.  据信，谷歌等主要搜索引擎可能会因过度使用`H1`标签而惩罚您的网站。（[http://www.youtube.com/watch?feature=player_embedded&v=GIn5qJKU8VM](http://www.youtube.com/watch?feature=player_embedded&v=GIn5qJKU8VM)）

然而，W3C 确实声明：

> HTML中的标题有六级，H1最重要，H6最不重要。

[http://www.w3.org/TR/html4/struct/global.html#h-7.5.5](http://www.w3.org/TR/html4/struct/global.html#h-7.5.5)

通过使用多个`H1`标签，您将页面的多个部分标记为最重要的部分。

就您的问题而言。`H1`应按网页范围处理，您可以使用较低级别的标题来表示不同的部分。将标题层次结构想象成一棵树，它`H1`是树桩，每个较低级别的标题都从它分支出来。`div`标签并不代表内容的重要性，而且很多时候标题可能比其标题的内容嵌套得更深，这并没有降低它的相关性 - 想想你的第二个例子在这种情况下如何工作。******

# java - 错误的输入被验证为错误，但表现得好像它是正确的

> ID：15054391
> 
> 赞同：0
> 
> 时间：2013-02-24T17:27:20.557
> 
> 标签：java, swing, validation, components

我有一些组件，我想检查它们是否被填充。我的代码遍历添加到列表中的每个组件，将其转换为正确的类型，调用该`getText`方法并检查它是否为空。如果它为空，则将布尔值设置为 false 并返回。根据布尔值，显示“Yay”（成功）或“Nay”（失败）。作为附加测试，我`component.toString()`每次失败时都会打印出来。

现在的问题是：`component.toString()`在每个组件都有文本的情况下调用每个方法。不管我的输入如何，布尔值仍然是成功的（即使某些字段中没有文本）。

在调试过程中，我发现我的任何组件在调试窗口 (Eclipse) 中都没有字段“Text”或“getText”或类似字段，这可能表明存在问题。

我找不到问题，有人可以指出我吗？

```
boolean success = checkInput();
if (success) {
    System.out.println("Yay");
} else {
    System.out.println("Nay");
} 
```

check输入法

```
private boolean checkInput() {

    boolean success = true;
    List<Component> components = new ArrayList<Component>();
    components.add(txtLeertrajectCode);
    components.add(txtLeertrajectTitel);
    components.add(txtOmschrijving);
    components.add(txtDoelgroep);

    for (Component comp : components) {
            if (comp instanceof JTextField) {
                String curr = ((JTextField) comp).getText().trim();
                if ("".equals(curr)) {
                    System.out.println(comp.toString());
                    comp.setForeground(Color.RED);
                    success = false;
                } else {
                    comp.setForeground(Color.BLACK);
                }
            } else if (comp instanceof JTextArea) {
                String curr = ((JTextArea) comp).getText();
                if ("".equals(curr)) {
                    System.out.println(comp.toString());
                    comp.setForeground(Color.RED);
                    success = false;
                } else {
                    comp.setForeground(Color.BLACK);
                }
            }

        }

        return success;
    }
} 
```

输出：

```
javax.swing.JTextField[...] 
javax.swing.JTextField[...]
javax.swing.JTextArea[...] 
javax.swing.JTextField[...] 
Yay 
```

**编辑：**

问题解决了，显然我有两次我的文本字段，但在文件中使用了相似的名称。显然，检查是在未使用的文本字段上完成的。愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:30:42.193

可能你应该改变这个：

```
} else {
    System.out.println("Yay");
} 
```

到

```
} else {
    System.out.println("Nay");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:30:44.567

我觉得一切都好。您有 JTextFiled 但它不包含文本（它只是空的）

**更新**

```
I write simple example
results = new JTextArea();
        System.out.println("First :" + results.getText());
        results.setText("Test");
        System.out.println("Second :" + results.getText()); 
```

和输出看起来像这样：

```
First :
Second :Test 
```

那么您可能会在检查后将值插入文本字段吗？？？

# java - 无法开始使用 apache tomcat

> ID：15054397
> 
> 赞同：2
> 
> 时间：2013-02-24T17:28:29.370
> 
> 标签：java, apache, tomcat7

我已经开始学习 Servlets，所以我从[这里](http://tomcat.apache.org/download-70.cgi)下载了 apache tomcat 7.x zip 文件（core--> zip） 。我将它解压缩到我的目录 (D:)，然后我刚刚将`JAVA_HOME`System 变量设置为值`C:\Program Files\Java\jdk1.6.0`（我的计算机在**windows 7** Home basic 上运行）。

**我已经通过文件夹中的startup.bat**文件启动了服务器`bin`。当我尝试访问`localhost:8080`时，它总是`unable to connect`在浏览器上显示。所以我将端口号更改为`9999`server.xml**并**重新启动它。它再次说无法在我的浏览器中连接。当我启动服务器时，它在命令外壳上显示以下内容。有人可以帮我解决这个问题并使我的服务器正常工作吗？

通过在命令 shell 上观察以下内容，我只能找到这行似乎给出了一些问题的迹象：**`Failed to initialize component [Standard Server[8005]]`**. 还是不知道和连接不上有什么关系。。

```
Feb 24, 2013 4:58:02 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performanc
e in production environments was not found on the java.library.path: C:\Program
Files\Java\jdk1.6.0\bin;.;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\
Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\
Program Files\Java\jdk1.6.0\bin
Feb 24, 2013 4:58:02 PM org.apache.catalina.startup.Catalina load
SEVERE: Catalina.start
org.apache.catalina.LifecycleException: Failed to initialize component [Standard
Server[8005]]
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:633)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:658)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:455)
Caused by: org.apache.catalina.LifecycleException: Failed to initialize componen
t [StandardService[Catalina]]
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
        at org.apache.catalina.core.StandardServer.initInternal(StandardServer.j
ava:814)
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
        ... 8 more
Caused by: org.apache.catalina.LifecycleException: Failed to initialize componen
t [StandardEngine[Catalina]]
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
        at org.apache.catalina.core.StandardService.initInternal(StandardService
.java:544)
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
        ... 10 more
Caused by: java.lang.NoSuchMethodError: java.util.concurrent.ThreadPoolExecutor.
allowCoreThreadTimeOut(Z)V
        at org.apache.catalina.core.ContainerBase.initInternal(ContainerBase.jav
a:1083)
        at org.apache.catalina.core.StandardEngine.initInternal(StandardEngine.j
ava:283)
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
        ... 12 more
Feb 24, 2013 4:58:02 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 532 ms
Feb 24, 2013 4:58:02 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-9999"]
Feb 24, 2013 4:58:02 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Feb 24, 2013 4:58:02 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Feb 24, 2013 4:58:03 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start:
org.apache.catalina.LifecycleException: Failed to stop component [StandardServer
[8005]]
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:141)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: An invalid Lifecycle transiti
on was attempted ([before_stop]) for component [org.apache.catalina.deploy.Namin
gResources@1807ca8] in state [INITIALIZED]
        at org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBas
e.java:409)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:219)
        at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.j
ava:756)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        ... 8 more
Feb 24, 2013 4:58:03 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 11 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:59:24.470

我注意到堆栈跟踪的一件事是：

```
Caused by: java.lang.NoSuchMethodError: java.util.concurrent.ThreadPoolExecutor.allowCoreThreadTimeOut(Z)V 
```

查看 ThreadPoolExecutor 的 Javadoc，似乎在 Java 6 中引入了方法 allowCoreThreatTimeOut(boolean)。它在早期版本中不存在。如果您在过时的 JVM 上运行专为版本 6+ 设计的 java 程序，上述错误正是您会发现的。

当你第一次启动 tomcat 时，你应该有这样的行：

```
Using CATALINA_BASE:   /home/nick/tools/apache-tomcat-6.0.35
Using CATALINA_HOME:   /home/nick/tools/apache-tomcat-6.0.35
Using CATALINA_TMPDIR: /home/nick/tools/apache-tomcat-6.0.35/temp
Using JRE_HOME:        /usr
Using CLASSPATH:       /home/nick/tools/apache-tomcat-6.0.35/bin/bootstrap.jar 
```

查看 JRE_HOME 的目录，看看你得到了什么。也许您在某个地方安装了 Tomcat 尝试使用的 Java 5，尽管命令行会看到 Java 6 安装。安装多个 java 版本可能会导致混淆。

# file-upload - Loadrunner 文件上传

> ID：15054402
> 
> 赞同：0
> 
> 时间：2013-02-24T17:29:07.037
> 
> 标签：file-upload, loadrunner

在过去的几天里，我在谷歌上搜索了很多这个主题，但我找不到最佳实践解决方案。我的问题基本上是如何在 LR 中编写文件上传脚本？我的应用程序包含一个浏览按钮，一个可让我找到文件的弹出窗口，并在找到文件后关闭。最后，该应用程序有一个上传按钮来上传文件。我的脚本是使用 URL 模式录制的，我想我需要创建某种自定义请求？URL 模式创建了一些复杂的脚本，在这些脚本中放置自定义请求是具有挑战性的。BTW：我还没有尝试记录和播放描述的文件上传过程，使用URL模式可能会解决它而无需进一步定制？还是有人真的使用 LR 和 URL 模式上传文件？一个小例子将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:16:03.060

不同的应用程序将以不同的方式将文件从客户端上传到服务器。最好的办法是记录您的应用程序进行上传并查看 LoadRunner 记录的内容。

**通过创建事务在记录**时标记上传前后的点，以便您可以轻松地在代码中找到实际发生上传的位置。

# php - 社交引擎自定义页面能够添加小部件和更改布局

> ID：15054405
> 
> 赞同：1
> 
> 时间：2013-02-24T17:29:14.543
> 
> 标签：php, socialengine

我想创建一个新页面，就像您在管理布局编辑器中看到的那样。我可以从那里创建一个新页面，但它的 url 始终是 mysite.com/pages/mypage 。如果我进入engine4_core_pages，我可以添加一个引用我的控制器和我想要的操作的页面。所以让我们说

```
mymodule_index_mynewpage Somepage 
```

它将在 LayoutEditor 中的 Editing 下拉菜单中显示为“Somepage”。当我选择该页面以向其添加小部件或更改列时，我在中间内容区域中得到的只是顶部的全局页眉和全局页脚选项来隐藏或显示。当我可以放置小部件时，中间没有开放区域。我在说什么的屏幕截图

[http://i.imgur.com/rDSy26n.png?1](http://i.imgur.com/rDSy26n.png?1)

如何让页面能够更改布局并向其添加小部件？我似乎找不到它。

**编辑：添加到下面的答案** 遵循以下说明后，更改布局的能力受到限制。为了能够使用所有“列布局”，您还必须将其放入 engine4_core_content。

(自动编号), yourpage_id, type=container, name=middle, (父容器递增 id), order(6 我猜), ["[]"]=params, null=attribs

```
1234 50 container middle 1000 6 ["[]"] null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:45:23.490

首先，您必须在 engine4_core_content 中创建新行，类型为“container”，名称为“main”（当然 page_id 是您的 page_id）。主容器包含“左”、“右”和“中”容器。

然后，在引用您的页面（mymodule_index_mynewpage）的操作结束时，您可以使用类似这样的内容来显示使用布局编辑器为您的特定操作配置的内容：

```
$this->_helper->content
        ->setContentName(48) // page_id
        ->setNoRender()
        ->setEnabled();
return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T01:58:02.517

socialengine 中有两个表，它们存储有关布局编辑器使用的页面和小部件的信息：

*   engine4_core_pages
*   engine4_core_content

两者都通过字段“page_id”相关。

你必须记住这个结构：

```
页面（在 engine4_core_pages 中定义）
    |
    ----- 容器（在engine4_core_content中定义，字段：类型）
                 |
                 ----- 小部件（在 engine4_core_content 中定义，字段：类型）

```

检查两个表中的信息，并在您的项目中检查文件 install.php（在 //settings 内部

# android - 制作和存储字符串？

> ID：15054406
> 
> 赞同：0
> 
> 时间：2013-02-24T17:29:18.793
> 
> 标签：android, eclipse, string, store

我今天在这里得到了一些帮助来制作一个字符串，按下按钮后会显示该字符串：

```
public void addListenerOnButton() {

    button1 = (Button) findViewById(R.id.buttoncalculate);
    button1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View view) {

            EditText editText = (EditText)findViewById(R.id.editText1);
            String text = editText.getText().toString();

             Intent myIntent = new Intent(view.getContext(),Calculated.class);
             myIntent.putExtra("mytext",text);
             startActivity(myIntent);

        }
    }); 
```

它显示为：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.calculated);

       mTextview = (TextView)findViewById(R.id.textView1);

       mTextview.setText(getIntent().getStringExtra("mytext"));
} 
```

但我注意到这只是暂时的。一旦我离开应用程序或进入其他活动，字符串就会被重置..

我的问题是：如何将本地字符串存储为真实字符串，从而将其显示在其他活动中，甚至在应用程序关闭后？

是strings.xml的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:37:19.933

**是strings.xml的东西吗？**

否 - 这是只读的并在编译期间使用。

**如何将本地字符串存储为真实字符串，从而将其显示在其他活动上，甚至在应用程序关闭后？**

您在谈论的是持久存储。您有 3 个主要选项（还有其他选项，但由于这是一个相当广泛的主题，我将保持简单）：

**将其存储在文件中**

将字符串保存到文件中，并在应用程序启动时或您需要的地方加载它。

[请参阅这篇关于读取/写入文本文件Android 写入文件](https://stackoverflow.com/questions/5921838/android-write-file)的 SO 帖子

**使用 SharedPreferences**

SO Post 在这个[android 读/写用户首选项上显示代码](https://stackoverflow.com/questions/9498713/android-read-write-user-preferences)

可能是存储简单字符串且易于编码的最佳答案。如果您启动 Activity 并且没有传入意图，则可以从[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)加载字符串。

```
mTextview.setText(getIntent().getStringExtra("mytext")); 
```

变成

```
final String myString = getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE).getString("SOME_STRING", "Default if not found");

mTextview.setText(myString); 
```

以上纯粹是为了演示，可能需要根据您自己的需要进行整理和完善。

**使用数据库**

对您来说可能是最糟糕的选择，但值得考虑。如果你开始有多个字符串或复杂选项，那么 SQLite 是内置在 Android 中的。

在这里可以找到一个很好的教程[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:44:24.683

我更喜欢用来`Shared Preferences`储存价值。

***MainActivity.java***

```
public void addListenerOnButton() {

    button1 = (Button) findViewById(R.id.buttoncalculate);
    button1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View view) {

            EditText editText = (EditText)findViewById(R.id.editText1);
            String text = editText.getText().toString();

            SharedPreferences sp = getSharedPreferences("MyPrefs", MODE_PRIVATE);

            Editor editor = sp.edit();
            editor.putString("mytext", text);
            editor.commit();

             Intent myIntent = new Intent(view.getContext(),Calculated.class);
             startActivity(myIntent);

        }
    }); 
```

***计算出来的.java***

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.calculated);

       mTextview = (TextView)findViewById(R.id.textView1);

       mTextview.setText(getSharedPreferences("MyPrefs", MODE_PRIVATE).getString("mytext",null););
} 
```

# php - 如何在php中使用复选框行获取选中的值？

> ID：15054412
> 
> 赞同：0
> 
> 时间：2013-02-24T17:29:44.200
> 
> 标签：php, forms

我正在尝试获取使用复选框检查的行的值。因此，当我提交表单时，我想要选定行的值，但我无法弄清楚如何获取它。任何人都可以帮助我或指导我吗？

```
<?php
if(isset($_POST['invite'])){
    // what should I write here to get value of hidden fields name and email which was selected     
}
?>  
<!doctype>
<html><head>
<script type="text/javascript" src="jquery-1.4.2.js"></script>

// performing select all /deselect all checkbox operation  

    <SCRIPT language="javascript">
      $(function(){

        // add multiple select / deselect functionality
        $("#selectall").click(function () {
              $('.case').attr('checked', this.checked);
        });

        // if all checkbox are selected, check the selectall checkbox
        // and viceversa
        $(".case").click(function(){

            if($(".case").length == $(".case:checked").length) {
                $("#selectall").attr("checked", "checked");
            } else {
                $("#selectall").removeAttr("checked");
            }

        });
    });
    </SCRIPT>

</head><body>
    <div class = 'middle' style = 'width : 700px;background-color:beige'>

// creating grid view   

    <form type="post" name ="contacts">
<span><input type="checkbox" id="selectall"/></span>
     <div class = 'middle row'>NAME</div>
     <div class = 'middle row'>E-MAIL</div>
     <div class='line'></div>
     <div class='line'></div>
<?php foreach($email as $e){
echo "<div>
   <span><input type='checkbox' class='case' name='case'/></span>
   <div class='row'>".$e['name']."
       <input name='cname[]' type='hidden' value =".$e['name']."></div>
   <div class='row'>".$e['email']."
       <input name='cemail[]' type='hidden' value =".$e['email']."></div>
   </div><div class='line'></div>";
}
echo"<input type='submit' name='invite' value='invite'>
         </form></div></body></html>";
   }?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:21:31.103

`$_POST`提交表单后，选中复选框的值与任何其他表单字段一样出现在数组中。在您的情况下，您有多个名为`case`. 这些都没有分配特定的值，因此如果选中任何复选框，`$_POST['case']`则将相等`on`，因此这对您毫无帮助。

将复选框的名称更改为`case[]`并为每个复选框分配一个唯一值，并将在提交后包含所有*选中*`$_POST['case']`复选框的值的数组。例如，您可以在复选框的属性中重复隐藏字段的值。*`value`*

 *我写了一个小的 php 脚本，应该可以帮助您理解复选框如何与 php 一起工作。只需运行它，使用复选框，然后查看`$_POST`数组。

```
<!doctype html>
<html>
<body>
<form method="post">
    <input type="checkbox" name="test[]" value="0"/>
    <input type="checkbox" name="test[]" value="1"/>
    <input type="checkbox" name="test[]" value="2"/>
    <input type="checkbox" name="test[]" value="3"/>
    <input type="checkbox" name="test[]" value="4"/>
    <input type="submit"/>
</form>

<pre><?php var_dump($_POST); ?></pre>
</body>
</html> 
```

如果您想保留隐藏字段并且不想在复选框元素中重复它们的值，您还可以使用其数组的数组键作为复选框值：

```
<?php
$i = 0;
foreach($email as $e) {
    echo "<div>
        <span><input type='checkbox' class='case' name='case[]' value='".$i."'/></span>
        <div class='row'>".$e['name']."
            <input name='cname['".$i."']' type='hidden' value =".$e['name']."></div>
        <div class='row'>".$e['email']."
            <input name='cemail['".$i."']' type='hidden' value =".$e['email']."></div>
        </div><div class='line'></div>";
    $i++;
} 
```

现在，`$_POST['case']`例如，如果包含值 2、4 和 8，则您要查找的电子邮件位于`$_POST['cemail'][2]`和`$_POST['cemail'][4]`中`$_POST['cemail'][8]`。当然，同样适用于`$_POST['cname']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:45:40.893

首先，`form`标签的参数有一个错误：

```
<form type="post" 
```

这应该读

```
<form method="post" 
```

然后，由于您将 name 和 e-mail 存储在名为and的`input`s中，它们将分别传递到and变量中。请注意，您以它们将作为数组传递的方式命名它们，因此实际上是一个数组 - 它包含输入控件的键值对和值属性。所以实际上，您的姓名和电子邮件将在 变量中。`cname[]``cemail[]``$_POST['cname']``$_POST['cemail']``$_POST['cname']``0``$_POST['cname'][0]``$_POST['cemail'][0]`

请分析并阅读PHP 手册的[处理表单部分](http://php.net/manual/en/tutorial.forms.php)。*

# android - 在 Android 中保留对系统服务的成员引用是否有益？

> ID：15054416
> 
> 赞同：3
> 
> 时间：2013-02-24T17:30:10.580
> 
> 标签：android, android-service, android-context, android-framework

假设我有一个使用系统服务（如 PowerManager、WifiManager 等）的 android 活动/服务......让私有成员在构造函数或 onCreate 方法中保持对这些服务的引用是否有益，而不是让这些服务管理器每个并且每次调用 getSystemService(...)` 都需要它们？如果是这样，如果这些系统服务之一崩溃并重新启动，这些成员是否可以安全使用？如果它们不安全，那么处理此类服务死亡案件的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:02:10.457

> 让私有成员在构造函数或 onCreate 方法中保持对这些服务的引用是有益的，而不是在每次需要时通过调用 getSystemService(...)` 来获取这些服务管理器？

当然！这样打字就少了。:-)

> 如果是这样，如果这些系统服务之一崩溃并重新启动，这些成员是否可以安全使用？

如果系统服务崩溃，用户遇到的问题比您的应用程序发生的问题更大。话虽如此，您可能会得到某种`RuntimeException`.

# facebook - 查看应用时间线视图

> ID：15054420
> 
> 赞同：3
> 
> 时间：2013-02-24T17:30:19.073
> 
> 标签：facebook, facebook-apps, facebook-timeline

从应用程序详细信息中，（应用程序 -> xxx -> 应用程序详细信息）在页面左侧有一个链接列表（相关链接）。

当我转到“查看应用时间线视图”链接时，它显示了我的个人时间线，为什么？

# android - 使用 SimpleAdapter 看不到 ListView

> ID：15054421
> 
> 赞同：0
> 
> 时间：2013-02-24T17:30:22.317
> 
> 标签：android, listview

我正在开发一个简单的应用程序，它由一个 ListView 和一个按钮组成。我看不到 ListView，但该按钮在我的活动中可见。我不知道发生了什么。请帮帮我。

我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/Add_Contact"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Add Contact" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    >
</ListView>

</LinearLayout> 
```

我的 MainActivity.java

公共类 MainActivity 扩展 Activity {

```
Button add_Contact;
ListView selectedList;
private ArrayList<SelectedListModel> selectedArrayList = new ArrayList<SelectedListModel>();
List<Map<String, String>> dataList;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    dataList = new ArrayList<Map<String, String>>();
    add_Contact = (Button)findViewById(R.id.Add_Contact);
    selectedList = (ListView)findViewById(R.id.listView1);

    add_Contact.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent in = new Intent(MainActivity.this,SecondActivity.class);
            //in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivityForResult(in, 1);

             }
    });

    //SimpleAdapter adpt = new SimpleAdapter(this, dataList, R.layout.simple, new String[]{"name","number"},new int[]{R.id.textView1, R.id.textView2});
    //selectedList.setAdapter(adpt);

    selectedList.setAdapter(new SimpleAdapter(this, dataList, android.R.layout.two_line_list_item, new String[] {"name", "number"}, new int[] {android.R.id.text1, android.R.id.text2}));

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == 1) {

         if(resultCode == RESULT_OK){

          selectedArrayList = data.getParcelableArrayListExtra("result");
          System.out.println("activity result called4 :"+selectedArrayList.size());
          Iterator<SelectedListModel> it = selectedArrayList.iterator();

            while (it.hasNext()){
                SelectedListModel selectedModel = (SelectedListModel)it.next();

                    String name1 = selectedModel.getName();
                    String number1 = selectedModel.getNumber();
                    Map<String, String> dict = new HashMap<String, String>(2);
                    dict.put("name", name1);
                    dict.put("number", number1);
                    dataList.add(dict);

            }

    }

    } 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:35:48.123

如果您传递的数组中没有数据，为什么会出现任何内容？我没有看到您向其中添加数据。如果在 之后添加数据，请`onClick()`尝试调用`adapter.notifyDataSetChanged()`告诉它已添加数据。

# windows - Delphi：带有自定义字体颜色的ListView（vsReport）单列标题标题？

> ID：15054423
> 
> 赞同：10
> 
> 时间：2013-02-24T17:30:24.857
> 
> 标签：windows, delphi, listview, delphi-xe2, columnheader

在带有 vsReport ViewStyle 的 ListView 中，如何自定义任何单个列标题标题的字体颜色？例如（第二列标题标题的字体颜色为红色）： ![在此处输入图像描述](../Images/c66abff5131e218d6f650fd823e20d18.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T21:19:41.747

我将处理标头通知代码，并在呈现阶段使用返回代码[`NM_CUSTOMDRAW`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775300%28v=vs.85%29.aspx)响应此通知消息。以下代码显示了如何扩展列表视图控件以具有指定标题项字体颜色的事件：`CDRF_NEWFONT``CDDS_ITEMPREPAINT`

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ComCtrls, CommCtrl, StdCtrls;

type
  TGetHeaderItemFontColorEvent = procedure(Sender: TCustomListView;
    ItemIndex: Integer; var FontColor: TColor) of object;
  TListView = class(ComCtrls.TListView)
  private
    FHeaderHandle: HWND;
    FOnGetHeaderItemFontColor: TGetHeaderItemFontColorEvent;
    procedure WMNotify(var AMessage: TWMNotify); message WM_NOTIFY;
  protected
    procedure CreateWnd; override;
  published
    property OnGetHeaderItemFontColor: TGetHeaderItemFontColorEvent read
      FOnGetHeaderItemFontColor write FOnGetHeaderItemFontColor;
  end;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    procedure FormCreate(Sender: TObject);
  private
    procedure GetHeaderItemFontColor(Sender: TCustomListView;
      ItemIndex: Integer; var FontColor: TColor);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TListView }

procedure TListView.CreateWnd;
begin
  inherited;
  FHeaderHandle := ListView_GetHeader(Handle);
end;

procedure TListView.WMNotify(var AMessage: TWMNotify);
var
  FontColor: TColor;
  NMCustomDraw: TNMCustomDraw;
begin
  if (AMessage.NMHdr.hwndFrom = FHeaderHandle) and
    (AMessage.NMHdr.code = NM_CUSTOMDRAW) then
  begin
    NMCustomDraw := PNMCustomDraw(TMessage(AMessage).LParam)^;
    case NMCustomDraw.dwDrawStage of
      CDDS_PREPAINT:
        AMessage.Result := CDRF_NOTIFYITEMDRAW;
      CDDS_ITEMPREPAINT:
      begin
        FontColor := Font.Color;
        if Assigned(FOnGetHeaderItemFontColor) then
          FOnGetHeaderItemFontColor(Self, NMCustomDraw.dwItemSpec, FontColor);
        SetTextColor(NMCustomDraw.hdc, ColorToRGB(FontColor));
        AMessage.Result := CDRF_NEWFONT;
      end;
    else
      AMessage.Result := CDRF_DODEFAULT;
    end;
  end
  else
    inherited;
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  ListView1.OnGetHeaderItemFontColor := GetHeaderItemFontColor;
end;

procedure TForm1.GetHeaderItemFontColor(Sender: TCustomListView;
  ItemIndex: Integer; var FontColor: TColor);
begin
  case ItemIndex of
    0: FontColor := clRed;
    1: FontColor := clGreen;
    2: FontColor := clBlue;
  end;
end;

end. 
```

[**您可以从这里下载**](https://code.google.com/p/projects-stackoverflow-tlama/downloads/detail?name=15054423.ZIP)整个项目。这是上面示例的结果：

![在此处输入图像描述](../Images/a7a9d243c3e2e07df6f7ee163be6f2ee.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T18:35:55.617

您可以从列表视图中获取本机标题控件，然后将列的特定项目标记为所有者绘制。您只需要在请求绘制标题项时更改文本颜色（如果您不删除*字符串标志）。*绘图消息将发送到标题的父级 - 列表视图，因此您需要在那里处理消息。有关所有者绘制的标题控件，请参见[此处](http://msdn.microsoft.com/en-us/library/bb775238.aspx#_win32_header_owner_draw)。

示例代码：

```
type
  TForm1 = class(TForm)
    ListView1: TListView;
    procedure FormCreate(Sender: TObject);
     ...
  private
    FLVHeader: HWND;
    FSaveLVWndProc: TWndMethod;
    procedure LVWndProc(var Msg: TMessage);
    procedure SetHeaderItemStyle(Index: Integer);
  end;

..
uses commctrl;
..

procedure TForm1.FormCreate(Sender: TObject);
begin
  FLVHeader := ListView_GetHeader(ListView1.Handle);
  SetHeaderItemStyle(1);

  FSaveLVWndProc := ListView1.WindowProc;
  ListView1.WindowProc := LVWndProc;
end;

procedure TForm1.SetHeaderItemStyle(Index: Integer);
var
  HeaderItem: THDItem;
begin
  HeaderItem.Mask := HDI_FORMAT or HDI_TEXT or HDI_LPARAM;
  Header_GetItem(FLVHeader, 1, HeaderItem);
  HeaderItem.Mask := HDI_FORMAT;
  HeaderItem.fmt := HeaderItem.fmt or HDF_OWNERDRAW;
  Header_SetItem(FLVHeader, 1, HeaderItem);
end;

procedure TForm1.LVWndProc(var Msg: TMessage);
begin
  FSaveLVWndProc(Msg);    // thanks to @Kobik (cause SO if called later then WM_NOTIFY case on some (all other then mine?) machines)

  case Msg.Msg of
    WM_DRAWITEM:
      if (TWmDrawItem(Msg).DrawItemStruct.CtlType = ODT_HEADER) and
          (TWmDrawItem(Msg).DrawItemStruct.hwndItem = FLVHeader) and
          (TWmDrawItem(Msg).DrawItemStruct.itemID = 1) then
        SetTextColor(TWmDrawItem(Msg).DrawItemStruct.hDC, ColorToRGB(clRed));
    WM_NOTIFY:
      if (TWMNotify(Msg).NMHdr.hwndFrom = FLVHeader) and
          (TWMNotify(Msg).NMHdr.code = HDN_ITEMCHANGED) then
          // also try 'HDN_ENDTRACK' if it doesn't work as expected
        SetHeaderItemStyle(1);
    WM_DESTROY: ListView1.WindowProc := FSaveLVWndProc;
  end;
end; 
```

# android - onGpsStatusChanged 从未调用过

> ID：15054425
> 
> 赞同：0
> 
> 时间：2013-02-24T17:30:29.840
> 
> 标签：android, android-location

我想知道我的 GPS 应用程序中的卫星数量。但不知何故，onGpsStatusChanged 函数永远不会被调用。

有任何想法吗？

```
private class MyGpsStatusListener implements android.location.GpsStatus.Listener
{

    @Override
    public void onGpsStatusChanged(int arg0) {

        String strGpsStats = "";

        GpsStatus gpsStatus = mLocationManager.getGpsStatus(null);
        if(gpsStatus != null) {
            Iterable<GpsSatellite>satellites = gpsStatus.getSatellites();
            Iterator<GpsSatellite>sat = satellites.iterator();
            int i=0;
            while (sat.hasNext()) {
                GpsSatellite satellite = sat.next();

                strGpsStats+= (i++) + ": " + satellite.getPrn() + "," + satellite.usedInFix() + "," + satellite.getSnr() + "," + satellite.getAzimuth() + "," + satellite.getElevation()+ "\n\n";
            }

            Toast.makeText(getBaseContext(), strGpsStats, Toast.LENGTH_LONG).show();
            Log.i(T, "GPS STATUS HAS CHANGED:" + strGpsStats);
        }
    }

} 
```

# azure - Windows Azure 和 Amazon AWS 之间的站点到站点 VPN

> ID：15054426
> 
> 赞同：4
> 
> 时间：2013-02-24T17:30:30.333
> 
> 标签：azure, amazon-web-services, amazon, vpn

我已经看到很多帖子提供了有关如何在本地网络上创建站点到站点 VPN 的指导，但是有谁知道如何在 Windows Azure 网络之间设置站点到站点 VPN和亚马逊私有云？在理想的世界中，无需在某处连接两个网络的设备就可以实现这一目标。我仍然在这里学习，所以任何帮助将不胜感激。

谢谢

乔普斯塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:40:27.100

首先，让我说我根本没有尝试过这个。你也许可以做到这一点，但看起来你可能会在这里开辟一条道路，所以期待一些问题和一些试验和错误。

正如您可能已经看到的那样，此处列出了支持的设备列表 [http://msdn.microsoft.com/en-us/library/windowsazure/jj156075#bkmk_untested](http://msdn.microsoft.com/en-us/library/windowsazure/jj156075#bkmk_untested)并且都是设备；但是，VPN必须做的要求如下：

*   VPN 设备必须具有面向公众的 IPv4 地址

    VPN 设备必须支持 IKEv1

    在隧道模式下建立 IPsec 安全关联

    VPN 设备必须支持 NAT-T

    VPN 设备必须支持“Group 2”模式下的 AES 128 位加密功能、SHA-1 散列功能和 Diffie-Hellman 完美前向保密

    VPN 设备必须在使用 VPN 标头封装之前对数据包进行分段

    必须允许 UDP 端口 500、UDP 端口 4500 和 ESP 数据包穿越网络边缘（在边缘打开 ACL 以允许这些协议/端口）

他们指出，虽然瞻博网络和思科设备是唯一受支持的设备，但他们不排除其他设备和/或软件解决方案也能正常工作。不支持其他选项，它们不会提供脚本和方便的分步说明来设置它们。如果您有足够的兴趣尝试让某些东西正常工作，并且不介意在出现问题时不获得支持，那么您可以从这里继续。

如果您能找到满足上述要求的软件 VPN 解决方案，那么您也许就能完成这项工作。这是一篇博客文章的链接，有人使用威胁管理网关 (TMG) 让它工作：[http ://blog.kloud.com.au/2012/07/25/windows-azure-virtual-network-vpn-与-tmg-2010/](http://blog.kloud.com.au/2012/07/25/windows-azure-virtual-network-vpn-with-tmg-2010/)。请注意，TMG 已停产，但至少这是某人使用软件 VPN 解决方案的示例，这是您方案中的第一步。

第二个障碍可能是您需要一个不在 NAT 后面的公共 IP。我对亚马逊不太熟悉，但我相信这意味着您可能希望查看 EIP（弹性 IP 地址），以便该 IP 是静态的、可公开寻址的，并且即使您必须停止或重新部署也将保持一致您的 EC2 实例。

我们的想法是获得满足上述要求的 VPN 软件解决方案，将其设置在具有 EIP 的 EC2 实例上，然后确定 Azure VPN 所需的配置。目前这是我能建议的最好的。如果你让它工作，你绝对应该写博客，因为对于那些出于各种原因想要跨越供应商的人来说，这确实是一个很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T04:09:37.363

您可以在 Azure 上设置“客户网关”服务器以连接到这样的 Amazon VPC，其中“您的数据中心或网络”的字样将是 Azure。

> [http://docs.aws.amazon.com/AmazonVPC/latest/NetworkAdminGuide/Introduction.html](http://docs.aws.amazon.com/AmazonVPC/latest/NetworkAdminGuide/Introduction.html)

或者，您可以像这样在 Amazon EC2 上设置 RRAS 服务器，其中“现场”指的是您的 Amazon VPC：

> [http://msdn.microsoft.com/en-us/library/dn636917.aspx](http://msdn.microsoft.com/en-us/library/dn636917.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T01:20:27.770

以下是如何设置它的非常详细的演练：

[https://blogs.technet.microsoft.com/canitpro/2016/01/11/step-by-step-connect-your-aws-and-azure-environments-with-a-vpn-tunnel/](https://blogs.technet.microsoft.com/canitpro/2016/01/11/step-by-step-connect-your-aws-and-azure-environments-with-a-vpn-tunnel/)

# php - 如何在 Code Igniter 中设置 Tank Auth 以处理域根目录中的所有登录/注册功能？

> ID：15054427
> 
> 赞同：1
> 
> 时间：2013-02-24T17:30:34.183
> 
> 标签：php, codeigniter, tankauth

经过一阵小小的头痛之后，我让 Tank Auth 在我的网站上完美运行。但是，它通过`auth`控制器中的函数完成所有工作，因此显示诸如`site.com/auth/login`、`site.com/auth/register`等路径。

我希望能够处理所有与登录和注册/激活相关的功能，而无需`www.site.com`向用户显示域根 ( ) 以外的任何内容。最好的方法是什么？

即使我将`auth`控制器设置为默认控制器，它也只运行索引函数（当然），然后`/auth/login/`无论如何都会重定向到。

请记住，我对 CI 不熟悉，所以可能有一种我不知道的简单方法。

我不记得我使用的是哪个版本的 CI，但我在几周前下载了它，所以它是最新的。与坦克身份验证相同。

**更新：**

我将条目添加到`routes.php`文件中，以便至少`/auth`部分 URL 不再存在：

```
$route['login'] = '/auth/login';
$route['register'] = '/auth/register';
$route['forgot_password'] = '/auth/forgot_password';
$route['reset_password/(:any)/(:any)'] = '/auth/reset_password';
$route['activate/(:any)/(:any)'] = '/auth/activate';
$route['reset_email/(:any)/(:any)'] = '/auth/reset_email'; 
```

所有视图/电子邮件/链接都可以正常工作，但是我不再收到与操作相关的任何消息。例如，当请求重置密码时，输入我的电子邮件后，我通常会收到一条消息，说要检查我的电子邮件。或者，当我注册时，我会收到一条消息，说我需要通过电子邮件激活......等等。我不太明白为什么我不再收到这些消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:20:35.440

按照对我发布的问题的更新中提到的设置路线，为我提供了一个可以接受的原始问题的解决方案，但随后带来了丢失消息的问题（也提到了）。我发现这是由于消息被设置为会话 flashdata，在下一次服务器请求后被清除。重新路由一定会导致 flashdata 被清除。

我通过将消息设置为常规会话用户数据而不是 flashdata 来解决此问题，然后在显示后手动清除它。

这似乎是一个可以接受的解决方案。

# java - 调整 .GIF 图像的大小

> ID：15054431
> 
> 赞同：2
> 
> 时间：2013-02-24T17:30:51.213
> 
> 标签：java, image, draw, gif, image-resizing

我有一个想要在 java 中调整大小的动画`.GIF`图像，但是在尝试使用传统方法时，它似乎不起作用：

```
ImageIcon esclamativoMid = null;
//... search my file...
if(name.equalsIgnoreCase("esclamativo.gif"))
    esclamativoMid = new ImageIcon(f.getAbsolutePath());
myEnumMap.put(Resolution.MID, esclamativoMid);

for(Resolution r: Resolution.values()){
    if(r != Resolution.MID){
        int w = esclamativoMid.getIconWidth()*(r.ordinal()+1)/2;
        int h = esclamativoMid.getIconHeight()*(r.ordinal()+1)/2;
        BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D)bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(esclamativoMid.getImage(), 0, 0, w, h, null);
        myEnumMap.put(r, new ImageIcon(bi));
    }
} 
```

当我尝试使用该代码显示图像时：

```
new JLabel(myEnumMap.get(currentRes)); 
```

我得到`.GIF`唯一的 if `Resolution.MID`（即直接从文件加载的图像）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:42:18.343

有一个用于 Java 的简单图像缩放库[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)。

该库实现了几种不同的图像缩放方法，如果您要求，它会为您选择最优化的方法，或者为您提供最快或最好看的方法（如果您要求的话）。

用法非常简单，只是一堆静态方法。最简单的用例是：

```
BufferedImage scaledImage = Scalr.resize(myImage, 200); 
```

所有操作都保持图像的原始比例，因此在这种情况下，您要求 imgscalr 在 200 像素宽和 200 像素高的范围内重新调整图像大小，默认情况下，它会自动选择最好看和最快的方法，因为没有指定。

# c++ - C++ 中的 jit 汇编器，使用 C 函数

> ID：15054432
> 
> 赞同：1
> 
> 时间：2013-02-24T17:30:52.953
> 
> 标签：c++, c, assembly, jit

我正在用 C++ 开发一个简单的 JIT 汇编系统，但是，我想在这个 jit 系统中调用 C 函数，所以，我的想法……我需要命令的指针……但是，我不需要知道我怎么能得到这个...

那是我的代码

```
#include <cstdio>
#include <vector>
#include <windows.h>

int Execute(std::vector<unsigned char> code)
{
    int eaxRegister;

    unsigned char* func = (unsigned char*)VirtualAlloc( 0, code.size() + 1, 0x1000, 0x40 );

    memcpy( func, code.data(), code.size() );
    func[code.size()] = 0xC3; // add the ret to the final of code final

    CallWindowProc( (WNDPROC)func, 0, 0, 0, 0 );

    _asm mov eaxRegister, eax;

    VirtualFree( func, code.size() + 1, 0x4000 );

    return eaxRegister;
}

int main()
{
    std::vector<unsigned char> code;

    //mov eax, 10
    code.push_back( 0xc7 );
    code.push_back( 0xc0 );
    code.push_back( 0xa );
    code.push_back( 0x0 );
    code.push_back( 0x0 );
    code.push_back( 0x0 );

    //mov ecx, 10
    code.push_back( 0xc7 );
    code.push_back( 0xc1 );
    code.push_back( 0xa );
    code.push_back( 0x0 );
    code.push_back( 0x0 );
    code.push_back( 0x0 );

    //add eax, ecx
    code.push_back( 0x3 );
    code.push_back( 0xc1 );

    // push MESSAGE
    const char* ohi = "HI";
    code.push_back( 0x69 );
    code.push_back( *ohi );

    // call prinf ?????
    code.push_back( 0xe8 );
    code.push_back( 0xfff/* offset of printf */ ) ;

    // add esp, 4
    code.push_back( 0x83 );
    code.push_back( 0xc4 );
    code.push_back( 0x04 );
    code.push_back( 0x0 );
    code.push_back( 0x0 );
    code.push_back( 0x0 );

    int exec = Execute( code );
    printf("SUM = %d", exec);

    return 0;
} 
```

所以，我的问题是，如何获取 printf 命令的偏移量以在 JIT 中使用，或者，如何使用 JIT 使用 C 函数？

谢谢亚历山大

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:33:47.063

`printf`（没有括号）将评估为函数的地址`printf`，所以你显然想要`code.push_back(printf);`

编辑：当然，由于您已将其定义`code`为简单的向量，因此无法按原样工作。您需要一次推回地址的单个字节。这是一个快速演示，展示了将其推回，然后打印出结果并显示它与将地址传递给 printf 并使用 %p 转换得到的结果几乎相同：

```
#include <vector>
#include <stdio.h>
#include <iostream>

int main() {
    std::vector<unsigned char> code;

    auto a = printf;
    char *p = (char *) &a;

    printf("%p\n", printf);

    for (int i=0; i<sizeof(a); i++)
        code.push_back(*p++);

    for (int i=0; i<code.size(); i++)
        std::cout << std::hex << (unsigned int)code[i] << " ";
    return 0;
} 
```

如您所见， %p 将整个指针一起显示，而这一次显示一个字节。在 Windows（小端硬件）上，这将导致字节顺序相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:15:25.867

正如 Jerry 所说，您只需使用函数的名称即可获取`extern "C"`函数的地址。问题是，仅仅把它放在你的代码流中对你没有好处——你需要生成一个实际的 CALL 指令。更糟糕的是，x86 (0xe8) 上的正常 CALL 指令使用 PC 相对寻址，您不能轻易使用它，因为您不知道代码最终会到达哪个地址（最终调用的值`VirtualAlloc`将返回）。您可以通过不使用 PC 相对寻址模式来解决此问题：

```
void gen_call(std::vector<unsigned char> &code, void *address) {
    // mov eax,address
    code.push_back(0xb8);
    code.push_back((uint32_t)address & 0xff);
    code.push_back(((uint32_t)address >> 8) & 0xff);
    code.push_back(((uint32_t)address >> 16) & 0xff);
    code.push_back(((uint32_t)address >> 24) & 0xff);
    // call eax
    code.push_back(0xff);
    code.push_back(0xd0);
} 
```

此外，您的“推送消息”代码是错误的——您正在推送消息的第一个字符，但您真正想要的是推送字符串的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:59:11.820

我已经解决了问题，我通过使用 reinterpret_cast

这是我的解决方案：

```
#include <cstdio>
#include <vector>
#include <windows.h>

using namespace std;

class Buffer: public vector<unsigned char>
{
public:
    void push_dword(DWORD dw)
    {
        push_back(dw);
        push_back(dw >> 8);
        push_back(dw >> 16);
        push_back(dw >> 24);
    }

    void push_ptr(const void *p)
    {
        push_dword(reinterpret_cast<DWORD>(p));
    }

    int Execute()
    {
        char *func = reinterpret_cast<char *>(VirtualAlloc(
            0, size() + 1, MEM_COMMIT, PAGE_EXECUTE_READWRITE ));

        memcpy( func, data(), size() );
        func[size()] = 0xC3; // add the ret to the final of code final

        int ret = (*reinterpret_cast<int(*)()>(func))();

        VirtualFree( func, 0, MEM_RELEASE );

        return ret;
    }
};

int main()
{
    Buffer code;

    // push MESSAGE
    const char* ohi = "HI\n";
    code.push_back( 0x68 );
    code.push_ptr( ohi );

    // mov eax, printf
    code.push_back( 0xb8 );
    code.push_ptr( reinterpret_cast<void *>(&printf) );

    // call eax
    code.push_back( 0xff );
    code.push_back( 0xd0 );

    // add esp, 4
    code.push_back( 0x83 );
    code.push_back( 0xc4 );
    code.push_back( 0x04 );

    int exec = code.Execute();
    printf("SUM = %d\n", exec);

    return 0;
} 
```

# javascript - 在 3D 中渲染正方形

> ID：15054433
> 
> 赞同：0
> 
> 时间：2013-02-24T17:30:58.100
> 
> 标签：javascript, canvas

考虑到正方形的位置（在本例中是一面墙）、“相机”的位置和旋转等因素，我知道如何计算渲染到 2D 画布时正方形的四个点应该在哪里.

然而，我不知道如何实际渲染正方形。如果我有一个图像，我如何绘制它以使其四个角位于我计算的四个点上？

* * *

更多信息：我实际上想要做的是在迷宫中渲染一个视图。我之前使用光线投射完成了这项工作，类似于 Doom 和 Wolfenstein 3D。然而，这只适用于较小的视图（320x240 是我选择的视图）。我想全屏渲染它。任何关于渲染这种场景（方形墙壁、基于精灵的对象等）的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:31:05.823

不完全确定，但我认为你要求的是这些方面的东西：

```
//Credit to Andrea "6502" Griffini.
//Pass context, image and points of triangle to draw
function textureMap(ctx, texture, pts) {
  var x0 = pts[0].x, x1 = pts[1].x, x2 = pts[2].x;
  var y0 = pts[0].y, y1 = pts[1].y, y2 = pts[2].y;
  var u0 = pts[0].u, u1 = pts[1].u, u2 = pts[2].u;
  var v0 = pts[0].v, v1 = pts[1].v, v2 = pts[2].v;

  ctx.save(); ctx.beginPath();
  ctx.moveTo(x0, y0);
  ctx.lineTo(x1, y1);
  ctx.lineTo(x2, y2);
  ctx.closePath(); ctx.clip();

  var delta = u0*v1 + v0*u2 + u1*v2 - v1*u2 - v0*u1 - u0*v2;
  var delta_a = x0*v1 + v0*x2 + x1*v2 - v1*x2 - v0*x1 - x0*v2;
  var delta_b = u0*x1 + x0*u2 + u1*x2 - x1*u2 - x0*u1 - u0*x2;
  var delta_c = u0*v1*x2 + v0*x1*u2 + x0*u1*v2 - x0*v1*u2 - v0*u1*x2 - u0*x1*v2;
  var delta_d = y0*v1 + v0*y2 + y1*v2 - v1*y2 - v0*y1 - y0*v2;
  var delta_e = u0*y1 + y0*u2 + u1*y2 - y1*u2 - y0*u1 - u0*y2;
  var delta_f = u0*v1*y2 + v0*y1*u2 + y0*u1*v2 - y0*v1*u2 - v0*u1*y2 - u0*y1*v2;

  ctx.transform(delta_a/delta, delta_d/delta, delta_b/delta, delta_e/delta, delta_c/delta, delta_f/delta);
  //Edit to allow for repeated image
  var x_max = Math.max(u0,u1,u2); var x_min = Math.min(u0,u1,u2);
  var y_max = Math.max(v0,v1,v2); var y_min = Math.min(v0,v1,v2);
  var x_iter = x_max-x_min; var y_iter = y_max-y_min;

  for (var x=0; x<x_iter; x+=texture.width) {
    for (var y=0; y<y_iter; y+=texture.height) {
      ctx.drawImage(texture, x, y);
    }
  }
  ctx.restore();
}; 
```

像右边的箱子一样渲染的效果在：[http ://www.placidcow.hostoi.com/pages/ExGl%20Crate.htm](http://www.placidcow.hostoi.com/pages/ExGl%20Crate.htm)

希望有所帮助！

# python - 如何在 Python 中打开外部程序中的文件？

> ID：15054434
> 
> 赞同：17
> 
> 时间：2013-02-24T17:31:00.610
> 
> 标签：python

我想知道如何根据文件的扩展名在记事本和图片查看器等程序中打开文件。我在 Windows 上使用 Python 3.3。

我做了一些研究，人们提到了一个名为 的模块`Image`，但是当我尝试导入这个模块时，我得到了一个 ImportError。

这是我到目前为止所拥有的：

```
def openFile():
    fileName = listbox_1.get(ACTIVE)
    if fileName.endswith(".jpg"):
        fileName.open() 
```

我还将有需要在记事本中打开的 HTML 和 JSON 文件。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-24T18:37:29.463

在 Windows 上，您可以使用[`os.startfile()`](http://docs.python.org/3/library/os.html#os.startfile)默认应用程序打开文件：

```
import os
os.startfile(filename) 
```

没有[`shutil.open()`](http://bugs.python.org/issue3177)跨平台的。最接近的近似值是[`webbrowser.open()`](http://docs.python.org/3/library/webbrowser#webbrowser.open)：

```
import webbrowser
webbrowser.open(filename) 
```

可能会`open`在 OS X、`os.startfile()`Windows`xdg-open`或 Linux 上的类似命令上使用自动命令。

如果你想运行一个特定的应用程序，那么你可以使用[`subprocess`模块](http://docs.python.org/3/library/subprocess)，例如，`Popen()`允许启动一个程序而不等待它完成：

```
import subprocess

p = subprocess.Popen(["notepad.exe", fileName])
# ... do other things while notepad is running
returncode = p.wait() # wait for notepad to exit 
```

有许多方法可以使用该`subprocess`模块来运行程序，例如，[`subprocess.check_call(command)`](http://docs.python.org/3/library/subprocess#subprocess.check_call)阻塞直到命令完成，如果命令以非零退出代码完成则引发异常。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-24T17:35:02.980

使用它来使用默认程序打开任何文件：

```
import os
def openFile():
    fileName = listbox_1.get(ACTIVE)
    os.system("start " + fileName) 
```

如果你真的想使用某个程序，比如记事本，你可以这样做：

```
import os
def openFile():
    fileName = listbox_1.get(ACTIVE)
    os.system("notepad.exe " + fileName) 
```

此外，如果您在打开文件之前需要一些 if 检查，请随时添加它们。这仅向您展示如何打开文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-24T18:15:34.107

用一个例子扩展 FatalError 的建议。

`subprocessing`使用而不是的另一个好处`os.system`是它使用相同的跨平台语法（`os.system`在 Windows 上需要一个“开始”在开头，而 OS X 需要一个“打开”。没什么大不了的，但要记住的事情少了） .

## 用 . 打开一个文件`subprocess.call`。

启动程序所需要做的就是调用`subprocess.call()`并传入一个`list`参数，其中第一个是程序的路径，其余的是要提供给正在启动的程序的附加参数。

例如，启动 Notepad.exe

```
import subprocess    

path_to_notepad = 'C:\\Windows\\System32\\notepad.exe'
path_to_file = 'C:\\Users\\Desktop\\hello.txt'

subprocess.call([path_to_notepad, path_to_file]) 
```

传递多个参数和路径同样简单。只需将其他项目添加到列表中。

* * *

### 使用多个参数启动

例如，这会使用 Java 运行时环境的特定副本启动 JAR 文件。

```
import subprocess
import os

current_path = os.getcwd()
subprocess.call([current_path + '/contents/home/bin/java', # Param 1
                    '-jar', #Param2
                    current_path + '/Whoo.jar']) #param3 
```

参数 1 针对我要启动的程序。Argument2 向该程序提供一个参数*，*告诉它它将运行一个 JAR，最后 Argument3 告诉目标程序在哪里找到要打开的文件。

# python - 有没有办法取消删除 Appengine 中的索引？

> ID：15054435
> 
> 赞同：2
> 
> 时间：2013-02-24T17:31:01.617
> 
> 标签：python, google-app-engine, indexing, gql

我从我的 Appengine python 项目中清除了一些不需要的索引，但删除了一个我不应该拥有的索引。当我现在尝试更新该索引时，我收到一条错误消息，提示“在完全删除之前无法（重新）构建正在删除的索引。” 该索引的删除已经运行了 12 多个小时，目前尚不清楚是否实际发生了任何事情。我看到索引有大约 600,000 个条目，大小为 80MB。

此删除需要多长时间？有没有办法尽快开始重建索引。在重建索引之前，我的应用程序的这一部分被有效地破坏了。

**更新 -**这个索引仍然不会删除，已经一整天了。我不得不关闭部分站点，因为我无法重建该索引。帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:36:54.480

您需要在此处打开生产问题：

[http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)

# ruby - 如何将页面添加到使用 Heroku 开发的应用程序中？

> ID：15054437
> 
> 赞同：0
> 
> 时间：2013-02-24T17:31:08.907
> 
> 标签：ruby, facebook, heroku

我是 Heroku 和 Ruby 的新手，刚刚使用 Heroku 创建了一个新的 Facebook 应用程序。

我使用 Git Bash 在本地分支中创建了 git 代码的克隆。之后，我在 index.rb 文件中进行了一些更改：我更改了应用程序的背景颜色，并将更新后的代码部署到 git，这些更改反映在应用程序中。

我在 index.rb 文件所在的文件夹中创建了一个简单的 HTML 文件。现在我添加了一个指向这个 HTML 文件的链接，`href="/samplehtmlPage.html"` 在 index.rb 文件中设置。我能够成功部署代码并且链接反映在我的应用程序中，但是当我单击它时出现“未找到”错误。

```
//inserted the below link after the body tag in the index.rb file
<a href="/samplehtmlPage.html">click here</a> 
```

有人可以帮我理解如何将 HTML 文件添加到 git，在 index.rb 中添加链接并重定向到新的 HTML 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:45:34.067

如果您使用 Ruby on Rails，您可以使用[redirect_to 方法](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)并将您的代码（或修改您的控制器）替换为以下内容：

```
<%= redirect_to "/samplehtmlPage.html" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:48:38.110

您是否使用过类似的东西：

```
git add samplehtmlPage.html 
```

在你的`git commit`和之前`git push`？

没有它，samplehtmlPage.html 将不会成为 repo 的一部分，也不会被推送。

# c++ - 如何读/写 ASCII .pgm 文件

> ID：15054442
> 
> 赞同：1
> 
> 时间：2013-02-24T17:31:48.783
> 
> 标签：c++, file, visual-c++, file-io, pgm

我是新手，对它不太了解。

我编写了一个代码，试图读取一个名为 ASCII .pgm 文件并将`owl.pgm`其写入`myowl.pgm`文件：

```
#include <fstream>
const int MAXHEIGHT=221;
unsigned char *bitmap[MAXHEIGHT]={'\0'} ;// pointers to each pixel row
int main()
{
    int width=201, height=221;
    std::ifstream ifile("owl.pgm",std::ios::in);
    std::ofstream ofile("myowl.pgm",std::ios::out);
    for(int i=0;i<height;++i)
    {
        for(int j=0;j<width;++j)
            ifile.read(bitmap[i][j],sizeof(bitmap));
    }
    ofile << "P2\n" << width << " " << height << "\n255\n";
    for(int i=0;i<height;++i)
    {
        for(int j=0;j<width;++j)
            ofile<<bitmap[i][j];
    }
} 
```

通过我的代码有一些错误。如果有人帮助我纠正它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:24:55.640

问题似乎在于您从输入文件中读取像素的方式：

```
std::ifstream ifile("owl.pgm",std::ios::in);
for(int i=0;i<height;++i)
{
    for(int j=0;j<width;++j)
        ifile.read(bitmap[i][j],sizeof(bitmap));
} 
```

**问题 1**：您需要确保您的程序不会将此文件的标题视为图像的实际像素。[请参阅PGM](http://paulbourke.net/dataformats/ppm/)的标头格式。在读取像素之前，您很可能必须跳过前 3 行。

**问题 2**：您试图一次读取整个位图，但您在嵌套循环中执行此操作，这显然意味着逐像素读取位图。

像素的读取可能看起来像这样：

```
for(int i = 0; i < height; ++i)
{
    for(int j = 0; j < width; ++j)
        ifile >> bitmap[i][j];
} 
```

# apache-flex - 如何在禁用的控件中获取 MOUSE_MOVE 事件（以允许工具提示）？

> ID：15054443
> 
> 赞同：0
> 
> 时间：2013-02-24T17:32:01.950
> 
> 标签：apache-flex, events, mouseevent, disabled-input

如果控件被禁用（例如，告诉用户如何启用它），我实际上想放置一个不同的工具提示，但第一步是在控件被禁用时获取 MOUSE_MOVE 事件，因为这是 ToolTipManager 启动工具提示的方式过程。

现在，SkinnableComponent 使用 .mouseEnabled 在禁用时关闭鼠标事件。我正在尝试破解它，以便它尊重显式的 .mouseEnabled，但在为向后兼容性而禁用时也会吃掉（或拒绝发送）所有鼠标事件。

有任何想法吗？评论？

更新：我将尝试使用皮肤作为包装。皮肤将是一个包含常规 TextInput 的 UIComponent。禁用时我仍然需要吃掉鼠标事件（为了兼容性），但是如果我`addEventListener()`在主机组件（不是皮肤）中覆盖并将引用复制到 ToolTipManager 的任何侦听器，我可以给它 MOUSE_OVER 和 MOUSE_OUT 事件。

这让我可以避免`UIComponent(this).enabled = value;`黑客攻击，这真的很困扰我。

# php - Verbatim PHP 代码适用于当前的实时站点，但不适用于新站点（本地或实时）

> ID：15054445
> 
> 赞同：0
> 
> 时间：2013-02-24T17:32:21.350
> 
> 标签：php, verbatim

> MySQL
> 
> 服务器：mysql.mysite.com 通过 TCP/IP 服务器版本：5.1.56-log 协议版本：10 用户：username@__.dreamhost.com MySQL 字符集：UTF-8 Unicode (utf8)
> 
> 网络服务器
> 
> Apache MySQL 客户端版本：5.1.66 PHP 扩展：mysql
> 
> phpMyAdmin
> 
> 版本信息：3.3.10.4

我现在不知所措。确切的代码目前正在实时站点上运行，但不适用于我正在设计的新站点。

```
<table>
    <tr bgcolor="#CCCCCC">

    <th>###</th>
    <th>Year</th>
    <th>Make</th>
    <th>Model</th>
    <th>Description</th>
    <th>Mileage</th>
    <th>Price</th>
    </tr>
<?

  $host = "mysql.mysite.com";
  $user = "username";
  $pass = "password";
  $dbname = "database";

  $connection = mysql_connect($host,$user,$pass) or die (mysql_errno().": ".mysql_error()."<BR>");
  mysql_select_db($dbname);

  $sql = "SELECT * FROM vehicles WHERE sold='n' ORDER BY year DESC";

  $query = mysql_query($sql);

  while ($row = mysql_fetch_array($query)) { 

    echo "<tr>
      <td></td>
      <td>",$row['year'],"</td>
      <td>",$row['make'],"</td>
      <td>",$row['model'],"</td>
      <td>",$row['dscrpt'],"</td>
      <td>",$row['miles'],"</td>
      <td>",'$',$row['price'],"</td>
      </tr>";
  }
  ?> 
</table> 
```

我在站点上收到以下结果，本地和加载到服务器上时：

> "); mysql_select_db($dbname); $sql = "SELECT * FROM vehicle WHERE sold='n' ORDER BY year DESC"; $query = mysql_query($sql); while ($row = mysql_fetch_array($query)) {回声“”；}？>
> 
> ### 年份 品牌 型号 描述 里程价格 ",$row['year']," ",$row['make']," ",$row['model']," ",$row['dscrpt']," ",$row['miles']," ",'$',$row['price'],"

我尝试了其他一些方法，包括 mysqli 方法，但它们都产生了相同的结果。任何连接都没有改变，当前连接/网页仍然返回数据。我会疯狂地查看代码并使用具有相同结果的不同代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:34:13.923

使用`<?php`而不是短打开标签`<?`。

# python - 如果嵌入了 Python，如何从 C 执行 .py 脚本？

> ID：15054446
> 
> 赞同：0
> 
> 时间：2013-02-24T17:32:25.103
> 
> 标签：python, c

我找不到这方面的相关信息。对于 lua，如果你想从 main() C 函数执行一个 test.lua 文件，你调用`lua_dofile("test.lua")`. 什么是 python 等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:36:29.060

如果要嵌入 Python，请使用[`PyRun_SimpleFile`](http://docs.python.org/2/c-api/veryhigh.html#PyRun_SimpleFile)：

```
FILE *fp = fopen("test.py", "r");
int ret = PyRun_SimpleFile(fp, "test.py");
if(ret < 0) {
    /* exception occurred */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:34:56.177

请查看[exec](http://linux.die.net/man/3/exec)的手册页- 有多种选项可以执行程序/脚本。[系统](http://linux.die.net/man/3/system)也可以是替代方案。

# objective-c - 带有声音剪辑的 UILabel 的顺序突出显示

> ID：15054447
> 
> 赞同：0
> 
> 时间：2013-02-24T17:32:30.500
> 
> 标签：objective-c, uilabel, highlighting

我一直在寻找这个问题的答案一段时间，但没有任何运气。

这就是问题所在：我有四个 UILabel，以及与它们一起使用的声音剪辑。我希望每个标签在播放声音剪辑时都显示突出显示的文本。

问题是当我在模拟器上测试它时，只有最后一个标签被突出显示。

以下是我尝试过的一些事情：

```
[self playSound:@"this"];
[thisLabel setTextColor:[UIColor orangeColor]];
sleep(1);
[self playSound:@"is"];
[thisLabel setTextColor:[UIColor blackColor]];
[isLabel setTextColor:[UIColor orangeColor]];
[self playSound:@"a"];
[isLabel setTextColor:[UIColor blackColor]];
[aLabel setTextColor:[UIColor orangeColor]];
[self playSound:@"word"];
[aLabel setTextColor:[UIColor blackColor]];
[currentWord setTextColor:[UIColor orangeColor]]; 
```

这是当我发现在模拟器中测试时只有最后一个标签会突出显示。

我尝试的下一件事是在 playSound 函数的末尾调用这个函数。

```
- (void)shiftHighlight:(NSString *)word
{
    UILabel *currentWord = [self currentWord];
    UILabel *thisLabel = [self thisLabel];
    UILabel *isLabel = [self isLabel];
    UILabel *aLabel = [self aLabel];
    if ([word isEqualToString:@"this"])
    {
        [thisLabel setHighlighted:YES];

        [isLabel setHighlighted:NO];
        [aLabel setHighlighted:NO];
        [currentWord setHighlighted:NO];
    } else if ([word isEqualToString:@"is"]) {
        [isLabel setHighlighted:YES];

        [thisLabel setHighlighted:NO];
        [aLabel setHighlighted:NO];
        [currentWord setHighlighted:NO];
    } else if ([word isEqualToString:@"a"]) {
        [aLabel setHighlighted:YES];

        [thisLabel setHighlighted:NO];
        [isLabel setHighlighted:NO];
        [currentWord setHighlighted:NO];
    } else {
        [currentWord setHighlighted:YES];

        [thisLabel setHighlighted:NO];
        [isLabel setHighlighted:NO];
        [aLabel setHighlighted:NO];
    }
} 
```

在其他地方将突出显示的文本的颜色设置为橙色。这与第一次尝试的效果相同。

最近我尝试对这个函数进行连续调用：

```
- (void)readSection:(NSString *)section
{
    [self playSound:section];
    [self shiftHighlight:section];
} 
```

我也尝试过用 NSTimers 做一些事情，但这变得非常混乱，似乎我在和他们一起吠叫错误的树。

在所有标签上启用行为。

所以，如果有人对我有解决方案，或者可以仔细解释如何使用 NSTimers 来解决这个问题，我会非常感谢她。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:42:54.073

在所有情况下，语句都不会等待声音完成播放，而是按照出现的顺序预先执行。最后执行的语句将是最终结果，即最终标签被突出显示。
如果您的 playSound 方法有办法传递回调块或在完成后执行的委托函数，那么您应该将逻辑写入高亮标签或播放下一个声音。

# android - 使用 AsyncTask 在 ListView 中加载图像有点慢

> ID：15054448
> 
> 赞同：0
> 
> 时间：2013-02-24T17:32:32.780
> 
> 标签：android, performance, optimization, android-listview, android-imageview

如何优化我的代码以快速加载图像？我的意思是在快速上下滚动后，需要几秒钟或更长时间才能将图像加载到`ImageView`my `ListView`. 这是我的适配器的示例代码：

```
public void bindView(View view, Context context, Cursor cursor) {
        String title = cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.TITLE));
        String album_id = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
        ImageView iv = (ImageView)view.findViewById(R.id.imgIcon);
        TextView text = (TextView)view.findViewById(R.id.txtTitle);
        text.setText(title);
        Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");
        Uri uri = ContentUris.withAppendedId(sArtworkUri, Integer.valueOf(album_id));
        iv.setTag(uri);
        iv.setImageResource(R.drawable.background_holo_dark);
        new MyImageLoader(context,view,iv,uri).execute(uri);

    }

private class MyImageLoader extends AsyncTask<Uri, Void, Bitmap>{
        Context context;
        View v;
        ImageView iv;
        Uri u;

        MyImageLoader(Context context,View v,ImageView iv,Uri u){
            this.context = context;
            this.v = v;
            this.iv = iv;   
            this.u = u;
        }
        protected synchronized Bitmap doInBackground(Uri... param) {
            ContentResolver res = context.getContentResolver();
            InputStream in = null;
            try {
                in = res.openInputStream(param[0]);
            } 
            catch (FileNotFoundException e) {

                e.printStackTrace();
            }
            Bitmap artwork = BitmapFactory.decodeStream(in);
            return artwork;
        }
        protected void onPostExecute(Bitmap bmp){
            if(bmp!=null)
            {   ImageView iv = (ImageView)v.findViewById(R.id.imgIcon);
                if(iv.getTag().toString().equals(u.toString()))
                    iv.setImageBitmap(bmp);
                    //iv.setImageBitmap(Bitmap.createScaledBitmap(bmp, 100, 100, false));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:53:03.007

我能想到的有两点：

1.  从 ICS 开始，AsyncTask 是一个单线程的事情，这意味着，如果你触发 10 个 AsyncTask，它将完成第一个，然后转到第二个，然后是第三个，总是等待其他人完成后再继续。您可以使用`.executeOnExecutor`它的方法来运行与更多线程并行的任务。

2.  使用 LruCache 对图像进行 RAM 缓存。这个[来自 Google IO 2012 的视频](http://www.youtube.com/watch?v=gbQb1PVjfqM)准确地展示了如何制作 LruCache（我总是建议人们观看整个视频，因为有很多很酷的技巧）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:06:02.167

尝试[`BitmapFun.zip`](http://developer.android.com/training/displaying-bitmaps/index.html)使用兼容性库在 Android 2.3 上效果很好！

或者，如果您不想要任何兼容性库，您可以尝试（旧版本）`ImageDownloader`：

*   [http://code.google.com/p/android-imagedownloader/](http://code.google.com/p/android-imagedownloader/)
*   [http://android-developers.blogspot.gr/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.gr/2010/07/multithreading-for-performance.html)

# ios - 在 iOS 上保存 NSManagedObjectContext 的快速和/或保存方法

> ID：15054451
> 
> 赞同：0
> 
> 时间：2013-02-24T17:32:49.797
> 
> 标签：ios, xcode, core-data, save, nsmanagedobjectcontext

我正在创建一个用于显示 Cora Data 对象的应用程序。该应用程序不应创建或删除实体，但我想让用户有机会将实体添加到他们的收藏夹中。为此，我添加了一个布尔“isFavorite”属性。当用户添加实体时，我会像这样更新它：

```
[_currentObject setValue:[NSNumber numberWithBool:YES] forKey:@"isFavorite"];
[_managedObjectContext refreshObject:_currentObject mergeChanges:YES]; 
```

当应用程序关闭时，我像这样保存上下文：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
     [self saveContext];
}

- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;

    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
             NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
    NSLog(@"save done...");
} 
```

效果很好，但问题是，完成保存大约需要 10 秒。当用户按下主页按钮然后关闭应用程序（双击主页按钮）时，上下文不会完全保存。

是否有更快（或保存）的方法来保存上下文？我不需要再次保存孔文件，只需保存已更改的对象...

我的文件是二进制文件，大小约为 5 MB，并且会随着添加更多数据而增加。

# python - 在 Windows 上使用 pyside 时加载光标错误

> ID：15054455
> 
> 赞同：0
> 
> 时间：2013-02-24T17:33:19.120
> 
> 标签：python, windows, python-3.x, pyqt, pyside

我的 Windows XP 上有 python 3.3 + PySide 1.1.2。足以显示错误的代码：

```
import sys
from PySide import QtGui

app = QtGui.QApplication(sys.argv)

wid = QtGui.QWidget()
wid.resize(250, 150)
wid.setWindowTitle('Simple')
wid.show()

sys.exit(app.exec_()) 
```

那么错误是什么？当我将它保存为“test.py”时，一切运行良好，但有不需要的控制台窗口。所以我将它保存为“test.pyw”以使用 pythonw 运行（所以没有控制台窗口）。问题是无论我做什么，在 15 秒内，光标都是加载光标。[显示它的图像](http://i.imgur.com/AZb4toA.jpg)

大约 15 秒后，光标恢复正常。它不能加载应用程序，因为 1) 它非常小 2) 使用 python 而不是 pythonw 运行它即使有一段时间也不会显示加载光标。

这是一个已知的错误吗？我该如何解决？这很烦人，我想用 pyside 创建一些简单的 GUI 工具，但是对于最终用户来说，这样的行为并不好看，我绝对不想要它。在 linux 上也没有加载光标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:20:46.500

这是 3.3 中的 python windows 启动器中的一个错误。我报告了它，它得到了修复。

# mysql - MySQL - 在分数表中为用户选择排名

> ID：15054456
> 
> 赞同：3
> 
> 时间：2013-02-24T17:33:22.053
> 
> 标签：mysql, ranking, subquery

我有一个具有该结构的“user_score”表：

```
|id|user_id|group_id|score|     timestamp      |
| 1|      1|       1|  500| 2013-02-24 18:00:00|
| 2|      2|       1|  200| 2013-02-24 18:01:50|
| 3|      1|       2|  100| 2013-02-24 18:06:00|
| 4|      1|       1| 6000| 2013-02-24 18:07:30| 
```

我需要做的是从该表中选择来自确切组的所有用户。选择他们在该组中的实际（根据时间戳）得分和排名。

我所拥有的是（*编辑：在 Jocachin 发表评论后，我发现我自己的查询没有按预期工作，对所有人感到抱歉*）：

```
SELECT user_id, score, @curRank := @curRank + 1 AS rank
FROM (
    SELECT * 
    FROM (
           SELECT * FROM `user_score`
           WHERE `group_id` = 1
           ORDER BY `timestamp` DESC
    ) AS sub2
    GROUP BY `user_id`
) AS sub, (SELECT @curRank := 0) r
ORDER BY `rank` 
```

示例数据和 group_id = 1 的预期结果：

```
|user_id|score|rank|
|      1| 6000|   1|
|      2|  200|   2| 
```

但是 MySQL 子选择有点问题，请问您还有其他解决方案吗？

稍后我可能需要在组中获得排名 od 单个用户。我现在迷路了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:50:48.817

尽管我不确定在这种情况下“有问题”是什么意思，但这里的查询被重写为`LEFT JOIN`带有子查询的普通查询，只是为了在最后获得正确的排名（`ORDER BY`需要在排名之前完成）；

```
SELECT user_id, score, @rank := @rank + 1 AS rank FROM
(
  SELECT u.user_id, u.score
  FROM user_score u
  LEFT JOIN user_score u2
    ON u.user_id=u2.user_id
   AND u.`timestamp` < u2.`timestamp`
  WHERE u2.`timestamp` IS NULL
  ORDER BY u.score DESC
) zz, (SELECT @rank := 0) z; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/c220b/28)。

编辑：要考虑 group_id ，您需要稍微扩展查询；

```
SELECT user_id, score, @rank := @rank + 1 AS rank FROM
(
  SELECT u.user_id, u.score
  FROM user_score u
  LEFT JOIN user_score u2
    ON u.user_id=u2.user_id
   AND u.group_id = u2.group_id       -- u and u2 have the same group
   AND u.`timestamp` < u2.`timestamp`
  WHERE u2.`timestamp` IS NULL
    AND u.group_id = 1                -- ...and that group is group 1
  ORDER BY u.score DESC
) zz, (SELECT @rank := 0) z; 
```

[另一个 SQLfiddle](http://sqlfiddle.com/#!2/c220b/43)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:35:20.503

我知道答案已发布并被接受，但我认为您的原始查询有一点值得一提。

分组依据时，只能选择分组依据的列以及具有 MAX 和 COUNT 等聚合函数的列。选择其他列在技术上是错误的。

这是有道理的，因为不清楚应该返回哪一行的数据。mysql返回group by中第一行的数据；这就是您的查询有效的原因（因为内部子查询中按时间戳排序）。另一方面，SQL 服务器引发异常。

我认为 SQL Server 方法是正确的，应该避免这种类型的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T17:51:36.817

```
SELECT user_id, score, @rank := @rank + 1 AS rank 
FROM 
(
    SELECT 
        user_id AS user_id, 
        SUBSTRING_INDEX(GROUP_CONCAT(score ORDER BY timestamp DESC), ',', 1) 
            AS score 
    FROM user_score 
    WHERE group_id=1 
    GROUP BY user_id
) AS u, 
(
    SELECT @rank := 0
) AS r
ORDER BY score DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-29T18:53:45.340

我今天遇到了类似的问题，在尝试实现接受的答案失败后，我做了这个更简单的查询

```
SELECT user_score.user_id, 
       MAX(user_score.score) AS score
FROM user_score 
WHERE user_score.group_id = 1 
GROUP BY user_score.user_id, 
         user_score.group_id
ORDER BY user_score.score DESC, 
         user_score.`timestamp` ASC 
```

# java - commandButton actionListener 调用 selectOneMenu 监听器

> ID：15054465
> 
> 赞同：0
> 
> 时间：2013-02-24T17:34:47.200
> 
> 标签：java, jsf, jsf-2

我正在使用 JSF 2.0 和 Primefaces 3.4.2

我有一个弹出对话框，其中很少有`inputText`,和`selectOneMenu``autoComplete``<p:commandButton`

我在 selectOneMenu 中有以下内容`<p:ajax update="dept" listener="#{empMB.loadDepartments}" />`

当我单击 commandButton 时，将调用 selectOneMenu 的侦听器和 Converter 类。我对 commandButton 的方法没有被调用。这可能是什么原因？

JSF 代码

```
 <p:dialog header="My Panel" style="font-weight:bold"
                    widgetVar="NewDialog" resizable="false" id="NewDlg"
                    showEffect="fade" hideEffect="fade" appendToBody="true"
                    modal="true" position="center top" width="850" height="450">
                    <h:form id="createform">                    
                    <p:panelGrid   columns="6">         

                        <h:outputLabel value="Employee # " for="emp" />
                        <p:autoComplete value="#{mymb.selectedEmployee}"
                            id="emp" minQueryLength="3" 
                            completeMethod="#{mymb.complete}" 
                            var="p" itemLabel="#{p.employeeName}" itemValue="#{p.employeeNumber}"                
                            forceSelection="true" >                           
                             <p:ajax event="itemSelect" listener="#{mymb.handleSelect}" 
                             update ="empnumber phone  /> 
                               <p:column>#{p.employeeName} - #{p.employeeNumber}</p:column>
                        </p:autoComplete>                         

                        <h:outputLabel  value="Department"  />
                        <p:inputText id="empnumber" value="#{mymb.employeeDetail.department}" >
                        </p:inputText>                        
                        <h:outputLabel value="Contact #" for="phone" />
                        <p:inputText id="phone" value="#{mymb.employeeDetail.phone}">
                        </p:inputText>
                        <h:outputLabel value="Employee Number" for="employeenumber" />
                        <p:inputText id="employeenumber" value="#{mymb.employeeDetail.employeeNumber}">
                        </p:inputText>                        
                    </p:panelGrid>
                    <p:separator />
                    <p:panelGrid columns="6">
                        <h:outputLabel value="Employees" for="employees" />
    <h:selectOneMenu id="employees" value="#{empMB.employees}" converter="#{employeesConverter}">
    <f:selectItems value="#{empMB.employeesItems}" var="cat"
    itemLabel="#{cat.employeesName}" itemValue="#{cat.employeesCode}"/>
    <p:ajax update="dept" listener="#{empMB.loadDepartments}" />
</h:selectOneMenu>
<h:outputLabel value="Dept employees" for="dept" />
<p:selectOneMenu id="dept" value="#{empMB.department}">
    <f:selectItems value="#{empMB.departmentList}" var="dep" 
    itemLabel="#{dep.departmentName}"
    itemValue="#{dep.departmentCode}" />
</p:selectOneMenu>

                <p:commandButton value="Save" icon="ui-icon-check" style="margin:0" 
                actionListener="#{empMB.saveRequest}" />

                    </p:panelGrid>
                    <p:separator />
                    </h:form>
                   </p:dialog> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:58:45.587

当您处理整个表单时，JSF 可能无法设置某些字段，例如部门或其他字段。可能类型错误，或者转换器失败。添加`p:message`表单并更新它`process="@this"`，您可能会看到一些东西。

# iphone - 如何清除 UIWebView 缓存

> ID：15054472
> 
> 赞同：2
> 
> 时间：2013-02-24T17:35:14.740
> 
> 标签：iphone, xcode, ios6, browser-cache

如何清除 UIWebView 的缓存？

我正在制作一个简单的应用程序（只有三个按钮（后退、前进、刷新）和一个 UIWebView），我意识到在我的文档和数据中 iPhone 获得了非常高的缓存值。我已经查看了各种文档和帖子（甚至在 StackOverflow 上），但都没有解决问题。如果您需要代码行，请询问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T18:01:55.800

```
[[NSURLCache sharedURLCache] removeCachedResponseForRequest:NSURLRequest]; 
```

这将删除特定请求的缓存响应。还有一个调用将删除 UIWebView 上运行的所有请求的所有缓存响应：

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

之后，您可以尝试使用 UIWebView 删除任何关联的 cookie：

```
for(NSHTTPCookie *cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {

    if([[cookie domain] isEqualToString:someNSStringUrlDomain]) {

        [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:56:37.200

它是如此简单

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

# java - 私有方法的 Junit 测试

> ID：15054473
> 
> 赞同：2
> 
> 时间：2013-02-24T17:35:21.713
> 
> 标签：java, reflection, junit

我正在尝试编写一个实用方法来允许在被测类中轻松调用私有方法。我所拥有的是：

```
private Object callPrivateMethod(String methodName, Object subject, Object... parameters) {

    try {
        Class<?>[] paramTypes = new Class<?>[parameters.length];
        for (int index=0; index<parameters.length; index++) {
            paramTypes[index] = parameters[index].getClass();
        }
        Method method = subject.getClass().getDeclaredMethod(methodName, paramTypes);
        method.setAccessible(true);
        return method.invoke(subject, parameters);
    } catch (Exception e) {
        e.printStackTrace();
        fail(e.getMessage());
        return null;
    }
} 
```

但是当我尝试使用此代码调用它时：

```
List<Session> sessions = new ArrayList<Session>();
// fill the array list
String sessionLines = (String) callPrivateMethod("getSessionsForEmail", emailSender, sessions); 
```

我得到这个例外：

```
java.lang.NoSuchMethodException: staffing.server.email.EmailSender.getSessionsForEmail(java.util.ArrayList) 
```

EmailSender（被测类）中的方法签名如下所示：

```
private String getSessionsForEmail(List<Session> sessions) {
   //do stuff
} 
```

试图弄清楚为什么反射找不到方法。与 List 和 ArrayList 不是完全相同的类有关吗？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T17:41:41.110

最好不要直接测试私有方法。通过通过公共和/或受保护的方法访问它们，我们正在测试系统在生产中的行为方式。这种方法还允许您通过公共/受保护方法发送所有数据组合来管理测试覆盖率。

可以通过在测试源文件夹中具有相同的包名称来测试受保护的方法。

如果测试私有方法是必须的，那么与其自己进行反射，不如使用 Powermock 等模拟工具，最好使用 Mockito。这两个工具都与 JUnit 有很好的集成。这是一个陡峭的学习曲线，但非常值得投资。这里有更多细节：[Testing Private method using mockito](https://stackoverflow.com/questions/8799439/testing-private-method-using-mockito)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T17:43:31.400

您的代码试图找到一个将`ArrayList`（的具体类`sessions`）作为参数的方法。但是您的方法不接受`ArrayList`as 参数。它需要一个`List`as 参数。

除了参数的值之外，您还需要传递方法的参数类型。

或者您可以重构代码并使方法受保护或受包保护，或者将其作为公共方法放入另一个协作类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:48:32.387

当前的推理表明您不应该测试私有方法。它们要么是特定于实现的，并且应该通过调用它们的方法进行测试。或者应该将它们提取到自己的类中并通过它进行测试。想法是，如果你有很多私有方法需要单独测试，那么你的类做的太多，应该被分解。

以这种方式看待它有很多好处，最重要的是避免不得不破解你的类来测试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:11:16.803

如果您真的想通过自己的实现取得成功，我觉得看看：[Java 中的类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)可能会很有用。

否则，正如 Akber Choudhry 指出的那样，Mockito 附带了一个不错的实用程序包，称为 org.powermock.reflect.Whitebox。我肯定会使用它。

最后，我不会说永远不要测试私有方法，但如果你打算测试它们，请三思。维护基于反射的方法并不是最简单的事情，而且很容易出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-28T06:22:39.693

这可以通过**JUnit4 + Mockito**来完成。

要模拟私有方法，我们可以简单地使用 mockit.Deencapsulation 包：

```
Deencapsulation.invoke(myService, "methodName", arg1, arg2); 
```

我们可以根据要求用 Mockito.anyString() 等替换参数。

# javascript - 用javascript而不是css添加链接悬停颜色

> ID：15054480
> 
> 赞同：0
> 
> 时间：2013-02-24T17:36:03.253
> 
> 标签：javascript, hyperlink, hover

我将 typeface.js 用于我网站上的几行文本，因为我在让想要的字体在所有浏览器中工作时遇到了一些问题。使用这个常规的 a:hover 或类似的 CSS 是无效的，但我已经设法删除了下划线。

我正在寻找一种在 js 中执行此操作的方法，并尝试了该论坛提供的方法，尤其是[这个](https://stackoverflow.com/questions/10431046/changing-link-color-in-javascript-rather-than-csshover-works-in-jsfiddle-n).

我对js相当陌生，但尽我所能。任何帮助表示赞赏，如果您有其他建议，我会向他们开放！

手风琴菜单的 HTML

```
<div class="mH"
onclick="toggleMenu('menu1')">PORTFOLIO</div>
<div id="menu1" class="mL">
<a class="mO" href="pages/portraits.html">portraits</a>
<a class="mO" href="pages/thezoo.html">the zoo</a>
</div>

<div class="mH"
onclick="toggleMenu('menu2')">COMMERCIAL</div>
<div id="menu2" class="mL">
<a class="mO" href="pages/video.html">video</a>
<a class="mO" href="pages/photography.html">photography</a>
<a class="mO" href="pages/designillustration.html">design & illustration</a>
</div>

<div class="mH"
onclick="toggleMenu('menu3')">TRAVEL</div>
<div id="menu3" class="mL">
<a class="mO" href="pages/tanzania.html">tanzania</a>
</div>

</div> 
```

手风琴菜单的 JS
`function toggleMenu(objID) { if (!document.getElementById) return; var ob = document.getElementById(objID).style; ob.display = (ob.display == 'block')?'none': 'block'; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:30:27.443

这个问题作为问题本身没有得到解答，但还有其他更好的解决方案。我只是不认识他们。

正如@boomerang 上面评论的那样，最终使用了字体。

# android - 没有（或最少）全局广播的 Android 小部件交互

> ID：15054481
> 
> 赞同：3
> 
> 时间：2013-02-24T17:36:12.617
> 
> 标签：android, android-widget, static-members, android-broadcast

我已经对此进行了广泛的搜索，但找不到任何关于此的讨论。

看来（如果我错了，请纠正我）Android AppWidgets（主屏幕小部件）没有通过 LocalBroadcastManager 接收本地应用程序广播。因此，要与小部件进行通信，我必须使用常规的系统范围广播。

许多来源建议仅使用本地广播以提高效率和安全性。我正在尝试找到一种与小部件进行通信的好方法，同时尽量减少全球广播的使用。

请让我知道在解决此问题时需要探索的任何建议或要检查的资源，并对我的暂定计划发表评论：

我目前的计划是将所有消息最小化为一条消息“WIDGET_NEEDS_UPDATE”。这基本上会“戳”小部件并告诉它查找更新信息。

我将把更新信息作为我的 AppWidgetProvider 的静态成员。因此，小部件将收到此消息，然后从这些静态成员读取操作和执行操作所需的任何数据。

这看起来合理吗？

我还不确定的一件事是静态成员的生命周期：只要应用程序活动或服务正在运行，我就可以保证可以访问这些静态成员吗​​？

非常感谢您的见解和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:15:39.390

> 看来（如果我错了，请纠正我）Android AppWidgets（主屏幕小部件）没有通过 LocalBroadcastManager 接收本地应用程序广播。因此，要与小部件进行通信，我必须使用常规的系统范围广播。

需要`AppWidgetProvider`响应系统发送的广播，例如在首次添加应用小部件时填充应用小部件的内容 ( `ACTION_APPWIDGET_UPDATE`)。

但是，您的代码`AppWidgetProvider`（`AppWidgetManager`超出`updateAppWidget()`. 何时推送这些更新取决于您，并且可以想象`LocalBroadcastManager`（或 Otto 或其他消息总线实现）可以发挥作用。

> 许多来源建议仅使用本地广播以提高效率和安全性。

本质上，应用小部件既不高效也不安全。如果您想要效率，请确保不要经常更新应用小部件。如果您想要安全，请不要实现应用小部件。

“许多来源”为您提供一般建议，主要是针对*您*是发送者并且*您*是那些广播的接收者以在应用程序组件之间进行通信的情况。本地广播对于进程间通信是无用的，而应用小部件是基于进程间通信的。您的进程正在通过 OS 系统进程与主屏幕进程通信，以将您的更改显示在主屏幕上。

IOW，仅仅因为“许多来源”告诉你少吃，不要完全停止进食，因为这通常会导致问题。:-)

> 我正在尝试找到一种与小部件进行通信的好方法，同时尽量减少全球广播的使用。

您不会“与小部件通信”。最多，您可能会与您的`AppWidgetProvider`. 应用程序小部件本身是一组由主屏幕呈现的像素。

您无法摆脱系统广播（“全局广播”），因为无论您喜欢与否，操作系统都会发送它们，并且您需要它们才能使应用小部件工作。

> 我目前的计划是将所有消息最小化为一条消息“WIDGET_NEEDS_UPDATE”。

这需要你重写Android操作系统，因为操作系统没有这个广播的概念，`AppWidgetProvider`不管你喜欢与否，它都会发送标准广播。同样，您*需要*那些系统广播，否则您的应用小部件无法添加到屏幕上。

> 这基本上会“戳”小部件并告诉它查找更新信息。

仅通过`AppWidgetManager`.

> 这看起来合理吗？

您并没有明显提高安全性或效率。

> 我还不确定的一件事是静态成员的生命周期：只要应用程序活动或服务正在运行，我就可以保证可以访问这些静态成员吗​​？

不会。静态数据成员将一直存在，直到进程终止，对于不再处于前台的进程，这可能随时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T13:41:55.877

我还需要向我的小部件发送安全广播。我的解决方案是在清单中声明第二个接收者：

```
<receiver android:name="com.yourpackage.widget.WidgetProvider" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" />
    </receiver>
    <receiver
        android:name="com.yourpackage.widget.CustomReceiver"
        android:enabled="true"
        android:permission="com.youurpackage.appname.PERMISSION" >
        <intent-filter>
         <action android:name="com.youurpackage.appname.INIT_DONE" />
        </intent-filter>
    </receiver> 
```

接收器类如下所示：

```
@Override
public void onReceive(Context context, Intent intent) {        
    if (intent.getAction().equals("com.youurpackage.appname.INIT_DONE")) {
        int[] ids = AppWidgetManager.getInstance(context).getAppWidgetIds(new ComponentName(context, WidgetProvider.class));
        for (int widgetId : ids) {                
            AppWidgetManager.getInstance(context).updateAppWidget(widgetId, new RemoteViews(context.getPackageName(), R.layout.widget_layout));
            WidgetProvider.updateWidgetData(context, widgetId);
        }
    }
} 
```

您还必须在清单中声明权限：

```
<permission
    android:name="com.youurpackage.appname.PERMISSION"
    android:description="@string/permission_description"
    android:label="@string/permission_name"
    android:protectionLevel="signature" >
</permission> 
```

只有您的应用才能发送具有此权限的广播。您可以发送广播 `sendBroadcast(new Intent("com.youurpackage.appname.INIT_DONE"), "com.youurpackage.appname.PERMISSION");`

请让我知道这个解释是否足以理解我的建议。

# jquery - 使用ajax时codeigniter控制器未运行

> ID：15054483
> 
> 赞同：0
> 
> 时间：2013-02-24T17:36:32.273
> 
> 标签：jquery, ajax, codeigniter, view, controller

这个问题也和我之前的帖子有关

[jquery ajax表单提交不能与codeigniter一起使用，但可以正常工作](https://stackoverflow.com/questions/15053338/jquery-ajax-form-submit-not-working-with-codeigniter-but-working-otherwise)

我想在不加载新的 php 页面的情况下提交表单。我正在使用代码点火器。当我使用预定义的值运行控制器时，它工作正常并将值插入数据库中。但是当我运行 ajax 时，我的控制器没有运行或没有被调用。这是我的代码：-

```
<script language='JavaScript' type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<script>
    $('#submit_article').click(function(){

        var article_title = document.getElementById("title").value;
        var article_body = document.getElementById("body").value;

        $.ajax({
            url: '<?php echo base_url()."/main/submit_article";?>',
            type: 'POST',
            dataType: 'json',
            data: 'title='+article_title + '&body='+article_body,
            success: function(output_string){
                $('#result_table').append(output_string);
            }
        });
    });
</script>

<form name="article_form" method="POST" action="">
<input type="text" name="title" id="title" placeholder="Title for your article" />
<br>
<textarea rows="12" name="body" id="body" placeholder="Tell your story"></textarea>
<br>
<input type="submit" name="submit_article" id="submit_article" value="Post" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:51:01.570

尝试这个：

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<script type="text/javascript">
    $('#submit_article').click(function(e){
       e.prevenDefault();
       $.post(
         '<?php echo site_url("main/submit_article");?>',
         $('#article_form').serialize()
       ).success(function(resp) {
          $('#result_table').append(output_string);
       });
    });
</script>

<form id="article_form" method="post" action="<?php echo site_url('main/submit_article');?>">
    <input type="text" name="title" id="title" placeholder="Title for your article" />
    <br>
    <textarea rows="12" name="body" id="body" placeholder="Tell your story"></textarea>
    <br>
    <input type="submit" id="submit_article" value="Post" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:04:23.773

试试这样的代码。更改提交到按钮

```
<script language='JavaScript' type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<script>
    $('#submit_article').click(function(){
       $.ajax({
            url: $('#article_form').attr('url'),
            type: 'POST',
            dataType: 'json',
            data: $('#article_form').serialize(),
            success: function(output_string){
                $('#result_table').append(output_string);
            }
        });
    });
</script>

<form name="article_form" method="POST" action="<?php echo site_url('main/submit_article');?>">
    <input type="text" name="title" id="title" placeholder="Title for your article" />
    <br>
    <textarea rows="12" name="body" id="body" placeholder="Tell your story"></textarea>
    <br>
    <input type="button" id="submit_article" value="Post" />
</form> 
```

# javascript - 为什么我的引导弹出窗口不显示？

> ID：15054484
> 
> 赞同：2
> 
> 时间：2013-02-24T17:36:34.877
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我在引导程序中创建了一个**静态弹出窗口**，但它不起作用

一些html代码：

```
<div class="container row-fluid" >
<div class="span8 offset2">
    <div class="hero-unit">
        <h1 class="hidden-phone">Heading</h1>
        <div class="row-fluid">
            <div class="span5" style="margin-top:30px;">
                <div class="popover left" id="welcome">
                    <div class="arrow"></div>
                    <h3 class="popover-title">To ALL:</h3>
                    <div class="popover-content">
                        <p>count and</p>                
                        <p>。。。&lt;/p>  
                    </div>
                </div>
            </div>
            <div class="span6">
                <img src="img/welcome/1.jpg" class="img-circle img-polaroid pull-right hidden-phone" />
            </div>
        </div>
        <a class="btn btn-primary btn-large" href="#">TEST NOW!</a>
    </div>
</div> 
```

我所有的js代码：

```
$('#welcome').popover(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T08:22:04.607

我正在给出一个示例代码。

html:

```
<span class="giverscore_tooltip">Example</span> 
```

JS：

```
jQuery(document).ready(function() {
     $('.giverscore_tooltip').popover({
        trigger:'hover',
        content:'write a review, create a keyword, invite a friend, and more.',
        placement:'top'
    });
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T03:31:59.973

我可以看到，出了什么问题。您所指的代码是在您在按钮上创建弹出框时生成的。

[使用可以编辑](http://jsfiddle.net/shail/DJtsa/4/)的工作按钮 Jsfiddle 检查 JS fiddle

签入浏览器浏览[器并测试按钮](http://jsfiddle.net/shail/DJtsa/4/show) ![生成的html截图](../Images/8c9cc3bc80db295af12eec7495355d35.png)

第 1 节：

```
<div class="popover left" ">
                <div class="arrow"></div>
                <h3 class="popover-title">To ALL:</h3>
                <div class="popover-content">
                    <p>count and</p>                
                    <p>。。。&lt;/p>  
                </div>
              </div> 
```

因此，例如，您想在弹出窗口中创建上述内容，您必须执行以下操作：

```
<a id="pop" title="" data-content="<p>Content and</p><p> Vivamus sagittis lacus vel augue laoreet rutrum faucibus.</p>" data-placement="left" data-toggle="popover" class="btn" href="#" data-original-title="Popover on left" data-html="true">Try me</a> 
```

因此，当您单击此按钮时，第 1 节中的上述代码将生成 . 还要记住如果你想使用 html 内容集`data-html="true"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:06:50.500

您必须将弹出框功能应用于按钮，而不是内容。

```
$('.btn').popover(); 
```

这仍然不能完全解决问题，因为您还没有将您的内容 div 与此按钮相关联，但这是一个开始。

更新：在更好地了解了 OP 之后，我认为它可以通过在初始化后显示弹出框来完成：

```
$(div#welcome').popover();
$('div#welcome').show(); 
```

然而，这是一种非常迂回的方式，只不过是对像弹出框这样的元素进行样式设置。它真的应该单独使用 CSS 来完成。

# functional-programming - 这被认为是一个咖喱函数吗？

> ID：15054488
> 
> 赞同：3
> 
> 时间：2013-02-24T17:36:49.137
> 
> 标签：functional-programming, sml, currying

我仍然对咖喱有点困惑 -

我在 SML 中有一个 map 的实现，这被认为是一个 curried 函数吗？

```
fun mymap f xs = List.foldr (fn (x, l) => (f x)::l) [] xs; 
```

还是我需要更明确地强制执行单个参数传递？

```
fun mymap f = (fn xs => List.foldr (fn (x, l) => (f x)::l) [] xs); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:40:09.507

是的，这两个函数都是柯里化的。事实上，第一个函数是第二个函数的简写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:26:30.300

亚当已经回答了这个问题，但我想教你钓鱼。

每次您在 SML 解释器中键入函数时，都会收到带有函数类型签名的响应。这是第一个：

```
- fun mymap f xs = List.foldr (fn (x, l) => (f x)::l) [] xs;
val mymap = fn : ('a -> 'b) -> 'a list -> 'b list 
```

这是第二个：

```
- fun mymap f = (fn xs => List.foldr (fn (x, l) => (f x)::l) [] xs);
val mymap = fn : ('a -> 'b) -> 'a list -> 'b list 
```

我们注意到的第一件事是它们具有相同的类型签名，这与第二个是第一个的脱糖形式的说法一致。

根据签名，`mymap`采用从一种类型映射到另一种类型的函数。让我们尝试使用`Int.toString`：

```
- mymap Int.toString;
val it = fn : int list -> string list 
```

我们刚刚完成了`mymap`函数的部分应用，这只是因为`mymap`它是一个柯里化函数。

相比之下，让我们看看`mymap`没有咖喱的版本会发生什么。

```
- fun mymapUncurried (f,xs) = List.foldr (fn (x, l) => (f x)::l) [] xs;
val mymapUncurried = fn : ('a -> 'b) * 'a list -> 'b list 
```

这与您的第一个函数相同，只是参数包含在一个元组中。结果，类型签名也不同（见`*`？）。 `mymapUncurried`接受一个 2 元组，其第一个元素具有 type `('a -> 'b)`，其第二个参数具有 type `'a list`。现在部分应用程序不起作用：

```
- mymapUncurried Int.toString;
stdIn:9.1-9.28 Error: operator and operand don't agree [tycon mismatch]
  operator domain: ('Z -> 'Y) * 'Z list
  operand:         int -> string
  in expression:
    mymapUncurried Int.toString 
```

但是，完整的应用程序确实有效。只是不要忘记将参数作为元组传递：

```
- mymapUncurried (Int.toString, [1,2,3]);
val it = ["1","2","3"] : string list 
```

# .net - 为什么 Visual Studio 2012 调试器恢复

> ID：15054492
> 
> 赞同：1
> 
> 时间：2013-02-24T17:36:57.483
> 
> 标签：.net, visual-studio-2010, debugging, visual-studio-2012, visual-studio-debugging

我想知道是否有人看到过这种行为（并且知道如何解决它）：

使用 Visual Studio 2012 Update 1 进行调试时，调试器会在进入时随机恢复执行（例如按 F5 或点击播放）。我使用了许多视觉工作室版本，这是我第一次看到这种情况发生。

这是本地调试，没有服务或远程调试，只是普通的旧本地单线程winform。我的符号已完全加载并且是最新的，“只是我的代码”选项被禁用，我已经清理并重建了解决方案。

这很烦人，所以任何输入都会受到赞赏。

# cakephp - cakephp 模型关联（查看）

> ID：15054493
> 
> 赞同：0
> 
> 时间：2013-02-24T17:37:00.980
> 
> 标签：cakephp

在 cakephp 中，我有代码集和代码集项。codesetitems 属于 codesets 所以在我的 codesetitems 中我有 belongsTo = 'Codeset'。但在我看来，我似乎无法调用 $codeset['Codesetitem']['id']。它说未定义的索引代码集。我已经查看了蛋糕文档。一个代码集可以有许多代码集项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:02:14.947

关于如何`cakephp`处理和输出结果数组的说明。

为了获得相关的结果，您必须在每个模型中定义它，如下所示。

**代码集项目模型**

```
<?php
class CodesetItem extends AppModel
{
    var $name = 'CodesetItem';

    var $belongsTo = array
    (
        'Codeset' => array
        (
            'className' => 'Codeset',
            'foreignKey' => 'codeset_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );
}
?>
```

**代码集模型**

```
<?php
class Codeset extends AppModel
{
    var $name = 'Codeset';

    var $hasMany = array
    (
        'CodesetItem' => array
        (
            'className' => 'CodesetItem',
            'foreignKey' => 'codeset_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );
}
?>
```

**代码集控制器**

```
<?php
class CodesetsController extends AppController
{
    var $name = 'Codesets';

    function beforeFilter()
    {
        parent::beforeFilter();
    }

    function index()
    {
        $codesets = $this->Codeset->find('first');
        pr($codesets);
        exit;
    }
}
?>
```

上面将输出索引为 0 的代码集数组，含义如下

```
Array
(
    [Codeset] => Array
    (
        [id] => 121
        [name] => Gwoo the Kungwoo
        [created] => 2007-05-01 10:31:01
    )
    [CodesetItem] => Array
    (
        [0] => Array
            (
                [id] => 123
                [codeset_id] => 121
                [title] => On Gwoo the Kungwoo
                [body] => The Kungwooness is not so Gwooish
                [created] => 2006-05-01 10:31:01
            )
        [1] => Array
            (
                [id] => 124
                [codeset_id] => 123
                [title] => More on Gwoo
                [body] => But what of the ‘Nut?
                [created] => 2006-05-01 10:41:01
            )
    )
)
```

但是当你在 find 方法中使用 find('all') 时，它会如下所示。

```
Array
(
    [0] => Array
    (
        [Codeset] => Array
        (
            [id] => 121
            [name] => Gwoo the Kungwoo
            [created] => 2007-05-01 10:31:01
        )
        [CodesetItem] => Array
        (
            [0] => Array
                (
                    [id] => 123
                    [codeset_id] => 121
                    [title] => On Gwoo the Kungwoo
                    [body] => The Kungwooness is not so Gwooish
                    [created] => 2006-05-01 10:31:01
                )
            [1] => Array
                (
                    [id] => 124
                    [codeset_id] => 121
                    [title] => More on Gwoo
                    [body] => But what of the ‘Nut?
                    [created] => 2006-05-01 10:41:01
                )
        )
    )
    [1] => Array
    (
        [Codeset] => Array
        (
            [id] => 121
            [name] => Gwoo the Kungwoo
            [created] => 2007-05-01 10:31:01
        )
        [CodesetItem] => Array
        (
            [0] => Array
                (
                    [id] => 123
                    [codeset_id] => 121
                    [title] => On Gwoo the Kungwoo
                    [body] => The Kungwooness is not so Gwooish
                    [created] => 2006-05-01 10:31:01
                )
            [1] => Array
                (
                    [id] => 124
                    [codeset_id] => 121
                    [title] => More on Gwoo
                    [body] => But what of the ‘Nut?
                    [created] => 2006-05-01 10:41:01
                )
        )
    )
)
```

# php - 每次刷新网页时，添加的第一行都会被复制

> ID：15054496
> 
> 赞同：0
> 
> 时间：2013-02-24T17:37:25.830
> 
> 标签：php, header, duplicates

我正在创建一个小型评论系统，它将所有评论显示在彼此之上。问题是每次我按下提交按钮时，数据库中添加的第一行都是重复的。这导致显示很多相同的评论。我已经尝试使用标题并退出，但这也没有成功。可能与表单操作有关吗？提前致谢。

```
public function comment($username, $comment)
{
    if (!empty($username) && !empty($comment)) {
        $date = date("Y-m-d H:i:s");
        if ($insert = $this->db->prepare("INSERT INTO reviews (username, comment, time) VALUES (?, ?, ?)")) {
            $insert->bind_param('sss', $username, $comment, $date);
            $insert->execute();
        } else {
            echo "something is wrong with the query";
        }
    } else {
        echo "missing fields";
    }
} 
```

这是用法，表单在此下方回显，如您所见，我重定向以避免重复然后退出

```
$reizen = new reizen;
if (isset($_POST['submit'])) {
    $username = $_POST['username'];
    $comment  = $_POST['comment'];
    header("Location: index.php?" . $_SERVER['QUERY_STRING']);
    $reizen->comment($username, $comment);
    exit();
}
echo $reizen->retrieve(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:39:28.857

您需要使用[POST/REDIRECT/GET 模式](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)来防止这种情况。

# mysql - SQL 查询 INNER JOIN 与三个表

> ID：15054497
> 
> 赞同：0
> 
> 时间：2013-02-24T17:37:51.273
> 
> 标签：mysql, inner-join

有这三个表：

1.  帖子
2.  post_replies
3.  喜欢

这个查询正在返回我的帖子，他们的回复都很好。选择posts.title，posts.num，posts.status，posts.category，posts.content，posts.member_num，COUNT（posts_replies.blyrb_num）AS计数

```
FROM posts_replies
INNER JOIN posts ON ( posts_replies.blyrb_num = posts.num )
WHERE posts.status =1
AND posts.access = 'Public'
GROUP BY posts.num
ORDER BY count DESC
LIMIT 50 
```

此查询返回的记录是：47

这是一个更新的查询，我想提取帖子上每个回复的点赞数。

```
SELECT posts.title, posts.num, posts.status, posts.category, posts.content, posts.member_num, 
COUNT( posts_replies.blyrb_num ) AS count,
COUNT( likes.comment_num  ) AS likes_count
FROM posts_replies
INNER JOIN posts ON ( posts_replies.blyrb_num = posts.num )
INNER JOIN likes ON ( likes.comment_num = posts_replies.num )
WHERE posts.status =1
AND posts.access = 'Public'
GROUP BY posts.num
ORDER BY count DESC
LIMIT 50 
```

此查询返回 Likes Count 很好，但不包括那些没有 Likes 的记录。所以这个查询返回的记录是：40

我想包括每个回复的喜欢计数，即使它有 0 个喜欢。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:42:11.563

在这里使用`LEFT JOIN`代替`INNER JOIN`可能会帮助你

```
SELECT posts.title, posts.num, posts.status, posts.category,
posts.content,posts.member_num, 
COUNT( posts_replies.blyrb_num ) AS count,
COUNT( likes.comment_num  ) AS likes_count
FROM posts_replies
INNER JOIN posts ON ( posts_replies.blyrb_num = posts.num )
LEFT JOIN likes ON ( likes.comment_num = posts_replies.num )
WHERE posts.status = 1
AND posts.access = 'Public'
GROUP BY posts.num
ORDER BY count DESC
LIMIT 50 
```

的想法`LEFT JOIN`是匹配行，即使右侧没有要匹配的行。`INNER JOIN`仅在双方都有行时才有效。:)

# android - Android - SignalStrength 术语解释

> ID：15054498
> 
> 赞同：2
> 
> 时间：2013-02-24T17:38:00.867
> 
> 标签：android, signals, telecommunication, signal-strength, phone-state-listener

我正在查看有关 SignalStrength 类的文档以查找我计划制作的应用程序，但是有很多我不太熟悉的电信术语。我想知道是否有人可以简要介绍一下这个类中的一些方法，特别是这些：

```
int  getCdmaDbm()
Get the CDMA RSSI value in dBm
int  getCdmaEcio()
Get the CDMA Ec/Io value in dB*10
int  getEvdoDbm()
Get the EVDO RSSI value in dBm
int  getEvdoEcio()
Get the EVDO Ec/Io value in dB*10
int  getEvdoSnr()
Get the signal to noise ratio.
int  getGsmBitErrorRate()
Get the GSM bit error rate (0-7, 99) as defined in TS 27.007 8.5
int  getGsmSignalStrength()
Get the GSM Signal Strength, valid values are (0-31, 99) as defined in TS 27.007 8.5 
```

据我了解，GSM 和 CDMA 是移动蜂窝网络的两种不同协议，EVDO 是通过 CDMA 移动数据的标准，而 HSPA 是 GSM 上的等效数据标准。那么，为什么没有相应的 HSPA 方法，也没有 getCDMASignalStrength() 或 getCDMABitErrorRate()？我也不太清楚 RSSI 或 Ec/Io 是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T18:15:55.007

好的，我们开始吧。

*   您正确地得到了 GSM 与 CDMA 不同的部分。
*   此外，**[EVDO](http://en.wikipedia.org/wiki/Evolution-Data_Optimized)**的部分是 CDMA 上的数据传输协议，而 HSPA 是 GSM 中的等效协议。
*   [调制](http://en.wikipedia.org/wiki/Modulation)（信号中的数据表示）在 CDMA 和 GSM 之间完全不同。这就是为什么您不能使用等效单位 ( [BER](http://en.wikipedia.org/wiki/Bit_error_rate) ) 来计算由这些不同协议发送的信号的质量。

现在对于我们得到的测量值：

**DBM**是一个纯信号功率测量单位（以分贝为单位），接收越多，接收效果就越好。这包括 (`getCdmaDbm()`和`getGsmSignalStrength()`)

**误码率**：是一个简单的 GSM 链路质量测量单位，它越低表示接收信号的质量越高（与信号强度无关）。

**EC/IO**表示接收信号功率与干扰信号功率之比。该值越高，您获得的信号质量就越高（无论其强度如何）。[详细](http://www.telecomhall.com/what-is-ecio-and-ebno.aspx)

**RSSI**也是一个信号功率测量单位。

现在，RSSI 和 ECIO 有两个 APIS 的原因是 EVDO 承载在 CDMA 信号的一部分上，因此它可能具有与整个 CDMA 信号不同的质量数据是有道理的。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T18:26:34.380

RSSI 是在通道中测量的原始功率。Ec/Io 是载波相对于干扰和噪声的能量，因此它是衡量信号质量的指标。dBm 是相对于 1 毫瓦的射频功率单位，以 dB（分贝）为单位。EVDO SNR 是信噪比，它是存在干扰时信号质量的另一种表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:43:12.587

RSSI-接收信号强度指示器。它是信号中的功率量。
ECIO-这是功率密度的另一个比率。

为什么 CDMA 没有信号强度 - 我的猜测是 Dbm 足以衡量它，但我不能发誓。

如果您需要使用信号强度，则需要进行认真的研究。除非你所做的只是显示你有多少条信号。即使这不是微不足道的，iphone 多年来一直错了。

# xml - kml + 谷歌地图 api v3 + geoxml3

> ID：15054499
> 
> 赞同：1
> 
> 时间：2013-02-24T17:38:05.217
> 
> 标签：xml, google-maps-api-3, kml, polygons

我有一个加载另一个 kml 文件的 html 文件。就这个：

[http://mini.hr/stanonline/test.php](http://mini.hr/stanonline/test.php)

我想将右侧菜单“ODABERI KVART”与地图上的多边形连接起来，多边形存储在 kml 中。因此，当我从菜单中选择某些内容时，多边形会更改填充颜色并显示信息窗口。

这是我想做的例子：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html)

我读到了这个并获得了必须制作 xml 文件而不是 kml 的信息。你能帮我做一些能满足我需求的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:53:53.477

KML 是 XML。我的许多示例都有 .xml 扩展名的唯一原因是，直到最近我的服务器还没有配置为提供 KML 文件（扩展名为 .kml 的文件）。

通过代理使用您的 KML 的工作概念证明

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?http://mini.hr/stanonline/mo_bck.kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?http://mini.hr/stanonline/mo_bck.kml)

由于上述方法有效，您的服务器已配置为提供 KML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:30:52.937

我在你的网站上做了类似的东西。你可以在这个链接上检查它：

[http://mini.hr/stanonline/test_mouseover.php](http://mini.hr/stanonline/test_mouseover.php)

但是，如果您可以看到我的缩放不起作用 bcs 缩放设置为 13，而当您打开页面时，这不是。

但是，如果我在地址栏中添加它而不是缩放工作：

```
?lat=45.345537&lng=14.439621&zoom=13&type=m&filename=mo_bck.kml 
```

重定向示例：

[http://mini.hr/stanonline/test2.php](http://mini.hr/stanonline/test2.php)

那么如何在不重定向页面的情况下解决缩放问题呢？是否可以将“显示”链接扔到每个多边形的信息窗口？如果是怎么办？

# ruby - 将int转换为二进制，对其执行按位运算

> ID：15054501
> 
> 赞同：0
> 
> 时间：2013-02-24T17:38:21.730
> 
> 标签：ruby

我正在尝试将 int 转换为二进制，然后对二进制执行按位运算。

我目前的方法是获取 int，调用`to_s(2)`它，但是我留下了一个二进制字符串。

关于我应该做什么的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T17:42:40.410

在几乎所有主要的编程语言（包括 Ruby）中，简单整数都以二进制形式存储。因此，您可以对整数本身进行按位运算：

```
>> 6 | 5 # bitwise or
=> 7
>> 6 & 5 # bitwise and
=> 4
>> 6 ^ 5 # bitwise xor
=> 3
>> 6 >> 2 # right shift
=> 1
>> 6 << 2 # left shift
=> 24 
```

（编辑：这似乎是我的第 1000^个答案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:47:02.513

`the_number.to_s(2).split('').map { |x| x.to_i }`# 将数字转换为二进制数组

# python - 在 python 中使用正则表达式解析电子邮件标头

> ID：15054503
> 
> 赞同：2
> 
> 时间：2013-02-24T17:38:33.427
> 
> 标签：python, regex, email-parsing

我是一个尝试从电子邮件标题中提取数据的 python 初学者。我在一个文本文件中有数千封电子邮件，我想从每封邮件中提取发件人的地址、收件人地址和日期，并将其写入新文件中以分号分隔的单个行。

这很丑陋，但这是我想出的：

```
import re

emails = open("demo_text.txt","r") #opens the file to analyze
results = open("results.txt","w") #creates new file for search results

resultsList = []

for line in emails:
    if "From - " in line: #recgonizes the beginning of a email message and adds a linebreak
        newMessage = re.findall(r'\w\w\w\s\w\w\w.*', line)
        if newMessage:
            resultsList.append("\n")        
    if "From: " in line:
        address = re.findall(r'[\w.-]+@[\w.-]+', line)
        if address:
            resultsList.append(address)
            resultsList.append(";")
    if "To: " in line:
        if "Delivered-To:" not in line: #avoids confusion with 'Delivered-To:' tag
            address = re.findall(r'[\w.-]+@[\w.-]+', line)
            if address:
                for person in address:
                    resultsList.append(person)
                    resultsList.append(";")
    if "Date: " in line: 
            date = re.findall(r'\w\w\w\,.*', line)
            resultsList.append(date)
            resultsList.append(";")

for result in resultsList:
    results.writelines(result)

emails.close()
results.close() 
```

这是我的“demo_text.txt”：

```
From - Sun Jan 06 19:08:49 2013
X-Mozilla-Status: 0001
X-Mozilla-Status2: 00000000
Delivered-To: somebody_1@hotmail.com
Received: by 10.48.48.3 with SMTP id v3cs417003nfv;
        Mon, 15 Jan 2007 10:14:19 -0800 (PST)
Received: by 10.65.211.13 with SMTP id n13mr5741660qbq.1168884841872;
        Mon, 15 Jan 2007 10:14:01 -0800 (PST)
Return-Path: <nobody@hotmail.com>
Received: from bay0-omc3-s21.bay0.hotmail.com (bay0-omc3-s21.bay0.hotmail.com [65.54.246.221])
        by mx.google.com with ESMTP id e13si6347910qbe.2007.01.15.10.13.58;
        Mon, 15 Jan 2007 10:14:01 -0800 (PST)
Received-SPF: pass (google.com: domain of nobody@hotmail.com designates 65.54.246.221 as permitted sender)
Received: from hotmail.com ([65.54.250.22]) by bay0-omc3-s21.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
         Mon, 15 Jan 2007 10:13:48 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
         Mon, 15 Jan 2007 10:13:47 -0800
Message-ID: <BAY115-F12E4E575FF2272CF577605A1B50@phx.gbl>
Received: from 65.54.250.200 by by115fd.bay115.hotmail.msn.com with HTTP;
        Mon, 15 Jan 2007 18:13:43 GMT
X-Originating-IP: [200.122.47.165]
X-Originating-Email: [nobody@hotmail.com]
X-Sender: nobody@hotmail.com
From: =?iso-8859-1?B?UGF1bGEgTWFy7WEgTGlkaWEgRmxvcmVuemE=?=
 <nobody@hotmail.com>
To: somebody_1@hotmail.com, somebody_2@gmail.com, 3_nobodies@yahoo.com.ar
Bcc: 
Subject: fotos
Date: Mon, 15 Jan 2007 18:13:43 +0000
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="----=_NextPart_000_d98_1c4f_3aa9"
X-OriginalArrivalTime: 15 Jan 2007 18:13:47.0572 (UTC) FILETIME=[E68D4740:01C738D0]
Return-Path: nobody@hotmail.com 
```

输出是：

```
somebody_1@hotmail.com;somebody_2@gmail.com;3_nobodies@yahoo.com.ar;Mon, 15 Jan 2007 18:13:43 +0000; 
```

除了在我的 demo_text.txt（第 24 行）的“发件人：”字段中有换行符之外，这个输出会很好，所以我错过了“nobody@hotmail.com”。

我不确定如何告诉我的代码跳过换行符并仍然在 From: 标记中找到电子邮件地址。

更一般地说，我确信有许多更明智的方法来完成这项任务。如果有人能指出我正确的方向，我肯定会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:58:34.497

您的演示文本实际上是 mbox 格式，可以使用`mailbox`模块中的适当对象完美处理：

```
from mailbox import mbox
import re

PAT_EMAIL = re.compile(r"[0-9A-Za-z._-]+\@[0-9A-Za-z._-]+")

mymbox = mbox("demo.txt")
for email in mymbox.values():
    from_address = PAT_EMAIL.findall(email["from"])
    to_address = PAT_EMAIL.findall(email["to"])
    date = [ email["date"], ]
    print ";".join(from_address + to_address + date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:54:55.640

为了跳过换行符，您不能逐行阅读。您可以尝试加载文件，并使用关键字（From、To 等）作为边界。因此，当您搜索“From -”时，您将使用其余关键字作为边界，因此它们不会包含在列表的一部分中。

另外，提到这个原因你说你是一个初学者：命名非类变量的“Pythonic”方式是使用下划线。所以 resultsList 应该是 results_list。

# jquery - 使用 jQuery 附加到 div 并应用基于类的 css 样式

> ID：15054505
> 
> 赞同：1
> 
> 时间：2013-02-24T17:38:57.060
> 
> 标签：jquery, css, html, class, append

我想将从服务器接收到的数据附加到我的 html 页面上的 div 中。我可以做到这一点

```
$('#divImAddingTo').append(infoBeingAppended); 
```

我想将基于 css 的样式应用于要附加的数据。我不确定如何完成。

我试过了

```
$('#divImAddingTo').append(infoBeingAppended).toggleClass = 'className'; 
```

这是行不通的。

一如既往地非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:47:25.863

尝试

```
$('#divImAddingTo').append($('<div class=classname>')); 
```

然后

```
$('#divImAddingTo div').html(contentToAdd); 
```

`.append()`注意和之间的区别`.html()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:42:24.000

你试过这样吗？

```
$('#divImAddingTo').append($(infoBeingAppended).toggleClass('className')); 
```

# php - PHP新手试图了解如何在php5中制作等效的php4脚本

> ID：15054506
> 
> 赞同：-1
> 
> 时间：2013-02-24T17:39:13.953
> 
> 标签：php, porting, php4

我是 php 的新手，所以如果这封电子邮件听起来不错，请原谅我......愚蠢。我正在尝试为我的老板移植一些 php4 代码。这是让我难过的一个功能。

```
 function dbank($table,$sql,$dbankoverride="",$dbconfig="") {
    if(empty($dbconfig)) $dbconfig="0";

    $dbhostconfig[0]="XXXX";
    $dbuserconfig[0]="XXXX";
    $dbpasswdconfig[0]="XXXX";
    $dbankconfig[0]="db1";

    $dbhostconfig[1]="YYYY";
    $dbuserconfig[1]="YYYY";
    $dbpasswdconfig[1]="";
    $dbankconfig[1]="db2";

    $dbhost=$dbhostconfig[$dbconfig];
    $dbuser=$dbuserconfig[$dbconfig];
    $dbpasswd=$dbpasswdconfig[$dbconfig];
    $dbank=$dbankconfig[$dbconfig];

    if(!empty($dbankoverride)) $dbank=$dbankoverride;

    $db=@mysql_connect($dbhost,$dbuser,$dbpasswd);
    if(!$db) {
        $errormsg="<style type=\"text/css\">\n";
        $errormsg.="<!--\n";
        $errormsg.=".errormsg01 {  font-family: \"Times New Roman\", Times, serif; font-size: 12pt; font-style: normal; line-height: normal; font-weight: normal; font-variant: normal; text-decoration: none}\n";
        $errormsg.="-->\n";
        $errormsg.="</style>\n";
        $errormsg.="<span class=\"errormsg01\">Database Error</span>\n";
        die($errormsg);
    } else {
        # Select Database
        @mysql_select_db($dbank,$db);

        # Query 
        $result=@mysql_query($sql,$db);

        if (substr($sql,0,6)=="select" || substr($sql,0,8)=="describe") {

            for($i=0;$i<mysql_num_fields($result);$i++) {
                $field_name[$i] = mysql_field_name($result,$i);
            }

            $num=@mysql_num_rows($result);

            for($i=0;$in=@mysql_fetch_array($result);$i++) {
                $input[$i]=$in;
            }

            @mysql_close($db);

            $return=array($num,$field_name,$input);
            return $return;
        }
    }

    @mysql_close($db);

    $return=array($num,$field_name,$input);
    return $return;
} 
```

据我了解，此函数对表运行 sql 查询，并在数组中返回变量 $num、$field_name 和 $input。

这个函数是为 php4 服务器编写的，它给我错误“未定义的变量 $num on line ..”对于这些变量中的每一个。

我的问题是：如何移植此代码以使其与 PHP 5 一起运行？

希望很快能收到回音。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:45:18.760

但是如果这个语句返回 false

```
if (substr($sql,0,6)=="select" || substr($sql,0,8)=="describe") 
```

你不能使用变量 $num，因为它没有在任何地方定义，在这个“if”语句之外？

# mysql - 如何获取字段外键（表和字段）php mysqli

> ID：15054509
> 
> 赞同：-2
> 
> 时间：2013-02-24T17:39:30.273
> 
> 标签：mysql, foreign-keys

如何使用 php 和 mysqli 在 phpMyAdmin 中获取外键字段？
见照片：

![](../Images/16f3567c979391a7c88ddda49f2d151c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:46:59.377

所有约束都列在 INFORMATION_SCHEMA.TABLE_CONSTRAINTS 中：

```
mysql> create table test.foo (id int primary key);
mysql> create table test.bar (fooid int, foreign key (fooid) references foo(id));

mysql> select * from information_schema.table_constraints 
    where constraint_schema = 'test'\G
*************************** 1\. row ***************************
CONSTRAINT_CATALOG: def
 CONSTRAINT_SCHEMA: test
   CONSTRAINT_NAME: bar_ibfk_1
      TABLE_SCHEMA: test
        TABLE_NAME: bar
   CONSTRAINT_TYPE: FOREIGN KEY
*************************** 2\. row ***************************
CONSTRAINT_CATALOG: def
 CONSTRAINT_SCHEMA: test
   CONSTRAINT_NAME: PRIMARY
      TABLE_SCHEMA: test
        TABLE_NAME: foo
   CONSTRAINT_TYPE: PRIMARY KEY 
```

这些约束中的所有列都在 INFORMATION_SCHEMA.KEY_COLUMN_USAGE 中：

```
mysql> select * from information_schema.key_column_usage 
    where constraint_schema = 'test'\G
*************************** 1\. row ***************************
           CONSTRAINT_CATALOG: def
            CONSTRAINT_SCHEMA: test
              CONSTRAINT_NAME: bar_ibfk_1
                TABLE_CATALOG: def
                 TABLE_SCHEMA: test
                   TABLE_NAME: bar
                  COLUMN_NAME: fooid
             ORDINAL_POSITION: 1
POSITION_IN_UNIQUE_CONSTRAINT: 1
      REFERENCED_TABLE_SCHEMA: test
        REFERENCED_TABLE_NAME: foo
       REFERENCED_COLUMN_NAME: id
*************************** 2\. row ***************************
           CONSTRAINT_CATALOG: def
            CONSTRAINT_SCHEMA: test
              CONSTRAINT_NAME: PRIMARY
                TABLE_CATALOG: def
                 TABLE_SCHEMA: test
                   TABLE_NAME: foo
                  COLUMN_NAME: id
             ORDINAL_POSITION: 1
POSITION_IN_UNIQUE_CONSTRAINT: NULL
      REFERENCED_TABLE_SCHEMA: NULL
        REFERENCED_TABLE_NAME: NULL
       REFERENCED_COLUMN_NAME: NULL 
```

# xcode - 许多视图控制器编辑NSString？

> ID：15054510
> 
> 赞同：0
> 
> 时间：2013-02-24T17:39:32.363
> 
> 标签：xcode, string, printing, global

我想在 mainViewController 的 TextView 中打印一个 NSString。但是这个命令应该来自第二个 ViewController。我在 mainViewController.h 中声明了一个字符串，但我在 secondViewController.m 中需要这个字符串！（文本应打印在 mainViewController 中）。当我想访问这个字符串时，它说 Xcode 不知道这个变量。我如何创建一个字符串/变量，我可以从我的所有 ViewControllers（xib！）中编辑和打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:45:36.460

听起来您想在两个视图控制器之间共享模型。这是正确的 MVC 方法，因此只需要一个视图控制器更改模型中的值，并且所有其他视图控制器将收到通知并可以更新它们各自的视图：

请看这篇关于如何实现的[优秀文章](http://cupsofcocoa.com/2011/09/10/design-patterns-key-value-observing/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:47:35.483

只需在 AppDelegate 中声明 NSString 变量并通过 sharedApplication 方法在任何 ViewController 中访问。在您的情况下，在 secondViewController 中为其分配值并在 mainViewController 中访问该值

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSLOg(@"Nsstring value=%@",appDelegate.stringVariable); 
```

赋值：`appDelegate.stringVariable=@"fromSecondViewController");`

# java - 在 Eclipse 2D 中点击运行时出错

> ID：15054512
> 
> 赞同：0
> 
> 时间：2013-02-24T17:39:43.590
> 
> 标签：java, eclipse, slick2d

我是使用 Eclipse 和 java 在 Slick 2D 中学习基本游戏编程[的](https://www.youtube.com/watch?annotation_id=annotation_871076&feature=iv&src_vid=NoksHLldlcM&v=oWm5JY6IlUo)菜鸟工作。我收到这个错误

```
Exception in thread "main" java.lang.RuntimeException: Resource not found:     testdata/alphamap.png
at org.newdawn.slick.util.ResourceLoader.getResourceAsStream(ResourceLoader.java:69)
at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:169)
at org.newdawn.slick.Image.<init>(Image.java:196)
at org.newdawn.slick.Image.<init>(Image.java:170)
at org.newdawn.slick.Image.<init>(Image.java:158)
at org.newdawn.slick.Image.<init>(Image.java:136)
at org.newdawn.slick.tests.AlphaMapTest.init(AlphaMapTest.java:33)
at org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:390)
at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:314)
at org.newdawn.slick.tests.AlphaMapTest.main(AlphaMapTest.java:79) 
```

这就是我正在尝试的

```
import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;

public class Main extends BasicGame{

private static final String Slick2D = null;

public Main(String title) {
    super(title);
    // TODO Auto-generated constructor stub
}

//this is where execution starts
public static void man(String args[]) throws SlickException {

    AppGameContainer app = new AppGameContainer(new Main("First Slick2D"));
    app.setDisplayMode(800, 600, false);
    app.start();

}

@Override
public void render(GameContainer gc, Graphics g) throws SlickException {
    // draw all the graphics
    g.fillOval(200, 200, 100, 300)
    g.fillRect(300, 200, 100, 200)
    g.fillRoundRect(500, 200, 100, 50, 30)
    g.drawLine(0, 0, 800, 600)
    g.drawString(Welcome to Slick2D, 400, 0)
}

@Override
public void init(GameContainer arg0) throws SlickException {
    // load all fonts, graphics, sounds, etc.

}

@Override
public void update(GameContainer arg0, int arg1) throws SlickException {
    // game logic (AI, user input)

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:12:05.160

Slick 期望图像位于名为 images 的文件夹中。我不知道为什么，但确实如此。

您的目录应如下所示：

\src\Main.java

\图像\alphamap.png

如果这不起作用，请确保您的目录已正确命名并且*位于项目文件夹*中，而不是 src 文件夹中。

例子：

\MyProject\src\Main.java 是你的源代码

\MyProject\images\alphamap.png

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:48:19.983

它根本找不到图像。检查您的 scr 文件夹中的 testdata 文件夹并检查它是否包含 alphamap.png （或者您可以删除一些获取和设置此图片的代码）

# eclipse - 无法在 Eclipse 中关闭 Clojure 括号自动完成功能

> ID：15054520
> 
> 赞同：2
> 
> 时间：2013-02-24T17:40:21.590
> 
> 标签：eclipse, autocomplete, clojure, parentheses

我正在使用 Eclipse 开发一个 Clojure 项目，由于某种原因，它决定应该删除所有与括号有关的自由意志，现在当我输入“（”时，它会自动将其完成为“（）”。问题是我不能只有一个或另一个；尝试删除 ')' 字符什么都不做，删除 '(' 字符会删除两个括号。修改 Java => 编辑器 => 在首选项下键入选项卡什么都不做，而 Clojure =>编辑器选项卡没有任何用处。我可以成功制作单个 '(' 字符的唯一方法是复制它和至少另一个字符 [即 '(a'] 并粘贴它，这绝对不会获胜。

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:14:31.293

可能paredit模式已打开。尝试 Alt-d 将其关闭或通过 Clojure 菜单关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:50:35.633

这是当前稳定版本逆时针的“无限制/默认”编辑模式的“功能”。

它将从新版本中删除，因为太多用户抱怨（他们是对的）在“无限制/默认”模式下不实用。（当然它仍然可以在 paredit/strict 模式下使用，如果你每天使用大量 Clojure，我鼓励你使用/学习这种模式）。

您可以切换回 CCW 的上一个版本，或者等待下一个稳定版本（一两周后可用），或者安装开发中的 beta 版本（更新站点：[http ://ccw.cgrand.net/updatesite -betas/](http://ccw.cgrand.net/updatesite-betas/) )

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T03:24:39.897

This is how paredit mode works.

It's actually *much more productive* once you get the hang of it: I therefore suggest *not* turning it off and learning how to make the most of it. You will be pleased that you did this, in the end.

# java - 如何在 Java 中检测多项式

> ID：15054521
> 
> 赞同：0
> 
> 时间：2013-02-24T17:40:34.760
> 
> 标签：java, string, character

假设我有一个多项式 -x^2 + 2x - 1 = 0。它是从文件中读取的。

我有分析多项式每个字符的代码。

我想创建一个额外的步骤来压缩多项式（因此空格被消除）所以我可以检查字符串是否实际上是一个多项式，我可以通过检查多项式的最后 2 个索引来轻松地做到这一点像这样的符号和零： (=0)

问题是一些多项式长度有不同的长度，这让我想到了使用 ArrayList。问题是我不能将我的 ArrayList 声明为 Character 类型以将每个字符存储在 ArrayList 的顺序索引中。

```
public void createEquationNoWhiteSpaces(){
    // it cannot be done because there is no ArrayList of characters
    textArrayList = new ArrayList<String>();
    for(int i = 0; i < text.length(); i++){
        // Store the characters of the polynomial in an ArrayList
        // because each polynomial has different length
        if(text.charAt(i) != ' ')
            textArrayList = text.charAt(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:45:01.443

如果你想使用一个数组，你当然可以声明一个`ArrayList<Character>`. 但是，无论如何，您可能希望为此使用 a`StringBuilder`而不是列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:45:02.420

```
st.replaceAll("\\s","") 
```

删除字符串 st 中的所有空格

# ruby-on-rails - 将两个 ActiveRecord::Relation 与 OR 组合，而不是 AND，返回一个 Relation 而不是一个 Array 以便以后可以分页

> ID：15054524
> 
> 赞同：4
> 
> 时间：2013-02-24T17:40:42.827
> 
> 标签：ruby-on-rails, ruby, activerecord, will-paginate, relation

`a`并且`b`是返回相同类型对象的 ActiveRecord::Relation 对象（在这种情况下为 Micropost 对象）

```
a.class
=> ActiveRecord::Relation
b.class
=> ActiveRecord::Relation
a.first
=> Micropost(...) 
b.first
=> Micropost(...) #They both return the same type of objects
c=a+b
c.class
=> Array #This is not what i'm looking for
c=a|b
c.class
=> Array #Not what i'm looking for either
c=(a or b)
c.class
=> ActiveRecord::Relation #But it is just a, so it's wrong
c==a
=> true
a.merge(b)
=> []  #It merges with AND which in my case results in an empty array 
```

有没有办法在 Rails 3.2.11 中“或”两个 Relation 对象并返回另一个 Relation 对象？我需要使用一些宝石`squeel`来做到这一点吗？

如果做不到：为什么做不到？我可以在`a|b`不从数据库中加载每条记录的情况下对数组进行分页吗？
如果可以做到：有人可以写一个如何做的例子吗？

提前致谢。

编辑：我将错误的变量复制到代码块中，b 不是 ActiveRecord::Relation，它实际上是一个数组，这就是 a.merge(b) 返回 [] 的原因。我的错。

TLDR：问题是错误的，数组可以分页:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:50:00.627

对于你的问题：`Can I paginate the array resulting from a|b without loading every record from the database?`

**是**的，您可以分页`array`。只有你需要做的是`require 'will_paginate/array'`你正在使用`paginate`的文件`array`。如果您在很多地方使用，那么最好将其添加到`config/initializers`. 它的数组因此不会在每次（即）查询仅触发一次时从数据库中加载每条记录。要加载关联，您可以`eager load on array`使用`include`.

# android - android WebView - 内容不可编辑

> ID：15054529
> 
> 赞同：4
> 
> 时间：2013-02-24T17:41:13.323
> 
> 标签：android, android-webview

我使用 a`WebView`来使用他们的 API 在社交网络上授权用户。

我`WebView`加载了一个带有 2 `EditTexts`（或它们在 Web 开发中被称为）和一个按钮的表单。

奇怪的问题：单击表单中的键盘不显示，`EditText`但是如果活动被暂停和恢复（例如我按 HOME 然后返回）`EditTexts`变得可编辑并且我能够输入登录数据。

完整过程（打开页面、暂停活动和返回）的 LogCat 输出如下所示。是的，我还注意到拼写错误的“假”。有任何想法吗？

```
 02-24 18:33:16.310: V/webview(19204):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
 02-24 18:33:16.715: V/webview(19204): doShortPress : mNativeClass - 1407128 mPreventDefault -  0
 02-24 18:33:16.810: D/dalvikvm(19204): GC_CONCURRENT freed 299K, 48% free 3037K/5831K, external 604K/1033K, paused 7ms+4ms
 02-24 18:33:16.830: D/navcache(19204): cursorInputFieldAction cursor=39c108, cursorFrame=1a7928
02-24 18:33:16.830: D/navcache(19204): CachedFrame::previousInputField this=1a7928, start=39c108, begin=39c040 end=39c3c4
02-24 18:33:16.830: D/navcache(19204): CachedFrame::nextInputField this=1a7928, start=39c108, begin=39c040 end=39c3c4
02-24 18:33:16.830: D/navcache(19204): cursorInputFieldAction next=39c16c, prev=0, action=4
02-24 18:33:17.095: V/webview(19204): OnSizeChanged: Enter 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:59:33.537

我在 Google 群组中找到了一些东西，试试这个

```
webview.requestFocus(View.FOCUS_DOWN);
        webview.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                    case MotionEvent.ACTION_UP:
                        if (!v.hasFocus()) {
                            v.requestFocus();
                        }
                        break;
                }
                return false;
            }
        }); 
```

# php - 为什么这个 FALSE 条件为 TRUE？

> ID：15054530
> 
> 赞同：1
> 
> 时间：2013-02-24T17:41:24.700
> 
> 标签：php

为什么这个 FALSE 条件为 TRUE？

```
<?php
if(111111111111111119 == 111111111111111118)
{
    echo 'Condition is TRUE!';
} 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:49:23.963

引用自：

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

> 如果在类型杂耍之后 $a 等于 $b，则 $a == $b 为 TRUE
> 
> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较

因此，因为您的字符串都是数字，所以它们首先被转换为数字。然后在某些架构上，数字太大以至于溢出最大整数大小并且您得到相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:50:19.657

PHP文档

[转换为字符串](http://www.php.net/manual/en/language.types.string.php)

> 整数或浮点数转换为以文本形式表示数字的字符串（包括浮点数的指数部分）。浮点数可以使用指数表示法 (4.1E+6) 进行转换。

[转换为整数](http://php.net/manual/en/language.types.integer.php)

> 如果浮点数超出整数边界（在 32 位平台上通常为 +/- 2.15e+9 = 2^31，在 64 位平台上通常为 +/- 9.22e+18 = 2^63），则结果未定义，因为浮点数没有足够的精度来给出精确的整数结果。发生这种情况时不会发出警告，甚至不会发出通知！

我猜您使用的是 32 位系统，因此

```
var_dump(111111111111111119,111111111111111118);
var_dump(111111111111111119 === 111111111111111118); // would be true on 32bit 
```

输出

```
float 1.1111111111111E+17
float 1.1111111111111E+17
true 
```

简单的解决方案

```
 if(bcsub("111111111111111119", "111111111111111118") == "0")
    {
        // 32 bit true 
        var_dump("Am Free");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:50:22.357

因为它已转换为数值

```
if('111111111111111119' == '111111111111111118')
{
echo 'Condition is TRUE!';
} else {
echo 'Condition is FALSE!';
}
// on 64 bit: condition is FALSE! (tested on my mac) 
```

我假设在 32 位机器上它是真的。即使我删除了我的mac上的引号，它也显示为假。

```
if('a111111111111111119' == 'a111111111111111118')
{
echo 'Condition is TRUE!';
} else {
echo 'Condition is FALSE!';
}
// condition is FALSE! 
```

# python - 使用 Python 将 csv 导入 MySQL 时出错

> ID：15054534
> 
> 赞同：0
> 
> 时间：2013-02-24T17:41:35.713
> 
> 标签：python, mysql, csv, import

嗨，我刚刚开始使用 Python，

我已经用一个简单的测试编写了这个 .py 文件，并且运行良好，但是当我只是简单地添加更多 %s 时，它就爆炸了：

错误： `File "/usr/lib/pymodules/python2.7/MySQLdb/cursors.py", line 159, in execute query = query % db.literal(args) TypeError: not enough arguments for format string`

Python脚本：

* * *

```
import csv
 import MySQLdb

  mydb = MySQLdb.connect(host='localhost',
    user='root',
    passwd='******',
    db='kestrel_keep')

cursor = mydb.cursor()

csv_data = csv.reader(file('data_csv.log'))

for row in csv_data:

        cursor.execute('INSERT INTO `heating` VALUES ( %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s,)',
       row)
#close the connection to the database.
mydb.commit()
cursor.close()
import os

print "Done" 
```

* * *

CSV 文件格式：

```
2013-02-21,21:42:00,-1.0,45.8,27.6,17.3,14.1,22.3,21.1,1,1,2,2
2013-02-21,21:48:00,-1.0,45.8,27.5,17.3,13.9,22.3,20.9,1,1,2,2 
```

有任何想法吗？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:47:25.917

检查检查并再次检查！

我有不同的字段数..

即，如果您收到上述错误，通常是因为您的 csv 与 %s 占位符的数量不同。当您的 mysql 表列存在差异时，您将收到列计数错误。

感谢 Adam Mihalcin 帮助指出这一点！

# urlrewriter - ASP.Net 登录控件不适用于 Intelligencia.UrlRewriter

> ID：15054537
> 
> 赞同：1
> 
> 时间：2013-02-24T17:41:56.477
> 
> 标签：urlrewriter

我希望有人可以帮助我了解我正在做的这个噩梦......！

我刚刚在 Apress 书籍的帮助下完成了一个 ASP.Net 电子商务网站；BalloonShop 项目，你们中的一些人可能已经知道了。

除了我看不到要解决的一个小问题之外，一切都很好而且花花公子！

我无法从 URL 中没有 .aspx 扩展名的任何页面使用 asp.net 登录控件从我的站点注销。这就是; 部门、类别和产品使用 Intelligencia.UrlRewriter 来提供浏览器友好的 url。

我的 url 被完美重写，但是当我尝试从使用 url 重写器的页面注销时，它不起作用，并且我在错误日志电子邮件中收到以下消息：

```
Exception generated on 22 February 2013, at 22:23

Page location: /Triple-x/Dynamo-p4/?

<div id=":143">ProductId=4

Message: The HTTP verb POST used to access path '/Triple-x/Dynamo-p4/' is not allowed.

Source: System.Web

Method: System.IAsyncResult BeginProcessRequest(System.Web.HttpContext, System.AsyncCallback, System.Object)

Stack Trace:

at System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionSt    ep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)</div> 
```

在我的 web.config 中，如果有：

```
<configSections>
<section name="rewriter" requirePermission="false" type="Intelligencia.UrlRewriter.Configuration.RewriterConfigurationSectionHandler,Intelligencia.UrlRewriter" />
</configSections>

<rewriter>
<!-- Rewrite department pages -->
<rewrite url="^.*-d([0-9]+)/?$" to="~/Catalog.aspx?DepartmentID=$1" processing="stop" />
<rewrite url="^.*-d([0-9]+)/page-([0-9]+)/?$" to="~/Catalog.aspx?DepartmentID=$1&amp;Page=$2" processing="stop" />
<!-- Rewrite category pages -->
<rewrite url="^.*-d([0-9]+)/.*-c([0-9]+)/?$" to="~/Catalog.aspx?DepartmentId=$1&amp;CategoryId=$2" processing="stop" />
<rewrite url="^.*-d([0-9]+)/.*-c([0-9]+)/page-([0-9]+)/?$" to="~/Catalog.aspx?DepartmentId=$1&amp;CategoryId=$2&amp;Page=$3" processing="stop" />
<!-- Rewrite product details pages -->
<rewrite url="^.*-p([0-9]+)/?$" to="~/Product.aspx?ProductId=$1" processing="stop" />
</rewriter>

<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules>
  <add name="UrlRewriter" type="Intelligencia.UrlRewriter.RewriterHttpModule" />
  <remove name="ScriptModule" />
  <!--<add name="ScriptModule" preCondition="managedHandler" />-->
</modules>
</system.webServer> 
```

我也在我的本地机器上使用 IIS7，并且已经读到这有时可能是原因：AppPool 版本。我已尝试按照建议将其更改为 Classic ASP，但这对我不起作用！

有谁知道这是否是在本地计算机上托管和使用 Intelligencia.UrlRewriter 时的常见问题？如果托管在共享网络托管服务器上，这可能不是问题吗？

如果我离题了，请原谅我的幼稚，因为我对此还是很陌生，尤其是这种规模的项目。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:49:53.743

如果您想使用 url 生根，您可以使用此代码。我也用它做一个电子商务项目：

在 Global.asax 文件中：

```
 void Application_Start(object sender, EventArgs e)
    {
        if (RouteTable.Routes.Count <= 0)
        {
            RouteTable.Routes.Add("Urun", new Route("Urun/{category}/{name}/{prid}/{caid}", new PageRouteHandler("~/ProductDetail.aspx")));
            RouteTable.Routes.Add("Kategori", new Route("Kategori/{upper}/{name}/{caid}", new PageRouteHandler("~/Categories.aspx")));
            RouteTable.Routes.Add("Icerik", new Route("Icerik/{name}/{cpid}", new PageRouteHandler("~/ContentPage.aspx")));
        }
    } 
```

您可以在任何您想提供链接的地方使用此代码：

```
 var param = new RouteValueDictionary
                                    {
                                        {"category", "Oyuncak"},
                                        {"prid", ((DiscountProductsResult) e.Item.DataItem).ProductId},
                                        {"name", ((DiscountProductsResult) e.Item.DataItem).UrlView.Replace(" ", "-")},
                                        {"caid", 0}
                                    };

VirtualPathData path = RouteTable.Routes.GetVirtualPath(null, "Urun", param); 
```

你可以得到这样的查询字符串值：

```
 RouteData.Values["caid"] 
```

# objective-c - 协议不可见

> ID：15054544
> 
> 赞同：1
> 
> 时间：2013-02-24T17:42:33.530
> 
> 标签：objective-c

在 FeedbackTarget.h 中：

```
@protocol FeedbackTarget <NSObject>
@property (nonatomic, retain) Feedback *feedback;
- (void)someMethod;
@end 
```

在 FeedbackViewControllerTests.m 中：

```
#import "FeedbackTarget.h"
...
- (void)setUp
{
  [super setUp];
  self.feedbackTarget = [OCMockObject mockForProtocol:FeedbackTarget];
} 
```

为什么我会收到错误：使用未声明的标识符“FeedbackTarget”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T17:47:10.300

好吧，不应该吗？

```
 self.feedbackTarget = [OCMockObject mockForProtocol:@protocol(FeedbackTarget)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:47:25.330

```
 self.feedbackTarget = [OCMockObject mockForProtocol:FeedbackTarget]; 
```

发送到`OCMockObject`这里的对象是一个叫做 的东西`FeedbackTarget`。但是没有对象“FeedbackTarget”。可以肯定的是，这是协议的名称，但它不是对象。

正如 Odrakir 指出的那样，您需要传递 @protocol(FeedbackTarget)。同样，当将选择器传递给对象时，您传递 @selector(theSelector: 而不是裸选择器。

# jquery - 上传后可排序的图像 - jQuery File Upload

> ID：15054552
> 
> 赞同：2
> 
> 时间：2013-02-24T17:43:03.500
> 
> 标签：jquery, file-upload, jquery-ui-sortable, blueimp

有没有一种简单的方法来添加拖动/排序功能，允许我们在上传图像后重新排序

像这样：http: [//jqueryui.com/sortable/#placeholder](http://jqueryui.com/sortable/#placeholder)

或像这样：http: [//jqueryui.com/sortable/#display-grid](http://jqueryui.com/sortable/#display-grid)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:58:18.403

是的，它们可以变成可排序的……最后加上这个

```
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
        $( ".files" ).sortable({
            revert: true
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-28T09:52:52.050

我使用了 blueimp，并使用了 DataList。

```
<asp:UpdatePanel ID="upImages" runat="server" UpdateMode="Always">
    <ContentTemplate>
        <div id="fileupload" style="float:left">
            <div class="fileupload-content">
                <asp:DataList ID="ImageList" runat="server" EnableTheming="false" DataKeyField="Index" OnItemDataBound="ImageList_ItemDataBound"
                 OnItemCommand="ImageList_ItemCommand" HorizontalAlign="Justify">
                    <HeaderTemplate>
                        <tbody class="files">
                    </HeaderTemplate>
                   <ItemTemplate>
                        <td class="preview" style="float:left;"><img id="imglegend"  src="<%#Eval("ImageURL")%>" /></td>
                        <td class="name" style="display: none"><label id="imgSavePath" target="_blank" title="<%#Eval("ImageFullURL")%>"></label></td>
                                  ...                                    
                    </ItemTemplate>
                    <FooterTemplate>
                        </tbody> 
                    </FooterTemplate>
                </asp:DataList>
            </div>
            <div width="500px" style="float:left">
                <span width="50px">Pick photos...</span>
                <input id="file" type="file" name="files[]" title="Bladeren" multiple />
            </div>         
        </div>     
    </ContentTemplate>
</asp:UpdatePanel> 
```

在 DataList 上添加可排序的属性。$("#<%=ImageList.ClientID%> tbody").sortable(); template-upload 被评论是因为它正在杀死拖放，因为生成的表中有太多隐藏的行。希望我有所帮助。

# c++ - 如何将 qarray 包含到 QTCreator 项目中

> ID：15054557
> 
> 赞同：1
> 
> 时间：2013-02-24T17:43:19.780
> 
> 标签：c++, qt, qt-creator

我在将 QArray 模块包含到我的 qt 项目时遇到问题。我像这样包括它：

`#include < QArray >`

并且 IDE 向我发送响应：找不到文件或目录（我自己翻译它 - 因为我有其他语言编译器 - 所以在英语编译器中生成的信息可能会略有不同）。

我知道这可能与没有为 .pro 文件添加适当的值有关，但我无法在任何地方找到我应该在其中添加的内容。（如 QT += 核心）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:48:01.933

您使用的是哪个版本的 Qt？

`QArray`在最近的 Qt 版本中没有。改为使用`QVector`。

不推荐使用 QArray 从 Qt2 迁移到 Qt3。并改为QMemArray。此外，从 Qt3 到 Qt4 不推荐使用 QMemArray。读[这个](http://qt-project.org/doc/qt-4.8/porting4-overview.html#memory-arrays-qmemarray)：

> 在 Qt 3 中，QMemArray 类用作简单数据类型的简单数组容器。这个类在 Qt 4 中被弃用，有利于 QVector...

# html - 全局 CSS 助手类是个好主意吗？

> ID：15054559
> 
> 赞同：8
> 
> 时间：2013-02-24T17:43:31.597
> 
> 标签：html, css, architecture

假设我有一种颜色，我知道我会在网站上大量使用。

我可以在各种 CSS 类中多次定义颜色

```
.nav-login { color:#green; other CSS content....... } 
```

或者

```
.green {color:green;}
.nav-login { other CSS content....... }

<div class="nav-login green">stuff</div> 
```

所以概念是，你应该使用辅助 CSS 类还是应该定义所有特定的东西？

从理论上讲，从长远来看，您可以通过编写更多的 CSS 和更少的 HTML 来节省带宽，但我发现在 HTML 中应用辅助 CSS 类的方法令人愉悦，几乎就像您在设计意义上编写语义 CSS 一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:15:25.260

如果您还没有，请查看[OOCSS](http://oocss.org/)（以及[Smashing Mag 的介绍））。](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)也从 Yandex 到[BEM](http://bem.info/method/) - 再次[Smashing Mag 介绍它](http://coding.smashingmagazine.com/2012/04/16/a-new-front-end-methodology-bem/)。

几年前我会嘲笑没有严格分离内容 (HTML) 和样式 (CSS) 的想法，当 Nicole “stubbornella” Sullivan 在我参加的一次会议上发表演讲时，我挠了挠头，但现在我我正在处理由几十个页面组成的项目，我们必须为几个人的团队中的客户从 PSD 转到 HTML/CSS，我的要求已经发生了巨大的变化！单独处理其他人不会修改的 CSS，*或者*在初创公司的单个项目中的团队中，*或者*在团队中为将重用您创建的 CSS 的客户工作，这完全不同。

了解 OOCSS 以及它可以为您做什么，试一试，如果不合适就不要在您的项目中使用它。或者做。

是否使用 CSS 预处理器在这里无关紧要：如果您使用它们来输出 1 公里长的选择器，那么显然您使用它们是错误的。它们只是一种更快、更轻松地编写 CSS 的方法（由于宏而不必费心去了解每个 CSS3 属性需要哪个前缀很棒，但它们仍然应该输出与以前或多或少相同的 CSS）。重点是编写高效的 CSS，有或没有预处理器。ZenCoding/Emmet 也是如此：当您厌倦了日复一日地编写相同的重复行/指令时，您知道您需要它。但是他们会输出这些相同的 CSS 行，这里没有什么神奇的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T17:48:04.820

我个人认为根据属性命名类并不是一个好主意，例如`.green`绿色文本。相反，请使用限定符，例如`.approved`绿色文本以及`.warning`警告、警报等。

在我看来，选择器（类、ID）应该反映元素的角色/目的，而不是它们的外观。例如，如果您想重新设计您的网站并采用新的配色方案，并且您的导航菜单从绿色变为蓝色 - 那么，`.green`选择器将没有什么意义，并且对于接管的人来说将难以理解未来的项目，如果有的话。

此外，没有理由为`.green`导航登录分配一个类`<div>`，如果您已经可以使用`.nav-login`.

Chris Coyier 编写了一份相当全面的[CSS 样式指南](http://css-tricks.com/css-style-guides/)——这不是黄金法则，但最好遵循。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T18:12:38.047

实际上，这是个好主意。我也使用它们，但我没有按照你说的方式命名它们。teddyrised 的例子很好。

只是我的例子，当我制作一个不需要巨大页面结构和最少 CSS 的简单项目时，我将它们命名为：

```
.push-right {
    float: right;
}

push-left {
    float: left;
}

.no-float {
    float: none;
}

.centered {
    margin: 0 auto;
}

.success {
    color: green;
}

.error {
    color: red;
}

.warning {
    color: orange;
}

.info {
    color: blue;
} 
```

所以实际上可以使用它们。请注意命名它们:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T17:48:28.953

我将为您的问题提供完全不同的解决方案。[少](http://lesscss.org/)用。

使用它，您将能够定义变量和许多其他很酷的东西。

> 变量允许您在一个地方指定广泛使用的值，然后在整个样式表中重复使用它们，使全局更改就像更改一行代码一样容易。

# php - php函数调用自己

> ID：15054563
> 
> 赞同：0
> 
> 时间：2013-02-24T17:44:04.510
> 
> 标签：php, function

为什么答案是13。我只是无法理解它。

如果给定的输入为 7，则以下函数返回什么：

```
function foo($bar) {
  if ($bar == 1) return 1;
  elseif ($bar == 0) return 0;
  else return foo($bar - 1) + foo($bar - 2);
} 
```

正确答案：D. 13

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:58:36.813

nneonneo 应该刚刚发布了他的评论作为答案，但是，这就是递归概念的工作原理：

富（7）=富（6）+富（5）

但是等等，那些等于什么？

富（6）=富（5）+富（4）

索诺法根！

富（5）=富（4）+富（3）

嗯..一种模式正在出现..

富（4）=富（3）+富（2）

富（3）=富（2）+富（1）

富（2）=富（1）+富（0）

富（1）= 1

和

富（0）= 0。

所以现在你可以计算出返回值，但是（这是更重要的问题）当你再次将 $bar 增加 1 时真正发生了什么？

foo(8) 与 foo(7) 相比如何？

答案是 foo (8) 等于 foo(7) + foo(6)。换句话说，它等于 13 + 8 - foo 的前两个输出的总和 .. 嘿，这听起来很熟悉...... 是否有一些著名的序列等于前两个数字的总和？

1、2、3、5、8、13 ...

没错，这就是递归计算斐波那契数列的方法。如果你想想你是如何建立斐波那契数列的，那真的是

1, 1 + 1, 2 + 1, 3 + 2, 5 + 3, 8 +5

这只是

1、1 + 1、(1 + 1) + 1、(2 + 1) + (1 + 1) 等。

通过“播种”初始值（位置“0”为 0，位置 1 为 1），然后将它们相加，您可以仅使用原始种子和大量加法来推导序列中的每个数字。

所以在这种情况下，bar 代表斐波那契序列中的 bar 位置。所以序列中的第 7 个数字是 13。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:52:17.627

这很简单，只需手动跟踪序列即可。使用这种类型的递归时，将其更多地视为数学函数而不是编程过程会有所帮助。如果您想更自然地了解它，使用函数式语言 *ML 或一些 LISP 会非常快速地帮助您。当您对数据结构（堆栈/队列）进行递归时，情况会有所不同，但函数式编程经验也对此有所帮助。

`foo(0)`= 0

`foo(1)`= 1

`foo(2)`= `foo(1)`+ `foo(0)`= 1 + 0 = 1

`foo(3)`= `foo(2)`+ `foo(1)`= 1 + 1 = 2

`foo(4)`= 2 + 1 = 3

`foo(5)`= 3 + 2 = 5

`foo(6)`= 5 + 3 = 8

`foo(7)`= 8 + 5 = 13

# python - Python - Beautiful Soup 发现文本不起作用

> ID：15054574
> 
> 赞同：2
> 
> 时间：2013-02-24T17:45:15.790
> 
> 标签：python, beautifulsoup

```
commentary = soup.find('div', {'id' : 'live-text-commentary-wrapper'})
findtoure = commentary.findAll(text = 'Gnegneri Toure Yaya') 
```

我无法弄清楚为什么这不起作用。

评论的输出是：

```
<div id="live-text-commentary-wrapper">
  <h2 id="live-text-introduction">Live Text Commentary</h2>
  <div class="live-text blq-clearfix" id="live-text">
    <span>90:00 
    <span class="extra-info">+3:04 
    <span class="icon-live-text-full-time">Full time</span></span></span>
    <p class="event">
    <span class="event-title">
      <strong>Full Time</strong>
    </span> The referee ends the match.</p>
    <span>90:00 
    <span class="extra-info">+2:52</span></span>
    <p>Gael Clichy produces a cross, clearance made by Mike Williamson.</p>
    <span>90:00 
    <span class="extra-info">+0:41</span></span>
    <p>Shot by Shola Ameobi from 20 yards. Save made by Joe Hart.</p>
    <span>90:00 
    <span class="extra-info">+0:07</span></span>
    <p>The ball is crossed by Davide Santon, Demba Ba has an effort at goal. Joe Hart makes a save.</p>
    <span>88:26</span>
    <p>Assist by Gael Clichy.</p>
    <span>88:26 
    <span class="extra-info">
      <span class="icon-live-text-goal">Goal scored</span>
    </span></span>
    <p class="event">
    <span class="event-title">
    <strong>Goal</strong> - Gnegneri Toure Yaya - 
    <strong>Newcastle 0 - 2 Man City</strong></span> Gnegneri Toure Yaya grabs a goal from close in high into the middle of the
    goal. Newcastle 0-2 Man City.</p>
    <span>88:00</span>
    <p>Inswinging corner taken by Yohan Cabaye from the left by-line played to the near post, Vincent Kompany manages to make a
    clearance.</p>
    <span>87:45</span>
    <p>Shola Ameobi has a drilled shot. Micah Richards gets a block in.</p>
    <span>87:13</span>
    <p>The ball is swung over by Sergio Aguero, clearance made by Shola Ameobi.</p>
    <span>85:05 
    <span class="extra-info">
      <span class="icon-live-text-substitution">Substitution</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Substitution</strong>
    </span> (Man City) makes a substitution, with Micah Richards coming on for David Silva.</p>
    <span>84:24</span>
    <p>Shola Ameobi gives away a free kick for an unfair challenge on Joleon Lescott. Joe Hart restarts play with the free
    kick.</p>
    <span>83:43</span>
    <p>Inswinging corner taken left-footed by David Silva from the right by-line to the near post, Shot from close range by
    Edin Dzeko clears the bar.</p>
    <span>83:17</span>
    <p>Sergio Aguero takes a shot. Save by Tim Krul.</p>
    <span>81:44 
    <span class="extra-info">
      <span class="icon-live-text-substitution">Substitution</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Substitution</strong>
    </span> Cheick Tiote goes off and Ryan Taylor comes on.</p>
    <span>80:42</span>
    <p>Cheick Tiote gives away a free kick for an unfair challenge on Pablo Zabaleta. The ball is sent over by David Silva,
    Close range header by Gnegneri Toure Yaya goes wide of the left-hand upright.</p>
    <span>79:46</span>
    <p>Joe Hart takes the direct free kick.</p>
    <span>79:46 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> Shane Ferguson receives a yellow card for unsporting behaviour.</p>
    <span>79:38</span>
    <p>Shane Ferguson gives away a free kick for an unfair challenge on David Silva.</p>
    <span>78:58</span>
    <p>Free kick crossed by Yohan Cabaye, clearance by Gareth Barry.</p>
    <span>78:58 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> Pablo Zabaleta goes into the book for unsporting behaviour.</p>
  </div>
  <div class="live-text blq-clearfix" id="more-live-text">
    <span>78:50</span>
    <p>Free kick awarded for an unfair challenge on Shane Ferguson by Pablo Zabaleta.</p>
    <span>77:41</span>
    <p>The ball is crossed by Cheick Tiote, Edin Dzeko manages to make a clearance.</p>
    <span>74:24</span>
    <p>Shot by Sergio Aguero from deep inside the penalty area misses to the right of the target.</p>
    <span>76:38</span>
    <p>Corner taken by Yohan Cabaye from the left by-line to the near post, clearance made by Gareth Barry.</p>
    <span>76:19</span>
    <p>The ball is swung over by Yohan Cabaye, save by Joe Hart.</p>
    <span>75:48</span>
    <p>Centre by Pablo Zabaleta.</p>
    <span>74:26</span>
    <p>Shola Ameobi crosses the ball, Headed effort from inside the area by Papiss Cisse misses to the right of the goal.</p>
    <span>74:24</span>
    <p>Sergio Aguero produces a right-footed shot from deep inside the penalty area which goes wide of the right-hand post.</p>
    <span>73:52 
    <span class="extra-info">
      <span class="icon-live-text-substitution">Substitution</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Substitution</strong>
    </span> Shola Ameobi joins the action as a substitute, replacing Hatem Ben Arfa.</p>
    <span>73:32 
    <span class="extra-info">
      <span class="icon-live-text-substitution">Substitution</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Substitution</strong>
    </span> Shane Ferguson replaces James Perch.</p>
    <span>73:17</span>
    <p>Edin Dzeko has an effort at goal from deep inside the area missing to the left of the goal.</p>
    <span>72:36</span>
    <p>Gareth Barry fouled by Papiss Cisse, the ref awards a free kick. Direct free kick taken by Nigel De Jong.</p>
    <span>69:42</span>
    <p>Sergio Aguero provided the assist for the goal.</p>
    <span>69:42 
    <span class="extra-info">
      <span class="icon-live-text-goal">Goal scored</span>
    </span></span>
    <p class="event">
    <span class="event-title">
    <strong>Goal</strong> - Gnegneri Toure Yaya - 
    <strong>Newcastle 0 - 1 Man City</strong></span> Goal scored by Gnegneri Toure Yaya from just outside the penalty box to
    the bottom right corner of the goal. Newcastle 0-1 Man City.</p>
    <span>69:02 
    <span class="extra-info">
      <span class="icon-live-text-substitution">Substitution</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Substitution</strong>
    </span> Edin Dzeko joins the action as a substitute, replacing Carlos Tevez.</p>
    <span>66:49</span>
    <p>Demba Ba sends in a cross, Joleon Lescott manages to make a clearance.</p>
    <span>66:28</span>
    <p>Shot by Demba Ba from 18 yards. Clearance by Gareth Barry.</p>
    <span>65:23</span>
    <p>Centre by David Silva, Joleon Lescott challenges Tim Krul unfairly and gives away a free kick. Direct free kick taken by
    Tim Krul.</p>
    <span>65:01</span>
    <p>Inswinging corner taken left-footed by David Silva played to the near post, Papiss Cisse makes a clearance.</p>
    <span>64:54</span>
    <p>The ball is swung over by Carlos Tevez, clearance by Fabricio Coloccini.</p>
    <span>64:01</span>
    <p>Effort on goal by Hatem Ben Arfa from inside the penalty box misses to the right of the target.</p>
    <span>60:56 
    <span class="extra-info">
      <span class="icon-live-text-substitution">Substitution</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Substitution</strong>
    </span> Nigel De Jong replaces Samir Nasri.</p>
    <span>58:44</span>
    <p>David Silva has an effort at goal. Blocked by Mike Williamson.</p>
    <span>57:51</span>
    <p>The ball is crossed by James Perch, clearance by Joleon Lescott.</p>
    <span>57:05</span>
    <p>Foul by Jonas Gutierrez on Sergio Aguero, free kick awarded. Free kick taken by Gareth Barry.</p>
    <span>56:55</span>
    <p>Cheick Tiote crosses the ball, Samir Nasri makes a clearance.</p>
    <span>56:20</span>
    <p>Free kick awarded for an unfair challenge on Davide Santon by Gnegneri Toure Yaya. Free kick taken by Yohan Cabaye.</p>
    <span>54:36</span>
    <p>Shot from 20 yards from Carlos Tevez. Save made by Tim Krul.</p>
    <span>53:17</span>
    <p>Carlos Tevez produces a right-footed shot from the edge of the box and misses to the right of the target.</p>
    <span>53:01</span>
    <p>Centre by David Silva, Jonas Gutierrez makes a clearance.</p>
    <span>52:44</span>
    <p>Short corner taken by Samir Nasri.</p>
    <span>52:33</span>
    <p>Gael Clichy sends in a cross, blocked by James Perch.</p>
    <span>50:17</span>
    <p>Free kick awarded for an unfair challenge on Carlos Tevez by James Perch. Gnegneri Toure Yaya has an effort direct from
    the free kick.</p>
    <span>49:41</span>
    <p>Jonas Gutierrez sends in a cross, Pablo Zabaleta gets a block in.</p>
    <span>48:02</span>
    <p>Foul by Jonas Gutierrez on Pablo Zabaleta, free kick awarded. Joe Hart restarts play with the free kick.</p>
    <span>47:10</span>
    <p>The ball is swung over by Papiss Cisse, clearance made by Joleon Lescott.</p>
    <span>45:01</span>
    <p>The match restarts for the second half.</p>
    <span>45:00 
    <span class="extra-info">+1:09 
    <span class="icon-live-text-half-time">Half time</span></span></span>
    <p class="event">
    <span class="event-title">
      <strong>Half Time</strong>
    </span> The half-time whistle blows.</p>
    <span>45:00 
    <span class="extra-info">+0:07</span></span>
    <p>The referee blows for offside against Gareth Barry. Tim Krul takes the free kick.</p>
    <span>43:30</span>
    <p>Demba Ba gives away a free kick for an unfair challenge on Vincent Kompany. Free kick taken by Joe Hart.</p>
    <span>41:43</span>
    <p>Handball by Samir Nasri. Free kick taken by Tim Krul.</p>
    <span>41:32</span>
    <p>The ball is swung over by Sergio Aguero.</p>
    <span>40:35</span>
    <p>Gareth Barry has an effort at goal from 12 yards. Fabricio Coloccini gets a block in. Shot from 12 yards by Gareth
    Barry. Clearance made by Davide Santon.</p>
    <span>39:22</span>
    <p>A cross is delivered by Hatem Ben Arfa, Demba Ba produces a header from inside the area that goes over the bar.</p>
    <span>37:52</span>
    <p>Yohan Cabaye takes the free kick.</p>
    <span>37:52 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> Gnegneri Toure Yaya goes into the referee&#39;s book for unsporting behaviour.</p>
    <span>37:44</span>
    <p>Free kick awarded for an unfair challenge on Davide Santon by Gnegneri Toure Yaya.</p>
    <span>36:55</span>
    <p>The ball is swung over by Pablo Zabaleta.</p>
    <span>35:57</span>
    <p>Gnegneri Toure Yaya takes the free kick.</p>
    <span>35:57 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> The referee books James Perch for unsporting behaviour.</p>
    <span>35:38</span>
    <p>James Perch concedes a free kick for a foul on Carlos Tevez.</p>
    <span>34:26</span>
    <p>Yohan Cabaye produces a right-footed shot from just outside the box that goes wide left of the goal.</p>
    <span>33:42</span>
    <p>Shot from 12 yards from Demba Ba. Blocked by Gael Clichy. Shot by Hatem Ben Arfa from 12 yards. Save by Joe Hart.</p>
    <span>31:37</span>
    <p>David Silva crosses the ball in from the free kick.</p>
    <span>31:37 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> Cheick Tiote receives a caution for unsporting behaviour.</p>
    <span>31:25</span>
    <p>Free kick awarded for a foul by Cheick Tiote on David Silva.</p>
    <span>31:09</span>
    <p>Drilled right-footed shot by Demba Ba. Blocked by Joleon Lescott.</p>
    <span>30:40</span>
    <p>Samir Nasri has a drilled shot. Yohan Cabaye gets a block in.</p>
    <span>30:14</span>
    <p>Shot by Cheick Tiote. Vincent Kompany gets a block in.</p>
    <span>28:58</span>
    <p>Yohan Cabaye fires a strike on goal direct from the free kick, Carlos Tevez gets a block in.</p>
    <span>28:58 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> Gareth Barry goes into the referee&#39;s book.</p>
    <span>28:51</span>
    <p>Free kick awarded for a foul by Gareth Barry on Yohan Cabaye.</p>
    <span>28:15</span>
    <p>Demba Ba takes a shot from a long way out clearing the bar.</p>
    <span>25:39</span>
    <p>Shot comes in from Carlos Tevez from the free kick, Tim Krul makes a save.</p>
    <span>25:39 
    <span class="extra-info">
      <span class="icon-live-text-booking">Booking</span>
    </span></span>
    <p class="event">
    <span class="event-title">
      <strong>Booking</strong>
    </span> Hatem Ben Arfa is cautioned.</p>
    <span>25:29</span>
    <p>Hatem Ben Arfa gives away a free kick for an unfair challenge on Gael Clichy.</p>
    <span>22:48</span>
    <p>The offside flag is raised against Sergio Aguero. Yohan Cabaye restarts play with the free kick.</p>
    <span>22:05</span>
    <p>The ball is crossed by Gael Clichy.</p>
    <span>20:17</span>
    <p>Long distance shot from Gael Clichy misses to the left of the goal.</p>
    <span>19:44</span>
    <p>Corner taken left-footed by David Silva from the right by-line, James Perch manages to make a clearance.</p>
    <span>18:35</span>
    <p>The ball is sent over by Pablo Zabaleta, clearance by Mike Williamson.</p>
    <span>16:43</span>
    <p>Sergio Aguero takes a shot. Tim Krul makes a save.</p>
    <span>15:24</span>
    <p>Papiss Cisse is flagged offside by the assistant referee. Free kick taken by Vincent Kompany.</p>
    <span>10:15</span>
    <p>Shot by David Silva. Save made by Tim Krul.</p>
    <span>9:45</span>
    <p>Corner taken by Samir Nasri from the left by-line to the near post, clearance made by Cheick Tiote.</p>
    <span>9:18</span>
    <p>Samir Nasri takes a short corner, David Silva sends in a cross, blocked by Hatem Ben Arfa.</p>
    <span>8:54</span>
    <p>Samir Nasri produces a curled right-footed shot from 18 yards. Blocked by James Perch.</p>
    <span>6:31</span>
    <p>Unfair challenge on Gareth Barry by Yohan Cabaye results in a free kick. Gnegneri Toure Yaya takes the direct free
    kick.</p>
    <span>4:33</span>
    <p>Carlos Tevez is flagged offside by the assistant referee. Free kick taken by Tim Krul.</p>
    <span>1:15</span>
    <p>Free kick awarded for an unfair challenge on Hatem Ben Arfa by David Silva. Direct free kick taken by Yohan Cabaye.</p>
    <span>0:06</span>
    <p>Carlos Tevez concedes a free kick for a foul on Cheick Tiote. Yohan Cabaye takes the free kick.</p>
    <span>0:00</span>
    <p>The game kicks-off.</p>
  </div>
  <button class="hide blq-clearfix" id="show-more-live-text" style="display: none;" type="button">
    <span class="text-indicator">More Live Text</span>
  </button>
  <p class="disclaimer">Live text and data provided by The Press Association</p>
</div> 
```

我最终想`'Gnegneri Toure Yaya'`用`'Yaya Toure'`.

* * *

编辑 - 我想用`'Yaya Toure'`. 但是我随后希望能够像以前一样使用整个评论正文，但要进行更改（如果我使用`find`然后`.replace`它将位与原始评论变量分开`'Gnegneri Toure Yaya'`但不更改原始评论变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:52:23.837

像这样搜索`text`必须匹配标签中的*整个文本*`- Gnegneri Toure Yaya -`，这就是你的情况。

改为正则表达式：

```
import re

findtoure = commentary.findAll(text = re.compile('Gnegneri Toure Yaya')) 
```

这将匹配`NavigableString`包含该名称的所有元素元素。

# c# - microsoft.interop.selection 文本

> ID：15054579
> 
> 赞同：1
> 
> 时间：2013-02-24T17:45:53.293
> 
> 标签：c#, ms-word, add-in, office-interop

在问我的问题之前，我想简要描述一下我的问题的背景：我正在 C# 上开发 ms word COM 插件，我需要处理用户的文本选择。现在我能够捕捉到选择事件 - 它看起来像

```
Microsoft.Interop.Word._Application app;
app = (Word._Application )Application; // Application object comes on addin's connection
app.Application.WindowSelectionChange+= 
            new Word.ApplicationEvents4_WindowSelectionChangeEventHandler(selChange);

///
void selChange(Word.Selection selection){

   MessageBox.Show(selection.Text); // this is my problem, Text property is not available

} 
```

// 属性 Text 不存在，但[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.selection.text%28v=office.11%29.aspx)告诉它存在。我怀疑这个属性不适用于 ms word 2007 - 在文档中只提到了 2003,2010 版本。但我怎么能做类似的事情`selection.getSelectedText()`？我试着玩`selection.Rows`, `selection.Rows[0]`, `selection.Words,selection.Words[0]`- 没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:47:46.323

根据[文档](http://msdn.microsoft.com/en-us/library/office/bb179341%28v=office.12%29.aspx)，该`Selection.Text`属性也应可用于 Word 2007。我为您的案例做了一个小样本实现来测试它，至少在 Word 2010 和 2013 上我不能让它失败：

```
var wordApplication = new Application() { Visible = true };
wordApplication.Documents.Add();
wordApplication.WindowSelectionChange += delegate(Selection mySelection) { Console.WriteLine(mySelection.Text); }; 
```

所以，我建议你检查你是否包含了正确的命名空间，并且`Selection`你正在使用的接口实际上是来自`Microsoft.Office.Interop.Word`命名空间的接口。

# jquery - jQuery 如何将 text() 应用于变量

> ID：15054580
> 
> 赞同：0
> 
> 时间：2013-02-24T17:46:13.123
> 
> 标签：jquery

我想应用 jQuery text() 方法来转义包含 < 或 > 等字符的 html 内容。相同的内容被“添加”到 div 块中，这就是为什么我需要转义 < 和 >

在这个例子中我无法弄清楚如何做到这一点：http: [//jsfiddle.net/n28uf/2/](http://jsfiddle.net/n28uf/2/)

```
<div class="container"></div>

jQuery(function(){
    var  content = '<hello world>';
    jQuery('.container').prepend(content); 
    // Where should I apply the .text() method?
}); 
```

我试过这个：

```
 jQuery('.container').prepend(jQuery.text(content)); 
```

但我收到此错误消息：

```
 Uncaught RangeError: Maximum call stack size exceeded 
```

[http://jsfiddle.net/n28uf/2/](http://jsfiddle.net/n28uf/2/)知道我应该对代码进行什么更改以使其正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:51:03.057

预先添加一个包装器 div 然后使用 填充它`.text()`呢？

```
jQuery(function(){
    var  content = '<hello world>';
    jQuery('.container').prepend('<div class="foo"></div>');
    jQuery('.foo').text(content);
}); 
```

[http://jsfiddle.net/AfW5k/](http://jsfiddle.net/AfW5k/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:09:02.307

1.  将内容添加到一个临时的 jQuery 对象中，使用`text()`它来转义它。
2.  使用 . 从临时对象中检索转义的内容`html()`。
3.  将转义的内容添加到容器中。

示例代码：

```
<div class="container"></div>

<script type="text/javascript">
jQuery(function(){
    var content = '<hello world>';
    var escapedContent = jQuery('<div></div>').text(content).html();
    jQuery('.container').prepend(escapedContent); 
});
</script> 
```

这将产生以下生成的 HTML 源代码：

```
<div class="container">&lt;hello world&gt;</div> 
```

简而言之，用于`text()`转义内容，并`html()`在不丢失转义字符的情况下进行检索。

# javascript - 让 JSONP 工作

> ID：15054582
> 
> 赞同：0
> 
> 时间：2013-02-24T17:46:30.760
> 
> 标签：javascript, jquery, ajax

我正在尝试从具有跨域支持的 php 服务器访问数据。因此，当我使用 dataType 尝试 $.ajax 时：'jsonp' 我在控制台中出现错误：Uncaught SyntaxError: Unexpected token 该文件被解释为 javascript 文件，请求失败。您是否有在没有此错误的情况下获取数据的想法。

```
$.ajax({
    url : 'http://domaine.com/json.php',
    contentType: "application/json; charset=utf-8",
    dataType : 'jsonp',
    success : function(data){
        console.log(data);
        // no enter in this callback
    },
    complete: function(data1, data2, data3){
        // no data from file.js
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:49:49.737

首先确保您的 PHP 脚本支持 JSONP。确定需要传递的查询字符串参数，以便脚本返回 JSONP。然后在浏览器中直接在地址栏中输入以下地址进行测试：

```
http://domain.com/json.php?callback=abc 
```

您应该会看到以下内容：

```
abc({ ... some JSON here ... }) 
```

`callback`如果您的 PHP 脚本需要不同的名称，您可能需要调整名称参数。如果您看到以下输出（`{ ... some JSON here ... }`未包含在您的 javascript 函数中），则可能是这种情况

一旦你确定你有一个返回 JSONP 的有效 PHP 脚本，你就可以使用它：

```
$.ajax({
    url : 'http://domain.com/json.php',
    jsonp: 'callback',
    dataType : 'jsonp',
    success : function(data){
        console.log(data);
        // no enter in this callback
    },
    complete: function(data1, data2, data3){
        // no data from file.js
    }
}); 
```

注意事项：

1.  我已经使用`jsonp: 'callback'`参数指定了回调
2.  我已经摆脱了该`contentType: 'application/json'`参数，因为 jQuery 的 JSONP 实现使用`script`不允许您设置任何请求标头的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:49:41.887

您需要添加`?callback=?`到请求中，以便评估正确的回调。但是，它可能不会被称为`callback`。您需要从域中找出它的名称。

如果域（和浏览器）支持[CORS](http://www.w3.org/TR/cors/)，你甚至不需要使用 JSONP。您可以使用普通请求。

# c++ - 如何找出两个向量之间的角度是外部的还是内部的？

> ID：15054593
> 
> 赞同：2
> 
> 时间：2013-02-24T17:47:36.693
> 
> 标签：c++, algorithm, vector, trigonometry, angle

我知道如何找出两个向量之间的角度，但它总是给我内角，但我希望它总是给我逆时针方向的角度，即使它大于 180。我使用的是 C++，但不是真的很重要，因为我需要得到理论。

这就是我现在使用的![公式](../Images/bbdd0ae16460f6debde7c3e04babcec8.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T18:01:39.250

您正在寻找该`atan2(y,x)`功能 ( [http://en.wikipedia.org/wiki/Atan2](http://en.wikipedia.org/wiki/Atan2) )。如果你给它一个 2D 向量的两个分量，它将给你向量与 x 轴的角度，逆时针方向。要解决您的特定问题，请尝试：

```
atan2(v_y, v_x) - atan2(u_y, u_x) 
```

然后，如果答案超出您想要的角度范围，您可以添加或减去 360 度。

# css - 如何摆脱 CSS nav 元素边框之间的空格？

> ID：15054594
> 
> 赞同：0
> 
> 时间：2013-02-24T17:47:37.197
> 
> 标签：css, menu, navigation

我有一个 CSS 水平导航栏，我使用左边框和右边框来创建每个菜单项之间的双色调分隔线。但是，由于某种原因，边界之间有一个空间，我不知道如何摆脱它。

这是：http: [//jsfiddle.net/ebZhW/1/](http://jsfiddle.net/ebZhW/1/)

这是我的CSS：

```
* {
    margin:0 ;
    padding:0 ;
}

body {
    background:#ffffff ;
    padding:40px 0 ;
    font-family:arial,helvetica,sans-serif ;
    color:#131313 ;
}

#topnav {
    width:100% ;
    height:36px ;
    -webkit-border-radius:8px 8px 0 0 ;
    -moz-border-radius:8px 8px 0 0 ;
    border-radius:8px 8px 0 0 ;
    background: #A50000;
    background: -webkit-gradient(linear, 0 0, 0 bottom, from(#A50000), to(#a10000));
    background: -webkit-linear-gradient(#A50000, #a10000);
    background: -moz-linear-gradient(#A50000, #a10000);
    background: -ms-linear-gradient(#A50000, #a10000);
    background: -o-linear-gradient(#A50000, #a10000);
    background: linear-gradient(#A50000, #a10000);
    -pie-background: linear-gradient(#A50000, #a10000);
    behavior: url(/pie/PIE.htc);
    position:relative ;
    top:87px ;
    z-index:50 ;
    }

    ul.menu {
    margin-left:0 ;
    padding-left:0 ;
    list-style-type:none ;
    }

    .menu li {
    display:inline ;
    color:#ffffff ;
    border-left:1px solid #5d0000 ;
    border-right: 1px solid #d31a1a ;
    padding:0 16px ;
    margin:0 !important ;
    }

    .menu li a {
    font-size:16px ;
    color:#ffffff ;
    text-decoration:none ;
    line-height:36px ;
    }

    .menu li:first-child {
    border-left:0px !important ;
    }

    .menu li:last-child {
    border-right:0px !important ;
} 
```

和我的菜单代码：

```
 <div id="topnav">
    <ul class="menu">
    <li><a href="#">Home</a></li>
    <li><a href="#">Events</a></li>
    <li><a href="#">News / Press</a></li>
    <li><a href="#">Photo Gallery</a></li>
    </ul>
    </div> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:52:15.023

出现空格是因为您将每个空格设置`li`为 display `inline`。这会导致标签之间的空白呈现（来自您的回车）。

像这样删除空格：

```
 <div id="topnav">
    <ul class="menu">
    <li><a href="#">Home</a></li><li><a href="#">Events</a></li><li><a href="#">News / Press</a></li><li><a href="#">Photo Gallery</a></li>
    </ul>
    </div> 
```

[http://jsfiddle.net/ebZhW/2/](http://jsfiddle.net/ebZhW/2/)

或者，您可以`float`让列表项出现在同一行，而无需强制将它们视为内联元素：

[http://jsfiddle.net/ebZhW/3/](http://jsfiddle.net/ebZhW/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:57:22.793

由于您使用元素的方式，正在渲染元素之间的空白`display:`。有几种解决方案，包括从 DOM 中删除空白。您还可以添加以下规则：

```
.menu {
    font-size: 0;
}
.menu li {
    font-size: /* whatever this is supposed to be */;
} 
```

...这将防止任何空白出现在`<ul>`

[http://jsfiddle.net/ExplosionPIlls/ebZhW/4/](http://jsfiddle.net/ExplosionPIlls/ebZhW/4/)

您可以改为添加`float: left`到`li`元素中。这将使它们相对于空白浮动，因此不会出现。它还使边框垂直延伸整个方式，这可能更可取。

[http://jsfiddle.net/ExplosionPIlls/ebZhW/5/](http://jsfiddle.net/ExplosionPIlls/ebZhW/5/)

# c - 颜色代码值转换为 2 位数字

> ID：15054596
> 
> 赞同：0
> 
> 时间：2013-02-24T17:47:46.100
> 
> 标签：c, math

我正在做一个项目，将 LED 的颜色更改为用户输入的 RGB 值的颜色。

程序现在改变每种颜色亮度的方式是提供一个数字`0`-`1`所以`0`完全打开`1`是完全关闭`0.50`是 50% 亮度等。

提供 for on 似乎有点倒退`0`，但这只是代码的编写方式。我的问题是如何将值转换为-`0`我已经通过将 3位数字除以给出了正确的数字，如果它是打开和关闭的，但由于它倒退，我将如何获得相反的结果这个的？`255``0``99``2.58``1``0`

这会是剩下的吗？因此，例如`240`/ `2.58`=`93`余数就是`7`我要使用的数字吗？不幸的是，数学从来都不是我的强项。我知道这个问题与某种语言无关，但我将用它来标记它，`C`因为这就是它将被写入的内容。如果有人可以提供一个使用它来获取数字剩余部分的示例`C`，那就太棒了。我知道模运算符，但我认为这不适用于我的情况，但我可能是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:52:57.853

```
double mapNumbers(double x, long xMin, long xMax, long yMin, long yMax)
{
  return ((double)(x - xMin) * (yMax - yMin)) / ((double)(xMax - xMin)) + yMin;
} 
```

使用上面的函数：

您可以在任何数字范围和任何其他数字范围`x`之间映射`0-255`并从中获取相应的数字：`0-99`

所以： `mapNumbers(10/*assuming this is x*/, 0, 255, 0, 99);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:57:27.973

好吧，要从 0 - 1 范围转换为 0 - 255 范围，只需乘以 255。相反，只需从 1 中减去第一个值。

```
result = (1 - x) * 255; 
```

# python - Pycharm - 安装包

> ID：15054598
> 
> 赞同：2
> 
> 时间：2013-02-24T17:48:01.250
> 
> 标签：python, packages, pycharm

所以我用虚拟环境创建了我的项目并安装了 pip + 分发。到目前为止一切都很好，但是当我单击安装按钮安装新软件包时，它会显示一个漂亮的：“Nothing to show”。

这是它的图像：

![在此处输入图像描述](../Images/1bcbf31b355daf16a2a227d0b4b23fb5.png)

我有[默认存储库](http://pypi.python.org/pypi)

那么我做错了什么？这不是安装 python 模块（如 PIL）或第三方 django 应用程序（如 django south）的正确方法吗？

编辑：我忘了提，它是试用版......这可能是因为它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:17:42.503

该问题是由 PyPI 最近的服务器端更改引起的，将在 PyCharm 2.7.1 更新中解决。请参阅[http://youtrack.jetbrains.com/issue/PY-8962](http://youtrack.jetbrains.com/issue/PY-8962)以跟踪问题的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T10:14:06.597

如果您使用代理（例如在公司环境中），那么您可能需要为 PyCharm 配置代理设置以显示包。

这些在 Pycharm 下：

> 文件 -> 设置 -> 外观和行为 -> 系统设置 -> HTTP 代理

在此处输入您的代理设置，例如主机名和端口号。

如果您不知道您的代理设置，那么这个问题可能会很有用：[如何在 Windows 上查看代理设置？](https://stackoverflow.com/questions/22368515/how-to-see-the-proxy-settings-on-windows/30751938#30751938)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T09:40:03.917

我多次遇到这样的问题，每次我发现问题对应于我的互联网连接。使用 linux 中的 wget 或 curl 以及 Windows 中的浏览器等工具检查您的 Internet 连接。

# ruby-on-rails - Ruby 中的 CSS 条件语句

> ID：15054603
> 
> 赞同：0
> 
> 时间：2013-02-24T17:48:12.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, conditional-statements

当用户登录时，我需要更改 div 按钮的颜色。

![在此处输入图像描述](../Images/c58bb2f440d8042b89251cd13f6511cf.png)

用户登录后，我希望他看到红色的“下载按钮”，就像 img 中的“立即播放”按钮。

这是现在的代码：

```
 #play_buttons
      #instant_play.play_button
        %p
          = "#{t :"asiaplus.download_client"}"
        .button
          = "#{t :"asianplus.download_now"}" 
      #play_now.play_button
        %p
          %span.highlight
            = "#{t :"asiaplus.web_based"}"
          = "#{t :"asiaplus.live_dealer"}"
        %a{:href => "#{live_casino_ho_lobby_asia_path(:tab => current_tab, :locale => current_locale)}", :class => "button", :title => "#{t :'asiaplus.play_now'}", :id => "ho_roulette"}
          = "#{t :"asiaplus.play_now"}" 
```

`.button`是左侧“立即下载”按钮的类，并`:id => "ho_roulette"`给出右侧“立即播放”按钮的样式。

好的，这是我在用户登录时实现“立即下载”按钮样式的解决方案，例如“立即播放”按钮：

```
 #play_buttons
     - if logged_in 
      #instant_play.play_button
        %p
          = "#{t :"asiaplus.download_client"}"
        .button
          = "#{t :"asianplus.download_now" :id => "ho_roulette"}" 
      #play_now.play_button
        %p
          %span.highlight
            = "#{t :"asiaplus.web_based"}"
          = "#{t :"asiaplus.live_dealer"}"
        %a{:href => "#{live_casino_ho_lobby_asia_path(:tab => current_tab, :locale => current_locale)}", :class => "button", :title => "#{t :'asiaplus.play_now'}", :id => "ho_roulette"}
          = "#{t :"asiaplus.play_now"}"
    - else 
      #instant_play.play_button
        %p
          = "#{t :"asiaplus.download_client"}"
        .button
          = "#{t :"asianplus.download_now"}" 
      #play_now.play_button
        %p
          %span.highlight
            = "#{t :"asiaplus.web_based"}"
          = "#{t :"asiaplus.live_dealer"}"
        %a{:href => "#{live_casino_ho_lobby_asia_path(:tab => current_tab, :locale => current_locale)}", :class => "button", :title => "#{t :'asiaplus.play_now'}", :id => "ho_roulette"}
          = "#{t :"asiaplus.play_now"}" 
```

基本上，当用户登录时，我使用了条件语句添加`:id => "ho_roulette"`到我的 div 按钮。

这个解决方案正确吗？我想我也可以使用状态类活动作为其他解决方案，但我不想碰我的 SASS 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:17:54.607

关于您的解决方案，我会修改两点：

1.  HTML`id`标签应该是唯一的，因此您不应该有两个具有相同 ID 的不同元素。你肯定想`class`改用。

2.  你在这里重复了很多代码。使用标签内部的条件会更好，并利用 HAML 忽略具有`nil`值的键的事实：

    ```
    play_buttons
      #instant_play.play_button
      %p
        = t :"asiaplus.download_client"
      .button
        = t :"asianplus.download_now", :class => ("active" if logged_in)
      #play_now.play_button
      %p
        %span.highlight
          = t :"asiaplus.web_based"
        = t :"asiaplus.live_dealer"
      = link_to t("asiaplus.play_now"), live_casino_ho_lobby_asia_path(:tab => current_tab, :locale => current_locale), :class => ["button", ("active" if logged_in)], :title => t('asiaplus.play_now'), :id => "ho_roulette"} 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:13:54.997

你的解决方案很好。条件 CSS 是最简单的解决方案。不过你应该把它擦干。不要在 if/else 语句中包含全部内容，只需为您的`id`:

```
 #instant_play.play_button
    %p
      = t(:"asiaplus.download_client")
    .button
      = t(:"asianplus.download_now"), :id => ('ho_roulette' if logged_in)
  #play_now.play_button
    %p
      %span.highlight
        = t(:"asiaplus.web_based")
      = t(:"asiaplus.live_dealer")
    %a{:href => live_casino_ho_lobby_asia_path(:tab => current_tab, :locale => current_locale), :class => "button", :title => t(:'asiaplus.play_now'), :id => "ho_roulette"}
      = t(:"asiaplus.play_now") 
```

## 考虑：

*   您应该按照@apneadiving 的建议重新格式化您的`t()`.

*   @charleyc 在拥有`id`独特性方面是 100% 正确的。考虑使用他的解决方案并更改您的 SASS 文件......以及使用`id`标签定义 CSS 规则的方法。状态（如 'active' 或 'ho_roulette'）应该*始终*是 CSS 类。

# macos - “config”脚本存在于您的系统或 Homebrew 目录之外

> ID：15054605
> 
> 赞同：15
> 
> 时间：2013-02-24T17:48:19.377
> 
> 标签：macos, configuration, path, homebrew

跑“brew医生”并得到一些错误。我按照此链接上的建议设法解决了路径问题：[如何修改 Homebrew 的路径？](https://stackoverflow.com/questions/10343834/homebrew-wants-me-to-amend-my-path-no-clue-how?rq=1).

但是，完全迷失了如何处理以下错误：

```
Warning: "config" scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following "config" scripts:

/opt/sm/pkg/active/bin/curl-config
/opt/sm/pkg/active/bin/ncurses5-config
/opt/sm/pkg/active/bin/ncursesw5-config
/opt/sm/pkg/active/bin/pkg-config
/opt/sm/pkg/active/bin/xml2-config
/opt/sm/pkg/active/bin/xslt-config 
```

小白。运行 OSX。感谢更聪明的绝地武士的任何帮助......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-13T14:41:27.347

如果您看到此消息，则表示您在未使用自制软件的情况下安装了软件包。如果这些软件包只安装在自制软件之外，它们的配置脚本应该不会干扰自制软件，您不必担心。例如`curl`，如果您在 homebrew 和另一个包管理器中安装或手动安装，则可能会出现问题。

如果您需要这些软件，您应该删除它们并在自制软件中重新安装它们，否则您可以保留它们`/opt`或卸载它们。

# java - 测试图灵机仿真程序

> ID：15054613
> 
> 赞同：2
> 
> 时间：2013-02-24T17:48:54.917
> 
> 标签：java, testing, turing-machines

我正在尝试为 Java 中的图灵机模拟器程序提出大型测试用例。

该程序从输入文件中读取数据并根据测试用例字符串和图灵机规则列表运行模拟。执行以下规则后，程序将打印字符串是否被接受、拒绝或在给定数量的步骤中不停止。

该程序基本上是在给定一些输入字符串的情况下，在纸上手动通过图灵状态机的模拟。

我发现测试这个程序很困难。该程序适用于所有基本的图灵机和相对较小的测试用例。我想测试这个程序，给定一个非常大的测试字符串（约 30 个字符）、5000 个步骤以及一些大数字或规则和状态。

我想知道是否有人可以帮助我为此提出一个好的测试用例？

示例测试用例

```
7 15 //number of states and number of rules
0 0 3 B R //[current state, transition character, destination state, value to write, direction to move]
0 B 2 B R
0 x 2 x R
3 x 3 x R
3 B 1 B R
3 0 6 x R
6 x 6 x R
6 0 4 0 R
6 B 5 B L
4 x 4 x R
4 B 2 B R
4 0 6 x R
5 0 5 0 L
5 x 5 x L
5 B 3 B R
3 15 //number of testcases and number of steps to come to a halt
00
000
000000 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:57:39.177

如果您正在寻找测试用例来对您的实现进行压力测试，您可能需要查看[繁忙的海狸图灵机](http://en.wikipedia.org/wiki/Busy_beaver#Examples)，它们是具有指定数量的状态和已知运行时间最长的磁带符号的图灵机在终止之前。我们知道这些机器完成运行所需的确切时间，因此您应该能够在已知会占用大量时间和空间的 TM 上测试您的模拟器，并确认您的计步器工作正常。

希望这可以帮助！

# html - 在具有溢出属性的 DIV 内使用负边距

> ID：15054620
> 
> 赞同：2
> 
> 时间：2013-02-24T17:49:48.097
> 
> 标签：html, css, overflow

我有一个容器，里面有一个图像。Jscrollpane 应用在容器上，所以它的溢出隐藏了。我想将具有负边距的图像的位置更改为容器外部。但我不能因为溢出：隐藏是活动的。我将其更改为溢出-x，但它不起作用。

在线查看：http: [//jsfiddle.net/e6444/1/](http://jsfiddle.net/e6444/1/)

```
 #container {
    width:500px;
    height:300px;
    background:grey;
    overflow-y:hidden;
    margin:0 auto;
}

#image {
    width:150px;
    height:150px;
    background:url("http://www.audiapproved.com/ImgThumb?id=16033-500-335");
    margin:0 0 0 -30px;
}

<div id="container">
    <div id="image">
        Text, text, text Text, text, text Text, text, text Text, text, text
    </div>
</div> 
```

我想要以下内容：http: [//jsfiddle.net/e6444/2/](http://jsfiddle.net/e6444/2/)但具有溢出属性。（我需要它用于 jscrollpane 插件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:55:29.513

您可以为您的溢出添加另一个容器：隐藏内容。

```
<div id="container">
    <div id="content">
        This is my content that can be overflow:hidden
    </div>
    <div id="image">
        Text, text, text Text, text, text Text, text, text Text, text, text
    </div>
</div> 
```

[http://jsfiddle.net/wLrCU/1/](http://jsfiddle.net/wLrCU/1/)

# scala - Scala 2.10 反射：类内案例类的构造函数

> ID：15054624
> 
> 赞同：2
> 
> 时间：2013-02-24T17:50:03.637
> 
> 标签：scala, reflection, case-class

我已经使用这个问题的公认答案来构建小助手类来从值数组 [构造案例类：从参数集合构造案例类](https://stackoverflow.com/questions/14785054/construct-case-class-from-collection-of-parameters)

如答案中所述，内部案例类不起作用。你得到一个

```
ScalaReflectionException: class X is an inner class, use reflectClass on an InstanceMirror to obtain its ClassMirror 
```

正如异常所解释的那样，我无法弄清楚如何使用 InstanceMirror。这是我当前的可 REPL 代码（由于缓存，比需要的稍微复杂一些）。

```
import scala.reflect.runtime.universe._ 

object ReflectUtil {
  private val constructorCache = collection.mutable.HashMap[String, MethodMirror]()

  def constructFromSeq[T: TypeTag](args: Seq[Any]): T = {
    val tag = typeTag[T]
    val strTag = tag.toString
    var constructorMirror = constructorCache.getOrElseUpdate( strTag, {
      val rm = runtimeMirror(getClass.getClassLoader)
      val classSymbol = tag.tpe.typeSymbol.asClass
      val classMirror = rm.reflectClass(classSymbol) // wrap with try/catch?
      val constructorSymbol = tag.tpe.declaration(nme.CONSTRUCTOR).asMethod
      classMirror.reflectConstructor(constructorSymbol)
    })
    constructorMirror(args: _*).asInstanceOf[T]
  } 
}   

case class X(a:String, b:Int)

class Out { 
  case class Y(a:String, b:Int) 

  def buildY(arr:Array[Any]) = {
    ReflectUtil.constructFromSeq[Y](arr)
  }
}

val arr = Array[Any]("asdf", 1234)
ReflectUtil.constructFromSeq[X](arr) // this works

val inst = new Out
inst.buildY(arr) // this doesn't work 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:08:45.027

例外意味着您需要外部引用来构造内部类的实例（例如，构造`Y`您需要 的实例`Out`）。那你就可以了`rm.reflect(instanceOfOut).reflectClass...`。

# scala - 在 scala 的字符串插值中循环

> ID：15054625
> 
> 赞同：3
> 
> 时间：2013-02-24T17:50:12.903
> 
> 标签：scala, scala-2.10, string-interpolation

这是一个有点晦涩的问题，但是在 Scala 的字符串插值中循环的最佳方式是什么？例如，如果你想这样做

```
 html"""<ul>
  ${
    for (todoItem <- todoList) {
      html"""<li>TODO: ${todoItem}</li>"""
    }
  }
  </ul>""" 
```

我看不到积累内部 html 类以便字符串插值器可以使用它的简洁方法。我唯一能想到的是

```
 html"""<ul>
  ${
    var htmlList=List.empty[Html]
    for (todoItem <- todoList) {
      htmlList :+ html"""<li>TODO: ${todoItem}</li>"""
    }
    htmlList
  }
  </ul>""" 
```

并在我的自定义 html 插值器中添加对它的支持

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T18:37:21.490

无论您是否在字符串插值中工作，都没有任何区别。这实际上是字符串插值的重点：在一个代码块中，您可以使用该语言的所有功能和特性，就像它是任何其他块一样。

您应该以函数式风格编写此代码，您可以`yield`在`for`循环中使用它，或者在列表中使用地图：

```
html"""<ul>
${
  for (todoItem <- todoList) yield html"""<li>TODO: $todoItem</li>"""
}
</ul>"""

html"""<ul>
${
  todoList.map{ todoItem => html"""<li> ODO: $todoItem</li>""" }
}
</ul>""" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-20T07:40:53.013

带有字符串输出的示例，最多从列表顶部获取 3 个元素。@rex-kerr 答案是正确的，但他正在生成 html 元素。在我的示例中，我生成文本作为输出。关键思想是`mkString`召唤。

```
 val ids = List(1,4,6,7,8,99,42)
  val r = s"""
     |<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sk="sk:asdf:fuse:osr:soap:type" xmlns:sk1="sk:fdsa:fuse:ode:commontypes:soap:type">
     |   <soap:Header/>
     |   <soap:Body>
     |      <sk:GetSomeEntityRequest>
     |         <sk1:MessageHeader>
     |            <sk1:Uuid>1</sk1:Uuid>
     |         </sk1:MessageHeader>
     |         <sk:SomeEntityList>
     |            ${(for(singleId <- ids.take(3)) yield {s"<sk:entityId>${singleId}</sk:entityId>"}).mkString("\n")}
     |         </sk:SomeEntityList>
     |      </sk:GetSomeENtityRequest>
     |   </soap:Body>
     |</soap:Envelope>
     |""".stripMargin 
```

# c++ - 如何将位图数组从托管 C++ 传递到非托管 C++

> ID：15054631
> 
> 赞同：0
> 
> 时间：2013-02-24T17:50:30.280
> 
> 标签：c++, arrays, unmanaged, managed, hbitmap

`System::Drawing::Bitmaps`我目前在托管 C++ 代码中有一个 dll数组。我希望能够从非托管（本机）C++ 调用托管 C++ 中的方法。问题是如何将数组传递回非托管 C++？

我可以调用`GetHbitmap()`托管 C++ 位图，该位图返回`IntPtr`. 我应该传递一个 IntPtrs 数组吗？不太确定最好的方法来做到这一点。所以要清楚我有这个：

托管 C++ 方法：

```
void GetBitmaps(<????>* bitmaps)
{
    //Calling into C# to get the bitmaps

    array<System::Drawing::Bitmap^>^ bmp=ct->DataGetBitmaps(gcnew String(SessionID));
    for(int i=0;i<bmp.Length;i++)
    {
        System::Drawing::Bitmap^ bm=(System::Drawing::Bitmap^)bmp.GetValue(i);
        IntPtr hBmp=bm->GetHbitmap();
    }

    //So now how to I convert the hBmp to an array value that I can then pass back to unmanaged C++(hence the <????> question for the type)
} 
```

是一个 HBITMAPS 数组吗？如果是这样，您如何将`IntPtr`hBmp 转换为该数组？

托管 C++ 代码运行良好，并且正确获取位图数组。但是现在当非托管 C++ 调用 GetBitmaps 方法时，我需要将这些位图返回到非托管 C++。我不知道我应该传入什么类型的变量，然后一旦我传入它，我该怎么做才能将它转换为非托管 C++ 可以使用的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:54:19.777

您肯定需要创建一个非托管数组来调用您的本机代码。之后，您还必须进行适当的清理。所以基本代码应该是这样的：

```
#include "stdafx.h"
#include <windows.h>
#pragma comment(lib, "gdi32.lib")
#pragma managed(push, off)
#include <yourunmanagedcode.h>
#pragma managed(pop)

using namespace System;
using namespace System::Drawing;
using namespace YourManagedCode;

    void SetBitmaps(const wchar_t* SessionID, CSharpSomething^ ct)
    {
        array<Bitmap^>^ bitmaps = ct->DataGetBitmaps(gcnew String(SessionID));
        HBITMAP* array = new HBITMAP[bitmaps->Length];
        try {
            for (int i = 0; i < bitmaps->Length; i++) {
                array[i] = (HBITMAP)bitmaps[i]->GetHbitmap().ToPointer();
            }
            // Call native method
            NativeDoSomething(array, bitmaps->Length);
        }
        finally {
            // Clean up the array after the call
            for (int i = 0; i < bitmaps->Length; i++) DeleteObject(array[i]);
            delete[] array;
        }
    } 
```

您的问题中几乎没有足够的信息来使这一点准确，我不得不使用占位符名称来表示 C# 类名称和命名空间以及本机代码 .h 文件和函数名称和签名等内容。您当然必须替换它们。

# css - 在 Chrome 中使用 font-face 时出现奇怪的字长问题

> ID：15054633
> 
> 赞同：0
> 
> 时间：2013-02-24T17:50:32.537
> 
> 标签：css, font-face

我有一个非常奇怪的问题，在 Chrome 中查看网站时偶尔会发生。您可以在下图中看到发生的问题：

![这是正在发生的问题](../Images/9cebb9cc2d5efe84a8f9906c29c3804f.png)

它看起来像是一个溢出/断字/自动换行 CSS 问题，但绝对不是。我知道这一点，因为如果我在 Chrome 的开发控制台中将字体更改为像 Helvetica 这样的标准字体，它会自行排序并恢复正常，如下所示：

![恢复正常](../Images/8f7789458ab28a5c6c2a868956e842c1.png)

如果我将它改回字体类型，那么一切正常！这是一个非常奇怪的问题。它只是偶尔发生，我还没有在 Chrome 以外的任何浏览器中看到它发生过。似乎 Chrome 正在努力使用字体或其他东西来计算单词的长度。它也发生在页面上的每个元素上，而不仅仅是上图中的段落。

这是字体的 CSS：

```
@font-face {
    font-family: 'gotham_lightregular';
    src: url('/ekmps/shops/lm_boutique/resources/Other/gotham-light-webfont.eot.txt');
    src: url('/ekmps/shops/lm_boutique/resources/Other/gotham-light-webfont.eot.txt?#iefix') format('embedded-opentype'),
         url('/ekmps/shops/lm_boutique/resources/Other/gotham-light-webfont.svg.txt#gotham_lightregular') format('svg'),
         url('/ekmps/shops/lm_boutique/resources/Other/gotham-light-webfont.ttf.txt') format('truetype'),
         url('/ekmps/shops/lm_boutique/resources/Other/gotham-light-webfont.woff.txt') format('woff');
    font-weight: normal;
    font-style: normal;
} 
```

**编辑**

[这是我正在开发的网站。](http://www.lamaisonboutique.co.uk/index.asp)但是我不确定它是否会有所帮助，因为问题当前没有发生，当它发生时很难抓住它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T22:19:57.933

我遇到了同样的问题，发现它与我在我的 css 文档中的这个样式块有关：

```
* {
    /* optimize text for legibility */
    text-rendering: optimizeLegibility;
} 
```

我能够通过删除有问题的 css 然后添加这段 jQuery 代码来解决它：

```
$(function() {
    $("body").css("text-rendering", "optimizeLegibility");
}); 
```

我认为 Chrome 中一定存在导致此问题的渲染问题，但在 DOM 准备好后应用 optimizeLegibility 样式似乎可以解决问题。

# c# - 创建自己的集合类

> ID：15054634
> 
> 赞同：0
> 
> 时间：2013-02-24T17:50:37.707
> 
> 标签：c#, console

我是一名新的 C# 开发人员，现在我已经编程了 2 个月。我现在已经到了想要创建自己的集合类的部分，但是我遇到了一些问题。

我想做什么？- 我想创建一个自己的通用集合类（列表）来存储数据。我的班级应该有将项目添加到列表末尾或从列表中删除项目的方法。

*   My Class 应该具有列表中项目数和 iist 容量的属性。

*   我必须将列表存储在班级内的数组中，并且数组必须具有预定义的长度。

所以首先我想创建一个设计并写下我的类应该是什么样子，我只写下我需要的所有东西，比如方法、属性，这就是我到目前为止所做的：

```
 public void Propertie () // depending on how many items I have, I create an propertie for each item
        {

        }
        public void addItems() // method for adding items 
        {

        }

        public void removeItems() // method for removing items
        {

        }

        int[] storeList; // array for storing the list 
    } 
```

所以在我开始真正的编码之前，我只想知道我是否错过了或做错了什么？

编辑：我不允许在此作业中使用任何 c# 集合或泛型类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:00:03.113

> 我只想知道我是否错过或做错了什么？

您在这里展示的设计缺少一些东西。首先，您说要创建一个*通用*列表。您将如何将通用数据存储在整数数组中？

另外，你给的签名`addItems`是

```
public void addItems() 
```

你给的签名`removeItems`是

```
public void removeItems() 
```

如果没有给出任何数据，您的列表对象如何知道要添加什么？同样，如果客户端代码没有告诉它，它如何知道要删除什么（您始终可以删除第一项，或始终删除最后一项，但是您处于堆栈或队列区域，而不是标准对象面向列表 API）。

我建议查看[System.Collections.Generic.List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)的 API ，这是您应该在此处尝试模拟的内置类。您不需要实现 List 实现的所有属性和方法，但您应该实现该 API 的一部分。我会推荐

```
public sealed class MyList<T>
{
    public int Count { get; }
    public T this[int index] { get; set; }
    public MyList();
    public void Add(T item);
    public void RemoveAt(int index);
} 
```

作为列表类的最低限度 API。您可以通过声明一个类型的字段`T[]`作为后备存储以及一个内部`size`字段来实现它。不要忘记，如果客户端代码添加的项目超过后备存储的长度，您必须分配一个新的后备存储数组（可能是旧数组的两倍），将元素复制到新数组，然后开始将新数组视为后备存储。

您还应该考虑实现[System.Collections.Generic.IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)，这不是绝对必要的，但会使集合类更加有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:35:50.880

您可以实现该`IList<T>`接口，它包含构建自己的通用列表类所需的所有签名。[IList 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:00:04.330

假设您已经向自己保证您确实想要这样做，您应该考虑：

1.  你要支持什么类型（你说通用，但在你的例子中有一个 int 数组
2.  你将如何支持访问和迭代（例如你会支持foreach，数组样式[]）
3.  程序员将如何指定长度（你说固定长度，编程是否预先指定，是否有默认值）
4.  你会支持查找方法、排序方法等吗？
5.  程序员可以将一个集合复制到另一个更大的集合中吗？一个更小的？
6.  你要支持先进先出、后进先出、双向迭代等...

创建一个好的通用集合会很困难，所以我建议您查看您希望集合支持的所有内容并从那里开始。

所以，是的，你最初的想法仍然不完整。至少它需要一种方法来访问数据并知道那里有多少数据。

# javascript - JavaScript 递增 0.5 - 如何？

> ID：15054637
> 
> 赞同：7
> 
> 时间：2013-02-24T17:51:01.620
> 
> 标签：javascript, variables, increment

我在将数字增加 0.5 时遇到问题。我使用了“+=”运算符，但不是增加我的数字，而是在数字末尾添加“0.5”值。这个例子是这样的：

```
 <script>
function setTempUp(){
var value = document.getElementById("targetTemp").firstChild.data;
var newvalue = value.replace("°","");
var num = new Number(newvalue);
var num = newvalue += 0.5;
var newtemp = newvalue + '°';
document.getElementById("targetTemp").innerHTML = newtemp;
var cover = document.getElementById('tempChange').clientHeight;
var coverInt = parseInt(cover, 10);
var coverNew = cover - 11;
document.getElementById('tempChange').setAttribute("style","height:" + coverNew + "px");
}       
</script> 
```

我还将“附加”“°”到我的“newTemp”，因为我有温度示例。这是一个问题吗？

因此，例如，我的号码是 24 - 执行时我得到“240.5” :(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T17:53:05.487

`newvalue`是一个字符串。直接用`+=`在你的`num`：

```
num += 0.5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:58:47.117

您将它转换为一个数字，但仍然在以下代码中调用字符串变量：

```
var num = new Number(newvalue);
var num = newvalue += 0.5;
var newtemp = newvalue + '°'; 
```

我认为你的意思是

```
var num = new Number(newvalue);
num = num += 0.5;
var newtemp = num + '°'; 
```

但无论它是什么，您都应该在函数之外保留一个数字变量，并增加它，而不是加载上次运行时在屏幕上发布的温度，然后一遍又一遍地重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:54:20.210

`newValue`是一个字符串 - 返回`value.replace("°","");`

代替

```
var num = newvalue += 0.5; 
```

采用

```
newValue = parseInt(newvalue, 10) + 0.5; 
```

（由于您没有`num`在其他任何地方使用，因此您无需为其分配任何结果。）

# jquery - 递归销毁jQuery UI Dialog的内容

> ID：15054640
> 
> 赞同：0
> 
> 时间：2013-02-24T17:51:07.147
> 
> 标签：jquery, jquery-ui, dialog, destructor

我的代码打开一个 jQuery UI 对话框并使用 AJAX 加载内容。对话框内正在初始化其他几个小部件。当对话框关闭时，我 destroy() 和 remove() 它是 div，但它不会破坏里面的小部件。

如何在对话框关闭时正确删除 mydiv 中的所有元素？

```
// mydiv contains variable content
mydiv.dialog({

    autoOpen: true,
    close: function(){
        // destroy mydiv and all widgets inside it

        mydiv.dialog('destroy').remove();

        alert('Unfortunatelly, inner dialog remained. How to get rid of ALL widgets placed inside "mydiv?"');
        // How do i destroy everything inside?
    }        
}); 
```

交互式示例：http: [//jsfiddle.net/r4cHY/4/](http://jsfiddle.net/r4cHY/4/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:02:29.923

我解决了我自己的问题。jQuery UI 对话框的实现将指定完全从其父级中删除，并将其移动到可以更好定位的位置。不幸的是，打开它的对话框的上下文和小部件之间不再有链接，这就是为什么销毁内容不会影响对话框的原因。

更好的小提琴：http: [//jsfiddle.net/gxXBY/](http://jsfiddle.net/gxXBY/)

这会在复杂的 UI 系统中导致各种负面影响，我相信这是 jQuery UI 中的一个错误。这是一个修复：

```
var oldcr = $.ui.dialog.prototype._create;
$.ui.dialog.prototype._create = function(){
    var self=this;
    $('<div/>').insertBefore(this.element).on('remove',function(){
        self.element.remove();
    });
    oldcr.apply(this,arguments);
}; 
```

将此添加到您的 javascript 中的任何位置，它将修复所有对话框。非常适合我。

# android - Android开发云数据库

> ID：15054654
> 
> 赞同：2
> 
> 时间：2013-02-24T17:53:05.830
> 
> 标签：android, database, cloud

我想创建一个需要存储每个用户信息的安卓游戏。我是这个问题的新手，我不知道该怎么做。

我想我只需要一个带有数据库的服务器，但我无法将我的个人计算机用作数据库服务器，那么有没有办法拥有一个“云数据库”并且如果可能的话免费？

请问，有人可以指导我这个项目吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:25:53.880

Amazon SimpleDB 是一种非关系型数据库，用于存储较小的非结构化数据。Amazon SimpleDB 将每个域的存储大小限制为 10GB。Amazon SimpleDB 提供简单性和灵活性。SimpleDB 自动索引所有数据。Amazon SimpleDB 定价基于您的实际盒子使用情况。您可以在 Amazon SimpleDB 中存储任何 UTF-8 字符串数据。

[http://aws.amazon.com/simpledb/](http://aws.amazon.com/simpledb/) [http://aws.amazon.com/documentation/simpledb/](http://aws.amazon.com/documentation/simpledb/) [http://aws.amazon.com/code/Amazon-SimpleDB](http://aws.amazon.com/code/Amazon-SimpleDB) [http://www.sdbexplorer.com /](http://www.sdbexplorer.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T06:45:45.493

NuoDB 是一个分布式云数据库，建立在原始的新兴架构上，完全支持 SQL 和 ACID 保证。它是一个可弹性扩展的分布式数据库，为开发人员和管理员提供了用于集中监控部署的单一直观界面。NuoDB 云数据库提供对 Node.JS、Ruby、PHP、Java、.NET 和 C++ 的全面支持。它是高性能云、数据中心、移动和 SaaS 应用程序的理想数据库。

# jquery - 颜色框子窗口值

> ID：15054656
> 
> 赞同：1
> 
> 时间：2013-02-24T17:53:19.657
> 
> 标签：jquery, colorbox

这看起来很简单，但几乎花了3个小时的时间，仍然没有得到解决方案

我有一个颜色框插件，我使用颜色框从主页转到其他页面，我的意思是当我单击一个按钮时，会打开一个弹出窗口，其中包含一个具有下拉列表的新页面，当我单击按钮或颜色框时弹出窗口，我只希望弹出到主页中的选定值，以便使用该值我可以进行操作以进一步移动

这是我尝试过的代码

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.PopUp').colorbox({
            iframe: true,
            innerWidth: 250,
            innerHeight: 150,
            onClosed: function () {
            }
        });
    })
</script> 
```

弹出窗口是用新页面打开的，但是当我单击关闭按钮时，我没有得到如何从弹出窗口中返回下拉列表的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:40:18.050

您要做的是访问 iFrame 的父级并将一些 DOM 元素设置为下拉列表的值，以便您可以在 onClosed: 函数中检索它。

所以，在你的 iFrame 添加一些脚本来做这样的事情

```
<script>

   $('#completedAction').onClick(function() {
      var selectedValue = $('#dropdown option:selected').val();

      $('#domElementWhereYouWantToStoreValueOnParent', window.parent.document).val(selectedValue);

      parent.$.fn.colorbox.close(); //Close Colorbox

   });

</script> 
```

然后在您的 onClosed 函数上，您可以像这样检索值：

```
var valueFromiFrame = $("#domElementWhereYouWantToStoreValueOnParent").val(); 
```

祝你好运。

# excel - Excel 运行宏后没有响应

> ID：15054657
> 
> 赞同：0
> 
> 时间：2013-02-24T17:53:19.920
> 
> 标签：excel, excel-2007, vba

我使用下面的代码将一列从一张纸复制到另一张纸，然后用 Null 值替换空白单元格：

```
'Copying If Employee
sourceSheet.Activate
Range(Cells(2, 7), Cells(Rows.Count, 7).End(xlUp)).Select
Selection.Copy
destSheet.Activate
Range("E2", Cells(Rows.Count, 7)).PasteSpecial

For Each cell In Range("E2", Cells(Rows.Count, 5))
If Len(cell.Value) = 0 Then
    cell.Value = "No"
End If 
```

当我用它替换 for 语句时，`Range("E2", Cells(500,5))`它工作正常。

可能是什么问题？我无法弄清楚。谁能帮我这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T19:36:23.057

Excel 2007 有 1,048,576 行。

1.  您的 For each 循环必须经过一百万个单元格，并且每次必须将一个单元格（及其所有属性）加载到内存中。单元对象的这种不断加载和卸载非常消耗资源。

2.  每次将值分配给`No`单元格时，Excel 都会重新计算工作表、刷新屏幕并可能触发工作表/工作簿/单元格事件。所有这一切在评估下一个单元格到下一个单元格之前。除非你有大量的数据，否则在这个例子中这将发生几百次。

500 个细胞是一个小得多的数字，可以毫无问题地处理。

**编辑：**

获取最后一行。

如果要获取最后一个**可见**行的数据，请使用：

```
With Workbooks(myWorkbook).Worksheets(myWorksheet)
   LastRow = .Cells(.Rows.Count, "E").End(xlUp).Row
End With 
```

如果您想获取数据的最后一行，无论它是可见的还是隐藏的，请使用：

```
With Workbooks(myWorkbook).Worksheets(myWorksheet)
   LastRow =.Range("E2").EntireColumn.Find("*", .Cells(1, .Range("E2").Column), , , xlByRows, xlPrevious).Row
End With 
```

有关更多信息[，Rondebruin](http://www.rondebruin.nl/last.htm)有一个很好的网站，其中包含有关获取 las 行/列的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:02:12.540

尝试

```
For Each cell In Range("E2", Cells(destSheet.UsedRange.Rows.Count, 5))
If Len(cell.Value) = 0 Then
    cell.Value = "No"
End If 
```

或者更优雅（并且可能更快），

```
Dim calcStatus As XlCalculation
calcStatus = Application.Calculation

Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual

For Each cell In Range("E2:E" & destSheet.UsedRange.Rows.Count)
If Len(cell.Value) = 0 Then
    cell.Value = "No"
End If    

Application.Calculation = calcStatus
Application.ScreenUpdating = True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T09:02:47.593

正如 Cabierberach 正确指出的那样，您当前的例程循环超过 1M 行。除了他和 JustinJDavies 的解决方案之外，请考虑以下 hack：

无需将值设置`0`为 ，`No`您只需更改格式，如果单元格`No`每次显示为 `0`这可以在没有宏的情况下通过将这种自定义格式应用于单元格来完成：`0,-0,"No",@`. 您可能需要将 替换为`0`您的默认格式 - 有关自定义数字格式的详细说明，请参阅[此链接](http://www.ozgrid.com/Excel/CustomFormats.htm)。

如果你想在 VBA 中这样做，这一行就足够了：

```
Range("E2:E" & Cells(Rows.Count, 1).End(xlUp).Row).CustomFormat = "0,0,""No"",@" 
```

# java - 在Java中，如何分配给定数量的内存，并保持到程序退出？

> ID：15054659
> 
> 赞同：0
> 
> 时间：2013-02-24T17:53:53.147
> 
> 标签：java, memory, memory-management

我正在做一些关于记忆的实验。我遇到的第一个问题是如何在运行时分配给定数量的内存，比如 500MB。我需要程序的进程保持它直到程序退出。

我想可能有几种方法可以实现这一目标？我更喜欢简单但实用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:57:18.480

```
public static void main( String[] args ) {
   final byte[] x = new byte[500*1024     ]; // 500 Kbytes
   final byte[] y = new byte[500*1024*1024]; // 500 Mbytes
   ...
   System.out.println( x.length + y.length );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T17:58:07.680

好吧，Java 对您隐藏了内存管理，因此您的问题有两个答案：

1.  创建这种大小的数据结构，您将需要并在某个线程中保存对它们的引用，直到程序退出，因为一旦在活动线程中没有对堆上的数据的引用，它就会变成垃圾回收。在 32 位系统上，对于 125000 个单元的 int 数组或 1000 个单元的 125 个 int 数组，500MB 应该大致足够了。

2.  如果您只想分配内存并使其可用，但不填满，则使用 -Xms=512M 启动虚拟机。这将使 VM 在启动时为您的程序分配 512 M 的内存，但它会是空的（刚刚分配），直到您需要它（执行第 1 点）。Xmx 设置程序可分配的最大内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:57:06.653

[jmalloc](http://code.google.com/p/jmalloc/)可以让你这样做，但除非你是真正的专家，否则我不会推荐它。您正在放弃对 Java 至关重要的东西——垃圾收集。你还不如写 C。

Java NIO 以这种方式在堆外分配字节缓冲区。我认为这也是 Oracle 用于内存映射 JAR 和摆脱 perm gen 的地方。

# javascript - 将变量传递给函数内的函数

> ID：15054660
> 
> 赞同：2
> 
> 时间：2013-02-24T17:53:54.347
> 
> 标签：javascript

我试图将一个变量向下传递到一个 setInterval 函数我的代码看起来像这样：

```
function file_copy_progress(directory){
    console.log("stage 1 " + directory);
    setInterval(function(directory){
        console.log("stage 2 " + directory);
    }, 1000);
} 
```

然后我这样称呼它：

```
file_copy_progress("/home/user/tmp/test"); 
```

控制台中的结果是：

```
stage 1 /home/user/tmp/test
stage 2 undefined
stage 2 undefined
stage 2 undefined
... 
```

如何将`directory`变量向下传递一个级别以在 setIntervall 函数中可用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T17:55:42.460

只需删除`directory`内部函数中的形式参数

```
function file_copy_progress(directory){
    console.log("stage 1 " + directory);
    setInterval(function(){
        console.log("stage 2 " + directory);
    }, 1000);
} 
```

外部函数的`directory`参数在内部函数的闭包中被捕获。因此，您不需要将其作为参数传递给内部函数。相反，如果您有内部函数的形参，它会隐藏捕获的变量并使其无法被内部函数访问。

# c# - 从多值列表中删除值

> ID：15054661
> 
> 赞同：1
> 
> 时间：2013-02-24T17:53:57.030
> 
> 标签：c#, list

好的，我已经设置了以下内容以启动列表中的数据：

```
public class OnlineList
{
    public string Username
    {
        get;
        set;
    }

    public int PID
    {
        get;
        set;
    }
} 
```

我正在使用以下内容来查看是否存在值：

```
bool nameCheck = OnlineList.Any(cus => cus.Username == username);
if (nameCheck)
{
} 
```

我的问题是如何从 username = username 的列表中删除一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:57:43.333

使用**[Remove](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)**方法怎么样？

> 从 中删除特定对象的第一个匹配项`List<T>`。

```
var match= OnlineList.Single (cus => cus.Username == nameToRemove);
OnlineList.Remove(match); 
```

如果您需要删除所有要删除哪个用户名的用户名，您可能希望以相同的方式使用**[RemoveAll](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)**方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:58:38.913

您可以使用它来实现它`RemoveAll`

```
OnlineList.RemoveAll(x=>x.Username == username); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:56:57.543

(1) 使用`RemoveAll`

```
OnlineList.RemoveAll (cus => cus.Username == username); // remove by condition 
```

(2) 使用`LINQ`，您可以使用`Except`

```
lst = OnlineList.Except(OnlineList.Where(cus => cus.Username == username)).ToList(); 
```

# android - Android 上的 OpenCV - 标头；没有这样的文件/目录

> ID：15054666
> 
> 赞同：3
> 
> 时间：2013-02-24T17:54:31.230
> 
> 标签：android, opencv, java-native-interface

所以我对使用 Android 的 JNI 很陌生，如果这很愚蠢，请提前道歉。我已经安装了 SDK，并在 Eclipse 中将其添加为项目的库。完成所有操作后，我尝试运行 ndk-build 功能，但出现此错误：

```
Compile++ thumb  : face_detect_rec <= jni_part.cpp
In file included from jni/face_detect_rec.h:11:0,
                 from jni/jni_part.cpp:3:
/Users/Justin/Documents/Android/opencv-2.4.3.2-android-sdk/sdk/native/jni/include/opencv2/core/core.hpp:56:21: fatal error: algorithm: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/face_detect_rec/jni_part.o] Error 1 
```

该文件位置是 core.hpp 所在的位置，所以我不确定为什么这是一个问题。我将在下面发布我的代码以供参考，谢谢大家！

jni_part.cpp：

```
#include <jni.h>
#include "face_detect_rec.h"

using namespace std;
using namespace cv;

extern "C" {

JNIEXPORT void JNICALL Java_com_example_opencvandroidtest_MainActivity_detectFaces(
        JNIEnv* env, jclass mClass, jstring filePath)
{
    detectFaces(filePath);
}
} 
```

face_detect_rec.h

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>
#include <math.h>
#include <float.h>
#include <limits.h>
#include <time.h>
#include <ctype.h>

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/contrib/contrib.hpp>
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

using namespace cv;
using namespace std;

static void detectFaces(string filePath); 
```

face_detect_rec.cpp：

```
#include "face_detect_rec.h"
// Create a string that contains the exact cascade name
string faceCascade_name =
        "/Users/Justin/Documents/OpenCV/data/haarcascades/haarcascade_frontalface_alt2.xml";
/*    "haarcascade_profileface.xml";*/
string eyeCascade_name =
        "/Users/Justin/Documents/OpenCV/data/haarcascades/haarcascade_mcs_lefteye.xml";
//string rightEyeCascade_name =
//    "/Users/Justin/Documents/OpenCV/data/haarcascades/haarcascade_mcs_righteye.xml";

// Function to detect and draw any faces that is present in an image
static void detectFaces(string filePath)
{
    // Create a new Haar classifier
    CascadeClassifier faceCascade;
    Mat img = imread(filePath);

    //int scale = 1;

    // Load the HaarClassifierCascade
    faceCascade.load(faceCascade_name);

    // Check whether the cascade has loaded successfully. Else report and error and quit
    if( faceCascade.empty() )
    {
        cout << "ERROR: Could not load classifier cascade\n";
        return;
    }

    // There can be more than one face in an image. So create a growable sequence of faces.
    // Detect the objects and store them in the sequence
    vector<Rect> faces;
    faceCascade.detectMultiScale(img, faces, 1.1, 2, CV_HAAR_SCALE_IMAGE, cvSize(70, 70));

    // Loop the number of faces found.
    for( int i=0; i<faces.size(); i++ )
    {
        //save image
        Mat faceROI = img(faces[i]);
        stringstream s;
        s << "/mnt/sdcard/Pictures/TagSense" << i << ".jpg";
        imwrite(s.str(), faceROI);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T07:08:32.357

您的“jni”目录中有所谓的“Application.mk”文件吗？如果不这样做，请尝试使用例如以下代码创建它：

**应用程序.mk**：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi-v7a
APP_PLATFORM := android-8 
```

希望这会有所帮助。

# html - 下载 HTML 文件

> ID：15054667
> 
> 赞同：-3
> 
> 时间：2013-02-24T17:54:40.993
> 
> 标签：html, file, download

我想在我的网站 (html/php) 中创建一个链接以下载 HTML 文件，而不在导航器中显示该文件。是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:05:38.383

编写一个 PHP 脚本，强制浏览器下载文件：

```
$fullPath = 'the/Path/To/The/File.html';

header('Content-Description: File Transfer'); 
header('Content-Type: application/octet-stream'); 
header('Content-Length: ' . filesize($fullPath)); 
header('Content-Disposition: attachment; filename="' . basename($fullPath) . '"');
readfile($fullPath);
exit(); 
```

# python - 根据用户输入创建 id 和对应值的二维列表

> ID：15054674
> 
> 赞同：0
> 
> 时间：2013-02-24T17:55:04.800
> 
> 标签：python, python-3.x, list, user-input

我需要一个二维列表来存储有关学生及其成绩的信息。

当我运行我的程序时，我只得到一份数字列表，但我需要为每个学生单独列出。谁能帮我？

这是我到目前为止所做的：

```
COLS= int(input("number of students to enter "))
ROWS= int(input("number of grades per student "))

def main():
    number =[]

    for c in range(COLS):
        student =(input("enter student ID number "))
        number.append(student)

        for r in range (ROWS):
            grades =(input("Enter grade for module: "))
            number.append(grades)

    print(number)

my result is 
number of students to enter 2
number of grades per student 4
enter student ID number 1234
Enter grade for module: 55
Enter grade for module: 66
Enter grade for module: 43
Enter grade for module: 33
enter student ID number 2345
Enter grade for module: 34
Enter grade for module: 56
Enter grade for module: 78
Enter grade for module: 99
['1234', '55', '66', '43', '33', '2345', '34', '56', '78', '99']
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:09:55.583

我会使用按学生 ID 索引的字典：

```
COLS= int(input("number of students to enter "))
ROWS= int(input("number of grades per student "))

def main():
    student_grades = {}

    for c in range(COLS):
        student =(input("enter student ID number "))
        grades = []

        for r in range (ROWS):
            grade =(input("Enter grade for module: "))
            grades.append(grade)
        student_grades[student] = grades 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:58:50.657

您需要为每一行创建一个*新*列表：

```
for c in range(COLS):
    grades = []
    student =(input("enter student ID number "))
    number.append(student)
    number.append(grades)

    for r in range (ROWS):
        grade =(input("Enter grade for module: "))
        grades.append(grade) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T18:16:57.600

根据我的评论，使用[list & dict comprehensions](http://www.youtube.com/watch?v=pShL9DCSIUw)执行此操作的示例：

```
cols = int(input("Number of students: "))
rows = int(input("Number of grades per student: "))

grades = {input("Enter student ID number: "): 
             [input("Enter grade for module: ") for _ in range(rows)] 
          for _ in range(cols)} 
```

请注意，这是[Kyle Strand 的答案](https://stackoverflow.com/a/15054837/722121)中的字典，而不是列表。这更适合数据，并且将使以后更容易使用它。

另请注意，可以通过重复此操作来实现更好的界面，直到用户决定不输入更多学生，而不是预先询问将输入多少学生：

```
rows = int(input("Number of grades per student: "))

def get_students():
    while True:
        value = input("Enter student ID number, or nothing to finish: ")
        if not vale:
            return
        else:
            yield value

grades = {student: [input("Enter grade for module: ") for _ in range(rows)] 
          for student in get_students()} 
```

在这里，这是通过生成器实现的，该生成器生成从用户那里获得的新学生编号，直到用户不输入任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T17:59:12.173

只需在将其插入列表之前构建一个`number`列表：

```
for c in range(COLS):
    student =(input("enter student ID number "))
    temp_arr = [student] # make a temporary array for the student id and their grades

    for r in range (ROWS):
        grades =(input("Enter grade for module: "))
        temp.append(grades) # append to the temp array here

    # after you are done getting the grades
    # insert the entire temp array into the number array
    number.append(temp) 
```

此外，如果您创建一个类，该数据可能会以更好的方式存储，该类`Student`可以有一个`id`和一个`grades`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T22:46:12.210

我认为使用列表字典而不是二维列表（列表列表）会更好，因为它使对数据的访问变得更加容易和可读。出于同样的原因，我还将其名称从`number`您的代码中更改`grades`为以下代码中的名称，以更好地反映其中的内容。

```
COLS = int(input("number of students: "))
ROWS = int(input("number of grades per student: "))

grades = {}

def main():
    for c in range(COLS):
        student = int(input("enter student ID: "))
        grades[student] = []  # initialize to empty row of grades

        for r in range(ROWS):
            grade = int(input("Enter grade for module: "))
            grades[student].append(grade)

    for student in grades.keys():
        print 'student:{}, grades:{}'.format(student, grades[student]) 
```

输入样本数据后的输出：

```
student:2345, grades:[34, 56, 78, 99]
student:1234, grades:[55, 66, 43, 33] 
```

# javascript - 如何向（JSON）对象的原型添加方法？

> ID：15054678
> 
> 赞同：34
> 
> 时间：2013-02-24T17:55:48.433
> 
> 标签：javascript, json, prototype

假设我从服务器接收到一些 JSON 对象，例如 Person 对象的一些数据：

```
{firstName: "Bjarne", lastName: "Fisk"} 
```

现在，我想要一些基于这些数据的方法，例如用于计算全名：

```
fullName: function() { return this.firstName + " " + this.lastName; } 
```

这样我就可以

```
var personData = {firstName: "Bjarne", lastName: "Fisk"};
var person = PROFIT(personData);
person.fullName(); // => "Bjarne Fisk" 
```

我基本上想要在这里做的是向对象的原型添加一个方法。该`fullName()`方法是通用的，因此不应添加到数据对象本身。像..：

```
personData.fullName = function() { return this.firstName + " " + this.lastName; } 
```

...会导致大量冗余；并且可以说“污染”数据对象。

将此类方法添加到简单数据对象的当前最佳实践方法是什么？

**编辑：**

有点跑题了，但是如果上面的问题可以解决，就可以做一些不错的伪`pattern matching`像这样：

```
if ( p = Person(data) ) {
   console.log(p.fullName());
} else if ( d = Dog(data) ) {
   console.log("I'm a dog lol. Hear me bark: "+d.bark());
} else {
   throw new Exception("Shitty object");
} 
```

`Person`如果对象具有正确的属性，`Dog`将添加方法。`data`如果不是，则返回 falsy（即数据不*匹配*/一致）。

**奖励问题：**有谁知道使用或启用此功能（即使其变得容易）的库？它已经是javascript模式了吗？如果是这样，它叫什么；你有详细说明的链接吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-24T18:00:47.067

假设您的 Object 来自某个解析服务器输出以生成 Object 的 JSON 库，那么它的原型中通常不会有任何特殊内容；并且为不同的服务器响应生成的两个对象将不共享原型链（当然，除了 Object.prototype ;) ）

如果您控制从 JSON 创建“Person”的所有位置，则可以反过来做：创建一个“空”Person 对象（在其原型中使用类似 fullName 的方法），并使用生成的对象扩展它来自 JSON（使用 $.extend、_.extend 或类似的东西）。

```
var p = { first : "John", last : "Doe"};

function Person(data) {
   _.extend(this, data);
}

Person.prototype.fullName = function() {
   return this.first + " " + this.last;   
}

console.debug(new Person(p).fullName()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-24T19:44:26.833

这里还有另一种可能。 [JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)接受第二个参数，这是一个用于恢复从叶节点到根节点遇到的对象的函数。因此，如果您可以根据它们的内在属性识别您的类型，则可以在 reviver 函数中构造它们。这是一个非常简单的示例：

```
var MultiReviver = function(types) {
    // todo: error checking: types must be an array, and each element
    //       must have appropriate `test` and `deserialize` functions
    return function(key, value) {
        var type;
        for (var i = 0; i < types.length; i++) {
            type = types[i];
            if (type.test(value)) {
                return type.deserialize(value);
            }
        }
        return value;
    };
};

var Person = function(first, last) {
    this.firstName = first;
    this.lastName = last;
};
Person.prototype.fullName = function() {
    return this.firstName + " " + this.lastName;
};
Person.prototype.toString = function() {return "Person: " + this.fullName();};
Person.test = function(value) {
    return typeof value.firstName == "string" && 
           typeof value.lastName == "string";
};
Person.deserialize = function(obj) {
    return new Person(obj.firstName, obj.lastName);
};

var Dog = function(breed, name) {
    this.breed = breed;
    this.name = name;
}
Dog.prototype.species = "canine";
Dog.prototype.toString = function() {
    return this.breed + " named " + this.name;
};
Dog.test = function(value) {return value.species === "canine";};
Dog.deserialize = function(obj) {return new Dog(obj.breed, obj.name);};

var reviver = new MultiReviver([Person, Dog]);

var text = '[{"firstName": "John", "lastName": "Doe"},' +
            '{"firstName": "Jane", "lastName": "Doe"},' +
            '{"firstName": "Junior", "lastName": "Doe"},' +
            '{"species": "canine", "breed": "Poodle", "name": "Puzzle"},' +
            '{"species": "canine", "breed": "Wolfhound", "name": "BJ"}]';

var family = JSON.parse(text, reviver)
family.join("\n");

// Person: John Doe
// Person: Jane Doe
// Person: Junior Doe
// Poodle named Puzzle
// Wolfhound named BJ 
```

这取决于您是否能够明确识别您的类型。例如，如果有其他类型，甚至是 Person 的子类型，它也有 firstName 和 lastName 属性，这将不起作用。但它可能满足一些需求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-24T18:03:43.560

如果您处理的是纯 JSON 数据，那么每个 person 对象的原型就是`Object.prototype`. 为了使其成为具有原型的对象，`Person.prototype`首先需要一个`Person`构造函数和原型（假设您正在以传统方式执行 Javascript OOP）：

```
function Person() {
    this.firstName = null;
    this.lastName = null;
}
Person.prototype.fullName = function() { return this.firstName + " " + this.lastName; } 
```

然后您需要一种将普通对象转换为 Person 对象的方法，例如，如果您有一个调用函数`mixin`，它只是将所有属性从一个对象复制到另一个对象，您可以这样做：

```
//example JSON object
var jsonPerson = {firstName: "Bjarne", lastName: "Fisk"};

var person = new Person();
mixin(person, jsonPerson); 
```

这只是解决问题的一种方法，但希望能给你一些想法。

* * *

更新：现在它`Object.assign()`在现代浏览器中可用，您可以使用它而不是编写自己的 mixin 函数。还有一个 shim 可以`Object.assign()`在较旧的浏览器上工作；请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-24T18:06:18.083

您可能不应该这样做。

JSON 允许您序列化状态，而不是类型。因此，在您的用例中，您应该执行以下操作：

```
var Person = function ( data ) {
    if ( data ) {
        this.firstName = data.firstName;
        this.lastName = data.lastName;
    }
};

Person.prototype.fullName = function ( ) {
    return this.firstName + ' ' + this.lastName;
};

//

var input = '{"firstName":"john", "lastName":"Doe"}';
var myData = JSON.parse( input );
var person = new Person( myData ); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-24T18:16:55.650

换句话说，您想更改现有对象的原型（又名类）。从技术上讲，您可以这样做：

```
var Person = {
  function fullName() { return this.firstName + " " + this.lastName; }
};

// that is your PROFIT function body: 
personData.__proto__ = Person ; 
```

在那之后，如果你`true`继续`personData instanceof Person`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-02T14:59:14.847

使用新的[Object.setPrototypeOf()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)。（现在 IE11 和所有其他浏览器都支持它。）

您可以创建一个包含所需方法的类/原型，例如您的 fullName()，然后

```
Object.setPrototypeOf( personData, Person.prototype ); 
```

正如警告（在上面链接的 MDN 页面上）所暗示的那样，不能轻易使用此功能，但当您更改现有对象的原型时，这很有意义，这就是您所追求的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-24T18:01:26.430

我认为使用数据传输方法并不常见，但这似乎是个好主意。

该项目允许您将函数与数据一起编码，但它不被视为标准，当然需要使用相同的库进行解码。

```
https://github.com/josipk/json-plus 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-24T18:04:00.783

匿名对象没有原型。为什么不只是有这个：

```
function fullName(obj) {
    return obj.firstName + ' ' + obj.lastName;
}

fullName(person); 
```

如果你绝对必须使用方法调用而不是函数调用，你总是可以做类似的事情，但使用一个对象。

```
var Person = function (person) { this.person = person; }
Person.prototype.fullName = function () {
    return this.person.firstName + ' ' + this.person.lastName;
}
var person = new Person(personData);
person.fullName(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-04T14:11:01.450

您不需要使用原型来在准系统对象中绑定自定义方法。

在这里，您有一个优雅的示例，它不会污染您的代码，避免冗余代码

```
var myobj = {
  title: 'example',
  assets: 
  {
    resources: ['zero', 'one', 'two']
  }
}

var myfunc = function(index)
{
    console.log(this.resources[index]); 
}

myobj.assets.giveme = myfunc

myobj.assets.giveme(1); 
```

[https://jsfiddle.net/bmde6L0r/](https://jsfiddle.net/bmde6L0r/)中提供的示例

# ruby-on-rails - Rails - before_filter 未定义的局部变量

> ID：15054683
> 
> 赞同：3
> 
> 时间：2013-02-24T17:56:31.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个表格，用户输入评论。用户必须使用 Facebook 签名才能保存评论。我使用 a`before_filter`来检查用户是否已登录。

但我得到这个错误：`undefined local variable or method signed_in_user'` 。

另一件事是，我如何使用 facebook 登录用户并保存其评论？不会丢失并使用户再次输入相同的评论。

**审核表：**

```
<%= form_for [@school, Review.new] do |f| %>
 <%= f.text_area :content %>
    <% if current_user %>
      <%= f.submit 'Save my review', :class => "btn" %>
    <% else %>
      <%= f.submit 'Save my review and sign me into facebook', :class => "btn" %>
    <% end %>
<%end %> 
```

**评论控制器**

```
class ReviewsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]

    def create
        @school = School.find(params[:school_id])
        @review = @school.reviews.new(params[:review])

        @review.user_id = current_user.id

        if @review.save
            redirect_to @review.school, notice: "Review has been created."
        else
            render :new
        end
    end

    def new
        @school = School.find_by_id(params[:school_id])
        @review = Review.new
    end
end 
```

**评论助手**

```
module ReviewsHelper
    def signed_in?
        !current_user.nil?
    end

    def signed_in_user
        unless signed_in?   
            redirect_to "/auth/facebook"
        end
    end
end 
```

我正在使用omniauth 对来自facebook 的用户进行身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:06:08.850

`include`你`ReviewsHelper`的控制器：

```
class ReviewsController < ApplicationController
    include ReviewsHelper #or helper :reviews
    before_filter :signed_in_user, only: [:create, :destroy]

    def create
        @school = School.find(params[:school_id])
        @review = @school.reviews.new(params[:review])

        @review.user_id = current_user.id

        if @review.save
            redirect_to @review.school, notice: "Review has been created."
        else
            render :new
        end
    end

    def new
        @school = School.find_by_id(params[:school_id])
        @review = Review.new
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:09:22.437

默认情况下，您的助手不包含在控制器中。

您可以按照 codeit 的建议将其包含在内。

大多数人将他们的前置过滤器作为私有方法放在 ApplicationController 中。

编辑：

要持久登录，请将其保存到会话数据中。在 Rails 指南中查找会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:09:46.683

我以前遇到过同样的问题。helper 是帮助编辑视图层的。before_filter 方法默认不能写在 helper 中，除非你在控制器中写 'include BlbalblaHelper'。

您可以将 application_controller.rb 中的 before_filter 方法写为私有方法，或者在 lib/ 文件夹中。我认为它们都是 DRY 的更好方法。

# javascript - 与页面上的元素交互时防止滑动事件

> ID：15054687
> 
> 赞同：5
> 
> 时间：2013-02-24T17:56:43.290
> 
> 标签：javascript, ios, touch, zepto

我正在构建一个 iPad 应用程序，它本质上是一系列幻灯片。

当我读完一张幻灯片后，我可以滑动到下一张幻灯片*（使用 Zepto 的滑动），这会将 window.location 更改为下一张幻灯片。（滑动事件绑定到 window.body 因为它需要在整个页面上工作）...

这就是问题所在：一些幻灯片具有交互元素，例如按钮、可拖动项目等。问题是在使用其中一些交互元素时会触发滑动事件。

有谁知道在这些情况下防止滑动触发的方法？也许设置灵敏度等？

我被难住了...

最良好的祝愿，非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:46:49.570

Zepto 管理触摸事件的方式是将侦听器绑定到`touchstart`、`touchend`和`touchmove`上的事件`document.body`。然后，它计算要发送的事件，并在接收事件的元素上触发`touchstart`事件。然后，此事件通过 DOM 树冒泡，唤起每个元素的侦听器。

这为我们提供了两种防止滑动事件的方法：

首先，您可以执行以下操作：

```
$('#my-child-element').bind('touchstart touchend touchup', function(event) {
    event.stopPropagation();
}); 
```

当您的子元素收到一个触摸事件时，它将阻止它传播到父元素，最重要的是 body 标签。这可以防止 Zepto 触摸处理器做任何事情，阻止在该元素中操作时发生滑动、点击、singleTap、longTap 和 doubleTap 事件。

因为滑动事件也会冒泡，所以您也可以阻止这些特定事件冒泡到您的元素来监听页面更改滑动：

```
$('#my-child-element').bind('swipeLeft swipeRight', function(event) {
    event.stopPropagation();
}); 
```

这将允许您仍然在子元素内部而不是外部接收 Zepto 生成的事件。Zepto 点击事件也仍然适用于您孩子的所有元素。

在这里小提琴：http: [//jsfiddle.net/bnickel/dUuUd/](http://jsfiddle.net/bnickel/dUuUd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T12:50:08.897

希望“excludedElements”方法对您有所帮助，如下所示。

```
 $(".block").swipe({
    swipe: function (event, direction, distance, duration, fingerCount, fingerData) {

    },
    excludedElements: ".link, a",
    threshold: 0
}); 
```

# git - 如何在 Heroku 上更改应用程序的 git url

> ID：15054699
> 
> 赞同：26
> 
> 时间：2013-02-24T17:57:46.773
> 
> 标签：git, heroku

当我从终端运行“git remote -v”时，我得到以下信息：

```
heroku  git@heroku.com:obscure-taiga-9581.git (fetch)
heroku  git@heroku.com:obscure-taiga-9581.git (push)
origin  http://coastguard-quiz.herokuapp.com/ (fetch)
origin  http://coastguard-quiz.herokuapp.com/ (push) 
```

我想替换“git@heroku.com:obscure-taiga-9581.git”部分。我怎么做？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-24T22:03:06.760

我假设你想要做的是推送到heroku 上的coastguard-quiz repo，这样当你`git push heroku`更新caostguard-quiz.herokuapp.com 时。

```
git remote rm heroku
git remote add heroku git@heroku.com:coastguard-quiz.git 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:00:12.653

我不确定它会如何影响 Heroku，但您可以更改 .git/config 中的路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T21:55:13.910

1.  消除`"git@heroku.com:obscure-taiga-9581.git"`

git 远程 rm heroku

然后添加新的远程存储库

```
git remote add heroku git@github.com:your_nick/name_of_repo.git # this is good to copy paste from your github account 
```

# c# - 两件事情; 控制台应用程序在没有 .exe 和 args 的情况下运行（C# 控制台应用程序）

> ID：15054701
> 
> 赞同：0
> 
> 时间：2013-02-24T17:58:08.737
> 
> 标签：c#, console-application, command-line-arguments

嗨，我想让自己能够将我的应用程序定义为 CMD，因为我可以键入 program 而不是 program.exe，就像 ping 的工作方式一样。

我也需要争论的帮助。我的应用程序的重点是向本地服务器发送一个获取请求，以评估 PHP 从中获取结果，以便我可以轻松快速地调试事物并从 CMD 计算事物等。

例如，我必须这样做。

```
W:\Users\example>e.exe
echo "example";
.....

example

W:\Users\example> 
```

上面的事情很烦人。我需要输入 e.exe 而不是我需要输入代码来评估：-/

我怎么能做到这样我就可以做到

```
W:\Users\example>e echo "example";
.....

example

W:\Users\example 
```

我真的很想让这个工作更快+更简单！这是程序员计算数学的方法：P

编辑：下面是代码；

```
static void Main(string[] args)
{
    WebClient client = new WebClient();
    Console.WriteLine("...");
    string input = Console.ReadLine();
    string php = client.DownloadString("http://192.168.1.50/test.php?exec="+input);
    Console.WriteLine(".....");
    Console.WriteLine("");
    Console.WriteLine(php);
    Console.WriteLine("");
} 
```

我试图做 "+arg[0] 但在开始时什么也不做：？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:04:52.577

不要键入“.exe”，因为您不需要键入它......您可能希望将您的 e.exe 放在 PATH 环境变量中列出的某个位置（或将可执行文件的路径添加到 PATH）。

`Main(string[] args)`是传递给您的程序的参数 - 以任何您想要的方式使用它们。请注意，它们将按空格分隔，因此`String.Join`如果您需要将所有参数作为一个参数，则可能需要将它们返回。

[`Environment.CommandLine`](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)如果您需要访问完整的未解析命令行，也可以使用。

# c - C中的UDP套接字：客户端1到服务器到客户端2

> ID：15054703
> 
> 赞同：0
> 
> 时间：2013-02-24T17:58:33.937
> 
> 标签：c, sockets, udp

我有一个 UDP 客户端/服务器，它以小写或大写形式向服务器发送消息。服务器接收到消息并用切换的情况将其转发回来。我不知道如何让服务器将其转发回第一个客户端，而不是将其发送给客户端 2。如果我的客户端 2 发送一条消息，服务器接收并将其发送回客户端 2，与客户端 1 相同。我希望将 client1 所说的内容发送到服务器，然后服务器将其发送到 client2。我已经尝试了所有我能想到但无法弄清楚的东西。

服务器：

```
/*
Simple udp server

*/
#include<stdio.h>   //printf
#include<string.h> //memset
#include<stdlib.h> //exit(0);
#include<arpa/inet.h>
#include<sys/socket.h>
#include<ctype.h>

#define BUFLEN 512  //Max length of buffer
#define PORT 8888   //The port on which to listen for incoming data

void die(char *s)
{
    perror(s);
exit(1);
}

int main(void)
{
struct sockaddr_in si_me, si_other, si_other2;

int s, i, slen = sizeof(si_other) , recv_len;
char buf[BUFLEN];

//create a UDP socket
if ((s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
{
    die("socket");
}

// zero out the structure
memset((char *) &si_me, 0, sizeof(si_me));

si_me.sin_family = AF_INET;
si_me.sin_port = htons(PORT);
si_me.sin_addr.s_addr = htonl(INADDR_ANY);

//bind socket to port
if( bind(s , (struct sockaddr*)&si_me, sizeof(si_me) ) == -1)
{
    die("bind");
}

//keep listening for data
while(1)
{
    printf("Waiting for data...");
    fflush(stdout);

    //try to receive some data, this is a blocking call
    if ((recv_len = recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen)) == -1)   // read datagram from server socket
    {
        die("recvfrom()");
    }

    //print details of the client/peer and the data received
    printf("Received packet from %s:%d\n", inet_ntoa(si_other.sin_addr), ntohs(si_other.sin_port));         printf("Data: %s\n" , buf);

    //now reply to server socket/the client with the same data
    if (sendto(s, buf, recv_len, 0, (struct sockaddr*) &si_other, slen) == -1)
    {
        die("sendto()");
    }

}

close(s);
return 0;
} 
```

客户端：

```
/*
Simple udp client

*/
#include<stdio.h>   //printf
#include<string.h> //memset
#include<stdlib.h> //exit(0);
#include<arpa/inet.h>
#include<sys/socket.h>
#include<ctype.h>

#define SERVER "192.x.x.x"
#define BUFLEN 512  //Max length of buffer
#define PORT 8888   //The port on which to send data

void die(char *s)
{
perror(s);
exit(1);
}

int main(void)
{
struct sockaddr_in si_other;
int s, s2, i, slen=sizeof(si_other);
char buf[BUFLEN];
char message[BUFLEN];

if ( (s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)        // create a client socket
{
    die("socket");
}

memset((char *) &si_other, 0, sizeof(si_other));
si_other.sin_family = AF_INET;
si_other.sin_port = htons(PORT);

if (inet_aton(SERVER , &si_other.sin_addr) == 0)            // Create datagram with server IP and port.
{
    fprintf(stderr, "inet_aton() failed\n");
    exit(1);
}

while(1)
{
    printf("Enter message : ");
    gets(message);

    int a;
    char message2[BUFLEN];
    for(a=0;a<=BUFLEN-1;a++)
      {
        if(message[a] >= 97 && message[a] <= 122)
           message2[a] = toupper(message[a]);
        else
           message2[a] = tolower(message[a]);

      }

    if (sendto(s, message2, strlen(message2) , 0 , (struct sockaddr *) &si_other, slen)==-1)
    {
        die("sendto()");
    }

    //receive a reply and print it
    //clear the buffer by filling null, it might have previously received data
    memset(buf,'\0', BUFLEN);
    //try to receive some data, this is a blocking call
    if (recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen) == -1)        // read datagram from client socket
    {
        die("recvfrom()");
    }

    puts(buf);
}

close(s);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:51:01.910

似乎你想要一个数据包转发器而不是 UDP 服务器，比如来自客户端->服务器->客户端 2，所以你需要告诉你的服务器客户端 2 的 IP 地址/端口，为此请在服务器中配置客户端 2 的 IP/端口使用命令行参数或读取任何输入文件，然后在服务器代码中的 sendto 语句之前，用来自命令行或输入文件的 client2 信息填充 si_other 结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:21:39.583

在您`read()`或`recvfrom()`您的消息之后，您处理您的数据，然后处理`sendto()`两次：一次到（原始发件人）返回的地址`recvfrom()`，另一次到另一个客户端的地址（必须由您的服务器提供或检测到）。

沿着这个（没有执行正确的错误检查）：

```
char data[100];
struct sockaddr_in address;
socklen_t length = sizeof address;

/* Receive data from any client. */
ssize_t result = recvfrom(server, data, sizeof data, 0, &address, &length);

/* Process the data (change cases). */
process_data(data, result);

/* Send back to the first client. */
sendto(server, data, result, 0, &address, sizeof address);

/* Check who's the sender and relay to the other. */
if (address.sin_addr.s_addr == CLIENT1_ADDRESS)
    address.sin_addr.s_addr = CLIENT2_ADDRESS;
else
    address.sin_addr.s_addr = CLIENT1_ADDRESS;

/* Send to the other client. */
sendto(server, data, result, 0, &address, sizeof address); 
```

在此示例中，地址是静态定义的。

# google-tv - 谷歌电视 - 与外部设备通信

> ID：15054706
> 
> 赞同：0
> 
> 时间：2013-02-24T17:58:41.610
> 
> 标签：google-tv, television

有没有办法将有关谷歌电视正在显示/广播的内容的信息发送到外部设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:13:56.087

Google TV 上没有 API 来确定通过视频播放的内容。它很容易创建您自己的广播网络消息，其中包含有关设备上正在发生的事情的数据。或者，您可以创建一个在 Google TV 上运行的应用程序，另一台设备上的另一个应用程序可以联系该应用程序以获取信息。

# php - 通过 AJAX 获取下拉选项，当像æøå 这样的字符时不起作用

> ID：15054720
> 
> 赞同：0
> 
> 时间：2013-02-24T17:59:55.203
> 
> 标签：php, jquery, ajax, encoding, utf-8

我的名字是 Dan，我之前看到了 UTF 编码的问题，在 stackoverflow 上阅读了与此类问题相关的帖子，尝试了你们发布的解决方案，但我不得不说我被卡住了。

好的，我正在做的是一组下拉列表，当 tha 值发生更改时，这些下拉列表会通过 AJAX (jQuery) 和 PHP 填充。

1.  所有文件都保存为 UTF-8
2.  显示所有内容的 index.php 文件具有元标记 charset=utf-8

**PHP 脚本根据文件夹名称读取目录并输出列表选项：**

```
$fylke = $_GET['fylke'];
foreach (new DirectoryIterator('../pdfs/'.$fylke) as $fileInfo) {
    if($fileInfo->isDot()) continue;
$kommune = $fileInfo->getFilename();

echo "<option name='kommune' value='".$kommune."'>".$kommune."</option>";
} 
```

**Javascript 运行基于列表框更改的函数：**

```
function getKommune() {
    $.get("get.php",
  {
    fylke: $("#fylke").val()
  },
  function(data){
    $('#kommune').html(data);
    $('#kommune').attr('disabled', false);
  $('#kommune').prepend('<option selected="selected" value="---">---</option>');
  });
} 
```

所有没有特殊字符的文件夹和文件名都可以列出。当涉及特殊字符 (æøå) 时，列表框不会随文件夹或文件一起更新。

我必须说我是编码的初学者，非常感谢帮助。这是非工作项目的链接：[http ://www.tbds.no/pdfdl/](http://www.tbds.no/pdfdl/)

**感谢您的大力帮助。**

**如果您愿意，我想与您共享脚本，但要实现安全性！: [www.dan-levi.no/playground/pdfdown/files.zip](http://www.dan-levi.no/playground/pdfdown/files.zip)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:45:38.927

我认为您遇到的基本问题是您的系统文件名不是 UTF-8，并且您直接从文件系统中提取数据并将其推送到浏览器并说“这是 UTF-8”。

我认为你需要三个改变：

首先，在 的顶部`get.php`和顶部`index.php`，在有任何输出之前执行此操作：

```
<?php
// Set utf-8 in the header, not just as a meta tag
header('Content-Type: text/html; charset=utf-8');
?> 
```

如果您不这样做，那么浏览器会将您的`get.php`输出视为`ISO-8859-1`，因为您吐出的 html 片段`get.php`没有`meta`标签来告诉它。

其次，在您引用的位中`get.php`，您应该通过传入`fylke`参数`utf8_decode`并将任何内容通过以下方式传递回浏览器`utf8_encode`：

```
$fylke = utf8_decode($_GET['fylke']);
foreach (new DirectoryIterator('../pdfs/'.basename($fylke)) as $fileInfo) {
    if($fileInfo->isDot()) continue;
    $kommune = utf8_encode($fileInfo->getFilename());
    echo "<option name='kommune' value='".$kommune."'>".$kommune."</option>";
} 
```

第三，在将文件名发送到浏览器之前`index.php`应用到文件名。`utf8_encode`

# django - 在 Django Tastypie 中限制查询集

> ID：15054721
> 
> 赞同：0
> 
> 时间：2013-02-24T17:59:56.387
> 
> 标签：django, api, rest, tastypie

我正在用 django 和 sweetpie 构建一个应用程序，并尝试通过 ajax 加载对象。例如，我显示 3 个对象，然后一旦用户到达最后一个对象，我再加载 3 个等。

所以我试图修改tastepie api中的查询集，但找不到如何做到这一点。在 ajax 调用中，我发送一个`start`定义限制开始的参数。但我不知道在哪里可以访问此参数并修改查询集。

```
class EntryResource(ModelResource):

    def dehydrate(self, bundle):
        # I can get the parameter here but it's not useful
        start = bundle.request['start']
        return bundle

    def get_object_list(self, request):
        # I can modify the objects returned here but how can I access bundle.request ?
        return super(EntryResource, self).get_object_list(request).filter(active=True)

    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:15:51.600

找到了解决方案。这实际上很容易，但我会写下答案，以防它对其他人有用。

解决方案是使用分页器（我没有在谷歌上搜索正确的术语，所以我一开始没有找到）。我的ajax调用我发送`offset`和`limit`参数。

更多：[http ://django-tastypie.readthedocs.org/en/latest/paginator.html](http://django-tastypie.readthedocs.org/en/latest/paginator.html)

# wpf - 实体框架混淆

> ID：15054731
> 
> 赞同：0
> 
> 时间：2013-02-24T18:01:00.513
> 
> 标签：wpf, entity-framework, mvvm, binding

这是 WPF + MVVM + EF。我的数据库中有一张销售订单表。在 UI 中，我显示了一个包含所有 SalesOrderNumbers 的 ComboBox 和一个带有标签和 TextBoxes 的网格，它们显示了 ComboBox 中所选订单的详细信息。考虑以下 ViewModel：

```
Class SalesOrderViewModel
    Public Property AllSalesOrderNumbers As List(Of Integer)

    Public Sub New()
        AllSalesOrderNumbers = context.SalesOrders.Select(Function(x) x.orderNumber).ToList()
        If AllSalesOrderNumbers.Count > 0 Then SelectedOrderNumber = AllSalesOrderNumbers(0)
    End Sub

    Private Property mSelectedOrderNumber As Integer
    Public Property SelectedOrderNumber As Nullable(Of Integer)
        Get
            Return mSelectedOrderNumber
        End Get
        Set(value As Nullable(Of Integer))
            mSelectedOrderNumber = value
        End Set
    End Property

    Public ReadOnly Property SelectedOrder As SalesOrder
        Get
           Return context.SalesOrders.FirstOrDefault(Function(x) x.orderNumber = SelectedOrderNumber)
        End Get
    End Property
End Class 
```

在 UI 中，ComboBox`ItemsSource`绑定`AllSalesOrderNumbers`并`SelectedValue`绑定到`SelectedOrderNumber`(with `Mode=OneWayToSource`)。另一方面，Grid 的 DataContext 绑定到`SelectedOrder`. 整个工作正常。

我的问题是关于“新销售订单”按钮。为了添加新记录，`ICommand`在我的 ViewModel 中添加了一个，它基本上执行以下操作：

```
Dim NewOrder = context.SalesOrders.CreateObject()
context.SalesOrders.AddObject(NewOrder)
mSelectedOrderNumber = NewOrder.orderNumber
AllSalesOrderNumbers.Add(mSelectedOrderNumber) 
```

我对以下内容感到困惑：

1.  `SelectedOrder`在模型中查询 SelectedOrderNumber 属性的当前值。由于数据库还没有这个新记录，它返回 null。在去数据库之前，我如何要求它查看本地上下文对象？

2.  与 DataSet 不同，它不会为 分配负递增的标识值`orderNumber`，所以我想知道如果我添加另一个订单会发生什么。

3.  `context.SalesOrders`在上面的第二行 ( `context.SalesOrders.AddObject(NewOrder)`) 执行后，我没有在集合中看到新添加的订单对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:26:29.483

技术答案：

> 1.SelectedOrder 向模型查询 SelectedOrderNumber 属性的当前值。由于数据库还没有这个新记录，它返回 null。在去数据库之前，我如何要求它查看本地上下文对象？

`DbSet`您可以像这样查询本地集合：

```
context.SalesOrders.Local.FirstOrDefault(...) 
```

> 2.与DataSets不同，它不会为orderNumber分配负递增的标识值，所以我想知道如果我添加另一个订单会发生什么。

当您添加新`Order`的 s 时，EF 会将它们中的每一个作为单独的实例进行跟踪。

> 3.上面第2行(context.SalesOrders.AddObject(NewOrder))执行后，context.SalesOrders集合中没有看到新添加的订单对象。

请参阅 1。它在`Local`集合中。

架构答案：`context`在您的视图模型中拥有一个不是最佳选择。视图模型不应该担心它的数据，它应该接收数据，然后是自包含的。它的职责是响应用户交互并将这些通知给控制器或服务层。因此，模型应该填充一个`Order`s 列表，然后释放上下文。当添加新命令时，模型应该立即或在保存命令之后告诉控制器，并且可能会收到一个命令以（重新）显示`Order`. 因此，视图模型无需了解数据层的技术细节。

# android - 循环吐司未正确显示

> ID：15054732
> 
> 赞同：0
> 
> 时间：2013-02-24T18:01:04.950
> 
> 标签：android, loops, toast

我的主要活动中有以下代码（注意：`GPSTracker`在此应用程序中有效）：

```
 double latitude, longitude;
    gps = new GPSTracker(MainActivity.this);
    if(gps.canGetLocation()){
         latitude = gps.getLatitude();
         longitude = gps.getLongitude();
         Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();
    }
    else{
         gps.showSettingsAlert();
    } 
```

我想创建一个循环，它会在某些时间间隔内显示`Toast`我当前的位置。我试过这个：

```
 double latitude, longitude;
    long currentTime = System.currentTimeMillis();
    long myTimestamp = currentTime;
    int i = 0;
    gps = new GPSTracker(MainActivity.this);
    while(i < 5)
    {
        myTimestamp = System.currentTimeMillis();
        if((myTimestamp - currentTime) > 5000)
        {
            i++;
            currentTime = System.currentTimeMillis();
            if(gps.canGetLocation()){
                latitude = gps.getLatitude();
                longitude = gps.getLongitude();
                Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();  
            }else{
                gps.showSettingsAlert();
            }
        }
    } 
```

使用此代码，`Toast`仅显示一次（最后一次迭代）。你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:16:28.013

> 我希望每次迭代都显示它（例如每 5 秒）。

上面的代码不是每五秒循环一次，它会连续循环，但只会每五秒递增一次计数器……这是一种非常低效的创建时间延迟的方法，因为在循环运行时不会发生任何其他事情。（即使你在单独的线程上运行它仍然不是一个好策略。）

而是使用 LocationManager [`requestLocationUpdates`](https://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)，它将使用回调，以便您的应用程序可以在更新之间执行操作。几个快速说明：

*   了解 GPS 可能无法每 5 秒修复一次，而且此间隔非常短，因此请谨慎使用，否则会耗尽电池电量。
*   一些 pre-Jelly Bean 设备可能不会观察到该`minTime`参数，但您可以自己强制执行您的时间参数，正如我在[Android Location Listener call very often](https://stackoverflow.com/q/13093613/1267661)中所描述的那样。

* * *

除此之外，您使用现有代码，但我推荐使用 Handler 和 Runnable，如下所示：

```
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        // Fetch your location here

        // Run the code again in about 5 seconds
        handler.postDelayed(this, 5000);
    }
}, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:20:33.643

一个问题是这种方法会执行“忙等待”，我怀疑这会阻止显示吐司。尝试做一个 sleep() 等到下一个 Toast 的时间：

```
public void sleepForMs(long sleepTimeMs) {
    Date now = new Date();
    Date wakeAt = new Date(now.getTime() + sleepTimeMs);
    while (now.before(wakeAt)) {
        try {
            long msToSleep = wakeAt.getTime() - now.getTime();
            Thread.sleep(msToSleep);
        } catch (InterruptedException e) {
        }

        now = new Date();
    }

} 
```

# grep - Bash：模式匹配

> ID：15054734
> 
> 赞同：-2
> 
> 时间：2013-02-24T18:01:22.347
> 
> 标签：grep

我想要一个终端命令，它会在文本文档中找到模式并输出它们。模式就像`prefix[anything]sufix`，其中 [anything] 可以是任何文本。我知道`grep`命令，但不知道如何正确使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:03:03.943

使用正则`-E`表达式开关。`.*`匹配任何东西。

```
grep -E 'prefix.*suffix' filename 
```

# algorithm - Kruskal 算法中的边集

> ID：15054737
> 
> 赞同：0
> 
> 时间：2013-02-24T18:01:26.623
> 
> 标签：algorithm, graph-algorithm, minimum-spanning-tree, kruskals-algorithm

令 G = (V, E) 为加权、连通且无向图。令 T 为在 Kruskal 算法中增长并在 k 次迭代后停止的边集（因此 T 可能包含少于 |E|-1 条边）。令 W(T) 为该集合的加权和。令 T' 是一个无环边集，使得 |T| = |T'|。证明 W(T) <= W(T')

我理解算法的原始证明，我尝试了几种方法来解决这个问题，但都没有奏效。

例如：我想对 |T| 进行归纳。可能会奏效。对于 |T| = 1 很明显。

我们假设 |T|=k 的正确性并证明（或不……）k+1。通过矛盾假设存在一个边集 T' 使得 |T'|=k+1 并且 W(T') < W(T)。

设 e 为 Kruskal 算法添加的最后一条边。因此，对于 T' 中的任何边 f，W(f) < W(e)（否则我们从 2 个集合中删除边并得到矛盾）。

只有当 T' 中的每条边都已经在 T 中或与 T - {e} 形成一个循环时，才会发生这种情况。

…</p>

注意：这与 Kruskal 算法中的证明不同。我们甚至不知道 T' 是否连通。

我不知道下一步该做什么。我真的很感激任何帮助，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:15:32.003

# javascript - How to prepopulate a dialog in angularjs/bootstrap

> ID：15054741
> 
> 赞同：4
> 
> 时间：2013-02-24T18:01:43.373
> 
> 标签：javascript, forms, twitter-bootstrap, angularjs

This question is in regards to angluarjs using bootstrap css and javascript.

I have a list of items that I want to display and set up so that clicking on them opens a dialog to allow you to change the values. Something like this:

```
<!-- The repeater !-->
<ul>
    <li ng-repeat="item in items" ng-click="showDlg(item)">
        {{item.text}}
    </li>
</ul>
<!-- The dialog !-->
<div id="dlg" class="modal hide fade">
    <div class="modal body">
         <input id="title" type="text">
         <button type="button">ok</button>
    </div>
<div> 
```

The question is how do I implement the showDlg function to put up #dlg as a pop up dialog prepopulated with the fields from item (in this trivial case putting item.text into the input box.) I can, and in fact do, hack it by setting the values directly:

```
 $scope.showDialog = function(item) {
     $("#dlg #title").val(item.text);
     $(#dlg).modal({});
 } 
```

But it seems to me that I should be using a controller for the dialog and setting it up as a form. I can see how to set it up as a form, but not how to get the data into the form to start with.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:40:23.150

If you are willing to use a 3rd party, native AngularJS directives for Twitter's bootstrap I was answering a very similar question today: [https://stackoverflow.com/a/15051565/1418796](https://stackoverflow.com/a/15051565/1418796)

As part of the angular-ui we are working on native AngularJS directives that don't require dependency on twitter's JavaScript: [http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/). The advantage is that you've got less dependencies to include and directives that are well integrated into the AngularJS ecosystem.

Using the `$dialog` service from the mentioned repository you could edit items from a list like so: [http://plnkr.co/edit/PG0iHG?p=preview](http://plnkr.co/edit/PG0iHG?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T01:35:39.160

You can set the selected item in the scope

```
 $scope.showDialog = function(item) {
     $scope.selectedItem = item;
     $("#dlg").modal({});
 } 
```

and update the dialog html like any other html fragment

```
<div id="dlg" class="modal hide fade">
    <div class="modal body">
         <input id="title" type="text" ng-model="selectedItem.text">
         <button type="button">ok</button>
    </div>
<div> 
```

# html - 用于区分平板电脑和上网本的 CSS 媒体查询

> ID：15054743
> 
> 赞同：0
> 
> 时间：2013-02-24T18:01:46.743
> 
> 标签：html, css, media-queries

我在使用一些 CSS 时遇到了一些问题，我试图在平板电脑上查看时隐藏 div。平板电脑的 CSS 媒体查询可以处理此任务，但不幸的是，它也捕获了一些不是平板电脑的设备，例如上网本。我尝试为上网本实现单独的媒体查询，但最终发生的只是上网本媒体查询与平板电脑媒体查询相结合，并且 div 仍然隐藏。

我用来捕获“上网本”的查询是

```
@media only screen 
and (min-width : 900px) 
and (max-width : 1160px) { 
```

我用来捕捉平板电脑的查询是

```
@media only screen and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) { 
```

我知道分辨率重叠，但是我可以使用其他一些查询来区分这两者吗？

是的，JS 很好（有一个很好的隧道视觉案例，但在我面前错过了它：D），并且该链接几乎可以解决它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:37:49.193

马特的评论为我回答了这个问题。

# python - Python - 如何检查系统负载？

> ID：15054750
> 
> 赞同：8
> 
> 时间：2013-02-24T18:02:26.223
> 
> 标签：python, multithreading

我正在编写一个脚本来检查给定的 url 是否正确并解析 IP。我想把事情固定起来，所以我决定把它放到多个线程中。但是，我想确保脚本不会使其运行的服务器超载。问题是：如何检查脚本中的系统负载？或者有什么方法可以确定可以同时运行多少线程？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-30T08:20:36.553

正如[这个答案](https://stackoverflow.com/a/4153901/616317)中所建议的，可能使用：

```
>>> import os
>>> os.getloadavg()
(0.66, 0.69, 0.58) 
```

这更多的是您要寻找的东西，因为那是服务器负载，而不仅仅是 CPU 使用率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T18:05:43.653

试试 psutil ( [https://github.com/giampaolo/psutil](https://github.com/giampaolo/psutil) ):

```
import psutil
psutil.cpu_percent() 
```

psutil 实现并模拟 getloadavg()，也在 Windows 上：

```
 >>> psutil.getloadavg()
 (3.14, 3.89, 4.67) 
```

# jquery - Textarea 没有响应 jQuery 的模糊

> ID：15054753
> 
> 赞同：2
> 
> 时间：2013-02-24T18:02:46.727
> 
> 标签：jquery, textarea, blur

我有几个动态加载的文本区域，当它们变得模糊时似乎没有响应。我使用 .post 加载它们（它们在 php 脚本中生成并作为数据返回以供显示）。我做了**[这个 jsfiddle](http://jsfiddle.net/UqSJ2/8/)**，它自己工作，但不在我的页面上。问题可能是文本区域是动态加载的吗？我在其他地方读到我应该将 .on() 用于动态加载的元素（并且我确实使用了它），但它仍然无法在我的页面上工作。这是 jsfiddle 中的 jQuery 代码：

```
$('.crit_desc').on('blur', function () {

    var value = $(this).val();
    alert(value);

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T18:04:41.437

将您的代码更改为：

```
$(document).on('blur', '.crit_desc', function () {
    var value = $(this).val();
    alert(value);
}); 
```

由于您的元素是动态加载的，因此它们需要在页面加载时绑定到 DOM 中存在的元素。理想情况下，您希望元素更接近动态加载的元素，而不是`document`提高性能。

根据.on() 上的[文档：](http://api.jquery.com/on/)

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:13:39.920

如果它是动态加载的，请使用 livequery [http://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

```
$('.crit_desc').livequery('blur', function () {
    var value = $(this).val();
    alert(value);
}); 
```

或者在 jQuery .live() 方法中检查这个[模拟“焦点”和“模糊”，](https://stackoverflow.com/questions/1199293/simulating-focus-and-blur-in-jquery-live-method)因为 .live 不支持模糊和焦点

# macos - 弄清楚为什么 Flash（Firefox 插件）在递归 NP_Initialize 上使用 100% CPU

> ID：15054754
> 
> 赞同：0
> 
> 时间：2013-02-24T18:02:56.580
> 
> 标签：macos, instruments, flash, browser-plugin

像我之前的许多人一样，我在使用 Flash 降低整个 CPU 内核时遇到问题（具体来说，其中一个线程总是使用 100% 的 CPU）。

Flash 可能在超过 1 个页面上运行（我使用了很多选项卡），但似乎开始这种 CPU 使用的原因是在我开始流式传输电影之后。这在一段时间内运行良好，但在某些时候播放开始跳过，所以我决定进行调查。

我已经尝试使用 Xcode 的 Instruments.app 通过 CPU 采样进行调查，通过遍历采样的调用堆栈，我发现奇怪的是，大约 80% 的 CPU 使用率看起来很可疑，并且是由于恰好 4 次递归调用`NP_Initialize`(请参阅发生这种情况的 2 个呼叫站点之一的图片）。发生这种情况的两个站点（仅此而已？）都在`0x10fb8ec66 > 0x10fb93947`（在此示例中）的堆栈树中。我还附上了痕迹。

![第一个呼叫站点](../Images/323f117d1319c175ce9d840c0ded45f2.png)

和

![第二个呼叫站点](../Images/0a233bf249864ce75f91cd1a841f0f72.png)

我认为这是不自然的，特别是因为从我读过的关于 NPAPI的内容来看，`NP_Initialize`浏览器只能调用一次。因此，有人愿意就为什么会发生这种情况提出建议吗？

我在 OSX Mountain Lion 10.8.2 上使用最新的 Firefox Beta 20.0，我的 Shockwave Flash 版本是 11.6.602.167。

仪器跟踪[http://www.sendspace.com/file/h12wte](http://www.sendspace.com/file/h12wte)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:37:17.563

您所看到的是试图从剥离的二进制作品中符号化堆栈的方式的人工制品。

像大多数发布二进制文件一样，Flash 被剥离，这意味着您没有关于绝大多数二进制文件的任何符号信息。但是，必须导出 NP_Initialize 符号才能加载插件，因此它是二进制文件中为数不多的符号之一。调试器 UI 是为未剥离的二进制文件设计的，它的工作原理是从实际地址向后查看它可以找到的第一个函数名称。在许多情况下，在发布的 Flash 二进制文件中，无论地址是什么，它都是 NP_Initialize。

所以没有递归调用，当它说“NP_Initialize”时，你应该像阅读随机十六进制地址一样阅读它：“一些我不知道它是什么的函数”。

# php - 如何跨多个页面快速更改 CURLOPT_URL

> ID：15054755
> 
> 赞同：0
> 
> 时间：2013-02-24T18:02:56.890
> 
> 标签：php, url, curl

我正在使用 curl 从另一个域调用 html 内容。使用 curl 的每个页面上的 url 略有不同，但域名是相同的。

如果我只想更改 curl 中 url 的域名部分，即在 10 个页面上使用，我如何在不编辑每个页面上的代码的情况下快速实现这一点？

我曾尝试在 url 字符串中使用“包含”，但它不起作用。“包含”文件只是域前缀。

这是我的代码。唯一需要在所有页面中更改的部分是 url (mydomain.com) 中的域名，而不是完整的 url 扩展名。

```
$curl = curl_init();
curl_setopt ($curl, CURLOPT_URL, "http://www.mydomain.com/rssfeeds/htmlarticle.asp");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec ($curl);
curl_close ($curl);
print $result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:07:47.200

试试这个：

```
$ch = curl_init();
/* HERE IS YOUR options array where key like RETURN_TRANSFERING 
                                    and value - true */
curl_setopt_array($ch, $options);
function get($url, $ch){
  curl_setopt($ch, CURLOPT_URL, $url);
  return curl_exec($curl);
} 
```

**更新：**如果您有很多网址，请查看此库[https://code.google.com/p/rolling-curl/](https://code.google.com/p/rolling-curl/)它可以帮助您执行多个获取请求，因此速度将比 2-4 快单卷曲请求。

**UPDATE2：**这是另一个多请求[https://github.com/barbushin/multirequest](https://github.com/barbushin/multirequest)

# php - 我可以通过 Facebook 中的循环向我的所有应用用户发布提要吗？

> ID：15054760
> 
> 赞同：1
> 
> 时间：2013-02-24T18:03:13.403
> 
> 标签：php, facebook, facebook-graph-api

```
 $data2 = array();
    $data2['access_token'] = $usersPermission; // from database

    $data2['message'] = 'test message';

    $facebook->api('/'.$facebook_user_id.'/feed/', 'post', $data2) 
```

我在一个循环中有上面的代码。这个循环会将提要发布到我的 10000 个用户墙上。如果我这样做有什么问题吗？我的意思是它有可能被认为是垃圾邮件吗？可以在没有循环的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:48:36.450

**不要**尝试同时向所有用户发送相同的帖子，您的应用程序将被**禁止**。

尝试制定一个好的发布算法来发送您的帖子并考虑每个帖子之间的时间延迟。

您可以将您的用户分成组**ex。**您可以每 5 分钟发布 25 个用户。

# haskell - 你如何在haskell中为这棵树实现monoid接口？

> ID：15054765
> 
> 赞同：6
> 
> 时间：2013-02-24T18:03:36.070
> 
> 标签：haskell, functional-programming, monoids

请原谅术语，我的心还在弯曲。

那个树：

```
data Ftree a = Empty | Leaf a | Branch ( Ftree a ) ( Ftree a )
    deriving ( Show ) 
```

我有几个问题：

1.  如果`Ftree`不可能`Empty`，它是否不再是 a `Monoid`，因为没有身份值。

2.  你将如何`mappend`用这棵树实现？你能随便随便把两棵树嫁接在一起吗？

3.  对于二叉搜索树，您是否必须自省两棵树中的某些元素以确保其结果`mappend`仍然是 BST？

为了记录，一些其他的东西`Ftree`可以在这里做：

```
instance Functor Ftree where
    fmap g Empty             = Empty
    fmap g ( Leaf a )        = Leaf ( g a )
    fmap g ( Branch tl tr )  = Branch ( fmap g tl ) ( fmap g tr )

instance Monad Ftree where 
    return             = Leaf
    Empty        >>= g = Empty
    Leaf a       >>= g = g a
    Branch lt rt >>= g = Branch ( lt >>= g ) ( rt >>= g ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T18:20:45.110

您的问题有三个答案，一个是挑剔的，一个是无用的，一个是抽象的：

## 挑剔的答案

```
instance Monoid (Ftree a) where
    mempty = Empty
    mappend = Branch 
```

这是`Monoid`类型类的一个实例，但不满足任何必需的属性。

## 无用的答案

你想要什么 Monoid？仅仅在没有更多信息的情况下要求一个幺半群实例就像在没有给出问题的情况下要求一个解决方案。有时有一个自然的幺半群实例（例如对于列表）或者只有一个（例如对于`()`，忽略定义的问题）。我不认为这里的情况。

^(顺便说一句：如果您的树在内部节点处具有递归组合两棵树的数据，那么将会有一个有趣的幺半群实例......)

## 抽象的答案

既然你给了一个`Monad (Ftree a)`实例，有一个通用的方法来获取一个`Monoid`实例：

```
instance (Monoid a, Monad f) => Monoid (f a) where
    mempty = return mempty
    mappend f g = f >>= (\x -> (mappend x) `fmap` g) 
```

让我们检查一下这是否是 Monoid。我用`<> = mappend`. 我们假设`Monad`法律成立（我没有检查您的定义）。此时，回想一下[用 do-notation 编写的 Monad 定律](http://www.haskell.org/haskellwiki/Monad_Laws)。

我们的`mappend`，用 do-Notation 写成，是：

```
mappend f g = do
  x <- f
  y <- g
  return (f <> g) 
```

所以我们现在可以验证幺半群定律：

*左身份*

```
mappend mempty g
≡ -- Definition of mappend
do 
  x <- mempty
  y <- g
  return (x <> y)
≡ -- Definition of mempty
do 
  x <- return mempty
  y <- g
  return (x <> y)
≡ -- Monad law
do 
  y <- g
  return (mempty <> y)
≡ -- Underlying monoid laws
do 
  y <- g
  return y
≡ -- Monad law
g 
```

*正确的身份*

```
mappend f mempty 
≡ -- Definition of mappend
do
  x <- f
  y <- mempty
  return (x <> y)
≡ -- Monad law
do
  x <- f
  return (x <> mempty)
≡ -- Underlying monoid laws
do 
  x <- f
  return x
≡ -- Monad law
f 
```

最后是重要的*结合律*

```
mappend f (mappend g h)
≡ -- Definition of mappend
do
  x <- f
  y <- do
    x' <- g
    y' <- h
    return (x' <> y')
  return (x <> y)
≡ -- Monad law
do
  x <- f
  x' <- g
  y' <- h
  y <- return (x' <> y')
  return (x <> y)
≡ -- Monad law
do
  x <- f
  x' <- g
  y' <- h
  return (x <> (x' <> y'))
≡ -- Underlying monoid law
do
  x <- f
  x' <- g
  y' <- h
  return ((x <> x') <> y')
≡ -- Monad law
do
  x <- f
  x' <- g
  z <- return (x <> x')
  y' <- h
  return (z <> y')
≡ -- Monad law
do
  z <- do
    x <- f
    x' <- g
    return (x <> x')
  y' <- h
  return (z <> y')
≡ -- Definition of mappend
mappend (mappend f g) h 
```

因此，对于每个（正确的）Monad（甚至对于每个应用函子，正如 Jake McArthur 在#haskell 上指出的那样），都有一个 Monoid 实例。它可能是也可能不是您正在寻找的那个。

# c++ - C++ RapidXML - 编辑 XML 文件中的值

> ID：15054771
> 
> 赞同：5
> 
> 时间：2013-02-24T18:04:00.587
> 
> 标签：c++, xml, rapidxml

我最近开始使用 RapidXML，解析值很好（我可以从元素内部获取数据），但我想编辑元素内部的值。

为了这个程序的目的，我想把它变成：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
     <data>
          This is data.
     </data>
</root> 
```

进入这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
     <data>
          Edited!
     </data>
</root> 
```

我在某处读到它`rapidxml::xml_node`具有`value()`更改元素内部值的功能，但它似乎不起作用。当我写出文件时，我得到了与以前完全相同的东西。这是我的代码：

```
std::string input_xml = loadFile(filename);
std::vector<char> xml_copy(input_xml.begin(), input_xml.end());
xml_copy.push_back('\0');

rapidxml::xml_document<> doc;

doc.parse<rapidxml::parse_declaration_node | rapidxml::parse_non_destructive>(&xml_copy[0]);
// Also tried with doc.parse<0>(&xml_copy[0]) but no luck

rapidxml::xml_node<>* root_node = doc.first_node("root");

root_node->first_node("data")->value(std::string("Edited!").c_str());

std::string data = std::string(xml_copy.begin(), xml_copy.end());

std::ofstream file;
file.open(filename.c_str());
file << data;
file.close(); 
```

有任何想法吗？

* * *

**编辑：**

结合接受的答案，该`parse()`函数还需要具有`rapidxml::parse_no_data_nodes`标志：

```
std::string input_xml = TileManager::getData(filename);
std::vector<char> xml_copy(input_xml.begin(), input_xml.end());
xml_copy.push_back('\0');

rapidxml::xml_document<> doc;

doc.parse<rapidxml::parse_no_data_nodes>(&xml_copy[0]); // Notice the flag here
rapidxml::xml_node<>* root_node = doc.first_node("root");

std::string s = "test";
const char * text = doc.allocate_string(s.c_str(), strlen(s.c_str()));

root_node->first_node("data")->value(text);

std::string data;
rapidxml::print(std::back_inserter(data), doc);

std::ofstream file;
file.open(filename.c_str());
file << data;
file.close(); 
```

然后它将起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:15:37.733

看看这个[http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1lifetime_of_source_text](http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1lifetime_of_source_text)。使用 RapidXML，您基本上必须确保写入文档的任何字符串在文档的整个生命周期内都保持不变。在您的代码中，您分配了一个临时的，在此调用后将不存在

```
root_node->first_node("data")->value(std::string("Edited!").c_str()); 
```

尝试

```
std::string new_value = "Edited!";
root_node->first_node("data")->value(new_value.c_str()); 
```

它应该适合你。看看这个关于将生成的 XML 输出到字符串[http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1printing](http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1printing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T06:18:15.950

解析标志**rapidxml::parse_no_data_nodes**是不够的。缺少声明节点

< ?xml 版本=“1.0”编码=“UTF-8”？>

在输出文件中。

您必须使用例如类似的标志：

```
 doc.parse < trapidxml::parse_full | rapidxml::parse_no_data_nodes >(&xml_copy[0]); 
```

然后它的工作。[CentOS7.2]

# c# - 在网格上添加总计无法通过 jquery

> ID：15054772
> 
> 赞同：0
> 
> 时间：2013-02-24T18:04:02.690
> 
> 标签：c#, jquery, asp.net, updatepanel

不知道我在这里做错了什么，但我有一个网页，其中包含一个包含在更新面板中的用户控件。这个用户控件有一个网格视图，在 ItemTemplate 中有一个文本框，在页脚模板中有一个文本框。页脚模板中的文本框应该从 jquery 中的函数获取计算值。以下是我获取总数的脚本，但未计算总数。请告知我在这里做错了什么。另外，如果我需要提供其他信息，请告诉我。此脚本位于母版页中。我测试以确保 jquery 正在工作，方法是将警报放在它可以工作的文档准备好之后。任何帮助将不胜感激。

```
<script language="javascript">
    var totalQuantity = 0;
    $(document).ready(function() {
    //alert('This is test');
    $(document).on('blur', 'input[id^="MainContent_MainContent_ucProjectionSet3_upProjections"]', function() {
            alert('This is test');
            totalQuantity = 0;
            $('input[id^="MainContent_MainContent_ucProjectionSet3_gvProjections_txtCurrentTime_"]').each(function(index) {
                doTotalCal($(this).attr("id"));
            });
        });
        function doTotalCalc(_id) {
            var indexVal = _id.Replace("MainContent_MainContent_ucProjectionSet3_gvProjections_txtCurrentTime_", "");
            console.log(indexVal);
            var strTotalQuantity = $('input[id^="MainContent_MainContent_ucProjectionSet3_gvProjections_txtCurrentTime_' + indexVal + '"]').val().replace("$", "");
            totalQuantity += Number(strTotalQuantity);
        }
        $("#MainContent_MainContent_ucProjectionSet3_gvProjections_lblCurrentTimeTotal").html(totalQuantity);
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:40:02.093

我能够在不使用更新面板的情况下完成此操作。我不需要为此项目进行异步回发，因此删除它是使 jquery 工作的一个很好的选择。

```
<script type="text/javascript">
    $(document).ready(function() {
    $("[id*=gvProjections]input[type=text][id*=txtCurrentTime]").keyup(function(e) {
            GrossTotal();
        });
    });
    var gross;
    function GrossTotal() {
        gross = 0;
        $("[id*=gvProjections]input[type=text][id*=txtCurrentTime]").each(function(index, item) {

            gross = gross + Number($(item).val());
        });

        $("[id*=gvProjections][id*=lblCurrentTimeTotal]").text(gross);
    }
    function isNumberDecimalKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;
        if (charCode == 46) //decimal
            return true
        else if (charCode > 57 || (charCode > 31 && charCode < 48))
            return false;
        else
            return true;
    } 
```

# java - 是否可以在不将它们实例化为实际对象的情况下制作类列表？

> ID：15054773
> 
> 赞同：1
> 
> 时间：2013-02-24T18:04:10.487
> 
> 标签：java

我的程序中有一组可以实例化的类。每个类都有一个与之关联的静态方法，用于更新该类的特定方面。

在运行时，程序选择使用集合中的一些类。

这些类的多个版本随后在程序运行时被实例化为对象。

在整个程序中，有一些关键点我需要调用与各种类相关的静态方法，但只调用程序在运行时选择的那些正在使用的方法。

我是否可以在不实例化它们的情况下创建一个包含正在使用的类的列表/数组？这样我就可以通过该列表并在每个类上调用静态方法？

我发现的唯一另一种方法是为每个正在使用的类实例化一个对象并将它们存储在一个数组中并从那里调用方法。这似乎有点低效，也不是很优雅。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:10:41.357

你可以使用反射来做这样的事情：

```
List <Class<?>> classes = new ArrayList<Class<?>>();

// alternatively, classes.add(com.foo.MyClass1.class);
classes.add(Class.forName("com.foo.MyClass1"));  
classes.add(Class.forName("com.foo.MyClass2"));
// ...etc

Method m = classes.get(0).getDeclaredMethod("staticFunction");
m.invoke(null); // pass in an instance of the class if this is an instance method 
```

查看[Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)和[Method](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html)的 javadoc 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:09:53.030

我不确定你为什么要避免实例化，但如果你唯一要做的就是调用静态方法，那么就没有理由创建对象。至于您的问题，您可以毫无问题地创建一个类数组。请记住，MyClass.class 实际上是 Class 类的对象，所以这会起作用：

```
Class[] classes = new Class[] {MyClass1.class, MyClass2.class}; 
```

然后，您可以使用您的逻辑来选择其中一些。完成后，您可以使用反射实例化它们：

```
classes[0].newInstance(); 
```

希望对您有所帮助，如果没有，请详细说明您的问题。请注意，将创建类对象本身（不确定您是否可以阻止类加载器加载它们）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T18:11:56.263

您可以拥有一个 Class 对象列表，例如

`List<Class> myClasses = new ArrayList<Class>();`

要将项目添加到列表中，您可以编写类似的代码`myClasses.add(Class1.class);`

这是存储类列表的一种方法，无需为每个类创建一个实例。

# mule - Mule Inter - 同一实例中的应用程序通信

> ID：15054777
> 
> 赞同：7
> 
> 时间：2013-02-24T18:04:31.557
> 
> 标签：mule, esb

我在 MULE 上探索了网络，并了解到应用程序之间的通信——即使它们部署在同一个 Mule 实例中——它们也必须使用 TCP、HTTP 或 JMS 传输。

不支持虚拟机。

然而，我发现这与 ESB 原则有点矛盾。理想情况下，我们应该能够在 ESB 中定义端点并使用任何传输连接到该端点？我可能错了。此外，由于所有应用程序都共享同一个 JVM，因此人们希望能够通过内存中的 VM 队列进行通信，而不是依赖于无事务 HTTP 协议或 TCP，其中可以建立的连接数取决于服务器资源。即使对于 JMS，我们也需要定义和管理另一个队列以及可能影响性能的大量使用。虽然我同意如果我们有分布式和集群系统，HTTP 或 JMS 将是唯一的选择。

是否有任何计划将 VM 合并为应用程序间通信协议，或者是否有任何其他方式可以让一个 Flow 与另一个 Flow Endpoint 通信但在不同的应用程序中？

编辑： - Mulesoft 的回答 [http://forum.mulesoft.org/mulesoft/topics/concept_of_endpoint_and_inter_app_communication](http://forum.mulesoft.org/mulesoft/topics/concept_of_endpoint_and_inter_app_communication)
*是的，我们正在考虑未来版本的应用间通信。仍然不清楚我们何时会这样做，但我们对我们希望此功能如何表现有一些想法。我们可能会创建一个服务器级配置，您可以在其中定义要在所有应用程序中使用的资源。在那里，您将能够定义一个 VM 连接器并使用它在同一服务器中的应用程序之间发送消息。正如我所说，这只是一个想法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:05:22.987

关于 VM 作为应用间通信的使用，只有 MuleSoft 可以回答 VM 是否具有未来的功能。

我认为这与 ESB 原则并不矛盾。[“容器”特性在 David A Chappell 的“企业服务总线书](http://shop.oreilly.com/product/9780596006754.do)”第 6 章中有很好的定义。容器应该尽量保持应用程序隔离。

这将提供一些好处，例如“可独立部署的集成服务”（同一章）、更容易的集群化和其他好处。

您应该处理相同的 VM 应用间通信，就好像它们位于不同服务器中的应用之间一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T21:19:23.030

似乎 Mule 在 3.5 版本中添加了一个功能，可以在同一服务器中部署的应用程序之间进行通信。但共享 VM 连接器仅在企业版中可用。信息： http: [//www.mulesoft.org/documentation/display/current/Shared+Resources#SharedResources-DefiningDomains](http://www.mulesoft.org/documentation/display/current/Shared+Resources#SharedResources-DefiningDomains)

示例：http: [//blogs.mulesoft.org/optimize-resource-utilization-mule-shared-resources/](http://blogs.mulesoft.org/optimize-resource-utilization-mule-shared-resources/)

# android - 2G 3G WiFi无缝切换

> ID：15054778
> 
> 赞同：0
> 
> 时间：2013-02-24T18:04:37.177
> 
> 标签：android, sockets, android-wifi

有没有办法处理切换 2G ==> 3G ==> Wifi 的无缝切换。其他方式？

我看到有`NetworkInfo`返回 null 的，我猜 Android 首先广播 LAN 的交换机，然后小睡并重新建立 IP 地址和连接。至少套接字不会再收到任何东西。

有没有办法使无缝切换/切换成为可能？

# node.js - 节点中的 Coffeescript 类语法不同？

> ID：15054786
> 
> 赞同：1
> 
> 时间：2013-02-24T18:05:30.203
> 
> 标签：node.js, coffeescript, frappe

几年来，我一直在前端使用咖啡脚本。并且熟悉看起来像这样的类语法：

```
 class MyClass
      methodOne : ->
         console.log "methodOne Called"
      methodTwo : (arg, arrg) ->
         console.log "methodTwo Called" 
```

最近我一直在使用 node 和[frappe](https://github.com/dweldon/frappe)样板，用于使用 coffeescript 和 node 的 web 应用程序。

此脚本使用 CoffeeScript 类来处理具有以下语法的路由：

```
 class MyClass
      @methodOne = ->
         console.log "methodOne Called"
      @methodTwo = (arg, arrg) ->
         console.log "methodTwo Called" 
```

我可以从我的正常用法中注意到的唯一用法差异是 Routes.coffee 文件直接使用该类而不是创建一个`new`对象。所以：

```
 MyClass.methodOne()

   # vs

   new MyClass().methodOne() 
```

现在我了解到该`@methodOne`语法没有使用`.prototype`，而其他语法使用。但是为什么这会使使用失败呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:46:50.323

因此，以类方法开头的`@`方法是类方法，而其他所有方法都是实例方法。对于实例方法，`:`本质上意味着公共，而`=`意味着私有。CoffeeScript 中的类方法不存在“公共”与“私有”的二分法，所以`:`做同样`=`的事情。他们都是公开的。

例如，看看这个类：

```
class MyClass
  @methodOne = -> 
  @methodTwo : -> 
  methodThree : ->
  methodFour = -> 
```

计算结果为以下 JavaScript：

```
var MyClass;

MyClass = (function() {
  var methodFour;

  function MyClass() {}

  MyClass.methodOne = function() {};
  MyClass.methodTwo = function() {};
  MyClass.prototype.methodThree = function() {};
  methodFour = function() {};

  return MyClass;

})(); 
```

所以，`methodOne`和`methodTwo`都是公共类方法，`methodThree`都在原型上，所以它是一个公共实例方法，并`methodFour`成为类中的一个变量，可以在内部使用但永远不会公开。

希望能回答你的问题？

# javascript - 通过 HashKey 查找并更新哈希以添加记录以进行保存

> ID：15054787
> 
> 赞同：0
> 
> 时间：2013-02-24T18:05:32.620
> 
> 标签：javascript

可以说我有一个哈希数组：

```
hash = [{"one": 1}, {"two": 2}] 
```

我想找到一个哈希并添加到它。例如找到“一个”并添加：

```
hash =  [{"one": 1, "new": new}, {"two": 2}] 
```

我可以通过哈希键来做到这一点吗？如果是这样，我会怎么做？或者有没有更好的方法在 Javascript 中做这件事？我不想复制哈希，创建一个新的并删除旧的。只需更新已经存在的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:12:31.150

JavaScript 非常动态，因此您应该能够执行以下操作：

```
var hash = [{"one": 1}, {"two": 2}];

var hLength = hash.length;
for(int i=0; i<hLength; i++){         // Loop to find the required object.
   var obj = hash[i];

   if(obj.hasOwnProperty('one')){     // Condition you're looking for
       obj["new"] = "new";            // Property you wish to add.
       break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:18:00.980

这是我刚刚编写的一个函数。

```
/*
 * hashes - (array) of hashes
 * needle - (string) key to search for / (int) index of object
 * key - (string) key of new object you wish to insert
 * value - (mixed) value of new object you wish to insert
 */

function addToHash(hashes, needle, key, value) {
  var count = hashes.length;
  // If needle is a number treat it as an array key
  if (typeof needle === 'number' && needle < count) {
    hashes[needle][key] = value;
    return true;
  } else {
    // Search hashes for needle
    for (var i=0; i<count; i++)
    {
      if (needle in hashes[i]) {
        hashes[i][key] = value;
        return true;
      }
    }
  }
  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:18:11.993

如果您乐于使用下划线，您可以通过以下方式完成它：

```
var hashes = [{"one": 1}, {"two": 2}];

var changed = _.map(hashes, function(hash){
    if(hash.one) {
        hash["new"] = "new";
        return hash
    }
    return hash;
}); 
```

您可以通过传递一个过滤器函数来封装 if 语句和另一个函数来封装对散列的修改来概括它。

**编辑**如果您想概括在哈希中查找的内容，这可能有效：

```
var hashes = [{"one": 1}, {"two": 2}];

var isOne = function(hash) {
    return hash.one;
}

var addNew = function(hash) {
    hash["new"] = "new";
    return hash;
}

var hashChanger = function(filter, editor) {
    return function(hash) {
        if(filter(hash)) {
            return editor(hash);
        }
        return hash;
    }
}

var changed = _.map(hashes, hashChanger(isOne, addNew)); 
```

# c - Valgrind - 复制/释放数组时内存泄漏

> ID：15054788
> 
> 赞同：2
> 
> 时间：2013-02-24T18:05:34.097
> 
> 标签：c

我正在搞乱分配和释放内存以掌握它。下面，我从命令行 ( `char **argv`) 中获取字符串参数，并尝试将它们复制为另一个 malloc 数组中的大写字符串：

```
static char **duplicateArgs(int argc, char **argv) {
    if (argc <= 1) {
        printf("%s\n", "No strings to duplicate.");
        exit(1);
    }
    char **duplicate = (char**)malloc((argc + 1) * sizeof(char**));

    int i = 1;
    int j = 0;
    int stringLength;

    while (argv[i]) {
        stringLength = strlen(argv[i]);
        duplicate[i] = (char*)malloc(stringLength * sizeof(char) + 1);
        for (j = 0; j < stringLength; j++) {
            duplicate[i][j] = toupper(argv[i][j]);
        }
        duplicate[i][j]= '\0';
        i++;
    }
    duplicate[i] = NULL;
    return duplicate;
} 
```

我还有一个可以释放它们的功能：

```
static void freeDuplicateArgs(char **copy) {
    int i = 0;
    while (copy[i]) {
        if (copy[i] != NULL){
            free(copy[i]);
        }
        i++;
    }
    if (copy != NULL){
        free(copy);
        }
} 
```

在`main`函数中，我调用这些方法，将它们打印出来然后释放它们：

```
 char **copy = duplicateArgs(argc, argv);
    char **p = copy;

    argv++;
    p++;
    while(*argv) {
        printf("%s %s\n", *argv++, *p++);
    }

    freeDuplicateArgs(copy);
    return 0; 
```

输出按预期工作，定期打印出字符串，然后用大写字母打印出来。但是，当我对照 Valgrind 检查它时，我得到了这个混乱：

```
==20867== Conditional jump or move depends on uninitialised value(s)
==20867==    at 0x100000D1A: freeDuplicateArgs (part2.c:32)
==20867==    by 0x100000E19: main (part2.c:57)
==20867== 
==20867== 
==20867== HEAP SUMMARY:
==20867==     in use at exit: 62,847 bytes in 368 blocks
==20867==   total heap usage: 520 allocs, 152 frees, 66,761 bytes allocated
==20867== 
==20867== LEAK SUMMARY:
==20867==    definitely lost: 8,639 bytes in 18 blocks
==20867==    indirectly lost: 1,168 bytes in 5 blocks
==20867==      possibly lost: 4,925 bytes in 68 blocks
==20867==    still reachable: 48,115 bytes in 277 blocks
==20867==         suppressed: 0 bytes in 0 blocks 
```

如果编译器没有为我的 freeDuplicates 方法引发错误并且我的输出正常，为什么我会出现这样的内存混乱？

编辑：我还应该提到我在 OSX 10.8 上——显然 Valgrind 对此有一些问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:23:04.897

### 释放代码

您的释放代码很有趣——不是完全错误，但也不是完全正确：

```
static void freeDuplicateArgs(char **copy) {
    int i = 0;
    while (copy[i]) {
        if (copy[i] != NULL){
            free(copy[i]);
        }
        i++;
    }
    if (copy != NULL){
        free(copy);
    }
} 
```

您`copy != NULL`在释放它之前进行了测试，但是您一直在使用它，因此那里的测试是多余的。此外，您可以做到`free(NULL)`不会遇到问题。

然后我们看一下循环：

```
 while (copy[i] != NULL)
 {
     if (copy[i] != NULL) 
```

循环条件和 if 条件是相同的——同样，你可以`free(NULL)`.

您的 while 循环具有写出的 for 循环结构。你会做得更好：

```
static void freeDuplicateArgs(char **copy)
{
    if (copy != NULL)
    {
        for (int i = 0; copy[i] != NULL; i++)
            free(copy[i]);
        free(copy);
    }
} 
```

防止崩溃的测试`copy != NULL`，并且仅在已知它为非空时才释放它是一个（非常非常）次要的优化。

我怀疑这是否是问题的直接原因（稍后我会更加努力地查看其余代码），但这是需要考虑的事情。

### 分配代码

你有：

```
static char **duplicateArgs(int argc, char **argv) {
    if (argc <= 1) {
        printf("%s\n", "No strings to duplicate.");
        exit(1);
    } 
```

首先，可以在没有用户参数的情况下调用程序，但它仍然具有`argv[0]`、程序名称和 NULL 指针。您的代码可能应该简单地通过返回来处理负值`(char **)NULL`。对于 0 个参数，您返回一个指向空指针的指针。对于一个或多个论点，还有工作要做。

考虑这一行：

```
duplicate[i] = (char*)malloc(stringLength * sizeof(char) + 1); 
```

您可能会考虑两种情况：`sizeof(char) == 1`和`sizeof(char) > 1`（是的，等等——等等！）。如果`sizeof(char) == 1`，那么你不需要乘以它。如果`sizeof(char) > 1`，您没有分配足够的空间；表达式应该是`(stringLength + 1) * sizeof(char)`。因此，编写以下两行之一：

```
duplicate[i] = (char*)malloc((stringLength + 1) * sizeof(char));
duplicate[i] = (char*)malloc(stringLength + 1); 
```

我注意到 C 标准`sizeof(char) == 1`根据定义说，所以实际结果是相同的，但如果你正在处理数组`int`或其他东西，`sizeof(type)`在正确的位置获得乘法可能是至关重要的。

> ### ISO/IEC 9899:2011 §6.5.3.4`sizeof`和`_Alignof`运算符
> 
> ¶4 当`sizeof`应用于类型为 , 或 , 的操作数`char`（`unsigned char`或其 `signed char`限定版本）时，结果为 1。

### Mac OS X 10.7.5 上的 Valgrind

将您的代码几乎与问题中所写的一样：

```
#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static char **duplicateArgs(int argc, char **argv)
{
    if (argc <= 1) {
        printf("%s\n", "No strings to duplicate.");
        exit(1);
    }
    char **duplicate = (char**)malloc((argc + 1) * sizeof(char**));

    int i = 0;
    int j = 0;
    int stringLength;

    while (argv[i]) {
        stringLength = strlen(argv[i]);
        duplicate[i] = (char*)malloc(stringLength * sizeof(char) + 1);
        for (j = 0; j < stringLength; j++) {
            duplicate[i][j] = toupper(argv[i][j]);
        }
        duplicate[i][j]= '\0';
        i++;
    }
    duplicate[i] = NULL;
    return duplicate;
}

static void freeDuplicateArgs(char **copy)
{
    int i = 0;
    while (copy[i]) {
        if (copy[i] != NULL){
            free(copy[i]);
        }
        i++;
    }
    if (copy != NULL){
        free(copy);
        }
}

int main(int argc, char **argv)
{
    char **copy = duplicateArgs(argc, argv);
    char **p = copy;

    argv++;
    p++;
    while(*argv) {
        printf("%s %s\n", *argv++, *p++);
    }

    freeDuplicateArgs(copy);
    return 0;
} 
```

（区别在于`int i = 0;`这个工作代码而不是`int i = 1;`问题代码。）

当在 下运行时`valgrind`，这会得到一份干净的健康清单：

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition mlk.c -o mlk
$ valgrind ./mlk nuts oh hazelnuts
==582== Memcheck, a memory error detector
==582== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==582== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==582== Command: ./mlk nuts oh hazelnuts
==582== 
nuts NUTS
oh OH
hazelnuts HAZELNUTS
==582== 
==582== HEAP SUMMARY:
==582==     in use at exit: 18,500 bytes in 33 blocks
==582==   total heap usage: 38 allocs, 5 frees, 18,564 bytes allocated
==582== 
==582== LEAK SUMMARY:
==582==    definitely lost: 0 bytes in 0 blocks
==582==    indirectly lost: 0 bytes in 0 blocks
==582==      possibly lost: 0 bytes in 0 blocks
==582==    still reachable: 18,500 bytes in 33 blocks
==582==         suppressed: 0 bytes in 0 blocks
==582== Rerun with --leak-check=full to see details of leaked memory
==582== 
==582== For counts of detected and suppressed errors, rerun with: -v
==582== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1)
$ 
```

如您所见，没有报告内存错误。这台机器仍在使用的 33 个块是“正常的”；它们由 Mac OS XC 运行时库分配。我还没有`valgrind`Mac OS X 10.8 系统可以与之比较。我建议你尝试在下面运行一个非常简单的程序`valgrind`，看看它告诉你什么：

```
int main(void) { return 0; } 
```

这将是您系统的基线。如果有泄漏，它们不是由你的代码引起的，你需要学习如何记录抑制，这样你的程序就不会因为 O/S 的违规而受到惩罚。

如果你运行上面的简单程序并发现它不会产生泄漏——或者泄漏更简单、更小——然后尝试一些稍微复杂一些的程序：

```
#include <stdlib.h>
int main(void)
{
    void *vp = malloc(32);
    free(vp);
    return(0);
} 
```

这样可以确保将`malloc()`其拖入并使用，但显然不会泄漏（并且它也可以`malloc()`正确处理故障！）。

### `valgrind`支持 Mac OS X 10.8

[Valgrind](http://valgrind.org/)网站说：

> 2012 年 9 月 18 日：valgrind-3.8.1，适用于 X86/Linux、AMD64/Linux、ARM/Linux、PPC32/Linux、PPC64/Linux、S390X/Linux、MIPS/Linux、ARM/Android（2.3.x 及更高版本）， X86/Android（4.0 和更高版本）、X86/Darwin 和 AMD64/Darwin（Mac OS X 10.6 和 10.7，对 10.8 的支持有限）可用。

您所看到的可能是对 Mac OS X 10.8 的有限支持的一个方面。

我知道我需要`valgrind`为自己重建（3.7.0 不是最新的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T18:11:00.490

我认为你永远不会设置`duplicate[0]`任何东西，所以当你使用`copy[i]`in时`freeDuplicateArgs`，从 i=0 开始，你不知道会发生什么。

# javascript - Javascript 显示/隐藏

> ID：15054790
> 
> 赞同：1
> 
> 时间：2013-02-24T18:05:39.923
> 
> 标签：javascript, menu, hide, show

我不知道是什么错误：

```
<script>
                function craft()
    {
    document.getElementById(craft).style.visibility="visible";
    document.getElementById(smell).style.visibility="hidden";
    document.getElementById(other).style.visibility="hidden";
    }

function smell()
{
document.getElementById(craft).style.visibility="hidden";
document.getElementById(smell).style.visibility="visible";
document.getElementById(other).style.visibility="hidden";
}

function other()
{
document.getElementById(craft).style.visibility="hidden";
document.getElementById(smell).style.visibility="hidden";
document.getElementById(other).style.visibility="visible";
}
        </script>

    <a onclick ="craft()" href="#">Craft</a><br>
    <a onclick ="smell()" href="#">Smell</a><br>
    <a onclick ="other()" href="#">Other</a><br>
    <div id="craft" style="display: none;" >CraftCraftCraftCraftCraftCraftCraft</div><br>
      <div id="smell" style="display: none;" >SmellSmellSmellSmellSmellSmellSmell</div><br>
        <div id="other" style="display: none;" >OtherOtherOtherOtherOtherOtherOther</div><br> 
```

我试图做一些像菜单一样的想法。当我点击工艺按钮时，只会出现包含

我找不到错误...我在浏览器中尝试了代码，但是出现了链接...当我单击它们时，没有任何反应...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T18:07:17.200

`'`在 中的 ID 周围使用`document.getElementById()`。例如：

```
document.getElementById('craft').style.visibility="visible"; 
```

没有它们，JavaScript 将尝试解释`craft`为变量（保存 ID 的值），而不是表示实际 ID 的字符串。

**编辑**

再看一遍后，您不使用一致的属性来隐藏您`<div>`的 s：

一开始你用 隐藏它们，`display: none;`然后尝试用 显示它们`visibility: visible;`。你必须在这里保持一致。使用`display`或`visibility`。两者在实际工作上有所不同。

所以要么调整你的 JavaScript 以`display`像这样使用：

```
document.getElementById('craft').style.display = "block"; 
```

或者最初使用`visibility: hidden;`这样的禁用：

```
<div id="craft" style="visibility: hidden;" >CraftCraftCraftCraftCraftCraftCraft</div> 
```

[*工作示例小提琴*](http://jsfiddle.net/F4AqB/)

# ruby-on-rails - 两次嵌套属性 form_for

> ID：15054794
> 
> 赞同：1
> 
> 时间：2013-02-24T18:05:49.150
> 
> 标签：ruby-on-rails, ruby, nested-attributes, form-for, fields-for

我正在寻找一个两次嵌套属性表单的解决方案。球队有几个球员，每个球员都有几轮。我在模型中添加了 accept_nested_attributes。这种方式对我不起作用。

```
 <% form_for(@team) do |team_fields| %>
     ...SOME FIELDS...
   <% team_fields.fields_for :players do |player_fields| %>...SOME FIELDS...

      <% player_fields.fields_for :rounds do |round_fields| %>
         <%= round_fields.text_field :message%>
      <%end%>
   <%end%>
 <%end%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:14:04.927

尝试将您的呼叫打印到`.fields_for`.

`<%= player_fields.fields_for :rounds do |round_fields| %>`

# r - 使用多元 xreg 进行 auto.arima 预测 - 意外结果

> ID：15054800
> 
> 赞同：3
> 
> 时间：2013-02-24T18:06:12.937
> 
> 标签：r, forecasting

在业余时间，我尝试提高我在预测技术方面的技能，今天的问题集中在使用多个回归器进行预测。我创建了一个受两个回归量影响的时间序列，但想知道如何用它们进行预测。

```
library(forecast) 
```

我尝试了以下方法：

首先我的时间序列：

```
ts.series3 <- structure(c(313, 253, 230, 258, 261, 303, 266, 269, 245, 274, 
346, 252, 283, 286, 260, 365, 295, 268, 301, 304, 353, 310, 313, 
285, 319, 403, 294, 330, 333, 303, 425, 343, 312, 350, 354, 411, 
361, 366, 333, 469, 380, 346, 487, 394, 359, 404, 511, 372, 418
), .Tsp = c(2003.08333333333, 2007.08333333333, 12), class = "ts") 
```

上面的时间序列是基于`ts.trend`（下）中显示的趋势，并由修饰符修改。如果第一个修饰符相关，则该值增加 25%，如果是第二个，则该值减少 10%。当两者都适用时，它们将增加 15%。

```
ts.trend <- structure(c(250, 253, 255, 258, 261, 264, 266, 269, 272, 274, 
277, 280, 283, 286, 289, 292, 295, 298, 301, 304, 307, 310, 313, 
316, 319, 323, 326, 330, 333, 337, 340, 343, 347, 350, 354, 357, 
361, 366, 370, 375, 380, 385, 390, 394, 399, 404, 409, 414, 418
), .Tsp = c(2003.08333333333, 2007.08333333333, 12), class = "ts") 
```

具有两个回归量的多元时间序列：

```
modifiers <- structure(c(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 
0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 
0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 
1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 
1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), .Dim = c(60L, 
2L), .Dimnames = list(NULL, c("Adjust1", "Adjust2")), .Tsp = c(2003.08333333333, 
2008, 12), class = c("mts", "ts")) 
```

然后我尝试制作以下模型：

```
fit.series3 <- auto.arima(ts.series3,xreg=window(modifiers,end=2007.16))
fcast.series3 <- forecast(fit.series3,xreg=window(modifiers,start=2007.161)) 
```

该代码似乎运行良好，但该图（见下文）并没有真正意义，因为没有确定回归变量，您会期望预测或多或少地遵循趋势线。有没有人可以对这里发生的事情提供一些见解？

```
plot(fcast.series3) 
```

![在此处输入图像描述](../Images/19df701c7adcaaefb5e9871c7a055f08.png)

当我不使用任何回归变量时，预测图如下所示。我对这个预测比对上图中的预测更有信心。我使用以下代码行来生成图表：

```
fit.series3clean <- auto.arima(ts.series3)
fcast.series3clean <- forecast(fit.series3clean)
plot(fcast.series3clean) 
```

![在此处输入图像描述](../Images/6c5d691dc93b3d323d75d8040e4e9a36.png)

我想知道是否有人了解我对多元 xreg 值的预测发生了什么。此外，我很想知道使用多元回归器进行预测的其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:37:54.920

看看你的拟合模型：

```
> fit.series3
Series: ts.series3 
ARIMA(0,1,1)(0,1,0)[12]                    

Coefficients:
          ma1  Adjust1   Adjust2
      -0.7586  80.1919  285.6239
s.e.   0.0832   0.0842       NaN

sigma^2 estimated as 71.55:  log likelihood=-128.38
AIC=264.76   AICc=266.05   BIC=271.09
Warning message:
In sqrt(diag(x$var.coef)) : NaNs produced 
```

的系数有问题，`Adjust2`因为标准误是`NaN`。

以下代码显示了问题：

```
> window(diff(diff(modifiers[,2],12)),end=2007.16)
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2004           0   0   0   0   0   0   0   0   0   0
2005   0   0   0   0   0   0   0   0   0   0   0   0
2006   0   0   0   0   0   0   0   0   0   0   0   0
2007   0   0 
```

在拟合期间，两次差异`Adjust2`始终为零，使得系数基本上未定义（并且具有无限方差）。

# c# - 使用 ILMerge 时无效 System.Threading.Monitor.Enter 错误

> ID：15054802
> 
> 赞同：5
> 
> 时间：2013-02-24T18:06:18.477
> 
> 标签：c#, visual-studio-2010, ilmerge

我正在尝试使用 ILMerge 将我的 C# 程序与 3 个引用的 DLL 结合起来。如果我在不合并它们的情况下运行程序，一切都会运行良好，但是当我合并它们时会出现`"Void System.Threading.Monitor.Enter"`错误。

这是我正在组合的 DLL：

```
HTMLAgilityPack.dll
MySql.Data.dll
RKLib.ExportData.dll 
```

该错误似乎来自于，`MySql.Data.dll`但我不确定它为什么会引发此异常。

任何想法都非常感谢。

编辑：我收到的完整错误是：

```
************** Exception Text **************
System.MissingMethodException: Method not found: 'Void System.Threading.Monitor.Enter(System.Object, Boolean ByRef)'.
at MySql.Data.MySqlClient.MySqlConnection.set_ConnectionString(String value)
at MySql.Data.MySqlClient.MySqlConnection..ctor(String connectionString) in :line 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:39:02.133

您使用的是什么版本的框架？例如，如果您使用的是 4.0/4.5，则可能需要设置一个 targetplatform 选项。

`/targetplatform:version,platformdirectory`

# d3.js - d3绘图箭头提示

> ID：15054804
> 
> 赞同：17
> 
> 时间：2013-02-24T18:06:22.330
> 
> 标签：d3.js

在这个例子中：

[http://jsfiddle.net/maxl/mNmYH/2/](http://jsfiddle.net/maxl/mNmYH/2/)

如果我放大圆圈，例如：

```
var radius = 30; // (is 6 in the jsFiddle)
var circle = svg.append("svg:g").selectAll("circle")
.data(force.nodes())
.enter().append("svg:circle")
.attr("r", radius) 
```

正确调整箭头的绘图使其指向圆的半径的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T19:07:12.480

您要求“正确调整箭头绘图的最佳方法”。我不能声称以下方法是“最佳”方法，我期待其他答案，但这是解决此问题的一种方法。

[http://jsfiddle.net/Y9Qq3/2/](http://jsfiddle.net/Y9Qq3/2/)

相关更新如下。

```
...
var w = 960,
    h = 500
    markerWidth = 6,
    markerHeight = 6,
    cRadius = 30, // play with the cRadius value
    refX = cRadius + (markerWidth * 2),
    refY = -Math.sqrt(cRadius),
    drSub = cRadius + refY;

...
svg.append("svg:defs").selectAll("marker")
    .data(["suit", "licensing", "resolved"])
    .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", refX)
    .attr("refY", refY)
    .attr("markerWidth", markerWidth)
    .attr("markerHeight", markerHeight)
    .attr("orient", "auto")
    .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");       

... 
function tick() {
    path.attr("d", function (d) {
        var dx = d.target.x - d.source.x,
            dy = (d.target.y - d.source.y),
            dr = Math.sqrt(dx * dx + dy * dy);
        return "M" + d.source.x + "," + d.source.y + "A" + (dr - drSub) + "," + (dr - drSub) + " 0 0,1 " + d.target.x + "," + d.target.y;
    });
 ... 
```

# ios - 如何让 UIWebView 工作

> ID：15054820
> 
> 赞同：1
> 
> 时间：2013-02-24T18:08:15.043
> 
> 标签：ios, cocoa-touch, uiwebview, webview, outlet

（此处错误链接：http: [//imgur.com/a/AF87N](http://imgur.com/a/AF87N)）

我开始从事 iOS 开发工作，而且我还比较新。

我正在寻找有关如何在应用程序中显示 Web 内容的教程，因此我使用了`UIWebView`.

在本教程中，我发现我完全按照这些步骤操作，但是当我执行最后一步（链接插座）时出现错误。

`DataViewController.h`我编辑的两个文件是`DataViewController.m`

这是我遵循的教程：[http ://www.youtube.com/watch?v=NFffF9tRbak](http://www.youtube.com/watch?v=NFffF9tRbak)

我正在使用`XCode 4.6`

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:13:05.110

将您的分店名称从更改`webView`为`myWebView`in outlets

编辑：或在您的代码中将您的 UIWebView 对象名称从更改`myWebView`为`webView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:32:15.527

重命名可能还是会出现一些错误，有机会，所以最好重新设置连接。它很简单。您可以按照以下步骤解决此问题：

1.

![在此处输入图像描述](../Images/278fc441e05bf24eadda3bd6384b5571.png)

单击 Web View 左侧的十字符号，将删除无效的插座。

2.然后，通过控件将现有`@property(nonatomic, retain) IBOutlet UIWebView *myWebView`的“+”号拖到属性出口，连接到 Interface Builder 中的 web 视图。

这将解决您的问题，只是因为您是 xcode 的新手。熟悉了就会好起来的。

编辑：如果仍然不清楚，请参阅下面的屏幕截图；

你在 yourviewcontroller.h 中的插座现在可能是这样的， ![在此处输入图像描述](../Images/d3d67eee41e5b28a5a40f1599bacf4ec.png)

在你的xib中，

![在此处输入图像描述](../Images/8bd6b45de164c76d5698a21fa32243ae.png) 它可能看起来像这样。

所以你应该做的是，只需控制将左边的空白圆圈拖到@property 出口（第一张图片）到你的xib中的webview（在第二张图片中突出显示一个）。它会自行连接。

希望现在清楚

问候

# ios - 在 3.5” 和 4” 显示器上均匀排列 UIButton

> ID：15054823
> 
> 赞同：1
> 
> 时间：2013-02-24T18:08:26.113
> 
> 标签：ios, interface-builder, alignment, autolayout

我现在花了很多时间来弄清楚 - 自动布局以及如何使用它，但还没有找到关于如何解决这个问题的答案。

我的问题是我想在 iPhone 5 和之前的显示器上均匀地对齐例如 5 个垂直放置的 UIButton，但是有没有办法使用 Interface Builder 来做到这一点，或者它应该在代码中完成。当我希望按钮之间的垂直距离与屏幕分辨率（3.5 英寸和 4 英寸显示器）均匀时。

我尝试在按钮之间添加垂直约束，但这只会在选择 4 英寸显示器时在布局的顶部或底部添加一个间隙。

我当然错过了一些简单的东西，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:34:09.303

我让它工作的唯一方法是在边缘和按钮之间放置标签（没有标题，因此它们是不可见的），以便按钮和标签占据屏幕上的所有垂直空间。按钮具有固有大小，但标签没有，因此它们会扩展或收缩以正确填充空间。

```
-(void)viewDidLoad {
    [super viewDidLoad];

    NSMutableDictionary *viewsDict = [NSMutableDictionary dictionary];
    NSArray *titles = @[@"Button 1",@"Button 2",@"Button 3",@"Button 4",@"Button 5"];
    for (int i=1; i<6; i++) {
        UIButton *b = [UIButton buttonWithType:1];
        [b setTitle:titles[i-1] forState:UIControlStateNormal];
        [b setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:b forKey:[NSString stringWithFormat:@"b%d",i]];
    }

    for (int i=1; i<7; i++) { // labels for spacing
        UILabel *l = [[UILabel alloc ]init];
        [l setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:l forKey:[NSString stringWithFormat:@"l%d",i]];
    }

    for (id obj in viewsDict.allKeys) 
        [self.view addSubview:viewsDict[obj]];

    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[l1][b1][l2(==l1)][b2][l3(==l1)][b3][l4(==l1)][b4][l5(==l1)][b5][l6(==l1)]|"
                                                                   options:NSLayoutFormatAlignAllLeading
                                                                   metrics:nil
                                                                     views:viewsDict];

    NSArray *constraints2 = [NSLayoutConstraint constraintsWithVisualFormat:@"|-100-[b1]"
                                                                   options:NSLayoutFormatAlignAllLeading
                                                                   metrics:nil
                                                                  views:viewsDict];

    [self.view addConstraints:constraints];
    [self.view addConstraints:constraints2];
} 
```

这将所有按钮从左边缘对齐 100 个点，按钮之间的间距相等。这将调整屏幕大小和旋转。

# javascript - NodeJS Crypto加密到前端javascript解密

> ID：15054826
> 
> 赞同：3
> 
> 时间：2013-02-24T18:08:45.950
> 
> 标签：javascript, node.js, encryption

我正在寻找AES256 CBC解密客户端，

在 nodeJS 我使用这个函数来加密：

```
exports.encrypt = function(txt, cryptkey){
  var cipher = crypto.createCipher('aes-256-cbc',cryptkey);
  var crypted = cipher.update(txt,'utf8','hex');
  crypted += cipher.final('hex');

  console.log(crypted);
  return crypted;

}; 
```

但我似乎无法在任何客户端库（JSAES.js、SJCL.js、pidcrypt）中使用它

我的猜测是它与base64 / hex编码解码有关，任何指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T18:33:18.797

请看一下[CryptoJS](https://code.google.com/p/crypto-js)项目：

下面是一个 AES256 CBC 加密/解密的例子：

**包括：**

```
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/mode-cfb-min.js"></script> 
```

**JS：**

```
var passPhrase = "Secret Phassphrase";

var encrypted = CryptoJS.AES.encrypt("Message", passPhrase, { mode: CryptoJS.mode.CFB });
var decrypted = CryptoJS.AES.decrypt(encrypted, passPhrase, { mode: CryptoJS.mode.CFB });

console.log('encrypted', encrypted);
console.log('decrypted', decrypted.toString(CryptoJS.enc.Utf8)); 
```

[在jsFiddle](http://jsfiddle.net/zCaXT/)查看演示

# google-app-engine - 来自 GAE 云端点的 400 响应

> ID：15054829
> 
> 赞同：6
> 
> 时间：2013-02-24T18:09:03.877
> 
> 标签：google-app-engine, google-cloud-endpoints

我正在尝试对我的 GAE Cloud Endpoint 进行以下 api 调用：

```
gapi.client.myapp.foo.update({
  "value": "foobar",
  "key": "keyvaluefromlistoperation"
}).execute(function(resp) {
  console.log(resp);
}); 
```

回应如下：

```
[
 {
  "error": {
   "code": 400,
   "message": "Bad Request",
   "data": [
    {
     "domain": "usageLimits",
     "reason": "keyInvalid",
     "message": "Bad Request"
    }
   ]
  },
  "id": "gapiRpc"
 }
] 
```

请注意，在此调用之前，我已经过身份验证，插入了几个 foo 对象，然后调用 list 将它们返回给客户端。api 的资源管理器更新调用工作正常，运行下面的 jQuery 代码段也工作正常。有什么建议么？或者我只是在实验性的错误领域。

```
var token = gapi.auth.getToken();
$.ajax({
  type:"POST",
  beforeSend: function (request) {
    request.setRequestHeader("Content-Type","application/json");
    request.setRequestHeader("Authorization", token.token_type+" "+token.access_token);
  },
  url: "https://myappid.appspot.com/_ah/api/myapp/v1/foo/update",
  data:JSON.stringify({
     "value": "foobar",
     "key": "keyvaluefromlistoperation"
  }),
  processData: false,
  dataType: "json",
  success: function(msg) {
    console.log(msg);
  },
  failure: function(msg) {
     console.log(msg);
  }
}); 
```

这是Java代码：

```
@Api(
    name = "myapp",
    description = "This is the myapp rest interface",
    scopes = {"https://www.googleapis.com/auth/userinfo.email"},
    version = "v1",
    clientIds = {Ids.WEB_CLIENT_ID}
)
public class FooV1 {

    private static PersistenceManager getPersistenceManager() {
        return PMF.get().getPersistenceManager();
    }

    @ApiMethod(
            name = "foo.update", 
            httpMethod = HttpMethod.POST
    )
    public Foo update(Foo foo, User user) throws OAuthRequestException, IOException, UnauthorizedUpdateException {
        PersistenceManager pm = PMF.get().getPersistenceManager();

        if (user != null) {
            try {
                Foo f = pm.getObjectById(Foo.class, foo.getId());
                if ( Security.isUpdateAuthorized(f, user) ) {
                    if( foo.getValue() != null ) f.setValue(foo.getValue());
                } else {
                    throw new UnauthorizedUpdateException("");
                }
            } finally {
                pm.close();
            }
        } else {
            throw new OAuthRequestException("Invalid user.");
        }

        return foo;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-25T16:55:45.317

我有同样的问题。显然，一旦部署到 GAE，就不能使用“密钥”作为字段。在本地它工作得很好。

# date - Symfony，树枝，日期

> ID：15054830
> 
> 赞同：1
> 
> 时间：2013-02-24T18:09:18.443
> 
> 标签：date, symfony, twig

简单的问题，但我可以在这里找到答案：http: [//twig.sensiolabs.org/doc/filters/date.html](http://twig.sensiolabs.org/doc/filters/date.html)

我有这个：user.birthday|date("Y\m\d")

但输出例如：19930224

我想将它分开购买“/”，例如：1993/02/24

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:12:53.413

您不能使用反斜杠 `\`，因为它用于转义字符。你可以`/`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:02:21.690

在`date()`函数中，您需要`\`使用第二个作为`\\`.

正如[树枝文档](http://twig.sensiolabs.org/doc/filters/date.html)中所说：

> 要转义日期格式的单词和字符，请在每个字符前面使用 \\

因此，您需要在 twig 模板中按以下方式对其进行转义：

```
{{ user.birthday|date('Y\\\\m\\\\d') }} 
```

# c++ - 头文件和多类使用（编辑：前向声明）

> ID：15054834
> 
> 赞同：0
> 
> 时间：2013-02-24T18:09:41.800
> 
> 标签：c++, file, class, header, include

我有一个问题，我有几个头文件，我需要将它们中的每一个都包含在彼此中。显然，这是无法做到的，因为当我编译时，会抛出“包含嵌套太深”的错误——因为这实质上是要求编译器进入无限包含循环。

我可以使用 void 指针修复它，但这对我来说似乎是不好的编码习惯。

这是我正在尝试做的一个示例，以帮助理解：

文件-A：

```
#include "File-B"
#include "File-C"
class A
{
    public: B* p_B;
    public: C* p_C;
}; 
```

文件-B：

```
#include "File-A"
#include "File-C"
class B
{
    public: A* p_A;
    public: C* p_C;
}; 
```

文件-C：

```
#include "File-B"
class C
{
    public: B* p_B;
}; 
```

这只是显示需要每个类声明的位置。肯定有更好的解决方案`void*`。

编辑：我已经在使用包含警卫，这段代码只是为了帮助你了解我想要做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:13:06.760

你应该使用**[包括警卫](http://en.wikipedia.org/wiki/Include_guard)**：

```
#ifndef _FILE_A_H_
#define _FILE_A_H_

// Contents of FileA.h...

#endif 
```

可能，还使用**[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)**来打破数据结构定义之间的循环依赖关系。

在`FileA.h`：

```
class B; // No need to #include "FileB.h"

class A
{
public:
    B* pB;
}; 
```

在`FileB.h`：

```
class A; // No need to #include "FileA.h"

class B
{
public:
    A* pA;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:12:57.203

我会使用包含保护，它只包含一个文件一次。

```
#ifndef FILE_A
#define FILE_A
class A
{
    public: B* p_B;
    public: C* p_C;
};
#endif 
```

[http://en.wikipedia.org/wiki/Include_guard](http://en.wikipedia.org/wiki/Include_guard)

每个文件只包含一次头文件。您也可以使用#pragma_once，尽管它不是标准的。

在不起作用的情况下，您可以使用前向声明。

```
class B;
class C;
class A
{
    public: B* p_B;
    public: C* p_C;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T19:50:41.050

如果您使用指向其他类的指针或引用，并且头文件中没有代码，则可以使用前向声明：

```
class A; // Forward declaration

class C; // Forward declaration

class B
{
  public:
    A* p_A;
    C* p_C;
}; 
```

如果头文件中的代码引用其他类的任何成员，则必须包含其他类的完整定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:13:16.377

这就是为什么你有`#include <>`守卫。

```
#ifndef _FILE_B
#define _FILE_B
#include "File-A"
#include "File-C"
class B
{
    public: A* p_A;
    public: C* p_C;
};
#endif 
```

# javascript - 在 JavaScript 中使用基于用户输入的条件的问题

> ID：15054838
> 
> 赞同：2
> 
> 时间：2013-02-24T18:09:59.683
> 
> 标签：javascript, html, function, if-statement, conditional

我正在为一些朋友建立一个笑话网站，网站上的一个页面我想有一些互动游戏。我习惯了 C++，所以过渡到 javascript 是一个有趣的过程。我现在在页面上只有一个段落元素、一个文本输入框和一个按钮。单击按钮时，它应该调用 playGame() 函数。playGame 函数查看段落元素（“游戏”）中的内容，然后查看用户输入并生成适当的结果。我只是使用一组条件来完成此操作，但由于某种原因，该功能似乎并没有改变段落元素，从而使整个事情变得愚蠢，经过并进行了一些修改，但我无法修复问题。这是代码：

```
<html>

<script>

function playGame()
{
   test=document.getElementById("game");
   var userInput=gameInput=document.getElementById("gameInput").value;

   if (test.innerHTML=="Question_1")
      {
         if (userInput.toLowerCase()=="yes")
            {
               test.innerHTML="Ending_Result_1";
            }
         else if (userInput.toLowerCase()=="no")
            {
               test.innerHTML="Question_2";
            }
         else
            {
               test.innerHTML="Ending_Result_2";
            }
      }
   else if (test.innerHTML=="Question_2")
      {
         if (userInput.toLowerCase()=="yes")
            {
               test.innerHTML="Positive_Ending";
            }
         else if (userInput.toLowerCase()=="no")
            {
               test.innerHTML="Ending_Result_3";
            }
         else
            {
               test.innerHTML="Ending_Result_4";
            }
   else
      {
         test.innerHTML="Refresh_page_message";
      }
}
</script>

<head>

<title>CptTuna's Whip or No Whip</title>

</head>

<body>

<p id="game">"Question_1"</p>

<input id="gameInput" type="text">
<button type="button" onclick="playGame()">Answer</button>

</html> 
```

为了适当起见，我只是将实际文本内容更改为通用短语。任何有关为什么该功能无法正常执行的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:43:47.527

选一个：

*   在条件句中包含引号 ( `""`)，或 ...
*   从 HTML 中删除引号

`'Question_1' != '"Question_1"'`
请注意，您可以使用单引号和双引号的组合来避免转义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:22:28.833

您的代码中刚刚出现了一些小的语法错误。这对我有用：

```
function playGame() { 
  test=document.getElementById("game");
  var userInput=gameInput=document.getElementById("gameInput").value;

  if (test.innerHTML=="\"Question_1\"") {
    if (userInput.toLowerCase()=="yes") {
      test.innerHTML="Ending_Result_1";
    } else if (userInput.toLowerCase()=="no") {
      test.innerHTML="\"Question_2\"";
    } else {
      test.innerHTML="Ending_Result_2";
    }
  } else if (test.innerHTML=="\"Question_2\"") {
    if (userInput.toLowerCase()=="yes") {
      test.innerHTML="Positive_Ending";
    }  else if (userInput.toLowerCase()=="no") {
      test.innerHTML="Ending_Result_3";
    }  else {
      test.innerHTML="Ending_Result_4";
    }
  } else {
    test.innerHTML="Refresh_page_message";
  }
} 
```

我冒昧地重新格式化代码以更好地适应我的风格（并不是说你的代码有问题，而是能够看到你在哪里省略了右括号）。基本上，您还没有关闭一个条件语句，也没有在最后一个之前关闭整个内部块`else`。这在调试器中引发了*“未定义 playGame”的错误。*

另一点，但不是代码无法编译的原因，是您没有`"`在条件中将引号符号作为字符串文字包括在内，它是您的 innerHTML 内容的一部分。您的比较必须如下所示：`test.innerHTML=="\"Question_1\""`其中`\` *“反斜杠”*将单个下一个字符标记为编译器的字符串文字。

# c++ - C++ 设计：自定义字符串类的基类构造函数和 is-a 或 has-a 关系

> ID：15054839
> 
> 赞同：3
> 
> 时间：2013-02-24T18:10:08.397
> 
> 标签：c++, string, inheritance, constructor, base

我正在学习 C++，想实现一个自定义字符串类，`MyTextProc::Word`添加一些功能`std::string`，例如字符串反转、大小写转换、翻译等。

似乎最好使用 is-a 关系来完成：

```
namespace MyTextProc {
   class Word : public string {
      /* my custom methods.... */
   };
} 
```

我没有为我的类指定任何构造函数，但类的上述定义`Word`只公开了默认的 void 和复制构造函数 - 不能`Word`只继承所有公共字符串构造函数吗？

`Word`像`string`. _ 我没有向字符串添加任何属性；为了实现我的新子类，我必须真正实现字符串的每一个构造函数，即基类吗？

使用has-a关系最好吗？我应该只实现一个`const string&`构造函数并要求客户端传递一个字符串对象进行构造吗？我应该覆盖所有的字符串构造函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:34:11.027

欢迎来到 C++ 地狱。

您刚刚触及了 C++ 最具争议的方面之一：std::string 不是多态的，并且构造函数不是继承的。

唯一“干净”的方式（不会做出任何批评）是将 std::string 作为成员嵌入，委托其所有方法。干得好！

其他方式可以出现，但您必须始终注意一些限制。

*   std::string 没有虚方法，所以如果你派生它，你将不会得到多态类型。
*   这意味着如果您将一个 Word 传递给一个字符串保持函数，并且该函数调用一个字符串方法，则不会调用您的覆盖方法并且
*   `new`不得将Word via 的任何分配分配给字符串*：通过此类指针删除将导致未定义的行为
*   所有接受字符串并返回字符串-s 的继承方法都可以工作，但它们将返回字符串，而不是 Word。

关于构造函数，它们不是继承的。默认构造继承是一种错觉，因为编译器合成了默认、复制和分配的默认实现，隐式调用了基。

在 C++11 中，一种解决方法可以是

```
class Word: public std::string
{
public:
    template<class... Args>
    Word(Args&&... args) :std::string(std::forward<Args>(args)...) 
    {}

    //whatever else   
}; 
```

这使得在调用合适的 std::sting ctor 时要给出任何类型的参数（如果存在，否则会发生编译错误）。

现在，决定自己的设计应该是什么。可能您会使用普通的 std::string 和一组独立的免费函数。

另一种（不完美的）方法可以使 Word 不继承，而是嵌入 std::string，如上构造，并隐式转换为 std::string。（加上有一个 str() 显式方法）。这使您能够将 Word 用作字符串，从字符串创建 Word，但不能使用 Word“代替”字符串。

另一件事要忘记（可能来自Java ...）：不要将自己固定为“is-a =继承和has-a =嵌入”OOP规则。所有 C++ 标准库对象*都不是 OOP 意义上*的对象，因此所有 OOP 学派方法论在这种情况下都有谬误。

您必须决定在您的情况下，简单编码（和“不要重复自己”范式的良好应用，继承更容易）或简单维护（嵌入让您的代码不太容易被使用）之间的权衡是什么被别人误会）

* * *

这是对以下评论的回答：

**“***标准 C++ 类缺乏多态性。为什么会这样？对于像我这样的新手来说，不使用虚函数实现标准 C++ 库似乎违背了它们旨在丰富语言的意义！！！*****"****

 **嗯......是的，不是的！

由于您引用 PERL，请考虑 - PERL 是一种脚本语言，其中类型是动态的。- Java 是一种类型为静态而对象为动态的语言 - C++ 是一种类型为静态而对象为静态的语言（对象的动态分配是显式的）

现在，在 Java 中，对象总是动态分配的，局部变量是对这些对象的“引用”。在 C++ 中，局部变量本身就是对象，并且具有值语义。而C++标准库的设计不是作为一组可扩展的基础，而是作为一组通过模板生成代码的值类型。

把 an 想象成和作品`std::string`一样`int`工作的东西：你是否期望从 int 派生来获得“更多方法”或改变其中一些方法的行为？

这里有争议的方面是 - 为了与这个设计保持一致 - std::string 应该只管理它的内部存储器，但不应该有任何方法。相反，字符串函数应该被实现为模板，因此它们可以用作“算法”，以及任何其他表现出相同 std::string 外部行为的类。设计师没有的东西。

他们在上面放置了许多方法，但他们并没有使其保持多态性以仍然保留值语义，从而使设计变得模棱两可，并且保留继承是“重用”这些方法而不重新声明它们的唯一方法。这是可能的，但有我告诉你的限制。

如果您想有效地创建新功能，具有“价值多态性”，请使用 teplates：而不是

```
std::string capitalize(const std::string& s) { .... } 
```

做类似的事情

```
template<class String>
String capitalize(const String& s) { .... } 
```

这样您的代码就可以使用任何具有相同字符串接口的类，对于任何类型的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T18:14:06.817

老实说，我会将您想要的方法实现为接收字符串并返回字符串的函数。它们将更容易测试、解耦和易于使用。在 C++ 中，不要总是在函数可以使用的情况下使用类。事实上，当您进入模板时，您可以创建一个没有定义的模板化函数，并为基本字符串类进行专门化。这样，您将始终知道您所接触的字符串类型是否具有自定义定义的方法（是的，如果您与 Microsoft 交互，您会发现有 5000 万个字符串实现。）**

# shell - 在 shell 脚本中模仿 rsync 命令行为

> ID：15054843
> 
> 赞同：1
> 
> 时间：2013-02-24T18:11:08.690
> 
> 标签：shell, escaping, sh, rsync

我正在尝试编写我的第一个简短备份脚本。我正在使用“普通” sh。当我在命令行上发出以下命令时：

```
rsync /home/username/.* /home/username/backups 
```

一切正常，正如预期的那样[仅备份我的点文件和点目录]。

但是，当我在其中运行带有这一行的 shell 脚本时，rsync 的行为很奇怪，并且会反复递归地备份所有内容和我的点文件。所以我最终得到了这样的备份：

```
/backups/dotfiles/backups/dotfiles/backups/dotfiles/    etc etc etc. 
```

如何在这个 shell 脚本中使用“*”来使 rsync 的行为符合预期？

这是整个脚本：

```
#!/bin/sh

#Backup dotfiles
echo 'Backing up dotfiles...'
rsync -avzu --delete --progress --exclude='.wine' --max-size='100M' /home/slowmo/.* /home/slowmo/backups/dotfiles/

#Compress into single file
echo 'Compressing dotfiles...'
tar cvzf /home/slowmo/backups/dotfiles.tar.gz /home/slowmo/backups/dotfiles/ 
```

# javascript - 如何在 dot.js 模板引擎中包含页眉、页脚？

> ID：15054846
> 
> 赞同：1
> 
> 时间：2013-02-24T18:11:36.287
> 
> 标签：javascript, node.js, template-engine, dot.js

我认为我所要做的[（根据 git hub 上的文档）](https://github.com/olado/doT/blob/master/examples/advancedsnippet.txt)就是放入`{{#def.loadfile('/snippet.txt')}}`我的模板中，所以它看起来像这样：

```
 <!DOCTYPE html>
    <html>
    <head>
        <meta charset='utf-8'>
        <title>Data</title>
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        {{#def.loadfile('/views/includes/header.txt')}}
        <section>
            {{~it.arrOut:value:index}}
                {{=value}}!
            {{~}}
        </section>
    </body>
    </html> 
```

但它似乎没有工作。我什至尝试导入[withdoT.js](https://github.com/olado/doT/blob/master/examples/withdoT.js)，但仍然没有。我得到的只是“内部服务器错误”，如果您能够使文件包含在 dot.js 上的工作，您能否分享您的知识。我喜欢这个漂亮的引擎，但它的文档没有那么漂亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T13:47:36.510

我不知道它是否适用于你，但在 nodejs 上，使用 expressjs 和 express-dot.js，我所做的是定义 loadfile：

在 app.js 中

```
var doT = require('express-dot');
doT.setGlobals({
    loadfile:function(path){return fs.readFileSync(__dirname + path, 'utf8');}
}); 
```

在 index.dot 中：

```
{{#def.loadfile('/views/_submit_form.html')}} 
```

基本上，它将 loadfile 添加为一个函数，该函数采用路径并在 dotjs 的“def”对象中输出字符串。

您当然可以根据您的特定需求进行调整和增强

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T00:33:08.723

我很确定 doT 正在寻找从与当前文件相同的目录开始的包含。假设当前模板在视图中，我认为只需从路径中删除“/views”就可以了......

# ruby - Rails 迭代数学运算符导致参数数量错误

> ID：15054852
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:12:10.563
> 
> 标签：ruby, ruby-on-rails-3

此迭代打印最高索引值。

它可以工作并打印 8 次 8 次。

```
- @videos.each_with_index do |video, index|   
  = index.size 
```

* * *

当我添加一个数学运算符时它不起作用并给我这个错误：**错误的参数数量（1 代表 0）**

```
- @videos.each_with_index do |video, index|   
  = index.size - 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:01:12.853

`index`在您的示例中是一个 Fixnum，即枚举中元素的索引。 [`Fixnum#size`](http://www.ruby-doc.org/core-1.9.3/Fixnum.html#method-i-size)返回 Fixnum 的机器表示中的字节数。可能不是你要找的。它接受零参数，这解释了你得到的异常。

`index.size`返回的事实`8`是因为您在 64 位架构上运行，并且与`@videos`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:26:21.143

这好像是：

```
index.size - 1 
```

被解释为：

```
index.size(-1) 
```

尝试添加括号以强制以正确的方式对其进行解释：

```
(index.size) - 1 
```

或者：

```
index.size() - 1 
```

# jenkins - Jenkins 是否有用于在 VM 上运行构建的稳定插件？

> ID：15054854
> 
> 赞同：9
> 
> 时间：2013-02-24T18:12:27.860
> 
> 标签：jenkins, virtualbox, travis-ci

Travis CI 有一个非常好的特性，构建在 VirtualBox 虚拟机中运行。每次构建开始时，该框都会从快照中刷新，并将代码复制到其中。构建的任何问题都不会影响主机，您可以使用任何操作系统来运行构建。

这将非常好，例如，在与您的生产环境匹配的客户操作系统上编译和测试代码。此外，您可以使您的主机免于任何您可能需要的安装依赖项（例如数据库服务器）并运行 IT，而不必担心端口冲突之类的事情。

詹金斯有这样的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T22:25:51.163

查看 Vagrant 插件[https://wiki.jenkins-ci.org/display/JENKINS/Vagrant-plugin](https://wiki.jenkins-ci.org/display/JENKINS/Vagrant-plugin)

该插件允许引导 Vagrant 虚拟机、配置它们并在其中执行脚本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T20:18:59.603

您可以在主从设置中运行 Jenkins。您的主实例管理所有作业，但让所有从属实例完成实际工作。这些从站可以是虚拟机或物理机。转到管理 Jenkins -> 管理节点 -> 新节点以将节点添加到您的 Jenkins 设置中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T21:00:55.440

[vSphere Cloud Plugin](https://wiki.jenkins-ci.org/display/JENKINS/vSphere+Cloud+Plugin)和[Scripted Cloud Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Scripted+Cloud+plugin)可用于此目的。

# django - Django：如何保存继承的模型？

> ID：15054866
> 
> 赞同：0
> 
> 时间：2013-02-24T18:13:24.363
> 
> 标签：django

```
class Conversation(models.Model):
    contact             = models.ForeignKey(Contact)
    conversation_datetime = models.DateTimeField()    
    notes               = models.TextField(_(u'Notes'),        blank=True)    

    def __unicode__(self):
        return self.conversation_datetime

class Conversation_history(Conversation):
    log_date_time = CreationDateTimeField()
    def __unicode__(self):
        return self.conversation_datetime 
```

不确定这是否是最好的做法，但我希望创建每个主要模式的历史表，以便我可以跟踪客户的操作并在支持案例中帮助他们。

我在原始模型的基础上创建了一个新模型。但是当我保存新模型的一个实例时，原始表会被填充。我不知道为什么。

```
call = Conversation(contact='', conversation_datetime = '', notes='')
call.save()

ch = Conversation_history(contact='', conversation_datetime = '', notes='')
ch.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:23:58.360

因为你还没有声明你的 Conversation 模型是抽象的。您正在使用多表继承。看看[文档](https://docs.djangoproject.com/en/1.4/topics/db/models/#model-inheritance)。

如果您希望将所有数据存储在您的孩子中，那么您应该执行以下操作 -

```
class ConversationBase(models.Model):
    contact             = models.ForeignKey(Contact)
    conversation_datetime = models.DateTimeField()    
    notes               = models.TextField(_(u'Notes'),        blank=True)  

    class Meta:
        absract = True

class Conversation(ConversationBase):
    pass

class ConversationHistory(ConversationBase):
    log_date_time = CreationDateTimeField() 
```

# facebook - 使用 Facebook Graph API，我如何获取页面的过去事件？

> ID：15054868
> 
> 赞同：1
> 
> 时间：2013-02-24T18:13:41.500
> 
> 标签：facebook, facebook-graph-api

目前我可以看到所有即将发生的事件： [https](https://graph.facebook.com/page-id/events?access_token=) ://graph.facebook.com/page-id/events?access_token= ...

将 'since' 参数设置为 0 不会显示过去的事件。

如果有人通过 Graph API 成功获取过去的事件，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T22:50:11.803

facebook 图形 API 中有一个未修复的错误，阻止用户从不属于他的页面检索过去的事件。

事实上，唯一的解决方案是使用一些像这样的 FQL：

```
SELECT eid, name, description, start_time FROM event WHERE creator = [pageid] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:23:24.847

since 参数将日期作为特定格式的值。例如 2012-08-17T16:20:00-0500。有关格式的详细信息，请参阅[https://developers.facebook.com/docs/reference/api/dates/](https://developers.facebook.com/docs/reference/api/dates/)。

需要注意的一点是，API 返回事件的回溯时间似乎是有限制的，但我不确定这是什么。

# javascript - 为什么不验证触发错误-backbone.js

> ID：15054871
> 
> 赞同：1
> 
> 时间：2013-02-24T18:13:51.000
> 
> 标签：javascript, backbone.js

为什么验证不会触发错误，因为“fred”应该使验证条件在设置时返回真？

```
Person = Backbone.Model.extend({

    initialize: function () {
        console.log('inisialize Person');
        this.bind("change:name", function () {
            console.log(this.get('name') + ' is now the name value')

        });
        this.bind("error", function (model, error) {

            console.log(error);

        });
    },
    defaults: {
        name: '',
        height: ''
    },
    validate: function (attributes, options) {  

        if (attributes.name == "fred") { //why wont this work?

            return "oh no fred is not allowed";
        }

    }

});

//var person = new Person({ name: 'joe', height: '6 feet' });
var person = new Person();
person.set({ name: 'fred', height: '200' }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:21:09.883

您的 validate() 在保存时被调用，但在设置属性时不会被调用，除非您明确告诉它这样做。从[文档](http://backbonejs.org/#Model-validate)：

> 默认情况下 validate 在保存之前调用，但如果 {validate:true} 被传递，也可以在设置之前调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T23:14:13.310

试试这个：在调用 save() 之后，将事件`initialize()`更改`this.bind('error')`为服务器失败。用于客户端的验证错误。最后，将作为第二个参数添加到调用中。Backbone 默认情况下不验证。`this.on('invalid')``'error'``'invalid'``{validate: true}``person.set()``set()`

```
Person = Backbone.Model.extend({
    defaults: {
        name: '',
        height: ''
    }, 

    validate: function(attributes) {
      if(attributes.name === 'fred' )
        return 'oh no fred is not allowed';
    },

    initialize: function() {
        alert('welcome');
        this.on('invalid', function(model, error){
          alert(error);
        });
        //listeners
        this.on('change:name', function(model) {
            var name = model.get('name');
            alert('changed ' + name);
        });

});

var person = new Person();
person.set({ name: 'fred', height: '200' }, {validate: true}); //oh no fred is not allowed 
```

# facebook - 获取活动所有者信息

> ID：15054872
> 
> 赞同：0
> 
> 时间：2013-02-24T18:14:00.590
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我有一个关于 FQL 查询的问题。

我无法获取事件的所有者信息：我收到此错误：

```
"error": {
    "message": "(#602) owner is not a member of the event table.", 
    "type": "OAuthException", 
    "code": 602
  } 
```

例如对于这个查询：

```
 SELECT name,description, owner.id from event 
    WHERE eid in (SELECT eid FROM event_member WHERE uid = me() 
    AND start_time > '2013-02-23T00:20:00') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:57:41.303

发生这种情况正是因为`owner`它不是`event`表的成员。请参阅[http://developers.facebook.com/docs/reference/fql/event](http://developers.facebook.com/docs/reference/fql/event)

但是您可以使用字段`creator`来查找事件的创建者，因此，您的查询将变为

```
SELECT name,description, creator from event 
WHERE eid in (SELECT eid FROM event_member WHERE uid = me() 
AND start_time > '2013-02-23T00:20:00') 
```

# android - 如何使用 RSA 算法为 Android 中的短信提供安全性

> ID：15054877
> 
> 赞同：0
> 
> 时间：2013-02-24T18:14:08.213
> 
> 标签：android, rsa, encryption

我想通过使用一个密钥（公共）进行加密来发送加密的短信数据，而这个短信 wnat 通过使用不同的私钥来解密......特别是我想使用 RSA 算法场景......

那么你能告诉我如何在android中使用不同的密钥来加密和解密数据吗？

我使用 DES 算法，但它使用相同的密钥....

任何人都可以建议如何做到这一点......我的空白值......

`

```
public String encrypt(String smsbody) {
    try {

        KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");

        kpg.initialize(512);// initialize key pairs to 512 bits ,you can
                            // also take 1024 or 2048 bits

        KeyPair kp = kpg.genKeyPair();

        PublicKey publi = kp.getPublic();
        System.out.println(publi.serialVersionUID);
        Cipher cipher = Cipher.getInstance("RSA");

        cipher.init(Cipher.ENCRYPT_MODE, publi);

        byte[] src = smsbody.getBytes();// converting source data into byte
                                        // array

        byte[] cipherData = cipher.doFinal(src);// use this method to
                                                // finally encrypt data

        String srco = new String(cipherData);// converting byte array into
                                                // string
        // System.out.println();
        // System.out.println("Encrypted data is:-" + srco);

        return srco;
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
    return "";
}

public PrivateKey Privatekey() {

    try {
        kpg = KeyPairGenerator.getInstance("RSA");

        kpg.initialize(512);// initialize key pairs to 512 bits ,you can
                            // also take 1024 or 2048 bits

        KeyPair kp = kpg.genKeyPair();
        privatei = kp.getPrivate();// Generating private key
    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return privatei;
}

public String decrypt(String smsbody, PrivateKey privatei) {
    try {

        Cipher cipheri = Cipher.getInstance("RSA");

        cipheri.init(Cipher.DECRYPT_MODE, privatei);// Setting to
                                                    // decrypt_mode

        System.out.println(smsbody);

        byte[] cipherDat = cipheri.doFinal(smsbody.getBytes());// Finally
                                                                // decrypting
        // data
        System.out.println(cipherDat);
        String decryptdata = new String(cipherDat);

        return decryptdata;
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
    return "";
} ` 
```

我正在尝试以下代码，但是当我使用解密时，它会给出

提前致谢...

# php - 创建两个条目 db 和 db 是相关的

> ID：15054878
> 
> 赞同：1
> 
> 时间：2013-02-24T18:14:10.713
> 
> 标签：php, doctrine-orm

我在数据库中创建了两个条目：

```
$new_user = new User();
$em->persist($new_user);

$new_friends = new UserFriends ();
$new_friends->setUserId($new_user); 
```

UserFriends-Entity 的一部分：

```
/**
 * @var \User
 *
 * @ORM\ManyToOne(targetEntity="User")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="user_id", referencedColumnName="user_id")
 * })
 */
private $user_id; 
```

如何从 new User() 获取 id 以创建新条目 new UserFriends()？

现在我做

```
$em->persist($new_user); $em->flush();
$id = $em->.....getRepository('Entity:User')->find($id);
$new_friends = new UserFriends ();
$new_friends->setId($id);
$em->persist($new_friends); $em->flush(); 
```

有更好的方法吗？而不是向数据库发出另一个请求？在教义 1.2 中，这很容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:19:09.673

调用后`$em->flush();`，调用`$new_user->getId();`应返回新插入的 id。所以

```
$em->persist($new_user); 
$em->flush();
$new_friends = new UserFriends ();
$new_friends->setId($new_user->getId());
$em->persist($new_friends);
$em->flush(); 
```

# java - 理解 Guava 的 TypeToken.isAssignableFrom 方法

> ID：15054879
> 
> 赞同：6
> 
> 时间：2013-02-24T18:14:14.630
> 
> 标签：java, generics, reflection, types, guava

我正在使用 Guava`TypeToken`类来测试是否可以将任意类型的实例分配给其他类型的对象。

在下面的代码片段中，我正在测试声明为`List`的类型是否可以从 分配`List<String>`，反之亦然：

```
TypeToken rawListType = new TypeToken<List>(){};
TypeToken parameterizedListType = new TypeToken<List<String>>(){};
System.out.println(rawListType.isAssignableFrom(parameterizedListType)); //true
System.out.println(parameterizedListType.isAssignableFrom(rawListType)); //false 
```

为什么第二次调用`isAssignableFrom`返回`false`？，鉴于下面的代码确实编译，所以我可以`List<String>`从`List`（带有警告）分配？：

```
List l = null;
List<String> l2 = null;
l = l2; 
l2 = l; //Type Safety Warning 
```

我的直觉是，如果这些类型的实例可以在没有警告的情况下分配（？），番石榴正在回答。如果这是正确的，我如何检查编译器意义上的*可分配*性，允许我将一个对象分配给另一个对象（有或没有警告），就像第二个代码片段中显示的那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:27:08.290

正如您所说，我们知道编译器将允许从原始类型分配泛型类型，但这并不意味着可分配性。编译器正在执行隐式未经检查的强制转换（因此发出警告）。

由于您真的想检查相应原始类型的可分配性，您可以使用[`TypeToken.getRawType`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html#getRawType%28%29)然后使用[`Class.isAssignableFrom`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29).

**编辑：**正如您所指出的，这种方法可以相互计算`List<Integer>`和`List<String>`分配。为避免这种情况，我认为您需要一个更通用的解决方案：

```
boolean checkRawAssignability(TypeToken<?> assigned, TypeToken<?> from) {

    //if from is a raw type, compare raw types instead
    final Type fromType = from.getType();
    if (fromType instanceof Class<?>) {
        return assigned.getRawType().isAssignableFrom((Class<?>)fromType);
    }

    //otherwise use normal methodology
    return assigned.isAssignableFrom(from);
} 
```

请注意，此解决方案不考虑数组类型。

# vb.net - 如何在 VB.NET 中编写全部使用相同核心代码的重载函数？

> ID：15054880
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:14:18.150
> 
> 标签：vb.net, overloading

我想在 VB.NET 中编写两个重载函数。

这两个函数中的大部分逻辑都是相同的，所以我不想只为两个重载复制整个函数。

我可以通过让每个重载函数调用另一个带有可选参数的函数（包含核心逻辑）来实现这一点，如下所示：

```
Public Overloads Function GetLocationDetails(ByVal countryId As Integer) As LocationInfo
    Return _GetLocationDetails(countryId)
End Function

Public Overloads Function GetLocationDetails(ByVal countryId As Integer, ByVal stateId As Integer) As LocationInfo
    Return _GetLocationDetails(countryId, stateId)
End Function

' This is the function providing the core logic for the two overloaded functions
Private Function _GetLocationDetails(ByVal countryId As Integer, Optional ByVal stateId As Integer = 0) As LocationInfo
    Dim returnVal As New LocationInfo

    Using con As New SqlConnection(ConfigurationManager.ConnectionStrings("myConnectionString").ConnectionString)
        Using cmd As SqlCommand = con.CreateCommand
            cmd.CommandText = "SELECT name, population FROM locations WHERE countryId = @countryId"
            cmd.Parameters.Add(New SqlParameter("@countryId", countryId))

            ' If there is a stateId, this function was called by the overloaded function that has a stateId parameter, so add that to the query
            If stateId <> 0 Then
                cmd.CommandText &= " AND stateId = @stateId"
                cmd.Parameters.Add(New SqlParameter("@stateId", stateId))
            End If

            con.Open()
            Using dr As SqlDataReader = cmd.ExecuteReader
                If dr.Read Then
                    returnVal.Name = dr("name")
                    returnVal.Population = dr("population")
                End If
            End Using
        End Using
    End Using

    Return returnVal
End Function

Public Class LocationInfo
    Public Name As String
    Public Population As Integer
End Class 
```

但是使用可选参数似乎不是很优雅，并且似乎首先否定了重载函数的整个目的。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:16:32.007

我看不出你用这段代码完成了什么。您也可以摆脱两个公共功能并将您的私有功能更改为公共：

```
Public Function _GetLocationDetails(ByVal countryId As Integer, _
                                    Optional ByVal stateId As Integer = 0) _ 
                                    As LocationInfo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:18:36.307

有两点需要说明：

第一：带有可选参数的函数是私有的，而固定参数版本是公共的。这是一个巨大的差异

第二：您可以强制`stateId`使用`_GetLocationDetails`

```
Public Overloads Function GetLocationDetails(ByVal countryId As Integer) As LocationInfo
    Return _GetLocationDetails(countryId,0)
End Function 
```

# php - Auth：从一个页面移动到另一个页面时使用会话和 cookie 是否安全？

> ID：15054882
> 
> 赞同：0
> 
> 时间：2013-02-24T18:14:38.970
> 
> 标签：php, session, authentication, cookies

用户登录后，我设置会话密钥和 cookie，并在从一个页面遍历到另一个页面时始终检查是否设置了会话密钥并允许用户访问数据。

如果用户没有注销并关闭浏览器，会话密钥将被销毁，但 cookie 仍然是他们的。因此，当用户再次打开浏览器时，首先我检查会话密钥是否存在，如果不存在，则检查 cookie。如果存在 cookie，请再次为此实例设置会话密钥，并根据之前的方法授予他访问权限。

用户注销时，只需删除 cookie 和会话密钥。

如果 cookie 被禁用，此方法可以正常工作，因为只处理会话。

**这是每个人用于他们网站的最安全的方法吗？我可以改进它以使我的网站更安全吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:58:48.160

仅使用会话，没有会话密钥。当您编写“session_start”时，PHP 会创建名为“session id”的 cookie。

# visual-studio-2010 - 用于在不同版本之间切换几个文件的 git 工作流

> ID：15054884
> 
> 赞同：0
> 
> 时间：2013-02-24T18:14:54.730
> 
> 标签：visual-studio-2010, git, reference, workflow

我有一个大型 Visual Studio 解决方案（数十个项目；数千个文件），我没有重新组织的选项。我正在解决一个问题，需要在解决方案中多个文件的两个版本之间来回切换。目前，这些文件之间的差异在`branch_a`和中`branch_b`。在我进行故障排除时，我可能需要在任一分支上提交，但任一分支中的更改不会出现在我担心来回切换的文件中。

是否有一个众所周知或直接的工作流程或一组 git 命令可以让我在这两个文件的两个版本之间来回切换？

如果重要的话，我在这两个版本之间来回切换的是第三方库的两个版本，这些版本在几十个项目中的 3 个中被引用——我希望避免进入每个项目，删除`library_a.dll`和添加`library_b.dll`和然后在这些项目上反过来，所以实际被切换的`.proj`文件是具有不同引用的文件。

显然（或者可能不是这样）同样问题的非 git 解决方案也受到欢迎，但由于 git 正在跟踪文件，这似乎是一个明显的选择。

# jquery - 如何将值从 jquery 传递到 Strut2 Action 类

> ID：15054886
> 
> 赞同：0
> 
> 时间：2013-02-24T18:15:14.143
> 
> 标签：jquery, struts2

从选择框中选择任何值后，我创建了一个选择框我正在调用具有选定值的 jquery 函数，我需要将此值传递给我的 Action 类，我不想使用选择标签因为我需要学习 jquery支柱2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:38:54.957

```
 <script>
function callMe() {
    $.ajax({
        type : "POST",
        url : "test.action", //this action is fired
        data : {fname='rohit'} //you can pass variable 'fname' with value 'rohit'
                }).done(function(data) {

                   //Ajax response is recevied in "data"
                   //you can put other process on "data"            

                 } 

    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:35:36.857

我认为你需要这样的东西；只是一个例子：

```
window.open('http://localhost:8080/PMBM/userdataedit.action?' + sel_id + '&operation=Edit', '_self'); 
```

您可以`.load()`根据自己的方便使用方法。

# .net - 通过 ICorRuntimeHost 访问 AppDomain

> ID：15054888
> 
> 赞同：0
> 
> 时间：2013-02-24T18:15:19.353
> 
> 标签：.net, com, clr, clr-hosting

我需要枚举加载到 CLR 中的 AppDomain。但我需要从*非托管*代码（在 C++ 中）中做到这一点。我想，我应该使用 ICorRuntimeHost。它包含 AppDomains 枚举的方法。ICorRuntimeHost::NextDomain 返回当前 AppDomain 的 IUnknown*。在我的代码中*不启用 CLR 支持*的情况下，我需要使用哪个接口来访问此 AppDomain ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:09:57.070

解决了。我只需要`#import <mscorlib.tlb>`.

# actionscript-3 - 坐标不会改变拖动缩放的 fxg 图形

> ID：15054891
> 
> 赞同：0
> 
> 时间：2013-02-24T18:15:33.187
> 
> 标签：actionscript-3, scale, flashdevelop, fxg

我正在使用 FlashDevelop、actionscript 3 和使用 Illustrator 构建的 fxg 图形（导出为 fxg 2.0）。

我用 Illustrator 导入了一个 fxg 矩形构建，然后当你点击它时我将它设置为可拖动的，所以它的坐标会改变。如果矩形比例为 1（这意味着：无比例），则此方法有效。但是，如果我改变它的比例（例如 fxgRect.scaleX = fxgRect.scaleY = 0.5; ）你可以拖动它但它的坐标不会改变！！这让我抓狂，因为精灵改变了位置，但如果你问它的坐标，它们并没有改变！我设置了，`fxgRect.mouseChildren = false;`所以我确定要移动精灵 fxgRect 而不是它里面的东西。（这只是一个例子，我的目标是用 illustrator 构建复杂的图形并在 FlashDevelop 中使用它）。

预先感谢您对我的帮助。

这是为测试此问题而编写的代码。要使用此示例，您必须创建一个 fxg 矩形 (fxgrectangle.fxg) 并将其放在 SimpleDragFxg.as 类的同一文件夹中。

```
import flash.display.*;
import flash.events.*;
import fxgrectangle;

public class SimpleDragFxg extends Sprite
{
    public var fxgRect:Sprite = new fxgrectangle(); // make an istance of fxgRect

    public function SimpleDragFxg()
    {
        //----------------------------------------------------------
        addChild(fxgRect);
        fxgRect.name = "FXGrect";
        fxgRect.x = fxgRect.y = 50;
        fxgRect.mouseChildren = false;
        fxgRect.scaleX = fxgRect.scaleY = 0.5; //<<< this makes the problem
        trace ("I'm ", this.name, "and I contain ", this.fxgRect.name, "which contains ", fxgRect.getChildAt(0).name);
        fxgRect.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
        //--------------------------------------------------------------
    }
    private function onMouseDown (e:MouseEvent):void
    {
        trace ("e.target: ", e.target.name);
        if (DisplayObject(e.target).name == "FXGrect")
        {
            trace ("FXGrect position BEFORE drag: ", fxgRect.x, fxgRect.y);
            Sprite(e.target).startDrag();
            stage.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
        }
    }
    private function onMouseUp (e:MouseEvent):void
    {
        fxgRect.stopDrag();
        stage.removeEventListener(MouseEvent.MOUSE_UP, onMouseUp);
        if (DisplayObject(e.target).name == "FXGrect")
        {
            trace ("FXGrect position AFTER drag: ", fxgRect.x, fxgRect.y);
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:11:44.880

尝试

```
public var fxgRect:Sprite = new Sprite();
fxgRect.addChild(new fxgrectangle()); 
```

# android - 如何停止广播接收器接收动作？

> ID：15054895
> 
> 赞同：0
> 
> 时间：2013-02-24T18:15:46.797
> 
> 标签：android, broadcastreceiver

我可以通过此代码启动一个广播接收器，它检测我的位置更新

```
Intent intent = new Intent(
                        LocationChangedReciever.ACTION_LOCATION_CHANGED);
                LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                long minTime = 1000; // This should probably be fairly long
                float minDistance = 1; // This should probably be fairly big
                String provider = "gps"; // GPS_PROVIDER or NETWORK_PROVIDER

                PendingIntent launchIntent = PendingIntent.getBroadcast(this,
                        0, intent, 0);
                manager.requestLocationUpdates(provider, minTime, minDistance,
                        launchIntent); 
```

我是通过单击按钮完成的，但是一旦单击该按钮，接收器就开始一直工作，但是我有一个停止按钮，它将禁用接收器，但我做不到，除非我卸载它，否则该接收器可以工作，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:17:28.137

打电话`removeUpdates(launchIntent)`。为此，您需要保留对为删除调用存储的意图的引用。

# javascript - 雅虎天气预报xml

> ID：15054896
> 
> 赞同：0
> 
> 时间：2013-02-24T18:15:47.060
> 
> 标签：javascript, xml, xml-parsing, yahoo, weather

我在使用 javascript 解析 Yahoo 的天气 api 时遇到问题。我一切正常，但我不知道如何获取多天的数据。我可以得到第一个，但不知道如何获得其他属性。

这是 XML 部分：

```
<yweather:forecast day="Sun" date="24 Feb 2013" low="19" high="31" text="Few Snow Showers" code="14"/>
<yweather:forecast day="Mon" date="25 Feb 2013" low="24" high="35" text="Partly Cloudy" code="30"/>
<yweather:forecast day="Tue" date="26 Feb 2013" low="33" high="34" text="Rain/Snow Showers" code="5"/>
<yweather:forecast day="Wed" date="27 Feb 2013" low="31" high="35" text="Snow Showers" code="14"/>
<yweather:forecast day="Thu" date="28 Feb 2013" low="25" high="33" text="Few Snow Showers" code="14"/> 
```

这段代码将为我提供第一个预测

```
forecastTag = findChild(findChild(effectiveRoot, "item"), "yweather:forecast");
day1 = forecastTag.getAttribute("low"); 
```

那么如何获取其他日子的数据呢？我曾尝试将 yweather:forecast 视为数组 [0]、[1] 等......但它没有用。我一直在阅读很多关于解析的内容，但就是想不通。我是 XML 新手。

谢谢小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:18:44.240

我想到了。

```
obj.plus1 = request.responseXML.getElementsByTagName("forecast")[1].getAttribute("low"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T09:46:57.930

你需要通过xml文件获取这个xml的命名空间，

`xmlhttp.responseXML.getElementsByTagNameNS('http://xml.weather.yahoo.com/ns/rss/1.0', 'forecast')[1].getAttribute("low");`

# ios - 保留其键的 NSMutableDictionary

> ID：15054903
> 
> 赞同：2
> 
> 时间：2013-02-24T18:16:11.023
> 
> 标签：ios, objective-c, nsmutabledictionary, core-foundation

我试图弄清楚如何创建一个保留而不是复制其密钥的 NSMutableDictionary。我已经实现了 -(NSUInteger)hash 和 -(id)isEqual: 对于我想要的键，我只是无法确定在回调中指定哪些选项。

```
CFDictionaryKeyCallBacks    keyCallbacks    = { 0, NULL, NULL, CFCopyDescription, CFEqual, NULL };

self.commonParents = (NSMutableDictionary*)CFBridgingRelease(CFDictionaryCreateMutable(nil, 0, &keyCallbacks, &kCFTypeDictionaryValueCallBacks)); 
```

上面的代码在 ARC 中可以正确使用对键的弱引用，但是如果我想要强引用怎么办？关键回调应该是什么样子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T20:39:20.263

tl;博士：

`CFDictionaryRef`使用提供的默认回调函数创建一个。它会做你想做的事。只是不要称它为`NSDictionary`.

* * *

是的，您可以创建一个`CFDictionaryRef`保留其密钥且不复制它们的密钥。事实上，这是a的*默认行为*`CFDictionaryRef`。

的文档`CFDictionaryCreateMutable()`说：

> 如果字典将仅包含 CFType 对象，则传递一个指向`kCFTypeDictionaryKeyCallBacks`作为此参数的指针以使用默认回调函数。

（因此，如果您只想将普通的 Objective-C 对象放入数组中，而不是像`void *`指针或其他任何随机的东西，这就是您想要的）

并且文档`kCFTypeDictionaryKeyCallBacks`说：

> `CFDictionaryKeyCallBacks`包含一组回调的预定义结构，适用于当 CFDictionary 的键都是 CFType 派生对象时使用。保留回调是`CFRetain`，释放回调是`CFRelease`，复制回调是`CFCopyDescription`，相等回调是`CFEqual`。因此，如果您在创建字典时使用指向该常量的指针，则键在添加到集合时会自动保留，并在从集合中移除时释放。

请注意，`retain`回调是[`CFRetain()`](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/uid/20001203-CH201-F11072)而不是类似的东西`CFCopyObject`（实际上并不存在）。

事实上，Core Foundation 没有“复制任何对象”的规范方法，这就是存在 , , 等函数`CFStringCreateCopy`的`CFArrayCreateCopy`原因`CGPathCreateCopy`。

所以，你可以做的是像这样创建你的字典：

```
CFDictionaryRef dict = CFDictionaryCreateMutable(NULL, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks); 
```

你现在有一个字典，它保留了它的键并且不复制它们。

我将用大写字母写下以下内容，以便您了解我要说的内容：

# 您创建的这本字典不是`NSDictionary`.

是的，`NSDictionary`并且`CFDictionaryRef`是免费桥接的。但是将其转换`CFDictionaryRef`为 an`NSDictionary`将滥用该桥接，因为`NSDictionary`文档中的这一行：

> ...一个键可以是任何对象（只要它符合`NSCopying`协议——见下文）

同样，文档`-[NSMutableDictionary setObject:forKey:]`明确说：

> 复制密钥（使用`copyWithZone:`; 密钥必须符合 NSCopying 协议）。

字典中的键不必符合`<NSCopying>`并且不使用复制`-copyWithZone:`，这意味着您的字典不是`NSDictionary`（或`NSMutableDictionary`）。每当您`NSDictionary`在代码中看到使用时，您都应该提供一个键值映射，其中键被*复制*（不保留）。那就是 API 合约。做任何其他事情都可能导致未定义的行为。

`-copy`（某些对象覆盖的事实`return [self retain]`是一个实现细节，与“什么是”的讨论无关`NSDictionary`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-21T18:52:27.177

我认为最好的答案隐藏在评论中，所以我会在这里强调它：最简单的方法是使用 a `+[NSMapTable strongToStrongObjectsMapTable]`（或者可能是带有`weak`引用的变体之一）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:21:13.760

我的建议是，不要这样做，而是将 NSString 或您用作键的任何类子类化，并以返回保留的字符串而不是复制的字符串的方式覆盖复制方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T19:55:40.690

我认为使用普通的旧 NSMutableDictionary 可以实现两种可能的解决方案。它们不像 NSMapTable 那样优雅。
你声明你的每个 Key 都有一个`uniqueID`，所以我假设这个 Value 不会随着时间而改变。

**选项1**：
使用`uniqueID`您的实际键作为将存储 NSArray 的 NSMutableDictionary 的键，`@[key, value]`因此整个结构看起来像这样
`@{ key1.uniqueID : @[key1, value1], key2.uniqueID : @[key2 : value2] }`

**选项 2**：
创建一个 NSObject 的子类，它是选项 1 的包装器。或者选项 1 的任何变体。

这些只有在`uniqueID`永不改变时才有效

# django - 当复数形式等于单数形式时模型复数的Django翻译

> ID：15054908
> 
> 赞同：5
> 
> 时间：2013-02-24T18:16:41.913
> 
> 标签：django

你怎么能告诉 ugettext 复数形式不是单数形式，即使它们在英语中是相等的？

```
class News(models.Model):
    class Meta:
        verbose_name = _('news')
        verbose_name_plural = _('news') 
```

makemessages 给出了这个：

```
#: models.py:134, models.:135
msgid "news"
msgstr "noticia" 
```

拆分此定义会使用“重复的消息定义...”破坏编译

我发现的解决方法：

*   在复数形式的末尾添加一个空格（我正在使用的那个）
*   用世界语写申请文本？只是在开玩笑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:13:47.183

尝试：

```
from django.utils.translation import pgettext

class News(models.Model):
    class Meta:
        verbose_name = pgettext("news singular", "news")
        verbose_name_plural = pgettext("news plural", "news") 
```

# php - 如果 1 列为空，则从 mysql 中删除产品？

> ID：15054909
> 
> 赞同：1
> 
> 时间：2013-02-24T18:16:43.520
> 
> 标签：php, mysql

好吧，这有点难问，但我会尽力以每个人都能理解的方式问它。（我希望）。:)

我在 mysql 中有一个名为“产品”的表。该表中有一个名为“clicks”的列。

如果“clicks”列为空或 0，我如何从 mysql 数据库中删除/删除产品？

顺便说一下，所有产品都以唯一的 ID 保存在 mysql 数据库中。

任何帮助或代码示例将不胜感激，所以我更好地理解它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:18:35.293

简单地`DELETE FROM table WHERE clicks IS NULL OR clicks = 0;`

# wpf - 如何添加在滚动查看器之后始终可见的按钮？

> ID：15054911
> 
> 赞同：3
> 
> 时间：2013-02-24T18:16:48.727
> 
> 标签：wpf, xaml, scrollviewer

我有一个 ScrollViewer，其中包含很多内容（数据网格、堆栈面板、文本框、标签等......），在它之外我想添加一个按钮（PRINT），重要的是按钮不是滚动查看器。我的目标是屏幕的顶部 90% 是滚动查看器，底部 10% 是始终显示 PRINT 按钮的“冻结面板”，并且在最大化和最小化时应该保持不变。

在遇到“属性内容设置不止一次”的问题后，我意识到我需要将我的 ScrollViewer 和 Button 添加到另一个容器中，到目前为止，似乎唯一可行的是 GRID - 但老实说，在你阅读之后如果你还有什么要推荐的，我愿意接受建议，我只使用了 GRID，因为它似乎几乎给了我想要的东西。

这是我现在的代码：

```
[Code]
<Window DataContext="{Binding PrintView, Source={StaticResource Locator}}" Width="900">

    <Grid Height="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>        

        <ScrollViewer Name="PrintView" Grid.Row="0" Height="Auto">
            <StackPanel>
        ... a LOT of stuff ...
            </StackPanel>
        </ScrollViewer>

        <Button Content="Print"
                Margin="0,20,0,20"
                Height="50"
                Width="150"
                FontSize="24"
                FontWeight="Bold"
                Grid.Row="1"
                />
    </Grid>
</Window>
[Code] 
```

当这样完成时，我的 ScrollViewer 没有滚动条，所以我看到了第一页，但我无法向下滚动，也没有看到 PRINT 按钮一个有趣的测试是更改以下内容：

```
<ScrollViewer Name="Apercu" Grid.Row="0" Height="600"> 
```

现在我再次看到我的滚动条（我可以滚动）并且我的 PRINT 按钮在它下方并且始终可见（这几乎是完美的）但是当我最大化我的窗口时，ScrollViewer 保持 600 的高度，因此它实际上并没有最大化（打印按钮下方的所有内容都是白色的）。

有任何想法吗？有没有另一种方法可以指定我的高度，或者我应该使用不同的控件（不是 GRID）？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:49:38.570

找到了 ...

```
 <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions> 
```

并从 ScollViewer 中删除高度

# android - 在我的应用中显示网站

> ID：15054914
> 
> 赞同：0
> 
> 时间：2013-02-24T18:17:05.640
> 
> 标签：android

美好的一天，我是新来的，我将此代码用于 RSS 阅读器。当此活动开始时，它将打开一个浏览器。但我希望通过 webview 在我的应用程序中显示此内容，任何人都可以帮助我如何做到这一点。

感谢您的回答。我已经有一个列表视图，其中包含来自 rss 提要的链接。我明天试试

```
protected void onListItemClick(ListView l, View v, int position, long id) {
Uri uri = Uri.parse((String) links.get(position));
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:57:03.563

> 我想通过 webview 在我的应用程序中显示网站。

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/>

package com.tgmcians.android;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class WebViewActivity extends Activity {

    private WebView webView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com");

    }

} 
```

并在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:20:00.757

您需要在布局中有一个 webview。然后打电话

webview.loadUrl(url);

这将在 webview 中加载 url。

# c# - 从我的离线 C# 应用程序附加到在线文本日志文件

> ID：15054921
> 
> 赞同：0
> 
> 时间：2013-02-24T18:17:50.710
> 
> 标签：c#, logging, text, append

我正在寻找有关我的一个或多个应用程序的客户反馈（可选，他们会收到通知），因此我想发送一些文本以从我的离线 C# Winforms 应用程序附加到在线日志文件中。

如果它有所作为，服务器是基于 Linux 的，我不介意公众是否也可以访问它，所以无需担心加密或任何事情（其中不会存储任何个人详细信息或类似内容）。

做这样的事情需要什么 C# 代码？（假装网站是：[http](http://www.website.com/logfile.txt) ://www.website.com/logfile.txt ）。我是否必须批量读取文件，然后批量写回，还是可以使用更有效的“附加”操作？

编辑：看起来比我想象的要难。如果我必须制作一个简单的 PHP 脚本来帮助完成这项任务，那就这样吧，不过如果是这样的话，我也会很感激代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:23:06.267

你有几个选择。

首先，您可以查看像[loggly](http://loggly.com/)这样的服务，它是一个在线日志文件。您将拥有一个个人 API 密钥来从您的应用程序中发布数据。

如果您不想这样做，您可以编写自己的 API，其中包含一个带有字符串参数的简单 Post。然后它将负责打开文件、添加文本并保存它。Winform 可能只是触发并忘记，知道 API 可以处理它。

在 C# 中，您可以使用 RestSharp 或 HttpClient 将数据发送到 API。

我认为您将遇到的问题是让 Winform 应用程序保存文件。如果它是本地文件，您可以只附加到文件（无需将整个文件读入内存。）但在远程计算机上，您首先必须下载整个文件。下一个问题是确保 Winform 应用程序可以保存文件。如果没有 API 调用之类的东西，您可能会遇到很多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:33:40.570

这可能不足以满足您的需求，但这是我的解决方案。我能想到的最简单的方法是让您的 C# 应用程序将文本发送到 Web 脚本。既然您说您不在乎数据是否已加密，我想为什么不将文本作为 get 参数传递给 PHP 脚本。这个例子非常简单；您可能需要添加其他检查以满足您的需求：

C# 代码如下所示：

```
 string loggerUrl = "http://www.YourDomainExample.com/Logger.php?text=";
 string textToLog = WebUtility.UrlEncode("This text came from my C# desktop application");
 HttpWebRequest myWebRequest = (HttpWebRequest)HttpWebRequest.Create(loggerUrl + textToLog);
 HttpWebResponse myWebResponse = (HttpWebResponse)myWebRequest.GetResponse();
 myWebResponse.Close(); 
```

驻留在 Web 服务器上的 PHP 脚本如下所示：

```
<?php

$text = htmlspecialchars($_GET["text"]);

$log = "log.txt";
$fh = fopen($log, 'a') or die("can't open file"); // Open log in append mode
$textToWrite = "$text\n"; //Write each comment on a line
fwrite($fh, $textToWrite);
fclose($fh);

?> 
```

通过这种方式，基本上任何可以调用 url 的东西都可以将文本附加到您的日志中。因此，您的记录器可以是桌面应用程序的一部分，可以在手机或 Web 应用程序等上运行。

要测试您的 PHP 脚本是否正常工作，您可以使用 Web 浏览器作为客户端，然后从 webbrowser 转到[http://www.YourDomainExample.com/Logger.php?text=Test](http://www.YourDomainExample.com/Logger.php?text=Test%20from%20webbrowser)并检查您的网络服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:54:54.093

如果您想登录到远程目的地，我看到了两种解决方案。两者都使用[log4net](http://logging.apache.org/log4net/)：

**解决方案1：**

您可以设置`log4net`登录到数据库。您可以[在此处](http://logging.apache.org/log4net/release/config-examples.html)查看配置。

**解决方案2：**

您可以从中派生您的日志记录类`AppenderSkeleton`并配置行为以登录您想要的任何内容。

```
internal class MyAppender : AppenderSkeleton
{
    /// <summary>
    /// Subclasses of <see cref="T:log4net.Appender.AppenderSkeleton"/> should implement this method
    /// to perform actual logging.
    /// </summary>
    /// <param name="loggingEvent">The event to append.</param>
    protected override void Append(LoggingEvent loggingEvent)
    {
        /* Here you can do whatever you want with your loggingEvent */
    }
} 
```

# c# - 如何通过代码恢复 IIS 7（或更高版本）上的应用程序的父处理程序映射？

> ID：15054928
> 
> 赞同：0
> 
> 时间：2013-02-24T18:18:32.567
> 
> 标签：c#, iis-7, vbscript, iis-7.5, appcmd

可以通过以下步骤手动将应用程序的处理程序映射还原为父级：

*   在 IIS 管理控制台上选择应用程序
*   双击处理程序映射
*   单击“操作”窗格上的“还原为父级”

有没有办法以编程方式完成相同的任务（appcmd.exe、VBScript、C#..）？

注意：如果已经为应用程序定义了自定义设置，aspnet_regiis -i 命令不起作用。到目前为止，我发现的唯一方法是从 IIS 中删除应用程序并通过代码再次添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-21T05:06:29.330

我的不幸任务是将多个 IIS6 服务器迁移到 IIS8.5。我上周的试运行效果很好，只是使用 web deploy 来复制所有内容。我只有几个烦人的问题，通过修复一两个网站很容易解决。我将 IIS 备份恢复到上周运行 web deploy 之前，然后重新运行 web deploy 以像上周一样将所有内容复制回来（由于自上周以来创建了几个新站点）。令我震惊的是，当您在处理程序映射的操作页面上恢复为父级时，我遇到了所有可怕的错误消息。

由于有 570 个奇怪的站点，并且出于某种疯狂的原因，选择站点、选择处理程序映射、单击还原、回答问题、单击下一个站点并加载的过程需要 18 秒。如果我不暂停一秒钟，我将花费近 3 个小时来处理这台服务器。

我永远感激能找到这个话题。我编写了一个快速控制台应用程序来运行并恢复到我所有网站上的父级。我每天都会在 2.8 小时内花 2 分钟多一点的时间！我只是想我会分享完整的东西，以防其他人遇到这个问题。

```
using System;
using System.DirectoryServices;
using System.Collections;

namespace IISHandlerMappingsRevertToParentAll
{
    class Program
    {
        static void Main(string[] args)
        {
            if (args == null || args.Length != 3)
            {
                Console.WriteLine("IISHandlerMappingsRevertToParentAll.exe WebServer UserName Password");
                Console.WriteLine("Example: IISHandlerMappingsRevertToParentAll WebServer1 WebServer1\\MyUserName MyPassword");
            }
            else
            {
                DateTime dt = DateTime.Now;
                int cleared = 0;
                using (DirectoryEntry root = new DirectoryEntry("IIS://" + args[0] + "/W3SVC", args[1], args[2], AuthenticationTypes.FastBind))
                {
                    foreach (DirectoryEntry r in root.Children)
                    {
                        if (r.SchemaClassName == "IIsWebServer")
                        {
                            foreach (DirectoryEntry e in r.Children)
                            {
                                if (e.SchemaClassName == "IIsWebVirtualDir")
                                {
                                    ArrayList ScriptMaps = new ArrayList(e.Properties["ScriptMaps"]);
                                    if (ScriptMaps.Count > 0)
                                    {
                                        Console.WriteLine("Clearing for " + e.Properties["Path"].Value);
                                        cleared++;
                                        e.Properties["ScriptMaps"].Clear();
                                        root.CommitChanges();
                                    }
                                }
                            }
                        }
                    }
                }
                Console.WriteLine("Reset " + cleared + " took " + DateTime.Now.Subtract(dt).TotalSeconds + "s ");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:48:16.790

以下适用于该问题：

```
using System;
using System.Text;
using System.DirectoryServices;

namespace RevertToParentHandlerMappings
{
    class Program
    {
        static void Main(string[] args)
        {

            string vDirPath = "IIS://localhost/W3SVC/1/ROOT/AppName";

            DirectoryEntry vDir = new DirectoryEntry(vDirPath);

            vDir.Properties["ScriptMaps"].Clear();

            vDir.CommitChanges();

        }
    }
} 
```

# java - 如何导入android开源库？

> ID：15054929
> 
> 赞同：1
> 
> 时间：2013-02-24T18:18:33.240
> 
> 标签：java, android, eclipse

我尝试在我的项目中使用[Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)。

我习惯在 Eclipse 中通过“文件 -> 新建 -> 其他... -> Android -> Android Project from Existing Code”来导入库，但这一次，当我选择该项目中的“库”文件夹。

导入这个库的正确方法是什么？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:18:25.200

如果您的工作区的项目与您的库中的活动具有相同的活动名称，这一次它也将显示选择至少一个项目。检查您的工作空间是否包含任何

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:25:22.230

如果您尝试将库导入 Eclipse，那么您可以参考这篇文章[将库/JAR 添加到 Eclipse Android 项目](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project)

如果您尝试导入项目，则选择整个项目文件夹。

# javascript - $viewContentLoaded 在加载视图内容之前触发

> ID：15054932
> 
> 赞同：2
> 
> 时间：2013-02-24T18:18:47.717
> 
> 标签：javascript, jquery, angularjs

令人震惊的是：我有一个基本的单页 Angular 应用程序，我正在其中构建我的投资组合。在控制器中，我有 3 个控制器，而项目是我遇到问题的一个。

我正在使用 ng-repeat 列出列表中的每个项目。然后我通过javascript定位它们以正确调整它们的大小。

问题是它根本不会调整它们的大小。即使我按照建议使用 $viewContentLoaded，它们也不会在 JW.core 运行之前加载。因此它们是 0px x 0px 而不是例如 500 x 500。

我知道这一点，因为如果我在 JW.core 中对 resize 函数调用设置超时，那就没问题了。然后每个项目都被重复，并且可以相应地调整大小。

我还认为，由于我对 Angular 还很陌生，所以我可能做错了什么。

控制器.js：

```
function mainCtrl($scope) {
}

function projectsCtrl($scope, $http) {
  $http.get('data/projects/projects.json').success(function(data) {
        $scope.projects = data;
  });

  $scope.$on('$viewContentLoaded', function () {
      new JW.core();
  });
}

function aboutCtrl($scope, $http) {
  $http.get('data/about/about.json').success(function(data) {
        $scope.about = data;
  });
} 
```

核心.js：

```
var JW = JW || {};

JW.core = function() {

    var initialise = function () {
            new JW.elementDimensions();
        };

    initialise();

}; 
```

elementdimensions.js：

```
var JW = JW || {};

JW.elementDimensions = function () {

    var scrollbarWidth,
        resizeDim = function (e, ww, wh) {

            var wh = window.innerHeight;    

            $(e).width(ww + 'px');
            $(e).height(wh + 'px');

        },

        initialise = function () {

            var ww = window.innerWidth - scrollbarWidth,
                $targets = $('#projects').find('.project');

            $('.project-wrapper').width((window.innerWidth - scrollbarWidth) * $targets.length);
            $('.project-wrapper').height(window.innerHeight);

            _.each($targets, function(e) {
                resizeDim(e, ww);
                console.log(e);
            })

        };

    initialise();

    $(window).on('resize', function() {
        initialise();
    });

    return this;

}; 
```

和观点：

```
 <div class="project" ng-repeat="project in projects">

        <div class="project-img" style="background: url('{{project.imageUrl}}') fixed;" id="{{project.id}}">
            <div class="info-container">
                <h1>{{project.title}}</h1>
                <p class="description">
                    {{project.description}}
                </p>
                <div class="tags">
                    <ul>
                        <li ng-repeat="tag in project.tags">{{tag}}</li>
                    </ul>
                </div>
                <a class="goto" href="{{project.link}}">{{project.linktext}} →&lt;/a>
            </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:58:37.657

您要做的是在您的路线上使用**resolve 。**

```
$routeProvider.when('/products', {
    templateUrl: 'products.html',
    controler: 'productsCtrl',
    resolve: {
        products: ['$http', '$q', function($http, $q){
            var deferred = $q.defer();
            $http.get('data/projects/projects.json').success(function(data) {
                deferred.resolve(data);
            });
            return deferred.promise;
        }]
    }
}); 
```

然后，在您的控制器中，注入 $scope 和 products 而不是 $scope 和 $http，除非您在控制器运行后还需要 $http 用于其他任何东西，在这种情况下只需添加产品。这实际上将延迟控制器的初始化，直到加载内容。

# nginx - tornadoweb gzip=True 不能在 supervisord 和 nginx 下工作

> ID：15054933
> 
> 赞同：3
> 
> 时间：2013-02-24T18:18:47.670
> 
> 标签：nginx, gzip, tornado, supervisord

在使用龙卷风时，我发现了 gzip=True 功能，该功能在从命令行运行应用程序时工作正常，设置如下：

```
define("port", default=settings.LISTEN_PORT, help="run on the given port", type=int)
define("debug", default=True, help="run in debug mode", type=bool)
define("dont_optimize_static_content", default=False,
       help="Don't combine static resources", type=bool)
define("dont_embed_static_url", default=False,
       help="Don't put embed the static URL in static_url()", type=bool)

tornado.options.parse_command_line()
tornado.options.options['log_file_prefix'].set('/var/log/tmp.log')

app_settings = dict(
    template_path=os.path.join(os.path.dirname(__file__), "templates"),
    static_path=os.path.join(os.path.dirname(__file__), "static"),
    xsrf_cookies=False,
    gzip=True,
    debug=True,
) 
```

但是，使用来自 tornado 服务器的 supervisord/nginx 响应部署应用程序不会被压缩。

```
[program:app-8001]
command=python /var/app/server/app.py --port=8001 --logging=debug ----dont_optimize_static_content=False
directory=/var/app/server/
stderr_logfile = /var/log/app-stderr.log
stderr_logfile_backups=10
stdout_logfile = /var/log/app-stdout.log
stdout_logfile_backups=10
process_name=%(program_name)s
loglevel=debug 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:50:24.187

默认情况下，nginx 在代理对 Tornado 的请求（或与此相关的任何内容）时不会执行 HTTP/1.1 请求。Tornado 需要 HTTP/1.1 支持才能返回 gzip'ed 内容。

来自 web.py 的重要代码片段

```
def __init__(self, request):
    self._gzipping = request.supports_http_1_1() and \
        "gzip" in request.headers.get("Accept-Encoding", "") 
```

通过将以下内容添加到您的配置文件中应该可以覆盖它 - 但是它不适用于我的实例。

```
proxy_http_version 1.1; 
```

# html - 在标题中使用 div 类时出错？

> ID：15054935
> 
> 赞同：0
> 
> 时间：2013-02-24T18:18:57.627
> 
> 标签：html, css

我有以下代码，当在浏览器中显示不需要水平滚动条时，它会很烦人。

当我在标题中添加两个类时，水平条被添加到浏览器中。有人知道我必须调整什么才能摆脱酒吧吗？提前谢谢了。

```
<html>
   <head>
      <link href = "style.css" rel = "stylesheet" type = "text/css">
   </head>
   <body>
      <div id="header">
         <img src="uploads/brand.png">
         <p><p>
            <img src="uploads/rules.png">
            <div class="fbplugin">
               dsds
            </div>
            <div class = "counter">
               dsds
            </div>
         </p></p>
      </div>
      <div id = "divide"></div>
      <div id = "body">
         <div class = "container">
            stuff
         </div>
      </div>
   </body>
</html> 
```

这是CSS：

```
#header {
   width: 100%;
   height: 140px;
}
#divide {
   width: 100%;
   height: 2px;
   background-color: red;
}
#body {
   width:100%;
   height:1000px;
   cursor:pointer;
}
.fbplugin{
   position: relative; top: -60px; left: 1000px;
}
.counter{
   position: relative; top: -130px; left: 1100px;
}
.container{
   width: 600px;
   margin-right: auto;
   margin-left: auto;
   height: 500px;
   background-color: white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:20:47.920

您`position: relative;`在两者上都使用`.fbplugin`并`.counter`基本上将它们移动到标题的右侧。通过使用`position: relative`，您可以将元素从其初始位置移动，但它仍会占用初始位置的空间。这就是你有滚动条的原因。

取而代之`float`的是右侧的两个 div，因此它们不会跨越标题的长度，并使用边距/填充将它们垂直定位。这将摆脱水平滚动条。

示例：http: [//jsfiddle.net/AqLMY/2/](http://jsfiddle.net/AqLMY/2/)

# magento - setCurrentStore() 的 Magento 替代品

> ID：15054941
> 
> 赞同：3
> 
> 时间：2013-02-24T18:19:13.077
> 
> 标签：magento

我的观察者文件夹中有一个公共函数。（我用它来浏览图像）但问题是，我不想使用 'Mage::app()->setCurrentStore()'

在不使用 setCurrentStore() 的情况下浏览给定商店的替代方法是什么？

```
function getImages($store, $v){
    Mage::app()->setCurrentStore($store);
    $products = Mage::getModel('catalog/product')->getCollection();
    $products->addAttributeToSelect('name');
    foreach($products as $product) {
        $images = Mage::getModel('catalog/product')->load($product->getId())->getMediaGalleryImages();
        if($images){    
           $i2=0; foreach($images as $image){ $i2++;
              $curr = Mage::helper('catalog/image')->init($product, 'image', $image->getFile())->resize(265).'<br>';
           }
        }
    }
}

foreach (Mage::app()->getWebsites() as $website) {
    foreach ($website->getGroups() as $group) {
        $stores = $group->getStores();
        foreach ($stores as $store) {
            getImages($store, $i);
            $i++;
        }
    }
} 
```

PS：如果我使用 setCurrentStore() 我的管理员搞砸了：-S

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T19:38:52.223

I think this happens because you do not change store back to default when you exit from your function. But a better solution is to use emulation environment:

```
function getImages($store, $v){
    $appEmulation = Mage::getSingleton('core/app_emulation');
    $initialEnvironmentInfo = $appEmulation->startEnvironmentEmulation($storeId); 
    //if $store is a model you can use $store->getId() to replace $storeId
    try {
        //your function code here
    catch(Exception $e){
        // handle exception code here
    }
    $appEmulation->stopEnvironmentEmulation($initialEnvironmentInfo);
} 
```

All the code between environment emulation will act as like magento has set the desired store and outside everything should work normally.

Also please note that your code may throw exceptions so, you should use a try catch statement in order to make sure that last line from function that stop environment emulation will be executed every time.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T19:36:00.480

您可以为此使用仿真。来自[http://incho.net/ecommerce/magento/emulate-store-in-magento/](http://inchoo.net/ecommerce/magento/emulate-store-in-magento/)：

```
$appEmulation = Mage::getSingleton('core/app_emulation');
//Start environment emulation of the specified store
$initialEnvironmentInfo = $appEmulation->startEnvironmentEmulation($storeId);
/*
 * Any code thrown here will be executed as we are currently running that store
 * with applied locale, design and similar
 */
//Stop environment emulation and restore original store
$appEmulation->stopEnvironmentEmulation($initialEnvironmentInfo); 
```

I would like to point out that you are making a resource-expensive decision when you call `load()` in the collection iteration. It may be ok given your catalog size and running context, but you can accomplish the same without thrashing your database by calling `$products->addAttributeToSelect('*')`. This will grab all attributes and values though; given current case, you could get what you need as follows:

```
$products = Mage::getModel('catalog/product')->getCollection();
$products->addAttributeToSelect('name')
         ->addAttributeToSelect('media_gallery');
foreach($products as $product) {
    $images = $product->getMediaGalleryImages();
    if($images){
        // your logic/needs
    }
} 
```

# android - Button 和 ImageView 不能很好地协同工作？

> ID：15054945
> 
> 赞同：0
> 
> 时间：2013-02-24T18:19:39.957
> 
> 标签：android

这可能是一个非常简单的错误，但我找不到它！如果我在布局中的 Button 之前有 ImageView，它想在启动时关闭应用程序！但如果我先有 Button 然后有 ImageView！？这可能是什么原因？我已经粘贴了一些代码，希望能告诉你错误是什么？感谢帮助！谢谢！

活动：

```
public class Activity_1 extends Activity {

ImageView imageView;

public final static String test ="Hello";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_1);

    Button btnImageMenu = (Button) findViewById(R.id.btnStartActivity_2);
    imageView = (ImageView) findViewById(R.id.full_image_view);

    registerForContextMenu(imageView);

    // Button to open activity with gridview
    btnImageMenu.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Intent i = new Intent("com.test.ACTIVITY_2"); // Alternative
            startActivityForResult(i, 1);
        }
    });
}

// Create context menu
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);

    menu.setHeaderTitle("Options for this menu"); // Title for the menu
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_1_menu, menu);
}

// Handle selected items from context menu
@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    // Open activity with gridview of thumbnails
    case R.id.menu_option_1:
        // Toast.makeText(Activity_1.this, "" + "Menu option 1", Toast.LENGTH_SHORT).show();

        // Activate activity 3 with listview of contacts
        Intent i = new Intent("com.test.ACTIVITY_3"); // Alternative
        startActivityForResult(i, 2);

        return true;

        // Open activity with listview of contacts
    case R.id.menu_option_2:
        Toast.makeText(Activity_1.this, "" + "Menu option 2",
                Toast.LENGTH_SHORT).show();
        return true;

    default:
        return super.onContextItemSelected(item);
    }
}

// Handle return values from different activities
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {

        if (requestCode == 1) {

            String imageId = data.getExtras().getString("imageId");

            Bitmap bitmap = BitmapFactory.decodeFile(imageId);
            imageView.setImageBitmap(bitmap);
        }

        else if(requestCode == 2) {
            String contact1 = data.getExtras().getString("contactName");
            String contact2 = data.getExtras().getString("test");
            Toast.makeText(Activity_1.this, "" + "Value from activity 3: " + contact1 + " " + contact2, Toast.LENGTH_SHORT).show();

        }
    }
} 
```

}

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/full_image_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<Button
    android:id="@+id/btnStartActivity_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/btnStartActivity_2" /> 
```

错误日志：

```
02-24 20:34:50.945: I/ApplicationPackageManager(13296): cscCountry is not German : NEE
02-24 20:34:50.976: D/AndroidRuntime(13296): Shutting down VM
02-24 20:34:50.984: W/dalvikvm(13296): threadid=1: thread exiting with uncaught exception (group=0x40018578)
02-24 20:34:51.000: E/AndroidRuntime(13296): FATAL EXCEPTION: main
02-24 20:34:51.000: E/AndroidRuntime(13296): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.assignment.two/com.test.assignment.two.Activity_1}: java.lang.ClassCastException: android.widget.ImageView
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.os.Looper.loop(Looper.java:130)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at java.lang.reflect.Method.invoke(Method.java:507)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at dalvik.system.NativeStart.main(Native Method)
02-24 20:34:51.000: E/AndroidRuntime(13296): Caused by: java.lang.ClassCastException: android.widget.ImageView
02-24 20:34:51.000: E/AndroidRuntime(13296):    at com.test.assignment.two.Activity_1.onCreate(Activity_1.java:31)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-24 20:34:51.000: E/AndroidRuntime(13296):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
02-24 20:34:51.000: E/AndroidRuntime(13296):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:38:43.430

也许没有错误..试试这个：

使用 android:src="yourimage" 为 Imageview 设置图像

项目 >> 清洁

这将清理您的项目并重建类。希望这能解决您的问题。

# memory - 程序具有相同虚拟地址空间的情况有哪些

> ID：15054946
> 
> 赞同：1
> 
> 时间：2013-02-24T18:19:43.530
> 
> 标签：memory, mapping, virtual-address-space

如果您在两个不同的终端中运行程序 foo.c，并打印正在执行的局部变量的地址。他们会是一样的。但是，在分叉和执行的上下文中，例如在 shell 中，我运行了一个程序，例如 foo.c 。它将创建一个完全相同的 shell 副本，然后执行 foo.c 。它们是否具有相同的虚拟地址空间。如果一个程序递归调用自己，递归调用的同一个变量是否仍然具有相同的地址空间，这个程序如何在自己的地址空间内增长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:52:14.020

> 如果您在两个不同的终端中运行程序 foo.c，并打印正在执行的局部变量的地址。他们会是一样的。

不一定，现代操作系统使用[地址空间布局随机化](http://en.wikipedia.org/wiki/Address_space_layout_randomization)，这意味着内存地址可以（并且确实）从一次执行更改为下一次执行。

> 在分叉和执行的上下文中，例如在 shell 中，我运行一个程序，例如 foo.c 。它将创建一个完全相同的 shell 副本，然后执行 foo.c 。它们是否具有相同的虚拟地址空间。

不，每个进程都有自己的虚拟地址空间。变量的地址可能看起来相同，但在一个进程中写入局部变量对另一个进程没有影响（除非您明确共享内存）

> 如果一个程序递归调用自己，递归调用的同一个变量是否仍然具有相同的地址空间，这个程序如何在自己的地址空间内增长？

研究进程和线程之间的区别，以更好地了解这里发生了什么。如果一个**程序 fork**，子进程有一个单独的地址空间。如果一个**函数**在程序中调用自己，它将在相同的地址空间中执行，但局部变量将在每个堆栈帧中分开。全局（或静态）变量将在函数调用中位于相同的内存地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:33:55.427

如果您在两个不同的终端中运行 foo.c 并打印局部变量的地址，它们将显示相同。但是，它们是两个不同的变量，恰好具有相同的值。

它们不指向内存中的同一区域。

从 shell 分叉还会使进程在虚拟内存的两个不同区域内拥有两个独立且不同的变量。

实际上，如果您从 foo.c 生成一个进程，就会出现这种情况

如果您希望在两个进程之间共享内存，则需要生成线程或使用[共享内存](http://en.wikipedia.org/wiki/Shared_memory)。

# apache - 如何将域重定向到动态子域？

> ID：15054957
> 
> 赞同：2
> 
> 时间：2013-02-24T18:21:07.200
> 
> 标签：apache, .htaccess, mod-rewrite

我在 mysite.com 有商店，在这个网站上，有一些商店，比如苹果和...。用户可以使用[http://apple.mysite.com等虚拟子域查看此商店](http://apple.mysite.com)

因此，我在根文件管理器中创建 .htaccess：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.mysite.com$
RewriteCond %{HTTP_HOST} ^(.*)\.mysite.com$
RewriteRule ^$ /stores.php?id_store=%1 [P,L] 
```

然后在 Cpanel 的“子域”中创建***.mysite.com**并在“文档根”中设置**/public_html**

现在，如何使用 htaccess 代码将域停放或重定向到这个动态子域？例如：将**applestore123.com**停放或重定向到**apple.mysite.com**

我有共享主机服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:43:41.603

对于 applestore123.com 到 apple.mywebsite，您必须更改您的 htaccess 规则，例如：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^applestore123.com$ [NC]
RewriteRule (.*) apple.mysite.com$ [QSA,R=301,L] 
```

# version-control - Bazaar 同时管理多个分店

> ID：15054967
> 
> 赞同：0
> 
> 时间：2013-02-24T18:22:00.427
> 
> 标签：version-control, dvcs, bazaar

我现在使用 Bazaar 已经有一段时间了，但目前我正在寻找以下问题的解决方案：

假设您有几个开发人员，每个人都在自己的分支中开发，如下所示：

项目
|
|----分公司1
|
|----分公司2
|
...

现在，我们有一个项目经理想要了解所有分支的概览。

有没有可能（仅使用 bzr 函数）他可以一次管理这些分支？

对于“管理”，我的意思是更新、提交甚至结帐（最后一个可能可以通过多拉完成，但我认为这会覆盖现有的本地数据）

问候弗洛里安

PS我知道这个用例可以很容易地用SVN（通过简单地使用子目录——但没有dvcs的特性）或者或多或少地用shell脚本（比如bzr list-branches|xargs bzr update）来实现，但我更喜欢内置的 bzr 功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:50:57.240

您可以通过以下方式查看目录树中的所有分支：

```
bzr branches -R /path/to/base/dir 
```

但是，这只适用于本地文件系统。如果你需要在远程系统中查找分支，你需要通过运行命令`ssh`什么的。

获得分支列表后，经理应该从它们分支到他的本地共享存储库，最好配置有`--no-trees`空间效率选项。应该拉出现有的分支（例如使用多拉），应该移除已移除的分支。

一旦他有了分支，最简单的概览方法就是使用 Bazaar Explorer。打开共享存储库位置。我特别喜欢这个`Log`按钮，它会显示日志树。

当您说提交时...经理不应该向开发人员分支提交。如果需要修复，最好让开发人员修复它，否则经理将总是不得不为他们清理他们的烂摊子。经理应该只将其他分支合并到主干/主/主。换句话说，使用看门人工作流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T00:28:40.673

您可以尝试[bzr-externals 插件](http://doc.bazaar.canonical.com/plugins/en/externals-plugin.html)或[bzr-scmproj 插件](http://doc.bazaar.canonical.com/plugins/en/scmproj-plugin.html)。

# android - 从一项活动移动到另一项活动时显示 Admob 插页式广告

> ID：15054968
> 
> 赞同：0
> 
> 时间：2013-02-24T18:22:16.690
> 
> 标签：android, android-intent, android-activity, admob

根据文档：[https ://developers.google.com/mobile-ads-sdk/docs/admob/advanced](https://developers.google.com/mobile-ads-sdk/docs/admob/advanced)

我要求一项活动，

```
interstitial.loadAd(adRequest);
interstitial.setAdListener(this); 
```

并在回调中收到时显示插页式广告

```
 @Override
  public void onReceiveAd(Ad ad) {
    Log.d("OK", "Received ad");
    if (ad == interstitial) {
      interstitial.show();
    }
  } 
```

但问题是在`onReceiveAd`被调用之前，我当前的活动已经完成，我转移到另一个活动，所以`onReceiveAd`永远不会被调用。

有什么办法可以解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:32:58.050

你找到答案了吗？我打算这样做，但我还没有尝试过，所以我不确定它是否会起作用：

在 Helper 类上创建一个用于创建插页式广告的静态方法，以及另一个用于更新侦听器的方法：

```
 private static InterstitialAd interstitial;

    public static void createIntertitialAd(Context myContext) {
        if (interstitial == null) {
            interstitial = new InterstitialAd(myContext, MY_INTERSTITIAL_UNIT_ID);
            interstitial.loadAd(adRequest);
           interstitial.setAdListener(myContext);
        }
    }

    public static void updateAdListener(Context myContext) {
        interstitial.setAdListener(myContext);
    } 
```

然后在您的活动中执行以下操作

```
 @Override
    public void onCreate() {
        HelperClass.createIntertitialAd(this);
        HelperClass.updateAdListener(this);
    } 
```

# datetime - 为 Windows 服务存储上次运行日期时间/执行日期时间的最佳方法是什么？

> ID：15054969
> 
> 赞同：0
> 
> 时间：2013-02-24T18:22:17.287
> 
> 标签：datetime, windows-services

我有一个每 1 小时运行一次的 Windows 服务。我想存储上次运行的日期时间，以便每次服务运行时都可以检查值（上次运行的日期时间）。此值用作服务用于获取数据的存储过程的参数之一。

现在，我的问题是存储上次运行日期值的最佳/理想方式是什么？

我可以想到3种方法：

1.  将其存储在数据库表中。
2.  将其存储在应用程序文件夹中的文本或 XML 文件中（这里的问题是：在应用程序文件夹中创建一个文本文件并每小时更新一次是否好？）。
3.  在配置文件中创建一个部分并在每次执行服务时更新它。

请高手指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:32:38.970

如果您有一个服务需要检查它执行的最后一次运行完成的时间，我会将其存储为用户设置项。如果您认为也许您将有许多服务共享此任务，将其置于共享位置（如数据库）会有所帮助 - 尽管如果您将数据从用户设置迁移到数据库应该很容易需要使用多种服务。

我会避免使用自定义 XML 或数据文件，因为 .NET 和 Visual Studio 中已经支持用户（运行时）设置。

**更新：**

如果要使用用户设置，只需双击解决方案资源管理器中的设置（在项目的属性下）或在项目的属性中，选择设置选项卡。添加一个带有用户范围的值（可能是`System.DateTime`.`LastExecuted`

```
Properties.Settings.Default.LastExecuted = DateTime.Now;
Properties.Settings.Default.Save(); 
```

# java - 阅读 PDF 文本和/或所有内容

> ID：15054970
> 
> 赞同：1
> 
> 时间：2013-02-24T18:22:27.350
> 
> 标签：java, pdf, file-io, pdfbox, apache-tika

我有一个场景，我需要一个 Java 应用程序才能以 2 种模式之一从 PDF 文件中提取内容：`TEXT_ONLY`或`ALL`. 在**文本模式下**，只有可见文本（“可见”，就好像一个人正在阅读 PDF）被读出为字符串。在**all 模式下**，从文件中读取所有内容（文本、图像等）。

例如，如果一个 PDF 文件有 1 页，并且该页有 3 个连续文本段落，并且正在自动换行 2 个图像，那么`TEXT_ONLY`将提取所有 3 个段落，并`ALL`提取所有 3 个段落和两个图像：

```
while(page.hasMoreText())
    textList.add(page.nextTextChunk());

if(allMode)
    while(page.hasMoreImages())
        imageList.add(page.nextImage()); 
```

我知道 Apache Tika 在后台使用 PDFBox，但我担心这种功能会被 Tika 遮蔽/禁止（在这种情况下，我可能需要直接从 PDFBox 执行此操作）。

所以我问：**这可能**吗？如果可以，哪个库更适合我使用？我这样做完全错误吗？我在这里没有考虑的任何陷阱/警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:40:12.620

阐述为什么@markStephens 会向您指出一些资源，以提供一些有关PDF 的背景知识。

> 在文本模式下，只有可见文本（“可见”，就像人类正在阅读 PDF 一样）被读出为字符串。

您的定义*“可见”就好像一个人正在阅读 PDF*还不是很明确：

*   1 pt 大小的文本是否可见？放大时，人类可以阅读；但是，在标准放大倍率下不是。哪个尺寸是极限？

*   RGB (128, 129, 128) 中的文本在 (128, 128, 128) 的背景中是否可见？颜色有多大不同？

*   文本是否以某种白噪声模式显示在某些其他白噪声模式的背景上可见？模式有多大不同？

*   文本是否仅在屏幕上部分可见？如果是，一个可见像素是否足够？那么，在可见页面区域适合字母上的点的巨大尺寸的某些字符“我”中呢？

*   被一些可以轻松移动的注释所覆盖的文本，甚至可能被文件中的一些自动执行的 JavaScript 代码所覆盖？

*   某些可选内容组中的文本仅在打印时可见怎么办？

*...

我希望大多数可用的 PDF 文本解析库忽略所有这些情况并提取文本，最多尊重裁剪框。对于添加了不可见 OCR 文本的图像，通常需要提取该文本。

> 例如，如果一个 PDF 文件中包含 1 页，并且该页有 3 段连续文本，并且正在自动换行 2 幅图像，则 TEXT_ONLY 将提取所有 3 个段落，并且 ALL 将提取所有 3 个段落并且两者都提取图片：

PDF（通常）不知道段落，只是一些位于页面某处的字形组。识别段落是一项不能保证正常工作的任务，因为工作中有启发式方法。此外，如果您有不规则分隔的多列文本，甚至可能是中间的一些图像（很难确定是否有两列被图像划分或是否有一列具有集成图像），您可以指望对文本流的识别更不用说段落、部分等文本元素了。

如果您的 PDF 被正确标记或全部由工具链生成，而创建的 PDF 内容流中的模式背叛了文本结构，那么您可能会更幸运。但是，在后者的情况下，您的解决方案必须针对该工具链进行定制。

> 但我担心这种功能被 Tika 遮蔽/禁止（在这种情况下，我可能需要直接从 pdfBox 执行此操作）。

在那里您指向另一个兴趣点：可以将 PDF 标记为禁止提取文本，否则任何人都可以显示它们。虽然从技术上讲，标记为这样的 PDF 可以像没有该标记的文档一样处理，只需一个解码步骤（本质上它们是使用公开密码加密的），但这样做显然违背了作者声明的意图并侵犯了他的版权。

> 所以我问：这可能吗？如果可以，哪个库更适合我使用？我这样做完全错误吗？我在这里没有考虑的任何陷阱/警告？

只要您期望通用输入 100% 准确，您就应该重新考虑您的架构。

如果 PDF 是您所拥有的全部，并且可行的解决方案是可行的，那么另一方面，有多个可能的库供您使用，iText 和 PDFBox 可以命名，但还有两个，还有更多。哪个最适合您取决于更多因素，例如您是否需要一些通用解决方案或所有 PDF 都是由上述工具链创建的。

但是，无论如何，您都必须自己进行一些编程，以针对您的用例对其进行微调。

# php - Symfony/PHPUnit 模拟服务

> ID：15054971
> 
> 赞同：4
> 
> 时间：2013-02-24T18:22:28.253
> 
> 标签：php, symfony, phpunit

我正在用 PHPUnit 为 Symfony 编写功能测试，但我的模拟不起作用。不过，我可能误解了它们的工作方式。

在我的单元测试`setUp()`方法中，我有以下代码：

```
...
// Create a stub
$stub = $this->getMockBuilder('\\ApiBundle\\Util\\WordPressBridge')
    ->disableOriginalConstructor()
    ->getMock();

// Configure the stub.
$user = new WordPressUser();
$user->setUsername('dummy');
$stub->expects($this->any())
     ->method('checkCredentials')
     ->will($this->returnValue(true));
$stub->expects($this->any())
     ->method('getUser')
     ->will($this->returnValue($user));
... 
```

在我的 Symfony 应用程序中，我定义了一个服务：

```
services:
    api.wp_bridge:
        class: ApiBundle\Util\WordPressBridge
        arguments: [@service_container] 
```

我的理解是 mock 应该取代 real `WordPressBridge`，但这不是正在发生的事情。我原来的还在用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:19:47.660

> 我的理解是模拟应该替换真正的 WordPressBridge，但这不是正在发生的事情。我原来的还在用。我错过了什么吗？

基本上你必须在 Symfony 容器中以某种方式替换你的服务。

如果您进行“功能测试”，那么您可能应该为**“测试”**环境创建测试“虚拟”服务，该服务将覆盖原始服务。你可以这样做：

在**src/YourBundle/Resources/config/services.yml**

```
services:
    api.wp_bridge:
        class: %api.wp_bridge.class%
        arguments: [@service_container] 
```

在**app/config/config.yml**

```
parameters:
    api.wp_bridge.class: "ApiBundle\Util\WordPressBridge" 
```

在**app/config/config_test.yml**

```
parameters:
    api.wp_bridge.class: "ApiBundle\Util\TestWordPressBridge" 
```

然后功能测试将使用“ApiBundle\Util\TestWordPressBridge”——因为它是在**“test”**环境中执行的。

您可以尝试模拟容器并将其传递给测试内核，但是如果没有其他一些模拟库（在纯 PHPUnit 中），这可能会很痛苦。

就我个人而言，我使用[phpspec2](http://phpspec.net/)进行“单元”测试，其中模拟很容易:) 并且对于一些“验收标准”的东西，我使用[behat](http://behat.org/)和[mink](http://mink.behat.org/)

# c++ - C++ 符号在共享对象中具有不同的大小

> ID：15054973
> 
> 赞同：9
> 
> 时间：2013-02-24T18:22:39.090
> 
> 标签：c++, linux, linker, shared-libraries, glload

我一直在研究一个跨平台的窗口库，专门用于 OpenGL，目前专注于 linux。我正在使用 glload 来管理 OpenGL 扩展，并且正在将其与我稍后将使用的其他库一起编译为`.so`. 正如您所期望的那样，这个 `.so 正在动态加载，但在运行时程序会提供以下输出（手动包装，因此更易于阅读）：

```
_dist/x64-linux-debug/bin/test: Symbol `glXCreateContextAttribsARB' has \
different size in shared object, consider re-linking 
```

现在，显然我已经尝试过重新链接，甚至多次重建整个项目（测试一下，而不是盲目地希望它会神奇地让一切变得更好）。该程序似乎确实愿意运行，因为它会产生一些我期望的日志输出。我曾经`nm`确认“符号”在`.so`

```
nm _dist/x64-linux-debug/lib64/libvendor.so | grep glXCreateContextAttribsARB
00000000009e0e78 B glXCreateContextAttribsARB 
```

如果我`readelf`用来查看正在定义的符号，我会得到以下信息（同样，为了格式化，我手动包装了前三行）：

```
readelf -Ws _dist/x64-linux-debug/bin/test \
_dist/x64-linux-debug/lib64/libvendor.so | \
grep glXCreateContextAttribsARB
   348: 000000000062b318  8 OBJECT  GLOBAL DEFAULT  26 glXCreateContextAttribsARB
   421: 000000000062b318  8 OBJECT  GLOBAL DEFAULT  26 glXCreateContextAttribsARB
  1370: 00000000009e0e78  8 OBJECT  GLOBAL DEFAULT  25 glXCreateContextAttribsARB
 17464: 00000000009e0e78  8 OBJECT  GLOBAL DEFAULT  25 glXCreateContextAttribsARB 
```

恐怕这就是我能提供的所有帮助，因为我真的不知道该尝试或研究什么。就像我说的，我确信需要更多信息，所以请说我会提供我能提供的。我正在从我的项目根目录运行这些命令，以防您想知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T02:49:20.400

wilsonmichaelpatrick 的回答大部分是正确的，但使用`gdb`可能不是找到问题的最快方法，如果您有非调试版本，可能根本不起作用。

首先，您应该确认确实存在问题：

```
readelf -Ws _dist/x64-linux-debug/bin/test _dist/x64-linux-debug/lib64/libvendor.so |
  grep glXCreateContextAttribsARB 
```

`test`这应该显示在和中定义的符号`libvendor.so`，具有不同的大小。

其次，重新链接`test`和`libvendor.so`带`-Wl,-y,glXCreateContextAttribsARB`标志。这将告诉您哪些目标文件（或库）提供了（不同的）定义。

`-E`最后，使用和标志预处理生成上述目标文件的源，`-dD`看看它们之间有什么不同。

**更新：**

> 我需要帮助来消化它在说什么

不要无助。阅读`man readelf`，或者只是手动运行它。你会看到这样的东西：

```
readelf -Ws /bin/date | head -5

Symbol table '.dynsym' contains 75 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND 
     1: 0000000000000000     0 FUNC    GLOBAL DEFAULT  UND __ctype_toupper_loc@GLIBC_2.3 (2) 
```

这会告诉您所获得数据的含义。特别是，这告诉您 in`test`和 in的符号大小`libvendor.so`是相同的 ( `8`)。因此，问题*不*在于这两个 ELF 文件，而在于其他地方。`readelf`在您的*其他*库上运行，并查找`glXCreateContextAttribsARB`具有不同大小的定义。然后按照其余的程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T19:42:42.787

运行时注意到在共享对象中编译的 glXCreateContextAttribsARB 和在主程序中编译的 glXCreateContextAttribsARB（或者甚至可能之前链接的其他一些共享对象）具有不同的大小。这意味着，在共享对象的单独构建中以及引用该对象的任何其他内容中，他们必须查看定义 this 的不同代码（可能在共享对象中）。有时这是因为他们正在查看不同的文件，有时这是因为不同的#defines 导致对同一文件的不同解释。不管是什么原因，您绝对需要确保在运行时链接在一起的所有内容中以相同的方式定义相同的符号（例如结构）（即具有相同的成员变量和大小）。

它拒绝运行实际上是一件非常好的事情，因为当代码的两个部分在运行时以不同的方式解释同一位内存时，这是一场灾难。（毫不夸张地说，如果允许这种情况继续进行，*任何事情都可能发生。）*

您可能想尝试在 gdb 中加载可执行文件（不运行它）并输入

`info types`

查看它是在哪里定义的，然后在 gdb 中加载共享对象（不运行它）并在`info types`那里做另一个，看看他们每个人都认为它在看什么。如果是同一件事，请检查预处理器指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T07:29:21.810

我遇到了一个与不同大小的对象相关的繁琐问题，所以我想分享我的经验——尽管我很清楚这只是可能解释不同对象大小的一个原因——而不是强制执行 OP。

症状是调试模式下不同大小的对象，发布模式下没有。链接器产生了相应的警告。符号名称难以破译，但与类模板实例中的一些未命名静态变量有关。

原因是调试日志功能 à la `LOG("Do something.");`。LOG 宏使用 C ANSI 宏，该宏[`__FILE__`](https://stackoverflow.com/q/8487986/1945549)根据应用程序或共享库是否包含标头而扩展到另一个路径。而这个字符串正是前面提到的未命名的静态变量。

更乏味的是，由于我们的 make 环境，`__FILE__`宏有时会扩展到，比如说，`C:\temp\file.h`有时会扩展到，`C:\other\..\temp\file.h`因此从同一个地方构建应用程序和库也不能解决问题。

我希望这段经历可以为你们中的一些人节省一些时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-23T18:42:36.183

在大多数情况下，您可能只是链接到错误的库（不同版本）。例如，您已经`libfoo`安装了两次并将可执行文件链接到，`-L /path/to/version1 -lfoo`但在运行时链接到了`/path/to/version2`（您可以使用 看到这个`ldd yourprogram`）。

一个原因可能是可执行文件已链接，`-rpath,/path/to/version1`但（与最近的版本一样）这将`RUNPATH`条目设置在动态部分中；当你有`LD_LIBRARY_PATH=/path/to/version2`. `RUNPATH`设置时，优先`LD_LIBRARY_PATH`。在这种情况下，从中删除库`/path/to/version2`（或从中删除该路径`LD_LIBRARY_PATH`）。

例子

```
$ minimal
/home/carlo/minimal: Symbol `_ZN6libcwd8libcw_doE' has different size in shared object, consider re-linking
COREDUMP    : /home/carlo/projects/libcwd/libcwd/elfxx.cc:2381: void libcwd::elfxx::objfile_ct::load_dwarf(): Assertion `size == sizeof(address)' failed. 
```

（libcwd 也很聪明，可以看到它；也就是这里的问题在于 libcwd）：

```
$ ldd minimal | grep libcwd_r
        libcwd_r.so.5 => /usr/local/install/6.0.0-1ubuntu2/lib/libcwd_r.so.5 (0x00007f0b69840000)

$ echo $LD_LIBRARY_PATH
/usr/local/install/6.0.0-1ubuntu2/lib

$ objdump -a -x minimal | grep PATH
  RUNPATH /opt/gitache/libcwd_r/888f62c44fd64f1486176bf9e35b36f79612790017c31f95e117fc59743a54ca/lib 
```

从该路径中取消设置或删除libcwd`LD_LIBRARY_PATH`会导致

```
$ unset LD_LIBRARY_PATH
$ ldd minimal | grep libcwd_r
        libcwd_r.so.5 => /opt/gitache/libcwd_r/888f62c44fd64f1486176bf9e35b36f79612790017c31f95e117fc59743a54ca/lib/libcwd_r.so.5 (0x00007f11d7298000) 
```

事情又开始了。或者，我可以添加到项目的 CMakeLists.txt 中：

```
$ set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--disable-new-dtags") 
```

之后我们得到，

```
$ objdump -a -x minimal | grep PATH
  RPATH                /opt/gitache/libcwd_r/888f62c44fd64f1486176bf9e35b36f79612790017c31f95e117fc59743a54ca/lib 
```

现在优先`LD_LIBRARY_PATH`，因此也解决了这个问题。然而，这不是推荐的方式：如果你设置`LD_LIBRARY_PATH`了你应该知道你在做什么。如果这不起作用，您应该修复`LD_LIBRARY_PATH`或删除有问题的库。

# java - 如何从 RDS DBInstance 中获取标签

> ID：15054974
> 
> 赞同：0
> 
> 时间：2013-02-24T18:22:54.460
> 
> 标签：java, api, tags, rds

当我尝试从 Java 上的 RDS DBInstances 获取标签时遇到问题。

```
AmazonRDS rds = new AmazonRDSClient(credentialsProvider);
ListTagsForResourceRequest request = new ListTagsForResourceRequest();
ListTagsForResourceResult resultedTags = rds.listTagsForResource(request);

Status Code: 500, AWS Service: AmazonRDS, AWS Request ID: ..., AWS Error Code: InternalFailure, AWS Error Message: An internal error has occurred. Please try your query again at a later time.
Stack Trace:
at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:614)
at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:312)
at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:165)
at com.amazonaws.services.rds.AmazonRDSClient.invoke(AmazonRDSClient.java:1992)
at com.amazonaws.services.rds.AmazonRDSClient.listTagsForResource(AmazonRDSClient.java:746)
at com.vqs.AwsConsoleApp.getRDSInstances(AwsConsoleApp.java:98)
at com.vqs.AwsConsoleApp.main(AwsConsoleApp.java:73) 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:36:43.547

从 Amazon RDS API 参考中，看起来`ResourceName`请求中的参数是必需的： http: [//docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_ListTagsForResource.html](http://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_ListTagsForResource.html)

尝试使用您的 RDS 数据库实例 ID 之一设置该请求参数，您应该会得到良好的响应。

我不确定您为什么没有从服务中收到更有用的错误消息。我会将这些信息传递给 RDS 团队。

希望有帮助！

# html - 带有引导图标的输入

> ID：15054980
> 
> 赞同：2
> 
> 时间：2013-02-24T18:23:35.050
> 
> 标签：html, twitter-bootstrap, styles, icons

我正在尝试制作一个连接到 Mumble 服务器的按钮。我目前正在为 CSS 使用引导程序。

在我之前做的快速模型中，我有这个带有耳机图标的按钮，但是我不知道怎么做，因为连接按钮需要标签而不是标签。

这是按钮的工作版本，我希望它的样式和 mumble 连接按钮的工作版本之一。

是否可以将图标与 一起使用`<input>`？

样式按钮；

> ```
> <button class="btn btn-large btn-primary" type="button"><i class="icon-headphones icon-white"></i> Connect to Mumble</button> 
> ```

连接'按钮'；

```
<input class="button" value="Connect" onclick="window.location.href='mumble://MUMBLE IP HERE/?version=1.2.3'" type="BUTTON" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T03:51:31.257

试试这个-

```
 <div class="input-prepend">
        <span class="add-on"><i class="icon-user icon-black"></i></span>
<input type="text" name="login" class="//Some class" placeholder="Email address"/>
         </div> 
```

如果要附加它，只需替换`.input-prepend`为`.input-append`.

示例 - [http://jsfiddle.net/PYwq5/](http://jsfiddle.net/PYwq5/)

**更新引导程序 V3-**

**追加**-

```
<div class="input-group">
    <input type="email" class="form-control" />
    <span class="input-group-addon">
        icon</span>
</div> 
```

**前置**-

```
<div class="input-group">
    <span class="input-group-addon">
        icon</span>
    <input type="email" class="form-control" />
</div> 
```

**演示**- [https://jsfiddle.net/DTcHh/9190/](https://jsfiddle.net/DTcHh/9190/)

# android - 屏幕旋转后不再显示异步任务中的进度对话框

> ID：15054983
> 
> 赞同：0
> 
> 时间：2013-02-24T18:23:45.380
> 
> 标签：android

我正在使用异步任务将图片上传到远程服务器。为了向用户显示进度，我正在使用进度对话框。此进度对话框是在异步任务类的 preExecute 方法中创建的。

当用户旋转屏幕时，进度对话框消失，但异步任务仍在运行。该活动持有对异步任务的静态引用，因此我知道该任务仍在运行。我现在如何再次显示进度对话框？我尝试了以下方法：

活动的创建方法：

```
protected void onCreate(Bundle savedInstanceState) {     super.onCreate(savedInstanceState);

if(task != null) {
Status status = task.getStatus();

if(status == Status.RUNNING) {
    task.updateViewContext(this);
}

} 
```

我的异步任务类的构造函数：

```
public UploadTask(UploadPicturesActivity activity) {
   this.context = activity;
   dialog = new ProgressDialog(activity);
   dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);        
} 
```

我的 asnyc 任务类的 preexcetue 方法：

```
protected void onPreExecute() {
     this.dialog.show();
} 
```

并尝试再次显示对话框（不起作用）：

```
public void updateViewContext(UploadPicturesActivity activity) {
    this.context = activity;
    dialog.show();
} 
```

问候

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:27:46.097

为什么不向文件`android:configChanges="orientation"`中的活动声明添加属性`AndroidManifest.xml`。

该`android:configChanges`属性的目的是防止在真正需要时重新创建活动。

更改时不会关闭对话框`screen orientation`。

```
Beginning with Android 3.2 (API level 13), the "screen size" also changes when the device 
switches between portrait and landscape orientation. Thus, if you want to prevent runtime 
restarts due to orientation change when developing for API level 13 or higher (as declared by the 
minSdkVersion and targetSdkVersion attributes), you must include the "screenSize" value in 
addition to the "orientation" value.That is, you must declare android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:28:10.087

这是因为 Android 会破坏您的活动并在轮换时重新启动它。这意味着所有视图、对话框等都被销毁。但是一个正在运行的线程不能。最好的解决方案是`android:configChanges="orientation|screenSize"`在清单中添加您的活动，这将为您的活动关闭此行为。但是，只要您没有横向和纵向的不同布局，它仍然会正确重绘您的活动。

# java - 创建 OBJECT ARRAYS 并使用它们时出现 NullPointerException

> ID：15054985
> 
> 赞同：0
> 
> 时间：2013-02-24T18:23:59.983
> 
> 标签：java, arrays, object, nullpointerexception

我是java新手，在处理对象数组时遇到了问题。我的主程序是这样的：

```
package bicycledemo;

class BicycleDemo {
    public static void main(String[] args) {

        // Create two different 
        // Bicycle objects with an array
        Bicycle[] bike = new Bicycle[2];

        bike[0].cadence=50; //line 10, where the NullPointerException prompts out
        bike[0].gear=2;

        bike[1].cadence=10;
        bike[1].gear=3;

        System.out.println("gear: "+bike[0].gear+"\n"+"cadence: "+bike[0].cadence+"\n");
        System.out.println("gear: "+bike[1].gear+"\n"+"cadence: "+bike[1].cadence+"\n");

        System.out.println("\b");
    }
} 
```

自行车类是这样的：

```
package bicycledemo;

public class Bicycle {
    public Bicycle() {

    }

    public int cadence;
    public int gear;

} 
```

当我运行程序时，输出错误是：

```
Exception in thread "main" java.lang.NullPointerException
        at bicycledemo.BicycleDemo.main(BicycleDemo.java:10)
Java Result: 1 
```

我想发生的事情是没有正确创建对象自行车，但我不明白为什么。

非常感谢您的帮助！我真的很想解决这个问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:25:53.387

这一行：

```
Bicycle[] bike = new Bicycle[2]; 
```

创建一个数组。它有两个元素，并且两个元素最初都是空引用。您还没有创建任何`Bicycle`对象。然后在下一条语句中：

```
bike[0].cadence=50; 
```

...您正在尝试取消引用该空值。您需要在将数组元素用作对象之前对其进行初始化：

```
// Set the first element of the array to refer to a newly created object
bike[0] = new Bicycle();
// Then this will be fine
bike[0].cadence = 50; 
```

如果您不完全了解这里发生了什么，那么更仔细地研究它*真的很*重要。理解引用和对象之间的区别（并理解变量和数组只*包含*引用或原始值，从不包含*对象*）是 Java 的基础。在你“明白”之前，你会遇到各种各样的困难。

 *请注意，您还可以更改您的`Bicycle`类以包含一个以 cadence 和 gear 作为参数的构造函数：

```
public Bicycle(int cadence, int gear) {
    this.cadence = cadence;
    this.gear = gear;
} 
```

然后您可以将初始化更改为：

```
bike[0] = new Bicycle(50, 2);
bike[1] = new Bicycle(10, 3); 
```

甚至作为数组创建的一部分：

```
Bicycle[] bike = {
    new Bicycle(50, 2),
    new Bicycle(10, 3)
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T18:25:45.647

你从来没有初始化你的数组元素，因此，由于你的数组元素是一个对象，它们被初始化为它们的**默认值 null**。因此，当您尝试在索引处调用元素时，它会抛出**NPE**。

```
 Bicycle[] bike = new Bicycle[2];// initializes the array with size 2
                                       but the elements hold default
                                        values(null in this case)
   bike[0] = new Bicycle();// initializing the array element at index 0
   bike[1] = new Bicycle();// initializing the array element at index 1 
```

当然，更好的设计也是拥有 2-args Bicycle 构造函数并在其中初始化您的属性。或者为您的属性设置 setter 和 getter。

```
 public Bicycle(int cadence, int gear){
        this.cadence = cadence;
        this.gear = gear;
   } 
```

然后，

```
 bike[0] = new Bicycle(2, 2);
        bike[1] = new Bicycle(3, 5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T18:25:48.597

您需要先填充数组：

```
Bicycle[] bike = new Bicycle[2];
bike[0] = new Bicycle();
bike[1] = new Bicycle(); 
```

否则，您将创建一个仅包含空元素的数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T18:27:17.000

您必须先将数组中的每个索引设置为一个新实例，然后才能开始访问其属性。

```
Bicycle[] bike = new Bicycle[2];

bike[0] = new Bicycle(); // add this

bike[0].cadence=50;
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T18:30:38.640

您创建了一个对象数组并在没有初始化的情况下访问它们。

```
bike = [null, null] - your result 
```*

# node.js - Express 和 AngularJS - 尝试打开主页时网页冻结

> ID：15054987
> 
> 赞同：7
> 
> 时间：2013-02-24T18:24:05.787
> 
> 标签：node.js, express, angularjs

我将尽可能详细地解释这个问题。

我正在尝试将 AngularJS 与 Express 一起使用，但遇到了麻烦。我希望显示 HTML 文件（不使用模板引擎）。这些 HTML 文件将具有 AngularJS 指令。
但是，我无法显示一个简单的 HTML 文件本身！

目录结构如下：

```
Root  
---->public  
-------->js  
------------>app.js  
------------>controllers.js  
---->views  
-------->index.html  
-------->partials  
------------>test.html  
---->app.js 
```

的内容`public/js/app.js`是：

```
angular.module('myApp', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.when('/', {templateUrl: 'partials/test.html', controller: IndexCtrl});
$routeProvider.otherwise({redirectTo: '/'});
}]); 
```

的内容`public/js/controllers/js`是：

```
function IndexCtrl() {  
} 
```

其中body标签的内容`views/index.html`是：

```
<div ng-view></div> 
```

就是这样。期望 AngularJS 将用 test.html 替换上面的视图 -`views/partials/test.html`其内容是：

```
This is the test page! 
```

包含在段落标签中。就是这样！

最后，`ROOT/app.js`文件的内容是：

```
var express = require('express');

var app = module.exports = express();  

// Configuration

app.configure(function(){  
    app.set('views', __dirname + '/views');  
    app.engine('html', require('ejs').renderFile);  
    app.use(express.bodyParser());  
    app.use(express.methodOverride());  
    app.use(express.static(__dirname + '/public'));  
    app.use(app.router);  
});

app.configure('development', function(){  
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));  
});  

app.configure('production', function(){  
  app.use(express.errorHandler());  
});  

// routes

app.get('/', function(request, response) {  
    response.render('index.html');  
});  

// Start server

app.listen(3000, function(){  
  console.log("Express server listening on port %d in %s mode", this.address().port, app.settings.env);  
}); 
```

**现在，当我`$node app.js`在根文件夹中进行操作时，服务器启动时没有任何错误。但是，如果我`localhost:3000`在浏览器中访问，URL 会更改为`localhost:3000/#/`并且页面会卡住/冻结。我什至无法检查 Chrome 中的控制台日志！**
这是我面临的问题。关于我做错了什么的任何线索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T10:24:53.317

终于弄明白了——经过许多激烈的拉头发！
页面冻结的原因是因为（一步一步解释）：

1.  用户启动 localhost:3000
2.  这向快速服务器请求“/”
3.  Express 呈现 index.html
4.  AngularJS 将呈现模板“partials/test.html”。
5.  在这里，我进行了大胆的猜测——AngularJS 已经对页面“partials/test.html”发出了 HTTP 请求。
6.  但是，您可以看到 express 或者 app.js 没有此 GET 请求的处理程序。也就是说，缺少以下代码：

    app.get('partials/:name', function(request, response) {
    var name = request.params.name;
    response.render('partials/' + name);
    });

在`app.js`ROOT 目录中。添加此代码后，页面将按预期呈现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T20:42:51.493

尝试遵循[这个工作小提琴](http://jsfiddle.net/grendian/ajR3H/)中的设计模式。代码如下所示。您可以用 templateUrl 替换模板选项，它应该仍然可以正常工作。

```
var app = angular.module('app', []);

app.config(['$routeProvider', function($routeProvider){
    $routeProvider.when('/', {template: '<p>Index page</p>', controller: 'IndexCtrl'});
    $routeProvider.otherwise({redirect:'/'});
}]);

app.controller('IndexCtrl', function(){

}); 
```

# python - 使用 Django 将查询集组合成单个字符串

> ID：15054988
> 
> 赞同：7
> 
> 时间：2013-02-24T18:24:09.377
> 
> 标签：python, django

假设我有一个非常简单的模型，它只是一个单词列表：

```
class WordList(models.Model):
    word = models.CharField(max_length=60) 
```

用户提交表单后，我想...

*   检索四个随机单词
*   将它们组合成一个字符串
*   确保以前没有生成重复的字符串，如果是，请再次运行
*   好的时候把它保存到数据库中
*   将结果返回给用户。

我知道如何获得四个随机单词：

```
WordList.objects.order_by('?')[:4] 
```

我知道如何使它成为一个上下文并将其返回到一个模板，此时我可以用它做任何事情，但我对如何在幕后做这件事感到困惑，所以我可以在返回它之前做剩下的事情给用户。最终字符串应如下所示：

```
these-are-my-words 
```

此外，我在我的应用程序的哪个位置执行此操作*？*我来自 PHP，在那里，我将有一个`functions.php`文件或其他东西来执行后端工作并将其排除在演示文稿之外。我发现一些其他人的帖子说他们使用 a `functions.py`，但我不确定如何包含与现有`views.py`. 如果我做：

```
from functions import myfunc 
```

它仅`functions.py`在文件夹中以及我从中导入它的位置时才有效。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T18:30:25.640

要将您的查询集转换为字符串，请使用[python 的 join 函数](http://docs.python.org/2/library/stdtypes.html#str.join)。

```
your_string = '-'.join([str(i) for i in WordList.objects.order_by('?')[:4]]) 
```

我怀疑这段代码实际上应该存在于您的一个视图中，并且永远不会触及您的数据库，但如果不知道您的应用程序在做什么，这很难说。（您肯定将此字符串传递给模板并将其呈现到 html 页面上吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:43:36.543

这就是最终的工作。诀窍是我没有意识到可以像访问 Python 列表一样访问 QuerySet。

```
dbQuery = WordList.objects.order_by('?')[:4]
result = dbQuery[0]
for word in dbQuery[1:]:
    result = "%s-%s" % (result, word) 
```

我觉得必须有更好的方法来做到这一点。加入，如建议的那样，没有用，我一直收到一个错误，它需要一个字符串，即使所有文档都说它用于加入列表，而不是字符串，所以我不确定故障在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:31:42.317

虽然您发布的解决方案“有效”，但它是一种非常 PHP 的做事方式。

一种更 Django 的方式：

在应用程序的 models.py 文件中：

```
from django.db import models

class Word(models.Model):
    word = models.CharField(max_length=60, blank=False, null=False, unique=True)

    def __unicode__(self):
        return u'%s' % self.word

class RandomWordString(models.Model):
    string = models.CharField(max_length=255, blank=False, null=False, unique=True)

    def __unicode__(self):
        return u'%s' % self.string

    @staticmethod
    def generate(length):
        words = Word.objects.order_by('?')[:(length + 1)]
        possible_word_string = '-'.join(words.values_list('word', flat=True))
        try:
            RandomWordString.objects.get(string=possible_word_string)  # See if we've already generated this sequence
            return RandomWordString.generate(length)  # Call ourselves again if we have
        except RandomWordString.DoesNotExist:
            return possible_word_string  # If we haven't, return the value

    def save(self, *args, **kwargs):
        if not self.string or len(self.string) < 1:
            self.string = RandomWordString.generate(3)
        super(RandomWordString, self).save(*args, **kwargs) 
```

然后，从任何视图或其他任何地方：

```
from words.models import RandomWordString
seq = RandomWordString.generate(3) 
```

因为我们覆盖了保存，我们也可以这样做：

```
from words.models import RandomWordString
string = RandomWordString.objects.create()
string.save() 
```

这将所有逻辑都放在模型本身中，这比将其放在视图中*略好（尽管这完全是个人喜好问题）。*

除了我发布的内容之外，您还需要向 RandomWordString.generate 添加一些逻辑，以确保您不会无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T10:30:07.850

您必须通过**连接函数**将查询集组合成单个字符串与 Django表示**字符串**。因此，您可以使用**for 循环**从类的对象中提取字符串：

 ****```
youroutputishere  = '-'.join([str(counterofobjects) for counterofobjects in yourobjects]) 
```****

# java - 字符串中的java搜索

> ID：15054989
> 
> 赞同：-4
> 
> 时间：2013-02-24T18:24:13.807
> 
> 标签：java, string

对不起一个非常蹩脚的问题，只是发现我不熟悉字符串操作o_0我拥有的是一个字符串

```
http://oauth.vk.com/blank.html#access_token= 533bacf01e11f55b536a565b57531ad114461ae8736d6506a3&expires_in=86400&user_id=8492 
```

我需要的是 3 个字符串：

```
 access token="533bacf01e11f55b536a565b57531ad114461ae8736d6506a3"
 expiration="86400"
  user_id="8492" 
```

如何将给定的字符串分成我需要的 3 个字符串？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:32:29.403

试试这个片段，使用正则表达式：

```
String url = "http://oauth.vk.com/blank.html#access_token=533bacf01e11f55b536a565b57531ad114461ae8736d6506a3&expires_in=86400&user_id=8492";

Pattern pattern = Pattern.compile(".+access_token=(.+)&expires_in=(.+)&user_id=(.+)");
Matcher matcher = pattern.matcher(url);

if (matcher.matches()) {
    System.out.println("access_token=" + matcher.group(0));
    System.out.println("expires_in=" + matcher.group(1));
    System.out.println("user_id=" + matcher.group(2));
} 
```

这三个匹配最终（分别）在匹配器对象的组 0、1​​ 和 2 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:34:47.643

希望这可以帮助 ：

`String str = "http://oauth.vk.com/blank.html#access_toke..."`

`str = str.substring(str.indexOf("#") + 1);`

`str.split("&");`

干杯

# java - 聊天 gui 的组件选择

> ID：15054992
> 
> 赞同：0
> 
> 时间：2013-02-24T18:24:36.900
> 
> 标签：java, swing

事实上，我只是开始积极练习挥杆，以便我的理论知识派上用场:) 我已经为聊天 GUI 实现做了很多工作，但最后还是遇到了一些问题。所以我决定从头开始重新设计聊天 GUI，但我需要为它做出正确的组件选择。

首先，我必须说在第一个实现中没有“输入”功能。

我当前的聊天实现由以下组件组成：

*   JScrollPane 向上/向下滚动消息
*   每条消息都是 JPanel，里面有 JLabel。JLabel 与 HTML 配合得很好，因此很容易将微笑标记更改为 . 消息也由两个字符串构成：发件人姓名和消息。同样，JLabel 中对 HTML 的支持让我们可以用标签标记发件人的姓名。

我认为我被卡住并且聊天 GUI 应该从头开始重新设计的原因：

*   JLabel 与 HTML 一起使用，但如果您使用 JScrollPane.HORIZONTAL_SCROLLBAR_​​NEVER，则其中不再包含任何文字。用 JTextArea 替换 JLabel 不是一个好主意，因为 JTextArea 不适用于 HTML。
*   添加新消息时，不可能自动向下滚动滚动条。至少我没能做到。
*   当从服务器接收到新消息时，很难控制组件（带有 JLabels 的 JPanel）的数量来删除旧组件。否则，可以在 10 到 15 分钟的活跃聊天中使用 JLabels 创建数百个 JPanel。WeakReference 在这里很好，但是从一开始就对每条消息使用 JPanel + JLabel 是不好的设计。

还有一些其他问题，但它们并不那么关键，也不会影响“返工决定”。

如果您能根据上述“原因”提示哪些组件非常适合聊天等应用程序，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:27:05.397

你的设计很糟糕，你应该感觉很糟糕。

尝试从一堆连续显示的 JLabel 中复制一些文本。

只需使用 JTextPane 或类似的东西！这个函数来自我的一个程序，在一个扩展 JTextPane 的类中，它在末尾添加了一些文本，具有一些特殊的风格。你可以修改它来做你需要的任何事情。

```
public void append(String append,Color fg,Color bg, boolean bold,boolean italic, boolean underline) {
    try {
        // Get the text pane's document                        
        StyledDocument doc = (StyledDocument)this.getDocument();

        // The color must first be wrapped in a style
        Style style = doc.addStyle("StyleName", null);
        StyleConstants.setForeground(style, fg);
        StyleConstants.setBackground(style,bg);
        StyleConstants.setBold(style,bold);
        StyleConstants.setItalic(style,italic);
        StyleConstants.setUnderline(style,underline);

        // Insert the text at the end of the text
        doc.insertString(doc.getLength(), append, style);
    } catch (Exception e) {
        e.printStackTrace();
    }

    this.setCaretPosition (this.getDocument().getLength()-1);
} 
```

# php - 带有异常处理的 PHP __autoload() - 浪费时间？

> ID：15054993
> 
> 赞同：1
> 
> 时间：2013-02-24T18:24:42.870
> 
> 标签：php, exception, autoload

我对 OOP 有点陌生，我正在为自己的应用程序开发一个“框架”。我有自己的自动加载功能，如下所示.. 以及异常处理对象。我不会使用任何 3rd 方插件（至少我不这么认为）。

第一个问题：我应该在我的自动加载中处理异常，还是我只是做得过火？

第二个问题：我的 exceptionHandler 类是一个公共函数......因为它将被许多其他应用程序使用，这是对的吗？谢谢你。

谢谢..任何输入都非常感谢。

```
`function __autoload( $class ){

    // Define filename pattern to include
    $filename = $_SERVER['DOCUMENT_ROOT'] . '/../app/core/models/' . $class . '.class.php';

    // Require class if it exists
    try {

        if ( is_readable( $filename ) ) {

            require_once ( $filename );
        }
        else {

            throw new Exception( "Class filename doesn't exist or isn't named correctly: $filename" );
        }
    }
    catch ( Exception $e ) {

        // Send to exceptionHandler Class for logging/handling.
        $err = new exceptionHandler( $e, 3 );
    }
}` 
```

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:38:48.863

关于你的第一个问题：不，你不应该。

第一个原因：您应该始终能够链接多个自动加载器（请参阅 参考资料`spl_autoload_register`），因此如果一个自动加载器失败，第二个可能能够加载该类。因此，除非您确切知道自己在做什么，否则您的自动加载器不应抛出任何错误。

第二个原因：如果所有自动加载尝试都失败，php 无论如何都会触发错误。正确记录您的 php 错误，您无需将其记录在自动加载器中。

第三个原因：你的自动加载器将是一段将被执行*很多*的代码。你不想要一个 try/catch 块。

除此之外：如果自动加载`exceptionHandler`失败会发生什么......？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:27:33.987

任何自动加载函数实际上并不意味着抛出异常，因为不清楚该异常应该出现在哪里，并且您必须将整个代码包装在 try catch 块中或定义异常处理程序。

`trigger_error`您应该通过甚至更好地让 PHP 告诉您在发生错误的实际行中无法加载的类是什么（因此只是忽略不存在的文件）来触发错误。

你也不应该使用`__autoload`but `spl_autoload_register`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T01:37:44.760

感谢您的反馈 Jeffrey 和 Alexander。你们让我开始思考......我最终移除了我自己种植的自动装载机，以获得更简单（更快？）的方法......

在我的配置文件中，我为我的核心应用程序类以及模块类添加了包含路径：

```
set_include_path( get_include_path() . PATH_SEPARATOR . APPLICATION_ROOT . 'core' . DIRECTORY_SEPARATOR . PATH_SEPARATOR . APPLICATION_ROOT . 'module' . DIRECTORY_SEPARATOR );
spl_autoload_extensions( '.class.php' );
spl_autoload_register(); 
```

到目前为止它有效:)`

# c# - 主页上的搜索按钮检索页面生命周期后期的信息

> ID：15054996
> 
> 赞同：1
> 
> 时间：2013-02-24T18:24:55.647
> 
> 标签：c#, asp.net, page-lifecycle

在我目前的设计方法中，我遇到了一种情况，我必须在控件上执行额外的数据库读取和数据绑定，只是为了在页面生命周期的后期覆盖它们。对用户的最终结果是相同的，但在幕后我做了两个不必要且成本高昂的操作。

搜索按钮位于母版页上。所有显示控件（gridviews/tables/labels/etc）都在内容页面上。数据库调用和数据绑定必须在 Page_Init() 方法中完成（所使用的大部分控件必须在此处绑定）。

当用户搜索一个项目时，我将他的搜索输入保存在会话中，以将其保留为在所有其他内容页面中被积极查看。因此，当任何内容页面被初始化时，我会检查他们是否正在积极查看项目，如果是，则显示他的详细信息。

```
// Master Page
protected void BtnSearch_OnClick(object sender, EventArgs e)
{
   MySession.Current.ItemName = TxtItem.Text.Trim();
   Server.Transfer("~/default.aspx");
}

// Content Page
protected void Page_Init(object sender, EventArgs e)
{
   // If they're actively viewing an item, display its info
   bool HasActiveItem = string.IsNullOrEmpty(MySession.Current.ItemName) ? false : true;
   if (HasActiveItem)
   {
      // Makes one DB call to get all info; 
      // Binds all that info to GridViews/tables/labels on the page
      BindAllDataControls(MySession.Current.ItemName);

      // Display
      DisplayItemDetails();
   }
} 
```

**问题是：**假设用户当前正在查看 Item = **Boots**。该值保存在会话中。现在用户搜索 Item = **Shirts**并单击搜索按钮。

当内容页面加载时，他检查会话中是否有任何内容，但它是**Item = Boots**。它执行不必要的数据库/数据绑定调用。然后，触发 BtnSearch 点击事件，我们将新的**Item = Shirts**值加载到会话中，并重新开始生命周期。*这个*生命周期很好。

我怎样才能摆脱这种额外的处理？方法错了吗？

我曾考虑在内容页面初始化期间执行 Page.IsPostback() 和 Page.IsCallback() 逻辑，但在实际 Web 应用程序中还有多个其他控件会导致回发和回调。因此，我认为我无法从中获得足够的信息来决定是否跳过。我考虑过包装包含所有 GridViews/tables/labels/etc 的页面的整个部分。在 ajax 回调中，但我认为这不是一个好方法。我考虑过在设置标志的 BtnSearch 单击期间将 ajax 调用发送回服务器。然后在加载期间，我们读取该标志是否跳过，但无法保证该 ajax 调用将在搜索 BtnClick 事件之前处理。

有任何想法吗？还是我应该只吃这些额外的电话并完成它？一定有别的办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:24:00.420

我在这里看到的最简单的解决方案是直接在 PageInit 上而不是在按钮调用上检查搜索文本更改。

```
// Master Page
protected void BtnSearch_OnClick(object sender, EventArgs e)
{
   // remove that lines
   // MySession.Current.ItemName = TxtItem.Text.Trim();
   // Server.Transfer("~/default.aspx");
}

// Content Page
protected void Page_Init(object sender, EventArgs e)
{
   // direct add here your variable on session
   var vSearchText = TxtItem.Text.Trim();

   if(!string.IsNullOrEmpty(vSearchText))
       MySession.Current.ItemName = vSearchText ;

   // ------------ rest of your code ---------------    
   // If they're actively viewing an item, display its info
   bool HasActiveItem = string.IsNullOrEmpty(MySession.Current.ItemName) ? false : true;
   if (HasActiveItem)
   {
      // Makes one DB call to get all info; 
      // Binds all that info to GridViews/tables/labels on the page
      BindAllDataControls(MySession.Current.ItemName);

      // Display
      DisplayItemDetails();
   }
} 
```

现在说实话，Server.Transfer 不是一个好主意，我所做的是我在 URL 中使用参数，以包含来自用户输入的搜索字符串，所以当用户添加一些内容进行搜索时，我创建网址为：

```
http://www.mydomain.com?q=test 
```

然后我阅读`q`并使用它来填充搜索框并进行搜索。这样你也有一个 SEO 友好的搜索，用户可以保存他的搜索，你避免了有其他问题的服务器转移。

# php - 递归查找文件夹中的所有 .php 文件

> ID：15054997
> 
> 赞同：8
> 
> 时间：2013-02-24T18:25:00.967
> 
> 标签：php

使用 PHP，我怎样才能找到文件夹或其子文件夹（任何深度）中的所有 .php 文件？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-24T18:34:42.823

您可以使用[`RecursiveDirectoryIterator`](http://www.php.net/manual/en/class.recursivedirectoryiterator.php)和[`RecursiveIteratorIterator`](http://www.php.net/manual/en/class.recursiveiteratoriterator.php)：

```
$di = new RecursiveDirectoryIterator(__DIR__,RecursiveDirectoryIterator::SKIP_DOTS);
$it = new RecursiveIteratorIterator($di);

foreach($it as $file) {
    if (pathinfo($file, PATHINFO_EXTENSION) == "php") {
        echo $file, PHP_EOL;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T18:29:58.750

只需添加如下内容：

```
function listFolderFiles($dir){
    $ffs = scandir($dir);
    $i = 0;
    $list = array();
    foreach ( $ffs as $ff ){
        if ( $ff != '.' && $ff != '..' ){
            if ( strlen($ff)>=5 ) {
                if ( substr($ff, -4) == '.php' ) {
                    $list[] = $ff;
                    //echo dirname($ff) . $ff . "<br/>";
                    echo $dir.'/'.$ff.'<br/>';
                }    
            }       
            if( is_dir($dir.'/'.$ff) ) 
                    listFolderFiles($dir.'/'.$ff);
        }
    }
    return $list;
}

$files = array();
$files = listFolderFiles(dirname(__FILE__)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-24T07:56:40.173

我修改了*supajason*创建 的代码因为提供的代码没有返回一致的结果：主要是由于使用的命名法。

我还添加了一些功能。

```
<?php
define('ROOT', str_replace('\\', '/', getcwd()).'/');

///########-------------------------------------------------------------
///########-------------------------------------------------------------
///######## FUNCTION TO LIST ALL FILES AND FOLDERS WITHIN A CERTAIN PATH
///########-------------------------------------------------------------
///########-------------------------------------------------------------
function list_folderfiles(
                            $dir,                   // *** TARGET DIRECTORY TO SCAN
                            $return_flat = true,    // *** DEFAULT FLAT ARRAY TO BE RETURNED
                            $iteration  = 0         // *** INTERNAL PARAM TO COUNT THE FUNCTIONS OWN ITERATIONS
                        ){
    ///######## PREPARE ALL VARIABLES
    $dir                    = rtrim($dir, '/');     // *** REMOVE TRAILING SLASH (* just for being pretty *)
    $files_folders          = scandir($dir);        // *** SCAN FOR ALL FILES AND FOLDERS
    $nested_folders         = [];                   // *** THE NESTED FOLDERS BUILD ARRAY
    static $total_files     = [];                   // *** THE TOTAL FILES ARRAY

    ///######## MAKE SURE THAT THE STATIC $fileS ARE WILL BE CLEARED AFTER THE FIRST ITERATION, RESET AS EMPTY ARRAY
    if($iteration === 0) $total_$files = [];

    ///######## RUN THROUGH ALL $fileS AND FOLDERS
    foreach($files_folders as $file){
        ///######### IF THE CURRENT ``file`` IS A DIRECTORY UP
        if($file === '.' || $file === '..') continue;

        ///######### IF IT CONCERNS A $file
        if(is_dir($dir.'/'.$file)){
            $iteration++;                                                                 // *** RAISE THE ITERATION
            $nested_folders[]   = list_folderfiles($dir.'/'.$file, false, $iteration);    // *** EXECUTE THE FUNCTION ITSELF
        }
        ///######### IF IT CONCERNS A $file
        else{
            $total_files[]      = $dir.'/'.$file;   // *** ADD THE $file TO THE TOTAL $fileS ARRAY
            $nested_folders[]   = $file;            // *** ADD THE $file TO THE NESTED FOLDERS ARRAY
        }
    }

    ///########==================================================
    ///######## IF A FLAT LIST SHOULD BE RETURNED
    ///########==================================================
    if($return_flat) return $total_files;
    ///######## IF A NESTED LIST SHOULD BE RETURNED
    else return $nested_folders;
    ///########==================================================
}

$files = list_folderfiles(ROOT, true);  // *** FLAT ARRAY
///$files = list_folderfiles(ROOT, false);  // *** NESTED ARRAY

echo print_r($files, true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T20:53:44.837

这与此处的另一个答案类似，但`SKIP_DOTS`在不需要时将其删除，并且适用于`strict_types`：

```
<?php

$o_dir = new RecursiveDirectoryIterator('.');
$o_iter = new RecursiveIteratorIterator($o_dir);

foreach ($o_iter as $o_info) {
   if ($o_info->getExtension() == 'php') {
      echo $o_info->getPathname(), "\n";
   }
} 
```

[https://php.net/splfileinfo.getextension](https://php.net/splfileinfo.getextension)

# java - 如何找到阵列ID？

> ID：15054998
> 
> 赞同：0
> 
> 时间：2013-02-24T18:25:12.527
> 
> 标签：java, arrays, string

如何找到数组 ID？

例如：

```
String[] ar = {"ABC","EFG","HIJ"}; 
```

当搜索字符串为“A”并且它将显示 ABC 但如何理解数组中的位置有 ABC ( `ar[n]`，如何找到 ABC n ？)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:28:48.930

```
for (int i = 0; i < ar.length; i++) {
    if (ar[i].contains("A")) {
        System.out.println("found an element: " + ar[i] + " at index " + i);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:27:54.630

要查找以 A*开头*的元素：

```
for (int index = 0; index < ar.length; index++) {
  if (ar[index].startsWith("A")) {
    System.out.println("Found an element on array that starts with 'A': " + ar[index]);
  }
} 
```

要查找*包含*A 的元素：

```
for (int index = 0; index < ar.length; index++) {
  if (ar[index].contains("A")) {
    System.out.println("Found an element on array that contains 'A': " + ar[index]);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:29:36.080

您可以使用其他答案中的选项，也可以简单地使用 ArrayList。ArrayList 是动态的，可以调用 indexOf() 方法并传入“ABC”。如果“ABC”不存在，这将返回 -1，或者返回“ABC”的索引。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:33:17.630

如果我理解正确，您正在尝试通过字符串查找索引（而不是 ID）。例如，您知道“EFG”。

您可以使用以下代码：

```
String[] str = {"ABC", "EFG", "HIJ"};

int index = 0;
for(int i = 0; i < str.length; i++) {
    if(str[i].equals("EFG")) {
        index = i;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-24T18:38:17.037

`for (String s : ar) { if (s.startsWith("A")) {/* You code here */}}`

应该 ：-

```
for(int i = 0; i < ar.length; i++){
        if(ar[i].startsWith("A")){
            System.out.println("Found in index " + i);
        }
} 
```