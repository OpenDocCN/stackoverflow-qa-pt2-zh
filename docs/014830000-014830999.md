# StackOverflow 问答 14830000-14830999

# android - 使用 Motorola Xoom 中的列表添加应用程序以完成操作

> ID：14830003
> 
> 赞同：0
> 
> 时间：2013-02-12T10:09:52.913
> 
> 标签：android

我尝试将我的应用程序添加到“使用完整操作”中以进行呼叫联系操作。如文档和其他答案中所述，我将以下意图过滤器添加到清单中

```
 <intent-filter android:icon="@drawable/ic_launcher">
    <action android:name="android.intent.action.CALL" />
    <category android:name="android.intent.category.DEFAULT" />
    <action android:name="android.intent.action.CALL_PRIVILEGED" />
    <data android:scheme="tel" />
  </intent-filter> 
```

它适用于三星 s2 和 s3，但不适用于摩托罗拉 Xoom 设备。我的申请没有出现在列表中。谁能给我一个提示如何修复或解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:01:47.743

没有修复或解决方法，因为 XOOM 不是电话，因此无法拨打电话，因此没有可供您显示的列表。

# javascript - Phonegap 防止 pageinit

> ID：14830006
> 
> 赞同：3
> 
> 时间：2013-02-12T10:10:09.980
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我不太确定我是否正确使用了 pageinit 事件。我只使用 1 个数据角色 =“页面”。每个“.html 文件”都是一个 data-role="content"，它通过 javascript 显示或隐藏。

```
 $(document).delegate("#index", "pageinit", function(event, ui) {
  cookie = null;
  isLoggedIn(); //cookie = true || false
  initRotation();
  initNavigation();
  initService();
  .....
  if (cookie == null) {
    $('#login').show();
    $('#home, #foot, #service').hide();
  } else {
    $('#login, #service').hide();
    $('#foot, #home').show();
    $('#naviHome').addClass("ui-btn-active"); // ui-state-persist?!
  }
}); 
```

到目前为止它工作得很好，但现在我试图让用户为表单拍照。当相机打开并且用户“保存”该图片时，会触发 Android onRestart() 事件，该事件会再次触发 pageinit() 事件。我的两个问题是：我对显示/隐藏 div 的想法是否始终具有良好的性能，你能阻止 pageinit 调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:19:28.640

您可以有一个变量来跟踪 pageinit 应该或不应该被触发的位置。并且当用户打开相机时，可以更改变量，以便在保存图片并尝试触发 pageinit 时不会。然后将变量切换回来，以便它可以再次触发其他事件。

同样关于显示和隐藏 div，这对性能来说并不是最好的，但它比不断加载页面要好。您可能想研究一个加载所有模板（html）并使用 js 加载/交换信息和模板的框架。像backbone.js

# jquery - 用 jquery 重复访问 html 元素的最轻量级的解决方案是什么？

> ID：14830008
> 
> 赞同：2
> 
> 时间：2013-02-12T10:10:17.700
> 
> 标签：jquery

关于代码中经常引用的html元素，例如经常显示/隐藏的菜单，多次重新访问元素的最轻量级的jquery解决方案是什么？

我目前的方法是将结果保存在一个变量中（当然不是全局的）。

例子：

```
$myElement = $('#my-element'); 
```

然后使用`$myElement`而不是`$('#my-element')`在变量范围内运行的所有代码中。

我使用的另一种方法是 $.data() 方法。当我需要基于另一个元素访问一个元素时，我会使用它。

例子：

```
$myElement.data('friend', $('my-element-friend')); 
```

然后使用`$myElement.data('friend')`而不是 `$('my-element-friend')`

还有其他选择吗？是否存在最好在`$('#my-element')`每次我希望访问该元素时简单重复的情况？（除了在应用程序的整个运行时仅使用一次引用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:30:56.913

将引用存储在变量中（例如它）是一种好方法。

我总是使用选择器的唯一一次是如果有问题的元素一直被销毁/重新创建。或者，如果您正在访问在调用之间发生变化的元素集合（想想`$( '.SomeClass' )`）。

# sharepoint - 将 SharePoint 连接到数据库即 AWS RDS 或 Azure SQL 数据库等服务

> ID：14830011
> 
> 赞同：1
> 
> 时间：2013-02-12T10:10:24.167
> 
> 标签：sharepoint, azure, amazon-web-services, azure-sql-database, amazon-rds

在实例 [EC2 - AWS / Azure VM - Azure ] 上拥有 SharePoint 是我们采用 SharePoint on Cloud 的方式（将 SharePoint Online 与 Office365 分开）。如果我们可以将 SharePoint 实例与数据库即服务（如 AWS RDS 或 Azure SQL 数据库）连接起来，那就太好了。

一开始有可能吗？这适用于云供应商 AWS 和 Azure。我想主要的障碍是将数据库端点置于子网之下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:11:08.497

SharePoint 不支持将数据库即服务用作其存储。也就是说，SPS2k13 和 Azure 之间还有其他集成点（例如 Azure 网站、身份验证服务等）。

[http://msdn.microsoft.com/en-us/library/fp179922.aspx](http://msdn.microsoft.com/en-us/library/fp179922.aspx)

# jquery - 使用 jquery 在 div 中添加图像/s

> ID：14830014
> 
> 赞同：1
> 
> 时间：2013-02-12T10:10:37.033
> 
> 标签：jquery, html

每次我点击一个按钮 `<button class="xx type="submit" id="add_football">Add</button>`

我想在`<img src="img/door-right.png">`里面添加一个图像（） `<div class="ball_footballbox"><img src</div>`

我如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:15:42.493

或者 `$('<img src="img/door-right.png">').appendTo(".ball_footballbox");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:12:45.103

试试这个

```
$(".ball_footballbox").append('<img src="img/door-right.png">'); 
```

将其包装在一个函数中，并在单击按钮操作时调用此函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:18:27.633

尝试如下...它会工作

**HTML：**

```
<button class="xx" type="submit" id="add_football">Add</button>
<div class="ball_footballbox"></div> 
```

**查询：**

```
$("#add_football").click(function() {
$('.ball_footballbox').prepend('<img id="theImg" src="img/door-right.png" prepended="yes"/>')
}); 
```

小提琴：http: [//jsfiddle.net/RYh7U/73/](http://jsfiddle.net/RYh7U/73/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:20:32.103

看看这个[演示](http://jsfiddle.net/LX33c/)，这将帮助您获得添加图像的答案。

```
$("#add_football").click(function(){
$('<img src="http://jqfaq.com/wp-content/uploads/logo_v1.png">').appendTo($(".ball_footballbox"));
}); 
```

我希望这会对你有更多帮助。

# css - 使用 z-index 的 CSS 轮播

> ID：14830023
> 
> 赞同：0
> 
> 时间：2013-02-12T10:11:11.793
> 
> 标签：css, loops, z-index, carousel

我想知道是否可以单独使用 CSS 通过以指定的时间间隔（比如 5 秒）切换 div 的 z-index 来创建轮播。这些 div 将相互叠加，然后，当它们的 z-index 发生变化时，它们会根据需要使用它们的 div ID 向前或向后移动，一次只留下一个可见的。然后这个过程将循环。这是可能的，如果是这样，我将如何去做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:41:46.953

CSSWizardy 创建了一个漂亮的 css-only-carousel 并更改了左值。

[http://csswizardry.com/2011/10/fully-fluid-responsive-css-carousel/](http://csswizardry.com/2011/10/fully-fluid-responsive-css-carousel/) 不改变 z-index，但应该为你创造奇迹。

我也刚刚为您找到了解决方案！查看此网站[http://css3.bradshawenterprises.com/cfimg/](http://css3.bradshawenterprises.com/cfimg/) 演示 3！

# memory - tbb::parallel_for 在 80 核的机器上内存不足

> ID：14830024
> 
> 赞同：1
> 
> 时间：2013-02-12T10:11:11.440
> 
> 标签：memory, multicore, tbb, parallel-for

我正在尝试在具有 160 个并行线程（8 个 Intel E7-8870）和 0.5 TBytes 内存的机器上使用 tbb::parallel_for。它是当前的 Ubuntu 系统，内核为 3.2.0-35-generic #55-Ubuntu SMP。TBB 来自软件包 libtbb2 版本 4.0+r233-1

即使是非常简单的任务，我也倾向于用完资源，要么是“bad_alloc”，要么是“thread_monitor Resource暂时不可用”。我把它归结为这个非常简单的测试：

```
#include <vector>
#include <cstdlib>
#include <cmath>
#include <iostream>
#include "tbb/tbb.h"
#include "tbb/task_scheduler_init.h"
using namespace tbb;

class Worker
{
  std::vector<double>& dst;
 public:
  Worker(std::vector<double>& dst)
    : dst(dst)
    {}

  void operator()(const blocked_range<size_t>& r ) const
  {
    for (size_t i=r.begin(); i!=r.end(); ++i)
      dst[i] = std::sin(i);
  }
};

int main(int argc, char** argv)
{
  unsigned int n = 10000000;
  unsigned int p = task_scheduler_init::default_num_threads();

  std::cout << "Vector length: " << n << std::endl
            << "Processes    : " << p << std::endl;

  const size_t grain_size = n/p;
  std::vector<double> src(n);

  std::cerr << "Starting loop" << std::endl;
  parallel_for(blocked_range<size_t>(0, n, grain_size), RandWorker(src));
  std::cerr << "Loop finished" << std::endl;
} 
```

典型输出是

```
Vector length: 10000000
Processes    : 160
Starting loop
thread_monitor Resource temporarily unavailable
thread_monitor Resource temporarily unavailable
thread_monitor Resource temporarily unavailable 
```

这些错误是随机出现的，并且随着 n 的增大而出现的频率更高。这里 1000 万的价值是它们经常发生的点。尽管如此，考虑到机器的特性，这应该不会耗尽内存（我单独使用它来进行这些测试）。

粒度是在 tbb 创建太多 Worker 实例后引入的，这使得它在更小的 n 时失败。

谁能建议如何设置 tbb 来处理大量线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T13:23:01.713

在答案的评论中总结讨论：

消息“thread_monitor Resource暂时在pthread_create中不可用”基本上告诉TBB无法创建足够的线程；“资源暂时不可用”是`strerror()`报告返回的错误代码的内容`pthread_create()`。此错误的一个可能原因是内存不足，无法为新线程分配堆栈。默认情况下，TBB 为一个工作线程请求 4M 的堆栈；`tbb::task_scheduler_init`如有必要，可以使用构造函数的参数调整此值。

在这种特殊情况下，正如 Guido Kanschat 报告的那样，问题是由`ulimit`意外设置导致的，这限制了进程可用的内存。

# c# - 从具有相同表架构的所有数据库中检索数据

> ID：14830025
> 
> 赞同：1
> 
> 时间：2013-02-12T10:11:17.780
> 
> 标签：c#, asp.net, sql, sql-server

我创建了`ASP.NET C#`Web 应用程序（使用数据库作为`SQL Server 2008`）。我的应用程序连接到不同的数据库（假设计数为 10）。它们都具有相同的结构，即相同的表名称、存储过程名称、SP 参数计数和类型、表架构都是相同的。

**但是里面的数据不一样。**

`dbo.usp_getData1`我在每个接受**一些参数**的数据库中都有存储过程，它会进行一些表扫描并检索仅与该数据库相关的数据。

我的问题是如何仅使用一个存储过程（因为参数/表结构相同）**从我的所有数据库中检索数据？**

我可以通过`SQL Server`或实现相同的目标`C# Coding`。

意见对我有帮助吗？

```
CREATE VIEW [ schema_name . ] view_name [ (column [ ,...n ] ) ] 
[ WITH <view_attribute> [ ,...n ] ] 
AS select_statement 
[ WITH CHECK OPTION ] [ ; ]

<view_attribute> ::= 
{
    [ ENCRYPTION ]
    [ SCHEMABINDING ]
    [ VIEW_METADATA ]     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:24:23.857

如果您完全限定表名（如 Database.Schema.Table），则可以从多个数据库（在同一台服务器上）中进行选择。

参见例如 [http://www.sqlteam.com/article/selecting-data-from-different-databases](http://www.sqlteam.com/article/selecting-data-from-different-databases)

如果您想将数据库名称作为参数传递给您的存储过程，您可能不得不求助于动态 SQL，尽管这可能会打开一个全新的蠕虫罐。

参见例如 [SQL 2000 表名作为存储过程中的变量](https://stackoverflow.com/questions/650465/sql-2000-table-name-as-variable-in-stored-procedure)和 [http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

简单的例子：

```
CREATE PROCEDURE SelectEverything
    @tableName NVARCHAR(250)
AS
BEGIN
    DECLARE @sql NVARCHAR(500)
    SET @sql = 'SELECT * FROM ' + @tableName;
    EXEC(@sql);
END
GO 
```

如果你执行这个过程：

```
EXEC dbo.SelectEverything 'SomeOtherDatabase.dbo.SomeTable' 
```

它将选择数据库 SomeOtherDatabase 的模式 dbo 中表 SomeTable 的所有内容。

但请阅读有关动态 SQL 的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:03:09.430

您可以使用[linq to sql](http://msdn.microsoft.com/nl-be/library/bb386976.aspx)并生成一个[dbml 文件](http://msdn.microsoft.com/en-us/library/bb399400.aspx)。

然后您可以在初始化数据上下文时通过调整连接字符串来访问每个数据库：

```
MyDataContext firstDB = new MyDataContext(someConnectionstring);
MyDataContext secondDB = new MyDataContext(someOtherConnectionstring); 
```

# c# - asp.net c#上的进度条

> ID：14830028
> 
> 赞同：1
> 
> 时间：2013-02-12T10:11:22.720
> 
> 标签：c#, asp.net, progress-bar

目前我正在使用一个繁忙的图像来显示我通过使用 asp.net 制作的网站正在执行工作，它工作正常，但我想知道这是否可以使用 c# 完成所以我可以与另一个正在运行的类一起运行以显示该程序正在运行

```
 $().ready(function () {    

});

    function confirmit() {
        if ($.browser.msie) {
            $('#progressBar').html('<img width="120px" height="120px" alt="Please wait...." style="display: block;" id="busyimage" src="/Charter/images/ajax-loader-circle.gif">');    
        }

    $('#busyimage').show("slow");
    $('#Confirm_btn').hide("slow");
    $('#error').text("");
    $('#aspnetForm').css('cursor', 'wait');

    //alert('radio ' + $("input[id=formatOfReport_1]:checked", '#aspnetForm').val());

    if(document.getElementById('formatOfReport_0').checked) //
    {
        window.setTimeout(hideThem, 7000); // 7 sec   
    }
    if (document.getElementById('formatOfReport_1').checked) //
    {
        window.setTimeout(hideThem, 15000); // 15 sec   
    }

} 
```

# java - Java Swing - 从单击获取 X，Y

> ID：14830030
> 
> 赞同：0
> 
> 时间：2013-02-12T10:11:30.190
> 
> 标签：java, swing, action

```
public class cPan extends JPanel implements ActionListener{
    @Override
    public void actionPerformed(ActionEvent arg0) {

    }
} 
```

我有上面的代码，它从我的 JPanel 中捕获操作。

我对如何从我的 JPanel 中获取 x,y 坐标感到困惑，例如我单击的位置

所以如果我点击 100,200 (x,y) 我希望能够看到这个。

我已经查看了 arg0 给出的函数，但找不到任何有用的东西。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:14:05.270

```
public class cPan extends JPanel implements ActionListener{ 
```

应该

```
public class cPan extends JPanel implements MouseListener{ 
```

Oracle turorial 中的更多内容[如何编写鼠标侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)并与错误的侦听器进行比较[如何](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)为[MouseEvents编写动作侦听器](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/events/MouseEventDemoProject/src/events/MouseEventDemo.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:14:07.867

`ActionListener`用于在发生某种不起眼的动作时通知您。

无法提取有关导致操作的原因的信息（例如鼠标单击或键操作）

要获取有关鼠标事件的信息，您需要使用`MouseListener`附加到您有兴趣监视的组件。

查看[如何使用鼠标监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)了解更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T10:14:17.007

改用 a [`MouseListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)。这样，您将获得一个[`MouseEvent`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html)，您可以通过调用从中获取点击点[`MouseEvent#getPoint()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html#getPoint%28%29)。

```
public class cPan extends JPanel implements MouseListener {
  @Override
  public void mouseClicked(MouseEvent e) {
    Point p = e.getPoint();
    // or
    int x = e.getX();
    int y = e.getY();
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T10:17:45.257

您需要添加鼠标侦听器：

```
JPanel panel = new JPanel ();
panel.setPreferredSize (new Dimension (640, 480));
panel.addMouseListener (new MouseAdapter() {
    @Override
    public void mouseClicked (MouseEvent e) {
        JOptionPane.showMessageDialog(
            e.getComponent (), "X: " + e.getX () + ", Y: " + e.getY ());
    }
});

JFrame frame = new JFrame ("Click");
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
frame.getContentPane ().setLayout (new BorderLayout ());
frame.getContentPane ().add (panel, BorderLayout.CENTER);
frame.pack ();
frame.setVisible (true); 
```

# rest - WebSphere Application Server/8.0 / servlet 创建的未捕获的初始化异常

> ID：14830052
> 
> 赞同：3
> 
> 时间：2013-02-12T10:12:21.727
> 
> 标签：rest, web-services, websphere, websphere-8

我只是想在 websphere 8.0 上部署一个示例 RESTful Web 服务示例，但我得到以下信息：

**错误**

> [12.02.2013 05:13:07:728 VET] 00000c74 E UOW= source=com.ibm.ws.webcontainer.servlet class=com.ibm.ws.webcontainer.servlet.ServletWrapper method=init org= prod= component=线程=[WebContainer：370] Uncaught.init.exception.throw.by.servlet [12.02.2013 05:13:07:728 VET] 00000c74 E UOW= source=com.ibm.ws.webcontainer.webapp class=com。 ibm.ws.webcontainer.webapp.WebApp method=logServletError org= prod= component= thread=[WebContainer : 370] SRVE0293E: [Servlet Error]-[jersey-serlvet]: java.lang.IncompatibleClassChangeError: org.objectweb.asm。 ClassVisitor at java.lang.ClassLoader.defineClassImpl(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:262) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:69) at com.ibm.ws。类加载器.CompoundClassLoader。_defineClass(CompoundClassLoader.java:852) 在 com.ibm.ws.classloader.CompoundClassLoader.localFindClass(CompoundClassLoader.java:762) 在 com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:585) 在 java.lang .ClassLoader.loadClass(ClassLoader.java:627) at java.lang.J9VMInternals.verifyImpl(Native Method) at java.lang.J9VMInternals.verify(J9VMInternals.java:85) at java.lang.J9VMInternals.verify(J9VMInternals.java :83) 在 java.lang.J9VMInternals.initialize(J9VMInternals.java:162) 在 com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79) 在 com.sun.jersey.api.core。 PackagesResourceConfig.init(PackagesResourceConfig.java:104) 位于 com.sun.jersey.api.core.PackagesResourceConfig.(PackagesResourceConfig.java:78) 位于 com.sun.jersey.api.core。PackagesResourceConfig.(PackagesResourceConfig.java:89) 在 com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:700) 在 com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent .java:678) 在 com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203) 在 com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373) ) 在 com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556) 在 javax.servlet.GenericServlet.init(GenericServlet.java:161) 在 com.ibm.ws.webcontainer.servlet。 ServletWrapper.init(ServletWrapper.java:336) 位于 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.init(ServletWrapperImpl.java:168) 位于 com.ibm.ws.webcontainer.servlet.ServletWrapper。com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456) 处的 handleRequest(ServletWrapper.java:629) com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1027) 在 com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87) 在 com.ibm.ws.webcontainer .WebContainer.handleRequest(WebContainer.java:895) 在 com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662) 在 com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195 ) 在 com.ibm.ws.http.channel.inbound.impl 的 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)。com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:311) 上 com.ibm.ws.http.channel.inbound.impl 上的 HttpInboundLink.handleNewRequest(HttpInboundLink.java:522)。 com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214) 处的 HttpInboundLink.ready(HttpInboundLink.java:282) com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete( NewConnectionInitialReadCallback.java:113) 在 com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165) 在 com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 在 com .ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161) 在 com.ibm.io.async.AsyncFuture。在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775) 在 com.ibm 完成(AsyncFuture.java:138) .io.async.ResultHandler$2.run(ResultHandler.java:905) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1783)

**web.xml**

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Restful Web Application</display-name>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.container.servlet.ServletContainer
        </servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.mkyong.rest.JSONService</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T23:47:46.267

这似乎是[此处](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=450187)IBM 论坛上讨论的产品缺陷，因此发布了[修复程序](http://www-01.ibm.com/support/docview.wss?uid=swg1PM71336)。引用链接的引用，问题是；

> WebSphere Application Server 使用的内部 ASM 库可供应用程序访问。如果应用程序还部署了 ASM 库，则可能会发生冲突。

[论坛](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=450187)中列出了一些可能的解决方法，这有助于通过修改类路径来解决冲突。由于您目前不是 8.5 而是 8.0，我建议您提高 PMR 以验证您的问题是否相同，并针对您的版本进行修复。

# android - Android 的 Sencha 构建失败 - 不支持 stbuild？

> ID：14830057
> 
> 赞同：1
> 
> 时间：2013-02-12T10:12:35.823
> 
> 标签：android, iphone, cordova, sencha-touch, sencha-touch-2

我正在尝试构建本机应用程序以部署在 android 中。我已经按照[Sencha 指南](http://docs.sencha.com/touch/2-1/#!/guide/command)安装了所有需要的软件/工具。我正在使用 SenchaCMD 版本 3.0.2

运行时`sencha app build production`一切顺利。做本机应用程序部分时会出现问题。这是错误日志和我的 packager.json 配置。请让我知道我哪里出错了。

```
Sencha Cmd v3.0.2.288
[INF]       
[INF]       init-properties:
[INF]       
[INF]       init-sencha-command:
[INF]       
[INF]       init:
[INF]       
[INF]       -before-app-build:
[INF]       
[INF]       app-build-impl:
[INF]       
[INF]       native:
[INF]       
[INF]       -before-init-local:
[INF]       
[INF]       -init-local:
[INF]       
[INF]       -after-init-local:
[INF]       
[INF]       init-local:
[INF]       
[INF]       find-cmd:
[INF]       
[INF]       -before-init:
[INF]       
[INF]       -init:
[INF]       
[INF]       -after-init:
[INF]       
[INF]       init:
[INF]       
[INF]       -before-build:
[INF]       
[INF]       sass:
[INF]       
[INF]       -before-sass:
[INF]       
[INF]       -sass:
[INF]       [shellscript] identical ../css/app.css 
[INF]       
[INF]       -after-sass:
[INF]       
[INF]       page:
[INF]       
[INF]       -before-page:
[INF]       
[INF]       -page:
[INF]       building application
[INF]       Deploying your application to /opt/lampp/htdocs/Revilo/build/Revilo/package
[INF]       Copied /opt/lampp/htdocs/Revilo/./app.js to /opt/lampp/htdocs/Revilo/build/Revilo/package/app.js
[INF]       Copied /opt/lampp/htdocs/Revilo/./resources/css/app.css to /opt/lampp/htdocs/Revilo/build/Revilo/package/resources/css/app.css
[WRN]       File or folder /opt/lampp/htdocs/Revilo/./resources/images not found
[INF]       Copied /opt/lampp/htdocs/Revilo/./resources/icons
[INF]       Copied /opt/lampp/htdocs/Revilo/./resources/startup
[INF]       Resolving your application dependencies (file:////opt/lampp/htdocs/Revilo/./index.html)
[INF]       Compiling app.js and dependencies
[INF]       Processing classPath entry : /opt/lampp/htdocs/Revilo/sencha-compile-temp-dir
[INF]       Processing classPath entry : /opt/lampp/htdocs/Revilo/touch/src
[INF]       Processing classPath entry : /opt/lampp/htdocs/Revilo/app.js
[INF]       Processing classPath entry : /opt/lampp/htdocs/Revilo/app
[INF]       Processing class inheritance graph
[INF]       Processing instantiation refereces to classes and aliases
[INF]       Processing source dependencies
[INF]       Concatenating output to file /opt/lampp/htdocs/Revilo/build/Revilo/package/app.js
[INF]       Completed compilation.
[INF]       Processed remote file touch/sencha-touch.js
[INF]       Processed local file app.js
[INF]       Minified app.js
[INF]       Minified resources/css/app.css
[INF]       Generated app.json
[INF]       Embedded microloader into index.html
[INF]       Generating native package
[INF]       Packaging your application as a native app to /opt/lampp/htdocs/Revilo/build/Revilo/native ...
[ERR]       
[ERR]       BUILD FAILED
[ERR]       com.sencha.exceptions.BasicException: The following error occurred while executing this line:
[ERR]       /opt/lampp/htdocs/Revilo/.sencha/app/build-impl.xml:137: com.sencha.exceptions.ExScript: Wrapped java.lang.UnsupportedOperationException: stbuild is not yet supported on linux (x-app-build#480)
[ERR]          [anonymous] (x-app-build:480)
[ERR]          each (/root/bin/Sencha/Cmd/3.0.2.288/ant/ant-util.js:462)
[ERR]          runAppBuild (x-app-build:286)
[ERR]          [anonymous] (x-app-build:545)
[ERR]          x_app_build (x-app-build:543)
[ERR]          <script> (anonymous:1)
[ERR]           at com.sencha.exceptions.BasicException.wrap(BasicException.java:43)
[ERR]           at com.sencha.cli.Command.dispatch(Command.java:104)
[ERR]           at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]           at com.sencha.cli.AbstractCommand.dispatch(AbstractCommand.java:182)
[ERR]           at com.sencha.ant.SenchaCommandTask.doExecute(SenchaCommandTask.java:69)
[ERR]           at com.sencha.ant.BaseAntTask.execute(BaseAntTask.java:22)
[ERR]           at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:601)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]           at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]           at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]           at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]           at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]           at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]           at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ERR]           at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:72)
[ERR]           at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java:94)
[ERR]           at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java:98)
[ERR]           at com.sencha.command.BasePluginCommands$BaseNamePathCommand.run(BasePluginCommands.java:142)
[ERR]           at com.sencha.command.app.AppCommands$BuildCommand.execute(AppCommands.java:116)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:601)
[ERR]           at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]           at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]           at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]           at com.sencha.command.Sencha.main(Sencha.java:71)
[ERR]       Caused by: /opt/lampp/htdocs/Revilo/.sencha/app/build-impl.xml:144: The following error occurred while executing this line:
[ERR]       /opt/lampp/htdocs/Revilo/.sencha/app/build-impl.xml:137: com.sencha.exceptions.ExScript: Wrapped java.lang.UnsupportedOperationException: stbuild is not yet supported on linux (x-app-build#480)
[ERR]          [anonymous] (x-app-build:480)
[ERR]          each (/root/bin/Sencha/Cmd/3.0.2.288/ant/ant-util.js:462)
[ERR]          runAppBuild (x-app-build:286)
[ERR]          [anonymous] (x-app-build:545)
[ERR]          x_app_build (x-app-build:543)
[ERR]          <script> (anonymous:1)
[ERR]           at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:551)
[ERR]           at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:444)
[ERR]           at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)
[ERR]           at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]           at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:601)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]           at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]           at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]           at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]           at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]           at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]           at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ERR]           at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:80)
[ERR]           at com.sencha.command.ant.AntCommand.execute(AntCommand.java:75)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:601)
[ERR]           at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]           ... 31 more
[ERR]       Caused by: /opt/lampp/htdocs/Revilo/.sencha/app/build-impl.xml:137: com.sencha.exceptions.ExScript: Wrapped java.lang.UnsupportedOperationException: stbuild is not yet supported on linux (x-app-build#480)
[ERR]          [anonymous] (x-app-build:480)
[ERR]          each (/root/bin/Sencha/Cmd/3.0.2.288/ant/ant-util.js:462)
[ERR]          runAppBuild (x-app-build:286)
[ERR]          [anonymous] (x-app-build:545)
[ERR]          x_app_build (x-app-build:543)
[ERR]          <script> (anonymous:1)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:116)
[ERR]           at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]           at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]           at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]           at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]           at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
[ERR]           at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]           at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
[ERR]           ... 52 more
[ERR]       Caused by: com.sencha.exceptions.ExScript: Wrapped java.lang.UnsupportedOperationException: stbuild is not yet supported on linux (x-app-build#480)
[ERR]          [anonymous] (x-app-build:480)
[ERR]          each (/root/bin/Sencha/Cmd/3.0.2.288/ant/ant-util.js:462)
[ERR]          runAppBuild (x-app-build:286)
[ERR]          [anonymous] (x-app-build:545)
[ERR]          x_app_build (x-app-build:543)
[ERR]          <script> (anonymous:1)
[ERR]           at com.sencha.util.JavaScriptHost.eval(JavaScriptHost.java:74)
[ERR]           at com.sencha.ant.ScriptTask.executeScript(ScriptTask.java:92)
[ERR]           at org.apache.tools.ant.taskdefs.optional.script.ScriptDefBase.execute(ScriptDefBase.java:50)
[ERR]           at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]           at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:601)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]           ... 59 more
[ERR]       Caused by: org.mozilla.javascript.WrappedException: Wrapped java.lang.UnsupportedOperationException: stbuild is not yet supported on linux (x-app-build#480)
[ERR]           at org.mozilla.javascript.Context.throwAsScriptRuntimeEx(Context.java:1786)
[ERR]           at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:183)
[ERR]           at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:247)
[ERR]           at org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:1701)
[ERR]           at org.mozilla.javascript.Interpreter.interpret(Interpreter.java:854)
[ERR]           at org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:164)
[ERR]           at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)
[ERR]           at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3178)
[ERR]           at org.mozilla.javascript.InterpretedFunction.exec(InterpretedFunction.java:175)
[ERR]           at org.mozilla.javascript.Context.evaluateString(Context.java:1111)
[ERR]           at com.sencha.util.JavaScriptHost.eval(JavaScriptHost.java:67)
[ERR]           ... 66 more
[ERR]       Caused by: java.lang.UnsupportedOperationException: stbuild is not yet supported on linux
[ERR]           at com.sencha.tools.external.StBuildRunner.run(StBuildRunner.java:27)
[ERR]           at com.sencha.tools.external.BaseExternalCommandRunner.run(BaseExternalCommandRunner.java:90)
[ERR]           at com.sencha.tools.external.BaseExternalCommandRunner.run(BaseExternalCommandRunner.java:94)
[ERR]           at sun.refl
[ERR]       ect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:601)
[ERR]           at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:161)
[ERR]           ... 75 more
[ERR]       
[ERR]       Total time: 1 minute 29 seconds
[ERR]       com.sencha.exceptions.BasicException: The following error occurred while executing this line: 
```

我的**packager.json**文件配置：（注意我已经包含了我的 android SDK 路径。）

```
{
    /**
     * @cfg  applicationName
     * @required
     * This is the name of your application, which is displayed on the device when the app is installed. On IOS, this should match
     * the name of your application in the Apple Provisioning Portal.
     */
    "applicationName":"Revilo Era",

    /**
     * @cfg  applicationId
     * This is the name namespace for your application. On IOS, this should match the name of your application in the Apple Provisioning Portal.
     */
    "applicationId":"com.mycompany.myAppID",

    /**
     * @cfg  versionString
     * @required
     * This is the version of your application.
     */
    "versionString":"1.0",

    /**
     * @cfg  iconName
     * This is file name of your icon. This should be in the same directory of this configuration file.
     *
     * For iOS, please refer to their documentation about icon sizes:
     * https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html
     *
     * For Android, please refer to the Google Launcher icons guide:
     * http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html
     */
    "iconName":"resources/icons/Icon~ipad.png",

    /**
     * @cfg  inputPath
     * @required
     * This is location of your Sencha Touch 2 application, relative to this configuration file.
     */
    "inputPath":"build/native",

    /**
     * @cfg  outputPath
     * @required
     * This is where the built application file with be saved.
     */
    "outputPath":"build/",

    /**
     * @cfg  configuration
     * @required
     * This is configuration for your application. `Debug` should always be used unless you are submitting your app to an online
     * store - in which case `Release` should be specified.
     */
    "configuration":"Debug",

    /**
     * @cfg  platform
     * @required
     * This is the platform where you will be running your application. Available options are:
     *  - iOSSimulator
     *  - iOS
     *  - Android
     *  - AndroidEmulator
     */
    "platform":"Android",

    /**
     * @cfg  deviceType
     * @required
     * This is device type that your application will be running on.
     *
     * If you are developing for Android, this is not necessary.
     *
     * Available options are:
     *  - iPhone
     *  - iPad
     *  - Universal
     */
    "deviceType":"Universal",

    /**
     * @cfg  certificatePath
     * This is the location of your certificate.
     * This is required when you are developing for Android or you are developing on Windows.
     */
    "certificatePath":"/path/to/certificate.file",

    /**
     * @cfg  certificateAlias
     * This is the name of your certificate.
     *
     * IF you do not specify this on OSX, we will try and automatically find the certificate for you using the applicationId.
     *
     * This can be just a simple matcher. For example, if your certificate name is "iPhone Developer: Robert Dougan (ABCDEFGHIJ)", you
     * can just put "iPhone Developer".
     *
     * When using a certificatePath on Windows, you do not need to specify this.
     */
    "certificateAlias":"",

    /**
     * @cfg  sdkPath
     * This is the path to the Android SDK, if you are developing an Android application.
     */
    "sdkPath":"/opt/adt-bundle-linux-x86_64/sdk",

    /**
     * @cfg  androidAPILevel
     * This is android API level, the version of Android SDK to use, you can read more about it here: http://developer.android.com/guide/appendix/api-levels.html.
     * Be sure to install corresponding platform API in android SDK manager (android_sdk/tools/android)
     */
    "androidAPILevel":"15",

    /**
     * @cfg {Array[String]} orientations
     * @required
     * This is orientations that this application can run.
     */
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

非常感谢您的意见。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:07:40.567

不幸的是，正如错误所述：

```
stbuild is not yet supported on linux (x-app-build#480) 
```

Linux 不支持用于生成本机应用程序的 stbuild。

# asp.net - 记住我在 C# 中的持久性 Cookie

> ID：14830058
> 
> 赞同：1
> 
> 时间：2013-02-12T10:12:37.983
> 
> 标签：asp.net, cookies, persistent

我正在 asp.net 中做一个项目并尝试做记住我的系统。我想要做的是存储用户的 ID，它是 cookie 中的唯一标识符。但是即使我将其生命周期设置为一年，该 cookie 也只能持续一天。每天早上我必须登录网站，cookie 被清除。

```
HttpCookie userid = new HttpCookie("mb_login_userid", dr["UserId"].ToString().Trim());
userid.Expires.AddYears(1);
Response.Cookies.Add(userid); 
```

运行此代码后，我检查了 cookie，它说它不是持久 cookie，它是会话 cookie。所以每天都会清零。

我该怎么做才能让它持久

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:53:06.907

```
Response.Cookies("userid").Expires = DateTime.Now.AddYears(1) 
```

或者

```
userid.Expires = DateTime.Now.AddYears(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:43:53.133

试试这个代码...这是创建持久 cookie 的代码

```
HttpCookie userid = new HttpCookie("userid");
userid.Values.add("mb_login_userid", dr["UserId"].ToString().Trim());
userid.Expires=DateTime.Now.AddDays(30);
Response.Cookies.Add(userid); 
```

# javascript - 如何同时托管 socket.io 服务器和 http 服务器？

> ID：14830059
> 
> 赞同：2
> 
> 时间：2013-02-12T10:12:40.247
> 
> 标签：javascript, node.js, socket.io

我有一个`Socket.io`服务器和一个基本的 HTTP 服务器，我一起编写了代码，但问题是 HTTP 服务器试图为`socket.io`应该服务的请求提供服务。

代码：

```
//Dependences
var sio = require('socket.io');
var http = require("http");
var NewRequestHandler = require('./NewRequestHandler').Handler;
var DisconnectHandler = require('./DisconnectHandler').Handler;
var AuthorisationRequestHandler = require('./AuthorisationRequestHandler').Handler;
//The backlog of resources
var ResourceBackLog;

var ResourceRequestHandler = require("./ResourceRequestHandler").Handler;
//Reports the IP adress and Port that it will run on.
console.log('IP address: ' +  process.env.IP);
console.log('Port: ' + process.env.PORT);
//Creates and configures a new http.server instance.
var Server = new http.Server();

//Starts both the http and socket.io server.
var io = sio.listen(Server.listen(process.env.PORT, process.env.IP, ResourceBackLog, function(error) {
    if (error) {
        console.log("Error: " + error);
    } else if (!error) {
        console.log("Server started sucsessfully.");
        Server.on('request', ResourceRequestHandler);
        console.log("Server now ready for requests.");
    }
}));

//Handles the connect and authorisation bit
io.sockets.on('connection', function(socket) {
    console.log('New Connection');
    socket.on('auth', function(Keys) {
    console.log('Autorisation Request Recived');
        AuthorisationRequestHandler(socket, Keys, function() {
            socket.on('NewRequest',  function(Request) {
                NewRequestHandler(socket, Request);
            });
            socket.on('diconnect', function() {
                DisconnectHandler(socket);
            });
        });

    });
}); 
```

ResourceRequestHandler 是通过检查 URL 然后在该位置打开文件来提供资源的文件，但它也提供 /socket.io 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:41:03.090

我会让 Socket.io 在另一个端口上监听，并让常规的 http 服务器直接向它发出请求，这样你就可以确保它们不会相互干扰。

```
// create server
io = http.createServer();
 io.on('uncaughtException', function(exception) {
 console.log(exception);
});
io.listen(4001); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:43:48.310

`http.createServer(RequestHandler)`和 `new http.Server(RequestHandler)`工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T16:05:15.060

基于 Socket.IO 0.9.6。

在 socket.io 之前附加您的自定义请求侦听器很重要。然后 Socket.IO 将提供它可以处理的请求并将所有其他请求委托给您自己的请求侦听器。

socket.io/lib/manger.js 中的算法如下。在构造函数中： 1\. 删除所有现有的请求侦听器。2.附加Socket.IO请求监听器。根据请求： 1\. 尝试处理请求。2\. 如果 Socket.IO 无法处理它，它会将请求委托给原始侦听器 - 那些之前在构造函数中删除的侦听器。

# javascript - jQuery 函数 .on 适用于 1.8.3 但不适用于 1.9.1

> ID：14830064
> 
> 赞同：5
> 
> 时间：2013-02-12T10:12:54.100
> 
> 标签：javascript, jquery

我有一个适用于 jQuery 1.8.3 的函数，但是当我升级到 1.9.1 时它不再起作用，但文档没有变化。有人知道如何解决这个问题吗？

```
$(document).on("hover", "#cart-left", function(){
    $("#cart").addClass('active');
}); 
```

[http://jsfiddle.net/michalcerny/R9HZp/](http://jsfiddle.net/michalcerny/R9HZp/)

感谢您的支持！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T10:18:48.920

在 1.9.1 中，您应该使用`mouseover`

```
$(document).on("mouseover", "#cart-left", function(){
    $("#cart").addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T10:19:52.570

**`hover`速记的状态**

从 jQuery 1.8 开始，`hover`速记已被*弃用*。请参阅[jQuery`on()`文档](http://api.jquery.com/on/)：

> 自 jQuery 1.8 起已弃用：名称“hover”用作字符串“mouseenter mouseleave”的简写

从 jQuery 1.9 开始，*不支持*`hover`简写。请参阅[jQuery 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event)

 ***选择**

在您的情况下，这意味着您应该使用该`mouseenter`事件。例如：

```
$(document).on("mouseenter", "#cart-left", function(){
     $("#cart").addClass('active');
}); 
```

参见**[jsFiddle 演示](http://jsfiddle.net/R9HZp/2/)**

**更好地利用`on()`**

还值得注意的是，除非传递给的选择器`on()`引用动态添加到 DOM 的元素（即在页面加载后），否则无需将处理程序*委托*给`document`. 相反，在这种情况下，您可能可以将处理函数直接*绑定*到元素，如下所示：

```
$("#cart-left").on("mouseenter", function(){
    $("#cart").addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T10:22:19.590

问题不在于“on”功能，而在于 1.9.1 中已弃用（并删除）的“hover”伪事件：http: [//jquery.com/upgrade-guide/1.9/#hover-伪事件](http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event)*

# xpath - 使用 selenium webdriver 验证网页中的货币符号

> ID：14830065
> 
> 赞同：1
> 
> 时间：2013-02-12T10:12:58.837
> 
> 标签：xpath, selenium-webdriver, currency

对于电子商务 Web 应用程序，我需要根据国家/地区验证是否显示了正确的货币符号。

在下面的网站中，

[http://www.moltonbrown.co.uk/store/index.jsp](http://www.moltonbrown.co.uk/store/index.jsp)

我正在检查篮子摘要中的货币符号。

在 Selenium IDE 中，当我为 xpath //div/span[contains(text(),'£18.00')] 执行 verifyText 时，它运行良好。但是，当我在 selenium webdriver 自动化代码中使用相同的 xpath 并尝试验证元素时，它会显示：

```
//div/span[contains(text(),'�18.00')]
Element not found
false
***************
//div/span[contains(text(),'�18.00')]
*************
***************not present*************** 
```

我看到这个[使用 php 获取货币符号](https://stackoverflow.com/questions/13198197/get-currency-symbol-using-php)。但无法理解应该做些什么来克服这个问题。

提前致谢， 苏奇特拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:53:30.070

# android - 如何从 Android 将图像上传到 .net WebService

> ID：14830069
> 
> 赞同：0
> 
> 时间：2013-02-12T10:13:11.963
> 
> 标签：android, image-upload, android-image

我正在尝试将图像上传到 webService，但我做不到，我在这里和互联网上搜索了很多主题，但找不到好的解决方案。

当我运行此代码时，我收到错误请求错误。

**更新**：我使用了此链接中的一些代码：[Uploading MS Word files from Android to .Net WCF?](https://stackoverflow.com/questions/7860298/uploading-ms-word-files-from-android-to-net-wcf)

但是给我FileNotFoundException，但我的文件路径是：`/mnt/sdcard/ImageDir/images/ilan_1360917248037__thumb_.jpeg`

这是我正在尝试的代码：

```
public static String imgUpload(String url, List<NameValuePair> list, List<String> images){

        String result = Constants.EMPTY;
        Bitmap bm;

        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, ServiceConstant.TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, ServiceConstant.TIMEOUT_MILLISEC);

        HttpParams p = new BasicHttpParams();
        HttpClient httpclient = new DefaultHttpClient(p);

        HttpPost httppost = new HttpPost(url);        

        String resimYol = images.get(0);
        resimYol = resimYol.replace("file:///", "/");
        bm = BitmapFactory.decodeFile(resimYol);
        Log.d("RESIL_YOL", resimYol.toString());

        try{                        

            ByteArrayBody bab = new ByteArrayBody(b, resimYol);

            ResponseHandler<String> responseHandler = new BasicResponseHandler();  

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            bm.compress(CompressFormat.JPEG, 100, bos);
            byte[] data = bos.toByteArray();            

            ByteArrayBody bab = new ByteArrayBody(data, resimYol);

            MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            httppost.setEntity(reqEntity);    
        result = httpclient.execute(httppost,responseHandler);

        }

        catch (Exception e) {
              // handle exception here
              Log.e(e.getClass().getName(), e.getMessage());
            }
        return result; 
    } 
```

这是我的日志：

```
02-12 11:43:07.467: E/org.apache.http.client.HttpResponseException(19112): Bad Request 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:22:48.373

试试这个例子[链接](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)它可能对你有帮助。

并添加所有需要的 jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:37:20.810

尝试转换`image`in`Base64`然后将其`String`响应作为参数发送到 Web 服务以成功上传到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T07:58:59.870

```
public static String __imgUpload(String url, List<NameValuePair> list, List<String> images)
    {
         URL url1=null;
         HttpURLConnection conn = null;
         DataOutputStream dos = null;
         DataInputStream inStream = null;
         String existingFileName= null;

            String urlServer = url;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****"; 
            String str = null;

         int bytesRead, bytesAvailable, bufferSize;
         byte[] buffer;
         int maxBufferSize = Integer.MAX_VALUE;
         String responseFromServer = "";

          try {
            url1 = new URL(url);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }                

          for(int resimID=0;resimID<images.size();resimID++)
          {
             existingFileName=    images.get(resimID); 
             existingFileName = existingFileName.replace("file:///", "/");

             try
             {
             FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) );

              conn = (HttpURLConnection) url1.openConnection();

              conn.setDoInput(true);

              conn.setDoOutput(true);

              conn.setUseCaches(false);

              conn.setRequestMethod("POST");
              conn.setRequestProperty("Connection", "Keep-Alive");
              conn.setRequestProperty("Content-Type", "application/stream");
              dos = new DataOutputStream( conn.getOutputStream() );

              bytesAvailable = fileInputStream.available();
              bufferSize = Math.min(bytesAvailable, maxBufferSize);
              buffer = new byte[bufferSize];
              // read file and write it into form...
              bytesRead = fileInputStream.read(buffer, 0, bufferSize);
              while (bytesRead > 0)
              {
               dos.write(buffer, 0, bufferSize);
               bytesAvailable = fileInputStream.available();
               bufferSize = Math.min(bytesAvailable, maxBufferSize);
               bytesRead = fileInputStream.read(buffer, 0, bufferSize);

              }

              dos.writeBytes(lineEnd);

              // close streams
              Log.e("Debug",twoHyphens + boundary + twoHyphens + lineEnd);
              fileInputStream.close();
              dos.flush();
              dos.close();
             }
             catch (MalformedURLException ex)
             {
                  Log.e("Debug", "error 1: " + ex.getMessage(), ex);
             }
             catch (IOException ioe)
             {
                  Log.e("Debug", "error 2: " + ioe.getMessage(), ioe);
             }

             try {
                   inStream = new DataInputStream ( conn.getInputStream() );

                   while (( str = inStream.readLine()) != null)
                   {
                        Log.e("Debug","Server Response "+str);
                   }
                   inStream.close();

             }
             catch (IOException ioex){
                  Log.e("Debug", "error 3: " + ioex.getMessage(), ioex);
             }  
          }

             return str;
    } 
```

这段代码肯定有效。

# asp.net-mvc - 在 ActionFilterAttribute 中判断这是否是重定向

> ID：14830070
> 
> 赞同：3
> 
> 时间：2013-02-12T10:13:13.907
> 
> 标签：asp.net-mvc, asp.net-mvc-4, actionfilterattribute

我正在尝试创建一个每个请求只运行一次的 ActionFilterAttribute，所以我正在做这样的事情。

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if (filterContext.IsChildAction)
        return;

    // More stuff here
} 
```

在某些情况下，我可能需要检查这`filterContext.HttpContext.Request.IsAjaxRequest()`也是错误的，但我真正的问题是如何判断它不是重定向。当 action`X`重定向到 action`Y`时，过滤器运行两次 for`X`和一次 for `Y`（对于`IsChildAction`是 false `Y`）。

我试图在 上保存一些键`filterContext.HttpContext.Items`，这将告诉我过滤器已经运行，但这些项目不在 和 之间`X`共享`Y`。

有什么想法可以告诉我`ActionExecutingContext`这是重定向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:49:50.137

我相信这样的东西是你正在寻找的：

[使用 MVC 操作过滤器捕获 Ajax 请求中的重定向并返回 JsonResult](https://stackoverflow.com/questions/4971447/using-an-mvc-action-filter-to-catch-redirects-in-ajax-requests-and-return-a-json)

您可以检查它是重定向结果还是重定向到路由结果

```
var redirectResult = filterContext.Result as RedirectResult;
    if (filterContext.Result is RedirectResult)
    {
        // It was a RedirectResult => do something
    }
    else if (filterContext.Result is RedirectToRouteResult)
    {
        // It was a RedirectToRouteResult => do something

    } 
```

# wpf - WPF 绑定到单个属性的两个控件不相互更新

> ID：14830072
> 
> 赞同：1
> 
> 时间：2013-02-12T10:13:20.917
> 
> 标签：wpf, mvvm, inotifypropertychanged

我正在使用 MVVM 设计模式开发 WPF 应用程序。

我有一个 ViewModel 通过它的基类实现 INotifyPropertyChanged。ViewModel 包含一个属性，然后绑定到两个文本框。相关代码如下。

视图模型库

```
Public MustInherit Class ViewModelBase : Implements INotifyPropertyChanged
    Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
    Protected Sub onPropertyChanged(propertyName As String)
        If Not propertyName Is Nothing Then RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
    End Sub
End Class 
```

视图模型

```
Public Class TemplateEditVM : Inherits ViewModelBase
    Public Property Name As String
      Get
        Return _Template.Name
      End Get
      Set(value As String)
        If Not _Template.Name = value Then
          _Template.Name = value
          onPropertyChanged("TemplateEditName")
        End If
      End Set
    End Property
End Class 
```

看法

```
<TextBox Text="{Binding Path=Name}" />
<TextBox Text="{Binding Path=Name}" /> 
```

首次加载视图时，属性名称的值会正确填充两个文本框。问题是，当我更改其中一个文本框中的文本时，另一个文本框中的文本不会更改，即使基础属性已更改。如果我单步执行它，我可以看到 PropertyChanged 事件正在被触发。

谁能告诉我为什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:15:44.317

将绑定模式设置为双向

```
 <TextBox Text="{Binding Path=Name, Mode="TwoWay"}" /> 
```

并且您的 on propertyChanged 方法应该计算出您绑定到的确切名称

# iphone - iPhone 应用程序和 FTP 工作

> ID：14830076
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:13:39.553
> 
> 标签：iphone, ios, xcode, ftp

如何在 xcode 中为任何 iPhone 应用程序在 FTP 服务器上上传任何图像？我有 FTP 帐户详细信息，所以请告诉我，因为我是 iOS 平台的新手。

我已经提到：

[https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFFTPStreamRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFFTPStreamRef/Reference/reference.html)

但没有得到正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:59:34.840

您可以使用一个库（适用于**iPhone**和 Mac OS X），它使与 FTP 服务器的通信变得非常简单：[SCRFTPRequest](https://github.com/Hackmodford/SCRFTPRequest)

附上你可以找到一个[例子](https://dl.dropbox.com/u/19438780/FTPtest.zip) （简单上传）

# c# - 调试 WP8 时没有可用的源代码？

> ID：14830080
> 
> 赞同：0
> 
> 时间：2013-02-12T10:13:55.370
> 
> 标签：c#, debugging, visual-studio-2012, windows-phone-8, windows-phone-8-emulator

当我在我的虚拟机上调试和步进任何 Windows Phone 应用程序时，我得到“无可用源”、“当前线程当前未运行代码或无法获得调用堆栈”。这与我在设备还是模拟器上调试无关。
它似乎在你正确的断点上中断，并且继续工作正常。
单步执行服务器代码工作正常。

虚拟机只是为此设置的，仅包含 Windows 8（更新）、Visual Studio 2012 Pro（完整、更新）、Google Chrome、Start8 和 Windows Phone SDK 8.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:12:29.043

修复 Visual Studio 安装解决了该问题。

# jquery - 如何使用 jquery 将内容添加到动态创建的选项卡

> ID：14830081
> 
> 赞同：1
> 
> 时间：2013-02-12T10:14:01.330
> 
> 标签：jquery

如何将内容附加到动态创建的选项卡？如果我用那个 id 留下一个 div，那会一团糟。

1.  第三个标签内容出现在第一个标签中
2.  在我单击复选框后，它看起来不错，但在第三次单击（再次隐藏并再次显示）时，第三个选项卡内容会消失。

如何按下复选框以动态显示和隐藏选项卡及其内容？

直播：http: [//jsfiddle.net/dSxby/](http://jsfiddle.net/dSxby/)

html:

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab 1</a>
        </li>
        <li><a href="#tabs-2">tab 2</a>
        </li>
    </ul>
    <div id="tabs-1">
        <table class="form-table">
            <tr>
                <th scope="row">
                    <label for="dp_add_license">Add tab</label>
                </th>
                <td>
                    <input type="checkbox" id="dp_add_license" name="dp_add_license" value="1"
                    />
                </td>
            </tr>
        </table>
    </div>
    <div id="tabs-2">
        <p>tab  2 content.</p>
    </div>
    <div id="tabs-3">
        <p>tab 3 content.</p>
    </div>
</div> 
```

jQuery：

```
 $(document).ready(function() {
    $("#tabs").tabs();
      $('#dp_add_license').click(function() {
          if ($(this).is(':checked')) {
              $("#tabs").tabs("add", '#tabs-3', "tab 3");
          } else {
              $("#tabs").tabs("remove", '#tabs-3');
          }
      });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:20:39.877

Style the `id="tabs-3"` to `display:none;`: [http://jsfiddle.net/dSxby/1/](http://jsfiddle.net/dSxby/1/)

```
<div id="tabs-3" style='display:none;'>
    <p>tab 3 content.</p>
</div> 
```

# bash - OS X LaunchAgent WatchPaths 不起作用，有 PID 并且没有错误消息

> ID：14830091
> 
> 赞同：1
> 
> 时间：2013-02-12T10:14:31.133
> 
> 标签：bash, plist, osx-mountain-lion, launchd

我编写了一个小型 LaunchAgent 来监视文件夹的更改并在发生更改时触发 shell 脚本：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN
           http://www.apple.com/DTDs/PropertyList-1.0.dtd >
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.myusername.w2</string>
    <key>ProgramArguments</key>
    <array>
    <string>/Users/myusername/Desktop/alert</string>
    </array>
    <key>WatchPaths</key>
    <array>
        <string>/Users/myusername/Personnel</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>WorkingDirectory</key>
    <string>/Users/myusername</string>
    <key>StandardErrorPath</key>
    <string>myjob.log</string>
    <key>StandardOutPath</key>
    <string>myjob.log</string>
    <key>Debug</key>
    <true/>
    <key>WaitForDebugger</key>
    <true/>

</dict>
</plist> 
```

*   文件名与标签相同
*   我使用 Launchctl 加载和启动代理
*   我注销/登录了我的会话
*   我检查 Launchctl 列表，代理有正确的 PID，状态码为 0
*   我所有的网址都是绝对的

尽管它没有按预期工作：我在监视文件夹中添加了一个文件并且脚本没有被触发。

日志文件已创建但为空（没有错误？）

如果有人能指出正确的方向，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T08:37:18.380

由于您将`RunAtLoad`选项设置为`true`，因此您的脚本会在您登录后立即启动。你是说你在`launchctl list`输出中看到了一个 PID。这意味着对于已启动的代理，代理已经在运行，无需再次运行。

我建议删除`RunAtLoad`密钥或使`/Users/myusername/Desktop/alert`脚本快速退出。您将`-`在输出的 PID 列中看到符号`launchctl list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:29:42.977

要检查的两件事：

1.  删除“WaitForDebugger”键。（至少，删除它允许我进行有效的测试。显然，它有一个目的，但我不能建议如何将调试器附加到您的进程。）

2.  确保`/Users/myusername/Desktop/alert`可执行 ( `chmod +x /Users/myusername/Desktop/alert`)

# c# - 您将如何创建像 WP 的邮件应用程序的撰写屏幕这样的页面？

> ID：14830092
> 
> 赞同：1
> 
> 时间：2013-02-12T10:14:36.707
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-phone

我是 WP dev 的新手（通常是 C# 和 Silverlight），我一直在玩文本框。我很快发现你不能真正滚动`TextBox`控件。

我在各种博客和 StackOverflow 帖子上看到了一些解决方案，最流行的似乎是嵌入`TextBox`a `ScrollViewer`，然后使用一些代码使当前输入行始终可见，如下所示：

```
scrollViewer.ScrollToVerticalOffset(textBox.ActualHeight); 
```

如果您有一个相对较小的 ，这可以正常工作`TextBox`，但是如果您想制作一个占用相当多空间的 ，您会遇到键盘覆盖底部的问题，除非您手动滚动到顶部将光标向上移动，等等。

现在，Mail 应用程序的 Compose 页面似乎完美地做到了这一点：一个很好的文本输入空间，键盘从不阻塞输入，您可以自由滚动整个窗格，它真的很好用。我尝试了滚动查看器和文本框的各种组合，但在匹配它的行为方面没有任何成功。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:15:41.157

默认应用程序不是用 C# 编写的，使用 SDK 或网络上可访问的控件。以前尝试过复制邮件查看器和作曲家，但并不成功。（基于 AppHub 的类似帖子 - 旧 WP7 论坛）

# c# - 将 pdfreader 转换为 pdfdocument

> ID：14830097
> 
> 赞同：2
> 
> 时间：2013-02-12T10:14:44.427
> 
> 标签：c#, itextsharp

谁能告诉我如何将`PdfReader`对象转换为`PdfDocument`？

我已经读取了一个磁盘文件并转换为内存流，但我需要它作为`PdfDocument`我的 C# 程序中的其他方法。

我正在将应用程序转换为使用`iTextSharp`而不是`PdfSharp`.

```
MemoryStream pdfstream = new MemoryStream();

/* Convert the attachment to an byte array */
byte[] pdfarray = (byte[])dr["Data"];
/* Write the attachment into the memory */
pdfstream.Write(pdfarray, 0, pdfarray.Length);
/* Set the memorystream to the beginning */
pdfstream.Seek(0, System.IO.SeekOrigin.Begin);

/* Open the pdf document */
PdfSharp.Pdf.PdfDocument document = PdfSharp.Pdf.IO.PdfReader.Open(pdfstream, PdfDocumentOpenMode.Modify);
//iTextSharp.text.Document doc1 = iTextSharp.text.pdf.PdfReader.GetStreamBytes(
//ITS.pdf.PdfReader rdr = ITS.pdf.PdfReader(

string filename = DateTime.Now.Ticks.ToString() + "_" + dr["AttachmentName"].ToString();
string path = Path.Combine(FolderName, filename);

document.Save(path); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:23:32.057

我认为你可以做这样的事情（注意代码没有运行或测试，可能需要调整）：

```
using (MemoryStream ms = new MemoryStream())
{
    Document doc = new Document(PageSize.A4, 50, 50, 15, 15);

    PdfWriter writer = PdfWriter.GetInstance(doc, ms);

    using (var rdr = new PdfReader(filePath))
    {
        PdfImportedPage page;

        for(int i = 1; i <= rdr.PageCount; i++)
        {
            page = writer.GetImportedPage(templateReader, i)

            writer.DirectContent.AddTemplate(page, 0, 0);

            doc.NewPage();
        }
    }
} 
```

这将逐页读取 PDF 并将其输出到您的文档中。

# c# - 使用 C# 从 String 中剥离所有 HTML 代码

> ID：14830106
> 
> 赞同：1
> 
> 时间：2013-02-12T10:15:13.237
> 
> 标签：c#, asp.net, strip-tags

我目前正在将一些数据从 SQL Server 数据库中提取到 C# asp.net 页面中。

我正在使用以下（部分）代码来输出存储在我的`body`列中的 HTML 文本：

```
TextLabel.Text += "<div class=\"newsEntry\">" + 
    Convert.ToString(reader2["body"]).Substring(0, 220) + 
    "...<a href='entry.aspx?ID=" + reader2["ID"] + 
    "' title=\"Read More about " + reader2["Title"] + 
    "\">Read More &raquo;</a></div>"; 
```

我想去掉其中`+ Convert.ToString(reader2["body"]).Substring(0, 220) +`所有 HTML 的正文值（）。

**如何使用 C# 实现这一目标？**

通常使用 PHP，我会使用`striptags`.

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:18:42.927

查看[HttpServerUtility.HtmlEncode()](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.htmlencode.aspx)和[HttpServerUtility.HtmlDecode()](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.htmldecode.aspx)方法

# javascript - 使用画布将 html（当前页面或子窗口）转换为图像

> ID：14830108
> 
> 赞同：0
> 
> 时间：2013-02-12T10:15:14.620
> 
> 标签：javascript, html, canvas

有没有办法仅使用客户端脚本将当前呈现的页面或子窗口转换为画布或图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:17:11.933

用于[`html2canvas`](http://html2canvas.hertzen.com/)此目的。它是 jQuery 的插件，可将网页转换为画布。

**注意：**某些样式在转换时不合适，例如旋转。

# c++ - 微软标准库中整数类型的 std::iterator_traits

> ID：14830112
> 
> 赞同：1
> 
> 时间：2013-02-12T10:15:28.317
> 
> 标签：c++, visual-c++, specifications

我有一个模板函数，需要专门用于迭代器。所以我所做的就是：

```
template <typename T>
void function2(T whatever, typename std::iterator_traits<T>::pointer) // ... iterator

template <typename T>
void function2(T whatever, ...) // ... non-iterator

template <typename T>
void function(T whatever) {
    function2(whatever, NULL);
} 
```

而且我碰壁了，因为 Microsoft 标准库专门`std::iterator_traits`用于所有数字类型（`bool`, `char`, `int`, `float`...）。并且它是这样做的`reference`并且`pointer`是非`void`的，尽管事实上在这些类型上既不能调用`operator*`也不能调用。`operator->`

好的，我可以以一些更复杂的模板机制为代价检查`std::iterator_traits<T>::category`派生`std::input_iterator`（实际上我认为`std::forward_iterator`在我的情况下更合适）。

但是，我有兴趣知道：

*   为什么他们`iterator_traits`为不符合迭代器概念的类型定义（即使输出迭代器至少需要一元`operator*`，这些类型都没有。
*   他们这样做是否违反了 C++ 规范？并不是说微软不会在所有地方都违反它，但如果他们是，我会对特定于编译器的解决方法感到满意，如果他们显然不这样做的话。
*   无论如何，它甚至可以正常工作吗？似乎`std::iterator_traits<T>::pointer`总是存在，但未定义并导致错误而不是 SFINAE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:35:26.500

> **其他功能 [res.on.functions]**
> 
> [...]
> 
> 2 特别是，在以下情况下的影响是不确定的：
> 
> *   对于在实例化模板组件时用作模板参数的类型，如果对该类型的操作未实现适用的要求子条款的语义

为了使用`iterator_traits<T>`,`T`必须是一个迭代器。如果不是，则行为未定义。您无法`T`在编译时检测类型是否为迭代器。这在理论上甚至是不可能的，因为允许类型支持与迭代器相同的运算符和 typedef，因此`iterator_traits<T>`可以实例化实现的泛型而不会出现任何错误或警告消息，但具有完全不同的含义。

考虑一下，由于您的评论澄清了合理的猜测就足够了，我认为您最好使用 SFINAE 并`enable_if`检测核心操作（一元`*`和前缀`++`），`std::iterator_traits<T>::pointer`仅在满足这些条件时使用。

# android - 如何不在工作区中构建 Android 项目？

> ID：14830113
> 
> 赞同：0
> 
> 时间：2013-02-12T10:15:28.527
> 
> 标签：android, eclipse, build, workspace

我正在使用 Eclipse 进行 Android 开发。假设我有一个项目 A，它使用项目 B 中的代码。在项目 A 中：我设置了一个指向源文件夹的链接，以对项目 B 进行编码。

链接代码将构建，但 B 中的其他一些代码有错误。我可以将项目 B 包含在我的工作区中，但将其从自动构建过程中排除吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:24:04.340

> **链接代码将构建，但 B 中的其他一些代码有错误。**
> 
> --> AFAIK 如果您的项目 B 中的任何一行有错误，那么您必须先解决该错误。尽管您无事可做，因为您已经说过要在项目 A 中使用它的未链接代码。但是您必须解决项目 B 中的所有错误。然后只有这样您才能获得使用项目 B 中的代码.

`Alternative:`如果您只有一些您想在项目 A 中使用的代码行。那么您也可以在项目 A 中编写该代码。无需参考项目 B。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:52:57.390

您必须将所需的代码从项目 B 移动到项目 A，否则您**必须**修复项目 B 中的错误。

# ios - iOS 企业分发中的下载进度条不改变进度

> ID：14830117
> 
> 赞同：4
> 
> 时间：2013-02-12T10:15:47.547
> 
> 标签：ios, download, enterprise-distribution

我正在通过企业分发开发和分发 iPad 应用程序。它们下载并执行良好，所以一切正常（网络链接、ipa 文件、plist 文件、配置......）。

“问题”是当用户单击下载链接时，iPad 中显示下载进度的进度条显示为“Waiting...”，但为空且永远不会更改。完成后，它会变为“Installing...”，然后正确显示安装进度。

对于小型应用程序，这并不是一个真正的问题，但对于较大的应用程序，它会让用户认为什么都没有发生。

有没有办法显示下载进度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-20T15:05:00.723

阻止 Web 服务器（在这种情况下为 Apache）对文件进行 gzip 压缩（无论如何这都没用）为我启用了进度指示器：

`# Don't compress images and compressed files` `SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png|mbtiles|zip|ipa|tgz|gz|bz2)$ no-gzip dont-vary`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:55:01.960

I also faced this problem.

In my case, I setup the enterprise environment in my personal mac, place the ipa file in the web sharing folder, and create a app.plist and download html.

From mac, I created a network.

Then make iPhone join the network, access the html to download app.

However, the download progress bar was always waiting without progress.

I fixed the problem by changing the setting of wifi in the iphone to static ip, using the subnet 255.255.255.0.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:24:00.820

这是通过临时分发下载应用程序时的默认行为。您单击该链接，然后您将获得`Waiting...`并且在您拥有`Installing...` 据我所知之后无法更改它。

# java - 如何在单例实例调用接口

> ID：14830118
> 
> 赞同：0
> 
> 时间：2013-02-12T10:15:48.510
> 
> 标签：java, android

这是我的课

```
public class MyReceiver implements TolEnabled 
```

我想在这里打电话

```
MyManager.getInstance(context, this, Properties.SDSMT, localText.toString(), Integer.valueOf(repetitions), false); 
```

在`MyManager`课堂上我有单身

```
public static MyManager getInstance(Context context, TolEnabled tolActivitiy, String enginePackage, String text, int repetition) {
        if (instance == null) {
            instance = new MyManager (...);
        }

        return instance;
    } 
```

但是在我的`MyReceiver`接收器中，当我打电话给单身人士时，我得到了

> MyReceiver 类型中的方法 getInstance(Context, TolEnabled, String, String, int) 不适用于参数 (Context, MyReceiver , String, String, Integer, boolean)

我能做些什么？`MyReceiver`如果不是单例，则实现接口并工作。如何在单例中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:18:03.320

从外观上看，您在对 getInstance 的调用中提供了一个额外的布尔参数，这不是 getInstance 签名所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:21:52.293

您要么需要删除布尔条件

```
MyManager.getInstance(context, this, Properties.SDSMT, localText.toString(), Integer.valueOf(repetitions), false); 
```

或者修改`MyManager.getInstance()`方法以接受布尔值作为最后一个参数。

```
public static MyManager getInstance(Context context, TolEnabled tolActivitiy, String enginePackage, String text, int repetition, boolean condition) {
  if (instance == null) {
            instance = new MyManager (...);
        }

        return instance;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:22:05.163

您的方法声明如下

```
Context, TolEnabled, String, String, int 
```

当您调用 getInstance 时，您提供以下参数

```
Context, MyReceiver , String, String, Integer, boolean 
```

结论：删除最后一个布尔参数。

# javascript - 使用正则表达式获取输入值

> ID：14830122
> 
> 赞同：0
> 
> 时间：2013-02-12T10:16:00.600
> 
> 标签：javascript, regex, input

在我的页面中，我有一些以这种方式编写的输入按钮：

```
<input type="button" value="" idtag="" style="color:rgb(51, 156, 203); background-color:white; border:0px; padding:0px;"> 
```

我可以使用正则表达式来获取 value 和 idtag 的值吗？并在方法替换之后，替换字符串上的结果？

```
text = text.replace(/(<input type="button" value="(.+)" idtag="(.+)" style="color:rgb(51, 156, 203); background-color:white; border:0px; padding:0px;"> )/gi, function($0,$1,$2){return $3+"-"+$4;}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:20:19.960

They are attributes of a DOM object, so you can retrieve them like this:

```
var button = ...;

var idtag = button['idtag'];
var value = button['value']; 
```

# python - 从字典中获取特定值

> ID：14830128
> 
> 赞同：2
> 
> 时间：2013-02-12T10:16:13.443
> 
> 标签：python, dictionary

如何从python中的字典中获取特定键？

我有一本字典：

```
dict = {'redorange':'1', 'blackhawak':'2', 'garlicbread':'3'} 
```

我想获取键名中包含大蒜的键的值。
我怎样才能实现它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T10:16:41.097

让我们调用你的字典`d`：

```
print [v for k,v in d.iteritems() if 'garlic' in k] 
```

打印所有对应值的列表：

```
['3'] 
```

如果你知道你想要一个单一的值：

```
print next(v for k,v in d.iteritems() if 'garlic' in k) 
```

印刷

```
'3' 
```

`StopIterationError`如果没有找到这样的键/值，则会引发此问题。添加默认值：

```
print next((v for k,v in d.iteritems() if 'garlic' in k), None) 
```

获取`None`是否找不到这样的键（或使用另一个默认值）。

# entity-framework - 将数据库的值置于 get{} 值之上

> ID：14830129
> 
> 赞同：0
> 
> 时间：2013-02-12T10:16:13.960
> 
> 标签：entity-framework, entity-framework-5

我一直在使用以下技术来伪造数据库中的计算值。

```
public class Invoice
{
    public ICollection<Line> Lines {get;set;}

    [AlwaysUpdate]
    public Decimal Total { get { return this.CalcTotal; } set{} }

    public Decimal CalcTotal
    {
        get
        {
             return this.Lines.Sum( l => l.Price * l.Quantity );
        }
     }
} 
```

这种技术允许我在我的数据库中存储发票的总计，如果 Lines 发生变化，Total 会自动更新并保存，这要归功于我的`[AlwaysUpdate]`属性。

如果我像这样查询发票：

```
_repository.Invoices.Select( i => i.Total ); 
```

实体框架将去获取数据库的总数，而不是调用`CalcTotal`.

但是，如果我这样做：

```
_repository.Invoices.ToList().Select( i => i.Total ); 
```

实体框架将调用`CalcTotal`.

通常这是我想要的行为，但我现在对某个查询有疑问。我必须使用`ToList`将所有记录提取到内存中，但我不想调用`CalcTotal`每个项目。

有没有办法改变我的小技巧以支持不`CalcTotal`一直打电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:36:47.383

这并不出色，但你可以

```
public class Invoice
{
    public ICollection<Line> Lines {get;set;}

    private decimal _dbTotal;

    [AlwaysUpdate]
    public Decimal Total { get { return this.CalcTotal; } set{ _dbTotal = value; } }

    public Decimal DBTotal { get { return _dbTotal;} }

    public Decimal CalcTotal
    {
        get
        {
             return this.Lines.Sum( l => l.Price * l.Quantity );
        }
     }
} 
```

DBTotal 将始终返回存储在数据库中的总数，因此您可以针对 DBTotal 编写查询？

# apache - Apache httpd 虚拟主机 SSL 证书

> ID：14830133
> 
> 赞同：0
> 
> 时间：2013-02-12T10:16:20.277
> 
> 标签：apache, ssl, virtualhost

我将 Apache 设置为反向代理，让 https 访问托管在我们 Intranet 上的服务。

Apache httpd 正在运行，我已经设置了一个虚拟主机，如下所示。

```
NameVirtualHost *:443

<VirtualHost *:443>
    ServerName my.domain.com

    SSLEngine On
    SSLCertificateFile /etc/pki/tls/certs/my.domain.com.crt
    SSLCertificateKeyFile /etc/pki/tls/private/mykey.key

    ProxyPreserveHost On
    ProxyPass / http://128.0.0.120:8083/
    ProxyPassReverse / http://128.0.0.120:8083/

</VirtualHost> 
```

我已经生成了一个自签名证书，并将文件放在 /etc/pli/tls/cert/... 中，如上所述，但是当我浏览到此页面时，我被告知机器名称的自签名证书，而不是 VirtualHost 中指定的那个。机器名称的证书包含在该部分中`/etc/httpd/conf.d/ssl.conf`的行中。`SSLCertificateFile /etc/pki/tls/certs/localhost.crt``<VirtualHost _default_:443>`

我期待我更具体的 VirtualHost 覆盖*默认*设置，但似乎情况并非如此。我应该怎么做才能正确覆盖 SSLCertificateFile 指令。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:40:11.643

为了使您的配置按预期工作，您需要服务器和客户端都支持服务器名称指示。看 ：

[https://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI](https://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI)

# java - 使用反射调用方法时最后一个变量参数不是可选的

> ID：14830136
> 
> 赞同：1
> 
> 时间：2013-02-12T10:16:34.103
> 
> 标签：java, reflection

我正在尝试使用反射调用方法

```
Method mi = TestInterface.class.getMethod("TestMethod", java.lang.String.class,java.lang.String.class,java.lang.String.class,java.lang.Object[].class); 
```

此方法有 3 个强制字符串参数，最后一个参数，即变量参数是可选的。

但是，当我如下调用此方法时。

```
mi.invoke(new TestImplementation(), new Object[]{"arg1", "arg2","arg3"}); 
```

然后它给了我一个错误`java.lang.IllegalArgumentException: wrong number of arguments`

但最后的争论应该是可选的吧？或者这在使用反射调用方法的情况下不起作用？

代码：

```
public interface TestInterface {
    public void TestMethod(String str, String str1, String str2, Object... objects);
} 

public class TestImplementation implements TestInterface {
    public void TestMethod(String str1, String str2, String str3, Object... objects) {
        // ....
    }
}

public static void main(String[] args) throws Exception { 
    // works perfectly
    TestInterface obj = new TestImplementation();
    obj.TestMethod("str", "str1", "str2");
    // doesn't work
    Method mi = TestInterface.class.getMethod("TestMethod", java.lang.String.class, java.lang.String.class,
            java.lang.String.class);
    mi.invoke(new TestImplementation(), new Object[] { "arg1", "arg2", "arg3" });
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:23:32.953

在 Java 中不存在可选参数。您只能**覆盖**方法或使用[varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。

在您使用[可变参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)的情况下，您是使用参数**明确请求**Method 对象：`String, String, String, Object[]`。

所以你**必须调用**具有相同参数的方法：

```
mi.invoke(new TestImplementation(), new Object[]{"arg1", "arg2","arg3", new Object[0]); 
```

要以一般方式了解您的问题，请参阅[此主题](https://stackoverflow.com/questions/2600854/how-to-work-with-varargs-and-reflection)。

# c# - 将多个 Excel 文件批量复制到数据库

> ID：14830138
> 
> 赞同：0
> 
> 时间：2013-02-12T10:16:36.880
> 
> 标签：c#, database, excel, bulkinsert

我需要读取excel文件中特定范围的数据并将它们上传到数据库中。

所需数据不是从 A1 单元格开始，而是从 A15 开始，A14 是列的标题行。有七列带标题。

（我试图通过**“get_Range”**选项读取单元格）

我们需要读取每个单元格中的数据并在数据库中逐行更新。

特定文件夹中有数千个相同类型的文件。

我正在尝试将其作为 C# 控制台应用程序来实现，因为这只是一次性工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:46:54.610

这是我找到的答案。

第 1 步：遍历源目录中的每个文件。

第 2 步：添加 Excel 互操作参考。并创建 Excel 应用程序类对象，以及工作簿和范围（用于使用的范围）。

第 3 步：使用 Get Range() 函数并读取行。（由于这是特定于问题的解决方案，因此行和列的开始和结束范围是众所周知的）

第 4 步：每个读取的行都可以构造为一个字符串，直到文件末尾。或者可以在读取每一行后进行插入。

第 5 步：获取连接字符串并创建 SQLConnection 对象以执行插入。最好使用事务提交。

完毕。谢谢大家。

# regex - 重写规则：从链接中删除变量的正则表达式

> ID：14830140
> 
> 赞同：1
> 
> 时间：2013-02-12T10:16:38.860
> 
> 标签：regex, apache, mod-rewrite, url-rewriting

我有这样的网址：

**my-party/viewparty/243-party-in-berlin-2013.html**

其中 url 的可变部分是：

**243-party-in-berlin-2013.html**

我需要得到一个像这样的网址：

**events/party-in-berlin-2013.html**

如何使用 apache 重写规则来做到这一点？我已经设法删除了“my-party/viewparty”，但我无法删除变量链接的部分。非常感谢

亚历山德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:31:53.513

以下将映射格式中的任何 URI：

`my-party/viewparty/<digits>-<rest-of-file-name>.html`

至

`/events/<rest-of-file-name>.html`

```
RewriteEngine On
RewriteCond %{REQUEST_URI} my-party/viewparty/\d+-([^\.]*\.html)$
RewriteRule .* /events/%1 [L] 
```

它的工作方式是捕获（括号内的内容）请求uri的最后部分（由美元符号表示），以 结尾`.html`并在其前面`my-party/viewparty/\d+-`，其中`\d+`表示一串数字，具有最小长度一位数。然后它将这个捕获的模式（用 表示`%1`）附加`/events/`到`RewriteRule`.

如果要重定向（[301 Moved Permanently](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#301)）到新的 URI，请使用：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} my-party/viewparty/\d+-([^\.]*\.html)$
RewriteRule .* /events/%1 [R=301,L] 
```

而且，如果该`party-in-berlin-2013`部分不是可变的，那么您可以简单地替换为`RewriteCond`：

```
RewriteCond %{REQUEST_URI} my-party/viewparty/\d+-(party-in-berlin-2013\.html)$ 
```

# cvs - CVS 的 WEB URL

> ID：14830144
> 
> 赞同：0
> 
> 时间：2013-02-12T10:16:42.793
> 
> 标签：cvs

我有一个 weburl，可以从中浏览 cvs 存储库，也可以在单击文件并选择下载时下载文件。

我想将所有文件签出到本地机器上的文件夹中，我该怎么做？

网址是[http://server.org/cgi-bin/cvsweb.cgi/?cvsroot=LAILA](http://server.org/cgi-bin/cvsweb.cgi/?cvsroot=LAILA)

我尝试过使用 WINCVS，但没有成功，有什么方法可以使用一些基于 HTTP 的 CVS 客户端并获取所有源文件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:20:12.943

cvs 服务器的 URL 会略有不同，它应该在您的站点上的某个地方可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:04:01.927

cvs 不提供对存储库的基于 Web 的访问。有基于 Web 的软件可以为您提供有限的存储库视图。假设您提供的示例 url 与您要连接的服务器匹配，则它正在使用[cvsweb](http://www.freebsd.org/projects/cvsweb.html "简历网")。

如果您想使用 cvs 客户端检查所有代码（并可能提交更改），您将必须查看网站是否有任何有关如何访问 cvs 存储库的信息。如果没有，您可能需要联系站点管理员以获取此类信息。

# java - java中如何通过SFTP传输文件？

> ID：14830146
> 
> 赞同：19
> 
> 时间：2013-02-12T10:17:07.003
> 
> 标签：java, file, sftp, edi, b2b

**java中如何通过SFTP传输文件？我想要 SFTP 客户端的示例代码。我想在我的应用程序中嵌入 SFTP 服务器，并且客户端应该能够将文件发送到我的应用程序。**

PS：这是要求 SFTP 客户端。这个问题不是其他两个问题的重复。

找到以下链接以实施 SFTP。

[https://codetransient.wordpress.com/2019/06/22/sftp-secured-file-transfer-protocol/](https://codetransient.wordpress.com/2019/06/22/sftp-secured-file-transfer-protocol/)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-12T10:46:58.843

试试这个代码。

```
public void send (String fileName) {
    String SFTPHOST = "host:IP";
    int SFTPPORT = 22;
    String SFTPUSER = "username";
    String SFTPPASS = "password";
    String SFTPWORKINGDIR = "file/to/transfer";

    Session session = null;
    Channel channel = null;
    ChannelSftp channelSftp = null;
    System.out.println("preparing the host information for sftp.");

    try {
        JSch jsch = new JSch();
        session = jsch.getSession(SFTPUSER, SFTPHOST, SFTPPORT);
        session.setPassword(SFTPPASS);
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        System.out.println("Host connected.");
        channel = session.openChannel("sftp");
        channel.connect();
        System.out.println("sftp channel opened and connected.");
        channelSftp = (ChannelSftp) channel;
        channelSftp.cd(SFTPWORKINGDIR);
        File f = new File(fileName);
        channelSftp.put(new FileInputStream(f), f.getName());
        log.info("File transfered successfully to host.");
    } catch (Exception ex) {
        System.out.println("Exception found while tranfer the response.");
    } finally {
        channelSftp.exit();
        System.out.println("sftp Channel exited.");
        channel.disconnect();
        System.out.println("Channel disconnected.");
        session.disconnect();
        System.out.println("Host Session disconnected.");
    }
} 
```

# apache - apache flume hdfs sink 可以接受动态路径写入吗？

> ID：14830147
> 
> 赞同：5
> 
> 时间：2013-02-12T10:17:07.910
> 
> 标签：apache, hadoop, hdfs, flume

我是 apache 水槽的新手。
我正在尝试查看如何获取 json（作为 http 源），对其进行解析并根据内容将其存储到 hdfs 上的动态路径中。
例如：
如果 json 是：

```
[{   
  "field1" : "value1",
  "field2" : "value2"
}] 
```

那么 hdfs 路径将是：
/some-default-root-path/value1/value2/some-value-name-file
是否有这样的水槽配置可以让我这样做？

这是我当前的配置（通过http接受json，并根据时间戳将其存储在路径中）：

```
#flume.conf: http source, hdfs sink

# Name the components on this agent
a1.sources = r1
a1.sinks = k1
a1.channels = c1

# Describe/configure the source
a1.sources.r1.type =  org.apache.flume.source.http.HTTPSource
a1.sources.r1.port = 9000
#a1.sources.r1.handler = org.apache.flume.http.JSONHandler

# Describe the sink
a1.sinks.k1.type = hdfs
a1.sinks.k1.hdfs.path = /user/uri/events/%y-%m-%d/%H%M/%S
a1.sinks.k1.hdfs.filePrefix = events-
a1.sinks.k1.hdfs.round = true
a1.sinks.k1.hdfs.roundValue = 10
a1.sinks.k1.hdfs.roundUnit = minute

# Use a channel which buffers events in memory
a1.channels.c1.type = memory
a1.channels.c1.capacity = 1000
a1.channels.c1.transactionCapacity = 100

# Bind the source and sink to the channel
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T04:56:43.213

[解决方案在hdfs sink](http://flume.apache.org/FlumeUserGuide.html#hdfs-sink)的水槽文档中：

这是修改后的配置：

```
#flume.conf: http source, hdfs sink

# Name the components on this agent
a1.sources = r1
a1.sinks = k1
a1.channels = c1

# Describe/configure the source
a1.sources.r1.type =  org.apache.flume.source.http.HTTPSource
a1.sources.r1.port = 9000
#a1.sources.r1.handler = org.apache.flume.http.JSONHandler

# Describe the sink
a1.sinks.k1.type = hdfs
a1.sinks.k1.hdfs.path = /user/uri/events/%{field1}
a1.sinks.k1.hdfs.filePrefix = events-
a1.sinks.k1.hdfs.round = true
a1.sinks.k1.hdfs.roundValue = 10
a1.sinks.k1.hdfs.roundUnit = minute

# Use a channel which buffers events in memory
a1.channels.c1.type = memory
a1.channels.c1.capacity = 1000
a1.channels.c1.transactionCapacity = 100

# Bind the source and sink to the channel
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1 
```

和卷曲：

```
curl -X POST -d '[{  "headers" : {           "timestamp" : "434324343", "host" :"random_host.example.com", "field1" : "val1"            },  "body" : "random_body"  }]' localhost:9000 
```

# ios - 为什么不应用 AVMutableVideoCompositionInstruction？

> ID：14830148
> 
> 赞同：2
> 
> 时间：2013-02-12T10:17:10.287
> 
> 标签：ios, video, avfoundation

我正在使用 AVAssetExportSession 将多个视频录制连接到一个条目中。

由于用户可以在录制期间在前置和后置摄像头之间切换，因此录制的方向会切换，这样如果录制包含一个使用前置摄像头的剪辑和一个使用后置摄像头的剪辑，则连接的视频将显示第一个剪辑使用预期的方向和倒置的第二个（反之亦然）。

我知道我需要在导出器上设置 videoComposition 指令，但我对将任何旋转应用于导出的视频并不感到高兴。

在下面的示例中，我设置了 90 度的虚拟旋转变换，只是为了尝试强制进行全面更改，但我导出的视频不受影响。. . 我猜我错过了一些明显的东西，但我看不到什么，谁能看到我的错误？

```
 AVMutableComposition *composition = [AVMutableComposition composition];
    AVAssetExportSession *assetExport = [AVAssetExportSession exportSessionWithAsset:composition presetName:AVAssetExportPresetPassthrough];
    NSMutableArray *instructions = [NSMutableArray new];

    AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    CGAffineTransform transformToApply=CGAffineTransformMakeRotation(90.0);

    for (NSURL *path in filePaths) {
        NSLog(@"%@", path);
        AVURLAsset *asset =[AVURLAsset assetWithURL:path];

        CMTime atTime = composition.duration;
        [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration)
                                       ofTrack:[[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                                        atTime:atTime error:&error];

        AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:[[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]];
        [layerInstruction setTransform:transformToApply atTime:kCMTimeZero];            
        AVMutableVideoCompositionInstruction * videoTrackInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
        videoTrackInstruction.timeRange = CMTimeRangeMake(atTime, asset.duration);
        videoTrackInstruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
        [instructions addObject:videoTrackInstruction];

        [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration)
                                       ofTrack:[[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                                        atTime:atTime error:&error];
    }
    AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
    videoComposition.instructions = instructions;
    videoComposition.frameDuration = CMTimeMake(1, compositionVideoTrack.naturalTimeScale);
    videoComposition.renderSize = compositionVideoTrack.naturalSize;
    assetExport.videoComposition = videoComposition; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:10:34.927

男生错误，变换应该是弧度，而不是度数 - [https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html)

# android - Eclipse 重启时数据丢失

> ID：14830150
> 
> 赞同：0
> 
> 时间：2013-02-12T10:17:11.863
> 
> 标签：android, database, eclipse, sqlite

每次我**重新启动系统并在****Eclipse**上运行我的应用程序时，**数据库最初都是空**的。它不保留我以前的数据。我创建自己的**数据库（内部）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:21:48.640

假设您的意思是在虚拟设备上：

![在此处输入图像描述](../Images/3c2841c49ac5b7e6dceb1b809dd51c83.png)

如果您选中了“擦除用户数据”，请从 AVD-> 开始检查。

# c# - MvvmCross：在插件中使用 InvokeOnMainThread

> ID：14830155
> 
> 赞同：8
> 
> 时间：2013-02-12T10:17:25.423
> 
> 标签：c#, multithreading, xamarin.ios, xamarin.android, mvvmcross

我正在扩展 Messenger 插件的功能，这将使在主线程上传递消息而不是在后台线程上发生的所有事情成为可能。

我已经扩展`BaseSubscription`了一个`bool`，因为知道这个订阅需要在主线程上发送消息。现在我需要能够在订阅的实际实现中使用`InvokeOnMainThread`方法`TypedInvoke`。

当我查看引用的 MvvmCross 程序集时，我看到它`Cirrious.MvvmCross.ViewModels.MvxMainThreadDispatchingObject`包含该`InvokeOnMainThread`方法，所以问题是如何获取该对象以便调用该方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:26:38.633

获取 UI 线程的最简单方法是继承自`MvxMainThreadDispatchingObject`

如果层次结构不允许您，那么下一个最简单的方法是添加`IMvxServiceConsumer`标记接口，然后使用`GetService<T>`扩展方法：

```
public class MyClass 
   : MyBaseClass
   , IMvxServiceConsumer
{
    // ...

    private bool DoStuff(Action stuff)
    {
        var dispatcherProvider = this.GetService<IMvxMainThreadDispatcherProvider>();
        var dispatcher = dispatcherProvider.Dispatcher;
        if (dispatcher == null) {
           return false;
        }

        return dispatcher.RequestMainThreadAction(action);
    }
 } 
```

`GetService<T>()`如果愿意（如果您不想使用`IMvxServiceConsumer`） ，也可以将静态方法作为静态方法调用。

* * *

笔记：

*   如果您在“Apps”和“Services”/“BackgroundAgents”之间共享代码，则需要非常小心地检查错误情况 - 并不总是有可用的 UI 线程。

*   Android 特别特别 - UI 线程只能通过当前前台活动真正访问 - 目前 MvvmCross 在`IMvxAndroidCurrentTopActivity`服务中跟踪此（通过 Activity OnStart 和 OnResume 挂钩） - 但不能保证您将始终运行前台活动 - 例如如果您的代码曾经加载非 MvvmCross 活动，那么显然 MvvmCross 不会知道这些。

*   您不应该保留对 Dispatcher 的引用 - 如果这样做，那么您可能会将 Android Activity 保留在内存中，超出其自然生命周期

*   我想`DoStuff`也可以将其放入扩展方法中-也许我会在 v3 中添加它（[https://github.com/slodge/MvvmCross/issues/150](https://github.com/slodge/MvvmCross/issues/150)）

# php - mysql Join查询中的问题

> ID：14830157
> 
> 赞同：0
> 
> 时间：2013-02-12T10:17:29.697
> 
> 标签：php, mysql, inner-join

我正在开发一个社交网站。我有一个名为的选项`alerts`，它显示待处理的好友请求和未读消息。我的查询如下：

```
SELECT
  sk_friends.frndship_from_user_id,
  sk_messages.msg_from_user_id,
  sk_messages.msg_text,
  sk_messages.msg_date 
FROM
  sk_friends INNER JOIN sk_messages
WHERE 
  sk_messages.msg_to_user_id = '$user_id'
  AND sk_friends.frndship_to_user_id ='$user_id'  
  AND sk_friends.frndship_status = 'pending'
  AND sk_messages.msg_status='unread'
ORDER BY 
  sk_friends.fndship_date ASC,
  sk_messages.msg_date ASC; 
```

*   sk_friends 和 ak_messages 是表。
*   msg_from_user_id 是发件人的id
*   frndship_from_user_id 是发送请求的用户的id
*   $user_id 是登录用户的id

每行数据出现两次。我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:21:49.477

您的内部联接没有 ON 子句。尝试添加一个，这应该会消除双重结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:03:17.147

尝试这个 ：

```
SELECT 
    sf.frndship_from_user_id,
    sm.msg_from_user_id,
    sm.msg_text,sm.msg_date 
FROM 
    sk_friends sf ,
    sk_messages sm 
WHERE 
    sm.msg_to_user_id = sf.frndship_to_user_id AND
    sm.msg_to_user_id = '$user_id'  AND     
    sf.frndship_status = 'pending' AND 
    sm.msg_status='unread' 
ORDER BY 
    sf.fndship_date ASC,sm.msg_date ASC; 
```

# mysql - 什么是连接 3 个表的 Mysql 查询？

> ID：14830162
> 
> 赞同：0
> 
> 时间：2013-02-12T10:17:50.370
> 
> 标签：mysql, sql, join

```
 CREATE TABLE `entity1` (
  `entity_id` varchar(20) NOT NULL DEFAULT '',
  `name` varchar(20) ,
  `version` varchar(20) ,
  PRIMARY KEY (`entity_id`));

 CREATE TABLE `ent_att` (
  `att_id` varchar(20) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  `valu` varchar(20) NOT NULL DEFAULT '',
  PRIMARY KEY (`valu`),
   FOREIGN KEY (`att_id`) REFERENCES `entity1` (`entity_id`)); 

CREATE TABLE `perf` (
  `ent_id` varchar(20) ,
  `state` varchar(20) ,
  `status` varchar(20) ,
  `perf_id` varchar(20) ,
   FOREIGN KEY (`ent_id`) REFERENCES `entity1` (`entity_id`)); 
```

第一个表的主键是其他两个表的外键，我想从所有表中检索 entity_id 的所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:26:25.913

试试这个：

```
select et.entity_id,et.name,et.version,
ett.name as ent_att_name,ett.valu,pf.state,pf.perf_id,pf.status from entity1 et 
inner join ent_att ett 
on et.entity_id=ett.att_id
inner join perf pf
on et.entity_id=pf.ent_id 
```

# highcharts - Grouped bars have different spacing in Highcharts. Why?

> ID：14830169
> 
> 赞同：0
> 
> 时间：2013-02-12T10:18:26.113
> 
> 标签：highcharts, bar-chart

I have a bar chart with one group of five items. Strangely, the distance between the bars within the same group is different. I tried out almost all imaginable settings as on the references list, but in vain.

[Here is the graph](http://geodev.grid.unep.ch/megatrends/data/forest_change.php).

The PlotOptions code is this:

```
plotOptions:
{
  series:
  {
    borderWidth: 0,
    shadow: false,
    pointWidth: 10
  }
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:13:01.717

问题出在`pointWidth`属性上-您的图表对于该值来说太小了，将其删除或更改为〜7。

# javascript - OAuth2 not working on IE9

> ID：14830177
> 
> 赞同：2
> 
> 时间：2013-02-12T10:18:35.963
> 
> 标签：javascript, jquery, oauth-2.0, google-oauth

In Chrome/FF the following example works fine but there is a problem in IE9.

```
var clientId = 'XXXXXXXXX.apps.googleusercontent.com';
        var apiKey = 'XXXXXXXX_XXXXXXXXXXXXXXXh1o';
        var scopes = 'https://www.googleapis.com/auth/calendar';

        function handleClientLoad() {
            $(".modal").show();
            gapi.client.setApiKey(apiKey);
            window.setTimeout(checkAuth, 1);
        }

        function checkAuth() {
            gapi.auth.authorize({ client_id: clientId, scope: scopes, immediate: true },
                handleAuthResult);
        }

        function handleAuthResult(authResult) {
            var authorizeButton = document.getElementById('authorize-button');
            if (authResult) {
                authorizeButton.style.visibility = 'hidden';
                showPanel();
            } else {
                authorizeButton.style.visibility = '';
                authorizeButton.onclick = handleAuthClick;
            }
            $(".modal").hide();
        }

        function handleAuthClick(event) {

            gapi.auth.authorize({ client_id: clientId, scope: scopes, immediate: false }, handleAuthResult);

            return false;
        }

        function showPanel() {
            $("div#mainPanel").show("fast");

        }

        function makeApiCall() {

            gapi.client.load('calendar', 'v3', function () {
                var request = gapi.client.calendar.events.list({
                    'calendarId': 'primary'
                });

                request.execute(function (resp) {
                    for (var i = 0; i < resp.items.length; i++) {
                        var li = document.createElement('li');
                        li.appendChild(document.createTextNode(resp.items[i].summary));
                        document.getElementById('events').appendChild(li);
                    }
                });
            });

        } 
```

for some reason the `authResult` variable is null in IE9 and `handleAuthClick` click event popup a blank window instead of the Google credentials info.

What's the problem with IE9?

# c# - 在应用停用期间取消任务时的竞争条件

> ID：14830178
> 
> 赞同：1
> 
> 时间：2013-02-12T10:18:42.767
> 
> 标签：c#, exception, windows-phone-8, async-await, lifetime

我正在尝试在我的 Windows Phone 8 应用程序中使用基于任务的异步模式。想法是所有长时间运行的操作都引用取消令牌，并且在应用程序中有一个存储所有这些令牌的地方。当应用程序接收`Deactivated`到事件时，它会遍历所有令牌并取消它们。

问题是具有长时间运行操作的线程未计划在应用程序停用时运行，这意味着如果我尝试`CancellationToken.ThrowIfCancellationRequested();`在该线程中使用，它只会在应用程序恢复时调用，而不是在应用程序停用时调用。当然，这不是我想要的。如果我正在做一个简单的技巧`token.Register(() => Thread.Sleep(1000));`，即暂停调用取消的线程片刻，那么第二个线程有机会运行，并且一切都像魅力一样被取消。然而，这是一个肮脏的黑客，我不想在我的应用程序中使用它。

问题是如何确保在操作取消完成时应用程序没有退出？我假设合作取消的标志是抛出 OperationCancelledException，但是如何等待它，特别是如果我只有对 CancellationTokenSource 的引用，而不是对 Task 对象的引用？有其他方法可以知道吗？

非常感谢提前！

PS如果您需要更多代码来帮助我，请问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:07:56.567

我认为`CancellationToken`在您的情况下存储所有 s 还不够，您还需要存储相应`Task`的 s。在您的`Deactivated`处理程序中，您将取消所有标记，然后取消所有`await`存储`Task`的 s（捕获`OperationCancelledException`s）。（我不确定如何`Deactivated`使用`async`，您可能需要一些东西让系统知道您实际上还没有完成停用。）

# boost - 在boost库中计算Voronoi图的边界框是什么

> ID：14830182
> 
> 赞同：9
> 
> 时间：2013-02-12T10:19:03.753
> 
> 标签：boost, bounding-box, voronoi

最近我正在尝试使用库 boost 来计算 Voronoi 图。该库中的算法基于扫描线。但它不是基于边界框来生成图表。这个库中的一些 Voronoi 边缘是无限的，应该被剪裁。现在我对这些无限的边缘感到困惑。因为它们应该依赖于一个边界框，请看下图作为示例：

如果边界框是内部的白色矩形，那么带有黑色十字的四个线段是无限的。否则，如果边界框是外部黑色矩形，那么这四条线是有限的，并且出现了一些其他边缘。

有人能告诉我这个图书馆里有什么吗？我找不到这个问题的答案。我真的需要一个边界框来定义这些单元格。

![在此处输入图像描述](../Images/b5d9731eb38ae082752dd2dc2338e374.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T22:24:02.437

我是 Voronoi 图书馆的作者。该实现为整个无限二维平面生成 Voronoi 图。剪辑功能不是库的一部分，因为它太模糊了。你能更详细地解释你的用例吗？

澄清与 Voronoi 功能相关的任何问题的更好方法是写信至 boost@lists.boost.org，电子邮件标题以“[Polygon]”或“[Voronoi]”为前缀。

# c# - Caliburn Micro - ActvateItem 在新的开发电脑上编译时停止工作

> ID：14830184
> 
> 赞同：0
> 
> 时间：2013-02-12T10:19:04.387
> 
> 标签：c#, wpf, caliburn.micro

我对使用 caliburn 微框架的小型 32 位应用程序有奇怪的问题。当我在我的新计算机（win 7 pro 64bit，vs 2010 pro）上（成功）编译它时，它可以工作，直到我想使用 ActivateItem 更改视图。然后没有任何问题发生，但视图没有改变。当我在旧电脑（win 7 ent 32bit，vs 2010 pro）上编译它时，它可以工作。

我知道这不是很清楚的“问题”，但我想检查是否有人有类似的问题，我真的无法更恰当地描述它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:14:52.093

我在我的代码中发现了重大缺陷。

我为我的一个应用内视图模型提供了 [Export(typeof(IShell))] 属性，而它应该只为 shell 视图模型声明。然后在为 IShell 调用 GetInstance 时引起了问题。

```
protected override object GetInstance(Type serviceType, string key)
    {
        string contract = string.IsNullOrEmpty(key) ? AttributedModelServices.GetContractName(serviceType) : key;
        var exports = container.GetExportedValues<object>(contract);

        if (exports.Count() > 0)
            return exports.First();

        throw new Exception(string.Format("Could not locate any instances of contract {0}.", contract));
    } 
```

它在旧电脑上编译时返回了预期的 Shell 视图模型，但在其他地方编译时返回了意外的。

# arrays - MongoDB: Single result when searching array value

> ID：14830185
> 
> 赞同：2
> 
> 时间：2013-02-12T10:19:04.657
> 
> 标签：arrays, mongodb, search

I have a document containing a list of keywords which I want to search on, however Mongo only ever returns a single result even though there are many documents which contain the same keyword.

The documents look something like this:

```
{
    _Id: 51192567f5e65101d471c46b
    Name: "Cat",
    KeyWords: ["cat", "animal", "small"]
} 
```

I am searching the database in the mongo shell using the following:

```
db.Resources.find({"KeyWords":"cat"}) 
```

I wanted to get back all documents where the KeyWords array contains cat (there are many), however I just get one document.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:32:11.647

我刚刚检查了我的本地数据库，所以请检查您的结构 ![MongoDB](../Images/f28f3a546521daf90815cb631615adca.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:37:34.073

感谢您的回复；经过多次搜索，事实证明我用来加载数据的程序中有一段代码只存储任何关键字的一次出现，所以虽然所有文档似乎都有很多关键字，但每个关键字只会出现在一个文件中！！在程序将它们剥离之前，我正在查看在文档之间重复关键字的原始数据。

数据加载失败！！！

# css - 如何在背景上添加不透明度？

> ID：14830186
> 
> 赞同：0
> 
> 时间：2013-02-12T10:19:07.573
> 
> 标签：css

如何为以下 CSS 语句添加不透明度？

```
background: none repeat scroll 0 0 #205081; 
```

css2有可能吗？否则我怎样才能从 css3 那里添加不透明度声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:23:32.850

使用**[rgba()](https://developer.mozilla.org/en-US/docs/CSS/color_value#rgba%28%29_)**。在你的情况下

> 背景：rgba(32, 80, 129, 1)

最后一个数字是不透明度。1 表示完全不透明，0 表示不可见。因此，如果您想要 50% 不透明，它将是

> 背景：rgba(32, 80, 129, 0.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:45:16.320

遗憾的是，由于全球有各种版本和浏览器类型，没有一个 CSS 条目可以在没有 JavaScript 干预的情况下在所有浏览器上兼容。但是，您可以使用多种样式技术，并在头部使用“if IE 7”HTML 来解决不喜欢现代代码的浏览器。

以下是您应该考虑的各种方法，以实现跨浏览器的最大兼容性。

# 为旧浏览器添加替代方法

如果您想在 Internet Explorer 的更高版本中使用透明背景，最简单的方法是使用旧代码为旧版本的浏览器设置样式。您可以通过在

```
<head>
</head> 
```

HTML 或 PHP 文件的部分。

**头部内的 HTML**

如果您还没有以下代码，您应该添加它。现在许多框架和 CMS 都包含此内容，因此只需在编辑之前查看源代码，并且仅在尚未添加时才添加。

```
<!--[if lt IE 7 ]><html class="ie ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8 no-js" lang="en"> <![endif]-->
<!--[if IE 9 ]><html class="ie ie9 no-js" lang="en"> <![endif]--> 
```

**制作一个透明的 50% PNG 文件**

只需加载任何 photoshop 或任何好的替代品并制作一个 1x1 像素的新文件，然后添加一个新图层并删除背景。然后在图层内填充您要使用的颜色，然后使该图层不透明度为 50%。然后将其保存为 PNG 并上传到您的主机。如果您担心页面上的加载时间，那么您可以使用 PNGCrush 或 Smush.it 将该 PNG 压缩到小于 0.5kb。

**在你的 CSS 添加这个（你需要使用 IF 7 / 6 等）**

```
.ie6, .ie7, .ie8 .your-div-class-or-id {
    background: transparent;
    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=background.png,sizingMethod='scale');
} 
```

}

# 新浏览器的 CSS

您应该尽可能为较新的浏览器使用较新的代码，并且不使用 PNG 来提供透明背景，这意味着我们不会通过添加文件获取来增加页面加载时间。只需添加：

```
background: rgba(32, 80, 129, 0.5) 
```

这将适用于现代浏览器，例如 IE9+、Firefox、Chrome、Safari

**您应该结合使用现代和旧 CSS**

请注意，您同时使用了 RGBA 和 AlphaImageloader 这两个 CSS 元素，因此仅在绝对需要时才使用 png 文件，我知道很多人不赞成将 PNG 与不透明度一起使用，但您只能在最坏的情况下使用它而不加载它当使用较新的浏览器时。

# php - 在 Bluehost CPanel 中使用脚本创建电子邮件帐户

> ID：14830193
> 
> 赞同：3
> 
> 时间：2013-02-12T10:19:46.567
> 
> 标签：php, cpanel, bluehost

我正在尝试使用 php 脚本在 bluehost cpanel 中创建电子邮件帐户。我为此尝试了 XML API，但它给出了“拒绝访问”错误。

现在我正在尝试使用以下代码做同样的事情，但没有成功。我可以登录 CPanel 但无法创建电子邮件帐户。

```
$login = "https://my.bluehost.com/cgi/account/cpanel";
$time=time();
$c = curl_init();
curl_setopt($c, CURLOPT_URL, $login);
curl_setopt($c, CURLOPT_COOKIEJAR, "cookies.txt");
curl_setopt($c, CURLOPT_COOKIEFILE, "cookies.txt");
curl_setopt($c, CURLOPT_POST, 1);
curl_setopt($c, CURLOPT_POSTFIELDS, "ldomain=$username&lpass=$password&l_redirect=/cgi-bin/cplogin&l_server_time=$time&l_expires_min=0");
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);
$login_done1 = curl_exec($c);
print_r($login_done1);

   $email= "https://$cpanel:2083/frontend/bluehost/mail/doaddpop.html";
    curl_setopt($c, CURLOPT_URL, $email);s
    curl_setopt($c, CURLOPT_COOKIEJAR, "cookies.txt");
    curl_setopt($c, CURLOPT_COOKIEFILE, "cookies.txt");
    curl_setopt($c, CURLOPT_POST, 1);
    curl_setopt($c, CURLOPT_POSTFIELDS, "email=ddddd&domain=test.org&password=test@1617&password2=test@1617&quota=250&new_email_submit=Create");
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);
    $login_done2 = curl_exec($c);
    print_r($login_done2); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:30:55.247

我已经就这个问题与 bluehost 打过交道，主要问题是 Bluehost 帐户不授予对 su 的访问权限。超级用户。因此，您无法从任何后门访问 Cpanel，甚至您自己的后门也不行。如果网站所有者希望允许用户创建电子邮件帐户，这将是一个很大的痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T19:41:41.843

我想出了一种方法来处理 BlueHost 中的 cpanel 并创建一个电子邮件帐户

`$account_user`将是登录 Blue Host 的默认用户名；它可能与它相同，`$cp_user`但绝对不允许它成为 root。

```
 private function createEmail($email, $password) {
    $cp_user = "USERNAME";
    $cp_pwd = "PASSWORD";
    $domain = "yourdomain.com"
    $quota = "500" // This is in Megabytes. 0 Would be unrestricted email box size.
    $account_user = "username"
    $url = "DOMAIN N OR IP :2087 //Your Port";
    $php = "/json-api/cpanel?cpanel_jsonapi_user=".$account_user."&cpanel_jsonapi_version=2&cpanel_jsonapi_module=Email&cpanel_jsonapi_func=addpop&email=" . $email . "&password=" . $password . "&quota=".$quota."&domain=".$domain;
    $string1 = "https://" . $cp_user . ":" . $cp_pwd . "@" . $url . $php;
    $blueHost = fopen($string1, "r");
    fclose($blueHost);
    return $blueHost;
} 
```

登录后在 Bluehost.com 中创建电子邮件用户时，只需进行一些试验和错误并检查 JSON API 调用。希望这对某些人有所帮助，因为 Blue Host 没有任何支持，否则我在设置电子邮件帐户时遇到了麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T21:05:46.563

您可以直接在 chrooted 环境中实现这一点（SSH 必须通过 Bluehost / Hostmonster CPANEL 启用）。[只需将 127.0.0.1 指定为 $cpanel，您就不需要使用https://my.bluehost](https://my.bluehost) ... 登录页面进行任何先前的身份验证。它适用于共享主机以及专用主机。

虽然您需要通过 GET 进行身份验证：

```
 curl http://username:password@127.0.0.1:2082/frontend/bluehost/mail/doaddpop.html?blabla 
```

这是一个有用的概述，您可以翻译成您的语言。请用谷歌搜索 doaddfwd.html dodelpop、dodelfwd 等。 [http://beto.euqueroserummacaco.com/blog/criando-contas-de-email-no-cpanel-com-curl/](http://beto.euqueroserummacaco.com/blog/criando-contas-de-email-no-cpanel-com-curl/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-15T06:41:08.877

已经提出的另一种方法是允许用户创建他们想要的电子邮件并将其存储到 mysql 之类的数据库中。然后创建并设置一个 cron 作业，该作业将定期检查该数据库是否有新电子邮件，并通过 cron 作业将电子邮件创建到 cpanel 中。在 bluehost 中创建电子邮件帐户实际上非常麻烦。2 个原因，1 就像我之前提到的 -su 块。但他们也提供了一个 cpanel 转售。所以它真的不是cpanel的完整许可证。因为 cpanel 本身确实具有创建电子邮件帐户和创建子域的功能。到目前为止，我发现提供真正 cpanel 的只有 Hostgator 和 Godaddy，不过我更喜欢 bluehost。几乎只有其他创建电子邮件帐户的方法是在实际文件结构中创建它们。

# node.js - how to find specific value is in key or not

> ID：14830194
> 
> 赞同：1
> 
> 时间：2013-02-12T10:19:47.523
> 
> 标签：node.js, mongodb

I am trying to find data in mongodb. i am having data like this

```
{"name":"xxxx","product":"laptop,phone,mobile"}
{"name":"yyyy","product":"phone,iphone,pendrive"} 
```

i am trying to find "phone" is in product key so i have tried this command in terminal

```
db.collection.find({"product": /phone/}); 
```

it is working fine but it is not working in my application.so i have tried dynamically like that in my application.

```
var key=phone;
var name="/"+key+"/"; 
collection.find({"product":name}).toArray(function(err,result)
{
   console.log(result.length);
}); 
```

but i am always getting 0 length only so how to use that dynamically?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:36:19.523

您每次都在搜索 2 种不同的东西。在终端中，您正在使用正则表达式搜索单词 phone 的出现。在您的应用程序中，您正在搜索字符串文字“/phone/”的出现。您还需要在应用程序的 mongodb 查询中进行正则表达式搜索：

```
var key = 'phone';
collection.find({"product":{ $regex: key }).toArray(function(err,result) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:23:11.323

```
var key = 'phone';
var reg = RegExp('.*'+key+'.*','gi');
collection.find({"product":{ $regex: reg }).toArray(function(err,result){

} 
```

如果您的密钥出现在字符串之间，这也将起作用

# qt - QTableView中左右点击的区别

> ID：14830201
> 
> 赞同：1
> 
> 时间：2013-02-12T10:20:11.860
> 
> 标签：qt, mouseevent, qtableview

我有一个 QTableView，左键和右键单击鼠标都会导致一些工作。

右键单击应启动上下文菜单，左键应打开另一个进程。

为此，我在 QMainWindow 中使用以下连接

```
connect(Table , SIGNAL( customContextMenuRequested( const QPoint& ) ),this, SLOT( tableContextMenu( const QPoint& ) ) );
 connect(Table , SIGNAL (clicked ( const QModelIndex&)), this, SLOT(test())); 
```

问题很简单。由于我使用`clicked()`信号来捕获左键单击 - 右键单击​​也被捕获。因此，如果我单击右键单击按钮**以及上下文菜单**，**则为左键单击保留的操作也会发生**。

我该如何避免这种情况？好心提醒。谢谢。

**编辑**

我的代码设置如下：

```
Table = new QTableView(this);
TableLayout *t = new TableLayout();
Table->setModel(t);
Table->setContextMenuPolicy(Qt::CustomContextMenu);
connect(Table , SIGNAL( customContextMenuRequested( const QPoint& ) ),this, SLOT( tableContextMenu( const QPoint& ) ) ); 
```

这就是我对右键单击上下文菜单的操作方式，所有内容都在`P14MainWindow`构造函数中定义，构造函数是`QMainWindow`. 现在我应该在哪里重新实现`MouseReleaseEvent`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:37:36.143

启动上下文菜单重新实现`QTableView::contextMenuEvent(QContextMenuEvent* e)`，并类似地重新实现`QTableView::mouse...Event(QMouseEvent* event)`以捕获鼠标事件。

然后用于`QTableView::indexAt(const QPoint& pos) const`在点击站点返回模型索引。

下面是一个左键处理的例子：

```
void Table::mouseReleaseEvent(QMouseEvent* event)
{
    QTableView::mouseReleaseEvent( event );

    if ( event->button == Qt::LeftButton ) {
        test();
    }
} 
```

# java - 一个异步调用而不是两个 GWT

> ID：14830203
> 
> 赞同：0
> 
> 时间：2013-02-12T10:20:17.890
> 
> 标签：java, gwt, event-handling

我有一个文本区域和一个按钮。当我在文本区域中放置一些文本（在粘贴浏览事件时，所有其他事件都被忽略）或单击按钮时，相同的调用将通过文本区域的值更改处理程序发送到服务器，然后单击按钮的处理程序。如果数据错误，服务器会抛出异常并作为消息框返回给客户端。

因此，当我将一些数据放到文本区域并单击一个按钮时，会出现两个消息框。有没有办法让这种情况出现一个消息框？

一些代码作为问题的示例：

```
textArea.addValueChangeHandler(new ValueChangeHandler<String>() {
    @Override
    public void onValueChange(ValueChangeEvent<String> event) {
        fireHandlers();
    }
});

button.addClickHandler(new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) {
        fireHandlers();
    }
});

//............

private void fireHandlers() {
    for (MyProcessHandler handler : myHandlersList) {
    handler.handle();
    }
}

//............

public static interface MyProcessHandler {
    public void handle();
}

//............

addMyProcessHandler(new MyProcessHandler() {
    @Override
    public void handle() {
        AsyncCallback<String[]> ac = new AsyncCallbackAdapter<String[]>() {
            public void onSuccess(String[] data) {
                //post processing
            }

            @Override
            public void onFailure(Throwable throwable) {
                super.onFailure(throwable);
            }
        };
        RemoteCall.getMyService().getResultFromData(textArea.getData(), ac);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:51:38.710

我认为 Alexey 所说的是这样的：

```
private boolean eventFired = false;

textArea.addValueChangeHandler(new ValueChangeHandler<String>() {
    @Override
    public void onValueChange(ValueChangeEvent<String> event) {
        fireHandlers();
    }
});

button.addClickHandler(new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) {
        fireHandlers();
    }
});

//............

private void fireHandlers() {
    if(!eventFired) {
        eventFired = true;
        for (MyProcessHandler handler : myHandlersList) {
            handler.handle();
        }
    }
}

//............

public static interface MyProcessHandler {
    public void handle();
}

//............

addMyProcessHandler(new MyProcessHandler() {
    @Override
    public void handle() {
        AsyncCallback<String[]> ac = new AsyncCallbackAdapter<String[]>() {
            public void onSuccess(String[] data) {
                eventFired = false;
                //post processing
            }

            @Override
            public void onFailure(Throwable throwable) {
                super.onFailure(throwable);
                eventFired = false;
            }
        };
        RemoteCall.getMyService().getResultFromData(textArea.getData(), ac);
    }
}); 
```

决定将`eventFired=false`代码放在哪里。也许在处理来自服务器的答案之后，也许在等待服务器时启动异步调用以启用另一个操作之后。

# java - JMSBytesMessage to string and String to JMSBytesMessage typecasting

> ID：14830206
> 
> 赞同：2
> 
> 时间：2013-02-12T10:20:20.667
> 
> 标签：java, jakarta-ee

I have a requirement to write a message to the MQ and if it fails due to any reason, I have to write that message into the text file. I have to keep on adding the messages to this text file until the messages starts flowing to MQ again. Once the messages starts flowing, I have to check the text file and load all the pending messages from it and delete them from the text file.

```
try{
    sender.send(mqMessage); where mqMessage is of JMSBytesMessage
} 
```

now if the sending of message failed, I have to write this into a text file

```
catch(JMSException mqe)
       {
           mqe.printStackTrace();
           try{

                String msgString= mqMessage.toString();
                FileWriter fstream = new FileWriter(filePath);
                BufferedWriter out = new BufferedWriter(fstream);
                out.append(msgString);
                out.close();
              }
           catch (Exception e){//Catch exception if any
                  System.err.println("Error: " + e.getMessage());

                }

       } 
```

Once the messages starts flowing I have to read the textfile and load all these message inside the 1st try block after `sender.send(mqMessage)`

I am reading the complete file content and after splitting the messages and storing them to a string how can I typecast that string into the `JMSBytesMessage` type in order to put them on MQ.

I have mentioned the complete scenario here because I wanted to tell that though I wanted to convert `JMSBytesMessage` to string and then again String to `JMSBytesMessage` but I dont want to change the actual content while doing both the type-castings.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:28:22.173

字节消息到文本

```
int length = new Long(message.getBodyLength()).intValue();
byte[] b = new byte[length];
message.readBytes(b, length);
String text = new String(b, "UTF-8"); 
```

文本到字节消息

```
byte[] b = mytext.getBytes("UTF-8");
BytesMessage message = session.createBytesMessage();
message.writeBytes(bArray); 
```

# json - 是否应该在 API 中省略空字段？

> ID：14830209
> 
> 赞同：4
> 
> 时间：2013-02-12T10:20:29.130
> 
> 标签：json, api

这可能是一个非常简单的问题，但我似乎无法找到明确的答案。我想从 API 最佳实践的角度知道，您应该发送空字段（空字符串或 null）还是应该从 API 中完全忽略它们？

我查看了其他 API，可以看到正在发送的空字段。此外，对我来说，通过空字段发送也向消费者展示了 API 中可用的内容，但另一方面，它是无缘无故的额外数据。

任何人都知道是否有正确的答案/最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:26:06.413

我不确定这是否会被所有人认为是最佳实践，但根据我的经验，最好的选择是您只需要客户端发送他们需要的数据。因此，如果您有可以为空白或 null 的字段，那么它们不需要由请求者发送。

# javascript - How does SquishIt deal with global variables and functions

> ID：14830215
> 
> 赞同：0
> 
> 时间：2013-02-12T10:20:45.130
> 
> 标签：javascript, squishit

I'm not sure if I will use squishIt page by page or use one combined file with all JS in the project. I'm a bit worried that some global variables in my js files will crash into each other. Does squishIt deal with this?

I know that there shouldn't be any global variables. But isn't me that build the project so here I am with alot of JS and with global variables.

Quite same question about functions. What happens if I have the same name of some functions in different JS files and the combined them into one?

Is .ForeRelease() purpose to make it work without changeing debug into false in web.config?

# python - 如何使用 xml.dom.minidom python 设置值

> ID：14830216
> 
> 赞同：0
> 
> 时间：2013-02-12T10:20:54.063
> 
> 标签：python, xml

我有一个`c`具有值的变量，`"test"`我试图`Cookie`通过`xml.dom.minidom`在 python 中使用将该值分配给属性。我尝试了以下代码：

```
l='<Lg Cookie=""/>'
dom = parseString(l)

L=dom.getElementsByTagName('Lg')[0]
lgs = L.setAttribute("Cookie",c)

print lgs 
```

什么都不给；预期输出：

```
l='<Lg Cookie="test"/>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:25:55.420

[`setAttribute`](http://docs.python.org/2/library/xml.dom.html#xml.dom.Element.setAttribute)不返回任何东西，它只是改变了值。您想打印节点本身的[XML 表示](http://docs.python.org/2/library/xml.dom.minidom.html#xml.dom.minidom.Node.toxml)：

```
from xml.dom.minidom import parseString
l = '<Lg Cookie=""/>'
dom = xml.dom.minidom.parseString(l)
L = dom.getElementsByTagName('Lg')[0]
L.setAttribute('Cookie', 'test')
print (L.toxml()) 
```

# php - mysql give different result if I download it

> ID：14830218
> 
> 赞同：0
> 
> 时间：2013-02-12T10:20:57.477
> 
> 标签：php, mysql, file, download

I am using PHP and MySQL to run a query, I have written two scripts having same query, but one for displaying the query result on browser and other for downloading the query result as a file. Even though its the same query, its giving different result while downloading, which is incorrect. My query for instance is

```
$query="select * from tf where gene_symbol like '%$sterm%' || gene_name like '%$sterm%' || synonym like '%$sterm%'"; 
```

If `$sterm` is **ZINC FINGER PROTEIN**, it give 685 records both on mysql command line and display. But if I download the file it give around 800 records by adding even the records `where gene_name like '%ZINC FINGER%'`

Does anyone have any idea, what could be causing it. Thanks in advance. Konika

Here is the code for downloading the file

```
<?php

$sterm = $_POST["sterm"];
$sterm = strtoupper($sterm);
$query = "select * from tf where gene_symbol like '%$sterm%' || gene_name like '%$sterm%' || synonym like '%$sterm%'";
$result = mysql_query($query) or die(mysql_error());
if (mysql_num_rows($result) > 0) {
    result_disp($result);
}

function result_disp($results)
{
    $num_fields = mysql_num_fields($results);
    $headers    = array();
    for ($i = 0; $i < $num_fields; $i++) {
        $headers[] = mysql_field_name($results, $i);
    }
    $fp = fopen('php://output', 'w');

    if ($fp && $results) {
        header('Content-Type: text/csv');
        header('Content-Disposition: attachment; filename="export.txt"');
        header('Pragma: no-cache');
        header('Expires: 0');
        fputcsv($fp, $headers, chr(9));
        while ($rows = mysql_fetch_row($results)) {
            fputcsv($fp, array_values($rows), chr(9));
        }
        die;
    }
}
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:58:31.893

我想我修好了，首先删除了文件下载部分，然后在屏幕上打印了查询。我看到变量从“锌指蛋白”截断为“锌”。我猜是post方法中的一些东西。然后我在 $sterm 上使用了单引号，同时在 post 方法中传递它，比如**value= '$sterm'**并且它起作用了。这是我用来传递变量的脚本：

```
echo "<table width='100%'><tr><td><strong>Click on column headers to sort; * dbTF = DNA binding Transcription Factor</strong></td> <td> 
<form action='search/download-search' method='post' >
<input type='hidden' name='sterm' value= '$sterm' >
<input type='submit' value='Download now'>
</form>
</td> </tr>
</table>"; 
```

我的想法多么愚蠢-一个查询给出了不同的结果:(感谢您的建议！

# android - 如何在android模拟器中关闭屏幕？

> ID：14830219
> 
> 赞同：15
> 
> 时间：2013-02-12T10:21:13.160
> 
> 标签：android, android-emulator, android-2.3-gingerbread

如何在android模拟器中关闭屏幕？

我使用的是安卓 2.3.3 版本

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T10:23:40.050

尝试按F7，这与按电源按钮相同。以下是完整的快捷方式列表：http: [//developer.android.com/tools/help/emulator.html#controlling](http://developer.android.com/tools/help/emulator.html#controlling)

# angularjs - ng-switch always true

> ID：14830220
> 
> 赞同：0
> 
> 时间：2013-02-12T10:21:15.733
> 
> 标签：angularjs, ng-switch

I want to hide `ul`s if they are empty:

```
<div class="nav-manage clearfix" ng-app="linksManager">

    <script type="text/ng-template" id="inner-list.html">

        <li ng-repeat='link in link.submenu'>
            <a href="{{link.url}}">{{link.text}}</a>
            <div ng-switch on="link.submenu">
                <ul class="sortable" ng-include="'inner-list.html'">
            </div>
        </li>

    </script>

    <div class="links-arrange" ng-controller="linksRarrange">
        <ul class="sortable">
            <li ng-repeat="link in links">
                    <a href="{{link.url}}">{{link.text}}</a>
                    <div ng-switch on="link.submenu">
                        <ul class="sortable" ng-include="'inner-list.html'"></ul>
                    </div>
            </li>
        </ul>
    </div> 
```

But they are not hidden regardless of the content in the `ng-switch on`

This is the data structure:

```
var linksData = [
    {
        text: 'Menu Item 1',
        url: '#'
    }, {
        text: 'Menu Item 2',
        url: '#',
        submenu: [
            {
                text: 'Sub-menu Item 3',
                url: '#'
            }, {
                text: 'Sub-menu Item 4',
                url: '#',
                submenu: // etc ...
]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:04:46.840

`ng-switch`就像...一样...一个 javascript `switch`，您需要与它`ng-switch on`一起使用`ng-switch-when`它才能工作（请查看[此处](http://docs.angularjs.org/api/ng.directive%3angSwitch)的示例）。但是，在这种情况下，`ng-switch`这似乎不是一个好的解决方案，您需要的是[AngularUI](http://angular-ui.github.com/) `ui-if`指令（[此处](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/if/if.js)为 src 代码）之类的东西：

> **什么？**从 DOM 中完全移除元素，而不是仅仅隐藏它。
> 
> **为什么？**在 DOM 遍历很重要的情况下（例如 CSS 选择器 :first-child、:last-child 和 :nth()-child），仅仅隐藏元素是不够的。

例子：

```
<div ui-if="link.submenu"> 
```

**jsfiddle**：http: [//jsfiddle.net/bmleite/fBLTd/](http://jsfiddle.net/bmleite/fBLTd/)

# ruby-on-rails - Ruby On Rails：使文本字段不可编辑并在编辑记录时显示另一个字段

> ID：14830223
> 
> 赞同：3
> 
> 时间：2013-02-12T10:21:18.280
> 
> 标签：ruby-on-rails, field

1.如何在编辑记录时使文本字段不可编辑（可读=假）

我的表单查看代码

```
 <div class="field">
    <%= f.label t :profile_name %><br />
    <%= f.text_field :profile_name %>
  </div> 
```

2.如何在编辑记录时使字段可见。我在数据库表中有一个字段，我只想在编辑记录时显示以填写，但是在创建新记录时该字段不可见。

**解决：**

别介意伙计们，我得到了解决方案，

```
1\. 
<div class="field">
  <%= f.label t :profile_name %><br />
  <%= f.text_field :profile_name, :readonly => f.object.persisted? %>
</div>

2\. 
<% if f.object.persisted?%>
  <div class="field">
    <%= f.label t :another_field %><br />
    <%= f.text_field :another_field%>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T10:40:29.507

如果您希望您的文本框不可编辑，您可以使用小 css 或在前端执行如下操作：

```
 <div class="field">
    <%= f.label t :profile_name %><br />
    <%= f.text_field :profile_name, disabled: disabled %>
 </div> 
```

或添加`:readonly => true`而不是`disabled`. 所以，

```
<div class="field">
    <%= f.label t :profile_name %><br />
    <%= f.text_field :profile_name, readonly: true %>
 </div> 
```

在您的视图中添加禁用以制作不可编辑的文本框。如果它不起作用，我们也可以在 css 中做。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-06T20:45:40.903

回答那些找到这个的人。我的问题非常接近。我有一个我想显示的字段，但没有可编辑的。我正在使用设计，并且只允许通过设计视图设置电子邮件和密码。

1）禁用表单中的编辑（此步骤提供零安全性）：

```
<%= f.text_field :email, readonly: true %> 
```

2）防止客户端的恶作剧（这一步是实际的保护）：

```
 # Never trust parameters from the scary internet, only allow the white list through.
    def user_params
      # params.require(:user).permit(:email, :phone_number, :password, :password_confirmation)
      # email and password must be edited via devise controller
      params.require(:user).permit(:phone_number)
    end 
```

2b）或者，您可以从编辑集中删除值：

```
def update
  params['user'].delete('email')
  ...
end 
```

# domain-driven-design - 聚合必须是强一致的吗？

> ID：14830227
> 
> 赞同：3
> 
> 时间：2013-02-12T10:21:43.743
> 
> 标签：domain-driven-design, aggregateroot, event-sourcing, eventual-consistency, dddd

我在 DDD 上阅读的所有内容都暗示聚合中的状态必须是高度一致的。

这意味着如果需要冗余，则只能使用强一致性复制（例如 2PC、3PC 或 Paxos）。

您是否允许使用最终一致的复制，例如多主或主从？如果您确实使用了它们，那么在 DDD 术语中您仍然拥有“聚合”吗？这是常见的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:37:15.233

聚合本身需要是一致的，但是相关的聚合最终可以相互一致。事实上，最终一致性是分布式场景中 DDD 的一种常见范式。可以将聚合视为一致性边界。这意味着聚合是根据必须一致的内容而不是对现实的纯粹反映来定义的。

例如，聚合上的行为可以发布域事件，然后将其发布到外部。该事件的带外处理程序最终可以使整个系统进入一致状态。很多时候，最终一致性是完全可以接受的业务约束，特别是因为最终一致性在现实中更为普遍。

查看[Vaughn Vernon 的 Effective Aggregate Design](http://dddcommunity.org/library/vernon_2011)了解更多信息。

**更新**

最终一致的聚合冗余应根据具体情况进行评估。一些聚合将非常适合解决冲突，也许有自然的补偿行动。这些类型的冲突将以类似于 CQRS 风格的冲突的方式解决，其中需要采取补偿措施来使系统进入一致状态。与 CQRS 一样，应与领域专家讨论最终一致性的影响。

# jquery - 在 a 上添加 .active 类显示相应的

> ID：14830228
> 
> 赞同：1
> 
> 时间：2013-02-12T10:21:44.730
> 
> 标签：jquery, html, css

我正在开发一个在单个页面内打开/隐藏 div 的菜单。

我要做的是在当前单击的菜单项上应用一个类（.active），只要打开连接到它的 div 即可。一旦 div 关闭，或者选择了其他菜单项，类就会消失/应用于其他菜单项。

我尝试使用，`$(".your_selector li").addClass("active");`但它什么也没做，只是将所有菜单项标记为活动，正如您所期望的那样。

你将如何解决这个问题？这是小提琴[http://jsfiddle.net/4DGUV/3/](http://jsfiddle.net/4DGUV/3/)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:31:55.000

更改为此脚本：http: [//jsfiddle.net/4DGUV/7/](http://jsfiddle.net/4DGUV/7/)

```
$('document').ready(function () {
  $('button').click(function () {      //<----click the buttons
      $('button').removeClass('active'); //<-----remove the class from the button
      $(this).addClass('active'); //<---add the class to currently clicked button
      var $div = $('#' + $(this).data('href'));
      $('.demo').not($div).hide();
      $div.slideToggle();
   });
}); 
```

或者更好的方法：http: [//jsfiddle.net/4DGUV/8/](http://jsfiddle.net/4DGUV/8/)

```
$('document').ready(function () {
  $('.menu li').click(function () {
    $(this).siblings().removeClass('active');
    $(this).addClass('active');
    var $div = $('#' + $(this).data('href'));
    $('.demo').not($div).hide();
    $div.slideToggle();
  });
}); 
```

那么你的html应该是这样的：

```
<div class="menu">
  <ul>
    <li> <a href='#' id="show2" data-href="vission1">news</a>

    </li>
    <li> <a href='#' id="show3" data-href="mteam">team</a>

    </li>
    <li> <a href='#' id="show1" data-href="mission1">download</a>

    </li>
  </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:24:50.603

您需要将其添加到 li 的单击事件中。

**例子**

```
$(".your_selector li").click(function(){
    $(this).addClass('active');
});
```

因为您要尝试的是`addClass`所有 li 标签，所以您需要告诉 jquery`addClass`到特定`li`的点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:26:45.247

使用以下内容：

```
$(".your_selector li").click(function(){
    $(this).removeClass().addClass('active');
}); 
```

# java - 运行时错误 - 运行时错误的子类？

> ID：14830234
> 
> 赞同：0
> 
> 时间：2013-02-12T10:21:51.993
> 
> 标签：java, runtime

运行应用程序时出现以下错误堆栈：

```
java.lang.IllegalArgumentException: count parameter must be greater than zero
at myApplication.util.StatementUtil.expand(StatementUtil.java:83)
at myApplication.GetBananasByIdsQuery.getSQL(GetBananasByIds.java:49)
at myApplication.Query.executeQuery(Query.java:87)
at myApplication.BananasServiceJDBCImpl.get(BananasServiceJDBCImpl.java:181)
at myApplication.BananasResource.queryForBananas(BananasResource.java:127) 
```

这是错误来自 BananasServiceJDBCImpl.get() 中的代码部分：

```
List<BananasDataReply> requestedBananas = new GetBananasByNamesQuery(names).executeQuery(); 
```

所以，我的问题不是错误本身，而是为什么我得到错误的地方。在我的应用程序中，Query 被许多类扩展，如 GetBananasByNamesQuery 或 GetBananasByIdsQuery，它们都扩展了 getSQL 方法。为什么当我使用 GetBananasByNamesQuery 对象时是 GetBananasByIdsQuery.getSQL？应用程序是否有可能在运行时“选择”错误的子类？还是有其他我看不到的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:34:15.093

我怀疑`count`在预编译语句中使用了 SQL 函数并获得零或负参数。

这很可能是由于为某些参数设置了错误的值造成的，而在同一个 SQL 中也可能是错误的。

# javascript - 如何通过javascript从输入字段中获取实际值？

> ID：14830239
> 
> 赞同：0
> 
> 时间：2013-02-12T10:22:08.357
> 
> 标签：javascript, jquery, html, input

我有以下代码：

```
$(document).ready(function() {
    var phone_number = $('input[name=phone_number]').val();
    alert(phone_number);
}); 
```

问题是 phone_number 在页面加载时始终具有价值。用户可以在输入字段中更改电话号码 - 但脚本总是会获得过时的值。我该如何解决这个问题？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:24:36.727

单击任何按钮时调用此函数
假设您有一个按钮

```
<input type="button" value="Get Value" id="getvalue" /> 
```

点击获取该字段的值

```
$(document).ready(function() { 
    $('#getvalue').click(function() {
         var phone_number = $('input[name=phone_number]').val();
         alert(phone_number);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:25:29.140

**如果您在 document.ready... 中编写此 Get Value 脚本，它总是为您提供默认值..**

尝试在任何一个**元素单击事件**中获取值脚本...

**因为：**这里`document.ready = Page Load`事件...

试试这个小提琴：http: [//jsfiddle.net/RYh7U/74/](http://jsfiddle.net/RYh7U/74/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:33:12.077

asifsid88 是正确的，但是如果用户可以更改电话号码，那么在更改电话号码后，您需要字段的值，所以我认为您应该使用更改事件而不是单击事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T10:34:09.293

**在这里，您已经在document.ready**函数上编写了这个脚本，这就是它返回过时值的原因。
将此脚本放入某些事件中，即单击、按键、模糊、onchange 等...这样您就可以获得更改后的值。

```
<input type="text" name="phone_number" id="phone_number" value="Get Value"/>

$(document).ready(function() { 
    $('#phone_number').blur(function() {
         var phone_number = $(this).val();
         alert(phone_number);
    });
}); 
```

# c# - 如何为特定源创建位图

> ID：14830240
> 
> 赞同：1
> 
> 时间：2013-02-12T10:22:09.970
> 
> 标签：c#, visual-studio-2010

我有这条线：

```
Bitmap tmpSource = new Bitmap("../Resources/logo2013.jpg"); 
```

但它向我抛出了这个例外：

```
Parameter is not valid. 
```

源是存在的。该`.jpg`属性设置为`Resource`。我做错了什么？？？

**笔记：**

我以前试过这个：

```
string uri = @"..\Resources\logo2013.png";
Bitmap b = new Bitmap(uri); 
```

这将返回此字符串值：

```
"..\\Resources\\logo2013.jpg" 
```

但它也失败了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:23:20.110

您不能将*相对*路径传递给`Bitmap`ctor“../Resources/logo2013.jpg”。您可以使用不同的[Path](http://msdn.microsoft.com/en-us/library/system.io.path%28v=vs.110%29.aspx)类方法来获取要加载的图像的完整（准确）路径。

# java - Java Server Faces Ajax 请求无法正常工作

> ID：14830247
> 
> 赞同：1
> 
> 时间：2013-02-12T10:22:26.393
> 
> 标签：java, ajax, jsf

我使用 OpenFaces 库，我想执行一些 ajax 请求，例如，如果 checkbox 是 true display `TextArea`，但它根本不起作用。操作原理与 JSF 标准库中的相同。我将向您展示我的代码：

```
<o:selectBooleanCheckbox id="addOpis" value="#{ajaxBean.opis}">
    <o:ajax event="click" execute="addOpis" render="opisArea"/>
</o:selectBooleanCheckbox> 
<h:outputLabel for="dodajOpisCheckbox" value="zaznacz aby dodać opis" />
<o:inputTextarea id="opisArea" value="#{productBean.opis}" rendered="#{ajaxBean.opis}"/> 
```

ManagedBean 来源：

```
@ManagedBean(name="ajaxBean")
@RequestScoped
public class AjaxBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private boolean opis;

    public AjaxBean() {
    }

    public void setOpis(boolean opis) {
        this.opis = opis;
    }

    public boolean isOpis() {
        return opis;
    }

} 
```

我寻找了一些解决方案，但我的代码似乎很好，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:12:15.060

加载后页面上没有带有id`opisArea`的元素，因为`rendered`属性默认为false。

修复它的最简单方法 - 放在`opisArea`元素内部，它总是会被渲染：

```
<h:selectBooleanCheckbox id="addOpis" value="#{testBean.opis}">
    <f:ajax event="click" execute="addOpis" render="opisArea"/>
</h:selectBooleanCheckbox> 
<h:outputLabel for="dodajOpisCheckbox" value="zaznacz aby dodać opis" />
<h:panelGroup id="opisArea" >
    <h:inputTextarea value="#{productBean.opis}" rendered="#{testBean.opis}"/>
</h:panelGroup> 
```

# asp.net-mvc - 忽略 vb.net 中的路由？

> ID：14830248
> 
> 赞同：2
> 
> 时间：2013-02-12T10:22:34.743
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-routing

我需要帮助将其转换为 vb.net...

```
routes.IgnoreRoute("{*allaspx}", new {allaspx=@".*\.aspx(/.*)?"});
routes.IgnoreRoute("{*robotstxt}", new {robotstxt=@"(.*/)?robots.txt(/.*)?"}); 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:43:50.160

这个怎么样？

```
routes.IgnoreRoute("{*allaspx}", New With {.allaspx = ".*\.aspx(/.*)?"})
routes.IgnoreRoute("{*robotstxt}", New With {.robotstxt = "(.*/)?robots.txt(/.*)?"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T12:12:22.533

你需要导入`System.Web.Mvc`

这是我在 VB.NET ASP.net Web-Forms 应用程序中使用的（使用 mvc5）

```
Imports System.Web.Mvc

Public Module RouteConfig
    Public Sub RegisterRoutes(ByVal routes As RouteCollection)
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}")

        ' keep default.aspx for empty url
        routes.IgnoreRoute("")

        routes.MapRoute(
            name:="Default",
            url:="{controller}/{action}/{id}",
            defaults:=New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional}
        )
    End Sub
End Module 
```

# flash-cs5 - Adobe Flash CS5 - 是否可以将电影剪辑中的所有帧传输到舞台？

> ID：14830250
> 
> 赞同：1
> 
> 时间：2013-02-12T10:22:37.807
> 
> 标签：flash-cs5

是否可以将所有帧（包括应用了经典补间/补间动画的帧）从影片剪辑移动到舞台？实际上，我在舞台上的单个帧内完成了整个动画，现在当我尝试导出 png 序列/avi 剪辑时，它只渲染第一帧。舞台上该帧内的总帧数约为 900 帧。请帮助我已经尝试了过去一周的一切。

谢谢

# javascript - YUI2 DataSource - 结果列表的长度

> ID：14830251
> 
> 赞同：0
> 
> 时间：2013-02-12T10:22:47.937
> 
> 标签：javascript, yui

我正在使用 YUI2 DataSource 来加载 JSON 数据，然后使用 DataTable 来显示它。

在初始化 DataTable 之前，我想检查数据源中是否有任何结果，并且只有在有要显示的内容时才初始化表。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:34:23.640

如果我没记错的话，YUI DataTables 可以自动透明地绑定到 DataSource。但这不会如你所愿。

您可以通过首先设置 DataSource，然后在 DataSource 成功获取数据时调用的异步 javascript 函数（通常是传递给 DataSource 的闭包）中初始化 DataTable 来做您需要的事情。那应该行得通。

或者，如果您定期使用动态轮询，可能会更好，您可以设置包含 DataTable 的 div 是否可见，具体取决于是否有任何要显示的内容（默认为不可见，因此在收到数据之前 DataTable 不可见） .

# c++ - Mac OSX主函数中未初始化的指针

> ID：14830256
> 
> 赞同：0
> 
> 时间：2013-02-12T10:23:01.993
> 
> 标签：c++, c, macos, assembly

我有两个问题。

第一个问题。为什么以下代码实际上可以在 mac 上运行（使用 gcc 编译）？

```
int main()
{
    int *p;
    *p = 1;
    return 0;
} 
```

反汇编时，行 '*p = 1;' 变成

```
mov rax, [rbp - 16]
mov qword [rax], 1 
```

第二个问题。什么位于 [rbp - 16]？

在问这个问题时，我将操作数 [rbp - 16] 解释为 [rbp + 16]，这显然没有意义。我累了……

你回答我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:27:47.870

您的代码具有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。这意味着它可以做任何事情。它不必崩溃。

当您的程序启动时，有一些代码在之前执行`main()`并且使用相同的堆栈。您的盒子上可能发生的情况是，包含的堆栈区域`p`以前已被另一个函数使用，该函数在那里保留了一个有效的指针。你`main()`不小心偶然发现了那个指针，取消了它的引用，并且正在破坏其他人的记忆。

`gcc`我尝试使用并在 OSX 上运行它来编译您的代码，但它确实崩溃了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:27:37.700

我记得，C 中的变量是由以前的用户留在堆栈上的某个值初始化的——如果你没有明确指定它们的值的话。所以，这个值是绝对*随机*的，你的代码只是改变了随机内存区域的值。如果你得到空指针，你的程序将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:59:51.210

Others have sufficiently covered the undefined-ness of this behavior. Your specific question appeared to be about understanding the disassembly. Here's a somewhat verbose, but hopefully helpful walkthrough:

First instruction: `mov rax, [rbp - 16]`

RBP is the "base pointer register." This holds the address in memory of the current stack frame. As a commenter pointed out `rbp - 16` is the location, in the current stack frame, of `p`. It will be an 8 byte pointer. If you declared another local variable `int *q;` immediately after `p` it's address would likely be at `rbp - 24`. RAX is, in this case, a general purpose register. This copies the 8 byte pointer from where it's situated on the stack at `rbp - 16` into RAX. As others have pointed out, since you didn't initialize `p`, the value at `rbp - 16` is whatever was left in memory by the last thing to use that memory, or something totally random. The square brackets brackets indicate that the operand `rbp - 16` is a pointer, and that the contents of the memory at the address `rbp - 16` should be copied, and not the literal result of the expression `rbp - 16`. You can think of the expression `rbp - 16` as having the type `int**`.

Second instruction: `mov qword [rax], 1`

QWORD is short for "quad word". Historically, a byte is one byte, a "word" is two bytes, a "long" or "dword" (for 'double word') is four bytes and, naturally, a "quad word" is 8 bytes. This instruction copies a literal 1 (extended to its eight byte form) to the location pointed to by RAX. The square brackets brackets indicate that the operand RAX is a pointer, and that the literal is to be copied into the location *pointed to* by the operand. If the instruction were `mov qword rax, 1` that would copy the literal 1 (in its eight byte form) into RAX.

As others have said, since that pointer is garbage (what ever happened to be in memory) chances are good (but not guaranteed) that this will crash.

# asp.net - 如何使用api进行多部分视频上传

> ID：14830257
> 
> 赞同：1
> 
> 时间：2013-02-12T10:23:12.177
> 
> 标签：asp.net, api, upload, httprequest

什么是多部分视频上传以及它是如何在 asp.net 中完成的。

我使用下面的代码创建项目并使用 API 获取列表

```
 HttpWebRequest wRequest = (HttpWebRequest)WebRequest.Create("apiurl?paramerters");
    wRequest.Method = "POST";

    string credentials = String.Format("{0}:{1}", "username", "password");
    byte[] bytes = Encoding.ASCII.GetBytes(credentials);
    string base64 = Convert.ToBase64String(bytes);
    string authorization = String.Concat("Basic ", base64);

    wRequest.Headers.Add("Authorization", authorization);

    wResponse = (HttpWebResponse)wRequest.GetResponse();

    if (wRequest.HaveResponse)
    {
        string response = (new StreamReader(wResponse.GetResponseStream())).ReadToEnd();
        if (wResponse.StatusCode == HttpStatusCode.OK)
        {
            dsResponse.ReadXml(new MemoryStream(Encoding.UTF8.GetBytes(WistiaResponse)));

            if (dsResponse.Tables.Count > 0)
            {
                dtResponse = dsResponse.Tables[0];
            }
            else
            {
                dtResponse = null;
            }
        }

    } 
```

我从这里使用上传 API：“ [http://wistia.com/doc/upload-api](http://wistia.com/doc/upload-api) ”

如何进行上传

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:40:53.497

我无法对其进行测试（因为我在那里没有帐户），但一般代码应如下所示：

```
string boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x"); 
StringBuilder postDataBuilder = new StringBuilder(); 
postDataBuilder.Append("--" + boundary + "\r\n"); 
postDataBuilder.Append("Content-Disposition: form-data; name=\"api_password\"\r\n\r\n"); 
postDataBuilder.Append(apiPassword); 
postDataBuilder.Append("\r\n--" + boundary + "\r\n"); 
postDataBuilder.Append("Content-Disposition: form-data; name=\"project_id\"\r\n\r\n"); 
postDataBuilder.Append(projectId); 
postDataBuilder.Append("\r\n--" + boundary + "\r\n");
postDataBuilder.Append("Content-Disposition: form-data; name=\"contact_id\"\r\n\r\n"); 
postDataBuilder.Append(contactId); 
postDataBuilder.Append("\r\n--" + boundary + "\r\n"); 
postDataBuilder.Append("Content-Disposition: form-data; name=\"name\"\r\n\r\n"); 
postDataBuilder.Append(name); 
postDataBuilder.Append("\r\n--" + boundary + "\r\n"); 
postDataBuilder.AppendFormat("Content-Disposition: form-data; name=\"file\"; filename=\"{0}\"\r\nContent-Type: application/octet-stream\r\n\r\n", "MyWistiaFile.ext"); 

byte[] postData = null; 
using (MemoryStream postDataStream = new MemoryStream()) 
{ 
        byte[] postDataBuffer = Encoding.UTF8.GetBytes(postDataBuilder.ToString()); 
        postDataStream.Write(postDataBuffer, 0, postDataBuffer.Length); 
        using (FileStream wistiaFileStream = new FileStream("MyPath\\MyWistiaFile.ext", FileMode.Open, FileAccess.Read)) 
        { 
                byte[] wistiaFileBuffer = new byte[1024]; 
                int wistiaFileBytesRead = 0; 
                while ((wistiaFileBytesRead = wistiaFileStream.Read(wistiaoFileBuffer, 0, wistiaFileBuffer.Length)) != 0) 
                        postDataStream.Write(wistiaFileBuffer, 0, wistiaFileBytesRead); 
        } 
        postDataBuffer = Encoding.UTF8.GetBytes("\r\n--" + boundary + "--"); 
        postDataStream.Write(postDataBuffer, 0, postDataBuffer.Length); 
        postData = postDataStream.ToArray(); 
} 

System.Net.ServicePointManager.Expect100Continue = false; 
System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)WebRequest.Create("https://upload.wistia.com"); 
request.Method = "POST"; 
request.Expect = String.Empty; 
request.Headers.Clear(); 
request.ContentType = "multipart/form-data; boundary=" + boundary; 
request.ContentLength = postData.Length; 

Stream requestStream = request.GetRequestStream(); 
requestStream.Write(postData, 0, postData.Length); 
requestStream.Flush(); 
requestStream.Close(); 

HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

其中`apiPassword`、和是 A​​PI 文档中描述的参数，而`projectId`是您要上传的文件的路径。`contactId``name``MyPath\MyWistiaFile.ext`

# javascript - 在函数内部传递 JS 中的引用

> ID：14830258
> 
> 赞同：3
> 
> 时间：2013-02-12T10:23:15.627
> 
> 标签：javascript

在下面的代码中，我通过

```
(function(Index){
    Index.Index = function(){console.log(23)};

    Index = function(){console.log(123)};

}(Window.Index = Window.Index || {})); 
```

然而我得到的回报是`Window.Index={Index:function...}`

其中记录了 23。

我正在尝试将其重新声明为函数。例如期望值应该是：

```
Window.Index = function(){console.log(123)}; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:25:03.100

您在函数中获得的变量是对`Index`对象的引用，而不是对包含此引用的变量的引用。在 javascript 中，参数总是按值传递，即使这些值是对象的引用。

解决方案是

**1）**传递`window`（即持有该`Index`属性的对象）

```
(function(holder){
    holder.Index = function(){console.log(123)};
})(window); 
```

**2）**直接更改 window.Index ：

```
(function(){
    window.Index = function(){console.log(123)}; // or omit 'window', that's the same
})(); 
```

**3）**传递属性的名称：

```
(function(holder, propname){
    holder[propname] = function(){console.log(123)};
})(window, "Index"); 
```

**4）**传递回调：

```
(function(callback){
    var Index = function(){console.log(123)};
    callback(Index);
})(function(v){window.Index=v}); 
```

请注意，您基本上使用的是通用[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。

# django - 无法在 Django 中使用正确的用户名和密码进行身份验证？

> ID：14830260
> 
> 赞同：0
> 
> 时间：2013-02-12T10:23:22.603
> 
> 标签：django, django-authentication

我正在使用 Django 1.5。我的用户模型是：

```
class User(AbstractBaseUser):
    #id = models.IntegerField(primary_key=True)
    #identifier = models.CharField(max_length=40, unique=True, db_index=True)
    username = models.CharField(max_length=90, unique=True, db_index=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=225)
    #password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    #last_login = models.DateTimeField()

    objects = UserManager()
    USERNAME_FIELD = 'username'
    class Meta:
        db_table = u'galaxy_user' 
```

我无法使用正确的用户名和密码进行身份验证。我的登录功能是：

```
def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None:
            login(request, user)
            return HttpResponseRedirect('/overview/')
        else:
            return HttpResponseRedirect('/login_backend/')
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request)) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:14:33.860

首先更新您的用户模型，它没有密码。您的电子邮件字段不是字符字段，我认为它是 EmailField，您的密码也不是字符字段。请搜索正确的字段。密码必须是哈希...

**后端.py**

```
from django.conf import settings
from app_name.models import User

class AuthBackend:
    def authenticate(self, username=None, password=None):
        if '@' in username:
            kwargs = {'email': username}
        else:
            kwargs = {'username': username}
        try:
            user = User.objects.get(**kwargs)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

通过模型创建**“check_password”**函数。这种检查的方式是，在将输入密码与保存在数据库中的密码进行比较之前，输入密码必须经过哈希处理。

更新**设置.py**

```
AUTHENTICATION_BACKENDS = (
    'app_name.backend.AuthBackend',
    'django.contrib.auth.backends.ModelBackend',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:37:39.560

您是否在 settings.py 中配置了用户模型？

```
AUTH_USER_MODEL = 'myapp.User' 
```

如果您已经运行了*syncdb*，则必须删除数据库并再次运行它。请参阅：[https ://docs.djangoproject.com/en/1.5/topics/auth/customizing/#substituting-a-custom-user-model](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#substituting-a-custom-user-model)

# iphone - 3键选择

> ID：14830263
> 
> 赞同：-3
> 
> 时间：2013-02-12T10:23:32.080
> 
> 标签：iphone, ios6, uibutton

在我的应用程序中，我有 3 个按钮，我想在选择任何 1 个按钮时禁用剩下的 2 个按钮，我尝试使用以下逻辑，这里我用来执行它的代码无法正常工作，

```
 -(void)checkboxSelected13:(id)sender
 {
       UIButton *btn = (UIButton *) sender;
       if([btn isSelected])
       {
            [bt27 setSelected:YES];
            [bt28 setSelected:NO];
            [bt29 setSelected:NO];
       }
       else if ([btn isSelected]) {
            [bt27 setSelected:NO];
            [bt28 setSelected:YES];
            [bt29 setSelected:NO];
       }
       else
       {
            [bt27 setSelected:NO];
            [bt28 setSelected:NO];
            [bt29 setSelected:YES];
       }
} 
```

我的代码有什么问题？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:35:34.020

您正在两个 if-else 部分中检查相同的条件“if([btn isSelected])”。这可能会引起混乱。而且您的代码无法正常工作。

而且您的代码看起来太长而且很复杂：

您可以直接执行：

为您的按钮提供标签属性，例如 button1=1、button2=2 和 button3=3

现在检查以下代码：

```
-(IBAction)checkboxSelected:(id)sender
{
    UIButton *btn = (UIButton *) sender;

    switch (btn.tag) {
    case 1:
        [btn1 setSelected:YES];
        [btn2 setSelected:NO];
        [btn3 setSelected:NO];
        break;
    case 2:
        [btn1 setSelected:NO];
        [btn2 setSelected:YES];
        [btn3 setSelected:NO];
        break;
    case 3:
        [btn1 setSelected:NO];
        [btn2 setSelected:NO];
        [btn3 setSelected:YES];
        break;
    default:
        [btn1 setSelected:NO];
        [btn2 setSelected:NO];
        [btn3 setSelected:NO];
        break;
    }
} 
```

希望，这将对您有所帮助。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:31:53.683

您应该这样做，并将不同的图像作为背景图像作为 xib 文件中按钮的选定状态的背景图像，以便可以轻松区分

```
-(void)checkboxSelected13:(id)sender
 {

UIButton *btn = (UIButton *) sender;

if((btn == bt27) && ![btn isSelected])
{
    [bt27 setSelected:YES];
    [bt28 setSelected:NO];
    [bt29 setSelected:NO];
}
else if ((btn == bt28) && ![btn isSelected]) {
    [bt27 setSelected:NO];
    [bt28 setSelected:YES];
    [bt29 setSelected:NO];
}
else if ((btn == bt29) && ![btn isSelected])
{
    [bt27 setSelected:NO];
    [bt28 setSelected:NO];
    [bt29 setSelected:YES];

}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:31:57.553

将选项卡分配给您的按钮。然后检查：

```
-(void)checkboxSelected13:(id)sender
 {
      UIButton *btn = (UIButton *) sender;
      if(btn.tag == tagAssignedToButton27)
      {
           [bt27 setSelected:YES];
           [bt28 setSelected:NO];
           [bt29 setSelected:NO];
      }
      else if(btn.tag == tagAssignedToButton28)
      {
           [bt27 setSelected:NO];
           [bt28 setSelected:YES];
           [bt29 setSelected:NO];
      }
      else if(btn.tag == tagAssignedToButton29)
      {
           [bt27 setSelected:NO];
           [bt28 setSelected:NO];
           [bt29 setSelected:YES];
      }
} 
```

更优化的方法是在你的函数中使用 switch case `checkboxSelected13`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T10:32:32.633

```
if([bt27 isSelected]) {
    [bt27 setSelected:YES];
    [bt28 setSelected:NO];
    [bt29 setSelected:NO];
} else if ([bt28 isSelected]) {
    [bt27 setSelected:NO];
    [bt28 setSelected:YES];
    [bt29 setSelected:NO];
} else if ([bt29 isSelected]) {
    [bt27 setSelected:NO];
    [bt28 setSelected:NO];
    [bt29 setSelected:YES];
} else {
    [bt27 setSelected:NO];
    [bt28 setSelected:NO];
    [bt29 setSelected:NO];
} 
```

从逻辑上讲，这就是你想要的。目前还不清楚 btn 和 btXY 之间的关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T10:27:53.630

```
if([btn isSelected]
   )
{
    [bt27 setSelected:YES];
    [bt28 setSelected:NO];
    [bt29 setSelected:NO];
}
else if ([btn isSelected]) {
    [bt27 setSelected:NO];
    [bt28 setSelected:YES];
    [bt29 setSelected:NO];
}
... 
```

您在 if 和 else if 中检查相同的条件 [btn isSelected]，更改其中一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T10:34:18.900

好吧，这里的主要问题是逻辑和代码重复。尽管另一种类型的控件最适合您所追求的（`UISegmentedControl`例如），但您可以尝试用更抽象的想法来解决相同的问题，也许像这样（请注意，所有按钮都会触发相同的方法现在）：

```
- (IBAction)checkboxSelected:(id)sender
{
    // Deselect any button that is already selected
    // of course a better approach would be to keep
    // an array with the buttons and just iterate through
    [bt27 setSelected:NO];
    [bt28 setSelected:NO];
    [bt29 setSelected:NO];

    // Select the button that triggered the action
    [(UIButton *)sender setSelected:YES];
} 
```

# asp.net-mvc - ASP.NET MVC 文件上传

> ID：14830266
> 
> 赞同：0
> 
> 时间：2013-02-12T10:23:35.793
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ef-code-first

我正在使用 ASP.NET MVC 并按照 ASP.NET 网站“getting-started-with-ef-using-mvc”上的教程说明进行操作。我有一个**设备**类

```
public class Equipment
    {
       [Key] public int EquipID { get; set; }
        public string EquipName { get; set; }
        public string EquipDescription { get; set; }
        public string EquipSerialNumber { get; set; }
        public string EquipImage { get; set; }
        public string EquipManufacturor { get; set; }
        public string EquipLocation { get; set; }
        public string EquipCalibrationFreq { get; set; }
        public virtual ICollection<Calibration> Calibrations { get; set; }
    } 
```

我的任务是，当用户添加新设备时，在创建表单上应该有一个文件上传控件，允许选择一个文件，当保存记录时，该文件应复制到文件夹中，其路径应存储在 FIELD"装备图像。

这是View的cshtml

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Equipment</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EquipName)
            @Html.ValidationMessageFor(model => model.EquipName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipDescription)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EquipDescription)
            @Html.ValidationMessageFor(model => model.EquipDescription)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipSerialNumber)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EquipSerialNumber)
            @Html.ValidationMessageFor(model => model.EquipSerialNumber)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipImage)
        </div>
        <input type="file" name="file"/>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipManufacturor)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EquipManufacturor)
            @Html.ValidationMessageFor(model => model.EquipManufacturor)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipLocation)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EquipLocation)
            @Html.ValidationMessageFor(model => model.EquipLocation)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EquipCalibrationFreq)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EquipCalibrationFreq)
            @Html.ValidationMessageFor(model => model.EquipCalibrationFreq)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

最后但并非最不重要的设备控制器

```
 public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Equipment/Create

    // This action handles the form POST and the upload
    [HttpPost]
    public ActionResult Create(HttpPostedFileBase file, Equipment equipment)
    {
        // Verify that the user selected a file
        if (file != null && file.ContentLength > 0)
        {
            // extract only the fielname
            var fileName = Path.GetFileName(file.FileName);
            // store the file inside ~/App_Data/uploads folder
            var path = Path.Combine(Server.MapPath("~/Content/EquipImages"), fileName);
            file.SaveAs(path);
        }       

        if (ModelState.IsValid)
              {
                db.Equipments.Add(equipment);
                db.SaveChanges();
                return RedirectToAction("Index");
              }
             return View(equipment);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:35:03.427

确保将`enctype`表单的属性设置为“multipart/form-data”。

```
@using (Html.BeginForm("TheAction", "TheController", FormMethod.Post, new{enctype="multipart/form-data")){
...
} 
```

请参阅[在 Razor 表单视图中包含文件上传](https://stackoverflow.com/questions/8450082/including-file-upload-in-razor-form-view)

# qt - 不完整类型“struct QDeclarativeProperty”的无效使用

> ID：14830267
> 
> 赞同：1
> 
> 时间：2013-02-12T10:23:36.550
> 
> 标签：qt, symbian

这段代码：

```
QGraphicsObject *object=rootObject();
object->setProperty("width", 100);
QDeclarativeProperty(object, "width").write(100); 
```

给出以下错误：

```
Invalid use of incomplete type 'struct QDeclarativeProperty' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:27:32.757

添加

```
#include <QDeclarativeProperty> 
```

到源代码的顶部。似乎在您的代码中的某处，已经有一个前向声明`QDeclarativeProperty`，因此编译器知道它是一个类/结构，但缺少实际的类定义。

以下源代码通过编译器正确运行：

```
#include <QCoreApplication>
#include <QVariant>
#include <QDeclarativeProperty>

int main(int argc, char ** argv) {
    QCoreApplication a(argc, argv);

    QObject *object = 0; // rootObject();
    object->setProperty("width", 100);
    QDeclarativeProperty(object, "width").write(100);   
} 
```

当你替换`#include <QDeclarativeProperty>`为

```
class QDeclarativeProperty; 
```

您会收到以下编译时错误：

```
main.cpp: In function 'int main(int, char**)':
main.cpp:11:38: error: invalid use of incomplete type 'struct QDeclarativeProperty'
main.cpp:4:7: error: forward declaration of 'struct QDeclarativeProperty' 
```

# android - runOnUiThread 使用技巧

> ID：14830273
> 
> 赞同：0
> 
> 时间：2013-02-12T10:23:49.920
> 
> 标签：android, testing, robotium

我有一个正在使用 Robotium 测试的类，在它的`onPause()`方法中我只是清除了`EditText`（我不需要在之后保留数据`onPause()`）。

所以我有一个正在测试的课程：

```
@Override
protected void onPause() {
    super.onPause();
    mEdtPassword.setText("");
} 
```

及测试方法：

```
public void testOnPauseOnStart() {
        Activity mActivity = getActivity();
        solo.typeText(0, CORRECT_PASSWORD);

        getInstrumentation().callActivityOnPause(mActivity);
    } 
```

但后来我得到一个错误：

```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:854)
at android.view.ViewGroup.invalidateChild(ViewGroup.java:4077)
at android.view.View.invalidate(View.java:10322)
at android.widget.TextView.invalidateRegion(TextView.java:4395)
at android.widget.TextView.invalidateCursor(TextView.java:4338)
at android.widget.TextView.spanChange(TextView.java:7186)
at android.widget.TextView$ChangeWatcher.onSpanAdded(TextView.java:8821)
at android.text.SpannableStringBuilder.sendSpanAdded(SpannableStringBuilder.java:979)
at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:688)
at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:588)
at android.text.Selection.setSelection(Selection.java:76)
at android.text.Selection.setSelection(Selection.java:87)
at android.text.method.ArrowKeyMovementMethod.initialize(ArrowKeyMovementMethod.java:302)
at android.widget.TextView.setText(TextView.java:3555)
at android.widget.TextView.setText(TextView.java:3425)
at android.widget.EditText.setText(EditText.java:80)
at android.widget.TextView.setText(TextView.java:3400)
at <package>.ui.CheckPasswordActivity.onPause(CheckPasswordActivity.java:182) 
```

如果我使用`solo.setActivityOrientation(Solo.LANDSCAPE)`我不会收到此错误。

**然后，如果我`mEdtPassword.setText("")`用`runOnUiThread()`一切都很好。**

所以问题是：

1.  为什么我使用时没有这个例外，`solo.setActivityOrientation()`但我使用时却`getInstrumentation().callActivityOnPause(mActivity)`有，我认为两者都在做同样的事情。

2.  我应该出于其他原因将类似的东西包裹`mEdtPassword.setText("")`在`onPause()`其他地方，还是只是为了测试目的而需要它？`runOnUiThread`

3.  这是否意味着如果我想对我的 UI 进行测试，我需要编写更多代码（比如在 UI 线程上运行普通操作）才能运行它们？

非常感谢您的澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:40:36.077

所以这就是我所知道的这可能会帮助你：

> 1) 为什么我在使用solo.setActivityOrientation() 时没有这个异常，但是当我使用getInstrumentation().callActivityOnPause(mActivity) 时却有，我认为两者都在做同样的事情。

根据[callActivityOnPause()的 javadoc](http://developer.android.com/reference/android/app/Instrumentation.html#callActivityOnPause%28android.app.Activity%29)

> 执行活动的 onPause() 方法的调用。默认实现只是调用该方法。

所以它会`onPause()`在不是 UI 线程的 on 线程上调用。现在，由于您正在设置值并在其中编辑文本，`Activity` `onPause()`因此会出错。因此，在您的`EditText`. 由于您没有在其中执行任何 UI 操作，`setActivityOrientation()`因此不会引发任何错误。

> 2) 我是否应该将诸如 mEdtPassword.setText("") 之类的东西包装在 onPause() 和 runOnUiThread 其他地方出于某些其他原因，或者我只是需要它用于测试目的？
> 
> 3) 这是否意味着如果我想对我的 UI 进行测试，我需要编写更多代码（比如在 UI 线程上运行普通操作）才能运行它们？

我会一起回答第二点和第三点。您无需更改活动即可使其可测试。如果您现在正在测试的活动方法正在执行与 UI 相关的任务，那么您可以将[UiThreadTest](http://developer.android.com/reference/android/test/UiThreadTest.html)注释放到您的测试方法中。您还可以阅读此[链接](http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase2.html)以获取更多信息。

我的知识仅来自阅读我自己没有测试过的 java 文档。所以请试一试，让我知道它是如何工作的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:13:17.647

Praful 基本上是正确的，尽管我相信您无法在使用 @UiThreadTest 注释的测试中使用检测方法。这意味着您最好的选择实际上是将检测方法包装在可以发布到主线程的可运行文件中。例如：

```
public void callActivityOnPause(final Activity activity){
    getInstrumentation().runOnMainSync(new Runnable() {
            public void run() {
                activity.onpause();
            }
        });
} 
```

我没有尝试过这段代码，所以它可能是错误的，只是在火车上消磨时间！

# python - Python3：创建字典的选择性副本作为新字典

> ID：14830282
> 
> 赞同：1
> 
> 时间：2013-02-12T10:24:23.233
> 
> 标签：python, dictionary, python-3.x, copy

使用 Python 3.3.0，我从 csv 文件（标题：）创建了一个“字典” `ID;Col1;Col2;Col3;Col4;Col5`：

```
ID;Col1;Col2;Col3;Col4;Col5
15345;1;1;nnngngn;vhrhtnz;latest
12345;12;8;gnrghrtthr;tznhltrnhklr;latest
90834;3;4;something;nonsens;latest
12345;34;235;dontcare;muhaha;oldone 
```

带代码

```
file = "test.csv" 
csv_file = csv.DictReader(open(file, 'r'), delimiter=';', quotechar='"') 
```

我想将 ID = 12345 的行复制到新字典中，而不是复制到文件中。我真的需要复制到字典中，而不是列表中，因为我希望能够直接处理列名。我这样做了

```
cewl = {}
for row in csv_file:
   if row['ID'] == '12345':
   cewl.update(row)
print(cewl) 
```

输出是：

```
{'ID': '12345', 'Col1': '34', 'Col2': '235', 'Col3': 'dontcare', 'Col4': 'muhaha', 'Col5': 'oldone'} 
```

**我的问题：** 只有 ID=12345 的第二行被复制，第一行被省略，我不知道为什么。

如果我通过复制到一个新列表来尝试这个（仅用于测试目的），一切正常：

```
cewl = []
for row in csv_file1:
if row['ID'] == '12345':
    cewl.append(row)
print(cewl) 
```

输出是：

```
[{'Col3': 'gnrghrtthr', 'Col2': '8', 'Col1': '12', 'Col5': 'latest', 'Col4': 'tznhltrnhklr', 'ID': '12345'}, 
{'Col3': 'dontcare', 'Col2': '235', 'Col1': '34', 'Col5': 'oldone', 'Col4': 'muhaha', 'ID': '12345'}] 
```

我不知道为什么通过复制到新字典中这不起作用……似乎没有像 .add 或 .append 这样的方法用于 dictreader。

如何将我的数据复制到新字典中而不会丢失任何行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:30:29.880

什么是预期的输出？对于 a 来说，这种行为是完全正常的`dict`；您正在用新值替换每个键的值*。*

如果您希望这些值是每个匹配行的值*列表*[`defaultdict`](http://docs.python.org/3/library/collections.html#collections.defaultdict)，则将 a与`list`工厂一起使用会更容易：

```
from collections import defaultdict

cewl = defaultdict(list)

for row in csv_file:
   if row['ID'] == '12345':
       for k, v in row.items():
           cewl[k].append(v)

print(cewl) 
```

这输出：

```
defaultdict(<class 'list'>, {'Col1': ['12', '34'], 'ID': ['12345', '12345'], 'Col2': ['8', '235'], 'Col5': ['latest', 'oldone'], 'Col4': ['tznhltrnhklr', 'muhaha'], 'Col3': ['gnrghrtthr', 'dontcare']}) 
```

A`defaultdict`是 的子类`dict`，所以`print(cewl['Col1'])`会打印`['12', '34']`。

当你使用`.update()`你有效地做到这一点：

```
for k, v in row.items():
    cewl[k] = v 
```

例如，将每个键设置`cewl`为在正在处理的行中找到的值。在处理最后一行时，它的值会覆盖前一行的值。

如果您只想过滤掉与特定`ID`条件匹配的行，那么将它们添加到列表中就可以了。然后循环匹配的结果来处理它们：

```
for row in cewl:
    # do something with matched row 
```

或者您可以构建一个生成器过滤器，围绕您`DictReader()`的过滤器为您进行过滤，因此您无需在内存中构建列表：

```
def rowfilter(reader, id):
    for row in reader:
        if row['ID'] == id:
            yield row

for row in rowfilter(csv_file, '12345'):
    # do something with matched row 
```

# jquery - 加载图像时显示文本

> ID：14830287
> 
> 赞同：0
> 
> 时间：2013-02-12T10:24:37.053
> 
> 标签：jquery

我正在制作一个带有完整背景滑块的网站，所以图像有点大。我想要一个脚本，在加载背景图像时显示一些带有动画效果的文本。我已经搜索过这个，但没有成功。有人可以进一步帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:29:36.207

默认显示文本，删除它`$(img).load()`。使用 .为文本添加动画效果`.animate()`。如果您更改图片，请再次插入`spanLoading`并重复这些步骤。

```
<div>
    <img src="book.png" alt="Book" id="book" />
    <span id="spanLoading">Loading...</span>
</div>

<script type="text/javascript">
    $(function(){
        //animate loading text
        $("#spanLoading").animate({left: '+=50'},500); 

        //On img loaded, remove loading text
        $("#book").load(){
            $("#spanLoading").remove();
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:30:05.890

我认为您必须使用该功能动态加载背景图像

```
 $(function()){
   $("#background").attr('src','your_image here');
 } 
```

并在您的 hTML 代码中将动画图像设置为默认背景

那么你就会有你的效果。

# matlab - 嵌套乘法

> ID：14830291
> 
> 赞同：1
> 
> 时间：2013-02-12T10:24:58.147
> 
> 标签：matlab

我在使用 MATLAB 代码时遇到了一些问题。这是一个计算多项式值的函数，`x`它是要评估的值，是`a`多项式系数的向量。

```
function P=nesting(a,x)
P=a(end);
for n=numel(a)-1:-1:1
    P=a(n)+P.*x;
end
return 
```

我如何修改`for`循环，例如`x`将 m 向量作为输入，`x=(x1,x2,..,xm)`并且该函数应该计算每个`P(xi)`for`i=1`并将`m`所有内容作为 m 向量输出？非常感谢任何反馈，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:14:12.077

这可能是一个扩展评论，而不是对您直接问题的回答，但无论如何。

给定一个幂向量，例如

```
powers = 0:3 
```

和一个系数向量，例如

```
coeffs = [1 0 1 2] 
```

您可以计算如此定义的多项式 ( `x^0+x^2+2x^3`) 的值，例如，`x==4`通过计算

```
dot(4.^powers, coeffs) 
```

并为自己节省那些令人困惑的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:48:19.707

为什么不使用[`polyval`](http://www.mathworks.com/help/matlab/ref/polyval.html)？

如果您想要自己的实现而不是：

```
function p = nesting( coeff, x )

ex = (numel(coeff)-1) : -1 : 0;
v = bsxfun( @power, x(:), ex ); % vanermonde matrix
p = v * coeff(:)'; % dot product of coeff with respecting x^k 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:41:20.493

您可以将其重写为[Vandermonde 矩阵](https://en.wikipedia.org/wiki/Vandermonde_matrix)作为系统方法。

也许`repmat`and`cumprod`功能会帮助你。

# java - Batik：当我从线程调用 invokeLater 时出现 IllegalStateException

> ID：14830292
> 
> 赞同：2
> 
> 时间：2013-02-12T10:24:59.090
> 
> 标签：java, multithreading, illegalstateexception, batik

我已经在这里发布了一个类似的问题：[Batik IllegalStateException when resizing the JComponent contains the JSVGCanvas](https://stackoverflow.com/questions/14601027/batik-illegalstateexception-when-resizing-the-jcomponent-containing-the-jsvgcanv)。但是，我可以将问题简化为最少的代码集。也许这可以帮助某人找到我的问题。

我从一个线程重复调用以下代码：

```
//currentComponent is a custom JComponent that contains the JSVGCanvas
if(currentComponent != null && currentComponent.getSvgCanvas().getUpdateManager() != null)
{
    try
    {
        currentComponent.getSvgCanvas().getUpdateManager().getUpdateRunnableQueue().invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                resetDocument();
            }

            private void resetDocument()
            {
                currentComponent.getSvgCanvas().setDocument(currentComponent.getSvgCanvas().getSVGDocument());
            }
        });
    }
    catch(Exception e)
    {
        System.out.println("Error");
        e.printStackTrace();
    }
} 
```

有时我会收到以下异常：

```
java.lang.IllegalStateException: RunnableQueue not started or has exited
    at org.apache.batik.util.RunnableQueue.invokeLater(RunnableQueue.java:277)
    at java.lang.Thread.run(Unknown Source) 
```

这是蜡染中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T06:11:02.303

我有类似的问题。相同的 IllegalStateException 仅在特殊用例中发生。

我的问题是我的代码是在

```
documentLoadingCompleted(SVGDocumentLoaderEvent P_event) 
```

since I'm executing my code during

```
gvtRenderingCompleted(GVTTreeRendererEvent P_e) 
```

everything works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:34:07.797

[http://xmlgraphics.apache.org/batik/javadoc/org/apache/batik/util/RunnableQueue.html#invokeLater%28java.lang.Runnable%29](http://xmlgraphics.apache.org/batik/javadoc/org/apache/batik/util/RunnableQueue.html#invokeLater%28java.lang.Runnable%29)

```
 public void invokeLater(Runnable r)

  Schedules the given Runnable object for a later invocation, and returns. An exception is thrown if the RunnableQueue was not started. 
  Throws:
    IllegalStateException - if getThread() is null. 
```

看起来好像您的 RunnableQueue 尚未启动...

# mysql - mysql表在存储过程中存在逻辑

> ID：14830293
> 
> 赞同：0
> 
> 时间：2013-02-12T10:25:00.770
> 
> 标签：mysql, stored-procedures

```
 DECLARE FoundCount INT;
  DECLARE db_Name VARCHAR(255);

SET @Project_List_val = CONCAT(Project_Number_val, '_List');
SET @db_Name='test_rs';

   SET @sql1 = CONCAT('SELECT COUNT(1) INTO', @FoundCount ,'
    FROM information_schema.tables
    WHERE table_schema =',@db_Name,'
    AND table_name =', @Project_List_val);

PREPARE stmt FROM @sql1;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

    IF FoundCount = 1 THEN
SET @sql = CONCAT(' INSERT INTO test (Panel_Id)
                    SELECT Panel_Id 
                    FROM ', @Project_List_val);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
END IF; 
```

这个存储过程执行得很好。但是当试图运行它时，它显示以下错误。

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“NULL”附近使用正确的语法

如果指定的表 (@Project_List_val) 存在，我需要运行第二个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:32:25.587

是的，解决了。@db_Name 和 @Project_List_Val 语句中的这些变量缺少单引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:33:19.097

像这样检查条件 @FoundCount=1 像这样

尝试这个

-- 声明 FoundCount INT；

```
 DECLARE db_Name VARCHAR(255);

SET @Project_List_val = CONCAT(Project_Number_val, '_List');
SET @db_Name='test_rs';

   SET @sql1 = CONCAT('SELECT COUNT(1) INTO ', @FoundCount ,'
    FROM information_schema.tables
    WHERE table_schema = ',@db_Name,'
    AND table_name =', @Project_List_val);

PREPARE stmt FROM @sql1;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

    IF @FoundCount = 1 THEN
SET @sql = CONCAT(' INSERT INTO test (Panel_Id)
                    SELECT Panel_Id 
                    FROM ', @Project_List_val);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
END IF; 
```

像这样使用：

```
SET @sql1 = CONCAT('SELECT COUNT(1) INTO ', @FoundCount ,'
    FROM information_schema.tables
    WHERE table_schema = ',@db_Name,'
    AND table_name =', @Project_List_val); 
```

我已经给了空间。复制这个然后给我打电话

# regex - htaccess 301 重定向和重写 url

> ID：14830295
> 
> 赞同：0
> 
> 时间：2013-02-12T10:25:08.923
> 
> 标签：regex, apache, mod-rewrite, http-status-code-301

我刚刚移动了一个站点，并且仍在查看一些旧页面。这是旧 url 结构的示例：

```
http://mydomain.com/text_version/personal_and_people_development.php 
```

以及我希望它如何重定向到：

```
http://mydomain.com/personal-and-people-development/ 
```

我想要它做的是 301`/text_version/`通过剥离`/text_version`路径部分重定向文件夹中的任何页面，将所有下划线转换为连字符并用`.php`尾部斜杠替换文件扩展名。

另请注意，我允许用户使用`www.`子域，并且将来可能需要`https://`访问。

是否可以像这样进行文件夹范围的 301 重定向，还是我必须指定每个单独的页面？如果是这样，有人可以给我一个指针，因为我不太擅长`mod_rewrite`or `regex`。

**更新：**由于将其他人的代码串在一起，这是我迄今为止设法拼凑的。这存储在`.htaccess`位于`/text_version`子文件夹中的文件中。

```
Options +FollowSymlinks
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule !.*\.php$ %{REQUEST_FILENAME}.php [L, QSA]

RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://mydomain.com/$1/ [L,R=301]

RewriteRule (.*)_(.*) $1-$2 [N] 
```

但是，这会转换：

```
http://mydomain.com/text_version/personal_and_people_development.php 
```

至

```
http://mydomain.com/personal-and-people-development.php/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:29:19.100

经过大量的混乱并且不理解其中的大部分内容后，我设法拼凑出这个解决方案：

```
Options +FollowSymlinks
RewriteEngine on

RewriteBase /
RewriteRule (.*)_(.*) $1-$2 [N]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ .*\.php.*$
RewriteRule ^(.*)\.php(.*)?$ /$1$2 [R=301,L]

RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ ^(www.)?mydomain.com/$1/ [L,R=301] 
```

# android - 按下主页按钮时Android清除活动列表

> ID：14830298
> 
> 赞同：3
> 
> 时间：2013-02-12T10:25:18.753
> 
> 标签：android, android-activity

我的应用程序有几个活动，第一个是登录屏幕，我希望始终强制用户登录，即使他们已经使用主页按钮停止了应用程序并恢复了它。有没有办法在android中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:34:54.237

`android:clearTaskOnlaunch="true"`在清单中的启动器活动中使用以及清单中使用的所有其他活动`android:finishOnTaskLaunch="true"`。

作为参考，请查看下面的链接，这将帮助您做您想做的事。

[按下HOME键时杀死所有活动android](https://stackoverflow.com/questions/5308088/kill-all-activities-when-home-key-is-pressed-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T22:50:45.247

这是我的主页按钮监听器。只需将它附加到您的主页按钮，它会在启动主页活动时清除堆栈： 主页按钮`home_button.setOnClickListener( new HomeButtonListener(this) );`所在`this`的活动的引用在哪里。我的主页活动的名称`Home.java`在我自己的`activities`包中。只是不想让任何人对`import activities.Home`我对`Home.class`.

```
import activities.Home;
import android.app.Activity;
import android.content.Intent;
import android.view.View;

public class HomeButtonListener implements View.OnClickListener 
{
    Activity activity;

    public HomeButtonListener( Activity activity ) 
    {
        this.activity = activity;
    }

    @Override
    public void onClick(View v) 
    {
        Intent intent = new Intent(activity, Home.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        activity.startActivity(intent);
    }

} 
```

# azure - Azure WadLogsTable 包含重复条目

> ID：14830301
> 
> 赞同：2
> 
> 时间：2013-02-12T10:25:29.047
> 
> 标签：azure, azure-diagnostics

我有一个 Web 角色（2 个实例）和一个工作角色（2 个实例），这两个角色都使用以下配置

```
 DiagnosticMonitorTraceListener tmpListener = new DiagnosticMonitorTraceListener();
        System.Diagnostics.Trace.Listeners.Add(tmpListener);
        string wadConnectionString = "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString";
        CloudStorageAccount storageAccount =
        CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

        RoleInstanceDiagnosticManager roleInstanceDiagnosticManager =
        storageAccount.CreateRoleInstanceDiagnosticManager(RoleEnvironment.DeploymentId,
        RoleEnvironment.CurrentRoleInstance.Role.Name, RoleEnvironment.CurrentRoleInstance.Id);

        DiagnosticMonitorConfiguration config = roleInstanceDiagnosticManager.GetCurrentConfiguration();
        config.Logs.BufferQuotaInMB = 500;
        config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D);
        config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;

        roleInstanceDiagnosticManager.SetCurrentConfiguration(config); 
```

当我添加一些消息时，我注意到辅助角色记录了两次相同的条目。我必须改变什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:20:28.320

感谢您的通知，我很乐意再次在这里重新发布我的提示作为答案：

Visual Studio 中的某些项目模板已将 AzureDiagnosticMonitorTraceListener 的实例注册到 Trace.Listeners 集合。在添加新的侦听器之前，您可能需要检查是否已经注册了这样的侦听器：

```
if (Trace.Listeners.OfType<AzureDiagnosticMonitorTraceListener>().Count() == 0)
{
    Trace.Listeners.Add(new AzureDiagnosticMonitorTraceListener());
} 
```

# ios - 在文本视图中显示自定义文本

> ID：14830303
> 
> 赞同：0
> 
> 时间：2013-02-12T10:25:37.513
> 
> 标签：ios, objective-c, uitextview, core-text

我有一个数据对象，想在文本视图中显示它。它位于一个看起来几乎像电子邮件视图的视图中。

我拥有的对象有一个“选择”数组，每个“选择”都有一个“名称”和“值”。value 属性可以是多行文本。

名称字段是选择的描述（即“名称”、“地址”、“评论”等）

我想展示这样的东西......

```
Name
    - Fogmeister
Address
    - 1 The Street
    - Town
    - Country
Comments
    - This is a long comment and
      spans over several lines breaking
      where necessary and has an indent. 
```

除了跨越多行的文本之外，我已经完成了所有工作。

理想情况下，我想使用属性字符串来加粗名称，但它可以与 iOS 5 一起使用，所以我不能。

问题，有没有比使用 UITextView 更好的方法来做到这一点？文本根本不可编辑。我想我可以使用核心文本自己渲染它？这是否允许我使用不同的文本样式（粗体等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:34:08.923

使用`UIWebview`然后使用 HTML 来呈现您想要的任何内容。

例如-：

```
 UIWebView *webView = [[UIWebView alloc] init];
    NSString *htmlString =  [NSString stringWithString:@"<html><body><h1>Head</h1><p>para</p></body></html>"];
    [webView loadHTMLString:htmlString baseURL:nil];
    [self.view addSubview:webView]; 
```

# c++ - 使用 ZeroMQ 的 C++ RPC 框架

> ID：14830304
> 
> 赞同：4
> 
> 时间：2013-02-12T10:25:38.503
> 
> 标签：c++, client-server, rpc, zeromq

我需要使用 ZeroMQ 推挽式套接字模式在 C++ 中编写客户端-服务器应用程序。客户端必须对服务器接口中指定的函数进行 RPC 调用。我想知道是否有一个主要在 C++ 中用于此目的的开源和商业上可用的库/框架。我做了一些谷歌搜索，似乎有些东西是用 python 编写的，但如果可能的话，我更喜欢用 ZeroMQ 提供的 C++ 中的东西。任何建议/指导表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:46:39.907

Google protobuf 提供为C++ 中可用 的[RPC 服务](https://developers.google.com/protocol-buffers/docs/proto#services)生成客户端方法包装器和存根。

用户必须明确定义用于此的传输机制，ZeroMQ 将是实现恕我直言的合适选择（所以这是您所要求的另一种方式，但最终没有区别）。

还有另一个 SO 问题提供了有关可用替代方案的更多详细信息：'[哪个 rpc/messaging 框架最适合这种情况？](https://stackoverflow.com/questions/10505764/which-rpc-messaging-framework-would-best-fit-this-case)'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:41:21.597

Thrift RPC 框架与作为传输的 ZeroMQ REQ/REP 套接字配合得很好。Thrift 源存储库包含一个 C++ 示例，其中有几个可重用的类：[https ://git-wip-us.apache.org/repos/asf?p=thrift.git;a=tree;f=contrib/zeromq;h =14bbc6f51dae649b423f9157c08abac27157d416;hb=头](https://git-wip-us.apache.org/repos/asf?p=thrift.git;a=tree;f=contrib/zeromq;h=14bbc6f51dae649b423f9157c08abac27157d416;hb=HEAD)

最近我启动了 ThriftZMQ 开源项目，目标是为不同语言的 Thrift 实现可互操作的 ZeroMQ 传输。但是，目前它只有 Java 实现：[https ://github.com/thriftzmq](https://github.com/thriftzmq)

# flash - AS3 flash.net.FileReference.browse() 函数仅显示小写扩展名（在 linux 上）

> ID：14830306
> 
> 赞同：1
> 
> 时间：2013-02-12T10:25:41.840
> 
> 标签：flash, actionscript

我正在调用 flash.net.FileReference.browse() 函数来打开一个对话框，供用户选择特定类型的文件（比如说波形文件）。但是，在 linux 中，对话框仅显示小写扩展名（即“.wav”扩展名），而不显示大写扩展名（即“.WAV”）。当我运行以下代码时，只显示带有“.wav”扩展名的文件......

```
var fileReferenceList : FileReferenceList = new FileReferenceList();
var filefilter : FileFilter = new FileFilter("Audio files", "*.WAV;*.wav");
fileReferenceList.browse([filefilter]); 
```

非常感谢任何解决此问题的帮助。

# c# - GridView 中的喜欢/不喜欢投票

> ID：14830308
> 
> 赞同：1
> 
> 时间：2013-02-12T10:25:52.157
> 
> 标签：c#, asp.net, sql

我正在创建一个大学网站，它有点像社交网站，人们可以在彼此的墙上张贴碎片。我想在每个剪贴簿留言中包含喜欢/不喜欢或投票赞成/否决。我创建了这张名为 tbl_like 的表...

点赞 | 废料 ID | FromId | 喜欢状态 | 时间

报废表：ScrapId | FromId | toId |消息 | 发送日期

接下来我该怎么做？

```
<asp:GridView ID="GridViewUserScraps" ItemStyle-VerticalAlign="Top" AutoGenerateColumns="False"
                GridLines="None" Width="100%" ShowHeader="False" runat="server" AlternatingRowStyle-BackColor="#A5A5A5"
                CellPadding="4" ForeColor="#333333">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <table align="left" cellpadding="1" cellspacing="2">
                                <tr>
                                    <td>
                                        <a href='<%#getUserHREF(Container.DataItem)%>'>
                                            <img align="middle" src='<%#getSRC(Container.DataItem)%>' border="0" width="50px" /></a>
                                    </td>
                                    <td>
                                        &nbsp;</td>
                                </tr>
                            </table>
                            <div align="justify">
                                <%#DataBinder.Eval(Container.DataItem, "Message")%>
                                <br />
                                <br />
                            </div>
                            <span class="SmallBlackText">Posted On: &nbsp;</span>
                            <asp:Label ID="lblSendDate" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SendDate")%>'></asp:Label>
                            </span>
                            <br />
                            <asp:LinkButton ID="lnklike" runat="server">Like</asp:LinkButton>
                            &nbsp;&nbsp;&nbsp;
                            <asp:LinkButton ID="lnkunlike" runat="server">unlike</asp:LinkButton>
                            &nbsp;&nbsp;
                            <asp:Label ID="lbllike" runat="server" Text="likes:"></asp:Label>
                            <asp:Label ID="lbllikecount" runat="server" Text="0"></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
                <RowStyle BackColor="#EFF3FB" />
                <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#2461BF" />
                <AlternatingRowStyle BackColor="White" />
            </asp:GridView> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            GetUserScraps(int.Parse(Request.QueryString["Id"].ToString()));
        }
    }
    public void GetUserScraps(int Id)
    {
        string getUserScraps = "SELECT u.Id as UserId,u.firstname,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID as ScrapId FROM [User] as u, Scrap as s WHERE u.Id=s.FromId AND s.ToId='" + Request.QueryString["Id"].ToString() + "'";
        string getlikes = "select COUNT(*) from tbl_like inner join Scrap on tbl_like.scrapid=Scrap.Id where tbl_like.likestatus=1 and tbl_like.scrapid=23";
        dt1=
        dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
        if (dt.Rows.Count > 0)
        {
            GridViewUserScraps.DataSource = dt;
            GridViewUserScraps.DataBind();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:36:06.977

使用`OnItemCommand`事件`GridView`。

在您的 html 中：

```
<asp:GridView .... OnItemCommand="CommandLinkClicked">

    <asp:LinkButton ID="lnklike" runat="server" CommandName="like" CommandArgument='<%# Eval("ScrapId")%>'>Like</asp:LinkButton>
    <asp:LinkButton ID="lnkunlike" runat="server"  CommandName="unlike" CommandArgument='<%# Eval("ScrapId")%>'>unlike</asp:LinkButton>

</asp:GridView> 
```

在后面的代码中：

```
protected void CommandLinkClicked(object sender, DataGridCommandEventArgs e)
{
    var scrapId = Int32.Parse(e.CommandArgument.ToString());
    switch (e.CommandName)
    {
        case "like" : 
                //do stuff
                break;
        case "unlike" : 
                //do stuff
                break;
    }
} 
```

`CommandArguemnt`应该是应该为类似/不类似状态更新的项目的 ID。

* * *

我清理了你的 SQL，现在它还返回每个废料的评论计数：

```
string getUserScraps = "SELECT u.Id as UserId,u.firstname,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID as ScrapId, ISNULL(COUNT(l.scrapid), 0) as CommentCount FROM Scrap as s INNER JOIN [User] as u on u.Id = s.FromId LEFT  JOIN tbl_like as l on l.scrapid = s.Id and l.likestatus = 1 WHERE s.ToId = '" + Request.QueryString["Id"].ToString() + "' GROUP BY u.Id,u.firstname,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID"; 
```

在这里你有更易读的版本（和上面一样！）

```
SELECT u.Id as UserId,u.firstname,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID as ScrapId, ISNULL(COUNT(l.scrapid), 0) as CommentCount
FROM Scrap as s
INNER JOIN [User] as u on u.Id = s.FromId
LEFT  JOIN tbl_like as l on l.scrapid = s.Id and l.likestatus = 1
WHERE s.ToId = 23 --here goes id!
GROUP BY u.Id,u.firstname,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID 
```

它计算每个片段的评论，如果没有评论则返回 0。将您的列绑定`GridView`到 CommentCount，它应该可以正常工作

# c# - 字互操作；用换行符替换一些文本

> ID：14830309
> 
> 赞同：1
> 
> 时间：2013-02-12T10:25:53.090
> 
> 标签：c#, ms-word, office-interop

我有一个word文档作为模板，我想替换一个占位符；#带有多行文本的地址。它的工作原理是 Environment.NewLine 被忽略。那么如何为每个新行添加换行符？我应该指出，在代码中，addressLines 是由集合中的每一行组成的字符串，由逗号和标准的新行常量分隔。

```
public static void PrintAddress(string companyName, List<string> lines, string outputFolder)
{
    // TODO put in linebreak for each line of the address
    lines.Insert(0, companyName);
    var lineEnd = "," + Environment.NewLine;
    var addressLines = string.Join(lineEnd, lines.ToArray());
    var application = new Application();
    var path = Path.Combine(HttpContext.Current.Server.MapPath(AppSettings.UploadFolder), SessionObjectsSCD.UploadedFile.FileName);
    var document = application.Documents.Open(path);
    WordDocumentClass.FindAndReplace(document, "#ADDRESS", addressLines);
    object filename = string.Format("{0}/{1}.docx", outputFolder, companyName);
    document.SaveAs(ref filename);

    // TODO print document

    application.Quit();
}

public static void FindAndReplace(Document document, string placeHolder, string newText)
{
    object missingObject = null;
    object item = WdGoToItem.wdGoToPage;
    object whichItem = WdGoToDirection.wdGoToFirst;
    object replaceAll = WdReplace.wdReplaceAll;
    object forward = true;
    object matchAllWord = true;
    object matchCase = false;
    object originalText = placeHolder;
    object replaceText = newText;

    document.GoTo(ref item, ref whichItem, ref missingObject, ref missingObject);
    foreach (Range rng in document.StoryRanges)
    {
        rng.Find.Execute(
            ref originalText,
            ref matchCase,
            ref matchAllWord,
            ref missingObject,
            ref missingObject,
            ref missingObject,
            ref forward,
            ref missingObject,
            ref missingObject,
            ref replaceText,
            ref replaceAll,
            ref missingObject,
            ref missingObject,
            ref missingObject,
            ref missingObject);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:24:19.127

我发现这就是答案；var lineEnd = ",\x0B";

下次我将尝试其他答案中提到的 Open XML Toolkit。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:19:48.357

我会建议反对 Office 互操作。更好的方法是使用 Open XML Toolkit，然后像 MailMerge 一样使用它。那里有多篇文章，但这是一个开始：

[http://blogs.msdn.com/b/ericwhite/archive/2009/02/05/move-insert-delete-paragraphs-in-word-processing-documents-using-the-open-xml-sdk.aspx](http://blogs.msdn.com/b/ericwhite/archive/2009/02/05/move-insert-delete-paragraphs-in-word-processing-documents-using-the-open-xml-sdk.aspx)

# javascript - 其他网站上的 Javascript 注入

> ID：14830311
> 
> 赞同：0
> 
> 时间：2013-02-12T10:25:56.037
> 
> 标签：javascript, bookmarklet

我想在我的网站中托管链接。包含`onlick`事件并在新选项卡中打开。打开或加载后，需要在加载的页面中添加一些代码。这可能吗？

而且它还需要`onclick`在加载页面的所有链接中添加事件。

```
<a href="url" onclick="somescript()" target="_blank"> sometext here </a> 
```

在我网站的页面上。和 JavaScript

```
<script>
onload = zawgyi ();
function zawgyi() {var fontfamily='Zawgyi-One';
    document.getElementByTagName('body')[0].style.fontFamily=fontfamily;
    //and all the way to p,div,span and so on
};
function somescript(){/*code need to inject the all function including javascript   
    itself  and onclick event on all <a> tag.*/
}:
</script> 
```

我知道我可以用书签来做到这一点。但我不想每次都点击。我的目标是通过访问我的网站来阅读 zawgyi 网站，之后用户可以照常使用。
我也想知道实现目标的其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:13:34.277

感谢您尝试做的事情。现在想想如果可能的话，有人会做什么样的坏事。这就是为什么这是不可能的。该安全规则称为“同源策略”。

解决此策略的方法是创建用户脚本、扩展程序或插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:55:09.537

不可能。使用 Greasmonkey 可以避免每次访问时都必须点击书签。

# java - 从 Java 8 中的 java.util.stream.Stream 中检索列表

> ID：14830313
> 
> 赞同：478
> 
> 时间：2013-02-12T10:26:08.783
> 
> 标签：java, lambda, collections, java-8, java-stream

我正在使用 Java 8 lambdas 来轻松过滤集合。但是我没有找到一种简洁的方法来将结果检索为同一语句中的新列表。这是我迄今为止最简洁的方法：

```
List<Long> sourceLongList = Arrays.asList(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L);
List<Long> targetLongList = new ArrayList<>();
sourceLongList.stream().filter(l -> l > 100).forEach(targetLongList::add); 
```

网络上的示例没有回答我的问题，因为它们在没有生成新结果列表的情况下停止。必须有更简洁的方法。我本来预计，`Stream`该类的方法为`toList()`, `toSet()`, ...</p>

`targetLongList`有没有办法可以通过第三行直接分配变量？

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2013-02-12T12:22:50.387

如果您的流保持顺序，您正在做的可能是最简单的方法 - 否则您将不得不在`forEach`.

`forEach(targetLongList::add)`[稍后编辑：调用sequential() 是必要的原因是，如果流是并行的，则代码( ) 将是活泼的。即使这样，它也不会达到预期的效果，因为`forEach`它是明确的非确定性的——即使在顺序流中，也不能保证元素处理的顺序。您必须使用`forEachOrdered`以确保正确排序。Stream API 设计者的意图是您将在这种情况下使用收集器，如下所示。]

另一种选择是

```
targetLongList = sourceLongList.stream()
    .filter(l -> l > 100)
    .collect(Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2013-03-17T06:28:20.593

更新：

另一种方法是使用`Collectors.toList`：

```
targetLongList = 
    sourceLongList.stream().
    filter(l -> l > 100).
    collect(Collectors.toList()); 
```

以前的解决方案：

另一种方法是使用`Collectors.toCollection`：

```
targetLongList = 
    sourceLongList.stream().
    filter(l -> l > 100).
    collect(Collectors.toCollection(ArrayList::new)); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-11-20T09:15:39.923

我喜欢使用一个 util 方法，`ArrayList`它在我想要的时候返回一个收集器。

我认为使用的解决方案`Collectors.toCollection(ArrayList::new)`对于这种常见的操作来说有点太吵了。

例子：

```
ArrayList<Long> result = sourceLongList.stream()
    .filter(l -> l > 100)
    .collect(toArrayList());

public static <T> Collector<T, ?, ArrayList<T>> toArrayList() {
    return Collectors.toCollection(ArrayList::new);
} 
```

有了这个答案，我还想展示创建和使用自定义收集器是多么简单，这通常非常有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-18T10:03:46.913

```
collect(Collectors.toList()); 
```

这是您可以用来将任何 Stream 转换为 List 的调用。

更具体地说：

```
 List<String> myList = stream.collect(Collectors.toList()); 
```

从：

[https://www.geeksforgeeks.org/collectors-tolist-method-in-java-with-examples/](https://www.geeksforgeeks.org/collectors-tolist-method-in-java-with-examples/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-27T00:08:41.900

[如果您有一组原语，则可以使用Eclipse Collections](http://www.eclipse.org/collections/)中可用的原语集合。

```
LongList sourceLongList = LongLists.mutable.of(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L);
LongList targetLongList = sourceLongList.select(l -> l > 100); 
```

如果您无法从以下位置更改 sourceLongList `List`：

```
List<Long> sourceLongList = Arrays.asList(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L);
List<Long> targetLongList = 
    ListAdapter.adapt(sourceLongList).select(l -> l > 100, new ArrayList<>()); 
```

如果你想使用`LongStream`：

```
long[] sourceLongs = new long[]{1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L};
LongList targetList = 
    LongStream.of(sourceLongs)
    .filter(l -> l > 100)
    .collect(LongArrayList::new, LongArrayList::add, LongArrayList::addAll); 
```

注意：我是 Eclipse Collections 的贡献者。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-10-06T07:13:23.923

更有效的方法（避免创建源列表和过滤器自动拆箱）：

```
List<Long> targetLongList = LongStream.of(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L)
    .filter(l -> l > 100)
    .boxed()
    .collect(Collectors.toList()); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-01-04T08:36:03.173

Java 16 中有一个新方法[Stream.toList() ：](https://download.java.net/java/early_access/jdk16/docs/api/java.base/java/util/stream/Stream.html#toList())

```
List<Long> targetLongList = sourceLongList
         .stream()
         .filter(l -> l > 100)
         .toList(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-25T10:18:01.997

如果您不介意使用 3rd 方库，AOL 的[cyclops-react](https://github.com/aol/cyclops-react)库（披露我是贡献者）具有所有[JDK Collection](https://medium.com/@johnmcclean/extending-jdk-8-collections-8ae8d43dd75e#.j5lxtrqze)类型的扩展，包括[List](http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/ListX.html)。ListX 接口扩展了 java.util.List 并添加了大量有用的运算符，包括过滤器。

你可以简单地写 -

```
ListX<Long> sourceLongList = ListX.of(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L);
ListX<Long> targetLongList = sourceLongList.filter(l -> l > 100); 
```

ListX 也可以从现有的列表中创建（通过 ListX.fromIterable）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-25T11:57:29.987

LongStream 类和类似的 IntStream 和 DoubleStream 类提供了 collect 方法的另一种变体。

```
<R> R collect(Supplier<R> supplier,
              ObjLongConsumer<R> accumulator,
              BiConsumer<R,R> combiner) 
```

对此流的元素执行可变归约操作。可变归约是这样一种归约，其中归约值是一个可变结果容器，例如 ArrayList，并且通过更新结果的状态而不是替换结果来合并元素。这会产生等效于：

```
R result = supplier.get();
  for (long element : this stream)
       accumulator.accept(result, element);
  return result; 
```

**与 reduce(long, LongBinaryOperator) 一样，collect 操作可以并行化，无需额外同步。这是终端操作。**

用这个收集方法回答你的问题如下：

```
 LongStream.of(1L, 2L, 3L, 3L).filter(i -> i > 2)
    .collect(ArrayList::new, (list, value) -> list.add(value)
    , (list1, list2) -> list1.addAll(list2)); 
```

下面是方法参考变体，它非常聪明，但有些难以理解：

```
 LongStream.of(1L, 2L, 3L, 3L).filter(i -> i > 2)
    .collect(ArrayList::new, List::add , List::addAll); 
```

下面将是 HashSet 变体：

```
 LongStream.of(1L, 2L, 3L, 3).filter(i -> i > 2)
     .collect(HashSet::new, HashSet::add, HashSet::addAll); 
```

同样 LinkedList 变体是这样的：

```
 LongStream.of(1L, 2L, 3L, 3L)
     .filter(i -> i > 2)
     .collect(LinkedList::new, LinkedList::add, LinkedList::addAll); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-02T15:42:21.093

如果有人（像我一样）正在寻找处理对象而不是原始类型的方法，那么使用[`mapToObj()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToObj-java.util.function.IntFunction-)

```
String ss = "An alternative way is to insert the following VM option before "
        + "the -vmargs option in the Eclipse shortcut properties(edit the "
        + "field Target inside the Shortcut tab):";

List<Character> ll = ss
                        .chars()
                        .mapToObj(c -> new Character((char) c))
                        .collect(Collectors.toList());

System.out.println("List type: " + ll.getClass());
System.out.println("Elem type: " + ll.get(0).getClass());
ll.stream().limit(50).forEach(System.out::print); 
```

印刷：

```
List type: class java.util.ArrayList
Elem type: class java.lang.Character
An alternative way is to insert the following VM o 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-02T07:46:37.757

这是[AbacusUtil的代码](https://github.com/landawn/AbacusUtil)

```
LongStream.of(1, 10, 50, 80, 100, 120, 133, 333).filter(e -> e > 100).toList(); 
```

披露：我是 AbacusUtil 的开发者。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-23T22:54:23.510

```
String joined = 
                Stream.of(isRead?"read":"", isFlagged?"flagged":"", isActionRequired?"action":"", isHide?"hide":"")
                      .filter(s -> s != null && !s.isEmpty())
                      .collect(Collectors.joining(",")); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-26T12:15:06.483

您可以重写代码如下：

```
List<Long> sourceLongList = Arrays.asList(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L);
List<Long> targetLongList = sourceLongList.stream().filter(l -> l > 100).collect(Collectors.toList()); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-06T18:25:20.177

在可变列表中收集：

```
targetList = sourceList.stream()
                       .filter(i -> i > 100) //apply filter
                       .collect(Collectors.toList()); 
```

在不可变列表中收集：

```
targetList = sourceList.stream()
                       .filter(i -> i > 100) //apply filter
                       .collect(Collectors.toUnmodifiableList()); 
```

`collect`来自[JavaDoc](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-)的解释：

> 使用收集器对此流的元素执行可变归约操作。Collector 封装了用作 collect(Supplier, BiConsumer, BiConsumer) 的参数的函数，允许重用收集策略和组合收集操作，例如多级分组或分区。如果流是并行的，并且收集器是并发的，并且流是无序的或收集器是无序的，则将执行并发归约（有关并发归约的详细信息，请参阅收集器。）
> 
> 这是终端操作。
> 
> 当并行执行时，可以实例化、填充和合并多个中间结果，以保持可变数据结构的隔离。因此，即使与非线程安全的数据结构（例如 ArrayList）并行执行，也不需要额外的同步来进行并行归约。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2016-08-12T07:04:25.367

如果你不使用`parallel()`这将工作

```
List<Long> sourceLongList = Arrays.asList(1L, 10L, 50L, 80L, 100L, 120L, 133L, 333L);

List<Long> targetLongList =  new ArrayList<Long>();

sourceLongList.stream().peek(i->targetLongList.add(i)).collect(Collectors.toList()); 
```

# jquery - 为什么 jQuery Validate 插件在不调用 validate() 的情况下进行验证？

> ID：14830314
> 
> 赞同：-2
> 
> 时间：2013-02-12T10:26:08.490
> 
> 标签：jquery, jquery-validate

我刚刚给了 validate (errorElement, ...) 选项，我设置了规则，没有调用 validate 方法，或者将它与任何事件关联，但是 jQuery 自动验证，如何控制它何时验证？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T16:26:37.900

您将需要提供更多关于您正在尝试做的事情的详细信息，但我可以回答您到目前为止所写的问题。

> **标题**：为什么 jquery 验证而不调用验证？

[`.validate()`被调用*一次*以初始化表单上的插件](http://docs.jquery.com/Plugins/Validation/validate#options)。它不是一种按需触发验证的方法。初始化后，表单将根据插件中内置的各种事件回调自动验证。更多详情如下...

> **OP**：我刚刚为验证（errorElement，...）提供了选项，并且我设置了规则，没有调用验证方法，或者将其与任何事件相关联，但是 jquery 自动验证，如何控制它何时验证？

您不需要将插件与任何事件相关联，因为插件已经自动执行此操作。如果没有，那就太没用了。

[当您调用时`.validate()`，您正在初始化表单上的插件](http://docs.jquery.com/Plugins/Validation/validate#options)。所以，是的，这意味着表单现在已经准备好了，它将自动对所有常见事件触发验证测试，例如`submit`, `onkeyup`,`onfocusout`和 select, button & checkbox `click`。你为什么不想要那个？

要以编程方式执行验证测试，您可以调用[内置`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid)，该方法非常类似于`submit`事件，因为它将触发*整个表单*的验证测试，并且表单将显示任何错误。 `.valid()`还将返回一个布尔值`true`或`false`指示表单是否通过了验证测试。

如果您只需要在单个元素而不是整个表单上触发验证测试，您可以使用`$('#myelement').valid()`. 同样，显示任何消息并返回一个布尔值。

如果出于某种原因您需要完全“禁用”和“启用”验证，则不能直接执行此操作，因为没有用于从表单取消绑定插件的内置方法。但是，您可以使用[内置的`rules('remove')`和`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)来模拟它。如果对任何字段没有任何规则，它只会表现得好像根本没有验证一样。但是，您仍然可以使用其他插件选项，例如[`submitHandler`回调](http://docs.jquery.com/Plugins/Validation/validate#toptions)，以防万一您使用 ajax 进行数据提交。

# c# - 使用 Linq 时按原始索引重新排序

> ID：14830317
> 
> 赞同：1
> 
> 时间：2013-02-12T10:26:26.300
> 
> 标签：c#, linq

我一直在寻找解决这个问题的方法，虽然我发现了类似的问题，但我找不到这个特定问题的答案。我已经概括了这个问题，但它的情况如下：

我有以下 int[]

```
[423]
[234]
[5]
[79]
[211]
[1001] 
```

我想使用 linq 仅选择小于 200 或大于 300 的条目，然后按原始数组索引排序，以保证最终数组为：

```
[423]
[5]
[79]
[1001] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:30:01.393

当您过滤具有`Enumerable.Where`原始顺序的对象时，将被保留。[MSDN](http://msdn.microsoft.com/en-us/library/dd460677%28v=vs.110%29.aspx)：

> LINQ to Objects，确实保留了排序

再说几句。您可以将其`Where`视为 foreach 循环中的简单过滤元素，它以与进入循环完全相同的顺序逐一返回项目。像这样：

```
public IEnumerable<T> Where(this IEnumerable<T> sequence, Func<T,bool> predicate)
{
    foreach(var item in sequence)
       if (predicate(item))
           yield return item;
} 
```

[在乔恩博客](http://msmvps.com/blogs/jon_skeet/archive/2010/09/03/reimplementing-linq-to-objects-part-2-quot-where-quot.aspx)上阅读更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:30:14.653

LINQ to object 保留了选择的顺序，所以一个简单的 where 子句就可以完成这项工作。

[PLINQ 中的订单保留](http://msdn.microsoft.com/en-us/library/dd460677%28v=vs.110%29.aspx)

在 PLINQ 中，目标是在保持正确性的同时最大化性能。查询应尽可能快地运行，但仍会产生正确的结果。在某些情况下，正确性需要保留源序列的顺序；但是，排序可能在计算上很昂贵。因此，默认情况下，PLINQ 不保留源序列的顺序。在这方面，PLINQ 类似于 LINQ to SQL，但**与 LINQ to Objects 不同，后者确实保留了排序**。

但如果你愿意，你可以选择`index`带有值的，稍后`OrderBy`使用`index`

```
int[] array = new [] 
{
    423,234,5,79,211,1001
};

 var sortedArray =  array.Select((r, i) => new { value = r, index = i })
                         .Where(t => t.value < 200 || t.value > 300)
                         .OrderBy(o => o.index)
                         .Select(s => s.value).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:30:40.513

无需进行任何排序，将保持顺序。

```
var someInts = new int[] { 423, 234, 5, 79, 211, 1001 };
var filteredInts = someInts.Where(i => i < 200 || i > 300);

// filteredInts = [423, 5, 79, 1001] 
```

# html - 为什么 stackoverflow 的 google prettifier 与 , etc 标签一起使用 or tag?

> ID：14830324
> 
> 赞同：-2
> 
> 时间：2013-02-12T10:26:47.910
> 
> 标签：html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:31:27.040

The `<code>` element does support arbitrary content. You just have to encode the HTML int here, like this:

```
<code>
&lt;html&gt; HTML document &lt;/html&gt;
</code> 
```

That's what stackoverflow does if you type

```
<html> HTML document </html> 
```

# java - Rundeck 在多台服务器上运行命令的任何替代方案？

> ID：14830327
> 
> 赞同：5
> 
> 时间：2013-02-12T10:26:49.433
> 
> 标签：java, rundeck

我正在 Java 程序中实现任务工作流。其中一项任务是在多个 Linux 服务器上运行一些命令。

服务器是动态确定的——从 XML 文件中读取。我检查了 Rundeck 的 API，但似乎我必须提前配置服务器，这不适合我的需要。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:05:28.090

一个答案是使用 rundeck，我认为你只需要 rundeck 来动态加载你的节点。

要使其动态化，您需要刷新项目。只需重新启动 rundeck 或使用[api 刷新方法](http://rundeck.org/docs/api/index.html#refreshing-resources-for-a-project)。我没有尝试过后者，我认为后者是更好的解决方案。[资源模型](http://rundeck.org/docs/manual/rundeck-basics.html#resource-model)支持文件和从外部源 URL 获取服务器节点列表。

但是，如果您自己推出一个更好的答案，也许 SSH 并考虑一个[用于 Java 的 SSH 库](https://stackoverflow.com/questions/995944/ssh-library-for-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:04:42.553

如果您考虑使用外部 API，请查看使用 JSCAPE 的[SSH Factory for Java](http://www.jscape.com/products/components/java/ssh-factory/)。文档可位于[此处](http://files.jscape.com/sshfactory/docs/html/index.html?overview19.html)。

# java - 通过通知打开应用程序时按钮重置

> ID：14830328
> 
> 赞同：0
> 
> 时间：2013-02-12T10:26:50.030
> 
> 标签：java, android, button, reset, oncreate

我创建了一个应用程序，您可以在其中按“开始记录”，它会启动一个定期记录数据的服务。按钮更改为显示“停止记录”。然后，您将应用程序最小化并允许它在您开展业务时在后台登录。但是，我必须实现“startForeground”，因为应用程序将关闭/被销毁，并且需要“startForeground”通知。

现在，当我运行应用程序并最小化，然后重新打开应用程序时，这很好，但是如果我尝试通过通知重新打开它会重置屏幕，以便按钮现在再次显示“开始记录”，然后单击时开始再次记录（接管当前服务）。该服务仍在记录，即使它说“开始记录”，所以它与屏幕没有保存我假设的按钮状态有关？

我试过这个，但无济于事：

```
@Override
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   outState.putString("message", (String) but1.getText());
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.logorcheck);
    System.out.println("goes in oncreate");
    if (savedInstanceState != null) {
        but1.setText(savedInstanceState.getString("message")); 
```

以下是一些片段：

日志服务.java

```
NotificationManager nm = (NotificationManager) this
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Resources res = this.getResources();
    Notification.Builder builder = new Notification.Builder(this);

    builder.setContentIntent(contentIntent)
                .setSmallIcon(R.drawable.arrow_up_float)
                .setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.arrow_down_float))
                .setWhen(System.currentTimeMillis())
                .setAutoCancel(true)
                .setContentTitle("App")
                .setContentText("Service running OK");
    Notification n = builder.getNotification();
    // !
    startForeground(100, n);
    return Service.START_STICKY; 
```

LogOrCheck.java

```
if (isClicked) {
                Context context = getApplicationContext();
                Toast toast = Toast.makeText(context, "Please press 'MINIMIZE' at the top to continue logging.", Toast.LENGTH_LONG);
                toast.setGravity(Gravity.TOP|Gravity.RIGHT, 10, 55);
                toast.show();
                System.out.println("Start logging");
                but1.setText("Stop Logging");
                but1.setTextColor(Color.RED);
                // START SERVICE, DONE. (STOP IS BELOW).
                startService(myIntent);
                isClicked = false;
            } 
            else if (!isClicked) {
                System.out.println("Stop Logging");
                but1.setText("Start Logging");
                // STOP SERVICE, DONE.
                stopService(myIntent);
                but1.setTextColor(Color.BLACK);
                isClicked = true;
            } 
```

感谢您的帮助，这似乎是一个简单的解决方法，我无法弄清楚如何去做，尤其是使用 notificationBuilder。对不起，很长的消息！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:24:46.483

您可以做的最简单的事情是在 LoggingService.java 中创建一个静态布尔变量，例如 isLogging，并在发生更改时在服务中相应地设置它。

在活动的 onResume() 中访问该变量并相应地设置按钮状态。

# ruby-on-rails - 如何在 Active Record 中实现这种加入？

> ID：14830329
> 
> 赞同：1
> 
> 时间：2013-02-12T10:26:52.190
> 
> 标签：ruby-on-rails, rails-activerecord

我正在开发具有以下关联的应用程序：

```
class Chart < ActiveRecord::Base
  belongs_to :chart_group
  has_many :charts, :through => :chart_groups
end

class ChartGroup < ActiveRecord::Base
  has_many :charts
  belongs_to :report
end

class Chart < ActiveRecord::Base
  belongs_to :chart_group
end 
```

应用程序的一部分要求我们显示前 20 个报告，并且对于每个报告，我们显示第一个图表（作为一种快照）。他们这样做的方式是，在控制器中只选择报告；

```
@reports = Report.limit(20) 
```

然后在意见中只是做；

```
@reports.each do |report|
   <%= report.charts.first.title %>
end 
```

这看起来很好并且运行速度很快，但与“N + 1 查询问题”相冲突——我将在每个报告中获得一个数据库往返，因此有 21 次点击。所以我有几个问题

1) 如何更改我的原始查询以获取第一个图表？我尝试使用“.joins”，但问题是任何一份报告都可能有大量图表，并且可能有数百个报告。我不知道如何将“仅第一个图表”部分包含在语句中。

2）实际上是按照我的方式做的，我注意到日志都在说“缓存加载”-rails 在这里为我做了一些魔术吗？我什么都不担心吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:10:36.327

Rail 的[Eager Loading](http://railscasts.com/episodes/22-eager-loading)在这里应该有所帮助。

以下应加载与请求的报告关联的所有图表：

```
@reports = Report.limit(20).includes(:charts) 
```

AR 将加载所有请求的报告`limit(20)`并查找与这些报告关联的所有图表，并将这些图表加载到内存中。

仅将每个报告的第一个图表加载到内存中需要额外的工作：

*   添加一个额外的列`reports.first_chart_id`
*   定义一个额外的关联 from `Report`to`Chart`与`first_chart_id`

报告应修改如下：

```
class Report < ActiveRecord::Base
  belongs_to :first_chart, :foreign_key => 'first_chart_id', :class_name => 'Chart'
end 
```

然后：

```
@reports = Report.limit(20).includes(:first_chart) 
```

唯一需要注意的是，必须在`Report`实例创建/更新期间设置 first_chart_id。

另一种解决方案是执行两个数据库查询：

获取所有报告然后遍历获取的报告，提取@report.id 然后查询图表以仅返回第一个图表（不知道第一个图表是如何定义的）

```
@reports = Report.limit(20)
@report_ids = @reports.collect{|r| r.id}
@first_charts = Chart.find_by_report_ids(@report_ids)

class Chart
  def self.find_by_report_ids(report_ids)
    {}.tap do |result|
      #not sure what your scheme is like for Report and Chart... so guessing  
      where(:id => report_ids).group(:report_id).each do |chart|
        result[chart.report_id] = chart
      end
    end
  end
end 
```

find_by_report_ids 返回由 索引的图表的哈希值`report.id`，这使您可以快速访问视图中报告的第一个图表

```
@reports.each do |report|
   <%= @first_charts[report.id].title %>
end 
```

不幸的是，有时您必须为多对多类型关系编写额外的代码，但这些大多可以通过使用两次 DB 行程来解决，这仍然比 O(N) 查询好得多。

高温高压

# php - 来自mysql的JsTree ul li

> ID：14830330
> 
> 赞同：0
> 
> 时间：2013-02-12T10:26:54.500
> 
> 标签：php, mysql, list, jstree

我正在寻找从 JsTree 插件提供的脚本 server.php 生成的条目中输出有序列表（UL -> Li ...）的最简单方法。

![MySql DB 中 JsTree 结构的屏幕截图](../Images/ba302c6a0d090168f19c18ecd730062e.png)

谢谢你的灯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:52:26.827

也许它可以帮助你：

```
SELECT * FROM table ORDER BY level; 
```

你会收到这样的东西：

```
$a = array(
    array('id' => 1, 'parent_id' => 0, 'level' => 0),
    array('id' => 2, 'parent_id' => 1, 'level' => 1),
    array('id' => 3, 'parent_id' => 1, 'level' => 1),
    array('id' => 4, 'parent_id' => 2, 'level' => 2),
    array('id' => 5, 'parent_id' => 3, 'level' => 2)
); 
```

准备这个数组：

```
$prepare = array();

foreach ($a as $record) {
    $prepare[$record['id']] = $record;
} 
```

并递归遍历它：

```
function getTree($array, $id, $level = 0)
{
    if ($array[$id]['level'] != $level) {
        return;
    }
    echo '<ul>' . PHP_EOL;
    echo '<li>' . $id;
    foreach ($array as $data) {
        if (($data['parent_id'] === $id)){
            getTree($array, $data['id'], $level + 1);
        }

    }
    echo '</li>'. PHP_EOL;
    echo '</ul>'. PHP_EOL;
}

getTree($prepare, 1); 
```

它的例子确实返回：

```
<ul>
<li>1<ul>
<li>2<ul>
<li>4</li>
</ul>
</li>
</ul>
<ul>
<li>3<ul>
<li>5</li>
</ul>
</li>
</ul>
</li>
</ul> 
```

# c# - 在 C# 中以双精度返回时间间隔

> ID：14830331
> 
> 赞同：-4
> 
> 时间：2013-02-12T10:26:55.050
> 
> 标签：c#, time, group-by

我是这个论坛和 C# 编程的新手。在这个项目上工作，如果控制语句完成后，我必须将时间间隔作为双精度返回。代码片段如下。请告诉我我做错了什么。它没有回来`d`；

```
public double GetInterval()
{
    double d;
    DateTime now = new DateTime();

    if (cb5Min.Checked)
    {
        d = ((60 - now.Second) * 1000 - now.Millisecond);            
    }
    else if (cb15Min.Checked)
    {
        d= ((900 - now.Second) * 1000 - now.Millisecond);
    }

    return d;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:30:03.920

并非所有路径都会更新 d. 如果 cb5Min.checked 为假且 cb15Min.checked 为假，则代码将返回 d 的初始化值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:29:28.533

请在[此处](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)`TimeSpan`查看结构和示例

# asp.net - 在 ServiceModel 客户端配置部分中找不到引用合同 ServiceReference1.Service1Soap 的默认端点元素

> ID：14830332
> 
> 赞同：0
> 
> 时间：2013-02-12T10:27:03.080
> 
> 标签：asp.net, web-services, endpoint

我遇到的问题与本论坛中的许多其他问题非常相似，但这些解决方案都不适合我——也许是因为我不明白。

我有一个非常简单的 ASP.NET Web 服务，只有 4 个简单的方法。为了测试它，我从一个新创建的控制台应用程序连接到它，它工作得非常完美——只需添加 URL 并让 Visual Studio 生成客户端代码（它生成了 2 个端点，我需要删除其中的 1 个端点才能使它工作，我想这并不重要）。

然后我尝试在用户控制项目中做同样的事情（这意味着它是一个类库）。然后突然它抛出一个异常，并在这个问题的标题中出现类似 on 的消息。

我在 Visual Studio 中本地运行用户控件项目，因为它仍在测试中。

我什至尝试将服务模型部分从另一个项目（它工作的地方）复制/粘贴到我的用户控制项目的 app.config 中 - 仍然无法正常工作。

有任何想法吗？

编辑：这是 app.config 文件的 servicemodel 部分

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="Service1Soap" />
  </basicHttpBinding>
  <customBinding>
    <binding name="Service1Soap12">
      <textMessageEncoding messageVersion="Soap12" />
      <httpTransport />
    </binding>
  </customBinding>
</bindings>
<client>
  <endpoint address="http://localhost:49737/Service1.asmx" binding="basicHttpBinding"
    bindingConfiguration="Service1Soap" contract="ServiceReference1.Service1Soap"
    name="Service1Soap" />
</client> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T18:38:32.483

对我来说，将 serviceModel 部分从我的类库复制到 ASP.Net 网站的 web.config 后，我仍然收到此错误。

一段时间后，我意识到您必须完全限定端点的 contract 属性，因为该服务位于具有不同命名空间的类库中。

即在配置中说... contract="MyService.SoapService" 等 你需要完全限定这个... contract="MyClassLibraryName.Namespace.MyService.SoapService"。

康纳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:37:46.730

@kevin johnson：我不确定“用户控制项目”是什么意思。将服务模型配置从工作项目复制到您的 app.config 将不起作用，因为当您必须使用 Web 服务时，您要么必须将参考文件添加到应用程序配置*文件*中你的所作所为。

# jquery - Zepto 和 jQuery 2 有什么区别？

> ID：14830334
> 
> 赞同：83
> 
> 时间：2013-02-12T10:27:11.390
> 
> 标签：jquery, zepto

有两个类似的项目：

[Zepto.js](http://zeptojs.com/)

> Zepto 是一个用于现代浏览器的极简 JavaScript 库，具有很大程度上与 jQuery 兼容的 API。

[jQuery 2.0](http://blog.jquery.com/2013/01/14/the-state-of-jquery-2013/)

> jQuery 2.0 beta：这是您对未来的品味，一个可以更快、更小而无需支持 IE 6、7 或 8 的 jQuery。它是特定于平台的 HTML 应用程序的绝佳选择。

这只是关于性能还是他们遵循不同的方法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-12T10:33:42.300

Zepto.js 和 jQuery 之间的主要区别在于它们各自的文件大小是 Zepto.js 的 ~20kb（缩小，未压缩）而不是 jQuery 的 ~80kb，Zepto.js 的 ~10kb（压缩，压缩）而不是 jQuery 的 ~30kb。此外，Zepto 对浏览器的支持`IE<10`要么缺乏要么不能保证，[它的目标平台](http://zeptojs.com/#browsers)是：

*   Safari 5+（桌面）
*   Chrome 5+（桌面）
*   火狐浏览器 4+
*   iOS 4+ Safari
*   安卓 2.2+ 浏览器
*   其他基于 WebKit 的浏览器/运行时
*   webOS 1.4.5+ 浏览器
*   黑莓平板操作系统 1.0.7+ 浏览器
*   亚马逊丝绸 1.0+
*   歌剧 10+
*   互联网浏览器 10+

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-13T19:13:27.327

jquery 2 是 ~30kb，而 zepto 是 ~10kb，当两者都被压缩和缩小时。非 gzip 压缩但已缩小，jquery 2 约为 80kb，zepto 约为 30kb。

使用分析程序检查您网站的受众。如果你的大部分用户使用 IE9，你需要 jquery 并且 zepto 不会飞。如果超过百分之几使用 IE8 或更低版本，并且您无法面对让他们在没有您的网站的情况下陷入困境，您将需要使用 jquery 1。如果您的目标是最后一个，对不起 - 很多新的闪亮玩具不会为你工作。

如果您正在为 android/ios/phonegap 等构建 html5 应用程序，那么您主要针对 webkit，因此 zepto 确实可以为您节省大量空间。zepto 存在的主要见解和原因是，当仅在 webkit 平台上运行时，许多 jquery 的跨平台变通方法都是不必要的。

Zepto 还添加了一些触摸事件处理程序来协助移动开发，但主要是您需要考虑的页面权重与平台支持。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-28T23:52:40.243

这是一个有点老的问题，但我想增加性能。据我所知，Zepto 的表现优于 jQuery。

这个[jsPerf](http://jsperf.com/zepto-vs-jquery-2013/15)显示了不同的结果。与 Zepto 相比，我可以经常使用 jQuery 的类选择（单个元素） 137%。对于 ID 选择，我可以经常使用 jQuery 的 285%。

考虑到大多数应用程序，这是一个巨大的交易，DOM 交互是唯一重要的性能统计数据（网络请求除外）。

还看看那个性能，我可以看到我可以像 jQuery 一样经常做 document.getElementsByClassNAme 8326%，所以如果可能的话，我们都应该放弃所有这些:-)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-18T20:10:03.540

Zepto 缺少 jQuery 提供的延迟/承诺 API。有一个附加组件，Simply Deferred，可以解决这个问题：[https](https://github.com/sudhirj/simply-deferred) ://github.com/sudhirj/simply-deferred 。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-27T14:22:21.583

**我认为从未使用 zepto 快速过渡到 web 看看在他冰冷的洞穴深处，聪明而强大的 Yeti 听到人们问：“Zepto 去哪儿了？” 回到 Foundation 4 构思时，我们切换到 Zepto（带有 jQ​​uery 选项），因为它的文件更小，加载时间更快。**

*但随着时间的推移，我们发现更轻的文件大小并没有转化为更好的整体性能。当然，Zepto 下载速度很快。但是一旦加载，它就没有jQuery那么快了。许多第三方插件需要 jQuery，而不是 Zepto，这并没有帮助——事实上，我们发现一些第三方 JavaScript 与 Zepto 完全冲突。*

维护不同的代码库对我们来说也不容易。例如，Zepto 缺乏适当的高度计算功能，使得某些网格计算变得困难。

为了解决这一切，答案就像春天的喜马拉雅天空一样清晰：Foundation 5 使用 jQuery 2。除了更快的速度和行业接受度之外，jQuery 2 还受益于更好的文档和支持。jQuery 与 API 兼容。

**

> 但是我们假设 Zepto 会比 jQuery 更快。我们不想做同样的假设两次，所以我们测试了 Zepto 与 jQuery 2。结果：jQuery 2 每秒有更多的操作。这为 Foundation 5 提供了更好的性能，从而为所有用户带来更好的体验。

**

最后，我们希望帮助人们更快地设计出伟大的产品——而这一次，这意味着为世界上响应速度最快的前端框架本身提供速度提升。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-05T21:07:54.053

根据我的阅读，人们似乎严重倾向于 Zepto。最常见的原因是文件大小，但 jQuery 2 在加载后实际上比 Zepto 快。此外，由于大多数人都是围绕 jQuery 开发的，因此您不会发现对 Zepto 的太多支持。我并不是建议你不应该使用 Zepto，但你应该看看你为什么要使用它，以及你使用的其他 JavaScript 库是否支持/冲突。

我会说这取决于你的项目。对于个人或有限使用，Zepto 可能是更好的选择。但是，其他库更支持 jQuery，如果文件大小是唯一决定您的原因的因素，那么它就有缺陷。JavaScript 应该在页面加载后加载，因此在任何一种情况下都不会妨碍您的页面加载时间。

[这](http://www.codefessions.com/2012/08/performance-of-jquery-compatible-mobile.html "守则文章")是性能测试，包括 jQuery 1.7.2、Zepto 1.0rc1 和 jQMobi 1.03。

# java - 如何在 Java 中从客户端获取 uuid 或 mac 地址？

> ID：14830336
> 
> 赞同：5
> 
> 时间：2013-02-12T10:27:12.900
> 
> 标签：java, web-applications, uuid, mac-address

我正在为基于 Java 的 Web 应用程序寻找唯一标识客户端的解决方案。服务器与客户端在同一个网络中，我认为使用 MAC 地址将是一个很好的解决方案。问题是我不能使用 cookie，因为它们可以在客户端被删除，而且我不能使用 IP，因为它们只能发出新的 DHCP 租约更新。

所以我想回退到客户端的 MAC 地址。我知道没有 java 内置功能来获取 MAC 地址。是否有一个库可以处理每个操作系统的输出？（主要的 Windows 和 Mac）因为我的 java 应用程序在两个平台上运行。

或者是否有任何其他建议可以在网站和 HTTP 协议中唯一标识客户端？（可能是 HTML5 数据存储或其他东西）

我正在使用 Java 1.7 顺便说一句。

我不会强迫用户登录或以其他方式表明自己的身份，也不会为客户的智能手机编写本机应用程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T15:49:31.547

我写了自己的方法来解决我的问题。如果有人需要代码来在同一网络中查找 MAC 地址，这里就是。在 Win 7 和 Mac OS X 10.8.2 上无需任何管理员权限即可为我工作

```
Pattern macpt = null;

private String getMac(String ip) {

    // Find OS and set command according to OS
    String OS = System.getProperty("os.name").toLowerCase();

    String[] cmd;
    if (OS.contains("win")) {
        // Windows
        macpt = Pattern
                .compile("[0-9a-f]+-[0-9a-f]+-[0-9a-f]+-[0-9a-f]+-[0-9a-f]+-[0-9a-f]+");
        String[] a = { "arp", "-a", ip };
        cmd = a;
    } else {
        // Mac OS X, Linux
        macpt = Pattern
                .compile("[0-9a-f]+:[0-9a-f]+:[0-9a-f]+:[0-9a-f]+:[0-9a-f]+:[0-9a-f]+");
        String[] a = { "arp", ip };
        cmd = a;
    }

    try {
        // Run command
        Process p = Runtime.getRuntime().exec(cmd);
        p.waitFor();
        // read output with BufferedReader
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                p.getInputStream()));
        String line = reader.readLine();

        // Loop trough lines
        while (line != null) {
            Matcher m = macpt.matcher(line);

            // when Matcher finds a Line then return it as result
            if (m.find()) {
                System.out.println("Found");
                System.out.println("MAC: " + m.group(0));
                return m.group(0);
            }

            line = reader.readLine();
        }

    } catch (IOException e1) {
        e1.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    // Return empty string if no MAC is found
    return "";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:07:33.357

我能找到的最好的是：[Query ARP cache to get MAC ID](https://stackoverflow.com/questions/1238963/query-arp-cache-to-get-mac-id)

总结是：

*   没有标准的 Java API，
*   没有独立于操作系统的解决方案，
*   您的应用程序通常需要获得特权（例如 root 访问权限）才能查询主机的 ARP 缓存，并且
*   如果数据包通过网络路由器，您将无法再识别源 MAC 地址。

我认为这不是识别用户机器的好方法。

还要考虑：

*   这仅标识机器，而不是用户。一些计算机由多个用户共享。
*   MAC地址也可以更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:08:17.633

IP 地址的使用**在本地网络中不起作用**。我使用了其他一些方法来获取 MAC 地址 - sysout 解析有用的命令。

```
public String getMacAddress() throws Exception {
    String macAddress = null;
    String command = "ifconfig";

    String osName = System.getProperty("os.name");
    System.out.println("Operating System is " + osName);

    if (osName.startsWith("Windows")) {
        command = "ipconfig /all";
    } else if (osName.startsWith("Linux") || osName.startsWith("Mac") || osName.startsWith("HP-UX")
            || osName.startsWith("NeXTStep") || osName.startsWith("Solaris") || osName.startsWith("SunOS")
            || osName.startsWith("FreeBSD") || osName.startsWith("NetBSD")) {
        command = "ifconfig -a";
    } else if (osName.startsWith("OpenBSD")) {
        command = "netstat -in";
    } else if (osName.startsWith("IRIX") || osName.startsWith("AIX") || osName.startsWith("Tru64")) {
        command = "netstat -ia";
    } else if (osName.startsWith("Caldera") || osName.startsWith("UnixWare") || osName.startsWith("OpenUNIX")) {
        command = "ndstat";
    } else {// Note: Unsupported system.
        throw new Exception("The current operating system '" + osName + "' is not supported.");
    }

    Process pid = Runtime.getRuntime().exec(command);
    BufferedReader in = new BufferedReader(new InputStreamReader(pid.getInputStream()));
    Pattern p = Pattern.compile("([\\w]{1,2}(-|:)){5}[\\w]{1,2}");
    while (true) {
        String line = in.readLine();
        System.out.println("line " + line);
        if (line == null)
            break;

        Matcher m = p.matcher(line);
        if (m.find()) {
            macAddress = m.group();
            break;
        }
    }
    in.close();
    return macAddress;
} 
```

这应该在任何地方都有效。至少，在 Ubuntu 机器上使用这种方法会得到以下结果：

```
Operating System is Linux
line eth0      Link encap:Ethernet  HWaddr f4:6d:04:63:8e:21  
mac: f4:6d:04:63:8e:21 
```

# jquery - 选择后如何使用 jquery 自动完成来显示不同的列表？

> ID：14830346
> 
> 赞同：0
> 
> 时间：2013-02-12T10:27:47.283
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

所以我有一个带有自动完成功能的文本字段，它工作正常。

这就是我想要发生的事情：

1.  用户在文本字段中输入一些字母
2.  向用户显示自动完成建议列表
3.  用户从建议列表中选择一个项目
4.  文本字段填充了所选项目
5.  立即向用户呈现由指定数组组成的另一个建议列表

基本上，在用户做出选择后，我想向他们展示布尔运算符 - “AND”/“OR”。文本字段用于搜索应用程序。我想方便用户搜索多个主题，例如“Apples AND Bananas”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:09:30.013

使用自动完成的选择事件

```
$( ".selector" ).on( "autocompleteselect", function( event, ui ) {
    // Write your code here
    // preferably update your source of tags. Like,
    // availableTags = [New tag1, New tag2, ...];
} ); 
```

# server-push - 有没有办法在 IE8 中清除 XDomainRequest.responseText

> ID：14830351
> 
> 赞同：0
> 
> 时间：2013-02-12T10:27:59.053
> 
> 标签：server-push, http-streaming, xdomainrequest

我正在实施服务器推送解决方案。

有没有办法清除IE8 的**XDomainRequest.responseText**，因为它充满了每个响应块？

（为了获得与 Firefox xhr.responseText 中相同的效果，其中 multipart 仅包含最后一个响应部分。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:56:53.603

事实证明，没有办法改变这种行为。查看[前 IE 产品经理所说的限制](http://blogs.msdn.com/b/ieinternals/archive/2010/04/06/comet-streaming-in-internet-explorer-with-xmlhttprequest-and-xdomainrequest.aspx?PageIndex=2&CommentPosted=true#commentmessage)的评论。

# android - 如何在高通的视频播放中处理来自 url 的视频

> ID：14830352
> 
> 赞同：2
> 
> 时间：2013-02-12T10:28:01.467
> 
> 标签：android, augmented-reality

我正在使用**vuforia**的 Videoplayback 示例。我将 dat 和 xml 用于 3 个图像，并且在相机检测到三个图像的任何图像时，我还获得了图像名称。现在我想为这三个图像播放三个不同的视频。我已经为低于 android 4.0 的设备开始了新的**活动**，并根据图像播放视频。

但我的问题是***我无法从支持纹理视频的 4.0 以上设备的 android 的 url 播放视频。我需要在检测后为这三个图像播放三个不同的视频***。

# python - 如何使用 Python 从 html 中去除高度和宽度标签？

> ID：14830356
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:28:17.123
> 
> 标签：python

我的 html 由如下图像标签组成：

```
 <img alt="Alla_dj01" height="333" src="http://getfile0.posterous.com/getfile/files.posterous.com/temp-2013-02-01/kjyqxkaqBICwbidlzEeCurhwpcilIGzDDcFrmlCcGDkftlbsedenbAGpFdbo/ALLA_DJ01.jpg.scaled500.jpg" width="500" 
```

我想从标签中完全删除宽度和高度。我可以使用替换和删除标签，但高度和宽度值不断变化，因此如何干净地删除它有点混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:44:31.303

```
In [40]: import lxml.html as lh

In [41]: html = '''<img alt="Alla_dj01" height="333" src="http://getfile0.posterous.com/getfile/files.posterous.com/temp-2013-02-01/kjyqxkaqBICwbidlzEeCurhwpcilIGzDDcFrmlCcGDkftlbsedenbAGpFdbo/ALLA_DJ01.jpg.scaled500.jpg" width="500"'''

In [42]: doc = lh.fromstring(html)

In [43]: for img in doc.xpath('//img'):
    ...:     for a in ['width','height']:
    ...:         img.attrib.pop(a)  # img.attrib is basically a dict
    ...:         

In [44]: print lh.tostring(doc,pretty_print=True)
<img alt="Alla_dj01" src="http://getfile0.posterous.com/getfile/files.posterous.com/temp-2013-02-01/kjyqxkaqBICwbidlzEeCurhwpcilIGzDDcFrmlCcGDkftlbsedenbAGpFdbo/ALLA_DJ01.jpg.scaled500.jpg"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:33:51.643

如果你只有一个这样的元素，你应该能够很容易地使用基于正则表达式的搜索和替换。

请参阅[`re.sub()`](http://docs.python.org/2/library/re.html#re.sub)执行此操作的函数。

作为一个起点，我会尝试类似的东西：

```
stripped = re.sub(r'(height|width)=\"\d+\"', "", old_html) 
```

您可以进一步改进这一点以支持属性值的单引号，而不是假设该值将是所有数字，等等。

# ruby-on-rails - 如何在 ruby on rails 中返回当前线程的所有未删除消息？

> ID：14830357
> 
> 赞同：0
> 
> 时间：2013-02-12T10:28:20.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

根据哪些已被删除而不是未删除，找出一种为用户消息线程显示消息的方法时遇到了一些麻烦。删除消息时，已删除消息“sender_status 或接收者状态”将从 0 更改为 1。目前要在收件箱中显示用户消息线程列表，我使用：

例如

```
current_user = User.find(2)
current_user.message_threads 
```

这会抓取所有具有 0 个发件人或收件人状态的 message_threads。

```
class User < ActiveRecord::Base

  has_many :messages
  has_many :message_threads 
```

很好很容易，但我现在想做的是如何设置一些东西，使我能够从当前线程中获取具有 0 个发件人或收件人状态的消息。所以如果我要输入：

```
one_thread = current_user.message_threads.first 
```

从这个线程中，我希望能够轻松获取我需要的唯一消息。想在 message_thread 模型中添加一些内容，以便我最终可以输入：

```
current_user.message_threads.first.messages

#or

one_thread.messages 
```

并且只加载我需要的消息，而忽略状态为“1”的消息。

**用户模型：**

```
class User < ActiveRecord::Base

  has_many :messages
  has_many :message_threads

  def message_threads
    MessageThread.where([ '(sender_id = ? AND sender_status = 0) OR (recipient_id = ? AND recipient_status = 0)', self.id, self.id ])
  end

  def messages
    Message.where([ '(sender_id = ? AND sender_status = 0) OR (recipient_id = ? AND recipient_status = 0)', self.id, self.id ])
  end 
```

**消息线程模型：**

```
class MessageThread < ActiveRecord::Base

  has_many :messages 
```

**消息模型：**

```
 class Message < ActiveRecord::Base

    acts_as_tree
    has_one :message_thread 
```

我尝试使用连接进行试验，但这对我来说效果不佳。

```
def messages
  joins(:messages).merge(  Message.where([ '(parent_id = ? AND sender_status = 0) OR (parent_id = ? AND recipient_status = 0)',self.message_id, self.message_id ]) )
end 
```

帮助将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:32:16.067

我猜问题是`one_thread`返回一个`MessageThread`对象，然后你试图通过调用来获取用户ID `self.id`，但它被错误的模型调用。

我没有尝试过这段代码，但它可能会起作用：

```
class User < ActiveRecord::Base
  def self.threads_in_inbox
    message_threads.where('(sender_id = ? AND sender_status = 0) OR (recipient_id = ? AND recipient_status = 0)', self.id, self.id)
  end
end

class MessageThread < ActiveRecord::Base
  def self.inbox_messages
    messages.where('(sender_id = ? AND sender_status = 0) OR (recipient_id = ? AND recipient_status = 0)', self.user.id, self.user.id)
    # this hits the database 1 extra time however due to self.user.id
    # you could change it to inbox_messages(user_id) and pass in the id manually
  end
end

first_thread = current_user.threads_in_inbox.first
first_thread.inbox_messages 
```

在您的问题中，您似乎正在覆盖由 rails（message_threads 和消息）生成的关联查询 - 不确定它是否是故意的，但我在上面进行了更改。

另外，我认为您可以删除重复项并执行以下操作：

```
where('(sender_id = ?) AND (sender_status = 0 OR recipient_status = 0)', self.id) 
```

# windows - 将横幅/消息添加到 Web 服务器上的所有页面

> ID：14830359
> 
> 赞同：0
> 
> 时间：2013-02-12T10:28:37.687
> 
> 标签：windows, apache, webserver

我有两台网络服务器，运行 Apache 的 Windows 机器。

一个是另一个的备份，因此如果一个失败，可以使用另一个。

有谁知道是否可以配置 Apache，使其在每个页面上显示一个小横幅/消息，表示用户正在备份服务器上运行？

我确实找到了一个 3rd 方模块（mod-substitute-append [http://code.google.com/p/mod-substitute-append/](http://code.google.com/p/mod-substitute-append/)），它*可能*已经完成了我想要的，但似乎没有它的文档，并且下载时看起来像是被编写为安装在 Linux 机器上。

有没有人有任何想法我可以尝试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:35:55.610

Apache 2.2 附带 mod_substitute：[http ://httpd.apache.org/docs/2.2/mod/mod_substitute.html](http://httpd.apache.org/docs/2.2/mod/mod_substitute.html)

Apache 2.4 附带 mod_sed：[http ://httpd.apache.org/docs/trunk/new_features_2_4.html](http://httpd.apache.org/docs/trunk/new_features_2_4.html)

从文档来看， mod_sed 与 mod_substitute_append （我在 Linux 上使用过）做类似的事情。获取一个 Apache 2.4 Windows 二进制文件并看看你是如何开始的可能值得。

# mysql - 查找列值变化的地方

> ID：14830360
> 
> 赞同：4
> 
> 时间：2013-02-12T10:28:38.500
> 
> 标签：mysql, sql

如何仅选择同一名称的标志值不同的名称？

```
name    flag
ben     0
harry   1
harry   1
harry   1
john    1
john    0
john    1
krishna 1
krishna 1
luke    0
steve   1
steve   0 
```

结果应该选择 john 和 steve

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T10:32:38.453

您可以使用以下内容对数据进行分组`name`并计算不同的标志值。如果`count`大于 1，则它们具有不同的标志：

```
select name
from yourtable
group by name
having count(distinct flag) > 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/3739d/1)

如果您想对此进行扩展并在表中包含其他列，则可以使用：

```
select t1.name, t1.flag
from yourtable t1
where exists (select name
              from yourtable t2
              where t1.name = t2.name
              group by name
              having count(distinct flag) > 1) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/3739d/14)

这将返回名称和标志：

```
|  NAME | FLAG |
----------------
|  john |    1 |
|  john |    0 |
|  john |    1 |
| steve |    1 |
| steve |    0 | 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T10:33:02.780

尝试以下操作：

```
SELECT DISTINCT t1.Name
FROM Table t1 
INNER JOIN Table t2 ON t1.Name = t2.Name
WHERE t1.flag <> t2.flag 
```

# c# - 为 WinForm 用户控件属性创建事件已更改

> ID：14830361
> 
> 赞同：0
> 
> 时间：2013-02-12T10:28:43.263
> 
> 标签：c#, .net, winforms, events, textbox

`SelectionStart`每当TextBox 控件的 SelectedText 或属性发生更改时，我都想引发一个事件。有没有不涉及从头开始编写自定义 TextBox 控件的简单方法？

显然，一种选择是让计时器检查这些属性的更改，但我宁愿不使用任何计时器。

到目前为止，我已经尝试创建一个从 TextBox 继承并覆盖 SelectedText 属性的控件，但是失败了。另外，`SelectionStart`不能被覆盖。

是的，我知道 RichTextBox 控件有该`SelectionChanged`事件。但是，我需要一个普通的 TextBox，而不是 RichTextBox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:07:32.900

我不知道如何从 中实现您的目标`TextBox`，但下面是使用继承和自定义组件的解决方案示例。`SelectionChanged`用户通过鼠标选择一些新文本后将引发事件。

请注意，`MouseDown`and`MouseUp`事件以及`SelectionStart`and`SelectionLength`属性在 中是公共的`TextBox`，因此如果需要，您可以避免子类化。

```
class CustomTextBox : TextBox
{
    public event EventHandler SelectionChanged;

    private int _selectionStart;
    private int _selectionLength;

    protected override void OnMouseDown(MouseEventArgs e)
    {
        _selectionStart = SelectionStart;
        _selectionLength = SelectionLength;

        base.OnMouseDown(e);
    }

    protected override void OnMouseUp(MouseEventArgs e)
    {
        if (null != SelectionChanged && (_selectionStart != SelectionStart || _selectionLength != SelectionLength))
            SelectionChanged(this, EventArgs.Empty);

        base.OnMouseUp(e);
    }
} 
```

# rest - 为什么 RestSharp 在 iOS 应用程序中失败

> ID：14830362
> 
> 赞同：1
> 
> 时间：2013-02-12T10:28:49.897
> 
> 标签：rest, xamarin.ios, restsharp

我正在尝试使用 RestSharp 库调用 REST 服务。该代码在 Windows 环境下运行良好。但是，当我尝试在 Mac（对于 iOS）上执行代码时，出现错误

“获取响应流时出错（分块 Read1）：ReceiveFailure”

我正在使用的代码是：

```
var client = new RestClient("http://domain.com");
var request = new RestRequest("_api/web/lists/getbytitle('MyList')/items")
{
RequestFormat = DataFormat.Json
};
request.AddHeader("Accept", "application/json;odata=verbose");
request.Credentials = new NetworkCredential(@"domain\username", "password");
var response = client.Execute(request); 
```

我正在使用带有 MonoTouch 3.1.1 的 MacMini

# android - 如何让我的 doInBackground 方法工作？

> ID：14830363
> 
> 赞同：0
> 
> 时间：2013-02-12T10:28:49.357
> 
> 标签：android, asynchronous, task

我的错误信息是：

```
>02-12 10:15:34.625: E/AndroidRuntime(1018): FATAL EXCEPTION: AsyncTask
> 1 02-12 10:15:34.625: E/AndroidRuntime(1018): java.lang.RuntimeException: An error occured while executing
> doInBackground() 02-12 10:15:34.625: E/AndroidRuntime(1018):  at
> android.os.AsyncTask$3.done(AsyncTask.java:200) 02-12 10:15:34.625:
> E/AndroidRuntime(1018):   at
> java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> java.util.concurrent.FutureTask.setException(FutureTask.java:124)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> java.util.concurrent.FutureTask.run(FutureTask.java:137) 02-12
> 10:15:34.625: E/AndroidRuntime(1018):     at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> java.lang.Thread.run(Thread.java:1096) 02-12 10:15:34.625:
> E/AndroidRuntime(1018): Caused by: java.lang.NullPointerException
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> se.gibk.gibk.MainActivity$PostTask.GetList(MainActivity.java:88) 02-12
> 10:15:34.625: E/AndroidRuntime(1018):     at
> se.gibk.gibk.MainActivity$PostTask.doInBackground(MainActivity.java:143)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> se.gibk.gibk.MainActivity$PostTask.doInBackground(MainActivity.java:1)
> 02-12 10:15:34.625: E/AndroidRuntime(1018):   at
> android.os.AsyncTask$2.call(AsyncTask.java:185) 02-12 10:15:34.625:
> E/AndroidRuntime(1018):   at
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

我的代码是：

```
 public class MainActivity extends Activity {

private static final String TAG = "Debugging";
private ListView list;
ArrayList<String> links;
Sermons sermons;

protected void onCreate(Bundle savedInstanceState) {
    Log.d(TAG, "MainActivity - OnCreate()");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new PostTask(this).execute("http://gibk.se/sample-page/predikningar/?podcast");
    Log.d(TAG, "execute");      

} 
```

公共类 PostTask 扩展 AsyncTask> {

```
 private Context context;

  public PostTask(Context context) {
        this.context = context;

   }

 private ArrayList<Sermons> GetList(String url) {
        Log.d(TAG, "GetList");
        ArrayList<Sermons> results = new ArrayList<Sermons>();

           try {

                URL urls = new URL(url);

                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xmlParser = factory.newPullParser();
                xmlParser.setInput(this.getInputStream(urls), "UTF_8");

                boolean insideItem = false;

                int eventType = xmlParser.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {

                    if (eventType == XmlPullParser.START_TAG) {

                        if (xmlParser.getName().equalsIgnoreCase("item")) {
                            sermons = new Sermons();
                            insideItem = true;

                         } else if (xmlParser.getName().equalsIgnoreCase("title")) {

                             if (insideItem)
                                 sermons.setSermon(xmlParser.nextText()); 

                         } else if (xmlParser.getName().equalsIgnoreCase("itunes:author")) {

                             if (insideItem)
                                 sermons.setPreacher(xmlParser.nextText()); 

                         } else if (xmlParser.getName().equalsIgnoreCase("guid")) {
                             if (insideItem)
                               links.add(xmlParser.nextText());   

                         }

                        results.add(sermons);

                    }

                    else if(eventType==XmlPullParser.END_TAG && xmlParser.getName().equalsIgnoreCase("item")){

                        insideItem=false;
                    }

                     eventType = xmlParser.next();
                }

            }

             catch (MalformedURLException e) {
                 e.printStackTrace();

             }

            catch (XmlPullParserException e) {
                e.printStackTrace();

            }

            catch (IOException e) {
                e.printStackTrace();

            }

            return results;

    }

   private InputStream getInputStream(URL url) {

        try {

            return url.openConnection().getInputStream();

        } catch (IOException e) {

            return null;

        }
   }

@Override
protected ArrayList<Sermons> doInBackground(String... params) {
    Log.d(TAG, "doInBackGround");
    String url = params[0];
    ArrayList<Sermons> sermon = this.GetList(url);  
    return sermon;      

}

 @Override
 protected void onPostExecute(ArrayList<Sermons> result) {
         super.onPostExecute(result);
         Log.d(TAG, "onPostExecute");
        links = new ArrayList<String>();    
        list = (ListView) findViewById(R.id.list);
        list.setAdapter(new Adapter(MainActivity.this, (ArrayList<Sermons>) result));

        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {

                Uri uri = Uri.parse(links.get(position));
                String url = uri.toString();

                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
                startActivity(intent);

            }

        });
 } 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:38:28.610

不确定它是否相关，但：

```
"title".equalsIgnoreCase(xmlParser.getName()) 
```

优于：

```
xmlParser.getName().equalsIgnoreCase("title") 
```

减少 NPE 的机会。

另一个问题：

```
 private InputStream getInputStream(URL url) {

        try {

            return url.openConnection().getInputStream();

        } catch (IOException e) {

            return null;

        }
   } 
```

不应该在异常时返回 null，而是抛出异常。

# eclipse - Jasper 报告中的 java.lang.reflect.InvocationTargetException

> ID：14830368
> 
> 赞同：3
> 
> 时间：2013-02-12T10:29:10.733
> 
> 标签：eclipse, jasper-reports

我在 Eclipse 中创建数据适配器以连接 SqlServer。我在向导中提供了所有信息。我还在驱动程序类路径中添加了 sqljdbc4.jar 文件。最后，当我点击测试按钮时，我得到以下异常......

```
java.lang.reflect.InvocationTargetException
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421)
at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:1008)
at com.jaspersoft.studio.data.wizard.AbstractDataAdapterWizard.widgetSelected(AbstractDataAdapterWizard.java:143)
at com.jaspersoft.studio.data.wizard.DataAdapterWizardDialog.fireTestPressed(DataAdapterWizardDialog.java:54)
at com.jaspersoft.studio.data.wizard.DataAdapterWizardDialog.access$0(DataAdapterWizardDialog.java:52)
at com.jaspersoft.studio.data.wizard.DataAdapterWizardDialog$1.widgetSelected(DataAdapterWizardDialog.java:69)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:234)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4066)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3657)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
at org.eclipse.jface.window.Window.open(Window.java:801)
at com.jaspersoft.studio.data.actions.EditDataAdapterAction.run(EditDataAdapterAction.java:68)
at com.jaspersoft.studio.data.DataAdapterProvider.doubleClick(DataAdapterProvider.java:103)
at com.jaspersoft.studio.repository.RepositoryView$2$1.run(RepositoryView.java:124)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class net.sf.jasperreports.extensions.ExtensionsEnvironment
at net.sf.jasperreports.engine.DefaultJasperReportsContext.getExtensions(DefaultJasperReportsContext.java:246)
at net.sf.jasperreports.engine.SimpleJasperReportsContext.getExtensions(SimpleJasperReportsContext.java:121)
at net.sf.jasperreports.engine.util.LocalJasperReportsContext.getExtensions(LocalJasperReportsContext.java:167)
at com.jaspersoft.studio.utils.jasper.JasperReportsConfiguration.getExtensions(JasperReportsConfiguration.java:422)
at net.sf.jasperreports.data.DataAdapterServiceUtil.getService(DataAdapterServiceUtil.java:76)
at com.jaspersoft.studio.data.wizard.AbstractDataAdapterWizard$3.run(AbstractDataAdapterWizard.java:168)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

我必须连接到那个 sqlserver 数据库。请帮助我如何解决它。我搜索了一些论坛，但有相同的 InvocationTargetException 和 java 代码。但是这里没有java代码。请帮我。

# matlab - 将字段添加到空结构

> ID：14830370
> 
> 赞同：6
> 
> 时间：2013-02-12T10:29:12.170
> 
> 标签：matlab, struct, variable-assignment

假设我有一个`S`大小为 0x1 的结构，其中包含字段`a`和`b`，向其中添加字段的最优雅方法是`c`什么？

通常我可以这样做：

```
S = struct('a',0,'b',0); %1x1 struct with fields a,b
S.c = 0 
```

但是，如果我收到一个空结构，这将不再起作用：

```
S = struct('a',0,'b',0);
S(1) = []; % 0x1 struct with fields a,b
S.c = 0;
% A dot name structure assignment is illegal when the structure is empty.  
% Use a subscript on the structure. 
```

我想了两种方法来解决这个问题，但两者都很丑陋，感觉像是变通方法而不是解决方案。（请注意，也应正确处理非空结构的可能性）。

1.  向结构添加内容以确保其不为空，添加字段，并使结构再次为空
2.  使用所需的字段名初始化新结构，用原始结构中的数据填充它，并覆盖原始结构

我意识到我关心空结构可能很奇怪，但不幸的是，如果字段名不存在，那么不由我管理的部分代码将会崩溃。我已经查看了`help struct`，`help subsasgn`并且还搜索了给定的错误消息，但到目前为止我还没有找到任何提示。因此非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:47:48.270

你可以使用[`deal`](http://www.mathworks.de/de/help/matlab/ref/deal.html)来解决这个问题：

```
S = struct('a',0,'b',0);
S(1) = [];

[S(:).c] = deal(0); 
```

这导致

```
S = 

1x0 struct array with fields:
    a
    b
    c 
```

这也适用于非空结构：

```
S = struct('a',0,'b',0);

[S(:).c] = deal(0); 
```

这导致

```
S = 

    a: 0
    b: 0
    c: 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:33:21.490

怎么样

```
S = struct('a', {}, 'b', {}, 'c', {} ); 
```

创建一个空结构？

另一种方法是使用`mex`file with[`mxAddField`](http://www.mathworks.com/help/matlab/apiref/mxaddfield.html)作为您遇到的错误的解决方法：

> 当结构为空时，点名结构分配是非法的。
> 在结构上使用下标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-27T08:03:20.177

你可以用它`setfield`来解决问题。

```
S = struct('a', {}, 'b', {});
S = setfield(S, {}, 'c', []) 
```

这导致

```
S = 

0x0 struct array with fields:
    a
    b
    c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-02T18:06:37.780

只是为了扩展[@Shai 的答案](https://stackoverflow.com/a/14830447/1714410)，这里有一个简单的 MEX 函数，您可以使用：

### addfield.c

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
    char *fieldname;

    /* Check for proper number of input and output arguments */
    if (nrhs != 2) {
        mexErrMsgIdAndTxt("struct:nrhs", "Two inputs required.");
    } else if (nlhs > 1) {
        mexErrMsgIdAndTxt("struct:nlhs", "Too many output arguments.");
    } else if (!mxIsStruct(prhs[0])) {
        mexErrMsgIdAndTxt("struct:wrongType", "First input must be a structure.");
    } else if (!mxIsChar(prhs[1]) || mxGetM(prhs[1])!=1) {
        mexErrMsgIdAndTxt("struct:wrongType", "Second input must be a string.");
    }

    /* copy structure for output */
    plhs[0] = mxDuplicateArray(prhs[0]);

    /* add field to structure */
    fieldname = mxArrayToString(prhs[1]);
    mxAddField(plhs[0], fieldname);
    mxFree(fieldname);
} 
```

例子：

```
>> S = struct('a',{});
>> S = addfield(S, 'b')
S = 
0x0 struct array with fields:
    a
    b 
```

# iphone - 如何在iphone的uitextview中突出显示文本

> ID：14830371
> 
> 赞同：0
> 
> 时间：2013-02-12T10:29:13.880
> 
> 标签：iphone, xcode, uitextview

任何人都可以帮助我如何突出显示`UITextView`. 文字来自`sqlite`. 我已经用`UISearchBar`. 我需要突出显示与搜索结果相关的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:43:40.263

唯一可能的解决方案是使用[Core Text Framework](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)。它非常强大，但需要一些知识才能使用。

没有其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T00:56:23.430

iOS 7 及更高版本还有其他方法。这是通过使用 TextKit 框架。可以在这里找到带有示例的简单教程：[http ://www.objc.io/issue-5/getting-to-know-textkit.html](http://www.objc.io/issue-5/getting-to-know-textkit.html)

# blackberry - 909 应用程序验证错误

> ID：14830374
> 
> 赞同：1
> 
> 时间：2013-02-12T10:29:31.137
> 
> 标签：blackberry

我是黑莓的新手。我成功开发了一个应用程序，到目前为止我正在模拟器上对其进行测试。现在我想在真实设备上安装我的应用程序。为此，我已成功完成注册和签名过程，并将我的应用程序放在 Web 服务器上。现在我的问题是，当我尝试从 BlackBerry 设备浏览器下载此应用程序时，它显示 **909 Application Authentication error**。我为此搜索了很多，但没有找到任何解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:30:18.447

Based on the information provided there are three possable causes;

1.  You have too many applications loaded on the device so there isn't enough memory left, delete some applications and try agains; or
2.  Bad root certificates [KB29060](http://www.blackberry.com/btsc/KB29060).
3.  The server you are fetching the application from is requiring authorization.

# php - 如何在 svn 中使用 capistrano 补丁？

> ID：14830377
> 
> 赞同：0
> 
> 时间：2013-02-12T10:29:36.313
> 
> 标签：php, svn, capistrano

我正在尝试使用 capistrano 部署我的 PHP 应用程序。我正在使用 svn 存储库，无法对其进行 capistrano 补丁。是否可以使用“cap patch FROM = v1.1 TO = v1.3”命令进行git提到的颠覆？

请让我知道要在 deploy.rb 中完成的补丁配置。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:04:15.417

我们也可以始终创建自己的自定义任务，尽管这将包括正确实现回滚和更新。

# c# - EntityFramework 4.1，context.Entities.Add 有时将 FK 设置为 NULL

> ID：14830380
> 
> 赞同：1
> 
> 时间：2013-02-12T10:29:40.607
> 
> 标签：c#, sql, entity-framework

我有一个奇怪的问题，它已经烧掉了比它应该的时间更长的时间。

我的主要问题是： **添加实体时，****什么可能导致 EF 4.1 Code First 将外键设置为*NULL ？***

问题是这样的：我有一个用户列表，如果这些用户不存在，则必须将它们插入到我的数据库中。

我有这样的事情：

```
foreach (var u in usersFromFile) {
    var userProfile = context.Users
        .FirstOrDefault(user=>
            user.EmployeeId == u.EmployeeId && user.CompanyId == 1);
    if (userProfile == null) {
        User newUser = new User();
        newUser.EmployeeId = u.EmployeeId;
        newUser.CompanyId = 1;
        context.Users.Add(newUser); //This will sometimes set CompanyId = NULL
    }
}
context.SaveChanges(); 
```

某些用户不会正确添加到用户表中。他们得到 CompanyId == NULL，因此他们不属于公司。

我也尝试像这样直接注入 SQL：

```
var query = @"INSERT INTO [dbo].[Users] 
              ([CompanyId],[EmployeeId]) VALUES (3,@emplid)";

context.Database.ExecuteSqlCommand(query, new SqlParameter[] {
    new SqlParameter("emplid", u.EmployeeId)}); 
```

*   我试图访问公司对象上的用户列表。那是行不通的。
*   我尝试使用 context.Users.Create() 而不是 new User()。不会改变任何东西。
*   我尝试注入SQL，仍然是同样的问题。如果从 Studio Manager 运行，则该确切的 SQL 有效。
*   每次添加后我都尝试过 context.SaveChanges() ，没有任何改变。

我知道要添加的实体的状态是正确的，在 CompanyId 设置为 NULL 的情况下也是如此。我的底层数据库可能有问题吗？

非常感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:36:32.460

尝试以下操作：

```
 foreach (var u in usersFromFile) {
    if (context.Users.Any(
          user=>
            user.EmployeeId == u.EmployeeId && user.CompanyId == 1)
       ) 
    {
        User newUser = new User();
        newUser.EmployeeId = u.EmployeeId;
        newUser.CompanyId = 1;
        context.Users.Add(newUser); //This will sometimes set CompanyId = NULL
    }
}
context.SaveChanges(); 
```

Any() 函数根据给定查询检查用户是否存在。

另外，不要忘记添加 context.savechanges 以确保每条添加的记录都放入数据库中。

最后，您检查了 user.CompanyId = 1，是否应该 == 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:13:11.803

我最终将用户列表转换为一系列 SQL 语句，并通过*context.Database.ExecuteSqlCommand(sql)*运行它们。

它很脏，但它有效。

如果有人对为什么用户实体上的 FK CompanyId 有时设置为 NULL 有任何好的想法，如果您能分享您的想法，我们将非常高兴。

# java - 将用户名和密码从 JSF 或 JSP 传递到 Oracle Reports

> ID：14830383
> 
> 赞同：3
> 
> 时间：2013-02-12T10:29:51.820
> 
> 标签：java, jsp, jsf, jstl, oraclereports

我想知道是否有任何方法使用 JSF、JSTL 或 JSP 将用户 ID 和密码传递给另一个应用程序，而当用户在浏览器的视图源中看到硬编码值时不可见？

理想情况下，我想从 JSF 或 JSP 页面调用 Oracle 报告，那么如何通过不添加隐藏字段或输入字段来传递用户名和密码，这样当用户在浏览器中查看源代码时，他/她不应该能够查看身份验证详细信息。

我可以添加类似

```
Map map = new HashMap();
map.put("username", "SMITH");
map.put("password", "SMT");
FacesContext.getCurrentInstance().getExternalContext().getSessionMap()
        .put("reportParams", map);
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
ec.redirect("http://server:8889/reports/rwservlet"); 
```

但不确定如何使用 url 传递地图或如何使用 JSTL 或在 JSF 页面中调用它。即使我作为参数传递，用户也可能会看到参数值。

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:12:25.323

在 Oracle Report 服务器中，可以通过以下方式在 cgicmd.dat 文件中提供身份验证详细信息

```
myconn:    userid=scott/tiger@DB report=myreport.jsp %* 
```

并`myconn`在将参数从 JSF 或 JSP 传递到 Oracle 报告时使用。这样可以避免用户名或密码的硬编码。

# spring - 用于批处理的支柱或弹簧

> ID：14830390
> 
> 赞同：2
> 
> 时间：2013-02-12T10:30:06.973
> 
> 标签：spring, hibernate, struts2, batch-processing

目前我正在开发一些稍后需要批处理功能模块的应用程序，因为我还没有启动那个模块，我需要知道哪个（Struts 或 Springs）具有最好的批处理框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:11:17.077

Springs 绝对更适合批处理，因为它为批处理提供了完整的 spring 批处理框架。除此之外，无论您在 struts 中运行什么，都可以轻松集成到 Spring 框架中。

# c# - 如何让 ASP.NET Web API 与版本控制和帮助页面扩展一起使用？

> ID：14830391
> 
> 赞同：22
> 
> 时间：2013-02-12T10:30:12.257
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我已经在我的 WebAPI 应用程序中实现了一个版本控制框架，并且非常希望让它与 Microsoft 的新帮助页面扩展一起工作。

[Microsoft.AspNet.WebApi.HelpPage](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage)

[SDammann.WebApi.Versioning](http://nuget.org/packages/SDammann.WebApi.Versioning)

很简单，我不知道如何让他们一起工作。我有2个项目：

*   AdventureWorks.Api（主要主机/根应用程序）
*   AdventureWorks.Api.v1（包含 API 第一版的类库）

版本控制按预期工作。

我尝试在根应用程序上安装 HelpPage 包，当我浏览到帮助页面时，似乎没有找到任何控制器。在内部，我相信它使用：

```
Configuration.Services.GetApiExplorer().ApiDescriptions 
```

这不返回任何结果，所以我得到一个错误。

谁能帮助我让这两个软件包一起工作？

**编辑：** 一开始，我不确定这是一个路由问题，但最近的评论似乎表明并非如此。这是我的 RouteConfig.cs

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "SldExportAliasApi",
            routeTemplate: "api/v{version}/sld-export/{id}",
            defaults: new { id = RouteParameter.Optional, controller = "Export" }
        );

        routes.MapHttpRoute(
            name: "LinkRoute",
            routeTemplate: "api/v{version}/link/{system}/{deployment}/{view}",
            defaults: new { controller = "Link" }
        );

        routes.MapHttpRoute(
             name: "DefaultSubParameterApi",
             routeTemplate: "api/v{version}/{controller}/{id}/{param}",
             defaults: new { id = RouteParameter.Optional, param = RouteParameter.Optional }
        );

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/v{version}/{controller}/{action}/{id}",
            defaults: new { action = "Index", id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-03T09:08:40.953

您需要从 AdventureWorks.Api.v1 项目中获取文档 XML 文件，并将其放在 AdventureWorks.Api 项目的 bin 文件夹中：

![](../Images/5e5a5badfbf57492d6aa3536364340fd.png)

然后将这些行添加到您的 Application_Start 方法中：

```
// enable API versioning
        GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector), new RouteVersionControllerSelector(GlobalConfiguration.Configuration));
        GlobalConfiguration.Configuration.Services.Replace(typeof(IApiExplorer), new VersionedApiExplorer(GlobalConfiguration.Configuration));
        GlobalConfiguration.Configuration.Services.Replace(typeof(IDocumentationProvider),
                                new XmlCommentDocumentationProvider(System.IO.Path.GetDirectoryName(
                                    System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) +
                                                                    "\\Adventure.Api.v1.XML")); 
```

然后您可以使用文档查看您的 API。

有时版本号无法正确获取，并替换为 ???

要解决此问题，请添加：

```
if (api.ActionDescriptor.ControllerDescriptor.ControllerType.Namespace != null)
    {
        var versionName = api.ActionDescriptor.ControllerDescriptor.ControllerType.Namespace.Replace(".Controllers", "").Split('.').Last();
        api.RelativePath = api.RelativePath.Replace("v???", versionName);
    } 
```

到你的 ApiGroup.cshtml 就在这个地方：

```
@foreach (var api in Model)
{
    if (api.ActionDescriptor.ControllerDescriptor.ControllerType.Namespace != null)
    {
        var versionName = api.ActionDescriptor.ControllerDescriptor.ControllerType.Namespace.Replace(".Controllers", "").Split('.').Last();
        api.RelativePath = api.RelativePath.Replace("v???", versionName);
    }
    <tr>
        <td class="api-name"><a href="@Url.Action("Api", "Help", new { apiId = api.GetFriendlyId() })">@api.HttpMethod.Method @api.RelativePath</a></td>
        <td class="api-documentation">
        @if (api.Documentation != null)
        {
            <p>@api.Documentation</p>
        }
        else
        {
            <p>No documentation available.</p>
        }
        </td>
    </tr>
} 
```

这应该可以解决问题！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-22T20:13:43.857

我不知道如何对帖子发表评论:(我认为这可能应该是在这个问题的标记答案下的评论，但 SDamman 已更新，我需要做的就是这个

```
// enable API versioning                   
GlobalConfiguration.Configuration.Services.Replace(typeof(System.Web.Http.Dispatcher.IHttpControllerSelector), 
     new SDammann.WebApi.Versioning.RouteVersionedControllerSelector(GlobalConfiguration.Configuration));

GlobalConfiguration.Configuration.Services.Replace(typeof(IApiExplorer), new SDammann.WebApi.Versioning.VersionedApiExplorer(GlobalConfiguration.Configuration)); 
```

有一种称为 VersionedApiExplorer 的类型，它工作得很好。希望这有助于解决方案现在更容易。

编辑：在尝试自己再次获得帮助后，我意识到我的答案根本不明显。

要使帮助页面正常工作，您唯一需要做的就是替换全局配置 IApiExplorer，仅此而已。只需按照 sdammans 的说明更改处理程序后立即执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:01:00.117

我同意@mortware，web api 的默认路由意味着如果您使用默认`Get()`/`Post()`方法，您的 url 应该看起来像“site/api/controllerName/”。如果您使用的是特定命名的方法，那么该路由看起来类似于“site/api/controllerName/methodName”。

我也遇到了参数名称的困难。例如，如果在 /App_Start/WebApiConfig.cs 中指定的路线中，您有；

```
// Controller with ID
// To handle routes like `/api/VTRouting/1`
config.Routes.MapHttpRoute(
    name: "ControllerAndId",
    routeTemplate: "api/{controller}/{id}",
    defaults: null,
    constraints: new { id = @"^\d+$" } // Only integers 
);

// Controllers with Actions
// To handle routes like `/api/VTRouting/route`
config.Routes.MapHttpRoute(
    name: "ControllerAndAction",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: null,
    constraints: new { id = @"^\d+$" } // Only integers 
); 
```

那么你的http动词的方法参数必须有一个名为“id”的参数，例如；

```
// url: site/api/controller/<int>
public HttpResponseMessage Get(int id) { return null; /*dummy*/ }

// url: site/api/controller/<int>
public HttpResponseMessage Post(int id) { return null; /*dummy*/ }

// url: site/api/controller/SomeAction/<int>
public HttpResponseMessage SomeAction(int id) { return null; /*dummy*/ } 
```

如果你有类似的东西；

```
public HttpResponseMessage Get(int myID) { return null; /*dummy*/ } 
```

它将*不起作用*`{id}`，因为“myID”参数与路由中指定的参数不匹配。正如@OakNinja 指出的那样，我们需要您在 WebApiConfig.cs 中的路由来帮助您查明确切的原因

# jquery - 如何附加到每个元素？

> ID：14830394
> 
> 赞同：0
> 
> 时间：2013-02-12T10:30:23.287
> 
> 标签：jquery

```
var form_error = jQuery('<div/>').attr('class', 'input-error').append(jQuery('<div/>').attr('class', 'error-label'));
var registration_fields_list = jQuery('<ul/>');

jQuery.each(registration_fields, function(){
    var label = jQuery('<label/>').text(this.label);
    var field = null;

    field = jQuery('<input/>').attr({'name': this.input_name, 'class': this.input_class, 'type': (typeof this.type != 'undefined' ? this.type : 'text')});

    console.log(jQuery('<li/>').append(label, field, form_error));
}); 
```

我找不到问题，但问题是`form_error`它只附加到最后一个`li`，而不是每个。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:34:06.193

每次要附加它时都必须创建一个新的 form_error 元素，因为 .append() 不会克隆现有的元素。

> 如果以这种方式选择的元素被插入到 DOM 中其他位置的单个位置，它将被移动到目标中（不克隆）

[http://api.jquery.com/append/](http://api.jquery.com/append/)

# list - 链表的缺点是什么？

> ID：14830407
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:15.577
> 
> 标签：list, data-structures

链表的缺点是什么？这不是很费时间吗？如果是，那么我们如何减少执行时间/反应时间以获得所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:51:16.160

每个数据结构都适用于给定的一组目的，并且在解决某些类型的问题方面有好处，而在其他方面则很糟糕。例如，链表的一个缺点是您无法有效地获取其中的最小元素。但链表*并不意味着*用于此目的。链表的实现有很多，如果不指定**哪个实现**和哪个**操作，问****它**是否耗费时间是没有意义的。

 ****不管问题的答案`if yes,then how can we reduce the execution time/reaction time for getting the desired output?`是：要么使用链表的另一种实现，要么使用另一种数据结构。没有比...链表更好的结构了。****

# php - 在 PHP 中打印多维数组的内容

> ID：14830408
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:17.987
> 
> 标签：php, mysql, arrays, multidimensional-array

我正在从数据库中获取复杂的数组，我需要在每次迭代（循环）中像下面这样的单独记录。

```
subscribed_store -> Name

subscribed_companyLogo -> logo image

subscribed_merchant -> Company Name 
```

我们如何简化以下操作。

```
/********************** First Iteration *******************/
Array
(
    [subscribed_store] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 55
                    [name] => test

                )

        )

    [subscribed_companyLogo] => Array
        (
            [0] => http://test.com/images/logo.png
        )

    [subscribed_merchant] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 9
                    [company_name] => Google
                    [company_url] => http://www.google.com
                    [first_name] => David
                )

        )

) 
```

多谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:36:33.083

如果`$array`持有上述数组，然后尝试

```
echo $array["subscribed_store"][0]->name;

echo $array["subscribed_companyLogo"][0];

echo $array["subscribed_merchant"][0]->company_name; 
```

如果您希望以动态方式使用它，请参见下文

```
foreach($array as $key=>$val)
{
    foreach($val as $subkey=>$subval)
    {
        echo $subval->id;
    }
} 
```

此代码将在全球范围内工作，并将回显 id。但是您需要回显不同的元素，它们是不同的键。所以使用以下

```
foreach($array["subscribed_store"] as $key=>$val)
{
    echo $val->name;
}

foreach($array["subscribed_companyLogo"] as $key=>$val)
{
    echo $val;
}

foreach($array["subscribed_merchant"] as $key=>$val)
{
    echo $val->company_name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:37:49.700

假设 $array 是问题中的数组，

```
 <table>

<tr>
<td> Store </td>
<td> Company Logo </td>
<td> Company Name </td>
</tr>

<?php

foreach($array as $key => $row)
{
 ?>
<tr>
<td> <?php echo $row['subscribed_store'][0]->name;?> </td>
<td> <?php echo $row['subscribed_companyLogo'][0];?> </td>
<td> <?php echo $row['subscribed_merchant'][0]->company_name;?> </td>
</tr>
<?php

}

?>
</table> 
```

# perl - Perl 替换因多行而失败

> ID：14830409
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:21.283
> 
> 标签：perl, batch-file, line-breaks, substitution

我有两个网页，一个页面是手工创建的，另一个是用 Visual Studio 2010 (.aspx) 发布的。我想修改这些文件的内容，用一个脚本标签替换一堆脚本标签。为了实现这个目标，我只需从批处理文件中运行一些 Perl 代码。这是替换前后的 Perl 代码和 HTML：

Perl 批处理：

```
perl -pi.backup -e "s/<!--\s*<pack>\s*-->.*?<!--\s*<\/pack>\s*-->/<script src=\"pack.js\"><\/script>/s" file.aspx 
```

HTML 输入：

```
<!-- <pack> -->
<script src="file1.js" type="text/javascript"></script>
<script src="file2.js" type="text/javascript"></script>
<!-- </pack> --> 
```

HTML 输出：

```
<script src="pack.js"></script> 
```

对于手工创建的文件，一切正常，而生成的文件不会更新，除非所有行都集中在一起。我猜这个问题来自换行符，但我不知道为什么它只对第一个文件有效，因为代码完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:37:51.057

您的问题是使用 -p 开关运行 Perl 会导致它执行*每一行*的代码并打印结果。因此，正则表达式一次只能看到文件的一行，并且永远无法匹配整个模式。

你可以这样做：

```
perl -i.backup -e "undef $/; $_=<>; s/<!--\s*<pack>\s*-->.*?<!--\s*<\/pack>\s*-->/<script src=\"pack.js\"><\/script>/s; print" file.aspx 
```

它将整个文件放入`$_`，然后执行替换并将结果打印到同一个文件中。

# mysql - 使用 WHERE 子句连接多个表

> ID：14830410
> 
> 赞同：11
> 
> 时间：2013-02-12T10:31:23.290
> 
> 标签：mysql, database, where, multiple-tables

我正在使用 Mysql，但我很难从 SELECT 查询中获取结果。我有 3 张桌子。第一个表部分，第二个表部分成员和第三个表部分成员状态（该表中的数据是静态的）。

**`select * from Sections;`**

```
| section_id | title  | description | section_ownerid |
-------------------------------------------------------
| 1          | title1 | desc1       | 100             |
| 2          | title2 | desc2       | 100             |
| 3          | title3 | desc3       | 100             |
| 4          | title4 | desc4       | 100             |
| 5          | title5 | desc5       | 100             |
| 6          | title6 | desc6       | 100             | 
```

* * *

**`select * from SectionMembers;`**

```
| SectionMembers_id | section_id  | status_code | memberid |
------------------------------------------------------------
| 1                 | 1           | 10          | 200      |
| 2                 | 1           | 20          | 300      |
| 3                 | 2           | 30          | 200      |
| 4                 | 2           | 10          | 300      |
| 5                 | 3           | 30          | 200      |
| 6                 | 4           | 20          | 200      | 
```

* * *

**`select * from MemberStatus;`**

```
| MemberStatus_id | status_code  | status         |
---------------------------------------------------
| 1               | 10           | PENDINGMEMBER  |
| 2               | 20           | ACTIVEMEMBER   |
| 3               | 30           | MEMBERREJECTED | 
```

* * *

我使用连接来获得结果

```
select distinct(a.section_id) as id,
        a.title,
        a.description,
        c.status
 from Sections a 
 left join SectionMembers b on a.section_id = b.section_id
 inner join MemberStatus c on b.status_code = c.status_code
 where (a.section_ownerid = 100 and b.memberid = 200)
       or (a.section_ownerid = 100); 
```

* * *

但我没有得到正确的结果。我想要如下所示的结果：

```
| section_id | title  | description | status         |
------------------------------------------------------
| 1          | title1 | desc1       | PENDINGMEMBER  |
| 2          | title2 | desc2       | ACTIVEMEMBER   |
| 3          | title3 | desc3       | MEMBERREJECTED |
| 4          | title4 | desc4       | ACTIVEMEMBER   |
| 5          | title5 | desc5       | NULL           |
| 6          | title6 | desc6       | NULL           | 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T10:57:20.607

似乎以下查询是您需要的。请注意，过滤器`memberid = 200`已移至连接条件：

```
select s.section_id,
  s.title,
  s.description,
  m.status
from Sections s
left join SectionMembers sm
  on s.section_id = sm.section_id
  and sm.memberid = 200
left join MemberStatus m
  on sm.status_code = m.status_code
where s.section_ownerid = 100; 
```

*注意：虽然您想要的结果显示您的样本数据中`section_id=2`的状态`ActiveMember`是无法将此值链接到第 2 节。*

此查询给出结果：

```
| SECTION_ID |  TITLE | DESCRIPTION |         STATUS |
------------------------------------------------------
|          1 | title1 |       desc1 |  PendingMember |
|          2 | title2 |       desc2 | MemberRejected |
|          3 | title3 |       desc3 | MemberRejected |
|          4 | title4 |       desc4 |   ActiveMember |
|          5 | title5 |       desc5 |         (null) |
|          6 | title6 |       desc6 |         (null) | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:41:15.153

干得好：

```
SELECT s.section_id, s.title, s.description, ms.status 
FROM Sections as s
LEFT JOIN SectionMembers as sm ON s.section_id = sm.section_id
LEFT JOIN MemberStatus as ms ON ms.status_code = sm.status_code
WHERE (s.section_ownerid = 100 and sm.memberid = 200)
   OR (s.section_ownerid = 100)
GROUP BY section_id 
```

**注意：**更新了我的答案

# javascript - 给定原始图像分辨率，缩放后如何使用javascript计算新分辨率？

> ID：14830414
> 
> 赞同：1
> 
> 时间：2013-02-12T10:31:30.553
> 
> 标签：javascript, html, image, imagemagick, resolution

我有一个从服务器获取的图像，我知道如何从服务器获取图像的分辨率（使用 ImageMagick 分辨率）。所以这个分辨率就是来自 imageMagick 的图像 DPI。

当用户上传图片时，我会告诉用户图片的分辨率是多少，他们现在可以玩弄图片并对其进行缩放。现在，当图像被缩放时，分辨率自然会发生变化。因此，如果我有一个 300dpi 的图像并且用户将其缩放得更大，则分辨率会降低。如果他将其缩放得更小，则分辨率会增加。不管他做什么，当他完成图像时，我必须告诉他新的分辨率。

是否有任何 javascript 库或任何客户端方法来确定缩放后的新分辨率？还是最好的解决方案只是再次使用ajax - 将图像发送回服务器并获得新的分辨率？为了速度，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:40:59.950

结果证明这是我正在寻找的那种计算，尽管是在 Flex 中：

[http://blog.mediarain.com/2009/09/calculating-image-resolutions-in-flex/](http://blog.mediarain.com/2009/09/calculating-image-resolutions-in-flex/)

# php - 使用 WordPress 的插件动态标题

> ID：14830415
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:31.437
> 
> 标签：php, html, wordpress, content-management-system

我正在尝试为我的博客（[WordPress](http://en.wikipedia.org/wiki/WordPress)）制作一个小插件，但我有以下两个问题。

1.  我想从插件中获取自定义类别中的最新三篇文章，但现在只获取最后一篇并重复三遍。我该如何解决？

2.  我想制作一个动态标题。这意味着我希望能够从管理控制面板更改插件的标题。我怎样才能做到这一点？

更新：

感谢你们，我设法显示了帖子图像，但它没有显示在正确的位置。

这是正确的 HTML

```
<li>
    <div class="projects">
        <ul class="projects sticker">
            <li><h2><?php the_title(); ?></h2></li>
            <li><p><a href="">details</a></p></li>
        </ul>
        <img src="" />
    </div>
</li> 
```

这就是它现在的显示方式

```
<li>
    <div class="projects">
         <ul class="projects sticker">
             <li><h2><?php the_title(); ?></h2></li>
             <li><p><a href="">details</a></p></li>
         </ul>
   </div> 
```

基本上我必须将 img 标签放在列表和 div 中。

到目前为止，这是我的代码

```
$args = array('numberposts' => '3', 'category' => $cat_id);
$recent_posts = wp_get_recent_posts($args);
foreach ($recent_posts as $recent ) {
    echo '<a href="' . get_permalink($recent["ID"]) . '" title="Look   '.esc_attr($recent["post_title"]).'" >'
    .'<li>' .'<div class="projects-wrapper">' .'<ul class="projects-sticker">'       .'<li>' .'<h2>' .   $recent["post_title"] .'</li>' .'</h2>' .'<li><p><a href="">details</a></p></li></ul>' .'<img src="'.the_post_thumbnail('thumbnail').'" />'  .'</div>' .'</li>'.'</a>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:36:24.350

要更好地获取最近的帖子，请使用[wp_get_recent_posts](http://codex.wordpress.org/Function_Reference/wp_get_recent_posts)。这是它的片段。

```
$args = array( 'numberposts' => '3','category' => $cat_id );
$recent_posts = wp_get_recent_posts( $args );
foreach( $recent_posts as $recent ){
    echo '<a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a>';
    echo get_the_post_thumbnail($recent["ID"], 'thumbnail');
}
wp_reset_query(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:36:35.880

**订购帖子**

你使用`showposts => 3`那不是一个有效的 arg 使用`posts_per_page => 3`，删除`numberposts`. 您还可以随机订购：`'orderby' => 'rand'`必须是`'orderby' => 'date'` 更多参数可以在[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)页面上找到。

所以使用：

```
$args = array('posts_per_page' => 3, 'orderby' => 'date', 'category' => $cat_id); 
```

**小部件标题**

查看[Widget API](http://codex.wordpress.org/Widgets_API)，扩展小部件类并在`form`函数中添加您的字段。例如，这样您也可以使帖子的数量可变。

# actionscript-3 - 显示文件夹中的随机图像

> ID：14830417
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:38.143
> 
> 标签：actionscript-3

我应该使用什么来从文件夹中挑选随机图像并将其显示在鼠尾草上？我知道我需要： 1\. Math.random thingy - 滚动随机数 2\. XML 文件 - 我不知道如何将它合并到 flash 文件中 3\. 一个带有图片的文件夹，我已经有了任何想法还有什么?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:46:17.550

1.放置图片，fla如下。

![在此处输入图像描述](../Images/858ec576f0e269dd1f3d09faffe08f0d.png)

2.尝试以下。下面的代码只是一个骨架。你尝试更多扩展。

```
import flash.display.Bitmap;
import flash.events.Event;
import flash.net.URLRequest;
import flash.display.Loader;

var imgRequest:URLRequest;
var randCount:int = 6*Math.random();
function loadImage():void
{
    for(var i:int = 0; i<randCount; i++)
    {
        var imgLoader:Loader = new Loader();
        imgRequest = new URLRequest();
        imgRequest.url = "img/img" + int(6*Math.random()) +".jpg";
        trace(imgRequest.url);
        imgLoader.load(imgRequest);
        imgLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, unloadedImg);
        imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadedImg);
    }
}

function onLoadedImg(e:Event):void
{
    e.currentTarget.removeEventListener(Event.COMPLETE, onLoadedImg);

    var bmp:Bitmap = e.currentTarget.content;

    bmp.x = Math.random() * stage.stageWidth;
    bmp.y = Math.random() * stage.stageHeight;
    bmp.width = 200;
    bmp.height = 200;
    this.addChild(bmp);
}

function unloadedImg(e:IOErrorEvent):void
{
    e.currentTarget.removeEventListener(IOErrorEvent.IO_ERROR, unloadedImg);
    trace("load Failed:" + e);
}

loadImage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T11:34:40.683

您需要制作一个图像数组，然后使数学随机化；

```
var selected:Array=[];//new array

while (selected.length<4) {

    //myArray is the array with your pictures.
    var si:int=Math.floor(Math.random()*_myArray.length);

    if (selected.indexOf(si)==-1) selected.push(si);
}

trace(_myArray[selected[0]]); // first selected flag
trace(_myArray[selected[3]]); // fourth selected flag 
```

# graphics - 从笔划重建曲线

> ID：14830418
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:48.583
> 
> 标签：graphics

我正在尝试从（PDF）图形重建曲线。这些包括曲线的轮廓（“笔划”）。显示了一个典型示例（X、Y 单调增加，然后下降）。原始笔画宽度似乎约为 1.0，但这是次要的。

![描边轮廓](../Images/3ca29c418c02a3d0473c089a34a28000.png)

我包括下面的 SVG 表示。目前，我相当粗略的尝试是填充曲线并尝试变薄，直到获得中线。然而，这似乎很脆弱。鉴于我们有分析轮廓（如线条和三次贝塞尔曲线？），是否有更好的算法？

```
<svg xmlns="http://www.w3.org/2000/svg" >
  <g transform="scale(25., 25.)">
    <g transform="translate(-110., -235.)">
      <path fill="none" stroke="red" stroke-width=".05" 
        d="M114.06 242.46 L114.12 242.28 L114.18 242.16 L114.3 242.04 C114.36 241.98 114.36 241.92 114.42 241.92 
L114.48 241.86 C114.54 241.8 114.66 241.74 114.72 241.74 L114.78 241.74 C114.9 241.68 115.02 241.68 115.08 241.74 
L115.2 241.8 C115.26 241.8 115.32 241.8 115.38 241.86 L115.44 241.92 L115.5 241.92 L115.2 241.86 L115.38 241.86 
C115.44 241.86 115.5 241.86 115.56 241.86 L115.62 241.92 C115.74 241.92 115.8 241.92 115.86 241.98 L115.92 242.04 
C115.98 242.04 116.04 242.1 116.1 242.22 L116.16 242.22 C116.16 242.28 116.16 242.34 116.22 242.4 L116.28 242.52 
L116.34 242.7 L116.34 242.94 L116.4 243.18 L116.52 243.66 C116.58 244.02 116.34 244.32 116.04 244.44 
C115.68 244.5 115.32 244.26 115.26 243.9 L115.2 243.48 L115.14 243.24 L115.08 243.06 L115.08 242.94 
L115.02 242.82 L115.08 242.94 L115.02 242.88 L115.2 243.06 L115.14 243.0 L115.38 243.12 L115.26 243.12 
L115.5 243.12 L115.2 243.12 C115.08 243.12 115.02 243.12 114.9 243.06 L114.78 242.94 L114.66 242.88 
L114.84 243.0 L114.72 242.94 L115.08 242.94 L115.02 242.94 L115.26 242.88 L115.2 242.88 L115.32 242.76 
L115.32 242.82 L115.2 243.0 C115.08 243.3 114.72 243.42 114.36 243.3 C114.06 243.18 113.94 242.82 114.06 242.46 Z
      "/>
    </g>
  </g>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:49:40.833

[回答自己的问题，因为没有评论或答案]

我最好的猜测是这条曲线是用“斜体”笔“绘制”的，它总是垂直于基本曲线的方向。这是来自 inkscape 的圆形大写字母版本

![线上的圆形大写字母](../Images/41788aae83d697f6e527f8491f494b76.png)

我现在的策略是：

1.  找到两个将方向改变 180 的曲线段（我有代码可以做到这一点）
2.  计算直径并将其作为原始曲线的笔画宽度
3.  从一个半圆开始，沿两条线延伸
4.  将线解释为 (i) 矩形 (ii) 左弧 (iii) 右弧或 (iv) 两条线上的弧（更复杂）
5.  重复直到分析完所有成分

我不知道它是否会起作用，但我相当有信心。为了好玩，我将在飞机旅行中写下这篇文章。

# c# - 更新标签asp.net c#

> ID：14830420
> 
> 赞同：0
> 
> 时间：2013-02-12T10:31:52.077
> 
> 标签：c#, asp.net

我`<asp:Label ID="ceckSlide"/>`在我的 aspx 页面中有一个，并且想在我的模型中不断更新这个标签，以便标签不断变化`for`。我想知道这是否可能，如果可以，我将如何去做，

从伪代码可以看出，我是`add services`在aspx页面中调用方法，想按照`createServices`类中的for循环更新表格。

创建服务类

```
private int number = 0
priavte int numbercount = 0;

public void addservices()
{
   numbercount = services.count;

   for(int i = 0;i<service.count;i++)
   {
      ///add services 
      number = i+1;
   }
}

public int GetNumber()
{
    int number= number;
    return slide;
}
public int GetSlideCount()
{

    return numberCount;
} 
```

defaul.aspx

```
protected void Confirm_Click(object sender, EventArgs e)
{
   var ser =  new CreateServices();
   var addSer = ser.addservices()
}

// label get updated in this method in the aspx file 
protected void GetSlideNumber()
{

    var ser =  new CreateServices();
    int number= ser .GetSlideNumber();
    int numberCount = ser.GetSlideCount() + 1;

    ceckSlide.Text = slide.ToString() +" Of "+slideCount;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:53:43.780

最简单的方法是将标签放在 UpdatePanel (AJAX) 中，并在页面中放置一个客户端计时器 (javascript)，每隔几秒（或任何您希望的）发送一个更新请求。在服务器端，只需异步更新您的模型，更新标签值的函数应该直接从模型中读取。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:14:27.513

您可能想看看[PokeIn Library - ASP.NET WebSocket & Comet Ajax Library (Reverse Ajax - Server Push)](http://pokein.codeplex.com/ "PokeIn 让您的服务器端可以随时与客户端对话。 简单地说，它是一个反向 Ajax 和 WebSocket 库，直接从 C#/VB.NET 服务器端调用 JavaScript 函数，并从浏览器或 DesktopClients 调用 C#/VB.NET 函数。")。

从[文档网页](http://www.pokein.com/Help/Documentation.aspx)：

> ... PokeIn 从 .NET 类生成动态 JavaScript 代码，让您可以像从同一侧调用方法一样调用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:15:51.257

我认为问题在于您不太了解 HTTP 协议的工作原理。HTTP 使用请求/响应模型，其中客户端（通常是 Web 浏览器）发出请求，然后服务器响应。

实现您所描述的自动更新功能时使用的典型架构正是@dotNET 所描述的 - 客户端页面有一些 javascript 会以设定的时间间隔自动触发请求。服务器以更新的状态进行响应。您可以根据需要将此间隔设置得尽可能小，但较短的间隔有时会导致机器速度慢或互联网连接速度慢的用户出现问题。

虽然可以在不了解请求/响应周期的情况下开发简单的 Web 应用程序，但更高级的开发（如您所描述的）实际上需要您对 Web 的体系结构有透彻的了解。如果您不了解 HTTP 协议，我建议您花一些时间来学习它 - 少量的投资将在您的代码的有效性和效率方面带来巨大的收益。[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)是一个很好的起点，因为它的建议最符合 HTTP 规范。

# image - 如何在 gimp 中创建图像背景？

> ID：14830424
> 
> 赞同：-2
> 
> 时间：2013-02-12T10:31:55.457
> 
> 标签：image, gradient, photoshop, gimp

我需要为我的移动应用程序创建启动画面，我想使用一个图像，就像我附在这个问题上的图像一样，但启动画面的颜色不同。我想这是一个渐变，但真的不知道如何创建这种具有不同颜色的渐变图像。请帮助我提供任何链接或教程。

![在此处输入图像描述](../Images/ed2d33f810157cfc87b7f563b4b6f812.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:40:23.523

请看一下

> [http://docs.gimp.org/2.2/en/gimp-tool-blend.html](http://docs.gimp.org/2.2/en/gimp-tool-blend.html)
> 
> [http://www.youtube.com/watch?v=wjuCM-UTXaQ](http://www.youtube.com/watch?v=wjuCM-UTXaQ)

对于一些渐变教程。

如果您想要相同的图像，具有不同的颜色，那么只需尝试像这样更改图像的色调

> [http://docs.gimp.org/en/gimp-tool-hue-saturation.html](http://docs.gimp.org/en/gimp-tool-hue-saturation.html)
> 
> [http://www.youtube.com/watch?v=q2ybYHxyxfQ](http://www.youtube.com/watch?v=q2ybYHxyxfQ)

# python - Outlook 自动化/对象模型查询 (Python) - 每封电子邮件的唯一 ID？

> ID：14830428
> 
> 赞同：2
> 
> 时间：2013-02-12T10:32:02.113
> 
> 标签：python, visual-studio-2012, outlook, ironpython, msdn

我一直在使用 MSDN 构建一个简单的应用程序，它可以自动执行一些 Outlook 2010 基础知识。进展顺利，但我只是停留在我认为简单的事情上。

我的问题是：我已经能够基于电子邮件文件夹甚至电子邮件获取对象，并遍历它们，将电子邮件主题作为字符串输出，或将文件夹名称作为字符串输出。

我已经能够将信息放入列表框中，但我想知道，假设我想对我在列表框中选择的特定电子邮件做某事，有人知道 mailitem 对象是否具有像唯一 ID 这样的属性我可以隐藏在某处或 SQLite DB 中，我可以将其用作对所述电子邮件执行操作的参考，而不必通过主题或名称再次搜索文件夹？

同样的问题有点适用于我正在寻找特定文件夹的操作，循环通过收件箱文件夹，如果我按名称找到文件夹，则输出该文件夹对象。当然有一种更有效的方法可以一步按名称搜索，而无需遍历文件夹来查找子文件夹等？

这不一定是 python 问题，更多的是关于对象如何工作的。

任何帮助深表感谢

MSDN 链接：

Outlook 对象模型参考 [http://msdn.microsoft.com/en-us/library/office/ff870566%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff870566%28v=office.14%29.aspx)

文件夹对象 [http://msdn.microsoft.com/en-us/library/office/ff870798%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff870798%28v=office.14%29.aspx)

项目对象 [http://msdn.microsoft.com/en-us/library/office/ff870897%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff870897%28v=office.14%29.aspx)

MailItem 对象 [http://msdn.microsoft.com/en-us/library/office/ff870912%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff870912%28v=office.14%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:49:44.287

您可能正在寻找[EntryID](http://msdn.microsoft.com/en-us/library/office/ff866458%28v=office.14%29.aspx)。但请注意，此 ID 仅在每个 .pst 文件中是唯一/恒定的。

# javascript - 如何在 javascript 上准备编码的 POST 数据？

> ID：14830433
> 
> 赞同：14
> 
> 时间：2013-02-12T10:32:33.357
> 
> 标签：javascript, encoding

我需要通过 POST 方法发送数据。

例如，我有字符串“bla&bla&bla”。我尝试使用`encodeURI`并得到“bla&bla&bla”作为结果。对于这个例子，我需要用正确的东西替换“&”。

我应该调用什么样的方法来准备正确的 POST 数据？

**更新：**

我只需要转换可能破坏 POST 请求的字符。只有他们。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T10:37:19.617

```
>>> encodeURI("bla&bla&bla")

"bla&bla&bla"

>>> encodeURIComponent("bla&bla&bla")

"bla%26bla%26bla" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-12T10:47:24.040

您也可以使用`escape()`函数`escape()`。函数对字符串进行编码。此函数使字符串可移植，因此它可以通过任何网络传输到任何支持 ASCII 字符的计算机。此函数对特殊字符进行编码，但以下情况除外：`* @ - _ + . /`

```
var queryStr = "bla&bla&bla";
alert(queryStr);               //bla&bla&bla
alert(escape(queryStr));       //bla%26bla%26bla 
```

用于`unescape()`解码字符串。

```
var newQueryStr=escape(queryStr);
alert(unescape(newQueryStr));   //bla&bla&bla 
```

**笔记：**

```
 escape() will not encode: @*/+

    encodeURI() will not encode: ~!@#$&*()=:/,;?+'

    encodeURIComponent() will not encode: ~!*()' 
```

在互联网上进行了一些搜索后，我得到了以下信息：

**逃脱（）**

不要使用它。

**编码URI()**

如果您想要一个工作 URL，请使用 encodeURI。拨打此电话：

```
encodeURI("http://www.google.com/a file with spaces.html") 
```

要得到：

```
http://www.google.com/a%20file%20with%20spaces.html 
```

不要调用 encodeURIComponent ，因为它会破坏 URL 并返回

```
http%3A%2F%2Fwww.google.com%2Fa%20file%20with%20spaces.html 
```

**编码URIComponent()**

如果要对 URL 参数进行编码，请使用 encodeURIComponent。

param1 = encodeURIComponent(" [http://xyz.com/?a=12&b=55](http://xyz.com/?a=12&b=55) ")

```
Then you may create the URL you need:

url = "http://domain.com/?param1=" + param1 + "&param2=99"; 
```

你会得到这个完整的 URL：

```
http://www.domain.com/?param1=http%3A%2F%2Fxyz.com%2F%Ffa%3D12%26b%3D55¶m2=99 
```

Note that `encodeURIComponent` does not escape the ' character. A common bug is to use it to create html attributes such as `href='MyUrl',` which could suffer an injection bug. If you are constructing html from strings, either use " instead of ' for attribute quotes, or add an extra layer of encoding (' can be encoded as %27).

REF:[When are you supposed to use escape instead of encodeURI / encodeURIComponent?](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent?lq=1)

Also, as **you are using JQuery**, take a look at [this](http://api.jquery.com/jquery.param/) built-in function.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T10:37:04.210

使用 encodeURIComponent() 因为 encodeURI() 不会编码：`~!@#$&*()=:/,;?+'`

这已在以下链接中得到很好的解释：

[http://xkr.us/articles/javascript/encode-compare/](http://xkr.us/articles/javascript/encode-compare/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-14T18:28:38.870

More recent DOM APIs for [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) (and via [URL](https://developer.mozilla.org/en-US/docs/Web/API/URL), possibly others too) handle encoding in some cases. For example, create or use an existing URL object (like from an anchor tag) I map entries of an object as key value pairs for URL encoded params (to use for GET/POST/etc in application/x-www-form-urlencoded mimetype). Note how the emoji, ampersand and double quotes are encoded without any special handling (copied from the [Chrome](https://developers.google.com/web/updates/2016/01/urlsearchparams?hl=en) devtools console):

```
var url = new URL(location.pathname, location.origin);
    Object.entries({a:1,b:"",c:'"stuff&things"'}).forEach(url.searchParams.set, url.searchParams);
    url.search;
    "?a=1&b=%F0%9F%8D%BB&c=%22stuff%26things%22"

fetch(url.pathname, {
    method: 'POST',
    headers: new Headers({
        "Content-type": "application/x-www-form-urlencoded"
    }),
    // same format as GET url search params a&b&c
    body: url.searchParams
}).then((res)=>{ console.log(res); return res }).catch((res)=>{ console.warn(res); return res; }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T13:52:47.827

I want POST the javascript-created hidden form.

So the question is if **encodeURIComponent()** should be used on each POST variable.

I haven't found the answer for Dmitry's (and my) question in this thread. But I have found the answer [in this thread](https://stackoverflow.com/questions/6603928/should-i-url-encode-post-data).

In case of form/POST where you have upload field(s) you must use `<form enctype="multipart/form-data">`, if no upload field is used, you should choose yourself as [described here](https://stackoverflow.com/questions/4007969/application-x-www-form-urlencoded-or-multipart-form-data/4073451#4073451). Submitting the form should do the job completly, so there is no need to use `encodeURIComponent()` explicitly.

If you create a Http POST without using a form or without some library which creates a Http POST from your data, then you need choose an enctype= and join data yourselves.

This will be easy for `application/x-www-form-urlencoded`, where you will use `encodeURIComponent()` on each value and join them exactly as for GET request.

If you decide use `multipart/form-data` then ....? *You should google more how to encode and join them* in such case.

# google-maps - 标记上的 Google Maps API v3 自定义动画

> ID：14830437
> 
> 赞同：1
> 
> 时间：2013-02-12T10:32:49.957
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我想知道是否可以将 Google Maps 的默认标记图形更改为自定义动画序列（.gif 或 .swf），以达到与 Apple Maps 通过 GPS 显示当前位置时相同的效果：

![在此处输入图像描述](../Images/af6ae53d8b909f6a2715b7f3951ab688.png)

可能它可以通过 javascript 和自定义覆盖来完成，但我认为它不会像 Apple Maps 动画那样流畅。（该死的js！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T08:18:59.630

作为标准，标记使用一种称为优化渲染的东西，它总是将标记呈现为静态。要查看动画 gif，您需要在标记上设置优化 = false。生成标记的代码将是：

```
var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    icon: youricon,
    optimized: false
  }); 
```

对于类似于苹果地图的图标，您将需要一个类似的 gif 图标。这应该可以解决您的问题。

# java - 使用属性列表、HashMap 或 Modal 类 Array 哪个更有效？

> ID：14830449
> 
> 赞同：1
> 
> 时间：2013-02-12T10:33:30.543
> 
> 标签：java, performance

我有一个属性列表如下：

*   钥匙
*   项目1
*   项目2
*   第 3 项

这是一组，我有许多类似的组，例如

```
1:       2:       3:        ...........
key_1    key_2    key_3     ...........
item1_1  item1_2  item1_3   ...........
item2_1  item2_2  item2_3   ...........
item3_1  item3_2  item3_3   ........... 
```

我需要做一些操作迭代每个。对于性能和空间而言，以下哪一个会更好：

**方法1（HashMap）**：

```
ArrayList(item1,item2,item3)<br>
HashMap(key , ArrayList)      // For each entry 
```

**方法2（模型类数组）**：

```
ModelClass
{
key
item1
item2
item3
}[]
ModelClass array 
```

哪种方法对性能有好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:38:41.213

我不会太担心效率，直到它成为一个问题（或者从一开始就很明显这是一个主要的设计决策）。

我会喜欢一个正确建模的对象（例如你`ModelClass`上面的）。通过引入一个新对象，您可以正确封装您的属性和迭代这些属性的机制，而不是让集合的集合变得痛苦，并将该结构暴露给迭代过程。您的 ModelClass 可能包含（例如）属性列表，但这是您不必公开的实现决策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:37:47.663

去[`HashMap`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)。更具可扩展性、可读性和可维护性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:49:32.403

> 哪种方法对性能有好处？

这取决于你用它做什么。如果您查找特定的键，则映射将更有效率。如果您总是遍历整个结构，则数组可能会更好地工作（但使用起来更复杂，并且可能仍然不值得额外的痛苦）。

请注意，您也可以使用[a`Multimap<A, B>`](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)而不是 a `Map<A, List<B>>`。

# c++ - 从没有虚函数的 C++ 类继承

> ID：14830450
> 
> 赞同：2
> 
> 时间：2013-02-12T10:33:31.523
> 
> 标签：c++, dependencies

我们有一个基于带有自定义流缓冲区的 std::ostream 的日志实现。我们通过 Schwarz 计数器实现我们应用程序的日志类实例。

为了避免将较低级别的类耦合到我们的日志实现，我们可以传递对 std::ostream 的引用。通过这种方式，我们的低级类可以记录到 std::cout、std::cerr 或通过 Schwarz 计数器创建的实例。

我对此有一个问题。日志实现通过流运算符的重载设置其严重性：

```
// Overload the << operator to set the log message severity
inline CLogStream& operator << (CLogStream& myLogStream, eMsgType::type msgTypeCurrent)
{
  myLogStream.SetMsgTypeCurrent(msgTypeCurrent);
  return ( myLogStream ) ;
} 
```

这允许我们像这样使用记录器：

```
CLog::Main << CLog::MSG_FATAL << "Fatal error" << std::endl; 
```

我想创建一个对我们应用程序的日志实例的引用，该日志被锁定到特定的严重性。这样，我可以将两个 std::ostream 引用传递给我们的实用程序类。其中一个用于正常报告，另一个用于错误报告。这些可以设置为 std::cout 和 std::cerr，或者设置为引用我们的日志对象实例的某种对象。

不幸的是，据我所知，std::ostream 运算符 << 不是虚拟的，所以我不确定如何设计这样的对象。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:13:57.870

阅读有关`ios_base::iword()`. `long`它使您可以访问流对象中的值数组，您可以使用这些值来存储标志和特殊值等内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:50:59.880

`iostream`具有虚拟成员函数（特别是`~ios_base`），因此您可以在`dynamic_cast`中执行 a `operator<<`：

```
inline std::ostream &operator<<(std::ostream &os, eMsgType::type msgTypeCurrent) {
  if (CLogStream *myLogStream = dynamic_cast<CLogStream *>(&os)) {
    myLogStream->SetMsgTypeCurrent(msgTypeCurrent);
  } else {
    os << "TYPE: " << static_cast<typename std::underlying_type<eMsgType::type>
      ::type>(msgTypeCurrent) << ": ";
  }
  return os;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:12:33.883

如果严重性的设置是持久的，那么这两行都会导致一个具有致命严重性的日志条目

```
CLog::Main << CLog::MSG_FATAL << "Log entry 1: " << some_data << std::endl;
CLog::Main << "Log entry 2: " << some_other_data << std::endl; 
```

那么您的日志记录类已经被正确设计为作为通用传递`ostream&`。您只需要针对实用程序类支持的不同日志级别的单独记录器实例。

这是在假设记录器类已被继承`ostream`以利用现有`operator<<`重载的假设下编写的。在这种情况下，`operator<<`for`some_data`和`some_other_data`已经完全不知道输出进入日志流。

# objective-c - 关于 Objective-C 中的逗号分隔表达式

> ID：14830451
> 
> 赞同：0
> 
> 时间：2013-02-12T10:33:39.123
> 
> 标签：objective-c

我最近看到[这篇博客文章](http://iphonedevelopment.blogspot.de/2010/09/dealloc.html)，其中讨论了两种实例变量释放。给大家总结一下：

第一种方法

```
- (void)dealloc {
  [instanceVar release];
  [super dealloc];
} 
```

被认为使指针保持活动状态，直到方法返回。这可能导致未定义的行为。第二种方法

```
- (void)dealloc {
  [instanceVar release], instanceVar = nil;
  [super dealloc];
} 
```

被认为对于生产代码更稳定，因为*instaceVar*设置为 nil。

好的。这是您一直在等待的问题：两种解决方案是否相同？或者表达式的逗号分隔是否使它们具有原子性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:10:12.213

您链接到的博客文章来自 2010 年。

现在更有趣的一点是，您两者都不必做。如果您使用 ARC，则无法向对象发送释放消息。

after release的设置`nil`是为了防止非保留对象在被释放后被发送消息而导致崩溃。我说非保留对象，因为如果它们是保留对象，它们就不会（不应该）在不知不觉中被释放。同样，使用 ARC（只要您不使用 ARC-lite），您可以将非保留对象标记为`weak`，并且弱指针自动归零；即当他们指向的对象被释放时，指针被设置为nil。

所以第二种情况，指针被设置`nil`在dealloc之后，在运行时被认为更安全，但你现在不必担心它，因为ARC会为你处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:40:32.830

逗号不会使它成为原子，但`dealloc`无论如何都应该只有一个线程调用，否则你手上会有很多更大的问题。设置`instanceVar`为`nil`是不必要的，它并不安全，因为如果你的程序中有一个错误以某种方式使用了悬空值，`instanceVar`那么它只会根据它是`nil`或其他东西而不同地表现出来，无论哪种方式，都有一个错误，因为*没有什么*应该依赖这个值。

对于 ARC，这不再是一个问题。ARC 中的一个`dealloc`方法仅用于释放非 ARC 控制的资源，其他一切都会自动为您处理。

# javascript - Javascript 中这一行的含义和目的 -star[t][0] > x << 1 && (star[t][0] -= w << 1, test = !1)

> ID：14830452
> 
> 赞同：4
> 
> 时间：2013-02-12T10:33:42.223
> 
> 标签：javascript

我在以下网址的标题中看到了画布动画 - [http://blogs.msdn.com/b/davrous/archive/2011/07/21/html5-gaming-animating-sprites-in-canvas-with-easeljs。 aspx](http://blogs.msdn.com/b/davrous/archive/2011/07/21/html5-gaming-animating-sprites-in-canvas-with-easeljs.aspx)

一个jsfiddle在[这里](http://jsfiddle.net/anmolsaraf/bQUwn/2/)

在浏览 javascript 代码时，一些烦人的行需要花费大量时间来理解它们，但仍然没有运气，只能向 StackOverflow 的专家提问。

这些行是（[jsfiddle](http://jsfiddle.net/anmolsaraf/bQUwn/2/)中的第85-90行）-

```
 star[t][0] += mouse_x >> 4, 
 star[t][0] > x << 1 && (star[t][0] -= w << 1, test = !1), 
 star[t][0] < -x << 1 && (star[t][0] += w << 1, test = !1), 
```

所有这些都在 for 循环中运行。对我来说主要的困惑是，在第 1 行的赋值之后，在上面的第 2 行和第 3 行进行这两个比较。当上面第 2 行和第 3 行的这两个比较的结果没有存储到任何变量中时，这样做的目的是什么?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:42:32.327

> *“当上面第 2 行和第 3 行的这两个比较的结果没有存储到任何变量中时，这样做的目的是什么？”*

它`&&`用作 的简写`if`，因为`&&`运算符首先评估左侧操作数，并且只有当这是真的时，它才会评估右侧操作数。

该行：

```
star[t][0] > x << 1 && (star[t][0] -= w << 1, test = !1) 
```

可以改写为：

```
if (star[t][0] > x << 1) {
   star[t][0] -= w << 1, test = !1;
} 
```

（第三行也类似。）

顺便说一句，`!1`是`false`.

# java - 用节点 JAVA/XML 替换一些单词

> ID：14830455
> 
> 赞同：0
> 
> 时间：2013-02-12T10:33:48.780
> 
> 标签：java, xml

好吧，我将创建一个包含一些节点的文本的 xml 文件。我的问题是我有文本，我想用节点替换文本中的一些单词。我尝试使用 text.replaceAll 方法将其全部写入文本，但我的 XML 文件很乱。

是否有任何解决方案可以用某个节点替换所有等于“某物”的词？

谢谢。

# javascript - 如何从弹出窗口中删除地址栏

> ID：14830458
> 
> 赞同：-2
> 
> 时间：2013-02-12T10:33:56.137
> 
> 标签：javascript, popup, popupwindow

```
onClick="window.open('index.php?option=com_virtuemart&page=shop.cart&product_id=<?php echo $product_id?
>&Itemid=18','mywindow','directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=400,height=350')" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:05:42.027

Internet Explorer 将始终显示地址栏，无法在弹出窗口中将其删除。一些浏览器会隐藏带有`location=no`标志的地址栏，但 IE 不会。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms536651%28VS.85%29.aspx)：

> 在 Internet Explorer 7 及更高版本中，出于安全（反欺骗）原因，您无法删除 Internet 区域窗口中的地址栏。

无论如何都应该避免弹出窗口，许多访问者会有弹出窗口阻止软件，或者浏览器会简单地阻止它。最好考虑`<div>`页面上的叠加层，您可以手动编码，或者使用现成的插件，例如 jQuery UI Dialog 或 Lightbox。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-21T18:25:47.910

要禁用地址栏，请按照以下步骤操作

1) 在 IE7 中选择工具 2) 选择安全选项卡 3) 选择 Internet 区域并单击自定义级别 4) 向下滚动至“允许网站打开没有地址或状态栏的窗口” 5) 选择“禁用”-> 确定 6) 重新启动IE7，你就完成了。要禁用地址栏，请按照以下步骤操作

# spring - CQ5 Spring 集成

> ID：14830463
> 
> 赞同：3
> 
> 时间：2013-02-12T10:34:14.540
> 
> 标签：spring, architecture, inversion-of-control, aem

有什么方法可以将 CQ5 平台与 Spring 框架集成？我想使用 Spring IoC 功能使我的代码更加清晰和高效。

更新

您好，我似乎找到了解决方案。这里的人开发了[Slice 框架](http://www.cognifide.com/blogs/cq/make-your-cq-life-easier-with-slice/)，它真正减少了大量代码并使 CQ5 开发更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T05:29:08.820

您可能想查看[Eclipse Gemini Blueprint](http://eclipse.org/gemini/blueprint/)或者它的原始版本[Spring Dynamic Modules](http://www.springsource.org/osgi)。Blueprint 项目基本上为您提供了一种在 OSGi 环境中创建启用 Spring 的捆绑包的简单方法。

正如 shsteimer 提到的，[3.2.0 之前的 Spring 发行版是 OSGi 捆绑包](http://www.springsource.org/springframework-ebr)，因此可以放入 OSGi 环境中，您可能可以直接使用它们。Spring 3.2.0 bundles 及更高版本现在可以通过[SpringSource ERB](http://ebr.springsource.com/repository/app/bundle?query=S)获得。但是，Blueprint 可以解决或帮助您处理一些您原本必须做的样板 OSGi 东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:47:24.090

在过去的一个项目中，我能够让 Spring JDBC 在 CQ 内部工作（以支持一些遗留代码，因此我们不必重新编写它）。我的记忆是 spring jar 文件已经“OSGI-ified”，所以只需弄清楚 JDBC 在 CQ 内部工作所需的所有依赖层，并将所有 jar 添加到存储库中的 /应用程序/myApp/安装文件夹。

长话短说，我不确定 IoC，但您可能会检查它是否已打包为 OSGI 版本，您可以轻松使用它而无需太多麻烦。

# javascript - jqPlot 中的自定义系列值

> ID：14830465
> 
> 赞同：0
> 
> 时间：2013-02-12T10:34:20.833
> 
> 标签：javascript, jqplot

我正在使用 jqPlot 插件创建图表解决方案。用户将能够定义他们想要绘制的所有值。我在向图表添加自定义系列时遇到问题。customSeries 是一串以逗号分隔的值

```
var seriesLabels = customSeries.split(",");

        for(var i = 0; i<seriesLabels.length; i++)
        {
            series=new Object();
            series.label = seriesLabels [i];                
            seriesArray.push(series);
        } 
```

然后我尝试使用对象 seriesArray 像这样绘制系列

```
plot2 = $.jqplot('placeHolder', frequincySingleGroupArray, {
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                pointLabels: { show: true }
            },
            series:[                    
                    seriesArray     
            ],
            legend: {
              show: true,
              location: 'e',
              placement: 'outside'
            },
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: params.Intervals.split(","),
                    pad: 10
                },
                yaxis: {

                }
            }, seriesColors: LegendColors.split(","),               
        });         
    }); 
```

这不起作用。如果我将系列更改为

```
series:[seriesArray[0],seriesArray[1]] 
```

这会起作用，但它不像我需要的那样动态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:37:21.910

我需要像这样删除方括号

```
series:seriesArray 
```

这有效

# ios - 有多少页面必须有 iOS 应用程序？

> ID：14830466
> 
> 赞同：0
> 
> 时间：2013-02-12T10:34:21.560
> 
> 标签：ios, app-store, appstore-approval

我想做一些有一个或两个简单页面（视图）并链接到某个站点的应用程序。应用商店对这类应用有什么要求吗？

例如：有多少页面必须有这样的 iOS 应用程序？……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:38:51.480

此类应用程序没有严格的规定。

但最好阅读以下[指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:42:06.553

在发布此类问题之前阅读一些文档。

iphone 应用程序不受页面、视图或控件数量的限制。应用程序大小限制为 2GB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:43:36.580

应用程序必须有超过零页才能通过应用程序审核。之后的任何数字都可以。

# asp.net - 如何使用vb在asp.net中的复选框列表中仅传递选中的值

> ID：14830467
> 
> 赞同：0
> 
> 时间：2013-02-12T10:34:23.703
> 
> 标签：asp.net, vb.net

我试图只将检查的值传递给数据库。但我的问题是，即使是未经检查的值也被传递了。我的复选框是从下拉框动态创建的。

从下拉框创建列表框

```
 Protected Sub DropDownList1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles DropDownList1.SelectedIndexChanged
    Dim uname As String
    Dim sqlConnection As New SqlConnection(connectionString)
    sqlConnection.Open()
    Dim exe1 As String = "select USERNAME from dummy_tbl_first AS L INNER JOIN            Dummy_tbl_second AS A ON L.USER_ID= A.USER_ID INNER JOIN Dummy_tbl3 AS G ON G.GROUP_ID=A.GROUP_ID WHERE G.GROUP_NAME='" + DropDownList1.Text + "' ORDER BY USERNAME "
    Dim thisCommand As New SqlCommand(exe1, sqlConnection)
    thisCommand.ExecuteNonQuery()
    Dim thisReader As SqlDataReader = thisCommand.ExecuteReader()
    CheckBoxList1.Items.Clear()
    While (thisReader.Read())
        uname = thisReader.GetValue(0)
        CheckBoxList1.Items.Add(uname)
    End While
    thisCommand.Dispose()
    sqlConnection.Close()
    Button1.Enabled = False
End Sub 
```

这就是我插入数据库的方式

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim id As Integer = Request.QueryString("sr_id")
    Dim first_name37 As String = CType(Session.Item("FIRST_NAME"), String)
    Session("FIRST_NAME") = first_name37
    Dim update_id As String = Request.QueryString("sr_id")

    For Each list As ListItem In CheckBoxList1.Items
        Response.Write(list.Selected)
        Dim da As Date = Date.Now()
        Dim sqlConnection As New SqlConnection(connectionString)
        sqlConnection.Open()
        Dim exe1 As String = "INSERT INTO TEST_TBL VALUES('" & id & " ','" + first_name37 + "','" + list.Value + "','" + da + "')"
        Dim thisCommand As New SqlCommand(exe1, sqlConnection)
        thisCommand.ExecuteNonQuery()
        Dim exeupdate As String = "UPDATE TEST_TBL2 SET STATUS='ASSIGNED' WHERE CR_ID='" + update_id + "'"
        Dim thisCommandUpdate As New SqlCommand(exeupdate, sqlConnection)
        thisCommandUpdate.ExecuteNonQuery()
        sqlConnection.Close()
    Next
    CheckBoxList1.Items.Clear()
    Button1.Enabled = False
End Sub 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:36:36.737

您需要对您的逻辑进行条件化，因为现在它根本没有歧视性。所有项目都在 中`CheckBoxList1.Items`，而不仅仅是选定的项目；所以，只检查选定的项目......

```
If (list.Selected) Then
 ' proceed with this one
End If 
```

# c++ - 覆盖数组索引运算符

> ID：14830474
> 
> 赞同：0
> 
> 时间：2013-02-12T10:34:55.647
> 
> 标签：c++, arrays, class, multidimensional-array, operator-overloading

我想在我的类中覆盖数组索引运算符。这是我想要做的，但没有成功。

```
class Complex{              
    Complex const& operator[](unsigned int) const; // Read-only access
    Complex& operator[](unsigned int);             // Read/Write access:
};

const Complex& Complex::operator [](unsigned int unsignedInt) const {
    const Complex* temp = this+i;
    return *temp;
}
Complex& Complex::operator [](unsigned int unsignedInt) {
    Complex* temp = this+i;
    return *temp;
} 
```

编辑：我想做类似的事情：

```
Complex **c = new Complex[5];    //Create 2D array
c[2] = new Complex();            //Initialize
cout<<*c[2];                     //print by overloading << 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:38:16.763

您的函数定义语法错误：

```
Complex Complex::const& operator[](unsigned int i) const{ 
```

*返回类型*应该由 注释，`const&`并且显式名称限定`Complex::`属于函数名称，`operator[]`：

```
Complex const& Complex::operator[](unsigned int i) const { 
```

此外，*实现*似乎是错误的：

```
const Complex* temp = this+i;
return *temp; 
```

这没有多大意义。你的意思可能是这样的：

```
Complex temp = *this + i;
return temp; 
```

假设适当的`operator+`过载。尽管在这里很难说出您真正想要哪种语义，因为`Complex`无论如何都没有直观的索引访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:41:10.490

代替

```
Complex Complex::const& operator[](unsigned int i) const 
```

它应该是

```
const Complex& Complex::operator[](unsigned int i) const 
```

# magento - 如何在没有顶部菜单的情况下将标题添加到新的 cms 页面？

> ID：14830475
> 
> 赞同：2
> 
> 时间：2013-02-12T10:34:56.367
> 
> 标签：magento, magento-1.7

我创建了一个 cms 页面。我想添加没有顶部菜单的标题。

我尝试将**没有 topmenu 内容的 header.phtml 内容**复制到新的 cms 页面布局并排除标题链接。它不起作用。

PS - 新 cms 页面的布局也是自定义的。我还为我的新 cms 页面创建了一个布局。

**PS - header.phtml**中有 2 个 div 。在复制第 1 个 div 时，第 2 个无效。第二个 div 内容有横幅块、购物车块和自定义块。除了论文 2 div **header.phtml**还包含**topmenu**的 php 代码，即

```
 <?php    echo $this->getChildHtml('topMenu') ?> 
```

我在复制和粘贴时将其排除在外。

我正在使用 magento 1.7.0.2

对此有任何建议还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:48:56.927

在编辑器中打开 app>design>frontend>default>your_theme>layout>page.xml。

有一个块名称="header"。在那里有一个topmenu 块说name="menu"。

复制名称并打开 admin>cms>your_cms_page>Design。

在布局更新 XML 中写入

```
<remove name="menu" /> 
```

保存并刷新浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:54:41.787

在后端，在“设计”选项卡下编辑 CMS 页面详细信息的页面中，找到“自定义 XML 更新”输入字段并添加：

```
<remove name="top.menu" /> 
```

这将使 Magento 忽略 CMS 页面中名为“top.menu”的块

# ruby-on-rails - 如何在 Devise 中使用作用域语言环境 + path_prefix？

> ID：14830476
> 
> 赞同：1
> 
> 时间：2013-02-12T10:35:00.187
> 
> 标签：ruby-on-rails, devise

在 Rails 3.2 应用程序中，我使用`path_prefix`带范围路由的设计和本地化。

```
#routes.rb
MyApp::Application.routes.draw do
  scope "(:locale)", locale: /#{I18n.available_locales.join("|")}/  do
    devise_for :admins,  
      path_prefix: 'administration',
    end

   ...other resources
  end
end 
```

虽然我所有其他资源的 url 都正确写入，例如`/en/resource/1`在地址栏中，但设计路径将语言环境作为参数传递`/administration/admins/registrations/login?locale=en`

我如何鼓励 Devise 使用该格式`/locale/path_prefix/route`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T19:55:23.967

第一行应替换为第二行。

```
devise_for :admins, :path_prefix => "administration"

devise_for :admins, :path => "administration/admins" 
```

因此，在您的示例中，它将是：

```
#routes.rb
MyApp::Application.routes.draw do
  scope "(:locale)", locale: /#{I18n.available_locales.join("|")}/  do
    devise_for :admins, :path => "administration/admins"

   ...other resources
  end
end 
```

有关 devise_for 的更多信息，请查看此链接：[http ://rubydoc.info/github/plataformatec/devise/master/ActionDispatch/Routing/Mapper#devise_for-instance_method](http://rubydoc.info/github/plataformatec/devise/master/ActionDispatch/Routing/Mapper#devise_for-instance_method)

# gtk - gtk cellrenderer 显示一个小部件

> ID：14830478
> 
> 赞同：0
> 
> 时间：2013-02-12T10:35:06.343
> 
> 标签：gtk

当在树视图中编辑单元格时，我使用 théstartiting 来呈现自定义小部件。这是显示我的小部件的绝佳工具。

但是当单元格不处于可编辑模式时，我想做同样的事情。就目前而言，十多年了，这似乎是不可能的。

有没有办法在我的树视图列的每个单元格中显示自定义小部件？

我是否必须等待 gtk v52 或切换回 Windows 窗体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:08:03.890

不，您不能在树视图的每个单元格中显示自定义小部件——因为您必须创建自定义单元格渲染器。该过程与创建自定义小部件没有什么不同，但您必须实现更多功能。请参阅`GtkCellRenderer`.

# c# - 如何在单个线程中同步运行方法？

> ID：14830486
> 
> 赞同：0
> 
> 时间：2013-02-12T10:35:39.237
> 
> 标签：c#, multithreading, delegatecommand

我有一个方法，我只希望一个线程一次运行一个。

问题是，这个方法的执行与命令相结合，所以当用户非常快地连续按几次按钮时，我的方法会被同一个线程连续调用几次。在这种情况下，锁定不起作用，因为同一个线程只是一次又一次地获得锁定。我觉得奇怪的是，同一线程连续多次调用同一方法，而该方法的早期调用尚未完成。

有没有办法强制一个方法一次只从一个线程运行一个？

# mysql - 如何获取空表的列名？

> ID：14830487
> 
> 赞同：3
> 
> 时间：2013-02-12T10:35:42.293
> 
> 标签：mysql, sql, sql-server, oracle, oracle10g

考虑下表

```
--------------------------------
ID   | ColA    | ColB   | ColC
--------------------------------
1    | ABC     |        |
2    |         | XYZ    |
3    | PQR     |        |
4    | MNO     | PQR    | 
```

我需要获取 ID = 1 的表的第一个空闲列。我该怎么做

例如：

If `ID = 1`，下一个空闲列是`ColB`
If `ID = 2`，下一个空闲列是`ColA`
If `ID = 3`，下一个空闲列是`ColB`
If `ID = 4`，下一个空闲列是`ColC`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:54:36.340

您可以在 mysql 中使用以下查询

```
select ID,if(colA is null,'colA',(if(colB is null,'colB',
(if(colC is null,'colC','no column is null'))))) as Result  from your_table_name 
```

对于您的示例表，如果您执行我的查询，您将得到以下结果

![在此处输入图像描述](../Images/1490b163905758e9c410f31bb4031dba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:46:24.713

尝试这个 ：

```
select case 
when ColA is not null then 'ColA'
when ColB is not null then 'ColB'
when ColC is not null then 'ColC'

End FirstCol

from test 
```

[SQL小提琴](http://sqlfiddle.com/#!6/8b999/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:42:54.903

对于*`sql-server`*; （如果你想考虑空字符串（`''`）也可以使用`nullif(colName,'') is null)`）

```
Select Id, case when colA is null then 'colA'
                when colB is null then 'colB'
                when colC is null then 'colC'
                ...
           end freeCol
from yourTable 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T10:43:11.500

如果您想要列的名称，您可以执行以下操作：

```
SQL> select id, cola, colb, colc,
  2         coalesce(nvl2(cola, '', 'COLA'),
                     nvl2(colb, '', 'COLB'),
                     nvl2(colc, '', 'COLC')) first_free_col
  3    from tab;

        ID COL COL COL FIRST_FREE_COL
---------- --- --- --- --------------------------------
         1 ABC         COLB
         2     XYZ     COLA
         3 PQR         COLB
         4 MNO PQR     COLC 
```

或案例

```
SQL> select id, cola, colb, colc,
  2         case when cola is null then 'COLA'
  3          when colb is null then 'COLB'
  4          when colc is null then 'COLC'
  5         end first_free_col
  6    from tab;

        ID COL COL COL FIRST_FREE_COL
---------- --- --- --- --------------------------------
         1 ABC         COLB
         2     XYZ     COLA
         3 PQR         COLB
         4 MNO PQR     COLC 
```

# sql-server - ms sql smo：如何在没有“Alter table MyTable check constraint MyForeignKey”的情况下编写外键脚本

> ID：14830488
> 
> 赞同：2
> 
> 时间：2013-02-12T10:35:46.770
> 
> 标签：sql-server, foreign-keys, smo

我看到服务器 2008 生成的脚本：

```
ALTER TABLE [mytable]  WITH CHECK ADD  CONSTRAINT [fk_mytable_id] FOREIGN KEY([id])
REFERENCES [mytable2] ([id])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE mytable CHECK CONSTRAINT [fk_mytable_id] 
```

最后一条语句是多余的，没有它脚本可以正常工作。我使用 SMO 生成外键脚本，并希望避免使用最后一个字符串。我可以做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T09:00:37.997

检查约束部分实质上确保您的约束已启用。它不应该是必要的，因为它应该由您的初始语句启用。

这个问题看起来与 StackOverflow 上的另一个问题非常相似：[T-SQL foreign key check constraint](https://stackoverflow.com/questions/2927455/t-sql-foreign-key-check-constraint)

# php - Magento：详细信息页面数量框不起作用

> ID：14830492
> 
> 赞同：1
> 
> 时间：2013-02-12T10:35:54.930
> 
> 标签：php, magento

这是我的网站详细信息页面 [http://ametrade.dev.icyberking.com/index.php/jp-3004242.html](http://ametrade.dev.icyberking.com/index.php/jp-3004242.html)

购物车商品数量框不会向购物车添加超过一件商品，无论添加了多少数量我已经通过谷歌搜索但没有找到解决我的问题的任何有效解决方案我还在下面的链接中找到了相同的问题但我对此无能为力..请帮忙

[Magento 数量字段不起作用](https://stackoverflow.com/questions/2958750/magento-quantity-field-doesnt-work)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:46:29.917

问题是在 HTML 布局中，输入字段“数量”不在“添加到购物车”表单中。因此，输入该字段的数据甚至不会发布（可以用 firebug 检测到）。您应该检查页面布局并确保该字段位于表单标签内。

# mysql - 如何将 GRANT 与变量一起使用？

> ID：14830493
> 
> 赞同：4
> 
> 时间：2013-02-12T10:35:57.177
> 
> 标签：mysql, grant

我在 MySql 中一起使用 GRANT 和变量时遇到了一些麻烦。

```
SET @username := 'user123', @pass := 'pass123';

GRANT USAGE ON *.* TO @username@'%' IDENTIFIED BY @pass;
GRANT INSERT (header1, header2, headern) ON `data` TO @username@'%';
GRANT SELECT (header1, header2) ON `data2` TO @username@'%'; 
```

我想在脚本开头将用户名和密码放入变量中，然后在 GRANT 中使用它们

所以代替这个：

```
GRANT USAGE ON *.* TO 'user123'@'%' IDENTIFIED BY 'pass123'; 
```

我想使用这样的东西：

```
GRANT USAGE ON *.* TO @username@'%' IDENTIFIED BY pass; 
```

如果有人可以向我展示正确的陈述，我将不胜感激。提前谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:56:16.853

```
SET @object = '*.*';
SET @user = '''user1''@''localhost''';

SET @query = CONCAT('GRANT UPDATE ON ', @object, ' TO ', @user);
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

```
DROP PROCEDURE IF EXISTS `test`.`spTest`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `spTest`( varLogin char(16), varPassword char(64) )
BEGIN
    DECLARE varPasswordHashed CHAR(41);
    SELECT PASSWORD(varPassword) INTO varPasswordHashed;

    # Any of the following 3 lines will cause the creation to fail
    CREATE USER varLogin@'localhost' IDENTIFIED BY varPassword;
    GRANT USAGE ON test.* TO varLogin@'localhost' IDENTIFIED BY varPassword;
    GRANT USAGE ON test.* TO varLogin@'localhost' IDENTIFIED BY PASSWORD varPasswordHashed;

    ## The following 3 lines won't cause any problem at create time
    CREATE USER varLogin@'localhost' IDENTIFIED BY 'AnyPassordString';
    GRANT USAGE ON test.* TO varLogin@'localhost' IDENTIFIED BY 'AnyPassordString';
    GRANT USAGE ON test.* TO varLogin@'localhost' IDENTIFIED BY PASSWORD  'AnyPassordString';  
END$$

DELIMITER; 
```

# cakephp - 类小部件组件的 CakePHP 最佳实践

> ID：14830497
> 
> 赞同：1
> 
> 时间：2013-02-12T10:36:01.783
> 
> 标签：cakephp

我想构建一个小部件，它可以作为一个小盒子包含在不同的视图中。

小部件是一个表格，显示表格（模型）“Xyz”中的一些行；一些行（根据用户权限）是可编辑的（用户可以更改它们的值）。

实现这样一个（简单）事情的最佳方法是什么（我是 CakePHP 的新手）？
尤其是：

1.  我应该将演示代码（通常是 .ctp）放在哪个文件中以允许它包含在其他视图中？

2.  我应该将用于检索数据和准备演示代码变量的代码放在哪个文件中？通常它应该去一个控制器，但我可以从另一个控制器包含/调用一个控制器方法。

3.  我应该将处理 POST 请求的代码放在哪个文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:51:49.580

使用一个元素来存储小部件标记并使用 requestAction 来获取数据：

/app/View/Elements/widget.ctp

```
$data = $this->requestAction('/controller/action/param1/etc');

debug($data); 
```

如果您这样做（与将其放在 AppController::beforeFilter() 中相反），则只有在显示小部件时才会获取数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:16:30.213

简要地

1.  app/Views/Elements/fancy_element.ctp 然后将其包含在 app/Views/Layouts/default.ctp
2.  应用程序/控制器/AppController.php

    `class AppController extends Controller {`

    ```
    function beforeFilter() {
        parent::beforeFilter();
        $this->set(
            'cool_variable', 
            $this->YourMethodOrComponent->action($params)
          );
    } 
    ```

    `}`

3.  根据您的业务逻辑需要。通常是 YourFancyController/your_cool_action。只需在 ajax 请求的情况下处理重定向或刷新。

* * *

编辑：RichardAtHome 提出了更好的解决方案，因为我的假设是基于非常过时的原则。

# hadoop - Hadoop1.0.4 示例未运行

> ID：14830500
> 
> 赞同：0
> 
> 时间：2013-02-12T10:36:15.510
> 
> 标签：hadoop, mapreduce

我最近在 Windows 7（64 位）上安装了 Hadoop 1.0.4 和 cygwin。我已经根据[这个站点](http://hadoop.apache.org/docs/r1.0.4/single_node_setup.html)配置了 *-site.xml 。我能够完美地完成所有事情，但我的程序在这个特定点挂起：

```
$ bin/hadoop jar hadoop-examples-*.jar grep input output 'dfs[a-z.]+'
13/02/12 15:15:17 WARN util.NativeCodeLoader: Unable to load native-hadoop library for         
your platform... using builtin-java classes where applicable
13/02/12 15:15:17 WARN snappy.LoadSnappy: Snappy native library not loaded
13/02/12 15:15:17 INFO mapred.FileInputFormat: Total input paths to process : 16
13/02/12 15:15:17 INFO mapred.JobClient: Running job: job_201302121513_0002
13/02/12 15:15:18 INFO mapred.JobClient:  map 0% reduce 0% 
```

我也检查了 jobtracker 和 tasktracker。一个节点处于活动状态，提交总数为 1，但没有活动作业！那里什么都没有运行..没有映射/没有减少！我现在很困惑，我什么也做不了。请帮助 wat 下一步做什么。PS：我只在一台机器上尝试伪单节点设置。请指导我该怎么做？即使 jps 命令也不起作用？我已将路径设置为 C:\jdk_1.6.0_15。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:57:32.553

为了让 JPS 工作，路径为 `C:\jdk_1.6.0_15/bin`

关于 Job 未运行，请检查 Job-tracker 日志。可能是某些配置错误导致作业中止。

您也可以专门尝试在配置中设置映射器和减速器的最大数量。它可能被设置为零

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:22:35.420

1) 使用 jps/ps 检查您的 hadoop 状况，所有组件都工作正常吗？

2）检查java版本。它必须是sun/oracle jdk > = 6，检查hadoop-env.sh中的java配置（主要是JAVA_HOME）

3）检查`/hadoop-1.*/lib/native`本机库的文件夹，这些是否支持您的平台？

如果它们不存在，则使用此指令[链接](http://hadoop.apache.org/docs/r0.18.3/native_libraries.html)进行编译，因为（本机库仅在 *nix 平台即 Unix/Linux 系统上进行测试，然后将库加载到您的文件系统中，如上所述

有用的其他[链接](http://www.quora.com/How-can-I-get-proper-native-libraries-for-Hadoop-0-21-0-to-be-able-to-mount-HDFS-using-fuse-dfs)

即使这不起作用，请尝试使用 hadoop-0.20，因为例如，这适用于 windows-64 位，您可以尝试

`hadoop-0.20.2/bin/hadoop jar /home/trendwise/apache/hadoop-0.20.2/hadoop-0.20.2-examples.jar pi 16 1000`

# bash - Bash 脚本进入无限循环。为什么？

> ID：14830514
> 
> 赞同：0
> 
> 时间：2013-02-12T10:36:49.093
> 
> 标签：bash, infinite-loop, nohup

此初始化脚本应使用带有“start”参数的 nohup 启动服务。所有其他参数应按原样传递。（为方便起见，提供了重新启动。）

```
#!/bin/sh
# Foo Startup Script

LOGFILE="/var/log/foo/foo.log"
WORKDIR="/usr/local/foo"

nohup() {
        nohup $WORKDIR/bin/foo $@ >> $LOGFILE  2>&1 &
}
other() {
        $WORKDIR/bin/foo $@
}

case "$1" in
  start)
        nohup $@
        ;;
  restart)
        other stop
        nohup start
        ;;
  *)
        other $@
        exit
esac 
```

使用“start”，脚本会进入无限循环，nohup 会分叉越来越多的进程（又名 fork 炸弹），但为什么呢？（没有输出写入日志文件。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:51:22.963

```
nohup() {
    /usr/bin/nohup $WORKDIR/bin/foo "$@" >> $LOGFILE  2>&1 &
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:55:14.657

最有可能的：

```
nohup() {
        nohup $WORKDIR/bin/foo $@ >> $LOGFILE  2>&1 &
} 
```

您的函数`nohup`调用自身。最简单的解决方案是给函数一个不同的名称。

如果您想花哨，可以尝试预先计算 nohup 二进制文件的完整路径，或使用 shell 内置版本（如果存在）：

```
builtin nohup --help || native_nohup="$(which nohup)"
nohup() {
        if test -z "$native_nohup"; then
                builtin nohup $WORKDIR/bin/foo $@ >> $LOGFILE  2>&1 &
        else
                $native_nohup $WORKDIR/bin/foo $@ >> $LOGFILE  2>&1 &
        fi
} 
```

但我真的不认为这是必要或有用的。重命名函数要容易得多。

# android - 网站到安卓

> ID：14830516
> 
> 赞同：0
> 
> 时间：2013-02-12T10:37:10.863
> 
> 标签：android, web, native

我想构建一个代表我的网站的 Android 应用程序，我需要一些有关如何处理此问题的指导。我的网站是一个由 www.modified-shop.org 制作的电子商务商店，它有一个复杂的 mysql 数据库结构。如果我要构建一个本机应用程序，是否明智地创建一个仅包含我需要的信息的更简单的数据模型，然后将其转换为 sqlite 并使其成为应用程序安装的一部分？如果是这样，这个 sqlite db 的最大大小应该是多少？另外，当用户通过android服务启动应用程序时，我是否应该处理数据更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:34:59.737

创建您自己的 API 以仅返回您需要的内容，然后在您的应用程序中使用此 api 获取并将您的数据设置到服务器上的 Mysql DB 中。

您可以使用 sqllite 来缓存一些结果等。

# java - 无法在 Java 客户端接收来自 C++ 服务器的回复

> ID：14830524
> 
> 赞同：1
> 
> 时间：2013-02-12T10:37:44.647
> 
> 标签：java, c++, zeromq

我正在尝试我的第一个 ZMQ 示例。客户端是Java，服务器是C++。我已经能够成功地将消息从客户端发送到服务器，但是回复没有回到客户端。

服务器代码：

```
 while (true) {
      zmq::message_t request;

      //  Wait for next request from client
      socket.recv (&request);
      std::cout << "Received Hello" << std::endl;

      //  Do some 'work'
      sleep (1);

      //  Send reply back to client
      zmq::message_t reply (5);
      memcpy ((void *) reply.data (), "World", 5);
      std::cout << "Sending world" << std::endl;
      socket.send (reply);
   } 
```

客户端代码：

```
for (int request_nbr = 0; request_nbr != 10; request_nbr++) {
                // Create a "Hello" message.
                // Ensure that the last byte of our "Hello" message is 0 because
                // our "Hello World" server is expecting a 0-terminated string:
                String requestString = "Hello" + " ";
                byte[] request = requestString.getBytes();
                request[request.length - 1] = 0; // Sets the last byte to 0
                // Send the message
                System.out.println("Sending request " + request_nbr + "\u2026");
                socket.send(request, 0);

                System.out.println("Waiting for reply " + request_nbr + "\u2026");

                // Get the reply.
                byte[] reply = socket.recv(0);
                // When displaying reply as a String, omit the last byte because
                // our "Hello World" server has sent us a 0-terminated string:
                System.out.println("Received reply " + request_nbr + ": ["
                        + new String(reply, 0, reply.length - 1) + "]");
            } 
```

输出：

```
Bound. Waiting for client..
Received Hello
Sending world 
```

# java - net.sf.json.JSONException

> ID：14830525
> 
> 赞同：1
> 
> 时间：2013-02-12T10:37:45.323
> 
> 标签：java, javascript, json, multidimensional-array, jsonexception

我转换了一个普通的 JavaScript `array`（在一个 JSP 页面中），`JSON.stringify()`对该数组执行了一个操作并将其作为参数传递给另一个 JSP。在另一个 JSP 中，我正在使用`request.getParameter()`.

现在，在将字符串转换为 a`JSONArray`时，我遇到了这样的异常-

```
net.sf.json.JSONException: Missing value. at character 2 of [[\"111\", \"1.1.1.1\", \"111\", \"111\", \"111\"]]
at net.sf.json.util.JSONTokener.syntaxError(JSONTokener.java:505)
        at net.sf.json.util.JSONTokener.nextValue(JSONTokener.java:377)
        at net.sf.json.JSONArray._fromJSONTokener(JSONArray.java:1132)
        at net.sf.json.JSONArray.fromObject(JSONArray.java:125)
        at net.sf.json.util.JSONTokener.nextValue(JSONTokener.java:350)
        at net.sf.json.JSONArray._fromJSONTokener(JSONArray.java:1132)
        at net.sf.json.JSONArray._fromString(JSONArray.java:1198)
        at net.sf.json.JSONArray.fromObject(JSONArray.java:127)
        at net.sf.json.JSONSerializer.toJSON(JSONSerializer.java:137)
        at net.sf.json.JSONSerializer.toJSON(JSONSerializer.java:103)
        at net.sf.json.JSONSerializer.toJSON(JSONSerializer.java:84)
        at org.apache.jsp.pages.Handler_jsp._jspService(Handler_jsp.java:146)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
        at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)
        at org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:274)
at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:455)
        at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:320)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

这就是我的来自 request.getParameter() 的字符串的样子 -

```
[[\"111\", \"1.1.1.1\", \"111\", \"111\", \"111\"]] 
```

是什么**`net.sf.json.JSONException: Missing value. at character 2 of [[\"111\", \"1.1.1.1\", \"111\", \"111\", \"111\"]]`**意思？我该如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T06:23:59.017

我想到了。它抛出该异常的原因是因为它期待`"`而不是`\"`after `[[`。我所做的只是`[[\"111\", \"1.1.1.1\", \"111\", \"111\", \"111\"]].replaceAll("\\\"", "\"")`。

# android - 单个 AOSP 或 CyanogenMod java 应用程序的 Eclipse 设置

> ID：14830530
> 
> 赞同：5
> 
> 时间：2013-02-12T10:37:53.523
> 
> 标签：android

前言：我是一名 Java Android 开发人员。我知道标准的 Android 开发流程。

我想开始为 AOSP-CM 开发。我按照指南在 Eclipse 中导入整个 Java 源代码，使用源代码提供的 .classpath 文件。所以我有一个包含所有源代码的 Java 项目，我可以浏览和编辑所有内容。

下一步是尝试设置单个 Android 项目，例如电话应用程序，以便使用 ADT 插件功能，如 GUI 图形编辑器。我想编辑电话源，在 Eclipse 中构建，最重要的是使用 Eclipse 调试器。

有可能的？在哪里可以找到指南或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T12:51:43.980

我的最终解决方案是：

*   设置类路径

    > cd /path/to/android/root
    > 
    > cp 开发/ide/eclipse/.classpath 。
    > 
    > chmod u+w .classpath

*   创建一个 Java 项目并选择 CM（或 Android AOSP）基础文件夹，而不是“使用默认位置”。

现在，在 Eclipse 中，您可以附加到模拟器，运行 DDMS 并选择要调试的进程（例如，com.android.calendar）。

*   运行 > 打开调试对话框...
*   右键单击“远程 Java 应用程序”，选择“新建”。
*   选择一个名称，即“android-debug”或任何您喜欢的名称。
*   将“项目”设置为您的项目名称。将主机设置为“localhost”，但将端口更改为 8700。
*   单击“调试”按钮，您应该一切就绪。

请注意，端口 8700 连接到当前在 DDMS 控制台中选择的任何进程，因此您需要确保 DDMS 已选择您要调试的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T07:26:01.113

这是我导入 Apollo 所做的，它是 Cyanogenmod 中当前的默认音乐应用程序。

1.  Import Existing Android Code into Workspace，选择 packages/app/Apollo 作为根目录。
2.  右键单击 Package Explorer 和 Android Tools 中的项目 -> 添加支持库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T00:46:58.417

我认为您不能使用 ADT 来编辑 AOSP java 应用程序。这些应用程序不使用 SDK 应用程序使用的 Ant 构建系统。我相信这些应用程序使用 SDK 中不可用的私有 api。

对我有用的是一个包含所有框架的大型 Java 项目，包括[使用 Eclipse 浏览和编辑 AOSP](http://apienthusiast.blogspot.com/2014/06/using-eclipse-to-browse-and-edit-aosp.html)中描述的应用程序。使用 eclipse 项目编辑 Java 代码，然后使用 AOSP 构建系统来构建我所做的任何更改。

如果您的目标是使用 ADT 布局工具像普通 sdk 应用程序一样编辑布局，我认为您无法使用这种方法来做到这一点。

# c# - Visual Studio 2012 Coded UI 测试加载包失败

> ID：14830531
> 
> 赞同：3
> 
> 时间：2013-02-12T10:37:58.197
> 
> 标签：c#, testing, user-interface

我有一个项目，我必须在其中添加一个编码的 UI 测试。

如果我创建一个测试，它会给我以下错误：

*以下包无法加载：C:\Users\AppData\Local\assembly\dl3\W2RG6NJ4.G6O\TMOZA01A.527\ad952cf5\PublicAssemblies\Microsoft.VisualStudio.TestTools.UITesting.dll。编码的 UI 测试现在处于不一致的状态。删除此包并重新启动 Visual Studio 以使用编码的 UI 测试。*

然后它将编码的 UI 测试添加到项目中，如果我尝试记录它，它会在我生成代码时给我同样的错误。

我见过类似的错误，但使用的是扩展工具，而不是 Microsoft.VisualStudio.TestTools.UITesting.dll

这是我尝试录制时遇到的错误。

*以下包无法加载：C:\Users\AppData\Local\assembly\dl3\W2RG6NJ4.G6O\TMOZA01A.527\ad952cf5\PublicAssemblies\Microsoft.VisualStudio.TestTools.UITesting.dll*

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:04:22.977

我今天遇到了同样的问题。我有一个在 Visual Studio 2010 中制作的现有应用程序。几个月前，我们将其更新到 Visual Studio 2012，现在更新 1。当我们添加一个编码的 ui 项目时，我们收到了上面的消息。解决方案中的一个项目是一个 mvc 3 项目（在 Visual Studio 2010 中制作并每次都升级）。该项目是没有成功创建编码 ui 项目的问题。我们认为它是 T4Scaffolding nuget 包。

如何修复：使用您的项目重新启动 VS 2012。卸载您的 MVC 项目。添加编码的 UI 测试项目。现在一切都必须正常工作。重新加载您的 mvc 项目。一切都应该仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T16:01:14.110

以防万一其他人为我遇到这个问题，事实证明您必须以管理员身份运行 VS 2012。当 VS 未以管理员身份加载时，我会收到此错误。当我使用“以管理员身份运行”启动 VS 时，一切正常。

# android - 使用 android 在网站上上传图像（位图）并返回 url

> ID：14830533
> 
> 赞同：2
> 
> 时间：2013-02-12T10:38:08.783
> 
> 标签：android, url, bitmap

我是将图像（位图）从我的 android 代码上传到网站并获取 url 的内容。有没有我可以使用的简单 api 或者我该怎么做？

这是拍摄照片并将其放入位图中的主要活动：

```
private static final int SELECT_PHOTO = 100;
private static final int TAKE_PHOTO = 101;
static Bitmap yourSelectedImage;
ImageView im;
Uri imageUri;

/***
 * Sets up the layout an puts onClickListener() on the buttons
 * 
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(this);
    button = (Button) findViewById(R.id.button2);
    button.setOnClickListener(this);
}
/***
 * Change intent on the buttons you click
 */
@Override
public void onClick(View v) {
    switch(v.getId()){
        case R.id.button1:
        Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
        photoPickerIntent.setType("image/*");
        startActivityForResult(photoPickerIntent, SELECT_PHOTO); 
        break;
        case R.id.button2:
        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        startActivityForResult(intent, TAKE_PHOTO);
        break;
    }
}

/***
 * Puts the image you choosed on the bitmap that you going to paint.
 */

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case SELECT_PHOTO:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            InputStream imageStream = null;
            try {
                imageStream = getContentResolver().openInputStream(selectedImage);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            yourSelectedImage = BitmapFactory.decodeStream(imageStream);

            Intent in = new Intent(this,EditPicsActivity.class);
            startActivity(in);

        }
        break;
    case TAKE_PHOTO:
        if (resultCode == Activity.RESULT_OK) {

            Bundle extras = imageReturnedIntent.getExtras();
            yourSelectedImage = (Bitmap) extras.get("data");

            Intent in = new Intent(this,EditPicsActivity.class);
            startActivity(in);
            break;
        }
    }
} 
```

}

下面是在位图上进行更改的代码：

```
public class EditPicsActivity extends Activity implements OnTouchListener {

EditView edit;
float x,y;
Paint paint = new Paint();
float radius = 10;
ArrayList<painting> whatYouEdit = new ArrayList<painting>();
Canvas canvas1;

/***
 * Sets up the surfaceview
 */

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    x=y=0;
    paint.setColor(Color.BLACK);
    edit = new EditView(this);
    edit.setOnTouchListener(this);
    setContentView(edit);
    edit.Start();
}

/***
 * Sets up the menu window
 */
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_edit_pics, menu);

    return true;
}

/***
 * Do things when you press an option in your menu window
 */
@Override
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()){
    case R.id.Brush_Blue:
        paint.setColor(Color.BLUE);
    break;
    case R.id.Brush_Green:
        paint.setColor(Color.GREEN);
    break;
    case R.id.Brush_Red:
        paint.setColor(Color.RED);
    break;
    case R.id.Brush_Black:
        paint.setColor(Color.BLACK);
    break;
    case R.id.Brush_5:
        radius = 5;
    break;
    case R.id.Brush_10:
        radius = 10;
    break;
    case R.id.Brush_15:
        radius = 15;
    break;
    case R.id.Brush_20:
        radius = 20;
    break;
    case R.id.Save:

        Canvas c = new Canvas(MainActivity.yourSelectedImage);
        for(int i = 0; i<whatYouEdit.size();i++){
            c.drawCircle(whatYouEdit.get(i).getX() , whatYouEdit.get(i).getY(), 
                    whatYouEdit.get(i).getRadius(), whatYouEdit.get(i).getPaint());
        }

        MediaStore.Images.Media.insertImage(getContentResolver(), MainActivity.yourSelectedImage,
            "new pics", "mohahhaa");

    break;
    case R.id.Clear :
        whatYouEdit.clear();
    break;

    case R.id.Send :
        //new SendPicture().execute(MainActivity.yourSelectedImage);
        Intent sendIntent = new Intent(Intent.ACTION_SEND);
        sendIntent.setType("text/html");
        sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml("http://google.se/"));
        startActivity(Intent.createChooser(sendIntent,"Share it using:"));
        break;
    }
    return false;
}

/***
 * When you touch the screen it saves the x- and y-coordinates in the painting class together with the radius
 *  and the paint color.
 */
@Override
public boolean onTouch(View v, MotionEvent event) {

    try {
        Thread.sleep(50);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    switch(event.getAction()){
    case MotionEvent.ACTION_DOWN:
        x = event.getX();
        y = event.getY();
        whatYouEdit.add(new painting(x,y,radius,paint));
        break;
    case MotionEvent.ACTION_UP:
        x = event.getX();
        y = event.getY();
        whatYouEdit.add(new painting(x,y,radius,paint));
        break;
    case MotionEvent.ACTION_MOVE:
        x = event.getX();
        y = event.getY();
        whatYouEdit.add(new painting(x,y,radius,paint));
        break;
    }

    return true;
}

/***
 * 
 * @author Andreas Angin
 *
 */

public class EditView extends SurfaceView implements Runnable{

    Thread thread = null;
    SurfaceHolder holder;

    public EditView(Context context) {
        super(context);
        holder = getHolder();
    }

    /***
     * Paints all that you've done on the screen.
     */
    @Override
    public void run() {

        while(true){
            if(!holder.getSurface().isValid())
                continue;

            Canvas canvas = holder.lockCanvas();
            MainActivity.yourSelectedImage=getResizedBitmap(MainActivity.yourSelectedImage,this.getHeight(),this.getWidth());
            canvas.drawBitmap(MainActivity.yourSelectedImage,0,0,new Paint());
            for(int i = 0; i<whatYouEdit.size();i++){
                canvas.drawCircle(whatYouEdit.get(i).getX() , whatYouEdit.get(i).getY(), 
                        whatYouEdit.get(i).getRadius(), whatYouEdit.get(i).getPaint());
            }

            holder.unlockCanvasAndPost(canvas);
        }
    }

    private Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

        int width = bm.getWidth();
        int height = bm.getHeight();

        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;

        Matrix matrix = new Matrix();
        matrix.postScale(scaleWidth, scaleHeight);

        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

        return resizedBitmap;

    }

    /***
     * starts the thread you're painting on.
     */
    public void Start() {

        thread = new Thread(this);
        thread.start();

    }
} 
```

}

在案例 R.id.Send 的 onOptionsItemSelected(MenuItem item) 方法中，我喜欢放置一个链接到只有图片的页面的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:34:57.587

如果这是针对您自己的服务器，那么只需对您服务器上的某个位置执行 httppost（您将需要一些简单的 php 来执行此操作（请参见下面的链接） - 具有已知名称（基于 UUID 或由用户）将名称本地存储在您的设备上并使用该名称上传，如果您的帖子有效，那么图像将在那里并且您将知道您将它放在哪里。

如果您不想将名称存储在本地设备上，可以将名称存储在 mysql 数据库或该目录中的文件中，只需访问数据库或文件并检索名称列表，这就是名称的图像！

在android中生成一个UUID很简单

UUID.randomUUID().toString(); （你可以只使用这个数字的一​​个子集）

上传图片的链接： [使用 Http Post 发送图片](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)

[http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)

[http://www.coderzheaven.com/2011/04/25/android-upload-an-image-to-a-server/](http://www.coderzheaven.com/2011/04/25/android-upload-an-image-to-a-server/)

[http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)

# c# - 为什么尝试/最终而不是“使用”语句有助于避免竞争条件？

> ID：14830534
> 
> 赞同：25
> 
> 时间：2013-02-12T10:38:11.903
> 
> 标签：c#, .net, entity-framework, asynchronous, race-condition

这个问题与此处另一个帖子中的评论有关：[取消实体框架查询](https://stackoverflow.com/questions/5143957/cancelling-an-entity-framework-query)

为了清楚起见，我将从那里复制代码示例：

```
 var thread = new Thread((param) =>
    {
        var currentString = param as string;

        if (currentString == null)
        {
            // TODO OMG exception
            throw new Exception();
        }

        AdventureWorks2008R2Entities entities = null;
        try // Don't use using because it can cause race condition
        {
            entities = new AdventureWorks2008R2Entities();

            ObjectQuery<Person> query = entities.People
                .Include("Password")
                .Include("PersonPhone")
                .Include("EmailAddress")
                .Include("BusinessEntity")
                .Include("BusinessEntityContact");
            // Improves performance of readonly query where
            // objects do not have to be tracked by context
            // Edit: But it doesn't work for this query because of includes
            // query.MergeOption = MergeOption.NoTracking;

            foreach (var record in query 
                .Where(p => p.LastName.StartsWith(currentString)))
            {
                // TODO fill some buffer and invoke UI update
            }
        }
        finally
        {
            if (entities != null)
            {
                entities.Dispose();
            }
        }
    });

thread.Start("P");
// Just for test
Thread.Sleep(500);
thread.Abort(); 
```

我无法理解上面所说的评论

> 不要使用 using，因为它会导致竞争条件

`entities`是一个局部变量，如果代码在另一个线程上重新输入，则不会被共享，并且在同一个线程中，在“使用”语句中分配它似乎非常安全（实际上等同于给定代码）通常的方式，而不是使用 try/finally 手动执行操作。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-12T11:34:47.553

是的，在*using*语句中可能存在竞争。C# 编译器转换

```
using (var obj = new Foo()) {
    // statements
} 
```

到：

```
var obj = new Foo();
try {
   // statements
}
finally {
   if (obj != null) obj.Dispose();
} 
```

当线程在*obj*赋值语句和 try 块之间中止时，就会发生争用。赔率极小，但不是零。发生这种情况时，该对象不会被释放。请注意他是如何通过将赋值移动到 try 块中来重写该代码的，这样就不会发生这种竞争。当比赛发生时，实际上并没有发生根本性的错误，处理对象不是必需的。

必须在使线程中止稍微更有效率和手动编写语句之间做出选择，您应该首先选择不养成*使用*Thread.Abort() 的习惯。我不建议实际这样做，*using*语句具有额外的安全措施以确保不会发生意外，即使在 using 语句中重新分配对象时，它也确保原始对象得到处理。添加 catch 子句也不太容易发生事故。*using*语句的存在是为了*减少*错误的可能性，请始终使用它。

* * *

对这个问题稍加思考，答案很流行，还有另一个常见的 C# 语句遭受完全相同的比赛。它看起来像这样：

```
lock (obj) {
    // statements
} 
```

翻译为：

```
Monitor.Enter(obj);
// <=== Eeeek!
try {
    // statements
}
finally {
    Monitor.Exit(obj);
} 
```

完全相同的场景，线程中止可以在 Enter() 调用之后和进入 try 块之前触发。这可以防止进行 Exit() 调用。这比没有进行*的*Dispose() 调用更糟糕，这几乎肯定会导致死锁。这个问题是特定于 x64 抖动的，这个[Joe Duffy 博客文章](https://web.archive.org/web/20120611083524/http://www.bluebytesoftware.com/blog/2007/01/30/MonitorEnterThreadAbortsAndOrphanedLocks.aspx)中描述了肮脏的细节。

很难可靠地修复这个问题，在 try 块内移动 Enter() 调用无法解决问题。您无法确定是否进行了 Enter 调用，因此您无法在不触发异常的情况下可靠地调用 Exit() 方法。Duffy 所说的 Monitor.ReliableEnter() 方法最终确实发生了。.NET 4 版本的 Monitor 有一个带有`ref bool lockTaken`参数的 TryEnter() 重载。现在您知道调用 Exit() 是可以的。

好吧，当你不看的时候，可怕的东西会在晚上发生碰撞。编写可安全中断的代码*很难*。永远不要认为不是您编写的代码已经处理了所有这些问题，这是明智的。测试这样的代码非常困难，因为比赛非常罕见。你永远无法确定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T10:50:10.197

很奇怪，原因`using`只是 try - finally 块的语法糖。

来自[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：

> 您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T11:50:15.007

根据您是使用`using`还是明确`try/finally`使用您将拥有的示例代码，您可以使用稍微不同的代码

```
 AdventureWorks2008R2Entities entities = null;
    try // Don't use using because it can cause race condition
    {
        entities = new AdventureWorks2008R2Entities();
        ...
    } finally {
    } 
```

用 using 语句代替它可能看起来像

```
 using(var entities = new AdventureWorks2008R2Entities()){
      ...
   } 
```

规范的第 8.13 节将扩展为

```
 AdventureWorks2008R2Entities entities = new AdventureWorks2008R2Entities();
    try
    {
        ...
    } finally {
    } 
```

因此，唯一真正的区别是分配不在 try/finally 块内，但这对可能发生的竞争条件没有影响（除了 Hans 还指出的分配和 try 块之间的线程中止）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T10:58:00.093

该注释没有任何意义，因为编译器会将 using 语句转换为 try/finally 块。由于“实体”不会在范围之外使用，因此使用 using 语句会更容易，因为这会自动处理资源。

您可以在 MSDN 上阅读更多相关信息：[**using Statement (C# Reference)**](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

# sql - 搜索一位或多位作者查询 cakephp

> ID：14830535
> 
> 赞同：0
> 
> 时间：2013-02-12T10:38:11.377
> 
> 标签：sql, cakephp, cakephp-1.2

我有一个搜索表单，我想让用户搜索一个或多个写书的作者。

我有这段代码将字符串放入数组中：

```
if (strpos($a,' ')||strpos($a,',')) {   
    $autore_diviso = explode(",", $a);              
    $dim=count($autore_diviso);
    $i=0;
    for ($i=0;$i<$dim;$i++)
    {
        $autore_diviso[$i]=trim($autore_diviso[$i]," ");    
        $autore_diviso[$i] = explode(" ", $autore_diviso[$i]);  
    }
    debug($autore_diviso);
} 
```

输出如下：

```
Array(
[0] => Array
    (
        [0] => santone
    )

[1] => Array
    (
        [0] => anfossi
    )

[2] => Array
    (
        [0] => gli
    ) ) 
```

现在，我有这个查询代码：

```
$t = $params['titolo'];
$e = $params['editore'];
$anno = $params['anno'];
$anno2 = $params['anno2'];
$conditions = array(    'editore LIKE' => "%$e%",
        'titolo LIKE' => "%$t%"
    );
if (isset($autore_diviso)) // if I have more than 1 author
{
    $dim=count($autore_diviso);
    $i=0;
    for ($i=0;$i<$dim;$i++)
    {
        $conditions['autori LIKE ?'] = array('OR' => array(
            '%' . $autore_diviso[$i][0] . '%'));
    } }
else
        $conditions[]=array('autori LIKE' => "%$a%");
if (!$anno&&!$anno2)    
    $conditions=$conditions;
else {
    if (!$anno)
        $conditions[] = array('anno <=' => "$anno2");          
    if (!$anno2)
            $conditions[] = array('anno >=' => "$anno");
        }
    if ($anno&&$anno2)
            $conditions[] = array('anno BETWEEN ? AND ?' => array($anno,$anno2));
      } 
```

我的问题是这样的：

```
if (isset($autore_diviso)) // if I have more than 1 author
{
    $dim=count($autore_diviso);
    $i=0;
    for ($i=0;$i<$dim;$i++)
    {
        $conditions['autori LIKE ?'] = array('OR' => array(
            '%' . $autore_diviso[$i][0] . '%'));
    }
} 
```

哪个输出：

```
Array (
[editore LIKE] => %%
[titolo LIKE] => %%
[autori LIKE ?] => Array
    (
        [OR] => Array
            (
                [0] => %santone%
            )

    )) 
```

哪个是我搜索的最后一位作者（例如：anf、gli、santone）。
如何使用该数组搜索一位或多位作者？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:43:11.990

我想我是这样解决的：

```
if (isset($autore_diviso)) {
$dim=count($autore_diviso);
$i=0;
while ($i<$dim)
{
    $conditions[]=array ('autori LIKE ?' => array(
        '%' . $autore_diviso[$i][0] . '%'));
    $i++;
} } 
```

# java - 文件未在 SDCARD android 上创建

> ID：14830537
> 
> 赞同：0
> 
> 时间：2013-02-12T10:38:12.877
> 
> 标签：java, android

嗨，我有以下用于写入文件的代码，它读取 a 和 b 文件并将数据放入 ab.xml 文件中

```
 String filePath1 = "/sdcard/Dictionarys/a.txt";
String filePath2 = "/sdcard/Dictionarys/b.txt";
String filePath3 = "/sdcard/Dictionarys/ab.xml";

        try {

        File file = new File(filePath3);
        file.createNewFile();

        BufferedReader br1 = new BufferedReader(new InputStreamReader(
                new FileInputStream(filePath1), UTF8), BUFFER_SIZE);

        BufferedReader br2 = new BufferedReader(new InputStreamReader(
                new FileInputStream(filePath2), UTF8), BUFFER_SIZE);
        FileOutputStream file3 = new FileOutputStream(filePath3);
        OutputStreamWriter out3 = new OutputStreamWriter(file3,UTF8);
        BufferedWriter br3 = new BufferedWriter(out3, BUFFER_SIZE);

        String sCurrentLine1, sCurrentLine2;

        while ((sCurrentLine1 = br1.readLine()) != null && ((sCurrentLine2 = br2.readLine())!=null)) {
            String s3 = sCurrentLine2.substring(sCurrentLine1.length());
            br3.write("<abcd abc=\""+sCurrentLine1+"\" def=\""+s3.trim()+"\"/> \n");
            br3.flush();
            i++;
        }
        br3.write("<data>\n");
        br3.flush();
        br3.close();
        out3.flush();
        out3.close();
        file3.close();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但 xml 文件未在 SDCARD 路径上创建..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:41:09.740

尝试以这种方式获取路径：

```
 Environment.getExternalStorageDirectory() 
```

有时字符串路径不起作用，请确保您在清单中添加了以下权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:45:23.710

首先，**您不应该**对 sdcard 的路径进行硬编码，因为它可能会因手机而异。使用类似`Context.getExternalFilesDir()`or的方法`getExternalStoragePublicDirectory(String)`。

其次，一些文件系统有**缓冲**。您应该使用该`fsync`方法来进行实际的写入。有关详细信息，请参阅[安全保存数据](http://android-developers.blogspot.fr/2010/12/saving-data-safely.html)。

# c - uint32_t 的逐字节输出

> ID：14830542
> 
> 赞同：0
> 
> 时间：2013-02-12T10:38:34.260
> 
> 标签：c, bit-shift, endianness

我试图更好地理解按位运算符。我有许多类型`uint32_t`，我试图逐字节输出。这样做的代码是：

```
void printByteWise(uint32_t num) {

  printf("byte 1 = %u\n", (num & 0xFF000000));
  printf("byte 2 = %u\n", (num & 0x00FF0000));
  printf("byte 3 = %u\n", (num & 0x0000FF00));
  printf("byte 4 = %u\n", (num & 0x000000FF));
} 
```

在上面的代码示例中说`num`是 9。那么字节数组应该像这样存储在内存中：（
`09 00 00 00`按地址升序排列）。如果是这样，输出应该是：
`byte 1 = 09`
`byte 2 = 00`
`byte 3 = 00`
`byte 4 = 00`
但我得到的输出是：

```
byte 1 = 0
byte 2 = 0
byte 3 = 0
byte 4 = 9 
```

我在一个小端系统上，它是这样获得的：

```
int is_bigEndian() {
  int i = 1;
  char *low = (char *) (&i);
  return *low ? 0 : 1;
} 
```

这种行为正确吗？为什么我会看到这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:44:11.777

Remember, both of your operands are the same endianness.

On little endian, yes, 9 will be stored as 0x09000000\. You are then masking with 0xFF000000, which will be stored in memory as 0x000000FF as will therefore be used in that pattern as the mask.

If you want to see the effect fully, do as Ali Veli says and iterate over memory byte-by-byte by using a `char` pointer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:41:09.067

使用按位运算符，您的操作数实际上是寄存器中的数字而不是内存中的数字。所以这里与字节顺序无关，这是预期的和正确的。

If you inspect the variable by casting it's address to char * or something and go over bytes by increasing the value of pointer, then you will be reading a byte from memory each time (let's say cache is transparent) and there you would see the effect of endianness.

# sql-server - 使用ampstamp将数字转换为欧洲格式的货币

> ID：14830545
> 
> 赞同：1
> 
> 时间：2013-02-12T10:38:47.027
> 
> 标签：sql-server

ValueHi 我正在尝试将一些数字转换为货币格式我使用此代码

```
CONVERT(VARCHAR(20), cast([Opportunity].SalesValue as money), 1) as 'Value' 
```

我得到这个结果 2,500,000.00 我试过

```
REPLACE(CONVERT(VARCHAR(20), cast([Opportunity].SalesValue as money), 1),',',''') as 'TCV (TEUR)' 
```

但是 ''' 是不允许的，我如何告诉 sql 这是特殊字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:45:19.623

你应该输入 ' 两次，这将告诉 SQL ' 标记应该被解释为一个符号。

```
REPLACE(CONVERT(VARCHAR(20), cast([Opportunity].SalesValue as money), 1),',','''') as 'TCV (TEUR)' 
```

您也可以使用 CHAR(39) 来实现与此相同的结果：

```
REPLACE(CONVERT(VARCHAR(20), cast([Opportunity].SalesValue as money), 1),',',CHAR(39)) as 'TCV (TEUR)' 
```

# android - 如何使用 9patch 图像制作 ImageButton？

> ID：14830546
> 
> 赞同：0
> 
> 时间：2013-02-12T10:38:47.817
> 
> 标签：android, android-layout

我想根据 ImageButton 上的文本大小使这个按钮变宽。但如果失败。这是我的 XML 代码，以及当文本太长时我在模拟器中实际看到的内容。选择器 .9patch 中的图像，当文本更像图像按钮时，如何使图像按钮变宽？谢谢。

```
 <ImageButton
                android:id="@+id/bonjour"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:scaleType="fitXY"
                android:background="@layout/main_menu_account_white_button_selector"/>

            <TextView
                android:id="@+id/bonjour_text_up"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerHorizontal="false"
                android:text=""
                android:textColor="@color/menubutton_black"
                android:textSize="@dimen/small_bottom_menubutton_title_text_size_dn"
                android:textStyle="bold|italic" />

            <TextView
                android:id="@+id/bonjour_text_dn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/bonjour_text_up"
                android:layout_centerHorizontal="false"
                android:text="ScreenName"
                android:textColor="@color/menubutton_black"
                android:textSize="@dimen/small_bottom_menubutton_title_text_size_dn"
                android:textStyle="bold|italic" />
        </RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
           android:drawable="@drawable/main_menu_account_white_button_1" /> <!-- pressed -->
     <item android:state_selected="true"
           android:drawable="@drawable/main_menu_account_white_button_1" /> <!-- pressed -->
     <item android:state_focused="true"
           android:drawable="@drawable/main_menu_account_white_button_0" /> <!-- focused -->
     <item android:drawable="@drawable/main_menu_account_white_button_0" /> <!-- default -->
 </selector> 
```

![在此处输入图像描述](../Images/39028ec0ef6904dd70d0c50c15635869.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:54:48.040

将`9patch`图像保存在`drawable`文件夹中，并使其成为布局中 ImageButton 的源/背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:33:47.523

这是帮助我解决问题的解决方法：我将 9patch 图像设置为 RelativeLayout 的背景，删除了 ImageButton。实际按钮需要以这样的方式完成：顶部和左侧 = 必须仅在左侧中间区域标记为可扩展，底部 = 内容必须标记为全部长度。

```
 <RelativeLayout
            android:id="@+id/bonjour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/main_menu_account_white_button_0"
            android:clickable="true" >

            <TextView
                android:id="@+id/bonjour_text_up"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerHorizontal="false"
                android:text=""
                android:textColor="@color/menubutton_black"
                android:textSize="@dimen/small_bottom_menubutton_title_text_size_dn"
                android:textStyle="bold|italic" />

            <TextView
                android:id="@+id/bonjour_text_dn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/bonjour_text_up"
                android:layout_centerHorizontal="false"
                android:text="ScreenName"
                android:textColor="@color/menubutton_black"
                android:textSize="@dimen/small_bottom_menubutton_title_text_size_dn"
                android:textStyle="bold|italic" />
        </RelativeLayout> 
```

# sql - 如何从具有主键和外键的表中获取公共数据

> ID：14830548
> 
> 赞同：1
> 
> 时间：2013-02-12T10:38:48.340
> 
> 标签：sql

我有两张桌子

1:pr_insertion77

```
create table pr_insertion77(pr_title varchar2(20) primarykey,pr_smalltitle varchar2(20),pr_desc varchar2(100),pr_category varchar2(20),
pr_startdate date,pr_enddate date,pr_bidtype number(2),pr_image long raw); 
```

2：卖家详情

```
create table sellerdetails( sellername varchar2(20),biddedproduct varchar2(20),price number(10),CONSTRAINT fk_pr_insertion77
    FOREIGN KEY (biddedproduct)
    REFERENCES pr_insertion77(pr_title) 
```

我想在哪里获得卖家名称和价格`pr_insertion77.pr_title=sellerdetails.biddedproduct.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:23:46.990

您可以使用 JOIN。如果 pr_insertion77 中的任何详细信息在 Sellerdetails 中有相应的详细信息，则使用 INNER JOIN

```
 SELECT sellerdetails.sellername,sellerdetails.price 
    FROM pr_insertion77 INNER JOIN sellerdetails 
ON pr_insertion77.pr_title=sellerdetails.biddedproduct; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:52:09.483

这看起来不像 java-ee，也不是休眠或类似的。它看起来像普通的 SQL。因此，最好指定以哪个 DBMS 为目标。

您的请求仅与卖家详细信息（价格和卖家名称）相关，并且您指定的条件始终为真，因为它是除空 FK 值之外的外键（除非您想过滤特定的 pr_insertion77，但这不是您所要求的）。

询问：

```
SELECT sellername, price FROM sellerdetails WHERE biddedproduct IS NOT NULL; 
```

# php - yii bootstrap (v2.0.3) 扩展无效路径别名

> ID：14830549
> 
> 赞同：2
> 
> 时间：2013-02-12T10:38:47.903
> 
> 标签：php, twitter-bootstrap, path, yii, alias

[我按照http://www.cniska.net/yii-bootstrap/setup.html](http://www.cniska.net/yii-bootstrap/setup.html)上的 Yii-Bootstrap 安装说明进行操作，但在 config/main.php 中设置的路径别名对我不起作用：

```
<?php
// path alias for bootstrap
Yii::setPathOfAlias('bootstrap',Yii::getPathOfAlias(dirname(__FILE__).'/../extensions/bootstrap'));
// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
return array(
... 
```

protected/extensions/bootstrap/... 是我的引导目录。

如果我想在我的 layouts/main.php 中使用它

```
Yii::app()->bootstrap->register(); 
```

它说“别名“bootstrap.components.Bootstrap”无效。确保它指向现有目录或文件。“

我尝试了很多东西，但无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:22:29.913

您是否尝试在配置文件上自动加载引导程序？将“引导程序”添加到您的预加载阵列。这是我的：

```
'preload'=>array('log', 'bootstrap'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T19:07:32.663

我在我的生产服务器上遇到了这个问题，即使它在本地运行良好。

解决方案是将 apache 所有权授予 yii 安装：

sudo chown www-data:www-data -R /var/www/yourapp

以前的所有权是 root 并且 apache 看不到文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T11:29:55.650

就我而言，我只是将其重命名`protected/extensions/bootstrap/components/Bootstrap.php`为`protected/extensions/bootstrap/components/bootstrap.php`

一切正常。

# c# - MsBuild：不编译引用的项目

> ID：14830553
> 
> 赞同：6
> 
> 时间：2013-02-12T10:39:10.970
> 
> 标签：c#, .net, msbuild, compilation, nant

我有以下项目结构：

```
SLN
    libA
    libB (references libA)
    exeWPF (references libA and libB) 
```

我使用 NAnt 通过 csc 编译 libA 和 libB，但我无法将 csc 用于 WPF 项目，XAML 目标无法使用 NAnt 编译，因此我在 NAnt 项目中使用了 MSBuild 任务。

问题是，当我启动一个完整的构建时，libA 和 libB 已经由 NAnt，然后在启动 MSBuild 任务时，**再次**`libA`编译和`libB`库，因为csproj 文件引用了 libA 和 libB 项目。**`exeWPF`**

 **另一种方法是引用`libA`和`libB`作为项目，我可以将它们作为`exeWPF`csproj 文件中的 dll 引用。问题是，在这种情况下，我丢失了代码并导航到参考。

我的解决方案是能够从 MSBuild 任务中指定对 MsBuild 项目的引用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T16:17:54.090

你可以像这样构建你的`exeWPF`项目

```
msbuild exeWPF.csproj /p:BuildProjectReferences=false 
```

属性 BuildProjectReferences 将阻止 MSBuild 构建引用，它将被迫使用预构建的程序集来提取引用的元数据，如果引用的程序集不存在，它将失败。**

# wordpress - 在 WordPress 和 htm 站点中使用 .htaccess 文件

> ID：14830554
> 
> 赞同：1
> 
> 时间：2013-02-12T10:39:10.473
> 
> 标签：wordpress, .htaccess

我有一个普通的 html 网站，并添加了 WordPress 安装。我有一个 .htaccess 文件

```
# BEGIN WordPress  
<IfModule mod_rewrite.c>  
RewriteEngine On  
RewriteBase /  
RewriteRule ^index\.php$ - [L]  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . /index.php [L]  
</IfModule>  
# END WordPress 
```

这一切都很好，除了我在 sitename.com/general/article/index.php 中有一个脚本，它只在没有 htaccess 文件的情况下才有效，否则它会显示 404 或“内部服务器错误服务器遇到内部错误或配置错误并且无法完成您的请求。请联系服务器管理员 webmaster@sitename.com 并告知他们错误发生的时间，以及您可能执行的任何可能导致错误的操作。有关此错误的更多信息，请访问服务器错误日志。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

我真的不知道我在做什么，所以认为这里有人可以帮助我让它工作。

# python - 如何在字典中的特定键之间交换值？

> ID：14830555
> 
> 赞同：1
> 
> 时间：2013-02-12T10:39:20.743
> 
> 标签：python, dictionary

假设你有一本这样的字典：

```
d = {
    'A': 'content_for_A',
    'B': 'content_for_B'
} 
```

在两个条目之间交换值的最有效方法是什么？所以结果应该是这样的：

```
d = {
    'A': 'content_for_B',
    'B': 'content_for_A'
} 
```

当然，您可以创建一个新字典`d2`并这样做，`d2['A'] = d['B']; d2['B'] = d['A']`但这是推荐的方式还是有一种无需创建新字典的有效方式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T10:40:19.020

```
d['A'], d['B'] = d['B'], d['A'] 
```

元组解包是 Python 中一个很好的工具，可以在不需要创建中间变量的情况下交换两个对象的值。

# google-maps - 在 bing 地图中需要 google.maps.Geocoder() 等效项

> ID：14830556
> 
> 赞同：2
> 
> 时间：2013-02-12T10:39:22.217
> 
> 标签：google-maps, extjs, bing, bing-maps

`google.maps.Geocoder()`在 bing 地图中需要等价物

我正在为 extjs 中的 bing 编写一个包装器。我已经使用 gmappanel 完成了这项工作，并且正在逐步进行转换。我需要在 bing 中的等效功能，`google.maps.Geocoder()`或者你能提供一些关于 bing 地理编码器的指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:48:51.913

你有两种不同的方式来做你想做的事。

首先，您可以使用 Bing Maps REST API，其中包含您想要执行的方法。

[这](http://msdn.microsoft.com/en-us/library/ff701715.aspx)是一个链接，解释了如何使用此 API 对查询进行地理编码。

第二种方法是使用 SearchManager 和他的地理编码或搜索方法。

请参阅以下[链接](http://msdn.microsoft.com/en-us/library/hh868062.aspx)以了解其工作原理。

希望它可以帮助你。

# css - 通过关注输入来改变跨度的风格

> ID：14830557
> 
> 赞同：-3
> 
> 时间：2013-02-12T10:39:23.290
> 
> 标签：css

我想通过关注文本输入来显示“测试”这个词。（当文本输入获得焦点文本的 z-index 更改为 0 时）但它不起作用。（使用css。）我的代码就在这里：

```
.text{
        position: absolute;
        z-index: -1;

    }
    .main{
        background: #ababab;
    }
    .input-textbox input:focus + span {
        z-index: 0;
    }
<div class="main">
    <div class="textbox">
        <input type="text" class="input-textbox">
        <span class="text">test</span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:43:49.247

选择器错误，改成如下

```
.input-textbox:focus + span {
    z-index: 0;
} 
```

这是[演示](http://jsbin.com/ayokar/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:44:21.043

试试这样的选择器......

```
input.input-textbox:focus + span {
        z-index: 0;
} 
```

# ajax - CakePHP 使用 ajax 显示更新的数据表

> ID：14830558
> 
> 赞同：0
> 
> 时间：2013-02-12T10:39:25.730
> 
> 标签：ajax, cakephp

我很难找到有关此的任何文档。

我有一个显示用户列表的页面，在此之上我可以使用 ajax 成功编辑用户。更新后，我希望下表使用新信息进行更新。

我该怎么做呢？我在想我需要某种在表格中显示数据的视图，我想获取该视图的内容并将其注入我的页面，但我似乎不知道如何？

谁能指出我正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:45:41.090

将用户表放在 div id 中，如“用户”，并在编辑 ajax 成功函数调用中执行以下操作

```
$("#users").load("same_page_url #users"); 
```

# string - 如何在perl中拆分字符串并检索最后两列

> ID：14830559
> 
> 赞同：0
> 
> 时间：2013-02-12T10:39:34.027
> 
> 标签：string, perl, replace, split

我想检索字符串的最后两列

前任

```
$path = C:\Documents and Settings\ac62599\AC62599_SBI_Release_2012.12.1_int\vob\SBI_src
$path = C:\views\ac62599\AC62599_view\vob\aims

output should be 

\vob\SBI_src
\vob\aims 
```

输出应该是这样的。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:48:38.620

用于`split`将路径拆分为目录。您可以使用切片来获取最后两个，然后使用`join`将它们连接回来：

```
for my $path ('C:\Documents and Settings\ac62599\AC62599_SBI_Release_2012.12.1_int\vob\SBI_src',
              'C:\views\ac62599\AC62599_view\vob\aims') {
    print '\\', join('\\', (split/\\/, $path)[-2, -1]), "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:22:53.607

```
$string=~m/.*(\\[^\\]*\\[^\\]*)/g;print $1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:55:12.173

正则表达式似乎是最简单的解决方案

```
my ($dir) = $path =~ /((?:\\[^\\]+){2})$/; 
```

也就是说，查找反斜杠，后跟一个或多个非反斜杠字符，并在字符串末尾查找此序列两次并捕获它。

请注意，需要在变量周围使用括号来提供正则表达式列表上下文。

示例路径的输出：

```
\vob\SBI_src
\vob\aims 
```

# java - 如何在maven构建过程中链接本地存储库

> ID：14830566
> 
> 赞同：1
> 
> 时间：2013-02-12T10:40:09.383
> 
> 标签：java, maven, jar

如何在 Maven 构建过程中指向本地存储库。在这种情况下，我想通过编译和打包将目录与自定义 jar 链接起来。

1.  尝试遵循“mvn compile -Dmaven.repo.local=E:\Test\lib”，但它不使用定位的 jar 进行编译。

2.  有没有办法以我们注入依赖项的方式通过 maven pom.xml 包含存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:44:54.990

[只需通过maven-install-plugin](http://maven.apache.org/plugins/maven-install-plugin/usage.html)将自定义 jar 安装到本地存储库（通常位于 C:..User.m2\repository 下）：

```
mvn install:install-file -Dfile=your-artifact-1.0.jar \
                         [-DpomFile=your-pom.xml] \
                         [-Dsources=src.jar] \
                         [-Djavadoc=apidocs.jar] \
                         [-DgroupId=org.some.group] \
                         [-DartifactId=your-artifact] \
                         [-Dversion=1.0] \
                         [-Dpackaging=jar] \
                         [-Dclassifier=sources] \
                         [-DgeneratePom=true] \
                         [-DcreateChecksum=true] 
```

但我建议安装一个存储库管理器（如 Archiva、Artifactory、Nexus）并在那里安装这些工件。因此，您只需进行一次手动安装工作，而不是在每台开发机器上进行。

配置多个存储库的最佳方式是通过[settings.xml](http://maven.apache.org/settings.html)文件而不是[pom.xml 文件](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:46:53.850

“本地存储库”是什么意思？

如果您的意思是本地 Nexus / Artifactory，您可以使用 settings.xml 中的 Maven 部分

[http://maven.apache.org/guides/mini/guide-mirror-settings.html](http://maven.apache.org/guides/mini/guide-mirror-settings.html)

如果您的意思是应该开箱即用的本地存储库缓存（.m2 目录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:44:51.500

正是 pom.xml 是为了维护依赖关系..你可以在[这里获得更多信息](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

# c - 在C中反转字符串时出现分段错误

> ID：14830568
> 
> 赞同：0
> 
> 时间：2013-02-12T10:40:16.510
> 
> 标签：c, string, segmentation-fault

我有以下代码，其主要目的是反转字符串的字符。因此，例如，字符串`I love cats`将被转换为`stac evol I`.

```
#include <string.h>
#include <stddef.h>
#include <stdio.h>

void reverseString(char *str)
{
   int size = strlen(str);
   char *end = str + size - 1;
   char tmp;

   while (end > str) {
     tmp = *str;
     *str = *end;
     *end = tmp;
     end--;
     str++;
   }
}

int main()
{
  char *str = "Y U SEGMENTATION FAULT?";
  reverseString(str);

} 
```

当我运行它时，我得到一个分段错误，我不明白为什么。另外，我的另一个问题是这个函数的时间复杂度（大 O）。我相信它应该是 O(n/2)，因为我没有遍历所有数组，而只是遍历了其中的一半。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:42:14.180

您正在尝试修改字符文字，即只读数据段中的字符串。使用 strdup 在堆上复制/复制它，例如：

```
char *str = strdup("It's OK now"); 
```

或者使它成为一个本地数组（将字符串放在堆栈上）：

```
char[] str = "It's OK now"; 
```

# c# - 使用 LINQ 进行 AnyCase 搜索

> ID：14830569
> 
> 赞同：2
> 
> 时间：2013-02-12T10:40:18.433
> 
> 标签：c#, linq

我有一个 LINQ 语句如下：

```
myList = MyList.Where(x => 
    x.Name.Contains(SearchValue) ||
    x.Address.Contains(SearchValue)).ToList(); 
```

我的数据库可以有`Name`“VSTS”或“vsts”等字段的大写或小写
我希望我的 LINQ 语句在任何情况下都可以执行。

在上面的 LINQ 语句中，如果我提供小写值并且数据库具有大写，则搜索失败..这是我不想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:49:08.457

最好的选择是使用不区分大小写的序数比较，但是该`Contains`方法不支持它，因此您的另一个选择是使用`string.IndexOf`.

最好将其包装在扩展方法中，例如：

```
public static bool Contains(this string target, string value, StringComparison comparison)
{
    return target.IndexOf(value, comparison) >= 0;
} 
```

所以你可以使用：

```
myList.Where(x => x.Name.Contains(SearchValue, StringComparison.OrdinalIgnoreCase) ||
                  x.Address.Contains(SearchValue, StringComparison.OrdinalIgnoreCase)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:44:06.130

使用以下内容：

```
myList = MyList.Where(x => 
    x.Name.ToUpper(CultureInfo.InvariantCulture).Contains(
        SearchValue.ToUpper(CultureInfo.InvariantCulture)) || 
    x.Address.ToUpper(CultureInfo.InvariantCulture).Contains(
        SearchValue.ToUpper(CultureInfo.InvariantCulture))).
    ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:49:27.933

如果你需要使用 Contains() 试试这个：

```
var svUP = SearchValue.ToUpper();
myList = MyList.Where(x => x.Name.ToUpper().Contains(svUP ) || x.Address.ToUpper().Contains(svUP )).ToList(); 
```

但是，如果您的字段包含完整的搜索值并且唯一的问题是大小写，那么您应该将 Equals() 与 StingComparison 一起使用：

```
myList = MyList.Where(x => x.Name.Equals(SearchValue, StringComparison.InvariantCultureIgnoreCase) || x.Address.Equals(SearchValue, StringComparison.InvariantCultureIgnoreCase)).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:47:26.080

你可以试试`ToLower()`：

```
myList = MyList.Where(x => x.Name.ToLower().Contains(SearchValue.ToLower()) 
    || x.Address.ToLower().Contains(SearchValue.ToLower())).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T10:43:23.683

尝试这个：

```
myList = MyList.Where(x => 
    x.Name.ToLower().Contains(SearchValue.ToLower()) || 
    x.Address.ToLower().Contains(SearchValue.ToLower())).ToList(); 
```

检查这是否适用于 Linq2Entity，可能是下层失败：p

# php - API 调用 dononreferencedcredit 和直接付款之间的区别

> ID：14830572
> 
> 赞同：0
> 
> 时间：2013-02-12T10:40:26.293
> 
> 标签：php, paypal

我是 PayPal 的新手，我只想问，API 调用 dononreferencedcredit 和直接付款之间的功能区别是什么？我明白了，两者都向信用卡汇款，对吗？

**编辑：**

是否可以使用 Paypal 支付标准从我的贝宝账户汇款到信用卡/借记卡或其他人的银行账户？或者是否可以使用 PRO 版本？是否存在任何 API 或其他任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:53:17.757

DoDirectPayment 从卡中取款，DoNonReferenceCredit 向卡发出信用。

在大多数情况下，您会对 DoDirectPayment 和 RefundTransaction 更感兴趣，因为 RefundTransaction API 调用将退还通过任何资金来源（无论是卡、银行、PayPal 余额等）收取的任何类型的交易。

DoNonReferencedCredit 仅适用于一组有限的用例；例如，如果您希望将资金直接支付给某人的信用卡。然而，即使这已经可以通过 MassPay API 调用来处理，MassPay 将其支付到收款人的 PayPal 余额中，并且收款人可以随意使用这些资金。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:50:29.670

对我来说，似乎是`dononreferencedcredit`向信用卡发放信用卡，而原始交易中没有提到它。请参阅[此页面](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-pro/integration-guide/WPWebsitePaymentsPro)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:23:44.753

如果您不想或没有对原始交易的引用，DoNonReferencedCredit 绝对是要走的路。默认情况下，PayPal 帐户不允许 NonReferenceCredits，您必须联系业务支持以在您的帐户上启用此选项。

如果您的帐户未启用 NonReferenceCredits，您将收到以下错误。

“无效的商户信息：10002-您无权进行此 API 调用”

# java - jsr 303（Bean Validation）是否有通用约束库？

> ID：14830576
> 
> 赞同：6
> 
> 时间：2013-02-12T10:40:45.063
> 
> 标签：java, bean-validation

JSR 303 Bean Validation 包含一些开箱即用的约束，但也允许定义自定义约束。

我有一种感觉，对于很多没有随 JSR 实现一起发布的项目，存在很多共同的约束。

*   日期范围
*   密码复杂性检查
*   等于跨字段验证（堆栈溢出[最高投票的“bean-validation”问题](https://stackoverflow.com/questions/tagged/bean-validation?sort=votes)）
*   ...

所以我的问题是：**是否有一个（值得信赖的）库包含 commons jsr 303（Bean Validation）约束？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:50:23.040

我不知道有专门的约束库，但是 JSR 303 参考实现 Hibernate Validator 提供了几个[额外的约束](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints)，例如`@Email`、`@ScriptAssert`等`@URL`（免责声明：我正在为 Hibernate Validator 做贡献）。

如果您对其他约束有其他想法或要求，请随时在我们的[JIRA 实例](http://opensource.atlassian.com/projects/hibernate/browse/HV)中创建功能请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T19:18:45.607

我得出了相同的结果，即没有这样的库。所以我决定分享我的一组常见约束及其验证器：[https ://github.com/malkusch/validation](https://github.com/malkusch/validation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-05T07:09:30.773

# Java Bean 验证扩展 (jbvext)

自 2017 年以来，有[*Java Bean 验证扩展 (jbvext)*](https://github.com/nomemory/java-bean-validation-extension)库，其中包含`@Before`,`@After`和`@Password`注释来满足 OP 的一些愿望。

⚠ 尽管这个库认为`null`值是失败的，但 Bean Validation 规范[建议](https://beanvalidation.org/1.1/spec/#example-constraintsdefinitionimplementation-validationimplementation-invaliddef)null 值是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-05T07:26:16.153

# Bean 验证 2.0

[Bean Validation 2.0](https://beanvalidation.org/2.0/)带来了几个有用的附加验证，现在是内置的。

这包括对`@Past`/ `@PastOrPresent`& `@Future`/与`@FutureOrPresent`现代*java.time*类型的支持，例如[`LocalDate`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/LocalDate.html)取代旧的`Date`//类。`Calendar``Timestamp`

您还会发现以下约束：

*   `@NotEmpty`/`@NotBlank`
*   `@Email`
*   `@Positive`// `@Negative`…</li>

# 休眠验证器

更高版本的*Bean Validation*规范只有一个可用的实现：*Hibernate Validator*。

Hibernate Validator 实现了 Bean Validation 规范要求的所有约束。Hibernate Validator 也实现了其他的。

请参阅Hibernate Validator 版本 7.0.1 中的[此列表](https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints)。它们包括对信用卡和货币、期限、条形码和书籍 ID (ISBN)、文本长度和 Luhn 校验和、URL、集合独特性、以脚本语言编写的自定义约束等的约束。

* * *

有关现代 Bean 验证的更多信息，请参阅：

*   [*Jakarata Bean 验证*规范页面](https://jakarta.ee/specifications/bean-validation/)
    *   [Jakarta Bean 验证 3.0](https://jakarta.ee/specifications/bean-validation/3.0/)
*   [*Jakarta Bean 验证*主页](https://beanvalidation.org/)
*   [JSR 380：Bean 验证 2.0](https://www.jcp.org/en/jsr/detail?id=380)
*   [JSR 349：Bean 验证 1.1](https://www.jcp.org/en/jsr/detail?id=349)
*   [JSR 303：Bean 验证](https://www.jcp.org/en/jsr/detail?id=303)(1.0)

# dependency-injection - Windows Phone 8 的 IoC/DI 库是什么？

> ID：14830577
> 
> 赞同：3
> 
> 时间：2013-02-12T10:40:48.903
> 
> 标签：dependency-injection, inversion-of-control, windows-phone-8

是否有任何适用于 Windows Phone 8 的 IoC/DI 库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:46:15.363

我正在使用 Ninject，它真的很好。看看[这里](http://www.ninject.org/)。适用于 WP7 和 WP8，重量很轻（虽然我没有与其他解决方案进行直接比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T21:25:51.460

[Unity](http://unity.codeplex.com/)可与 WP8 以及桌面很好地配合使用。但是，我认为它不适用于 WP7；传统的 WP7 支持是否应该成为问题。它是 Microsoft 模式和实践，是 OSS。不用说，它与任何其他 P&P 库都很好地集成在一起。

# django - 限制列表视图中 ForeignKey 元素的数量

> ID：14830578
> 
> 赞同：3
> 
> 时间：2013-02-12T10:40:51.267
> 
> 标签：django, api, tastypie

我有这样的资源：

模型.py

```
class Place(models.Model):
        id           = models.CharField(max_length = 256, primary_key = True)
        name         = models.CharField(max_length = 1024)
class Review(models.Model):
        id           = models.CharField(max_length = 256, primary_key = True)
        p_id         = models.ForeignKey(Place, related_name = 'place_review')
        text         = models.TextField() 
```

api.py

```
class ReviewResource(ModelResource):
    class Meta:
        queryset = Review.objects.all()
        resource_name = 'place_review'

class PlaceResource(ModelResource):
    place_review = fields.OneToManyField(ReviewResource, 
                                'place_review', 
                                full=True)
    class Meta:
        queryset = Place.objects.all()
        resource_name = 'place' 
```

使用上述模型和资源，我想将 Place 列表视图中的评论数量限制为 3，详细/显示视图我想显示更多评论（可能的不同样式，例如，如果评论包含图像，则在详细视图中显示，隐藏它在列表视图中）

我试过放`attribute=lambda bundle: Review.objects.all()[:3],`，但每当我没有任何评论的地方它会失败并`The model '' has an empty attribute ' at 0x7f0a180d0de8>' and doesn't allow a null value.`显示消息。

对于这种情况，您有什么建议，这个问题有什么解决方法吗？

# sql - SQL Server 值 <> 约束

> ID：14830581
> 
> 赞同：2
> 
> 时间：2013-02-12T10:40:57.697
> 
> 标签：sql, sql-server, constraints, sql-server-2012

我们的一个 SQL 表中有一个 uniqueidentifier 列，它被设置为主键。由于各种原因，我们不希望它由 SQL 自动生成。

我希望能够在此列上添加一个约束以禁止值 '00000000-0000-0000-0000-000000000000'

这很容易实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:45:17.470

```
alter table YourTable add constraint CHK_YourTable_GUID 
    check (guid <> '00000000-0000-0000-0000-000000000000') 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/04b5c/1/0)

# android - LinkedIn 的 Android SocialAuth 引发密钥身份验证错误

> ID：14830587
> 
> 赞同：0
> 
> 时间：2013-02-12T10:41:10.937
> 
> 标签：android

有没有人尝试过这个工具，并且可以确认它确实有效？

[code.google.com/p/socialauth-android/](http://code.google.com/p/socialauth-android/)

我正在运行他们的样品，购买它似乎不起作用。它会引发密钥的身份验证错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T13:06:35.757

我有同样的问题。当前可用版本`socialauth-android 3.2`适用`oauth1`于`Linkedin`. 我用更新的库创建了[拉取请求](https://github.com/3pillarlabs/socialauth-android/pull/26)`socialauth-android`，其中包含新版本的`socialauth`库和`oauth2`协议实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:12:06.813

我已经从 svn 下载了他们最新的代码，它适用于linkedin。

# javascript - jquery - fadeOut 回调并不总是执行

> ID：14830591
> 
> 赞同：2
> 
> 时间：2013-02-12T10:41:21.350
> 
> 标签：javascript, jquery, callback, fadeout

我的代码的一部分：

```
 anObject.fadeOut(fadeOutTime, function(){
            anObject.css('display', 'none');
            console.log("inside the callback");
            veryImportantMethod();

        }); 
```

不幸的是，回调似乎还没有执行。我什至尝试调试它并注意到有时它只是跳过回调函数的主体并跳出......为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:44:20.637

如果是这种情况，请使用`.promise().done()`：

```
anObject.fadeOut(fadeOutTime).promise().done(function(){
        anObject.css('display', 'none');
        console.log("inside the callback");
        veryImportantMethod();
    }); 
```

# c# - C# EF SaveChanges 不保存最后一个值

> ID：14830593
> 
> 赞同：2
> 
> 时间：2013-02-12T10:41:21.580
> 
> 标签：c#, entity-framework, bindinglist, savechanges

我将 bindingList 绑定到 TextBoxes。当我在文本框中输入新值并按保存按钮时，最后一个文本框的值不会保存在数据库中。但是当我在保存按钮之前按下 Tab 键时，来自 texboxes 的每个值都被保存了。如何用未保存的最后一个值解决这个问题？

……

```
BindingList<Zamo> myList;
pg = new PGEntities();
var query = (from zam in pg.Zamo where zam.ID == rekord.ID).Take(1);
myList = new BindingList<Zamo>(query.ToList());
zamoBindingSource.DataSource = myList; 
```

……

```
private void SaveButton()
{
    pg.SaveChanges();
} 
```

仅当我通过 BindingNavigation 中的按钮保存时才会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:07:11.037

当您按 Tab 键时，它会被保存吗？这可能意味着**saveButton 事件**在考虑输入文本之前正在读取文本。尝试失去对文本框的关注，然后保存。

# c# - C# BlockingCollection 班级统计

> ID：14830594
> 
> 赞同：1
> 
> 时间：2013-02-12T10:41:23.937
> 
> 标签：c#, concurrent-programming, blockingqueue

我正在使用无界阻塞集合，使用 ConcurrentQueue 作为底层集合作为我程序的主要组件之一。
我正在寻找一种收集有关阻塞集合的消费行为的统计信息的好方法，例如，白天队列中的最大项目数，或者当队列建立时阻塞集合自行调整大小。
我是否遗漏了什么，或者我需要编写一个覆盖某些方法的继承类，以便向它添加更多使用统计信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:36:02.990

你没有错过任何东西。你必须自己实现这个。继承的类可能无济于事，因为`BlockingCollection`' 的方法都不是虚拟的。

相反，您必须编写一个包装器并始终通过该包装器访问集合。或者，您可以生成一个小线程，定期轮询集合并报告其当前状态。

# javascript - 用户定义的回调函数在 Javascript/jQuery 中被多次触发

> ID：14830598
> 
> 赞同：1
> 
> 时间：2013-02-12T10:41:38.060
> 
> 标签：javascript, jquery, function, callback, user-defined

有一些类似的问题，但它们似乎都与原生 jQuery 回调函数有关。

所以我有这段代码（实时）创建一个包含一些表单元素的 div。当（之前）删除 div 时，应在回调函数中检索这些元素的值。

```
function popup(callback) {
    // ...
    // before removing the div
    callback.call();

    // remove div
} 
```

出乎意料的是，在第一次执行弹出窗口后，回调函数被多次（越来越多地）触发。

我已经简化了代码，这里是**[fiddle](http://jsfiddle.net/4se7M/1/)**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:57:18.773

我希望这是你需要的。

```
function popup(callback) {
    $("body").append('<div><span id="test">test</span> <a href="#" id="close">close</a></div>');
    $(document).on("click", "#close", function() {
        callback.call();

        //
        //callback = function() {};
        $(document).off("click", "#close");
        $("div").remove();

    });
};

$(document).on("click", "#open", function() {
    popup(function() {
        alert('$("#test").length = ' + $("#test").length);
    });
}); 
```

基本上，您需要通过调用**off()**方法来删​​除事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:07:46.997

我不知道确切的场景，但是为什么每次显示弹出窗口时都想绑定和取消绑定事件？

你只能绑定一次，像这样，不是吗？

```
$(document).on("click", "#close", function() {
    alert('$("#test").length = ' + $("#test").length);
    $("div").remove();
});

function popup() {
    $("body").append('<div><span id="test">test</span> <a href="#" id="close">close</a></div>');
};

$(document).on("click", "#open", function() {
    popup();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:57:04.827

尝试动态生成元素而不是使用字符串。这将使您更容易绑定事件。

```
function popup(callback) 
{   var $elem = $("<div></div>");
    $elem.append($("<span></span>").html("test"));
    $elem.append(" ");
    $elem.append($("<a></a>").html("close").attr("href", "#"));

    $("body").append($elem);
    $elem.find("a").click(function() {
        callback.call();  
        $elem.remove();
    });
};

$(document).on("click", "#open", function() {
    popup(function() {
        alert('$("#test").length = ' + $("#test").length);
    });
}); 
```

示例：http: [//jsfiddle.net/4se7M/2/](http://jsfiddle.net/4se7M/2/)

# php - 将 DOMDocument 转换为 DOMNode

> ID：14830599
> 
> 赞同：1
> 
> 时间：2013-02-12T10:41:45.657
> 
> 标签：php, dom

我可能遗漏了一些明显的东西，但是您如何在 PHP 中将a`DOMDocument`变成 a ？`DOMNode`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:43:58.437

A`DOMDocument`已经**是**（[参见文档](http://php.net/domdocument)）`DOMNode`：

```
 DOMDocument extends DOMNode 
```

它代表根节点以及文档本身。

# moodle - 为什么 quicktime 视频不能在 moodle 中播放

> ID：14830607
> 
> 赞同：0
> 
> 时间：2013-02-12T10:42:07.570
> 
> 标签：moodle

使用 Moodle，可以播放 .flv 文件，但不能播放快速视频泡沫和强制下载。我想直接在网站上玩。请建议我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:40:03.800

您可以使用 JW 播放器插件上传快速时间视频。甚至您可以使用 Moodle 插件站点中的媒体插件来上传视频。

# c++ - 到 system() 还是 fork()/exec()？

> ID：14830611
> 
> 赞同：16
> 
> 时间：2013-02-12T10:42:22.070
> 
> 标签：c++, c, fork

在 unix 中从 C 运行外部可执行文件似乎有两种常见的方法，

```
system() 
```

打电话和

```
pid = fork()
switch(pid)
//switch statement based on return value of pid, 
//one branch of which will include and exec() command 
```

在功能相同的情况下（父进程等待子进程完成，子进程没有返回复杂信息），是否有任何理由更喜欢 fork/exec 而不是系统？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T10:47:24.273

`system`执行命令解释器，即 shell，它 (a) 比直接 fork/exec 慢，(b) 在不同系统上的行为可能不同，(c) 如果您将来自不受信任的字符串传递给它，则存在潜在的安全隐患来源。此外，`system`等待子进程退出，而您可能希望它与父进程同时运行。

更一般地说，低级 fork/exec 为您提供了额外的控制：在两个操作之前或之间，您可能想要`chdir`打开管道、关闭文件描述符、设置共享内存等。

（通过不同的系统，我不是指 Windows 与 Unix（因为 Windows 甚至没有 fork）：我说的是 Red Hat Linux 与 Ubuntu。前者使用 Bash 执行传递给`system`的内容，后者是轻量级 POSIX 兼容外壳。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T10:47:42.750

`fork()`创建一个新进程。如果您不需要这样做，只需使用`system()`（或`popen()`）。您可能需要第二个进程来实现并行性，或者对作业进行更细粒度的控制，但如果作业是同步的，您通常不会关心这一点。

另一方面，我发现 95% 的使用`system()`是不必要的，或者以某种方式更好地使用另一种方式（例如使用 zlib 而不是`system("gzip")`）。所以也许最好的答案是两者都不使用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:47:38.230

通过`system()`另外调用一个 shell 进程，这可能不是你想要的。

此外，仅当此类 shell 死亡时才通知调用进程，而不是当 shell 运行的实际进程死亡时才通知调用进程。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T10:47:24.633

system() 将输入命令并像用户输入的那样执行它。我大多看到它喜欢`system("pause"); system("cls");`

但是如果你需要控制子进程，你要fork。

# ruby-on-rails - 将javascript变量传递给rails 3.2.7中的控制器

> ID：14830618
> 
> 赞同：0
> 
> 时间：2013-02-12T10:42:51.253
> 
> 标签：ruby-on-rails, jquery

```
<script> var depart_date='11 February 2013';
         var depart_date='21 February 2013';
</script>

    jQuery.ajax({

data: { depart: depart_date, return_date: return_date},
    type: 'post',
  url: "/payment/create",

}); 
```

这是我的ajax调用。

在终端中，它的价值为 {"depart"=>"11 February 2013", "return_date"=>"21 February 2013"}

但在控制器中 params[:depart] & params[:return] 显示为`nil`值。

可以帮助我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:44:37.903

将您的ajax更改为以下

```
jQuery.ajax({
  url: "/payment/create",                     // you to pass this as the url option
  type: 'post',
  data: 'depart=' + depart_date,
  dataType: 'script',                         // this should be dataType, not dateType
  success: function() { alert('success') }    // this should be a function
}); 
```

# c# - 将布尔值显示为是或否

> ID：14830619
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:42:54.923
> 
> 标签：c#, boolean, oledbdatareader

我正在查询数据库并将值分配给我序列化并在报告中显示的对象。

事情是布尔变量在报告中显示为真或假。如何使值显示为“是”或“否”。

这是我的课

```
public class ProductReportView
{
    public int Count { get; set; }
    public string ProductCode { get; set; }
    public string ProductTitle { get; set; }
    public string Producer { get; set; }

    public bool VideoOnDemand { get; set; }
    public bool PreviewScreen { get; set; }
    public bool QualityCheck { get; set; }
    public bool Archive { get; set; }
} 
```

这就是我分配值的方式

```
OleDbDataReader dbreader = cmd.ExecuteReader();

while (dbreader.Read())
{
     Console.WriteLine("Record " + totalCount++);
     ProductReportView rep = new ProductReportView();
     rep.Count = ++totalCount;
     rep.ProductCode = (string)dbreader["CODE"];
     rep.ProductTitle = (string)dbreader["TITLE"];
     rep.Producer = (string)dbreader["PRODUCER"];
     rep.VideoOnDemand = (bool)dbreader["VideoOnDemand"];
     rep.PreviewScreen = (bool)dbreader["PreviewLibraryChecked"];
     rep.QualityCheck = (bool)dbreader["QualityCheck"];
     rep.Archive = (bool)dbreader["Archive"];
     lst.Add(rep);
} 
```

这些值基于选中和未选中的复选框（VideoOnDemand、PreviewScreen QualityCheck、Archive）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:46:54.400

你没有说你是如何“报告”的......

这有帮助吗？

```
 Control.Text = rep.VideoOnDemand ? "Yes" : "No"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:33:48.523

在对象中存储值期间进行更改确实是个坏主意。所以在网格中的 C# 级别进行

```
Control.Text = rep.VideoOnDemand ? "Yes" : "No"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:52:41.767

您也可以在 Sql Query 中执行此操作。

例如。

选择

案例 VideoOnDemand 当 1 然后 'YES' 否则 'NO' 以 'VideoOnDemand' 结束

来自 tblxyz

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-20T14:23:26.987

我的方法具有 4 个简单的属性，可提供可重用性和清理代码：

```
public class ProductReportView
{
    public int Count { get; set; }
    public string ProductCode { get; set; }
    public string ProductTitle { get; set; }
    public string Producer { get; set; }

    public bool VideoOnDemand { get; set; }
    public bool PreviewScreen { get; set; }
    public bool QualityCheck { get; set; }
    public bool Archive { get; set; }

    private string toYesNo(bool b)
    {
        return b ? "Yes" : "No";
    }

    public string VideoOnDemandString
    {
        get { return this.toYesNo(this.VideoOnDemand); }
    }

    public string PreviewScreenString
    {
        get { return this.toYesNo(this.PreviewScreen); }
    }

    public string QualityCheckString
    {
        get { return this.toYesNo(this.QualityCheck); }
    }

    public string ArchiveString
    {
        get { return this.toYesNo(this.Archive); }
    }
} 
```

此代码可以在您的所有应用程序中重复使用，而无需重复“是”、“否”、“是”、“否”等。

最终建议：bools 应该存储在 bool 属性中，字符串应该存储在 string 属性中。

不要保留转换为字符串的布尔值：没有任何意义。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T10:46:13.200

在将值存储在对象中时使用三元运算符

```
rep.VideoOnDemand = (bool)dbreader["VideoOnDemand"] ? "Yes" : "No"; 
```

并制作`VideoOnDemand`为`string`

```
public string VideoOnDemand { get; set; } 
```

对您需要 YES/NO 的其余变量使用相同的方法

# java - 在 JSP 中将日期类型转换为字符串

> ID：14830625
> 
> 赞同：1
> 
> 时间：2013-02-12T10:43:13.213
> 
> 标签：java, javascript, jsp, jsp-tags

我正在尝试将日期类型转换为 JSP 中的字符串，但它没有发生

我必须重新填充一个存储日期类型字段的表单，并在重新编辑后提交。
表单中显示的值是日期格式，并且在编辑后提交时必须是字符串类型，控制器才能接受它。

查看代码：

```
<td>
<input class="orderInput" type="text" 
       name="bdate${i}" id="bdate${i}" value="${employee.bdate}" />
</td> 
```

控制器代码：

```
String txtdateOfBirth = request.getParameter("bdate" + i).toString(); 
```

这`employee.bdate`是日期类型，因此当提交错误时`txtdateOfBirth`是字符串。那么谁能告诉我如何`employee.bdate`在 JSP 中转换为字符串来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:07:41.120

你不能直接将日期转换为字符串。你必须使用一个类

// 创建用于格式化的 SimpleDateFormat 实例 // 日期的字符串表示（月/日/年） DateFormat df = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");

// 使用 Calendar 对象获取今天的日期。今天的日期 = Calendar.getInstance().getTime();
// 使用 DateFormat 格式方法，我们可以创建一个字符串 // 表示具有定义格式的日期。String reportDate = df.format(today);

// 打印今天是几号！System.out.println("报告日期：" + reportDate);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:49:44.323

表格中的日期格式是什么？

你可以简单地使用日期的构造函数

```
// year month and date u can substring from the string u get and parse it to Integer
Date bDate = new Date(year,month,date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:12:46.197

你可以试试这个：

```
<td>
   <c:set var="myDate">
      <fmt:formatDate pattern="dd/MMM/yy hh:mm a"   value="${employee.bdate}" />
   </c:set>

   <input class="orderInput" type="text" name="bdate${i}" id="bdate${i}" 
          value="<c:out value="${myDate}"></c:out>" />
</td> 
```

[首先使用此处的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)`myDate`使用`c:set`并使用任何有效格式在变量中设置您的日期

并使用该变量`c:out`

# java - NumberFormatException：对于输入字符串：“”

> ID：14830626
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:43:18.660
> 
> 标签：java

我的程序收到此错误。我是java新手，所以任何人都可以指导我。

```
java.lang.NumberFormatException: For input string: ""
 at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
 at java.lang.Integer.parseInt(Integer.java:470)
 at java.lang.Integer.parseInt(Integer.java:499)
 at data.connect(data.java:322)
 at data.<init>(data.java:78)
 at data.main(data.java:561) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:44:40.687

`""`不解析为整数。你期望从中得到什么？

您需要在将空白输入传递给之前捕获空白输入`Integer.parseInt()`并具有一些默认值的概念，或者可能将该输入拒绝为无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:44:56.067

您正在尝试调用不是整数`Integer.parseInt`的 a 。`String`实际输入似乎是空字符串`""`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:45:30.453

[java.lang.NumberFormatException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)

该文档指出：

> 抛出此异常以指示应用程序已尝试将字符串转换为其中一种数字类型，但该字符串没有适当的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:45:32.163

> [java.lang.NumberFormatException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)：抛出该异常表示应用程序已尝试将字符串转换为其中一种数字类型，但该字符串没有适当的格式。

由于`""`无法转换为有效`int`，因此异常。

# c++ - 如何使用 QPluginLoader 从 QByteArray 加载插件

> ID：14830630
> 
> 赞同：1
> 
> 时间：2013-02-12T10:43:32.403
> 
> 标签：c++, qt, plugins

QPluginLoader类不提供从 QByteArray 加载 Qt 插件[的](http://qt-project.org/doc/qt-5.0/qtcore/qpluginloader.html)[方法](http://qt-project.org/doc/qt-5.0/qtcore/qbytearray.html)。如何从 QByteArray 加载插件？

在我的情况下，插件通过标准输入发送到程序。这就是为什么它们不能作为文件使用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:43:32.403

您可以先将 QByteArray 保存到[QTemporaryFile](http://qt-project.org/doc/qt-5.0/qtcore/qtemporaryfile.html)，然后使用 QPluginLoader 加载它

```
void load_plugin_from_bytearray(const QByteArray &array) {
  QTemporaryFile file;
  file.setPermissions(QFile::ReadOwner | QFile::WriteOwner | QFile::ExeOwner);
  if (file.open()) {
    qint64 bytes_written = file.write(array);
    if (bytes_written != array.size()) {
      throw std::runtime_error("Writing to temporary file failed");
    }
  } else {
    throw std::runtime_error("Could not open temporary file");
  }
  QPluginLoader loader(file.fileName());
  QObject *plugin = loader.instance();
  if (plugin) {
    do_something_with_plugin(plugin);
  } else {
    throw std::runtime_error(loader.errorString().toStdString());
  }
} 
```

不幸的是，如果您有多个插件并且需要多次运行我们的函数**load_plugin_from_bytearray** ，这可能不起作用，因为 QTemporaryFile 可能会为临时文件重用相同的文件路径，而 QPluginLoader 正在缓存其加载的插件。我需要对此进行更多调查。`templateName`无论如何，您可以通过为每个 QTemporaryFile提供不同的方式使临时文件路径唯一来规避该问题

`QTemporaryFile::QTemporaryFile(const QString & templateName)`

# javascript - 在draw2dTouch中可调整大小但不可拖动

> ID：14830640
> 
> 赞同：0
> 
> 时间：2013-02-12T10:43:57.600
> 
> 标签：javascript, graphiti-js, draw2d-js

我在draw2dTouch中尝试过这样的事情：

```
this.setSelectable(true);
this.setDraggable(false);
this.setResizeable(true); 
```

但这种行为并非预期的那样。所以请检查这是否是由于新版本引起的库错误。因为我认为在以前的版本中不是那样的。

在此先感谢。请帮助我，我被困在其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T12:49:06.033

我也有这个问题。

这似乎是一个错误。我添加了这一行“this.mouseDownElement = figure;” 到 SingleSelectionPolicy.js 如下解决问题。

```
 if (figure !== canvas.getSelection().getPrimary() && figure !== null && figure.isSelectable() === true) {
        this.select(canvas,figure);

        // its a line
        if (figure instanceof draw2d.shape.basic.Line) {
            if (!(figure instanceof draw2d.Connection)) {
                canvas.draggingLineCommand = figure.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE));
                if (canvas.draggingLineCommand !== null) {
                    canvas.draggingLine = figure;
                }
            }

            //added to fix Draw2D draggable = false bug
            this.mouseDownElement = figure;
        }
        else if (canDragStart === false) {
            figure.unselect();
        }
    } 
```

# windows-phone-8-emulator - 网址在我的 Web 服务中不起作用

> ID：14830645
> 
> 赞同：0
> 
> 时间：2013-02-12T10:44:11.060
> 
> 标签：windows-phone-8-emulator

我正在调用 webservice，它接受两个参数，如 category 和 salt，然后为 json 输出提供构造的 url，但 url 不起作用。PFA 网址

服务网址：http: [//qalisting.corelogic.com/ChaseListingServices/v1.5/test](http://qalisting.corelogic.com/ChaseListingServices/v1.5/test)

构造 URL：http: [//qalisting.corelogic.com/ChaseListingServices/v1.5/listings/search/test/0/4e9c00b32794edfeba257aa0c74f500b](http://qalisting.corelogic.com/ChaseListingServices/v1.5/listings/search/test/0/4e9c00b32794edfeba257aa0c74f500b)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:50:24.517

查看您构建的 URL 上的错误消息，需要使用 a`POST`而不是`GET`Request 来调用服务。

回复您的评论：问题不是 URL，而是如何调用它。当您点击链接时，例如您发布的链接 - 浏览器将其作为 GET 请求发送。该服务期望 JSON 参数作为 POST 请求的“正文”的一部分。这必须以编程方式完成。

# git - 使用 https 克隆项目 gitlab 时出错

> ID：14830652
> 
> 赞同：7
> 
> 时间：2013-02-12T10:44:34.573
> 
> 标签：git, https, gitlab

当我尝试使用协议“Https”克隆我的 Gitlab 项目时遇到问题。使用 git 协议一切正常。

错误：

```
Cloning into 'test'...
fatal: https://XXXX.XXXX.XXXX.XXXX/user.name/test.git/info/refs?service=git-upload-pack
not found: did you run git update-server-info on the server? 
```

我尝试了很多解决方案，但错误仍然存​​在。

有人可以帮助我吗？

感谢您的帮助，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T23:29:47.690

我的问题是 Apache 配置文件。我的示例配置

```
<VirtualHost ip:80>
  ServerName git.domain.tld
  Redirect permanent / https://git.domain.tld/
</VirtualHost>

<VirtualHost ip:443>
  ServerName git.domain.tld
  DocumentRoot /home/git/gitlab/public

  <Location />
    ProxyPassReverse http://127.0.0.1:8080
    ProxyPassReverse http://git.domain.tld
  </Location>

  RewriteEngine on
  RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
  RewriteRule .* http://127.0.0.1:8080%{REQUEST_URI} [P,QSA]
  RequestHeader set X_FORWARDED_PROTO 'https'
</VirtualHost> 
```

来源：[https ://github.com/gitlabhq/gitlab-recipes/tree/master/web-server/apache](https://github.com/gitlabhq/gitlab-recipes/tree/master/web-server/apache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:28:17.117

此错误的常见来源是 URL 中的某种错误。确保你做对了。你可以通过 HTTP 克隆吗？您的服务器是否设置为通过 HTTP 和 HTTPS 为存储库提供服务？

如果您的 git 客户端（读取 的输出`git --version`），它将无法使用智能 HTTP 后端。

[GitLab 问题 #1924](https://github.com/gitlabhq/gitlabhq/issues/1924)中的一条评论建议排除服务器端的权限问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:43:36.217

当您`relative_url_root`在配置文件中更改了 gitlab 应用程序的变量的默认配置时，可能会发生此错误`.../gitlab/config/gitlab.yml`。默认值为`/`。当您将默认值更改为，例如`/gitlab`，url 将是

```
 http://your.domain/gitlab 
```

这在 UI 中正确显示为项目的克隆 URL，例如

```
 http://your.domain/gitlab/group/project.git 
```

但不知何故，在通过 http 或 https 进行实际克隆时，未检查此配置。

在 github 上的 gitlab 问题列表中已经进行了[讨论和修正。](https://github.com/gitlabhq/gitlabhq/issues/1228#issuecomment-14555439)这是[原始文件](https://github.com/atuleu/gitlabhq/blob/2e651605835e0363b506bdc5a83463c64b14abb5/lib/gitlab/backend/grack_auth.rb#L18)。

我的配置是 gitlab v5.0 和 gitlab-shell v1.1.0。

# android - 在android中提取Json数据

> ID：14830653
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:44:36.863
> 
> 标签：android, json

我想在android中提取给定的json数组，

```
 [{"Outofserviceday":{"outofservice":"2013-02-22"}},   
             {"Outofserviceday":{"outofservice":"2013-02-27"}},  
               {"Outofserviceday":{"outofservice":"2013-02-28"}}] 
```

我有提取json数据的代码，如下所示

```
 [{"Requestcard":{"id":"994","userprofile_id":"14","userprofile_name":"Syed 
               Imran","company_name":"DLF Akruti Park, Hinjewadi, Pune,  
                     Maharashtra","sex":"male","travel_date":"2013-02-12"}}] 
```

在这种情况下，我们可以使用代码检索 json 对象

```
 JSONObject menuObject = json_data.getJSONObject("Requestcard"); 
```

并通过检索每个元素

```
 requestid= menuObject.getString("id"); 
```

**但在第一种情况下，我们如何识别 json 数组中的每个 Outofserviceday ？以及如何提取每个数据？？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:55:57.370

尝试这个：

```
 JSONObject json = new JSONObject(result);
JSONArray json1= json.getJSONArray("data");
 if (json1.length()!=0) {
                for (int i = 0; i < json1.length(); i++) {

                    String name = json1.getJSONObject(i).getString("name");

 }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:50:26.073

您可以执行以下操作，可以从字符串 json 数据创建 jsonArray，然后可以在循环中提取 json 对象。

```
 String json =" [{\"Outofserviceday\":{\"outofservice\":\"2013-02-22\"}}]"; //json-data which is basically a json array

        JSONArray jArray = new JSONArray(json); / creating an jsonarray

        for (int i = 0; i < jArray.length(); i++) { 
            // you can have jsonObject from json array here in the loop
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:12:35.277

借助以下代码，您可以检索 outofservice 的值

```
JSONArray jArray = new JSONArray(your data);
for (int i = 0; i < jArray.length(); i++) {
JSONObject jOutOfServiceDay = jArray.getJSONObject(i);
JSONObject jobj = jOutOfServiceDay.getJSONObject("Outofserviceday");
Log.i("Required data is:", "" + jobj.getString("outofservice"));
} 
```

# jquery - 如何从中提取值同名标签？

> ID：14830654
> 
> 赞同：0
> 
> 时间：2013-02-12T10:44:37.303
> 
> 标签：jquery, html

我有

1）`<input type="checkbox">`具有相同名称的多个标签

2）`<input type="radio">`具有相同名称的标签

2) 是微不足道的情况，因为同名的单选按钮只能点击一个按钮。

问题是案例1）。这是我想出的：

```
$('input[type="checkbox"]').click( function() {
  var value = $(this).val();
  alert(value);
}); 
```

有了这个，`value`只存储一个项目。如果用户在同一个复选框中选中了多个项目，我该如何检索它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:53:00.350

尝试以下

```
$('input[type="checkbox"]').click( function() {
    stack = [];
    $('input[type="checkbox"]').each(function(){

        if($(this).is(':checked')){
            stack.push($(this).val())
        }
    })
    console.log(stack)
}); 
```

[演示](http://jsbin.com/anilov/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:54:07.540

使用 jquery [:checkbox](http://api.jquery.com/checkbox-selector/)选择复选框类型的所有元素。, [:checked](http://api.jquery.com/checked-selector/)选择选中的复选框。所以你可以结合它并使用循环来获取值......

尝试这个

```
$(':checkbox').click( function() {
   var val = [];
    $(':checkbox:checked').each(function(i){
      val[i] = $(this).val();
    });

   console.log(val);
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/atV4C/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:00:53.437

您可以获得这样的检查值：

**HTML：**

```
<input type="checkbox" name="checkboxes" checked="checked" title="1" value="1" />
<input type="checkbox" name="checkboxes" title="2" value="2"/>
<input type="checkbox" name="checkboxes" checked="checked" title="3" value="3"/>
<input type="checkbox" name="checkboxes" title="4" value="4"/> 
```

**脚本：**

```
var val = []
$("input[name='checkboxes']:checked").each(function(i){
      val[i] = $(this).val();
});

console.log(val); 
```

这是工作演示：http: [//jsfiddle.net/56XTZ/](http://jsfiddle.net/56XTZ/)

# css - Twitter Bootstrap Css根据父行流体修复孩子的高度

> ID：14830656
> 
> 赞同：1
> 
> 时间：2013-02-12T10:44:39.300
> 
> 标签：css, twitter-bootstrap, height, parent

有没有更好的方法将孩子的高度固定到主要父母的高度？
我试过了，但它对我不起作用：

```
.child {
    background: none repeat scroll 0 0 #5B6567;
    border-radius: 5px 0 0 0;
    display: inline-block;
    float: left;
    line-height: 30px;
    padding-top: 6px;
    position: relative !important;
    text-align: center;
    width: 12%;
    height:100%
}

<div class="row-fluid">
    <div class="child">
        child
    </div>
</div> 
```

jsfiddle [http://jsfiddle.net/WTmt6/1/](http://jsfiddle.net/WTmt6/1/) 检查我想让灰色的左边 div 固定红色一个大 .media div 的高度 ps：我不能使用固定/px 尺寸我只使用百分比/%我的布局

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:20:29.540

我仍然不确定我是否理解问题...首先，删除填充，`child`因为它会导致`height:100%`. 您应该在内部 div 中添加填充：

```
.inner {
    padding:6px;
}

<div class="child">
    <div class="inner">child</div>
</div> 
```

高度 100% 工作正常。这是一个 3 个孩子（其中两个是相等的）的例子，漂浮在一个浮动的父母中没有问题：http: [//jsfiddle.net/qRPYt/7/](http://jsfiddle.net/qRPYt/7/)

如果您仍然遇到问题，请发布`row-fluid`jsfiddle 甚至更好的 CSS。

# c++ - 哪种数据结构更适合存储和排序 结构体？

> ID：14830661
> 
> 赞同：2
> 
> 时间：2013-02-12T10:44:49.860
> 
> 标签：c++, sorting, data-structures

我有这样的结构，带有 id 及其计数：

```
product[38] = 10;
product[22] = 7;
product[39] = 18; 
```

我需要为它使用一些结构。但不确定什么应该更好（`map`, `unordered_map`, `set`, `vector`）。

我试图使用：

```
map<int, int> product; 
```

但不确定它是否是最佳选择。我唯一应该用它做的事情 - 排序。

结果我需要：

```
product[39] = 18;
product[38] = 10;
product[22] = 7; 
```

**UPD：**按值排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T10:47:42.593

A`std::map`在这种情况下很好，考虑到您将 ID 映射到计数。

备查：

![在此处输入图像描述](../Images/d578e1f7381e55407250ce5251c12666.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T10:54:57.900

您可能想要制作一个结构或[std::pair](http://en.cppreference.com/w/cpp/utility/pair)并将它们放在[std::vector中](http://en.cppreference.com/w/cpp/container/vector)

```
std::vector<std::pair<int, int>> product;

product.push_back(std::pair<int,int>(38, 27));
product.push_back(std::pair<int,int>(22, 7));
product.push_back(std::pair<int,int>(39, 18)); 
```

按值排序：

```
std::sort(product.begin(), product.end(), 
  [](const std::pair<int,int>& p1, const std::pair<int,int>& p2){ return p1.second < p2.second; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:43:03.750

如果我必须在您建议的使用范围内执行此操作（维护一个键映射以快速更新计数器，然后转储排序结果），我可能会使用无序映射和指针向量。有了这个，我假设您首先需要一些索引键解决方案的主要原因是在更新计数时使数据处理速度显着加快。

换句话说，您希望从执行此操作的代码中获得良好的减速效果：

```
++product[ id ]; // increment counter for product 'id' in our keyed-container. 
```

但仍然能够报告不是按 id 排序的输出，而是按每个 id 的累积计数排序的输出。话虽如此，以下内容虽然有点密集，但可以做到*这*一点：

```
#include <iostream>
#include <sstream>
#include <algorithm>
#include <vector>
#include <ctime>
#include <unordered_map>
#include <iterator>
#include <iomanip>
using namespace std;

int main(int argc, char *argv[])
{
    typedef std::unordered_map<int, int> Products;
    Products product;

    // fill with random data for our test.
    std::srand((unsigned)time(0));
    for (int i=1;i<20;++i)
    {
        product[i] = rand() % 50 + 1;
        cout << setw(3) << i << " ==> " << product[i] << endl;
    }
    cout << endl;

    // now setup a one-shot sort. we're using a vector of
    //  pointers to our map value type
    std::vector<const Products::value_type*> data;
    data.reserve(product.size());
    std::transform(product.begin(), product.end(), std::back_inserter(data),
                   [](const Products::value_type& obj) { return std::addressof(obj); });

    // sort the vector by value (second)
    std::stable_sort(data.begin(), data.end(),
                     [](const Products::value_type* left, const Products::value_type* right)
                     { return left->second < right->second; });

    // results are in the vector as pointers. the original map is unchanged.
    for (auto ptr : data)
        cout << setw(3) << ptr->first << " ==> " << ptr->second << endl;

    return EXIT_SUCCESS;
}; 
```

**样品运行**

```
 1 ==> 42
  2 ==> 18
  3 ==> 35
  4 ==> 1
  5 ==> 20
  6 ==> 25
  7 ==> 29
  8 ==> 9
  9 ==> 13
 10 ==> 15
 11 ==> 6
 12 ==> 46
 13 ==> 32
 14 ==> 28
 15 ==> 12
 16 ==> 42
 17 ==> 46
 18 ==> 43
 19 ==> 28
 20 ==> 37

  4 ==> 1
 11 ==> 6
  8 ==> 9
 15 ==> 12
  9 ==> 13
 10 ==> 15
  2 ==> 18
  5 ==> 20
  6 ==> 25
 14 ==> 28
 19 ==> 28
  7 ==> 29
 13 ==> 32
  3 ==> 35
 20 ==> 37
  1 ==> 42
 16 ==> 42
 18 ==> 43
 12 ==> 46
 17 ==> 46 
```

我过去使用过这种方法，因为它对于复制到临时容器中进行排序的更复杂的结构非常有效。结束指针向量引用地图中的*真实*数据是一个优点，虽然对于这个特定问题可能有点矫枉过正，但作为一般解决方案肯定会带来好处。

话虽如此，如果您想要的只是一个 int-to-int 转储，按 second-int 而不是您的 map 键排序，这同样可以解决问题，尽管它确实会从您的容器中复制数据以实现最终目标：

```
#include <iostream>
#include <sstream>
#include <algorithm>
#include <vector>
#include <ctime>
#include <unordered_map>
#include <iterator>
#include <iomanip>
using namespace std;

int main(int argc, char *argv[])
{
    typedef std::unordered_map<int, int> Products;
    Products product;

    // fill with random data for our test.
    std::srand((unsigned)time(0));
    for (int i=1;i<20;++i)
    {
        product[i] = rand() % 50 + 1;
        cout << setw(3) << i << " ==> " << product[i] << endl;
    }
    cout << endl;

    // copy the values from the map to a sort bed.
    std::vector<std::pair<int,int>> vals;
    std::copy(product.begin(), product.end(), back_inserter(vals));
    std::stable_sort(vals.begin(), vals.end(),
        [](const std::pair<int,int>& left, const std::pair<int,int>& right)
        { return left.second < right.second; });

    // dump to stdout
    for (auto val : vals)
        cout << setw(3) << val.first << " ==> " << val.second << endl;

    return EXIT_SUCCESS;
} 
```

**样本输出**

```
 1 ==> 48
  2 ==> 30
  3 ==> 25
  4 ==> 32
  5 ==> 34
  6 ==> 21
  7 ==> 26
  8 ==> 6
  9 ==> 50
 10 ==> 28
 11 ==> 50
 12 ==> 32
 13 ==> 35
 14 ==> 17
 15 ==> 33
 16 ==> 30
 17 ==> 13
 18 ==> 1
 19 ==> 50

 18 ==> 1
  8 ==> 6
 17 ==> 13
 14 ==> 17
  6 ==> 21
  3 ==> 25
  7 ==> 26
 10 ==> 28
  2 ==> 30
 16 ==> 30
  4 ==> 32
 12 ==> 32
 15 ==> 33
  5 ==> 34
 13 ==> 35
  1 ==> 48
  9 ==> 50
 11 ==> 50
 19 ==> 50 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T14:59:56.647

我通常通过以下方式进行：

创建两个 int 成员的类/结构

```
struct int_pair{
     int key;
     int value;
} 
```

然后创建一个

```
 vector<int_pair> myvector; 
```

然后创建两个布尔比较函数：

```
 bool sort_by_key(int_pair left, int_pair right){
      return left.key<right.key;
 }

 bool sort_by_value(int_pair left, int_pair right){
     return left.value<right.value;
 } 
```

然后使用 std::sort 和那些 bool 函数进行排序。

```
 std::sort (myvector.begin(), myvector.end(), sort_by_key); 
```

ps：对格式感到抱歉。从手机打字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:56:13.493

您可以简单地使用[boost.bimap](http://www.boost.org/doc/libs/1_53_0/libs/bimap/doc/html/index.html)。理解它需要一点工作，但它的价值，我认为它完全适合你的用例。

# rdf - n3 推理应用 str:contains 到 EulerSharp 中的 xsd:string

> ID：14830665
> 
> 赞同：1
> 
> 时间：2013-02-12T10:45:00.513
> 
> 标签：rdf, semantic-web, inference, n3, eulersharp

我有一个数据集，其中包含我需要与各种现有数据进行协调的大量资源。最直接的方法是在各种文字之间进行一些简单的字符串比较。

不幸的是，文字的类型是 xsd:string，而 EulerSharp 内置的 str:contains 不适用于类型文字。

我已经阅读了在 eulersharp 内置插件上可以找到的所有内容，最接近的方法是尝试使用 RIF 中的 rdf:PlainLiteral 谓词将 xsd:string 转换为 PlainLiteral；但是，这似乎不受 EulerSharp 的支持。

如何操作和比较 xsd:string 类型的文字？

或者，我应该诉诸预处理数据以剥离数据类型？

以下 .n3 文件演示了该问题：

```
@prefix : <http://local#> .

@prefix str: <http://www.w3.org/2000/10/swap/string#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

:Bob :name "Bob Smith" .
:Rob :name "Rob Smith"^^xsd:string .

{ ?P :name ?N .
  ?N str:contains "Smith" } => { ?P :bingo ?N } . 
```

以及运行上述文件的结果：

```
$ eye --swipl test.n3 --pass --nope
Id: euler.yap 5974 2013-02-12 00:29:00Z josd
SWI-Prolog 5.10.4 (amd64): Dec 27 2011, 08:54:16
starting 80 [msec cputime] 78 [msec walltime]
GET file:///home/ubuntu/src/test/test.n3 SC=4
networking 0 [msec cputime] 2 [msec walltime]
#Processed by Id: euler.yap 5974 2013-02-12 00:29:00Z josd
#eye --swipl test.n3 --pass --nope

@prefix : <http://local#>.
@prefix str: <http://www.w3.org/2000/10/swap/string#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix var: <http://localhost/var#>.
@prefix e: <http://eulersharp.sourceforge.net/2003/03swap/log-rules#>.
@prefix r: <http://www.w3.org/2000/10/swap/reason#>.
@prefix n3: <http://www.w3.org/2004/06/rei#>.

:Bob :name "Bob Smith".
:Rob :name "Rob Smith"^^xsd:string.
:Bob :bingo "Bob Smith".

TC=4 TP=8 BC=0 BP=5 PM=0 CM=0 FM=0 AM=0
reasoning 0 [msec cputime] 4 [msec walltime]

#ENDS 0 [msec] TC=4 TP=8 BC=0 BP=5 PM=0 CM=0 FM=0 AM=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:14:56.560

我在 EulerSharp 列表上询问并收到了这样的回复：

您可以通过 log:dtlit 从数据类型文字中获取文字。

额外的规则将使它起作用。

不是说 ?dt 你也可以使用 xsd:string

```
@prefix : <http://local#> .

@prefix str: <http://www.w3.org/2000/10/swap/string#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#>.

:Bob :name "Bob Smith" .
:Rob :name "Rob Smith"^^xsd:string .

{ ?P :name ?N .
  ?N str:contains "Smith" } => { ?P :bingo ?N } .

{ ?P :name ?N .
  (?lit ?dt) log:dtlit ?N.
  ?lit str:contains "Smith" } => { ?P :bingo ?N } . 
```

运行它会得到所需的结果：

```
$ eye --swipl test.n3 --pass --nope
Id: euler.yap 5974 2013-02-12 00:29:00Z josd
SWI-Prolog 5.10.4 (amd64): Dec 27 2011, 08:54:16
starting 50 [msec cputime] 62 [msec walltime]
#Processed by Id: euler.yap 5974 2013-02-12 00:29:00Z josd
#eye --swipl test.n3 --pass --nope

GET file:///home/ubuntu/src/test/test.n3 SC=4
networking 10 [msec cputime] 2 [msec walltime]
@prefix : <http://local#>.
@prefix str: <http://www.w3.org/2000/10/swap/string#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix var: <http://localhost/var#>.
@prefix e: <http://eulersharp.sourceforge.net/2003/03swap/log-rules#>.
@prefix r: <http://www.w3.org/2000/10/swap/reason#>.
@prefix n3: <http://www.w3.org/2004/06/rei#>.

:Bob :name "Bob Smith".
:Rob :name "Rob Smith"^^xsd:string.
:Bob :bingo "Bob Smith".
:Rob :bingo "Rob Smith"^^xsd:string.

#ENDS 0 [msec] TC=6 TP=12 BC=0 BP=7 PM=0 CM=0 FM=0 AM=0

TC=6 TP=12 BC=0 BP=7 PM=0 CM=0 FM=0 AM=0
reasoning 0 [msec cputime] 2 [msec walltime] 
```

# iphone - NSdictionary 不是 Null，而是显示 0 键/值

> ID：14830666
> 
> 赞同：0
> 
> 时间：2013-02-12T10:45:00.527
> 
> 标签：iphone, nsdictionary

我正在使用 json 从服务器获取数据。检查 url 是否收到命中响应，在控制台中打印从 json 获取的所有值。但是字典和尝试使用数组也都通过断点显示空值，但是当在控制台中打印时显示数据被获取。下面是代码。

```
NSString *urlStr = [NSString stringWithFormat:@"http://server39.pivbfg.com/360ads/apps/ads/%@/android/1360/ord0.9109502528132325?json=1&package_url=%@",self.mStrPid, base64String];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
                            [NSURL URLWithString:
                             [urlStr stringByAddingPercentEscapesUsingEncoding:
                              NSUTF8StringEncoding]]];
NSLog(@"req-------------%@",request);

NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

NSDictionary *json_dict = [json_string JSONValue];
NSLog(@"json_dict\n%@",json_dict);
NSLog(@"json_string\n%@",json_string);
NSMutableArray *arrAds = [[NSMutableArray alloc]init];
arrAds = [json_dict valueForKey:@"ads"]; 
```

请求正常。json_string 没问题。但是 json_dict 在控制台中打印值，但在断点处显示 null。这可能是什么原因。一件事是我正在使用ARC，它会影响这段代码吗？请指导以上。

这是错误：*** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<__NSCFString 0x9851e00> valueForUndefinedKey:]：此类与键广告的键值编码不兼容。”***首先抛出调用堆栈：（ 0xb5012 0x13a9e7e 0x13dfb1 0xe565ed 0xdc28db 0xdc288d 0x613d 0x3d1707 0x3d1772 0x320915 0x320caf 0x320e45 0x329e57 0x5942 0x2ed697 0x2edc87 0x2eee8b 0x3001f5 0x30112b 0x2f2bd8 0x2202df9 0x2202ad0 0x2abf5 0x2a962 0x5bbb6 0x5af44 0x5ae1b 0x2ee6ba 0x2f053c 0x544d 0x2b65 0x1) libc++abi.dylib: terminate called throwing an exception

编辑代码

```
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

    NSError *error;
    NSData *jsonData = [json_string dataUsingEncoding:NSUTF8StringEncoding];
    NSDictionary *results = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];

NSLog(@"results\n%@",results);
NSMutableArray *arrAds = [[NSMutableArray alloc]init];
arrAds = [results valueForKey:@"ads"];
NSLog(@"dict-------------%@",arrAds); 
```

现在数组 arrAds 也出现了同样的问题。它在控制台中打印值但为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:53:23.637

好吧，错误告诉您，您从 JSON 中检索的属性不是字典，而是字符串。看起来您`json_string`不包含有效的 JSON 对象。

在您的示例中，您还泄漏了：

```
NSMutableArray *arrAds = [[NSMutableArray alloc]init];
arrAds = [json_dict valueForKey:@"ads"]; 
```

您创建一个`NSMutableArray`新对象只是为了将新对象分配给下一行的同一变量。此外，返回的对象也不会是非可变版本。您可以将其替换为：

```
NSMutableArray *arrAds = [[json_dict objectForKey:@"ads"] mutableCopy]; 
```

# java - 在 XWPFDocument 的段落内插入换行符

> ID：14830667
> 
> 赞同：12
> 
> 时间：2013-02-12T10:44:59.563
> 
> 标签：java, apache, apache-poi, xwpf

我正在使用 apache poi 3.8 将值写入 word 模板。我用所需的值替换 word 文件（键）中的特定字符串，例如 word 文档有一个包含键 %Entry1% 的段落，我想用“Entry text line1 \nnew line”替换它。在我的实现中，所有替换的键和值都存储在 Map 中。

```
Map<String, String> replacedElementsMap; 
```

HWPFDocument 的代码是：

```
Range range = document.getRange();
for(Map.Entry<String, String> entry : replacedElementsMap.entrySet()) {
            range.replaceText(entry.getKey(), entry.getValue());
} 
```

此代码工作正常，我只需将 \n 放入输入字符串中即可换行。但是我找不到 XWPFDocument 的类似方法。我当前的 XWPFDocument 代码是：

```
List<XWPFParagraph> xwpfParagraphs = document.getParagraphs();
for(XWPFParagraph xwpfParagraph : xwpfParagraphs) {
            List<XWPFRun> xwpfRuns = xwpfParagraph.getRuns();
            for(XWPFRun xwpfRun : xwpfRuns) {
                String xwpfRunText = xwpfRun.getText(xwpfRun.getTextPosition());
                for(Map.Entry<String, String> entry : replacedElementsMap.entrySet()) {
                    if (xwpfRunText != null && xwpfRunText.contains(entry.getKey())) {
                        xwpfRunText = xwpfRunText.replaceAll(entry.getKey(), entry.getValue());
                    }
                }
                xwpfRun.setText(xwpfRunText, 0);
            }
        } 
```

现在“\n”-字符串不会导致回车，如果我使用， `xwpfRun.addCarriageReturn();`我只会在段落后得到一个换行符。我应该如何在 xwpf 中正确创建新行？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-07-29T06:19:18.047

我有另一个解决方案，它更容易：

```
 if (data.contains("\n")) {
                String[] lines = data.split("\n");
                run.setText(lines[0], 0); // set first line into XWPFRun
                for(int i=1;i<lines.length;i++){
                    // add break and insert new text
                    run.addBreak();
                    run.setText(lines[i]);
                }
            } else {
                run.setText(data, 0);
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T06:40:46.210

毕竟，我必须手动创建段落。基本上，我将替换字符串拆分为一个数组，并为每个数组元素创建一个新段落。这是代码：

```
protected void replaceElementInParagraphs(List<XWPFParagraph> xwpfParagraphs,
                                              Map<String, String> replacedMap) {
        if (!searchInParagraphs(xwpfParagraphs, replacedMap)) {
            replaceElementInParagraphs(xwpfParagraphs, replacedMap);
        }
    }

 private boolean searchInParagraphs(List<XWPFParagraph> xwpfParagraphs, Map<String, String> replacedMap) {
        for(XWPFParagraph xwpfParagraph : xwpfParagraphs) {
            List<XWPFRun> xwpfRuns = xwpfParagraph.getRuns();
            for(XWPFRun xwpfRun : xwpfRuns) {
                String xwpfRunText = xwpfRun.getText(xwpfRun.getTextPosition());
                for(Map.Entry<String, String> entry : replacedMap.entrySet()) {
                    if (xwpfRunText != null && xwpfRunText.contains(entry.getKey())) {
                        if (entry.getValue().contains("\n")) {
                            String[] paragraphs = entry.getValue().split("\n");
                            entry.setValue("");
                            createParagraphs(xwpfParagraph, paragraphs);
                            return false;
                        }
                        xwpfRunText = xwpfRunText.replaceAll(entry.getKey(), entry.getValue());
                    }
                }
                xwpfRun.setText(xwpfRunText, 0);
            }
        }
        return true;
    }

 private void createParagraphs(XWPFParagraph xwpfParagraph, String[] paragraphs) {
        if(xwpfParagraph!=null){
            for (int i = 0; i < paragraphs.length; i++) {
                XmlCursor cursor = xwpfParagraph.getCTP().newCursor();
                XWPFParagraph newParagraph = document.insertNewParagraph(cursor);
                newParagraph.setAlignment(xwpfParagraph.getAlignment());
                newParagraph.getCTP().insertNewR(0).insertNewT(0).setStringValue(paragraphs[i]);
                newParagraph.setNumID(xwpfParagraph.getNumID());
            }
            document.removeBodyElement(document.getPosOfParagraph(xwpfParagraph));
        }
    } 
```

# django - 如何在 5 分钟内使 Django 会话过期？

> ID：14830669
> 
> 赞同：63
> 
> 时间：2013-02-12T10:45:08.453
> 
> 标签：django, session

我正在使用它来登录用户：

```
def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None:
            login(request, user)
            request.session.set_expiry(300)
            return HttpResponseRedirect('/overview/')
        else:
            return HttpResponseRedirect('/login_backend/')
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request)) 
```

我希望会话在 5 分钟后过期，因此我`request.session.set_expiry(300)`在上面的视图中添加了。但是会话永远不会过期。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-12T10:55:40.507

会话过期有两个参数，[SESSION_EXPIRE_AT_BROWSER_CLOSE](https://docs.djangoproject.com/en/dev/ref/settings/#session-expire-at-browser-close)和[SESSION_COOKIE_AGE](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SESSION_COOKIE_AGE)。如果您想在 5 分钟内过期，您的设置应如下所示：

```
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
SESSION_COOKIE_AGE = 5 * 60 # 
```

要结合两者，了解如何编写自定义中间件[“有没有办法结合 SESSION_EXPIRE_AT_BROWSER_CLOSE 和 SESSION_COOKIE_AGE 的行为”](https://stackoverflow.com/questions/9267957/is-there-a-way-to-combine-behavior-of-session-expire-at-browser-close-and-sessio)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-12T11:15:12.690

**Django 1.6 更新**

由于 json 可序列化，下面的中间件代码在 Django 1.6 及更高版本中不起作用。要使其在所有版本的 Django 中工作，请放置会话序列化程序。

**设置.py**

```
#Handle session is not Json Serializable
SESSION_SERIALIZER = 'django.contrib.sessions.serializers.PickleSerializer' 
```

上面的序列化程序示例适用于 Django 1.6。请搜索其他版本。谢谢...

创建**中间件.py**

```
from datetime import datetime, timedelta
from django.conf import settings
from django.contrib import auth

class AutoLogout:
  def process_request(self, request):
    if not request.user.is_authenticated() :
      #Can't log out if not logged in
      return

    try:
      if datetime.now() - request.session['last_touch'] > timedelta( 0, settings.AUTO_LOGOUT_DELAY * 60, 0):
        auth.logout(request)
        del request.session['last_touch']
        return
    except KeyError:
      pass

    request.session['last_touch'] = datetime.now() 
```

更新您的**settings.py**：

```
MIDDLEWARE_CLASSES = [
    .........................

    'app_name.middleware.AutoLogout', 
]

# Auto logout delay in minutes
AUTO_LOGOUT_DELAY = 5 #equivalent to 5 minutes 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-05-31T15:37:56.837

**姜戈 1.9**

编辑您的**settings.py**并添加以下内容：

```
# SESSION AGE 5 Minutes
SESSION_COOKIE_AGE = 5*60 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-02-12T10:57:43.783

根据您的项目，这可能还不够。

例如，如果用户花费 6 分钟填写表单并单击“保存”会怎样？浏览器将被重定向到登录页面，表单数据将丢失。

此外，如果用户在打开的浏览器页面中带着机密数据离开他的工作站，也会存在潜在的安全问题。

另外，如果用户在 6 分钟内阅读了一个页面怎么办？然后在没有警告或任何方式延长他的会话的情况下将他注销并不是很酷......

考虑到这些问题，您可能会发现[django-session-security](http://django-session-security.rtfd.org)很有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-03-11T09:02:52.770

我使用 Django 2.1.7，让 django 会话过期的最简单方法是：

*   首先，您需要使用命令安装 django-session-timeout：

    `pip install django-session-timeout`

*   那么你需要在 settings.py 中更新你的 SessionTimeoutMiddleware

    ```
    MIDDLEWARE_CLASSES = [
         ...
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django_session_timeout.middleware.SessionTimeoutMiddleware',
         ...
    ] 
    ```

*   最后你需要`SESSION_EXPIRE_SECONDS`在settings.py的末尾添加：

    `SESSION_EXPIRE_SECONDS = 300 # 300 seconds = 5 minutes`

默认情况下，会话将在会话开始后 X 秒过期。要在最后一个活动 X 秒后使会话过期，请使用以下设置：

`SESSION_EXPIRE_AFTER_LAST_ACTIVITY = True`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-21T13:06:37.410

在调用 login() 之前设置会话时间！

```
...
request.session.set_expiry(300)
login(request, user)
... 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-11-11T22:09:43.820

这对我有用

# 设置.py

```
TIME= 240*60  //four hours  or your time
SESSION_SERIALIZER = 'django.contrib.sessions.serializers.PickleSerializer'
SESSION_EXPIRE_AT_BROWSER_CLOSE= True
SESSION_COOKIE_AGE = TIME    //change expired session
SESSION_IDLE_TIMEOUT = TIME  //logout 
```

# 中间件.py

```
from django.contrib.auth import logout
from django.contrib import messages
import datetime
from django.shortcuts import redirect

import settings

class SessionIdleTimeout:
    def process_request(self, request):
        if request.user.is_authenticated():
            current_datetime = datetime.datetime.now()
            if ('last_login' in request.session):
                last = (current_datetime - request.session['last_login']).seconds
                if last > settings.SESSION_IDLE_TIMEOUT:
                    logout(request, login.html)
            else:
                request.session['last_login'] = current_datetime
        return None 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-06-22T10:53:31.437

更新@jhonnylopez 的答案并在一段时间不活动后注销，而不是在给定时间后注销：

**设置.py**

```
# Logout after a period of inactivity
INACTIVE_TIME = 15*60  # 15 minutes - or whatever period you think appropriate
SESSION_SERIALIZER = 'django.contrib.sessions.serializers.PickleSerializer'
SESSION_EXPIRE_AT_BROWSER_CLOSE= True
SESSION_COOKIE_AGE = INACTIVE_TIME   # change expired session
SESSION_IDLE_TIMEOUT = INACTIVE_TIME  # logout 
```

**中间件.py**

```
from django.contrib.auth import logout
import datetime

from settings import SESSION_IDLE_TIMEOUT

class SessionIdleTimeout(object):
    """Middle ware to ensure user gets logged out after defined period if inactvity."""
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        if request.user.is_authenticated:
            current_datetime = datetime.datetime.now()
            if 'last_active_time' in request.session:
                idle_period = (current_datetime - request.session['last_active_time']).seconds
                if idle_period > SESSION_IDLE_TIMEOUT:
                    logout(request, 'login.html')
            request.session['last_active_time'] = current_datetime

        response = self.get_response(request)
        return response 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-30T00:32:39.627

如果您正在寻找 5 分钟后的简单到期并且不关心提示用户或允许他们延长会话，django-session-timeout 效果很好。

```
pip install django-session-timeout 
```

```
SESSION_EXPIRE_SECONDS = 300  # 5 min
SESSION_EXPIRE_AFTER_LAST_ACTIVITY = True
SESSION_TIMEOUT_REDIRECT = '/accounts/logout/'  # redirect to whatever page 
```

虽然这是 5 分钟后会话到期的快速修复，并重定向到指定页面（注销），但它无助于解决本文中关于警告用户或提供延长会话机会的其他一些问题。将最后一个活动设置设置为 True，它将继续根据活动延长会话，但是如果他们正在阅读页面或填写需要超过 5 分钟的表格，它将注销它们，可能会给您的用户取决于您的网站功能。

此处的更多文档：[https ://pypi.org/project/django-session-timeout/](https://pypi.org/project/django-session-timeout/)

我还没有实现它，但计划下一步。如果您需要添加提示用户并允许他们选择扩展会话的功能，其他一些帖子推荐了 django-session-security。

如果这不是您想要的路线，这些是不添加自己的中间件的好选择。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-04T09:41:02.897

正如 Dmitry Nikitin 所指出的，在调用 login() 之前需要设置会话。您还需要`SESSION_SAVE_EVERY_REQUEST = True`在设置文件中添加。此设置将随着每个请求不断更新到期时间。因此，在 5 分钟不活动后，会话将过期。

# html - 通过 :active 触发时，IE10 是否识别同级组合器？

> ID：14830672
> 
> 赞同：0
> 
> 时间：2013-02-12T10:45:16.723
> 
> 标签：html, css, internet-explorer, internet-explorer-10

当链接为 :active 时，我想将 CSS 应用于兄弟 div

```
.navigation-menu:active ~ .container-menu,
    left: 0;
} 
```

我知道 IE9 及以下不支持这个，但 IE10 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:53:44.880

不，它在 IE10 中不起作用。我用以下小提琴进行了测试：http: [//jsfiddle.net/uYsXP/](http://jsfiddle.net/uYsXP/)

HTML：

```
<div>
    <a href="#" class="navigation-menu">Click me</a>
    <div class="container-menu">Bacon!</div>
</div> 
```

CSS：

```
.navigation-menu:active ~ .container-menu {
    color: green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:58:50.487

要将通用同级选择器与伪类一起使用，您会遇到一些错误，但这可以修复。参考这篇文章：

[http://css-tricks.com/webkit-sibling-bug/](http://css-tricks.com/webkit-sibling-bug/)

```
body { -webkit-animation: bugfix infinite 1s; }
@-webkit-keyframes bugfix { from { padding: 0; } to { padding: 0; } } 
```

这应该适用于 IE8+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T12:19:59.980

子项的 :active 状态不会从父项向下传播（至少在 IE 10 中）

在这个 SO 答案上发布了一个 JS 解决方法：[Make a whole div clickable with working :active css rule in IE10](https://stackoverflow.com/questions/10827534/make-a-whole-div-clickable-with-working-active-css-rule-in-ie10/10885417#10885417)

* * *

值得注意的是，*IE 开发团队已*将此问题归类为`won't fix`

> 将活动状态传播到祖先元素会显着降低网页的响应能力，因为大量元素可能会受到状态变化的影响。因此，这会使最终用户感觉交互控制迟缓，尤其是在很容易察觉微小延迟的触摸交互中。

**来源：** [https ://connect.microsoft.com/IE/feedback/details/757765/ie10-active-psuedo-class-should-be-triggered-by-child-elements-too](https://connect.microsoft.com/IE/feedback/details/757765/ie10-active-psuedo-class-should-be-triggered-by-child-elements-too)

# compass-sass - CSS3 Pie 不适用于 SASS/指南针

> ID：14830682
> 
> 赞同：1
> 
> 时间：2013-02-12T10:45:33.403
> 
> 标签：compass-sass, sass, css3pie, pie-chart

我无法让 CSS3Pie 正常工作。我已经阅读了关于 SO 和 Google 的几篇文章，但似乎仍然无法正常工作。

我正在使用 SASS 和指南针来编写我的 CSS，所以我将在下面发布 SCSS 和 CSS 输出。

SCSS：

```
$pie-behavior: url(PIE.htc);
$pie-base-class: pie-element;

#header{
background:#fff;
width:$full-width;
height:100px;
margin:$margin-center;

ul{
    width:600px;
    height:$nav-height - 2px;
    padding:55px 0 0;
    margin:0 0 0 250px;
    li{
        @include inline-block;  
        font-size:$font-size - 2px;
        font-weight:bold;
        padding:20px 10px;
    }

    a{
        color:#282828;
        text-transform:uppercase;

        &:hover{
            color:red;
        }   
    }
}

    #aabw{
        background:url('../images/aabw.jpg') no-repeat;
        height:190px;
        width:110px;
        position:relative;
        z-index: 0;
        float:right;
        margin: 0 270px 0 0;
        @include pie-element(relative);
        @include box-shadow(#BBBBBB 0px -78px 6px);
    }
} 
```

输出的CSS：

```
#header #aabw {
    background: url("../images/aabw.jpg") no-repeat;
    height: 190px;
    width: 110px;
    position: relative;
    z-index: 0;
    float: right;
    margin: 0 270px 0 0;
    behavior: url(PIE.htc);
    position: relative;
    -webkit-box-shadow: #bbbbbb 0px -78px 6px;
    -moz-box-shadow: #bbbbbb 0px -78px 6px;
    box-shadow: #bbbbbb 0px -78px 6px;
} 
```

我的 PIE.htc 位于房间目录（与我的索引相同的文件夹）中，我正在尝试在本地运行它。我已经关注了 pie.scss 文件，但似乎没有任何效果，这可能是我遗漏了一些非常明显的东西，所以希望有人能够发现我遗漏的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T02:55:59.567

不确定，但尝试将 PIE 调用放在 box-shadow 调用之后。

# php - 在php中转换会话变量

> ID：14830684
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:45:35.867
> 
> 标签：php, class, session-variables

为什么我不能这样做

```
$obj = new User();
$obj->emailid = $data->emailid;
$obj->password = $data->password;
$_SESSION["userinfo"] = $obj; 
```

当我尝试访问此对象时，出现以下错误。

```
$obj = $_SESSION["userinfo"];
echo $object->emailid; 
```

请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:50:17.623

应该是这样的

```
$obj = $_SESSION["userinfo"];
echo $obj->emailid; 
```

# class - 在 maven 程序集之前替换类文件

> ID：14830687
> 
> 赞同：7
> 
> 时间：2013-02-12T10:45:43.183
> 
> 标签：class, maven, jar, resources, package

我面临一个非常独特的情况，需要一些建议：我正在开发一个项目，该项目依赖于我同一家公司的另一个项目，现在我需要对依赖项进行一些修改。我遇到的问题是依赖项的源代码已经丢失，所以我唯一拥有的是存储库中的 Maven 依赖项，以及相应的 jar 文件。最重要的是，Jar 文件中的一些类是使用 JiBX 解析器创建的，映射了一些我没有的 XSD 文件，并且生成的类是合成的，我发现没有反编译器能够正确处理它们。

所有这一切的唯一好处是我需要更改的类可以正确反编译，所以去了以下内容：

*   我反编译了整个 jar 文件，最后得到了一些带有空或错误实现的方法的类（JiBx 类）。
*   我注释掉了错误方法的主体以获得存根对象，将所需的更改应用于正确的类并重新编译。
*   我拿了旧的 Jar 文件，打开它并手动将旧类替换为新类。

由此产生的罐子按预期工作。

现在我的问题是：我可以使用 Maven 完成所有这些工作吗？

这个想法是将 JiBX 类文件作为资源，并将存根等效项作为源文件，然后让 maven：

*   像往常一样编译所有东西，将所有编译好的类文件放入目标文件夹
*   从目标文件夹中删除存根类文件并用旧的预编译类文件替换它们
*   包装罐子。

您会推荐哪种方法？

**更新**

我提供了有关依赖项目结构的更多详细信息：

所有类都在同一个包中：

```
my.project.domain.JiBX__c_GeneratedObfuscatedClass1.java
my.project.domain.JiBX__c_GeneratedObfuscatedClass2.java
my.project.domain.JiBX__c_GeneratedObfuscatedClass3.java
my.project.domain.CustomizableClass1.java
my.project.domain.CustomizableClass2.java
my.project.domain.CustomizableClass3.java 
```

JiBX 类没有作为依赖项正确导入，如果我尝试将任何 CustmizableClasses 放入项目源中并让 JiBX 类成为依赖项，编译器会报告缺少方法。

我也尝试按照建议使用 Shade 插件，但是由于我需要将 JiBX 类包含到我的源路径中，我最终不得不将来自 jar 依赖项和编译的 CustomizableClasses 的包 JiBX 类包含到包中，但是从 jar dep 中跳过 CustomizableClasses 并编译JiBX 类。

我看起来它可以工作，但我承认我仍然没有找到这样做的方法。任何线索都将受到欢迎。

**更新 2（解决方案）**

我在这里解释了我最终是如何按照建议使用阴影插件管理这个的，以防万一其他人需要做同样的事情：

我终于在同一个包中创建了一个带有反编译类的项目，并将不想被反编译的方法注释掉。

在 pom.xml 我添加了以下内容：

```
<build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>shade</goal>
                </goals>
                <configuration>
                    <artifactSet>
                        <includes>
                            <include>${project.groupId}:${project.artifactId}</include>
                            <include>TheDamnedProject:WithoutSources</include>
                        </includes>
                    </artifactSet>
                    <filters>
                        <filter>
                            <artifact>TheDamnedProject:WithoutSources</artifact>
                            <includes>
                                <!-- These classes will be taken directly from dependency JAR -->
                                <include>my/package/ClassWhichCouldNotBeDecompiled1.class</include>
                                <include>my/package/ClassWhichCouldNotBeDecompiled2.class</include>
                                <include>my/package/ClassWhichCouldNotBeDecompiled3.class</include>
                                <include>my/package/ClassWhichCouldNotBeDecompiled4.class</include>
                            </includes>
                        </filter>
                        <filter>
                            <artifact>${project.groupId}:${project.artifactId}</artifact>
                            <excludes>
                                <!-- These classes will be overridden by the ones inside the JAR -->
                                <exclude>my/package/ClassWhichCouldNotBeDecompiled1.class</exclude>
                                <exclude>my/package/ClassWhichCouldNotBeDecompiled2.class</exclude>
                                <exclude>my/package/ClassWhichCouldNotBeDecompiled3.class</exclude>
                                <exclude>my/package/ClassWhichCouldNotBeDecompiled4.class</exclude>
                            </excludes>
                        </filter>
                    </filters>
                </configuration>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

谢谢！

卡尔斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:06:50.350

我会这样做：

*   为这个Jar文件新建一个Maven项目，打包类型为*jar*
*   包含原始 Jar 文件作为依赖项
*   在src文件夹中添加一个反编译的.java文件

这应该使您可以编译 .java 文件，因为 jar 文件中的其他类可用。

您现在有两个 Jar 文件：一个是原始文件，另一个应该只包含一个重新编译和更改的类。

将两者都添加到您的应用程序类路径可能会起作用，但取决于类路径上的顺序。

如果你想最终得到一个 jar 文件，我建议你看一下*Maven Shade 插件*（[http://maven.apache.org/plugins/maven-shade-plugin/](http://maven.apache.org/plugins/maven-shade-plugin/)），它可以让你创建一个包含来自多个来源的内容的新 Jar 文件。它将允许您过滤进入新 Jar 文件的内容。

Maven Shade 插件允许您指定包含每个工件的哪些类。它为此使用通配符和包含/排除标签，如下所述：[http ://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)

创建该 Jar 文件后，我将使用 Maven Release 插件发布它，然后将该工件包含在下游。这将允许您仅在真正需要时更新已修补的 Jar，它可能不必在每个构建中。但这取决于您的使用模式。

对于新 Jar 文件的版本号，我建议使用原始版本的变体。使用相同的`groupId`and `artifactId`，然后修改版本号。如果原始文件有`1.0.2`，则您的新修补文件应发布为`1.0.2-1`，以表明它是基于`1.0.2`源的。如果您需要进行其他更改，请发布该更改，`1.0.2-2`依此类推。这将使您更容易理解您的补丁所基于的版本，并且递增的补丁编号将为您提供一种区分版本的方法。

# matrix - 将梯形中的点位置转换为矩形位置

> ID：14830698
> 
> 赞同：2
> 
> 时间：2013-02-12T10:46:27.430
> 
> 标签：matrix, computer-vision, transformation, homography

我试图找出如何将下面绿色梯形内的坐标 Pxy 转换为真实地平面上的等效坐标。

我有房间的确切尺寸，这意味着我可以准确地说出 A、B、C 和 D 在下面显示的那个房间里有多长。我也知道 A、B、C 和 D 在那个绿色三角形中的长度（坐标）。

我已经在阅读有关单应性和矩阵变换的内容，但无法真正理解它。任何将我引导到正确方向的输入将不胜感激。

谢谢！

![在此处输入图像描述](../Images/7f25fe3ba5d9f3db0e8b481ce0d0dbdd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:49:45.050

有代码使用库 Opencv 计算仿射变换矩阵（它显示了如何将梯形转换为矩形以及如何找到变换矩阵以进行进一步计算）：

```
//example from book
//   Learning OpenCV: Computer Vision with the OpenCV Library
//     by Gary Bradski and Adrian Kaehler
//     Published by O'Reilly Media, October 3, 2008

#include <cv.h>
#include <highgui.h>
#include <stdlib.h>
#include <stdio.h>

int main(int argc, char* argv[])
{
    IplImage *src=0, *dst=0;

    // absolute or relative path to image should be in argv[1]
    char* filename = argc == 2 ? argv[1] : "Image0.jpg";
    // get the picture
    src = cvLoadImage(filename,1);

    printf("[i] image: %s\n", filename);
    assert( src != 0 );

    // points (corners of )
    CvPoint2D32f srcQuad[4], dstQuad[4];
    // transformation matrix
    CvMat* warp_matrix = cvCreateMat(3,3,CV_32FC1);

    // clone image
    dst = cvCloneImage(src);

    // define all the points
    //here the coordinates of corners of your trapezoid 
    srcQuad[0].x = ??;   //src Top left
    srcQuad[0].y = ??;
    srcQuad[1].x = ??;   //src Top right
    srcQuad[1].y = ??;
    srcQuad[2].x = ??;   //src Bottom left
    srcQuad[2].y = ??;
    srcQuad[3].x = ??;   //src Bot right
    srcQuad[3].y = ??;
    //- - - - - - - - - - - - - -//
    //coordinates of rectangle in src image 
    dstQuad[0].x = 0;       //dst Top left
    dstQuad[0].y = 0;
    dstQuad[1].x = src->width-1;  //dst Top right
    dstQuad[1].y = 0;
    dstQuad[2].x = 0;     //dst Bottom left
    dstQuad[2].y = src->height-1;      
    dstQuad[3].x = src->width-1;  //dst Bot right
    dstQuad[3].y = src->height-1;

    // get transformation matrix that you can use to calculate 
    //coordinates of point Pxy  
    cvGetPerspectiveTransform(srcQuad,dstQuad,warp_matrix);
    // perspective transformation
    cvWarpPerspective(src,dst,warp_matrix);

    cvNamedWindow( "cvWarpPerspective", 1 );
    cvShowImage( "cvWarpPerspective", dst );

    cvWaitKey(0);

    cvReleaseMat(&warp_matrix);

    cvReleaseImage(&src);
    cvReleaseImage(&dst);

    cvDestroyAllWindows();
    return 0; 
```

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:32:12.060

* * *

如果我正确理解您的问题，您正在寻找表示相机相对于世界的位置和方向（也称为“姿势”）的变换矩阵。如果你有这个矩阵 - 让我们称之为**M** - 你可以将相机坐标系中的任何点映射到世界坐标系，反之亦然。在您的情况下，您需要将矩形转换到世界坐标中的平面 (0, 1, 0)^T + 0 上。

有几种方法可以导出这个姿势矩阵。首先，您需要知道另一个矩阵 - **K** - 它描述了将相机坐标系中的位置转换为实际像素位置的内部相机参数。这涉及标准针孔投影以及径向变形和其他一些事情。

要确定**K**和**M**，您必须校准相机。这通常通过采用已知棋盘区域的位置的校准模式（例如棋盘模式）来完成。然后，您可以在图案上的已知位置和观察到的像素位置之间建立所谓**的点对应关系。**一旦你有足够的这些点对，你就可以解决一个矩阵**H = KM**。这是您已经提到的单应矩阵。一旦你有了它，你就可以重建**K**和**M**。

理论就这么多。对于实际部分，我建议查看 OpenCV 文档（例如，您可以从这里开始：[OpenCV 相机校准](http://docs.opencv.org/trunk/doc/tutorials/calib3d/camera_calibration_square_chess/camera_calibration_square_chess.html)和这里：[OpenCV 姿势估计](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html)）。

我希望这将为您指明正确的方向；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:51:16.330

只是为了完成。我最终查看了@mmgp 建议的线程并实现了一个与 Christopher R. Wren 提出的解决方案等效的解决方案：

[透视变换估计](https://www.researchgate.net/profile/Christopher_R_Wren/publication/215439543_Perspective_Transform_Estimation/links/56df558708ae9b93f79a948e.pdf?inViewer=0&pdfJsDownload=0&origin=publication_detail)

事实证明，这对我的情况非常有效，尽管相机有些失真。

# javascript - 如何使用javascript获取特定时区的时间，但与当前系统时间无关？

> ID：14830699
> 
> 赞同：1
> 
> 时间：2013-02-12T10:46:27.767
> 
> 标签：javascript, date, time, timezone

现在，在将其标记为重复之前，请注意，可能重复中的所有有用答案都提供了与当前系统时间相关的功能，我无法接受。

我想要的是，例如纽约的当前时间对于所有用户来说都是一致的，无论他们的时间设置是什么。

例如，我这里有两台计算机，其中一台落后另一台 3 秒，这留下了不可接受的差距，因为我的任务涉及精确度（有点夸张，但你知道我的意思）。

我该如何克服呢？我必须获得服务器时间并以某种方式转换它吗？如果是这样，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:53:30.153

希望不会错，但 javascript 是在用户机器上加载的，而不是在服务器上，所以你总是会使用 javascript 获取访问者日期/时间。您可以使用 php 获取日期/时间，因为它已加载到服务器上并将日期传递给 javascript。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:01:05.810

您需要使用时区库在 JavaScript 中执行此操作。[在这里查看我的答案](https://stackoverflow.com/a/15171030/634824)。

这些脚本很小，但由于它们需要时区数据库，因此对于客户端应用程序来说可能会变得笨拙。你可能最好做转换服务器端。也许[pytz](http://pytz.sourceforge.net/)库对你有用。

# c++ - 为什么 C++ 没有捕捉到这个异常？

> ID：14830702
> 
> 赞同：0
> 
> 时间：2013-02-12T10:46:37.527
> 
> 标签：c++, exception

我有以下代码用于从缓冲区数组中提取字符串。它工作正常。但是，*长度*变量是在运行时确定的，因此如果超出范围，就会发生异常。当然，可以轻松调整代码以检查*长度*变量（相对于*偏移*变量）是否在边界内。虽然我很好奇为什么以下代码不起作用，因为异常似乎通过 try-catch 语句（并被调试器捕获）。

```
try
{
    string value(&buffer[offset], length);
    // ...
}
catch (exception& e)
{
    // ...
}
catch (...)
{
    // ...
} 
```

在 Windows 7 64 位上运行，MSVCR 编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:49:26.847

`buffer`越界访问数组是未定义的行为。在这种情况下，不需要抛出 C++ 异常。尝试在 try 块之外实例化字符串，您将确定是否引发了异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:54:25.590

我认为“异常”一词让您感到困惑。当我们谈论`catch`可以捕获的异常时，我们并不是指一般计算机科学意义上的“异常”。我们特别指的是`throw`操作引发的 C++ 异常。

你没有抛出异常的代码，你为什么希望捕获一个？如果你想在这种情况下抛出异常，你必须编写代码来做到这一点。

有时我看到程序员希望能够捕捉到，例如，除以零。虽然这是一般计算机科学意义上的异常，但它不是 C++ 异常，除非您有一些代码在除以零时创建 C++ 异常并抛出它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:59:13.010

您的程序可能会导致`fault`由于访问系统知道对您的进程无效的内存位置，例如取消引用 NULL 指针（总是错误）或超出堆中变量的边界（并不总是错误，取决于在页面边界上）。这些`faults`是由 CPU 检测到的，并且是一种不同于 C++ 中可以使用 try/catch 捕获的异常的机制，它们是语言的一部分，由编译器和语言运行时库实现。

在您的情况下，由于您使用的是 MSVC，因此您可以访问允许您同时捕获 __try 和 __except 工具的语言扩展，您可以[在此处阅读有关 MSVC try-except 语句](http://msdn.microsoft.com/en-us/library/s58ftw19%28v=vs.80%29.aspx)的更多信息。

# google-apps-script - 可以从其他平台调用 Apps Script 函数吗？

> ID：14830707
> 
> 赞同：0
> 
> 时间：2013-02-12T10:46:55.637
> 
> 标签：google-apps-script

我在 Google 的应用程序脚本中编写了一些函数；都返回文本字符串并且需要一个参数

是否可以从完全不同的平台调用这些函数？

具体来说，当我在 IRC 网络上设置的脚本被触发时，我想调用函数（参数）。

我希望有一些方法可以通过 HTTP 将代码部署为应用程序来做到这一点，但我不确定从哪里开始，或者是否有可能

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:17:08.993

[在此处](https://developers.google.com/apps-script/content_service)查看 ContentService 示例。

# where-clause - 准备语句 WHERE 子句打开详细信息页面

> ID：14830709
> 
> 赞同：0
> 
> 时间：2013-02-12T10:47:01.027
> 
> 标签：where-clause

在主页中，我希望通过以下链接打开详细信息页面：

```
<td><a href=details.php?c_id=<?php echo $c_id ?> ><img src="./images/<?php echo $row['cfilename']; ?>" width="90" height="120" alt="" /></a></td> 
```

和 details.php 代码：

```
<?php
$mysqli = new mysqli("localhost", "joseph", " ", "collectionsdb");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

// get value of object id that was sent from address bar
//$c_id = mysql_real_escape_string(c_id);

    /* Create the prepared statement */
    if ($stmt = $mysqli->prepare("SELECT c_id,ctitle,csubject,creference,cyear,cobjecttype,cmaterial,ctechnic,cwidth,cheight,cperiod,cmarkings,cdescription,csource,cartist,cfilename FROM collections WHERE c_id=$c_id")) {    
    /* Execute the prepared Statement */
    $stmt->execute();

    /* Bind results to variables */
    $stmt->bind_result($c_id,$ctitle,$csubject,$creference,$cyear,$cobjecttype,$cmaterial,$ctechnic,$cwidth,$cheight,$cperiod,$cmarkings,$cdescription,$csource,$cartist,$cfilename);

    /* fetch values */
    while ($rows = $stmt->fetch()) {
     // display records in a table

    // and the table of results  
?> 
```

但是，当我按下链接时， details.php 会打开所有数据。我希望只打开特定 $c_id 变量的数据。我不确定为什么它没有被传递到详细信息页面。在我放置 WHERE 条件的方式中，我收到 c_id 的未定义变量错误。

请问，我错过了什么？

约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:03:31.557

**第一的**

`$mysqli = new mysqli("localhost", "joseph", " ", "collectionsdb");`

您正在将空间传递给 db 密码。应该

`$mysqli = new mysqli("localhost", "joseph", "", "collectionsdb");`

**第二**

php.ini 中的 global_register 指令是否启用？

如果启用，您指定为查询字符串的变量将作为 $c_id 传递。您可以通过在此页面中写入 php_info() 来检查 register_globals 是否启用。[看这里](http://mrphp.com.au/blog/how-enable-register-globals-php-5)

如果未启用，则需要将查询字符串变量值分配给变量或直接将变量传递给数据库。

风格一：

```
$c_id = $_GET['c_id'];
$stmt = $mysqli->prepare("SELECT c_id,ctitle,csubject,creference,cyear,cobjecttype,cmaterial,ctechnic,cwidth,cheight,cperiod,cmarkings,cdescription,csource,cartist,cfilename FROM collections WHERE c_id=$c_id" 
```

风格二：

```
$stmt = $mysqli->prepare("SELECT c_id,ctitle,csubject,creference,cyear,cobjecttype,cmaterial,ctechnic,cwidth,cheight,cperiod,cmarkings,cdescription,csource,cartist,cfilename FROM collections WHERE c_id=$_GET['c_id']" 
```

从样式 1 和 2 的查询字符串中清理您的值.. 可破解。:)

让 register_global 指令启用是不好的。建议，从查询字符串中获取值，对其进行清理并传递给查询。

# php - 通过PHP使用URL重定向Jquerymobile页面？

> ID：14830714
> 
> 赞同：0
> 
> 时间：2013-02-12T10:47:14.227
> 
> 标签：php, jquery-mobile

在这里，我在使用 PHP 表单重定向 URL 时遇到问题，提交页面正在更改但 URL 没有更改......

这是代码：

```
<form method="post" action="insert.php">
 <input type="text" id="emp" name="emp" />
 <input type="submit" value="submit" />
</form> 

<?php
 $name =$_POST['name'];
 if($name != '')
{
  header("Location :sample.php");
}
else
{
  header("Location :index.php");
}
?> 
```

但它正在重定向并且 url 没有改变它正在显示就像`http:localhost/sample/addForm.php#/sample/insert.php`我实际上想要它一样`http:localhost/sample/sample.php`或`http:localhost/sample/index.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:52:03.453

尝试，

```
if($name != '')
{
  header("Location: /sample/sample.php");
}
else
{
  header("Location: /sample/index.php");
} 
```

# c - 多个 == 在 if 循环 C

> ID：14830716
> 
> 赞同：-3
> 
> 时间：2013-02-12T10:47:24.563
> 
> 标签：c, operator-precedence

上周我进行了一次面试，面试官问我这个运算符优先级问题。请有人帮助我理解这个程序的逻辑。我正在使用 Ubuntu(linux)

```
int main()
{
    int var = 90;
    if(var  += var == ++var ==8)
        printf("val of var is %d \n",var);
} 
```

这个程序的输出是 91。

如何评估循环中的多个 ==（关联性从左到右）？？？

有趣的是，如果我将代码调整为

```
int main()
{
    int var = 90;
    if(var  += var == ++var)
        printf("val of var is %d \n",var);
} 
```

然后输出为 92。

这种行为是依赖于编译器的吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:50:56.840

正确的答案是这是未定义的行为，因为具有副作用的表达式之间缺少[*序列点。*](http://en.wikipedia.org/wiki/Sequence_point)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T11:46:27.530

让我们一步一步来

1.  ++变量

2.  91 == 91 (+=var == ++var)

3.  1 == 8 (+=var == 8)

4.  变量 = 91 + 0

# c# - 拖放被执行但它没有被执行 - webdriver

> ID：14830719
> 
> 赞同：2
> 
> 时间：2013-02-12T10:47:25.980
> 
> 标签：c#, selenium, webdriver, selenium-webdriver

我已经尝试了这两个代码，它被执行了，但是动作没有被执行，谁能告诉我为什么？

```
//Type one approach
Actions action = new Actions(Browser.Driver);
IWebElement sourceElement = Browser.Driver.FindElement(By.XPath(Filexpath));
IWebElement targetElement = Browser.Driver.FindElement(By.XPath(NewXpath));

//Type two approach 
Actions Sourcebuilder = new Actions(Browser.Driver);
Actions SourceAction = Sourcebuilder.ClickAndHold(sourceElement);
Sourcebuilder.Build();
SourceAction.Perform();

/// move and drop
Actions builder = new Actions(Browser.Driver);
Actions action = builder.MoveToElement(targetElement);
builder.Release(targetElement);
builder.Build();
action.Perform(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:08:35.157

**试试这个代码：**

```
 Actions ac = new Actions(driver);
 ac.dragAndDrop(source element, target element);
 ac.build().perform(); 
```

它将单击并按住源元素的位置，移动到目标元素的位置，然后释放鼠标。

或者

```
 Actions ac = new Actions(driver);
 ac.dragAndDropBy(source element, xOffset, yOffset);
 ac.build().perform(); 
```

它将单击并按住源元素的位置，移动给定的偏移量，然后释放鼠标。

或者

```
 Actions ac = new Actions(driver);
    ac.clickAndHold(onElement);
    ac.moveToElement(toElement); or ac.moveToElement(toElement, xOffset, yOffset);
    ac.build().perform(); 
```

它将执行上述两个代码的操作。

我在 Java 上编写了这段代码。您可以转换为您指定的语言。

从[动作中引用。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html)

# cucumber - 如何在黄瓜中使用 watir-webdriver 测试 404 错误？

> ID：14830721
> 
> 赞同：3
> 
> 时间：2013-02-12T10:47:30.370
> 
> 标签：cucumber, http-status-code-404, watir-webdriver

如何测试黄瓜中的 404 错误（找不到页面）？例如，我有一个包含 100 张图片的页面，我想测试是否所有图片都可见。我想检查一张或多张图片是否有 404 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:42:07.317

你可以这样做：

```
require 'watir-webdriver'
b = Watir::Browser.new
b.goto "apod.nasa.gov/"
b.execute_script("return (typeof arguments[0].naturalWidth!=\"undefined\" && arguments[0].naturalWidth>0)", b.image(name: 'imagename1')) 
```

有关更多信息，请参阅[此博客文章](http://watirmelon.com/2012/11/27/checking-an-image-is-actually-visible-using-webdriver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:19:53.753

如果您获取图像 url（使用 watir、[nokigiri](http://nokogiri.org/)或[mechanize](http://mechanize.rubyforge.org/)），您可以使用[open-uri](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)发出请求，然后检查响应代码。

```
require 'watir-webdriver'
require "open-uri" 

b = Watir::Browser.new
b.goto "http://www.iana.org/domains/special"

urls = b.images.collect(&:src)               # harvest image srcs
urls << "http://www.foo.com/foo.gif"         # example of a 500 error

urls.each do |url|
  begin
    open(url) do |f|
      puts "#{f.base_uri} - #{f.status}"
    end
  rescue => e
    puts "#{url} - #{e}"
  end
end 
```

# python - paramiko 安装“无法导入 ImportError”

> ID：14830722
> 
> 赞同：0
> 
> 时间：2013-02-12T10:47:35.470
> 
> 标签：python, ubuntu, import, paramiko

我在我的 Ubuntu 盒子“sudo apt-get install python-paramkio”中安装了 paramiko。但是当导入 paramiko 模块时出现错误。

ImportError：没有名为 paramiko 的模块

当我使用帮助（'modules'）列出python模块时。我找不到列出的 paramiko。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:21:53.537

要使用 python 库，你必须有 python 的开发版本`python2.6-dev`，可以使用`sudo apt-get install python2.6-dev`.

然后，您可以安装您希望在代码中运行的任何其他开发库。无论您使用什么安装，`sudo apt-get install python-paramkio`或`python setup.py install`之后您都可以使用。

# visual-studio-2012 - 我需要在 VS2012 中使用 /GS 编译器开关吗？

> ID：14830725
> 
> 赞同：0
> 
> 时间：2013-02-12T10:47:41.790
> 
> 标签：visual-studio-2012, lnk2019, compiler-options

将我们的软件从 VS2005 迁移到 VS2012 后，出现以下错误

```
error LNK2019: unresolved external symbol ___report_rangecheckfailure referenced in function _main 
```

这是由使用 /GS 选项引起的。在 VS2012 中有一个扩展的安全开关 /sdl。我不再需要 /GS 了吗？如果不是，我怎样才能在不放弃安全性的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:31:05.593

哦，原因是额外的库，是从 vs2005 迁移过来的。项目现在使用这两个选项进行编译。

# ember.js - Ember 计算属性使用 JS apply()

> ID：14830729
> 
> 赞同：2
> 
> 时间：2013-02-12T10:47:51.830
> 
> 标签：ember.js

如果可能的话，我想让下面的代码工作。目标是通过使用 Javascript 的“应用”方法获得一个依赖于字符串列表的计算属性。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

```
App.View = Em.View.extend
  myProps: ['content.prop1', 'content.prop2']
  myComputed : (->
    return "super valuable things"
  ).property.apply(@get("myCompted"), @get("myProps")) 
```

到目前为止......没有运气。它似乎拒绝了我做这项工作的最热切愿望。

任何帮助将不胜感激！史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:59:45.507

您不需要使用该`apply`功能，我不确定您为什么认为您需要这样做。属性函数只需要它所依赖的属性的参数。在这种情况下，它是`'myProps'`。您也不需要`get`该属性，Ember 将为您完成所有工作。

看看这个[jsfiddle](http://jsfiddle.net/Deif/nv7y5/13/)，你就会明白我的意思。您可以对`myComputed`属性内的数组进行所有操作，并且该数组已经可供您使用。

```
App.ApplicationView = Em.View.extend({
    myProps: ['123', '456'],
    myComputed : function () {
        return this.get('myProps');
    }.property('myProps')
}); 
```

# css - HTML/CSS Div 超出其结束标记

> ID：14830730
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:47:57.057
> 
> 标签：css, html, styling

在我正在创建的网页上，该页面是由基于 PHP 的 CMS 动态生成的。CMS 从数据库中获取页面的所有信息，然后将正确的 HTML 标记等回显到页面上。

我遇到的问题是，由于某种原因，我的浏览器将 div 扩展到它的结束标记之外。

IE：即使我可以看到标签关闭，浏览器似乎也没有，因此其中应用的任何样式`div`都将应用于整个页面。

下面是 HTML 输出。（这是页面的摘录，标题 div 是持久的）。

```
<div id="header">
 <table>
  <tr>
   <td style="width: 10%;">
    <img style="height: 120px; width: 101px;" src="img" alt="some alt">
   </td>
   <td>
    <h2>Heading</h2>
    <h3>Subhead</h3>
   </td>
  </tr>
 <table>
</div>
<div id="menubar"> 
```

我还包括了下一个的开幕`div`。

`h2`如果我尝试设置和`h3`内部的样式`div`，页面上的所有`h2`和`h3`标记都会受到影响。这是我的CSS：

```
#header h2 {
    font-size: 24pt;
    font-weight: 900;
    color: #776F65;
    letter-spacing: 0;
    line-height: 0;
}

#header h3 {
    font-weight: 900;
    color: #776F65;
    letter-spacing: 0;
    padding-left: 35px;
} 
```

最后，这是我用来生成 HTML 输出的 PHP 代码：

```
echo('<div id="header">'); // HEADER ELEMENT BEGINS HERE
    while($row = mysql_fetch_array($getHeaderElements)) {
        echo($row['content']);
    }
echo('</div>'); // End Header Element. 
```

我使用的浏览器是谷歌浏览器。

有谁知道为什么会发生这种奇怪的行为？

问候，本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:51:18.330

的“结束”标签`<table>`实际上是另一个表的开始标签。

此错误可能是您的问题的原因。

[验证](http://validator.w3.org)您的标记，这是发现此类错误的一种廉价方法。

# javascript - 如何在覆盖的div下获取元素的鼠标悬停事件

> ID：14830735
> 
> 赞同：6
> 
> 时间：2013-02-12T10:48:10.370
> 
> 标签：javascript, jquery, html, css

我有四个 div 元素，在鼠标悬停时，选定的 div 将被放大。但是我需要获取其余三个底层 div 的 mouseover 事件，即使另一个被覆盖，这样我就可以使较早的一个不缩放并且当前悬停的一个缩放。

请考虑我的小提琴：http: [//jsfiddle.net/aniprasanth/7jFGH/1/](http://jsfiddle.net/aniprasanth/7jFGH/1/)

HTML代码是这样的

```
<div id="main_window">
                <div class="multi-window">
                    <div class="zoomer tile">
                        <img src="images/img1.jpg" width="207" height="138" />
                    </div>
                 </div>
              <div class="multi-window">
                    <div class="zoomer tile">
                        <img src="images/img2.jpg" width="207" height="138" />
                    </div>
                 </div>
             <div class="multi-window">
                    <div class="zoomer tile">
                        <img src="images/img3.jpg" width="207" height="138" />
                    </div>
                 </div>
              <div class="multi-window">
                    <div class="zoomer tile">
                        <img src="images/img4.jpg" width="207" height="138" />
                    </div>
                 </div>
            </div> 
```

CSS 是这样的：

```
#main_right #main_window {
height: 320px;
width: 460px;
margin-right: auto;
margin-left: auto;
margin-top: 20px;
position: relative;

}
.multi-window {
height: 150px;
width: 218px;
float: left;
margin-right: 11px;
margin-bottom: 10px;
cursor: pointer;
}
.zoomer {
height: 140px;
width: 208px;
cursor:pointer;
}
.zoom {
height: 301px;
width: 450px;
float:none;
margin:0px;
cursor:pointer;
position:absolute;
left:0;
top:0;
background-color:#FFF;
}
.multi-window img {
width:100% !important;
height:100% !important;
} 
```

最后是脚本：

```
$('.zoomer').on('mouseenter',function(e){
        $(this).addClass('zoom').removeClass('zoomer');
        $('.zoom img').css({
            'width':'100%',
            'height':'100%'
            });

            $(this).bind('mouseleave click', function(){

                $(this).removeClass('zoom').addClass('zoomer');
                $('.zoomer').removeClass('zoomer'); 

                });
        }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-13T07:46:05.807

将此 CSS 属性用于覆盖 Div。

`pointer-events: none`

这将禁用该 div 上的所有点击事件，并将所有点击事件传递到其下方的图层。

# java - 使用服务器进行音频聊天

> ID：14830736
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:48:10.663
> 
> 标签：java, multithreading, client-server

我正在开发一个语音聊天应用程序 **Flow 是 Sender -Server-Many clients**

他们将是所有人之间的双向通信我已经准备好发送者和接收者的样本并且工作正常。

但问题是我想要

**一个人将主持会议** ，可以通过其他参与者的麦克风访问，

另一个问题是他们一次只能打开一个麦克风这可能吗？请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:15:07.747

你的问题很笼统，这就是为什么它被否决了。有无数种方法可以做你想做的事，但我认为最简单的方法是使用 Jetty。Jetty 是一个 Java 框架，它使您能够将服务封装在独立的服务器中，而无需实际管理服务器的所有麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:07:57.853

首先，您的问题有点笼统，您没有提到特定问题。其次，要完成这项任务，您需要使用网络套接字、I/O 音频流和 Mohammad Faisal 提到的线程。

声音处理：http://docs.oracle.com/javase/tutorial/sound/TOC.html[网络](http://docs.oracle.com/javase/tutorial/sound/TOC.html) ：[http](http://docs.oracle.com/javase/tutorial/networking/TOC.html) ://docs.oracle.com/javase/tutorial/networking/TOC.html 线程：[http://docs .oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/) Java IO：[http ://docs.oracle.com/javase/tutorial/essential/io/](http://docs.oracle.com/javase/tutorial/essential/io/)

也检查这个答案。

[如何在 Java 中播放声音？](https://stackoverflow.com/questions/26305/how-can-i-play-sound-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:53:37.650

使用单独`Thread`的 on`server`从**第一台计算机**接收音频文件并将文件发送到**另一台计算机**

# linux - Where is TIOCMGET supposed to be implemented?

> ID：14830739
> 
> 赞同：1
> 
> 时间：2013-02-12T10:48:21.070
> 
> 标签：linux, mono, ioctl

This is really just to satisfy my curiosity after [this](https://stackoverflow.com/questions/14652370/why-does-serialport-open-fail) question. Although I'm now using an alternative solution, the original problem appears to come down to the fact that TIOCMGET is not implemented, and I'd like to know a bit about why that is.

Sadly, I haven't found much useful information just by googling, and I'm finding the tty_ioctl man page (the first result) pretty impenetrable.

So, what exactly is TIOCMGET, where is it implemented, and where might mono be looking for it and failing to find it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:59:09.557

It's implemented in `drivers/tty/tty_io.c` which has the following implementation:

```
/**
 *      tty_tiocmget            -       get modem status
 *      @tty: tty device
 *      @file: user file pointer
 *      @p: pointer to result
 *
 *      Obtain the modem status bits from the tty driver if the feature
 *      is supported. Return -EINVAL if it is not available.
 *
 *      Locking: none (up to the driver)
 */

static int tty_tiocmget(struct tty_struct *tty, int __user *p)
{
        int retval = -EINVAL;

        if (tty->ops->tiocmget) {
                retval = tty->ops->tiocmget(tty);

                if (retval >= 0)
                        retval = put_user(retval, p);
        }
        return retval;
} 
```

As you will note from the comment, and the code, it only works if the underlying terminal driver supports it and will otherwise return `EINVAL`.

There are a number of drivers which do support it, such as `isdn4linux` and various GSM modem drivers, but ordinary terminals won't do as they are not modems.

# javascript - 更改日期格式在数据库中输入错误的日期

> ID：14830746
> 
> 赞同：1
> 
> 时间：2013-02-12T10:48:43.427
> 
> 标签：javascript, jquery, asp.net-mvc, html-helper

我正在开发一个 MVC 应用程序，我在其中使用 datepicker(jquery) 添加日期和编辑日期。

想要用户的日期格式为 dd/mm/yyyy 但是当我像这样设置日期格式时；在数据库中，它类似于 01/01/0001。在调试时，我发现 Null 值正在传递给控制器​​。

我在模型类中的代码：

`[Display(Name = "Deadline")] [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)] public DateTime Deadline { get; set; }`

在视图中：

`<script type="text/javascript"> $(function () { $("#Deadline").datepicker ({ dateFormat: "dd/mm/yy" }); }); </script>`

`<%: Html.EditorFor(model => model.Deadline) %>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:33:09.043

**尝试将此添加到您的 web.config 文件中，并使用国家/地区全球化值...**

```
<system.web>
    <globalization culture="en-GB" uiCulture="en-GB" />
  </system.web> 
```

**还有这个在视图方面......**

```
$("#Deadline").datepicker({
                showOn: "both",
                dateFormat: 'dd/mm/yy',
                changeMonth: true,
            }); 
```

**我以前遇到过类似的问题，但在数据库方面我使用字符串作为数据类型来存储..** 让我知道它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:39:02.020

我得到了解决问题的方法

在网络配置中：

```
<system.web>
    <globalization culture="en-GB" uiCulture="en-GB" />
  </system.web> 
```

在模型类中：

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
public DateTime Deadline { get; set; } 
```

在视图中：

```
 $(function () {
            $("#Deadline").datepicker
            ({
                dateFormat: "dd/mm/yy"
            });
        }); 
```

# grails - 如何在 grails 战争构建中包含 simple-json

> ID：14830748
> 
> 赞同：1
> 
> 时间：2013-02-12T10:48:45.093
> 
> 标签：grails, grails-plugin

我的 buildConfig 中有以下内容：

```
compile ":json-rest-api:1.0.11" 
```

当我通过 Eclipse STS 查看我的类路径下的依赖项时，我可以看到*simple-json-1.1.jar*包含在内。

当我为部署构建战争时，我发现它不包括这个 jar。我在部署中需要它来测试推送通知。我目前收到当前错误，因为缺少该类：

```
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85) org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.NoClassDefFoundError: org/json/simple/parser/ParseException
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:97)
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at groovy.lang.Closure.call(Closure.java:412)
2013-02-11 08:55:46,390 ERROR [STDERR] (Thread-85)      at groovy.lang.Closure.call(Closure.java:406)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at groovy.lang.Closure.run(Closure.java:490)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at java.lang.Thread.run(Thread.java:619)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85) Caused by: java.lang.NoClassDefFoundError: org/json/simple/parser/ParseException
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at java.lang.Class.forName0(Native Method)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at java.lang.Class.forName(Class.java:169)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at com.mysite.notification.AndroidNotificationService.class$(AndroidNotificationService.groovy)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at com.mysite.notification.AndroidNotificationService.$get$$class$com$google$android$gcm$server$Sender(AndroidNotificationService.groovy)
2013-02-11 08:55:46,391 ERROR [STDERR] (Thread-85)      at com.mysite.notification.AndroidNotificationService.sendMessage(AndroidNotificationService.groovy:22)
2013-02-11 08:55:46,393 ERROR [STDERR] (Thread-85)      at com.mysite.notification.AndroidNotificationService$$FastClassByCGLIB$$5e8e3148.invoke(<generated>) 
```

我需要在某处明确设置吗？它甚至是 json-rest-api 插件的依赖项吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:16:32.990

因此，在按照 Ian 的建议使用 grails dependency-report 之后，我发现它来自[com.googlecode.json-simple](http://code.google.com/p/json-simple/)

我将以下内容添加到我的 buildConfig.groovy 中，并在构建时正确拉入：

```
dependencies {      
        compile 'org.json-simple:json-simple:1.1.1'
} 
```

# android - 如何用图像重载类（Android）

> ID：14830749
> 
> 赞同：0
> 
> 时间：2013-02-12T10:48:44.767
> 
> 标签：android, android-emulator, overloading

我是 android 应用程序开发的新手，现在我遇到了重载类的问题。

我想重载整数、字符串、图像和布尔值。我知道如何重载 int 和 String 但如何重载 Image img？

```
 public class Test(int n, String[] TestString, Image img <---- how to do it ?, boolean inTest)
    {

    } 
```

# php - 树枝模板如何将工作表扩展或附加到现有列表的末尾

> ID：14830750
> 
> 赞同：1
> 
> 时间：2013-02-12T10:48:45.007
> 
> 标签：php, templates, symfony, twig, template-engine

我正在寻找在树枝中扩展样式表列表。我已经尽可能地精简了代码来说明我试图实现的目标。

**base.html.twig**

```
<!DOCTYPE html>
<html>
  <head>
    <title>Some title</title>

    {% block stylesheets %}
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    <link href="css/custom-theme/jquery-ui-1.10.0.custom.css" rel="stylesheet" media="screen">
    {% endblock %}

  </head>

  <body>
    {% block content %}
        .. content for body goes here etc
    {% endblock content %}

  </body>

<!-- rest of template --!> 
```

然后我重用基本模板，但我不想重新列出所有样式表，我只想在列表末尾添加一个？

**使用 base 的模板**

```
{% extends 'sjQueryBundle::base.html.twig' %}

{% block stylesheets %}
<link href="css/sales-journal.css" rel="stylesheet" media="screen">
{% endblock %}

{% block content %}
  some template stuff here
{% endblock content %} 
```

上面的问题是它完全替换了样式表块我只是想将 sales-journal.css 添加到最后？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T10:51:41.793

您只需要调用[`parent()`](http://twig.sensiolabs.org/doc/functions/parent.html)方法，该方法将呈现父块的内容

```
{% block stylesheets %}
    {{ parent() }}
    <link href="css/sales-journal.css" rel="stylesheet" media="screen">
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:09:58.577

作为@thecatontheflat 的补充，我建议您使用 Assetic 进行资产管理。看看：[http ://symfony.com/doc/current/cookbook/assetic/asset_management.html](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)

使用 Assetic，您可以使用过滤器（例如 SASS 或 LESS），将多个文件合并为一个，缩小代码......等等！

例如，要使用 Assetic，您只需要以这种方式更改您的代码：

```
{% block stylesheets %}
    {% stylesheets 'css/bootstrap.min.css' 'css/bootstrap-responsive.min.css' 
                   'css/custom-theme/jquery-ui-1.10.0.custom.css' 
                   output='css/styles.css' %}
    <link rel="stylesheet" href="{{asset_url}}" />
{% endblock %} 
```

# c++ - c ++ Boost序列化，编译派生类时出错

> ID：14830755
> 
> 赞同：1
> 
> 时间：2013-02-12T10:49:05.190
> 
> 标签：c++, serialization, boost

编译这段代码时出现一个非常奇怪的错误：

```
#ifndef packetint_h
#define packetint_h
#include "../packet.h"

class packetInt: public packet{
public:
    packetInt(int pLength);
    ~packetInt();
    double distance(packet* destPacket);
    friend class boost::serialization::access;
    template<typename Archive>  void save(Archive& ar, const unsigned version) {

        ar << boost::serialization::base_object<const packet>( *this);
        for(int i = 0; i<getLength(); i++)
            ar << ((int*)data)[i];
    }
    template<typename Archive>  void load(Archive& ar, const unsigned version) {
        std::cout<<"test"<<std::endl;
        ar >> boost::serialization::base_object<packet>(* this);
        data = new int[getLength()];
        for(int i = 0; i<getLength(); i++)
            ar >> ((int*)data)[i];
    }
    BOOST_SERIALIZATION_SPLIT_MEMBER()
};

class packetIntGenome: public packetGenome{
public:
    packetIntGenome(int pLength);
    ~packetIntGenome();
};
#endif 
```

编译时

```
C:\Users\griever\Progetti\Daana\trunk\dependencies\boost\boost/serialization/access.hpp(93): error C2662: 'void packetInt::save<Archive>(Archive &,const unsigned int)': impossibile convertire il puntatore 'this' da 'const packetInt' a 'packetInt &'
1>          with
1>          [
1>              Archive=boost::archive::text_oarchive
1>          ]
1>          La conversione comporta la perdita dei qualificatori 
```

我不知道为什么，但删除

```
 BOOST_SERIALIZATION_SPLIT_MEMBER() 
```

修复编译错误（但代码不起作用）

对不起我的英语不好，我是意大利人：D

编辑：

爬得更深我发现了问题，顺便说一句仍然没有解决方案

```
BOOST_SERIALIZATION_SPLIT_MEMBER() 
template<typename Archive>                                          
    void serialize(Archive &ar,const unsigned int file_version){                                                              
        boost::serialization::split_member(ar, *this, file_version); <--- this is not working
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:37:11.387

根据评论。要解决此问题，您必须将`save`方法声明为常量。

```
template<typename Archive> void save(Archive& ar, const unsigned version) const {
  // ...
} 
```

因此，在方法内部使用的所有方法也`save`应该是常量。

# android - 如何使用 Robotium 测试切换到另一个应用程序并返回？

> ID：14830760
> 
> 赞同：1
> 
> 时间：2013-02-12T10:49:26.763
> 
> 标签：android, android-activity, robotium, activity-lifecycle

我需要测试流程`onPause()`-> `onStop()`-> `onRestart()`-> `onStart()`with `Robotium`. 最好的方法是什么？我应该使用`Instrumentation`并调用它的方法，因为我一一列出，还是`Robotium`库提供了一些功能？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:05:04.453

不幸的是，你将不得不按照你的想法去做。使用仪器方法。

它实际上是我从来没有花时间在一个测试中做的事情，因为当我觉得需要测试这类东西时，我通常会单独测试每个步骤。

# java - 获取对特定列 ID 的行引用数

> ID：14830768
> 
> 赞同：0
> 
> 时间：2013-02-12T10:49:33.623
> 
> 标签：java, sql, oracle

我想获取对 Oracle DB 中设置的表的特定列（比如说 ID）的行引用数，我的代码是

```
String selectTableRowsSQL4 = "SELECT row "
+ "FROM contract_type_info"
+ "WHERE ID = ?";              
preparedStatementSelect = dbConnection.prepareStatement(selectTableRowsSQL4);
preparedStatementSelect.setInt(1, 5);
preparedStatementSelect.getResultSet().getRow();
System.out.println("Row: " + preparedStatementSelect.getResultSet().getRow()); 
```

当我运行上面的代码时，我的结果为零 (0)！

事实上，我试图找出 ID=5 在哪一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:54:08.877

您是否正在[执行](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#execute%28java.lang.String%29)准备好的语句？

> execute 方法执行一条 SQL 语句并指示第一个结果的形式。然后，您必须使用方法 getResultSet 或 getUpdateCount 检索结果，并使用 getMoreResults 移动到任何后续结果。

您需要在获取结果集之前执行此操作。有关详细信息，请参阅[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/processingsqlstatements.html)。

您必须使用[SQL count() 方法](http://www.w3schools.com/sql/sql_func_count.asp)来获取行数，*或者*（效率较低）遍历结果集并使用计数`ResultSet.next()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:51:57.437

使用这个查询

```
select count(row)
from countract_type_info
where id = 10 
```

在你的情况下

```
String selectTableRowsSQL4 = "SELECT count(row) "
+ "FROM contract_type_info"
+ "WHERE ID = ?"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:52:05.793

像下面这样的东西？？而且你从来没有执行过你的查询。[**你必须使用PreparedStatement.executeQuery()**](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29)来执行查询，它返回一个`ResultSet object`.

```
preparedStatementSelect = dbConnection.prepareStatement(selectTableRowsSQL4);
preparedStatementSelect.setInt(1, 5);
ResultSet rs = preparedStatement.executeQuery();
while(rs.next()){
System.out.println("Row: " + rs.getRow());
} 
```

# performance - matlab结构mex

> ID：14830772
> 
> 赞同：0
> 
> 时间：2013-02-12T10:49:51.863
> 
> 标签：performance, matlab, structure, mex

我正在寻找速度和性能非常重要的项目中的一些建议。

我创建了一个模型，该模型由一个带有 1 个 for 循环（25 000 次迭代）的外部函数组成，该函数调用几个自定义函数。为了提高模型的性能，我将自定义函数重写为 MEX 函数。这已经提供了很好的加速。但是，我还想将外部 for 循环放在 MEX 函数中。但是我在将数据从 MATLAB 传递到 MEX 函数时遇到问题。（请注意，无法对 for 循环进行矢量化）。

在模型模拟之前已知的数据被保存到一个大型的嵌套数组结构中（以“data.Q.position1”的形式构建，“position1”是一个包含 10000 个双精度数的数组）。所有包含双精度的数组都具有相同的长度。模型的结果也会写入到这个数组结构中（当然是不同的字段名，并且在for循环之前进行了预分配）

所以目前，模型看起来像这样：

```
[data]  = function model(data)
for i=1:10000
    data.Q.position1(i) = MEX-function1(data.WL.position4(i), data.WL.position3(i), …);
    data.Q.position2(i) = MEX-function1(data.WL.position6(i), data.WL.position12(i), …);
    …
    data.WL.position7(i) = MEX-function2(data.Q.position1(i), …);
     …
end 
```

我选择了数组的结构，这样我就可以轻松地指向函数输入所需的变量。

所以我的问题是，如何将 for 循环放在 MEX 函数中，我与结构有什么关系？我对 MEX 和 C 语言真的很陌生，所以也许有一个简单的解决方案......

其次，整个概念在性能方面看起来不错，还是有更好的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:53:55.000

从那里开始[`mxGetField`](http://www.mathworks.com/help/matlab/apiref/mxgetfield.html)并[`mxSetField`](http://www.mathworks.com/help/matlab/apiref/mxsetfield.html)按照文档跟踪...

# javascript - 如何在菜单栏中的特定菜单选项卡中设置默认选项卡

> ID：14830774
> 
> 赞同：0
> 
> 时间：2013-02-12T10:49:58.993
> 
> 标签：javascript, html, css, javascript-events

我在这段代码中有一些疑问。这是菜单栏 Java Script，它有很多选项卡。当我运行此代码时，它会自动单击第二个 TAB 而不是第一个 TAB。

JAVASCRIPT 代码。

```
 var dolphintabs={subcontainers:[], last_accessed_tab:null,

    revealsubmenu:function(curtabref){
    this.hideallsubs()
    if (this.last_accessed_tab!=null)
        this.last_accessed_tab.className=""
    if (curtabref.getAttribute("rel")) //If there's a sub menu defined for this tab     item, show it
    document.getElementById(curtabref.getAttribute("rel")).style.display="block"
    curtabref.className="current"
    this.last_accessed_tab=curtabref
    },

    hideallsubs:function(){
    for (var i=0; i<this.subcontainers.length; i++)
    document.getElementById(this.subcontainers[i]).style.display="none"
    },

    init:function(menuId, selectedIndex){
    var tabItems=document.getElementById(menuId).getElementsByTagName("a")
    for (var i=0; i<tabItems.length; i++){
    if (tabItems[i].getAttribute("rel"))
        this.subcontainers[this.subcontainers.length]=tabItems[i].getAttribute("rel") //store id of     submenu div of tab menu item
    if (i==selectedIndex){ //if this tab item should be selected by default
    tabItems[i].className="current"
    this.revealsubmenu(tabItems[i])
        }
    tabItems[i].onclick=function(){
    dolphintabs.revealsubmenu(this)
    }
    } //END FOR LOOP
    }
    } 
```

HTML 代码：

```
<head>
<title>Cut & Paste Dolphin Tabs Menu</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="style.css" type="text/css" />
<script type="text/javascript" src="dolphin.js">
</script>
</head>

<body>

<div id="dolphincontainer">
<div id="dolphinnav">
<ul>
<li><a href="http://www.javascriptkit.com"><span>Home</span></a></li>
<li><a href="http://www.javascriptkit.com" rel="joey"><span>Joey</span></a></li>
<li><a href="http://www.javascriptkit.com" rel="suzy"><span>Suzy</span></a></li>
<li><a href="http://www.javascriptkit.com" rel="george"><span >George</span></a></li>
<li><a href="http://www.javascriptkit.com"><span>Contact Us</span></a></li>
</ul>
</div>
<div id="dolphin_inner">
<div id="joey" class="innercontent">
Joey's statue of a white dog was originally given to Jennifer Aniston as a good luck present from her best friend.
</div>

<div id="suzy" class="innercontent">
During this period, then-locally famous Suzy Waud anchored evening broadcasting.
</div>

<div id="george" class="innercontent">
George Louis Costanza is a fictional character on the United States based television sitcom Seinfeld (1989–1998).
</div>

<!-- End Sub Menus container -->
</div>

</div>

<script type="text/javascript">

</script>
    </body>
    </html> 
```

CSS 代码：

```
#dolphincontainer{position:relative;border-bottom: 2px solid navy;     color:#E0E0E0;background:#143D55;
width:100%;font-family:Helvetica,Arial,Verdana,sans-serif;}
#dolphinnav{position:relative;height:33px;font-size:12px;text-transform:uppercase;font-           weight:bold;background:#fff url(images/dolphin_bg.gif) repeat-x bottom left;padding:0 0 0 20px;}
#dolphinnav ul{margin:0;padding:0;list-style-type:none;width:auto;float:left;}
#dolphinnav ul li{display:block;float:left;margin:0 1px;}
#dolphinnav ul li a{display:block;float:left;color:#EAF3F8;text- decoration:none;padding:0 0 0 20px;height:33px;}
#dolphinnav ul li a span{padding:12px 20px 0 0;height:21px;float:left;}
#dolphinnav ul li a:hover{color:#fff;background:transparent url(images/dolphin_bg-OVER.gif) repeat-x bottom left;}
#dolphinnav ul li a:hover span{display:block;width:auto;cursor:pointer;}
#dolphinnav ul li a.current,#dolphinnav ul li a.current:hover{color:#fff;background:#1D6893 url(images/dolphin_left-ON.gif) no-repeat top left;line-height:275%;}
#dolphinnav ul li a.current span{display:block;padding:0 20px 0 0;width:auto;background:#1D6893 url(images/dolphin_right-ON.gif) no-repeat top right;height:33px;}

#dolphin_inner{color: white; padding: 5px; font-size: 80%; height: 1em}

#dolphin_inner a:link, #dolphin_inner a:visited, #dolphin_inner a:active{color: white}
#dolphin_inner a:hover{color: yellow}

.innercontent{display: none;} 
```

样品请见以下链接。单击此处查看它的示例[http://www.javascriptkit.com/script/script2/tabset/index.shtml](http://www.javascriptkit.com/script/script2/tabset/index.shtml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:56:00.303

将`rel`属性添加到您的`<a>`标签主页

希望这可以帮助！

**更新**
在您的 HTML 代码中更新以下调用

```
dolphintabs.init("dolphinnav", 0) 
```

# r - 应用任何行

> ID：14830777
> 
> 赞同：1
> 
> 时间：2013-02-12T10:50:07.060
> 
> 标签：r

在 R 中，any-Function 应用于结果为布尔值的列。逐行应用它的最佳方法是什么？在这种情况下，我的目标是对 A 进行重新编码，如果 A、B 或 C 中的任何一个为 1 或 6。（如果 TRUE TEST$NEW 应为 101）

这是我的数据框：

```
 A B C D
  1 1 1 "A"
  2 1 2 "B" 
  3 6 3 "C"
  5 3 5 "D" 
```

可以通过这种方式完成，但应该有一个更聪明的解决方案：

```
TEST$NEW <- ifelse(TEST$A == 1 | TEST$B == 1 | TEST$C == 1 | TEST$A == 6 | TEST$B == 6 | TEST$C == 6, 101, NA) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:01:20.613

```
TEST$NEW <- ifelse(apply(TEST,1,function(x) any(x==1|x==6)),101,NA) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T10:58:46.427

一种方法，但可能有一种更简单的方法：

```
df <- read.table(textConnection('A B C D
1 1 1 "A"
2 1 2 "B" 
3 6 3 "C"
5 3 5 "D"'), header=TRUE)

test <- rowSums(sapply(df[,c("A","B","C")], function(v) v %in% c(1,6)))
df$TEST <- ifelse(test>0, 101, NA) 
```

这使 ：

```
 A B C D TEST
1 1 1 1 A  101
2 2 1 2 B  101
3 3 6 3 C  101
4 5 3 5 D   NA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:51:47.223

另一种方法：

```
TEST$NEW <- 101 * apply(TEST, 1, function(x) any(x %in% c(1, 6))) ^ NA

  A B C D NEW
1 1 1 1 A 101
2 2 1 2 B 101
3 3 6 3 C 101
4 5 3 5 D  NA 
```

# nhibernate - 休眠查询结束。使用 JoinAlias 急切获取

> ID：14830797
> 
> 赞同：2
> 
> 时间：2013-02-12T10:51:29.007
> 
> 标签：nhibernate, queryover

如何使用 JoinAlias 进行 Eager fetch？我有以下查询：

```
QueryOver<Ticket>()
    .JoinAlias(ticket => ticket.Agent, () => agent)
    .JoinAlias(ticket => ticket.Activities, () => activity)
    .Left.JoinAlias(ticket => ticket.BusinessUnit, () => unit) .... 
    .List<Ticket>(); 
```

对于这个问题并不重要的复杂过滤器逻辑，我需要这个连接。此查询生成这样的 SQL：

```
FROM
       Requests.Ticket this_ INNER JOIN Requests.TicketsActivity activity2_
       ON this_.ID
          = 
          activity2_.TicketId
                             INNER JOIN Support.Agent agent1_
       ON this_.AgentID
          = 
          agent1_.ID
                             LEFT OUTER JOIN Requests.BusinessUnit unit3_
       ON this_.BusinessUnitId
          = 
          unit3_.ID 
```

那是我需要的。但是当我尝试访问一个相关实体（已经加入）时，Nhibernate**会创建一个新的惰性查询**。如何防止这种情况？

我可以为每个关系添加：

```
QueryOver<Ticket>().Fetch(ticket => ticket.Activities).Eager.Future(); 
```

此解决方案解决了该问题，但将带有外部连接的新查询添加到上述现有查询中。*“当一个头被砍下时，被砍下的地方又放出了另外两个”*

**更新：**

该问题可以通过将所有连接更改为外部连接来解决。有没有可能用内在做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T11:11:06.880

我以前遇到过这个，我不相信这是设计使然，因为我从来没有得到任何真正的解释。

看到[这个](http://puredotnetcoder.blogspot.ie/2011/09/queryover-eager-loading-parent-and.html)：

我想我们现在被困住了。

# android - 启动时的 Android c++ 服务

> ID：14830798
> 
> 赞同：2
> 
> 时间：2013-02-12T10:51:31.427
> 
> 标签：android, linux, linux-kernel, daemon, linux-device-driver

我需要在启动时在 android 中启动一个服务我不使用广播接收器，我用 C++ 编写了一个服务，因为我需要访问驱动程序 libusb 层来与我的外部设备通信，如果我手动启动该服务正常工作，如果我想在启动时启动服务意味着我需要在 android 中编辑 inir.rc 文件，如果我这样做它也可以正常工作。但问题是我无法在所有设备中编辑 init.rc。我将我的服务放在 Sytem/bin 位置并编辑 init.rc 文件如下

```
service sampleservice/system/bin/sampleservice
              oneshot
              disable 
```

对于手动，我像这样从终端启动服务

```
#./system/bin/sampleservice 
```

但我无法在每次系统重新启动时启动服务确实有任何想法在启动时启动服务而无需编辑 init.rc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:18:52.987

据我所知（NDK 参考、google 组，如*google-ndk*、*android-developers*等），除了`init.rc`.

对于您的特定用例，您可以尝试此处描述的USB SDK：http: [//developer.android.com/guide/topics/connectivity/usb/index.html 。](http://developer.android.com/guide/topics/connectivity/usb/index.html)但是，如果这还不够，或者如果您想支持低于 10 的 OS API 级别，那么我相信没有简单的方法可以实现您想要的。

假设您的服务不是*关键的*（即系统不依赖它），我在这里看到了几个线程以及建议创建您将使用 ADT 创建的常规 Android 应用程序的组。它将是最小的并且包含：

*   您的 C++ 服务作为打包的本机库
*   系统启动后将收到通知的广播接收器（如下所述：[http](http://www.androidenea.com/2009/09/starting-android-service-after-boot.html) ://www.androidenea.com/2009/09/starting-android-service-after-boot.html ）。该接收器将简单地启动本机服务。

当需要在非 root 设备上安装服务时，也建议使用此方法。但是，我从未尝试过。我知道这并不多，但我想分享我对这个主题的了解。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T11:54:11.303

我想您需要确保在启动服务之前 fs 已启动......如果您可以从源代码编译，那么一个好主意是在 init 代码本身中启用 Info 日志。

BR Subbu

# java - 如何在 cloudfoundry 或其他地方部署 appfuse？

> ID：14830803
> 
> 赞同：1
> 
> 时间：2013-02-12T10:51:39.400
> 
> 标签：java, spring, spring-roo, cloud-foundry, appfuse

我想将 appfuse 部署到 cloudfoundry 中。当我运行这些 un​​ix 命令时：

```
mvn archetype:generate -B -DarchetypeGroupId=org.appfuse.archetypes -DarchetypeArtifactId=appfuse-basic-spring-archetype -DarchetypeVersion=2.2.1 -DgroupId=se.ova -DartifactId=artpage -DarchetypeRepository=http://oss.sonatype.org/content/repositories/appfuse
cd artpage
mvn clean install -Ppostgresql
vmc push
more ~/.vmc/crash 
```

我收到这条消息：

```
Time of crash:
  2013-02-12 11:24:26 +0100

CFoundry::AppInvalid: 300: Invalid application description

cfoundry-0.4.21/lib/cfoundry/v1/base.rb:113:in `handle_response'
cfoundry-0.4.21/lib/cfoundry/baseclient.rb:146:in `block in request_uri'
/usr/lib/ruby/1.9.1/net/http.rb:745:in `start'
cfoundry-0.4.21/lib/cfoundry/baseclient.rb:127:in `request_uri'
cfoundry-0.4.21/lib/cfoundry/baseclient.rb:48:in `request'
cfoundry-0.4.21/lib/cfoundry/baseclient.rb:44:in `request_path'
cfoundry-0.4.21/lib/cfoundry/baseclient.rb:193:in `request_with_options'
cfoundry-0.4.21/lib/cfoundry/baseclient.rb:205:in `post'
cfoundry-0.4.21/lib/cfoundry/v1/model_magic.rb:34:in `block (2 levels) in define_client_methods'
cfoundry-0.4.21/lib/cfoundry/v1/model.rb:72:in `create!'
vmc-0.4.7/lib/vmc/cli/app/push/create.rb:59:in `block in create_app'
interact-0.5.2/lib/interact/progress.rb:98:in `with_progress'
vmc-0.4.7/lib/vmc/cli/app/push/create.rb:58:in `create_app'
vmc-0.4.7/lib/vmc/cli/app/push.rb:95:in `setup_new_app'
vmc-0.4.7/lib/vmc/cli/app/push.rb:82:in `push'
mothership-0.3.5/lib/mothership/base.rb:61:in `run'
mothership-0.3.5/lib/mothership/command.rb:68:in `block in invoke'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in `call'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:113:in `block (2 levels) in <class:Manifests>'
mothership-0.3.5/lib/mothership/callbacks.rb:74:in `with_filters'
manifests-vmc-plugin-0.4.19/lib/manifests-vmc-plugin/plugin.rb:112:in `block in <class:Manifests>'
mothership-0.3.5/lib/mothership/command.rb:78:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:78:in `block (2 levels) in invoke'
mothership-0.3.5/lib/mothership/command.rb:82:in `instance_exec'
mothership-0.3.5/lib/mothership/command.rb:82:in `invoke'
mothership-0.3.5/lib/mothership/base.rb:50:in `execute'
vmc-0.4.7/lib/vmc/cli.rb:106:in `execute'
mothership-0.3.5/lib/mothership.rb:45:in `start'
vmc-0.4.7/bin/vmc:11:in `<top (required)>'
/usr/local/bin/vmc:23:in `load'
/usr/local/bin/vmc:23:in `<main>' 
```

有人知道出了什么问题或我如何在其他 PaaS 上部署 appfuse 吗？我已经将 roo 应用程序部署到 cloudfoundry 并且效果很好，但是我很难进一步开发 roo 应用程序，例如添加图像上传和电子邮件配置，所以我认为 appfuse 会更容易，但我喜欢以某种方式将它部署到 PaaS 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:39:19.460

`vmc push`假设您要从当前目录进行部署。这在您的示例中失败了，因为没有可交付成果应用程序，而是它的来源。

任何一个

*   转到`target/<the_exploded_app>`目录并执行`vmc push`
*   或使用`vmc push --path target/<the_exploded_app_or_the_dot_war>`

应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:40:53.967

如果您查看根本原因，它在堆栈中很远，您会看到一条错误消息，

**无法创建索引目录：/nonexistent/artpage-1.0-SNAPSHOT/index for index org.appfuse.model.User**

这意味着在磁盘上创建索引时没有写权限。这是一个不错的博客，可以帮助您解决问题：

[http://appfuse.547863.n4.nabble.com/Preparing-for-the-2-2-Release-td4655656.html](http://appfuse.547863.n4.nabble.com/Preparing-for-the-2-2-Release-td4655656.html)

还要记住，创建的文件只会在应用程序实例运行期间持续存在。

# javascript - 确保 MVC3 操作仅通过托管站点使用 JavaScript 加载

> ID：14830804
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:51:40.827
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一个 MVC3 网页，其中包含一些 JavaScript，可通过 jquery load 命令将一些内容加载到 div 中。看起来像这样...

```
 $('#divContetn').load('/home/getContent') 
```

在执行其他一些 JavaScript 后，这会在回调中调用。此代码在页面源代码中可见。

我的问题是，有没有办法确保对这个 url 的调用只来自网页，而不是来自自己在浏览器中输入 url 的人？

理想情况下，我想阻止用户从页面源获取此 url，然后使用它自己将内容加载到浏览器中。

由于加载后的回调的性质，必须从 JavaScript 完成 div 加载。

有人对此有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:00:42.503

您将永远无法对用户隐藏 URL。充其量，您可以增加用户获取 URL 所必须付出的努力。即使您设法从源中隐藏 URL（通过使用 JavaScript 转义它或可能通过 AJAX 检索 URL），用户仍然可以通过简单地使用 Fiddler 之类的工具来找出 URL 是什么。或者浏览器内置的调试工具，如果有的话。

通过将此属性放置在操作方法上方，可以在服务器端确保 URL 仅在用户进行 AJAX 调用时可导航：

```
public class AjaxOnlyRequestAttribute : ActionMethodSelectorAttribute
{
    /// <summary>
    /// Determines whether the action method selection is valid for the specified controller context.
    /// </summary>
    /// <param name="controllerContext">The controller context.</param>
    /// <param name="methodInfo">Information about the action method.</param>
    /// <returns>
    /// true if the action method selection is valid for the specified controller context; otherwise, false.
    /// </returns>
    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
        return controllerContext.HttpContext.Request.IsAjaxRequest();
    }
} 
```

但是，这再次增加了用户必须付出的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:00:49.893

您可以通过测试来检查请求是否*可能*是通过 ajax 调用发出的`Request.IsAjaxRequest()`（请参见[此处](https://stackoverflow.com/questions/3864179/how-to-know-if-the-request-is-ajax-in-asp-net-mvc)）。

这应该会阻止“普通”用户直接访问该页面。但是很容易伪造一个包含标头的 HTTP 请求，让您的服务器相信它是一个 ajax 请求。

作为一般规则：始终假设客户端请求中的任何内容都可以伪造和操纵。不要相信来自客户的任何东西。特别是不要将任何与安全相关的功能基于任何请求值或浏览器功能（当然，登录凭据和类似功能除外）。

# twitter - Twitter API 1.1 友谊/创建速率限制

> ID：14830807
> 
> 赞同：2
> 
> 时间：2013-02-12T10:51:44.727
> 
> 标签：twitter

我正在将我的应用程序从 Twitter API 版本 1 移动到 1.1，并且遇到了友谊/创建问题。

根据 1.1 文档（[https://dev.twitter.com/docs/api/1.1/post/friendships/create](https://dev.twitter.com/docs/api/1.1/post/friendships/create)）friendships/create 没有速率限制，但是当我调用friendships/create 时，我可以看到速率限制是 15（根据“x-rate-limit-limit”）。

我在这里做错了吗？每个时间窗口的速率限制真的是 15 次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T08:15:55.493

冉找到了解决办法：

> 我使用 twitter gem，当您调用 follow 它时，它首先会调用friends/ids 以确保您尚未关注该成员，并且 /friends/ids 限制为每个窗口 15 个调用。
> 
> 解决方案是调用`follow!`（使用 ! ）来避免检查。

从这里：[https ://dev.twitter.com/discussions/14894](https://dev.twitter.com/discussions/14894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T21:51:20.270

根据关于[建立友谊](https://developer.twitter.com/en/docs/accounts-and-users/follow-search-get-users/api-reference/post-friendships-create)的新 Twitter API 文档：

> 如果用户已经是用户的朋友，则可能会返回 HTTP 403，但出于性能原因，即使关注关系已经存在，此方法也可能返回 HTTP 200 OK 消息。

# ios - 将 MPMediaItemCollection 转换为 Nsdata

> ID：14830808
> 
> 赞同：2
> 
> 时间：2013-02-12T10:51:45.857
> 
> 标签：ios, mpmusicplayercontroller, mpmediapickercontroller

我通过以下代码从 MPMediaPickerController 导入了一个 .mp3 文件：-

```
MPMediaPickerController *mediaPicker = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeAny];

    mediaPicker.delegate = self;
    mediaPicker.allowsPickingMultipleItems = YES;
    mediaPicker.prompt = @"Select songs to play";

    [self presentModalViewController:mediaPicker animated:YES];
    [mediaPicker release]; 
```

现在我想将选定的 .mp3 文件转换为 NSDATA 以便我可以将该 nsdata 上传到服务器：-

```
- (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection
{

    MPMusicPlayerController *musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
    [musicPlayer setQueueWithItemCollection: mediaItemCollection];

    NSLog(@"==>%@",musicPlayer);
    [musicPlayer play];
    [self dismissModalViewControllerAnimated: YES];
} 
```

主要问题是如何将音乐文件转换为 NSDATA 或任何其他格式，通过它我可以将其上传到服务器。然后可以在下载与音频文件相同的文件后轻松使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T05:48:03.810

您可以使用它来转换 .mp3 或任何媒体文件以转换为 nsdata ：-

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSURL *soundFileURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/memo.m4a", documentsDirectory]];;
NSData *myData = [NSData dataWithContentsOfURL:soundFileURL];

return myData; 
```

# c# - 运行包含外部dll的exe文件

> ID：14830809
> 
> 赞同：0
> 
> 时间：2013-02-12T10:51:47.597
> 
> 标签：c#, dll

我开发了一个使用外部 dll（dotras.dll）的应用程序，它可以正常工作，但是当我想在调试或发布文件夹中运行 exe 文件时，我面临“无法加载或归档或组装'dotras'”什么是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:58:14.483

为什么不尝试将 Dotras Dll 的**副本设置为 local = true** 。

# c# - 制作局部视图

> ID：14830811
> 
> 赞同：2
> 
> 时间：2013-02-12T10:51:52.010
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个名为 drawGraph 的视图，这是通过控制器访问的；

```
@Html.ActionLink("DrawGraph", "drawGraph", new {id =item.data}) 
```

当我使用此链接时，页面会加载到新页面上（因为它会）我想将其显示为链接所在页面的一部分，有没有简单的方法来实现这一点？

我的控制器看起来像这样；

```
 public ActionResult drawGraph(string data)
    {
         *Bunch of code
         return View(chart);
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:57:22.580

是的，您可以，但是您需要使用 Ajax，幸运的是 ASP.NET MVC 提供了一些不错的便捷方法，例如[Ajax.ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx)

```
@Ajax.ActionLink("DrawGraph", "drawGraph", new {id =item.data},  
                 new AjaxOptions
                            {
                                UpdateTargetId = "yourDiv",
                                InsertionMode = InsertionMode.Replace,
                            })

<div id="yourDiv"> </div> 
```

[然后，您需要使用PartialView](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.partialview%28v=vs.108%29.aspx)从您的操作中返回部分视图：

```
public ActionResult drawGraph(string data)
{

    //Bunch of code    
    return PartialView(chart);
} 
```

您不应该忘记`jquery.unobtrusive-ajax.min.js`在您的布局/视图中包含 ，以便 Ajax 助手工作。

# javascript - 从 Javascript 的嵌套函数中访问变量

> ID：14830813
> 
> 赞同：0
> 
> 时间：2013-02-12T10:51:59.577
> 
> 标签：javascript, function, nested

我有以下功能：

```
downloadProductImage: function(remoteImage, localImageName){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
        fileSystem.root.getFile(localImageName, {create: true, exclusive: false}, function(fileEntry) {
            var localPath = fileEntry.fullPath;
            var ft = new FileTransfer();
            ft.download(remoteImage,
                localPath, function(entry) {
                    //RETURN THIS imageURL = entry.fullPath;

                }, fail);
        }, fail);
    }, fail);       
} 
```

函数 downloadProductImage() 位于全局 var app = {} 中，因此由 app.downloadProductImage() 访问。

这个函数在一个循环中运行，我希望返回 imageURL 但似乎无法得到它。我在 var app = {} 之外声明了 global var = imageURL 但是每当我尝试在另一个函数中获取 imageURL 时，第一个循环返回 undefined ，其余的都是正确的。

我不确定为什么第一个循环返回未定义.. var imageURL 在页面顶部全局声明..

如果我在上述代码中的 //RETURN THIS imageURL = entry.fullPath; 下发出警报（imageURL），它会正确发出警报，而不是当我尝试在函数之外访问它时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:37:07.680

鉴于@dfsq 提到这是一个异步调用，我相信您在顶层访问它时会发现 imageURL 是未定义的，因为尚未调用回调。

确认这一点的最简单方法是在回调中插入两个 console.log() 语句，就在您设置 imageURL 之前和之后；还有另外两个 console.log() 语句围绕您访问 imageURL 的顶级代码中的点。

如果访问确实发生在分配之前，那么这将解释为什么您会看到“未定义”。要解决您的问题，您需要推迟在顶层执行的任何操作，直到回调完成。jQuery Promise 是执行此操作的一种方法，但其他库中也有其他选项。在您使用的任何库中寻找“期货”、“承诺”、“延迟执行”作为关键字。如果您正在使用任何类型的事件框架，您也可以使用它：在回调中触发一个事件，并在顶层侦听该事件（确保在触发之前进行侦听，否则您将遇到相反的问题）。

如果您使用的是 jQuery，那么以下内容可能会给您一个先机：

```
var imageURLPromise = jQuery.Deferred();

downloadProductImage: function(remoteImage, localImageName){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
        fileSystem.root.getFile(localImageName, {create: true, exclusive: false}, function(fileEntry) {
            var localPath = fileEntry.fullPath;
            var ft = new FileTransfer();
            ft.download(remoteImage,
                localPath, function(entry) {
                    // Note: The assignment is mediated by the DeferredObject that handles the timing issues for us.
                    imageURLPromise.resolve(entry.fullPath);
                }, fail);
        }, fail);
    }, fail);       
}   

imageURLPromise.done(function(imageURL) {
    // Use imageURL here at toplevel.
}); 
```

# javascript - IE8 documentMode 总是“怪癖模式”

> ID：14830818
> 
> 赞同：0
> 
> 时间：2013-02-12T10:52:10.447
> 
> 标签：javascript, document, mode

当用户使用低于 IE8 的 IE 版本时，我正在尝试向用户打印一条消息。为了测试它，我启用了文档模式 8。但是当我在 javascript 中询问文档模式时，我总是收到“怪癖模式：5”

```
 document.documentMode; 
```

有谁知道为什么？

这是我的规范的开头：

```
<!doctype html>
<html>
 <head>
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">
   ... 
```

**解决了：**

尽管如此，我还是使用了用户代理并检查了仅在 IE8 中显示的“trident/4.0”标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:14:43.923

有几件事可以迫使 IE 进入 QuirksMode，最明显的两件事是

1.  缺少、格式错误或过时的 Doctype 请参阅[本页底部附近的表格，以获取有关哪些 doctype 将触发 quirksmode 的综合指南](http://hsivonen.iki.fi/doctype/)
2.  页面上 DocType 之前的任何内容，IE 坚持 DocType 绝对是出现在文件中的第一件事，否则它假定没有 DocType 并恢复为 QuirksMode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:54:02.407

在您的页面标题部分使用此元标记...

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

它将最终确定您的文档模式。

# javascript - JavaScript (ECMA) 语法 - 左递归问题

> ID：14830825
> 
> 赞同：2
> 
> 时间：2013-02-12T10:52:30.587
> 
> 标签：javascript, c, grammar

首先：使用 Actipro SyntaxEditor 中的 LL(*) 解析器。不过，这可能适用于任何 LL(k) 解析器。

我目前正在尝试为 Javascript 编写一个有效的 LL(k) 语法（使用 ECMA-262 参考），有时弄清楚左递归是可以的，但我一直在努力寻找解决这个问题的方法。（并且可能已经失去了注意力，因为我已经连续三天不停地工作了）

好的，解决方案示例：

采取这条规则：

```
BitwiseORExpression :
    BitwiseXORExpression
    BitwiseORExpression | BitwiseXORExpression 
```

这实际上会变成：

```
expBitwiseOR.Production = expBitwiseXOR | expBitwiseOR + @bitwiseOrSign + expBitwiseXOR; 
```

并避免左递归：

```
expBitwiseOR.Production = expBitwiseXOR + ( @bitwiseOrSign + expBitwiseXOR ).ZeroOrMore(); 
```

很简单。然而，我坚持使用更复杂的规则，例如：

```
MemberExpression :
    PrimaryExpression
    FunctionExpression
    MemberExpression [ Expression ]
    MemberExpression . IdentifierName
    new MemberExpression Arguments 
```

我已经尝试了几件事，其中一些工作（即它们“工作”但不是他们应该做的）和大多数不工作（即左递归）。老实说，我并不希望得到完整的答案或完整的解决方案，但也许有人会知道如何使用复杂的规则或其他规则来避免这个问题。

也无需将其放入 Actipro Parser 的正确语法中，任何模型代码仍然会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:01:45.580

由于这些事情经常发生，在拼命询问后不久，答案就会在你吃三明治的时候出现。TL; DR：像这样解决：

```
expMemberExpression.Production = 
            (
            expPrimaryExpression
            |stFunctionExpression
            | (@NewKeyword + expMemberExpression + expArguments)
            ) + expMemberExpressionHelper.ZeroOrMore();

expMemberExpressionHelper.Production = (symLiteralOpenSquare + expExpression + symLiteralCloseSquare)
            | ( @punctuator + symIdentifier ); 
```

# ios - 当我（认为我）正确设置它时，为什么 self.tableView 为零？

> ID：14830827
> 
> 赞同：1
> 
> 时间：2013-02-12T10:52:41.690
> 
> 标签：ios, uitableview, null

我已将自定义 UICollectionViewController 作为对象 (A) 添加到界面构建器，并为其提供了适当的自定义类。这个 EOCollectionViewController 也是我的主 Viewcontroller 中的一个 IBOutlet

我已将 UICollectionView 添加到应用程序的主视图中。

我已经使所有链接成为可能。UICollectionView 将对象 (A) 作为委托和数据源。对象 (A) 具有链接到视图属性的 UICollectionView。（不是 self.collectionView 属性，因为它不存在）

这一切都很好。集合视图被填满。CollectionViewController 位于我的主视图控制器的属性中。

只有 self.collectionView 为零...当我尝试从 UICollectionViewController 中访问它时。

我的第一个猜测是 IB 中使用的“额外”UIController 不会以相同的方式初始化。我还测试过，这些额外的对象永远不会调用 viewDidLoad 和 init。

附加 EONoteController 的标题（以及作为解决方法添加的 IBOutlet）

```
@interface EONoteController : UICollectionViewController<UIGestureRecognizerDelegate>{

    __weak IBOutlet UICollectionView *cvNotes;
}
@property (nonatomic) EDAMNotebook* notebook;
@property id <EODragHandler> draghandler;
@end 
```

我的第一个猜测是在 viewDidLoad 中“修复”它，如下 self.collectionView = self.view，但 viewDidLoad 永远不会被调用。

我错过了什么？

# asp.net - 带有 node.js / socket.io 服务器的 ASP.NET 客户端

> ID：14830829
> 
> 赞同：2
> 
> 时间：2013-02-12T10:52:43.357
> 
> 标签：asp.net, node.js, socket.io

是否可以从 ASP.NET 应用程序到 node.js 服务器进行通信？

首先，我只想能够看到连接。我认为这样的事情会起作用：

**服务器（node.js）：**

```
var io = require('socket.io').listen(1234);

io.sockets.on('connection', function (socket)
{
    console.log('connected');

    socket.on('disconnect', function ()
    {
        console.log('disconnected');
    });
}); 
```

**客户端（ASP.NET）：**

```
var tcpClient = new System.Net.Sockets.TcpClient();
tcpClient.Connect("localhost", 1234);
System.Threading.Thread.Sleep(1000);
tcpClient.Close(); 
```

......但我没有太多的快乐。客户端根本没有抱怨，但我从未在 node.js 中看到“已连接”或“已断开连接”。

有没有人有这样的工作？

# android - 如何转发本地主机端口？

> ID：14830831
> 
> 赞同：1
> 
> 时间：2013-02-12T10:52:49.190
> 
> 标签：android, android-emulator, portforwarding

如何简单地将一个端口从 Android 模拟器 (127.0.0.1:5555) 转发到我的 LAN (192.168.1.102:5555)？

我不认为我可以更改模拟器的 IP 地址，所以我认为我可以做到这一点的唯一方法是将该端口转发到网络。

我只想通过 adb 从我的笔记本电脑访问我强大的 PC 模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:03:28.230

如果要转发端口，则必须更改其编号。不应允许您从 2 个应用程序（您的应用程序和转发器）中收听 5555。

我不了解 android 模拟器，但您可以将它（和您的防火墙）配置为接受来自您的 LAN（而不仅仅是来自本地主机）的传入连接。

如果您仍想执行端口重定向，您可以使用 netcat（安装在大多数基线 unix/linux 系统上，您可以从 google 找到适用于 Windows 的端口）

```
e.g. redirect incoming connections on port 8080 to local service on port 5555
nc -L 127.0.0.1:5555 -p 8080 -vvv 
```

# c++ - 我可以为局部变量创建 boost::shared_ptr 吗？

> ID：14830837
> 
> 赞同：7
> 
> 时间：2013-02-12T10:53:11.177
> 
> 标签：c++, boost, shared-ptr

我有一些方法可以引用给定对象，有些方法正在使用`boost::shared_ptr`. 到目前为止，在我的测试方法中，我创建了一个`shared_ptr`指向这些对象之一并传递`*ptr`给期望引用的方法。是否可以反过来做，例如在堆栈上创建一个本地对象，然后以安全的方式创建一个指向它的共享指针，以直接替代`&obj`使用传统指针的运算符？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T11:03:10.200

如果你发现你需要这个，那么你的代码可能存在严重错误。

如果函数采用共享指针，那应该是因为它们*需要*延长对象的生命周期。如果他们不需要延长对象的生命周期，他们应该获取一个引用。

通过您正在做的事情，他们*无法*延长对象的生命周期。如果他们需要并且不能，他们可能最终会通过您传递给他们的共享指针的副本访问超出范围的对象。繁荣。

这有点可能是有道理的。他们可能需要延长使用寿命，但您将确保对象保持有效的时间超过他们可能需要延长它的最长期限。但我仍然强烈建议不要这样做。它非常脆弱，使您调用的所有代码都完全依赖于调用代码的行为方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-12T10:57:02.340

```
#include <boost/shared_ptr.hpp>

void null_deleter(int *)
{}

int main()
{
    int i = 0;
    boost::shared_ptr<int> p(&i, &null_deleter);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T10:57:17.267

您可以在表单的构造函数中传递适当的删除器：

```
template<class Y, class D> shared_ptr(Y * p, D d); 
```

删除器对象必须在其 中什么都不做`operator()()`，例如函数：

```
template <typename T>
void no_op(T*) {} 
```

然后您可以使用它构建：

```
boost::shared_ptr<Foo> f(&obj, no_op<Foo>); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T07:48:39.103

您可以使用 c++11 lambda 函数：

```
boost::shared_ptr<Foo> f(&obj, \[ ](Foo*){}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-02T22:41:55.927

您可以在构造函数中传递 null_deleter。

```
#include <boost/shared_ptr.hpp>
#include <boost/core/null_deleter.hpp>
int main()
{
   int a = 0;
   boost::shared_ptr<int> pi(&a, boost::null_deleter());
} 
```

但请注意这种情况：在销毁后使用对象：

```
#include <boost/shared_ptr.hpp>
#include <boost/core/null_deleter.hpp>

class Y
{
public:
    void  tryUse()
    {
         std::cout << "attempt to use :"<< (uintptr_t)(void*)this<< std::endl;
    }
    ~Y()
    {
         std::cout << "destructor: "<< (uintptr_t)(void*)this<< std::endl;
    }
};

struct Y_user
{
     boost::shared_ptr<Y> p;
    ~Y_user()
    {

        std::cout << "Y_user destructor: "<< (uintptr_t)(void*)this<< std::endl;
        if (p.get())
            p->tryUse();
    }
};

int main()
{
    {
        Y_user yu;
        Y y;
        boost::shared_ptr<Y> p (&y, boost::null_deleter() );
        yu.p = p;
    }
} 
```

将导致控制台输出如下：

```
destructor: 140737179995232 
Y_user destructor: 140737179995264
attempt to use :140737179995232 
```

# javascript - 在 googlecalendar 中输入的脚本，但它不起作用

> ID：14830838
> 
> 赞同：1
> 
> 时间：2013-02-12T10:53:11.267
> 
> 标签：javascript, calendar

我已经尝试制作一个 webbapp，它可以使用 googlescript 在我的 googlecalendar 中输入，但它不起作用，它从文本框中获取开始日期和结束日期并将其发送到 googlecalendar，有人可以告诉我我的错误在哪里?

```
function doGet() {
     var app=UiApp.createApplication().setTitle('test app');
     var pan1=app.createHorizontalPanel();

     app.add(pan1);
     var txt1=app.createTextBox().setId('txt1').setName('txt1');
      var btn1=app.createButton().setText('Start').setId('btn1');
      btn1.addClickHandler(app.createServerHandler("start"));
      var pan2=app.createHorizontalPanel();
      app.add(pan2);
      var txt2=app.createTextBox().setId('txt2').setName('txt2');
      var btn2=app.createButton().setText('End').setId('btn2');
     btn2.addClickHandler(app.createServerHandler("ende"));
    pan1.add(txt1);
    pan1.add(btn1);
    pan2.add(txt2);
    pan2.add(btn2);
    var pan3=app.createHorizontalPanel();
    var btn3=app.createButton().setText('Eintragen').setId('btn3');
     btn3.addClickHandler(app.createServerHandler("stunde_eintragen"));
    pan3.add(btn3);
    app.add(pan3);

     return app;
    }

    function start() {
    var app =UiApp.getActiveApplication();
    app.getElementById("txt1").setText(new Date());
    return app;

    }
    function ende() {
    var app =UiApp.getActiveApplication();
    app.getElementById("txt2").setText(new Date());
    return app;

    }

    function stunde_eintragen (e){
    var app=UiApp.getActiveApplication();
    var cal=CalendarApp.getDefaultCalendar();
    var txt11= e.parameter.txt1;
    var txt22= e.parameter.txt2;
    cal.createEvent("Arbeit", new Date('txt11.toString()'), new Date('txt22.toString()'), {location:'Nap room'});

    return app;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:28:29.853

```
new Date('txt11.toString()') 
```

将要执行的脚本放在引号中是行不通的。txt11 不存在它的 txt1 并且不应该用引号引起来。

```
new Date(txt1.toString()) 
```

此外，您需要在 ServerHandler 上使用 addCallbackElement(widget) ( [https://developers.google.com/apps-script/class_serverhandler#addCallbackElement](https://developers.google.com/apps-script/class_serverhandler#addCallbackElement) )

您应该使用来自 Google 的工作示例进行练习，并从文档中阅读函数的作用。

# jsf - java.lang.UnsupportedOperationException 在 javax.faces.application.Application.getResourceHandler

> ID：14830846
> 
> 赞同：2
> 
> 时间：2013-02-12T10:53:32.733
> 
> 标签：jsf

我正在使用 Hibernate、Spring 和 JSF 开发一个 Web 项目。运行项目时，出现以下异常：

```
Servlet.service() for servlet Faces Servlet threw exception
java.lang.UnsupportedOperationException
    at javax.faces.application.Application.getResourceHandler(Application.java:286)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:307)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T03:24:45.497

这个问题是因为运行时类路径中没有适合 JSF API 的 JSF 实现。解决方案是将 JSF 实现 JAR 文件放在运行时类路径中。

换句话说，您有一个`/WEB-INF/lib/jsf-api.jar`文件，但没有一个`/WEB-INF/lib/jsf-impl.jar`文件，至少与 JSF API JAR 文件的版本不同。您需要确保提供一个，至少是正确的版本。

# html - 更改 iframe 问题的背景颜色

> ID：14830852
> 
> 赞同：13
> 
> 时间：2013-02-12T10:54:02.687
> 
> 标签：html, iframe, background-color

我需要将背景颜色更改为显示页面的白色`<iframe></iframe>`。那可能吗？现在原网站的背景是灰色的。

```
 <iframe allowtransparency="true" style="background-color: Snow;" src="http://zingaya.com/widget/9d043c064dc241068881f045f9d8c151" frameborder="0" height="184" width="100%">
    </iframe> 
```

我想改变加载页面的背景

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-12T10:59:04.367

背景可以`<iframe>`这样改变：

```
<iframe allowtransparency="true" style="background: #FFFFFF;" 
    src="http://zingaya.com/widget/9d043c064dc241068881f045f9d8c151" 
    frameborder="0" height="184" width="100%">
</iframe> 
```

我认为不可能更改您在 iframe中*加载的页面的背景。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:07:02.487

JavaScript 是您所需要的。如果您在加载页面时加载 iframe，请使用 onload 事件插入 iframe 测试。如果 iframe 是实时插入的，则在插入时创建一个回调函数并挂钩您需要采取的任何操作:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-27T05:09:55.110

你可以使用 javascript

*   更改 iframe 背景颜色
*   更改加载页面的背景颜色（同域）

纯javascript

```
var iframe = document.getElementsByTagName('iframe')[0];
iframe.style.background = 'white';
iframe.contentWindow.document.body.style.backgroundColor = 'white'; 
```

jQuery

```
$('iframe').css('background', 'white');
$('iframe').contents().find('body').css('backgroundColor', 'white'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-24T14:33:51.970

只是基于 Chetabahana 所写的内容，我发现在 JS 函数中添加短暂的延迟对我正在开发的网站有所帮助。这意味着该函数在 iframe 加载后启动。你可以玩弄延迟。

```
var delayInMilliseconds = 500; // half a second

setTimeout(function() { 

   var iframe = document.getElementsByTagName('iframe')[0];
   iframe.style.background = 'white';
   iframe.contentWindow.document.body.style.backgroundColor = 'white';

}, delayInMilliseconds); 
```

我希望这有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T15:43:30.990

有可能的。使用 vanilla Javascript，您可以使用下面的函数作为参考。

```
function updateIframeBackground(iframeId) {
    var x = document.getElementById(iframeId);
    var y = (x.contentWindow || x.contentDocument);
    if (y.document) y = y.document;
    y.body.style.backgroundColor = "#2D2D2D";
} 
```

[https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_iframe_contentdocument](https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_iframe_contentdocument)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-02-10T09:41:01.950

将 iframe 放在旁边的标签之间

`<aside style="background-color:#FFF"> your IFRAME </aside>`

# objective-c - 输入 不工作

> ID：14830853
> 
> 赞同：2
> 
> 时间：2013-02-12T10:54:02.970
> 
> 标签：objective-c, cydia, tweak, theos

我正在使用 IOSOpenDev 对 Xcode 进行 cydia 调整，我尝试导入`<AppKit/AppKit.h>`，但出现此错误！
`'AppKit/AppKit.h' file not found'`
这是我的代码，当有人尝试截屏时会更改闪光灯颜色

```
#include <AppKit/AppKit.h>

%hook SBScreenFlash

-(void)flashColor:(id)color {

NSDictionary *prefs=[[NSDictionary alloc] initWithContentsOfFile:@"/var/mobile/Library/Preferences/com.junyi00.screenshotcolor.plist"];

if ([[prefs objectForKey:@"enable"] boolValue]){
    color = [NSColor blueColor];
    %orig(color); }
else {
    %orig; }
}

%end 
```

我查看`opt/IOSOpenDev/include`并`opt/theos/include`无法找到`AppKit.h`
如何解决此问题？请帮忙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T10:56:50.573

AppKit 适用于 Mac；对于你想要 UIKit 的 iOS：

```
#import <UIKit/UIKit.h> 
```

# html - 在 HTML 电子邮件 (iOS) 中的 A 标记内使用 IMG 标记

> ID：14830854
> 
> 赞同：0
> 
> 时间：2013-02-12T10:54:07.167
> 
> 标签：html, ios, image, html-email

我不知道为什么我不能在`<a>`标签周围使用`<img>`标签来使 HTML 电子邮件中的图像按钮在 iPhone 的电子邮件客户端中正确显示。

在 iPhone 的 Mail.app 中，当用户点击图片时，iPhone 让用户保存下载图片（来自`<img>`标签），而不是打开`<a>`标签的链接。

多部分电子邮件中的 HTML 代码如下所示：

```
<p>Download the beta version of Clue here:<br>
<a href="http://mandrillapp.com/track/click.php?u=15131679&id=2a00d47e46b0457fb24993692ada811c&url=https%3A%2F%2Fclue-backend.herokuapp.com%2Fclue%3Femail%3Ddaniel%252Btest%2540helloclue.com%26token%3Dn568g7swalmm3fi&url_id=0c311a87c47c051a01b2bfb680b20c1918fa0965&tags=_all,_sendida@helloclue.com"><img src="cid:aunvkjyxsm" class="download"></a></p> 
```

问题是该链接在桌面电子邮件客户端上工作得很好，但在 iPhone 上却不行，即使其他人的具有类似 HTML 的电子邮件似乎工作得很好。

完整的多部分原始电子邮件：[https ://gist.github.com/danieleggert/4761500](https://gist.github.com/danieleggert/4761500)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:44:13.757

当我将其从附件更改为内联图像时`<img src="data:image/png;base64,iVBORw0K ...">`（也删除 base64 字符串中的换行符），它工作正常（当我在计算机和 iPhone 上都收到电子邮件时，我可以单击链接没有事件）。诚然`MFMailComposeViewController`，我是使用 .

# ssis - SSIS 并行执行单个平面文件

> ID：14830858
> 
> 赞同：1
> 
> 时间：2013-02-12T10:54:35.520
> 
> 标签：ssis

我有一个大文本文件（2.2m 行，170 列，日期，整数，浮点数和 varchars）。我不完全理解使用 SSIS 进行并行执行。我想知道是否有一种方法可以“并行”加载（单个）文件。例如，我可以让一个“进程”加载 1-1.1m 行，另一个“进程”加载 1.1m 到 2.2m 行吗？

# excel - 下拉菜单中的货币兑换器

> ID：14830860
> 
> 赞同：1
> 
> 时间：2013-02-12T10:54:40.040
> 
> 标签：excel, vba

我有一个下拉列表`$C$4`，您可以在其中为工作表选择所需的货币 (£, €, $) 。我正在寻找一段代码，它将识别工作表中的单元格都是上述之一并将它们更改为您选择的货币。

例如，当前所有单元格都包含美元符号（在会计格式中）并且您从下拉列表中选择 €，现在所有为美元的单元格都变为欧元。

下面的代码适用于.`A1`但我需要对包含会计格式的工作表中的所有单元格进行测试。（一些数字单元格没有）

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Address = "$B$1" Then
    Select Case Target.Value
        Case Is = "US Dollars"
           Range("A1").NumberFormat = "$#,##0.00"

        Case Is = "British Pounds"
            Range("A1").NumberFormat = "[$£-809]#,##0.00"

        Case Else
            Range("A1").NumberFormat = "general"
    End Select
End If
End Sub 
```

你的想法，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:31:33.230

我现在写了两行重要的行：

```
Application.Union(["CPC"], ["heading"], ["final4"], ["single"]).Name = "CombinedRange"

 Range("CombinedRange").NumberFormat= _
"_-[$$-1004]* #,##0_ ;_-[$$-1004]* -#,##0 ;_-[$$-1004]* ""-""_ ;_-@_ "

Range("CombinedRange").NumberFormat= _
"_-[$$-1004]* #,##0_ ;_-[$$-1004]* -#,##0 ;_-[$$-1004]* ""-""_ ;_-@_ "

Range("CombinedRange").NumberFormat= _
"_-[$€-2] * #,##0_-;-[$€-2] * #,##0_-;_-[$€-2] * ""-""_-;_-@_-" 
```

我需要一段代码来说明 if C4="USD": Range("CombinedRange").NumberFormat= $

否则如果... c4="Euro" ; Range("CombinedRange").NumberFormat= €

# asp.net-mvc - 关于 asp.net mvc 设计模式的示例

> ID：14830865
> 
> 赞同：-1
> 
> 时间：2013-02-12T10:55:05.560
> 
> 标签：asp.net-mvc, model-view-controller

我对 MVC 设计模式非常陌生。你能解释一下使用 MVC 设计模式的 asp.net 中的简单代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:16:46.357

将来，在此处发布之前，您的第一个电话应该是[http://www.asp.net/mvc](http://www.asp.net/mvc) - 其中包括指向 [ASP.NET MVC 概述](http://msdn.microsoft.com/en-us/library/dd381412%28VS.98%29.aspx)和[代码演练的链接](http://msdn.microsoft.com/en-us/library/dd410597%28v=vs.98%29.aspx)

快乐的编码（祝你好运）

# string - R将所有行转换为字符串

> ID：14830866
> 
> 赞同：2
> 
> 时间：2013-02-12T10:55:07.230
> 
> 标签：string, r, dataframe

我需要将数据框的所有行转换为字符串。

这是一个示例数据：

```
1.12331,4.331123,4.12335435,1,"asd"
1.123453345,5.654456,4.889999,1.45456,"qwe"
2.00098,5.5445,4.768799,1.999999,"ttre" 
```

我将这些数据读入 R，得到了一个数据框。

```
td<-read.table("test.csv", sep=',') 
```

当我运行`apply(td, 2, as.character)`这些数据时，我得到了

```
 V1       V2       V3       V4       V5    
[1,] "1.1233" "4.3311" "4.1234" "1.0000" "asd" 
[2,] "1.1235" "5.6545" "4.8900" "1.4546" "qwe" 
[3,] "2.0010" "5.5445" "4.7688" "2.0000" "ttre" 
```

但是当我只在数字列上做同样的事情时，我得到了不同的结果：

```
apply(td[,1:4], 2, as.character)

     V1            V2         V3           V4        
[1,] "1.12331"     "4.331123" "4.12335435" "1"       
[2,] "1.123453345" "5.654456" "4.889999"   "1.45456" 
[3,] "2.00098"     "5.5445"   "4.768799"   "1.999999" 
```

因此，我需要一个与源文件中的值完全相同的数据框。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:11:35.110

您可以设置`colClasses`为`read.table()`将所有列设置为`character`.

```
 td <- read.table("test.csv", sep=',',colClasses="character")
 td
           V1       V2         V3       V4   V5
1     1.12331 4.331123 4.12335435        1  asd
2 1.123453345 5.654456   4.889999  1.45456  qwe
3     2.00098   5.5445   4.768799 1.999999 ttre

 str(td)
'data.frame':   3 obs. of  5 variables:
 $ V1: chr  "1.12331" "1.123453345" "2.00098"
 $ V2: chr  "4.331123" "5.654456" "5.5445"
 $ V3: chr  "4.12335435" "4.889999" "4.768799"
 $ V4: chr  "1" "1.45456" "1.999999"
 $ V5: chr  "asd" "qwe" "ttre" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:11:26.213

最好的方法是首先将数据作为字符读取。您可以使用`colClasses`read.table 的参数来执行此操作：

```
td <- read.table("test.csv", sep=',', colClasses="character") 
```

# caching - 从对象状态生成缓存键

> ID：14830870
> 
> 赞同：0
> 
> 时间：2013-02-12T10:55:15.623
> 
> 标签：caching, hash

**背景**

我希望纯粹存储是否已经执行了查询。如果有，则应针对数据缓存（内部数据库，进程外）运行查询，否则应针对原始数据源（第 3 方外部 Web 服务）运行查询。这种缓存的动机是允许我们对该 API 进行的调用次数是有限的，并且我们可能会多次执行相同的查询。

在对原始数据源运行一次查询后，它只会在后续调用中对缓存的数据源运行。注意：为了简单起见，我故意忽略了缓存过期的问题。

鉴于每个查询可能包含许多参数（目前只有 5 个），并且参数的数量可能会随着时间的推移而增加，我不想使用诸如*“WHERE x AND y AND z AND a AND b AND c”之类的内容来查询缓存的数据源和 d 和……”*。

为此，我只想知道这个确切的查询之前是否已经运行过，如果有，我会假设它的数据已经在缓存的数据存储中可用（尽管格式不同）。我认为某种形式的“cachekey”可以识别具有相同参数和关联值的任何查询对我有用。每次我尝试查询时，我都会根据查询对象的状态生成缓存键，并检查缓存键存储以确定查询是否曾经运行过。cachekey 存储需要促进快速查找。

**问题**

我发现棘手的是这个缓存键应该是什么样子以及如何生成它。到目前为止，我倾向于

1.  *将有趣*的查询参数及其值连接到一个字节数组中
2.  从字节数组创建一个 MD5
3.  将此缓存键存储在二进制（16）索引列中

为了争论，我愿意接受可能会导致缓存报告缓存数据可用于查询的一些冲突，而没有考虑到可能性很小（尽管我有多小） m 不是 100% 确定）。

上述创建缓存键的解决方案是否合理，或者我应该考虑其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:03:02.070

您的潜在解决方案正是我过去所做的，并且效果很好。我实际上将方法/调用名称连接起来，然后将所有参数值组合成一个字符串，然后在其上运行 MD5 并获得我的缓存密钥。

我不明白怎么可能发生碰撞。如果更改参数值，缓存键将不同，这可能会带回不同的数据。

（这么说我不确定你所说的“有趣”参数是什么意思。）

# oracle - 找出 SQL 查询的历史

> ID：14830875
> 
> 赞同：57
> 
> 时间：2013-02-12T10:55:41.237
> 
> 标签：oracle, sql-update, database-administration

在服务器上执行了更新 SQL 查询，导致后来出现很多问题。

如何获取最近 2 个月执行的更新查询列表，以便跟踪确切的有问题的 SQL 查询？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-12T11:47:10.453

```
 select v.SQL_TEXT,
           v.PARSING_SCHEMA_NAME,
           v.FIRST_LOAD_TIME,
           v.DISK_READS,
           v.ROWS_PROCESSED,
           v.ELAPSED_TIME,
           v.service
      from v$sql v
where to_date(v.FIRST_LOAD_TIME,'YYYY-MM-DD hh24:mi:ss')>ADD_MONTHS(trunc(sysdate,'MM'),-2) 
```

`where`子句是可选的。您可以根据FIRST_LOAD_TIME对结果进行排序，找到最多2个月前的记录。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-10-13T22:49:57.560

对于最近的 SQL：

```
select * from v$sql 
```

对于历史：

```
select * from dba_hist_sqltext 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-05T04:32:13.410

您可以使用此 sql 语句来获取任何日期的历史记录：

```
SELECT * FROM V$SQL V where  to_date(v.FIRST_LOAD_TIME,'YYYY-MM-DD hh24:mi:ss') > sysdate - 60 
```

# entity-framework - MVC4 Entity Framework 5 多对多将实体保存到数据库

> ID：14830878
> 
> 赞同：2
> 
> 时间：2013-02-12T10:55:45.663
> 
> 标签：entity-framework, asp.net-mvc-4

嗨，我一直坚持这个问题。我看过很多例子，但我找不到我要找的东西。任何帮助表示赞赏。

我使用代码优先的方法。

我已启用迁移并且数据库很好 [学生] - [学生课程] - [课程]。

**场景**：我有两个实体 -> 学生

> ```
> public class Student
> {
>     public int Id { get; set; }
>     public string Name { get; set; }
>     public virtual List<Course> Courses { get; set; }
> } 
> ```

和课程

> ```
> public class Course
> {
>     public int Id { get; set; }
>     public string Name { get; set; }
>     public string Description { get; set; }
>     public virtual List<Student> Students { get; set; }
> } 
> ```

没什么好看的...我创建了一个 ViewModel ->

> ```
> public class StudentCourseViewModel
> {
>     public int Id { get; set; }
>     public string Name { get; set; }
> 
>     public List<Course> Courses { get; set; }
> } 
> ```

**看法：**

> @model Project.Web.Models.StudentCourseViewModel @{ ViewBag.Title = "Edit"; }
> 
> ## 编辑
> 
> @using (Html.BeginForm()) { @Html.ValidationSummary(true)
> 
> ```
> <fieldset>
>     <legend>Student</legend>
> 
>     @Html.HiddenFor(model => model.Id)
> 
>     <div class="editor-label">
>         @Html.LabelFor(model => model.Name)
>     </div>
>     <div class="editor-field">
>         @Html.EditorFor(model => model.Name)
>         @Html.ValidationMessageFor(model => model.Name)
>     </div>
> 
>     <div class="editor-label">
>         @Html.LabelFor(model => model.Courses)
>     </div>
>       <div class="editor-field">
>     @for (int i = 0; i < Model.Students.Count(); i++)
>     {
>         <div style="border: dotted 1px; padding: 5px; margin: 10px;">
>             @Html.HiddenFor(s => s.Students[i].Id)
> 
>             @Html.LabelFor(s => s.Students[i].Name[i + 1])
>             @Html.EditorFor(s => s.Students[i].Name)
>         </div>
>     }
> </div>
> 
>     <p>
>         <input type="submit" value="Save" />
>     </p>
> </fieldset> } 
> ```

**控制器动作：**

> ```
>  [HttpPost]
>     public ActionResult Edit(CourseStudentViewModel model)
>     {
>         var course = db.Courses.Find(model.CourseId);
>         course.Name = model.CourseName;
>         course.Description = model.CourseDescription;
>         course.Students = model.Students;
> 
>         if (ModelState.IsValid)
>         {
> 
>             db.Entry(course).State = System.Data.EntityState.Modified;
>             db.SaveChanges();
> 
>             return RedirectToAction("Index");
>         }
> 
>         return View(model);
>     } 
> ```

（也许这是我出错了......）

无论如何，***我想创建一个包含许多可选课程的新学生***（文本框-> courseName）

我该怎么做？

主要问题是我总是从我的视图 [httpPost]Create -action 中得到空值（学生很好，课程列表 = NULL）。

我需要指导如何使这种方法成为可能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:22:32.723

您的实体未正确设置多对多关系。您需要另一个实体来处理多对多映射。它看起来像这样。

```
public class StudentsToCourses
{
   public int StudentId {get; set;}
   public int CourseId {get; set;}

   public virtual Student Student {get; set;}
   public virtual Course Course {get; set;}
} 
```

那么你的学生模型应该改为这个。

```
public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual List<StudentsToCourses> Courses { get; set; }
} 
```

你的课程模型变成了这个。

```
public class Course
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual List<StudentsToCourses> Students { get; set; }
} 
```

您还需要使用[Fluent API](http://msdn.microsoft.com/en-us/library/hh295844%28v=vs.103%29.aspx)设置外键关系。它看起来像这样。

```
public class StudentsToCoursesConfiguration : EntityTypeConfiguration<StudentsToCourses>
{
    internal StudentsToCoursesConfiguration ()
    {
        this.HasKey(p => new {p.StudentId, p.CourseId});
        this.HasRequired(p => p.Student)
            .WithMany(p => p.Courses)
            .HasForeignKey(p => p.StudentId);
        this.HasRequired(p => p.Course)
            .WithMany(r => r.Students)
            .HasForeignKey(p => p.CourseId);

    }
} 
```

# html5-canvas - 每当我们单击图像时如何隐藏锚点并显示锚点

> ID：14830879
> 
> 赞同：2
> 
> 时间：2013-02-12T10:55:49.677
> 
> 标签：html5-canvas, kineticjs

谁能告诉我如何使用 kinetic.js 在画布中隐藏锚点并在我们单击图像时显示锚点。例如[检查这个链接](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)，我们可以隐藏锚点。我已经完成了应用程序，我需要在单击画布后隐藏锚点，我可以拍摄图像数量，并且可以拖放、重新调整大小并将它们保存为图像。我试图隐藏锚但不成功，任何人都可以指导我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:46:41.610

这不是一个完整的解决方案，但看看：http: [//jsfiddle.net/n9FLA/1/](http://jsfiddle.net/n9FLA/1/)

您要做的是附加事件处理程序，以便从组中添加或删除锚点。查看您提供的链接，您应该进行如下更改：

```
 yodaGroup.on('mouseover', function(){
         addAnchor(yodaGroup, yodaImg.getX(), yodaImg.getY(), 'topLeft');
         addAnchor(yodaGroup, yodaImg.getX()+yodaImg.getWidth(), yodaImg.getY(), 'topRight');
         addAnchor(yodaGroup, yodaImg.getX()+yodaImg.getWidth(), yodaImg.getY()+yodaImg.getHeight(), 'bottomRight');
         addAnchor(yodaGroup, yodaImg.getX(), yodaImg.getY()+yodaImg.getHeight(), 'bottomLeft');
         layer.draw();
    });
    yodaGroup.on('mouseout', function(){
        var yodaKids = yodaGroup.getChildren();
        for(var i=1; i<yodaKids.length; i++)
              yodaKids[i].hide(); // .remove() would also work, or .destroy()
        layer.draw();
    }); 
```

你必须构建逻辑并选择你想要的事件，但这是你可以做到的。

# pdf - PDF 的高质量替代品

> ID：14830880
> 
> 赞同：0
> 
> 时间：2013-02-12T10:55:53.800
> 
> 标签：pdf

我们正在尝试找出创建 Web 服务的最佳方式，该服务可向远程平板电脑和桌面客户端提供高质量的教科书。这些书籍受版权保护并出售给用户，因此必须尽可能保护交付以防止复制。书的排版非常复杂，有大量的图像、图片、纹理、表格、图表等。它们由 InDesign 以 PDF 格式制作。

到目前为止，我们最好的猜测是将 PDF 存储在单页中（每页一个 PDF）并使用非对称密钥对它们进行加扰，因此所有解密都可以在内存中处理，而不会生成临时文件。

我们担心 PDF 是一种专有格式，有时文件太大（质量是客户的一个重要问题）。

是否有任何替代 PDF 的开源替代方案，能够在较小的文件中提供高质量、复杂的布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:15:29.670

如果要离线查看，解决此问题的唯一方法是加密文档并颁发许可证密钥以使其可见。

有商业软件包允许您执行此操作，使您能够将许可证限制为机器、用户或时间段。

最终，你无法阻止人们想出巧妙的方法来复制它，只是让它变得更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T09:57:08.383

您可以使用高质量的光栅图像作为 PDF 替代品。

# magento - 覆盖核心块

> ID：14830884
> 
> 赞同：0
> 
> 时间：2013-02-12T10:56:06.967
> 
> 标签：magento

我正在尝试覆盖 Mage_Core_Block_Messages 我正在创建模块 Mycompany_Core.xml 并保存在路径 app/etc/modules/Mycompany_Core.xml

```
<?xml version="1.0"?>
  <config>
    <modules>
       <Mycompany_Core>
          <active>true</active>
          <codepool>local</codepool>
      </Mycompany_Core>
    </modules>
 </config> 
```

接下来我在 app/code/local/Mycompany/Core/Block/Messages.php 中创建

```
class Mycompany_Core_Block_Messages extends Mage_Core_Block_Messages
{
//update method
} 
```

并在 app/code/local/Mycompany/Core/etc/config.xml 中添加 config.xml

```
<config>
    <modules>
        <Mycompany_Core>
            <version>0.0.1</version>
        </Mycompany_Core>
    </modules>

    <global>
        <blocks>
            <core>
                   <rewrite>
                        <messages>Softdk_Core_Block_Messages</messages>
                    </rewrite>
            </core>
        </blocks>
     </global>
</config> 
```

但是我在前端看不到任何结果，我想知道我在哪里犯了错误。谢谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:08:55.467

有两件事引起了我的注意。

1.）在您模块的注册文件中，它应该是`codePool`而不是`codepool`（正如大卫在评论中所说）

2.) 是什么`Softdk`？如果这是您的新模块的名称，则替换`Mycompany`为`Softdk`模块中的任何位置。

清除缓存，瞧！

# java - 对象的内存使用情况

> ID：14830885
> 
> 赞同：0
> 
> 时间：2013-02-12T10:56:07.580
> 
> 标签：java, object, memory, space

如果我有一个对象并且想要粗略估计对象的大小与其组件的大小相比，我可以这样做吗？

Object 有一个 int 字段和一个 float 字段。因此，该对象的空间使用量是对该对象的引用大小（8）字节 + 两个原始值 16+16 的大小，这使我需要 40 字节或 25% 的额外空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:01:14.377

检查对象大致大小的一种方法是创建该对象的许多实例并检查前后的内存。要获得更准确的数字，您可以使用特定的 JVM 参数：

```
-verbose:gc -XX:-UseTLAB 
```

*   `verbose:gc`确保在测量过程中不发生 GC
*   `-XX:-UseTLAB`要求JVM不要以块的形式分配内存（否则它会这样做以提高效率）。关闭该选项可提供更准确和稳定的结果。

`Runtime.getRuntime().freeMemory();`然后，您可以通过在分配前后调用来监控内存使用情况。

请注意，添加字段并不一定会增加内存使用量。例如，在热点 7 64 位上，一个对象在内存中占用 16 个字节，但`int`向该对象添加一个字段不会改变大小（即，保存一个`int`字段的对象在该 JVM 上也是 16 个字节）。这是由于内存对齐限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:01:13.153

您可以使用 java.lang.instrumentation 包：

[http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html)

它有一种方法可用于获取特定于实现的对象大小的近似值，以及与对象相关的开销。

谢尔盖链接的答案有一个很好的例子，我将在这里重新发布，但你应该已经从他的评论中看到了：

```
import java.lang.instrument.Instrumentation;
public class ObjectSizeFetcher {
private static Instrumentation instrumentation;

public static void premain(String args, Instrumentation inst) {
    instrumentation = inst;
}

public static long getObjectSize(Object o) {
    return instrumentation.getObjectSize(o);
}
} 
```

使用 getObjectSize：

```
public class C {
private int x;
private int y;

public static void main(String [] args) {
    System.out.println(ObjectSizeFetcher.getObjectSize(new C()));
} 
```

}

# python - Django、Apache 和会话

> ID：14830889
> 
> 赞同：2
> 
> 时间：2013-02-12T10:56:18.410
> 
> 标签：python, django, apache, session, web

如何确保 Apache 重启（或停止和启动）后会话不被清除？

因为当我升级我的源代码并重新启动 Apache 时，我刷新了网页，我必须再次登录。会话丢失。

会话存储在 Memcache 中。不知道它是如何以及为什么被清除的。如何保留会话以便用户在 apache 重启后无需登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:10:57.690

根据[Django 文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs)。

> 对于持久的缓存数据，设置`SESSION_ENGINE`为“ `django.contrib.sessions.backends.cached_db`”。这使用直写缓存——每次写入缓存也将写入数据库。如果数据尚未在缓存中，则会话读取仅使用数据库。

# c# - Linq 到实体查询优化

> ID：14830893
> 
> 赞同：0
> 
> 时间：2013-02-12T10:56:46.060
> 
> 标签：c#, optimization, linq-to-entities

我的数据库中有 3 个正在使用的表：

1.  `Theme [Theme_ID]`
2.  `ThemeWorkplace [Theme_ID, Workplace_ID, ThemeWorkplace_ID]`
3.  `UserTheme [User_ID, Theme_ID, UserTheme_ID, UserTheme_AccessType]`

我需要为当前工作场所`UserTheme_AccessType`中的所有人以及使用. 如果主题对于此类用户和此类主题没有行- 我需要创建它。`UserTheme.Theme_ID``ThemeWorkplace.Workplace_ID = 2``User_ID = 1``UserTheme`

我写了这样的代码，但它的工作时间太长了：

```
var themeList = (from t in m_Entities.Theme
                    where (from tw in m_Entities.ThemeWorkplace
                        where tw.Workplace.Workplace_ID == 2
                        select tw.Theme.Theme_ID).Contains(t.Theme_ID)
                            select t)
                .ToList();

foreach (Theme theme in themeList)
{
    var oldUserTheme = GetByUserTheme(user/*user is given*/, theme);

    if (oldUserTheme == null)
    {
        /* create new User Theme with params, that I need*/
        this.Add(newUserTheme, true);
    }
    else
    {
        /* here - changing found row */
        oldUserTheme.UserTheme_AccessType = 2;
    }
} 
```

我了解此代码访问数据库的次数过多。我想找到一种方法来摆脱：

```
var oldUserTheme = GetByUserTheme(user/*user is given*/, theme); 
```

在每次`foreach`迭代中。有人可以帮我吗？

添加GetByUserTheme()的代码：

```
private UserTheme GetByUserTheme(User user, Theme theme)
{
    return m_Entities.UserTheme.FirstOrDefault(ut => ut.User.User_ID == user.User_ID && ut.Theme.Theme_ID == theme.Theme_ID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:45:10.753

我不知道我是否完全理解你的问题和结构。但根据我所看到的，这可能是一个合理的解决方案吗？

首先，您选择 ID 等于 2 的工作场所。从该结果中选择主题 ID。所有在前一个结果中出现的 themeID 的用户主题都将被选入“userThemes”。从那里，您迭代结果，如果 userID 为空，则创建一个新的 UserTheme，否则更新它。

*快速说明：*下面的代码不是真正的工作代码。这只是我写的代码来举例说明我的解释，如果你愿意的话，是一种伪代码.. :)

```
var userThemes = entities.Userthemes
                         .Where(ut => entities.Workplaces
                                              .Where(w => w.WorkPlaceID == 2)
                                              .Select(s => s.ThemeID)
                                              .Contains(ut.ThemeID));

foreach (UserTheme ut in userThemes)
{
    if (ut.UserID.ToString() == "")
    {
        //Create
    }
    else
        ut.UserThemeAccessType = 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:55:33.283

第一：您在代码中对实体所做的所有更改都将在您调用`context.SaveChanges`. 因此，您将对数据库有一个选择请求和一个更新请求。

但是在您的批处理命令中将有许多 sql 查询，因为 EF 会为更新实体一一生成 sql（不是全部合二为一）。

如果你想更新数据库中的很多记录，你应该使用 sql 脚本（调用存储过程或执行 sqlquery）而不是使用 EntityFramework。

# ios - 在 iOS6.0 上使用 FBNativeDialogs 发布到 facebook 时出现不一致的崩溃

> ID：14830894
> 
> 赞同：13
> 
> 时间：2013-02-12T10:56:49.183
> 
> 标签：ios, objective-c, facebook-ios-sdk, fbnativedialogs

我已经在这个问题上苦苦挣扎了一段时间，但我似乎无法足够准确地重现它来描述确切的用例。本质上，我正在做的是发出打开本机 iOS 6.0 Facebook 共享对话框的请求（使用 Facebook iOS SDK 3.1.1）：

```
if ([[SocialManager sharedManager] isNativeFacebookShareDialogAvailable]) {

        if (!url) {
            url = [NSURL URLWithString:@""];
        }

        if (!imageUrl) {
            imageUrl = [NSURL URLWithString:@""];
        }

        dispatch_async(backgroundQueue, ^{

            NSData *imageData  = [NSData dataWithContentsOfURL:imageUrl];
            UIImage *image     = [UIImage imageWithData:imageData];

            if (!image) {
                image = [[UIImage alloc] init];
            }

            if ([FBNativeDialogs canPresentShareDialogWithSession:[FBSession activeSession]]) {

                dispatch_async(dispatch_get_main_queue(), ^{
                    [FBNativeDialogs presentShareDialogModallyFrom:sender initialText:initialText images:@[image] urls:@[url] handler:^(FBNativeDialogResult result, NSError *error) {
                        if (error) {
                            failBlock([[error userInfo] description]);
                        } else {
                            if (result == FBNativeDialogResultSucceeded) {
                                completionBlock();
                            } else if (result == FBNativeDialogResultCancelled) {
                                failBlock(@"User cancelled");
                            } else if (result == FBNativeDialogResultError) {
                                failBlock(@"Unknown error");
                            }
                        }
                    }];
                });

            } else {
                LogErr(@"Can't display native share dialog for active session");
            }
        });
    } 
```

在`presentShareDialogModallyFrom:sender`被调用之后，我要么得到以下崩溃日志：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSArrayM: 0x1d161490> was mutated while being enumerated.'
*** First throw call stack:
(0x32ede2a3 0x326b097f 0x32eddd85 0x35da094d 0x32edb62f 0x35da07f5 0x35e7e5e5 0x35e0ccd7 0x35e0cb6d 0x372c490f 0x35e0ca61 0x35e160d5 0x372b783b 0x35e160b1 0x372b711f 0x372b699b 0x372b6895 0x372c5215 0x372c53b9 0x36f5fa11 0x36f5f8a4)
libc++abi.dylib: terminate called throwing an exception 
```

**或者**我没有崩溃，并且本机共享对话框按原样出现。

堆栈意味着在此时调用的线程上调用`UIRemoteViewControllerCreationRequest`，这里有**两个不同崩溃**的示例： ![在此处输入图像描述](../Images/bea4af41ae4698d07f190cfc6c2833bc.png) ![在此处输入图像描述](../Images/2d15dea345490806fe7a22ccabff4f87.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T08:57:23.780

在对我的应用程序进行大量试验并查看 Facebook SDK 源代码后，我意识到了 3 件事：

1.  自己创建一个`SLComposeViewController`没有帮助。Facebook SDK 在这方面非常简单，它只是创建与答案中的代码完全相同的控制器，并带有奖励。

2.  当您授权 FB 会话时，您的应用程序会被停用一次或多次。这是由出现的权限确认警报引起的。

3.  这`UIRemoteViewController`实际上`SLComposeViewController`是在不同的进程中运行的。

是什么导致了我的错误？

1.  用户确认 FB 权限
2.  这触发`applicationDidBecomeActive:`
3.  它还触发 FB 回调以呈现对话框。
4.  我`applicationDidBecomeActive:`正在对 UI 做一些在 FB 对话框出现时不应该做的事情（触发表重新加载）。

此外，还有一件事需要注意 - 处理程序`presentShareDialogModallyFrom...`不会在任何特定线程上调用（请参阅`SLComposeViewController`文档）。这意味着`dispatch_async(dispatch_get_main_queue(), ...)`如果您从处理程序更新 UI，则应该使用处理程序。

编辑：显然，前面的步骤修复了一些崩溃，但其中一个崩溃没有解决。经过大量谷歌搜索和苹果开发者论坛，我认为 iOS 6 与遥控器连接和使用存在一个错误`UIAppearance`，尤其是`UINavigationBar`. 我目前正在`UIApperance`从我的应用程序中删除使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T13:18:49.757

这是将帖子发布到 Facebook 的一种非常奇怪的方式。这是一种永远不会崩溃的更简单的方法。

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <Social/Social.h>
#import <Accounts/Accounts.h>

@interface ViewController : UIViewController {
SLComposeViewController *mySLComposerSheet;
}
- (IBAction)PostToFacebook:(id)sender;

@end 
```

ViewController.m @implementation ViewController

```
- (IBAction)PostToFacebook:(id)sender {
mySLComposerSheet = [[SLComposeViewController alloc] init];
mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
[mySLComposerSheet setInitialText:@"Place Text Here"];
[self presentViewController:mySLComposerSheet animated:YES completion:nil];
}
@end 
```

如果需要，这里有一个视频[。](http://www.youtube.com/watch?v=Ck001hDnp-Q)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:14:06.080

抱歉，其中一些是相当猜测，但我想我会尝试：

您确定可以安全地从非 UI 线程调用 canPresentShareDialogWithSession 吗？

在 _NSDictionaryEnumerate 的两个堆栈中都有一行。从高级函数看来，有些东西正在调用 enumerateKeysAndObjectsUsingBlock:。

根据您在 [presentShareDialogModallyFrom:sender] 之后发生的崩溃记录。当发件人的视图消失时，是否有东西被释放？

变量“图像”是保留还是自动释放，具体取决于它采用的代码路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T08:45:11.767

我认为问题在于沃尔特已经说过。在您的代码中，某些事情是在主线程之外完成的。

在崩溃日志中，您可以看到有人在非 UI 线程的某个 UI 元素上设置外观 (UIAppearance)。那就是问题所在。此操作必须仅在 UI（主）线程中完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T20:08:48.787

我相信这与 UIAppearance 方法的组合和从后台线程启动 UIRemoteViewController 有关。我们在我们的应用程序中遇到了同样的问题。我将更改我们的演示者类以从主线程呈现我们所有的远程视图控制器，看看是否有帮助。

在您的情况下，我猜 Facebook SDK 中的某些内容正在从后台线程中呈现某些内容。

在我确认我的修复有效后，我会更新。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-27T12:41:05.960

这是 iOS 6 和 Social Framework 中的错误，请在此处查看答案[UINavigationBar 外观和 Facebook-Sheet 错误](https://stackoverflow.com/questions/16256399/uinavigationbar-appearance-and-facebook-sheet-bug)

**如何解决这个问题？**

简单地而不是使用`[UINavigationBar appearance]`use`[UINavigationBar appearanceWhenContainedIn:...]`

您可以为您的导航控制器使用自定义类（例如 CustomNavigationController），然后在外观中应用它：

`[UINavigationBar appearanceWhenContainedIn:[CustomNavigationController class], nil]`

从我的实验来看，它应该用于所有方法，`appearance`不仅是等等（在你发送消息的每个对象上）`UINavigationBar``UIBarButtonItem``appearance`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-16T00:53:35.610

我想你知道什么是显而易见的，但我曾经遇到过这个错误，它是一个 NSMutableArray，它在 for..in 语句中被枚举时发生了变异。

查看 NSMutableArray，你会发现你的错误。

顺便说一句，如果你的目标是 ios6，你为什么不使用带有原生 facebook 实现的社交框架呢？

# javascript - 将数组值添加到键 javascript

> ID：14830897
> 
> 赞同：3
> 
> 时间：2013-02-12T10:56:59.437
> 
> 标签：javascript, multidimensional-array, key, add

当它像这样提交时，我正在从表单中获取数据

```
 values = {};

        $("#myForm").submit(function(){
            $.each($('#myForm').serializeArray(), function(i, field) {
                if(field.name != 'r'){
                    values[field.name] = field.value;

                }
            }); 

            return false;
        }); 
```

问题是我想多次这样做并使用 field.name 作为键将所有数据存储在 var 值中，并将值作为数组在 php 中进行比较我会做 values[field.name][] =字段值；js中有没有类似的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:59:31.733

`Array.push`是的，您可以使用该方法添加多个值。但首先，您必须定义`values[field.name]`为数组，如下所示：

```
values[field.name] = [];
values[field.name].push(somevalue); 
```

# c# - 使用 protobuf-net 生成 C# 时保留 proto 注释

> ID：14830900
> 
> 赞同：5
> 
> 时间：2013-02-12T10:57:04.193
> 
> 标签：c#, .net, protocol-buffers, protobuf-net, documentation-generation

我们正在使用[protobuf-net](http://code.google.com/p/protobuf-net/)来处理 C# 应用程序中的 Protocol Buffer 需求。由于我们与其他非托管应用程序共享我们的 .proto 文件，因此我们从 .proto 文件生成我们的代码（不使用代码优先的 protobuf-net 方法）。为了尽可能保持[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，我们在 .proto 文件本身中保留了很多接口文档。我们通过项目构建目标调用的 protogen.exe 生成 C# 代码。

现在，有没有办法（自动）将这些注释转移到已编译的 C# 代码中？

基本上，给定一个像这样的 .proto ：

```
// This message is used to request a resource from the server
message GetResource
{
    // The identifier of the requested resource 
    required string resourceId = 1;
} 
```

...我想要这样的东西（为了便于阅读，省略了 IExtensible 方法）：

```
/// <summary>
/// This message is used to request a resource from the server
/// </summary>
[global::System.Serializable,global::ProtoBuf.ProtoContract(Name=@"GetResource")]
public partial class GetResource : global::ProtoBuf.IExtensible
{
    public GetResource() {}

    private string _resourceId;

    /// <summary>
    /// The identifier of the requested resource 
    /// [Required] <-- Would be nice...
    /// </summary>
    [global::ProtoBuf.ProtoMember(1, IsRequired = true, Name=@"resourceId", 
    DataFormat = global::ProtoBuf.DataFormat.Default)]
    public string ResourceId
    {
        get { return _resourceId; }
        set { _resourceId = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T20:41:00.777

实际上当前版本确实支持评论。它可以通过 --include_source_info 启用。

评论在 descriptor.Location[n].leading_comments 和 trailing_comments 中可用： [https ://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/descriptor.proto](https://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/descriptor.proto)

我已将相应的属性添加到 protobuf-net Location 类中：

```
private string _leading_comments = "";
[global::ProtoBuf.ProtoMember(3, IsRequired = false, Name = @"leading_comments", DataFormat = global::ProtoBuf.DataFormat.Default)]
[global::System.ComponentModel.DefaultValue("")]
public string leading_comments
{
    get { return _leading_comments; }
    set { _leading_comments = value; }
}

private string _trailing_comments = "";
[global::ProtoBuf.ProtoMember(4, IsRequired = false, Name = @"trailing_comments", DataFormat = global::ProtoBuf.DataFormat.Default)]
[global::System.ComponentModel.DefaultValue("")]
public string trailing_comments
{
    get { return _trailing_comments; }
    set { _trailing_comments = value; }
} 
```

并将 --include_source_info 添加到 protoc 调用 (ProtoBuf.CodeGenerator.InputFileLoader)

并将带有注释的位置添加到生成的 xml 中：

```
<?xml version="1.0" encoding="utf-16"?>
<FileDescriptorSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <file>
    <FileDescriptorProto>
      <name>Test.proto</name>
      <dependency />
      <message_type>
        <DescriptorProto>
          <name>Test2</name>
          <field>
            <FieldDescriptorProto>
              <name>IntValue</name>
              <number>1</number>
              <type>TYPE_INT32</type>
            </FieldDescriptorProto>
          </field>
          <extension />
          <nested_type />
          <enum_type />
          <extension_range />
        </DescriptorProto>
      </message_type>
      <enum_type />
      <service />
      <extension />
      <source_code_info>
        <location>
...
        <Location>
            <path>
              <int>4</int>
              <int>0</int>
              <int>2</int>
              <int>0</int>
            </path>
            <span>
              <int>1</int>
              <int>0</int>
              <int>28</int>
            </span>
            <trailing_comments> some comment
</trailing_comments>
          </Location>
...
          </location>
      </source_code_info>
    </FileDescriptorProto>
  </file>
</FileDescriptorSet> 
```

源.proto：

```
message Test2{
optional int32 IntValue = 1;// some comment
} 
```

但我不擅长 xslt 更新 ProtoGen/csharp.xslt 以将注释包含到生成的 CS 文件中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:58:58.747

目前，我相信答案是否定的。据我所知，“protoc”（Google 用于解析 .proto 文件的工具，在后台使用）会默默地丢弃评论 - 因此没有任何可读取的内容。如果编写了自定义解析器，那么是可能的，但是对于哪些注释适用于哪些行也存在语言歧义，例如：

```
// this probably relates to resourceId
required string resourceId = 1;

required int foo = 2; // but... is this foo? or bar?
                      // and what about this?

       // what does this relate to? and why?

// and this? what are the rules?
required int bar = 3; 
```

所以有两个不同的原因：目前，没有。不过，所有建议都考虑在内......特别是如果它们带有自定义解析器:)

请注意，由于这个原因，大多数（所有？）实现都缺少 AFAIK 的此信息。不过，我很高兴得到纠正。

# c++ - windows 在从中检索值之前如何执行完整性检查？

> ID：14830908
> 
> 赞同：0
> 
> 时间：2013-02-12T10:57:24.027
> 
> 标签：c++, windows, registry, password-protection, password-recovery

嗨，我想知道 Windows 在读取它之前如何对注册表值执行完整性检查。

当我在 Windows 注册表中更改缓存的域凭据时，我从以下键 HKEY_LOCAL_MACHINE\SECURITY\CACHE\NL$1 ... NL$10 中获取了这些值。

我已经使用 NL$KM 键值对其进行了解码，并转储了存储的密码哈希。我希望用我自己新生成的哈希来更改哈希。但是 Windows 有点棘手，他们添加了最终校验和验证来验证它，我希望但不确定。因此，当系统未与域连接时，有任何方法可以更改哈希并使系统脱机工作。

这是执行此操作的代码：

**对缓存技术进行加密或解密取决于 Windows 操作系统版本**

```
int cryptData(LPBYTE in,LPBYTE out,DWORD dataSize,CRYPT_KEYS *keys,CRYPT_TYPE cType) {
 RC4_KEY rc4_ctx;
 AES_KEY aes_ctx;
 BYTE aes_iv[16];

 RtlMoveMemory(aes_iv,keys->aes_iv,sizeof(keys->aes_iv));

 switch(cType) {
  case ENCRYPT:
   if(keys->version<6) {
    HMAC(EVP_md5(),keys->nl$km,sizeof(keys->nl$km),keys->hmac_message,sizeof(keys->hmac_message),keys->rc4_key,NULL);
    RC4_set_key(&rc4_ctx,MD5_DIGEST_LENGTH,keys->rc4_key);
    RC4(&rc4_ctx,dataSize,in,out);
   }
   else {
    AES_set_encrypt_key(keys->nl$km,128,&aes_ctx);
    AES_cbc_encrypt(in,out,dataSize,&aes_ctx,aes_iv,AES_ENCRYPT);
   }    
   break;
  case DECRYPT:
   if(keys->version<6) {
    HMAC(EVP_md5(),keys->nl$km,sizeof(keys->nl$km),keys->hmac_message,sizeof(keys->hmac_message),keys->rc4_key,NULL);
    RC4_set_key(&rc4_ctx,MD5_DIGEST_LENGTH,keys->rc4_key);
    RC4(&rc4_ctx,dataSize,in,out);
   }
   else {
    AES_set_decrypt_key(keys->nl$km,128,&aes_ctx);
    AES_cbc_encrypt(in,out,dataSize,&aes_ctx,aes_iv,AES_DECRYPT);
   }
   break;
  }
return 0; 
```

}

**生成新的密码哈希：[仅供参考：其可靠]**

```
 HashGen hash(username,password,this->getOSVersion()); 
```

**用新密码哈希替换旧密码哈希并再次加密它们：**

```
 RtlMoveMemory(decipheredData,hash.getHashDigest(),NTLM_HASH_SIZE);
 RtlZeroMemory(cipheredData,cachedAccount->cacheSize);

 cryptData(decipheredData,cipheredData,cachedAccount->cacheSize,&keys,ENCRYPT);
 RtlMoveMemory(cachedAccount->cache+96,cipheredData,cachedAccount->cacheSize-96); 
```

**将它们全部写回注册表中：*[仅供参考：实际上我正在通过系统帐户工作正常]***

```
 HKEY    hOpenedKey;
 DWORD   status,nMaxLength; 
 if( ERROR_SUCCESS == RegOpenKeyEx(HKEY_LOCAL_MACHINE,L"security\\cache",0,KEY_WRITE,&hOpenedKey) ) {
  int status = RegSetValueEx(hOpenedKey,L"nl$1",0,REG_BINARY,cachedAccount->cache,cachedAccount->cacheSize ); 
  if( status != ERROR_SUCCESS ) { 
   printf("cache Update failed ...");
   RegCloseKey( hOpenedKey );
  }
  else {
   RegCloseKey( hOpenedKey );
   printf("cache Updated successfully ...");
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T21:53:07.487

有两个校验和，一个在 unenc 部分，一个在尾部。

# .htaccess - 通过 CMS 管理的子目录的 htaccess 重定向 URL

> ID：14830910
> 
> 赞同：0
> 
> 时间：2013-02-12T10:57:31.533
> 
> 标签：.htaccess, redirect, content-management-system, seo

我们网站的所有网址都是写的`www.mydomain.com/sub1/cms/pagename`

通过CMS我们可以指定`pagename`

`sub1` 并且`cms` 实际上不是服务器上的目录。

我们需要更改页面名称以对 SEO 更友好，但我们仍然希望旧页面名称的任何流量都指向新页面名称。

我尝试制作一个 .htaccess 文件，指定：

```
Redirect 301  /sub1/cms/oldpagename mydomain.com/sub1/cms/newpagename 
```

但它不起作用。

我已经成功：

```
Redirect 301  /oldpagename mydomain.com/sub1/cms/newpagename 
```

这可以通过.htaccess 以某种方式完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:43:17.210

首先，确保您的 301 重定向规则使用完整的 url，包括 http:// 部分。

```
Redirect 301 /sub1/cms/oldpagename http://mydomain.com/sub1/cms/newpagename 
```

其次，在我看来，您的 CMS 已经设置了重写规则来处理 /sub1/cms/pagename 样式的 url。如果此规则出现在您的重定向之前，您的重定向将永远不会被触发。尝试将重定向移动到 .htaccess 文件的顶部。

# iphone - 为 ipad 复制 xib 后 GUI 不正确？

> ID：14830913
> 
> 赞同：1
> 
> 时间：2013-02-12T10:57:41.237
> 
> 标签：iphone, ios, xcode, ipad, xib

我已经通过复制目标将 iphone xib 复制到 iPad xib 中，现在我的大部分 xib 都已正确转换为 iPad 大小，但是一些 xib 仍仅显示为 iphone 大小。除了大多数 GUI 功能（如 Alert View 显示、Action sheet）都不是 iPad 的。我需要进行哪些更改才能完美地为 iPad 工作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

编辑：GUI问题我在该操作表中给出了两个选项是和否，只有显示否的是隐藏在某处..

![在此处输入图像描述](../Images/5d8ec1134120428225b1d53772fb3984.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:26:05.783

当应用程序启动时，您没有加载正确的 NIB。这是 Xcode “Single View” App Template 提供的代码，它检测设备并加载相应的 NIB 文件：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[MainViewController alloc] initWithNibName:@"MainViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[MainViewController alloc] initWithNibName:@"MainViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:09:11.750

问题不在于转换，而在于 ipad 中操作表的使用。检查如何在 ipad 中使用操作表，

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)

它可能会解决您的问题

# java - 静态和非静态的误差

> ID：14830920
> 
> 赞同：0
> 
> 时间：2013-02-12T10:58:18.730
> 
> 标签：java

我对何时使用`public static void xxx()`和感到困惑`public void xxx()`。我得到的错误是在主类中。

**生成随机数（）；**

> 错误：（错误：无法从静态上下文引用非静态方法 generateRandomNumber()）

**获取用户输入（）；**

> 他错误：（错误：无法从静态上下文引用非静态方法 getUserInput()）

**得到结果（）；**

> 错误：（错误：无法从静态上下文引用非静态方法 getResult()）

```
public class HighLowGame {
 int randomNumber;
 int guess;

public void generateRandomNumber(){
    randomNumber =  (0+(int)(Math.random() * ((0 - 99) + 1)));
}

public void getUserInput(){
    guess = Integer.parseInt(JOptionPane.showInputDialog(
           null,
           "Plaese input"));        
}

public String getResult(){
    if(randomNumber<guess){
       return "Your number is bigger than magic number";
   }
   else if (randomNumber>guess) {
       return "Your number is smaller than magic number";
   }
   else {
       return "You are correct! "+randomNumber;
   }
}

public static void main(String[] args){
    generateRandomNumber();
    getUserInput();
    getResult();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:00:41.697

您不能直接从静态上下文访问非静态实例方法/变量。你将需要你的类的一个实例来访问它们。

```
public static void main(String[] args){
    HighLowGame  ref = new HighLowGame ();
   ref. generateRandomNumber();
    ref.getUserInput();
    ref.getResult();
} 
```

或者您可以将所有这些方法**设为静态**并直接访问它们。当您认为该类的所有实例都应该共享日期/方法时，将方法设为静态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:01:12.333

您正在尝试调用需要一个实例`HighLowGame`才能工作的方法。

将您的主要方法更改为：-

```
public static void main(String[] args){
    HighLowGame game = new HighLowGame();
    game.generateRandomNumber();
    game.getUserInput();
    game.getResult();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:01:22.983

您必须在 HighLowGame 的实例上调用方法。

```
public static void main(String[] args){
    HighLowGame game = new HighLowGame();
    game.generateRandomNumber();
    game.getUserInput();
    game.getResult();
} 
```

或声明您的方法`static`，例如

```
public static void generateRandomNumber(){ ..} 
```

# java - 在 hql 中使用 kew 单词“new”时避免多次选择

> ID：14830922
> 
> 赞同：0
> 
> 时间：2013-02-12T10:58:39.850
> 
> 标签：java, hibernate, select, hql, named-query

我在java中有以下代码。

`List<UserHelper> users=List<UserHelper>)session.getNamedQuery("PkUser.loadHelperUsers").list();`,

我认为“UserHelper”类是什么并不重要，这就是我不写它的原因，而不是让我的问题超载。这是我上面提到的namedQuery。

```
 @NamedQuery(name = "PkUser.loadHelperUsers", query = "SELECT  new ge.tec.pto.ext.helpers.UserHelper(u) from PkUser u order by u.pkUserId desc"), 
```

问题是 hql 选择了太多行，我认为 pk_user 表中数据库中的行数相同。如果有人知道如何解决这个问题，请通知我。如果解决方案不需要更改我的“NamedQuery”，那就太好了，如果我只需要更改我的查询创建，那就太好了，但是任何解决方案都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:18:48.583

```
Multiple selects when using Key word “`new`” in `hql`

There is no problem with your code and with NEW keyword . 
```

您的查询将相关`return`的所有行`UserHelper``Table`

您应该使用 WHERE 子句来获取所需的行。

前任 ：

```
query = "SELECT  new ge.tec.pto.ext.helpers.UserHelper(u) from PkUser u where username=:passedparamer order by u.pkUserId desc" 
```

# android - 具有圆形渐变形状的 Android 遮罩背景

> ID：14830930
> 
> 赞同：3
> 
> 时间：2013-02-12T10:58:58.523
> 
> 标签：android, android-layout

我需要实现以下组件，但不知道从哪里开始。

我有两个碎片堆叠。顶部片段也有渐变背景和其他内容。下面的片段也有自己的内容，您应该能够看到下面的内容。

下图展示了这种情况，白色的圆应该是可移动的，所以用户可以在某个位置看到下面的内容。

![在此处输入图像描述](../Images/1facbc74384bd8cc77c568ff7dab617a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:34:49.593

我推荐 Romain Guy 的解决方案。据我所知，这是最简单的（并且可能是*他*推荐的最有效的方法）。该解决方案基于`Shader`s。

您可以在此处找到代码、描述、整个项目、示例视频和屏幕截图：[http ://www.curious-creature.org/2012/12/13/android-recipe-2-fun-with-shaders/](http://www.curious-creature.org/2012/12/13/android-recipe-2-fun-with-shaders/)

您将通过调整掩码 PNG 文件开始您的自定义。然后你可能会为他们在绘制时使用的片段提供一个着色器参数。最后，您将在每个指针移动事件之后为每个片段设置正确的着色器。

我知道这只是解决方案的一个草图，但上面链接中提供的整个项目代码应该会让你走得非常快。

# javascript - javascript - 淘汰赛 - 它是如何工作的？

> ID：14830935
> 
> 赞同：0
> 
> 时间：2013-02-12T10:59:11.740
> 
> 标签：javascript, knockout.js

我正在尝试使用淘汰赛，我想知道从网络的角度来看它是如何工作的：我在哪里可以看到从浏览器客户端到服务器以检索数据的“调用”？我的意思是：我曾经使用 Ajax 调用来填充表单、表格... => 我们可以看到对服务器的 ajax 调用。当我需要提交表单时也是如此：我可以看到 ajax 调用。这意味着我可以使用 Firefbug 进行调试并查看发送的参数/收到的响应，包括标头（请求/响应）。使用knout，表单中的数据由框架ko自动“绑定”。那么，有人知道它是如何工作的吗？电话是如何完成的？有没有办法“看到”数据流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:02:32.327

它基于发布-订阅模式。每当有东西发生变化时，它都会通知它。

这里有一些关于它的信息[http://msdn.microsoft.com/en-us/magazine/hh201955.aspx](http://msdn.microsoft.com/en-us/magazine/hh201955.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:09:03.447

从网络的角度来看，使用淘汰赛时没有任何变化。您仍然需要进行 AJAX 调用来填充您的视图模型，但它们在框架之外，而不是框架的一部分。这意味着您仍然可以在 AJAX 调用上设置断点并观察正在发送和接收的内容。

一个主要的代码偏离是您的网络调用现在可能存在于淘汰视图模型中。

```
var someVm = function(data) {
  var self = this;
  self.Id = ko.observable(data.Id);
  // ...

  self.getItems = function() {
     // AJAX call here, now method on a vm
  }
} 
```

然而，正如 TJ Crowder 所指出的 - 淘汰的关键机制是将客户端视图模型绑定到用户界面，用于数据填充或单页应用程序中的可见性控制。网络是您必须处理的事情，但这不是淘汰赛的一部分。最有可能的是，您将对 AJAX 调用的位置进行一些小改动。

# ios - TapGestureRecognizer 在自定义 TableViewCell 中不起作用

> ID：14830937
> 
> 赞同：0
> 
> 时间：2013-02-12T10:59:13.267
> 
> 标签：ios, ios5, uitapgesturerecognizer

我有一个奇怪的问题 - 当我在 cellForRowAtIndexPath 方法中注册 TapGestureRecognizer 时，它工作得很好，但是当我在单元格的 initWithStyle 方法中注册 TapGestureRecognizer 时，点击识别不起作用，断点不会在处理程序中命中。

以下作品。

我已经使用相应的 xib 文件创建了自定义表格视图单元并注册了它。

```
[self.tableView registerNib:[UINib nibWithNibName:@"MyCell"
                                               bundle:[NSBundle mainBundle]]
         forCellReuseIdentifier:@"cell"];
...

and in the cellForRowAtIndexPath 
MyCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
...
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(didTapCell:)];
    [tap setNumberOfTapsRequired:1];
    [cell addGestureRecognizer:tap]; 
```

以下不起作用

```
@implementation MyCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleCellTap:)];
        [tgr setDelegate:self];
        [tgr setNumberOfTapsRequired:1];
        [tgr setNumberOfTouchesRequired:1];

        [self addGestureRecognizer:tgr];
        //[self.contentView addGestureRecognizer:tgr]; also doesn't work
    }
    return self;
} 
```

我可以离开工作解决方案，但我想通过我的委托将手势识别移动到单元初始化和触发点击事件。

如果我在单元初始化中注册识别器，为什么点击识别不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:29:45.470

你确定`initWithStyle:reuseIdentifier`叫？`initWithCoder:`如果您为单元注册笔尖，则必须使用 Afaik 。

在我的一个项目中，我有这个

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
        pan.delegate = self;
        self.gestureRecognizers = [NSArray arrayWithObject:pan];
    }
    return self;
} 
```

所以我使用的是平移手势识别器，它在 init 方法中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:29:38.773

您已为特定单元格标识符注册了 xib。现在，如果需要，tableview 将自动为您实例化一个单元格（当您调用 dequeReusableCell 时...），但不会调用 initWithStyle:reuseIdentifier 方法，因此永远不会创建/添加您的手势识别器。

如果您在使用已注册的 xib 时确实需要“初始化”东西，请覆盖自定义单元类中的 awakeFromNib 并将您的代码放在那里。我通常将我的“init”代码放在一个单独的方法中，并从 initWithStyle 和 awakeFromNib 覆盖中调用它。

# java - 在Java中创建一个唯一的5位随机数数组？

> ID：14830939
> 
> 赞同：1
> 
> 时间：2013-02-12T10:59:18.550
> 
> 标签：java, arrays, random, arraylist, unique

我有以下代码生成 5 位随机数并将它们添加到 ArrayList。然而，这些数字必须是唯一的 ID。

```
for(int i = 0; i < myArr.length; i++) {
    int id = (int) (Math.round(Math.random() * 89999) + 10000);
    idArr.add(id);
} 
```

我正在尝试弄清楚如何在添加之前检查该数字是否已经在数组中，但我无法找到最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:02:00.660

不要使用 (Array)List，使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)：

```
Set<Integer> set = ...;
while (set.size() < myArr.length) {
  set.add(yourRandomNumber);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:01:39.400

使用 an[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)而不是`array`. 这样你只需要使用[`ArrayList#contains(obj)`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)方法来测试是否`id`已经`ArrayList`存在。

或者，您可以只使用 a [`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)，使用它的[`HashSet#contains()`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html#contains%28java.lang.Object%29)方法可以更快地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:03:03.730

您可以创建一个`Set`数字。例如：

```
Set<Integer> intSet = new HashSet<Integer>();
while(intSet.size() < myArr.length) {
    intSet.add(getNextRandomInt());
} 
```

然后你可以用它做任何事情`Set`。

所以，如果你需要一个数组，只需调用：

```
Integer[] intArray = intSet.toArray(new Integer[myArr.length]); 
```

或者，如果您需要一个`ArrayList`or`int[]`数组：

```
// ArrayList:
List<Integer> ints = new ArrayList<Integer>();
ints.addAll(intSet);

// int[] array:
int[] intArray = new int[myArr.length];
for( int i = 0; i<intArray.length; ++i) {
    intArray[i] = int.get(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:15:48.727

任何涉及循环直到找到足够的唯一随机数的事情都不能保证完成。如果极不可能的话，随机数生成器可能永远不会在合理的时间内输出足够的唯一数。

**（我知道这在实践**中永远不会发生，但这是**理论上**的可能性。）

一个安全的替代方法是选择一个随机数，然后在循环中递增它，直到你有足够的数字。

```
int n = new Random().nextInt(89999 - myArr.length) + 10000;
for (int i = 0; i < myArr.length; i++) {
    idArr.add(n++);
} 
```

# iphone - 无法从数据库 ios 中删除数据

> ID：14830948
> 
> 赞同：0
> 
> 时间：2013-02-12T10:59:38.603
> 
> 标签：iphone, ios, database, sqlite, ios6

我有数据库，但是当我试图从数据库中删除数据时没有任何反应，我应该怎么做才能确保它正常工作？因为当我按下删除时，数据仍在数据库中

这是代码：

```
/file path to database
    -(NSString*)filePath {
        NSArray*paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
    }

    //open database
    -(void)openDB {

        if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK) {
            sqlite3_close(db);
            NSAssert(0, @"Databese failed to open");
        }

        else {
            NSLog(@"database opemed");
        }

    }

    - (IBAction)del:(id)sender {

        NSString*sql = [NSString stringWithFormat:@"DELETE key, theDate, customer, code1, code2 FROM summary WHERE key=\"%@\"",customerName];
        const char* query_stmt = [sql UTF8String];
        sqlite3_stmt*statement;

        sqlite3_prepare_v2(db, query_stmt, -1, & statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
           NSAssert(0, @"database object delete failed");

        } else {
            NSLog(@"No error");

        }
        sqlite3_finalize(statement);
        sqlite3_close(db) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:09:09.907

您不能使用`DELETE`查询删除特定的列值。它用于删除整行。

![在此处输入图像描述](../Images/c6cca7ad775207ef9bea10b82edbf7c5.png)

问题在于以下查询：

```
NSString*sql = [NSString stringWithFormat:@"DELETE key, theDate, customer, code1, code2 FROM summary WHERE key=\"%@\"",customerName]; 
```

将其更改为：

```
NSString*sql = [NSString stringWithFormat:@"DELETE FROM summary WHERE key=\"%@\"",customerName]; 
```

如果您需要删除行的特定列值，请使用`UPDATE`查询。

有关详细信息，请查看[**sqlite 文档**](http://www.sqlite.org/lang_delete.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:10:39.243

您编写的所有函数（例如检查文件路径、opendb）都应该出现在同一个函数中（可能在您的 del 函数中）。

我将这样做：

```
-(void)updateStatus:(NSString *)queryString {
    NSString    *docsDir;
    NSArray     *dirPaths;
    dirPaths    = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir     = [dirPaths objectAtIndex:0];

    strDatabasePath         = [NSString stringWithString:[docsDir stringByAppendingPathComponent:@"bp.sql"]];
    NSFileManager *filemgr  = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: strDatabasePath] == YES)
    {
        const char *dbpath = [strDatabasePath UTF8String];
        if (sqlite3_open(dbpath, &sqlDatabase) == SQLITE_OK)
        {
            const char* beginString = "BEGIN;";
            sqlite3_stmt *compiledstatement;
            sqlite3_prepare_v2(sqlDatabase, beginString, -1, &compiledstatement, NULL);
            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else DLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            DLog(@"QUERY : %@",queryString);

            const char *selectStatement = [queryString UTF8String];

            sqlite3_prepare_v2(sqlDatabase, selectStatement, -1, &compiledstatement, NULL);
            //sqlite3_bind_text(compiledstatement,1,[statusString UTF8String],-1,SQLITE_TRANSIENT);

            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else DLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            const char* endString="END;";
            sqlite3_prepare_v2(sqlDatabase, endString, -1, &compiledstatement, NULL);
            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else DLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            sqlite3_close(sqlDatabase);
        }
        else DLog(@"Failed to open table");
    }
}

NSString *queryString;
queryString = [NSString stringWithFormat:@"DELETE key, theDate, customer, code1, code2 FROM summary WHERE key=\"%@\"",customerName];
[self updateStatus:queryString]; 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:10:55.670

```
 -(BOOL)DeleteWishList:(int)rowno
{

NSString *queryString=[NSString stringWithFormat:@"delete from wishtable where _id=%d",rowno];

[self openDB];
char *err;
if (sqlite3_exec(dBObject, [queryString UTF8String], NULL,NULL, &err)!= SQLITE_OK)
{
    sqlite3_close(dBObject);    
    return NO;
}   
else 
{
    return YES;
}

} 
```

# java - 如何比较两个变量

> ID：14830951
> 
> 赞同：1
> 
> 时间：2013-02-12T10:59:48.303
> 
> 标签：java, jsp, jstl, el

```
<% for(int count=0;count<lengthOfUser;count++) {%>
<%int tempuser= users[count]; %>

<c:forEach items="${userList}" var="user" varStatus="status">

        <c:choose>
             <c:when test="${user.userID == tempuser}">
                   hiii
                         </c:when>

    </c:choose>
</c:forEach>
<%}%> 
```

这是我的 jsp 页面。我正在尝试使用两个变量。但是这段代码不起作用。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:30:15.747

所有*jstl*标记都将在任何*scriptlet*标记之前读取。因此，您必须使用*jstl* `<c:set`标签创建一个变量。看这个例子：

```
<% for (int i = 0; i < 3; i++) {%>
        <c:set value="${i}" var="tempuser1"></c:set>
        <c:set value="initialized with some value" var="tempuser2"></c:set>
        <c:out value="${tempuser1}"></c:out>
        <c:out value="${tempuser2}"></c:out>
        <br/>
        <%                            }
        %> 
```

它在浏览器中打印：

```
initialized with some value 
initialized with some value 
initialized with some value 
```

在这里，`<c:out value="${tempuser1}"></c:out>`打印空值，因为在读取*jstl*`i`标记时，scriptlet 标记内声明的变量 () 不存在，因此变量(in ) 被初始化为空值。*`tempuser1``<c:set value="${i}" var="tempuser1"></c:set>`*

 *但是，您可以按如下方式重写您的代码，它适用于我：

```
<c:forEach var="tempuser" items="users">
            <c:forEach items="${userList}" var="user" varStatus="status">

                <c:choose>
                    <c:when test="${user.userID == tempuser}">
                        hiii
                    </c:when>

                </c:choose>
            </c:forEach>
        </c:forEach> 
```*

# jquery - 悬停后新闻自动收报机无法重新启动

> ID：14830954
> 
> 赞同：1
> 
> 时间：2013-02-12T10:59:59.830
> 
> 标签：jquery, html

我正在使用一个演示 jquery newsticker 。它运行良好。当我将鼠标悬停在新闻自动收报机上时，它将停止。但在此之后它不会滚动。

[http://jsfiddle.net/kdjs2/](http://jsfiddle.net/kdjs2/)

```
$(function() {
    function tick(){
       $('#ticker li:first').slideUp( function () {  $(this).appendTo($('#ticker')).slideDown(); });
        }
        var timeSet = setInterval(function(){ tick () }, 1000);
        $('#ticker').hover(function() { 
                    $('#ticker  li:first').stop();         
                        clearInterval(timeSet);   
                }, tick());    
        tick();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:32:10.877

（+1 这对我来说是一个有用的例子）在悬停切换时，您设置`tick();`功能并且它工作一段时间，您应该设置`setInterval`功能，然后它每秒工作。

```
$('#ticker').hover(function () {
    $('#ticker  li:first').stop();
    clearInterval(timeSet);
}, function () {
    timeSet = setInterval(function () {
        tick();
    }, 1000);
}); 
```

[http://jsfiddle.net/kdjs2/7/](http://jsfiddle.net/kdjs2/7/)

# hibernate - 通过修订获取修改后的属性

> ID：14830956
> 
> 赞同：6
> 
> 时间：2013-02-12T11:00:02.253
> 
> 标签：hibernate, hibernate-envers, auditing

我正在使用 Hibernate Envers 来审核我的实体和属性 ( `org.hibernate.envers.global_with_modified_flag=true`)。这似乎可行，但现在我想获取特定实体的所有属性，这些属性在给定修订版中与前一个相比发生了变化。作为奖励，将变更集从一个修订版转移到另一个修订版会很好。到目前为止，我只得到修改后的实体：

```
List<Object> modifiedClassesAtRevision = getAuditReader().getCrossTypeRevisionChangesReader().findEntities(revision, RevisionType.MOD)
Object modifiedObject = modifiedClassesAtRevision.get(0); 
```

现在，由于我不想为 Java 中的所有实体创建比较方法，有没有办法获得此修订版的修改属性？类似的东西

```
List<String> modifiedProperties = getAuditReader().getModifiedProperties(modifiedObject, revision); 
```

会很高兴 - 但也许我太愚蠢了，找不到那种功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:56:45.927

目前只能查询修改了属性的实体，请参阅[http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#envers-envers-tracking-properties -更改查询](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#envers-envers-tracking-properties-changes-queries)。

尚无法获取属性已更改的描述符（变更集）。

# objective-c - 将字符串转换为令牌的C预处理器宏？

> ID：14830958
> 
> 赞同：0
> 
> 时间：2013-02-12T11:00:09.133
> 
> 标签：objective-c, gcc, llvm, c-preprocessor

我正在尝试为 LLVM 编写一个 C 预处理器宏，其使用如下：

```
vc(@"Browser") 
```

并扩展为：

```
[[BrowserViewController alloc] initWithNibName:@"BrowserViewController" bundle:nil] 
```

我能想到的最好的是：

```
vc(Browser) 
```

实现为：

```
#define vc(xibName) [[xibName ## ViewController alloc] initWithNibName:[NSString stringWithFormat:@"%@ViewController", @#xibName] bundle:nil] 
```

但是对于用户来说，这可能看起来令人困惑，因为`Browser`它本身（在字符串文字之外）看起来像一个标记。`@"Browser"`在不需要用户阅读宏的情况下会使意图更加清晰。

**编辑：**

乍一看，这背后的动机似乎很愚蠢，但我在为 iPhone、iPad 和 OS X 开发应用程序，每个应用程序都有自己的方式来实例化视图控制器，其视图布局在 Interface Builder 中。

平板电脑：

```
[[UIStoryboard storyboardWithName:@"StoryboardPad" bundle:nil] instantiateViewControllerWithIdentifier:@"Browser"]; 
```

苹果手机：

```
[[UIStoryboard storyboardWithName:@"StoryboardPhone" bundle:nil] instantiateViewControllerWithIdentifier:@"Browser"]; 
```

操作系统：

```
[[BrowserViewController alloc] initWithNibName:@"BrowserViewController" bundle:nil] 
```

由于都是 Objective-C，我的一些控制器可以跨平台重用，而且我不喜欢每次需要视图控制器时都在代码中添加条件编译语句。此外，在一周中的不同日子在不同平台上工作时，知道您只需拨打电话就可以`vc(@"Browser")`得到您所期望的结果，无论是在 iPad、iPhone 还是 MAC 上。这只是约定与配置的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:04:41.907

如果你只是打电话

```
[[BrowserViewController alloc] init]; 
```

然后[UIViewController](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW13)将通过以下方式搜索`xib`具有适当名称的

> 1.  如果视图控制器类名以单词“Controller”结尾，如在 MyViewController 中，它会查找名称与类名匹配但不包含单词“Controller”的 nib 文件，如在 MyView.nib 中。
>     
>     
> 2.  它查找名称与视图控制器类的名称匹配的 nib 文件。例如，如果类名为 MyViewController，它会查找 MyViewController.nib 文件。

上面的一行代码应该足够短，不能证明宏是合理的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:41:58.193

原来一个函数是实现这个的方法：

```
id InstantiateViewControllerWithXib(NSString *xibName) {
    NSString *className = [xibName stringByAppendingString:@"ViewController"];
    return [[NSClassFromString(className) alloc] initWithNibName:className bundle:nil];
} 
```

为了严格回答这个问题，您可以定义所需的宏：

```
#define vc(xibName) InstantiateViewControllerWithXib(xibName) 
```

# sql - 写入数据库时 字符串不接受“'s”

> ID：14830960
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:00:13.190
> 
> 标签：sql, asp.net-mvc, type-conversion

大家好，我正在使用 mvc4 为另一个应用程序创建一个设置页面。在设置页面中：

1.它包含两个文本区域，用户可以在其中输入任何内容。

2.如果用户点击提交按钮，输入后，他写的文本被保存在一个sql数据库中。

3.主应用程序将从数据库中读取该数据并显示它。

以下是我各自的代码：

模型：

```
 public string PartnerInfo1 { get; set; }
 public string PartnerInfo2 { get; set; } 
```

控制器：

```
[HttpPost]
        public ActionResult Index(AddDetailModel model)
        {
            pinfo1 = model.PartnerInfo1;
            pinfo2 = model.PartnerInfo2;
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["Sample"].ConnectionString);
            con.Open();
            SqlCommand cmd = new SqlCommand("update dbo.Partner_Design set PartnerInfo1='" + pinfo1 + "',PartnerInfo2='" + pinfo2 + "' where [PartnerID]='cs'", con);
            cmd.ExecuteNonQuery();
            return RedirectToAction("Index");
        } 
```

在视图中：

```
 @Html.TextAreaFor(m => m.PartnerInfo1)
@Html.TextAreaFor(m => m.PartnerInfo2) 
```

在数据库中，对应的表包含两列**PartnerInfo1,PartnerInfo2** ，它们的数据类型是**nvarchar(max)**。

我的问题是当我在文本区域中输入撇号时，它给了我错误。例如，如果我输入“world's”，它会在单击提交按钮时出错。

这是错误：

```
Incorrect syntax near 's'.
Unclosed quotation mark after the character string ''. 
```

请建议我可以做些什么来避免这种情况。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:05:45.200

永远不要那样做 - 这是不安全的，并且允许进行[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)：

```
SqlCommand cmd = new SqlCommand("update dbo.Partner_Design set PartnerInfo1='" + pinfo1 + "',PartnerInfo2='" + pinfo2 + "' where [PartnerID]='cs'", con); 
```

而不是使用以下参数语法：

```
SqlCommand cmd = new SqlCommand("update dbo.Partner_Design set PartnerInfo1=@pinfo1, PartnerInfo2=@pinfo2 where [PartnerID]='cs'", con);
cmd.Parameters.AddWithValue("@pinfo1", pinfo1);
cmd.Parameters.AddWithValue("@pinfo2", pinfo2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:10:06.500

您的方法将您的查询暴露给`sql injection`攻击。使用参数化查询会更好，它也可以解决您的`'`问题。

```
string connString = ConfigurationManager.ConnectionStrings["Sample"].ConnectionString;

using (SqlConnection con = new SqlConnection(connString))
{
   SqlCommand cmd = new SqlCommand("Update dbo.Partner_Design " +
                                    "Set PartnerInfo1=@pinfo1, " +
                                        "PartnerInfo2=@pinfo2 " +
                                    "Where [PartnerID]=@partnerId", con);

   cmd.Parameters.AddWithValue("@pinfo1", model.PartnerInfo1);
   cmd.Parameters.AddWithValue("@pinfo2", model.PartnerInfo2);
   cmd.Parameters.AddWithValue("@partnerId", "cs");
   con.Open();
   cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:13:00.830

您可以通过在单引号前面加上另一个单引号来转义单引号，这需要在将字符串添加到查询之前对字符串进行替换，即：

```
pinfo1 = pinfo1.Replace("'", "''");
pinfo2 = pinfo2.Replace("'", "''");
SqlCommand cmd = new SqlCommand("update dbo.Partner_Design set PartnerInfo1='" + pinfo1 + "',PartnerInfo2='" + pinfo2 + "' where [PartnerID]='cs'", con); 
```

但是，我强烈建议不要这样做，并听取其他响应的建议，而不是使用更安全的参数化 SQL。另请注意，此解决方案只会解决您的单引号问题，并且仍会导致其他需要单独转义的特殊字符出现问题。因此，虽然这应该回答您的问题，但 Sławomir Rosiek 和 Kaf 提出的解决方案更全面、更安全，并且是最佳实践。

您使用的方法使您容易受到 SQL 注入攻击。

# android - 带有DialogFragment的Android AlertDialog：即使单击确定也不要关闭对话框

> ID：14830962
> 
> 赞同：8
> 
> 时间：2013-02-12T11:00:14.623
> 
> 标签：android, android-alertdialog, android-dialogfragment

我有一个带有自定义布局的 AlertDialog（只是一个 EditText），我想在单击 OK 按钮时验证数据。如果验证失败，我不想关闭对话框。

我正在使用对话框的默认按钮（正面和负面）。如果我使用 "setPositiveButton("", new DialogInterface.OnClickListener() ..." 对话框总是关闭。我看过几个帖子，他们说应该覆盖 onClick 侦听器，但我无法让它工作. 这是我找到的代码：

```
Button theButton = dialog.getButton(DialogInterface.BUTTON_POSITIVE);
theButton.setOnClickListener(new CustomListener(dialog)); 
```

因为它说应该在显示对话框之后完成，所以我将此代码放在我的活动中，而不是在我的 DialogFragment 中，但如果我使用 mDialogFragment.getDialog() 它总是返回 null。

这是我的对话片段的一部分：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the Builder class for convenient dialog construction
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    builder.setTitle(R.string.new);

    LayoutInflater inflater = getActivity().getLayoutInflater();
    dialogView = inflater.inflate(R.layout.edit_license, null);

    builder.setView(dialogView)

    // Add action buttons
    .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {

        }
    })
    .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            MyDialogFragment.this.getDialog().cancel();
        }
    }); 

    return builder.create();

} 
```

在我的活动中，我执行以下操作：

```
DialogFragment dialog = new MyDialogFragment(true, null);
dialog.show(getSupportFragmentManager(), "EditLicenseDialogFragment");

AlertDialog alertDialog = (AlertDialog)dialog.getDialog();
alertDialog.getButton(DialogInterface.BUTTON_POSITIVE);
btnPositive.setOnClickListener(new CustomListener(alertDialog));

... 

class CustomListener implements View.OnClickListener {
    private final Dialog dialog;
    public CustomListener(Dialog dialog) {
        this.dialog = dialog;
    }
    @Override
    public void onClick(View v) {
        ...
    }
} 
```

就像我说的，(AlertDialog)dialog.getDialog(); 总是返回 null。这是为什么？如果验证不正确，如何避免关闭对话框？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:14:49.080

这个解决方案对我有用。对话框已经在 onResume 中可见，因此这是访问按钮和替换侦听器的好地方。

```
public class XYZFragment extends DialogFragment {
   ...

    @Override
    public void onResume() {
        super.onResume();

        AlertDialog dialog = (AlertDialog)getDialog();

        Button positiveButton = dialog.getButton(DialogInterface.BUTTON_POSITIVE);
        positiveButton.setOnClickListener(new View.OnClickListener() {                  
            @Override
            public void onClick(View onClick) {
            ...
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:02:04.420

[这是来自DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)参考的一些文本：

> 显示对话框窗口的片段，浮动在其活动窗口的顶部。该片段包含一个 Dialog 对象，它会根据片段的状态适当地显示该对象。**对话框的控制**（决定何时显示、隐藏、关闭它）**应该通过这里的 API 来完成，而不是直接调用对话框。**

而不是调用*getDialog().dismiss()*你应该做*dismiss()*

# c - 在围棋中清除棋盘的快速算法

> ID：14830972
> 
> 赞同：1
> 
> 时间：2013-02-12T11:00:51.157
> 
> 标签：c, baduk

我目前正在编写一些代码来处理围棋板。围棋棋盘表示为一组颜色。该数组有`size`×`size`个条目，代表一个二维方板。

```
enum color {
    EMPTY,
    BLACK,
    WHITE,
};

struct go_board {
    unsigned int size;
    enum color intersections[];
}; 
```

移动时`enum color player`，适用以下程序：（见[规则](http://senseis.xmp.net/?TrompTaylorRules)）

1.  [...]
2.  如果 P 的颜色（垂直或水平）相邻的点从 P 到颜色 C 的点有一条路径（垂直或水平），则称点 P（不是颜色 C）到达 C。
3.  清除颜色是清空该颜色的所有未达到空的点的过程。
4.  [...]
5.  一个动作包括 [...] 清除对手的颜色，然后清除自己的颜色。

我正在寻找一种快速（就计算复杂性和实际速度而言）算法来清除电路板。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:08:57.137

使用图像处理的洪水填充算法。首先，用空点播种并填充所有白色或空的位置；所有未填充白色石头的位置都将死亡。用黑色重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T11:04:01.143

您可以保留对板上每个组的引用，并跟踪他们的自由度。对于每个添加的石头，您最多只需将 4 个组合并/更新在一起。是我还是这听起来像 O(k)？:)

（已编辑）

# jquery - 使用 $(this) 进行鼠标移动的 jQuery 意外标识符

> ID：14830979
> 
> 赞同：2
> 
> 时间：2013-02-12T11:01:08.057
> 
> 标签：jquery, parallax

我试图在一个元素上获得视差效果：

```
jQuery(document).ready(function($){
    $('#Parallax').mousemove(
            function(e){
            /* Work out mouse position */
            var offset = $(this).off­set();
            var xPos = e.pageX - off­set.left;
            var yPos = e.pageY - off­set.top;

            /* Get per­cent­age positions */
            var mou­s­eX­Per­cent = Math.round(xPos / $(this).width() * 100);
            var mou­seY­Per­cent = Math.round(yPos / $(this).height() * 100);

            /* Pos­i­tion Each Layer */
            $(this).children('img').each(
                    function(){
                            var diffX = $('#Parallax').width() - $(this).width();
                            var diffY = $('#Parallax').height() - $(this).height();

                            var myX = diffX * (mou­s­eX­Per­cent / 100);
                            var myY = diffY * (mou­seY­Per­cent / 100);
                            var cssObj = {
                                    'left': myX + 'px',
                                    'top': myY + 'px'
                            }
                            $(this).animate({left: myX, top: myY},{duration: 50, queue: false, easing: 'linear'});

                    }
            );

            }
    );
}); 
```

但是，我不断收到以下错误：

> 未捕获的语法错误：第 5 行“var offset = $(this).offset();”的意外标识符。

我错过了什么..？

已解决 - 存在隐藏的格式问题。代码没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:15:26.347

很高兴我帮助了安德鲁。

我从评论中的回答：

> `off`当我复制粘贴您的代码时，和 之间有一个隐藏的字符`set`（如`off-set`记事本所示）。如果此字符也在您的代码中，则可能是问题所在。

# jquery - jQuery/jQueryUI Droppable 采用 Draggable 的形式

> ID：14830983
> 
> 赞同：0
> 
> 时间：2013-02-12T11:01:17.073
> 
> 标签：jquery, html, css, jquery-ui

我有一个单列表，其中每个单元格都是一个接受某个类的可拖动对象的可放置对象。该表的边框是可见的，但我不希望固定大小的单元格着色和可见，这对我来说看起来很丑。当我拖动一个可拖动对象与一个单元格相交时，该单元格会突出显示，这并不难做到，但我也希望这个突出显示能够占用拖动对象的大小。所有可拖动对象的宽度都是固定的，但有些对象的高度比其他对象高，因此调整高度就足够了，但我不知道从哪里开始。[这](http://nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html)是我正在寻找的那种适应的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:46:48.450

根据您的要求，我建议您使用 jQueryUI“Sortable”而不是 Draggable/Droppable。请参阅 [jQueryUI 站点上的 portlet 演示](http://jqueryui.com/sortable/#portlets)，它应该是您正在寻找的功能。

**编辑**：@Subhamoy，我现在明白你的意思了。这是一个使用Sortable并依赖CSS来构建表格的解决方案： [Link to jsfiddle](http://jsfiddle.net/martyk/LVyuu/3/)

关键部分是负责调整占位符大小的“过度”处理程序：

```
$( ".target .tbody" ).sortable({
    forcePlaceholderSize: true,
    placeHolder: "ui-sortable-placeholder",
    connectWith: ".source .tbody",
    items: "> .tr",
    over: function(event, ui) {
        var $context = $(this)
            ,$h = ui.helper
            ,$p = $('.ui-sortable-placeholder', $context)
            ,hheight = $h.height()
        ;
        $p.removeAttr("style");
        $p.css("height", hheight + "px");
    }
}); 
```

# android - 重写 on menu press hardver button android

> ID：14830987
> 
> 赞同：0
> 
> 时间：2013-02-12T11:01:39.090
> 
> 标签：android, android-optionsmenu

我正在尝试重写硬菜单按钮以在单击时显示子菜单。我正在使用 ActionBarSherlock。所以我有以下代码：

```
@Override
    public boolean onKeyDown(int keycode, KeyEvent e) {
        if (keycode == KeyEvent.KEYCODE_MENU && this._menu != null
                && this._menu.findItem(R.id.menu_button) != null) {
             this._menu.performIdentifierAction(R.id.menu_button,
                     0);
            return true;
        }
        return super.onKeyDown(keycode, e);
    } 
```

其中 R.id.menu_button 是我需要打开的子菜单。单击菜单按钮时，子菜单会打开，但是当我释放硬菜单按钮时，选项菜单会关闭。如何使选项菜单在按下hardver菜单按钮时将状态从关闭更改为显示并显示窗体关闭并保留按钮释放时的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:05:30.247

尝试使用`onKeyUp()`而不是`onKeyDown()`.

# javascript - JavaScript while 循环获取选择选项并从其他选择框中隐藏选项

> ID：14830988
> 
> 赞同：0
> 
> 时间：2013-02-12T11:01:39.293
> 
> 标签：javascript, jquery, while-loop

我正在尝试开发一个足球队线功能，该功能将使用每个球员的选择框最多存储 18 名球员（11 名首发球员和 7 名替补球员）。

当从一个选择框中选择玩家时，他们应该隐藏在所有其他选择框中，以阻止用户再次选择同一玩家。

我已经编写了一个 javascript/jquery 函数来执行此操作，但它非常冗长，我猜想让它更易于管理的最佳选择是编写一个 while 循环，但我试图让自己感到困惑编码。

当前代码（用于起始 XI）可以在[http://jsfiddle.net/aFDjS/看到](http://jsfiddle.net/aFDjS/)

我是否正确地认为我需要做的可能是将一个while循环嵌套在另一个while循环中，以便在计数与玩家编号相同时忽略这种情况......

```
i = 1;
playerNo = 1;
while (i < 19) {        
    while (playerNo < 19 && i != playerNo) {
        playerID = $("#player" + i + "Name option:selected").val();
        $("select#player" + playerNo + "Name >option" ).filter( "[class='"+ playerID +"']" ).hide();
        $("select#player" + playerNo + "Name >option" ).filter( "[class!='"+ playerID +"']" ).show();
        playerNo++;
    }
    i++;
} 
```

这是正确的路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:38:38.510

不，您应该使用`for`循环。

标准是`for`在计数时使用循环，`while`在等待事件或值更改时使用循环。

那些 for 循环中的逻辑很难理解，而且无论如何看起来都是错误的。

但不管怎样，最简单的方法是使用 jquery 的强大功能：

```
$(function() {
    $("select").on("change", function() {
        //reset to showing all the options
        $("select option").show(); 

        //for each selected option
        $("select option:selected").each(function() {
            var optionSelected = this;
            var playerID = $(this).attr("class");
            //hide the option in all the other dropdowns
            $("option." + playerID).each(function() {
                if(this != optionSelected) {
                    $(this).hide();
                }
            });
        });
    });
}); 
```

这里的工作示例：

[http://jsfiddle.net/4avwm/1/](http://jsfiddle.net/4avwm/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:46:11.113

可能这会给你实现的想法：http: [//jsfiddle.net/2jGDU/](http://jsfiddle.net/2jGDU/)

```
$('#players').change(function () {
   $('#pl_11').prepend($('option:selected', this).clone());
   $('option:selected', this).remove();
   if ($('option', this).length <= 8) {
    $('option:first', this).remove();
    $('#sub').prepend($(this).html());
    $('option', this).remove();
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:25:08.403

好吧，不知道程序的完整概念是什么，但我认为您的解决方案有点矫枉过正。
我会给每个复选框一个名称（例如：）`"plr"+ID`，然后我会为其附加一个 onclick 事件。触发事件时，复选框将搜索所有同名复选框并禁用它们。

```
 function selectPlr(event) {
     var other = document.getElementsByName(this.name);  //Get element collection
     for(var i=0; i<other.length; i++) {
       if(other[i]!=this) {  //Ignore itself
         other[i].disabled = this.checked;   //Disable if the player is picked, enable if unpicked
       }
     }
 } 
```

当然，也可以使用类名：

```
 var other = $("input."+this.className); 
```

这是[活动代码](http://u8.8u.cz//crap/players.html)。

# java - 使用 Web 套接字和 Java 服务器的低延迟通信

> ID：14830990
> 
> 赞同：0
> 
> 时间：2013-02-12T11:01:53.180
> 
> 标签：java, javascript, websocket

我正在寻找在 javascript 接口（客户端）和 java 服务器之间建立低延迟 2way 通信。

客户端必须从服务器请求数据（可以请求不同的数据集，需要是异步的，数据是小的传感器数据集）。

我正在考虑使用 websockets 来实现它，因为它的延迟很低。但是我坚持选择一个 java websocket 服务器实现（我找到了 jetty，但有很多，还有一个需要为 node.js 和 socket.io 制作的案例，但不会有很多客户端在这种情况下；只有一个客户端发送多个请求，如果我错了，请纠正我，但似乎没有理由去 node.js 路径）。

最后但并非最不重要的; 服务器在树莓派上运行，并通过特殊协议接收传感器数据；（但我认为这对这个问题并不重要）。

有没有人在这个领域有一些经验并想分享他/她的强项？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:10:50.407

我一直在使用[Kaazing](https://kaazing.com/products/websocket-gateway/editions/)（HTML5 版本）将通过 Web 套接字接收的流量代理到侦听传统 TCP 服务器套接字的 Java 进程。

它运行良好，延迟低并且始终处理超过 1000 条消息/秒（尽管我们发现我们的 Java 代码是这方面的限制因素）。

[Kaazing](https://kaazing.com/products/websocket-gateway/editions/)还为 Java、JavaScript 和 Flex 提供客户端 API，这使我们能够使用熟悉的 API（在我的例子中是 Concordion）编写验收测试套件。

我不知道它在 Raspberry Pi 上的运行情况如何，但鉴于它可以免费下载，因此有一种简单的方法可以找出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:19:58.177

我通过使用 Atmosphere 解决了我的问题，Atmosphere 是一个为所有主要 Java 服务器和 Web 浏览器提供兼容性的框架。（Java 官方标准仍在制定中）。

[https://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere)

我已经启动并运行了聊天演示。

# c# - 代码清理使 Visual Studio 将 usings 放入命名空间

> ID：14830991
> 
> 赞同：4
> 
> 时间：2013-02-12T11:01:54.950
> 
> 标签：c#, visual-studio, visual-studio-2012

我正在将 stylecop 添加到我们的一个项目中，它的一项建议是将 usings 嵌套在命名空间内。我想知道是否有办法让 Visual Studio 默认执行此操作？

我知道 resharper 我可以 [完成 1](https://stackoverflow.com/questions/8160820/code-cleanup-tool-to-move-all-using-statements-inside-namespace-in-all-cs-file)但是我没有这个项目的 re-sharper，我想知道是否可以让 VisualStudio 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:06:42.803

您可以使用此处建议的说明编辑“新课程”模板：

[如何为新的 C# 类/接口编辑 Visual Studio 模板？](https://stackoverflow.com/questions/2072687/how-do-i-edit-the-visual-studio-templates-for-new-c-sharp-class-interface).

# asp.net - 无法连接到sqlserver

> ID：14830998
> 
> 赞同：2
> 
> 时间：2013-02-12T11:02:15.780
> 
> 标签：asp.net, sql-server, database-connection

**我试图在远程 sql 服务器上安装 asp.net 会员系统，但出现此错误：**

安装失败。

异常：无法连接到 SQL Server 数据库。

* * *

## 失败详情

```
System.Web.HttpException (0x80004005): Unable to connect to SQL Server database. ---> System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (0x80004005): The wait operation timed out
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable)
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
ClientConnectionId:24557c63-f9b1-498c-bd1d-0d678f29f795
   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
   at System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install)
   at System.Web.Management.ConfirmPanel.Execute() 
```

**我从 vs2012 连接到远程 sql 服务器时遇到了同样的问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T14:26:31.187

如果以下一个或多个条件为真，则可能会出现此问题：

*   SQL Server 未配置为接受远程连接。
*   SQL Server 的必要协议未在 SQL Server 计算机或运行 BizTalk Server 的 SQL Server 客户端计算机上启用。

执行以下步骤可能会解决此问题：

*   **SQL Server 外围应用配置**工具在SQL Server 2008 上不可用。要在 SQL Server 2008 计算机上为 SQL Server 启用远程连接，请按照 SQL Server 2008 联机帮助中的说明进行操作。

*   使用**SQL Server 配置管理器**工具在 SQL Server 计算机上启用**TCP/IP**和/或**命名管道**协议。

    1.  单击**开始**，指向**所有程序**，然后单击**SQL Server 配置管理器**。

    2.  单击以展开**SQL Server 网络配置**，然后单击**MSSQLSERVER 的协议**。

    3.  右键单击**TCP/IP**协议，然后单击**启用**。

    4.  右键单击**命名管道**协议，然后单击**启用**。

    5.  关闭**SQL Server 配置管理器**工具。

*   使用**SQL Server 配置管理器**工具在运行 BizTalk Server 的 SQL Server 客户端计算机上启用**TCP/IP**和/或**命名管道协议。**

    1.  单击**开始**，指向**所有程序**，然后单击**SQL Server 配置管理器**。

    2.  单击以展开**SQL Server 网络配置**，然后单击**ClientProtocols**。

    3.  右键单击**TCP/IP**协议，然后单击**启用**。

    4.  右键单击**命名管道**协议，然后单击**启用**。

    5.  关闭**SQL Server 配置管理器**工具。

**注意：**确保运行 BizTalk Server 的 SQL Server 客户端计算机上的至少一种协议与 SQL Server 计算机上启用的协议相匹配。