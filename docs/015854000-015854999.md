# StackOverflow 问答 15854000-15854999

# awk - awk：单独编辑数据块

> ID：15854000
> 
> 赞同：0
> 
> 时间：2013-04-06T17:35:39.153
> 
> 标签：awk

我有细分为块的文本文件，看起来像这样：

> foo: a
> bar: b
> bat: c
> 
> foo: d
> bar: e
> bat: f
> 
> ...

有没有办法可以单独编辑每个块（即为块运行一组规则，然后移动到下一个块）？
结果应如下所示：

> foo: ab
> bar: bc
> bat: c
> 
> foo: de
> bar: ef
> bat: f
> 
> ...

我看不出如何使用适用于整个文件的规则来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:47:40.547

这对你有用吗？

```
awk -v RS="" -F'\n' '{for(i=1;i<=NF-1;i++){split($(i+1),x," ");$i=$i" "x[2];print $i}print $NF;print RS}' file 
```

使用您的数据：

```
kent$  echo "foo: a
bar: b
bat: c

foo: d
bar: e
bat: f"|awk -v RS="" -F'\n' '{for(i=1;i<=NF-1;i++){split($(i+1),x," ");$i=$i" "x[2];print $i}print $NF;print RS}'              
foo: a b
bar: b c
bat: c

foo: d e
bar: e f
bat: f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:56:50.330

您可以将`awk`记录分隔符和字段分隔符设置为您需要的任何内容。默认情况下，字段分隔符是空格，第二个分隔符是`\n`. 您希望将记录分隔符设置为空行，将字段分隔符设置为`:`.

```
awk '{printf "%s:%s%s\n%s:%s%s\n%s:%s\n\n",$1,$2,$4,$3,$4,$6,$5,$6}' FS=: RS= file
foo: a b
bar: b c
bat: c

foo: d e
bar: e f
bat: f 
```

您没有说明您要做什么，我猜数据转换只是一个示例，因此它们可能是更好的方法。

# javascript - Kineticjs dragBoundFunc 用于矩形中的矩形

> ID：15854001
> 
> 赞同：2
> 
> 时间：2013-04-06T17:35:46.657
> 
> 标签：javascript, kineticjs

我有以下代码可以将较小的矩形拖到较大的矩形中。

它几乎可以工作，但可以将橙色矩形移出白色矩形。这种行为有什么解决办法吗？？较大的矩形是小矩形的拖动边框？

还有一个问题......是否可以将任何多边形中的矩形作为边界？

```
<!DOCTYPE HTML>
<html>
<head>
 <style>
  body {margin: 0px; padding: 20px;}
  canvas {border: 1px solid #777;}
 </style>
</head>
<body>
<div id="container"></div>
<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.2.js"></script>
<script>
    var stage = new Kinetic.Stage({
        container: 'container',
        width: 300,
        height: 300
    });
    var layer = new Kinetic.Layer();

    // White box
    var white = new Kinetic.Rect({
        x: 100,
        y: 50,
        width: 150,
        height: 100,
        fill: 'white',
        stroke: 'black',
        strokeWidth: 2
    });

    // orange box
    var orange = new Kinetic.Rect({
        x: 150,
        y: 100,
        width: 50,
        height: 30,
        fill: 'orange',
        stroke: 'black',
        strokeWidth: 2,
        draggable: true,
        // this causes orange box to be stopped if try to leave white box
        dragBoundFunc: function(pos){
            if(theyAreColliding(orange,white)){
                 // orange box is touching white box
                 // let it move ahead
                return ({ x:pos.x, y:pos.y });
            } else{
                 // orange box is not touching white box
                 // don't let orange box move outside
                if (white.getY() > orange.getY()){
                    return({x: pos.x, y: white.getY()+1});
                }
                else if (white.getY() + white.getHeight() - orange.getHeight() < orange.getY()){
                    return({x: pos.x, y: white.getY() + white.getHeight() - orange.getHeight() -1});
                }
                else if (white.getX() > orange.getX()){
                    return({x: white.getX() +1, y: pos.y})
                }
                else if (white.getX() + white.getWidth() - orange.getWidth() < orange.getX()){
                    return({x: white.getX() +white.getWidth() - orange.getWidth() -1, y: pos.y})
                }
            }
        }
    });

    function theyAreColliding(rect1, rect2) {
        return !(rect2.getX() > rect1.getX() ||
                 rect2.getX() + rect2.getWidth() - rect1.getWidth() < rect1.getX() || 
                 rect2.getY() > rect1.getY() ||
                 rect2.getY() + rect2.getHeight() - rect1.getHeight() < rect1.getY());
    }

    layer.add(white);
    layer.add(orange);
    stage.add(layer);

</script>
</body>
</html> 
```

还有 jsfiddle 链接：http: [//jsfiddle.net/dNfjM/](http://jsfiddle.net/dNfjM/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T17:26:14.483

**这是设置您的 dragBoundFunc 的改进方法**

dragBoundFunc 的秘诀是让它执行*得很快*。请记住，*每次 mousemove 都会*执行它。

因此，预先计算出 dragBoundFunc 之前和外部的所有最小和最大边界，如下所示：

```
 // pre-calc some bounds so dragBoundFunc has less calc's to do
    var height=orangeRect.getHeight();
    var minX=white.getX();
    var maxX=white.getX()+white.getWidth()-orangeRect.getWidth();
    var minY=white.getY();
    var maxY=white.getY()+white.getHeight()-orangeRect.getHeight(); 
```

这样，您的 dragBoundFunc 就可以针对这些预先计算的边界测试当前位置，如下所示：

```
 dragBoundFunc: function(pos) {
          var X=pos.x;
          var Y=pos.y;
          if(X<minX){X=minX;}
          if(X>maxX){X=maxX;}
          if(Y<minY){Y=minY;}
          if(Y>maxY){Y=maxY;}
          return({x:X, y:Y});
      } 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/n5xMs/](http://jsfiddle.net/m1erickson/n5xMs/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 10px;
      }
      canvas{border:1px solid red;}
    </style>
  </head>
    <body>
      <div id="container"></div>
      <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.1.min.js"></script>
      <script>
        var stage = new Kinetic.Stage({
          container: 'container',
          width: 400,
          height: 400
        });
        var layer = new Kinetic.Layer();

        var white = new Kinetic.Rect({
            x: 20,
            y: 20,
            width: 300,
            height: 300,
            fill: 'white',
            stroke: 'black',
            strokeWidth: 2
        });

        var orangeGroup = new Kinetic.Group({
          x: stage.getWidth() / 2,
          y: 70,
          draggable: true,
          dragBoundFunc: function(pos) {
              var X=pos.x;
              var Y=pos.y;
              if(X<minX){X=minX;}
              if(X>maxX){X=maxX;}
              if(Y<minY){Y=minY;}
              if(Y>maxY){Y=maxY;}
              return({x:X, y:Y});
          }
        });

        var orangeText = new Kinetic.Text({
          fontSize: 26,
          fontFamily: 'Calibri',
          text: 'boxed in',
          fill: 'black',
          padding: 10
        });

        var orangeRect = new Kinetic.Rect({
          width: orangeText.getWidth(),
          height: orangeText.getHeight(),
          fill: 'orange',
          stroke: 'blue',
          strokeWidth: 4
        });

        orangeGroup.add(orangeRect).add(orangeText);
        layer.add(white);
        layer.add(orangeGroup);
        stage.add(layer);

        // pre-calc some bounds so dragBoundFunc has less calc's to do
        var height=orangeRect.getHeight();
        var minX=white.getX();
        var maxX=white.getX()+white.getWidth()-orangeRect.getWidth();
        var minY=white.getY();
        var maxY=white.getY()+white.getHeight()-orangeRect.getHeight();

      </script>
  </body>
</html> 
```

# regex - 如何在 Excel/Word/Notepad++ 中每五行插入一个换行符？

> ID：15854002
> 
> 赞同：2
> 
> 时间：2013-04-06T17:35:51.913
> 
> 标签：regex, excel, replace, notepad++, newline

我有这个清单：

08:17
17:01
08:09
16:56
09:22
17:01
08:08
17:05
07:59
16:54
。
.
.

**如何在 Excel/Word/记事本中每 5 行插入一个换行符？（不是<br>）**

例如：

08:17
17:01
08:09
16:56
09:22
（此处换行）
08:08
17:05
07:59
16:54
08:02 （此处 换
行）
等

我已经尝试过 /n/r/n/r 但无法弄清楚，我是否必须使用代码或者是否有像 TextFX/Notepad++ 这样的工具或任何具有此功能的工具？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T17:51:03.063

在正则表达式模式下使用 Notepad++ 查找/替换：

```
Find: ((.*\s*\n\s*){5})

Replace: $1\n 
```

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:30:24.827

在 Excel 中明显更乏味！我建议：

*   `x`在任何两个相邻备用列的右侧，在包含您的第 6 项的第二行中输入（这里是 17:01 的第二个实例）。

*   选择该单元格和紧接其上方的五个，`Ctrl`按下按钮，根据需要向下复制该块。

*   对包含 的列进行小计`x`。复制/粘贴特殊/值该列（应该移动到右侧）然后将其删除，该列立即移到其左侧。使用全部删除再次小计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:00:56.350

Word 的正则表达式并不流行，但 Find what:`(?{35})`和 replace with`\1^p`似乎对我有用，当在您的第一个字符之前开始时（即 08:17 中的 0）。{NB 使用通配符}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T06:42:56.770

我意识到这是一个老问题，但我认为我应该加入排序技巧，因为它很快并且不需要从 Excel 中粘贴。（虽然我喜欢使用 Notepad++ 进行快速的正则表达式破解，但如果您想保持格式，这会很痛苦。）

在您的数据旁边创建一个临时列，并在数据底部自动填充连续数字 1、2、3...。

然后继续数据下方的列，使用 5、10、15...，直到获得大于数据大小的数字。

最后，对临时列上的所有内容进行排序，瞧，跳过的行。

# linq - 使用 LINQ EF 查询获取给定月份内的所有日期

> ID：15854010
> 
> 赞同：1
> 
> 时间：2013-04-06T17:36:28.643
> 
> 标签：linq, entity-framework

我正在将 .Net MVC 与 EF 一起用于带有 Web API 的简单 Web 服务。在我的模型中，我有一个名为“Created”的日期字段。如何编写查询以查找“创建”日期的月份是给定月份列表（列表）的一部分的所有条目？

例如，我的月份列表是 (1,4,5) 我需要找到 createdDate.Month 是上述列表一部分的所有条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:40:05.453

`Contains`在您想要的月份列表中使用方法：

```
List<int> months = new List<int>() { 1, 4, 5 };

var items = context.Table.Where(i => month.Contains(i.Created.Month)).ToList(); 
```

# c# - 在不复制代码的情况下将这些更改应用于对象的最佳方法是什么？

> ID：15854014
> 
> 赞同：2
> 
> 时间：2013-04-06T17:36:43.990
> 
> 标签：c#, duplication

我正在尝试从另一个对象更新一个对象的许多属性，我最终一遍又一遍地重复相同的代码（我展示了一个带有 Name 和 LastName 的示例，但我有 15 个其他属性具有类似的代码）。

但*重要的是要注意它不是所有属性*，所以我不能盲目地复制所有内容。

```
 public class Person
 {

     public bool UpdateFrom(Person otherPerson)
     {

        if (!String.IsNullOrEmpty(otherPerson.Name))
        {
            if (Name!= otherPerson.Name)
            {
                change = true;
                Name = otherPerson.Name;
            }
        }

       if (!String.IsNullOrEmpty(otherPerson.LastName))
        {
            if (LastName!= otherPerson.LastName)
            {
                change = true;
                LastName = otherPerson.LastName;
            }
        }

        return change;
     }
  } 
```

有没有更优雅的方式来编写这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:08:57.387

您可以使用 an`Expression`来定义要访问的字段，处理更新的代码如下所示：-

```
 Person one = new Person {FirstName = "First", LastName = ""};
   Person two = new Person {FirstName = "", LastName = "Last"};
   Person three = new Person ();

   bool changed = false;
   changed = SetIfNotNull(three, one, p => p.FirstName) || changed;
   changed = SetIfNotNull(three, one, p => p.LastName) || changed;
   changed = SetIfNotNull(three, two, p => p.FirstName) || changed;
   changed = SetIfNotNull(three, two, p => p.LastName) || changed; 
```

请注意，`||`表达式中的顺序很重要，因为 .NET 会尽可能缩短评估。或者正如 Ben 在下面的评论中建议的那样，`changed |= ...`用作更简单的替代方案。

该`SetIfNotNull`方法依赖于另一种方法，该方法使用一些表达式魔术来将 getter 转换为 setter。

```
 /// <summary>
    /// Convert a lambda expression for a getter into a setter
    /// </summary>
    public static Action<T, U> GetSetter<T, U>(Expression<Func<T, U>> expression)
    {
        var memberExpression = (MemberExpression)expression.Body;
        var property = (PropertyInfo)memberExpression.Member;
        var setMethod = property.GetSetMethod();

        var parameterT = Expression.Parameter(typeof(T), "x");
        var parameterU = Expression.Parameter(typeof(U), "y");

        var newExpression =
            Expression.Lambda<Action<T, U>>(
                Expression.Call(parameterT, setMethod, parameterU),
                parameterT,
                parameterU
            );

        return newExpression.Compile();
    }

    public static bool SetIfNotNull<T> (T destination, T source, 
                            Expression<Func<T, string>> getter)
    {
        string value = getter.Compile()(source);
        if (!string.IsNullOrEmpty(value))
        {
            GetSetter(getter)(destination, value);
            return true;
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:05:22.283

使用`Func`和`Action`委托你可以这样做：

```
public class Person
{
    public string Name { get; set; }

    public string LastName { get; set; }

    public bool UpdateFrom(Person otherPerson)
    {
        bool change = false;

        change = Check(otherPerson.Name, p => p.Name, (p, val) => p.Name = val);

        change = change ||
                 Check(otherPerson.LastName, p => p.LastName, (p, val) => p.LastName = val);

        return change;
    }

    public bool Check(string value, Func<Person, string> getMember, Action<Person, string> action)
    {
        bool result = false;

        if (!string.IsNullOrEmpty(value))
        {
            if (getMember(this) != value)
            {
                result = true;
                action(this, value);
            }
        }

        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:07:37.103

您可以使用反射来做到这一点。这是一个示例实现（需要添加额外的代码来处理数组等）

```
 public class Person
    {
        public bool UpdateFromOther(Person otherPerson)
        {
            var properties =
                this.GetType()
                    .GetProperties(
                        BindingFlags.Instance | BindingFlags.Public | BindingFlags.SetProperty
                        | BindingFlags.GetProperty);

            var changed = properties.Any(prop =>
            {
                var my = prop.GetValue(this);
                var theirs = prop.GetValue(otherPerson);
                return my != null ? !my.Equals(theirs) : theirs != null;
            });

            foreach (var propertyInfo in properties)
            {
                propertyInfo.SetValue(this, propertyInfo.GetValue(otherPerson));
            }

            return changed;
        }

        public string Name { get; set; }
    }

    [Test]
    public void Test()
    {
        var instance1 = new Person() { Name = "Monkey" };
        var instance2 = new Person() { Name = "Magic" };
        var instance3 = new Person() { Name = null};

        Assert.IsFalse(instance1.UpdateFromOther(instance1), "No changes should be detected");
        Assert.IsTrue(instance2.UpdateFromOther(instance1), "Change is detected");
        Assert.AreEqual("Monkey",instance2.Name, "Property updated");
        Assert.IsTrue(instance3.UpdateFromOther(instance1), "Change is detected");
        Assert.AreEqual("Monkey", instance3.Name, "Property updated");

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T18:12:13.500

这只是我输入的评论，您可以参考对您的问题的评论，了解有关此技术的更多详细信息。

定义这个类：

```
[AttributeUsage(AttributeTargets.Property)]
public sealed class CloningAttribute : Attribute
{
} 
```

在你的`Person`课堂上：

```
[Cloning] // <-- applying the attribute only to desired properties
public int Test { get; set; }

public bool Clone(Person other)
{
    bool changed = false;
    var properties = typeof(Person).GetProperties();
    foreach (var prop in properties.Where(x => x.GetCustomAttributes(typeof(CloningAttribute), true).Length != 0))
    {
        // get current values
        var myValue = prop.GetValue(this, null);
        var otherValue = prop.GetValue(other, null);
        if (prop.PropertyType == typeof(string))
        {
            // special treatment for string:
            // ignore if null !!or empty!!
            if (String.IsNullOrEmpty((string)otherValue))
            {
                continue;
            }
        }
        else
        {
            // do you want to copy if the other value is null?
            if (otherValue == null)
            {
                continue;
            }
        }

        // compare and only check 'changed' if they are different
        if (!myValue.Equals(otherValue))
        {
            changed = true;
            prop.SetValue(this, otherValue, null);
        }
    }
    return changed;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T18:34:25.340

您可以创建通用重写工具，将查看具有特定属性的属性：

```
 public class Updater
    {
        public static bool Update(object thisObj, object otherObj)
        {
            IEnumerable<PropertyInfo> props = thisObj.GetType().GetProperties().Where(
                prop => Attribute.IsDefined(prop, typeof(UpdateElementAttribute)));

            bool change = false;
            foreach (var prop in props)
            {
                object value = prop.GetValue(otherObj);

                if (value != null && (value is string || string.IsNullOrWhiteSpace((string)value)))
                {
                    if (!prop.GetValue(thisObj).Equals(value))
                    {
                        change = true;
                        prop.SetValue(thisObj, value);
                    }
                }
            }
            return change;
        }
    } 
```

然后就使用它：

```
public class Person
    {
        public bool UpdateFrom(Person otherPerson)
        {
            return Updater.Update(this, otherPerson);
        }
        [UpdateElement]
        public string Name { get; set; }
        [UpdateElement]
        public string LastName { get; set; }
    } 
```

# mysql - MySQL Workbench 对象浏览器不工作

> ID：15854016
> 
> 赞同：0
> 
> 时间：2013-04-06T17:36:48.330
> 
> 标签：mysql, mysql-workbench

我已经（我相信）使用包含 MySQL Workbench 的 MySQL Installer 在 Windows 7 上成功安装了 Mysql 版本 5.6.10.1。

该设置还有一些示例数据。（示例数据库和表。）

当我使用命令行（mysq.exe）时，我可以很好地看到 db 和表。此外，当我使用 Navicat Lite 时，没有任何问题..

但是，当我使用 MySQL Workbench **Tables Fetching**消息时，数据库的屏幕上会永远存在。请看截图：

![正在获取表格...](https://i.stack.imgur.com/Q1jyK.png)

我也可以在 MySQL Workbench 上运行查询，例如

选择世界；显示表格；等等......他们也会工作得很好......

但是，对象浏览器有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:02:05.303

这就是我解决问题的方法：

由于某种原因，mysql_update 对我不起作用。我收到很多错误说“找不到文件......”所以这不起作用。

我卸载了 MYSQL 服务器。我从 Program Files 和 Program Files(x86) 中删除了与 Mysql 相关的所有内容 我从文件夹 c:\ProgramData 中删除了与 Mysql 相关的所有内容

然后，我使用 MySQL 安装程序重新安装了 MySql。

问题解决了。

# http - 什么 RFC 定义了通过 HTTP 传输的数组？

> ID：15854017
> 
> 赞同：6
> 
> 时间：2013-04-06T17:37:08.973
> 
> 标签：http, web-applications, bnf, rfc

什么 RFC 定义了通过 HTTP 传递的数组？大多数 Web 应用程序平台允许您通过 GET 或 POST 提供一组参数。以下 URL 是一个示例：

```
http://localhost/?var[1]=one&var[2]=two&var[3]=three 
```

[RFC1738](http://www.ietf.org/rfc/rfc1738.txt)定义了 URL，但是 URL 的 Backus-Naur Form(BNF) 定义中缺少括号。此 RFC 也不涵盖 POST。理想情况下，我希望获得 RFC 中定义的此功能的 BNF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-18T18:17:02.573

根据[Wikipedia](https://en.wikipedia.org/w/index.php?title=Query_string&oldid=639083476)，没有单一规范：

> **虽然没有明确的标准**，但大多数 Web 框架允许将多个值与单个字段相关联（例如 field1=value1&field1=value2&field2=value3）

该 Wikipedia 文章链接到以下 Stack Overflow 帖子，该帖子涵盖了一个类似的问题：[重复 HTTP GET 查询键的权威位置](https://stackoverflow.com/questions/1746507/authoritative-position-of-duplicate-http-get-query-keys)

这里的问题是表单参数可以是任何你想要的。一些 Web 框架已经选择`key[number]=value`了数组，而另一些则没有。有趣的是，[RFC1866](https://www.rfc-editor.org/rfc/rfc1866)第 8.2.4 节，第 48 页（注意：此 RFC 是历史的而非当前的）显示了一个示例，其中在 POST 表单中使用了两次相同的密钥：

```
name=John+Doe
&gender=male
&family=5
&city=kent
&city=miami
&other=abc%0D%0Adef
&nickname=J%26D 
```

在 W3C 方面，HTML 4.01 有[一些](http://www.w3.org/TR/html401/interact/forms.html#form-content-type)关于如何编码表单参数的信息。可悲的是，这不包括数组。

在撰写本文时，我认为您的问题没有正确答案 - 没有 IETF RFC 或 W3C 规范定义您感兴趣的行为。

（作为旁注，[W3C HTML JSON 表单提交草案规范](http://www.w3.org/TR/html-json-forms/)涵盖了发布数组，谢天谢地。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T23:28:56.400

URI 由 RFC 3986 定义。

但是，您要问的是表单参数的编码。您需要为此查找 HTML 规范。

# iphone - UINavigationController pushViewController 停止工作

> ID：15854019
> 
> 赞同：0
> 
> 时间：2013-04-06T17:37:44.640
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller

我对 UINavigationController 有疑问。它关于客户端或服务器端注销。

服务器端注销的想法是这样的，每 15 秒调用一个函数来检查应用程序是否仍然登录。如果不是这样，则跳转到 LoginViewController。

注销也可以从应用程序本身发生。它执行模拟代码。

有三个相关的控制器，LoginViewController 是我们想要结束的地方，SignOutController 是“退出”按钮所在的位置和 MainViewController。

以下是相关的代码部分。

首先， UINavigationController 像这样分配：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    splashScreenViewController_ = [[SplashScreenViewController alloc] initWithNibName:@"SplashScreenViewController" bundle:nil];

    uiNav_ = [[UINavigationController alloc] initWithRootViewController:splashScreenViewController_];
    uiNav_.navigationBar.barStyle = UIBarStyleBlackTranslucent;
    uiNav_.navigationBarHidden = YES;

    [window_ setRootViewController:uiNav_];

    [window_ makeKeyAndVisible];

    return YES;
} 
```

当按下“退出”按钮或应用程序发现服务器已强制注销时，将执行此代码（相同的代码，不同的功能）：

```
LoginViewController *loginView = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:nil];
[self.navigationController pushViewController:loginView animated:YES];
[loginView release]; 
```

如果它是服务器端注销，它只是重新加载 MainViewController，每 15 秒你会看到 MainViewController 滑入的动画。它从那里进入一个循环，每 15 秒重新加载一次。

如果您单击“退出”按钮，它将跳转到 MainViewController 而不是 LoginViewController 并开始上述相同的循环。

PS我已经检查过任何importend变量是否为零，并且我已经检查过初始化代码是否实际执行。

编辑：我想我没有提到这一点。我的应用程序 99% 的时间都可以正常工作。偶尔会发生这种情况，退出按钮不起作用，我开始这个循环。通常它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:00:15.720

对于新的 LoginViewController 滑入其中的 15 秒周期，您似乎并没有在意识到应用程序未登录后停下来检查它是否已登录。您应该有某种布尔值来存储它并取消计时器或您使用的任何东西。

我不明白你说按下注销按钮时会发生什么，但我不认为你正在制作一个好的用户界面。

我建议您通过将 loginViewController 作为 root 添加到导航控制器来启动应用程序。然后你添加不带动画的你想要开始的那个（例如 MainViewController）。每当应用程序从服务中注销时，您都会弹出视图控制器，直到第一个，这应该是登录的。

你有那个方法`popToRootViewControllerAnimated:`。

如果要保留启动画面，可以将其设置为应用程序的根视图控制器，并在加载完成后将其转换为 uiNavigationController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:08:52.720

计时器不会因为您将视图推到另一个视图上而自动停止。它会一直存在，直到它启动的控制器被释放，这只会在它从堆栈中删除后才会发生。

此外，您不需要在每次检查后将 MainViewController 推入堆栈，您最终会得到它的多个实例，每个实例都在另一个之上。

此外，在不真正了解应用程序架构的情况下，将 LoginViewController 设为模态似乎是个好主意，如果他们没有登录，他们真的无能为力吗？模态呈现的视图控制器不会受到导航堆栈的影响，并且比手动推送/弹出控制器更容易保留用户导航堆栈。

# html - 在 IE 中制作 3 个 div（左、中、右）

> ID：15854020
> 
> 赞同：2
> 
> 时间：2013-04-06T17:37:52.580
> 
> 标签：html, css, internet-explorer

我有 3 个 div 在 chrome firefox 中正确显示，但是在 IE 中，它们的显示方式不同......

我想显示这样的东西

![在此处输入图像描述](https://i.stack.imgur.com/gpl8I.png)

但是，在 IE7、IE8、IE9 中，我得到： ![在此处输入图像描述](https://i.stack.imgur.com/MtOq7.png)

我将代码添加到 jsfiddle 并在 IE 上运行，似乎没问题，但在服务器中显示如上图所示......

可能有什么问题，IE 中是否缺少一行代码？

请看看我的小提琴 [http://jsfiddle.net/QcayB/2/](http://jsfiddle.net/QcayB/2/)

这是html

```
<div id="wrapper">
         <div id="header">
             <img src="http://www.astrosurf.com/re/tse_20060329_earthshine.jpg" width="500" height="478" alt=""/>
         <h1>           </h1>
         </div>

         <div id="main">

          <div id="col_izq">
            <p>
            </p><div id="usa">      
        <a id="usajq" href="#"><span class="textots">left</span></a>
        <a id="usajql" href="#"><span class="textotsl">left</span></a>
        </div>
          <p></p>
                    </div>
          <div id="col_medio">

          </div>

          <div id="col_der">
            <p>
            </p><div id="mexico">       
        <a id="usajq" href=""><span class="textotst">right</span></a>
        <a id="usajql" href=""><span class="textotslt">right</span></a>

        </div>
          <p></p>
              </div>
    </div>

   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:54:40.773

您的页面上可能有类似的内容？

```
<meta http-equiv="X-UA-Compatible" content="IE=7"> 
```

您的服务器也可能在响应标头中发送 X-UA-Compatible。

# php - 分页和在php中传递url参数

> ID：15854023
> 
> 赞同：0
> 
> 时间：2013-04-06T17:38:13.567
> 
> 标签：php

我的`index.php`页面有一个表格。验证后，参数 from`index.php`在 URL 中传递到另一个名为`test1.php`.

`test1.php`有分页，因此，页面不断刷新，我的 URL 参数消失了。我希望我的参数在`test1.php`分页时保留，因为参数和数据`test1.php`将用于`test2.php`

```
index.php
<a href="test1.php?test=".<?php urlencode($var)?> > Go </a>

test1.php
$var1= $_REQUEST['test'];
<a href="test2.php?test=".<?php urlencode($var1)?> > Go </a>

test2.php
$param = $_REQUEST['test']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:40:29.857

这可能是因为您正在创建一个名为`$param`但`$params`在您的`urlencode()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:42:13.360

请参阅 $_SERVER['REQUEST_URI'] 并将您的 url 与已经存在的请求变量连接起来。

# sass - 创建一个逗号分隔的空格分隔列表——错误的 append() 行为

> ID：15854029
> 
> 赞同：0
> 
> 时间：2013-04-06T17:39:05.410
> 
> 标签：sass

我想创建一个逗号分隔的空格分隔列表。

我希望得到以下元列表：`( (1 2), (3 4) )`.

我不能使用文字，因为元列表应该从存储在变量中的现有列表中组装出来。所以我用`append()`.

我的问题是`append()`打破了第一个列表，产生`( 1, 2, (3 4) )`.

```
$meta-list: append( ((1 2)), (3 4), comma)
@warn $meta-list
// WARNING: 1, 2, 3 4

@warn nth($meta-list, 1)
// WARNING: 1

// Just to make sure:
@warn @warn nth( ( (1 2), (3 4) ), 1)
//WARNING: 1 2 
```

为什么会发生这种情况以及如何正确组装元列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:45:20.010

好的，我明白了。

解决方法是先创建一个空白列表。

```
$meta-list: ()
$meta-list: append( $meta-list, (1 2), comma)
$meta-list: append( $meta-list, (3 4), comma)

@warn $meta-list
// WARNING: 1 2, 3 4

@warn nth($meta-list, 1)
// WARNING: 1 2 
```

# java - Java 支持按值传递。但无法弄清楚以下代码的原因

> ID：15854032
> 
> 赞同：0
> 
> 时间：2013-04-06T17:39:19.207
> 
> 标签：java, pass-by-value

代码：

```
class AB{
    int i=5;
}

class BC{
    public void test(AB a){
        a.i=10;
    }

}

public class ATest{

public static void main(String aa[]){
    AB a = new AB();
    //Base class variable value
    System.out.println(a.i);

    BC b = new BC();
    //Modifying the object "a"
    b.test(a);
    //Printing the base class object
    System.out.println(a.i);
}
}

// Output : 5
//          10 
```

如果是传值，输出应该是5和5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:51:44.860

Java 使用按值传递，但如果参数是对象 Java 会**按值**传递对对象的引用，因此被调用的方法可以更改对象的内容，而不是整个对象。

这并不意味着对象是通过引用传递的（Joachim Isaksson 的评论是错误的）。

**添加以回答 Arijeet Saha 的评论**：****

 **当我说“被调用的方法可以改变对象的内容，而不是整个对象”时，我的意思是如果你改变整个对象，调用者看不到变化。

考虑以下示例：

```
public void test(Person p) {
    p.setName("Pino");
    p = new Person();
    p.setName("John");
} 
```

第一行`test()`更改方法接收到的对象的内容，第二行更改整个对象（它为形参分配一个新对象），第三行更改新对象的内容。在这种情况下，调用者会看到一个`Person`名为“Pino”的对象，而不是“John”，因为调用者看不到第二行所做的更改`test()`；它不可见，因为对象不是通过引用传递的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:08:00.180

让我先弄清楚传值是什么意思？

这意味着您传递给方法的任何内容，它都会收到其副本而不是实际地址。

因此，在您的情况下，您也将值传递给变量 a，并且其值（对对象的引用或对对象的地址）被复制到方法（AB a）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:54:09.510

Java 的参数传递是相当棘手的——当一个对象被传递给一个函数时，你可以操作对象的字段但你不能操作对象本身。对象引用按值传递。所以，你可以说：

```
class someClass{
  int i = 5;
}

class Foo
{
  static void func(someClass c)
  {
     c.i = 3;
  }
} 

class MainClass{
  public static void main(){
    someClass c = new someClass();
    System.out.println(c.i);
    Foo.func(c);
    System.out.println(c.i);
  }
} 
```

期望您的输出是：

```
5
3 
```

对 c 字段的更改仍然存在。

但是如果操纵对象本身，这种操纵只会持续存在于`Foo.func()`该函数中而不是外部：

```
class someClass{
  int i = 5;
}

class Foo
{
  static void func(someClass c)
  {
     c.i = new someClass();
     c.i = 3;
     System.out.println(c.i);
  }
}

class MainClass{
  public static void main(){
    someClass c = new someClass();
    System.out.println(c.i);
    Foo.func(c);
    System.out.println(c.i);
  }
} 
```

期望您的输出是：

```
5
3
5 
```

发生了什么事？ci 在`MainClass.main()`in 中的值为 5 `Foo.func()`，c 本身被修改为指向 的另一个实例`someClass`，包含值 3。但是，此更改不会反映到已传递的实际对象中。`c`in`Foo.func()`和现在是不同的`MainClass.main()`对象。这就是为什么更改`c`of`Foo.func()`不会影响`c`in `MainClass.main()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T18:13:05.963

Java 总是*按值*传递参数。

了解值是什么（变量包含什么）很重要。

对于原语，它是价值本身。

对于对象，它是一个参考。

当您将对象作为参数传递时 - 复制了对该对象的引用，但它仍指向原始对象。**

# angularjs - 模拟服务以测试控制器

> ID：15854043
> 
> 赞同：42
> 
> 时间：2013-04-06T17:40:39.180
> 
> 标签：angularjs, jasmine

我有一个 ParseService，我想模拟它以测试所有使用它的控制器，我一直在阅读有关 jasmine 间谍的信息，但我仍然不清楚。谁能给我一个如何模拟自定义服务并在控制器测试中使用它的示例？

现在我有一个控制器，它使用服务插入一本书：

```
BookCrossingApp.controller('AddBookCtrl', function ($scope, DataService, $location) {

    $scope.registerNewBook = function (book) {
        DataService.registerBook(book, function (isResult, result) {

            $scope.$apply(function () {
                $scope.registerResult = isResult ? "Success" : result;
            });
            if (isResult) {
                //$scope.registerResult = "Success";
                $location.path('/main');
            }
            else {
                $scope.registerResult = "Fail!";
                //$location.path('/');
            }

        });
    };
}); 
```

服务是这样的：

```
angular.module('DataServices', [])

    /**
     * Parse Service
     * Use Parse.com as a back-end for the application.
     */
    .factory('ParseService', function () {
        var ParseService = {
            name: "Parse",

            registerBook: function registerBook(bookk, callback) {

                var book = new Book();

                book.set("title", bookk.title);
                book.set("description", bookk.Description);
                book.set("registrationId", bookk.RegistrationId);
                var newAcl = new Parse.ACL(Parse.User.current());
                newAcl.setPublicReadAccess(true);
                book.setACL(newAcl);

                book.save(null, {
                    success: function (book) {
                        // The object was saved successfully.
                        callback(true, null);
                    },
                    error: function (book, error) {
                        // The save failed.
                        // error is a Parse.Error with an error code and description.
                        callback(false, error);
                    }
                });
            }
        };

        return ParseService;
    }); 
```

到目前为止，我的测试如下所示：

```
describe('Controller: AddBookCtrl', function() {

    //  // load the controller's module
    beforeEach(module('BookCrossingApp'));

    var AddBookCtrl, scope, book;

    // Initialize the controller and a mock scope
    beforeEach(inject(function($controller, $rootScope) {
        scope = $rootScope;
        book = {title: "fooTitle13"};
        AddBookCtrl = $controller('AddBookCtrl', {
            $scope: scope
        });
    }));

    it('should call Parse Service method', function () {

        //We need to get the injector from angular
        var $injector = angular.injector([ 'DataServices' ]);
        //We get the service from the injector that we have called
        var mockService = $injector.get( 'ParseService' );
        mockService.registerBook = jasmine.createSpy("registerBook");
        scope.registerNewBook(book);
        //With this call we SPY the method registerBook of our mockservice
        //we have to make sure that the register book have been called after the call of our Controller
        expect(mockService.registerBook).toHaveBeenCalled();
    });
    it('Dummy test', function () {
        expect(true).toBe(true);
    });
}); 
```

现在测试失败了：

```
 Expected spy registerBook to have been called.
   Error: Expected spy registerBook to have been called. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-09T21:59:05.770

我做错的是没有将模拟服务注入到 beforeEach 中的控制器中：

```
describe('Controller: AddBookCtrl', function() {

    var scope;
    var ParseServiceMock;
    var AddBookCtrl;

    // load the controller's module
    beforeEach(module('BookCrossingApp'));

    // define the mock Parse service
    beforeEach(function() {
        ParseServiceMock = {
            registerBook: function(book) {},
            getBookRegistrationId: function() {}
       };
   });

   // inject the required services and instantiate the controller
   beforeEach(inject(function($rootScope, $controller) {
       scope = $rootScope.$new();
       AddBookCtrl = $controller('AddBookCtrl', {
           $scope: scope,
           DataService: ParseServiceMock
       });
   }));

   it('should call registerBook Parse Service method', function () {
       var book = {title: "fooTitle"}

       spyOn(ParseServiceMock, 'registerBook').andCallThrough();
       //spyOn(ParseServiceMock, 'getBookRegistrationId').andCallThrough();
       scope.registerNewBook(book);

       expect(ParseServiceMock.registerBook).toHaveBeenCalled();
       //expect(ParseServiceMock.getBookRegistrationId).toHaveBeenCalled();
    });
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-03T12:43:29.017

您可以注入您的服务，然后像这样使用 spyOn.and.returnValue() ：

```
beforeEach(angular.mock.module('yourModule'));

beforeEach(angular.mock.inject(function($rootScope, $controller, ParseService) {
    mock = {
        $scope: $rootScope.$new(),
        ParseService: ParseService
    };
    $controller('AddBookCtrl', mock);
}));

it('should call Parse Service method', function () {
    spyOn(mock.ParseService, "registerBook").and.returnValue({id: 3});

    mock.$scope.registerNewBook();

    expect(mock.ParseService.registerBook).toHaveBeenCalled();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-24T16:21:44.847

事后 4 年遵循 Javito 的[回答。](https://stackoverflow.com/q/15854043/5292302)Jasmine 在 2.0 中更改了它们的语法，用于调用间谍的真实方法。

**改变：**

> ```
> spyOn(ParseServiceMock, 'registerBook').andCallThrough(); 
> ```

**到：**

```
spyOn(ParseServiceMock, 'registerBook').and.callThrough(); 
```

[来源](https://jasmine.github.io/2.0/introduction.html#section-Spies)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-07T06:55:34.070

在您的项目中包含*angular-mocks.js并通过*[以下链接](http://docs.angularjs.org/api/ngMockE2E.%24httpBackend)仔细阅读。

# android - 安卓应用程序中的谷歌地图（V2）

> ID：15854044
> 
> 赞同：1
> 
> 时间：2013-04-06T17:40:43.810
> 
> 标签：android, google-maps, gps, google-maps-markers, google-maps-api-2

刚刚熟悉了 Google Maps API (v2) 并将其集成到我的 android 应用程序中，我有 2 个问题我没有找到最好的方法：

首先，始终关注当前用户位置（如 GPS 应用程序）。我所做的是在 onCreate 中我得到了用户位置（根据我在这里和那里找到的一些东西））

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        MapFragment mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.map);

        LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        String bestProvider = locationManager.getBestProvider(criteria, true);
        Location location = locationManager.getLastKnownLocation(bestProvider);
        LatLng currentUserPosition = new LatLng(location.getLatitude(), location.getLongitude());
        // setting the cam position to current position
        CameraPosition camPosition = new CameraPosition(currentUserPosition, 17f, 30f, 0f);
        CameraUpdate update = CameraUpdateFactory.newCameraPosition(camPosition);
        mapFragment.getMap().animateCamera(update);

        // updating map every second
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                1000, // 1-second interval.
                10, // 10 meters.
                listener);
} 
```

哪里`listener`是这样`LocationListener`配置的：

```
private final LocationListener listener = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onLocationChanged(Location location) {
        CameraPosition camPosition = new CameraPosition(new LatLng(location.getLatitude(), location.getLongitude()), 17f, 30f, 0f);
        MapFragment mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.map);
        CameraUpdate update = CameraUpdateFactory.newCameraPosition(camPosition);
        mapFragment.getMap().animateCamera(update);
    }
}; 
```

这是正确的方法吗？
第二件事是用户可以触摸地图并在地图上动态添加标记（带有他自己的标题和东西）。我试图找到（但没有）一种在标记之间绘制路径并像 gps 应用程序一样工作的方法。这甚至可能吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:48:17.073

I strongly suggest following the Developer Guide tutorial from the [documentation](https://developers.google.com/maps/documentation/android/) for the proper way to integrate Maps Android API v2 into your app, and also checking the [sample code](https://developers.google.com/maps/documentation/android/intro#sample_code) bundled with the Google Play services SDK.

The best (and easiest) way to automatically follow user's (My Location dot) location is implementing `OnMyLocationChangeListener` and updating the camera accordingly in the callback provided by that interface.

For creating a series of line segments that connect the markers you should be able to use the `Polyline` class. **Edit**: You may find this related [answer](https://stackoverflow.com/a/16126547/1948704) useful for drawing a path between two markers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:27:48.107

那么实际上`Google Map API V2`你可以使用：

```
map.setMyLocationEnabled(true); 
```

这将在 Google 地图窗口上创建一个图标以跟随用户当前位置。实际上我认为实现整个`LocationListener`.

关于标记问题，您需要实现某种窗口，用户可以在其中设置所有标记数据。然后您可以像这样动态添加标记：

```
marker = map.addMarker(new MarkerOptions().position(latlng).title(markersTitleArray[i]).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker))); 
```

如果要在单击地图时添加此标记，则需要实现：

```
map.setOnMapClickListener(this);
map.setOnMapLongClickListener(this); 
```

在你的`Activity`.

最后关于你的最后一个问题，因为你已经得到了我关于如何`Polyline`在地图上绘制方向的答案：

[在 GoogleMap SupportMapFragment 上绘制 2 个 GeoPoints 之间的行车路线](https://stackoverflow.com/questions/16125868/draw-driving-route-between-2-geopoints-on-googlemap-supportmapfragment/16126547#16126547)

# mysql - MySQL 与 VisualStudio 2012 Ultimate

> ID：15854049
> 
> 赞同：0
> 
> 时间：2013-04-06T17:41:16.820
> 
> 标签：mysql, visual-studio-2012

我正在使用 Microsoft Visual Studio 2012 Ultimate，我必须建立与 MySQL 数据库的连接。

我阅读了以下线程： [Visual Studio 2012 上的 mySQL DataSource](https://stackoverflow.com/questions/12684047/mysql-datasource-on-visual-studio-2012)

解决方案“正在工作”......分别我可以看到“MySQL 数据库”作为可能的数据源单击“继续”按钮后，我必须输入服务器名称、用户名和密码。

现在我的问题：

如果我只键入或复制一个字符，则新窗口会关闭而没有任何错误消息或原因......我试图在这个平台和不同的平台上找到解决方案，但我找不到......

我将不胜感激

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:10:14.180

我有一个想法，所以我尝试使用屏幕键盘......这样就可以插入所需的数据，如服务器名称、用户名等等......愚蠢的解决方案，但它有效，我只是喜欢插入日期一次...

# laravel - 从路由获取响应

> ID：15854052
> 
> 赞同：-2
> 
> 时间：2013-04-06T17:41:26.273
> 
> 标签：laravel

在 Laravel 中，在以下示例中，如何将来自路由的 json 响应分配给`/api/topics`后端`$topics`中的变量？

接口：

```
Route::get( '/api/topics', function()
{
    return Topic::all();
}); 
```

后端：

```
Route::get( '/backend/topics', function()
{
    $topics = // call to route /api/topics goes here;

    return View::make( 'backend.topics' )->with( array( 'topics' => $topics ) );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:13:40.750

如果您调用您的 URL，您将不会有一个 JSON 对象作为回报，而是一个 JSON 字符串，您需要对其进行解码。要检索页面的内容，您可以简单地使用 file_get_contents。

```
Route::get( '/backend/topics', function()
{
    $topics = file_get_contents('/api/topics');
    // you may test if $topics !== FALSE
    $topics = json_decode($topics);

    return View::make( 'backend.topics' )->with( array( 'topics' => $topics ) );
}); 
```

这是简单的方法。您可能想使用 PHP REST 客户端来处理 HTTP 状态代码等...

# zsh - 如何将参数切片传递给 zsh 中的命令？

> ID：15854054
> 
> 赞同：1
> 
> 时间：2013-04-06T17:41:32.793
> 
> 标签：zsh, zshrc

我有这个功能：

```
find () {
  case "$1" in
  package)
      pacman -Ss
      ;;
  file)
      echo "Find file"
      ;;
  *)
      echo "You cannot find something like this."
     ;;
  esac
} 
```

我的目标是能够做类似的事情`find package foo`。然而，看起来 the`foo`没有作为参数传递给 pacman。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-10T17:16:20.843

为不同数量的给定参数提出了以下简单的解决方案，假设您想将前两个字符串切掉。

因此，假设您正在接受一些论点并且您知道要排除多少个论点，您可以像这样将其分割

```
#!/bin/bash
array=${@: (($#-2)),-1}
for element in $array; do
    echo $element
done 
```

使用它的一个示例，其中 (($#-2)) 中的 -2 是您希望从一开始就排除的参数数量。

```
$ ./script.sh some arguments given to the script
$ given
$ to
$ the
$ script 
```

哦，顺便说一句，我正在使用 zsh，所以 - 如果那里有不受支持的东西，我深表歉意。不这么认为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:06:13.040

这就是你所需要的。试试这个：

```
寻找 （） {
  案例“$1”在
  包裹）
      转移
      吃豆子 -Ss $@
      ;;
  文件）
      echo "查找文件"
      ;;
  *)
      echo "你找不到这样的东西。"
     ;;
  经社理事会
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:51:29.360

试试这个：

```
寻找 （） {
  案例“$1”在
  包裹）
      吃豆子-SS $2
      ;;
  文件）
      echo "查找文件"
      ;;
  *)
      echo "你找不到这样的东西。"
     ;;
  经社理事会
}

```

# delphi - Indy10 SSL 首次连接失败

> ID：15854057
> 
> 赞同：1
> 
> 时间：2013-04-06T17:41:54.957
> 
> 标签：delphi, indy10

我遇到了与[此问题中提出的问题非常相似的问题](https://stackoverflow.com/questions/13284948/delphi-2007-and-indy-10-using-https-and-ssl)（由于加载 SSL dll 的“问题”而必须在第一次加载时连接两次），但我很确定我使用的是最新版本的 Indy所以那里提出的解决方案不能解决我的问题。

我正在使用 Delphi7，并且我选择*不*从 Delphi7 安装程序安装 Indy，因为该版本非常过时。在下载和安装 Indy10（从 SVN 源）之前，我确实从最新的 SVN 源安装了 Indy9，但我重新配置了 IDE 和项目设置以使用新的 Indy10 组件/路径而不是 Indy9。显然，该项目正在使用 Indy10 构建，因为我必须更改很多方法以匹配所有 Indy10 签名以进行编译。

我的 Indy10 SVN 存储库已从以下位置签出：[https](https://svn.atozed.com:444/svn/Indy10/trunk/Lib) ://svn.atozed.com:444/svn/Indy10/trunk/Lib并显示大约 2 周前的最后一次提交修订版 4972——这看起来不像“一些真正的旧版 Indy10”。

我已经从[http://opendec.wordpress.com/](http://opendec.wordpress.com/)的二进制构建中下载了适用于 Win32 的 OpenSSL 1.0.1e （从我之前提到的其他 stackoverflow 问题中推荐的位置）并将其放在与我构建的 .exe 相同的文件夹中

这是我现在用来打开 SSL 连接的代码：

```
 try
    POP.Connect(Server,Port,Protocol,UserName,Password,TimeOut);
  Except
    on e : EIdOSSLCouldNotLoadSSLLibrary do
    begin
      ShowMessage('Failed to load: ' + WhichFailedToLoad());
      POP.Connect(Server,Port,Protocol,UserName,Password,TimeOut);
    end;
  end; 
```

但是...这会导致 EIdOSSLCouldNotLoadSSLLibrary 异常，并且添加 WhichFailedToLoad 会显示完全相同的组件列表，这表明它需要 OpenSSL 的“indy specific”版本：

![加载失败](https://i.stack.imgur.com/RuDax.gif)

但是等一下…… Remy 在链接的问题中回答说：“Indy 10 已更新为不再需要定制的 DLL。它现在按原样使用标准化的 OpenSSL DLL。” 那么为什么它会抱怨它需要 Indy 特定的功能呢？

我该如何解决为什么它第一次无法连接/说它需要我理解不再需要的功能？我期望它不应该寻找 indy 特定的功能不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:13:50.947

我的猜测在问题的评论中得到证实，是您的编译器正在寻找 Indy 9 而不是 Indy 10 来构建您的项目。

事情可能会变得更糟，因为您的 IDE 可能在设计时使用一个版本，而编译器可能使用不同的版本。事实上，IDE 和编译器是链的不同部分，您可以破坏两者之间的原始同步。因为那样，我将解释这两种情况，正如我稍后解释的那样，你必须同时改变这两种情况。

## IDE 和设计时间

设计时包由 IDE 加载以在您工作时创建对象，在对象检查器中向您显示该对象的属性，创建表单 DFM 文件并在您求助于 IDE 生成时获取要使用的方法用于响应事件的帕斯卡代码。

对于 IDE，您可以通过右键单击任何 Indy 组件来检查您在设计时使用的版本，如图所示。

![在此处输入图像描述](https://i.stack.imgur.com/N3S75.png)

要更改您在设计时使用的版本，请转到`Component\Install packages`并检查列表中的正确版本。您不能同时加载 Indy 9 和 Indy 10。

## 编译器和运行时

编译器使用*库路径*来查找您在项目中使用的不属于项目本身的单元，并将该代码与您的代码一起编译以生成可执行文件。

要检查哪个 Indy 版本链接到您的可执行文件，您可以`Version`使用所有 INdy 组件上的属性，例如：

```
ShowMessage('Indy version: ' + MyIndyComponent.Version); 
```

要更改编译器首先找到的内容，您必须更改路径。您可以从 IDE 内部执行此操作。在现代 Delphi 中，您可以签入`Tools\Options\Delphi options\Library\Library path\`并且`Project\Options\Delphi compiler\Search path\`（我只是不记得 D7 中的选项在哪里）。

## 印地 9/10 案例

Indy 引入了接口破坏性更改，使得无法使用 Indy 10 编译为 Indy 9 编写的项目。事实上，项目的管理员不会等待主要版本破坏代码兼容性，并且您希望被迫调整您的升级到任何次要版本时的代码，如果它碰巧有不同的界面。

因此，您肯定在编译/运行时和 IDE/设计时都在使用 Indy 9，因此您必须在您的环境中进行调整。之后，准备重新编写部分代码进行调整。一旦你了解了发生了什么变化并学会了如何适应，变化就相当简单了。细节超出了这个答案的范围，但互联网上有足够的信息让你弄清楚如何去做。

# vim - 同时使用换行和换行选项

> ID：15854060
> 
> 赞同：3
> 
> 时间：2013-04-06T17:42:13.223
> 
> 标签：vim, line-breaks

的文档`linebreak`说：

> 当 'wrap' 选项关闭或 'list' 开启时，不使用该选项。

我觉得这很不满意。**是否有使用某些`listchars` *和* `linebreak`的解决方法？**

我的理想`.vimrc`是这样的：

```
set linebreak
set list
set listchars=tab:▸–,trail:·,extends:»,precedes:«,nbsp:⍽ 
```

......所以我实际上并不感兴趣，这可能是与冲突`eol:$`的原因（这只是我的假设，但我认为没有其他合理的理由让他们发生冲突）。`list``linebreak`

有一个[密切相关的问题](https://stackoverflow.com/q/2470833/1968)，但 OP 特别想要 EOL 标记，而接受的答案只解决这个问题，所以它对我没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:50:10.500

我猜想（但不确定）当前实现无法处理 Tab 字符缩小到时显示宽度的变化`^I`（假设它在 中没有值`'listchars'`）。无论如何，我认为 Vim 可以被增强以做你想做的事，尽管它可能不容易实现。[在vim_dev 邮件列表](http://www.vim.org/community.php)上提出这个请求可能是值得的。

没有什么好的解决方法；理论上可以使用新的*隐藏*功能来模拟 的某些内容`:set list`，但它会干扰语法高亮，并且只有一种高亮选择。

# android - 无法从使用 FragmentActivity 创建的选项卡中膨胀片段

> ID：15854064
> 
> 赞同：1
> 
> 时间：2013-04-06T17:42:24.250
> 
> 标签：android, android-layout, android-fragmentactivity, android-tabs

我一直按照此页面中的示例（[http://android-er.blogspot.in/2012/06/create-actionbar-in-tab-navigation-mode.html](http://android-er.blogspot.in/2012/06/create-actionbar-in-tab-navigation-mode.html)）在我的应用程序中创建 3 个选项卡。

目前我正在运行它，但是当我尝试修改选项卡上显示的信息（通过修改 xml 文件）时，我的应用程序崩溃了。

我想这是因为我试图从选项卡中调用另一个片段，正如您在此处看到的那样（这假设是示例中的 /res/layout/fragment_a.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<!-- Screen Design for today -->

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="15dip"
        android:text="Today HERE"
        android:textSize="18dip" />

</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
     >

    <fragment
        android:id="@+id/fragment1"
        android:name="com.myfont.mandi.main.MyInfoBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout>

</LinearLayout> 
```

如您所见，我正在尝试在选项卡上为另一个 Fragment 充气。我想这是我的问题。

任何人都可以帮助我吗？

谢谢！

# java - JFace 对话框按钮翻译

> ID：15854066
> 
> 赞同：4
> 
> 时间：2013-04-06T17:42:38.563
> 
> 标签：java, swt, jface

我正在创建一个独立的 SWT/JFace 应用程序。

我曾经使用普通的旧 SWT MessageBox：

```
int style = SWT.APPLICATION_MODAL | SWT.YES | SWT.NO;
MessageBox messageBox = new MessageBox (getShell(), style);
messageBox.setText ("Question");
messageBox.setMessage ("So?");
boolean result = messageBox.open() == SWT.YES; 
```

我尝试切换到 JFace MessageDialog

```
boolean result = MessageDialog.openQuestion(getShell(), "Question", "So?"); 
```

我遇到的问题是，在 SWT 中，Yes 和 No 按钮标签被翻译成我的语言，而在 JFace 中却不是这样。任何的想法？

我引用的 jar 是 swt 3.8.0、jface 3.8.0 和 jface 依赖 core.commands 3.6.1 和 equinox.common 3.6.100。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T20:10:38.677

在 SWT 的 MessageBox 类中，标签由操作系统设置。对于 JFace，您必须提供自己的翻译文件。[您可以在此处](http://www.eclipse.org/babel/downloads.php)获取适合您语言的版本。当然你也可以自己提供。此[链接](http://tutorials.jenkov.com/java-internationalization/resourcebundle.html)说明如何使用资源包进行翻译。您可以在 org/eclipse/jface/messages.properties 下找到原始翻译文件。您必须将自己的翻译文件（messages_[语言代码].properties）添加到项目中的相同包路径中。请注意，资源包与 OSGi 包没有任何共同之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T22:31:04.713

我有同样的问题。我使用的是 SWT 的 Messagebox。由于操作系统必须处理翻译，我通过更改控制面板中的区域设置对其进行了测试，但没有帮助。我们必须切换操作系统语言来实现这一点。对于 Windows 7 用户，必须升级到 Windows 终极包。这就是你如何做到的。 [http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/how-to-change-system-language-of-windows-7-home/d58fb37b-cb02-41c8-986f-22582fd35a12](http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/how-to-change-system-language-of-windows-7-home/d58fb37b-cb02-41c8-986f-22582fd35a12)。

我没试过，但值得一试。

# asp.net - Asp.Net 自定义资源提供程序：不可更新的构建

> ID：15854067
> 
> 赞同：1
> 
> 时间：2013-04-06T17:42:39.463
> 
> 标签：asp.net, resource-file

在我的 asp.net 网站中，我使用自定义资源提供程序从数据库中获取本地资源信息，

```
<globalization resourceProviderFactoryType="MyCustomResourceProvider" culture="en-US" uiCulture="en-US"> 
```

当我从 Visual Studio 调试或使用“预编译站点可更新”模式设置为 true 发布时，它工作正常。但是，当我将“可更新”模式更改为 false 时，它​​不会针对任何页面访问我的自定义资源提供程序。

以前有人遇到过这个问题吗？

更新 1：当我探索生成的程序集时，我发现用于获取本地资源的代码尚未生成，如果我使用自定义资源提供程序，aspnet_compiler 不会添加所需的代码。

# java - 使用 java image.getSubimage 裁剪图像的问题

> ID：15854069
> 
> 赞同：3
> 
> 时间：2013-04-06T17:42:50.157
> 
> 标签：java, image, crop

我有一个尺寸为 16x6080 的图像。这是一个堆叠的图像，其中包含 16x16 部分的国家标志。我的目标是仅从该图像中提取特定国家/地区的标志并将其保存为自己的文件。这是我当前的代码

```
 //Original Image
        BufferedImage image = ImageIO.read(new File(countryImageNamePath));

        System.out.println("Original Image Dimension: "+image.getWidth()+"x"+image.getHeight());

        //Get the cropped image
        BufferedImage out = image.getSubimage(0, 1808, 16, 16);

        //Create a file to stream the out buffered image to
        File croppedFile = new File(countryImagePath + countryName + ".gif");

        //Write the cropped file
        ImageIO.write(out, "gif", croppedFile); 
```

产生的输出是

```
Original Image Dimension: 16x6080
Write File : C:\Applications\WorldCoinParser\images\country\US.gif 
```

我为 Y 坐标输入什么值并不重要，我总是得到图像的顶部，从 x=0 和 y=0 开始，宽度和高度为 16。

有谁看到我在哪里搞砸了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T01:08:29.143

正如@MattPerry 所说，我们只需升级到 Java 7 就可以解决这个问题。

仅出于文档目的，该错误似乎是这个[http://bugs.sun.com/view_bug.do?bug_id=6795544](http://bugs.sun.com/view_bug.do?bug_id=6795544)并影响了 Java 6。

```
The reason of problem here is that the optimized writing loop (utilized 
 direct access to image data buffer) does not take into account a data 
 band offset (which is non-trivial for sub-images, for example). It results 
 in writing image data starting from top left corner of the parent image 
 instead of expected top left corner of the sub-image.

 We  should take into account data bands offset, calculated by translated
 raster instance. 
```

我可以使用 JDK5 重现这个错误

它适用于JDK7

# c++ - 在 C++ 中使用多个键映射

> ID：15854071
> 
> 赞同：5
> 
> 时间：2013-04-06T17:43:06.523
> 
> 标签：c++, key, std, stdmap, compound-key

我想通过它们的名称和索引来存储数据。换句话说，我想将`string`名称映射到对象并给它们一个自定义顺序。

我首先想到的是一`std::vector`对`string`密钥和对象。顺序由向量中的位置给出。

```
std::vector<std::pair<std::string, object> > 
```

但这种方法似乎不是最理想的，因为它不会自动检查`string`名称的唯一性。此外，首先按对象的顺序对对象进行分组感觉不对，因为从逻辑上讲，它们的第一顺序区别是名称。

我需要一个允许通过名称和索引访问的数据结构。

```
std::magic<std::string, unsigned int, object> collection;

// access by either string or unsigned int key
collection.insert("name", 42, new object());
collection["name"]
collection[42] 
```

这个用例是否已经有数据结构？如果没有，我怎样才能把它们放在一起，最好使用标准库？另外我想要一种在给定元素之后的位置插入新元素而不移动所有其他元素的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T01:06:17.660

Boost 专门为此目的提供了一组容器，请参阅： [boost::multiindex](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)

# django - Django 南迁移 introspect_test

> ID：15854074
> 
> 赞同：1
> 
> 时间：2013-04-06T17:43:22.060
> 
> 标签：django, django-models, django-south

我正在尝试进行简单的迁移，但出现错误

`django.db.utils.DatabaseError: (1050, "Table 'introspect_test' already exists")`.

在查看实际`MySQL`数据库时，我没有看到任何表被调用`introspect_test`，也没有在任何 Django 模型中定义这样的表。一点点 Google-Fu 告诉我，这`introspect_test`与外键约束和 South 的错误检查...或其他东西有关。

我认为这整个问题源于我自己的错误——在执行过程中`python manage.py migrate app_name`我不小心撞到了`CTRL-C`，因此停止了这个过程。

我想问题是：我该如何摆脱这个神秘`introspect_test`，以便我可以正常迁移？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:49:02.413

呃，愚蠢的我......我没有意识到表格`introspect_test`是全部大写的，因此没有按字母顺序排序。事实证明，由于笔记本电脑屏幕很小，因此`show tables;`列出了所有表格，但切断了前几名。由于有问题的表格被标记为`INTROSPECT_TEST`顶部。

我做了一个快速`drop table INTROSPECT_TEST`然后正常迁移。

固定的。

# actionscript-3 - 创建多个级别 AS3

> ID：15854079
> 
> 赞同：0
> 
> 时间：2013-04-06T17:44:13.927
> 
> 标签：actionscript-3, hittest

嘿伙计们，所以我在创建多个级别时遇到了一些麻烦。我不太确定我是否以正确的方式创建它们，但我有一个玩家和goal_1、goal_2 等。基本上当玩家hitTestObject 的goal_1 时，我希望它去一个名为level_2 的新函数，然后在那个hitTest 之后进入level_3。所以 Level_1 工作得很好，hitTest 工作正常，它初始化了 level_2 但是当我再次尝试 hitTest 玩家和 goal_2 甚至是 goal_1 时，它只是通过它而不做任何事情。

我现在明白了 level_2 并不是像 level_1 那样在每一帧都被调用，因为它不是 Enter_Frame 侦听器的一部分。但我不知道如何让多个 Enter Frame 事件同时运行。如果那甚至是创建多个级别的正确方法。

你能看到我能做些什么来让它发挥作用吗？

```
private function gameLoop(e:Event):void 
    {
        playerShoot();
        playerControl();
        playerStageBoundaries();

        checkEndGameCondition();
        checkPlayerOffScreen();

        level_1();
    }

    private function level_1():void 
    {

        if(player.hitTestObject(mGoal_1))
           {

            trace("Goal_1 Collision");
            //Remove button for constant movement
            btnShootPlayer = false;
            mGoal_1.destroyGoal_1();
            player.destroyPlayer();
            //Update High Score text
            nScore += 10;
            updateHighScore();
            stage.removeEventListener(Event.ENTER_FRAME, gameLoop);
            //Update level
            nLevel++;
            updatePlayerLevel();
            level_2();

           }else
           {

               checkEndGameCondition();
           }
    }

    public function level_2():void 
    {

        stage.addEventListener(Event.ENTER_FRAME, gameLoop);
       TweenMax.to(mGoal_1, 1, {y:40, repeat:-1, yoyo:true, ease:Power0.easeInOut});
        trace("Level_2 Initiated");
        //Keep Text Scores initiated
        updateHighScore();
        updatePlayerLives();

        player = new mPlayer();
        stage.addChild(player);
        player.x = (stage.stageWidth / 2) - 280;
        player.y = (stage.stageHeight / 2);

        mGoal_1 = new goal_1();
        stage.addChild(mGoal_1);
        mGoal_1.x = (stage.stageWidth / 2) + 300;
        mGoal_1.y = (stage.stageHeight) - 35;

        if (player.hitTestObject(mGoal_1))
        {
            trace("Level 2 Hit test works!");

            nScore += 10;
            updateHighScore();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:07:15.307

我没有仔细阅读所有代码，但我猜你可以使用函数变量。在类级别声明它（在任何函数之外）：

```
var _doFunction:Function; 
```

而不是调用 level1 函数，传递引用并调用 _doFunction：

```
_doFunction = level1;
_doFunction();//or _doFunction.call(); - see Adobes documentation 
```

完成第 1 级后，通过下一个级别：

```
_doFunction = level2; 
```

PS如果它有助于解决您的问题，请不要忘记接受答案。

# java - 从计算机读取文件

> ID：15854085
> 
> 赞同：2
> 
> 时间：2013-04-06T17:45:15.630
> 
> 标签：java

现在我有这个错误：

线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 4 在 Lotto1.main(Lotto1.java:37)

第 37 行：arr[count][0] = s.next() + ""+ s.next();

```
import java.io.*;
import java.util.*;

public static void main(String[] args) throws IOException  {

        File f = new File("D:\\Filipe\\Project Final\\src\\database_lotto.txt");
        Scanner s;
        try {
            s = new Scanner(f);

           BufferedReader reader = new BufferedReader(new FileReader(f));
            int lines = 0;
            while (reader.readLine() != null) {
                lines++;
            }
            reader.close();

            arr  = new String[lines][3];

            int count = 0;
            //while theres still another line
            while (s.hasNextLine()){
                arr[count][0] = s.next() + ""+ s.next();
                arr[count][1] = s.next();
                arr[count][2] = s.next();
               count++;                   
            }
        } catch (FileNotFoundException ex) {
           System.out.println("File does not exist");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:47:17.553

您没有将正确的路径放入 FileReader 中，仅放入 File f 中，您可以将 f 传递给 Filereader 而不是重复路径：

```
File f = new File("D:\\database_lotto.txt");
[...]
BufferedReader reader = new BufferedReader(new FileReader(f)); 
```

# php - 父/子在同一张桌子

> ID：15854086
> 
> 赞同：2
> 
> 时间：2013-04-06T17:45:19.843
> 
> 标签：php, mysql, sql, join

我有如下表结构：

```
id |parent|name |value
1  | 0    | aaa |
2  | 0    | bbb |
3  | 0    | ccc |
4  | 1    |     | 111
5  | 1    |     | 222
6  | 3    |     | 333 
```

如果有子记录，我想显示父级。

像：

（父 id + name + value 第一个孩子）

```
1 - aaa - 111
3 - ccc - 333 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:48:00.567

数据库中第一个孩子没有意义，可以通过取值的最小值`id`或最小值得到第一个孩子，但值在表中并没有按特定顺序存储，所以你无法分辨哪个值是第一个。

但是，假设`id`是自动增量列，那么第一个孩子的值是 minimum 的值`id`，那么你可以这样做：

```
SELECT
  t1.parent,
  t2.name,
  t1.value
FROM tablename AS t1
INNER JOIN
(
  SELECT MIN(id) AS id, parent
  FROM tablename
  GROUP BY parent
) AS t22 ON t22.id = t1.id AND t1.parent = t22.parent
INNER JOIN tablename AS t2 ON t1.parent = t2.id; 
```

在这里查看它的实际效果：

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/834637/11)

这会给你：

```
| PARENT | NAME | VALUE |
-------------------------
|      1 |  aaa |   111 |
|      3 |  ccc |   333 | 
```

* * *

**或者：**你可以通过最小值得到它：

```
SELECT
  t1.parent,
  t2.name,
  MIN(t1.value) AS value
FROM tablename AS t1
INNER JOIN tablename AS t2 ON t1.parent = t2.id
GROUP BY t1.parent, t2.name; 
```

看看它的实际效果：

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/834637/2)

这会给你：

```
| PARENT | NAME | VALUE |
-------------------------
|      1 |  aaa |   111 |
|      3 |  ccc |   333 | 
```

# iphone - 如何擦除在uiimageview上绘制的线条？

> ID：15854090
> 
> 赞同：0
> 
> 时间：2013-04-06T17:45:59.103
> 
> 标签：iphone, objective-c, cocoa-touch, uiimageview

我想擦除在 uiimageview 中的触摸事件中绘制的线条。我想在 touchesEnded 中调用 setNeedsDisplay 但它不起作用。

在 Canvas.m 我有：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    self.location = [touch locationInView:self];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self];

    UIGraphicsBeginImageContext(self.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:02:00.973

简单的解决方案 - 在开始时保存原始图像，当您想擦除线条时，只需执行`self.image = savedImage`

但是，更好的解决方案（具有更好的性能）将是根本不更改图像，而是在图像上具有透明视图并在其中`UIImageView`绘制。绘图也可以简单得多（例如，使用`CGImageRef`缓冲区而不是每次都创建图像上下文`UIGraphicsBeginImageContext`）。

# core-data - 正在同时枚举核心数据线程安全中的托管对象

> ID：15854092
> 
> 赞同：0
> 
> 时间：2013-04-06T17:46:10.430
> 
> 标签：core-data, thread-safety, enumeration, nsmanagedobjectcontext, nsarraycontroller

我需要更新 Core Data 中每个排列对象的值，我目前正在使用循环。但我想知道以下代码是否是线程安全的，以及**为什么**.

ManagedObjectContext 不是线程安全的，[这里解释](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)

```
[myArrayController.arrangedObjects enumerateObjectsWithOptions:NSEnumerationConcurrent 
                                                    usingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    // do some work

    [obj setValue:@"some value" forKey:@"aKey"];            
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:13:22.620

从某种意义上说是*安全*的，虽然块的多个副本可能同时运行，但它们都在不同的对象上工作。当然，假设您的调用对`setValue:forKey:`集合中的其他对象没有副作用。

从某种意义上说，如果另一个线程或队列尝试访问此集合中的对象，*则不安全*，没有什么可以阻止它同时与同一个对象进行混淆。该块不会锁定其他地方的其他操作，因此如果您可能同时在其他地方使用这些对象，则需要更多预防措施。

# php - 如何从外部 html 中获取内部 html 标签？

> ID：15854096
> 
> 赞同：-3
> 
> 时间：2013-04-06T17:46:22.003
> 
> 标签：php, curl, web-scraping

我正在尝试学习如何从网上抓取图像。有一页我想从 div 中抓取图像。div 的 id 是“酒店”。并且“img”的类是“懒惰的”。为了从分区的图像标签中获取图像并通过 echo 显示它，我正在应用以下代码。但它没有显示。

```
$e1=$html->find('div[id=hotels]');
$e2=$e2->find('img[class=lazy]');
echo $e2;
exit; 
```

谁能告诉我这是调用部门内部标签的正确方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T17:47:54.987

你有一个错字：

```
$e2=$e2->find('img[class=lazy]');
     ^---- this should be $e1 
```

# php - Google Maps V3 在 Android 浏览器中可用作 html 文件，但不能用作 php 文件？

> ID：15854102
> 
> 赞同：1
> 
> 时间：2013-04-06T17:46:49.827
> 
> 标签：php, android, html, browser, map

我有一个使用 html 文件扩展名的谷歌地图 v3 网页 (html5)，但是当 php 文件扩展名用于 Android 浏览器中完全相同的代码时失败。

这是具有相同代码和不同文件扩展名的两个文件：

适用于 html 扩展 [http://www.wildlifesightings.net/Animals/SubmitAnimalSighting.html?SubCategory=Bird&gCommonName=Mourning](http://www.wildlifesightings.net/Animals/SubmitAnimalSighting.html?SubCategory=Bird&gCommonName=Mourning) Dove&gCommonNameID=66&Mobile=yes

不适用于 php 扩展 [http://www.wildlifesightings.net/Animals/SubmitAnimalSighting.php?SubCategory=Bird&gCommonName=Mourning](http://www.wildlifesightings.net/Animals/SubmitAnimalSighting.php?SubCategory=Bird&gCommonName=Mourning) Dove&gCommonNameID=66&Mobile=yes

Android 智能手机浏览器是否会根据文件扩展名 .html 和 .php 以不同方式解释 html5 页面？

# c# - unity跑后期构建例程

> ID：15854106
> 
> 赞同：1
> 
> 时间：2013-04-06T17:47:13.467
> 
> 标签：c#, dependency-injection, unity-container

有没有办法告诉 Unity DI Container 在完成构建对象后运行某个例程？

我的想法是我希望 Unity 处理对象构造，然后用一组我自己的例程来补充构造的对象。因此`InjectionFactory`，与我必须基本上接管对象构造的情况不同，我希望 Unity 在插入之前先运行它的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:24:12.890

`InjectionMethod`如果初始化逻辑在同一个类中，您可以使用：

```
[TestClass]
public class UnitTests
{
    [TestMethod]
    public void Initialize_should_get_called_on_object_construction()
    {
        var container = new UnityContainer();

        container.RegisterType<IDependency, Dependency>(
            new InjectionMethod("Initialize" /*, parameters if present */)
        );

        var dependency = container.Resolve<IDependency>();

        Assert.IsNotNull(dependency);
        Assert.AreEqual("init", dependency.Value);
    }
}

public interface IDependency
{
    string Value { get; set; }
    void Initialize();
}

public class Dependency : IDependency 
{
    public string Value { get; set; }

    public void Initialize() {
        this.Value = "init";
    }
} 
```

如果没有，您将需要创建一个*抽象工厂*来完成这项工作。

# python - 产生错误结果的阶乘函数

> ID：15854108
> 
> 赞同：-3
> 
> 时间：2013-04-06T17:47:24.180
> 
> 标签：python, recursion, factorial

我知道计算整数阶乘的方法不止一种，还有一个`math`模块。但是我试图组合一个返回错误结果的简单函数。我很想知道这里出了什么问题。例如，如果我将 2 作为参数传递，则返回 3，如果为 3，则返回 8。

```
>>>def factorial(n):

        if n > 0:
            result = n * n-1
            factorial(n-1)
            return result 

>>>factorial (2)

   3 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T17:50:32.363

你在这里错过了一些不同的东西。首先，您实际上需要乘以递归调用的结果，否则递归不会为您做任何事情。其次，您需要指定递归结束的基本情况。也就是说，您需要告诉函数当 n == 0 时该做什么。您正在寻找类似的内容：

```
if n == 0:
    return 1
elif n > 0:
    return n * factorial(n-1) 
```

我的 python 生锈了，所以语法可能会关闭，但你明白了。

另外，请注意，您获得回报的原因是您的函数本质上是在计算`n*n-1`，由于运算顺序的原因，它使您比 的平方小一`n`。

还有一件事，只是为了好玩。到目前为止，我编写的函数将为大数字创建一个大堆栈，这可能是一个好主意，也可能不是一个好主意。因此，另一种方法是使其尾递归。许多编译器将优化尾递归函数，尽管根据评论 Python 没有。为此，您需要实现一个累加器，如下所示：

```
def factorial(acc, n):
    if n == 0:
        return acc
    elif n > 0:
        return factorial(n*acc, n-1) 
```

然后，您将使用 调用该函数`factorial(1,n)`，或者您也可以将其编写为为您处理该部分的辅助函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T17:52:02.033

您的功能有几个问题：

*   `n > 0`如果条件为假，您不会返回任何内容。
*   `n * n-1`计算`(n * n) - 1`，你可能打算`n * (n - 1)`
*   您`factorial`递归调用，但随后不对结果执行任何操作。目前，您的代码就像您只`return n * n - 1`在 if 中编写一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T17:54:02.667

你只需要这个，我认为最简单的形式：

```
 def factorial(n):
     if n == 0: return 1
     return n * factorial(n-1) 
```

一些运行：

```
>>> factorial(1)
1
>>> factorial(13)
6227020800 
```

您也可以使用此表格：

```
def factorial(n): 
    if(n): return n*factorial(n-1)
    return 1 
```

它与@sepp2k 的回答相加

# aptana - 调试器不工作：启动调试器后出现“套接字连接错误”

> ID：15854111
> 
> 赞同：4
> 
> 时间：2013-04-06T17:47:44.457
> 
> 标签：aptana, aptana3

我尝试在 aptana studio 3 中使用调试器。我使用的是 firefox 20.0 ..

我... 1.) ...在使用 Aptana 之前删除了 firebug。2.) ...在 Aptana 中选择调试透视图并启动调试器。3.) ...安装了扩展

4.) 57% 的进度后：--> 错误。

> > “启动 Firefox - 内部服务器”遇到问题 套接字连接错误 - 请尝试关闭并重新启动 Web 浏览器，然后再次运行“调试”。

有什么我做错了吗？我找不到解决方案...但是很多人有同样的问题

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T07:08:23.917

我找到的唯一解决方案是卸载 Firefox。然后根据要求启动调试并安装 firefox、firebug 等。（在此过程中，Firefox 和 Aptana 必须重新启动几次。）之后，您可以调试一段时间，直到 Aptana-FF 桥再次损坏，并且需要再次卸载 FF。（我想知道是否还有其他合适且受支持的 IDE）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T14:42:30.220

在 Aptana 中需要调试一些东西......我遇到了同样的问题，不得不卸载 Git，然后安装[PortableGit](https://code.google.com/p/msysgit/downloads/detail?name=PortableGit-1.9.0-preview20140217.7z&can=2&q=portablegit)，然后它就可以正常工作了。

我按照在另一台机器上下载 Aptana 的所有[说明](http://aptana.com/products/studio3/download)进行操作，它运行良好。我以为我在这台机器上有 Git，我不需要 PortableGit - 我猜错了......

确保将 Git 添加到您的路径（在 Windows 上 - 单击“开始”Rt-单击计算机 -> 属性 -> 高级系统设置 -> 查找“路径”并添加到现有字符串的末尾“;C :\<%System Program%>\Git;" -- 在我的情况下是 C:\Program Files (x86)\Git -- 如果您使用的是 64 位版本的 windows C:\Program Files\GIT 如果是 32 位（添加添加之前的分号。

还需要 Ruby 和最新版本的 Java（即使我讨厌将它添加回来，因为它的安全性有问题......）（按照下载说明进行......其余的对我来说是可选的。

仅供参考 - 在打开 Aptana 之前，我必须“删除”Firebug 的附加组件，因为它将安装适当的版本。完成此操作后，打开 Firefox 并在附加组件中单击 firebug 下的更多并将其设置为不自动更新。

祝你好运......让我知道如果这不起作用......

# playframework-2.0 - Play 2.1 框架未检测到进化变化

> ID：15854112
> 
> 赞同：2
> 
> 时间：2013-04-06T17:47:47.150
> 
> 标签：playframework-2.0, ebean, playframework-evolutions

在将 @ManyToMany 连接表添加到两个模型（在本例中为 User 和 Article 模型[1]）时，Play 正确检测到这些更改并相应地修改 1.sql[2] 文件：

```
[1]
+    @ManyToMany
+    public List<User> authors;

+    @ManyToMany(mappedBy="authors")
+    public List<Article> authoredArticles;

[2]
+    create table articles_users (
+      articles_id                    bigint not null,
+      users_id                       bigint not null,
+      constraint pk_articles_users primary key (articles_id, users_id)
+    );

+    alter table articles_users add constraint fk_articles_users_articles_01 foreign key (articles_id) references articles (id);
+    alter table articles_users add constraint fk_articles_users_users_02 foreign key (users_id) references users (id);

# --- !Downs

+    drop table if exists articles_users cascade; 
```

但是，当打开使用此关系的页面时，不会显示有关需要应用 Evolutions 的消息，而是显示以下错误：

```
PersistenceException: Query threw SQLException:ERROR: relation "articles_users" does not exist 
```

为什么 Play 没有检测到它对需要应用的数据库模式进行了更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:39:07.387

检查 play_evolutions 表，如果已经有 id 为 1 的行，则必须将 sql 文件重命名为 2.sql 或手动删除表。

# javascript - 将数值存储为变量

> ID：15854114
> 
> 赞同：0
> 
> 时间：2013-04-06T17:47:52.593
> 
> 标签：javascript, jquery

我有一个链接将用户重定向到页面的管理员并`?delete=`在末尾添加一个数字，例如：`?delete=1`.

在它重定向到的页面上，我希望 jQuery 找到具有数值的 id，在本例中为 1，然后执行一个函数。

我认为最好将数值存储为变量，因为它更容易执行，但我不知道该怎么做。

数字不同，所以我不能只添加那个数字。

我想做：

```
var exampleid = 1; (the end number on the URL)

$('body').find('#' + example).addClass('selected'); 
```

我知道我可以使用`window.location.pathname`，但是`?delete=`当我只需要数值时，它会和数字一样存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:49:50.907

你可以这样做：

```
var url = window.location.href;

var exampleid = url.substring(url.lastIndexOf('=') + 1);

$('body').find('#' + exampleid).addClass('selected'); 
```

* * *

或者，如果您总是想获取 url 中的最后一个字符，只需执行以下操作：

```
var exampleid = url.slice(-1); 
```

* * *

如果要获取最后一个数字，则需要使用正则表达式：

```
var exampleid = parseInt(url.match(/\d+$/), 10); 
```

# linux - 无明显原因的分段错误

> ID：15854123
> 
> 赞同：0
> 
> 时间：2013-04-06T17:48:50.600
> 
> 标签：linux, gcc, gdb, arm

我有一个对我没有任何意义的分段错误。第 538 次调用这个函数，它失败了，但我看不出参数有什么问题。我可以在 gdb 中输入相同的表达式，它会很乐意这样做而不会抱怨。我什至使用 si 爬到它上面并查看了寄存器，但它仍然没有任何意义。我该如何解决这个问题？

一件奇怪的事情是 gdb 报告“位”参数在故障处已从 0 变为 1。我想“位”在一个被重用于其他东西的寄存器中。

我也试过这个没有优化。涉及的指令更多，但结果是一样的。

请注意，下面我使用 gdb 访问代码即将访问的相同位置，没有问题。

代码：

```
void Bits::set(int bit)
{
    if (bit >= _size*16) BUG;
    _dat[bit/16] |= 1 << (bit & 15);
} 
```

gdb 运行：

```
Breakpoint 1, Bits::set (this=0x68374, bit=0) at util.cpp:181
181         _dat[bit/16] |= 1 << (bit & 15);
1: x/i $pc
=> 0x3964c <_ZN4Bits3setEi+36>: ldr     r3, [r0, #4]
(gdb) si
0x00039650      181         _dat[bit/16] |= 1 << (bit & 15);
1: x/i $pc
=> 0x39650 <_ZN4Bits3setEi+40>: mov     r1, #1
(gdb)
0x00039654      181         _dat[bit/16] |= 1 << (bit & 15);
1: x/i $pc
=> 0x39654 <_ZN4Bits3setEi+44>: ldrh    r2, [r12, r3]
(gdb)
0x00039658      181         _dat[bit/16] |= 1 << (bit & 15);
1: x/i $pc
=> 0x39658 <_ZN4Bits3setEi+48>: orr     r2, r2, r1, lsl lr
(gdb)
0x0003965c      181         _dat[bit/16] |= 1 << (bit & 15);
1: x/i $pc
=> 0x3965c <_ZN4Bits3setEi+52>: strh    r2, [r12, r3]
(gdb) p _dat
$18 = (short *) 0x4ee74
(gdb) p *_dat
$19 = -3784
(gdb) p $r2
$20 = 61753
(gdb) p $r12
$21 = 0
(gdb) p/x $r3
$22 = 0x4ee74
(gdb) si

Program received signal SIGSEGV, Segmentation fault.
0x0003965c in Bits::set (this=0x68374, bit=1) at util.cpp:181
181         _dat[bit/16] |= 1 << (bit & 15);
1: x/i $pc
=> 0x3965c <_ZN4Bits3setEi+52>: strh    r2, [r12, r3]
(gdb) 
```

顺便说一句，我在这里使用 gdbserver。这是目标响应：

```
50:/mnt/home/rw # ./gdbserver x:12 cx Andersen_Studio.cxc
Process cx created; pid = 226
Listening on port 12
Remote debugging from host 192.168.1.40

pc : [<0003965c>]    lr : [<00000000>]    Tainted: P
sp : 7ffffdb4  ip : 00000000  fp : 7ffffe84
r10: 2ada7884  r9 : 0000c6c8  r8 : 2ada8d28
r7 : 00000002  r6 : 0005c0b8  r5 : 00000000  r4 : 0006dc10
r3 : 0004ee74  r2 : 0000f139  r1 : 00000001  r0 : 00068374
Flags: Nzcv  IRQs on  FIQs on  Mode USER_32  Segment user
Control: C000317F  Table: 017EC000  DAC: 00000015 
```

更多信息：如果我手动执行命令，则不会发生故障：

```
Breakpoint 1, Bits::set (this=0x6c75c, bit=0) at util.cpp:181
181         _dat[bit/16] |= 1 << (bit & 15);
(gdb) c 538
Will ignore next 537 crossings of breakpoint 1\.  Continuing.

Breakpoint 1, Bits::set (this=0x68374, bit=0) at util.cpp:181
181         _dat[bit/16] |= 1 << (bit & 15);
(gdb) p _dat[bit/16] |= 1 << (bit & 15)
$25 = -3783
(gdb) dis 1
(gdb) c
Continuing. 
```

仅引用 _dat[0] 并没有帮助，但例如键入 _dat[0]=0 确实可以防止出现问题。

（稍后编辑）

如果我们要查看为函数生成的代码，我决定关闭优化。这是未优化的代码：

```
(gdb) disass
Dump of assembler code for function _ZN4Bits3setEi:
   0x0006a1d8 <+0>:     mov     r12, sp
   0x0006a1dc <+4>:     push    {r11, r12, lr, pc}
   0x0006a1e0 <+8>:     sub     r11, r12, #4
   0x0006a1e4 <+12>:    sub     sp, sp, #8
   0x0006a1e8 <+16>:    str     r0, [r11, #-16]
   0x0006a1ec <+20>:    str     r1, [r11, #-20]
=> 0x0006a1f0 <+24>:    ldr     r3, [r11, #-16]
   0x0006a1f4 <+28>:    ldr     r3, [r3]
   0x0006a1f8 <+32>:    lsl     r2, r3, #4
   0x0006a1fc <+36>:    ldr     r3, [r11, #-20]
   0x0006a200 <+40>:    cmp     r3, r2
   0x0006a204 <+44>:    blt     0x6a220 <_ZN4Bits3setEi+72>
   0x0006a208 <+48>:    ldr     r0, [pc, #108]  ; 0x6a27c <_ZN4Bits3setEi+164>
   0x0006a20c <+52>:    ldr     r1, [pc, #108]  ; 0x6a280 <_ZN4Bits3setEi+168>
   0x0006a210 <+56>:    mov     r2, #180        ; 0xb4
   0x0006a214 <+60>:    bl      0xa00c <printf>
   0x0006a218 <+64>:    mov     r0, #1
   0x0006a21c <+68>:    bl      0xa09c <exit>
   0x0006a220 <+72>:    ldr     r1, [r11, #-16]
   0x0006a224 <+76>:    ldr     r2, [r11, #-20]
   0x0006a228 <+80>:    asr     r3, r2, #31
   0x0006a22c <+84>:    lsr     r3, r3, #28
   0x0006a230 <+88>:    add     r3, r2, r3
   0x0006a234 <+92>:    asr     r0, r3, #4
   0x0006a238 <+96>:    mov     r3, r0
   0x0006a23c <+100>:   lsl     r2, r3, #1
   0x0006a240 <+104>:   ldr     r3, [r1, #4]
   0x0006a244 <+108>:   add     r12, r2, r3
   0x0006a248 <+112>:   ldr     r1, [r11, #-16]
   0x0006a24c <+116>:   mov     r3, r0
   0x0006a250 <+120>:   lsl     r2, r3, #1
   0x0006a254 <+124>:   ldr     r3, [r1, #4]
   0x0006a258 <+128>:   add     r1, r2, r3
   0x0006a25c <+132>:   ldr     r3, [r11, #-20]
   0x0006a260 <+136>:   and     r2, r3, #15
   0x0006a264 <+140>:   mov     r3, #1
   0x0006a268 <+144>:   lsl     r3, r3, r2
   0x0006a26c <+148>:   ldrh    r2, [r1]
   0x0006a270 <+152>:   orr     r3, r2, r3
   0x0006a274 <+156>:   strh    r3, [r12]
   0x0006a278 <+160>:   ldmdb   r11, {r11, sp, pc}
   0x0006a27c <+164>:   andeq   r8, r8, r0, lsr r12
   0x0006a280 <+168>:   andeq   r8, r8, r4, asr r12
End of assembler dump.
(gdb) 
```

我尝试插入 _dat[0] = 0; 在“坏”声明之前，这会导致错误。我试过 _dat[0]++; 这也有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:31:40.780

嗯，看起来一切正常。您可以从该位置读取，但不能写入...奇怪。

我脑海中浮现以下想法：

*   永远不要相信 gdb 显示给你的东西。当您在 gdb 中评估一个表达式时，这与您的代码所做的完全不同。特别是它不会使用您的代码（除非您明确地按名称调用函数）。Gdb 将使用调试信息，这些信息通常有差距并且有很大的解释空间，而您的代码将只使用您的代码。:-) gdb 中的变量值通常是错误的。这很可能甚至不是 gdbs 的错误。gdb 不能比编译器生成的调试信息更好。它甚至包含大量（与调试信息相关的）编译器错误的启发式方法。

*   您的操作系统可能会将许多不同的故障情况映射到 Segfault。例如，这可能是异步数据中止，在这种情况下，真正的问题可能早于数百条指令。

*   您是否使用安全和非安全内存？通过高速缓存从非安全模式写入安全内存可能会导致异步数据中止。

*   这个函数运行了 537 次 OK 的事实并不意味着什么。它是否在完全相同的数据/内存位置上运行？我的意思是，该`set()`函数本质上只是一个内存写入。行为（是否崩溃）将始终取决于变量的内容 `bit`。

当我在我的程序中看到对我没有任何意义的奇怪崩溃时，我会修改该函数，使其行为略有不同。如果你这样做会发生什么：

```
void Bits::set(int bit)
{
    if (bit >= _size*16) BUG;
    _dat[bit/16] = 42; // does this crash?
    _dat[0] = 42;      // does this crash?
    _dat[bit/16]++;    // does this crash?
    _dat[bit/16] |= 1 << (bit & 15);
} 
```

（如果您的程序依赖于此，您可能需要保存/恢复写入的位置。）

还有助于将程序中的诊断消息打印到一些日志中。这通常比使用调试器更好，因为它使用您的代码和实际值，而不是使用调试信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:07:01.157

我不知道为什么在这个特定的行会出现分段错误，因为使用 gdb 修改内存似乎没有问题。但是，通过在 Bits 构造函数中打印出“this”，并将其与错误处的“this”进行比较，我发现我必须遭受内存损坏，可能在远离这里的某个地方。因此，我将中断这一调查并继续假设问题出在其他地方。

（之后）

我发现了问题，它是一个未初始化的指向 Bits 的指针（令人惊讶！），它恰好足够可信，以至于表面上看起来好像它是正确的。为我指明正确方向的想法是“记录事物”的想法，我刚刚用 printf 做到了这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T18:00:00.933

1) 所以你说执行 ARM 汇编指令 strh r2, [r12, r3] 会导致访问冲突。

2) 问：0x4ee74（包含在 r3 中）是否有效？

3) 问：0000f139（包含在 r2 中）是否有效？从手册：

> [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/BABDJCHA.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/BABDJCHA.html)
> 
> **字和半字传输的地址对齐：**
> 
> 地址必须是 4 的倍数。
> 
> 如果您的系统有系统协处理器 (cp15)，您可以启用对齐检查。如果启用对齐检查，非对齐传输会导致对齐异常。
> 
> 如果您的系统没有系统协处理器 (cp15)，或者对齐检查被禁用：
> 
> 未对齐的负载会破坏 Rd。
> 
> 非对齐保存会破坏内存中的四个字节。内存中损坏的位置是 [address AND NOT b11]。

# html - CSS3 转换不能与 Webkit 一起正常工作？

> ID：15854127
> 
> 赞同：1
> 
> 时间：2013-04-06T17:49:31.650
> 
> 标签：html, css, webkit, transform

我正在尝试构建一个我用 Webkit 找到的演示，它应该在框架的一侧有一个图像并翻转到另一个图像。相反，webkit 只是决定向我显示两侧的背面图像，镜像。非常感谢任何帮助！

小提琴：http: [//jsfiddle.net/sH2jZ/](http://jsfiddle.net/sH2jZ/)

**CSS：**

```
 #f1_container {
    position: relative;
    margin: 10px auto;
    width: 450px;
    height: 281px;
    z-index: 1;
    }
    #f1_container {
    perspective: 1000;
    }
    #f1_card {
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: all 1.0s linear;
    }
    #f1_container:hover #f1_card {
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    box-shadow: -5px 5px 5px #aaa;
    }
    .face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    }
    .face.back {
    display: block;
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    box-sizing: border-box;
    color: white;
    text-align: center;
    background-color: #aaa;
    } 
```

**HTML：**

```
 <div id="f1_container">
    <div id="f1_card" class="shadow">
    <div class="front face">
    <img src="http://css3.bradshawenterprises.com/images/Windows%20Logo.jpg"/>
    </div>
    <div class="back face center">
    <img src="http://blog.roblox.com/wp-content/uploads/2012/09/Mac-OS-X-10.5-Leopard.png" height="281" width="450" />
    </div>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:58:26.423

您错过`-webkit-`了几个与 -`transform`相关的语句的版本：

```
#f1_container {
    position: relative;
    margin: 10px auto;
    width: 450px;
    height: 281px;
    z-index: 1;
}
#f1_container {
    perspective: 1000;
}
#f1_card {
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    transition: all 1.0s linear;
    -webkit-transition: all 1.0s linear;
}
#f1_container:hover #f1_card {
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    box-shadow: -5px 5px 5px #aaa;
}
.face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}
.face.back {
    display: block;
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    box-sizing: border-box;
    color: white;
    text-align: center;
    background-color: #aaa;
} 
```

[**演示**](http://jsfiddle.net/sH2jZ/1/)

# javascript - 在javascript中设置回调函数以返回值

> ID：15854128
> 
> 赞同：0
> 
> 时间：2013-04-06T17:49:32.807
> 
> 标签：javascript, asynchronous, callback

这是我的代码：

```
function render(){
    var el;
    setTimeout(function(){
      func();
    },1000);
    return el;
  }

function func(){
    //do something here;
} 
```

setTimeout是异步的，所以在执行func之前会返回el。我想在调用func之后返回el，回调函数怎么写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:52:59.683

使用回调 -`el`将传递给的函数：

```
function render(callback){
    var el;
    setTimeout(function(){
      func();
      callback(el);
    },1000);
  }

function func(){
    //do something here;
}

function elReady(el){
    // use `el`
} 
```

所以现在你可以使用`render(elReady)`.

# ios - 使用 sendAsynchronousRequest:queue:completionHandler 时显示“数据加载”：

> ID：15854129
> 
> 赞同：1
> 
> 时间：2013-04-06T17:49:33.603
> 
> 标签：ios, networking, delegates, nsurlconnection, objective-c-blocks

我正在使用这个块方法从服务器加载我的数据......

```
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:[myString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]]
                                            cachePolicy:NSURLRequestUseProtocolCachePolicy
                                        timeoutInterval:60.0];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[NSURLConnection
 sendAsynchronousRequest:urlRequest
 queue:queue
 completionHandler: ^( NSURLResponse *response,
                      NSData *data,
                      NSError *error)
 {
     [[mySingleton dictionaryUserDetail] removeAllObjects];
     [[mySingleton arrayUserDetail] removeAllObjects];

     if ([data length] > 0 && error == nil) // no error and received data back
     {
         NSError* error;
         NSDictionary *myDic = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
         [mySingleton setDictionaryUserDetail:[myDic mutableCopy]];

         NSArray *myArray = [myDic objectForKey:@"searchResults"];
         [mySingleton setArrayUserDetail:[myArray mutableCopy]];

         dispatch_async(dispatch_get_main_queue(), ^{
             [self userDetailComplete];
         });
     } else if
         ([data length] == 0 && error == nil) // no error and did not receive data back
     {
         dispatch_async(dispatch_get_main_queue(), ^{
             [self serverError];
         });
     } else if
         (error != nil) // error
     {
         dispatch_async(dispatch_get_main_queue(), ^{
             [self serverError];
         });
     }
 }]; 
```

我希望能够向用户显示进度条，而不仅仅是一个微调器。如果我使用代表我假设我可以使用 NSURLConnectionDelegate

```
connection:didReceiveData: 
```

但我不知道如何用块来做到这一点。有人有一些天才的见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:09:11.263

如果要显示显示实际下载进度的进度条，则必须使用`NSURLConnection`. `sendAsynchronousRequest`并且`sendSynchronousRequest`不为此提供方法。

# ocaml - 停止文件读取过程的麻烦

> ID：15854132
> 
> 赞同：0
> 
> 时间：2013-04-06T17:50:00.527
> 
> 标签：ocaml

我试图退出循环，将文件内容读入列表，当我点击“停止”的文本行时。这是我的代码：

```
let f_in = "file.text"
let lines = ref [];;

  let chan = open_in f_in in
  try
    while true do

      let line = input_line chan in
      if line = "stop" then raise End_of_file;
      lines := input_line chan :: !lines

    done
  with End_of_file -> close_in chan 
```

问题是它正在读取额外的 1 行，并且它不会读取文本中包含“停止”一词的行。一个例子是这种文件：

```
aaa
bbb stop
ccc stop
ddd
eee
stop
fff 
```

现在我的代码应该打印所有这些行，并在仅包含“停止”一词的行处停止阅读。有人可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:39:39.897

将第二个替换为`input_line`您`line`想要的结果。

```
let f_in = "file.text"
let lines = ref [];;

let chan = open_in f_in in
  try
    while true do

      let line = input_line chan in
      if line = "stop" then raise End_of_file;
      lines := !lines @ [ line ]

    done
  with End_of_file -> close_in can 
```

存储的结果`lines`是：

```
["aaa"; "bbb stop"; "ccc stop"; "ddd"; "eee"] 
```

# lambda - 方案 Lambda 返回值

> ID：15854142
> 
> 赞同：1
> 
> 时间：2013-04-06T17:51:03.427
> 
> 标签：lambda, scheme, read-eval-print-loop

计划快要把我逼疯了。在下面的代码中，我只是试图将提供给 repl 的字符串解析为实际列表。相反，当我打印应该是我的解析列表时，我得到的只是一个正确的 parends 列表！我正在使用以下站点来测试我的代码： [http ://repl.it/](http://repl.it/)

我完全希望我的代码能够创建如下列表： (+ 1 2) 或者可能是这样，因为我不是类型在方案中的工作方式。("+" "1" "2")

非常感谢我的列表为何如下所示的任何帮助：())))

```
(define repl
      (lambda (input)
          (define symbol_list (Read input))
          ;(define value (eval symbol_list))
          ;(myprint value)
          ;(print (length symbol_list))
          (print symbol_list)
      )
)

(define Read
      (lambda (input)
          (define symbol (substring input 0 1))
          (cond
              ((string=? ")" symbol) '())
              ((or (string=? "(" symbol) (string=? " " symbol))
                  (Read (substring input 1 (string-length input))))
              (else (cons symbol (Read (substring input 1 (string-length input)))))
          )
  )
)

(repl "(+ 1 2)") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:42:55.370

该代码正在运行，我在 Racket 中对其进行了测试 - 您用于测试它的解释器可能存在问题。

顺便说一句，您想要做的事情可以使用内置程序来完成，如下所示：

```
(read (open-input-string "(+ 1 2)"))
=> '(+ 1 2) ; a list of symbols/numbers, not strings 
```

# javascript - str.replace()，获取匹配数或最后一个元素进行替换？

> ID：15854144
> 
> 赞同：0
> 
> 时间：2013-04-06T17:51:29.100
> 
> 标签：javascript

我有一个使用占位符的字符串，我试图用函数的结果替换它。给出一个想法：

```
sometext = "%number% text text %number%"replace(/%\w+%/g, function(parm) {
       return 'customtext';
} 
```

我想知道有没有办法获得比赛的数量？我需要那个数字，所以我可以检查当前正在运行的函数是否替换了最后一个元素，如果是，则返回其他内容。函数体中的类似内容

```
if(lastElement) {
   return 'something else';
}

sometext = "%number% text text %number%"replace(/%\w+%/g, function(parm) {
       return 'customtext'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:57:59.167

您无法直接获取函数中的匹配数。它没有提供。

我只是简单地计算它，然后计算替换期间的函数调用：

```
var i = 0, n = str.split(/%\w+%/).length-1;
var sometext = str.replace(/%\w+%/g, function() {
   if (++i==n) return 'last text';
   else return 'not last text';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:54:55.907

我想你想使用 javascript 的 .match() 函数。你给它一个正则表达式，它会返回一个匹配数组。然后，您可以获得数组的长度。

看：

[http://www.w3schools.com/jsref/jsref_match.asp](http://www.w3schools.com/jsref/jsref_match.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:56:22.227

这将给出匹配的数量：

```
var last = "%number% text text %number%".match(/%\w+%/g).length; 
```

然后把你的'if'放在你正在使用的回调中，并跟踪一个计数器，与上面收集的长度相比，回调执行了多少次，瞧。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T18:20:57.690

首先，找到匹配的数量：

```
var matchCount = haystack.match(needle); 
```

然后，倒计时每次替换的剩余匹配数：

```
haystack.replace(needle, function(param) {
    matchCount--;
    if( matchCount == 0 ) {
        return 'Last Element';
    }
    return 'Not Last Element';
}); 
```

合并后的代码如下所示：

```
var haystack = "%number% text text %number%";
var needle = new RegExp("%\w+%", "g");

var matchCount = haystack.match(needle);
haystack.replace(needle, function(param) {
    matchCount--;
    if( matchCount == 0 ) {
        return 'Last Element';
    }
    return 'Not Last Element';
}); 
```

并且可以缩短为类似这样的函数：

```
function customReplace(haystack, needle) {
    var count = haystack.match(needle);
    haystack.replace(needle, function() {
        return (--count ? 'notLast' : 'isLast');
    });
} 
```

# php - 循环复选框-PHP

> ID：15854146
> 
> 赞同：1
> 
> 时间：2013-04-06T17:51:36.157
> 
> 标签：php, arrays, codeigniter, checkbox, foreach

我有一个包含大约 50 个输入复选框的页面，其中

```
name="form[]" 
```

我需要我的 php 脚本能够遍历所有复选框，并且检查和提交哪些复选框我需要放入一个变量中，以便我可以存储给定的表单。

这是我的循环：

```
if ($this->input->post('action') == 'additional') { // Checks if radio button was checked
    foreach ($this->input->post('form') as $forms) { // If above ^^^ is true loop through form[] 
        $givenforms = ', '.$forms.''; // What ever form[] is in the array assign them to the givenforms variable
    }
    $comments = 'This student was given'.$givenforms.''; // The comment I want to store in the database
} 
```

这有效，但仅适用于一种形式（复选框）。如果由于某种原因我的客户需要给学生所有 50 份表格，我想要 $comment = 'This student was given ......................... ......................（所有 50 种表格）'

任何链接或提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T17:55:03.380

您使用`=`而不是 concatenating覆盖每次迭代中的值`.=`，但我相信您可以将[`implode`](http://www.php.net/manual/en/function.implode.php)其用于您的用例：

```
if ($this->input->post('action') == 'additional') { // Checks if radio button was checked
    $givenforms = implode(', ', $this->input->post('form'));
    $comments = 'This student was given'.$givenforms;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T17:55:35.560

`$givenforms = ', '.$forms.'';`是错误的，因为每次循环运行都会覆盖前一个。
使用`.=`(连接运算符) 而不是`=`.

还要确保在使用`$givenforms = "";`连接之前通过在循环外使用来设置变量`$givenforms .= ...........`

如果您不这样做，您将收到警告（或通知，不确定）。

# ios - 在滚动视图中锚定/定位标签

> ID：15854150
> 
> 赞同：0
> 
> 时间：2013-04-06T17:51:54.657
> 
> 标签：ios, resize, interface-builder, positioning

我正在尝试让下面的布局在横向中正确调整大小。它看起来和 IB 中的纵向模式一样，但是当我旋转到横向时，我丢失了“源”标签和底部的文本视图。所有这些都锚定到所有侧面并设置为在父滚动视图中水平和垂直调整大小。

![有问题的锚定](https://i.stack.imgur.com/Aweun.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:42:05.333

我最终通过从父 UIScrollView 中删除子 UITextViews 解决了这个问题。

# php - 上传的图片包含错误

> ID：15854152
> 
> 赞同：0
> 
> 时间：2013-04-06T17:52:07.210
> 
> 标签：php, image

我正在尝试在用户个人资料页面中显示用户上传的图像。图片上传成功，但显示时显示此错误：“图片无法显示，因为它包含错误”。

我的上传代码是：

```
<?php
session_start();
require_once("config.php");
header ("Content-type: image/jpg" );

if ( $_GET["id"] != "" )
{
    if ( file_exists ( "media/userphotos/".$_GET["id"].".jpg" ) )
        $imageToShow = SITEURL."media/userphotos/".$_GET["id"].".jpg";
    else
    {
        $imgNumber = rand ( 1, 5 );
        $imageToShow = SITEURL."images/nimg$imgNumber.jpg";
    }
}

if ( strchr ( $imageToShow , ".gif" ) )
    $image = imagecreatefromgif ( $imageToShow );
else
    $image = imagecreatefromjpeg ( $imageToShow );

list ( $width, $height ) = getimagesize ( $imageToShow );

$diffWidth = 1;
$diffHeight = 1;

if ( $width > $height )
{
    if ( $width > 130 )
    {
        $diffWidth = 1 - ( ( $width-130 ) / $width ) ;
        $diffHeight = $diffWidth ;
    }
}
else
{
    if ( $height > 110 )
    {
        $diffHeight = 1 - ( ( $height-110 ) / $height ) ;
        $diffWidth = $diffHeight ;
    }
}

$modwidth = $width * $diffWidth ;
$modheight = $height * $diffHeight ;

//$modwidth = 130 ;
//$modheight = 110 ;

// Resizing the Image
$tn = imagecreatetruecolor ( $modwidth, $modheight ) ;
imagecopyresampled ( $tn, $image, 0, 0, 0, 0, $modwidth, $modheight, $width, $height ) ;

/******** this line outputs image as thumbnail or not ( conditioned ) *********/

if ( $tn )
    imagejpeg( $tn , "" , 99 ) ;
else
    imagejpeg( $image , "" , 99 ) ;

imagedestroy ( $image ) ;

?> 
```

要显示我使用的图像：

```
<img src="<?php echo SITEURL."userimage.php?id=".$userDetails["UserID"] ?>" style="width:120px; padding:2px; border:#999999 1px solid;" /> 
```

谁能解释为什么图像不会显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:00:20.307

好的，我看到 2 个问题...

首先是一个狡猾的字符和文件的结尾......'`'不确定这是否在实际代码中......确保它不是

其次，改变

```
if ( $tn )
    imagejpeg( $tn , "" , 99 ) ;
else
    imagejpeg( $image , "" , 99 ) ; 
```

至

```
if ( $tn )
    imagejpeg( $tn , NULL , 99 ) ;
else
    imagejpeg( $image , NULL , 99 ) ; 
```

来自[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)

```
To skip this argument in order to provide the quality parameter, use NULL. 
```

我相信如果你输入一个空字符串，它会尝试将图像保存为文件，而不是作为流发送。

# c# - 使用反射从资源中提取的.exe和.dll文件无效？

> ID：15854156
> 
> 赞同：0
> 
> 时间：2013-04-06T17:52:34.317
> 
> 标签：c#, reflection, embedded-resource, .net-assembly

我正在尝试将一些 .exe 和 .dll 文件嵌入到我的应用程序中（只需将所需的文件包含到我的项目中，右键单击它们并将 Build Action 更改为“Embedded Resource”）。这是我要提取的代码：

```
private void ExtractTo(string path){
   string filename = "MyNamespace.Resources.MyEmbeddedEXEfile.exe";
   Assembly asm = Assembly.GetExecutingAssembly();
   string[] resourceNames = asm.GetManifestResourceNames();
   if(resourceNames.Contains(filename)){
      Stream s = asm.GetManifestResourceStream(filename);
      byte[] buffer = new byte[s.Length];
      File.WriteAllBytes(path + "\\MyEXEfile.exe", buffer);
   }
} 
```

它似乎运行良好，嵌入文件被提取到传入的路径，它与我包含在我的项目中并作为资源嵌入的文件具有相同的大小。但是好像已经损坏了，点击解压出来的EXE文件后，弹出一个错误对话框，提示“**这个文件的版本与你运行的Windows版本不兼容。检查你电脑的系统信息看是否需要x86（32 位）或 x64（64 位）程序，然后联系您的软件发行商。** “好吧，我正是该软件的发行商 =))。

我正在使用 Windows 7 Ultimate 64 位。原始文件（我选择嵌入）是一个 32 位文件。我也尝试过使用 dll 文件，并且提取的 dll 文件也无法作为原始文件使用。

您能否指出我提取资源的代码有什么问题，或者在我将其作为资源嵌入后文件立即损坏？？？

您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T17:56:01.107

这：

```
Stream s = asm.GetManifestResourceStream(filename);
byte[] buffer = new byte[s.Length]; 
```

...实际上并没有将流复制到缓冲区中。您在这里所做的只是分配一个正确长度的空缓冲区。

你需要做这样的事情：

```
s.CopyTo(File.Create(path)); 
```

...`CopyTo`在 .NET 4.0 中添加的位置。

# sencha-touch - 如何在 ST2 的标题栏中设置文本的字体大小？

> ID：15854159
> 
> 赞同：1
> 
> 时间：2013-04-06T17:52:55.487
> 
> 标签：sencha-touch, sencha-touch-2

如何在 ST2 的标题栏中设置文本的字体大小？

我已经尝试过“样式”属性，但这也会影响工具栏中按钮的文本，如果字体大小更小，它们会被渲染得更小。我只想在工具栏中设置标题的文本，而不是包括按钮在内的所有内容。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:57:21.980

为什么不只是：

```
title: '<div style="font-size: 30px; color: orange;">Title</div>', 
```

`**[Working Demo](http://www.senchafiddle.com/#z3f7e)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:54:58.800

可能不是最好的方法，但你可以试试这个：

```
Ext.define('MyApp.view.MyPanel', {
    extend: 'Ext.Panel',

    config: {
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: 'Cool Story Bro',
                items: [
                    {
                        xtype: 'button',
                        text: 'MyButton'
                    },
                    {
                        xtype: 'button',
                        align: 'right',
                        text: 'MyButton1'
                    }
                ],
                listeners: [
                    {
                        fn: function(element, options) {
                            Ext.getCmp(element.id).titleComponent.innerElement.dom.style.color = 'red';
                            Ext.getCmp(element.id).titleComponent.innerElement.dom.style.fontSize = '30px';
                            Ext.getCmp(element.id).titleComponent.innerElement.dom.style.fontStyle = 'italic';
                        },
                        event: 'painted'
                    }
                ]
            }
        ]
    }
}); 
```

演示：[http ://www.senchafiddle.com/#m3ilK#ArrdD](http://www.senchafiddle.com/#m3ilK#ArrdD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:03:25.267

标题栏有一个名为[styleHtmlCls](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-styleHtmlCls)的配置，应该让您定义一个应用于内容的类。您需要`styleHtmlContent`设置为 true。

# android - android在联系人应用程序中添加更多类似的按钮

> ID：15854165
> 
> 赞同：0
> 
> 时间：2013-04-06T17:53:51.500
> 
> 标签：android, android-layout

我正在使用一个包含填写联系信息的表单的应用程序，并且该联系人可能有很多电话号码，我添加了许多编辑文本以输入这些电话，并在第一个附近添加了一个按钮，当用户按下时显示下一个编辑文本在上面

**问题是我不知道在该按钮的点击监听器中写什么，我只想显示和隐藏编辑文本，以便在联系人应用程序中**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:58:47.850

您可以使用 Invisible and Gone at Visiblity。Gone 它会隐藏并移除他的位置。看看[这里](https://stackoverflow.com/questions/7348150/android-why-setvisibilityview-gone-or-setvisibilityview-invisible-do-not)

# c - 在 C 中生成固定的成功或失败率

> ID：15854182
> 
> 赞同：0
> 
> 时间：2013-04-06T17:55:39.807
> 
> 标签：c

我正在尝试使用 C 中的 rand() 函数生成成功或失败百分比。这是预期的片段“良好的土壤地块出现 30% 的时间，而贫瘠的土壤地块出现 70% 的时间。使用rand() 函数来决定应该出现哪个图。” 我认为使用（某个数字）会做到这一点，但我被卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:58:31.173

```
if (rand() / (RAND_MAX + 1.) < .3) {
   /* good soil */
} else {
   /* poor soil */
} 
```

在这里，`rand() / (RAND_MAX + 1.)`产生一个均匀分布在 上的伪随机数`[0, 1)`。我们将此数字与`.3`30% 的时间获得良好的土壤进行比较。

# asp.net-mvc - 如何为我的 Web API Web 服务实现身份验证和授权？

> ID：15854184
> 
> 赞同：3
> 
> 时间：2013-04-06T17:55:52.233
> 
> 标签：asp.net-mvc, web-services, security, asp.net-web-api

我有一个**Web API Web 服务**，它被许多具有不同技术（如**Java、.NET 等**）的客户端应用程序使用。因此，我的用户凭据存储在一个单独的**数据库**中。

我的 Web 服务托管在**IIS**中，并且我在服务器端配置并启用了**SSL**，以确保请求/响应消息被加密和签名。

我还配置了 IIS 的 IP 地址限制功能，以允许来自少数已知 IP 地址的请求。

我不喜欢使用**基本身份验证**，因为它在每条消息中都以纯文本形式发送凭据，尽管消息是使用 SSL 加密的。

我显然不能使用**集成 Windows 身份验证**，因为我的用户与我的服务器不在同一个域中。

我不能使用**表单身份验证**，因为我的客户端不是基于浏览器的。

那么为我的 Web 服务实现身份验证和授权的最佳方式是什么？

我在想一种方法是提供一个**Authenticate(username, password) web 方法**，它的行为类似于**身份提供者/安全令牌服务**，并生成特定于该用户的令牌，该令牌在特定时间后过期。然后客户端必须通过每个 Web 方法请求发送身份验证令牌，我通过为我的控制器创建自定义授权过滤器来确保它。

这种方法的优点是用户不必在每个请求中发送用户名/密码，而只是一个临时令牌。缺点显然是管理令牌寿命；什么时候到期？例如，如果在一小时内没有提出请求。

为我的 Web 服务实施身份验证和授权的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:18:02.447

I will address options for authentication in my comments in respect to SOAP services. Authorization is implemented within the server application and mostly irrelevant to the authentication type selected. There are three (3) classifications of web services: -Private -Community -Public

It sounds like the web service you are providing is a community service because it is only available to trusted partners. I know this because you explained that an IP Address restriction was configured in IIS. Including an IP Address restriction is one of many good measures for implementing secure web services. Security is not a single thing. It is an accumulation of many defenses. IP Address restriction is a good start.

Web Services are stateless by nature. Therefore, it is typical that the credentials (username and password) must be included with every request when calling a web service. So, it is not a problem or concern.

HTTP Basic Authentication is not a bad choice. It is supported by all client and server applications and easy to implement. I like to think of HTTP Basic Authentication as the lowest common denominator. I would not rule it out. HTTP Basic Authentication includes the credentials in the http header in plain text so it’s always recommended to include SSL (HTTPS) to encrypt the transport channel.

WS-Security is a very common authorization standard for Web Services. It is an industry standard for Web Services and the specification is published by the Organization for the Advancement of Structured Information Standards (OASIS) organization. WS-Security includes a UsernameToken profile for including username/password. The WS-Security block is added to the header of the SOAP message. In comparison, HTTP Basic Authentication is added to the HTTP header. HTTP Basic Authentication is attached to the transport protocol. In comparison, WS-Security is attached to the SOAP message. WS-Security UsernameToken is in plain text so it’s always recommended to include SSL (HTTPS).

Another option is client certificate authentication. This option uses a digital certificate as the authentication token in lieu of a username/password. This method works well but requires that the web services team members and client application team members both be familiar with SSL digital certificates as a prerequisite. The learning curve for this method is higher than the others.

The custom solution you described is not necessary, because so many industry standards exist to implement and solve the solution you seek. For example, if you implement WS-Security in your web service, you do not have to provide the client app team with documentation and explain how to implement it in their client application. WS-Security is an industry standard that is well documented and supported by most modern SOAP servers and SOAP clients today. The same applies to HTTP Basic Authentication.

I hope this helps. Cheers, DCova

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:48:07.133

IP 地址很容易被欺骗，所以不要依赖它们来保护您的服务。

我建议您仅允许通过 HTTPS 进行访问，为了进一步保护它，请验证用于签署请求的证书。更好的是，拥有自己的证书服务器并为此目的颁发自己的证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:10:17.393

在 facebook 中，他们向应用程序提供访问令牌，该令牌仅在更改密码或用户特别取消对应用程序的授权时才会更改。你们很多人考虑这种方法。这在 Google 的 Map API 中也是类似的。我能想到的唯一安全的方法是检查请求的来源（请求的 IP 地址），然后检查 apikey 然后做出响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T03:26:02.390

> 我的 Web 服务托管在 IIS 中，并且我在服务器端配置并启用了 SSL，以确保请求/响应消息被加密和签名。

SSL 是传输安全而不是消息安全。它不会为您签署消息。它加密通道。

我觉得预共享密钥或 API 密钥的方法最适合您的情况。由于用户有用户名和密码，我假设他们在某个地方注册。作为该过程的一部分，生成一个密钥，该密钥可以是共享对称密钥，即双方（客户端和服务器）具有相同的密钥。客户端在某些自定义方案的 Authentication 标头中发送用户 ID，以及请求消息的特定部分的 SHA256 哈希。服务器获取用户 ID，检索密钥，计算消息相同部分的哈希值，如果哈希值匹配，则客户端进入。

查看我的书[Pro ASP.NET Web API Security](http://amzn.com/1430257822)。

# json - 将 json 文件从一台服务器复制到另一台服务器

> ID：15854186
> 
> 赞同：0
> 
> 时间：2013-04-06T17:55:58.147
> 
> 标签：json, html

我有一个 Html 页面，其中包含指向扩展名为“json.z”的文件的链接。

我正在尝试将 json.z 文件复制到另一个位置，但是我使用的每种方式，在根据新位置更改 html 中的链接后，最终导致 Html 文件不再工作。

对文件的引用是通过：

"pageList":{"masterPage":[" * json的url *

链接以“.json.z?v=1”结尾

我尝试将其复制为文本，将其下载为“json.z”文件，尝试在没有“？v = 1”的情况下进行操作，并在某些变体中使用它，但它不起作用。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:58:33.063

您将其放入的服务器是否提供`.z`文件？也许您需要在目标服务器上设置 mime 类型以将 .z 用作`text/javascript`

当您请求文件时，您可以使用 Fiddler 查看服务器响应的内容。

# javascript - 如何使用键盘快捷键打开/悬停到子菜单项

> ID：15854189
> 
> 赞同：-1
> 
> 时间：2013-04-06T17:56:05.063
> 
> 标签：javascript, jquery

我有一个菜单

```
<li class="main-menu">
  <a accesskey="a">menu item 1</a>
  <ul>
    <li>
      <a accesskey="d">submenuItem1</a>
    </li>
    <li class="submenu">
      <a accesskey="e">submenuItem2</a>
      <ul>
        <li class="innermenu"><a >innerMenuItem1</a></li>
        <li><a>innerMenuItem1</a></li>
        <li><a>innerMenuItem2</a></li>
        <li><a>innerMenuItem3</a></li>
        <li><a>innerMenuItem4</a></li>
      </ul>
    </li>
  </ul>
</li> 
```

选择主菜单项时如何悬停/显示子菜单以及选择子菜单时显示内部菜单项。我对 jquery 非常陌生，在执行此操作时遇到了一些问题，尤其是内部菜单的子菜单。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:20:17.860

`accesskey`实际上只与`alt`键配合使用，我们可以拦截一般的 keydown 事件并以这种方式处理热键。如果我们拦截 keydown 并且它是键之一，我们希望`.active`在相关的`li`. 然后使用 CSS 隐藏和显示基于悬停/类状态的子菜单。

我下面的示例使用`data-key`属性来设置属性，在页面加载时，我们将键和相关元素提取到数组中。该数组被扫描并在`keydown`处理时采取行动。

[jsFiddle](http://jsfiddle.net/Tyriar/8S8qL/)

**HTML**

```
<ul class="main-menu">
<li data-key="65">
  <a>menu item 1 (a)</a>
  <ul>
    <li data-key="68">
      <a>submenuItem1 (d)</a>
    </li>
    <li data-key="69">
      <a>submenuItem2 (e)</a>
      <ul>
        <li><a>innerMenuItem1</a></li>
        <li><a>innerMenuItem1</a></li>
        <li><a>innerMenuItem2</a></li>
        <li><a>innerMenuItem3</a></li>
        <li><a>innerMenuItem4</a></li>
      </ul>
    </li>
  </ul>
</li>
</ul> 
```

**CSS**

```
li ul {
    display:none;
}

li:hover > ul,
li.active > ul {
    display:block;
} 
```

**JS**

```
var keys = [];

$(document).ready(function () {
    $('[data-key]').each(function () {
        keys.push({
            key: $(this).attr('data-key'),
            elem: $(this)
        });
    });
});

$(window).keydown(function(e) {
    for (var i = 0; i < keys.length; i++) {
        if (e.keyCode == keys[i].key) {
            keys[i].elem.toggleClass('active');
            return;
        }
    }
}); 
```

# php - PHP如何在字符串中查找英寸并用点替换

> ID：15854190
> 
> 赞同：-2
> 
> 时间：2013-04-06T17:56:07.000
> 
> 标签：php, string, replace, inches

我在 PHP 中有这样的字符串：

$string = '监控 Asus VH228D LED, 21,5 **"** , 16:9, 1920x1080, 250 cd/m2; VS228H, 21,5 **"** , Wide format 16:9, 1920x1080, VS229H, **21.5"** , Vf3349H, **21,5 "** , 1920x1080, 250 cd/m2, 华硕 VH2q8D LED, 21,5**英寸**';

我需要在字符串中查找英寸，如果英寸数不正确（21,5"、21,5"、21.5"）以正确的值更改 21,5"-> 21.5"、21,5"-> 21.5" , 21.5 英寸 -> 21.5 英寸 , 21.5 英寸 -> 21.5 英寸。

最终结果必须是：

$final_string = '监控 Asus VH228D LED, **21.5"** , 16:9, 1920x1080, 250 cd/m2; VS228H, **21.5"** , 宽幅 16:9, 1920x1080, VS229H, **21.5"** **,** Vf3349H, 21.58,5" 10cdx1 /m2，华硕 VH2q8D LED，**21.5"** '；

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:03:55.007

```
$final_string = preg_replace('/(\d+),(\d+")/', '$1.$2', $string); 
```

阅读正则表达式。一个好的起点是[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:14:13.897

如果您想确保涵盖上面突出显示的所有不同可能性，请使用

`preg_replace('/(\d+)(,|.)(\d+) *"/i', '$1.$3"',$string);`

（我不相信苔藓的回答涵盖了数字和“之间的空格”）

# apache - Apache 重写规则，带或不带斜线

> ID：15854197
> 
> 赞同：0
> 
> 时间：2013-04-06T17:56:29.517
> 
> 标签：apache, rewrite, rule

如何让 Apache 重写所有 URL，例如：

mydomain.com/index.php?name=about-me

与任何一个合作

mydomain.com/about-me

或者

mydomain.com/about-me/

如果 URL 是 mydomain.com/about-me，则应该加载 mydomain.com/index.php?name=about-me。

此外，如果 URL 是 mydomain.com/about-me/，mydomain.com/index.php?name=about-me 也应该加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:00:46.363

在您的 .htaccess 文件中使用 mod_rewrite 包含此规则以将 name=whatever 重写为whatever/

```
RewriteRule ^([a-z-]+)/?$     index.php?name=$1  [NC,L] 
```

# modeling - 这是哪种图形符号？

> ID：15854204
> 
> 赞同：1
> 
> 时间：2013-04-06T17:57:20.490
> 
> 标签：modeling

官方 JSON 网站主页中使用的建模语言是[什么](https://i.stack.imgur.com/FeBVA.png)？

例子：

[![http://www.json.org/object.gif](https://i.stack.imgur.com/FeBVA.png)](https://i.stack.imgur.com/FeBVA.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T18:01:29.667

这不是建模。

它是文档。

这种风格称为[铁路图或语法图](http://en.wikipedia.org/wiki/Syntax_diagram)。

# xcode - 如何处理 AddHoc 配置文件过期

> ID：15854205
> 
> 赞同：0
> 
> 时间：2013-04-06T17:57:21.427
> 
> 标签：xcode, provisioning

只是想澄清当我的 AddHoc 个人资料在本月晚些时候到期时该怎么办。这是更新我的发行版的最佳方式吗？

1.  当配置文件过期时，转到 Developer Portal 的 Provisioning Profiles 并单击 Renew。

2.  下载 AddHOc 配置文件

3.  通过电子邮件将新的个人资料发送给我的客户

4.  让我的客户将新配置文件拖到他其中一台 Mac 的 Dock 中的 iTunes 图标上。

5.  然后让我的客户在 iTunes 中同步他的每个 iPad。

这是我第一次这样做，并希望它顺利进行。据我了解这个过程，没有必要给他们一个新的应用程序存档。他们只需要新的配置文件。

iTunes 和 iPad 上的旧配置文件是否被覆盖，还是必须删除？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:14:44.357

是的，就是这个过程。我建议您研究一下[TestFlight](http://www.testflightapp.com)以简化您与外部测试人员的合作。它们简化了分发配置文件和构建的过程。

# c# - 使用 jQuery 关闭包含部分视图 (MVC4) 的引导模式

> ID：15854210
> 
> 赞同：1
> 
> 时间：2013-04-06T17:58:00.680
> 
> 标签：c#, jquery, asp.net-mvc-4, twitter-bootstrap

我有一个显示在 Bootstrap 模式窗口中的部分视图。视图是用于创建对象实例的 Ajax 表单。

当我单击保存按钮时，对象已正确添加到数据库中，但模式保持打开状态。我希望在单击保存按钮时关闭模式。

模态中的按钮：

```
<div class="modal-footer">
    <button class="btn btn-inverse" type="submit" id="btn-create-property-save">Save</button>
</div> 
```

然后在我的脚本文件中：

```
$('#btn-create-property-save').click(function(e) {
    e.preventDefault();
    $('#create-residential-property-modal').modal('hide');
    return false;
}); 
```

当我单击按钮时，模式保持打开状态。

我不太确定并且可能导致问题的一件事是我在`CreateObject`控制器操作中返回的内容。目前我只有`return PartialView();`. 鉴于上述情况，我应该在这里返回什么？

编辑：添加代码以显示模式是如何加载的。

```
<div class="modal hide fade in" id="create-residential-property-modal" data-url="@Url.Action("LandlordProperties", "Landlords")">
    <div id="create-property-container"></div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#show-create-property-modal').click(function () {
            var url = $('#create-residential-property-modal').data('url');

            $.get(url, function (data) {
                $('#create-property-container').html(data);

                $('#create-residential-property-modal').modal('show');
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:34:58.377

这是我过去的做法。

**第 1 步，使用 Ajax 提交表单：**

```
@using (Ajax.BeginForm("Create", new AjaxOptions()
                      {
                          OnFailure = "Modal.onAjaxFailure",
                          OnSuccess = "Modal.onAjaxSuccess"
                      }))
    {     
        <div class="form-body">
            @Html.TextAreaFor(model => model.Text, new { rows = "3" })
        </div>
        <div class="form-footer">
            @Html.ValidationMessageFor(model => model.Text)
            @Html.ValidationSummary(true)
            @CustomHelpers.SubmitButton("Add Comemnt")
        </div>
    } 
```

**第 2 步，返回 JSON 结果以显示成功/失败消息：**

```
 [HttpPost]
    public ActionResult Create(CommentCreateModel model)
    {
        if (ModelState.IsValid)
        {
           //Do your database insert etc here...

            return Json(new { error = false, message = "Comment added" });
        }
        else
        {
            return Json(new { error = true, message = "The values entered are not valid" });
        }
    } 
```

**第 3 步，处理响应（我的示例使用 TypeScript）：**

```
export function onAjaxFailure(xhr, status, error) {
    //Show notifications for AJAX errors
    $.notify({
        type: "error",
        text: error
    });
}

export function onAjaxSuccess(data, status, xhr) {
    if (data.error) {
        $.notify({
            type: "error",
            text: data.message
        });
    }
    else {
        $('.modal').modal('hide'); //Hides modal window
        //Show message/anything else here
    }
} 
```

# atmel - ATMEGA32 UART 通信

> ID：15854211
> 
> 赞同：0
> 
> 时间：2013-04-06T17:58:15.800
> 
> 标签：atmel, atmega, atmega16

我正在为 ATMEGA32 中的 UART 异步通信编写代码，但我很困惑如何为 UCSRC 和 UBRRH 寄存器提供两个差异值，因为它们具有相同的位置，并且根据它们的功能，我需要在这些寄存器中有 2 个差异值

根据数据表，要写入 UCSRC，必须设置 URSEL 位，要写入 UBRRH，必须重置 URSEL 位。但是在 Atmel Studio 6.0 URSEL = 1 不会在两个寄存器中写入任何内容，另一方面，如果 URSEL = 0 则两个寄存器都会写入相同的值（由于分配给这些寄存器的工作，我不想这样做） …………

我已经在 Atmel Studio 6.0 调试器中检查了所有这些............谁能帮我做什么？？？？？？

# objective-c - 在代码中使用核心数据 - Objective-C/Cocoa

> ID：15854212
> 
> 赞同：-3
> 
> 时间：2013-04-06T17:58:17.430
> 
> 标签：objective-c, cocoa, core-data, entity, nsarraycontroller

我在我的核心数据实体`Event`中`xcdatamodeld`有 2 个属性：`title`和`date`. 我还使用`arrayController`实体设置了实体模式`Event`（使用界面生成器完成）。我想在`arrayController`使用代码中访问对象的属性。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:49:15.593

我同意其他关于研究核心数据文档的海报。如果您发现在线文档势不可挡（它及时出现），那么 Big Nerd Ranch 书籍是一个非常好的起点。

在您的 中选择您的`Event`实体`xcdatamodel`，然后从菜单中执行以下操作： `Editor > Create NSManaagedObject Subclass`

然后你可以这样做： `Event *event = [arrayController.arrangedObjects[index]];` `event.title = newValue or [event setTitle];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:10:15.720

我建议从 Apple 教程开始，[Core Data Tutorial for iPhone OS](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)，然后继续学习示例应用程序之一，例如[CoreDataBooks](http://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html)。Core Data 不是一项容易掌握的技术，因此预计这需要一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:16:00.257

```
arrayController.arrangedObjects[index].title = newValue; 
```

# java - 如何在android中的两个子活动之间传输数据？

> ID：15854213
> 
> 赞同：0
> 
> 时间：2013-04-06T17:58:22.063
> 
> 标签：java, android, android-intent, children, transfer

我有 3 个活动：1 个家长和 2 个孩子。让我们简单地称它们为 Activity1、Activity2a 和 Activity2b；

Activity2a 和 Activity2b 都是从 Activity1 开始的。如何通过父级将数据从 Activity2a 传输到 Activity2b？有任何想法吗？我想我必须使用意图，但不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:01:14.160

原始类型可以通过 Intent 传递。看看[这里](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android)参考我通过一个公共类传递，比如 MyApp

# yii - CloudControl 部署脚本中不可访问的环境变量

> ID：15854219
> 
> 赞同：1
> 
> 时间：2013-04-06T17:58:42.777
> 
> 标签：yii, composer-php, cloudcontrol

我有一个由 Composer 调用的脚本，它应该运行一些数据库过程。但是，该脚本没有环境变量，因此未按预期连接到数据库。

我尝试使用 SSH 访问应用程序，并且所有环境变量都在那里，可由 PHP 命令行客户端访问。

部署输出的摘录：

```
-----> Receiving push
#!/usr/bin/env php
All settings correct for using Composer
Downloading...

Composer successfully installed to: /srv/tmp/builddir/code/composer.phar
Use it: php /srv/tmp/builddir/code/composer.phar
       Welcome to Phundament

       Installing application...

       Array
       (
       )
       bool(false)
       bool(false) 
```

这三个调试输出是由（是的，我创建了 APPLICATION_ENV var，如指南中所述）：

```
print_r($_ENV);
var_dump(getenv('CRED_FILE'));
var_dump(getenv('APPLICATION_ENV')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:50:00.163

这是对的。在映像的推送和构建过程中，没有可用的附加凭据。要运行数据库迁移或类似脚本，我建议您使用 cctrlapp [run 命令](https://www.cloudcontrol.com/dev-center/Platform%20Documentation#secure-shell-ssh)。您可以轻松地将其与推送和部署命令一起编写脚本。

# python - 使用python在hadoop上绘制路径

> ID：15854221
> 
> 赞同：-1
> 
> 时间：2013-04-06T17:58:49.940
> 
> 标签：python, map, hadoop, reduce

嗨，伙计们，我必须在 python 中使用必须在 hadoop 上运行的 map reduce 范例编写一个算法：

让我们假设给定一个有向图 G = (V,E)，一条边 (v,u) ∈ E 意味着 v 正在跟随 u，或者 v 已经声明 u 是他的朋友，因此 u 有可能影响 v （但不一定反过来）。现在，给定一个网络 G = (V,E) 和一个节点 v ∈ V，我们想要找到所有节点 u，使得从 v 到 u 的路径最长为 3。 为 Hadoop 设计并实现一个算法找到所有这样的节点。假设输入文件给出每个节点的邻接表，即它们的形式为 v:u1 ,u2 ,u3 。. . 其中 v 是一个节点，每个 ui 对应于边 (v,ui )。

我不知道如何实现 map 和 reduce 任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:30:30.820

我会推荐[https://github.com/Yelp/mrjob](https://github.com/Yelp/mrjob)

mrjob 负责打包您的代码并处理流 API。你只需要编写一个 map 和 reduce 函数。它还支持多步骤作业，如果您需要多次 map-reduce。

对于您描述的问题，我认为您可以编写一个多步骤作业来解决该问题。您可以将 V 作为参数传递给作业。

*   地图 1 - 对于每条边 (a,b) 产生 (a, (a,b)) 和 (b, (a, b)
*   减少 1 - 您将获得一个边列表，其中一些以 a 开头，一些以 a 结尾。同时产生 (a, [(a, c)]) 和 (a, [(b, a), (a, c)]

您现在拥有长度为 1 和 2 的所有路径。在另一个步骤中重复以获取长度为 1 到 3 的所有路径。您的最终归约可以丢弃不以 v 开头的任何内容，并返回所有路径 (v, ui)

# java - java.lang.NullPointerException 由于 android 中的 setupActionBar

> ID：15854225
> 
> 赞同：0
> 
> 时间：2013-04-06T17:59:25.927
> 
> 标签：java, android, eclipse

我希望堆栈跟踪能讲述这个故事。作为典型，我`setupActionBar()`在里面调用`onCreate`并且代码`setupActionBar()`是自动生成的

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setupActionBar() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

也许其他人经历过类似的事情。我的清单、布局、字符串资源或我能看到的任何地方都没有红线。

```
04-06 09:59:25.913: E/AndroidRuntime(628): FATAL EXCEPTION: main
04-06 09:59:25.913: E/AndroidRuntime(628): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.game.example/com.game.example.WeaponActivity}: java.lang.NullPointerException
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.os.Looper.loop(Looper.java:137)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-06 09:59:25.913: E/AndroidRuntime(628):  at java.lang.reflect.Method.invokeNative(Native Method)
04-06 09:59:25.913: E/AndroidRuntime(628):  at java.lang.reflect.Method.invoke(Method.java:511)
04-06 09:59:25.913: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-06 09:59:25.913: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-06 09:59:25.913: E/AndroidRuntime(628):  at dalvik.system.NativeStart.main(Native Method)
04-06 09:59:25.913: E/AndroidRuntime(628): Caused by: java.lang.NullPointerException
04-06 09:59:25.913: E/AndroidRuntime(628):  at com.game.example.WeaponActivity.setupActionBar(WeaponActivity.java:103)
04-06 09:59:25.913: E/AndroidRuntime(628):  at com.game.example.WeaponActivity.onCreate(WeaponActivity.java:38)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.Activity.performCreate(Activity.java:5008)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-06 09:59:25.913: E/AndroidRuntime(628):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-06 09:59:25.913: E/AndroidRuntime(628):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:51:52.153

我删除了该方法`setupActionBar()`和相关代码，它可以工作。

```
 @TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setupActionBar() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

有更好的解决方案吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:10:28.150

确保您的应用程序在清单中正确设置了主题。

```
<application android:label="@string/app_name" android:icon="@drawable/icon" android:theme="@style/Theme.Holo"> 
```

确认您已将新活动添加到清单中 - 并且您没有覆盖它的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T14:43:21.727

正如@Bill Mote 所说，我遇到了同样的问题（setupActionBar() 上的 NullPointerException）我通过更改 AndroidManifest.xml 文件中的主题来解决这个问题：

```
<application
...
android:theme="@android:style/Theme.Black 
```

至

```
android:theme="@android:style/Theme.Holo 
```

那么一切都很好。

# matlab - MATLAB Image Sharpening - Gaussian High Pass Filter using (1- Gaussian Low Pass Filter)

> ID：15854228
> 
> 赞同：1
> 
> 时间：2013-04-06T17:59:31.277
> 
> 标签：matlab, image-processing, gaussian

我正在尝试通过设计高斯高通滤波器来锐化图像。我想使用高通滤波器等效于单位矩阵减去低通滤波器这一事实来做到这一点，所以我做了以下事情：

```
image= imread('Question3_Data-Cats.jpg'); % read image

H = 1 - fspecial('gaussian' ,[5 5],2); % create unsharp mask
sharpened = imfilter(image,H);  % create a sharpened version of the image using that mask

imshow([image sharpened]); %showing input & output images 
```

我没有得到清晰的图像。相反，我在图像的一小块区域上得到了一个带有一些颜色的白色图像。有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-19T09:45:40.047

让我们`g`成为`gaussian`内核并`f`成为图像。然后`f * g`（卷积）给出图像的模糊版本。这意味着`low-passed`图像的版本。

然后考虑[![f - f \ast g](https://i.stack.imgur.com/IJvsL.gif)](https://i.stack.imgur.com/IJvsL.gif)。这意味着`image - lowpass image`。这给出了`high-passed`图像的版本。它仅包含图像详细信息。细节是黑色背景上的白色。我认为这就是你现在得到的图像。

[![图像细节](https://i.stack.imgur.com/DQ6xK.gif)](https://i.stack.imgur.com/DQ6xK.gif)

从图像中提取图像细节后，您必须将它们添加回图像以获得锐化的图像。

[![锐化图像](https://i.stack.imgur.com/k9f53.gif)](https://i.stack.imgur.com/k9f53.gif)

这意味着您可以通过与图像进行卷积来获得锐化`2e - g`的图像（这是不锐化的蒙版）。

您可以`2e`从 matlab 使用`padarray(2,[2 2])`和`g`使用`fspecial('gaussian' ,[5 5],2)`.

```
H = padarray(2,[2 2]) - fspecial('gaussian' ,[5 5],2); %create unsharp mask 
```

有时，您需要控制图像细节的亮度。你可以这样做

> 锐化图像 = 图像 + alpha（图像细节）

[![控制图像细节的亮度](https://i.stack.imgur.com/n5mHb.gif)](https://i.stack.imgur.com/n5mHb.gif)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T18:46:18.853

试试这个：

```
H = padarray(2,[2 2]) - fspecial('gaussian' ,[5 5],2); % create unsharp mask 
```

1 是一个标量。您需要一个 5x5 阵列，其中一个位于中心。此外，如果您想保存亮度，过滤器元素的总和必须为 1，因此您需要将中心值加倍以抵消您要减去的量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-04T19:09:12.177

```
I= imread('peppers.png'); % read image
H = padarray(2,[2 2]) - fspecial('gaussian' ,[5 5],2); % create unsharp mask % create unsharp mask
figure,imshow(I);
K = imfilter(I,H);  % create a sharpened version of the image using that mask
figure,imshow(K); %showing input & output images 
```

# java - 扫描仪文本文件

> ID：15854229
> 
> 赞同：0
> 
> 时间：2013-04-06T17:59:33.133
> 
> 标签：java, file, text, nosuchelementexception

我正在为一个程序编写代码，该程序从文本文件中获取单词并将它们按字母顺序排列，但我似乎无法让扫描仪工作？

```
public static void Option1Method() throws IOException {
    FileWriter aFileWriter = new FileWriter("wordlist.txt", true);
    PrintWriter out = new PrintWriter(aFileWriter);
    String word = JOptionPane.showInputDialog(null, "Enter a word");

    out.println(word);
    out.close();

    aFileWriter.close();

    String inputFile = "wordlist.txt";
    String outputFile = "wordlist.txt";
    FileReader fileReader = new FileReader(inputFile);
    Scanner scan = new Scanner(fileReader);
    scan.nextLine;
    String inputLine;
    List<String> lineList = new ArrayList<String>();
    while ((inputLine = scan.nextLine()) != null) {
        lineList.add(inputLine);
    }
    fileReader.close();

    Collections.sort(lineList);

    FileWriter fileWriter = new FileWriter(outputFile);
    PrintWriter out1 = new PrintWriter(fileWriter);
    for (String outputLine : lineList) {
        out1.println(outputLine);
    }
    out1.flush();
    out1.close();
    fileWriter.close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:01:00.343

`Scanner#nextLine`是一种方法。您需要添加括号。代替

```
scan.nextLine; 
```

和

```
scan.nextLine();
             ^ 
```

也`Scanner`用于`hasNextLine`检查后续行。调用`scan.nextLine()`打开的文件最终会导致`NoSuchElementException`. 代替：

```
while ((inputLine = scan.nextLine()) != null) {
  ...
} 
```

和

```
while (scan.hasNextLine()) {
   inputLine = scan.nextLine();
   lineList.add(inputLine);
} 
```

请注意，第一次调用会`scan.nextLine()`导致第一行被使用，而不被写入排序的输出文件。如果您打算将所有单词写入文件，请删除或注释此行。

# java - 为什么在此代码中出现“值 X 不是 Y 的成员”错误？

> ID：15854236
> 
> 赞同：0
> 
> 时间：2013-04-06T18:00:32.590
> 
> 标签：java, scala, twitter, twitter4j

我正在使用 Twitter4j 使用以下代码从 Twitter 获取趋势：

```
 val twitter = new TwitterFactory().getInstance
    val twitterStream = new TwitterStreamFactory().getInstance
    twitterStream.addListener(simpleStatusListener) 
    val trends = twitter.getTrends
    println(trends.getName) 
```

我尝试了不同的方法来获取趋势，但我不断收到以下错误：

```
value getTrends is not a member of twitter4j.Twitter 
```

有人可以指出什么是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:35:24.923

该方法[已从](https://github.com/yusuke/twitter4j/commit/06dd4358aa4fb0bb09467545a1d976df23d15ea8)示例中删除，`twitter4j`随后也从示例中删除。查看[当前支持](https://github.com/yusuke/twitter4j/blob/master/twitter4j-core/src/main/java/twitter4j/TwitterImpl.java#L1687)的其他与趋势相关的方法。

[作者在此处](https://github.com/yusuke/twitter4j/tree/master/twitter4j-examples/src/main/java/twitter4j/examples)提供了许多其他最新的示例。

# c++ - 在 C++ 中调整向量大小时调用一次类构造函数

> ID：15854237
> 
> 赞同：2
> 
> 时间：2013-04-06T18:00:37.903
> 
> 标签：c++, stl

我正在尝试了解 C++ STL 中的向量...

我有一堂课`temp`：

```
class temp
{
private :
    int a;
public :
    //temp() {}
    temp(int a)
    {
        std::cout<<"ctor called"<<std::endl;
        this->a=a;
    }
    void setA(int a)
    {
        this->a=a;
    }
    int getA()
    {
        return a;
    }
}; 
```

现在，主要是，我写道：

```
int main() {
    vector<temp> v;
    v.resize(7,temp(5));
    for(int i=0;i<7;i++) {
        v[i].setA(i);
    }

    for(int i=0;i<7;i++) {
        cout<<v[i].getA()<<"\t";
    }
} 
```

我得到的输出是

```
ctor called
0 1 2 3 4 5 6 
```

我想知道为什么即使在创建 7 个不同的 temp 类对象时构造函数也只调用一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T18:03:05.383

因为向量的元素是通过**复制**参数来初始化的。您传递的参数的创建是您代码中唯一一次调用您编写的ctor。`std::vector`您正在调用的 ctor描述为[here](http://en.cppreference.com/w/cpp/container/vector/vector)，它是您正在调用的版本 (2)。

将 copy-ctor 添加到您的类中以查看发生了什么：

```
temp(const temp& t)
{
    std::cout<<"copy-ctor called"<<std::endl;
    this->a = t->a;
} 
```

在您的代码中，编译器为您生成了一个 copy-ctor，但显然没有调试输出，因此您看不到它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T18:02:24.980

正在为您创建的临时对象调用构造函数`temp(5)`。向量的所有元素都是通过复制该对象来构造的。这当然会使用复制/移动构造函数。

基本上，`vector`您正在调用的构造函数只要求元素的类型在`CopyInsertable`该向量中。这意味着必须满足以下条件：

```
allocator_traits<A>::construct(a, p, v); 
```

其中`A`是分配器类型，`a`是分配器对象，`p`是指向已分配内存的指针，`v`是要构造的对象。这将本质上使用placement-new 来构造向量的元素，将值传递`v`给它的构造函数。在这种情况下，`v`是您传递的构造函数的第二个参数，因此它调用复制/移动构造函数。

# asp.net - 类中的 ASP.NET 警报框

> ID：15854239
> 
> 赞同：2
> 
> 时间：2013-04-06T18:00:49.880
> 
> 标签：asp.net

我正在使用“服务”类连接到数据库并将 DataTable 返回到我的 ASP.NET 页面。

我正在使用 try/catch 来捕获 SqlExceptions。我想在警报框中向用户显示异常文本。我该怎么做呢？

这是我在 Service.class 中的函数：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web;

namespace Classes
{
    public class Service
    {
        private static DataTable getDataTable(string query)
        {
            DataTable dt = null;
            SqlConnection con = Dao.getConnection();
            if (Dao.checkConnection())
            {
                SqlDataAdapter da = new SqlDataAdapter(query, con);
                dt = new DataTable();
                try
                {
                    da.Fill(dt);
                }
                catch (SqlException ex)
                {
                //MessageBox.Show(ex.Message);
                Response.Write("<script>alert('This is Alert');</script>");
                //HttpContext.Current.Response.Write();
                //ScriptManager.RegisterClientScriptBlock(this, this.GetType(), " ","alert('ERROR')", true);
                //var clientScript = Page.ClientScript;
                //clientScript.RegisterClientScriptBlock(null, "AlertScript", "alert('ERROR')'", true);
                //System.Diagnostics.Debug.WriteLine("Database error: " + ex.Message);
            }
        }
        return dt;
    } 
```

编译器给了我这个：当前上下文中不存在名称“响应”。

我想这是非常基本的，只是还没有找到答案。评论的东西是我到目前为止所尝试的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:04:12.023

您可以使用[System.Web.HttpContext.Current.Response](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.response.aspx)作为您正在寻找的响应在继承自 System.Web.UI.Page 的类下可用

```
System.Web.HttpContext.Current.Response.Write("<script>alert('This is Alert');</script>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:27:43.607

尝试这个

```
ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + String Exception message + "');", true); 
```

# c - fopen 从变量中读取

> ID：15854240
> 
> 赞同：2
> 
> 时间：2013-04-06T18:00:53.063
> 
> 标签：c, operating-system, fopen

我一直在使用 FAT-12 文件系统处理这个操作系统项目。最近我去做了，这样每个命令都在同一个磁盘上运行。为此，我只是在共享内存中添加了一个字符串。但是，从共享内存中提取信息并将其传递到 fopen 后，我收到错误消息“无法打开软盘驱动器或映像”。为了解决这个问题，我已经确保我具有读写权限，并且软盘映像没有因处理 mkdir 和 rmdir 等命令而损坏。我什至尝试撤消使进程共享软盘映像的更改，但问题没有解决。如果您对为什么会发生这种情况有任何想法，我们将不胜感激。

这是我用 fopen 读取软盘映像的地方，而我的调试语句是：

```
 int main(int argc, char* argv[])
    {
       // unimportant code

       // get shared memory
       FileInfo_retrieve();
       fprintf(stderr, "Current Disk(ls): %s\n", FileInfo_getPointer()->currentDisk);
       //FILE_SYSTEM_ID declared as a global variable
       FILE_SYSTEM_ID = fopen(FileInfo_getPointer()->currentDisk, "r+");
       FileInfo_detach();

       if(FILE_SYSTEM_ID == NULL)
       {
         printf("Could not open the floppy drive or image.\n");
         exit(1);
       }

       // more unimportant code
    } 
```

这是存储在共享内存中的结构的定义：

```
 // from the shared memory header
    #define MAX_FILE_PATH_SIZE 2048

    typedef struct FileInfo_STRUCT
    {
      char filename[9];
      char extension[4];
      char cwd[MAX_FILE_PATH_SIZE];
      char currentDisk[32];
      int FLC;
      int TotalEntries;
      int TotalAvailableEntries;
    } FileInfo; 
```

这是我在运行时声明进入共享内存的所有内容的地方：

```
 // declared in header
    bool FileInfo_Init(const char* dirName, const char* currDir, int FLC)
    {
      if(FileInfo_create())
      {
        strcpy(FileInfo_getPointer()->fileName, dirName);
        strcpy(FileInfo_getPointer()->cwd, currDir);
        strcpy(FileInfo_getPointer()->currentDisk, "../floppysInUse/floppy1");

        FileInfo_getPointer()->FLC = FLC;

        // searches fat table at runtime and finds how much of the disk is available
        StartUp();

        FileInfo_getPointer()->TotalEntries = total;
        FileInfo_getPointer()->TotalAvailableEntries = available;

        FileInfo_detach();
        return true;
      }

      return false;
    } 
```

这是运行命令后的输出。调试语句和我从打开文件中得到的错误：

```
 Current Disk(ls): ../floppyInUse/floppy1
         Could not open the floppy drive or image. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T20:53:30.973

OP 说他找到了解决方案，尽管他没有说是什么。[（这里是评论）](https://stackoverflow.com/questions/15854240/fopen-reading-from-a-variable#comment22623191_15854240)

# c# - 在 Autofac 中注册异步工厂

> ID：15854245
> 
> 赞同：6
> 
> 时间：2013-04-06T18:01:30.380
> 
> 标签：c#, autofac, async-await, c#-5.0

我有一个从存储库获得的 Wallet 类。我正在尝试在 Autofac 中正确注册两者，以便使用钱包的类可以注入适当的实例。问题是存储库使用异步方法（返回任务）。Autofac 是否支持这种情况？

这不起作用：

```
cb.RegisterType<WalletRepository>()
    .As<IWalletRepository>()
    .SingleInstance();
cb.Register(async c => await c.Resolve<IWalletRepository>().CreateAsync(App.WalletPath));
cb.RegisterType<ViewModel>()
    .AsSelf().
    .SingleInstance(); 
```

在我刚刚拥有的应用程序中的某个地方：

```
class ViewModel
{
    public ViewModel(Wallet wallet)
    {
        //nothing fancy here
    }
} 
```

打电话时`container.Resolve<ViewModel>()`我得到一个异常说钱包没有注册。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T23:34:51.610

`async`除非我弄错了 Autofac 对工厂没有任何特定的支持。你仍然可以让它工作，但你必须编写一些样板代码，因为构造函数注入不起作用。您还必须更加直截了当并说您想要`Task<T>`而不是`T`. 整个代码看起来像这样：

```
cb.RegisterType<WalletRepository>()
  .As<IWalletRepository>()
  .SingleInstance();
cb.Register(c => c.Resolve<IWalletRepository>().CreateAsync(App.WalletPath));
cb.Register(async c => new ViewModel(await c.Resolve<Task<Wallet>>()))
  .SingleInstance();
var container = cb.Build();
var viewModel = await container.Resolve<Task<ViewModel>>(); 
```

Autofac 可能有一些扩展点来简化此代码，但我对它的了解还不够，无法帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T10:57:34.543

这可能会导致死锁。Autofac 在一些处理不同生命周期范围解析的逻辑中使用了锁。因此，如果异步工厂操作将尝试在另一个线程中解决某些问题，您将遇到死锁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T05:49:12.973

一种选择是让注册执行将异步调用转换为其结果所需的阻塞。

IE：

```
cb.Register(c => c.Resolve<IWalletRepository>().CreateAsync(App.WalletPath).Result); // nb: blocking call 
```

这意味着当依赖关系被解决时，AutoFac 将被迫进行阻塞，并且服务的客户端不需要知道服务工厂是异步的。

这是否是一个好主意在很大程度上取决于你当时正在做什么。

# html - 我怎样才能从盒子的底部得到一个非常“模糊”的盒子阴影？

> ID：15854247
> 
> 赞同：0
> 
> 时间：2013-04-06T18:01:59.330
> 
> 标签：html, css

我的目标是用纯 css做到[这一点。](http://pachonk.com/alex/test/real/pachonkadmin.html)

我正在尝试使用非常大的阴影模糊来制作我的盒子阴影，如下所示：

```
box-shadow: 0 0px 200px -2px #888; 
```

在盒子下方，它看起来很棒，但现在它使整个页面变暗。如何在没有变暗的情况下制作超大模糊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:11:40.233

解决这个问题的最好方法可能是使用[css-gradients](https://developer.mozilla.org/en-US/docs/CSS/gradient)而不是阴影。

我在[jsfiddle](http://jsfiddle.net/Qjgps/1/)上做了一个小演示。我不确定这是否是您正在寻找的东西。这是我使用的css：

```
background: rgb(254,255,255); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(254,255,255,1) 69%, rgba(226,226,226,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(69%,rgba(254,255,255,1)), color-stop(100%,rgba(226,226,226,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(254,255,255,1) 69%,rgba(226,226,226,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(254,255,255,1) 69%,rgba(226,226,226,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(254,255,255,1) 69%,rgba(226,226,226,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(254,255,255,1) 69%,rgba(226,226,226,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#feffff', endColorstr='#e2e2e2',GradientType=0 ); /* IE6-9 
```

由[该](http://www.colorzilla.com/gradient-editor/)工具生成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:15:51.527

我想出了这个使用[这个 CSS3 生成器](http://css3generator.com/)

```
-webkit-box-shadow: inset 0px -350px 200px -250px rgba(5, 5, 5, 1);

        box-shadow: inset 0px -350px 200px -250px rgba(5, 5, 5, 1); 
```

这是一种非常跨浏览器友好的方法，如果您应用背景颜色，它将达到我认为您想要的结果。

看看这个[jsFiddle](http://jsfiddle.net/Qjgps/4/)

**来源**

[CSS3 生成器](http://css3generator.com/)

# amazon-web-services - AWS EC2 无法打开与 SQL Server 的连接

> ID：15854254
> 
> 赞同：1
> 
> 时间：2013-04-06T18:02:27.930
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

我在 EC2 上的 Web 应用程序无法连接到 AWS RDS Db 实例。

```
error: SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)

Win32Exception (0x80004005): The network path was not found 
```

我在 EC2 上托管了一个 Web 应用程序。

使用我的本地 SSMS，我能够连接和编辑 AWS RDS 上的数据。

在我的本地机器上，我还将我的 Visual Studio 应用程序指向 AWS RDS 实例，它工作得很好。

现在，当我将应用程序部署到 EC2 时，应用程序无法连接到 AWS RDS。

使用 AWS Toolkit for net，我向数据库安全组添加了权限，并授予了对 EC2 IP 地址和私有 IP 的权限。但没有运气。

请帮忙......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:12:47.197

检查您要连接的区域。

我最初创建了西部地区的数据库。我的本地人继续连接到西部地区。

当我授予所有必要的权限时，我将其授予东部地区的数据库。我的代码应用程序仍然指向西部地区。呃，我。

# database - 超出 Weblogic DB 会话

> ID：15854255
> 
> 赞同：2
> 
> 时间：2013-04-06T18:02:30.577
> 
> 标签：database, weblogic

“为池“myDataSource”创建连接时收到异常：ORA-00604：递归 SQL 级别 1 发生错误”

ORA-00018: 超出最大会话数

日志中没有任何消息似乎提供了比这更多的信息。我有另一个运行良好的域，我认为它应该是这个域的镜像......我已经玩过它看起来的每一个设置，池大小，添加了一个测试表，超时时间等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:33:03.190

当由于某种原因未创建 db 资源的 ACTIVE 表时，我已经看到了这种情况。我敢打赌这就是问题所在。如果您需要创建它，可以在此处找到架构：

```
<WebLogic server directory>/server/db/db2/leasing.ddl 
```

# python - 使用python获取包含JavaScript的网页

> ID：15854257
> 
> 赞同：0
> 
> 时间：2013-04-06T18:02:52.133
> 
> 标签：python, web-applications

我是 python 新手。作为编写用于抓取 URL 的模块的一部分，我注意到我使用 python 请求模块得到的结果可能与我在浏览器中加载 URL 时得到的不同。这是因为页面可能包含执行的 JS 代码，结果是我在浏览器中看到的帽子。

我的问题 - 1\. 我该如何处理这些网站。

1.  python 或任何其他模块是否仅限于获取静态页面或在服务器端完全呈现的页面？

2.  如何处理执行 Ajax 样式查询以加载页面的页面？

我假设可能没有图书馆，我必须自己做点什么。我希望我不必在我的代码中构建 webkit 之类的东西:)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:13:42.413

您可以查看模拟浏览器（如[mechanize](https://pypi.python.org/pypi/mechanize/0.2.5)）或实际驱动浏览器（如[selenium](https://pypi.python.org/pypi/selenium/2.31.0) ）的东西，它应该报告您在 javascript 运行后看到的 html。

这应该是您需要对 Selenium 执行的操作，但已经有一段时间了：

```
from selenium import webdriver

br = WebDriver.Ie() #or .Firefox() or .Chrome() (but not on x64)
br.get(r'http://google.com')
html = br.page_source 
```

对于 html 比较，它至少是不同的：

```
from requests import get
r = get(r'http://google.com')
print r.content[:100]
>>><!doctype html><html itemscope="itemscope" itemtype="http://schema.org/WebPage"><head><meta itemprop'
print html[:100]
>>><html itemtype="http://schema.org/WebPage" itemscope="itemscope"><head><meta http-equiv="X-UA-Compat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:38:23.077

你可以使用

*   [http://code.google.com/p/pyv8/](http://code.google.com/p/pyv8/)
*   [http://code.google.com/p/python-spidermonkey/](http://code.google.com/p/python-spidermonkey/)

和一个相关问题：[Web-scraping JavaScript page with Python](https://stackoverflow.com/questions/8049520/web-scraping-javascript-page-with-python)

# singularitygs - 如何使用父网格定义创建嵌套网格

> ID：15854259
> 
> 赞同：1
> 
> 时间：2013-04-06T18:03:08.887
> 
> 标签：singularitygs

如何创建一个嵌套网格，它将与其父级对齐？

假设我有网格：2 4 4 3

我希望它的每个中心列都被 2 列细分，这样它们就会与它们的父容器对齐。

谢谢。

为了进一步解释我的问题，请考虑以下代码：

```
#content{
    at include grid-span(2,2);
    border-top: 1px solid red;
    article.article1{
        at include grid-span(1, 1, 4 4);
    }
    article.article2{
        at include grid-span(1, 2, 4 4);
    }
}
#sidebar{
    at include grid-span(1,4);
} 
```

有没有办法避免在一个规则中重复条款规则，这两者都适用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:44:30.730

您只需要在嵌套的 mixin 中包含上下文。在这种情况下`4 4`，您的混合将`@include grid-span(1, 1, 4 4)`跨越整个网格的第二列，或嵌套网格的第一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T06:28:37.420

我认为你可以通过嵌套来做到这一点`@include layout($grid, $gutter)`

[在这里](https://github.com/Team-Sass/Singularity/wiki/Spanning-The-Grid#group-context-overrides)检查

# vhdl - VHDL RAM 端口映射

> ID：15854260
> 
> 赞同：1
> 
> 时间：2013-04-06T18:03:32.557
> 
> 标签：vhdl, modelsim

我有一个 ram 实体，我想从 2 个不同的其他实体 A 和 B 访问它。我在 A 和 B 内制作实体端口映射，但是当我在 modelsim 上开始模拟时，我得到两个 ram，一个用于实体 A，一个用于实体B. 我想要的是让两个实体访问同一个 ram，而不是为每个实体单独访问 ram。如何使用modelsim pe学生版完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:51:40.693

正如您所发现的，这不是这样做的方法。

创建一个实例化实体 A 和 B 的顶级实体，在那里也创建 RAM（通过您喜欢的任何技术），并通过信号将其连接到 A 和 B 的正确端口。

# drupal-7 - 注销 Drupal 用户需要重新加载浏览器

> ID：15854261
> 
> 赞同：0
> 
> 时间：2013-04-06T18:03:44.183
> 
> 标签：drupal-7

当我退出我正在处理的 Drupal 7 站点时，我需要重新加载浏览器才能显示我已退出。我尝试在注销到感谢页面后使用规则进行重定向，然后在该页面上我添加了一个 JavaScript 以刷新几次，然后重定向到主页。

```
<script type="text/javascript">
window.onload = loadRefresh;

function loadRefresh() {
  location.reload();
}

setTimeout(function() {
  window.location.href = "/";
}, 2000);
</script> 
```

进入主页，但显示我已登录。我什至尝试过：

```
<?php
session_start();
session_destroy();
unset($GLOBALS['user']);
?> 
```

但我仍然必须在浏览器上重新加载才能使其工作。有没有我错过的技巧？

# c++ - 无法访问类变量

> ID：15854265
> 
> 赞同：0
> 
> 时间：2013-04-06T18:04:03.387
> 
> 标签：c++, class, variables, header

您好，我是 C++ 和头文件的新手，我不知道如何获取我在头文件中声明的变量。

我的类.h

```
#pragma once
#include <iostream>

class MyClass
{
private:
    int numberOfJellyBeans;
public:
    MyClass();
    ~MyClass();
    void GenerateJellyBeans();
} 
```

我的类.cpp

```
#include "MyClass.h"
MyClass::MyClass()
{
    //constructor
}

MyClass::~MyClass()
{
    //destructor
}
void GenerateJellyBeans()
{
    //doesnt work?
    numberOfJellyBeans = 250;

    //Also doesnt work
    MyClass::numberOfJellyBeans = 250;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:06:33.317

`GenerateJellyBeans()`必须在 的范围内`MyClass`，所以你必须写：

```
void MyClass::GenerateJellyBeans()
{

  numberOfJellyBeans = 250;
} 
```

现在 C++ 知道它`GenerateJellyBeans()`是 的成员`MyClass`，您现在可以访问您的类的变量。

如果您只是将其声明为 plain `void GenerateJellyBeans()`，则`this`编译器无法使用（实际上`numberOfJellyBeans = 250;`是 的简写`this->numberOfJellyBeans = 250;`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:05:54.473

您不小心定义了一个名为`GenerateJellyBeans`与`MyClass::GenerateJellyBeans`. 要纠正这一点：

```
void MyClass::GenerateJellyBeans()
     ^^^^^^^^^ 
```

现在您将能够访问`numberOfJellyBeans`：

```
{
    numberOfJellyBeans = 250;
} 
```

# android - 在 OpenGL ES 2.0 中更改四边形的中心以进行旋转

> ID：15854266
> 
> 赞同：0
> 
> 时间：2013-04-06T18:04:07.673
> 
> 标签：android, rotation, opengl-es-2.0, translation

全部

使用我的四边形移动位置下方的代码。但是，我不希望这种情况发生，我所追求的只是让旋转中心移动。

有没有人有任何想法？

注意，如果我在旋转之前放置一个翻译功能，它就没有任何效果。

任何帮助，将不胜感激。谢谢。

```
Matrix.setIdentityM(mRotationMatrix, 0);

Matrix.setRotateM(mRotationMatrix, 0, 45, 0, 0, 0.1f);

Matrix.translateM(mRotationMatrix, 0, quadCenterX, quadCenterY, 0f);

// Combine the rotation matrix with the projection and camera view
Matrix.multiplyMM(mvpMatrix2, 0, mvpMatrix, 0,  mRotationMatrix, 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:01:20.620

要围绕不同的旋转中心旋转：

```
Matrix.setIdentityM(mRotationMatrix, 0);

Matrix.translateM(mRotationMatrix, 0, quadCenterX, quadCenterY, 0f);
Matrix.rotateM(mRotationMatrix, 0, 45, 0, 0, 0.1f);
Matrix.translateM(mRotationMatrix, 0, -quadCenterX, -quadCenterY, 0f); 
```

请注意，您必须使用`rotateM`而不是`setRotateM`，因为 setRotateM 会覆盖以前的 Matrix。

# multithreading - 在java中选择线程模型的正确步骤

> ID：15854269
> 
> 赞同：1
> 
> 时间：2013-04-06T18:04:28.113
> 
> 标签：multithreading, profiling, threadpool

1）我正在研究我的问题的标题，这是我应该采取和理解的正确路径/步骤，以便为我的应用程序选择正确的线程模型。

2) 我有一台 Linux 机器，其 /proc/cpuinfo 文件为我提供以下信息 a) 物理处理器数量：- 2 b) cpucores 数量：- 6 c) 虚拟处理器数量：-24

我在同一台机器上运行了大约 5 个 JVM 进程（同一个应用程序）。每个进程有 3 个线程，一个轮询新事件（线程 A），一个查询数据库（线程 B，每个事件大约 20 个查询），一个发布事件数据（线程 C）。1个LinkedBlockingQueue连接线程A和线程B，另一个连接线程B和线程C。

**每个事件都独立于另一个**。我想利用这个语句，因此想去线程池，可以引入更多线程 B 类型的线程，它们并行提取数据并将它们发送到线程 C。

到目前为止我所做的：-

1）没什么，我正在决定正确的策略。2）我浏览了以下博客 [http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/](http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/) 3）那里描述的公式要我计算 N/C，比率等待时间来计算时间。同样，我决定远程使用 Netbeans 分析器并分析线程活动和方法级别的检测。4) 但是同样没有给我 CPU 使用率，所以我打算使用 Visual VM 的监视器选项卡来分析 CPU 使用率。5) 我知道线程的缩放需要更多的累积堆栈内存这一事实。6）随时数据库连接的数量可能不是问题，但我必须检查一下。

我是否走在正确的道路上？特别是我需要建议，因为有多个 JVM 进程，所以我在分析方面变得更加困惑？

谢谢

# google-chrome-extension - Chrome 扩展更新

> ID：15854272
> 
> 赞同：1
> 
> 时间：2013-04-06T18:04:39.330
> 
> 标签：google-chrome-extension

只是为了确保，如果我在 Chrome 网上应用店中更新我的扩展程序，所有用户都会自动获得更新吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:12:32.917

是的。谷歌浏览器将尝试自动更新它。如果您更改权限，扩展程序将被暂时禁用，用户将被要求查看新权限并重新启用它。

# mysql - 加快mysql查询

> ID：15854275
> 
> 赞同：0
> 
> 时间：2013-04-06T18:04:59.360
> 
> 标签：mysql

所以我在这里有一个基本查询，可以在日期范围之间进行选择。似乎需要（相对较长的时间来处理）我想知道我可以做些什么来改善处理时间。这是查询。

```
SELECT h.id as hid,h.created_on,u.id as uid,u.fname,u.lname,u.email  
FROM hud h 
LEFT JOIN user_hud uh on h.id = uh.hid 
LEFT JOIN users u on u.id = uh.uid 
WHERE 
    h.created_on 
    BETWEEN DATE_SUB( CURDATE( ) ,INTERVAL 12 MONTH ) 
        AND DATE_SUB( CURDATE( ) ,INTERVAL 7 DAY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:22:13.360

`hud.id`在、`user_hud.hid`、`users.id`和列`user_hud.uid`上创建索引。`hud.created_on`

如果没有索引，则需要检查*整个表的连接。*使用索引，您可以使用更有效的方法（以更新/删除性能损失和更多磁盘空间为代价）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:42:50.250

首先，您至少需要以下索引：hud 中的 (created_on)，user_hud 中的 (hid)。然后您可以查看您的查询并意识到您的条件在连接中的第一个表上，因此您可以将该条件移动到子查询中：

```
SELECT hids.*, u.id as uid, u.fname,
             u.lname, u.email
FROM (
    SELECT id as hid, created_on
    FROM hud,
       (SELECT DATE_SUB( CURDATE( ) ,INTERVAL 12 MONTH ) as year_ago,
                    DATE_SUB( CURDATE( ) ,INTERVAL 7 DAY) as week_ago) d
    WHERE created_on BETWEEN year_ago AND week_ago
    ) as hids
LEFT JOIN user_hud uh USING(hid)
LEFT JOIN users u on u.id = uh.uid; 
```

# c - 函数指针优于标志

> ID：15854284
> 
> 赞同：4
> 
> 时间：2013-04-06T18:05:44.390
> 
> 标签：c, callback, function-pointers

例如，我有一个名为**int compute ( int x1, int x2, int (* op) (int, int) )**的函数，该函数将函数指针作为参数，该函数指针指向执行一些算术运算的函数

```
int add (int a1, int a2)
{
    return (a1 + a2);
}
int mul (int s1, int s2)
{
    return (s1 * s2);
}
int compute (int x1, int x2, int (* op) (int, int) )
{
    return ( op (x1, x2) );
}
main()
{
    int result;
    int op1, op2;
    op1 = 4;
    op2 = 5;
    result = compute (op1, op2, &add());
    result = compute (op1, op2, &mul());
} 
```

除了所有这些函数指针的东西，我还可以使用标志作为参数而不是函数指针来实现相同的目的。

```
int compute (int x1, int x2, int opFlag)
{
    if ( opFlag == 1 )
        return ( add (x1, x2); );
    if ( opFlag == 2)
        return ( mul (x1, x2); );
    return 1;
}

main()
{
    int result;
    int op1, int op2;

    op1 = 4;
    op2 = 5;

    result = compute (op1, op2, 1);
    result = compute (op1, op2, 2);
} 
```

现在的问题是，在效率、代码大小、可移植性、可读性等方面，**“函数指针”**方法与**“简单标志方法”**的（ad/disad）优势是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:38:31.897

> 就效率而言，“函数指针”方法与“简单标志方法”的（广告/不利）优势是什么，

更少的调用可能会更快。在许多 CPU 上，当您执行大量函数调用时，它们的成本会很高。

> 代码大小，

更少的函数可能更小，因为您没有函数 prolog 和 epilog 代码的重复开销。

> 可移植性，

只要您的代码正确、不受未定义行为的影响并且不依赖于实现定义/特定的行为，则不适用。

> 可读性

可能是主观的。通常，更少的抽象层和更少的间接层比更多的更容易理解。

> ETC。， ？

定义`etc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:31:14.100

当您想添加新操作时怎么办？

函数指针让您（或您的库的未来客户）在不更改计算函数的情况下做到这一点

# ruby-on-rails - rails json gem无法将nil转换为哈希

> ID：15854287
> 
> 赞同：1
> 
> 时间：2013-04-06T18:06:00.550
> 
> 标签：ruby-on-rails, json, gem

刚刚在我的 BlueHost 服务器上部署了一个 rails 应用程序，安装了所有的 gem 并使用 Passenger 启动了该应用程序。

但是，当我转到应用程序时，我看到：

![在此处输入图像描述](https://i.stack.imgur.com/k8RiP.png)

知道为什么会出现错误`can't convert nil into Hash`吗？我也尝试将`json`gem 从降级`1.7.7`为`1.7.5`，但没有成功。（我改回来了，别担心）

**更新 1**

我想也许此时它还没有迁移我的数据库。但是我刚刚迁移了它，仍然遇到同样的问题。

**更新 2** 澄清一下，我使用的是**Ruby 2.0.0-p0**和**Rails 4.0.0.beta1**

**更新 3** 这是我要求的 Gemfile。

```
source 'https://rubygems.org'

gem 'rails', '4.0.0.beta1'
gem 'jquery-rails'
gem 'turbolinks'
gem 'jbuilder', '~> 1.0.1'
gem 'haml'
gem 'simple_form'
gem 'bootstrap-sass'
gem 'execjs'
gem 'therubyracer'
gem 'rvm-capistrano'

group :assets do
  gem 'sass-rails',   '~> 4.0.0.beta1'
  gem 'coffee-rails', '~> 4.0.0.beta1'
  gem 'uglifier', '1.3.0'
end

group :development do
  gem 'better_errors'
  gem 'binding_of_caller'
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:25:01.483

我们将服务器托管从 BlueHost 更改为 DigitalOcean。它现在正在工作......不确定 BlueHost 正在做什么来限制它。

# java - 使用 Eclipse 调试 Java：进程被挂起，但没有抛出任何异常

> ID：15854296
> 
> 赞同：0
> 
> 时间：2013-04-06T18:06:59.020
> 
> 标签：java, eclipse, debugging, exception, block

在 Java 中调试我的应用程序时，进程及其线程暂停，日志记录（定向到文件，没有控制台）被中断，但程序没有抛出异常，尽管可能有原因Java 程序。这在某些情况下会发生，在另一种情况下，整个 Eclipse 都被阻塞了。

执行程序的计算机有足够的空闲 RAM。

使用功能更强大的计算机运行的同一程序运行正常。

可能是什么原因？Eclipse 是否有一些限制导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:34:23.230

Eclipse 可以在遇到**未捕获的异常**或**编译错误**时暂停程序执行。您可能没有在日志中看到异常，因为未处理异常。默认情况下，这会将异常打印到控制台，如果您的记录器在某处捕获并归档它或者您可以访问控制台，您仍然可以访问该控制台。

暂停执行的另一个原因是对观察点的访问修改。

**您可以在Window -> Preferences -> Java -> Debug**下找到并编辑这些调试设置

 **RAM 与断点及其行为无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:21:22.853

Eclipse 是作为 java 程序启动的，所以尝试增加 eclipse 可用的内存（在 eclipse.ini 中）详细信息可以在这里找到：[http ://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse?)

我正在使用-Xmx768m**

# c# - 当属性的属性发生变化时调用 OnPropertyChanged

> ID：15854298
> 
> 赞同：0
> 
> 时间：2013-04-06T18:07:04.207
> 
> 标签：c#, mvvm, windows-runtime

我的视图模型中有一个属性`MyProperty`，它也有一些属性。我只想在`OnPropertyChanged("MyProperty")`其属性之一更改时显式调用。

我可以做这个

```
MyProperty.PropertyChanged += MyPropertyChanged; 
```

但是当所有属性都更改时，将调用处理程序。我知道我可以检查是否`PropertyName`匹配，但我想知道是否有更好的方法。

我需要这个的原因是因为我绑定`MyProperty`到一些控件并且在转换器中我需要使用多个属性，但是当这些属性更改时，控件中不可见更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:59:16.827

如果您的 MyProperty 类型的属性从未绑定到任何东西，那么该类型没有理由实现 INotifyPropertyChanged。无论是否这样做 - 如果您需要对其属性之一的更改进行任何手动处理，您可以简单地定义一个自定义事件，当它发生更改并在您的视图模型中处理时引发。如果您已经在使用 PropertyChanged 并比较字符串 - 除非事件每秒发生多次，否则应该没问题，

# c# - C# 表单未将值插入 SQL Server 数据库

> ID：15854300
> 
> 赞同：2
> 
> 时间：2013-04-06T18:07:18.637
> 
> 标签：c#, sql-server, winforms, insert, sqlconnection

我有一个简单的创建一个新的用户表单，它从两个文本框中获取值，用户名和密码。button2 单击事件应采用这些值并将它们插入到数据库中的用户表中。但是，当我运行我的代码时，出现消息框说数据已添加，我无法使用 VS2010 看到数据库中的数据。

请参阅 VS 中数据库连接的屏幕截图。我还在 VS 中创建了数据库的数据源。

有任何想法吗？

非常感激。

```
private void button2_Click(object sender, EventArgs e)
    {
        string username = txtUsername.Text;
        string password = txtPassword.Text;
        string sqlquery;
        string connection = @"Data Source=.\SQLEXPRESS;AttachDbFilename='C:\Users\Nick\Documents\Visual Studio 2010\Projects\DebenhamsProjectOffice V.01\DebenhamsProjectOffice V.01\DebenhamsProjectOfficeDatabase.mdf';Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection cn = new SqlConnection(connection);
        try
        {
            cn.Open();
        }
        catch (Exception)
        {
            MessageBox.Show("Unable to connect to Database");
        }

        sqlquery = "INSERT INTO Users (Username, Password) VALUES ('" + txtUsername.Text + "','" + txtPassword.Text + "')";
        try
        {
            SqlCommand command = new SqlCommand(sqlquery, cn);
            command.Parameters.AddWithValue("Username", username);
            command.Parameters.AddWithValue("Password", password);
            command.Parameters.Clear();
            MessageBox.Show("User Added");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        txtUsername.Text = "";
        txtPassword.Text = "";
        cn.Close();
    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/arrK9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T18:09:06.500

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！在 Visual Studio 中运行您的应用程序时，它将围绕`.mdf`文件进行复制（从您的`App_Data`目录到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是**看错了 . mdf文件**到底！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`DebenhamsProjectOfficeDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=DebenhamsProjectOfficeDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......

另外：您应该**始终**使用参数化查询并且不要将您的 SQL 语句连接在一起（**尤其是**在包含用户输入时！）以 (a) 避免任何 SQL 注入攻击的危险，并 (b) 提高​​性能！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:08:55.013

您必须调用[Command.ExecuteNonQuery()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)`insert`才能使语句生效。

```
try
{
      SqlCommand command = new SqlCommand(sqlquery, cn);
      command.Parameters.AddWithValue("Username", username);
      command.Parameters.AddWithValue("Password", password);
      command.ExecuteNonQuery();
      command.Parameters.Clear();
      MessageBox.Show("User Added");
}
catch (Exception ex)
{
      MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:15:34.943

只是尝试修复代码。有些元素很重要，有些元素只是优雅。试试看，它可能会起作用。或者可以指出错误所在：

```
private void button2_Click(object sender, EventArgs e)
    {
        string username = txtUsername.Text;
        string password = txtPassword.Text;
        string sqlquery;

        //Put away the apostrophes and used twice double quotations for
        //the full path of the database file:
        string connection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=""C:\Users\Nick\Documents\Visual Studio 2010\Projects\DebenhamsProjectOffice V.01\DebenhamsProjectOffice V.01\DebenhamsProjectOfficeDatabase.mdf"";Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection cn = new SqlConnection(connection);

        /* Better to let the program fail than think it's open and moving on
        removed try, catch*/
        cn.Open();

        //Why using your TextBoxes values if you already created strings?
        //changed

        //you should also be careful users can't type something like "') in the      
        //textboxes or they may cause a SQL injection

        sqlquery = "INSERT INTO Users (Username, Password) VALUES ('" + username + "','" + password + "')";

        try
        {
            SqlCommand command = new SqlCommand(sqlquery, cn);
            /* unnecessary since you already built a query command.Parameters.AddWithValue("Username", username);
            command.Parameters.AddWithValue("Password", password);
            command.Parameters.Clear();   */

            //Missing!!
            command.ExecuteNonQuery();
            MessageBox.Show("User Added");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        //Elegance
        txtUsername.Clear();
        txtPassword.Clear();
        cn.Close();
    } 
```

# cocoa - -swipeWithEvent：直到发生两指滚动时才调用

> ID：15854301
> 
> 赞同：2
> 
> 时间：2013-04-06T18:07:24.067
> 
> 标签：cocoa, nsview, gestures, nsresponder

我在`NSView`里面有一个子类，`NSScrollView`它实现了`-swipeWithEvent`. 我注意到`swipeWithEvent:`在用户第一次在触控板上执行两指滚动之前，它永远不会被调用。之后，它始终如一地工作。什么可能导致这种情况？

# visual-studio-2010 - VS 中的 vim 功能

> ID：15854307
> 
> 赞同：-5
> 
> 时间：2013-04-06T18:07:39.030
> 
> 标签：visual-studio-2010, vim, ide, editor

vim 中是否有类似 Visual Studio 编辑器的功能，称为

```
 Alt + Shift + Arrow keys combination, 
```

编辑文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:17:28.693

看起来你需要`blockwise Visual mode`

`CONTROL-v`在命令模式下按下激活它，然后使用移动键（h，j，k，l）选择一个块。这是最基本的视觉块模式交互选择方法。

使用 vim 从 vim 中查看有关此主题的帮助`:help visual-block`

可以使用更高级的选择方法。这个[Vimcast中描述了一个例子](http://vimcasts.org/episodes/selecting-columns-with-visual-block-mode/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T01:59:54.013

看到这个stackoverflow问题：

*   [如何在编辑器（Atom、Notepad++、Kate、VIM、Sublime、Textpad 等）和 IDE（NetBeans、IntelliJ IDEA、Eclipse、Visual Studio 等）中选择列](https://stackoverflow.com/questions/1802616/how-to-column-selection-in-editors-and-ides-notepad-kate-vim-sublime)。它涵盖了 vim 和几乎所有其他 IDE/编辑器，以及如何使用“块选择”或“列选择”。

正如@dawud 建议的那样，它使用`Ctrl`+ `v`+ 箭头键在可视模式下选择列。

# android - 将xml（android源）转换为pdf

> ID：15854308
> 
> 赞同：3
> 
> 时间：2013-04-06T18:07:39.440
> 
> 标签：android, xml, pdf, apache-fop

```
public void onClick(View v)     
{switch(v.getId())

    { case R.id.button1:

        try {

            // Setup directories
            File baseDir = new File("res/layout");
            File outDir = new File(baseDir, "/sdcard");
            outDir.mkdirs();

            // Setup input and output files
            File xmlfile = new File(baseDir, "activity_main.xml");
            File xsltfile = new File(baseDir, "test.xsl");
            File pdffile = new File(outDir, "ResultXML2PDF.pdf");   
                                    // configure fopFactory as desired
            FopFactory fopFactory = FopFactory.newInstance();

            FOUserAgent foUserAgent = fopFactory.newFOUserAgent();
            // configure foUserAgent as desired

            // Setup output
            OutputStream out = new java.io.FileOutputStream(pdffile);
            out = new java.io.BufferedOutputStream(out);

            try {
                // Construct fop with desired output format
                Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);

                // Setup XSLT
                TransformerFactory factory = TransformerFactory.newInstance();
                Transformer transformer = factory.newTransformer(new StreamSource(xsltfile));

                // Set the value of a <param> in the stylesheet
                transformer.setParameter("versionParam", "2.0");

                // Setup input for XSLT transformation
                Source src = new StreamSource(xmlfile);

                // Resulting SAX events (the generated FO) must be piped through to FOP
                Result res = new SAXResult(fop.getDefaultHandler());

                // Start XSLT transformation and FOP processing
                transformer.transform(src, res);
            } finally {
                out.close();
        }

            System.out.println("Success!");
        } catch (Exception e) {
            e.printStackTrace(System.err);
            System.exit(-1);
        }
        }
} 
```

* * *

## 标题

我想将我的 xml 文件（包括我的视图）转换为 pdf .. 我的 android 应用程序必须生成这个 pdf 。我使用下面的代码，但是当我单击生成器按钮时，应用程序突然关闭，并且 sdcard 中没有文件 pdf（我的 xml 和 xsl 文件在布局目录中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-16T05:37:58.653

您可以使用这个[库](https://github.com/Gkemon/Android-XML-to-PDF-Generator)在几行代码内轻松完成 -

```
 PdfGenerator.getBuilder()
                        .setContext(context)
                        .fromLayoutXMLSource()
                        .fromLayoutXML(R.layout.layout_print,R.layout.layout_print)
                        .setDefaultPageSize(PdfGenerator.PageSize.A4)
                        .setFileName("Test-PDF")
                        .build(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-03T18:08:52.287

也许你可以看看这个链接：

[https://github.com/HendrixString/Android-PdfMyXml](https://github.com/HendrixString/Android-PdfMyXml)

指示

1.  创建 XML 布局

首先创建 XML 布局。给它以像素为单位的尺寸（以及它的所有子视图）和根据横向或纵向的比例，根据比例 1:1.41。

page1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="2115px"
            android:layout_height="1500px"
            android:background="@color/white">
 <TextView android:id="@+id/tv_hello"
            android:textColor="@color/black"
            android:textSize="27px"
            android:textStyle="bold"
            android:padding="6px"/>

</RelativeLayout> 
```

您可以根据需要创建任意数量的页面/模板。

2.  实现视图渲染器

通过扩展 AbstractViewRenderer 或匿名实例化它并注入布局 ID 来实现您的视图渲染器。initView(View view) 会自动为您提供一个膨胀的视图。还有其他选择，但我现在不会介绍。

```
AbstractViewRenderer page = new AbstractViewRenderer(context, R.layout.page1) {
private String _text;

public void setText(String text) {
    _text = text;
}

@Override
protected void initView(View view) {
    TextView tv_hello = (TextView)view.findViewById(R.id.tv_hello);
     tv_hello.setText(_text);
}
};

// you can reuse the bitmap if you want
page.setReuseBitmap(true); 
```

3.  构建 PDF 文档

使用 PdfDocument 或 PdfDocument.Builder 添加页面并在后台使用进度条渲染和运行它。

```
 PdfDocument doc            = new PdfDocument(ctx);

// add as many pages as you have
doc.addPage(page);

doc.setRenderWidth(2115);
doc.setRenderHeight(1500);
doc.setOrientation(PdfDocument.A4_MODE.LANDSCAPE);
doc.setProgressTitle(R.string.gen_please_wait);
doc.setProgressMessage(R.string.gen_pdf_file);
doc.setFileName("test");
doc.setInflateOnMainThread(false);
doc.setListener(new PdfDocument.Callback() {
    @Override
    public void onComplete(File file) {
        Log.i(PdfDocument.TAG_PDF_MY_XML, "Complete");
    }

    @Override
    public void onError(Exception e) {
        Log.i(PdfDocument.TAG_PDF_MY_XML, "Error");
    }
});

doc.createPdf(ctx); 
```

或使用 PdfDocument.Builder

```
new PdfDocument.Builder(ctx).addPage(page).filename("test").orientation(PdfDocument.A4_MODE.LANDSCAPE)
                         .progressMessage(R.string.gen_pdf_file).progressTitle(R.string.gen_please_wait).renderWidth(2115).renderHeight(1500)
                         .listener(new PdfDocument.Callback() {
                             @Override
                             public void onComplete(File file) {
                                 Log.i(PdfDocument.TAG_PDF_MY_XML, "Complete");
                             }

                             @Override
                             public void onError(Exception e) {
                                 Log.i(PdfDocument.TAG_PDF_MY_XML, "Error");
                             }
                         }).create().createPdf(this); 
```

# kendo-grid - 将行模板应用于网格

> ID：15854316
> 
> 赞同：0
> 
> 时间：2013-04-06T18:08:41.183
> 
> 标签：kendo-grid

我试图将行模板应用于网格，但未显示数据......我从一个非常简单的模板开始，之后我将对其进行自定义。

到目前为止我所拥有的：

```
@(Html.Kendo().Grid<MyProject.Models.StudentCF>().
Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.FirstName);
    columns.Bound(p => p.LastName);
    columns.Bound(p => p.Age);
    columns.Bound(p => p.Course);
    columns.Bound(p => p.School.Name);
})
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(read => read.Action("IndexJsonCF", "StudentCF"))
)
.Selectable()
.AutoBind(true)
.Filterable()
.Groupable()
.Sortable()
.Pageable(pager =>
{
    pager.Input(true);
    pager.Messages(messages => messages.Display("Showing items from {0} to {1}. Total items: {2}"));
    pager.PageSizes(new int[]{5,10,20,50,100,1000});
    pager.Refresh(true);
})
.ClientRowTemplate("rowtemplate")
)

<script type="text/x-kendo-template" id="rowtemplate">
    "<tr>" +
        "<td>" +
           "#= FirstName#" +
        "</td>" +
        "<td>" +
           "#= LastName#" +
        "</td>" +
        "<td>" +
            "#= Age#" +
        "</td>" +
        "<td>" +
            "#= Course#" +
        "</td>" +
        "<td>" +
            "#= School.Name#" +
        "</td>" +
     "</tr>" 
</script> 
```

网格中显示的只是带有模板 id 的一行`rowtemplate`（重复）

我错过了什么？

**更新** 我想做这样的事情：[ClientRowTemplate()](https://stackoverflow.com/questions/14452597/possible-to-use-clientrowtemplate-kendo-ui-grid-without-building-a-string)，但似乎这是不可能的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:34:53.050

这是将行模板应用于网格的代码，但要确保 FirstName 等字段有效。所以只需在此处删除字符串并编写简单的 HTML。

```
<script type="text/x-kendo-template" id="rowtemplate">
<tr>
    <td>
       #= FirstName#
    </td>
    <td>
       #= LastName#
    </td>
    <td>
        #= Age#
    </td>
    <td>
        #= Course#
    </td>
    <td>
        #= School.Name#
    </td>
 </tr> 
 </script> 
```

# sql - SQL Server 2008：计算存储在类别中的记录数

> ID：15854324
> 
> 赞同：-2
> 
> 时间：2013-04-06T18:09:12.207
> 
> 标签：sql, sql-server-2008

我是 SQL Server 的新手，遇到了一个令我困惑的问题。

我有 2 个数据表`Category`和`Product`. 下面是详细的表格。

**类别**：

```
------------------------------------------------------
 categoryId | categoryName      | desc
------------------------------------------------------
 1          | Shirt             | Men's Shirt
 2          | Jeans             | Men's Pants
 3          | Accessories       | Women's Accessories
------------------------------------------------------ 
```

**产品**

```
---------------------------------------------------------------
productID   | desc                     | categoryId
---------------------------------------------------------------
 1          | Slim-fit Classic Shirt   | 1
 2          | Denim Slim-fit jeans     | 2
 3          | Denim Regular-fit jeans  | 2
 4          | Bracelet                 | 3
--------------------------------------------------------------- 
```

我怎样才能得到如下的确切输出？

```
-------------------------------------------------------------------
 categoryId | categoryName      | numOfRecord | desc
-------------------------------------------------------------------
 1          | Shirt             | 1           | Men's Shirt
 2          | Jeans             | 2           | Men's Pants
 3          | Accessories       | 1           | Women's Accessories
------------------------------------------------------------------- 
```

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:13:53.570

您可以使用[COUNT](http://msdn.microsoft.com/en-us/library/ms175997.aspx)和[GROUP BY](http://msdn.microsoft.com/en-us/library/ms177673.aspx)。

尝试这个：

```
SELECT c.categoryId, c.categoryName, count(*) as numOfRecord, p.[desc]
FROM dbo.Category AS c INNER JOIN dbo.Product AS p
ON c.categoryId = p.categoryId
GROUP BY c.categoryId, c.categoryName, p.[desc]; 
```

# android - 使用对话框中的共享首选项保存数据

> ID：15854325
> 
> 赞同：0
> 
> 时间：2013-04-06T18:09:13.207
> 
> 标签：android, sharedpreferences, dialog

我正在尝试使用对话框中的共享首选项保存数据，然后在列表视图中显示该数据。我能够在列表视图中显示数据，但无法使用共享首选项保存数据

这是代码

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
    ListView tempListView;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.templates);

    final Dialog dialog=new Dialog(Template.this);
    dialog.setContentView(R.layout.temp_dialog);
    dialog.setTitle("New Template");

    Button btn_ok=(Button)dialog.findViewById(R.id.bt_temp_diolg_ok);

    btn_ok.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        String edit1=(String) ((EditText)dialog.findViewById(R.id.et_diolg_temp)).getText().toString();
        template.add(edit1);

        SharedPreferences spf = getSharedPreferences("temp", MODE_MULTI_PROCESS);
        SharedPreferences.Editor spfe = spf.edit();
        Map alldata=spf.getAll();
        spfe.putString("Template", edit1);
        spfe.commit();
        dialog.dismiss();
        temp.notifyDataSetChanged();

        tempListView=(ListView)findViewById(R.id.listView_templates);
        temp = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,template);
        tempListView.setAdapter(temp);

        Button btn=(Button)findViewById(R.id.btn_newtemp);
        btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialog.show();
        }
    } 
```

这是对话框的代码：

```
 final Dialog dialog=new Dialog(Template.this);
    dialog.setContentView(R.layout.temp_dialog);
    dialog.setTitle("New Template");

    Button btn_ok=(Button)dialog.findViewById(R.id.bt_temp_diolg_ok);

    btn_ok.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String edit1=(String) ((EditText)dialog.findViewById(R.id.et_diolg_temp)).getText().toString();
            template.add(edit1);

            SharedPreferences spf = getSharedPreferences("temp", MODE_MULTI_PROCESS);
            SharedPreferences.Editor spfe = spf.edit();
            Map alldata=spf.getAll();
            spfe.putString("template",edit1);
            spfe.commit();
            dialog.dismiss();
            spf.getString("template", edit1);
            temp.notifyDataSetChanged();    

        }
    });

            tempListView=(ListView)findViewById(R.id.listView_templates);
            temp = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,template);
            tempListView.setAdapter(temp);

            Button btn=(Button)findViewById(R.id.btn_newtemp);
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    dialog.show();
                }
          });
    }
} 
```

# linux - 人类可读格式的文件大小

> ID：15854332
> 
> 赞同：68
> 
> 时间：2013-04-06T18:10:27.510
> 
> 标签：linux, bash

给定文件的大小（以字节为单位），我想用**[IEC（二进制）前缀](https://en.wikipedia.org/wiki/Binary_prefix)**将其格式化为**3 个[有效数字](http://en.wikipedia.org/wiki/Significant_figures)，尾随零**，例如 1883954 变为 1.80M。

bash 不支持浮点运算，所以我改用 awk。问题是我不知道如何保留尾随零。当前解决方案：

```
if [ $size -ge 1048576 ]
then
    size=$(awk 'BEGIN {printf "%.3g",'$size'/1048576}')M
elif [ $size -ge 1024 ]
then
    size=$(awk 'BEGIN {printf "%.3g",'$size'/1024}')K
fi 
```

（文件不是那么大，所以我不必考虑更大的单位。）

编辑：这还有另一个问题。请参阅下面的 Adrian Frühwirth 的评论。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-06T18:36:26.590

你有什么理由不使用

```
ls -lh 
```

命令 ？如果您使用的是最近几年发布的 Linux 系统，则您拥有此功能。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-12-12T01:27:18.393

[GNU Coreutils](https://www.gnu.org/software/coreutils/)包含一个显然不为人知的小工具[`numfmt`](http://www.gnu.org/software/coreutils/manual/html_node/numfmt-invocation.html#numfmt-invocation)，用于进行数字转换，它可以满足您的需求：

```
$ numfmt --to=iec-i --suffix=B --format="%.3f" 4953205820
4.614GiB 
```

我认为这很适合您的需求，并且不像其他答案那么大或笨拙。

如果您想要更强大的解决方案，请查看我的其他答案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-22T21:00:54.960

```
ls -lah /path/to/your/file | awk -F " " {'print $5'} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-20T04:00:23.487

而不是使用`ls`and`awk`来获取文件大小，使用`stat -c %s filename.ext`. 它只输出数字，没有其他内容（至少在版本 8.21 上）。我不能使用`numfmt`，因为它是旧版本，似乎没有使用具有小数精度的 printf 语法。我改为使用下面的脚本。我使用最后一行来测试是否正在获取脚本。如果不是，我可以直接在命令行调用它。

```
#!/bin/bash

function getFriendlyFileSize() {
    OUT='/dev/null'
    [ "$#" == 0 ] && echo 'No number given' && return 1
    [ ! $(echo $1 | egrep -i '\-?[0-9]+') ] && echo 'Garbage data' && return 1

    if [ "$1" == '' -o "$1" -lt 0 ] 2>$OUT
    then
            echo '0 B'
            return 1
    else
            FSIZE=$1
    fi

    [ "$2" == '' ] && DECPTS=1 || DECPTS=$2

    KB=1024
    MB=1048576
    GB=1073741824
    TB=1099511627776
    PB=1125899906842624
    EB=1152921504606846976
    LM=9223372036854775807 # bash comparison limit = 2^63-1 (signed int?)

    [ "$FSIZE" -le 0 ] 2>$OUT && echo "0 B" && return
    [ "$FSIZE" -lt $KB ] 2>$OUT && echo "$FSIZE B" && return
    [ "$FSIZE" -lt $MB ] 2>$OUT && echo "$(echo "scale=$DECPTS;$FSIZE/$KB"|bc) KB" && return
    [ "$FSIZE" -lt $GB ] 2>$OUT && echo "$(echo "scale=$DECPTS;$FSIZE/$MB"|bc) MB" && return
    [ "$FSIZE" -lt $TB ] 2>$OUT && echo "$(echo "scale=$DECPTS;$FSIZE/$GB"|bc) GB" && return
    [ "$FSIZE" -lt $PB ] 2>$OUT && echo "$(echo "scale=$DECPTS;$FSIZE/$TB"|bc) TB" && return
    [ "$FSIZE" -lt $EB ] 2>$OUT && echo "$(echo "scale=$DECPTS;$FSIZE/$PB"|bc) PB" && return
    [ "$FSIZE" -le $LM ] 2>$OUT && echo "$(echo "scale=$DECPTS;$FSIZE/$EB"|bc) EB" && return
    [ "$?" -ne '0' ] 2>$OUT && echo "Bad input" && return 1
}

[[ $_ == $0 ]] && getFriendlyFileSize $1 $2 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-11T15:24:12.450

我知道这有点晚了。但可能有人会觉得它有用。

答案很简单，就是在你的脚本中使用`%.2f`而不是。`%.3g`([源](https://stackoverflow.com/questions/2395284/round-a-divided-number-in-bash))

* * *

测试：

```
#!/bin/bash

size=1883954

if [ $size -ge 1048576 ]
then
    size=$(awk 'BEGIN {printf "%.2f",'$size'/1048576}')M
elif [ $size -ge 1024 ]
then
    size=$(awk 'BEGIN {printf "%.2f",'$size'/1024}')K
fi

echo $size 
```

输出：

```
1.80M 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-06T18:21:23.380

如果您不介意使用，`bc`那么以下内容将有助于进行浮点运算。`scale`可以根据您要打印的许多数字根据您的需要进行更改。

```
size=1883954

if [ $size -ge 1048576 ]
then
    size=$(echo "scale=2;$size/1048576"| bc)M
elif [ $size -ge 1024 ]
then
    size=$(echo "scale=2;$size/1024" | bc)K
fi

echo $size 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-12T00:28:51.603

如果你碰巧有[Qalculate！](http://qalculate.sourceforge.net/)安装（顺便说一句很棒），有一个简单的技巧：

```
human_readable="$( qalc -t set "precision $precision" "${in_bytes}B" )" 
```

例子：

```
$ qalc -t -set "precision 3" 5264334820B
5.26 GB 
```

它是 shell 脚本中非常非常强大的工具，因为它甚至可以简化公式、求解未知数等等。

```
$ qalc -t "e^(i*x)=-1"
x = 3.1415927 
```

如果您想要一个更简单、重量更轻的解决方案，请查看我的其他答案。

# python - (wx python) 在 boxsizer 中自动调整文本大小

> ID：15854334
> 
> 赞同：0
> 
> 时间：2013-04-06T18:10:30.470
> 
> 标签：python, text, wxpython, wxwidgets, boxsizer

我正在将 wxpython 用于应用程序，但是我无法使用 wx.statictext 自动调整文本大小（有没有办法在不使用它的情况下显示文本？）并且此文本位于 boxsizer 中，但是当我调整窗口大小时它没有'与我的按钮相反...

（我已经使用 size 或 wrap 搜索并尝试了一些东西......）

谢谢大家

编辑：这里有一些代码来说明，调整窗口大小，你会看到文本不会自行调整大小

```
import wx
import wx.grid as grid
import time

date=time.strftime('%d/%m/%Y ? %H:%M')

app = wx.App()
win = wx.Frame(None, title="Title", size=(410, 335))
bkg = wx.Panel(win)

loadButton = wx.Button(bkg, label='Open',size=(200,40))
saveButton = wx.Button(bkg, label='Save',size=(200,40))
QRbutton=wx.Button(bkg, label='qr',size=(200,40))

ddate=wx.StaticText(bkg,-1,date)

bkg.grid = grid.Grid(bkg)
bkg.grid.CreateGrid(20, 5)

chronobox = wx.BoxSizer(wx.HORIZONTAL)
chronobox.Add(saveButton, proportion=2, flag=wx.SHAPED|wx.ALIGN_CENTER, border=5)
chronobox.Add(loadButton, proportion=2, flag=wx.SHAPED|wx.ALIGN_CENTER, border=5)

hbox = wx.BoxSizer(wx.VERTICAL)
hbox.Add(ddate, proportion=5,flag=wx.ALIGN_CENTER)
hbox.Add(chronobox, proportion=2, flag=wx.EXPAND| wx.ALL, border=5)
hbox.Add(QRbutton, proportion=1, flag=wx.SHAPED|wx.ALIGN_CENTER, border=5)

globalbox = wx.BoxSizer(wx.HORIZONTAL)
globalbox.Add(hbox, proportion=5, flag=wx.EXPAND | wx.ALL, border=5)
globalbox.Add(bkg.grid, proportion=4,flag=wx.EXPAND | wx.LEFT | wx.BOTTOM | wx.RIGHT, border=5)

bkg.SetSizer(globalbox)
win.Show()

app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:31:12.193

SetLabel 函数的描述是设置静态文本标签并更新控件大小以完全适合标签，除非控件具有 wxST_NO_AUTORESIZE 标志。如果你想改变字体大小，你可以参考这篇[文章](http://www.blog.pythonlibrary.org/2011/04/28/wxpython-learning-to-use-fonts/)。

# android - 为自定义 RelativeLayout 对齐底部

> ID：15854337
> 
> 赞同：0
> 
> 时间：2013-04-06T18:10:46.087
> 
> 标签：android, android-layout, android-relativelayout, android-custom-view

可以说我有一个自定义的 RelativeLayout 覆盖 onMeasure ：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    setMeasuredDimension(200, 200);
} 
```

现在我想在这个布局中添加一个与这个自定义相对布局底部对齐的视图。但我尝试了不同的东西但没有任何结果：

```
paramsButton.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
addView (mButton, paramsButton); 
```

我的第一个猜测是将底部与父级对齐（应该是自定义的 RelativeLayout 吧？）。但显然，它与我的自定义布局的父级对齐（这是另一个 RelativeLayout，这次不是自定义的。

所以我试图与 id 对齐：

```
paramsButton.addRule(RelativeLayout.ALIGN_BOTTOM, getId());
addView (mButton, paramsButton); 
```

但它也不起作用（按钮消失） 注意：我明确设置了我的自定义 RelativeLayout 的 id，以检查 android 是否获得了正确的 id。

您知道如何进行这项工作吗？

**编辑：** 有趣的事情：它适用于以下规则

```
paramsButton.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
addView (mButton, paramsButton); 
```

所以我不得不说我真的不明白为什么

> 相对布局.ALIGN_PARENT_BOTTOM

规则不起作用...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T23:19:58.180

您的覆盖`onMeasure`方法有缺陷。在这种情况下，布局会测量其子级（并存储它们的大小），然后您只告诉布局（而不是子级）您实际上改变了主意并希望更改该大小。

相反，请尝试以下操作：

```
widthMeasureSpec = MeasureSpec.makeMeasureSpec(200, MeasureSpec.EXACTLY);
heightMeasureSpec = MeasureSpec.makeMeasureSpec(200, MeasureSpec.EXACTLY);
super.onMeasure(widthMeasureSpec, heightMeasureSpec); 
```

一般来说，将大小放入代码中并不是一个好主意。相反，请考虑使用具有固定大小 layout_width 和 layout_height 的样式，或者至少使用`<dimen>`资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:58:37.317

您是否尝试在按钮上方放置另一个 RelativeLayout/LinearLayout 或任何其他布局/小部件并将其 layout_weight 设置为 1？通过设置 layout_weight 它将使按钮上方的小部件仅占用此自定义 RelativeLayout 内的剩余空间。

# php - 如何使用 phpmysql 表单插入多个数据？

> ID：15854340
> 
> 赞同：0
> 
> 时间：2013-04-06T18:11:14.147
> 
> 标签：php, javascript, mysql

我有三个表 1\. 带有用户名和 home_team 的用户数据库 2\. 带有 point_scored 的用户点和带有 match_no 的用户名 3\. 带有 total_points、user_name、match_played_count、home_team_wins_count 的用户性能

我在数据库中有 2500 个用户。

首先，我通过表单和代码部分发布了 match_no 和获胜团队，我在下面的代码中使用了它，它可以工作，但在更新 400-500 条记录后查询停止工作。我找不到解决方案？我检查了它的流量，但它是正确的。我的邮政编码是这样的：

```
<?php
    require("../includes/commonClass.php");

    $classObj = new commonclass;

    $postedData = $classObj->getRequestedData();

    $setsession = $classObj->validsessionmanager();

    if(isset($_POST['submitht']))
    {
        $mid = $postedData['match'];
        $winteam = $postedData['team1'];            

           $classObj->getUserTable();
           $condht="home_team='".$winteam."'";
           $resultht = $classObj->selectSql($condht);                   
           $rowht = $classObj->fetchData($resultht);
           foreach($rowht as $rowsht)
           {
               $username=$rowsht['user_name'];

               $playupuser2['home_team_win']=1;
               $playupuser2['total_points']=10;
               $playupuser2['match_played']=1;
               $classObj->getUSerPerformanceTable();
               $classObj->userPostedData = $playupuser2;        
               $cond1 = "user_name='".$username."'";
               $insert_query = $classObj->updateData1($cond1);

                $playupuser3['point_scored']=10;
                $playupuser3['ht_status']=1;
                $classObj->getUserPointTable();
                $classObj->userPostedData = $playupuser3;       
                $cond2 = "user_name='".$username."' AND match_no='".$mid."'";
                $insert_query = $classObj->updateData1($cond2);
           }         

                if($insert_query == "success")
                {
                    echo "<script> alert ('Home team Upadated Sucessfully'); </script>";                            
                    echo "<script>window.location='hometeamUpdate.php'</script>";       
                }
   }       
   else   
   {
       echo "<script> alert ('Error Occured ')</script>";
   }
?> 
```

它适用于 100-200 条记录，并在更新后显示适当的警报。我将 xampp 用于 php/MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:34:12.130

可能是执行时间结束了。您将编辑此行

```
$cfg['ExecTimeLimit'] = 600; 
```

在 xampp\phpMyAdmin\libraries\config.default.php 中设置更高的值。也看看这个[链接](https://stackoverflow.com/questions/1263680/maximum-execution-time-in-phpmyadmin)

# java - 打开登录但无法继续

> ID：15854342
> 
> 赞同：0
> 
> 时间：2013-04-06T18:11:16.213
> 
> 标签：java

```
public static void main(String[] args){
        try {
            GUI login = new GUI();
            login.setVisible(true);
            login.setResizable(false);
            if(GUI.loggedIn = true){
                Loader loader = new Loader();
                loader.setVisible(true);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

当 GUI（登录）完成后，它不会打开加载程序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:12:35.297

`if(GUI.loggedIn = true)`应该`if(GUI.loggedIn)`

基本上，您应该使用`==`比较而不是`=`分配运算符，但是在比较布尔值时，您不必编写`== true`，因为它是多余的。

这是一个很好的机会来了解为什么`if(something)`最好使用 using （我认为这是必须的），如果你想看看它是否是*真的*而不是 write `if(something == true)`。

# java - 如何使用之前在 mySQL 和 Android PHP 中选择的列表名称下拉表的所有行

> ID：15854344
> 
> 赞同：1
> 
> 时间：2013-04-06T18:11:46.173
> 
> 标签：java, php, android, mysql, json

我有一个适用于 android 的购物清单应用程序，我正在使用 PHP 进行设计，并且我在 mySQL 上有一个数据库。在那个数据库中，我有一个名为 Products 的表。在产品中只有两列，列表和产品。每个列表将有许多产品。我希望能够使用应用程序用户选择的任何列表中的所有产品填充页面。

我正在使用带有 JSON 的 PHP 从 mySQL 读取信息。这与我想要的类似，但这将读取数据库中的所有列表和产品。我只想要用户在屏幕上选择的列表。

```
<?php

/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
$result = mysql_query("SELECT *FROM products") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["products"] = array();

    while ($row = mysql_fetch_array($result)) {
        // temp user array
        $product = array();
        $product["list"] = $row["list"];
        $product["name"] = $row["name"];

        // push single product into final response array
        array_push($response["products"], $product);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No products found";

    // echo no users JSON
    echo json_encode($response);
}
?> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:18:33.400

由于 android 应用程序需要通过 HTTP 请求来获取数据，因此将 GET 变量与用户在应用程序中选择的表的值一起传递。然后读取 PHP 中的值`$_GET["table"]`。

# freebase - Freebase MQL 查询 - 不返回结果

> ID：15854345
> 
> 赞同：3
> 
> 时间：2013-04-06T18:11:46.953
> 
> 标签：freebase, mql

我正在尝试几个非常简单的查询来从 Freebase 检索政党的成员，特别是英国工党。我无法让他们返回任何结果，并且欢迎任何关于为什么会这样的想法：

*查询一：*

```
[{
    "id": "/m/01c9x",
    "name": null,
    "/government/political_party/politicians_in_this_party": []
}] 
```

*查询 2：*

```
[{
  "type": "/government/politician",
  "mid": null,
  "name": null,
  "/government/politician/party": {
      "mid": "/m/01c9x"
  }
}] 
```

我正在尝试在以下站点运行它们：[http ://www.freebase.com/query](http://www.freebase.com/query)

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:08:47.720

与聚会的联系是通过日期调解的，因此您需要再往前走一跳：

```
[{
  "type": "/government/politician",
  "mid": null,
  "name": null,
  "party": [{
    "party": {
      "id": "/m/01c9x"
    }
  }]
}] 
```

如果您想在特定日期通过成员身份进行约束，您可以使用调解器节点上的`from`和属性。`to`

# java - 带有来自 url 文件夹的图像的 android 画廊

> ID：15854351
> 
> 赞同：0
> 
> 时间：2013-04-06T18:12:15.220
> 
> 标签：java, android, android-gallery

我是 Android 编程的初学者，我需要帮助。我如何创建一个在网格视图中显示图像的应用程序，但每当应用程序启动时，它都会刷新并从在线文件夹加载新图像？

我在互联网上找不到任何帮助。例如，每个人都在从特定 url 加载图像方面提供帮助`.../image.jpg`，但我希望从加载图像`.../images/...`，并在用户单击时以特定大小显示，它会加载特定 url 或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:18:24.360

您的问题有点不具体，但这里有一些资源可以帮助您：

网格视图：

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html) [http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

在Android中加载图片（看看2.本地存储图片的例子）：

[http://www.whitebyte.info/android/download-and-display-image-in-android](http://www.whitebyte.info/android/download-and-display-image-in-android)

# iphone - 为 cocos2d 导出 spritesheet

> ID：15854356
> 
> 赞同：0
> 
> 时间：2013-04-06T18:12:55.387
> 
> 标签：iphone, ios, cocos2d-iphone, sprite-sheet

我想知道人们通常如何保存动画以便在 Cocos2d 中使用尽可能少的硬代码轻松加载它们。

EG 我想到的解决方案是有一个 plist 文件，其中包含有关每一帧的信息，第二个 plist 文件包含有关每个动画的信息（动画名称、要播放的帧以及可能的延迟）。

如果这是正确的解决方案，我怎样才能为 spritesheet 自动生成这样的 plist 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:55:51.733

您可以使用纹理打包工具来创建精灵图集和相应的 plist。`Zwoptex`对我来说效果很好。一旦你有了你的 png 和 plist，你可以加载它们 `SpriteFrameCache`

`[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"gameSprites.plist"];`

此外，您可以为动画帧使用命名约定，例如使用 '_index': `animFrame_1`、`animFrame_2`等后缀...

然后，您可以拥有一个带有帮助程序的 CCAnimation 类别，以在给定动画名称和帧数的情况下加载动画。您可以以下一个代码为例。-

```
+ (CCAnimation *) animationWithFrame:(NSString *) frame frameCount:(int) frameCount startIndex:(int) startIndex delay:(float) delay separator:(NSString *) separator {
    // load the ship's animation frames as textures and create a sprite frame
    NSMutableArray* frames = [NSMutableArray arrayWithCapacity:frameCount];
    CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];

    int end = frameCount + startIndex;
    for (int i = startIndex; i < end; i++)
    {
        NSString* file = [NSString stringWithFormat:@"%@%@%i.png", frame, separator, i];
        CCSpriteFrame* frame = [frameCache spriteFrameByName:file];
        [frames addObject:frame];
    }
    // Return an animation object from all the sprite animation frames
    return [CCAnimation animationWithFrames:frames delay:delay];
} 
```

希望能帮助到你。

# plsql - 使用立即执行插入一行

> ID：15854357
> 
> 赞同：1
> 
> 时间：2013-04-06T18:13:00.260
> 
> 标签：plsql, oracle11g

由于引号，下面的 pl/sql 显示错误。你能帮忙吗？你能给我提示如何编写这种类型的查询吗？

```
DECLARE 
v_RULE_NAME VARCHAR2(200):='ABC';
v_user_id NUMBER:=2;
begin
execute immediate 'INSERT INTO BW_TXS 
                 VALUES ('||TXN_ID.NEXTVAL||','||v_user_id||','
                         ||SYSDATE||',''super '''||v_RULE_NAME
                         ||',''super '''||v_RULE_NAME||')';

end; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:19:19.083

它应该是这样的：

```
DECLARE 
v_RULE_NAME VARCHAR2(200):='ABC';
v_user_id NUMBER:=2;
begin
execute immediate 'INSERT INTO BW_TXS 
                 VALUES (TXN_ID.NEXTVAL,'||v_user_id||',SYSDATE,''super '||v_RULE_NAME
                         ||''',''super '||v_RULE_NAME||''')';

end;
/ 
```

但是请在使用动态 SQL 时使用绑定变量（尽管在这个简单的情况下，动态 SQL 完全是多余的）。IE

```
DECLARE 
v_RULE_NAME VARCHAR2(200):='ABC';
v_user_id NUMBER:=2;
begin
execute immediate 'INSERT INTO BW_TXS 
                 VALUES (TXN_ID.NEXTVAL,:userid,SYSDATE,:rule, :rule)'
 using v_user_id, 'super ' || v_rule_name, 'super ' || v_rule_name;

end;
/ 
```

（不知道为什么你在两列中有相同的字符串）。在这种简单的情况下没有动态 SQL 是可能的：

```
DECLARE 
v_RULE_NAME VARCHAR2(200):='ABC';
v_user_id NUMBER:=2;
begin
  INSERT INTO BW_TXS 
  VALUES (TXN_ID.NEXTVAL,v_user_id,SYSDATE, 'super ' || v_rule_name, 
          'super ' || v_rule_name);

end;
/ 
```

此外，您应该始终在插入中定义列名，就像`insert into bw_txt (a, b, c, d..) values (...)`稍后有人添加具有默认值的列一样，您的代码将中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:19:01.157

无需立即执行。这就是 PL/SQL 的好处之一，插入、更新和删除等持久化操作非常简单。

```
DECLARE 
v_RULE_NAME VARCHAR2(200):='ABC';
v_user_id NUMBER:=2; 

begin 

insert into BW_TXS VALUES(TXN_ID.NEXTVAL, v_user_id, SYSDATE, 'super', 'super', v_RULE_NAME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T11:57:41.203

我不知道为什么，但我发现我必须包裹在一个块中，否则我只会收到 bizaare 错误消息：

```
execute immediate '
  begin 
          insert into something.SomethingElse (...)
          values (SYSDATE,''1.58.0.0'',''f1a87dfbe1ba'',1,null);
  end;'; 
```

我收到的错误消息是：

```
Error report:
ORA-00933: SQL command not properly ended
ORA-06512: at line 14
00933\. 00000 -  "SQL command not properly ended" 
```

# vb.net - 如何为从剪贴板保存的图像生成文件名？视觉基础

> ID：15854359
> 
> 赞同：0
> 
> 时间：2013-04-06T18:13:14.907
> 
> 标签：vb.net, filenames, clipboard

我刚开始学习VB，我想创建一个程序来保存我的剪贴板（ProntScreen）。我已经成功了，但是我想为这些图像生成文件名，所以我可以将它们中的很多放到同一个文件夹中，而无需更改源代码。

这是我的代码：

```
 Public Class Form1
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If Not System.Windows.Forms.Clipboard.GetDataObject() Is Nothing Then
        Dim oDataObj As IDataObject = System.Windows.Forms.Clipboard.GetDataObject()
        If oDataObj.GetDataPresent(System.Windows.Forms.DataFormats.Bitmap) Then
            Dim oImgObj As System.Drawing.Image = oDataObj.GetData(DataFormats.Bitmap, True)
            'To Save as Bitmap
            'oImgObj.Save("c:\Test.bmp", System.Drawing.Imaging.ImageFormat.Bmp)
            'To Save as Jpeg
            oImgObj.Save("d:\Test\test.jpeg", System.Drawing.Imaging.ImageFormat.Jpeg)
            'To Save as Gif
            'oImgObj.Save("c:\Test.gif", System.Drawing.Imaging.ImageFormat.Gif)
        End If
    End If
End Sub
End Class 
```

如您所见，图像已保存到`D:\Test\Test.jpeg` 我要生成文件名（test.jpeg）的修复位置。也许当前时间会像 114512 或类似的东西很酷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:36:22.570

我不是 VB 人，我在 C# 上工作，但让我试一试。声明一个`System.DateTime`变量并在其中存储当前日期时间。然后声明另一个`String`变量，我们称之为**imagePath**。在字符串变量中，通过**加入文件夹 path(d:\Test\", timestand, image extension(.jpeg)**来构造路径。最后在 .Save 方法中使用这个 imagePath 变量来传递路径和名称。下面是代码这个，正如我所说，**这是我第一次尝试VB代码。代码中可能有错误但逻辑保持不变，如果有任何错误，请更改代码。**

```
Dim timeStamp As System.DateTime
timeStamp = Now;

Dim imagePath as String
imagePath = "d:\Test\" + timeStamp + ".jpeg";

oImgObj.Save(imagePath, System.Drawing.Imaging.ImageFormat.Jpeg) 
```

# java - 在 Java 中使用 Class<...>

> ID：15854361
> 
> 赞同：2
> 
> 时间：2013-04-06T18:13:29.710
> 
> 标签：java

我遇到了许多 java 程序，我发现了一种新的编程风格：

`Class_name<...>`

谁能解释一下这是什么。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T18:15:36.640

Java中的泛型。看看这个[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:15:43.257

Angular backets 用于指定泛型。

查看这篇文章：[为什么 Java 的 Class<T> 是通用的？](https://stackoverflow.com/questions/1094023/why-is-javas-classt-generic)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T18:20:25.117

[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)会有所帮助。泛型类型简而言之，对象类型的参数实际上将使用指定的类或接口。所以你可以有一个只有字符串的数组列表。为什么 - 键入安全性（难以发现的错误更少）并且更易于键入。

# php - Doctrine2 Querybuilder 按位和

> ID：15854363
> 
> 赞同：6
> 
> 时间：2013-04-06T18:13:35.427
> 
> 标签：php, symfony, orm, doctrine-orm

我想在我的 Doctrine2/Symfony2 QueryBuilder 中使用按位比较。我试过

```
->andWhere('n.sharingenabled & 1') 
```

和

```
->andWhere('BIT_AND(n.sharingenabled, 1)') 
```

但他们都抛出了以下错误

> QueryException：[语法错误] 第 0 行，第 327 列：错误：预期 =、<、<=、<>、>、>=、!=、得到“&”

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-06T18:42:52.027

您需要将`BIT_AND`结果与某些东西进行比较......例如：

```
->andWhere('BIT_AND(n.sharingenabled, 1) > 0') 
```

# c# - 在 C# WinForms 中生成发票

> ID：15854369
> 
> 赞同：0
> 
> 时间：2013-04-06T18:14:01.907
> 
> 标签：c#, winforms, invoice, invoices

我有这个应用程序（它是用罗马尼亚语写的）：

![在此处输入图像描述](https://i.stack.imgur.com/JDC9G.png)

我已经为它做了简单的事情，但我的问题是我不知道生成发票的最佳方法是什么。有人可以给我一个很好的资源，并在此基础上进行解释吗？

这是用 Word 手工制作的发票。这也是我希望我的发票的样子：

![在此处输入图像描述](https://i.stack.imgur.com/vK8TQ.png)

顺便说一句：我知道我的问题有灵活的答案，但我需要一个起点和一些小东西。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:57:49.257

试试 Crystal Reports，因为它们被广泛用于生成报告和发票。关注这些链接，也许它们会对您有所帮助：

*   [http://www.codeproject.com/Articles/15859/Basics-of-Crystal-Report-for-NET-Programmers](http://www.codeproject.com/Articles/15859/Basics-of-Crystal-Report-for-NET-Programmers)
*   [http://infynet.wordpress.com/2010/10/06/crystal-report-in-c/](http://infynet.wordpress.com/2010/10/06/crystal-report-in-c/)

或者你可以谷歌它以获得更多教程，太多了。

# hadoop - 将小文件合并成Hadoop分布式缓存的大文件？

> ID：15854374
> 
> 赞同：2
> 
> 时间：2013-04-06T18:14:53.850
> 
> 标签：hadoop, hdfs

我有很多需要分发的小文件（大小约为 1MB）。众所周知，Hadoop 和 HDFS 更喜欢大文件。但是我不知道这是否也可以应用于分布式缓存，因为分布式文件存储在本地机器上。

如果需要合并它们，在 HDFS 上以编程方式合并文件的最佳方法是什么？

还有一个问题：使用 symlink 有什么好处？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:32:54.100

您可以创建所有小文件的存档（tar 或 zip）并将其添加到分布式缓存中，如下所示：

```
DistributedCache.addCacheArchive(new URI("/myapp/myzip.zip", job); 
```

并在您的映射器/减速器中获取文件，如下所示：

```
public void configure(JobConf job) {
         // Get the cached archives/files
         File f = new File("./myzip.zip/some/file/in/zip.txt");
       } 
```

[在这里](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/filecache/DistributedCache.html)阅读更多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:51:30.850

这是 Cloudera 关于小文件问题的[博客](http://blog.cloudera.com/blog/2009/02/the-small-files-problem/)。

# shell - 如何打开 hdfs://localhost:54310/user/hduser/

> ID：15854375
> 
> 赞同：0
> 
> 时间：2013-04-06T18:15:09.837
> 
> 标签：shell, hadoop, directory, mapreduce, hdfs

我尝试使用命令 **hadoop fs -mkdir count**在 hadoop 中创建一个目录， 那么如何 在单节点集群上打开或查看**hdfs://localhost:54310/user/hduser/count ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:49:33.107

为了查看文件夹及其内容，您可以执行以下操作：

```
hadoop fs -ls count 
```

如果您想将内容获取到本地文件系统，那么您可以使用`get`

```
hadoop fs -get count <output-path-in-your-local-filesystem> 
```

有关所有命令行选项的更详细说明，请阅读[此处](http://hadoop.apache.org/docs/r0.18.1/hdfs_shell.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:17:03.710

```
hadoop fs -lsr count 
```

或者

```
hadoop fs -ls /user/hduser/count 
```

# c++ - c++ 通过函数传递数组

> ID：15854380
> 
> 赞同：0
> 
> 时间：2013-04-06T18:16:12.703
> 
> 标签：c++, arrays, function

我不明白为什么这不会运行。我应该存储`hours * payrate`在工资数组中，然后`showResults`获取此信息`cout`。我运行它时得到的错误是

```
error LNK2019: unresolved external symbol "void __cdecl showResults(int * const,int,double * const,double * const,double * const)" (?showResults@@YAXQAHHQAN11@Z) referenced in function
error LNK2019: unresolved external symbol "void __cdecl getEmployeeData(int * const,int,double * const,double * const,double * const)" (?getEmployeeData@@YAXQAHHQAN11@Z) referenced in function `_main` 
```

下面的代码：

```
#include <iomanip>
#include <iostream>
using namespace std;

void getEmployeeData(int[], int, double[], double[], double[]);
void showResults(int[], int, double[], double[], double[]);

int main()
{
const int ARRAY_SIZE = 7;
int empId[ARRAY_SIZE] = {565, 845, 452, 130, 789, 758, 877};

double hoursWorked[ARRAY_SIZE]; // Holds hours worked
double payrate[ARRAY_SIZE]; // Holds pay rate
double wages[ARRAY_SIZE]; // Holds wages

getEmployeeData(empId, ARRAY_SIZE, payrate, hoursWorked, wages);

showResults(empId, ARRAY_SIZE, payrate, hoursWorked, wages);

system("pause");
    return 0;
}

void getEmployeedata(int nums[],int size,double pay[],double hours[],
double wages[])
{

//Hours worked and Pay rate
for(int index = 0; index < size; index++)
{
    cout << "Enter number of hours worked by employee number "
         << nums[index] << ": ";
    cin >> hours[index]; 
    cout << "\nEnter hourly pay rate ";
    cin >> pay[index];
    wages[index] = hours[index] * pay[index]; 
}
}

void showResults(int nums[], int size, double pay, double hours, double wages[])
{
for(int index = 0; index < size; index++)
{
    cout << "Employee Number Gross Wage " << endl
         << nums[index] << " " << wages[index];

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:17:42.333

声明和定义`showResults`不同意参数类型。特别是，`pay`and`hours`参数`double[]`在声明中，但仅`double`在定义中。

```
void showResults(int[], int, double[], double[], double[]) // Declaration
//                                 ↕↕        ↕↕
void showResults(int[], int, double  , double  , double[]) // Definition 
```

看来声明是正确的，而定义是错误的，因为您将数组传递给它们。

您的声明和定义`getEmployeeData`不同意该名称。

```
void getEmployeeData(int[], int, double[], double[], double[]) // Declaration
/               ↕
void getEmployeedata(int[], int, double[], double[], double[]) // Definition 
```

您可能希望`getEmployeeData`与您的其余命名保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:19:47.583

您的函数名称有错字：

```
getEmployeeData(empId, ARRAY_SIZE, payrate, hoursWorked, wages); 
```

但是，在定义中，您有：

```
getEmployeedata(...); 
```

这里也不匹配：

```
 void showResults(int nums[], int size, double pay, double hours, double wages[])
                                            //^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T18:29:36.553

如果要将数组传递给函数，也可以尝试将函数编写为

```
void getEmployeeData(int*, int, double*, double*, double*);
void showResults(int*, int, double*, double*, double*); 
```

因为当您传递数组时，您将指针传递给该数组的第 0 个索引。另外，如前所述，您的代码中有错字，请替换`getEmployeedata`为`getEmployeeData`

这是更正后的代码：

```
#include <iomanip>
#include <iostream>
using namespace std;

void getEmployeeData(int*, int, double*, double*, double*);
void showResults(int*, int, double*, double*, double*);

int main()
{
const int ARRAY_SIZE = 7;
int empId[7] = {565, 845, 452, 130, 789, 758, 877};

double hoursWorked[ARRAY_SIZE]; // Holds hours worked
double payrate[ARRAY_SIZE]; // Holds pay rate
double wages[ARRAY_SIZE]; // Holds wages

getEmployeeData(empId, ARRAY_SIZE, payrate, hoursWorked, wages);

showResults(empId, ARRAY_SIZE, payrate, hoursWorked, wages);

system("pause");
    return 0;
}

void getEmployeeData(int nums[],int size,double pay[],double hours[],double wages[])
{

//Hours worked and Pay rate
for(int index = 0; index < size; index++)
{
    cout << "Enter number of hours worked by employee number "
         << nums[index] << ": ";
    cin >> hours[index];
    cout << "\nEnter hourly pay rate ";
    cin >> pay[index];
    wages[index] = hours[index] * pay[index];
}
}

void showResults(int *nums, int size, double *pay, double *hours, double *wages)
{
for(int index = 0; index < size; index++)
{
    cout << "Employee Number Gross Wage " << endl
         << nums[index] << " " << wages[index];

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-31T18:44:37.283

由于您确切知道每个数组有多少元素，您可以尝试制作`ARRAY_SIZE`一个全局常量（因此它与您的函数原型在同一范围内），允许您执行以下操作：

```
void getEmployeeData(int (&)[ARRAY_SIZE], int, double (&)[ARRAY_SIZE], double (&)[ARRAY_SIZE], double (&)[ARRAY_SIZE]);
void showResults(int (&)[ARRAY_SIZE], int, double (&)[ARRAY_SIZE], double (&)[ARRAY_SIZE], double (&)[ARRAY_SIZE]);

void getEmployeeData(int (&nums)[ARRAY_SIZE], int size, double (&pay)[ARRAY_SIZE], double (&hours)[ARRAY_SIZE], double (&wages)[ARRAY_SIZE]) {
// Function body
}
void showResults(int (&nums)[ARRAY_SIZE], int size, double (&pay)[ARRAY_SIZE], double (&hours)[ARRAY_SIZE], double (&wages)[ARRAY_SIZE]) {
// Function body
} 
```

现在，这看起来很尴尬，但它的作用是告诉编译器该函数引用具有**精确** `ARRAY_SIZE`元素的数组。（具体来说，`[]`优先级高于`&`，因此您需要括号告诉编译器该参数是对数组的引用而不是引用数组。）它还允许您使用 ol' C`sizeof(nums)/sizeof(nums[0])`来确定数组的大小; 不像让数组衰减为指针（在这种情况下`sizeof`会给你无用的信息，因为它被`nums`视为 an`int*`而不是 an `int[ARRAY_SIZE]`），通过引用传递它会保留此信息。

* * *

或者，如果您可以自由地重写代码并且您的编译器支持 C++11，则可以使用`std::array`C 样式数组来代替。

```
#include <array>
using namespace std;

void getEmployeeData(array<int, ARRAY_SIZE>, int, array<double, ARRAY_SIZE>, array<double, ARRAY_SIZE>, array<double, ARRAY_SIZE>);
void showResults(array<int, ARRAY_SIZE>, int, array<double, ARRAY_SIZE>, array<double, ARRAY_SIZE>, array<double, ARRAY_SIZE>);

array<int, ARRAY_SIZE> empId = {565, 845, 452, 130, 789, 758, 877};

array<double, ARRAY_SIZE> hoursWorked; // Holds hours worked
array<double, ARRAY_SIZE> payrate; // Holds pay rate
array<double, ARRAY_SIZE> wages; // Holds wages 
```

作为一个容器，`std::array`可以使用与 C 样式数组（即`operator[]`）相同的语法，因此您不需要重写任何实际使用数组的代码。它还允许`getEmployeeData()`直接`showResults()`检查数组的大小，例如`nums.size()`.

另请注意，如果您使用其中任何一个，则实际上不需要 pass `int size`，因为您可以使用`sizeof`or `std::array.size()`。不过，这确实有一点点污染全局命名空间的缺点，但我个人认为这是一个公平的权衡，以保证您的代码只有在函数被提供适当大小的数组时才能编译。

[请注意，如果您需要能够在不同时间传递不同大小的数组，这些方法都不会对您有用。]

对于我可能遗漏的任何错别字，我深表歉意。

# git - 如何从所有 git 提交中删除文件夹但将其保留在工作目录中

> ID：15854381
> 
> 赞同：0
> 
> 时间：2013-04-06T18:16:25.553
> 
> 标签：git

我经常忘记添加`node_modules`或添加`components`到`.gitignore`，它们最终在我的 git 提交中并推送到 github（上传需要很长时间）。无论如何要从每次提交中删除这些文件夹的所有实例并将它们保存在工作目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:14:14.170

**从当前版本中删除的简单方法：**

采用`git -rm -r --cached`

--cached 选项会将文件或目录保留在本地工作目录中，并将其从 git 中删除。

来自`git help rm`：

```
--cached
     Use this option to unstage and remove paths only from the index. 
     Working tree files, whether modified or not, will be left alone. 
```

见[https://www.kernel.org/pub/software/scm/git/docs/git-rm.html](https://www.kernel.org/pub/software/scm/git/docs/git-rm.html)

**从所有修订中删除：**

如果您确实需要从所有修订版中删除您的文件/目录，请查看此线程和专用于此的 git 帮助页面。

[从 Git 历史记录中删除敏感文件及其提交](https://stackoverflow.com/questions/872565/remove-sensitive-files-and-their-commits-from-git-history)

[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T22:07:50.463

[`git filter-branch --index-filter 'git rm --cached --ignore-unmatch filename' -- --all`](https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html#_examples)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:03:41.630

`git -rm -r --cached`像 jszobody 建议的那样使用，或者使用`git reset HEAD`更少的输入和建议的方式`git status`从提交中删除文件（在实际调用之前`git commit`）。这称为取消分期。

但是，之后`git commit`没有简单的方法可以删除这些文件夹。如果最后一次提交引入了您不想保留的更改，请将您的本地副本修改为您想要的状态，运行`git add .`并执行`git commit --amend`. 如果在更后面的提交或多次提交中引入了不需要的更改，则必须通过`git rebase -i`. 我建议您阅读有关它的手册页或查找一些教程。

如果您已经将更改推送到 github，则必须`git push -f`在 rebase 或修改后运行。如果您在团队中工作，那么基于尚未推送的提交重新构建是一个坏主意，因为它会给您的提交提供与团队其他成员不同的哈希值。

# css - 不满意的外观

> ID：15854388
> 
> 赞同：0
> 
> 时间：2013-04-06T18:17:22.340
> 
> 标签：css, html, user-interface, positioning

我正在尝试使界面看起来像这样：![我的形象](https://i.stack.imgur.com/mLTj1.jpg)

但相反，它看起来像这样：
![它看起来如何](https://i.stack.imgur.com/PqkRK.jpg)

我的代码如下，我真的不知道应该如何更改它以使事情看起来正确。

```
 <style type="text/css">
    #choose_div{
      width: 20%;
      height: auto;
      padding: 1px;
      left: 0px;
      /*border: 2px;*/
      float:left;
      box-sizing:border-box;
    }
    #frame_div{
      float:right;
      right:0px;
      height: auto;
      width: 80%;
      border: 2px 2px 2px 2px;
      position: relative;
      box-sizing:border-box;

    }
    #content{
      vertical-align: middle;
    }
    .li_div{
      padding-top: 3px;
      vertical-align: middle;
      height: 30%;
      width: auto;
    }
    .li_div img{

      resize:both;
      padding-right: 10px; 
      /*width: 50px;
      height: 50px;
      max-width: 40px;
      max-height: 40px;
      left: li_div.width/2;*/ 
    }
    .li_choose{
      height: 20%;
      width: 100%;
    }
</style>

 <div id="content">
    <div id="choose_div">
      <ul>
        <li class="li_choose">
          <div class="li_div">
            <p>Save</p>
              <img src="arrow.jpg" id="arrow_save" style="width:10%;height:10%">
             <hr>
          </div>
        </li>

        <li class="li_choose">
          <div class="li_div">
            <p>Recover</p>
            <img src="arrow.jpg" id="arrow_recover" style="width:10%;height:10%;">
            </div>
        </li>
      </ul>
  </div>
  <div id="frame_div">
    <iframe id="frame_opened">
  </div>
</div> 
```

如果有人可以帮助我提出任何想法，我将不胜感激。提前致谢。
注意：显示错误的“事物”当前是我的 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:26:03.460

你应该浮动：左；选择div而不是浮动：对iframe div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:56:46.503

```
 <style type="text/css">
  html,body{margin:0px;}
  p{      font-family:Tahoma; font-size:30px ;}
    #choose_div{
      width: 20%;
      height: auto;
      padding: 1px;
      left: 0px;
     float:left;
    }

    #content{
    list-style:none;
      vertical-align: middle;
    }
    .li_div{
      padding-top: 3px;
      vertical-align: middle;
      height: 30%;
      width: auto;
    }

ul li{
list-style:none;
}
    .li_div img{
      padding-right: 10px; 
      /*width: 50px;
      height: 50px;
      max-width: 40px;
      max-height: 40px;
    }
    .li_choose{
      height: 20%;
      width: 100%;
    }

    .hr{ display:none;margin-left:0px 
    color:black;
    background-color: #000;
    height: 5px;}

    #frame_div{
    float:left;
         height: 100%;
      width: 80%;
    }

</style>

 <div id="content">
    <div id="choose_div">
      <ul>
        <li class="li_choose">
          <div class="li_div">
            <p>Save &#10157;</p> 
          <hr style="height:3px;background-color: #000;" />
          </div>
        </li>

        <li class="li_choose">
          <div class="li_div">
            <p>Recover &#10157;</p>

            </div>
        </li>
      </ul>
  </div>

  <div id="frame_div">
    <iframe border="1"  src="empty.htm" style="border-style: solid;width: 79%; background-color: #555;height: 100%;">Here is the video</iframe>
  </div>
</div> 
```

# jquery - div id 的 CSS 选择器

> ID：15854391
> 
> 赞同：0
> 
> 时间：2013-04-06T18:17:31.017
> 
> 标签：jquery

我正在尝试获取具有相同类名的所有 id 名称的列表`test-class`

```
<div class="test-container">
    <div class="test-class" id="test-1">
        //some markup
    </div>
    <div class="test-class" id="test-2">
        //some markup
    </div>
</div> 
```

当我知道它们具有相同的类名时`test-1`，如何获取它们的列表？`test-2`

我试过了，但没有用

```
var array = jQuery.makeArray($(".test-class").attr("id"));
console.log(array[0]); //test-1
console.log(array[1]); //undefined 
```

似乎 .attr 只返回第一个 id 而不会捕获剩余的 id。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:18:41.953

您可以使用该`$.map`功能：

```
var arr = $.map($(".test-class"), function(el, i) {return el.id});

console.log(arr[0]); //test-1
console.log(arr[1]); //test-2 
```

[**小提琴**](http://jsfiddle.net/bVb8k/)

作为旁注，如果没有 jQuery，这也不难做到：

```
var elems = document.getElementsByClassName('test-class'),
    arr   = [];

for (i=0; i<elems.length; i++) {
    arr.push(elems[i].id);
} 
```

[**小提琴**](http://jsfiddle.net/bVb8k/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:19:22.197

您可以循环使用`$.each`

```
var ids = []

$.each($('div.test-class'), function(idx, el) {
    ids.push(el.id)
}); 
```

# java - JButton 数组 ActionListener 问题

> ID：15854393
> 
> 赞同：0
> 
> 时间：2013-04-06T18:17:41.463
> 
> 标签：java, swing, jbutton, actionevent

我正在写一个程序，我遇到了一个问题......

我创建了 1 个 JLabel 数组和 1 个 JButton 数组。JLabel 数组包含一个字符串，即俱乐部名称。JButton 数组包含一个仅显示“编辑”的字符串。

For 循环然后根据 clubs 数组的长度填充每个数组，并为每个按钮添加一个动作侦听器。

当用户单击与 JLabel 对应的 JButton 时，它会启动一个事件。在这种情况下，我需要找出与 JButton 匹配的 JLabel 中存储的值。

由于事件侦听器不知道它在循环中，因此我无法使用它。

如何实现我想要的目标？

请参阅下面的代码。

```
JLabel clubs[]      = new JLabel[99];
JButton editAClub[] = new JButton[99];

for(int i=0; i <= (allClubs.length - 1);i++)
{
    clubs[i]        =   new JLabel("Club " + i);
    editAClub[i]    =   new JButton("Edit");
    editAClub[i].addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            selectedClub = clubs[i].getText().toString();
            System.out.println(selectedClub);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:25:13.500

我会创建一个 Buttons 和 JLabels 的映射，并在 actionListener 中传递动作的来源：

```
JLabel clubs[]      = new JLabel[99];
JButton editAClub[] = new JButton[99];

//create a map to store the values
final HashMap<JButton,JLabel> labelMap = new HashMap<>(); //in JDK 1.7

for(int i=0; i <= (allClubs.length - 1); i++)
{
    clubs[i]        =   new JLabel("Club " + i);
    editAClub[i]    =   new JButton("Edit");

    //add the pair to the map
    labelMap.put(editAClub[i],clubs[i]);

    editAClub[i].addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            //get the label associated with this button from the map
            selectedClub = labelMap.get(e.getSource()).getText(); // the toString() is redundant
            System.out.println(selectedClub);
        }
    });
} 
```

这样，按钮和标签通过单独的数据结构相互关联，而不仅仅是通过它们各自数组中的索引。

# javascript - jQuery在焦点悬停时停止动画

> ID：15854396
> 
> 赞同：0
> 
> 时间：2013-04-06T18:17:52.247
> 
> 标签：javascript, jquery, user-interface, frontend

我正在开发一个 UI 模块：根据用户是否将鼠标悬停在目标区域上或仍然关注输入文本字段来显示/隐藏的搜索表单。我只是有另一个调整要照顾...

如果我碰巧将鼠标悬停在目标区域上，我希望能够取消动画（例如淡出）。目前， stop() 似乎没有完成这项工作。

非常感谢提示。TIA

* * *

这是演示：

[http://jsfiddle.net/s2wEu/](http://jsfiddle.net/s2wEu/)

当前脚本：

```
var topbar_search_hotspot =  $('form[role="search"]');
var topbar_search_hideshow = $('form[role="search"] .row');

function fadeOutSearch() {
    var element = $('#s');
    if (!element.hasClass("focus") && !element.hasClass("hover") && element.val() == "") {
        $('form[role="search"] .row:visible').fadeOut("slow");
    }
}

topbar_search_hotspot.blur(function() {
    topbar_search_hideshow.removeClass("focus");
    setTimeout(fadeOutSearch, 1000);
}).focus(function() {
    $(this).addClass("focus");
});

topbar_search_hideshow.hide();
topbar_search_hotspot.hover(function() {
    if (topbar_search_hideshow.is(':animated')) {
        topbar_search_hideshow.stop().animate({opacity:'100'});
    } else {
        topbar_search_hideshow.fadeIn("slow");
    }
}, function(e) {
    setTimeout(fadeOutSearch, 1000);
    topbar_search_hotspot.removeClass("hover");
});

topbar_search_hotspot.hover(function() {
    $(this).addClass("hover");
    $('#s').focus();
}, function(){
    setTimeout(fadeOutSearch, 1000);
    $(this).removeClass("hover");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:22:42.873

是否替换`topbar_search_hideshow.stop().animate({opacity:'100'});`为`topbar_search_hideshow.stop(false,true).hide().fadeIn();`修复它，如下面的小提琴所示？[http://jsfiddle.net/7BDCB/](http://jsfiddle.net/7BDCB/)

# iphone - 防止 UIDatePicker 使用 TableView 滚动

> ID：15854397
> 
> 赞同：0
> 
> 时间：2013-04-06T18:18:05.420
> 
> 标签：iphone, ios, objective-c, uidatepicker

似乎是一个非常简单的问题，但我还没有找到解决方案：

我有一个`UIDatePicker`显示何时选择某个表格视图单元格。我用以下代码显示它：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 1) {
        switch (indexPath.row) {
            case 0: {
                _alarmPicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 315, 320, 0)];
                [_alarmPicker setDatePickerMode:UIDatePickerModeTime];
                [_alarmPicker addTarget:self action:@selector(alarmPickerChanged) forControlEvents:UIControlEventValueChanged];
                [self.view addSubview:_alarmPicker];
            }
                break;

            default:
                break;
        }
    }
} 
```

问题是，无论何时显示选择器，它都会随着表格的其余部分向上和向下滚动。除了在选择选择器时简单地禁用表格视图上的所有滚动之外，我如何保持选择器固定但表格可滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:25:11.103

您可以将其添加到关键窗口：

```
[[[UIApplication sharedApplication] keyWindow] addSubview:_alarmPicker]; 
```

因此它将在顶部。您正在将它添加到您的表格视图中（假设您正在使用`UITableViewController`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T02:38:52.703

经过一些试验，我发现这对我来说很容易：`[self.window addSubview:picker];`

为了删除我然后使用的选择器：`[picker removeFromSuperview];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:28:04.123

如果您使用的是 iOS 6，则可以在 UIDatePicker 和`self.view.superview`. 这将阻止日期选择器移动：它将被“固定”到超级视图。

# php - 从 PHP while 循环调用 JS 函数以获取 twitter 主题标签计数

> ID：15854398
> 
> 赞同：0
> 
> 时间：2013-04-06T18:18:21.430
> 
> 标签：php, javascript, jquery, twitter, hashtag

以下是我的 PHP 代码：

```
<tr  <?php echo $backclr; ?>>                            
    <td class="hashtd"><a href="#"><?php echo "#" . $row['hashtag']; ?></a></td>
    <td class="hashtd">                                    
        <script type = "text/javascript">
            submitTerms("<?php echo $row['hashtag']; ?>", "1", "2");
        </script>
        <div id="totalTweets<?php echo $row['hashtag']; ?>"><span></span></div>
        <div class="loading"><img src="img/preloader.gif"/></div>                                    
    </td>
</tr>

<?php
endwhile; ?> 
```

在这里，我调用 javascript 函数`submitTerms();`并在该函数中传递 php 参数。

以下是javascript代码：

```
<script type="text/javascript">

            var getPage = new RegExp( /page=([^&]+)/ );
            var url = "http://search.twitter.com/search.json?q=";
            var search, page, pageTotal, tweets, loading;
            var beforeCounter = "<b>";
            var afterCounter = "</b>";
            var totalTweets = 0;

            function getTweets(search, page, pageTotal) {
                $.getJSON( url + search + '&page=' + page + '&callback=?',
                function(data) {
                    if( data.results.length != 0 && page != pageTotal ) {
                        //$('#pagesDone span').html(page);
                        getData(data);
                    }
                    else {
                        showTotal(search);
                    }
                }
            );
            }

            function showTotal(search) {
                $('#totalTweets'+search+' span').html(beforeCounter + totalTweets + afterCounter);
                totalTweets = 0;
                loading = false;
            }

            function getData(data) {
                tweets = data.results;
                totalTweets += tweets.length;
                nextPage = getPage.exec(data.next_page);
                if( nextPage == null ) {
                    showTotal();
                    return;
                }
                nextPage = nextPage[1];
                getTweets(search, nextPage, pageTotal);
            }

            function submitTerms(query, pg, pgtot) {

                $('#totalTweets'+query+' span').html('');

                search = query;
                page = pg;
                pageTotal = pgtot;

                if( search == '' ) {
                    alert('No search query found');
                    return;
                }
                loading = true;                
                getTweets(search, page, pageTotal);
            }

            function status() {
                if( loading ) $('.loading').show();
                else $('.loading').hide();
            }

            $(function() {
                loading = false;
                setInterval(status, 10);
            });
        </script> 
```

上面的 javascript 正在返回 twitter 主题标签计数。但是我想要.hashcount 中的每一行`<td><div id="totalTweets<?php echo $row['hashtag']; ?>"></td>`。我也在 div 标签中使用不同的 id 来获取它。

问题是它只显示最后一行的计数，而不是所有行。示例：如果数据库中有 5 条记录，则它仅显示最后一行的主题标签计数。当我调试代码时，它显示所有主题标签的计数，但最终渲染仅是最后一行而不是所有行。

问题出在哪里？需要帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:29:33.167

你在打电话

```
submitTerms("<?php echo $row['hashtag']; ?>", "1", "2"); 
```

这转化为

```
submitTerms("movies", "1", "2"); 
```

（当然电影就是一个例子）

javascript 将此调用规范化为：`getTweets("movies", 1, 2)`其中 1 是页码，2 是回调方法。这就是您的问题所在。您尚未定义名为“2”的回调方法。

如果你忽略它，你返回的 JSON 将包含一个名为“results”的数组键，它本身就是一个包含你的结果集的数组。您可以通过正确定义您的`$.getJSON`方法来访问此结果集。第二个参数是发送到服务器的数据，不是从服务器返回的数据，这个存储在第三个参数中，见：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# java - ArrayIndexOutOfBoundsException：递归排序中的 -1

> ID：15854401
> 
> 赞同：0
> 
> 时间：2013-04-06T18:18:26.953
> 
> 标签：java, sorting

我是 Java 新手，我想知道为什么我有例外，即使我得到了我需要的答案。下面是源代码

```
package habeeb;

import java.util.*;

public class Habeeb
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        int[] num = new int[30];
        int i, count = 0;
        System.out.println("Enter the integers between 1 and 100");
        for (i = 1; i <= num.length; i++)
        {
            num[i] = input.nextInt();
            if (num[i] == 0)
                break;
            count++;
        }
        Sorting(num, i, count);
    }

    public static void Sorting(int[] sort, int a, int con)
    {
        int j, count = 0;
        for (j = 1; j <= con; j++)
        {
            if (sort[a] == sort[j])
                count++;
        }
        System.out.println(sort[a] + " occurs " + count + " times");
        Sorting(sort, a - 1, con);
    }
} 
```

这是输出

> ```
> run:
> Enter the integers between 1 and 100
> 1
> 2
> 3
> 2
> 2
> 4
> 5
> 3
> 6
> 1
> 0
> 0 occurs 0 times
> 1 occurs 2 times
> 6 occurs 1 times
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
> 3 occurs 2 times
> 5 occurs 1 times
> 4 occurs 1 times
> 2 occurs 3 times
> 2 occurs 3 times
> 3 occurs 2 times
> 2 occurs 3 times
> 1 occurs 2 times
> 0 occurs 0 times
>  at habeeb.Habeeb.Sorting(Habeeb.java:18)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.Sorting(Habeeb.java:21)
>  at habeeb.Habeeb.main(Habeeb.java:14)
>  Java Result: 1 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:25:24.723

```
public static void Sorting(int[] sort, int a, int con){
int j, count=0;
for(j=1; j<=con; j++){
  if(sort[a]==sort[j])
   count++;
}System.out.println(sort[a]+" occurs "+count+" times"); 
Sorting(sort, a-1, con); 
```

应该：

```
public static void Sorting(int[] sort, int a, int con){
if(a<0)return;
int j, count=0;
for(j=1; j<=con; j++){
  if(sort[a]==sort[j])
   count++;
}System.out.println(sort[a]+" occurs "+count+" times"); 
Sorting(sort, a-1, con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:52:40.383

问题在这里：

```
for (i = 1; i <= num.length; i++){
    num[i] = input.nextInt();

    if (num[i] == 0)
        break;

    count++;
} 
```

**循环中的i**取值介于**1** - **num.length**之间，其中**num.length** = 30。

所以在某些时候，你的程序会尝试执行

```
num[30] = input.nextInt(); 
```

这将导致错误！Cos **30**超出数组索引的范围。正确的索引范围应该在**0**到**29**之间。

两个可能的更正是：

从 0 循环 - (num.length - 1)：

```
for(i = 0; i <= num.length - 1; i++){

    num[i] = input.nextInt();

    if (num[i] == 0)
        break;

    count++;
} 
```

像以前一样从 1 - num.length 循环，但适当地更新**num**的索引：

```
for(i = 1; i <= num.length1; i++){

    int index = i - 1;

    num[index] = input.nextInt();

    if (num[index] == 0)
        break;

    count++;
} 
```

# apache - 如何忽略 mod_rewrite 中的目录 - 尝试过 ^min - [L,NC]

> ID：15854405
> 
> 赞同：0
> 
> 时间：2013-04-06T18:18:49.960
> 
> 标签：apache, mod-rewrite

我试图得到它，这样文件夹内的任何东西`min`都不会得到我的重写规则。

```
# Dispatcher wiring

#Add to stop the rules applying to the minify rules
RewriteRule ^min - [L,NC]

RewriteCond %{REQUEST_URI} !dispatch\.php$
RewriteCond /var/www/sexdiaries.co.uk/docroot%{REQUEST_FILENAME} !-f
RewriteRule ^(/.*)$ /dispatch.php?url=$1 [L,QSA]
RewriteRule ^x\.!dispatch\.php([^b]+)!dispatch\.php$ !dispatch\.php [L,NE] 
```

该文件夹`min`位于文件夹的根目录，因此：`/var/www/sexdiaries.co.uk/min`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:52:04.573

建议这样做：

```
 <Directory /min>
         RewriteEngine Off
    </Directory> 
```

...或类似的东西

# android - 使用 WebDialog Android 邀请来自 facebook 的朋友到 android 应用程序

> ID：15854408
> 
> 赞同：2
> 
> 时间：2013-04-06T18:19:02.480
> 
> 标签：android, facebook

我有一个朋友选择器片段用于选择朋友。完成后，我试图通过提供“to”参数来填充在 WebDialog 中获得的朋友，但我在“to”数组中提供的朋友列表并未填充到 WebDialog 中。我正在使用适用于 Android 的 facebook 3.0 sdk

```
Bundle params = new Bundle();
    params.putString("message", getString(R.string.request_message));
params.putStringArray("to", fbIdArray);

    Builder builder = new WebDialog.Builder(PickFriendsActivity.this,
            Session.getActiveSession(), "apprequests", params);
builder.build().show(); 
```

有什么需要做不同的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:27:45.113

apprequest 对话框不接受非字符串参数，因此您需要将数组转换为逗号分隔的列表，例如：

```
"ID_1,ID_2,ID_3,..." 
```

# xcode - 如何重复可达性测试直到它起作用

> ID：15854409
> 
> 赞同：2
> 
> 时间：2013-04-06T18:19:07.650
> 
> 标签：xcode, reachability, viewdidload

我有一个初始的 tableviewcontroller 正在执行可达性检查。这在 中没有问题`viewDidLoad`，**但是**我想知道*重试*连接直到它通过的正确方法。我的实现文件中的相关代码如下，如果连接断开，我尝试插入`[self ViewDidLoad]`，但这只是将应用程序设置为循环（返回连接失败`NSLog`消息）并且不显示`UIAlertView`.

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if(![self connected])
    {
        // not connected
        NSLog(@"The internet is down");
        UIAlertView *connectionError = [[UIAlertView alloc] initWithTitle:@"Connection      Error" message:@"There is no Internet Connection" delegate:self cancelButtonTitle:@"Retry" otherButtonTitles:nil, nil];
        [connectionError show];
        [self viewDidLoad];
    } else
    {
        NSLog(@"Internet connection established");
        UIButton *btn = [UIButton buttonWithType:UIButtonTypeInfoDark];
        [btn addTarget:self action:@selector(infoButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]    initWithCustomView:btn];
        [self start];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:59:19.400

你应该如何使用[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324-Intro-DontLinkElementID_2)？

*   始终先尝试您的连接。
*   如果请求失败，Reachability 会告诉你原因。
*   如果网络出现，可达性会通知您。然后重试连接。

为了接收通知，注册通知，并从 Apple 启动可达性类：

```
@implementation AppDelegate {
    Reachability *_reachability;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[NSNotificationCenter defaultCenter]
     addObserver: self
     selector: @selector(reachabilityChanged:)
     name: kReachabilityChangedNotification
     object: nil];

    _reachability = [Reachability reachabilityWithHostName: @"www.apple.com"];
    [_reachability startNotifier];

    // ...
}

@end 
```

回复通知：

```
- (void) reachabilityChanged: (NSNotification *)notification {
    Reachability *reach = [notification object];
    if( [reach isKindOfClass: [Reachability class]]) {
    }
    NetworkStatus status = [reach currentReachabilityStatus]; 
    NSLog(@"change to %d", status); // 0=no network, 1=wifi, 2=wan
} 
```

如果您更愿意使用块，请使用[KSReachability](https://github.com/kstenerud/KSReachability)。

# php - 在 PHP 中，我们如何获取父类变量？

> ID：15854412
> 
> 赞同：2
> 
> 时间：2013-04-06T18:19:19.660
> 
> 标签：php, class, variables, object

我的印象是子类继承了父类的属性。但是，以下是 B 类中的输出 null ...有人可以告诉我如何从父类访问属性吗？

```
$aClass = new A();
$aClass->init();

class A {

    function init() 
    {
        $this->something = 'thing';
        echo $this->something; // thing
        $bClass = new B();
        $bClass->init();
    }

}

class B extends A {

    function init() 
    {
        echo $this->something; // null - why isn't it "thing"?
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:24:50.977

您的代码中有几个错误。我已经纠正了他们。以下脚本应按预期工作。我希望代码注释对您有所帮助：

```
class A {

    // even if it is not required you should declare class members
    protected $something;

    function init() 
    {
        $this->something = 'thing';
        echo 'A::init(): ' . $this->something; // thing
    }

}

// B extends A, not A extends B
class B extends A {

    function init() 
    {
        // call parent method to initialize $something
        // otherwise init() would just being overwritten
        parent::init();
        echo 'B::init() ' . $this->something; // "thing"
    }
}

// use class after(!) definition
$aClass = new B(); // initialize an instance of B (not A)
$aClass->init(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:21:09.627

您定义的第二个类应该是`class B extends A`，而不是`class A extends B`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:23:47.260

我们使用以下语法访问 PHP 中的父类成员：

`parent::$variableName`

或者

`parent::methodName(arg, list)`

# java - Hadoop MultipleOutputs 抛出“找不到符号”

> ID：15854415
> 
> 赞同：0
> 
> 时间：2013-04-06T18:19:27.160
> 
> 标签：java, hadoop

我正在使用 Hadoop 0.21.0。我想输出到两个不同的文件，所以我试图让 MultipleOutputs 工作。这是我的减少：

```
public static class Reduce extends MapReduceBase implements Reducer < Text, Text > {
  private MultipleOutputs mos;
  public void configure(JobConf conf) {
    mos = new MultipleOutputs(conf);
  }
  public void reduce(Text key, Iterator < Text > values, OutputCollector < Text, Text > output, Reporter reporter) throws IOException {
    mos.getCollector("A", reporter).collect(key, new Text("Hello"));
    mos.getCollector("B", reporter).collect(key, new Text("Bye"));
    mos.getCollector("C", reporter).collect(key, new Text("Chau"));
  }
  public void close() throws IOException {
    mos.close();
  }
} 
```

但是当我尝试编译它时，我得到了这些错误：

```
Main.java:41: error: cannot find symbol
        private MultipleOutputs mos;
                ^
  symbol:   class MultipleOutputs
  location: class Reduce

Main.java:45: error: cannot find symbol
            mos = new MultipleOutputs(conf);
                      ^
  symbol:   class MultipleOutputs
  location: class Reduce 
```

虽然我已经添加了这个：`import org.apache.hadoop.mapred.*`; 在代码的开头。

谁能告诉我为什么我会收到这些错误？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:32:56.150

`Cannot find symbol`错误往往与类路径中有多个类有关，当您知道已导入类库时，这会在编译时混淆编译器。

以下是遇到类似问题的其他人： [找不到符号](http://www.coderanch.com/t/402221/java/java/Compiler-Error-find-symbol)

# iphone - 如何在 iOS 中绘制 LaTeX 字体（cmr10.ttf）的特殊字符？

> ID：15854417
> 
> 赞同：1
> 
> 时间：2013-04-06T18:19:27.700
> 
> 标签：iphone, ios, nsstring, latex, special-characters

## 概括

我正在为 iPhone 开发一个计算器应用程序，并希望将数学表达式绘制到 UIView，就像 LaTeX 外观一样。
所以我使用 cmr10.ttf（LaTeX 默认）作为绘图字体，但有些字符没有显示。

## 测试代码和细节

这是我的测试代码：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    const int len = 4;
    Byte cstr[len];
    cstr[0] = 0x30; // 0
    cstr[1] = 0x00; // Capital Gamma
    cstr[2] = 0x41; // A
    cstr[3] = 0x61; // a
    NSString *str = [[NSString alloc] initWithBytes:(const void*)cstr length:len encoding:NSASCIIStringEncoding];
    [str drawAtPoint:CGPointMake(10, 0) withFont:[UIFont fontWithName:@"cmr10" size:40]];
} 
```

我曾期望向 UIView 显示“ **0ΓAa** ”，但实际上显示“ **0Aa** ”而没有大写 gamma。
根据 CMR10 代码表（见下文），0x00 表示大写 gamma。但在 ASCII 表中，0x00 表示 NUL 控制字符。这可能是未显示大写伽玛字符的原因。

这是CMR10的代码表。字母等一般字符与 ASCII 表的代码相同，但其他字符不同。

![在此处输入图像描述](https://i.stack.imgur.com/H5E28.png)

（来自[http://www.tug.org/texlive//devsrc/Master/texmf-dist/doc/latex/base/encguide.pdf](http://www.tug.org/texlive//devsrc/Master/texmf-dist/doc/latex/base/encguide.pdf)第 18 页）

## 问题

所以我想知道如何绘制一个字符代码与ASCII中的控制字符相同的字符。

## 附加信息

*   我在 BaKoMa 字体包中使用了 cmr10.ttf。
*   我正在 Xcode 4.6.1 和 iOS5 或更高版本的设备上开发这个计算器应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:29:21.490

`drawAtPoint:`应该透明地处理所有编码的东西，所以我希望以下工作：

```
NSString *str = @"0ΓAa";
[str drawAtPoint:CGPointMake(10, 0) withFont:[UIFont fontWithName:@"cmr10" size:40]]; 
```

*更新：*我现在已经下载了字体并测试了代码。真的行。

*更新 2：*它不起作用。[但我已经使用“TTFdump”工具（来自Microsoft Typography 工具](http://www.microsoft.com/typography/tools/tools.aspx)页面）检查了“cmr10.ttf”字体，发现以下内容：

该字体包含一个平台 ID = 3 和编码 ID = 1 的“cmap”表。根据[http://www.microsoft.com/typography/otspec/cmap.htm](http://www.microsoft.com/typography/otspec/cmap.htm)，这应该是从 Unicode 到字形 ID 的映射. 但事实并非如此。例如，Unicode U+00A1 映射到字形 id 19，即“Gamma”字形。但“Gamma”的真正 Unicode 是 U+0393。

所以这

```
// 00A1 = Gamma, 00A8 = Upsilon, 00A3 = Theta, 00B0 = fl.
NSString *str = @"\u00A1\u00A8\u00A3\u00B0";
[str drawAtPoint:CGPointMake(10, 10) withFont:[UIFont fontWithName:@"cmr10" size:40]]; 
```

实际上显示来自 cmr10 字体的字符！

但是我没有发现这种奇怪的编码是从哪里来的。所以这更多是理论上的兴趣，`CGFontGetGlyphWithGlyphName`在 Daiki 的答案中使用 as 是更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:32:02.820

`CGContextShowGlyphsAtPoint`我找到了一种使用and来绘制具有控制字符代码的字符的方法`CGFontGetGlyphWithGlyphName`。

例子：

```
CGContextRef context = UIGraphicsGetCurrentContext();

if (context) {

    CGFontRef font = CGFontCreateWithFontName(CFSTR("cmr10"));
    CGContextSetFont(context, font);
    CGContextSetFontSize(context, 40);
    CGAffineTransform transform = CGAffineTransformMake(1.0, 0.0, 0.0, -1.0, 0.0, 0.0);
    CGContextSetTextMatrix(context, transform);

    const int len = 4;
    CGGlyph glyphs[len];
    glyphs[0] = CGFontGetGlyphWithGlyphName(font, CFSTR("Gamma"));
    glyphs[1] = CGFontGetGlyphWithGlyphName(font, CFSTR("Upsilon"));
    glyphs[2] = CGFontGetGlyphWithGlyphName(font, CFSTR("Theta"));
    glyphs[3] = CGFontGetGlyphWithGlyphName(font, CFSTR("fl"));

    CGContextShowGlyphsAtPoint(context, 0, 50, glyphs, len);
    CGFontRelease(font);
} 
```

第二个参数中的“Gamma”`CGFontGetGlyphWithGlyphName`是名为“post”的字形名称（参见[http://scripts.sil.org/cms/scripts/page.php?item_id=IWS-Chapter08#05931f9d](http://scripts.sil.org/cms/scripts/page.php?item_id=IWS-Chapter08#05931f9d)）。它在 cmr10.ttf 文件中定义。

我使用 TTFEdit 来查找字形名称。

1.  启动 TTFEdit。
2.  文件-> 打开。然后选择一个 TTF 文件并单击打开。
3.  选择*字形*标签。
4.  找到一个字符，然后将鼠标悬停在它上面并按住几秒钟。
5.  字形名称将显示为提示。

# javascript - 在不使用嵌套 for 循环的情况下迭代 JavaScript 数组

> ID：15854425
> 
> 赞同：3
> 
> 时间：2013-04-06T18:20:18.897
> 
> 标签：javascript, arrays

我一直在尝试迭代 JavaScript 中的多维数组，并打印数组中的每个元素。有没有办法在不使用嵌套 for 循环的情况下打印多维数组中的每个元素？

[http://jsfiddle.net/mKsDW/](http://jsfiddle.net/mKsDW/)

```
var arr = [[1, 5],[7, 4]];
for(var i in arr){
    alert(i); //this displays "0", then displays "1",
    //instead of printing each element in the array
    //how can I make it print each element in each 2D array instead,
    //without using nested for-loops for each dimension of the array?
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T18:26:30.193

听起来问题是您可能有任意深度的嵌套。在这种情况下，请使用递归函数。

```
function printArray(arr) {
    for (var i = 0; i < arr.length; i++)
        if (Array.isArray(arr[i]))
            printArray(arr[i])
        else
            console.log(arr[i])
} 
```

对于较旧的浏览器，`Array.isArray`将需要一个 shim。

```
if (!Array.isArray)
    Array.isArray = function(o) {
        return !!o && Object.prototype.toString.call(o) === "[object Array]"
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T18:29:53.603

如果您不想使用嵌套循环，则可以展平数组或使用递归函数。就像是：

```
arr.forEach(function each(item) {
  if (Array.isArray(item))
    item.forEach(each);
  else
    console.log(item)
}); 
```

# sql - 不允许复合键时创建散列主键

> ID：15854432
> 
> 赞同：2
> 
> 时间：2013-04-06T18:21:10.987
> 
> 标签：sql, django, schema, hashtable, composite-primary-key

我的问题是关于下面帖子中看到的解决方案......我认为这是一个绝妙的主意。特别是因为 Django 多年来一直存在复合主键问题。对我来说，这是一个很好的解决方法，因为您事先知道这些项目。然而，鉴于有这么多人研究了 django 中的复合键，这似乎没有什么反馈。有人可以指出这种方法的缺点吗？

我觉得只要销售人员有一个唯一的 ID，你就不应该有任何哈希冲突正确吗？即使岁月重叠。此外，只要您在 salesperson 列上提供索引，您就可以执行快速选择语句，因为这会模拟自动放置在主键上的索引。

但是，我显然只看到了积极的一面，使用这种方法是否存在危险。

感谢您提供任何信息。

[复合主键，谷歌应用引擎（django）](https://stackoverflow.com/questions/11375156/composite-primary-key-google-app-engine-django/15853869#15853869)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:29:06.133

存储两列的哈希作为主键不是很可读。你可以考虑另一种选择。例如，对于销售员和年份，您可以使用销售员的姓名，然后是下划线，然后是年份作为主键：

```
ID         Salesman    Year    ...
Joe_2011   Joe         2011    ... 
```

这比存储哈希更容易调试。

但是，如果您喜欢，散列是一种非常安全且常用的技术。

# angularjs - 第二次加载控制器时，angularFire() 返回未定义

> ID：15854435
> 
> 赞同：0
> 
> 时间：2013-04-06T18:21:24.410
> 
> 标签：angularjs, firebase

我是 angularjs 的新手，并且正在使用 firebase 来玩弄它。我正在关注 [angularFire](https://github.com/firebase/angularFire)隐式同步教程。

我的控制器代码是

```
trankeeloManagerApp.controller('StoresCtrl', [
    'NavService', '$scope', 'angularFire',
    function(NavService, $scope, angularFire) {
  NavService.updateActiveNav();

  var url = '[MY_URL]/users/test_user/stores';
  $scope.stores = angularFire(url, $scope, 'stores', []);
  $scope.store = {
    name: '',
    tin: '',
    description: ''
  };

  $scope.page = {
    show_list_loading : true,
    show_list_table : false,
    show_list : true,
    show_add_item : false,
    show_add_button : false,
  };

  $scope.stores.then(function(stores) {
    $scope.hideList();
    console.log(stores);

    $('#datatables').dataTable( {
        "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
        "sPaginationType": "bootstrap",
        "oLanguage": {
                "sLengthMenu": "_MENU_ records per page"
        },
        "aaData" : $scope.stores,
        "aoColumns": [
          { "sTitle": "Name",   "mData": "name", "mDataProp" : "name" },
          { "sTitle": "TIN",  "mData": "tin", "mDataProp" : "tin" },
          { "sTitle": "Description", "mData": "description", "mDataProp" : "description" }
        ]
    });
    $scope.page.show_add_button = true;
    $scope.addStore = function(){
      $scope.showList();
      $scope.stores.push($scope.store);
      addStoreInDatatable($scope.store);
      $scope.store = {
        name: '',
        tin: '',
        description: ''
      };
    };

    $scope.removeStore = function (store) {
      $scope.stores.splice($scope.stores.indexOf(store), 1);
    };

    //TODO implement edit
  });

  $scope.showAddStore = function(){
    $scope.page.show_add_item = true;
    $scope.page.show_list = false;
  }

  $scope.cancelAddStore = function(){
    $scope.hideList();
  }

  $scope.showList = function(){
    $scope.page.show_add_item = false;
    $scope.page.show_list = true;
  };

  $scope.hideList = function(){
    $scope.page.show_list_loading = false;
    $scope.page.show_list_table = true;
  };

  function addStoreInDatatable(store){
    $('#datatables').dataTable().fnAddData({
      "name" : store.name,
      "tin" : store.tin,
      "description" : store.description 
    });
  };

  $scope.showList();

}]); 
```

第一次加载一切正常，但是当我转到另一个控制器并返回时。我得到这个错误。

> TypeError：无法调用未定义的方法“then”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:57:22.460

遇到相同的行为，我认为目前~~存在~~以下[错误](https://github.com/firebase/angularFire/pull/8)`angularFire.js`：

如果请求的值已经在本地缓存，则`angularFire()`返回`undefined`而不是（已解决的）承诺。

*更新：*该错误现已[修复](https://github.com/firebase/angularFire/commit/6873941f14996d0b2ef509a308320f3bf89485e9)。

关于后续调用的问题`$scope.stores.push`：我建议区分绑定值（在 angularFire() 的第三个参数中命名）和绑定的承诺（由 angularFire() 返回）：

```
$scope.promise = angularFire(url, $scope, 'stores', []);
$scope.promise.then (function () {
    $scope.stores = { foo: 'bar', ... };
}); 
```

# android - 如何在我的广播接收器类中开始活动？

> ID：15854442
> 
> 赞同：0
> 
> 时间：2013-04-06T18:21:57.693
> 
> 标签：android, android-intent, broadcastreceiver

在我的广播接收器活动中，我需要在触发警报时运行一些代码，我可以正常工作，但我需要确保在运行此代码时我的地图活动在屏幕上，所以我正在尝试启动有意图地映射活动，但这会使应用程序崩溃，我不知道为什么。这是广播接收器类：

```
public class ProximityIntentReceiver extends BroadcastReceiver {
    private static final int NOTIFICATION_ID = 1000;
    Map mp = new Map();
    String con;
    int idpassed = 0;

    @Override
    public void onReceive(Context context, Intent intent) {
    String key = LocationManager.KEY_PROXIMITY_ENTERING;
    Boolean entering = intent.getBooleanExtra(key, false);
    if (entering) {

        Log.d(getClass().getSimpleName(), "entering");
    } else {
        Log.d(getClass().getSimpleName(), "exiting");
    }

    con = intent.getStringExtra("mc");
    idpassed = intent.getIntExtra("id", 0);

    NotificationManager notificationManager = (NotificationManager) context
        .getSystemService(Context.NOTIFICATION_SERVICE);

    Intent notificationIntent = new Intent(context, NoteEdit.class);
    long ii = Long.valueOf(idpassed);
    notificationIntent.putExtra(MapDbAdapter.KEY_ROWID, ii);
    PendingIntent pendingIntent = PendingIntent.getActivity(context,
        intent.getIntExtra("id", 0), notificationIntent,
        PendingIntent.FLAG_UPDATE_CURRENT);
    Notification notification = createNotification(context);

    String glat = String.valueOf(intent.getDoubleExtra("gl", 0.0));
    String g = String.valueOf(Map.goingToLat);

    // Depending on the type of marker fire a certain notification
    if ((intent.getStringExtra("mc").equals("contact"))
        && (!g.equals(glat))) {
        notification.setLatestEventInfo(context, "CONTACT",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);
    }

    else if ((intent.getStringExtra("mc").equals("contact"))
        && (g.equals(glat))) {
        notification.setLatestEventInfo(context, "DESTINATION",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);

        accessMap(context);
    }

    if ((intent.getStringExtra("mc").equals("park")) && (!g.equals(glat))) {
        notification.setLatestEventInfo(context, "PARK",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);
    }

    else if ((intent.getStringExtra("mc").equals("park"))
        && (g.equals(glat))) {
        notification.setLatestEventInfo(context, "DESTINATION",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);

        accessMap(context);
    }

    if ((intent.getStringExtra("mc").equals("food")) && (!g.equals(glat))) {
        notification.setLatestEventInfo(context, "FOOD",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);
    }

    else if ((intent.getStringExtra("mc").equals("food"))
        && (g.equals(glat))) {
        notification.setLatestEventInfo(context, "DESTINATION",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);

        accessMap(context);
    }

    if ((intent.getStringExtra("mc").equals("bar")) && (!g.equals(glat))) {
        notification.setLatestEventInfo(context, "BAR",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);
    }

    else if ((intent.getStringExtra("mc").equals("bar"))
        && (g.equals(glat))) {
        notification.setLatestEventInfo(context, "DESTINATION",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);

        accessMap(context);
    }

    if ((intent.getStringExtra("mc").equals("shopping"))
        && (!g.equals(glat))) {
        notification.setLatestEventInfo(context, "SHOPPING",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);
    }

    else if ((intent.getStringExtra("mc").equals("shopping"))
        && (g.equals(glat))) {
        notification.setLatestEventInfo(context, "DESTINATION",
            "You are approaching " + intent.getStringExtra("title"),
            pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);

        accessMap(context);
    }

    if ((intent.getStringExtra("mc").equals("caution"))
        && (!g.equals(glat))) {
        notification.setLatestEventInfo(
            context,
            "CAUTION",
            "Beware, you are approaching "
                + intent.getStringExtra("title"), pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);
    }

    else if ((intent.getStringExtra("mc").equals("caution"))
        && (g.equals(glat))) {
        notification.setLatestEventInfo(
            context,
            "DESTINATION",
            "Beware, you are approaching "
                + intent.getStringExtra("title"), pendingIntent);
        notificationManager.notify(intent.getIntExtra("id", -1),
            notification);

        accessMap(context);
    }

    }

    public void accessMap(Context context) {

    Intent openNext = new Intent("com.timer.MAP");
    context.startActivity(openNext);

    Map.destination = null;
    Map.goingToLat = 0;
    Map.mtv.setText("Select a new Destination!");
    Map.scanOptions();
    Map.num = 0;
    Map.playr.stop();
    Map.playr.reset();
    Map.playr.release();
    Map.handler.removeCallbacks(Map.getRunnable());
    Map.passing = true;
    }

    private Notification createNotification(Context context) {
    Notification notification = new Notification();

    if (con.equals("contact")) {

        notification.icon = R.drawable.contact;
        notification.sound = Uri
            .parse("android.resource://com.example.newmaps/"
                + R.raw.contact);

    }

    else if (con.equals("caution")) {

        notification.icon = R.drawable.caution;
        notification.sound = Uri
            .parse("android.resource://com.example.newmaps/"
                + R.raw.caution);
    }

    else if (con.equals("shopping")) {

        notification.icon = R.drawable.shopping;
        notification.sound = Uri
            .parse("android.resource://com.example.newmaps/"
                + R.raw.shopping);
    }

    else if (con.equals("bar")) {

        notification.icon = R.drawable.bar;
        notification.sound = Uri
            .parse("android.resource://com.example.newmaps/"
                + R.raw.bar);
    }

    else if (con.equals("park")) {

        notification.icon = R.drawable.park;
        notification.sound = Uri
            .parse("android.resource://com.example.newmaps/"
                + R.raw.park);
    }

    else if (con.equals("food")) {

        notification.icon = R.drawable.food;
        notification.sound = Uri
            .parse("android.resource://com.example.newmaps/"
                + R.raw.food);
    }

    notification.when = System.currentTimeMillis();
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.flags |= Notification.FLAG_SHOW_LIGHTS;
    notification.defaults |= Notification.DEFAULT_VIBRATE;
    notification.defaults |= Notification.DEFAULT_LIGHTS;
    notification.ledARGB = Color.WHITE;
    notification.ledOnMS = 1500;
    notification.ledOffMS = 1500;
    return notification;
    }
} 
```

在 accessMap 方法中，您可以看到我试图通过意图启动地图活动但应用程序崩溃的位置，这是我从 logcat 复制的内容：

```
04-06 18:04:04.363: D/ProximityIntentReceiver(5836): entering
04-06 18:04:04.433: D/ProximityIntentReceiver(5836): entering
04-06 18:04:04.463: D/ProximityIntentReceiver(5836): entering
04-06 18:04:04.473: D/ProximityIntentReceiver(5836): entering
04-06 18:04:04.513: D/ProximityIntentReceiver(5836): entering
04-06 18:04:04.543: D/MediaPlayer(5836): stop() mUri is android.resource://com.example.newmaps/2131034121
04-06 18:04:04.853: D/ProximityIntentReceiver(5836): entering
04-06 18:04:04.993: I/System.out(5836): 1Bert
04-06 18:04:04.993: W/dalvikvm(5836): threadid=1: thread exiting with uncaught exception (group=0x4205c450)
04-06 18:04:05.003: E/AndroidRuntime(5836): FATAL EXCEPTION: main
04-06 18:04:05.003: E/AndroidRuntime(5836): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newmaps/com.example.memoryGuide.Map}: java.lang.NullPointerException
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2065)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2090)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.ActivityThread.access$600(ActivityThread.java:136)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.os.Looper.loop(Looper.java:137)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.ActivityThread.main(ActivityThread.java:4802)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at java.lang.reflect.Method.invoke(Method.java:511)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:813)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:580)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at dalvik.system.NativeStart.main(Native Method)
04-06 18:04:05.003: E/AndroidRuntime(5836): Caused by: java.lang.NullPointerException
04-06 18:04:05.003: E/AndroidRuntime(5836):     at com.example.memoryGuide.Map.onCreate(Map.java:161)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.Activity.performCreate(Activity.java:5013)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-06 18:04:05.003: E/AndroidRuntime(5836):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2029)
04-06 18:04:05.003: E/AndroidRuntime(5836):     ... 11 more
04-06 18:04:10.403: E/Trace(6312): error opening trace file: No such file or directory (2)
04-06 18:04:10.643: D/-heap(6312): GC_FOR_ALLOC freed 81K, 5% free 7809K/8195K, paused 26ms, total 31ms
04-06 18:04:10.703: D/-heap(6312): GC_CONCURRENT freed 1K, 4% free 11904K/12359K, paused 16ms+8ms, total 46ms
04-06 18:04:11.083: D/-heap(6312): GC_CONCURRENT freed 671K, 7% free 12580K/13511K, paused 14ms+18ms, total 52ms
04-06 18:04:11.363: I/System.out(6312): 1Bert
04-06 18:04:11.643: D/-heap(6312): GC_CONCURRENT freed 561K, 6% free 13606K/14407K, paused 24ms+5ms, total 86ms
04-06 18:04:11.803: I/Adreno200-EGL(6312): <qeglDrvAPI_eglInitialize:299>: EGL 1.4 QUALCOMM build: AU_LINUX_ANDROID_JB_REL_RB1.04.01.01.06.043_msm7627a_JB_REL_RB1.2_Merge_release_AU (Merge)
04-06 18:04:11.803: I/Adreno200-EGL(6312): Build Date: 12/10/12 Mon
04-06 18:04:11.803: I/Adreno200-EGL(6312): Local Branch: 
04-06 18:04:11.803: I/Adreno200-EGL(6312): Remote Branch: m/jb_rel_rb1.2
04-06 18:04:11.803: I/Adreno200-EGL(6312): Local Patches: NONE
04-06 18:04:11.803: I/Adreno200-EGL(6312): Reconstruct Branch: NOTHING
04-06 18:04:12.103: D/-heap(6312): GC_FOR_ALLOC freed 1599K, 14% free 13626K/15815K, paused 27ms, total 37ms
04-06 18:04:12.793: D/-heap(6312): GC_FOR_ALLOC freed 1067K, 11% free 14190K/15815K, paused 42ms, total 47ms
04-06 18:04:13.553: D/-heap(6312): GC_CONCURRENT freed 1799K, 16% free 14320K/16903K, paused 25ms+28ms, total 90ms
04-06 18:04:14.783: D/-heap(6312): GC_CONCURRENT freed 1546K, 14% free 14702K/16903K, paused 13ms+17ms, total 67ms
04-06 18:04:15.943: D/-heap(6312): GC_CONCURRENT freed 1555K, 11% free 15075K/16903K, paused 12ms+17ms, total 72ms
04-06 18:04:16.733: D/-heap(6312): GC_CONCURRENT freed 1666K, 11% free 15474K/17351K, paused 13ms+26ms, total 106ms 
```

[根据此](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)页面，我花了几个小时试验和阅读 Android 文档，我不确定是否可以通过广播接收器事件中的意图启动活动。当用户到达目的地时，地图活动屏幕上会向用户显示一些选项，但是如果警报在他们在另一个屏幕上时触发，这些选项将永远不会显示在地图屏幕上，这就是我试图确保地图的原因screen 在 accessMap 方法中的其余代码执行之前启动。谁能建议我应该如何着手解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:42:55.890

您应该通过意图传递变量

```
public void accessMap(Context context) {
Intent openNext = new Intent("com.timer.MAP");
openNext.putExtra("destination", null);
openNext.putExtra("goingToLat", 0);
openNext.putExtra("text for mtv", "Select a new Destination!");
.........
openNext.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(openNext);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:41:03.003

您可以创建一个通知并显示它。如果用户单击通知，则您可以启动地图屏幕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T18:48:44.370

`FLAG_ACTIVITY_NEW_TASK`在 . 上设置标志`Intent`。

但是你真的不应该以这种方式启动活动。看似突然冒出来的活动是一种奇怪/不受欢迎的用户体验。您设置的通知应该足够了，然后用户可以决定他/她是否要启动您的应用程序。只是我的 2 美分：D

# java - Java 2D 旋转和全局坐标？

> ID：15854450
> 
> 赞同：1
> 
> 时间：2013-04-06T18:23:01.800
> 
> 标签：java, swing, rotation, java-2d, keylistener

我正在制作一个简单的游戏，其中有一个朝向鼠标的对象（一个带有矩形桶的正方形）。旋转部分工作得很好，但我希望对象在沿 y 轴按下按钮时移动，但直接向上移动，而不是相对于它的旋转。现在，当按下按钮时，对象会沿其所面对的方向向前移动。无论对象在哪个方向，如何将其直接向上移动 y 轴？这是代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class RotationTestMain extends JFrame implements MouseMotionListener, KeyListener{

    public static final long serialVersionUID = 666L;

    public static final int SIZE = 50;

    double xComponent;
    double yComponent;

    Image dbImage;
    Graphics dbg;

    int x;
    int y;
    int centerX;
    int centerY;

    JPanel area;

    public RotationTestMain(){
        area = new JPanel();
        area.addMouseMotionListener(this);
        addKeyListener(this);

        x = 487;
        y = 359;

        centerX = x + SIZE/2;
        centerY = y + SIZE/2;

        add(area);

        setSize(1024,768);
        setLocationRelativeTo(null);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    @Override
    public void paint(Graphics g){
        dbImage = createImage(getWidth(), getHeight());
        dbg = dbImage.getGraphics();
        Graphics2D g2d = (Graphics2D) dbg;
        draw(g2d);
        g.drawImage(dbImage, 0, 0, this);
    }

    public void draw(Graphics2D g2d){
        g2d.setColor(Color.BLACK);
        g2d.rotate(calculateRotation(), centerX, centerY);
        g2d.fillRect(x, y, SIZE, SIZE);
        g2d.fillRect(centerX-5,y-20,10,25);
        repaint();
    }

    public double calculateRotation(){
        double rot;
        if(yComponent >= 0){
            rot = 3 * Math.PI - Math.atan(xComponent/yComponent);
        }else {
            rot = 2 * Math.PI - Math.atan(xComponent/yComponent);
        }
        return rot;
    }

    public static void main(String[] args) {
        new RotationTestMain();
    }

    @Override
    public void mouseDragged(MouseEvent m) {
        centerX = x + SIZE/2;
        centerY = y + SIZE/2;
        xComponent = m.getX() - centerX;
        yComponent = m.getY() - centerY;
    }

    @Override
    public void mouseMoved(MouseEvent m) {
        centerX = x + SIZE/2;
        centerY = y + SIZE/2;
        xComponent = m.getX() - centerX;
        yComponent = m.getY() - centerY;
    }

    @Override
    public void keyPressed(KeyEvent arg0) {
        //TODO FIX THE MOVING PROBLEM
        this.y -= 3;
    }

    @Override
    public void keyReleased(KeyEvent arg0) {
    }

    @Override
    public void keyTyped(KeyEvent arg0) {
    }
} 
```

非常感谢你的帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:47:01.627

我认为问题出在这一行 g2d.rotate(calculateRotation(), centerX, centerY);

您不是在旋转对象，而是在旋转整个 g2d。因此 x,y 轴也会旋转，因为它们是 g2d 的一部分。

所以当你这样做时.y -= 3; 您确实在沿 y 轴移动，但 y 轴已旋转。

我建议找到一种方法来旋转对象而不是整个 g2d。

# asp.net-mvc - ASP MVC3 - 下拉列表未设置正确的默认值

> ID：15854452
> 
> 赞同：0
> 
> 时间：2013-04-06T18:23:17.427
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, html-select

以下是`Edit`我的控制器的方法。`FixedOrVariable`一切正常，但是下拉列表中代理的当前值未设置为默认值。但是，我可以正确编辑此值。

该字段`FixedOrVariable`是模型中的一个字符字段。它的值是`F`或`V`（总是大写）。

这是控制器方法

```
 public ActionResult Edit(int id)
    {
        var banklistagentid = db.BankListAgentId.Find(id);
        ViewBag.BankID = new SelectList(db.BankListMaster, "ID", "BankName", banklistagentid.BankID);

        SelectList tmpList = new SelectList(new[] { "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NA", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "US", "VT", "VI", "VA", "WA", "WV", "WI", "WY" });
        ViewBag.StateCodeList = tmpList;

        var fixedOrVariable = new[] {new {Text = "Fixed", Value = "F"}, new {Text = "Variable", Value = "V"}};
        ViewBag.FixedOrVariable = new SelectList(fixedOrVariable, "Value", "Text", banklistagentid.FixedOrVariable);

        return View(banklistagentid);
    } 
```

这是视图中的代码

```
 <div class="editor-field">
        @Html.DropDownListFor(model => model.FixedOrVariable, (SelectList)ViewBag.FixedOrVariable)
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:39:22.597

这可能是我见过的人们在 MVC 中使用 Dropdowns 时犯的最大错误。您不能将您的选项列表命名为与您选择的项目变量相同的名称。

将其更改为`ViewBag.FixedOrVariableList`

# java - 在tomcat上部署web服务

> ID：15854454
> 
> 赞同：1
> 
> 时间：2013-04-06T18:23:33.430
> 
> 标签：java, tomcat, service, web, war

当我在 tomcat 上部署服务后尝试运行服务时遇到问题，在 tomcat 上部署我的 war 文件后，我在 tomcat/webapp 上得到了战争及其解压缩，但我在应用程序列表中看不到它，以及何时我尝试手动访问我的应用程序：

localhost:8080/Test myWS/ >> 我收到 HTTP 404 错误

当我检查日志文件时，我发现以下内容：

```
WARNING: Error while removing context [/Test myWS]
java.lang.NullPointerException
    at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:915)
    at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1248)
    at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1219)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:316)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1086)
    at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098)
    at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:448)
    at org.apache.catalina.core.StandardService.stop(StandardService.java:584)
    at org.apache.catalina.core.StandardServer.stop(StandardServer.java:744)
    at org.apache.catalina.startup.Catalina.stop(Catalina.java:633)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:608)
    at sun.reflect.NativeMethodAccessorImpl.inenter code herevoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at      sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

你能帮我么 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:23:58.557

我从未尝试过部署名称中带有空格的 webapp - 您可以将名称更改为没有空格或将您测试的 URL 更改为 localhost:8080/Test+myWS 或 localhost:8080/Test%20myWS 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:40:32.543

非常感谢大家，我已经解决了这个问题，这是因为 TOMCAT 版本和带有空格的 war 文件的名称。

再次感谢 ：）

# java - 启动附加了 java 代理的 Glassfish 域

> ID：15854457
> 
> 赞同：3
> 
> 时间：2013-04-06T18:23:50.163
> 
> 标签：java, glassfish, asadmin

出于某些监视目的，我需要启动 Glassfish 域并附加自定义 java 代理。如果我直接使用命令启动域：

```
java -cp /path/to/glassfish3/glassfish/modules/glassfish.jar com.sun.enterprise.glassfish.bootstrap.ASMain bla-bla-bla -javaagent:/path/to/agent.jar 
```

它按预期工作。

但是如何对以 asadmin 开头的域做同样的事情呢？我试过 asadmin create-jvm-options 和 asadmin create-system-properties - 它没有帮助我。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:43:31.567

尝试重新启动域。

如果您设置了任何与 JVM 相关的内容，则在重新启动域之前不会生效。如果您在 Web UI 上执行此操作，GF 管理控制台也会发出警告。

[`asadmin`文档](http://docs.oracle.com/cd/E18930_01/html/821-2416/gepzd.html#scrolltoc)也对此提出警告。

# asp.net - Asp.net MVC3 如何在 javascript 中使用模型

> ID：15854458
> 
> 赞同：0
> 
> 时间：2013-04-06T18:23:54.263
> 
> 标签：asp.net, asp.net-mvc-3

我的模型是这样的：

```
public class ViewMessageFileModel
    {
        [Display(Name = "FileOptionId")]
        public int ? FileOptionId { get; set; }

        [Display(Name = "LeaveInMyInbox")]
        public bool ? LeaveInMyInbox { get; set; }

        IList<int> _fileforMyTeam;
        public IList<int> FileForMyTeam
        {
            get
            {
                if (_fileforMyTeam == null) _fileforMyTeam = new List<int>();
                return _fileforMyTeam;
            }
            set { this._fileforMyTeam = value; }
        }

         IList<int> _fileforfacility;
        public IList<int> FileForFacility
        {
            get
            {
                if (_fileforfacility == null) _fileforfacility = new List<int>();
                return _fileforfacility;
            }
            set { this._fileforfacility = value; }
        }
        //Similarly for other option   

        private IList<ViewUserGroupModel> _careTeam;
        public IList<ViewUserGroupModel> CareTeamForFile
        {
            get
            {
                if (_careTeam == null) _careTeam = new List<ViewUserGroupModel>();
                return _careTeam;
            }
            set { this._careTeam = value; }
        }

    } 
```

我想在我的视图中使用这个模型如下

1-使用 careteamforfile 列表直接在通过 @Model.CareTeamForFile 迭代的视图中使用。但是我想使用 Fileforfacility 和 fileformyteam List 根据我必须选择或取消选择某些复选框的值来存储在视图中的 json 变量中

我可以在视图页面上将模型元素转换为 json。还建议我最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:27:10.980

您可以使用`@Html.Raw(Json.Encode(Model.CareTeamForFile))`将列表转换为 JSON 并将其作为原始 HTML 返回。然后使用`JSON.parse()`将其转换为 JavaScript 对象。

```
<script type="text/javascript">
    var json = "@Html.Raw(Json.Encode(Model.CareTeamForFile))";

    var model = JSON.parse(json);

    ...
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-07T05:34:37.033

在 mvc Razor 中使用单引号来使用模型

例如 ：

```
$('#txtID').val('@Model.ID'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T18:30:02.983

Razor 可以很好地解析以下内容：

```
<script type="text/javascript">    
    $(document).ready(function() {
      alert("@Model.CareTeamForFile ");
    }    
</script> 
```

# javascript - 我可以在javascript函数中动态插入方法吗

> ID：15854460
> 
> 赞同：-1
> 
> 时间：2013-04-06T18:23:54.967
> 
> 标签：javascript, database, html

```
 var which = {};
    which['creditcards'] = "tx.executeSql('SELECT * FROM " + table + " ', [], querySucess, errorCB)";

     db.transaction(function(tx){
        which[table];

    }); 
```

我希望能够根据单击的变量动态插入选择语句。这可能吗？我会以正确的方式去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:35:25.423

是的，这是可能的，但不，你似乎没有以正确的方式去做——我希望得到更像以下的东西：

```
function dbQueryWrapper(table) { // table is a string supplied from onclick etc
    db.transaction (
        function(tx) {
            tx.executeSql(
                'SELECT * FROM ?;', [ table ], querySucess, errorCB
            );
        }
    );
} 
```

带有 [] 的第二个参数是您要传递到查询中的内容数组 - 每个项目都填写 ? 在查询中

# java - 平均法线导致零长度向量

> ID：15854462
> 
> 赞同：1
> 
> 时间：2013-04-06T18:24:17.737
> 
> 标签：java, opengl, lwjgl

我有四个法线，我试图通过添加 x、y 和 z 值来平均它们，然后对结果进行归一化。但是，当我添加不同的轴值时，结果向量的长度为零。我觉得这个问题很容易解决，但我对 OpenGL 比较陌生，还不知道向量的进出。

分别获取面法线和顶点法线的代码。

```
public Vector3f getNormal(Vector3f p1, Vector3f p2, Vector3f p3){
        Vector3f v = new Vector3f();

        Vector3f calU = new Vector3f(p2.x - p1.x, p2.y - p1.y, p2.z - p1.z);
        Vector3f calV = new Vector3f(p3.x - p1.x, p3.y - p1.y, p3.z - p1.z);

        v.setX(calU.getY() * calV.getZ() - calU.getZ() * calV.getY());
        v.setY(calU.getZ() * calV.getX() - calU.getX() * calV.getZ());
        v.setZ(calU.getX() * calV.getY() - calU.getY() * calV.getX());

        return (Vector3f)v.normalise();
    }

    public Vector3f getVectorNormal(Vector3f p){
        Vector3f t1 = getNormal(p, new Vector3f(p.getX() - 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() - 1));
        Vector3f t2 = getNormal(p, new Vector3f(p.getX() + 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() - 1));
        Vector3f t3 = getNormal(p, new Vector3f(p.getX() + 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() + 1));
        Vector3f t4 = getNormal(p, new Vector3f(p.getX() - 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() + 1));

        float x = t1.getX() + t2.getX() + t3.getX() + t4.getX();
        float y = t1.getY() + t2.getY() + t3.getY() + t4.getY();
        float z = t1.getZ() + t2.getZ() + t3.getZ() + t4.getZ();

        Vector3f v = new Vector3f(x, y, z);

        return (Vector3f)v.normalise();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:38:21.073

这没有意义

```
 Vector3f t1 = getNormal(p, new Vector3f(p.getX() - 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() - 1));
    Vector3f t2 = getNormal(p, new Vector3f(p.getX() + 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() - 1));
    Vector3f t3 = getNormal(p, new Vector3f(p.getX() + 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() + 1));
    Vector3f t4 = getNormal(p, new Vector3f(p.getX() - 1, p.getY(), p.getZ()), new Vector3f(p.getX(), p.getY(), p.getZ() + 1)); 
```

您无法从单个点提取法线。无论您在那里添加和减去什么，这都不是您应该做的。

*更新*

我认为您在这里主要是在努力学习线性代数基础知识。这并不是真正的 OpenGL 特定的。这是数学。我不能给你更好的建议，而不是抓住一些关于这个主题的好教科书，然后，学习它。

# python - 从 Windows 到 Mac 的键码转换

> ID：15854465
> 
> 赞同：2
> 
> 时间：2013-04-06T18:24:37.970
> 
> 标签：python, keyboard, applescript, multiplatform

我有一个小应用程序，它监听 Windows 机器上的击键并通过套接字连接（python）将它们发送到 mac。然后，mac 使用“osascript 发送键码..”来模拟按键。

我正在努力解决的是 Windows 键码与 Mac 不同。Windows 代码：[http](http://cherrytree.at/misc/vk.htm) ://cherrytree.at/misc/vk.htm Mac 代码：[http ://www.fischer-bayern.de/phpBB2/viewtopic.php?t=1967](http://www.fischer-bayern.de/phpBB2/viewtopic.php?t=1967)

有什么简单的方法可以将一个键码映射到另一个键码？我猜查找表可以工作，在重新创建轮子之前，任何人都知道存在的任何东西吗？

在完美的世界中，我想要类似的东西：

```
mackeycode = win2mackeycode('54') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:30:41.747

有这个查找表可能很方便：[https ://gist.github.com/willwade/5330474](https://gist.github.com/willwade/5330474)

Python 的答案似乎是[https://github.com/SavinaRoja/PyUserInput](https://github.com/SavinaRoja/PyUserInput)但需要为 Mac 完成 :)

# ruby - 如何在 Ruby 中查找所有引用的文件

> ID：15854471
> 
> 赞同：2
> 
> 时间：2013-04-06T18:25:08.033
> 
> 标签：ruby, import, requires

我想检测 Ruby 文件直接引用的所有文件以用于文档目的。阅读基本要求列表是不完整的，因为有些文件是可传递导入的，而另一些文件是导入但从未使用过的。例如：

```
a.rb:

require 'b'
require 'e'
class A; end
B.new; C.new

b.rb:

require 'c'
require 'd'
class B; end
C.new; D.new

c.rb:
class C; end

(d.rb and e.rb are just like c.rb) 
```

然后我想要的列表`a.rb`是`b.rb, c.rb`. 没有 D 或 E，因为它们没有被直接引用。希望这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:32:01.510

所以这里关于“使用”的含义有些模糊。显然 d 被使用，因为 b.rb （也被使用）`D.new`在最后调用。如果我们警告 'used' 表示“代码是从该文件执行的，而不是在 require 过程中”，那么下面的代码就结束了，因为我可以在 ruby​​ 1.9.3 上获得

```
require 'set'
def analyze(filename)
  require_depth = 0
  files = Set.new
  set_trace_func( lambda do |event, file, line, id, binding, classname|
    case event
    when 'call'then require_depth += 1 if id == :require && classname == Kernel
    when 'return' then require_depth -= 1 if id == :require && classname == Kernel
    when 'line' 
      files << file if require_depth == 0
    end
  end)
  load filename
  set_trace_func nil
  files.reject {|f| f == __FILE__ || f =~ %r{/lib/ruby/site_ruby}}
end 
```

您可以通过运行来使用它`analyse 'a.rb'`（假设所有涉及的文件都在加载路径上）。这样做是使用 ruby​​ 的 set_trace_func 来监听正在发生的事情。第一部分是粗略地尝试忽略调用 require 期间发生的所有事情。然后我们累积每行执行的 ruby​​ 的文件名。最后一行只是清理垃圾（例如补丁所需的 ruby​​gems 文件）。

这实际上不适用于测试示例：当 B.new 运行时，实际上并没有执行 b.rb 中的任何代码行。但是，如果 B（和 C、D 等）具有初始化方法（或某些被调用的代码行），那么您应该得到所需的结果。这是非常简单的东西，可能会被各种各样的东西愚弄。特别是如果您在（比如说）B 上调用一个方法，但该方法的实现不在 b.rb 中（例如，使用 attr_accessor 定义的访问器），则不会记录 b.rb

您可能可以更好地使用调用事件，但我认为 set_trace_func 不能做更多事情。

如果您使用的是 ruby​​ 2.0，那么您可以使用 TracePoint，它是`set_trace_func`. 它的语义略有不同，特别是当我们跟踪方法调用时，更容易获取调用它的类，所以

```
require 'set'
def analyze(filename)
  require_depth = 0
  files = Set.new
  classes_to_files = {}
  trace = TracePoint.new(:call, :line, :return, :c_call, :class) do |tp|
    case tp.event
    when :class
      classes_to_files[tp.self] = tp.path
    when :call, :c_call then 
      if tp.method_id == :require && tp.defined_class == Kernel
        require_depth += 1
      else
        if require_depth == 0
          if path = classes_to_files[tp.self] || classes_to_files[tp.self.class]
            files << path
          end
        end
      end
    when :return then require_depth -= 1 if tp.method_id == :require && tp.defined_class == Kernel
    when :line 
      if require_depth == 0
        files << tp.path 
      end
    end
  end

  trace.enable
  load filename
  trace.disable
  files.reject {|f| f == __FILE__ || f =~ %r{/lib/ruby/site_ruby}}
end 
```

确实为测试示例返回 a,b,c。它仍然受到基本限制，即它只知道实际执行的代码。

# jwplayer - 使用 Javascript API 在 JWPlayer 5 中动态更改文件和图像

> ID：15854475
> 
> 赞同：2
> 
> 时间：2013-04-06T18:25:21.707
> 
> 标签：jwplayer

有一个 HTML 播放列表，我想在用户单击播放列表中的某个项目时更改当前视频和图像，但它不起作用。我的代码有什么问题？

**我的 HTML：**

```
<div class="item-video">
    <script>
        var playerData = {
            file: 'dummy-file.flv',
            image: 'dummy-image.jpg',
            autostart: false
        }
    </script>
    <div id="item-player"></div>
    <div class="playlist">
        <ul>
            <li>
                <a class="thumb-holder" href="#" data-video="new-video.flv" data-image="new-image.jpg" title="test">
                    <img src="" alt="" />
                    <span>test</span>
                </a>
            </li>
        </ul>
    </div>
</div> 
```

**JavaScript 代码：**

```
if ($(".item-video").length) {
    if (typeof playerData != 'undefined') {
        jwplayer('item-player').setup({
            file: playerData.file,
            image: playerData.image,
            height: '300',
            width: '420',
            stretching: 'uniform',
            smoothing: 'false',
            modes: [
                { 'type': 'html5' },
                { 'type': 'flash', src: '/mediaplayer/player.swf' },
                { 'type': 'download' }
            ],
            autostart: playerData.autostart,
            backcolor: '#efefef',
            controlbar: 'bottom',
            skin: '/mediaplayer/skins/bekle/bekle.zip',
            allowscriptaccess: 'always',

        });
    }
    $(".playlist").delegate('a', 'click', function(e) {
        var $item = $(this);
        var video = $item.attr('data-video');
        var image = $item.attr('data-image');
        if (typeof video != 'undefined') {
            jwplayer().load({
                file: video,
                image: (typeof image != 'undefined') ? image : ""

            });
        }
        e.preventDefault();
    });
} 
```

*似乎 JWPlayer 的人已经删除了 JWPlayer 5 的文档，他们建议升级到 JWPlayer 6，但我不能！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:00:48.550

感谢[Ethan LongTail](https://stackoverflow.com/users/1645000/ethan-longtail)的建议，问题是因为使用了早期版本的 JWPlayer（我使用的是 5.2，API 与 5.3+ 一起使用）。

更新播放器解决了这个问题。

# actionscript-3 - 我可以针对自定义项渲染器中的特定元素运行函数吗？

> ID：15854479
> 
> 赞同：0
> 
> 时间：2013-04-06T18:26:00.560
> 
> 标签：actionscript-3, apache-flex, flash-builder

我试图弄清楚我可以在我的自定义项目渲染器内的 RichEditableText 元素中获取数据并通过一个函数运行该数据，然后将该函数的结果显示在项目渲染器中所有项目的 RichEditableText 组件中。 .

我的项目渲染器如下所示：

```
<!--    *********************************************** -->     
<s:DataGroup id="myDataGroup" width="100%">
    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer width="100%">
                <s:HGroup width="100%">
                    <s:BitmapImage id="labelIMG" source="{data.user.profileimage}"/>
                    <s:VGroup width="100%">
                        <s:RichEditableText id="labelText" 
                                            width="100%"
                                            editable="false"
                                            fontSize="16"
                                            multiline="true"
                                            paddingRight="20"
                                            selectable="false"
                                            text="{data.text}"
                                            textJustify="distribute"
                                            verticalAlign="middle"
                                            lineHeight="14"
                                            letterSpacing="-5"/>
                        <s:Label id="labelDate" fontSize="9" 
                                 width="100%"                                                                                                                    
                                 textAlign="right"
                                 text="{data.date_created}" 
                                 paddingBottom="20" 
                                 paddingRight="20" />
                    </s:VGroup>
                </s:HGroup>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:DataGroup>
<!--    *********************************************** --> 
```

因此，对于我在项目渲染器中显示的日期项目（带有绑定数据 data.date_created 的标签日期），我想通过一个将日期转换为所需格式的函数来运行它......该函数在[此处](https://stackoverflow.com/questions/7282144/twitter-created-at-value-into-friendly-time-format-at-flash)找到的答案中。

这可能吗？注意：我还从 JSON 生成我的 dataProvider 数据，并且必须首先将数据设为 ArrayCollection：

```
myJSONdata = JSON.parse(jsonContent.data);   //PARSE THE INCOMING JSON DATA
arrColl = new ArrayCollection(myJSONdata as Array);   // CONVERT IT TO AN ARRAYCOLLECTION
myDataGroup.dataProvider = arrColl;   // NOW ASSIGN IT AS THE DATAPROVIDER FOR DATAGROUP/ITEMRENDERER 
```

是否可以在 Im 转换为 ArrayCollection 时更改传入数据，以便在项目渲染器中使用的数据已经运行此日期函数并替换了日期元素？

如果两者都是可能的，是否有一种性能更好或通常被认为是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:34:49.310

是的，这是可能的，而且不太难。简而言之，将函数添加到您的 itemRenderer 并在 dataChange() 事件侦听器或 set data 方法中调用它。

```
 <!-- add the data change listener here -->
        <s:ItemRenderer width="100%" dataChange="onDataChange()">

            <fx:Script><[[

              // add in your date format function
private function toRelativeDate(d:Date):String {
        var now:Date=new Date();
        var millisecs:int=now.valueOf()-d.valueOf(); //gives you the num. of milliseconds between d and now
        var secs:int=int(millisecs / 1000);
        if(secs < 60) {
            return secs + " seconds ago";
        }else if(secs < 60*60) {
            return Math.round(secs / 60) + " minutes ago";
        } else if(secs < 60*60*24) {
            return Math.round(secs / (60*60)) + " hours ago";
        } else {
            return Math.round(secs / (60*60*24)) + " days ago";
        }
    }

              // implement the data change listener here
              protected function onDataChange():void{
                  // make sure that the data exists; as sometimes this method will run during intiial component setup
                  if(data){ 
                   // if data does exist; cast it as a date pass it to your parsing function and set the result of that to the text field of your RichText control
                   labelText.text = toRelativeDate((new date(data.text)));
                  } else {
                     // if data doesn't exist; set the text of the RichText control to empty.
                    labelText.text = '';
                   }
              }

            ]]></fx:Script>

            <s:HGroup width="100%">
                <s:BitmapImage id="labelIMG" source="{data.user.profileimage}"/>
                <s:VGroup width="100%">
                    <s:RichEditableText id="labelText" 
                                        width="100%"
                                        editable="false"
                                        fontSize="16"
                                        multiline="true"
                                        paddingRight="20"
                                        selectable="false"
                                        <!-- do not set the text value using Binding -->
                                        textJustify="distribute"
                                        verticalAlign="middle"
                                        lineHeight="14"
                                        letterSpacing="-5"/>
                    <s:Label id="labelDate" fontSize="9" 
                             width="100%"                                                                                                                    
                             textAlign="right"
                             text="{data.date_created}" 
                             paddingBottom="20" 
                             paddingRight="20" />
                </s:VGroup>
            </s:HGroup>
        </s:ItemRenderer> 
```

我在浏览器中编写了所有这些代码；所以它可能需要调整。作为基本规则; 我建议使用 dataChange() 事件而不是绑定来设置 itemRenderer 内部的值。绑定可能会产生一些性能/内存泄漏副作用。

# sql - 如何从 ID 存在于两个表之一中但不存在于其他两个表中的一个表中进行选择

> ID：15854480
> 
> 赞同：1
> 
> 时间：2013-04-06T18:26:00.757
> 
> 标签：sql, sql-server, tsql, sql-server-2005

这听起来令人困惑，但这个想法很简单。

我想获取具有默认费率的产品列表，但给定的“代理”没有费率。为此，我需要从下表中选择

```
 t_Products
|-ProductID-|--Product-|
|   100     | Product1 |
|   101     | Product2 |
|   102     | product3 |
|   103     | product4 | 
```

ID 存在于 t_Annual_DefaultCost 或 t_Daily_DefaultCost 中的位置

```
 t_Annual_DefaultCost
|-DefaultID-|-ProductID-|--Cost-|
|    100    |     100   | 24.00 |
|    101    |     101   | 26.00 |

    t_Daily_DefaultCost
|-DefaultID-|-ProductID-|--Cost-|-Days-|
|    100    |     100   | 24.00 |   1  |
|    101    |     100   | 26.00 |   2  |
|    102    |     102   | 22.50 |   2  |
|    103    |     102   | 97.50 |   8  | 
```

但它不能存在于给定代理 ID 的 t_Annual_AgentCost 或 t_Daily_AgentCost

```
 t_Annual_AgentCost 
|---CostID--|-ProductID-|-AgentID-|--Cost-|
|    100    |    100    |  10001  | 24.00 |
|    101    |    100    |  10001  | 20.00 |

    t_Daily_AgentCost
|---CostID--|-ProductID-|-AgentID-|--Cost-|-Days-|
|    100    |     100   |  10001  | 24.00 |   1  |
|    102    |     102   |  10002  | 35.00 |   2  | 
```

所以对于 AgentID 10001 的最终结果应该是

```
|-ProductID-|--Product-|
|   101     | product2 |
|   102     | product3 | 
```

对于 AgentID 10002，最终结果应该是

```
|-ProductID-|--Product-|
|   100     | product1 |
|   101     | product2 | 
```

我目前正在使用以下代码来获取具有默认费率的产品列表。但我不知道如何删除/不获取 AgentCost 表中的那些。

```
Select 
    distinct a.* 
from 
    t_Products as a
inner join
    ( 
        select 
            DefaultID ,ProductID
        from 
            t_Daily_DefalutCost 

        union 

        select 
            DefaultID , ProductID
        from 
            t_Annual_DefaultCost 
    ) 
    as b on a.ProductID = b.ProductID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:37:25.337

如果你想一次做一个代理，那么我会这样做：

```
SELECT
    a.* 
FROM
    t_Products As a
WHERE
    (   EXISTS( SELECT * FROM t_Daily_DefaultCost  As d WHERE d.ProductID = a.ProductID )
     OR EXISTS( SELECT * FROM t_Annual_DefaultCost As d WHERE d.ProductID = a.ProductID )
     )
AND NOT
    (   EXISTS( SELECT * FROM t_Daily_AgentCost    As d 
                WHERE d.ProductID = a.ProductID
                AND   d.AgentID   = @SpecifedAgentID )
     OR EXISTS( SELECT * FROM t_Annual_AgentCost   As d 
                WHERE d.ProductID = a.ProductID
                AND   d.AgentID   = @SpecifedAgentID )
     ) 
```

这里的`OR EXISTS`s 与 s 的工作方式几乎相同`UNION ALL SELECT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:49:50.733

我会使用这种方法。

```
select yourfields
from yourtables
where id in 
(

(select id
 from onetable
 union
 select id
 from anothertable)
 except
 (select id
  from yetanothertable
  union
  select id
  from thefinaltable)
) 
```

您可以填写实际的表名。

# asp.net-mvc - 在出现特定操作时使用 MVC 路由覆盖控制器名称

> ID：15854483
> 
> 赞同：2
> 
> 时间：2013-04-06T18:26:14.493
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我试图在 MVC4 中指定一个路由，如果显示一个特定的操作名称，它会忽略控制器名称。例如。

**mysite.com/AnyControllerNameHere/SpecificAction** - 让我指定要使用的控制器和操作，而

**mysite.com/AnyControllerNameHere/NotSpecificAction** - 将带我使用 AnyControllerNameHere 控制器和 NotSpecificAction 方法，如 MVC 默认值。

我试图编写一些代码，但它似乎没有做我想要的。完整的路由配置只是 MVC 默认值加上我试图这样做......

```
 public static void RegisterRoutes(RouteCollection routes)
    {
       routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

       routes.MapRoute(
            "SpecificAction",
            "{controller}/SpecificAction",
            new { controller = "Home", action = "SpecificAction" }
            );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:04:27.790

当你写这个：

```
routes.MapRoute(
    "SpecificAction",
    "{controller}/SpecificAction",
    new { controller = "Home", action = "SpecificAction" }); 
```

您打算覆盖控制器。但是，第三个参数不能用于*覆盖*参数。它只是为URL 尚未提供的任何参数提供*默认值。*

所以你需要的是一个*不*设置控制器参数的路由模板，以便默认生效：

```
routes.MapRoute(
    name: "SpecificAction",
    url: "{ignored}/SpecificAction",
    defaults: new { controller = "Home", action = "SpecificAction" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T04:36:41.337

最简单的方法是使用 Route 约束。

```
routes.MapRoute(
    "SpecificAction",
    "{anyController}/{specificAction}",
    new {controller="Home", action="SpecificAction"},
    new {specificAction = "SpecificAction" }
 ); 
```

这里的关键是您不使用默认的 {controller} 和 {action} 而是使用不同的东西（它们可以是任何东西），而是使用路由约束将其锁定到 SpecificAction 操作。

Wim 的方法也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:00:57.157

我不相信这可以通过 MVC 的内置路由轻松实现。您可以考虑编写自定义路由处理程序，或者，执行以下操作以让默认路由为您完成工作：

```
public class BaseController : Controller
{
    public ActionResult SpecificAction()
    {
        return RedirectToAction("SpecificAction", "Home");
    }
}

public class SomeController : BaseController
{
    /* ... */
}

public class HomeController : BaseController
{
    public override ActionResult SpecificAction()
    {
        /* Do whatever */
    }
} 
```

# c# - Windows RT：从项目文件夹中读取文本文件

> ID：15854486
> 
> 赞同：0
> 
> 时间：2013-04-06T18:26:36.933
> 
> 标签：c#, windows-8, windows-runtime

我正在创建一个 Windows rt 应用程序，其中包含 1000 多个 .txt 文件，我从中获取它们的内容。

这些文本文件是我项目的一部分，但我无法用代码阅读它们。

这是我的代码

```
 static async Task ReadFile(string filePath, List<string> list)
    {
        try
        {
            StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///" + filePath));
            var readThis = await FileIO.ReadLinesAsync(file);
            foreach (var line in readThis)
            {
                list.Add(line);
            }

        }
        catch (FileNotFoundException)
        {
        }
    } 
```

其中文件路径是：“txt/data/14b.txt。

执行代码时，列表中充满了数据，但应用程序崩溃，我被发送到 app.gics 的这一行

```
 if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break(); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T16:19:33.920

尝试将您的文本文件构建操作标记为内容。然后

```
var file = await StorageFile.GetFileFromApplicationUriAsync( new Uri( "ms-appx:///" + filePath ) ); 
```

应该加载一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:14:47.680

```
var storageFile = await StorageFile.GetFileFromApplicationUriAsync(new Uri(String.Format("ms-appx:///{Project name}/txt/data/{0}", fileName))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:47:47.817

尝试更换

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///" + filePath)); 
```

至

```
var ProjectFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
StorageFile file = await ProjectFolder.GetFileAsync(fileName); 
```

# ruby-on-rails - 在 Rails 3 中应用此类方法后，如何添加备用闪存消息？

> ID：15854488
> 
> 赞同：0
> 
> 时间：2013-04-06T18:26:45.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我添加到 Rails 3 代码中的模型中的类方法

```
class Micropost < ActiveRecord::Base

def self.without_review
    where(review: false)
  end 
```

仅供参考，这是显示“review”的 schema.db

```
 create_table "microposts", :force => true do |t|
    t.text     "content"
    t.boolean  "review",          :default => false
  end 
```

所有帖子都默认为review=false，但如果用户在创建之前选中了一个框，那么review=true。

这是闪存消息所在的控制器

```
 def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Posted"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

如果review=false，我想要与现在相同的行为，但是如果review=true，我想闪烁一条消息，上面写着“Post is under review”而不是“Posted”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:35:25.523

只需进行这些更改`create`

```
 def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      if @micropost.review 
        # If review is true. The object @micropost is already built with necessary 
        # parameters sent by the form, say whether review is true.
        flash[:notice] = "Post is under review"
      else
        flash[:success] = "Posted"
        redirect_to root_path
      end
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:39:29.713

另一种方法是：

```
 def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Posted"
      flash[:success] = "Post is under review" if @micropost.review 
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:59:05.663

```
def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = @micropost.review ? "Posted" : "Post is under review"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

# joomla - 将 Joomla 站点从一台机器转移到另一台机器

> ID：15854497
> 
> 赞同：0
> 
> 时间：2013-04-06T18:27:45.510
> 
> 标签：joomla, joomla2.5, joomla3.0

我在培训中心做了一个简单的项目，我想在家里继续这个项目。

我尝试将文件从 WAMP www 导向器传输到 pendrive 并存储在我的家庭 pc Wamp WWW 目录中，但出现 404 ARTICLE NOT FOUND ERROR。

我已经附加了与我的 Joomla 项目相关的数据库，但无法进入前端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:31:21.387

两个基本选项：

I. 看看[akeebabackup.com 之类的](https://www.akeebabackup.com/products/akeeba-backup.html)。

二、手动执行

1.  您需要同步文件。

2.  您需要转储数据库并将其导入其他安装。

3.  您需要更新 configuration.php 文件以匹配数据库和 log/temp 文件夹的设置。

# linux - Sed 命令获取两个字符串之间的文本，同时使用终端 UNIX 排除两个字符串

> ID：15854502
> 
> 赞同：0
> 
> 时间：2013-04-06T18:28:31.300
> 
> 标签：linux, unix, command-line, terminal

所以我有一个看起来像这样的 sed 命令：

```
sed -n "/DXImageTransform.Microsoft.AlphaImageLoader(src='/,/',sizingMethod='crop');/p"
/Users/ME/Documents/weather/yahooWeather.html > /Users/ME/Documents/weather/out.txt 
```

它正确地从文件中获取了我想要的 HTML，但是它仍然具有我用来搜索它的字符串（即“DXImageTransform.Microsoft.AlphaImageLoader(src='" & "',sizingMethod='crop') ;" 在文件的开头和结尾。我想删除这两个字符串。如何修改我的命令来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:49:43.127

这应该有效：

```
sed -n -e "1,/START/d" -e "/END/,$d" -e p file.html 
```

我在那里使用`-e`选项分隔了 3 个命令，但您可以将它们全部放在一起，用`;`.

这就是他们所做的：

*   `1,/START/d`-- 删除一个范围：从文件的第一行到匹配模式的行`/START/`
*   `/END/,$d`-- 删除一个范围：从匹配模式的行到文件末尾
*   `p`-- 打印该行（这些行与之前的模式不匹配）

**更新**

如果模式在第一行，则上述方法不起作用。使用 GNU `sed`，您可以像这样修复它：

```
sed -n -e "0,/START/d" -e "/END/,$d" -e p file.html 
```

不幸的是，这不适用于 BSD `sed`。

# jquery - JQuery 按钮问题和 onclick 突出显示输入文本？

> ID：15854503
> 
> 赞同：0
> 
> 时间：2013-04-06T18:28:52.147
> 
> 标签：jquery

**JSFiddle：http:** [//jsfiddle.net/j7Nuc/](http://jsfiddle.net/j7Nuc/)

我最初的问题是关于如何在单击下拉菜单时突出显示字体大小，因为以下内容不起作用：

```
$('#Font-Size input:text').text().highlight('12'); 
```

但是，我所做的似乎有问题，有时无法正常工作。

我真的不知道该说什么是错误的，因为它似乎并不总是相同的结果，我不知道如何解决的唯一持续问题是删除文本输入上的焦点（默认显示）场地。

最好的问候，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:18:07.623

尝试

```
$('#Font-Size input:text').select() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:18:28.040

以下是不同问题的答案：

1.) 如果您想在点击下拉菜单时选择文本框值，您可以使用该`.focus()`方法。在下拉按钮的点击事件上，使用类似：

```
$('#Font-Size input:text').focus(); 
```

将焦点设置到文本框，它将自动突出显示文本框中当前为 12 的值。

更新的 jsfiddle 在这里：

[http://jsfiddle.net/j7Nuc/1/](http://jsfiddle.net/j7Nuc/1/)

希望我把`.focus()`正确的地方。如果有任何机会需要在后续的 if-else 语句中出现，请更正。

2.）随时取消选择，您可以使用`.blur()`方法。

3.）要删除焦点上的默认样式（轮廓），您可以使用

```
* {
    outline : none;
} 
```

在 CSS 文件的顶部。这将从所有元素中删除默认轮廓。更新了这个实现的小提琴是[http://jsfiddle.net/j7Nuc/2/](http://jsfiddle.net/j7Nuc/2/)

# javascript - document.all 和 document.layers 现在已经过时了

> ID：15854504
> 
> 赞同：11
> 
> 时间：2013-04-06T18:28:56.167
> 
> 标签：javascript

我正在浏览一些（旧的？）原生 javascript，我遇到了 document.getElementById、document.all 和 document.layers 的分离。

据我所知，document.all 和 document.layers 现在已经过时了，但我只是想确定一下。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T18:35:20.433

是的，它们已经过时了。

该`document.all`集合特定于 Internet Explorer。该`document.layers`集合是特定于 Netscape 的。标准中也没有。

今天我们`document.getElementById`改用。

另见：[https ://developer.mozilla.org/en-US/docs/Mozilla_Web_Developer_FAQ#JavaScript_doesn.E2.80.99t_work.21_Why.3F](https://developer.mozilla.org/en-US/docs/Mozilla_Web_Developer_FAQ#JavaScript_doesn.E2.80.99t_work.21_Why.3F)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:32:55.227

是的，他们是。它们来自 Internet Explorer 4 和 Netscape 4.x 是主要浏览器的时期：`document.layers`被 Netscape 和`document.all`IE 使用。第一个肯定不再使用了，我猜`document.all`它仍然用于 IE 中的遗留。

# elasticsearch - 什么时候应该进行弹性搜索刷新？

> ID：15854512
> 
> 赞同：1
> 
> 时间：2013-04-06T18:29:43.663
> 
> 标签：elasticsearch

当您升级弹性搜索时，我已经看到它推荐，我的理解是它会删除可能在内存中的索引的任何部分。

这个对吗？您还想在什么时候进行冲洗？

# ios - 在类 ios 之间发送数据？

> ID：15854515
> 
> 赞同：0
> 
> 时间：2013-04-06T18:30:07.273
> 
> 标签：ios, objective-c, ios6

好的，这就是我的情况。

我使用主详细信息模板创建了新项目，在 MasterViewController 中我有只显示标题的表格和单元格。我将单元格修改为自定义并添加了两个文本字段。我的应用程序要求是在用户输入文本字段中的点后实时绘制图形。图形显示在详细视图中，该部分工作正常（图形绘图）。

现在我的问题是如何从不是 uiview 控制器的类中传输数据。MasterViewController 是 UITableViewController 的子类，但要为文本字段创建出口，我必须拥有 UITableViewCell 的子类。因此，我创建了新类 CellData（UITableViewCell 的子类），我可以使用 IBAction didFinishEditing 和 IBOutlets 实时从文本字段中获取值，并自动将数据添加到数组中。

现在我应该如何将此数组推送到 MasterViewController，然后进一步推送到 GraphDraw 类，该类将实际绘制图形。我所做的是创建全局类，我怀疑这不是理想的解决方案。我应该像有人建议的那样创建三向协议和委托解决方案还是模型类？

到目前为止，所有的协议和委托教程都集中在 viewControllers 上，我对此没有任何问题，但它们并不适合我的情况。而模型类是 NSObject 的子类，我无法直接获取单元格数据。现在，如果问题很长，我深表歉意，但我是初学者，我正在尝试找出解决这些问题的最佳方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:49:54.233

委派是通往这里的道路。这个设置虽然有点令人困惑，可能是为什么那里的资源不完全符合您的要求。

首先，您需要一个可以将消息从您的`UITableViewCell`子类发送到主类的委托`UITableViewController`。以以下为例：

**细胞数据**

```
@protocol JDPlotCellDelegate <NSObject>

- (void)didFinishEditingWithData:(id)someData;

@end 
```

现在，当`UITextField`发送它的 didFinishEditing 委托消息时：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

    [self.delegate didFinishEditingWithData:textField.text];
} 
```

到目前为止很简单吧？

接下来，您的主 tableview 控制器需要实现委托（并确保单元格已连接委托属性！）

**主视图控制器**

```
- (void)didFinishEditingWithData:(id)someData {

    [self.detailViewController plotSomeData:someData];
} 
```

然后由于 master 有一个对细节视图控制器的引用，它可以像`- (void)plotSomeData:(id)someData;`在细节视图控制器上声明一个可以获取数据并绘制它的公共方法一样简单。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:58:03.840

如果您不愿意使用委托，那没关系，我的意思是您可以使用 NSNotifications 告诉应用程序中的其他侦听器发生了某些事件，您还可以通过通知捎带一些数据。

在通知的接收者 -viewDidLoad 中可能会添加以下内容：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(masterEventOccurred:) name:@"MasterEventNotfication" object:nil]; 
```

在监听类中添加这个函数

```
-(void)masterEventOccurred:(NSNotification *)notification
{
   //notification happened
   NSLog(@"object sent: %@",notification.object);
} 
```

在 listener 类的 dealloc 中删除通知观察者

```
-(void) dealloc {
[[NSNotificationCenter defaultCenter] removeObserver:self];
[super dealloc];
 } 
```

现在一切都设置好了，我们必须触发事件，在主类中的任意位置添加以下行（根据您的情况，可能在 textField 委托方法中）：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"MasterEventNotfication" object:yourTextField.text]; 
```

# python - 为什么需要在 Django admin 中同时注册应用名称和应用管理员名称？

> ID：15854516
> 
> 赞同：1
> 
> 时间：2013-04-06T18:30:08.183
> 
> 标签：python, django, django-admin

我试图理解为什么在为 django 应用程序添加自定义管理站点时，需要同时添加模型和管理功能。假设您有一个名为 的应用程序`Story`，因此将调用管理站点`StoryAdmin`。在 django 管理界面上注册时，需要添加这一行：

```
# Registering all the changes to admin.site
admin.site.register(Story, StoryAdmin) 
```

我的问题是，有没有办法做到这一点：

```
admin.site.register(StoryAdmin) 
```

只添加一件事，而不是两件事，因为这使事情变得更简单，出错的可能性更小，而且代码看起来不那么冗余。它会让事情看起来好多了，因为最后，你可以有一个所有管理面板的干净列表：

```
admin.site.register(
    StoryAdmin,
    SomeAdmin,
    FooAdmin,
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:41:52.867

[这不是如何`admin.site.register`构建](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L52)的。它需要一个模型，然后是可选的用于显示该模型的 ModelAdmin：

```
def register(self, model_or_iterable, admin_class=None, **options):
    """
    Registers the given model(s) with the given admin class.

    The model(s) should be Model classes, not instances.

    If an admin class isn't given, it will use ModelAdmin (the default
    admin options). If keyword arguments are given -- e.g., list_display --
    they'll be applied as options to the admin class.

    If a model is already registered, this will raise AlreadyRegistered.

    If a model is abstract, this will raise ImproperlyConfigured.
    """ 
```

这允许您在多个模型上使用相同的 ModelAdmin（例如，当您从同一个抽象模型中继承模型时，这可能是可取的）。

它不适合你的风格，但它只是你必须接受并继续下去的事情之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:44:57.163

这是一个很好的问题，它本来可以这样设计的，但事实并非如此。

我认为主要原因是**允许 admin 类是可选**的，并在简单的情况下使用默认的基本 ModelAdmin 类，并**允许对许多模型使用相同的 ModelAdmin 子类**，请参见实现：[https ://github.com/django /django/blob/master/django/contrib/admin/sites.py#L52-101](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L52-101)

另外，如果您需要自定义 ModelAdmin，则不需要自己定义类，只需将 kwargs 传递给 register 函数：

```
admin.site.register(Story, list_display=['field1', 'field2']) 
```

所以这是我的赌注，他们在注册模型时尽量减少样板文件，并让它更灵活。

# ruby - 在元素上调用方法时收到弃用警告 - 可以使用一些建议

> ID：15854523
> 
> 赞同：2
> 
> 时间：2013-04-06T18:30:42.443
> 
> 标签：ruby, page-object-gem

在页面对象元素上调用方法时，我经常收到弃用警告。这向我表明我可能还没有按预期使用 gem。我可以使用一些帮助，有人可以推荐一种更好的方法来处理这样的事情吗？

我正在处理一个页面，其中包含一个 div 列表，每个 div 都包含一个复选框元素。换句话说，是这样的：

```
<div class="item-checkbox"><input type="checkbox"></div>
<div class="item-checkbox"><input type="checkbox"></div>
<div class="item-checkbox"><input type="checkbox"></div> 
```

* * *

我想通过索引访问一个复选框，然后在需要时检查它。这是我目前拥有的：

```
 def select_checkbox(index)
       fail "Nothing in list" unless checkboxes.length > 0
       checkbox = self.checkboxes[index].checkbox_element
        if checkbox.exists?
           checkbox.set
        else
           fail "could not select a checkbox at index #{index} - check that it exists"
        end    
     end  

     protected
     def checkboxes
        div_elements(:class=> 'item-checkbox')
     end 
```

这可行，但是我在第 5 行，checkbox.set 上收到弃用警告。将其更改为 checkbox.click 将其清除。尽管如此，我不相信我正在以“页面对象宝石”的方式来做这件事。使用 watir-webdriver，divs 给了我一个可以使用的数组，我可以用类似的方式完成同样的事情。有没有人使用 gem 做过类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:59:49.457

`set`除了元素上不存在该方法外，您上面的内容看起来不错`CheckBox`。相反，有`check`、`uncheck`和`checked?`方法。我认为您可以安全地将上述方法更改为：

```
def select_checkbox(index)
   fail "Nothing in list" unless checkboxes
   checkbox = self.checkboxes[index].checkbox_element
    if checkbox.exists?
       checkbox.check
    else
       fail "could not select a checkbox at index #{index} - check that it exists"
    end    
 end  

 protected
 def checkboxes
    div_elements(:class=> 'item-checkbox')
 end 
```

另一种可能的方法是在类中声明 div，如下所示：

```
class MyPage
  include PageObject

  divs(:checkbox, :class => 'item-checkbox')

  def select_checkbox(index)
     fail "Nothing in list" unless checkboxes
     checkbox_elements[index].checkbox_element.check
   end  
end 
```

在这种情况下，您仍在检查页面上是否有任何复选框 div。在该方法的第二行中，如果复选框不存在，您将失败，因此它会处理您所防范的条件。

- 芝士

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:05:40.860

你需要使用`checkbox.check`，而不是`checkbox.set`。

这是一个类似的SO线程供参考：

[如何避免复选框弃用的页面对象](https://stackoverflow.com/questions/12479624/how-to-avoid-page-object-deprecated-for-checkbox)

# php - 如何根据不同的请求更改内容区域？

> ID：15854525
> 
> 赞同：0
> 
> 时间：2013-04-06T18:30:51.793
> 
> 标签：php, laravel, laravel-3

我有一个这样的模板。

```
<div class="content">
      @yield('content') //this area should load different files on different URI's
</div> 
```

如果我加载`.com/register`，它应该加载`register.blade.php`到`@yield.`如果我加载其他内容，它将加载该视图。

我将定义应该加载哪个`Routes.php`文件`Route::get();`

为了便于阅读，完整的源代码在这里：http: [//pastebin.com/t2Md20r9](http://pastebin.com/t2Md20r9)所以你可以看到我到目前为止所做的。

应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:52:46.277

您非常接近，只需将布局扩展为`register.blade.php`.

1.将模板文件放入`views/layouts/master.blade.php`

2.在你的 register.blade.php 放

```
@layout('layouts.master') 
```

在 Laravel 4

```
@extend('layouts.master') 
```

在上面。

3.现在使用`return View::make('register');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:43:20.347

您可以在 Route.php 文件中传递它，如下所示：

```
Route::get('your_page', function() {
    View::make('your_page')->with('contentTemplate', 'register');
}

Route::get('other_page', function() {
    View::make('other_page')->with('contentTemplate', 'other_content');
} 
```

在 your_page 中，执行

```
<div class="content">
     @render($contentTemplate)
</div> 
```

# file-io - 为什么使用后必须关闭文件？

> ID：15854526
> 
> 赞同：0
> 
> 时间：2013-04-06T18:30:55.533
> 
> 标签：file-io

我从一本书中读到一个问题，上面写着“如果操作系统在程序终止后关闭文件，为什么程序员需要手动关闭文件（即调用`file.close()`）？”

我能想到的唯一原因是程序可能无法正确终止，因此文件可能仍处于打开状态，因此会消耗系统资源，因为文件保存在缓冲区中。

还有其他原因吗？

编辑：我想到了另一个原因。调用`file.close()`强制操作系统将尚未提交到文件的任何更改刷新到磁盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:44:19.180

如果程序员手动关闭文件，他们可以控制何时/如何释放资源。

如果将其留给操作系统，则您无法确定何时/是否会进行清理，这通常也是不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:48:28.363

在某些情况下，程序会调用 open 多次，以至于如果文件描述符不再释放，它将用完文件描述符。

# java - 访问 Map 中的变量 按索引

> ID：15854528
> 
> 赞同：0
> 
> 时间：2013-04-06T18:31:04.183
> 
> 标签：java, linkedhashmap

我有一个 LinkedHashMap ，其中一个类作为键，如下所示：

```
private final Map<Files, String> list = new LinkedHashMap<Files,String>(); 
```

Files 是一个由 3 个变量组成的类：

```
class Files {
public String file;
public String duration;
public String status;
} 
```

现在我需要使用索引访问 Files 中的变量。我知道 LinkedHashMap 不允许使用索引检索值，所以我尝试了这个：

```
List<Entry<Files,String>> randAccess = new ArrayList<Entry<Files,String>>(list.entrySet()); 
```

使用`randAccess.get(index)`我可以检索密钥本身，但不能检索类中的特定变量。所以输出类似于 Files@6aa91761=String。

我希望能够获取变量，例如：`list.Files.status.Get(index)`将返回返回正确索引处的“状态”值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:32:57.413

您可以使用从 Map.Entry 获取 Files 变量[`.getKey()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getKey%28%29)。从那里您可以直接获取状态字段。

```
randAccess.get(index).getKey().status 
```

# php - 从mysql获取数据作为数组

> ID：15854530
> 
> 赞同：-2
> 
> 时间：2013-04-06T18:31:22.277
> 
> 标签：php, mysql

对不起我的英语不好..

在mysql中有行名iurl..有数据：1365269423.jpg,1365270586.jpg,1365270666.jpg,1365270683.jpg

我得到它：

```
<?php $s=mysql_query("select iurl from points where id='".$_GET['id']."' ");

 if($s){

 $array = array();

 while($t=mysql_fetch_array($s)) {  
 $array[] = $t['iurl'];

  }

 print_r($array);
?> 
```

它给了我结果：`Array ( [0] => 1365269423.jpg,1365270586.jpg,1365270666.jpg,1365270683.jpg )`

我需要得到它并像链接一样打印

我该怎么做？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:37:40.440

您可以使用`explode();`将字符串拆分为一个数组，然后循环打印每个项目：

```
$images = explode(",", $t["iurl"]);
foreach ($images as $image) {
    echo "<a href=\"{$image}\">{$image}</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:38:16.827

我认为您要求获得结果或在您的情况下将 .jpg 文件作为链接的 href？如果是这样，请执行以下操作：

```
<a href="<?php echo $t['ur1']?>">......</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:14:46.217

正如您已经发现的那样，您从数据库中获得的结果是一个数组。您唯一需要做的就是遍历数组。

[ps：考虑在 php.net http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)使用 mysqli 更多信息

```
<?php 
$s=mysql_query("select iurl from points where id='".$_GET['id']."' ");
while ($row = mysql_fetch_object($s)) {
   echo '<a href="'.$row->iurl.'" border="0" title=""><img="http://yourhost.com/images/'.$row->image.' alt=""/></a>'; 
}
?> 
```

# java - GUI 类 (JTextField-JTextArea)

> ID：15854532
> 
> 赞同：0
> 
> 时间：2013-04-06T18:31:37.293
> 
> 标签：java, swing, for-loop, jtextfield, jtextarea

我是 GUI 和 java 的新手，当我尝试为这个问题编写代码时，我遇到了 actionPerformed 方法的问题：

1.  使用如下所示的帧布局，编写一个程序来搜索在文本字段中输入了标题的电影。当用户按下 SEARCH 按钮或按下 ENTER 键时，电影的信息（标题、年份和类型）将显示在文本区域中。如果未找到该电影，则在文本区域中显示一条消息，指示该电影不存在。使用数组存储多部电影的信息。

如果有人解释如何让这段代码正常工作，我将不胜感激。
我的尝试：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class movie {
    public String title;
    public String year;
    public String genre;
    public movie(String t, String y, String g) {
        title = t;
        year = y;
        genre = g;
    }
    public String toString() {
        return "TITLE: " + title + "\nYEAR: " + year + "\nGENRE: " + genre;
    }
}

public class searchMovieFrame extends JFrame implements ActionListener {
    public movie m1 = new movie("Iron Man", "2008", "Action,Adventure");
    public movie m2 = new movie("Iron Man", "2010", "Action,Adventure");
    public movie m3 = new movie("Total Recall", "2012", "Action,Adventure");
    public movie[] movies = {
        m1, m2, m3
    };

    private static final int width = 300;
    private static final int height = 200;
    private static final int x = 360;
    private static final int y = 150;
    private JButton search;
    private JTextField input;
    private JTextArea output;
    private JLabel message;

    public searchMovieFrame() {
        Container contentPane = getContentPane();
        setSize(width, height);
        setResizable(false);
        setTitle("Search Movie Frame");
        setLocation(x, y);
        contentPane.setLayout(new FlowLayout(FlowLayout.LEFT));
        message = new JLabel();
        message.setText("Enter the movie title please");
        message.setSize(150, 25);
        contentPane.add(message);
        input = new JTextField();
        input.setColumns(15);
        contentPane.add(input);
        input.addActionListener(this);
        search = new JButton("Search");
        contentPane.add(search);
        search.addActionListener(this);
        output = new JTextArea();
        output.setColumns(23);
        output.setRows(5);
        output.setEditable(false);
        contentPane.add(output);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent event) {
        for (int i = 0; i < 3; i++)
        if (input.getText().equals(movies[i].title)) output.setText(toString());
        else output.setText("THAT MOVIE IS NOT AVAILABLE");
    }

    public static void main(String[] args) {
        searchMovieFrame frame = new searchMovieFrame();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:42:41.463

`break`一旦找到正确的电影，您就需要这样做。

也使用`Movie#toString`而不是`toString`当前的表示`JFrame`。不要将搜索限制在前 3 部电影，将`movies.length`其用作搜索的上限。为提高效率，任何组件更新都应在处理完循环*后进行。*

```
Movie searchMovie = null;
for (int i = 0; i < movies.length; i++) {
   if (input.getText().equals(movies[i].title)) {
      searchMovie = movies[i];
      break;
   }
}

if (searchMovie == null) {
   output.setText("THAT MOVIE IS NOT AVAILABLE");
} else {
   output.setText(searchMovie.toString());
} 
```

另外：使用 Java 命名约定来区分类，例如`Movie`.

# php - 如何一键保存在 php/mysql 中插入数据？

> ID：15854533
> 
> 赞同：1
> 
> 时间：2013-04-06T18:31:39.647
> 
> 标签：php, javascript, mysql

我有表 player_points 和 player_name、runs、sixes、match_no、五十、数百、point_scored。

我用上面的字段制作表格，在其中插入跑步和六分，并使用跑步和六分来计算五十、百和 point_scored，在 3 六之后每六分给额外的 10 分。它可以正常工作，但是当我插入运行和六位数并保存时，它只显示五十、一百和点得分的文本框的计算，而不是保存到数据库表中。在我第二次保存它之后，它保存到数据库中。我的代码如下：

```
<tr><td colspan="9"><hr style="border:1px #999 dashed;"></td></tr>
 <tr>
  <th>Player</th>
  <th>Status</th>
  <th>Runs</th>
  <th>6's</th>
  <th>50's</th>
  <th>100's</th>
  <th>TP</th>
  <th>Action</th>
 </tr>
 <tr><td colspan="9"><hr style="border:1px #999 dashed;"></td></tr>

<?php   
        $classObj->getPlayerPointTable();
        //$matchid = $_GET['mid'];
        $condpl = "player_name='".$player1."' AND match_no = '".$matchid."'";                           
        $resultpl = $classObj->selectSql($condpl);
        //$recordcount = $classObj->getAffectedRows($result);
        $rowpl = $classObj->fetchData($resultpl);

        foreach($rowpl as $rowspl)
        {
          $Status1 = $rowspl['status'];
          $runs1 = $rowspl['run_scored'];
          $sixes1 = $rowspl['sixs'];
          $fifty1 = $rowspl['fifty'];
          $hundred1 = $rowspl['hundred'];
          $total_score1 = $rowspl['Total_Score'];
          $total_points1 = $rowspl['point_scored'];
          $firstPoint1 = $rowspl['FirstPoint'];
          $allocation1 = $rowspl['allocation'];
        }
?>

<?php 
$bonus1 = 10;
$bonus2 = 20;
$bonus3 = 25;
$bonus4 = 50;
/*condition for fifty 0 & 1 start */
if ($runs1 >= 50 && $runs1 <= 99 || $runs1 >= 150 && $runs1 <= 199 || $runs1 >= 250 && $runs1 <= 299) {
    $fifty1 = 1;
} else {
    $fifty1 = 0;
}

if ($runs1 >= 50 && $runs1 <= 499) {
    $tfif1 = $runs1 + $bonus3;
} else {
    $tpor1 = $runs1;
}
/*condition for fifty 0 & 1 end */
/*condition for hundred 0 & 1 start */
if ($runs1 >= 100 && $runs1 <= 199) {
    $hundred1 = 1;
} 
else if ($runs1 >= 200 && $runs1 <= 299) {
    $hundred1 = 2;
} 
else {
    $hundred1 = 0;
}
/*condition for hundred 0 & 1 end */

/*Condition start for Six excess to 3 sixes*/
$i1 = $sixes1 - 3;
if($i1 >= 1 && $i1 <= 500)
{
    $tsix1 = $i1 * $bonus1;
}
else
{
    $tsix1 == 0;
}
/*Condition start for Six excess to 3 sixes*/

if($fifty1 == 1 && $hundred1 >= 1)
{
    $tsixhnrd1 += $bonus4;
}
/*condition for hundred 0 & 1 end */

if ($runs1 >= 100 && $runs1 <= 500) {
    $trun1 += $bonus3;
}
    $total_points1 = $tfif1+$tsix1+$tsixhnrd1+$trun1+$tpor1;
    $total_score1 = $runs1;    

/*veriable for Balling team database insertions end*/
?>

 <form enctype="multipart/form-data" method="post" name="formA1">
 <tr>
  <td><div style="width:auto;padding-left:7px;font-size:17px;"><?php echo $player1;?></div>
   <input type="hidden" name="player1" id="player1" value="<?php echo $player1;?>" />
   <input type="hidden" name="matchid" id="matchid" value="<?php echo $matchid;?>" />
  </td>
  <?php 
    if($Status1=='P'){
  ?>
  <td align="center">   
   <select id='status1' name='status1' onChange="dis_ableA1(this)">
     <option value='NP'>NP</option>
     <option value='P' selected>P</option>
     <option value='O'>Out</option>
   </select>
  </td>
  <td align="center">
   <input type="text" onkeypress="return blockNonNumbers(this, event, false, false);" style="width:50px;height:25px;text-align:right;background:#f5c0c0;" name="runs1" id="runs1" value="<?php echo $runs1;?>" size="3" maxlength="3" />
  </td>
  <td align="center">
   <input type="text" onkeypress="return blockNonNumbers(this, event, false, false);" style="width:30px;height:25px;text-align:right;background:#f5c0c0;" name="sixes1" id="sixes1" value="<?php echo $sixes1;?>" size="2" maxlength="2" />
  </td>
  <?php 
    } else if($Status1=='O'){
  ?>
  <td align="center">   
   <select id='status1' style="width:50px;height:25px;" name='status1' onChange="dis_ableA1(this)">
     <option value='NP'>NP</option>
     <option value='P'>P</option>
     <option value='O' selected>Out</option>
   </select>
  </td>
  <td align="center">
   <input type="text" onkeypress="return blockNonNumbers(this, event, false, false);" style="width:50px;height:25px;text-align:right;background:#ccc;" disabled name="runs1" id="runs1" value="<?php echo $runs1;?>" size="3" maxlength="3" />
  </td>
  <td align="center">
   <input type="text" onkeypress="return blockNonNumbers(this, event, false, false);" style="width:30px;height:25px;text-align:right;background:#CCC;" disabled name="sixes1" id="sixes1" value="<?php echo $sixes1;?>" size="2" maxlength="2" />
  </td>
  <?php } else { ?>
  <td align="center"> 
   <select id='status1' style="width:50px;height:25px;" name='status1' onChange="dis_ableA1(this)" tabindex="1">
     <option value='NP'>NP</option>
     <option value='P'>P</option>
     <option value='O'>Out</option>
   </select>
  </td>
  <td align="center">
   <input type="text" onkeypress="return blockNonNumbers(this, event, false, false);" style="width:50px;height:25px;text-align:right;" name="runs1" disabled id="runs1" value="<?php echo $runs1;?>" size="3" maxlength="3" />
  </td>
  <td align="center">
   <input type="text" onkeypress="return blockNonNumbers(this, event, false, false);" style="width:30px;height:25px;text-align:right;" name="sixes1" disabled id="sixes1" value="<?php echo $sixes1;?>" size="2" maxlength="2" />
  </td>
  <?php }?>
  <td align="center">
   <label style="width:30px;height:25px;text-align:right;"><?php echo $fifty1;?></label>
   <input style="width:30px;height:25px;text-align:right;" type="hidden" id="fifty1" name="fifty1" value="<?php echo $fifty1;?>" size='2' maxlength='2' />
  </td>
  <td align="center">
   <label style="width:30px;height:25px;text-align:right;"><?php echo $hundred1;?></label>
   <input style="width:30px;height:25px;text-align:right;" type="hidden" id="hundred1" name="hundred1" value="<?php echo $hundred1;?>" size='2' maxlength='2' />
  </td>

  <td align="center">
   <label style="width:30px;height:25px;text-align:right;"><?php echo $total_points1;?></label>
   <input style="width:30px;height:25px;text-align:right;" type="hidden" id="total_points1" name="total_points1" value="<?php echo $total_points1;?>" size='5' maxlength='5' />
   <input type="hidden" name="allocation1" id="allocation1"  value="pending" />
  </td>
  <?php 
    if($Status1=='P'){
  ?>
  <td align="center">
   <input type="submit" name="submitA1" id="submitA1" value="Save" />
  </td>
  <?php } else { ?>
  <td align="center">
   <input type="submit" disabled="disabled" name="submitA1" id="submitA1" value="Save" />
  </td>
  <?php } ?>
 </tr>
 </form>
 <tr><td style="height:5px"></td></tr>
<!-- Insert Code Starts Submit1-->
<?php 
 if(isset($_POST['submitA1']))
 {
    $classObj->getPlayerPointTable();
    $matchid = $_GET['mid'];
    $cond = "player_name='".$player1."' AND match_no = '".$matchid."'";                         
    $result = $classObj->selectSql($cond);
    $count = $classObj->getAffectedRows($result);
    //echo $count;
    if($count > 0)
    {
        $player1up['status'] = $postedData['status1'];
        //$player1up['player_name'] = $postedData['player1'];
        $player1up['run_scored'] = $postedData['runs1'];
        $player1up['sixs'] = $postedData['sixes1'];
        $player1up['fifty'] = $postedData['fifty1'];
        $player1up['hundred'] = $postedData['hundred1'];
        $player1up['Total_Score'] = $postedData['total_score1'];
        $player1up['point_scored'] = $postedData['total_points1'];
        $player1up['allocation'] = $postedData['allocation1'];
        $player1up['FirstPoint'] = $postedData['total_points1'];
        $classObj->getPlayerPointTable();
        $classObj->userPostedData = $player1up;
        $cond = "match_no= '".$matchid."' AND player_name='".$player1."'";
        $insert_query = $classObj->updateData($cond);

          echo "<script> alert ('Player 1 update successfully.')</script>";
          echo "<script>window.location='FirstIn.php?mid=$matchid'</script>";
    }
    else if($count <= 0)
    { 
        $player['player_name'] = $postedData['player1'];
        $player['match_no'] = $postedData['matchid'];
        $player['status'] = $postedData['status1'];
        $player['run_scored'] = $postedData['runs1'];
        $player['sixs'] = $postedData['sixes1'];
        $player['fifty'] = $postedData['fifty1'];
        $player['hundred'] = $postedData['hundred1'];
        $player['Total_Score'] = $postedData['total_score1'];
        $player['point_scored'] = $postedData['total_points1'];
        $player['FirstPoint'] = $postedData['total_points1'];

        $classObj->userPostedData = $player;
        $insert_query = $classObj->insertData();

            if($insert_query == 'success')
            {
            echo "<script> alert('Player 1 score added.')</script>";
            echo "<script>window.location='score.php?mid=$matchid'</script>";
            }
    }
    else
    {
    echo "<script> alert ('Error Occured')</script>";
    }

 }  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:39:24.127

假设您的类的`getAffectedRows()`方法确实从最后一条语句中获取受影响的行，必须注意 SELECT 没有设置它，它将为零。

如果您想知道选择了多少行，请使用 mysqli_num_rows 之类的内容。

# arrays - 跟踪数组的最高占用索引

> ID：15854535
> 
> 赞同：1
> 
> 时间：2013-04-06T18:32:02.063
> 
> 标签：arrays, algorithm

我有一个数组，我经常（并且有效地随机）添加和删除元素。是否有跟踪数组的最高占用索引的算法？

目前我能想到的最好的方法如下：

1.  跟踪变量中占用的最高索引（即 HOI）。
2.  获取数组中的下一个空闲索引时，检查它是否高于 HOI，是否将该索引分配给 HOI
3.  删除项目时，如果该项目位于 HOI 索引处，则从 HOI 向后扫描，直到找到占用的索引并将其分配给 HOI

这应该可以，但它不是特别优雅，所以我想知道是否有人知道更清洁的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:47:02.177

它很大程度上取决于阵列的密度。

对于至少适度密集的数组，您的解决方案很好，因为下一项不会太远。

对于非常稀疏的数组，索引的辅助数据结构可能是一个好主意（例如，[最大堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)）。

你被数组困住了吗？您应该始终考虑检查您选择的数据结构。从这里开始，很难说出什么是最好的，因为我对您要解决的问题了解得不够多。

或者您可以考虑**稍微复杂一点的解决方案：**

*   拥有一组最多 5 个（左右）最高索引的集合（排序数组如果很小的话也可以）。
*   在插入时，仅当它大于最小元素时才添加到此集合中（如果最小元素超过 5 个元素，则删除它）。
*   移除时，如果存在，则从集合中移除。如果集合为空，则存储删除的索引。
*   在获取最高值时，只需返回集合中的最大值。如果集合为空，则从存储的索引向后查找最大值（并将其添加到集合中）。

# php - 如何让我的文件共享脚本流式传输上传的视频？

> ID：15854536
> 
> 赞同：0
> 
> 时间：2013-04-06T18:32:27.980
> 
> 标签：php, video, stream, file-sharing

假设我有这个文件共享网站脚本，但你看，它所做的只是共享文件，比如 PutLocker.com，我想要它，这样如果上传了一个扩展名为“.mp4 或 .mpeg 等”的文件，它使用您的播放器流式传输文件，而不仅仅是共享...

例如：

Jim's 想创建一个网站，但他不擅长编码。所以他得到了一个文件共享脚本。

但是文件共享脚本就是这样做的，共享文件！Jim 希望人们也能够流式传输他们的视频文件，如果快乐蠕虫的播放器允许他，也可以仅流式传输音频！

因此，用户将常规文件夹上传到他的网站，链接已共享，脚本运行正常。但随后用户上传了一个 .mpeg 视频，Jim 不希望他的网站只共享文件，他希望他的脚本允许用户使用 Happy Worm 的 jPlayer 自动流式传输视频文件，并为用户提供下载选项。

我希望你没有迷路，相信我我已经阅读了文档。我应该把播放器的源代码放在那里，还是需要一些代码行来告诉它它需要使用该播放器进行流式传输？

我正在谈论的脚本是 X Filesharing pro 我可以将您链接到我拥有的 php 代码，如果它可以帮助更好...

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:35:23.700

1.  PHP 在服务器端运行，它不会播放媒体。（就像物理学一样，你根本做不到。）
2.  提供媒体的解决方案有很多种，但使用最广泛的是 Flash。
3.  [LongTailVideo](http://www.longtailvideo.com/players/jw-flv-player/)的 JWPlayer 非常适合您所需的音频和视频。文档很全面，播放器本身有很多很酷的附加功能，例如：
    *   缓冲
    *   一个 JS API（用于 HTML 样式）
4.  对于视频文件的缩略图，您需要在服务器上安装第三方工具 (ffmpeg)、一定程度的技术知识和对 PHP 中 exec() 函数的访问权限，以便您可以通过 PHP 运行命令行工具并输出结果。

# jquery - 使嵌入的 PDF 在 iPad 中可滚动

> ID：15854537
> 
> 赞同：20
> 
> 时间：2013-04-06T18:32:28.443
> 
> 标签：jquery, html, ipad, pdf

出于某种原因，iPad Safari 浏览器不能很好地处理嵌入的 PDF。PDF 在独立启动时可以自行查看，但不能使用对象标签。问题是它们不滚动。

我有一个带有嵌入式 pdf 的 jquery 页面，可以很好地在 mozilla 和 chrome 上滚动，但在 safari (iPad) 上，PDF 仍然停留在第一页上并且不可滚动。问题是，如何在 iPad 浏览器上进行这项工作？

此处发布了一个类似的问题，[使嵌入式 PDF 在 iPad 中可滚动，](https://stackoverflow.com/questions/8237708/making-embedded-pdf-scrollable-in-ipad)但答案不是很好。他们通过使用 10000px 的高度来作弊，这为小文档创建了很多空白，并且可能不适用于非常大的文档：

```
<!DOCTYPE html>
<html>
  <head>
    <title>PDF frame scrolling test</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <style>
      #container { overflow: auto; -webkit-overflow-scrolling: touch; height: 500px; }
      object { width: 500px; height: 10000px }
    </style>
  </head>
  <body>
    <div id="container">
      <object id="obj" data="my.pdf" >object can't be rendered</object>
    </div>
  </body>
</html> 
```

有什么方法可以在不硬编码疯狂高度的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-12T20:47:26.293

我多年来一直试图找到解决这个问题的方法。我会尽力拯救任何寻找它的人：这个问题没有解决方案。Safari 处理 PDF 呈现的方式与将 PDF 嵌入网页的整个概念完全冲突。此外，iPad 上的所有浏览器都需要使用 Safari 渲染引擎，因此您甚至无法指导用户安装其他浏览器。

嵌入具有良好结果的 PDF 的唯一方法是使用某种 3rd 方渲染实用程序。那里有一些 jQuery 解决方案，但出于我的目的，我发现最简单的方法是将 google 文档查看器链接嵌入到对象或 iframe 标记中。这相对简单，您可以在这里找到简单的说明：

[如何在 iframe 中查看 Google Drive pdf 链接](https://stackoverflow.com/questions/27685943/how-to-view-google-drive-pdf-link-in-iframe)

该解决方案包括良好的显示渲染和简单的分页和缩放控制。如果将 &embedded=true 选项嵌入到 iframe 或对象标记中，请务必包含该选项，否则它将不起作用。查看器需要一个可公开访问的 url 到您的文档，因此如果您像我一样有安全问题，您将需要编写一个 Web 服务来从单一使用令牌提供文档。

如果您正在寻找更强大的东西，有一个很好的网页列出了其他几个选项：

[http://www.jqueryrain.com/2012/09/best-jquery-pdf-viewer-plugin-examples/](https://web.archive.org/web/20170629030050/http://www.jqueryrain.com:80/2012/09/best-jquery-pdf-viewer-plugin-examples/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-09-11T08:24:19.387

PDF.js 可能是正确的选择。它非常适合我们。

您只需从[https://mozilla.github.io/pdf.js/](https://mozilla.github.io/pdf.js/)下载它并将其放置在您的网站中。

然后它可以包含在 iframe 中

```
<iframe src="/web/viewer.html?file=PATH_TO_MY_FILE.PDF"></iframe> 
```

可以在此处找到演示：[https ://mozilla.github.io/pdf.js/web/viewer.html](https://mozilla.github.io/pdf.js/web/viewer.html)

问候

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-05T14:08:12.463

MSD 的回答非常准确。我一直在尝试以许多不同的方式来做到这一点，从建议的一些库到使用对象、嵌入元素等。

无论如何，它不会为我滚动（iPad air 2 和 air 1 至少在 iOS 8 上）。或者它以过度拉伸的字母滚动，或者仅适用于短 1-2 页的文档。

我发现最有效的**解决方案**是通过用户代理为 iPad 用户提供一个链接以直接访问该文件，他们将能够在选项卡中看到它并很好地滚动浏览它。它没有嵌入，但它是我能找到的最有效和最有效的解决方案，可以满足我当前的需求。

我希望它可以帮助有人钻研同样的事情

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-12T07:23:59.943

希望这可以在将来对其他人有所帮助。我使用谷歌的 pdf 查看器能够在 iframe 中滚动 pdf。所以在 src 标签上的 url 是

[https://docs.google.com/gview?url=](https://docs.google.com/gview?url=) ' + '插入 PDF 链接' + Embedded=true

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-02T16:11:30.713

您不需要将对象的高度设置为疯狂的东西，只需将其设置为与容器元素相同的高度即可。要使用绝望的 Safari 渲染对象滚动，您需要使用**两个手指**（上/下和左/右）。

我还在容器元素中设置了以下属性：

```
overflow: scroll;
-webkit-box-pack: center;
-webkit-box-align: center;
display: -webkit-box; 
```

我无法做到的是让它填满容器的宽度，但至少你可以浏览文档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-23T11:16:38.213

你好我处理了同样的问题。在所有浏览器中，除了 safari 浏览器外，我嵌入 PDF 都没有问题。

我在此网页上找到了解决方案并为我工作 - [https://www.labnol.org/embed-pdf-200208](https://www.labnol.org/embed-pdf-200208)

```
<iframe frameborder="0" scrolling="no"
 width="640" height="480"
 src="https://drive.google.com/file/d/<<FILE_ID>>/preview"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-29T11:26:09.297

```
static downloadPdfChromeApp(linkSource: string) {
        // Crea un div y dentro un object para luego destruirlo y abrir una nueva ventana enviando la data
        const divpdf = document.createElement('div');
        divpdf.innerHTML = '<div style="display:none;position:absolute">' +
            '<object  style="display:none;" id="docuFrame" type="application/pdf" width="1px" height="1px" data="' +
            linkSource + '"></object></div>';
        document.firstElementChild.appendChild(divpdf);
        const frame = document.getElementById('docuFrame') as HTMLObjectElement;
        window.open(frame.data);
        divpdf.remove();
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-16T05:52:15.760

如果您只想有选择地使用嵌入，另一种解决方案（无需编码）是使用 Google。

1.  将您的 pdf 存储在您的 Google 云端硬盘中
2.  用预览打开它。
3.  从三个项目的子菜单中选择“在新窗口中打开”。
4.  在新窗口的三个项目的子菜单中选择“嵌入项目”。
5.  复制 iframe 代码并将其粘贴到您的页面中。

[在这里](https://geniallysupport.zendesk.com/hc/en-us/articles/115003455292-Embed-a-PDF)您还可以找到详细说明，在第 12 点下您可以看到 iframe 代码。

[![示例，但在德语中](https://i.stack.imgur.com/Tx4QE.png)](https://i.stack.imgur.com/Tx4QE.png)

# objective-c - 头文件不显示在xcode项目中

> ID：15854539
> 
> 赞同：1
> 
> 时间：2013-04-06T18:32:30.993
> 
> 标签：objective-c, xcode

我是可可开发的新手，我还没有习惯。

使用eclipse进行java开发时，如果附上源文件，我们可以看到所有添加的jars源文件。

但是在xcode中，我们添加了一个框架比如“Cocoa.framework”，我们只能看到一个Cocoa.h文件。例如：我从 github 克隆了“Sonora”源代码进行学习。有一条线

```
#import "SNRFileCopyManager.h" 
```

存在于 SNRFileImportOperation.h 文件中

SNRFileImportOperation.h 和 SNRFileCopyManager.h 都可以在 Sonora/Classes 目录中找到。但是，我只能在 xcode 项目中看到 SNRFileImportOperation.h 文件，它们一起工作得很好，为什么这个非第三方头文件不显示在它自己的项目中？

我对依赖设置和标头搜索路径有所了解。有人给我一些指导或一些代码管理的参考吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:57:33.663

找到该文件`SNRFileCopyManager.h`是因为它位于*包含*搜索路径之一中。如果您在 Xcode 中选择一个头文件并查看右侧的信息面板，您会发现它实际上并不属于任何目标，无论如何它们都会或多或少地显示出来。但是，构建框架时，您可以在构建时选择要包含在框架中的头文件。因此，您只需将头文件拉入 Xcode 即可。

![在此处输入图像描述](https://i.stack.imgur.com/xmYZe.png)

# c++ - 在 Vector 中查找值的索引，最接近输入

> ID：15854542
> 
> 赞同：3
> 
> 时间：2013-04-06T18:32:46.587
> 
> 标签：c++, search, vector, c++11, std

是否有一种有效的方法可以找到向量中最接近参考值的值的索引？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T18:41:44.123

在计算上，如果向量没有排序，你不能期望任何小于 O(n) 的值，这可能会也可能不会满足你的期望。如果没有，您应该更改数据结构。如果是这样，您可以这样使用`std::min_element`：

```
#include <vector>
#include <algorithm>
#include <iostream>

int main()
{
    int refElem = 42;
    std::vector<int> v{1, 5, 36, 50};
    auto i = min_element(begin(v), end(v), [=] (int x, int y)
    {
        return abs(x - refElem) < abs(y - refElem);
    });

    std::cout << std::distance(begin(v), i); // Prints 2
} 
```

另一方面，如果向量已排序，则可以使用`std::lower_bound()`和`std::upper_bound()`，它具有对数复杂度。

如果您认为复杂性是性能问题，**请在决定更改数据结构之前进行一些测量**。由于向量将它们的元素存储在内存的连续区域中，因此导致高速缓存命中率的线性搜索通常会优于计算效率更高的算法，该算法在内存中到处分配其元素，从而导致频繁的缓存未命中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:05:19.130

1.  看起来线性搜索是您的选择（至少对于未排序的向量。看起来排序向量只是为了搜索没有意义。

2.  一般来说，一切都取决于你在“最近”下的意思。这个“最接近”可能应该作为一元谓词来实现。如果元素相等，谓词应该返回类似 0 的值，并且某个值越大，元素与引用的距离越小。

3.  正如我从 <algorithm> 中看到的那样，最接近您需要的算法是[std::min_element](http://www.cplusplus.com/reference/algorithm/min_element/)但您不仅需要范围参数，还需要参考元素（或确定要引用的元素“多近”的谓词。

4.  可能您可以通过检查元素是否相等以及如果相等则打破循环获得一些好处。

# dart - 如何使用 Dart 构建枚举？

> ID：15854549
> 
> 赞同：53
> 
> 时间：2013-04-06T18:33:06.150
> 
> 标签：dart

Dart 语言没有枚举（还没有？？）。至少在语言特性出现之前，构造枚举的正确或惯用方式是什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-06T18:33:06.150

**Dart 现在支持枚举**。

该答案的其余部分适用于 Dart <= 1.8。如果使用 > 1.8，请使用 Dart 对枚举的正式支持（在另一个答案中解释）。

确实，Dart 语言（还没有？）没有枚举。它有一个[未解决](https://code.google.com/p/dart/issues/detail?id=88)的问题。

同时，这里有一个惯用的 Dart 片段来创建您自己的枚举。

```
class Enum {
  final _value;
  const Enum._internal(this._value);
  toString() => 'Enum.$_value';

  static const FOO = const Enum._internal('FOO');
  static const BAR = const Enum._internal('BAR');
  static const BAZ = const Enum._internal('BAZ');
} 
```

使用 const 构造函数意味着您可以在开关中使用此枚举。这是一个例子：

```
class Fruits {
  final _value;
  const Fruits._internal(this._value);
  toString() => 'Enum.$_value';

  static const APPLE = const Fruits._internal('APPLE');
  static const PEAR = const Fruits._internal('PEAR');
  static const BANANA = const Fruits._internal('BANANA');
}

void main() {
  var yummy = Fruits.BANANA;

  switch (yummy) {
    case Fruits.APPLE:
      print('an apple a day');
      break;
    case Fruits.PEAR:
      print('genus Pyrus in the family Rosaceae');
      break;
    case Fruits.BANANA:
      print('open from the bottom, it is easier');
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-11-19T20:16:20.257

使用 r41815 Dart 获得了原生 Enum 支持，请参阅[http://dartbug.com/21416](http://dartbug.com/21416)并且可以像这样使用

```
enum Status {
  none,
  running,
  stopped,
  paused
}

void main() {
  print(Status.values);
  Status.values.forEach((v) => print('value: $v, index: ${v.index}'));
  print('running: ${Status.running}, ${Status.running.index}');
  print('running index: ${Status.values[1]}');
} 
```

> [Status.none，Status.running，Status.stopped，Status.paused]
> 值：Status.none，索引：0
> 值：Status.running，索引：1
> 值：Status.stopped，索引：2
> 值：Status.paused，索引：3
> 运行：Status.running，1
> 运行索引：Status.running

一个限制是不可能为枚举项设置自定义值，它们会自动编号。

本草案中的更多详细信息[https://www.dartlang.org/docs/spec/EnumsTC52draft.pdf](https://www.dartlang.org/docs/spec/EnumsTC52draft.pdf)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-06T19:50:57.850

[我在Dart Web Toolkit](http://www.dartwebtoolkit.com)中使用了更简单的 Enum 类版本：

```
/**
 * Emulation of Java Enum class.
 *
 * Example:
 *
 * class Meter<int> extends Enum<int> {
 *
 *  const Meter(int val) : super (val);
 *
 *  static const Meter HIGH = const Meter(100);
 *  static const Meter MIDDLE = const Meter(50);
 *  static const Meter LOW = const Meter(10);
 * }
 *
 * and usage:
 *
 * assert (Meter.HIGH, 100);
 * assert (Meter.HIGH is Meter);
 */
abstract class Enum<T> {

  final T _value;

  const Enum(this._value);

  T get value => _value;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-06T20:54:48.890

我喜欢枚举的顶级常量。您可以使用导入来修复任何冲突。这使得使用枚举不那么冗长。

IE

```
if (m == high) {} 
```

代替：

```
if (m == Meter.high) {} 
```

枚举定义：

```
class Meter<int> extends Enum<int> {
   const Meter(int val) : super (val);
}

const Meter high = const Meter(100);
const Meter middle = const Meter(50);
const Meter low = const Meter(10); 
```

# c# - C# 列出对象

> ID：15854551
> 
> 赞同：1
> 
> 时间：2013-04-06T18:33:05.963
> 
> 标签：c#, list, pointers

我有一个我制作的 Character 对象列表和一个可以包含一个字符的 Cells 列表。是否可以将我的角色对象添加到列表中并分配给一个单元格，并在派对列表或单元格中对其进行更改以在两个地方影响对象？我真的不知道指针将如何解决这个问题。我想将会发生的事情是列表中的对象是与分配给单元格的对象不同的对象。

抱歉，我的代码非常大，所以我不想在这里全部发布，但我正在谈论的 Character 是我制作的自定义类。我想我的问题实际上可以归结为两个问题。当我将某些东西放入列表时，就是改变指针指向的位置，或者是一个新对象。如果我将某些内容添加到列表然后将其分配给角色对象的另一个实例，我也可以有多个指针，这将引用来自单元对象的角色与从另一个列表对象引用我的角色相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:36:18.873

只要您`Character`是一个类（即[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)），那么您实际上就是在存储对`Character`对象的引用。当通过任何其他引用访问对象时，您通过对对象的引用对对象所做的任何更改都将是可见的。

例子：

```
class Character
{
    public string Name { get; set; }
}

var c = new Character();
var c2 = c;
var arr1 = new Character[] { c };
var arr2 = new Character[] { c };

arr1[0].Name = "Foo";
Console.WriteLine(arr2[0].Name); // "Foo"
Console.WriteLine(c2.Name); // also "Foo" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:36:11.853

所以基本上你想把 Characters 当作一个引用类型。

只需创建您自己的包装对象，其中包含一个字符。

```
public MyCharacter
{
public char character{get;set;}
} 
```

对象是通过引用来处理的，所以这应该对你有用。

# ios - 无法使用 MFSidemenu 加载 viewController

> ID：15854552
> 
> 赞同：0
> 
> 时间：2013-04-06T18:33:07.170
> 
> 标签：ios, objective-c, xcode

我正在使用情节提要构建一个应用程序。我正在使用 MFSidemenu 库来创建像 facebook 应用程序这样的侧边菜单。侧边菜单正确显示，但是当我点击侧边菜单上的单元格时，菜单不会消失，也不会加载另一个视图控制器。请注意，我正在使用情节提要。

谢谢你。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
AlbumsTableVIewController *AlbumsViewController = [storyboard instantiateViewControllerWithIdentifier:@"Albums"];

AlbumsViewController.title=[NSString stringWithFormat:@"Demo Controller #%d-%d", indexPath.section, indexPath.row];

NSArray *controllers = [NSArray arrayWithObject:AlbumsViewController];
self.sideMenu.navigationController.viewControllers = controllers;
[self.sideMenu setMenuState:MFSideMenuStateClosed];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:14:33.960

你必须为你的`MainMenu`控制器实现委托方法，因为如果你像上面那样放置你的代码，它会改变你的 sideMenu 而不是你的`MainMenu`。我在这里使用故事板。这是我的代码`MainMenuController`

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
UINavigationController *navigationController = (UINavigationController *)self.navigationController;

UIViewController *leftSideMenuViewController = [storyboard instantiateViewControllerWithIdentifier:@"leftSideMenuViewController"];
UITableViewController *SideMenu=(UITableViewController *)leftSideMenuViewController;
SideMenu.delegate=self; //here is the delegate
[MFSideMenu menuWithNavigationController:navigationController
                  leftSideMenuController:SideMenu
                 rightSideMenuController:nil]; 
```

所以你需要`viewController`从这里连接你的，通过委托模式导航。

# javascript - Div-Container 到达页面左边框时粘滞，被跟随容器推到视线之外

> ID：15854557
> 
> 赞同：1
> 
> 时间：2013-04-06T18:34:04.783
> 
> 标签：javascript, jquery, html, css, sticky

我有点在整个互联网上搜索这个，希望你们能帮助我。

我有一个并排的 div 容器（图像）“条纹”，整体比视口宽，因此它们强制水平滚动。在一定数量的容器之后应该有“特殊容器”——当它们到达视口的左边界时——粘在左边（所以它们基本上是固定的）。随着滚动的继续，下一个“特殊容器”接近，它将第一个推到视线之外并取而代之，所以它也粘在左边，依此类推。

基本上我想实现这样的东西，但水平：http: [//jsfiddle.net/f3y9s/1/](http://jsfiddle.net/f3y9s/1/)

我的 HTML：

```
<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>-</title>
    <link rel="stylesheet" type="text/css" media="screen" href="css/projekt.css" title="nofilter">
    <script src="js/jquery-1.2.6.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jquery.serialScroll-1.2.2-min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/waypoints.js"></script>
    <script src="js/waypoints-sticky.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(function(){
            $(".post").wrapInner("<table><tr>");
            $("img").wrap("<td>");
            });

        $(function(){
            $("#projektimg").wrapInner("<table><tr>");
            $(".post").wrap("<td>");
            });
    </script>

    <!--<script type="text/javascript" charset="utf-8">
    $('.my-sticky-element').waypoint(function(direction) {
  $body.toggleClass(this.id + '-visible', direction === 'right');
}, {
  horizontal: true
});</script>-->

<script>$(document).ready(function () {
    $('.my-sticky-element').waypoint(function (direction) {
        if (direction=='right')
          $('.my-sticky-element').addClass('fixed');
        else {
           $('.my-sticky-element').removeClass('fixed');  
        }
    }, {
        horizontal: true

});
});</script>

</head>
<body>
        <div class="my-sticky-element"> 
            project description goes here
        </div>

<div id="projektimg">   
        <div class="post">
                <img src="img/1.jpg"/>      
                <img src="img/2.jpg"/>
                <img src="img/3.jpg"/>
                <img src="img/4.jpg"/>
                <img src="img/5.jpg"/>  
        </div>
</div>
</body>
</html> 
```

我的 CSS：

```
/* Global */

/* Reset */

html, body, div, span, applet, object, iframe,h1, h2, h3, h4, h5, h6, p, blockquote, pre,a, abbr, acronym, address, big, cite, code,del, dfn, em, font, img, ins, kbd, q, s, samp,small, strike, strong, sub, sup, tt, var,b, u, i, center,dl, dt, dd, ol, ul, li,fieldset, form, label, legend,table, caption, tbody, tfoot, thead, tr, th, td {margin: 0;padding: 0;border: 0;outline: 0;font-size: 100%;vertical-align: baseline;background: transparent;}body {line-height: 1;}ol, ul {list-style: none;}blockquote, q {quotes: none;}/* remember to define focus styles! */:focus {outline: 0;}/* remember to highlight inserts somehow! */ins {text-decoration: none;}del {text-decoration: line-through;}/* tables still need 'cellspacing="0"' in the markup */table {border-collapse: collapse;border-spacing: 0;}

* {
    padding:0;
    margin:0;
    border: none;
    }

body  {
    background-color: #ffffff;
    font-family: Helvetica, sans-serif; 
    font-size: 11px;
    color: #000;
    }

a {
    text-decoration: none;
    color: #282828;
    -webkit-transition: color .2s;
    -moz-transition: color .2s;
    -o-transition: color .2s;
    -ms-transition: color 0,2s;
    transition: color .2s;
    }

a:hover {
    color: #ff8855;
    }

/* Projekt, Galerie */

#projektimg { 
    position: absolute;
    z-index: 1;
    top: 50%;
    margin-top: -250px;
    overflow-x: auto; 
    height: 510px;
    float: left;
    }                         

td  { 
    vertical-align: top; 
    padding: 0; 
    margin: 0;
    }

table, tbody { 
    padding: 0; 
    margin: 0;
    }

tr {
    margin: 0;
    padding: 0;
    }

/* Sticky */

.my-sticky-element {
    position: absolute;
    top: 50%;
    margin-top: -250px;
    overflow-x: auto; 
    height: 440px;
    width: 210px;
    background-color: #ff0000;
    padding: 30px 30px 30px 30px;
    float: left;
    z-index: 5;
    }

.my-sticky-element.fixed {
    position: fixed;
    left: 0;
    z-index: 100;
    } 
```

ps：我是 javascript 的血腥初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:10:00.230

我建议你使用 jquery waypoints 插件：

[http://imakewebthings.com/jquery-waypoints/#shortcuts-examples](http://imakewebthings.com/jquery-waypoints/#shortcuts-examples)

这是一个演示：http: [//jsfiddle.net/lucuma/UAGdf/7/](http://jsfiddle.net/lucuma/UAGdf/7/)

Javascript：

```
$(document).ready(function () {
$('.container div:eq(1)').waypoint(function (direction) {
    //alert('here');
    if (direction=='right')
      $('.toggleme').addClass('fixed');
    else {
       $('.toggleme').removeClass('fixed');  
    }
}, {
    //offset: $.waypoints('viewportHeight') / 2,
    horizontal: true

});
}); 
```

HTML：

```
<div class="container">
    <div id="div1">div 1</div>
    <div id="div2">div 2 <div class="toggleme">hmm</div></div>
    <div id="div3"><div class="toggleme">hmm</div></div>
    <div id="div4">div 4</div>
</div> 
```

CSS：

```
.container>div {
    width:500px;
    height:200px;
    display:block;
    border:1px solid black;
    float:left;   
 }
.toggleme.fixed {position:fixed; left:0;top:0;z-index:100;background-color:blue}
.container {width: 5000px} 
```

请注意，您可以使用 div1,div2,div3 轻松执行此操作，但这仅取决于您的实现细节。

# vba - VBA excel 2010使用工作表名称并删除空白工作表

> ID：15854558
> 
> 赞同：1
> 
> 时间：2013-04-06T18:34:17.293
> 
> 标签：vba, excel

我想知道为什么 VBA 在尝试编写此代码时告诉我缺少 SUB 函数。目的应该是当工作表被称为 NVT 时，代码应该跳过任何操作并转到下一个将被激活的工作表（在下一个命令中）。在此操作结束时，我应该删除没有填写“特定名称”或“NVT”的每张空白表。没有此选项，公式运行良好。我保存这段代码没有问题，公式本身也没有问题。欢迎提出任何建议。我认为尚未发布此威胁。如果您需要更多信息，请告诉我。原始代码很长，只想说明如何解决这个问题。感谢谁将回答这个威胁。

```
Sub Printtabs()
' Print
ThisWorkbook.Activate
If ThisWorkbook.Sheets(7) = ("NVT") Then Skip
If ThisWorkbook.Sheets(7) = ("NAME SPECIFIC 1") Then
'process formula
End If
If Thisworkbook.Sheets (8) = ("NVT) Then Skip
If Thisworkbook.Sheets (8) = ("NAME SPECIFIC 2") Then
'process formula
End If
'then I should find the way to delete every "blanc" sheets in this workbook (becouse I skipped before and there will be blanc sheets) and save
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:56:46.920

你[不需要](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select/10718179#10718179)使用`.Activate`. 您可以直接使用工作表。此外，在删除工作表和关闭事件时，请始终使用正确的错误处理。

这是你正在尝试的吗？

```
Dim ws As Worksheet

Sub Printtabs()
    On Error GoTo Whoa

    For Each ws In ThisWorkbook.Worksheets
        If ws.Name = "NAME SPECIFIC 1" Then
            '~~> Process Formula
        ElseIf ws.Name = "NAME SPECIFIC 2" Then
            '~~> Process Formula
        Else
            If ws.Name <> "NTV" And WorksheetFunction.CountA(ws.Cells) = 0 Then
                Application.DisplayAlerts = False
                ws.Delete
                Application.DisplayAlerts = True
            End If
        End If
    Next ws

LetsContinue:
    Application.DisplayAlerts = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:54:57.583

所以，我想出了如何删除我相信的空白表。只剩下 sheetnames 的问题。这部分代码我将在所有已处理公式的末尾运行。希望有人可以帮助我....

```
Dim ws As Worksheet
For Each ws In Worksheets
    If WorksheetFunction.CountA(ws.Cells) = 0 Then
        Application.DisplayAlerts = False
        ws.Delete
        Application.DisplayAlerts = True
    End If
Next ws 
```

# bash - 在 Bash 中循环目录

> ID：15854559
> 
> 赞同：17
> 
> 时间：2013-04-06T18:34:17.670
> 
> 标签：bash

我有一个关于 bash 如何工作的基本问题，以及一个相关的实际问题。

基本问题：假设我在一个包含三个子目录的目录中：a、b 和 c。

代码

```
for dir in $(ls)
do 
    echo $dir
done 
```

吐出：

```
a b c
a b c
a b c 
```

即，`dir`始终将所有文件/目录的列表存储在我的`cwd`. 我的问题是：为什么这会很方便？在我看来，一次存储每个元素更加有用和直观`dir`，即我想要输出

```
a
b
c 
```

此外，根据答案之一 - 使用是错误的`for dir in $(ls)`，但是当我使用时，`for dir in $(ls -l)`我会得到更多的副本`a b c`（超过 cwd 中的目录/文件）。这是为什么？

我的第二个问题很实用：我如何遍历所有`cwd`以大写 W 开头的目录（不是文件！）？我从

```
for dir in `ls -l W*` 
```

但这失败了，因为a）问题1和b）的原因是因为它不排除文件。建议表示赞赏。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-06T18:40:36.937

永远不要解析这样的输出`ls`（[为什么你不应该解析 ls(1) 的输出](http://mywiki.wooledge.org/ParsingLs)）。

另外，您的语法错误。你不是说`()`，你是说`$()`。

话虽这么说，要遍历以 W 开头的目录，您将执行（或使用`find`命令，具体取决于您的方案）：

```
for path in /my/path/W*; do
    [ -d "${path}" ] || continue # if not a directory, skip
    dirname="$(basename "${path}")"
    do_stuff
done 
```

至于你从邪恶的 ls 循环中得到的输出，它不应该是那样的。这是预期的输出，并说明了为什么您不想首先使用 ls ：

```
$ find
.
./c
./a
./foo bar
./b

$ type ls
ls is hashed (/bin/ls)

$ for x in $(ls); do echo "${x}"; done
a
b
c
foo
bar 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-09T02:30:59.320

这应该有效：

```
shopt -s nullglob   # empty directory will return empty list
for dir in ./*/;do
    echo "$dir"         # dir is directory only because of the / after *
done 
```

要在子目录中递归，请使用`globstar`：

```
shopt -s globstar nullglob
for dir in ./**/;do
    echo "$dir" # dir is directory only because of the / after **
done 
```

您也可以使用以下方法使@Adrian Frühwirths 的方法递归到子目录`globstar`：

```
shopt -s globstar
for dir in ./**;do
    [[ ! -d $dir ]] && continue # if not directory then skip
    echo "$dir"
done 
```

[来自 Bash 手册：](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html)

> 全球星
> 
> 如果设置，文件名扩展上下文中使用的模式 '**' 将匹配所有文件以及零个或多个目录和子目录。如果模式后跟“/”，则只有目录和子目录匹配。
> 
> 空球
> 
> 如果设置，Bash 允许不匹配文件的文件名模式扩展为空字符串，而不是它们本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:38:21.670

好吧，你知道你所看到的不是你所期望的。您看到的输出不是来自 echo 命令，而是来自 dir 命令。

尝试以下操作：

```
ls -1 | while read line; do 

   if [-d "$line" ] ; then 
      echo $line
   fi

done

for files in $(ls) ; do

   if [-d "$files" ] ; then 
      echo $files
   fi

done 
```

# android - 没有 XML android 的 PopupWindow

> ID：15854562
> 
> 赞同：0
> 
> 时间：2013-04-06T18:34:42.307
> 
> 标签：android, popupwindow

需要动态创建PopupWindow，不需要popup.xml。

我的视图很少，需要创建弹出窗口，其中将包含按下的视图

# symfony - Symfony：将对象传递给控制器 方法

> ID：15854565
> 
> 赞同：3
> 
> 时间：2013-04-06T18:35:06.030
> 
> 标签：symfony, controller, doctrine-orm, entity

我正在按照本指南创建 RESTFUL api： [http ://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)

在 POST 部分，它使用对象 User 作为其编辑方法的输入。我正在尝试对我的控制器类执行相同的操作，但出现以下错误：

> 无法从请求信息中猜出如何获取Doctrine实例

有人可以帮助我吗？谢谢

**更新：**

现在该方法的定义如下所示：

```
 /**
   * @Route("/rest/categories/{id}")
   * @ParamConverter("category", class="TouristAppCoreBundle:Category")
   * @Template()
   */
  public function rest_editAction(Category $category) 
```

# c++ - 在eclipse C++中无法解析断言函数

> ID：15854571
> 
> 赞同：1
> 
> 时间：2013-04-06T18:35:33.330
> 
> 标签：c++, assert

伙计们！我正在尝试使用断言做一些测试功能：

测试.h

```
#include <assert.h>

void testTheMedicine(){
    Medicine m = Medicine(1, "para", 30, 40);
    assert(m.getName()="para");// Function 'assert' could not be resolved

} 
```

为什么我会收到这个错误？我正在为 C++ 使用 Eclipse

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:38:07.317

这不是您在 C++ 中比较字符串的方式。

而不是`=`运算符，您应该使用`==`：

`m.getName()="para"`应该`m.getName() == "para"`

# javascript - 用于 javascript 修改的 Google 开发人员工具不适用于长“js”文件

> ID：15854573
> 
> 赞同：0
> 
> 时间：2013-04-06T18:35:42.253
> 
> 标签：javascript, code-injection

我正在尝试编辑一个网站，其 UI 缺少​​我想要的属性。我可以使用 KeyUp 或 KeyDown（键盘键）浏览项目。但是，当它滚动窗口时，它会执行不必​​要的动画，我想删除此功能。我使用 Google Developer Tools 浏览和编辑主要的 javascript 文件，但即使我编辑代码，它也不会改变网页的功能。我认为这是因为脚本文件写在一行中，因此无法在 Source 选项卡的“不漂亮”（或正常）模式下正确显示，我可以在其中编辑代码。我怀疑这是因为代码显示直到它以漂亮模式结束，但在非漂亮模式下，源代码在文件结束之前的某个地方被剪切。

有没有办法克服这个问题？我要修改的网站如下： [https ://www.gqueues.com/main](https://www.gqueues.com/main)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:04:41.563

如果您编辑 javascript，除非它被调用，否则它不会执行，因此您可能绑定到键盘事件，但代码永远不会被执行，因为它在 js 加载时执行，而不是在编辑时执行。

如果您无法在服务器上编辑文件，我建议您使用控制台添加您想要的功能。

# c - Codeblocks project.exe 已停止工作 C

> ID：15854577
> 
> 赞同：1
> 
> 时间：2013-04-06T18:36:19.767
> 
> 标签：c, exe, codeblocks

每次我构建和运行我的项目文件时，一旦我与之交互，它就会崩溃。

```
#include <stdio.h>

int main()  
{
    float complexnumber, a, b, r, j, theta;

    j = -1;  
    complexnumber = a+b*j;

    printf ("Please enter intput A and B in the form of a+bj\n");

    printf ("Input A:");  
    scanf ("%f" , a);

    printf ("Input B:");  
    scanf ("%f" , b);

    theta = atan (a/b);  
    printf ("Theta=\n" , theta);

    r = sqrt (pow(a, 2) + pow(b , 2));   
    printf ("R=\n" , r);

    return 0;
} 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:43:10.923

包含头文件可能是个好主意`<math.h>`。

你的`printf()`陈述

```
printf ("Theta=\n" , theta); 
```

看起来不正确，

它应该是，

```
printf ("Theta=%f\n" , theta); 
```

相似地，

```
printf ("R=%f\n" , r); 
```

你的`scanf()`说法也是错误的，应该是

```
scanf("%f",&a); 
```

该行将`complexnumber = a+b*j;`垃圾值分配给`complexnumber`两者`a`并且`b`未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:39:20.447

```
scanf ("%f" , a); 
```

`scanf`需要一个指向它应该填充的变量的指针，所以它必须是

```
scanf ("%f" , &a); 
```

同样对于`b`.

# mysql - 为 mysqldump 创建一个 cron 作业

> ID：15854579
> 
> 赞同：5
> 
> 时间：2013-04-06T18:36:24.927
> 
> 标签：mysql, ubuntu, cron

我正在尝试为数据库备份创建一个 cron 作业。

这是我到目前为止所拥有的：

mysqldump.sh

```
 mysqldump -u root -ptest --all-databases | gzip > "/db-backup/backup/backup-$(date)" 2> dump.log

 echo "Finished mysqldump $(date)" >> dump.log 
```

定时任务：

```
 32 18 * * * /db-backup/mysqldump.sh 
```

我遇到的问题是作业没有通过 cron 执行，或者当我不在目录中时。

有人可以请教。我的路径不正确吗？

此外，我不确定以下行是否会将错误输出到 dump.log：

```
 mysqldump -u root -ptest --all-databases | gzip > "/db-backup/backup/backup-$(date)" 2> dump.log 
```

什么有效：

```
 mysqldump -u root -ptest --all-databases | gzip > "../db-backup/backup/backup-$(date).sql.gz" 2> ../db-backup/dump.log

 echo "Finished mysqldump $(date)" >> ../db-backup/dump.log 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T19:29:30.070

您可以检查几件事，但更多信息总是更有帮助（文件的权限和位置、整个文件内容等）。

1.  为您的环境使用[Shebang 语法](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)`mysqldump.sh`作为文件的开头永远不会有什么坏处。我冒昧地猜测就足够了。`#!/bin/bash`
2.  而不是`mysqldump -u ....`使用绝对路径`/usr/bin/mysqldump`（或系统上的任何位置）。在任何形式的脚本中，绝对路径总是一个好主意，因为很难说用户是否与您拥有相同的环境。

至于将错误存储在 dump.log 中，我认为您的语法不正确。我相当确定您将错误从管道`gzip`传输到 dump.log，而不是从`mysqldump`. 这似乎是一个[相当普遍的问题](https://stackoverflow.com/questions/14119520/run-mysqldump-via-php-exec-pipe-to-gzip-return-mysqldump-stderr)，它的答案是`mysqldump $PARAMS | gzip -c dump-$(date)`

# c# - c# XMPP不连接

> ID：15854585
> 
> 赞同：1
> 
> 时间：2013-04-06T18:36:52.400
> 
> 标签：c#, xmpp

我想在 Windows 7 中使用 c#.net 学习 XMPP，所以我下载了 agsXMPP 库和 jspon，我编写以下代码只是为了测试，但我无法发送信息：

```
using System;
using System.Collections.Generic;

using System.Linq;
using System.Text;
using agsXMPP;
using agsXMPP.protocol.client;
using agsXMPP.Collections;
using agsXMPP.protocol.iq.roster;
using System.Threading;

namespace ConsoleApplication1

{
    class Program
    {
    static void xmpp_OnLogin(object sender)
    {
        Console.WriteLine("Logged In");
    }

    static void Main(string[] args)
    {
        Console.WriteLine("Login");
        Console.WriteLine();
        Console.WriteLine("JID: ");
        string JID_Sender = Console.ReadLine();
        Console.WriteLine("Password: ");
        string Password = Console.ReadLine();

        Jid jidSender = new Jid(JID_Sender);
        XmppClientConnection xmpp = new XmppClientConnection(jidSender.Server);

        xmpp.Open(jidSender.User, Password);
        xmpp.OnLogin += new ObjectHandler(xmpp_OnLogin);

        Presence p = new Presence(ShowType.chat, "Online");
        p.Type = PresenceType.available;
        xmpp.Send(p);

    }

} 
```

}

我输入我的 id（刚刚为测试创建）用户名：belkacemsend@jabber.org

这是输出：

```
Exception:Thrown: "Object reference not set to an instance of an object." (System.NullReferenceException)
A System.NullReferenceException was thrown: "Object reference not set to an instance of an object."

Exception:Caught: "Object reference not set to an instance of an object." (System.NullReferenceException)
A System.NullReferenceException was caught: "Object reference not set to an instance of an object."

Exception:Thrown: "A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied" (System.Net.Sockets.SocketException)
A System.Net.Sockets.SocketException was thrown: "A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied"

Exception:Caught: "A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied" (System.Net.Sockets.SocketException)
A System.Net.Sockets.SocketException was caught: "A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:47:59.567

您的问题是您需要等待 OnLogin 将被提出

```
xmpp.Open(jidSender.User, Password);
xmpp.OnLogin += new ObjectHandler(xmpp_OnLogin);

// Wait here

Presence p = new Presence(ShowType.chat, "Online");
p.Type = PresenceType.available;
xmpp.Send(p); 
```

codeproject.com 上的这篇文章提供[了使用 agsXMPP 库创建 Jabber 客户端的](http://www.codeproject.com/Articles/21267/Creating-a-Jabber-Client-using-the-agsXMPP-Library)解决方案，虽然不是最好的，但它适合入门。

```
bool isLoggedIn = false;
xmpp.OnLogin += (sender) => { isLoggedIn = true; };
xmpp.Open(jidSender.User, Password);

while (isLoggedIn == false) 
{ 
    System.Threading.Thread.Sleep(100); 
}

Presence p = new Presence(ShowType.chat, "Online");
p.Type = PresenceType.available;
xmpp.Send(p); 
```

# c++ - 在无法访问的语句中创建变量是明确定义的行为吗？

> ID：15854588
> 
> 赞同：2
> 
> 时间：2013-04-06T18:37:39.650
> 
> 标签：c++, memory, c++11, switch-statement

我有一个程序，其`switch`语句类似于：

```
switch(n)
{
case 0:
    /* stuff */
    break;

    int foo;
case 1:
    foo = 5;
    break;
case 2:
    foo = 6;
    break;
} 
```

注意和`int foo;`之间。这个声明是无法到达的：如果你遍历程序，你永远不会跨过它。`case 0``case 1`

使用 Clang 编译时没有警告或错误，但是当我运行它时它似乎被抬高了（尽管这可能是由于其他原因）。

在不可访问的语句中声明一个变量并在可访问的语句中使用它是明确定义的行为，它会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T18:50:51.473

只要变量具有微不足道的构造，并且具有（大约）与在更大范围内声明变量相同的效果，它就是明确定义的行为。

如果需要任何初始化，您将收到错误消息。

第 6.7 节说

> 可以转移到一个块中，但不能通过初始化绕过声明的方式。除非变量具有标量类型、具有普通默认构造函数和普通析构函数的类类型、以及这些类型之一的 cv 限定版本，或上述类型之一的数组，并且在没有初始化程序的情况下声明。

# php - 识别未使用变量的最佳方法

> ID：15854592
> 
> 赞同：1
> 
> 时间：2013-04-06T18:37:51.060
> 
> 标签：php

我有使用一些变量的代码。例子：

```
$name = "someName";
$output = sprintf($doingText, $name); // $doingText is here undefined 
```

我想在代码中搜索肯定未定义的变量（某种静态代码分析）。

这些变量应该都是一些语言文本。在那之前没问题，但我不想手动列出哪些变量存在：我想获取变量名，然后制作一些 html 表单，我可以在其中看到它们并以变量名-文本对的形式放入数据库。

问题是：如何搜索它们？（我还没有找到任何能够通过谷歌搜索在 PHP 中执行此操作的脚本......）

（ps：我不知道搜索它们的最佳方法是什么，因为可能不仅有 = 的分配，还有`foreach ($arr as $val)`等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:51:45.153

为什么不使用像 NetBeans 这样的 IDE？这将主动检查您是否有未使用的变量。因此，当您编码时，它会实时向您显示，而不是完成脚本并发现您有 x 数量的错误/未使用的变量。只是思考的食物。

# java - 睡眠时启动画面为空白

> ID：15854599
> 
> 赞同：0
> 
> 时间：2013-04-06T18:38:29.497
> 
> 标签：java, android, sleep, wait, splash-screen

我试图让启动布局出现 5 秒钟，然后切换到主菜单布局。屏幕空白约 5 秒，然后弹出主菜单布局。如果我只是在不睡觉的情况下运行启动布局，它运行得很好，所以我认为这不是问题。有任何想法吗？

```
 @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        try
        {
            Thread.sleep(5000);
        }
        catch (InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mainMenu();
    }

    private void mainMenu()
    {
        setContentView(R.layout.mainmenu);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:48:13.677

这是因为您正在主 UI 线程上执行 Thread.sleep .. 不推荐..

改用定时器，使用下面的代码..

```
private Timer timer;
private Handler handler;
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    handler = new Handler();

        timer = new Timer();
        TimerTask timerTask = new TimerTask() {
        @Override
        public void run() {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    YourActivity.this.setContentView(R.layout.mainmenu);
                }
            });

        }
    };
    timer.schedule(timerTask, 5000);
} 
```

# android - Camerainfo.orientation 给出了错误的答案

> ID：15854600
> 
> 赞同：11
> 
> 时间：2013-04-06T18:38:31.833
> 
> 标签：android, android-camera

Android 提供[此代码](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)以使所有相机和屏幕方向的相机预览正面朝上：

```
public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 } 
```

在最简单的情况下，当屏幕正面朝上纵向（`rotation`为 0）并带有后置摄像头时，这会减少到`result = info.orientation`. 根据文档， info.orientation 是

> 相机图像需要顺时针旋转的角度，以便它以自然方向正确显示在显示器上。它应该是 0、90、180 或 270。

这意味着`info.orientation`应该是来自相机的原始图像*逆时针旋转*的量。

在三星 Galaxy S II 的后置摄像头上，`info.orientation`为 90，与后置摄像头的预期一致。但是，原始相机预览会顺时针旋转 90 度，而不是逆时针旋转。这意味着应用上述代码后，预览出现倒置（180 度）。

**为什么相机报告的方向与其原始图像的实际方向之间存在 180 度的差异？**

这个确切的问题 - 当报告 90 时，相机图像顺时针旋转 90 度- 在[这个问题](https://stackoverflow.com/questions/9055460/is-androids-camerainfo-orientation-correctly-documented-incorrectly-implemente)和[这个](https://stackoverflow.com/questions/13103070/is-the-setdisplayorientation-sample-code-correct?rq=1)`info.orientation`问题中也有报道。

另请参阅[这个可能相关的问题](https://stackoverflow.com/questions/11135166/android-camera-orientation-phone-gives-false-data)。

# css - 我的网站不会显示移动 @Media CSS

> ID：15854615
> 
> 赞同：0
> 
> 时间：2013-04-06T18:39:47.060
> 
> 标签：css, wordpress, mobile

对于我的网站 TheExpeditioner.com，我添加了特定于移动设备的 CSS，开头为：

```
@media only screen and (max-width: 767px) { 
```

我也包含`<meta name="viewport" content="width=device-width, initial-scale=1">`在标题中。

但是，我的网站不会在移动设备中显示移动 CSS。我错过了什么吗？这与 Wordpress 和/或插件有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:50:00.940

这是我现在注意到的一件事

```
@media only screen 
and (min-width : 768px) 
and (max-width : 1024px) 
and (orientation : portrait) { 
```

它位于第 1499 行，并且没有右括号。

# c++ - Linux 上的 dtrace 并不总是在程序退出时删除用户态探测——为什么？

> ID：15854617
> 
> 赞同：2
> 
> 时间：2013-04-06T18:40:13.513
> 
> 标签：c++, c, linux, dtrace

（如果您想了解我是如何安装 dtrace 的，请参阅本文结尾 - 现在我假设您已经安装了它）

我按照以下步骤制作了一个完全没有问题的自定义探针：

**一个**。用我的探针定义创建 thing.d

```
provider thing {
    probe test();
}; 
```

**B.**创建一个简单的 main.cpp

```
#include "thing.h"

int main()
{
    // Fire my probe
    THING_TEST();

    // Something to prevent immediate exit
    for(;;)
        sleep(1); 

    // Bye
    return 0;
} 
```

**C.**编译（但不链接）main.cpp。请注意您必须如何定义 _DTRACE_VERSION，否则您的探针将在 thing.h 中被注释掉。

```
g++ -D _DTRACE_VERSION -c main.cpp -o main.o 
```

**D.**构建探测目标文件（注意你必须包含 main.o 作为其中的一部分）

```
dtrace -G -s thing.d -o thing.o main.o 
```

**E.**将所有内容联系起来

```
g++ main.o thing.o -o thing 
```

问题出在：运行应用程序，并使用 CTRL-C 终止（显然，由于无限循环，应用程序不会自行停止......）。

事实上，这样做几次。

现在，从超级用户终端：

```
# dtrace -l | grep thing
322991 thing28217            thing                              main test
322992 thing28403            thing                              main test
322994 thing28636            thing                              main test 
```

这些家伙只是在闲逛......就像他们从未被取消注册一样。我已经运行“ps”来查看是否有任何带有这些 pid（28217、28403、28636）的过程，不，没有。

有趣的是，如果我从 main.cpp（sleep() 循环）中删除无限循环并让应用程序立即退出，那么探针就会被正确删除。因此，问题似乎与在 sleep() 内部检测到 CTRL-C 有关 - 也许某种 atexit() 处理程序没有被调用？

这是我的系统信息：

```
$ uname -a
Linux beavis 3.5.0-26-generic #42-Ubuntu SMP Fri Mar 8 23:18:20 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

$ g++ --version
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 
```

* * *

**DTRACE 安装**

我没有使用 Ubuntu 附带的默认 dtrace，而是使用我这样安装的 dtrace4linux 东西：

```
http://askubuntu.com/questions/60940/how-do-i-install-dtrace 
```

**注意**：我使用的是 Paul Fox 网站的最新版本：

```
ftp://crisp.dyndns-server.com/pub/release/website/dtrace/dtrace-20130317.tar.bz2 
```

# php - 如何使用php按顺序从目录加载图像？

> ID：15854620
> 
> 赞同：0
> 
> 时间：2013-04-06T18:40:25.077
> 
> 标签：php, image, loading

我有这个很好用的 php 代码，但唯一的问题是从文件夹加载的图像是随机的，我需要它们按顺序以数字方式加载。

`

```
//Open images directory
$dir = opendir("../blogimg/luda_jesus");

//List files in images directoryb
while (($file = readdir($dir)) !== false)
  {
      if(substr( $file, -3 ) == "jpg" )

      {
        echo "<div class='container'><img class='lazy' id='background'  src='../blogimg/loader.gif' data-original='../blogimg/luda_jesus/" . $file . "' width='884' height='587'></div>";

        //echo "<br />";

      }
  }

closedir($dir);

?>` 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:46:00.843

您可以通过以下方式更轻松地做到这一点[`glob`](http://php.net/manual/en/function.glob.php)：

```
$files = glob("../blogimg/luda_jesus/*.jpg");
natsort($files); // can also use other sort functions here, take your pick
foreach ($files as $file) {
    echo '...';
} 
```

我选择[`natsort`](http://www.php.net/manual/en/function.natsort.php)上面的排序函数是因为它会`2.jpg`在之前排序`10.jpg`，而普通`sort`的会做相反的事情。有关更多信息，请参阅[数组排序函数](http://www.php.net/manual/en/array.sorting.php)的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:46:14.747

假设“数字”是指文件名，您可以简单地执行 while 循环并填充数组中的所有文件，对其进行排序，然后加载文件。

例子：

```
//Open images directory
$dir = opendir("../blogimg/luda_jesus");

//List files in images directoryb
while (($file = readdir($dir)) !== false) {
   if(substr( $file, -3 ) == "jpg" ) { 
     $filelist[] = $file;
   }
}

closedir($dir);
sort($filelist);

for($i=0; $i<count($filelist)-1; $i++) {
  echo "<div class='container'>
    <img class='lazy' id='background'  
      src='../blogimg/loader.gif' 
      data-original='../blogimg/luda_jesus/" . $file . "' 
      width='884' height='587'>
   </div>";
} 
```

如果您需要不同的排序方式，请注明。

# php - php中的数字分隔符函数错误

> ID：15854625
> 
> 赞同：0
> 
> 时间：2013-04-06T18:40:41.033
> 
> 标签：php, function, undefined

我写了一个分开数字和插入的函数，每 3 个字符，比如转换`123456789`为`123,456,789`

我的功能正常工作，但是当我在浏览器中使用它时出现 3 错误，我的功能是这样的：

```
function sefr($num){
    array($lnn);
    $len=strlen($num);
    $zc=intval($len/3);
    for ($za=0;$za<$len;$za++){
    $lnn[$za]=substr($num,$za,1);
    }
    for ($zb=0;$zb<$len;$zb++){
        if ($zb==$len-(3*$zc) ){
        if ($zb!=0){
            $lnnn=$lnnn.",$lnn[$zb]";   
        }
        else {
            $lnnn=$lnnn.$lnn[$zb];
        }   
        $zc--;
        }
        else {
            $lnnn=$lnnn.$lnn[$zb];
        }
    }
    return ($lnnn);
} 
```

我得到这个错误：

```
Notice: Undefined variable: lnn in file.php on line 2
Notice: Undefined variable: lnnn in file.php on line 14
Notice: Undefined variable: lnnn in file.php on line 19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:52:13.827

如果这只是您对字符串进行分组的示例，那么您可以使用`chunk_split`

```
echo trim(chunk_split($num, 3, ","),","); //123,456,78 
```

如果不是，如果您正在处理数字，请使用`number_format`

```
echo number_format($num, 0); //12,345,678 
```

请注意 `123,456,78`！=`12,345,678`

# properties - 背景位置仅以像素为单位？

> ID：15854626
> 
> 赞同：0
> 
> 时间：2013-04-06T18:40:43.960
> 
> 标签：properties, background, position

嗨，我真的不知道出了什么问题，我不明白。我正在为背景主体使用多个图像看起来像这样：

```
 body
    {
    background: url('bison.png'),url('ryu.png');
    background-repeat:no-repeat,no-repeat;
    background-position:left bottom,right bottom;
    background-size:200px,200px;
    } 
```

但是不是在底部显示图像，而是在顶部显示？以下是一些屏幕：

[http://i.imgur.com/PHC1kuK.png](http://i.imgur.com/PHC1kuK.png)

现在，我也使用了 % 。同样的问题，假设 20% 50%，h 行 20% 和 v 50% 它应该出现在屏幕左中部的某个地方，但它没有，而是 1/4 的 img 是可见的，其他 3/ 4 隐藏在顶部浏览器部分中的某个位置。它没有将其从顶线推低 50%，而是将其推高了 3%？唯一有效的是像素和负百分比，即-50%，但这是为什么呢？不能使用像素，因为我希望 css 响应各种屏幕分辨率。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:53:56.787

指定一些高度：

```
body {
   height: 500px;
   background: url('bison.png'),url('ryu.png');
   background-repeat:no-repeat;
   background-position:left bottom,right bottom;

} 
```

# c++ - C ++：将字符串解析为双精度的最佳方法

> ID：15854627
> 
> 赞同：-3
> 
> 时间：2013-04-06T18:40:47.853
> 
> 标签：c++, parsing

假设我有以下字符串：

```
string str = "I 500.000 500.000 30000 30.000 60.000 20.000 20.0 60.0 ;" 
```

以及以下变量：

```
double x1;
double x2;
int x3; 
```

我想解析上面的字符串，以便最后

```
x1 = 500.000
x2 = 500.000
x3 = 30000 
```

进行这种解析的最佳方法是什么？代码片段将不胜感激。

谢谢！

* * *

更新

好吧，当我说“最好”时，我的意思是最简单的，因为你什么时候得到一个如上所述的示例字符串，你确切地知道字符串是如何格式化的。例如，一个字符后跟两个双精度数，然后是一个整数等……我所关心的是最短的代码，它也很简洁。无需花时间和额外的数据处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:42:53.320

字符串流满足您的需求：

```
#include <sstream>

std::istringstream iss(str);
iss.get(); //'I'

if (iss >> x1 >> x2 >> x3) {
    //success
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:43:45.897

使用字符串流如下：

```
string str = "I 500.000 500.000 30000 30.000 60.000 20.000 20.0 60.0 ;"
stringstream ss(str);
char c =' ';

ss >>c>> x1 >> x2  >>x3 ; 
```

# ios - 语言环境检测objective-c

> ID：15854628
> 
> 赞同：0
> 
> 时间：2013-04-06T18:40:59.743
> 
> 标签：ios, objective-c, localization, locale, nslocale

我正在使用objective-c进行本地化和应用程序，想知道是否有办法检测手机的语言。更具体地说，当最终用户转到“设置”->“通用”->“国际”->“语言”时，选择了一种语言，因此想知道为 iOS 设备（iPhone、iPod 或 iPad）设置的语言。

通过这种方式，我可以编写一个“if”语句，以便根据设备语言执行某些代码。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:44:22.337

```
NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0]; 
```

看看这个：[Getting current device language in iOS?](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios)

# servlets - 两次执行 NamedQuery 时的 IndexOutOfBounds

> ID：15854630
> 
> 赞同：0
> 
> 时间：2013-04-06T18:41:02.917
> 
> 标签：servlets, ejb, indexoutofboundsexception

我第一次尝试制作一个 Web 应用程序，我使用了各种教程和任何类型的帮助，但我不明白为什么会发生这种情况。到目前为止一切正常：

我正在尝试在 servlet 之间传输“用户”属性，我通过将其中的一部分作为属性发送（使用 RequestDispatcher 或 HTML 表单）并在数据库中查找其余部分来做到这一点，如下所示：

```
String user = (String) request.getAttribute("txt");
Users info = (Users) emf.createEntityManager().createNamedQuery("Users.findByUsername").setParameter("username",user).getResultList().get(0); 
```

用户名是唯一键，NamedQuery 的代码是

```
@NamedQuery(name = "Users.findByUsername", query = "SELECT u FROM Users u WHERE u.username = :username) 
```

我第一次使用它时，它可以工作并且我得到了预期的结果，但是，如果我回到同一个 servlet 或者我在其他 servlet 中再次使用相同的代码，我会得到`java.lang.IndexOutOfBoundsExpcetion: Index: 0, Size: 0`

如果我在任何时候都没有修改数据库，怎么会发生这种情况？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:51:52.250

似乎您的请求属性“txt”第二次为空。它是一个请求属性，所以它只在请求期间有效。如果您不存储它或每次都提交它，它将为空。

null 作为用户名将产生一个空列表。尝试读取空列表的第一个元素会产生 IndexOutOfBoundsException。

每次使用会话属性或重新提交属性，它都会起作用。

# iphone - 应用程序进入前台时如何刷新 UIWebView？

> ID：15854635
> 
> 赞同：3
> 
> 时间：2013-04-06T18:41:16.723
> 
> 标签：iphone, ios, objective-c

每当我的应用程序进入前台时，我都想刷新 UIWebView。我在 ViewController.m 中真正拥有的只是一个检查 Internet 访问 (hasInternet) 和 viewDidLoad 的方法。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize webview;

-(BOOL)hasInternet{
    Reachability *reach = [Reachability reachabilityWithHostName:@"www.google.com"];
    NetworkStatus internetStats = [reach currentReachabilityStatus];

    if (internetStats == NotReachable) {
        UIAlertView *alertOne = [[UIAlertView alloc] initWithTitle:@"You're not connected to the internet." message:@"Please connect to the internet and restart the app." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alertOne show];
    }

    return YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self hasInternet];
    [webView loadRequest: [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://warm-chamber-7399.herokuapp.com/"]] ];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

关于如何启用此功能的任何建议？它是进入 AppDelegate 还是我在 ViewController.m 中创建另一个方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T19:07:11.570

`UIApplicationWillEnterForegroundNotification`您应该在您`ViewController`的方法中注册 a ，`viewDidLoad`并且每当应用程序从后台返回时，您都可以在注册通知的方法中执行您想做的任何事情。`ViewController`当应用程序从后台返回到前台时，`viewWillAppear`或`viewDidAppear`不会被调用。

```
-(void)viewDidLoad{

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doYourStuff)

    name:UIApplicationWillEnterForegroundNotification object:nil];
}

-(void)doYourStuff{

  [webview reload];
} 
```

不要忘记取消注册您注册的通知。

```
-(void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

**请注意**，如果您注册您`viewController`的`UIApplicationDidBecomeActiveNotification`方法，那么每次您的应用程序激活时都会调用您的方法，注册此通知是不合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:44:42.557

注册 UIApplicationDidBecomeActiveNotification 或 UIApplicationWillEnterForegroundNotification。

# android - 静态变量在android中的奇怪行为

> ID：15854636
> 
> 赞同：-3
> 
> 时间：2013-04-06T18:41:19.223
> 
> 标签：android, static

我面临一个问题，非常奇怪的问题。

当我更新类中的任何一个静态变量时，类中的其他静态变量也得到更新，不知道为什么会这样。

请帮帮我，我什至不知道如何处理这个问题。

这条线产生问题。

```
private static cSet currentSet = new cSet();
private static cSet currentPracticeSet = new cSet();
    public static void setCurrentPracticeSetRange(int from, int to)
{
    Log.e(currentPracticeSet.getCards().size()+" And "+currentSet.getCards().size(), to+" and "+from);
    getCurrentPracticeSet().getCards().clear();
    getCurrentPracticeSet().getCards().addAll(getCurrentSet().getCards().subList(from, to));

    Log.e("Range",currentSet.getCards().size()+"");
} 
```

currentSet 和 CurrentPracticeSet 是类的私有静态成员。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:43:32.673

静态意味着变量的范围受类限制，而不是对象。如果你改变一个值，它们都会改变。

阅读[此处](https://stackoverflow.com/questions/413898/what-does-the-static-keyword-do-in-a-class)了解更多信息。

# json - 哑剧类型设置

> ID：15854638
> 
> 赞同：3
> 
> 时间：2013-04-06T18:41:37.107
> 
> 标签：json, html, mime-types, mime

我正在使用 Ipage 作为网络主机，我最近发现我的服务器上的 Html 文档不起作用，因为它正在使用的 json.z 文件被浏览器读取`"text/html"`而不是`"application/json; charset=UTF-8"`（在提琴手中检查出来）。

我怎样才能改变这个？是否可以在像 Ipage 这样的主机中设置 mime 类型甚至查看列表以找到将支持的扩展名`"application/json; charset=UTF-8"`？

如果不是，Ipage 的“简单”已经不是第一次限制我的可能性了，还有哪些主机更专业，能让我做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:14:00.197

要在服务器上设置 mime 类型，请编辑“.htaccess”文件，方法如下：http:
[//www.htaccess-guide.com/adding-mime-types/](http://www.htaccess-guide.com/adding-mime-types/)

特别是在 ipage 上有一个“.htaccess 编辑器”，可以在控制面板中轻松访问，您可以在其中添加 mime 类型：
[http ://members.ipage.com/controlpanel/htaccess/?m=mimetypes](http://members.ipage.com/controlpanel/htaccess/?m=mimetypes)

# android - 每当我屏幕自动旋转时都会调用 onCreate

> ID：15854639
> 
> 赞同：0
> 
> 时间：2013-04-06T18:41:41.597
> 
> 标签：android

在我的应用程序中，我使用 onCreate() 方法来初始化各种变量。但是，每当我旋转设备并且屏幕自动旋转时，都会再次调用 onCreate() ，这会重新初始化我的变量。这是它应该如何工作的吗？当我启动应用程序时，我应该把我只想运行一次的代码放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:07:57.763

上面的答案会将您的 Activity 锁定到特定的方向，这对于 Android 应用程序来说通常是不正确的行为。

您应该做的是存储 Activity 的状态，以便在重新创建它时，您可以使用存储的值重新填充 UI。

```
protected void onSaveInstanceState (Bundle outState) {
   super.onSaveInstanceState(outState);
   // put your values in the Bundle
   outState.putString("TextView1Text", textView1.getText()); // for example;
} 
```

然后在您的`onCreate()`方法中，您可以恢复值

```
protected void onCreate (Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        textView.setText(savedInstanceState.getString("TextView1Text"));
    }
} 
```

当用户通过主页按钮或其他方式离开应用程序时，这也将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:57:05.490

在清单中将此行放入您想要的所有活动中 肖像

```
android:screenOrientation="portrait" 
```

# java - 在android中将2位数据从1个活动发送到另一个活动

> ID：15854645
> 
> 赞同：1
> 
> 时间：2013-04-06T18:42:13.607
> 
> 标签：java, android, android-intent

嗨，我正在尝试学习 android 编程，我在这里使用了 android 教程：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)但后来我要编辑它并添加我自己的位并通过使用 API 指南向他们学习。

我想做的第一个编辑是添加一个复选框，用户可以检查该复选框将在显示最后的内容时添加另一行文本。但是我不确定如何将复选框添加到代码中（在主活动中）并使其将数据发送到 DisplayMessageActivity 以告诉它在用户定义的另一行文本下添加另一行文本消息框，请帮忙（对不起，如果我没有解释清楚）

这是到目前为止 2 项活动的代码，如果有帮助的话，请对你的答案保持基本，我有一段时间没编程了，我之前用过 java，所以我还在做事情。

主要活动：

```
package com.hyper.benshelloworld;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.view.Menu;
import android.widget.CheckBox;
import android.widget.EditText;
/*
* private things can be directly accessed only within the class that defines them.
*•default (i.e., no access modifier) things can be accessed by any code in the same package as the defining class.
*•protected is like default, except subclasses outside of the defining package can also access the member.
*•public members are accessible to all code everywhere.
*/

public class MainActivity extends Activity {
    public static final String EXTRA_MESSAGE = "com.hyper.benshelloworld.MESSAGE";
    //defines the string EXTRA_MESSAGE

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public void sendMessage(View view){
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        //calls on DisplayMessageActivity.class
        EditText editText = (EditText) findViewById(R.id.EditText);
        //makes the text box writable in.
        String message = editText.getText().toString();
        /*receives the typed message and makes it ready to be sent to the 
         * DisplayMessageActivity to be displayed*/
        intent.putExtra(EXTRA_MESSAGE, message);
        /*The most common use of intents is to start new activities (screens)within
         *  an application (line 41). The extras Bundle is a way of passing data between activities. 
         *  Extras are entered as key value pairs so EXTRA_MESSAGE is a key is used to identify a 
         *  particular value so it can be retrieved and used by another activity.
         */

        startActivity(intent);

    }   

} 
```

和 DisplayMessageActivity：

```
package com.hyper.benshelloworld;
/*
* private things can be directly accessed only within the class that defines them.
*•default (i.e., no access modifier) things can be accessed by any code in the same package as the defining class.
*•protected is like default, except subclasses outside of the defining package can also access the member.
*•public members are accessible to all code everywhere.
*/

import android.os.Build;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.NavUtils;
import java.lang.String;

public class DisplayMessageActivity extends Activity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        //receives the intent sent in the MainActivity.class
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
        //Uses the getStringExtra to receive the string message from MainActivity in the intent.

        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);
        /*Sets up a text view to show the string "message" in and
         *sets the size of the text
         */

        if (message.equals("hello world")){
            textView.setText("bit standard");
        }

        setContentView(textView);
        //sets the activity to be showing the textView

        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
            /* If the android version is 3.0+,  
             * show the Up button in the action bar.
             */
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_display_message, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:47:08.277

您可以将多个东西放入附加组件中：

```
public class MainActivity extends Activity {
    // ...
    public void sendMessage(View view){
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.EditText);
        String message = editText.getText().toString();
        Bundle bundle = new Bundle();
        bundle.putString(DisplayMessageActivity.KEY_BUNDLE_SOME_VALUE, message);
        bundle.putString(DisplayMessageActivity.KEY_BUNDLE_SOME_OTHER_VALUE, someOtherValue);
        intent.putExtras(bundle);
        startActivity(intent);
    }
    // ...
} 
```

在接收活动中：

```
public class DisplayMessageActivity extends Activity {

    public static final String KEY_BUNDLE_SOME_VALUE = "some_value";
    public static final String KEY_BUNDLE_SOME_OTHER_VALUE = "some_other_value";

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle bundle = getIntent().getExtras();
        String string1 = "";
        String string2 = "";
        if (bundle != null) {
            if (bundle.containsKey(KEY_BUNDLE_SOME_VALUE) {
                string1 = bundle.getString(KEY_BUNDLE_SOME_VALUE);
            }
            if (bundle.containsKey(KEY_BUNDLE_SOME_OTHER_VALUE) {
                string2 = bundle.getString(KEY_BUNDLE_SOME_OTHER_VALUE);
            }
        }
        // ...
    }
    // ...
} 
```

在捆绑密钥的接收活动中添加公共常量是个好主意。这将有助于防止您因拼写错误而犯错误 :) 如果您决定更新它们，它们就在 1 个位置。

# jscrollpane - jscrollPane 销毁（）；和现代化

> ID：15854647
> 
> 赞同：0
> 
> 时间：2013-04-06T18:42:23.600
> 
> 标签：jscrollpane, modernizr

当前尝试在宽度为一定大小时删除 jScrollPane。它似乎正在工作，我可以触发警报

```
 if (Modernizr.mq("screen and (max-width:715px)")) {
         alert('hello world');          
   } 
```

我可以使用点击功能删除 jScrollPane

```
$('.st-accordion a').click(function() {
        var element = $('.hs-content').jScrollPane({});
        var api = element.data('jsp');
        api.destroy();
}); 
```

但无论出于何种原因，我都无法触发 destroy(); 有条件的modernizr

```
 if (Modernizr.mq("screen and (max-width:715px)")) {
                    var element = $('.hs-content').jScrollPane({});
                    var api = element.data('jsp');
                    api.destroy();
            } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:53:38.450

没关系，我通过将它全部包含在同一个函数中来得到它。片刻清晰。

```
 //Scrollpane
            $(function()
                {
                    $('.hs-content').jScrollPane({  autoReinitialise: true, hideFocus: true });
                    $('.hs-menu nav').jScrollPane({  autoReinitialise: true, hideFocus: true });
                    if (Modernizr.mq("screen and (max-width:715px)")) {
                    var element = $('.hs-content').jScrollPane({});
                    var api = element.data('jsp');
                    api.destroy();
                    }
             }); 
```

# zend-framework - ZF 自动加载在 localhost 上工作，但在 linux 服务器上不起作用

> ID：15854648
> 
> 赞同：0
> 
> 时间：2013-04-06T18:42:25.587
> 
> 标签：zend-framework

我正在为学校建立一个CMS。我的应用结构如下

```
- SITE
-- application
---- configs
---- layouts
---- modules
-------- default
------------ controllers
------------ forms
------------ models
------------ plugins
------------ views
------------ Bootstrap.php
-------- admin
------------ controllers
------------ forms
------------ models
------------ views
------------ Bootstrap.php
---- Bootstrap.php
-- public
-- library
-- index.php 
```

我的代码在我的 localhost zend 服务器上运行良好但上传后显示此错误

> 致命错误：在第 23 行的 /home/ernagro/application/modules/default/controllers/IndexController.php 中找不到类“Default_Model_Students”

这是我的主要引导代码：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    private $_acl=null;
    private $_auth=null;

    protected function _initAutoload(){
        $modelLoader=new Zend_Application_Module_Autoloader(array('namespace'=>'','basePath'=>APPLICATION_PATH.'/modules/default'));
        require_once APPLICATION_PATH.'/modules/default/models/Acl.php';
        require_once APPLICATION_PATH.'/modules/default/plugins/AccessCheck.php';
        $this->_acl = new Default_Model_Acl();
        $this->_auth= Zend_Auth::getInstance();
        $fc = Zend_Controller_Front::getInstance();
        if (Zend_Auth::getInstance()->hasIdentity())
        {
            $identity= zend_auth::getInstance()->getStorage()->read();
            Zend_Registry::set('role', $identity[role]);
        }
        else
        {
            Zend_Registry::set('role', 'guests');
        }
        $fc->registerPlugin(new Default_Plugin_AccessCheck($this->_acl,$this->_auth));
        return $modelLoader;    
    }
    function _initViewHelpers()
    {
        $this->bootstrap( 'layout');
        $layout = $this->getResource('layout');
        $view = $layout->getView();
        $view->setHelperPath(APPLICATION_PATH.'/helpers','');
        $view->doctype('XHTML1_TRANSITIONAL');
        $view->headMeta()->appendHttpEquiv('Content-type','text/html;charset=utf-8')
                        ->appendName('description','سیستم مدیریت محتوای مدارس تکفام')
                        ->appendName('keywords','مدیریت محتوای مدارس, مدیریت محتوا, دبیرستان ها, مدارس, سیستم جامع مدارس, مدیریت مدارس, محتوا, مدیریت, سیستم, تکفام, ارنا, تیم ارنا, ernagourp, Erna, Takfam, group')
                        ->appendName('Language','Persian, FA')                  
                        ->appendName('generator','Erna Group TM(http://www.ernagroup.com')                  
        ;
        //Zend_Dojo::enableView($view);
        ZendX_JQuery::enableView($view);
        $view->headTitle('سیستم مدیریت محتوای مدارس تکفام')->setSeparator(' | ');
        $navContainerConfig=new Zend_Config_Xml(APPLICATION_PATH."/configs/navigation.xml","nav");
        $navContainer = new Zend_Navigation($navContainerConfig);
        $view->navigation($navContainer)->setAcl($this->_acl)->setRole(Zend_Registry::get(role));
    }

} 
```

这是我的默认模块引导程序：

```
 class Default_Bootstrap extends Zend_Application_Module_Bootstrap{
    protected function _initAutoload(){
    $modelLoader=new Zend_Application_Module_Autoloader(array(
            'namespace'=>'Default','basePath'=>APPLICATION_PATH.'/modules/default')
    );
    return $modelLoader;
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:38:00.790

它与文件夹名称的大写有关。您的 localhost 很可能位于 Windows 机器上，而生产服务器位于 Linux 上。尝试将文件夹重命名`default`为`Default`. Windows 在两者之间没有区别，Linux 有。

# apache - 提高 Web 应用程序的性能

> ID：15854656
> 
> 赞同：0
> 
> 时间：2013-04-06T18:42:53.980
> 
> 标签：apache, tomcat, mod-jk

我的网络应用程序，一个爆炸的`WAR`，由`Apache`（静态内容）和`Tomcat`（动态内容）通过`mod_jk`. 可选地，这个系统有一个 ActiveMQ 组件，但它目前没有被使用。

据我了解，每个 HTTP 请求都会命中 Apache。如果是动态内容请求，Apache 会通过 mod_jk 将请求转发给 Tomcat。为了满足这个请求，Tomcat 将启动一个新线程来完成这项工作。

我在 6 核、12 GB RAM 的机器上运行该应用程序。

除了使用 ActiveMQ 组件，我还可以如何提高我的系统性能？另外，如果我错误地说明了 Apache 和 Tomcat 的通信方式，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:21:01.577

```
while (unhappyWithSitePerformance) {
  executeLoadTest();
  identifyBiggestBottleneck(); // e.g. what breaks first
  fixIdentifiedBottleneck();
} 
```

没有空白的银弹可提供。您应该确保您的负载测试模拟真实的用户行为，并定义您希望服务器在给定的响应时间内处理的（虚拟）用户数量。然后调整您的服务器，直到达到您的目标。

要查找的常见参数是

*   内存消耗
*   CPU 消耗（例如某些算法）
*   I/O 饱和 - 例如与数据库的通信、使网络适配器饱和的一般 HTTP 流量
*   数据库或后端响应时间 - 例如，有时您必须调整后端，而不是网络服务器本身。

# c# - Process.Start 在 BackgroundWorker C#

> ID：15854662
> 
> 赞同：0
> 
> 时间：2013-04-06T18:43:26.277
> 
> 标签：c#, multithreading, process, waitforexit

我最糟糕的时间是围绕线程/后台进程。我的问题在某种程度上似乎很常见，但我还没有找到满足我需求的好例子。

经典的例子是这样的：
当某个长时间运行的任务/进程运行时，我的 UI 冻结 - 我希望至少能够移动/最小化 UI。

经典回复包括线程和任务工厂以及 BackgroundWorker 解决方案。但无论我如何实施它们，我都会得到糟糕的结果。

在我的程序中，我正在执行另一个应用程序并等待它完成。为了简单起见，假设我这样做：

```
 Process p = Process.Start("notepad.exe somefile.txt");
            p.WaitForExit();
            //read somefile.txt 
```

`WaitForExit()`显然，我的应用程序 UI 在等待我关闭记事本时会挂起。

我已经尝试了一些建议的方法，但我被画在两个角落之一：

1.  我的界面仍然挂起，然后在我关闭记事本时读取 somefile.txt 就好了。
2.  进程（记事本）运行良好，但我的应用程序在我关闭记事本之前立即读取了 somefile.txt（所以我猜它是异步运行的）

我看到的大多数例子都涉及到一个很大的数字 - 简单但不是我正在做的事情。启动这个“外部”过程会使事情变得有点复杂。

感谢您的时间和考虑！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:17:29.813

BackgroundWorker 在这里似乎很合适；它应该按照这些方式进行配置：

```
var worker = new BackgroundWorker();
worker.WorkerReportsProgress = false;
worker.WorkerSupportsCancellation = false;
worker.DoWork += worker_DoWork;
worker.RunWorkerCompleted += worker_RunWorkerCompleted;
worker.RunWorkerAsync(); 
```

然后你有处理程序：

```
void worker_DoWork(object sender, DoWorkEventArgs e)
{
    //start notepad process here.
}

void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    //read somefile.txt here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:50:08.897

从事物的声音来看，您的应用程序没有`Process.WaitForExit`在单独的线程上运行调用，否则不会有任何挂起。

`BackgroundWorker`，`Thread`并且这些`ThreadPool`都是有用的工具，但是它们可能很难使用并且很难正确使用，Task Parallel Library`System.Threading.Task`已经在某种程度上“取代”了直接使用线程来处理您需要异步执行的大多数操作。

请参阅：[线程和 C# 中的新任务库](https://stackoverflow.com/questions/3418979/threads-and-the-new-task-library-in-c-sharp)

所以你的代码变成了。

```
Task.Factory.StartNew(() =>
{
   var proc = new Process("...");
   proc.WaitForExit();
   File.Read("...");
}); 
```

# javascript - 使用 XPath 和 Javascript 进行 XML 解析

> ID：15854663
> 
> 赞同：-1
> 
> 时间：2013-04-06T18:43:27.327
> 
> 标签：javascript, jquery, xpath, xml-parsing

```
<root> 

<method name="A"> 
    <childcall name="B"></childcall>
    <childcall name="C"></childcall>
</method>

<method name="B"> 
    <childcall name="D"></childcall>
</method>

<method name="C"> 
    <childcall name="D"></childcall>
    <childcall name="E"></childcall>
</method>

</root> 
```

我想在 Javascript 或 JQuery 中使用 XPath 读取和解析 xml，并在 html 中生成输出。我能够使用 XSLT 将这个 xml 按原样翻译成 html。但我希望为 xml 中的方法生成调用层次结构，例如，如果用户在生成的 html 中选择方法 A，它应该展开并显示方法 B 和 C，当用户在 A 中选择 B 时，它应该显示 D 和很快...

在这方面的任何建议都会帮助我开始。

编辑：好的，更正了xml。不知道关于解析的问题有什么问题。我觉得关于解析的问题仍然是相关的。再说一遍，是否可以在 Javascript 或 JQuery 中使用 XPath 解析 xml 并在 html 中生成输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:55:48.237

jQuery 不支持 XPath。它曾经在最早的版本中使用，但 XPath 在几年前就被删除了。您可以使用 DOM 方法通过 jQuery 将内容从 XML 中分离出来。

如果您想在 JavaScript 中使用 XPath，我会尝试 Google 的新[Wicked Good XPath](https://code.google.com/p/wicked-good-xpath/)库。

# java - 普通 Java 持久性和 JavaFX 表示层：类设计方法？

> ID：15854664
> 
> 赞同：2
> 
> 时间：2013-04-06T18:43:27.467
> 
> 标签：java, jdbc, javafx-2, rdbms

另一个新手问题。我有一个名为 Services 的 RDBMS 表，声明如下：

```
CREATE CACHED TABLE Services ( 
    serv_id      BIGINT        GENERATED ALWAYS AS IDENTITY (START WITH 100) PRIMARY KEY,
    enc_id       BIGINT        REFERENCES Encounters ( enc_id ),
    prov_id      INTEGER       REFERENCES Providers ( prov_id ),
    DoS          DOUBLE        DEFAULT 0.0 NOT NULL,
    DoP          DOUBLE        DEFAULT 0.0 NOT NULL,
    DoR          DOUBLE        DEFAULT 0.0 NOT NULL
); 
```

在处理Service对象对这个表的持久化时，我写了一个Java类，将每个SQL字段映射到其对应的Java类型字段，即Class Service有相同的六个字段。因为我正在开发一个在 JavaFX 应用程序中使用此表的应用程序，所以我对每种类型都使用了 JavaFX 属性字段，例如。

```
Class Service {
    LongProperty serv_id = new SimpleLongProperty();
    :
} 
```

这是我现在想知道的问题...

我的 RDBMS 表是高度规范化的，所以我几乎从不处理这个级别的实际数据库表。在我可以将我的 Services 表中的信息呈现给用户之前，我执行了这个查询：

```
SELECT s.serv_id, r.rx_id, p.prov_id, s.*, sr.*, r.*, 
    p.lastName || ', ' || p.firstName AS provName" +
        FROM Services AS s
        INNER JOIN Service_RXs AS sr USING ( serv_id )
        INNER JOIN RXCodes AS r USING ( rx_id )
        INNER JOIN Providers AS p USING ( prov_id )
        WHERE s.enc_id = ?
        ORDER BY s.DoS DESC; 
```

该结果集有 11 列，大约是 Services 表中列数的两倍。此结果集中的信息用于 TableView。因为最好的做法是有一个代表 TableView 数据模型的类，所以在我看来，我有三个选择：

*   选择 1

我可以将一个类用于所有目的，即我可以扩展 Service 类来表示我的持久层（即 JDBC）和 JavaFX GUI API 所需的功能。我不喜欢这个解决方案。这意味着我不得不担心只保留对象的一部分，我必须有在正确的时间获取所有非规范化数据的方法，而且我不得不放弃考虑我的班级的吸引人的概念作为一个角色。

*   选择 2

我可以编写完全独立的类，一个用于数据库表，另一个用于 TableView 的数据模型。我不认为这有什么问题，但它似乎也会带来一定数量的重复负担。

*   选择 3

我可以在 Service 类中编写一个内部类，比如 Service.Extended，它表示相应 Service 对象的非规范化形式。乍一看，这对我来说听起来是一个很好的解决方案。它允许我保持对象之间的目的分离。内部类对象也将能够访问封闭类中所需的字段，从而避免重复。我想我可以使用静态工厂方法轻松地为 ObservableList 创建 JavaFX 数据模型对象，该方法将在代码中干净地创建新的 Service.Extended 对象。

我不可能是第一个遇到同样问题的人。如果我可能会问，其他人在尝试将规范化数据集适应 GUI 表示层时采用了哪些解决方案？这是 Hibernate/JPA 提供帮助的那种事情吗？如果我坚持使用 JDBC，内部类方法是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:17:22.313

从 UI 开始工作怎么样？我的意思是：

*   设计 UI 来做你需要它做的事情。
*   使用您的 JavaFX 属性创建一个支持类（模型）。
*   编写 DAO 以将模型的属性存储在表中。

通过这样做，您只需编写您真正需要的代码，而无需担心抽象。虽然 DAO 将数据库设计的复杂性反映到您尝试解决的问题 1:1。

最好和最简单的解决方案是最直接的，具有最少的代码、最少的类和最少的第 3 方依赖项。

还要记住在后台线程中运行数据库操作是架构的关键部分。不应从其他线程访问 JavaFX 属性。试图改造这对我来说是一个真正的痛苦。

# c++ - 添加指向数组的指针时出现分段错误

> ID：15854667
> 
> 赞同：0
> 
> 时间：2013-04-06T18:43:38.160
> 
> 标签：c++

我创建了两个班级，班级和学生。在 Class 构造函数中，我需要动态初始化一个指向 Student 对象的指针数组（pStudents）（我不能使用向量），初始化为 null。当我使用函数 addStudent 将学生添加到班级时，我希望能够在指针数组中搜索第一个空地址，然后将学生分配到数组中的那个位置。如果学生已经在课堂上，我还希望能够搜索数组以查看该学生是否已经在那里。

当我尝试编译程序时，出现分段错误。我知道这与我在创建 pStudents 数组时使用堆内存的方式有关，但我不确定如何解决这个问题。

这是我在 Class 头文件中声明数组的方式：

```
Student **ptrStudents; 
```

这是 Class 对象的构造函数。现在，我使用任意大小的 40 作为数组。

```
Class::Class()
{
Student **ptrStudents = new Student*[40];
} 
```

这是函数 addStudents，它接受一个指向学生对象的指针作为其参数。请注意，字符串名称是所有学生的数据字段。

```
Class::addStudents(Student *student)
{

 string name = student -> getName();
 string nameTemp;

 for (int i = 0; i < 40; i++)
 {
    if (ptrStudents[i] != 0)
    {
       nameTemp = ptrStudents[i] -> getName();  
       if (name == nameTemp)
       {
         cout << "This student is already in the class." << endl;
         return;
        }
    }

else if (ptrStudents[i] == 0)
{
        ptrStudents[i] = student;
        return;
} 
```

这是我正在使用的主要功能：

```
int main ()
{
    Class Economics;
    Student student1("Hannah");
    Economics.addStudent(&student1);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:46:57.567

您需要将数组中的每个指针初始化为 NULL。将您的构造函数更改为：

```
Class::Class()
{
ptrStudents = new Student*[40];
for(int i = 0; i < 40; i++)
    ptrStudents[i] = 0;    //NULL
} 
```

创建指针时，它不会自动初始化为 NULL。所以发生的事情是你有一堆指向垃圾数据的随机指针，当你到达这条线时

```
if (ptrStudents[i] != 0) 
```

它们都通过了，因为它们不是 NULL，即使它们不可用。

哎呀，我错过了一个大的，即使我复制了你的代码（谢谢你，约翰）。您不应该重新声明 ptrStudents 数组；在构造函数中创建一个本地数组，而不是初始化成员数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:50:15.733

类头中声明的数组永远不会被初始化。

> `Student **ptrStudents = new Student*[40];`

这声明了一个局部变量并使用新数组对其进行初始化。

将其更改为：

`ptrStudents = new Student*[40];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:50:52.733

至少两个错误

首先，您应该将数组值初始化为 NULL（正如 Parker Kemp 所说）

其次，您在构造函数中声明了一个名为 ptrStudents 的局部变量，它*隐藏*了也称为 ptrStudents 的类变量。您应该删除该声明。所以像这样

```
Class::Class()
{
    ptrStudents = new Student*[40];
    for(int i = 0; i < 40; i++)
        ptrStudents[i] = 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T18:52:11.607

根据您显示的内容猜测

```
Class::Class()
{
    Student **ptrStudents = new Student*[40];
} 
```

声明一个新的`Student **ptrStudents`. 要初始化成员`ptrStudents`，您不必声明它。它已经被声明了。

你想要的是

```
Class::Class()
{
    ptrStudents = new Student*[40];
} 
```

# iphone - UITableViewCell 内的 UIScrollView

> ID：15854670
> 
> 赞同：0
> 
> 时间：2013-04-06T18:43:57.187
> 
> 标签：iphone, ios, objective-c

这段代码显示了如何将滚动视图添加到单元格并且工作完美，但我想加载我在 XIB 中设计的滚动视图并且启用了分页，我尝试直接将滚动视图作为内容视图加载到单元格，但它看起来不正确并且不会水平滚动它在 tableview 单元格之外执行的操作，请指导我需要进行哪些更改

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *cellIdentifier = @"ScrollCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    UIScrollView *scroller = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 25, 320, 25)];
    scroller.showsHorizontalScrollIndicator = NO;

    UILabel *contentLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320*4, 25)];
    contentLabel.backgroundColor = [UIColor blackColor];
    contentLabel.textColor = [UIColor whiteColor];
    NSMutableString *str = [[NSMutableString alloc] init];
    for (NSUInteger i = 0; i < 100; i++) { [str appendFormat:@"%i ", i]; }
    contentLabel.text = str;

    [scroller addSubview:contentLabel];
    scroller.contentSize = contentLabel.frame.size;
    [cell addSubview:scroller];
}

// cell.textLabel.text = [NSString stringWithFormat:@"cell #%i", indexPath.row];

return cell;
} 
```

我在运行时将一些其他 UI 组件添加到我的 XIB 滚动视图中，例如按钮等。代码如下

```
 NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
for (int i = 0; i < colors.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    UIView *subview = [[UIView alloc] initWithFrame:frame];
    subview.backgroundColor = [UIColor grayColor];

    [self.scrollView addSubview:subview];

    // add buttons
    CGRect Frame= CGRectMake(frame.origin.x,frame.origin.y,200,50);
    //set your x and y position whatever u want.

    UIButton *Button = [UIButton buttonWithType:UIButtonTypeCustom];
    Button.frame = Frame;

    UIImage *Img = [UIImage imageNamed:@"second.png"];
    [Button setBackgroundImage:Img forState:UIControlStateNormal];

    [scrollView addSubview: Button];

    // add text
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(frame.origin.x,frame.origin.y+60,200,50)];
    label.textAlignment = UITextAlignmentCenter;
    label.text = @"Here you write your text";
    label.textColor = [UIColor blackColor];

    [scrollView addSubview:label ];

    [subview release]; 
```

请建议我可以将设计的滚动视图加载到表格视图单元格的修改

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:00:44.203

添加所有控件（*如标签、滚动视图等*）`cell.contentView`而不是`cell addSubview`.

# iframe - 显示 iframe 的 Umbraco 剃须刀

> ID：15854671
> 
> 赞同：0
> 
> 时间：2013-04-06T18:43:58.817
> 
> 标签：iframe, razor, umbraco

我已经进行了设置，以便在 umbraco 中将 iframe 链接粘贴到多个文本字段中，然后在 XSLT 中我会执行以下操作：

```
 <xsl:value-of select="embedCode" disable-output-escaping="yes"/> 
```

哪个可以很好地显示视频，但是我现在正尝试在剃须刀中执行此操作，但似乎根本无法显示？我尝试使用 html raw 但无法正常工作

这基本上就是我目前所拥有的，它只是吐出 iframe url

```
 <div>@item.embedCode</div> 
```

请问有人有什么想法吗？

# java - 在不使用正则表达式的情况下匹配数组和文件内容

> ID：15854673
> 
> 赞同：0
> 
> 时间：2013-04-06T18:44:21.417
> 
> 标签：java, string, multidimensional-array

**请在不使用正则表达式的情况下在数组和文件内容之间进行匹配。**

***请重播***：-

如果我有一个 txt 文件包含以下句子：

```
the sql is the best book for jon.
book sql is the best title for jon.
the html for  author asr.
book java for famous writer amr. 
```

如果我将此字符串存储在数组中；

```
sql     html    java
jon     asr     amr 
```

我想在文件中搜索数组的内容，例如如果“sql”和“jon”在 txt 文件中的同一个句子中，然后写下句子和

将“sql”之前的所有单词命名为**前缀**，将两个“sql”和“jon”之间的所有单词命名为**中间**，将“jon”之后的所有单词命名为**后缀**。

我尝试写 cod ：

```
String book[][]  = {{"sql","html","java"},{"jon","asr","amr"}};

    String input;
    try {
        BufferedReader br = new BufferedReader(new FileReader(new File("sample.txt") ));
        input= br.readLine();
        while ((input)!= null)
            {
            if((book[0][0].contains(input))&( book[1][0]).contains(input)){
                System.out.println();
             if((book[0][1].contains(input))&( book[1][1]).contains(input)){
                        System.out.println();
                     if((book[0][2].contains(input))&( book[1][2]).contains(input)){
                        System.out.println();
                                    }
                        else
                            System.out.println("not match");
        }}
    }} catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    } 
```

我不知道如何编写代码来提取前缀、中间和后缀

输出是：

```
the sentence is : the sql is the best book for jon.
prefix is :the
middle is:is the best book for
suffix is: null 
```

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:13:48.640

您应该为此使用 Pattern 类。[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

教程[http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

对不起，我不会写确切的代码。

图案看起来像

```
"(.*)(?:sql|html|java)(.*)(?:jon|asr|amr)(.*)" 
```

然后，在 Matcher 中，您会发现您的前缀、中间和后缀为 matcher.group(1)、matcher.group(2) 和 matcher.group(3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:40:43.430

这是您需要的代码：

```
 String line = "the sql is the best book for jon.";

    String regex = "(.*)(sql|html|java)(.*)(jon|asr|amr)(.*)";
    Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);

    Matcher matcher = pattern.matcher(line);
    matcher.find();

    String prefix = matcher.group(1);
    String firstMatch = matcher.group(2);
    String middle = matcher.group(3);
    String secondMatch = matcher.group(4);
    String suffix = matcher.group(5); 
```

# objective-c - CGPoint location = [touch locationInView:[touch view]];

> ID：15854678
> 
> 赞同：2
> 
> 时间：2013-04-06T18:44:47.653
> 
> 标签：objective-c

有人可以解释一下从 CGPoint 开始的这行代码到底发生了什么。这来自`-(void)ccTouchesBegan`...

```
UITouch* touch = [touches anyObject];
CGPoint location = [touch locationInView:[touch view]]; 
```

特别是我不理解 [touch view] 部分。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:46:13.813

> 特别是我不理解 [touch view] 部分。

`[touch view]`是用户实际触摸的 UIView。

通过阅读我的书关于触摸的章节（至少是前几页），您可能会得到进一步的帮助：

[http://www.aeth.com/iOSBook/ch18.html](http://www.apeth.com/iOSBook/ch18.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:47:01.003

`[UITouch view]`文件

> 该属性的值是最初发生触摸的视图对象。该对象可能不是触摸当前所在的视图。

换句话说，它是触摸位置的最里面的视图。但是，如果您点击并移动手指，`view`即使触摸已经在不同的视图中，它也不会改变。

# java - SOAP 错误代码 env:Client

> ID：15854681
> 
> 赞同：3
> 
> 时间：2013-04-06T18:45:26.240
> 
> 标签：java, web-services, soap, client, fault

我正在连接到 Web 服务，但我得到以下 XML 格式的 SOAP 响应：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
<env:Header/>
<env:Body>
<env:Fault>
<faultcode>env:Client</faultcode>
<faultstring>Internal Error</faultstring>
</env:Fault>
</env:Body>
</env:Envelope> 
```

以及以下 JAVA 异常：

```
javax.xml.ws.soap.SOAPFaultException: Internal Error
    at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:188)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:122)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:119)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)
    at com.sun.proxy.$Proxy30.envioDocumentoTransporte(Unknown Source)
    at at.ws.proxy.DocumentosTransporteProxy.register(DocumentosTransporteProxy.java:79) 
```

我需要知道我这边或服务器端是否有问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:50:49.050

您必须询问服务提供商出了什么问题。错误消息确实表明这是客户端的错误，但这甚至可能只是复制粘贴的代码，只要它没有指定任何内容。

如果有任何不妥之处，还请查看您的请求。

# php - 为什么使用 ajax 我可以更新 mysql 但不能使用 mysql/php 变量中的值？

> ID：15854682
> 
> 赞同：0
> 
> 时间：2013-04-06T18:45:27.900
> 
> 标签：php, ajax, json

一切都发生在一个 php 文件中

HTML 代码

```
<td>
   <input type="text" name="date_day1" id="date_day1" 
      value="<?php echo $_POST['date_day1']?>" size="1">
</td>
<td>
   <input type="text" name="amount1" id="amount1" 
      value="<?php echo $_POST['amount1']?>" size="5"></td> 
```

然后是javascript

```
<script type="text/javascript">
  //cross-browser xmlHTTP getter
  function getHTTPObject() {
    var xmlhttp; // The variable that makes Ajax possible! 
                 //Global XMLHTTP Request object
    //Creating object of XMLHTTP in Internet Explorer
    try {
      XmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e) {
      try {
        XmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      } 
      catch(oc) {
        XmlHttp = null;
      }
    }
    if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
      try {
        // Set var the new request Opera 8.0+, Firefox, Safari
        xmlhttp = new XMLHttpRequest();
      }//try {
      catch (e) {//if it fails move onto the next
        xmlhttp = false;
      }//catch (e) {
    }//if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {

    return xmlhttp;
  }//function getHTTPObject() {

  function init(){
    window.setInterval(autoSave,3000); // 15000=15 seconds
  }

  function autoSave(){
    var date_day1 = document.getElementById("date_day1").value;
    var amount1 = document.getElementById("amount1").value;
    var params = "date_day1="+date_day1+"&amount1="+amount1;
    var http = getHTTPObject();
    http.open("POST", window.location.href, true);
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    http.setRequestHeader("Content-length", params.length);
    http.setRequestHeader("Connection", "close");
    http.send(params);
  }
</script> 
```

和 php

```
$date_day1 = $_POST['date_day1'];
$amount1   = $_POST['amount1'];
$mysqli    = new mysqli($dbhost, $dbuser, $dbpass, $dbname);

if($_SERVER["REQUEST_METHOD"]=="POST"){
  if ($stmt = mysqli_prepare($mysqli, 
     "UPDATE 2_1_journal SET Amount = ? WHERE RecordDay = ? ") ) {

    $stmt->bind_param( 'ds', $amount1 , $date_day1 );
    $stmt->execute();

    echo $date_day1 .' date_day1 from update<br>';
    echo $amount1 .' amount1<br>';
  }    
} 
```

那么会发生什么。无需单击按钮的 Javascript（ajax）接受用户输入，发送到 php 代码。php代码更新mysql。这意味着以某种方式在不单击提交按钮的情况下创建要更新的 php 变量（$amount1，$date_day1）？

但是为什么后面这些变量不存在呢？我想不刷新页面（不点击提交按钮）使用变量。例如在输入表单中作为 value=""

怎么做？据我了解需要使用json？但是从我发现的信息无法理解....有人可以逐步编写如何使用json将用户输入（或来自mysql的值）传递给输入值=“”

或者可能是一些书/教程如何运作（书/教程让傻瓜理解）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:01:07.867

您的 php 脚本应该回显一个 json。例如，我有 ajax.php：

```
<?php
$myVariable = $_POST['myVar'];
//Do something with database here

//Here goes whatever you want to pass back to your page
echo json_encode(array('result' => 'Done doing things', 'data' => $someData)).

// This outputs a json 
// {"result" : "Done doing things", "data" : "Contents of $someData"} 
```

然后 jQuery 会处理这个。您的 html 文件类似于

```
<html><head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function() {

    $('.myButton').click(function(e) {
        e.preventDefault(); //Prevent the page from reloading
        $.post('ajax.php', function(data) {
            $('#myContent').html(data.result);  //Put the result into the div
        }, 'json');
    });
});
</script></head>

<body>
<div id="myContent">This text will be replaced</div>
<a href="#" class="myButton">Click Me</a>
</body>
</html> 
```

在此处阅读有关 jQuery 发布功能的信息。 [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

不要忘记包含 jQuery 库（彻底阅读文档）。

如果您需要在通话之间不删除数据，您可以：

1.  将其传回您的 json 并将其存储在 javascript 变量中，
2.  将其存储在会话或 cookie 中
3.  将其存储在数据库中

# java - 删除单链表的最后一个元素不起作用

> ID：15854683
> 
> 赞同：0
> 
> 时间：2013-04-06T18:45:47.627
> 
> 标签：java, list, element

我有一个单链表，我只想删除该列表的最后一个元素。我检查了它，它不起作用。我不知道为什么。

查看我的代码（PS 我想要一个**递归**解决方案）：

```
// Delete Last Element
public void deleteLast(){

    if(head == null){
        return;
    }

    if(head.next == null){
        head = null;

    }else{
        deleteLast(head.next);
    }
}

private void deleteLast(ListElement head){

    if(head == null){
        return;
    }

    if(head.next == null){
        head = null;
    }else{
        deleteLast(head.next);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:17:02.210

`head = null`只需将局部`head`变量设置为`null`，而不是它所引用的链表中的对象，您需要执行以下操作：

```
private void deleteLast(ListElement head)
{
    if (head.next.next == null)
        head.next = null;
    else
        deleteLast(head.next);
} 
```

您会注意到我还删除了您的`if (head == null)`支票，我相信这不是必需的。

**编辑：**另一种方法：

```
// returns whether we should delete the passed in parameter
private boolean deleteLast(ListElement head)
{
    if (head.next == null)
        return true;
    else if (deleteLast(head.next))
        head.next = null;
    return false;
} 
```

# c++ - 如何将信号连接到插槽

> ID：15854685
> 
> 赞同：0
> 
> 时间：2013-04-06T18:46:01.593
> 
> 标签：c++, qt, signals-slots

我让 Qt-Creator 使用 Qt 为我生成了一个基本的窗口应用程序。我在那里添加了一个按钮并尝试将其连接到一个插槽。它编译得很好，但应用程序崩溃并返回 3，请帮助我，我不知道该怎么办。

```
#include "form1.h"
#include "ui_form1.h"
#include <iostream>

Form1::Form1(QWidget *parent) : QMainWindow(parent), ui(new Ui::Form1)
{
    connect(ui->buttonLoad,&QPushButton::clicked,this,&Form1::ButtonLoadClick);
    ui->setupUi(this);
}

Form1::~Form1()
{
    delete ui;
}

void Form1::ButtonLoadClick(){
    using namespace std;
    cout << "click!" << endl;
} 
```

在标题中，我只添加了一个公共插槽。

```
#ifndef FORM1_H
#define FORM1_H

#include <QMainWindow>

namespace Ui {
class Form1;
}

class Form1 : public QMainWindow
{
    Q_OBJECT

public:
    explicit Form1(QWidget *parent = 0);
    ~Form1();

public slots:                        //here
    void ButtonLoadClick();          //here

private:
    Ui::Form1 *ui;
};

#endif // FORM1_H 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:00:20.300

尝试：

```
Form1::Form1(QWidget *parent) : QMainWindow(parent), ui(new Ui::Form1)
{
    ui->setupUi(this);
    connect(ui->buttonLoad,&QPushButton::clicked,this,&Form1::ButtonLoadClick);
} 
```

`setupUi`创建所有视觉组件，包括按钮。

# php - 构建多维然后添加到表

> ID：15854691
> 
> 赞同：0
> 
> 时间：2013-04-06T18:46:22.050
> 
> 标签：php, mysql, multidimensional-array, foreach, sql-insert

如何从 2 个或多个 foreach 循环创建单个多维数组：

```
$arr = array();

//loop 1
foreach (dogs[1] as $key => $url)
{
$arr[$key]['pos'] = $key;
$arr[$key]['place'] = "2";
$arr[$key]['title'] = "3";
$arr[$key]['picurl'] = trim($dogs[2][$key]);
$arr[$key]['picwidth'] = "5";
$arr[$key]['picheight'] = "6";
$arr[$key]['titleurl'] = $url;
}

//loop 2
foreach (cats[1] as $key => $url)
{
$arr[$key]['pos'] = $key;
$arr[$key]['place'] = "2";
$arr[$key]['title'] = "3";
$arr[$key]['picurl'] = trim($cats[2][$key]);
$arr[$key]['picwidth'] = "5";
$arr[$key]['picheight'] = "6";
$arr[$key]['titleurl'] = $url;
} 
```

然后将整个新的多维数组添加到 mysql 表中，其中表中称为“链接”的每一列已经对应于数组中的行名（pos、place、title、picurl、picwidth、picheight、titleurl）......（其中在插入数据库之前已由两个 foreach 循环预先填充）

不确定如何连接到数据库。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:53:15.447

您需要使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)连接到数据库。我个人更喜欢 PDO，但任何一个都可以。然后你会想要[准备](http://www.php.net/manual/en/pdo.prepare.php)一个语句，然后在数组的循环中[执行](http://www.php.net/manual/en/pdostatement.execute.php)它。`foreach`确保使用参数准备它，然后在执行语句中绑定这些参数；不要将变量直接插入到查询字符串中。

# mongodb - MongoDB：如何将另一个字段（不同于 _id）设置为 mongo 文档的 ID？

> ID：15854693
> 
> 赞同：13
> 
> 时间：2013-04-06T18:46:29.973
> 
> 标签：mongodb, nosql

例如，如果我想将用户名作为我的 mongo 文档的唯一 ID 而不是默认的“_id”怎么办？

我想使用 mongo.exe 控制台来实现这一点。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T19:00:05.517

MongoDB 需要 _id 属性作为它自动索引的唯一主键。

你有两个选择：

1.  使用 _id 属性并将其设置为用户名。
2.  创建用户名属性，然后在该新属性上添加索引。您仍将拥有 _id，但可以使用用户名进行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T13:09:44.480

`_id`在复制中很重要。您可以创建没有`_id`索引的集合，但您**将永远无法复制数据库**。复制需要 `_id`每个集合上的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:43:18.327

> 我知道，有可能有像 {username: "John", age: 12} 这样的记录。我的意思是，没有_id。这该怎么做？

我不确定@Serges 的答案是如何不够清楚的，但是要重复一遍，没有办法。从技术上讲，您仍然可以在某些版本的 MongoDB 中取出上限集合中的 _id，但您不能这样做。

此外，我担心您使用用户名，这可能不是分片等活动的最佳选择，并且可能在集群等上创建高活跃度的“热点”，这都是理论上的，因为我不适合您的数据，但是，最好考虑一下这些东西。

# java - Java 在使用 Try/Catch 时陷入无限循环

> ID：15854694
> 
> 赞同：3
> 
> 时间：2013-04-06T18:46:34.333
> 
> 标签：java, try-catch

对于学校的一个项目，我试图使用 try/catch 来防止程序在用户输入字母而不是所需的输入类型（即双精度）时崩溃。

```
 public static double inputSide () {
    Scanner in = new Scanner(System.in);
    double side = -1;
    do {
        try {
        System.out.println("Enter a side length (in units):");
        side = in.nextDouble();
        }
        catch(InputMismatchException e){
            System.out.println("Must input number");

            }
    } while (side < 0);
    return side;
} 
```

当我执行这段代码时，它陷入了一个循环，它无限地输出“输入边长（以单位为单位）：”和“必须输入数字”。我是使用 try/catch 的新手，所以我可能只是不熟悉这种行为。无论如何，如果有人可以帮助我找出问题所在，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:47:10.500

如果输入错误，则必须释放缓冲区，在`catch`块中添加以下行：

```
in.next(); 
```

一切都应该工作：

```
public static double inputSide () {
    Scanner in = new Scanner(System.in);
    double side = -1;
    do {
        try {
            System.out.println("Enter a side length (in units):");
            side = in.nextDouble();
        }
        catch(InputMismatchException e){
            System.out.println("Must input number");
            //this line frees the buffer
            in.next();
        }
    } while (side < 0);
    return side;
} 
```

将来，考虑使用

```
if(in.hasNextDouble()){
    //read
} 
```

而不是 try-catch 块

# php - 通过我的 REST API 连接 Google REST API 不起作用

> ID：15854698
> 
> 赞同：5
> 
> 时间：2013-04-06T18:47:02.797
> 
> 标签：php, web-services, api, codeigniter, rest

我有这个具有以下结构的应用程序 ![在此处输入图像描述](https://i.stack.imgur.com/DjqnX.png)

我正在使用**rest 客户端库** [https://github.com/philsturgeon/codeigniter-restclient](https://github.com/philsturgeon/codeigniter-restclient) 连接到**MyAPI**并使用**php api 客户端** [http://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)进行连接到**谷歌 API**

我的控制器代码如下

```
 function index()
    {
        if($this->form_validation->run())
        {
           $logged = $this->rest->get('auth/user',array(
               'email'=>$this->input->post('email')
                   )); 
           var_dump($logged);
        }
        $this->load->view('layout/login',$this->data);
    } 
```

我处理此请求的 API 代码如下，它确保用户存在于我的数据库中并通过 Google 进行身份验证

```
function user_get()
    {
        $response=NULL;
        $data=array(
            'email'=>$this->get('email')
        );
        $google_account=$this->google->authenticate();
        if(  isset($google_account) && $this->user_model->login($data))
        {
            $response->status='success';
            $response->message=$google_account;
        }
        else
        {
            $response->status='error';
            $response->message='Failed to authenticate user';   
        }
        $this->response($response,200);
    } 
```

库`Google`函数“Authenticate”如下

```
function authenticate()
    {
        $oauth2 = new Google_Oauth2Service($this->client);
        if (isset($_GET['code']))
        {
            $this->client->authenticate($_GET['code']);
            $_SESSION['token'] = $this->client->getAccessToken();
            $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
            header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
            return;
        }
        if (isset($_SESSION['token'])) 
        {
            $this->client->setAccessToken($_SESSION['token']);
        }
        if (isset($_REQUEST['logout'])) 
        {
            unset($_SESSION['token']);
            $this->client->revokeToken();
        }
        if ($this->client->getAccessToken()) 
        {
            $user = $oauth2->userinfo->get();
            // The access token may have been updated lazily.
            $_SESSION['token'] = $this->client->getAccessToken();
            return $user;
        } 
        else 
        {
            $authUrl = $this->client->createAuthUrl();
            redirect($authUrl);
        }

    } 
```

**问题是** 当我通过直接 url 连接这个浏览器时， `http://localhost/hac_dc/api/auth/user/ahmed.samy.cs@gmail.com` 我得到了完美的 JSON 响应

但是当我使用休息客户端连接它时

我得到响应`false`我尝试改变我使用我的休息客户端的方式我尝试添加第三个参数`JSON`作为 MIME`application/json`但没有成功

我不知道通过我的 REST API 连接另一个 REST API 是否有问题或不好的做法，

拉了我几个小时的头发，请帮帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T06:28:32.877

您的 REST 客户端不处理 oauth 身份验证，是吗？我假设你应该以某种方式验证你的 REST 客户端，让它使用谷歌提供的访问令牌。

要手动执行此操作，您可以在手动访问 API 时（例如使用浏览器并检查浏览器会话）将您从 Google 收到的访问令牌保存到数据存储区。有了这个可用的访问令牌，您就可以为您的 REST 客户端恢复一个有效的会话。

向 Google 验证您的 REST 客户端，可以使用 cURL 或重用一些现有的库来完成，例如[https://github.com/philsturgeon/codeigniter-oauth2.git](https://github.com/philsturgeon/codeigniter-oauth2.git)。要向您自己的 API 验证您的 REST 客户端，您可以在向您的 api 添加身份验证额外层（如果缺少）之后使用 HTTP 基本/摘要身份验证（如 CodeIgniter-REST 客户端所建议）。

PS 在验证您的用户时，如果失败，401 响应状态代码可能更合法（另请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:19:07.773

问题是跨域请求错误。你可以连接

> localhost/hac_dc/api/auth/user/ahmed.samy.cs@gmail.com

因为您的服务器充当 Web 代理。但是您不能使用简单的 getJSON 技术直接通过 REST 来完成。您可以在 jquery ajax 中使用 JSONP，它 100% 适用于跨域。JSONP 不是 JSON，它返回 js 函数调用到带有 JSON 参数的回调方法。您可以在下面的 ajax 调用中实现。但是 JSONP 中没有“成功”回调，为此您必须在 ajax 调用中提供回调参数并定义该回调函数。

```
$.ajax({
       crossDomain: true,
       type:"GET",
       contentType: "text; charset=utf-8",
       url: YOUR_URL + "&callback=mycallback",
        jsonp:'jsonp',
       dataType: "jsonp"
       });
function mycallback(result){
    //your callback operation
} 
```

# ios - 获取特定字符前后部分 NSString 的范围

> ID：15854701
> 
> 赞同：0
> 
> 时间：2013-04-06T18:47:17.660
> 
> 标签：ios, objective-c, string, nsstring, nsrange

我有一个非常简单的问题，但是我不知道如何解决这个问题。我想获得我的 NSString 的两个部分的范围。

我有一个时间，比如说 9:42，我想隔离字符串的小时和分钟部分的 NSRange，所以冒号之前的字符串部分和之后的部分。

有没有人知道解决这个问题的最佳方法？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T18:52:11.713

```
NSArray *subStrings = [myString componentsSeparatedByString:@":"]; 
NSString *hour = [subStrings objectAtIndex:0];
NSString *minutes = [subStrings objectAtIndex:1]; 
```

希望这可以帮助...

# android - 如何使用 Android TableLayout 创建跨越多行的布局？

> ID：15854703
> 
> 赞同：-1
> 
> 时间：2013-04-06T18:47:45.080
> 
> 标签：android, tablelayout, android-tablelayout

我将如何使用 tablelayout 创建以下布局？列跨越很简单，但我没有找到任何关于行跨越的明确指导。

![在此处输入图像描述](https://i.stack.imgur.com/0txa5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:55:37.070

您不能直接执行此操作，而是必须使用嵌套布局。在您的情况下，使用嵌套的 TableLayouts 将非常低效，因此您应该使用其他布局的组合。

尝试类似：

```
LinearLayout with vertical orientation (1)
  LinearLayout with a horizontal orientation (2)
    Box like view + LinearLayout with vertical orientation (3)
                      Row 1
                      LinearLayout with horizontal orientation (4)
                        The Two Views
                      Row 3
  Your other large view
  Your other other large View 
```

这是您的布局的颜色编码版本（每种颜色都是新的父布局）

![在此处输入图像描述](https://i.stack.imgur.com/WyOLx.png)

# c++ - 使用不带名称的 shared_ptr？！

> ID：15854705
> 
> 赞同：0
> 
> 时间：2013-04-06T18:47:50.317
> 
> 标签：c++

我正在阅读“游戏编码完成”这本书，它基本上是关于游戏引擎的概念。关于资源缓存的部分有一些我不太明白的代码。

```
extern shared_ptr<IResourceLoader> CreateWAVResourceLoader(); 
```

CreateWAVResourceLoader() 看起来像

```
 shared_ptr<IResourceLoader> CreateWAVResourceLoader()
{
    return shared_ptr<IResourceLoader>(GCC_NEW WaveResourceLoader());
} 
```

然后作者注册了wave资源加载器

```
m_ResCache->RegisterLoader(CreateWAVResourceLoader()); 
```

对我来说，这条线`extern shared_ptr<IResourceLoader> CreateWAVResourceLoader();`有点令人困惑，因为我正在调用返回 shared_ptr 的函数，但是我如何使用没有名称的指针呢？我很确定这是我缺乏 C++ 经验，所以请赐教。:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:50:22.063

该行*是*一个函数声明。它被命名`CreateWAVResourceLoader`，没有参数，并返回一个`shared_ptr<IResourceLoader>`.

当你说：

```
m_ResCache->RegisterLoader(CreateWAVResourceLoader()); 
```

那是你打电话的时候。它将函数返回的临时共享指针传递到`RegisterLoader`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:52:45.567

> 但是我怎样才能使用没有名字的指针呢？

您不是将使用 shared_ptr 的人，而是对象`m_ResCache`。我假设对象有一个处理资源的接口，并在内部跟踪 shared_ptrs。

即是这样的：

```
class foo {
  public:
    RegisterLoader(shared_ptr<IResourceLoader> ptr) { internal_ptr = ptr; }

    DoSomethingWithLoader() { /* ... */ }
  private:
    shared_ptr<IResourceLoader> internal_ptr;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:51:56.603

```
extern shared_ptr<IResourceLoader> CreateWAVResourceLoader(); 
```

只是意味着该函数将在另一个文件（extern）中实现并且它将返回shared_ptr。整行只是一个函数声明

```
shared_ptr<IResourceLoader> CreateWAVResourceLoader()
{
    return shared_ptr<IResourceLoader>(GCC_NEW WaveResourceLoader());
} 
```

只是功能的实现。

# c# - 如何将 xaml 属性绑定到另一个类中的静态变量？

> ID：15854708
> 
> 赞同：35
> 
> 时间：2013-04-06T18:48:03.930
> 
> 标签：c#, wpf, xaml

我有这个 xaml 文件，我在其中尝试将文本块背景绑定到另一个类中的静态变量，我该如何实现？

我知道这可能很愚蠢，但我刚从 Win-forms 搬走，感觉有点失落。

这就是我的意思：

```
<TextBlock Text="some text"
           TextWrapping="WrapWithOverflow"
           Background="{Binding Path=SomeVariable}" /> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-06T18:52:40.583

首先你不能绑定到`variable`. 您只能`properties`从 XAML 绑定。对于绑定到静态属性，您可以通过这种方式进行（假设您想绑定`Text`的属性`TextBlock`） -

```
<TextBlock Text="{Binding Source={x:Static local:YourClassName.PropertyName}}"/> 
```

您的类所在`local`的命名空间在哪里，您需要在上面的 xaml 文件中声明，如下所示 -

```
xmlns:local="clr-namespace:YourNameSpace" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-06T19:09:15.597

您实际上不能绑定到静态属性（INotifyPropertyChanged 仅对实例有意义），所以这应该足够了......

```
{x:Static my:MyTestStaticClass.MyProperty} 
```

或者例如

```
<TextBox Text="{x:Static my:MyTestStaticClass.MyProperty}" Width="500" Height="100" /> 
```

确保包含`namespace`- 即`my`在 XAML 中定义`xmlns:my="clr-namespace:MyNamespace"`

* * *

**编辑：从代码绑定**
（这部分有一些混合的答案，所以我认为扩展是有意义的，把它放在一个地方）

* * *

## `OneTime`捆绑：

您可以只使用`textBlock.Text = MyStaticClass.Left`（请注意放置的位置，初始化后）

## `TwoWay`（或`OneWayToSource`）绑定：

```
Binding binding = new Binding();
//binding.Source = typeof(MyStaticClass);
// System.InvalidOperationException: 'Binding.StaticSource cannot be set while using Binding.Source.'
binding.Path = new PropertyPath(typeof(MyStaticClass).GetProperty(nameof(MyStaticClass.Left)));
binding.Mode = BindingMode.TwoWay;
binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
this.SetBinding(Window.LeftProperty, binding); 
```

...当然，如果您从代码中设置绑定，请删除 XAML 中的任何绑定。

## `OneWay`（来自源的属性更改）：

如果您需要在源属性更改时更新目标（即控件的属性，在这种情况下为 Window.Left），则静态类无法实现（根据我上面的评论，您需要已`INotifyPropertyChanged`实现，因此您可以只使用包装类，实现`INotifyPropertyChanged`并将其连接到您感兴趣的静态属性（前提是您知道如何跟踪静态属性的更改，即从这一点开始，这更像是一个“设计”问题，我建议重新设计并将其全部放在一个“非静态”类中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-26T15:39:41.930

您可以使用较新的版本`x:Bind`来执行此操作，只需使用：

```
<TextBlock Text="{x:Bind YourClassName.PropertyName}"/> 
```

# c - 使用自定义分配实现分配内存时的段错误；适用于所有大小，但 8 字节

> ID：15854713
> 
> 赞同：1
> 
> 时间：2013-04-06T18:48:23.443
> 
> 标签：c, memory-management, segmentation-fault

我有一个任务的自定义分配，几乎完成了。不幸的是，我遇到了一个我似乎无法诊断的问题。分配由执行缓存分配（< 2kB）和区域分配（> 2kB）的两个函数处理。这是我的内存结构：

```
 23 typedef struct slab {
 24         void *addr;
 25         int bm[SLAB_SIZE/8/(8*sizeof(int))]; // bitmap for the slab
 26         struct slab *next;
 27 } slab;

 40 typedef struct {
 41         int alloc_unit;
 42         slab S;
 43 } cache;

 46 typedef struct { // structure for the entire memory
 47         cache C[9];
 48         region *R;
 49 } memory; 
```

（注意：所有平板的位图大小相同，效率有点低，但我想让它首先像这样工作，而不是到处都有大量重复的代码）

问题在于相当复杂的 allocate_cache 函数，该函数*适用于 8 字节以上的所有分配*。我通过分配 50-100k 个 16B、32B、... 2kB 的实例对它进行了一些激烈的测试，一切正常。逻辑如下：每个都`cache`包含一个`slab`开头。每个都`slab`可以有`SLAB_SIZE/alloc_unit slots`，不同的slab不同（所以2kB的slab可以包含多达32个2kB内存的插槽，1kB的slab包含64个插槽，依此类推）。

这是我的分配缓存功能：

```
 55 void *allocate_cache(unsigned int size) { // cache allocation
 56
 57         // 1\. Select the cache
 58         int ci = 0, si, pos, bmi; // cache_index, slot_index, position, bitmap index
 59         int slbn = 0; // slab number
 60         unsigned short check = 0;
 61         while ((size-1) >> (ci+3))
 62                 ci++;
 63         // 2\. Find a slot
 64         bmi = 0; // bitmap index
 65         int lbmi = 0; // 'linked' bitmap index
 66         int counter = 0;
 67         int coefficient = SLAB_SIZE/M.C[ci].alloc_unit;
 68         do {
 69                 pos = find_zero_bit(M.C[ci].S.bm[bmi]); // Find the first zero bit in the bitmap
 70                 if (pos == -1) { bmi++; // If bm[bmi] does not have free slots, keep checking the map...
 71                         if(bmi == coefficient/(8*sizeof(int))){ // If bmi is max size, then we need to check
 72                                 slab *next_slab = &M.C[ci].S;            // the following slabs, if there are any.
 73                                 while(next_slab->next != NULL){ // While there are additional slabs
 74                                         next_slab = next_slab->next;
 75                                         slbn++; // Increment the slab counter.
 76                                         while(lbmi < bmi) { // Go through the slots in this slab too
 77                                                 pos = find_zero_bit(next_slab->bm[lbmi]); // Until a free slot has been found
 78                                                 if(pos != -1) { // If a free slot has been found...
 79                                                         set_bit(&(next_slab->bm[lbmi]), pos); // Mark it as occupied...
 80                                                         check = 1;
 81                                                         break;  // And break out of the loop.
 82                                                 }
 83                                         lbmi++; counter++;
 84                                         }
 85                                 if(check == 1) break; // If we already found a free slot in one of the slots, break.
 86                                 lbmi = 0;
 87                                 }
 88                         }
 89                 }
 90                 else break;
 91         } while(bmi < coefficient/(8*sizeof(int)));
 92         si = bmi*32 + counter*32 + (pos - 1);
 93         // compute the slot index based on bmi,  pos and counter
 94         // 3.a Slot not found => allocate a new slab
 95         printf("pos = %d , si = %d, bmi = %d, slbn = %d lbmi = %d counter = %d\n", pos, si, bmi, slbn, lbmi, counter); // sanity check
 96         if(pos == 32 && ((si+1) % coefficient == 0)) {
 97                 printf("===== SLAB FULL. NOW CREATING NEW SLAB. =====\n");
 98                 // Initialize a new slab.
 99                 slab *temp = &M.C[ci].S; // Set temp to the initially allocated slab
100                 while(temp->next != NULL) temp = temp->next; // Get the last currently allocated slab
101                 void *new_addr = mmap(NULL, SLAB_SIZE + sizeof(slab), PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);
102                 slab *new_slab = new_addr;
103                 new_slab->addr = (char *)new_addr + sizeof(slab);
104                 temp->next = new_slab; // Set the new slab as the one following the existing slabs
105                 temp->next->addr = new_slab->addr; // Set the new slab's address to the newly mmap'd address
106                 temp->next->next = NULL; // Set the new slab's NEXT pointer to NULL
107                 bzero(&new_slab->bm, SLAB_SIZE/M.C[ci].alloc_unit/8); // Zero-out the new slab's bitmap
108                 if(temp->addr == MAP_FAILED) { // Check if mmap succeeded...
109                         printf("mmap failed. Exiting...\n");
110                         exit(-1);
111                 }
112                 printf("Allocated memory for cache %d's slab %d  at address %p\n", ci, slbn, temp->next);
113         }
114         printf("Use cache %d , slab %d (allocation unit size: %d)\n", ci, slbn,M.C[ci].alloc_unit);
115         printf("Found slot %d in slab %d of cache %d\n", si % (SLAB_SIZE/M.C[ci].alloc_unit), slbn, ci);
116
117         // 3.b Slot found
118
119         if(M.C[ci].S.addr == NULL) { // Slab not allocated yet
120                 M.C[ci].S.addr = mmap(NULL, SLAB_SIZE, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);
121                 printf("Allocated memory for cache %d's slab at address %p\n", ci, M.C[ci].S.addr);
122         }
123
124         if(M.C[ci].S.addr == MAP_FAILED) {
125                 perror("mmap failed\n");
126                 exit(-1);
127         }
128         set_bit(&M.C[ci].S.bm[bmi], pos); // mark the bit as occupied
129
130         // 4\. Return address
131
132         return M.C[ci].S.addr + si*M.C[ci].alloc_unit;
133 } 
```

违规行似乎是`line 77`。运行 GDB 会给我以下结果：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000400847 in allocate_cache (size=5) at allocator.c:77
77 pos = find_zero_bit(next_slab->bm[lbmi]); // Until a free slot has been found 
```

但是，我不明白这是怎么回事。`next_slab`已正确初始化 ( `line 101-111`，并且 bm 是使用 bzero ( ) 清零的位图`line 107`。因此，我倾向于认为这是一个不同的问题，只是在第 107 行弹出，但我无法诊断它几天。

我也一直在检查我的逻辑，以确保我没有做任何愚蠢的事情，比如覆盖slab struct 地址，但据我所知，mmap 提供给我的范围不允许这种情况发生。

任何帮助或指示将不胜感激。

PS。如果您希望我以任何方式重新格式化代码，请告诉我。我意识到这可能有点难看。

**编辑**：一开始的缓存初始化是在我的`init_memory()`函数中完成的。与缓存相关的行如下：

```
161         // Init the caches
162         for(i =0; i<9; i++) {
163                 M.C[i].alloc_unit = 8<<i;
164                 M.C[i].S.addr = NULL;
165                 M.C[i].S.next = NULL;
166                 bzero(M.C[i].S.bm, SLAB_SIZE/M.C[i].alloc_unit/8);
167         } 
```

**更新**：看来我发现了错误。这是一个逻辑错误，而不是其他任何事情。我的位图数组的大小为 256，即 0..255。在 8 字节分配的情况下，位图正确设置为 256，表示最后一个空闲槽已用完，但这与我的位图定义相冲突，因为 bm[2​​56] 是非法读取。因此，未定义的行为。我通过简单地将位图数组的大小增加 1 来解决这个问题，即`int bm[((SLAB_SIZE/8)/(8*sizeof(int)))+1];`.

非常感谢 Koushik，他帮助我解决了这个问题。他建议我在几个地方添加的括号可能也为我省去了一些调试方面的麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:41:30.547

问题：分段错误。

原因：指针未初始化。

地点和地点：

第 72 行：

```
slab *next_slab = &M.C[ci].S; 
```

这里`M.C[ci].S.next`应该是`NULL`在进入

```
void *allocate_cache(unsigned int size) 
```

取消引用在哪里完成？：

第 77 行：

```
pos = find_zero_bit(next_slab->bm[lbmi]); 
```

真实案例的原因：

```
while(next_slab->next != NULL) 
```

**未定义的行为**。因为`next_slab->next`没有初始化。

另一个注意事项：

```
#define PAGE_SIZE 1024 better be #define PAGE_SIZE (1024)
#define SLAB_SIZE 16*PAGE_SIZE should be #define SLAB_SIZE (16*(PAGE_SIZE)) 
```

原因：第 67 行（还有其他地方）

```
int coefficient = SLAB_SIZE/M.C[ci].alloc_unit; is interpreted as
int coefficient = 16*1024/M.C[ci].alloc_unit; 
```

这里乘法和除法具有相同的优先级。

# android - 在列表项布局中设置重力

> ID：15854718
> 
> 赞同：2
> 
> 时间：2013-04-06T18:48:51.640
> 
> 标签：android, listview, gravity

我在设置列表项布局的重力时遇到问题。我有一个包含 2 个文本视图的列表布局。第一个有右重力，第二个有左重力。当我加载列表视图时，我总是得到正确的重力。

这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/poem_verse_list_item_01"
        style="@style/TextAppearanceMedium"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:gravity="right" />

    <TextView
        android:id="@+id/poem_verse_list_item_02"
        style="@style/TextAppearanceMedium"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:gravity="left" />

</LinearLayout> 
```

这是我的光标及其 ViewBinder：

```
public class CustomViewBinder implements ViewBinder {

    @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

        int getIndex = cursor.getColumnIndex(ClubCP.COLUMN_POSITION);
        int position = cursor.getInt(getIndex);
       // Log.i("ViewBinder position",position);

        TextView right =(TextView)view;
        int viewId = view.getId();
        switch(position){
        case 0 :
             //   Right = 0,

            if(viewId==R.id.poem_verse_list_item_02){
                view.setVisibility(view.GONE);
            }
            else if(viewId==R.id.poem_verse_list_item_01){
                view.setVisibility(view.VISIBLE);
            }
            //left.setVisibility(left.GONE);
            //right.setGravity(Gravity.RIGHT);
           // text.setVisibility(text.GONE);
          //  return true;
        case 1:
               //     Left = 1,
            if(viewId==R.id.poem_verse_list_item_02){
                view.setVisibility(view.GONE);
            }
            else if(viewId==R.id.poem_verse_list_item_01){
                view.setVisibility(view.VISIBLE);
            }

            //left.setVisibility(left.GONE);
            //right.setGravity(Gravity.LEFT);
             // return true;
        case 2:
        case 3:

        case 4:

        case -1:

        }

        return false;
        }
}

SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.poem_verse_list_item, c, 
                columns, new int[] {R.id.poem_verse_list_item_01,R.id.poem_verse_list_item_02}, 0); 
```

我测试了很多，但每次我都只得到左右重力......我希望有人能帮助我。谢谢你的时间。

这是我的活动，包括 ListView 布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/FrameLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ff64512f"
android:paddingBottom="0dp"
android:paddingLeft="0dp"
android:paddingRight="0dp"
android:paddingTop="0dp"
tools:context=".Read_peom" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scaleType="fitXY"
    android:src="@drawable/list_top_repeat" />

<ImageView

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:scaleType="fitXY"
    android:src="@drawable/list_bottom_repeat" />

<ImageView

    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:scaleType="fitXY"
    android:src="@drawable/list_left_repeat" />

<ImageView

    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:scaleType="fitXY"
    android:src="@drawable/list_right_repeat" />

<ImageView

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitXY"
    android:src="@drawable/list_top_left_no_repeat" />

<ImageView

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:src="@drawable/list_top_right_no_repeat" />

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:src="@drawable/list_bottom_left_no_repeat" />

<ImageView

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|right"
    android:src="@drawable/list_bottom_right_no_repeat" />

<TextView
    android:id="@+id/txt_poem_container_header"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<ListView
    android:id="@+id/list_poem_container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal|center"
    android:layout_margin="@dimen/list_top_margin"
    android:choiceMode="none"
    android:clickable="false"
    android:longClickable="false"
    android:padding="5dp" >

</ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:07:50.450

`android:layout_gravity`从两个 TextViews 中删除`android:layout_width="match_parent"`

或者

从两个 TextView 中创建`android:layout_width="wrap_content"`和删除。`android:gravity`

别的

您也可以尝试使用具有 android:layout_width="wrap_content" 和 android:layout_alignParentLeft 或 android:layout_alignParentRight 设置为 true 的 TextView 的 RelativeLayout。

**编辑**：要调试问题，请执行以下操作。使用静态数据创建一个 ArrayAdapter 并将其设置为列表适配器。

```
String[] arr = {"a","b","c"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.poem_verse_list_item, R.id.poem_verse_list_item_01, arr);
    setListAdapter(adapter);
} 
```

然后像这样使用 android:text 为 TextViews 设置一些值。

```
<TextView
    android:id="@+id/poem_verse_list_item_01"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:gravity="right"
    android:text="poem_verse_list_item_01" />

<TextView
    android:id="@+id/poem_verse_list_item_02"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:gravity="left" 
    android:text="poem_verse_list_item_02"/> 
```

因此，如果问题仍然存在，那么问题不在于视图活页夹。我建议您重新设计包含 ListView 的主布局文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:02:32.373

尝试更改`android:orientation="vertical"` 为 `android:orientation="horizontal"`

希望这对你有帮助

# shell - 从 csv 文件中删除重复的列

> ID：15854720
> 
> 赞同：1
> 
> 时间：2013-04-06T18:48:55.007
> 
> 标签：shell, csv, awk

我已经将 perfmon 输出到 csv，我需要删除任何重复的列，例如

COL1, Col2, Col3, COL1, Col4, Col5

当列重复时，它几乎总是相同的列，但并非每次都发生。到目前为止，我有几个手动步骤：

当列数大于它应该是我在单行上输出所有列标题：

```
head -n1 < output.csv|sed 's/,/\n/g' 
```

然后，当我知道哪些列号有罪时，我会手动删除，例如：

```
cut -d"," --complement -f5,11 < output.csv > output2.csv 
```

如果有人能指出我正确的方向，我将不胜感激！

更新以给出 output.csv 内容的粗略示例，任何使用过 perfmon 的人都应该熟悉：

```
"COLUMN1","Column2","Column3","COLUMN1","Column4"    
"1","1","1","1","1"  
"a","b","c","a","d"  
"x","dd","ffd","x","ef" 
```

我需要删除重复的 COLUMN1（第 4 列）

为了清楚起见，我正在尝试一种自动进入 output.csv 并删除重复列的方法，而不必告诉它要删除哪些列，就像我上面的手动方法一样。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:06:28.293

试试这个awk（不是真正的单行），它处理多个重复的列，它只检查标题（第一行）来决定哪些列是重复的。您的示例也以这种方式显示。

awk 脚本（单行版本）：

```
awk -F, 'NR==1{for(i=1;i<=NF;i++)if(!($i in v)){ v[$i];t[i]}}{s=""; for(i=1;i<=NF;i++)if(i in t)s=s sprintf("%s,",$i);if(s){sub(/,$/,"",s);print s}} ' file 
```

清除版本（相同的脚本）：

```
awk -F, 'NR==1{
        for(i=1;i<=NF;i++)
                if(!($i in v)){v[$i];t[i]}
        }
        {s="" 
        for(i=1;i<=NF;i++)
                if(i in t)
                        s=s sprintf("%s,",$i)
                        if(s){
                                sub(/,$/,"",s)
                                print s
                        }
        } ' file 
```

举个例子（注意我创建了两个重复的 cols ）：

```
kent$  cat file
COL1,COL2,COL3,COL1,COL4,COL2
1,2,3,1,4,2
a1,a2,a3,a1,a4,a2
b1,b2,b3,b1,b4,b2
d1,d2,d3,d1,d4,d2

kent$  awk -F, 'NR==1{
        for(i=1;i<=NF;i++)
                if(!($i in v)){v[$i];t[i]}
        }
        {s="" 
        for(i=1;i<=NF;i++)
                if(i in t)
                        s=s sprintf("%s,",$i)
                        if(s){
                                sub(/,$/,"",s)
                                print s
                        }
        } ' file
COL1,COL2,COL3,COL4
1,2,3,4
a1,a2,a3,a4
b1,b2,b3,b4
d1,d2,d3,d4 
```

# vb.net - 如何通过模块添加行datagridview数据绑定控件

> ID：15854725
> 
> 赞同：0
> 
> 时间：2013-04-06T18:49:17.243
> 
> 标签：vb.net, datagridview, module, row, add

在我的项目中，我必须创建一个模块，假设它的名称是“intjobs.vb”，我想在其中调用一个名为`dorow`.

这是模块：

```
 Module intjobs

    Public Sub dorow(fldtype, fldid, flddlvl)

      Dim fdt As New dataTDataSet.fieldsDataTable
      Dim dr As DataRow = fdt.NewRow
      dr.Item(0) = "del"
      dr.Item(1) = "up"
      dr.Item(2) = "down"
      dr.Item(3) = fldtype
      dr.Item(4) = False
      dr.Item(5) = fldid.ToString
      dr.Item(6) = flddlvl.ToString
      fdt.Rows.Add(dr)
      'Dim log As String = "Sub name: dorow {somevalue}"
      'logger(2, log)
  End Sub
End Module 
```

所以当我把这个 sub 放在与 datagridview 相同的 windows 窗体中时，它工作得很好，但是当我使用这个模块时它不会添加任何行。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:20:04.717

您可以通过使用正确的**Modifier**来实现：

1.  将网格视图的**Modifier设置为****Public**。
2.  在*模块*中使用与此类似的代码：

    ```
    Public Sub Modify_Cross_Module(ByRef DataGrid As DataGridView, _
                               ByVal firstColumnVal As String, _
                               ByVal secondColumnVal As String)

    DataGrid.Rows.Add(firstColumnVal, secondColumnVal)
    End Sub 
    ```

您必须确保**DataGrid**变量为***ByRef***。

***当***您调用该子程序时，请使用以下代码：

```
Modify_Cross_Module(DataGridView1, "FirstVal", "SecondVal") 
```

其中**DataGridView1**是您要向其添加行的 DataGridView。

# workflow - 为什么我们需要在使用插件注册工具注册自定义工作流程后重新启动 CRM 服务器才能使其正常工作

> ID：15854740
> 
> 赞同：3
> 
> 时间：2013-04-06T18:50:34.640
> 
> 标签：workflow, dynamics-crm, dynamics-crm-4, workflow-activity

我们可以有任何替代方法来使工作流程步骤中的自定义工作流程活动可运行。

我所做的一直是使用插件注册工具注册 dll，然后重新启动服务器。然后只有我们可以在 Workflow 上使用自定义的工作流活动。

我在重新启动 IIS 并希望它会完成但没有运气后尝试过。

一直重启服务器不应该是任何解决方案。有没有其他方法可以请建议。您的所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-10T00:03:53.580

1）不需要重启IIS；使用以下命令重新启动应用程序池（它的速度要快得多，并且不会中断可能在服务器上运行的其他应用程序；默认情况下它是“CrmAppPool”）：

```
%systemroot%\system32\inetsrv\appcmd recycle apppool CrmAppPool 
```

2）同样可以通过运行（powershell）来回收异步进程：

```
Restart-Service -displayname "Microsoft Dynamics CRM Asynchronous Processing Service" 
```

3）这两个命令都可以使用powershell命令远程运行：

```
powershell Invoke-Command [CrmServerName] -ScriptBlock { ["Restart-Service...."] } 
```

4）您不需要部署到服务器来调试插件。创建测试工具更容易/更快。下面的链接概述了如何为单元测试设置开发环境。

[我如何开发和单元测试 CRM 2011 插件](http://blogs.msdn.com/b/devkeydet/archive/2012/10/31/how-i-develop-and-unit-test-crm-2011-plugins.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T09:44:15.297

CRM 缓存 dll，重新启动服务会导致它刷新这些缓存。

如果您注册了一个同步插件，那么您需要重置 IIS。

如果您注册异步插件或自定义工作流活动，则需要重置异步服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T07:00:35.637

我们不需要重新启动服务器来使其运行插件代码，唯一的事情是您需要重新启动 IIS 之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T07:14:41.673

尝试重新启动 IIS，然后重新启动异步服务，这必须是唯一需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T16:02:57.203

您不需要重新启动任何东西。

您需要做的是在每次部署时增加要更新的程序集的内部版本号。

这确保 CRM 知道不使用它的缓存版本，而是将更新后的版本加载到数据库中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-12T10:00:04.027

如果您想在不需要重新启动的情况下查看 CWA，只需在插件注册工具中选择活动，然后按属性下方的“保存”按钮

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-15T05:32:06.203

这里的重点非常具体——

这不仅适用于 CRM，也适用于托管在 IIS 上的任何 Web 应用程序。Web App（适用于您的情况下的 CRM）在消息执行时第一次缓存 dll（插件消息/事件 - 尽管这是由 .net 平台在内部完成的，因此可以更有效地处理其他类似的调用。）。因此，在这种情况下，您需要从 Web 应用程序中清除同步的内容。这就是为什么您需要回收应用程序池的原因（SMART WAY -> 对于单个应用程序刷新，并且不影响服务器上的其他应用程序，您应该始终使用 APPPOOL Recycle 而不是重新启动 IIS。）

为此，我建议您编写一个 powershell 脚本来为您的应用程序回收 AppPool 并在 VS 中的项目（插件项目）的 Post build 事件中触发它。因此，这将使您的流程自动化，并将减少您的工作量。

关于自定义 WF 程序集，因为它在 Async 下执行。服务，因此您还需要从此处丢弃缓存的内容。

希望这可以帮助！

# c++ - C++ 对象创建时没有 new 关键字，但在构造函数中使用了 new 关键字

> ID：15854741
> 
> 赞同：0
> 
> 时间：2013-04-06T18:50:39.530
> 
> 标签：c++

如果我在不使用诸如“Object s(someval)”之类的 new 关键字的情况下创建了一个对象，但是该对象构造函数使用了 new，那么当该对象超出范围时，是否会为它的新分配调用析构函数？我觉得好像是，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:55:09.823

让我们给物体起个名字，好吗？

```
struct A {
    A() b(new B) {}
    B* b;
    C c;
};

A a; 
```

这里调用了`a`' 的析构函数**。**的析构函数也是如此`A::c`（被析构时会自动调用`a`）。

然而，`*A::b`' 的析构函数**没有**被调用——实际上，指针对象`A::b` *本身*被正确地释放了，但是因为它是一个原始类型（它是一个指针！）什么都没有发生。然而，*指针* `*A::b`需要通过调用手动销毁（并释放其内存）`delete`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:53:24.363

> 当该对象超出范围时，是否会为它的新分配调用析构函数？

这取决于如何`Object`定义。

如果返回的指针`new`存储在某个数据成员中`Object`，该数据成员`delete`被`Object`自身的析构函数调用，**那么是**`new`的，当`s`超出范围时，分配的对象也将被销毁。

**否则，没有**。在丢失对已分配对象的最后一个指针/引用之前，每个调用都`new`必须与相应的调用匹配`delete`，否则会发生*内存泄漏*。

由于这样做很容易失败，并且由于也很容易错误地取消引用悬空的指针（即指向生命周期已结束的对象），因此通常最好**避免通过原始指针执行手动内存管理,`new`和`delete`**（或它们的数组对应项）。

当您需要控制对象的生命周期时，总是更喜欢使用 RAII 包装器，例如`std::shared_ptr<>`or`std::unique_ptr<>`除非您真的知道自己在做什么并且不能做其他事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:53:19.777

不，`delete`如果您将该动态分配的指针存储为数据成员，则必须在析构函数中显式使用它。这也引入了三规则（C++ 11 中的五规则），这很麻烦。这就是为什么在可能的情况下应该优先使用堆栈分配的对象。

当需要指针时，请使用 RAII 包装器，例如`std::vector`动态分配的数组或智能指针，例如`std::unique_ptr`or `std::shared_ptr`，用于单个动态分配的对象。这些为您和您管理内存，这不是额外的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T18:53:33.897

不，它不会......您必须`delete`在您分配的对象的析构函数中定义`new`. 您使用在堆上创建一个对象`new`，当您的对象被销毁时，您将丢失对创建内存泄漏的对象的引用。为避免这种情况，您可以使用智能指针，例如`shared_ptr`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T18:53:46.483

不，您必须在析构函数中为该对象显式调用 delete

# php - PHP Webmatrix SQL Server 数据库连接

> ID：15854742
> 
> 赞同：0
> 
> 时间：2013-04-06T18:50:42.100
> 
> 标签：php, sql-server, database-connection

如何使用 Webmatrix 2 连接到 PHP 中的 MS SQL Server？

我的数据库中已经有一个活动连接，并且已经在我的 web.config 文件中。

在 C# 中，示例代码是：

```
 var db = Database.Open("MyDatabase");
  var selectedData = db.Query("SELECT * FROM myTable"); 
```

是否有 PHP 等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:35:37.010

我从下面的链接中得到了解决方案：

[http://blogs.msdn.com/b/sqlphp/archive/2010/08/04/microsoft-drivers-for-php-for-sql-server-2-0-released.aspx][1]

我能够在 Webmatrix 2 中使用 PHP 连接到 sql server。

# coldfusion - Coldfusion CFM 变量范围

> ID：15854744
> 
> 赞同：9
> 
> 时间：2013-04-06T18:50:50.897
> 
> 标签：coldfusion, scope

我之前在 cfm 页面上问过一个关于 cf 范围的问题（很高兴我了解 CFC 范围和潜在问题），但我仍然不清楚变量范围。

在我上一个问题的答案中，有人建议使用 cfm 页面不存在线程安全问题，并且您不会遇到两个不同用户访问同一页面并存在竞争条件或线程安全问题的情况（即使我只需将我的变量留在默认的 cfm 变量范围内，每个用户的变量范围将是隔离和独​​立的（这是我的最后一个问题[Coldfusion Scopes Clarification](https://stackoverflow.com/questions/15679723/coldfusion-scopes-clarification)）

但是，我已经阅读了这篇博客文章[http://blog.alexkyprianou.com/2010/09/20/variables-scope-in​​-coldfusion](http://blog.alexkyprianou.com/2010/09/20/variables-scope-in-coldfusion/) / 关于在 cfm 页面上使用函数和使用变量范围，这似乎建议在多个用户之间共享变量范围的场景（我在 CFC 的上下文中理解这个问题 - 它们更类似于 java 类并且变量范围是实例变量，因此如果 CFC 是共享的/应用程序，则会出现线程安全问题范围/单例），但这似乎与以前的答案相反 - 如果其他用户可以访问由 cfm 页面上的函数放入变量范围的变量，那么直接在 cfm 页面代码中放置在变量范围中的变量肯定是相同的吗？

我希望有一些清晰的文档和指南，但还没有真正找到不同范围的明确解释以及它们在哪里可用。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T21:47:00.720

丹是正确的，问题中引用的博客文章是完全错误的。Dan 的代码演示了这一点，我已经[在我的博客上对此进行了彻底的编写和测试](http://adamcameroncoldfusion.blogspot.co.uk/2013/04/overlapping-requests-will-not-cause.html)（它太大了，不能去这里）。

底线是 CFM 中的变量范围不受这种竞争条件的影响，因为每个请求的变量范围是不同的内存。所以一个`variables.foo`与另一个不同`variables.foo`，所以两者都不相交。

这同样适用于变量范围内的对象：它们的内部变量范围是一个不同的实体，因此任何数量的请求都可以在请求的变量范围内实例化一个 CFC，而 CFC 实例的变量范围也是离散的实体。

变量作用域唯一可以参与竞争条件的是存储在共享作用域中的对象的变量作用域。因为对该共享范围对象的所有引用都将引用内存中的同一对象，所以同一对象的变量范围在内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T00:53:32.817

当 2 个请求运行代码时，访问变量范围的 CFC 之外的函数不会出现线程安全问题，但是如果您使用 cfthread 或其他并行功能，您仍然可能会遇到变量范围被更改的问题，这可能会导致竞争条件. 通常，这个错误可能发生在你经常使用的变量上，比如在 for 循环中，“i”变量。

> for(i=1;i<10;i++){t=arr[i]; }

但随后另一个函数在第一个函数运行时执行此操作：

> for(i=1;i<20;i++){t=arr[i]; }

“i”变量需要成为局部变量以帮助使其成为线程安全的。您不希望第一个循环能够错误地超过 10，这很难多次调试。当我开始缓存对象并更广泛地使用 cfthread 时，我必须修复大量“i”变量和其他变量，以使我的函数在任何地方都是线程安全的。

您还可以通过从不更改现有对象来避免需要锁定。您可以改为在它们的副本上工作。这使得数据“不可变”。CFML 没有官方支持更有效地制作不可变对象，但您可以轻松制作副本。 [http://en.wikipedia.org/wiki/Immutable_object](http://en.wikipedia.org/wiki/Immutable_object)

对应用程序范围变量进行线程安全更改的简单示例：

```
var temp=structnew(); 
// build complete object
temp.myValue=true; 
// set complete object to application scope variable
application.myObject=temp; 
```

写入任何共享对象通常是危险的，因为变量可能未定义或部分构造。我总是构造完整的对象，并在最后将其设置为共享变量，就像上面的示例一样。如果重新创建数据的成本不会太高，这会使线程安全变得容易。CFC 中的变量作用域类似于其他语言中的私有成员变量。如果您修改共享对象中的数据，如果您不能制作副本，您可能会使用 CFLOCK。

关于 Coldfusion 范围的一些混淆与 Coldfusion 5 和更早版本中的共享范围不太可靠有关。他们有严重的线程安全问题，可能导致数据损坏或崩溃。如果您没有正确锁定，两个线程在某些条件下能够同时写入同一内​​存。当前的 CFML 引擎能够写入结构键而不会损坏/崩溃。现在，如果不考虑线程安全，您只是无法确定哪些数据实际上最终会作为值，但它通常不会损坏，除非您处理非 cfml 对象类型，如 CFX、Java 和其他. 线程安全错误仍然可能导致无限循环，该循环可能会挂起请求直到超时，但除非内存不足，否则它不应该崩溃。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T20:26:15.927

我认为该博客具有误导性。但是，如果您想自己看，请用他的功能写一个页面。让它看起来像这样。

```
<cffunction name="test" returntype="void">
<cfscript>
foo = now();
sleep(3 * 60 * 1000);  // should be 3 minutes
writedump(foo);
</cfscript>
<cffunction>

<cfdump var="#now()#">
<cfset test()> 
```

运行页面。在 3 分钟内，打开另一个浏览器或选项卡并再次运行。回到你第一次运行它的地方并等待结果。如果两个输出之间没有显着差异，那么您的第二个页面请求不会影响您的第一个。

请注意，我自己没有尝试过，但我的赌注是第二个请求不会影响第一个请求。

# c++ - 选择带有左值或右值参数的函数声明

> ID：15854747
> 
> 赞同：0
> 
> 时间：2013-04-06T18:50:53.837
> 
> 标签：c++, rvalue-reference, lvalue

有没有办法删除我所有功能的“垂直”版本，而无需将“命中”行更改为“固定”？

是的，我的程序运行良好，但我认为是否有办法从这个版本的所有功能中获得帮助。

请记住，这`int`实际上不在`int`我的程序中，而是类型别名，可以是对象（例如`container_reference<std::array<double,4>>`）或引用（例如`std::array<double,4> &`）

```
void func(int &&m) { cout << "rvalue: " << m << endl; }
void func(int  &m) { cout << "lvalue: "; func(std::move(m)); } // PLUMB!

int main() 
{
    int a = 5;
    func(a);    // HIT!
    func(std::move(a)); // FIXED!
    func(6);
    func(a + 5);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T18:58:32.727

我在理解你想要什么时遇到了一些麻烦，但这可能是一个选择：

```
template<typename T>
void func(T &&m) {
  // ...
} 
```

`T&&`被称为“通用引用”，因为由于引用折叠规则，它将绑定到左值和右值。

# oracle - PL/SQL FOR 循环隐式光标

> ID：15854749
> 
> 赞同：9
> 
> 时间：2013-04-06T18:51:03.313
> 
> 标签：oracle, for-loop, plsql, database-cursor

有 2 个表`EMPLOYEES`，作为主键`DEPARTMENTS`和外键。`department_id``DEPARTMENTS``EMPLOYEES`

我想打印属于特定部门的所有员工姓名。我知道它可以通过 JOINS 或`EXPLICIT`游标轻松实现。我想为什么不尝试使用 FOR 循环和`IMPLICIT`游标。

我的问题是这样写在语法上是否正确`INTO`。如果是这样，为什么不分配任何值？

```
DECLARE
    emp_dept_id employees.department_id%TYPE;
    emp_emp_id employees.employee_id%TYPE;
    emp_last_name employees.last_name%TYPE;
    dept_dept_id departments.department_id%TYPE;
    dept_dept_name departments.department_name%TYPE;
    v_count number DEFAULT 0;
BEGIN
    FOR i IN (SELECT DISTINCT department_id, department_name
                INTO dept_dept_id, dept_dept_name
        FROM departments)
    LOOP
        --v_COUNT := v_COUNT + 1;
        DBMS_OUTPUT.PUT_LINE('HELLO'||dept_dept_id||' '||dept_dept_name);
        FOR j IN (SELECT employee_id, last_name
            INTO emp_emp_id, emp_last_name
            FROM employees)
            --WHERE department_id=dept_dept_id)
        LOOP
            DBMS_OUTPUT.PUT_LINE(emp_emp_id||' '||emp_last_name);
            v_COUNT := v_COUNT + 1;
        END LOOP;
    END LOOP;
    DBMS_OUTPUT.PUT_LINE(v_COUNT);
END; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T18:55:52.690

您不要将 INTO 与隐式游标一起使用：

```
 DECLARE
        emp_dept_id employees.department_id%TYPE;
        emp_emp_id employees.employee_id%TYPE;
        emp_last_name employees.last_name%TYPE;
        v_count number DEFAULT 0;
    BEGIN
        FOR i IN (SELECT DISTINCT department_id, department_name
            FROM departments)
        LOOP
            --v_COUNT := v_COUNT + 1;
            DBMS_OUTPUT.PUT_LINE('HELLO'||i.department_id||' '||i.department_name);
            FOR j IN (SELECT employee_id, last_name
                INTO emp_emp_id, emp_last_name
                FROM employees)
                --WHERE department_id=i.department_id)
            LOOP
                DBMS_OUTPUT.PUT_LINE(emp_emp_id||' '||emp_last_name);
                v_COUNT := v_COUNT + 1;
            END LOOP;
        END LOOP;
        DBMS_OUTPUT.PUT_LINE(v_COUNT);
    END;
    / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:55:40.223

检查此页面：[http](http://www.techonthenet.com/oracle/loops/cursor_for.php) ://www.techonthenet.com/oracle/loops/cursor_for.php 。

我不认为你试图做的是有效的。将其分为两个步骤：FOR 循环和 INTO。你仍然可以在 FOR IN 中有一个 SELECT，它不能是一个 INTO。

# android - 用于在 Android 上测试的本地 mySql DB？

> ID：15854758
> 
> 赞同：1
> 
> 时间：2013-04-06T18:52:41.510
> 
> 标签：android, mysql, database, export, local

我想使用我网站上的 mySql 数据库来创建一个 android 应用程序，最好的方法是什么？

我想在我的计算机上使用我的本地数据库，在我完成对应用程序的编程后，连接到真实的数据库。

如何导出真实的数据库？使用 phpMyAdmin？或其他方式？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:12:22.977

如果您想直接导入当前数据库，我认为这不是一个好主意。Android 仅适用于[SQLite](http://www.sqlite.org/)数据库。此外，您应该实现[Android 特定逻辑](http://developer.android.com/training/basics/data-storage/databases.html)以使其在您的应用程序中工作。

我认为最好的选择是通过 HTTP 从您站点上的 REST 服务访问您的数据，您可以轻松地与 MySql db 进行通信。

# eclipse - 如何使用 phonegap 和 eclipse 插件为 windows 或 bada 开发应用程序？

> ID：15854759
> 
> 赞同：0
> 
> 时间：2013-04-06T18:52:42.830
> 
> 标签：eclipse, cordova, symbian, bada, tizen

我已经安装了 eclipse phonegap 插件，我可以很容易地为 android 制作应用程序。但是我想为任何其他平台制作应用程序，如 bada、tizen、blackberry 等。但是当我创建新的 Phonegap 项目时，它没有显示任何选择平台的选项。它直接带我到android。有什么方法可以使用这个插件为其他平台开发。

我用谷歌搜索了很多，但没有发现相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:00:19.920

可能您可能对钛感兴趣。最新版本支持（检查测试版）Tizen 和 Blackberry 10 以及 Android 和 iPhone。有了它，您将能够使用 javascript 进行移动应用程序开发。如果可能的话，它还会创建“本机”应用程序而不是 html。忘记了巴达。没了

# objective-c - iOS 相当于 Android 的 finish()

> ID：15854770
> 
> 赞同：9
> 
> 时间：2013-04-06T18:53:35.857
> 
> 标签：objective-c, uiviewcontroller

我对 iOS 开发比较陌生。我首先为 Android 开发了一个应用程序，现在正在将其移植到 iOS。我不知道的一件事是如何`ViewController`“走开”。我习惯了`finish()`Android中的方法。使用该方法，当前活动自行结束，并向用户呈现在打开当前屏幕之前打开的前一个屏幕。

我想要完成的是在保存记录后让我的“创建”屏幕消失。在 Android 世界中，我只需调用该`finish()`方法即可。什么是 iOS 等价物？

我在我的 iOS 应用程序中尝试了以下代码，希望视图会被动画化。

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

编辑：视图如下所示。

```
SettingsViewController *vc = [[SettingsViewController alloc] initWithNibName:@"SettingsView"]; 
controllers = [NSArray arrayWithObject:vc];
self.sideMenu.navigationController.viewControllers = controllers;
[self.sideMenu setMenuState:MFSideMenuStateClosed]; 
```

其中`controllers`定义如下：

```
NSArray *controllers = nil; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T18:57:44.703

你是如何呈现这个视图控制器的？

你用了`presentViewController:animated:completion:`吗？如果是这样，你想要这样的东西：

```
[self dismissViewControllerAnimated: YES]; 
```

如果您正在使用`pushViewController:animated:`，那么您不是在谈论模态视图。您正在谈论您推入堆栈的普通 ViewController。要“撤消”此操作，您需要弹出视图控制器：

```
[self.navigationController popViewControllerAnimated: YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T07:23:37.073

虽然`finish()`和`[self dismissViewControllerAnimated:YES]`在功能上相似，但它们并不完全相同，当我们`finish()`在Android中调用方法时，我们是在编程告诉Android系统从内存中完全销毁活动，当我们覆盖`onDestroy()`活动生命周期回调并添加时一个日志，然后在`finish()`调用时显示日志。`onDestroy()`当系统需要资源并通过完成活动来释放内存时也会调用。但

```
[self dismissViewControllerAnimated: YES]; 
```

不会从内存中删除 UIViewController 实例，IOS 中 onDestroy() 的等效回调方法是 viewDidUnload() ，它不会在消息 dismissViewController 上调用。我认为 IOS 系统只能在系统需要资源时为 UIViewController 实例释放内存，但我们不能以编程方式这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-13T10:39:27.140

推送您的视图控制器后调用此方法

```
func finish(){
var navigationArray = self.navigationController?.viewControllers //To get all UIViewController stack as Array
navigationArray!.remove(at: (navigationArray?.count)! - 2) // To remove previous UIViewController
self.navigationController?.viewControllers = navigationArray!
} 
```

# android - 在andengine中更改tmx图块

> ID：15854772
> 
> 赞同：2
> 
> 时间：2013-04-06T18:53:38.590
> 
> 标签：android, performance, tmx

我一直在使用[这种技术](http://www.andengine.org/forums/gles2/setglobaltileid-t6736.html#p34462)来更改我们游戏中的图块，但是我注意到当同时更改许多图块时性能损失相当大。我正在使用该技术为 TMX 地图上的图块设置动画。我想知道是否有人注意到使用该方法更改 tmx 磁贴的任何性能问题？有没有更有效的方法来改变 TMX Tiles？

为了避免性能损失，我能想到的唯一其他选择是将动画精灵附加到 TMX 层，但这似乎不是一个理想的解决方案。

任何意见，将不胜感激。

以下是我所指的方法：

```
 mTestTile.setGlobalTileID(mTMXTiledMap, mGloabalIndex);

 //After changing the global ID do this       
 final int TileHeight = mTMXTiledMap.getTileHeight();
 final int TileWidth = mTMXTiledMap.getTileWidth();           
 //See TMXLayer Class line 308 (getSpriteBatchIndex)
 lTMXLayer.setIndex(mTestTile.getTileRow() * mTMXTiledMap.getTileColumns() + mTestTile.getTileColumn());
lTMXLayer.drawWithoutChecks(mTestTile.getTextureRegion(), mTestTile.getTileX(),  mTestTile.getTileY(), lTileWidth, lTileHeight, Color.WHITE_ABGR_PACKED_FLOAT);     
mTMXTiledMap.mTestTMXLayer.submit();[/syntax] 
```

注意：我正在使用 GLES2 Anchor_Center 分支

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T11:35:18.083

我不确定你是否可以使用它，但我需要类似的东西。我的 TMX 地图中几乎没有我想要两帧（开/关）的对象。我没有使用地图层，而是使用了对象层。我已将此代码添加到`TMXTileset`类中：

```
public ITiledTextureRegion getTiledTextureRegionFromGlobalTileID(final int pGlobalTileID, final int pTiles) {
    ITextureRegion[] regions = new ITextureRegion[pTiles];
    for (int i = 0; i < pTiles; i++) {
        regions[i] = getTextureRegionFromGlobalTileID(pGlobalTileID + i);
    }

    return new TiledTextureRegion(this.mTexture, regions);
} 
```

我将所有开/关对象放到特殊对象层（使用平铺编辑器）。当然，tileset 必须组织起来，使 on 和 off 帧是按顺序排列的。

然后，当我创建地图时，我会遍历这些对象并创建平铺的精灵。我将它保存到一个特殊的列表中以供以后检索。然后当然从一个切换到另一个就像使用一样简单`setCurrentTileIndex()`

# ios - 仅以编程方式滚动？

> ID：15854777
> 
> 赞同：0
> 
> 时间：2013-04-06T18:53:57.610
> 
> 标签：ios, objective-c, uiscrollview

我不知道这是否有意义。我从界面构建器中将其连接为我`UIScrollView`的顶部的插座. 该图像也被连接为一个出口。我在工具栏上有一个按钮，当按下按钮时会调出键盘我想以编程方式滚动到视图的底部，当它退出时，我想以编程方式滚动到顶部。我不希望用户能够滚动只是让应用程序以编程方式滚动。`UIScrollView``UIImage``UIImage`

我似乎无法使这种方法起作用，我不确定为什么：/

```
- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:06:01.103

`scrollRectToVisible:animated:`在我看来，这是一种非直观的方法。为了完成您的工作，您应该能够设置`userInteractionEnabled`为`NO`on ，`UIScrollView`这将阻止用户滚动。

然后为了以编程方式滚动视图，您可以调用 scrollRectToVisible 但您需要给它一个`CGRect`代表您要显示的区域的值。所以在你的情况下滚动到顶部：

```
CGRect visibleFrame = CGRectMake(0, 0, CGRectGetWidth(self.view.bounds) , CGRectGetHeight(self.view.bounds));

[self.myScrollView scrollRectToVisible:visibleFrame animated:YES]; 
```

希望这可以帮助！

# javascript - 单击选择框时打开 Colorbox

> ID：15854779
> 
> 赞同：0
> 
> 时间：2013-04-06T18:54:06.320
> 
> 标签：javascript, jquery, colorbox

单击选择框时，我想打开一个颜色框。当他们选择一个选项时不必打开它，我只希望在他们单击向下箭头时打开它。我无法让它工作！

```
$("select").click(function () {
     $("#mydiv").colorbox({inline:true, width:"350"});

 });
<select> <option value="1"></option><option value="2"></option></select>
<div style="display:none;"><div id="mydiv"> content here </div></div> 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:01:48.513

您还需要向它传递一个元素：

```
$("select").click(function () {
     $.colorbox({inline:true, href:"#mydiv", width:"350"});
}); 
```

[**小提琴**](http://jsfiddle.net/KbhKf/)

# salesforce - Salesforce 计划不工作

> ID：15854781
> 
> 赞同：0
> 
> 时间：2013-04-06T18:54:44.877
> 
> 标签：salesforce

我有几个可调度的 HTTP 标注，并且设置为每隔一小时左右运行一次。在我在应用程序交换上部署应用程序并让销售人员下载它进行测试后，工作似乎没有执行。

我可以看到作业被安排相应地运行，但是数据库似乎永远不会改变。是否有任何原因会发生这种情况，或者我的代码中很有可能存在缺陷？

我在想它可能是权限，但我不确定（它是我正在部署的第一个应用程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:46:56.857

检查您的最终用户的组织是否已将您的端点添加到设置中的“远程站点设置”。端点是指被调用的地址（或只是域）。

如果课程安排正确（我相信这将是手动操作，而不仅仅是安装后神奇地发生的事情......除非您使用了安装后脚本？）您还可以检查 Setup -> Apex Jobs 并检查如果有任何错误。如果我是对的，由于远程站点设置，将出现关于不允许调用的错误。如果没有——你仍然有机会看到一些让你思考的东西。例如批处理作业已成功执行但有 0 次迭代 -> 问题？

最后但并非最不重要的一点 - 你总是可以尝试调试日志 :) 在设置中启用它们（或打开开发者控制台），`execute()`手动触发预定类并观察结果？如何手动触发？像这样粘贴到“执行匿名”的东西：

```
MySchedulableClass sched = new MySchedubulableClass();
sched.execute(null); 
```

或者 - 因为您知道预定课程中的内容 - 只需进行实验。

请注意，如果您可能正在执行的更新以某种方式违反例如您的客户端具有的验证规则 - 是的，数据库将保持不变。但在这种情况下，您仍然应该能够在设置 -> Apex 作业中看到失败。

# java - Selenium webdriver IE9事件未触发

> ID：15854782
> 
> 赞同：0
> 
> 时间：2013-04-06T18:54:51.527
> 
> 标签：java, selenium, selenium-webdriver

我正在使用nodejs，带有硒的苏打水

我在尝试让 javascript 触发事件时遇到问题，例如输入数据。脚本甚至无法通过在 IE 上创建客户端流程。只担心 IE 9+ 顺便说一句。

我错过了什么吗？这在最新的 FF 中运行良好。下面发布使用 FF 的示例代码

```
var soda = require('soda');
var assert = require('assert');
var browser = soda.createClient({
  url: 'http://192.168.12.1/', // localhost website
  port:5555,
  host:'192.168.1.3', //grid ip
  browser: 'firefox',
  browserTimeout:5
});

var testname = 'Nits' + parseInt(Math.random() * 100000000); //create unique name for new person.
console.log('randome name: ' + testname);

browser 
    .chain
    .session()  
    .setSpeed(speed)
    .setTimeout(20000)
    .open('/')
    .and(login('dev@dev.com', 'x1212GQtpS'))
    .and(killClient(killAtEnd))
    .end(function(err){
        console.log('done');
        if(err){
            console.log(err);
        }else{
            console.log("We're Good");
        }
        if (closeAtEnd){
            browser.testComplete(function() {
                console.log('killing browser');
            });
        }
    });

function login(user, pass) {
  return function(browser) {
    browser
    .click('css=a#loginButton')
    .type('css=input.input-medium.email',user)
    .type('css=input.input.pwd',pass)
    .clickAndWait('css=a.btn.login')
    .assertTextPresent('Clients',function(){ console.log('logged in ok')})
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:24:07.943

您能否更具体地了解脚本停止、失败或引发错误的确切位置？我怀疑 IE 无法处理您将 css 选择器放在一起的方式（即类名组合器，例如 'input.input.pwd' ）。我建议尝试使用不同的选择器或重写/简化现有的选择器，直到它正常工作。

# mysql - 使用 SQL 提取 N 或更少的最新记录

> ID：15854785
> 
> 赞同：-1
> 
> 时间：2013-04-06T18:55:02.043
> 
> 标签：mysql, sql

我在表中有`Date`（`timestamp`类型）列，称为`content`。
我应该如何编写查询以获取最新的 N 条记录（或更少，以防 count < N）？使用 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:57:47.160

```
SELECT * FROM `content` ORDER BY `date` DESC limit N; 
```

MySQL 有一个 nice 关键字`LIMIT`，它允许您获得所需的最大记录数。后面的整数`LIMIT`代表这个数字。`ORDER BY `date`` - 这样做是为了让记录首先使用“最新”日期值进行排序......因此使用前 N`LIMIT`是您想要的。

希望能帮助到你。

干杯

# macos - 简单的 Apple Automator 迭代器不起作用（使用 AppleScript） - 为什么？

> ID：15854786
> 
> 赞同：1
> 
> 时间：2013-04-06T18:55:03.177
> 
> 标签：macos, applescript, automator

我正在尝试做世界上最简单的事情——Automator 中的基本迭代器。工作流程如下：

获取变量的值（初始设置为 1）

运行 Applescript：

```
on run {input, parameters}
    set input to input + 1
    return input
end run 
```

设置变量的值

环形

它第一次工作，按预期从 1 移动到 2。但它在第二遍失败，给出错误

> 无法将 {} 设为类型号。(-1700)

我不知道为什么 - 我已经尝试将它作为整数从 Applescript 输出，它没有任何区别。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:19:22.473

您的错误是因为在您的工作流程的第二个循环中，您的 AppleScript 没有收到任何输入。我猜你的循环函数没有接收任何输入，因此它没有将任何内容传递回applescript。你的applescript和循环函数之间的任何东西都必须以某种方式干扰。

作为替代方案，试试这个作为你的applescript。您的自动化工作流程应该只有 2 个操作，这个 applescript 代码和循环操作设置为“使用当前结果......”。

在这段代码中，在第一个循环中，applescript 不会有任何输入，因此它会要求您输入，然后在后续循环中，applescript 将从循环操作接收输入，因此它将增加您的初始输入。

祝你好运。

```
on run {input, parameters}
    if input is {} then
        display dialog "Enter a number" default answer "1"
        set input to (text returned of result) as number
    else
        set input to input + 1
    end if
    return input
end run 
```

# initialization - IBM Worklight v5.0 中的错误：找不到变量 WL

> ID：15854791
> 
> 赞同：0
> 
> 时间：2013-04-06T18:55:45.430
> 
> 标签：initialization, ibm-mobilefirst

我在“common”文件夹中的示例 html 代码是：

```
*<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript">
        // Define WL namespace.
        var WL = WL ? WL : {};
        WL.StaticAppProps = {
   "APP_DISPLAY_NAME": "AndroidShowNativePage",
   "APP_SERVICES_URL": "\/apps\/services\/",
   "APP_VERSION": "1.0",
   "ENVIRONMENT": "android",
   "LOGIN_DISPLAY_TYPE": "embedded",
   "WORKLIGHT_ROOT_URL": "\/apps\/services\/api\/AndroidShowNativePage\/android\/"
};</script>

</head>
<body onload="WL.Client.init({})" id="content" style='display: none'>
<script >
function findItem()
{
   saveUserPref();
}
</script>

    <input type="button" name="locate" value="Locate" onclick="findItem();">

    <script src="js/My.js"></script>
    <script src="js/initOptions.js"></script>   
    <script src="js/messages.js"></script>
    <script src="js/auth.js"></script>
</body>* 
```

Javascript代码（My.js）是：

```
*function saveUserPref()
{
    alert('In saveUserPerf');
    WL.Client.setUserPref('favList', 'Apple');  
    alert('3');
}
function getUserFavList()
{
    WL.Client.getUserPref("favList");
}* 
```

然后我在 Android 中构建并运行，然后单击“findItem”按钮，我收到警报“In saveUserPref”，然后出现此错误：* *ReferenceError：找不到变量：WL ** 看起来像 WL.Client.getEnvironment () 被执行，WL 未找到。

我的问题是为什么我将 WL 作为未找到的变量？

我缺少任何基本知识吗？初始化 WL 命名空间和其他环境相关参数的基本概念是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:44:40.560

为什么你在标签中同时引用了`initOptions.js`AND ？`WL.Client.init({})``BODY`

从标签中删除`onload=WL.Client.init({})`调用。`BODY`Worklight 初始化过程现在仅在 initOptions.js 中进行。

# c# - 也具有匿名回调处理程序的 C# 异步方法无法正确流动

> ID：15854792
> 
> 赞同：3
> 
> 时间：2013-04-06T18:55:46.460
> 
> 标签：c#, .net, asynchronous, task, async-await

下面是 C#**异步**方法的代码，该方法还具有**WebClient**控件的两个事件的回调处理程序：**DownloadProgressChanged**和**OpenReadCompleted**。当我运行代码时，最初它会流向“ *await DownloadStringTaskAsync()* ”调用并退出。**然后我看到DownloadProgressChanged**的​​匿名事件处理程序代码触发，这就是我遇到问题的地方。然后代码流向“ *return strRet ”语句，因此该方法的返回值是在方法顶部分配给***strRet**的初始化值“(none)” ，而不是分配给**strRet的网页内容**在**OpenReadCompleted**匿名回调中。

所以我需要等待**OpenReadCompleted**回调在控制流到 return 语句之前执行，但我不确定如何正确执行此操作。如何更正代码，使其在**OpenReadCompleted**回调执行之前不会到达“ *return strRet* ”语句？

 **```
 /// <summary>
    /// This method downloads the contents of a URL to a string.  Returns the URL contents
    ///  as a string if it succeeds, throws an Exception if not.
    /// <param name="strUrl">The URL to download.</param>
    /// <param name="progress">An IProgress object to report download progress to.  May be NULL.</param>
    /// <param name="cancelToken">A cancellation token. May be NULL.</param>
    /// <param name="iNumSecondsToWait">The number of seconds to wait before cancelling the download. Default is 30 seconds</param>
    /// </summary>
    /// <remarks>
    /// Use "await" with this method wrapped in Task.run() to manage the process asynchronously.
    /// 
    /// NOTE: The DownloadProgressChanged() event is raised on the UI
    ///  thread so it is safe to do UI updates from the IProgress.Report()
    ///  method.
    /// </remarks>
    async public static Task<string> URLToString(string strUrl, IProgress<int> progress, CancellationToken cancelToken, int iNumSecondsToWait = 30)
    {
        // The string to be returned.
        string strRet = "(none)";

        strUrl = strUrl.Trim();

        if (String.IsNullOrWhiteSpace(strUrl))
            throw new ArgumentException("(Misc::URLToString) The URL is empty.");

        if (iNumSecondsToWait < 1)
            throw new ArgumentException("(Misc::URLToString) The number of seconds to wait is less than 1.");

        // Asynchronous download.  Note, the Silverlight version of WebClient does *not* implement 
        //  IDisposable.
        WebClient wc = new WebClient();

        // Create a download progress changed handler so we can pass on progress
        //  reports to the caller if they provided a progress report object.
        //  This event is raised on the UI thread.
        wc.DownloadProgressChanged += (s, e) =>
        {
            // Do we have a progress report handler?
            if (progress != null)
                // Yes, call it.
                progress.Report(e.ProgressPercentage);

            // If we have a cancellation token and the operation was cancelled, then abort the download.
            if (cancelToken != null)
                cancelToken.ThrowIfCancellationRequested();

        }; // wc.DownloadProgressChanged += (s, e) =>

        //  Use a Lambda expression for the "completed" handler
        //  that writes the downloaded contents as a string to a file.
        wc.OpenReadCompleted += (s, e) =>
        {
            // If we have a cancellation token and the operation was cancelled, then abort the download.
            if (cancelToken != null)
                cancelToken.ThrowIfCancellationRequested();

            // Return the downloaded file as a string.
            strRet = e.Result.ToString();
        }; // wc.OpenReadCompleted += (s, e) =>

        // Now make the call to download the file and do an asynchronous wait for the result.
        await wc.DownloadStringTaskAsync(new Uri(strUrl));

        // wc.DownloadStringAsync(new Uri(strUrl));

        return strRet;
    } // async public static void URLToStr 
```

=================================

**更新：**根据我收到的答案，我已将代码修改为以下内容：

```
 async public static Task<string> URLToStringAsync(string strUrl, IProgress<int> progress, CancellationToken cancelToken, int iNumSecondsToWait = 30)
    {
        strUrl = strUrl.Trim();

        if (String.IsNullOrWhiteSpace(strUrl))
            throw new ArgumentException("(Misc::URLToStringAsync) The URL is empty.");

        if (iNumSecondsToWait < 1)
            throw new ArgumentException("(Misc::URLToStringAsync) The number of seconds to wait is less than 1.");

        // Asynchronous download.  Note, the Silverlight version of WebClient does *not* implement 
        //  IDisposable.
        WebClient wc = new WebClient();

        // Create a download progress changed handler so we can pass on progress
        //  reports to the caller if they provided a progress report object.
        //  This event is raised on the UI thread.
        wc.DownloadProgressChanged += (s, e) =>
        {
            // Do we have a progress report handler?
            if (progress != null)
                // Yes, call it.
                progress.Report(e.ProgressPercentage);

            // If we have a cancellation token and the operation was cancelled, then abort the download.
            if (safeCancellationCheck(cancelToken))
                wc.CancelAsync();
        }; // wc.DownloadProgressChanged += (s, e) =>

        // Now make the call to download the file and do an asynchronous wait for the result.
        return await wc.DownloadStringTaskAsync(new Uri(strUrl));
    } // async public static void URLToStringAsync 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:15:42.397

我发现了几个问题：

a）从 MSDN 文档看来，DownloadStringTaskAsync 不会触发[DownloadProgressChanged](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)

b)只有当您使用 OpenReadAsync 创建请求时，才会触发[OpenReadCompleted事件。](http://msdn.microsoft.com/en-us/library/system.net.webclient.openreadcompleted.aspx)它不会为 DownloadStringTaskAsync 触发。

c) 您可以使用[DownloadStringCompleted](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadstringcompleted.aspx)事件来获取 DownloadStringTaskAsync 的结果，但是为什么如果您使用 async/await 您可以这样做：

```
strRet = await wc.DownloadStringTaskAsync(new Uri(strUrl)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T19:17:30.907

您正在混合几种不同的异步 API。`DownloadProgressChanged`and`OpenReadCompleted`都是[EAP 事件](http://msdn.microsoft.com/en-us/library/ms228969.aspx)，while`DownloadStringTaskAsync`是[TAP 方法](http://msdn.microsoft.com/en-us/library/hh873175.aspx)。

我建议您始终使用 EAP API 或 TAP API。更好的是，从转换`WebClient`为`HttpClient`.

顺便说一句，您可能不想`ThrowIfCancellationRequested`从事件处理程序中调用。相反，将您`CancellationToken`连接到`WebClient.CancelAsync`.**

# javascript - ModalPopupExtender 显示方法不适用于代码隐藏 javascript

> ID：15854795
> 
> 赞同：0
> 
> 时间：2013-04-06T18:55:53.647
> 
> 标签：javascript, modalpopupextender

我有一个 ajax modal popupextender，我想在后面的代码中的一些处理结束时使用 java 脚本来展示它。我收到消息错误：无法获取未定义或空引用的属性“显示”。

```
<asp:Panel ID="panel1" runat="server" Visible="true" BorderColor="Black" Style="display: none">
 <asp:UpdatePanel ID="uppanel1" runat="server">
  <ContentTemplate>
    <asp:Button ID="btn1" Text="Popup" Visible="true" runat="server" Style="display:none"/>    
    <ajaxToolKit:ModalPopupExtender ID="mpe1" runat="server" TargetControlID="btn1"     PopupControlID="panel1" RepositionMode="None"  PopupDragHandleControlID="drag1" BehaviorID="behave1"/>               
     <div id="div1" runat="server">                    
       <asp:TextBox ID="txt1" runat="server" Text="Text" ></asp:TextBox> 
     </div>    
  </ContentTemplate>
 </asp:UpdatePanel>
</asp:Panel>
function ShowPopUp(mpid) {
  var id1 = $find(mpid);
  id1.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:59:03.410

尝试这个

$find("<%= mpe1.ClientID %>").show();

# asp.net-mvc - dns 和错误：加载资源失败：服务器响应状态为 502（错误网关）

> ID：15854796
> 
> 赞同：3
> 
> 时间：2013-04-06T18:55:54.083
> 
> 标签：asp.net-mvc, azure, web

今天我遇到了一个502错误的大问题。以下是详细信息：在 azure 网站上，当我使用[http://mywebsite.cloudapp.net/时，它可以完美运行，但是当我在](http://mywebsite.cloudapp.net/)[http://www.mywebsite.com](http://www.mywebsite.com) 上指向 dns 时，一些操作（不是全部）返回 502 错误。这很奇怪，因为当我在[http://mywebsite.cloudapp.net/](http://mywebsite.cloudapp.net/)上使用相同的操作时，它可以完美运行。

注意：“mywebsite”是网站的假名。

请帮忙

代理有问题吗？

* * *

更新：我注意到它发生在“PUT”命令中，“GET”用于其他请求它有效。问题可能出在“PUT”命令和一些 DNS 设置上吗？还是代理？

这是来自服务器的响应：

```
"response": {
  "status": 502,
  "statusText": "Bad Gateway",
  "httpVersion": "HTTP/1.1",
  "headers": [
    {
      "name": "Date",
      "value": "Sat, 06 Apr 2013 18:33:08 GMT"
    },
    {
      "name": "Server",
      "value": "Microsoft-IIS/7.5"
    },
    {
      "name": "X-Powered-By",
      "value": "ASP.NET"
    },
    {
      "name": "Content-Length",
      "value": "1477"
    },
    {
      "name": "Content-Type",
      "value": "text/html"
    }
  ],
  "cookies": [],
  "content": {
    "size": 1477,
    "mimeType": "text/html",
    "compression": 0,
    "text": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\"/>\r\n<title>502 - Web server received an invalid response while acting as a gateway or proxy server.</title>\r\n<style type=\"text/css\">\r\n<!--\r\nbody{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}\r\nfieldset{padding:0 15px 10px 15px;} \r\nh1{font-size:2.4em;margin:0;color:#FFF;}\r\nh2{font-size:1.7em;margin:0;color:#CC0000;} \r\nh3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} \r\n#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:\"trebuchet MS\", Verdana, sans-serif;color:#FFF;\r\nbackground-color:#555555;}\r\n#content{margin:0 0 0 2%;position:relative;}\r\n.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}\r\n-->\r\n</style>\r\n</head>\r\n<body>\r\n<div id=\"header\"><h1>Server Error</h1></div>\r\n<div id=\"content\">\r\n <div class=\"content-container\"><fieldset>\r\n  <h2>502 - Web server received an invalid response while acting as a gateway or proxy server.</h2>\r\n  <h3>There is a problem with the page you are looking for, and it cannot be displayed. When the Web server (while acting as a gateway or proxy) contacted the upstream content server, it received an invalid response from the content server.</h3>\r\n </fieldset></div>\r\n</div>\r\n</body>\r\n</html>\r\n"
  },
  "redirectURL": "",
  "headersSize": 162,
  "bodySize": 1477
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:42:23.897

我能够解决这个问题。只是在 godaddy 中 DNS 设置不正确。我必须在“A”记录中为 azure webrole（非网站）设置 IP 地址。现在它完美地工作了。

# php - 带命名参数的 PDO 语句 VS 问号参数

> ID：15854797
> 
> 赞同：1
> 
> 时间：2013-04-06T18:55:59.783
> 
> 标签：php, pdo

我有一个用于数据库管理的类，我的一个子类（定义查询的那个）是这样定义的（只是一个示例，实际上为了测试目的而剥离了许多其他功能）：

```
namespace Tests\SQL\Arguments {
    // SQL query
    class Query {
        public $attributes;

        // constructor for this object
        public function __construct() {
            if ($arguments = func_get_args()) {
                $this->attributes["query"] = current($arguments);

                if (sizeof($arguments) > 1) {
                    $this->attributes["parameters"] = array_slice($arguments, 1, sizeof($arguments));
                }

                return $this;
            }
        }
    }

    $query = new Query("INSERT INTO `clients/history` (`date`,`client`,`ammount`,`status`) VALUES (?,?,?,?);", date("Y-m-d H:i:s"), 57, 17852.25, "A");
    print_r($query);
} 
```

如您所见，我自动获取函数参数，因此我可以在构建时轻松地将查询与其参数分开。除了批量`INSERT/UPDATE/DELETE`操作之外，我还想提供一些安全性，比如防止 SQL 注入和其他事情。

我的问题是......给定这个结构，当我传递这个结构时（*只是一个简单的例子，它将以不同的方式运行，但这个暂时有效*）：

```
$this->queries["clients/history"]->execute($this->attributes["query"], $this->attributes["parameters"]); 
```

`(:date,:client,:ammount,:status)`使用像这样的命名参数或使用像问号这样的参数会有什么不同`(?,?,?,?)`吗？

**编辑 - 更好的解释**

对于我的问题提出的（明显的）晦涩难懂，我深表歉意。我的意图是有一个类似于 sprintf 的机制，但是，我不是存储包含所有参数的字符串，而是以单独的方式存储查询和参数。

这只是 Query 类。还有 QueryGroup 类（用于将查询存储在组中）、Manager 类（存储和管理所有数据库连接）和 Connection 类（负责将给定数据库连接的所有查询和查询组放在一起。

关于命名参数，我认为我使用的方法没有问题，就像我说的那样，就像`sprintf`函数一样。我将在查询字符串中提供问号或参数名称。

我想进行分离以提供额外的过滤功能，例如转义或引用参数，以防止对给定数据库进行某些形式的注入或破坏。

`execute()`我公开的方法只是 PDO`execute()`方法的纸质副本。我试图确定的是使用命名参数或问号参数是否同样“安全”（或者可能存在一些我没有看到的差异）。

任何提示将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T19:01:36.273

命名参数与未命名参数之间的区别在于，对于未命名参数，您必须注意它们绑定到查询的顺序。

特别是在您的示例中，未命名的参数非常适合，因为它简化了函数调用。

* * *

进一步注意，您不需要调用`return $this;`构造函数方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:06:12.927

在您的情况下，它应该没有什么区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:20:23.223

虽然没有技术差异（因为 PDO 只会在内部将命名占位符替换为问号），但存在可用性问题

对于类似 sprintf 的函数，问号似乎是更好的解决方案。因为他们会让你使用确实 sprintf 风格（不知道你为什么要为查询创建一个完整的类）：

```
$query = new Query("SELECT * FROM t WHERE a=? AND b=?", $ida, $idb); 
```

而命名它会更加冗长

# vb.net - System.Net.Mail VB.NET 3.5 System.Net.Mail.SmtpException

> ID：15854800
> 
> 赞同：1
> 
> 时间：2013-04-06T18:56:26.097
> 
> 标签：vb.net, smtp

我已经在网上彻底搜索了这个问题的解决方案，但还没有找到。我正在尝试建立一个简单的邮件客户端，通过 SMTP 将文本文档作为原始文本发送。为此，我使用 VB.Net 3.5 版下的 System.Net.Mail 库

每当我尝试发送消息时，都会收到 System.Net.Mail.SmtpException。我尝试在不同的设置下使用不同的邮件提供商，但尚未解决此问题。此问题已在 3 台不同规格的计算机上进行了测试。代码如下：

```
Private Sub SendEmailMessage()
Try
If My.Computer.Network.IsAvailable Then
        If DataValid() Then
                'Data is valid, send the eMail.
                Dim MailReceiver As String = txtReceiver.Text
                'Create the eMail Message.
                'Dim message As New MailMessage(from:=txtMailAddress.Text, to:=MailReceiver, subject:="(MTG) <CARD> " & ID, body:="<p>" & ConstructedFileString() & "<p>")
                Dim message As New MailMessage
                Dim MessageFrom As New MailAddress(txtMailAddress.Text)
                Dim MessageTo As New MailAddress(MailReceiver)
                With message
                     .From = MessageFrom
                     .To.Add(MailReceiver)
                     .Subject = "(MTG) CARD " & ID
                     .IsBodyHtml = True
                     .Body = "<p>" & ConstructedFileString() & "<p>"
                 End With
                 'Establish eMail Client
                 Dim emailClient As New SmtpClient()
                 Dim emailCredentials As New Net.NetworkCredential

                With emailCredentials
                    .UserName = txtMailAddress.Text
                    .Password = txtPassword.Text
                    .Domain = "gmail.com"
                End With

                With emailClient
                    .Host = txtHostServer.Text
                    .Port = txtPort.Text
                    .Credentials = emailCredentials
                    .EnableSsl = chkSSL.Checked
                    .Timeout = 5000
                End With

                'Dim MailDomain As String = ""
                'Dim PositionAt As Byte = 0
                'PositionAt = txtMailAddress.Text.IndexOf("@")
                'For i = PositionAt + 1 To Len(txtMailAddress.Text)
                '    MailDomain = MailDomain & txtMailAddress.Text.Chars(i)
                'Next
                'Debug.Print(MailDomain)

                If My.Computer.Network.Ping(hostNameOrAddress:=emailClient.Host) Then
                    'Send the message.
                    emailClient.Send(message)
                Else
                    'Could not ping, do not send.
                    ErrorOut("Could not reach the eMail Server.")
                End If

           Else
                'Data is not valid, do not send the eMail.
           End If
    Else
        ErrorOut("No network could be found. Check your network configurations.")
    End If
Catch ex As Security.SecurityException
    'Security exception
    ErrorOut("A Security Exception was raised.")
Catch ex As Net.NetworkInformation.NetworkInformationException
    'Network info exception
    ErrorOut("Exception raised when retrieving network information.")
Catch ex As Net.NetworkInformation.PingException
    'Ping exception
    ErrorOut("Exception raised when pinging the network.")
Catch ex As Net.Mail.SmtpFailedRecipientException
    'Recipient exception
    ErrorOut("Mail Recipient Exception raised.")
Catch ex As Net.Mail.SmtpException
    'Mail Server Exception
    ErrorOut("Mail Server Exception raised")
Catch ex As Exception
    'Generic Exception raised.
    ErrorOut("General Exception raised", True)
End Try
End Sub 
```

非常感谢您对此事的任何帮助，谢谢。

堆栈跟踪：

```
System.Net.Mail.SmtpException: The operation has timed out.
at System.Net.Mail.SmtpClient.Send(MailMessage message)
at NetProj.EmailDialog.SendEmailMessage() in ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:28:38.203

我相信这是 System.Net.Mail 的著名 SSL 问题

[http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx](http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx)

它存在于框架 3.5 中，不确定是否修复了 4.0。

# mongodb - Meteor.js 和 Mongoose 的兼容性

> ID：15854804
> 
> 赞同：2
> 
> 时间：2013-04-06T18:57:21.243
> 
> 标签：mongodb, mongoose, meteor

我想主要在服务器端使用 Mongoose ORM 和流星，直到流星发布模式方法。

我可以在 Meteor 方法中调用 Mongoose ORM 操作并使用 Mongoose 检索方法（如`findById`.

如果我以这种方式处理事情，是否会错过任何潜在的问题或流星特征？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:39:44.397

不幸的是，有问题。我们想做同样的事情，但是（开箱即用）mongoose 包不使用 Meteor 的 DDP 协议，并且在您执行 CRUD 操作时不会触发反应性。Fibers/etc 也可能存在问题，尽管我们还没有推动 Mongoose 找到它们。

好消息是（服务器端）Meteor 会监视数据库是否有任何变化，无论是否由 DDP 引起，并且会在大约 10 秒左右的时间内将它们拾起。然后它将它们发布给客户端，客户端将以标准流星格式获取它们。

我们一直在寻找一个 mongoose-ddp-meteor 包来解决这个问题，最终可能不得不自己构建一个。

编辑：截至 2013 年 12 月，Meteor 的 Mongo 包监听 Mongo 的 oplog，并将实时反映外部 mongoose 活动所做的任何更改。

# ios - UITextField 中的货币格式

> ID：15854812
> 
> 赞同：0
> 
> 时间：2013-04-06T18:57:54.600
> 
> 标签：ios, objective-c, currency, nsnumberformatter

我想知道是否有人能够为我解决这个问题。

我正在创建一个带有两个按钮的测试应用程序，将用户输入的值增加 10% 或 20%。在我尝试将其格式化为货币之前，它工作正常。到目前为止我所做的研究告诉我我不应该使用花车，但我不太确定用什么来代替它们。

```
 float a = ([entryAmount.text floatValue]);
    float v = (10 * a / 100);
    float y = (20 * a / 100);

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    NSString *currencyString = [formatter stringFromNumber:[NSNumber numberWithDouble:a]];
    entryAmount.text = [NSString stringWithFormat:@"%@", currencyString];

    float z = (a + y);
    answer.text = [NSString stringWithFormat:@"Adding 20% brings it too %.2f",z]; 
```

一旦在文本字段外点击，它会重新格式化输入值，甚至进行计算，但是如果我点击另一个按钮，它会将文本字段重置为 0。我知道答案当前不会以货币格式显示，我正在尝试使文本字段在用户输入后自动格式化，如果按下另一个选项，那么它根本不会重置该字段。

# c#-4.0 - Nhibernate 不保存 hasManyToMany 数据

> ID：15854813
> 
> 赞同：0
> 
> 时间：2013-04-06T18:57:58.710
> 
> 标签：c#-4.0, nhibernate, fluent-nhibernate

`Complex`这是我对and的映射`Dish`：

```
 public class ComplexMapping:ClassMap<Complex>
    {
        public ComplexMapping()
        {
            Table("ComplexTable");

            Id(comp => comp.Id,"ComplexId").GeneratedBy.Identity();
            Map(comp => comp.Name,"Name").Not.Nullable();
            Map(comp => comp.Subscribe, "DescriptionComplex");

            HasManyToMany(comp => comp.ScrollOfDish)
              .Table("ComplexDish")
              .ParentKeyColumn("ComplexId")
              .ChildKeyColumn("DishId").Cascade.All();

        }
    }

    public class DishMapping:ClassMap<Dish>
    {
        public DishMapping()
        {
            Table("DishTable");

            Id(dish => dish.Id, "DishId").GeneratedBy.Identity();

            Map(dish => dish.Name);
            Map(dish => dish.Description);
            Map(dish => dish.Price);

            References(x => x.Category, "CategoryId").Cascade.None();

            HasManyToMany(comp => comp.Scroll)
                 .Table("ComplexDish")
                 .ParentKeyColumn("DishId")
                 .ChildKeyColumn("ComplexId").Inverse();

        }
    } 
```

我使用 DAO 模式——当来自前端的数据到来时，我创建所需的对象

![在此处输入图像描述](https://i.stack.imgur.com/IZ4Pk.png)

对象保存但不是整个对象，仅名称和描述已保存，但产品集合未保存。我想我忘记了一些简单的事情请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:09:50.510

通常对我来说，多对多表示两个独立实体之间的关联，其中实体本身管理它们的生命周期。

例如。在你的场景中

```
var firstDish = new Dish();
var secondDish = new Dish();

// 01 -- both dish objects are now attached to the session
session.SaveOrUpdate(firstDish);
session.SaveOrUpdate(secondDish);

var firstComplexObject = new Complex();
firstComplexObject.ScrollOfDish.Add(firstDish);
firstComplexObject.ScrollOfDish.Add(secondDish);

// 02 -- first Complex Object now attached to the session
session.SaveOrUpdate(firstComplextObject);

var secondComplexObject = new Complex();
secondComplexObject.ScrollOfDish.Add(firstDish);
secondComplexObject.ScrollOfDish.Add(secondDish);

// 03 -- second Complex Object now attached to the session
session.SaveOrUpdate(secondComplextObject); 
```

我会避免使用复杂的对象来管理 Dish 对象的生命周期，例如

```
var firstDish = new Dish();
var secondDish = new Dish();

var firstComplexObject = new Complex();
firstComplexObject.ScrollOfDish.Add(firstDish);
firstComplexObject.ScrollOfDish.Add(secondDish);

// the dish object are not attached to session 
// hence the NHibernate has to save the entire object graph here!!!!
// 01 -- first Complex Object now attached to the session
session.SaveOrUpdate(firstComplextObject);

var secondComplexObject = new Complex();
secondComplexObject.ScrollOfDish.Add(firstDish);
secondComplexObject.ScrollOfDish.Add(secondDish);

// 02 -- second Complex Object now attached to the session
session.SaveOrUpdate(secondComplextObject); 
```

此外，由于菜肴肯定会在两个复杂对象之间共享，因此不将 DELETE 从复杂项目级联到菜肴是有意义的。

因此，我会确保您确实单独管理生命周期。希望这能将您推向正确的方向。

# .htaccess - 如何使用 .htaccess 从 url 隐藏页面名称和扩展名

> ID：15854821
> 
> 赞同：0
> 
> 时间：2013-04-06T18:58:51.037
> 
> 标签：.htaccess

我想从 url 隐藏我所有的页面名称和扩展名，

```
htt://www.domain.com/innerpage.php
to
http://www.domain.com/ 
```

和

```
http://www.domain.com/subfolder/innerpage.php
to
http://www.domain.com/subfolder/ 
```

和

```
http://www.domain.com/subfolder/subfolder/innerpage.php
to
http://www.domain.com/subfolder/subfolder/ 
```

我用过

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !\..+$
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.*)$ http://www.domain.com/$1/ [R=301,L]
RewriteRule ^(.*)$ http://www.domain.com/subfolder/$1/ [R=301,L]
RewriteRule ^(.*)$ http://www.domain.com/subfolder/subfolder/$1/ [R=301,L]
RewriteRule ^(.*)/$ $1.php [L] 
```

它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:27:46.090

我认为这对你有用

```
DirectoryIndex innerpage.php index.php index.html index.htm 
```

把它作为你的第一行`.htaccess`。该指令将查找`innerpage.php`是否没有为目录指定页面。如果您想隐藏站点 URL 中的**所有**页面，那么 IMO 不是一个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T15:24:06.830

试试这组指令：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^/?$ /innerpage.php
RewriteRule ^([a-z0-9]+)/?$ /$1/innerpage.php
RewriteRule ^([a-z0-9]+)/([a-z0-9]+)/?$ /$1/$2/innerpage.php

RewriteRule ^innerpage.php$ / [R]
RewriteRule ^([a-z0-9]+)/innerpage.php$ /$1 [R]
RewriteRule ^([a-z0-9]+)/([a-z0-9]+)/innerpage.php$ /$1/$2 [R] 
```

并惊讶会发生什么......

# java - tomcat 7 org.apache.juli.ClassLoaderLogManager$RootLogger 中的内存泄漏

> ID：15854826
> 
> 赞同：2
> 
> 时间：2013-04-06T18:59:46.407
> 
> 标签：java, tomcat, memory-leaks

我正在尝试诊断我的 Web 应用程序中的生产内存泄漏。该应用程序是在 Tomcat 7 和 mySQL 上运行的 GWT 应用程序，以及在 Debian 上运行的 OpenJDK 1.6.0_18。

我启动了 tomcat 并让应用程序泄漏了几天——没有重新加载应用程序——然后进行了堆转储并在 Eclipse MAT 插件中打开它。我试图理解我所看到的。似乎从 tomcat 登录类中保存了大量内存（请参见下面的屏幕截图）。

我使用 java 日志框架在我的 GWT servlet 中进行基本日志记录。只是基本的电话，比如

```
Logger.getAnonymousLogger().log(Level.INFO, "User" + userId + " did something interesting");
Logger.getAnonymousLogger().log(Level.SEVERE, exception.getMessage(), exception); 
```

我在网上能找到的唯一类似的问题是这篇[博](http://contrarianwisdom.blogspot.ca/2011/03/beware-of-tomcat-logging.html)文。

谁能解释这里可能发生了什么？为什么 tomcat 日志记录类会占用这么多内存？

![MAT分析截图](https://i.stack.imgur.com/zol9E.png)

更让我困惑的是，它似乎持有大量的弱引用——但我似乎无法在 MAT 中弄清楚如何找出那些弱引用所指向的内容，而且我也期待弱引用当达到堆限制时被收集，但tomcat会抛出内存异常。

![大量弱引用](https://i.stack.imgur.com/KXnSN.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:28:32.710

有趣的问题:)

看起来有 10 的数百万个班级已经在您的 RootLogger 中注册了记录器。现在，除非您的项目中有数百万个课程，否则：

*   一个类定期调用[Logger.getAnonymousLogger()](http://docs.oracle.com/javase/6/docs/api/java/util/logging/Logger.html#getAnonymousLogger%28%29)，或者
*   记录器或类正在动态生成：
    *   这些可能来自：
        *   [java.lang.reflect.Proxy](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)
        *   一种脚本语言（如 Groovy），您可以在其中动态创建类
        *   字节码操作库
        *   直接调用`new Logger(name)`
    *   每个创建的类都会注册一个记录器 - [LogManager.addLogger()](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogManager.html#addLogger%28java.util.logging.Logger%29)
    *   一段时间后，Logger（以及任何创建的类）被 GCed

无论哪种方式，每个额外的记录器都会向包含弱引用的 ArrayList 添加另一行。弱引用*从*指向记录器开始，但记录器正在被 GC 处理，只留下空的弱引用。导致OOM的是大量的*弱引用*，而不是它们（过去）指向的对象。

修复？

*   如果您使用匿名日志记录，请不要。这是供小程序使用的。
*   看看你是否有`LogManager.addLogger`一个动态类。如果是这样，则强制记录器名称为常量
*   检查你是否有类似的东西`new Logger(variable)`。如果这样做，则需要将变量更改为常量。

# pdf - 保留文本的 SVG 到 PDF 转换器

> ID：15854828
> 
> 赞同：6
> 
> 时间：2013-04-06T19:00:01.640
> 
> 标签：pdf, svg, pdf-generation

我正在寻找一个 SVG 到 PDF 转换器，它可以保留 SVG 中的文本。我试过 Batik、Inkscape 和 CairoSVG。他们生成的PDF都是位图图像，包括文字；无法在 PDF 查看器中选择/搜索文本。他们也都做得不好，尤其是 CairoSVG。

我按照[此处](https://stackoverflow.com/a/9327210/1883753)的说明进行操作（请注意，您不必编译 FOP - 您可以从[此处](http://www.java2s.com/Code/Jar/f/Downloadfoptranscoderallinonejar.htm)下载 PDF 转码器）。现在我看到，如果我放大 PDF，清晰度会被保留，我认为这意味着文本会被保留。但是，我无法搜索或选择文本。

此外，我比较了使用 FOP 中的 PDF 转码器与 Batik 中的输出，我发现没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:46:36.203

如果您使用滤镜、渐变或遮罩，则可能无法将此 1:1 转换为 PDF。在这些情况下，转换器通常会光栅化矢量数据以实现相似的视觉外观，而不是保留矢量数据并获得非常不同的外观。

**编辑**：在您的示例情况下，我们可以确保在以下 XSLT 转换的帮助下使用填充属性而不是过滤器：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@fill[ancestor::svg:symbol]" priority="1">
    <xsl:attribute name="fill">currentColor</xsl:attribute>
  </xsl:template>

  <xsl:template match="@filter[starts-with(.,'url(#colorFilter-')]">
    <xsl:attribute name="color">
      <xsl:value-of select="concat('#',substring(.,18,6))"/>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="svg:use[not(@filter)]">
    <xsl:copy>
      <xsl:attribute name="color">#fff</xsl:attribute>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

这完全依赖于在这个特定的 SVG 中过滤器是如何命名的，因此它不适用于其他任何东西。不过颜色不太对。我很想知道为什么这个颜色矩阵：

```
0.4 0   0   0 0
0   0.6 0   0 0
0   0   0.8 0 0
0   0   0   1 0 
```

应用于白色显然不会导致`rgba(40%,60%,80%,1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-07T22:12:26.673

看看[librsvg](https://wiki.gnome.org/Projects/LibRsvg)`rsvg-convert`的一部分。我用它来将 SVG 文档转换为 PDF 并保留文本，以便在 PDF 查看器中可以选择和搜索。

这是一篇博客文章，将其与其他一些选项进行了比较，并展示了如何使用它：[https ://www.itsfullofstars.de/tag/rsvg-convert/](https://www.itsfullofstars.de/tag/rsvg-convert/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T19:49:39.747

您是否尝试过将 SVG 打印到 PDF 打印机？

# jquery - 选择所有未禁用的输入按钮

> ID：15854839
> 
> 赞同：17
> 
> 时间：2013-04-06T19:01:12.413
> 
> 标签：jquery, jquery-selectors, disabled-control

我可以以某种方式选择所有*未*禁用的输入提交元素吗？

我可以通过以下方式轻松找到所有禁用的：[http ://api.jquery.com/disabled-selector/](http://api.jquery.com/disabled-selector/)

```
$("input.saveitembtn:disabled") 
```

但是有什么东西吗？

```
$("input.saveitembtn:NOTdisabled") 
```

到目前为止，我的解决方案是使用 jQuery 逐个`.each`检查`.is`它们：

```
$("input.saveitembtn").each(function(a){
  if( !$(this).is(':disabled') ) {
    ...
  }
}); 
```

我觉得这完全是矫枉过正。jQuery中有一个简单的选择器吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-06T19:02:49.623

是的，有[**:not()**](http://api.jquery.com/not-selector/)

```
$("input.saveitembtn:not(:disabled)") 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-01T18:19:09.983

不知道为什么，但接受答案对我不起作用。但是，这样做：

```
$("input.saveitembtn:not([disabled])"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-13T16:52:26.950

香草 JavaScript：

```
const ELS_enabled = document.querySelectorAll("input:not([disabled])");

console.log(ELS_enabled.length); // 2
```

```
<input type="text" required placeholder="Required">
<input type="text" required disabled placeholder="Required and disabled">
<input type="text" required placeholder="Required">
```

# sql - INSERT INTO 命令不起作用

> ID：15854840
> 
> 赞同：1
> 
> 时间：2013-04-06T19:01:20.087
> 
> 标签：sql, sql-server

我有一个外部游标和一个内部游标也有两个表可以使用。现在使用外部光标，我在表 1 中创建新列，并用表 2 中的值命名它们，这样就可以了。问题在于我用来将值从另一个表的一个特定列插入到那些新列中的内部游标。这个接缝不起作用，但让我感到困惑的是我没有收到任何错误消息。现在我希望你明白我想要做什么，这里是代码，所以评论更多关于问题的描述：

```
DECLARE @rbr_param  nvarchar(255)
DECLARE @vrednost nvarchar(255)
DECLARE @cName nvarchar(255)
DECLARE @sql nvarchar (255)

DECLARE curs CURSOR FOR SELECT DISTINCT rbr_param FROM dbo.parametri_pomocna ORDER BY   rbr_param
OPEN curs
FETCH NEXT FROM curs
INTO @rbr_param
WHILE @@FETCH_STATUS = 0
BEGIN

SET @cName = 'P_'+@rbr_param+'_P'
EXEC('ALTER TABLE dbo.Parametri ADD ' + @cName + ' nvarchar(255)')

    DECLARE vrd CURSOR FOR SELECT DISTINCT vrednost FROM dbo.parametri_pomocna
    OPEN vrd
        FETCH NEXT FROM vrd
        INTO @vrednost
        WHILE @@FETCH_STATUS = 0
        BEGIN
        SET @sql = 'INSERT INTO dbo.Parametri'+(@cName)+ ' SELECT vrednost    FROM dbo.parametri_pomocna WHERE vrednost = '+@vrednost+ ' AND rbr_param = '+@rbr_param

        if exists (select * from INFORMATION_SCHEMA.COLUMNS where   table_name = 'dbo.Parametri' and column_name = '@cName')
        begin
        exec(@sql)
        end
        FETCH NEXT FROM vrd
        INTO @vrednost
        END --end vrd
        CLOSE vrd
        DEALLOCATE vrd

FETCH NEXT FROM curs
INTO @rbr_param

END
CLOSE curs
DEALLOCATE curs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:11:26.470

你在这里有两个问题：

```
if exists ( select * from INFORMATION_SCHEMA.COLUMNS 
     where  table_name = 'dbo.Parametri'
      and column_name = '@cName'
) 
```

(1) 这个视图永远不会有`table_name`= 模式名*和*表名。

(2) 出于某种原因，您将变量名用单引号括起来。

由于这两个原因，您的`IF`条件将永远不会返回 true。

尝试：

```
IF EXISTS 
(
    SELECT 1 FROM sys.columns 
      WHERE [object_id] = OBJECT_ID('dbo.Parametri')
      AND name = @cName
) 
```

（[这就是为什么我更喜欢目录视图`INFORMATION_SCHEMA`](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)。）

此外，这种双嵌套光标的事情似乎效率很低，而且代码比实现我认为您正在尝试做的事情所必需的要多得多。像这样的东西怎么样：

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'ALTER TABLE dbo.Parametri ADD ' 
   + QUOTENAME('P_' + rbr_param + '_P') + ' NVARCHAR(255);'
  FROM dbo.parametri_pomocna GROUP BY rbr_param;

EXEC sp_executesql @sql;

SET @sql = N'';

SELECT @sql = @sql + N'INSERT dbo.Parametri('+QUOTENAME('P_' + rbr_param + '_P')+ ') 
   SELECT vrednost 
   FROM dbo.parametri_pomocna WHERE rbr_param = ''' + rbr_param + '''
     GROUP BY vrednost;'
   FROM dbo.parametri_pomocna
    GROUP BY rbr_param;

EXEC sp_executesql @sql; 
```

# java - JTabbedPane 无法正常工作

> ID：15854849
> 
> 赞同：1
> 
> 时间：2013-04-06T19:02:44.093
> 
> 标签：java, swing, layout, jtabbedpane

```
 public void tabbedPane(){
        JPanel tab1 = new JPanel();
            JButton btn = new JButton("Buton - 1");
            btn.setPreferredSize(new Dimension(50, 20));
            btn.setLocation(0, 10);
        tab1.add(btn);
        JTabbedPane tabPanel = new JTabbedPane();
        tabPanel.addTab("tab1", null, tab1);
        tabPanel.addTab("tab2", tab1);
        tabPanel.addTab("tab3", btn);
        tabPanel.setPreferredSize(new Dimension(450, 150));
        tabPanel.setLocation(50, 0);
        mainPanel.add(tabPanel);//Main panel on frame
    } 
```

当我运行我的应用程序时，我只看到 tab2 和 tab3 窗格，并且我有很多问题：

*   tabPanel.setLocation 不起作用
*   tabPanel.addTab("tab1" ...) 不起作用
*   btn.setPreferredSize(新维度(50, 20)); 当我单击“tab2”时它可以正常工作，但是当我单击“tab3”时它不会改变按钮大小..为什么？

我使用空布局

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:15:57.057

> tabPanel.setLocation 不起作用

不要使用`setLocation(...)`而是使用嵌套组件和布局管理器来实现令人愉悦且易于维护的 GUI 布局。

> tabPanel.addTab("tab1" ...) 不起作用

使用 Swing，您只能将一个组件添加到一个容器中，仅此而已。该组件只会显示在它添加到的最后一个容器中。

> `btn.setPreferredSize(new Dimension(50, 20));`当我单击“tab2”时它可以正常工作，但是当我单击“tab3”时它不会改变按钮大小..为什么？

同样，您将要学习布局管理器

> 我使用空布局

您几乎*从*不想这样做，因为这会使您的应用程序在除您自己的平台之外的任何平台上看起来都不正确，并且会使维护和升级变得非常非常困难。最好使用布局管理器并让他们为您完成布局和调整组件大小的繁重工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:24:15.323

你这样做的目的是什么？

A`JTabbedPane`用于组织视图，我看到您正在尝试将 JPanel 添加为第一个选项卡，这是 JTabbedPanes 的“主要目标”。

```
tabPanel.addTab("Tab 1", tab1); 
```

尝试像这样添加选项卡，您将“null”值作为图标传递，这根本不会影响，但如果您不使用图标，则只需将面板添加为具有预期名称的选项卡.

在第二次添加时，您将再次添加相同的组件 (tab1)。

在第三次添加时，您尝试添加已经在容器（tab1）上的组件。这将使该组件仅出现在您将其添加到的最后一个容器中。此外，组件是一个`JButton`. 我看不到 a`JButton`作为选项卡的目标。

对于该`setLocation(x, y)`问题，请检查您在容器上使用的布局。

同样，我认为这里的主要问题是您没有正确解决问题，或者您没有使用所需的工具。

# visual-studio-2010 - 在visualSVN之后没有加载任何符号

> ID：15854852
> 
> 赞同：3
> 
> 时间：2013-04-06T19:02:50.167
> 
> 标签：visual-studio-2010, debugging, visualsvn

我在 vs2010 有一个项目，mvc 网站 c#。我曾经放置断点并运行项目并在该断点上中断代码。昨天我将项目添加到visualSVN，从那以后我收到错误消息“断点当前不会被命中。没有为此文档加载任何符号。” 我试过： 1\. 干净的解决方案 2\. 重建 3\. 关闭打开的工作室 4\. 它处于调试模式似乎没有任何工作......

# java - 使用套接字的Java文件传输代码中IP地址的客户端错误？

> ID：15854853
> 
> 赞同：1
> 
> 时间：2013-04-06T19:03:02.403
> 
> 标签：java, socket.io, file-transfer

几天前我已经开始学习 Java 套接字编程。我在某个网站上找到了此代码，用于将文件从服务器传输到多个客户端（多线程，使用线程池）。

当我使用环回接口（127.0.0.1）运行此应用程序时，它工作正常，文件被传输到目标文件夹。但是当我将服务器电脑（192.168.1.2）连接到客户端电脑（192.168.1.3）时，出现异常并说

```
"Could not establish I/O for IP: <ipaddress of client> <port number>" 
```

客户端和服务器端用网线连接好，互相ping通。他们之间没有防火墙。我对网站和 Java 套接字的初学者非常陌生。

谁能帮我调试或理解错误？

```
Client Side Code: 2 Java files
myfileclient.java // First File

import java.io.*;
import javax.swing.*;

public class myfileclient {

/**
 * @param args
 * @throws IOException 
 * @throws InterruptedException 
 */
public static void main(String[] args) throws IOException, InterruptedException {

    JFileChooser chooser = new JFileChooser();
    chooser.showOpenDialog(null);
    File file = chooser.getSelectedFile();
    String fileName = file.getName();
    //System.out.println("You have selected: " + filename);

    String serverAddress= "127.0.0.1";
    int serverPort=  4444;
    //String fileName = "D:\\a.pdf";

    //Create Socket
    System.out.println("client >Creating Socket to " + serverAddress + ":" + serverPort);
    JOptionPane.showMessageDialog(null,"Client: Connecting to: " + serverAddress + serverPort + "\nClient Connecting....." + "\nClient Requesting file : " + fileName ,"Success",JOptionPane.PLAIN_MESSAGE);
    SocketHandling client = new SocketHandling(serverAddress, serverPort);

    //Connect
    System.out.println("client >Connecting");
    client.connect();

    //File request
    System.out.println("client >Requesting file : " + fileName);

    client.requestFile("D:\\a.pdf");

    //Close all
    System.out.println("client >Close Connection");
    client.close();
}

}

SocketHandling.java // Second File

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JOptionPane;

public class SocketHandling {

    private Socket client;
    private PrintWriter socketWriter;
    private BufferedReader socketReader;
    public String destIpAddress;
    public int destPort;

    public SocketHandling(String destIpAddress, int destPort) {

        this.destIpAddress = destIpAddress;
        this.destPort = destPort;
    }

    public void connect() {

        try {
            //Create socket
            client = new Socket(this.destIpAddress,this.destPort);

            //Create read/write buffers for socket
            socketReader = new BufferedReader(new InputStreamReader(client.getInputStream()));
            socketWriter = new PrintWriter(client.getOutputStream(), true);

        } catch (UnknownHostException e) {
            System.err.println("Unkown host: " + destIpAddress);
        } catch (IOException e) {
            System.out.println("Could not establish I/O for IP: "+ destIpAddress + " on port: " + destPort);
            JOptionPane.showMessageDialog(null,"Could not establish I/O for IP: "+ destIpAddress + " on port: " + destPort,"Error",JOptionPane.PLAIN_MESSAGE);
        }
    }

    public void requestFile(String filename) throws IOException {

        //Timers
        long start = System.currentTimeMillis();
        int bytesRead;
        int current = 0;

        //Hard coded temporary file size 
        int filesize=7000000; 

        //Send File Name to server
        socketWriter.println(filename);
        socketWriter.flush();

        //Get n and m
        String message = (String)socketReader.readLine();

        //Split string up
        String[] tokens = message.split("[,]");
        int ConnectionCounter = Integer.parseInt(tokens[0]);
        int FileCounter = Integer.parseInt(tokens[1]);

        if(FileCounter >= 0){
            //File exists
            System.out.println("client >File " + filename + " was found at the serve"); 
            System.out.println("client >Server handled " + ConnectionCounter + " requests, " + FileCounter + " request were successsful.");
            //Receive file
            System.out.println("client >Downloading file " + filename);

            byte [] mybytearray  = new byte [filesize];
            InputStream is = client.getInputStream();
            FileOutputStream fos = new FileOutputStream("D:\\copy.pdf"); //Files Added to Download directory 
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            bytesRead = is.read(mybytearray,0,mybytearray.length);
            current = bytesRead;

            do {
                bytesRead =
                        is.read(mybytearray, current, (mybytearray.length-current));
                if(bytesRead >= 0) current += bytesRead;
            } while(bytesRead > -1);

            bos.write(mybytearray, 0 , current);
            bos.flush();
            long end = System.currentTimeMillis();
            System.out.println("client >Download complete (" + (end-start) + "ms)");
            JOptionPane.showMessageDialog(null,"File:" + filename + " was found at the Server\nServer handled " + ConnectionCounter + "requests" + FileCounter + " requests were successsful!!\nDownloading file.....\nDownload complete!! (" + (end-start) + "ms) ","Success",JOptionPane.PLAIN_MESSAGE);
            bos.close();

        }else{
            //Files does not exists
            //System.out.println("client >File " + filename + " was not found at the serve");       
            System.out.println("client >Connection Counter : " + ConnectionCounter + "   File Counter : " + FileCounter);
            JOptionPane.showMessageDialog(null,"File " + filename + " was not found at the Server ","Error",JOptionPane.PLAIN_MESSAGE);
        }
    }

    public void close() {
        try {
            //Closes read/write buffers and the socket
            socketWriter.close();
            socketReader.close();
            client.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    } 
```

服务器端代码：4 个 Java 文件

```
 myfileserver.java // First File

    import javax.swing.JOptionPane;
    public class myfileserver {

    /**
     * @param args
     */
    public static void main(String[] args) {

        System.out.println("Server: Start");
        JOptionPane.showMessageDialog(null,"Server Started ","Success",JOptionPane.PLAIN_MESSAGE);
        Multithreading server = new Multithreading(4444);
        server.run();

    }
}

Multithreading.java // Second File

import java.io.IOException;
import java.net.BindException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Multithreading implements Runnable{

private ServerSocket server;
private ExecutorService pool;

public Multithreading(int listenPort) {

    this.pool = Executors.newFixedThreadPool(50); //Max connections

    try {
        server = new ServerSocket(listenPort);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

 public void run() {
     try {

         while(true) {
            pool.execute(new WorkerThread(server.accept()));
         }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

}

ServerStatistics.java // Third File

public class ServerStatistics {

private static int ConnectionCounter;   //M
private static int FileCounter;         //N

public static synchronized  int getConnectionCounter(){
    return ConnectionCounter;
}

public static synchronized  int getFileCounter(){
    return FileCounter; 
}

public static synchronized  int IncConnectionCounter(){
    return ConnectionCounter++;
}

public static synchronized  int IncFileCounter(){
    return FileCounter++;   
}
}

WorkerThread.java // Fourth File

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.LinkedList;
import java.util.List;

import javax.swing.JOptionPane;

public class WorkerThread extends Thread {

    public Socket connection;

    public  WorkerThread(Socket connection) {
        this.connection = connection;
        handleConnection();
    }

    private synchronized boolean  handleConnection() {
        try {
            //Increment Connection statistics 
            ServerStatistics.IncConnectionCounter();

            //Create read/write buffers for the socket
            PrintWriter streamWriter = new PrintWriter(connection.getOutputStream());
            BufferedReader  streamReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));

            //Get filename from client 
            String fileName =  streamReader.readLine();
            System.out.println("server> File " + fileName + " requested from " + connection.getInetAddress().getHostAddress());

            try{
                File myFile = new File (fileName); //Files Are in the Upload directory 

                if(myFile.exists()){
                    //File exists
                    ServerStatistics.IncFileCounter();

                    System.out.println("server> Successful, " + fileName + " exists");
                    System.out.println("server> Total successful requests so far = " + ServerStatistics.getFileCounter() + " out of " + ServerStatistics.getConnectionCounter());

                    //Send N and M
                    streamWriter.println(ServerStatistics.getConnectionCounter() + "," + ServerStatistics.getFileCounter());
                    streamWriter.flush();

                    //Create File buffer to read file to socket
                    byte [] mybytearray  = new byte [(int)myFile.length()];
                    FileInputStream fis = new FileInputStream(myFile);
                    BufferedInputStream bis = new BufferedInputStream(fis);
                    bis.read(mybytearray,0,mybytearray.length);
                    OutputStream os = connection.getOutputStream();

                    //Send File
                    os.write(mybytearray,0,mybytearray.length);
                    os.flush();
                    connection.close();

                    System.out.println("server> File transfer complete [" + fileName + "]");
                    JOptionPane.showMessageDialog(null,"File " + fileName + " requested from " + connection.getInetAddress().getHostAddress() +"\nSuccessful File exists!!" +"\nTotal successful requests so far = " + ServerStatistics.getFileCounter() + " out of " + ServerStatistics.getConnectionCounter() + "\nFile transfer complete [" + fileName + "]" ,"",JOptionPane.PLAIN_MESSAGE);

                }else{
                    //File does not exists
                    System.out.println("server> Not Successful, " + fileName + " does not exists");
                    System.out.println("server> Total successful requests so far = " + ServerStatistics.getFileCounter() + " out of " + ServerStatistics.getConnectionCounter());

                    //Send N and -1 b/c file does not exists
                    streamWriter.println(ServerStatistics.getConnectionCounter() + "," + (-1)); 
                    streamWriter.flush();
                }

                return true;
            }catch (Exception e){//Catch exception if any
                streamWriter.println(ServerStatistics.getConnectionCounter() + ",-1");
                streamWriter.flush();
                System.err.println("Error: " + e.getMessage());
                return false;
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:11:48.380

a) 明显变化：

```
String serverAddress= "127.0.0.1";
    int serverPort=  4444; 
```

至

```
String serverAddress= "192.168.1.2";
    int serverPort=  4444; 
```

b) 我将开始检查 192.168.1.2，您可以在服务器运行时执行 netstat -an 并验证它是否正在侦听正确的端口，我还将在服务器中获取数据包捕获以查看 TCP 请求是否来自客户端.

# php - MVC 表单数据提交给控制器

> ID：15854854
> 
> 赞同：1
> 
> 时间：2013-04-06T19:03:13.237
> 
> 标签：php, forms, model-view-controller

我正在设法部署一个非常简单的实现，其中包含一个注册表单，出于演示目的，我选择使用 MVC 模式。

我的小问题是，当我按下提交按钮时，我希望通过控制器的合适方法处理提交的数据。

例如：

在视图部分，我声明如下形式：

```
<form action="controller/validate" method="post"/> 
```

我假设这是与路由相关的事情，但我很好奇是否可以建议另一种方式。

--

问候，

西奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:29:21.160

路由器可以像 switch 语句一样简单，而不是小型站点的完整路由器：

```
switch($_SERVER['REQUEST_URI']) {
    case 'controller/validate':
        $view = new \Views\User\Registration();
        $controller = new \Controllers\UserRegistration($view);
        $method = 'validate';
        break;

    default:
        $view = new \Views\Error\NotFound();
        $controller = new \Controllers\Error($view);
        $method = 'notFound';
        break;
}

echo $controller->$method(); 
```

另请注意，您通常确实希望对文档根目录执行相对 URL，而不是基于当前路径执行相对 URL：

```
<form action="/controller/validate" method="post"/> 
```

注意前导斜杠。

[*以上只是半伪代码的一个简单（未经测试）示例*]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:15:43.863

通常，您可以通过*路由*（如）使您的*控制器*可访问。控制器操作在引导文件中分配给此路由。一些伪代码：*`POST /register`*

 *```
$framework->route('GET', '/register',
                  'RegistrationController::action_form');
$framework->route('POST', '/register',
                  'RegistrationController::action_submit'); 
```

另一种方法是将路由直接映射到控制器（有些框架会这样做，我相信*Kohana*就是其中之一），如下所示：

*   路线：`/register/submit`
*   决议：`RegisterContoller::action_submit()`
*   请求方法（标准 HTTP 中的`GET`,`POST`​​ , `PUT`, `DELETE`）的管理发生在操作方法中。*

# google-app-engine - Google App Engine Launcher - localhost 显示一个空白页面。(Python2.7)

> ID：15854856
> 
> 赞同：3
> 
> 时间：2013-04-06T19:03:24.923
> 
> 标签：google-app-engine, python-2.7, localhost

我在 Win 8 x64，Python 2.7

我遵循的步骤：

1.  下载，安装python。
2.  已下载、安装 Google App Engine Launcher。
3.  `helloworld-kg`在应用引擎站点上创建了具有名称的新应用程序。
4.  在 Launcher 中，文件 > 创建新应用程序 > 输入应用程序的名称并浏览到目录。
5.  点击运行，等待灯变绿。
6.  单击浏览器。得到一个空白页`localhost:8080`

这是启动器的日志：

```
2013-04-05 20:54:10 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--skip_sdk_update_check=yes', '--port=8080', '--admin_port=8000', u'C:\\Users\\Karan\\Desktop\\helloworld-kg\\helloworld-kg']"
INFO     2013-04-05 20:54:12,068 devappserver2.py:401] Skipping SDK update check.
WARNING  2013-04-05 20:54:12,078 api_server.py:328] Could not initialize images API; you are likely missing the Python "PIL" module.
INFO     2013-04-05 20:54:12,088 api_server.py:152] Starting API server at: http://localhost:55309
INFO     2013-04-05 20:54:12,091 dispatcher.py:98] Starting server "default" running at: http://localhost:8080
INFO     2013-04-05 20:54:12,092 admin_server.py:117] Starting admin server at: http://localhost:8000
INFO     2013-04-05 20:54:58,167 api_server.py:517] Applying all pending transactions and saving the datastore
INFO     2013-04-05 20:54:58,167 api_server.py:520] Saving search indexes
2013-04-05 20:54:58 (Process exited with code 0)

2013-04-05 20:55:01 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--skip_sdk_update_check=yes', '--port=8080', '--admin_port=8000', u'C:\\Users\\Karan\\Desktop\\helloworld-kg\\helloworld-kg']"
INFO     2013-04-05 20:55:03,788 devappserver2.py:401] Skipping SDK update check.
WARNING  2013-04-05 20:55:03,799 api_server.py:328] Could not initialize images API; you are likely missing the Python "PIL" module.
INFO     2013-04-05 20:55:03,809 api_server.py:152] Starting API server at: http://localhost:55354
INFO     2013-04-05 20:55:03,811 dispatcher.py:98] Starting server "default" running at: http://localhost:8080
INFO     2013-04-05 20:55:03,813 admin_server.py:117] Starting admin server at: http://localhost:8000
INFO     2013-04-05 20:56:02,868 api_server.py:517] Applying all pending transactions and saving the datastore
INFO     2013-04-05 20:56:02,869 api_server.py:520] Saving search indexes
2013-04-05 20:56:02 (Process exited with code 0)

2013-04-05 20:56:09 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--skip_sdk_update_check=yes', '--port=8080', '--admin_port=8000', u'C:\\Users\\Karan\\Desktop\\helloworld-kg\\helloworld-kg']"
INFO     2013-04-05 20:56:11,631 devappserver2.py:401] Skipping SDK update check.
WARNING  2013-04-05 20:56:11,644 api_server.py:328] Could not initialize images API; you are likely missing the Python "PIL" module.
INFO     2013-04-05 20:56:11,653 api_server.py:152] Starting API server at: http://localhost:55397
INFO     2013-04-05 20:56:11,655 dispatcher.py:98] Starting server "default" running at: http://localhost:8080
INFO     2013-04-05 20:56:11,657 admin_server.py:117] Starting admin server at: http://localhost:8000 
```

我的`app.yaml`文件内容：

```
application: helloworld-kg
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld-kg.app 
```

和`helloworld-kg.py`文件内容：

```
import webapp2

class MainPage(webapp2.RequestHandler):
  def get(self):
      self.response.headers['Content-Type'] = 'text/plain'
      self.response.write('Hello, webapp2 World!')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

我是 Python 和 GAE 的新手。这是针对 Udacity 的 CS 253 课程的。

可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:58:21.230

让它工作。显然，GAEL 正在为我创建一个新应用程序。重新安装解决了这个问题。应用程序现在工作正常！

# javascript - 使用 D3 选择 iframe 的主体

> ID：15854863
> 
> 赞同：0
> 
> 时间：2013-04-06T19:04:01.480
> 
> 标签：javascript, iframe, d3.js

`d3.select("body")`让我选择当前页面的正文。我将如何选择 iframe 页面的正文？在 jquery 中你会做`$('body', frames[frameName].document)`.

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:10:30.317

您可以选择这样的元素的子元素：

```
d3.selectAll("iframe body"); 
```

# javascript - 动态创建元素

> ID：15854864
> 
> 赞同：0
> 
> 时间：2013-04-06T19:04:03.017
> 
> 标签：javascript, ajax, dynamic

我目前正在开发几个包含 AJAX 调用的应用程序，并且我正在使用 JSON 格式从服务器检索数据。每个页面都需要根据 JSON 响应创建内容，我目前正在创建如下内容：

```
function createBox1(json) {
   var bigbox = document.createElement('div');
   bigbox.className = 'class1';

   var firstbox = document.createElement('div');
   firstbox.className = 'first-box';

      var firstNestedBox = document.createElement('div');
      var secondNestedBox = document.createElement('div');
      var thirdNestedBox = document.createElement('div');
   var secondbox = document.createElement('div');
... 
```

所以基本上它有点长代码，我想知道是否有更好的方法来做到这一点。

PS：我见过一些图书馆，他们在其中做类似的事情：

```
function o(t,e){var i=document.createElement(t||"div"),o;for(o in e)i[o]=e[o];return i} 
```

我想这就是他们创建多个 div 元素的方式，但我不确定它是如何工作的。

提前致谢 （：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:11:06.247

你这样做的方式没有错，但是克隆一个空的div而不是创建新的div更快，并且在构建标记时使用片段更快，然后在构建完所有内容后将片段插入DOM而不是在 DOM 中插入每个元素等。

只是为了编写更短的代码，可以使用一个函数，但它实际上只是一个不必要的函数调用：

```
function createBox1(json) {
   var div             = document.createElement('div'),
       bigbox          = div.cloneNode(false),
       firstbox        = div.cloneNode(false),
       firstNestedBox  = div.cloneNode(false),
       secondNestedBox = div.cloneNode(false),
       thirdNestedBox  = div.cloneNode(false),
       secondbox       = div.cloneNode(false):

   bigbox.className = 'class1';
   firstbox.className = 'first-box';

... 
```

# spring - 无法从 Guice DI 应用程序中的 Spring Cache 中逐出

> ID：15854867
> 
> 赞同：1
> 
> 时间：2013-04-06T19:04:16.387
> 
> 标签：spring, caching, guice

我正在尝试将字符串缓存抽象机制与 guice 模块一起使用。我创建了拦截器：

CacheManager cacheManager = createCacheManager(); 绑定(CacheManager.class).toInstance(cacheManager);

```
 AppCacheInterceptor interceptor = new AppCacheInterceptor(
            cacheManager,
            createCacheOperationSource()
    );

    bindInterceptor(
            Matchers.any(),
            Matchers.annotatedWith(Cacheable.class),
            interceptor
    );

    bindInterceptor(
            Matchers.any(),
            Matchers.annotatedWith(CacheEvict.class),
            interceptor
    ); 
```

然后，实现了Strings Cache接口和CacheManager，最后用@Cachable和@CacheEvict注解了我的DAO类：

```
public class DaoTester {

QssandraConsumer qs;

@CachePut(value = "cached_consumers", key = "#consumer.id")
public void save(QssandraConsumer consumer) {
    qs = consumer;
}

@Cacheable(value = "cached_consumers")
public QssandraConsumer get(String id) {
    if (id != null) {
        qs.getId();
    }
    return qs;
}

@CacheEvict(value = "cached_consumers", key = "#consumer.id")
public void remove(QssandraConsumer consumer) {
    qs = consumer;
}} 
```

缓存很好 - 这里没有问题，但是当我尝试驱逐（在这个例子中调用 remove 方法）时，evrything 崩溃了，我看到：

> 线程“main”中的异常 org.springframework.expression.spel.SpelEvaluationException: EL1007E:(pos 10): 在 org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference .java:205) 在 org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57) 在 org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:72) 在 org. springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:93) 在 org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:88) 在 org.springframework.cache.interceptor.ExpressionEvaluator。 org.springframework 中的键（ExpressionEvaluator.java:80）。cache.interceptor.CacheAspectSupport$CacheOperationContext.generateKey(CacheAspectSupport.java:464) at org.springframework.cache.interceptor.CacheAspectSupport.inspectCacheEvicts(CacheAspectSupport.java:260) at org.springframework.cache.interceptor.CacheAspectSupport.inspectAfterCacheEvicts(CacheAspectSupport. java:232) at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:215) at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:66) at qiwi.qommon.deployment.dao .DaoTester.main(DaoTester.java:44) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java ：25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

这里有什么问题？！顺便说一句，缓存的对象是：

```
public class QssandraConsumer implements Identifiable<String> {
private String id;
private String host;

@Override
public String getId() {
    return id;
}

@Override
public void setId(String id) {
    this.id = id;
}

public String getHost() {
    return host;
}

public void setHost(String host) {
    this.host = host;
}

@Override
public boolean equals(Object object) {
    if (this == object) {
        return true;
    }
    if (null == object) {
        return false;
    }

    if (!(object instanceof QssandraConsumer)) {
        return false;
    }

    QssandraConsumer o = (QssandraConsumer) object;

    return
        Objects.equal(id, o.id)
            && Objects.equal(host, o.host);
}

@Override
public int hashCode() {
    return Objects.hashCode(
        id, host
    );
}

@Override
public String toString() {
    return Objects.toStringHelper(this)
        .addValue(id)
        .addValue(host)
        .toString();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:06:18.603

最后我弄清楚问题的原因是什么：当注入一个使用注释的类时（被截获，比如`@Cachable`or `@CacheEvict`）Guice 增强了类（AOP 在运行时进行字节码修改）。因此，当`CacheInterceptor`尝试评估`key = "#consumer.id"`它失败时，因为在增强类中找不到参数名称（请参阅：）`LocalVariableTableParameterNameDiscoverer#inspectClass`。所以它不能在 Guice 开箱即用。在春天创建了代理类 - 所以这里没有问题。

# javascript - 如何使用 Google Maps Waypoints 重绘路线

> ID：15854868
> 
> 赞同：2
> 
> 时间：2013-04-06T19:04:47.247
> 
> 标签：javascript, xml, google-maps

我有一个谷歌地图，用户在输入字段中搜索起点和终点，然后在绘制路线后，他们可以通过添加和拖动航点来自定义路线。提交时，路线会保存为 XML，然后在需要时在新地图上重新绘制。问题是此刻我只有保存到 XML 的起点和终点。

我一直在使用此文档：[https](https://developers.google.com/maps/documentation/javascript/directions#Waypoints) ://developers.google.com/maps/documentation/javascript/directions#Waypoints ，但我在这里完全被难住了。

我建议这样做的方式与起点和终点相同 - 将 lat 和 long 值保存到 XML 中。下面的 JS 获取航点的数据。我已经控制台记录了它以查看数组的结构。我在这里遇到的问题是我不知道如何遍历每个航路点（如果有多个航路点）并将每个航路点保存为一个新变量，以便我可以将它们添加到我的表单以进行 PHP 提交。

```
//What to do when a waypoint has been added/changed
google.maps.event.addListener(directionsDisplay, 'directions_changed', function() {
    var waypoints = directionsDisplay.getDirections().routes[0].legs[0].via_waypoints;
    console.log(waypoints);
    console.log(waypoints[0].kb);
}); 
```

就像我说的那样，可能有一种更简单的方法，以上就是我到目前为止所尝试的。这是 console.log(waypoints) 的结果...

![在此处输入图像描述](https://i.stack.imgur.com/NixYF.png)

提供隐藏输入值的 JS 如下...

```
$('form.add-journix').submit(function() {
      $('#startlat').attr('value', startLatVal);
      $('#startlng').attr('value', startLongVal);
      $('#endlat').attr('value', endLatVal);
      $('#endlng').attr('value', endLongVal);
  }); 
```

这是将其保存为 XML 的 PHP ...

```
header("Content-type: text/xml"); 

    // Iterate through the rows, adding XML nodes for each

    while ($row = mysql_fetch_assoc($result)){  
      // ADD TO XML DOCUMENT NODE  
      $node = $dom->createElement("marker");  
      $newnode = $parnode->appendChild($node);   
      $newnode->setAttribute("title", $row['title']);  
      $newnode->setAttribute("description", $row['description']);  
      $newnode->setAttribute("startlat", $row['startlat']);  
      $newnode->setAttribute("startlng", $row['startlng']);  
      $newnode->setAttribute("endlat", $row['endlat']);  
      $newnode->setAttribute("endlng", $row['endlng']);  
    } 

    echo $dom->saveXML(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:42:04.303

当您的问题只是通过航点的循环时，它是这样的：

```
for(var i=0;i<waypoints.length;++i){
  console.log(waypoints[i].lat(),waypoints[i].lng());
} 
```

# ruby-on-rails - 设计允许用户使用密码和密码确认更改电子邮件

> ID：15854870
> 
> 赞同：1
> 
> 时间：2013-04-06T19:04:49.470
> 
> 标签：ruby-on-rails, ruby, devise

在 Devise 中，默认情况下，用户在更改电子邮件时需要添加当前密码，并且必须确认密码才能更改密码。

有没有办法让我拥有：

**更改电子邮件**
`Email`
`Confirm button`

**更改密码**
`Current password`
`New password`
`Confirm button`

我必须编辑控制器还是可以只删除表单元素？

如果我必须编辑控制器，我应该更改哪一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:07:18.543

是的，我认为 wiki 涵盖了您在此处寻找的内容：[https ://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-密码](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password)

# c++ - 调整通过引用传递的动态分配数组的大小

> ID：15854871
> 
> 赞同：0
> 
> 时间：2013-04-06T19:05:01.623
> 
> 标签：c++

我陷入了这个问题：如何在函数内部调整已通过引用传递给函数的动态分配数组的大小。我尝试了这个，以及这种方法的无数变化。当然这只是一个例子，它应该打印“john”十次，扩展一个最初只有大小 1（即只有 1 个名称）的引用传递的数组。

```
#include "stdafx.h"
#include <string>
#include <iostream>
using namespace std;

int NumLast=-1;

int Surname(string *MyData)
{

          for (int i=0; i<10 ; i++)
          {
            NumLast++;
            string *Temp = new string[NumLast+1];   // temporary array 
            for (int jjj=0; jjj<NumLast; jjj++)
                Temp[jjj]=MyData[jjj];
            delete[] MyData;
            MyData=Temp;
            MyData[NumLast]="John";
          }
          return 0;
}

void main()
{ 
     string *Data = new string[1]; // inizializza l'array 
     Surname(&*Data);
     for (int iii=0; iii<10; iii++)
              cout << Data[iii] << endl; 

     system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:07:18.933

您必须通过引用传递。你是按价值传递的。你得到

```
&*Data                                              = Data
The value of the address of what is pointed to Data = Data 
```

然后将其按值传递给姓氏。对它做的任何事情`Surname`都不会影响`Data`in `main`。

```
int Surname(string *MyData)  // This will take a copy of whatever you passed in to MyData 
```

应该是（引用运算符应该在函数定义上。）

```
int Surname(string*& MyData)
                  ^^ 
```

电话将是

```
void main()
{ 
     string *Data = new string[1];
     Surname(Data);  // The function will take a reference of data. 
```

购买 请问为什么要循环分配？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:33:42.987

我决定尝试逐行检查您的代码并指出一些问题并突出显示正在发生的事情。我将从您的`main`功能开始：

```
void main()
{ 
    string *Data = new string[1]; // inizializza l'array 
    Surname(&*Data);

    for (int iii=0; iii<10; iii++)
        cout << Data[iii] << endl;
} 
```

好的，所以这段代码所做的是分配一个字符串并将指向它的指针保存在一个名为`Data`.

然后它*取消引用* `Data`，因此，取回 a`string`然后获得该字符串的*地址*（即取回与 相同的东西`Data`）。

换句话说，这段代码：

```
 Surname(&*Data); 
```

与此代码完全相同：

```
 Surname(Data); 
```

那么，现在让我们来看看`Surname`：

```
int Surname(string *MyData)
{
    for (int i=0; i<10 ; i++)
    {
        NumLast++;
        string *Temp = new string[NumLast+1];   // temporary array 
        for (int jjj=0; jjj<NumLast; jjj++)
            Temp[jjj]=MyData[jjj];
        delete[] MyData;
        MyData=Temp;
        MyData[NumLast]="John";
    }
    return 0;
} 
```

这个奇怪的函数接受一个指向字符串的指针并循环执行 10 次。让我们看看循环的第一次迭代会发生什么......

首先，它递增`NumLast`（从`-1`到`0`）。然后它分配一个字符串数组，长度为`NumLast + 1`（即长度`1`）。到目前为止，一切都很好。

现在你可能认为函数会进入`for`循环。但它不会：记住，在那一点上`NumLast`，`jjj`两者都是`0`，因此，`jjj < NumLast`是错误的。

然后代码将`delete[] MyData`（即，它将删除任何`MyData`指向），设置`MyData`为指向在循环中较早分配的临时数组，然后将第一个元素（在 index 处`0`）设置为 string `"John"`。

在循环的第二次迭代中，函数再次递增`NumLast`（现在为 1）。它将再次分配一个字符串数组，这次是 length `2`。

这次将进入循环。它将第一个条目从复制`MyData`到第一个条目中`Temp`。它会退出。

再次，`MyData`将被删除，并且指针将指向新分配的数组。

冲洗。泡沫。重复。

最后，函数将退出。我们回到 main，它现在将执行这段代码：

```
for (int iii=0; iii<10; iii++)
    cout << Data[iii] << endl; 
```

不过等一下。`Data`指向哪里？嗯......它指向很久以前已经删除的数据。为什么？

好了，`Surname`收到了一份*指针*`Data`。当它调用`delete[] MyData`它时，它删除了它`MyData`指向的数组（与`Data`指向的数组相同）。`Surname`后来什么时候改变`MyData=Temp`的只是（函数*本地*`MyData`指针的副本）和（函数中的指针）不受影响并继续指向现在删除的内存。*`Surname``Data``main`*

 *其他人已经解释了如何获得您想要的效果，我不会重复他们写的内容。但我会敦促您坐下来考虑一下`Surname`代码是什么以及如何不清楚和令人困惑，以及如何重写它，以便更容易理解并且不易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:51:23.947

对于那些将来需要解决相同问题的人来说，这里是修改后的代码：

```
#include "stdafx.h"
#include <string>
#include <iostream>
using namespace std;

int NumLast=-1;
int Surname(string *&MyData)
{       
     for (int i=0; i<10 ; i++)
     {
           NumLast++;
           string *Temp = new string[NumLast+1];   
           for (int jjj=0; jjj<NumLast; jjj++)
                Temp[jjj]=MyData[jjj];
           delete[] MyData;
           MyData=Temp;
           MyData[NumLast]="franci";
      }
      return 0;
}

void main()
{ 
      string *Data = new string[1]; // inizializza l'array 
      Surname(Data);  
      for (int iii=0; iii<10; iii++)
           cout << Data[iii] << endl;    
      system("pause");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T19:11:00.510

1.  看起来 std::vector 是您案例的最佳解决方案。
2.  如果你真的需要手动重新分配，想想老派的 malloc()、free()、realloc() 接口。要记住的主要事情是不要将它与 C++ new/delete 接口混合，尽管通常 new/delete 是使用 malloc()/free() 实现的。
3.  如果您需要数组，则不应将数组而是指针（或引用）传递给数组（双指针）。在 std::vector 的情况下，传递对它的引用就足够了。
4.  使用对 std::vector 的引用的另一个参数 - 在指向数组调用者的指针的情况下，应该以某种方式通知什么是新数组大小。*

# html - 根据表格大小调整表格内的图像大小

> ID：15854876
> 
> 赞同：0
> 
> 时间：2013-04-06T19:05:38.790
> 
> 标签：html, css

我有一张桌子，里面会放一些图片。一些图像会大于表格的宽度（高度无关紧要）。我正在寻找一种方法来保持图像与表格大小相同而不会拉伸表格。我不想将图像宽度设置为 100%，因为如果它小于表格宽度，它会使图像更宽。另外，我希望比例保持不变。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:11:10.303

使用CSS；

**示例：style.css**（两者之一）

通过指定高度或宽度来了解**“img”**

```
img {
   max-height:50px;
} 
```

* * *

关于**td**或**th**内的表（取决于您是否使用 th）

```
td {
   max-height:50px;
} 
```

在此处阅读指南：http: [//www.w3schools.com/cssref/pr_dim_max-height.asp](http://www.w3schools.com/cssref/pr_dim_max-height.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:20:51.203

将 img 的高度调整为 的高度`<tr>`，例如

```
tr {
height:40px;
}
tr img{
height:40px;
} 
```

# python - DataFrame中列之间的相关性

> ID：15854878
> 
> 赞同：32
> 
> 时间：2013-04-06T19:05:50.520
> 
> 标签：python, pandas

我对熊猫很陌生，所以我想我做错了什么-

我有一个数据框：

```
 a     b
0  0.5  0.75
1  0.5  0.75
2  0.5  0.75
3  0.5  0.75
4  0.5  0.75 
```

`df.corr()`给我：

```
 a   b
a NaN NaN
b NaN NaN 
```

但`np.correlate(df["a"], df["b"])`给出：`1.875`

这是为什么？我想拥有我的 DataFrame 的相关矩阵，并认为这样`corr()`做（至少根据文档）。为什么会返回`NaN`？

正确的计算方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-06T21:03:04.647

[np.correlate](http://docs.scipy.org/doc/numpy/reference/generated/numpy.correlate.html)计算两个一维序列之间的（未归一化的）[互相关：](http://en.wikipedia.org/wiki/Cross-correlation)

```
z[k] = sum_n a[n] * conj(v[n+k]) 
```

而[df.corr](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.corr.html)（默认情况下）计算[Pearson 相关系数](http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient#For_a_sample)。

相关系数（如果存在）始终介于 -1 和 1 之间。互相关是无界的。

这些公式有些相关，但请注意，在互相关公式（上图）中，没有减去均值，也没有除以标准差，标准差是 Pearson 相关系数公式的一部分。

`df['a']`和的标准差`df['b']`为零的事实是导致`df.corr`到处都是 NaN 的原因。

* * *

从下面的评论中，听起来您正在寻找[Beta](http://en.wikipedia.org/wiki/Beta_%28finance%29)。它与皮尔逊相关系数有关，但不是除以标准差的乘积：

![在此处输入图像描述](https://i.stack.imgur.com/ft4zy.png)

你除以一个方差：

![在此处输入图像描述](https://i.stack.imgur.com/fHUQO.png)

* * *

您可以`Beta`使用[np.cov进行计算](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html)

```
cov = np.cov(a, b)
beta = cov[1, 0] / cov[0, 0] 
```

* * *

```
import numpy as np
import matplotlib.pyplot as plt
np.random.seed(100)

def geometric_brownian_motion(T=1, N=100, mu=0.1, sigma=0.01, S0=20):
    """
    http://stackoverflow.com/a/13203189/190597 (unutbu)
    """
    dt = float(T) / N
    t = np.linspace(0, T, N)
    W = np.random.standard_normal(size=N)
    W = np.cumsum(W) * np.sqrt(dt)  # standard brownian motion ###
    X = (mu - 0.5 * sigma ** 2) * t + sigma * W
    S = S0 * np.exp(X)  # geometric brownian motion ###
    return S

N = 10 ** 6
a = geometric_brownian_motion(T=1, mu=0.1, sigma=0.01, N=N)
b = geometric_brownian_motion(T=1, mu=0.2, sigma=0.01, N=N)

cov = np.cov(a, b)
print(cov)
# [[ 0.38234755  0.80525967]
#  [ 0.80525967  1.73517501]]
beta = cov[1, 0] / cov[0, 0]
print(beta)
# 2.10609347015

plt.plot(a)
plt.plot(b)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/xLLow.png)

s的比率`mu`为 2，`beta`约为 2.1。

* * *

你也可以用 来计算它`df.corr`，尽管这是一种更迂回的方法（但很高兴看到有一致性）：

```
import pandas as pd
df = pd.DataFrame({'a': a, 'b': b})
beta2 = (df.corr() * df['b'].std() * df['a'].std() / df['a'].var()).ix[0, 1]
print(beta2)
# 2.10609347015
assert np.allclose(beta, beta2) 
```

# java - 如何定位列表元素（Selenium）？

> ID：15854883
> 
> 赞同：2
> 
> 时间：2013-04-06T19:06:21.940
> 
> 标签：java, list, xpath, selenium, nosuchelementexception

我有以下列表：

```
<ul>
<li> item1 is red
</li>
<li> item1 is blue 
</li>
<li> item1 is white  
</li>
</ul> 
```

我尝试了以下方法来打印第一项：

```
String item = driver.findElement(By.xpath("//ul//li[0]")).getText();
        System.out.println(item); 
```

但是，我得到了： NoSuchElementException ...我可以使用 cssSelector 但我没有 ul 的 id

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T19:25:04.483

我认为 XPath 应该是`"//ul/li[1]"`. 在 selenium 中，第一项是 1，而不是 0。看[这里](http://wiki.openqa.org/display/SEL/Help+With+XPath)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T19:25:43.780

我知道这不如其他答案有效，但我认为它会给你结果。

```
WebElement element = (WebElement) ((JavascriptExecutor)driver).executeScript("return $('li').first()");

String item = element.getText() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T19:44:23.930

```
(//ul/li)[1] 
```

**这将选择 XML 文档`li`元素中的第一个元素的子`ul`元素**。

**请注意表达式**：

```
//ul/li[1] 
```

选择作为其父`li`元素的第一个子元素的任何元素。`ul`因此，该表达式通常可以选择多个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T21:09:00.870

这是您的操作方法：

```
List<WebElement> items = driver.findElements(By.cssSelector("ul li"));
if ( items.size() > 0 ) {
  for ( WebElement we: items ) {
   System.out.println( we.getText() );
  }
} 
```

# css - 让 Google 网络字体显示 font-weight 100

> ID：15854885
> 
> 赞同：5
> 
> 时间：2013-04-06T19:06:30.157
> 
> 标签：css, webfonts, google-webfonts

我无法让[Lato](http://www.google.com/fonts/specimen/Lato)字体使用 Google 网络字体显示超薄。它在 Google 的页面上应该很薄，但是当我在 400 以下的我自己的页面上使用它时不会改变它的重量（我可以加粗、加粗和正常，但不会变薄）。这在 Chrome 和 Firefox 中都存在。

我尝试了以下声明字体的变体：

```
font: 100 1em/1.5em 'Lato';
font: normal 100 1em/1.5em 'Lato';
font: normal 100 1em/1.5em 'Lato', sans-serif; 
```

以及没有速记版本并使用像素作为字体大小属性，如字体演示页面。我还尝试了几种字体大小，认为它可能无法以较小的大小呈现，但这并没有什么不同。这是页面上唯一的 css，因此没有其他规则可以覆盖它。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T19:08:22.017

您可以通过以下方式修改 CSS：

```
font: 100 1em/1.5em 'Lato';
font: Ultra-Light 100 1em/1.5em 'Lato';
font: Ultra-Light 100 1em/1.5em 'Lato', sans-serif; 
```

此外，请确保您已包含默认情况下**不**`100`包含的 Lato 字体的粗细。如果需要，网址是：

 **```
http://fonts.googleapis.com/css?family=Lato:100,400 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/AtdqY/](http://jsfiddle.net/praveenscience/AtdqY/)**

# c - msgget 无法加入 mq

> ID：15854886
> 
> 赞同：0
> 
> 时间：2013-04-06T19:06:40.193
> 
> 标签：c, pthreads, posix, message-queue

我正在使用 SysV 发送/接收消息。

在我的服务器类的线程函数内部是我创建密钥和 MQ 的地方。这已成功完成，新 MQ 的 mqID 存储在 struct msgbuf 中名为 mtext 的 char[] 变量中

```
struct msgbuf {
    long mtype;
    char mtext[100];
}; 
```

这就是我在服务器类的线程函数中创建 mqID 的方式：

```
void *thread_function(void *arg){
    int temp; //temp placement for current client
    temp=i;
    key_t keyT;
    struct msgbuf bufT;
    keyT=ftok("mcs1.c", 'B'); //create key for client[temp]
    if ((client[temp].mqID=msgget(keyT, 0666 | IPC_CREAT))==-1){ //private mq for client[temp]
            perror("msgget");
    }
    bufT.mtype=2;   //1\. SET MTYPE TO 2
    sprintf(bufT.mtext, "%d\n", client[temp].mqID);//2\. SET MTEXT TO MQID OF PRIVATE MQ

    if (msgsnd(msqid, &bufT, sizeof(bufT.mtext),0)==-1) {perror("msgsnd");} //3\. SEND TO CLIENT using global MQ

    ...
    } 
```

我刚刚创建的新 MQ 的 MQID 存储在 bufT 中

在客户端类中，这就是我 rcv MQID 和创建 MQ 的方式：

```
...
if(msgrcv(msqid, &buf, sizeof(buf.mtext), 2, 0) == -1){ //RECEIVE ACK MSG
            perror("msgrcv");
    }
    else{
            printf("ack received\n");
    }
    key_t key1;
    key1=atoi(buf.mtext);
    if ((mqT=msgget(key1, 0666)) == -1){
            printf("UNABLE TO JOIN PRIVATE MQ");
                    perror("msgget");
                    printf("%d", key1);
    }
... 
```

每当我运行服务器然后运行客户端时，它都会`msgget: No such file or directory`在运行客户端程序的终端上显示。即使当我在客户端类中打印密钥并且是正确的密钥时，它仍然无法加入 MQ。是否有一个原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:37:23.387

当指定文件名并且文件应该存在但不存在时，或者当路径名中的目录之一不存在时，不会发生此类文件或目录错误。当 key 不引用任何对象且 IPC_CREAT 标志未设置时，它与 msgget() 一起发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:20:00.657

发现了错误。代替

`sprintf(bufT.mtext, "%d\n", client[temp].mqID);`

它应该是

`sprintf(bufT.mtext, "%d\n", keyT);`

正在尝试使用 MQID 而不是密钥加入 MQ。

# css - Photospace Gallerific wordpress 响应式垂直画廊缩略图媒体查询javascript css？

> ID：15854890
> 
> 赞同：0
> 
> 时间：2013-04-06T19:06:59.450
> 
> 标签：css, plugins, responsive-design, galleriffic

我想让我的画廊[http://wordpress.org/extend/plugins/photospace-responsive/](http://wordpress.org/extend/plugins/photospace-responsive/)当浏览器缩小以适应移动设备时，垂直布局变为水平布局。

请您告诉我如何在屏幕尺寸较小到画廊位于顶部时使其恢复？

查看我的测试页面 [http://brightmist.co.uk/gallery/](http://brightmist.co.uk/gallery/)

我什至尝试过媒体查询

```
 .photospace_res .gal_content {
    float: left;
    width: 80%;
}

.photospace_res .thumbs_wrap2 {
    float: left;
    min-height: 800px;
    width: 20%;
}
@media all and (max-device-width: 480px) {
    .photospace_res .gal_content {
        float: none;
        width: 100%;
    }

    .photospace_res .thumbs_wrap2 {
        float: none;
        min-height: 0;
        width: 100%;
    }
} 
```

感谢您的帮助朱迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:12:43.817

是的，我修复了它并添加了一些额外的样式

```
 .photospace_res .gal_content {
    float: left;
    width: 80%;
}

.photospace_res .thumbs_wrap2 {
    float: left;
    width: 20%;
}

.photospace_res {
    margin: 0;
}

.photospace_res .ss-controls {
    border: 1px solid #CCCCCC;
    margin-bottom: 20px;
    padding: 5px 10px;
}

@media screen and (max-width: 700px) {
    .photospace_res .gal_content {
        float: none;
        width: 100%;
    }

    .photospace_res .thumbs_wrap2 {
        float: none;
        min-height: 0;
        width: 100%;
    }
} 
```

# javascript - 用相应的 unicode 字符替换某些单词的脚本不起作用

> ID：15854892
> 
> 赞同：0
> 
> 时间：2013-04-06T19:07:05.637
> 
> 标签：javascript, jquery, regex

我正在尝试`<nav>`用 Unicode 字符替换我的锚中的某些单词，每个锚一个单词。

但是，这个脚本似乎不起作用，因为视图源中的文本是单词而不是 Unicode 字符......

我究竟做错了什么？

有没有更好的方法来做我想做的这个脚本：

```
$("nav li a").text(function(i,currentText) {
    switch($(this).innerHTML()){
        case "CV":
            return currentText.replace(/CV/g, "&#xe00c;");
            break;
        case "down":
            return currentText.replace(/down/g, "&#xe00d;");
            break;
        case "Work":
            return currentText.replace(/Work/g, "&#xe010;");
            break;
        case "About":
            return currentText.replace(/About/g, "&#xe00f;");
            break;
        case "Resume":
            return currentText.replace(/Resume/g, "&#xe00e;");
            break;
        case "Mail":
            return currentText.replace(/Mail/g, "&#xe011;");
            break;
        case "Facebook":
            return currentText.replace(/Facebook/g, "&#xe013;");
            break;
        case "Twitter":
            return currentText.replace(/Twitter/g, "&#xe014;");
            break;
        case "Dribbble":
            return currentText.replace(/Dribbble/g, "&#xe015;");
            break;
        default:
            break;      
    }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:15:02.070

您正在尝试将 HTML 替换为 HTML 实体，但您调用`.text()`的是`.html()`.

没有必要使用`.replace()`，因为无论如何你都要替换整个字符串。只需返回实体。

您不会在“查看源代码”视图中看到您的更改。这只是显示页面加载时的源。

如果您不进行任何替换，则应返回“currentText”。

```
$("nav li a").html(function(i, curHtml) {
  switch(curHtml){
    case "CV":
        return "&#xe00c;";

    case "down":
        return "&#xe00d;";

    // etc

    default:
      return currentHtml;
}); 
```

# php - 删除网址段

> ID：15854899
> 
> 赞同：1
> 
> 时间：2013-04-06T19:07:42.683
> 
> 标签：php, codeigniter, mod-rewrite

我正在使用 codeigniter Tank_auth 库，我想从所有 url 中删除“auth”部分。

```
http://mysite.dev/auth/login 
```

到

```
http://mysite.dev/login 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:10:21.650

使用[路由配置](http://ellislab.com/codeigniter/user-guide/general/routing.html)，添加与此类似的内容`application/config/routes.php`：

```
$route['login'] = 'auth/login'; 
```

设置完成后，您可以使网络服务器从旧 URL 重定向用户，如下所示：

```
RewriteRule ^auth/login http://%{SERVER_NAME}/login [L,R=302] 
```

这会将旧的 url 请求重定向到新处理的`/login`，您可能希望`https://`在规则的后面部分处理或子目录。

整个设置似乎有点骇人听闻，更改生成的 url 似乎是一个更好的主意。

# asp.net-mvc - 在控制器中使用“HttpPost”时找不到资源错误

> ID：15854906
> 
> 赞同：4
> 
> 时间：2013-04-06T19:08:46.330
> 
> 标签：asp.net-mvc

您好
，我正在处理 ASP.Net MVC 3 项目，并收到一个名为“找不到资源”的错误我的情况是我有
1：我正在使用自己的视图并在操作中返回它们，例如我手动创建了一个视图，首先称为“ Create.cshtml”并手动将其添加到这样的操作中

```
[HttpPost]
 Public ActionResult CreateStudent(StudentIfo studentinfo)
{
 db.StudentInfo.add(studentinfo);
 db.SaveChanges();
Return View("~/Views/Student/Create.cshtml");
} 
```

[HttpGet] 在此操作之前效果很好，但为什么不是 HttpPost？

我的路线图说：

```
routes.MapRoute(" ",
                "{controller}/{action}/{id}",
                new { controller = "Student", action = "CreateStudent", id = UrlParameter.Optional }
                ); 
```

2：每当我写 [HttpPost] 时，我都会收到此错误，如果我将其删除，那么如果这种情况继续发生，那么一切正常，那么如何保存数据？

3：我的 Create.cshtml`@Html.BeginForm("CreateStudent","Student",FormMethod.Post)`没有得到什么问题？？我搜索了很多，但没有得到一个好的答案。

4：当我们使用自己的视图而不是使用 Visual Studios 脚手架模板时，CURD 操作的最佳方式是什么，即我走对了吗？我想要我自己的视图，然后根据它们编写我的控制器，而不是像 Visual Studio 那样首先编写控制器，然后右键单击“添加视图”

请推荐一些好的方法或任何有关它的网站或教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:49:52.720

简而言之，您将需要两者，您需要一个 [HttpGet] 操作来返回用户可以输入值的初始表单，然后是一个 [HttpPost] 版本来执行持久性。然后从这个 [HttpPost] 方法中，您应该 RedirectToAction (return RedirectToAction(...)) 以确保重新加载页面不会重新运行 post 操作。

所以：

```
[HttpGet]
public ActionResult CreateStudent()
{
    var viewModel = new CreateStudentViewModel { /* Set properties here or load data for it */ };
    return View(viewModel);
}

[HttpPost]
public ActionResult CreateStudent(PostedValues values)
{
    if (ModelState.IsValid)
    {
        // Create Student Here
        return RedirectToAction(/* Jump to a logical place with a Get */)
    }

    /* Initialize correct error viewModel again and show the create student screen with validation errors */
    return View(viewModel)
} 
```

我个人将这些方法命名为 GetCreateStudent 和 PostCreateStudent 并添加两个路由，其中​​包含限制 Http 方法的路由约束（请参见[此处](http://archive.arcware.net/2009/02/27/adding-httpmethodconstraint-to-asp-net-mvc-routes/)）

# android - 如果写的是android，请检查文本框

> ID：15854908
> 
> 赞同：0
> 
> 时间：2013-04-06T19:09:03.143
> 
> 标签：android, textbox

我需要你的帮助我不知道我应该在哪里写 if 条件来检查文本框是否为空的问题请检查我的代码：

```
public class register extends Activity {

private ProgressDialog pDialog;

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputUser;
EditText inputPass;
EditText inputAge;
EditText inputBloodType;

// url to create new product
private static String url_create_product = "http://10.0.2.2/blood_needed/create_product.php" ;

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);
    inputName = (EditText) findViewById(R.id.editText1);
    inputUser = (EditText) findViewById(R.id.editText5);
    inputPass = (EditText) findViewById(R.id.editText3);
    inputAge = (EditText) findViewById(R.id.editText2);
    inputBloodType = (EditText) findViewById(R.id.editText4);

    // Create button
    Button btnRegister = (Button) findViewById(R.id.Button01);

    // button click event
    btnRegister.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // creating new product in background thread
            new CreateNewProduct().execute();
        }
    });}

class CreateNewProduct extends AsyncTask<String, String, String> {

/**
 * Before starting background thread Show Progress Dialog
 * */
@Override
protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(register.this);
    pDialog.setMessage("Regestering..");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(true);
    pDialog.show();
}

protected String doInBackground(String... args) {
    String name = inputName.getText().toString();
    String user = inputUser.getText().toString();
    String pass = inputPass.getText().toString();
    String age = inputAge.getText().toString();
    String bloodtype = inputBloodType.getText().toString();

    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("username", user));
    params.add(new BasicNameValuePair("password", pass));
    params.add(new BasicNameValuePair("age", age));
    params.add(new BasicNameValuePair("bloodtype", bloodtype));

    // getting JSON Object
    // Note that create product url accepts POST method
    JSONObject json = jsonParser.makeHttpRequest(url_create_product,
            "POST", params);

    // check log cat fro response
    Log.d("Create Response", json.toString());

    // check for success tag
    try {
        int success = json.getInt(TAG_SUCCESS);

        if (success == 1) {
            // successfully created product
            // closing this screen
            finish();
        } else {
            // failed to create product
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return null;
}

/**
 * After completing background task Dismiss the progress dialog
 * **/
protected void onPostExecute(String file_url) {
    Toast.makeText(getBaseContext(), "Succes!", Toast.LENGTH_SHORT).show();

    // dismiss the dialog once done
    pDialog.dismiss();
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:14:26.833

放进去`onClick()`

```
btnRegister.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // creating new product in background thread
            String name = inputName.getText().toString();
    String user = inputUser.getText().toString();
    String pass = inputPass.getText().toString();
    String age = inputAge.getText().toString();
    String bloodtype = inputBloodType.getText().toString();
       if(user.equals("") || pass.equals("") || age.equals("") || bloodtype.equals("") || name.equals("")){
             // add message here
           }else{
            new CreateNewProduct().execute();
           }
        }
    });} 
```

# jquery - 在 jquery 中为 setInterval 添加自定义函数

> ID：15854909
> 
> 赞同：0
> 
> 时间：2013-04-06T19:09:07.800
> 
> 标签：jquery

我尝试了我能想象的一切，但我无法让它工作......我在这里创建了一个小提琴：http: [//jsfiddle.net/DftyD/3/](http://jsfiddle.net/DftyD/3/)（它不在那里工作）

我想在鼠标悬停时不断执行我的 moveit 功能（如果我在 mousemove 上执行此操作，则当图库在单击时调整大小时会出现问题）

```
cont.bind('mouseenter', function() {
    active = setInterval(moveit, 20);  // WHAT IS WRONG HERE?
        }).bind('mouseleave', function(){
    active && clearInterval(active);
});

function moveit(e) {
    var windowHeight = $(window).height();
    var contWidth = cont.width();
    var galWidth = lastImg[0].offsetLeft + lastImg.outerWidth();
    var left = (e.pageX - cont.offset().left) * (galWidth - contWidth) / contWidth;
    cont.scrollLeft(left);
}; 
```

我是 jquery 的新手，所以我的代码有点乱。希望您了解我的问题，也许可以帮助我。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:14:46.093

这样做时需要传递事件，否则`e.pageX`内部未定义`moveit()`：

```
var active;

cont.on({
    mouseenter : function(event) {
        active = setInterval(function() {
            moveit(event);
        }, 20);
    },
    mouseleave: function(){
        clearInterval(active);
    }
}); 
```

当然，这会使 的值`e.pageX`与鼠标进入元素时的值相同，它不会在每次间隔迭代时更新，所以它只移动一次。

[**小提琴**](http://jsfiddle.net/DftyD/4/)

# php - 如何将 php time() 转换为 android 时间戳？

> ID：15854911
> 
> 赞同：2
> 
> 时间：2013-04-06T19:09:18.613
> 
> 标签：php, android

我的服务器将文件上次更新时间作为 php time() 字符串发送

我的 android 应用程序从服务器接收响应为 php 时间戳，如 1365228375

据我所知，android读取时间戳以毫秒为单位

我的问题是如何将 php time() 转换为 android 时间戳，以及如何将转换后的时间戳转换为 android 应用程序中的人类可读？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T19:14:23.260

使用 Java 的日历：（因为我心爱的日期已被弃用） [日历 API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

尝试类似：

```
Calendar c = Calendar.getInstance();

c.setTimeInMillis(1365228375*1000);

System.out.print(c.toString()); - just to demonstrate the API has lots of info about presentation 
```

只需将从您的 PHP 返回到 Android 应用程序的任何内容代替上面显示的“1365228375”。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T19:19:17.307

嗯，从秒到微秒的转换应该不会太难。

```
echo time() * 1000; 
```

如果您需要时间戳以**毫秒**为单位，请注意[`microtime()`](http://www.php.net/manual/en/function.microtime.php)，此函数不*返回*整数，因此您必须进行一些转换

不知道如何将其转换为 Android 中的可读时间

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T20:08:42.217

本身并没有真正的“Android”时间戳。[PHP:time()](http://php.net/manual/en/function.time.php)返回从 GMT/UTC 纪元开始以秒为单位的 unix 时间戳。如果您想创建一个人类可读的时间戳，例如`January 1 1970 00:00:00 GMT`您可以使用 Java 的 Calender，但我建议您使用[Joda Time](http://joda-time.sourceforge.net/)，因为它更易于使用且功能更强大。

# php - 自动完成功能无法按预期工作

> ID：15854914
> 
> 赞同：2
> 
> 时间：2013-04-06T19:09:45.803
> 
> 标签：php, jquery, autocomplete

我正在尝试创建一个自动完成功能，但是当我在文本字段中输入姓氏时，它不会显示全名。

JavaScript：

```
 $(document).ready(function(){
      $("#txtBuscar").autocomplete("autocomplete.php", {
          selectFirst: true
      });
 }); 
```

PHP：

```
 require('conecta.php');
ini_set('display_errors',1); error_reporting(E_ALL);
$cSQL="SELECT NOMBRE, APELLIDOS FROM personas WHERE APELLIDOS LIKE '%?%' ORDER BY APELLIDOS";
$stmt=$oConni->prepare($cSQL) or die($oConni->error);
    $stmt->bind_param('s',$_GET['q']);
    $stmt->execute();
    $stmt->bind_result($nombre,$apellidos);
    while ($stmt->fetch()) {

        echo $apellidos.', '.$nombre."\n";

    }
    $stmt->close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:14:01.043

我认为你的`?`参数中的`LIKE`参数没有被填写，因为它在一个字符串中。如果您使用的是 MySQL，请尝试以下操作：

```
$cSQL="SELECT NOMBRE, APELLIDOS FROM personas WHERE APELLIDOS LIKE CONCAT('%', ?, '%') ORDER BY APELLIDOS"; 
```

对于 Oracle，请使用如下内容：

```
$cSQL="SELECT NOMBRE, APELLIDOS FROM personas WHERE APELLIDOS LIKE '%' || ? || '%' ORDER BY APELLIDOS"; 
```

# django - 错误 Django 智能选择：/smart_selects/widgets.py in ，第 4 行

> ID：15854916
> 
> 赞同：1
> 
> 时间：2013-04-06T19:10:07.727
> 
> 标签：django, select, static, admin

我有一个问题，比如标题。我试图在我的项目 Django 中安装 smart_selects，但不起作用。我按照[https://github.com/digi604/django-smart-selects](https://github.com/digi604/django-smart-selects)中的自述文件...但错误是：

> 没有名为 admin_static 的模块请求方法：GET 请求 URL：http: **//*.com/panel/schedevendorcomplete/add/1/Basic/ Django 版本：1.2.7 异常类型：ImportError 异常值：
> 没有名为 admin_static 的模块异常位置：/ var/www/website/smart_selects/widgets.py 在第 4 行 Python 可执行文件：/usr/bin/python Python 版本：2.7.3 Python 路径：['/usr/lib/python2.7/dist-packages/PIL' , '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2\. 7/lib-old'、'/usr/lib/python2.7/lib-dynload'、'/usr/local/lib/python2.7/dist-packages'、'/usr/lib/python2.7/dist -packages', '/var/www/vhosts/****.com', '/var/www/vhosts/*****.com/website'] 服务器时间：sab, 6 Apr 2013 20:50:04 +0200 Traceback 切换到复制粘贴视图 /usr/local/lib/python2.7/dist-packages/django/core/handlers /base.py in get_response request.path_info) ... ▶ 本地变量 /usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py 解析 self.url_patterns 中的模式： ... ▶ 本地变量 /usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in _get_url_patterns patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module) ... ▶ 本地变量 / usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in _get_urlconf_module self._urlconf_module = import_module(self.urlconf_name) ... ▶ 本地变量 /usr/local/lib/python2.7/ dist-packages/django/utils/importlib。py 在 import_module _*import* _(name) ... ▶ 本地变量 /var/www/vhosts/tuttoricevimenti.com/website/urls.py in admin.autodiscover() ... ▶ 本地变量 /usr/local/lib/python2.7/ dist-packages/django/contrib/admin/_ *init* _.py in autodiscover import_module('%s.admin' % app) ... ▶ 本地变量 /usr/local/lib/python2.7/dist-packages/django /utils/importlib.py 在 import_module _ *import*. ▶ import_module 中的本地变量 /usr/local/lib/python2.7/dist-packages/django/utils/importlib.py _*import* _(name) ... ▶ 本地变量 /var/wwww/vhosts/*** .com/gazzettadelpopolo/models.py in from website.smart_selects.db_fields import GroupedForeignKey ... ▶ 本地变量 /var/wwww/vhosts/ *** .com/website/smart_selects/db_fields.py in import form_fields ... ▶ 本地变量 /var/www/website/smart_selects/form_fields.py 从 smart_selects.widgets import ChainedSelect ... ▶ 本地变量 /var/www/website /smart_selects/widgets.py in from django.contrib.admin.templatetags.admin_static import static ... ▶ 本地变量***

 ***我不知道我错在哪里，我对django不是很熟悉。

这可能是什么原因造成的？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:10:15.220

我相信问题出在您的**settings.py**文件中。当说：“**没有名为 admin_static 的模块**”意味着您没有正确安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T00:39:24.977

升级你的 django 版本，然后你可以安装 django-smart-selects

确保您的 django 版本是最新版本或来自此范围

1.8.5、1.8.6 或 1.9***

# java - 在 Java 中对 ResultSet 调用 next 时出现超时异常

> ID：15854917
> 
> 赞同：0
> 
> 时间：2013-04-06T19:10:15.947
> 
> 标签：java, database, resultset

我正在使用数据库，我正在从中选择一些东西，就像我做过一千次一样。但这一次，程序在调用时只是卡住`resultSet.next()`了，过了一会儿又抛出了超时异常。任何想法，我哪里有错误？这是我的代码：

```
 try {
        connection = dataSource.getConnection();
        connection.setAutoCommit(false);
        query = connection.prepareStatement(
                "SELECT * FROM INGREDIENTS WHERE RECIPEID = ?");

        query.setLong(1, recipe.getId());

        ResultSet resultsDB = query.executeQuery();

        SortedSet<Ingredient> result = new TreeSet<Ingredient>();
        while (resultsDB.next()) {
            Ingredient output = rowToIngredient(resultsDB);
            validate(output);

            result.add(output);
        }
        connection.commit();
        return result;
     } 
```

`resultsDB.next()`程序在 while 循环中作为条件调用时恰好冻结。当这部分代码第一次执行时，它就起作用了，当程序第二次带着另一个数据到达那里时，`.next()`方法冻结程序。该程序永远不会进入循环，我使用了断点，它在评估条件的那一行失败。感谢您的建议

整个代码都在循环中，可以吗？就我使用数据源而言，它应该是

错误：

```
java.sql.SQLTransactionRollbackException: A lock could not be obtained within the time requested
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedResultSet.closeOnTransactionError(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source)
    at org.apache.commons.dbcp.DelegatingResultSet.next(DelegatingResultSet.java:207)
    at org.apache.commons.dbcp.DelegatingResultSet.next(DelegatingResultSet.java:207)
    at fi.muni.pv168.RecipebookImpl.getIngredientsOfRecipe(RecipebookImpl.java:53)
    at fi.muni.pv168.RecipebookImpl.isIngredientInRecipe(RecipebookImpl.java:324)
    at fi.muni.pv168.RecipebookImpl.addIngredientsToRecipe(RecipebookImpl.java:92)
    at fi.muni.pv168.RecipebookImplTest.testFindRecipesByIngredients(RecipebookImplTest.java:390)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.sql.SQLException: A lock could not be obtained within the time requested
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
... 46 more 
```

还有更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:58:59.670

您必须有另一个并发的未提交事务正在更新您尝试读取的行。这会导致该行被锁定，并且您的事务要等到该锁被释放。

如果您使用工具对数据库执行请求，请确保在此工具中提交或回滚当前事务。如果您有另一个应用程序，或者同一个应用程序中的另一个线程使用同一个数据库，请检查它是否没有长时间运行的事务。

# c++ - 在 box2d 中将文本渲染到世界中

> ID：15854924
> 
> 赞同：0
> 
> 时间：2013-04-06T19:11:06.780
> 
> 标签：c++, box2d

我正在用 C++ 开发 Box2D。我创造了世界。是否有某种形状或内置方法可用于将文本写入世界，并且可能作为固定装置？也许这很容易，但我一直无法弄清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:40:51.723

Box2D 仅提供了您可能已经知道的两种开箱即用的基本形状：`Polygons`和`Circles`. 如果您需要更高级的形状，您应该使用类似的工具`box2d editor`

# c++ - 如何将 std::system_error 与 GetLastError 一起使用？

> ID：15854930
> 
> 赞同：16
> 
> 时间：2013-04-06T19:11:32.313
> 
> 标签：c++, winapi, c++11

如果我调用通过 GetLastError 报告错误的 Win32 函数，例如[RegisterClassEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633587%28v=vs.85%29.aspx "MSDN 上的 RegisterClassEx")，我如何为该错误抛出 std::system_error ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-06T19:19:51.580

检查`GetLastError()`like的值

```
DWORD dwErrVal = GetLastError();
std::error_code ec (dwErrVal, std::system_category());
throw std::system_error(ec, "Exception occurred"); 
```

请参见[此处](http://www.cplusplus.com/reference/system_error/error_code/error_code/)`error_code`和[此处](http://www.cplusplus.com/reference/system_error/system_error/system_error/)。_`std::system_error`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-06T21:28:15.247

请注意，比较 a`std::error_code`类别中的a`std::system_category()`通常不适用于`std::errc`枚举常量，具体取决于您的供应商。例如

`std::error_code(ERROR_FILE_NOT_FOUND, std::system_category()) != std::errc::no_such_file_or_directory)`

某些供应商需要使用`std::generic_category()`它才能工作。

在 MinGW`std::error_code(ERROR_FILE_NOT_FOUND, std::system_category()).message()`中不会给你正确的信息。

对于一个真正可移植且健壮的解决方案，我建议您自己继承`std::system_error`和`std::system_category`实现正确的功能`windows_error`。`windows_category`据报道，YMMV、VS2017 可以正常工作。

# paypal - PayPal 隐式付款错误 580001

> ID：15854931
> 
> 赞同：3
> 
> 时间：2013-04-06T19:11:36.147
> 
> 标签：paypal

我在实施贝宝隐式付款时遇到了一些困难，不幸的是，贝宝​​的错误消息响应中的细节非常有限。

这是请求：

```
{
    "actionType": "PAY", 
    "currencyCode": "USD", 
    "cancelUrl": "http://my_domain.com/cancel_url", 
    "returnUrl": "http://my_domain.com/return_url", 
    "requestEnvelope.errorLanguage": "en_US", 
    "requestEnvelope.detailLevel": "ReturnAll", 
    "senderEmail": "sender@email.com", 
    "receiverList.receiver(0).amount": 50, 
    "receiverList.receiver(0).email": "receiver@email.com"
} 
```

这是我正在设置的标题：

```
 "Content-Type", "application/json"
    "Accept-Language", "en_US"

    "X-PAYPAL-SECURITY-USERID", "username"
    "X-PAYPAL-SECURITY-PASSWORD", "pwd"                           
    "X-PAYPAL-SECURITY-SIGNATURE", "sig"                           
    "X-PAYPAL-APPLICATION-ID", "My App id"
    "X-PAYPAL-REQUEST-DATA-FORMAT", "JSON"
    "X-PAYPAL-RESPONSE-DATA-FORMAT", "JSON" 
```

这是回应：

```
{
    "responseEnvelope":{
      "timestamp":"2013-04-06T12:02:41.011-07:00",
      "ack":"Failure",
      "correlationId":"3842d361b077d",
      "build":"5563463"},"error":[{
         "errorId":"580001",
        "domain":"PLATFORM",
        "subdomain":"Application",
        "severity":"Error",
        "category":"Application",
        "message":"Invalid request: {0}"
      }]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:33:40.587

我只是遇到了完全相同的问题，在任何地方都找不到答案。原来我使用的是 GET 请求而不是 POST。奇怪的是，errorId 580001 在他们的文档中找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T14:37:00.843

自适应支付 API 不接受请求负载中的空格，请删除所有空格和换行符，然后再试一次。我花了很长时间才弄清楚这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T18:36:16.250

作为此问题的另一个原因，请确保`amount`每个接收器的属性不包含逗号，因为这也会中断。即`1000.00`代替`1,000.00`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T08:40:36.653

另一件需要注意的是编码。我遇到了这个错误，并意识到这是由于“备忘录”字段中的 & 符号造成的。如果您将请求作为 NVP 发送，请务必尽可能进行 URL 编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-05T06:46:12.017

```
let payload={
  "actionType":"PAY",                             
  "currencyCode":"USD",                          
  "receiverList":{
    "receiver":[{
      "amount":1.00,                             
      "email":"buyer email"    
    }]
  },
  "returnUrl":"succes url", 
  "cancelUrl":"cancel url",  
  "requestEnvelope":{
  "errorLanguage":"en_US",                        
  "detailLevel":"ReturnAll"                        
  }
}
let url = "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay";
    return this.http.post(url, payload, { headers: headers })
    headers.append('X-PAYPAL-SECURITY-USERID', 'security id');
    headers.append('X-PAYPAL-SECURITY-PASSWORD', 'password');
    headers.append('X-PAYPAL-SECURITY-SIGNATURE', 'signature');
    headers.append('X-PAYPAL-REQUEST-DATA-FORMAT', 'JSON');
    headers.append('X-PAYPAL-RESPONSE-DATA-FORMAT', 'JSON');
    headers.append('X-PAYPAL-APPLICATION-ID', 'APP-id'); 
```

# laravel - Basset 4（预测试版）

> ID：15854936
> 
> 赞同：0
> 
> 时间：2013-04-06T19:11:55.397
> 
> 标签：laravel

我正在使用 Basset 4 来管理资产。

在配置文件中，我声明了一个集合“管理员”

```
return array(

'collections' => array(
    'admin' => function($collection)
    {
        $collection->directory('assets/js', function($collection)
        {
           $collection->add('vendor/jquery-1.9.1.min.js');
        });
    },
),

...
) 
```

稍后在视图中，我想在管理集合中添加一个额外的文件。

我尝试了以下代码，但它不起作用：

```
Basset::collection('admin', function($collection)
{
   $collection->add('function.js');
}); 
```

有没有办法从视图或控制器将文件添加到集合中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:06:29.043

Basset 的设计并不是*为了*那样工作。您应该在该初始调用中定义所有资产，即使在整个应用程序执行过程中添加资产的能力是可能的，但不建议这样做。

1.  当构建为特定路线添加的集合资产时，构建器将无法使用，因为 Artisan 不会触发任何路线等。
2.  在许多地方调整集合通常会导致进一步的混乱。

我知道这并不理想，因为您可能正在考虑实现特定于页面的 JavaScript，对吗？我已经考虑过了，但真的想不出一个干净的解决方案（建议？），尽管我听说有人为 body 或一些他们的 JavaScript 可以附加到的类分配一个唯一的 ID。

这并不出色，但这是我目前能给你的最好的。

# php - 使用php创建日志文件

> ID：15854941
> 
> 赞同：-3
> 
> 时间：2013-04-06T19:12:27.483
> 
> 标签：php, logfiles

我正在创建一个后台网站，并且需要跟踪在网站上完成的操作，为此我需要生成每个操作的日志文件，例如：Date-Time -User-Operation。我已经尝试过文件，但并没有真正起作用

```
$query_add="UPDATE auth_table SET etat = replace(etat,'$anc','$nv') where user_id LIKE  
'%$log%'";
$query_exec=mysql_query($query_add) or die(mysql_error()); 
?><script language='JavaScript'>alert('Activation termine')</script><?
$date = date("Y-d-m"); 
$heure = date("H:i"); 
$op=$date.$heure.'Activation du compte de'.$log.'par administrateur'.$logad; 
$fp = fopen('log.txt', 'w');
fseek($fp,0);
fputs($fp, $op);
fclose($fp); 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:48:34.890

```
$query_add="UPDATE auth_table SET etat = replace(etat,'$anc','$nv') where user_id LIKE  
'%$log%'";
$query_exec=mysql_query($query_add) or die(mysql_error()); 
?><script language='JavaScript'>alert('Activation termine')</script><?
$date = date("Y-d-m"); 
$heure = date("H:i"); 
$op=$date.$heure.'Activation du compte de'.$log.'par administrateur'.$logad;
$op .= "\n";
$file = 'log.txt';
$search = file_get_contents($file);
$check = strpos($search, $log);
if ($check === FALSE) {
  $fp = @fopen($file, 'a');
  $write = @fputs($fp, $op);
  @fclose($fp);
} 
```

假设`$log`并且`$logad`已经定义，这将起作用。

# html - 如何限制html中文件上传的数量？

> ID：15854946
> 
> 赞同：6
> 
> 时间：2013-04-06T19:13:08.253
> 
> 标签：html

我想限制用户在输入标签中最多选择 6 个文件。目前，我的输入标签是这样的：

```
<input type="file" name="question_pic" id="id_question_pic" multiple/> 
```

我想限制用户最多选择 6 个文件。我可以在服务器端返回错误，但我希望客户端先更改它。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T19:15:16.747

您可以使用这样的 jQuery 函数：

```
$('.fileinput').change(function(){
    if(this.files.length>10)
        alert('Too many files')
});
// Prevent submission if limit is exceeded.
$('form').submit(function(){
    if(this.files.length>10)
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:27:25.707

您可以像这样使用 Jquery 或 Javascript：

```
<input type="file" name="question_pic" id="id_question_pic" max-uploads = 6/> 
```

然后在 Jquery 你可以这样做

```
Var number_of_uploads;
$("#id_question_pic").change(function() {
    if(number_of_uploads > $(this).attr(max-uploads))
    {
    alert('Your Message');
    }
    else
    {
    number_of_uploads = number_of_uploads + 1;
    }
}); 
```

您也可以在上传文件的表单提交中执行此操作。但是，如果您使用 Ajax 上传，我认为这很好。

# scala - Kryo：如何在 Scala 中使用 CollectionSerializer？

> ID：15854948
> 
> 赞同：1
> 
> 时间：2013-04-06T19:13:10.503
> 
> 标签：scala, kryo

使用 CollectionSerializer 来写是很简单的，但是我如何反序列化字节数组。收藏系列。

我希望能够做这样的事情（给定界面）：

```
listSerializer.read(kryo, new Input(bytes), classOf[java.util.Collection[AnyRef]]).toList 
```

或者

```
listSerializer.read(kryo, new Input(bytes), classOf[ListBuffer[AnyRef]]).toList 
```

但我没有尝试编译。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T22:10:48.560

使用从 Kryo 文档链接的 Chill 或 akka-kryo-serialization。

# java - 从 Aptana/Eclipse 中调用 shell 命令

> ID：15854950
> 
> 赞同：0
> 
> 时间：2013-04-06T19:13:15.587
> 
> 标签：java, eclipse, aptana

我正在尝试向 Aptana 添加一项功能，而此功能要求我找出系统上的 gem 所在的位置。在 ruby​​ 中，我会运行类似的命令...

```
gem_folder_path = `rvm gemdir` 
```

在 java 中显然有更多的因素需要处理，但似乎我一直在尝试实现的 java 解决方案在 eclipse/Aptana IDE 的范围内不起作用（我已经独立测试过它并且它在我的 helloworld.java 文件）。shell命令是否被禁用或什么？

这是我当前不起作用的 java 解决方案。

```
public static String getGemsDirectory()
{
    try
    {
        Process proc = Runtime.getRuntime().exec("which ruby");

        BufferedReader stdInput = new BufferedReader(new 
                                        InputStreamReader(proc.getInputStream()));

        BufferedReader stdError = new BufferedReader(new 
                                        InputStreamReader(proc.getErrorStream()));

        String s;
        String commandOutput = "";
        // read the output from the command
        System.out.println("Here is the standard output of the command:\n");
        while ((s = stdInput.readLine()) != null) {
            //System.out.println(s);
            commandOutput += s;
        }

        // read any errors from the attempted command
        System.out.println("Here is the standard error of the command (if any):\n");
        while ((String s = stdError.readLine()) != null) {
            //System.out.println(s);
            commandOutput += s;
        }

        int statusCode = proc.exitValue();
        return commandOutput;
    }
    catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace(); 
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:29:37.850

本教程将向您展示如何运行本机操作系统命令。从 Eclipse/Tomcat 和 Java [http://www.java-programming.info/tutorial/pdf/java/22-Native-Apps.pdf为我工作](http://www.java-programming.info/tutorial/pdf/java/22-Native-Apps.pdf)

# css - 是否有另一种方法可以使页面中间的元素居中

> ID：15854951
> 
> 赞同：2
> 
> 时间：2013-04-06T19:13:30.217
> 
> 标签：css

我知道我们通常使用`margin:auto`但是我使用下面的代码。

**HTML：**

```
<article>
  <header></header>
</article> 
```

**CSS：**

```
article{
  max-width: 500px;
  margin: auto; /* goes in the middle - great */
}
header{
  width: 130%;
  margin-left: -30%;
} 
```

[演示](http://jsfiddle.net/VG8P5/)

在这一点上，我把它`article`放在中心。但是，随着浏览器/窗口大小变小，我想将文章居中，就好像它的宽度与`header`. 基本上，在某些时候（当您缩小浏览器窗口时），`header`它将位于左侧的边缘，而不是利用右侧的空白空间。

我不想有额外的`div`，但如果我这样做了，我会将文章包装在 a 中`div`并给它一个自动边距。

[截图 http://i3.minus.com/i2yPFqNDgeBbS.png](http://i3.minus.com/i2yPFqNDgeBbS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:36:46.317

也许我误解了一些东西，但你不只是想要：

```
margin-left: 15%; 
```

在标题上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:48:07.013

这段代码做了描述的事情，但如果你想保持两条边对齐，你需要进入一些 javascript，我推荐 jquery 来做这种事情。

```
<html>
    <head>
        <title></title>
        <style>
            html, body {
                width: 100%;
                text-align: center;
            }
            .header {
                width: 960px;
                margin-left: auto;
                margin-right: auto;
                position: relative;
                left: -100px;

                background-color: blue;
            }
            .article {
                width: 75%;
                margin-left: auto;
                margin-right: auto;

                background-color: blue;
            }
        </style>
    </head>
    <body>
        <div class="header">Header</div>
        <div class="article">TODO write content</div>
    </body>
</html> 
```

# javascript - 在 NodeJS 中进行 urldecode (php) 的最佳方法

> ID：15854953
> 
> 赞同：7
> 
> 时间：2013-04-06T19:13:40.417
> 
> 标签：javascript, node.js, urldecode

所以我正在尝试解码以前在 Node.js 中使用 php 进行 urlencoded 的字符串。大约一个月前，我使用它：

```
querystring.unescape(str.replace(/\+/g, '%20')); 
```

然后它就停止了工作 - 不确定是不是一些节点升级或什么。在玩了之后似乎我可以使用'unescape（）'但我不确定它是否万无一失。

```
unescape(str.replace(/\+/g, '%20')); 
```

我的问题是什么是最好的方法，有没有其他人注意到这个问题。请注意，第一行适用于简单的字符串，但会分解为奇数字符 - 所以也许我没有看到一些编码问题。

这是一个字符串：

%E6.%82%CCI-T%8C%01+A

现在访问[http://www.tareeinternet.com/scripts/unescape.html](http://www.tareeinternet.com/scripts/unescape.html)并对其进行解码。那是我的原件（它是一个 RC4 加密字符串）。我希望 Node 返回那个字符串。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-06T20:22:20.620

If you just use the `unescape` function that's built in into Node.js, your result should be what you want.

Using Node.js 0.10.1 and running

```
unescape('%E6.%82%CCI-T%8C%01+A'); 
```

on the interactive shell, I get

```
'æ.ÌI-T\u0001+A' 
```

as result which looks pretty much like what you would like to get.

Hope this helps :-)

# php - XMLHttpRequest 状态 4 但 responseText 为空

> ID：15854954
> 
> 赞同：0
> 
> 时间：2013-04-06T19:13:45.930
> 
> 标签：php, javascript, xmlhttprequest

我正在尝试编写类似 javaScript 插件的谷歌广告。我不能使用 jQuery ajax，因为它应该适用于所有站点。这是我的 JavaScript 代码。

```
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        alert( ajaxRequest.responseText);
        console.log('xhr',ajaxRequest)
    } else {
        //alert(ajaxRequest.readyState);
        //alert(ajaxRequest.responseText);
    }
}
    var project_path = "http://www.domainname.com/"; //for stackoverflow, using right path in live code.
var req_url = project_path + "ads/verifypublisher/";
ajaxRequest.open("GET", req_url, true);
ajaxRequest.send(null); 
```

这是我的 PHP 文件的样子，

```
echo("<b>hi:</b> ");
exit(); 
```

是的，这就是我所拥有的一切。仍然 responseText 是空的。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:25:17.060

alert(req_url) 应该显示错误的 url “ [http://www.domainname.comads/verifypublisher/](http://www.domainname.comads/verifypublisher/) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:27:30.253

在对响应进行任何操作之前，最好确保状态码为 200。然后你可以更早地发现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:40:30.563

在我的测试中试试这个它适用于大多数浏览器

```
var responseText=function(e,doing){
                     if (e.readyState== 4) {
                           if(doing)doing(e);
                           return(e.responseText);              
                     };
                     if (e.readyState == 200) { 
                           if(doing)doing(e);               
                           return(e.responseText);

                     };
                     return false;                   
};
function  loadXMLPostDocf(url,method,posData,uploadProgress,uploadComplete,uploadFailed,uploadCanceled,statechange,CallBackOnSend) {
   var arrSignatures = ["MSXML2.XMLHTTP.5.0", "MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP","Microsoft.XMLHTTP"];
// branch for native XMLHttpRequest object
if (window.XMLHttpRequest && checkVersion()) {
    pos = new XMLHttpRequest(); 
    pos.open(method, url, true);
    //pos.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    if(statechange!=''){pos.onreadystatechange = statechange;};
    try{
      if(uploadProgress!='')if(pos.upload){
          pos.upload.addEventListener("progress", uploadProgress, true);
      }else{
          pos.addEventListener("progress", uploadProgress, true);
      }
      if(uploadComplete!='')pos.addEventListener("load", uploadComplete, false);
      if(uploadFailed!='')pos.addEventListener("error", uploadFailed, false);
      if(uploadCanceled!='')pos.addEventListener("abort", uploadCanceled, false);
    }catch(e){

    }

    pos.send(posData);
    if(CallBackOnSend)CallBackOnSend(pos);
    //console.log(pos.abort());
// branch for IE/Windows ActiveX version
} else if (window.ActiveXObject) {  
         for (var i=0; i < arrSignatures.length; i++) {
                    try {
                        pos = new ActiveXObject(arrSignatures[i]);

                    } catch (oError) {
                        //ignore
                    };
          };
    if (pos) {
        pos.open(method, url, false);
        //pos.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        if(!statechange){pos.onreadystatechange = statechange;};
        if(!uploadComplete){pos.onreadystatechange = uploadComplete;};
       // if(uploadProgress!='')pos.upload.addEventListener("progress", uploadProgress, true);
        //if(uploadComplete!='')pos.addEventListener("load", uploadComplete, false);
        //if(uploadFailed!='')pos.addEventListener("error", uploadFailed, false);
        //if(uploadCanceled!='')pos.addEventListener("abort", uploadCanceled, false);
        pos.send(posData);
        if(CallBackOnSend)CallBackOnSend(pos);
    };   
 };
 return(pos);
}; 
```

样本：

```
 var complete=function(e){
    var Body=responseText(e.target);
    console.log(Body);
};
var uploadProgress=function(evt){

};
var uploadComplete=function(evt){
    if(evt.target.status==200 || evt.target.status==304){
      var Body=responseText(evt.target);
      console.log(Body);
    }else{
        return false;
    };
};
var uploadFailed=function(evt){

};
var uploadCanceled=function(evt){

};
var CallBackOnSend=function(evt){

};
loadXMLPostDocf("http://domain.com/index.php","GET",null,uploadProgress,uploadComplete,uploadFailed,uploadCanceled,complete,CallBackOnSend); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-25T08:49:29.750

通过检查我的 html 代码解决了与此类似的问题。我的表单中有一个`onclick`处理程序，将按钮提交给一个方法。像这样：`onclick="sendFalconRequestWithHeaders()"`。这个方法反过来调用 ajax 就像你的一样，做我想做的事。但与预期不同，我的浏览器没有返回任何内容。

从[某人的辛勤工作](http://www.carlj.ca/2008/06/18/fixing-firefoxs-ns_error_not_available-error-when-using-pagemethods/)中学到，我在这个处理程序中返回了错误，并解决了。让我提一下，在到达这篇文章之前，我花了整整 3 天的周末和半天的时间在办公室编写代码实现`CORS filters`、、`jetty config`其他`jersey and embedded jetty`相关的东西——只是为了解决这个问题。我所有的理解都围绕着`cross domain ajax requests`标准的东西。javascript 中的简单错误让你变得愚蠢，这太荒谬了。

现在我必须清理我的代码才能干净地提交 git 补丁。感谢那个人。

# objective-c - 如何在Objective-C的函数中返回新分配的对象？

> ID：15854959
> 
> 赞同：0
> 
> 时间：2013-04-06T19:14:14.743
> 
> 标签：objective-c, memory-management

如何在函数中返回新分配的对象？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"liteCell"];
    [cell.textLabel setText:@"Lite"];
    return cell; // Object returned to caller as an owning reference (single retain count transferred to caller)
} 
```

对象泄露：分配并存储到“cell”中的对象是从名称（“tableView:cellForRowAtIndexPath:”）不以“copy”、“mutableCopy”、“alloc”或“new”开头的方法返回的。这违反了 Cocoa 内存管理指南中给出的命名约定规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:27:20.483

在这种情况下，您应该返回一个自动释放的对象，因此解决方案是

```
UITableViewCell *cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault] autorelease]; 
```

哦，更好的方法是也使用`[tableView dequeueReusableCellWithIdentifier:CellIdentifier]`，像这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (nil == cell) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T11:06:25.957

对于 iOS 5，您需要检查单元格是否已经实例化，如果没有，您需要实例化单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (nil == cell) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }

    return cell;
} 
```

在 iOS 6+ 下，您只需要为表格视图注册所需的单元格，如下所示：

```
[tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:cellIdentifier]; 
```

然后稍后您可以使用：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath]; 
```

并且总是会收到一个分配的单元格，所以你可以写

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    return cell;
} 
```

# node.js - 使用从 Node.js (Express.js) 注入的模板的 Backbone.js 视图

> ID：15854968
> 
> 赞同：1
> 
> 时间：2013-04-06T19:14:56.710
> 
> 标签：node.js, backbone.js, express

据我在互联网上阅读，如果你想一起使用backbone.js和node.js，通常你使用node.js（express.js特别是）作为后端API提供者（加上其他功能，比如持久性，等），而backbone.js是前端的引擎，这意味着提供html模板、视图、模型等。

我在 Internet 和 github 上阅读的骨干项目通常以 index.html 开头，该 index.html 直接执行一个 javascript 文件，该文件实例化“类”，如路由、集合、视图等。前端的视图负责注入html 和 css 模板并自行管理视图，如事件等。

当我看到一些像backbone.iobind（[https://github.com/logicalparadox/backbone.iobind](https://github.com/logicalparadox/backbone.iobind)）这样的项目时，问题就出现了，它使用了一种我真的不明白的非常特殊的配置以及它是如何工作的。

如果您查看源代码，node.js 服务器不仅负责 API，还负责插入 Backbone 将使用的 html 模板。我有很多疑问：

1.  谁执行骨干前端，因为没有执行执行路由器、视图、集合和历史的 javascript 的“索引”？

2.  你如何同步 express.js 生成的模板，以及要使用它们的主干.js 端的视图？

3.  什么是主干.js 路由器类的目的，因为您使用 node.js 路由器来感染东西？

4.  为什么你使用这种架构，而不是像我一开始描述的那样更干净？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:05:13.137

经过几天的研究，看到互联网上没有关于它的信息，我将回答我自己的问题。希望一些编辑会纠正错误的答案。我要描述的是node.js 和backbone.js 应用程序的“主干”，它从后端而不是前端注入模板，因为社区现在正在发展。为什么开发人员选择两个选项之一？根据不同的变量：安全性、加载和渲染速度等。过程总结：

A. 基本上，第一步是在express.js中配置views目录和模板引擎：

```
 app.set('views', __dirname + '/views');
    app.set('view engine', 'jade'); 
```

B. 在此之后，我们将在其中定位所有静态资源的中间件。当我们谈论“静态”资源时，我们谈论将在前端执行的图像、javascript、html、css 等：

```
 app.use(express.static(path.join(__dirname, 'public'))); 
```

如果 express（或 connect）在 /public 目录中找到一个 index.html，它将运行它。如果没有，您必须通过快速路由系统创建路由。

C. 我们处于 express.js 从后端注入 HTML 的情况。为此，正如我所写，我们需要一个路由系统，例如：

```
 app.get('/', require('./views/index').init); 
```

在这里，当express.js检测到用户访问主页面'/'时，它会查找位于/views父目录（不是/public）内的index.js文件，并且会从这里index.jade将被渲染并注入到前端：

```
 res.render('index'); 
```

D. index.jade 将提供所需的资源。在我们的例子中，将提供这个 .jade 所需的 CSS、库（jquery、backbone 等），最后，backbone.js 需要的两个元素：

1.  将加载backbone.js 前端的javascript 文件。在这里，所有文件都将位于 /public 目录中：

    ```
     script(src='/views/index.js') 
    ```

2.  index.jade 还将提供backbone.js 视图所需的模板：

    ```
     script(type='text/template', id='login') 
    ```

E. 有几种不同的backbone.js 配置。通常，您从前端路由器启动主应用程序，所有对象都在此处初始化。但是同步 index.jade 文件、模板和 javescript 视图的执行的主要思想是在 DOM 加载后执行最后一个。出于这个原因，最好的办法是使用下面的 jquery 语句：

```
 $(document).ready(function() {
        app.view = new app.View();
     }); 
```

也许有些人会觉得这个总结没有必要，但是对于那些不知道将所有都放在前端或混合 HTML node.js 后端 + 主干.js 前端之间的区别的初学者来说，我认为这会很有用. 首先，结构如何。也许这听起来很疯狂，但互联网上没有解释如何构建它的信息。

最好的祝福

# delphi - 如何在delphi 7中列出所有可用的表格

> ID：15854975
> 
> 赞同：0
> 
> 时间：2013-04-06T19:15:42.783
> 
> 标签：delphi

我使用 delphi 7，我的项目有很多可用的形式。我试图执行`application.component[i].classname`以获取所有可用的表单类名，但我只获取创建的表单类名列表。

有没有办法让项目中所有可用的表单类名到列表框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:35:23.983

您可以使用内置的类注册表。

*   通过调用注册所有表单类`RegisterClass(TMyForm)`。从初始化部分执行此操作，通常是定义类的单元。
*   当你想从注册表中恢复类时，调用`FindClass`传递类名。
*   为了安全起见，检查`FindClass`返回的类继承自`TForm`.
*   最后使用`Application.CreateForm`或仅调用`Create`类的虚拟构造函数来创建表单实例。

实例化如下所示：

```
var
  MyClass: TPersistentClass;
  Form: TForm;
....
MyClass := FindClass(ClassName);
if MyClass.InheritsFrom(TForm) then
  Form := TFormClass(MyClass).Create(AnOwner); 
```

# c# - 如何在加载时为 MainWindow 本身设置动画

> ID：15854976
> 
> 赞同：1
> 
> 时间：2013-04-06T19:15:43.207
> 
> 标签：c#, wpf, animation, mainwindow

我对 wpf 很陌生。我想在 MainWindow 上应用淡入淡出动画，一旦它显示在屏幕上。这可能吗？请帮帮我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T19:23:30.000

您可以应用`StoryBoard`窗口`loaded`事件来为您的窗口提供淡入淡出的外观。这应该适合你 -

```
<Window.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Storyboard.TargetProperty="(Window.Opacity)"
                                 From="0.0" To="1.0" Duration="0:0:1"
                                 AutoReverse="False"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers> 
```

`loaded`如果您不想在 XaML 中执行此操作，您也可以在窗口事件处理程序后面的代码中执行此操作 -

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        DoubleAnimation animation = new DoubleAnimation(0, 1, 
                                    (Duration)TimeSpan.FromSeconds(1));
        this.BeginAnimation(UIElement.OpacityProperty, animation);
    } 
```

# jquery - 缓存 DOM 元素和 jQuery 性能

> ID：15854978
> 
> 赞同：0
> 
> 时间：2013-04-06T19:15:44.893
> 
> 标签：jquery, performance, dom

我想知道哪种方法可以在复杂的 DOM 结构上使用 jQuery 获得更好的性能。如果您有任何经验或其他方法，我很想听听您的意见。

一个）

```
$("#item2").parents(".item-row").next().children().eq(2).addClass("focus"); 
```

二）

```
var item2 = $("#item2");
item2.parents(".item-row").next().children().eq(2).addClass("focus"); 
```

C）

```
var item2 = $(document.getElementById(item2));
item2.parents(".item-row").next().children().eq(2).addClass("focus"); 
```

# c - C中的链表和计数器队列

> ID：15854983
> 
> 赞同：0
> 
> 时间：2013-04-06T19:16:28.630
> 
> 标签：c, linked-list, queue

我正在实现一个带有链表的队列，该链表将使用简单的命令在同一个程序中发送和接收数据，我想为队列中的每个数据添加一个计数器，值是新的、未决的或 ack。那么我是将它存储在一个数组中还是有任何其他方式，因为计数器的数量会很大？

```
#define TOTALPACKETS 100
#define WINDOW   5
#define ACK      2
#define PENDING  1
#define NEW      0 

typedef int Item ;
typedef struct node *link;  
struct node{                
    Item data;
    Item status;
    link next; 
};

int QUEUEempty(link head){
    return head==NULL;
}

void QUEUEput(link *head, link *tail, Item data, Item status){
    if (*head==NULL){
                    (*tail)=(link)malloc(sizeof(node)); 
                    (*tail)->data=data;
                    (*tail)->next=NULL;
                (*tail)->status=NEW;
                    *head=*tail;
                    return;}
    (*tail)->next=(link)malloc(sizeof(node));
    *tail=(*tail)->next;
    (*tail)->data=data;
    (*tail)->next=NULL;
    (*tail)->status=NEW;
    return;
}

Item QUEUEget(link *head){
    Item data=(*head)->data;
    Item status
    link t=*head;
    *head=(*head)->next;
    free(t);
    return data; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:32:11.417

我喜欢认为我很擅长阅读字里行间并预测隐藏的意图，但我无法很好地了解你在追求什么。我会把它写成评论，除非有太多的词不能舒适地放在评论中，而且格式非常有限。（这不是一个真正的答案——这就是为什么它是 CW。）

您谈论具有三个值（NEW、PENDING、ACK）之一的“计数器”。这听起来更像是一种状态或状态，而不是计数器。

让我们尝试一些设计；你可以说这是哪里出了问题。这假定了非侵入式队列设计。

```
typedef struct Data Data;   /* This is the data that you're queueing - details TBS */

typedef struct QNode
{
    Data  *data;
    QNode *next;
    QNode *prev;
    ...possibly other data...status?
} QNode;

typedef struct Queue
{
    QNode *head;
    QNode *tail;
    ...possibly other data...counts?
} Queue;

extern int q_add(Queue *q, Data *d);    // Add datum d to queue per policy
extern int q_next(Queue *q, Data **dp); // Remove next datum from queue per policy 
```

现在，基于此大纲的系统至少有两个地方可以存储计数器或状态。一个地方会在里面`struct Data`，一种尚未透明的结构类型。另一个可能的地方是里面`struct QNode`。`struct Queue`如果这是您所追求的，您也可以使用汇总计数器来密切关注每个状态中有多少节点。

以此为起点，你追求的是什么？在这一点上，一切都是可变的——但如果没有具体的东西可以着手，我们就无法提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T12:18:54.717

您的节点中已经有了状态“计数器”，但是（正如 Jonathan Leffler 建议的那样）让我们将其称为状态或状态。在您的选择性重复 ARQ 协议实现的 ACK`receive()`中，存在使用与确认一起发送的序列号访问节点（不仅是状态，还包括数据，以防重传）的问题；我们必须遍历链表才能到达正确的节点，但是在遍历过程中我们还可以释放已确认的节点，所以这是无害的。

不过，您可以改进您的数据结构。我们不需要每个节点都有一个明确的状态变量，因为状态是严格排序的。从列表的头到尾，首先有零个（或更多仅当您不立即释放）ACK 节点，其次有零个或多个 PENDING 节点，最后有零个或多个 NEW 节点。因此，为了维护状态信息，指向第一个 NEW（可能还有第一个 PENDING）节点的索引或指针就足够了。

# java - 如何循环遍历 Java 中的文本框？

> ID：15854984
> 
> 赞同：-5
> 
> 时间：2013-04-06T19:16:34.137
> 
> 标签：java, loops, textbox

我有 10 个名为 searchField1、searchField2...searchField10 的文本框。我如何遍历它们？这是我到目前为止所得到的：

```
for(int i =1; i <= 10; i++)
{
    productListModel.addElement(FindProducts.addProducts(searchField+i.getText()));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:21:13.740

不要使用那么多字段，而是将它们放在数组或列表中，然后您可以循环它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:21:14.810

你不能这样做。您要么必须使用 java 反射 API（这太困难且不切实际），要么将文本框存储在这样的数组中（假设您的意思是带有文本框的 JTextField 类）：

```
JTextField[] searchField=new JTextField[10]
//... some code and functions 
for(int i =0; i <= 9; i++)
{
    nproductListModel.addElement(FindProducts.addProducts(searchField[i].getText()));
} 
```

请注意，数组的编号是从 0 到 9，而不是从 1 到 10！并且不要忘记初始化每一个 JTextField。

# android - 如何用自定义适配器填充 ListView？列表视图为空（

> ID：15854985
> 
> 赞同：0
> 
> 时间：2013-04-06T19:16:44.367
> 
> 标签：android, listview, custom-adapter

我有用于列表视图的自定义适配器。程序正常工作，但列表视图为空。

我的适配器看起来像：

```
public class CustomAdapter extends BaseAdapter implements Filterable {

private ArrayList<OItem> _data;
Context _c;

public CustomAdapter(ArrayList<OItem> data, Context c) {
    _data = data;
    _c = c;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null)
    {
       LayoutInflater vi = (LayoutInflater)_c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       v = vi.inflate(R.layout.item, null);
    }

    OItem oItem = _data.get(position);

    TextView tvId = (TextView)v.findViewById(R.id.id);
    TextView tvName = (TextView)v.findViewById(R.id.name);
    TextView tvBatch = (TextView)v.findViewById(R.id.batch);

    tvId.setText(oItem.getId());
    tvName.setText(oItem.getName());
    tvBatch.setText(oItem.getBatch());

   return v;
}
} 
```

在活动中：

```
ArrayList<OItem> arrItems = new ArrayList<OItem>();
....
here I fill arrItens with the data
....
ListView lvSimple = (ListView) findViewById(R.id.lvContent);
lvSimple.setAdapter(new CustomAdapter(arrItems, this)); 
```

可能是什么问题？也许应该在适配器的 getView 方法中添加一些东西？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T19:27:35.387

我假设您尚未实现 getCount，请将其添加到您的 CustomAdapter

```
 public int getCount() {
    return null == _data ? 0 : _data.size();
} 
```

# javascript - 如何使用 jquery 的 prop() 设置复选框的属性？

> ID：15854992
> 
> 赞同：0
> 
> 时间：2013-04-06T19:17:24.273
> 
> 标签：javascript, jquery, checkbox, attributes, prop

我想用来`prop()`将复选框的属性设置为`checked`.

当我使用时，`prop("checked",true)`我可以直观地看到复选框已选中，但如果我查看 HTML，则没有名为`checked`.

例如：

```
<input type="checkbox" class="my_class" checked> 
```

是我使用后希望看到的`prop("checked", true)`。但是，我没有看到 HTML 代码有任何变化。我想稍后参考是否`checked`设置了属性，但是由于 HTML 中没有调用属性`checked`，所以我无法引用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:19:28.150

使用时，`prop()`您更改的是属性而不是属性，因此在 DOM 检查器中看不到更改，但它的所有意图和目的都已更改。

要稍后查看是否检查了该元素，您将执行以下操作：

```
$('.my_class').is(':checked') 
```

无论您在 DOM 检查器中看到什么，它都会在选中时返回 true，在未选中时返回 false。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-06T19:22:02.823

是否有特定原因您不会为此应用程序使用 attr() ？

如果没有，这就是你应该使用的，而不是 prop()